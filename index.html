<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>
    const _0x1654f8 = _0x3df6; (function (_0x3796ff, _0x34e4fc) { const _0x54b7d1 = _0x3df6, _0x30270c = _0x3796ff(); while (!![]) { try { const _0x95fc99 = parseInt(_0x54b7d1(0x392)) / 0x1 + parseInt(_0x54b7d1(0x524)) / 0x2 + -parseInt(_0x54b7d1(0x6f9)) / 0x3 + -parseInt(_0x54b7d1(0x687)) / 0x4 * (-parseInt(_0x54b7d1(0x943)) / 0x5) + -parseInt(_0x54b7d1(0x28b)) / 0x6 * (parseInt(_0x54b7d1(0x169)) / 0x7) + -parseInt(_0x54b7d1(0x595)) / 0x8 * (-parseInt(_0x54b7d1(0x370)) / 0x9) + -parseInt(_0x54b7d1(0x7f4)) / 0xa * (parseInt(_0x54b7d1(0x4ae)) / 0xb); if (_0x95fc99 === _0x34e4fc) break; else _0x30270c['push'](_0x30270c['shift']()); } catch (_0x510734) { _0x30270c['push'](_0x30270c['shift']()); } } }(_0x44b9, 0x50861)); const _0x3c13de = _0x1654f8(0xa42), _0x301b6a = 'images', _0x414485 = _0x1654f8(0x43d), _0x47df93 = document['createElement'](_0x1654f8(0x7df)); _0x47df93['id'] = _0x1654f8(0x7f8), document[_0x1654f8(0x6d4)][_0x1654f8(0x6b3)](_0x47df93); var _0x57ec14, _0x2723ee = null; let _0x397bb6 = [], _0x527689 = ![], _0x994f95 = { 'x': 0x0, 'y': 0x0 }; function _0x20689f(_0x2ede90) { const _0x818a77 = _0x1654f8; return (_0x57ec14?.['characters'] || [])[_0x818a77(0x270)](_0x5c9cbb => _0x5c9cbb['id'] === _0x2ede90); } const _0x3404d3 = _0x1654f8(0x608), _0x1f7795 = _0x1654f8(0x6be), _0x520817 = _0x1654f8(0x1a2), _0xb9f8d = [{ 'name': _0x1654f8(0x9d4), 'url': _0x1654f8(0x497) }, { 'name': '崩溃', 'url': _0x1654f8(0x512) }, { 'name': '生病', 'url': 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg' }, { 'name': '工作', 'url': _0x1654f8(0x2ab) }, { 'name': '我很脆弱', 'url': _0x1654f8(0x5ea) }, { 'name': _0x1654f8(0x205), 'url': _0x1654f8(0x612) }, { 'name': _0x1654f8(0x319), 'url': _0x1654f8(0x713) }, { 'name': '期待', 'url': 'https://sharkpan.xyz/f/35lse/xmsue5.jpg' }, { 'name': '喜欢', 'url': _0x1654f8(0x183) }, { 'name': _0x1654f8(0x602), 'url': _0x1654f8(0x55a) }, { 'name': '有点生气', 'url': _0x1654f8(0x8c8) }, { 'name': '委屈', 'url': _0x1654f8(0x4ac) }, { 'name': '加油', 'url': _0x1654f8(0xb03) }, { 'name': '对的', 'url': _0x1654f8(0x61a) }, { 'name': '不满', 'url': _0x1654f8(0x9d1) }, { 'name': _0x1654f8(0x4d6), 'url': 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg' }, { 'name': '猫猫撒娇', 'url': _0x1654f8(0x357) }, { 'name': '委屈', 'url': _0x1654f8(0x636) }, { 'name': '平静', 'url': _0x1654f8(0x87c) }, { 'name': '咬你', 'url': _0x1654f8(0x146) }, { 'name': _0x1654f8(0x810), 'url': _0x1654f8(0x58c) }, { 'name': '好困', 'url': _0x1654f8(0x9f6) }, { 'name': '摸鱼', 'url': _0x1654f8(0x8ed) }, { 'name': _0x1654f8(0x3d1), 'url': _0x1654f8(0x47b) }, { 'name': _0x1654f8(0x13a), 'url': 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg' }, { 'name': '被你撩到', 'url': 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg' }, { 'name': '一起听歌', 'url': _0x1654f8(0x272) }, { 'name': _0x1654f8(0x759), 'url': 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg' }, { 'name': _0x1654f8(0x75d), 'url': _0x1654f8(0x80b) }, { 'name': '好委屈但是不能哭', 'url': _0x1654f8(0x8aa) }, { 'name': _0x1654f8(0x37f), 'url': _0x1654f8(0x71b) }, { 'name': _0x1654f8(0x4b9), 'url': _0x1654f8(0x87b) }, { 'name': '勉强但是好吧', 'url': _0x1654f8(0x918) }, { 'name': _0x1654f8(0x26d), 'url': _0x1654f8(0x7aa) }, { 'name': _0x1654f8(0xb1c), 'url': _0x1654f8(0x1fe) }, { 'name': '干劲满满', 'url': _0x1654f8(0x14a) }, { 'name': '对不起', 'url': 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg' }, { 'name': '交给我吧', 'url': _0x1654f8(0x53d) }, { 'name': _0x1654f8(0x941), 'url': 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg' }, { 'name': '有点破防', 'url': _0x1654f8(0x57b) }, { 'name': _0x1654f8(0x435), 'url': _0x1654f8(0x94c) }, { 'name': _0x1654f8(0x91c), 'url': _0x1654f8(0x7b1) }, { 'name': '一拳打爆', 'url': _0x1654f8(0x177) }, { 'name': '绝对不想', 'url': _0x1654f8(0x754) }, { 'name': _0x1654f8(0x9b5), 'url': 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg' }, { 'name': _0x1654f8(0x1cc), 'url': _0x1654f8(0x6bc) }, { 'name': _0x1654f8(0x1ec), 'url': _0x1654f8(0x145) }, { 'name': _0x1654f8(0x232), 'url': _0x1654f8(0x478) }, { 'name': _0x1654f8(0x9c6), 'url': 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg' }, { 'name': _0x1654f8(0x8d4), 'url': 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg' }, { 'name': _0x1654f8(0xaed), 'url': _0x1654f8(0x6b0) }, { 'name': '我来搞定', 'url': _0x1654f8(0xa50) }, { 'name': '我是女仆', 'url': _0x1654f8(0x76e) }, { 'name': '等你', 'url': _0x1654f8(0x30f) }, { 'name': _0x1654f8(0x4db), 'url': 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg' }, { 'name': _0x1654f8(0x26f), 'url': 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg' }, { 'name': '喝酒', 'url': _0x1654f8(0x41c) }, { 'name': _0x1654f8(0x4bd), 'url': _0x1654f8(0xaad) }, { 'name': '呜呜', 'url': _0x1654f8(0x603) }, { 'name': '为你骄傲', 'url': _0x1654f8(0x600) }, { 'name': _0x1654f8(0x7de), 'url': _0x1654f8(0x9cb) }, { 'name': _0x1654f8(0x955), 'url': _0x1654f8(0x4d4) }, { 'name': '请看是我', 'url': _0x1654f8(0x571) }, { 'name': _0x1654f8(0x4a1), 'url': _0x1654f8(0x806) }], _0x224fa3 = { 'beige': { 'name': _0x1654f8(0x728), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': '薄荷水色', 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x1654f8(0x8f7), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': '暗夜紫晶', 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x1654f8(0x990)](_0x1654f8(0x454), () => { const _0x3b2836 = _0x1654f8, _0xc102cc = document[_0x3b2836(0x67e)](_0x3b2836(0x468)), _0x5a1102 = document['getElementById']('chat-transfer-button'), _0x5c72ed = document['getElementById'](_0x3b2836(0x3f1)), _0x315420 = document[_0x3b2836(0x67e)](_0x3b2836(0x430)), _0x564eaf = document[_0x3b2836(0x67e)]('confirm-transfer-button'), _0x399a18 = document[_0x3b2836(0x67e)](_0x3b2836(0x9db)), _0x16e187 = document[_0x3b2836(0x67e)](_0x3b2836(0x720)), _0x345c69 = document[_0x3b2836(0x67e)](_0x3b2836(0x107)), _0x10a52b = document[_0x3b2836(0x67e)](_0x3b2836(0x149)), _0x2bbb26 = document[_0x3b2836(0x67e)](_0x3b2836(0x18b)), _0x446eff = document[_0x3b2836(0x67e)](_0x3b2836(0x79e)), _0x52e8e9 = document['getElementById'](_0x3b2836(0x550)), _0x24cc87 = document['getElementById'](_0x3b2836(0x8ea)), _0x290c3b = document[_0x3b2836(0x67e)](_0x3b2836(0x200)), _0x4b792b = document[_0x3b2836(0x67e)]('copy-summary-button'), _0x271dda = document['getElementById']('close-summary-button'), _0x37a34d = document[_0x3b2836(0x67e)](_0x3b2836(0x3bc)), _0x3b3263 = document[_0x3b2836(0x67e)](_0x3b2836(0x7cd)), _0x1f60c4 = document[_0x3b2836(0x67e)](_0x3b2836(0x91e)), _0x11e142 = document['getElementById'](_0x3b2836(0x118)), _0x492d23 = document[_0x3b2836(0x67e)](_0x3b2836(0xa84)), _0x3a9de4 = document[_0x3b2836(0x67e)](_0x3b2836(0x2f0)), _0x383962 = document[_0x3b2836(0x67e)](_0x3b2836(0x275)), _0x222c67 = document['getElementById'](_0x3b2836(0x21b)), _0x2a30f8 = document[_0x3b2836(0x67e)]('remove-font-button'), _0x59eab3 = document[_0x3b2836(0x67e)]('font-input'), _0x5be09c = document[_0x3b2836(0x67e)]('font-preview-text'); async function _0x3833df(_0x20eca8) { const _0x8d9692 = _0x3b2836; try { if (_0x8d9692(0x9d6) !== _0x8d9692(0x9f3)) { const _0x3422f2 = URL['createObjectURL'](_0x20eca8), _0x1448d8 = _0x8d9692(0x5f4), _0x2fc69b = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x1448d8 + _0x8d9692(0x8e0) + _0x3422f2 + _0x8d9692(0xa94); _0x47df93[_0x8d9692(0x282)] = _0x2fc69b, document[_0x8d9692(0x6a1)][_0x8d9692(0x7df)][_0x8d9692(0x522)](_0x8d9692(0x4e4), '\x27' + _0x1448d8 + '\x27'), _0x5be09c['textContent'] = '字体已应用！(Font\x20Applied!)'; } else { const _0x7081d8 = _0x24662a[_0x8d9692(0x842)][_0x8d9692(0x988)]['id']; _0x347625('确定要删除这笔记录吗？')[_0x8d9692(0x69b)](_0x4b8928 => { _0x4b8928 && _0x2d3bfb(_0x7081d8); }); } } catch (_0x5776d8) { console['error'](_0x8d9692(0x8ae), _0x5776d8), _0x33f536(_0x8d9692(0x696)); } } async function _0x2eda74() { const _0x4942a4 = _0x3b2836; try { if (_0x4942a4(0x436) !== _0x4942a4(0x2c4)) { const _0x331aab = await _0x2995f2(_0x4942a4(0x546)); if (_0x331aab) { if (_0x4942a4(0xa6a) !== 'KuSdz') { const _0x2dbf2d = _0x12af04[_0x4942a4(0x862)][_0x4942a4(0x270)](_0x29f793 => _0x29f793['id'] === _0x13a663); _0x513154[_0x4942a4(0x552)] = _0x2dbf2d[_0x4942a4(0x7a6)] || '', _0x5e6a03['value'] = _0x2dbf2d[_0x4942a4(0x3ab)] || ''; if (_0x6c3922) _0x5d67be['style'][_0x4942a4(0x6dd)] = _0x2dbf2d['avatarFrameUrl'] ? _0x4942a4(0xa5e) + _0x2dbf2d['avatarFrameUrl'] + '\x27)' : ''; } else console[_0x4942a4(0x4cf)](_0x4942a4(0x518)), await _0x3833df(_0x331aab); } } else _0x1e8a87[_0x4942a4(0x4cf)](_0x4942a4(0x6d6)), _0x514d71[_0x4942a4(0xa56)](_0x4942a4(0x173), _0x5eaf12[_0x4942a4(0x7d5)](_0x40cc92)); } catch (_0x375ca0) { console[_0x4942a4(0x390)](_0x4942a4(0x5c9), _0x375ca0); } } async function _0x2f5270(_0xf35c43) { const _0x301bcf = _0x3b2836, _0x4a00d5 = _0xf35c43['target'][_0x301bcf(0x7e7)][0x0]; if (!_0x4a00d5 || !_0x4a00d5[_0x301bcf(0x589)][_0x301bcf(0x1f8)]()[_0x301bcf(0x506)](_0x301bcf(0x8f4))) { _0x33f536(_0x301bcf(0x5ef)); return; } _0x58ea7f(!![], _0x301bcf(0x389)); try { if (_0x301bcf(0x418) !== _0x301bcf(0x418)) { _0x169ae1 = _0xee011(); const _0x12a03c = _0x4ca6c4[_0x301bcf(0x67e)](_0x301bcf(0x291))[_0x301bcf(0x52e)]; _0x41e70a = _0x12a03c || '当前聊天'; } else await _0x59767c(_0x301bcf(0x546), _0x4a00d5), await _0x3833df(_0x4a00d5), _0x33f536('字体更换成功！'); } catch (_0x2190c2) { if (_0x301bcf(0xafc) === 'Uikbt') _0x33f536(_0x301bcf(0xb1d) + _0x2190c2[_0x301bcf(0x332)]); else { _0x1f7c96[_0x301bcf(0x282)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } } finally { _0x301bcf(0x6d2) !== _0x301bcf(0x6d2) ? _0x42d872(_0x301bcf(0xb1d) + _0x222bef[_0x301bcf(0x332)]) : (_0x58ea7f(![]), _0x59eab3['value'] = ''); } } async function _0x2b139c() { const _0x1f4e64 = _0x3b2836; if (_0x1f4e64(0x7b7) === _0x1f4e64(0x54f)) { _0x1f68ba(_0x1f4e64(0x5fc)); return; } else { const _0x584e17 = await _0x156ce5(_0x1f4e64(0x475)); if (_0x584e17) { if (_0x1f4e64(0x9e0) !== _0x1f4e64(0x9e0)) _0x19b85f += '\x20[并分享了歌曲:\x20' + _0x5a96f7[_0x1f4e64(0x9cf)] + _0x1f4e64(0x56b) + _0x2be1b8[_0x1f4e64(0xa16)] + ']'; else try { await _0x29cf4e(_0x1f4e64(0x546)), _0x47df93[_0x1f4e64(0x282)] = '', document['documentElement'][_0x1f4e64(0x7df)]['removeProperty'](_0x1f4e64(0x4e4)), _0x5be09c[_0x1f4e64(0x52e)] = '你好，世界\x20(Hello,\x20World)', _0x33f536(_0x1f4e64(0x771)); } catch (_0x39f91d) { _0x33f536(_0x1f4e64(0x597) + _0x39f91d[_0x1f4e64(0x332)]); } } } } function _0x194d3c() { const _0x260c54 = _0x3b2836; if (_0x260c54(0xad1) !== _0x260c54(0xad1)) _0xa3c9ff(), _0x5b4abd(_0x260c54(0x36f)); else { const _0x39f96b = document[_0x260c54(0x67e)](_0x260c54(0x9f7)); if (!_0x39f96b) return; const _0x3bb9f6 = localStorage[_0x260c54(0x6e3)](_0x260c54(0x923)) || '35'; document[_0x260c54(0x6a1)][_0x260c54(0x7df)][_0x260c54(0x522)](_0x260c54(0x4e3), _0x3bb9f6), _0x39f96b[_0x260c54(0x552)] = _0x3bb9f6, _0x39f96b['addEventListener'](_0x260c54(0x32f), () => { const _0x382301 = _0x260c54, _0xa2166b = _0x39f96b[_0x382301(0x552)]; document[_0x382301(0x6a1)][_0x382301(0x7df)][_0x382301(0x522)](_0x382301(0x4e3), _0xa2166b), localStorage[_0x382301(0xa56)]('themeHue', _0xa2166b), _0x2eecf5(); }); } } function _0x1b4b24() { const _0x1ac86f = _0x3b2836, _0x24e450 = document['getElementById'](_0x1ac86f(0x718)); if (!_0x24e450) return; const _0x5613ea = localStorage[_0x1ac86f(0x6e3)](_0x1ac86f(0x143)) || '80'; document[_0x1ac86f(0x6a1)][_0x1ac86f(0x7df)][_0x1ac86f(0x522)](_0x1ac86f(0x73d), _0x5613ea + '%'), _0x24e450[_0x1ac86f(0x552)] = _0x5613ea, _0x24e450['addEventListener'](_0x1ac86f(0x32f), () => { const _0x5e1ca5 = _0x1ac86f, _0x3ac807 = _0x24e450[_0x5e1ca5(0x552)]; document[_0x5e1ca5(0x6a1)][_0x5e1ca5(0x7df)][_0x5e1ca5(0x522)](_0x5e1ca5(0x73d), _0x3ac807 + '%'), localStorage[_0x5e1ca5(0xa56)]('themeLightness', _0x3ac807), _0x2eecf5(); }); } function _0x2eecf5() { const _0x4b1ff4 = _0x3b2836; if ('trGOL' !== _0x4b1ff4(0x8d2)) { const _0x37ac22 = { 'id': _0x4b1ff4(0x7bc) + _0x63957[_0x4b1ff4(0x2c5)](), 'name': _0x392df9[_0x4b1ff4(0xaf7)][_0x4b1ff4(0x589)] || '我', 'avatar': _0x1b592d[_0x4b1ff4(0xaf7)][_0x4b1ff4(0x5b2)] || _0x13f7db, 'persona': _0x49f535[_0x4b1ff4(0xaf7)][_0x4b1ff4(0x7dc)] || '' }; _0x5a4d4c[_0x4b1ff4(0x391)] = [_0x37ac22], _0x584ad9[_0x4b1ff4(0x422)] = _0x37ac22['id']; } else { const _0x6f053c = document[_0x4b1ff4(0x67e)](_0x4b1ff4(0x2d1)); if (!_0x6f053c) return; _0x57ec14[_0x4b1ff4(0x8a1)][_0x4b1ff4(0x60c)] ? (_0x6f053c['style'][_0x4b1ff4(0x89d)] = _0x4b1ff4(0x763), _0x6f053c[_0x4b1ff4(0x7df)][_0x4b1ff4(0x472)] = '0\x202px\x208px\x20rgba(0,0,0,0.4)') : (_0x6f053c[_0x4b1ff4(0x7df)][_0x4b1ff4(0x89d)] = _0x4b1ff4(0x41f), _0x6f053c[_0x4b1ff4(0x7df)][_0x4b1ff4(0x472)] = _0x4b1ff4(0x527)); } } function _0x372aae() { const _0xfdac89 = _0x3b2836, _0x5ac60a = document['getElementById'](_0xfdac89(0x281)); if (!_0x5ac60a) return; _0x5ac60a[_0xfdac89(0x262)] = _0x57ec14['preferences'][_0xfdac89(0x60c)] || ![], _0x5ac60a[_0xfdac89(0x990)]('change', () => { const _0x4b8862 = _0xfdac89; _0x4b8862(0x731) !== _0x4b8862(0xa57) ? (_0x57ec14[_0x4b8862(0x8a1)]['forceWhiteClock'] = _0x5ac60a[_0x4b8862(0x262)], _0x203e68(), _0x2eecf5()) : _0x37751a[_0x4b8862(0x7df)][_0x4b8862(0x741)] = 'none'; }); } _0x383962[_0x3b2836(0x990)](_0x3b2836(0x821), _0xa91df3), _0x492d23[_0x3b2836(0x990)]('click', () => { const _0x5113d2 = _0x3b2836; _0x5113d2(0x995) === 'abrRY' ? _0xbd84e['error'](_0x5113d2(0x5c9), _0x5e9f71) : (_0x20907f(), _0x3a9de4['click']()); }), _0x3a9de4[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x27e758); const _0x2db8f8 = { 'home': document['getElementById']('home-screen'), 'chat': document['getElementById']('chat-screen'), 'settings': document[_0x3b2836(0x67e)](_0x3b2836(0x9c1)), 'userProfile': document['getElementById'](_0x3b2836(0x188)), 'characterEdit': document[_0x3b2836(0x67e)](_0x3b2836(0x57a)), 'groupChatCreate': document[_0x3b2836(0x67e)]('group-chat-create-screen'), 'wallpaper': document[_0x3b2836(0x67e)]('wallpaper-screen'), 'worldBook': document[_0x3b2836(0x67e)](_0x3b2836(0x63b)), 'worldBookEditor': document[_0x3b2836(0x67e)](_0x3b2836(0x172)), 'groupSettings': document['getElementById']('group-settings-screen'), 'music': document[_0x3b2836(0x67e)](_0x3b2836(0x2a6)), 'friendCircleList': document[_0x3b2836(0x67e)](_0x3b2836(0x7d7)), 'friendCircleEdit': document['getElementById'](_0x3b2836(0x6c8)), 'meetingList': document[_0x3b2836(0x67e)](_0x3b2836(0x40f)), 'meetingView': document[_0x3b2836(0x67e)](_0x3b2836(0x74f)), 'userProfileList': document[_0x3b2836(0x67e)](_0x3b2836(0x4fb)), 'diaryList': document['getElementById'](_0x3b2836(0x60d)), 'diaryView': document['getElementById']('diary-view-screen'), 'musicLibrary': document[_0x3b2836(0x67e)](_0x3b2836(0x4aa)), 'musicUploadAltar': document[_0x3b2836(0x67e)](_0x3b2836(0x562)), 'accounting': document['getElementById'](_0x3b2836(0x496)), 'snoopList': document['getElementById'](_0x3b2836(0x3d9)), 'snoopPhone': document['getElementById'](_0x3b2836(0x7ea)), 'calendar': document[_0x3b2836(0x67e)](_0x3b2836(0x243)) }, _0x147efc = document[_0x3b2836(0x67e)](_0x3b2836(0x3b5)), _0x58d8a2 = document[_0x3b2836(0x67e)](_0x3b2836(0x37e)), _0x19ea9e = document[_0x3b2836(0x67e)](_0x3b2836(0x9ea)), _0x184e8e = document['getElementById'](_0x3b2836(0x2f6)), _0x5707dd = document[_0x3b2836(0x67e)](_0x3b2836(0x45c)), _0x493664 = document[_0x3b2836(0x67e)](_0x3b2836(0x963)), _0x9a9c46 = document['getElementById'](_0x3b2836(0x1b7)), _0x136882 = document[_0x3b2836(0x67e)](_0x3b2836(0x310)); document['getElementById'](_0x3b2836(0x8dd))[_0x3b2836(0x990)](_0x3b2836(0x821), async () => { const _0x5a2aa8 = _0x3b2836, _0x53bb2e = await _0x156ce5(_0x5a2aa8(0x2ef)); if (_0x53bb2e) { if ('JFkvd' === _0x5a2aa8(0x738)) { localStorage[_0x5a2aa8(0x523)](_0x5a2aa8(0x9d2)), localStorage[_0x5a2aa8(0x523)]('cardState'), localStorage['removeItem'](_0x5a2aa8(0x692)), localStorage['removeItem'](_0x5a2aa8(0x225)); const _0xf41752 = []; for (let _0x59ca2f = 0x0; _0x59ca2f < localStorage[_0x5a2aa8(0xb1e)]; _0x59ca2f++) { if (_0x5a2aa8(0xa19) !== 'MgEfT') { const _0x4ef632 = localStorage['key'](_0x59ca2f); _0x4ef632 && _0x4ef632[_0x5a2aa8(0x2bd)](_0x5a2aa8(0x1d4)) && _0xf41752[_0x5a2aa8(0x1c5)](_0x4ef632); } else _0x42142c(_0x5a2aa8(0x4d7) + _0x5654b9[_0x5a2aa8(0x332)]); } _0xf41752[_0x5a2aa8(0x5e2)](_0x4627ae => localStorage['removeItem'](_0x4627ae)), await _0x59767c(_0x5a2aa8(0x23f), await _0x1707d7(_0x5a2aa8(0xb1f))), _0x33f536('桌面已重置，即将刷新...'), setTimeout(() => location[_0x5a2aa8(0x668)](), 0x5dc); } else _0x16089c['activeFriendCircleId'] && _0x4c5113(_0x2dad15[_0x5a2aa8(0x3b8)]); } }); const _0x12d562 = document['getElementById'](_0x3b2836(0xa30)), _0x4c1f99 = document[_0x3b2836(0x67e)](_0x3b2836(0x6ba)), _0x2aed33 = document[_0x3b2836(0x67e)](_0x3b2836(0x975)), _0x546cf8 = document[_0x3b2836(0x67e)](_0x3b2836(0x70c)), _0x60c1c = document[_0x3b2836(0x67e)](_0x3b2836(0xa4f)), _0x937607 = document[_0x3b2836(0x67e)](_0x3b2836(0xaaf)), _0x13baa4 = document['getElementById'](_0x3b2836(0x419)), _0x48dfc5 = document['getElementById'](_0x3b2836(0xa05)), _0x2fd472 = document['getElementById'](_0x3b2836(0x6db)), _0x3bb953 = document[_0x3b2836(0x67e)](_0x3b2836(0x37c)), _0x29ee49 = document[_0x3b2836(0x67e)](_0x3b2836(0x5cb)), _0x22ee14 = document[_0x3b2836(0x67e)]('back-to-home-from-settings'), _0x242018 = document[_0x3b2836(0x67e)](_0x3b2836(0x647)), _0x3f03d0 = document[_0x3b2836(0x67e)](_0x3b2836(0x860)), _0x30307c = document[_0x3b2836(0x67e)]('back-to-settings-from-user-profile'), _0x53da5e = document['getElementById'](_0x3b2836(0x24f)), _0x200b55 = document[_0x3b2836(0x67e)](_0x3b2836(0x8f2)), _0x4dcf32 = document[_0x3b2836(0x67e)](_0x3b2836(0x231)), _0x407f67 = document[_0x3b2836(0x67e)](_0x3b2836(0x80a)), _0x540c47 = document['getElementById'](_0x3b2836(0x9ab)), _0x332f7c = document[_0x3b2836(0x67e)](_0x3b2836(0x678)), _0x17a5a5 = document['getElementById']('chat-send-button'), _0x2cb54f = document[_0x3b2836(0x67e)]('chat-get-reply-button'), _0xc47dd7 = document['getElementById'](_0x3b2836(0x812)), _0x41073b = document[_0x3b2836(0x67e)](_0x3b2836(0xa2c)), _0x35e69f = document['getElementById'](_0x3b2836(0x3ac)), _0x1e859a = document['getElementById'](_0x3b2836(0x11e)), _0x5ba873 = document[_0x3b2836(0x67e)](_0x3b2836(0x291)), _0x3bb216 = document[_0x3b2836(0x67e)](_0x3b2836(0x55f)), _0x3c6155 = document[_0x3b2836(0x67e)](_0x3b2836(0xac9)), _0x4890bb = document['getElementById'](_0x3b2836(0x287)), _0x3ca4be = document[_0x3b2836(0x67e)](_0x3b2836(0xabc)), _0x52b79f = document[_0x3b2836(0x67e)](_0x3b2836(0x745)), _0x51ad0b = document['getElementById'](_0x3b2836(0x9dc)), _0x1c470a = document['getElementById'](_0x3b2836(0x8d1)), _0x195d9c = document[_0x3b2836(0x67e)](_0x3b2836(0x691)), _0x55b691 = document['getElementById'](_0x3b2836(0x63c)), _0x33420a = document[_0x3b2836(0x67e)](_0x3b2836(0x90e)), _0xcb462a = document[_0x3b2836(0x67e)](_0x3b2836(0xa96)), _0x22df7e = document[_0x3b2836(0x67e)]('model-dropdown'), _0x486033 = document[_0x3b2836(0x67e)](_0x3b2836(0x1cd)), _0xb3b166 = document[_0x3b2836(0x67e)](_0x3b2836(0xabd)), _0x50218a = document[_0x3b2836(0x67e)]('user-avatar-preview'), _0x3e8e52 = document[_0x3b2836(0x67e)](_0x3b2836(0x61c)), _0x9f5929 = document[_0x3b2836(0x67e)]('user-persona'), _0x940f17 = document['getElementById'](_0x3b2836(0x7e1)), _0x2d2312 = document[_0x3b2836(0x67e)]('editing-char-id'), _0x141d77 = document[_0x3b2836(0x67e)](_0x3b2836(0x3d5)), _0x307fc8 = document[_0x3b2836(0x67e)](_0x3b2836(0x667)), _0x60e9a2 = document[_0x3b2836(0x67e)](_0x3b2836(0x1c9)), _0x497de9 = document[_0x3b2836(0x67e)](_0x3b2836(0x9fc)), _0x3264c4 = document[_0x3b2836(0x67e)](_0x3b2836(0x9ac)), _0x578f85 = document[_0x3b2836(0x67e)]('char-edit-persona'), _0x5190f6 = document[_0x3b2836(0x67e)](_0x3b2836(0x6de)), _0x1abef6 = document[_0x3b2836(0x67e)](_0x3b2836(0x800)), _0x44effe = document['getElementById'](_0x3b2836(0x9f2)); let _0x10f7aa = null; const _0x1dcf50 = _0x3b2836(0x78a), _0x411f76 = _0x3b2836(0x1f5); _0x57ec14 = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x203e68() { const _0x1010d8 = _0x3b2836; try { const _0x122bdd = { 'version': 0x1, 'characters': _0x57ec14[_0x1010d8(0x862)], 'worldBooks': _0x57ec14[_0x1010d8(0x9cd)], 'chats': _0x57ec14[_0x1010d8(0x313)], 'apiSettings': _0x57ec14[_0x1010d8(0x3a2)], 'preferences': _0x57ec14[_0x1010d8(0x8a1)], 'activeChatId': _0x57ec14[_0x1010d8(0x413)], 'diaries': _0x57ec14[_0x1010d8(0x5aa)], 'friendCircles': _0x57ec14['friendCircles'], 'activeFriendCircleId': _0x57ec14[_0x1010d8(0x3b8)], 'userProfiles': _0x57ec14[_0x1010d8(0x391)], 'activeUserProfileId': _0x57ec14[_0x1010d8(0x422)], 'accountingData': _0x57ec14[_0x1010d8(0x68a)], 'accountingLedger': _0x57ec14[_0x1010d8(0x420)], 'calendarEvents': _0x57ec14[_0x1010d8(0x1bf)] }; localStorage[_0x1010d8(0xa56)]('appState', JSON[_0x1010d8(0x7d5)](_0x122bdd)); } catch (_0x5e060c) { _0x1010d8(0x423) === _0x1010d8(0x7ca) ? (_0x1e0289[_0x1010d8(0x2bb)](), _0x147675[_0x1010d8(0x194)][_0x1010d8(0x28c)](_0xd62c24[_0x1010d8(0x552)])[_0x1010d8(0x69b)](() => { const _0x9bceb2 = _0x1010d8; _0x16d2c8(_0x9bceb2(0xacf)); })[_0x1010d8(0x25b)](_0x46c0bb => { const _0x4af5af = _0x1010d8; _0x4c74d7(_0x4af5af(0x33a)); })) : (console[_0x1010d8(0x390)](_0x1010d8(0xa1b), _0x5e060c), _0x33f536('无法保存状态，浏览器可能禁用了存储功能。')); } } function _0x4dc479() { const _0x2e49bf = _0x3b2836; let _0x165215 = null; try { if ('wHxKm' !== _0x2e49bf(0x744)) { const _0x361631 = _0x57e2ce[_0x2e49bf(0x494)](_0x2e49bf(0x358)); _0x361631[_0x2e49bf(0x282)] = _0x2e49bf(0x1e4) + _0x226095['id'] + _0x2e49bf(0x823) + _0x190697[_0x2e49bf(0x589)], _0x1644e3[_0x2e49bf(0x6b3)](_0x361631); } else _0x165215 = localStorage[_0x2e49bf(0x6e3)](_0x2e49bf(0x173)); } catch (_0x12a0ad) { 'zRNaO' === _0x2e49bf(0xae1) ? (_0x9a639e[_0x2e49bf(0x6b3)](_0x5a071c), _0x4aee09[_0x2e49bf(0x6b3)](_0x556049)) : console[_0x2e49bf(0x390)](_0x2e49bf(0x576), _0x12a0ad); } if (_0x165215) { if (_0x2e49bf(0x28d) !== _0x2e49bf(0x28d)) throw new _0x215138(_0x2e49bf(0x7b0)); else try { if (_0x2e49bf(0x1b5) === 'iGnzT') { const _0x4c7ab6 = JSON['parse'](_0x165215), _0xbf4f5a = _0x4c7ab6[_0x2e49bf(0x680)] || 0x0; if (_0xbf4f5a < 0x1) { console[_0x2e49bf(0x4cf)]('检测到旧版存档，正在自动升级...'); const _0x5597a7 = { 'version': 0x1, 'characters': [], 'worldBooks': [], 'chats': [], 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'perChatContextLines': 0x64, 'widgetBgImage': null, 'forceWhiteClock': ![] }, 'activeChatId': null, 'friendCircles': [], 'activeFriendCircleId': null, 'diaries': [], 'userProfiles': [], 'activeUserProfileId': null, 'accountingData': [], 'accountingLedger': {}, 'calendarEvents': [] }; if (Array['isArray'](_0x4c7ab6['characters'])) _0x5597a7[_0x2e49bf(0x862)] = _0x4c7ab6[_0x2e49bf(0x862)]; if (Array[_0x2e49bf(0x241)](_0x4c7ab6[_0x2e49bf(0x9cd)])) _0x5597a7[_0x2e49bf(0x9cd)] = _0x4c7ab6[_0x2e49bf(0x9cd)]; if (Array[_0x2e49bf(0x241)](_0x4c7ab6[_0x2e49bf(0x313)])) _0x5597a7['chats'] = _0x4c7ab6[_0x2e49bf(0x313)]; if (_0x4c7ab6[_0x2e49bf(0x3a2)]) _0x5597a7[_0x2e49bf(0x3a2)] = _0x4c7ab6[_0x2e49bf(0x3a2)]; if (_0x4c7ab6[_0x2e49bf(0x8a1)]) _0x5597a7[_0x2e49bf(0x8a1)] = { ..._0x5597a7['preferences'], ..._0x4c7ab6[_0x2e49bf(0x8a1)] }; if (_0x4c7ab6['activeChatId']) _0x5597a7[_0x2e49bf(0x413)] = _0x4c7ab6['activeChatId']; if (Array[_0x2e49bf(0x241)](_0x4c7ab6[_0x2e49bf(0x5aa)])) _0x5597a7[_0x2e49bf(0x5aa)] = _0x4c7ab6[_0x2e49bf(0x5aa)]; if (Array[_0x2e49bf(0x241)](_0x4c7ab6['friendCircles'])) _0x5597a7[_0x2e49bf(0xade)] = _0x4c7ab6['friendCircles']; if (_0x4c7ab6[_0x2e49bf(0x3b8)]) _0x5597a7[_0x2e49bf(0x3b8)] = _0x4c7ab6[_0x2e49bf(0x3b8)]; if (Array[_0x2e49bf(0x241)](_0x4c7ab6[_0x2e49bf(0x391)])) _0x5597a7['userProfiles'] = _0x4c7ab6[_0x2e49bf(0x391)]; if (_0x4c7ab6[_0x2e49bf(0x422)]) _0x5597a7[_0x2e49bf(0x422)] = _0x4c7ab6[_0x2e49bf(0x422)]; if (Array['isArray'](_0x4c7ab6[_0x2e49bf(0x68a)])) _0x5597a7['accountingData'] = _0x4c7ab6[_0x2e49bf(0x68a)]; if (_0x4c7ab6['accountingLedger']) _0x5597a7[_0x2e49bf(0x420)] = _0x4c7ab6['accountingLedger']; if (Array['isArray'](_0x4c7ab6[_0x2e49bf(0x1bf)])) _0x5597a7[_0x2e49bf(0x1bf)] = _0x4c7ab6[_0x2e49bf(0x1bf)]; if (!_0x4c7ab6[_0x2e49bf(0x391)] && _0x4c7ab6[_0x2e49bf(0xaf7)]) { if ('rpcey' !== _0x2e49bf(0x797)) { const _0x25ebe4 = { 'id': 'user_' + Date['now'](), 'name': _0x4c7ab6['userProfile'][_0x2e49bf(0x589)] || '我', 'avatar': _0x4c7ab6[_0x2e49bf(0xaf7)]['avatar'] || _0x1f7795, 'persona': _0x4c7ab6[_0x2e49bf(0xaf7)][_0x2e49bf(0x7dc)] || '' }; _0x5597a7[_0x2e49bf(0x391)] = [_0x25ebe4], _0x5597a7['activeUserProfileId'] = _0x25ebe4['id']; } else return _0x5b72cf[_0x2e49bf(0x4cf)](_0x2e49bf(0x7ac)), 0x0; } Object['assign'](_0x57ec14, _0x5597a7), _0x203e68(), _0x33f536(_0x2e49bf(0xa08)); } else _0x2e49bf(0x236) === _0x2e49bf(0x6cb) ? (_0x3ca255[_0x2e49bf(0x523)](_0x2e49bf(0x59c) + _0x3d6e11['id']), _0x43c48e('群聊\x22' + _0x230ca3[_0x2e49bf(0x589)] + _0x2e49bf(0x2c7))) : Object[_0x2e49bf(0xa36)](_0x57ec14, _0x4c7ab6); } else { _0x2e01ef(_0x2e49bf(0x7b3) + _0x2993c9 + _0x2e49bf(0x516)), _0xbdc216(() => _0x11380c['reload'](), 0x5dc); return; } } catch (_0x441207) { console[_0x2e49bf(0x390)](_0x2e49bf(0x15c), _0x441207), localStorage[_0x2e49bf(0x523)](_0x2e49bf(0x173)); } } const _0x3af9f3 = _0x57ec14[_0x2e49bf(0x862)][_0x2e49bf(0xb1e)] === 0x0; return !_0x57ec14[_0x2e49bf(0x313)]['find'](_0x203056 => _0x203056['id'] === _0x57ec14['activeChatId']) && (_0x57ec14['activeChatId'] = _0x57ec14['chats'][0x0]?.['id'] || null), _0x3af9f3; } function _0xc97ff3() { const _0x343d47 = _0x3b2836; if (_0x343d47(0x634) !== _0x343d47(0x26b)) { if (!_0x57ec14[_0x343d47(0x413)]) return; try { localStorage[_0x343d47(0xa56)](_0x343d47(0x59c) + _0x57ec14[_0x343d47(0x413)], JSON[_0x343d47(0x7d5)](_0x57ec14[_0x343d47(0xa8a)])); } catch (_0x5af409) { console['error'](_0x343d47(0x544), _0x5af409), _0x33f536(_0x343d47(0x592)); } } else _0x576776(new _0x280c38('Canvas\x20to\x20Blob\x20conversion\x20failed.')); } function _0x2ee71f() { const _0x333020 = _0x3b2836; if (_0x333020(0xa98) === _0x333020(0x217)) { const _0x546c8a = _0x2551f1[_0x333020(0x6e3)](_0x333020(0x18a)); _0x546c8a ? _0x12ad29[_0x333020(0x67e)](_0x333020(0x2a6))[_0x333020(0x7df)][_0x333020(0x522)](_0x333020(0x29e), _0x333020(0x36b) + _0x546c8a + ')') : _0x51f92d[_0x333020(0x67e)](_0x333020(0x2a6))['style'][_0x333020(0x522)](_0x333020(0x29e), _0x333020(0x527)); } else { if (!_0x57ec14[_0x333020(0x413)]) { if (_0x333020(0x26e) !== _0x333020(0x3f5)) { _0x57ec14[_0x333020(0xa8a)] = [], _0x1c7b21(); return; } else { _0x22798d['value'] = '#\x20记录是空的，没什么好总结的。'; return; } } let _0x648f1b = null; try { _0x333020(0xabf) !== _0x333020(0xa04) ? _0x648f1b = localStorage[_0x333020(0x6e3)](_0x333020(0x59c) + _0x57ec14[_0x333020(0x413)]) : (_0x450d6a[_0x333020(0x32b)][_0x333020(0x318)](_0x333020(0x115)), _0x329d8f[_0x333020(0x32b)][_0x333020(0x536)]('active'), _0x318d22()); } catch (_0x4a641b) { _0x333020(0x508) === _0x333020(0x508) ? console[_0x333020(0x390)](_0x333020(0x735) + _0x57ec14['activeChatId'], _0x4a641b) : _0x3e7ff2 = _0x333020(0x95c) + _0x539f00; } let _0x13e83d = []; if (_0x648f1b) try { if (_0x333020(0x3bb) !== _0x333020(0x3bb)) _0x36b663[_0x333020(0x390)](_0x333020(0x71e), _0x39c951, '原始文本:', _0x1d2a81), _0x820693[_0x333020(0xa8a)][_0x333020(0x1c5)]({ 'role': _0x333020(0x6f7), 'senderId': _0x3a7ef5['id'], 'timestamp': _0x78a736[_0x333020(0x2c5)](), 'isOffline': !![], 'content': _0x333020(0x4dc) + _0x435935 + ']' }); else { const _0x3be44b = JSON[_0x333020(0x258)](_0x648f1b); Array['isArray'](_0x3be44b) && ('FunuO' !== _0x333020(0x6eb) ? _0x5c4250 = _0xe3e9cb[_0x333020(0x391)][_0x333020(0x270)](_0x24ac96 => _0x24ac96['id'] === _0x43d3e2[_0x333020(0x422)]) : _0x13e83d = _0x3be44b[_0x333020(0x1a0)](_0x76ecc9 => _0x76ecc9 && typeof _0x76ecc9 === _0x333020(0x204) && typeof _0x76ecc9[_0x333020(0x1a4)] === _0x333020(0x5b8) && typeof _0x76ecc9[_0x333020(0x6fd)] !== _0x333020(0xace))); } } catch (_0x139694) { console['error'](_0x333020(0x6a9) + _0x57ec14[_0x333020(0x413)] + ',\x20resetting.', _0x139694); try { if (_0x333020(0x996) === _0x333020(0x996)) localStorage[_0x333020(0x523)]('chatHistory_' + _0x57ec14[_0x333020(0x413)]); else { const _0x4d5e1b = _0x50a811[_0x333020(0x494)]('option'); _0x4d5e1b['value'] = _0x54559b['id'], _0x4d5e1b[_0x333020(0x52e)] = _0x4760cd[_0x333020(0x589)], _0x26f9b2['appendChild'](_0x4d5e1b); } } catch (_0x14efda) { 'YJwvA' !== _0x333020(0x1f6) ? _0x46f065 += _0x333020(0x72c) + _0x345969[_0x333020(0x808)] + _0x333020(0x85d) + _0x115852[_0x333020(0x6fd)][_0x333020(0x254)](/\n/g, '\x20') + _0x333020(0x367) : console['error'](_0x333020(0x400), _0x14efda); } } _0x57ec14[_0x333020(0xa8a)] = _0x13e83d, _0x540c47['innerHTML'] = '', _0x57ec14[_0x333020(0xa8a)] && (_0x333020(0x8b2) !== 'fEaJe' ? _0x57ec14[_0x333020(0xa8a)][_0x333020(0x5e2)]((_0x2aeeb5, _0x4d80c8) => _0x4493ba(_0x2aeeb5, _0x4d80c8)) : _0x42061e(_0x333020(0x4d7) + _0x25dfc1[_0x333020(0x332)])), setTimeout(() => { const _0x3d5501 = _0x333020; _0x540c47[_0x3d5501(0x535)] = _0x540c47['scrollHeight']; }, 0x0); } } async function _0x5a285e() { const _0x2be7f9 = _0x3b2836, _0x3c1802 = document['getElementById'](_0x2be7f9(0x27b)); if (!_0x3c1802) { if (_0x2be7f9(0xa3d) !== _0x2be7f9(0xa3d)) { const _0x5af7db = _0x384c04[_0x2be7f9(0x1f8)](), _0x37e4f4 = _0x1420e6[_0x2be7f9(0x1f8)](); if (_0x5af7db[_0x2be7f9(0x2bd)]('claude')) return _0x2be7f9(0x498); if (_0x37e4f4[_0x2be7f9(0x9e5)](_0x2be7f9(0x5d5))) return _0x2be7f9(0x498); if (_0x37e4f4['includes'](_0x2be7f9(0x1c7))) return _0x2be7f9(0x20a); if (_0x5af7db[_0x2be7f9(0x2bd)]('gemini')) return 'gemini'; return _0x2be7f9(0x427); } else { console[_0x2be7f9(0x390)]('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!'); return; } } try { if (_0x2be7f9(0x588) !== 'fyJmG') { let _0x5108e3 = await _0x2995f2('wallpaper_main'); if (!_0x5108e3) { const _0x280f0c = localStorage[_0x2be7f9(0x6e3)](_0x2be7f9(0x551)); _0x280f0c && (_0x2be7f9(0x510) !== _0x2be7f9(0x1dd) ? (console[_0x2be7f9(0x4cf)](_0x2be7f9(0x8b6)), _0x5108e3 = await _0x1707d7(_0x280f0c), await _0x59767c(_0x2be7f9(0x23f), _0x5108e3), localStorage[_0x2be7f9(0x523)](_0x2be7f9(0x551))) : _0x323cef()); } if (_0x5108e3) _0x2be7f9(0x528) !== _0x2be7f9(0x528) ? _0x22dd14(_0x2be7f9(0x669), 'meetingList') : (_0x3c1802['style'][_0x2be7f9(0x6dd)] = 'url(' + URL[_0x2be7f9(0x709)](_0x5108e3) + ')', _0x3c1802[_0x2be7f9(0x7df)][_0x2be7f9(0x4b5)] = 'cover', _0x3c1802[_0x2be7f9(0x7df)][_0x2be7f9(0xa75)] = _0x2be7f9(0x21e)); else { if (_0x2be7f9(0x530) === _0x2be7f9(0x639)) { _0xa831bb && _0x5d991[_0x2be7f9(0x1c5)](_0x16e550); _0x3592fd = {}; const _0x4f25ec = _0x20152f[_0x2be7f9(0x5ae)](0x2), _0x484b96 = _0x4f25ec[_0x2be7f9(0x52b)](/:\s(.+)/); if (_0x484b96[_0x2be7f9(0xb1e)] > 0x1) { const _0x30228b = _0x484b96[0x0][_0x2be7f9(0x3dd)](), _0x4fa838 = _0x484b96[0x1]['trim']()[_0x2be7f9(0x254)](/^"|"$/g, ''); _0x1b1a52[_0x30228b] = _0x4fa838; } } else _0x3c1802[_0x2be7f9(0x7df)][_0x2be7f9(0x6dd)] = ''; } } else _0x89126[_0x2be7f9(0x99a)] = '图片加载失败'; } catch (_0x207b7e) { console[_0x2be7f9(0x390)]('加载壁纸失败:', _0x207b7e), _0x3c1802 && (_0x3c1802[_0x2be7f9(0x7df)][_0x2be7f9(0x6dd)] = ''); } } function _0xeb8a09() { const _0x4aa127 = _0x3b2836, _0x4aa2b4 = localStorage[_0x4aa127(0x6e3)]('customFeedWallpaper'); _0x4aa2b4 ? _0x4aa127(0x805) === _0x4aa127(0x314) ? _0x4fbc64 = _0x436e93[_0x4aa127(0x7d5)](_0x46d9f7) : document[_0x4aa127(0x67e)]('music-screen')[_0x4aa127(0x7df)][_0x4aa127(0x522)](_0x4aa127(0x29e), _0x4aa127(0x36b) + _0x4aa2b4 + ')') : document[_0x4aa127(0x67e)](_0x4aa127(0x2a6))[_0x4aa127(0x7df)][_0x4aa127(0x522)](_0x4aa127(0x29e), _0x4aa127(0x527)); } async function _0x56950d(_0x1c87c7) { const _0x4f812f = _0x3b2836; try { _0x4f812f(0x622) !== _0x4f812f(0xa1c) ? (await _0x59767c(_0x4f812f(0x23f), _0x1c87c7), await _0x5a285e(), _0x33f536(_0x4f812f(0x8ec))) : (_0x160317[_0x4f812f(0x390)]('加载\x20' + _0x3bfb00 + _0x4f812f(0x133), _0xa3cb7a), _0x999697[_0x4f812f(0x282)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x4c4841[_0x4f812f(0x332)] + '</p>'); } catch (_0x3c595e) { console[_0x4f812f(0x390)](_0x4f812f(0x85e), _0x3c595e), _0x33f536('保存壁纸失败:\x20' + _0x3c595e['message']); } } function _0x4a3562(_0x242c63) { const _0x23bb8c = _0x3b2836, _0x43bf3b = { 'quotedMessage': null, 'content': _0x242c63 }, _0x1fe764 = _0x242c63[_0x23bb8c(0xa9e)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x1fe764 && (_0x43bf3b[_0x23bb8c(0x961)] = { 'sender': _0x1fe764[0x1][_0x23bb8c(0x3dd)](), 'content': _0x1fe764[0x2][_0x23bb8c(0x3dd)]() }, _0x43bf3b['content'] = _0x242c63[_0x23bb8c(0x5ae)](_0x1fe764[0x0][_0x23bb8c(0xb1e)])[_0x23bb8c(0x3dd)]()), _0x43bf3b; } const _0x2c4867 = document['getElementById'](_0x3b2836(0x1ef)), _0x4cebf8 = document[_0x3b2836(0x67e)](_0x3b2836(0x9f4)), _0x3ac225 = document[_0x3b2836(0x67e)](_0x3b2836(0xa0f)), _0x10786d = document[_0x3b2836(0x67e)](_0x3b2836(0x792)), _0x513a12 = document['getElementById'](_0x3b2836(0x907)), _0x44233a = document[_0x3b2836(0x67e)](_0x3b2836(0xa85)), _0x11633c = document[_0x3b2836(0x67e)](_0x3b2836(0xa3e)), _0x519957 = document[_0x3b2836(0x67e)](_0x3b2836(0x969)), _0x3525a0 = document[_0x3b2836(0x67e)]('edit-message-textarea'), _0x12ddff = document[_0x3b2836(0x67e)](_0x3b2836(0x47d)), _0xa81bdd = document[_0x3b2836(0x67e)](_0x3b2836(0xac4)); let _0x50cf94 = null; function _0x21ad96(_0x287b54) { const _0x4b7179 = _0x3b2836; if (_0x4b7179(0x4ea) !== 'PjNfI') _0x50cf94 = _0x287b54, _0x2c4867[_0x4b7179(0x32b)][_0x4b7179(0x536)]('show'); else { _0x2c4342[_0x4b7179(0x552)] = ''; return; } } function _0x21cbec() { const _0x29c89f = _0x3b2836; _0x2c4867[_0x29c89f(0x32b)][_0x29c89f(0x318)](_0x29c89f(0x716)); } function _0x48a0f6() { _0x21cbec(), _0x50cf94 = null; } function _0x52feaa() { const _0x1c92ae = _0x3b2836; if (_0x50cf94 === null) return; _0x57ec14[_0x1c92ae(0xa8a)][_0x1c92ae(0x920)](_0x50cf94, 0x1), _0xc97ff3(), _0x2d1a6a(), _0x48a0f6(); } function _0x3b6e1a() { const _0x53e3dc = _0x3b2836; if (_0x53e3dc(0x447) === _0x53e3dc(0x447)) { if (_0x50cf94 === null) return; const _0xa90e0c = _0x57ec14[_0x53e3dc(0xa8a)][_0x50cf94]; if (!_0xa90e0c) return; _0x3525a0[_0x53e3dc(0x552)] = _0xa90e0c[_0x53e3dc(0x6fd)], _0x21cbec(), _0x11633c[_0x53e3dc(0x32b)][_0x53e3dc(0x536)]('show'), _0x3525a0['focus'](); } else { if (!_0xc87a24) return; _0xc634c4[_0x125c79] = _0x593211, _0x48dfe4[_0x750197][_0x53e3dc(0x433)](_0x53e3dc(0x886))[_0x53e3dc(0x52e)] = _0x57b643[_0x53e3dc(0x589)], _0x47c6d5[_0x555ec4][_0x53e3dc(0x32b)][_0x53e3dc(0x536)]('filled'), _0x2d3c8e(); } } function _0x401da2() { const _0x5ad1f0 = _0x3b2836; if (_0x5ad1f0(0x9a8) !== _0x5ad1f0(0x765)) { if (_0x50cf94 === null) return; const _0x19d3c0 = _0x3525a0[_0x5ad1f0(0x552)][_0x5ad1f0(0x3dd)](); if (_0x19d3c0 === '') { _0x1aa435(); return; } const _0x3472cf = _0x57ec14['conversationHistory'][_0x50cf94]; _0x3472cf && (_0x5ad1f0(0x5e5) === _0x5ad1f0(0x368) ? (_0xd6b15a[_0x5ad1f0(0x1c5)](_0x398ed9[_0x1b3280]['trim']()), _0x27b51b++) : (_0x3472cf[_0x5ad1f0(0x6fd)] = _0x19d3c0, _0xc97ff3(), _0x2d1a6a())), _0x11633c['classList']['remove'](_0x5ad1f0(0x716)), _0x50cf94 = null; } else { _0x413bcb[_0x5ad1f0(0x282)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>'; return; } } function _0x1aa435() { const _0x39311f = _0x3b2836; _0x39311f(0x513) === _0x39311f(0x513) ? (_0x11633c[_0x39311f(0x32b)][_0x39311f(0x318)](_0x39311f(0x716)), _0x50cf94 = null) : _0x4cabfa += _0x39311f(0x631); } _0x4cebf8[_0x3b2836(0x990)](_0x3b2836(0x821), _0x48a0f6), _0x513a12[_0x3b2836(0x990)](_0x3b2836(0x821), _0x48a0f6), _0x10786d[_0x3b2836(0x990)](_0x3b2836(0x821), _0x52feaa), _0x3ac225[_0x3b2836(0x990)](_0x3b2836(0x821), _0x3b6e1a), _0x44233a[_0x3b2836(0x990)](_0x3b2836(0x821), _0x411cd4), _0x1e859a[_0x3b2836(0x990)](_0x3b2836(0x821), _0x6921e2), _0x12ddff[_0x3b2836(0x990)](_0x3b2836(0x821), _0x401da2), _0xa81bdd['addEventListener'](_0x3b2836(0x821), _0x1aa435), _0x519957['addEventListener'](_0x3b2836(0x821), _0x1aa435); function _0x411cd4() { const _0x4bba01 = _0x3b2836; if (_0x50cf94 === null) return; const _0x55b39c = _0x57ec14[_0x4bba01(0xa8a)][_0x50cf94]; if (!_0x55b39c) return; const _0x4da616 = _0x3a6dc0(); let _0x471323 = '未知'; if (_0x55b39c[_0x4bba01(0x1a4)] === _0x4bba01(0x2b3)) _0x471323 = _0x57ec14['userProfile'][_0x4bba01(0x589)] || '我'; else { const _0x14d77a = _0x55b39c[_0x4bba01(0x972)] || _0x4da616?.[_0x4bba01(0x69c)][0x0], _0x24bd7c = _0x382342(_0x14d77a); _0x471323 = _0x24bd7c ? _0x24bd7c[_0x4bba01(0x589)] : '角色'; } let _0x54cfdf = _0x55b39c[_0x4bba01(0x6fd)] || ''; if (_0x55b39c[_0x4bba01(0x856)]) _0x54cfdf = '[表情]'; if (_0x55b39c[_0x4bba01(0x3e9)]) _0x54cfdf = _0x4bba01(0x57d); if (_0x54cfdf[_0x4bba01(0xb1e)] > 0x32) _0x54cfdf = _0x54cfdf['substring'](0x0, 0x32) + _0x4bba01(0xa65); _0x57ec14[_0x4bba01(0xa41)] = { 'sender': _0x471323, 'content': _0x54cfdf }, _0x192e8a(), _0x48a0f6(), _0x332f7c[_0x4bba01(0x855)](); } function _0x192e8a() { const _0x25c196 = _0x3b2836; if (!_0x57ec14[_0x25c196(0xa41)]) return; _0x41073b[_0x25c196(0x52e)] = _0x25c196(0x31c) + _0x57ec14['activeQuote'][_0x25c196(0x410)], _0x35e69f[_0x25c196(0x52e)] = _0x57ec14['activeQuote'][_0x25c196(0x6fd)], _0xc47dd7[_0x25c196(0x7df)][_0x25c196(0x741)] = _0x25c196(0x1f1); } function _0x6921e2() { const _0x4404d5 = _0x3b2836; _0x4404d5(0x29c) === 'qOpoC' ? (_0x245e5f['textContent'] = _0x15c6b9['name'], _0x1399ad[_0x4404d5(0x52e)] = '（开始一段新的对话...）', _0x47395b(_0x536ec1, 'normal')) : (_0x57ec14[_0x4404d5(0xa41)] = null, _0xc47dd7[_0x4404d5(0x7df)]['display'] = _0x4404d5(0x527)); } function _0x52c85d(_0x4d2efd, _0x1cd6df) { const _0x5c0996 = _0x3b2836, _0x59a78d = document[_0x5c0996(0x67e)](_0x5c0996(0x1da)); _0x59a78d && (_0x4d2efd === _0x5c0996(0x669) ? _0x59a78d[_0x5c0996(0x7df)][_0x5c0996(0x741)] = _0x5c0996(0x79d) : _0x5c0996(0x329) === 'LVNDC' ? _0x59a78d['style'][_0x5c0996(0x741)] = _0x5c0996(0x527) : _0x528bfd[_0x5c0996(0x1c5)](_0x49e24d)); _0x10f7aa = _0x1cd6df || null, Object[_0x5c0996(0xac8)](_0x2db8f8)[_0x5c0996(0x5e2)](_0x5b50a1 => _0x5b50a1['classList'][_0x5c0996(0x318)](_0x5c0996(0x115))); _0x2db8f8[_0x4d2efd] && _0x2db8f8[_0x4d2efd][_0x5c0996(0x32b)]['add'](_0x5c0996(0x115)); if (_0x4d2efd !== _0x5c0996(0xa06)) { if ('GoTvz' === _0x5c0996(0x7b6)) _0x407f67[_0x5c0996(0x32b)][_0x5c0996(0x318)](_0x5c0996(0x2dc)); else { _0x2f3dba(_0x5c0996(0x191)); return; } } } function _0x510e94(_0x49f22e) { const _0x576922 = _0x3b2836; _0x49f22e ? _0x576922(0x62f) !== _0x576922(0x62f) ? (_0x26c349(), _0x216b95(_0x576922(0x82e), _0x576922(0x89f))) : _0x407f67[_0x576922(0x32b)][_0x576922(0x536)](_0x576922(0x2dc)) : _0x407f67[_0x576922(0x32b)][_0x576922(0x318)](_0x576922(0x2dc)); } async function _0x1721c6() { const _0x3f6f49 = _0x3b2836; if (_0x3f6f49(0x9ed) === _0x3f6f49(0x1e7)) { const _0x41c682 = _0x5bca3a[_0x3f6f49(0x67e)](_0x3f6f49(0x7ef)), _0x5aaade = _0xde1494['getElementById']('expense-amount'), _0x5423a5 = _0x41c682[_0x3f6f49(0x552)][_0x3f6f49(0x3dd)](), _0x3d0e16 = _0x23cd46(_0x5aaade['value']); if (!_0x5423a5 || _0x30efb4(_0x3d0e16) || _0x3d0e16 <= 0x0) { _0x2973dd(_0x3f6f49(0x30d)); return; } _0x3df367[_0x3f6f49(0x68a)][_0x3f6f49(0x1c5)]({ 'id': 'exp_' + _0x396ffb['now'](), 'description': _0x5423a5, 'amount': _0x3d0e16, 'timestamp': _0xdee790[_0x3f6f49(0x2c5)]() }), _0x11143d(), _0x1d72b2(), _0x41c682[_0x3f6f49(0x552)] = '', _0x5aaade[_0x3f6f49(0x552)] = '', _0x41c682[_0x3f6f49(0x855)](); } else { _0x200b55[_0x3f6f49(0x282)] = ''; for (const _0x3b88df of _0x57ec14[_0x3f6f49(0x313)]) { const _0x3355d7 = document[_0x3f6f49(0x494)]('li'); _0x3355d7['className'] = 'character-item', _0x3355d7[_0x3f6f49(0x988)]['id'] = _0x3b88df['id']; let _0x55ddb5 = _0x520817, _0x287a04 = '群聊', _0x4563f8 = ''; if (_0x3b88df[_0x3f6f49(0xa1e)] === 'private') { const _0x52b4d3 = _0x382342(_0x3b88df['participantIds'][0x0]); if (_0x52b4d3) _0x55ddb5 = _0x52b4d3[_0x3f6f49(0x5b2)] || _0x520817, _0x287a04 = _0x52b4d3[_0x3f6f49(0x589)] || '未命名角色', _0x4563f8 = _0x52b4d3[_0x3f6f49(0x94d)] || '私聊'; else { if ('XDIci' === 'XDIci') _0x287a04 = _0x3f6f49(0x65e), _0x4563f8 = _0x3f6f49(0x3e5); else { const _0x3bfe78 = _0x20cb02[_0x3f6f49(0x67e)](_0x3477b1); if (_0x3bfe78 && _0x3ae669) _0x3bfe78[_0x3f6f49(0x45f)] = _0x53698a[_0x3f6f49(0x709)](_0x27b243); } } } else { if (_0x3f6f49(0x96f) === 'UlXop') { _0x287a04 = _0x3b88df[_0x3f6f49(0x589)] || _0x3f6f49(0x4b6), _0x4563f8 = _0x3b88df['participantIds'][_0x3f6f49(0xb1e)] + _0x3f6f49(0x453); const _0x573eb7 = await _0x2995f2(_0x3f6f49(0x4cc) + _0x3b88df['id']); if (_0x573eb7) _0x55ddb5 = URL[_0x3f6f49(0x709)](_0x573eb7); } else _0x500950 = _0x53fb5d[_0x3f6f49(0x589)]; } _0x3355d7['innerHTML'] = '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x55ddb5 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x287a04 + _0x3f6f49(0x113) + _0x4563f8 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', _0x3355d7[_0x3f6f49(0x433)](_0x3f6f49(0xae6))[_0x3f6f49(0x990)](_0x3f6f49(0x821), () => { const _0x39c499 = _0x3f6f49; if (_0x39c499(0x235) === _0x39c499(0x654)) { const _0x4597f6 = _0x1644bd[_0x39c499(0x86b)][_0x412606]; _0x4597f6 && _0x4597f6[_0x39c499(0xb1e)] > 0x0 && (_0xf09519 = _0x4597f6['at'](-0x1)); } else _0x292b8d(_0x3b88df['id']), _0x510e94(!![]); }), _0x200b55[_0x3f6f49(0x6b3)](_0x3355d7); } } } function _0x36851d() { const _0x115ddd = _0x3b2836, _0x51412e = document[_0x115ddd(0x67e)](_0x115ddd(0x632)); _0x51412e[_0x115ddd(0x282)] = ''; const _0x2563ac = _0x57ec14[_0x115ddd(0x862)]['filter'](_0x19aba2 => _0x57ec14[_0x115ddd(0x313)][_0x115ddd(0x252)](_0x58938c => _0x58938c[_0x115ddd(0xa1e)] === _0x115ddd(0x99c) && _0x58938c[_0x115ddd(0x69c)][_0x115ddd(0x9e5)](_0x19aba2['id']))); if (_0x2563ac[_0x115ddd(0xb1e)] === 0x0) { _0x51412e[_0x115ddd(0x282)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } _0x2563ac[_0x115ddd(0x5e2)](_0x1ae5a6 => { const _0x2e301a = _0x115ddd; if ('odDSO' !== _0x2e301a(0xb08)) { const _0x493da7 = document[_0x2e301a(0x494)]('li'); _0x493da7[_0x2e301a(0x226)] = _0x2e301a(0x3af), _0x493da7[_0x2e301a(0x988)][_0x2e301a(0x870)] = _0x1ae5a6['id'], _0x493da7[_0x2e301a(0x282)] = _0x2e301a(0x7ec) + (_0x1ae5a6[_0x2e301a(0x5b2)] || _0x520817) + _0x2e301a(0x10c) + _0x1ae5a6[_0x2e301a(0x589)] + _0x2e301a(0x1dc) + (_0x1ae5a6[_0x2e301a(0x94d)] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x493da7[_0x2e301a(0x990)](_0x2e301a(0x821), () => { _0x5e78c5(_0x1ae5a6['id']); }), _0x51412e[_0x2e301a(0x6b3)](_0x493da7); } else return _0x4f46b5[_0x2e301a(0x390)]('批量生成动态失败:\x20', _0x65045c), _0x2dba66[_0x2e301a(0x390)](_0x2e301a(0x3aa), _0xfc5c91[_0x2e301a(0x1a1)] || 'AI返回了无法解析的文本'), null; }); } async function _0x5e78c5(_0x299095) { const _0x5e6c35 = _0x3b2836; if (_0x5e6c35(0x7fa) !== _0x5e6c35(0xad9)) { const _0x40c319 = _0x382342(_0x299095); if (!_0x40c319) return; document[_0x5e6c35(0x67e)](_0x5e6c35(0x97b))['src'] = '', _0x57ec14['activeMeetingCharId'] = _0x299095; const _0x1f2556 = _0x57ec14[_0x5e6c35(0x313)][_0x5e6c35(0x270)](_0x496752 => _0x496752[_0x5e6c35(0xa1e)] === _0x5e6c35(0x99c) && _0x496752[_0x5e6c35(0x69c)][_0x5e6c35(0x9e5)](_0x299095)); if (_0x1f2556) _0x57ec14[_0x5e6c35(0x413)] = _0x1f2556['id'], _0x203e68(), _0x2ee71f(), _0x1414b6(_0x299095); else { if (_0x5e6c35(0x9a6) === _0x5e6c35(0x203)) { const _0x480683 = new _0x501311(_0x2d8a3d[_0x5e6c35(0x665)]), _0x1bf05b = _0x1da4ab[_0x5e6c35(0x5a8)]((_0x4a17ff - _0x480683) / (0x3e8 * 0x3c)); if (_0x1bf05b < 0x5) _0x386982 += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x1bf05b < 0x78) _0x409fe1 += _0x5e6c35(0xae2) + _0x1bf05b + _0x5e6c35(0x6c5); else { const _0x45864c = _0x1460a9[_0x5e6c35(0x5a8)](_0x1bf05b / 0x3c); if (_0x45864c < 0x30) _0x16c411 += _0x5e6c35(0xae2) + _0x45864c + _0x5e6c35(0x5b5); else _0x516298 += _0x5e6c35(0x4c8) + _0x3638d1[_0x5e6c35(0x5a8)](_0x45864c / 0x18) + _0x5e6c35(0x7c5); } } } else _0x57ec14[_0x5e6c35(0xa8a)] = []; } document[_0x5e6c35(0x67e)](_0x5e6c35(0x181))[_0x5e6c35(0x52e)] = _0x40c319[_0x5e6c35(0x589)]; const _0x2f8416 = document[_0x5e6c35(0x67e)]('meeting-main-content'); try { const _0x12268d = await _0x2995f2(_0x5e6c35(0x4c7) + _0x299095); if (_0x12268d) { if (_0x5e6c35(0x7a1) !== _0x5e6c35(0x548)) _0x2f8416[_0x5e6c35(0x7df)]['backgroundImage'] = 'url(\x27' + URL[_0x5e6c35(0x709)](_0x12268d) + '\x27)', _0x2f8416[_0x5e6c35(0x7df)]['backgroundSize'] = _0x5e6c35(0xa4e), _0x2f8416[_0x5e6c35(0x7df)][_0x5e6c35(0xa75)] = 'center'; else return _0x5e6c35(0x5d9); } else _0x2f8416[_0x5e6c35(0x7df)][_0x5e6c35(0x6dd)] = 'none'; } catch (_0x584d47) { console[_0x5e6c35(0x390)](_0x5e6c35(0x6fa) + _0x299095 + ':', _0x584d47), _0x2f8416[_0x5e6c35(0x7df)][_0x5e6c35(0x6dd)] = _0x5e6c35(0x527); } _0x3f4071(), _0x28bb0f(); if (_0xc60374) clearInterval(_0xc60374); _0x260352(), _0xc60374 = setInterval(_0x260352, 0x2710), document['getElementById'](_0x5e6c35(0xb0f))[_0x5e6c35(0x7df)]['display'] = _0x5e6c35(0x1f1), _0x52c85d(_0x5e6c35(0x22a), 'meetingList'); } else { const _0x3b01e7 = _0xf63d14[_0x5e6c35(0x67e)](_0x5e6c35(0x68b)), _0x2400e4 = _0x3b01e7[_0x5e6c35(0x74c)](_0x5e6c35(0x52c)), _0x34e098 = _0x3907c3[_0x5e6c35(0x433)](_0x5e6c35(0x90f)); if (_0x2400e4['length'] === 0x0) _0x34e098[_0x5e6c35(0x52e)] = '--\x20点击选择\x20--'; else _0x2400e4['length'] > 0x2 ? _0x34e098[_0x5e6c35(0x52e)] = _0x5e6c35(0x68f) + _0x2400e4['length'] + '\x20项' : _0x34e098[_0x5e6c35(0x52e)] = _0x530fd9['from'](_0x2400e4)[_0x5e6c35(0x937)](_0x18e47d => _0x18e47d['parentElement'][_0x5e6c35(0x52e)][_0x5e6c35(0x3dd)]())[_0x5e6c35(0x9f9)]('、'); } } function _0x28bb0f() { const _0x4d5d3d = _0x3b2836; if (_0x4d5d3d(0x80e) === 'weNoa') { const _0x1c1941 = document['getElementById'](_0x4d5d3d(0x4fd)); _0x1c1941[_0x4d5d3d(0x282)] = ''; const _0x37434d = _0x1c1941[_0x4d5d3d(0x433)](_0x4d5d3d(0x340)); if (_0x37434d) _0x37434d[_0x4d5d3d(0x318)](); _0x57ec14[_0x4d5d3d(0xa8a)] && (_0x4d5d3d(0x974) !== _0x4d5d3d(0x974) ? _0x242233[_0x4d5d3d(0x390)](_0x4d5d3d(0x49d), _0x2589c1) : _0x57ec14[_0x4d5d3d(0xa8a)]['forEach']((_0x358a94, _0xb07c63) => { const _0x4ca641 = _0x4d5d3d; if (_0x4ca641(0x586) !== _0x4ca641(0x586)) { const _0x4bf0c8 = _0x5c1847[_0x4ca641(0x313)][_0x4ca641(0x270)](_0x476b7b => _0x476b7b['id'] === _0x9b4c3b); if (!_0x4bf0c8 || _0x4bf0c8['type'] !== 'group') return; _0x29b042[_0x4ca641(0x67e)](_0x4ca641(0x4d0))['value'] = _0x4bf0c8['name'] || '', _0x17f92f('group-settings-bind-user'), _0x4f4039['getElementById'](_0x4ca641(0x7f0))[_0x4ca641(0x552)] = _0x4bf0c8[_0x4ca641(0x347)] || _0x49efc4[_0x4ca641(0x422)]; const _0x5f1767 = _0x5cc778[_0x4ca641(0x67e)](_0x4ca641(0xb05)); _0x5f1767[_0x4ca641(0x282)] = '', _0x2ec10d[_0x4ca641(0x9cd)][_0x4ca641(0x5e2)](_0x3e928c => { const _0x1438a2 = _0x4ca641, _0x32fe06 = _0x4bf0c8[_0x1438a2(0x48e)]?.[_0x1438a2(0x9e5)](_0x3e928c['id']), _0x2a5257 = _0x44bb33[_0x1438a2(0x494)]('label'); _0x2a5257[_0x1438a2(0x282)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x3e928c['id'] + '\x22\x20' + (_0x32fe06 ? _0x1438a2(0x262) : '') + '>\x20' + _0x3e928c[_0x1438a2(0x589)], _0x5f1767[_0x1438a2(0x6b3)](_0x2a5257); }), _0x3bfb20(); const _0x357bcc = _0x74d4f5[_0x4ca641(0x67e)](_0x4ca641(0x6e1)), _0x2d1da3 = _0x39ebc4[_0x4ca641(0x67e)]('group-bg-preview'); _0x2d1da3[_0x4ca641(0x7df)][_0x4ca641(0x6dd)] = '', _0x2edc20(_0x4ca641(0x4cc) + _0x17867d)['then'](_0xc5c5b6 => { const _0x1d3650 = _0x4ca641; _0x357bcc[_0x1d3650(0x45f)] = _0xc5c5b6 ? _0x4192a3[_0x1d3650(0x709)](_0xc5c5b6) : _0x20b4b8; }), _0xf15b88(_0x4ca641(0x7e2) + _0x9c9a39)[_0x4ca641(0x69b)](_0x21ec53 => { const _0x1a7214 = _0x4ca641; if (_0x21ec53) _0x2d1da3['style']['backgroundImage'] = 'url(\x27' + _0x562cec[_0x1a7214(0x709)](_0x21ec53) + '\x27)'; }), _0x408ce6(_0x4ca641(0x76b), _0x4ca641(0xa06)); } else { if (!_0x358a94['isOffline'] || _0x358a94[_0x4ca641(0x1a4)] === _0x4ca641(0x70d)) return; const _0x1b40fb = document[_0x4ca641(0x494)]('p'); _0x1b40fb[_0x4ca641(0x988)][_0x4ca641(0xa4b)] = _0xb07c63; const _0x3d83b2 = _0x358a94[_0x4ca641(0x6fd)][_0x4ca641(0x254)](/\n/g, _0x4ca641(0xae5)); let _0x33c1a1 = '', _0x53cee8 = ''; const _0x3fe752 = _0xb1d08(_0x57ec14[_0x4ca641(0x413)]); if (_0x358a94[_0x4ca641(0x1a4)] === _0x4ca641(0x2b3)) _0x33c1a1 = _0x3fe752[_0x4ca641(0x589)] || '我', _0x53cee8 = _0x4ca641(0x7b9); else { if (_0x358a94[_0x4ca641(0x1a4)] === _0x4ca641(0x6f7)) { const _0x200083 = _0x382342(_0x358a94[_0x4ca641(0x972)] || _0x57ec14['activeMeetingCharId']); _0x33c1a1 = _0x200083?.[_0x4ca641(0x589)] || '角色', _0x53cee8 = 'speaker-ai'; } } _0x1b40fb[_0x4ca641(0x7df)]['backgroundColor'] = _0x4ca641(0x86d), _0x1b40fb[_0x4ca641(0x7df)][_0x4ca641(0xaf3)] = '15px\x2020px', _0x1b40fb[_0x4ca641(0x7df)][_0x4ca641(0x8d9)] = _0x4ca641(0xa51), _0x1b40fb['style'][_0x4ca641(0x750)] = _0x4ca641(0x5d6); if (_0x33c1a1) { if (_0x4ca641(0x746) !== _0x4ca641(0x9ee)) _0x1b40fb['innerHTML'] = _0x4ca641(0x7a4) + _0x53cee8 + _0x4ca641(0x643) + (_0x53cee8 === 'speaker-user' ? _0x4ca641(0x7c0) : _0x4ca641(0x695)) + _0x4ca641(0x74e) + _0x33c1a1 + _0x4ca641(0x726) + _0x3d83b2; else return _0x30fe94['log'](_0x4ca641(0x84d)), ''; } else _0x1b40fb[_0x4ca641(0x226)] = _0x4ca641(0xa86), _0x1b40fb[_0x4ca641(0x7df)][_0x4ca641(0x384)] = _0x4ca641(0x998), _0x1b40fb[_0x4ca641(0x7df)][_0x4ca641(0x89d)] = _0x4ca641(0x457), _0x1b40fb[_0x4ca641(0x282)] = _0x3d83b2; _0x1c1941['appendChild'](_0x1b40fb); } })); if (_0x57ec14[_0x4d5d3d(0xa73)]) { if (_0x4d5d3d(0xaab) !== _0x4d5d3d(0x784)) { let _0xa3e105 = _0x1c1941[_0x4d5d3d(0x433)]('.typing-indicator'); !_0xa3e105 && (_0xa3e105 = document['createElement'](_0x4d5d3d(0x962)), _0xa3e105['className'] = 'typing-indicator', _0xa3e105[_0x4d5d3d(0x52e)] = _0x4d5d3d(0x8a8), _0xa3e105[_0x4d5d3d(0x7df)][_0x4d5d3d(0x95f)] = _0x4d5d3d(0x86d), _0xa3e105[_0x4d5d3d(0x7df)][_0x4d5d3d(0xaf3)] = '15px\x2020px', _0xa3e105[_0x4d5d3d(0x7df)][_0x4d5d3d(0x8d9)] = _0x4d5d3d(0xa51), _0x1c1941[_0x4d5d3d(0x6b3)](_0xa3e105)); } else _0x384c22 = _0x4d5d3d(0x46f), _0x1da763 = _0x4d5d3d(0x5cf) + _0x5b4c3f + _0x4d5d3d(0x299); } const _0x31f92f = document[_0x4d5d3d(0x494)](_0x4d5d3d(0x962)); _0x31f92f['id'] = 'message-anchor', _0x1c1941['appendChild'](_0x31f92f), setTimeout(() => { const _0x1aafd9 = _0x4d5d3d; _0x31f92f[_0x1aafd9(0x663)]({ 'behavior': _0x1aafd9(0x239), 'block': _0x1aafd9(0x499) }); }, 0x32); } else { const _0x4fca7d = _0x4be946[_0x4d5d3d(0x67e)]('pending-post-image-preview'); _0x4fca7d && _0x155c64 && (_0x4fca7d[_0x4d5d3d(0x45f)] = _0x36f123[_0x4d5d3d(0x709)](_0x51b4e5)); } } function _0x2d1a6a() { const _0x238343 = _0x3b2836, _0xab2b3f = document['querySelector'](_0x238343(0x31b)); if (!_0xab2b3f) return; _0xab2b3f['id'] === _0x238343(0x74f) ? _0x238343(0xff) === 'AMcaH' ? _0x28bb0f() : (_0x65da6a(), _0x549700(_0x238343(0x2a3), _0x238343(0x669))) : _0x1c7b21(); } function _0x1c7b21() { const _0x56900a = _0x3b2836; if ('rTfjg' !== _0x56900a(0x8a7)) { const _0x1a1d78 = _0x57ec14['conversationHistory']['filter'](_0x1e5b82 => !_0x1e5b82[_0x56900a(0x684)] && _0x1e5b82[_0x56900a(0x1a4)] !== 'system'); if (_0x1a1d78[_0x56900a(0xb1e)] > _0x57ec14[_0x56900a(0x19b)]) { let _0x587ae9 = _0x540c47[_0x56900a(0x433)]('.load-more-btn'); !_0x587ae9 && (_0x587ae9 = document[_0x56900a(0x494)](_0x56900a(0xadd)), _0x587ae9[_0x56900a(0x52e)] = _0x56900a(0x2e4), _0x587ae9[_0x56900a(0x226)] = _0x56900a(0x780), _0x587ae9[_0x56900a(0x7df)][_0x56900a(0x96a)] = 'auto', _0x587ae9[_0x56900a(0x7df)][_0x56900a(0x8d0)] = _0x56900a(0x627), _0x587ae9[_0x56900a(0x7df)][_0x56900a(0xaf3)] = '8px\x2016px', _0x587ae9[_0x56900a(0x4e2)] = () => { const _0x2875ca = _0x56900a, _0x295b4b = _0x540c47, _0x272c52 = _0x295b4b[_0x2875ca(0x6ac)], _0x3fceac = _0x295b4b[_0x2875ca(0x535)]; _0x57ec14[_0x2875ca(0x19b)] += 0x64, _0x1c7b21(), requestAnimationFrame(() => { const _0x37cbd5 = _0x2875ca; if ('ZCMRf' === _0x37cbd5(0x1a3)) { const _0x4610f2 = _0x295b4b['scrollHeight']; _0x295b4b['scrollTop'] = _0x3fceac + (_0x4610f2 - _0x272c52); } else _0x1e3e6e++; }); }, _0x540c47[_0x56900a(0x356)] ? _0x540c47[_0x56900a(0x6ed)](_0x587ae9, _0x540c47[_0x56900a(0x356)]) : _0x56900a(0x134) === 'VxSDv' ? _0x14a682 > _0x53834f && (_0x4a67d0 *= _0x3eb724 / _0x5c785b, _0x45ccb2 = _0x354e9f) : _0x540c47[_0x56900a(0x6b3)](_0x587ae9)); } else { const _0x84322d = _0x540c47['querySelector'](_0x56900a(0x37b)); if (_0x84322d) _0x84322d[_0x56900a(0x318)](); } Array['from'](_0x540c47[_0x56900a(0x939)])[_0x56900a(0x5e2)](_0x415c34 => { const _0x4cd354 = _0x56900a; !_0x415c34['classList'][_0x4cd354(0x776)]('load-more-btn') && (_0x4cd354(0x6ef) === _0x4cd354(0x6ef) ? _0x415c34['remove']() : _0x251768()); }); const _0x40a496 = _0x1a1d78['slice'](-_0x57ec14[_0x56900a(0x19b)]); _0x40a496['forEach'](_0x4791bf => { const _0x2fffad = _0x56900a, _0x5009c5 = _0x57ec14[_0x2fffad(0xa8a)][_0x2fffad(0x2ac)](_0x4791bf); if (_0x5009c5 > -0x1) { if (_0x2fffad(0x758) === _0x2fffad(0x677)) { if (_0x53f667) _0x424cd4['click'](); } else _0x4493ba(_0x4791bf, _0x5009c5); } }); if (_0x57ec14[_0x56900a(0xa73)]) { let _0xf9af18 = _0x540c47['querySelector']('.typing-indicator'); !_0xf9af18 && (_0xf9af18 = document[_0x56900a(0x494)]('div'), _0xf9af18[_0x56900a(0x226)] = _0x56900a(0x558), _0xf9af18['textContent'] = _0x56900a(0x4a8), _0x540c47[_0x56900a(0x6b3)](_0xf9af18)); } _0x40a496[_0x56900a(0xb1e)] <= _0x57ec14['displayedMessageCount'] && setTimeout(() => { const _0x828499 = _0x56900a; 'FSlIR' !== 'xZiHk' ? _0x540c47[_0x828499(0x535)] = _0x540c47[_0x828499(0x6ac)] : _0x35b49e[_0x828499(0x7df)][_0x828499(0x741)] = _0x828499(0x527); }, 0x0); } else _0x24f49d[_0x56900a(0x52e)] = _0x56900a(0x5df), _0x4dbbc3[_0x56900a(0x52e)] = '请在动态或聊天中播放', _0x54db63[_0x56900a(0x32b)][_0x56900a(0x318)]('is-playing'), _0x44a510['style']['setProperty'](_0x56900a(0x533), _0x56900a(0x527)); } function _0x4493ba(_0x2abc0c, _0x3435b2) { const _0x46903a = _0x3b2836; if (_0x46903a(0x271) !== _0x46903a(0xa72)) { const { role: _0x245715, content: _0x1f1bfc, displayUrl: _0x4d3077, image: _0x59a54a, senderId: _0x29fd70 } = _0x2abc0c, _0xf124b8 = _0x245715 === _0x46903a(0x6f7) ? 'ai' : _0x245715, _0x12e016 = _0x3a6dc0(), _0xb6378d = document[_0x46903a(0x494)]('div'); _0xb6378d[_0x46903a(0x32b)][_0x46903a(0x536)](_0x46903a(0x120), _0xf124b8), _0xb6378d[_0x46903a(0x988)]['historyIndex'] = _0x3435b2; const _0x44397f = document[_0x46903a(0x494)](_0x46903a(0x962)); _0x44397f[_0x46903a(0x226)] = _0x46903a(0x1bd); let _0x36b417 = ''; if (_0x245715 === _0x46903a(0x2b3)) { const _0x33b9e4 = _0xb1d08(_0x57ec14[_0x46903a(0x413)]); _0x36b417 = _0x33b9e4['avatar'] || _0x1f7795; } else { _0x36b417 = _0x520817; let _0x8b2530 = null; if (_0x12e016?.[_0x46903a(0xa1e)] === _0x46903a(0x99c)) _0x46903a(0x3fb) === _0x46903a(0x289) ? _0x1f1ffa[_0x46903a(0x4cf)](_0x46903a(0x98f) + _0x5a27a6) : _0x8b2530 = _0x382342(_0x12e016[_0x46903a(0x69c)][0x0]); else { if (_0x12e016?.[_0x46903a(0xa1e)] === _0x46903a(0x7d1) && _0x29fd70) { if (_0x46903a(0x1b1) !== _0x46903a(0x1b1)) return new _0x2d550d(_0x5a1fb7 => { const _0x9b3c9b = _0x46903a, _0x1cf3bc = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x18857b[_0x9b3c9b(0x570)][_0x9b3c9b(0x882)](_0x9b3c9b(0x25c), _0x1cf3bc); const _0x475258 = _0xea2251['getElementById'](_0x9b3c9b(0x952)), _0x2e1c3e = _0xdf548['getElementById'](_0x9b3c9b(0x837)), _0x14bce9 = _0x4b0cdb[_0x9b3c9b(0x67e)](_0x9b3c9b(0x377)), _0x3c354f = _0x52cc86['getElementById']('diary-modal-cancel'), _0x3f7a39 = _0x475258[_0x9b3c9b(0x433)](_0x9b3c9b(0xae9)), _0x5ef0da = () => { const _0x9becf6 = _0x9b3c9b; _0x475258[_0x9becf6(0x318)](), _0x5a1fb7(); }; _0x14bce9[_0x9b3c9b(0x4e2)] = () => { const _0xb452a7 = _0x9b3c9b; _0x422824(_0x2e1c3e[_0xb452a7(0x552)]), _0x5ef0da(); }, _0x3c354f[_0x9b3c9b(0x4e2)] = _0x5ef0da, _0x3f7a39[_0x9b3c9b(0x4e2)] = _0x5ef0da; }); else _0x8b2530 = _0x382342(_0x29fd70); } } _0x8b2530?.[_0x46903a(0x5b2)] && (_0x36b417 = _0x8b2530[_0x46903a(0x5b2)]); } let _0x567439 = ''; const _0x234009 = _0x382342(_0x12e016?.[_0x46903a(0x69c)][0x0]); if (_0x245715 === _0x46903a(0x2b3)) _0x46903a(0x4bb) === _0x46903a(0x5b0) ? _0x382622[_0x46903a(0x535)] = _0x37232f[_0x46903a(0x6ac)] : _0x234009 && (_0x567439 = _0x234009[_0x46903a(0x3ab)] || ''); else { if (_0x46903a(0x148) !== _0x46903a(0xa02)) { let _0xc601af = null; if (_0x12e016?.[_0x46903a(0xa1e)] === _0x46903a(0x99c)) 'MiISO' === _0x46903a(0x724) ? _0xc601af = _0x234009 : (_0x28570c[_0x46903a(0x390)](_0x46903a(0x307), _0xa60d34), _0xed3d06[_0x46903a(0x45f)] = ''); else _0x12e016?.['type'] === 'group' && _0x29fd70 && (_0x46903a(0x56d) === 'LKhTZ' ? _0x2f543c(_0x46903a(0x879) + _0x2a9f26[_0x46903a(0x332)]) : _0xc601af = _0x382342(_0x29fd70)); if (_0xc601af) { if (_0x46903a(0x679) === 'SkCan') { if (_0x5a89b5) _0x3778b3(_0x4e364c); } else _0x567439 = _0xc601af[_0x46903a(0x7a6)] || ''; } } else _0x2d7c6f[_0x46903a(0x1c5)]('[' + _0x3139cd(_0x227d50) + ']\x20' + _0x167a1f['content']); } const _0x57a699 = _0x4e9793(_0x36b417, _0x567439), _0x3c6c44 = _0x1f1bfc && _0x1f1bfc[_0x46903a(0x3dd)]()['startsWith'](_0x46903a(0x3d0)) && _0x1f1bfc[_0x46903a(0x3dd)]()[_0x46903a(0x506)](_0x46903a(0x85b)); if (_0x3c6c44) { const _0x12e6ac = document[_0x46903a(0x494)](_0x46903a(0x962)); _0x12e6ac[_0x46903a(0x226)] = _0x46903a(0x3c4), _0x12e6ac[_0x46903a(0x282)] = _0x1f1bfc, _0xf124b8 === 'user' ? (_0x44397f[_0x46903a(0x6b3)](_0x12e6ac), _0x44397f['appendChild'](_0x57a699)) : (_0x44397f['appendChild'](_0x57a699), _0x44397f[_0x46903a(0x6b3)](_0x12e6ac)); } else { if (_0x46903a(0x7c9) === _0x46903a(0x7c9)) { const _0x4ddc05 = document[_0x46903a(0x494)](_0x46903a(0x962)); _0x4ddc05['classList'][_0x46903a(0x536)](_0x46903a(0x332), _0xf124b8); if (_0x12e016?.[_0x46903a(0xa1e)] === _0x46903a(0x99c)) { const _0x43c792 = _0x12e016['participantIds'][0x0]; _0x4ddc05[_0x46903a(0x32b)]['add']('bubble-' + _0x43c792); } if (_0x2abc0c[_0x46903a(0x961)]) { if ('lOVdd' !== _0x46903a(0x11c)) { const _0x4538fa = (_0xafb7ae - _0x1f9111) / (0x3e8 * 0x3c); _0x4538fa < 0x3c ? _0x92bb87 += _0x46903a(0x7a5) : _0x15e219 += _0x46903a(0xae3) + _0x40cc87[_0x46903a(0xa13)](_0x4538fa / 0x3c) + _0x46903a(0x933); } else { const _0x5a5d2a = document['createElement']('div'); _0x5a5d2a[_0x46903a(0x226)] = 'quoted-message-in-bubble'; const _0x18d925 = document['createElement'](_0x46903a(0x962)); _0x18d925[_0x46903a(0x226)] = 'quoted-sender', _0x18d925[_0x46903a(0x52e)] = _0x2abc0c[_0x46903a(0x961)][_0x46903a(0x410)]; const _0x31ce3a = document[_0x46903a(0x494)](_0x46903a(0x962)); _0x31ce3a[_0x46903a(0x226)] = _0x46903a(0x7ab), _0x31ce3a[_0x46903a(0x52e)] = _0x2abc0c['quotedMessage'][_0x46903a(0x6fd)], _0x5a5d2a[_0x46903a(0x6b3)](_0x18d925), _0x5a5d2a['appendChild'](_0x31ce3a), _0x4ddc05[_0x46903a(0x6b3)](_0x5a5d2a); } } if (_0x4d3077) { _0x4ddc05['classList'][_0x46903a(0x536)](_0x46903a(0x4e1)); const _0xf82df0 = document[_0x46903a(0x494)](_0x46903a(0x545)); _0xf82df0['src'] = _0x4d3077, _0xf82df0[_0x46903a(0x32b)]['add'](_0x46903a(0x976)), _0x4ddc05[_0x46903a(0x6b3)](_0xf82df0); } else { if (_0x2abc0c[_0x46903a(0x3e9)] || _0x2abc0c[_0x46903a(0x704)]) { if (_0x46903a(0xa61) === _0x46903a(0x5bb)) { _0x12b5e9(_0x46903a(0x135)); return; } else { _0x4ddc05[_0x46903a(0x32b)][_0x46903a(0x536)](_0x46903a(0x3e9)); const _0x3651d6 = document['createElement'](_0x46903a(0x545)); _0x3651d6[_0x46903a(0x32b)]['add']('message-image-content'), _0x4ddc05[_0x46903a(0x6b3)](_0x3651d6); if (_0x2abc0c[_0x46903a(0x3e9)]) { if (_0x46903a(0x8e3) === _0x46903a(0x8e3)) _0x3651d6[_0x46903a(0x45f)] = _0x2abc0c[_0x46903a(0x3e9)]; else { if (_0x37a17d[_0x46903a(0xb1e)] === 0x0) return; _0x369695 = (_0x49844e + 0x1) % _0x1cebcd['length'], _0x59d1d7(_0xaef299[_0x33e0d4], _0x32b35a); } } else _0x3651d6[_0x46903a(0x45f)] = _0x46903a(0x1fd), _0x2995f2(_0x2abc0c[_0x46903a(0x704)])[_0x46903a(0x69b)](_0xd0539b => { const _0x50a984 = _0x46903a; if (_0xd0539b) { const _0x3ca919 = URL[_0x50a984(0x709)](_0xd0539b); _0x3651d6[_0x50a984(0x45f)] = _0x3ca919, _0x3651d6[_0x50a984(0x532)] = () => { const _0x21aee8 = _0x50a984; _0x21aee8(0xb02) !== 'lxsDa' ? URL[_0x21aee8(0xa8f)](_0x3ca919) : _0x2d628a(_0x21aee8(0x80f)); }; } else 'wLnZG' === _0x50a984(0x6e6) ? _0x3651d6['alt'] = '图片加载失败' : _0x3bc1a2[_0x50a984(0x1c5)](_0x4638c8); })['catch'](_0x29a011 => { const _0x1d322d = _0x46903a; console[_0x1d322d(0x390)](_0x1d322d(0x706), _0x29a011), _0x3651d6[_0x1d322d(0x99a)] = _0x1d322d(0x902); }); if (_0x1f1bfc) { const _0x31c467 = document['createElement']('p'); _0x31c467[_0x46903a(0x7df)][_0x46903a(0xa28)] = _0x46903a(0x1b4), _0x31c467['textContent'] = _0x1f1bfc, _0x4ddc05[_0x46903a(0x6b3)](_0x31c467); } } } else { if (_0x2abc0c[_0x46903a(0xa1e)] === _0x46903a(0x67c)) { _0x4ddc05[_0x46903a(0x32b)][_0x46903a(0x536)](_0x46903a(0x67c)); const _0x5cd305 = _0x2abc0c[_0x46903a(0x1a4)] === _0x46903a(0x2b3) ? _0xb1d08(_0x57ec14[_0x46903a(0x413)]) : _0x382342(_0x2abc0c[_0x46903a(0x972)]), _0x341b69 = _0x2abc0c[_0x46903a(0x703)] === _0xb1d08(_0x57ec14[_0x46903a(0x413)])['id'] ? _0xb1d08(_0x57ec14[_0x46903a(0x413)]) : _0x382342(_0x2abc0c[_0x46903a(0x703)]), _0x40d485 = _0x5cd305?.['name'] ? _0x5cd305[_0x46903a(0x589)] + _0x46903a(0x831) : '转账', _0x2c2b61 = _0x341b69?.[_0x46903a(0x589)] ? _0x46903a(0xaef) + _0x341b69['name'] : '转账', _0x2a680a = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20' + _0x40d485 + _0x46903a(0x950) + _0x2abc0c[_0x46903a(0x582)]['toFixed'](0x2) + _0x46903a(0xa5f) + _0x2c2b61 + _0x46903a(0x351); _0x4ddc05[_0x46903a(0x282)] = _0x2a680a; } else { if (_0x2abc0c['type'] === _0x46903a(0x64b)) { _0x4ddc05[_0x46903a(0x32b)]['add']('music'); const _0x558167 = document[_0x46903a(0x494)](_0x46903a(0x962)); _0x558167['className'] = 'listen-together-card', _0x558167[_0x46903a(0x32b)]['add'](_0x46903a(0x1b0)); const _0x34af60 = _0x2abc0c[_0x46903a(0x1a4)] === _0x46903a(0x2b3) ? _0xb1d08(_0x57ec14[_0x46903a(0x413)])[_0x46903a(0x589)] || '你' : _0x382342(_0x2abc0c[_0x46903a(0x972)])?.['name'] || 'TA', _0x48a509 = 'cover_placeholder_' + _0x2abc0c[_0x46903a(0x665)], _0x3018f8 = _0x46903a(0x223) + _0x48a509 + _0x46903a(0x5e4) + _0x520817 + '\x22>'; _0x2abc0c['coverId'] && _0x2995f2(_0x2abc0c[_0x46903a(0x41a)])['then'](_0x154f6d => { const _0x3ffb4a = _0x46903a; if (_0x3ffb4a(0x82a) === _0x3ffb4a(0x3d4)) { const _0x11362c = _0x136639[_0x3ffb4a(0x494)](_0x3ffb4a(0x962)); _0x11362c['className'] = 'diary-page', _0x11362c['id'] = _0x3ffb4a(0x33f) + _0x1cfd51, _0x444912 === _0x4b8fd6[_0x3ffb4a(0x53a)] && _0x11362c['classList']['add'](_0x3ffb4a(0x334)), _0x235ca7[_0x3ffb4a(0x5e2)](_0x50c225 => { const _0x59dce5 = _0x3ffb4a, _0x1f0f43 = _0x50c225['author'] === _0x59dce5(0x2b3) ? _0x59dce5(0x2b3) : 'ai', _0x5c26f3 = _0x50c225[_0x59dce5(0x52a)] === 'user' ? _0x4a9b51['name'] : _0x1f6854(_0x50c225[_0x59dce5(0x52a)])['name'], _0x2675b0 = _0x26a223[_0x59dce5(0x494)]('div'); _0x2675b0[_0x59dce5(0x226)] = _0x59dce5(0x2a4) + _0x1f0f43, _0x2675b0['dataset'][_0x59dce5(0x665)] = _0x50c225[_0x59dce5(0x665)], _0x2675b0['style']['borderBottom'] = _0x59dce5(0x527), _0x2675b0[_0x59dce5(0x7df)][_0x59dce5(0x619)] = '0', _0x2675b0[_0x59dce5(0x282)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x5c26f3 + _0x59dce5(0xabe) + new _0x1857bb(_0x50c225[_0x59dce5(0x665)])[_0x59dce5(0x97a)](_0x59dce5(0x7bf)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>' + _0x50c225[_0x59dce5(0x6fd)][_0x59dce5(0x254)](/\n/g, _0x59dce5(0xae5)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x11362c[_0x59dce5(0x6b3)](_0x2675b0); }), _0x845ba3[_0x3ffb4a(0x6b3)](_0x11362c); } else { const _0x52ad2e = document[_0x3ffb4a(0x67e)](_0x48a509); if (_0x52ad2e && _0x154f6d) _0x52ad2e[_0x3ffb4a(0x45f)] = URL[_0x3ffb4a(0x709)](_0x154f6d); } }), _0x2abc0c['accepted'] ? _0x558167[_0x46903a(0x282)] = _0x46903a(0x8ce) + _0x3018f8 + _0x46903a(0x176) + _0x2abc0c[_0x46903a(0x9cf)] + _0x46903a(0x4fa) + _0x2abc0c['artist'] + _0x46903a(0x5c2) : _0x558167[_0x46903a(0x282)] = _0x46903a(0x67f) + _0x34af60 + _0x46903a(0x3ad) + _0x3018f8 + _0x46903a(0x176) + _0x2abc0c[_0x46903a(0x9cf)] + _0x46903a(0x4fa) + _0x2abc0c['artist'] + _0x46903a(0xa01) + _0x2abc0c[_0x46903a(0x2b4)] + _0x46903a(0x473), _0x4ddc05[_0x46903a(0x6b3)](_0x558167); } else { if (_0x2abc0c['type'] === 'music' && _0x2abc0c[_0x46903a(0x9cf)]) { _0x4ddc05[_0x46903a(0x32b)]['add'](_0x46903a(0x89f)); const _0x5b17f2 = document['createElement'](_0x46903a(0x962)); _0x5b17f2[_0x46903a(0x226)] = _0x46903a(0xac6), _0x5b17f2[_0x46903a(0x988)][_0x46903a(0x75b)] = _0x46903a(0xa47) + _0x2abc0c[_0x46903a(0x665)]; const _0x2fd1c4 = _0x46903a(0x1ca) + _0x2abc0c[_0x46903a(0x665)], _0x100d73 = '<img\x20src=\x22' + _0x520817 + '\x22\x20id=\x22' + _0x2fd1c4 + _0x46903a(0x267); if (_0x2abc0c[_0x46903a(0x41a)]) 'FTOFp' !== _0x46903a(0x874) ? _0x2995f2(_0x2abc0c[_0x46903a(0x41a)])[_0x46903a(0x69b)](_0x195d22 => { const _0x206506 = _0x46903a; if ('SKSrq' !== 'XSNCI') { const _0xeab3cd = document[_0x206506(0x67e)](_0x2fd1c4); if (_0xeab3cd && _0x195d22) _0xeab3cd['src'] = URL[_0x206506(0x709)](_0x195d22); } else return _0x186595[_0x206506(0x214)][_0x206506(0x937)](_0x16c115 => typeof _0x16c115 === 'string' ? _0x16c115 : _0x16c115?.[_0x206506(0x6fd)])[_0x206506(0x1a0)](_0x48e762)['flatMap'](_0x907b48); }) : _0xb58beb += _0x46903a(0x7ee); else _0x2abc0c[_0x46903a(0x605)] && setTimeout(() => { const _0x467f84 = _0x46903a; if (_0x467f84(0x8b4) === _0x467f84(0x64c)) _0x396589[_0x467f84(0x422)] = _0x370e50, _0x1b8c69(), _0x57c639(_0x467f84(0x960)), _0x383a21(), _0xf9531c[_0x467f84(0x67e)](_0x467f84(0x7fd))[_0x467f84(0x7df)]['display'] = 'none'; else { const _0x4ad694 = document[_0x467f84(0x67e)](_0x2fd1c4); if (_0x4ad694) _0x4ad694[_0x467f84(0x45f)] = _0x2abc0c[_0x467f84(0x605)]; } }, 0x0); _0x5b17f2[_0x46903a(0x282)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x100d73 + _0x46903a(0x9fe) + _0x2abc0c[_0x46903a(0x9cf)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x2abc0c[_0x46903a(0xa16)] + _0x46903a(0x3a9) + (_0x2abc0c[_0x46903a(0x2ea)] ? '▶' : '⚠') + _0x46903a(0x85b), _0x2abc0c['playableUrl'] && _0x5b17f2[_0x46903a(0x990)](_0x46903a(0x821), function () { const _0x2cac57 = _0x46903a, _0x160acf = { 'id': _0x2cac57(0xa47) + _0x2abc0c[_0x2cac57(0x665)], 'url': _0x2abc0c[_0x2cac57(0x2ea)] }; _0x1104e0(this, _0x160acf); }), _0x4ddc05[_0x46903a(0x6b3)](_0x5b17f2); } else { if (_0x46903a(0x1fc) !== _0x46903a(0xa48)) { if (_0x1f1bfc) { const _0x357b94 = document['createElement']('p'); _0x357b94[_0x46903a(0x282)] = _0x1f1bfc, _0x357b94[_0x46903a(0x7df)][_0x46903a(0x8d0)] = '0', _0x4ddc05[_0x46903a(0x6b3)](_0x357b94); } } else { const _0x2f2071 = _0x8eb148['getAll'](); _0x2f2071['onsuccess'] = () => _0x504ff8(_0x2f2071[_0x46903a(0x20c)]), _0x2f2071[_0x46903a(0x7e4)] = () => _0x231039(_0x2f2071[_0x46903a(0x390)]); } } } } } } _0xf124b8 === _0x46903a(0x2b3) ? (_0x44397f[_0x46903a(0x6b3)](_0x4ddc05), _0x44397f['appendChild'](_0x57a699)) : _0x46903a(0x1df) !== _0x46903a(0x1df) ? (_0x2e9521[_0x46903a(0xa73)] && _0x1f78e6[_0x46903a(0x2fd)] && (_0x5554ac[_0x46903a(0x4cf)](_0x46903a(0x77f)), _0x1fe8c1['currentAbortController'][_0x46903a(0x245)](_0x46903a(0x8d7)), _0x26b839[_0x46903a(0x2fd)] = null), _0x100c56['isGenerating'] = ![], _0x3f2d3a(![])) : (_0x44397f[_0x46903a(0x6b3)](_0x57a699), _0x44397f['appendChild'](_0x4ddc05)); } else { if (_0x56572f) _0x1145e3(_0x4321f9); if (_0x5a0c36['defaultPrevented']) return; _0x19fbd4(() => { const _0x545c71 = _0x46903a; _0x252a6c && _0x514fdc(_0x135075['id'], _0x1606dc[_0x545c71(0x937)](_0x386442 => _0x386442['id'])); }, 0x32); } } _0xb6378d['appendChild'](_0x44397f); const _0x3511b3 = document[_0x46903a(0x494)](_0x46903a(0x962)); return _0x3511b3[_0x46903a(0x226)] = _0x46903a(0x665), _0x3511b3['textContent'] = _0x4e0234(_0x2abc0c[_0x46903a(0x665)]), _0xb6378d[_0x46903a(0x6b3)](_0x3511b3), _0x540c47['appendChild'](_0xb6378d), _0xb6378d; } else _0x2e5bd8[_0x46903a(0x7df)]['display'] = 'none'; } document[_0x3b2836(0x67e)]('chat-messages')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x289a97); let _0x5e5787 = null, _0xc60374 = null; function _0x289a97(_0x32fe23) { const _0xa44d51 = _0x3b2836; if (_0xa44d51(0x29d) === _0xa44d51(0x29d)) { if (window['getSelection']()[_0xa44d51(0x9bb)]()) return; const _0x3df696 = _0x32fe23[_0xa44d51(0x842)][_0xa44d51(0x3a1)](_0xa44d51(0x97d)), _0x50870c = _0x32fe23[_0xa44d51(0x842)][_0xa44d51(0x3a1)](_0xa44d51(0x132)); if (!_0x3df696 || _0x50870c) return; const _0x318c40 = parseInt(_0x3df696[_0xa44d51(0x988)][_0xa44d51(0xa4b)], 0xa); if (isNaN(_0x318c40)) return; _0x21ad96(_0x318c40); } else { const _0xcaed4 = _0xbaa93d[_0x324914]; _0x38724c(_0xcaed4); } } function _0x2db3fa() { const _0x4fc632 = _0x3b2836, _0x316661 = _0x3a6dc0(); if (!_0x316661) { _0x5ba873[_0x4fc632(0x52e)] = _0x4fc632(0x449); return; } if (_0x316661['type'] === _0x4fc632(0x99c)) { if (_0x4fc632(0x9d9) !== _0x4fc632(0x9d9)) _0x493483[_0x2d5d84][_0x4fc632(0x32b)][_0x4fc632(0x318)](_0x4fc632(0x2b0)), _0x22b858[_0x3d7197][_0x4fc632(0x552)] = ''; else { const _0x4d463d = _0x382342(_0x316661['participantIds'][0x0]); _0x5ba873['textContent'] = _0x4d463d ? _0x4d463d[_0x4fc632(0x589)] : _0x4fc632(0x65e); } } else _0x5ba873[_0x4fc632(0x52e)] = _0x316661[_0x4fc632(0x589)] || '群聊\x20(' + _0x316661['participantIds'][_0x4fc632(0xb1e)] + ')'; } function _0x1c520d(_0x5322dc) { const _0x1fed14 = _0x3b2836, _0x2e0442 = document[_0x1fed14(0x433)](_0x1fed14(0x31b)); if (_0x2e0442 && (_0x2e0442['id'] === _0x1fed14(0x74f) || _0x2e0442['id'] === _0x1fed14(0x80a))) _0x1fed14(0x428) === _0x1fed14(0x428) ? _0x2d1a6a() : _0x51f9fd += _0x1fed14(0x150) + _0xd2289b[_0x1fed14(0x891)] + _0x1fed14(0x2f5) + _0x4abf95[_0x1fed14(0xb17)][_0x1fed14(0x9f9)]('、') + '。\x0a'; else { if ('QwTrB' !== _0x1fed14(0x78c)) _0x263a99[_0x1fed14(0x7df)][_0x1fed14(0xa70)] = 0x0, _0x1631a6(() => { const _0x2eb724 = _0x1fed14; _0x3ab404[_0x2eb724(0x45f)] = _0x2ddbfa['createObjectURL'](_0xcfd1aa), _0x3e173e[_0x2eb724(0x7df)][_0x2eb724(0xa70)] = 0x1; }, 0x96); else { const _0x56b98d = document['querySelectorAll'](_0x1fed14(0x752)); _0x56b98d[_0x1fed14(0x5e2)](_0x1dfad7 => _0x1dfad7[_0x1fed14(0x318)]()); } } } function _0x4eacb2() { const _0x363af9 = _0x3b2836; _0x57ec14[_0x363af9(0xa73)] && _0x57ec14[_0x363af9(0x2fd)] && (_0x363af9(0xb00) === _0x363af9(0x4af) ? (_0x3881ff['value'] = _0x17f94f, _0xf75fcf['classList']['remove'](_0x363af9(0x716))) : (console[_0x363af9(0x4cf)](_0x363af9(0x77f)), _0x57ec14['currentAbortController'][_0x363af9(0x245)](_0x363af9(0x8d7)), _0x57ec14[_0x363af9(0x2fd)] = null)), _0x57ec14[_0x363af9(0xa73)] = ![], _0x1c520d(![]); } function _0x3a6dc0() { const _0x497507 = _0x3b2836; if (_0x497507(0xa39) !== _0x497507(0xab7)) return _0x57ec14[_0x497507(0x313)][_0x497507(0x270)](_0x499bc6 => _0x499bc6['id'] === _0x57ec14[_0x497507(0x413)]); else { const _0x4838f6 = _0x2de43f(_0x3f7d09), _0x1d9e66 = _0x51f1a0['getElementById'](_0x497507(0x782)); _0x1d9e66[_0x497507(0x7df)][_0x497507(0x6dd)] = ''; let _0x870ab7 = _0x3e5f36['getElementById']('style-' + _0x44a651); if (_0x870ab7) _0x870ab7[_0x497507(0x282)] = ''; if (!_0x4838f6) return; _0x4838f6[_0x497507(0x783)] && (_0x1d9e66[_0x497507(0x7df)][_0x497507(0x6dd)] = _0x497507(0xa5e) + _0x4838f6[_0x497507(0x783)] + '\x27)', _0x1d9e66[_0x497507(0x7df)][_0x497507(0x4b5)] = _0x497507(0xa4e), _0x1d9e66['style'][_0x497507(0xa75)] = _0x497507(0x21e)); if (_0x4838f6[_0x497507(0x4e6)]) { let _0x4d3d5b = _0x499a2f['getElementById'](_0x497507(0x1be) + _0x4838f6['id']); !_0x4d3d5b && (_0x4d3d5b = _0x20214b[_0x497507(0x494)](_0x497507(0x7df)), _0x4d3d5b['id'] = _0x497507(0x1be) + _0x4838f6['id'], _0x32e100['head'][_0x497507(0x6b3)](_0x4d3d5b)); const _0x11618d = _0x4838f6[_0x497507(0x4e6)], _0x55bd18 = _0x11618d[_0x497507(0x254)](/\.bubble\.sent/g, '.bubble-' + _0x4838f6['id'] + _0x497507(0x727))['replace'](/\.bubble\.received/g, _0x497507(0xa95) + _0x4838f6['id'] + _0x497507(0x4f1)); _0x4d3d5b[_0x497507(0x282)] = _0x55bd18; } } } function _0x382342(_0x41a61a) { const _0x5a72f8 = _0x3b2836; if ('ZIpJf' !== _0x5a72f8(0x79a)) return _0x57ec14[_0x5a72f8(0x862)][_0x5a72f8(0x270)](_0x20b937 => _0x20b937['id'] === _0x41a61a); else _0x1f448b(_0xd49b0[_0x5a72f8(0x69c)][0x0]); } function _0x4d2723(_0x108d94) { const _0x3aaecb = _0x3b2836; _0x57ec14[_0x3aaecb(0x862)] = _0x57ec14[_0x3aaecb(0x862)][_0x3aaecb(0x1a0)](_0x27e93b => _0x27e93b['id'] !== _0x108d94), _0x57ec14[_0x3aaecb(0x313)][_0x3aaecb(0x5e2)](_0x4086c5 => { const _0x292616 = _0x3aaecb; if (_0x4086c5[_0x292616(0xa1e)] === _0x292616(0x7d1)) { if (_0x292616(0xa76) !== _0x292616(0xa76)) { const _0x28215d = _0x5368e4[_0x292616(0x67e)]('accounting-content-area'); _0x213fca[_0x292616(0x67e)](_0x292616(0x80d))[_0x292616(0x52e)] = '账本', _0x5bd9ed['getElementById'](_0x292616(0x859))[_0x292616(0x282)] = ''; const _0x24774a = _0x28d0a4[_0x292616(0x756)](_0x2e85e5[_0x292616(0x420)])[_0x292616(0x42a)]((_0x3f0f90, _0x27768f) => new _0x3030c4(_0x27768f) - new _0x4273ef(_0x3f0f90)); if (_0x24774a[_0x292616(0xb1e)] === 0x0) { _0x28215d['innerHTML'] = _0x292616(0x42d); return; } _0x28215d[_0x292616(0x282)] = '', _0x24774a[_0x292616(0x5e2)](_0x9cdcd5 => { const _0x15b927 = _0x292616, _0x2f07ca = _0x425c9d[_0x15b927(0x494)](_0x15b927(0x962)); _0x2f07ca[_0x15b927(0x226)] = _0x15b927(0x5be), _0x2f07ca['style']['cursor'] = 'pointer'; const _0x36ad29 = _0x19c149[_0x15b927(0x420)][_0x9cdcd5], _0x3dac9c = _0x36ad29[_0x15b927(0xaf9)][_0x15b927(0x4a5)]((_0x722570, _0x137d1b) => _0x722570 + (_0x137d1b['amount'] || 0x0), 0x0); _0x2f07ca[_0x15b927(0x282)] = _0x15b927(0x6ad) + _0x9cdcd5 + _0x15b927(0x7b5) + _0x3dac9c[_0x15b927(0x81f)](0x2) + _0x15b927(0xafd), _0x2f07ca[_0x15b927(0x990)](_0x15b927(0x821), () => { const _0x598b18 = _0x15b927; _0xd7cc05[_0x598b18(0x32b)][_0x598b18(0x318)](_0x598b18(0x115)), _0x53bc5c[_0x598b18(0x32b)]['add'](_0x598b18(0x115)), _0x31e442(_0x36ad29, _0x9cdcd5); }), _0x28215d['appendChild'](_0x2f07ca); }); } else _0x4086c5[_0x292616(0x69c)] = _0x4086c5[_0x292616(0x69c)][_0x292616(0x1a0)](_0x3dcf0a => _0x3dcf0a !== _0x108d94); } }); const _0x10e006 = _0x57ec14['chats']['find'](_0x3cc156 => _0x3cc156[_0x3aaecb(0xa1e)] === 'private' && _0x3cc156[_0x3aaecb(0x69c)][_0x3aaecb(0x9e5)](_0x108d94)); _0x10e006 && _0x779a16(_0x10e006['id']), _0x57ec14['chats'] = _0x57ec14[_0x3aaecb(0x313)][_0x3aaecb(0x1a0)](_0x578112 => _0x578112[_0x3aaecb(0xa1e)] !== _0x3aaecb(0x7d1) || _0x578112[_0x3aaecb(0x69c)]['length'] > 0x1), _0x203e68(), _0x1721c6(); } function _0x779a16(_0x3507f6) { const _0x28d980 = _0x3b2836; if ('DIrKY' !== 'DIrKY') { const _0xabcd00 = _0x556f91[_0x28d980(0x258)](_0x1b282d['dataset']['log'][_0x28d980(0x254)](/&quot;/g, '\x22')), _0x46ae8a = _0x23535c['dataset'][_0x28d980(0x491)], _0x4e6f52 = _0x493958[_0x28d980(0x988)]['characterName']; _0x328cc2(_0x46ae8a, _0x4e6f52, _0xabcd00); } else { _0x57ec14[_0x28d980(0x313)] = _0x57ec14[_0x28d980(0x313)][_0x28d980(0x1a0)](_0x45c552 => _0x45c552['id'] !== _0x3507f6); try { localStorage[_0x28d980(0x523)]('chatHistory_' + _0x3507f6); } catch (_0x47bcc8) { console[_0x28d980(0x390)](_0x28d980(0x987) + _0x3507f6, _0x47bcc8); } _0x57ec14['activeChatId'] === _0x3507f6 && (_0x57ec14[_0x28d980(0x413)] = _0x57ec14[_0x28d980(0x313)][0x0]?.['id'] || null, _0x292b8d(_0x57ec14[_0x28d980(0x413)])), _0x203e68(), _0x1721c6(); } } async function _0x292b8d(_0x2f1ae0) { const _0x594605 = _0x3b2836; if (_0x594605(0xa7e) === _0x594605(0x959)) { _0x1a14e8('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else { _0x57ec14['activeChatId'] !== _0x2f1ae0 && (_0x4eacb2(), _0x57ec14[_0x594605(0x19b)] = 0x64); if (!_0x2f1ae0) { _0x57ec14[_0x594605(0x413)] = null, _0x203e68(), _0x510e94(![]), document['getElementById'](_0x594605(0x782))[_0x594605(0x7df)][_0x594605(0x6dd)] = ''; return; } _0x57ec14[_0x594605(0x413)] = _0x2f1ae0, _0x203e68(), _0x2db3fa(), _0x540c47[_0x594605(0x282)] = '', _0x58ea7f(!![], _0x594605(0xa62)), setTimeout(async () => { const _0x4ca5f1 = _0x594605; try { _0x2ee71f(); const _0xafb572 = _0x3a6dc0(), _0x4467d5 = document[_0x4ca5f1(0x67e)](_0x4ca5f1(0x782)); let _0x16a1fc = null; if (_0xafb572) { if (_0xafb572[_0x4ca5f1(0xa1e)] === _0x4ca5f1(0x99c)) { const _0x49f5ea = _0xafb572[_0x4ca5f1(0x69c)][0x0]; _0x1f883d(_0x49f5ea), _0x16a1fc = await _0x2995f2(_0x4ca5f1(0xa4c) + _0x49f5ea); } else { if ('AkIbG' !== _0x4ca5f1(0x4b1)) _0x16a1fc = await _0x2995f2(_0x4ca5f1(0x7e2) + _0xafb572['id']); else return; } _0x16a1fc ? _0x4ca5f1(0x949) === _0x4ca5f1(0x949) ? (_0x4467d5[_0x4ca5f1(0x7df)][_0x4ca5f1(0x6dd)] = _0x4ca5f1(0xa5e) + URL[_0x4ca5f1(0x709)](_0x16a1fc) + '\x27)', _0x4467d5[_0x4ca5f1(0x7df)][_0x4ca5f1(0x4b5)] = _0x4ca5f1(0xa4e), _0x4467d5[_0x4ca5f1(0x7df)][_0x4ca5f1(0xa75)] = _0x4ca5f1(0x21e)) : _0x4b40fe[_0x4ca5f1(0x75c)]() : _0x4ca5f1(0x3f2) === 'MiJin' ? _0x1387d9 += '-\x20' + _0x1a1706['stringify'](_0x33523b) + '\x0a' : _0x4467d5[_0x4ca5f1(0x7df)]['backgroundImage'] = ''; } _0x1c7b21(); } catch (_0x22a755) { _0x4ca5f1(0x481) !== _0x4ca5f1(0x5ba) ? (console['error'](_0x4ca5f1(0x504), _0x22a755), _0x33f536(_0x4ca5f1(0x615) + _0x22a755[_0x4ca5f1(0x332)])) : _0x49f4a7[_0x4ca5f1(0x282)] = _0x2d2d87; } finally { _0x58ea7f(![]); } }, 0x32); } } async function _0x2d7a2b() { const _0x7efad4 = _0x3b2836; if (_0x7efad4(0x19d) !== 'BVpMn') { const _0x51367c = _0x1d366c[_0x7efad4(0x67e)](_0x7efad4(0x156)); _0x51367c[_0x7efad4(0x282)] = ''; if (_0x343cb8[_0x7efad4(0xade)]['length'] === 0x0) { _0x51367c[_0x7efad4(0x282)] = _0x7efad4(0xa67); return; } _0x3a96d5[_0x7efad4(0xade)][_0x7efad4(0x5e2)](_0x4ff1b1 => { const _0xcb30ce = _0x7efad4, _0x2e16b6 = _0x2ed58a[_0xcb30ce(0x391)][_0xcb30ce(0x270)](_0x1f88f8 => _0x1f88f8['id'] === _0x4ff1b1[_0xcb30ce(0x347)]) || { 'name': '未知用户' }, _0x1ffe3a = _0x43230d[_0xcb30ce(0x494)]('div'); _0x1ffe3a[_0xcb30ce(0x226)] = _0xcb30ce(0x8fe), _0x1ffe3a['dataset']['id'] = _0x4ff1b1['id'], _0x1ffe3a[_0xcb30ce(0x282)] = _0xcb30ce(0x492) + _0x4ff1b1[_0xcb30ce(0x589)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x2e16b6[_0xcb30ce(0x589)] + _0xcb30ce(0x598) + _0x4ff1b1[_0xcb30ce(0x434)][_0xcb30ce(0xb1e)] + _0xcb30ce(0x346), _0x1ffe3a[_0xcb30ce(0x990)](_0xcb30ce(0x821), () => _0x32cd6f(_0x4ff1b1['id'])), _0x51367c[_0xcb30ce(0x6b3)](_0x1ffe3a); }); } else { if (_0x57ec14[_0x7efad4(0xa73)]) { _0x33f536(_0x7efad4(0x94b)); return; } const _0x28a1a6 = _0x57ec14[_0x7efad4(0xa8a)]; if (_0x28a1a6[_0x7efad4(0xb1e)] === 0x0) return; let _0x5e5c7e = -0x1; for (let _0x27d8b1 = _0x28a1a6[_0x7efad4(0xb1e)] - 0x1; _0x27d8b1 >= 0x0; _0x27d8b1--) { if (_0x7efad4(0x1a8) === _0x7efad4(0x274)) _0x612747('AI整理失败了，哼:\x20' + _0x17eebd['message']); else { if (_0x28a1a6[_0x27d8b1]['role'] === _0x7efad4(0x2b3)) { _0x5e5c7e = _0x27d8b1; break; } } } if (_0x5e5c7e === -0x1 || _0x5e5c7e === _0x28a1a6[_0x7efad4(0xb1e)] - 0x1) { _0x33f536('还没有我的回应可以重新生成哦。'); return; } _0x28a1a6[_0x7efad4(0x920)](_0x5e5c7e + 0x1), _0x57ec14[_0x7efad4(0xae0)] = [], _0xc97ff3(), _0x28bb0f(), _0x1414b6(_0x57ec14[_0x7efad4(0x601)]), setTimeout(() => { const _0x5c4443 = _0x7efad4; 'fWuqm' !== _0x5c4443(0x320) ? _0x7f5e33() : _0x166281[_0x5c4443(0x5e2)](_0x4d1c9f => { const _0x4ff0c2 = _0x5c4443, _0x26b7d2 = _0x4d1c9f['sender'] === _0x4ff0c2(0x9bc), _0x1e77e9 = _0x26b7d2 ? _0x5209d2 ? _0x4263e7[0x0] : '?' : _0x39d727 ? _0x3f37b2[0x0] : '?'; _0x2a300d += _0x4ff0c2(0x7af) + (_0x26b7d2 ? 'user' : 'ai') + _0x4ff0c2(0x2d6) + (!_0x26b7d2 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x1e77e9 + '</div>' : '') + _0x4ff0c2(0x93e) + (_0x26b7d2 ? _0x4ff0c2(0x2b3) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x4d1c9f[_0x4ff0c2(0x6fd)] + _0x4ff0c2(0x86a) + (_0x26b7d2 ? _0x4ff0c2(0x125) + _0x1e77e9 + _0x4ff0c2(0x85b) : '') + _0x4ff0c2(0x71f); }); }, 0x64); } } async function _0x5e220c() { const _0x3327fa = _0x3b2836; if (_0x57ec14['isGenerating']) { _0x33f536(_0x3327fa(0x8db)); return; } const _0x5293f5 = _0x57ec14[_0x3327fa(0xa8a)]; if (_0x5293f5[_0x3327fa(0xb1e)] === 0x0) return; let _0x1691df = -0x1; for (let _0x119d7c = _0x5293f5[_0x3327fa(0xb1e)] - 0x1; _0x119d7c >= 0x0; _0x119d7c--) { if (_0x3327fa(0x24d) === _0x3327fa(0x24d)) { if (_0x5293f5[_0x119d7c]['role'] === 'user') { if (_0x3327fa(0x5cc) === _0x3327fa(0x5cc)) { _0x1691df = _0x119d7c; break; } else return new _0x10b8c2(_0x188dde => { const _0x5280df = _0x3327fa, _0x5af431 = _0xea2c9f[_0x5280df(0x67e)]('modal-root'), _0x1c7d38 = _0x2420c0[_0x5280df(0x67e)](_0x5280df(0x5d8)), _0x3026f1 = _0x1a3aa2[_0x5280df(0x67e)](_0x5280df(0x153)), _0x10d468 = _0x26e781['getElementById'](_0x5280df(0xacb)), _0x201362 = _0x26206d['getElementById'](_0x5280df(0x994)); _0x1c7d38[_0x5280df(0x52e)] = _0xc62e3f, _0x5af431['style']['display'] = _0x5280df(0x38c); const _0x44a695 = _0xb54370 => { const _0x59c44a = _0x5280df; _0x5af431[_0x59c44a(0x7df)]['display'] = _0x59c44a(0x527), _0x3026f1[_0x59c44a(0x4e2)] = _0x10d468[_0x59c44a(0x4e2)] = _0x201362['onclick'] = null, _0xf3adb8[_0x59c44a(0x6a0)]('keydown', _0xea3b3a), _0x188dde(_0xb54370); }, _0xea3b3a = _0x49b684 => { const _0x321f1f = _0x5280df; if (_0x49b684[_0x321f1f(0x99d)] === 'Escape') _0x44a695(![]); if (_0x49b684[_0x321f1f(0x99d)] === 'Enter') _0x44a695(!![]); }; _0x3026f1[_0x5280df(0x4e2)] = () => _0x44a695(!![]), _0x10d468['onclick'] = () => _0x44a695(![]), _0x201362[_0x5280df(0x4e2)] = () => _0x44a695(![]), _0x583cdd[_0x5280df(0x990)](_0x5280df(0xa35), _0xea3b3a); }); } } else _0x15fb05['removeItem'](_0x3327fa(0x59c) + _0x52a001); } if (_0x1691df === -0x1 || _0x1691df === _0x5293f5['length'] - 0x1) { if (_0x3327fa(0x625) !== _0x3327fa(0x625)) { if (_0x564ccf[_0x3327fa(0x1a4)] === _0x3327fa(0x2b3)) return _0x4f855b[_0x3327fa(0xaf7)]?.[_0x3327fa(0x589)] || 'User'; if (_0x4f02be['senderId']) { const _0x2dc94b = _0x3c2a77(_0x26ba48[_0x3327fa(0x972)]); return _0x2dc94b?.[_0x3327fa(0x589)] || _0x3327fa(0x828); } if (_0x333641?.['type'] === 'private') { const _0xa9851e = _0x43b638(_0x441092[_0x3327fa(0x69c)][0x0]); return _0xa9851e?.[_0x3327fa(0x589)] || 'AI'; } return _0x3327fa(0x514); } else { _0x33f536(_0x3327fa(0x1b6)); return; } } _0x5293f5['splice'](_0x1691df + 0x1), _0xc97ff3(), _0x2d1a6a(), setTimeout(() => { _0x7f5e33(); }, 0x64); } function _0x3834ff(_0x2ec8bc = null) { const _0xb9901d = _0x3b2836, _0x2ad880 = _0x2ec8bc ?? _0x332f7c[_0xb9901d(0x552)]['trim'](); if (_0x2ad880 === '' || !_0x57ec14[_0xb9901d(0x413)]) return; const _0x247a3c = document['querySelector'](_0xb9901d(0x31b)), _0x483dc9 = _0x247a3c['id'] === _0xb9901d(0x74f), _0x5d7f1d = { 'role': _0xb9901d(0x2b3), 'content': _0x2ad880, 'timestamp': Date[_0xb9901d(0x2c5)](), 'isOffline': _0x483dc9 }; _0x57ec14[_0xb9901d(0xa41)] && ('UWmlY' !== _0xb9901d(0x29b) ? _0x49a3e8('这个也是摆设，别点了。') : _0x5d7f1d[_0xb9901d(0x961)] = { ..._0x57ec14[_0xb9901d(0xa41)] }), _0x57ec14[_0xb9901d(0xa8a)]['push'](_0x5d7f1d), _0xc97ff3(), _0x2d1a6a(), !_0x2ec8bc && (_0x332f7c[_0xb9901d(0x552)] = ''), _0x6921e2(); } function _0x3e6b5a(_0x415c66) { const _0x124517 = _0x3b2836; if (_0x124517(0x17a) !== 'PmUCB') { if (!_0x415c66 || !_0x57ec14['activeChatId']) return; const _0x1a3eca = { 'role': _0x124517(0x2b3), 'content': _0x124517(0x93f) + _0x415c66[_0x124517(0x589)] + ']', 'displayUrl': _0x415c66[_0x124517(0x609)], 'timestamp': Date[_0x124517(0x2c5)]() }; _0x57ec14['conversationHistory'][_0x124517(0x1c5)](_0x1a3eca), _0x4493ba(_0x1a3eca, _0x57ec14['conversationHistory']['length'] - 0x1), _0xc97ff3(), _0x3c6155[_0x124517(0x32b)]['remove'](_0x124517(0x716)); } else { _0x2a2229(_0x124517(0xa78)); return; } } async function _0x3ddc61(_0x36bbe4) { const _0x3472fc = _0x3b2836; if (_0x3472fc(0x31f) === 'EURrx') { if (_0x3e758e < 0x0 || _0x1c2d05 >= _0x3b0897[_0x3472fc(0xb1e)]) return; _0x2a4324 = _0x1e0977; const _0x48388c = _0x54f6af[_0xce3bee]; _0x38a05b[_0x3472fc(0x45f)] = _0x48388c[_0x3472fc(0x2ea)] || _0x48388c['url'], _0x514354[_0x3472fc(0x350)](), _0x19df57(), _0x34a7f6(); } else { const _0x9f6a70 = _0x36bbe4[_0x3472fc(0x842)][_0x3472fc(0x7e7)][0x0]; if (!_0x9f6a70 || !_0x57ec14['activeChatId']) return; _0x58ea7f(!![], _0x3472fc(0x22e)); try { if (_0x3472fc(0x762) === _0x3472fc(0x762)) { const _0x5b2a09 = await _0x1c44ae(_0x9f6a70, 0x320, 0.8, !![]), _0x1e730f = 'chat_image_' + Date[_0x3472fc(0x2c5)](); await _0x59767c(_0x1e730f, _0x5b2a09); const _0x1b438e = _0x332f7c['value']['trim'](); _0x332f7c[_0x3472fc(0x552)] = ''; const _0x3c08a6 = { 'role': _0x3472fc(0x2b3), 'content': _0x1b438e, 'imageId': _0x1e730f, 'timestamp': Date[_0x3472fc(0x2c5)]() }; _0x57ec14[_0x3472fc(0xa8a)][_0x3472fc(0x1c5)](_0x3c08a6), _0x4493ba(_0x3c08a6, _0x57ec14[_0x3472fc(0xa8a)]['length'] - 0x1), _0xc97ff3(); } else _0x4f4665[_0x3472fc(0x67e)](_0x3472fc(0x4e9))[_0x3472fc(0x52e)] = '为\x20' + _0x4bc17b + _0x3472fc(0x853), _0x3761f9['getElementById'](_0x3472fc(0x5a0))['value'] = '', _0x5ff9f1[_0x3472fc(0x67e)](_0x3472fc(0x36c))[_0x3472fc(0x262)] = !![], _0x277a32[_0x3472fc(0x67e)](_0x3472fc(0xaca))[_0x3472fc(0x32b)][_0x3472fc(0x536)]('show'), _0x2cf70e['getElementById'](_0x3472fc(0x5a0))[_0x3472fc(0x855)](); } catch (_0x275e3b) { if (_0x3472fc(0x438) !== _0x3472fc(0x157)) _0x33f536(_0x3472fc(0x48f) + _0x275e3b['message']); else { _0x295b93[_0x3472fc(0x282)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>'; return; } } finally { if (_0x3472fc(0x6c1) !== _0x3472fc(0xab3)) _0x58ea7f(![]), _0x36bbe4[_0x3472fc(0x842)][_0x3472fc(0x552)] = ''; else { _0x2dc338['id'] === _0xf4969c[_0x3472fc(0x413)] && (_0x392754(), _0x1d5ed7['conversationHistory'] = [], _0x311934()); try { _0x382c7c[_0x3472fc(0x523)](_0x3472fc(0x59c) + _0x5abfca['id']), _0x39666e('群聊\x22' + _0x4eba2a[_0x3472fc(0x589)] + _0x3472fc(0x2c7)); } catch (_0x483bd6) { _0x5d9494[_0x3472fc(0x390)](_0x3472fc(0x6c7) + _0x43b0a2['id'], _0x483bd6), _0x17a251(_0x3472fc(0xac5)); } } } } } async function _0x11ff9b() { const _0x4b55d4 = _0x3b2836; if ('AqsTy' === _0x4b55d4(0x2c0)) { if (!_0x57ec14['activeChatId']) return; const _0x5ef4e7 = await _0x18c421(); if (!_0x5ef4e7) return; _0x33f536(_0x4b55d4(0x199)); try { const _0x32c364 = await _0x2c8c9c(_0x5ef4e7[_0x4b55d4(0x9cf)], _0x5ef4e7['artist']); let _0x3b27ef = _0x32c364['cover']; if (_0x32c364[_0x4b55d4(0xa4e)] && _0x32c364[_0x4b55d4(0xa4e)][_0x4b55d4(0x2bd)](_0x4b55d4(0x444))) try { if (_0x4b55d4(0x822) === 'WfvZW') _0x547c5d(![]), _0x119555[_0x4b55d4(0x842)]['value'] = ''; else { const _0x2197fc = await fetch(_0x32c364['cover']), _0x6625f = await _0x2197fc[_0x4b55d4(0x44f)](); _0x3b27ef = await _0x2a338e(_0x6625f); } } catch (_0x771288) { console[_0x4b55d4(0x390)]('下载并转换网络封面失败:', _0x771288), _0x3b27ef = _0x520817; } const _0x5f57d9 = { 'role': 'user', 'type': _0x4b55d4(0x89f), 'content': _0x4b55d4(0x5db) + _0x5ef4e7['songName'] + '\x20-\x20' + _0x5ef4e7[_0x4b55d4(0xa16)] + ']', 'songName': _0x5ef4e7[_0x4b55d4(0x9cf)], 'artist': _0x5ef4e7['artist'], 'coverUrl': _0x3b27ef, 'playableUrl': _0x32c364['url'], 'timestamp': Date[_0x4b55d4(0x2c5)]() }; _0x57ec14[_0x4b55d4(0xa8a)][_0x4b55d4(0x1c5)](_0x5f57d9), _0x4493ba(_0x5f57d9, _0x57ec14[_0x4b55d4(0xa8a)]['length'] - 0x1), _0xc97ff3(); } catch (_0x45eb55) { console['error'](_0x4b55d4(0x5c1), _0x45eb55), _0x33f536('搜索失败:\x20' + _0x45eb55[_0x4b55d4(0x332)]); } } else { const _0x5c3bd4 = _0x492ccd['createElement']('div'); _0x5c3bd4[_0x4b55d4(0x226)] = _0x4b55d4(0x7c1); const _0x46b2e9 = _0x2c14b3[_0x4b55d4(0x494)](_0x4b55d4(0x962)); _0x46b2e9[_0x4b55d4(0x226)] = 'quoted-sender', _0x46b2e9[_0x4b55d4(0x52e)] = _0x5af47[_0x4b55d4(0x961)][_0x4b55d4(0x410)]; const _0x5d50f9 = _0x1b5040[_0x4b55d4(0x494)]('div'); _0x5d50f9['className'] = _0x4b55d4(0x7ab), _0x5d50f9['textContent'] = _0x3b82ea[_0x4b55d4(0x961)][_0x4b55d4(0x6fd)], _0x5c3bd4['appendChild'](_0x46b2e9), _0x5c3bd4[_0x4b55d4(0x6b3)](_0x5d50f9), _0x5e7373['appendChild'](_0x5c3bd4); } } function _0x2cf1c7(_0x5d7ce5, _0x522a63 = 0x78) { const _0x51506d = _0x3b2836; if (_0x51506d(0x138) === _0x51506d(0xaf1)) { const _0x62771e = _0x220198['getElementById'](_0x51506d(0xa93)); _0x62771e[_0x51506d(0x2bb)](), _0x3d72dc[_0x51506d(0x336)](_0x51506d(0x985)), _0x2c9bdd(_0x51506d(0x2a2)); } else { const _0x5227b8 = _0x4e1d54 => { const _0x3eb391 = _0x51506d; if (_0x4e1d54['role'] === _0x3eb391(0x2b3)) return _0x57ec14[_0x3eb391(0xaf7)]?.['name'] || _0x3eb391(0x35d); if (_0x4e1d54[_0x3eb391(0x972)]) { if ('YIVbZ' !== _0x3eb391(0x23e)) { const _0x396b69 = _0x382342(_0x4e1d54[_0x3eb391(0x972)]); return _0x396b69?.[_0x3eb391(0x589)] || _0x3eb391(0x828); } else { const _0xcfdbc0 = _0x24b9db(_0x232b55); if (_0xcfdbc0) { const _0x34f340 = _0x598bb2['createElement'](_0x3eb391(0x16b)); _0x34f340[_0x3eb391(0x552)] = _0xcfdbc0['id'], _0x34f340['textContent'] = _0xcfdbc0[_0x3eb391(0x589)], _0x1cf756[_0x3eb391(0x6b3)](_0x34f340); } } } if (_0x5d7ce5?.[_0x3eb391(0xa1e)] === _0x3eb391(0x99c)) { const _0x1ac4db = _0x382342(_0x5d7ce5[_0x3eb391(0x69c)][0x0]); return _0x1ac4db?.['name'] || 'AI'; } return 'Assistant'; }, _0x1944e0 = _0x57ec14[_0x51506d(0xa8a)][_0x51506d(0x944)](-_0x522a63), _0x1fa46d = []; for (const _0x1e1055 of _0x1944e0) { if (_0x1e1055[_0x51506d(0x856)]) _0x1fa46d[_0x51506d(0x1c5)]('[' + _0x5227b8(_0x1e1055) + ']\x20[sticker:' + (_0x1e1055[_0x51506d(0x6fd)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x1e1055[_0x51506d(0x3e9)]) { const _0x5ba25f = _0x1e1055[_0x51506d(0x6fd)] ? '\x20' + _0x1e1055[_0x51506d(0x6fd)] : ''; _0x1fa46d[_0x51506d(0x1c5)]('[' + _0x5227b8(_0x1e1055) + _0x51506d(0x9a1) + _0x5ba25f); } else _0x1e1055[_0x51506d(0x6fd)] && _0x1fa46d[_0x51506d(0x1c5)]('[' + _0x5227b8(_0x1e1055) + ']\x20' + _0x1e1055[_0x51506d(0x6fd)]); } } return _0x1fa46d[_0x51506d(0x9f9)]('\x0a'); } } function _0x668632(_0x536e43, _0x1f02b2) { const _0x130dee = _0x3b2836; if (!_0x536e43 || !_0x1f02b2) return null; const _0x8a9b96 = _0x1f02b2[_0x130dee(0xa9e)](/@([^\s:：,，。!?]+)/); if (!_0x8a9b96) return null; const _0x122405 = _0x8a9b96[0x1][_0x130dee(0x1f8)](); for (const _0x3544c3 of _0x536e43[_0x130dee(0x69c)]) { const _0x28a913 = _0x382342(_0x3544c3); if (!_0x28a913?.[_0x130dee(0x589)]) continue; if (_0x28a913[_0x130dee(0x589)][_0x130dee(0x1f8)]() === _0x122405) return _0x28a913; if (_0x28a913[_0x130dee(0x589)]['toLowerCase']()['startsWith'](_0x122405)) return _0x28a913; } return null; } function _0xf15e47(_0x2276f5) { const _0x78228f = _0x3b2836, _0x12bb04 = _0x2276f5['indexOf']('{'), _0x57f7a2 = _0x2276f5[_0x78228f(0x73a)]('}'); if (_0x12bb04 >= 0x0 && _0x57f7a2 > _0x12bb04) return _0x2276f5['slice'](_0x12bb04, _0x57f7a2 + 0x1); return _0x2276f5; } function _0x5db80e(_0x4b25aa, _0x5e8123, _0x4c674c) { const _0x22862c = _0x3b2836; if ('LThgF' !== 'LThgF') _0x4d0ff6[_0x22862c(0x6d4)][_0x22862c(0x882)](_0x22862c(0x25c), _0x22862c(0x1ae)); else { const _0x3c583b = new Map(_0x5e8123[_0x22862c(0x937)](_0x1919b2 => [String(_0x1919b2['id']), _0x1919b2])), _0x29ccfe = _0x35c6d8 => String(_0x35c6d8 || '')[_0x22862c(0x1f8)]()[_0x22862c(0x254)](/\s+/g, ''), _0x318754 = new Map(_0x5e8123[_0x22862c(0x937)](_0x4fc465 => [_0x29ccfe(_0x4fc465['name']), _0x4fc465])), _0x138e8f = new Set(_0x4c674c), _0x501f64 = { 'events': [] }; for (const _0x53ce13 of _0x4b25aa?.[_0x22862c(0x489)] || []) { const _0x5a04b9 = _0x53ce13['senderId'] ?? _0x53ce13[_0x22862c(0x410)] ?? _0x53ce13[_0x22862c(0x502)] ?? _0x53ce13[_0x22862c(0x69a)] ?? _0x53ce13[_0x22862c(0x1a4)] ?? _0x53ce13[_0x22862c(0x589)]; if (!_0x5a04b9) continue; let _0x56c1c9 = _0x3c583b['get'](String(_0x5a04b9)) || _0x318754[_0x22862c(0x751)](_0x29ccfe(_0x5a04b9)); if (!_0x56c1c9) continue; const _0x3f53ec = (_0x53ce13[_0x22862c(0x12a)] || _0x53ce13[_0x22862c(0xa1e)] || _0x22862c(0x9de))[_0x22862c(0x1f8)](); if (_0x3f53ec === _0x22862c(0x4e1)) { if (_0x22862c(0xb13) !== _0x22862c(0x2e7)) { const _0x521529 = (_0x53ce13[_0x22862c(0x4e1)] ?? _0x53ce13[_0x22862c(0x682)] ?? _0x53ce13['emote'] ?? _0x53ce13['tag'])?.[_0x22862c(0x3dd)](); if (_0x521529 && _0x138e8f[_0x22862c(0x58f)](_0x521529)) 'GrJXb' !== _0x22862c(0x305) ? (_0x15da36[_0x22862c(0x67e)](_0x22862c(0x48d) + _0x533925 + '-preview')['style'][_0x22862c(0x6dd)] = '', _0x537fda[_0x22862c(0x67e)](_0x22862c(0x48d) + _0x55647d + _0x22862c(0x53c))[_0x22862c(0x552)] = '') : _0x501f64[_0x22862c(0x489)][_0x22862c(0x1c5)]({ 'senderId': _0x56c1c9['id'], 'kind': _0x22862c(0x4e1), 'sticker': _0x521529 }); else { if (_0x22862c(0x53e) !== 'vctQA') { const _0x12afe5 = String(_0x53ce13[_0x22862c(0x6fd)] ?? _0x53ce13[_0x22862c(0x9de)] ?? '')[_0x22862c(0x3dd)]() || _0x22862c(0x70b) + (_0x521529 || '未知表情') + ']'; if (_0x12afe5) _0x501f64[_0x22862c(0x489)][_0x22862c(0x1c5)]({ 'senderId': _0x56c1c9['id'], 'kind': _0x22862c(0x9de), 'content': _0x12afe5 }); } else _0xa82e04 = _0x13fd3a[_0x22862c(0x258)](_0x97c947); } } else _0x217975[_0x22862c(0x6b3)](_0x95aa8a), _0x16fae5[_0x22862c(0x6b3)](_0x182299); } else { const _0x3ad01b = String(_0x53ce13[_0x22862c(0x6fd)] ?? _0x53ce13['text'] ?? _0x53ce13['message'] ?? '')[_0x22862c(0x3dd)](); if (_0x3ad01b) _0x501f64['events'][_0x22862c(0x1c5)]({ 'senderId': _0x56c1c9['id'], 'kind': 'text', 'content': _0x3ad01b }); } } return _0x501f64; } } async function _0x39d70f(_0x2d2e4c) { const _0x50ebe5 = _0x3b2836; if (!_0x2d2e4c || !Array['isArray'](_0x2d2e4c[_0x50ebe5(0x489)]) || _0x2d2e4c[_0x50ebe5(0x489)]['length'] === 0x0) return; const _0x6ac3f2 = _0x54711a => _0x54711a + Math['floor'](Math[_0x50ebe5(0x757)]() * 0x190); let _0x3b1724 = 0x1f4; for (const _0x119592 of _0x2d2e4c[_0x50ebe5(0x489)]) { if ('fKGau' === _0x50ebe5(0x6ec)) _0x2c1f9b[_0x50ebe5(0x390)](_0x50ebe5(0x576), _0x1b4f29); else { await new Promise(_0x2507fa => setTimeout(_0x2507fa, _0x6ac3f2(_0x3b1724))), _0x3b1724 += 0x2bc; const _0x37be3d = _0x57ec14['conversationHistory']['at'](-0x1)?.[_0x50ebe5(0x684)] ?? ![]; if (_0x119592[_0x50ebe5(0x12a)] === 'sticker') { const _0xc0449c = _0x397bb6['find'](_0x13f7c1 => _0x13f7c1[_0x50ebe5(0x589)] === _0x119592[_0x50ebe5(0x4e1)]); if (_0xc0449c) { const _0x5467ea = { 'role': _0x50ebe5(0x6f7), 'content': _0x50ebe5(0x19c) + _0xc0449c['name'] + ']', 'displayUrl': _0xc0449c[_0x50ebe5(0x609)], 'senderId': _0x119592['senderId'], 'timestamp': Date[_0x50ebe5(0x2c5)](), 'isOffline': _0x37be3d }; _0x57ec14['conversationHistory'][_0x50ebe5(0x1c5)](_0x5467ea); } } else { if (_0x119592['kind'] === _0x50ebe5(0x89f) && _0x119592[_0x50ebe5(0x9cf)] && _0x119592[_0x50ebe5(0xa16)]) { const { songName: _0x2566a7, artist: _0x40756b } = _0x119592, _0x2b7330 = { 'role': _0x50ebe5(0x6f7), 'type': _0x50ebe5(0x89f), 'content': _0x50ebe5(0x721) + _0x2566a7 + '\x20-\x20' + _0x40756b + ']', 'songName': _0x2566a7, 'artist': _0x40756b, 'senderId': _0x119592[_0x50ebe5(0x972)], 'timestamp': Date[_0x50ebe5(0x2c5)](), 'isOffline': _0x37be3d }; try { const _0x2cd1b8 = await _0x2c8c9c(_0x2566a7, _0x40756b); _0x2b7330['coverUrl'] = _0x2cd1b8['cover'], _0x2b7330['playableUrl'] = _0x2cd1b8['url']; } catch (_0xdf9de2) { if (_0x50ebe5(0x775) !== 'EdlZe') console['error'](_0x50ebe5(0x8a3) + _0x2566a7 + '\x20-\x20' + _0x40756b + '):', _0xdf9de2), _0x2b7330[_0x50ebe5(0x605)] = null, _0x2b7330[_0x50ebe5(0x2ea)] = null; else { const _0x24a897 = _0x30a35a['max'](0x1, _0x2375db(_0xfcc061[_0x50ebe5(0x8a1)]?.[_0x50ebe5(0xa33)] ?? 0x64)), _0x55a033 = _0x2627b8['chats'][_0x50ebe5(0x1a0)](_0xb47a4e => _0xb47a4e[_0x50ebe5(0x69c)]['includes'](_0x50b41b)), _0x3ac36c = _0x55a033[_0x50ebe5(0x937)](_0x5eb6bc => { const _0x4994cb = _0x50ebe5, _0x7788b5 = _0x37fb94(_0x5eb6bc['id']), _0x23dc6c = _0x7788b5[_0x4994cb(0xb1e)] > 0x0 ? _0x7788b5[_0x7788b5[_0x4994cb(0xb1e)] - 0x1] : null; return { 'chat': _0x5eb6bc, 'history': _0x7788b5, 'lastTimestamp': _0x23dc6c ? _0x23dc6c[_0x4994cb(0x665)] : 0x0 }; })[_0x50ebe5(0x1a0)](_0x678527 => _0x678527['history'][_0x50ebe5(0xb1e)] > 0x0); _0x3ac36c[_0x50ebe5(0x42a)]((_0x5068b1, _0x2d6a26) => _0x2d6a26[_0x50ebe5(0x1b9)] - _0x5068b1[_0x50ebe5(0x1b9)]); const _0x2d7a03 = [], _0x5e4582 = {}; return _0x3ac36c[_0x50ebe5(0x5e2)]((_0xbc0e86, _0x455489) => { const _0x2a61b5 = _0x50ebe5, _0x2efc04 = _0x2d8e84(_0xbc0e86['chat'], _0xbc0e86[_0x2a61b5(0x711)], _0x24a897); if (_0x2efc04[_0x2a61b5(0xb1e)] === 0x0) return; const _0x49aaf0 = _0x455489 === 0x0 ? _0x2a61b5(0x980) : '来源：'; _0x2d7a03[_0x2a61b5(0x1c5)]('##\x20' + _0x49aaf0 + _0x827475(_0xbc0e86[_0x2a61b5(0xa06)]) + '\x0a' + _0x2efc04[_0x2a61b5(0x9f9)]('\x0a')), _0x5e4582[_0xbc0e86[_0x2a61b5(0xa06)]['id']] = _0x2efc04[_0x2a61b5(0xb1e)]; }), { 'omniText': _0x2d7a03[_0x50ebe5(0x9f9)]('\x0a\x0a'), 'usedCounts': _0x5e4582 }; } } _0x57ec14[_0x50ebe5(0xa8a)][_0x50ebe5(0x1c5)](_0x2b7330); } else { if (_0x119592['kind'] === _0x50ebe5(0x9de)) { const _0xd2a17b = _0x2c582f(_0x119592[_0x50ebe5(0x6fd)])[_0x50ebe5(0x944)](0x0, 0x3); for (let _0x152381 = 0x0; _0x152381 < _0xd2a17b['length']; _0x152381++) { if (_0x50ebe5(0x48b) === 'KgocW') { if (_0x152381 > 0x0) await new Promise(_0x83562 => setTimeout(_0x83562, _0x6ac3f2(0x190))); const _0x35dd1a = { 'role': _0x50ebe5(0x6f7), 'content': _0xd2a17b[_0x152381], 'senderId': _0x119592[_0x50ebe5(0x972)], 'timestamp': Date[_0x50ebe5(0x2c5)](), 'isOffline': _0x37be3d }; _0x57ec14[_0x50ebe5(0xa8a)]['push'](_0x35dd1a); } else _0x3424ef[_0x50ebe5(0x52e)] = '▶'; } } } } } } _0xc97ff3(), _0x2d1a6a(); } async function _0x308a36(_0x51de54, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x5380ee = _0x3b2836; if (_0x5380ee(0x45e) === 'ZyLjk') { await new Promise(_0x3b8acc => setTimeout(_0x3b8acc, 0xa)); if (!_0x57ec14[_0x5380ee(0x3a2)][_0x5380ee(0x90c)] || !_0x57ec14[_0x5380ee(0x3a2)]['key'] || !_0x57ec14[_0x5380ee(0x3a2)][_0x5380ee(0xa6f)]) return _0x33f536('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; const _0x2f3d5f = _0x3a6dc0(); if (!_0x2f3d5f || !_0x51de54) return ![]; const _0x5cd1b0 = _0xb1d08(_0x2f3d5f['id']), _0x56238b = _0x57ec14[_0x5380ee(0xa8a)]['at'](-0x1)?.[_0x5380ee(0x1a4)] === _0x5380ee(0x2b3); if (!force && !_0x56238b) return ![]; const _0x569db0 = _0x57ec14[_0x5380ee(0xa8a)]['at'](-0x1)?.[_0x5380ee(0x684)] ?? ![]; if (delayMs) await new Promise(_0x3eea0b => setTimeout(_0x3eea0b, delayMs)); _0x569db0 ? _0x5380ee(0x78f) === _0x5380ee(0x78f) ? document[_0x5380ee(0x67e)](_0x5380ee(0x7c6))['textContent'] = _0x5380ee(0x82d) : (_0xfa2ec2[_0x5380ee(0x390)](_0x5380ee(0x504), _0x5ded96), _0x28df00('加载聊天失败:\x20' + _0x2cd539[_0x5380ee(0x332)])) : _0x1c520d(!![]); let _0x1ed3c6 = ''; const _0x13dd42 = _0x3a6dc0(); if (_0x13dd42?.[_0x5380ee(0x277)]?.[_0x5380ee(0x3ef)]) { const _0x2416e7 = _0x13dd42[_0x5380ee(0x277)], _0x1f60b0 = await _0x50081a(_0x2416e7[_0x5380ee(0x2b4)]); if (_0x1f60b0 && _0x1f60b0[_0x5380ee(0x25a)]) { if (_0x5380ee(0x3ea) === _0x5380ee(0x3ea)) { const _0x5090b1 = _0x1573d1(_0x1f60b0[_0x5380ee(0x25a)]); if (_0x5090b1[_0x5380ee(0xb1e)] > 0x0) { if (_0x5380ee(0x35f) === _0x5380ee(0x35f)) { const _0x329b85 = _0x5cf78c['currentTime']; let _0x4ff749 = -0x1; for (let _0x3f2cb1 = 0x0; _0x3f2cb1 < _0x5090b1[_0x5380ee(0xb1e)]; _0x3f2cb1++) { if (_0x329b85 >= _0x5090b1[_0x3f2cb1][_0x5380ee(0x811)]) _0x4ff749 = _0x3f2cb1; else break; } const _0x5bae41 = _0x5090b1[_0x5380ee(0x937)]((_0x25af92, _0x535810) => { const _0x161700 = _0x5380ee; if (_0x161700(0x623) !== _0x161700(0x623)) { _0x2f6718 && (_0x137479(_0x541fc5), _0x389219 = null); _0x166372['getElementById'](_0x161700(0x61f))[_0x161700(0x7df)][_0x161700(0x741)] = _0x161700(0x527); const _0x2ea9c7 = _0x523f18[_0x161700(0x67e)]('snoop-dock'); if (_0x2ea9c7) _0x2ea9c7[_0x161700(0x318)](); const _0x24e3ed = _0x5942fd[_0x161700(0x67e)]('snoop-home-clock'); if (_0x24e3ed) _0x24e3ed[_0x161700(0x318)](); _0x2c8d04(_0x161700(0x409), _0x161700(0x17c)); } else { const _0x1acf2f = _0x535810 === _0x4ff749 ? _0x161700(0xa38) : ''; return '' + _0x1acf2f + _0x25af92[_0x161700(0x9de)]; } })['join']('\x0a'); _0x1ed3c6 = (_0x5380ee(0x2fc) + _0x2416e7['artist'] + '\x20的《' + _0x2416e7[_0x5380ee(0x9cf)] + _0x5380ee(0xa09) + _0x5bae41 + _0x5380ee(0x2ff))[_0x5380ee(0x3dd)](); } else _0x27b446(!![]); } } else { if (_0x4db5c0) _0x5ab6a5[_0x5380ee(0x52e)] = '❚❚'; } } } let _0xf617b5 = '', _0x3f6274 = ''; const _0x516e57 = _0x57ec14[_0x5380ee(0xa8a)]['length']; if (_0x516e57 > 0x1) { const _0x29c4c7 = _0x57ec14[_0x5380ee(0xa8a)][_0x516e57 - 0x2], _0x19d76a = _0x57ec14[_0x5380ee(0xa8a)][_0x516e57 - 0x1]; if (_0x29c4c7[_0x5380ee(0x684)] === ![] && _0x19d76a[_0x5380ee(0x684)] === !![]) _0x3f6274 = _0x5380ee(0x616) + _0x5cd1b0[_0x5380ee(0x589)] + _0x5380ee(0x33c); else _0x29c4c7[_0x5380ee(0x684)] === !![] && _0x19d76a['isOffline'] === ![] && (_0x3f6274 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“' + _0x5cd1b0[_0x5380ee(0x589)] + _0x5380ee(0x66d)); } if (_0x569db0) { if ('gaLOL' !== 'yFHDd') { const _0x263d49 = _0x5380ee(0xaa5); _0xf617b5 = _0x5380ee(0x2d0) + _0x5cd1b0[_0x5380ee(0x589)] + _0x5380ee(0x3ce) + _0x263d49 + _0x5380ee(0x126) + _0x51de54['name'] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x263d49 + _0x5380ee(0x896) + _0x263d49 + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0x3b9150[_0x5380ee(0x390)](_0x5380ee(0x706), _0x1c1e5c), _0x15a8ec[_0x5380ee(0x99a)] = '图片加载失败'; } else _0x5380ee(0x24e); const { omniText: _0x3f246e } = _0x91c93b(_0x51de54['id'], _0x2f3d5f['id']), _0x295a68 = _0x1e789a(), _0x539c4f = _0x4ca835(_0x51de54['id']), _0x517004 = _0xafb7cb(_0x51de54['id']), _0xdf6da8 = await _0x4b5bb4(_0x51de54['id']), _0x32cd84 = typeof _0x1dcf50 === _0x5380ee(0x5b8) ? _0x1dcf50[_0x5380ee(0x317)](_0x5380ee(0x948), _0x51de54[_0x5380ee(0x589)])['replaceAll'](_0x5380ee(0x2d3), _0x5cd1b0[_0x5380ee(0x589)] || '用户') : '', _0x46fd7f = _0x397bb6['map'](_0x58688e => _0x58688e[_0x5380ee(0x589)])[_0x5380ee(0x9f9)](',\x20'); let _0x556241 = ''; if (_0x51de54[_0x5380ee(0x48e)] && _0x51de54[_0x5380ee(0x48e)][_0x5380ee(0xb1e)] > 0x0) { if ('KFdTw' !== 'JwDRA') { const _0x3441bd = _0x51de54[_0x5380ee(0x48e)][_0x5380ee(0x937)](_0xacee8f => _0x57ec14[_0x5380ee(0x9cd)]['find'](_0x5b233f => _0x5b233f['id'] === _0xacee8f))['filter'](Boolean)[_0x5380ee(0x937)](_0x2b2c81 => _0x5380ee(0x201) + _0x2b2c81[_0x5380ee(0x589)] + '\x0a' + _0x2b2c81[_0x5380ee(0x6fd)])[_0x5380ee(0x9f9)](''); if (_0x3441bd) _0x556241 = _0x5380ee(0x7f5) + _0x3441bd; } else { const _0x397199 = _0x42ef29[_0x5380ee(0x552)]; _0x50c896[_0x5380ee(0x6a1)]['style'][_0x5380ee(0x522)]('--primary-hue', _0x397199), _0x5636cf['setItem'](_0x5380ee(0x923), _0x397199), _0x32e0cb(); } } const _0x18edfc = _0x5cd1b0[_0x5380ee(0x7dc)] ? _0x5380ee(0x4f2) + _0x5cd1b0[_0x5380ee(0x589)] + _0x5380ee(0x5bc) + _0x5cd1b0[_0x5380ee(0x7dc)] : ''; let _0x25b3c5 = ''; const _0x4bcc25 = new Date(), _0x187529 = _0xdf03ca(_0x51de54['id']); _0x25b3c5 = _0x5380ee(0x93a), _0x25b3c5 += _0x5380ee(0x59d) + _0x4bcc25[_0x5380ee(0x97a)](_0x5380ee(0x7bf), { 'dateStyle': _0x5380ee(0x575), 'timeStyle': _0x5380ee(0x930) }) + '\x0a'; if (_0x187529) { if (_0x5380ee(0xa8e) !== 'DfCVS') { const _0x4cb3b7 = new Date(_0x187529[_0x5380ee(0x665)]), _0x4062ca = _0x456df6(_0x4cb3b7); _0x25b3c5 += _0x5380ee(0x1d9) + _0x4062ca + '\x0a'; const _0x94d91a = _0x4bcc25[_0x5380ee(0x3df)](), _0x269f8c = _0x4cb3b7[_0x5380ee(0x3df)](), _0x264c27 = new Date(); _0x264c27['setDate'](_0x4bcc25['getDate']() - 0x1); const _0xaa5cf3 = _0x264c27[_0x5380ee(0x3df)](); if (_0x94d91a === _0x269f8c) { const _0x4039ab = (_0x4bcc25 - _0x4cb3b7) / (0x3e8 * 0x3c); _0x4039ab < 0x3c ? _0x25b3c5 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x25b3c5 += _0x5380ee(0xae3) + Math[_0x5380ee(0xa13)](_0x4039ab / 0x3c) + '小时前），可以简单问候一下对方现在的状态。\x0a'; } else { if (_0xaa5cf3 === _0x269f8c) 'nSOYQ' === _0x5380ee(0x16c) ? (_0x287460 = '0x' + _0x517910[0x1] + _0x3fd14c[0x2], _0x15ce01 = '0x' + _0x3d4489[0x3] + _0x12d2e0[0x4], _0x4c23aa = '0x' + _0x6d00e2[0x5] + _0x38c404[0x6]) : _0x25b3c5 += _0x5380ee(0x32e); else { if ('JfWxW' !== _0x5380ee(0x574)) { const _0x29d154 = _0x4fdd0e[_0x5380ee(0x494)]('p'); _0x29d154[_0x5380ee(0x52e)] = _0xbb4593[_0x5380ee(0x9de)], _0x29d154['id'] = _0x5380ee(0x843) + _0x58d849, _0x3cdbd9[_0x5380ee(0x6b3)](_0x29d154); } else { const _0x1744f7 = Math[_0x5380ee(0xa13)]((_0x4bcc25 - _0x4cb3b7) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x25b3c5 += _0x5380ee(0x47e) + _0x1744f7 + _0x5380ee(0xac7); } } } } else _0x2325ea['error'](_0x5380ee(0xae4), _0x54fd50); } else _0x25b3c5 += '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a'; const _0x3ee267 = ('\x0a' + _0xf617b5 + _0x5380ee(0xa40) + _0x51de54[_0x5380ee(0x589)] + '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22' + _0x51de54[_0x5380ee(0x589)] + _0x5380ee(0x47f) + _0x51de54['name'] + _0x5380ee(0x31e) + _0x46fd7f + ']。严禁使用列表之外的任何表情名。\x0a' + _0x32cd84 + '\x0a')[_0x5380ee(0x3dd)](), _0x3f87a7 = [{ 'role': _0x5380ee(0x70d), 'content': _0x3ee267 }], _0x4f95a5 = ('\x0a#\x20你的个性（节选）\x0a' + (_0x51de54[_0x5380ee(0x7dc)] || _0x5380ee(0x591)) + '\x0a' + _0x18edfc + '\x20\x0a' + _0x3f246e + '\x0a' + _0x295a68 + '\x0a' + _0x539c4f + '\x0a' + _0x517004 + _0x5380ee(0x21f) + _0xdf6da8 + _0x5380ee(0x36a) + _0x1ed3c6 + '\x0a' + _0x25b3c5 + '\x0a' + _0x556241 + '\x0a')['trim'](); _0x4f95a5[_0x5380ee(0x254)](/#.*|\s/g, '') && (_0x3f87a7[_0x5380ee(0x1c5)]({ 'role': _0x5380ee(0x2b3), 'content': _0x4f95a5 }), _0x3f87a7['push']({ 'role': _0x5380ee(0x6f7), 'content': _0x5380ee(0x872) })); const _0xcfb030 = _0x57ec14[_0x5380ee(0x8a1)]?.[_0x5380ee(0xa33)] ?? 0x64, _0x2a3332 = _0x57ec14['conversationHistory'][_0x5380ee(0x944)](-_0xcfb030); for (const _0x1b2b93 of _0x2a3332) { const _0x35d9ce = _0x1b2b93[_0x5380ee(0x1a4)] === 'ai' || _0x1b2b93['role'] === _0x5380ee(0x6f7) ? _0x5380ee(0x6f7) : _0x5380ee(0x2b3); let _0x5aae3c = { 'role': _0x35d9ce, 'content': _0x1b2b93[_0x5380ee(0x6fd)] }, _0x4bf2f5 = !!_0x1b2b93[_0x5380ee(0x6fd)]; if (_0x1b2b93[_0x5380ee(0x856)] && _0x1b2b93[_0x5380ee(0x6fd)]['includes']('表情')) { if (_0x5380ee(0x887) !== 'WTRIH') _0x3fd8af(), _0x180d0a(![]); else { const _0x51caa2 = _0x1b2b93['content'][_0x5380ee(0xa9e)](/：(.*?)]$/); _0x5aae3c[_0x5380ee(0x6fd)] = _0x5380ee(0x70b) + (_0x51caa2 ? _0x51caa2[0x1] : '未知表情') + ']', _0x3f87a7[_0x5380ee(0x1c5)](_0x5aae3c); } } else { let _0x8c1ff3 = null; if (_0x1b2b93[_0x5380ee(0x3e9)]) _0x5380ee(0xaa6) !== _0x5380ee(0x846) ? _0x8c1ff3 = _0x1b2b93[_0x5380ee(0x3e9)] : _0x85176f[_0x5380ee(0x390)](_0x5380ee(0x579) + _0x45cd4b['id'] + _0x5380ee(0x6bb), _0x106158); else { if (_0x1b2b93[_0x5380ee(0x704)]) try { const _0x3e84f7 = await _0x2995f2(_0x1b2b93[_0x5380ee(0x704)]); _0x3e84f7 && (_0x5380ee(0x86c) === 'DZYfp' ? (_0x3d21d4 = _0x10a106[_0x5380ee(0x589)] || '我', _0x24a86e = _0x5380ee(0x7b9)) : _0x8c1ff3 = await _0x2a338e(_0x3e84f7)); } catch (_0x4bc5f8) { if ('eoHJT' !== 'eoHJT') return new _0x3b694f((_0x30c9e3, _0x2cdfaa) => { const _0x5b5b9d = _0x5380ee, _0x5bc10e = new _0x59a98a(); _0x5bc10e[_0x5b5b9d(0x4ef)] = () => _0x30c9e3(_0x5bc10e[_0x5b5b9d(0x20c)]), _0x5bc10e[_0x5b5b9d(0x7e4)] = _0x2cdfaa, _0x5bc10e[_0x5b5b9d(0x14d)](_0x2dbdcc); }); else console[_0x5380ee(0x390)](_0x5380ee(0x897), _0x4bc5f8); } } _0x8c1ff3 && (_0x5aae3c[_0x5380ee(0x3e9)] = _0x8c1ff3, _0x4bf2f5 = !![]); if (_0x4bf2f5) { if ('BPtia' === _0x5380ee(0x286)) { const _0x205911 = _0x54b2f2(_0x368675[_0x5380ee(0x5ac)]); _0x205911 && (_0x151ad5 = _0x205911[_0x5380ee(0x589)], _0x571439 = _0x205911['avatar']); } else _0x3f87a7[_0x5380ee(0x1c5)](_0x5aae3c); } } } try { if (_0x5380ee(0x5fe) === _0x5380ee(0x5fe)) { const _0x549103 = await _0x5e65cf(_0x3f87a7); if (!_0x549103) return ![]; if (_0x569db0) { if (_0x5380ee(0x7c7) !== 'WYMvM') try { let _0x1c2d24 = _0x549103['trim'](); const _0x24ec64 = _0x1c2d24[_0x5380ee(0xa9e)](/(\[[\s\S]*\])/); _0x24ec64 && (_0x1c2d24 = _0x24ec64[0x1]); const _0x55c65a = JSON[_0x5380ee(0x258)](_0x1c2d24); if (Array[_0x5380ee(0x241)](_0x55c65a)) { if (_0x5380ee(0x89c) !== 'ePtOH') { const _0x13945b = _0x13b43f[0x0], _0x535887 = new _0x55a690(_0x13945b[_0x5380ee(0x2b8)] + _0x5380ee(0x656)), _0x259284 = _0x535887 - _0xb09027, _0x5f2d4b = _0x544038['ceil'](_0x259284 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x3c9920['textContent'] = '距离「' + _0x13945b[_0x5380ee(0x6fd)] + '」', _0x3b69e1['innerHTML'] = _0x5380ee(0x70f) + _0x5f2d4b + '</span><span\x20class=\x22unit\x22>天</span>'; } else { _0x57ec14[_0x5380ee(0xae0)] = [..._0x55c65a], _0x57ec14['characterLastScripts'][_0x51de54['id']] = [..._0x55c65a], _0x1ac4c3(); const _0x398aba = _0x55c65a[_0x5380ee(0x937)](_0x329ae4 => _0x329ae4['speaker'] === _0x5380ee(0xa86) ? _0x329ae4[_0x5380ee(0x45a)] : _0x329ae4[_0x5380ee(0x69a)] + ':\x20' + _0x329ae4[_0x5380ee(0x45a)])[_0x5380ee(0x9f9)]('\x0a\x0a'); _0x57ec14['conversationHistory']['push']({ 'role': _0x5380ee(0x6f7), 'senderId': _0x51de54['id'], 'timestamp': Date[_0x5380ee(0x2c5)](), 'isOffline': !![], 'content': _0x398aba }); } } } catch (_0x2b2de5) { console['error'](_0x5380ee(0x71e), _0x2b2de5, _0x5380ee(0x67b), _0x549103), _0x57ec14[_0x5380ee(0xa8a)][_0x5380ee(0x1c5)]({ 'role': _0x5380ee(0x6f7), 'senderId': _0x51de54['id'], 'timestamp': Date[_0x5380ee(0x2c5)](), 'isOffline': !![], 'content': _0x5380ee(0x4dc) + _0x549103 + ']' }); } else _0x46fd54['image'] = _0x12e3c2; } else { const _0x16e8c2 = _0x228610(_0x549103), _0x3778bf = _0x16e8c2[_0x5380ee(0x937)](_0x706413 => { const _0x193f92 = _0x5380ee, _0x505da4 = _0x706413[_0x193f92(0x3dd)](), _0x5800b7 = _0x505da4[_0x193f92(0xa9e)](/^\[sticker:(.*?)\]$/), _0x177add = _0x505da4['match'](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x47861d = _0x505da4[_0x193f92(0xa9e)](/^\[music:(.*?)\|(.*?)\]$/), _0x48b070 = _0x505da4[_0x193f92(0xa9e)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x47861d) return { 'type': _0x193f92(0x89f), 'songName': _0x47861d[0x1][_0x193f92(0x3dd)](), 'artist': _0x47861d[0x2]['trim']() }; else { if (_0x5800b7) return { 'type': 'sticker', 'name': _0x5800b7[0x1]['trim']() }; else { if (_0x48b070) return { 'type': _0x193f92(0x1f7), 'eventType': _0x48b070[0x1]['trim'](), 'eventDate': _0x48b070[0x2]['trim'](), 'eventContent': _0x48b070[0x3][_0x193f92(0x3dd)]() }; else { if (_0x177add) { const _0x467d28 = parseFloat(_0x177add[0x1]), _0x249e4a = _0x177add[0x2][_0x193f92(0x3dd)](), _0xb94953 = _0xb1d08(_0x57ec14[_0x193f92(0x413)]); let _0x23dd2b = null; if (_0x249e4a === _0xb94953[_0x193f92(0x589)]) { if (_0x193f92(0x6b7) !== 'ORoNY') { if (!_0x6b80bb[_0x193f92(0x241)](_0x1fc5a0) || _0x1e100d[_0x193f92(0xb1e)] === 0x0) return _0x193f92(0xaaa); return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x3b907e['map']((_0x3afaae, _0x1e32b3) => { const _0x512451 = _0x193f92, _0x592d00 = _0x301f87[_0x512451(0x7d5)](_0x3afaae[_0x512451(0x4cf)] || [])[_0x512451(0x254)](/'/g, '&apos;')[_0x512451(0x254)](/"/g, _0x512451(0x747)), _0x4fa041 = _0x3afaae[_0x512451(0x42c)] || '未知联系人'; return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x1e32b3 < _0x1fe7c4[_0x512451(0xb1e)] - 0x1 ? _0x512451(0x3e0) : '') + _0x512451(0x8f8) + _0x592d00 + _0x512451(0x561) + _0x4fa041 + _0x512451(0x1a7) + _0xb3dd1 + _0x512451(0x43a) + _0x4fa041[_0x512451(0x95d)](0x0) + _0x512451(0x986) + _0x4fa041 + _0x512451(0x51e) + (_0x3afaae['last_message_preview'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; })['join']('') + _0x193f92(0x85b); } else _0x23dd2b = _0xb94953['id']; } else { const _0xbd3a70 = _0x3a6dc0(); if (_0xbd3a70['type'] === _0x193f92(0x7d1)) { const _0x4ffa89 = _0x57ec14[_0x193f92(0x862)][_0x193f92(0x270)](_0x340ffb => _0xbd3a70[_0x193f92(0x69c)][_0x193f92(0x9e5)](_0x340ffb['id']) && _0x340ffb[_0x193f92(0x589)] === _0x249e4a); if (_0x4ffa89) _0x23dd2b = _0x4ffa89['id']; } } if (_0x23dd2b) return { 'type': _0x193f92(0x67c), 'amount': _0x467d28, 'recipientId': _0x23dd2b, 'senderId': _0x51de54['id'] }; else return { 'type': _0x193f92(0x9de), 'content': '(想转账给“' + _0x249e4a + _0x193f92(0x28e) }; } else { if (_0x505da4) return { 'type': _0x193f92(0x9de), 'content': _0x505da4 }; } } } } return null; })[_0x5380ee(0x1a0)](Boolean), _0x40ff37 = async _0x252126 => { const _0x526254 = _0x5380ee; if (_0x526254(0x791) !== _0x526254(0x768)) { const _0x188e06 = { 'role': 'assistant', 'senderId': _0x51de54['id'], 'timestamp': Date[_0x526254(0x2c5)](), 'isOffline': _0x569db0 }; if (_0x252126[_0x526254(0xa1e)] === 'music') { if (_0x526254(0x971) === _0x526254(0x4be)) _0x37a6cc = _0x526254(0x979); else { const { songName: _0x219b61, artist: _0x21c577 } = _0x252126; _0x188e06[_0x526254(0xa1e)] = _0x526254(0x89f), _0x188e06[_0x526254(0x6fd)] = _0x526254(0x721) + _0x219b61 + _0x526254(0x56b) + _0x21c577 + ']'; try { if (_0x526254(0x7a2) !== _0x526254(0x814)) { const _0x6f6370 = await _0x2c8c9c(_0x219b61, _0x21c577); let _0xe94d89 = null; if (_0x6f6370[_0x526254(0xa4e)]) { if ('pCRKq' === _0x526254(0xa55)) { const _0x1bccb1 = await _0x1707d7(_0x6f6370['cover']); _0xe94d89 = _0x526254(0x3e1) + Date[_0x526254(0x2c5)]() + '_' + Math[_0x526254(0x757)](), await _0x59767c(_0xe94d89, _0x1bccb1); } else { const _0x433254 = _0x568f97(_0x574938[_0x526254(0x6fd)] ?? _0x1f5f34[_0x526254(0x9de)] ?? '')[_0x526254(0x3dd)]() || _0x526254(0x70b) + (_0x477a56 || '未知表情') + ']'; if (_0x433254) _0x442ca2[_0x526254(0x489)][_0x526254(0x1c5)]({ 'senderId': _0x522518['id'], 'kind': _0x526254(0x9de), 'content': _0x433254 }); } } Object[_0x526254(0xa36)](_0x188e06, { 'songName': _0x219b61, 'artist': _0x21c577, 'coverId': _0xe94d89, 'playableUrl': _0x6f6370[_0x526254(0x609)] }); } else { if (_0x26ee79['type'] === _0x526254(0x44d)) _0x3d6af7[_0x526254(0x624)](); _0x12ed5c(_0x40ef86); } } catch (_0x2a2296) { Object['assign'](_0x188e06, { 'songName': _0x219b61, 'artist': _0x21c577, 'coverId': null, 'playableUrl': null }); } } } else { if (_0x252126['type'] === _0x526254(0x4e1)) { if (_0x526254(0x94e) !== _0x526254(0xacd)) { const _0x2bd5ab = _0x397bb6[_0x526254(0x270)](_0x2b7683 => _0x2b7683[_0x526254(0x589)] === _0x252126[_0x526254(0x589)]); if (_0x2bd5ab) Object[_0x526254(0xa36)](_0x188e06, { 'content': _0x526254(0x19c) + _0x2bd5ab[_0x526254(0x589)] + ']', 'displayUrl': _0x2bd5ab[_0x526254(0x609)] }); else _0x188e06[_0x526254(0x6fd)] = '[sticker:' + _0x252126[_0x526254(0x589)] + ']'; } else _0x42d43c[_0x526254(0x1c5)](_0x492e28['id']); } else { if (_0x252126['type'] === _0x526254(0x67c)) { if (_0x526254(0xa00) === _0x526254(0x702)) { _0x112345 = _0x5678fa(_0x45bae5[_0x526254(0x25a)]), _0x21af9e[_0x526254(0x282)] = ''; if (_0x1c9950[_0x526254(0xb1e)] === 0x0) { _0x3e9444['innerHTML'] = _0x526254(0x485); return; } _0x250ecd['forEach']((_0x2156f7, _0x5f2539) => { const _0x1c8928 = _0x526254, _0x84ff2a = _0x1559e5[_0x1c8928(0x494)]('p'); _0x84ff2a[_0x1c8928(0x52e)] = _0x2156f7['text'], _0x84ff2a['id'] = _0x1c8928(0x843) + _0x5f2539, _0x13d41c['appendChild'](_0x84ff2a); }); } else { const _0x381f54 = _0x252126[_0x526254(0x703)] === _0xb1d08(_0x57ec14[_0x526254(0x413)])['id'] ? _0xb1d08(_0x57ec14[_0x526254(0x413)]) : _0x382342(_0x252126['recipientId']); Object['assign'](_0x188e06, { 'type': _0x526254(0x67c), 'amount': _0x252126['amount'], 'recipientId': _0x252126['recipientId'], 'content': '[AI向\x20' + (_0x381f54?.[_0x526254(0x589)] || '未知') + _0x526254(0x774) + _0x252126['amount'] + ']' }); } } else { if (_0x252126['type'] === _0x526254(0x1f7)) { if (_0x526254(0x569) === _0x526254(0xa12)) { const _0x16fea7 = _0x2b0cbb(_0x5a51d5[_0x526254(0x6fd)] ?? _0x16f7cb[_0x526254(0x9de)] ?? _0x201ba0[_0x526254(0x332)] ?? '')['trim'](); if (_0x16fea7) _0x2bf13d[_0x526254(0x489)][_0x526254(0x1c5)]({ 'senderId': _0xd095a6['id'], 'kind': _0x526254(0x9de), 'content': _0x16fea7 }); } else { const _0x129529 = _0xb1d08(_0x2f3d5f['id']); if (!_0x129529 || !_0x129529['id']) return console[_0x526254(0x390)](_0x526254(0x875)), null; _0x57ec14['calendarEvents']['push']({ 'id': _0x526254(0x977) + Date[_0x526254(0x2c5)](), 'date': _0x252126[_0x526254(0x2ed)], 'type': _0x252126[_0x526254(0x124)], 'content': _0x252126[_0x526254(0x61e)], 'userId': _0x129529['id'], 'createdBy': 'ai' }), _0x203e68(), _0x5381e5(), _0x2eff78(); const _0x4dfbdc = _0x382342(_0x51de54['id']); _0x4dfbdc && _0x252126[_0x526254(0x124)] === _0x526254(0x3d2) && _0x33f536(_0x526254(0x247) + _0x4dfbdc[_0x526254(0x589)] + '\x20添加了新的纪念日：' + _0x252126[_0x526254(0x61e)]); return { 'role': 'assistant', 'senderId': _0x51de54['id'], 'timestamp': Date[_0x526254(0x2c5)](), 'isOffline': _0x569db0, 'content': null }; return { 'role': 'assistant', 'senderId': _0x51de54['id'], 'timestamp': Date[_0x526254(0x2c5)](), 'isOffline': _0x569db0, 'content': null }; } } else { const _0x4ac8e3 = _0x4a3562(_0x252126[_0x526254(0x6fd)]); Object[_0x526254(0xa36)](_0x188e06, { 'content': _0x4ac8e3['content'], 'quotedMessage': _0x4ac8e3[_0x526254(0x961)] }); } } } } return _0x188e06; } else { const _0xd2e671 = _0x350595(_0x34f369[_0x526254(0x59a)]())[_0x526254(0xa2e)](0x2, '0'), _0x35d38b = _0xb2014f(_0x1861ea['getMinutes']())[_0x526254(0xa2e)](0x2, '0'); _0x4e23a2[_0x526254(0x52e)] = _0xd2e671 + ':' + _0x35d38b; const _0xc710ca = _0x374f80['getMonth']() + 0x1, _0x20ce21 = _0x2430fa[_0x526254(0x4f3)](), _0x109396 = ['星期日', _0x526254(0x908), _0x526254(0x813), _0x526254(0x541), _0x526254(0x27a), _0x526254(0x116), '星期六'][_0x2292ac['getDay']()]; _0xb2732c[_0x526254(0x52e)] = _0xc710ca + '月' + _0x20ce21 + '日\x20' + _0x109396; } }, _0x24b03f = await Promise[_0x5380ee(0x77b)](_0x3778bf[_0x5380ee(0x937)](_0x40ff37)); for (const _0x272ed0 of _0x24b03f) { (_0x272ed0[_0x5380ee(0x6fd)] || _0x272ed0[_0x5380ee(0x856)] || _0x272ed0[_0x5380ee(0xa1e)] === 'music') && (await new Promise(_0x51b3d5 => setTimeout(_0x51b3d5, 0x12c + Math[_0x5380ee(0x757)]() * 0x190)), _0x57ec14[_0x5380ee(0xa8a)][_0x5380ee(0x1c5)](_0x272ed0), _0x2d1a6a()); } } return _0xc97ff3(), _0x2d1a6a(), !![]; } else _0x2662b7['textContent'] = _0x5380ee(0x68f) + _0x298840['length'] + '\x20项'; } catch (_0x555da8) { if (_0x555da8[_0x5380ee(0x589)] !== _0x5380ee(0x807)) { console[_0x5380ee(0x390)](_0x5380ee(0xa3a), _0x555da8); const _0x228d6f = { 'role': 'assistant', 'content': _0x5380ee(0x4d7) + _0x555da8[_0x5380ee(0x332)], 'senderId': _0x51de54['id'], 'isOffline': _0x569db0 }; _0x57ec14[_0x5380ee(0xa8a)][_0x5380ee(0x1c5)](_0x228d6f), _0x2d1a6a(); } return ![]; } finally { _0x1c520d(![]); } } else _0x28f96d[_0x5380ee(0xa1e)] = _0x5380ee(0x89f), _0x20223b[_0x5380ee(0xa36)](_0x3d8a60, _0x516516); } async function _0x4d2013() { const _0x33700b = _0x3b2836, _0x10be11 = _0x3a6dc0(); if (!_0x10be11 || _0x10be11[_0x33700b(0xa1e)] !== _0x33700b(0x99c)) { _0x33f536('哼，只有私聊才能进行总结，群聊那么乱怎么记！'); return; } if (_0x57ec14[_0x33700b(0xa73)]) { if (_0x33700b(0x6c9) === _0x33700b(0x657)) { if (!_0x58be7a[_0x33700b(0x241)](_0x147aa3)) return '<p>格式错误</p>'; if (_0x53c046[_0x33700b(0xb1e)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x1a8d2d[_0x33700b(0x42a)]((_0xe37a5, _0x3c3b89) => new _0x1893b(_0x3c3b89[_0x33700b(0x665)]) - new _0x3e68e4(_0xe37a5['timestamp'])), _0x33700b(0x844) + _0x40911f[_0x33700b(0x937)]((_0x695078, _0x9cd877) => _0x33700b(0x294) + (_0x9cd877 < _0x1a6258[_0x33700b(0xb1e)] - 0x1 ? _0x33700b(0x3e0) : '') + _0x33700b(0x91f) + (_0x695078[_0x33700b(0x482)] || _0x33700b(0x2cf)) + _0x33700b(0x1cf) + (_0x695078[_0x33700b(0x338)] || _0x33700b(0x921)) + _0x33700b(0x237) + (_0x695078[_0x33700b(0x665)] || '') + _0x33700b(0x268))['join']('') + _0x33700b(0x85b); } else { _0x33f536(_0x33700b(0x3be)); return; } } const _0x4b4c30 = await _0x156ce5(_0x33700b(0x64d)); if (!_0x4b4c30) return; _0x58ea7f(!![], _0x33700b(0x405)), _0x290c3b[_0x33700b(0x552)] = '', _0x52e8e9[_0x33700b(0x32b)][_0x33700b(0x536)](_0x33700b(0x716)), _0x57ec14['isGenerating'] = !![]; try { if (_0x33700b(0x888) !== _0x33700b(0x12d)) { const _0x4f23d4 = _0x382342(_0x10be11[_0x33700b(0x69c)][0x0]), _0x4025e6 = _0xb1d08(_0x10be11['id']), _0x45bd25 = _0x2de61d(_0x10be11['id']); if (_0x45bd25[_0x33700b(0xb1e)] === 0x0) { _0x290c3b[_0x33700b(0x552)] = _0x33700b(0x992); return; } const _0x4956dc = _0x45bd25[_0x33700b(0x937)](_0x12ec04 => { const _0x318009 = _0x33700b; if (_0x318009(0x2cb) === _0x318009(0x2cb)) { const _0x278351 = new Date(_0x12ec04[_0x318009(0x665)]), _0x21f522 = _0x278351[_0x318009(0x96c)]() + '-' + String(_0x278351[_0x318009(0x4b8)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x278351['getDate']())['padStart'](0x2, '0'), _0x337d6b = String(_0x278351[_0x318009(0x59a)]())[_0x318009(0xa2e)](0x2, '0') + ':' + String(_0x278351['getMinutes']())[_0x318009(0xa2e)](0x2, '0'); let _0x569f60 = '未知'; _0x12ec04[_0x318009(0x1a4)] === _0x318009(0x2b3) ? _0x569f60 = _0x4025e6[_0x318009(0x589)] : _0x569f60 = _0x4f23d4[_0x318009(0x589)]; let _0x3af79d = _0x12ec04['content']; if (_0x12ec04[_0x318009(0x856)]) _0x3af79d = _0x318009(0x1f2); if (_0x12ec04[_0x318009(0x704)]) _0x3af79d = _0x318009(0x186); return '[' + _0x21f522 + '\x20' + _0x337d6b + _0x318009(0xa1f) + _0x569f60 + ']:\x20' + _0x3af79d; } else { _0x59ffa7(_0x318009(0x82c)); return; } })['join']('\x0a'), _0x367fba = _0x411f76['replace'](/{charName}/g, _0x4f23d4[_0x33700b(0x589)])[_0x33700b(0x254)](/{userName}/g, _0x4025e6['name']), _0x15db3e = [{ 'role': 'system', 'content': _0x367fba }, { 'role': _0x33700b(0x2b3), 'content': _0x4956dc }], _0x241709 = await _0x5e65cf(_0x15db3e); _0x290c3b[_0x33700b(0x552)] = _0x241709 || _0x33700b(0x25d), _0x290c3b[_0x33700b(0x535)] = 0x0; } else _0x56da59(_0x1e307a['id']); } catch (_0x3b59fa) { 'Ksxxj' === _0x33700b(0x3de) ? (console[_0x33700b(0x390)](_0x33700b(0x114), _0x3b59fa), _0x290c3b['value'] = _0x33700b(0x104) + _0x3b59fa['message']) : _0x176412['addEventListener']('click', function () { const _0x3e1787 = _0x33700b, _0x4b4dec = { 'id': _0x3e1787(0xa47) + _0x2893c1['timestamp'], 'url': _0x270484[_0x3e1787(0x2ea)] }; _0x2b0c74(this, _0x4b4dec); }); } finally { if (_0x33700b(0x698) === _0x33700b(0x698)) _0x58ea7f(![]), _0x57ec14[_0x33700b(0xa73)] = ![]; else { if (!_0xdae189) return; const _0x1a9174 = _0x5e4120['activeMeetingCharId'], _0xddc060 = _0x226920(_0x1a9174); if (!_0xddc060) return; const _0x653478 = _0xb65c29(_0x4ea8ae[_0x33700b(0x67e)](_0x33700b(0x323))[_0x33700b(0x552)]), _0x3f3c73 = _0x419157(_0x2c4391[_0x33700b(0x67e)](_0x33700b(0x2e6))['value']), _0x5423f6 = _0x58d68c(_0x415851[_0x33700b(0x67e)](_0x33700b(0xad8))[_0x33700b(0x552)]) / 0x64; _0xddc060['spriteTransform'] = { 'x': _0x653478, 'y': _0x3f3c73, 'scale': _0x5423f6 }; const _0x49e136 = _0x1d0d47[_0x33700b(0x67e)](_0x33700b(0x3d8)), _0x503e67 = 0x50 * _0x5423f6; _0x49e136[_0x33700b(0x7df)][_0x33700b(0x333)] = _0x503e67 + '%', _0x49e136[_0x33700b(0x7df)][_0x33700b(0x96a)] = _0x503e67 + '%', _0x49e136[_0x33700b(0x7df)]['left'] = _0x653478 + '%', _0x49e136[_0x33700b(0x7df)][_0x33700b(0x878)] = _0x3f3c73 + '%', _0x49e136['style'][_0x33700b(0x6b9)] = _0x33700b(0x604); } } } async function _0x7f5e33() { const _0x30b1c1 = _0x3b2836; console['log'](_0x30b1c1(0x5b1)); if (!_0x57ec14[_0x30b1c1(0x3a2)]['endpoint'] || !_0x57ec14['apiSettings'][_0x30b1c1(0x99d)] || !_0x57ec14[_0x30b1c1(0x3a2)]['model']) { _0x33f536('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } const _0x3c1683 = _0x57ec14[_0x30b1c1(0xa8a)]['at'](-0x1)?.[_0x30b1c1(0x1a4)] === _0x30b1c1(0x2b3); if (!_0x3c1683 || _0x57ec14[_0x30b1c1(0xa73)]) return; const _0x4dc285 = _0x3a6dc0(); if (!_0x4dc285) return; _0x57ec14[_0x30b1c1(0xa73)] = !![], _0x1c520d(!![]); try { if (_0x30b1c1(0x382) === _0x30b1c1(0x614)) _0x3dac04[_0x30b1c1(0x8c4)][_0x30b1c1(0x920)](_0x19d017, 0x1), _0x4cafb9(), _0x1c8f19(), _0x48b245(_0x30b1c1(0x9eb)); else { if (_0x4dc285['type'] === _0x30b1c1(0x99c)) { const _0x28c547 = _0x382342(_0x4dc285[_0x30b1c1(0x69c)][0x0]); console[_0x30b1c1(0x4cf)](_0x30b1c1(0x4ad)); if (_0x28c547) await _0x308a36(_0x28c547, { 'force': !![] }); } else { if (_0x30b1c1(0x182) === _0x30b1c1(0x182)) { const _0x11970c = await _0x49db3e(); if (_0x11970c && _0x11970c[_0x30b1c1(0x489)]?.[_0x30b1c1(0xb1e)]) await _0x39d70f(_0x11970c); else { console['warn'](_0x30b1c1(0x171)); const _0x2d6398 = _0x4dc285['participantIds']['map'](_0x382342)['filter'](Boolean); if (!_0x2d6398['length']) return; let _0x23e982 = 0x0; for (const _0x4200c5 of _0x2d6398) { _0x308a36(_0x4200c5, { 'force': !![], 'delayMs': _0x23e982 }), _0x23e982 += 0x1f4; } } } else return { 'type': _0x30b1c1(0x4e1), 'name': _0x567288[0x1]['trim']() }; } } } catch (_0x53c52f) { _0x53c52f[_0x30b1c1(0x589)] !== _0x30b1c1(0x807) && (_0x30b1c1(0x876) !== _0x30b1c1(0x876) ? _0x5e8a84['error']('保存播放器状态失败，真是没用。', _0x2d178b) : (console[_0x30b1c1(0x390)](_0x30b1c1(0x406), _0x53c52f), _0x4493ba({ 'role': _0x30b1c1(0x6f7), 'content': _0x30b1c1(0x4d7) + _0x53c52f[_0x30b1c1(0x332)] }, _0x57ec14['conversationHistory'][_0x30b1c1(0xb1e)] - 0x1))); } finally { if (_0x30b1c1(0x32c) !== _0x30b1c1(0x32c)) { _0xdfd6a2[_0x30b1c1(0x3a2)][_0x30b1c1(0x90c)] = _0x4e321d['value'][_0x30b1c1(0x3dd)](), _0x3f268a[_0x30b1c1(0x3a2)][_0x30b1c1(0x99d)] = _0x5631cc[_0x30b1c1(0x552)][_0x30b1c1(0x3dd)](), _0x3d1d4b[_0x30b1c1(0x3a2)]['model'] = _0x49f981['value'][_0x30b1c1(0x3dd)](), _0x29b471[_0x30b1c1(0x3a2)][_0x30b1c1(0x1ed)] = _0x5cbcf2[_0x30b1c1(0x67e)](_0x30b1c1(0x445))[_0x30b1c1(0x552)]; const _0x55b82b = _0x1ddd70(_0x3045dd['value'], 0xa); _0x166983['preferences'][_0x30b1c1(0xa33)] = _0x36de2e[_0x30b1c1(0x9ae)](_0x55b82b) && _0x55b82b > 0x0 ? _0x55b82b : 0x64, _0x13bd0f(), _0x119f5a(_0x30b1c1(0x439)); } else _0x57ec14[_0x30b1c1(0xa73)] = ![], _0x1c520d(![]); } } function _0x596ea5(_0x1401dc, _0x555906) { const _0x29562b = _0x3b2836, _0x16c87b = _0x555906[_0x29562b(0x1f8)](), _0x5b396f = _0x1401dc['toLowerCase'](); if (_0x16c87b[_0x29562b(0x2bd)](_0x29562b(0x6d1))) return _0x29562b(0x498); if (_0x5b396f['includes'](_0x29562b(0x5d5))) return 'anthropic'; if (_0x5b396f[_0x29562b(0x9e5)]('googleapis.com')) return _0x29562b(0x20a); if (_0x16c87b[_0x29562b(0x2bd)](_0x29562b(0x20a))) return _0x29562b(0x20a); return _0x29562b(0x427); } async function _0x5e65cf(_0x51575e, _0x139c96 = {}) { const _0x33a2fb = _0x3b2836; _0x57ec14['currentAbortController'] && _0x57ec14[_0x33a2fb(0x2fd)][_0x33a2fb(0x245)](_0x33a2fb(0x789)); _0x57ec14[_0x33a2fb(0x2fd)] = new AbortController(); const _0xc0176 = _0x57ec14[_0x33a2fb(0x2fd)][_0x33a2fb(0x36d)], { endpoint: _0x420470, key: _0x152e2c, model: _0x3b1258 } = _0x57ec14[_0x33a2fb(0x3a2)], _0x452e5b = !!_0x139c96[_0x33a2fb(0xa9b)], _0x5ba66a = _0x596ea5(_0x420470, _0x3b1258); console['log'](_0x33a2fb(0x6cf) + _0x5ba66a); let _0x429c13 = ''; try { switch (_0x5ba66a) { case _0x33a2fb(0x498): { const _0x3e6367 = _0x59cd5a(_0x152e2c), _0x4f7907 = _0x51575e[_0x33a2fb(0x270)](_0x55340a => _0x55340a[_0x33a2fb(0x1a4)] === _0x33a2fb(0x70d))?.[_0x33a2fb(0x6fd)] || '', _0x3f1567 = _0x51575e['filter'](_0x912831 => _0x912831[_0x33a2fb(0x1a4)] !== _0x33a2fb(0x70d)), _0x1449b9 = { 'model': _0x3b1258, 'system': _0x4f7907, 'messages': _0x3f1567['map'](_0x42df65 => ({ 'role': _0x42df65['role'], 'content': [{ 'type': _0x33a2fb(0x9de), 'text': _0x42df65[_0x33a2fb(0x6fd)] }] })), 'max_tokens': 0x1000 }, _0x130573 = await fetch(_0x420470, { 'method': _0x33a2fb(0x227), 'headers': { 'Content-Type': _0x33a2fb(0x9ce), 'x-api-key': _0x3e6367, 'anthropic-version': _0x33a2fb(0x8b5) }, 'body': JSON[_0x33a2fb(0x7d5)](_0x1449b9), 'signal': _0xc0176 }); if (!_0x130573['ok']) { if ('msHaQ' !== _0x33a2fb(0x2eb)) { const _0x5535d6 = await _0x130573[_0x33a2fb(0xa9b)]()[_0x33a2fb(0x25b)](() => ({})); throw new Error(_0x33a2fb(0x4c1) + _0x130573['status'] + _0x33a2fb(0x56b) + (_0x5535d6[_0x33a2fb(0x390)]?.[_0x33a2fb(0x332)] || _0x130573[_0x33a2fb(0x34c)])); } else _0x5afadc['currentAbortController'] = null; } const _0x46c8fe = await _0x130573[_0x33a2fb(0xa9b)](); _0x429c13 = _0x46c8fe['content']?.[0x0]?.[_0x33a2fb(0x9de)] || ''; break; } case _0x33a2fb(0x20a): { if (_0x33a2fb(0x337) !== _0x33a2fb(0x1e5)) { const _0x4dd5c6 = _0x59cd5a(_0x152e2c), _0xf0f3b = _0x420470[_0x33a2fb(0x9e5)]('generativelace.googleapis.com'), _0x32a222 = _0x45e449 => { const _0x577eac = _0x33a2fb; if (_0x577eac(0x8cd) !== _0x577eac(0x54c)) { const _0x389093 = []; if (_0x45e449[_0x577eac(0x6fd)]) _0x389093['push']({ 'text': _0x45e449[_0x577eac(0x6fd)] }); if (_0x45e449[_0x577eac(0x3e9)]) { if ('tyQnP' !== 'vNrFe') { const _0x461d6b = _0x45e449[_0x577eac(0x3e9)]['split'](',')[0x1], _0x1790d9 = _0x45e449[_0x577eac(0x3e9)][_0x577eac(0x5ae)](_0x45e449[_0x577eac(0x3e9)][_0x577eac(0x2ac)](':') + 0x1, _0x45e449[_0x577eac(0x3e9)][_0x577eac(0x2ac)](';')) || _0x577eac(0x2c9); _0x389093[_0x577eac(0x1c5)]({ 'inline_data': { 'mime_type': _0x1790d9, 'data': _0x461d6b } }); } else { const _0x145c87 = _0x2f7fee['image'][_0x577eac(0x52b)](',')[0x1], _0x35b871 = _0x3b6b5d[_0x577eac(0x3e9)][_0x577eac(0x5ae)](_0x25cd9a[_0x577eac(0x3e9)][_0x577eac(0x2ac)](':') + 0x1, _0xdbd961[_0x577eac(0x3e9)][_0x577eac(0x2ac)](';')) || _0x577eac(0x2c9); _0x17b5c1[_0x577eac(0x1c5)]({ 'inline_data': { 'mime_type': _0x35b871, 'data': _0x145c87 } }); } } return _0x389093; } else _0xa5c1c5[_0x577eac(0x3e9)] = _0x50897c, _0x15d3b6 = !![]; }, _0x5322cb = _0x51575e['map'](_0x4e0e91 => ({ 'role': _0x4e0e91[_0x33a2fb(0x1a4)] === _0x33a2fb(0x6f7) ? _0x33a2fb(0xa6f) : _0x4e0e91['role'] === _0x33a2fb(0x70d) ? _0x33a2fb(0x2b3) : _0x4e0e91['role'], 'parts': _0x32a222(_0x4e0e91) }))[_0x33a2fb(0x1a0)](_0x4399a8 => _0x4399a8['parts'][_0x33a2fb(0xb1e)] > 0x0), _0x4c9aa7 = { 'contents': _0x5322cb }; _0x452e5b && _0xf0f3b && (_0x33a2fb(0x47a) !== _0x33a2fb(0x141) ? _0x4c9aa7[_0x33a2fb(0x50e)] = { 'response_mime_type': _0x33a2fb(0x9ce) } : (_0x56a657(![]), _0x192857[_0x33a2fb(0x390)](_0x33a2fb(0x982), _0x1bac00), _0x4996f7(_0x33a2fb(0x968) + _0x35b36c[_0x33a2fb(0x332)]))); const _0x5ac194 = _0x420470 + _0x33a2fb(0x5a2) + _0x3b1258 + _0x33a2fb(0xa7a) + _0x4dd5c6 + _0x33a2fb(0x7ae), _0x502c7b = await fetch(_0x5ac194, { 'method': _0x33a2fb(0x227), 'headers': { 'Content-Type': _0x33a2fb(0x9ce) }, 'body': JSON['stringify'](_0x4c9aa7), 'signal': _0xc0176 }); if (!_0x502c7b['ok']) throw new Error(_0x33a2fb(0x6e7) + _0x502c7b[_0x33a2fb(0x7eb)]); const _0x53d8fb = _0x502c7b['body'][_0x33a2fb(0x733)](), _0x313a09 = new TextDecoder(); let _0xbc5a0 = ''; while (!![]) { if (_0x33a2fb(0x81a) !== 'amqVi') { if (_0xc0176[_0x33a2fb(0x152)]) { if ('EwCnn' === _0x33a2fb(0x2b1)) _0x31c614 && (_0x4bca6c = _0x3d035b[_0x33a2fb(0x3ab)] || ''); else { console[_0x33a2fb(0x4cf)](_0x33a2fb(0x450)), _0x53d8fb[_0x33a2fb(0x81e)](); break; } } const { done: _0x5283cd, value: _0x336a91 } = await _0x53d8fb[_0x33a2fb(0x4d1)](); if (_0x5283cd) break; const _0x45cb2c = _0x313a09['decode'](_0x336a91, { 'stream': !![] }), _0x5cbe07 = _0x45cb2c['split']('\x0a')[_0x33a2fb(0x1a0)](_0x58b64b => _0x58b64b[_0x33a2fb(0x3dd)]()[_0x33a2fb(0x2bd)](_0x33a2fb(0x71c))); for (const _0x4f342f of _0x5cbe07) { const _0x1ad6d2 = _0x4f342f[_0x33a2fb(0x254)]('data:\x20', ''); if (_0x1ad6d2 === _0x33a2fb(0x316)) break; try { if ('rFsNW' === _0x33a2fb(0x873)) _0xbc5a0 += JSON[_0x33a2fb(0x258)](_0x1ad6d2)['candidates'][0x0]['content'][_0x33a2fb(0x61d)][0x0][_0x33a2fb(0x9de)]; else { const _0x3adbe5 = _0x33a2fb(0xaa5); _0x3751a2 = _0x33a2fb(0x2d0) + _0x1a3b8d[_0x33a2fb(0x589)] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0x3adbe5 + _0x33a2fb(0x126) + _0x22905b[_0x33a2fb(0x589)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x3adbe5 + ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[' + _0x3adbe5 + _0x33a2fb(0x957); } } catch { } } } else _0x7ce649[_0x33a2fb(0x390)](_0x33a2fb(0xb1b) + _0x221847['id'] + '\x20的图片失败:', _0x2323e8), _0x20306b[_0x33a2fb(0x45f)] = _0x2c4b1d[_0x33a2fb(0x5b2)] || _0x103978; } _0x429c13 = _0xbc5a0; break; } else _0x1fabc0[_0x33a2fb(0x390)](_0x33a2fb(0x342), _0x3ea82e); } case _0x33a2fb(0x427): default: { const _0x529f16 = _0x59cd5a(_0x152e2c), _0x5670d1 = _0x420470[_0x33a2fb(0x254)](/\/+$/, '') + '/v1/chat/completions', _0x530b2b = _0x51575e[_0x33a2fb(0x937)](_0x3e76c1 => { const _0x549986 = _0x33a2fb; if (_0x3e76c1[_0x549986(0x1a4)] === _0x549986(0x2b3) && _0x3e76c1[_0x549986(0x3e9)]) return { 'role': _0x549986(0x2b3), 'content': [{ 'type': _0x549986(0x9de), 'text': _0x3e76c1[_0x549986(0x6fd)] || '\x20' }, { 'type': _0x549986(0x76a), 'image_url': { 'url': _0x3e76c1['image'], 'detail': 'high' } }] }; return { 'role': _0x3e76c1[_0x549986(0x1a4)], 'content': _0x3e76c1[_0x549986(0x6fd)] }; })[_0x33a2fb(0x1a0)](_0x576120 => _0x576120[_0x33a2fb(0x6fd)]), _0x3daf50 = { 'model': _0x3b1258, 'messages': _0x530b2b, 'max_tokens': 0x1000, ..._0x452e5b ? { 'response_format': { 'type': _0x33a2fb(0x25f) } } : {} }, _0x523dd5 = await fetch(_0x5670d1, { 'method': _0x33a2fb(0x227), 'headers': { 'Content-Type': 'application/json', 'Authorization': _0x33a2fb(0x81b) + _0x529f16 }, 'body': JSON[_0x33a2fb(0x7d5)](_0x3daf50), 'signal': _0xc0176 }); if (!_0x523dd5['ok']) { const _0x37060f = await _0x523dd5[_0x33a2fb(0xa9b)]()[_0x33a2fb(0x25b)](() => ({})); throw new Error('OpenAI\x20API\x20错误:\x20' + _0x523dd5[_0x33a2fb(0x7eb)] + _0x33a2fb(0x56b) + (_0x37060f[_0x33a2fb(0x390)]?.[_0x33a2fb(0x332)] || _0x523dd5[_0x33a2fb(0x34c)])); } const _0x15aeee = await _0x523dd5[_0x33a2fb(0xa9b)](); _0x429c13 = _0x15aeee['choices']?.[0x0]?.[_0x33a2fb(0x332)]?.[_0x33a2fb(0x6fd)] || ''; break; } }return _0x429c13; } catch (_0x2717fb) { if (_0x33a2fb(0xa7c) === _0x33a2fb(0xad2)) { const _0x3b0cc1 = _0x53fdc6['getElementById'](_0x33a2fb(0x28a)); if (_0x3b0cc1) _0x3b0cc1[_0x33a2fb(0x52e)] = '▶'; } else { if (_0x2717fb[_0x33a2fb(0x589)] === _0x33a2fb(0x807)) return console['log']('Fetch\x20request\x20was\x20aborted.'), ''; throw _0x2717fb; } } finally { _0x57ec14[_0x33a2fb(0x2fd)] && _0x57ec14[_0x33a2fb(0x2fd)][_0x33a2fb(0x36d)] === _0xc0176 && (_0x57ec14['currentAbortController'] = null); } } async function _0x55859b() { const _0x481e54 = _0x3b2836; if (_0x481e54(0xa21) === _0x481e54(0x8ef)) _0x29fe6d['style']['backgroundImage'] = 'none'; else { const _0x2ff9b9 = _0x2db8f8[_0x481e54(0x51a)][_0x481e54(0x32b)]['contains'](_0x481e54(0x115)), _0x726d42 = _0x2ff9b9 ? _0x2d2312[_0x481e54(0x552)] : null; let _0x1fff8d = null, _0xe040b7 = ''; if (_0x2ff9b9 && _0x726d42) { if (_0x481e54(0x5a4) === _0x481e54(0x5a4)) { _0x1fff8d = _0x57ec14[_0x481e54(0x313)][_0x481e54(0x270)](_0x53f859 => _0x53f859[_0x481e54(0xa1e)] === _0x481e54(0x99c) && _0x53f859[_0x481e54(0x69c)][_0x481e54(0x9e5)](_0x726d42)); const _0x2e8a9f = _0x382342(_0x726d42); _0xe040b7 = _0x2e8a9f ? _0x2e8a9f[_0x481e54(0x589)] : '该角色'; } else { const _0x43937e = _0x32fc42(_0xf3e5a5); if (!_0x43937e) return; _0x406e99[_0x481e54(0x461)] = _0x3a824c; const _0x3d9d32 = _0x3416a9[_0x481e54(0x5aa)]['find'](_0x5c6815 => _0x5c6815[_0x481e54(0x90d)] === _0x35a070), _0x1366cc = _0x3d9d32 ? _0x3d9d32['entries']['length'] : 0x0, _0x40bb7e = 0x2; _0x12e3b1[_0x481e54(0x53a)] = _0x21751f[_0x481e54(0x5a9)](0x0, _0x2d4056[_0x481e54(0x12c)](_0x1366cc / _0x40bb7e) - 0x1), _0x256fd7[_0x481e54(0x67e)](_0x481e54(0x911))[_0x481e54(0x52e)] = _0x43937e[_0x481e54(0x589)] + _0x481e54(0x10e), _0x345b5a(), _0x3f31b0(_0x481e54(0x5fb), _0x481e54(0x2a3)); } } else { if (_0x57ec14[_0x481e54(0x413)]) { _0x1fff8d = _0x3a6dc0(); const _0x29c84f = document[_0x481e54(0x67e)](_0x481e54(0x291))[_0x481e54(0x52e)]; _0xe040b7 = _0x29c84f || _0x481e54(0x915); } } if (!_0x1fff8d) { _0x33f536(_0x481e54(0x29a)); return; } const _0x3190a4 = await _0x156ce5(_0x481e54(0x8ee) + _0xe040b7 + _0x481e54(0x5f9)); if (!_0x3190a4) return; _0x1fff8d['id'] === _0x57ec14[_0x481e54(0x413)] && ('wXxXc' !== _0x481e54(0x3f3) ? (_0x4eacb2(), _0x57ec14[_0x481e54(0xa8a)] = [], _0x1c7b21()) : (_0x140915(), _0x487b87['conversationHistory'] = [], _0x4fbb24())); try { _0x481e54(0x1ac) !== _0x481e54(0xae7) ? localStorage[_0x481e54(0x523)]('chatHistory_' + _0x1fff8d['id']) : _0xb06e54 = 'horizontal'; } catch (_0x5384df) { _0x481e54(0xb19) === _0x481e54(0xb19) ? console[_0x481e54(0x390)](_0x481e54(0x987) + _0x1fff8d['id'], _0x5384df) : (_0x3371aa['stopPropagation'](), _0x153a49[_0x481e54(0x32b)][_0x481e54(0xa2f)](_0x481e54(0x86e)), _0x9f95c2[_0x481e54(0x32b)][_0x481e54(0xa2f)](_0x481e54(0x375))); } _0x33f536('\x22' + _0xe040b7 + '\x22\x20的聊天记录已清空。'); } } const _0x332548 = document[_0x3b2836(0x67e)](_0x3b2836(0x11d)), _0x811107 = document[_0x3b2836(0x67e)](_0x3b2836(0x712)), _0x92c5b7 = document[_0x3b2836(0x67e)](_0x3b2836(0x18d)); _0x332548['addEventListener'](_0x3b2836(0x821), async () => { const _0x461187 = _0x3b2836; _0x58ea7f(!![], _0x461187(0x2da)); const _0x2b1461 = []; try { const _0x355ea0 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x404664 = 0x0; _0x404664 < localStorage[_0x461187(0xb1e)]; _0x404664++) { const _0x2d1fe8 = localStorage[_0x461187(0x99d)](_0x404664); if (_0x2d1fe8) _0x355ea0[_0x461187(0x388)][_0x2d1fe8] = localStorage[_0x461187(0x6e3)](_0x2d1fe8); } const _0x463ac6 = await _0x253fd2, _0x57e28e = _0x463ac6[_0x461187(0x766)](_0x301b6a, _0x461187(0x8cc)), _0x43eda7 = _0x57e28e['objectStore'](_0x301b6a), _0xd10724 = await new Promise((_0x240766, _0x5c3544) => { const _0x57f29b = _0x461187; if (_0x57f29b(0x515) !== _0x57f29b(0x55b)) { const _0x287df0 = _0x43eda7['getAll'](); _0x287df0[_0x57f29b(0x465)] = () => _0x240766(_0x287df0['result']), _0x287df0[_0x57f29b(0x7e4)] = () => _0x5c3544(_0x287df0['error']); } else { _0x30824a = _0xbd040d; let _0x25a2a5 = null; if (_0x1df004?.[_0x57f29b(0xa1e)] === _0x57f29b(0x99c)) _0x25a2a5 = _0x155ec8(_0x40dda4[_0x57f29b(0x69c)][0x0]); else _0x45636e?.['type'] === 'group' && _0x84871b && (_0x25a2a5 = _0x8630a0(_0x35db43)); _0x25a2a5?.[_0x57f29b(0x5b2)] && (_0x59191e = _0x25a2a5[_0x57f29b(0x5b2)]); } }); for (const _0x48e19a of _0xd10724) { if (_0x48e19a[_0x461187(0x44f)] instanceof Blob) { if (_0x461187(0x1c1) !== _0x461187(0x1c1)) _0x104e40[_0x461187(0x7df)][_0x461187(0x741)] = _0x461187(0x527), _0x216d92[_0x461187(0x7df)][_0x461187(0x9d5)] = '2px\x20dashed\x20var(--border-color)'; else try { 'epIbq' !== _0x461187(0x5fa) ? _0x355ea0[_0x461187(0x68e)][_0x48e19a['id']] = await _0x2a338e(_0x48e19a['blob']) : (_0x4b2b84(), _0x37a7bd()); } catch (_0x4e2b94) { _0x2b1461[_0x461187(0x1c5)](_0x48e19a['id']); } } } const _0x131676 = _0x463ac6[_0x461187(0x766)](_0x2a4feb, _0x461187(0x8cc)), _0x1d1b49 = _0x131676[_0x461187(0x6fe)](_0x2a4feb), _0x257e47 = await new Promise((_0x5ec028, _0x4747e7) => { const _0x29ff58 = _0x461187, _0x38fb50 = _0x1d1b49[_0x29ff58(0x676)](); _0x38fb50['onsuccess'] = () => _0x5ec028(_0x38fb50['result']), _0x38fb50['onerror'] = () => _0x4747e7(_0x38fb50[_0x29ff58(0x390)]); }); for (const _0x539d1e of _0x257e47) { const _0x1bd8fd = { ..._0x539d1e }; _0x539d1e[_0x461187(0x27f)] instanceof Blob && (_0x1bd8fd[_0x461187(0x27f)] = await _0x2a338e(_0x539d1e[_0x461187(0x27f)])), _0x539d1e[_0x461187(0xa4e)] instanceof Blob && (_0x461187(0x7c8) !== 'lkhTD' ? _0x1bd8fd[_0x461187(0xa4e)] = await _0x2a338e(_0x539d1e[_0x461187(0xa4e)]) : _0x116fd7(_0x403d6b)), _0x355ea0[_0x461187(0x9ba)][_0x461187(0x1c5)](_0x1bd8fd); } const _0xdcfe9 = new Blob([JSON['stringify'](_0x355ea0, null, 0x2)], { 'type': 'application/json' }), _0x517d15 = URL[_0x461187(0x709)](_0xdcfe9), _0x16feb5 = document['createElement']('a'), _0x16c5b0 = new Date(), _0x33547a = _0x16c5b0[_0x461187(0x96c)]() + '-' + String(_0x16c5b0[_0x461187(0x4b8)]() + 0x1)[_0x461187(0xa2e)](0x2, '0') + '-' + String(_0x16c5b0[_0x461187(0x4f3)]())[_0x461187(0xa2e)](0x2, '0'); _0x16feb5[_0x461187(0xa77)] = _0x517d15, _0x16feb5['download'] = 'Noir_Backup_' + _0x33547a + _0x461187(0x35c), document[_0x461187(0x570)]['appendChild'](_0x16feb5), _0x16feb5[_0x461187(0x821)](), document[_0x461187(0x570)][_0x461187(0x5ee)](_0x16feb5), URL[_0x461187(0xa8f)](_0x517d15), _0x58ea7f(![]), _0x2b1461['length'] > 0x0 ? _0x461187(0x458) === _0x461187(0x458) ? _0x33f536(_0x461187(0x5cd) + _0x2b1461['join']('\x0a')) : (_0x109531 += _0x461187(0x946), _0x5a3b82[_0x461187(0x4cf)][_0x461187(0x5e2)](_0x520c86 => { const _0x557344 = _0x461187, _0x4de9c0 = _0x520c86[_0x557344(0x410)] === _0x557344(0x9bc) ? '你' : _0x5a474d['contact_name']; _0x20cabc += '\x20\x20\x20\x20-\x20' + _0x4de9c0 + ':\x20' + _0x520c86[_0x557344(0x6fd)] + '\x0a'; })) : _0x33f536(_0x461187(0x443)); } catch (_0xb40132) { _0x461187(0x273) !== _0x461187(0x273) ? _0x33769d(_0x308f0c['activeFriendCircleId']) : (_0x58ea7f(![]), console[_0x461187(0x390)]('全量导出失败:', _0xb40132), _0x33f536(_0x461187(0xa34) + _0xb40132[_0x461187(0x332)])); } }), _0x811107['addEventListener'](_0x3b2836(0x821), () => { _0x92c5b7['click'](); }), _0x2bbb26[_0x3b2836(0x990)](_0x3b2836(0x821), _0x5e220c), _0x92c5b7[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x1fe39c => { const _0x485211 = _0x3b2836, _0x5a4d8e = _0x1fe39c[_0x485211(0x842)][_0x485211(0x7e7)][0x0]; if (!_0x5a4d8e) return; _0x156ce5(_0x485211(0x354))[_0x485211(0x69b)](_0x69a87c => { const _0x30bd68 = _0x485211; if (!_0x69a87c) { _0x92c5b7[_0x30bd68(0x552)] = ''; return; } _0x58ea7f(!![], _0x30bd68(0x739)); const _0x2cdc23 = new FileReader(); _0x2cdc23[_0x30bd68(0x532)] = async _0x3467e3 => { const _0x45c258 = _0x30bd68; if ('mKFid' !== 'mKFid') return _0x45c258(0x108) + _0x552374; else try { if ('aIkpE' !== _0x45c258(0x46d)) { const _0x11aff7 = JSON['parse'](_0x3467e3['target'][_0x45c258(0x20c)]); if (!_0x11aff7[_0x45c258(0x388)] || !_0x11aff7[_0x45c258(0x68e)]) throw new Error(_0x45c258(0x79c)); _0x58ea7f(!![], _0x45c258(0xa90)); const _0x1b7625 = await Promise['all'](Object[_0x45c258(0x756)](_0x11aff7[_0x45c258(0x68e)])[_0x45c258(0x937)](async _0x255996 => { const _0x249b30 = _0x45c258; if (_0x249b30(0x43c) !== _0x249b30(0x43c)) _0x419232[_0x249b30(0x390)](_0x249b30(0x554), _0x39b6b5); else { const _0x298610 = _0x11aff7['indexedDBData'][_0x255996]; if (typeof _0x298610 === _0x249b30(0x5b8) && _0x298610[_0x249b30(0x2bd)](_0x249b30(0x71c))) { if (_0x249b30(0x1e1) !== _0x249b30(0x69e)) { const _0x354261 = await _0x1707d7(_0x298610); return { 'id': _0x255996, 'blob': _0x354261 }; } else { const _0x47c2ec = _0xad2ec3[_0x249b30(0x709)](_0xd260f2); _0x3ec1b9[_0x249b30(0x7df)]['backgroundImage'] = 'url(\x27' + _0x47c2ec + '\x27)'; } } return null; } }))[_0x45c258(0x69b)](_0x3c0abe => _0x3c0abe[_0x45c258(0x1a0)](Boolean)), _0x391c2e = []; if (_0x11aff7[_0x45c258(0x9ba)]) { if (_0x45c258(0x1c2) !== _0x45c258(0x7cb)) { _0x58ea7f(!![], _0x45c258(0x369)); const _0xe20e4e = _0x11aff7['indexedDBMusicData'][_0x45c258(0x937)](async _0x414b27 => { const _0x4e1a06 = _0x45c258, _0x45e203 = { ..._0x414b27 }; if (_0x414b27[_0x4e1a06(0x27f)]) _0x45e203[_0x4e1a06(0x27f)] = await _0x1707d7(_0x414b27['audio']); if (_0x414b27[_0x4e1a06(0xa4e)]) _0x45e203['cover'] = await _0x1707d7(_0x414b27[_0x4e1a06(0xa4e)]); return _0x45e203; }); _0x391c2e['push'](...await Promise[_0x45c258(0x77b)](_0xe20e4e)); } else { let _0x5c967a = _0x3eeabc[_0x45c258(0x433)](_0x45c258(0x752)); !_0x5c967a && (_0x5c967a = _0x37984e[_0x45c258(0x494)](_0x45c258(0x962)), _0x5c967a[_0x45c258(0x226)] = _0x45c258(0x558), _0x5c967a[_0x45c258(0x52e)] = _0x45c258(0x8a8), _0x5c967a['style'][_0x45c258(0x95f)] = _0x45c258(0x86d), _0x5c967a[_0x45c258(0x7df)][_0x45c258(0xaf3)] = _0x45c258(0x8d8), _0x5c967a[_0x45c258(0x7df)][_0x45c258(0x8d9)] = _0x45c258(0xa51), _0x3e64e7['appendChild'](_0x5c967a)); } } _0x58ea7f(!![], _0x45c258(0x301)), localStorage[_0x45c258(0x69d)](); for (const _0x24796c in _0x11aff7[_0x45c258(0x388)]) { localStorage[_0x45c258(0xa56)](_0x24796c, _0x11aff7['localStorageData'][_0x24796c]); } _0x58ea7f(!![], _0x45c258(0x432)); const _0x5708e0 = await _0x253fd2, _0x4b177f = _0x5708e0[_0x45c258(0x766)]([_0x301b6a, _0x2a4feb, _0x414485], 'readwrite'), _0x5f5ca7 = _0x4b177f[_0x45c258(0x6fe)](_0x301b6a), _0x4be17b = _0x4b177f['objectStore'](_0x2a4feb), _0x270ed6 = _0x4b177f['objectStore'](_0x414485); _0x5f5ca7[_0x45c258(0x69d)](), _0x4be17b[_0x45c258(0x69d)](), _0x270ed6[_0x45c258(0x69d)](), _0x1b7625[_0x45c258(0x5e2)](_0x67c8ec => _0x5f5ca7[_0x45c258(0xaa9)](_0x67c8ec)), _0x391c2e['forEach'](_0x26bc59 => _0x4be17b[_0x45c258(0xaa9)](_0x26bc59)), await new Promise((_0x28fdbc, _0x324ea2) => { const _0x32c39e = _0x45c258; _0x4b177f[_0x32c39e(0x9ca)] = _0x28fdbc, _0x4b177f[_0x32c39e(0x7e4)] = _0x4f6e75 => _0x324ea2(_0x4f6e75['target'][_0x32c39e(0x390)]); }), _0x58ea7f(![]), _0x33f536(_0x45c258(0x66b)), setTimeout(() => location[_0x45c258(0x668)](), 0x640); } else { const _0x3c709d = _0x5db084[_0x45c258(0x52b)]('--'); _0x3c709d[_0x45c258(0xb1e)] === 0x2 && _0x3c709d[0x0][_0x45c258(0x3dd)]() && _0x3c709d[0x1]['trim']()[_0x45c258(0x2bd)](_0x45c258(0x444)) ? _0x206299[_0x45c258(0x1c5)]({ 'name': _0x3c709d[0x0]['trim'](), 'url': _0x3c709d[0x1][_0x45c258(0x3dd)]() }) : _0x1d216b++; } } catch (_0x2ecb0a) { _0x58ea7f(![]), console[_0x45c258(0x390)](_0x45c258(0x982), _0x2ecb0a), _0x33f536(_0x45c258(0x968) + _0x2ecb0a[_0x45c258(0x332)]); } finally { _0x92c5b7[_0x45c258(0x552)] = ''; } }, _0x2cdc23[_0x30bd68(0x362)](_0x5a4d8e); }); }); function _0x27feb1() { const _0x29f45c = _0x3b2836; _0x1c470a[_0x29f45c(0x552)] = _0x57ec14['apiSettings']['endpoint'] || '', _0x195d9c[_0x29f45c(0x552)] = _0x57ec14[_0x29f45c(0x3a2)][_0x29f45c(0x99d)] || '', _0x55b691[_0x29f45c(0x552)] = _0x57ec14[_0x29f45c(0x3a2)][_0x29f45c(0xa6f)] || '', _0x486033['value'] = String(_0x57ec14[_0x29f45c(0x8a1)]?.[_0x29f45c(0xa33)] ?? 0x64), document['getElementById'](_0x29f45c(0x445))[_0x29f45c(0x552)] = _0x57ec14[_0x29f45c(0x3a2)][_0x29f45c(0x1ed)] || _0x29f45c(0x427); } function _0x331034() { const _0x2bc1a8 = _0x3b2836; _0x57ec14['apiSettings'][_0x2bc1a8(0x90c)] = _0x1c470a[_0x2bc1a8(0x552)]['trim'](), _0x57ec14['apiSettings'][_0x2bc1a8(0x99d)] = _0x195d9c[_0x2bc1a8(0x552)][_0x2bc1a8(0x3dd)](), _0x57ec14['apiSettings'][_0x2bc1a8(0xa6f)] = _0x55b691[_0x2bc1a8(0x552)][_0x2bc1a8(0x3dd)](), _0x57ec14[_0x2bc1a8(0x3a2)][_0x2bc1a8(0x1ed)] = document[_0x2bc1a8(0x67e)](_0x2bc1a8(0x445))[_0x2bc1a8(0x552)]; const _0x328ea3 = parseInt(_0x486033[_0x2bc1a8(0x552)], 0xa); _0x57ec14[_0x2bc1a8(0x8a1)][_0x2bc1a8(0xa33)] = Number[_0x2bc1a8(0x9ae)](_0x328ea3) && _0x328ea3 > 0x0 ? _0x328ea3 : 0x64, _0x203e68(), _0x33f536(_0x2bc1a8(0x439)); } function _0x5c717a() { const _0x5d0a8c = _0x3b2836; _0xb3b166[_0x5d0a8c(0x552)] = _0x57ec14[_0x5d0a8c(0xaf7)][_0x5d0a8c(0x589)] || '', _0x50218a[_0x5d0a8c(0x45f)] = _0x57ec14[_0x5d0a8c(0xaf7)]['avatar'] || _0x1f7795, _0x9f5929[_0x5d0a8c(0x552)] = _0x57ec14[_0x5d0a8c(0xaf7)][_0x5d0a8c(0x7dc)] || ''; } async function _0x446868(_0x9614a6 = null) { const _0xe4551b = _0x3b2836; _0x52c85d(_0xe4551b(0x51a), _0x10f7aa); const _0x36e585 = document[_0xe4551b(0x67e)]('char-avatar-frame-url'), _0x30fdbd = document[_0xe4551b(0x67e)](_0xe4551b(0x904)), _0x1a9caa = document[_0xe4551b(0x433)](_0xe4551b(0x6ee)); if (_0x9614a6) { const _0x499e8e = _0x57ec14[_0xe4551b(0x862)][_0xe4551b(0x270)](_0x2e263f => _0x2e263f['id'] === _0x9614a6); _0x36e585[_0xe4551b(0x552)] = _0x499e8e[_0xe4551b(0x7a6)] || '', _0x30fdbd['value'] = _0x499e8e['userAvatarFrameUrl'] || ''; if (_0x1a9caa) _0x1a9caa[_0xe4551b(0x7df)]['backgroundImage'] = _0x499e8e[_0xe4551b(0x7a6)] ? _0xe4551b(0xa5e) + _0x499e8e[_0xe4551b(0x7a6)] + '\x27)' : ''; } else { if ('KQnyD' === 'nbmud') { if (!_0x34d0d8[_0xe4551b(0x241)](_0x14b974)) return _0xe4551b(0x8e2); if (_0x1271b2[_0xe4551b(0xb1e)] === 0x0) return _0xe4551b(0xa6e); return _0x214f00[_0xe4551b(0x42a)]((_0x7f0c94, _0x1b3303) => new _0x46d0db(_0x1b3303[_0xe4551b(0x665)]) - new _0x153796(_0x7f0c94[_0xe4551b(0x665)])), _0x326f5f[_0xe4551b(0x937)](_0x450e8f => _0xe4551b(0x72b) + (_0x450e8f['store_name'] || _0xe4551b(0x6df)) + _0xe4551b(0x165) + (_0x450e8f['timestamp'] || '') + _0xe4551b(0x33b) + (_0x450e8f['item_name'] || _0xe4551b(0xa59)) + _0xe4551b(0x7a8) + (_0x450e8f[_0xe4551b(0xaeb)] || 0x0)['toFixed'](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')[_0xe4551b(0x9f9)](''); } else { _0x36e585[_0xe4551b(0x552)] = '', _0x30fdbd[_0xe4551b(0x552)] = ''; if (_0x1a9caa) _0x1a9caa[_0xe4551b(0x7df)][_0xe4551b(0x6dd)] = ''; } } _0x36e585[_0xe4551b(0x990)]('input', () => { const _0x3f20c4 = _0xe4551b; if ('ucegt' === _0x3f20c4(0x265)) { if (_0x1a9caa) _0x1a9caa[_0x3f20c4(0x7df)]['backgroundImage'] = _0x36e585[_0x3f20c4(0x552)] ? 'url(\x27' + _0x36e585[_0x3f20c4(0x552)] + '\x27)' : ''; } else _0x5596cb[_0x3f20c4(0x422)] = _0x79bbc9[_0x3f20c4(0x391)][0x0]['id']; }); const _0x2efdc1 = document[_0xe4551b(0x67e)](_0xe4551b(0x68b)); _0x2efdc1[_0xe4551b(0x282)] = '', _0x57ec14['worldBooks'][_0xe4551b(0x5e2)](_0x40120b => { const _0x25d4f3 = _0xe4551b; if ('kzbVi' === _0x25d4f3(0x820)) { const _0x1e9ecf = document[_0x25d4f3(0x494)](_0x25d4f3(0x358)); _0x1e9ecf[_0x25d4f3(0x282)] = _0x25d4f3(0x1e4) + _0x40120b['id'] + _0x25d4f3(0x823) + _0x40120b[_0x25d4f3(0x589)], _0x2efdc1[_0x25d4f3(0x6b3)](_0x1e9ecf); } else _0x507fc1 = _0x531c7d['parse'](_0x70b7bd); }), _0x542129(_0xe4551b(0x501)), _0x497de9[_0xe4551b(0x45f)] = _0x520817, _0x3264c4[_0xe4551b(0x552)] = '', _0x37a34d[_0xe4551b(0x7df)][_0xe4551b(0x6dd)] = '', _0x3b3263[_0xe4551b(0x552)] = '', _0x1f60c4[_0xe4551b(0x7df)]['backgroundImage'] = '', _0x11e142['value'] = ''; const _0x1b3f1c = ['normal', _0xe4551b(0x6aa), _0xe4551b(0x90a), _0xe4551b(0x85c), _0xe4551b(0x650)]; _0x1b3f1c[_0xe4551b(0x5e2)](_0x317063 => { const _0x231282 = _0xe4551b; _0x231282(0x2f2) === _0x231282(0x2f2) ? (document[_0x231282(0x67e)]('char-edit-sprite-' + _0x317063 + '-preview')['style'][_0x231282(0x6dd)] = '', document['getElementById'](_0x231282(0x48d) + _0x317063 + _0x231282(0x53c))[_0x231282(0x552)] = '') : _0x5e8d7b[_0x231282(0x552)] = _0x2ad99d[_0x231282(0x937)](_0x15b835 => _0x15b835[_0x231282(0x589)] + '--' + _0x15b835[_0x231282(0x609)])[_0x231282(0x9f9)]('\x0a'); }); if (_0x9614a6) { const _0x52d401 = _0x57ec14[_0xe4551b(0x862)]['find'](_0x3f6a11 => _0x3f6a11['id'] === _0x9614a6); if (!_0x52d401) return; _0x2d2312['value'] = _0x52d401['id'], _0x141d77[_0xe4551b(0x52e)] = _0xe4551b(0x1a5), _0x307fc8[_0xe4551b(0x552)] = _0x52d401[_0xe4551b(0x589)], _0x60e9a2[_0xe4551b(0x552)] = _0x52d401[_0xe4551b(0x94d)], _0x578f85['value'] = _0x52d401[_0xe4551b(0x7dc)], document[_0xe4551b(0x67e)]('char-edit-css')[_0xe4551b(0x552)] = _0x52d401[_0xe4551b(0x4e6)] || ''; const _0x459407 = _0x57ec14[_0xe4551b(0x313)][_0xe4551b(0x270)](_0x3d0aeb => _0x3d0aeb['type'] === 'private' && _0x3d0aeb[_0xe4551b(0x69c)][_0xe4551b(0x9e5)](_0x9614a6)); document[_0xe4551b(0x67e)](_0xe4551b(0x501))[_0xe4551b(0x552)] = _0x459407?.['boundUserProfileId'] || _0x57ec14[_0xe4551b(0x422)]; try { if (_0xe4551b(0x210) !== _0xe4551b(0xaac)) { const _0x1e9e84 = await _0x2995f2(_0xe4551b(0x890) + _0x52d401['id']), _0x30de73 = await _0x2995f2(_0xe4551b(0xa4c) + _0x52d401['id']), _0x23f033 = await _0x2995f2(_0xe4551b(0x4c7) + _0x52d401['id']); _0x497de9['src'] = _0x1e9e84 ? URL[_0xe4551b(0x709)](_0x1e9e84) : _0x52d401[_0xe4551b(0x5b2)] || _0x520817; if (_0x30de73) _0x37a34d[_0xe4551b(0x7df)]['backgroundImage'] = _0xe4551b(0xa5e) + URL[_0xe4551b(0x709)](_0x30de73) + '\x27)'; if (_0x23f033) _0x1f60c4['style'][_0xe4551b(0x6dd)] = _0xe4551b(0xa5e) + URL['createObjectURL'](_0x23f033) + '\x27)'; for (const _0x2b9d30 of _0x1b3f1c) { const _0x242044 = await _0x2995f2('char_sprite_' + _0x2b9d30 + '_' + _0x52d401['id']); _0x242044 && (document['getElementById'](_0xe4551b(0x48d) + _0x2b9d30 + '-preview')[_0xe4551b(0x7df)][_0xe4551b(0x6dd)] = 'url(\x27' + URL[_0xe4551b(0x709)](_0x242044) + '\x27)'); } } else { const _0x47f087 = _0xcd9449[_0xe4551b(0x494)](_0xe4551b(0x962)); _0x47f087[_0xe4551b(0x226)] = _0xe4551b(0x3c4), _0x47f087['innerHTML'] = _0x512dfd, _0x4d1c58 === _0xe4551b(0x2b3) ? (_0x54ead4[_0xe4551b(0x6b3)](_0x47f087), _0x591da5['appendChild'](_0x90eafa)) : (_0x1c431c[_0xe4551b(0x6b3)](_0x2f2abe), _0x295045['appendChild'](_0x47f087)); } } catch (_0x56bbd3) { console['error']('加载角色\x20' + _0x52d401['id'] + _0xe4551b(0x3d3), _0x56bbd3), _0x497de9['src'] = _0x52d401['avatar'] || _0x520817; } _0x52d401[_0xe4551b(0x48e)] && _0x2efdc1[_0xe4551b(0x74c)](_0xe4551b(0x230))[_0xe4551b(0x5e2)](_0x3743f4 => { const _0x1ea979 = _0xe4551b; if (_0x1ea979(0x5da) !== _0x1ea979(0x24b)) { if (_0x52d401[_0x1ea979(0x48e)][_0x1ea979(0x9e5)](_0x3743f4[_0x1ea979(0x552)])) _0x3743f4[_0x1ea979(0x262)] = !![]; } else { const _0x5669c9 = _0x537853[_0x1ea979(0x391)]['find'](_0x524cb2 => _0x524cb2['id'] === _0x569acc); if (!_0x5669c9) return; _0xae5e8e['getElementById']('editing-user-id')[_0x1ea979(0x552)] = _0x5669c9['id'], _0x1d28b8[_0x1ea979(0x67e)](_0x1ea979(0xab2))['textContent'] = _0x1ea979(0x385), _0x2ecccc[_0x1ea979(0x67e)]('user-name')[_0x1ea979(0x552)] = _0x5669c9[_0x1ea979(0x589)], _0x5669c9[_0x1ea979(0x5b2)] ? _0x46da7c[_0x1ea979(0x7df)][_0x1ea979(0x6dd)] = _0x1ea979(0xa5e) + _0x5669c9['avatar'] + '\x27)' : _0x16a474[_0x1ea979(0x7df)][_0x1ea979(0x6dd)] = _0x1ea979(0xa5e) + _0x1f3339 + '\x27)', _0x784050['getElementById'](_0x1ea979(0x900))['value'] = _0x5669c9['persona'], _0x71376c[_0x1ea979(0x7df)][_0x1ea979(0x741)] = _0x5669c9['id'] === _0x18bcfe[_0x1ea979(0x422)] ? 'none' : _0x1ea979(0x1f1), _0x430f73[_0x1ea979(0x67e)](_0x1ea979(0x3ff))[_0x1ea979(0x7df)][_0x1ea979(0x741)] = _0x1ea979(0x1f1); } }), _0x1164ee(); } else _0x2d2312[_0xe4551b(0x552)] = '', _0x141d77[_0xe4551b(0x52e)] = '创建新角色', _0x307fc8['value'] = '新角色\x20' + (_0x57ec14[_0xe4551b(0x862)][_0xe4551b(0xb1e)] + 0x1), _0x60e9a2['value'] = '', _0x578f85[_0xe4551b(0x552)] = _0xe4551b(0x221), document[_0xe4551b(0x67e)]('char-edit-css')['value'] = '', _0x1164ee(); const _0xea19cb = document['getElementById'](_0xe4551b(0x8f1)); let _0x38ab22 = document[_0xe4551b(0x67e)]('live-preview-style'); !_0x38ab22 && (_0x38ab22 = document[_0xe4551b(0x494)]('style'), _0x38ab22['id'] = _0xe4551b(0x4b4), document[_0xe4551b(0x6d4)][_0xe4551b(0x6b3)](_0x38ab22)); const _0x90bf4d = () => { const _0x1ced7d = _0xe4551b, _0x4efae0 = _0xea19cb[_0x1ced7d(0x552)]; let _0x12ad18 = _0x4efae0[_0x1ced7d(0x254)](/\.bubble\.sent/g, '#bubble-preview-user')[_0x1ced7d(0x254)](/\.bubble\.received/g, _0x1ced7d(0x2fb)); _0x38ab22['innerHTML'] = _0x12ad18; }; _0xea19cb[_0xe4551b(0x6a0)](_0xe4551b(0x32f), _0x90bf4d), _0xea19cb[_0xe4551b(0x990)](_0xe4551b(0x32f), _0x90bf4d), _0x90bf4d(); } async function _0xa91df3() { const _0xf1d490 = _0x3b2836, _0x3942a4 = _0x2d2312[_0xf1d490(0x552)]; if (!_0x3942a4) { _0x33f536('你还没保存这个角色呢，导什么导？'); return; } const _0x4c9ebf = _0x382342(_0x3942a4); if (!_0x4c9ebf) return; _0x58ea7f(!![], _0xf1d490(0xaf4) + _0x4c9ebf[_0xf1d490(0x589)] + _0xf1d490(0x4e8)); try { const _0x5802e4 = { 'type': _0xf1d490(0x50c), 'version': 0x1, 'name': _0x4c9ebf[_0xf1d490(0x589)], 'remark': _0x4c9ebf[_0xf1d490(0x94d)], 'persona': _0x4c9ebf[_0xf1d490(0x7dc)], 'bubbleCss': _0x4c9ebf[_0xf1d490(0x4e6)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x4c718f = await _0x2995f2(_0xf1d490(0x890) + _0x4c9ebf['id']); if (_0x4c718f) _0x5802e4[_0xf1d490(0x5b2)] = await _0x2a338e(_0x4c718f); const _0x442b7b = ['normal', 'happy', _0xf1d490(0x90a), 'sad', _0xf1d490(0x650)]; for (const _0x5aca1d of _0x442b7b) { const _0x471e8a = await _0x2995f2(_0xf1d490(0x8c1) + _0x5aca1d + '_' + _0x4c9ebf['id']); if (_0x471e8a) { if (_0xf1d490(0x343) === _0xf1d490(0x343)) _0x5802e4[_0xf1d490(0x2a5)][_0x5aca1d] = await _0x2a338e(_0x471e8a); else { if (_0x547b4c[_0xf1d490(0xb1e)] === 0x0) return; _0xaf5f05 = (_0x36df77 + 0x1) % _0x445f3e['length'], _0x25634a(_0x14a04d[_0x19eff8], _0x114f98); } } } _0x4c9ebf[_0xf1d490(0x48e)] && _0x4c9ebf[_0xf1d490(0x48e)][_0xf1d490(0xb1e)] > 0x0 && (_0xf1d490(0x6a7) !== _0xf1d490(0x6a7) ? _0xa780a0(_0x8cc339, _0x4fd772[_0xf1d490(0x842)][_0xf1d490(0x7e7)][0x0]) : _0x5802e4[_0xf1d490(0x9cd)] = _0x4c9ebf[_0xf1d490(0x48e)][_0xf1d490(0x937)](_0x283a68 => _0x57ec14['worldBooks'][_0xf1d490(0x270)](_0x72f685 => _0x72f685['id'] === _0x283a68))['filter'](Boolean)['map'](_0x1d4e65 => ({ 'name': _0x1d4e65[_0xf1d490(0x589)], 'content': _0x1d4e65['content'] }))); const _0xff3473 = new Blob([JSON[_0xf1d490(0x7d5)](_0x5802e4, null, 0x2)], { 'type': _0xf1d490(0x9ce) }), _0x5f0080 = URL[_0xf1d490(0x709)](_0xff3473), _0x28860b = document[_0xf1d490(0x494)]('a'); _0x28860b['href'] = _0x5f0080, _0x28860b[_0xf1d490(0x3b9)] = _0x4c9ebf[_0xf1d490(0x589)] + _0xf1d490(0x3a7), document[_0xf1d490(0x570)][_0xf1d490(0x6b3)](_0x28860b), _0x28860b['click'](), document['body'][_0xf1d490(0x5ee)](_0x28860b), URL[_0xf1d490(0xa8f)](_0x5f0080); } catch (_0x355247) { if ('uQKXi' !== 'YeFCh') console[_0xf1d490(0x390)](_0xf1d490(0x83f), _0x355247), _0x33f536(_0xf1d490(0xb0b) + _0x355247[_0xf1d490(0x332)]); else return _0x1fe356(_0xb69abb)[_0xf1d490(0x69b)](_0x20f9af => _0x20f9af[_0xf1d490(0x44f)]()); } finally { _0x58ea7f(![]); } } async function _0x27e758(_0x2930cb) { const _0x2ac4ad = _0x3b2836, _0x351910 = _0x2930cb['target']['files'][0x0]; if (!_0x351910) return; _0x58ea7f(!![], '正在解析角色卡...'); const _0x74bcb7 = new FileReader(); _0x74bcb7['onload'] = async _0x15f858 => { const _0x3b0887 = _0x3df6; try { const _0x4eb936 = JSON[_0x3b0887(0x258)](_0x15f858[_0x3b0887(0x842)]['result']); if (_0x4eb936[_0x3b0887(0xa1e)] !== 'NoirCharacterCard') { if ('DnTfE' === _0x3b0887(0x6b2)) _0x4a863f(), _0x6e3ccb[_0x3b0887(0x821)](); else throw new Error(_0x3b0887(0x8c2)); } const _0x4fd241 = []; if (_0x4eb936['worldBooks'] && _0x4eb936[_0x3b0887(0x9cd)][_0x3b0887(0xb1e)] > 0x0) for (const _0x2c02ff of _0x4eb936[_0x3b0887(0x9cd)]) { let _0x3ad2bd = _0x57ec14[_0x3b0887(0x9cd)][_0x3b0887(0x270)](_0xd834d8 => _0xd834d8[_0x3b0887(0x589)] === _0x2c02ff[_0x3b0887(0x589)]); if (_0x3ad2bd) _0x4fd241[_0x3b0887(0x1c5)](_0x3ad2bd['id']); else { if (_0x3b0887(0x58a) !== _0x3b0887(0x58a)) { _0x15bf05(_0x3b0887(0x197)); return; } else { const _0x817446 = { 'id': 'wb_' + Date[_0x3b0887(0x2c5)]() + '_' + Math[_0x3b0887(0x757)](), 'name': _0x2c02ff[_0x3b0887(0x589)], 'content': _0x2c02ff[_0x3b0887(0x6fd)] }; _0x57ec14[_0x3b0887(0x9cd)]['push'](_0x817446), _0x4fd241[_0x3b0887(0x1c5)](_0x817446['id']); } } } const _0x2a71d6 = _0x3b0887(0x954) + Date['now'](), _0x45d149 = { 'id': _0x2a71d6, 'name': _0x4eb936[_0x3b0887(0x589)], 'remark': _0x4eb936[_0x3b0887(0x94d)] || '', 'persona': _0x4eb936[_0x3b0887(0x7dc)], 'avatar': _0x4eb936[_0x3b0887(0x5b2)] || _0x520817, 'linkedWorldBookIds': _0x4fd241, 'bubbleCss': _0x4eb936['bubbleCss'] || '' }; if (_0x4eb936[_0x3b0887(0x5b2)]) { if (_0x3b0887(0x587) !== _0x3b0887(0x9f0)) { const _0x3e12f4 = await _0x1707d7(_0x4eb936['avatar']); await _0x59767c('char_avatar_' + _0x2a71d6, _0x3e12f4); } else _0x31c236[_0x3b0887(0x52e)] = _0x3b0887(0x507), _0x36941c['innerHTML'] = _0x3b0887(0x75a); } if (_0x4eb936['sprites']) for (const _0x5e9961 in _0x4eb936[_0x3b0887(0x2a5)]) { const _0x40b774 = _0x4eb936[_0x3b0887(0x2a5)][_0x5e9961], _0xd8ce3a = await _0x1707d7(_0x40b774); await _0x59767c(_0x3b0887(0x8c1) + _0x5e9961 + '_' + _0x2a71d6, _0xd8ce3a); } _0x57ec14[_0x3b0887(0x862)][_0x3b0887(0x1c5)](_0x45d149); const _0x57d628 = { 'id': 'chat_' + _0x2a71d6, 'type': _0x3b0887(0x99c), 'participantIds': [_0x2a71d6], 'boundUserProfileId': _0x57ec14['activeUserProfileId'] }; _0x57ec14['chats'][_0x3b0887(0x1c5)](_0x57d628), _0x203e68(), _0x1721c6(), _0x33f536('“' + _0x45d149[_0x3b0887(0x589)] + _0x3b0887(0x87a)); } catch (_0x3dd4c0) { _0x3b0887(0x4e5) === _0x3b0887(0x4e5) ? (console[_0x3b0887(0x390)](_0x3b0887(0x6c6), _0x3dd4c0), _0x33f536(_0x3b0887(0xa88) + _0x3dd4c0[_0x3b0887(0x332)])) : _0x402e2a[_0x3b0887(0x282)] = _0x3b0887(0x8d3) + _0x429f2c[_0x3b0887(0x42e)](_0x3b0887(0x7bf), { 'hour': _0x3b0887(0x6d3), 'minute': '2-digit', 'hour12': ![] }) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } finally { _0x3b0887(0x1ea) !== 'QAIUw' ? (_0x58ea7f(![]), _0x2930cb[_0x3b0887(0x842)][_0x3b0887(0x552)] = '') : _0x2d5ee6['removeItem'](_0x3b0887(0x59c) + _0x463687[_0x3b0887(0x413)]); } }, _0x74bcb7[_0x2ac4ad(0x362)](_0x351910); } async function _0xd961e1() { const _0x720f2f = _0x3b2836; if (_0x720f2f(0x9b3) === 'FFiyD') { const _0x3cdb89 = _0x58fe3c['sender'] === _0x720f2f(0x9bc) ? '你' : _0x324940['contact_name']; _0x2d5535 += _0x720f2f(0xa0b) + _0x3cdb89 + ':\x20' + _0x59659d['content'] + '\x0a'; } else { const _0x47040e = _0x2d2312['value'], _0x444a4a = document[_0x720f2f(0x67e)](_0x720f2f(0x501))[_0x720f2f(0x552)], _0x59dd26 = _0x3264c4[_0x720f2f(0x7e7)][0x0], _0x43d9b2 = _0x3b3263[_0x720f2f(0x7e7)][0x0], _0x3bf989 = _0x11e142['files'][0x0], _0x280b13 = document['querySelectorAll']('#world-book-checkboxes-container\x20input:checked'), _0x432852 = Array[_0x720f2f(0x4df)](_0x280b13)['map'](_0x441d30 => _0x441d30[_0x720f2f(0x552)]), _0x183c87 = { 'name': _0x307fc8[_0x720f2f(0x552)]['trim'](), 'remark': _0x60e9a2[_0x720f2f(0x552)][_0x720f2f(0x3dd)](), 'persona': _0x578f85[_0x720f2f(0x552)][_0x720f2f(0x3dd)](), 'linkedWorldBookIds': _0x432852, 'bubbleCss': document[_0x720f2f(0x67e)]('char-edit-css')[_0x720f2f(0x552)][_0x720f2f(0x3dd)](), 'avatarFrameUrl': document['getElementById']('char-avatar-frame-url')[_0x720f2f(0x552)][_0x720f2f(0x3dd)](), 'userAvatarFrameUrl': document[_0x720f2f(0x67e)](_0x720f2f(0x904))[_0x720f2f(0x552)]['trim']() }; if (!_0x183c87['name']) { if (_0x720f2f(0x6a8) !== _0x720f2f(0xab8)) { _0x33f536(_0x720f2f(0x135)); return; } else _0x1122f7[_0x720f2f(0x390)]('加载第二个卡片图片失败', _0x299ca8); } try { if ('loHNa' === 'fhgKm') _0x3e65dd(![]), _0x319027[_0x720f2f(0x390)](_0x720f2f(0x5d0), _0x5823d3), _0x517e81('导出过程中发生严重错误:\x20' + _0x37cdb2[_0x720f2f(0x332)]); else { const _0x4865de = [_0x720f2f(0x3d7), _0x720f2f(0x6aa), 'angry', _0x720f2f(0x85c), _0x720f2f(0x650)]; let _0x3ad112 = _0x47040e; if (_0x47040e) { const _0x312d8e = _0x57ec14[_0x720f2f(0x862)][_0x720f2f(0x270)](_0x242562 => _0x242562['id'] === _0x47040e); _0x312d8e && Object[_0x720f2f(0xa36)](_0x312d8e, _0x183c87); } else { const _0xd97593 = _0x720f2f(0x954) + Date[_0x720f2f(0x2c5)](); _0x3ad112 = _0xd97593; const _0xc991cb = { 'id': _0xd97593, ..._0x183c87 }; _0xc991cb[_0x720f2f(0x5b2)] = _0x59dd26 ? await _0x19643a(_0x59dd26) : _0x520817, _0x57ec14[_0x720f2f(0x862)]['push'](_0xc991cb); const _0x2f093 = { 'id': _0x720f2f(0x53b) + _0xd97593, 'type': _0x720f2f(0x99c), 'participantIds': [_0xd97593], 'listenTogetherSession': null }; _0x57ec14[_0x720f2f(0x313)][_0x720f2f(0x1c5)](_0x2f093); } const _0x101b49 = _0x57ec14[_0x720f2f(0x313)][_0x720f2f(0x270)](_0x36b8fa => _0x36b8fa[_0x720f2f(0xa1e)] === _0x720f2f(0x99c) && _0x36b8fa[_0x720f2f(0x69c)][_0x720f2f(0x9e5)](_0x3ad112)); if (_0x101b49) { if ('nSuJx' !== _0x720f2f(0x889)) { const _0x2b8341 = _0x3c9348(_0x696972[_0x720f2f(0x5ac)]); _0x2b8341 && (_0x4461e6 = _0x2b8341[_0x720f2f(0x589)], _0xa12f1e = _0x2b8341[_0x720f2f(0x5b2)]); } else _0x101b49[_0x720f2f(0x347)] = _0x444a4a; } if (_0x59dd26) await _0x59767c('char_avatar_' + _0x3ad112, _0x59dd26); if (_0x43d9b2) await _0x59767c(_0x720f2f(0xa4c) + _0x3ad112, _0x43d9b2); if (_0x3bf989) await _0x59767c(_0x720f2f(0x4c7) + _0x3ad112, _0x3bf989); for (const _0x4e171c of _0x4865de) { const _0x37fbfb = document[_0x720f2f(0x67e)](_0x720f2f(0x48d) + _0x4e171c + _0x720f2f(0x53c))[_0x720f2f(0x7e7)][0x0]; if (_0x37fbfb) await _0x59767c(_0x720f2f(0x8c1) + _0x4e171c + '_' + _0x3ad112, _0x37fbfb); } _0x203e68(), _0x1721c6(), _0x33f536(_0x720f2f(0x139)), _0x52c85d(_0x720f2f(0xa06), 'characterEdit'); if (!_0x47040e) { if (_0x720f2f(0x425) !== _0x720f2f(0x66c)) { const _0x4f3bfc = _0x720f2f(0x53b) + _0x3ad112; _0x292b8d(_0x4f3bfc), _0x510e94(!![]); } else _0x992b14[_0x720f2f(0x67e)](_0x720f2f(0x48d) + _0x55efc9 + _0x720f2f(0x5e6))[_0x720f2f(0x7df)][_0x720f2f(0x6dd)] = _0x720f2f(0xa5e) + _0x41afe9[_0x720f2f(0x709)](_0x10cf7f) + '\x27)'; } } } catch (_0x3aebb2) { console[_0x720f2f(0x390)](_0x720f2f(0x547), _0x3aebb2), _0x33f536(_0x720f2f(0x233) + _0x3aebb2[_0x720f2f(0x332)]); } } } function _0x4fe325() { const _0x5333eb = _0x3b2836; if (_0x5333eb(0x3f9) === _0x5333eb(0x97c)) _0x3aed98[_0x5333eb(0x282)] = '<img\x20src=\x22' + _0x23e96c + '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>'; else { _0x48dfc5[_0x5333eb(0x552)] = '', _0x2fd472[_0x5333eb(0x282)] = ''; if (_0x57ec14[_0x5333eb(0x862)][_0x5333eb(0xb1e)] < 0x2) { _0x33f536(_0x5333eb(0x56c)); return; } _0x57ec14[_0x5333eb(0x862)][_0x5333eb(0x5e2)](_0x34de82 => { const _0x313e91 = _0x5333eb, _0xd35655 = document[_0x313e91(0x494)]('li'); _0xd35655[_0x313e91(0x226)] = _0x313e91(0x62a), _0xd35655[_0x313e91(0x282)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x34de82['id'] + '\x22\x20data-id=\x22' + _0x34de82['id'] + _0x313e91(0x39b) + (_0x34de82[_0x313e91(0x5b2)] || _0x520817) + _0x313e91(0x3bf) + _0x34de82['id'] + '\x22\x20class=\x22char-name\x22>' + _0x34de82['name'] + _0x313e91(0x13f), _0x2fd472[_0x313e91(0x6b3)](_0xd35655); }), _0x52c85d(_0x5333eb(0x34b), 'charSelect'); } } function _0x285266() { const _0x3a26a8 = _0x3b2836, _0x21c599 = _0x48dfc5['value'][_0x3a26a8(0x3dd)](); if (!_0x21c599) { _0x33f536('请输入群聊名称。'); return; } const _0x2eb856 = Array[_0x3a26a8(0x4df)](_0x2fd472[_0x3a26a8(0x74c)](_0x3a26a8(0x42b)))['map'](_0x2eb10f => _0x2eb10f['dataset']['id']); if (_0x2eb856[_0x3a26a8(0xb1e)] < 0x2) { if (_0x3a26a8(0x6c4) !== _0x3a26a8(0x7a3)) { _0x33f536(_0x3a26a8(0x111)); return; } else { const _0x5cebc1 = _0x25cb64[_0x3a26a8(0x842)][_0x3a26a8(0x7e7)][0x0]; if (!_0x5cebc1) return; const _0x4abc25 = _0x4db733[_0x3a26a8(0x709)](_0x5cebc1); _0x3f841c[_0x3a26a8(0x67e)](_0x3a26a8(0x452))[_0x3a26a8(0x7df)]['backgroundImage'] = _0x3a26a8(0xa5e) + _0x4abc25 + '\x27)'; } } const _0x22ebda = { 'id': _0x3a26a8(0x250) + Date[_0x3a26a8(0x2c5)](), 'type': _0x3a26a8(0x7d1), 'name': _0x21c599, 'participantIds': _0x2eb856 }; _0x57ec14[_0x3a26a8(0x313)][_0x3a26a8(0x1c5)](_0x22ebda), _0x57ec14[_0x3a26a8(0x413)] = _0x22ebda['id'], _0x203e68(), _0x1721c6(), _0x2db3fa(), _0x2ee71f(), _0x33f536('群聊“' + _0x21c599 + _0x3a26a8(0x1d2)), _0x52c85d('chat', 'groupChatCreate'); } _0x222c67[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x59eab3['click']()), _0x2a30f8[_0x3b2836(0x990)](_0x3b2836(0x821), _0x2b139c), _0x59eab3[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x2f5270), _0x446eff[_0x3b2836(0x990)](_0x3b2836(0x821), _0x4d2013), _0x271dda['addEventListener']('click', () => _0x52e8e9['classList']['remove']('show')), _0x24cc87[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52e8e9[_0x3b2836(0x32b)][_0x3b2836(0x318)]('show')), _0x4b792b['addEventListener'](_0x3b2836(0x821), () => { const _0x8fbf07 = _0x3b2836; _0x290c3b[_0x8fbf07(0x2bb)](), navigator[_0x8fbf07(0x194)][_0x8fbf07(0x28c)](_0x290c3b[_0x8fbf07(0x552)])[_0x8fbf07(0x69b)](() => { _0x33f536('已复制到剪贴板！'); })[_0x8fbf07(0x25b)](_0x5573fe => { const _0x302c42 = _0x8fbf07; 'covVS' !== _0x302c42(0xa68) ? _0x36b6cc[_0x302c42(0x1c5)](_0xc82f72) : _0x33f536(_0x302c42(0x33a)); }); }), _0x5a1102[_0x3b2836(0x990)](_0x3b2836(0x821), _0x139a53), _0x564eaf['addEventListener']('click', _0x58f875), _0x399a18[_0x3b2836(0x990)]('click', () => _0x5c72ed[_0x3b2836(0x32b)][_0x3b2836(0x318)]('show')), _0x315420[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x5c72ed[_0x3b2836(0x32b)]['remove'](_0x3b2836(0x716))), _0x37a34d[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x3b3263[_0x3b2836(0x821)]()), _0x1f60c4['addEventListener'](_0x3b2836(0x821), () => _0x11e142[_0x3b2836(0x821)]()), _0x3b3263[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x1f0069 => { const _0x2c75cd = _0x3b2836, _0x1b23a8 = _0x1f0069[_0x2c75cd(0x842)][_0x2c75cd(0x7e7)][0x0]; if (!_0x1b23a8) return; const _0x28d3aa = URL['createObjectURL'](_0x1b23a8); _0x37a34d[_0x2c75cd(0x7df)][_0x2c75cd(0x6dd)] = _0x2c75cd(0xa5e) + _0x28d3aa + '\x27)'; }), _0x11e142['addEventListener'](_0x3b2836(0x4a3), _0xa88ad4 => { const _0x1e0264 = _0x3b2836; if (_0x1e0264(0x4d2) === _0x1e0264(0x4d2)) { const _0x2ecf2a = _0xa88ad4['target']['files'][0x0]; if (!_0x2ecf2a) return; const _0x403e22 = URL[_0x1e0264(0x709)](_0x2ecf2a); _0x1f60c4[_0x1e0264(0x7df)]['backgroundImage'] = _0x1e0264(0xa5e) + _0x403e22 + '\x27)'; } else { if (!_0x545fc2 || !_0x4d7f22[_0x1e0264(0x9e5)](',')) return _0x1c0730; const _0x4ee485 = _0x55009c['split'](',')[_0x1e0264(0x937)](_0x3889e8 => _0x3889e8['trim']()); return _0x4ee485[_0x5923a6[_0x1e0264(0x5a8)](_0x1b8bd3[_0x1e0264(0x757)]() * _0x4ee485['length'])]; } }), _0x147efc[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x58d8a2[_0x3b2836(0x821)]()), _0x19ea9e[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5efe1f = _0x3b2836; if (_0x5efe1f(0x909) !== 'mAAXb') { if (_0x3be35d[_0x5efe1f(0xa1e)] === _0x5efe1f(0x7d1)) return _0x5efe1f(0x2ca) + (_0x444a87[_0x5efe1f(0x589)] || '未命名') + '」'; const _0x14e55d = _0x373787(_0x72ab76[_0x5efe1f(0x69c)][0x0]); return '与\x20' + (_0x14e55d?.['name'] || _0x5efe1f(0x65e)) + _0x5efe1f(0x857); } else localStorage[_0x5efe1f(0x523)](_0x5efe1f(0x18a)), _0xeb8a09(), _0x33f536(_0x5efe1f(0x51d)); }), _0x58d8a2[_0x3b2836(0x990)]('change', async _0x555ff8 => { const _0x28a484 = _0x3b2836, _0x17e5f1 = _0x555ff8[_0x28a484(0x842)][_0x28a484(0x7e7)][0x0]; if (!_0x17e5f1) return; try { if ('ldNJe' !== _0x28a484(0x9b4)) _0x36b244 *= _0x6954ed / _0x1196a6, _0x18afe3 = _0x59f2db; else { const _0x2a7851 = await _0x19643a(_0x17e5f1); localStorage['setItem'](_0x28a484(0x18a), _0x2a7851), _0xeb8a09(), _0x33f536('动态页背景已更换！'); } } catch (_0x258399) { if (_0x28a484(0x255) === _0x28a484(0x84c)) { if (_0x961dcd === null) return; const _0x4006e5 = _0x2e687c[_0x28a484(0xa8a)][_0x31abe8]; if (!_0x4006e5) return; _0x207f53[_0x28a484(0x552)] = _0x4006e5[_0x28a484(0x6fd)], _0x5a322a(), _0xcc46ae[_0x28a484(0x32b)]['add'](_0x28a484(0x716)), _0x197bd4[_0x28a484(0x855)](); } else _0x33f536('错误:\x20' + _0x258399[_0x28a484(0x332)]); } }), document[_0x3b2836(0x67e)](_0x3b2836(0x269))[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0xa06), _0x3b2836(0x76b))), document[_0x3b2836(0x67e)](_0x3b2836(0x42f))[_0x3b2836(0x990)]('click', _0x441584); const _0x15e69c = document[_0x3b2836(0x67e)](_0x3b2836(0x6e1)), _0x5f1bda = document[_0x3b2836(0x67e)]('group-avatar-input'); _0x15e69c['addEventListener'](_0x3b2836(0x821), () => _0x5f1bda[_0x3b2836(0x821)]()), _0x5f1bda[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x2c2ee5 => { const _0x2c7de1 = _0x3b2836, _0xeee294 = _0x2c2ee5['target'][_0x2c7de1(0x7e7)][0x0]; if (!_0xeee294) return; const _0x15c3fa = URL[_0x2c7de1(0x709)](_0xeee294); _0x15e69c[_0x2c7de1(0x45f)] = _0x15c3fa, _0x15e69c[_0x2c7de1(0x532)] = () => { const _0x571e29 = _0x2c7de1; URL[_0x571e29(0xa8f)](_0x15c3fa); }; }); const _0x3029b6 = document[_0x3b2836(0x67e)](_0x3b2836(0x452))[_0x3b2836(0xaae)], _0x1b79ad = document[_0x3b2836(0x67e)](_0x3b2836(0x6cd)), _0x3542be = document[_0x3b2836(0x67e)](_0x3b2836(0x452)); _0x3029b6[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x1b79ad[_0x3b2836(0x821)]()), _0x1b79ad['addEventListener'](_0x3b2836(0x4a3), _0x438127 => { const _0x4a0532 = _0x3b2836, _0x2a4bfa = _0x438127['target']['files'][0x0]; if (!_0x2a4bfa) return; const _0x44db06 = URL['createObjectURL'](_0x2a4bfa); document[_0x4a0532(0x67e)](_0x4a0532(0x452))[_0x4a0532(0x7df)][_0x4a0532(0x6dd)] = 'url(\x27' + _0x44db06 + '\x27)'; }); const _0x11ecac = document[_0x3b2836(0x433)](_0x3b2836(0x50f)), _0x522897 = document[_0x3b2836(0x67e)](_0x3b2836(0xb05)); _0x11ecac[_0x3b2836(0x990)](_0x3b2836(0x821), _0x432714 => { const _0xd4f645 = _0x3b2836; _0x432714['stopPropagation'](), _0x522897['classList'][_0xd4f645(0xa2f)]('visible'), _0x11ecac['classList'][_0xd4f645(0xa2f)](_0xd4f645(0x375)); }), _0x522897[_0x3b2836(0x990)]('change', _0x19c9a1), document['getElementById'](_0x3b2836(0xa18))[_0x3b2836(0x990)](_0x3b2836(0x821), _0x55859b), document[_0x3b2836(0x67e)](_0x3b2836(0x7d0))['addEventListener'](_0x3b2836(0x821), async () => { const _0x230fa1 = _0x3b2836, _0x1f63ba = _0x3a6dc0(); if (!_0x1f63ba || _0x1f63ba[_0x230fa1(0xa1e)] !== _0x230fa1(0x7d1)) return; const _0x51676e = await _0x156ce5(_0x230fa1(0x6bf) + _0x1f63ba[_0x230fa1(0x589)] + _0x230fa1(0x912)); _0x51676e && (_0x779a16(_0x1f63ba['id']), _0x33f536(_0x230fa1(0x9a5)), _0x52c85d(_0x230fa1(0xa06)), _0x510e94(![])); }); const _0x492f68 = document[_0x3b2836(0x433)]('.custom-multiselect\x20.select-box'), _0xdf697b = document[_0x3b2836(0x67e)]('world-book-checkboxes-container'); _0x492f68[_0x3b2836(0x990)](_0x3b2836(0x821), _0x5542c8 => { const _0x2b4db8 = _0x3b2836; _0x5542c8[_0x2b4db8(0x5f5)](), _0xdf697b[_0x2b4db8(0x32b)][_0x2b4db8(0xa2f)](_0x2b4db8(0x86e)), _0x492f68[_0x2b4db8(0x32b)][_0x2b4db8(0xa2f)](_0x2b4db8(0x375)); }), _0xdf697b[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x1164ee), document[_0x3b2836(0x990)](_0x3b2836(0x821), _0x22b3d3 => { const _0x34df28 = _0x3b2836; !document[_0x34df28(0x433)](_0x34df28(0x154))[_0x34df28(0x776)](_0x22b3d3[_0x34df28(0x842)]) && (_0xdf697b[_0x34df28(0x32b)]['remove'](_0x34df28(0x86e)), _0x492f68[_0x34df28(0x32b)]['remove'](_0x34df28(0x375))); }), _0x5707dd['addEventListener'](_0x3b2836(0x821), () => { const _0x4a4084 = _0x3b2836; _0x114bb8(), _0x52c85d(_0x4a4084(0x128), 'home'); }), document[_0x3b2836(0x67e)](_0x3b2836(0x63f))[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x669), 'worldBook')), document['getElementById'](_0x3b2836(0x6b5))[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x20bb48()), document[_0x3b2836(0x67e)](_0x3b2836(0x4ab))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x2a8ab1 = _0x3b2836; _0x114bb8(), _0x52c85d(_0x2a8ab1(0x128), _0x2a8ab1(0x17e)); }), document[_0x3b2836(0x67e)](_0x3b2836(0x646))['addEventListener']('click', _0x46261f), document[_0x3b2836(0x67e)]('delete-world-book-button')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x7dde82), _0x184e8e[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x4b0), _0x3b2836(0x669))), _0x493664[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x669), _0x3b2836(0x4b0))), _0x136882[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x9a9c46['click']()), _0x9a9c46[_0x3b2836(0x990)](_0x3b2836(0x4a3), async _0xb20c67 => { const _0x590103 = _0x3b2836, _0x4019cb = _0xb20c67[_0x590103(0x842)]['files'][0x0]; if (!_0x4019cb) return; await _0x56950d(_0x4019cb); }), _0x3bb953[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x4508a1 = _0x3b2836; if (_0x4508a1(0xb14) !== _0x4508a1(0xb14)) { const _0x5a2637 = _0x57979c[_0x4508a1(0x842)][_0x4508a1(0x7e7)][0x0]; if (!_0x5a2637) return; const _0x449ae2 = _0x3c8d55[_0x4508a1(0x709)](_0x5a2637); _0x41b466[_0x4508a1(0x7df)]['backgroundImage'] = _0x4508a1(0xa5e) + _0x449ae2 + '\x27)'; } else _0x1721c6(), _0x52c85d(_0x4508a1(0xa06), _0x4508a1(0x669)); }), _0x29ee49['addEventListener'](_0x3b2836(0x821), () => { const _0x3a284f = _0x3b2836; _0x27feb1(); const _0x400fbf = (_0x57ec14[_0x3a284f(0x3a2)]['endpoint'] || '')[_0x3a284f(0x9e5)](_0x3404d3); _0xcb462a['disabled'] = _0x400fbf, _0x52c85d(_0x3a284f(0x5f8), 'home'); }), _0x22ee14[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x669), _0x3b2836(0x5f8))), _0x242018[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x426f24 = _0x3b2836; _0x4eacb2(), _0x52c85d(_0x426f24(0x669), _0x426f24(0xa06)); }), _0x3f03d0[_0x3b2836(0x990)](_0x3b2836(0x821), () => { _0x4eacb2(), _0x510e94(![]); }), _0x53da5e[_0x3b2836(0x990)]('click', () => { const _0x54be65 = _0x3b2836; _0x52c85d(_0x54be65(0xa06), _0x54be65(0x51a)); }), _0x4dcf32[_0x3b2836(0x990)]('click', () => { const _0x2b1ef7 = _0x3b2836; if (_0x2b1ef7(0x9e7) === _0x2b1ef7(0x3a6)) { const _0x2c547d = _0x598d1a[_0x2b1ef7(0x67e)]('event-content-input')[_0x2b1ef7(0x552)][_0x2b1ef7(0x3dd)](), _0x2de7aa = _0x5cad1b[_0x2b1ef7(0x433)]('input[name=\x22event-type\x22]:checked')['value']; if (!_0x2c547d) { _0x13be9c(_0x2b1ef7(0x2f1)); return; } const _0x3d5716 = _0x208df6[_0x2b1ef7(0x391)][_0x2b1ef7(0x270)](_0x57dc11 => _0x57dc11['id'] === _0x354df[_0x2b1ef7(0x422)]); if (!_0x3d5716) { _0x378856(_0x2b1ef7(0x82c)); return; } _0x35723a[_0x2b1ef7(0x1bf)][_0x2b1ef7(0x1c5)]({ 'id': 'event_' + _0x184df9['now'](), 'date': _0x55826a[_0x2b1ef7(0xa25)], 'type': _0x2de7aa, 'content': _0x2c547d, 'userId': _0x3d5716['id'] }), _0x224020(), _0x209d21(), _0x449ed8(), _0x5d0229(), _0x1ea154[_0x2b1ef7(0x67e)](_0x2b1ef7(0xaca))[_0x2b1ef7(0x32b)]['remove'](_0x2b1ef7(0x716)); } else _0x12d562[_0x2b1ef7(0x32b)]['add'](_0x2b1ef7(0x716)); }), _0x17a5a5['addEventListener'](_0x3b2836(0x821), () => _0x3834ff()), _0x2cb54f[_0x3b2836(0x990)](_0x3b2836(0x821), _0x7f5e33); function _0x934bca(_0x5d6137) { const _0x3f001b = _0x3b2836; if (!_0x5d6137 || _0x5d6137[_0x3f001b(0xa1e)] !== 'group') return; const _0x2a2ce6 = _0x3f001b(0x259); document[_0x3f001b(0x570)][_0x3f001b(0x882)](_0x3f001b(0x25c), _0x2a2ce6); const _0x503da5 = document[_0x3f001b(0x67e)](_0x3f001b(0x8fa)), _0x57147e = _0x503da5['querySelector'](_0x3f001b(0xae9)), _0x1c8c60 = document[_0x3f001b(0x67e)](_0x3f001b(0x3e4)), _0x1983f1 = document[_0x3f001b(0x67e)](_0x3f001b(0x7ff)), _0x5e40fd = document[_0x3f001b(0x67e)](_0x3f001b(0x8dc)), _0x5c3b35 = document[_0x3f001b(0x67e)](_0x3f001b(0x840)), _0xc0fcb = document[_0x3f001b(0x67e)]('group-options-cancel'), _0x3f7758 = () => _0x503da5[_0x3f001b(0x318)](); _0x1c8c60[_0x3f001b(0x990)]('click', async () => { const _0x52861e = _0x3f001b; _0x3f7758(); const _0x2955a0 = await _0x156ce5(_0x52861e(0xb11) + _0x5d6137['name'] + _0x52861e(0x5f9)); if (_0x2955a0) { _0x5d6137['id'] === _0x57ec14[_0x52861e(0x413)] && (_0x4eacb2(), _0x57ec14[_0x52861e(0xa8a)] = [], _0x1c7b21()); try { localStorage[_0x52861e(0x523)](_0x52861e(0x59c) + _0x5d6137['id']), _0x33f536(_0x52861e(0x5c4) + _0x5d6137[_0x52861e(0x589)] + _0x52861e(0x2c7)); } catch (_0x58c880) { if (_0x52861e(0x1ab) === _0x52861e(0x993)) { if (_0x964307[_0x52861e(0x589)] !== 'AbortError') { _0xf2da59[_0x52861e(0x390)]('生成失败:\x20', _0x455d9f); const _0x26ada5 = { 'role': _0x52861e(0x6f7), 'content': _0x52861e(0x4d7) + _0x5a7383[_0x52861e(0x332)], 'senderId': _0x579646['id'], 'isOffline': _0x1a3a38 }; _0xc524ab[_0x52861e(0xa8a)][_0x52861e(0x1c5)](_0x26ada5), _0x5b892c(); } return ![]; } else console[_0x52861e(0x390)](_0x52861e(0x6c7) + _0x5d6137['id'], _0x58c880), _0x33f536('清空聊天记录失败。'); } } }), _0x1983f1['addEventListener'](_0x3f001b(0x821), () => { const _0x2b1bc4 = _0x3f001b; _0x3f7758(), _0x33f536(_0x2b1bc4(0x36f)); }), _0x5e40fd[_0x3f001b(0x990)](_0x3f001b(0x821), async () => { const _0x3096da = _0x3f001b; _0x3f7758(); const _0x110a80 = prompt('请输入新的群名称：', _0x5d6137[_0x3096da(0x589)]); _0x110a80 && _0x110a80[_0x3096da(0x3dd)]() && _0x110a80 !== _0x5d6137[_0x3096da(0x589)] && (_0x5d6137[_0x3096da(0x589)] = _0x110a80[_0x3096da(0x3dd)](), _0x203e68(), _0x1721c6(), _0x2db3fa(), _0x33f536('群名称已更改为\x22' + _0x5d6137[_0x3096da(0x589)] + '\x22。')); }), _0x5c3b35[_0x3f001b(0x990)](_0x3f001b(0x821), async () => { const _0x2aeeba = _0x3f001b; _0x3f7758(); const _0x2179a8 = await _0x156ce5(_0x2aeeba(0x815) + _0x5d6137['name'] + _0x2aeeba(0xab0)); _0x2179a8 && (_0x2aeeba(0x866) !== _0x2aeeba(0x866) ? (_0x23332e(), _0x277616['displayedMessageCount'] = 0x64) : (_0x779a16(_0x5d6137['id']), _0x33f536(_0x2aeeba(0x5c4) + _0x5d6137[_0x2aeeba(0x589)] + '\x22\x20已删除。'), _0x510e94(![]))); }), _0x57147e['addEventListener']('click', _0x3f7758), _0xc0fcb[_0x3f001b(0x990)]('click', _0x3f7758); } _0x52b79f[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x209abe = _0x3b2836; if (_0x209abe(0x94f) !== _0x209abe(0x94f)) _0x585b7d['value'] = _0x396aa8[_0x209abe(0x3a2)][_0x209abe(0x90c)] || '', _0x183401[_0x209abe(0x552)] = _0x410a27[_0x209abe(0x3a2)][_0x209abe(0x99d)] || '', _0x185a48[_0x209abe(0x552)] = _0x22b6e6[_0x209abe(0x3a2)][_0x209abe(0xa6f)] || '', _0x338bb0[_0x209abe(0x552)] = _0x5f25dd(_0x48e320[_0x209abe(0x8a1)]?.[_0x209abe(0xa33)] ?? 0x64), _0x2d0d16[_0x209abe(0x67e)]('api-provider')[_0x209abe(0x552)] = _0x1c59af[_0x209abe(0x3a2)][_0x209abe(0x1ed)] || _0x209abe(0x427); else { const _0x18cb67 = _0x3a6dc0(); if (_0x18cb67 && _0x18cb67[_0x209abe(0xa1e)] === _0x209abe(0x99c)) _0x446868(_0x18cb67[_0x209abe(0x69c)][0x0]); else _0x18cb67 && _0x18cb67[_0x209abe(0xa1e)] === 'group' && _0x12bad2(_0x18cb67['id']); } }), _0x332f7c[_0x3b2836(0x990)](_0x3b2836(0xa35), _0x519112 => { const _0x5912c2 = _0x3b2836; _0x5912c2(0x411) === _0x5912c2(0x1e9) ? _0x2526ab[_0x5912c2(0x6b3)](_0x2d56dd['createElement'](_0x5912c2(0x962))) : _0x519112[_0x5912c2(0x99d)] === 'Enter' && !_0x519112[_0x5912c2(0x3cf)] && (_0x519112[_0x5912c2(0x624)](), _0x3834ff()); }); const _0x20907f = () => _0x12d562['classList'][_0x3b2836(0x318)](_0x3b2836(0x716)); _0x4c1f99[_0x3b2836(0x990)](_0x3b2836(0x821), _0x20907f), _0x60c1c[_0x3b2836(0x990)](_0x3b2836(0x821), _0x20907f), _0x2aed33[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5dbbe5 = _0x3b2836; if (_0x5dbbe5(0x7da) !== _0x5dbbe5(0x7da)) { const _0x5be948 = _0x136753[_0x5dbbe5(0x67e)](_0x5dbbe5(0x2d1)); if (!_0x5be948) return; _0x31b6df[_0x5dbbe5(0x8a1)][_0x5dbbe5(0x60c)] ? (_0x5be948[_0x5dbbe5(0x7df)]['color'] = _0x5dbbe5(0x763), _0x5be948[_0x5dbbe5(0x7df)][_0x5dbbe5(0x472)] = '0\x202px\x208px\x20rgba(0,0,0,0.4)') : (_0x5be948['style'][_0x5dbbe5(0x89d)] = _0x5dbbe5(0x41f), _0x5be948[_0x5dbbe5(0x7df)][_0x5dbbe5(0x472)] = _0x5dbbe5(0x527)); } else _0x20907f(), _0x446868(); }), _0x546cf8[_0x3b2836(0x990)](_0x3b2836(0x821), () => { _0x20907f(), _0x4fe325(); }), _0x937607[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5eabce = _0x3b2836; _0x52c85d(_0x5eabce(0xa06), _0x5eabce(0x34b)), _0x510e94(![]); }), _0x13baa4[_0x3b2836(0x990)](_0x3b2836(0x821), _0x285266), _0x3bb216[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x28fa36 = _0x3b2836; _0x3c6155[_0x28fa36(0x32b)][_0x28fa36(0xa2f)](_0x28fa36(0x716)), _0x3c6155[_0x28fa36(0x32b)][_0x28fa36(0x776)](_0x28fa36(0x716)) && (_0x540c47['scrollTop'] = _0x540c47[_0x28fa36(0x6ac)]); }), _0x4890bb[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x3ca4be['click']()); const _0x4c1485 = document[_0x3b2836(0x67e)](_0x3b2836(0x7f7)); _0x3ca4be[_0x3b2836(0x990)](_0x3b2836(0x4a3), _0x3ddc61), _0x4c1485[_0x3b2836(0x990)](_0x3b2836(0x821), _0x11ff9b), _0x33420a['addEventListener']('click', _0x331034), _0x940f17['addEventListener'](_0x3b2836(0x821), _0x422952), _0x5190f6['addEventListener'](_0x3b2836(0x821), _0xd961e1), _0x1abef6['addEventListener'](_0x3b2836(0x821), _0x55859b), _0x44effe[_0x3b2836(0x990)]('click', async () => { const _0x5713e3 = _0x3b2836; if (_0x5713e3(0x322) === _0x5713e3(0x160)) _0x275aa5['userProfiles'] = _0x3ccc4a[_0x5713e3(0x391)]['filter'](_0xb019b1 => _0xb019b1['id'] !== _0x45fbe3), _0x432ba1[_0x5713e3(0x422)] === _0x536e6c && (_0x3ef3b5['activeUserProfileId'] = _0x1c9d77[_0x5713e3(0x391)][0x0]['id']), _0x54ded3['chats'][_0x5713e3(0x5e2)](_0x5e18a9 => { const _0x5d8f55 = _0x5713e3; _0x5e18a9[_0x5d8f55(0x347)] === _0x1db3cf && (_0x5e18a9['boundUserProfileId'] = _0x2090e1['activeUserProfileId']); }), _0x473395(), _0x3ee9d9('用户已删除。'), _0x3f6ab8(), _0x257926('userProfileList', 'userProfile'); else { const _0x1292f2 = _0x2d2312[_0x5713e3(0x552)]; if (!_0x1292f2) return; const _0x36ac1c = _0x382342(_0x1292f2); if (!_0x36ac1c) return; const _0x104391 = await _0x156ce5(_0x5713e3(0x13b) + _0x36ac1c[_0x5713e3(0x589)] + _0x5713e3(0x2e8)); _0x104391 && (_0x4d2723(_0x1292f2), _0x33f536(_0x5713e3(0x49b) + _0x36ac1c[_0x5713e3(0x589)] + '”已删除。'), _0x52c85d(_0x5713e3(0xa06), _0x5713e3(0x51a)), _0x510e94(![])); } }), _0x1c470a[_0x3b2836(0x990)](_0x3b2836(0x32f), () => { const _0xfdd0 = _0x3b2836; if (_0xfdd0(0xa80) === _0xfdd0(0x796)) _0x202fa2['getElementById'](_0xfdd0(0x68c))[_0xfdd0(0x821)](); else { const _0x288f65 = _0x1c470a[_0xfdd0(0x552)][_0xfdd0(0x3dd)]()[_0xfdd0(0x9e5)](_0x3404d3); _0xcb462a[_0xfdd0(0x6c3)] = _0x288f65; } }); async function _0x2598c4() { const _0x16613b = _0x3b2836, _0x14bbee = _0x1c470a[_0x16613b(0x552)][_0x16613b(0x3dd)](), _0x589da7 = _0x195d9c['value']['trim'](); if (!_0x14bbee || !_0x589da7) { _0x33f536(_0x16613b(0x197)); return; } const _0xf796ea = _0x14bbee[_0x16613b(0x254)](/\/+$/, ''), _0xcba583 = _0xf796ea + '/v1/models'; _0xcb462a[_0x16613b(0x6c3)] = !![], _0xcb462a[_0x16613b(0x52e)] = _0x16613b(0x688), _0x22df7e[_0x16613b(0x32b)][_0x16613b(0x318)](_0x16613b(0x716)); try { const _0x49db2a = await fetch(_0xcba583, { 'headers': { 'Authorization': 'Bearer\x20' + _0x59cd5a(_0x589da7) } }); if (!_0x49db2a['ok']) throw new Error(_0x16613b(0x4c6) + _0x49db2a['status']); const _0x14d4f0 = await _0x49db2a[_0x16613b(0xa9b)](), _0x159c78 = (_0x14d4f0['data'] || _0x14d4f0)['map'](_0x55da67 => _0x55da67['id'])[_0x16613b(0x42a)](); if (_0x159c78[_0x16613b(0xb1e)] > 0x0) { if (_0x16613b(0x1bc) !== _0x16613b(0x84a)) _0x22df7e['innerHTML'] = '', _0x159c78[_0x16613b(0x5e2)](_0x4cd77c => { const _0x5b8dbb = _0x16613b; if (_0x5b8dbb(0x7ba) !== 'BlEVq') { const _0x2c79a9 = document[_0x5b8dbb(0x494)](_0x5b8dbb(0x962)); _0x2c79a9['textContent'] = _0x4cd77c, _0x2c79a9[_0x5b8dbb(0x990)](_0x5b8dbb(0x821), () => { const _0x2078c8 = _0x5b8dbb; _0x55b691[_0x2078c8(0x552)] = _0x4cd77c, _0x22df7e[_0x2078c8(0x32b)][_0x2078c8(0x318)](_0x2078c8(0x716)); }), _0x22df7e[_0x5b8dbb(0x6b3)](_0x2c79a9); } else _0x163628[_0x5b8dbb(0x7df)][_0x5b8dbb(0x741)] = _0x5b8dbb(0x527), _0x59f7c2[_0x5b8dbb(0x67e)](_0x5b8dbb(0x8a2))['style'][_0x5b8dbb(0x741)] = _0x5b8dbb(0x38c); }), _0x22df7e['classList'][_0x16613b(0x536)](_0x16613b(0x716)), _0x33f536(_0x16613b(0x7e3) + _0x159c78[_0x16613b(0xb1e)] + _0x16613b(0x34a)); else try { const _0x244de4 = _0x3be40e[_0x16613b(0x709)](_0xac8734), _0x1d1f09 = _0x16613b(0x5f4), _0x9509f4 = _0x16613b(0xa71) + _0x1d1f09 + '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27' + _0x244de4 + '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x3d2f4a['innerHTML'] = _0x9509f4, _0xc0e7f0[_0x16613b(0x6a1)][_0x16613b(0x7df)][_0x16613b(0x522)](_0x16613b(0x4e4), '\x27' + _0x1d1f09 + '\x27'), _0x4608ad[_0x16613b(0x52e)] = _0x16613b(0xaf8); } catch (_0x4e0661) { _0x4d5bb9[_0x16613b(0x390)](_0x16613b(0x8ae), _0x4e0661), _0x177049(_0x16613b(0x696)); } } else _0x33f536(_0x16613b(0x80f)); } catch (_0x4401d5) { _0x33f536(_0x16613b(0x396) + _0x4401d5[_0x16613b(0x332)] + _0x16613b(0x9aa)); } finally { if (_0x16613b(0xad3) !== _0x16613b(0x2a7)) _0xcb462a[_0x16613b(0x6c3)] = ![], _0xcb462a['textContent'] = '获取'; else { _0x548cf5 && _0x33dfc2[_0x16613b(0x1c5)](_0x261c4f); _0x3bddde = {}; const _0x71925d = _0x321885['substring'](0x2), _0x52e5b3 = _0x71925d['split'](/:\s(.+)/); if (_0x52e5b3['length'] > 0x1) { const _0x5ec0ce = _0x52e5b3[0x0][_0x16613b(0x3dd)](), _0x54b3fd = _0x52e5b3[0x1][_0x16613b(0x3dd)]()[_0x16613b(0x254)](/^"|"$/g, ''); _0x4d766f[_0x5ec0ce] = _0x54b3fd; } } } } _0xcb462a[_0x3b2836(0x990)](_0x3b2836(0x821), _0x14a5f8 => { const _0x382ea3 = _0x3b2836; if (_0x382ea3(0x505) !== _0x382ea3(0x505)) { const _0x2ed1b4 = _0x2ffc71[_0x382ea3(0x3dd)](); _0x2ed1b4 && _0x2a5bdd[_0x382ea3(0x1c5)](..._0x21ad1e(_0x2ed1b4)), _0x3af7e0 < _0x15e847['length'] && (_0x198ad0['push'](_0x1186ff[_0x4ee115][_0x382ea3(0x3dd)]()), _0x4a9556++); } else _0x14a5f8[_0x382ea3(0x5f5)](), _0x2598c4(); }), document[_0x3b2836(0x990)](_0x3b2836(0x821), _0x213d92 => { const _0x2a04fe = _0x3b2836; if (!_0x22df7e['contains'](_0x213d92['target']) && _0x213d92['target'] !== _0x55b691 && _0x213d92['target'] !== _0xcb462a) { if (_0x2a04fe(0x56a) === 'ihzVg') { _0x5e352e[_0x2a04fe(0x32b)]['add'](_0x2a04fe(0x67c)); const _0x339df4 = _0x368918['role'] === _0x2a04fe(0x2b3) ? _0x40489(_0x31896b[_0x2a04fe(0x413)]) : _0x5c419e(_0x373559[_0x2a04fe(0x972)]), _0x399775 = _0xaa2b9f[_0x2a04fe(0x703)] === _0x4f5b03(_0x12cb16[_0x2a04fe(0x413)])['id'] ? _0x1678c5(_0x344350['activeChatId']) : _0x44a3fa(_0x4e6ff8[_0x2a04fe(0x703)]), _0x5294f3 = _0x339df4?.[_0x2a04fe(0x589)] ? _0x339df4['name'] + '的转账' : '转账', _0x39f08f = _0x399775?.['name'] ? '转给\x20' + _0x399775['name'] : '转账', _0x224dac = _0x2a04fe(0x567) + _0x5294f3 + _0x2a04fe(0x950) + _0x548989[_0x2a04fe(0x582)][_0x2a04fe(0x81f)](0x2) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>' + _0x39f08f + _0x2a04fe(0x351); _0x5e8f37[_0x2a04fe(0x282)] = _0x224dac; } else _0x22df7e[_0x2a04fe(0x32b)]['remove'](_0x2a04fe(0x716)); } }); async function _0x19643a(_0x9a1a2e) { const _0x6689ba = _0x3b2836; if (_0x6689ba(0x5dd) === _0x6689ba(0x5dd)) return await _0x1c44ae(_0x9a1a2e, 0x190, 0.85); else { const _0x5ebb6d = _0xe5a089(); _0x5ebb6d && _0x5ebb6d[_0x6689ba(0x277)] && _0x5ebb6d[_0x6689ba(0x277)][_0x6689ba(0x3ef)] && (_0x4b3efb[_0x6689ba(0x7df)]['display'] = _0x6689ba(0x38c), _0x246f93(() => _0x432cb9[_0x6689ba(0x32b)]['add'](_0x6689ba(0x716)), 0xa)); } } _0x50218a[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x3e8e52[_0x3b2836(0x821)]()), _0x3e8e52[_0x3b2836(0x990)](_0x3b2836(0x4a3), async _0xa26e64 => { const _0x34afac = _0x3b2836, _0x598a7d = _0xa26e64[_0x34afac(0x842)][_0x34afac(0x7e7)][0x0]; if (!_0x598a7d) return; try { const _0x4baad7 = await _0x19643a(_0x598a7d), _0x1a4013 = document[_0x34afac(0x67e)](_0x34afac(0x666)); _0x1a4013[_0x34afac(0x7df)][_0x34afac(0x6dd)] = _0x34afac(0xa5e) + _0x4baad7 + '\x27)', _0x1a4013[_0x34afac(0x988)]['newAvatar'] = _0x4baad7; } catch (_0xf5e797) { _0x34afac(0xab4) !== _0x34afac(0xb20) ? _0x33f536(_0x34afac(0x4d7) + _0xf5e797[_0x34afac(0x332)]) : _0x106a85 = _0x524b2b; } }), _0x497de9['addEventListener'](_0x3b2836(0x821), () => _0x3264c4[_0x3b2836(0x821)]()), _0x3264c4['addEventListener']('change', async _0x3dcff8 => { const _0x168977 = _0x3b2836; if (_0x168977(0x11f) === _0x168977(0x98a)) _0x396595(_0x168977(0x4d7) + _0x5437a1[_0x168977(0x332)]); else { const _0x45393c = _0x3dcff8[_0x168977(0x842)]['files'][0x0]; if (!_0x45393c) return; try { _0x168977(0x3da) !== _0x168977(0x9e6) ? _0x497de9[_0x168977(0x45f)] = await _0x19643a(_0x45393c) : (_0x5ab19a(_0x1e4fe7), _0x12eee5[_0x168977(0x552)] = '', _0xd5cca8(_0x4283cd, 0x64)); } catch (_0x4d8b77) { _0x33f536('错误:\x20' + _0x4d8b77['message']); } } }); function _0x2012e5() { const _0x18bad7 = _0x3b2836; _0x18bad7(0x4dd) !== _0x18bad7(0x4dd) ? _0x28141c = _0x1f3c93['value'] : (_0x3c6155[_0x18bad7(0x282)] = '', _0x397bb6[_0x18bad7(0x5e2)](_0x18bbab => { const _0xf1e1b7 = _0x18bad7, _0x147240 = document['createElement'](_0xf1e1b7(0x545)); _0x147240[_0xf1e1b7(0x45f)] = _0x18bbab['url'], _0x147240[_0xf1e1b7(0x284)] = 'lazy', _0x147240[_0xf1e1b7(0x808)] = _0x18bbab['name'], _0x147240[_0xf1e1b7(0x32b)][_0xf1e1b7(0x536)](_0xf1e1b7(0x6d7)), _0x147240[_0xf1e1b7(0x990)](_0xf1e1b7(0x821), () => _0x3e6b5a(_0x18bbab)), _0x3c6155['appendChild'](_0x147240); })); } async function _0x14da44(_0x1cfbb4) { const _0xc10d9a = _0x3b2836, _0x12490a = await _0x156ce5(_0xc10d9a(0xa10)); if (!_0x12490a) return; const _0x20f3b4 = _0x57ec14[_0xc10d9a(0x1bf)][_0xc10d9a(0x49c)](_0x492a89 => _0x492a89['id'] === _0x1cfbb4); if (_0x20f3b4 > -0x1) { if (_0xc10d9a(0x103) === 'AKWiH') _0x57ec14['calendarEvents'][_0xc10d9a(0x920)](_0x20f3b4, 0x1), _0x203e68(), _0x260fd1(), _0x5381e5(), _0x2eff78(), _0x33f536(_0xc10d9a(0x9fa)); else { const _0x4eb005 = (_0x46db6e[_0xc10d9a(0xb17)] || [])[_0xc10d9a(0x937)](_0x1ebee7 => _0xc10d9a(0x924) + _0x1ebee7 + _0xc10d9a(0x219))[_0xc10d9a(0x9f9)](''); return _0xc10d9a(0x372) + (_0x4a58ef['restaurant_name'] || _0xc10d9a(0x3dc)) + _0xc10d9a(0x5e7) + (_0x1c3f17[_0xc10d9a(0x665)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0x1f20b3[_0xc10d9a(0x7eb)] || _0xc10d9a(0x446)) + _0xc10d9a(0x824) + _0x4eb005 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x5eaed2[_0xc10d9a(0x8a4)] || 0x0)[_0xc10d9a(0x81f)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } } } let _0x454359 = null; function _0x148907(_0x3ac659) { const _0x112caf = _0x3b2836; if (_0x454359) clearTimeout(_0x454359); const _0x3f648a = _0x3ac659[_0x112caf(0x842)]['closest']('.todo-item,\x20.important-day-item'); if (!_0x3f648a) return; const _0x45874d = _0x3f648a[_0x112caf(0x988)]['id']; if (!_0x45874d) return; const _0x5c66c1 = () => { const _0x5c8042 = _0x112caf; if (_0x5c8042(0x34e) !== 'TwxkH') _0x454359 = setTimeout(() => { const _0xe0355b = _0x5c8042; if (_0x3ac659[_0xe0355b(0xa1e)] === _0xe0355b(0x44d)) _0x3ac659[_0xe0355b(0x624)](); _0x14da44(_0x45874d); }, 0x320); else { _0x763b71(_0x5c8042(0x2f1)); return; } }, _0x493b5f = () => { const _0x37098e = _0x112caf; if (_0x37098e(0x3fa) !== _0x37098e(0x3fa)) { if (_0x53d5e3) _0x54f8be[_0x37098e(0x7df)][_0x37098e(0x6dd)] = _0x91f5fa['value'] ? _0x37098e(0xa5e) + _0x2308bd[_0x37098e(0x552)] + '\x27)' : ''; } else { if (_0x454359) clearTimeout(_0x454359); } }; document[_0x112caf(0x990)]('mouseup', _0x493b5f, { 'once': !![] }), document[_0x112caf(0x990)](_0x112caf(0x517), _0x493b5f, { 'once': !![] }), document[_0x112caf(0x990)](_0x112caf(0x39c), _0x493b5f, { 'once': !![] }), document[_0x112caf(0x990)]('touchmove', _0x493b5f, { 'once': !![] }), _0x5c66c1(); } function _0xafb7cb(_0x31b668) { const _0x32c815 = _0x3b2836; if (_0x32c815(0x2b7) === _0x32c815(0x2b7)) { const _0x10b760 = _0x57ec14['chats']['find'](_0x25fe99 => _0x25fe99[_0x32c815(0x69c)][_0x32c815(0x9e5)](_0x31b668)); if (!_0x10b760) return ''; const _0x5332c9 = _0xb1d08(_0x10b760['id']), _0x3a9cb0 = _0x57ec14['calendarEvents'][_0x32c815(0x1a0)](_0xa758e8 => _0xa758e8[_0x32c815(0x736)] === _0x5332c9['id'] || !_0xa758e8[_0x32c815(0x736)]); if (_0x3a9cb0[_0x32c815(0xb1e)] === 0x0) return ''; const _0x16e66d = _0x3a9cb0['map'](_0x202b34 => { const _0x28f3d8 = _0x32c815, _0x22fa8f = _0x202b34[_0x28f3d8(0xa1e)] === _0x28f3d8(0x3d2) ? _0x28f3d8(0x8d5) : '待办'; return _0x28f3d8(0x566) + _0x22fa8f + ']\x20' + _0x202b34[_0x28f3d8(0x2b8)] + ':\x20' + _0x202b34[_0x28f3d8(0x6fd)]; })[_0x32c815(0x9f9)]('\x0a'); return _0x32c815(0x341) + _0x5332c9[_0x32c815(0x589)] + _0x32c815(0xacc) + _0x16e66d; } else _0x4efe83(_0x1c5c86['id']), _0x467136(!![]); } let _0x375032 = { 'currentDate': new Date(), 'selectedDate': new Date()[_0x3b2836(0x521)]()[_0x3b2836(0x52b)]('T')[0x0] }; function _0x1d45e4() { const _0x33a9d8 = _0x3b2836; document[_0x33a9d8(0x67e)](_0x33a9d8(0x180))[_0x33a9d8(0x990)](_0x33a9d8(0x821), () => { const _0x5d1503 = _0x33a9d8; _0x260fd1(), _0x52c85d(_0x5d1503(0xa49), 'home'); }), document[_0x33a9d8(0x67e)]('back-to-home-from-calendar')[_0x33a9d8(0x990)](_0x33a9d8(0x821), () => _0x52c85d('home', _0x33a9d8(0xa49))), document[_0x33a9d8(0x67e)]('prev-month-btn')['addEventListener'](_0x33a9d8(0x821), () => { const _0x2ab979 = _0x33a9d8; _0x375032['currentDate']['setMonth'](_0x375032['currentDate'][_0x2ab979(0x4b8)]() - 0x1), _0x260fd1(); }), document[_0x33a9d8(0x67e)](_0x33a9d8(0x705))[_0x33a9d8(0x990)]('click', () => { const _0x53d46a = _0x33a9d8; if (_0x53d46a(0x3c1) !== _0x53d46a(0x3ae)) _0x375032['currentDate'][_0x53d46a(0x7c2)](_0x375032[_0x53d46a(0x41b)]['getMonth']() + 0x1), _0x260fd1(); else { const _0x470940 = _0x47db30[_0x53d46a(0x842)][_0x53d46a(0x7e7)][0x0]; if (!_0x470940) return; const _0x1e8434 = _0x2cdfb9[_0x53d46a(0x709)](_0x470940); _0x382120['src'] = _0x1e8434, _0x155bf2[_0x53d46a(0x532)] = () => { const _0x546fdf = _0x53d46a; _0x3ab159[_0x546fdf(0xa8f)](_0x1e8434); }; } }), document[_0x33a9d8(0x67e)]('today-btn')[_0x33a9d8(0x990)](_0x33a9d8(0x821), () => { const _0x28c829 = _0x33a9d8; _0x375032[_0x28c829(0x41b)] = new Date(), _0x375032['selectedDate'] = new Date()[_0x28c829(0x521)]()[_0x28c829(0x52b)]('T')[0x0], _0x260fd1(); }), document[_0x33a9d8(0x67e)](_0x33a9d8(0x9d3))[_0x33a9d8(0x990)](_0x33a9d8(0x821), () => { const _0xf65c51 = _0x33a9d8; _0x2e5c38(_0x375032[_0xf65c51(0xa25)]); }), document[_0x33a9d8(0x67e)](_0x33a9d8(0x799))[_0x33a9d8(0x990)](_0x33a9d8(0x821), _0x122ec3), document['getElementById']('cancel-event-button')[_0x33a9d8(0x990)](_0x33a9d8(0x821), () => document['getElementById'](_0x33a9d8(0xaca))['classList'][_0x33a9d8(0x318)](_0x33a9d8(0x716))), document[_0x33a9d8(0x67e)]('add-event-backdrop')['addEventListener'](_0x33a9d8(0x821), () => document[_0x33a9d8(0x67e)](_0x33a9d8(0xaca))['classList'][_0x33a9d8(0x318)](_0x33a9d8(0x716))); const _0x3c5b78 = document[_0x33a9d8(0x67e)]('todo-list'); _0x3c5b78[_0x33a9d8(0x990)](_0x33a9d8(0x4c3), _0x148907), _0x3c5b78[_0x33a9d8(0x990)](_0x33a9d8(0x44d), _0x148907, { 'passive': ![] }); } function _0x260fd1() { const _0x3d0938 = _0x3b2836; if (_0x3d0938(0x66e) !== _0x3d0938(0x66e)) { if (_0x48c3c8) _0xa88f3(_0x160596); const _0x2ba6c0 = _0xcac0b4[_0x3d0938(0x842)][_0x3d0938(0x3a1)](_0x3d0938(0x21a)); if (!_0x2ba6c0) return; const _0x55bfe8 = _0x27446f(_0x2ba6c0['dataset'][_0x3d0938(0xa4b)], 0xa); if (_0x2f9141(_0x55bfe8)) return; const _0x4ea263 = () => { _0x581b1f = _0x4b816b(() => { const _0x1ee817 = _0x3df6; if (_0x550373[_0x1ee817(0xa1e)] === _0x1ee817(0x44d)) _0x3846b5[_0x1ee817(0x624)](); _0x2c1f52(_0x55bfe8); }, 0x320); }, _0x5cf7bd = () => { if (_0x3efd2b) _0x2292f1(_0x52a0de); }; _0xe77310[_0x3d0938(0x990)](_0x3d0938(0x280), _0x5cf7bd, { 'once': !![] }), _0x2d225e[_0x3d0938(0x990)](_0x3d0938(0x854), _0x5cf7bd, { 'once': !![] }), _0x43413b[_0x3d0938(0x990)](_0x3d0938(0x517), _0x5cf7bd, { 'once': !![] }), _0x1c244d[_0x3d0938(0x990)](_0x3d0938(0x39c), _0x5cf7bd, { 'once': !![] }), _0x4ea263(); } else { const _0x22eff3 = _0x375032['currentDate']['getFullYear'](), _0x413991 = _0x375032[_0x3d0938(0x41b)]['getMonth'](); document['getElementById'](_0x3d0938(0xb1a))['textContent'] = _0x22eff3 + '年\x20' + (_0x413991 + 0x1) + '月', _0xa5544e(_0x22eff3, _0x413991), _0xb29c80(_0x375032['selectedDate']); } } function _0x2eff78() { const _0x55f9ce = _0x3b2836, _0x4eb78d = document['getElementById'](_0x55f9ce(0x256)); if (!_0x4eb78d) return; const _0x60a5c1 = new Date()[_0x55f9ce(0x521)]()[_0x55f9ce(0x52b)]('T')[0x0], _0x451b9b = _0x57ec14[_0x55f9ce(0x1bf)][_0x55f9ce(0x1a0)](_0x2fcb58 => _0x2fcb58['date'] === _0x60a5c1 && _0x2fcb58['type'] === 'todo'); _0x4eb78d['innerHTML'] = '', _0x451b9b[_0x55f9ce(0xb1e)] > 0x0 ? _0x451b9b[_0x55f9ce(0x5e2)](_0x36cad9 => { const _0x4af6ff = _0x55f9ce, _0x2c87d9 = document[_0x4af6ff(0x494)](_0x4af6ff(0x962)); _0x2c87d9[_0x4af6ff(0x226)] = _0x4af6ff(0x929), _0x2c87d9[_0x4af6ff(0x52e)] = _0x36cad9['content'], _0x4eb78d['appendChild'](_0x2c87d9); }) : _0x4eb78d[_0x55f9ce(0x282)] = _0x55f9ce(0x12e); } function _0xa5544e(_0x18e846, _0x10afaa) { const _0xb938dc = _0x3b2836, _0x371429 = document[_0xb938dc(0x67e)](_0xb938dc(0x1b3)); _0x371429[_0xb938dc(0x282)] = ''; const _0x4d9754 = new Date(_0x18e846, _0x10afaa, 0x1)['getDay'](), _0x1305c1 = new Date(_0x18e846, _0x10afaa + 0x1, 0x0)[_0xb938dc(0x4f3)](), _0x4099fc = new Date()[_0xb938dc(0x521)]()['split']('T')[0x0]; for (let _0x3c8cb9 = 0x0; _0x3c8cb9 < _0x4d9754; _0x3c8cb9++) { _0xb938dc(0x23a) !== _0xb938dc(0x23a) ? (_0xf96144(_0xb938dc(0xa06), _0xb938dc(0x669)), _0x2d6f6e(() => _0x44d826(), 0x64)) : _0x371429[_0xb938dc(0x6b3)](document['createElement'](_0xb938dc(0x962))); } for (let _0x57bfdd = 0x1; _0x57bfdd <= _0x1305c1; _0x57bfdd++) { const _0x53e603 = document['createElement'](_0xb938dc(0x962)); _0x53e603['className'] = _0xb938dc(0x67a); const _0x1acf5d = _0x18e846 + '-' + String(_0x10afaa + 0x1)[_0xb938dc(0xa2e)](0x2, '0') + '-' + String(_0x57bfdd)['padStart'](0x2, '0'); if (_0x1acf5d === _0x4099fc) _0x53e603[_0xb938dc(0x32b)][_0xb938dc(0x536)](_0xb938dc(0x6da)); if (_0x1acf5d === _0x375032[_0xb938dc(0xa25)]) _0x53e603[_0xb938dc(0x32b)][_0xb938dc(0x536)](_0xb938dc(0x361)); const _0x3ae6fc = document[_0xb938dc(0x494)](_0xb938dc(0x568)); _0x3ae6fc[_0xb938dc(0x226)] = _0xb938dc(0x34f), _0x3ae6fc[_0xb938dc(0x52e)] = _0x57bfdd, _0x53e603['appendChild'](_0x3ae6fc); const _0x35d8f8 = _0x57ec14['calendarEvents']['filter'](_0x12c1cc => _0x12c1cc[_0xb938dc(0x2b8)] === _0x1acf5d); if (_0x35d8f8[_0xb938dc(0xb1e)] > 0x0) { const _0x59ead1 = document[_0xb938dc(0x494)]('div'); _0x59ead1[_0xb938dc(0x226)] = _0xb938dc(0x300), _0x53e603[_0xb938dc(0x6b3)](_0x59ead1); } _0x53e603['addEventListener'](_0xb938dc(0x821), () => { const _0x154301 = _0xb938dc; _0x375032[_0x154301(0xa25)] = _0x1acf5d, _0x260fd1(); }), _0x371429['appendChild'](_0x53e603); } } function _0xb29c80(_0x372e27) { const _0xba6286 = _0x3b2836; if ('QqjhP' !== 'QqjhP') _0xd68e63[_0xba6286(0x74c)](_0xba6286(0x230))[_0xba6286(0x5e2)](_0x211918 => { const _0x793fb9 = _0xba6286; if (_0x3be408['linkedWorldBookIds'][_0x793fb9(0x9e5)](_0x211918[_0x793fb9(0x552)])) _0x211918['checked'] = !![]; }); else { const _0x78665f = document[_0xba6286(0x67e)]('todo-list'), _0x53451d = document['getElementById']('todo-date-title'); _0x78665f['innerHTML'] = ''; const _0x2b7bc7 = new Date(_0x372e27 + _0xba6286(0x656)); _0x53451d[_0xba6286(0x52e)] = _0x2b7bc7['getMonth']() + 0x1 + '月' + _0x2b7bc7[_0xba6286(0x4f3)]() + '日'; const _0x115882 = _0x57ec14[_0xba6286(0x1bf)][_0xba6286(0x1a0)](_0x5271cf => _0x5271cf['date'] === _0x372e27); if (_0x115882[_0xba6286(0xb1e)] === 0x0) { if (_0xba6286(0x75e) !== _0xba6286(0x266)) { _0x78665f['innerHTML'] = _0xba6286(0x92f); return; } else _0x31cdad[_0xba6286(0x7df)][_0xba6286(0x6dd)] = ''; } _0x115882['forEach'](_0x136f2b => { const _0x5c24e2 = _0xba6286; if (_0x5c24e2(0x21c) !== 'fgfQM') { const _0x4e9c55 = document[_0x5c24e2(0x494)]('div'); _0x4e9c55['className'] = _0x136f2b[_0x5c24e2(0xa1e)] === _0x5c24e2(0x3d2) ? _0x5c24e2(0x4d9) : 'todo-item', _0x4e9c55['textContent'] = _0x136f2b[_0x5c24e2(0x6fd)], _0x4e9c55['dataset']['id'] = _0x136f2b['id'], _0x78665f[_0x5c24e2(0x6b3)](_0x4e9c55); } else { const _0x5f50ea = _0x5308c7(_0x6473b3[_0x5c24e2(0x7f2)][_0x5c24e2(0x870)]); _0x5f50ea && (_0x1c4daf = _0x5c24e2(0x83d) + _0x5f50ea['avatar'] + _0x5c24e2(0x710) + _0x5f50ea['name'] + _0x5c24e2(0x312) + _0x9e98bf[_0x5c24e2(0x7f2)][_0x5c24e2(0x9de)] + _0x5c24e2(0x850)); } }); } } function _0x2e5c38(_0x4504b3) { const _0x20d725 = _0x3b2836; document[_0x20d725(0x67e)](_0x20d725(0x4e9))['textContent'] = '为\x20' + _0x4504b3 + _0x20d725(0x853), document[_0x20d725(0x67e)](_0x20d725(0x5a0))[_0x20d725(0x552)] = '', document[_0x20d725(0x67e)]('event-type-todo')[_0x20d725(0x262)] = !![], document[_0x20d725(0x67e)]('add-event-modal')['classList'][_0x20d725(0x536)]('show'), document['getElementById'](_0x20d725(0x5a0))[_0x20d725(0x855)](); } function _0x122ec3() { const _0x4bdc09 = _0x3b2836, _0x4b2b35 = document[_0x4bdc09(0x67e)]('event-content-input')[_0x4bdc09(0x552)][_0x4bdc09(0x3dd)](), _0x1542fa = document[_0x4bdc09(0x433)](_0x4bdc09(0x402))[_0x4bdc09(0x552)]; if (!_0x4b2b35) { if ('hpJPH' === _0x4bdc09(0x2ee)) _0x4d1890[_0x4bdc09(0x17d)] = _0x1a9264['meetingViewMode'] === _0x4bdc09(0x910) ? _0x4bdc09(0x44b) : _0x4bdc09(0x910), _0x25122f(); else { _0x33f536('内容不能为空！'); return; } } const _0x4f227d = _0x57ec14[_0x4bdc09(0x391)][_0x4bdc09(0x270)](_0x5a88bd => _0x5a88bd['id'] === _0x57ec14['activeUserProfileId']); if (!_0x4f227d) { if (_0x4bdc09(0x144) !== 'XIJco') !_0x1c1b95 && (_0x4b4245 = _0x561564[_0x4bdc09(0x494)]('div'), _0x3e2d5b['id'] = _0x4bdc09(0x168), _0x2458ca[_0x4bdc09(0x6b3)](_0x5e8a9e)), _0x5622bc[_0x4bdc09(0x282)] = _0x4bdc09(0x293) + _0x222e78 + _0x4bdc09(0xafd), _0xef161c[_0x4bdc09(0x7df)]['display'] = _0x4bdc09(0x38c); else { _0x33f536(_0x4bdc09(0x82c)); return; } } _0x57ec14[_0x4bdc09(0x1bf)][_0x4bdc09(0x1c5)]({ 'id': _0x4bdc09(0x3b0) + Date[_0x4bdc09(0x2c5)](), 'date': _0x375032[_0x4bdc09(0xa25)], 'type': _0x1542fa, 'content': _0x4b2b35, 'userId': _0x4f227d['id'] }), _0x203e68(), _0x260fd1(), _0x5381e5(), _0x2eff78(), document['getElementById']('add-event-modal')[_0x4bdc09(0x32b)][_0x4bdc09(0x318)](_0x4bdc09(0x716)); } function _0x5381e5() { const _0x58e3ef = _0x3b2836; if (_0x58e3ef(0x8e5) === _0x58e3ef(0x8e5)) { const _0x164cdf = document[_0x58e3ef(0x67e)]('countdown-title'), _0x1d97d9 = document[_0x58e3ef(0x67e)](_0x58e3ef(0x22b)), _0x3478cc = new Date(); _0x3478cc[_0x58e3ef(0x490)](0x0, 0x0, 0x0, 0x0); const _0x23e3d0 = _0x57ec14['calendarEvents'][_0x58e3ef(0x1a0)](_0x380fa8 => _0x380fa8[_0x58e3ef(0xa1e)] === _0x58e3ef(0x3d2) && new Date(_0x380fa8['date'] + _0x58e3ef(0x656)) >= _0x3478cc)[_0x58e3ef(0x42a)]((_0x1ce3af, _0x114ed8) => new Date(_0x1ce3af['date']) - new Date(_0x114ed8[_0x58e3ef(0x2b8)])); if (_0x23e3d0[_0x58e3ef(0xb1e)] > 0x0) { if ('YcOJf' !== _0x58e3ef(0x6f0)) { const _0x2a7846 = _0x549278[_0x58e3ef(0x67e)]('clock-color-toggle'); if (!_0x2a7846) return; _0x2a7846['checked'] = _0x5022c8['preferences'][_0x58e3ef(0x60c)] || ![], _0x2a7846['addEventListener'](_0x58e3ef(0x4a3), () => { const _0x284105 = _0x58e3ef; _0x1e82ee[_0x284105(0x8a1)][_0x284105(0x60c)] = _0x2a7846['checked'], _0x45f7ec(), _0x2d98bb(); }); } else { const _0x230bb4 = _0x23e3d0[0x0], _0x5cf8b5 = new Date(_0x230bb4[_0x58e3ef(0x2b8)] + _0x58e3ef(0x656)), _0x5905ce = _0x5cf8b5 - _0x3478cc, _0x2a921e = Math[_0x58e3ef(0x12c)](_0x5905ce / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x164cdf[_0x58e3ef(0x52e)] = _0x58e3ef(0x5ad) + _0x230bb4[_0x58e3ef(0x6fd)] + '」', _0x1d97d9[_0x58e3ef(0x282)] = _0x58e3ef(0x70f) + _0x2a921e + '</span><span\x20class=\x22unit\x22>天</span>'; } } else _0x164cdf[_0x58e3ef(0x52e)] = '近期没有特别安排', _0x1d97d9[_0x58e3ef(0x282)] = _0x58e3ef(0x75a); } else { if (_0x4aea46) { const _0x57a901 = _0x4bf461(_0x5ef844[_0x58e3ef(0x601)]); _0x57a901 && (delete _0x57a901[_0x58e3ef(0x96b)], _0x4d50ed(), _0x4ac1f2(_0x57a901['id'], _0x58e3ef(0x3d7)), _0x7ff9cb(_0x58e3ef(0x4c0)), _0x3024d6(!![])); } } } function _0x59a745() { const _0x43a95e = _0x3b2836, _0x167cbd = document[_0x43a95e(0x67e)]('user-profile-list-container'); _0x167cbd[_0x43a95e(0x282)] = ''; if (_0x57ec14['userProfiles'][_0x43a95e(0xb1e)] === 0x0) { if (_0x43a95e(0x360) === _0x43a95e(0x306)) _0x5b9c89(_0x2d0556['id']); else { _0x167cbd[_0x43a95e(0x282)] = _0x43a95e(0x155); return; } } _0x57ec14[_0x43a95e(0x391)][_0x43a95e(0x5e2)](_0x1ebd4f => { const _0x26eb37 = _0x43a95e; if (_0x26eb37(0x737) !== _0x26eb37(0x737)) { const _0x2604f2 = _0x13de92[_0x26eb37(0x67e)]('meeting-scene-view'), _0x277688 = _0x71383b['getElementById'](_0x26eb37(0x790)), _0x2a7a89 = _0x44ac44[_0x26eb37(0x433)](_0x26eb37(0x1a6)); _0x542c37['meetingViewMode'] === 'galgame' ? (_0x2604f2[_0x26eb37(0x7df)][_0x26eb37(0x741)] = _0x26eb37(0x527), _0x277688[_0x26eb37(0x7df)][_0x26eb37(0x741)] = 'block') : (_0x2604f2[_0x26eb37(0x7df)]['display'] = _0x26eb37(0x1f1), _0x277688['style'][_0x26eb37(0x741)] = _0x26eb37(0x527)), _0x2a7a89[_0x26eb37(0x7df)][_0x26eb37(0x741)] = _0x26eb37(0x1f1); } else { const _0xf8e2d7 = document[_0x26eb37(0x494)](_0x26eb37(0x962)); _0xf8e2d7[_0x26eb37(0x226)] = _0x26eb37(0x8fe), _0xf8e2d7[_0x26eb37(0x988)]['id'] = _0x1ebd4f['id']; const _0x5c3583 = _0x1ebd4f['id'] === _0x57ec14[_0x26eb37(0x422)] ? _0x26eb37(0x95b) : ''; _0xf8e2d7[_0x26eb37(0x282)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x1ebd4f[_0x26eb37(0x5b2)] || _0x1f7795) + _0x26eb37(0x11b) + _0x1ebd4f[_0x26eb37(0x589)] + _0x5c3583 + _0x26eb37(0xa3b) + _0x1ebd4f[_0x26eb37(0x7dc)][_0x26eb37(0x5ae)](0x0, 0x64) + _0x26eb37(0x773), _0xf8e2d7[_0x26eb37(0x990)](_0x26eb37(0x821), () => _0x2f73c2(_0x1ebd4f['id'])), _0x167cbd['appendChild'](_0xf8e2d7); } }); } function _0x2f73c2(_0x4babc4 = null) { const _0x1274dc = _0x3b2836; if ('CIXUT' === _0x1274dc(0x20d)) { _0x52c85d(_0x1274dc(0xaf7), 'userProfileList'); const _0x2b6a7a = document[_0x1274dc(0x67e)](_0x1274dc(0x7fd)), _0x202dcb = document[_0x1274dc(0x67e)](_0x1274dc(0x666)); _0x202dcb[_0x1274dc(0x7df)]['backgroundImage'] = '', delete _0x202dcb['dataset']['newAvatar']; if (_0x4babc4) { const _0x1a79dd = _0x57ec14[_0x1274dc(0x391)][_0x1274dc(0x270)](_0x28ef87 => _0x28ef87['id'] === _0x4babc4); if (!_0x1a79dd) return; document[_0x1274dc(0x67e)](_0x1274dc(0x826))[_0x1274dc(0x552)] = _0x1a79dd['id'], document[_0x1274dc(0x67e)](_0x1274dc(0xab2))[_0x1274dc(0x52e)] = _0x1274dc(0x385), document[_0x1274dc(0x67e)](_0x1274dc(0xabd))[_0x1274dc(0x552)] = _0x1a79dd['name'], _0x1a79dd[_0x1274dc(0x5b2)] ? _0x1274dc(0x670) !== _0x1274dc(0x13d) ? _0x202dcb[_0x1274dc(0x7df)]['backgroundImage'] = _0x1274dc(0xa5e) + _0x1a79dd[_0x1274dc(0x5b2)] + '\x27)' : _0x1cf466 = _0x57d080[_0x1274dc(0x258)](_0x17b498) : _0x202dcb[_0x1274dc(0x7df)][_0x1274dc(0x6dd)] = _0x1274dc(0xa5e) + _0x1f7795 + '\x27)', document[_0x1274dc(0x67e)](_0x1274dc(0x900))[_0x1274dc(0x552)] = _0x1a79dd[_0x1274dc(0x7dc)], _0x2b6a7a[_0x1274dc(0x7df)][_0x1274dc(0x741)] = _0x1a79dd['id'] === _0x57ec14[_0x1274dc(0x422)] ? _0x1274dc(0x527) : _0x1274dc(0x1f1), document[_0x1274dc(0x67e)](_0x1274dc(0x3ff))['style']['display'] = _0x1274dc(0x1f1); } else document[_0x1274dc(0x67e)](_0x1274dc(0x826))[_0x1274dc(0x552)] = '', document[_0x1274dc(0x67e)]('user-profile-edit-title')['textContent'] = _0x1274dc(0x5a1), document['getElementById'](_0x1274dc(0xabd))[_0x1274dc(0x552)] = _0x1274dc(0x802) + (_0x57ec14[_0x1274dc(0x391)][_0x1274dc(0xb1e)] + 0x1), _0x202dcb[_0x1274dc(0x7df)][_0x1274dc(0x6dd)] = 'url(\x27' + _0x1f7795 + '\x27)', document[_0x1274dc(0x67e)]('user-persona')[_0x1274dc(0x552)] = '', _0x2b6a7a['style'][_0x1274dc(0x741)] = _0x1274dc(0x527), document['getElementById'](_0x1274dc(0x3ff))['style'][_0x1274dc(0x741)] = 'none'; } else _0x363d08 += _0x1274dc(0x16e) + _0x1364c3['store_name'] + _0x1274dc(0x75f) + _0x47ea4a[_0x1274dc(0x264)] + _0x1274dc(0x367); } function _0x422952() { const _0x1aac05 = _0x3b2836, _0x565ab = document[_0x1aac05(0x67e)]('editing-user-id')[_0x1aac05(0x552)], _0xae68c9 = document['getElementById']('user-avatar-preview'), _0x41f978 = { 'name': document[_0x1aac05(0x67e)](_0x1aac05(0xabd))[_0x1aac05(0x552)][_0x1aac05(0x3dd)](), 'persona': document[_0x1aac05(0x67e)](_0x1aac05(0x900))['value'][_0x1aac05(0x3dd)](), 'avatar': _0x57ec14[_0x1aac05(0x391)][_0x1aac05(0x270)](_0x41b61c => _0x41b61c['id'] === _0x565ab)?.['avatar'] || _0xae68c9[_0x1aac05(0x7df)][_0x1aac05(0x6dd)][_0x1aac05(0x944)](0x5, -0x2)[_0x1aac05(0x254)](/'/g, '') || _0x1f7795 }; _0xae68c9[_0x1aac05(0x988)][_0x1aac05(0x8f0)] && (_0x1aac05(0x723) === 'xekMB' ? (_0x41f978[_0x1aac05(0x5b2)] = _0xae68c9['dataset'][_0x1aac05(0x8f0)], delete _0xae68c9[_0x1aac05(0x988)][_0x1aac05(0x8f0)]) : _0x4aca6a(_0xc8f994)); if (!_0x41f978[_0x1aac05(0x589)]) { if (_0x1aac05(0x17f) !== _0x1aac05(0x17f)) _0x410297 = _0x3687f5[_0x1aac05(0x589)], _0x30203a = _0x14f8d2['avatar']; else { _0x33f536(_0x1aac05(0x135)); return; } } if (_0x565ab) { if (_0x1aac05(0xb04) !== 'zgJxA') { const _0x1f81af = _0x57ec14[_0x1aac05(0x391)][_0x1aac05(0x270)](_0x23a7e2 => _0x23a7e2['id'] === _0x565ab); if (_0x1f81af) Object['assign'](_0x1f81af, _0x41f978); } else { _0x331492[_0x1aac05(0x4cf)](_0x1aac05(0x894)); return; } } else { const _0x5269c7 = { 'id': 'user_' + Date['now'](), ..._0x41f978 }; _0x57ec14[_0x1aac05(0x391)][_0x1aac05(0x1c5)](_0x5269c7), !_0x57ec14[_0x1aac05(0x422)] && (_0x57ec14[_0x1aac05(0x422)] = _0x5269c7['id']); } _0x203e68(), _0x33f536(_0x1aac05(0x973)), _0x59a745(), _0x52c85d('userProfileList', 'userProfile'); } async function _0x27d4e8() { const _0x5dd1cc = _0x3b2836; if (_0x5dd1cc(0x4ba) !== 'YBxZP') _0x45ffce(_0x584805), _0x2fa9a3[_0x5dd1cc(0x6a0)]('canplaythrough', _0x5bcd8b), _0x123575[_0x5dd1cc(0x6a0)]('error', _0x554684), _0x1ff407['src'] = '', _0x478338[_0x5dd1cc(0x318)](); else { const _0x18420f = document[_0x5dd1cc(0x67e)](_0x5dd1cc(0x826))['value']; if (!_0x18420f) return; if (_0x57ec14[_0x5dd1cc(0x391)][_0x5dd1cc(0xb1e)] <= 0x1) { if (_0x5dd1cc(0x901) === 'ftxyq') _0x31c448 = _0x16f7d0(() => { const _0x4390ef = _0x5dd1cc; if (_0x34720e[_0x4390ef(0xa1e)] === _0x4390ef(0x44d)) _0x48fa48['preventDefault'](); _0xf9b4d1(_0x2ff6aa); }, 0x320); else { _0x33f536(_0x5dd1cc(0x55e)); return; } } const _0x13337a = await _0x156ce5(_0x5dd1cc(0x59b)); _0x13337a && (_0x57ec14['userProfiles'] = _0x57ec14[_0x5dd1cc(0x391)][_0x5dd1cc(0x1a0)](_0x1b8bcf => _0x1b8bcf['id'] !== _0x18420f), _0x57ec14[_0x5dd1cc(0x422)] === _0x18420f && (_0x57ec14[_0x5dd1cc(0x422)] = _0x57ec14[_0x5dd1cc(0x391)][0x0]['id']), _0x57ec14[_0x5dd1cc(0x313)][_0x5dd1cc(0x5e2)](_0x1c8426 => { const _0x24b363 = _0x5dd1cc; _0x1c8426[_0x24b363(0x347)] === _0x18420f && (_0x1c8426[_0x24b363(0x347)] = _0x57ec14[_0x24b363(0x422)]); }), _0x203e68(), _0x33f536('用户已删除。'), _0x59a745(), _0x52c85d('userProfileList', _0x5dd1cc(0xaf7))); } } function _0x114bb8() { const _0x36f8b5 = _0x3b2836, _0x5e0d05 = document[_0x36f8b5(0x67e)](_0x36f8b5(0xa7b)); _0x5e0d05[_0x36f8b5(0x282)] = ''; if (_0x57ec14['worldBooks'][_0x36f8b5(0xb1e)] === 0x0) { _0x5e0d05[_0x36f8b5(0x282)] = _0x36f8b5(0x6f8); return; } _0x57ec14['worldBooks']['forEach'](_0x2213d6 => { const _0x49eaca = _0x36f8b5, _0x1f777a = document['createElement'](_0x49eaca(0x962)); _0x1f777a[_0x49eaca(0x226)] = _0x49eaca(0x8fe), _0x1f777a['dataset']['id'] = _0x2213d6['id'], _0x1f777a[_0x49eaca(0x282)] = _0x49eaca(0x492) + _0x2213d6['name'] + _0x49eaca(0x65f) + _0x2213d6[_0x49eaca(0x6fd)][_0x49eaca(0x5ae)](0x0, 0x64) + _0x49eaca(0x91d), _0x1f777a[_0x49eaca(0x990)]('click', () => _0x20bb48(_0x2213d6['id'])), _0x5e0d05[_0x49eaca(0x6b3)](_0x1f777a); }); } function _0x20bb48(_0x2e12b1 = null) { const _0x47d9cd = _0x3b2836; _0x52c85d(_0x47d9cd(0x17e), _0x47d9cd(0x128)); if (_0x2e12b1) { const _0x1a15fd = _0x57ec14[_0x47d9cd(0x9cd)]['find'](_0x81595a => _0x81595a['id'] === _0x2e12b1); if (!_0x1a15fd) return; document[_0x47d9cd(0x67e)]('editing-world-book-id')[_0x47d9cd(0x552)] = _0x1a15fd['id'], document['getElementById'](_0x47d9cd(0x1e2))['textContent'] = _0x47d9cd(0x20b), document[_0x47d9cd(0x67e)](_0x47d9cd(0x8bb))[_0x47d9cd(0x552)] = _0x1a15fd[_0x47d9cd(0x589)], document[_0x47d9cd(0x67e)]('world-book-edit-content')[_0x47d9cd(0x552)] = _0x1a15fd['content']; } else document[_0x47d9cd(0x67e)](_0x47d9cd(0x3fc))['value'] = '', document[_0x47d9cd(0x67e)](_0x47d9cd(0x1e2))['textContent'] = '新建条目', document['getElementById']('world-book-edit-name')[_0x47d9cd(0x552)] = '', document[_0x47d9cd(0x67e)]('world-book-edit-content')[_0x47d9cd(0x552)] = ''; } function _0x46261f() { const _0x2bfbc0 = _0x3b2836, _0x5565d7 = document[_0x2bfbc0(0x67e)](_0x2bfbc0(0x3fc))[_0x2bfbc0(0x552)], _0x2b73a9 = document[_0x2bfbc0(0x67e)](_0x2bfbc0(0x8bb))[_0x2bfbc0(0x552)]['trim'](), _0x412181 = document[_0x2bfbc0(0x67e)]('world-book-edit-content')[_0x2bfbc0(0x552)][_0x2bfbc0(0x3dd)](); if (!_0x2b73a9 || !_0x412181) { _0x33f536(_0x2bfbc0(0x2e5)); return; } if (_0x5565d7) { const _0x49c2b5 = _0x57ec14[_0x2bfbc0(0x9cd)][_0x2bfbc0(0x270)](_0x2c1cbb => _0x2c1cbb['id'] === _0x5565d7); _0x49c2b5 && (_0x49c2b5[_0x2bfbc0(0x589)] = _0x2b73a9, _0x49c2b5['content'] = _0x412181); } else { if (_0x2bfbc0(0x1d3) !== _0x2bfbc0(0x1d3)) _0x23ad79[_0x2bfbc0(0x67e)](_0x2bfbc0(0x65b))[_0x2bfbc0(0x45f)] = _0x212a8a[_0x2bfbc0(0x5b2)] || _0x176932; else { const _0x402eb2 = { 'id': _0x2bfbc0(0x87f) + Date[_0x2bfbc0(0x2c5)](), 'name': _0x2b73a9, 'content': _0x412181 }; _0x57ec14['worldBooks'][_0x2bfbc0(0x1c5)](_0x402eb2); } } _0x203e68(), _0x33f536(_0x2bfbc0(0x5b9)), _0x114bb8(), _0x52c85d(_0x2bfbc0(0x128), _0x2bfbc0(0x17e)); } async function _0x7dde82() { const _0x18b9d4 = _0x3b2836, _0x43226f = document['getElementById'](_0x18b9d4(0x3fc))[_0x18b9d4(0x552)]; if (!_0x43226f) return; const _0x1126d4 = await _0x156ce5(_0x18b9d4(0x82f)); _0x1126d4 && (_0x57ec14[_0x18b9d4(0x9cd)] = _0x57ec14[_0x18b9d4(0x9cd)][_0x18b9d4(0x1a0)](_0x4b8e39 => _0x4b8e39['id'] !== _0x43226f), _0x57ec14[_0x18b9d4(0x862)][_0x18b9d4(0x5e2)](_0xbbb6e3 => { const _0x562f1b = _0x18b9d4; if ('BokXM' !== _0x562f1b(0x6ce)) { if (_0x1af7b1) _0x53076b(_0x2100f5); _0x452e59 = null, _0x5a8920[_0x562f1b(0xae0)] = [], _0x1cb06d[_0x562f1b(0x601)] = null, _0x16d7f8[_0x562f1b(0x67e)](_0x562f1b(0xb0f))[_0x562f1b(0x7df)][_0x562f1b(0x741)] = _0x562f1b(0x527), _0x209c6b[_0x562f1b(0x413)] = null, _0x57eaeb(), _0x16cd3d('meetingList', _0x562f1b(0x22a)); } else _0xbbb6e3[_0x562f1b(0x48e)] && (_0xbbb6e3[_0x562f1b(0x48e)] = _0xbbb6e3[_0x562f1b(0x48e)][_0x562f1b(0x1a0)](_0x302a50 => _0x302a50 !== _0x43226f)); }), _0x203e68(), _0x33f536('条目已删除。'), _0x114bb8(), _0x52c85d(_0x18b9d4(0x128), _0x18b9d4(0x17e))); } function _0x1164ee() { const _0x2442c4 = _0x3b2836; if (_0x2442c4(0x1c0) === _0x2442c4(0x1c0)) { const _0x477959 = document['getElementById']('world-book-checkboxes-container'), _0x3ba898 = _0x477959[_0x2442c4(0x74c)]('input:checked'), _0x1a00a5 = document[_0x2442c4(0x433)](_0x2442c4(0x90f)); if (_0x3ba898[_0x2442c4(0xb1e)] === 0x0) { if (_0x2442c4(0x4ce) === _0x2442c4(0x393)) { const _0x3835cb = _0x2ef4de['createElement'](_0x2442c4(0x962)); _0x3835cb[_0x2442c4(0x226)] = _0x2442c4(0x914), _0x3835cb['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x3cb281[_0x2442c4(0x934)] + _0x2442c4(0x6d0) + _0x40e9d7['name'] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x3835cb[_0x2442c4(0x990)]('click', () => _0x599209(_0x332f4d['id'], _0x27bca0[_0x2442c4(0x589)])), _0x52cd20[_0x2442c4(0x905)] === 'dock' ? _0x2804f8[_0x2442c4(0x6b3)](_0x3835cb) : _0xe2318[_0x2442c4(0x6b3)](_0x3835cb); } else _0x1a00a5[_0x2442c4(0x52e)] = _0x2442c4(0x772); } else _0x3ba898[_0x2442c4(0xb1e)] > 0x2 ? _0x1a00a5[_0x2442c4(0x52e)] = '已选择\x20' + _0x3ba898['length'] + '\x20项' : _0x1a00a5[_0x2442c4(0x52e)] = Array['from'](_0x3ba898)['map'](_0x4fd07b => _0x4fd07b[_0x2442c4(0xaae)][_0x2442c4(0x52e)][_0x2442c4(0x3dd)]())[_0x2442c4(0x9f9)]('、'); } else _0x5135e5[_0x2442c4(0x8a1)][_0x2442c4(0xad0)] = null, _0x20194b(), _0xd74672(), _0x250a47('小组件背景已恢复默认。'); } async function _0x12bad2(_0xc72adb) { const _0x52c20a = _0x3b2836; if (_0x52c20a(0x463) !== 'nBetR') { const _0x59c6b9 = _0x57ec14['chats'][_0x52c20a(0x270)](_0x591ee6 => _0x591ee6['id'] === _0xc72adb); if (!_0x59c6b9 || _0x59c6b9[_0x52c20a(0xa1e)] !== _0x52c20a(0x7d1)) return; document[_0x52c20a(0x67e)](_0x52c20a(0x4d0))[_0x52c20a(0x552)] = _0x59c6b9[_0x52c20a(0x589)] || '', _0x542129('group-settings-bind-user'), document[_0x52c20a(0x67e)](_0x52c20a(0x7f0))['value'] = _0x59c6b9[_0x52c20a(0x347)] || _0x57ec14[_0x52c20a(0x422)]; const _0x406d93 = document[_0x52c20a(0x67e)](_0x52c20a(0xb05)); _0x406d93[_0x52c20a(0x282)] = '', _0x57ec14[_0x52c20a(0x9cd)][_0x52c20a(0x5e2)](_0x523b83 => { const _0x6e8dbd = _0x52c20a, _0x165ad1 = _0x59c6b9[_0x6e8dbd(0x48e)]?.[_0x6e8dbd(0x9e5)](_0x523b83['id']), _0x166e3b = document[_0x6e8dbd(0x494)](_0x6e8dbd(0x358)); _0x166e3b[_0x6e8dbd(0x282)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x523b83['id'] + '\x22\x20' + (_0x165ad1 ? _0x6e8dbd(0x262) : '') + '>\x20' + _0x523b83[_0x6e8dbd(0x589)], _0x406d93[_0x6e8dbd(0x6b3)](_0x166e3b); }), _0x19c9a1(); const _0x1e0d96 = document[_0x52c20a(0x67e)](_0x52c20a(0x6e1)), _0x328905 = document[_0x52c20a(0x67e)]('group-bg-preview'); _0x328905[_0x52c20a(0x7df)]['backgroundImage'] = '', _0x2995f2(_0x52c20a(0x4cc) + _0xc72adb)[_0x52c20a(0x69b)](_0x40549e => { const _0x2f8abd = _0x52c20a; _0x2f8abd(0x50d) !== 'GOYEd' ? (_0x1fb2cd[_0x2f8abd(0x7df)]['backgroundImage'] = '', _0x2dae55[_0x2f8abd(0x7df)]['color'] = '', _0x579507['querySelectorAll'](_0x2f8abd(0x9af))[_0x2f8abd(0x5e2)](_0x5e6e6f => { const _0x19628e = _0x2f8abd; _0x5e6e6f['style'][_0x19628e(0x472)] = ''; })) : _0x1e0d96[_0x2f8abd(0x45f)] = _0x40549e ? URL[_0x2f8abd(0x709)](_0x40549e) : _0x520817; }), _0x2995f2(_0x52c20a(0x7e2) + _0xc72adb)[_0x52c20a(0x69b)](_0x78348 => { const _0x39921d = _0x52c20a; if (_0x39921d(0x1e3) === 'KISrV') { const _0x155ed0 = _0x1fd2bd(_0x41734c[_0x39921d(0x552)]); if (_0x2d645a(_0x155ed0) || _0x155ed0 <= 0x0) { _0x2d1d05(_0x39921d(0x371)); return; } const _0x3923c1 = _0x447922(); let _0x26304e = null; _0x3923c1[_0x39921d(0xa1e)] === 'group' ? _0x26304e = _0x419a96[_0x39921d(0x552)] : _0x26304e = _0x3923c1[_0x39921d(0x69c)][0x0]; const _0x4a9895 = _0x13aa91(_0x3923c1['id']), _0x1dd21f = { 'role': _0x39921d(0x2b3), 'type': _0x39921d(0x67c), 'content': _0x39921d(0x9a4) + (_0x4346dc(_0x26304e)?.[_0x39921d(0x589)] || '未知') + _0x39921d(0x774) + _0x155ed0 + ']', 'amount': _0x155ed0, 'recipientId': _0x26304e, 'senderId': _0x4a9895['id'], 'timestamp': _0x365fdd['now']() }; _0x3c3571[_0x39921d(0xa8a)][_0x39921d(0x1c5)](_0x1dd21f), _0x2c7539(), _0xc99478(), _0xecedb8[_0x39921d(0x32b)]['remove'](_0x39921d(0x716)); } else { if (_0x78348) _0x328905[_0x39921d(0x7df)][_0x39921d(0x6dd)] = 'url(\x27' + URL[_0x39921d(0x709)](_0x78348) + '\x27)'; } }), _0x52c85d(_0x52c20a(0x76b), _0x52c20a(0xa06)); } else _0x2fc735[_0x52c20a(0x6b3)](_0x1e5ecd); } async function _0x441584() { const _0x1815c7 = _0x3b2836, _0x2d7b5d = _0x3a6dc0(); if (!_0x2d7b5d || _0x2d7b5d['type'] !== _0x1815c7(0x7d1)) return; const _0x265c4b = document[_0x1815c7(0x67e)](_0x1815c7(0x4d0))[_0x1815c7(0x552)][_0x1815c7(0x3dd)](); if (!_0x265c4b) { _0x33f536('群聊名称不能为空！'); return; } _0x2d7b5d[_0x1815c7(0x589)] = _0x265c4b; const _0x2fd16a = document[_0x1815c7(0x74c)](_0x1815c7(0x5c0)); _0x2d7b5d[_0x1815c7(0x48e)] = Array[_0x1815c7(0x4df)](_0x2fd16a)['map'](_0x9eb6be => _0x9eb6be[_0x1815c7(0x552)]), _0x2d7b5d[_0x1815c7(0x347)] = document['getElementById'](_0x1815c7(0x7f0))[_0x1815c7(0x552)]; const _0x38a6d7 = document[_0x1815c7(0x67e)](_0x1815c7(0x46e))[_0x1815c7(0x7e7)][0x0], _0x1130c1 = document[_0x1815c7(0x67e)](_0x1815c7(0x6cd))['files'][0x0]; if (_0x38a6d7) await _0x59767c('group_avatar_' + _0x2d7b5d['id'], _0x38a6d7); if (_0x1130c1) await _0x59767c(_0x1815c7(0x7e2) + _0x2d7b5d['id'], _0x1130c1); _0x203e68(), _0x2db3fa(), await _0x1721c6(), _0x33f536(_0x1815c7(0xaa7)), _0x52c85d(_0x1815c7(0xa06), _0x1815c7(0x76b)); } function _0x19c9a1() { const _0x39845e = _0x3b2836; if (_0x39845e(0x743) !== _0x39845e(0x767)) { const _0x15ec56 = document[_0x39845e(0x67e)]('group-world-book-checkboxes'), _0x82ff86 = _0x15ec56[_0x39845e(0x74c)](_0x39845e(0x52c)), _0x19e9be = document[_0x39845e(0x433)](_0x39845e(0x520)); if (_0x82ff86[_0x39845e(0xb1e)] === 0x0) _0x19e9be['textContent'] = _0x39845e(0x772); else _0x82ff86[_0x39845e(0xb1e)] > 0x2 ? _0x19e9be[_0x39845e(0x52e)] = _0x39845e(0x68f) + _0x82ff86['length'] + '\x20项' : _0x19e9be[_0x39845e(0x52e)] = Array[_0x39845e(0x4df)](_0x82ff86)[_0x39845e(0x937)](_0x2d46cf => _0x2d46cf[_0x39845e(0xaae)][_0x39845e(0x52e)][_0x39845e(0x3dd)]())[_0x39845e(0x9f9)]('、'); } else _0x29b971(_0x4b07c3 - 0x1); } async function _0x49db3e() { const _0x24e382 = _0x3b2836, _0xe87691 = _0x3a6dc0(), _0x3f5e93 = (_0xe87691?.[_0x24e382(0x69c)] || [])['map'](_0x382342)['filter'](Boolean), _0xf7e946 = _0xb1d08(_0xe87691['id']); if (!_0xe87691 || _0xe87691[_0x24e382(0xa1e)] !== 'group' || _0x3f5e93[_0x24e382(0xb1e)] < 0x2) return null; const _0x371898 = _0xe87691[_0x24e382(0x48e)] && _0xe87691[_0x24e382(0x48e)][_0x24e382(0xb1e)] > 0x0 ? _0x24e382(0x72a) + _0xe87691[_0x24e382(0x48e)][_0x24e382(0x937)](_0x3cacb4 => _0x57ec14[_0x24e382(0x9cd)]['find'](_0x4d51ec => _0x4d51ec['id'] === _0x3cacb4))[_0x24e382(0x1a0)](Boolean)['map'](_0x358b98 => _0x24e382(0xa9d) + _0x358b98[_0x24e382(0x589)] + '\x0a' + _0x358b98[_0x24e382(0x6fd)])[_0x24e382(0x9f9)]('') : '', _0x69c70c = _0xf7e946['persona'] ? _0x24e382(0x2e0) + _0xf7e946[_0x24e382(0x589)] + _0x24e382(0x5bc) + _0xf7e946[_0x24e382(0x7dc)] : ''; let _0xa27e98 = ''; const _0x47097a = new Date(), _0x4dd062 = _0x57ec14['conversationHistory']['at'](-0x1); _0xa27e98 += _0x24e382(0x3a0) + _0x47097a[_0x24e382(0x97a)]('zh-CN', { 'dateStyle': _0x24e382(0x575), 'timeStyle': _0x24e382(0x930) }); if (_0x4dd062) { if ('yRCHL' !== _0x24e382(0x1c4)) { _0x10f192['classList'][_0x24e382(0x536)](_0x24e382(0x4e1)); const _0x446a97 = _0x1248c7[_0x24e382(0x494)](_0x24e382(0x545)); _0x446a97[_0x24e382(0x45f)] = _0x197154, _0x446a97[_0x24e382(0x32b)][_0x24e382(0x536)](_0x24e382(0x976)), _0x36a5fe[_0x24e382(0x6b3)](_0x446a97); } else { const _0x16d9f7 = new Date(_0x4dd062[_0x24e382(0x665)]), _0x584661 = Math[_0x24e382(0x5a8)]((_0x47097a - _0x16d9f7) / (0x3e8 * 0x3c)); if (_0x584661 < 0x5) _0xa27e98 += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x584661 < 0x78) _0xa27e98 += _0x24e382(0xae2) + _0x584661 + _0x24e382(0x6c5); else { if (_0x24e382(0x308) === _0x24e382(0x96e)) _0x3722bc[_0x24e382(0x41b)]['setMonth'](_0xbe7067[_0x24e382(0x41b)][_0x24e382(0x4b8)]() + 0x1), _0xe97178(); else { const _0x25ccc9 = Math[_0x24e382(0x5a8)](_0x584661 / 0x3c); if (_0x25ccc9 < 0x30) _0xa27e98 += _0x24e382(0xae2) + _0x25ccc9 + _0x24e382(0x5b5); else _0xa27e98 += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x24e382(0x5a8)](_0x25ccc9 / 0x18) + _0x24e382(0x7c5); } } } } } else _0xa27e98 += _0x24e382(0x3ee); const _0x22b041 = [..._0x57ec14[_0x24e382(0xa8a)]][_0x24e382(0x62b)]()[_0x24e382(0x270)](_0x25703a => _0x25703a[_0x24e382(0x1a4)] === _0x24e382(0x2b3))?.[_0x24e382(0x6fd)] || '', _0x1e0b7c = _0x668632(_0xe87691, _0x22b041), _0x392961 = _0x57ec14[_0x24e382(0xa8a)][_0x24e382(0x944)](-0x78), _0x48b162 = _0x397bb6['map'](_0x2887e0 => _0x2887e0[_0x24e382(0x589)]), _0x4a2bd7 = _0x1e789a(), _0x1859ad = _0x3f5e93['map'](_0x2cfeb2 => { const _0x1ab369 = _0x24e382; if (_0x1ab369(0x642) === _0x1ab369(0x642)) { const { omniText: _0x12d0e8 } = _0x91c93b(_0x2cfeb2['id'], _0xe87691['id']), _0x383a19 = _0x4ca835(_0x2cfeb2['id']), _0x223570 = _0x2cfeb2[_0x1ab369(0x48e)] && _0x2cfeb2['linkedWorldBookIds'][_0x1ab369(0xb1e)] > 0x0 ? '\x0a\x0a#\x20' + _0x2cfeb2[_0x1ab369(0x589)] + _0x1ab369(0x16f) + _0x2cfeb2[_0x1ab369(0x48e)][_0x1ab369(0x937)](_0x163eb6 => _0x57ec14[_0x1ab369(0x9cd)]['find'](_0x484f99 => _0x484f99['id'] === _0x163eb6))['filter'](Boolean)['map'](_0x265f58 => '\x0a##\x20条目:\x20' + _0x265f58['name'] + '\x0a' + _0x265f58[_0x1ab369(0x6fd)])['join']('') : ''; let _0x4d702 = _0x1ab369(0x5b4) + _0x2cfeb2['name'] + ')\x20的专属时间锚点\x0a'; const _0x3a1b9f = _0xdf03ca(_0x2cfeb2['id']), _0x27fc39 = new Date(); if (_0x3a1b9f) { const _0x1a3500 = new Date(_0x3a1b9f[_0x1ab369(0x665)]); _0x4d702 += _0x1ab369(0x3f6) + _0xf7e946[_0x1ab369(0x589)] + _0x1ab369(0x4d8) + _0x456df6(_0x1a3500) + '\x0a'; const _0x4e0046 = _0x27fc39[_0x1ab369(0x3df)]() === _0x1a3500[_0x1ab369(0x3df)](), _0x3e66c9 = new Date(); _0x3e66c9[_0x1ab369(0x6b4)](_0x27fc39[_0x1ab369(0x4f3)]() - 0x1); const _0xe911ae = _0x3e66c9[_0x1ab369(0x3df)]() === _0x1a3500['toDateString'](); if (_0x4e0046) _0x4d702 += '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a'; else _0xe911ae ? _0x1ab369(0x7a9) !== _0x1ab369(0x7a9) ? _0xc2337d = _0x80dcab[_0x1ab369(0x5a9)](..._0x59d9cc[_0x1ab369(0x216)][_0x1ab369(0x937)](_0x54c369 => _0x54c369['timestamp'])) : _0x4d702 += _0x1ab369(0x97e) : _0x4d702 += _0x1ab369(0x693); } else _0x4d702 += _0x1ab369(0x73b) + _0xf7e946[_0x1ab369(0x589)] + _0x1ab369(0x543); return { 'id': _0x2cfeb2['id'], 'name': _0x2cfeb2[_0x1ab369(0x589)], 'persona': _0x2cfeb2[_0x1ab369(0x7dc)] || _0x1ab369(0xa3f), 'memory': _0x12d0e8 + _0x383a19 + _0x223570 + _0x4d702 }; } else { if (_0x334aae[_0x1ab369(0x1a4)] === 'user' && _0x58df41[_0x1ab369(0x3e9)]) return { 'role': _0x1ab369(0x2b3), 'content': [{ 'type': _0x1ab369(0x9de), 'text': _0x5604c5[_0x1ab369(0x6fd)] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0xbfd378[_0x1ab369(0x3e9)], 'detail': _0x1ab369(0x1d0) } }] }; return { 'role': _0x5da434[_0x1ab369(0x1a4)], 'content': _0x4df5ae[_0x1ab369(0x6fd)] }; } }), _0x55df79 = 0x5, _0x18c9bc = 0xc, _0x23fdfe = _0x24e382(0xa74)[_0x24e382(0x3dd)](), _0x4ff10e = { 'instruction': (_0x24e382(0x563) + (_0xf7e946[_0x24e382(0x589)] || '用户') + _0x24e382(0x80c) + (_0xf7e946[_0x24e382(0x589)] || '用户') + _0x24e382(0x584) + _0x55df79 + _0x24e382(0x4a6) + _0x18c9bc + _0x24e382(0x8a5) + (_0xf7e946[_0x24e382(0x589)] || '用户') + _0x24e382(0x3fd) + _0xa27e98 + '\x20\x0a' + _0x69c70c + '\x0a' + _0x371898 + _0x24e382(0x45d) + _0x4a2bd7 + '\x0a')['trim'](), 'personas': _0x1859ad, 'mentioned': _0x1e0b7c ? { 'id': _0x1e0b7c['id'], 'name': _0x1e0b7c[_0x24e382(0x589)] } : null, 'stickerList': _0x48b162 }, _0x178115 = { 'type': _0x24e382(0x204), 'properties': { 'events': { 'type': _0x24e382(0x4b7), 'items': { 'type': 'object', 'required': [_0x24e382(0x972), _0x24e382(0x12a)], 'properties': { 'senderId': { 'type': _0x24e382(0x5b8) }, 'kind': { 'type': 'string', 'enum': [_0x24e382(0x9de), 'sticker', _0x24e382(0x89f)] }, 'content': { 'type': _0x24e382(0x5b8) }, 'sticker': { 'type': _0x24e382(0x5b8) }, 'songName': { 'type': 'string' }, 'artist': { 'type': _0x24e382(0x5b8) } } } } }, 'required': ['events'] }, _0x4650b8 = []; _0x4650b8[_0x24e382(0x1c5)]({ 'role': _0x24e382(0x70d), 'content': _0x23fdfe }); for (const _0x5c32f6 of _0x392961) { const _0x5e71ce = _0x5c32f6[_0x24e382(0x1a4)] === 'ai' || _0x5c32f6[_0x24e382(0x1a4)] === 'assistant' ? _0x24e382(0x6f7) : _0x24e382(0x2b3); let _0x4c31a5 = { 'role': _0x5e71ce, 'content': _0x5c32f6['content'] }, _0x4404b0 = !!_0x5c32f6[_0x24e382(0x6fd)], _0x3be16b = null; if (_0x5c32f6[_0x24e382(0x3e9)]) { if (_0x24e382(0xa7d) === _0x24e382(0xa7d)) _0x3be16b = _0x5c32f6[_0x24e382(0x3e9)]; else { _0x4a35ef(_0x24e382(0x770)); return; } } else { if (_0x5c32f6[_0x24e382(0x704)]) try { const _0x56c394 = await _0x2995f2(_0x5c32f6[_0x24e382(0x704)]); if (_0x56c394) { if ('eRXtC' !== _0x24e382(0x87d)) _0x3be16b = await _0x2a338e(_0x56c394); else { let _0xbb6a4c = null; if (_0x282826?.[_0x24e382(0xa1e)] === 'private') _0xbb6a4c = _0x56a6bc; else _0x2bc9a9?.[_0x24e382(0xa1e)] === _0x24e382(0x7d1) && _0x547e17 && (_0xbb6a4c = _0x3b0599(_0xea6c38)); _0xbb6a4c && (_0x2f6b38 = _0xbb6a4c[_0x24e382(0x7a6)] || ''); } } } catch (_0x3924a9) { console[_0x24e382(0x390)]('在准备群聊API数据时，读取图片失败:', _0x3924a9); } } _0x3be16b && (_0x4c31a5[_0x24e382(0x3e9)] = _0x3be16b, _0x4404b0 = !![]), _0x4404b0 && _0x4650b8[_0x24e382(0x1c5)](_0x4c31a5); } _0x4650b8['push']({ 'role': _0x24e382(0x2b3), 'content': '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a' + JSON['stringify'](_0x178115) + _0x24e382(0x936) + JSON[_0x24e382(0x7d5)](_0x4ff10e) }); try { const _0xfa08ca = await _0x5e65cf(_0x4650b8, { 'json': !![] }); if (!_0xfa08ca) return null; let _0x50ae71 = _0xfa08ca[_0x24e382(0x3dd)](); const _0x2e1b72 = _0x50ae71[_0x24e382(0xa9e)](/```json([\s\S]*?)```/i); if (_0x2e1b72) _0x50ae71 = _0x2e1b72[0x1][_0x24e382(0x3dd)](); _0x50ae71 = _0xf15e47(_0x50ae71); let _0x14afee = null; try { _0x14afee = JSON[_0x24e382(0x258)](_0x50ae71); } catch (_0x2bb6bd) { _0x24e382(0x649) === 'eQyJC' ? (console[_0x24e382(0x390)]('JSON\x20解析失败!\x20错误原因:', _0x2bb6bd), console[_0x24e382(0x390)]('收到的原始、有问题的文本:', _0x50ae71)) : (_0x13395c(), _0x7ec51('home', _0x24e382(0xa06))); } if (!_0x14afee || !Array['isArray'](_0x14afee[_0x24e382(0x489)])) return null; return _0x14afee = _0x5db80e(_0x14afee, _0x3f5e93, _0x48b162), _0x14afee['events'] = _0x14afee[_0x24e382(0x489)]['slice'](0x0, _0x18c9bc), _0x14afee[_0x24e382(0x489)][_0x24e382(0xb1e)] ? _0x14afee : null; } catch (_0x4f3fec) { return _0x4f3fec[_0x24e382(0x589)] !== _0x24e382(0x807) && console[_0x24e382(0x390)](_0x24e382(0x105), _0x4f3fec), null; } } function _0x42bc5e() { const _0x2ae4cd = _0x3b2836, _0x104120 = document[_0x2ae4cd(0x67e)]('friend-circle-list-container'); _0x104120[_0x2ae4cd(0x282)] = ''; if (_0x57ec14[_0x2ae4cd(0xade)][_0x2ae4cd(0xb1e)] === 0x0) { _0x104120[_0x2ae4cd(0x282)] = _0x2ae4cd(0xa67); return; } _0x57ec14['friendCircles'][_0x2ae4cd(0x5e2)](_0x3a811b => { const _0x4db031 = _0x2ae4cd, _0x7d0029 = _0x57ec14['userProfiles'][_0x4db031(0x270)](_0x40fcc7 => _0x40fcc7['id'] === _0x3a811b[_0x4db031(0x347)]) || { 'name': _0x4db031(0x9f5) }, _0x4240e5 = document['createElement'](_0x4db031(0x962)); _0x4240e5['className'] = _0x4db031(0x8fe), _0x4240e5['dataset']['id'] = _0x3a811b['id'], _0x4240e5[_0x4db031(0x282)] = _0x4db031(0x492) + _0x3a811b[_0x4db031(0x589)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x7d0029[_0x4db031(0x589)] + _0x4db031(0x598) + _0x3a811b[_0x4db031(0x434)]['length'] + _0x4db031(0x346), _0x4240e5[_0x4db031(0x990)](_0x4db031(0x821), () => _0x32dba5(_0x3a811b['id'])), _0x104120[_0x4db031(0x6b3)](_0x4240e5); }); } function _0x50e358(_0x3aca4d = null) { const _0x4e4ec2 = _0x3b2836; if (_0x4e4ec2(0x5f0) !== _0x4e4ec2(0x6f4)) { const _0x185caf = document[_0x4e4ec2(0x67e)](_0x4e4ec2(0xa7f)), _0x3d07e6 = document['getElementById'](_0x4e4ec2(0xa5b)), _0x1547b4 = document[_0x4e4ec2(0x67e)]('friend-circle-member-selection'), _0x5027e7 = document['getElementById'](_0x4e4ec2(0x78e)), _0x19375f = document[_0x4e4ec2(0x67e)](_0x4e4ec2(0x234)), _0x4aa2d3 = document[_0x4e4ec2(0x67e)](_0x4e4ec2(0xa92)); _0x542129(_0x4e4ec2(0xa5b)), _0x1547b4['innerHTML'] = '', _0x57ec14[_0x4e4ec2(0x862)][_0x4e4ec2(0x5e2)](_0xf0e73f => { const _0x220f81 = _0x4e4ec2, _0x1d0bc2 = document[_0x220f81(0x494)](_0x220f81(0x962)); _0x1d0bc2['className'] = _0x220f81(0x62a), _0x1d0bc2['innerHTML'] = _0x220f81(0x190) + _0xf0e73f['id'] + _0x220f81(0x858) + _0xf0e73f['id'] + _0x220f81(0x3f4) + (_0xf0e73f[_0x220f81(0x5b2)] || _0x520817) + _0x220f81(0x500) + _0xf0e73f['id'] + _0x220f81(0xa0e) + _0xf0e73f[_0x220f81(0x589)] + '</label>\x0a\x20\x20\x20\x20', _0x1547b4[_0x220f81(0x6b3)](_0x1d0bc2); }); if (_0x3aca4d) { if ('FFksI' !== 'RUbEb') { const _0x12396a = _0x57ec14[_0x4e4ec2(0xade)][_0x4e4ec2(0x270)](_0x3e1de2 => _0x3e1de2['id'] === _0x3aca4d); if (!_0x12396a) return; _0x5027e7[_0x4e4ec2(0x52e)] = _0x4e4ec2(0x3b7), _0x19375f[_0x4e4ec2(0x552)] = _0x12396a['id'], _0x185caf[_0x4e4ec2(0x552)] = _0x12396a[_0x4e4ec2(0x589)], _0x3d07e6[_0x4e4ec2(0x552)] = _0x12396a[_0x4e4ec2(0x347)], _0x4aa2d3[_0x4e4ec2(0x7df)][_0x4e4ec2(0x741)] = _0x4e4ec2(0x1f1), _0x12396a[_0x4e4ec2(0x434)][_0x4e4ec2(0x5e2)](_0xfa1729 => { const _0x2cbc8f = _0x4e4ec2, _0x2afbba = _0x1547b4['querySelector'](_0x2cbc8f(0x1c8) + _0xfa1729); if (_0x2afbba) _0x2afbba[_0x2cbc8f(0x262)] = !![]; }); } else _0x4cf403[_0x4e4ec2(0x589)] !== _0x4e4ec2(0x807) && (_0xacecdd['error']('获取AI响应失败:', _0x58736c), _0x11331c({ 'role': _0x4e4ec2(0x6f7), 'content': _0x4e4ec2(0x4d7) + _0x147fa3[_0x4e4ec2(0x332)] }, _0x3e580b[_0x4e4ec2(0xa8a)][_0x4e4ec2(0xb1e)] - 0x1)); } else _0x5027e7[_0x4e4ec2(0x52e)] = '新建好友圈', _0x19375f[_0x4e4ec2(0x552)] = '', _0x185caf[_0x4e4ec2(0x552)] = '好友圈\x20' + (_0x57ec14[_0x4e4ec2(0xade)][_0x4e4ec2(0xb1e)] + 0x1), _0x3d07e6[_0x4e4ec2(0x552)] = _0x57ec14[_0x4e4ec2(0x422)], _0x4aa2d3[_0x4e4ec2(0x7df)][_0x4e4ec2(0x741)] = _0x4e4ec2(0x527); _0x52c85d(_0x4e4ec2(0x8b7), _0x4e4ec2(0x82e)); } else { const _0x3e49bc = []; for (const _0x2fc335 of _0x34e4b2[_0x4e4ec2(0x756)](_0x34e8b8)) { const _0x46078f = _0x2fc335[_0x4e4ec2(0x1f8)](); if (_0x32f886[_0x4e4ec2(0x252)](_0x299176 => _0x46078f[_0x4e4ec2(0x2bd)](_0x299176))) { const _0x1f77d1 = _0x38e378[_0x2fc335]; if (typeof _0x1f77d1 === _0x4e4ec2(0x5b8)) _0x3e49bc['push'](_0x1f77d1); if (_0x5d4848[_0x4e4ec2(0x241)](_0x1f77d1)) _0x1f77d1[_0x4e4ec2(0x5e2)](_0x471c18 => { const _0x4d6cfc = _0x4e4ec2; if (typeof _0x471c18 === 'string') _0x3e49bc[_0x4d6cfc(0x1c5)](_0x471c18); }); } } if (_0x3e49bc['length']) return _0x3e49bc[_0x4e4ec2(0x9c7)](_0x592fcd)['slice'](0x0, 0x9); } } function _0x278cb5() { const _0x16f2ff = _0x3b2836, _0x1d4c1a = document[_0x16f2ff(0x67e)](_0x16f2ff(0x234))[_0x16f2ff(0x552)], _0x30a3f1 = document['getElementById'](_0x16f2ff(0xa7f))[_0x16f2ff(0x552)][_0x16f2ff(0x3dd)](), _0x2599d2 = document['getElementById']('friend-circle-edit-bind-user')['value'], _0x427e98 = Array[_0x16f2ff(0x4df)](document[_0x16f2ff(0x74c)](_0x16f2ff(0x2ad)))[_0x16f2ff(0x937)](_0x93f200 => _0x93f200[_0x16f2ff(0x988)]['id']); if (!_0x30a3f1) { if (_0x16f2ff(0x82b) !== 'axTLS') { _0x33f536('好友圈名称不能为空！'); return; } else { const _0x394040 = _0x5ab03d['transaction'](_0x55ee7e, _0x16f2ff(0x8cc)), _0x1b6297 = _0x394040[_0x16f2ff(0x6fe)](_0x55e463), _0x123890 = _0x1b6297[_0x16f2ff(0x751)](_0x2e28b3); _0x123890[_0x16f2ff(0x465)] = () => _0x4c4792(_0x123890[_0x16f2ff(0x20c)] ? _0x123890[_0x16f2ff(0x20c)][_0x16f2ff(0x253)] : null), _0x123890[_0x16f2ff(0x7e4)] = () => _0x3a99cc(_0x123890[_0x16f2ff(0x390)]); } } if (_0x427e98[_0x16f2ff(0xb1e)] === 0x0) { _0x33f536(_0x16f2ff(0x863)); return; } if (_0x1d4c1a) { const _0xe268f3 = _0x57ec14['friendCircles'][_0x16f2ff(0x270)](_0x4757b4 => _0x4757b4['id'] === _0x1d4c1a); if (_0xe268f3) { if (_0x16f2ff(0x2a9) !== _0x16f2ff(0x2a9)) { const _0x22ca49 = _0x45eb97['worldBooks']['find'](_0x2dcc03 => _0x2dcc03['id'] === _0x54d2ea); _0x22ca49 && (_0x22ca49[_0x16f2ff(0x589)] = _0x240b62, _0x22ca49['content'] = _0x23c139); } else _0xe268f3[_0x16f2ff(0x589)] = _0x30a3f1, _0xe268f3['boundUserProfileId'] = _0x2599d2, _0xe268f3[_0x16f2ff(0x434)] = _0x427e98; } } else { const _0x375f2c = { 'id': 'circle_' + Date['now'](), 'name': _0x30a3f1, 'boundUserProfileId': _0x2599d2, 'memberCharacterIds': _0x427e98, 'posts': [] }; _0x57ec14[_0x16f2ff(0xade)][_0x16f2ff(0x1c5)](_0x375f2c); } _0x203e68(), _0x33f536(_0x16f2ff(0x4cb)), _0x42bc5e(), _0x52c85d(_0x16f2ff(0x82e), _0x16f2ff(0x8b7)); } async function _0x14a70b() { const _0x50d633 = _0x3b2836; if (_0x50d633(0x39f) !== _0x50d633(0x2d8)) { const _0x1bcd1f = document[_0x50d633(0x67e)](_0x50d633(0x234))['value']; if (!_0x1bcd1f) return; const _0x102d62 = await _0x156ce5(_0x50d633(0x2b2)); _0x102d62 && (_0x57ec14[_0x50d633(0xade)] = _0x57ec14[_0x50d633(0xade)]['filter'](_0x1bbc5b => _0x1bbc5b['id'] !== _0x1bcd1f), _0x57ec14[_0x50d633(0x3b8)] === _0x1bcd1f && (_0x57ec14['activeFriendCircleId'] = null), _0x203e68(), _0x33f536(_0x50d633(0x8e7)), _0x42bc5e(), _0x52c85d('friendCircleList', _0x50d633(0x8b7))); } else { const _0x29022b = _0x5c58e2(_0x13941e['participantIds'][0x0]); _0x29022b ? (_0x56a2ce = _0x29022b['avatar'] || _0x40afad, _0x6ea335 = _0x29022b['name'] || _0x50d633(0x8b1), _0x1ec85f = _0x29022b[_0x50d633(0x94d)] || '私聊') : (_0x2b881c = _0x50d633(0x65e), _0x49c3b9 = '错误：找不到角色'); } } function _0x32dba5(_0x4a28ac) { const _0x3e0c56 = _0x3b2836; if (_0x3e0c56(0x93c) !== _0x3e0c56(0x9f8)) { _0x5da3d1(); const _0x3082ab = _0x57ec14[_0x3e0c56(0xade)][_0x3e0c56(0x270)](_0x1c3f92 => _0x1c3f92['id'] === _0x4a28ac); if (!_0x3082ab) return; _0x57ec14['activeFriendCircleId'] = _0x4a28ac, _0x203e68(), document[_0x3e0c56(0x67e)](_0x3e0c56(0x47c))[_0x3e0c56(0x52e)] = _0x3082ab[_0x3e0c56(0x589)], _0x17f7c8(), _0x52c85d(_0x3e0c56(0x89f), _0x3e0c56(0x82e)), _0x3fa020(); } else { _0x247043[_0x3e0c56(0xabb)]('JSON解析失败\x20(' + _0x1052cf['id'] + _0x3e0c56(0x8c5), _0x368be8['message']); try { _0x421699 = _0x261896(_0x32d484); if (!_0x438570) throw new _0x499b9d(_0x3e0c56(0x7b0)); _0x2b666e[_0x3e0c56(0x4cf)]('兼容模式成功，已将\x20' + _0x34c633['id'] + '\x20的旧格式数据翻译。'); } catch (_0x44b0a8) { throw _0xd2a403; } } } function _0x1585c6() { const _0x49e816 = _0x3b2836; if (!_0x57ec14[_0x49e816(0xade)] || _0x57ec14[_0x49e816(0xade)][_0x49e816(0xb1e)] === 0x0) { if (_0x49e816(0x376) === _0x49e816(0x376)) { console[_0x49e816(0x390)](_0x49e816(0x81c)); return; } else _0x12e7ff[_0x49e816(0x7df)][_0x49e816(0x6dd)] = _0x49e816(0x36b) + _0x428e4d[_0x49e816(0x709)](_0x666d34) + ')', _0x53b3f4[_0x49e816(0x7df)]['backgroundSize'] = _0x49e816(0xa4e), _0x5d449a[_0x49e816(0x7df)][_0x49e816(0xa75)] = _0x49e816(0x21e); } const _0x282791 = _0x57ec14[_0x49e816(0xade)][0x0]; if (_0x282791[_0x49e816(0x434)][_0x49e816(0xb1e)] < 0x2) { console[_0x49e816(0x390)](_0x49e816(0x209) + _0x282791[_0x49e816(0x589)] + _0x49e816(0x9c0)); return; } const _0x54bea0 = { 'id': _0x49e816(0x4f6) + Date[_0x49e816(0x2c5)](), 'authorType': _0x49e816(0x9bc), 'authorId': _0x282791[_0x49e816(0x434)][0x0], 'content': _0x49e816(0x644), 'timestamp': Date[_0x49e816(0x2c5)](), 'likes': [_0x282791[_0x49e816(0x434)][0x1]], 'comments': [{ 'commentId': 'c_' + Date['now'](), 'authorId': _0x282791[_0x49e816(0x434)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x282791[_0x49e816(0x216)][_0x49e816(0x1c5)](_0x54bea0), _0x203e68(), console['log'](_0x49e816(0x3b6) + _0x282791[_0x49e816(0x589)] + _0x49e816(0x5f6)), _0x33f536(_0x49e816(0x913)); } window[_0x3b2836(0x5d1)] = _0x1585c6; function _0x21ba23(_0x3ed78f) { const _0x7a98c4 = _0x3b2836; return _0x57ec14[_0x7a98c4(0x391)][_0x7a98c4(0x270)](_0x37737c => _0x37737c['id'] === _0x3ed78f); } function _0x58ea7f(_0x152b5c, _0x33e480 = '正在处理...') { const _0x517af2 = _0x3b2836, _0xb81f8e = document[_0x517af2(0x67e)](_0x517af2(0x68d)); let _0x1e2e24 = document[_0x517af2(0x67e)](_0x517af2(0x168)); if (_0x152b5c) { if (!_0x1e2e24) { if (_0x517af2(0x244) !== _0x517af2(0x244)) return _0x3ae513['userProfiles'][_0x517af2(0x270)](_0x27d481 => _0x27d481['id'] === _0x4d19dd); else _0x1e2e24 = document[_0x517af2(0x494)](_0x517af2(0x962)), _0x1e2e24['id'] = 'feed-loader', _0xb81f8e['appendChild'](_0x1e2e24); } _0x1e2e24['innerHTML'] = _0x517af2(0x293) + _0x33e480 + _0x517af2(0xafd), _0x1e2e24[_0x517af2(0x7df)][_0x517af2(0x741)] = _0x517af2(0x38c); } else _0x1e2e24 && (_0x1e2e24[_0x517af2(0x7df)][_0x517af2(0x741)] = _0x517af2(0x527)); } async function _0x2c5c9b() { const _0x51a80f = _0x3b2836, _0xfc43ed = _0x57ec14[_0x51a80f(0xade)][_0x51a80f(0x270)](_0x598b64 => _0x598b64['id'] === _0x57ec14['activeFriendCircleId']); if (!_0xfc43ed || _0x57ec14[_0x51a80f(0xa73)]) return; _0x58ea7f(!![], _0x51a80f(0x39a)), _0x57ec14[_0x51a80f(0xa73)] = !![]; try { if (_0x51a80f(0x801) === _0x51a80f(0x801)) { let _0x209f48 = Date[_0x51a80f(0x2c5)](); if (_0xfc43ed[_0x51a80f(0x216)] && _0xfc43ed[_0x51a80f(0x216)][_0x51a80f(0xb1e)] > 0x0) { if (_0x51a80f(0x412) === 'iRees') _0x209f48 = Math[_0x51a80f(0x5a9)](..._0xfc43ed[_0x51a80f(0x216)][_0x51a80f(0x937)](_0x30efb5 => _0x30efb5['timestamp'])); else try { const _0xb8ebd7 = _0x30687b['getItem'](_0x51a80f(0x59c) + _0x250121), _0x4dae0d = _0x484e87[_0x51a80f(0x258)](_0xb8ebd7 || '[]'); return _0x2def41[_0x51a80f(0x241)](_0x4dae0d) ? _0x4dae0d : []; } catch { return []; } } const _0x379123 = await _0x5cdc15(_0xfc43ed); if (!_0x379123 || _0x379123[_0x51a80f(0xb1e)] === 0x0) { _0x33f536('AI似乎没有想出任何新动态。'); return; } const _0xa2fdd3 = _0x379123[_0x51a80f(0x937)](async (_0x4e64e8, _0x5ea231) => { const _0x3ea656 = _0x51a80f; _0x58ea7f(!![], _0x3ea656(0x65d) + (_0x5ea231 + 0x1) + _0x3ea656(0xb21) + _0x379123[_0x3ea656(0xb1e)] + _0x3ea656(0x5e0)); const _0x531ddb = _0x209f48 + (_0x5ea231 + 0x1) * 0x3c * 0x3e8, _0x329db1 = { 'id': _0x3ea656(0x849) + _0x4e64e8['authorId'] + '_' + _0x531ddb, 'authorType': _0x3ea656(0x9bc), 'authorId': _0x4e64e8[_0x3ea656(0x5ac)], 'content': _0x4e64e8['postContent'], 'timestamp': _0x531ddb, 'likes': _0x4e64e8['likes'] || [], 'comments': (_0x4e64e8[_0x3ea656(0x999)] || [])['map']((_0x449514, _0x220e15) => ({ 'commentId': 'c_' + _0x531ddb + '_' + _0x220e15, 'authorId': _0x449514['authorId'], 'content': _0x449514[_0x3ea656(0x6fd)] })) }; if (_0x4e64e8[_0x3ea656(0x92a)] === 'music' && _0x4e64e8['songName'] && _0x4e64e8['artist']) { if (_0x3ea656(0x91b) !== _0x3ea656(0x91b)) { _0x2fd03e(_0x3ea656(0x697)); return; } else try { if (_0x3ea656(0x8ab) === 'JPEMs') { const _0x20e8fd = await _0x2c8c9c(_0x4e64e8[_0x3ea656(0x9cf)], _0x4e64e8[_0x3ea656(0xa16)]); _0x329db1['type'] = _0x3ea656(0x89f), _0x329db1[_0x3ea656(0x9cf)] = _0x4e64e8['songName'], _0x329db1[_0x3ea656(0xa16)] = _0x4e64e8[_0x3ea656(0xa16)], _0x329db1[_0x3ea656(0x605)] = _0x20e8fd[_0x3ea656(0xa4e)], _0x329db1[_0x3ea656(0x2ea)] = _0x20e8fd[_0x3ea656(0x609)]; } else _0x191e49 = _0x29223f[0x1]; } catch (_0x41c436) { console['error'](_0x3ea656(0x893), _0x41c436), _0x329db1['type'] = _0x3ea656(0x9de); } } else _0x3ea656(0x2fa) === 'TzcfF' ? (_0x5bfec5[_0x3ea656(0x390)](_0x3ea656(0x6fa) + _0xd5608d + ':', _0xf2ac63), _0xd606c9['style']['backgroundImage'] = _0x3ea656(0x527)) : _0x329db1['type'] = _0x3ea656(0x9de); return _0x329db1; }), _0x5b1b67 = await Promise[_0x51a80f(0x77b)](_0xa2fdd3); _0xfc43ed['posts'][_0x51a80f(0x1c5)](..._0x5b1b67), _0x203e68(); } else { if (!_0x2dc3f8[_0x51a80f(0x461)]) return _0x1583a3['userProfiles'][_0x51a80f(0x270)](_0x3aee3a => _0x3aee3a['id'] === _0xdc9b34[_0x51a80f(0x422)]) || _0x2bc7fa[_0x51a80f(0x391)][0x0]; const _0x2d2565 = _0x143b4e[_0x51a80f(0x313)][_0x51a80f(0x270)](_0x5d5972 => _0x5d5972[_0x51a80f(0xa1e)] === _0x51a80f(0x99c) && _0x5d5972['participantIds'][_0x51a80f(0x9e5)](_0x562176[_0x51a80f(0x461)])), _0x37bfa8 = _0x2d2565?.[_0x51a80f(0x347)] || _0xc8d2d7['activeUserProfileId']; return _0x35e8b3[_0x51a80f(0x391)]['find'](_0x5c8fa1 => _0x5c8fa1['id'] === _0x37bfa8) || _0x4ee20f[_0x51a80f(0x391)][0x0]; } } catch (_0x4351da) { console['error'](_0x51a80f(0x760), _0x4351da), _0x33f536(_0x51a80f(0x97f) + _0x4351da[_0x51a80f(0x332)]); } finally { _0x17f7c8(), _0x58ea7f(![]), _0x57ec14[_0x51a80f(0xa73)] = ![]; } } async function _0x5cdc15(_0x318c0a) { const _0x36bae5 = _0x3b2836, _0x191b1f = _0x318c0a[_0x36bae5(0x434)][_0x36bae5(0x937)](_0x5dfe45 => _0x382342(_0x5dfe45))[_0x36bae5(0x1a0)](Boolean); if (_0x191b1f['length'] === 0x0) return null; const _0x47cb5c = _0x1e789a(), _0x4b49af = _0x21ba23(_0x318c0a['boundUserProfileId']) || _0x57ec14['userProfiles'][0x0], _0x55f296 = _0x4b49af ? _0x36bae5(0x88a) + _0x4b49af[_0x36bae5(0x589)] + '\x0a-\x20人设:\x20' + (_0x4b49af[_0x36bae5(0x7dc)] || '无') + '\x0a' : '', _0x5aaf52 = _0x191b1f[_0x36bae5(0x937)](_0xc34b44 => { const _0x49f46d = _0x36bae5, { omniText: _0x30e4c3 } = _0x91c93b(_0xc34b44['id'], null), _0x3dd684 = _0x4ca835(_0xc34b44['id']), _0x48c9c3 = _0xc34b44['linkedWorldBookIds'] && _0xc34b44[_0x49f46d(0x48e)][_0x49f46d(0xb1e)] > 0x0 ? _0x49f46d(0x7b4) + _0xc34b44[_0x49f46d(0x589)] + _0x49f46d(0x16f) + _0xc34b44[_0x49f46d(0x48e)]['map'](_0x16e1cb => _0x57ec14[_0x49f46d(0x9cd)][_0x49f46d(0x270)](_0x1f31a0 => _0x1f31a0['id'] === _0x16e1cb))[_0x49f46d(0x1a0)](Boolean)[_0x49f46d(0x937)](_0x146cdb => _0x49f46d(0xa07) + _0x146cdb[_0x49f46d(0x589)] + '\x0a' + _0x146cdb[_0x49f46d(0x6fd)])['join']('') : ''; return _0x49f46d(0x381) + _0xc34b44['name'] + _0x49f46d(0x881) + _0xc34b44['id'] + '\x0a\x20\x20人设:\x20' + _0xc34b44[_0x49f46d(0x7dc)] + '\x0a\x20\x20近期记忆:\x0a' + _0x30e4c3 + '\x0a' + _0x3dd684 + '\x0a' + _0x48c9c3; })[_0x36bae5(0x9f9)]('\x0a\x0a'), _0x2babfc = Math[_0x36bae5(0x5a8)](Math[_0x36bae5(0x757)]() * 0x3) + 0x2, _0x76830a = _0x36bae5(0x257) + _0x2babfc + _0x36bae5(0x167) + _0x5aaf52 + '\x0a' + _0x55f296 + _0x36bae5(0xa0a) + _0x47cb5c + _0x36bae5(0xa43) + _0x2babfc + _0x36bae5(0x1eb) + _0x2babfc + _0x36bae5(0x43b), _0x23740e = [{ 'role': _0x36bae5(0x70d), 'content': _0x76830a }, { 'role': _0x36bae5(0x2b3), 'content': _0x36bae5(0x26c) }]; _0x23740e['push']({ 'role': 'user', 'content': _0x36bae5(0x480) + _0x2babfc + _0x36bae5(0x1db) }); try { const _0x9459e0 = await _0x5e65cf(_0x23740e, { 'json': !![] }), _0x5dfc42 = _0x9459e0[_0x36bae5(0xa9e)](/(\[[\s\S]*\])/); if (!_0x5dfc42) throw new Error(_0x36bae5(0xa0d)); const _0x5b0cd9 = _0x5dfc42[0x1], _0x38122f = JSON['parse'](_0x5b0cd9); if (!Array[_0x36bae5(0x241)](_0x38122f)) throw new Error(_0x36bae5(0x14b)); return _0x38122f; } catch (_0x2884fa) { return console[_0x36bae5(0x390)]('批量生成动态失败:\x20', _0x2884fa), console[_0x36bae5(0x390)](_0x36bae5(0x3aa), _0x2884fa['rawResponse'] || _0x36bae5(0x137)), null; } } async function _0x5b91dc() { const _0x50a62a = _0x3b2836; if (_0x50a62a(0x15e) !== _0x50a62a(0x44e)) { const _0x2f2542 = _0x57ec14[_0x50a62a(0xade)][_0x50a62a(0x270)](_0x545b86 => _0x545b86['id'] === _0x57ec14[_0x50a62a(0x3b8)]); if (!_0x2f2542) return; const _0x33a2d2 = await _0x156ce5(_0x50a62a(0x6a3) + _0x2f2542[_0x50a62a(0x589)] + _0x50a62a(0x2be)); _0x33a2d2 && (_0x2f2542[_0x50a62a(0x216)] = [], _0x203e68(), _0x17f7c8(), _0x33f536(_0x50a62a(0x4ec))); } else _0x5d5327['error']('总结失败:', _0x1fcfb0), _0x216826[_0x50a62a(0x552)] = _0x50a62a(0x104) + _0x33982e[_0x50a62a(0x332)]; } function _0x17f7c8() { const _0x53e954 = _0x3b2836, _0xec5699 = document[_0x53e954(0x67e)](_0x53e954(0xb01)), _0x24cb83 = _0x57ec14['friendCircles'][_0x53e954(0x270)](_0x52ece6 => _0x52ece6['id'] === _0x57ec14[_0x53e954(0x3b8)]); if (!_0x24cb83) { if (_0x53e954(0x6f2) === _0x53e954(0x6f2)) { _0xec5699[_0x53e954(0x282)] = _0x53e954(0x5ca); return; } else _0x520766 = _0x306d45(() => { const _0x2c9a96 = _0x53e954; if (_0x1e6292['type'] === _0x2c9a96(0x44d)) _0x11bf42['preventDefault'](); _0x71f273(_0x1aa834); }, 0x320); } if (!_0x24cb83[_0x53e954(0x216)] || _0x24cb83[_0x53e954(0x216)][_0x53e954(0xb1e)] === 0x0) { _0xec5699[_0x53e954(0x282)] = _0x53e954(0xb16); return; } _0xec5699[_0x53e954(0x282)] = ''; const _0x12bdc7 = [..._0x24cb83['posts']][_0x53e954(0x42a)]((_0x5d63ff, _0x4bdb0d) => _0x4bdb0d[_0x53e954(0x665)] - _0x5d63ff[_0x53e954(0x665)]); _0x12bdc7[_0x53e954(0x5e2)](_0x4511d2 => { const _0x44f00c = _0x53e954; if ('drEjM' !== _0x44f00c(0x96d)) { const _0x2ce32f = document['createElement']('div'); _0x2ce32f['className'] = _0x44f00c(0xaee); let _0x2ba345 = '未知', _0x467989 = _0x520817; if (_0x4511d2[_0x44f00c(0x136)] === _0x44f00c(0x2b3)) { if ('jCWrO' !== _0x44f00c(0x43e)) { if (_0x28c74e[_0x44f00c(0x88c)]()[_0x44f00c(0x9bb)]()) return; const _0x2d7fbb = _0x4cb417[_0x44f00c(0x842)][_0x44f00c(0x3a1)](_0x44f00c(0x97d)), _0x886891 = _0x48d179['target'][_0x44f00c(0x3a1)](_0x44f00c(0x132)); if (!_0x2d7fbb || _0x886891) return; const _0x428f4e = _0x4a4dea(_0x2d7fbb[_0x44f00c(0x988)]['historyIndex'], 0xa); if (_0x36d34a(_0x428f4e)) return; _0x2cac98(_0x428f4e); } else { const _0x64a442 = _0x21ba23(_0x4511d2['authorId']); _0x64a442 && (_0x2ba345 = _0x64a442[_0x44f00c(0x589)], _0x467989 = _0x64a442[_0x44f00c(0x5b2)]); } } else { const _0x4b3f39 = _0x382342(_0x4511d2[_0x44f00c(0x5ac)]); if (_0x4b3f39) { if (_0x44f00c(0x851) !== _0x44f00c(0x851)) { const _0xd95923 = _0x392610[_0x44f00c(0x48e)][_0x44f00c(0x937)](_0x4baf6e => _0x3fc693[_0x44f00c(0x9cd)][_0x44f00c(0x270)](_0xcc237b => _0xcc237b['id'] === _0x4baf6e))[_0x44f00c(0x1a0)](_0x2aeaa8)[_0x44f00c(0x937)](_0x46d354 => _0x44f00c(0x201) + _0x46d354[_0x44f00c(0x589)] + '\x0a' + _0x46d354[_0x44f00c(0x6fd)])[_0x44f00c(0x9f9)](''); if (_0xd95923) _0x5e95df = _0x44f00c(0x7f5) + _0xd95923; } else _0x2ba345 = _0x4b3f39[_0x44f00c(0x589)], _0x467989 = _0x4b3f39['avatar']; } } const _0x43209b = _0x44f00c(0x95a) + _0x467989 + '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>' + _0x2ba345 + _0x44f00c(0x845), _0x140f6c = _0x44f00c(0x218) + _0x4511d2['content'] + _0x44f00c(0x4ed); let _0x578f5b = ''; if (_0x4511d2[_0x44f00c(0x3e9)] || _0x4511d2['imageId']) { if (_0x44f00c(0x1d5) !== 'lbZNc') { const _0x4699f1 = _0x44f00c(0x62c) + _0x4511d2['id']; _0x578f5b = '<div\x20class=\x22post-image-container\x22><img\x20id=\x22' + _0x4699f1 + _0x44f00c(0xa87), setTimeout(() => { const _0x14e50d = _0x44f00c; if (_0x14e50d(0x8b3) !== _0x14e50d(0x8b3)) _0x4b7197 = _0x234091[_0x14e50d(0x69c)][0x0]; else { const _0x2a3908 = document[_0x14e50d(0x67e)](_0x4699f1); if (!_0x2a3908) return; if (_0x4511d2[_0x14e50d(0x3e9)]) 'Noybi' === _0x14e50d(0x958) ? _0xa627a2['type'] = 'text' : _0x2a3908[_0x14e50d(0x45f)] = _0x4511d2[_0x14e50d(0x3e9)]; else _0x4511d2['imageId'] && _0x2995f2(_0x4511d2[_0x14e50d(0x704)])[_0x14e50d(0x69b)](_0x4ebf99 => { const _0x45ad80 = _0x14e50d; if (_0x45ad80(0x66a) === _0x45ad80(0x66a)) { if (_0x4ebf99) { const _0x3e8700 = URL['createObjectURL'](_0x4ebf99); _0x2a3908[_0x45ad80(0x45f)] = _0x3e8700, _0x2a3908[_0x45ad80(0x532)] = () => URL['revokeObjectURL'](_0x3e8700); } } else _0x30d30c['error']('在“一起听”邀请中，净化封面失败:', _0x2b6ab1); }); } }, 0x0); } else _0x2508a8[_0x44f00c(0x75c)](), _0x355bb0['querySelector'](_0x44f00c(0x9fb))[_0x44f00c(0x52e)] = '▶'; } let _0x6b3132 = ''; _0x4511d2[_0x44f00c(0xa1e)] === _0x44f00c(0x89f) && _0x4511d2[_0x44f00c(0x9cf)] && (_0x6b3132 = '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22' + _0x4511d2['id'] + _0x44f00c(0x24c) + (_0x4511d2['coverUrl'] || _0x520817) + _0x44f00c(0x3d6) + _0x4511d2[_0x44f00c(0x9cf)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x4511d2[_0x44f00c(0xa16)] + _0x44f00c(0x89e) + (_0x4511d2[_0x44f00c(0x2ea)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'); const _0x15e726 = _0x44f00c(0xa20) + new Date(_0x4511d2[_0x44f00c(0x665)])['toLocaleString']('zh-CN') + _0x44f00c(0x85b); let _0x106ca3 = ''; if (_0x4511d2[_0x44f00c(0x34d)] && _0x4511d2[_0x44f00c(0x34d)][_0x44f00c(0xb1e)] > 0x0 || _0x4511d2[_0x44f00c(0x999)] && _0x4511d2['comments'][_0x44f00c(0xb1e)] > 0x0) { if (_0x44f00c(0x22f) === _0x44f00c(0x22f)) { let _0x217ff4 = ''; if (_0x4511d2[_0x44f00c(0x34d)] && _0x4511d2[_0x44f00c(0x34d)][_0x44f00c(0xb1e)] > 0x0) { if ('IYtzy' !== _0x44f00c(0x2b5)) { const _0x477c21 = _0x10d6d2['worldBooks'][_0x44f00c(0x270)](_0x246c85 => _0x246c85['id'] === _0x11ec4c); if (!_0x477c21) return; _0x4d39c4[_0x44f00c(0x67e)](_0x44f00c(0x3fc))[_0x44f00c(0x552)] = _0x477c21['id'], _0x2b858b[_0x44f00c(0x67e)](_0x44f00c(0x1e2))[_0x44f00c(0x52e)] = _0x44f00c(0x20b), _0x2f419e[_0x44f00c(0x67e)]('world-book-edit-name')['value'] = _0x477c21[_0x44f00c(0x589)], _0x55b1c1[_0x44f00c(0x67e)]('world-book-edit-content')[_0x44f00c(0x552)] = _0x477c21['content']; } else { const _0x56f793 = _0x4511d2[_0x44f00c(0x34d)][_0x44f00c(0x937)](_0x3939f0 => _0x382342(_0x3939f0)?.[_0x44f00c(0x589)] || '未知')['join']('、'), _0x21ccc4 = _0x44f00c(0x44c); _0x217ff4 = _0x44f00c(0x5c5) + _0x21ccc4 + '\x20' + _0x56f793 + _0x44f00c(0x85b); } } let _0xd6e4f2 = ''; if (_0x4511d2[_0x44f00c(0x999)] && _0x4511d2[_0x44f00c(0x999)][_0x44f00c(0xb1e)] > 0x0) { const _0x203d4e = _0x4511d2[_0x44f00c(0x999)][_0x44f00c(0x937)](_0x962e7f => { const _0x48ce93 = _0x44f00c, _0x5f094c = _0x382342(_0x962e7f['authorId'])?.[_0x48ce93(0x589)] || '未知'; return _0x48ce93(0x429) + _0x5f094c + '</span>:\x20' + _0x962e7f[_0x48ce93(0x6fd)] + _0x48ce93(0x85b); })['join'](''); _0xd6e4f2 = '<div\x20class=\x22post-comments-container\x22>' + _0x203d4e + _0x44f00c(0x85b); } _0x106ca3 = _0x44f00c(0x4ee) + _0x217ff4 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0xd6e4f2 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20'; } else _0x44f194(), _0x34dba9(![]); } const _0x47c250 = _0x44f00c(0x2a8) + _0x140f6c + _0x578f5b + _0x6b3132 + _0x44f00c(0x85b); _0x2ce32f[_0x44f00c(0x282)] = _0x43209b + _0x47c250 + _0x15e726 + _0x106ca3; if (_0x4511d2[_0x44f00c(0xa1e)] === _0x44f00c(0x89f) && _0x4511d2[_0x44f00c(0x2ea)]) { if ('EkuUO' !== _0x44f00c(0x32d)) _0x13d47a = '0x' + _0xaab2af[0x1] + _0x389f57[0x1], _0x513228 = '0x' + _0x31d05f[0x2] + _0x1f2456[0x2], _0xb7ad6c = '0x' + _0x368ab5[0x3] + _0x5019e0[0x3]; else { const _0x309eaa = _0x2ce32f[_0x44f00c(0x433)](_0x44f00c(0x462)); if (_0x309eaa) { if (_0x44f00c(0x899) !== _0x44f00c(0x899)) { const _0x22e904 = _0x4f5ebd[_0x44f00c(0x2ce)][0x0][_0x44f00c(0x3b2)] - _0x227cb5, _0x1db929 = _0x1fc2ea[_0x44f00c(0x2ce)][0x0]['clientY'] - _0x2db800; _0x232d58['abs'](_0x22e904) > _0x2dacad[_0x44f00c(0x72e)](_0x1db929) ? _0x88d8b2 = _0x44f00c(0x35a) : _0x333423 = 'vertical'; } else _0x309eaa[_0x44f00c(0x990)](_0x44f00c(0x821), function () { const _0x624795 = { 'id': _0x4511d2['id'], 'url': _0x4511d2['playableUrl'] }; _0x1104e0(this, _0x624795); }); } } } _0xec5699['appendChild'](_0x2ce32f); } else _0x11a227[_0x44f00c(0x350)](); }); } document[_0x3b2836(0x67e)](_0x3b2836(0x8f5))[_0x3b2836(0x990)](_0x3b2836(0x821), _0x5b91dc), document[_0x3b2836(0x67e)]('refresh-feed-button')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x2c5c9b), document[_0x3b2836(0x67e)](_0x3b2836(0x2fe))[_0x3b2836(0x990)]('click', () => _0x52c85d(_0x3b2836(0x669), _0x3b2836(0x82e))), document['getElementById'](_0x3b2836(0x6bd))[_0x3b2836(0x990)]('click', () => _0x50e358()), document[_0x3b2836(0x67e)](_0x3b2836(0x9a2))['addEventListener'](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x82e), 'friendCircleEdit')), document[_0x3b2836(0x67e)]('save-friend-circle-button')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x278cb5), document[_0x3b2836(0x67e)](_0x3b2836(0xa92))[_0x3b2836(0x990)]('click', _0x14a70b), document[_0x3b2836(0x67e)](_0x3b2836(0x694))['addEventListener'](_0x3b2836(0x821), () => { const _0x411860 = _0x3b2836; 'bkqHN' === 'TdCpS' ? (_0x3e6aa4[_0x411860(0x69c)][_0x411860(0x5e2)](_0x4615e8 => { const _0x4bd5a5 = _0x411860, _0x10ef38 = _0x2cc1e4(_0x4615e8); if (_0x10ef38) { const _0x29d751 = _0x17d403['createElement']('option'); _0x29d751['value'] = _0x10ef38['id'], _0x29d751[_0x4bd5a5(0x52e)] = _0x10ef38[_0x4bd5a5(0x589)], _0x407c94[_0x4bd5a5(0x6b3)](_0x29d751); } }), _0x53bfa8[_0x411860(0x7df)]['display'] = 'block') : (_0x42bc5e(), _0x52c85d(_0x411860(0x82e), _0x411860(0x89f))); }), document['getElementById']('edit-current-circle-button')[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0xe112e8 = _0x3b2836; _0x57ec14[_0xe112e8(0x3b8)] && _0x50e358(_0x57ec14[_0xe112e8(0x3b8)]); }), document[_0x3b2836(0x67e)]('user-send-post-button')[_0x3b2836(0x990)](_0x3b2836(0x821), async () => { const _0x101beb = _0x3b2836, _0x1b62ad = _0x57ec14[_0x101beb(0xade)][_0x101beb(0x270)](_0x16f19f => _0x16f19f['id'] === _0x57ec14['activeFriendCircleId']); if (!_0x1b62ad || _0x57ec14[_0x101beb(0xa73)]) return; const _0x3a47e5 = _0x1b62ad[_0x101beb(0x347)], _0x2e61b4 = _0x57ec14['userProfiles']['find'](_0x99a3ac => _0x99a3ac['id'] === _0x3a47e5); if (!_0x2e61b4) { if (_0x101beb(0x1bb) !== _0x101beb(0x469)) { _0x33f536('错误：找不到此好友圈绑定的用户！'); return; } else _0x4320b6[_0x101beb(0x4cf)](_0x101beb(0x51c)), _0x24d5f['createObjectStore'](_0x101beb(0x63d), { 'keyPath': 'id' }); } const _0x325e49 = document['getElementById'](_0x101beb(0x476))[_0x101beb(0x552)][_0x101beb(0x3dd)](), _0x4d3489 = _0x57ec14[_0x101beb(0x903)]['image'], _0x3bd195 = _0x57ec14['pendingPostAttachments']['music'], _0x350b72 = _0x57ec14[_0x101beb(0x903)][_0x101beb(0x704)]; if (!_0x325e49 && !_0x4d3489 && !_0x3bd195) { if (_0x101beb(0x2e1) !== _0x101beb(0x7a7)) { _0x33f536(_0x101beb(0x331)); return; } else _0x496427[_0x101beb(0x282)] = _0x101beb(0x4bf), _0x31433f[_0x101beb(0x67e)](_0x101beb(0x6fc))['addEventListener'](_0x101beb(0x821), _0x32078a); } const _0x4509fc = { 'id': _0x101beb(0x7ad) + Date[_0x101beb(0x2c5)](), 'authorType': _0x101beb(0x2b3), 'authorId': _0x2e61b4['id'], 'content': _0x325e49, 'timestamp': Date[_0x101beb(0x2c5)](), 'likes': [], 'comments': [] }; if (_0x350b72) { if (_0x101beb(0x5f3) !== _0x101beb(0x5f3)) { const _0x3401f7 = _0x243637[_0x101beb(0x216)][_0x101beb(0x1a0)](_0x3e1bf4 => _0x3e1bf4[_0x101beb(0xa1e)] === 'music' && _0x3e1bf4[_0x101beb(0x2ea)])['map'](_0x9af0c6 => ({ ..._0x9af0c6, 'source': 'feed' })); _0x11d3ff[_0x101beb(0x1c5)](..._0x3401f7); } else _0x4509fc[_0x101beb(0x704)] = _0x350b72; } else _0x4d3489 && (_0x4509fc[_0x101beb(0x3e9)] = _0x4d3489); if (_0x3bd195) { if ('nBePk' !== 'GNnTH') _0x4509fc[_0x101beb(0xa1e)] = _0x101beb(0x89f), Object[_0x101beb(0xa36)](_0x4509fc, _0x3bd195); else { if (_0x1cf17e) _0x543619(_0x2b759b); const _0x4d5290 = _0x582b47['target'][_0x101beb(0x3a1)]('.todo-item,\x20.important-day-item'); if (!_0x4d5290) return; const _0x2137b5 = _0x4d5290[_0x101beb(0x988)]['id']; if (!_0x2137b5) return; const _0x314bba = () => { _0x491987 = _0x241d12(() => { if (_0x3282e7['type'] === 'touchstart') _0x165e1f['preventDefault'](); _0x171fe8(_0x2137b5); }, 0x320); }, _0x20b19c = () => { if (_0x3573f8) _0x1235ae(_0x3d7ef2); }; _0x204331[_0x101beb(0x990)](_0x101beb(0x280), _0x20b19c, { 'once': !![] }), _0x11616c[_0x101beb(0x990)](_0x101beb(0x517), _0x20b19c, { 'once': !![] }), _0x12065a[_0x101beb(0x990)]('touchcancel', _0x20b19c, { 'once': !![] }), _0x1bf381['addEventListener'](_0x101beb(0x1c3), _0x20b19c, { 'once': !![] }), _0x314bba(); } } else _0x101beb(0x7d4) !== _0x101beb(0x7d4) ? (_0x7e3c56['oncomplete'] = _0x25319c, _0x8cdb0[_0x101beb(0x7e4)] = _0x128682 => _0x21e3e2(_0x128682['target'][_0x101beb(0x390)])) : _0x4509fc[_0x101beb(0xa1e)] = 'text'; _0x1b62ad[_0x101beb(0x216)][_0x101beb(0x1c5)](_0x4509fc), _0x203e68(), _0x17f7c8(), document[_0x101beb(0x67e)](_0x101beb(0x476))[_0x101beb(0x552)] = '', _0x57ec14['pendingPostAttachments']['image'] = null, _0x57ec14[_0x101beb(0x903)]['music'] = null, _0x57ec14[_0x101beb(0x903)][_0x101beb(0x704)] = null, _0x319b62(), _0x305e7e(_0x4509fc); }), document['getElementById'](_0x3b2836(0x1d6))[_0x3b2836(0x990)]('click', () => { const _0x2e6148 = _0x3b2836; document[_0x2e6148(0x67e)](_0x2e6148(0x68c))[_0x2e6148(0x821)](); }), document[_0x3b2836(0x67e)](_0x3b2836(0x68c))[_0x3b2836(0x990)](_0x3b2836(0x4a3), async _0x8b323 => { const _0xd4c651 = _0x3b2836, _0x469f97 = _0x8b323[_0xd4c651(0x842)][_0xd4c651(0x7e7)][0x0]; if (!_0x469f97) return; try { const _0x2f6442 = await _0x1c44ae(_0x469f97, 0x320, 0.8, !![]), _0x2d7d1a = _0xd4c651(0x5d4) + Date['now'](); await _0x59767c(_0x2d7d1a, _0x2f6442), _0x57ec14[_0xd4c651(0x903)]['imageId'] = _0x2d7d1a, _0x57ec14[_0xd4c651(0x903)][_0xd4c651(0x3e9)] = null, _0x57ec14[_0xd4c651(0x903)]['music'] = null, _0x319b62(); } catch (_0x12cd4d) { if (_0xd4c651(0x2ae) === _0xd4c651(0x60b)) { const _0x5af027 = _0x41480a[_0xd4c651(0x3a1)](_0xd4c651(0x97d)), _0x344584 = _0x4e95a8[_0xd4c651(0x988)]['songId'], _0x192aa2 = _0x3d280e(_0x5af027[_0xd4c651(0x988)][_0xd4c651(0xa4b)], 0xa); _0x5577dc(_0x344584, _0x192aa2, _0x22db60); } else _0x33f536(_0xd4c651(0x48f) + _0x12cd4d['message']); } _0x8b323[_0xd4c651(0x842)]['value'] = ''; }), document[_0x3b2836(0x67e)]('user-post-music-button')[_0x3b2836(0x990)](_0x3b2836(0x821), async () => { const _0x5d83d1 = _0x3b2836; if (_0x5d83d1(0x4f7) !== 'CEgkK') { const _0x24ae7e = new _0x242356(_0x11caed['timestamp'])['toLocaleTimeString'](_0x5d83d1(0x7bf), { 'hour': _0x5d83d1(0x6d3), 'minute': _0x5d83d1(0x6d3) }); _0x45d2db['content'] && _0x147a61[_0x5d83d1(0x1c5)]('[' + _0x24ae7e + _0x5d83d1(0xa1f) + _0x544fb0(_0x9d7198) + ']\x20' + _0x460cad(_0x1d2732['content'])[_0x5d83d1(0x3dd)]()); } else { const _0x532f0a = await _0x18c421(); if (!_0x532f0a) return; _0x33f536(_0x5d83d1(0x199)); try { const _0x2e01eb = await _0x2c8c9c(_0x532f0a['songName'], _0x532f0a['artist']); _0x57ec14[_0x5d83d1(0x903)][_0x5d83d1(0x89f)] = { 'songName': _0x532f0a[_0x5d83d1(0x9cf)], 'artist': _0x532f0a[_0x5d83d1(0xa16)], 'coverUrl': _0x2e01eb[_0x5d83d1(0xa4e)], 'playableUrl': _0x2e01eb[_0x5d83d1(0x609)] }, _0x57ec14['pendingPostAttachments']['image'] = null, _0x319b62(); } catch (_0x3dc204) { _0x33f536(_0x5d83d1(0x65a) + _0x3dc204['message']); } } }); function _0x23429e() { const _0xa0793a = _0x3b2836, _0x7e7405 = new Date(), _0x594de4 = document[_0xa0793a(0x67e)]('home-time'), _0x580c6c = document['getElementById'](_0xa0793a(0x8bc)); if (_0x594de4 && _0x580c6c) { const _0x26c417 = String(_0x7e7405['getHours']())[_0xa0793a(0xa2e)](0x2, '0'), _0x2aac66 = String(_0x7e7405[_0xa0793a(0xa97)]())['padStart'](0x2, '0'); _0x594de4[_0xa0793a(0x52e)] = _0x26c417 + ':' + _0x2aac66; const _0x5e7e42 = _0x7e7405[_0xa0793a(0x4b8)]() + 0x1, _0x53accc = _0x7e7405[_0xa0793a(0x4f3)](), _0x968ac5 = [_0xa0793a(0x414), '星期一', _0xa0793a(0x813), _0xa0793a(0x541), _0xa0793a(0x27a), _0xa0793a(0x116), _0xa0793a(0x2f7)][_0x7e7405[_0xa0793a(0x431)]()]; _0x580c6c[_0xa0793a(0x52e)] = _0x5e7e42 + '月' + _0x53accc + '日\x20' + _0x968ac5; } } function _0x4e0234(_0x20cded) { const _0x334963 = _0x3b2836; if (!_0x20cded) return ''; const _0x4662c6 = new Date(_0x20cded), _0x44d5bc = String(_0x4662c6[_0x334963(0x59a)]())[_0x334963(0xa2e)](0x2, '0'), _0x11402d = String(_0x4662c6[_0x334963(0xa97)]())[_0x334963(0xa2e)](0x2, '0'); return _0x44d5bc + ':' + _0x11402d; } function _0x1e789a() { const _0x23168f = _0x3b2836; if (_0x23168f(0x53f) === 'gqRPP') _0x407285[_0x23168f(0x413)] = _0x36cda2[_0x23168f(0x313)][0x0]?.['id'] || null; else { const _0xe71c6f = _0x57ec14[_0x23168f(0xade)][_0x23168f(0x270)](_0xc1c0b9 => _0xc1c0b9['id'] === _0x57ec14['activeFriendCircleId']), _0xfc1f67 = _0xe71c6f ? _0xe71c6f[_0x23168f(0x216)] : []; if (!_0xfc1f67 || _0xfc1f67[_0x23168f(0xb1e)] === 0x0) return ''; const _0x42a87c = _0xfc1f67['slice'](0x0, 0x5), _0xc4acea = _0x42a87c[_0x23168f(0x937)](_0x3ff7ec => { const _0xe0eaae = _0x23168f, _0xa00c1e = _0x382342(_0x3ff7ec['authorId']) || { 'name': '未知' }; let _0x1aa767 = _0xe0eaae(0x572) + _0xa00c1e[_0xe0eaae(0x589)] + _0xe0eaae(0xafe) + (_0x3ff7ec[_0xe0eaae(0x3f8)] || _0x3ff7ec['content']) + '”'; return _0x3ff7ec[_0xe0eaae(0xa1e)] === _0xe0eaae(0x89f) && (_0x1aa767 += _0xe0eaae(0x8ff) + _0x3ff7ec[_0xe0eaae(0x9cf)] + _0xe0eaae(0x56b) + _0x3ff7ec[_0xe0eaae(0xa16)] + ')'), _0x1aa767; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0xc4acea[_0x23168f(0x9f9)]('\x0a'); } } function _0x4ca835(_0x55232c) { const _0x517441 = _0x3b2836; if (_0x517441(0x9d7) !== _0x517441(0x9d7)) _0x466c41('错误:\x20' + _0x50e7fa[_0x517441(0x332)]); else { const _0x3138df = _0x57ec14['userProfiles'][_0x517441(0x270)](_0x1eedc3 => _0x1eedc3['id'] === _0x57ec14[_0x517441(0x422)]) || { 'name': '你' }, _0x58c0da = _0x57ec14[_0x517441(0x5aa)]['find'](_0x3ab3d1 => _0x3ab3d1[_0x517441(0x90d)] === _0x55232c); if (!_0x58c0da || !_0x58c0da[_0x517441(0x8c4)] || _0x58c0da[_0x517441(0x8c4)][_0x517441(0xb1e)] === 0x0) return ''; const _0x51120d = _0x58c0da[_0x517441(0x8c4)][_0x517441(0x944)](-0x8), _0x3d0d29 = _0x51120d[_0x517441(0x937)](_0x83995a => { const _0x25f18d = _0x517441; if (_0x25f18d(0x9c9) === _0x25f18d(0x9c9)) { const _0x568e10 = _0x83995a[_0x25f18d(0x52a)] === _0x25f18d(0x2b3) ? _0x3138df[_0x25f18d(0x589)] : _0x382342(_0x83995a[_0x25f18d(0x52a)])[_0x25f18d(0x589)]; return _0x25f18d(0x566) + new Date(_0x83995a[_0x25f18d(0x665)])[_0x25f18d(0xafb)]() + ']\x20' + _0x568e10 + _0x25f18d(0x653) + _0x83995a[_0x25f18d(0x6fd)]; } else { const _0x526260 = _0x403c7a[_0x25f18d(0x709)](_0x6606c), _0x3f3d20 = _0x25f18d(0x5f4), _0x50ceb0 = _0x25f18d(0xa71) + _0x3f3d20 + _0x25f18d(0x8e0) + _0x526260 + '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x4c3c49[_0x25f18d(0x282)] = _0x50ceb0, _0x6402e5[_0x25f18d(0x6a1)]['style'][_0x25f18d(0x522)](_0x25f18d(0x4e4), '\x27' + _0x3f3d20 + '\x27'), _0x49594f[_0x25f18d(0x52e)] = _0x25f18d(0xaf8); } })[_0x517441(0x9f9)]('\x0a'); return _0x517441(0x162) + _0x3138df[_0x517441(0x589)] + _0x517441(0x6e9) + _0x3d0d29; } } function _0x3f249a() { const _0x47f42f = _0x3b2836, _0x3297f4 = document[_0x47f42f(0x67e)](_0x47f42f(0x8a0)), _0x2b757e = _0x57ec14[_0x47f42f(0x8a1)][_0x47f42f(0xad0)]; _0x2b757e ? (_0x3297f4['style'][_0x47f42f(0x6dd)] = _0x47f42f(0x36b) + _0x2b757e + ')', _0x3297f4[_0x47f42f(0x7df)][_0x47f42f(0x4b5)] = _0x47f42f(0xa4e), _0x3297f4[_0x47f42f(0x7df)][_0x47f42f(0xa75)] = _0x47f42f(0x21e), _0x3297f4[_0x47f42f(0x7df)][_0x47f42f(0x89d)] = _0x47f42f(0xa5c), _0x3297f4[_0x47f42f(0x74c)](_0x47f42f(0x9af))[_0x47f42f(0x5e2)](_0x2274e6 => { const _0x19363d = _0x47f42f; _0x19363d(0x6af) === _0x19363d(0x6af) ? _0x2274e6[_0x19363d(0x7df)][_0x19363d(0x472)] = _0x19363d(0x540) : _0x36d764[_0x19363d(0xabb)](_0x19363d(0xaec), _0x397768); })) : _0x47f42f(0x90b) === _0x47f42f(0x123) ? _0x19047e[_0x47f42f(0x68a)]['push'](..._0x5e9f2c[_0x47f42f(0x283)]) : (_0x3297f4['style']['backgroundImage'] = '', _0x3297f4[_0x47f42f(0x7df)][_0x47f42f(0x89d)] = '', _0x3297f4[_0x47f42f(0x74c)]('.widget-info\x20>\x20div')[_0x47f42f(0x5e2)](_0xd725cd => { const _0x15fe5a = _0x47f42f; _0x15fe5a(0x685) === _0x15fe5a(0x30b) ? _0x428333['error']('加载卡片图片失败', _0x4593c2) : _0xd725cd[_0x15fe5a(0x7df)]['textShadow'] = ''; })); } const _0x531c51 = document[_0x3b2836(0x67e)](_0x3b2836(0xb22)), _0x4cf1d1 = document[_0x3b2836(0x67e)](_0x3b2836(0x938)); _0x531c51['addEventListener']('click', () => { const _0x1931aa = _0x3b2836; if (_0x1931aa(0x818) === 'aShXr') { if (_0x3afa10) { const _0x5b0128 = _0x183677[_0x1931aa(0x494)]('p'); _0x5b0128[_0x1931aa(0x282)] = _0x22e7ca, _0x5b0128[_0x1931aa(0x7df)][_0x1931aa(0x8d0)] = '0', _0x47a1ed[_0x1931aa(0x6b3)](_0x5b0128); } } else _0x42bc5e(), _0x52c85d(_0x1931aa(0x82e), _0x1931aa(0x669)); }), _0x4cf1d1[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5ee5e9 = _0x3b2836; _0x36851d(), _0x52c85d(_0x5ee5e9(0x39e), _0x5ee5e9(0x669)); }), document[_0x3b2836(0x67e)](_0x3b2836(0x2d9))['addEventListener'](_0x3b2836(0x821), () => { const _0x50cd84 = _0x3b2836; _0x50cd84(0x847) !== _0x50cd84(0x1f9) ? _0x52c85d(_0x50cd84(0x669), 'meetingList') : (_0xc5af89[_0x50cd84(0x32b)][_0x50cd84(0x536)](_0x50cd84(0x242)), _0x2aebf7[_0x50cd84(0x32b)][_0x50cd84(0x536)](_0x50cd84(0x5f1)), _0x307dd0[_0x50cd84(0x32b)][_0x50cd84(0x536)](_0x50cd84(0x334)), _0x45019f(() => { const _0x4728f6 = _0x50cd84; _0x29210d[_0x4728f6(0x32b)][_0x4728f6(0x318)](_0x4728f6(0x334), 'is-exiting-right'), _0x1ed6b8[_0x4728f6(0x32b)][_0x4728f6(0x318)](_0x4728f6(0x242)), _0x1654ca[_0x4728f6(0x53a)] = _0x43db8d, _0x130a9d(), _0x3d5b1f[_0x4728f6(0x4bc)] = ![]; }, 0x2bc)); }), document[_0x3b2836(0x67e)](_0x3b2836(0x9e1))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x3ca0e = _0x3b2836; if (_0x3ca0e(0xaf5) === _0x3ca0e(0xaf5)) { if (_0xc60374) clearInterval(_0xc60374); _0xc60374 = null, _0x57ec14[_0x3ca0e(0xae0)] = [], _0x57ec14[_0x3ca0e(0x601)] = null, document[_0x3ca0e(0x67e)](_0x3ca0e(0xb0f))['style'][_0x3ca0e(0x741)] = _0x3ca0e(0x527), _0x57ec14[_0x3ca0e(0x413)] = null, _0x203e68(), _0x52c85d(_0x3ca0e(0x39e), 'meetingView'); } else { _0x4188b1(_0x3ca0e(0x238)); return; } }); const _0x502289 = document[_0x3b2836(0x67e)](_0x3b2836(0x539)), _0x20cfeb = document[_0x3b2836(0x67e)](_0x3b2836(0x898)); _0x20cfeb[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x1875c2 = _0x3b2836; if ('nKAhU' !== _0x1875c2(0x353)) { _0x57e481 = _0x55c162; const _0x2b396f = _0x4a2625(_0x524708); if (!_0x2b396f) return; const _0x7bf51d = _0x56f209[_0x1875c2(0x67e)](_0x1875c2(0x7ea)), _0x567668 = _0x19c239[_0x1875c2(0x67e)]('snoop-home-clock'); if (_0x567668) _0x567668['remove'](); const _0x197612 = _0xf30a9a['getElementById'](_0x1875c2(0x6e0)); if (_0x197612) _0x197612[_0x1875c2(0x318)](); _0x7bf51d['insertAdjacentHTML'](_0x1875c2(0x25c), _0x1875c2(0xab5)), _0x7bf51d[_0x1875c2(0x882)](_0x1875c2(0x25c), '<div\x20id=\x22snoop-dock\x22></div>'), _0x41c6c2['getElementById'](_0x1875c2(0x9da))[_0x1875c2(0x52e)] = '', _0x11e2c6(); if (_0xee6ece) _0x924508(_0x15d0cb); _0x8c42ad(), _0x3aa531 = _0x2913ff(_0x3b3419, 0x2710), _0x46108a(_0x1875c2(0x17c), _0x1875c2(0x409)); } else { const _0x57546a = _0x502289[_0x1875c2(0x552)]['trim'](); _0x57546a && (_0x3834ff(_0x57546a), _0x502289[_0x1875c2(0x552)] = '', setTimeout(_0x7f5e33, 0x64)); } }); function _0x1104e0(_0xe6bdea, _0x4d6270) { const _0x4853fc = _0x3b2836, _0x521b92 = document['getElementById']('audio-player'), _0x536ec7 = document[_0x4853fc(0x74c)]('.music-post-play-icon,\x20.music-share-play-icon'); _0x536ec7[_0x4853fc(0x5e2)](_0x24462e => { const _0x141404 = _0x4853fc; _0x24462e !== _0xe6bdea[_0x141404(0x433)]('.music-post-play-icon,\x20.music-share-play-icon') && (_0x24462e[_0x141404(0x52e)] = '▶'); }), _0x521b92['src'] === _0x4d6270[_0x4853fc(0x609)] && !_0x521b92[_0x4853fc(0x596)] ? _0x4853fc(0x15a) !== _0x4853fc(0x15a) ? _0x592ecf[_0x4853fc(0x45f)] && _0x1f010d[_0x4853fc(0x7df)][_0x4853fc(0xa70)] !== '0' ? (_0x42b07f[_0x4853fc(0x7df)][_0x4853fc(0xa70)] = 0x0, _0x10d2eb(() => { const _0xffd761 = _0x4853fc; _0x5bb8f0[_0xffd761(0x45f)] = _0x52ebd5[_0xffd761(0x709)](_0x9b284e), _0x29e4a5['style'][_0xffd761(0xa70)] = 0x1; }, 0x96)) : (_0x1fe074['src'] = _0x275520[_0x4853fc(0x709)](_0x59f9f7), _0x2faefe[_0x4853fc(0x7df)][_0x4853fc(0xa70)] = 0x1) : (_0x521b92[_0x4853fc(0x75c)](), _0xe6bdea[_0x4853fc(0x433)]('.music-post-play-icon,\x20.music-share-play-icon')[_0x4853fc(0x52e)] = '▶') : (_0x521b92[_0x4853fc(0x45f)] = _0x4d6270[_0x4853fc(0x609)], _0x521b92[_0x4853fc(0x350)](), _0xe6bdea[_0x4853fc(0x433)](_0x4853fc(0x9fb))[_0x4853fc(0x52e)] = '❚❚'); } const _0x2db614 = document['getElementById']('music-player-bar'); async function _0x55650f(_0x87c859) { const _0xc227a5 = _0x3b2836; if (!_0x87c859 || !_0x87c859[_0xc227a5(0x2bd)](_0xc227a5(0x444))) return ![]; return new Promise(_0x33e7d0 => { const _0x318bf0 = _0xc227a5; if ('tWDXh' === _0x318bf0(0x448)) _0x37b13f[_0x318bf0(0x32b)][_0x318bf0(0x536)](_0x318bf0(0xab1)), _0xc1cca7['classList']['add'](_0x318bf0(0x98e)), _0x52e85e[_0x318bf0(0x32b)][_0x318bf0(0x536)]('is-visible'), _0x1fd4b9(() => { const _0x15e37e = _0x318bf0; _0x5b580e['classList'][_0x15e37e(0x318)](_0x15e37e(0x334), 'is-exiting-left'), _0x2d365b['classList']['remove'](_0x15e37e(0xab1)), _0x591964[_0x15e37e(0x53a)] = _0x4816a3, _0x16dadc(), _0x788494[_0x15e37e(0x4bc)] = ![]; }, 0x2bc); else { const _0x5d800b = document[_0x318bf0(0x494)](_0x318bf0(0x27f)); _0x5d800b[_0x318bf0(0x45f)] = _0x87c859; const _0xe85a94 = setTimeout(() => { _0xa7da65(), _0x33e7d0(![]); }, 0xbb8), _0xa7da65 = () => { const _0x52de08 = _0x318bf0; clearTimeout(_0xe85a94), _0x5d800b[_0x52de08(0x6a0)](_0x52de08(0x6b1), _0xb8ba57), _0x5d800b[_0x52de08(0x6a0)]('error', _0x48f7a3), _0x5d800b[_0x52de08(0x45f)] = '', _0x5d800b[_0x52de08(0x318)](); }, _0xb8ba57 = () => { const _0x218469 = _0x318bf0; 'JOjoa' === _0x218469(0x60a) ? (_0xa7da65(), _0x33e7d0(!![])) : _0x36d365 = _0xb2e6de[_0x218469(0x6fd)]; }, _0x48f7a3 = () => { _0xa7da65(), _0x33e7d0(![]); }; _0x5d800b[_0x318bf0(0x990)](_0x318bf0(0x6b1), _0xb8ba57), _0x5d800b[_0x318bf0(0x990)](_0x318bf0(0x390), _0x48f7a3); } }); } async function _0x2c8c9c(_0x228870, _0xdad294) { const _0x767f1 = _0x3b2836, _0x2a49e2 = [_0x767f1(0x296), 'tencent']; for (const _0x443a32 of _0x2a49e2) { try { const _0xd28359 = _0x767f1(0x213) + _0x443a32 + '?word=' + encodeURIComponent(_0x228870) + '-' + encodeURIComponent(_0xdad294), _0x4fcc63 = await fetch(_0xd28359), _0x5246e7 = await _0x4fcc63[_0x767f1(0xa9b)](); if (_0x5246e7['code'] !== 0xc8 || !_0x5246e7['data'] || _0x5246e7[_0x767f1(0x253)]['length'] === 0x0) continue; const _0x10ba70 = _0x5246e7['data'][_0x767f1(0x944)](0x0, 0x5); for (const _0x1f5979 of _0x10ba70) { const _0x184044 = _0x767f1(0x213) + _0x443a32 + _0x767f1(0x71d) + _0x1f5979['id'], _0x55efb2 = await fetch(_0x184044), _0x30f851 = await _0x55efb2[_0x767f1(0xa9b)](), _0x3a384e = _0x30f851['data']?.['url']; if (await _0x55650f(_0x3a384e)) return { 'url': _0x3a384e, 'cover': _0x1f5979['cover'], 'source': _0x443a32 }; } } catch (_0x2386bd) { console['error']('Error\x20fetching\x20from\x20' + _0x443a32 + ':', _0x2386bd); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x36ec58(_0x180405) { const _0x312eb9 = _0x3b2836; if (_0x312eb9(0x77c) === _0x312eb9(0xa82)) _0xda4f15 = _0x1380d9(_0x24ff4f); else try { if (_0x312eb9(0x895) === 'htgUF') { const _0x558104 = JSON[_0x312eb9(0x258)](localStorage['getItem'](_0x312eb9(0x9d2)) || '{}'), _0x46f715 = { ..._0x558104, ..._0x180405 }; localStorage[_0x312eb9(0xa56)](_0x312eb9(0x9d2), JSON[_0x312eb9(0x7d5)](_0x46f715)); } else _0xc37537 = _0x44bdbb[_0x312eb9(0x7d5)](_0x144f0d), _0x18335a[_0x312eb9(0x4cf)](_0x312eb9(0x43f)); } catch (_0x4f012f) { console[_0x312eb9(0x390)](_0x312eb9(0x91a), _0x4f012f); } } async function _0x5284c8() { const _0x2e9735 = _0x3b2836, _0x6e4da7 = document[_0x2e9735(0x67e)](_0x2e9735(0x399)), _0x347fb7 = document[_0x2e9735(0x67e)](_0x2e9735(0x778)); try { if (_0x2e9735(0x6e4) !== 'Xzyuk') { let _0x1d3d36 = await _0x2995f2(_0x2e9735(0xa6d)); if (!_0x1d3d36) { const _0x3c37a9 = JSON[_0x2e9735(0x258)](localStorage[_0x2e9735(0x6e3)](_0x2e9735(0x9d2)) || '{}'); if (_0x3c37a9[_0x2e9735(0x3e9)]) { if ('oXFIo' !== _0x2e9735(0x59e)) { _0x147f45(_0x2e9735(0x17e), _0x2e9735(0x128)); if (_0x1fdc5f) { const _0x13d5f9 = _0x41d309[_0x2e9735(0x9cd)][_0x2e9735(0x270)](_0x5e0009 => _0x5e0009['id'] === _0x57e5aa); if (!_0x13d5f9) return; _0x3afc0c[_0x2e9735(0x67e)]('editing-world-book-id')[_0x2e9735(0x552)] = _0x13d5f9['id'], _0x59028c[_0x2e9735(0x67e)]('world-book-editor-title')[_0x2e9735(0x52e)] = '编辑条目', _0x195a02[_0x2e9735(0x67e)](_0x2e9735(0x8bb))['value'] = _0x13d5f9[_0x2e9735(0x589)], _0x282400[_0x2e9735(0x67e)](_0x2e9735(0x4ca))[_0x2e9735(0x552)] = _0x13d5f9['content']; } else _0x53c68f[_0x2e9735(0x67e)](_0x2e9735(0x3fc))[_0x2e9735(0x552)] = '', _0x396d79[_0x2e9735(0x67e)](_0x2e9735(0x1e2))['textContent'] = '新建条目', _0x353e56['getElementById'](_0x2e9735(0x8bb))[_0x2e9735(0x552)] = '', _0xe65cfa['getElementById'](_0x2e9735(0x4ca))['value'] = ''; } else _0x1d3d36 = await _0x1707d7(_0x3c37a9[_0x2e9735(0x3e9)]), await _0x59767c('widget_badge', _0x1d3d36); } } if (_0x1d3d36) _0x2e9735(0x292) === 'dzjem' ? (_0x7965f1(_0x2f4579), _0x18c3b3()) : (_0x347fb7[_0x2e9735(0x45f)] = URL[_0x2e9735(0x709)](_0x1d3d36), _0x347fb7[_0x2e9735(0x7df)][_0x2e9735(0x741)] = _0x2e9735(0x1f1), _0x6e4da7[_0x2e9735(0x7df)][_0x2e9735(0x9d5)] = _0x2e9735(0x527)); else { if (_0x2e9735(0x626) !== _0x2e9735(0x5ed)) _0x347fb7[_0x2e9735(0x7df)][_0x2e9735(0x741)] = _0x2e9735(0x527), _0x6e4da7[_0x2e9735(0x7df)][_0x2e9735(0x9d5)] = _0x2e9735(0x1e6); else { const _0x3cd16a = _0x24bfa8[_0x2e9735(0x709)](_0x38cfc4); _0x32c3b5['src'] = _0x3cd16a, _0x358d93['onload'] = () => _0x340b1e['revokeObjectURL'](_0x3cd16a); } } _0x6e4da7[_0x2e9735(0x7df)][_0x2e9735(0x741)] = _0x2e9735(0x1f1); } else { const _0x9ce3a7 = _0x5d5d15['chats']['find'](_0x1fa8b4 => _0x1fa8b4[_0x2e9735(0x277)] && _0x1fa8b4['activeListenSession'][_0x2e9735(0x3ef)]); _0x9ce3a7 && (_0x9ce3a7['activeListenSession'] = null, _0x2cd097(), _0x21edce('同步已断开。'), _0x4bd65c(), _0x1686aa[_0x2e9735(0x32b)][_0x2e9735(0x318)](_0x2e9735(0x716)), _0x5baf56(() => _0xd49f[_0x2e9735(0x7df)][_0x2e9735(0x741)] = _0x2e9735(0x527), 0x12c)); } } catch (_0x3fb386) { console[_0x2e9735(0x390)]('加载徽章图片失败', _0x3fb386); } } async function _0xa4a6d5() { const _0x17d3c3 = _0x3b2836, _0x422594 = document[_0x17d3c3(0x67e)](_0x17d3c3(0x9a9)), _0x43de6e = document[_0x17d3c3(0x67e)]('card-image'), _0x292b61 = document[_0x17d3c3(0x67e)](_0x17d3c3(0x335)), _0xc1396a = document[_0x17d3c3(0x67e)](_0x17d3c3(0x9ad)); try { if (_0x17d3c3(0x931) === _0x17d3c3(0xa99)) { const _0x56e4da = _0x4c0c4a[_0x17d3c3(0xade)][_0x17d3c3(0x270)](_0x580bc6 => _0x580bc6['id'] === _0x2a9134); _0x56e4da && (_0x56e4da[_0x17d3c3(0x589)] = _0x186733, _0x56e4da[_0x17d3c3(0x347)] = _0x3b5c89, _0x56e4da[_0x17d3c3(0x434)] = _0x2a7d9a); } else { let _0x3cc6cc = await _0x2995f2('widget_card'); _0x3cc6cc ? (_0x43de6e[_0x17d3c3(0x45f)] = URL[_0x17d3c3(0x709)](_0x3cc6cc), _0x43de6e[_0x17d3c3(0x7df)][_0x17d3c3(0x741)] = _0x17d3c3(0x1f1), _0x422594['style'][_0x17d3c3(0x9d5)] = _0x17d3c3(0x527), _0x422594['style'][_0x17d3c3(0x7ce)] = _0x17d3c3(0xa46)) : _0x17d3c3(0x187) === _0x17d3c3(0x77a) ? (_0x22e851[_0x17d3c3(0x4cf)](_0x17d3c3(0x88f) + _0x269e89), _0x67fd39['createObjectStore'](_0x10bc51, { 'keyPath': 'id' })) : (_0x43de6e[_0x17d3c3(0x7df)][_0x17d3c3(0x741)] = 'none', _0x422594[_0x17d3c3(0x7df)][_0x17d3c3(0x9d5)] = _0x17d3c3(0x1e6), _0x422594['style'][_0x17d3c3(0x7ce)] = _0x17d3c3(0x5bd)); _0x422594[_0x17d3c3(0x7df)][_0x17d3c3(0x741)] = _0x17d3c3(0x1f1); let _0x42d4f7 = await _0x2995f2(_0x17d3c3(0x935)); _0x42d4f7 ? (_0xc1396a[_0x17d3c3(0x45f)] = URL[_0x17d3c3(0x709)](_0x42d4f7), _0xc1396a['style'][_0x17d3c3(0x741)] = _0x17d3c3(0x1f1), _0x292b61[_0x17d3c3(0x7df)][_0x17d3c3(0x9d5)] = _0x17d3c3(0x527), _0x292b61['style']['background'] = _0x17d3c3(0xa46)) : _0x17d3c3(0x5c7) === 'zsZnv' ? (_0xc1396a[_0x17d3c3(0x7df)]['display'] = _0x17d3c3(0x527), _0x292b61['style'][_0x17d3c3(0x9d5)] = _0x17d3c3(0x1e6), _0x292b61[_0x17d3c3(0x7df)][_0x17d3c3(0x7ce)] = _0x17d3c3(0x5bd)) : (_0x4006e2[_0x17d3c3(0x45f)] = _0x523a17[_0x17d3c3(0x709)](_0x4b46aa), _0x4bc4d0[_0x17d3c3(0x7df)][_0x17d3c3(0x741)] = _0x17d3c3(0x1f1)), _0x292b61[_0x17d3c3(0x7df)]['display'] = 'block'; } } catch (_0x5376ff) { _0x17d3c3(0xac0) !== 'IqwYs' ? _0x5b1cf5 += _0x17d3c3(0x484) : console[_0x17d3c3(0x390)]('加载卡片图片失败', _0x5376ff); } } async function _0xa4a6d5() { const _0x559b71 = _0x3b2836; if ('lokYO' === _0x559b71(0x40e)) _0x247f49[_0x559b71(0xa1e)] === _0x559b71(0x7d1) && (_0x2ba56f[_0x559b71(0x69c)] = _0x2658ff['participantIds'][_0x559b71(0x1a0)](_0x13efa5 => _0x13efa5 !== _0x37ae25)); else { const _0x2269a3 = document[_0x559b71(0x67e)](_0x559b71(0x9a9)), _0x42bebc = document[_0x559b71(0x67e)](_0x559b71(0x9bf)); try { let _0x979a44 = await _0x2995f2(_0x559b71(0x7ed)); if (!_0x979a44) { const _0x7f7bcd = JSON[_0x559b71(0x258)](localStorage['getItem'](_0x559b71(0x23b)) || '{}'); if (_0x7f7bcd[_0x559b71(0x3e9)]) { if (_0x559b71(0x130) === _0x559b71(0x9b9)) return _0x559b71(0x965) + _0x317ffb; else console[_0x559b71(0x4cf)](_0x559b71(0x2ec)), _0x979a44 = await _0x1707d7(_0x7f7bcd[_0x559b71(0x3e9)]), await _0x59767c(_0x559b71(0x7ed), _0x979a44); } } _0x979a44 ? _0x559b71(0x276) !== _0x559b71(0x276) ? _0x188d0b += _0x559b71(0x693) : (_0x42bebc[_0x559b71(0x45f)] = URL[_0x559b71(0x709)](_0x979a44), _0x2269a3['style']['display'] = 'block') : _0x2269a3['style'][_0x559b71(0x741)] = 'none'; } catch (_0x336904) { if ('LDIRQ' !== 'LDIRQ') { const _0x26ab12 = _0x27d4cd(_0x3f0823[_0x559b71(0x972)]); return _0x26ab12?.[_0x559b71(0x589)] || 'Unknown'; } else console['error'](_0x559b71(0xae4), _0x336904); } try { let _0x5a8a0d = await _0x2995f2(_0x559b71(0x935)); const _0xae14a6 = document[_0x559b71(0x67e)]('card-image-2'), _0x5aa1c8 = document[_0x559b71(0x67e)](_0x559b71(0x335)); _0x5a8a0d ? (_0xae14a6['src'] = URL[_0x559b71(0x709)](_0x5a8a0d), _0x5aa1c8[_0x559b71(0x7df)][_0x559b71(0x741)] = _0x559b71(0x1f1)) : _0x5aa1c8['style'][_0x559b71(0x741)] = _0x559b71(0x527); } catch (_0x108e2c) { console[_0x559b71(0x390)](_0x559b71(0x883), _0x108e2c); } } } _0xc102cc[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5db58f = _0x3b2836; _0x5db58f(0x2c2) !== 'DWANK' ? (_0x59a745(), _0x52c85d(_0x5db58f(0x7bb), _0x5db58f(0x669))) : _0x28b820('获取模型失败:\x20' + _0x81e6da[_0x5db58f(0x332)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); }), document[_0x3b2836(0x67e)](_0x3b2836(0x92c))['addEventListener'](_0x3b2836(0x821), () => _0x52c85d('home', _0x3b2836(0x7bb))), document['getElementById']('add-user-profile-button')[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x2f73c2()), document[_0x3b2836(0x67e)]('back-to-user-list-from-edit')[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x1fe01c = _0x3b2836; _0x59a745(), _0x52c85d(_0x1fe01c(0x7bb), _0x1fe01c(0xaf7)); }), document[_0x3b2836(0x67e)]('save-user-profile-button')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x422952), document[_0x3b2836(0x67e)]('delete-user-profile-button')[_0x3b2836(0x990)](_0x3b2836(0x821), _0x27d4e8), document[_0x3b2836(0x67e)](_0x3b2836(0x7fd))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x3e3a38 = _0x3b2836; if (_0x3e3a38(0x9ef) === _0x3e3a38(0x6cc)) { _0x3fb747(_0x3e3a38(0x58e)); return; } else { const _0x26f47f = document[_0x3e3a38(0x67e)](_0x3e3a38(0x826))[_0x3e3a38(0x552)]; _0x26f47f && (_0x57ec14['activeUserProfileId'] = _0x26f47f, _0x203e68(), _0x33f536(_0x3e3a38(0x960)), _0x59a745(), document[_0x3e3a38(0x67e)](_0x3e3a38(0x7fd))['style']['display'] = _0x3e3a38(0x527)); } }); function _0xb1d08(_0x5e9962) { const _0x22cb8c = _0x3b2836; if ('KomlF' !== 'QyGzD') { const _0x78b6f0 = _0x57ec14[_0x22cb8c(0x313)][_0x22cb8c(0x270)](_0x28cbc5 => _0x28cbc5['id'] === _0x5e9962), _0x5e7980 = _0x78b6f0?.['boundUserProfileId']; let _0x42d707 = _0x57ec14[_0x22cb8c(0x391)][_0x22cb8c(0x270)](_0x1ca9f0 => _0x1ca9f0['id'] === _0x5e7980); return !_0x42d707 && (_0x42d707 = _0x57ec14[_0x22cb8c(0x391)][_0x22cb8c(0x270)](_0x500853 => _0x500853['id'] === _0x57ec14[_0x22cb8c(0x422)]) || _0x57ec14[_0x22cb8c(0x391)][0x0]), _0x42d707 || { 'name': '用户', 'avatar': _0x1f7795, 'persona': '' }; } else { const _0x4b385c = _0x1d28f7[_0x22cb8c(0x494)]('div'); _0x4b385c[_0x22cb8c(0x52e)] = _0x2bde69, _0x4b385c['addEventListener']('click', () => { const _0x9a2b6a = _0x22cb8c; _0x3d2b23[_0x9a2b6a(0x552)] = _0x584d24, _0x27fc8b['classList'][_0x9a2b6a(0x318)](_0x9a2b6a(0x716)); }), _0xb346cb[_0x22cb8c(0x6b3)](_0x4b385c); } } function _0x542129(_0x3a77fc) { const _0x25d9f7 = _0x3b2836, _0x2efc95 = document['getElementById'](_0x3a77fc); _0x2efc95[_0x25d9f7(0x282)] = '', _0x57ec14['userProfiles'][_0x25d9f7(0x5e2)](_0x30f7cd => { const _0x4df719 = _0x25d9f7; if ('TgrHr' !== _0x4df719(0x729)) _0x49e879[_0x4df719(0x68a)][_0x4df719(0x920)](_0x3027d2, 0x1), _0x110ded(), _0x572831(); else { const _0x1b2f96 = document[_0x4df719(0x494)](_0x4df719(0x16b)); _0x1b2f96[_0x4df719(0x552)] = _0x30f7cd['id'], _0x1b2f96['textContent'] = _0x30f7cd[_0x4df719(0x589)], _0x2efc95['appendChild'](_0x1b2f96); } }); } function _0x1f883d(_0x3f04cb) { const _0x59cc8a = _0x3b2836; if ('iggZz' !== _0x59cc8a(0x956)) { const _0x2b8b93 = _0x382342(_0x3f04cb), _0x2a8aea = document['getElementById'](_0x59cc8a(0x782)); _0x2a8aea[_0x59cc8a(0x7df)][_0x59cc8a(0x6dd)] = ''; let _0x55fc98 = document[_0x59cc8a(0x67e)](_0x59cc8a(0x1be) + _0x3f04cb); if (_0x55fc98) _0x55fc98[_0x59cc8a(0x282)] = ''; if (!_0x2b8b93) return; _0x2b8b93[_0x59cc8a(0x783)] && ('DyhYk' !== _0x59cc8a(0x578) ? (_0x4e2a9b[_0x59cc8a(0x390)](_0x59cc8a(0xad5), _0x27275e), _0x3010a4 && (_0x15645a[_0x59cc8a(0x7df)][_0x59cc8a(0x6dd)] = '')) : (_0x2a8aea[_0x59cc8a(0x7df)]['backgroundImage'] = 'url(\x27' + _0x2b8b93[_0x59cc8a(0x783)] + '\x27)', _0x2a8aea['style'][_0x59cc8a(0x4b5)] = _0x59cc8a(0xa4e), _0x2a8aea[_0x59cc8a(0x7df)]['backgroundPosition'] = _0x59cc8a(0x21e))); if (_0x2b8b93[_0x59cc8a(0x4e6)]) { if (_0x59cc8a(0xa24) !== _0x59cc8a(0x77d)) { let _0x488b01 = document[_0x59cc8a(0x67e)]('style-' + _0x2b8b93['id']); !_0x488b01 && (_0x488b01 = document[_0x59cc8a(0x494)](_0x59cc8a(0x7df)), _0x488b01['id'] = 'style-' + _0x2b8b93['id'], document[_0x59cc8a(0x6d4)]['appendChild'](_0x488b01)); const _0x2c312b = _0x2b8b93[_0x59cc8a(0x4e6)], _0x2333fd = _0x2c312b[_0x59cc8a(0x254)](/\.bubble\.sent/g, _0x59cc8a(0xa95) + _0x2b8b93['id'] + _0x59cc8a(0x727))['replace'](/\.bubble\.received/g, _0x59cc8a(0xa95) + _0x2b8b93['id'] + _0x59cc8a(0x4f1)); _0x488b01[_0x59cc8a(0x282)] = _0x2333fd; } else { const _0xd8c37f = _0x36049f[_0x59cc8a(0x258)](_0x4e910e); _0x2925cb[_0x59cc8a(0x241)](_0xd8c37f) && (_0x62364c = _0xd8c37f['filter'](_0x45d5c7 => _0x45d5c7 && typeof _0x45d5c7 === _0x59cc8a(0x204) && typeof _0x45d5c7[_0x59cc8a(0x1a4)] === 'string' && typeof _0x45d5c7[_0x59cc8a(0x6fd)] !== _0x59cc8a(0xace))); } } } else _0x461271 = new _0x2303f6(_0x5f5b8e[_0x59cc8a(0x5a9)]['apply'](null, _0x88857b)), _0x4dfa84 = _0x5e2a70['toLocaleString'](_0x59cc8a(0x7bf), { 'dateStyle': _0x59cc8a(0x344), 'timeStyle': _0x59cc8a(0x930) }); } function _0x319b62() { const _0x2eacdd = _0x3b2836; if ('iQXPO' === 'iQXPO') { const _0x173d39 = document[_0x2eacdd(0x67e)](_0x2eacdd(0x8ac)); _0x173d39[_0x2eacdd(0x282)] = ''; const _0x2ae1b8 = _0x30158e => { const _0xf6e5b5 = _0x2eacdd; _0x57ec14[_0xf6e5b5(0x903)][_0x30158e] = null; if (_0x30158e === 'image') _0x57ec14['pendingPostAttachments']['imageId'] = null; _0x319b62(); }, _0x5a7f03 = _0x57ec14['pendingPostAttachments'][_0x2eacdd(0x704)], _0x3829c2 = _0x57ec14['pendingPostAttachments'][_0x2eacdd(0x89f)]; if (_0x5a7f03) { if (_0x2eacdd(0x88e) === _0x2eacdd(0x6d5)) { if (!_0xc14c65['activeQuote']) return; _0x4222cb['textContent'] = _0x2eacdd(0x31c) + _0x8d6f7a[_0x2eacdd(0xa41)][_0x2eacdd(0x410)], _0xe36bd1[_0x2eacdd(0x52e)] = _0x3ef9b2['activeQuote']['content'], _0x2cdad7[_0x2eacdd(0x7df)][_0x2eacdd(0x741)] = _0x2eacdd(0x1f1); } else { const _0x3097b8 = document[_0x2eacdd(0x494)]('div'); _0x3097b8[_0x2eacdd(0x226)] = _0x2eacdd(0x30e), _0x3097b8['innerHTML'] = _0x2eacdd(0x15d), _0x3097b8[_0x2eacdd(0x433)](_0x2eacdd(0x6ff))[_0x2eacdd(0x4e2)] = () => _0x2ae1b8(_0x2eacdd(0x3e9)), _0x173d39[_0x2eacdd(0x6b3)](_0x3097b8), _0x2995f2(_0x5a7f03)[_0x2eacdd(0x69b)](_0x775a0b => { const _0x522410 = _0x2eacdd, _0x166810 = document[_0x522410(0x67e)](_0x522410(0x7f3)); _0x166810 && _0x775a0b && (_0x166810[_0x522410(0x45f)] = URL['createObjectURL'](_0x775a0b)); }); } } if (_0x3829c2) { const _0x475b38 = document[_0x2eacdd(0x494)](_0x2eacdd(0x962)); _0x475b38[_0x2eacdd(0x226)] = _0x2eacdd(0x30e), _0x475b38[_0x2eacdd(0x282)] = _0x2eacdd(0x749) + (_0x3829c2[_0x2eacdd(0x605)] || _0x520817) + _0x2eacdd(0x722) + _0x3829c2['songName'] + _0x2eacdd(0x325) + _0x3829c2['artist'] + _0x2eacdd(0x6b6), _0x475b38[_0x2eacdd(0x433)](_0x2eacdd(0x6ff))[_0x2eacdd(0x4e2)] = () => _0x2ae1b8(_0x2eacdd(0x89f)), _0x173d39[_0x2eacdd(0x6b3)](_0x475b38); } } else _0x3a7534 += _0x2eacdd(0x46b) + _0x263336['query'] + '”。\x0a'; } async function _0x305e7e(_0x53843e) { const _0x414d03 = _0x3b2836; if ('QhLSw' === _0x414d03(0x804)) return _0x568ae5[_0x414d03(0x313)][_0x414d03(0x270)](_0x1491c3 => _0x1491c3['id'] === _0xbe7664[_0x414d03(0x413)]); else { const _0xc0061b = _0x57ec14[_0x414d03(0xade)]['find'](_0x1c7f74 => _0x1c7f74['id'] === _0x57ec14[_0x414d03(0x3b8)]); if (!_0xc0061b) return; _0x58ea7f(!![], _0x414d03(0x15f)), _0x57ec14[_0x414d03(0xa73)] = !![]; try { if ('RUhqK' !== 'GxTOi') { const _0x31bffd = _0xc0061b[_0x414d03(0x434)][_0x414d03(0x937)](_0x1f971f => _0x382342(_0x1f971f))[_0x414d03(0x1a0)](Boolean), _0x2191a0 = _0x1e789a(), _0x5a4eee = _0x31bffd[_0x414d03(0x937)](_0x4f6a7b => { const _0x10f19d = _0x414d03; if (_0x10f19d(0x298) === _0x10f19d(0x175)) { const _0x4cc9d3 = _0xd41820[_0x10f19d(0x52b)](/:\s|：\s/); if (_0x4cc9d3[_0x10f19d(0xb1e)] === 0x2) { const _0x598508 = _0x4cc9d3[0x0]['trim'](), _0x536d50 = _0x4cc9d3[0x1][_0x10f19d(0x3dd)](), _0xa153cc = { '歌名': _0x10f19d(0x9e4), '艺术家': '歌手', '专辑': '专辑' }; _0xa153cc[_0x598508] && (_0xd30c3f[_0xa153cc[_0x598508]] = _0x536d50); } } else { const { omniText: _0x3c10a4 } = _0x91c93b(_0x4f6a7b['id'], null), _0x9af87e = _0x4ca835(_0x4f6a7b['id']), _0x4243e9 = _0x4f6a7b[_0x10f19d(0x48e)] && _0x4f6a7b[_0x10f19d(0x48e)][_0x10f19d(0xb1e)] > 0x0 ? '\x0a\x0a#\x20' + _0x4f6a7b[_0x10f19d(0x589)] + _0x10f19d(0x16f) + _0x4f6a7b[_0x10f19d(0x48e)][_0x10f19d(0x937)](_0x119e70 => _0x57ec14[_0x10f19d(0x9cd)][_0x10f19d(0x270)](_0x4c0ecb => _0x4c0ecb['id'] === _0x119e70))['filter'](Boolean)[_0x10f19d(0x937)](_0x3d3f53 => _0x10f19d(0xa07) + _0x3d3f53[_0x10f19d(0x589)] + '\x0a' + _0x3d3f53[_0x10f19d(0x6fd)])[_0x10f19d(0x9f9)]('') : ''; return _0x10f19d(0x381) + _0x4f6a7b[_0x10f19d(0x589)] + ',\x20ID:\x20' + _0x4f6a7b['id'] + '\x0a\x20\x20人设:\x20' + _0x4f6a7b[_0x10f19d(0x7dc)] + _0x10f19d(0x304) + _0x3c10a4 + '\x0a' + _0x9af87e + '\x0a' + _0x4243e9; } })['join']('\x0a\x0a'), _0x17d990 = _0x21ba23(_0x53843e[_0x414d03(0x5ac)]) || { 'name': '用户' }, _0x2b3cbd = _0x17d990[_0x414d03(0x7dc)] ? _0x414d03(0x9c2) + _0x17d990[_0x414d03(0x589)] + _0x414d03(0x779) + _0x17d990[_0x414d03(0x7dc)] + '\x0a' : ''; let _0x53755f = null; if (_0x53843e[_0x414d03(0x3e9)]) _0x414d03(0x398) === _0x414d03(0x398) ? _0x53755f = _0x53843e['image'] : _0x46c2e2(_0x414d03(0x48f) + _0xad564f['message']); else { if (_0x53843e[_0x414d03(0x704)]) { if (_0x414d03(0x868) !== _0x414d03(0x868)) _0x36f34c['diaries']['splice'](_0x3aca37, 0x1), _0x5182dc(), _0x3977ec(), _0x47111b('【' + _0x3873f0[_0x414d03(0x589)] + '】的日记本已被清空。'); else try { const _0x32d6bd = await _0x2995f2(_0x53843e[_0x414d03(0x704)]); _0x32d6bd && (_0x53755f = await _0x2a338e(_0x32d6bd)); } catch (_0x2d8dfb) { console[_0x414d03(0x390)]('在准备动态回复时，读取图片失败:', _0x2d8dfb); } } } let _0x36d5a2 = _0x17d990['name'] + '刚刚发布了一条动态，内容是：“' + _0x53843e['content'] + '”'; if (_0x53755f) { if (_0x414d03(0x6ca) !== 'omidH') { _0x304f72[_0x414d03(0x4cf)](_0x414d03(0x297)); const _0x1fb649 = { 'version': 0x1, 'characters': [], 'worldBooks': [], 'chats': [], 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'perChatContextLines': 0x64, 'widgetBgImage': null, 'forceWhiteClock': ![] }, 'activeChatId': null, 'friendCircles': [], 'activeFriendCircleId': null, 'diaries': [], 'userProfiles': [], 'activeUserProfileId': null, 'accountingData': [], 'accountingLedger': {}, 'calendarEvents': [] }; if (_0x41632a[_0x414d03(0x241)](_0x31b804['characters'])) _0x1fb649['characters'] = _0x3ba5e2[_0x414d03(0x862)]; if (_0x3e3c5d[_0x414d03(0x241)](_0x564cb6[_0x414d03(0x9cd)])) _0x1fb649[_0x414d03(0x9cd)] = _0x27cc93[_0x414d03(0x9cd)]; if (_0xcef22[_0x414d03(0x241)](_0x5c1f14[_0x414d03(0x313)])) _0x1fb649[_0x414d03(0x313)] = _0x2e9ce7[_0x414d03(0x313)]; if (_0x2d383e[_0x414d03(0x3a2)]) _0x1fb649[_0x414d03(0x3a2)] = _0x53d8f7[_0x414d03(0x3a2)]; if (_0x5e941d[_0x414d03(0x8a1)]) _0x1fb649['preferences'] = { ..._0x1fb649[_0x414d03(0x8a1)], ..._0x3c5178['preferences'] }; if (_0x2a87fc[_0x414d03(0x413)]) _0x1fb649[_0x414d03(0x413)] = _0x387d82[_0x414d03(0x413)]; if (_0x1876b8[_0x414d03(0x241)](_0x55176d[_0x414d03(0x5aa)])) _0x1fb649[_0x414d03(0x5aa)] = _0x9e70a2[_0x414d03(0x5aa)]; if (_0x2f7ffc['isArray'](_0x12460b[_0x414d03(0xade)])) _0x1fb649[_0x414d03(0xade)] = _0x26ead1['friendCircles']; if (_0x12c375[_0x414d03(0x3b8)]) _0x1fb649['activeFriendCircleId'] = _0x54f461[_0x414d03(0x3b8)]; if (_0x302d51['isArray'](_0x4372ca[_0x414d03(0x391)])) _0x1fb649[_0x414d03(0x391)] = _0x328248[_0x414d03(0x391)]; if (_0x59dc80['activeUserProfileId']) _0x1fb649[_0x414d03(0x422)] = _0x7e216e[_0x414d03(0x422)]; if (_0xe1af43['isArray'](_0x4c7901[_0x414d03(0x68a)])) _0x1fb649['accountingData'] = _0xedbd6e['accountingData']; if (_0x1825e9[_0x414d03(0x420)]) _0x1fb649[_0x414d03(0x420)] = _0x1371db['accountingLedger']; if (_0x5e930f['isArray'](_0x314ba3['calendarEvents'])) _0x1fb649['calendarEvents'] = _0x80f52c[_0x414d03(0x1bf)]; if (!_0x545578['userProfiles'] && _0x1d75c9[_0x414d03(0xaf7)]) { const _0x5d62ce = { 'id': _0x414d03(0x7bc) + _0x567a0c[_0x414d03(0x2c5)](), 'name': _0x341651[_0x414d03(0xaf7)][_0x414d03(0x589)] || '我', 'avatar': _0x3f6493[_0x414d03(0xaf7)][_0x414d03(0x5b2)] || _0xd46b30, 'persona': _0x206fed['userProfile'][_0x414d03(0x7dc)] || '' }; _0x1fb649['userProfiles'] = [_0x5d62ce], _0x1fb649['activeUserProfileId'] = _0x5d62ce['id']; } _0x7d2be6[_0x414d03(0xa36)](_0x421d4b, _0x1fb649), _0x430b65(), _0xdf0d81('检测到旧版数据，已自动为您完成升级！'); } else _0x36d5a2 += _0x414d03(0x1c6); } _0x53843e[_0x414d03(0xa1e)] === _0x414d03(0x89f) && (_0x414d03(0x7dd) === _0x414d03(0x7dd) ? _0x36d5a2 += '\x20[并分享了歌曲:\x20' + _0x53843e[_0x414d03(0x9cf)] + '\x20-\x20' + _0x53843e[_0x414d03(0xa16)] + ']' : (_0x1c7fd0(), _0x6ceb86(_0x414d03(0xa06), _0x414d03(0x669)))); const _0x25dd64 = _0x414d03(0x309) + _0x5a4eee + '\x0a\x0a' + _0x2b3cbd + '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a' + _0x2191a0 + '\x0a\x0a#\x20用户的动态\x0a' + _0x36d5a2 + _0x414d03(0x580), _0x59f528 = [{ 'role': _0x414d03(0x70d), 'content': _0x25dd64 }], _0x3f3634 = { 'role': _0x414d03(0x2b3), 'content': _0x414d03(0x9b6) }; _0x53755f && (_0x414d03(0x93b) === 'NYJhh' ? _0x3f3634['image'] = _0x53755f : _0x8a8c59[_0x414d03(0x52e)] = _0x414d03(0x772)); _0x59f528['push'](_0x3f3634); const _0x5b0391 = await _0x5e65cf(_0x59f528, { 'json': !![] }), _0x88fc5c = _0x5b0391['match'](/({[\s\S]*})/); if (!_0x88fc5c) throw new Error(_0x414d03(0x2a0)); const _0x47146b = JSON['parse'](_0x88fc5c[0x1]), _0x394dee = _0xc0061b[_0x414d03(0x216)][_0x414d03(0x270)](_0x15cc88 => _0x15cc88['id'] === _0x53843e['id']); _0x394dee && (_0x394dee[_0x414d03(0x34d)] = _0x47146b[_0x414d03(0x34d)] || [], _0x394dee[_0x414d03(0x999)] = (_0x47146b['comments'] || [])[_0x414d03(0x937)]((_0x1157dd, _0x1e5e85) => ({ ..._0x1157dd, 'commentId': 'c_' + _0x53843e[_0x414d03(0x665)] + '_' + _0x1e5e85 })), _0x203e68(), _0x17f7c8()); } else _0x6b5c5a[_0x414d03(0x32b)][_0x414d03(0x318)]('show'); } catch (_0x39873e) { _0x414d03(0x559) === 'vtWMG' ? !_0x1e54d[_0x414d03(0x433)](_0x414d03(0x154))['contains'](_0x3c4ab8['target']) && (_0x5b9176[_0x414d03(0x32b)][_0x414d03(0x318)](_0x414d03(0x86e)), _0x1eda21['classList']['remove']('expanded')) : (console[_0x414d03(0x390)]('生成动态回复失败:', _0x39873e), _0x33f536(_0x414d03(0x686))); } finally { _0x58ea7f(![]), _0x57ec14[_0x414d03(0xa73)] = ![]; } } } function _0x3fa020() { const _0x39412d = _0x3b2836; if (_0x39412d(0x638) !== 'pIWuM') _0x5bdec3(![]), _0x1548b1[_0x39412d(0x842)][_0x39412d(0x552)] = ''; else { const _0x1289d0 = _0x57ec14[_0x39412d(0xade)][_0x39412d(0x270)](_0x3780d5 => _0x3780d5['id'] === _0x57ec14['activeFriendCircleId']), _0x2700f3 = _0x1289d0?.[_0x39412d(0x347)]; let _0x272c14 = _0x57ec14[_0x39412d(0x391)][_0x39412d(0x270)](_0xb70d0c => _0xb70d0c['id'] === _0x2700f3); !_0x272c14 && (_0x272c14 = _0x57ec14[_0x39412d(0x391)][_0x39412d(0x270)](_0x4f8d7e => _0x4f8d7e['id'] === _0x57ec14[_0x39412d(0x422)])), !_0x272c14 && (_0x39412d(0x348) === 'LpXSr' ? _0x272c14 = _0x57ec14['userProfiles'][0x0] : _0x36d9f4[_0x39412d(0x347)] === _0x2a34e3 && (_0x419c6f[_0x39412d(0x347)] = _0x22a20e['activeUserProfileId'])), _0x272c14 && (_0x39412d(0xac2) !== _0x39412d(0x474) ? document[_0x39412d(0x67e)](_0x39412d(0x65b))[_0x39412d(0x45f)] = _0x272c14[_0x39412d(0x5b2)] || _0x1f7795 : (_0x48166d[_0x39412d(0x7df)][_0x39412d(0x741)] = 'block', _0x1332bb[_0x39412d(0x7df)][_0x39412d(0x741)] = _0x39412d(0x527))); } } function _0x21424e(_0x5d1951) { const _0x555179 = _0x3b2836; let _0x58cae2 = 0x0, _0x391897 = 0x0, _0x4832bc = 0x0; if (_0x5d1951['length'] == 0x4) _0x58cae2 = '0x' + _0x5d1951[0x1] + _0x5d1951[0x1], _0x391897 = '0x' + _0x5d1951[0x2] + _0x5d1951[0x2], _0x4832bc = '0x' + _0x5d1951[0x3] + _0x5d1951[0x3]; else { if (_0x5d1951[_0x555179(0xb1e)] == 0x7) { if (_0x555179(0x92b) === _0x555179(0x92b)) _0x58cae2 = '0x' + _0x5d1951[0x1] + _0x5d1951[0x2], _0x391897 = '0x' + _0x5d1951[0x3] + _0x5d1951[0x4], _0x4832bc = '0x' + _0x5d1951[0x5] + _0x5d1951[0x6]; else return _0x5b0f03['error']('AI\x20试图创建事件，但找不到有效的用户ID。'), null; } } _0x58cae2 /= 0xff, _0x391897 /= 0xff, _0x4832bc /= 0xff; let _0x286bb0 = Math[_0x555179(0x7e0)](_0x58cae2, _0x391897, _0x4832bc), _0x97a56a = Math[_0x555179(0x5a9)](_0x58cae2, _0x391897, _0x4832bc), _0x6ceda9 = _0x97a56a - _0x286bb0, _0x2a8705 = 0x0, _0x1461b4 = 0x0, _0x29b440 = 0x0; if (_0x6ceda9 == 0x0) _0x2a8705 = 0x0; else { if (_0x97a56a == _0x58cae2) _0x2a8705 = (_0x391897 - _0x4832bc) / _0x6ceda9 % 0x6; else { if (_0x97a56a == _0x391897) _0x2a8705 = (_0x4832bc - _0x58cae2) / _0x6ceda9 + 0x2; else _0x2a8705 = (_0x58cae2 - _0x391897) / _0x6ceda9 + 0x4; } } _0x2a8705 = Math[_0x555179(0xa13)](_0x2a8705 * 0x3c); if (_0x2a8705 < 0x0) _0x2a8705 += 0x168; return _0x29b440 = (_0x97a56a + _0x286bb0) / 0x2, _0x1461b4 = _0x6ceda9 == 0x0 ? 0x0 : _0x6ceda9 / (0x1 - Math[_0x555179(0x72e)](0x2 * _0x29b440 - 0x1)), _0x1461b4 = +(_0x1461b4 * 0x64)[_0x555179(0x81f)](0x1), _0x29b440 = +(_0x29b440 * 0x64)[_0x555179(0x81f)](0x1), { 'h': _0x2a8705, 's': _0x1461b4, 'l': _0x29b440 }; } function _0xa56f01() { const _0x29cdf7 = _0x3b2836; if ('HaNOQ' === 'WoxPL') { const _0x43d5db = _0xa5b232[_0x29cdf7(0x74c)]('p'); _0x43d5db[_0x29cdf7(0x5e2)](_0x3caa23 => _0x3caa23[_0x29cdf7(0x32b)][_0x29cdf7(0x318)]('active')); const _0x5d29b6 = _0x4030c2[_0x29cdf7(0x67e)](_0x29cdf7(0x843) + _0x577fe9); _0x5d29b6 && (_0x5d29b6['classList'][_0x29cdf7(0x536)](_0x29cdf7(0x115)), _0x5d29b6[_0x29cdf7(0x663)]({ 'behavior': _0x29cdf7(0x4da), 'block': 'center' })); } else { const _0x4bd1bf = (_0x34da9d, _0x54f519, _0x412bd7) => { const _0x5ddcf0 = _0x29cdf7, _0x342442 = document[_0x5ddcf0(0x67e)](_0x34da9d); if (!_0x342442) return; let _0x4f2afc = null; try { _0x4f2afc = JSON[_0x5ddcf0(0x258)](localStorage[_0x5ddcf0(0x6e3)](_0x54f519) || '{}'); } catch { _0x4f2afc = {}; } _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0x5eb)] = _0x5ddcf0(0x4fc), _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0x878)] = '', _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0xb18)] = '', _0x342442['style'][_0x5ddcf0(0x593)] = '', _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0x9e3)] = '', _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0x6b9)] = ''; if (typeof _0x4f2afc[_0x5ddcf0(0x878)] === _0x5ddcf0(0x100) && typeof _0x4f2afc[_0x5ddcf0(0xb18)] === _0x5ddcf0(0x100)) _0x5ddcf0(0x159) !== _0x5ddcf0(0x397) ? (_0x342442['style'][_0x5ddcf0(0x878)] = _0x4f2afc[_0x5ddcf0(0x878)] + '%', _0x342442[_0x5ddcf0(0x7df)][_0x5ddcf0(0xb18)] = _0x4f2afc['left'] + '%') : (_0x252ac8['preventDefault'](), _0x20e8df()); else for (const _0x4b1ecf in _0x412bd7) { _0x342442[_0x5ddcf0(0x7df)][_0x4b1ecf] = _0x412bd7[_0x4b1ecf]; } }; _0x4bd1bf('home-clock-container', _0x29cdf7(0x692), { 'top': _0x29cdf7(0x5b3), 'left': _0x29cdf7(0x50a), 'transform': 'translateX(-50%)' }), _0x4bd1bf(_0x29cdf7(0x2f6), _0x29cdf7(0x66f), { 'top': '20%', 'right': '4%' }), _0x4bd1bf(_0x29cdf7(0x468), _0x29cdf7(0xa91), { 'top': _0x29cdf7(0x8c6), 'right': _0x29cdf7(0x326) }), _0x4bd1bf(_0x29cdf7(0x5cb), _0x29cdf7(0x5af), { 'top': '8%', 'right': _0x29cdf7(0x326) }), _0x4bd1bf(_0x29cdf7(0x45c), _0x29cdf7(0x50b), { 'top': '8%', 'right': '4%' }), _0x4bd1bf(_0x29cdf7(0x83c), _0x29cdf7(0x633), { 'top': _0x29cdf7(0x4de), 'left': '5%' }), _0x4bd1bf(_0x29cdf7(0x54b), _0x29cdf7(0x14f), { 'top': '71%', 'left': '29%' }), _0x4bd1bf(_0x29cdf7(0x3e6), _0x29cdf7(0x8e8), { 'top': _0x29cdf7(0x7a0), 'left': '5%' }), _0x4bd1bf('app-accounting', 'appIconPosition_app-accounting', { 'top': '59%', 'left': _0x29cdf7(0x864) }), _0x4bd1bf(_0x29cdf7(0x399), 'badgeState', { 'top': _0x29cdf7(0xb0a), 'right': '5%' }), _0x4bd1bf(_0x29cdf7(0x335), _0x29cdf7(0x86f), { 'top': '8%', 'left': '5%' }); const _0x5c43f3 = document[_0x29cdf7(0x67e)](_0x29cdf7(0x9a9)); _0x5c43f3 && (_0x5c43f3[_0x29cdf7(0x7df)][_0x29cdf7(0x5eb)] = _0x29cdf7(0x4fc), _0x5c43f3[_0x29cdf7(0x7df)][_0x29cdf7(0x878)] = _0x29cdf7(0x9a7), _0x5c43f3[_0x29cdf7(0x7df)]['left'] = _0x29cdf7(0x50a), _0x5c43f3[_0x29cdf7(0x7df)][_0x29cdf7(0x6b9)] = _0x29cdf7(0x983), _0x5c43f3[_0x29cdf7(0x7df)]['display'] = _0x29cdf7(0x1f1)); const _0x2150cd = document['getElementById'](_0x29cdf7(0x1da)); _0x2150cd && (_0x2150cd[_0x29cdf7(0x7df)][_0x29cdf7(0x5eb)] = _0x29cdf7(0x4fc), _0x2150cd[_0x29cdf7(0x7df)][_0x29cdf7(0x878)] = _0x29cdf7(0x2b9), _0x2150cd[_0x29cdf7(0x7df)][_0x29cdf7(0xb18)] = '50%', _0x2150cd[_0x29cdf7(0x7df)][_0x29cdf7(0x6b9)] = _0x29cdf7(0x983), _0x2150cd[_0x29cdf7(0x7df)][_0x29cdf7(0x741)] = _0x29cdf7(0x79d)); } } function _0x15b470() { const _0x36c70a = _0x3b2836, _0x407a11 = document[_0x36c70a(0x67e)](_0x36c70a(0x33e)); _0x407a11[_0x36c70a(0x282)] = ''; const _0x3f95b3 = document[_0x36c70a(0x74c)](_0x36c70a(0x349)); _0x3f95b3[_0x36c70a(0x5e2)](_0x30aea4 => { const _0x2bc4aa = _0x36c70a, _0x136380 = _0x30aea4['id'], _0x2c64ea = _0x30aea4[_0x2bc4aa(0x433)](_0x2bc4aa(0x568))[_0x2bc4aa(0x52e)], _0x516e2b = _0x2bc4aa(0x3db) + _0x136380, _0x5fae95 = localStorage[_0x2bc4aa(0x6e3)](_0x516e2b), _0x3ff4af = document[_0x2bc4aa(0x494)](_0x2bc4aa(0x962)); _0x3ff4af['className'] = 'member-selection-item', _0x3ff4af[_0x2bc4aa(0x7df)]['padding'] = _0x2bc4aa(0x355), _0x3ff4af[_0x2bc4aa(0x282)] = _0x2bc4aa(0x526) + _0x136380 + _0x2bc4aa(0x5e4) + (_0x5fae95 || _0x2bc4aa(0x1fd)) + _0x2bc4aa(0x41e) + _0x2c64ea + _0x2bc4aa(0x424) + _0x136380 + _0x2bc4aa(0x606) + _0x136380 + _0x2bc4aa(0x542) + _0x516e2b + _0x2bc4aa(0x249), _0x407a11[_0x2bc4aa(0x6b3)](_0x3ff4af); const _0x4b4ff5 = document[_0x2bc4aa(0x67e)](_0x2bc4aa(0x573) + _0x136380); _0x4b4ff5['addEventListener']('change', async _0xd4e683 => { const _0x36b444 = _0x2bc4aa; if (_0x36b444(0x867) !== _0x36b444(0x867)) _0x55f702[_0x36b444(0x390)](_0x36b444(0x547), _0x504219), _0x2b8eb3('保存失败:\x20' + _0x6c2a89['message']); else { const _0x15ff0e = _0xd4e683[_0x36b444(0x842)]['files'][0x0]; if (!_0x15ff0e) return; try { const _0x3392c5 = await _0x19643a(_0x15ff0e); localStorage[_0x36b444(0xa56)](_0x516e2b, _0x3392c5), document[_0x36b444(0x67e)]('preview_' + _0x136380)['src'] = _0x3392c5, _0x4f8536(); } catch (_0x1d586c) { _0x33f536('图标处理失败:\x20' + _0x1d586c[_0x36b444(0x332)]); } } }); }); } function _0x4f8536() { const _0x5c1f21 = _0x3b2836; if (_0x5c1f21(0x4a2) !== _0x5c1f21(0x4a2)) { const _0x4f8870 = _0x417525[_0x5c1f21(0x258)](_0x102f0d); _0x8d75f5[_0x5c1f21(0x241)](_0x4f8870) && (_0x1e88d3[_0x5c1f21(0x552)] = _0x4f8870[_0x5c1f21(0x937)](_0x48888c => _0x48888c[_0x5c1f21(0x589)] + '--' + _0x48888c[_0x5c1f21(0x609)])[_0x5c1f21(0x9f9)]('\x0a')); } else { const _0x157da0 = document['querySelectorAll']('.app-icon'); _0x157da0[_0x5c1f21(0x5e2)](_0xeede69 => { const _0x1b68e3 = _0x5c1f21, _0x5907cd = _0xeede69['id'], _0x46cfab = _0x1b68e3(0x3db) + _0x5907cd, _0x2660f0 = localStorage[_0x1b68e3(0x6e3)](_0x46cfab), _0x5a6ca2 = _0xeede69['querySelector']('.app-icon-img'); if (_0x2660f0) _0x5a6ca2[_0x1b68e3(0x282)] = _0x1b68e3(0x366) + _0x2660f0 + _0x1b68e3(0x6d8); else { if ('PeizI' === _0x1b68e3(0x8be)) _0x45a10a[_0x1b68e3(0x45f)] && (_0x1d8ce2[_0x1b68e3(0x596)] ? _0x8dbfa8[_0x1b68e3(0x350)]() : _0x3e96ba['pause']()); else { const _0xa2c63b = document[_0x1b68e3(0x433)](_0x1b68e3(0x9a0) + _0x5907cd + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x5907cd + _0x1b68e3(0x829))?.[_0x1b68e3(0x282)]; if (_0xa2c63b) { if (_0x1b68e3(0xa14) === _0x1b68e3(0x928)) { const _0x590829 = _0x51b6f9[_0x1b68e3(0x99d)](_0x1a656f); if (_0x590829) _0x538b1d[_0x1b68e3(0x388)][_0x590829] = _0x14ce15['getItem'](_0x590829); } else _0x5a6ca2[_0x1b68e3(0x282)] = _0xa2c63b; } } } }); } } function _0x5da3d1() { const _0x4e1d3f = _0x3b2836; if (_0x4e1d3f(0x967) !== _0x4e1d3f(0x206)) { const _0x4a4d89 = _0x57ec14[_0x4e1d3f(0xade)]['find'](_0x415a00 => _0x415a00['id'] === _0x57ec14[_0x4e1d3f(0x3b8)]), _0x157ea3 = _0x3a6dc0(); let _0x309c33 = []; if (_0x4a4d89 && _0x4a4d89[_0x4e1d3f(0x216)]) { if ('uzNiF' !== _0x4e1d3f(0x2b6)) { const _0x51f7f4 = _0x4a4d89[_0x4e1d3f(0x216)][_0x4e1d3f(0x1a0)](_0x3d7e46 => _0x3d7e46['type'] === _0x4e1d3f(0x89f) && _0x3d7e46[_0x4e1d3f(0x2ea)])[_0x4e1d3f(0x937)](_0x339cee => ({ ..._0x339cee, 'source': _0x4e1d3f(0x17b) })); _0x309c33['push'](..._0x51f7f4); } else _0xa5d904[_0x4e1d3f(0x624)](), _0x21da84(); } if (_0x157ea3 && _0x57ec14['conversationHistory']) { if ('YGfsT' === 'YGfsT') { const _0x1aaf8b = _0x57ec14[_0x4e1d3f(0xa8a)][_0x4e1d3f(0x1a0)](_0x1ed99d => _0x1ed99d[_0x4e1d3f(0xa1e)] === 'music' && _0x1ed99d['playableUrl'])['map'](_0x576c96 => ({ ..._0x576c96, 'source': 'chat' })); _0x309c33[_0x4e1d3f(0x1c5)](..._0x1aaf8b); } else _0x16cf57[_0x4e1d3f(0x52e)] = '▶'; } const _0x4019a2 = Array['from'](new Map(_0x309c33[_0x4e1d3f(0x937)](_0x27a87d => [_0x27a87d[_0x4e1d3f(0x2ea)], _0x27a87d]))['values']()); _0x57ec14['musicPlaylist'] = _0x4019a2[_0x4e1d3f(0x42a)]((_0x56c1e5, _0x6e1b7e) => _0x6e1b7e['timestamp'] - _0x56c1e5[_0x4e1d3f(0x665)]); } else _0x28f797['addEventListener']('click', () => _0x508dbd[_0x4e1d3f(0x821)]()), _0x1a732a[_0x4e1d3f(0x990)](_0x4e1d3f(0x4a3), _0x192774 => { const _0xd5d84c = _0x4e1d3f, _0x5d92e8 = _0x192774['target'][_0xd5d84c(0x7e7)][0x0]; if (!_0x5d92e8) return; try { const _0x5e088b = _0x3d71b0[_0xd5d84c(0x709)](_0x5d92e8); _0x48f243[_0xd5d84c(0x7df)][_0xd5d84c(0x6dd)] = _0xd5d84c(0xa5e) + _0x5e088b + '\x27)'; } catch (_0x2ad26a) { _0x3d5f0f('图片预览失败:\x20' + _0x2ad26a[_0xd5d84c(0x332)]); } }); } function _0x74afb1(_0x15feca) { const _0x4f6385 = _0x3b2836; if (_0x15feca < 0x0 || _0x15feca >= _0x421e14[_0x4f6385(0xb1e)]) return; _0x317c43 = _0x15feca; const _0x1bede0 = _0x421e14[_0x15feca]; _0x5cf78c[_0x4f6385(0x45f)] = _0x1bede0[_0x4f6385(0x2ea)] || _0x1bede0[_0x4f6385(0x609)], _0x5cf78c[_0x4f6385(0x350)](), _0x1d6c84(), _0x586dbd(); } function _0x1d6c84() { const _0x4b05ae = _0x421e14[_0x317c43]; _0xe00405(_0x4b05ae); } function _0x586dbd() { const _0x3c2580 = _0x3b2836; try { localStorage[_0x3c2580(0xa56)](_0x3c2580(0x1fb), JSON[_0x3c2580(0x7d5)]({ 'playlist': _0x57ec14[_0x3c2580(0x35e)], 'currentIndex': _0x57ec14[_0x3c2580(0x892)] })); } catch (_0x73e8ac) { console[_0x3c2580(0x390)](_0x3c2580(0xa6b), _0x73e8ac); } } function _0x16a93f() { const _0x5eaa77 = _0x3b2836; try { const _0x1645d0 = localStorage['getItem'](_0x5eaa77(0x1fb)); if (_0x1645d0) { const { playlist: _0x26a963, currentIndex: _0x561fa9 } = JSON['parse'](_0x1645d0); Array['isArray'](_0x26a963) && _0x26a963[_0x5eaa77(0xb1e)] > 0x0 && _0x561fa9 > -0x1 && (_0x57ec14[_0x5eaa77(0x35e)] = _0x26a963, _0x57ec14[_0x5eaa77(0x892)] = _0x561fa9, _0x57ec14[_0x5eaa77(0x621)] = ![], _0x1d6c84()); } } catch (_0x4b7308) { console['error'](_0x5eaa77(0x10b), _0x4b7308); } } function _0x177cde(_0xc2a6f8) { const _0x481d61 = _0x3b2836; if (_0x481d61(0x6e5) !== _0x481d61(0x6e5)) _0x4cf058(_0x481d61(0xa06), _0x481d61(0x34b)), _0x266059(![]); else { if (window[_0x481d61(0x690)]) clearTimeout(window[_0x481d61(0x690)]); const _0x2fe061 = _0xc2a6f8[_0x481d61(0x842)][_0x481d61(0x3a1)](_0x481d61(0x440)); if (!_0x2fe061) return; const _0x4e726a = _0x2fe061[_0x481d61(0x988)][_0x481d61(0x665)], _0x9fcc31 = _0x2fe061[_0x481d61(0x32b)][_0x481d61(0x776)]('user') ? _0x481d61(0x2b3) : 'ai'; if (!_0x4e726a) return; const _0x1e048a = () => { window['diaryPressTimer'] = setTimeout(() => { const _0x114b3c = _0x3df6; if (_0x114b3c(0x6dc) !== _0x114b3c(0x6dc)) { const _0x5e208f = _0x52c61c['find'](_0xd416d8 => _0xd416d8[_0x114b3c(0x589)] === _0x48facc[_0x114b3c(0x589)]); if (_0x5e208f) _0x55940c[_0x114b3c(0xa36)](_0x301d4a, { 'content': _0x114b3c(0x19c) + _0x5e208f['name'] + ']', 'displayUrl': _0x5e208f['url'] }); else _0x30e92a['content'] = _0x114b3c(0x70b) + _0x34a574[_0x114b3c(0x589)] + ']'; } else { if (_0xc2a6f8[_0x114b3c(0xa1e)] === 'touchstart') _0xc2a6f8[_0x114b3c(0x624)](); _0x3ca077(parseInt(_0x4e726a, 0xa), _0x9fcc31); } }, 0x320); }, _0x48ee5b = () => { const _0x177eeb = _0x481d61; if (_0x177eeb(0x786) === _0x177eeb(0x55d)) { const _0x3b42f4 = _0x12b319[_0x177eeb(0xae0)]['shift'](); _0x25ab54[_0x177eeb(0x52e)] = _0x3b42f4[_0x177eeb(0x69a)] === 'narrator' ? '旁白' : _0x3b42f4[_0x177eeb(0x69a)], _0x5ece87[_0x177eeb(0x52e)] = _0x3b42f4[_0x177eeb(0x45a)], _0x3b42f4[_0x177eeb(0x69a)] !== _0x177eeb(0xa86) && _0x29159a(_0x3ac57d[_0x177eeb(0x601)], _0x3b42f4[_0x177eeb(0x51f)]); } else { if (window['diaryPressTimer']) clearTimeout(window[_0x177eeb(0x690)]); } }; document[_0x481d61(0x990)](_0x481d61(0x280), _0x48ee5b, { 'once': !![] }), document[_0x481d61(0x990)](_0x481d61(0x517), _0x48ee5b, { 'once': !![] }), document['addEventListener'](_0x481d61(0x39c), _0x48ee5b, { 'once': !![] }), _0x1e048a(); } } function _0x3ca077(_0x4a6b80, _0x288e30) { const _0x13df3e = _0x3b2836; if ('QsJRC' === _0x13df3e(0xb09)) { _0x1d4caf(_0x13df3e(0x3be)); return; } else { const _0x3a01a7 = _0x13df3e(0x6a2) + _0x4a6b80; let _0x235340 = document[_0x13df3e(0x67e)](_0x3a01a7); if (_0x235340) return; const _0x377281 = _0x13df3e(0x984) + _0x3a01a7 + _0x13df3e(0x519) + (_0x288e30 === 'ai' ? '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>' : '') + _0x13df3e(0x404); document[_0x13df3e(0x570)]['insertAdjacentHTML']('beforeend', _0x377281); const _0x4d35fe = document[_0x13df3e(0x67e)](_0x3a01a7), _0x4ac85d = () => _0x4d35fe[_0x13df3e(0x318)](); _0x4d35fe[_0x13df3e(0x433)]('.choice-modal-backdrop')[_0x13df3e(0x4e2)] = _0x4ac85d, _0x4d35fe[_0x13df3e(0x433)](_0x13df3e(0x52f))[_0x13df3e(0x4e2)] = _0x4ac85d, _0x4d35fe[_0x13df3e(0x433)](_0x13df3e(0x1b8))[_0x13df3e(0x4e2)] = () => { _0x59d84c(_0x4a6b80), _0x4ac85d(); }, _0x288e30 === 'ai' && (_0x4d35fe[_0x13df3e(0x433)](_0x13df3e(0x3cc))[_0x13df3e(0x4e2)] = () => { const _0x302d60 = _0x13df3e; if ('EwfpB' === 'EwfpB') _0x3194f3(_0x4a6b80), _0x4ac85d(); else { const _0x2d54dc = _0x39caba[_0x302d60(0x676)](); _0x2d54dc[_0x302d60(0x465)] = () => _0x2f227b(_0x2d54dc[_0x302d60(0x20c)]), _0x2d54dc['onerror'] = () => _0x59e844(_0x2d54dc['error']); } }); } } async function _0x59d84c(_0x13b002) { const _0x289fd8 = _0x3b2836; if ('uXltA' === _0x289fd8(0x611)) { const _0x4d78c5 = await _0x156ce5(_0x289fd8(0x880)); if (!_0x4d78c5) return; const _0x52edad = _0x57ec14[_0x289fd8(0x5aa)][_0x289fd8(0x270)](_0xf1bc93 => _0xf1bc93[_0x289fd8(0x90d)] === _0x57ec14[_0x289fd8(0x461)]); if (!_0x52edad) return; const _0x3773eb = _0x52edad[_0x289fd8(0x8c4)][_0x289fd8(0x49c)](_0x26614b => _0x26614b[_0x289fd8(0x665)] === _0x13b002); _0x3773eb > -0x1 && (_0x52edad[_0x289fd8(0x8c4)]['splice'](_0x3773eb, 0x1), _0x203e68(), _0x26f8a3(), _0x33f536(_0x289fd8(0x9eb))); } else { const _0x5f79d8 = _0x38051b ?? _0x15bef7['value']['trim'](); if (_0x5f79d8 === '' || !_0x6e5d6e[_0x289fd8(0x413)]) return; const _0x4628ab = _0x5ccbc1[_0x289fd8(0x433)](_0x289fd8(0x31b)), _0x69a7b5 = _0x4628ab['id'] === _0x289fd8(0x74f), _0x4cfe63 = { 'role': 'user', 'content': _0x5f79d8, 'timestamp': _0x28148b['now'](), 'isOffline': _0x69a7b5 }; _0x24653f['activeQuote'] && (_0x4cfe63[_0x289fd8(0x961)] = { ..._0x215682[_0x289fd8(0xa41)] }), _0x3153bf[_0x289fd8(0xa8a)][_0x289fd8(0x1c5)](_0x4cfe63), _0x556b35(), _0x4931ec(), !_0x4d134b && (_0x44fc15[_0x289fd8(0x552)] = ''), _0x2ab4cc(); } } async function _0x3194f3(_0x12c237) { const _0x3775b9 = _0x3b2836; if (_0x3775b9(0x9df) !== _0x3775b9(0x9df)) return ''; else { const _0x497957 = _0x57ec14[_0x3775b9(0x5aa)]['find'](_0x16157c => _0x16157c['characterId'] === _0x57ec14[_0x3775b9(0x461)]); if (!_0x497957) return; const _0x44c92f = _0x497957[_0x3775b9(0x8c4)][_0x3775b9(0x49c)](_0x155508 => _0x155508[_0x3775b9(0x665)] === _0x12c237); _0x44c92f > -0x1 && (_0x497957[_0x3775b9(0x8c4)]['splice'](_0x44c92f, 0x1), _0x203e68(), _0x26f8a3(), await _0x5cb6a5()); } } function _0x2622ec() { const _0x9dd68d = _0x3b2836; if ('wtMAf' === _0x9dd68d(0x6a4)) { const _0x20a615 = document[_0x9dd68d(0x67e)](_0x9dd68d(0x27d)); _0x20a615['innerHTML'] = ''; const _0x5c4530 = _0x57ec14[_0x9dd68d(0x862)][_0x9dd68d(0x1a0)](_0x96c3c5 => _0x57ec14[_0x9dd68d(0x313)][_0x9dd68d(0x252)](_0xb8754e => _0xb8754e[_0x9dd68d(0xa1e)] === 'private' && _0xb8754e['participantIds'][_0x9dd68d(0x9e5)](_0x96c3c5['id']))); if (_0x5c4530[_0x9dd68d(0xb1e)] === 0x0) { if (_0x9dd68d(0x278) !== _0x9dd68d(0x278)) _0x280e84(![]), _0x207ca8[_0x9dd68d(0xa73)] = ![]; else { _0x20a615[_0x9dd68d(0x282)] = _0x9dd68d(0x9be); return; } } _0x5c4530['forEach'](_0x152013 => { const _0x17cadc = _0x9dd68d, _0x2b010c = document[_0x17cadc(0x494)]('li'); _0x2b010c[_0x17cadc(0x226)] = _0x17cadc(0x3af), _0x2b010c[_0x17cadc(0x988)]['charId'] = _0x152013['id'], _0x2b010c['innerHTML'] = _0x17cadc(0x7ec) + (_0x152013[_0x17cadc(0x5b2)] || _0x520817) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x152013[_0x17cadc(0x589)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2b010c['addEventListener'](_0x17cadc(0x821), () => { _0x42c39d(_0x152013['id']); }), _0x2b010c['querySelector'](_0x17cadc(0xae6))[_0x17cadc(0x990)]('click', () => { _0x42c39d(_0x152013['id']); }), _0x2b010c['querySelector'](_0x17cadc(0x830))[_0x17cadc(0x990)](_0x17cadc(0x821), _0x324dfb => { const _0xddb2b1 = _0x17cadc; _0x324dfb[_0xddb2b1(0x5f5)](), _0x5aba85(_0x152013['id']); }), _0x20a615[_0x17cadc(0x6b3)](_0x2b010c); }); } else { const _0x5bf0de = _0x4d1939[_0x9dd68d(0x67e)](_0x9dd68d(0x487)); _0x5bf0de[_0x9dd68d(0x52e)] = _0x32a1e1, _0x5bf0de[_0x9dd68d(0x7df)][_0x9dd68d(0x741)] = _0x9dd68d(0x1f1); if (_0x214a75['_t']) _0x2fe70e(_0x13e0b6['_t']); _0x27b899['_t'] = _0x2bc5f8(() => { const _0x54b263 = _0x9dd68d; _0x5bf0de[_0x54b263(0x7df)][_0x54b263(0x741)] = 'none'; }, 0x640); } } function _0x42c39d(_0x340e16) { const _0x2e0b32 = _0x3b2836; if (_0x2e0b32(0x618) === _0x2e0b32(0x618)) { const _0x1ce76a = _0x382342(_0x340e16); if (!_0x1ce76a) return; _0x57ec14[_0x2e0b32(0x461)] = _0x340e16; const _0x28d70d = _0x57ec14[_0x2e0b32(0x5aa)]['find'](_0x1454e3 => _0x1454e3[_0x2e0b32(0x90d)] === _0x340e16), _0x10c9f8 = _0x28d70d ? _0x28d70d['entries'][_0x2e0b32(0xb1e)] : 0x0, _0x13edf8 = 0x2; _0x57ec14[_0x2e0b32(0x53a)] = Math[_0x2e0b32(0x5a9)](0x0, Math['ceil'](_0x10c9f8 / _0x13edf8) - 0x1), document['getElementById'](_0x2e0b32(0x911))['textContent'] = _0x1ce76a[_0x2e0b32(0x589)] + '的日记本', _0x26f8a3(), _0x52c85d('diaryView', 'diaryList'); } else { _0x4eca46[_0x2e0b32(0x390)](_0x2e0b32(0x5a6)); return; } } function _0x26f8a3() { const _0xe86e20 = _0x3b2836, _0x55356b = document[_0xe86e20(0x67e)](_0xe86e20(0x110)), _0xde2586 = document[_0xe86e20(0x67e)](_0xe86e20(0xb0e)); _0x55356b['innerHTML'] = '', _0xde2586[_0xe86e20(0x282)] = ''; const _0xad9015 = _0x21c419() || { 'name': '我' }, _0x3ac2c7 = _0x57ec14[_0xe86e20(0x5aa)][_0xe86e20(0x270)](_0x59c20d => _0x59c20d['characterId'] === _0x57ec14[_0xe86e20(0x461)]); if (!_0x3ac2c7 || !_0x3ac2c7['entries'] || _0x3ac2c7[_0xe86e20(0x8c4)][_0xe86e20(0xb1e)] === 0x0) { _0x55356b[_0xe86e20(0x282)] = _0xe86e20(0xa27), _0xde2586[_0xe86e20(0x282)] = _0xe86e20(0x7cf), document[_0xe86e20(0x67e)](_0xe86e20(0xb15))[_0xe86e20(0x990)](_0xe86e20(0x821), _0x3263d2), document['getElementById']('diary-get-reply-button')[_0xe86e20(0x990)](_0xe86e20(0x821), _0x5cb6a5); return; } const _0x167425 = 0x2, _0xc94624 = [..._0x3ac2c7[_0xe86e20(0x8c4)]][_0xe86e20(0x42a)]((_0x135d98, _0x277e09) => _0x135d98[_0xe86e20(0x665)] - _0x277e09[_0xe86e20(0x665)]), _0x2d3267 = []; for (let _0x4716d8 = 0x0; _0x4716d8 < _0xc94624[_0xe86e20(0xb1e)]; _0x4716d8 += _0x167425) { 'OQNfi' !== _0xe86e20(0x98b) ? _0x2d3267['push'](_0xc94624[_0xe86e20(0x944)](_0x4716d8, _0x4716d8 + _0x167425)) : (_0x2d99c8(), _0x53396c(!![])); } const _0xdbc313 = _0x2d3267[_0xe86e20(0xb1e)]; _0x2d3267[_0xe86e20(0x5e2)]((_0x2372bb, _0xe294f0) => { const _0x4a3416 = _0xe86e20, _0x3cf5f4 = document['createElement'](_0x4a3416(0x962)); _0x3cf5f4['className'] = _0x4a3416(0x85a), _0x3cf5f4['id'] = _0x4a3416(0x33f) + _0xe294f0, _0xe294f0 === _0x57ec14[_0x4a3416(0x53a)] && _0x3cf5f4[_0x4a3416(0x32b)][_0x4a3416(0x536)]('is-visible'), _0x2372bb['forEach'](_0x30e470 => { const _0x586fc0 = _0x4a3416, _0x16f812 = _0x30e470['author'] === _0x586fc0(0x2b3) ? _0x586fc0(0x2b3) : 'ai', _0x302bb4 = _0x30e470['author'] === 'user' ? _0xad9015['name'] : _0x382342(_0x30e470[_0x586fc0(0x52a)])[_0x586fc0(0x589)], _0x1822a5 = document[_0x586fc0(0x494)]('div'); _0x1822a5[_0x586fc0(0x226)] = 'diary-entry\x20' + _0x16f812, _0x1822a5['dataset']['timestamp'] = _0x30e470[_0x586fc0(0x665)], _0x1822a5[_0x586fc0(0x7df)][_0x586fc0(0x394)] = _0x586fc0(0x527), _0x1822a5['style'][_0x586fc0(0x619)] = '0', _0x1822a5[_0x586fc0(0x282)] = _0x586fc0(0xa22) + _0x302bb4 + _0x586fc0(0xabe) + new Date(_0x30e470[_0x586fc0(0x665)])['toLocaleString'](_0x586fc0(0x7bf)) + _0x586fc0(0x89a) + _0x30e470['content'][_0x586fc0(0x254)](/\n/g, '<br>') + _0x586fc0(0x945), _0x3cf5f4[_0x586fc0(0x6b3)](_0x1822a5); }), _0x55356b['appendChild'](_0x3cf5f4); }), _0xde2586[_0xe86e20(0x282)] = _0xe86e20(0x401) + (_0x57ec14['diaryCurrentPage'] + 0x1) + _0xe86e20(0xb21) + _0xdbc313 + _0xe86e20(0x4c9), document['getElementById'](_0xe86e20(0x964))['disabled'] = _0x57ec14['diaryCurrentPage'] === 0x0, document[_0xe86e20(0x67e)](_0xe86e20(0x2af))['disabled'] = _0x57ec14['diaryCurrentPage'] === _0xdbc313 - 0x1, document[_0xe86e20(0x67e)](_0xe86e20(0x964))['addEventListener'](_0xe86e20(0x821), _0x1cdb99), document[_0xe86e20(0x67e)](_0xe86e20(0x2af))['addEventListener']('click', _0x206706), document[_0xe86e20(0x67e)](_0xe86e20(0xb15))['addEventListener'](_0xe86e20(0x821), _0x3263d2), document['getElementById'](_0xe86e20(0x3ba))[_0xe86e20(0x990)]('click', _0x5cb6a5); } function _0x206706() { const _0x15f9bc = _0x3b2836; if (_0x57ec14[_0x15f9bc(0x4bc)]) return; const _0x50b19e = _0x57ec14['diaryCurrentPage'], _0xd2ac2c = Math[_0x15f9bc(0x12c)](_0x57ec14[_0x15f9bc(0x5aa)][_0x15f9bc(0x270)](_0x4b69bb => _0x4b69bb['characterId'] === _0x57ec14[_0x15f9bc(0x461)])[_0x15f9bc(0x8c4)][_0x15f9bc(0xb1e)] / 0x2); if (_0x50b19e >= _0xd2ac2c - 0x1) return; _0x57ec14[_0x15f9bc(0x4bc)] = !![]; const _0x257df4 = _0x50b19e + 0x1, _0x2e8a26 = document['getElementById']('diary-page-' + _0x50b19e), _0x34745b = document['getElementById']('diary-page-' + _0x257df4); _0x2e8a26 && _0x34745b ? (_0x34745b[_0x15f9bc(0x32b)][_0x15f9bc(0x536)](_0x15f9bc(0xab1)), _0x2e8a26[_0x15f9bc(0x32b)][_0x15f9bc(0x536)]('is-exiting-left'), _0x34745b[_0x15f9bc(0x32b)]['add']('is-visible'), setTimeout(() => { const _0x599ca3 = _0x15f9bc; _0x2e8a26[_0x599ca3(0x32b)][_0x599ca3(0x318)](_0x599ca3(0x334), _0x599ca3(0x98e)), _0x34745b[_0x599ca3(0x32b)]['remove']('is-entering-from-right'), _0x57ec14[_0x599ca3(0x53a)] = _0x257df4, _0x26f8a3(), _0x57ec14[_0x599ca3(0x4bc)] = ![]; }, 0x2bc)) : _0x57ec14[_0x15f9bc(0x4bc)] = ![]; } function _0x1cdb99() { const _0x1ff691 = _0x3b2836; if ('OBqGh' !== 'OBqGh') return (_0x38e22b?.[_0x1ff691(0x862)] || [])[_0x1ff691(0x270)](_0x118bb4 => _0x118bb4['id'] === _0x243b07); else { if (_0x57ec14[_0x1ff691(0x4bc)]) return; const _0x567860 = _0x57ec14[_0x1ff691(0x53a)]; if (_0x567860 <= 0x0) return; _0x57ec14[_0x1ff691(0x4bc)] = !![]; const _0x4d4aa7 = _0x567860 - 0x1, _0x131cca = document[_0x1ff691(0x67e)](_0x1ff691(0x33f) + _0x567860), _0x2b3e4f = document[_0x1ff691(0x67e)](_0x1ff691(0x33f) + _0x4d4aa7); _0x131cca && _0x2b3e4f ? _0x1ff691(0x16d) !== 'mzblk' ? _0x24294b && _0x407ada(_0x242a84['id'], _0x3192db[_0x1ff691(0x937)](_0x410b46 => _0x410b46['id'])) : (_0x2b3e4f['classList'][_0x1ff691(0x536)](_0x1ff691(0x242)), _0x131cca['classList'][_0x1ff691(0x536)](_0x1ff691(0x5f1)), _0x2b3e4f[_0x1ff691(0x32b)][_0x1ff691(0x536)]('is-visible'), setTimeout(() => { const _0x1251ab = _0x1ff691; _0x1251ab(0x9c8) === _0x1251ab(0x9c8) ? (_0x131cca[_0x1251ab(0x32b)]['remove'](_0x1251ab(0x334), _0x1251ab(0x5f1)), _0x2b3e4f['classList'][_0x1251ab(0x318)]('is-entering-from-left'), _0x57ec14[_0x1251ab(0x53a)] = _0x4d4aa7, _0x26f8a3(), _0x57ec14[_0x1251ab(0x4bc)] = ![]) : _0xbed629 += '\x20(分享了歌曲:\x20' + _0x71c811['songName'] + '\x20-\x20' + _0x2d1de7['artist'] + ')'; }, 0x2bc)) : _0x57ec14[_0x1ff691(0x4bc)] = ![]; } } function _0x3263d2() { return new Promise(_0x5b94c9 => { const _0x2327e4 = _0x3df6, _0x217775 = _0x2327e4(0x549); document[_0x2327e4(0x570)][_0x2327e4(0x882)](_0x2327e4(0x25c), _0x217775); const _0x5686e6 = document[_0x2327e4(0x67e)](_0x2327e4(0x952)), _0xdd54c4 = document[_0x2327e4(0x67e)](_0x2327e4(0x837)), _0x2fc9fa = document[_0x2327e4(0x67e)]('diary-modal-save'), _0x2f40d8 = document['getElementById']('diary-modal-cancel'), _0x166f1d = _0x5686e6[_0x2327e4(0x433)](_0x2327e4(0xae9)), _0x21bee1 = () => { const _0x101b22 = _0x2327e4; _0x101b22(0x817) === _0x101b22(0x4a9) ? (_0x43aa5b(_0x14784d[_0x101b22(0x552)]), _0x5813d2()) : (_0x5686e6[_0x101b22(0x318)](), _0x5b94c9()); }; _0x2fc9fa[_0x2327e4(0x4e2)] = () => { const _0x5a8896 = _0x2327e4; if (_0x5a8896(0x2f3) !== _0x5a8896(0x2f3)) for (const _0x5133f7 in _0x2fe02f) { _0x2194b1[_0x5a8896(0x7df)][_0x5133f7] = _0x5babe5[_0x5133f7]; } else _0x266cf0(_0xdd54c4['value']), _0x21bee1(); }, _0x2f40d8['onclick'] = _0x21bee1, _0x166f1d[_0x2327e4(0x4e2)] = _0x21bee1; }); } function _0x266cf0(_0x50cf5c) { const _0x4d6fce = _0x3b2836, _0x5abd00 = _0x50cf5c[_0x4d6fce(0x3dd)](); if (!_0x5abd00 || !_0x57ec14['activeDiaryCharacterId']) return; let _0x5cdf90 = _0x57ec14[_0x4d6fce(0x5aa)][_0x4d6fce(0x270)](_0x264fc3 => _0x264fc3[_0x4d6fce(0x90d)] === _0x57ec14['activeDiaryCharacterId']); if (!_0x5cdf90) { if (_0x4d6fce(0x196) === _0x4d6fce(0x196)) _0x5cdf90 = { 'characterId': _0x57ec14[_0x4d6fce(0x461)], 'entries': [] }, _0x57ec14[_0x4d6fce(0x5aa)][_0x4d6fce(0x1c5)](_0x5cdf90); else try { const _0x1d172b = _0x5ddb5b['parse'](_0x1c9a22[_0x4d6fce(0x6e3)](_0x4d6fce(0x9d2)) || '{}'), _0x916991 = { ..._0x1d172b, ..._0x591dc5 }; _0x50ab14[_0x4d6fce(0xa56)](_0x4d6fce(0x9d2), _0x2f2e13[_0x4d6fce(0x7d5)](_0x916991)); } catch (_0x3c3a41) { _0x50e184['error']('保存徽章状态失败', _0x3c3a41); } } _0x5cdf90[_0x4d6fce(0x8c4)][_0x4d6fce(0x1c5)]({ 'timestamp': Date[_0x4d6fce(0x2c5)](), 'author': _0x4d6fce(0x2b3), 'content': _0x5abd00 }), _0x203e68(); const _0x54293f = _0x5cdf90[_0x4d6fce(0x8c4)]['length']; _0x57ec14[_0x4d6fce(0x53a)] = Math[_0x4d6fce(0x12c)](_0x54293f / 0x2) - 0x1, _0x26f8a3(); } async function _0x5cb6a5() { const _0x750434 = _0x3b2836, _0x278527 = _0x57ec14[_0x750434(0x5aa)]['find'](_0x116960 => _0x116960['characterId'] === _0x57ec14['activeDiaryCharacterId']), _0x4c7cee = _0x57ec14['activeDiaryCharacterId'], _0x2dd757 = _0x382342(_0x4c7cee); if (!_0x2dd757 || _0x57ec14[_0x750434(0xa73)]) return; _0x58ea7f(!![], 'TA正在提笔写日记...'), _0x57ec14['isGenerating'] = !![]; let _0x33f4e3 = []; try { const _0x239054 = _0x21c419() || { 'name': '你' }, _0x29c112 = _0x4ca835(_0x4c7cee), { omniText: _0x270735 } = _0x91c93b(_0x4c7cee, _0x57ec14['activeChatId']); let _0x45f60c = ''; if (_0x2dd757[_0x750434(0x48e)] && _0x2dd757['linkedWorldBookIds'][_0x750434(0xb1e)] > 0x0) { const _0x102d3e = _0x2dd757[_0x750434(0x48e)]['map'](_0x2030e3 => _0x57ec14[_0x750434(0x9cd)][_0x750434(0x270)](_0x5810d5 => _0x5810d5['id'] === _0x2030e3))['filter'](Boolean)['map'](_0xb53837 => _0x750434(0x201) + _0xb53837[_0x750434(0x589)] + '\x0a' + _0xb53837['content'])[_0x750434(0x9f9)](''); if (_0x102d3e) _0x45f60c = _0x750434(0x7f5) + _0x102d3e; } const _0xef7389 = _0x239054['persona'] ? _0x750434(0xa8b) + _0x239054[_0x750434(0x589)] + _0x750434(0x5bc) + _0x239054[_0x750434(0x7dc)] : '', _0x3df737 = _0x1e789a(); let _0x207b93 = _0x750434(0x78d); if (_0x278527 && _0x278527[_0x750434(0x8c4)]) { const _0x11a2d9 = _0x278527[_0x750434(0x8c4)][_0x750434(0x1a0)](_0x5ce646 => _0x5ce646[_0x750434(0x52a)] === _0x750434(0x2b3))[_0x750434(0x8a9)](); if (_0x11a2d9) { if (_0x750434(0x37d) !== _0x750434(0x6d9)) _0x207b93 = _0x11a2d9[_0x750434(0x6fd)]; else { const _0x54a2c4 = _0xc01147(_0x5bc944[_0x750434(0x988)][_0x750434(0xa4b)], 0xa); !_0x4e7134(_0x54a2c4) && _0x43ec37(_0x54a2c4); } } } const _0x49cbcf = _0x750434(0x99f) + _0x2dd757[_0x750434(0x589)] + '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a' + _0x239054[_0x750434(0x589)] + '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（' + _0x239054[_0x750434(0x589)] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x207b93 + _0x750434(0xa31) + _0x2dd757[_0x750434(0x7dc)] + '\x0a' + _0xef7389 + '\x0a' + _0x45f60c + _0x750434(0x251) + new Date()[_0x750434(0x97a)](_0x750434(0x7bf), { 'dateStyle': 'full', 'timeStyle': 'short' }) + _0x750434(0x4f5) + _0x456df6(new Date(_0x278527?.[_0x750434(0x8c4)]?.['at'](-0x1)?.['timestamp'] || Date[_0x750434(0x2c5)]())) + '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a' + (_0x270735 || _0x750434(0x147)) + _0x750434(0x4d5) + (_0x3df737 || _0x750434(0x2a1)) + _0x750434(0x49f); _0x33f4e3 = [{ 'role': 'system', 'content': _0x49cbcf }, { 'role': _0x750434(0x2b3), 'content': _0x750434(0x64a) }]; const _0x4b821b = await _0x5e65cf(_0x33f4e3); if (_0x4b821b) { if (_0x750434(0x379) !== _0x750434(0x8cb)) { let _0x5c1f11 = _0x57ec14[_0x750434(0x5aa)][_0x750434(0x270)](_0x118cb6 => _0x118cb6[_0x750434(0x90d)] === _0x4c7cee); !_0x5c1f11 && (_0x5c1f11 = { 'characterId': _0x4c7cee, 'entries': [] }, _0x57ec14['diaries'][_0x750434(0x1c5)](_0x5c1f11)); _0x5c1f11[_0x750434(0x8c4)][_0x750434(0x1c5)]({ 'timestamp': Date[_0x750434(0x2c5)](), 'author': _0x4c7cee, 'content': _0x4b821b }), _0x203e68(); const _0x383526 = _0x5c1f11['entries']['length']; _0x57ec14[_0x750434(0x53a)] = Math[_0x750434(0x12c)](_0x383526 / 0x2) - 0x1, _0x26f8a3(); } else throw _0x2a8e3b; } } catch (_0x4bbb97) { _0x33f536('生成日记失败:\x20' + _0x4bbb97[_0x750434(0x332)]); } finally { _0x58ea7f(![]), _0x57ec14[_0x750434(0xa73)] = ![]; } } function _0x3f4071() { const _0x698d17 = _0x3b2836; if (_0x698d17(0x673) !== _0x698d17(0x6f3)) { const _0xa85021 = document[_0x698d17(0x67e)](_0x698d17(0x4fd)), _0x236b6d = document[_0x698d17(0x67e)](_0x698d17(0x790)), _0x1510ec = document['querySelector']('#meeting-view-screen\x20.chat-input-area'); _0x57ec14['meetingViewMode'] === 'galgame' ? (_0xa85021[_0x698d17(0x7df)][_0x698d17(0x741)] = _0x698d17(0x527), _0x236b6d[_0x698d17(0x7df)]['display'] = _0x698d17(0x1f1)) : (_0xa85021[_0x698d17(0x7df)]['display'] = _0x698d17(0x1f1), _0x236b6d['style'][_0x698d17(0x741)] = _0x698d17(0x527)), _0x1510ec['style']['display'] = 'block'; } else _0x55bd98[_0x698d17(0xa8a)][_0x544428][_0x698d17(0x953)] = !![], _0x45e874(); } function _0x1ac4c3() { const _0x2d2df5 = _0x3b2836; if (_0x2d2df5(0x9b0) !== _0x2d2df5(0x9b0)) _0x130bce(_0x2d2df5(0xa06), _0x2d2df5(0x51a)); else { const _0x28fb15 = document[_0x2d2df5(0x67e)](_0x2d2df5(0x365)), _0x2488fe = document[_0x2d2df5(0x67e)](_0x2d2df5(0x7c6)); if (_0x57ec14[_0x2d2df5(0xae0)][_0x2d2df5(0xb1e)] > 0x0) { if (_0x2d2df5(0x630) !== _0x2d2df5(0x630)) { const _0x5a9c82 = _0x135c58[_0x2d2df5(0x67e)](_0x2d2df5(0x826))[_0x2d2df5(0x552)]; _0x5a9c82 && (_0x36669d[_0x2d2df5(0x422)] = _0x5a9c82, _0x1dcd6d(), _0x2e527d(_0x2d2df5(0x960)), _0x3e8be7(), _0x2468bf[_0x2d2df5(0x67e)](_0x2d2df5(0x7fd))[_0x2d2df5(0x7df)][_0x2d2df5(0x741)] = _0x2d2df5(0x527)); } else { const _0x5985a6 = _0x57ec14[_0x2d2df5(0xae0)][_0x2d2df5(0x7c4)](); _0x28fb15['textContent'] = _0x5985a6[_0x2d2df5(0x69a)] === _0x2d2df5(0xa86) ? '旁白' : _0x5985a6['speaker'], _0x2488fe['textContent'] = _0x5985a6[_0x2d2df5(0x45a)], _0x5985a6[_0x2d2df5(0x69a)] !== _0x2d2df5(0xa86) && _0x3de8df(_0x57ec14[_0x2d2df5(0x601)], _0x5985a6['emotion']); } } else { const _0x4e61cf = _0x57ec14[_0x2d2df5(0x86b)][_0x57ec14[_0x2d2df5(0x601)]]; if (_0x4e61cf && _0x4e61cf['length'] > 0x0) { if (_0x2d2df5(0x202) !== _0x2d2df5(0x3c6)) { _0x57ec14[_0x2d2df5(0xae0)] = [..._0x4e61cf]; const _0x1eef1f = _0x57ec14[_0x2d2df5(0xae0)][_0x2d2df5(0x7c4)](); _0x28fb15[_0x2d2df5(0x52e)] = _0x1eef1f['speaker'] === _0x2d2df5(0xa86) ? '旁白' : _0x1eef1f[_0x2d2df5(0x69a)], _0x2488fe[_0x2d2df5(0x52e)] = _0x1eef1f[_0x2d2df5(0x45a)], _0x1eef1f['speaker'] !== _0x2d2df5(0xa86) && _0x3de8df(_0x57ec14['activeMeetingCharId'], _0x1eef1f[_0x2d2df5(0x51f)]); } else _0x4e16ce = _0x1aac82[_0x2d2df5(0x3e9)]; } else _0x2d2df5(0x5c6) === 'ocEPp' ? (_0x28fb15[_0x2d2df5(0x52e)] = '旁白', _0x2488fe[_0x2d2df5(0x52e)] = _0x2d2df5(0x129)) : _0x5ba8bf[_0x2d2df5(0x961)] = { ..._0x8c6472[_0x2d2df5(0xa41)] }; } } } async function _0x3de8df(_0x52d724, _0x5ef6f0) { const _0x2726d0 = _0x3b2836, _0x10b822 = document['getElementById']('galgame-sprite'), _0x1a90c6 = document[_0x2726d0(0x67e)](_0x2726d0(0x3d8)), _0x11fcaf = _0x382342(_0x52d724), _0x2d5652 = _0x11fcaf?.[_0x2726d0(0x96b)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x2e7b26 = 0x50 * _0x2d5652[_0x2726d0(0x764)]; _0x1a90c6['style']['height'] = _0x2e7b26 + '%', _0x1a90c6[_0x2726d0(0x7df)][_0x2726d0(0x96a)] = _0x2e7b26 + '%', _0x1a90c6[_0x2726d0(0x7df)][_0x2726d0(0xb18)] = _0x2d5652['x'] + '%', _0x1a90c6[_0x2726d0(0x7df)][_0x2726d0(0x878)] = _0x2d5652['y'] + '%', _0x1a90c6[_0x2726d0(0x7df)][_0x2726d0(0x6b9)] = _0x2726d0(0x604), _0x1a90c6[_0x2726d0(0x7df)][_0x2726d0(0x9e3)] = _0x2726d0(0x239); const _0x1054cc = ['normal', _0x2726d0(0x6aa), _0x2726d0(0x90a), _0x2726d0(0x85c), _0x2726d0(0x650)], _0x587fa2 = _0x1054cc[_0x2726d0(0x9e5)](_0x5ef6f0) ? _0x5ef6f0 : 'normal'; try { if (_0x2726d0(0x5bf) !== _0x2726d0(0x9c5)) { const _0x500a4a = await _0x2995f2(_0x2726d0(0x8c1) + _0x587fa2 + '_' + _0x52d724); if (_0x500a4a) _0x10b822[_0x2726d0(0x45f)] && _0x10b822[_0x2726d0(0x7df)][_0x2726d0(0xa70)] !== '0' ? (_0x10b822[_0x2726d0(0x7df)][_0x2726d0(0xa70)] = 0x0, setTimeout(() => { const _0x30ba75 = _0x2726d0; _0x30ba75(0x2e2) !== _0x30ba75(0x525) ? (_0x10b822[_0x30ba75(0x45f)] = URL[_0x30ba75(0x709)](_0x500a4a), _0x10b822[_0x30ba75(0x7df)][_0x30ba75(0xa70)] = 0x1) : _0x20948f(_0x223ed9, _0x2e5d91); }, 0x96)) : (_0x10b822[_0x2726d0(0x45f)] = URL[_0x2726d0(0x709)](_0x500a4a), _0x10b822[_0x2726d0(0x7df)]['opacity'] = 0x1); else { const _0x100000 = await _0x2995f2(_0x2726d0(0x27e) + _0x52d724); _0x10b822[_0x2726d0(0x45f)] = _0x100000 ? URL[_0x2726d0(0x709)](_0x100000) : ''; } } else { _0x533068[_0x2726d0(0x52e)] = '选择聊天'; return; } } catch (_0x52ec67) { console[_0x2726d0(0x390)](_0x2726d0(0x307), _0x52ec67), _0x10b822[_0x2726d0(0x45f)] = ''; } } let _0x17dc73 = ![], _0x20a55a = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x52d964 = document[_0x3b2836(0x67e)](_0x3b2836(0xa54)), _0xe09432 = document[_0x3b2836(0x67e)](_0x3b2836(0x13e)), _0x52369d = document['getElementById'](_0x3b2836(0x18f)), _0xddf36a = document['getElementById'](_0x3b2836(0x339)), _0x25daa3 = document[_0x3b2836(0x67e)](_0x3b2836(0x184)), _0x32d9eb = document[_0x3b2836(0x67e)]('galgame-sprite-container'), _0xd28d65 = document['getElementById']('sprite-resize-handle'), _0x55ed45 = document[_0x3b2836(0x67e)](_0x3b2836(0xaa4)); let _0x38c19a = {}; function _0x9a3425() { const _0x9e607b = _0x3b2836, _0x2e7f2e = _0x382342(_0x57ec14[_0x9e607b(0x601)]); if (!_0x2e7f2e) return; _0x17dc73 = !![], _0x25daa3[_0x9e607b(0x7df)][_0x9e607b(0x741)] = _0x9e607b(0x1f1); const _0x333e4c = _0x2e7f2e['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document['getElementById'](_0x9e607b(0x323))[_0x9e607b(0x552)] = _0x333e4c['x'], document[_0x9e607b(0x67e)]('sprite-slider-y')[_0x9e607b(0x552)] = _0x333e4c['y'], document['getElementById'](_0x9e607b(0xad8))[_0x9e607b(0x552)] = _0x333e4c['scale'] * 0x64, _0x38c19a = { ..._0x333e4c }, document[_0x9e607b(0x67e)]('galgame-textbox-container')[_0x9e607b(0x7df)][_0x9e607b(0x741)] = 'none', document[_0x9e607b(0x67e)](_0x9e607b(0xb0f))['style'][_0x9e607b(0x741)] = _0x9e607b(0x527); } function _0x59bb70(_0x36e67b = ![]) { const _0x29a480 = _0x3b2836; if ('jczVJ' !== _0x29a480(0x664)) { _0x684cf5 = _0x3d321f[_0x29a480(0x313)][_0x29a480(0x270)](_0x38d05e => _0x38d05e[_0x29a480(0xa1e)] === _0x29a480(0x99c) && _0x38d05e[_0x29a480(0x69c)][_0x29a480(0x9e5)](_0x54cd96)); const _0x4277c6 = _0x26de6c(_0x2d02d6); _0xf5a0de = _0x4277c6 ? _0x4277c6[_0x29a480(0x589)] : '该角色'; } else { _0x17dc73 = ![], _0x25daa3[_0x29a480(0x7df)][_0x29a480(0x741)] = 'none', document['getElementById']('galgame-textbox-container')[_0x29a480(0x7df)][_0x29a480(0x741)] = _0x29a480(0x1f1), document[_0x29a480(0x67e)](_0x29a480(0xb0f))[_0x29a480(0x7df)][_0x29a480(0x741)] = _0x29a480(0x1f1); if (!_0x36e67b) { const _0x516612 = _0x382342(_0x57ec14[_0x29a480(0x601)]); _0x516612 && (_0x516612[_0x29a480(0x96b)] = _0x38c19a, _0x3de8df(_0x57ec14['activeMeetingCharId'], _0x29a480(0x3d7))); } } } function _0x43527b() { const _0x1b55e3 = _0x3b2836, _0x182d02 = _0x382342(_0x57ec14['activeMeetingCharId']); if (!_0x182d02) return; const _0x407d15 = parseFloat(document[_0x1b55e3(0x67e)](_0x1b55e3(0x323))[_0x1b55e3(0x552)]), _0x48b7ae = parseFloat(document[_0x1b55e3(0x67e)]('sprite-slider-y')[_0x1b55e3(0x552)]), _0x2b6662 = parseFloat(document[_0x1b55e3(0x67e)]('sprite-slider-scale')[_0x1b55e3(0x552)]) / 0x64; _0x182d02[_0x1b55e3(0x96b)] = { 'x': _0x407d15, 'y': _0x48b7ae, 'scale': _0x2b6662 }, _0x203e68(), _0x33f536(_0x1b55e3(0x3e3)), _0x59bb70(!![]); } function _0x1853ac() { const _0x247212 = _0x3b2836; _0x156ce5(_0x247212(0x84f))['then'](_0x3abdb3 => { const _0x281ed8 = _0x247212; if (_0x281ed8(0x8fd) !== 'rirdu') _0x17a320(), _0x5e42ca(![]), _0x14ba56[_0x281ed8(0xa73)] = ![]; else { if (_0x3abdb3) { if (_0x281ed8(0x72d) !== _0x281ed8(0x72d)) { if (_0x1c6078 === null) return; const _0x33cf71 = _0x1564e6['value']['trim'](); if (_0x33cf71 === '') { _0x8aefe9(); return; } const _0x404f7e = _0x40b0a1[_0x281ed8(0xa8a)][_0x32f12e]; _0x404f7e && (_0x404f7e[_0x281ed8(0x6fd)] = _0x33cf71, _0x1fa42a(), _0x2e9dc8()), _0x15780b[_0x281ed8(0x32b)][_0x281ed8(0x318)](_0x281ed8(0x716)), _0x40ecbe = null; } else { const _0x2675fb = _0x382342(_0x57ec14['activeMeetingCharId']); _0x2675fb && (delete _0x2675fb[_0x281ed8(0x96b)], _0x203e68(), _0x3de8df(_0x2675fb['id'], 'normal'), _0x33f536(_0x281ed8(0x4c0)), _0x59bb70(!![])); } } } }); } function _0x355784() { const _0x2c341b = _0x3b2836; if (!_0x17dc73) return; const _0x177c71 = _0x57ec14['activeMeetingCharId'], _0xcfa4e5 = _0x382342(_0x177c71); if (!_0xcfa4e5) return; const _0x16feea = parseFloat(document['getElementById']('sprite-slider-x')[_0x2c341b(0x552)]), _0x257039 = parseFloat(document['getElementById'](_0x2c341b(0x2e6))['value']), _0x21ef82 = parseFloat(document[_0x2c341b(0x67e)](_0x2c341b(0xad8))[_0x2c341b(0x552)]) / 0x64; _0xcfa4e5[_0x2c341b(0x96b)] = { 'x': _0x16feea, 'y': _0x257039, 'scale': _0x21ef82 }; const _0x3610a0 = document[_0x2c341b(0x67e)](_0x2c341b(0x3d8)), _0x309da2 = 0x50 * _0x21ef82; _0x3610a0['style'][_0x2c341b(0x333)] = _0x309da2 + '%', _0x3610a0[_0x2c341b(0x7df)][_0x2c341b(0x96a)] = _0x309da2 + '%', _0x3610a0[_0x2c341b(0x7df)][_0x2c341b(0xb18)] = _0x16feea + '%', _0x3610a0['style'][_0x2c341b(0x878)] = _0x257039 + '%', _0x3610a0[_0x2c341b(0x7df)][_0x2c341b(0x6b9)] = _0x2c341b(0x604); } document['getElementById'](_0x3b2836(0x323))[_0x3b2836(0x990)](_0x3b2836(0x32f), _0x355784), document['getElementById'](_0x3b2836(0x2e6))['addEventListener']('input', _0x355784), document[_0x3b2836(0x67e)](_0x3b2836(0xad8))[_0x3b2836(0x990)](_0x3b2836(0x32f), _0x355784), _0x52d964[_0x3b2836(0x990)](_0x3b2836(0x821), _0x9a3425), _0xe09432[_0x3b2836(0x990)]('click', _0x43527b), _0x52369d[_0x3b2836(0x990)]('click', () => _0x59bb70(![])), _0xddf36a['addEventListener'](_0x3b2836(0x821), _0x1853ac); function _0x1414b6(_0x57fe56) { const _0x4a3420 = _0x3b2836, _0x511e28 = _0x382342(_0x57fe56); if (!_0x511e28) return; const _0x225196 = _0x57ec14[_0x4a3420(0x313)]['find'](_0xedc0d0 => _0xedc0d0[_0x4a3420(0xa1e)] === 'private' && _0xedc0d0[_0x4a3420(0x69c)][_0x4a3420(0x9e5)](_0x57fe56)), _0x1cc734 = _0xb1d08(_0x225196['id']), _0x1e7d6b = _0x57ec14[_0x4a3420(0xa8a)]['filter'](_0x5b5c8b => _0x5b5c8b[_0x4a3420(0x684)])[_0x4a3420(0x8a9)](), _0x420d1b = document[_0x4a3420(0x67e)](_0x4a3420(0x365)), _0x182bb9 = document[_0x4a3420(0x67e)](_0x4a3420(0x7c6)); let _0x368e80 = null; if (_0x1e7d6b) { if (_0x1e7d6b[_0x4a3420(0x1a4)] === 'assistant') { if (_0x4a3420(0x1ba) === 'uLGSL') _0x1ae2c9[_0x486fbc]['addEventListener'](_0x4a3420(0x821), () => _0x59fe42[_0x3f654a][_0x4a3420(0x821)]()), _0x1e36e9[_0x55c151]['addEventListener']('change', _0x586e1a => { const _0x335ca5 = _0x4a3420; _0x4e845b(_0x2ccd9f, _0x586e1a[_0x335ca5(0x842)][_0x335ca5(0x7e7)][0x0]); }); else { const _0x3c86f2 = _0x57ec14[_0x4a3420(0x86b)][_0x57fe56]; _0x3c86f2 && _0x3c86f2[_0x4a3420(0xb1e)] > 0x0 && (_0x368e80 = _0x3c86f2['at'](-0x1)); } } else _0x368e80 = { 'speaker': _0x1cc734[_0x4a3420(0x589)], 'line': _0x1e7d6b[_0x4a3420(0x6fd)], 'emotion': _0x4a3420(0x3d7) }; } if (_0x368e80) { if (_0x4a3420(0x628) !== 'LgEIh') { _0x420d1b['textContent'] = _0x368e80[_0x4a3420(0x69a)] === _0x4a3420(0xa86) ? '旁白' : _0x368e80['speaker'], _0x182bb9[_0x4a3420(0x52e)] = _0x368e80[_0x4a3420(0x45a)]; if (_0x368e80[_0x4a3420(0x69a)] === _0x511e28[_0x4a3420(0x589)]) { if (_0x4a3420(0x5fd) === 'gjTYG') _0x3de8df(_0x57fe56, _0x368e80['emotion']); else { const _0x398026 = _0x31d195[_0x4a3420(0x433)](_0x4a3420(0x462)); _0x398026 && _0x398026[_0x4a3420(0x990)](_0x4a3420(0x821), function () { const _0x149695 = _0x4a3420, _0x14960b = { 'id': _0x3e6da3['id'], 'url': _0x3c814a[_0x149695(0x2ea)] }; _0x19ffbd(this, _0x14960b); }); } } else _0x3de8df(_0x57fe56, _0x4a3420(0x3d7)); } else _0x195082['paused'] ? _0x37a4b2['play']() : _0x2180af[_0x4a3420(0x75c)](); } else { if (_0x4a3420(0x408) !== _0x4a3420(0x408)) { const _0x1f1c6a = _0x5bbedb[_0x4a3420(0x6fd)][_0x4a3420(0xa9e)](/：(.*?)]$/); _0x23f423[_0x4a3420(0x6fd)] = _0x4a3420(0x70b) + (_0x1f1c6a ? _0x1f1c6a[0x1] : '未知表情') + ']', _0x42d9e1[_0x4a3420(0x1c5)](_0x3291c7); } else _0x420d1b['textContent'] = _0x511e28[_0x4a3420(0x589)], _0x182bb9[_0x4a3420(0x52e)] = _0x4a3420(0x4a4), _0x3de8df(_0x57fe56, _0x4a3420(0x3d7)); } } function _0x260352() { const _0x48a845 = _0x3b2836, _0x282c6b = new Date(), _0x167e46 = document[_0x48a845(0x67e)](_0x48a845(0x803)), _0x274b02 = document[_0x48a845(0x67e)]('galgame-date'); if (_0x167e46 && _0x274b02) { const _0x1e3c2e = String(_0x282c6b[_0x48a845(0x59a)]())['padStart'](0x2, '0'), _0x1642f6 = String(_0x282c6b[_0x48a845(0xa97)]())[_0x48a845(0xa2e)](0x2, '0'); _0x167e46['textContent'] = _0x1e3c2e + ':' + _0x1642f6; const _0x35d67b = _0x282c6b[_0x48a845(0x4b8)]() + 0x1, _0x10b1ca = _0x282c6b['getDate'](), _0x49e225 = [_0x48a845(0x414), _0x48a845(0x908), _0x48a845(0x813), _0x48a845(0x541), _0x48a845(0x27a), _0x48a845(0x116), _0x48a845(0x2f7)][_0x282c6b[_0x48a845(0x431)]()]; _0x274b02[_0x48a845(0x52e)] = _0x35d67b + '月' + _0x10b1ca + '日\x20' + _0x49e225; } } const _0x39caeb = document[_0x3b2836(0x67e)](_0x3b2836(0xaba)), _0x1b1b4f = document[_0x3b2836(0x67e)](_0x3b2836(0x1e8)), _0x247f9f = document['getElementById']('cancel-listen-together'), _0x4ad3b4 = document[_0x3b2836(0x67e)](_0x3b2836(0x635)), _0x538e7e = document[_0x3b2836(0x67e)]('listen-together-song-list'), _0x5cf78c = document[_0x3b2836(0x67e)]('unified-audio-player'), _0x528002 = document[_0x3b2836(0x67e)](_0x3b2836(0x403)), _0x4b58eb = document[_0x3b2836(0x67e)](_0x3b2836(0x5a7)), _0x4737eb = document[_0x3b2836(0x67e)](_0x3b2836(0x5ab)); let _0x10f2fb = []; async function _0x20080d() { const _0x4d2ee3 = _0x3b2836; if (_0x4d2ee3(0x769) !== 'gyymy') _0x33b410[_0x4d2ee3(0x74c)](_0x4d2ee3(0x5d2))[_0x4d2ee3(0x5e2)](_0x192282 => { const _0x1d84b7 = _0x4d2ee3; _0x192282[_0x1d84b7(0x990)](_0x1d84b7(0x821), () => { const _0x2a8e38 = _0x1d84b7, _0x3118c7 = _0x3daefc[_0x2a8e38(0x258)](_0x192282[_0x2a8e38(0x988)][_0x2a8e38(0x4cf)][_0x2a8e38(0x254)](/&quot;/g, '\x22')), _0x2a9fa8 = _0x192282[_0x2a8e38(0x988)][_0x2a8e38(0x491)], _0xb7ba93 = _0x192282['dataset'][_0x2a8e38(0x7fb)]; _0x31975a(_0x2a9fa8, _0xb7ba93, _0x3118c7); }); }); else { if (!_0x57ec14[_0x4d2ee3(0x413)]) return; _0x538e7e['innerHTML'] = _0x4d2ee3(0x6c2), _0x39caeb[_0x4d2ee3(0x32b)][_0x4d2ee3(0x536)](_0x4d2ee3(0x716)); const _0x10ab34 = await _0x279c33(); if (_0x10ab34[_0x4d2ee3(0xb1e)] === 0x0) { _0x538e7e['innerHTML'] = _0x4d2ee3(0x260); return; } _0x538e7e[_0x4d2ee3(0x282)] = '', _0x10ab34[_0x4d2ee3(0x5e2)](_0x28fce3 => { const _0x47ac84 = _0x4d2ee3, _0x27d8a1 = document[_0x47ac84(0x494)]('div'); _0x27d8a1['className'] = 'music-library-item'; const _0x42aa8c = _0x28fce3[_0x47ac84(0xa4e)] ? URL[_0x47ac84(0x709)](_0x28fce3[_0x47ac84(0xa4e)]) : _0x520817; _0x27d8a1['innerHTML'] = _0x47ac84(0xaf6) + _0x42aa8c + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x28fce3[_0x47ac84(0x63a)][_0x47ac84(0x9e4)] || _0x47ac84(0x3ca)) + _0x47ac84(0x178) + (_0x28fce3[_0x47ac84(0x63a)]['歌手'] || _0x47ac84(0x997)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x27d8a1[_0x47ac84(0x990)](_0x47ac84(0x821), () => { _0x545245(_0x28fce3); }), _0x538e7e[_0x47ac84(0x6b3)](_0x27d8a1); }); } } function _0x4677ac() { const _0x5415b9 = _0x3b2836; _0x39caeb[_0x5415b9(0x32b)][_0x5415b9(0x318)]('show'); } async function _0x545245(_0x3317f2) { const _0x338a3d = _0x3b2836; if (_0x338a3d(0x717) !== 'JCeJw') _0x308bf4(_0x3e0846, { 'force': !![], 'delayMs': _0x201477 }), _0x17fdaf += 0x1f4; else { if (!_0x57ec14[_0x338a3d(0x413)] || !_0x3317f2) return; let _0x22c18d = null; if (_0x3317f2[_0x338a3d(0xa4e)]) { if ('XDJbd' === _0x338a3d(0x93d)) { const _0x2cbaec = _0x584a30(_0x313aee[_0x338a3d(0x5ac)])?.['name'] || '未知'; return _0x338a3d(0x429) + _0x2cbaec + '</span>:\x20' + _0x302194['content'] + '</div>'; } else try { _0x22c18d = _0x338a3d(0x3e1) + Date[_0x338a3d(0x2c5)]() + '_' + Math[_0x338a3d(0x757)](), await _0x59767c(_0x22c18d, _0x3317f2[_0x338a3d(0xa4e)]); } catch (_0x5424e1) { console['error'](_0x338a3d(0x19a), _0x5424e1); } } const _0x3528a0 = { 'role': 'user', 'type': _0x338a3d(0x64b), 'content': _0x338a3d(0xa83) + _0x3317f2[_0x338a3d(0x63a)][_0x338a3d(0x9e4)] + ']', 'songId': _0x3317f2['id'], 'songName': _0x3317f2[_0x338a3d(0x63a)][_0x338a3d(0x9e4)], 'artist': _0x3317f2[_0x338a3d(0x63a)]['歌手'], 'coverId': _0x22c18d, 'timestamp': Date[_0x338a3d(0x2c5)]() }; _0x57ec14[_0x338a3d(0xa8a)]['push'](_0x3528a0), _0xc97ff3(), _0x1c7b21(), _0x4677ac(), setTimeout(_0x7f5e33, 0x64); } } _0x1b1b4f[_0x3b2836(0x990)](_0x3b2836(0x821), _0x20080d), _0x247f9f['addEventListener'](_0x3b2836(0x821), _0x4677ac), _0x4ad3b4[_0x3b2836(0x990)](_0x3b2836(0x821), _0x4677ac); async function _0x27e066(_0x2b22a5, _0x31cbc6, _0x50b022) { const _0x11a550 = _0x3b2836; if ('rrInG' === 'Dipon') { if (_0x5a7e01[_0x11a550(0x690)]) _0x110700(_0x2d88d3[_0x11a550(0x690)]); const _0x205005 = _0x2c8a32[_0x11a550(0x842)][_0x11a550(0x3a1)](_0x11a550(0x440)); if (!_0x205005) return; const _0x3c5895 = _0x205005['dataset'][_0x11a550(0x665)], _0x105512 = _0x205005[_0x11a550(0x32b)][_0x11a550(0x776)](_0x11a550(0x2b3)) ? 'user' : 'ai'; if (!_0x3c5895) return; const _0x2ce0fc = () => { const _0x80710d = _0x11a550; _0x5515ea[_0x80710d(0x690)] = _0x311907(() => { const _0x10d130 = _0x80710d; if (_0x4ab3ec['type'] === 'touchstart') _0x1a054b[_0x10d130(0x624)](); _0x45213e(_0x3966ee(_0x3c5895, 0xa), _0x105512); }, 0x320); }, _0x27ec7a = () => { const _0x5bcd66 = _0x11a550; if (_0x1b0a04[_0x5bcd66(0x690)]) _0x47bcaa(_0x3319a[_0x5bcd66(0x690)]); }; _0x1352c7['addEventListener'](_0x11a550(0x280), _0x27ec7a, { 'once': !![] }), _0x24345a['addEventListener'](_0x11a550(0x517), _0x27ec7a, { 'once': !![] }), _0x82de42[_0x11a550(0x990)](_0x11a550(0x39c), _0x27ec7a, { 'once': !![] }), _0x2ce0fc(); } else { const _0x4ab88b = _0x57ec14[_0x11a550(0x313)][_0x11a550(0x270)](_0x5cd31f => _0x5cd31f[_0x11a550(0x277)] && _0x5cd31f[_0x11a550(0x277)][_0x11a550(0x3ef)]), _0x9e8c5f = _0x3a6dc0(); if (_0x4ab88b && _0x4ab88b['id'] !== _0x9e8c5f['id']) _0x4ab88b[_0x11a550(0x277)] = null, _0x33f536(_0x11a550(0x85f)), _0x203e68(); else { if (_0x4ab88b && _0x4ab88b['id'] === _0x9e8c5f['id']) { if ('ZzQnm' === 'ZzQnm') _0x33f536(_0x11a550(0x95e)); else { const _0x56863c = _0x2a93a8[_0x11a550(0xa8a)][_0x11a550(0x1a0)](_0x8fde98 => _0x8fde98[_0x11a550(0xa1e)] === 'music' && _0x8fde98[_0x11a550(0x2ea)])[_0x11a550(0x937)](_0x4d5b6a => ({ ..._0x4d5b6a, 'source': _0x11a550(0xa06) })); _0x4d0650[_0x11a550(0x1c5)](..._0x56863c); } } } _0x58ea7f(!![], _0x11a550(0x5ec)); if (!_0x9e8c5f) { _0x58ea7f(![]), _0x33f536(_0x11a550(0x7f9)); return; } const _0x1f3edf = await _0x50081a(_0x2b22a5); if (!_0x1f3edf) { _0x58ea7f(![]), _0x33f536(_0x11a550(0x163)); return; } _0x9e8c5f[_0x11a550(0x277)] = { 'isActive': !![], 'songId': _0x2b22a5, 'leaderId': _0x11a550(0x2b3), 'songName': _0x1f3edf[_0x11a550(0x63a)][_0x11a550(0x9e4)], 'artist': _0x1f3edf[_0x11a550(0x63a)]['歌手'], 'cover': _0x1f3edf[_0x11a550(0xa4e)] }, _0x203e68(), document[_0x11a550(0x67e)](_0x11a550(0x932))[_0x11a550(0x45f)] = _0x1f3edf[_0x11a550(0xa4e)] ? URL[_0x11a550(0x709)](_0x1f3edf[_0x11a550(0xa4e)]) : _0x520817, document[_0x11a550(0x67e)](_0x11a550(0x7b2))[_0x11a550(0x52e)] = _0x1f3edf['info'][_0x11a550(0x9e4)], document[_0x11a550(0x67e)](_0x11a550(0x3c3))[_0x11a550(0x52e)] = _0x1f3edf[_0x11a550(0x63a)]['歌手'], _0x465bb6(_0x1f3edf), _0x528002['style'][_0x11a550(0x741)] = _0x11a550(0x38c), setTimeout(() => _0x528002['classList'][_0x11a550(0x536)]('show'), 0xa), _0x50b022[_0x11a550(0x282)] = '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>' + _0x50b022[_0x11a550(0x433)](_0x11a550(0x70e))[_0x11a550(0x919)]; if (_0x57ec14[_0x11a550(0xa8a)][_0x31cbc6]) { if (_0x11a550(0x122) !== _0x11a550(0x6c0)) _0x57ec14[_0x11a550(0xa8a)][_0x31cbc6][_0x11a550(0x953)] = !![], _0xc97ff3(); else { const _0x88e426 = _0x1e6263['indexOf']('{'), _0x34b593 = _0x206ba5[_0x11a550(0x73a)]('}'); if (_0x88e426 >= 0x0 && _0x34b593 > _0x88e426) return _0x494037[_0x11a550(0x944)](_0x88e426, _0x34b593 + 0x1); return _0x596fcb; } } _0x58ea7f(![]), _0x36618e(_0x2b22a5, [_0x2b22a5]), _0xe00405(_0x1f3edf, !![]); } } function _0x274e17() { const _0x4dc491 = _0x3b2836, _0x2bbca0 = _0x57ec14[_0x4dc491(0x313)][_0x4dc491(0x270)](_0x4f6e37 => _0x4f6e37[_0x4dc491(0x277)] && _0x4f6e37[_0x4dc491(0x277)][_0x4dc491(0x3ef)]); _0x2bbca0 && (_0x2bbca0[_0x4dc491(0x277)] = null, _0x203e68(), _0x33f536(_0x4dc491(0x76d)), _0xe00405(), _0x528002[_0x4dc491(0x32b)][_0x4dc491(0x318)](_0x4dc491(0x716)), setTimeout(() => _0x528002[_0x4dc491(0x7df)][_0x4dc491(0x741)] = 'none', 0x12c)); } function _0x1573d1(_0x3673e0) { const _0x4147a9 = _0x3b2836; if (!_0x3673e0) return []; const _0x5b9939 = _0x3673e0['split']('\x0a'), _0x15b765 = [], _0xf7dfdd = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0xba51c5 of _0x5b9939) { if (_0x4147a9(0x991) !== 'FMNyw') { const _0xb76a80 = _0xba51c5['match'](_0xf7dfdd); if (_0xb76a80) { const _0x4d6125 = parseInt(_0xb76a80[0x1], 0xa), _0x410d9a = parseInt(_0xb76a80[0x2], 0xa), _0xbead70 = parseInt(_0xb76a80[0x3], 0xa) * (_0xb76a80[0x3][_0x4147a9(0xb1e)] === 0x2 ? 0xa : 0x1), _0x64ec9d = _0x4d6125 * 0x3c + _0x410d9a + _0xbead70 / 0x3e8, _0x45530d = _0xba51c5['replace'](_0xf7dfdd, '')[_0x4147a9(0x3dd)](); _0x45530d && _0x15b765['push']({ 'time': _0x64ec9d, 'text': _0x45530d }); } } else _0x18ef6c['currentDate'] = new _0x17ef70(), _0x4b7a92[_0x4147a9(0xa25)] = new _0x330edd()[_0x4147a9(0x521)]()['split']('T')[0x0], _0x3f66c2(); } return _0x15b765; } function _0x465bb6(_0x5cc154) { const _0x57681a = _0x3b2836; if (_0x57681a(0x45b) === 'OBYqH') { if (_0x286374[_0x57681a(0x99d)] === 'Escape') _0x3d62f5(![]); if (_0x432f00['key'] === _0x57681a(0x88d)) _0x518e21(!![]); } else { _0x10f2fb = _0x1573d1(_0x5cc154[_0x57681a(0x25a)]), _0x4737eb[_0x57681a(0x282)] = ''; if (_0x10f2fb['length'] === 0x0) { _0x4737eb['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x10f2fb[_0x57681a(0x5e2)]((_0x18de59, _0x4817b9) => { const _0xbc2806 = _0x57681a, _0x20bbdc = document[_0xbc2806(0x494)]('p'); _0x20bbdc[_0xbc2806(0x52e)] = _0x18de59[_0xbc2806(0x9de)], _0x20bbdc['id'] = 'lyric-line-' + _0x4817b9, _0x4737eb[_0xbc2806(0x6b3)](_0x20bbdc); }); } } function _0x164e29(_0x4bb202, _0x18c6c7, _0x318c67, _0x51bd28) { const _0x5166d4 = _0x3b2836, _0x339f2c = (_0x51bd28 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x4bb202 + _0x318c67 * Math[_0x5166d4(0x714)](_0x339f2c), 'y': _0x18c6c7 + _0x318c67 * Math[_0x5166d4(0x725)](_0x339f2c) }; } function _0x236796(_0x36cade) { const _0x16a39f = _0x3b2836; if (_0x16a39f(0x715) !== _0x16a39f(0x715)) { _0x4311a8[_0x16a39f(0x282)] = _0x16a39f(0x5ca); return; } else { const _0x534b93 = _0x16a39f(0x46a), _0x439bb4 = document[_0x16a39f(0x7e5)](_0x534b93, _0x16a39f(0x934)), _0x408bac = 0xfa, _0x3f3615 = _0x408bac / 0x2, _0x4c798f = _0x408bac / 0x2, _0x50991e = _0x408bac / 0x2 - 0x14; _0x439bb4[_0x16a39f(0xa5a)](_0x16a39f(0x96a), _0x16a39f(0x795)), _0x439bb4[_0x16a39f(0xa5a)](_0x16a39f(0x333), _0x16a39f(0x795)), _0x439bb4[_0x16a39f(0xa5a)](_0x16a39f(0x599), _0x16a39f(0x92d) + _0x408bac + '\x20' + _0x408bac); const _0x3ab6a8 = Object[_0x16a39f(0xac8)](_0x36cade)[_0x16a39f(0x4a5)]((_0x5c1288, _0xdcdf6e) => _0x5c1288 + _0xdcdf6e, 0x0); if (_0x3ab6a8 === 0x0) return _0x439bb4; let _0x197dfc = -0x5a; const _0x5ab1fd = [_0x16a39f(0x5f7), _0x16a39f(0xad4), _0x16a39f(0x26a), '#ff9999', _0x16a39f(0x8ca), _0x16a39f(0x102), _0x16a39f(0x740), _0x16a39f(0x1f4)]; let _0x3f77c5 = 0x0; for (const _0x10945e in _0x36cade) { const _0x3f3f75 = _0x36cade[_0x10945e]; if (_0x3f3f75 <= 0x0) continue; const _0x3b59d9 = _0x3f3f75 / _0x3ab6a8 * 0x168, _0x34e3b1 = _0x197dfc + _0x3b59d9, _0x56d872 = _0x164e29(_0x3f3615, _0x4c798f, _0x50991e, _0x34e3b1), _0x25cd8a = _0x164e29(_0x3f3615, _0x4c798f, _0x50991e, _0x197dfc), _0x4873e9 = _0x3b59d9 > 0xb4 ? '1' : '0', _0x4f5819 = ['M', _0x56d872['x'], _0x56d872['y'], 'A', _0x50991e, _0x50991e, 0x0, _0x4873e9, 0x1, _0x25cd8a['x'], _0x25cd8a['y'], 'L', _0x3f3615, _0x4c798f, 'Z']['join']('\x20'), _0x3654af = document[_0x16a39f(0x7e5)](_0x534b93, _0x16a39f(0xb0c)); _0x3654af[_0x16a39f(0xa5a)]('d', _0x4f5819), _0x3654af[_0x16a39f(0xa5a)]('fill', _0x5ab1fd[_0x3f77c5 % _0x5ab1fd['length']]), _0x3f77c5++; const _0x5e294e = document[_0x16a39f(0x7e5)](_0x534b93, 'title'); _0x5e294e[_0x16a39f(0x52e)] = _0x10945e + ':\x20' + _0x3f3f75[_0x16a39f(0x81f)](0x2) + '\x20(' + (_0x3f3f75 / _0x3ab6a8 * 0x64)[_0x16a39f(0x81f)](0x1) + '%)', _0x3654af[_0x16a39f(0x6b3)](_0x5e294e), _0x439bb4[_0x16a39f(0x6b3)](_0x3654af), _0x197dfc = _0x34e3b1; } return _0x439bb4; } } function _0x32dd1d() { const _0x39819 = _0x3b2836; if (_0x10f2fb[_0x39819(0xb1e)] === 0x0) return; const _0xe69610 = _0x5cf78c['currentTime']; let _0x2e67d5 = -0x1; for (let _0x15be6d = 0x0; _0x15be6d < _0x10f2fb['length']; _0x15be6d++) { if (_0xe69610 >= _0x10f2fb[_0x15be6d][_0x39819(0x811)]) _0x2e67d5 = _0x15be6d; else break; } if (_0x2e67d5 !== -0x1) { if (_0x39819(0x60f) !== _0x39819(0x2bc)) { const _0x32227d = _0x4737eb[_0x39819(0x74c)]('p'); _0x32227d[_0x39819(0x5e2)](_0x4cdc32 => _0x4cdc32[_0x39819(0x32b)]['remove'](_0x39819(0x115))); const _0x21ab27 = document[_0x39819(0x67e)]('lyric-line-' + _0x2e67d5); _0x21ab27 && (_0x21ab27['classList'][_0x39819(0x536)](_0x39819(0x115)), _0x21ab27[_0x39819(0x663)]({ 'behavior': _0x39819(0x4da), 'block': _0x39819(0x21e) })); } else _0x3c2f80[_0x39819(0x32b)][_0x39819(0xa2f)]('show'), _0x4f75f0[_0x39819(0x32b)]['contains']('show') && (_0x2dcf86['scrollTop'] = _0x519365['scrollHeight']); } } _0x4b58eb['addEventListener'](_0x3b2836(0x821), () => { const _0x1352e2 = _0x3b2836; _0x1352e2(0x6ab) === 'xngXS' ? (_0x528002['classList'][_0x1352e2(0x318)](_0x1352e2(0x716)), setTimeout(() => _0x528002['style'][_0x1352e2(0x741)] = _0x1352e2(0x527), 0x12c)) : _0x807778(_0x1ae340[_0x1352e2(0x41a)])[_0x1352e2(0x69b)](_0x19f53b => { const _0x387586 = _0x1352e2, _0x3f8817 = _0x51ace8['getElementById'](_0x3e8b14); if (_0x3f8817 && _0x19f53b) _0x3f8817['src'] = _0x267071[_0x387586(0x709)](_0x19f53b); }); }), document[_0x3b2836(0x67e)](_0x3b2836(0x8a0))[_0x3b2836(0x990)]('click', () => { const _0x3635ae = _0x3b2836; if (_0x57ec14[_0x3635ae(0x699)] && _0x57ec14[_0x3635ae(0x699)][_0x3635ae(0x3ef)]) { if (_0x3635ae(0x3cb) === _0x3635ae(0x3cb)) _0x528002[_0x3635ae(0x7df)][_0x3635ae(0x741)] = _0x3635ae(0x38c), setTimeout(() => _0x528002[_0x3635ae(0x32b)][_0x3635ae(0x536)](_0x3635ae(0x716)), 0xa); else { const _0x36b2c5 = _0x1b7e6b[_0x3635ae(0x766)](_0x3d0302, _0x3635ae(0x73e)), _0x3bf1ff = _0x36b2c5[_0x3635ae(0x6fe)](_0xcaf159), _0x367186 = _0x3bf1ff[_0x3635ae(0xaa9)]({ 'id': _0x1354b5, 'blob': _0x4edacd }); _0x367186[_0x3635ae(0x465)] = () => _0x2b93af(_0x367186['result']), _0x367186[_0x3635ae(0x7e4)] = () => _0x37c359(_0x367186[_0x3635ae(0x390)]); } } }), _0x5cf78c[_0x3b2836(0x990)](_0x3b2836(0x2cd), _0x32dd1d); const _0x3eeb1b = document[_0x3b2836(0x67e)](_0x3b2836(0x511)), _0x1ac418 = document[_0x3b2836(0x67e)](_0x3b2836(0x659)), _0x283dde = document[_0x3b2836(0x67e)](_0x3b2836(0x3b3)); _0x3eeb1b[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x4db566 = _0x3b2836; if (_0x5cf78c[_0x4db566(0x45f)]) { if (_0x5cf78c[_0x4db566(0x596)]) _0x5cf78c[_0x4db566(0x350)](); else { if (_0x4db566(0xb12) !== _0x4db566(0xb12)) { const _0x21d021 = _0x26347b[_0x4db566(0x391)][_0x4db566(0x270)](_0x3aa821 => _0x3aa821['id'] === _0x224038[_0x4db566(0x347)]) || { 'name': _0x4db566(0x9f5) }, _0x2b1223 = _0x3e0ca6[_0x4db566(0x494)]('div'); _0x2b1223[_0x4db566(0x226)] = 'world-book-item', _0x2b1223[_0x4db566(0x988)]['id'] = _0x45643a['id'], _0x2b1223['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x55989c[_0x4db566(0x589)] + _0x4db566(0x607) + _0x21d021[_0x4db566(0x589)] + '\x20|\x20' + _0x4f00d2[_0x4db566(0x434)]['length'] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x2b1223['addEventListener']('click', () => _0x2f8ddc(_0x3bad86['id'])), _0x1582b3[_0x4db566(0x6b3)](_0x2b1223); } else _0x5cf78c[_0x4db566(0x75c)](); } } }), _0x1ac418[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x38041b = _0x3b2836; if (_0x421e14[_0x38041b(0xb1e)] === 0x0) return; _0x317c43 = (_0x317c43 + 0x1) % _0x421e14[_0x38041b(0xb1e)], _0x36618e(_0x421e14[_0x317c43], _0x421e14); }), _0x283dde['addEventListener'](_0x3b2836(0x821), () => { const _0x28cbe7 = _0x3b2836; if (_0x421e14[_0x28cbe7(0xb1e)] === 0x0) return; _0x317c43 = (_0x317c43 - 0x1 + _0x421e14[_0x28cbe7(0xb1e)]) % _0x421e14['length'], _0x36618e(_0x421e14[_0x317c43], _0x421e14); }), _0x5cf78c[_0x3b2836(0x990)]('play', () => { const _0x3907a0 = _0x3b2836; _0x3eeb1b[_0x3907a0(0x52e)] = '❚❚'; }), _0x5cf78c[_0x3b2836(0x990)](_0x3b2836(0x75c), () => { const _0x468887 = _0x3b2836; _0x3eeb1b[_0x468887(0x52e)] = '▶'; }), _0x5cf78c['addEventListener'](_0x3b2836(0x38e), () => { const _0x171d45 = _0x3b2836; if (_0x171d45(0x303) === 'RnUVn') _0x1ac418[_0x171d45(0x821)](); else { const _0x15b203 = _0x228840[_0x171d45(0x6fd)] ? '\x20' + _0xfd5f6f[_0x171d45(0x6fd)] : ''; _0x51132f[_0x171d45(0x1c5)]('[' + _0x48cd01(_0x1a901f) + _0x171d45(0x9a1) + _0x15b203); } }), _0x5cf78c['addEventListener'](_0x3b2836(0x350), () => { const _0x51a6d8 = _0x3b2836; if (_0x51a6d8(0x1d7) !== _0x51a6d8(0x4f4)) { const _0x10161e = document[_0x51a6d8(0x67e)](_0x51a6d8(0x28a)); if (_0x10161e) _0x10161e[_0x51a6d8(0x52e)] = '❚❚'; } else { if (!_0x336130) return []; const _0x23ce15 = _0x33fdfa(_0x3229cb)['trim'](), _0x5bf201 = _0x23ce15['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x51a6d8(0x937)](_0x448e85 => _0x448e85[_0x51a6d8(0x3dd)]())[_0x51a6d8(0x1a0)](_0x4cefe5); if (_0x5bf201[_0x51a6d8(0xb1e)] > 0x0) return _0x5bf201[_0x51a6d8(0x944)](0x0, 0x9); return [_0x23ce15][_0x51a6d8(0x1a0)](_0x26e34f); } }), _0x5cf78c[_0x3b2836(0x990)](_0x3b2836(0x75c), () => { const _0x262fbc = _0x3b2836; if (_0x262fbc(0x193) !== 'KWhPC') _0x413027[_0x366dc5] = _0xc9a626[_0x262fbc(0x258)](_0xbfbffe); else { const _0x45f735 = document[_0x262fbc(0x67e)]('global-player-play-pause-btn'); if (_0x45f735) _0x45f735[_0x262fbc(0x52e)] = '▶'; } }), _0x5cf78c[_0x3b2836(0x990)]('ended', () => { const _0x32cd1b = _0x3b2836, _0x328403 = document[_0x32cd1b(0x67e)](_0x32cd1b(0x69f)); _0x328403 && _0x328403[_0x32cd1b(0x821)](); }); function _0x27a9e0(_0x22a485) { const _0x26c8c5 = _0x3b2836; if (_0x26c8c5(0x70a) === 'jjgJm') { if (!_0x22a485 || typeof _0x22a485 !== _0x26c8c5(0x5b8)) return null; const _0x2fe785 = _0x22a485[_0x26c8c5(0x2ac)]('['), _0x2531d3 = _0x22a485[_0x26c8c5(0x73a)](']'); if (_0x2fe785 > -0x1 && _0x2531d3 > _0x2fe785) return _0x22a485[_0x26c8c5(0x5ae)](_0x2fe785, _0x2531d3 + 0x1); return null; } else _0x2a58d8(() => { const _0x1bb0d3 = _0x26c8c5; _0x5d21ff[_0x1bb0d3(0x535)] = _0x23dbdb[_0x1bb0d3(0x6ac)]; }, 0x0); } document[_0x3b2836(0x67e)]('app-accounting')['addEventListener'](_0x3b2836(0x821), () => { const _0x4a1764 = _0x3b2836; _0x403415(), _0x52c85d(_0x4a1764(0x112), _0x4a1764(0x669)); }), document[_0x3b2836(0x67e)](_0x3b2836(0x38a))['addEventListener'](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x669), _0x3b2836(0x112))); const _0x4368b3 = document['getElementById']('tab-record-expense'), _0x4588f4 = document['getElementById'](_0x3b2836(0xaa8)); _0x4368b3[_0x3b2836(0x990)](_0x3b2836(0x821), _0x403415), _0x4588f4['addEventListener'](_0x3b2836(0x821), () => { const _0x1c8d47 = _0x3b2836; _0x4368b3[_0x1c8d47(0x32b)][_0x1c8d47(0x318)](_0x1c8d47(0x115)), _0x4588f4[_0x1c8d47(0x32b)]['add']('active'), _0x265309(); }); function _0x403415() { const _0x58d1a7 = _0x3b2836; _0x58d1a7(0x637) === _0x58d1a7(0x637) ? (_0x4588f4[_0x58d1a7(0x32b)]['remove'](_0x58d1a7(0x115)), _0x4368b3[_0x58d1a7(0x32b)][_0x58d1a7(0x536)](_0x58d1a7(0x115)), _0x146962()) : _0x404fd8[_0x58d1a7(0x6c3)] = ![]; } function _0x146962() { const _0x203737 = _0x3b2836, _0x4391ad = document[_0x203737(0x67e)](_0x203737(0x407)); document[_0x203737(0x67e)](_0x203737(0x80d))[_0x203737(0x52e)] = '记一笔', document[_0x203737(0x67e)](_0x203737(0x859))[_0x203737(0x282)] = '', _0x4391ad[_0x203737(0x282)] = _0x203737(0x3f0), _0x32da65(), document[_0x203737(0x67e)](_0x203737(0x3c9))[_0x203737(0x990)](_0x203737(0x821), _0x8fd8f7), document[_0x203737(0x67e)]('daily-expenses-list')[_0x203737(0x990)]('click', _0x12a9f9 => { const _0x119630 = _0x203737; if (_0x12a9f9['target'][_0x119630(0x32b)][_0x119630(0x776)]('delete-expense-btn')) { const _0x1e2db7 = _0x12a9f9[_0x119630(0x842)][_0x119630(0x988)]['id']; _0x156ce5('确定要删除这笔记录吗？')[_0x119630(0x69b)](_0xbb3b44 => { const _0x374aa2 = _0x119630; if ('irGuC' !== _0x374aa2(0x989)) { const _0x4432b4 = _0x29f1f9[_0x374aa2(0x709)](_0x286ab3); _0x4e292d[_0x374aa2(0x45f)] = _0x4432b4, _0x4e536b[_0x374aa2(0x532)] = () => { const _0x4e3c0a = _0x374aa2; _0x8b45c4[_0x4e3c0a(0xa8f)](_0x4432b4); }; } else _0xbb3b44 && (_0x374aa2(0xad7) !== 'JEsjc' ? _0xad3043(_0x1e2db7) : _0x581735 = _0x374aa2(0x827) + _0x4c19ef[_0x374aa2(0x589)] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); }); } }), document[_0x203737(0x67e)](_0x203737(0x7ef))[_0x203737(0x855)](); } function _0x740a48(_0x35c8c8, _0xe325af) { const _0x15a36d = _0x3b2836, _0x1b3d46 = document['getElementById'](_0x15a36d(0x407)), _0x72cc1f = document['getElementById'](_0x15a36d(0x859)); document['getElementById'](_0x15a36d(0x80d))['textContent'] = _0xe325af + _0x15a36d(0x41d); const _0x15c3d9 = _0x35c8c8[_0x15a36d(0xaf9)][_0x15a36d(0x4a5)]((_0x422e6f, _0x3c6614) => _0x422e6f + (_0x3c6614[_0x15a36d(0x582)] || 0x0), 0x0); let _0x4dc7e1 = '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>' + _0x15c3d9[_0x15a36d(0x81f)](0x2) + _0x15a36d(0xa11); _0x1b3d46['innerHTML'] = _0x4dc7e1; const _0x203268 = document[_0x15a36d(0x67e)](_0x15a36d(0x88b)), _0x29da10 = { '餐饮美食': _0x15a36d(0x471), '交通出行': _0x15a36d(0x798), '购物消费': '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '生活服务': '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '休闲娱乐': _0x15a36d(0x32a), '医疗健康': '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '人情红包': _0x15a36d(0xb07), '其他杂项': _0x15a36d(0x8f6), '默认': _0x15a36d(0x30a) }; _0x35c8c8['categorizedExpenses'][_0x15a36d(0x5e2)](_0x2d6bf0 => { const _0x593115 = _0x15a36d; if (_0x593115(0x1fa) !== _0x593115(0x1fa)) { const _0x281aa5 = _0x4fc28d(_0x545cbc[_0x593115(0x972)] || _0x5ceb99[_0x593115(0x601)]); _0x1e19d1 = _0x281aa5?.[_0x593115(0x589)] || '角色', _0x697193 = 'speaker-ai'; } else { const _0x1e9d74 = document['createElement']('div'); _0x1e9d74['className'] = 'expense-item', _0x1e9d74[_0x593115(0x7df)][_0x593115(0x2d4)] = _0x593115(0x81d), _0x1e9d74[_0x593115(0x7df)]['alignItems'] = _0x593115(0x1b2), _0x1e9d74[_0x593115(0x7df)][_0x593115(0xaf3)] = _0x593115(0x1af), _0x1e9d74[_0x593115(0x7df)][_0x593115(0x594)] = '0'; const _0x2ec2d1 = _0x29da10[_0x2d6bf0[_0x593115(0x58b)]] || _0x29da10['默认'], _0x572ac9 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>' + _0x2ec2d1 + _0x593115(0x92e), _0x2cfc51 = '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>' + _0x572ac9 + _0x593115(0x671) + _0x2d6bf0[_0x593115(0x38f)] + '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>' + (_0x2d6bf0[_0x593115(0x58b)] || '未分类') + _0x593115(0x174) + (_0x2d6bf0[_0x593115(0x582)] || 0x0)[_0x593115(0x81f)](0x2) + '</span></div>'; let _0x5d138b = ''; if (_0x2d6bf0[_0x593115(0x7f2)] && _0x2d6bf0[_0x593115(0x7f2)][_0x593115(0x870)]) { const _0x5d3e8e = _0x382342(_0x2d6bf0['review'][_0x593115(0x870)]); _0x5d3e8e && (_0x5d138b = _0x593115(0x83d) + _0x5d3e8e[_0x593115(0x5b2)] + _0x593115(0x710) + _0x5d3e8e[_0x593115(0x589)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x2d6bf0[_0x593115(0x7f2)][_0x593115(0x9de)] + _0x593115(0x850)); } _0x1e9d74[_0x593115(0x282)] = _0x2cfc51 + _0x5d138b, _0x203268[_0x593115(0x6b3)](_0x1e9d74); } }), _0x72cc1f[_0x15a36d(0x282)] = _0x15a36d(0x761), document[_0x15a36d(0x67e)](_0x15a36d(0x7f6))[_0x15a36d(0x990)](_0x15a36d(0x821), async () => { const _0x235fdb = _0x15a36d; if (_0x235fdb(0x8b0) === 'cDBTB') { const _0x4a896b = _0x45e531[_0x235fdb(0xa1e)] === 'important' ? _0x235fdb(0x8d5) : '待办'; return _0x235fdb(0x566) + _0x4a896b + ']\x20' + _0x46723a[_0x235fdb(0x2b8)] + ':\x20' + _0x1762b2[_0x235fdb(0x6fd)]; } else { const _0x174551 = await _0x156ce5(_0x235fdb(0x5e9)); if (_0x174551) { const _0xe7d36f = _0x57ec14[_0x235fdb(0x420)][_0xe325af]; _0xe7d36f && _0xe7d36f[_0x235fdb(0x283)] && (_0x235fdb(0x8da) !== _0x235fdb(0x7e9) ? _0x57ec14[_0x235fdb(0x68a)][_0x235fdb(0x1c5)](..._0xe7d36f[_0x235fdb(0x283)]) : (_0x238616['value'] = '', _0x8539b4[_0x235fdb(0x52e)] = _0x235fdb(0x529), _0x5ebd56[_0x235fdb(0x552)] = _0x235fdb(0x36e) + (_0x41d151[_0x235fdb(0x862)][_0x235fdb(0xb1e)] + 0x1), _0x4c7072[_0x235fdb(0x552)] = '', _0x5df119[_0x235fdb(0x552)] = _0x235fdb(0x221), _0x1feff6[_0x235fdb(0x67e)](_0x235fdb(0x8f1))[_0x235fdb(0x552)] = '', _0x377f37())), delete _0x57ec14[_0x235fdb(0x420)][_0xe325af], _0x203e68(), _0x146962(); } } }); } function _0x265309() { const _0x1a5c6f = _0x3b2836; if ('SwSDg' !== _0x1a5c6f(0x54a)) _0x9dca13[_0x1a5c6f(0x390)](_0x1a5c6f(0x8a3) + _0x2e61f8 + _0x1a5c6f(0x56b) + _0x2add68 + '):', _0x19a523), _0x5d5823[_0x1a5c6f(0x605)] = null, _0x173572['playableUrl'] = null; else { const _0x151bde = document['getElementById'](_0x1a5c6f(0x407)); document[_0x1a5c6f(0x67e)](_0x1a5c6f(0x80d))[_0x1a5c6f(0x52e)] = '账本', document[_0x1a5c6f(0x67e)](_0x1a5c6f(0x859))[_0x1a5c6f(0x282)] = ''; const _0x17540d = Object['keys'](_0x57ec14['accountingLedger'])[_0x1a5c6f(0x42a)]((_0x465cb3, _0x71d478) => new Date(_0x71d478) - new Date(_0x465cb3)); if (_0x17540d[_0x1a5c6f(0xb1e)] === 0x0) { _0x151bde['innerHTML'] = _0x1a5c6f(0x42d); return; } _0x151bde[_0x1a5c6f(0x282)] = '', _0x17540d[_0x1a5c6f(0x5e2)](_0xde4f8e => { const _0x398c04 = _0x1a5c6f, _0x275de3 = document[_0x398c04(0x494)](_0x398c04(0x962)); _0x275de3[_0x398c04(0x226)] = _0x398c04(0x5be), _0x275de3[_0x398c04(0x7df)][_0x398c04(0x4eb)] = _0x398c04(0x951); const _0x28f381 = _0x57ec14[_0x398c04(0x420)][_0xde4f8e], _0x27b49d = _0x28f381[_0x398c04(0xaf9)]['reduce']((_0x26d5e3, _0xe2e196) => _0x26d5e3 + (_0xe2e196['amount'] || 0x0), 0x0); _0x275de3[_0x398c04(0x282)] = _0x398c04(0x6ad) + _0xde4f8e + _0x398c04(0x7b5) + _0x27b49d[_0x398c04(0x81f)](0x2) + '</span>', _0x275de3['addEventListener'](_0x398c04(0x821), () => { const _0x18a9f2 = _0x398c04; _0x4368b3[_0x18a9f2(0x32b)]['remove']('active'), _0x4588f4[_0x18a9f2(0x32b)]['add']('active'), _0x740a48(_0x28f381, _0xde4f8e); }), _0x151bde[_0x398c04(0x6b3)](_0x275de3); }); } } function _0x8fd8f7() { const _0x2eacf5 = _0x3b2836, _0x383e6e = document['getElementById'](_0x2eacf5(0x7ef)), _0x54bb53 = document[_0x2eacf5(0x67e)](_0x2eacf5(0x966)), _0x3d9523 = _0x383e6e[_0x2eacf5(0x552)][_0x2eacf5(0x3dd)](), _0x2e294c = parseFloat(_0x54bb53['value']); if (!_0x3d9523 || isNaN(_0x2e294c) || _0x2e294c <= 0x0) { _0x33f536(_0x2eacf5(0x30d)); return; } _0x57ec14[_0x2eacf5(0x68a)][_0x2eacf5(0x1c5)]({ 'id': 'exp_' + Date[_0x2eacf5(0x2c5)](), 'description': _0x3d9523, 'amount': _0x2e294c, 'timestamp': Date[_0x2eacf5(0x2c5)]() }), _0x203e68(), _0x32da65(), _0x383e6e[_0x2eacf5(0x552)] = '', _0x54bb53[_0x2eacf5(0x552)] = '', _0x383e6e[_0x2eacf5(0x855)](); } function _0xad3043(_0x2f2457) { const _0x680c7e = _0x3b2836, _0x240eee = _0x57ec14[_0x680c7e(0x68a)]['findIndex'](_0x9d0b82 => _0x9d0b82['id'] === _0x2f2457); if (_0x240eee > -0x1) { if (_0x680c7e(0x2f8) === _0x680c7e(0x13c)) throw new _0x36b86b(_0x680c7e(0x620) + _0x5e922d); else _0x57ec14[_0x680c7e(0x68a)]['splice'](_0x240eee, 0x1), _0x203e68(), _0x32da65(); } } function _0x32da65() { const _0x4bf235 = _0x3b2836, _0x1a3968 = document[_0x4bf235(0x67e)](_0x4bf235(0xa79)), _0x1dd441 = document[_0x4bf235(0x67e)](_0x4bf235(0x640)), _0x44541a = new Date(), _0xc6c392 = _0x57ec14[_0x4bf235(0x68a)]['filter'](_0x258018 => new Date(_0x258018[_0x4bf235(0x665)])['toDateString']() === _0x44541a[_0x4bf235(0x3df)]()); if (_0xc6c392[_0x4bf235(0xb1e)] === 0x0) { _0x1a3968[_0x4bf235(0x282)] = _0x4bf235(0x31d), _0x1dd441[_0x4bf235(0x282)] = ''; return; } _0x1a3968[_0x4bf235(0x282)] = '', _0xc6c392[_0x4bf235(0x42a)]((_0x1f6f07, _0x5b99b4) => _0x5b99b4[_0x4bf235(0x665)] - _0x1f6f07[_0x4bf235(0x665)])[_0x4bf235(0x5e2)](_0x3aae87 => { const _0x205ce5 = _0x4bf235, _0x108f5c = document[_0x205ce5(0x494)](_0x205ce5(0x962)); _0x108f5c[_0x205ce5(0x226)] = _0x205ce5(0x5be), _0x108f5c[_0x205ce5(0x282)] = _0x205ce5(0x6ad) + _0x3aae87[_0x205ce5(0x38f)] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x3aae87[_0x205ce5(0x582)][_0x205ce5(0x81f)](0x2) + _0x205ce5(0x7e8) + _0x3aae87['id'] + _0x205ce5(0x64f), _0x1a3968[_0x205ce5(0x6b3)](_0x108f5c); }), _0x1dd441 && (_0x4bf235(0x581) !== _0x4bf235(0x10a) ? (_0x1dd441[_0x4bf235(0x282)] = _0x4bf235(0x4bf), document[_0x4bf235(0x67e)](_0x4bf235(0x6fc))['addEventListener'](_0x4bf235(0x821), _0xfcfc6d)) : (_0x2d4515[_0x4bf235(0x52e)] = _0x474b4a[_0x4bf235(0x69a)] === 'narrator' ? '旁白' : _0x1951c7[_0x4bf235(0x69a)], _0x1ea186[_0x4bf235(0x52e)] = _0xb04573[_0x4bf235(0x45a)], _0xb3156[_0x4bf235(0x69a)] === _0x3fdb3e['name'] ? _0x4013cb(_0x12d080, _0x31a7fc['emotion']) : _0x48afae(_0x4ecae5, _0x4bf235(0x3d7)))); } async function _0xfcfc6d() { const _0x382632 = _0x3b2836; if (_0x382632(0x22d) === _0x382632(0x1d1)) _0x138fd8[_0x382632(0x4cf)](_0x382632(0x77f)), _0x16f807[_0x382632(0x2fd)][_0x382632(0x245)]('User\x20cancelled'), _0x405cfd[_0x382632(0x2fd)] = null; else { const _0x21f853 = new Date(), _0x417ac0 = _0x21f853[_0x382632(0x96c)]() + '-' + String(_0x21f853[_0x382632(0x4b8)]() + 0x1)[_0x382632(0xa2e)](0x2, '0') + '-' + String(_0x21f853[_0x382632(0x4f3)]())['padStart'](0x2, '0'); if (_0x57ec14[_0x382632(0x420)][_0x417ac0]) { _0x33f536(_0x382632(0x191)); return; } const _0x4e32a0 = _0x57ec14[_0x382632(0x68a)][_0x382632(0x1a0)](_0x15d280 => new Date(_0x15d280['timestamp'])[_0x382632(0x3df)]() === _0x21f853[_0x382632(0x3df)]()); if (_0x4e32a0['length'] === 0x0) { if (_0x382632(0x479) === _0x382632(0x56f)) _0xb32e3e(_0x15e1c9['id']), _0x3de758(_0x382632(0x9a5)), _0x164b76('chat'), _0x13809d(![]); else { _0x33f536(_0x382632(0x74d)); return; } } _0x58ea7f(!![], '正在整理…'); try { if (_0x382632(0x3c5) === _0x382632(0x78b)) { const _0x45dd1d = _0x314ac7(_0x585b3d['id']); if (!_0x45dd1d || !_0x45dd1d['id']) return _0x55e41b[_0x382632(0x390)](_0x382632(0x875)), null; _0x1cb14a[_0x382632(0x1bf)][_0x382632(0x1c5)]({ 'id': _0x382632(0x977) + _0x296bf9['now'](), 'date': _0x1dd34e[_0x382632(0x2ed)], 'type': _0x4e1ac2['eventType'], 'content': _0x398e7a[_0x382632(0x61e)], 'userId': _0x45dd1d['id'], 'createdBy': 'ai' }), _0x3dee4b(), _0x79d66c(), _0x5ab835(); const _0x2cfac8 = _0x1b36a5(_0x256075['id']); _0x2cfac8 && _0x431204['eventType'] === 'important' && _0xb6d066('💜\x20' + _0x2cfac8['name'] + '\x20添加了新的纪念日：' + _0x11cd81[_0x382632(0x61e)]); return { 'role': _0x382632(0x6f7), 'senderId': _0x594baa['id'], 'timestamp': _0x25c2de[_0x382632(0x2c5)](), 'isOffline': _0x25aa8d, 'content': null }; return { 'role': _0x382632(0x6f7), 'senderId': _0x42b287['id'], 'timestamp': _0x28dda6[_0x382632(0x2c5)](), 'isOffline': _0x4e810c, 'content': null }; } else { const _0x3b4621 = [_0x382632(0xa53), _0x382632(0x2d7), _0x382632(0x5b7), _0x382632(0x7d9), '休闲娱乐', _0x382632(0x164), _0x382632(0x121), _0x382632(0xa23)], _0x160d91 = _0x4e32a0[_0x382632(0x937)](_0x19fb9c => '-\x20' + _0x19fb9c['description'] + ':\x20' + _0x19fb9c['amount'])['join']('\x0a'), _0x2f9389 = _0x57ec14['characters'][_0x382632(0x937)](_0x4a34ea => { const _0x4bdd89 = _0x382632, _0x55ef40 = _0x57ec14['chats'][_0x4bdd89(0x270)](_0x24cf4b => _0x24cf4b[_0x4bdd89(0xa1e)] === _0x4bdd89(0x99c) && _0x24cf4b[_0x4bdd89(0x69c)]['includes'](_0x4a34ea['id'])), _0xa935d = _0x57ec14[_0x4bdd89(0x391)][_0x4bdd89(0x270)](_0x412939 => _0x412939['id'] === (_0x55ef40?.[_0x4bdd89(0x347)] || _0x57ec14[_0x4bdd89(0x422)])) || { 'id': _0x4bdd89(0x49a), 'name': '你' }; let _0x41dad6 = ''; if (_0x4a34ea[_0x4bdd89(0x48e)] && _0x4a34ea['linkedWorldBookIds']['length'] > 0x0) { if (_0x4bdd89(0x8c7) !== _0x4bdd89(0x8c7)) { const _0x30611f = (_0x34a215 - 0x5a) * _0x3f73af['PI'] / 0xb4; return { 'x': _0x58c65e + _0x3f09f8 * _0x7ece81[_0x4bdd89(0x714)](_0x30611f), 'y': _0x5d0364 + _0x54082a * _0x34fd0a[_0x4bdd89(0x725)](_0x30611f) }; } else _0x41dad6 = _0x4a34ea[_0x4bdd89(0x48e)][_0x4bdd89(0x937)](_0x1f5e6d => _0x57ec14[_0x4bdd89(0x9cd)][_0x4bdd89(0x270)](_0x3825a1 => _0x3825a1['id'] === _0x1f5e6d))[_0x4bdd89(0x1a0)](Boolean)['map'](_0x4c73a2 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x4c73a2[_0x4bdd89(0x589)] + _0x4bdd89(0x9e9) + _0x4c73a2[_0x4bdd89(0x6fd)])[_0x4bdd89(0x9f9)](''); } return _0x4bdd89(0x7d2) + _0x4a34ea['id'] + _0x4bdd89(0x834) + _0x4a34ea[_0x4bdd89(0x589)] + _0x4bdd89(0xa26) + _0x4a34ea[_0x4bdd89(0x7dc)] + _0x4bdd89(0x488) + _0xa935d[_0x4bdd89(0x589)] + _0x4bdd89(0x5de) + _0xa935d['id'] + ')\x0a' + _0x41dad6; })['join']('\x0a'), _0x41f6e4 = _0x57ec14[_0x382632(0x391)]['map'](_0x3df9ba => '\x20\x20-\x20用户ID:\x20' + _0x3df9ba['id'] + _0x382632(0x834) + _0x3df9ba[_0x382632(0x589)] + _0x382632(0xa26) + (_0x3df9ba[_0x382632(0x7dc)] || '无'))[_0x382632(0x9f9)]('\x0a'), _0x5aaae9 = _0x382632(0x662), _0x5f5c82 = _0x382632(0x610) + _0x3b4621[_0x382632(0x9f9)](',\x20') + ']\x0a\x0a#\x20角色资料库\x0a' + _0x2f9389 + _0x382632(0x207) + _0x41f6e4 + _0x382632(0x208) + _0x160d91, _0x190fa4 = [{ 'role': _0x382632(0x70d), 'content': _0x5aaae9 }, { 'role': _0x382632(0x2b3), 'content': _0x5f5c82 }], _0x22d2f6 = await _0x5e65cf(_0x190fa4, { 'json': !![] }), _0x1ec97e = _0x27a9e0(_0x22d2f6); if (!_0x1ec97e) { if ('HaKzl' === 'HaKzl') throw new Error(_0x382632(0x620) + _0x22d2f6); else _0x432dbe(_0x382632(0x65a) + _0x3b4f96[_0x382632(0x332)]); } const _0x279906 = JSON[_0x382632(0x258)](_0x1ec97e); _0x57ec14[_0x382632(0x420)][_0x417ac0] = { 'categorizedExpenses': _0x279906, 'timestamp': Date['now'](), 'originalExpenses': _0x4e32a0 }, _0x57ec14[_0x382632(0x68a)] = _0x57ec14['accountingData'][_0x382632(0x1a0)](_0x20a988 => new Date(_0x20a988['timestamp'])[_0x382632(0x3df)]() !== _0x21f853['toDateString']()), _0x203e68(), _0x740a48(_0x57ec14['accountingLedger'][_0x417ac0], _0x417ac0); } } catch (_0x3a4a32) { _0x33f536(_0x382632(0x23d) + _0x3a4a32[_0x382632(0x332)]); } finally { _0x58ea7f(![]); } } } async function _0x188ac8() { const _0x5d0ba5 = _0x3b2836, _0x3035a6 = [..._0xb9f8d]; try { const _0x374b08 = localStorage['getItem'](_0x5d0ba5(0xa69)); if (_0x374b08) { if (_0x5d0ba5(0x9b1) === 'bTvqP') { let _0xf1233d = _0x32f6dd[_0x5d0ba5(0x67e)](_0x5d0ba5(0x1be) + _0x32d26f['id']); !_0xf1233d && (_0xf1233d = _0xec264e[_0x5d0ba5(0x494)]('style'), _0xf1233d['id'] = 'style-' + _0x2bd69d['id'], _0x1f53f0[_0x5d0ba5(0x6d4)][_0x5d0ba5(0x6b3)](_0xf1233d)); const _0x4980b8 = _0x2e0902['bubbleCss'], _0x3b1091 = _0x4980b8[_0x5d0ba5(0x254)](/\.bubble\.sent/g, _0x5d0ba5(0xa95) + _0x52d64b['id'] + _0x5d0ba5(0x727))[_0x5d0ba5(0x254)](/\.bubble\.received/g, _0x5d0ba5(0xa95) + _0x1f2943['id'] + _0x5d0ba5(0x4f1)); _0xf1233d[_0x5d0ba5(0x282)] = _0x3b1091; } else { const _0x1da80f = JSON[_0x5d0ba5(0x258)](_0x374b08); if (Array['isArray'](_0x1da80f)) { if (_0x5d0ba5(0x57f) === _0x5d0ba5(0x701)) { if (_0xd4740d === null) return; const _0x2e02cf = _0x1231b0[_0x5d0ba5(0xa8a)][_0x23f267]; if (!_0x2e02cf) return; const _0x25966b = _0x68d242(); let _0x4e82c4 = '未知'; if (_0x2e02cf['role'] === 'user') _0x4e82c4 = _0x592c2e['userProfile'][_0x5d0ba5(0x589)] || '我'; else { const _0x4ef3f9 = _0x2e02cf[_0x5d0ba5(0x972)] || _0x25966b?.[_0x5d0ba5(0x69c)][0x0], _0x437c8c = _0x56f1fa(_0x4ef3f9); _0x4e82c4 = _0x437c8c ? _0x437c8c[_0x5d0ba5(0x589)] : '角色'; } let _0x12c7f2 = _0x2e02cf[_0x5d0ba5(0x6fd)] || ''; if (_0x2e02cf[_0x5d0ba5(0x856)]) _0x12c7f2 = _0x5d0ba5(0x426); if (_0x2e02cf[_0x5d0ba5(0x3e9)]) _0x12c7f2 = '[图片]'; if (_0x12c7f2[_0x5d0ba5(0xb1e)] > 0x32) _0x12c7f2 = _0x12c7f2[_0x5d0ba5(0x5ae)](0x0, 0x32) + '...'; _0x559896['activeQuote'] = { 'sender': _0x4e82c4, 'content': _0x12c7f2 }, _0xa61ebc(), _0x5bad17(), _0x4171db[_0x5d0ba5(0x855)](); } else _0x397bb6 = [..._0x3035a6, ..._0x1da80f]; } else _0x397bb6 = _0x3035a6; } } else _0x397bb6 = _0x3035a6; } catch (_0x29c979) { if (_0x5d0ba5(0x248) !== _0x5d0ba5(0x4e0)) console[_0x5d0ba5(0x390)](_0x5d0ba5(0x35b), _0x29c979), _0x397bb6 = _0x3035a6; else { const _0x7b809a = _0x37ecee[_0x5d0ba5(0x67e)](_0x5d0ba5(0xa0c)), _0x2f6bce = _0x4774cb[_0x5d0ba5(0x67e)]('modal-text'), _0x5cb1dc = _0xfe9831[_0x5d0ba5(0x67e)](_0x5d0ba5(0x153)), _0x4663dd = _0x43a968[_0x5d0ba5(0x67e)](_0x5d0ba5(0xacb)), _0x4435fd = _0x1e2c10[_0x5d0ba5(0x67e)](_0x5d0ba5(0x994)); _0x2f6bce[_0x5d0ba5(0x52e)] = _0x29b088, _0x7b809a[_0x5d0ba5(0x7df)][_0x5d0ba5(0x741)] = _0x5d0ba5(0x38c); const _0x372a8e = _0xc8b50e => { const _0x1492e8 = _0x5d0ba5; _0x7b809a[_0x1492e8(0x7df)][_0x1492e8(0x741)] = _0x1492e8(0x527), _0x5cb1dc[_0x1492e8(0x4e2)] = _0x4663dd['onclick'] = _0x4435fd[_0x1492e8(0x4e2)] = null, _0x2cd5fd[_0x1492e8(0x6a0)](_0x1492e8(0xa35), _0xb9022a), _0x20b373(_0xc8b50e); }, _0xb9022a = _0x2c9a41 => { const _0x3701b4 = _0x5d0ba5; if (_0x2c9a41[_0x3701b4(0x99d)] === _0x3701b4(0x4c5)) _0x372a8e(![]); if (_0x2c9a41['key'] === _0x3701b4(0x88d)) _0x372a8e(!![]); }; _0x5cb1dc[_0x5d0ba5(0x4e2)] = () => _0x372a8e(!![]), _0x4663dd['onclick'] = () => _0x372a8e(![]), _0x4435fd['onclick'] = () => _0x372a8e(![]), _0x25c931[_0x5d0ba5(0x990)]('keydown', _0xb9022a); } } if (!localStorage[_0x5d0ba5(0x6e3)](_0x5d0ba5(0x470))) { if (_0x5d0ba5(0x84e) === _0x5d0ba5(0x18e)) { const _0x1ae8a9 = _0x5e815d(_0x136120[0x1]), _0x190fad = _0x4da6c3[0x2]['trim'](), _0x38ad62 = _0x28374e(_0x103fa9[_0x5d0ba5(0x413)]); let _0x3ac165 = null; if (_0x190fad === _0x38ad62[_0x5d0ba5(0x589)]) _0x3ac165 = _0x38ad62['id']; else { const _0x437724 = _0x1e0609(); if (_0x437724[_0x5d0ba5(0xa1e)] === _0x5d0ba5(0x7d1)) { const _0x260d75 = _0x576c84['characters']['find'](_0x3e659d => _0x437724[_0x5d0ba5(0x69c)][_0x5d0ba5(0x9e5)](_0x3e659d['id']) && _0x3e659d[_0x5d0ba5(0x589)] === _0x190fad); if (_0x260d75) _0x3ac165 = _0x260d75['id']; } } if (_0x3ac165) return { 'type': _0x5d0ba5(0x67c), 'amount': _0x1ae8a9, 'recipientId': _0x3ac165, 'senderId': _0x3d25d1['id'] }; else return { 'type': 'text', 'content': _0x5d0ba5(0x211) + _0x190fad + '”，但没找到人)' }; } else { _0x156ce5(_0x5d0ba5(0x417))['then'](async _0x2c3644 => { const _0x5a4e47 = _0x5d0ba5; 'kkvhE' !== _0x5a4e47(0xa89) ? _0x6c6896 = _0x4becac[_0x5a4e47(0x258)](_0xe5394d['getItem'](_0x6d40ea) || '{}') : _0x2c3644 ? (_0x58ea7f(!![], _0x5a4e47(0xa17)), await _0x3f3e47(), localStorage[_0x5a4e47(0xa56)](_0x5a4e47(0x470), 'true'), _0x58ea7f(![]), _0x33f536(_0x5a4e47(0x373)), setTimeout(() => location[_0x5a4e47(0x668)](), 0x5dc)) : _0x33f536(_0x5a4e47(0x3a8)); }); return; } } if (!localStorage['getItem'](_0x5d0ba5(0x6a5))) { console[_0x5d0ba5(0x4cf)](_0x5d0ba5(0x6ea)), _0x58ea7f(!![], _0x5d0ba5(0x345)); const _0x14df70 = await _0x374e36(); localStorage['setItem']('noir_migration_fc_v1_complete', _0x5d0ba5(0x38d)), _0x58ea7f(![]); if (_0x14df70 > 0x0) { _0x33f536(_0x5d0ba5(0x10f) + _0x14df70 + '\x20张旧图片。应用即将刷新。'), setTimeout(() => location[_0x5d0ba5(0x668)](), 0x5dc); return; } } if (!localStorage[_0x5d0ba5(0x6e3)]('noir_migration_fc_v1_complete')) { } if (!localStorage['getItem'](_0x5d0ba5(0xa3c))) { console[_0x5d0ba5(0x4cf)](_0x5d0ba5(0x9dd)), _0x58ea7f(!![], _0x5d0ba5(0x1f0)); const _0x40a510 = await _0x2762c0(); localStorage['setItem'](_0x5d0ba5(0xa3c), _0x5d0ba5(0x38d)), _0x58ea7f(![]); if (_0x40a510 > 0x0) { _0x33f536(_0x5d0ba5(0x7b3) + _0x40a510 + _0x5d0ba5(0x516)), setTimeout(() => location['reload'](), 0x5dc); return; } } const _0x84c688 = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x3e6)); _0x84c688[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x35a66b = _0x5d0ba5; _0x2ef595(), _0x52c85d('snoopList', _0x35a66b(0x669)); }); const _0x22c1fe = _0x4dc479(); try { const _0x1c739e = localStorage['getItem'](_0x5d0ba5(0x173)); if (_0x1c739e) { if (_0x5d0ba5(0x44a) === _0x5d0ba5(0x4b3)) { const _0x5c014b = _0x4efc21[_0x5d0ba5(0xa13)]((_0x187f81 - _0x263641) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x130f0a += '-\x20**对话状态提示**:\x20你们已经有\x20' + _0x5c014b + _0x5d0ba5(0xac7); } else { const _0x33eacd = JSON[_0x5d0ba5(0x258)](_0x1c739e); if (_0x33eacd['accountingLedger']) { if (_0x5d0ba5(0x364) === _0x5d0ba5(0x917)) { _0x43ec67[_0x5d0ba5(0x390)](_0x5d0ba5(0x81c)); return; } else _0x57ec14[_0x5d0ba5(0x420)] = _0x33eacd[_0x5d0ba5(0x420)], console[_0x5d0ba5(0x4cf)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.'); } } } } catch (_0x3754c9) { _0x5d0ba5(0x131) === _0x5d0ba5(0x131) ? console[_0x5d0ba5(0x390)]('Noir\x27s\x20Temporal\x20Patch\x20failed:', _0x3754c9) : _0x3b2bfd[_0x5d0ba5(0x32b)][_0x5d0ba5(0x536)]('is-visible'); } _0x2eda74(), _0x372aae(), _0x194d3c(), _0x2eecf5(), _0x1b4b24(), _0x15b470(), _0x4f8536(), _0x5a285e(), _0x16a93f(), _0xeb8a09(), _0xa56f01(), _0xe00405(), _0x23429e(), setInterval(_0x23429e, 0x7530), _0x3f249a(), _0x1721c6(), _0x2012e5(); const _0x13e459 = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x8d6)); document['getElementById'](_0x5d0ba5(0x8a0))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), function (_0x36db9b) { const _0x1cc7c8 = _0x5d0ba5; if (_0x36db9b[_0x1cc7c8(0x842)][_0x1cc7c8(0x3a1)](_0x1cc7c8(0xadd))) { if (_0x1cc7c8(0x9ff) === 'msNuo') return; else { if (!_0x54feb3[_0x1cc7c8(0x241)](_0x576c3e)) return _0x1cc7c8(0x8e2); if (_0x276c4b['length'] === 0x0) return _0x1cc7c8(0x459); return _0x493a72[_0x1cc7c8(0x42a)]((_0x387057, _0x3bb9f0) => new _0x34b63e(_0x3bb9f0[_0x1cc7c8(0x665)]) - new _0x4d1e1a(_0x387057[_0x1cc7c8(0x665)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x2fb34f['map'](_0x278505 => _0x1cc7c8(0x60e) + (_0x278505['location_name'] || _0x1cc7c8(0x127)) + _0x1cc7c8(0x719) + (_0x278505[_0x1cc7c8(0xa6c)] || '') + _0x1cc7c8(0x421) + (_0x278505['timestamp'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')['join']('') + _0x1cc7c8(0x85b); } } const _0x59b3c7 = document[_0x1cc7c8(0x67e)](_0x1cc7c8(0x511)); _0x59b3c7 && _0x59b3c7[_0x1cc7c8(0x821)](); }), _0x52c85d('home', 'init'); (_0x22c1fe || _0x57ec14['characters'][_0x5d0ba5(0xb1e)] === 0x0) && (_0x33f536(_0x5d0ba5(0x55c)), setTimeout(() => { const _0x598644 = _0x5d0ba5; if ('suXxc' !== _0x598644(0x5e3)) { const _0x2dd067 = _0x1d11df[_0x598644(0x494)](_0x598644(0x962)); _0x2dd067[_0x598644(0x226)] = _0x598644(0x300), _0x22ad49['appendChild'](_0x2dd067); } else _0x52c85d(_0x598644(0xa06), 'home'), setTimeout(() => _0x446868(), 0x64); }, 0x6a4)); document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x14c))['addEventListener'](_0x5d0ba5(0x821), _0x2d7a2b); const _0x282042 = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x9a3)); document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x1aa))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => _0x282042[_0x5d0ba5(0x821)]()), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x787))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x23c6db = _0x5d0ba5; _0x57ec14[_0x23c6db(0x8a1)][_0x23c6db(0xad0)] = null, _0x203e68(), _0x3f249a(), _0x33f536(_0x23c6db(0x585)); }), _0x282042[_0x5d0ba5(0x990)](_0x5d0ba5(0x4a3), async _0x1d01aa => { const _0x3b6494 = _0x5d0ba5, _0x2e0157 = _0x1d01aa[_0x3b6494(0x842)][_0x3b6494(0x7e7)][0x0]; if (!_0x2e0157) return; try { const _0x529c47 = await _0x19643a(_0x2e0157); _0x57ec14[_0x3b6494(0x8a1)]['widgetBgImage'] = _0x529c47, _0x203e68(), _0x3f249a(), _0x33f536(_0x3b6494(0x67d)); } catch (_0x49c6e6) { if (_0x3b6494(0x3c0) === _0x3b6494(0x3c0)) _0x33f536(_0x3b6494(0x4d7) + _0x49c6e6[_0x3b6494(0x332)]); else { if (!_0x119731[_0x3b6494(0x241)](_0x1c89ac)) return '<p>格式错误</p>'; if (_0x465dad[_0x3b6494(0xb1e)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>'; return _0x280fa1[_0x3b6494(0x42a)]((_0x415f5a, _0xf09673) => new _0x36d11c(_0xf09673[_0x3b6494(0x665)]) - new _0x4be95f(_0x415f5a[_0x3b6494(0x665)])), _0x1f0910[_0x3b6494(0x937)](_0x21c6ab => { const _0xa8abb9 = _0x3b6494, _0x2ddbd3 = (_0x21c6ab[_0xa8abb9(0xb17)] || [])[_0xa8abb9(0x937)](_0xfab6bf => _0xa8abb9(0x924) + _0xfab6bf + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0xa8abb9(0x9f9)](''); return '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x21c6ab[_0xa8abb9(0x891)] || _0xa8abb9(0x3dc)) + _0xa8abb9(0x5e7) + (_0x21c6ab['timestamp'] || '') + _0xa8abb9(0x363) + (_0x21c6ab[_0xa8abb9(0x7eb)] || _0xa8abb9(0x446)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2ddbd3 + _0xa8abb9(0x2c8) + (_0x21c6ab[_0xa8abb9(0x8a4)] || 0x0)[_0xa8abb9(0x81f)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; })['join'](''); } } }), _0x5284c8(), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x613))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x5ce))[_0x5d0ba5(0x821)]()), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x8c3))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), async () => { const _0x6e7ea2 = _0x5d0ba5; await _0x29cf4e(_0x6e7ea2(0xa6d)), localStorage[_0x6e7ea2(0x523)](_0x6e7ea2(0x9d2)), _0x5284c8(), _0x33f536(_0x6e7ea2(0x46c)); }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x5ce))[_0x5d0ba5(0x990)]('change', async _0x3e8010 => { const _0x5f2465 = _0x5d0ba5, _0x4f2825 = _0x3e8010[_0x5f2465(0x842)][_0x5f2465(0x7e7)][0x0]; if (!_0x4f2825) return; try { 'yohhk' !== _0x5f2465(0x352) ? _0x5025ef(_0x3c2784['id'], _0xf8467c[_0x5f2465(0x937)](_0x37dba3 => _0x37dba3['id'])) : (await _0x59767c(_0x5f2465(0xa6d), _0x4f2825), await _0x5284c8(), _0x33f536('徽章已更换！')); } catch (_0xa8434e) { _0x33f536(_0x5f2465(0x4d7) + _0xa8434e['message']); } }), _0xa4a6d5(), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x110))['addEventListener'](_0x5d0ba5(0x4c3), _0x177cde), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x110))[_0x5d0ba5(0x990)](_0x5d0ba5(0x44d), _0x177cde, { 'passive': ![] }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x151))[_0x5d0ba5(0x990)]('click', () => document['getElementById'](_0x5d0ba5(0x6ae))[_0x5d0ba5(0x821)]()), document[_0x5d0ba5(0x67e)]('reset-card-button')['addEventListener'](_0x5d0ba5(0x821), async () => { const _0xbc2a65 = _0x5d0ba5; await _0x29cf4e(_0xbc2a65(0x7ed)), localStorage[_0xbc2a65(0x523)]('cardState'), _0xa4a6d5(), _0x33f536('卡片已移除。'); }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x6ae))[_0x5d0ba5(0x990)](_0x5d0ba5(0x4a3), async _0x1308fa => { const _0x2af1d1 = _0x5d0ba5, _0x4cd3c2 = _0x1308fa['target'][_0x2af1d1(0x7e7)][0x0]; if (!_0x4cd3c2) return; try { await _0x59767c(_0x2af1d1(0x7ed), _0x4cd3c2), await _0xa4a6d5(), _0x33f536(_0x2af1d1(0x119)); } catch (_0x8a5a5f) { _0x33f536(_0x2af1d1(0x4d7) + _0x8a5a5f[_0x2af1d1(0x332)]); } }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0xadf))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), async () => { const _0xfce582 = _0x5d0ba5, _0x61782e = await _0x156ce5('确定要重置所有小组件的位置吗？它们会回到初始位置。'); _0x61782e && (localStorage['removeItem']('badgeState'), localStorage[_0xfce582(0x523)](_0xfce582(0x23b)), _0x33f536(_0xfce582(0x380)), setTimeout(() => location[_0xfce582(0x668)](), 0x3e8)); }); const _0x44e81a = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x54b)); _0x44e81a['addEventListener'](_0x5d0ba5(0x821), () => { const _0x5b7ac2 = _0x5d0ba5; _0x2622ec(), _0x52c85d(_0x5b7ac2(0x2a3), 'home'); }); const _0x486894 = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x83c)); _0x486894[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x4ece6b = _0x5d0ba5; if (_0x4ece6b(0x486) === _0x4ece6b(0x185)) { _0x45d427['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } else _0x5af6f0(), _0x52c85d('musicLibrary', _0x4ece6b(0x669)); }), document[_0x5d0ba5(0x67e)]('back-to-home-from-music-library')[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => _0x52c85d(_0x5d0ba5(0x669), _0x5d0ba5(0x261))), document['getElementById'](_0x5d0ba5(0x4d3))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => _0x52c85d('home', _0x5d0ba5(0x2a3))), document[_0x5d0ba5(0x67e)]('back-to-diary-list')[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x11997e = _0x5d0ba5; _0x57ec14[_0x11997e(0x461)] = null, _0x52c85d(_0x11997e(0x2a3), _0x11997e(0x5fb)); }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x3cd))['addEventListener'](_0x5d0ba5(0x821), _0x266cf0), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x3ba))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), _0x5cb6a5), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x48a))[_0x5d0ba5(0x990)](_0x5d0ba5(0xa35), _0x19f5ff => { const _0x3e3084 = _0x5d0ba5; _0x19f5ff['key'] === _0x3e3084(0x88d) && !_0x19f5ff[_0x3e3084(0x3cf)] && (_0x19f5ff[_0x3e3084(0x624)](), _0x266cf0()); }); const _0x3a2a16 = [_0x5d0ba5(0x3d7), _0x5d0ba5(0x6aa), _0x5d0ba5(0x90a), _0x5d0ba5(0x85c), _0x5d0ba5(0x650)]; _0x3a2a16['forEach'](_0x156255 => { const _0x5757fb = _0x5d0ba5, _0x5a712c = document[_0x5757fb(0x67e)](_0x5757fb(0x48d) + _0x156255 + _0x5757fb(0x5e6)), _0x5ae51d = document['getElementById'](_0x5757fb(0x48d) + _0x156255 + _0x5757fb(0x53c)); _0x5a712c && _0x5ae51d && (_0x5a712c['addEventListener'](_0x5757fb(0x821), () => _0x5ae51d[_0x5757fb(0x821)]()), _0x5ae51d['addEventListener']('change', _0x2bf17f => { const _0x1163d2 = _0x5757fb; if (_0x1163d2(0x83b) === _0x1163d2(0x83b)) { const _0x2df692 = _0x2bf17f[_0x1163d2(0x842)][_0x1163d2(0x7e7)][0x0]; if (!_0x2df692) return; try { const _0x3a77ec = URL[_0x1163d2(0x709)](_0x2df692); _0x5a712c['style'][_0x1163d2(0x6dd)] = 'url(\x27' + _0x3a77ec + '\x27)'; } catch (_0x307e9b) { _0x1163d2(0x1d8) === _0x1163d2(0x1d8) ? _0x33f536(_0x1163d2(0x879) + _0x307e9b[_0x1163d2(0x332)]) : _0x16d015 = _0x5cddab[_0x1163d2(0x5b2)]; } } else _0x301a9f('有\x20' + _0xb165e4 + '\x20行格式不对，被我无视了。'); })); }), document[_0x5d0ba5(0x67e)]('galgame-textbox-container')['addEventListener'](_0x5d0ba5(0x821), _0x1ac4c3), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x18c))[_0x5d0ba5(0x990)]('click', () => { const _0x3bd66e = _0x5d0ba5; _0x57ec14[_0x3bd66e(0x17d)] = _0x57ec14[_0x3bd66e(0x17d)] === 'novel' ? _0x3bd66e(0x44b) : 'novel', _0x3f4071(); }), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x4fd))[_0x5d0ba5(0x990)]('mousedown', _0x1db754), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x4fd))[_0x5d0ba5(0x990)](_0x5d0ba5(0x44d), _0x1db754, { 'passive': ![] }); let _0x2f84a5 = null; function _0x1db754(_0x228c7e) { const _0x104c77 = _0x5d0ba5; if (_0x2f84a5) clearTimeout(_0x2f84a5); const _0x5cc890 = _0x228c7e[_0x104c77(0x842)][_0x104c77(0x3a1)](_0x104c77(0x21a)); if (!_0x5cc890) return; const _0x34ba5e = parseInt(_0x5cc890[_0x104c77(0x988)][_0x104c77(0xa4b)], 0xa); if (isNaN(_0x34ba5e)) return; const _0x4ed6a6 = () => { _0x2f84a5 = setTimeout(() => { const _0x17f7b8 = _0x3df6; if (_0x228c7e[_0x17f7b8(0xa1e)] === 'touchstart') _0x228c7e[_0x17f7b8(0x624)](); _0x21ad96(_0x34ba5e); }, 0x320); }, _0x267f1d = () => { if (_0x2f84a5) clearTimeout(_0x2f84a5); }; document['addEventListener'](_0x104c77(0x280), _0x267f1d, { 'once': !![] }), document[_0x104c77(0x990)](_0x104c77(0x854), _0x267f1d, { 'once': !![] }), document[_0x104c77(0x990)](_0x104c77(0x517), _0x267f1d, { 'once': !![] }), document['addEventListener'](_0x104c77(0x39c), _0x267f1d, { 'once': !![] }), _0x4ed6a6(); } document[_0x5d0ba5(0x570)][_0x5d0ba5(0x990)]('click', _0x200dd7 => { const _0x1c353f = _0x5d0ba5, _0x862f79 = _0x200dd7[_0x1c353f(0x842)][_0x1c353f(0x3a1)](_0x1c353f(0x4b2)); if (_0x862f79) { if ('DZkdz' !== 'DZkdz') { const _0x5d3830 = _0x52e71e(_0x1a8cfc['id']), _0x1c71ee = _0x5d3830[_0x1c353f(0xb1e)] > 0x0 ? _0x5d3830[_0x5d3830[_0x1c353f(0xb1e)] - 0x1] : null; return { 'chat': _0x42ce08, 'history': _0x5d3830, 'lastTimestamp': _0x1c71ee ? _0x1c71ee[_0x1c353f(0x665)] : 0x0 }; } else { const _0x4575f5 = _0x200dd7[_0x1c353f(0x842)][_0x1c353f(0x3a1)](_0x1c353f(0x555)), _0x4864b1 = _0x200dd7[_0x1c353f(0x842)]['closest'](_0x1c353f(0x456)); if (_0x4575f5) { if ('uKktU' !== _0x1c353f(0x229)) { const _0x1e7b1a = []; if (_0x241430[_0x1c353f(0x6fd)]) _0x1e7b1a[_0x1c353f(0x1c5)]({ 'text': _0x1f2c53[_0x1c353f(0x6fd)] }); if (_0x19fdc7[_0x1c353f(0x3e9)]) { const _0x136fd3 = _0x2dc654[_0x1c353f(0x3e9)][_0x1c353f(0x52b)](',')[0x1], _0x23dce7 = _0x389813[_0x1c353f(0x3e9)][_0x1c353f(0x5ae)](_0x54592e['image'][_0x1c353f(0x2ac)](':') + 0x1, _0xfd1bb4[_0x1c353f(0x3e9)][_0x1c353f(0x2ac)](';')) || _0x1c353f(0x2c9); _0x1e7b1a['push']({ 'inline_data': { 'mime_type': _0x23dce7, 'data': _0x136fd3 } }); } return _0x1e7b1a; } else _0x274e17(); } else { if (_0x4864b1) { if (_0x1c353f(0x387) === _0x1c353f(0x387)) { const _0x57d371 = _0x4864b1['closest'](_0x1c353f(0x97d)), _0x1ee4e9 = _0x4864b1[_0x1c353f(0x988)][_0x1c353f(0x2b4)], _0x3cd751 = parseInt(_0x57d371['dataset'][_0x1c353f(0xa4b)], 0xa); _0x27e066(_0x1ee4e9, _0x3cd751, _0x862f79); } else _0x3b2ac3[_0x1c353f(0xa8a)][_0x1c353f(0x5e2)]((_0x457b8b, _0x32fea2) => _0x24c1b5(_0x457b8b, _0x32fea2)); } else { if ('yXCqA' !== _0x1c353f(0x442)) { const _0x5e1a30 = _0x3a6dc0(); _0x5e1a30 && _0x5e1a30['activeListenSession'] && _0x5e1a30[_0x1c353f(0x277)][_0x1c353f(0x3ef)] && (_0x1c353f(0x51b) === _0x1c353f(0x509) ? (_0x166014['className'] = _0x1c353f(0xa86), _0x482eea[_0x1c353f(0x7df)][_0x1c353f(0x384)] = _0x1c353f(0x998), _0x2dcdd8['style'][_0x1c353f(0x89d)] = _0x1c353f(0x457), _0x46fe6f[_0x1c353f(0x282)] = _0x5db686) : (_0x528002[_0x1c353f(0x7df)]['display'] = 'flex', setTimeout(() => _0x528002['classList'][_0x1c353f(0x536)](_0x1c353f(0x716)), 0xa))); } else _0x32f54b && (_0x1f1dad['style'][_0x1c353f(0x741)] = 'none'); } } return; } } if (window[_0x1c353f(0x88c)]()[_0x1c353f(0x9bb)]()) return; const _0x2b17dc = _0x200dd7['target']['closest']('.message-container'); if (_0x2b17dc && !_0x200dd7[_0x1c353f(0x842)][_0x1c353f(0x3a1)](_0x1c353f(0x132))) { if ('ErteK' === 'ErteK') { const _0x2c5c91 = parseInt(_0x2b17dc['dataset'][_0x1c353f(0xa4b)], 0xa); !isNaN(_0x2c5c91) && _0x21ad96(_0x2c5c91); } else { const _0x2794e2 = _0x56099a[_0x1c353f(0x494)]('div'); _0x2794e2['className'] = _0x1c353f(0x67a); const _0x1fc3b3 = _0xdd3275 + '-' + _0x540f66(_0x1fbc08 + 0x1)[_0x1c353f(0xa2e)](0x2, '0') + '-' + _0x3f3c05(_0x504f84)['padStart'](0x2, '0'); if (_0x1fc3b3 === _0x16ec11) _0x2794e2[_0x1c353f(0x32b)]['add']('is-today'); if (_0x1fc3b3 === _0x30004c[_0x1c353f(0xa25)]) _0x2794e2[_0x1c353f(0x32b)][_0x1c353f(0x536)](_0x1c353f(0x361)); const _0x467154 = _0x3e2a93[_0x1c353f(0x494)]('span'); _0x467154[_0x1c353f(0x226)] = _0x1c353f(0x34f), _0x467154[_0x1c353f(0x52e)] = _0x2059fc, _0x2794e2[_0x1c353f(0x6b3)](_0x467154); const _0x301417 = _0x3e3676[_0x1c353f(0x1bf)][_0x1c353f(0x1a0)](_0x287c2c => _0x287c2c[_0x1c353f(0x2b8)] === _0x1fc3b3); if (_0x301417['length'] > 0x0) { const _0x5a8597 = _0x5b5fc9['createElement'](_0x1c353f(0x962)); _0x5a8597['className'] = _0x1c353f(0x300), _0x2794e2[_0x1c353f(0x6b3)](_0x5a8597); } _0x2794e2[_0x1c353f(0x990)](_0x1c353f(0x821), () => { const _0x20501d = _0x1c353f; _0xc4ac9b[_0x20501d(0xa25)] = _0x1fc3b3, _0x108431(); }), _0x6b6a3b[_0x1c353f(0x6b3)](_0x2794e2); } } }); const _0x15d9cb = document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x295)); if (_0x15d9cb) { if (_0x5d0ba5(0x71a) !== _0x5d0ba5(0x19f)) _0x15d9cb[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0xc4b2d9 = _0x5d0ba5; _0x33f536(_0xc4b2d9(0x15b)); }); else { const _0x2631c2 = _0x3b7919[_0x5d0ba5(0x67e)]('daily-expenses-list'), _0x18fb0b = _0x76c496[_0x5d0ba5(0x67e)](_0x5d0ba5(0x640)), _0x1a5a6d = new _0xddbc83(), _0x2ecfac = _0x82627b[_0x5d0ba5(0x68a)][_0x5d0ba5(0x1a0)](_0x1b3a8d => new _0x905c53(_0x1b3a8d['timestamp'])['toDateString']() === _0x1a5a6d[_0x5d0ba5(0x3df)]()); if (_0x2ecfac[_0x5d0ba5(0xb1e)] === 0x0) { _0x2631c2['innerHTML'] = _0x5d0ba5(0x31d), _0x18fb0b[_0x5d0ba5(0x282)] = ''; return; } _0x2631c2['innerHTML'] = '', _0x2ecfac['sort']((_0x29dc39, _0xae2952) => _0xae2952[_0x5d0ba5(0x665)] - _0x29dc39[_0x5d0ba5(0x665)])[_0x5d0ba5(0x5e2)](_0xe90167 => { const _0x32018e = _0x5d0ba5, _0x19794c = _0x34b040['createElement'](_0x32018e(0x962)); _0x19794c[_0x32018e(0x226)] = _0x32018e(0x5be), _0x19794c[_0x32018e(0x282)] = _0x32018e(0x6ad) + _0xe90167['description'] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0xe90167[_0x32018e(0x582)][_0x32018e(0x81f)](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0xe90167['id'] + _0x32018e(0x64f), _0x2631c2[_0x32018e(0x6b3)](_0x19794c); }), _0x18fb0b && (_0x18fb0b[_0x5d0ba5(0x282)] = _0x5d0ba5(0x4bf), _0x80ddba[_0x5d0ba5(0x67e)]('organize-bill-button')[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), _0x1b282e)); } } const _0x5d4116 = document[_0x5d0ba5(0x67e)]('custom-stickers-input'), _0x19b90d = localStorage[_0x5d0ba5(0x6e3)](_0x5d0ba5(0xa69)); if (_0x19b90d) try { const _0x2fe345 = JSON['parse'](_0x19b90d); Array[_0x5d0ba5(0x241)](_0x2fe345) && (_0x5d4116[_0x5d0ba5(0x552)] = _0x2fe345[_0x5d0ba5(0x937)](_0x44a0e6 => _0x44a0e6[_0x5d0ba5(0x589)] + '--' + _0x44a0e6[_0x5d0ba5(0x609)])['join']('\x0a')); } catch (_0xe9d5be) { } document[_0x5d0ba5(0x67e)](_0x5d0ba5(0x833))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x1b1d4f = _0x5d0ba5, _0x32dea7 = _0x5d4116[_0x1b1d4f(0x552)], _0x1793f4 = _0x32dea7[_0x1b1d4f(0x52b)]('\x0a')[_0x1b1d4f(0x1a0)](_0x4247f4 => _0x4247f4[_0x1b1d4f(0x3dd)]() !== ''), _0x3ce632 = []; let _0xa13fe = 0x0; for (const _0x1a4bd6 of _0x1793f4) { const _0x2ded98 = _0x1a4bd6[_0x1b1d4f(0x52b)]('--'); _0x2ded98['length'] === 0x2 && _0x2ded98[0x0][_0x1b1d4f(0x3dd)]() && _0x2ded98[0x1][_0x1b1d4f(0x3dd)]()[_0x1b1d4f(0x2bd)](_0x1b1d4f(0x444)) ? _0x3ce632[_0x1b1d4f(0x1c5)]({ 'name': _0x2ded98[0x0]['trim'](), 'url': _0x2ded98[0x1]['trim']() }) : _0xa13fe++; } _0xa13fe > 0x0 && _0x33f536('有\x20' + _0xa13fe + _0x1b1d4f(0x61b)); try { localStorage[_0x1b1d4f(0xa56)](_0x1b1d4f(0xa69), JSON[_0x1b1d4f(0x7d5)](_0x3ce632)), _0x33f536('表情包已保存！正在刷新应用...'), setTimeout(() => location['reload'](), 0x5dc); } catch (_0x4ba6d2) { _0x33f536(_0x1b1d4f(0x54d)); } }), _0x3190fe(), document[_0x5d0ba5(0x67e)](_0x5d0ba5(0xaa0))[_0x5d0ba5(0x990)](_0x5d0ba5(0x821), () => { const _0x49f248 = _0x5d0ba5; document[_0x49f248(0x67e)](_0x49f248(0x5e1))['click'](); }), document[_0x5d0ba5(0x67e)]('reset-card-button-2')['addEventListener'](_0x5d0ba5(0x821), async () => { const _0x5ec060 = _0x5d0ba5; if (_0x5ec060(0x8cf) === _0x5ec060(0xa32)) { const _0x5b72fe = _0x366f6b['getItem'](_0x5ec060(0x1fb)); if (_0x5b72fe) { const { playlist: _0x4d5389, currentIndex: _0x273c2a } = _0x5a0a3e[_0x5ec060(0x258)](_0x5b72fe); _0x59c227[_0x5ec060(0x241)](_0x4d5389) && _0x4d5389['length'] > 0x0 && _0x273c2a > -0x1 && (_0x5df137['musicPlaylist'] = _0x4d5389, _0x171519[_0x5ec060(0x892)] = _0x273c2a, _0x26f07c[_0x5ec060(0x621)] = ![], _0x5ab2e7()); } } else await _0x29cf4e(_0x5ec060(0x935)), localStorage[_0x5ec060(0x523)](_0x5ec060(0x86f)), _0xa4a6d5(), _0x33f536(_0x5ec060(0x1de)); }), document[_0x5d0ba5(0x67e)]('card-input-2')[_0x5d0ba5(0x990)](_0x5d0ba5(0x4a3), async _0x54d56f => { const _0x465b81 = _0x5d0ba5, _0x2a915f = _0x54d56f['target'][_0x465b81(0x7e7)][0x0]; if (!_0x2a915f) return; try { await _0x59767c(_0x465b81(0x935), _0x2a915f), await _0xa4a6d5(), _0x33f536('卡片\x202\x20已更换！'); } catch (_0x2de0fd) { if ('lQztW' !== _0x465b81(0x8b8)) _0x33f536(_0x465b81(0x4d7) + _0x2de0fd[_0x465b81(0x332)]); else { const _0x516097 = _0x296cc1[_0x465b81(0x8c4)][_0x465b81(0x1a0)](_0x294a19 => _0x294a19[_0x465b81(0x52a)] === _0x465b81(0x2b3))[_0x465b81(0x8a9)](); _0x516097 && (_0x38e8b9 = _0x516097[_0x465b81(0x6fd)]); } } }), _0x1d45e4(), _0x5381e5(), _0x2eff78(); } const _0x2a4feb = 'music_library'; async function _0x50081a(_0x5775a9) { const _0x13a8ea = _0x3b2836; if (_0x13a8ea(0x661) === _0x13a8ea(0x661)) { const _0x3110ef = await _0x253fd2; return new Promise((_0x11264b, _0x3f8916) => { const _0x250e43 = _0x13a8ea, _0x472253 = _0x3110ef[_0x250e43(0x766)](_0x2a4feb, _0x250e43(0x8cc)), _0x4a8b8c = _0x472253[_0x250e43(0x6fe)](_0x2a4feb), _0x570d38 = _0x4a8b8c[_0x250e43(0x751)](_0x5775a9); _0x570d38[_0x250e43(0x465)] = () => _0x11264b(_0x570d38['result']), _0x570d38[_0x250e43(0x7e4)] = () => _0x3f8916(_0x570d38[_0x250e43(0x390)]); }); } else _0x2eea0e[_0x13a8ea(0x420)] = _0x589086[_0x13a8ea(0x420)], _0x5a466b[_0x13a8ea(0x4cf)](_0x13a8ea(0x861)); } async function _0x279c33() { const _0x5e9340 = await _0x253fd2; return new Promise((_0x3ff1c9, _0x2d363d) => { const _0x194a03 = _0x3df6, _0xe1334 = _0x5e9340[_0x194a03(0x766)](_0x2a4feb, _0x194a03(0x8cc)), _0x1cf896 = _0xe1334[_0x194a03(0x6fe)](_0x2a4feb), _0x3b5ce1 = _0x1cf896[_0x194a03(0x676)](); _0x3b5ce1[_0x194a03(0x465)] = () => _0x3ff1c9(_0x3b5ce1[_0x194a03(0x20c)]), _0x3b5ce1['onerror'] = () => _0x2d363d(_0x3b5ce1[_0x194a03(0x390)]); }); } async function _0x5162da(_0x1d840e) { const _0x2ad578 = await _0x253fd2; return new Promise((_0x49893f, _0x5d0558) => { const _0x407c2e = _0x3df6, _0x2a4b83 = _0x2ad578[_0x407c2e(0x766)](_0x2a4feb, _0x407c2e(0x73e)), _0x1ea1db = _0x2a4b83[_0x407c2e(0x6fe)](_0x2a4feb), _0x2124eb = _0x1ea1db[_0x407c2e(0xaa9)](_0x1d840e); _0x2124eb['onsuccess'] = () => _0x49893f(_0x2124eb['result']), _0x2124eb['onerror'] = () => _0x5d0558(_0x2124eb[_0x407c2e(0x390)]); }); } async function _0x164826(_0x4f9158) { const _0x1c48eb = await _0x253fd2; return new Promise((_0x3077d8, _0xcab22b) => { const _0x54c92f = _0x3df6; if (_0x54c92f(0xa81) !== _0x54c92f(0x483)) { const _0x496255 = _0x1c48eb['transaction'](_0x2a4feb, _0x54c92f(0x73e)), _0x9bc3e6 = _0x496255[_0x54c92f(0x6fe)](_0x2a4feb), _0x338c4b = _0x9bc3e6[_0x54c92f(0x2f4)](_0x4f9158); _0x338c4b['onsuccess'] = () => _0x3077d8(), _0x338c4b[_0x54c92f(0x7e4)] = () => _0xcab22b(_0x338c4b[_0x54c92f(0x390)]); } else { if (_0x410520 < 0x0 || _0x18202e >= _0x3e0dc1) return; _0x1cc223[_0x54c92f(0x7df)]['transform'] = _0x54c92f(0x315) + _0x24269a * (0x64 / _0x52ed00) + '%)', _0x2a55bb[_0x54c92f(0x5e2)](_0x5e1a7b => _0x5e1a7b['classList'][_0x54c92f(0x318)](_0x54c92f(0x115))), _0xe38e6b[_0x578d27]['classList'][_0x54c92f(0x536)](_0x54c92f(0x115)), _0x262e04 = _0x49de8d, _0xd5f81 === 0x0 ? _0xb31929['style'][_0x54c92f(0x741)] = _0x54c92f(0x527) : _0x30b815['style'][_0x54c92f(0x741)] = _0x54c92f(0x38c); } }); } let _0x244e81 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x70d01e = { 'audio': document['getElementById'](_0x3b2836(0x777)), 'cover': document['getElementById']('altar-slot-cover'), 'info': document[_0x3b2836(0x67e)](_0x3b2836(0x73f)), 'lyrics': document['getElementById'](_0x3b2836(0x707)) }, _0x59cd30 = { 'audio': document['getElementById']('audio-file-input'), 'cover': document[_0x3b2836(0x67e)](_0x3b2836(0x9cc)), 'info': document['getElementById'](_0x3b2836(0xa1a)), 'lyrics': document[_0x3b2836(0x67e)](_0x3b2836(0x5a5)) }; for (const _0x454b74 in _0x70d01e) { _0x70d01e[_0x454b74][_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x59cd30[_0x454b74]['click']()), _0x59cd30[_0x454b74]['addEventListener'](_0x3b2836(0x4a3), _0x5d7426 => { const _0x3aa7a9 = _0x3b2836; _0x1b1371(_0x454b74, _0x5d7426[_0x3aa7a9(0x842)][_0x3aa7a9(0x7e7)][0x0]); }); } function _0x1b1371(_0x19d5c7, _0x5a0080) { const _0x22ba9f = _0x3b2836; if (!_0x5a0080) return; _0x244e81[_0x19d5c7] = _0x5a0080, _0x70d01e[_0x19d5c7][_0x22ba9f(0x433)](_0x22ba9f(0x886))[_0x22ba9f(0x52e)] = _0x5a0080[_0x22ba9f(0x589)], _0x70d01e[_0x19d5c7][_0x22ba9f(0x32b)][_0x22ba9f(0x536)](_0x22ba9f(0x2b0)), _0x172e9a(); } function _0x172e9a() { const _0x2e3dbf = _0x3b2836; if (_0x2e3dbf(0x2f9) === _0x2e3dbf(0x2f9)) { const _0x1ee029 = document[_0x2e3dbf(0x67e)]('confirm-altar-upload-button'); _0x244e81[_0x2e3dbf(0x27f)] && _0x244e81['info'] ? _0x1ee029[_0x2e3dbf(0x6c3)] = ![] : _0x2e3dbf(0xa29) !== 'xHWBz' ? _0x1ee029[_0x2e3dbf(0x6c3)] = !![] : (_0x3af5d7[_0x2e3dbf(0x390)](_0x2e3dbf(0x20f), _0x16c396), _0x1a0348 = _0x2e3dbf(0x89b) + _0x174154 + _0x2e3dbf(0xa4d)); } else { const _0x41da4d = _0x5af555['transaction'](_0x286dc0, _0x2e3dbf(0x8cc)), _0x50d5c9 = _0x41da4d[_0x2e3dbf(0x6fe)](_0x2e6d99), _0x4a0ec2 = _0x50d5c9[_0x2e3dbf(0x751)](_0x5f075e); _0x4a0ec2['onsuccess'] = () => _0x5f940(_0x4a0ec2['result']), _0x4a0ec2['onerror'] = () => _0x120a53(_0x4a0ec2['error']); } } function _0x62d92d() { const _0x34f51e = _0x3b2836; _0x244e81 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x522d97 in _0x70d01e) { _0x70d01e[_0x522d97][_0x34f51e(0x32b)][_0x34f51e(0x318)](_0x34f51e(0x2b0)), _0x59cd30[_0x522d97][_0x34f51e(0x552)] = ''; } _0x70d01e['audio']['querySelector'](_0x34f51e(0x886))['textContent'] = _0x34f51e(0x279), _0x70d01e['cover'][_0x34f51e(0x433)](_0x34f51e(0x886))[_0x34f51e(0x52e)] = _0x34f51e(0x1e0), _0x70d01e['info'][_0x34f51e(0x433)](_0x34f51e(0x886))[_0x34f51e(0x52e)] = _0x34f51e(0x4e7), _0x70d01e['lyrics'][_0x34f51e(0x433)](_0x34f51e(0x886))[_0x34f51e(0x52e)] = _0x34f51e(0x8c9), _0x172e9a(); } document[_0x3b2836(0x67e)](_0x3b2836(0x324))[_0x3b2836(0x990)](_0x3b2836(0x821), async () => { const _0x46f2ed = _0x3b2836; if (!_0x244e81['audio'] || !_0x244e81[_0x46f2ed(0x63a)]) { if (_0x46f2ed(0x58d) !== _0x46f2ed(0x58d)) return; else { _0x33f536('真是的，必需的祭品都还没准备好！'); return; } } await _0x44d7aa(); }), document[_0x3b2836(0x67e)](_0x3b2836(0x672))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x2e9b68 = _0x3b2836; _0x62d92d(), _0x52c85d(_0x2e9b68(0x503), _0x2e9b68(0x261)); }), document[_0x3b2836(0x67e)](_0x3b2836(0x395))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x2fca1f = _0x3b2836; if (_0x2fca1f(0x311) !== _0x2fca1f(0x3e7)) _0x52c85d(_0x2fca1f(0x261), _0x2fca1f(0x503)); else { const _0x49290a = _0x4eae91(_0x356467['id']); if (_0x49290a && _0x49290a[_0x2fca1f(0xb1e)] > 0x0) { const _0x88898b = _0x49290a[_0x49290a[_0x2fca1f(0xb1e)] - 0x1]; (!_0x169f2d || _0x88898b[_0x2fca1f(0x665)] > _0x2b6c9b[_0x2fca1f(0x665)]) && (_0x3a495c = _0x88898b); } } }); async function _0x44d7aa() { const _0x1bf11a = _0x3b2836; if (_0x1bf11a(0x11a) === _0x1bf11a(0xac3)) { if (!_0x159576 || !_0x552fe4[_0x1bf11a(0x413)]) return; const _0x2c0e58 = { 'role': _0x1bf11a(0x2b3), 'content': _0x1bf11a(0x93f) + _0xc79e97[_0x1bf11a(0x589)] + ']', 'displayUrl': _0x409473['url'], 'timestamp': _0x5f3932[_0x1bf11a(0x2c5)]() }; _0x421c55[_0x1bf11a(0xa8a)]['push'](_0x2c0e58), _0x41fc34(_0x2c0e58, _0x3bf908[_0x1bf11a(0xa8a)]['length'] - 0x1), _0x13cd73(), _0x1122f1[_0x1bf11a(0x32b)][_0x1bf11a(0x318)]('show'); } else { _0x58ea7f(!![], '正在解析音乐灵魂...'); try { const _0x19b3f6 = await _0x244e81[_0x1bf11a(0x63a)][_0x1bf11a(0x9de)](); let _0x5486bb; if (_0x19b3f6[_0x1bf11a(0x3dd)]()['startsWith']('{')) _0x1bf11a(0x48c) !== _0x1bf11a(0x3bd) ? _0x5486bb = JSON[_0x1bf11a(0x258)](_0x19b3f6) : _0x2d8289('图标处理失败:\x20' + _0x24693e[_0x1bf11a(0x332)]); else { if ('LSiGT' !== _0x1bf11a(0x9b8)) _0x396663[_0x1bf11a(0x282)] = '<span\x20style=\x22opacity:\x200.6;\x22>无</span>'; else { _0x5486bb = {}; const _0x2bb4e1 = _0x19b3f6[_0x1bf11a(0x52b)]('\x0a'); _0x2bb4e1['forEach'](_0x29073f => { const _0x2684dc = _0x1bf11a; if ('ZnGEJ' !== _0x2684dc(0x415)) { const _0x172473 = _0x29073f['split'](/:\s|：\s/); if (_0x172473[_0x2684dc(0xb1e)] === 0x2) { if (_0x2684dc(0x330) !== _0x2684dc(0x330)) return _0x2c1a2d(_0x49123d)[_0x2684dc(0x69b)](_0x160088 => _0x160088[_0x2684dc(0x44f)]()); else { const _0x39e09d = _0x172473[0x0][_0x2684dc(0x3dd)](), _0x321248 = _0x172473[0x1][_0x2684dc(0x3dd)](), _0x14d55c = { '歌名': _0x2684dc(0x9e4), '艺术家': '歌手', '专辑': '专辑' }; _0x14d55c[_0x39e09d] && (_0x5486bb[_0x14d55c[_0x39e09d]] = _0x321248); } } } else _0x152845 += _0x2684dc(0x73b) + _0x58b368[_0x2684dc(0x589)] + _0x2684dc(0x543); }); if (!_0x5486bb[_0x1bf11a(0x9e4)]) throw new Error(_0x1bf11a(0x1cb)); _0x5486bb[_0x1bf11a(0xa9f)] = _0x1bf11a(0x940) + Date['now'](); } } const _0x4cae7e = _0x1bf11a(0x940) + (_0x5486bb[_0x1bf11a(0xa9f)] || Date['now']()), _0x145dd6 = { 'id': _0x4cae7e, 'info': _0x5486bb, 'audio': _0x244e81['audio'], 'cover': _0x244e81[_0x1bf11a(0xa4e)], 'lyrics': _0x244e81[_0x1bf11a(0x25a)] ? await _0x244e81[_0x1bf11a(0x25a)]['text']() : '' }; await _0x5162da(_0x145dd6), await _0x5af6f0(), _0x58ea7f(![]), _0x33f536(_0x1bf11a(0x926) + _0x5486bb[_0x1bf11a(0x9e4)] + _0x1bf11a(0xa15)), _0x52c85d('musicLibrary', _0x1bf11a(0x503)); } catch (_0x55f77e) { _0x58ea7f(![]), console[_0x1bf11a(0x390)](_0x1bf11a(0x198), _0x55f77e), _0x33f536(_0x1bf11a(0x841) + _0x55f77e[_0x1bf11a(0x332)]); } } } async function _0x5af6f0() { const _0x1d0662 = _0x3b2836; if ('MlTYF' !== _0x1d0662(0x7d8)) { _0x534f6f(_0x1d0662(0x852)); return; } else { const _0x78df2 = document['getElementById'](_0x1d0662(0x179)); _0x78df2[_0x1d0662(0x282)] = ''; const _0x40d03e = await _0x279c33(); if (_0x40d03e[_0x1d0662(0xb1e)] === 0x0) { _0x78df2[_0x1d0662(0x282)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } _0x40d03e[_0x1d0662(0x42a)]((_0x34b9c0, _0x131a3a) => (_0x34b9c0[_0x1d0662(0x63a)][_0x1d0662(0x9e4)] || '')['localeCompare'](_0x131a3a[_0x1d0662(0x63a)]['歌曲名称'] || '')); for (const _0x351769 of _0x40d03e) { const _0x591f4a = document[_0x1d0662(0x494)](_0x1d0662(0x962)); _0x591f4a[_0x1d0662(0x226)] = _0x1d0662(0xa2a), _0x591f4a['dataset']['songId'] = _0x351769['id']; const _0x4ebc41 = _0x351769[_0x1d0662(0xa4e)] ? URL[_0x1d0662(0x709)](_0x351769[_0x1d0662(0xa4e)]) : _0x520817; _0x591f4a[_0x1d0662(0x282)] = _0x1d0662(0xaf6) + _0x4ebc41 + _0x1d0662(0x374) + (_0x351769[_0x1d0662(0x63a)]['歌曲名称'] || '未知歌曲') + _0x1d0662(0x178) + (_0x351769[_0x1d0662(0x63a)]['歌手'] || _0x1d0662(0x997)) + _0x1d0662(0x290); let _0x41ced9 = null; const _0x5972e5 = _0x2bfbe0 => { const _0x19089f = _0x1d0662; if (_0x2bfbe0[_0x19089f(0xadd)] === 0x2) return; _0x41ced9 = setTimeout(async () => { const _0x648186 = _0x19089f; if (_0x2bfbe0[_0x648186(0xa1e)] === 'touchstart') _0x2bfbe0[_0x648186(0x624)](); const _0x523954 = await _0x156ce5(_0x648186(0x57c) + _0x351769['info']['歌曲名称'] + _0x648186(0xa63)); if (_0x523954) { if (_0x648186(0x3e8) !== _0x648186(0x5c8)) await _0x164826(_0x351769['id']), await _0x5af6f0(), _0x33f536(_0x648186(0x98d)); else { const _0x446bdc = _0x229d2b[_0x648186(0x67e)](_0x648186(0x28a)); if (_0x446bdc) _0x446bdc[_0x648186(0x52e)] = '❚❚'; } } }, 0x320); }, _0x2e2c9c = () => { clearTimeout(_0x41ced9); }; _0x591f4a[_0x1d0662(0x990)]('mousedown', _0x5972e5), _0x591f4a['addEventListener'](_0x1d0662(0x280), _0x2e2c9c), _0x591f4a['addEventListener']('mouseleave', _0x2e2c9c), _0x591f4a['addEventListener'](_0x1d0662(0x44d), _0x5972e5, { 'passive': ![] }), _0x591f4a[_0x1d0662(0x990)](_0x1d0662(0x517), _0x2e2c9c), _0x591f4a[_0x1d0662(0x990)]('touchcancel', _0x2e2c9c), _0x591f4a[_0x1d0662(0x990)]('click', _0x58c31e => { const _0x2f23ef = _0x1d0662; if (_0x41ced9) clearTimeout(_0x41ced9); if (_0x58c31e[_0x2f23ef(0xac1)]) return; setTimeout(() => { const _0x42dbf0 = _0x2f23ef; 'hBnYZ' !== 'hBnYZ' ? (_0x169d84(![]), _0x5bac8e[_0x42dbf0(0x552)] = '') : _0x41ced9 && _0x36618e(_0x351769['id'], _0x40d03e[_0x42dbf0(0x937)](_0x4425b2 => _0x4425b2['id'])); }, 0x32); }), _0x78df2[_0x1d0662(0x6b3)](_0x591f4a); } } } _0x1ac418[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x3735da = _0x3b2836; _0x33f536(_0x3735da(0x73c)); }), _0x283dde[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x254deb = _0x3b2836; _0x33f536(_0x254deb(0x302)); }); let _0x421e14 = [], _0x317c43 = -0x1; async function _0x36618e(_0x51305b, _0x44bd5e) { const _0x38425d = _0x3b2836; if ('RGxVr' !== _0x38425d(0x4f0)) _0xbb5a86(), _0x11a073('worldBook', _0x38425d(0x17e)); else { const _0x460222 = await _0x50081a(_0x51305b); if (!_0x460222) return; _0x2723ee = { 'title': _0x460222[_0x38425d(0x63a)][_0x38425d(0x9e4)] || _0x38425d(0x3ca), 'artist': _0x460222['info']['歌手'] || _0x38425d(0x997), 'cover': _0x460222['cover'] ? URL[_0x38425d(0x709)](_0x460222[_0x38425d(0xa4e)]) : _0x520817, 'isFromLibrary': !![] }; const _0x2b785e = URL[_0x38425d(0x709)](_0x460222[_0x38425d(0x27f)]); _0x5cf78c[_0x38425d(0x45f)] = _0x2b785e, _0x5cf78c[_0x38425d(0x350)](), _0xe00405(); } } async function _0xe00405() { const _0x579c16 = _0x3b2836; if ('OYFfp' === _0x579c16(0xa1d)) { const _0x5b72eb = document[_0x579c16(0x67e)](_0x579c16(0x8a0)), _0x499a78 = document['getElementById'](_0x579c16(0x9bd)), _0x5417d1 = document[_0x579c16(0x67e)]('widget-artist'), _0x4ab301 = document[_0x579c16(0x67e)]('widget-cover-art'), _0x13c010 = _0x2723ee; if (_0x13c010 && _0x13c010[_0x579c16(0x9c4)]) _0x499a78['textContent'] = _0x13c010['title'], _0x5417d1[_0x579c16(0x52e)] = _0x13c010[_0x579c16(0xa16)], _0x5b72eb[_0x579c16(0x32b)][_0x579c16(0x536)](_0x579c16(0x62e)), _0x5b72eb['style'][_0x579c16(0x522)](_0x579c16(0x533), _0x579c16(0x36b) + _0x13c010[_0x579c16(0xa4e)] + ')'); else { if ('eGbka' !== _0x579c16(0x27c)) { _0x4d2c64('请输入有效的转账金额！'); return; } else _0x499a78['textContent'] = _0x579c16(0x5df), _0x5417d1[_0x579c16(0x52e)] = _0x579c16(0x4c2), _0x5b72eb[_0x579c16(0x32b)][_0x579c16(0x318)](_0x579c16(0x62e)), _0x4ab301[_0x579c16(0x7df)][_0x579c16(0x522)]('--widget-cover-image', _0x579c16(0x527)); } } else _0x51cc82[_0x579c16(0x1c5)](_0x5e8d7[_0x579c16(0x944)](_0x200070, _0x5564f3 + _0x30965b)); } if (_0x1ac418) { if (_0x3b2836(0xa9c) !== _0x3b2836(0xa52)) _0x1ac418['addEventListener'](_0x3b2836(0x821), () => { const _0x230459 = _0x3b2836; if (_0x230459(0x54e) !== _0x230459(0x54e)) !_0x3795c3[_0x230459(0x32b)][_0x230459(0x776)](_0x230459(0xaea)) && _0x1d0c49[_0x230459(0x318)](); else { if (_0x421e14[_0x230459(0xb1e)] === 0x0) return; _0x317c43 = (_0x317c43 + 0x1) % _0x421e14[_0x230459(0xb1e)], _0x36618e(_0x421e14[_0x317c43], _0x421e14); } }); else return { 'type': _0x3b2836(0x89f), 'songName': _0x394520[0x1][_0x3b2836(0x3dd)](), 'artist': _0x459e45[0x2][_0x3b2836(0x3dd)]() }; } _0x283dde && ('kHzZk' === _0x3b2836(0x3a4) ? _0x283dde[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x5956f7 = _0x3b2836; if (_0x421e14[_0x5956f7(0xb1e)] === 0x0) return; _0x317c43 = (_0x317c43 - 0x1 + _0x421e14[_0x5956f7(0xb1e)]) % _0x421e14[_0x5956f7(0xb1e)], _0x36618e(_0x421e14[_0x317c43], _0x421e14); }) : (_0x275ed8[_0x3b2836(0x6c3)] = ![], _0x55c2be[_0x3b2836(0x52e)] = '获取')); _0x5cf78c['addEventListener'](_0x3b2836(0x350), () => { if (_0x3eeb1b) _0x3eeb1b['textContent'] = '❚❚'; }), _0x5cf78c[_0x3b2836(0x990)](_0x3b2836(0x75c), () => { if (_0x3eeb1b) _0x3eeb1b['textContent'] = '▶'; }), _0x5cf78c[_0x3b2836(0x990)]('ended', () => { const _0xa67afe = _0x3b2836; if (_0x1ac418) _0x1ac418[_0xa67afe(0x821)](); }); function _0x139a53() { const _0x2f9738 = _0x3b2836; if ('mniUl' !== 'nUuZQ') { const _0x3b254e = _0x3a6dc0(); if (!_0x3b254e) return; _0x345c69[_0x2f9738(0x282)] = '', _0x10a52b['value'] = ''; if (_0x3b254e[_0x2f9738(0xa1e)] === _0x2f9738(0x7d1)) _0x3b254e[_0x2f9738(0x69c)][_0x2f9738(0x5e2)](_0x1c3fcc => { const _0x3c69be = _0x2f9738; if (_0x3c69be(0x1ce) !== 'rCfPy') { const _0x42c943 = _0x382342(_0x1c3fcc); if (_0x42c943) { const _0x3349a8 = document['createElement'](_0x3c69be(0x16b)); _0x3349a8[_0x3c69be(0x552)] = _0x42c943['id'], _0x3349a8[_0x3c69be(0x52e)] = _0x42c943[_0x3c69be(0x589)], _0x345c69[_0x3c69be(0x6b3)](_0x3349a8); } } else { const _0x3e9a8d = _0x528cd8[_0x3c69be(0x494)]('p'); _0x3e9a8d[_0x3c69be(0x7df)][_0x3c69be(0xa28)] = _0x3c69be(0x1b4), _0x3e9a8d['textContent'] = _0x506225, _0x811eb3[_0x3c69be(0x6b3)](_0x3e9a8d); } }), _0x16e187[_0x2f9738(0x7df)][_0x2f9738(0x741)] = 'block'; else { if (_0x2f9738(0x2db) === _0x2f9738(0x99e)) for (const _0xf7590b of _0xc7fbe0[_0x2f9738(0x9cd)]) { let _0x537902 = _0x18f66a[_0x2f9738(0x9cd)][_0x2f9738(0x270)](_0x4e035a => _0x4e035a[_0x2f9738(0x589)] === _0xf7590b[_0x2f9738(0x589)]); if (_0x537902) _0x1bde5a[_0x2f9738(0x1c5)](_0x537902['id']); else { const _0xec5e5d = { 'id': _0x2f9738(0x87f) + _0x247004['now']() + '_' + _0x2fa7d6[_0x2f9738(0x757)](), 'name': _0xf7590b['name'], 'content': _0xf7590b[_0x2f9738(0x6fd)] }; _0xafeaae[_0x2f9738(0x9cd)][_0x2f9738(0x1c5)](_0xec5e5d), _0x160789['push'](_0xec5e5d['id']); } } else _0x16e187[_0x2f9738(0x7df)]['display'] = _0x2f9738(0x527); } _0x5c72ed[_0x2f9738(0x32b)]['add']('show'), _0x10a52b[_0x2f9738(0x855)](); } else _0x3b44cd = _0x1cbf3a; } function _0x58f875() { const _0x36a4f6 = _0x3b2836, _0x29ab99 = parseFloat(_0x10a52b[_0x36a4f6(0x552)]); if (isNaN(_0x29ab99) || _0x29ab99 <= 0x0) { _0x33f536('请输入有效的转账金额！'); return; } const _0xa35884 = _0x3a6dc0(); let _0x11ff8c = null; _0xa35884[_0x36a4f6(0xa1e)] === _0x36a4f6(0x7d1) ? _0x11ff8c = _0x345c69['value'] : _0x11ff8c = _0xa35884[_0x36a4f6(0x69c)][0x0]; const _0x518f33 = _0xb1d08(_0xa35884['id']), _0x501093 = { 'role': 'user', 'type': 'transfer', 'content': _0x36a4f6(0x9a4) + (_0x382342(_0x11ff8c)?.[_0x36a4f6(0x589)] || '未知') + '\x20转账\x20' + _0x29ab99 + ']', 'amount': _0x29ab99, 'recipientId': _0x11ff8c, 'senderId': _0x518f33['id'], 'timestamp': Date[_0x36a4f6(0x2c5)]() }; _0x57ec14[_0x36a4f6(0xa8a)][_0x36a4f6(0x1c5)](_0x501093), _0xc97ff3(), _0x1c7b21(), _0x5c72ed['classList'][_0x36a4f6(0x318)](_0x36a4f6(0x716)); } async function _0x5aba85(_0x1e2d95) { const _0x131a84 = _0x3b2836; if (_0x131a84(0x8ad) !== _0x131a84(0x94a)) { const _0x147857 = _0x382342(_0x1e2d95); if (!_0x147857) return; const _0x1aa39d = await _0x156ce5('确定要永久清空【' + _0x147857[_0x131a84(0x589)] + _0x131a84(0x884)); if (!_0x1aa39d) return; const _0x7af4a8 = _0x57ec14[_0x131a84(0x5aa)][_0x131a84(0x49c)](_0x1f0c63 => _0x1f0c63[_0x131a84(0x90d)] === _0x1e2d95); if (_0x7af4a8 > -0x1) { if (_0x131a84(0x7fe) === _0x131a84(0x4f9)) { const _0x4ad72e = _0x2f40b2[_0x131a84(0x842)][_0x131a84(0x7e7)][0x0]; if (!_0x4ad72e) return; try { const _0x5d4680 = _0x384990[_0x131a84(0x709)](_0x4ad72e); _0x7be006[_0x131a84(0x7df)][_0x131a84(0x6dd)] = _0x131a84(0xa5e) + _0x5d4680 + '\x27)'; } catch (_0x1111c0) { _0x461d6d(_0x131a84(0x879) + _0x1111c0['message']); } } else _0x57ec14[_0x131a84(0x5aa)][_0x131a84(0x920)](_0x7af4a8, 0x1), _0x203e68(), _0x2622ec(), _0x33f536('【' + _0x147857[_0x131a84(0x589)] + _0x131a84(0x838)); } else _0x33f536(_0x131a84(0x246)); } else _0x270dc7 = _0x131a84(0x65e), _0x177c8a = _0x131a84(0x3e5); } function _0x2ef595() { const _0x131273 = _0x3b2836; if ('ULNEA' === 'ULNEA') { const _0xfafbce = document[_0x131273(0x67e)](_0x131273(0x467)); _0xfafbce[_0x131273(0x282)] = ''; const _0x490f81 = _0x57ec14['characters'][_0x131273(0x1a0)](_0x56355b => _0x57ec14[_0x131273(0x313)]['some'](_0x37800d => _0x37800d[_0x131273(0xa1e)] === _0x131273(0x99c) && _0x37800d[_0x131273(0x69c)][_0x131273(0x9e5)](_0x56355b['id']))); if (_0x490f81[_0x131273(0xb1e)] === 0x0) { _0xfafbce['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } _0x490f81[_0x131273(0x5e2)](_0x580c5a => { const _0x9f99b = _0x131273, _0x8e09a3 = document[_0x9f99b(0x494)]('li'); _0x8e09a3['className'] = 'character-item', _0x8e09a3[_0x9f99b(0x988)][_0x9f99b(0x870)] = _0x580c5a['id'], _0x8e09a3[_0x9f99b(0x282)] = _0x9f99b(0x7ec) + (_0x580c5a[_0x9f99b(0x5b2)] || _0x520817) + _0x9f99b(0x10c) + _0x580c5a[_0x9f99b(0x589)] + _0x9f99b(0x263) + _0x580c5a[_0x9f99b(0x589)] + _0x9f99b(0x117), _0x8e09a3[_0x9f99b(0x433)](_0x9f99b(0xae6))[_0x9f99b(0x990)](_0x9f99b(0x821), () => _0x5aa067(_0x580c5a['id'])), _0x8e09a3['querySelector'](_0x9f99b(0x655))[_0x9f99b(0x990)](_0x9f99b(0x821), async _0x35e5e7 => { const _0x932518 = _0x9f99b; if (_0x932518(0x531) !== _0x932518(0x531)) { const _0x594de0 = _0x39a586[_0x932518(0x48e)][_0x932518(0x937)](_0x22cf6c => _0x3b6143[_0x932518(0x9cd)][_0x932518(0x270)](_0x182869 => _0x182869['id'] === _0x22cf6c))[_0x932518(0x1a0)](_0x519e2e)['map'](_0x59c213 => '\x0a\x0a##\x20世界书条目:\x20' + _0x59c213[_0x932518(0x589)] + '\x0a' + _0x59c213[_0x932518(0x6fd)])['join'](''); if (_0x594de0) _0x1270f4 = _0x932518(0x7f5) + _0x594de0; } else { _0x35e5e7[_0x932518(0x5f5)](); const _0x39a896 = _0x382342(_0x580c5a['id']); if (!_0x39a896) return; const _0x29b762 = await _0x156ce5(_0x932518(0x2cc) + _0x39a896['name'] + _0x932518(0x77e)); if (_0x29b762) { _0x58ea7f(!![], '正在焚烧【' + _0x39a896[_0x932518(0x589)] + _0x932518(0xadb)); const _0x46593e = [_0x932518(0x1a9), _0x932518(0x49e), _0x932518(0x40c), _0x932518(0x63e), _0x932518(0x383), 'wants', 'footprints', _0x932518(0x495)]; for (const _0x1143b4 of _0x46593e) { const _0xa0070d = _0x932518(0x648) + _0x39a896['id'] + '_' + _0x1143b4; await _0x362e99(_0xa0070d); } _0x58ea7f(![]), _0x33f536('【' + _0x39a896[_0x932518(0x589)] + '】的手机已被重置。'); } } }), _0xfafbce['appendChild'](_0x8e09a3); }); } else _0x4c2619[_0x131273(0x7df)][_0x131273(0x741)] = _0x131273(0x38c); } let _0x24fb7c = null, _0x42e8a8 = null; function _0x2b68f8() { const _0x578086 = _0x3b2836, _0x3778de = new Date(), _0xbcf7de = document[_0x578086(0x67e)]('snoop-home-time'), _0x126f84 = document['getElementById'](_0x578086(0x8de)), _0x163baa = document[_0x578086(0x67e)](_0x578086(0x455)); _0xbcf7de && _0x126f84 && (_0x578086(0x590) !== 'oZIwx' ? (_0xbcf7de[_0x578086(0x52e)] = _0x3778de['toLocaleTimeString'](_0x578086(0x7bf), { 'hour': _0x578086(0x6d3), 'minute': _0x578086(0x6d3), 'hour12': ![] }), _0x126f84['textContent'] = _0x3778de[_0x578086(0xafb)](_0x578086(0x7bf), { 'month': _0x578086(0x848), 'day': _0x578086(0x1f3), 'weekday': _0x578086(0x848) })) : (_0x16a77f[_0x578086(0xa73)] = ![], _0x53e6e5(![]))), _0x163baa && ('dtvQn' === _0x578086(0x9ec) ? _0x163baa['innerHTML'] = _0x578086(0x8d3) + _0x3778de['toLocaleTimeString'](_0x578086(0x7bf), { 'hour': _0x578086(0x6d3), 'minute': '2-digit', 'hour12': ![] }) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' : (_0xd39cf['style'][_0x578086(0x741)] = _0x578086(0x527), _0x3963d1[_0x578086(0x7df)][_0x578086(0x9d5)] = '2px\x20dashed\x20var(--border-color)', _0x5bd463['style']['background'] = _0x578086(0x5bd))); } function _0x5aa067(_0x1c0c74) { const _0x6962c7 = _0x3b2836; _0x24fb7c = _0x1c0c74; const _0xa0a6ef = _0x382342(_0x1c0c74); if (!_0xa0a6ef) return; const _0x2479e9 = document[_0x6962c7(0x67e)](_0x6962c7(0x7ea)), _0x2b9b74 = document['getElementById'](_0x6962c7(0x4cd)); if (_0x2b9b74) _0x2b9b74[_0x6962c7(0x318)](); const _0x2dfa40 = document['getElementById']('snoop-dock'); if (_0x2dfa40) _0x2dfa40[_0x6962c7(0x318)](); _0x2479e9['insertAdjacentHTML']('beforeend', _0x6962c7(0xab5)), _0x2479e9['insertAdjacentHTML'](_0x6962c7(0x25c), _0x6962c7(0x2de)), document[_0x6962c7(0x67e)]('snoop-char-name-header')[_0x6962c7(0x52e)] = '', _0x59dfad(); if (_0x42e8a8) clearInterval(_0x42e8a8); _0x2b68f8(), _0x42e8a8 = setInterval(_0x2b68f8, 0x2710), _0x52c85d(_0x6962c7(0x17c), _0x6962c7(0x409)); } function _0x59dfad() { const _0x38c429 = _0x3b2836, _0x43bc57 = document[_0x38c429(0x67e)](_0x38c429(0x836)), _0x3d8559 = document[_0x38c429(0x67e)](_0x38c429(0x6e0)); _0x43bc57['innerHTML'] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x3d8559[_0x38c429(0x282)] = ''; const _0x51400d = _0x43bc57[_0x38c429(0x433)]('.snoop-main-grid'), _0x51ecd1 = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x38c429(0xad6), 'area': _0x38c429(0x734) }, { 'id': _0x38c429(0x40c), 'name': _0x38c429(0x537), 'svg': _0x38c429(0x195), 'area': _0x38c429(0x734) }, { 'id': _0x38c429(0x1a9), 'name': '相册', 'svg': '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'area': _0x38c429(0x734) }, { 'id': _0x38c429(0x495), 'name': '总结', 'svg': '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'area': _0x38c429(0x734) }, { 'id': _0x38c429(0x63e), 'name': '备忘录', 'svg': _0x38c429(0x2d2), 'area': 'main' }, { 'id': 'bites', 'name': '外卖', 'svg': _0x38c429(0x76f), 'area': _0x38c429(0x101) }, { 'id': _0x38c429(0x885), 'name': '购物', 'svg': _0x38c429(0x40d), 'area': _0x38c429(0x101) }, { 'id': _0x38c429(0x14e), 'name': '足迹', 'svg': _0x38c429(0x577), 'area': _0x38c429(0x101) }]; _0x51ecd1['forEach'](_0x3d15d6 => { const _0x4ef7a9 = _0x38c429; if (_0x4ef7a9(0x224) !== _0x4ef7a9(0x819)) { const _0x41031a = document[_0x4ef7a9(0x494)](_0x4ef7a9(0x962)); _0x41031a['className'] = _0x4ef7a9(0x914), _0x41031a[_0x4ef7a9(0x282)] = _0x4ef7a9(0x222) + _0x3d15d6[_0x4ef7a9(0x934)] + _0x4ef7a9(0x6d0) + _0x3d15d6['name'] + _0x4ef7a9(0x8e4), _0x41031a[_0x4ef7a9(0x990)](_0x4ef7a9(0x821), () => _0x5036a4(_0x3d15d6['id'], _0x3d15d6[_0x4ef7a9(0x589)])); if (_0x3d15d6[_0x4ef7a9(0x905)] === _0x4ef7a9(0x734)) { if ('XcRwc' !== _0x4ef7a9(0x9fd)) _0x3d8559[_0x4ef7a9(0x6b3)](_0x41031a); else try { _0x51d779[_0x4e4959] = _0x543104[_0x4ef7a9(0x258)](_0x4b88c8); } catch (_0x293593) { } } else _0x51400d[_0x4ef7a9(0x6b3)](_0x41031a); } else _0x34f9da[_0x4ef7a9(0x1bf)][_0x4ef7a9(0x920)](_0xec52a7, 0x1), _0x4a4d64(), _0x4186f4(), _0x8ee2a5(), _0x25f670(), _0x24f25c(_0x4ef7a9(0x9fa)); }); } document[_0x3b2836(0x67e)](_0x3b2836(0x869))['addEventListener']('click', () => { const _0x1617bb = _0x3b2836; _0x42e8a8 && (clearInterval(_0x42e8a8), _0x42e8a8 = null); document[_0x1617bb(0x67e)](_0x1617bb(0x61f))[_0x1617bb(0x7df)]['display'] = 'none'; const _0x5bb2b9 = document[_0x1617bb(0x67e)](_0x1617bb(0x6e0)); if (_0x5bb2b9) _0x5bb2b9[_0x1617bb(0x318)](); const _0xa3da29 = document[_0x1617bb(0x67e)](_0x1617bb(0x4cd)); if (_0xa3da29) _0xa3da29[_0x1617bb(0x318)](); _0x52c85d('snoopList', _0x1617bb(0x17c)); }); async function _0x5036a4(_0x572eb4, _0x24668a, _0x4cc6d7 = ![]) { const _0x11434f = _0x3b2836; document[_0x11434f(0x67e)](_0x11434f(0x8a2))[_0x11434f(0x7df)][_0x11434f(0x741)] = 'none'; const _0x4c39a6 = document[_0x11434f(0x67e)](_0x11434f(0x61f)); _0x4c39a6[_0x11434f(0x282)] = _0x11434f(0x10d), _0x4c39a6[_0x11434f(0x7df)]['display'] = _0x11434f(0x38c); const _0x2bd3b0 = _0x11434f(0x648) + _0x24fb7c + '_' + _0x572eb4; try { if (_0x572eb4 === 'summary') { const _0xe2fd75 = await _0x37a6f7(_0x24fb7c); _0x19b256(_0x572eb4, _0x24668a, _0xe2fd75); return; } let _0x1db071 = await _0x237033(_0x2bd3b0); if (_0x4cc6d7 || !_0x1db071) { console[_0x11434f(0x4cf)](_0x11434f(0x4ff) + _0x2bd3b0 + _0x11434f(0xa65)); let _0x4565fe = await _0x543815(_0x572eb4, _0x24fb7c, _0x1db071); if (_0x4565fe) { const _0x3218a2 = _0x4565fe[_0x11434f(0xa9e)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x3788f5 = _0x3218a2 ? _0x3218a2[0x1][_0x11434f(0x3dd)]() : _0x4565fe[_0x11434f(0x3dd)](); let _0x3f80a0; try { if (_0x11434f(0xaa2) !== _0x11434f(0x832)) _0x3f80a0 = JSON[_0x11434f(0x258)](_0x3788f5); else { _0x4fd9a3[_0x11434f(0x552)] = '', _0x3ede0d[_0x11434f(0x552)] = ''; if (_0x161eee) _0x562339['style'][_0x11434f(0x6dd)] = ''; } } catch (_0x6eb06c) { if (_0x11434f(0x652) === _0x11434f(0x3ec)) _0x3a8bd2['posts'] = [], _0x4998c0(), _0x141ff7(), _0x401a8e('动态已清空。'); else { _0x3f80a0 = _0x125828(_0x3788f5); if (!_0x3f80a0) throw new Error(_0x11434f(0x9e8)); } } let _0x3788dc; if (_0x4cc6d7 && _0x1db071) try { const _0x399fa7 = JSON['parse'](_0x1db071); if (_0x572eb4 === 'whispers') _0x3788dc = JSON[_0x11434f(0x7d5)](_0x3f80a0), console['log']('Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。'); else { if (_0x11434f(0x212) !== _0x11434f(0x730)) { if (Array[_0x11434f(0x241)](_0x399fa7) && Array['isArray'](_0x3f80a0)) { if (_0x11434f(0x793) === _0x11434f(0x793)) { const _0x7516d7 = _0x399fa7[_0x11434f(0x8e9)](_0x3f80a0); _0x3788dc = JSON['stringify'](_0x7516d7), console[_0x11434f(0x4cf)](_0x11434f(0x20e)); } else return { 'url': _0x5ae72c, 'cover': _0x15d11f[_0x11434f(0xa4e)], 'source': _0x4ca385 }; } else _0x3788dc = JSON[_0x11434f(0x7d5)](_0x3f80a0); } else { const _0x12cff5 = _0x13ac1d['querySelector'](_0x11434f(0x31b)); if (_0x12cff5 && (_0x12cff5['id'] === 'meeting-view-screen' || _0x12cff5['id'] === _0x11434f(0x80a))) _0x570f55(); else { const _0x334a64 = _0x145f8e[_0x11434f(0x74c)](_0x11434f(0x752)); _0x334a64[_0x11434f(0x5e2)](_0x130dd7 => _0x130dd7[_0x11434f(0x318)]()); } } } } catch (_0x57ba20) { _0x11434f(0x927) === 'yGxno' ? _0x33da5b[_0x11434f(0x45f)] = _0x2593c7 ? _0x300772[_0x11434f(0x709)](_0x430c3f) : _0xbfecea : _0x3788dc = JSON['stringify'](_0x3f80a0); } else _0x3788dc = JSON[_0x11434f(0x7d5)](_0x3f80a0); await _0x4fefaf(_0x2bd3b0, _0x3788dc), _0x1db071 = _0x3788dc; } } else _0x11434f(0x8f3) === _0x11434f(0x7d6) ? (_0x10c4c7[_0x11434f(0x6fd)] = _0x4ff5e4, _0x2dbd0d(), _0x34fbe8()) : console[_0x11434f(0x4cf)]('缓存命中:\x20' + _0x2bd3b0); _0x19b256(_0x572eb4, _0x24668a, _0x1db071); } catch (_0x2e1709) { console['error'](_0x11434f(0x72f) + _0x24668a + _0x11434f(0x133), _0x2e1709), _0x4c39a6[_0x11434f(0x282)] = _0x11434f(0x916) + _0x2e1709['message'] + '</p>'; } } function _0x19b256(_0x5276eb, _0x403924, _0x1ab287) { const _0x5d3197 = _0x3b2836; if ('XWwdP' === _0x5d3197(0x12b)) { const _0xc125d4 = _0x382342(_0x24fb7c), _0x2393a0 = document[_0x5d3197(0x67e)]('snoop-app-view-container'); let _0x53e6bc = ''; if (!_0x1ab287) { if (_0x5d3197(0x4a0) === _0x5d3197(0x4a0)) _0x53e6bc = _0x5d3197(0x816); else { if (_0x469741[_0x5d3197(0xb1e)] === 0x0) return; _0x1ea688 = (_0x51b220 - 0x1 + _0x43f937[_0x5d3197(0xb1e)]) % _0x1c0479[_0x5d3197(0xb1e)], _0x30a109(_0x5a94dd[_0x19f77d], _0x2ea1c1); } } else { if (_0x5276eb === 'summary') { if (_0x5d3197(0xafa) === _0x5d3197(0xafa)) _0x53e6bc = _0x5d3197(0x534) + _0x1ab287 + _0x5d3197(0x755); else { _0x1e18d9['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>'; return; } } else try { if (_0x5d3197(0x52d) === _0x5d3197(0x52d)) { let _0x33bdf6 = null; const _0x56886f = _0x1ab287[_0x5d3197(0xa9e)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x29d652 = _0x56886f ? _0x56886f[0x1] : _0x1ab287; _0x33bdf6 = JSON[_0x5d3197(0x258)](_0x29d652); const _0x1981a0 = _0x382342(_0x24fb7c); switch (_0x5276eb) { case _0x5d3197(0x1a9): _0x53e6bc = _0x49698b(_0x33bdf6); break; case 'whispers': _0x53e6bc = _0x4b222e(_0x33bdf6, _0x1981a0[_0x5d3197(0x589)]); break; case _0x5d3197(0x40c): _0x53e6bc = _0x51c3db(_0x33bdf6); break; case _0x5d3197(0x63e): _0x53e6bc = _0x39ff04(_0x33bdf6); break; case 'bites': _0x53e6bc = _0x2e06e1(_0x33bdf6); break; case 'wants': _0x53e6bc = _0x5897dd(_0x33bdf6); break; case _0x5d3197(0x14e): _0x53e6bc = _0x51e2ab(_0x33bdf6); break; case _0x5d3197(0x495): _0x53e6bc = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x1ab287 + '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; break; default: _0x53e6bc = _0x5d3197(0x8a6) + JSON['stringify'](_0x33bdf6, null, 0x2) + _0x5d3197(0xa4d); } } else { const _0x287b64 = _0x83242a[_0x5d3197(0x862)][_0x5d3197(0x270)](_0x4dc3cc => _0x2cb156[_0x5d3197(0x69c)]['includes'](_0x4dc3cc['id']) && _0x4dc3cc[_0x5d3197(0x589)] === _0x168a3b); if (_0x287b64) _0x1bb09a = _0x287b64['id']; } } catch (_0x527436) { console[_0x5d3197(0x390)](_0x5d3197(0x20f), _0x527436), _0x53e6bc = _0x5d3197(0x89b) + _0x1ab287 + _0x5d3197(0xa4d); } } _0x2393a0['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>' + _0x403924 + _0x5d3197(0x7bd) + _0xc125d4[_0x5d3197(0x589)] + '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x5276eb === _0x5d3197(0x495) ? _0x5d3197(0x565) : _0x5d3197(0xaf2)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x53e6bc + _0x5d3197(0x773); const _0x44568a = _0x2393a0[_0x5d3197(0x433)]('.snoop-app-content'); _0x5276eb === 'summary' && (_0x44568a[_0x5d3197(0x7df)][_0x5d3197(0xaf3)] = '0'); document[_0x5d3197(0x67e)]('snoop-app-back-btn')[_0x5d3197(0x990)](_0x5d3197(0x821), () => { const _0x185a5b = _0x5d3197; _0x185a5b(0xa03) !== _0x185a5b(0xa03) ? _0x320ea7(_0x23ebe0['id']) : (_0x2393a0[_0x185a5b(0x7df)][_0x185a5b(0x741)] = _0x185a5b(0x527), document[_0x185a5b(0x67e)](_0x185a5b(0x8a2))[_0x185a5b(0x7df)][_0x185a5b(0x741)] = _0x185a5b(0x38c)); }); if (_0x5276eb === 'summary') { if ('iKGJN' !== 'iKGJN') { const _0x26c27e = _0x579103['concat'](_0x1648b2); _0x220851 = _0x43596f[_0x5d3197(0x7d5)](_0x26c27e), _0x2fca30[_0x5d3197(0x4cf)](_0x5d3197(0x20e)); } else document[_0x5d3197(0x67e)]('snoop-copy-summary-btn')[_0x5d3197(0x990)]('click', () => { const _0xedf858 = _0x5d3197; if (_0xedf858(0x76c) !== _0xedf858(0x2e3)) { const _0x558da3 = document[_0xedf858(0x67e)]('snoop-summary-textarea'); _0x558da3['select'](), document[_0xedf858(0x336)]('copy'), _0x33f536(_0xedf858(0x2a2)); } else _0x1c34dd[_0xedf858(0x699)] && _0x7f0129[_0xedf858(0x699)][_0xedf858(0x3ef)] && (_0x40ba5f[_0xedf858(0x7df)][_0xedf858(0x741)] = 'flex', _0x105590(() => _0x179499[_0xedf858(0x32b)][_0xedf858(0x536)](_0xedf858(0x716)), 0xa)); }); } else { if (_0x5d3197(0x189) !== 'evnlX') try { _0x4f2246[_0xe7ea92] = _0x4f4122[_0x5d3197(0x258)](_0x42c56a); } catch (_0x2268a2) { } else document['getElementById'](_0x5d3197(0xa5d))[_0x5d3197(0x990)](_0x5d3197(0x821), async () => { _0x5036a4(_0x5276eb, _0x403924, !![]); }); } _0x5276eb === _0x5d3197(0x49e) && _0x2393a0['querySelectorAll'](_0x5d3197(0x5d2))[_0x5d3197(0x5e2)](_0x375923 => { const _0x37ac8d = _0x5d3197; _0x375923[_0x37ac8d(0x990)](_0x37ac8d(0x821), () => { const _0x129c2e = _0x37ac8d, _0x15ea74 = JSON[_0x129c2e(0x258)](_0x375923['dataset']['log'][_0x129c2e(0x254)](/&quot;/g, '\x22')), _0x36b0b1 = _0x375923[_0x129c2e(0x988)]['contactName'], _0x818009 = _0x375923[_0x129c2e(0x988)]['characterName']; _0xc38b60(_0x36b0b1, _0x818009, _0x15ea74); }); }); } else _0x35e71f[_0x5d3197(0x1c5)](_0x5b42d3); } function _0x125828(_0x1a8f5e) { const _0x35a6f9 = _0x3b2836; if (!_0x1a8f5e || typeof _0x1a8f5e !== _0x35a6f9(0x5b8)) return null; const _0x220617 = _0x1a8f5e[_0x35a6f9(0x3dd)]()['split']('\x0a'), _0x22ed36 = []; let _0x672c73 = null; for (const _0x189031 of _0x220617) { if (_0x35a6f9(0x84b) === _0x35a6f9(0x25e)) { const _0x217621 = _0x9aaa00(_0x56a731[_0x35a6f9(0x601)]); _0x217621 && (_0x217621[_0x35a6f9(0x96b)] = _0x316110, _0x543872(_0x17c626[_0x35a6f9(0x601)], _0x35a6f9(0x3d7))); } else { const _0x50d9d7 = _0x189031[_0x35a6f9(0x3dd)](); if (_0x50d9d7[_0x35a6f9(0x2bd)]('-\x20')) { _0x672c73 && _0x22ed36[_0x35a6f9(0x1c5)](_0x672c73); _0x672c73 = {}; const _0x1ba646 = _0x50d9d7[_0x35a6f9(0x5ae)](0x2), _0x41d1fa = _0x1ba646[_0x35a6f9(0x52b)](/:\s(.+)/); if (_0x41d1fa[_0x35a6f9(0xb1e)] > 0x1) { if (_0x35a6f9(0x785) === _0x35a6f9(0x641)) { const _0x1f7a15 = _0x457803[_0x35a6f9(0xa13)]((_0x31021d - _0x47257e) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x513d97 += '-\x20**状态提示**:\x20你已经有\x20' + _0x1f7a15 + '\x20天没活动了。你生成的内容必须是全新的事件。\x0a'; } else { const _0x11aa53 = _0x41d1fa[0x0]['trim'](), _0x378462 = _0x41d1fa[0x1][_0x35a6f9(0x3dd)]()[_0x35a6f9(0x254)](/^"|"$/g, ''); _0x672c73[_0x11aa53] = _0x378462; } } } else { if (_0x672c73 && _0x50d9d7) { const _0x4846d8 = _0x50d9d7[_0x35a6f9(0x52b)](/:\s(.+)/); if (_0x4846d8[_0x35a6f9(0xb1e)] > 0x1) { const _0x217c5b = _0x4846d8[0x0][_0x35a6f9(0x3dd)](), _0x57bae3 = _0x4846d8[0x1][_0x35a6f9(0x3dd)]()[_0x35a6f9(0x254)](/^"|"$/g, ''); _0x672c73[_0x217c5b] = _0x57bae3; } } } } } return _0x672c73 && _0x22ed36[_0x35a6f9(0x1c5)](_0x672c73), _0x22ed36[_0x35a6f9(0xb1e)] > 0x0 ? _0x22ed36 : null; } function _0xc38b60(_0x83eb3a, _0x3f585c, _0x5cfc5b) { const _0x2f1b68 = _0x3b2836, _0x457df4 = document[_0x2f1b68(0x433)](_0x2f1b68(0x5b6)), _0x29dd7b = document[_0x2f1b68(0x433)]('#snoop-app-view-container\x20.snoop-app-header'); let _0x4f69c2 = _0x2f1b68(0x215); !_0x5cfc5b || _0x5cfc5b['length'] === 0x0 ? _0x4f69c2 += _0x2f1b68(0x2c1) : _0x5cfc5b['forEach'](_0x3d444c => { const _0x422c34 = _0x2f1b68, _0x3e648e = _0x3d444c[_0x422c34(0x410)] === 'character', _0x293640 = _0x3e648e ? _0x3f585c ? _0x3f585c[0x0] : '?' : _0x83eb3a ? _0x83eb3a[0x0] : '?'; _0x4f69c2 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x3e648e ? _0x422c34(0x2b3) : 'ai') + _0x422c34(0x2d6) + (!_0x3e648e ? _0x422c34(0x125) + _0x293640 + _0x422c34(0x85b) : '') + _0x422c34(0x93e) + (_0x3e648e ? _0x422c34(0x2b3) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x3d444c[_0x422c34(0x6fd)] + _0x422c34(0x86a) + (_0x3e648e ? '<div\x20class=\x22snoop-avatar\x22>' + _0x293640 + _0x422c34(0x85b) : '') + _0x422c34(0x71f); }), _0x4f69c2 += _0x2f1b68(0x85b), _0x457df4[_0x2f1b68(0x282)] = _0x4f69c2, _0x457df4[_0x2f1b68(0x535)] = _0x457df4[_0x2f1b68(0x6ac)], _0x29dd7b[_0x2f1b68(0x282)] = _0x2f1b68(0x7db) + _0x83eb3a + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document['getElementById'](_0x2f1b68(0x557))[_0x2f1b68(0x990)]('click', () => { const _0x4ad412 = _0x2f1b68; _0x5036a4(_0x4ad412(0x49e), '聊天'); }), !document[_0x2f1b68(0x67e)](_0x2f1b68(0x24a)) && document[_0x2f1b68(0x6d4)][_0x2f1b68(0x882)]('beforeend', _0x2f1b68(0x1ae)); } function _0x125828(_0x19b9a7) { const _0x2d1e72 = _0x3b2836; if (!_0x19b9a7 || typeof _0x19b9a7 !== _0x2d1e72(0x5b8)) return null; const _0x10b309 = _0x19b9a7[_0x2d1e72(0x3dd)]()[_0x2d1e72(0x52b)]('\x0a'), _0x4bd5c9 = []; let _0x1e9ea9 = null; for (const _0x264640 of _0x10b309) { if ('UyRLg' !== 'UyRLg') { const _0x1a0d21 = _0xe011b6[_0x2d1e72(0x313)][_0x2d1e72(0x270)](_0x207bf6 => _0x207bf6['id'] === _0x499248), _0x4e9d50 = _0x1a0d21?.[_0x2d1e72(0x347)]; let _0x3d6f46 = _0x5a9d55[_0x2d1e72(0x391)]['find'](_0x30b2be => _0x30b2be['id'] === _0x4e9d50); return !_0x3d6f46 && (_0x3d6f46 = _0x86d3eb[_0x2d1e72(0x391)]['find'](_0xb95d6a => _0xb95d6a['id'] === _0x4b05e5[_0x2d1e72(0x422)]) || _0x5788fa[_0x2d1e72(0x391)][0x0]), _0x3d6f46 || { 'name': '用户', 'avatar': _0x43bfa6, 'persona': '' }; } else { const _0x2cf8ce = _0x264640[_0x2d1e72(0x3dd)](); if (_0x2cf8ce['startsWith']('-\x20')) { if (_0x2d1e72(0x8eb) !== _0x2d1e72(0x64e)) { if (_0x1e9ea9) { if (_0x2d1e72(0x87e) === 'CArBC') { const _0x143c0d = _0x56e2a8(_0x2a91f9['content']); _0x142a2a[_0x2d1e72(0xa36)](_0x476838, { 'content': _0x143c0d['content'], 'quotedMessage': _0x143c0d['quotedMessage'] }); } else _0x4bd5c9[_0x2d1e72(0x1c5)](_0x1e9ea9); } _0x1e9ea9 = {}; const _0x2eeeda = _0x2cf8ce[_0x2d1e72(0x5ae)](0x2), _0x3a0f76 = _0x2eeeda['split'](/:\s(.+)/); if (_0x3a0f76[_0x2d1e72(0xb1e)] > 0x1) { const _0x261d6f = _0x3a0f76[0x0][_0x2d1e72(0x3dd)](), _0x57893c = _0x3a0f76[0x1]['trim']()[_0x2d1e72(0x254)](/^"|"$/g, ''); _0x1e9ea9[_0x261d6f] = _0x57893c; } } else _0x3d8246 += _0x2d1e72(0x2c1); } else { if (_0x1e9ea9 && _0x2cf8ce) { if (_0x2d1e72(0x83a) !== 'WuYTq') { const _0x110abb = _0x2cf8ce[_0x2d1e72(0x52b)](/:\s(.+)/); if (_0x110abb[_0x2d1e72(0xb1e)] > 0x1) { const _0x51305f = _0x110abb[0x0][_0x2d1e72(0x3dd)](), _0x5fe5a0 = _0x110abb[0x1]['trim']()[_0x2d1e72(0x254)](/^"|"$/g, ''); _0x1e9ea9[_0x51305f] = _0x5fe5a0; } } else _0xb139a6[_0x2d1e72(0x347)] = _0x2ee750; } } } } return _0x1e9ea9 && (_0x2d1e72(0xada) === _0x2d1e72(0xada) ? _0x4bd5c9[_0x2d1e72(0x1c5)](_0x1e9ea9) : (_0x1f1500[_0x2d1e72(0x34d)] = _0x792276[_0x2d1e72(0x34d)] || [], _0x366343[_0x2d1e72(0x999)] = (_0x63f06f[_0x2d1e72(0x999)] || [])[_0x2d1e72(0x937)]((_0x433daa, _0x251cb6) => ({ ..._0x433daa, 'commentId': 'c_' + _0x3692bd['timestamp'] + '_' + _0x251cb6 })), _0x2490c1(), _0x119c23())), _0x4bd5c9[_0x2d1e72(0xb1e)] > 0x0 ? _0x4bd5c9 : null; } async function _0x4b5bb4(_0x2ca7b3) { const _0x237d86 = _0x3b2836; if (!_0x2ca7b3) return ''; const _0x34d97a = [{ 'id': _0x237d86(0x1a9), 'name': '相册' }, { 'id': 'whispers', 'name': _0x237d86(0x28f) }, { 'id': _0x237d86(0x40c), 'name': '浏览器历史' }, { 'id': _0x237d86(0x63e), 'name': _0x237d86(0x9b7) }, { 'id': 'bites', 'name': _0x237d86(0x19e) }, { 'id': _0x237d86(0x885), 'name': _0x237d86(0x794) }, { 'id': _0x237d86(0x14e), 'name': _0x237d86(0xa8c) }]; let _0x82c19b = ''; for (const _0x4caa82 of _0x34d97a) { try { const _0x1f467c = _0x237d86(0x648) + _0x2ca7b3 + '_' + _0x4caa82['id'], _0x5f4225 = await _0x237033(_0x1f467c); if (_0x5f4225) { const _0x2fdb52 = _0x5f4225['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x15fbd6 = _0x2fdb52 ? _0x2fdb52[0x1][_0x237d86(0x3dd)]() : _0x5f4225['trim'](); if (!_0x15fbd6) continue; let _0x57767f = null; try { if ('CfzCE' !== _0x237d86(0x59f)) _0x57767f = JSON[_0x237d86(0x258)](_0x15fbd6); else { const _0x129328 = _0x351839[_0x237d86(0x552)]; _0x105d4f['documentElement']['style'][_0x237d86(0x522)](_0x237d86(0x73d), _0x129328 + '%'), _0x1231fb['setItem'](_0x237d86(0x143), _0x129328), _0x4fdcd1(); } } catch (_0x3069b9) { if (_0x237d86(0xaa1) === _0x237d86(0xaa1)) { console[_0x237d86(0xabb)]('JSON解析失败\x20(' + _0x4caa82['id'] + _0x237d86(0x8c5), _0x3069b9[_0x237d86(0x332)]); try { if (_0x237d86(0x493) !== _0x237d86(0x493)) _0x25846e['isAnimatingDiary'] = ![]; else { _0x57767f = _0x125828(_0x15fbd6); if (!_0x57767f) { if ('gweHf' !== _0x237d86(0xaf0)) throw new Error(_0x237d86(0x7b0)); else _0xda8cf4[_0x237d86(0x390)]('Failed\x20to\x20save\x20state\x20to\x20localStorage:', _0x127b00), _0x3ad88e(_0x237d86(0x7d3)); } console[_0x237d86(0x4cf)](_0x237d86(0x3ed) + _0x4caa82['id'] + _0x237d86(0x416)); } } catch (_0x340d01) { if ('HbeUK' !== _0x237d86(0xa45)) throw _0x3069b9; else { const _0x2e4a0e = _0x238309[_0x237d86(0x494)](_0x237d86(0x962)); _0x2e4a0e['className'] = _0x237d86(0x8fe), _0x2e4a0e['dataset']['id'] = _0x408ee6['id'], _0x2e4a0e[_0x237d86(0x282)] = _0x237d86(0x492) + _0x5bf2c9['name'] + _0x237d86(0x65f) + _0x47d194[_0x237d86(0x6fd)][_0x237d86(0x5ae)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20', _0x2e4a0e[_0x237d86(0x990)]('click', () => _0x21faa5(_0x50442f['id'])), _0x11c9fe[_0x237d86(0x6b3)](_0x2e4a0e); } } } else _0x458583 && _0x251484(_0x4c85f8); } if (Array['isArray'](_0x57767f) && _0x57767f[_0x237d86(0xb1e)] > 0x0) { if (_0x237d86(0x3c7) !== _0x237d86(0x3c7)) _0x554035[_0x237d86(0x821)](); else { _0x82c19b === '' && (_0x82c19b += '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a'); _0x82c19b += _0x237d86(0x5a3) + _0x4caa82[_0x237d86(0x589)] + '\x0a'; switch (_0x4caa82['id']) { case 'gallery': _0x57767f[_0x237d86(0x5e2)](_0x2980c7 => { const _0x6a3e0e = _0x237d86; _0x82c19b += _0x6a3e0e(0x1ee) + _0x2980c7['description'] + _0x6a3e0e(0x367); }); break; case _0x237d86(0x49e): _0x57767f['forEach'](_0x3a0167 => { const _0x53e890 = _0x237d86; if (_0x53e890(0x583) === _0x53e890(0x583)) { _0x82c19b += '-\x20你记得曾和“' + _0x3a0167[_0x53e890(0x42c)] + _0x53e890(0xa60) + _0x3a0167[_0x53e890(0x12f)] + _0x53e890(0x367); if (_0x3a0167['log'] && Array[_0x53e890(0x241)](_0x3a0167['log'])) { if ('otYVM' === _0x53e890(0xa2b)) _0x82c19b += _0x53e890(0x946), _0x3a0167[_0x53e890(0x4cf)]['forEach'](_0x310370 => { const _0x3f0ff2 = _0x53e890, _0x2b4f5d = _0x310370['sender'] === _0x3f0ff2(0x9bc) ? '你' : _0x3a0167['contact_name']; _0x82c19b += '\x20\x20\x20\x20-\x20' + _0x2b4f5d + ':\x20' + _0x310370['content'] + '\x0a'; }); else { if (!_0x3b6655[_0x53e890(0xade)] || _0x3469e0[_0x53e890(0xade)]['length'] === 0x0) { _0x212fdf[_0x53e890(0x390)](_0x53e890(0x81c)); return; } const _0xcc8d55 = _0x4ba017[_0x53e890(0xade)][0x0]; if (_0xcc8d55[_0x53e890(0x434)][_0x53e890(0xb1e)] < 0x2) { _0x449393[_0x53e890(0x390)](_0x53e890(0x209) + _0xcc8d55[_0x53e890(0x589)] + _0x53e890(0x9c0)); return; } const _0x2d1cdc = { 'id': _0x53e890(0x4f6) + _0x111d74[_0x53e890(0x2c5)](), 'authorType': _0x53e890(0x9bc), 'authorId': _0xcc8d55[_0x53e890(0x434)][0x0], 'content': _0x53e890(0x644), 'timestamp': _0x482617[_0x53e890(0x2c5)](), 'likes': [_0xcc8d55[_0x53e890(0x434)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x377319[_0x53e890(0x2c5)](), 'authorId': _0xcc8d55[_0x53e890(0x434)][0x1], 'content': _0x53e890(0x732) }] }; _0xcc8d55[_0x53e890(0x216)]['push'](_0x2d1cdc), _0x427cc7(), _0x5d2e3f[_0x53e890(0x4cf)](_0x53e890(0x3b6) + _0xcc8d55[_0x53e890(0x589)] + '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'), _0x3b89c9(_0x53e890(0x913)); } } } else _0x411f7c(), _0x3d4603[_0x53e890(0xa8a)] = [], _0xaf8f0a(); }); break; case _0x237d86(0x40c): _0x57767f[_0x237d86(0x5e2)](_0x541e58 => { const _0x17e4e4 = _0x237d86; _0x82c19b += _0x17e4e4(0x46b) + _0x541e58[_0x17e4e4(0x482)] + _0x17e4e4(0x367); }); break; case 'fragments': _0x57767f[_0x237d86(0x5e2)](_0x41db14 => { const _0x5644b5 = _0x237d86; _0x82c19b += '-\x20你的备忘录里有一条叫“' + _0x41db14[_0x5644b5(0x808)] + _0x5644b5(0x85d) + _0x41db14[_0x5644b5(0x6fd)][_0x5644b5(0x254)](/\n/g, '\x20') + _0x5644b5(0x367); }); break; case _0x237d86(0x383): _0x57767f['forEach'](_0x6d648b => { const _0x4b46a1 = _0x237d86; _0x82c19b += _0x4b46a1(0x150) + _0x6d648b[_0x4b46a1(0x891)] + '”，里面有\x20' + _0x6d648b[_0x4b46a1(0xb17)]['join']('、') + '。\x0a'; }); break; case _0x237d86(0x885): _0x57767f[_0x237d86(0x5e2)](_0x16b07e => { const _0xf7ee77 = _0x237d86; _0x82c19b += _0xf7ee77(0x16e) + _0x16b07e[_0xf7ee77(0x6f5)] + '”买过：“' + _0x16b07e[_0xf7ee77(0x264)] + _0xf7ee77(0x367); }); break; case _0x237d86(0x14e): _0x57767f[_0x237d86(0x5e2)](_0x3c665c => { const _0xc0374d = _0x237d86; 'njYwb' === _0xc0374d(0x4fe) ? _0x82c19b += _0xc0374d(0x674) + _0x3c665c[_0xc0374d(0x359)] + _0xc0374d(0x8af) + _0x3c665c[_0xc0374d(0xa6c)] + _0xc0374d(0x367) : (_0x44221f(_0x13d8b6['id']), _0x48f567(_0xc0374d(0x5c4) + _0x4a811a[_0xc0374d(0x589)] + '\x22\x20已删除。'), _0x474f67(![])); }); break; default: _0x57767f[_0x237d86(0x5e2)](_0x5c2e10 => { const _0x223fa4 = _0x237d86; _0x223fa4(0xaa3) !== 'xZqld' ? _0x82c19b += '-\x20' + JSON[_0x223fa4(0x7d5)](_0x5c2e10) + '\x0a' : _0x32f8f8(); }); break; } } } } } catch (_0x5f3958) { console['error'](_0x237d86(0x579) + _0x4caa82['id'] + ')，已跳过。这不应该发生，数据库可能已损坏。', _0x5f3958); } } return _0x82c19b; } function _0x49698b(_0x552d9b) { const _0x4abaae = _0x3b2836; if (_0x4abaae(0x451) === _0x4abaae(0x451)) { if (!Array['isArray'](_0x552d9b)) return _0x4abaae(0x8e2); if (_0x552d9b[_0x4abaae(0xb1e)] === 0x0) return _0x4abaae(0x7f1); return _0x4abaae(0x844) + _0x552d9b[_0x4abaae(0x937)]((_0x4a7ec6, _0x45dbfb) => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20' + (_0x45dbfb < _0x552d9b[_0x4abaae(0xb1e)] - 0x1 ? _0x4abaae(0x3e0) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>' + (_0x4a7ec6[_0x4abaae(0x38f)] || _0x4abaae(0x2c3)) + _0x4abaae(0x22c) + (_0x4a7ec6[_0x4abaae(0x665)] || '') + _0x4abaae(0x683))[_0x4abaae(0x9f9)]('') + _0x4abaae(0x85b); } else _0x756f11[_0x4abaae(0x589)] = _0x52f931, _0x3bbfb6[_0x4abaae(0x6fd)] = _0x9a0f28; } function _0x4b222e(_0x36eb58, _0x153923) { const _0x161191 = _0x3b2836; if (!Array[_0x161191(0x241)](_0x36eb58) || _0x36eb58[_0x161191(0xb1e)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>'; return _0x161191(0x844) + _0x36eb58['map']((_0x3866d0, _0x3cb5e5) => { const _0x6b8b44 = _0x161191, _0x256d85 = JSON[_0x6b8b44(0x7d5)](_0x3866d0[_0x6b8b44(0x4cf)] || [])[_0x6b8b44(0x254)](/'/g, '&apos;')[_0x6b8b44(0x254)](/"/g, _0x6b8b44(0x747)), _0x5d71eb = _0x3866d0[_0x6b8b44(0x42c)] || '未知联系人'; return _0x6b8b44(0x788) + (_0x3cb5e5 < _0x36eb58[_0x6b8b44(0xb1e)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x256d85 + _0x6b8b44(0x561) + _0x5d71eb + _0x6b8b44(0x1a7) + _0x153923 + _0x6b8b44(0x43a) + _0x5d71eb[_0x6b8b44(0x95d)](0x0) + _0x6b8b44(0x986) + _0x5d71eb + _0x6b8b44(0x51e) + (_0x3866d0['last_message_preview'] || '') + _0x6b8b44(0x865); })[_0x161191(0x9f9)]('') + '</div>'; } function _0x51c3db(_0x2cb6e9) { const _0xf26492 = _0x3b2836; if ('UfkYu' !== _0xf26492(0x386)) { if (!Array['isArray'](_0x2cb6e9)) return _0xf26492(0x8e2); if (_0x2cb6e9[_0xf26492(0xb1e)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x2cb6e9[_0xf26492(0x42a)]((_0x54a6ea, _0x1be7e9) => new Date(_0x1be7e9['timestamp']) - new Date(_0x54a6ea[_0xf26492(0x665)])), _0xf26492(0x844) + _0x2cb6e9[_0xf26492(0x937)]((_0x50d9b5, _0x35c1e1) => _0xf26492(0x294) + (_0x35c1e1 < _0x2cb6e9[_0xf26492(0xb1e)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0xf26492(0x91f) + (_0x50d9b5[_0xf26492(0x482)] || _0xf26492(0x2cf)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x50d9b5[_0xf26492(0x338)] || _0xf26492(0x921)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>' + (_0x50d9b5['timestamp'] || '') + _0xf26492(0x268))[_0xf26492(0x9f9)]('') + _0xf26492(0x85b); } else _0x163c92(_0x9cd95e[_0xf26492(0x9d0)](_0x160050, _0x471d64)); } function _0x39ff04(_0x113ed9) { const _0x1fa3c5 = _0x3b2836; if (_0x1fa3c5(0x3a5) === _0x1fa3c5(0x288)) throw new _0x56029a(_0x1fa3c5(0x1cb)); else { if (!Array[_0x1fa3c5(0x241)](_0x113ed9)) return _0x1fa3c5(0x8e2); if (_0x113ed9[_0x1fa3c5(0xb1e)] === 0x0) return _0x1fa3c5(0x109); return _0x113ed9[_0x1fa3c5(0x42a)]((_0x15bdec, _0xf6a65d) => new Date(_0xf6a65d[_0x1fa3c5(0x7b8)]) - new Date(_0x15bdec[_0x1fa3c5(0x7b8)])), _0x113ed9[_0x1fa3c5(0x937)](_0x56c8a3 => _0x1fa3c5(0x3a3) + (_0x56c8a3[_0x1fa3c5(0x808)] || '无标题笔记') + _0x1fa3c5(0x38b) + (_0x56c8a3[_0x1fa3c5(0x6fd)] || '') + _0x1fa3c5(0x560) + (_0x56c8a3['last_edited'] || '') + _0x1fa3c5(0x290))['join'](''); } } function _0x2e06e1(_0x4983b6) { const _0x264aa9 = _0x3b2836; if (!Array[_0x264aa9(0x241)](_0x4983b6)) return '<p>格式错误</p>'; if (_0x4983b6[_0x264aa9(0xb1e)] === 0x0) return _0x264aa9(0xa58); return _0x4983b6[_0x264aa9(0x42a)]((_0x45ffb3, _0x24c0b3) => new Date(_0x24c0b3[_0x264aa9(0x665)]) - new Date(_0x45ffb3[_0x264aa9(0x665)])), _0x4983b6[_0x264aa9(0x937)](_0x570974 => { const _0x1408dd = _0x264aa9, _0x3f980a = (_0x570974[_0x1408dd(0xb17)] || [])[_0x1408dd(0x937)](_0x4ad171 => _0x1408dd(0x924) + _0x4ad171 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0x1408dd(0x9f9)](''); return _0x1408dd(0x372) + (_0x570974[_0x1408dd(0x891)] || _0x1408dd(0x3dc)) + _0x1408dd(0x5e7) + (_0x570974[_0x1408dd(0x665)] || '') + _0x1408dd(0x363) + (_0x570974[_0x1408dd(0x7eb)] || _0x1408dd(0x446)) + _0x1408dd(0x824) + _0x3f980a + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x570974[_0x1408dd(0x8a4)] || 0x0)['toFixed'](0x2) + _0x1408dd(0x906); })[_0x264aa9(0x9f9)](''); } function _0x5897dd(_0x2c3eb5) { const _0x10329d = _0x3b2836; if (!Array[_0x10329d(0x241)](_0x2c3eb5)) return _0x10329d(0x8e2); if (_0x2c3eb5[_0x10329d(0xb1e)] === 0x0) return _0x10329d(0xa6e); return _0x2c3eb5[_0x10329d(0x42a)]((_0x23edcb, _0x1bd64c) => new Date(_0x1bd64c[_0x10329d(0x665)]) - new Date(_0x23edcb['timestamp'])), _0x2c3eb5[_0x10329d(0x937)](_0x14d5f4 => '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20' + (_0x14d5f4[_0x10329d(0x6f5)] || _0x10329d(0x6df)) + _0x10329d(0x165) + (_0x14d5f4[_0x10329d(0x665)] || '') + _0x10329d(0x33b) + (_0x14d5f4[_0x10329d(0x264)] || _0x10329d(0xa59)) + _0x10329d(0x7a8) + (_0x14d5f4[_0x10329d(0xaeb)] || 0x0)[_0x10329d(0x81f)](0x2) + _0x10329d(0x2dd))[_0x10329d(0x9f9)](''); } function _0x51e2ab(_0x379cc1) { const _0x1081a0 = _0x3b2836; if (!Array[_0x1081a0(0x241)](_0x379cc1)) return '<p>格式错误</p>'; if (_0x379cc1[_0x1081a0(0xb1e)] === 0x0) return _0x1081a0(0x459); return _0x379cc1[_0x1081a0(0x42a)]((_0x1f8a95, _0x31d229) => new Date(_0x31d229[_0x1081a0(0x665)]) - new Date(_0x1f8a95[_0x1081a0(0x665)])), _0x1081a0(0x1ff) + _0x379cc1['map'](_0x27de44 => _0x1081a0(0x60e) + (_0x27de44['location_name'] || _0x1081a0(0x127)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>' + (_0x27de44['activity_description'] || '') + _0x1081a0(0x421) + (_0x27de44[_0x1081a0(0x665)] || '') + _0x1081a0(0x21d))[_0x1081a0(0x9f9)]('') + _0x1081a0(0x85b); } async function _0x543815(_0x38cbe9, _0x17d226, _0x1b0f1c = null) { const _0xe7495b = _0x3b2836; if ('CNjqT' === _0xe7495b(0xfe)) { _0x4fb65e['innerHTML'] = _0xe7495b(0x42d); return; } else { const _0x4035a = _0x382342(_0x17d226), _0x28de8d = _0x57ec14[_0xe7495b(0x313)]['find'](_0x4e1205 => _0x4e1205[_0xe7495b(0xa1e)] === _0xe7495b(0x99c) && _0x4e1205['participantIds'][_0xe7495b(0x9e5)](_0x17d226)), _0x4340c0 = _0xb1d08(_0x28de8d?.['id'] || _0x57ec14[_0xe7495b(0x413)]); if (!_0x4035a) throw new Error('找不到角色信息。'); const { omniText: _0x45e6f0 } = _0x91c93b(_0x17d226); let _0x2596ec = ''; const _0x21853a = new Date(); let _0x4f00cd = null, _0x14706f = '无'; if (_0x1b0f1c) try { let _0x4f6496; try { _0x4f6496 = JSON[_0xe7495b(0x258)](_0x1b0f1c); } catch (_0x176ee4) { _0x4f6496 = _0x125828(_0x1b0f1c); } if (Array['isArray'](_0x4f6496) && _0x4f6496[_0xe7495b(0xb1e)] > 0x0) { const _0x1016dc = _0x4f6496[_0xe7495b(0x937)](_0x5686af => new Date(_0x5686af[_0xe7495b(0x665)] || _0x5686af[_0xe7495b(0x7b8)]))['filter'](_0x4e1bdf => !isNaN(_0x4e1bdf)); if (_0x1016dc['length'] > 0x0) { if (_0xe7495b(0x37a) !== _0xe7495b(0x37a)) return; else _0x4f00cd = new Date(Math['max'][_0xe7495b(0x922)](null, _0x1016dc)), _0x14706f = _0x4f00cd['toLocaleString']('zh-CN', { 'dateStyle': 'medium', 'timeStyle': _0xe7495b(0x930) }); } } } catch (_0x404fc8) { console['warn']('无法解析旧的视奸内容来获取时间戳。', _0x404fc8); } const _0x48d7e8 = _0xdf03ca(_0x17d226); _0x2596ec = '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', _0x2596ec += '-\x20**当前精确时间**:\x20' + _0x21853a[_0xe7495b(0x97a)](_0xe7495b(0x7bf), { 'dateStyle': _0xe7495b(0x575), 'timeStyle': _0xe7495b(0x930) }) + '\x0a'; if (_0x48d7e8) { const _0x451337 = new Date(_0x48d7e8['timestamp']), _0x496546 = _0x456df6(_0x451337); _0x2596ec += '-\x20**你最后一次活动是在**:\x20' + _0x496546 + '\x0a'; const _0x22ea16 = _0x21853a[_0xe7495b(0x3df)](), _0x176ab8 = _0x451337['toDateString'](), _0x429846 = new Date(); _0x429846[_0xe7495b(0x6b4)](_0x21853a[_0xe7495b(0x4f3)]() - 0x1); const _0x1cdf5b = _0x429846[_0xe7495b(0x3df)](); if (_0x22ea16 === _0x176ab8) { const _0x2dc0d9 = (_0x21853a - _0x451337) / (0x3e8 * 0x3c); _0x2596ec += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; } else { if (_0x1cdf5b === _0x176ab8) _0xe7495b(0x3b4) !== _0xe7495b(0x3b4) ? _0x43eceb = _0x5ceaaf['at'](-0x1) : _0x2596ec += _0xe7495b(0x631); else { if (_0xe7495b(0x564) !== _0xe7495b(0x564)) { if (_0x3c759a[_0xe7495b(0x241)](_0x38209c) && _0x42b496[_0xe7495b(0x241)](_0x3e3c85)) { const _0x544200 = _0x1dc777[_0xe7495b(0x8e9)](_0x2430e8); _0x5c7e9d = _0x39fea7[_0xe7495b(0x7d5)](_0x544200), _0x456d5d[_0xe7495b(0x4cf)](_0xe7495b(0x20e)); } else _0x5482c0 = _0xadb321[_0xe7495b(0x7d5)](_0x466782); } else { const _0x2587c9 = Math['round']((_0x21853a - _0x451337) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2596ec += '-\x20**状态提示**:\x20你已经有\x20' + _0x2587c9 + _0xe7495b(0x2ba); } } } } else _0x2596ec += _0xe7495b(0x2df); let _0x302cba = '', _0x30c12f = ''; _0x1b0f1c ? (_0x302cba = _0xe7495b(0x46f), _0x30c12f = _0xe7495b(0x5cf) + _0x1b0f1c + '\x0a```') : _0x302cba = _0xe7495b(0x56e); const _0x317bc2 = { 'gallery': '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'whispers': _0xe7495b(0xa4a), 'abyss': _0xe7495b(0x40b), 'fragments': _0xe7495b(0x8fb), 'bites': _0xe7495b(0x240), 'wants': _0xe7495b(0x942), 'footprints': _0xe7495b(0x74b) }, _0x3178c8 = _0x317bc2[_0x38cbe9] || _0xe7495b(0xb0d) + _0x38cbe9 + _0xe7495b(0x285); let _0x481f03 = ''; if (_0x4035a[_0xe7495b(0x48e)] && _0x4035a['linkedWorldBookIds'][_0xe7495b(0xb1e)] > 0x0) { const _0x5d786b = _0x4035a[_0xe7495b(0x48e)][_0xe7495b(0x937)](_0x20188c => _0x57ec14[_0xe7495b(0x9cd)]['find'](_0x36aec6 => _0x36aec6['id'] === _0x20188c))[_0xe7495b(0x1a0)](Boolean)[_0xe7495b(0x937)](_0x5d28ec => _0xe7495b(0xa9d) + _0x5d28ec[_0xe7495b(0x589)] + '\x0a' + _0x5d28ec[_0xe7495b(0x6fd)])[_0xe7495b(0x9f9)](''); _0x5d786b && (_0x481f03 = _0xe7495b(0x95c) + _0x5d786b); } const _0x15eaa9 = _0xe7495b(0x79b) + _0x4035a[_0xe7495b(0x589)] + _0xe7495b(0x6e2) + _0x4035a['name'] + '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“' + _0x4340c0[_0xe7495b(0x589)] + _0xe7495b(0xaff) + _0x14706f + _0xe7495b(0x5e8) + _0x21853a[_0xe7495b(0x97a)](_0xe7495b(0x7bf), { 'dateStyle': _0xe7495b(0x575), 'timeStyle': _0xe7495b(0x930) }) + '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20' + _0x4035a[_0xe7495b(0x589)] + _0xe7495b(0x779) + _0x4035a[_0xe7495b(0x7dc)] + '\x0a' + _0x481f03 + _0xe7495b(0x681) + _0x4340c0[_0xe7495b(0x589)] + _0xe7495b(0x779) + _0x4340c0[_0xe7495b(0x7dc)] + _0xe7495b(0x7c3) + _0x45e6f0 + '\x0a' + _0x30c12f + '\x0a\x0a#\x20当前任务指令\x0a' + _0x302cba + '\x0a' + _0x3178c8 + _0xe7495b(0x1ad), _0x6978f6 = [{ 'role': _0xe7495b(0x70d), 'content': _0x15eaa9 }]; _0x6978f6[_0xe7495b(0x1c5)]({ 'role': 'user', 'content': _0xe7495b(0x871) }); const _0x21d452 = await _0x5e65cf(_0x6978f6, { 'json': !![] }); return _0x21d452; } } async function _0x37a6f7(_0x412ace) { const _0x5245c4 = _0x3b2836; if (_0x5245c4(0x460) !== _0x5245c4(0x460)) _0x28a8d9[_0x5245c4(0x32b)][_0x5245c4(0x318)](_0x5245c4(0x716)), _0x14bb72[_0x5245c4(0x4e2)] = null, _0x237ab9[_0x5245c4(0x4e2)] = null, _0x4fbbb6['onclick'] = null, _0x2ca016[_0x5245c4(0x6a0)](_0x5245c4(0xa35), _0x7060a3), _0x49ed83(_0x1560a1); else { const _0x4e01d0 = _0x382342(_0x412ace); if (!_0x4e01d0) throw new Error(_0x5245c4(0x3c8)); _0x58ea7f(!![], _0x5245c4(0xab6)); const _0xc77ba0 = [_0x5245c4(0x1a9), 'whispers', 'abyss', _0x5245c4(0x63e), _0x5245c4(0x383), _0x5245c4(0x885), _0x5245c4(0x14e)]; let _0x85ea36 = {}; await Promise[_0x5245c4(0x77b)](_0xc77ba0['map'](async _0x4d8f06 => { const _0x23d1e8 = _0x5245c4, _0x380b14 = 'snoop_' + _0x412ace + '_' + _0x4d8f06, _0x19a2de = await _0x237033(_0x380b14); if (_0x19a2de) try { _0x85ea36[_0x4d8f06] = JSON[_0x23d1e8(0x258)](_0x19a2de); } catch (_0xba3e6) { } })); if (Object[_0x5245c4(0x756)](_0x85ea36)[_0x5245c4(0xb1e)] === 0x0) return _0x5245c4(0x5d9); const _0x1431c3 = _0x5245c4(0x192) + _0x4e01d0[_0x5245c4(0x589)] + _0x5245c4(0x781), _0x564743 = [{ 'role': 'system', 'content': _0x1431c3 }, { 'role': _0x5245c4(0x2b3), 'content': JSON[_0x5245c4(0x7d5)](_0x85ea36, null, 0x2) }]; _0x58ea7f(!![], _0x5245c4(0x62d)); const _0x1b39d0 = await _0x5e65cf(_0x564743); return _0x1b39d0 || _0x5245c4(0x9e2); } } async function _0x37a6f7(_0x8c467f) { const _0x2e3a17 = _0x3b2836, _0x1207bf = _0x382342(_0x8c467f); if (!_0x1207bf) throw new Error(_0x2e3a17(0x3c8)); try { if (_0x2e3a17(0x9c3) === _0x2e3a17(0x5c3)) { _0x4735cf['innerHTML'] = _0x2e3a17(0x31d), _0x14610c['innerHTML'] = ''; return; } else { _0x58ea7f(!![], _0x2e3a17(0xab6)); const _0x4d469a = [_0x2e3a17(0x1a9), _0x2e3a17(0x49e), _0x2e3a17(0x40c), _0x2e3a17(0x63e), 'bites', _0x2e3a17(0x885), 'footprints']; let _0x4fcf3e = {}; await Promise[_0x2e3a17(0x77b)](_0x4d469a['map'](async _0x3e38e7 => { const _0x4e13a5 = _0x2e3a17, _0x1c06c8 = _0x4e13a5(0x648) + _0x8c467f + '_' + _0x3e38e7, _0x46942e = await _0x237033(_0x1c06c8); if (_0x46942e) try { _0x4fcf3e[_0x3e38e7] = JSON['parse'](_0x46942e); } catch (_0x123ca2) { } })); if (Object['keys'](_0x4fcf3e)[_0x2e3a17(0xb1e)] === 0x0) return _0x2e3a17(0x5d9); const _0x526942 = _0x2e3a17(0x192) + _0x1207bf[_0x2e3a17(0x589)] + _0x2e3a17(0x9b2), _0x16cd50 = [{ 'role': 'system', 'content': _0x526942 }, { 'role': _0x2e3a17(0x2b3), 'content': JSON['stringify'](_0x4fcf3e, null, 0x2) }]; _0x58ea7f(!![], _0x2e3a17(0x62d)); const _0xc5a7b5 = await _0x5e65cf(_0x16cd50); return _0xc5a7b5 || 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。'; } } finally { _0x58ea7f(![]); } } document[_0x3b2836(0x67e)](_0x3b2836(0x328))[_0x3b2836(0x990)](_0x3b2836(0x821), () => _0x52c85d(_0x3b2836(0x669), _0x3b2836(0x409))), document[_0x3b2836(0x67e)](_0x3b2836(0x869))[_0x3b2836(0x990)](_0x3b2836(0x821), () => { const _0x3b3134 = _0x3b2836; document[_0x3b3134(0x67e)]('snoop-app-view-container')[_0x3b3134(0x7df)][_0x3b3134(0x741)] = _0x3b3134(0x527), _0x52c85d(_0x3b3134(0x409), _0x3b3134(0x17c)); }), _0x188ac8(); }); async function _0x3f3e47() { const _0x5ac63a = _0x1654f8; console[_0x5ac63a(0x4cf)]('---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---'), console['log']('哼，正在开始净化你那被污染的聊天记录...'); async function _0x364e1e(_0xf37072, _0xdf9d2c) { const _0x39bb97 = _0x5ac63a; if (_0x39bb97(0x660) !== _0x39bb97(0x660)) _0x587fca[_0x39bb97(0x7df)][_0x39bb97(0x6dd)] = _0x39bb97(0xa5e) + _0x59c090 + '\x27)'; else { const _0x4dd6ee = await _0x253fd2; return new Promise((_0x4cb5b6, _0xf01cf3) => { const _0x3386fd = _0x39bb97, _0x1a0119 = _0x4dd6ee['transaction'](_0x301b6a, _0x3386fd(0x73e)), _0x212e43 = _0x1a0119[_0x3386fd(0x6fe)](_0x301b6a), _0x4c9fa8 = _0x212e43['put']({ 'id': _0xf37072, 'blob': _0xdf9d2c }); _0x4c9fa8['onsuccess'] = () => _0x4cb5b6(_0x4c9fa8[_0x3386fd(0x20c)]), _0x4c9fa8[_0x3386fd(0x7e4)] = () => _0xf01cf3(_0x4c9fa8[_0x3386fd(0x390)]); }); } } async function _0x82bce4(_0x3ffc9e) { const _0x1eb5db = _0x5ac63a; if (_0x1eb5db(0x6fb) !== _0x1eb5db(0x6fb)) { const _0x1d2ab9 = _0x4955bb[_0x1eb5db(0x48e)][_0x1eb5db(0x937)](_0x30e8d5 => _0x3db04c['worldBooks'][_0x1eb5db(0x270)](_0x21b7da => _0x21b7da['id'] === _0x30e8d5))[_0x1eb5db(0x1a0)](_0x23a1f3)[_0x1eb5db(0x937)](_0x292f17 => '\x0a##\x20世界书条目:\x20' + _0x292f17[_0x1eb5db(0x589)] + '\x0a' + _0x292f17[_0x1eb5db(0x6fd)])[_0x1eb5db(0x9f9)](''); _0x1d2ab9 && (_0x1ca5a6 = _0x1eb5db(0x95c) + _0x1d2ab9); } else { const _0x3af323 = await _0x253fd2; return new Promise((_0x372305, _0x3ce3da) => { const _0x3da8af = _0x1eb5db, _0x2f6e75 = _0x3af323['transaction'](_0x414485, _0x3da8af(0x8cc)), _0x5acca6 = _0x2f6e75['objectStore'](_0x414485), _0x33b548 = _0x5acca6[_0x3da8af(0x751)](_0x3ffc9e); _0x33b548[_0x3da8af(0x465)] = () => _0x372305(_0x33b548[_0x3da8af(0x20c)] ? _0x33b548[_0x3da8af(0x20c)][_0x3da8af(0x253)] : null), _0x33b548[_0x3da8af(0x7e4)] = () => _0x3ce3da(_0x33b548['error']); }); } } async function _0x349217(_0x2e5ac2, _0x3e9947) { const _0x2532b9 = _0x5ac63a; if ('rStTy' === _0x2532b9(0x161)) _0x545df6['getElementById'](_0x2532b9(0x5e1))[_0x2532b9(0x821)](); else { const _0x306885 = await _0x253fd2; return new Promise((_0x42bb04, _0x512d67) => { const _0x3bee97 = _0x2532b9; if (_0x3bee97(0x321) === 'GUrGd') { const _0x23d03d = _0x3d921b[_0x3bee97(0x766)](_0x10ec6a, _0x3bee97(0x73e)), _0x3103a3 = _0x23d03d[_0x3bee97(0x6fe)](_0x3e17e6), _0x1b9264 = _0x3103a3['put'](_0x476f6e); _0x1b9264[_0x3bee97(0x465)] = () => _0x1c83d1(_0x1b9264[_0x3bee97(0x20c)]), _0x1b9264['onerror'] = () => _0x20eb9f(_0x1b9264[_0x3bee97(0x390)]); } else { const _0x22936d = _0x306885[_0x3bee97(0x766)](_0x414485, 'readwrite'), _0x17ab85 = _0x22936d[_0x3bee97(0x6fe)](_0x414485), _0x2fd2ea = _0x17ab85[_0x3bee97(0xaa9)]({ 'id': _0x2e5ac2, 'data': _0x3e9947 }); _0x2fd2ea[_0x3bee97(0x465)] = () => _0x42bb04(), _0x2fd2ea[_0x3bee97(0x7e4)] = () => _0x512d67(_0x2fd2ea[_0x3bee97(0x390)]); } }); } } function _0x3965f1(_0x3b1ec5) { const _0x215264 = _0x5ac63a; return fetch(_0x3b1ec5)[_0x215264(0x69b)](_0x1bb223 => _0x1bb223[_0x215264(0x44f)]()); } let _0x4416b3 = 0x0; for (let _0x2349b3 = 0x0; _0x2349b3 < localStorage[_0x5ac63a(0xb1e)]; _0x2349b3++) { const _0x112945 = localStorage[_0x5ac63a(0x99d)](_0x2349b3); if (_0x112945 && _0x112945[_0x5ac63a(0x2bd)](_0x5ac63a(0x59c))) { let _0x316b38, _0x599b8b = ![]; try { if (_0x5ac63a(0x3b1) === _0x5ac63a(0x3b1)) { _0x316b38 = JSON[_0x5ac63a(0x258)](localStorage['getItem'](_0x112945)); if (!Array[_0x5ac63a(0x241)](_0x316b38)) continue; for (const _0x4cf8f0 of _0x316b38) { if (_0x4cf8f0 && _0x4cf8f0[_0x5ac63a(0x3e9)] && _0x4cf8f0['image'][_0x5ac63a(0x2bd)]('data:image')) { const _0x2ea545 = await _0x3965f1(_0x4cf8f0[_0x5ac63a(0x3e9)]), _0x3c2c25 = _0x5ac63a(0x742) + Date['now']() + '_' + Math[_0x5ac63a(0x757)](); await _0x364e1e(_0x3c2c25, _0x2ea545), _0x4cf8f0[_0x5ac63a(0x704)] = _0x3c2c25, delete _0x4cf8f0[_0x5ac63a(0x3e9)], _0x599b8b = !![], _0x4416b3++; } } _0x599b8b && (_0x5ac63a(0x689) !== 'ucAmK' ? _0x39072b[_0x5ac63a(0x7df)][_0x5ac63a(0x6dd)] = '' : localStorage[_0x5ac63a(0xa56)](_0x112945, JSON[_0x5ac63a(0x7d5)](_0x316b38))); } else _0x4cd750(_0x278b61, _0x789621['emotion']); } catch (_0x267bcb) { if (_0x5ac63a(0x2bf) === _0x5ac63a(0x2bf)) { console[_0x5ac63a(0x390)](_0x5ac63a(0x981) + _0x112945 + _0x5ac63a(0x5f2), _0x267bcb); continue; } else _0x1a32ac(_0x5ac63a(0x247) + _0x3b2036[_0x5ac63a(0x589)] + '\x20添加了新的纪念日：' + _0x46b9f9[_0x5ac63a(0x61e)]); } } } console[_0x5ac63a(0x4cf)]('净化完成！总共迁移了\x20' + _0x4416b3 + '\x20张旧图片。'); } async function _0x374e36() { const _0x472f11 = _0x1654f8; console[_0x472f11(0x4cf)](_0x472f11(0x3eb)), console[_0x472f11(0x4cf)](_0x472f11(0x6a6)); async function _0x58ae75(_0x4d32a3, _0x231f21) { const _0x2a55f6 = await _0x253fd2; return new Promise((_0x2ec4ac, _0x339982) => { const _0x4eff67 = _0x3df6; if (_0x4eff67(0xb06) === _0x4eff67(0x23c)) _0xe05655['push'](_0x56125f); else { const _0x5b96b1 = _0x2a55f6['transaction']('images', _0x4eff67(0x73e)), _0x4abccd = _0x5b96b1[_0x4eff67(0x6fe)](_0x4eff67(0x57e)), _0x5c0fb2 = _0x4abccd[_0x4eff67(0xaa9)]({ 'id': _0x4d32a3, 'blob': _0x231f21 }); _0x5c0fb2[_0x4eff67(0x465)] = () => _0x2ec4ac(_0x5c0fb2[_0x4eff67(0x20c)]), _0x5c0fb2[_0x4eff67(0x7e4)] = () => _0x339982(_0x5c0fb2[_0x4eff67(0x390)]); } }); } function _0x4b985f(_0x42c9c6) { const _0x514c2e = _0x472f11; return fetch(_0x42c9c6)[_0x514c2e(0x69b)](_0xc1884d => _0xc1884d['blob']()); } let _0x35d124 = 0x0, _0x4fb187 = ![]; try { if (_0x472f11(0x5d3) === _0x472f11(0x538)) _0x7c9a41 = _0x419274; else { const _0x19339f = localStorage[_0x472f11(0x6e3)](_0x472f11(0x173)); if (!_0x19339f) { if (_0x472f11(0x7be) === _0x472f11(0x7be)) { console[_0x472f11(0x4cf)]('好友圈档案柜是空的，无需净化。'); return; } else _0x32284f = { 'characterId': _0x5b523b[_0x472f11(0x461)], 'entries': [] }, _0x214ea8[_0x472f11(0x5aa)][_0x472f11(0x1c5)](_0x3a77c5); } const _0x33d681 = JSON[_0x472f11(0x258)](_0x19339f); if (!_0x33d681[_0x472f11(0xade)] || !Array[_0x472f11(0x241)](_0x33d681[_0x472f11(0xade)])) { if ('YbLdl' !== _0x472f11(0x556)) return; else _0x3803b2['style'][_0x472f11(0x5eb)] = 'absolute', _0xf00445[_0x472f11(0x7df)][_0x472f11(0x878)] = '34%', _0x314027[_0x472f11(0x7df)][_0x472f11(0xb18)] = _0x472f11(0x50a), _0x100295[_0x472f11(0x7df)]['transform'] = 'translateX(-50%)', _0x96098b[_0x472f11(0x7df)][_0x472f11(0x741)] = 'block'; } for (const _0x3c5c48 of _0x33d681[_0x472f11(0xade)]) { if (_0x3c5c48[_0x472f11(0x216)] && Array[_0x472f11(0x241)](_0x3c5c48[_0x472f11(0x216)])) for (const _0x39def9 of _0x3c5c48['posts']) { if (_0x39def9 && _0x39def9['image'] && _0x39def9[_0x472f11(0x3e9)][_0x472f11(0x2bd)](_0x472f11(0x2d5))) { console['log']('在好友圈\x20\x22' + _0x3c5c48[_0x472f11(0x589)] + _0x472f11(0x106)); const _0x5d3358 = await _0x4b985f(_0x39def9[_0x472f11(0x3e9)]), _0x457b48 = 'post_image_migrated_' + Date[_0x472f11(0x2c5)]() + '_' + Math[_0x472f11(0x757)](); await _0x58ae75(_0x457b48, _0x5d3358), _0x39def9[_0x472f11(0x704)] = _0x457b48, delete _0x39def9['image'], _0x4fb187 = !![], _0x35d124++; } } } _0x4fb187 && (_0x472f11(0x30c) !== _0x472f11(0x142) ? (console[_0x472f11(0x4cf)]('好友圈净化完成，正在重新存档...'), localStorage['setItem'](_0x472f11(0x173), JSON[_0x472f11(0x7d5)](_0x33d681))) : (_0x114b46(), _0x24eefd(![]))); } } catch (_0x14675e) { console[_0x472f11(0x390)]('净化好友圈时出错，真是的。', _0x14675e); } return console[_0x472f11(0x4cf)]('---\x20好友圈净化仪式完成\x20---'), console[_0x472f11(0x4cf)](_0x472f11(0xa9a) + _0x35d124 + _0x472f11(0x3c2)), _0x35d124; } async function _0x2762c0() { const _0x3c5b6b = _0x1654f8; console[_0x3c5b6b(0x4cf)](_0x3c5b6b(0x8f9)), console[_0x3c5b6b(0x4cf)](_0x3c5b6b(0x825)); let _0x4b14d8 = 0x0, _0x4c187b = ![]; try { if (_0x3c5b6b(0x8fc) !== 'PpHHF') { const _0x2c925b = localStorage[_0x3c5b6b(0x6e3)]('appState'); if (!_0x2c925b) return console['log'](_0x3c5b6b(0x7ac)), 0x0; for (let _0x148fdc = 0x0; _0x148fdc < localStorage[_0x3c5b6b(0xb1e)]; _0x148fdc++) { const _0x4cf4f6 = localStorage['key'](_0x148fdc); if (_0x4cf4f6 && _0x4cf4f6[_0x3c5b6b(0x2bd)](_0x3c5b6b(0x59c))) { if (_0x3c5b6b(0x3e2) !== _0x3c5b6b(0x3e2)) { if (!_0x1af58e) return []; const _0x4a0377 = _0x157b71['split']('\x0a'), _0x2ed147 = [], _0x3f6cdc = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x22d787 of _0x4a0377) { const _0x2b4b13 = _0x22d787[_0x3c5b6b(0xa9e)](_0x3f6cdc); if (_0x2b4b13) { const _0xbff2f4 = _0x225439(_0x2b4b13[0x1], 0xa), _0xbdd351 = _0xf45bdd(_0x2b4b13[0x2], 0xa), _0x3dd934 = _0x52fb76(_0x2b4b13[0x3], 0xa) * (_0x2b4b13[0x3][_0x3c5b6b(0xb1e)] === 0x2 ? 0xa : 0x1), _0x3e73fa = _0xbff2f4 * 0x3c + _0xbdd351 + _0x3dd934 / 0x3e8, _0x3772d0 = _0x22d787[_0x3c5b6b(0x254)](_0x3f6cdc, '')[_0x3c5b6b(0x3dd)](); _0x3772d0 && _0x2ed147[_0x3c5b6b(0x1c5)]({ 'time': _0x3e73fa, 'text': _0x3772d0 }); } } return _0x2ed147; } else { let _0x57d178, _0x68a41a = ![]; try { if (_0x3c5b6b(0x877) === 'CoHWT') { _0x57d178 = JSON['parse'](localStorage[_0x3c5b6b(0x6e3)](_0x4cf4f6)); if (!Array[_0x3c5b6b(0x241)](_0x57d178)) continue; for (const _0x4647e5 of _0x57d178) { if (_0x4647e5 && (_0x4647e5[_0x3c5b6b(0xa1e)] === _0x3c5b6b(0x89f) || _0x4647e5[_0x3c5b6b(0xa1e)] === _0x3c5b6b(0x64b)) && _0x4647e5[_0x3c5b6b(0x605)] && _0x4647e5[_0x3c5b6b(0x605)][_0x3c5b6b(0x2bd)](_0x3c5b6b(0x2d5))) { if (_0x3c5b6b(0x925) !== 'GGwJU') { const _0x37713a = await _0x1707d7(_0x4647e5[_0x3c5b6b(0x605)]), _0x4fd348 = _0x3c5b6b(0x708) + Date[_0x3c5b6b(0x2c5)]() + '_' + Math[_0x3c5b6b(0x757)](); await _0x59767c(_0x4fd348, _0x37713a), _0x4647e5[_0x3c5b6b(0x41a)] = _0x4fd348, delete _0x4647e5[_0x3c5b6b(0x605)], _0x68a41a = !![], _0x4b14d8++; } else _0x4a7e7f = _0x4feb18[_0x3c5b6b(0x3e9)]; } } _0x68a41a && (_0x3c5b6b(0x8c0) !== 'VSgQw' ? (_0x4eac9a = _0x53d525[_0x3c5b6b(0x494)](_0x3c5b6b(0x962)), _0x5dc5b9[_0x3c5b6b(0x226)] = _0x3c5b6b(0x558), _0x32ce55[_0x3c5b6b(0x52e)] = _0x3c5b6b(0x8a8), _0x8ad5e1['style']['backgroundColor'] = _0x3c5b6b(0x86d), _0xeaf607[_0x3c5b6b(0x7df)][_0x3c5b6b(0xaf3)] = _0x3c5b6b(0x8d8), _0x384339[_0x3c5b6b(0x7df)][_0x3c5b6b(0x8d9)] = _0x3c5b6b(0xa51), _0x174bee[_0x3c5b6b(0x6b3)](_0x3ac994)) : localStorage[_0x3c5b6b(0xa56)](_0x4cf4f6, JSON[_0x3c5b6b(0x7d5)](_0x57d178))); } else _0x38f8d4[_0x3c5b6b(0x7df)][_0x3c5b6b(0x741)] = _0x3c5b6b(0x527); } catch (_0x294bff) { console['error'](_0x3c5b6b(0x981) + _0x4cf4f6 + '\x20时出错，跳过。', _0x294bff); continue; } } } } } else { if (_0x288b0f['diaryPressTimer']) _0x1f2f73(_0x1228ee[_0x3c5b6b(0x690)]); } } catch (_0x4dbddd) { if (_0x3c5b6b(0x970) === _0x3c5b6b(0x33d)) { if (!_0x1f8519) return; _0x275f4b = _0x8d9353[_0x3c5b6b(0x839)][0x0][_0x3c5b6b(0x7e6)], _0x31de80 === 'horizontal' && _0x57d41c(), _0x249e83 = ![]; } else console[_0x3c5b6b(0x390)](_0x3c5b6b(0x477), _0x4dbddd); } return console[_0x3c5b6b(0x4cf)](_0x3c5b6b(0x378)), console[_0x3c5b6b(0x4cf)](_0x3c5b6b(0xa9a) + _0x4b14d8 + '\x20张旧的音乐封面。'), _0x4b14d8; } function _0x21c419() { const _0x508278 = _0x1654f8; if (!_0x57ec14[_0x508278(0x461)]) return _0x57ec14[_0x508278(0x391)]['find'](_0x27ce11 => _0x27ce11['id'] === _0x57ec14[_0x508278(0x422)]) || _0x57ec14[_0x508278(0x391)][0x0]; const _0x4cf9af = _0x57ec14[_0x508278(0x313)][_0x508278(0x270)](_0x2fe294 => _0x2fe294[_0x508278(0xa1e)] === _0x508278(0x99c) && _0x2fe294[_0x508278(0x69c)][_0x508278(0x9e5)](_0x57ec14['activeDiaryCharacterId'])), _0x44a193 = _0x4cf9af?.[_0x508278(0x347)] || _0x57ec14['activeUserProfileId']; return _0x57ec14[_0x508278(0x391)][_0x508278(0x270)](_0xafab98 => _0xafab98['id'] === _0x44a193) || _0x57ec14['userProfiles'][0x0]; } function _0x456df6(_0x5f39fa) { const _0x3691db = _0x1654f8, _0x45ca59 = new Date(), _0x14b536 = _0x45ca59 - _0x5f39fa, _0x137838 = Math['round'](_0x14b536 / 0x3e8), _0x31e365 = Math[_0x3691db(0xa13)](_0x137838 / 0x3c), _0x80301a = Math[_0x3691db(0xa13)](_0x31e365 / 0x3c), _0x1ae04f = Math[_0x3691db(0xa13)](_0x80301a / 0x18), _0x5133d0 = _0x5f39fa[_0x3691db(0x42e)]('zh-CN', { 'hour': _0x3691db(0x6d3), 'minute': '2-digit' }); if (_0x137838 < 0x3c) return '刚才'; if (_0x31e365 < 0x3c) { if (_0x3691db(0x553) !== 'jHfUj') return _0x31e365 + _0x3691db(0x327); else { const _0x1e2ad2 = _0x50ac49[_0x3691db(0x494)](_0x3691db(0x962)); _0x1e2ad2[_0x3691db(0x226)] = _0x3691db(0x929), _0x1e2ad2[_0x3691db(0x52e)] = _0x4c5b2f[_0x3691db(0x6fd)], _0x16e71a[_0x3691db(0x6b3)](_0x1e2ad2); } } const _0x39487c = _0x45ca59[_0x3691db(0x3df)]() === _0x5f39fa[_0x3691db(0x3df)](); if (_0x39487c) return _0x3691db(0x108) + _0x5133d0; const _0xa6b0b = new Date(); _0xa6b0b['setDate'](_0x45ca59[_0x3691db(0x4f3)]() - 0x1); const _0x13c34d = _0xa6b0b[_0x3691db(0x3df)]() === _0x5f39fa[_0x3691db(0x3df)](); if (_0x13c34d) return '昨天\x20' + _0x5133d0; if (_0x1ae04f <= 0x7) { if ('fZYfW' === _0x3691db(0x947)) { const _0x3a7598 = ['星期日', _0x3691db(0x908), _0x3691db(0x813), _0x3691db(0x541), _0x3691db(0x27a), _0x3691db(0x116), _0x3691db(0x2f7)]; return _0x3a7598[_0x5f39fa[_0x3691db(0x431)]()] + '\x20' + _0x5133d0; } else { const _0x5d8fbd = _0x449cf8(); if (!_0x5d8fbd) { _0x453b8b[_0x3691db(0x52e)] = _0x3691db(0x449); return; } if (_0x5d8fbd[_0x3691db(0xa1e)] === _0x3691db(0x99c)) { const _0x4e964f = _0x3763a4(_0x5d8fbd[_0x3691db(0x69c)][0x0]); _0x39e719['textContent'] = _0x4e964f ? _0x4e964f['name'] : _0x3691db(0x65e); } else _0x2e6231['textContent'] = _0x5d8fbd[_0x3691db(0x589)] || _0x3691db(0x629) + _0x5d8fbd[_0x3691db(0x69c)][_0x3691db(0xb1e)] + ')'; } } return _0x5f39fa[_0x3691db(0x96c)]() + '年' + (_0x5f39fa[_0x3691db(0x4b8)]() + 0x1) + '月' + _0x5f39fa[_0x3691db(0x4f3)]() + '日'; } function _0x1c44ae(_0x4b7df2, _0x4760d2 = 0x320, _0x4c9bc7 = 0.8, _0x36e9d0 = ![]) { return new Promise((_0x173550, _0x2e0e65) => { const _0x20b7a6 = _0x3df6; if ('tkFoK' === _0x20b7a6(0x9f1)) { if (!_0x4b7df2 || !_0x4b7df2[_0x20b7a6(0xa1e)][_0x20b7a6(0x2bd)](_0x20b7a6(0x29f))) return _0x2e0e65(new Error(_0x20b7a6(0x3f7))); const _0x36be35 = new FileReader(); _0x36be35['readAsDataURL'](_0x4b7df2), _0x36be35['onload'] = _0x2d574c => { const _0x43db3c = _0x20b7a6, _0x47f01a = new Image(); _0x47f01a[_0x43db3c(0x45f)] = _0x2d574c['target']['result'], _0x47f01a['onload'] = () => { const _0xf21d61 = _0x43db3c, _0x3b83f5 = document[_0xf21d61(0x494)](_0xf21d61(0x658)); let _0x1ed8e3 = _0x47f01a[_0xf21d61(0x96a)], _0xf1d606 = _0x47f01a['height']; if (_0x1ed8e3 > _0xf1d606) _0x1ed8e3 > _0x4760d2 && (_0xf21d61(0x79f) !== _0xf21d61(0x79f) ? _0x3876f5() : (_0xf1d606 *= _0x4760d2 / _0x1ed8e3, _0x1ed8e3 = _0x4760d2)); else { if ('vHUER' !== _0xf21d61(0x8e6)) { if (_0xf1d606 > _0x4760d2) { if (_0xf21d61(0x2c6) === 'lejJM') _0x1ed8e3 *= _0x4760d2 / _0xf1d606, _0xf1d606 = _0x4760d2; else { if (!_0x151a1d) return ''; const _0x5d9935 = new _0x53b334(_0x2caf81), _0x5b784f = _0x1cd477(_0x5d9935[_0xf21d61(0x59a)]())[_0xf21d61(0xa2e)](0x2, '0'), _0x19a39c = _0x20a3f5(_0x5d9935[_0xf21d61(0xa97)]())['padStart'](0x2, '0'); return _0x5b784f + ':' + _0x19a39c; } } } else { if (_0x336dd0[_0xf21d61(0x856)]) _0x2d0806['push']('[' + _0x16200d(_0xbf829f) + _0xf21d61(0x8ba) + (_0x5b30b2['content']?.[_0xf21d61(0xa9e)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x190a2c[_0xf21d61(0x3e9)]) { const _0x1b0e0e = _0x250d22['content'] ? '\x20' + _0x257ce8[_0xf21d61(0x6fd)] : ''; _0x4268d4[_0xf21d61(0x1c5)]('[' + _0x5f220c(_0x35e9fc) + _0xf21d61(0x9a1) + _0x1b0e0e); } else _0x5823d5[_0xf21d61(0x6fd)] && _0x3abdbb['push']('[' + _0x3eb894(_0x48ac71) + ']\x20' + _0x4548f7[_0xf21d61(0x6fd)]); } } } _0x3b83f5[_0xf21d61(0x96a)] = _0x1ed8e3, _0x3b83f5[_0xf21d61(0x333)] = _0xf1d606; const _0x3443ea = _0x3b83f5[_0xf21d61(0xab9)]('2d'); _0x3443ea['drawImage'](_0x47f01a, 0x0, 0x0, _0x1ed8e3, _0xf1d606); const _0x51671b = _0x4b7df2[_0xf21d61(0xa1e)] === _0xf21d61(0x40a) ? _0xf21d61(0x40a) : _0xf21d61(0x2c9); _0x36e9d0 ? _0x3b83f5['toBlob'](_0x543b8a => { const _0x23babf = _0xf21d61; if (_0x23babf(0x441) !== _0x23babf(0x441)) { _0x2d5234[_0x23babf(0x282)] = _0x23babf(0x9be); return; } else _0x543b8a ? _0x173550(_0x543b8a) : _0x2e0e65(new Error(_0x23babf(0x7fc))); }, _0x51671b, _0x4c9bc7) : _0xf21d61(0xa64) !== _0xf21d61(0x6b8) ? _0x173550(_0x3b83f5[_0xf21d61(0x9d0)](_0x51671b, _0x4c9bc7)) : _0xff1934['linkedWorldBookIds'] = _0x315911['linkedWorldBookIds'][_0xf21d61(0x1a0)](_0x22870b => _0x22870b !== _0x15b8bd); }, _0x47f01a['onerror'] = _0x2745cc => _0x2e0e65(_0x2745cc); }, _0x36be35[_0x20b7a6(0x7e4)] = _0x587818 => _0x2e0e65(_0x587818); } else _0x5d8383[_0x20b7a6(0x7df)]['backgroundImage'] = _0x20b7a6(0xa5e) + _0x3d2aa8[_0x20b7a6(0x5b2)] + '\x27)'; }); } function _0x2a338e(_0x2f1f48) { return new Promise((_0x13ed96, _0x41134a) => { const _0x1f47da = _0x3df6; if (_0x1f47da(0x6e8) !== _0x1f47da(0x4c4)) { const _0x43ea3d = new FileReader(); _0x43ea3d[_0x1f47da(0x4ef)] = () => _0x13ed96(_0x43ea3d[_0x1f47da(0x20c)]), _0x43ea3d['onerror'] = _0x41134a, _0x43ea3d['readAsDataURL'](_0x2f1f48); } else { const _0x4ba73a = _0x2a6d4e(_0x386de1[_0x1f47da(0x59a)]())[_0x1f47da(0xa2e)](0x2, '0'), _0x2ab34c = _0x4f3322(_0x22863a['getMinutes']())[_0x1f47da(0xa2e)](0x2, '0'); _0x22b4cb[_0x1f47da(0x52e)] = _0x4ba73a + ':' + _0x2ab34c; const _0x3bee4e = _0xfce1b4[_0x1f47da(0x4b8)]() + 0x1, _0x23a061 = _0x20bf7f[_0x1f47da(0x4f3)](), _0x7bfac = [_0x1f47da(0x414), _0x1f47da(0x908), _0x1f47da(0x813), _0x1f47da(0x541), '星期四', _0x1f47da(0x116), _0x1f47da(0x2f7)][_0x3df170[_0x1f47da(0x431)]()]; _0x3d21af[_0x1f47da(0x52e)] = _0x3bee4e + '月' + _0x23a061 + '日\x20' + _0x7bfac; } }); } function _0x2a338e(_0x24aeeb) { return new Promise((_0x17c231, _0xe39f61) => { const _0x1c8fd2 = _0x3df6, _0x1e61a4 = new FileReader(); _0x1e61a4[_0x1c8fd2(0x4ef)] = () => _0x17c231(_0x1e61a4[_0x1c8fd2(0x20c)]), _0x1e61a4[_0x1c8fd2(0x7e4)] = _0xe39f61, _0x1e61a4['readAsDataURL'](_0x24aeeb); }); } function _0x20beac(_0x457c13, _0x1553f0, _0x50d36f) { const _0x581eb9 = _0x1654f8, _0x4b636c = _0x219158 => { const _0x4654af = _0x3df6; if (_0x219158[_0x4654af(0x1a4)] === _0x4654af(0x2b3)) return _0x57ec14[_0x4654af(0xaf7)]?.[_0x4654af(0x589)] || _0x4654af(0x35d); if (_0x457c13[_0x4654af(0xa1e)] === _0x4654af(0x7d1)) { if (_0x4654af(0xb10) !== _0x4654af(0xb10)) _0x127abd[_0x4654af(0x7df)][_0x4654af(0x89d)] = _0x4654af(0x763), _0x1067a6[_0x4654af(0x7df)][_0x4654af(0x472)] = _0x4654af(0x3fe); else { const _0x506bc8 = _0x219158[_0x4654af(0x972)] ? _0x20689f(_0x219158[_0x4654af(0x972)]) : null; return _0x506bc8?.[_0x4654af(0x589)] || _0x4654af(0x828); } } else { if (_0x4654af(0x6f6) !== _0x4654af(0x6f6)) { const _0x18f393 = _0x5f5786[_0x4654af(0x766)](_0x6e8cd9, _0x4654af(0x73e)), _0x3aad7b = _0x18f393[_0x4654af(0x6fe)](_0x4431b9), _0xe23827 = _0x3aad7b[_0x4654af(0x2f4)](_0x51ee37); _0xe23827[_0x4654af(0x465)] = () => _0x5545d0(), _0xe23827[_0x4654af(0x7e4)] = () => _0x4b58de(_0xe23827[_0x4654af(0x390)]); } else { const _0x32dc24 = _0x20689f(_0x457c13['participantIds'][0x0]); return _0x32dc24?.[_0x4654af(0x589)] || 'AI'; } } }, _0x4f2a7 = _0x1553f0[_0x581eb9(0x944)](-_0x50d36f), _0x1c018f = []; for (const _0x10f28c of _0x4f2a7) { const _0x39f273 = new Date(_0x10f28c[_0x581eb9(0x665)])['toLocaleTimeString'](_0x581eb9(0x7bf), { 'hour': _0x581eb9(0x6d3), 'minute': _0x581eb9(0x6d3) }); _0x10f28c[_0x581eb9(0x6fd)] && _0x1c018f['push']('[' + _0x39f273 + ']\x20[' + _0x4b636c(_0x10f28c) + ']\x20' + String(_0x10f28c['content'])[_0x581eb9(0x3dd)]()); } return _0x1c018f; } function _0x381762(_0x4b5f88) { const _0x46af85 = _0x1654f8; if (_0x4b5f88['type'] === 'group') return _0x46af85(0x2ca) + (_0x4b5f88[_0x46af85(0x589)] || _0x46af85(0xae8)) + '」'; const _0x50156a = _0x20689f(_0x4b5f88['participantIds'][0x0]); return '与\x20' + (_0x50156a?.[_0x46af85(0x589)] || _0x46af85(0x65e)) + _0x46af85(0x857); } function _0x44b9() { const _0x3204e9 = ['lIRiv', 'JIsHw', 'tkFoK', 'edit-delete-char-button', 'erMRz', 'message-action-backdrop', '未知用户', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'theme-hue-slider', 'TCEfF', 'join', '已经删掉了。', '.music-post-play-icon,\x20.music-share-play-icon', 'char-edit-avatar-preview', 'gdcVO', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'msNuo', 'AiKFX', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'wMIKt', 'TEyIy', 'iXfCS', 'group-chat-name', 'chat', '\x0a##\x20条目:\x20', '检测到旧版数据，已自动为您完成升级！', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', '\x20\x20\x20\x20-\x20', 'modal-root', 'AI未能返回有效的JSON数组格式。', '\x22\x20class=\x22char-name\x22>', 'edit-message-button', '确定要删除这个安排吗？此操作不可撤销。', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'qYtXW', 'round', 'DkFnN', '”已存入圣殿。', 'artist', '正在升级聊天数据结构...', 'group-clear-history-button', 'bxpJv', 'info-file-input', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'amVdu', 'OYFfp', 'type', ']\x20[', '<div\x20class=\x22post-timestamp\x22>', 'YzCUg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', '其他杂项', 'fkHeQ', 'selectedDate', '\x0a\x20\x20\x20\x20人设:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'marginTop', 'JrpdG', 'music-library-item', 'otYVM', 'quote-preview-sender', 'KHHAK', 'padStart', 'toggle', 'add-choice-modal', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'YxdMc', 'perChatContextLines', '导出过程中发生严重错误:\x20', 'keydown', 'assign', 'JFagD', '>>\x20', 'bSpAB', '生成失败:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'noir_migration_music_v1_complete', 'rBDFR', 'edit-message-modal', '乐于助人的助手', '\x0a你只扮演【', 'activeQuote', 'Noir_FileSystem', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '搜索失败:\x20', 'QSEOr', 'transparent', 'msg_', 'EbRdV', 'calendar', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'historyIndex', 'char_wallpaper_', '</pre>', 'cover', 'choice-cancel', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', '8px', 'QCiiO', '餐饮美食', 'sprite-adjust-button', 'pCRKq', 'setItem', 'hFvWo', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '未知商品', 'setAttribute', 'friend-circle-edit-bind-user', 'white', 'snoop-app-refresh-btn', 'url(\x27', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', '”聊过天，关于：“', 'FCEFk', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', '》吗？', 'qxLca', '...', 'onupgradeneeded', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'covVS', 'customStickers', 'KuSdz', '保存播放器状态失败，真是没用。', 'activity_description', 'widget_badge', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'model', 'opacity', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'iOhqh', 'isGenerating', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', 'backgroundPosition', 'OOGne', 'href', '真是的，必需的祭品都还没准备好！', 'daily-expenses-list', ':streamGenerateContent?key=', 'world-book-list-container', 'DVBZL', 'BONpg', 'fRNrE', 'friend-circle-edit-name', 'hYIQz', 'ztPKl', 'RUYdu', '[用户发起了听歌邀请:\x20', 'choice-import-character', 'quote-message-button', 'narrator', '\x22\x20class=\x22post-image\x22></div>', '导入失败了，笨蛋:\x20', 'kkvhE', 'conversationHistory', '\x0a\x0a#\x20关于读者“', '最近的足迹', 'vJpZv', 'xPtXR', 'revokeObjectURL', '正在准备图片数据...', 'appIconPosition_app-user-profiles', 'delete-friend-circle-button', 'snoop-summary-textarea', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '.bubble-', 'fetch-models-button', 'getMinutes', 'fwSqi', 'cBAGW', '成功净化并迁移了\x20', 'json', 'GkCxx', '\x0a##\x20世界书条目:\x20', 'match', '歌曲ID', 'upload-card-button-2', 'sUWZv', 'eUsmw', 'WuOev', 'meeting-main-content', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'eDlgD', '群聊设置已保存！', 'tab-view-ledger', 'put', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'vvSci', 'JKYqu', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', 'parentElement', 'back-to-char-select-from-group-create', '\x22\x20吗？所有聊天记录将被永久删除。', 'is-entering-from-right', 'user-profile-edit-title', 'wRLHQ', 'VTUQs', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '正在翻阅所有档案...', 'TrmPV', 'wFGMw', 'getContext', 'listen-together-modal', 'warn', 'chat-image-input', 'user-name', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'eqyue', 'IqwYs', 'defaultPrevented', 'QAxVE', 'PuhJw', 'cancel-edit-button', '清空聊天记录失败。', 'music-share-card', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'values', 'chat-sticker-panel', 'add-event-modal', 'modal-cancel', '\x20记录)\x0a', 'NVkNJ', 'undefined', '已复制到剪贴板！', 'widgetBgImage', 'HawKp', 'HkjNu', 'tdRkl', '#ffcc66', '加载壁纸失败:', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'pLKsQ', 'sprite-slider-scale', 'NcMQU', 'hQVqW', '】的旧数据...', 'qgxvz', 'button', 'friendCircles', 'reset-widgets-position-button', 'activeMeetingScriptQueue', 'txERQ', '\x0a-\x20**对话状态**:\x20群里在', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '加载卡片图片失败', '<br>', '.char-info-wrapper', 'GCPeK', '未命名', '.choice-modal-backdrop', 'load-more-btn', 'cost', '无法解析旧的视奸内容来获取时间戳。', '吃你的饭', 'music-post', '转给\x20', 'JRMMf', 'ZweMm', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'padding', '正在打包“', 'UuoPZ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'userProfile', '字体已应用！(Font\x20Applied!)', 'categorizedExpenses', 'GhjhQ', 'toLocaleDateString', 'Uikbt', '</span>', '\x20说：“', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', 'GiQQU', 'music-feed-container', 'NiKRO', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'cWsjt', 'group-world-book-checkboxes', 'nwgyI', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', 'UWDXv', 'otzIh', '60%', '导出失败了，哼:\x20', 'path', '#\x20任务:\x20生成\x20', 'diary-input-wrapper', 'galgame-sprite-adjust-ui', 'cjJxM', '确定要清空群聊\x22', 'GgJVk', 'iQRmV', 'YRkaq', 'diary-write-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'items', 'left', 'zUTXJ', 'calendar-header-title', '加载角色\x20', '买新衣服', '字体保存失败了，哼:\x20', 'length', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'NBelM', '\x20/\x20', 'app-music', 'pzibG', 'AMcaH', 'number', 'main', '#ffb366', 'AKWiH', '#\x20发生错误：\x0a', 'Failed\x20to\x20plan\x20group\x20replies:', '\x22\x20中发现一张需要净化的图片...', 'transfer-recipient-select', '今天\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'CPGSj', '切，加载播放器状态的时候出错了。', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', '的日记本', '好友圈数据升级完成，迁移了\x20', 'diary-entries-container', '群聊至少需要2名成员。', 'accounting', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '总结失败:', 'active', '星期五', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'char-edit-offline-bg-input', '卡片已更换！', 'tpiTh', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'lOVdd', 'export-all-data-button', 'cancel-quote-button', 'oeoid', 'message-container', '人情红包', 'yqJhf', 'FKyUa', 'eventType', '<div\x20class=\x22snoop-avatar\x22>', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', '未知地点', 'worldBook', '（对话结束）', 'kind', 'XWwdP', 'ceil', 'RSDqa', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'last_message_preview', 'qTIBz', 'KarbO', '.no-action-modal', '\x20内容失败:', 'veHgY', '名字不能为空！', 'authorType', 'AI返回了无法解析的文本', 'rYbrB', '角色已保存！', '超激动我来了', '确定要删除角色“', 'elRvz', 'LCYcE', 'sprite-confirm-button', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'createObjectStore', 'lfOJY', 'IWzTE', 'themeLightness', 'XIJco', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', '最近没有互动记录。', 'YQDPo', 'transfer-amount-input', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'AI返回的不是一个数组。', 'meeting-reroll-button', 'readAsDataURL', 'footprints', 'appIconPosition_app-diary', '-\x20你点过一份外卖：“', 'upload-card-button', 'aborted', 'modal-ok', '.custom-multiselect', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'friend-circle-list-container', 'ODImI', 'avatar-wrapper\x20', 'tgnLR', 'eDeyy', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', '解析存档失败，正在重置:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'xoYjC', '大家正在赶来回复...', 'GpSDy', 'yMeEJ', '\x0a#\x20交换日记摘要\x20(你和\x20', '错误：找不到这首作为“信物”的歌。', '医疗健康', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'nmQGj', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'feed-loader', '9821VGPMLV', 'atEIT', 'option', 'jIrhu', 'mzblk', '-\x20你在“', '的个人专属世界观设定\x0a', 'objectStoreNames', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'world-book-editor-screen', 'appState', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'cMspN', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'music-library-container', 'YOOra', 'feed', 'snoopPhone', 'meetingViewMode', 'worldBookEditor', 'TMxHu', 'app-calendar', 'meeting-char-name-header', 'fqTkq', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', 'galgame-sprite-controls', 'JPCOq', '[发送了图片]', 'SMDoa', 'user-profile-screen', 'evnlX', 'customFeedWallpaper', 'chat-reroll-button', 'toggle-meeting-view-button', 'import-data-input', 'JYjDa', 'sprite-cancel-button', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', '已经生成了今日账单！想看就去“看账本”标签页。', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'KWhPC', 'clipboard', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'uDoQM', '请先输入\x20API\x20接口地址和密钥。', '解析音乐文件失败:', '正在搜索音乐...', '在“一起听”邀请中，净化封面失败:', 'displayedMessageCount', '[AI发送了表情：', 'BVpMn', '外卖订单', 'jbvxE', 'filter', 'rawResponse', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', 'ZCMRf', 'role', '编辑角色', '#meeting-view-screen\x20.chat-input-area', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'CLFuO', 'gallery', 'upload-widget-bg-button', 'NyacV', 'hePlX', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', '15px', 'no-action-modal', 'dwQAw', 'stretch', 'calendar-grid', '5px', 'iGnzT', '还没有我的回复可以重新生成哦。', 'wallpaper-input', '#diary-action-delete', 'lastTimestamp', 'OiynH', 'BKWbQ', 'Isano', 'message-bubble-row', 'style-', 'calendarEvents', 'KnSgV', 'ljJCH', 'Abqnl', 'touchmove', 'yRCHL', 'push', '\x20[并附上了一张图片]', 'googleapis.com', '#member-select-', 'char-edit-remark', 'cover_placeholder_', '在你那乱七八糟的文本里没找到“歌名”！', '很好哦', 'context-lines-per-chat', 'Eobwx', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'high', 'dxENb', '”已创建！', 'AqIjT', 'appIconPosition_', 'PRoAR', 'user-post-image-button', 'DgDOI', 'DCmTa', '-\x20**你们最后一次互动是在**:\x20', 'music-widget', '\x20条新动态。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'WQuhC', '卡片\x202\x20已移除。', 'ZwoVA', '点击选择\x20.jpg\x20或\x20.png', 'DaYxF', 'world-book-editor-title', 'atWts', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'nvbYx', '2px\x20dashed\x20var(--border-color)', 'mAxiV', 'chat-listen-together-button', 'lxThU', 'gNiyP', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', '甜蜜地和你聊天', 'provider', '-\x20你拍过一张照片，内容是：“', 'message-action-modal', '正在升级音乐卡片数据...', 'block', '[发送了表情]', 'numeric', '#ff8c66', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'YJwvA', 'create_event', 'toLowerCase', 'tLdvp', 'RWNIL', 'musicPlayerState', 'TBEmM', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'summary-textarea', '\x0a\x0a##\x20世界书条目:\x20', 'ToIoQ', 'PovLz', 'object', '弱小委屈但凶恶', 'BfGDG', '\x0a\x0a#\x20用户资料库\x0a', '\x0a\x0a#\x20今日消费流水\x0a', '错误：第一个好友圈\x20\x22', 'gemini', '编辑条目', 'result', 'CIXUT', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', '视奸内容解析失败:', 'JUMnR', '(想转账给“', 'vbHUJ', 'https://api.vkeys.cn/v2/music/', 'reply', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'posts', 'MdBlq', '<p\x20class=\x22music-post-thought\x22>', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', 'p[data-history-index]', 'upload-font-button', 'Mcazb', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'center', '\x20//\x20<--\x20哼，加在这里\x0a', 'dialogue', '你是一个乐于助人的AI助手。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '<img\x20id=\x22', 'bRjvH', 'musicWidgetPosition', 'className', 'POST', 'BBnXd', 'uKktU', 'meetingView', 'countdown-timer', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'HZKeX', '正在处理图片...', 'RcWCu', 'input[type=\x22checkbox\x22]', 'add-chat-button', '不高兴撒娇', '保存失败:\x20', 'editing-friend-circle-id', 'wdgxf', 'Ntmku', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', '错误：找不到此好友圈绑定的用户！', 'auto', 'ZaEYc', 'cardWidgetState', 'bdLvj', 'AI整理失败了，哼:\x20', 'hQJhn', 'wallpaper_main', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'isArray', 'is-entering-from-left', 'calendar-screen', 'YJniZ', 'abort', '这本日记本来就是空的，你还想清空什么？', '💜\x20', 'nFIvr', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'snoop-temp-style', 'ZRqTc', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'WAEAB', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', 'back-to-char-select-from-edit', 'chat_group_', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'some', 'data', 'replace', 'aSTSu', 'today-todo-list', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'parse', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'lyrics', 'catch', 'beforeend', '#\x20总结失败了，可能是记录太长或太复杂。', 'dMblQ', 'json_object', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', 'musicLibrary', 'checked', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'item_name', 'ucegt', 'gCriz', '\x22\x20class=\x22music-share-cover\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'back-to-chat-from-group-settings', '#99ff99', 'xwhEy', '请根据以上所有信息，开始分析并返回JSON。', '逗你开心', 'ShgZY', '等你消息', 'find', 'tcwwK', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', 'nlzal', 'msRgC', 'export-char-button', 'WKnoG', 'activeListenSession', 'UkdOX', '点击选择\x20.mp3\x20或\x20.flac', '星期四', 'home-screen', 'eGbka', 'diary-list-container', 'char_sprite_normal_', 'audio', 'mouseup', 'clock-color-toggle', 'innerHTML', 'originalExpenses', 'loading', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'ymNHg', 'chat-image-button', 'sFGhl', 'ZhbQE', 'global-player-play-pause-btn', '1140boGZQF', 'writeText', 'fdmTh', '”，但没找到人)', '和其他人的聊天', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'char-name-header', 'WGZiQ', '<div\x20class=\x22loader-spinner\x22></div><span>', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'noir-author-mark', 'netease', '检测到旧版存档，正在自动升级...', 'GbVmE', '\x0a```', '找不到要清空的聊天记录。', 'UWmlY', 'KoGxI', 'jomLJ', '--feed-bg-image', 'image/', 'AI未能返回有效的JSON对象。', '最近没有动态记录。', '档案已复制到剪贴板！', 'diaryList', 'diary-entry\x20', 'sprites', 'music-screen', 'dhGlu', '<div\x20class=\x22post-body\x22>', 'ViEGS', 'KvWDr', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'indexOf', '#friend-circle-member-selection\x20input:checked', 'kXvqK', 'diary-next-button', 'filled', 'BbwCE', '确定要删除这个好友圈吗？此操作不可撤销。', 'user', 'songId', 'IYtzy', 'OPbeO', 'EZNcu', 'date', '35%', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'select', 'SxDNO', 'startsWith', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'hBpoS', 'AqsTy', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', 'yteSR', '无描述', 'FGbpX', 'now', 'lejJM', '\x22\x20的聊天记录已清空。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'image/jpeg', '群聊「', 'gFNYj', '确定要彻底清空【', 'timeupdate', 'touches', '未知搜索', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', 'home-clock-container', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', '{userName}', 'flexDirection', 'data:image', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '交通出行', 'tdsrY', 'back-to-home-from-meeting-list', '正在打包数据，请稍候...', 'lTteh', 'show-chat-view', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '<div\x20id=\x22snoop-dock\x22></div>', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', '\x0a\x0a#\x20关于群聊参与者“', 'nlCcR', 'iQjfv', 'BGdHf', '加载更多聊天记录', '条目名称和内容都不能为空！', 'sprite-slider-y', 'KDBkx', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'playableUrl', 'zcNuz', '正在搬运旧卡片...', 'eventDate', 'ukoTW', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'import-char-input', '内容不能为空！', 'CkxrG', 'RJjcl', 'delete', '”，里面有\x20', 'app-wallpaper', '星期六', 'BpSBu', 'GRQvX', 'GyjPx', '#bubble-preview-ai', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'currentAbortController', 'back-to-home-from-circle-list', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'day-dot', '正在清空旧数据...', '这个也是摆设，别点了。', 'RnUVn', '\x0a\x20\x20相关记忆:\x0a', 'GrJXb', 'eYAGg', '加载立绘失败:', 'LWQVt', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'bwpvZ', 'LhgVY', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'preview-item', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'upload-wallpaper-button', 'bmhqX', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'chats', 'VumfA', 'translateX(-', '[DONE]', 'replaceAll', 'remove', '吃薯条', 'utterance', '.screen.active', '回复\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', 'Ayydb', 'GwJVH', 'RDpEv', 'tpNHV', 'sprite-slider-x', 'confirm-altar-upload-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', '28%', '分钟前', 'back-to-home-from-snoop-list', 'LVNDC', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'classList', 'JBMib', 'EkuUO', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'input', 'YIBLW', '总得说点什么吧？', 'message', 'height', 'is-visible', 'card-widget-2', 'execCommand', 'hcSkZ', 'result_page_content', 'sprite-reset-button', '复制失败了，哼。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'XfIcu', 'custom-icon-list-container', 'diary-page-', '#message-anchor', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'FkMvg', 'medium', '正在检查好友圈数据...', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'boundUserProfileId', 'LpXSr', '.app-icon', '\x20个模型。', 'groupChatCreate', 'statusText', 'likes', 'DOqDm', 'day-number', 'play', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'yohhk', 'nKAhU', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '10px\x200', 'firstChild', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'label', 'location_name', 'horizontal', '加载自定义表情包失败，真是没用。', '.json', 'User', 'musicPlaylist', 'uamVN', 'VbKWn', 'is-selected', 'readAsText', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'mrIKp', 'galgame-speaker', '<img\x20src=\x22', '”。\x0a', 'VLXgH', '正在准备音乐数据...', '\x20\x0a#\x20当前情景\x0a', 'url(', 'event-type-todo', 'signal', '新角色\x20', '编辑群成员功能正在开发中...', '9xExulX', '请输入有效的转账金额！', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'expanded', 'AzRNF', 'diary-modal-save', '---\x20音乐净化仪式完成\x20---', 'rmJMd', 'pWTgT', '.load-more-btn', 'app-chat', 'DCWkw', 'feed-bg-input', '事情好多', '位置已重置，正在刷新...', '-\x20姓名:\x20', 'XMRXI', 'bites', 'fontStyle', '编辑用户', 'zjLLi', 'wrXNs', 'localStorageData', '正在铭刻字体...', 'back-to-home-from-accounting', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'flex', 'true', 'ended', 'description', 'error', 'userProfiles', '455120kVNncM', 'DKFVR', 'borderBottom', 'back-to-library-from-altar', '获取模型失败:\x20', 'Akivn', 'NbgoO', 'decorative-badge', '好像有动态了...', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'touchcancel', 'zWvoE', 'meetingList', 'cWPmx', '\x0a-\x20**当前时间**:\x20', 'closest', 'apiSettings', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'kHzZk', 'GUwwP', 'FIubT', '_NoirCard.json', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'AI返回的原始文本:', 'userAvatarFrameUrl', 'quote-preview-text', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'lrwnW', 'character-item', 'event_', 'xKXgI', 'clientX', 'widget-prev-btn', 'WlZvN', 'upload-feed-bg-button', '成功向好友圈\x20\x22', '编辑好友圈', 'activeFriendCircleId', 'download', 'diary-get-reply-button', 'SkDeo', 'char-edit-wallpaper-preview', 'Mkmhr', '我正在说话呢，别打岔！', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'xZASR', 'Tnalo', '\x20张旧的动态图片。', 'lt-ui-song-artist', 'html-module-container', 'ZvxTp', 'hoXVX', 'HLIAH', '找不到角色。', 'add-expense-button', '未知歌曲', 'yZrOn', '#diary-action-reroll', 'diary-send-button', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'shiftKey', '<div', '委屈那我歇了', 'important', '\x20的图片失败:', 'ZJqpx', 'character-edit-title', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'normal', 'galgame-sprite-container', 'snoop-list-screen', 'vcPFY', 'customIcon_', '未知餐厅', 'trim', 'Ksxxj', 'toDateString', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'music_cover_', 'anevs', '哼，就按你说的办好了。', 'group-clear-history', '错误：找不到角色', 'app-snoop', 'dpCkU', 'arNFe', 'image', 'bVvyQ', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', 'WSHEL', '兼容模式成功，已将\x20', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'isActive', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', 'transfer-modal', 'nfZOQ', 'nmjMC', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'IroeU', '-\x20**你与', '哼，这不是图片，你想让我压缩什么？', 'thought', 'nzlJJ', 'VKjut', 'RuuVD', 'editing-world-book-id', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'delete-user-profile-button', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'input[name=\x22event-type\x22]:checked', 'listen-together-ui', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '正在翻阅全部历史记录...', '获取AI响应失败:', 'accounting-content-area', 'gHDeF', 'snoopList', 'image/png', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'abyss', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'XDaNM', 'meeting-list-screen', 'sender', 'UvXDK', 'iRees', 'activeChatId', '星期日', 'wvMUR', '\x20的旧格式数据翻译。', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'aThNV', 'create-group-chat-button', 'coverId', 'currentDate', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', '\x20账单', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'var(--text-color)', 'accountingLedger', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'activeUserProfileId', 'zusWO', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'pxWVq', '[表情]', 'openai', 'rPAwR', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'sort', 'input[type=\x22checkbox\x22]:checked', 'contact_name', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'toLocaleTimeString', 'save-group-settings-button', 'transfer-backdrop', 'getDay', '正在写入新数据...', 'querySelector', 'memberCharacterIds', '快点哄我', 'lxAJG', 'music-input-song', 'JQbCX', '设置已保存！', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'teHQy', 'snoop_cache', 'jCWrO', 'Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。', '.diary-entry', 'azjHw', 'nAyvH', '包含所有图片和音乐的全量数据已成功导出！', 'http', 'api-provider', '已送达', 'TvvPy', 'jSQvq', '选择聊天', 'jInql', 'galgame', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'touchstart', 'dbsNs', 'blob', 'Gemini\x20stream\x20reading\x20aborted.', 'qoswA', 'group-bg-preview', '\x20个成员', 'DOMContentLoaded', 'snoop-phone-header', '.listen-together-accept-btn', '#d1d5db', 'JIQDh', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'line', 'OezcZ', 'app-world-book', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'ZyLjk', 'src', 'rRRpi', 'activeDiaryCharacterId', '.music-post-song-card', 'akEGt', 'TDkIi', 'onsuccess', 'clientY', 'snoop-character-list-container', 'app-user-profiles', 'LRHUR', 'http://www.w3.org/2000/svg', '-\x20你曾经搜索过：“', '徽章已移除。', 'CsVPx', 'group-avatar-input', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'noir_data_migration_v1_complete', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'textShadow', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'doNLw', '确定要恢复默认字体吗？', 'user-post-textarea', '净化音乐封面时出错，真是的。', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', 'MPBXd', 'LEuol', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'friend-circle-title', 'save-edit-button', '-\x20**对话状态提示**:\x20你们已经有\x20', ':\x22\x20或\x22[', '请根据以上所有规则，生成\x20', 'WaOwj', 'query', 'ihIzL', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', 'RoJdc', 'toast', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'events', 'diary-entry-input', 'KgocW', 'lBnju', 'char-edit-sprite-', 'linkedWorldBookIds', '图片处理失败:\x20', 'setHours', 'contactName', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'NEyty', 'createElement', 'summary', 'accounting-screen', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', 'anthropic', 'end', 'default', '角色“', 'findIndex', '加载徽章图片失败', 'whispers', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'iYbVA', '别这样嘛我哭哭', 'qCKjN', 'change', '（开始一段新的对话...）', 'reduce', '\x20到\x20', 'mHYwN', '对方正在输入...', 'JjqSo', 'music-library-screen', 'back-to-world-book-list', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', '准备调用\x20generateAs...', '11wDfupb', 'rPaMQ', 'wallpaper', 'IaYAV', '.listen-together-card', 'aVpwY', 'live-preview-style', 'backgroundSize', '未命名群聊', 'array', 'getMonth', '我是垃圾', 'YBxZP', 'SpBfr', 'isAnimatingDiary', '喝多了', 'EUemR', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', '已恢复默认。', 'Claude\x20API\x20错误:\x20', '请在动态或聊天中播放', 'mousedown', 'JNCBe', 'Escape', '服务器错误:\x20', 'char_offline_bg_', '\x0a-\x20**对话状态**:\x20群里已经有', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'world-book-edit-content', '好友圈已保存！', 'group_avatar_', 'snoop-home-clock', 'KpRrG', 'log', 'group-settings-name', 'read', 'ZNZiM', 'back-to-home-from-diary-list', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', '很期待', '错误:\x20', '在所有地方的最后一次互动是在**:\x20', 'important-day-item', 'smooth', '一个人可怜吃饭', '[AI返回了无法解析的剧本:\x20', 'bzurB', '59%', 'from', 'PWiiY', 'sticker', 'onclick', '--primary-hue', '--custom-font-family', 'OazeQ', 'bubbleCss', '点击选择\x20info.txt', '”...', 'add-event-modal-title', 'wBMjz', 'cursor', '动态已清空。', '</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'onloadend', 'RGxVr', '.message.ai', '\x0a\x0a#\x20关于对话者“', 'getDate', 'gjGuF', '\x0a-\x20**日记本的上一笔记录是在**:\x20', 'test_post_', 'CEgkK', '[AI向\x20', 'JAyuP', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'user-profile-list-screen', 'absolute', 'meeting-scene-view', 'njYwb', '请求AI更新:\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'char-edit-bind-user', 'sender_id', 'musicUploadAltar', '切换聊天时发生异步错误:', 'XLIti', 'endsWith', '近期没有特别安排', 'gXbqM', 'aacsQ', '50%', 'appIconPosition_app-world-book', 'NoirCharacterCard', 'GOYEd', 'generationConfig', '#group-settings-screen\x20.select-box', 'Qdzys', 'widget-play-pause-btn', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'jeCRq', 'Assistant', 'NDece', '\x20张旧封面。应用即将刷新。', 'touchend', '检测到已保存的字体，正在应用...', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'characterEdit', 'mdeyr', 'Creating\x20object\x20store:\x20music_library', '动态页背景已移除。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'emotion', '#group-settings-screen\x20.selected-options-text', 'toISOString', 'setProperty', 'removeItem', '449728KSqskW', 'wzkHb', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'none', 'IeBmz', '创建新角色', 'author', 'split', 'input:checked', 'GOxjh', 'textContent', '#diary-action-cancel', 'iemxA', 'VuKfN', 'onload', '--widget-cover-image', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'scrollTop', 'add', '浏览器', 'GlWwu', 'meeting-message-input', 'diaryCurrentPage', 'chat_', '-input', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', 'JBwZR', 'LVwOx', '0\x201px\x203px\x20rgba(0,0,0,0.6)', '星期三', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', '的第一次互动。\x0a', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'img', 'custom_font_ttf', '保存角色失败:', 'gBUCs', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'SwSDg', 'app-diary', 'WWLMr', '保存失败，你的表情包是不是太多了？', 'UwRXN', 'wvjbO', 'summarize-modal', 'customWallpaper', 'value', 'oSWDD', '在准备群聊API数据时，读取图片失败:', '.lt-end-session-btn', 'oaxLZ', 'snoop-log-back-btn', 'typing-indicator', 'iDcaV', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', 'ESxpY', '欢迎！请先创建一个角色开始聊天。', 'XfUxN', '至少要保留一个用户。', 'chat-sticker-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'music-upload-altar-screen', '\x0a-\x20你正在为一个名为“', 'wAxvW', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', '-\x20[', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', 'span', 'FKSzr', 'JlxXR', '\x20-\x20', '需要至少2个角色才能创建群聊。', 'mPgxo', '你的任务是【首次生成】这个应用的内容。', 'CziCE', 'body', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', '-\x20[动态]\x20', 'input_', 'JfWxW', 'full', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'DyhYk', '加载视奸记忆失败\x20(', 'character-edit-screen', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', '确定要从圣殿中永久删除《', '[图片]', 'images', 'aLNKl', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'ozpUw', 'amount', 'xABqU', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', '小组件背景已恢复默认。', 'EwDov', 'pIiCu', 'yxvtr', 'name', 'hUCNY', 'category', 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg', 'BzHLi', '歌名和歌手都不能为空！', 'has', 'uZAyY', '你是一个乐于助人的助手。', '无法保存聊天记录。', 'right', 'gap', '4169608eFVeTu', 'paused', '恢复失败了:\x20', '\x20|\x20', 'viewBox', 'getHours', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'chatHistory_', '-\x20**当前精确时间**:\x20', 'oXFIo', 'AHWSf', 'event-content-input', '创建新用户', '/v1beta/models/', '\x0a##\x20', 'lnaxD', 'lyrics-file-input', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'lt-ui-close-btn', 'floor', 'max', 'diaries', 'lt-ui-lyrics-container', 'authorId', '距离「', 'substring', 'appIconPosition_app-settings', 'NiCrj', '---\x20开始AI回复流程\x20---', 'avatar', '15%', '\x0a#\x20关于你\x20(', '小时前聊过，可以适当问候，不要直接继续之前的话题。', '#snoop-app-view-container\x20.snoop-app-content', '购物消费', 'string', '世界书条目已保存！', 'SxCLk', 'BJTii', '”的补充信息\x0a', 'rgba(255,255,255,0.2)', 'expense-item', 'NdxHQ', '#group-world-book-checkboxes\x20input:checked', '用户分享音乐失败:', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'GhQVM', '群聊\x22', '<div\x20class=\x22post-likes\x22>', 'ocEPp', 'zsZnv', 'kOcJv', '加载已保存字体失败:', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'app-settings', 'yOWlJ', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'badge-input', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a', '全量导出失败:', 'addTestPost', '.snoop-chat-item', 'XReSn', 'post_image_', 'anthropic.com', '1em', 'rHzVV', 'modal-text', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'SJzXg', '[用户分享了音乐：', 'wIbKY', 'ejulu', '\x20(ID:\x20', '暂无音乐', '\x20条动态...', 'card-input-2', 'forEach', 'suXxc', '\x22\x20src=\x22', 'YHazd', '-preview', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', '\x0a-\x20当前精确时间:\x20', '确定要重新记录吗？当前的账单会被删除。', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'position', '正在连接同步频道...', 'EYDOE', 'removeChild', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'uxPXj', 'is-exiting-right', '\x20时出错:', 'JUKLW', 'NoirCustomFont', 'stopPropagation', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', '#66b3ff', 'settings', '\x22\x20的聊天记录吗？此操作不可撤销。', 'HdLXG', 'diaryView', '群聊名称不能为空！', 'gjTYG', 'yRRzK', 'hVhPR', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', 'activeMeetingCharId', '被萌到', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'translate(-50%,\x20-100%)', 'coverUrl', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', 'url', 'JOjoa', 'BgmWZ', 'forceWhiteClock', 'diary-list-screen', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'abjBT', '#\x20固定分类列表\x0a[', 'uXltA', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'upload-badge-button', 'yPuEA', '加载聊天失败:\x20', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'aeeif', 'cSidf', 'paddingBottom', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', '\x20行格式不对，被我无视了。', 'user-avatar-input', 'parts', 'eventContent', 'snoop-app-view-container', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'isPlaying', 'UlWFZ', 'SJBFa', 'preventDefault', 'licst', 'TNUWf', '10px\x20auto', 'uEIZN', '群聊\x20(', 'member-selection-item', 'reverse', 'post-img-', '书记官正在奋笔疾书...', 'is-playing', 'kSCHS', 'ZGXVU', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'meeting-list-container', 'appIconPosition_app-music-library', 'scSlo', 'listen-together-backdrop', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', 'bIhpN', 'pIWuM', 'whWOe', 'info', 'world-book-screen', 'api-model', 'music_library', 'fragments', 'back-to-home-from-world-book', 'organize-button-container', 'ITaPA', 'PrYuJ', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'test', 'save-world-book-button', 'back-to-home-from-chat', 'snoop_', 'eQyJC', '好了，请基于以上所有信息，开始写今天的日记吧。', 'listen-together-invite', 'Ksmqx', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', 'iHaez', '\x22>&times;</button></div>', 'shy', 'response', 'FWuUb', '\x20写道:\x20', 'ilwpQ', '.snoop-clear-btn', 'T00:00:00', 'IeXnU', 'canvas', 'widget-next-btn', '音乐搜索失败:\x20', 'user-post-avatar', 'IndexedDB\x20failed\x20to\x20open', '刷新了\x20', '未知角色', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'Fecbo', 'iezWw', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', 'scrollIntoView', 'jczVJ', 'timestamp', 'user-avatar-preview', 'char-edit-name', 'reload', 'home', 'ZdOPk', '数据导入成功！应用即将刷新...', 'LhtYx', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'oZRNp', 'appIconPosition_app-wallpaper', 'bZzXF', '</span><div><div\x20class=\x22description\x22>', 'upload-music-button', 'QvcDs', '-\x20你最近去过：“', 'avatar-frame', 'getAll', 'hiQhf', 'chat-message-input', 'gWIwb', 'calendar-day', '原始文本:', 'transfer', '小组件背景已更换！', 'getElementById', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'version', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'emoji', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'isOffline', 'JaCrh', '大家好像不知道该怎么回复...', '568GqEFJb', '获取中…', 'ucAmK', 'accountingData', 'world-book-checkboxes-container', 'user-post-image-input', 'phone-container', 'indexedDBData', '已选择\x20', 'diaryPressTimer', 'api-key', 'clockPosition', '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a', 'back-to-circle-list-from-feed', '#f2b7c6', '哼，你这字体文件有问题，用不了。', '你还没保存这个角色呢，导什么导？', 'fVRvQ', 'listenTogetherSession', 'speaker', 'then', 'participantIds', 'clear', 'ePDdf', 'global-player-next-btn', 'removeEventListener', 'documentElement', 'diary-action-modal-', '确定要清空好友圈“', 'wtMAf', 'noir_migration_fc_v1_complete', '哼，正在净化你那些被污染的好友圈动态...', 'njNVo', 'tQIqQ', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'happy', 'xngXS', 'scrollHeight', '<span\x20class=\x22description\x22>', 'card-input', 'TTBmX', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'canplaythrough', 'lLAXv', 'appendChild', 'setDate', 'add-world-book-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'ORoNY', 'tUJJp', 'transform', 'add-choice-backdrop', ')，已跳过。这不应该发生，数据库可能已损坏。', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'add-friend-circle-button', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', '确定要删除群聊“', 'vVYar', 'Lqlwz', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'disabled', 'nzyCS', '分钟前聊过，请注意衔接。', '导入角色卡失败:', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'friend-circle-edit-screen', 'mrgPz', 'omidH', 'IeAKn', 'TyfEr', 'group-bg-input', 'BokXM', 'Detected\x20API\x20provider:\x20', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'claude', 'atdIB', '2-digit', 'head', 'DlOzb', '好友圈净化完成，正在重新存档...', 'sticker-item', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'aFLMM', 'is-today', 'group-chat-member-list', 'oYAXk', 'backgroundImage', 'save-char-button', '未知商店', 'snoop-dock', 'group-avatar-preview', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', 'getItem', 'OMBML', 'BhLIx', 'wLnZG', 'Gemini\x20API\x20Error:\x20', 'kFSAp', '\x20之间的私密内容)\x0a', '执行好友圈数据净化...', 'FunuO', 'NTMkx', 'insertBefore', '#char-edit-avatar-preview\x20+\x20.avatar-frame', 'KUbFv', 'YcOJf', '##\x20', 'OckCW', 'EvvkV', 'YnIUg', 'store_name', 'aPeXG', 'assistant', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', '718569NuODSd', '加载见面背景失败\x20for\x20', 'VJFhY', 'organize-bill-button', 'content', 'objectStore', '.remove-attachment-btn', 'plEBc', 'VBDJP', 'jyeFF', 'recipientId', 'imageId', 'next-month-btn', '无法从\x20IndexedDB\x20加载聊天图片:', 'altar-slot-lyrics', 'music_cover_migrated_', 'createObjectURL', 'jjgJm', '[sticker:', 'choice-create-group', 'system', '.listen-together-song', '<span>', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'history', 'import-all-data-button', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'cos', 'BgAHv', 'show', 'JCeJw', 'theme-lightness-slider', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'cTkEm', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'data:', '?id=', '解析AI剧本JSON失败:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'transfer-recipient-group', '[AI分享了音乐：', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'xekMB', 'MiISO', 'sin', ':</span>\x20', '.message.user', '默认米白', 'TgrHr', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', '-\x20你的备忘录里有一条叫“', 'lXSdI', 'abs', '加载\x20', 'OvrLy', 'Ivuzs', '赞同！渲染效果一级棒！', 'getReader', 'dock', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', 'userId', 'DhUxf', 'JFkvd', '正在解析备份文件...', 'lastIndexOf', '-\x20**状态提示**:\x20这是你和', '说了是摆设啦，笨蛋。', '--primary-lightness', 'readwrite', 'altar-slot-info', '#a4c2f4', 'display', 'chat_image_migrated_', 'bRlqd', 'wHxKm', 'character-settings-button', 'oPBHu', '&quot;', '300%', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'ywlaR', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'querySelectorAll', '今天一笔账都没有，我整理什么？', ';\x22>', 'meeting-view-screen', 'marginBottom', 'get', '.typing-indicator', 'home-dock', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'keys', 'random', 'xNomy', '刷我的卡', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'musicId', 'pause', '啥意思捏', 'RVCvs', '”买过：“', '生成动态失败:', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', 'WfRqk', '#FFFFFF', 'scale', 'JLcCV', 'transaction', 'GtRPz', 'NkdGr', 'gyymy', 'image_url', 'groupSettings', 'LehzC', '同步已断开。', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', '好友圈名称不能为空！', '已恢复默认字体。', '--\x20点击选择\x20--', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20转账\x20', 'yPAba', 'contains', 'altar-slot-audio', 'badge-image', '\x0a-\x20人设:\x20', 'pkYhz', 'all', 'QSREH', 'FNxPh', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', '用户操作中断了\x20AI\x20响应。', 'form-button\x20load-more-btn', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'chat-view-pane', 'chatWallpaper', 'DuGme', 'maEwB', 'PhOUG', 'reset-widget-bg-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'New\x20request\x20started', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'bbeyB', 'QwTrB', '你还没有写日记。', 'friend-circle-edit-title', 'brZfi', 'galgame-view-container', 'jewxP', 'delete-message-button', 'Mmznc', '购物记录', '100%', 'SWoVB', 'FcWbd', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', 'save-event-button', 'HEttC', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', '文件格式不正确，不是一个有效的备份文件。', 'inline-block', 'chat-summarize-button', 'PRmeN', '71%', 'swYRd', 'oiUjv', 'GRXub', '<span\x20class=\x22', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'avatarFrameUrl', 'JTsDt', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'yiDji', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'quoted-content', '聊天档案柜是空的，无需净化。', 'post_user_', '&alt=sse', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'YAML翻译机也无法理解这段梦话。', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'lt-ui-song-title', '音乐数据升级完成，迁移了\x20', '\x0a\x0a#\x20', '</span><span\x20class=\x22amount\x22>总计:\x20', 'GoTvz', 'fDNRz', 'last_edited', 'speaker-user', 'HbBGO', 'userProfileList', 'user_', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', 'Smnuw', 'zh-CN', '#a7c7e7', 'quoted-message-in-bubble', 'setMonth', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'shift', '天没动静了。你的角色们应该发起新的问候或话题。', 'galgame-text', 'Novee', 'yWxBC', 'YsoZj', 'sMkOg', 'pDgjw', 'sEsQt', 'char-edit-wallpaper-input', 'background', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'group-delete-button', 'group', '\x20\x20-\x20角色ID:\x20', '无法保存状态，浏览器可能禁用了存储功能。', 'kuHBE', 'stringify', 'EyniM', 'friend-circle-list-screen', 'MlTYF', '生活服务', 'geOKj', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'persona', 'OZyNR', '我错了', 'style', 'min', 'save-user-profile-button', 'group_bg_', '成功获取\x20', 'onerror', 'createElementNS', 'screenX', 'files', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'ionJF', 'snoop-phone-screen', 'status', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'widget_card', '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a', 'expense-description', 'group-settings-bind-user', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', 'review', 'pending-post-image-preview', '3678230IqZbcy', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 're-record-button', 'chat-music-button', 'noir-custom-font-style', '错误：找不到签署契约的地方。', 'NjhUc', 'characterName', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'set-active-user-button', 'frkPO', 'group-edit-members', 'edit-clear-history-button', 'ymnuW', '新用户\x20', 'galgame-time', 'eKqdD', 'lDjnt', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'AbortError', 'title', 'uMfsi', 'chat-screen', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'accounting-title', 'weNoa', '未找到可用模型。', '咱俩天下第一好', 'time', 'quote-preview-area', '星期二', 'DusGv', '确定要删除群聊\x22', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', 'dOlHA', 'cWByC', 'XqubQ', 'JCSVo', 'Bearer\x20', '错误：你还没有创建任何好友圈。请先在App内创建一个。', 'column', 'cancel', 'toFixed', 'kzbVi', 'click', 'ZBvNE', '\x22>\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '哼，正在净化你那些超重的音乐分享记录...', 'editing-user-id', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', 'Unknown', '\x20.app-icon-img', 'znvKY', 'HmeOX', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', '（正在构思中...）', 'friendCircleList', '确定要删除这个条目吗？此操作不可撤销。', '.diary-delete-btn', '的转账', 'bogdD', 'save-custom-stickers-button', '\x0a\x20\x20\x20\x20姓名:\x20', 'oBbpN', 'snoop-app-container', 'diary-modal-textarea', '】的日记本已被清空。', 'changedTouches', 'tOVWu', 'pTqjR', 'app-music-library', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', '.page-dot', '导出角色卡失败:', 'group-delete', '上传失败了，笨蛋！\x20', 'target', 'lyric-line-', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'VcghS', 'zpRoC', 'long', 'post_', 'KGCyp', 'gHLMR', 'zIJSa', 'Fetch\x20request\x20was\x20aborted.', 'VBbZn', '确定要恢复这个角色的默认立绘位置吗？', '</div></div></div>', 'VQXAg', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', '\x20添加...', 'mouseleave', 'focus', 'displayUrl', '\x20的私聊', '\x22\x20data-id=\x22', 'header-actions', 'diary-page', '</div>', 'sad', '”的笔记，内容是：“', '保存壁纸失败:', '已自动断开与其他人的听歌同步。', 'back-to-chat-list', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', 'characters', '至少要选择一个圈内成员！', '29%', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'SPhTZ', 'ZFIBh', 'Gatyk', 'back-to-snoop-list-from-phone', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'characterLastScripts', 'JhGQr', 'rgba(0,\x200,\x200,\x200.4)', 'visible', 'cardState2', 'charId', '请根据以上所有规则和资料，开始生成内容。', '好的，我记住了这些人设和历史。现在我们开始对话。', 'rFsNW', 'qLUcI', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'pvaVg', 'CoHWT', 'top', '图片预览失败:\x20', '”已成功导入！', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'PIIDk', 'ULvVC', 'wb_', '确定要删除这篇日记吗？此操作不可撤销。', ',\x20ID:\x20', 'insertAdjacentHTML', '加载第二个卡片图片失败', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', 'wants', '.slot-filename', 'WTRIH', 'Nairh', 'nSuJx', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'categorized-expenses-list', 'getSelection', 'Enter', 'VWUzC', 'Creating\x20object\x20store:\x20', 'char_avatar_', 'restaurant_name', 'currentlyPlayingIndex', '动态中的音乐搜索失败:', '好友圈档案柜是空的，无需净化。', 'htgUF', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '在准备API数据时，从IndexedDB读取图片失败:', 'meeting-send-button', 'SiGOH', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', 'ePtOH', 'color', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', 'music', 'music-widget-card', 'preferences', 'snoop-phone-top-nav', '群聊音乐搜索失败\x20(', 'total_cost', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'llpwa', '对方正在行动中...', 'pop', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'JPEMs', 'user-post-attachment-preview', 'WSTzD', '字体应用失败:', '”，在那里“', 'WMtJf', '未命名角色', 'diEKI', 'NhrSo', 'vatVR', '2023-06-01', '正在为你搬运旧壁纸到新仓库...', 'friendCircleEdit', 'ZCUyb', 'cBmdS', ']\x20[sticker:', 'world-book-edit-name', 'home-date', 'exec', 'WSACH', 'music-input-modal', 'VSgQw', 'char_sprite_', '这不是一张有效的Noir角色卡。', 'reset-badge-button', 'entries', ')，启动兼容模式...', '20%', 'kAYLW', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', '点击选择\x20.lrc', '#c299ff', 'HvBtH', 'readonly', 'IkTol', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'Zdflw', 'margin', 'api-endpoint', 'trGOL', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '我不想工作', '纪念日', 'audio-player', 'User\x20cancelled', '15px\x2020px', 'borderRadius', 'nySYt', '正在生成中，请稍候...', 'group-edit-name', 'reset-desktop-button', 'snoop-home-date', 'fbKWw', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', 'Upgrading\x20database\x20to\x20version\x20', '<p>格式错误</p>', 'oAAkU', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'EawGu', 'fgRYR', '好友圈已删除。', 'appIconPosition_app-snoop', 'concat', 'summarize-backdrop', 'PSitY', '壁纸已更换！', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', '确定要清空\x22', 'ogaSI', 'newAvatar', 'char-edit-css', 'character-list', 'Ifwea', '.ttf', 'clear-feed-button', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '樱花薄粉', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', 'group-options-modal', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'syWqi', 'rirdu', 'world-book-item', '\x20(分享了歌曲:\x20', 'user-persona', 'MmKOG', '图片加载失败', 'pendingPostAttachments', 'user-avatar-frame-url-in-chat', 'area', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'cancel-action-button', '星期一', 'mAAXb', 'angry', 'MicFp', 'endpoint', 'characterId', 'save-api-settings-button', '.selected-options-text', 'novel', 'diary-char-name-header', '”吗？此操作不可撤销。', '测试动态已添加！', 'snoop-app-icon', '当前聊天', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', 'pFOIJ', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'outerHTML', '保存徽章状态失败', 'SDBwt', '有点无语', '</div>\x0a\x20\x20\x20\x20', 'char-edit-offline-bg-preview', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'splice', '没有找到相关结果。', 'apply', 'themeHue', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'gxKtK', '歌曲“', 'FQYru', 'TQtxl', 'todo-item-small', 'postType', 'WobLP', 'back-to-home-from-user-list', '0\x200\x20', '</svg>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'short', 'QsDAn', 'lt-ui-cover-art', '小时前），可以简单问候一下对方现在的状态。\x0a', 'svg', 'widget_card_2', '\x0a\x0aINPUT:\x0a', 'map', 'app-meeting', 'children', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'NYJhh', 'MXtau', 'OtHBU', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', '[用户发送了表情：', 'song_', '无语但是随便吧', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '90fXpwKq', 'slice', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x20\x20具体对话如下：\x0a', 'fZYfW', '{charName}', 'SrKfD', 'nBWrF', '正在构思中，请稍候...', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'remark', 'hTQqy', 'sIHOO', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'pointer', 'diary-write-modal', 'accepted', 'char_', '出去玩', 'XMCNX', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', 'lhZXp', 'VvJCx', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x20(当前)', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'charAt', '正在为你切换新的歌曲...', 'backgroundColor', '已设为当前用户！', 'quotedMessage', 'div', 'back-to-home-from-wallpaper', 'diary-prev-button', '昨天\x20', 'expense-amount', 'LRVUk', '导入失败:\x20', 'edit-message-backdrop', 'width', 'spriteTransform', 'getFullYear', 'brWZl', 'QKvQB', 'UlXop', 'Maxsq', 'sTbGv', 'senderId', '用户资料已保存！', 'Zkchf', 'choice-create-character', 'sticker-content', 'event_ai_', 'CNWJs', 'vertical', 'toLocaleString', 'galgame-sprite', 'RzCzo', '.message-container', '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a', '生成动态时发生错误:\x20', '来源：[最活跃]', '处理\x20', '全量导入失败:', 'translateX(-50%)', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'copy', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'dataset', 'irGuC', 'BZeAY', 'yjzPs', 'MUaIW', '已删除。', 'is-exiting-left', '缓存命中:\x20', 'addEventListener', 'aRfOa', '#\x20记录是空的，没什么好总结的。', 'SJJvX', 'modal-mask', 'HeeFz', 'LqQRA', '未知艺术家', 'italic', 'comments', 'alt', 'music-input-artist', 'private', 'key', 'gUCcZ', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', '#app-dock-bottom-left\x20#', ']\x20[image]', 'back-to-circle-list-from-edit', 'widget-bg-input', '[用户向\x20', '群聊已解散。', 'ZjGJs', '34%', 'pSVvA', 'card-widget', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'chat-messages', 'char-edit-avatar-input', 'card-image-2', 'isFinite', '.widget-info\x20>\x20div', 'LKVQo', 'nrTrw', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'GJOKM', 'ldNJe', '谁啊我吗', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', '备忘录', 'LSiGT', 'gXiUz', 'indexedDBMusicData', 'toString', 'character', 'widget-title', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'card-image', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'settings-screen', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', 'AJCAS', 'isFromLibrary', 'jpNom', '我是小丑呜呜', 'flatMap', 'BWclS', 'wZAqK', 'oncomplete', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'cover-file-input', 'worldBooks', 'application/json', 'songName', 'toDataURL', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'badgeState', 'add-event-fab', '委屈哭', 'border', 'PtMpx', 'mIrao', '来源：', 'RXVeU', 'snoop-char-name-header', 'cancel-transfer-button', 'offline-scene-view', '执行音乐封面数据净化...', 'text', 'dlkhY', 'eQVCp', 'back-to-meeting-list', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'bottom', '歌曲名称', 'includes', 'vCXiG', 'TFbKD', 'AI返回了无法识别的数据格式。', ']:\x20', 'reset-feed-bg-button', '日记已删除。', 'dtvQn', 'gxOfZ', 'BVYZR']; _0x44b9 = function () { return _0x3204e9; }; return _0x44b9(); } function _0x2de61d(_0x3cd0ce) { const _0x3a895b = _0x1654f8; try { if (_0x3a895b(0x8b9) === _0x3a895b(0x228)) _0x28119c[_0x3a895b(0x32b)][_0x3a895b(0x318)](_0x3a895b(0x716)), _0x3afab2 = null; else { const _0x19e1b1 = localStorage[_0x3a895b(0x6e3)](_0x3a895b(0x59c) + _0x3cd0ce), _0x5d34b0 = JSON['parse'](_0x19e1b1 || '[]'); return Array[_0x3a895b(0x241)](_0x5d34b0) ? _0x5d34b0 : []; } } catch { return []; } } function _0x91c93b(_0x2d9bfa) { const _0x2fc5ca = _0x1654f8, _0xd91a7c = Math[_0x2fc5ca(0x5a9)](0x1, Number(_0x57ec14[_0x2fc5ca(0x8a1)]?.[_0x2fc5ca(0xa33)] ?? 0x64)), _0x5b0b5e = _0x57ec14[_0x2fc5ca(0x313)][_0x2fc5ca(0x1a0)](_0x2e8588 => _0x2e8588[_0x2fc5ca(0x69c)]['includes'](_0x2d9bfa)), _0x5e3de0 = _0x5b0b5e['map'](_0xbe4135 => { const _0x522ffc = _0x2fc5ca; if ('tKsXY' === 'RJgzA') { if (_0xc8be8b[_0x522ffc(0xa1e)] === _0x522ffc(0x44d)) _0x4c9b9c[_0x522ffc(0x624)](); _0x55d992(_0x13ca9d(_0x7b02be, 0xa), _0x1defa2); } else { const _0x11d33f = _0x2de61d(_0xbe4135['id']), _0x20364d = _0x11d33f[_0x522ffc(0xb1e)] > 0x0 ? _0x11d33f[_0x11d33f[_0x522ffc(0xb1e)] - 0x1] : null; return { 'chat': _0xbe4135, 'history': _0x11d33f, 'lastTimestamp': _0x20364d ? _0x20364d[_0x522ffc(0x665)] : 0x0 }; } })[_0x2fc5ca(0x1a0)](_0x430b01 => _0x430b01[_0x2fc5ca(0x711)][_0x2fc5ca(0xb1e)] > 0x0); _0x5e3de0[_0x2fc5ca(0x42a)]((_0xe97d5e, _0x5b5426) => _0x5b5426[_0x2fc5ca(0x1b9)] - _0xe97d5e[_0x2fc5ca(0x1b9)]); const _0x5a86ef = [], _0x50d534 = {}; return _0x5e3de0[_0x2fc5ca(0x5e2)]((_0x1440ac, _0x552896) => { const _0x2e2c2d = _0x2fc5ca; if ('zWvoE' === _0x2e2c2d(0x39d)) { const _0x16498e = _0x20beac(_0x1440ac[_0x2e2c2d(0xa06)], _0x1440ac[_0x2e2c2d(0x711)], _0xd91a7c); if (_0x16498e[_0x2e2c2d(0xb1e)] === 0x0) return; const _0x4651b7 = _0x552896 === 0x0 ? _0x2e2c2d(0x980) : _0x2e2c2d(0x9d8); _0x5a86ef[_0x2e2c2d(0x1c5)](_0x2e2c2d(0x6f1) + _0x4651b7 + _0x381762(_0x1440ac[_0x2e2c2d(0xa06)]) + '\x0a' + _0x16498e[_0x2e2c2d(0x9f9)]('\x0a')), _0x50d534[_0x1440ac[_0x2e2c2d(0xa06)]['id']] = _0x16498e['length']; } else { const _0x2725d8 = _0x42565a[_0x2e2c2d(0x703)] === _0x4a8021(_0x44d748[_0x2e2c2d(0x413)])['id'] ? _0x1d48bf(_0x289489[_0x2e2c2d(0x413)]) : _0x4eef7e(_0x82cca4[_0x2e2c2d(0x703)]); _0xd451ba[_0x2e2c2d(0xa36)](_0x28f0e4, { 'type': _0x2e2c2d(0x67c), 'amount': _0x553f24['amount'], 'recipientId': _0x594428[_0x2e2c2d(0x703)], 'content': _0x2e2c2d(0x4f8) + (_0x2725d8?.[_0x2e2c2d(0x589)] || '未知') + _0x2e2c2d(0x774) + _0x461bc6[_0x2e2c2d(0x582)] + ']' }); } }), { 'omniText': _0x5a86ef[_0x2fc5ca(0x9f9)]('\x0a\x0a'), 'usedCounts': _0x50d534 }; } function _0xdf03ca(_0x265b6e) { const _0x161a3c = _0x1654f8; let _0x503d73 = null; const _0x47f9d0 = _0x57ec14[_0x161a3c(0x313)][_0x161a3c(0x1a0)](_0x1e1f2c => _0x1e1f2c[_0x161a3c(0x69c)]['includes'](_0x265b6e)); for (const _0x4f6c8c of _0x47f9d0) { if ('zntEv' !== 'tZyxf') { const _0x3a3d17 = _0x2de61d(_0x4f6c8c['id']); if (_0x3a3d17 && _0x3a3d17[_0x161a3c(0xb1e)] > 0x0) { const _0x1b1905 = _0x3a3d17[_0x3a3d17[_0x161a3c(0xb1e)] - 0x1]; (!_0x503d73 || _0x1b1905[_0x161a3c(0x665)] > _0x503d73[_0x161a3c(0x665)]) && ('vJpZv' !== _0x161a3c(0xa8d) ? _0x2e4bf1(_0x161a3c(0x246)) : _0x503d73 = _0x1b1905); } } else _0x46fbec[_0x161a3c(0x390)]('用户分享音乐失败:', _0x5786a7), _0x241c23(_0x161a3c(0xa44) + _0x1099cd['message']); } return _0x503d73; } function _0x59cd5a(_0x271397) { const _0x2f7ec5 = _0x1654f8; if (!_0x271397 || !_0x271397[_0x2f7ec5(0x9e5)](',')) return _0x271397; const _0x24614c = _0x271397[_0x2f7ec5(0x52b)](',')[_0x2f7ec5(0x937)](_0x419e71 => _0x419e71[_0x2f7ec5(0x3dd)]()); return _0x24614c[Math[_0x2f7ec5(0x5a8)](Math[_0x2f7ec5(0x757)]() * _0x24614c['length'])]; } function _0x156ce5(_0x252e79) { return new Promise(_0x44d6ee => { const _0x3d24bb = _0x3df6, _0xae975e = document[_0x3d24bb(0x67e)](_0x3d24bb(0xa0c)), _0x177634 = document[_0x3d24bb(0x67e)](_0x3d24bb(0x5d8)), _0x176acf = document['getElementById'](_0x3d24bb(0x153)), _0x818d90 = document[_0x3d24bb(0x67e)](_0x3d24bb(0xacb)), _0x5571fd = document[_0x3d24bb(0x67e)]('modal-mask'); _0x177634['textContent'] = _0x252e79, _0xae975e[_0x3d24bb(0x7df)][_0x3d24bb(0x741)] = 'flex'; const _0x480ee9 = _0x57241c => { const _0x4e346f = _0x3d24bb; if (_0x4e346f(0x8df) === _0x4e346f(0xadc)) { if (_0x3e5f1e[_0x4e346f(0x4bc)]) return; const _0x4460f5 = _0x47af63[_0x4e346f(0x53a)], _0x5f317e = _0x5175f1[_0x4e346f(0x12c)](_0xabf188[_0x4e346f(0x5aa)]['find'](_0xc13574 => _0xc13574[_0x4e346f(0x90d)] === _0x2c531d['activeDiaryCharacterId'])[_0x4e346f(0x8c4)][_0x4e346f(0xb1e)] / 0x2); if (_0x4460f5 >= _0x5f317e - 0x1) return; _0x2268b8[_0x4e346f(0x4bc)] = !![]; const _0x5f08ab = _0x4460f5 + 0x1, _0x4233b2 = _0x48a635['getElementById'](_0x4e346f(0x33f) + _0x4460f5), _0x26d5e7 = _0x48a2ac['getElementById'](_0x4e346f(0x33f) + _0x5f08ab); _0x4233b2 && _0x26d5e7 ? (_0x26d5e7[_0x4e346f(0x32b)][_0x4e346f(0x536)](_0x4e346f(0xab1)), _0x4233b2[_0x4e346f(0x32b)][_0x4e346f(0x536)](_0x4e346f(0x98e)), _0x26d5e7[_0x4e346f(0x32b)]['add'](_0x4e346f(0x334)), _0x53c868(() => { const _0x40d697 = _0x4e346f; _0x4233b2[_0x40d697(0x32b)][_0x40d697(0x318)](_0x40d697(0x334), _0x40d697(0x98e)), _0x26d5e7[_0x40d697(0x32b)][_0x40d697(0x318)](_0x40d697(0xab1)), _0x554835['diaryCurrentPage'] = _0x5f08ab, _0x223557(), _0x40fc54[_0x40d697(0x4bc)] = ![]; }, 0x2bc)) : _0x3d5e4d[_0x4e346f(0x4bc)] = ![]; } else _0xae975e[_0x4e346f(0x7df)][_0x4e346f(0x741)] = _0x4e346f(0x527), _0x176acf['onclick'] = _0x818d90[_0x4e346f(0x4e2)] = _0x5571fd[_0x4e346f(0x4e2)] = null, document[_0x4e346f(0x6a0)](_0x4e346f(0xa35), _0x28b7f2), _0x44d6ee(_0x57241c); }, _0x28b7f2 = _0x2cdeee => { const _0x125b84 = _0x3d24bb; if ('uLECY' !== _0x125b84(0x835)) { if (_0x2cdeee[_0x125b84(0x99d)] === _0x125b84(0x4c5)) _0x480ee9(![]); if (_0x2cdeee[_0x125b84(0x99d)] === _0x125b84(0x88d)) _0x480ee9(!![]); } else _0x3df24d = {}; }; _0x176acf[_0x3d24bb(0x4e2)] = () => _0x480ee9(!![]), _0x818d90[_0x3d24bb(0x4e2)] = () => _0x480ee9(![]), _0x5571fd[_0x3d24bb(0x4e2)] = () => _0x480ee9(![]), document[_0x3d24bb(0x990)]('keydown', _0x28b7f2); }); } function _0x33f536(_0x314355) { const _0x35b0b0 = _0x1654f8, _0x58d5c2 = document[_0x35b0b0(0x67e)](_0x35b0b0(0x487)); _0x58d5c2['textContent'] = _0x314355, _0x58d5c2[_0x35b0b0(0x7df)][_0x35b0b0(0x741)] = 'block'; if (_0x33f536['_t']) clearTimeout(_0x33f536['_t']); _0x33f536['_t'] = setTimeout(() => { const _0xe08239 = _0x35b0b0; _0x58d5c2[_0xe08239(0x7df)][_0xe08239(0x741)] = 'none'; }, 0x640); } function _0x3190fe() { const _0x6948bd = _0x1654f8, _0x3365d5 = document[_0x6948bd(0x67e)]('app-pages-container'), _0x2fc9fd = document['getElementById']('app-pages-slider'), _0x35dfcc = document['querySelectorAll'](_0x6948bd(0x83e)), _0x234de6 = document[_0x6948bd(0x67e)](_0x6948bd(0x753)); let _0x2832a9 = 0x0; _0x2fc9fd[_0x6948bd(0x7df)][_0x6948bd(0x96a)] = _0x6948bd(0x748); const _0x61b647 = 0x3; function _0x58a8d8(_0x2943ab) { const _0x5bd4a3 = _0x6948bd; if (_0x2943ab < 0x0 || _0x2943ab >= _0x61b647) return; _0x2fc9fd[_0x5bd4a3(0x7df)][_0x5bd4a3(0x6b9)] = _0x5bd4a3(0x315) + _0x2943ab * (0x64 / _0x61b647) + '%)', _0x35dfcc['forEach'](_0x5f21bd => _0x5f21bd['classList'][_0x5bd4a3(0x318)](_0x5bd4a3(0x115))), _0x35dfcc[_0x2943ab][_0x5bd4a3(0x32b)][_0x5bd4a3(0x536)]('active'), _0x2832a9 = _0x2943ab, _0x2943ab === 0x0 ? _0x234de6['style'][_0x5bd4a3(0x741)] = _0x5bd4a3(0x527) : _0x5bd4a3(0xa37) === 'tjUIs' ? (_0x28e992[_0x5bd4a3(0x32b)]['remove'](_0x5bd4a3(0x334), 'is-exiting-right'), _0x59d764['classList']['remove']('is-entering-from-left'), _0x5beb08[_0x5bd4a3(0x53a)] = _0x3fe4d8, _0x4e366e(), _0x278945['isAnimatingDiary'] = ![]) : _0x234de6[_0x5bd4a3(0x7df)][_0x5bd4a3(0x741)] = 'flex'; } _0x58a8d8(0x0), _0x35dfcc[_0x6948bd(0x5e2)](_0x39974e => { const _0x3b85a9 = _0x6948bd; _0x39974e[_0x3b85a9(0x990)]('click', () => { const _0x34dfd7 = parseInt(_0x39974e['dataset']['page'], 0xa); _0x58a8d8(_0x34dfd7); }); }); let _0x1e6f91 = 0x0, _0x49c358 = 0x0, _0x2e1d04 = 0x0, _0x480d45 = ![], _0x5a3b29 = ''; _0x3365d5[_0x6948bd(0x990)](_0x6948bd(0x44d), _0xfd5d79 => { const _0x23c9d1 = _0x6948bd; _0x1e6f91 = _0xfd5d79[_0x23c9d1(0x2ce)][0x0][_0x23c9d1(0x3b2)], _0x49c358 = _0xfd5d79[_0x23c9d1(0x2ce)][0x0][_0x23c9d1(0x466)], _0x480d45 = !![], _0x5a3b29 = ''; }, { 'passive': !![] }), _0x3365d5[_0x6948bd(0x990)](_0x6948bd(0x1c3), _0x2adc92 => { const _0x39f038 = _0x6948bd; if (!_0x480d45) return; if (_0x5a3b29 === '') { const _0x5ba908 = _0x2adc92[_0x39f038(0x2ce)][0x0][_0x39f038(0x3b2)] - _0x1e6f91, _0x33c16b = _0x2adc92[_0x39f038(0x2ce)][0x0][_0x39f038(0x466)] - _0x49c358; if (Math['abs'](_0x5ba908) > Math['abs'](_0x33c16b)) { if (_0x39f038(0x2aa) !== _0x39f038(0x464)) _0x5a3b29 = _0x39f038(0x35a); else { const _0x3f4971 = _0x39f038(0x53b) + _0x563791; _0x8c4114(_0x3f4971), _0xc954f7(!![]); } } else _0x5a3b29 = 'vertical'; } _0x5a3b29 === _0x39f038(0x35a) && ('uPszk' !== _0x39f038(0x16a) ? _0x2adc92[_0x39f038(0x624)]() : _0x1853d8 = _0x2e663a(_0x5196cb[_0x39f038(0x69c)][0x0])); }, { 'passive': ![] }), _0x3365d5['addEventListener']('touchend', _0xef0edd => { const _0x42e39d = _0x6948bd; if (!_0x480d45) return; _0x2e1d04 = _0xef0edd[_0x42e39d(0x839)][0x0][_0x42e39d(0x7e6)], _0x5a3b29 === 'horizontal' && (_0x42e39d(0x4a7) !== _0x42e39d(0x4a7) ? (_0x3c1e21 = _0x4f614d[_0x42e39d(0x494)](_0x42e39d(0x7df)), _0x388a12['id'] = 'style-' + _0x45b49d['id'], _0x13a778[_0x42e39d(0x6d4)][_0x42e39d(0x6b3)](_0x4d10d3)) : _0x166270()), _0x480d45 = ![]; }); function _0x166270() { const _0x63ab32 = _0x6948bd, _0x481924 = 0x32; if (_0x2e1d04 < _0x1e6f91 - _0x481924) _0x63ab32(0x5ff) === 'yGtEQ' ? _0x12201c[_0x63ab32(0x663)]({ 'behavior': 'auto', 'block': _0x63ab32(0x499) }) : _0x58a8d8(_0x2832a9 + 0x1); else _0x2e1d04 > _0x1e6f91 + _0x481924 && _0x58a8d8(_0x2832a9 - 0x1); } } function _0x18c421() { return new Promise(_0x304605 => { const _0x50e505 = _0x3df6, _0x202536 = document[_0x50e505(0x67e)](_0x50e505(0x8bf)), _0x406b1c = document['getElementById'](_0x50e505(0x437)), _0x6777db = document['getElementById'](_0x50e505(0x99b)), _0x2f5fc6 = document['getElementById']('confirm-music-input'), _0x26e793 = document['getElementById']('cancel-music-input'), _0x440399 = document[_0x50e505(0x67e)]('music-input-backdrop'); _0x406b1c[_0x50e505(0x552)] = '', _0x6777db['value'] = '', _0x202536['classList'][_0x50e505(0x536)]('show'), _0x406b1c[_0x50e505(0x855)](); const _0x463c31 = _0x1df7de => { const _0x421015 = _0x50e505; _0x202536[_0x421015(0x32b)][_0x421015(0x318)](_0x421015(0x716)), _0x2f5fc6['onclick'] = null, _0x26e793[_0x421015(0x4e2)] = null, _0x440399['onclick'] = null, document[_0x421015(0x6a0)](_0x421015(0xa35), _0x1197dd), _0x304605(_0x1df7de); }, _0x3526bf = () => { const _0x344ce5 = _0x50e505, _0x5b31a2 = _0x406b1c['value'][_0x344ce5(0x3dd)](), _0x30244d = _0x6777db[_0x344ce5(0x552)][_0x344ce5(0x3dd)](); if (!_0x5b31a2 || !_0x30244d) { _0x33f536('歌名和歌手都不能为空！'); return; } _0x463c31({ 'songName': _0x5b31a2, 'artist': _0x30244d }); }, _0x1197dd = _0x33a456 => { const _0x2d4a4a = _0x50e505; if (_0x33a456[_0x2d4a4a(0x99d)] === _0x2d4a4a(0x4c5)) _0x463c31(null); _0x33a456[_0x2d4a4a(0x99d)] === 'Enter' && (_0x33a456[_0x2d4a4a(0x624)](), _0x3526bf()); }; _0x2f5fc6[_0x50e505(0x4e2)] = _0x3526bf, _0x26e793[_0x50e505(0x4e2)] = () => _0x463c31(null), _0x440399['onclick'] = () => _0x463c31(null), document[_0x50e505(0x990)](_0x50e505(0xa35), _0x1197dd); }); } function _0x228610(_0x294f0a) { const _0x22f28a = _0x1654f8; if (!_0x294f0a) return []; const _0x3af5f1 = _0x294f0a['trim'](); if (_0x3af5f1[_0x22f28a(0x2bd)](_0x22f28a(0x3d0)) && _0x3af5f1[_0x22f28a(0x506)](_0x22f28a(0x85b))) { if ('sEsQt' !== _0x22f28a(0x7cc)) _0x5c78df[_0x22f28a(0x6b3)](_0x273346), _0x1883ff[_0x22f28a(0x6b3)](_0x372872); else return [_0x3af5f1]; } const _0x5a2854 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x321460 = '|||CMD|||', _0xaf3447 = [], _0x39b703 = _0x294f0a[_0x22f28a(0x254)](_0x5a2854, _0xaf4d4e => { const _0x330f4d = _0x22f28a; return _0xaf3447[_0x330f4d(0x1c5)](_0xaf4d4e), _0x321460; }), _0x59bb2c = _0x39b703[_0x22f28a(0x52b)](_0x321460), _0x213dfb = []; let _0x11be11 = 0x0; return _0x59bb2c[_0x22f28a(0x5e2)]((_0xd4d215, _0x330f6e) => { const _0x58aea3 = _0x22f28a, _0x4576ff = _0xd4d215['trim'](); _0x4576ff && _0x213dfb['push'](..._0x2c582f(_0x4576ff)), _0x11be11 < _0xaf3447[_0x58aea3(0xb1e)] && (_0x58aea3(0x74a) !== _0x58aea3(0x978) ? (_0x213dfb[_0x58aea3(0x1c5)](_0xaf3447[_0x11be11][_0x58aea3(0x3dd)]()), _0x11be11++) : _0x44c5f1[_0x58aea3(0xa8f)](_0x595be9)); }), _0x213dfb; } function _0x3df6(_0x31e270, _0x57dcd2) { const _0x44b969 = _0x44b9(); return _0x3df6 = function (_0x3df6f1, _0x18ea2e) { _0x3df6f1 = _0x3df6f1 - 0xfe; let _0x57ad0d = _0x44b969[_0x3df6f1]; return _0x57ad0d; }, _0x3df6(_0x31e270, _0x57dcd2); } function _0x4e9793(_0x1c16e4, _0x33ec03, _0x795546 = '') { const _0x42bab2 = _0x1654f8, _0x9233a7 = document['createElement'](_0x42bab2(0x962)); _0x9233a7[_0x42bab2(0x226)] = _0x42bab2(0x158) + _0x795546; const _0x203d08 = document['createElement']('img'); _0x203d08[_0x42bab2(0x45f)] = _0x1c16e4, _0x203d08[_0x42bab2(0x226)] = _0x42bab2(0x5b2); const _0xeaf5d7 = document['createElement'](_0x42bab2(0x962)); return _0xeaf5d7[_0x42bab2(0x226)] = _0x42bab2(0x675), _0x33ec03 && (_0xeaf5d7[_0x42bab2(0x7df)][_0x42bab2(0x6dd)] = _0x42bab2(0xa5e) + _0x33ec03 + '\x27)'), _0x9233a7['appendChild'](_0x203d08), _0x9233a7[_0x42bab2(0x6b3)](_0xeaf5d7), _0x9233a7; } function _0x10ba0d(_0x3bda0a) { const _0x4cbb38 = _0x1654f8; if (!_0x3bda0a) return []; let _0x1c89fc = String(_0x3bda0a)['trim'](); const _0x149b4a = _0x1c89fc[_0x4cbb38(0xa9e)](/```(?:json)?([\s\S]*?)```/i); if (_0x149b4a) _0x1c89fc = _0x149b4a[0x1][_0x4cbb38(0x3dd)](); try { const _0x29373c = JSON[_0x4cbb38(0x258)](_0x1c89fc); if (_0x29373c && Array['isArray'](_0x29373c[_0x4cbb38(0x214)])) return _0x29373c[_0x4cbb38(0x214)][_0x4cbb38(0x937)](_0x3d20b0 => typeof _0x3d20b0 === _0x4cbb38(0x5b8) ? _0x3d20b0 : _0x3d20b0?.[_0x4cbb38(0x6fd)])['filter'](Boolean)[_0x4cbb38(0x9c7)](_0x2c582f); const _0x821f88 = [_0x4cbb38(0x651), _0x4cbb38(0x220), _0x4cbb38(0x332), 'text', _0x4cbb38(0x6fd), _0x4cbb38(0x45a), _0x4cbb38(0x31a)]; if (_0x29373c && typeof _0x29373c === _0x4cbb38(0x204)) { const _0x5ecd59 = []; for (const _0x374103 of Object[_0x4cbb38(0x756)](_0x29373c)) { const _0x38d166 = _0x374103['toLowerCase'](); if (_0x821f88['some'](_0x14d705 => _0x38d166[_0x4cbb38(0x2bd)](_0x14d705))) { const _0x1c8bde = _0x29373c[_0x374103]; if (typeof _0x1c8bde === _0x4cbb38(0x5b8)) _0x5ecd59[_0x4cbb38(0x1c5)](_0x1c8bde); if (Array[_0x4cbb38(0x241)](_0x1c8bde)) _0x1c8bde['forEach'](_0x11e493 => { const _0x5bceb6 = _0x4cbb38; if (_0x5bceb6(0x700) === _0x5bceb6(0x700)) { if (typeof _0x11e493 === _0x5bceb6(0x5b8)) _0x5ecd59[_0x5bceb6(0x1c5)](_0x11e493); } else _0x1a1836['classList'][_0x5bceb6(0x318)](_0x5bceb6(0x334), 'is-exiting-left'), _0x558eb5[_0x5bceb6(0x32b)][_0x5bceb6(0x318)](_0x5bceb6(0xab1)), _0xaf098c[_0x5bceb6(0x53a)] = _0x2e4bc2, _0x26910b(), _0x568f4f[_0x5bceb6(0x4bc)] = ![]; }); } } if (_0x5ecd59[_0x4cbb38(0xb1e)]) return _0x5ecd59[_0x4cbb38(0x9c7)](_0x2c582f)['slice'](0x0, 0x9); } } catch { } if (/[{\[]/[_0x4cbb38(0x645)](_0x1c89fc) && /":/[_0x4cbb38(0x645)](_0x1c89fc)) { if (_0x4cbb38(0x98c) !== 'bZZwF') { const _0x19eb73 = [], _0x265577 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x318ba8; while ((_0x318ba8 = _0x265577[_0x4cbb38(0x8bd)](_0x1c89fc)) !== null) { const _0x2c545b = _0x318ba8[0x1][_0x4cbb38(0x254)](/\\"/g, '\x22')[_0x4cbb38(0x254)](/\\n/g, '\x0a')['trim'](); if (_0x2c545b) _0x19eb73[_0x4cbb38(0x1c5)](_0x2c545b); } if (_0x19eb73[_0x4cbb38(0xb1e)]) return _0x19eb73['flatMap'](_0x2c582f)[_0x4cbb38(0x944)](0x0, 0x9); } else _0x5d01e(_0x4cbb38(0x54d)); } return _0x2c582f(_0x1c89fc); } function _0x2c582f(_0x5b0c24) { const _0x23f7da = _0x1654f8; if (!_0x5b0c24) return []; const _0x523432 = String(_0x5b0c24)[_0x23f7da(0x3dd)](), _0x41d638 = _0x523432[_0x23f7da(0x52b)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x23f7da(0x937)](_0x5dc9b9 => _0x5dc9b9[_0x23f7da(0x3dd)]())[_0x23f7da(0x1a0)](Boolean); if (_0x41d638['length'] > 0x0) return _0x41d638[_0x23f7da(0x944)](0x0, 0x9); return [_0x523432][_0x23f7da(0x1a0)](Boolean); } const _0x253fd2 = new Promise((_0x193715, _0x5cef3c) => { const _0x5510c7 = _0x1654f8, _0x326320 = indexedDB['open'](_0x3c13de, 0x3); _0x326320[_0x5510c7(0x7e4)] = () => _0x5cef3c(_0x5510c7(0x65c)), _0x326320[_0x5510c7(0x465)] = () => _0x193715(_0x326320[_0x5510c7(0x20c)]), _0x326320[_0x5510c7(0xa66)] = _0x345311 => { const _0x245176 = _0x5510c7, _0x56e307 = _0x345311['target']['result']; console[_0x245176(0x4cf)](_0x245176(0x8e1) + _0x56e307['version'] + _0x245176(0xa65)), !_0x56e307[_0x245176(0x170)][_0x245176(0x776)](_0x301b6a) && (console[_0x245176(0x4cf)](_0x245176(0x88f) + _0x301b6a), _0x56e307[_0x245176(0x140)](_0x301b6a, { 'keyPath': 'id' })), !_0x56e307[_0x245176(0x170)]['contains']('music_library') && (console[_0x245176(0x4cf)]('Creating\x20object\x20store:\x20music_library'), _0x56e307[_0x245176(0x140)](_0x245176(0x63d), { 'keyPath': 'id' })), !_0x56e307[_0x245176(0x170)]['contains'](_0x414485) && (_0x245176(0x5dc) !== _0x245176(0x5dc) ? _0x2244dd += _0x245176(0x2e9) : (console[_0x245176(0x4cf)]('Creating\x20object\x20store:\x20' + _0x414485), _0x56e307[_0x245176(0x140)](_0x414485, { 'keyPath': 'id' }))); }; }); async function _0x2995f2(_0x2c3d42) { const _0x29aa64 = await _0x253fd2; return new Promise((_0x59a67e, _0x1ced97) => { const _0x551090 = _0x3df6, _0x15b12a = _0x29aa64[_0x551090(0x766)](_0x301b6a, _0x551090(0x8cc)), _0x43d305 = _0x15b12a[_0x551090(0x6fe)](_0x301b6a), _0x53a5ed = _0x43d305[_0x551090(0x751)](_0x2c3d42); _0x53a5ed['onsuccess'] = () => _0x59a67e(_0x53a5ed[_0x551090(0x20c)] ? _0x53a5ed[_0x551090(0x20c)][_0x551090(0x44f)] : null), _0x53a5ed[_0x551090(0x7e4)] = () => _0x1ced97(_0x53a5ed['error']); }); } async function _0x237033(_0x2686dd) { const _0x5658d2 = await _0x253fd2; return new Promise((_0x5b264d, _0x40eed3) => { const _0x1677dd = _0x3df6; if ('Ptvmn' !== _0x1677dd(0x809)) { const _0x17bd9b = _0x5658d2[_0x1677dd(0x766)](_0x414485, _0x1677dd(0x8cc)), _0x5cd082 = _0x17bd9b[_0x1677dd(0x6fe)](_0x414485), _0x33649a = _0x5cd082[_0x1677dd(0x751)](_0x2686dd); _0x33649a[_0x1677dd(0x465)] = () => _0x5b264d(_0x33649a[_0x1677dd(0x20c)] ? _0x33649a[_0x1677dd(0x20c)][_0x1677dd(0x253)] : null), _0x33649a[_0x1677dd(0x7e4)] = () => _0x40eed3(_0x33649a[_0x1677dd(0x390)]); } else _0x5b1332(), _0x47151a(_0x1677dd(0x128), 'home'); }); } async function _0x4fefaf(_0x369cfe, _0x58baaf) { const _0x3cbdac = await _0x253fd2; return new Promise((_0x3178d3, _0x4c08f2) => { const _0x5a0c1c = _0x3df6, _0x59413f = _0x3cbdac[_0x5a0c1c(0x766)](_0x414485, 'readwrite'), _0x3a400c = _0x59413f[_0x5a0c1c(0x6fe)](_0x414485), _0x44a259 = _0x3a400c[_0x5a0c1c(0xaa9)]({ 'id': _0x369cfe, 'data': _0x58baaf }); _0x44a259[_0x5a0c1c(0x465)] = () => _0x3178d3(), _0x44a259['onerror'] = () => _0x4c08f2(_0x44a259['error']); }); } async function _0x362e99(_0x12dcbe) { const _0x3bed80 = await _0x253fd2; return new Promise((_0x36fb6e, _0x3d4341) => { const _0x368e87 = _0x3df6; if (_0x368e87(0xa2d) === 'kaVEf') { const _0x351202 = _0x2f9f25[0x0][_0x368e87(0x3dd)](), _0x55cd0f = _0x13c414[0x1][_0x368e87(0x3dd)](), _0x4b7420 = { '歌名': _0x368e87(0x9e4), '艺术家': '歌手', '专辑': '专辑' }; _0x4b7420[_0x351202] && (_0x20f1df[_0x4b7420[_0x351202]] = _0x55cd0f); } else { const _0x1de983 = _0x3bed80['transaction'](_0x414485, _0x368e87(0x73e)), _0x2fa019 = _0x1de983[_0x368e87(0x6fe)](_0x414485), _0x5a7792 = _0x2fa019['delete'](_0x12dcbe); _0x5a7792[_0x368e87(0x465)] = () => _0x36fb6e(), _0x5a7792[_0x368e87(0x7e4)] = () => _0x3d4341(_0x5a7792[_0x368e87(0x390)]); } }); } async function _0x59767c(_0x5c43d9, _0x5c5bc5) { const _0x4201af = await _0x253fd2; return new Promise((_0x34ed6a, _0x1a412e) => { const _0xc8677f = _0x3df6; if (_0xc8677f(0x5d7) === 'RqKsf') _0x3c52fa = _0x18c38e[_0xc8677f(0x6e3)](_0xc8677f(0x173)); else { const _0x1ab87a = _0x4201af['transaction'](_0x301b6a, _0xc8677f(0x73e)), _0x232aa3 = _0x1ab87a[_0xc8677f(0x6fe)](_0x301b6a), _0x2468e7 = _0x232aa3[_0xc8677f(0xaa9)]({ 'id': _0x5c43d9, 'blob': _0x5c5bc5 }); _0x2468e7['onsuccess'] = () => _0x34ed6a(_0x2468e7['result']), _0x2468e7['onerror'] = () => _0x1a412e(_0x2468e7['error']); } }); } async function _0x29cf4e(_0x114d27) { const _0x9237ba = await _0x253fd2; return new Promise((_0x299037, _0x164566) => { const _0x174e17 = _0x3df6; if (_0x174e17(0x166) !== _0x174e17(0x617)) { const _0x109bf8 = _0x9237ba[_0x174e17(0x766)](_0x301b6a, _0x174e17(0x73e)), _0x292d96 = _0x109bf8[_0x174e17(0x6fe)](_0x301b6a), _0x2fa730 = _0x292d96['delete'](_0x114d27); _0x2fa730['onsuccess'] = () => _0x299037(), _0x2fa730[_0x174e17(0x7e4)] = () => _0x164566(_0x2fa730[_0x174e17(0x390)]); } else { _0x125959[_0x174e17(0x862)] = _0x18fd5a[_0x174e17(0x862)][_0x174e17(0x1a0)](_0x2e7ef7 => _0x2e7ef7['id'] !== _0x2b0ffe), _0x5a192a[_0x174e17(0x313)][_0x174e17(0x5e2)](_0x45e411 => { const _0x3daf58 = _0x174e17; _0x45e411[_0x3daf58(0xa1e)] === _0x3daf58(0x7d1) && (_0x45e411[_0x3daf58(0x69c)] = _0x45e411[_0x3daf58(0x69c)][_0x3daf58(0x1a0)](_0x14d183 => _0x14d183 !== _0x4005a3)); }); const _0x48d790 = _0x5ea4e1['chats'][_0x174e17(0x270)](_0x452f66 => _0x452f66[_0x174e17(0xa1e)] === 'private' && _0x452f66[_0x174e17(0x69c)]['includes'](_0x1b8809)); _0x48d790 && _0x1bf6e(_0x48d790['id']), _0x3dffec[_0x174e17(0x313)] = _0x577267[_0x174e17(0x313)][_0x174e17(0x1a0)](_0x8cede2 => _0x8cede2['type'] !== 'group' || _0x8cede2['participantIds'][_0x174e17(0xb1e)] > 0x1), _0x2e3230(), _0x2394c0(); } }); } function _0x1707d7(_0x2d90ef) { const _0x2fada2 = _0x1654f8; return fetch(_0x2d90ef)[_0x2fada2(0x69b)](_0x1a284f => _0x1a284f[_0x2fada2(0x44f)]()); }

  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
