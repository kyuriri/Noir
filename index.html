<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px 15px;
      /* 左右15px的呼吸空间 */
      overflow-y: auto;
      display: flex;
      flex-direction: column;

    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    .typing-indicator {
      /* ▼▼▼ 核心改造 ▼▼▼ */
      position: absolute;
      /* 别再用什么粘性了，直接给我焊死！*/
      bottom: 115px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 把它从左边顶出去，和头像对齐 */
      /* ▲▲▲ 改造完毕 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */
      margin-left: 50px;
      padding: 8px 12px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.85rem;
      background: var(--card-bg);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      z-index: 5;
      width: fit-content;
      box-shadow: var(--soft-shadow);
      /* 加个阴影，让它浮起来 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 125%;
      height: 125%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>

    const _0x471ec9 = _0x2a1e; (function (_0x116c8e, _0x18f0ce) { const _0x2f429e = _0x2a1e, _0xff8b49 = _0x116c8e(); while (!![]) { try { const _0x1f464b = -parseInt(_0x2f429e(0x79a)) / 0x1 + -parseInt(_0x2f429e(0x134)) / 0x2 + parseInt(_0x2f429e(0x83d)) / 0x3 + parseInt(_0x2f429e(0x3d3)) / 0x4 + -parseInt(_0x2f429e(0x1f6)) / 0x5 + -parseInt(_0x2f429e(0x562)) / 0x6 * (-parseInt(_0x2f429e(0x2e1)) / 0x7) + parseInt(_0x2f429e(0x5a5)) / 0x8 * (-parseInt(_0x2f429e(0x1c8)) / 0x9); if (_0x1f464b === _0x18f0ce) break; else _0xff8b49['push'](_0xff8b49['shift']()); } catch (_0x38b056) { _0xff8b49['push'](_0xff8b49['shift']()); } } }(_0x39df, 0x8f556)); function _0xa61727(_0x72ad11 = new Date()) { const _0x11b4aa = _0x2a1e, _0x495070 = _0x72ad11[_0x11b4aa(0x96b)](), _0x40d7bc = String(_0x72ad11[_0x11b4aa(0x677)]() + 0x1)[_0x11b4aa(0x5b5)](0x2, '0'), _0x583e18 = String(_0x72ad11[_0x11b4aa(0x5c3)]())[_0x11b4aa(0x5b5)](0x2, '0'); return _0x495070 + '-' + _0x40d7bc + '-' + _0x583e18; } const _0x19955f = _0x471ec9(0x5dd), _0x4c2fa8 = _0x471ec9(0x1f8), _0x3db906 = 'snoop_cache', _0x31c60c = document[_0x471ec9(0xb60)](_0x471ec9(0x937)); _0x31c60c['id'] = 'noir-custom-font-style', document[_0x471ec9(0x7a6)]['appendChild'](_0x31c60c); var _0x3cf4de, _0x3ec13b = null; let _0x35cf89 = [], _0x4ada36 = ![], _0x34852c = null, _0x261ca2 = ![], _0x22bb1d = { 'x': 0x0, 'y': 0x0 }; function _0x1286e7(_0x4f2c99) { const _0x49b78f = _0x471ec9; return (_0x3cf4de?.[_0x49b78f(0xad3)] || [])[_0x49b78f(0x6f0)](_0x8c81bc => _0x8c81bc['id'] === _0x4f2c99); } const _0x49bc2a = _0x471ec9(0xba), _0x2e585f = _0x471ec9(0x6bb), _0x574d9b = _0x471ec9(0x2f3), _0x13da56 = [{ 'name': _0x471ec9(0xaa7), 'url': _0x471ec9(0x341) }, { 'name': '崩溃', 'url': _0x471ec9(0x807) }, { 'name': '生病', 'url': 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg' }, { 'name': '工作', 'url': 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg' }, { 'name': _0x471ec9(0x22b), 'url': _0x471ec9(0x47f) }, { 'name': _0x471ec9(0x894), 'url': _0x471ec9(0x282) }, { 'name': _0x471ec9(0x94b), 'url': _0x471ec9(0x62d) }, { 'name': '期待', 'url': _0x471ec9(0x4c8) }, { 'name': '喜欢', 'url': _0x471ec9(0x119) }, { 'name': _0x471ec9(0x725), 'url': 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg' }, { 'name': _0x471ec9(0xb57), 'url': _0x471ec9(0x8e4) }, { 'name': '委屈', 'url': _0x471ec9(0x83f) }, { 'name': '加油', 'url': _0x471ec9(0x3df) }, { 'name': '对的', 'url': 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg' }, { 'name': '不满', 'url': _0x471ec9(0xa42) }, { 'name': '很期待', 'url': _0x471ec9(0xafe) }, { 'name': _0x471ec9(0x6b2), 'url': _0x471ec9(0x795) }, { 'name': '委屈', 'url': _0x471ec9(0x4d5) }, { 'name': '平静', 'url': _0x471ec9(0x9d3) }, { 'name': '咬你', 'url': 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg' }, { 'name': _0x471ec9(0x9a5), 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': _0x471ec9(0x83e) }, { 'name': '摸鱼', 'url': _0x471ec9(0x7ac) }, { 'name': '委屈那我歇了', 'url': 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg' }, { 'name': _0x471ec9(0x163), 'url': _0x471ec9(0x12e) }, { 'name': _0x471ec9(0x9b), 'url': _0x471ec9(0xe6) }, { 'name': _0x471ec9(0x8df), 'url': _0x471ec9(0x5e8) }, { 'name': '刷我的卡', 'url': _0x471ec9(0xa43) }, { 'name': _0x471ec9(0x25a), 'url': _0x471ec9(0x45b) }, { 'name': _0x471ec9(0x41e), 'url': _0x471ec9(0x1d6) }, { 'name': _0x471ec9(0xa34), 'url': 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg' }, { 'name': _0x471ec9(0x10b), 'url': 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg' }, { 'name': _0x471ec9(0x297), 'url': _0x471ec9(0x53b) }, { 'name': _0x471ec9(0x4ab), 'url': _0x471ec9(0x8be) }, { 'name': _0x471ec9(0x951), 'url': 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg' }, { 'name': _0x471ec9(0x223), 'url': _0x471ec9(0x848) }, { 'name': _0x471ec9(0x38a), 'url': _0x471ec9(0xb18) }, { 'name': _0x471ec9(0x706), 'url': 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg' }, { 'name': _0x471ec9(0x2c6), 'url': _0x471ec9(0x478) }, { 'name': _0x471ec9(0xb46), 'url': _0x471ec9(0x388) }, { 'name': '快点哄我', 'url': _0x471ec9(0x4f3) }, { 'name': '有点无语', 'url': _0x471ec9(0xab1) }, { 'name': '一拳打爆', 'url': _0x471ec9(0x399) }, { 'name': '绝对不想', 'url': _0x471ec9(0xa49) }, { 'name': _0x471ec9(0x3e5), 'url': _0x471ec9(0x7b1) }, { 'name': '很好哦', 'url': 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg' }, { 'name': '甜蜜地和你聊天', 'url': _0x471ec9(0x7fd) }, { 'name': _0x471ec9(0x877), 'url': _0x471ec9(0xa97) }, { 'name': _0x471ec9(0xfa), 'url': _0x471ec9(0xabc) }, { 'name': _0x471ec9(0x802), 'url': _0x471ec9(0x6fc) }, { 'name': _0x471ec9(0x2f5), 'url': 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg' }, { 'name': _0x471ec9(0xb90), 'url': 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg' }, { 'name': _0x471ec9(0x7d0), 'url': _0x471ec9(0x560) }, { 'name': '等你', 'url': _0x471ec9(0x288) }, { 'name': '一个人可怜吃饭', 'url': 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg' }, { 'name': '等你消息', 'url': _0x471ec9(0x3be) }, { 'name': '喝酒', 'url': 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg' }, { 'name': '喝多了', 'url': 'https://sharkpan.xyz/f/Ganul/78iwli.jpg' }, { 'name': '呜呜', 'url': _0x471ec9(0x97) }, { 'name': _0x471ec9(0x290), 'url': _0x471ec9(0x4d6) }, { 'name': _0x471ec9(0xb50), 'url': 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg' }, { 'name': _0x471ec9(0x900), 'url': _0x471ec9(0xb66) }, { 'name': _0x471ec9(0x8ad), 'url': _0x471ec9(0xa6) }, { 'name': '别这样嘛我哭哭', 'url': _0x471ec9(0x14e) }], _0x53ee20 = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x471ec9(0xd4), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x471ec9(0x92f), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': '暗夜紫晶', 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document['addEventListener'](_0x471ec9(0x895), () => { const _0xe59ed1 = _0x471ec9, _0xc4705e = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x97c)), _0x5bf54f = document[_0xe59ed1(0x7ef)]('chat-transfer-button'), _0x213385 = document[_0xe59ed1(0x7ef)]('transfer-modal'), _0x2647ab = document['getElementById']('transfer-backdrop'), _0x2e7bda = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x558)), _0x19bbe9 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x69b)), _0x178d9c = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x2f6)), _0x3887dc = document[_0xe59ed1(0x7ef)]('transfer-recipient-select'), _0x2c2712 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x27d)), _0x35c8b3 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x3e4)), _0x33cc67 = document['getElementById']('chat-summarize-button'), _0x2dd123 = document['getElementById']('summarize-modal'), _0x2cb903 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x768)), _0xc3dc6 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x977)), _0x5eb0df = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x622)), _0xccd31 = document['getElementById']('close-summary-button'), _0x414363 = document['getElementById']('char-edit-wallpaper-preview'), _0x25a365 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x715)), _0x30d38b = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x231)), _0x176543 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x47c)), _0x1c2f4f = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x9d8)), _0x388316 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x2e4)), _0x1e5721 = document['getElementById'](_0xe59ed1(0x45f)), _0x2f41ba = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x7c6)), _0x46012a = document['getElementById'](_0xe59ed1(0xcd)), _0x379995 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x585)), _0x59a1fa = document['getElementById'](_0xe59ed1(0x600)); async function _0x249bd5(_0x4c12de) { const _0x1b48f1 = _0xe59ed1; if (_0x1b48f1(0x92d) === 'pMbGT') _0x563c9f['style'][_0x1b48f1(0x8a4)] = _0x1b48f1(0xacf); else try { const _0xf33746 = URL[_0x1b48f1(0x9e4)](_0x4c12de), _0x4fcd6e = _0x1b48f1(0x273), _0x11cdcf = _0x1b48f1(0x9c3) + _0x4fcd6e + '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27' + _0xf33746 + _0x1b48f1(0x9af); _0x31c60c['innerHTML'] = _0x11cdcf, document[_0x1b48f1(0x72e)]['style']['setProperty'](_0x1b48f1(0x6c8), '\x27' + _0x4fcd6e + '\x27'), _0x59a1fa['textContent'] = _0x1b48f1(0xdc); } catch (_0x35d25c) { console[_0x1b48f1(0x5e3)](_0x1b48f1(0x91a), _0x35d25c), _0x5bf34b(_0x1b48f1(0xb40)); } } async function _0x4af17b() { const _0x1e1797 = _0xe59ed1; if ('uXdJi' !== 'uXdJi') _0x943c3b = _0x37c3cd[_0x1e1797(0x313)]; else try { if (_0x1e1797(0x7fa) !== _0x1e1797(0x7fa)) { const _0x48f144 = _0x327340(_0xb74051[_0x1e1797(0xa9a)]); _0x32d1c9 = _0x48f144[_0x1e1797(0x382)] || '我'; } else { const _0x599a22 = await _0x47b504(_0x1e1797(0x663)); _0x599a22 && (_0x1e1797(0x224) !== 'AQUdg' ? (console[_0x1e1797(0x76a)](_0x1e1797(0x1ae)), await _0x249bd5(_0x599a22)) : (_0x530a42(), _0x1dae04('friendCircleList', 'home'))); } } catch (_0x4786a3) { console[_0x1e1797(0x5e3)](_0x1e1797(0xb00), _0x4786a3); } } async function _0x2378ee(_0x55d220) { const _0xc73744 = _0xe59ed1, _0x52578c = _0x55d220[_0xc73744(0x13b)][_0xc73744(0x27c)][0x0]; if (!_0x52578c || !_0x52578c[_0xc73744(0x382)]['toLowerCase']()[_0xc73744(0x3bc)]('.ttf')) { _0x5bf34b(_0xc73744(0xb67)); return; } _0x2a565e(!![], _0xc73744(0x3d7)); try { await _0x30635e(_0xc73744(0x663), _0x52578c), await _0x249bd5(_0x52578c), _0x5bf34b(_0xc73744(0x461)); } catch (_0x229c4d) { _0x5bf34b(_0xc73744(0x2ec) + _0x229c4d['message']); } finally { _0x2a565e(![]), _0x379995[_0xc73744(0x35c)] = ''; } } async function _0x441fcb() { const _0x32fd09 = _0xe59ed1, _0xf88e35 = await _0x56efd8('确定要恢复默认字体吗？'); if (_0xf88e35) { if ('GLNtP' !== _0x32fd09(0x596)) _0x241fa9(_0x32fd09(0x2b9), _0x32fd09(0x1bc)); else try { await _0x2a986e('custom_font_ttf'), _0x31c60c[_0x32fd09(0x252)] = '', document[_0x32fd09(0x72e)][_0x32fd09(0x937)]['removeProperty'](_0x32fd09(0x6c8)), _0x59a1fa[_0x32fd09(0x5f8)] = '你好，世界\x20(Hello,\x20World)', _0x5bf34b(_0x32fd09(0xa78)); } catch (_0x500ca1) { _0x5bf34b(_0x32fd09(0x654) + _0x500ca1[_0x32fd09(0x99)]); } } } function _0x5e6a15() { const _0x150aeb = _0xe59ed1; if (_0x150aeb(0x229) === _0x150aeb(0x1f1)) _0x1f8461[_0x150aeb(0x5e3)](_0x150aeb(0xae6), _0x203fef), _0x13532b(_0x150aeb(0xaad) + _0x570ca4['message']); else { const _0x1face6 = document[_0x150aeb(0x7ef)](_0x150aeb(0x395)); if (!_0x1face6) return; const _0x3c5246 = localStorage['getItem']('themeHue') || '35'; document['documentElement'][_0x150aeb(0x937)][_0x150aeb(0x529)]('--primary-hue', _0x3c5246), _0x1face6[_0x150aeb(0x35c)] = _0x3c5246, _0x1face6['addEventListener'](_0x150aeb(0x9cc), () => { const _0x26eaab = _0x150aeb, _0x223cd1 = _0x1face6['value']; document[_0x26eaab(0x72e)][_0x26eaab(0x937)]['setProperty']('--primary-hue', _0x223cd1), localStorage['setItem'](_0x26eaab(0x296), _0x223cd1), _0x435b1c(); }); } } function _0x25c609() { const _0x3a466b = _0xe59ed1; if ('XsOUw' !== _0x3a466b(0xef)) { const _0x44f231 = document[_0x3a466b(0x7ef)](_0x3a466b(0x7f5)); if (!_0x44f231) return; const _0x27364b = localStorage['getItem'](_0x3a466b(0x128)) || '80'; document[_0x3a466b(0x72e)]['style'][_0x3a466b(0x529)](_0x3a466b(0x36d), _0x27364b + '%'), _0x44f231[_0x3a466b(0x35c)] = _0x27364b, _0x44f231[_0x3a466b(0x25c)](_0x3a466b(0x9cc), () => { const _0x504e9b = _0x3a466b, _0x36ec6b = _0x44f231[_0x504e9b(0x35c)]; document[_0x504e9b(0x72e)]['style'][_0x504e9b(0x529)]('--primary-lightness', _0x36ec6b + '%'), localStorage[_0x504e9b(0x531)]('themeLightness', _0x36ec6b), _0x435b1c(); }); } else { const _0x39528d = _0x19b4d2[_0x3a466b(0x3ec)][_0x3a466b(0x6f0)](_0x3e14eb => _0x3e14eb['id'] === _0x3a1649); if (!_0x39528d) return; _0x5996ce[_0x3a466b(0x7ef)](_0x3a466b(0x5c4))[_0x3a466b(0x35c)] = _0x39528d['id'], _0x8302af[_0x3a466b(0x7ef)](_0x3a466b(0xf5))[_0x3a466b(0x5f8)] = _0x3a466b(0x6d0), _0x36b130['getElementById']('user-name')['value'] = _0x39528d[_0x3a466b(0x382)], _0x39528d[_0x3a466b(0x3f1)] ? _0xe8703[_0x3a466b(0x937)][_0x3a466b(0x6aa)] = _0x3a466b(0x550) + _0x39528d[_0x3a466b(0x3f1)] + '\x27)' : _0x5304b2['style'][_0x3a466b(0x6aa)] = _0x3a466b(0x550) + _0x2c3bb7 + '\x27)', _0x36fb9f[_0x3a466b(0x7ef)](_0x3a466b(0x575))[_0x3a466b(0x35c)] = _0x39528d[_0x3a466b(0xa2e)], _0x2a15ac['style'][_0x3a466b(0x8a4)] = _0x39528d['id'] === _0x177fd9['activeUserProfileId'] ? _0x3a466b(0xacf) : _0x3a466b(0x540), _0x491bfe['getElementById'](_0x3a466b(0x924))['style']['display'] = _0x3a466b(0x540); } } function _0x435b1c() { const _0x7115d3 = _0xe59ed1, _0x3c956d = document[_0x7115d3(0x7ef)](_0x7115d3(0x824)); if (!_0x3c956d) return; if (_0x3cf4de[_0x7115d3(0x84a)][_0x7115d3(0xa4f)]) _0x3c956d['style'][_0x7115d3(0x501)] = _0x7115d3(0x99f), _0x3c956d['style'][_0x7115d3(0x586)] = _0x7115d3(0x8d3); else { if (_0x7115d3(0x91c) !== _0x7115d3(0x91c)) { if (!_0x32e9ea[_0x7115d3(0x9a1)](_0x4cecc4) || _0x41ff03[_0x7115d3(0x30c)] === 0x0) return _0x7115d3(0x8e8); return _0x7115d3(0x821) + _0x336372[_0x7115d3(0x48a)]((_0x29fa5e, _0x7749ab) => { const _0x394df0 = _0x7115d3, _0x9fb72b = _0x4c9051['stringify'](_0x29fa5e[_0x394df0(0x76a)] || [])[_0x394df0(0xb53)](/'/g, '&apos;')[_0x394df0(0xb53)](/"/g, _0x394df0(0x732)), _0x2e58b3 = _0x29fa5e['contact_name'] || _0x394df0(0x692); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x7749ab < _0x3aba1d[_0x394df0(0x30c)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x394df0(0x7cf) + _0x9fb72b + _0x394df0(0x7c5) + _0x2e58b3 + _0x394df0(0xb3c) + _0x508c37 + _0x394df0(0x511) + _0x2e58b3[_0x394df0(0x104)](0x0) + _0x394df0(0x9b8) + _0x2e58b3 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x29fa5e[_0x394df0(0x1a1)] || '') + _0x394df0(0xa9); })[_0x7115d3(0x863)]('') + '</div>'; } else _0x3c956d[_0x7115d3(0x937)]['color'] = _0x7115d3(0x995), _0x3c956d[_0x7115d3(0x937)]['textShadow'] = 'none'; } } function _0x480343() { const _0x1fdeba = _0xe59ed1, _0x160f88 = document['getElementById'](_0x1fdeba(0x3f7)); if (!_0x160f88) return; _0x160f88[_0x1fdeba(0x5f3)] = _0x3cf4de[_0x1fdeba(0x84a)][_0x1fdeba(0xa4f)] || ![], _0x160f88[_0x1fdeba(0x25c)](_0x1fdeba(0x9cb), () => { const _0x2f6ce5 = _0x1fdeba; _0x2f6ce5(0x1de) === 'ixjSy' ? _0x57c713 === _0x2f6ce5(0x1bf) ? _0x1a17b6[_0x2f6ce5(0x937)][_0x2f6ce5(0x8a4)] = _0x2f6ce5(0x6cf) : _0x14eafc[_0x2f6ce5(0x937)][_0x2f6ce5(0x8a4)] = _0x2f6ce5(0xacf) : (_0x3cf4de[_0x2f6ce5(0x84a)][_0x2f6ce5(0xa4f)] = _0x160f88[_0x2f6ce5(0x5f3)], _0x3a3bc1(), _0x435b1c()); }); } _0x1e5721['addEventListener'](_0xe59ed1(0x2c5), _0x565dcf), _0x1c2f4f[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x1b92bb = _0xe59ed1; _0x1b92bb(0x385) !== 'asONX' ? (_0x3a0ed9 = _0x205faa[_0x1b92bb(0x382)] || _0x1b92bb(0x5c0), _0x5e260a = _0x2338ef[_0x1b92bb(0x48f)][_0x1b92bb(0x30c)] + _0x1b92bb(0x240)) : (_0x1485bb(), _0x388316[_0x1b92bb(0x2c5)]()); }), _0x388316['addEventListener'](_0xe59ed1(0x9cb), _0x47e032); const _0x1f908b = { 'home': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x89e)), 'chat': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4f4)), 'settings': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x57d)), 'userProfile': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x36f)), 'characterEdit': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x40d)), 'groupChatCreate': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x74b)), 'wallpaper': document[_0xe59ed1(0x7ef)]('wallpaper-screen'), 'worldBook': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x13a)), 'worldBookEditor': document['getElementById'](_0xe59ed1(0x8ec)), 'groupSettings': document['getElementById'](_0xe59ed1(0x304)), 'music': document['getElementById'](_0xe59ed1(0x15e)), 'friendCircleList': document[_0xe59ed1(0x7ef)]('friend-circle-list-screen'), 'friendCircleEdit': document[_0xe59ed1(0x7ef)]('friend-circle-edit-screen'), 'meetingList': document[_0xe59ed1(0x7ef)]('meeting-list-screen'), 'meetingView': document[_0xe59ed1(0x7ef)]('meeting-view-screen'), 'userProfileList': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4d8)), 'diaryList': document[_0xe59ed1(0x7ef)]('diary-list-screen'), 'diaryView': document[_0xe59ed1(0x7ef)]('diary-view-screen'), 'musicLibrary': document[_0xe59ed1(0x7ef)]('music-library-screen'), 'musicUploadAltar': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x156)), 'accounting': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x387)), 'snoopList': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4cc)), 'snoopPhone': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x339)), 'calendar': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x17a)) }, _0x3aea47 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x42a)), _0x36e40d = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x2d4)), _0x2a2a3e = document['getElementById'](_0xe59ed1(0x874)), _0x4d7084 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x432)), _0x4e44ad = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x970)), _0x3c6d66 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x11f)), _0x220d67 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x909)), _0x370c1f = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa0b)); document[_0xe59ed1(0x7ef)]('reset-desktop-button')[_0xe59ed1(0x25c)]('click', async () => { const _0x164a1e = _0xe59ed1, _0x268a3d = await _0x56efd8(_0x164a1e(0x1f4)); if (_0x268a3d) { localStorage[_0x164a1e(0x65e)]('badgeState'), localStorage[_0x164a1e(0x65e)](_0x164a1e(0x1b1)), localStorage[_0x164a1e(0x65e)](_0x164a1e(0x380)), localStorage[_0x164a1e(0x65e)](_0x164a1e(0x22a)); const _0x3cf6e4 = []; for (let _0x27dcec = 0x0; _0x27dcec < localStorage[_0x164a1e(0x30c)]; _0x27dcec++) { if (_0x164a1e(0x621) === _0x164a1e(0x6eb)) _0x79e902[_0x164a1e(0x48f)] = _0x4438fd['participantIds']['filter'](_0x2a6cd0 => _0x2a6cd0 !== _0x18a0df); else { const _0x632ced = localStorage['key'](_0x27dcec); _0x632ced && _0x632ced['startsWith'](_0x164a1e(0x20c)) && _0x3cf6e4[_0x164a1e(0x967)](_0x632ced); } } _0x3cf6e4[_0x164a1e(0x8cf)](_0xdca880 => localStorage[_0x164a1e(0x65e)](_0xdca880)), await _0x30635e(_0x164a1e(0x40e), await _0x151f54(_0x164a1e(0x4e3))), _0x5bf34b(_0x164a1e(0x8c4)), setTimeout(() => location[_0x164a1e(0xa0d)](), 0x5dc); } }); const _0x4912e8 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x3f6)), _0x5ae763 = document[_0xe59ed1(0x7ef)]('add-choice-backdrop'), _0x21f626 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa23)), _0x467607 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x7fc)), _0x2e51f8 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x9fe)), _0x5bc8d7 = document['getElementById'](_0xe59ed1(0x6fb)), _0x45b2c8 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4d7)), _0x32e024 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x5a0)), _0x4cec51 = document[_0xe59ed1(0x7ef)]('group-chat-member-list'), _0x1997b7 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x3b9)), _0x29fe39 = document['getElementById']('app-settings'), _0x3218c8 = document[_0xe59ed1(0x7ef)]('back-to-home-from-settings'), _0x4d7cbb = document['getElementById']('back-to-home-from-chat'), _0x2aa568 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x6e4)), _0x4190d8 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x980)), _0x331b0b = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xac4)), _0x3bdee2 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x646)), _0x3ca99d = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xca)), _0x4496b1 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4f4)), _0x40cf72 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x267)), _0x58cc75 = document[_0xe59ed1(0x7ef)]('chat-message-input'), _0x5e23a6 = document['getElementById'](_0xe59ed1(0xb54)), _0x572584 = document[_0xe59ed1(0x7ef)]('chat-get-reply-button'), _0x3f72c5 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xb89)), _0x1679ff = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x8b6)), _0x174d98 = document[_0xe59ed1(0x7ef)]('quote-preview-text'), _0x3b2312 = document['getElementById']('cancel-quote-button'), _0x22dbd9 = document[_0xe59ed1(0x7ef)]('char-name-header'), _0x345d31 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x9a0)), _0x455ac3 = document[_0xe59ed1(0x7ef)]('chat-sticker-panel'), _0x3ff97e = document['getElementById'](_0xe59ed1(0x29c)), _0x4a1e04 = document['getElementById'](_0xe59ed1(0x472)), _0x2f351d = document['getElementById']('character-settings-button'), _0x3b42ff = document['getElementById'](_0xe59ed1(0x333)), _0x180ec3 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xb38)), _0x46947e = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x18f)), _0x92a97a = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xb43)), _0x5aa99e = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x197)), _0x958829 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x7ee)), _0x5819f6 = document['getElementById'](_0xe59ed1(0x569)), _0x3ce960 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x28c)), _0x385b58 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xc8)), _0x32d4b2 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xf6)), _0x4e9035 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x238)), _0x7a57c3 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x575)), _0x5223ca = document['getElementById']('save-user-profile-button'), _0x3c4841 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xad2)), _0x2b9753 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x215)), _0x44090a = document['getElementById'](_0xe59ed1(0x737)), _0x2b0402 = document['getElementById'](_0xe59ed1(0x261)), _0x40d88e = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x469)), _0x35a16b = document['getElementById']('char-edit-avatar-input'), _0x41ce20 = document[_0xe59ed1(0x7ef)]('char-edit-persona'), _0x33801a = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x146)), _0x36f553 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xb14)), _0x543b4d = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa6b)); let _0x19031a = null; const _0x36da4d = '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<\x20div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', _0x31d520 = _0xe59ed1(0x16b); _0x3cf4de = { 'characters': [], 'worldBooks': [], 'worldBookCategories': [], 'activeWorldBookCategoryId': _0xe59ed1(0xa41), 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x3a3bc1() { const _0x4f88f9 = _0xe59ed1; if ('MrfDO' !== _0x4f88f9(0x4e8)) try { const _0x297989 = _0x3cf4de[_0x4f88f9(0xad3)][_0x4f88f9(0x48a)](_0x267732 => { const _0x2d2f52 = _0x4f88f9, _0x46aea1 = { ..._0x267732 }; return _0x46aea1[_0x2d2f52(0x3f1)] && _0x46aea1[_0x2d2f52(0x3f1)]['startsWith'](_0x2d2f52(0x6bf)) && delete _0x46aea1['avatar'], _0x46aea1; }), _0x15a740 = { 'version': 0x1, 'characters': _0x297989, 'worldBooks': _0x3cf4de['worldBooks'], 'worldBookCategories': _0x3cf4de[_0x4f88f9(0x79c)], 'activeWorldBookCategoryId': _0x3cf4de[_0x4f88f9(0x781)], 'chats': _0x3cf4de[_0x4f88f9(0x27a)], 'apiSettings': _0x3cf4de[_0x4f88f9(0x71a)], 'preferences': _0x3cf4de[_0x4f88f9(0x84a)], 'activeChatId': _0x3cf4de['activeChatId'], 'diaries': _0x3cf4de[_0x4f88f9(0x865)], 'friendCircles': _0x3cf4de[_0x4f88f9(0xa3d)], 'activeFriendCircleId': _0x3cf4de[_0x4f88f9(0x62f)], 'userProfiles': _0x3cf4de['userProfiles'], 'activeUserProfileId': _0x3cf4de[_0x4f88f9(0xa37)], 'accountingData': _0x3cf4de[_0x4f88f9(0xb4a)], 'accountingLedger': _0x3cf4de['accountingLedger'], 'calendarEvents': _0x3cf4de[_0x4f88f9(0x636)] }; localStorage[_0x4f88f9(0x531)](_0x4f88f9(0x394), JSON[_0x4f88f9(0x56e)](_0x15a740)); } catch (_0x491a2e) { if (_0x4f88f9(0x9e8) !== _0x4f88f9(0x8a2)) console[_0x4f88f9(0x5e3)](_0x4f88f9(0x93f), _0x491a2e), _0x5bf34b(_0x4f88f9(0x45a)); else { const _0x1b3044 = _0x59c7a5[_0x4f88f9(0x7ef)](_0x4f88f9(0xb65)); _0x1b3044 && _0x1e188a && (_0x1b3044[_0x4f88f9(0x557)] = _0x131007['createObjectURL'](_0x5d39dc)); } } else { const _0x491d5b = new _0x36cf02(_0xcf21ca[_0x4f88f9(0x554)]), _0x107d35 = _0xb9f50f[_0x4f88f9(0x1e8)]((_0x56dab6 - _0x491d5b) / (0x3e8 * 0x3c)); if (_0x107d35 < 0x5) _0x5d034 += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x107d35 < 0x78) _0x441ffb += _0x4f88f9(0x2cf) + _0x107d35 + _0x4f88f9(0x3c8); else { const _0xdc067c = _0x3bcf6f['floor'](_0x107d35 / 0x3c); if (_0xdc067c < 0x30) _0x394b90 += _0x4f88f9(0x2cf) + _0xdc067c + _0x4f88f9(0xb74); else _0x3f314b += _0x4f88f9(0x972) + _0x199bb9[_0x4f88f9(0x1e8)](_0xdc067c / 0x18) + _0x4f88f9(0x260); } } } } async function _0x3b7b37() { const _0x5569ac = _0xe59ed1; if ('LmMnb' === 'IDeuD') _0xa132ee[_0x5569ac(0x5e3)](_0x5569ac(0x58f), _0x375f15), _0x59cbb3[_0x5569ac(0x5e3)]('收到的原始、有问题的文本:', _0x1a1a83); else { if (!_0x3cf4de[_0x5569ac(0xad3)] || _0x3cf4de[_0x5569ac(0xad3)]['length'] === 0x0) { if (_0x5569ac(0x1b6) !== _0x5569ac(0x425)) { console[_0x5569ac(0x76a)]('没有角色需要恢复头像，跳过。'); return; } else _0x4d6382 = _0x5a2b6e[_0x5569ac(0x382)] || '我', _0x27fedb = _0x5569ac(0x192); } console[_0x5569ac(0x76a)]('启动头像恢复程序...'); for (const _0x3b125a of _0x3cf4de[_0x5569ac(0xad3)]) { if (_0x5569ac(0x453) === _0x5569ac(0x3da)) _0x9c03bb += _0x5569ac(0x522) + _0x8ad466[_0x5569ac(0x53a)](_0x56c192 / 0x3c) + _0x5569ac(0x54e); else { if (!_0x3b125a[_0x5569ac(0x3f1)]) { if (_0x5569ac(0x23d) === _0x5569ac(0x23d)) try { const _0x49191c = await _0x47b504(_0x5569ac(0x54f) + _0x3b125a['id']); _0x49191c && ('OMtDn' === 'OMtDn' ? _0x3b125a[_0x5569ac(0x3f1)] = await _0x50ddb8(_0x49191c) : _0x50eda2[_0x5569ac(0x2c4)] = _0x4fecdd['activeUserProfileId']); } catch (_0x105e24) { console[_0x5569ac(0x5e3)]('为角色\x20' + _0x3b125a['name'] + '\x20(' + _0x3b125a['id'] + _0x5569ac(0x458), _0x105e24); } else _0x2143d1 = _0x408dd2[_0x5569ac(0x4fc)] || ''; } } } console[_0x5569ac(0x76a)](_0x5569ac(0xf8)); } } function _0x10e5c0() { const _0x2d4254 = _0xe59ed1; let _0x3eca6d = null; try { _0x3eca6d = localStorage[_0x2d4254(0x6b6)](_0x2d4254(0x394)); } catch (_0x5be6a8) { 'BSJAl' !== _0x2d4254(0x44a) ? console[_0x2d4254(0x5e3)](_0x2d4254(0x3e8), _0x5be6a8) : (_0xb0251f(![]), _0x337a86[_0x2d4254(0x13b)][_0x2d4254(0x35c)] = ''); } if (_0x3eca6d) { if (_0x2d4254(0x1e1) !== _0x2d4254(0x984)) try { const _0x5cd675 = JSON['parse'](_0x3eca6d), _0x5ad6ac = { ..._0x3cf4de }, _0x5e0012 = { ..._0x5ad6ac, ..._0x5cd675 }; _0x5e0012['preferences'] = { ..._0x5ad6ac[_0x2d4254(0x84a)], ..._0x5cd675['preferences'] || {} }, _0x5e0012['apiSettings'] = { ..._0x5ad6ac[_0x2d4254(0x71a)], ..._0x5cd675['apiSettings'] || {} }, Object[_0x2d4254(0x7a2)](_0x3cf4de, _0x5e0012); } catch (_0xb42e0e) { _0x2d4254(0x50a) === _0x2d4254(0x50a) ? (console[_0x2d4254(0x5e3)](_0x2d4254(0x4cf), _0xb42e0e), localStorage[_0x2d4254(0x65e)](_0x2d4254(0x394))) : _0x4ad3f5[_0x2d4254(0x5e3)](_0x2d4254(0x101) + _0x1fc4c3['id'] + _0x2d4254(0xf1), _0xccceeb); } else _0x56c7ca['error'](_0x2d4254(0x2e3), _0x2f951e); } const _0x5e133d = _0x3cf4de[_0x2d4254(0xad3)][_0x2d4254(0x30c)] === 0x0; return !_0x3cf4de[_0x2d4254(0x27a)][_0x2d4254(0x6f0)](_0x24527e => _0x24527e['id'] === _0x3cf4de['activeChatId']) && (_0x2d4254(0xa06) === _0x2d4254(0xa06) ? _0x3cf4de[_0x2d4254(0xa9a)] = _0x3cf4de['chats'][0x0]?.['id'] || null : _0x4b268d[_0x2d4254(0x252)] = _0x2d4254(0x5b8) + _0x1fdc6f + '\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>' + _0x53d835 + '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>' + _0x300715[_0x2d4254(0x6fd)] + '</div><div\x20class=\x22artist\x22>' + _0x392019['artist'] + _0x2d4254(0x2fe) + _0x5d75d7[_0x2d4254(0x96)] + '\x22>一起听</button></div>'), _0x3eca6d && _0x3a3bc1(), _0x5e133d; } function _0x162973() { const _0x1a721a = _0xe59ed1; if ('xpSGB' !== _0x1a721a(0xa03)) { const _0x4c98da = _0x1d419f['value'][_0x1a721a(0x4ca)](), _0x1e5011 = _0xd1d41e['value']['trim'](); if (!_0x4c98da || !_0x1e5011) { _0x55c0aa('歌名和歌手都不能为空！'); return; } _0x14dd14({ 'songName': _0x4c98da, 'artist': _0x1e5011 }); } else { if (!_0x3cf4de[_0x1a721a(0xa9a)]) return; try { localStorage['setItem']('chatHistory_' + _0x3cf4de[_0x1a721a(0xa9a)], JSON[_0x1a721a(0x56e)](_0x3cf4de[_0x1a721a(0x103)])); } catch (_0x24c51c) { console[_0x1a721a(0x5e3)](_0x1a721a(0x593), _0x24c51c), _0x5bf34b(_0x1a721a(0xa4c)); } } } function _0x5c8276() { const _0x21b73d = _0xe59ed1; if (_0x21b73d(0x72a) !== _0x21b73d(0x896)) { if (!_0x3cf4de['activeChatId']) { if (_0x21b73d(0x5eb) !== _0x21b73d(0x3a7)) { _0x3cf4de[_0x21b73d(0x103)] = [], _0x200086(); return; } else { _0x2381e5[_0x21b73d(0x76a)]('好友圈档案柜是空的，无需净化。'); return; } } let _0x396cea = null; try { _0x396cea = localStorage[_0x21b73d(0x6b6)](_0x21b73d(0x524) + _0x3cf4de['activeChatId']); } catch (_0x19d7ec) { _0x21b73d(0x5fa) !== _0x21b73d(0x698) ? console['error'](_0x21b73d(0xe9) + _0x3cf4de[_0x21b73d(0xa9a)], _0x19d7ec) : _0x534ba1[_0x21b73d(0x25c)]('click', () => { const _0x4e77c0 = _0x21b73d; if (_0x4ab76c[_0x4e77c0(0x30c)] === 0x0) return; _0x193b3f = (_0x17bbf3 + 0x1) % _0x2f7c37['length'], _0x25d05f(_0x2c6f52[_0x45771c], _0x20bd66); }); } let _0x3f641d = []; if (_0x396cea) try { const _0x5ce45d = JSON[_0x21b73d(0x6e7)](_0x396cea); Array[_0x21b73d(0x9a1)](_0x5ce45d) && ('lwWqm' === _0x21b73d(0x1e3) ? (_0x45ca1a[_0x21b73d(0x937)][_0x21b73d(0x9ad)] = _0x21b73d(0x95f), _0x4f7056[_0x21b73d(0x937)][_0x21b73d(0x501)] = 'white') : _0x3f641d = _0x5ce45d[_0x21b73d(0x3f0)](_0x3dd4c0 => _0x3dd4c0 && typeof _0x3dd4c0 === _0x21b73d(0xa56) && typeof _0x3dd4c0[_0x21b73d(0x84c)] === 'string' && typeof _0x3dd4c0['content'] !== 'undefined')); } catch (_0x2e1a1f) { console[_0x21b73d(0x5e3)](_0x21b73d(0x9f4) + _0x3cf4de[_0x21b73d(0xa9a)] + _0x21b73d(0x3fa), _0x2e1a1f); try { if (_0x21b73d(0x552) === 'AlvXh') localStorage[_0x21b73d(0x65e)](_0x21b73d(0x524) + _0x3cf4de[_0x21b73d(0xa9a)]); else { const _0x652edb = _0x1f6c95[_0x21b73d(0xb84)](_0x13a046), _0x15bade = 0.4, _0x5d3aa5 = _0x4f240f[_0x21b73d(0x835)](_0x652edb, _0x15bade) * 0x14; _0x58a17b[_0x21b73d(0x937)][_0x21b73d(0x40a)] = _0x21b73d(0x926) + _0x5d3aa5 + _0x21b73d(0x19b); } } catch (_0x376471) { console['error']('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', _0x376471); } } _0x3cf4de[_0x21b73d(0x103)] = _0x3f641d, _0x40cf72['innerHTML'] = '', _0x3cf4de[_0x21b73d(0x103)] && _0x3cf4de[_0x21b73d(0x103)][_0x21b73d(0x8cf)]((_0x43d92d, _0x263b49) => _0x1bf5f6(_0x43d92d, _0x263b49)), setTimeout(() => { const _0x3b40e0 = _0x21b73d; _0x40cf72[_0x3b40e0(0x340)] = _0x40cf72[_0x3b40e0(0x60d)]; }, 0x0); } else _0x28f8fb(), _0x517171(_0x21b73d(0x9f2), 'home'); } async function _0xe99091() { const _0x5c26fc = _0xe59ed1, _0x38bff7 = document[_0x5c26fc(0x7ef)](_0x5c26fc(0x89e)); if (!_0x38bff7) { console['error'](_0x5c26fc(0x6d3)); return; } try { if (_0x5c26fc(0x27e) !== _0x5c26fc(0x27e)) _0x225fc4[_0x5c26fc(0x557)] = _0x519157['coverUrl'] || _0x3e2fff; else { let _0x21e8c9 = await _0x47b504(_0x5c26fc(0x40e)); if (!_0x21e8c9) { if (_0x5c26fc(0x6ce) !== _0x5c26fc(0x1fc)) { const _0x58ed11 = localStorage['getItem'](_0x5c26fc(0x5af)); _0x58ed11 && (console[_0x5c26fc(0x76a)](_0x5c26fc(0x691)), _0x21e8c9 = await _0x151f54(_0x58ed11), await _0x30635e(_0x5c26fc(0x40e), _0x21e8c9), localStorage['removeItem'](_0x5c26fc(0x5af))); } else _0x30d058[_0x5c26fc(0x5e3)](_0x5c26fc(0x3c5), _0x57e2bd), _0x4e5fc8 && (_0x42c66d['style']['backgroundImage'] = ''); } _0x21e8c9 ? (_0x38bff7['style']['backgroundImage'] = _0x5c26fc(0x891) + URL['createObjectURL'](_0x21e8c9) + ')', _0x38bff7[_0x5c26fc(0x937)]['backgroundSize'] = _0x5c26fc(0xa99), _0x38bff7[_0x5c26fc(0x937)][_0x5c26fc(0x913)] = 'center') : _0x38bff7[_0x5c26fc(0x937)][_0x5c26fc(0x6aa)] = ''; } } catch (_0x34ca2e) { console[_0x5c26fc(0x5e3)]('加载壁纸失败:', _0x34ca2e); if (_0x38bff7) { if (_0x5c26fc(0xd0) === _0x5c26fc(0x23f)) { const _0x8ee80c = { 'id': _0x5c26fc(0x66c) + _0x453d78[_0x5c26fc(0x740)](), 'name': _0x4a47fd[_0x5c26fc(0x4ca)]() }; _0x4a71a6[_0x5c26fc(0x79c)][_0x5c26fc(0x967)](_0x8ee80c), _0x562241[_0x5c26fc(0x781)] = _0x8ee80c['id'], _0x1a3e38(), _0x17e6c5(); } else _0x38bff7['style'][_0x5c26fc(0x6aa)] = ''; } } } function _0x40dfdd() { const _0x400e17 = _0xe59ed1, _0x548195 = localStorage[_0x400e17(0x6b6)](_0x400e17(0xa71)); if (_0x548195) _0x400e17(0x464) !== _0x400e17(0x464) ? _0x84266b[_0x400e17(0x967)]({ 'id': _0x400e17(0xa41), 'name': '默认分类' }) : document['getElementById'](_0x400e17(0x15e))['style'][_0x400e17(0x529)](_0x400e17(0x5b6), _0x400e17(0x891) + _0x548195 + ')'); else { if ('TucKY' !== _0x400e17(0xa66)) document[_0x400e17(0x7ef)](_0x400e17(0x15e))[_0x400e17(0x937)][_0x400e17(0x529)](_0x400e17(0x5b6), _0x400e17(0xacf)); else { _0x59a5ea(_0x400e17(0x16d)); return; } } } async function _0x5de8ff(_0x53686a) { const _0x587a02 = _0xe59ed1; try { _0x587a02(0x9d6) === _0x587a02(0x9d6) ? (await _0x30635e('wallpaper_main', _0x53686a), await _0xe99091(), _0x5bf34b('壁纸已更换！')) : (_0x4f8309(), _0x3f82b2('snoopList', 'home')); } catch (_0x5ddd96) { console[_0x587a02(0x5e3)](_0x587a02(0x41a), _0x5ddd96), _0x5bf34b(_0x587a02(0xab) + _0x5ddd96[_0x587a02(0x99)]); } } function _0x4360f9(_0x3dcac6) { const _0x558cf3 = _0xe59ed1; if (_0x558cf3(0x114) !== _0x558cf3(0x114)) _0x2b1674 = '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a' + _0x5f0d18; else { const _0x2bbead = { 'quotedMessage': null, 'content': _0x3dcac6 }, _0x5ea9fc = _0x3dcac6[_0x558cf3(0xd2)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x5ea9fc && (_0x2bbead['quotedMessage'] = { 'sender': _0x5ea9fc[0x1]['trim'](), 'content': _0x5ea9fc[0x2][_0x558cf3(0x4ca)]() }, _0x2bbead[_0x558cf3(0x313)] = _0x3dcac6['substring'](_0x5ea9fc[0x0][_0x558cf3(0x30c)])['trim']()), _0x2bbead; } } const _0x16e08a = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa29)), _0x5b0d59 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x825)), _0x471a56 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xaff)), _0x3a3fb9 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x5b0)), _0x5c5f2c = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xd1)), _0x47651d = document['getElementById'](_0xe59ed1(0x39b)), _0x411099 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x5e2)), _0x16b36e = document[_0xe59ed1(0x7ef)]('edit-message-backdrop'), _0x324080 = document['getElementById'](_0xe59ed1(0x642)), _0x33a3a8 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x5d6)), _0x571789 = document[_0xe59ed1(0x7ef)]('cancel-edit-button'); let _0x320608 = null; function _0x5078fb(_0x5b68ea) { _0x320608 = _0x5b68ea, _0x16e08a['classList']['add']('show'); } function _0x24b607() { const _0x1989ed = _0xe59ed1; _0x1989ed(0x79f) === _0x1989ed(0x79f) ? _0x16e08a['classList']['remove'](_0x1989ed(0xfb)) : (_0xae7b25['style']['backgroundImage'] = '', _0x2f6cf4[_0x1989ed(0x937)][_0x1989ed(0x501)] = '', _0x5a11d2[_0x1989ed(0x53f)](_0x1989ed(0x1c3))[_0x1989ed(0x8cf)](_0x5c97a8 => { const _0x460991 = _0x1989ed; _0x5c97a8[_0x460991(0x937)][_0x460991(0x586)] = ''; })); } function _0x2bba3b() { _0x24b607(), _0x320608 = null; } function _0x30b9ad() { const _0x2d0e1c = _0xe59ed1; if (_0x320608 === null) return; _0x3cf4de[_0x2d0e1c(0x103)][_0x2d0e1c(0x673)](_0x320608, 0x1), _0x162973(), _0x482e39(), _0x2bba3b(); } function _0x6d7913() { const _0xbf60fb = _0xe59ed1; if (_0x320608 === null) return; const _0x375181 = _0x3cf4de[_0xbf60fb(0x103)][_0x320608]; if (!_0x375181) return; _0x324080[_0xbf60fb(0x35c)] = _0x375181[_0xbf60fb(0x313)], _0x24b607(), _0x411099[_0xbf60fb(0x4ad)][_0xbf60fb(0x44c)](_0xbf60fb(0xfb)), _0x324080['focus'](); } function _0xc1a3f3() { const _0xc565b1 = _0xe59ed1; if (_0xc565b1(0x18a) !== _0xc565b1(0x4e4)) { if (_0x320608 === null) return; const _0x115cc3 = _0x324080[_0xc565b1(0x35c)][_0xc565b1(0x4ca)](); if (_0x115cc3 === '') { _0x260be2(); return; } const _0x519174 = _0x3cf4de['conversationHistory'][_0x320608]; _0x519174 && (_0x519174[_0xc565b1(0x313)] = _0x115cc3, _0x162973(), _0x482e39()), _0x411099[_0xc565b1(0x4ad)]['remove']('show'), _0x320608 = null; } else _0x3ab426[_0xc565b1(0x7a2)](_0x5c038f, _0x40813b); } function _0x260be2() { const _0x3a2ef3 = _0xe59ed1; if (_0x3a2ef3(0x401) !== _0x3a2ef3(0x401)) { const _0x11eb56 = _0x28db0a(); if (!_0x11eb56) { _0x6d6e75[_0x3a2ef3(0x5f8)] = _0x3a2ef3(0x8a8); return; } if (_0x11eb56['type'] === _0x3a2ef3(0x86c)) { const _0x11e691 = _0x18e448(_0x11eb56[_0x3a2ef3(0x48f)][0x0]); _0xa88360['textContent'] = _0x11e691 ? _0x11e691['name'] : _0x3a2ef3(0x7d6); } else _0x225230[_0x3a2ef3(0x5f8)] = _0x11eb56[_0x3a2ef3(0x382)] || _0x3a2ef3(0x3d4) + _0x11eb56[_0x3a2ef3(0x48f)][_0x3a2ef3(0x30c)] + ')'; } else _0x411099[_0x3a2ef3(0x4ad)][_0x3a2ef3(0x713)](_0x3a2ef3(0xfb)), _0x320608 = null; } _0x5b0d59[_0xe59ed1(0x25c)]('click', _0x2bba3b), _0x5c5f2c[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x2bba3b), _0x3a3fb9[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x30b9ad), _0x471a56['addEventListener'](_0xe59ed1(0x2c5), _0x6d7913), _0x47651d[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0xc7677), _0x3b2312[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x9f55b4), _0x33a3a8[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0xc1a3f3), _0x571789[_0xe59ed1(0x25c)]('click', _0x260be2), _0x16b36e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x260be2); function _0xc7677() { const _0x3a2a0d = _0xe59ed1; if (_0x320608 === null) return; const _0x2da88b = _0x3cf4de[_0x3a2a0d(0x103)][_0x320608]; if (!_0x2da88b) return; const _0x472e02 = _0x5234d7(); let _0x55953e = '未知'; if (_0x2da88b['role'] === _0x3a2a0d(0x32c)) { if ('Fkanj' === _0x3a2a0d(0x632)) { const _0x42b644 = _0x1af79f(_0x3cf4de[_0x3a2a0d(0xa9a)]); _0x55953e = _0x42b644[_0x3a2a0d(0x382)] || '我'; } else { _0x397e8a('条目名称和内容都不能为空！'); return; } } else { const _0x107f97 = _0x2da88b['senderId'] || _0x472e02?.[_0x3a2a0d(0x48f)][0x0], _0x2fecf6 = _0xd97907(_0x107f97); _0x55953e = _0x2fecf6 ? _0x2fecf6[_0x3a2a0d(0x382)] : '角色'; } let _0x1925ac = _0x2da88b[_0x3a2a0d(0x313)] || ''; if (_0x2da88b['displayUrl']) _0x1925ac = _0x3a2a0d(0x3a9); if (_0x2da88b['image']) _0x1925ac = _0x3a2a0d(0x2db); if (_0x1925ac[_0x3a2a0d(0x30c)] > 0x32) _0x1925ac = _0x1925ac[_0x3a2a0d(0xab5)](0x0, 0x32) + _0x3a2a0d(0x2e7); _0x3cf4de[_0x3a2a0d(0xa0e)] = { 'sender': _0x55953e, 'content': _0x1925ac }, _0x4649dc(), _0x2bba3b(), _0x58cc75[_0x3a2a0d(0x4c1)](); } function _0x4649dc() { const _0x59905d = _0xe59ed1; if (_0x59905d(0x928) !== _0x59905d(0x928)) _0x5d0246 === 'world-book-checkboxes-container' ? _0x43b5d8() : _0xd6bea3(); else { if (!_0x3cf4de[_0x59905d(0xa0e)]) return; _0x1679ff['textContent'] = _0x59905d(0x4a3) + _0x3cf4de[_0x59905d(0xa0e)]['sender'], _0x174d98[_0x59905d(0x5f8)] = _0x3cf4de[_0x59905d(0xa0e)][_0x59905d(0x313)], _0x3f72c5[_0x59905d(0x937)]['display'] = _0x59905d(0x540); } } function _0x9f55b4() { const _0x51d60b = _0xe59ed1; _0x3cf4de['activeQuote'] = null, _0x3f72c5['style'][_0x51d60b(0x8a4)] = _0x51d60b(0xacf); } function _0x459e0a(_0x470016, _0x554101) { const _0x4c529d = _0xe59ed1, _0x2305db = document['getElementById']('music-widget'); _0x2305db && (_0x470016 === _0x4c529d(0x1bf) ? _0x2305db[_0x4c529d(0x937)][_0x4c529d(0x8a4)] = 'inline-block' : _0x2305db['style']['display'] = _0x4c529d(0xacf)); _0x19031a = _0x554101 || null, Object['values'](_0x1f908b)['forEach'](_0x53de59 => _0x53de59[_0x4c529d(0x4ad)][_0x4c529d(0x713)](_0x4c529d(0x5d1))); _0x1f908b[_0x470016] && _0x1f908b[_0x470016][_0x4c529d(0x4ad)]['add'](_0x4c529d(0x5d1)); if (_0x470016 !== _0x4c529d(0x2b9)) { if ('RFFUK' !== _0x4c529d(0x59a)) { const _0x104d96 = _0x20c190[_0x4c529d(0xb60)]('div'); _0x104d96['className'] = _0x4c529d(0x72f); const _0x482f07 = _0x466bcf[_0x4c529d(0xa99)] ? _0x5e450['createObjectURL'](_0x1c5cdb[_0x4c529d(0xa99)]) : _0x30ace8; _0x104d96[_0x4c529d(0x252)] = _0x4c529d(0x4d0) + _0x482f07 + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x588449[_0x4c529d(0x718)][_0x4c529d(0x536)] || _0x4c529d(0x546)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x59ef75[_0x4c529d(0x718)]['歌手'] || _0x4c529d(0x518)) + _0x4c529d(0xb34), _0x104d96['addEventListener'](_0x4c529d(0x2c5), () => { _0x37067b(_0x4cc28a); }), _0x4020d4[_0x4c529d(0x8fe)](_0x104d96); } else _0x4496b1[_0x4c529d(0x4ad)][_0x4c529d(0x713)](_0x4c529d(0x258)); } } function _0xe6351c(_0x4271ce) { const _0x4d589d = _0xe59ed1; if (_0x4271ce) _0x4496b1['classList'][_0x4d589d(0x44c)]('show-chat-view'); else { if (_0x4d589d(0x89d) !== _0x4d589d(0x89d)) { if (_0x3ab87b[_0x4d589d(0x84c)] === 'user') return _0x4030a1['userProfile']?.[_0x4d589d(0x382)] || _0x4d589d(0xb8f); if (_0x1e4ab3[_0x4d589d(0x105)]) { const _0x2ef40b = _0x54845f(_0x17b984[_0x4d589d(0x105)]); return _0x2ef40b?.[_0x4d589d(0x382)] || 'Unknown'; } if (_0x29c4f1?.[_0x4d589d(0x76d)] === _0x4d589d(0x86c)) { const _0x4e94b6 = _0x49540a(_0x51ebfa['participantIds'][0x0]); return _0x4e94b6?.[_0x4d589d(0x382)] || 'AI'; } return _0x4d589d(0x78c); } else _0x4496b1[_0x4d589d(0x4ad)][_0x4d589d(0x713)](_0x4d589d(0x258)); } } async function _0x8d695a() { const _0x531661 = _0xe59ed1; if (_0x531661(0x2d9) === 'Dkikv') _0x2bf21f[_0x531661(0x6bc)] === 'Enter' && !_0x1ed8c5[_0x531661(0x495)] && (_0x2fa91a['preventDefault'](), _0x5bef6c()); else { _0x3bdee2[_0x531661(0x252)] = ''; const _0x33bb89 = _0x3cf4de[_0x531661(0x27a)][_0x531661(0x48a)](_0x5d739a => { const _0x521756 = _0x531661; if (_0x5d739a[_0x521756(0x76d)] === _0x521756(0x86c)) { if ('BBQlV' !== _0x521756(0x2b8)) { const _0x49bf8c = _0xd97907(_0x5d739a[_0x521756(0x48f)][0x0]); return _0x49bf8c ? _0x47b504(_0x521756(0x54f) + _0x49bf8c['id']) : Promise[_0x521756(0x53d)](null); } else _0x233a30[_0x521756(0x91d)]('https://xhslink.com/m/5IgC1rniI2I', _0x521756(0x83a)); } else return _0x47b504('group_avatar_' + _0x5d739a['id']); }), _0x2c66bb = await Promise[_0x531661(0x6d5)](_0x33bb89); _0x3cf4de[_0x531661(0x27a)][_0x531661(0x8cf)]((_0x3813a5, _0x1904f5) => { const _0x82c41d = _0x531661, _0xdcfc5c = document[_0x82c41d(0xb60)]('li'); _0xdcfc5c[_0x82c41d(0x199)] = 'character-item', _0xdcfc5c[_0x82c41d(0x361)]['id'] = _0x3813a5['id']; let _0xd7b61b = _0x574d9b, _0x4b3272 = '群聊', _0x7280d9 = ''; const _0x43f90a = _0x2c66bb[_0x1904f5]; _0x43f90a && (_0xd7b61b = URL[_0x82c41d(0x9e4)](_0x43f90a)); if (_0x3813a5[_0x82c41d(0x76d)] === _0x82c41d(0x86c)) { const _0x254cb6 = _0xd97907(_0x3813a5[_0x82c41d(0x48f)][0x0]); if (_0x254cb6) { if (_0x82c41d(0x517) !== _0x82c41d(0xb2)) !_0x43f90a && (_0xd7b61b = _0x254cb6[_0x82c41d(0x3f1)] || _0x574d9b), _0x4b3272 = _0x254cb6[_0x82c41d(0x382)] || _0x82c41d(0x204), _0x7280d9 = _0x254cb6[_0x82c41d(0x43f)] || '私聊'; else { const _0x30b9aa = _0x5be4e9['author'] === _0x82c41d(0x32c) ? 'user' : 'ai', _0x3d19a6 = _0x5ed0cc[_0x82c41d(0x1b8)] === _0x82c41d(0x32c) ? _0x32ce24[_0x82c41d(0x382)] : _0x570f12(_0x481968[_0x82c41d(0x1b8)])[_0x82c41d(0x382)], _0x5d8e95 = _0x45744b[_0x82c41d(0xb60)](_0x82c41d(0xb0b)); _0x5d8e95[_0x82c41d(0x199)] = 'diary-entry\x20' + _0x30b9aa, _0x5d8e95[_0x82c41d(0x361)][_0x82c41d(0x554)] = _0x41ae7b[_0x82c41d(0x554)], _0x5d8e95[_0x82c41d(0x937)][_0x82c41d(0x686)] = 'none', _0x5d8e95[_0x82c41d(0x937)][_0x82c41d(0x40f)] = '0', _0x5d8e95['innerHTML'] = _0x82c41d(0x93b) + _0x3d19a6 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new _0x1aa1bb(_0x838932[_0x82c41d(0x554)])[_0x82c41d(0x118)](_0x82c41d(0x77e)) + _0x82c41d(0x84d) + _0xab05cf[_0x82c41d(0x313)][_0x82c41d(0xb53)](/\n/g, _0x82c41d(0x5e1)) + _0x82c41d(0x991), _0x10cdf0[_0x82c41d(0x8fe)](_0x5d8e95); } } else _0x4b3272 = _0x82c41d(0x7d6), _0x7280d9 = _0x82c41d(0x6c3); } else _0x4b3272 = _0x3813a5['name'] || _0x82c41d(0x5c0), _0x7280d9 = _0x3813a5[_0x82c41d(0x48f)]['length'] + '\x20个成员'; _0xdcfc5c[_0x82c41d(0x252)] = _0x82c41d(0x1a6) + _0xd7b61b + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x4b3272 + _0x82c41d(0x34b) + _0x7280d9 + _0x82c41d(0x29a), _0xdcfc5c['querySelector'](_0x82c41d(0x3a8))[_0x82c41d(0x25c)](_0x82c41d(0x2c5), () => { _0x14ae75(_0x3813a5['id']), _0xe6351c(!![]); }), _0x3bdee2['appendChild'](_0xdcfc5c); }); } } function _0x21419e() { const _0x11cecf = _0xe59ed1; if (_0x11cecf(0x28f) !== _0x11cecf(0x96a)) { const _0xb00ece = document[_0x11cecf(0x7ef)](_0x11cecf(0x84f)); _0xb00ece['innerHTML'] = ''; const _0x3a37b0 = _0x3cf4de[_0x11cecf(0xad3)][_0x11cecf(0x3f0)](_0x2a5330 => _0x3cf4de[_0x11cecf(0x27a)][_0x11cecf(0xa9f)](_0x1cc946 => _0x1cc946[_0x11cecf(0x76d)] === 'private' && _0x1cc946[_0x11cecf(0x48f)][_0x11cecf(0x5cc)](_0x2a5330['id']))); if (_0x3a37b0[_0x11cecf(0x30c)] === 0x0) { if (_0x11cecf(0x39d) === _0x11cecf(0x39d)) { _0xb00ece[_0x11cecf(0x252)] = _0x11cecf(0x6ec); return; } else _0x5d78a5[_0x11cecf(0x967)]('[' + _0x24e605(_0x2d5326) + ']\x20' + _0x3be7ba['content']); } _0x3a37b0[_0x11cecf(0x8cf)](_0x46118a => { const _0x501804 = _0x11cecf; if (_0x501804(0x769) !== _0x501804(0x468)) { const _0x423941 = document[_0x501804(0xb60)]('li'); _0x423941[_0x501804(0x199)] = _0x501804(0x956), _0x423941[_0x501804(0x361)][_0x501804(0x8f3)] = _0x46118a['id'], _0x423941[_0x501804(0x252)] = _0x501804(0x1a6) + (_0x46118a['avatar'] || _0x574d9b) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x46118a['name'] + _0x501804(0x34b) + (_0x46118a[_0x501804(0x43f)] || '私聊') + _0x501804(0x29a), _0x423941['addEventListener'](_0x501804(0x2c5), () => { const _0x485a20 = _0x501804; _0x485a20(0x7bd) !== 'CtkDZ' ? _0x2784a0(_0x46118a['id']) : (_0x490c43['worldBookCategories'] = [{ 'id': _0x485a20(0xa41), 'name': '默认分类' }], _0x4f2905['worldBooks'][_0x485a20(0x8cf)](_0x40b7ea => { const _0x6c0e67 = _0x485a20; !_0x40b7ea[_0x6c0e67(0x2da)] && (_0x40b7ea[_0x6c0e67(0x2da)] = _0x6c0e67(0xa41)); })); }), _0xb00ece[_0x501804(0x8fe)](_0x423941); } else _0x1abd05 += _0x501804(0x58a); }); } else _0x4b4870[_0x4b9c15]['addEventListener'](_0x11cecf(0x2c5), () => _0xb16028[_0x55996c]['click']()), _0x1a1e6b[_0x45c45b][_0x11cecf(0x25c)](_0x11cecf(0x9cb), _0x3d944c => { const _0x1a49d5 = _0x11cecf; _0x40f6ba(_0x4dbaea, _0x3d944c[_0x1a49d5(0x13b)][_0x1a49d5(0x27c)][0x0]); }); } async function _0x2784a0(_0x469737) { const _0x5c908a = _0xe59ed1; if ('PdfeF' === 'PdfeF') { const _0x93e1a = _0xd97907(_0x469737); if (!_0x93e1a) return; _0x3cf4de[_0x5c908a(0xac6)] = _0x469737, document[_0x5c908a(0x7ef)](_0x5c908a(0x8a6))[_0x5c908a(0x5f8)] = _0x93e1a[_0x5c908a(0x382)]; const _0x10b513 = document[_0x5c908a(0x7ef)](_0x5c908a(0x5f4)); _0x10b513['style'][_0x5c908a(0x6aa)] = _0x5c908a(0xacf), document['getElementById'](_0x5c908a(0x5d3))[_0x5c908a(0x252)] = _0x5c908a(0x2d0), document[_0x5c908a(0x7ef)](_0x5c908a(0x347))[_0x5c908a(0x5f8)] = '（正在回忆...）', document[_0x5c908a(0x7ef)](_0x5c908a(0x889))[_0x5c908a(0x5f8)] = '旁白', document[_0x5c908a(0x7ef)](_0x5c908a(0x829))[_0x5c908a(0x557)] = '', _0x459e0a(_0x5c908a(0x3b3), _0x5c908a(0x90)), setTimeout(async () => { const _0x9e7751 = _0x5c908a; try { const _0x32efa7 = await _0x47b504(_0x9e7751(0xb87) + _0x469737); _0x32efa7 && (_0x10b513[_0x9e7751(0x937)][_0x9e7751(0x6aa)] = 'url(\x27' + URL[_0x9e7751(0x9e4)](_0x32efa7) + '\x27)', _0x10b513[_0x9e7751(0x937)][_0x9e7751(0x143)] = _0x9e7751(0xa99), _0x10b513[_0x9e7751(0x937)][_0x9e7751(0x913)] = _0x9e7751(0x7be)); const _0x3777a0 = _0x3cf4de['chats'][_0x9e7751(0x6f0)](_0x181906 => _0x181906[_0x9e7751(0x76d)] === _0x9e7751(0x86c) && _0x181906['participantIds'][_0x9e7751(0x5cc)](_0x469737)); _0x3777a0 ? _0x9e7751(0x5bf) === _0x9e7751(0x5bf) ? (_0x3cf4de[_0x9e7751(0xa9a)] = _0x3777a0['id'], _0x3a3bc1(), _0x5c8276()) : _0x5749c9[_0x9e7751(0x967)]({ 'time': _0x60c4fd, 'text': _0x11d8a2 }) : _0x3cf4de[_0x9e7751(0x103)] = []; _0x5c21c8(_0x469737), _0x1c8937(), _0x14e5b5(); if (_0x34852c) clearInterval(_0x34852c); _0x41e8b2(), _0x34852c = setInterval(_0x41e8b2, 0x2710), document[_0x9e7751(0x7ef)](_0x9e7751(0xa53))[_0x9e7751(0x937)][_0x9e7751(0x8a4)] = 'block'; } catch (_0x3383ed) { console[_0x9e7751(0x5e3)](_0x9e7751(0x3fd), _0x3383ed), document['getElementById'](_0x9e7751(0x5d3))['innerHTML'] = '<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>'; } }, 0x32); } else _0xb931cf[_0x5c908a(0x62f)] = null; } function _0x14e5b5() { const _0x1f6cb0 = _0xe59ed1; if (_0x1f6cb0(0x94c) === _0x1f6cb0(0x94c)) { const _0x1c0f6c = document[_0x1f6cb0(0x7ef)](_0x1f6cb0(0x5d3)); _0x1c0f6c[_0x1f6cb0(0x252)] = ''; const _0x5872c1 = _0x1c0f6c[_0x1f6cb0(0x5cb)]('#message-anchor'); if (_0x5872c1) _0x5872c1[_0x1f6cb0(0x713)](); _0x3cf4de[_0x1f6cb0(0x103)] && _0x3cf4de[_0x1f6cb0(0x103)][_0x1f6cb0(0x8cf)]((_0x33ba68, _0x5493a1) => { const _0x2159cc = _0x1f6cb0; if (_0x2159cc(0x14a) === 'ttxKV') { if (!_0x33ba68[_0x2159cc(0x8f5)] || _0x33ba68[_0x2159cc(0x84c)] === _0x2159cc(0x24d)) return; const _0x2f70b6 = document['createElement']('p'); _0x2f70b6[_0x2159cc(0x361)][_0x2159cc(0x47a)] = _0x5493a1; const _0x42d6d0 = _0x33ba68[_0x2159cc(0x313)][_0x2159cc(0xb53)](/\n/g, _0x2159cc(0x5e1)); let _0x5db737 = '', _0x23c4a6 = ''; const _0x510085 = _0x1af79f(_0x3cf4de[_0x2159cc(0xa9a)]); if (_0x33ba68[_0x2159cc(0x84c)] === 'user') _0x5db737 = _0x510085[_0x2159cc(0x382)] || '我', _0x23c4a6 = _0x2159cc(0x192); else { if (_0x33ba68[_0x2159cc(0x84c)] === _0x2159cc(0x78b)) { const _0x18dc38 = _0xd97907(_0x33ba68['senderId'] || _0x3cf4de[_0x2159cc(0xac6)]); _0x5db737 = _0x18dc38?.[_0x2159cc(0x382)] || '角色', _0x23c4a6 = _0x2159cc(0x4e6); } } _0x2f70b6[_0x2159cc(0x937)][_0x2159cc(0x9ad)] = _0x2159cc(0x70a), _0x2f70b6['style'][_0x2159cc(0x9f7)] = '15px\x2020px', _0x2f70b6[_0x2159cc(0x937)][_0x2159cc(0xb76)] = _0x2159cc(0x3ef), _0x2f70b6[_0x2159cc(0x937)][_0x2159cc(0x83c)] = _0x2159cc(0x4a9), _0x5db737 ? _0x2f70b6[_0x2159cc(0x252)] = _0x2159cc(0x638) + _0x23c4a6 + '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20' + (_0x23c4a6 === _0x2159cc(0x192) ? _0x2159cc(0xaf0) : _0x2159cc(0x6cb)) + _0x2159cc(0x88a) + _0x5db737 + _0x2159cc(0x7d2) + _0x42d6d0 : (_0x2f70b6['className'] = 'narrator', _0x2f70b6[_0x2159cc(0x937)][_0x2159cc(0x799)] = _0x2159cc(0xb64), _0x2f70b6[_0x2159cc(0x937)][_0x2159cc(0x501)] = _0x2159cc(0x6d9), _0x2f70b6[_0x2159cc(0x252)] = _0x42d6d0), _0x1c0f6c[_0x2159cc(0x8fe)](_0x2f70b6); } else _0x168a4d['setItem'](_0x3e5fa8, _0x4a1a1a['stringify'](_0x5e8eff)); }); if (_0x3cf4de[_0x1f6cb0(0x2c7)]) { let _0x41ac45 = _0x1c0f6c[_0x1f6cb0(0x5cb)]('.typing-indicator'); !_0x41ac45 && (_0x1f6cb0(0x50c) !== 'oVMKa' ? _0x404629[_0x1f6cb0(0x7ef)](_0x1f6cb0(0xb4))[_0x1f6cb0(0x5d8)]() : (_0x41ac45 = document[_0x1f6cb0(0xb60)](_0x1f6cb0(0xb0b)), _0x41ac45[_0x1f6cb0(0x199)] = 'typing-indicator', _0x41ac45[_0x1f6cb0(0x5f8)] = _0x1f6cb0(0x86e), _0x41ac45[_0x1f6cb0(0x937)][_0x1f6cb0(0x9ad)] = 'rgba(0,\x200,\x200,\x200.4)', _0x41ac45['style']['padding'] = _0x1f6cb0(0x4dc), _0x41ac45['style']['borderRadius'] = _0x1f6cb0(0x3ef), _0x1c0f6c[_0x1f6cb0(0x8fe)](_0x41ac45))); } const _0x18a3d0 = document[_0x1f6cb0(0xb60)](_0x1f6cb0(0xb0b)); _0x18a3d0['id'] = 'message-anchor', _0x1c0f6c[_0x1f6cb0(0x8fe)](_0x18a3d0), setTimeout(() => { const _0x1763ef = _0x1f6cb0; _0x18a3d0['scrollIntoView']({ 'behavior': _0x1763ef(0x33e), 'block': 'end' }); }, 0x32); } else _0x3cb914[_0x1f6cb0(0x5e3)](_0x1f6cb0(0x513), _0x8522bb), _0x1a1d13(_0x1f6cb0(0x11a) + _0x49fbbb[_0x1f6cb0(0x99)]); } function _0x482e39() { const _0x160288 = _0xe59ed1, _0x1cc7cc = document[_0x160288(0x5cb)](_0x160288(0x63a)); if (!_0x1cc7cc) return; _0x1cc7cc['id'] === _0x160288(0xb56) ? _0x14e5b5() : _0x200086(); } function _0x200086() { const _0x52069b = _0xe59ed1, _0x58cd63 = _0x3cf4de[_0x52069b(0x103)][_0x52069b(0x3f0)](_0x5f4fd7 => !_0x5f4fd7[_0x52069b(0x8f5)] && _0x5f4fd7[_0x52069b(0x84c)] !== _0x52069b(0x24d)); if (_0x58cd63[_0x52069b(0x30c)] > _0x3cf4de[_0x52069b(0x255)]) { let _0x4c4161 = _0x40cf72[_0x52069b(0x5cb)](_0x52069b(0x881)); !_0x4c4161 && (_0x4c4161 = document[_0x52069b(0xb60)](_0x52069b(0x434)), _0x4c4161[_0x52069b(0x5f8)] = _0x52069b(0x358), _0x4c4161[_0x52069b(0x199)] = 'form-button\x20load-more-btn', _0x4c4161[_0x52069b(0x937)][_0x52069b(0x198)] = _0x52069b(0x33e), _0x4c4161[_0x52069b(0x937)][_0x52069b(0x1d9)] = _0x52069b(0x4fa), _0x4c4161[_0x52069b(0x937)][_0x52069b(0x9f7)] = '8px\x2016px', _0x4c4161['onclick'] = () => { const _0x43ae55 = _0x52069b; if ('LniIV' !== _0x43ae55(0x51c)) _0x1eeb71 = [..._0x173784, ..._0x1d05c2]; else { const _0x436289 = _0x40cf72, _0x5b0983 = _0x436289[_0x43ae55(0x60d)], _0x3d1b00 = _0x436289[_0x43ae55(0x340)]; _0x3cf4de['displayedMessageCount'] += 0x64, _0x200086(), requestAnimationFrame(() => { const _0x4c7b33 = _0x43ae55; if (_0x4c7b33(0xc3) !== 'vhwYl') { const _0xed1dc9 = _0x436289[_0x4c7b33(0x60d)]; _0x436289[_0x4c7b33(0x340)] = _0x3d1b00 + (_0xed1dc9 - _0x5b0983); } else _0x337572[_0x4c7b33(0x5f8)] = _0x4792e1['name'], _0x4ea17c[_0x4c7b33(0x5f8)] = _0x4c7b33(0x741), _0x163d8d(_0x1a6e81, 'normal'); }); } }, _0x40cf72[_0x52069b(0x537)] ? _0x40cf72[_0x52069b(0x58d)](_0x4c4161, _0x40cf72['firstChild']) : _0x40cf72[_0x52069b(0x8fe)](_0x4c4161)); } else { const _0x583938 = _0x40cf72[_0x52069b(0x5cb)](_0x52069b(0x881)); if (_0x583938) _0x583938[_0x52069b(0x713)](); } Array['from'](_0x40cf72[_0x52069b(0x4ef)])[_0x52069b(0x8cf)](_0x4c6f75 => { const _0x559ee9 = _0x52069b; 'uNrTs' !== _0x559ee9(0xb02) ? !_0x4c6f75[_0x559ee9(0x4ad)]['contains'](_0x559ee9(0xab0)) && _0x4c6f75[_0x559ee9(0x713)]() : _0x1d92e1['setItem']('chatHistory_' + _0x3d879b['activeChatId'], _0x7cd6fa[_0x559ee9(0x56e)](_0x8a08f1['conversationHistory'])); }); const _0x28589c = _0x58cd63[_0x52069b(0x6cd)](-_0x3cf4de[_0x52069b(0x255)]); _0x28589c[_0x52069b(0x8cf)](_0x5a7ce8 => { const _0xa0b4e6 = _0x52069b; if (_0xa0b4e6(0x5c7) !== _0xa0b4e6(0x454)) { const _0x40ff70 = _0x3cf4de[_0xa0b4e6(0x103)][_0xa0b4e6(0xb6c)](_0x5a7ce8); _0x40ff70 > -0x1 && _0x1bf5f6(_0x5a7ce8, _0x40ff70); } else _0x59b7ce(_0xa0b4e6(0x8a1), '聊天'); }); if (_0x3cf4de[_0x52069b(0x2c7)]) { let _0x33a676 = _0x40cf72[_0x52069b(0x5cb)](_0x52069b(0x9bf)); !_0x33a676 && (_0x33a676 = document[_0x52069b(0xb60)](_0x52069b(0xb0b)), _0x33a676[_0x52069b(0x199)] = 'typing-indicator', _0x33a676[_0x52069b(0x5f8)] = _0x52069b(0x8ee), document[_0x52069b(0x7ef)](_0x52069b(0xa4b))[_0x52069b(0x8fe)](_0x33a676)); } _0x28589c['length'] <= _0x3cf4de[_0x52069b(0x255)] && setTimeout(() => { const _0x4c36d6 = _0x52069b; _0x40cf72[_0x4c36d6(0x340)] = _0x40cf72[_0x4c36d6(0x60d)]; }, 0x0); } function _0x1bf5f6(_0x2e4843, _0x3fccd3) { const _0x315576 = _0xe59ed1; if (_0x315576(0x631) === _0x315576(0x16a)) { const _0x496cc9 = _0x12a8fe[_0x315576(0xb60)]('li'); _0x496cc9['className'] = _0x315576(0x956), _0x496cc9['dataset'][_0x315576(0x8f3)] = _0x3f99f7['id'], _0x496cc9[_0x315576(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x47c3ac['avatar'] || _0x1db121) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x1b07cc[_0x315576(0x382)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x1ff6bc['remark'] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x496cc9[_0x315576(0x25c)](_0x315576(0x2c5), () => { _0x566de9(_0x11e050['id']); }), _0x199203[_0x315576(0x8fe)](_0x496cc9); } else { const { role: _0x1f8ead, content: _0x41c5b8, displayUrl: _0xab5c50, image: _0x27f709, senderId: _0x87398 } = _0x2e4843, _0x4b9401 = document[_0x315576(0x7ef)](_0x315576(0x267)), _0x56e2d6 = _0x41c5b8 && _0x41c5b8[_0x315576(0x4ca)]()[_0x315576(0xb05)]('<div') && _0x41c5b8[_0x315576(0x4ca)]()[_0x315576(0x3bc)](_0x315576(0x4e1)); if (_0x56e2d6) { const _0x28e62e = document[_0x315576(0xb60)](_0x315576(0xb0b)); return _0x28e62e[_0x315576(0x199)] = 'full-width-module-container', _0x28e62e['dataset'][_0x315576(0x47a)] = _0x3fccd3, _0x28e62e[_0x315576(0x252)] = _0x41c5b8, _0x4b9401[_0x315576(0x8fe)](_0x28e62e), _0x28e62e; } const _0x4e73f9 = _0x1f8ead === _0x315576(0x78b) ? 'ai' : _0x1f8ead, _0x308313 = _0x5234d7(), _0x185fcc = document[_0x315576(0xb60)](_0x315576(0xb0b)); _0x185fcc['classList']['add'](_0x315576(0xa1c), _0x4e73f9), _0x185fcc[_0x315576(0x361)]['historyIndex'] = _0x3fccd3; const _0x225d13 = document[_0x315576(0xb60)](_0x315576(0xb0b)); _0x225d13[_0x315576(0x199)] = _0x315576(0x7c2); let _0x28b376 = '', _0x21d0f0 = '', _0x1b2092 = null; if (_0x1f8ead === _0x315576(0x32c)) { if (_0x315576(0xab9) === 'PGoPk') { const _0xad7bb0 = _0x3d5797(_0x1a9415); if (_0xad7bb0) { const _0x53eeaf = _0x575f2e[_0x315576(0xb60)](_0x315576(0x308)); _0x53eeaf[_0x315576(0x35c)] = _0xad7bb0['id'], _0x53eeaf[_0x315576(0x5f8)] = _0xad7bb0[_0x315576(0x382)], _0xcdd41d['appendChild'](_0x53eeaf); } } else { const _0x39ab73 = _0x1af79f(_0x3cf4de['activeChatId']); _0x28b376 = _0x39ab73[_0x315576(0x3f1)] || _0x2e585f; const _0x4ea3d7 = _0xd97907(_0x308313?.[_0x315576(0x48f)][0x0]); _0x4ea3d7 && ('mNyxc' === 'mNyxc' ? _0x21d0f0 = _0x4ea3d7[_0x315576(0x4fc)] || '' : _0x5e5564 = _0x43196b[_0x315576(0x6e7)](_0x6f592a)); } } else { if (_0x308313?.[_0x315576(0x76d)] === 'private') 'LcrmK' !== 'oXvvB' ? _0x1b2092 = _0xd97907(_0x308313[_0x315576(0x48f)][0x0]) : (_0x4e5709(![]), _0x289df4[_0x315576(0x2c7)] = ![]); else _0x308313?.['type'] === _0x315576(0x861) && _0x87398 && (_0x1b2092 = _0xd97907(_0x87398)); _0x28b376 = _0x1b2092?.[_0x315576(0x3f1)] || _0x574d9b, _0x21d0f0 = _0x1b2092?.[_0x315576(0x2d5)] || ''; } const _0x3ffc74 = _0x24c710(_0x28b376, _0x21d0f0); if (_0x1f8ead !== _0x315576(0x32c) && _0x1b2092) { const _0x3a12c4 = _0x3ffc74['querySelector'](_0x315576(0x8a5)); _0x47b504(_0x315576(0x54f) + _0x1b2092['id'])[_0x315576(0x683)](_0x993c43 => { const _0x57f743 = _0x315576; if (_0x993c43) { if (_0x57f743(0xa0c) !== 'iCBfY') { const _0x3d3f1b = _0x785f06[0x0][_0x57f743(0x4ca)](), _0x191011 = _0x54cb3e[0x1][_0x57f743(0x4ca)](), _0x3a9adc = { '歌名': _0x57f743(0x536), '艺术家': '歌手', '专辑': '专辑' }; _0x3a9adc[_0x3d3f1b] && (_0xac5145[_0x3a9adc[_0x3d3f1b]] = _0x191011); } else _0x3a12c4[_0x57f743(0x557)] = URL[_0x57f743(0x9e4)](_0x993c43); } }); } const _0x5cda0a = document[_0x315576(0xb60)](_0x315576(0xb0b)); _0x5cda0a[_0x315576(0x4ad)][_0x315576(0x44c)](_0x315576(0x99), _0x4e73f9); if (_0x308313?.['type'] === _0x315576(0x86c)) { const _0x4963e9 = _0x308313[_0x315576(0x48f)][0x0]; _0x5cda0a['classList'][_0x315576(0x44c)](_0x315576(0x3d8) + _0x4963e9); } if (_0x2e4843[_0x315576(0xb68)]) { const _0x34e020 = document[_0x315576(0xb60)]('div'); _0x34e020[_0x315576(0x199)] = 'quoted-message-in-bubble', _0x34e020[_0x315576(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>' + _0x2e4843[_0x315576(0xb68)][_0x315576(0x93)] + _0x315576(0x8ef) + _0x2e4843[_0x315576(0xb68)][_0x315576(0x313)] + _0x315576(0xea), _0x5cda0a['appendChild'](_0x34e020); } if (_0xab5c50) 'rfmZU' === _0x315576(0xa00) ? (_0x5e561e = { 'characterId': _0x499d81, 'entries': [] }, _0x51730e[_0x315576(0x865)][_0x315576(0x967)](_0x50c36a)) : (_0x5cda0a[_0x315576(0x4ad)][_0x315576(0x44c)](_0x315576(0xae0)), _0x5cda0a[_0x315576(0x252)] += _0x315576(0x519) + _0xab5c50 + _0x315576(0x1d8)); else { if (_0x2e4843['image'] || _0x2e4843[_0x315576(0x6b9)]) { _0x5cda0a[_0x315576(0x4ad)][_0x315576(0x44c)](_0x315576(0x9bd)); const _0x4b5b35 = document[_0x315576(0xb60)](_0x315576(0x5b3)); _0x4b5b35[_0x315576(0x4ad)][_0x315576(0x44c)]('message-image-content'), _0x5cda0a[_0x315576(0x8fe)](_0x4b5b35), _0x2e4843[_0x315576(0x9bd)] ? _0x4b5b35['src'] = _0x2e4843[_0x315576(0x9bd)] : (_0x4b5b35['src'] = _0x315576(0xa11), _0x47b504(_0x2e4843[_0x315576(0x6b9)])['then'](_0x9b7f28 => { const _0x7b6e82 = _0x315576; if (_0x7b6e82(0x81f) !== _0x7b6e82(0x946)) { if (_0x9b7f28) _0x4b5b35[_0x7b6e82(0x557)] = URL['createObjectURL'](_0x9b7f28); else _0x4b5b35[_0x7b6e82(0x5d5)] = _0x7b6e82(0x5b9); } else { const _0x57e1e2 = _0x2351c3[_0x7b6e82(0x9b1)](_0x21574e, _0x7b6e82(0x571)), _0x288062 = _0x57e1e2[_0x7b6e82(0x326)](_0x5ced68), _0x1b7eb4 = _0x288062[_0x7b6e82(0x222)](_0x1582f4); _0x1b7eb4[_0x7b6e82(0x78f)] = () => _0x482adb(_0x1b7eb4[_0x7b6e82(0xb95)] ? _0x1b7eb4[_0x7b6e82(0xb95)][_0x7b6e82(0x3e1)] : null), _0x1b7eb4[_0x7b6e82(0x1bb)] = () => _0x458055(_0x1b7eb4[_0x7b6e82(0x5e3)]); } })[_0x315576(0x7c0)](() => _0x4b5b35[_0x315576(0x5d5)] = _0x315576(0x5b9))), _0x41c5b8 && (_0x5cda0a[_0x315576(0x252)] += _0x315576(0x4ae) + _0x41c5b8 + _0x315576(0x3dd)); } else { if (_0x2e4843[_0x315576(0x76d)] === _0x315576(0x4d2)) { if ('DNDOe' === _0x315576(0x4b0)) return '昨天\x20' + _0x38cd24; else { _0x5cda0a[_0x315576(0x4ad)]['add']('transfer'); const _0x159044 = _0x2e4843['role'] === _0x315576(0x32c) ? _0x1af79f(_0x3cf4de[_0x315576(0xa9a)]) : _0xd97907(_0x2e4843[_0x315576(0x105)]), _0x121123 = _0x2e4843[_0x315576(0x9d9)] === _0x1af79f(_0x3cf4de[_0x315576(0xa9a)])['id'] ? _0x1af79f(_0x3cf4de[_0x315576(0xa9a)]) : _0xd97907(_0x2e4843[_0x315576(0x9d9)]), _0x241f44 = _0x159044?.[_0x315576(0x382)] ? _0x159044[_0x315576(0x382)] + _0x315576(0x59d) : '转账', _0x4d583e = _0x121123?.[_0x315576(0x382)] ? _0x315576(0x701) + _0x121123[_0x315576(0x382)] : '转账'; _0x5cda0a[_0x315576(0x252)] += '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20' + _0x241f44 + _0x315576(0x26f) + _0x2e4843[_0x315576(0x359)][_0x315576(0x196)](0x2) + _0x315576(0x1e5) + _0x4d583e + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>'; } } else { if (_0x2e4843[_0x315576(0x76d)] === _0x315576(0x59f)) { _0x5cda0a[_0x315576(0x4ad)][_0x315576(0x44c)](_0x315576(0x42f)); const _0x820110 = document[_0x315576(0xb60)]('div'); _0x820110[_0x315576(0x199)] = 'listen-together-card\x20no-action-modal'; const _0x4c176f = _0x2e4843[_0x315576(0x84c)] === _0x315576(0x32c) ? _0x1af79f(_0x3cf4de[_0x315576(0xa9a)])[_0x315576(0x382)] || '你' : _0xd97907(_0x2e4843[_0x315576(0x105)])?.['name'] || 'TA', _0x34eace = _0x315576(0xb0d) + _0x2e4843['timestamp'], _0x42d2e = _0x315576(0x422) + _0x34eace + _0x315576(0x855) + _0x574d9b + '\x22>'; _0x2e4843[_0x315576(0x684)] ? _0x315576(0x7dd) === 'HrTod' ? _0x820110['innerHTML'] = _0x315576(0xb3f) + _0x42d2e + _0x315576(0x147) + _0x2e4843['songName'] + _0x315576(0x892) + _0x2e4843[_0x315576(0xb08)] + _0x315576(0x4b8) : _0x546c7e[_0x315576(0x557)] = _0xa1b72c['createObjectURL'](_0x2201f6) : _0x820110['innerHTML'] = _0x315576(0x5b8) + _0x4c176f + '\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>' + _0x42d2e + '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>' + _0x2e4843['songName'] + _0x315576(0x892) + _0x2e4843[_0x315576(0xb08)] + '</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x2e4843['songId'] + _0x315576(0xa4a), _0x5cda0a[_0x315576(0x8fe)](_0x820110), _0x2e4843[_0x315576(0x6b3)] && setTimeout(() => { const _0x4b35a3 = _0x315576; _0x4b35a3(0x983) !== _0x4b35a3(0x983) ? _0x192710 = _0x144ad6[_0x4b35a3(0x382)] : _0x47b504(_0x2e4843['coverId'])[_0x4b35a3(0x683)](_0x1573ba => { const _0xa2c5fe = _0x4b35a3, _0x44730e = document[_0xa2c5fe(0x7ef)](_0x34eace); if (_0x44730e && _0x1573ba) _0x44730e[_0xa2c5fe(0x557)] = URL[_0xa2c5fe(0x9e4)](_0x1573ba); }); }, 0x0); } else { if (_0x2e4843['type'] === _0x315576(0x42f) && _0x2e4843[_0x315576(0x6fd)]) { if (_0x315576(0x16c) === _0x315576(0x345)) { _0x4786fa('还没有我的回复可以重新生成哦。'); return; } else { _0x5cda0a[_0x315576(0x4ad)][_0x315576(0x44c)](_0x315576(0x42f)); const _0x5a5f4e = document[_0x315576(0xb60)]('div'); _0x5a5f4e['className'] = _0x315576(0x6d4), _0x5a5f4e['dataset'][_0x315576(0x3e6)] = 'msg_' + _0x2e4843[_0x315576(0x554)]; const _0x10b035 = _0x315576(0xb0d) + _0x2e4843[_0x315576(0x554)]; let _0x56e9b6 = _0x315576(0x519) + _0x574d9b + _0x315576(0x55a) + _0x10b035 + _0x315576(0x28e); _0x5a5f4e[_0x315576(0x252)] = _0x315576(0xa30) + _0x56e9b6 + _0x315576(0x31f) + _0x2e4843[_0x315576(0x6fd)] + _0x315576(0x6c4) + _0x2e4843[_0x315576(0xb08)] + _0x315576(0x29e) + (_0x2e4843[_0x315576(0x4c7)] ? '▶' : '⚠') + _0x315576(0x4e1), _0x5cda0a[_0x315576(0x8fe)](_0x5a5f4e), setTimeout(() => { const _0x264e60 = _0x315576, _0x5eaea3 = document[_0x264e60(0x7ef)](_0x10b035); if (!_0x5eaea3) return; if (_0x2e4843[_0x264e60(0x6b3)]) _0x264e60(0x9fa) === 'igakm' ? (_0x386cbd(_0x264e60(0x8d8)), _0x599796(() => _0x427edf[_0x264e60(0xa0d)](), 0x5dc)) : _0x47b504(_0x2e4843['coverId'])['then'](_0x4d3f96 => { const _0x267f7f = _0x264e60; if (_0x4d3f96) _0x5eaea3[_0x267f7f(0x557)] = URL['createObjectURL'](_0x4d3f96); }); else _0x2e4843['coverUrl'] && (_0x5eaea3[_0x264e60(0x557)] = _0x2e4843[_0x264e60(0xa08)]); }, 0x0), _0x2e4843['playableUrl'] && (_0x315576(0x9ca) === _0x315576(0x8c1) ? _0x13b679[_0x315576(0x8cf)](_0x44b7b2 => { const _0x1e3d01 = _0x315576, _0x3e6728 = _0x418052[_0x1e3d01(0xb60)](_0x1e3d01(0xb0b)); _0x3e6728[_0x1e3d01(0x199)] = _0x1e3d01(0x363), _0x3e6728[_0x1e3d01(0x5f8)] = _0x44b7b2['content'], _0x953fa6[_0x1e3d01(0x8fe)](_0x3e6728); }) : _0x5a5f4e['addEventListener']('click', function () { const _0x3e66ae = _0x315576; if (_0x3e66ae(0x289) === _0x3e66ae(0x289)) { const _0x33ad94 = document['getElementById'](_0x3e66ae(0x216)), _0x345114 = document[_0x3e66ae(0x53f)](_0x3e66ae(0x321)), _0x435f92 = this[_0x3e66ae(0x5cb)]('.music-share-play-icon'), _0x264728 = _0x33ad94['src']['includes'](_0x2e4843[_0x3e66ae(0x4c7)]) && !_0x33ad94[_0x3e66ae(0x88b)]; _0x345114['forEach'](_0x31ae13 => { _0x31ae13 !== _0x435f92 && (_0x31ae13['textContent'] = '▶'); }); !_0x264728 && document[_0x3e66ae(0x7ef)](_0x3e66ae(0xb4))['pause'](); if (_0x264728) { if (_0x3e66ae(0x7e6) === _0x3e66ae(0x82a)) { _0x27437a && _0x29f890[_0x3e66ae(0x967)](_0x6691e2); _0x828d93 = {}; const _0xa27351 = _0x188a62[_0x3e66ae(0xab5)](0x2), _0x1abace = _0xa27351[_0x3e66ae(0x35a)](/:\s(.+)/); if (_0x1abace[_0x3e66ae(0x30c)] > 0x1) { const _0x1ef5c4 = _0x1abace[0x0][_0x3e66ae(0x4ca)](), _0x10aa08 = _0x1abace[0x1][_0x3e66ae(0x4ca)]()[_0x3e66ae(0xb53)](/^"|"$/g, ''); _0x5d9084[_0x1ef5c4] = _0x10aa08; } } else _0x33ad94[_0x3e66ae(0x5d8)](), _0x435f92[_0x3e66ae(0x5f8)] = '▶'; } else _0x33ad94[_0x3e66ae(0x557)] = _0x2e4843['playableUrl'], _0x33ad94[_0x3e66ae(0x28a)](), _0x435f92[_0x3e66ae(0x5f8)] = '❚❚'; } else { if (!_0x5b1b19) return; const _0x408f78 = _0x3bd47f[_0x3e66ae(0x716)] ? _0x3c3e06[_0x3e66ae(0x716)][0x0][_0x3e66ae(0x29d)] : _0x5e4c38[_0x3e66ae(0x29d)]; _0x1af64b = _0x408f78 - _0x5379f0; if (_0x300d64 < 0x0) { const _0x3df094 = _0x530534[_0x3e66ae(0xb84)](_0x3c0ecd), _0x5ae323 = 0.4, _0x36d277 = _0x488f74[_0x3e66ae(0x835)](_0x3df094, _0x5ae323) * 0x14; _0x431b0a[_0x3e66ae(0x937)][_0x3e66ae(0x40a)] = 'translateY(-' + _0x36d277 + _0x3e66ae(0x19b); } } })); } } else { if (_0x41c5b8) { const _0x158e9e = document[_0x315576(0xb60)]('p'); _0x158e9e[_0x315576(0x252)] = _0x41c5b8, _0x158e9e[_0x315576(0x937)]['margin'] = '0', _0x5cda0a[_0x315576(0x8fe)](_0x158e9e); } } } } } } if (_0x4e73f9 === _0x315576(0x32c)) { if ('fFPAm' !== 'oRQgX') _0x225d13[_0x315576(0x8fe)](_0x5cda0a), _0x225d13['appendChild'](_0x3ffc74); else { _0x207d52('内容不能为空！'); return; } } else _0x315576(0xa63) !== _0x315576(0x832) ? (_0x225d13[_0x315576(0x8fe)](_0x3ffc74), _0x225d13[_0x315576(0x8fe)](_0x5cda0a)) : _0xd2c6fd[_0x315576(0x637)]({ 'behavior': _0x315576(0x33e), 'block': _0x315576(0x268) }); _0x185fcc[_0x315576(0x8fe)](_0x225d13); const _0x2f32ec = document[_0x315576(0xb60)]('div'); return _0x2f32ec[_0x315576(0x199)] = _0x315576(0x554), _0x2f32ec[_0x315576(0x5f8)] = _0xcefae8(_0x2e4843[_0x315576(0x554)]), _0x185fcc[_0x315576(0x8fe)](_0x2f32ec), _0x4b9401[_0x315576(0x8fe)](_0x185fcc), _0x185fcc; } } let _0x5ce9e1 = null; function _0x3d782e(_0x3dd147) { const _0x1be749 = _0xe59ed1; if (window[_0x1be749(0x9b9)]()[_0x1be749(0x1ad)]() || _0x3dd147[_0x1be749(0x434)] !== 0x0) return; const _0x20fbdf = _0x3dd147['target'][_0x1be749(0xb09)]('.message-container'), _0x4b6ed = _0x3dd147['target']['closest'](_0x1be749(0x527)); if (!_0x20fbdf || _0x4b6ed) return; const _0x5d73a1 = parseInt(_0x20fbdf[_0x1be749(0x361)][_0x1be749(0x47a)], 0xa); if (isNaN(_0x5d73a1)) return; const _0x5ba0cd = () => { const _0x23a111 = _0x1be749; _0x23a111(0x782) !== 'aistZ' ? (clearTimeout(_0x5ce9e1), document[_0x23a111(0x23b)](_0x23a111(0xa8e), _0x5ba0cd), document['removeEventListener'](_0x23a111(0x299), _0x5ba0cd), document[_0x23a111(0x23b)](_0x23a111(0x947), _0x5ba0cd), document['removeEventListener'](_0x23a111(0x300), _0x5ba0cd)) : _0x40d412[_0x23a111(0x7ef)]('music-screen')[_0x23a111(0x937)]['setProperty'](_0x23a111(0x5b6), _0x23a111(0x891) + _0x25b0e8 + ')'); }, _0x324835 = () => { const _0xd08a6e = _0x1be749; _0x5ba0cd(), _0x5ce9e1 = setTimeout(() => { _0x5078fb(_0x5d73a1); }, 0x258), document['addEventListener']('mouseup', _0x5ba0cd), document[_0xd08a6e(0x25c)](_0xd08a6e(0x299), _0x5ba0cd), document[_0xd08a6e(0x25c)](_0xd08a6e(0x947), _0x5ba0cd), document[_0xd08a6e(0x25c)](_0xd08a6e(0x300), _0x5ba0cd); }; _0x324835(); } const _0x486ff2 = document['getElementById']('chat-messages'); _0x486ff2 && (_0xe59ed1(0x736) !== _0xe59ed1(0xbf) ? (_0x486ff2[_0xe59ed1(0x25c)](_0xe59ed1(0x318), _0x3d782e), _0x486ff2[_0xe59ed1(0x25c)]('touchstart', _0x3d782e, { 'passive': ![] }), _0x486ff2[_0xe59ed1(0x25c)](_0xe59ed1(0x37f), _0x2aa9af => _0x2aa9af[_0xe59ed1(0x3e2)]())) : (_0x3faa36['name'] = _0x1f4916, _0x2d3f20['boundUserProfileId'] = _0x3f3291, _0xa1c2ad['memberCharacterIds'] = _0x49f011)); function _0x1897fd() { const _0x1445b4 = _0xe59ed1; if (_0x1445b4(0x61d) !== _0x1445b4(0x61d)) _0x578063[_0x1445b4(0x455)] = _0x2944ae, _0x1ef234['onerror'] = _0x454113 => _0x43d60d(_0x454113['target'][_0x1445b4(0x5e3)]); else { const _0x551881 = _0x5234d7(); if (!_0x551881) { _0x22dbd9[_0x1445b4(0x5f8)] = _0x1445b4(0x8a8); return; } if (_0x551881[_0x1445b4(0x76d)] === _0x1445b4(0x86c)) { const _0x538498 = _0xd97907(_0x551881[_0x1445b4(0x48f)][0x0]); _0x22dbd9[_0x1445b4(0x5f8)] = _0x538498 ? _0x538498[_0x1445b4(0x382)] : '未知角色'; } else _0x22dbd9[_0x1445b4(0x5f8)] = _0x551881[_0x1445b4(0x382)] || _0x1445b4(0x3d4) + _0x551881[_0x1445b4(0x48f)][_0x1445b4(0x30c)] + ')'; } } function _0x4371cd(_0x2bec97) { const _0xa49bf8 = _0xe59ed1; if (_0xa49bf8(0xff) === _0xa49bf8(0xff)) { const _0x4ac129 = document['querySelector'](_0xa49bf8(0xa28)); _0x4ac129 && (_0xa49bf8(0x9be) === 'MHArz' ? _0x4ac129[_0xa49bf8(0x713)]() : (_0x3f2a15(![]), _0x1a3cd3[_0xa49bf8(0x5e3)](_0xa49bf8(0x9dc), _0x28211f), _0x3b5a6b(_0xa49bf8(0x8d5) + _0x4c6137[_0xa49bf8(0x99)]))); const _0x2aa20b = document[_0xa49bf8(0x5cb)](_0xa49bf8(0x63a)); if (_0x2aa20b && (_0x2aa20b['id'] === 'meeting-view-screen' || _0x2aa20b['id'] === 'chat-screen')) { if ('dcPyo' !== 'lwIZW') _0x482e39(); else { const _0xe21308 = _0x34e53d[_0xa49bf8(0xb6c)]('{'), _0xc6a3ab = _0x4f7748[_0xa49bf8(0x885)]('}'); if (_0xe21308 >= 0x0 && _0xc6a3ab > _0xe21308) return _0xf9e1cf[_0xa49bf8(0x6cd)](_0xe21308, _0xc6a3ab + 0x1); return _0x3d039c; } } else { if (_0xa49bf8(0xad9) !== _0xa49bf8(0xad9)) { const _0x21306a = _0x5c7c30['transaction'](_0x3c117f, _0xa49bf8(0x12b)), _0x2aec3a = _0x21306a[_0xa49bf8(0x326)](_0x1f0b03), _0x509c63 = _0x2aec3a[_0xa49bf8(0x336)](_0x568b1e); _0x509c63[_0xa49bf8(0x78f)] = () => _0x5b68cc(_0x509c63['result']), _0x509c63[_0xa49bf8(0x1bb)] = () => _0x5439db(_0x509c63[_0xa49bf8(0x5e3)]); } else { const _0x5c058f = document[_0xa49bf8(0x53f)](_0xa49bf8(0x9bf)); _0x5c058f[_0xa49bf8(0x8cf)](_0x357760 => _0x357760[_0xa49bf8(0x713)]()); } } } else _0x47ba64['worldBooks'] = _0x3960f8['worldBooks'][_0xa49bf8(0x3f0)](_0x344cb6 => _0x344cb6['id'] !== _0x48453f), _0xc5084d[_0xa49bf8(0xad3)][_0xa49bf8(0x8cf)](_0xfbca13 => { const _0x5dd965 = _0xa49bf8; _0xfbca13[_0x5dd965(0x91e)] && (_0xfbca13[_0x5dd965(0x91e)] = _0xfbca13[_0x5dd965(0x91e)]['filter'](_0x58915b => _0x58915b !== _0x5e36f9)); }), _0x1836f8(), _0x55b40d('条目已删除。'), _0x15af6e(), _0x2404ce(_0xa49bf8(0x8ac), 'worldBookEditor'); } function _0x3a2de2() { const _0x1bd8cd = _0xe59ed1; _0x3cf4de[_0x1bd8cd(0x2c7)] && _0x3cf4de[_0x1bd8cd(0xaca)] && (_0x1bd8cd(0x6d8) !== _0x1bd8cd(0x4c9) ? (console[_0x1bd8cd(0x76a)](_0x1bd8cd(0x8e0)), _0x3cf4de[_0x1bd8cd(0xaca)]['abort'](_0x1bd8cd(0x4f5)), _0x3cf4de[_0x1bd8cd(0xaca)] = null) : _0x5b14de(_0x2acad5 + 0x1)), _0x3cf4de['isGenerating'] = ![], _0x4371cd(![]); } function _0x5234d7() { const _0x197bea = _0xe59ed1; if (_0x197bea(0x87c) === 'eVCeS') return _0x3cf4de[_0x197bea(0x27a)]['find'](_0x5e26bf => _0x5e26bf['id'] === _0x3cf4de[_0x197bea(0xa9a)]); else _0x321293[_0x197bea(0x4ad)][_0x197bea(0x713)]('visible'), _0x427059[_0x197bea(0x4ad)]['remove'](_0x197bea(0xa98)); } function _0xd97907(_0x2f6fcb) { const _0x1450d1 = _0xe59ed1; return _0x3cf4de[_0x1450d1(0xad3)]['find'](_0x5e3a62 => _0x5e3a62['id'] === _0x2f6fcb); } function _0x37a30a(_0x22e1be) { const _0x48b843 = _0xe59ed1; if (_0x48b843(0x547) === _0x48b843(0x547)) { _0x3cf4de['characters'] = _0x3cf4de['characters']['filter'](_0x498df2 => _0x498df2['id'] !== _0x22e1be), _0x3cf4de[_0x48b843(0x27a)][_0x48b843(0x8cf)](_0x2348db => { const _0xd6526c = _0x48b843; _0x2348db[_0xd6526c(0x76d)] === 'group' && (_0xd6526c(0x3f2) === 'oECup' ? _0x2348db['participantIds'] = _0x2348db['participantIds']['filter'](_0x33e293 => _0x33e293 !== _0x22e1be) : (_0x3b18a0[_0xd6526c(0x5e3)](_0xd6526c(0x3b1), _0x405f90), _0x141386({ 'role': _0xd6526c(0x78b), 'content': _0xd6526c(0xa32) + _0x1ef07f[_0xd6526c(0x99)] }, _0x2b775b[_0xd6526c(0x103)][_0xd6526c(0x30c)] - 0x1))); }); const _0x2a8eab = _0x3cf4de[_0x48b843(0x27a)][_0x48b843(0x6f0)](_0x4825f5 => _0x4825f5[_0x48b843(0x76d)] === _0x48b843(0x86c) && _0x4825f5[_0x48b843(0x48f)][_0x48b843(0x5cc)](_0x22e1be)); _0x2a8eab && _0x2d0d2b(_0x2a8eab['id']), _0x3cf4de['chats'] = _0x3cf4de[_0x48b843(0x27a)][_0x48b843(0x3f0)](_0x869c6d => _0x869c6d[_0x48b843(0x76d)] !== 'group' || _0x869c6d[_0x48b843(0x48f)][_0x48b843(0x30c)] > 0x1), _0x3a3bc1(), _0x8d695a(); } else _0x1fae54[_0x48b843(0x5f8)] = '▶'; } function _0x2d0d2b(_0x55c20b) { const _0x335c68 = _0xe59ed1; _0x3cf4de[_0x335c68(0x27a)] = _0x3cf4de[_0x335c68(0x27a)]['filter'](_0x500bf7 => _0x500bf7['id'] !== _0x55c20b); try { localStorage[_0x335c68(0x65e)]('chatHistory_' + _0x55c20b); } catch (_0xef964b) { console['error'](_0x335c68(0xb32) + _0x55c20b, _0xef964b); } _0x3cf4de[_0x335c68(0xa9a)] === _0x55c20b && (_0x3cf4de['activeChatId'] = _0x3cf4de['chats'][0x0]?.['id'] || null, _0x14ae75(_0x3cf4de[_0x335c68(0xa9a)])), _0x3a3bc1(); } async function _0x14ae75(_0x80619) { const _0x2b5615 = _0xe59ed1; _0x3cf4de[_0x2b5615(0xa9a)] !== _0x80619 && (_0x3a2de2(), _0x3cf4de['displayedMessageCount'] = 0x64); if (!_0x80619) { _0x3cf4de[_0x2b5615(0xa9a)] = null, _0x3a3bc1(), _0xe6351c(![]), document[_0x2b5615(0x7ef)](_0x2b5615(0xa4b))['style'][_0x2b5615(0x6aa)] = ''; return; } _0x3cf4de[_0x2b5615(0xa9a)] = _0x80619, _0x3a3bc1(), _0x1897fd(), _0x40cf72[_0x2b5615(0x252)] = '', _0x2a565e(!![], '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书。非强制性，只是手机会有点卡，想继续聊下去也可以。'), setTimeout(async () => { const _0x562a87 = _0x2b5615; if ('qmDTL' === _0x562a87(0x883)) _0x275d9e[_0x562a87(0x967)](_0xa47b2b[_0x562a87(0x6cd)](_0x3f58ec, _0x5a603b + _0x5e336b)); else try { _0x5c8276(); const _0x13b8ab = _0x5234d7(), _0x4700b0 = document['getElementById'](_0x562a87(0xa4b)); let _0x37c167 = null; if (_0x13b8ab) { if (_0x13b8ab['type'] === _0x562a87(0x86c)) { const _0x11ecc7 = _0x13b8ab[_0x562a87(0x48f)][0x0]; _0x25c080(_0x11ecc7), _0x37c167 = await _0x47b504('char_wallpaper_' + _0x11ecc7); } else _0x37c167 = await _0x47b504('group_bg_' + _0x13b8ab['id']); _0x37c167 ? (_0x4700b0[_0x562a87(0x937)][_0x562a87(0x6aa)] = 'url(\x27' + URL[_0x562a87(0x9e4)](_0x37c167) + '\x27)', _0x4700b0[_0x562a87(0x937)][_0x562a87(0x143)] = 'cover', _0x4700b0[_0x562a87(0x937)][_0x562a87(0x913)] = _0x562a87(0x7be)) : _0x4700b0[_0x562a87(0x937)][_0x562a87(0x6aa)] = ''; } _0x200086(); } catch (_0x57b7d2) { console[_0x562a87(0x5e3)](_0x562a87(0x6d6), _0x57b7d2), _0x5bf34b(_0x562a87(0x329) + _0x57b7d2[_0x562a87(0x99)]); } finally { if (_0x562a87(0xa6d) === _0x562a87(0xa6d)) _0x2a565e(![]); else { _0x3b3b33 && (_0x5b4c51(_0x671b02), _0x532b2f = null); _0x4f4502[_0x562a87(0x7ef)]('snoop-app-view-container')[_0x562a87(0x937)][_0x562a87(0x8a4)] = _0x562a87(0xacf); const _0x219c2a = _0x5869cd[_0x562a87(0x7ef)](_0x562a87(0x1df)); if (_0x219c2a) _0x219c2a['remove'](); const _0x2b9ed8 = _0x379dd0['getElementById'](_0x562a87(0x530)); if (_0x2b9ed8) _0x2b9ed8['remove'](); _0x3906a5(_0x562a87(0x859), _0x562a87(0x9c)); } } }, 0x32); } async function _0x3e7038() { const _0x189104 = _0xe59ed1; if (_0x189104(0x98) !== _0x189104(0x4bd)) { if (_0x3cf4de[_0x189104(0x2c7)]) { _0x5bf34b(_0x189104(0x96f)); return; } const _0x5e9cd0 = _0x3cf4de[_0x189104(0x103)]; if (_0x5e9cd0[_0x189104(0x30c)] === 0x0) return; let _0x51034d = -0x1; for (let _0x160500 = _0x5e9cd0[_0x189104(0x30c)] - 0x1; _0x160500 >= 0x0; _0x160500--) { if (_0x5e9cd0[_0x160500][_0x189104(0x84c)] === _0x189104(0x32c)) { _0x51034d = _0x160500; break; } } if (_0x51034d === -0x1 || _0x51034d === _0x5e9cd0[_0x189104(0x30c)] - 0x1) { _0x5bf34b(_0x189104(0xa1f)); return; } _0x5e9cd0[_0x189104(0x673)](_0x51034d + 0x1), _0x3cf4de[_0x189104(0x4a5)] = [], _0x162973(), _0x14e5b5(), _0x5c21c8(_0x3cf4de[_0x189104(0xac6)]), setTimeout(() => { const _0x56c584 = _0x189104; if (_0x56c584(0x145) !== _0x56c584(0x90f)) _0xe6ae60(); else { if (_0x2bd0d3[_0x56c584(0xaef)]) return; const _0x22b3d1 = _0x4b2a4b[_0x56c584(0x676)]; if (_0x22b3d1 <= 0x0) return; _0x56e03e[_0x56c584(0xaef)] = !![]; const _0x5926e0 = _0x22b3d1 - 0x1, _0x26eae9 = _0x211c05[_0x56c584(0x7ef)](_0x56c584(0x57a) + _0x22b3d1), _0x40737a = _0x3f9b98['getElementById'](_0x56c584(0x57a) + _0x5926e0); _0x26eae9 && _0x40737a ? (_0x40737a['classList']['add'](_0x56c584(0x1eb)), _0x26eae9[_0x56c584(0x4ad)]['add'](_0x56c584(0x60c)), _0x40737a['classList'][_0x56c584(0x44c)](_0x56c584(0x61e)), _0x3e4610(() => { const _0x486857 = _0x56c584; _0x26eae9['classList']['remove'](_0x486857(0x61e), _0x486857(0x60c)), _0x40737a[_0x486857(0x4ad)]['remove'](_0x486857(0x1eb)), _0x30c8cd[_0x486857(0x676)] = _0x5926e0, _0x3a3ddd(), _0x35c7ca['isAnimatingDiary'] = ![]; }, 0x2bc)) : _0x149fc2[_0x56c584(0xaef)] = ![]; } }, 0x64); } else { if (_0x422123[_0x189104(0x84c)] === _0x189104(0x32c)) return _0x198fba[_0x189104(0x2b5)]?.[_0x189104(0x382)] || _0x189104(0xb8f); if (_0x3b0f93[_0x189104(0x76d)] === _0x189104(0x861)) { const _0x26eff8 = _0x506e69[_0x189104(0x105)] ? _0x3fe35(_0x381231[_0x189104(0x105)]) : null; return _0x26eff8?.['name'] || _0x189104(0x3c1); } else { const _0x52fa95 = _0x432870(_0x489293[_0x189104(0x48f)][0x0]); return _0x52fa95?.[_0x189104(0x382)] || 'AI'; } } } async function _0x5e6e64() { const _0x927768 = _0xe59ed1; if ('MIKuV' !== 'MIKuV') { const _0xb9021e = _0x65da4a['image'][_0x927768(0x35a)](',')[0x1], _0x40e634 = _0x3d9340[_0x927768(0x9bd)][_0x927768(0xab5)](_0x11fc8e[_0x927768(0x9bd)][_0x927768(0xb6c)](':') + 0x1, _0x2f867a[_0x927768(0x9bd)][_0x927768(0xb6c)](';')) || _0x927768(0x3cb); _0x5a1803[_0x927768(0x967)]({ 'inline_data': { 'mime_type': _0x40e634, 'data': _0xb9021e } }); } else { if (_0x3cf4de[_0x927768(0x2c7)]) { if ('owyKB' !== _0x927768(0x3e9)) _0x973824 = _0x1331e6[_0x927768(0x6b6)](_0x927768(0x524) + _0xcb67a9[_0x927768(0xa9a)]); else { _0x5bf34b(_0x927768(0x397)); return; } } const _0x359cdf = _0x3cf4de[_0x927768(0x103)]; if (_0x359cdf[_0x927768(0x30c)] === 0x0) return; let _0x3ef593 = -0x1; for (let _0x45c95c = _0x359cdf['length'] - 0x1; _0x45c95c >= 0x0; _0x45c95c--) { if (_0x927768(0x5fb) !== _0x927768(0x5fb)) _0x5ca761(_0x4b08dd); else { if (_0x359cdf[_0x45c95c][_0x927768(0x84c)] === _0x927768(0x32c)) { _0x3ef593 = _0x45c95c; break; } } } if (_0x3ef593 === -0x1 || _0x3ef593 === _0x359cdf['length'] - 0x1) { _0x5bf34b(_0x927768(0x931)); return; } _0x359cdf[_0x927768(0x673)](_0x3ef593 + 0x1), _0x162973(), _0x482e39(), setTimeout(() => { const _0x55d862 = _0x927768; if (_0x55d862(0x7f2) !== _0x55d862(0x7f2)) { const _0x1005fa = _0x176c07[_0x55d862(0xad3)][_0x55d862(0x6f0)](_0x3f24bb => _0x319de2[_0x55d862(0x48f)][_0x55d862(0x5cc)](_0x3f24bb['id']) && _0x3f24bb[_0x55d862(0x382)] === _0x69d8b2); if (_0x1005fa) _0x264f8d = _0x1005fa['id']; } else _0xe6ae60(); }, 0x64); } } function _0x3449f3(_0xc99e25 = null) { const _0x2939ea = _0xe59ed1; if (_0x2939ea(0x9c1) === 'ZXoUP') { if (!_0x487960[_0x2939ea(0x9a1)](_0x8ddfdd)) return _0x2939ea(0x4b5); if (_0xc022a[_0x2939ea(0x30c)] === 0x0) return _0x2939ea(0x30b); return _0x1b580d[_0x2939ea(0xb11)]((_0x39916d, _0x4ef5e8) => new _0x287ec9(_0x4ef5e8[_0x2939ea(0x554)]) - new _0x532c5c(_0x39916d[_0x2939ea(0x554)])), _0x2939ea(0x158) + _0x72f8d5['map'](_0x5c589f => _0x2939ea(0x3f3) + (_0x5c589f[_0x2939ea(0x168)] || _0x2939ea(0x5be)) + _0x2939ea(0x532) + (_0x5c589f['activity_description'] || '') + _0x2939ea(0xac3) + (_0x5c589f[_0x2939ea(0x554)] || '') + _0x2939ea(0x13f))[_0x2939ea(0x863)]('') + _0x2939ea(0x4e1); } else { const _0x4d827e = _0xc99e25 ?? _0x58cc75[_0x2939ea(0x35c)][_0x2939ea(0x4ca)](); if (_0x4d827e === '' || !_0x3cf4de[_0x2939ea(0xa9a)]) return; const _0x46c1c8 = document['querySelector']('.screen.active'), _0x448376 = _0x46c1c8['id'] === _0x2939ea(0xb56), _0x3453b5 = { 'role': _0x2939ea(0x32c), 'content': _0x4d827e, 'timestamp': Date[_0x2939ea(0x740)](), 'isOffline': _0x448376 }; _0x3cf4de['activeQuote'] && (_0x3453b5['quotedMessage'] = { ..._0x3cf4de[_0x2939ea(0xa0e)] }); _0x3cf4de[_0x2939ea(0x103)][_0x2939ea(0x967)](_0x3453b5); const _0x26aee9 = _0x1bf5f6(_0x3453b5, _0x3cf4de[_0x2939ea(0x103)][_0x2939ea(0x30c)] - 0x1); _0x26aee9 && (_0x40cf72[_0x2939ea(0x340)] = _0x40cf72[_0x2939ea(0x60d)]), _0x162973(), _0x58cc75[_0x2939ea(0x35c)] = '', _0x9f55b4(); } } function _0x3c6d33(_0x3a129e) { const _0x140e2e = _0xe59ed1; if ('OMump' !== _0x140e2e(0x307)) { if (!_0x3a129e || !_0x3cf4de[_0x140e2e(0xa9a)]) return; const _0x1f8ac6 = { 'role': _0x140e2e(0x32c), 'content': '[用户发送了表情：' + _0x3a129e[_0x140e2e(0x382)] + ']', 'displayUrl': _0x3a129e[_0x140e2e(0x98a)], 'timestamp': Date['now']() }; _0x3cf4de[_0x140e2e(0x103)][_0x140e2e(0x967)](_0x1f8ac6), _0x1bf5f6(_0x1f8ac6, _0x3cf4de[_0x140e2e(0x103)]['length'] - 0x1), _0x162973(), _0x455ac3[_0x140e2e(0x4ad)]['remove'](_0x140e2e(0xfb)); } else _0xcb688d(_0x157c7c); } async function _0x4edf45(_0x3f48b3) { const _0x245759 = _0xe59ed1; if (_0x245759(0x702) !== 'FAgYj') { const _0x4005f6 = _0x3f48b3[_0x245759(0x13b)][_0x245759(0x27c)][0x0]; if (!_0x4005f6 || !_0x3cf4de[_0x245759(0xa9a)]) return; _0x2a565e(!![], _0x245759(0x914)); try { const _0xbae0ef = await _0x250c4e(_0x4005f6, 0x320, 0.8, !![]), _0x273552 = 'chat_image_' + Date[_0x245759(0x740)](); await _0x30635e(_0x273552, _0xbae0ef); const _0x18718c = _0x58cc75[_0x245759(0x35c)][_0x245759(0x4ca)](); _0x58cc75['value'] = ''; const _0x4fa69e = { 'role': 'user', 'content': _0x18718c, 'imageId': _0x273552, 'timestamp': Date[_0x245759(0x740)]() }; _0x3cf4de[_0x245759(0x103)][_0x245759(0x967)](_0x4fa69e), _0x1bf5f6(_0x4fa69e, _0x3cf4de[_0x245759(0x103)]['length'] - 0x1), _0x162973(); } catch (_0x3b1d0c) { _0x5bf34b(_0x245759(0x3fc) + _0x3b1d0c['message']); } finally { _0x2a565e(![]), _0x3f48b3[_0x245759(0x13b)][_0x245759(0x35c)] = ''; } } else _0x3a4088[_0x245759(0x967)](..._0x265c9d(_0x47ebf5)); } async function _0x24a3be() { const _0x5b114b = _0xe59ed1; if (_0x5b114b(0x249) === _0x5b114b(0x428)) return new _0x6f15dc((_0x4b6606, _0x2c92e6) => { const _0x26fe39 = _0x5b114b, _0x5c665f = new _0x1c953a(); _0x5c665f[_0x26fe39(0x46c)] = () => _0x4b6606(_0x5c665f['result']), _0x5c665f[_0x26fe39(0x1bb)] = _0x2c92e6, _0x5c665f[_0x26fe39(0x186)](_0x5ad648); }); else { if (!_0x3cf4de['activeChatId']) return; const _0x3b9713 = await _0x200407(); if (!_0x3b9713) return; _0x5bf34b(_0x5b114b(0xb7b)); try { if ('PbgsV' !== 'PbgsV') { const _0x15c97e = new _0x4ae4e9(_0x4c3338[_0x5b114b(0x554)])['toLocaleTimeString'](_0x5b114b(0x77e), { 'hour': '2-digit', 'minute': '2-digit' }); _0x5d1c59[_0x5b114b(0x313)] && _0x115507[_0x5b114b(0x967)]('[' + _0x15c97e + _0x5b114b(0x248) + _0x39fcb1(_0x41f44d) + ']\x20' + _0x2673a1(_0x5894b3[_0x5b114b(0x313)])[_0x5b114b(0x4ca)]()); } else { const _0x59683e = await _0x5de43b(_0x3b9713[_0x5b114b(0x6fd)], _0x3b9713[_0x5b114b(0xb08)]), _0x3276d5 = { 'role': 'user', 'type': _0x5b114b(0x42f), 'content': '[用户分享了音乐：' + _0x3b9713[_0x5b114b(0x6fd)] + '\x20-\x20' + _0x3b9713['artist'] + ']', 'songName': _0x3b9713[_0x5b114b(0x6fd)], 'artist': _0x3b9713['artist'], 'coverUrl': _0x59683e[_0x5b114b(0xa99)], 'playableUrl': _0x59683e[_0x5b114b(0x98a)], 'timestamp': Date[_0x5b114b(0x740)]() }; _0x3cf4de[_0x5b114b(0x103)][_0x5b114b(0x967)](_0x3276d5), _0x162973(), _0x200086(); } } catch (_0x5175c8) { console[_0x5b114b(0x5e3)](_0x5b114b(0x378), _0x5175c8), _0x5bf34b(_0x5b114b(0xaf3) + _0x5175c8[_0x5b114b(0x99)]); } } } function _0x241c35(_0x3ad70f, _0x37fead = 0x78) { const _0x2b2dfe = _0xe59ed1; if (_0x2b2dfe(0xb2f) === _0x2b2dfe(0xb2f)) { const _0x368fa1 = _0x3d973b => { const _0x45741c = _0x2b2dfe; if (_0x3d973b['role'] === _0x45741c(0x32c)) return _0x3cf4de[_0x45741c(0x2b5)]?.[_0x45741c(0x382)] || 'User'; if (_0x3d973b[_0x45741c(0x105)]) { const _0x298c2e = _0xd97907(_0x3d973b[_0x45741c(0x105)]); return _0x298c2e?.[_0x45741c(0x382)] || _0x45741c(0x3c1); } if (_0x3ad70f?.['type'] === _0x45741c(0x86c)) { if (_0x45741c(0xa3e) !== _0x45741c(0x8c8)) { const _0x12e77c = _0xd97907(_0x3ad70f[_0x45741c(0x48f)][0x0]); return _0x12e77c?.[_0x45741c(0x382)] || 'AI'; } else _0x5f37ba = _0x36a277[_0x45741c(0x3f0)](_0x4cfd0e => _0x4cfd0e && typeof _0x4cfd0e === 'object' && typeof _0x4cfd0e[_0x45741c(0x84c)] === 'string' && typeof _0x4cfd0e[_0x45741c(0x313)] !== _0x45741c(0x141)); } return _0x45741c(0x78c); }, _0x197c8f = _0x3cf4de[_0x2b2dfe(0x103)][_0x2b2dfe(0x6cd)](-_0x37fead), _0x4d78b7 = []; for (const _0x15dbd8 of _0x197c8f) { if (_0x15dbd8[_0x2b2dfe(0x203)]) { if ('HfLSS' === 'HfLSS') _0x4d78b7[_0x2b2dfe(0x967)]('[' + _0x368fa1(_0x15dbd8) + _0x2b2dfe(0x337) + (_0x15dbd8['content']?.[_0x2b2dfe(0xd2)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else return _0x2ed3cf; } else { if (_0x15dbd8[_0x2b2dfe(0x9bd)]) { const _0x46c941 = _0x15dbd8[_0x2b2dfe(0x313)] ? '\x20' + _0x15dbd8[_0x2b2dfe(0x313)] : ''; _0x4d78b7[_0x2b2dfe(0x967)]('[' + _0x368fa1(_0x15dbd8) + _0x2b2dfe(0x4a2) + _0x46c941); } else _0x15dbd8[_0x2b2dfe(0x313)] && _0x4d78b7[_0x2b2dfe(0x967)]('[' + _0x368fa1(_0x15dbd8) + ']\x20' + _0x15dbd8[_0x2b2dfe(0x313)]); } } return _0x4d78b7[_0x2b2dfe(0x863)]('\x0a'); } else { const _0x537361 = _0x558555[_0x2b2dfe(0x7ef)]('lock-screen-overlay'); _0x537361 && (_0x537361[_0x2b2dfe(0x4ad)][_0x2b2dfe(0x713)](_0x2b2dfe(0x2f9)), _0x537361['style']['transform'] = '', _0x537361['style']['opacity'] = ''); } } function _0x5c6167(_0x54d5a1, _0x4d1489) { const _0x403082 = _0xe59ed1; if (_0x403082(0x974) !== 'tHVjo') { if (!_0x54d5a1 || !_0x4d1489) return null; const _0x12e0fe = _0x4d1489[_0x403082(0xd2)](/@([^\s:：,，。!?]+)/); if (!_0x12e0fe) return null; const _0x25f839 = _0x12e0fe[0x1][_0x403082(0x812)](); for (const _0xf0308f of _0x54d5a1[_0x403082(0x48f)]) { const _0x5ab296 = _0xd97907(_0xf0308f); if (!_0x5ab296?.[_0x403082(0x382)]) continue; if (_0x5ab296[_0x403082(0x382)][_0x403082(0x812)]() === _0x25f839) return _0x5ab296; if (_0x5ab296[_0x403082(0x382)][_0x403082(0x812)]()[_0x403082(0xb05)](_0x25f839)) return _0x5ab296; } return null; } else _0xf98a37[_0x403082(0x8f1)](), _0x4fc4af[_0x403082(0x510)][_0x403082(0x936)](_0x37d79f[_0x403082(0x35c)])[_0x403082(0x683)](() => { const _0x5b4b1f = _0x403082; _0x331277(_0x5b4b1f(0x753)); })[_0x403082(0x7c0)](_0x444bcf => { _0x62a382('复制失败了，哼。'); }); } function _0xfdedc7(_0x1fa619) { const _0x27e215 = _0xe59ed1; if (_0x27e215(0x508) !== _0x27e215(0x508)) _0x41bd16(_0x27e215(0xc0)); else { const _0x3ad7b5 = _0x1fa619['indexOf']('{'), _0x2c1531 = _0x1fa619['lastIndexOf']('}'); if (_0x3ad7b5 >= 0x0 && _0x2c1531 > _0x3ad7b5) return _0x1fa619[_0x27e215(0x6cd)](_0x3ad7b5, _0x2c1531 + 0x1); return _0x1fa619; } } function _0x9d7cc6(_0x43b2db, _0x66ebac, _0x3bc30d) { const _0x98e28 = _0xe59ed1; if (_0x98e28(0xb4d) === _0x98e28(0xb4d)) { const _0x50273d = new Map(_0x66ebac['map'](_0x227feb => [String(_0x227feb['id']), _0x227feb])), _0x5bf912 = _0x29fd1f => String(_0x29fd1f || '')[_0x98e28(0x812)]()[_0x98e28(0xb53)](/\s+/g, ''), _0x12577f = new Map(_0x66ebac[_0x98e28(0x48a)](_0x3fae6d => [_0x5bf912(_0x3fae6d[_0x98e28(0x382)]), _0x3fae6d])), _0x2af575 = new Set(_0x3bc30d), _0x3effd4 = { 'events': [] }; for (const _0x50ea77 of _0x43b2db?.['events'] || []) { const _0x383dc1 = _0x50ea77[_0x98e28(0x105)] ?? _0x50ea77['sender'] ?? _0x50ea77[_0x98e28(0x580)] ?? _0x50ea77[_0x98e28(0x5b4)] ?? _0x50ea77['role'] ?? _0x50ea77['name']; if (!_0x383dc1) continue; let _0x426fdf = _0x50273d[_0x98e28(0x222)](String(_0x383dc1)) || _0x12577f['get'](_0x5bf912(_0x383dc1)); if (!_0x426fdf) continue; const _0x4dc5e2 = (_0x50ea77[_0x98e28(0x366)] || _0x50ea77[_0x98e28(0x76d)] || _0x98e28(0x993))[_0x98e28(0x812)](); if (_0x4dc5e2 === 'sticker') { const _0x1e2206 = (_0x50ea77[_0x98e28(0xae0)] ?? _0x50ea77[_0x98e28(0xb07)] ?? _0x50ea77['emote'] ?? _0x50ea77[_0x98e28(0x7ec)])?.[_0x98e28(0x4ca)](); if (_0x1e2206 && _0x2af575[_0x98e28(0x86b)](_0x1e2206)) _0x3effd4[_0x98e28(0x1d2)]['push']({ 'senderId': _0x426fdf['id'], 'kind': 'sticker', 'sticker': _0x1e2206 }); else { const _0x54c590 = String(_0x50ea77['content'] ?? _0x50ea77[_0x98e28(0x993)] ?? '')['trim']() || _0x98e28(0x264) + (_0x1e2206 || '未知表情') + ']'; if (_0x54c590) _0x3effd4[_0x98e28(0x1d2)][_0x98e28(0x967)]({ 'senderId': _0x426fdf['id'], 'kind': 'text', 'content': _0x54c590 }); } } else { if (_0x4dc5e2 === 'music' && _0x50ea77[_0x98e28(0x6fd)] && _0x50ea77['artist']) _0x3effd4[_0x98e28(0x1d2)][_0x98e28(0x967)]({ 'senderId': _0x426fdf['id'], 'kind': _0x98e28(0x42f), 'songName': _0x50ea77[_0x98e28(0x6fd)], 'artist': _0x50ea77[_0x98e28(0xb08)] }); else { if (_0x98e28(0x640) === _0x98e28(0x640)) { const _0x4364b6 = String(_0x50ea77[_0x98e28(0x313)] ?? _0x50ea77[_0x98e28(0x993)] ?? _0x50ea77['message'] ?? '')['trim'](); if (_0x4364b6) _0x3effd4[_0x98e28(0x1d2)][_0x98e28(0x967)]({ 'senderId': _0x426fdf['id'], 'kind': _0x98e28(0x993), 'content': _0x4364b6 }); } else { const _0x2da099 = _0x2fae70[0x1]['replace'](/\\"/g, '\x22')[_0x98e28(0xb53)](/\\n/g, '\x0a')[_0x98e28(0x4ca)](); if (_0x2da099) _0x427473['push'](_0x2da099); } } } } return _0x3effd4; } else _0x5f4504(); } async function _0x4dfba9(_0x49db70) { const _0x5d461d = _0xe59ed1; if (!_0x49db70 || !Array[_0x5d461d(0x9a1)](_0x49db70[_0x5d461d(0x1d2)]) || _0x49db70[_0x5d461d(0x1d2)][_0x5d461d(0x30c)] === 0x0) return; const _0x492cb8 = _0x565922 => _0x565922 + Math[_0x5d461d(0x1e8)](Math['random']() * 0x190); let _0x4b9be9 = 0x1f4; for (const _0x10f21e of _0x49db70['events']) { await new Promise(_0x2951be => setTimeout(_0x2951be, _0x492cb8(_0x4b9be9))), _0x4b9be9 = 0x2bc; const _0x29d3eb = _0x3cf4de[_0x5d461d(0x103)]['at'](-0x1)?.['isOffline'] ?? ![], _0x16b370 = { 'role': _0x5d461d(0x78b), 'senderId': _0x10f21e[_0x5d461d(0x105)], 'timestamp': Date[_0x5d461d(0x740)](), 'isOffline': _0x29d3eb }; if (_0x10f21e['kind'] === _0x5d461d(0x674)) { Object[_0x5d461d(0x7a2)](_0x16b370, { 'type': 'html', 'content': _0x10f21e[_0x5d461d(0x313)] }), _0x1bf5f6(_0x16b370, -0x1), _0x40cf72[_0x5d461d(0x340)] = _0x40cf72[_0x5d461d(0x60d)]; continue; } if (_0x10f21e[_0x5d461d(0x366)] === _0x5d461d(0xae0)) { if (_0x5d461d(0x26e) === _0x5d461d(0xb78)) _0x18efd6['warn'](_0x5d461d(0x611), _0x145886); else { const _0x469d8d = _0x35cf89['find'](_0x414cf9 => _0x414cf9[_0x5d461d(0x382)] === _0x10f21e[_0x5d461d(0xae0)]); _0x469d8d && (Object['assign'](_0x16b370, { 'content': _0x5d461d(0x92c) + _0x469d8d[_0x5d461d(0x382)] + ']', 'displayUrl': _0x469d8d[_0x5d461d(0x98a)] }), _0x3cf4de['conversationHistory']['push'](_0x16b370), _0x162973(), _0x1bf5f6(_0x16b370, _0x3cf4de[_0x5d461d(0x103)]['length'] - 0x1), _0x40cf72[_0x5d461d(0x340)] = _0x40cf72[_0x5d461d(0x60d)]); continue; } } if (_0x10f21e[_0x5d461d(0x366)] === _0x5d461d(0x42f) && _0x10f21e[_0x5d461d(0x6fd)] && _0x10f21e['artist']) { if (_0x5d461d(0x862) !== _0x5d461d(0x862)) _0x2c4ebf['quotedMessage'] = { 'sender': _0xe78f95[0x1][_0x5d461d(0x4ca)](), 'content': _0xbcf87b[0x2][_0x5d461d(0x4ca)]() }, _0x4c3142[_0x5d461d(0x313)] = _0x2d3d3e[_0x5d461d(0xab5)](_0x7b3acd[0x0][_0x5d461d(0x30c)])[_0x5d461d(0x4ca)](); else { const { songName: _0x52d38b, artist: _0x1aba41 } = _0x10f21e; Object[_0x5d461d(0x7a2)](_0x16b370, { 'type': _0x5d461d(0x42f), 'content': _0x5d461d(0x61f) + _0x52d38b + '\x20-\x20' + _0x1aba41 + ']', 'songName': _0x52d38b, 'artist': _0x1aba41 }); try { if (_0x5d461d(0x65c) !== _0x5d461d(0x6b4)) { const _0x2aebd4 = await _0x5de43b(_0x52d38b, _0x1aba41); _0x16b370[_0x5d461d(0xa08)] = _0x2aebd4['cover'], _0x16b370[_0x5d461d(0x4c7)] = _0x2aebd4[_0x5d461d(0x98a)]; } else { const _0x2499b4 = _0x1c73ba[_0x5d461d(0x5ef)](); _0x2499b4[_0x5d461d(0x78f)] = () => _0x463631(_0x2499b4[_0x5d461d(0xb95)]), _0x2499b4[_0x5d461d(0x1bb)] = () => _0x4c0879(_0x2499b4[_0x5d461d(0x5e3)]); } } catch (_0xfb797d) { } _0x3cf4de[_0x5d461d(0x103)][_0x5d461d(0x967)](_0x16b370), _0x162973(), _0x482e39(); continue; } } if (_0x10f21e[_0x5d461d(0x366)] === _0x5d461d(0x993)) { const _0x5e84aa = (_0x10f21e[_0x5d461d(0x313)] || '')[_0x5d461d(0xd2)](/^\[引用\|(.*?)\|(.*?)\]\s*/); let _0x12303f = _0x10f21e[_0x5d461d(0x313)] || ''; if (_0x5e84aa) { if (_0x5d461d(0x266) === 'qYCoL') { if (!_0x2bdc7f[_0x5d461d(0xa9a)]) return; try { _0x48c668[_0x5d461d(0x531)](_0x5d461d(0x524) + _0x5a154c[_0x5d461d(0xa9a)], _0x343e4b['stringify'](_0x1f22b4[_0x5d461d(0x103)])); } catch (_0x429087) { _0x441d3b[_0x5d461d(0x5e3)](_0x5d461d(0x593), _0x429087), _0x453df9(_0x5d461d(0xa4c)); } } else _0x16b370[_0x5d461d(0xb68)] = { 'sender': _0x5e84aa[0x1][_0x5d461d(0x4ca)](), 'content': _0x5e84aa[0x2][_0x5d461d(0x4ca)]() }, _0x12303f = _0x10f21e[_0x5d461d(0x313)][_0x5d461d(0xab5)](_0x5e84aa[0x0][_0x5d461d(0x30c)])[_0x5d461d(0x4ca)](); } const _0x4ca9a6 = _0x1654fa(_0x12303f)[_0x5d461d(0x6cd)](0x0, 0x3); for (let _0x16fef2 = 0x0; _0x16fef2 < _0x4ca9a6[_0x5d461d(0x30c)]; _0x16fef2++) { _0x16fef2 > 0x0 && (await new Promise(_0xf8141d => setTimeout(_0xf8141d, _0x492cb8(0x190))), delete _0x16b370['quotedMessage']), _0x16b370['content'] = _0x4ca9a6[_0x16fef2], _0x3cf4de['conversationHistory'][_0x5d461d(0x967)]({ ..._0x16b370 }), _0x162973(), _0x482e39(); } } } } async function _0x3683f8(_0x3c3cc7, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x1c5351 = _0xe59ed1; if (_0x1c5351(0x4fb) === 'wIPME') { await new Promise(_0x5d109e => setTimeout(_0x5d109e, 0xa)); if (!_0x3cf4de[_0x1c5351(0x71a)][_0x1c5351(0x1a0)] || !_0x3cf4de[_0x1c5351(0x71a)][_0x1c5351(0x6bc)] || !_0x3cf4de[_0x1c5351(0x71a)][_0x1c5351(0x76b)]) { if (_0x1c5351(0x278) !== 'OqSYh') return _0x5bf34b(_0x1c5351(0xae8)), ![]; else _0xbaab43['src'] = _0x184c77['createObjectURL'](_0x304be2), _0x5b5495[_0x1c5351(0x937)][_0x1c5351(0x52e)] = 0x1; } const _0x185985 = _0x5234d7(); if (!_0x185985 || !_0x3c3cc7) return ![]; const _0x3c1328 = _0x1af79f(_0x185985['id']), _0x497a5d = _0x3cf4de[_0x1c5351(0x103)]['at'](-0x1)?.[_0x1c5351(0x84c)] === 'user'; if (!force && !_0x497a5d) return ![]; const _0x11aa6d = _0x3cf4de[_0x1c5351(0x103)]['at'](-0x1)?.[_0x1c5351(0x8f5)] ?? ![]; if (delayMs) await new Promise(_0x5d8c3c => setTimeout(_0x5d8c3c, delayMs)); if (_0x11aa6d) { if (_0x1c5351(0x2b2) === _0x1c5351(0xb8c)) return _0x5e116e['log'](_0x1c5351(0x35f)), 0x0; else document['getElementById']('galgame-text')[_0x1c5351(0x5f8)] = '（正在构思中...）'; } else _0x4371cd(!![]); let _0x48128e = ''; const _0x287649 = _0x5234d7(); if (_0x287649?.[_0x1c5351(0x671)]?.[_0x1c5351(0x644)]) { if (_0x1c5351(0x722) === _0x1c5351(0x26b)) _0x311eb9(); else { const _0x37346e = _0x287649[_0x1c5351(0x671)], _0x163928 = await _0x454120(_0x37346e[_0x1c5351(0x96)]); if (_0x163928 && _0x163928[_0x1c5351(0x602)]) { const _0x4df2f8 = _0x38a7d7(_0x163928[_0x1c5351(0x602)]); if (_0x4df2f8['length'] > 0x0) { const _0x426380 = _0x450910[_0x1c5351(0xa83)]; let _0x222e6a = -0x1; for (let _0x5c3773 = 0x0; _0x5c3773 < _0x4df2f8[_0x1c5351(0x30c)]; _0x5c3773++) { if (_0x426380 >= _0x4df2f8[_0x5c3773]['time']) _0x222e6a = _0x5c3773; else break; } const _0x3c7dbc = _0x4df2f8[_0x1c5351(0x48a)]((_0x3efc3f, _0x8639db) => { const _0x1e4a0a = _0x1c5351; if ('tcQHq' !== _0x1e4a0a(0x694)) { const _0xd1f849 = _0x8639db === _0x222e6a ? '>>\x20' : ''; return '' + _0xd1f849 + _0x3efc3f[_0x1e4a0a(0x993)]; } else { _0x1ac9af(_0x1e4a0a(0xa1f)); return; } })[_0x1c5351(0x863)]('\x0a'), _0x8cfc95 = _0x4df2f8[_0x1c5351(0x48a)](_0x466c8d => _0x466c8d[_0x1c5351(0x993)])[_0x1c5351(0x863)]('\x0a'), _0x420a05 = _0x222e6a > -0x1 ? _0x4df2f8[_0x222e6a][_0x1c5351(0x993)] : _0x1c5351(0xb52); _0x48128e = (_0x1c5351(0x442) + _0x37346e[_0x1c5351(0xb08)] + '\x20的《' + _0x37346e[_0x1c5351(0x6fd)] + '》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a' + _0x8cfc95 + _0x1c5351(0xb55) + _0x420a05 + '\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20')[_0x1c5351(0x4ca)](); } } } } let _0x3ceecc = '', _0x57a7d9 = ''; const _0x478786 = _0x3cf4de[_0x1c5351(0x103)][_0x1c5351(0x30c)]; if (_0x478786 > 0x1) { if (_0x1c5351(0x75e) === _0x1c5351(0x75e)) { const _0x33d280 = _0x3cf4de[_0x1c5351(0x103)][_0x478786 - 0x2], _0x509be6 = _0x3cf4de[_0x1c5351(0x103)][_0x478786 - 0x1]; if (_0x33d280[_0x1c5351(0x8f5)] === ![] && _0x509be6['isOffline'] === !![]) _0x57a7d9 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“' + _0x3c1328[_0x1c5351(0x382)] + _0x1c5351(0x309); else _0x33d280['isOffline'] === !![] && _0x509be6['isOffline'] === ![] && (_0x57a7d9 = _0x1c5351(0x6e9) + _0x3c1328[_0x1c5351(0x382)] + _0x1c5351(0x370)); } else { const _0x496dd2 = _0xae9062[_0x1c5351(0x7ef)](_0x399b86); if (_0x496dd2 && _0x16f10f) _0x496dd2['src'] = _0x132c17[_0x1c5351(0x9e4)](_0x4168c8); } } if (_0x11aa6d) { const _0x2bcb1b = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x3ceecc = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x3c1328[_0x1c5351(0x382)] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0x2bcb1b + _0x1c5351(0x5b7) + _0x3c3cc7['name'] + _0x1c5351(0x8d9) + _0x2bcb1b + _0x1c5351(0xacb) + _0x2bcb1b + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a'; const { omniText: _0x35ecca } = _0x7987c1(_0x3c3cc7['id'], _0x185985['id']), _0x4ae052 = _0x43ae40(), _0xbfceb7 = _0x5c4d13(_0x3c3cc7['id']), _0x2fec88 = _0x16d5be(_0x3c3cc7['id']), _0x2604f4 = await _0x12334d(_0x3c3cc7['id']), _0x100f43 = typeof _0x36da4d === _0x1c5351(0xf4) ? _0x36da4d[_0x1c5351(0xaec)](_0x1c5351(0x106), _0x3c3cc7['name'])[_0x1c5351(0xaec)](_0x1c5351(0x689), _0x3c1328[_0x1c5351(0x382)] || '用户') : '', _0x2f40d1 = _0x23323a()['map'](_0x34e97d => _0x34e97d['name'])[_0x1c5351(0x863)](',\x20'); let _0x4a61b6 = ''; if (_0x3c3cc7[_0x1c5351(0x91e)] && _0x3c3cc7[_0x1c5351(0x91e)][_0x1c5351(0x30c)] > 0x0) { if (_0x1c5351(0x46d) !== 'QKKzm') { _0x294600['conversationHistory'] = [], _0xe7680b(); return; } else { const _0x5c85d8 = _0x3c3cc7['linkedWorldBookIds'][_0x1c5351(0x48a)](_0x5cb65d => _0x3cf4de['worldBooks'][_0x1c5351(0x6f0)](_0x331c28 => _0x331c28['id'] === _0x5cb65d))[_0x1c5351(0x3f0)](Boolean)[_0x1c5351(0x48a)](_0x11e8dd => _0x1c5351(0x9de) + _0x11e8dd[_0x1c5351(0x382)] + '\x0a' + _0x11e8dd['content'])[_0x1c5351(0x863)](''); if (_0x5c85d8) _0x4a61b6 = _0x1c5351(0x88c) + _0x5c85d8; } } const _0x1d8d94 = _0x3c1328['persona'] ? _0x1c5351(0x964) + _0x3c1328['name'] + '”的补充信息\x0a' + _0x3c1328['persona'] : ''; let _0x66dd7f = ''; const _0x468ff2 = new Date(), _0x5c334c = _0x3de80d(_0x3c3cc7['id']); _0x66dd7f = _0x1c5351(0x8d6), _0x66dd7f += _0x1c5351(0x776) + _0x468ff2[_0x1c5351(0x118)]('zh-CN', { 'dateStyle': _0x1c5351(0x88f), 'timeStyle': 'short' }) + '\x0a'; if (_0x5c334c) { if (_0x1c5351(0x842) === 'FZQas') { const _0x3da646 = new Date(_0x5c334c[_0x1c5351(0x554)]), _0x502dfa = _0x19c0c3(_0x3da646); _0x66dd7f += _0x1c5351(0x435) + _0x502dfa + '\x0a'; const _0x289772 = _0x468ff2[_0x1c5351(0x9fd)](), _0x15cd14 = _0x3da646['toDateString'](), _0x158603 = new Date(); _0x158603[_0x1c5351(0x2ea)](_0x468ff2[_0x1c5351(0x5c3)]() - 0x1); const _0x120007 = _0x158603[_0x1c5351(0x9fd)](); if (_0x289772 === _0x15cd14) { if (_0x1c5351(0x43a) !== 'xKtCT') _0x42f9b3[_0x1c5351(0x5e3)](_0x1c5351(0x3e8), _0x4e05a9); else { const _0x61016b = (_0x468ff2 - _0x3da646) / (0x3e8 * 0x3c); if (_0x61016b < 0x3c) { if (_0x1c5351(0x51f) === _0x1c5351(0x51f)) _0x66dd7f += _0x1c5351(0x58a); else { _0x5a890a(_0x1c5351(0x52d)); return; } } else _0x1c5351(0x573) === _0x1c5351(0x846) ? _0x3b2a15 += _0x1c5351(0xa1b) + _0x56f8c3[_0x1c5351(0x70b)] + _0x1c5351(0xb0f) : _0x66dd7f += _0x1c5351(0x522) + Math[_0x1c5351(0x53a)](_0x61016b / 0x3c) + _0x1c5351(0x54e); } } else { if (_0x120007 === _0x15cd14) _0x66dd7f += _0x1c5351(0xb9); else { if ('OupiD' === 'OupiD') { const _0x5a3a2c = Math['round']((_0x468ff2 - _0x3da646) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x66dd7f += '-\x20**对话状态提示**:\x20你们已经有\x20' + _0x5a3a2c + _0x1c5351(0xb3a); } else _0x10108e[_0x1c5351(0x9bd)] = _0x5ef7d4; } } } else _0x390d9e > _0x4fdcd5 && (_0x5a4138 *= _0xbfa56c / _0x14f338, _0x774d7d = _0x48114a); } else { if (_0x1c5351(0x37c) === _0x1c5351(0x37c)) _0x66dd7f += _0x1c5351(0x66e); else { const _0x5f4584 = _0x53b63e[_0x1c5351(0x27a)][_0x1c5351(0x6f0)](_0x40d1ab => _0x40d1ab[_0x1c5351(0x48f)][_0x1c5351(0x5cc)](_0x194a43)); if (!_0x5f4584) return ''; const _0x3b5b3f = _0x43b756(_0x5f4584['id']), _0x585290 = _0x3682d0[_0x1c5351(0x636)][_0x1c5351(0x3f0)](_0x55caf5 => _0x55caf5[_0x1c5351(0x82c)] === _0x3b5b3f['id'] || !_0x55caf5[_0x1c5351(0x82c)]); if (_0x585290[_0x1c5351(0x30c)] === 0x0) return ''; const _0x237464 = _0x585290[_0x1c5351(0x48a)](_0x5b37ee => { const _0x493b8b = _0x1c5351, _0x305cfe = _0x5b37ee[_0x493b8b(0x76d)] === _0x493b8b(0x1c9) ? '纪念日' : '待办'; return _0x493b8b(0xa52) + _0x305cfe + ']\x20' + _0x5b37ee[_0x493b8b(0x5bd)] + ':\x20' + _0x5b37ee[_0x493b8b(0x313)]; })[_0x1c5351(0x863)]('\x0a'); return _0x1c5351(0x690) + _0x3b5b3f[_0x1c5351(0x382)] + _0x1c5351(0x660) + _0x237464; } } const _0x4caf01 = ('\x0a' + _0x3ceecc + _0x1c5351(0x7d4) + _0x3c3cc7[_0x1c5351(0x382)] + _0x1c5351(0x847) + _0x3c3cc7[_0x1c5351(0x382)] + ':\x22\x20或\x22[' + _0x3c3cc7[_0x1c5351(0x382)] + ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[' + _0x2f40d1 + _0x1c5351(0x87a) + _0x100f43 + '\x0a')['trim'](), _0x320f92 = [{ 'role': _0x1c5351(0x24d), 'content': _0x4caf01 }], _0x1a6deb = ('\x0a#\x20你的个性（节选）\x0a' + (_0x3c3cc7[_0x1c5351(0xa2e)] || _0x1c5351(0x400)) + '\x0a' + _0x1d8d94 + '\x20\x0a' + _0x35ecca + '\x0a' + _0x4ae052 + '\x0a' + _0xbfceb7 + '\x0a' + _0x2fec88 + _0x1c5351(0xd5) + _0x2604f4 + '\x20\x0a#\x20当前情景\x0a' + _0x48128e + '\x0a' + _0x66dd7f + '\x0a' + _0x4a61b6 + '\x0a')[_0x1c5351(0x4ca)](); _0x1a6deb[_0x1c5351(0xb53)](/#.*|\s/g, '') && (_0x320f92[_0x1c5351(0x967)]({ 'role': _0x1c5351(0x32c), 'content': _0x1a6deb }), _0x320f92[_0x1c5351(0x967)]({ 'role': 'assistant', 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' })); const _0x562c46 = _0x3cf4de['preferences']?.[_0x1c5351(0xb59)] ?? 0x64, _0x5c926c = _0x3cf4de[_0x1c5351(0x103)][_0x1c5351(0x6cd)](-_0x562c46); for (const _0x573f1d of _0x5c926c) { const _0x46de18 = _0x573f1d['role'] === 'ai' || _0x573f1d['role'] === _0x1c5351(0x78b) ? _0x1c5351(0x78b) : 'user'; let _0x2aa1da = { 'role': _0x46de18, 'content': _0x573f1d['content'] }, _0x174924 = !!_0x573f1d[_0x1c5351(0x313)]; if (_0x573f1d[_0x1c5351(0x203)] && _0x573f1d['content'][_0x1c5351(0x5cc)]('表情')) { const _0x12140f = _0x573f1d['content'][_0x1c5351(0xd2)](/：(.*?)]$/); _0x2aa1da[_0x1c5351(0x313)] = _0x1c5351(0x264) + (_0x12140f ? _0x12140f[0x1] : _0x1c5351(0x124)) + ']', _0x320f92[_0x1c5351(0x967)](_0x2aa1da); } else { let _0x449126 = null; if (_0x573f1d[_0x1c5351(0x9bd)]) _0x449126 = _0x573f1d[_0x1c5351(0x9bd)]; else { if (_0x573f1d[_0x1c5351(0x6b9)]) try { const _0x1f5c30 = await _0x47b504(_0x573f1d[_0x1c5351(0x6b9)]); _0x1f5c30 && (_0x449126 = await _0x50ddb8(_0x1f5c30)); } catch (_0x4bd34b) { console[_0x1c5351(0x5e3)](_0x1c5351(0x82e), _0x4bd34b); } } _0x449126 && (_0x2aa1da[_0x1c5351(0x9bd)] = _0x449126, _0x174924 = !![]), _0x174924 && _0x320f92[_0x1c5351(0x967)](_0x2aa1da); } } try { if ('vQEKa' === 'SCQLh') _0x5c3eb0[_0x1c5351(0x5e3)](_0x1c5351(0x911), _0x4622a7), _0x4b5d53[_0x1c5351(0x76d)] = 'text'; else { const _0x500f21 = await _0x63fdee(_0x320f92); if (!_0x500f21) return ![]; if (_0x11aa6d) try { let _0x1ed34e = _0x500f21[_0x1c5351(0x4ca)](); const _0x2fbc78 = _0x1ed34e[_0x1c5351(0xd2)](/(\[[\s\S]*\])/); _0x2fbc78 && (_0x1c5351(0x3c2) === _0x1c5351(0x3c2) ? _0x1ed34e = _0x2fbc78[0x1] : (_0x130b96[_0x1c5351(0x25c)](_0x1c5351(0x681), _0x12d0f2), _0x1f05dc[_0x1c5351(0x25c)](_0x1c5351(0xa8e), _0x337241))); const _0x2b1682 = JSON[_0x1c5351(0x6e7)](_0x1ed34e); if (Array[_0x1c5351(0x9a1)](_0x2b1682)) { if (_0x1c5351(0x9cf) !== _0x1c5351(0x132)) { _0x3cf4de[_0x1c5351(0x4a5)] = [..._0x2b1682], _0x3cf4de[_0x1c5351(0x771)][_0x3c3cc7['id']] = [..._0x2b1682], _0x54c22e(); const _0x9957da = _0x2b1682[_0x1c5351(0x48a)](_0x486989 => _0x486989[_0x1c5351(0x5b4)] === _0x1c5351(0x785) ? _0x486989['line'] : _0x486989[_0x1c5351(0x5b4)] + ':\x20' + _0x486989[_0x1c5351(0x312)])['join']('\x0a\x0a'); _0x3cf4de['conversationHistory']['push']({ 'role': _0x1c5351(0x78b), 'senderId': _0x3c3cc7['id'], 'timestamp': Date[_0x1c5351(0x740)](), 'isOffline': !![], 'content': _0x9957da }); } else _0x3aee5f = _0x1f9dd0[_0x1c5351(0x716)] ? _0x4fba67[_0x1c5351(0x716)][0x0]['clientY'] : _0x2baaec[_0x1c5351(0x29d)], _0x114230 = 0x0, _0x237179['style'][_0x1c5351(0x55f)] = _0x1c5351(0xacf), _0x49acbe = !![], _0x5e982d[_0x1c5351(0x76d)] === _0x1c5351(0x318) && (_0x1a2412[_0x1c5351(0x25c)](_0x1c5351(0x681), _0x417776), _0x287d38[_0x1c5351(0x25c)](_0x1c5351(0xa8e), _0x16973e)); } } catch (_0xe8068f) { _0x1c5351(0x7b6) !== 'Qqkfb' ? (console[_0x1c5351(0x5e3)]('解析AI剧本JSON失败:', _0xe8068f, _0x1c5351(0xa2a), _0x500f21), _0x3cf4de['conversationHistory'][_0x1c5351(0x967)]({ 'role': _0x1c5351(0x78b), 'senderId': _0x3c3cc7['id'], 'timestamp': Date[_0x1c5351(0x740)](), 'isOffline': !![], 'content': _0x1c5351(0x6c9) + _0x500f21 + ']' })) : (_0x35b0ca(), _0x22aaea('worldBook', _0x1c5351(0x1bf))); } else { const _0x50e6f4 = _0x5a5592(_0x500f21), _0x1d6a69 = _0x50e6f4[_0x1c5351(0x48a)](_0xc37fe0 => { const _0x27025f = _0x1c5351, _0x294d60 = _0xc37fe0['trim'](), _0x1c3d44 = _0x294d60[_0x27025f(0xd2)](/^\[sticker:(.*?)\]$/), _0x1c9953 = _0x294d60['match'](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x2bf8ad = _0x294d60['match'](/^\[music:(.*?)\|(.*?)\]$/), _0x3b372e = _0x294d60['match'](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/), _0x206505 = _0x294d60[_0x27025f(0xd2)](/^\[html\]([\s\S]*)\[\/html\]$/); if (_0x206505) { if (_0x27025f(0x466) === _0x27025f(0x466)) return { 'type': _0x27025f(0x674), 'content': _0x206505[0x1][_0x27025f(0x4ca)]() }; else { const _0x1cd52c = _0x417610['createElement']('li'); _0x1cd52c[_0x27025f(0x199)] = _0x27025f(0x96e), _0x1cd52c[_0x27025f(0x252)] = _0x27025f(0x7cb) + _0x16ea87['id'] + _0x27025f(0x57e) + _0x55ede9['id'] + _0x27025f(0x599) + (_0x315848['avatar'] || _0x4586bf) + _0x27025f(0x173) + _0x69130d['id'] + '\x22\x20class=\x22char-name\x22>' + _0x13c6da[_0x27025f(0x382)] + _0x27025f(0xeb), _0x39af30[_0x27025f(0x8fe)](_0x1cd52c); } } else { if (_0x2bf8ad) return { 'type': _0x27025f(0x42f), 'songName': _0x2bf8ad[0x1]['trim'](), 'artist': _0x2bf8ad[0x2][_0x27025f(0x4ca)]() }; else { if (_0x1c3d44) return { 'type': _0x27025f(0xae0), 'name': _0x1c3d44[0x1]['trim']() }; else { if (_0x3b372e) return { 'type': _0x27025f(0x963), 'eventType': _0x3b372e[0x1][_0x27025f(0x4ca)](), 'eventDate': _0x3b372e[0x2][_0x27025f(0x4ca)](), 'eventContent': _0x3b372e[0x3][_0x27025f(0x4ca)]() }; else { if (_0x1c9953) { const _0x561717 = parseFloat(_0x1c9953[0x1]), _0x543ac8 = _0x1c9953[0x2][_0x27025f(0x4ca)](), _0x52cf7c = _0x1af79f(_0x3cf4de[_0x27025f(0xa9a)]); let _0x8a8926 = null; if (_0x543ac8 === _0x52cf7c['name']) _0x8a8926 = _0x52cf7c['id']; else { if ('VjpTN' === _0x27025f(0x6cc)) { _0x2fcbe8(_0x27025f(0x365)); return; } else { const _0x3b1366 = _0x5234d7(); if (_0x3b1366['type'] === 'group') { const _0x2a2805 = _0x3cf4de['characters'][_0x27025f(0x6f0)](_0x61118c => _0x3b1366['participantIds']['includes'](_0x61118c['id']) && _0x61118c['name'] === _0x543ac8); if (_0x2a2805) _0x8a8926 = _0x2a2805['id']; } } } if (_0x8a8926) return { 'type': _0x27025f(0x4d2), 'amount': _0x561717, 'recipientId': _0x8a8926, 'senderId': _0x3c3cc7['id'] }; else return { 'type': 'text', 'content': _0x27025f(0x48b) + _0x543ac8 + _0x27025f(0x201) }; } else { if (_0x294d60) { if (_0x27025f(0x3a0) === 'SFyAt') return { 'type': _0x27025f(0x993), 'content': _0x294d60 }; else { const _0x3066e5 = _0x30c61f[_0x27025f(0x9b1)](_0x5b4023, _0x27025f(0x12b)), _0x42d174 = _0x3066e5[_0x27025f(0x326)](_0x4dbc49), _0x3a7793 = _0x42d174[_0x27025f(0x336)]({ 'id': _0x4c6295, 'blob': _0x529601 }); _0x3a7793[_0x27025f(0x78f)] = () => _0x398438(_0x3a7793[_0x27025f(0xb95)]), _0x3a7793[_0x27025f(0x1bb)] = () => _0x258dea(_0x3a7793[_0x27025f(0x5e3)]); } } } } } } } return null; })[_0x1c5351(0x3f0)](Boolean), _0x4b8fbd = async _0x285346 => { const _0x300840 = _0x1c5351, _0x4127ab = { 'role': _0x300840(0x78b), 'senderId': _0x3c3cc7['id'], 'timestamp': Date[_0x300840(0x740)](), 'isOffline': _0x11aa6d }; if (_0x285346[_0x300840(0x76d)] === _0x300840(0x42f)) { const { songName: _0x27a2d3, artist: _0x45dd88 } = _0x285346; _0x4127ab[_0x300840(0x76d)] = _0x300840(0x42f), _0x4127ab[_0x300840(0x313)] = _0x300840(0x61f) + _0x27a2d3 + '\x20-\x20' + _0x45dd88 + ']'; try { const _0x481d2f = await _0x5de43b(_0x27a2d3, _0x45dd88); Object[_0x300840(0x7a2)](_0x4127ab, { 'songName': _0x27a2d3, 'artist': _0x45dd88, 'coverUrl': _0x481d2f['cover'], 'playableUrl': _0x481d2f['url'] }); } catch (_0x50046c) { Object[_0x300840(0x7a2)](_0x4127ab, { 'songName': _0x27a2d3, 'artist': _0x45dd88, 'coverUrl': null, 'playableUrl': null }); } } else { if (_0x285346[_0x300840(0x76d)] === _0x300840(0xae0)) { const _0xe1d17b = _0x35cf89['find'](_0x2317a6 => _0x2317a6[_0x300840(0x382)] === _0x285346[_0x300840(0x382)]); if (_0xe1d17b) Object[_0x300840(0x7a2)](_0x4127ab, { 'content': _0x300840(0x92c) + _0xe1d17b['name'] + ']', 'displayUrl': _0xe1d17b[_0x300840(0x98a)] }); else _0x4127ab[_0x300840(0x313)] = '[sticker:' + _0x285346[_0x300840(0x382)] + ']'; } else { if (_0x285346[_0x300840(0x76d)] === _0x300840(0x4d2)) { if (_0x300840(0x6b1) === 'SKFJi') _0x1684f7 && _0xcbe2ab(_0x4e52aa['id'], _0x1dbaa8[_0x300840(0x48a)](_0x2e0192 => _0x2e0192['id'])); else { const _0x50b74e = _0x285346[_0x300840(0x9d9)] === _0x1af79f(_0x3cf4de[_0x300840(0xa9a)])['id'] ? _0x1af79f(_0x3cf4de[_0x300840(0xa9a)]) : _0xd97907(_0x285346[_0x300840(0x9d9)]); Object['assign'](_0x4127ab, { 'type': _0x300840(0x4d2), 'amount': _0x285346[_0x300840(0x359)], 'recipientId': _0x285346[_0x300840(0x9d9)], 'content': _0x300840(0x7c4) + (_0x50b74e?.[_0x300840(0x382)] || '未知') + _0x300840(0x327) + _0x285346[_0x300840(0x359)] + ']' }); } } else { if (_0x285346['type'] === 'create_event') { const _0x1cd698 = _0x1af79f(_0x185985['id']); if (!_0x1cd698 || !_0x1cd698['id']) return console['error'](_0x300840(0x504)), null; _0x3cf4de['calendarEvents']['push']({ 'id': _0x300840(0x3b2) + Date['now'](), 'date': _0x285346['eventDate'], 'type': _0x285346['eventType'], 'content': _0x285346[_0x300840(0x4ea)], 'userId': _0x1cd698['id'], 'createdBy': 'ai' }), _0x3a3bc1(), _0x4e9656(), _0x3b168b(); const _0x55e4ef = _0xd97907(_0x3c3cc7['id']); _0x55e4ef && _0x285346[_0x300840(0x923)] === _0x300840(0x1c9) && _0x5bf34b(_0x300840(0xa73) + _0x55e4ef['name'] + _0x300840(0x985) + _0x285346['eventContent']); return { 'role': _0x300840(0x78b), 'senderId': _0x3c3cc7['id'], 'timestamp': Date[_0x300840(0x740)](), 'isOffline': _0x11aa6d, 'content': null }; return { 'role': _0x300840(0x78b), 'senderId': _0x3c3cc7['id'], 'timestamp': Date[_0x300840(0x740)](), 'isOffline': _0x11aa6d, 'content': null }; } else { const _0x298217 = _0x4360f9(_0x285346[_0x300840(0x313)]); Object['assign'](_0x4127ab, { 'content': _0x298217[_0x300840(0x313)], 'quotedMessage': _0x298217[_0x300840(0xb68)] }); } } } } return _0x4127ab; }, _0xca96e = await Promise[_0x1c5351(0x6d5)](_0x1d6a69[_0x1c5351(0x48a)](_0x4b8fbd)); for (const _0x3b5856 of _0xca96e) { if (_0x3b5856[_0x1c5351(0x76d)] === _0x1c5351(0x674)) _0x1bf5f6(_0x3b5856, -0x1), _0x40cf72[_0x1c5351(0x340)] = _0x40cf72['scrollHeight']; else (_0x3b5856[_0x1c5351(0x313)] || _0x3b5856[_0x1c5351(0x203)] || _0x3b5856[_0x1c5351(0x76d)] === 'music' || _0x3b5856[_0x1c5351(0xb68)]) && (await new Promise(_0x40b674 => setTimeout(_0x40b674, 0x12c + Math['random']() * 0x190)), _0x3cf4de['conversationHistory'][_0x1c5351(0x967)](_0x3b5856), _0x1bf5f6(_0x3b5856, _0x3cf4de['conversationHistory']['length'] - 0x1), _0x40cf72['scrollTop'] = _0x40cf72[_0x1c5351(0x60d)]); } } return _0x162973(), !![]; } } catch (_0x59c102) { if (_0x1c5351(0x438) !== 'LrvCY') { if (_0x59c102[_0x1c5351(0x382)] !== _0x1c5351(0x2bc)) { if ('giPoV' === _0x1c5351(0x770)) _0x560c49(_0x4031a3[_0x1c5351(0x48f)][0x0]); else { console[_0x1c5351(0x5e3)](_0x1c5351(0x71e), _0x59c102); const _0x4ac4ab = { 'role': _0x1c5351(0x78b), 'content': '错误:\x20' + _0x59c102[_0x1c5351(0x99)], 'senderId': _0x3c3cc7['id'], 'isOffline': _0x11aa6d }; _0x3cf4de[_0x1c5351(0x103)][_0x1c5351(0x967)](_0x4ac4ab), _0x482e39(); } } return ![]; } else _0x32fadf[_0x1c5351(0x5e9)] = ![], _0x36d643(); } finally { _0x4371cd(![]); } } else _0xa2a65b[_0x1c5351(0x937)][_0x1c5351(0x6aa)] = 'url(\x27' + _0x496776['avatar'] + '\x27)'; } async function _0x23e65a() { const _0x287f3e = _0xe59ed1; if ('iFklx' !== 'iFklx') _0x26ae69 = { 'title': _0x59323c[_0x287f3e(0x6fd)], 'artist': _0x470b02[_0x287f3e(0xb08)], 'cover': _0xa086c0['coverUrl'] || (_0x2aa67e[_0x287f3e(0x6b3)] ? _0x287f3e(0x389) + _0x89c0cb[_0x287f3e(0x6b3)] : _0x286caf), 'isFromLibrary': !![] }, _0xc3979a[_0x287f3e(0x557)] = _0x589e1c['playableUrl'], _0x21ccb9[_0x287f3e(0x28a)](), _0x4909b6[_0x287f3e(0x627)] = _0x25bcc3[_0x287f3e(0xaab)][_0x287f3e(0xaa2)](_0x4a8cad => _0x4a8cad['id'] === _0x28c545['id']), _0x1b2681(); else { const _0x350aa5 = _0x5234d7(); if (!_0x350aa5 || _0x350aa5['type'] !== _0x287f3e(0x86c)) { _0x5bf34b(_0x287f3e(0x71d)); return; } if (_0x3cf4de['isGenerating']) { if (_0x287f3e(0x4f6) !== _0x287f3e(0x4f6)) _0x38bc51(_0x5d6c4a), _0x285083[_0x287f3e(0x23b)](_0x287f3e(0x9e6), _0x27cd23), _0xe85ee1[_0x287f3e(0x23b)](_0x287f3e(0x5e3), _0x2683b0), _0x48d2ed[_0x287f3e(0x557)] = '', _0x3ab0fb[_0x287f3e(0x713)](); else { _0x5bf34b(_0x287f3e(0x151)); return; } } const _0x3b77d9 = await _0x56efd8('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x3b77d9) return; _0x2a565e(!![], '正在翻阅全部历史记录...'), _0xc3dc6[_0x287f3e(0x35c)] = '', _0x2dd123[_0x287f3e(0x4ad)][_0x287f3e(0x44c)]('show'), _0x3cf4de[_0x287f3e(0x2c7)] = !![]; try { const _0x40ec9c = _0xd97907(_0x350aa5[_0x287f3e(0x48f)][0x0]), _0x24db35 = _0x1af79f(_0x350aa5['id']), _0x3c967d = _0x7c98da(_0x350aa5['id']); if (_0x3c967d[_0x287f3e(0x30c)] === 0x0) { if ('Iqcry' === _0x287f3e(0x604)) { const _0x4d74b3 = _0x2aa6b0[_0x287f3e(0x9b1)](_0x43f2b5, _0x287f3e(0x12b)), _0x35a46a = _0x4d74b3[_0x287f3e(0x326)](_0x468cb5), _0x23f5a1 = _0x35a46a[_0x287f3e(0x68c)](_0x48cc61); _0x23f5a1[_0x287f3e(0x78f)] = () => _0x8c462c(), _0x23f5a1[_0x287f3e(0x1bb)] = () => _0x161e2f(_0x23f5a1[_0x287f3e(0x5e3)]); } else { _0xc3dc6[_0x287f3e(0x35c)] = '#\x20记录是空的，没什么好总结的。'; return; } } const _0x1d75da = _0x3c967d[_0x287f3e(0x48a)](_0xee5c86 => { const _0x2b02eb = _0x287f3e; if (_0x2b02eb(0x5ba) === _0x2b02eb(0x5ba)) { const _0x51ff14 = new Date(_0xee5c86[_0x2b02eb(0x554)]), _0x3c78a4 = _0x51ff14[_0x2b02eb(0x96b)]() + '-' + String(_0x51ff14[_0x2b02eb(0x677)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x51ff14[_0x2b02eb(0x5c3)]())[_0x2b02eb(0x5b5)](0x2, '0'), _0x451306 = String(_0x51ff14[_0x2b02eb(0x669)]())['padStart'](0x2, '0') + ':' + String(_0x51ff14[_0x2b02eb(0x33a)]())[_0x2b02eb(0x5b5)](0x2, '0'); let _0x1236b6 = '未知'; _0xee5c86[_0x2b02eb(0x84c)] === _0x2b02eb(0x32c) ? _0x1236b6 = _0x24db35[_0x2b02eb(0x382)] : _0x1236b6 = _0x40ec9c['name']; let _0x804471 = _0xee5c86[_0x2b02eb(0x313)]; if (_0xee5c86[_0x2b02eb(0x203)]) _0x804471 = _0x2b02eb(0x70d); if (_0xee5c86[_0x2b02eb(0x6b9)]) _0x804471 = '[发送了图片]'; return '[' + _0x3c78a4 + '\x20' + _0x451306 + _0x2b02eb(0x248) + _0x1236b6 + _0x2b02eb(0x202) + _0x804471; } else { const _0x5c0a70 = new _0x2f210c(_0x30e55f[_0x2b02eb(0x554)]), _0x46fe31 = _0x5c0a70[_0x2b02eb(0x96b)]() + '-' + _0x120624(_0x5c0a70[_0x2b02eb(0x677)]() + 0x1)[_0x2b02eb(0x5b5)](0x2, '0') + '-' + _0x1f6388(_0x5c0a70['getDate']())[_0x2b02eb(0x5b5)](0x2, '0'), _0x3d414c = _0x59cfd5(_0x5c0a70[_0x2b02eb(0x669)]())[_0x2b02eb(0x5b5)](0x2, '0') + ':' + _0x594191(_0x5c0a70[_0x2b02eb(0x33a)]())['padStart'](0x2, '0'); let _0x4e5215 = '未知'; _0x22396c[_0x2b02eb(0x84c)] === 'user' ? _0x4e5215 = _0x317b79[_0x2b02eb(0x382)] : _0x4e5215 = _0x3e8bb9[_0x2b02eb(0x382)]; let _0x521836 = _0x443553['content']; if (_0x557ac6['displayUrl']) _0x521836 = _0x2b02eb(0x70d); if (_0x29fa3e[_0x2b02eb(0x6b9)]) _0x521836 = _0x2b02eb(0x915); return '[' + _0x46fe31 + '\x20' + _0x3d414c + _0x2b02eb(0x248) + _0x4e5215 + ']:\x20' + _0x521836; } })['join']('\x0a'), _0x3b941a = _0x31d520[_0x287f3e(0xb53)](/{charName}/g, _0x40ec9c[_0x287f3e(0x382)])[_0x287f3e(0xb53)](/{userName}/g, _0x24db35[_0x287f3e(0x382)]), _0x391a38 = [{ 'role': _0x287f3e(0x24d), 'content': _0x3b941a }, { 'role': _0x287f3e(0x32c), 'content': _0x1d75da }], _0x2a1ca1 = await _0x63fdee(_0x391a38); _0xc3dc6[_0x287f3e(0x35c)] = _0x2a1ca1 || '#\x20总结失败了，可能是记录太长或太复杂。', _0xc3dc6[_0x287f3e(0x340)] = 0x0; } catch (_0x12aef5) { _0x287f3e(0x7ff) !== _0x287f3e(0x7ff) ? (_0x385ada[_0x287f3e(0x5e9)] = !![], _0x78f94d()) : (console[_0x287f3e(0x5e3)](_0x287f3e(0x8af), _0x12aef5), _0xc3dc6['value'] = _0x287f3e(0x64f) + _0x12aef5['message']); } finally { _0x287f3e(0x6a0) !== 'ZqnTU' ? _0x5b4139(_0x538c10['id']) : (_0x2a565e(![]), _0x3cf4de[_0x287f3e(0x2c7)] = ![]); } } } async function _0xe6ae60() { const _0x2d3d11 = _0xe59ed1; if ('dPNIZ' === _0x2d3d11(0x10a)) { console[_0x2d3d11(0x76a)]('---\x20开始AI回复流程\x20---'); if (!_0x3cf4de[_0x2d3d11(0x71a)][_0x2d3d11(0x1a0)] || !_0x3cf4de[_0x2d3d11(0x71a)]['key'] || !_0x3cf4de[_0x2d3d11(0x71a)]['model']) { _0x5bf34b(_0x2d3d11(0xae8)); return; } const _0x40f01a = _0x3cf4de[_0x2d3d11(0x103)]['at'](-0x1)?.[_0x2d3d11(0x84c)] === _0x2d3d11(0x32c); if (!_0x40f01a || _0x3cf4de[_0x2d3d11(0x2c7)]) return; const _0x29f21f = _0x5234d7(); if (!_0x29f21f) return; _0x3cf4de[_0x2d3d11(0x2c7)] = !![], _0x4371cd(!![]); try { if ('yzkLz' !== 'yzkLz') return 0x0; else { if (_0x29f21f['type'] === _0x2d3d11(0x86c)) { if (_0x2d3d11(0x5f1) !== _0x2d3d11(0x5f1)) { const _0x55935f = _0x4849d8['createElement'](_0x2d3d11(0xb0b)); _0x55935f[_0x2d3d11(0x199)] = _0x2d3d11(0x7b5), _0x55935f['style'][_0x2d3d11(0x4e0)] = _0x2d3d11(0x6e6), _0x55935f['style'][_0x2d3d11(0x5d2)] = _0x2d3d11(0x477), _0x55935f[_0x2d3d11(0x937)]['padding'] = '15px', _0x55935f[_0x2d3d11(0x937)][_0x2d3d11(0x7ea)] = '0'; const _0xf73b20 = _0x20877f[_0x35c8ef['category']] || _0x4bc309['默认'], _0x2c249a = _0x2d3d11(0x498) + _0xf73b20 + _0x2d3d11(0x3ba), _0x9eeae6 = _0x2d3d11(0x346) + _0x2c249a + _0x2d3d11(0x882) + _0x595f7d[_0x2d3d11(0x60e)] + _0x2d3d11(0x416) + (_0x3dd75c['category'] || '未分类') + _0x2d3d11(0x55d) + (_0x3a3040[_0x2d3d11(0x359)] || 0x0)[_0x2d3d11(0x196)](0x2) + '</span></div>'; let _0x5c0a93 = ''; if (_0x58899c[_0x2d3d11(0x7d8)] && _0x33d3ec[_0x2d3d11(0x7d8)][_0x2d3d11(0x8f3)]) { const _0x3d2232 = _0x528728(_0x52e671[_0x2d3d11(0x7d8)][_0x2d3d11(0x8f3)]); _0x3d2232 && (_0x5c0a93 = _0x2d3d11(0x27f) + _0x3d2232[_0x2d3d11(0x3f1)] + _0x2d3d11(0x744) + _0x3d2232['name'] + _0x2d3d11(0x19d) + _0x57f7d9[_0x2d3d11(0x7d8)][_0x2d3d11(0x993)] + _0x2d3d11(0x4b8)); } _0x55935f['innerHTML'] = _0x9eeae6 + _0x5c0a93, _0xc9db19['appendChild'](_0x55935f); } else { const _0x5f2cd2 = _0xd97907(_0x29f21f[_0x2d3d11(0x48f)][0x0]); console['log'](_0x2d3d11(0x748)); if (_0x5f2cd2) await _0x3683f8(_0x5f2cd2, { 'force': !![] }); } } else { if (_0x2d3d11(0x364) !== 'vVwNm') _0x5245cb[_0x2d3d11(0x3e2)](), _0x12962c(); else { const _0x2d36fa = await _0x50758e(); if (_0x2d36fa && _0x2d36fa[_0x2d3d11(0x1d2)]?.[_0x2d3d11(0x30c)]) { if ('qAqrL' !== _0x2d3d11(0xa0)) await _0x4dfba9(_0x2d36fa); else throw _0x2c8368; } else { console[_0x2d3d11(0x315)]('Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.'); const _0x476beb = _0x29f21f[_0x2d3d11(0x48f)][_0x2d3d11(0x48a)](_0xd97907)[_0x2d3d11(0x3f0)](Boolean); if (!_0x476beb[_0x2d3d11(0x30c)]) return; let _0x2933b8 = 0x0; for (const _0x789727 of _0x476beb) { _0x3683f8(_0x789727, { 'force': !![], 'delayMs': _0x2933b8 }), _0x2933b8 += 0x1f4; } } } } } } catch (_0xec4f28) { _0xec4f28[_0x2d3d11(0x382)] !== 'AbortError' && (console['error']('获取AI响应失败:', _0xec4f28), _0x1bf5f6({ 'role': _0x2d3d11(0x78b), 'content': '错误:\x20' + _0xec4f28[_0x2d3d11(0x99)] }, _0x3cf4de[_0x2d3d11(0x103)][_0x2d3d11(0x30c)] - 0x1)); } finally { _0x3cf4de[_0x2d3d11(0x2c7)] = ![], _0x4371cd(![]); } } else _0x51ffcf[_0x2d3d11(0x66d)][_0x2d3d11(0x2ae)](_0x53a4de[_0x2d3d11(0x66d)]['getMonth']() + 0x1), _0x5863d8(); } function _0x1f6776(_0x536b40, _0x4ac430) { const _0x2a1406 = _0xe59ed1, _0x407d4b = _0x4ac430['toLowerCase'](), _0x34acd4 = _0x536b40[_0x2a1406(0x812)](); if (_0x407d4b[_0x2a1406(0xb05)](_0x2a1406(0xabd))) return _0x2a1406(0x583); if (_0x34acd4[_0x2a1406(0x5cc)]('anthropic.com')) return _0x2a1406(0x583); if (_0x34acd4[_0x2a1406(0x5cc)](_0x2a1406(0x41b))) return _0x2a1406(0x17d); if (_0x407d4b['startsWith']('gemini')) return _0x2a1406(0x17d); return 'openai'; } async function _0x63fdee(_0x57695d, _0x2f61c5 = {}) { const _0x43ac2c = _0xe59ed1; _0x3cf4de[_0x43ac2c(0xaca)] && _0x3cf4de[_0x43ac2c(0xaca)]['abort'](_0x43ac2c(0x608)); _0x3cf4de['currentAbortController'] = new AbortController(); const _0x112063 = _0x3cf4de['currentAbortController'][_0x43ac2c(0x443)], { endpoint: _0x31852f, key: _0x5a7015, model: _0x33f742 } = _0x3cf4de[_0x43ac2c(0x71a)], _0x924b71 = !!_0x2f61c5[_0x43ac2c(0x6dc)], _0x4ec849 = _0x1f6776(_0x31852f, _0x33f742); console[_0x43ac2c(0x76a)]('Detected\x20API\x20provider:\x20' + _0x4ec849); let _0x3e3e36 = ''; try { switch (_0x4ec849) { case _0x43ac2c(0x583): { if (_0x43ac2c(0xb5b) === 'ePvVI') { const _0x551e9f = _0x1fe5da(_0x2f780e['id']); if (!_0x551e9f || !_0x551e9f['id']) return _0x2e2c9f['error'](_0x43ac2c(0x504)), null; _0x31b7fd[_0x43ac2c(0x636)][_0x43ac2c(0x967)]({ 'id': _0x43ac2c(0x3b2) + _0xda2ff0[_0x43ac2c(0x740)](), 'date': _0x2dbbba[_0x43ac2c(0x778)], 'type': _0x22cd8b['eventType'], 'content': _0x401966[_0x43ac2c(0x4ea)], 'userId': _0x551e9f['id'], 'createdBy': 'ai' }), _0x433313(), _0xf5c4d4(), _0x1cfa34(); const _0x23722a = _0x2683f3(_0x59188f['id']); _0x23722a && _0x11ead4[_0x43ac2c(0x923)] === _0x43ac2c(0x1c9) && _0x46632e('💜\x20' + _0x23722a[_0x43ac2c(0x382)] + _0x43ac2c(0x985) + _0x4e138d[_0x43ac2c(0x4ea)]); return { 'role': _0x43ac2c(0x78b), 'senderId': _0x2a5e24['id'], 'timestamp': _0x1d229e[_0x43ac2c(0x740)](), 'isOffline': _0x5d879b, 'content': null }; return { 'role': _0x43ac2c(0x78b), 'senderId': _0x441e0c['id'], 'timestamp': _0x61f360[_0x43ac2c(0x740)](), 'isOffline': _0x4102fb, 'content': null }; } else { const _0x43c6be = _0x1ef07d(_0x5a7015), _0x2289b7 = _0x57695d[_0x43ac2c(0x6f0)](_0x3dc240 => _0x3dc240[_0x43ac2c(0x84c)] === _0x43ac2c(0x24d))?.[_0x43ac2c(0x313)] || '', _0x7025a = _0x57695d[_0x43ac2c(0x3f0)](_0x20d6db => _0x20d6db[_0x43ac2c(0x84c)] !== _0x43ac2c(0x24d)), _0x16c5c3 = { 'model': _0x33f742, 'system': _0x2289b7, 'messages': _0x7025a[_0x43ac2c(0x48a)](_0x5423ca => ({ 'role': _0x5423ca[_0x43ac2c(0x84c)], 'content': [{ 'type': 'text', 'text': _0x5423ca[_0x43ac2c(0x313)] }] })), 'max_tokens': 0x1000 }, _0x1ce876 = await fetch(_0x31852f, { 'method': 'POST', 'headers': { 'Content-Type': 'application/json', 'x-api-key': _0x43c6be, 'anthropic-version': _0x43ac2c(0x574) }, 'body': JSON['stringify'](_0x16c5c3), 'signal': _0x112063 }); if (!_0x1ce876['ok']) { const _0x5ea64e = await _0x1ce876[_0x43ac2c(0x6dc)]()[_0x43ac2c(0x7c0)](() => ({})); throw new Error(_0x43ac2c(0x9d) + _0x1ce876[_0x43ac2c(0x897)] + _0x43ac2c(0x9f1) + (_0x5ea64e[_0x43ac2c(0x5e3)]?.['message'] || _0x1ce876[_0x43ac2c(0xa01)])); } const _0x2566af = await _0x1ce876['json'](); _0x3e3e36 = _0x2566af[_0x43ac2c(0x313)]?.[0x0]?.[_0x43ac2c(0x993)] || ''; break; } } case _0x43ac2c(0x17d): { const _0x45ec8d = _0x1ef07d(_0x5a7015), _0x34ea30 = _0x31852f[_0x43ac2c(0x5cc)](_0x43ac2c(0x55e)), _0x8073e = _0x32dd38 => { const _0x1d0835 = _0x43ac2c, _0xb89ffa = []; if (_0x32dd38[_0x1d0835(0x313)]) _0xb89ffa[_0x1d0835(0x967)]({ 'text': _0x32dd38[_0x1d0835(0x313)] }); if (_0x32dd38[_0x1d0835(0x9bd)]) { const _0x7bcb68 = _0x32dd38[_0x1d0835(0x9bd)][_0x1d0835(0x35a)](',')[0x1], _0x5025ba = _0x32dd38[_0x1d0835(0x9bd)]['substring'](_0x32dd38[_0x1d0835(0x9bd)][_0x1d0835(0xb6c)](':') + 0x1, _0x32dd38[_0x1d0835(0x9bd)]['indexOf'](';')) || _0x1d0835(0x3cb); _0xb89ffa[_0x1d0835(0x967)]({ 'inline_data': { 'mime_type': _0x5025ba, 'data': _0x7bcb68 } }); } return _0xb89ffa; }, _0x1ad0d8 = _0x57695d[_0x43ac2c(0x48a)](_0x548d02 => ({ 'role': _0x548d02[_0x43ac2c(0x84c)] === _0x43ac2c(0x78b) ? _0x43ac2c(0x76b) : _0x548d02[_0x43ac2c(0x84c)] === 'system' ? _0x43ac2c(0x32c) : _0x548d02[_0x43ac2c(0x84c)], 'parts': _0x8073e(_0x548d02) }))[_0x43ac2c(0x3f0)](_0x587794 => _0x587794[_0x43ac2c(0x630)][_0x43ac2c(0x30c)] > 0x0), _0x50081a = { 'contents': _0x1ad0d8 }; _0x924b71 && _0x34ea30 && (_0x50081a[_0x43ac2c(0x981)] = { 'response_mime_type': _0x43ac2c(0x8dc) }); const _0x25cf4b = _0x31852f + _0x43ac2c(0x444) + _0x33f742 + ':streamGenerateContent?key=' + _0x45ec8d + _0x43ac2c(0x647), _0x2461ec = await fetch(_0x25cf4b, { 'method': 'POST', 'headers': { 'Content-Type': 'application/json' }, 'body': JSON[_0x43ac2c(0x56e)](_0x50081a), 'signal': _0x112063 }); if (!_0x2461ec['ok']) throw new Error(_0x43ac2c(0xaf6) + _0x2461ec['status']); const _0x32426f = _0x2461ec[_0x43ac2c(0x5e5)][_0x43ac2c(0xb29)](), _0x328b91 = new TextDecoder(); let _0x4435c8 = ''; while (!![]) { if (_0x112063[_0x43ac2c(0x7cc)]) { if (_0x43ac2c(0x2fd) !== _0x43ac2c(0x4cd)) { console[_0x43ac2c(0x76a)](_0x43ac2c(0x9a7)), _0x32426f[_0x43ac2c(0xb20)](); break; } else _0x106a16 = _0x36b845[_0x43ac2c(0x9bd)]; } const { done: _0x5f46ab, value: _0x1fb666 } = await _0x32426f[_0x43ac2c(0x174)](); if (_0x5f46ab) break; const _0x1c692f = _0x328b91['decode'](_0x1fb666, { 'stream': !![] }), _0x4b2c2b = _0x1c692f[_0x43ac2c(0x35a)]('\x0a')[_0x43ac2c(0x3f0)](_0x34bd83 => _0x34bd83['trim']()['startsWith'](_0x43ac2c(0x6f4))); for (const _0x4a36d2 of _0x4b2c2b) { if (_0x43ac2c(0x609) === _0x43ac2c(0x609)) { const _0x2ae9a0 = _0x4a36d2[_0x43ac2c(0xb53)](_0x43ac2c(0x375), ''); if (_0x2ae9a0 === _0x43ac2c(0x235)) break; try { _0x4435c8 += JSON[_0x43ac2c(0x6e7)](_0x2ae9a0)[_0x43ac2c(0x15d)][0x0][_0x43ac2c(0x313)]['parts'][0x0][_0x43ac2c(0x993)]; } catch { } } else { const _0x1b0913 = _0x2eb744[_0x43ac2c(0x103)][_0x577af4 - 0x2], _0x2c5e98 = _0x5d94b2['conversationHistory'][_0x43c897 - 0x1]; if (_0x1b0913[_0x43ac2c(0x8f5)] === ![] && _0x2c5e98[_0x43ac2c(0x8f5)] === !![]) _0x4a454d = _0x43ac2c(0x189) + _0x48e025[_0x43ac2c(0x382)] + '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。'; else _0x1b0913[_0x43ac2c(0x8f5)] === !![] && _0x2c5e98[_0x43ac2c(0x8f5)] === ![] && (_0x216eb4 = _0x43ac2c(0x6e9) + _0x4cd70d[_0x43ac2c(0x382)] + _0x43ac2c(0x370)); } } } _0x3e3e36 = _0x4435c8; break; } case _0x43ac2c(0x194): default: { const _0x2def83 = _0x1ef07d(_0x5a7015), _0x3d841b = _0x31852f[_0x43ac2c(0xb53)](/\/+$/, '') + '/v1/chat/completions', _0x47b7b7 = _0x57695d[_0x43ac2c(0x48a)](_0x3b2bf7 => { const _0x23172d = _0x43ac2c; if (_0x3b2bf7[_0x23172d(0x84c)] === _0x23172d(0x32c) && _0x3b2bf7[_0x23172d(0x9bd)]) { if (_0x23172d(0x390) !== _0x23172d(0x850)) return { 'role': _0x23172d(0x32c), 'content': [{ 'type': 'text', 'text': _0x3b2bf7['content'] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x3b2bf7[_0x23172d(0x9bd)], 'detail': _0x23172d(0x2d1) } }] }; else _0x3e2f0c(_0x441562); } return { 'role': _0x3b2bf7[_0x23172d(0x84c)], 'content': _0x3b2bf7[_0x23172d(0x313)] }; })[_0x43ac2c(0x3f0)](_0x207eba => _0x207eba[_0x43ac2c(0x313)]), _0x17fb12 = { 'model': _0x33f742, 'messages': _0x47b7b7, 'max_tokens': 0x1000, ..._0x924b71 ? { 'response_format': { 'type': _0x43ac2c(0x950) } } : {} }, _0x128f9b = await fetch(_0x3d841b, { 'method': _0x43ac2c(0x962), 'headers': { 'Content-Type': 'application/json', 'Authorization': 'Bearer\x20' + _0x2def83 }, 'body': JSON[_0x43ac2c(0x56e)](_0x17fb12), 'signal': _0x112063 }); if (!_0x128f9b['ok']) { if (_0x43ac2c(0xa8) !== 'PLMPu') { const _0x52bb6a = await _0x128f9b['json']()[_0x43ac2c(0x7c0)](() => ({})); throw new Error(_0x43ac2c(0xa51) + _0x128f9b['status'] + _0x43ac2c(0x9f1) + (_0x52bb6a[_0x43ac2c(0x5e3)]?.[_0x43ac2c(0x99)] || _0x128f9b['statusText'])); } else { if (_0x4244ff[_0x43ac2c(0xfe)]) _0x535d16(_0x52f7ec[_0x43ac2c(0xfe)]); } } const _0x3b6d9a = await _0x128f9b[_0x43ac2c(0x6dc)](); _0x3e3e36 = _0x3b6d9a[_0x43ac2c(0x2e6)]?.[0x0]?.[_0x43ac2c(0x99)]?.[_0x43ac2c(0x313)] || ''; break; } }return _0x3e3e36; } catch (_0x60f79b) { if (_0x60f79b['name'] === 'AbortError') { if (_0x43ac2c(0x7f8) !== _0x43ac2c(0x9ac)) return console['log'](_0x43ac2c(0x94e)), ''; else _0x3b7120['innerHTML'] = '', _0x47417f[_0x43ac2c(0x8cf)](_0xf036c7 => { const _0x523594 = _0x43ac2c, _0x463a41 = _0x4fbfde['createElement'](_0x523594(0xb0b)); _0x463a41[_0x523594(0x5f8)] = _0xf036c7, _0x463a41['addEventListener'](_0x523594(0x2c5), () => { const _0x5970c5 = _0x523594; _0x29b75a['value'] = _0xf036c7, _0x17f37a[_0x5970c5(0x4ad)][_0x5970c5(0x713)]('show'); }), _0x2d5ebf['appendChild'](_0x463a41); }), _0x3c2389[_0x43ac2c(0x4ad)][_0x43ac2c(0x44c)](_0x43ac2c(0xfb)), _0x559cf3(_0x43ac2c(0x6c0) + _0x378258[_0x43ac2c(0x30c)] + _0x43ac2c(0x7ae)); } throw _0x60f79b; } finally { _0x3cf4de['currentAbortController'] && _0x3cf4de[_0x43ac2c(0xaca)][_0x43ac2c(0x443)] === _0x112063 && (_0x3cf4de[_0x43ac2c(0xaca)] = null); } } async function _0x2022b5() { const _0x4a4d83 = _0xe59ed1, _0x3bd24c = _0x1f908b['characterEdit']['classList']['contains'](_0x4a4d83(0x5d1)), _0xc746db = _0x3bd24c ? _0x3c4841[_0x4a4d83(0x35c)] : null; let _0x5e8e95 = null, _0x545c34 = ''; if (_0x3bd24c && _0xc746db) { _0x5e8e95 = _0x3cf4de[_0x4a4d83(0x27a)][_0x4a4d83(0x6f0)](_0x427784 => _0x427784[_0x4a4d83(0x76d)] === _0x4a4d83(0x86c) && _0x427784['participantIds'][_0x4a4d83(0x5cc)](_0xc746db)); const _0x4811a1 = _0xd97907(_0xc746db); _0x545c34 = _0x4811a1 ? _0x4811a1[_0x4a4d83(0x382)] : _0x4a4d83(0xa4e); } else { if (_0x3cf4de[_0x4a4d83(0xa9a)]) { _0x5e8e95 = _0x5234d7(); const _0x380da3 = document[_0x4a4d83(0x7ef)]('char-name-header')['textContent']; _0x545c34 = _0x380da3 || '当前聊天'; } } if (!_0x5e8e95) { _0x5bf34b(_0x4a4d83(0x628)); return; } const _0x108fb4 = await _0x56efd8(_0x4a4d83(0x3eb) + _0x545c34 + _0x4a4d83(0x872)); if (!_0x108fb4) return; _0x5e8e95['id'] === _0x3cf4de[_0x4a4d83(0xa9a)] && (_0x4a4d83(0x3c6) === _0x4a4d83(0x33d) ? _0x23a0b6 && _0x5706d6[_0x4a4d83(0x2c5)]() : (_0x3a2de2(), _0x3cf4de[_0x4a4d83(0x103)] = [], _0x200086())); try { _0x4a4d83(0x8bc) === _0x4a4d83(0x8bc) ? localStorage['removeItem'](_0x4a4d83(0x524) + _0x5e8e95['id']) : (_0x549384[_0x4a4d83(0x636)][_0x4a4d83(0x673)](_0x14a4c1, 0x1), _0x358508(), _0x59714a(), _0x12b3b9(), _0x237a3c(), _0x1ef989(_0x4a4d83(0x7e7))); } catch (_0x1a06b1) { console[_0x4a4d83(0x5e3)](_0x4a4d83(0xb32) + _0x5e8e95['id'], _0x1a06b1); } _0x5bf34b('\x22' + _0x545c34 + '\x22\x20的聊天记录已清空。'); } const _0x1439ca = document['getElementById'](_0xe59ed1(0x7f7)), _0x572164 = document['getElementById'](_0xe59ed1(0x8a7)), _0x1d18ef = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x349)); _0x1439ca[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), async () => { const _0x25e912 = _0xe59ed1; _0x2a565e(!![], _0x25e912(0x2a4)); const _0x286d72 = []; try { const _0x420661 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [], 'indexedDBSnoopData': [] }; for (let _0x27aaa3 = 0x0; _0x27aaa3 < localStorage[_0x25e912(0x30c)]; _0x27aaa3++) { const _0x3d5bda = localStorage[_0x25e912(0x6bc)](_0x27aaa3); if (_0x3d5bda) _0x420661['localStorageData'][_0x3d5bda] = localStorage[_0x25e912(0x6b6)](_0x3d5bda); } const _0x12b724 = await _0xa7a9d2, _0x19075e = _0x12b724[_0x25e912(0x9b1)]([_0x4c2fa8, _0x4327d0, _0x3db906], _0x25e912(0x571)), _0x1ed349 = _0x19075e['objectStore'](_0x4c2fa8), _0x54c777 = _0x19075e[_0x25e912(0x326)](_0x4327d0), _0x1e4f45 = _0x19075e[_0x25e912(0x326)](_0x3db906), _0x312bb8 = new Promise((_0x384876, _0x4b84d6) => { const _0x2f9920 = _0x25e912; if (_0x2f9920(0x360) === _0x2f9920(0x360)) { const _0x8fff7b = _0x1ed349[_0x2f9920(0x5ef)](); _0x8fff7b[_0x2f9920(0x78f)] = () => _0x384876(_0x8fff7b[_0x2f9920(0xb95)]), _0x8fff7b[_0x2f9920(0x1bb)] = () => _0x4b84d6(_0x8fff7b[_0x2f9920(0x5e3)]); } else _0x54b647(), _0x49949e('userProfileList', 'home'); }), _0x4a5eb3 = new Promise((_0x6b25ec, _0x4a5e51) => { const _0x152ba5 = _0x25e912, _0x102653 = _0x54c777['getAll'](); _0x102653['onsuccess'] = () => _0x6b25ec(_0x102653['result']), _0x102653['onerror'] = () => _0x4a5e51(_0x102653[_0x152ba5(0x5e3)]); }), _0x10b0dd = new Promise((_0x43a402, _0x189d9b) => { const _0x443706 = _0x25e912, _0x2d354f = _0x1e4f45[_0x443706(0x5ef)](); _0x2d354f[_0x443706(0x78f)] = () => _0x43a402(_0x2d354f[_0x443706(0xb95)]), _0x2d354f[_0x443706(0x1bb)] = () => _0x189d9b(_0x2d354f[_0x443706(0x5e3)]); }), [_0x4d8ca1, _0x159c69, _0x51f72c] = await Promise[_0x25e912(0x6d5)]([_0x312bb8, _0x4a5eb3, _0x10b0dd]); for (const _0x95bbb1 of _0x4d8ca1) { if (_0x25e912(0xd3) === 'utDlW') try { _0x25f20d[_0x13af76] = _0x2dd958['parse'](_0x1acb74); } catch (_0x4ec9ab) { } else { if (_0x95bbb1[_0x25e912(0x664)] instanceof Blob) { if (_0x25e912(0x4cb) !== _0x25e912(0x29b)) try { _0x25e912(0x2af) === _0x25e912(0x2af) ? _0x420661[_0x25e912(0x419)][_0x95bbb1['id']] = await _0x50ddb8(_0x95bbb1[_0x25e912(0x664)]) : (_0x40b124[_0x25e912(0x886)](), _0x40741e['classList'][_0x25e912(0x6c7)](_0x25e912(0x494)), _0x1d8ab0[_0x25e912(0x4ad)]['toggle'](_0x25e912(0xa98))); } catch (_0x2d5cec) { if ('cdikL' === 'zrqxp') { _0x39102b(_0x25e912(0xa5f)); return; } else _0x286d72[_0x25e912(0x967)](_0x95bbb1['id']); } else { const _0x347abc = _0x571b83['createElement']('div'); _0x347abc['className'] = _0x25e912(0xa55), _0x347abc[_0x25e912(0x361)][_0x25e912(0xaa1)] = _0x3a88b7[_0x25e912(0x382)]; const _0x3cd9ec = _0x3cd146[_0x25e912(0xb60)](_0x25e912(0x5b3)); _0x3cd9ec[_0x25e912(0x557)] = _0x5576f8[_0x25e912(0x98a)], _0x3cd9ec[_0x25e912(0x996)] = _0x25e912(0xb8a), _0x3cd9ec[_0x25e912(0x4c5)] = _0x1170df[_0x25e912(0x382)], _0x3cd9ec['className'] = _0x25e912(0xa54), _0x347abc[_0x25e912(0x8fe)](_0x3cd9ec), _0x4e523f['appendChild'](_0x347abc), _0x347abc['addEventListener'](_0x25e912(0x2c5), () => { const _0x2f7efd = _0x25e912; if (_0x242b37) { _0x347abc['classList']['toggle']('selected'); const _0x4ad21f = _0x4d62e6[_0x2f7efd(0x5cb)](_0x2f7efd(0xa16)); _0x377223[_0x2f7efd(0x4ad)][_0x2f7efd(0x6c7)](_0x2f7efd(0x5d1), !!_0x4ad21f); } else _0x2a11dd(_0x460b97); }); } } } } for (const _0x1c7973 of _0x159c69) { if ('bsIcP' === 'ynaVG') { const _0x4b7cb4 = _0x4cb815(_0x24377a[0x1], 0xa), _0x8e0606 = _0x5b6c5d(_0x5a8af2[0x2], 0xa), _0x1487df = _0x414cd4(_0x356d4a[0x3], 0xa) * (_0x17c637[0x3][_0x25e912(0x30c)] === 0x2 ? 0xa : 0x1), _0x30e9f8 = _0x4b7cb4 * 0x3c + _0x8e0606 + _0x1487df / 0x3e8, _0x5b0050 = _0x3707f5[_0x25e912(0xb53)](_0x56b5e5, '')[_0x25e912(0x4ca)](); _0x5b0050 && _0x3cab3f['push']({ 'time': _0x30e9f8, 'text': _0x5b0050 }); } else { const _0x41dc75 = { ..._0x1c7973 }; if (_0x1c7973[_0x25e912(0x17c)] instanceof Blob) { if ('DtMBj' !== _0x25e912(0xaa4)) _0x41dc75['audio'] = await _0x50ddb8(_0x1c7973[_0x25e912(0x17c)]); else { const _0x3e228d = _0x2831f4[_0x25e912(0x93)] === 'character' ? '你' : _0x4367c3[_0x25e912(0x437)]; _0x4d7820 += _0x25e912(0x98b) + _0x3e228d + ':\x20' + _0x3fad55['content'] + '\x0a'; } } _0x1c7973[_0x25e912(0xa99)] instanceof Blob && (_0x25e912(0xb5e) === _0x25e912(0xb5e) ? _0x41dc75[_0x25e912(0xa99)] = await _0x50ddb8(_0x1c7973[_0x25e912(0xa99)]) : _0x4a2c50['head'][_0x25e912(0xb63)](_0x25e912(0xa62), _0x25e912(0x922))), _0x420661[_0x25e912(0x6a4)][_0x25e912(0x967)](_0x41dc75); } } _0x420661[_0x25e912(0x22c)] = _0x51f72c; const _0x432201 = new Blob([JSON[_0x25e912(0x56e)](_0x420661, null, 0x2)], { 'type': 'application/json' }), _0x10ef29 = URL[_0x25e912(0x9e4)](_0x432201), _0x4be8b8 = document[_0x25e912(0xb60)]('a'), _0x35f366 = new Date(), _0x52774a = _0x35f366[_0x25e912(0x96b)]() + '-' + String(_0x35f366[_0x25e912(0x677)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x35f366[_0x25e912(0x5c3)]())[_0x25e912(0x5b5)](0x2, '0'); _0x4be8b8['href'] = _0x10ef29, _0x4be8b8[_0x25e912(0x226)] = _0x25e912(0x620) + _0x52774a + _0x25e912(0x515), document[_0x25e912(0x5e5)][_0x25e912(0x8fe)](_0x4be8b8), _0x4be8b8[_0x25e912(0x2c5)](), document['body'][_0x25e912(0x8dd)](_0x4be8b8), URL['revokeObjectURL'](_0x10ef29), _0x2a565e(![]), _0x286d72[_0x25e912(0x30c)] > 0x0 ? _0x5bf34b(_0x25e912(0x283) + _0x286d72['join']('\x0a')) : _0x25e912(0x11e) === _0x25e912(0x11e) ? _0x5bf34b(_0x25e912(0x6b7)) : (_0x1f982e[_0x25e912(0x937)][_0x25e912(0x8a4)] = _0x25e912(0x98c), _0x60872b(() => _0x4be092[_0x25e912(0x4ad)][_0x25e912(0x44c)](_0x25e912(0xfb)), 0xa)); } catch (_0x49494c) { _0x25e912(0x4f1) === _0x25e912(0x30a) ? _0x383ff7 = _0x31bd54 : (_0x2a565e(![]), console[_0x25e912(0x5e3)]('全量导出失败:', _0x49494c), _0x5bf34b(_0x25e912(0x8d5) + _0x49494c[_0x25e912(0x99)])); } }), _0x572164['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x2d0a73 = _0xe59ed1; _0x1d18ef[_0x2d0a73(0x2c5)](); }), _0x35c8b3[_0xe59ed1(0x25c)]('click', _0x5e6e64), _0x1d18ef[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), _0x47aff3 => { const _0xaaa12b = _0xe59ed1, _0x1baf6d = _0x47aff3[_0xaaa12b(0x13b)]['files'][0x0]; if (!_0x1baf6d) return; _0x56efd8(_0xaaa12b(0x319))[_0xaaa12b(0x683)](_0x568c27 => { const _0x12ec17 = _0xaaa12b; if (!_0x568c27) { _0x1d18ef[_0x12ec17(0x35c)] = ''; return; } _0x2a565e(!![], _0x12ec17(0xb75)); const _0x44ff08 = new FileReader(); _0x44ff08['onload'] = async _0x4e0cfe => { const _0x2fae2e = _0x12ec17; if (_0x2fae2e(0x998) === _0x2fae2e(0x998)) try { if ('GvZwk' !== 'GvZwk') _0x5ef765[_0x2fae2e(0x5f8)] = '❚❚'; else { const _0x52441c = JSON[_0x2fae2e(0x6e7)](_0x4e0cfe[_0x2fae2e(0x13b)]['result']); if (!_0x52441c[_0x2fae2e(0x4d3)] || !_0x52441c[_0x2fae2e(0x419)]) { if (_0x2fae2e(0x5a1) === _0x2fae2e(0x5a1)) throw new Error(_0x2fae2e(0x247)); else { const _0x26a552 = _0x2fae2e(0xa20); _0xd939d1[_0x2fae2e(0x5e5)][_0x2fae2e(0xb63)](_0x2fae2e(0xa62), _0x26a552); const _0x21d679 = _0xedd7e5[_0x2fae2e(0x7ef)](_0x2fae2e(0x806)), _0x1329bd = _0x266c52[_0x2fae2e(0x7ef)](_0x2fae2e(0x1ea)), _0x4688a4 = _0x18e0fd[_0x2fae2e(0x7ef)](_0x2fae2e(0x773)), _0x1fa127 = _0x535907['getElementById'](_0x2fae2e(0x127)), _0x3b1fb1 = _0x21d679[_0x2fae2e(0x5cb)](_0x2fae2e(0xb06)), _0x18a332 = () => { const _0x12bcaa = _0x2fae2e; _0x21d679[_0x12bcaa(0x713)](), _0x274a2b(); }; _0x4688a4[_0x2fae2e(0xafa)] = () => { const _0x36c7cb = _0x2fae2e; _0x3392ae(_0x1329bd[_0x36c7cb(0x35c)]), _0x18a332(); }, _0x1fa127[_0x2fae2e(0xafa)] = _0x18a332, _0x3b1fb1[_0x2fae2e(0xafa)] = _0x18a332; } } _0x2a565e(!![], _0x2fae2e(0x918)); const _0x325434 = await Promise[_0x2fae2e(0x6d5)](Object['keys'](_0x52441c[_0x2fae2e(0x419)])[_0x2fae2e(0x48a)](async _0x71d04d => { const _0x241cca = _0x2fae2e; if (_0x241cca(0x410) === _0x241cca(0x410)) { const _0x27a035 = _0x52441c[_0x241cca(0x419)][_0x71d04d]; if (typeof _0x27a035 === _0x241cca(0xf4) && _0x27a035[_0x241cca(0xb05)](_0x241cca(0x6f4))) { const _0x91d3b = await _0x151f54(_0x27a035); return { 'id': _0x71d04d, 'blob': _0x91d3b }; } return null; } else _0x5c12a7(_0x12ecb4); }))[_0x2fae2e(0x683)](_0x5d337b => _0x5d337b['filter'](Boolean)), _0x5e2f80 = []; if (_0x52441c[_0x2fae2e(0x6a4)]) { if (_0x2fae2e(0x3b4) === 'tIOze') { _0x2a565e(!![], _0x2fae2e(0x338)); const _0x6b540e = _0x52441c[_0x2fae2e(0x6a4)][_0x2fae2e(0x48a)](async _0x8d1d3 => { const _0x5c3a12 = _0x2fae2e, _0xa4e43f = { ..._0x8d1d3 }; if (_0x8d1d3[_0x5c3a12(0x17c)]) _0xa4e43f[_0x5c3a12(0x17c)] = await _0x151f54(_0x8d1d3[_0x5c3a12(0x17c)]); if (_0x8d1d3[_0x5c3a12(0xa99)]) _0xa4e43f[_0x5c3a12(0xa99)] = await _0x151f54(_0x8d1d3[_0x5c3a12(0xa99)]); return _0xa4e43f; }); _0x5e2f80[_0x2fae2e(0x967)](...await Promise['all'](_0x6b540e)); } else _0x131620(_0x17dd56), _0xc6a3ba['value'] = '', _0x2e24c4(_0x50c048, 0x64); } _0x2a565e(!![], '正在清空旧数据...'), localStorage[_0x2fae2e(0x436)](); for (const _0x264afe in _0x52441c[_0x2fae2e(0x4d3)]) { localStorage[_0x2fae2e(0x531)](_0x264afe, _0x52441c[_0x2fae2e(0x4d3)][_0x264afe]); } _0x2a565e(!![], _0x2fae2e(0x36c)); const _0x5655fe = await _0xa7a9d2, _0x4af387 = _0x5655fe['transaction']([_0x4c2fa8, _0x4327d0, _0x3db906], _0x2fae2e(0x12b)), _0x16b600 = _0x4af387['objectStore'](_0x4c2fa8), _0x5cebb6 = _0x4af387[_0x2fae2e(0x326)](_0x4327d0), _0x4b4fae = _0x4af387[_0x2fae2e(0x326)](_0x3db906); _0x16b600['clear'](), _0x5cebb6[_0x2fae2e(0x436)](), _0x4b4fae[_0x2fae2e(0x436)](), _0x325434[_0x2fae2e(0x8cf)](_0xfa2207 => _0x16b600[_0x2fae2e(0x336)](_0xfa2207)), _0x5e2f80[_0x2fae2e(0x8cf)](_0x496da8 => _0x5cebb6[_0x2fae2e(0x336)](_0x496da8)), _0x52441c['indexedDBSnoopData'] && Array[_0x2fae2e(0x9a1)](_0x52441c[_0x2fae2e(0x22c)]) && (console[_0x2fae2e(0x76a)](_0x2fae2e(0x18e)), _0x52441c[_0x2fae2e(0x22c)][_0x2fae2e(0x8cf)](_0x4b2b0c => _0x4b4fae[_0x2fae2e(0x336)](_0x4b2b0c))), await new Promise((_0xc5955c, _0x284668) => { const _0x13047e = _0x2fae2e; _0x4af387[_0x13047e(0x455)] = _0xc5955c, _0x4af387['onerror'] = _0x44326f => _0x284668(_0x44326f[_0x13047e(0x13b)][_0x13047e(0x5e3)]); }), _0x2a565e(![]), _0x5bf34b(_0x2fae2e(0x24a)), setTimeout(() => location['reload'](), 0x640); } } catch (_0x19736b) { _0x2a565e(![]), console['error']('全量导入失败:', _0x19736b), _0x5bf34b(_0x2fae2e(0x760) + _0x19736b[_0x2fae2e(0x99)]); } finally { _0x1d18ef['value'] = ''; } else _0xc30ed3 = { 'speaker': _0x56f813[_0x2fae2e(0x382)], 'line': _0x28cb2d[_0x2fae2e(0x313)], 'emotion': _0x2fae2e(0x9e5) }; }, _0x44ff08[_0x12ec17(0x71c)](_0x1baf6d); }); }); function _0x344db7() { const _0x3396e7 = _0xe59ed1; _0x180ec3['value'] = _0x3cf4de[_0x3396e7(0x71a)][_0x3396e7(0x1a0)] || '', _0x46947e[_0x3396e7(0x35c)] = _0x3cf4de[_0x3396e7(0x71a)]['key'] || '', _0x92a97a['value'] = _0x3cf4de['apiSettings'][_0x3396e7(0x76b)] || '', _0x3ce960[_0x3396e7(0x35c)] = String(_0x3cf4de[_0x3396e7(0x84a)]?.[_0x3396e7(0xb59)] ?? 0x64), document[_0x3396e7(0x7ef)](_0x3396e7(0x940))[_0x3396e7(0x35c)] = _0x3cf4de[_0x3396e7(0x71a)][_0x3396e7(0x591)] || _0x3396e7(0x194); } function _0x4273d1() { const _0x8a43db = _0xe59ed1; _0x3cf4de['apiSettings'][_0x8a43db(0x1a0)] = _0x180ec3[_0x8a43db(0x35c)][_0x8a43db(0x4ca)](), _0x3cf4de['apiSettings'][_0x8a43db(0x6bc)] = _0x46947e[_0x8a43db(0x35c)][_0x8a43db(0x4ca)](), _0x3cf4de['apiSettings']['model'] = _0x92a97a[_0x8a43db(0x35c)]['trim'](), _0x3cf4de[_0x8a43db(0x71a)][_0x8a43db(0x591)] = document[_0x8a43db(0x7ef)](_0x8a43db(0x940))[_0x8a43db(0x35c)]; const _0x46b0f8 = parseInt(_0x3ce960[_0x8a43db(0x35c)], 0xa); _0x3cf4de[_0x8a43db(0x84a)][_0x8a43db(0xb59)] = Number[_0x8a43db(0x4ba)](_0x46b0f8) && _0x46b0f8 > 0x0 ? _0x46b0f8 : 0x64, _0x3a3bc1(), _0x5bf34b(_0x8a43db(0x4b9)); } function _0x52c47f() { const _0x4b8c65 = _0xe59ed1; _0x385b58[_0x4b8c65(0x35c)] = _0x3cf4de['userProfile'][_0x4b8c65(0x382)] || '', _0x32d4b2[_0x4b8c65(0x557)] = _0x3cf4de[_0x4b8c65(0x2b5)][_0x4b8c65(0x3f1)] || _0x2e585f, _0x7a57c3[_0x4b8c65(0x35c)] = _0x3cf4de[_0x4b8c65(0x2b5)][_0x4b8c65(0xa2e)] || ''; } async function _0xf22453(_0x2ef928 = null) { const _0x5b07aa = _0xe59ed1; if ('PSZsV' === 'PSZsV') { _0x459e0a(_0x5b07aa(0x1bc), _0x19031a), _0x336ace(_0x5b07aa(0x943)); const _0x30f3b5 = _0x2ef928 ? _0x3cf4de[_0x5b07aa(0xad3)][_0x5b07aa(0x6f0)](_0x2b4866 => _0x2b4866['id'] === _0x2ef928) : null; _0x2ef5a5('world-book-checkboxes-container', _0x30f3b5 ? _0x30f3b5['linkedWorldBookIds'] || [] : []); const _0x25238f = document[_0x5b07aa(0x7ef)](_0x5b07aa(0x6af)), _0x45face = document[_0x5b07aa(0x7ef)](_0x5b07aa(0xa59)); _0x40d88e[_0x5b07aa(0x557)] = _0x574d9b, _0x35a16b[_0x5b07aa(0x35c)] = '', _0x414363[_0x5b07aa(0x937)][_0x5b07aa(0x6aa)] = '', _0x25a365['value'] = '', _0x30d38b[_0x5b07aa(0x937)][_0x5b07aa(0x6aa)] = '', _0x176543['value'] = ''; const _0x1b0464 = [_0x5b07aa(0x9e5), 'happy', _0x5b07aa(0xe3), 'sad', _0x5b07aa(0x2f0)]; _0x1b0464[_0x5b07aa(0x8cf)](_0x14b15c => { const _0x23fe84 = _0x5b07aa; _0x23fe84(0x884) === 'eBYWT' ? (document['getElementById'](_0x23fe84(0x7ca) + _0x14b15c + _0x23fe84(0x83b))['style'][_0x23fe84(0x6aa)] = '', document[_0x23fe84(0x7ef)](_0x23fe84(0x7ca) + _0x14b15c + _0x23fe84(0xf2))[_0x23fe84(0x35c)] = '') : _0x2ce4c4[_0x23fe84(0x937)][_0x23fe84(0x52e)] = '1'; }); if (_0x2ef928) { if (!_0x30f3b5) return; _0x3c4841[_0x5b07aa(0x35c)] = _0x30f3b5['id'], _0x2b9753[_0x5b07aa(0x5f8)] = _0x5b07aa(0x77a), _0x44090a[_0x5b07aa(0x35c)] = _0x30f3b5[_0x5b07aa(0x382)], _0x2b0402[_0x5b07aa(0x35c)] = _0x30f3b5[_0x5b07aa(0x43f)], _0x41ce20[_0x5b07aa(0x35c)] = _0x30f3b5[_0x5b07aa(0xa2e)], document[_0x5b07aa(0x7ef)](_0x5b07aa(0x994))[_0x5b07aa(0x35c)] = _0x30f3b5[_0x5b07aa(0x9d5)] || '', _0x25238f['value'] = _0x30f3b5[_0x5b07aa(0x2d5)] || '', _0x45face[_0x5b07aa(0x35c)] = _0x30f3b5['userAvatarFrameUrl'] || ''; const _0x27b1ff = _0x3cf4de[_0x5b07aa(0x27a)][_0x5b07aa(0x6f0)](_0x52c807 => _0x52c807[_0x5b07aa(0x76d)] === 'private' && _0x52c807['participantIds']['includes'](_0x2ef928)); document[_0x5b07aa(0x7ef)]('char-edit-bind-user')[_0x5b07aa(0x35c)] = _0x27b1ff?.[_0x5b07aa(0x2c4)] || _0x3cf4de[_0x5b07aa(0xa37)]; try { if (_0x5b07aa(0x43d) === 'aHztp') { const _0xc14f3b = await _0x47b504(_0x5b07aa(0x54f) + _0x30f3b5['id']); _0x40d88e[_0x5b07aa(0x557)] = _0xc14f3b ? URL['createObjectURL'](_0xc14f3b) : _0x30f3b5[_0x5b07aa(0x3f1)] || _0x574d9b; const _0x2f5bb0 = await _0x47b504(_0x5b07aa(0x6fe) + _0x30f3b5['id']); if (_0x2f5bb0) _0x414363[_0x5b07aa(0x937)][_0x5b07aa(0x6aa)] = _0x5b07aa(0x550) + URL[_0x5b07aa(0x9e4)](_0x2f5bb0) + '\x27)'; const _0x32737d = await _0x47b504(_0x5b07aa(0xb87) + _0x30f3b5['id']); if (_0x32737d) _0x30d38b['style']['backgroundImage'] = 'url(\x27' + URL['createObjectURL'](_0x32737d) + '\x27)'; for (const _0xe3b689 of _0x1b0464) { if (_0x5b07aa(0xa14) === _0x5b07aa(0x1bd)) _0x45ad54[_0x5b07aa(0x937)][_0x5b07aa(0x8a4)] = _0x5b07aa(0x6cf); else { const _0x2f5d16 = await _0x47b504(_0x5b07aa(0xb51) + _0xe3b689 + '_' + _0x30f3b5['id']); _0x2f5d16 && (document[_0x5b07aa(0x7ef)](_0x5b07aa(0x7ca) + _0xe3b689 + _0x5b07aa(0x83b))[_0x5b07aa(0x937)][_0x5b07aa(0x6aa)] = _0x5b07aa(0x550) + URL[_0x5b07aa(0x9e4)](_0x2f5d16) + '\x27)'); } } } else { if (_0x3a698e === null) return; const _0x149f09 = _0x6b4bff[_0x5b07aa(0x35c)][_0x5b07aa(0x4ca)](); if (_0x149f09 === '') { _0x502975(); return; } const _0x206126 = _0x52be9b[_0x5b07aa(0x103)][_0x5dd5fb]; _0x206126 && (_0x206126[_0x5b07aa(0x313)] = _0x149f09, _0xe95910(), _0x1b925e()), _0x3fa536['classList'][_0x5b07aa(0x713)](_0x5b07aa(0xfb)), _0x38d756 = null; } } catch (_0x70353f) { console[_0x5b07aa(0x5e3)](_0x5b07aa(0x18c) + _0x30f3b5['id'] + _0x5b07aa(0x95), _0x70353f), _0x40d88e[_0x5b07aa(0x557)] = _0x30f3b5[_0x5b07aa(0x3f1)] || _0x574d9b; } } else 'Sgcwf' === 'Sgcwf' ? (_0x3c4841[_0x5b07aa(0x35c)] = '', _0x2b9753['textContent'] = _0x5b07aa(0x115), _0x44090a[_0x5b07aa(0x35c)] = _0x5b07aa(0x27b) + (_0x3cf4de['characters']['length'] + 0x1), _0x2b0402['value'] = '', _0x41ce20['value'] = '你是一个乐于助人的AI助手。', document['getElementById'](_0x5b07aa(0x994))['value'] = '', _0x25238f[_0x5b07aa(0x35c)] = '', _0x45face[_0x5b07aa(0x35c)] = '') : _0x1971c8 = _0x3cb5f1(_0x176587); _0x5b0a17(); const _0x5c001a = document[_0x5b07aa(0x7ef)](_0x5b07aa(0x994)); let _0x582e65 = document['getElementById'](_0x5b07aa(0xb39)); !_0x582e65 && (_0x5b07aa(0x754) === _0x5b07aa(0x754) ? (_0x582e65 = document[_0x5b07aa(0xb60)](_0x5b07aa(0x937)), _0x582e65['id'] = _0x5b07aa(0xb39), document[_0x5b07aa(0x7a6)][_0x5b07aa(0x8fe)](_0x582e65)) : _0x20e010['push']('[' + _0x41cf5c + _0x5b07aa(0x248) + _0xaeb75(_0x440f2c) + ']\x20' + _0x139e7b(_0x3a6487[_0x5b07aa(0x313)])['trim']())); const _0x4c2ae9 = () => { const _0x2775ff = _0x5b07aa; if (_0x2775ff(0x7b0) === 'wiOns') { const _0x4805d0 = _0x5a1f0c['value'][_0x2775ff(0x4ca)]()[_0x2775ff(0x5cc)](_0x4be8fb); _0x86d86e[_0x2775ff(0x193)] = _0x4805d0; } else { const _0x570873 = _0x5c001a[_0x2775ff(0x35c)]; let _0x513853 = _0x570873[_0x2775ff(0xb53)](/\.bubble\.sent/g, _0x2775ff(0x2a6))[_0x2775ff(0xb53)](/\.bubble\.received/g, _0x2775ff(0x878)); _0x582e65[_0x2775ff(0x252)] = _0x513853; } }; _0x5c001a[_0x5b07aa(0x23b)](_0x5b07aa(0x9cc), _0x4c2ae9), _0x5c001a[_0x5b07aa(0x25c)](_0x5b07aa(0x9cc), _0x4c2ae9), _0x4c2ae9(); } else { const _0x32a778 = _0x40f4d3(_0x5df719)['trim'](); if (_0x32a778['startsWith'](_0x5b07aa(0x137)) && _0x32a778['endsWith']('</div>')) return [_0x32a778]; const _0x59aa29 = _0x32a778['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x5b07aa(0x48a)](_0x10215f => _0x10215f['trim']())[_0x5b07aa(0x3f0)](_0x45b50f); if (_0x59aa29[_0x5b07aa(0x30c)] > 0x0) return _0x59aa29[_0x5b07aa(0x6cd)](0x0, 0xc); return [_0x32a778][_0x5b07aa(0x3f0)](_0xcf4d0a); } } function _0x3f1569() { const _0x368fe0 = _0xe59ed1; try { const _0x20274d = { 'type': _0x368fe0(0x35d), 'version': 0x1, 'timestamp': Date[_0x368fe0(0x740)](), 'accountingData': _0x3cf4de[_0x368fe0(0xb4a)], 'accountingLedger': _0x3cf4de[_0x368fe0(0x3a3)] }, _0x2e8645 = new Blob([JSON[_0x368fe0(0x56e)](_0x20274d, null, 0x2)], { 'type': 'application/json' }), _0x424047 = URL[_0x368fe0(0x9e4)](_0x2e8645), _0x5bf3c2 = document['createElement']('a'), _0x1d8779 = new Date(), _0x30d14b = _0x1d8779['getFullYear']() + '-' + String(_0x1d8779[_0x368fe0(0x677)]() + 0x1)[_0x368fe0(0x5b5)](0x2, '0') + '-' + String(_0x1d8779['getDate']())[_0x368fe0(0x5b5)](0x2, '0'); _0x5bf3c2[_0x368fe0(0xb2b)] = _0x424047, _0x5bf3c2['download'] = _0x368fe0(0x496) + _0x30d14b + _0x368fe0(0x515), document[_0x368fe0(0x5e5)][_0x368fe0(0x8fe)](_0x5bf3c2), _0x5bf3c2[_0x368fe0(0x2c5)](), document[_0x368fe0(0x5e5)][_0x368fe0(0x8dd)](_0x5bf3c2), URL['revokeObjectURL'](_0x424047), _0x5bf34b(_0x368fe0(0xcb)); } catch (_0x1a74c7) { 'hBfad' === _0x368fe0(0xa02) ? _0x4e3252 = _0x368fe0(0x7a7) + _0x19fe06 + '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' : (console[_0x368fe0(0x5e3)](_0x368fe0(0x276), _0x1a74c7), _0x5bf34b('导出失败了，哼:\x20' + _0x1a74c7[_0x368fe0(0x99)])); } } function _0x4f2a7f(_0x47eba1) { const _0x378309 = _0xe59ed1; if (_0x378309(0xc4) === _0x378309(0xc4)) { const _0x91e190 = _0x47eba1[_0x378309(0x13b)][_0x378309(0x27c)][0x0]; if (!_0x91e190) return; _0x56efd8('确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！')[_0x378309(0x683)](_0x3851a0 => { const _0x27daae = _0x378309; if (_0x27daae(0x678) === _0x27daae(0x888)) { _0x56a64f(_0x27daae(0x16d)); return; } else { if (!_0x3851a0) { if (_0x27daae(0x448) !== _0x27daae(0xad7)) { _0x47eba1[_0x27daae(0x13b)][_0x27daae(0x35c)] = ''; return; } else { if (_0x440f38) _0x1cec30(_0x5eac5c); } } _0x2a565e(!![], _0x27daae(0xadb)); const _0x15bb84 = new FileReader(); _0x15bb84[_0x27daae(0x8f7)] = _0x4873f5 => { const _0x3ee2bd = _0x27daae; if ('rTzLO' === 'YYiiZ') _0x264295[_0x3ee2bd(0x5e3)](_0x3ee2bd(0x651), _0x5b3950); else try { if ('MQvUc' !== _0x3ee2bd(0x688)) { const _0xd2416e = JSON[_0x3ee2bd(0x6e7)](_0x4873f5[_0x3ee2bd(0x13b)][_0x3ee2bd(0xb95)]); if (_0xd2416e[_0x3ee2bd(0x76d)] !== _0x3ee2bd(0x35d) || !_0xd2416e[_0x3ee2bd(0xb4a)] || !_0xd2416e['accountingLedger']) { if ('YDKRz' !== _0x3ee2bd(0x3ad)) { if (_0x21b18e) _0x3b1980[_0x3ee2bd(0x2c5)](); } else throw new Error('这不是我认证的账本卷轴，导入失败！'); } _0x3cf4de['accountingData'] = _0xd2416e[_0x3ee2bd(0xb4a)], _0x3cf4de[_0x3ee2bd(0x3a3)] = _0xd2416e[_0x3ee2bd(0x3a3)], _0x3a3bc1(), _0x2a565e(![]), _0x5bf34b(_0x3ee2bd(0x256)), _0x12423b(); } else { _0x6a0204[_0x3ee2bd(0x4a5)] = [..._0x14b4d1]; const _0x54144e = _0x38cd59['activeMeetingScriptQueue'][_0x3ee2bd(0x56a)](); _0x5b2588[_0x3ee2bd(0x5f8)] = _0x54144e[_0x3ee2bd(0x5b4)] === _0x3ee2bd(0x785) ? '旁白' : _0x54144e[_0x3ee2bd(0x5b4)], _0x378d64[_0x3ee2bd(0x5f8)] = _0x54144e[_0x3ee2bd(0x312)], _0x54144e[_0x3ee2bd(0x5b4)] !== _0x3ee2bd(0x785) && _0x300b06(_0x19fd67['activeMeetingCharId'], _0x54144e['emotion']); } } catch (_0x2e7ba0) { _0x2a565e(![]), console[_0x3ee2bd(0x5e3)](_0x3ee2bd(0x3bd), _0x2e7ba0), _0x5bf34b(_0x3ee2bd(0x760) + _0x2e7ba0['message']); } finally { if (_0x3ee2bd(0x25b) === 'hATNO') { const _0x4a3f3a = _0x45989f[_0x3ee2bd(0x3cf)]['map'](_0x7cf73 => { const _0x22306c = _0x3ee2bd, _0x55df2c = _0x269956(_0x7cf73[_0x22306c(0x89c)])?.[_0x22306c(0x382)] || '未知'; return _0x22306c(0x5f7) + _0x55df2c + _0x22306c(0x822) + _0x7cf73[_0x22306c(0x313)] + _0x22306c(0x4e1); })[_0x3ee2bd(0x863)](''); _0x2aa7f4 = _0x3ee2bd(0x11d) + _0x4a3f3a + _0x3ee2bd(0x4e1); } else _0x47eba1[_0x3ee2bd(0x13b)][_0x3ee2bd(0x35c)] = ''; } }, _0x15bb84[_0x27daae(0x71c)](_0x91e190); } }); } else _0x4a4a34[_0x378309(0x253)] = null, _0x4a640b(_0x378309(0x3b6), _0x378309(0x7c7)); } async function _0x565dcf() { const _0x503eb7 = _0xe59ed1; if ('QzqHM' !== _0x503eb7(0xaa)) { const _0x320ed8 = _0x3c4841['value']; if (!_0x320ed8) { _0x5bf34b('你还没保存这个角色呢，导什么导？'); return; } const _0x388003 = _0xd97907(_0x320ed8); if (!_0x388003) return; _0x2a565e(!![], _0x503eb7(0x8b7) + _0x388003[_0x503eb7(0x382)] + _0x503eb7(0x30f)); try { const _0x3e527b = { 'type': _0x503eb7(0x1af), 'version': 0x1, 'name': _0x388003[_0x503eb7(0x382)], 'remark': _0x388003[_0x503eb7(0x43f)], 'persona': _0x388003[_0x503eb7(0xa2e)], 'bubbleCss': _0x388003[_0x503eb7(0x9d5)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x38013f = await _0x47b504('char_avatar_' + _0x388003['id']); if (_0x38013f) _0x3e527b['avatar'] = await _0x50ddb8(_0x38013f); const _0x248f3e = [_0x503eb7(0x9e5), _0x503eb7(0x784), _0x503eb7(0xe3), _0x503eb7(0x9a4), _0x503eb7(0x2f0)]; for (const _0x418306 of _0x248f3e) { const _0x5f5a5f = await _0x47b504(_0x503eb7(0xb51) + _0x418306 + '_' + _0x388003['id']); _0x5f5a5f && (_0x3e527b[_0x503eb7(0xa1d)][_0x418306] = await _0x50ddb8(_0x5f5a5f)); } _0x388003[_0x503eb7(0x91e)] && _0x388003['linkedWorldBookIds'][_0x503eb7(0x30c)] > 0x0 && (_0x3e527b[_0x503eb7(0xb88)] = _0x388003['linkedWorldBookIds'][_0x503eb7(0x48a)](_0x27ebfa => _0x3cf4de[_0x503eb7(0xb88)]['find'](_0x4a625e => _0x4a625e['id'] === _0x27ebfa))[_0x503eb7(0x3f0)](Boolean)[_0x503eb7(0x48a)](_0x49f343 => ({ 'name': _0x49f343[_0x503eb7(0x382)], 'content': _0x49f343[_0x503eb7(0x313)], 'categoryId': _0x49f343[_0x503eb7(0x2da)] || _0x503eb7(0xa41) }))); const _0x4c20fa = new Set(_0x3e527b[_0x503eb7(0xb88)][_0x503eb7(0x48a)](_0x2e00ec => _0x2e00ec[_0x503eb7(0x2da)])); _0x3e527b[_0x503eb7(0x79c)] = _0x3cf4de[_0x503eb7(0x79c)][_0x503eb7(0x3f0)](_0x295ca7 => _0x4c20fa[_0x503eb7(0x86b)](_0x295ca7['id'])); const _0x161aa2 = new Blob([JSON[_0x503eb7(0x56e)](_0x3e527b, null, 0x2)], { 'type': _0x503eb7(0x8dc) }), _0x4cc3ae = URL[_0x503eb7(0x9e4)](_0x161aa2), _0x3f27f2 = document[_0x503eb7(0xb60)]('a'); _0x3f27f2[_0x503eb7(0xb2b)] = _0x4cc3ae, _0x3f27f2[_0x503eb7(0x226)] = _0x388003['name'] + _0x503eb7(0x5c5), document[_0x503eb7(0x5e5)][_0x503eb7(0x8fe)](_0x3f27f2), _0x3f27f2[_0x503eb7(0x2c5)](), document[_0x503eb7(0x5e5)][_0x503eb7(0x8dd)](_0x3f27f2), URL[_0x503eb7(0x3c9)](_0x4cc3ae); } catch (_0x51211d) { console[_0x503eb7(0x5e3)](_0x503eb7(0x513), _0x51211d), _0x5bf34b(_0x503eb7(0x11a) + _0x51211d[_0x503eb7(0x99)]); } finally { _0x503eb7(0xb0) !== _0x503eb7(0xb42) ? _0x2a565e(![]) : _0x1eb3ec = _0x4b787c['parse'](_0x5af095); } } else _0x1898ab = new _0x254adf(_0x198d62[_0x503eb7(0x58b)][_0x503eb7(0x80e)](null, _0x397659)), _0x337656 = _0x26040b[_0x503eb7(0x118)](_0x503eb7(0x77e), { 'dateStyle': _0x503eb7(0x254), 'timeStyle': _0x503eb7(0x5cf) }); } async function _0x47e032(_0x24eb95) { const _0x38c2ca = _0xe59ed1, _0xdff8f7 = _0x24eb95[_0x38c2ca(0x13b)][_0x38c2ca(0x27c)][0x0]; if (!_0xdff8f7) return; _0x2a565e(!![], _0x38c2ca(0x301)); const _0x2676a8 = new FileReader(); _0x2676a8[_0x38c2ca(0x8f7)] = async _0x15cde6 => { const _0x5653b9 = _0x38c2ca; if ('ysmbU' !== 'OcNLM') try { const _0x343b72 = JSON[_0x5653b9(0x6e7)](_0x15cde6['target'][_0x5653b9(0xb95)]); if (_0x343b72[_0x5653b9(0x76d)] !== _0x5653b9(0x1af)) throw new Error('这不是一张有效的Noir角色卡。'); const _0x2c1af2 = []; _0x343b72[_0x5653b9(0x79c)] && Array[_0x5653b9(0x9a1)](_0x343b72[_0x5653b9(0x79c)]) && _0x343b72[_0x5653b9(0x79c)][_0x5653b9(0x8cf)](_0x22a53c => { const _0x5e96d5 = _0x5653b9; if (_0x5e96d5(0x7ed) === _0x5e96d5(0x2a2)) { const _0x58c172 = { 'id': _0x5e96d5(0x73d) + _0x5ef072[_0x5e96d5(0x740)](), ..._0x1b1f28 }; _0x2514cd[_0x5e96d5(0x3ec)][_0x5e96d5(0x967)](_0x58c172), !_0x33aa7f[_0x5e96d5(0xa37)] && (_0x5935f0[_0x5e96d5(0xa37)] = _0x58c172['id']); } else { const _0x5a7f7d = _0x3cf4de[_0x5e96d5(0x79c)][_0x5e96d5(0x6f0)](_0x345ca9 => _0x345ca9[_0x5e96d5(0x382)] === _0x22a53c['name']); !_0x5a7f7d && (_0x5e96d5(0xa8c) !== _0x5e96d5(0x507) ? _0x3cf4de['worldBookCategories'][_0x5e96d5(0x967)]({ 'id': _0x22a53c['id'] || 'wbc_imported_' + Date['now'](), 'name': _0x22a53c[_0x5e96d5(0x382)] }) : _0x37fa28 = _0x1518e7[0x1]); } }); if (_0x343b72[_0x5653b9(0xb88)] && _0x343b72[_0x5653b9(0xb88)][_0x5653b9(0x30c)] > 0x0) for (const _0x319322 of _0x343b72['worldBooks']) { let _0x582f8f = _0x3cf4de[_0x5653b9(0xb88)][_0x5653b9(0x6f0)](_0x1f406f => _0x1f406f[_0x5653b9(0x382)] === _0x319322[_0x5653b9(0x382)] && (_0x1f406f['categoryId'] || _0x5653b9(0xa41)) === (_0x319322[_0x5653b9(0x2da)] || _0x5653b9(0xa41))); if (_0x582f8f) _0x2c1af2[_0x5653b9(0x967)](_0x582f8f['id']); else { const _0x3decb5 = { 'id': 'wb_' + Date[_0x5653b9(0x740)]() + '_' + Math['random'](), 'name': _0x319322[_0x5653b9(0x382)], 'content': _0x319322[_0x5653b9(0x313)], 'categoryId': _0x319322['categoryId'] || 'default' }; _0x3cf4de[_0x5653b9(0xb88)][_0x5653b9(0x967)](_0x3decb5), _0x2c1af2[_0x5653b9(0x967)](_0x3decb5['id']); } } const _0x33f3e0 = _0x5653b9(0xbc) + Date[_0x5653b9(0x740)](); let _0x6d31f = null; if (_0x343b72[_0x5653b9(0x3f1)]) { if (_0x5653b9(0x916) === _0x5653b9(0x916)) { const _0x3ef6cb = await _0x151f54(_0x343b72['avatar']); await _0x30635e(_0x5653b9(0x54f) + _0x33f3e0, _0x3ef6cb), _0x6d31f = await _0x50ddb8(_0x3ef6cb); } else _0x180bd6[_0x5653b9(0x5e3)]('加载立绘失败:', _0x1378a6), _0x34504a['src'] = ''; } if (_0x343b72[_0x5653b9(0xa1d)]) { if (_0x5653b9(0x490) === 'xYVdc') { _0x275467(_0x5653b9(0x50f)); return; } else for (const _0x4d15b3 in _0x343b72[_0x5653b9(0xa1d)]) { if (_0x5653b9(0xa9d) !== 'OoKCa') _0x29dca4(_0x5653b9(0xa32) + _0x58e522[_0x5653b9(0x99)]); else { const _0x2e88be = _0x343b72[_0x5653b9(0xa1d)][_0x4d15b3]; if (_0x2e88be) { if ('SKDNc' !== 'wlTQa') { const _0x49bcee = await _0x151f54(_0x2e88be); await _0x30635e(_0x5653b9(0xb51) + _0x4d15b3 + '_' + _0x33f3e0, _0x49bcee); } else _0x23a0ca += _0x5653b9(0xa77) + _0x219a4d[_0x5653b9(0x382)] + _0x5653b9(0x9a2); } } } } const _0x151ea1 = { 'id': _0x33f3e0, 'name': _0x343b72[_0x5653b9(0x382)], 'remark': _0x343b72[_0x5653b9(0x43f)] || '', 'persona': _0x343b72[_0x5653b9(0xa2e)], 'avatar': _0x6d31f, 'linkedWorldBookIds': _0x2c1af2, 'bubbleCss': _0x343b72[_0x5653b9(0x9d5)] || '' }; _0x3cf4de[_0x5653b9(0xad3)]['push'](_0x151ea1); const _0x29a537 = { 'id': _0x5653b9(0xb0c) + _0x33f3e0, 'type': 'private', 'participantIds': [_0x33f3e0], 'boundUserProfileId': _0x3cf4de[_0x5653b9(0xa37)] }; _0x3cf4de['chats'][_0x5653b9(0x967)](_0x29a537), _0x3a3bc1(), await _0x8d695a(), _0x5bf34b('“' + _0x151ea1[_0x5653b9(0x382)] + _0x5653b9(0x408)); } catch (_0x5b9e4d) { _0x5653b9(0x623) === 'qGXHp' ? (console[_0x5653b9(0x5e3)](_0x5653b9(0x451), _0x5b9e4d), _0x5bf34b(_0x5653b9(0x772) + _0x5b9e4d[_0x5653b9(0x99)])) : (_0x31b587(), _0x469272(![]), _0x534aa8[_0x5653b9(0x2c7)] = ![]); } finally { _0x5653b9(0x860) === _0x5653b9(0xaae) ? _0x2776cb[_0x5653b9(0x557)] = _0x22a3d4[_0x5653b9(0x9bd)] : (_0x2a565e(![]), _0x24eb95['target']['value'] = ''); } else _0x36e457[_0x5653b9(0x5f8)] = _0x1359cb[_0x5653b9(0x60a)](_0x4ac01f)[_0x5653b9(0x48a)](_0x1ab852 => _0x1ab852[_0x5653b9(0x93e)][_0x5653b9(0x5f8)][_0x5653b9(0x4ca)]())[_0x5653b9(0x863)]('、'); }, _0x2676a8['readAsText'](_0xdff8f7); } function _0x2ef5a5(_0x57fc4a, _0x38319e = []) { const _0x295eb4 = _0xe59ed1; if (_0x295eb4(0x3dc) === _0x295eb4(0x287)) { const _0x252252 = _0x5a54df(_0x2fe6fb[_0x295eb4(0xac6)]); _0x252252 && (delete _0x252252[_0x295eb4(0xa82)], _0x2659d0(), _0x5ce5ef(_0x252252['id'], _0x295eb4(0x9e5)), _0x464adc(_0x295eb4(0x641)), _0xd4084d(!![])); } else { const _0x2b7772 = document[_0x295eb4(0x7ef)](_0x57fc4a); _0x2b7772[_0x295eb4(0x252)] = ''; const _0x113cc3 = _0x3cf4de['worldBooks']['reduce']((_0x3c3c4a, _0x5e908c) => { const _0x43476f = _0x295eb4; if ('WwTez' !== _0x43476f(0x404)) _0x262c52 && _0x1cfc42(_0xe5b8e5); else { const _0x281715 = _0x5e908c[_0x43476f(0x2da)] || _0x43476f(0xa41); return !_0x3c3c4a[_0x281715] && (_0x3c3c4a[_0x281715] = []), _0x3c3c4a[_0x281715][_0x43476f(0x967)](_0x5e908c), _0x3c3c4a; } }, {}), _0x4b9fc1 = () => { const _0x1d96a4 = _0x295eb4; if (_0x1d96a4(0xb1f) !== 'EmDGD') _0x57fc4a === _0x1d96a4(0x2c3) ? _0x5b0a17() : _0x1d96a4(0x8b3) !== 'PkHNc' ? (_0x3609bf[_0x1d96a4(0x193)] = ![], _0x1d2d2[_0x1d96a4(0x5f8)] = '获取') : _0x2e4ab7(); else { const _0x2c3f8c = _0x583420[_0x1d96a4(0x7ef)]('world-book-list-container'); _0x2c3f8c[_0x1d96a4(0x252)] = ''; const _0x1b5bd8 = _0x519fd6[_0x1d96a4(0xb88)][_0x1d96a4(0x3f0)](_0x233fd2 => _0x233fd2[_0x1d96a4(0x2da)] === _0x42e64b || _0x3089c9 === 'default' && !_0x233fd2[_0x1d96a4(0x2da)]); if (_0x1b5bd8[_0x1d96a4(0x30c)] === 0x0) { _0x2c3f8c[_0x1d96a4(0x252)] = _0x1d96a4(0x1d0); return; } _0x1b5bd8[_0x1d96a4(0x8cf)](_0x238926 => { const _0x3395b6 = _0x1d96a4, _0x4ac306 = _0x3cd1ca[_0x3395b6(0xb60)]('div'); _0x4ac306[_0x3395b6(0x199)] = _0x3395b6(0x88d), _0x4ac306['dataset']['id'] = _0x238926['id'], _0x4ac306[_0x3395b6(0x252)] = _0x3395b6(0x626) + _0x238926[_0x3395b6(0x382)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x238926[_0x3395b6(0x313)][_0x3395b6(0xab5)](0x0, 0x64) + _0x3395b6(0x8fd), _0x4ac306[_0x3395b6(0x25c)]('click', () => _0x429d9f(_0x238926['id'])), _0x2c3f8c[_0x3395b6(0x8fe)](_0x4ac306); }); } }, _0x4b5249 = [..._0x3cf4de['worldBookCategories']]; if (_0x113cc3[_0x295eb4(0xa41)] && !_0x4b5249['find'](_0x39030d => _0x39030d['id'] === _0x295eb4(0xa41))) { if (_0x295eb4(0x8c2) !== 'nrATt') { const _0x44c55d = _0x36d3f7['createElement'](_0x295eb4(0xb0b)); _0x44c55d[_0x295eb4(0x199)] = _0x295eb4(0xc1), _0x44c55d[_0x295eb4(0x252)] = _0x295eb4(0x499) + _0x36e2cd[_0x295eb4(0xb68)]['sender'] + _0x295eb4(0x8ef) + _0x5495d0[_0x295eb4(0xb68)]['content'] + _0x295eb4(0xea), _0x1842ce[_0x295eb4(0x8fe)](_0x44c55d); } else { const _0x147da9 = _0x3cf4de[_0x295eb4(0x79c)][_0x295eb4(0xa9f)](_0x383c29 => _0x383c29['id'] === _0x295eb4(0xa41)); if (!_0x147da9) { if (_0x295eb4(0x64b) !== _0x295eb4(0x64b)) { const _0xb497bd = { ..._0x230174 }; return _0xb497bd[_0x295eb4(0x3f1)] && _0xb497bd[_0x295eb4(0x3f1)][_0x295eb4(0xb05)](_0x295eb4(0x6bf)) && delete _0xb497bd[_0x295eb4(0x3f1)], _0xb497bd; } else _0x4b5249[_0x295eb4(0x967)]({ 'id': _0x295eb4(0xa41), 'name': '默认分类' }); } } } _0x4b5249['forEach'](_0x3c8960 => { const _0x1e52e0 = _0x295eb4, _0x6ffd32 = _0x113cc3[_0x3c8960['id']] || []; if (_0x6ffd32[_0x1e52e0(0x30c)] === 0x0) return; const _0x5eee68 = document[_0x1e52e0(0xb60)](_0x1e52e0(0xb0b)); _0x5eee68[_0x1e52e0(0x199)] = 'wb-category-group'; const _0x5a54cb = _0x6ffd32[_0x1e52e0(0x52b)](_0x4d5e51 => _0x38319e[_0x1e52e0(0x5cc)](_0x4d5e51['id'])); _0x5eee68['innerHTML'] = _0x1e52e0(0x9f9) + _0x3c8960['id'] + '\x22\x20' + (_0x5a54cb ? _0x1e52e0(0x5f3) : '') + _0x1e52e0(0x2e0) + _0x3c8960[_0x1e52e0(0x382)] + _0x1e52e0(0x8e9); const _0x193dd0 = _0x5eee68[_0x1e52e0(0x5cb)](_0x1e52e0(0x86d)); _0x6ffd32['forEach'](_0x22180e => { const _0x3fbed3 = _0x1e52e0, _0x127781 = _0x38319e[_0x3fbed3(0x5cc)](_0x22180e['id']), _0x28f071 = document[_0x3fbed3(0xb60)]('label'); _0x28f071['className'] = 'wb-entry-item', _0x28f071[_0x3fbed3(0x252)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x22180e['id'] + '\x22\x20data-category-id=\x22' + _0x3c8960['id'] + '\x22\x20' + (_0x127781 ? _0x3fbed3(0x5f3) : '') + '>\x20' + _0x22180e[_0x3fbed3(0x382)], _0x193dd0['appendChild'](_0x28f071); }), _0x2b7772['appendChild'](_0x5eee68); }), _0x2b7772['querySelectorAll'](_0x295eb4(0x39a))['forEach'](_0x18f804 => { const _0x13d388 = _0x295eb4; _0x18f804['addEventListener'](_0x13d388(0x2c5), _0x2d7dc6 => { const _0x30f862 = _0x13d388; if (_0x2d7dc6[_0x30f862(0x13b)][_0x30f862(0x76d)] === _0x30f862(0x565)) return; const _0x45addd = _0x18f804[_0x30f862(0x4af)], _0x5c1042 = _0x18f804[_0x30f862(0x5cb)](_0x30f862(0x79d)), _0x161186 = _0x45addd[_0x30f862(0x4ad)][_0x30f862(0x182)](_0x30f862(0xa98)); _0x45addd[_0x30f862(0x4ad)][_0x30f862(0x6c7)]('expanded', !_0x161186), _0x5c1042[_0x30f862(0x4ad)][_0x30f862(0x6c7)]('expanded', !_0x161186); }); }), _0x2b7772['querySelectorAll'](_0x295eb4(0xb03))[_0x295eb4(0x8cf)](_0xbdabda => { const _0x59a17b = _0x295eb4; _0xbdabda[_0x59a17b(0x25c)](_0x59a17b(0x2c5), _0x17c752 => { const _0x5797f2 = _0x59a17b; if (_0x5797f2(0x68a) !== _0x5797f2(0x68a)) _0x5d1280 = _0x54493d(() => { const _0x35accd = _0x5797f2; if (_0x3b54e4[_0x35accd(0x76d)] === _0x35accd(0x9c0)) _0xc749d3[_0x35accd(0x3e2)](); _0x3eb2dc(_0x12bf10); }, 0x320); else { const _0x268562 = _0x17c752[_0x5797f2(0x13b)][_0x5797f2(0x361)]['categoryId'], _0x25d819 = _0x17c752[_0x5797f2(0x13b)][_0x5797f2(0x5f3)]; _0x2b7772[_0x5797f2(0x53f)](_0x5797f2(0x792) + _0x268562 + '\x22]')[_0x5797f2(0x8cf)](_0x3bf231 => { const _0x2e26d4 = _0x5797f2; _0x2e26d4(0x635) !== _0x2e26d4(0x635) ? _0x2e4a69 = _0x2e26d4(0x779) : _0x3bf231[_0x2e26d4(0x5f3)] = _0x25d819; }), _0x4b9fc1(); } }); }), _0x2b7772['querySelectorAll'](_0x295eb4(0x15f))[_0x295eb4(0x8cf)](_0xdf3780 => { const _0x407305 = _0x295eb4; _0x407305(0x6ca) !== _0x407305(0x305) ? _0xdf3780[_0x407305(0x25c)](_0x407305(0x9cc), _0x494ba0 => { const _0x4828fb = _0x407305; if ('STfFX' !== 'IgTQB') { const _0x23678d = _0x494ba0[_0x4828fb(0x13b)][_0x4828fb(0x361)][_0x4828fb(0x2da)], _0x209467 = _0x2b7772[_0x4828fb(0x53f)](_0x4828fb(0x792) + _0x23678d + '\x22]'), _0x1b9594 = _0x2b7772[_0x4828fb(0x53f)](_0x4828fb(0x792) + _0x23678d + _0x4828fb(0xac)), _0x1bb6a9 = _0x2b7772[_0x4828fb(0x5cb)]('.category-checkbox[data-category-id=\x22' + _0x23678d + '\x22]'); if (_0x1b9594[_0x4828fb(0x30c)] === 0x0) { if (_0x4828fb(0xb1a) !== _0x4828fb(0xb1a)) { const _0x21836c = _0x12bbbf[_0x4828fb(0x3ec)][_0x4828fb(0x6f0)](_0x4a04ef => _0x4a04ef['id'] === _0x2f5ecc); if (_0x21836c) _0x24856f[_0x4828fb(0x7a2)](_0x21836c, _0x1dc150); } else _0x1bb6a9[_0x4828fb(0x5f3)] = ![], _0x1bb6a9[_0x4828fb(0x695)] = ![]; } else _0x1b9594[_0x4828fb(0x30c)] === _0x209467[_0x4828fb(0x30c)] ? (_0x1bb6a9[_0x4828fb(0x5f3)] = !![], _0x1bb6a9[_0x4828fb(0x695)] = ![]) : _0x1bb6a9[_0x4828fb(0x695)] = !![]; _0x4b9fc1(); } else { const _0x4895df = _0x2e3151[_0x4828fb(0xb60)](_0x4828fb(0xb0b)); _0x4895df[_0x4828fb(0x199)] = _0x4828fb(0x605), _0x4895df[_0x4828fb(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x58b325[_0x4828fb(0x7da)] + _0x4828fb(0x70f) + _0x125323[_0x4828fb(0x382)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x4895df[_0x4828fb(0x25c)](_0x4828fb(0x2c5), () => _0xfcae62(_0x185365['id'], _0x369545['name'])), _0x3be6eb[_0x4828fb(0x3c7)] === _0x4828fb(0xac5) ? _0x5bbfea['appendChild'](_0x4895df) : _0x50af28[_0x4828fb(0x8fe)](_0x4895df); } }) : (_0x207208[_0x407305(0x76a)](_0x407305(0x581)), _0x54e75b[_0x407305(0x7fb)](_0x407305(0x51a), { 'keyPath': 'id' })); }), _0x2b7772[_0x295eb4(0x53f)](_0x295eb4(0xb03))['forEach'](_0x32dc4f => { const _0xea5da8 = _0x295eb4; if (_0xea5da8(0x544) === _0xea5da8(0x544)) { const _0x28e527 = _0x32dc4f[_0xea5da8(0x361)]['categoryId'], _0x32f7be = _0x2b7772[_0xea5da8(0x53f)](_0xea5da8(0x792) + _0x28e527 + '\x22]'), _0x255505 = _0x2b7772[_0xea5da8(0x53f)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x28e527 + _0xea5da8(0xac)); _0x255505[_0xea5da8(0x30c)] > 0x0 && _0x255505[_0xea5da8(0x30c)] < _0x32f7be['length'] && (_0x32dc4f[_0xea5da8(0x695)] = !![]); } else _0xb9782f['style']['backgroundImage'] = _0xea5da8(0x550) + _0x47ecbf + '\x27)'; }); } } async function _0x5e9e99() { const _0x25ff32 = _0xe59ed1; if (_0x25ff32(0x5a7) === _0x25ff32(0x5a7)) { const _0x340335 = [_0x25ff32(0x9e5), _0x25ff32(0x784), _0x25ff32(0xe3), 'sad', 'shy'], _0x5b005d = _0x3c4841['value'], _0x31b69c = document[_0x25ff32(0x7ef)](_0x25ff32(0x943))[_0x25ff32(0x35c)], _0x1e9c3c = _0x35a16b[_0x25ff32(0x27c)][0x0], _0x35676a = _0x25a365['files'][0x0], _0x1dbc1b = _0x176543[_0x25ff32(0x27c)][0x0], _0x3773c5 = document[_0x25ff32(0x53f)](_0x25ff32(0x8f2)), _0x347b3d = Array[_0x25ff32(0x60a)](_0x3773c5)[_0x25ff32(0x48a)](_0x4b3467 => _0x4b3467[_0x25ff32(0x35c)]), _0x401422 = { 'name': _0x44090a[_0x25ff32(0x35c)][_0x25ff32(0x4ca)](), 'remark': _0x2b0402[_0x25ff32(0x35c)][_0x25ff32(0x4ca)](), 'persona': _0x41ce20[_0x25ff32(0x35c)][_0x25ff32(0x4ca)](), 'linkedWorldBookIds': _0x347b3d, 'bubbleCss': document[_0x25ff32(0x7ef)](_0x25ff32(0x994))[_0x25ff32(0x35c)][_0x25ff32(0x4ca)](), 'avatarFrameUrl': document['getElementById'](_0x25ff32(0x6af))[_0x25ff32(0x35c)][_0x25ff32(0x4ca)](), 'userAvatarFrameUrl': document[_0x25ff32(0x7ef)]('user-avatar-frame-url-in-chat')[_0x25ff32(0x35c)][_0x25ff32(0x4ca)]() }; if (!_0x401422['name']) { if (_0x25ff32(0x2b0) !== _0x25ff32(0x2b0)) { const _0x2f944f = { 'type': _0x25ff32(0x35d), 'version': 0x1, 'timestamp': _0x472184[_0x25ff32(0x740)](), 'accountingData': _0x11727f[_0x25ff32(0xb4a)], 'accountingLedger': _0x25073f[_0x25ff32(0x3a3)] }, _0x2df80b = new _0x1a9728([_0x45f8a8[_0x25ff32(0x56e)](_0x2f944f, null, 0x2)], { 'type': 'application/json' }), _0x1ec01d = _0x4b35b0[_0x25ff32(0x9e4)](_0x2df80b), _0x5b5a0a = _0x3d6ace['createElement']('a'), _0x135d87 = new _0x2036ec(), _0x370be2 = _0x135d87['getFullYear']() + '-' + _0x6d088(_0x135d87[_0x25ff32(0x677)]() + 0x1)[_0x25ff32(0x5b5)](0x2, '0') + '-' + _0x42d1c0(_0x135d87['getDate']())['padStart'](0x2, '0'); _0x5b5a0a[_0x25ff32(0xb2b)] = _0x1ec01d, _0x5b5a0a[_0x25ff32(0x226)] = 'Noir_Accounting_Backup_' + _0x370be2 + _0x25ff32(0x515), _0xab8bd4[_0x25ff32(0x5e5)][_0x25ff32(0x8fe)](_0x5b5a0a), _0x5b5a0a[_0x25ff32(0x2c5)](), _0x5d29e2[_0x25ff32(0x5e5)]['removeChild'](_0x5b5a0a), _0x35b447['revokeObjectURL'](_0x1ec01d), _0x608ea(_0x25ff32(0xcb)); } else { _0x5bf34b(_0x25ff32(0x16d)); return; } } try { if (_0x25ff32(0x295) === _0x25ff32(0x82d)) { const _0x213f24 = _0x18bf03[_0x25ff32(0x7ef)]('todo-list'), _0x224f43 = _0x29be14[_0x25ff32(0x7ef)]('todo-date-title'); _0x213f24[_0x25ff32(0x252)] = ''; const _0x141ace = new _0x47b122(_0x5f1a50 + _0x25ff32(0x51d)); _0x224f43[_0x25ff32(0x5f8)] = _0x141ace['getMonth']() + 0x1 + '月' + _0x141ace['getDate']() + '日'; const _0x3b53af = _0x264a20[_0x25ff32(0x636)][_0x25ff32(0x3f0)](_0x4b3d9a => _0x4b3d9a[_0x25ff32(0x5bd)] === _0x4c066a); if (_0x3b53af[_0x25ff32(0x30c)] === 0x0) { _0x213f24[_0x25ff32(0x252)] = _0x25ff32(0x303); return; } _0x3b53af[_0x25ff32(0x8cf)](_0x542175 => { const _0x29272b = _0x25ff32, _0x14d0b9 = _0xecc16e[_0x29272b(0xb60)](_0x29272b(0xb0b)); _0x14d0b9[_0x29272b(0x199)] = _0x542175[_0x29272b(0x76d)] === _0x29272b(0x1c9) ? 'important-day-item' : _0x29272b(0x49e), _0x14d0b9[_0x29272b(0x5f8)] = _0x542175[_0x29272b(0x313)], _0x14d0b9[_0x29272b(0x361)]['id'] = _0x542175['id'], _0x213f24[_0x29272b(0x8fe)](_0x14d0b9); }); } else { let _0x29c6b7 = _0x5b005d; if (_0x5b005d) { if (_0x25ff32(0x6d2) === _0x25ff32(0x6d2)) { const _0x1d741d = _0x3cf4de[_0x25ff32(0xad3)][_0x25ff32(0x6f0)](_0x23f037 => _0x23f037['id'] === _0x5b005d); _0x1d741d && (_0x25ff32(0x2b4) !== _0x25ff32(0x2b7) ? Object[_0x25ff32(0x7a2)](_0x1d741d, _0x401422) : (_0x199b00(![]), _0x124e9d[_0x25ff32(0x2c7)] = ![])); } else _0xaf1af3[_0x25ff32(0x531)]('customStickers', _0x4fb7fa[_0x25ff32(0x56e)](_0x46f28c)), _0x25972c(_0x25ff32(0xa76)), _0x268c18(() => _0x4f7b10[_0x25ff32(0xa0d)](), 0x5dc); } else { const _0xd0a754 = _0x25ff32(0xbc) + Date[_0x25ff32(0x740)](); _0x29c6b7 = _0xd0a754; const _0x59a4e4 = { 'id': _0xd0a754, ..._0x401422 }; _0x59a4e4[_0x25ff32(0x3f1)] = _0x1e9c3c ? await _0x4ed984(_0x1e9c3c) : _0x574d9b, _0x3cf4de[_0x25ff32(0xad3)][_0x25ff32(0x967)](_0x59a4e4); const _0x629e7c = { 'id': _0x25ff32(0xb0c) + _0xd0a754, 'type': 'private', 'participantIds': [_0xd0a754], 'listenTogetherSession': null }; _0x3cf4de[_0x25ff32(0x27a)][_0x25ff32(0x967)](_0x629e7c); } const _0xb7b8a9 = _0x3cf4de['chats'][_0x25ff32(0x6f0)](_0x16b0ef => _0x16b0ef[_0x25ff32(0x76d)] === _0x25ff32(0x86c) && _0x16b0ef['participantIds'][_0x25ff32(0x5cc)](_0x29c6b7)); _0xb7b8a9 && (_0xb7b8a9[_0x25ff32(0x2c4)] = _0x31b69c); if (_0x1e9c3c) await _0x30635e(_0x25ff32(0x54f) + _0x29c6b7, _0x1e9c3c); if (_0x35676a) await _0x30635e('char_wallpaper_' + _0x29c6b7, _0x35676a); if (_0x1dbc1b) await _0x30635e(_0x25ff32(0xb87) + _0x29c6b7, _0x1dbc1b); for (const _0x53c491 of _0x340335) { const _0x3d1eee = document[_0x25ff32(0x7ef)]('char-edit-sprite-' + _0x53c491 + '-input')[_0x25ff32(0x27c)][0x0]; if (_0x3d1eee) await _0x30635e(_0x25ff32(0xb51) + _0x53c491 + '_' + _0x29c6b7, _0x3d1eee); } _0x3a3bc1(), _0x8d695a(), _0x5bf34b(_0x25ff32(0x18d)), _0x459e0a(_0x25ff32(0x2b9), _0x25ff32(0x1bc)); if (!_0x5b005d) { if (_0x25ff32(0x576) === _0x25ff32(0x576)) { const _0x3ebea1 = _0x25ff32(0xb0c) + _0x29c6b7; _0x14ae75(_0x3ebea1), _0xe6351c(!![]); } else { const _0x37fc35 = _0xd86747['value']; _0x17a8fe['documentElement'][_0x25ff32(0x937)]['setProperty'](_0x25ff32(0x36d), _0x37fc35 + '%'), _0x2921be[_0x25ff32(0x531)](_0x25ff32(0x128), _0x37fc35), _0x40a577(); } } } } catch (_0x17d561) { console[_0x25ff32(0x5e3)]('保存角色失败:', _0x17d561), _0x5bf34b(_0x25ff32(0xaad) + _0x17d561[_0x25ff32(0x99)]); } if (_0x1e9c3c || _0x35676a || _0x1dbc1b || _0x340335[_0x25ff32(0xa9f)](_0x103a68 => document[_0x25ff32(0x7ef)](_0x25ff32(0x7ca) + _0x103a68 + _0x25ff32(0xf2))[_0x25ff32(0x27c)][0x0])) _0x5bf34b(_0x25ff32(0x8d8)), setTimeout(() => location[_0x25ff32(0xa0d)](), 0x5dc); else { if ('gEDXs' === _0x25ff32(0x5fd)) { _0x459e0a(_0x25ff32(0x2b9), _0x25ff32(0x1bc)); if (!_0x5b005d) { const _0x2f5e18 = _0x25ff32(0x5cd) + Date[_0x25ff32(0x740)](); _0x14ae75(_0x2f5e18), _0xe6351c(!![]); } } else try { const _0x7ec5da = { 'type': 'NoirAccountingData', 'version': 0x1, 'timestamp': _0x42781c[_0x25ff32(0x740)](), 'accountingData': _0x1705ac[_0x25ff32(0xb4a)], 'accountingLedger': _0x20e55c[_0x25ff32(0x3a3)] }, _0x8a8e56 = new _0x49d123([_0x493dad[_0x25ff32(0x56e)](_0x7ec5da, null, 0x2)], { 'type': _0x25ff32(0x8dc) }), _0x3653ce = _0x55e2e1['createObjectURL'](_0x8a8e56), _0x3f49ea = _0x379766[_0x25ff32(0xb60)]('a'), _0x3af696 = new _0x5b36f7(), _0x395da1 = _0x3af696[_0x25ff32(0x96b)]() + '-' + _0x2257de(_0x3af696[_0x25ff32(0x677)]() + 0x1)['padStart'](0x2, '0') + '-' + _0x21b583(_0x3af696[_0x25ff32(0x5c3)]())[_0x25ff32(0x5b5)](0x2, '0'); _0x3f49ea[_0x25ff32(0xb2b)] = _0x3653ce, _0x3f49ea[_0x25ff32(0x226)] = _0x25ff32(0x496) + _0x395da1 + _0x25ff32(0x515), _0x1a6213[_0x25ff32(0x5e5)]['appendChild'](_0x3f49ea), _0x3f49ea[_0x25ff32(0x2c5)](), _0x4cf07c[_0x25ff32(0x5e5)][_0x25ff32(0x8dd)](_0x3f49ea), _0x27f184[_0x25ff32(0x3c9)](_0x3653ce), _0x26c146('账本已成功导出！'); } catch (_0x166a58) { _0x194959['error'](_0x25ff32(0x276), _0x166a58), _0x360624('导出失败了，哼:\x20' + _0x166a58[_0x25ff32(0x99)]); } } } else { _0x706240 = _0xae6c0d(); const _0x19f49c = _0x183bbc[_0x25ff32(0x7ef)](_0x25ff32(0x5ff))[_0x25ff32(0x5f8)]; _0x1f2813 = _0x19f49c || _0x25ff32(0x90b); } } function _0x21559a() { const _0x743885 = _0xe59ed1; _0x32e024['value'] = '', _0x4cec51[_0x743885(0x252)] = ''; if (_0x3cf4de['characters']['length'] < 0x2) { _0x5bf34b(_0x743885(0xa5f)); return; } _0x3cf4de['characters'][_0x743885(0x8cf)](_0x5598b3 => { const _0x3e4ed1 = _0x743885, _0x399a62 = document['createElement']('li'); _0x399a62[_0x3e4ed1(0x199)] = _0x3e4ed1(0x96e), _0x399a62['innerHTML'] = _0x3e4ed1(0x7cb) + _0x5598b3['id'] + _0x3e4ed1(0x57e) + _0x5598b3['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x5598b3[_0x3e4ed1(0x3f1)] || _0x574d9b) + _0x3e4ed1(0x173) + _0x5598b3['id'] + '\x22\x20class=\x22char-name\x22>' + _0x5598b3['name'] + _0x3e4ed1(0xeb), _0x4cec51[_0x3e4ed1(0x8fe)](_0x399a62); }), _0x459e0a('groupChatCreate', 'charSelect'); } function _0x757624() { const _0x203975 = _0xe59ed1, _0x2400b4 = _0x32e024[_0x203975(0x35c)][_0x203975(0x4ca)](); if (!_0x2400b4) { if ('RdkFn' === 'szZQt') { const _0x47af1f = _0x59592a[_0x203975(0x53a)]((_0x40dd4a - _0x405a7d) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x50dbab += _0x203975(0x4fd) + _0x47af1f + _0x203975(0xb3a); } else { _0x5bf34b(_0x203975(0xaea)); return; } } const _0x352bdc = Array[_0x203975(0x60a)](_0x4cec51[_0x203975(0x53f)](_0x203975(0x1d4)))['map'](_0x474c66 => _0x474c66[_0x203975(0x361)]['id']); if (_0x352bdc[_0x203975(0x30c)] < 0x2) { _0x5bf34b('群聊至少需要2名成员。'); return; } const _0x1c1f48 = { 'id': 'chat_group_' + Date[_0x203975(0x740)](), 'type': _0x203975(0x861), 'name': _0x2400b4, 'participantIds': _0x352bdc }; _0x3cf4de[_0x203975(0x27a)]['push'](_0x1c1f48), _0x3cf4de[_0x203975(0xa9a)] = _0x1c1f48['id'], _0x3a3bc1(), _0x8d695a(), _0x1897fd(), _0x5c8276(), _0x5bf34b('群聊“' + _0x2400b4 + '”已创建！'), _0x459e0a('chat', _0x203975(0x13c)); } _0x2f41ba[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x379995[_0xe59ed1(0x2c5)]()), _0x46012a[_0xe59ed1(0x25c)]('click', _0x441fcb), _0x379995[_0xe59ed1(0x25c)]('change', _0x2378ee), _0x33cc67['addEventListener']('click', _0x23e65a), _0xccd31[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x2dd123[_0xe59ed1(0x4ad)]['remove'](_0xe59ed1(0xfb))), _0x2cb903[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x2dd123[_0xe59ed1(0x4ad)][_0xe59ed1(0x713)](_0xe59ed1(0xfb))), _0x5eb0df[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x53520f = _0xe59ed1; _0x53520f(0xb8) !== 'ruKGR' ? (_0xc3dc6[_0x53520f(0x8f1)](), navigator[_0x53520f(0x510)][_0x53520f(0x936)](_0xc3dc6['value'])['then'](() => { const _0x30b969 = _0x53520f; _0x5bf34b(_0x30b969(0x753)); })[_0x53520f(0x7c0)](_0x481782 => { _0x5bf34b('复制失败了，哼。'); })) : _0x18f28d[_0x17b44f] = _0x2b7743[_0x53520f(0x6e7)](_0x6bd8d6); }), _0x5bf54f[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x1199c0), _0x2e7bda[_0xe59ed1(0x25c)]('click', _0x957eb6), _0x19bbe9[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x213385[_0xe59ed1(0x4ad)][_0xe59ed1(0x713)](_0xe59ed1(0xfb))), _0x2647ab[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x213385[_0xe59ed1(0x4ad)]['remove'](_0xe59ed1(0xfb))), _0x414363[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x25a365[_0xe59ed1(0x2c5)]()), _0x30d38b[_0xe59ed1(0x25c)]('click', () => _0x176543[_0xe59ed1(0x2c5)]()), _0x25a365[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), _0x2c782e => { const _0x195002 = _0xe59ed1, _0x36f0f2 = _0x2c782e[_0x195002(0x13b)]['files'][0x0]; if (!_0x36f0f2) return; const _0x26f2d5 = URL[_0x195002(0x9e4)](_0x36f0f2); _0x414363[_0x195002(0x937)]['backgroundImage'] = _0x195002(0x550) + _0x26f2d5 + '\x27)'; }), _0x176543[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), _0x33d0fb => { const _0x5b175b = _0xe59ed1, _0x3435f7 = _0x33d0fb['target'][_0x5b175b(0x27c)][0x0]; if (!_0x3435f7) return; const _0x260407 = URL[_0x5b175b(0x9e4)](_0x3435f7); _0x30d38b['style'][_0x5b175b(0x6aa)] = _0x5b175b(0x550) + _0x260407 + '\x27)'; }), _0x3aea47[_0xe59ed1(0x25c)]('click', () => _0x36e40d['click']()), _0x2a2a3e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0xc443b6 = _0xe59ed1; localStorage[_0xc443b6(0x65e)](_0xc443b6(0xa71)), _0x40dfdd(), _0x5bf34b('动态页背景已移除。'); }), _0x36e40d[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), async _0x5d37ac => { const _0x4cabce = _0xe59ed1; if (_0x4cabce(0x5d4) !== _0x4cabce(0xae2)) { const _0x2a7596 = _0x5d37ac[_0x4cabce(0x13b)]['files'][0x0]; if (!_0x2a7596) return; try { const _0x1b37e8 = await _0x4ed984(_0x2a7596); localStorage[_0x4cabce(0x531)](_0x4cabce(0xa71), _0x1b37e8), _0x40dfdd(), _0x5bf34b(_0x4cabce(0x2fa)); } catch (_0x2d14ad) { _0x5bf34b(_0x4cabce(0xa32) + _0x2d14ad[_0x4cabce(0x99)]); } } else _0x5e3983[_0x4cabce(0x103)] = []; }), document[_0xe59ed1(0x7ef)]('back-to-chat-from-group-settings')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a(_0xe59ed1(0x2b9), _0xe59ed1(0x1c4))), document['getElementById'](_0xe59ed1(0x138))['addEventListener'](_0xe59ed1(0x2c5), _0x35c784); const _0x22c8ca = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x1a8)), _0x45d8c9 = document[_0xe59ed1(0x7ef)]('group-avatar-input'); _0x22c8ca[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x45d8c9[_0xe59ed1(0x2c5)]()), _0x45d8c9['addEventListener'](_0xe59ed1(0x9cb), _0x32a677 => { const _0x33a984 = _0xe59ed1; if (_0x33a984(0x5a2) === _0x33a984(0x5a2)) { const _0x46a5b6 = _0x32a677[_0x33a984(0x13b)][_0x33a984(0x27c)][0x0]; if (!_0x46a5b6) return; const _0x3437c2 = URL[_0x33a984(0x9e4)](_0x46a5b6); _0x22c8ca[_0x33a984(0x557)] = _0x3437c2, _0x22c8ca[_0x33a984(0x8f7)] = () => { const _0xbf47b6 = _0x33a984; _0xbf47b6(0x9d2) === _0xbf47b6(0x214) ? _0x1522ae[_0xbf47b6(0x252)] = _0x1bf40d : URL['revokeObjectURL'](_0x3437c2); }; } else { _0x2a2034[_0x33a984(0x5f8)] = '选择聊天'; return; } }); const _0x450b81 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x270))['parentElement'], _0x3231bb = document[_0xe59ed1(0x7ef)]('group-bg-input'), _0x26223a = document['getElementById'](_0xe59ed1(0x270)); _0x450b81[_0xe59ed1(0x25c)]('click', () => _0x3231bb[_0xe59ed1(0x2c5)]()), _0x3231bb[_0xe59ed1(0x25c)]('change', _0x28ce46 => { const _0x20afab = _0xe59ed1, _0x308a82 = _0x28ce46[_0x20afab(0x13b)][_0x20afab(0x27c)][0x0]; if (!_0x308a82) return; const _0xf38da8 = URL[_0x20afab(0x9e4)](_0x308a82); document[_0x20afab(0x7ef)](_0x20afab(0x270))['style']['backgroundImage'] = _0x20afab(0x550) + _0xf38da8 + '\x27)'; }); const _0x57902d = document[_0xe59ed1(0x5cb)]('#group-settings-screen\x20.select-box'), _0xa42caf = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x561)); _0x57902d[_0xe59ed1(0x25c)]('click', _0x36d930 => { const _0x255178 = _0xe59ed1; _0x36d930['stopPropagation'](), _0xa42caf[_0x255178(0x4ad)][_0x255178(0x6c7)](_0x255178(0x494)), _0x57902d[_0x255178(0x4ad)][_0x255178(0x6c7)](_0x255178(0xa98)); }), _0xa42caf[_0xe59ed1(0x25c)]('change', _0x2e4ab7), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x348))['addEventListener'](_0xe59ed1(0x2c5), _0x2022b5), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x294))[_0xe59ed1(0x25c)]('click', async () => { const _0x4d252c = _0xe59ed1, _0x7b164c = _0x5234d7(); if (!_0x7b164c || _0x7b164c[_0x4d252c(0x76d)] !== 'group') return; const _0x2eb8d9 = await _0x56efd8(_0x4d252c(0x35b) + _0x7b164c['name'] + '”吗？此操作不可撤销。'); _0x2eb8d9 && (_0x4d252c(0x5da) === _0x4d252c(0x2dd) ? (_0x5504ae[_0x4d252c(0x886)](), _0x501dd0[_0x4d252c(0x4ad)][_0x4d252c(0x6c7)](_0x4d252c(0x494)), _0x5b6af3['classList']['toggle']('expanded')) : (_0x2d0d2b(_0x7b164c['id']), _0x5bf34b(_0x4d252c(0x2df)), _0x459e0a(_0x4d252c(0x2b9)), _0xe6351c(![]))); }); const _0x5c4deb = document['querySelector']('.custom-multiselect\x20.select-box'), _0x4b122d = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x2c3)); _0x5c4deb[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x5aaaf2 => { const _0x42150b = _0xe59ed1; if ('bHqBU' === _0x42150b(0xb01)) _0x5aaaf2[_0x42150b(0x886)](), _0x4b122d['classList'][_0x42150b(0x6c7)](_0x42150b(0x494)), _0x5c4deb['classList']['toggle'](_0x42150b(0xa98)); else { _0x340ae8 = _0x471d21(_0x3ea005); if (!_0xf06366) throw new _0x2833e2(_0x42150b(0x72d)); _0xb30089[_0x42150b(0x76a)]('兼容模式成功，已将\x20' + _0x33a49d['id'] + _0x42150b(0x7f4)); } }), _0x4b122d[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), _0x5b0a17), document[_0xe59ed1(0x25c)]('click', _0x437667 => { const _0x44641a = _0xe59ed1; if (!document[_0x44641a(0x5cb)](_0x44641a(0xe4))[_0x44641a(0x182)](_0x437667['target'])) { if ('gfnXX' === _0x44641a(0x858)) { if (_0xf9a599) _0x13b390(_0x5e7a2e); const _0x4d9215 = _0x3bdecd[_0x44641a(0x13b)]['closest'](_0x44641a(0x328)); if (!_0x4d9215) return; const _0x49ccd9 = _0x4d9215[_0x44641a(0x361)]['id']; if (!_0x49ccd9) return; const _0x8caa3d = () => { _0x3f9ed6 = _0x3fe09e(() => { const _0x4a2c39 = _0x2a1e; if (_0x4e6fca['type'] === _0x4a2c39(0x9c0)) _0x2e9e8f[_0x4a2c39(0x3e2)](); _0x5dba75(_0x49ccd9); }, 0x320); }, _0x47900a = () => { if (_0x5b6db7) _0x4f993e(_0x153e2f); }; _0x499f6e['addEventListener'](_0x44641a(0xa8e), _0x47900a, { 'once': !![] }), _0xaba99[_0x44641a(0x25c)](_0x44641a(0x299), _0x47900a, { 'once': !![] }), _0x2e006c[_0x44641a(0x25c)](_0x44641a(0x947), _0x47900a, { 'once': !![] }), _0x510bbf[_0x44641a(0x25c)]('touchmove', _0x47900a, { 'once': !![] }), _0x8caa3d(); } else _0x4b122d[_0x44641a(0x4ad)][_0x44641a(0x713)]('visible'), _0x5c4deb[_0x44641a(0x4ad)]['remove'](_0x44641a(0xa98)); } }), _0x4e44ad['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x45554c = _0xe59ed1; if (_0x45554c(0x734) === _0x45554c(0x734)) _0x11518b(), _0x459e0a(_0x45554c(0x8ac), 'home'); else { const _0x21a1be = _0x16aee7[_0x45554c(0x7ef)](_0x10a9d4); _0x21a1be[_0x45554c(0x252)] = '', _0x53dcfb['userProfiles'][_0x45554c(0x8cf)](_0x40f179 => { const _0x5cfcd0 = _0x45554c, _0x114ca6 = _0x2c516e[_0x5cfcd0(0xb60)](_0x5cfcd0(0x308)); _0x114ca6['value'] = _0x40f179['id'], _0x114ca6[_0x5cfcd0(0x5f8)] = _0x40f179[_0x5cfcd0(0x382)], _0x21a1be['appendChild'](_0x114ca6); }); } }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x8c5))['addEventListener'](_0xe59ed1(0x2c5), () => _0x459e0a(_0xe59ed1(0x1bf), 'worldBook')), document['getElementById'](_0xe59ed1(0x108))['addEventListener']('click', () => _0x18378f()), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x21a))[_0xe59ed1(0x25c)]('click', () => { const _0x28d6f0 = _0xe59ed1; if (_0x28d6f0(0x4b3) !== _0x28d6f0(0x4b3)) { const _0x2870c2 = _0x187379[_0x28d6f0(0x361)]['musicId'], _0x134a86 = _0x5a61f5[_0x28d6f0(0x5cb)](_0x28d6f0(0x321)); if (!_0x134a86) return; _0x4791a1 && _0x2870c2 === _0x37e455['id'] && _0x5d11d9 ? _0x134a86[_0x28d6f0(0x5f8)] = '❚❚' : _0x134a86[_0x28d6f0(0x5f8)] = '▶'; } else _0x11518b(), _0x459e0a(_0x28d6f0(0x8ac), _0x28d6f0(0xb6b)); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0xad8))[_0xe59ed1(0x25c)]('click', _0x526e3f), document['getElementById'](_0xe59ed1(0xb3))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x235d04), _0x4d7084[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a('wallpaper', _0xe59ed1(0x1bf))), _0x3c6d66[_0xe59ed1(0x25c)]('click', () => _0x459e0a(_0xe59ed1(0x1bf), _0xe59ed1(0x3ff))), _0x370c1f[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x220d67[_0xe59ed1(0x2c5)]()), _0x220d67[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), async _0x412fc7 => { const _0x223173 = _0xe59ed1; if ('XsHVG' === _0x223173(0x613)) _0xf8b14a[_0x223173(0x967)](_0x31c586); else { const _0x5c2fa9 = _0x412fc7[_0x223173(0x13b)][_0x223173(0x27c)][0x0]; if (!_0x5c2fa9) return; await _0x5de8ff(_0x5c2fa9); } }), _0x1997b7['addEventListener']('click', () => { const _0x461359 = _0xe59ed1; _0x461359(0x165) !== _0x461359(0xa65) ? (_0x8d695a(), _0x459e0a('chat', _0x461359(0x1bf))) : (_0x4dee46(_0x1373b3), _0x2a796f(_0x461359(0x5dc) + _0x2ff883['name'] + '”已删除。'), _0x2941ce(_0x461359(0x2b9), _0x461359(0x1bc)), _0x344ef8(![])); }), _0x29fe39['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x4783c4 = _0xe59ed1; _0x344db7(); const _0x50354d = (_0x3cf4de[_0x4783c4(0x71a)][_0x4783c4(0x1a0)] || '')[_0x4783c4(0x5cc)](_0x49bc2a); _0x958829['disabled'] = _0x50354d, _0x459e0a(_0x4783c4(0x10f), _0x4783c4(0x1bf)); }), _0x3218c8[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a('home', _0xe59ed1(0x10f))), _0x4d7cbb[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x264609 = _0xe59ed1; 'anpzq' === _0x264609(0x352) ? _0x540545[_0x264609(0x637)]({ 'behavior': _0x264609(0x33e), 'block': _0x264609(0x268) }) : (_0x3a2de2(), document[_0x264609(0x7ef)](_0x264609(0x1c6))[_0x264609(0x4ad)]['remove'](_0x264609(0xfb)), document[_0x264609(0x7ef)]('quote-preview-area')['style'][_0x264609(0x8a4)] = 'none', setTimeout(() => { const _0x5b9436 = _0x264609; if (_0x5b9436(0x418) !== _0x5b9436(0x99c)) _0x459e0a('home', _0x5b9436(0x2b9)); else return _0x1de598[_0x5b9436(0x3ec)]['find'](_0x4c6c55 => _0x4c6c55['id'] === _0x2a4a06); }, 0x14)); }), _0x2aa568[_0xe59ed1(0x25c)]('click', () => { const _0x1f3e1b = _0xe59ed1; if (_0x1f3e1b(0xdb) !== _0x1f3e1b(0xdb)) { const _0x597f9c = _0x1e9d37[_0x1f3e1b(0x7ef)](_0x1f3e1b(0xb13)); if (_0x597f9c) _0x597f9c[_0x1f3e1b(0x5f8)] = '▶'; } else _0x3a2de2(), document[_0x1f3e1b(0x7ef)]('chat-sticker-panel')[_0x1f3e1b(0x4ad)][_0x1f3e1b(0x713)](_0x1f3e1b(0xfb)), document['getElementById']('quote-preview-area')[_0x1f3e1b(0x937)][_0x1f3e1b(0x8a4)] = _0x1f3e1b(0xacf), setTimeout(() => { _0xe6351c(![]); }, 0x14); }), _0x331b0b[_0xe59ed1(0x25c)]('click', () => { const _0xb72ead = _0xe59ed1; _0x459e0a('chat', _0xb72ead(0x1bc)); }), _0x3ca99d[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x1102dd = _0xe59ed1; _0x1102dd(0x1cc) === _0x1102dd(0x1cc) ? _0x4912e8['classList'][_0x1102dd(0x44c)](_0x1102dd(0xfb)) : (_0x549c2c[_0x1102dd(0x3e2)](), _0x53da09()); }), _0x5e23a6[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x3449f3()), _0x572584[_0xe59ed1(0x25c)]('click', _0xe6ae60); function _0x298634(_0x16749e) { const _0x5e4561 = _0xe59ed1; if (_0x5e4561(0xb21) !== _0x5e4561(0x1f0)) { if (!_0x16749e || _0x16749e['type'] !== 'group') return; const _0x43c13e = _0x5e4561(0x38c); document[_0x5e4561(0x5e5)][_0x5e4561(0xb63)](_0x5e4561(0xa62), _0x43c13e); const _0x22ee69 = document[_0x5e4561(0x7ef)](_0x5e4561(0xb96)), _0x3b8cef = _0x22ee69[_0x5e4561(0x5cb)]('.choice-modal-backdrop'), _0xc6e91c = document[_0x5e4561(0x7ef)](_0x5e4561(0x864)), _0x39a0f2 = document[_0x5e4561(0x7ef)](_0x5e4561(0x97f)), _0xea02d1 = document[_0x5e4561(0x7ef)]('group-edit-name'), _0x4e1f94 = document[_0x5e4561(0x7ef)](_0x5e4561(0x944)), _0xe2871f = document['getElementById'](_0x5e4561(0xb6e)), _0x1ffaca = () => _0x22ee69[_0x5e4561(0x713)](); _0xc6e91c[_0x5e4561(0x25c)](_0x5e4561(0x2c5), async () => { const _0x1aec7e = _0x5e4561; _0x1ffaca(); const _0x3de685 = await _0x56efd8('确定要清空群聊\x22' + _0x16749e[_0x1aec7e(0x382)] + _0x1aec7e(0x872)); if (_0x3de685) { _0x16749e['id'] === _0x3cf4de[_0x1aec7e(0xa9a)] && (_0x3a2de2(), _0x3cf4de[_0x1aec7e(0x103)] = [], _0x200086()); try { localStorage[_0x1aec7e(0x65e)](_0x1aec7e(0x524) + _0x16749e['id']), _0x5bf34b(_0x1aec7e(0x262) + _0x16749e['name'] + '\x22\x20的聊天记录已清空。'); } catch (_0x5b0687) { 'rmpTP' !== _0x1aec7e(0x724) ? (console[_0x1aec7e(0x5e3)](_0x1aec7e(0x274) + _0x16749e['id'], _0x5b0687), _0x5bf34b(_0x1aec7e(0xb1d))) : _0x294db9['click'](); } } }), _0x39a0f2[_0x5e4561(0x25c)]('click', () => { const _0x3d501c = _0x5e4561; if ('SCvMC' !== _0x3d501c(0x68f)) { const _0x3d669e = _0x1b7ae7[_0x3d501c(0x35a)]('--'); _0x3d669e[_0x3d501c(0x30c)] === 0x2 && _0x3d669e[0x0]['trim']() && _0x3d669e[0x1]['trim']()[_0x3d501c(0xb05)](_0x3d501c(0x396)) ? _0x48d78a[_0x3d501c(0x967)]({ 'name': _0x3d669e[0x0][_0x3d501c(0x4ca)](), 'url': _0x3d669e[0x1][_0x3d501c(0x4ca)]() }) : _0x30bf10++; } else _0x1ffaca(), _0x5bf34b(_0x3d501c(0x456)); }), _0xea02d1['addEventListener'](_0x5e4561(0x2c5), async () => { const _0x39be5c = _0x5e4561; _0x1ffaca(); const _0x409505 = prompt(_0x39be5c(0x487), _0x16749e[_0x39be5c(0x382)]); _0x409505 && _0x409505[_0x39be5c(0x4ca)]() && _0x409505 !== _0x16749e[_0x39be5c(0x382)] && (_0x39be5c(0x356) !== 'QBLDl' ? _0x21f9ac(_0x45c5ec, _0x450150['target'][_0x39be5c(0x27c)][0x0]) : (_0x16749e['name'] = _0x409505['trim'](), _0x3a3bc1(), _0x8d695a(), _0x1897fd(), _0x5bf34b('群名称已更改为\x22' + _0x16749e[_0x39be5c(0x382)] + '\x22。'))); }), _0x4e1f94['addEventListener'](_0x5e4561(0x2c5), async () => { const _0x326ef3 = _0x5e4561; _0x1ffaca(); const _0x537204 = await _0x56efd8(_0x326ef3(0x322) + _0x16749e[_0x326ef3(0x382)] + _0x326ef3(0x64a)); _0x537204 && (_0x2d0d2b(_0x16749e['id']), _0x5bf34b(_0x326ef3(0x262) + _0x16749e[_0x326ef3(0x382)] + '\x22\x20已删除。'), _0xe6351c(![])); }), _0x3b8cef[_0x5e4561(0x25c)](_0x5e4561(0x2c5), _0x1ffaca), _0xe2871f[_0x5e4561(0x25c)](_0x5e4561(0x2c5), _0x1ffaca); } else return { 'type': 'html', 'content': _0x320c99[0x1][_0x5e4561(0x4ca)]() }; } _0x2f351d[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x33e31d = _0xe59ed1; if (_0x33e31d(0xee) !== 'cseRH') { if (!_0x1a567f[_0x33e31d(0x9a1)](_0x215c36)) return '<p>格式错误</p>'; if (_0x1c36c9[_0x33e31d(0x30c)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>'; return _0xd67361[_0x33e31d(0xb11)]((_0x402d20, _0x259504) => new _0x512b28(_0x259504[_0x33e31d(0x554)]) - new _0x3db798(_0x402d20[_0x33e31d(0x554)])), _0x477ed8['map'](_0x31243f => { const _0x3ecfcb = _0x33e31d, _0x135c71 = (_0x31243f[_0x3ecfcb(0x32f)] || [])['map'](_0x4e0689 => '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x4e0689 + _0x3ecfcb(0xb35))[_0x3ecfcb(0x863)](''); return '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x31243f[_0x3ecfcb(0x559)] || _0x3ecfcb(0x904)) + _0x3ecfcb(0xa61) + (_0x31243f[_0x3ecfcb(0x554)] || '') + _0x3ecfcb(0x5f5) + (_0x31243f[_0x3ecfcb(0x897)] || _0x3ecfcb(0x95a)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x135c71 + _0x3ecfcb(0x392) + (_0x31243f[_0x3ecfcb(0x789)] || 0x0)[_0x3ecfcb(0x196)](0x2) + _0x3ecfcb(0xad1); })[_0x33e31d(0x863)](''); } else { const _0x1a889c = _0x5234d7(); if (_0x1a889c && _0x1a889c[_0x33e31d(0x76d)] === _0x33e31d(0x86c)) _0xf22453(_0x1a889c[_0x33e31d(0x48f)][0x0]); else _0x1a889c && _0x1a889c['type'] === _0x33e31d(0x861) && _0x557213(_0x1a889c['id']); } }), _0x58cc75['addEventListener']('keydown', _0x184590 => { const _0x3ca960 = _0xe59ed1; _0x3ca960(0xa60) === _0x3ca960(0xb86) ? _0x300fcd['style'][_0x3ca960(0x586)] = '' : _0x184590['key'] === _0x3ca960(0x74f) && !_0x184590['shiftKey'] && (_0x184590['preventDefault'](), _0x3449f3()); }); const _0x1485bb = () => _0x4912e8['classList'][_0xe59ed1(0x713)]('show'); _0x5ae763[_0xe59ed1(0x25c)]('click', _0x1485bb), _0x2e51f8[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x1485bb), _0x21f626[_0xe59ed1(0x25c)]('click', () => { _0x1485bb(), _0xf22453(); }), _0x467607['addEventListener']('click', () => { _0x1485bb(), _0x21559a(); }), _0x5bc8d7[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x5352e4 = _0xe59ed1; if (_0x5352e4(0x838) !== _0x5352e4(0xda)) _0x459e0a(_0x5352e4(0x2b9), _0x5352e4(0x13c)), _0xe6351c(![]); else { _0x5c5c4c[_0x5352e4(0x5e3)](_0x5352e4(0xac0), _0x1025e2['id']); return; } }), _0x45b2c8[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x757624), _0x345d31[_0xe59ed1(0x25c)]('click', () => { const _0x2887c8 = _0xe59ed1; _0x455ac3[_0x2887c8(0x4ad)][_0x2887c8(0x6c7)](_0x2887c8(0xfb)), _0x455ac3['classList'][_0x2887c8(0x182)](_0x2887c8(0xfb)) && (_0x2887c8(0xb8d) === _0x2887c8(0xb7c) ? _0x22717e = _0x59e0fd[_0x2887c8(0x3ec)]['find'](_0x2eb223 => _0x2eb223['id'] === _0x534c12[_0x2887c8(0xa37)]) : _0x40cf72[_0x2887c8(0x340)] = _0x40cf72[_0x2887c8(0x60d)]); }), _0x3ff97e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x4a1e04['click']()); const _0x50ee3a = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x157)); _0x4a1e04[_0xe59ed1(0x25c)]('change', _0x4edf45), _0x50ee3a[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x24a3be), _0x5aa99e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x4273d1), _0x5223ca['addEventListener'](_0xe59ed1(0x2c5), _0x3f6828), _0x33801a[_0xe59ed1(0x25c)]('click', _0x5e9e99), _0x36f553[_0xe59ed1(0x25c)]('click', _0x2022b5), _0x543b4d[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), async () => { const _0x202834 = _0xe59ed1, _0x1afd30 = _0x3c4841['value']; if (!_0x1afd30) return; const _0x26d816 = _0xd97907(_0x1afd30); if (!_0x26d816) return; const _0x13dcc1 = await _0x56efd8(_0x202834(0xa90) + _0x26d816[_0x202834(0x382)] + _0x202834(0xa5c)); _0x13dcc1 && (_0x202834(0x53e) !== _0x202834(0x53e) ? _0x3adc72 += _0x202834(0x811) + _0x25aebe['title'] + _0x202834(0x8b9) + _0x3ccbfe['content'][_0x202834(0xb53)](/\n/g, '\x20') + _0x202834(0xb0f) : (_0x37a30a(_0x1afd30), _0x5bf34b('角色“' + _0x26d816[_0x202834(0x382)] + '”已删除。'), _0x459e0a('chat', _0x202834(0x1bc)), _0xe6351c(![]))); }), _0x180ec3['addEventListener']('input', () => { const _0xf1f29 = _0xe59ed1; if (_0xf1f29(0x374) === _0xf1f29(0x720)) _0x751c01[_0xf1f29(0x937)]['display'] = _0xf1f29(0x540), _0x2e3441['style'][_0xf1f29(0x8a4)] = 'none', _0x399308(() => { const _0x5af271 = _0xf1f29, _0x4eaa54 = _0x1ef5f4[_0x5af271(0x5cb)](_0x5af271(0x69e)); _0x4eaa54 ? _0x4eaa54[_0x5af271(0x637)]({ 'behavior': _0x5af271(0x33e), 'block': _0x5af271(0x268) }) : _0x3fb22a['scrollTop'] = _0x22beea[_0x5af271(0x60d)]; }, 0x32); else { const _0x270089 = _0x180ec3[_0xf1f29(0x35c)][_0xf1f29(0x4ca)]()['includes'](_0x49bc2a); _0x958829[_0xf1f29(0x193)] = _0x270089; } }); async function _0x319fde() { const _0x1984b6 = _0xe59ed1; if (_0x1984b6(0x6a7) === 'IzvAz') { const _0x397a8e = _0x7fb1b0[_0x1984b6(0x6bc)](_0x135789); if (_0x397a8e) _0xd9b906[_0x1984b6(0x4d3)][_0x397a8e] = _0x32f666['getItem'](_0x397a8e); } else { const _0x57a962 = _0x180ec3[_0x1984b6(0x35c)][_0x1984b6(0x4ca)](), _0x5db049 = _0x46947e[_0x1984b6(0x35c)][_0x1984b6(0x4ca)](); if (!_0x57a962 || !_0x5db049) { if (_0x1984b6(0x588) !== _0x1984b6(0x588)) _0x46b656[_0x1984b6(0x5e3)](_0x1984b6(0x5aa)); else { _0x5bf34b(_0x1984b6(0x3cc)); return; } } const _0x195b68 = _0x57a962['replace'](/\/+$/, ''), _0x5a7bcd = _0x195b68 + _0x1984b6(0x6f5); _0x958829['disabled'] = !![], _0x958829[_0x1984b6(0x5f8)] = '获取中…', _0x5819f6[_0x1984b6(0x4ad)][_0x1984b6(0x713)](_0x1984b6(0xfb)); try { const _0x4075a8 = await fetch(_0x5a7bcd, { 'headers': { 'Authorization': 'Bearer\x20' + _0x1ef07d(_0x5db049) } }); if (!_0x4075a8['ok']) throw new Error(_0x1984b6(0x869) + _0x4075a8[_0x1984b6(0x897)]); const _0x6958ff = await _0x4075a8[_0x1984b6(0x6dc)](), _0x2604c6 = (_0x6958ff['data'] || _0x6958ff)[_0x1984b6(0x48a)](_0x42a337 => _0x42a337['id'])[_0x1984b6(0xb11)](); if (_0x2604c6[_0x1984b6(0x30c)] > 0x0) 'VbBOU' === _0x1984b6(0x1be) ? (_0x2c362a = '0x' + _0x32b9de[0x1] + _0x30a41d[0x2], _0x44bb00 = '0x' + _0x2d2fab[0x3] + _0x549a30[0x4], _0x1aaf5a = '0x' + _0x44af54[0x5] + _0x18d3ce[0x6]) : (_0x5819f6['innerHTML'] = '', _0x2604c6['forEach'](_0xfd2d1a => { const _0x424ee1 = _0x1984b6; if (_0x424ee1(0x935) !== _0x424ee1(0x935)) _0x5116b9[_0x424ee1(0x2c5)](); else { const _0x2c66c7 = document[_0x424ee1(0xb60)](_0x424ee1(0xb0b)); _0x2c66c7[_0x424ee1(0x5f8)] = _0xfd2d1a, _0x2c66c7[_0x424ee1(0x25c)](_0x424ee1(0x2c5), () => { const _0x4cbba2 = _0x424ee1; _0x92a97a[_0x4cbba2(0x35c)] = _0xfd2d1a, _0x5819f6[_0x4cbba2(0x4ad)][_0x4cbba2(0x713)](_0x4cbba2(0xfb)); }), _0x5819f6[_0x424ee1(0x8fe)](_0x2c66c7); } }), _0x5819f6['classList'][_0x1984b6(0x44c)](_0x1984b6(0xfb)), _0x5bf34b(_0x1984b6(0x6c0) + _0x2604c6[_0x1984b6(0x30c)] + _0x1984b6(0x7ae))); else { if (_0x1984b6(0x7db) === _0x1984b6(0x973)) { const _0x44a8ce = _0x45a562[_0x1984b6(0xb60)]('div'); _0x44a8ce['id'] = _0x1984b6(0x211), _0x44a8ce['textContent'] = _0x1984b6(0x12c), _0x5f2c68[_0x1984b6(0x7a2)](_0x44a8ce[_0x1984b6(0x937)], { 'position': 'absolute', 'top': _0x1984b6(0x762), 'right': _0x1984b6(0x856), 'fontSize': _0x1984b6(0x332), 'lineHeight': '1.4', 'color': 'var(--text-color-light)', 'opacity': '0.5', 'cursor': _0x1984b6(0xa86), 'zIndex': '1', 'transition': _0x1984b6(0x269), 'whiteSpace': _0x1984b6(0x589), 'textAlign': _0x1984b6(0x6c5) }), _0x44a8ce[_0x1984b6(0x8bb)] = () => { const _0x273375 = _0x1984b6; _0x44a8ce[_0x273375(0x937)]['opacity'] = '1'; }, _0x44a8ce[_0x1984b6(0x11c)] = () => { const _0xdca64a = _0x1984b6; _0x44a8ce[_0xdca64a(0x937)][_0xdca64a(0x52e)] = _0xdca64a(0x8ed); }, _0x44a8ce['addEventListener']('click', () => { const _0x3567c0 = _0x1984b6; _0x591e7b[_0x3567c0(0x91d)](_0x3567c0(0x219), _0x3567c0(0x83a)); }), _0x3edfa5[_0x1984b6(0x937)][_0x1984b6(0x843)] = _0x1984b6(0x320), _0x110dc2[_0x1984b6(0x66a)](_0x44a8ce); } else _0x5bf34b(_0x1984b6(0x2bb)); } } catch (_0x26760f) { _0x5bf34b(_0x1984b6(0x14d) + _0x26760f[_0x1984b6(0x99)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); } finally { if (_0x1984b6(0x582) !== _0x1984b6(0x5e4)) _0x958829[_0x1984b6(0x193)] = ![], _0x958829['textContent'] = '获取'; else { const _0x230fba = _0x5d3cba['value']; let _0x3a98b7 = _0x230fba[_0x1984b6(0xb53)](/\.bubble\.sent/g, _0x1984b6(0x2a6))[_0x1984b6(0xb53)](/\.bubble\.received/g, _0x1984b6(0x878)); _0x4cb9bd['innerHTML'] = _0x3a98b7; } } } } _0x958829[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x3f435f => { const _0x202439 = _0xe59ed1; if (_0x202439(0x271) !== _0x202439(0x462)) _0x3f435f[_0x202439(0x886)](), _0x319fde(); else { const _0x4b368e = _0x2c4c3c[_0x202439(0x3a3)][_0x4cdf81]; _0x4b368e && _0x4b368e[_0x202439(0x4da)] && _0x563e81[_0x202439(0xb4a)]['push'](..._0x4b368e[_0x202439(0x4da)]), delete _0x4ab0fc['accountingLedger'][_0x1f42df], _0x23b709(), _0x476dc5(); } }), document[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x12fad6 => { const _0x2499dd = _0xe59ed1; !_0x5819f6['contains'](_0x12fad6['target']) && _0x12fad6['target'] !== _0x92a97a && _0x12fad6[_0x2499dd(0x13b)] !== _0x958829 && ('qRfsE' === 'Wbbmr' ? (_0x197220 *= _0x255859 / _0x376830, _0x46024a = _0x2ded19) : _0x5819f6[_0x2499dd(0x4ad)][_0x2499dd(0x713)](_0x2499dd(0xfb))); }); async function _0x4ed984(_0xd1172c) { return await _0x250c4e(_0xd1172c, 0x190, 0.85); } _0x32d4b2[_0xe59ed1(0x25c)]('click', () => _0x4e9035[_0xe59ed1(0x2c5)]()), _0x4e9035[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), async _0x380e14 => { const _0x59074d = _0xe59ed1, _0x30a13a = _0x380e14[_0x59074d(0x13b)][_0x59074d(0x27c)][0x0]; if (!_0x30a13a) return; try { if (_0x59074d(0x69c) === _0x59074d(0x69c)) { const _0x1f4198 = await _0x4ed984(_0x30a13a), _0xc3d2d7 = document[_0x59074d(0x7ef)](_0x59074d(0xf6)); _0xc3d2d7[_0x59074d(0x937)][_0x59074d(0x6aa)] = 'url(\x27' + _0x1f4198 + '\x27)', _0xc3d2d7['dataset'][_0x59074d(0x9a6)] = _0x1f4198; } else _0x4545cd('字体保存失败了，哼:\x20' + _0x5a3063[_0x59074d(0x99)]); } catch (_0x250d1f) { _0x5bf34b(_0x59074d(0xa32) + _0x250d1f[_0x59074d(0x99)]); } }), _0x40d88e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x35a16b[_0xe59ed1(0x2c5)]()), _0x35a16b[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), async _0x59b37a => { const _0xc2ca9f = _0xe59ed1, _0x30b2a6 = _0x59b37a['target']['files'][0x0]; if (!_0x30b2a6) return; try { if (_0xc2ca9f(0x447) !== 'JMXYa') _0x40d88e['src'] = await _0x4ed984(_0x30b2a6); else { _0x3e5295['value'] = ''; return; } } catch (_0x3a2555) { _0x5bf34b(_0xc2ca9f(0xa32) + _0x3a2555['message']); } }); function _0x1b3d88() { const _0x3dc9e5 = _0xe59ed1; if (_0x3dc9e5(0x2ce) === _0x3dc9e5(0x91b)) return _0x17bb2e(_0xb1cc0d)[_0x3dc9e5(0x683)](_0x3a24d8 => _0x3a24d8[_0x3dc9e5(0x664)]()); else { const _0x8b8cf4 = document[_0x3dc9e5(0x7ef)](_0x3dc9e5(0x1c6)); _0x8b8cf4['innerHTML'] = '', _0x4ada36 = ![]; const _0x24582f = document[_0x3dc9e5(0xb60)]('div'); _0x24582f['id'] = _0x3dc9e5(0x6f1), _0x24582f[_0x3dc9e5(0x252)] = _0x3dc9e5(0x460), _0x8b8cf4[_0x3dc9e5(0x8fe)](_0x24582f); const _0xc850aa = document['getElementById'](_0x3dc9e5(0x489)), _0x4c741e = document[_0x3dc9e5(0x7ef)](_0x3dc9e5(0x2d2)), _0x5a2752 = document[_0x3dc9e5(0xb60)]('div'); _0x5a2752[_0x3dc9e5(0x937)]['display'] = _0x3dc9e5(0xb19), _0x5a2752[_0x3dc9e5(0x937)][_0x3dc9e5(0x40c)] = 'repeat(auto-fill,\x20minmax(60px,\x201fr))', _0x5a2752['style'][_0x3dc9e5(0x7ea)] = _0x3dc9e5(0x86f), _0x5a2752[_0x3dc9e5(0x937)]['padding'] = _0x3dc9e5(0x86f), _0x5a2752[_0x3dc9e5(0x937)][_0x3dc9e5(0x424)] = '180px', _0x5a2752[_0x3dc9e5(0x937)][_0x3dc9e5(0x2a9)] = _0x3dc9e5(0x33e), _0x8b8cf4[_0x3dc9e5(0x8fe)](_0x5a2752); const _0x4fcf80 = _0x23323a(); _0x4fcf80[_0x3dc9e5(0x8cf)](_0x182806 => { const _0x271461 = _0x3dc9e5, _0x5eed88 = document[_0x271461(0xb60)]('div'); _0x5eed88['className'] = _0x271461(0xa55), _0x5eed88[_0x271461(0x361)]['stickerName'] = _0x182806[_0x271461(0x382)]; const _0x5ae072 = document[_0x271461(0xb60)]('img'); _0x5ae072[_0x271461(0x557)] = _0x182806[_0x271461(0x98a)], _0x5ae072[_0x271461(0x996)] = 'lazy', _0x5ae072['title'] = _0x182806[_0x271461(0x382)], _0x5ae072[_0x271461(0x199)] = _0x271461(0xa54), _0x5eed88[_0x271461(0x8fe)](_0x5ae072), _0x5a2752[_0x271461(0x8fe)](_0x5eed88), _0x5eed88[_0x271461(0x25c)]('click', () => { const _0x509f32 = _0x271461; if ('yTUiN' === 'WTwjH') _0x4cfa77['textContent'] = '❚❚'; else { if (_0x4ada36) { _0x5eed88['classList'][_0x509f32(0x6c7)](_0x509f32(0x244)); const _0xed3e4f = _0x5a2752[_0x509f32(0x5cb)](_0x509f32(0xa16)); _0x4c741e[_0x509f32(0x4ad)]['toggle'](_0x509f32(0x5d1), !!_0xed3e4f); } else { if ('SgnLw' !== _0x509f32(0xb41)) _0x3c6d33(_0x182806); else { _0x3343d8['warn'](_0x509f32(0x49f)); const _0x1bc268 = _0x2d14ba[_0x509f32(0x48f)][_0x509f32(0x48a)](_0x59aa43)[_0x509f32(0x3f0)](_0x328a0e); if (!_0x1bc268[_0x509f32(0x30c)]) return; let _0x2c28a9 = 0x0; for (const _0x14165f of _0x1bc268) { _0x5a4990(_0x14165f, { 'force': !![], 'delayMs': _0x2c28a9 }), _0x2c28a9 += 0x1f4; } } } } }); }), _0xc850aa[_0x3dc9e5(0x25c)](_0x3dc9e5(0x2c5), () => { const _0x3df12f = _0x3dc9e5; _0x4ada36 = !_0x4ada36, _0x8b8cf4[_0x3df12f(0x4ad)]['toggle'](_0x3df12f(0x685), _0x4ada36), _0xc850aa['textContent'] = _0x4ada36 ? '完成' : '管理', _0x4c741e['style'][_0x3df12f(0x8a4)] = _0x4ada36 ? _0x3df12f(0x540) : _0x3df12f(0xacf), !_0x4ada36 && ('QYdnV' === _0x3df12f(0x3a4) ? _0x4e09ee[_0x3df12f(0x252)] = _0x3df12f(0x519) + _0x290bfb + _0x3df12f(0x250) : (_0x5a2752['querySelectorAll'](_0x3df12f(0xa16))[_0x3df12f(0x8cf)](_0x16b214 => _0x16b214[_0x3df12f(0x4ad)][_0x3df12f(0x713)](_0x3df12f(0x244))), _0x4c741e['classList'][_0x3df12f(0x713)](_0x3df12f(0x5d1)))); }), _0x4c741e[_0x3dc9e5(0x25c)](_0x3dc9e5(0x2c5), async () => { const _0x562e5f = _0x3dc9e5, _0x26af74 = _0x5a2752[_0x562e5f(0x53f)](_0x562e5f(0xa16)); if (_0x26af74[_0x562e5f(0x30c)] === 0x0) return; const _0x211b87 = await _0x56efd8(_0x562e5f(0x934) + _0x26af74[_0x562e5f(0x30c)] + _0x562e5f(0x314)); if (_0x211b87) { if (_0x562e5f(0xa48) === _0x562e5f(0xa48)) { const _0x196f91 = JSON[_0x562e5f(0x6e7)](localStorage[_0x562e5f(0x6b6)](_0x562e5f(0x4ee)) || '[]'); _0x26af74['forEach'](_0xffb38b => { const _0x319822 = _0x562e5f, _0x2c8dac = _0xffb38b[_0x319822(0x361)][_0x319822(0xaa1)]; !_0x196f91[_0x319822(0x5cc)](_0x2c8dac) && ('YZiZH' === _0x319822(0xabb) ? _0x196f91[_0x319822(0x967)](_0x2c8dac) : _0x50efe3[_0x319822(0xaca)] = null); }), localStorage[_0x562e5f(0x531)](_0x562e5f(0x4ee), JSON[_0x562e5f(0x56e)](_0x196f91)), _0x4ada36 = ![], _0x1b3d88(), _0x5bf34b(_0x562e5f(0x190)); } else { _0x15b4a2(_0x562e5f(0x992)); return; } } }), _0x4c741e[_0x3dc9e5(0x937)][_0x3dc9e5(0x8a4)] = 'none'; const _0x286c92 = document[_0x3dc9e5(0x7ef)](_0x3dc9e5(0x9a0)), _0x562060 = new MutationObserver(() => { const _0x295db2 = _0x3dc9e5; if ('XNQyc' !== 'TJJDR') { const _0x3c72c9 = _0x8b8cf4[_0x295db2(0x4ad)][_0x295db2(0x182)]('show'); _0x24582f[_0x295db2(0x4ad)][_0x295db2(0x6c7)](_0x295db2(0x494), _0x3c72c9), !_0x3c72c9 && (_0x4ada36 && _0xc850aa[_0x295db2(0x2c5)]()); } else { _0x4642dd(_0x295db2(0x397)); return; } }); _0x562060[_0x3dc9e5(0x21d)](_0x8b8cf4, { 'attributes': !![], 'attributeFilter': [_0x3dc9e5(0x4be)] }); } } function _0x23323a() { const _0x5a2a01 = _0xe59ed1; if ('ItPLo' === _0x5a2a01(0x386)) { const _0x409063 = JSON['parse'](localStorage[_0x5a2a01(0x6b6)](_0x5a2a01(0x4ee)) || '[]'); if (_0x409063[_0x5a2a01(0x30c)] === 0x0) { if (_0x5a2a01(0x968) === _0x5a2a01(0x968)) return _0x35cf89; else { _0xd46fb2[_0x5a2a01(0x252)] = _0x5a2a01(0x6a3); return; } } return _0x35cf89[_0x5a2a01(0x3f0)](_0x57fd3e => !_0x409063[_0x5a2a01(0x5cc)](_0x57fd3e[_0x5a2a01(0x382)])); } else { const _0x1e7bfa = _0x30ae76[_0x5a2a01(0x9b1)](_0x5a2a01(0x1f8), 'readwrite'), _0x49a849 = _0x1e7bfa[_0x5a2a01(0x326)](_0x5a2a01(0x1f8)), _0x4a6701 = _0x49a849[_0x5a2a01(0x336)]({ 'id': _0x498b4f, 'blob': _0x2d2c9c }); _0x4a6701['onsuccess'] = () => _0x557f24(_0x4a6701['result']), _0x4a6701[_0x5a2a01(0x1bb)] = () => _0x3e7bc1(_0x4a6701[_0x5a2a01(0x5e3)]); } } async function _0x10324c(_0x433817) { const _0x4ff568 = _0xe59ed1, _0x47dacc = await _0x56efd8(_0x4ff568(0x94f)); if (!_0x47dacc) return; const _0x384816 = _0x3cf4de[_0x4ff568(0x636)]['findIndex'](_0xb1fd45 => _0xb1fd45['id'] === _0x433817); _0x384816 > -0x1 && (_0x4ff568(0x497) === _0x4ff568(0x497) ? (_0x3cf4de[_0x4ff568(0x636)][_0x4ff568(0x673)](_0x384816, 0x1), _0x3a3bc1(), _0x290126(), _0x4e9656(), _0x3b168b(), _0x5bf34b(_0x4ff568(0x7e7))) : _0x32471c = _0xcf4d72[_0x4ff568(0x382)]); } let _0x3209e0 = null; function _0x343ba2(_0x138a91) { const _0x222331 = _0xe59ed1; if (_0x222331(0xab8) !== _0x222331(0x714)) { if (_0x3209e0) clearTimeout(_0x3209e0); const _0x3aa0a1 = _0x138a91[_0x222331(0x13b)][_0x222331(0xb09)](_0x222331(0x328)); if (!_0x3aa0a1) return; const _0x395868 = _0x3aa0a1[_0x222331(0x361)]['id']; if (!_0x395868) return; const _0x271ea8 = () => { const _0x589364 = _0x222331; if (_0x589364(0xb04) === _0x589364(0x958)) { let _0x1a500d = _0x47e613[_0x589364(0xb88)][_0x589364(0x6f0)](_0x190d1c => _0x190d1c[_0x589364(0x382)] === _0x3a4704['name'] && (_0x190d1c['categoryId'] || 'default') === (_0x4acb49['categoryId'] || _0x589364(0xa41))); if (_0x1a500d) _0x3a9e0f[_0x589364(0x967)](_0x1a500d['id']); else { const _0x4a0f5b = { 'id': 'wb_' + _0x195d13[_0x589364(0x740)]() + '_' + _0x43f1a5[_0x589364(0x758)](), 'name': _0x18ec45['name'], 'content': _0x806d41[_0x589364(0x313)], 'categoryId': _0x538eeb['categoryId'] || 'default' }; _0x4814dd[_0x589364(0xb88)][_0x589364(0x967)](_0x4a0f5b), _0x22cf2c[_0x589364(0x967)](_0x4a0f5b['id']); } } else _0x3209e0 = setTimeout(() => { const _0x500be7 = _0x589364; if (_0x500be7(0x949) !== _0x500be7(0x959)) { if (_0x138a91[_0x500be7(0x76d)] === _0x500be7(0x9c0)) _0x138a91[_0x500be7(0x3e2)](); _0x10324c(_0x395868); } else { const _0x46e189 = _0x3f3314[_0x500be7(0x60d)]; _0x4d7226[_0x500be7(0x340)] = _0x4c141e + (_0x46e189 - _0x3d855f); } }, 0x320); }, _0x1d01c9 = () => { if (_0x3209e0) clearTimeout(_0x3209e0); }; document[_0x222331(0x25c)]('mouseup', _0x1d01c9, { 'once': !![] }), document[_0x222331(0x25c)](_0x222331(0x299), _0x1d01c9, { 'once': !![] }), document[_0x222331(0x25c)](_0x222331(0x947), _0x1d01c9, { 'once': !![] }), document['addEventListener'](_0x222331(0x300), _0x1d01c9, { 'once': !![] }), _0x271ea8(); } else _0x164962[_0x222331(0x5e3)](_0x222331(0x18c) + _0x28028b['id'] + '\x20的图片失败:', _0x3fce3a), _0x4364a6[_0x222331(0x557)] = _0x1edac2[_0x222331(0x3f1)] || _0x4bf3eb; } function _0x16d5be(_0xaf0566) { const _0x31f2f3 = _0xe59ed1; if (_0x31f2f3(0x9ae) !== 'zudaj') { const _0x20a35c = _0x3cf4de[_0x31f2f3(0x27a)][_0x31f2f3(0x6f0)](_0x30a41 => _0x30a41[_0x31f2f3(0x48f)][_0x31f2f3(0x5cc)](_0xaf0566)); if (!_0x20a35c) return ''; const _0x302db6 = _0x1af79f(_0x20a35c['id']), _0x123a87 = _0x3cf4de[_0x31f2f3(0x636)][_0x31f2f3(0x3f0)](_0x17eacc => _0x17eacc[_0x31f2f3(0x82c)] === _0x302db6['id'] || !_0x17eacc[_0x31f2f3(0x82c)]); if (_0x123a87[_0x31f2f3(0x30c)] === 0x0) return ''; const _0x6b8603 = _0x123a87[_0x31f2f3(0x48a)](_0x45cafe => { const _0x3f57f5 = _0x31f2f3; if ('AMTye' !== _0x3f57f5(0x22f)) { const _0x449541 = _0x45cafe[_0x3f57f5(0x76d)] === 'important' ? _0x3f57f5(0xec) : '待办'; return _0x3f57f5(0xa52) + _0x449541 + ']\x20' + _0x45cafe[_0x3f57f5(0x5bd)] + ':\x20' + _0x45cafe[_0x3f57f5(0x313)]; } else _0x25e2a3[_0x3f57f5(0x4ad)]['add'](_0x3f57f5(0xfb)); })[_0x31f2f3(0x863)]('\x0a'); return _0x31f2f3(0x690) + _0x302db6['name'] + _0x31f2f3(0x660) + _0x6b8603; } else _0x374e63[_0x31f2f3(0x4ad)][_0x31f2f3(0x6c7)](_0x31f2f3(0xfb)), _0x5a4b17['classList'][_0x31f2f3(0x182)](_0x31f2f3(0xfb)) && (_0x46a580[_0x31f2f3(0x340)] = _0x3a3094[_0x31f2f3(0x60d)]); } let _0x293389 = { 'currentDate': new Date(), 'selectedDate': _0xa61727() }; function _0x5bafe8() { const _0x3b655a = _0xe59ed1; document[_0x3b655a(0x7ef)](_0x3b655a(0x1d3))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => { const _0x19532e = _0x3b655a; _0x19532e(0x5a4) === _0x19532e(0xa7c) ? _0x2ad8d8[_0x19532e(0x58d)](_0x133027, _0x19914f[_0x19532e(0x537)]) : (_0x290126(), _0x459e0a(_0x19532e(0xac1), _0x19532e(0x1bf))); }), document[_0x3b655a(0x7ef)](_0x3b655a(0xb7f))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => _0x459e0a(_0x3b655a(0x1bf), _0x3b655a(0xac1))), document[_0x3b655a(0x7ef)](_0x3b655a(0x57f))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => { const _0x9d3f0e = _0x3b655a; if (_0x9d3f0e(0x19c) === 'VNYow') _0x293389[_0x9d3f0e(0x66d)][_0x9d3f0e(0x2ae)](_0x293389[_0x9d3f0e(0x66d)][_0x9d3f0e(0x677)]() - 0x1), _0x290126(); else { const _0x5ce867 = _0x167bf6(_0x12e92f[_0x9d3f0e(0x669)]())['padStart'](0x2, '0'), _0x42c51a = _0x434db0(_0x1ea6e4['getMinutes']())['padStart'](0x2, '0'); _0x36d80a[_0x9d3f0e(0x5f8)] = _0x5ce867 + ':' + _0x42c51a; const _0x3f920c = _0x5d1bd9[_0x9d3f0e(0x677)]() + 0x1, _0x303188 = _0x47c122[_0x9d3f0e(0x5c3)](), _0x1bb0d9 = [_0x9d3f0e(0x59b), _0x9d3f0e(0xb6a), '星期二', _0x9d3f0e(0x21f), _0x9d3f0e(0x24c), _0x9d3f0e(0x656), '星期六'][_0x29f8fe[_0x9d3f0e(0xa72)]()]; _0x457bd9[_0x9d3f0e(0x5f8)] = _0x3f920c + '月' + _0x303188 + '日\x20' + _0x1bb0d9; } }), document[_0x3b655a(0x7ef)](_0x3b655a(0xb1))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => { const _0x41fee3 = _0x3b655a; if (_0x41fee3(0x63c) === _0x41fee3(0x48c)) { _0x3b0151[_0x41fee3(0x252)] = _0x41fee3(0xb98); return; } else _0x293389[_0x41fee3(0x66d)][_0x41fee3(0x2ae)](_0x293389[_0x41fee3(0x66d)][_0x41fee3(0x677)]() + 0x1), _0x290126(); }), document['getElementById'](_0x3b655a(0xa5b))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => { const _0x27fdca = _0x3b655a; if (_0x27fdca(0xa8a) !== _0x27fdca(0x7d3)) _0x293389[_0x27fdca(0x66d)] = new Date(), _0x293389['selectedDate'] = _0xa61727(), _0x290126(); else { const _0x22a171 = _0x1aaca3['includes'](_0x13ba9d['id']), _0x2fc9dd = _0xad13e['createElement'](_0x27fdca(0xb6f)); _0x2fc9dd[_0x27fdca(0x199)] = _0x27fdca(0x272), _0x2fc9dd[_0x27fdca(0x252)] = _0x27fdca(0x693) + _0x2881be['id'] + _0x27fdca(0xa7e) + _0x40a1e8['id'] + '\x22\x20' + (_0x22a171 ? 'checked' : '') + '>\x20' + _0x1ac5fa[_0x27fdca(0x382)], _0x543446['appendChild'](_0x2fc9dd); } }), document[_0x3b655a(0x7ef)]('add-event-fab')[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => { _0x5e4ae9(_0x293389['selectedDate']); }), document['getElementById'](_0x3b655a(0xa75))[_0x3b655a(0x25c)](_0x3b655a(0x2c5), _0x508ba4), document[_0x3b655a(0x7ef)](_0x3b655a(0x3f5))[_0x3b655a(0x25c)]('click', () => document[_0x3b655a(0x7ef)]('add-event-modal')['classList'][_0x3b655a(0x713)](_0x3b655a(0xfb))), document[_0x3b655a(0x7ef)]('add-event-backdrop')[_0x3b655a(0x25c)](_0x3b655a(0x2c5), () => document[_0x3b655a(0x7ef)](_0x3b655a(0x634))['classList'][_0x3b655a(0x713)](_0x3b655a(0xfb))); const _0x22baa2 = document[_0x3b655a(0x7ef)]('todo-list'); _0x22baa2[_0x3b655a(0x25c)]('mousedown', _0x343ba2), _0x22baa2['addEventListener'](_0x3b655a(0x9c0), _0x343ba2, { 'passive': ![] }); } function _0x290126() { const _0xb0eaa2 = _0xe59ed1, _0x3e2ba4 = _0x293389[_0xb0eaa2(0x66d)][_0xb0eaa2(0x96b)](), _0x2d44ab = _0x293389[_0xb0eaa2(0x66d)][_0xb0eaa2(0x677)](); document[_0xb0eaa2(0x7ef)]('calendar-header-title')[_0xb0eaa2(0x5f8)] = _0x3e2ba4 + '年\x20' + (_0x2d44ab + 0x1) + '月', _0x537593(_0x3e2ba4, _0x2d44ab), _0x1ccaef(_0x293389[_0xb0eaa2(0x5b1)]); } function _0x3b168b() { const _0x49a352 = _0xe59ed1, _0x9a957f = document['getElementById'](_0x49a352(0xaed)); if (!_0x9a957f) return; const _0x134017 = _0xa61727(), _0x3f4573 = _0x3cf4de[_0x49a352(0x636)][_0x49a352(0x3f0)](_0x12404b => _0x12404b[_0x49a352(0x5bd)] === _0x134017 && _0x12404b[_0x49a352(0x76d)] === _0x49a352(0x1da)); _0x9a957f[_0x49a352(0x252)] = ''; if (_0x3f4573[_0x49a352(0x30c)] > 0x0) _0x3f4573[_0x49a352(0x8cf)](_0x19d269 => { const _0x24c28d = _0x49a352; if (_0x24c28d(0x67d) !== _0x24c28d(0xa93)) { const _0x4e8a60 = document[_0x24c28d(0xb60)](_0x24c28d(0xb0b)); _0x4e8a60[_0x24c28d(0x199)] = _0x24c28d(0x363), _0x4e8a60[_0x24c28d(0x5f8)] = _0x19d269[_0x24c28d(0x313)], _0x9a957f[_0x24c28d(0x8fe)](_0x4e8a60); } else { const _0x31e0a4 = _0x2a4ad9[_0x24c28d(0x13b)][_0x24c28d(0x361)][_0x24c28d(0x2da)], _0x55f275 = _0x4eb648[_0x24c28d(0x13b)][_0x24c28d(0x5f3)]; _0x26b5b0[_0x24c28d(0x53f)](_0x24c28d(0x792) + _0x31e0a4 + '\x22]')['forEach'](_0x4ee48d => { _0x4ee48d['checked'] = _0x55f275; }), _0x4f30b3(); } }); else { if (_0x49a352(0x8d0) !== _0x49a352(0x8d0)) { _0x27a0e3 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x2077ce in _0x45436a) { _0x96e0cc[_0x2077ce][_0x49a352(0x4ad)][_0x49a352(0x713)]('filled'), _0x364f9e[_0x2077ce][_0x49a352(0x35c)] = ''; } _0x40c1c9[_0x49a352(0x17c)][_0x49a352(0x5cb)](_0x49a352(0x9a))[_0x49a352(0x5f8)] = _0x49a352(0x1e9), _0x238e7e[_0x49a352(0xa99)]['querySelector'](_0x49a352(0x9a))['textContent'] = _0x49a352(0x521), _0x2bf66e[_0x49a352(0x718)]['querySelector'](_0x49a352(0x9a))[_0x49a352(0x5f8)] = _0x49a352(0x763), _0x496f14[_0x49a352(0x602)][_0x49a352(0x5cb)](_0x49a352(0x9a))['textContent'] = _0x49a352(0x74a), _0x526461(); } else _0x9a957f['innerHTML'] = '<span\x20style=\x22opacity:\x200.6;\x22>无</span>'; } } function _0x537593(_0x220b5d, _0x1a1e9b) { const _0x2558dd = _0xe59ed1; if (_0x2558dd(0x120) !== _0x2558dd(0x834)) { const _0x11586b = document[_0x2558dd(0x7ef)](_0x2558dd(0x755)); _0x11586b[_0x2558dd(0x252)] = ''; const _0x41d3db = new Date(_0x220b5d, _0x1a1e9b, 0x1)[_0x2558dd(0xa72)](), _0x51715f = new Date(_0x220b5d, _0x1a1e9b + 0x1, 0x0)['getDate'](), _0x177af8 = _0xa61727(); for (let _0x17a314 = 0x0; _0x17a314 < _0x41d3db; _0x17a314++) { _0x11586b[_0x2558dd(0x8fe)](document[_0x2558dd(0xb60)](_0x2558dd(0xb0b))); } for (let _0x3f5a18 = 0x1; _0x3f5a18 <= _0x51715f; _0x3f5a18++) { if (_0x2558dd(0x50e) === 'fJvvz') { const _0x50c4c7 = _0x6f9336[_0x2558dd(0xb60)](_0x2558dd(0xb0b)); _0x50c4c7[_0x2558dd(0x5f8)] = _0x4ed8eb, _0x50c4c7[_0x2558dd(0x25c)](_0x2558dd(0x2c5), () => { const _0x181cbd = _0x2558dd; _0x3594a6[_0x181cbd(0x35c)] = _0x26c563, _0x17dc31[_0x181cbd(0x4ad)]['remove']('show'); }), _0x3814c0['appendChild'](_0x50c4c7); } else { const _0x7aa7a2 = document['createElement'](_0x2558dd(0xb0b)); _0x7aa7a2[_0x2558dd(0x199)] = _0x2558dd(0xd9); const _0x700ac0 = _0x220b5d + '-' + String(_0x1a1e9b + 0x1)[_0x2558dd(0x5b5)](0x2, '0') + '-' + String(_0x3f5a18)[_0x2558dd(0x5b5)](0x2, '0'); if (_0x700ac0 === _0x177af8) _0x7aa7a2[_0x2558dd(0x4ad)][_0x2558dd(0x44c)](_0x2558dd(0x526)); if (_0x700ac0 === _0x293389[_0x2558dd(0x5b1)]) _0x7aa7a2[_0x2558dd(0x4ad)][_0x2558dd(0x44c)](_0x2558dd(0x989)); const _0x5d5a7c = document[_0x2558dd(0xb60)](_0x2558dd(0x92b)); _0x5d5a7c[_0x2558dd(0x199)] = _0x2558dd(0x535), _0x5d5a7c[_0x2558dd(0x5f8)] = _0x3f5a18, _0x7aa7a2[_0x2558dd(0x8fe)](_0x5d5a7c); const _0x11c927 = _0x3cf4de['calendarEvents']['filter'](_0x418c17 => _0x418c17[_0x2558dd(0x5bd)] === _0x700ac0); if (_0x11c927[_0x2558dd(0x30c)] > 0x0) { if (_0x2558dd(0x164) !== 'hGRrM') { const _0x9e9a4a = document['createElement'](_0x2558dd(0xb0b)); _0x9e9a4a[_0x2558dd(0x199)] = _0x2558dd(0x1d1), _0x7aa7a2[_0x2558dd(0x8fe)](_0x9e9a4a); } else _0x44e54d[_0x2558dd(0x7a2)](_0x493452, { 'songName': _0x233a0f, 'artist': _0x18e192, 'coverUrl': null, 'playableUrl': null }); } _0x7aa7a2[_0x2558dd(0x25c)](_0x2558dd(0x2c5), () => { const _0x168d28 = _0x2558dd; 'OnNcS' !== _0x168d28(0x2d8) ? (_0x515e78[_0x168d28(0x557)] = _0x168d28(0xa11), _0x39c84f(_0x222e58[_0x168d28(0x6b9)])[_0x168d28(0x683)](_0x20ff97 => { const _0x18e8a6 = _0x168d28; if (_0x20ff97) _0x53e7a3[_0x18e8a6(0x557)] = _0x1b8401['createObjectURL'](_0x20ff97); else _0x100d06[_0x18e8a6(0x5d5)] = _0x18e8a6(0x5b9); })[_0x168d28(0x7c0)](() => _0xb5b298['alt'] = _0x168d28(0x5b9))) : (_0x293389[_0x168d28(0x5b1)] = _0x700ac0, _0x290126()); }), _0x11586b[_0x2558dd(0x8fe)](_0x7aa7a2); } } } else _0x1ae439(_0x58fc7e[_0x2558dd(0x6b3)])['then'](_0x455b1a => { const _0x4b0990 = _0x2558dd; if (_0x455b1a) _0x2f38e1[_0x4b0990(0x557)] = _0x6db767[_0x4b0990(0x9e4)](_0x455b1a); }); } function _0x1ccaef(_0x20d45c) { const _0x2792db = _0xe59ed1, _0x28d0e6 = document[_0x2792db(0x7ef)](_0x2792db(0xc2)), _0x5d20bb = document['getElementById'](_0x2792db(0x484)); _0x28d0e6[_0x2792db(0x252)] = ''; const _0x594e63 = new Date(_0x20d45c + _0x2792db(0x51d)); _0x5d20bb[_0x2792db(0x5f8)] = _0x594e63[_0x2792db(0x677)]() + 0x1 + '月' + _0x594e63[_0x2792db(0x5c3)]() + '日'; const _0x2ac775 = _0x3cf4de[_0x2792db(0x636)][_0x2792db(0x3f0)](_0x391d1f => _0x391d1f[_0x2792db(0x5bd)] === _0x20d45c); if (_0x2ac775[_0x2792db(0x30c)] === 0x0) { if (_0x2792db(0x710) === 'ouayE') return { 'role': _0x2792db(0x32c), 'content': [{ 'type': _0x2792db(0x993), 'text': _0x18c200[_0x2792db(0x313)] || '\x20' }, { 'type': _0x2792db(0xb77), 'image_url': { 'url': _0x3fb592[_0x2792db(0x9bd)], 'detail': _0x2792db(0x2d1) } }] }; else { _0x28d0e6[_0x2792db(0x252)] = _0x2792db(0x303); return; } } _0x2ac775[_0x2792db(0x8cf)](_0x5c6ab2 => { const _0x11ecbb = _0x2792db; if (_0x11ecbb(0x4e9) === 'LRgoH') { const _0x31269a = document['createElement'](_0x11ecbb(0xb0b)); _0x31269a[_0x11ecbb(0x199)] = _0x5c6ab2[_0x11ecbb(0x76d)] === 'important' ? _0x11ecbb(0x3bb) : _0x11ecbb(0x49e), _0x31269a[_0x11ecbb(0x5f8)] = _0x5c6ab2[_0x11ecbb(0x313)], _0x31269a[_0x11ecbb(0x361)]['id'] = _0x5c6ab2['id'], _0x28d0e6['appendChild'](_0x31269a); } else { _0xcb7345(_0x11ecbb(0x652) + _0x468730 + '\x20个旧头像。应用即将刷新。'), _0x242590(() => _0x1a5882['reload'](), 0x5dc); return; } }); } function _0x5e4ae9(_0x366a3c) { const _0x103606 = _0xe59ed1; if (_0x103606(0x5c2) !== _0x103606(0x8ba)) document[_0x103606(0x7ef)](_0x103606(0xa3c))[_0x103606(0x5f8)] = '为\x20' + _0x366a3c + '\x20添加...', document[_0x103606(0x7ef)](_0x103606(0x195))['value'] = '', document[_0x103606(0x7ef)](_0x103606(0x162))[_0x103606(0x5f3)] = !![], document[_0x103606(0x7ef)](_0x103606(0x634))[_0x103606(0x4ad)]['add'](_0x103606(0xfb)), document[_0x103606(0x7ef)]('event-content-input')[_0x103606(0x4c1)](); else { const _0x3f42eb = new _0x19c7db(); _0x3f42eb[_0x103606(0x46c)] = () => _0x4d71e1(_0x3f42eb['result']), _0x3f42eb['onerror'] = _0x1799a3, _0x3f42eb[_0x103606(0x186)](_0xd4e83b); } } function _0x508ba4() { const _0x29c83b = _0xe59ed1; if (_0x29c83b(0x486) !== 'mWVRj') { const _0x355bc3 = document[_0x29c83b(0x7ef)](_0x29c83b(0x195))['value'][_0x29c83b(0x4ca)](), _0x5a501d = document['querySelector']('input[name=\x22event-type\x22]:checked')[_0x29c83b(0x35c)]; if (!_0x355bc3) { _0x5bf34b('内容不能为空！'); return; } const _0x5b960f = _0x3cf4de['userProfiles']['find'](_0x5c73ac => _0x5c73ac['id'] === _0x3cf4de['activeUserProfileId']); if (!_0x5b960f) { if (_0x29c83b(0x708) === _0x29c83b(0x533)) { const _0x3cba33 = _0x551e8e['transaction'](_0x19041c, _0x29c83b(0x571)), _0x1c0351 = _0x3cba33[_0x29c83b(0x326)](_0x49e603), _0x5a9686 = _0x1c0351[_0x29c83b(0x5ef)](); _0x5a9686[_0x29c83b(0x78f)] = () => _0xce59ba(_0x5a9686['result']), _0x5a9686['onerror'] = () => _0x524526(_0x5a9686[_0x29c83b(0x5e3)]); } else { _0x5bf34b(_0x29c83b(0x837)); return; } } _0x3cf4de[_0x29c83b(0x636)][_0x29c83b(0x967)]({ 'id': _0x29c83b(0x93c) + Date['now'](), 'date': _0x293389[_0x29c83b(0x5b1)], 'type': _0x5a501d, 'content': _0x355bc3, 'userId': _0x5b960f['id'] }), _0x3a3bc1(), _0x290126(), _0x4e9656(), _0x3b168b(), document[_0x29c83b(0x7ef)](_0x29c83b(0x634))['classList'][_0x29c83b(0x713)](_0x29c83b(0xfb)); } else { const _0x4fd1a0 = _0x265e79[_0x29c83b(0x5cb)](_0x29c83b(0x4ed) + _0x2384e3 + _0x29c83b(0xada) + _0x29d738 + '\x20.app-icon-img')?.[_0x29c83b(0x252)]; _0x4fd1a0 && (_0x41a91f[_0x29c83b(0x252)] = _0x4fd1a0); } } function _0x4e9656() { const _0x4508d9 = _0xe59ed1, _0x583997 = document[_0x4508d9(0x7ef)](_0x4508d9(0xb27)), _0x3df720 = document[_0x4508d9(0x7ef)](_0x4508d9(0x7a9)), _0x3ffcf9 = new Date(); _0x3ffcf9['setHours'](0x0, 0x0, 0x0, 0x0); const _0x4ce146 = _0x3cf4de['calendarEvents'][_0x4508d9(0x3f0)](_0x3cfb24 => _0x3cfb24[_0x4508d9(0x76d)] === 'important' && new Date(_0x3cfb24['date'] + _0x4508d9(0x51d)) >= _0x3ffcf9)['sort']((_0x89a348, _0x38eb91) => new Date(_0x89a348[_0x4508d9(0x5bd)]) - new Date(_0x38eb91[_0x4508d9(0x5bd)])); if (_0x4ce146[_0x4508d9(0x30c)] > 0x0) { if ('YdVwi' === _0x4508d9(0x57c)) { const _0x1b9101 = _0x4ce146[0x0], _0x2fe4f9 = new Date(_0x1b9101[_0x4508d9(0x5bd)] + _0x4508d9(0x51d)), _0x15d7f9 = _0x2fe4f9 - _0x3ffcf9, _0x3a2959 = Math[_0x4508d9(0x849)](_0x15d7f9 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x583997[_0x4508d9(0x5f8)] = _0x4508d9(0xa36) + _0x1b9101[_0x4508d9(0x313)] + '」', _0x3df720[_0x4508d9(0x252)] = _0x4508d9(0xb0a) + _0x3a2959 + _0x4508d9(0x910); } else _0x2b4db1[_0x4508d9(0x531)](_0xc3d46e, _0x31955b[_0x4508d9(0x4d3)][_0x172fd0]); } else _0x583997['textContent'] = _0x4508d9(0x5a8), _0x3df720[_0x4508d9(0x252)] = _0x4508d9(0x67b); } function _0x47b9ef() { const _0x2e6d69 = _0xe59ed1, _0x21a3de = document[_0x2e6d69(0x7ef)](_0x2e6d69(0x9ef)); _0x21a3de[_0x2e6d69(0x252)] = ''; if (_0x3cf4de[_0x2e6d69(0x3ec)]['length'] === 0x0) { if (_0x2e6d69(0xb3e) === _0x2e6d69(0xb3e)) { _0x21a3de[_0x2e6d69(0x252)] = _0x2e6d69(0x152); return; } else { const _0x1b5f93 = _0x4d355a[_0x2e6d69(0x7ef)](_0x2e6d69(0x431)); _0xb6bfbc[_0x2e6d69(0x17c)] && _0x270e64[_0x2e6d69(0x718)] ? _0x1b5f93[_0x2e6d69(0x193)] = ![] : _0x1b5f93[_0x2e6d69(0x193)] = !![]; } } _0x3cf4de[_0x2e6d69(0x3ec)]['forEach'](_0x2de354 => { const _0x406c5c = _0x2e6d69; if (_0x406c5c(0x243) !== 'CZyNp') { const _0x377ef7 = _0x118d29[_0x406c5c(0x1b8)] === _0x406c5c(0x32c) ? _0x2aa7fd[_0x406c5c(0x382)] : _0x259f13(_0x20a7bc['author'])[_0x406c5c(0x382)]; return _0x406c5c(0xa52) + new _0x162774(_0x44f433[_0x406c5c(0x554)])[_0x406c5c(0xa15)]() + ']\x20' + _0x377ef7 + _0x406c5c(0x49c) + _0x2ad87b['content']; } else { const _0x107b73 = document[_0x406c5c(0xb60)](_0x406c5c(0xb0b)); _0x107b73['className'] = _0x406c5c(0x88d), _0x107b73[_0x406c5c(0x361)]['id'] = _0x2de354['id']; const _0x5bc1b6 = _0x2de354['id'] === _0x3cf4de[_0x406c5c(0xa37)] ? _0x406c5c(0x932) : ''; _0x107b73[_0x406c5c(0x252)] = _0x406c5c(0x81c) + (_0x2de354['avatar'] || _0x2e585f) + _0x406c5c(0x335) + _0x2de354[_0x406c5c(0x382)] + _0x5bc1b6 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x2de354['persona'][_0x406c5c(0xab5)](0x0, 0x64) + _0x406c5c(0x8fd), _0x107b73[_0x406c5c(0x25c)](_0x406c5c(0x2c5), () => _0x12318d(_0x2de354['id'])), _0x21a3de[_0x406c5c(0x8fe)](_0x107b73); } }); } function _0x12318d(_0x139881 = null) { const _0x24960f = _0xe59ed1; _0x459e0a(_0x24960f(0x2b5), _0x24960f(0x6be)); const _0x26557a = document[_0x24960f(0x7ef)](_0x24960f(0x9b0)), _0x317e64 = document['getElementById'](_0x24960f(0xf6)); _0x317e64[_0x24960f(0x937)]['backgroundImage'] = '', delete _0x317e64[_0x24960f(0x361)][_0x24960f(0x9a6)]; if (_0x139881) { const _0x48afce = _0x3cf4de[_0x24960f(0x3ec)][_0x24960f(0x6f0)](_0xbc273e => _0xbc273e['id'] === _0x139881); if (!_0x48afce) return; document['getElementById'](_0x24960f(0x5c4))['value'] = _0x48afce['id'], document[_0x24960f(0x7ef)](_0x24960f(0xf5))[_0x24960f(0x5f8)] = '编辑用户', document[_0x24960f(0x7ef)](_0x24960f(0xc8))['value'] = _0x48afce[_0x24960f(0x382)]; if (_0x48afce['avatar']) _0x24960f(0x6ba) !== _0x24960f(0x6ba) ? (_0x8d6ef4(), _0x296b28[_0x24960f(0x7ef)](_0x24960f(0x1c6))[_0x24960f(0x4ad)][_0x24960f(0x713)](_0x24960f(0xfb)), _0x280f04[_0x24960f(0x7ef)](_0x24960f(0xb89))['style'][_0x24960f(0x8a4)] = _0x24960f(0xacf), _0x571a75(() => { const _0x21fe43 = _0x24960f; _0x3fa574(_0x21fe43(0x1bf), 'chat'); }, 0x14)) : _0x317e64[_0x24960f(0x937)]['backgroundImage'] = _0x24960f(0x550) + _0x48afce[_0x24960f(0x3f1)] + '\x27)'; else { if (_0x24960f(0x13e) !== 'uhZCW') _0x317e64[_0x24960f(0x937)]['backgroundImage'] = _0x24960f(0x550) + _0x2e585f + '\x27)'; else { _0x5f00c2[_0x24960f(0x252)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', _0x311816[_0x24960f(0x252)] = _0x24960f(0x5e6), _0x4b2ac3[_0x24960f(0x7ef)](_0x24960f(0x2fb))['addEventListener']('click', _0x2e92a8), _0x5041a1['getElementById']('diary-get-reply-button')['addEventListener'](_0x24960f(0x2c5), _0x69648b); return; } } document[_0x24960f(0x7ef)]('user-persona')[_0x24960f(0x35c)] = _0x48afce['persona'], _0x26557a[_0x24960f(0x937)]['display'] = _0x48afce['id'] === _0x3cf4de[_0x24960f(0xa37)] ? _0x24960f(0xacf) : _0x24960f(0x540), document[_0x24960f(0x7ef)]('delete-user-profile-button')[_0x24960f(0x937)][_0x24960f(0x8a4)] = _0x24960f(0x540); } else document[_0x24960f(0x7ef)](_0x24960f(0x5c4))[_0x24960f(0x35c)] = '', document[_0x24960f(0x7ef)]('user-profile-edit-title')[_0x24960f(0x5f8)] = '创建新用户', document['getElementById'](_0x24960f(0xc8))[_0x24960f(0x35c)] = '新用户\x20' + (_0x3cf4de[_0x24960f(0x3ec)][_0x24960f(0x30c)] + 0x1), _0x317e64[_0x24960f(0x937)]['backgroundImage'] = _0x24960f(0x550) + _0x2e585f + '\x27)', document[_0x24960f(0x7ef)](_0x24960f(0x575))[_0x24960f(0x35c)] = '', _0x26557a['style'][_0x24960f(0x8a4)] = _0x24960f(0xacf), document[_0x24960f(0x7ef)](_0x24960f(0x924))[_0x24960f(0x937)][_0x24960f(0x8a4)] = _0x24960f(0xacf); } function _0x3f6828() { const _0xbfd8af = _0xe59ed1, _0x1714f8 = document[_0xbfd8af(0x7ef)]('editing-user-id')[_0xbfd8af(0x35c)], _0x12920b = document[_0xbfd8af(0x7ef)](_0xbfd8af(0xf6)), _0x5064b6 = { 'name': document[_0xbfd8af(0x7ef)](_0xbfd8af(0xc8))[_0xbfd8af(0x35c)][_0xbfd8af(0x4ca)](), 'persona': document[_0xbfd8af(0x7ef)](_0xbfd8af(0x575))[_0xbfd8af(0x35c)][_0xbfd8af(0x4ca)](), 'avatar': _0x3cf4de[_0xbfd8af(0x3ec)][_0xbfd8af(0x6f0)](_0x2dda96 => _0x2dda96['id'] === _0x1714f8)?.[_0xbfd8af(0x3f1)] || _0x12920b[_0xbfd8af(0x937)]['backgroundImage']['slice'](0x5, -0x2)[_0xbfd8af(0xb53)](/'/g, '') || _0x2e585f }; _0x12920b[_0xbfd8af(0x361)][_0xbfd8af(0x9a6)] && (_0x5064b6[_0xbfd8af(0x3f1)] = _0x12920b['dataset'][_0xbfd8af(0x9a6)], delete _0x12920b[_0xbfd8af(0x361)][_0xbfd8af(0x9a6)]); if (!_0x5064b6[_0xbfd8af(0x382)]) { _0x5bf34b(_0xbfd8af(0x16d)); return; } if (_0x1714f8) { const _0xf3c14a = _0x3cf4de[_0xbfd8af(0x3ec)][_0xbfd8af(0x6f0)](_0x1d527e => _0x1d527e['id'] === _0x1714f8); if (_0xf3c14a) Object[_0xbfd8af(0x7a2)](_0xf3c14a, _0x5064b6); } else { if ('UXhpC' === _0xbfd8af(0x815)) { const _0x33415d = { 'id': _0xbfd8af(0x73d) + Date[_0xbfd8af(0x740)](), ..._0x5064b6 }; _0x3cf4de[_0xbfd8af(0x3ec)][_0xbfd8af(0x967)](_0x33415d); if (!_0x3cf4de[_0xbfd8af(0xa37)]) { if (_0xbfd8af(0xa1) === _0xbfd8af(0xa84)) { _0x4490d6(_0xbfd8af(0x3cc)); return; } else _0x3cf4de[_0xbfd8af(0xa37)] = _0x33415d['id']; } } else { const _0x53f828 = (_0x2368e1 - 0x5a) * _0x5afa97['PI'] / 0xb4; return { 'x': _0x14bdd3 + _0x3a8cb7 * _0x31e6bf['cos'](_0x53f828), 'y': _0xa97ddb + _0x3d81b2 * _0x4c18d2[_0xbfd8af(0x19a)](_0x53f828) }; } } _0x3a3bc1(), _0x5bf34b('用户资料已保存！'), _0x47b9ef(), _0x459e0a(_0xbfd8af(0x6be), _0xbfd8af(0x2b5)); } async function _0x283086() { const _0x525240 = _0xe59ed1, _0x590085 = document['getElementById'](_0x525240(0x5c4))[_0x525240(0x35c)]; if (!_0x590085) return; if (_0x3cf4de[_0x525240(0x3ec)][_0x525240(0x30c)] <= 0x1) { if (_0x525240(0xb17) === _0x525240(0xb17)) { _0x5bf34b('至少要保留一个用户。'); return; } else _0x3617c1(_0x350efb['id'], _0x2db2a7[_0x525240(0x48a)](_0x6a9c1b => _0x6a9c1b['id'])); } const _0x1ee2aa = await _0x56efd8('确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。'); if (_0x1ee2aa) { if (_0x525240(0x482) === 'iPDHl') _0x3cf4de[_0x525240(0x3ec)] = _0x3cf4de[_0x525240(0x3ec)][_0x525240(0x3f0)](_0x409e46 => _0x409e46['id'] !== _0x590085), _0x3cf4de[_0x525240(0xa37)] === _0x590085 && ('XPTdk' === 'LFRQv' ? _0x67e9d['addEventListener'](_0x525240(0x2c5), () => { const _0x261aff = _0x525240; _0x38f5df(_0x261aff(0x8b1)); }) : _0x3cf4de[_0x525240(0xa37)] = _0x3cf4de['userProfiles'][0x0]['id']), _0x3cf4de[_0x525240(0x27a)][_0x525240(0x8cf)](_0x5cb023 => { const _0x25fcdf = _0x525240; _0x5cb023[_0x25fcdf(0x2c4)] === _0x590085 && (_0x5cb023['boundUserProfileId'] = _0x3cf4de['activeUserProfileId']); }), _0x3a3bc1(), _0x5bf34b(_0x525240(0x96d)), _0x47b9ef(), _0x459e0a(_0x525240(0x6be), _0x525240(0x2b5)); else { const _0x29796d = _0x25360f['createElement'](_0x525240(0x308)); _0x29796d[_0x525240(0x35c)] = _0x3ffe55['id'], _0x29796d[_0x525240(0x5f8)] = _0x425023[_0x525240(0x382)], _0xda02c5[_0x525240(0x8fe)](_0x29796d); } } } function _0x11518b() { const _0x38e1a7 = _0xe59ed1; if (_0x38e1a7(0x12a) === _0x38e1a7(0x12a)) _0x46ccd4(), _0x11e9d3(_0x3cf4de[_0x38e1a7(0x781)]); else { const _0x24aebf = _0x3945c3[_0x38e1a7(0x79c)][_0x38e1a7(0x6f0)](_0x46b425 => _0x46b425[_0x38e1a7(0x382)] === _0x245882[_0x38e1a7(0x382)]); !_0x24aebf && _0x18e086[_0x38e1a7(0x79c)][_0x38e1a7(0x967)]({ 'id': _0x182ade['id'] || 'wbc_imported_' + _0x32afad['now'](), 'name': _0x1ba902['name'] }); } } function _0x46ccd4() { const _0x3061c9 = _0xe59ed1; if (_0x3061c9(0x60b) !== _0x3061c9(0xa2f)) { const _0x3ad75c = document[_0x3061c9(0x7ef)](_0x3061c9(0x704)); _0x3ad75c[_0x3061c9(0x252)] = '', _0x3cf4de[_0x3061c9(0x79c)]['forEach'](_0x504940 => { const _0x1f0ea0 = _0x3061c9; if ('WAvwL' !== 'ZdlCp') { const _0x37fa96 = document[_0x1f0ea0(0xb60)]('div'); _0x37fa96['textContent'] = _0x504940['name'], _0x37fa96[_0x1f0ea0(0x361)]['id'] = _0x504940['id'], _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x9f7)] = _0x1f0ea0(0xa9c), _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0xb76)] = _0x1f0ea0(0x3ef), _0x37fa96[_0x1f0ea0(0x937)]['cursor'] = _0x1f0ea0(0xa86), _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x83c)] = _0x1f0ea0(0x285), _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x871)] = _0x1f0ea0(0x624); _0x504940['id'] === _0x3cf4de[_0x1f0ea0(0x781)] ? (_0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x9ad)] = _0x1f0ea0(0x95f), _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x501)] = 'white') : _0x37fa96[_0x1f0ea0(0x937)][_0x1f0ea0(0x501)] = _0x1f0ea0(0x995); _0x37fa96[_0x1f0ea0(0x25c)](_0x1f0ea0(0x2c5), () => { const _0x948ebd = _0x1f0ea0; _0x3cf4de[_0x948ebd(0x781)] = _0x504940['id'], _0x11518b(); }); let _0x5f060d = null; const _0x43bcba = _0x22b9f7 => { const _0x45b86b = _0x1f0ea0; if (_0x504940['id'] === _0x45b86b(0xa41)) return; _0x5f060d = setTimeout(() => { const _0x295af6 = _0x45b86b; if (_0x22b9f7['type'] === _0x295af6(0x9c0)) _0x22b9f7['preventDefault'](); _0x39bfda(_0x504940['id'], _0x504940[_0x295af6(0x382)]); }, 0x320); }, _0x20f502 = () => { clearTimeout(_0x5f060d); }; _0x37fa96['addEventListener'](_0x1f0ea0(0x318), _0x43bcba), _0x37fa96[_0x1f0ea0(0x25c)]('mouseup', _0x20f502), _0x37fa96[_0x1f0ea0(0x25c)](_0x1f0ea0(0x8cc), _0x20f502), _0x37fa96[_0x1f0ea0(0x25c)]('touchstart', _0x43bcba, { 'passive': ![] }), _0x37fa96['addEventListener']('touchend', _0x20f502), _0x37fa96['addEventListener'](_0x1f0ea0(0x947), _0x20f502), _0x3ad75c['appendChild'](_0x37fa96); } else { const _0x2fbbdf = _0x4a96f6[_0x1f0ea0(0x9b1)](_0x5c2d8d, _0x1f0ea0(0x12b)), _0x29d8f1 = _0x2fbbdf[_0x1f0ea0(0x326)](_0x5613cb), _0x23bc4c = _0x29d8f1[_0x1f0ea0(0x336)]({ 'id': _0x2935f5, 'data': _0x412ad7 }); _0x23bc4c['onsuccess'] = () => _0x48bd8e(), _0x23bc4c[_0x1f0ea0(0x1bb)] = () => _0x30f355(_0x23bc4c['error']); } }); } else _0x59e8d9(_0x3061c9(0x3fc) + _0x14bfeb[_0x3061c9(0x99)]); } async function _0x39bfda(_0x5f2ca7, _0x5d4445) { const _0x1dc321 = _0xe59ed1, _0x599818 = await _0x56efd8('确定要永久删除分类\x20“' + _0x5d4445 + '”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。'); if (!_0x599818) return; const _0x17c6c6 = _0x3cf4de[_0x1dc321(0xb88)][_0x1dc321(0x3f0)](_0x544fe9 => _0x544fe9[_0x1dc321(0x2da)] === _0x5f2ca7)[_0x1dc321(0x48a)](_0x495b3d => _0x495b3d['id']); _0x3cf4de[_0x1dc321(0xb88)] = _0x3cf4de[_0x1dc321(0xb88)][_0x1dc321(0x3f0)](_0x13ad59 => _0x13ad59[_0x1dc321(0x2da)] !== _0x5f2ca7), _0x3cf4de[_0x1dc321(0x729)] = _0x3cf4de[_0x1dc321(0x79c)][_0x1dc321(0x3f0)](_0x6d5525 => _0x6d5525['id'] !== _0x5f2ca7); _0x3cf4de[_0x1dc321(0x781)] === _0x5f2ca7 && (_0x3cf4de[_0x1dc321(0x781)] = _0x1dc321(0xa41)); const _0x2a82d5 = [..._0x3cf4de[_0x1dc321(0xad3)], ..._0x3cf4de[_0x1dc321(0x27a)]]; _0x2a82d5[_0x1dc321(0x8cf)](_0x451148 => { const _0x8b19de = _0x1dc321; _0x451148[_0x8b19de(0x91e)] && _0x451148[_0x8b19de(0x91e)]['length'] > 0x0 && (_0x8b19de(0x85c) === _0x8b19de(0x657) ? (_0xce20ca[_0x8b19de(0x4ad)][_0x8b19de(0x44c)](_0x8b19de(0x1eb)), _0x31d361[_0x8b19de(0x4ad)][_0x8b19de(0x44c)](_0x8b19de(0x60c)), _0x45b95d[_0x8b19de(0x4ad)][_0x8b19de(0x44c)](_0x8b19de(0x61e)), _0x461bad(() => { const _0x4de701 = _0x8b19de; _0x59d8ce[_0x4de701(0x4ad)][_0x4de701(0x713)](_0x4de701(0x61e), _0x4de701(0x60c)), _0x41e343[_0x4de701(0x4ad)]['remove'](_0x4de701(0x1eb)), _0x491b6f['diaryCurrentPage'] = _0x58ec59, _0x23b2c3(), _0x53f105[_0x4de701(0xaef)] = ![]; }, 0x2bc)) : _0x451148[_0x8b19de(0x91e)] = _0x451148['linkedWorldBookIds'][_0x8b19de(0x3f0)](_0x51bb28 => !_0x17c6c6[_0x8b19de(0x5cc)](_0x51bb28))); }), _0x3a3bc1(), _0x11518b(), _0x5bf34b(_0x1dc321(0x4a4) + _0x5d4445 + _0x1dc321(0x5ca)); } function _0x11e9d3(_0x1e5ffb) { const _0x4ae7b9 = _0xe59ed1; if (_0x4ae7b9(0x6f3) === _0x4ae7b9(0x6f3)) { const _0x473316 = document[_0x4ae7b9(0x7ef)](_0x4ae7b9(0x54d)); _0x473316['innerHTML'] = ''; const _0x4dbce6 = _0x3cf4de[_0x4ae7b9(0xb88)][_0x4ae7b9(0x3f0)](_0x2499e8 => _0x2499e8['categoryId'] === _0x1e5ffb || _0x1e5ffb === _0x4ae7b9(0xa41) && !_0x2499e8['categoryId']); if (_0x4dbce6[_0x4ae7b9(0x30c)] === 0x0) { _0x473316['innerHTML'] = _0x4ae7b9(0x1d0); return; } _0x4dbce6[_0x4ae7b9(0x8cf)](_0x3d7b09 => { const _0x32d4db = _0x4ae7b9, _0x32a7d8 = document[_0x32d4db(0xb60)](_0x32d4db(0xb0b)); _0x32a7d8[_0x32d4db(0x199)] = _0x32d4db(0x88d), _0x32a7d8[_0x32d4db(0x361)]['id'] = _0x3d7b09['id'], _0x32a7d8[_0x32d4db(0x252)] = _0x32d4db(0x626) + _0x3d7b09[_0x32d4db(0x382)] + _0x32d4db(0x680) + _0x3d7b09[_0x32d4db(0x313)][_0x32d4db(0xab5)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x32a7d8['addEventListener'](_0x32d4db(0x2c5), () => _0x18378f(_0x3d7b09['id'])), _0x473316[_0x32d4db(0x8fe)](_0x32a7d8); }); } else _0x167284 += '-\x20' + _0x3abadb[_0x4ae7b9(0x56e)](_0x3949ce) + '\x0a'; } document[_0xe59ed1(0x7ef)](_0xe59ed1(0x25e))['addEventListener'](_0xe59ed1(0x2c5), async () => { const _0x584119 = _0xe59ed1, _0x2c2289 = prompt('请输入新的分类名称:'); if (_0x2c2289 && _0x2c2289[_0x584119(0x4ca)]()) { const _0x47721c = { 'id': _0x584119(0x66c) + Date['now'](), 'name': _0x2c2289[_0x584119(0x4ca)]() }; _0x3cf4de[_0x584119(0x79c)]['push'](_0x47721c), _0x3cf4de[_0x584119(0x781)] = _0x47721c['id'], _0x3a3bc1(), _0x11518b(); } }); function _0x18378f(_0x54cf35 = null) { const _0x1dbd41 = _0xe59ed1; _0x459e0a(_0x1dbd41(0xb6b), _0x1dbd41(0x8ac)); const _0xa0a2c1 = document['getElementById'](_0x1dbd41(0x4c6)); _0xa0a2c1[_0x1dbd41(0x252)] = '', _0x3cf4de[_0x1dbd41(0x79c)][_0x1dbd41(0x8cf)](_0x253d2b => { const _0x2e7a46 = _0x1dbd41, _0x25cd1b = document[_0x2e7a46(0xb60)]('option'); _0x25cd1b[_0x2e7a46(0x35c)] = _0x253d2b['id'], _0x25cd1b[_0x2e7a46(0x5f8)] = _0x253d2b[_0x2e7a46(0x382)], _0xa0a2c1[_0x2e7a46(0x8fe)](_0x25cd1b); }); if (_0x54cf35) { if (_0x1dbd41(0x814) === 'IENON') { if (_0x2ef262['length'] === 0x0) return; _0x2adca4 = (_0x196589 - 0x1 + _0x15d2b6[_0x1dbd41(0x30c)]) % _0x55265d['length'], _0x3713d7(_0xd89526[_0x28f234], _0x46f7de); } else { const _0xa7fb31 = _0x3cf4de[_0x1dbd41(0xb88)]['find'](_0x1fb2d0 => _0x1fb2d0['id'] === _0x54cf35); if (!_0xa7fb31) return; document[_0x1dbd41(0x7ef)]('editing-world-book-id')[_0x1dbd41(0x35c)] = _0xa7fb31['id'], document[_0x1dbd41(0x7ef)]('world-book-editor-title')[_0x1dbd41(0x5f8)] = _0x1dbd41(0x44d), document[_0x1dbd41(0x7ef)](_0x1dbd41(0x938))[_0x1dbd41(0x35c)] = _0xa7fb31[_0x1dbd41(0x382)], document[_0x1dbd41(0x7ef)](_0x1dbd41(0x813))[_0x1dbd41(0x35c)] = _0xa7fb31['content'], _0xa0a2c1['value'] = _0xa7fb31[_0x1dbd41(0x2da)] || _0x1dbd41(0xa41); } } else document[_0x1dbd41(0x7ef)](_0x1dbd41(0x9fc))[_0x1dbd41(0x35c)] = '', document[_0x1dbd41(0x7ef)]('world-book-editor-title')['textContent'] = _0x1dbd41(0x11b), document[_0x1dbd41(0x7ef)](_0x1dbd41(0x938))[_0x1dbd41(0x35c)] = '', document[_0x1dbd41(0x7ef)]('world-book-edit-content')[_0x1dbd41(0x35c)] = '', _0xa0a2c1[_0x1dbd41(0x35c)] = _0x3cf4de['activeWorldBookCategoryId']; } function _0x526e3f() { const _0x4b580c = _0xe59ed1, _0x5b7738 = document['getElementById']('editing-world-book-id')['value'], _0x2b0856 = document['getElementById'](_0x4b580c(0x938))['value'][_0x4b580c(0x4ca)](), _0x226dda = document[_0x4b580c(0x7ef)](_0x4b580c(0x813))[_0x4b580c(0x35c)][_0x4b580c(0x4ca)](), _0x38ded1 = document[_0x4b580c(0x7ef)](_0x4b580c(0x4c6))['value']; if (!_0x2b0856 || !_0x226dda) { if (_0x4b580c(0x377) !== _0x4b580c(0x377)) { const _0x461af7 = _0x3ec195['classList'][_0x4b580c(0x182)]('show'); _0x97feea[_0x4b580c(0x4ad)][_0x4b580c(0x6c7)](_0x4b580c(0x494), _0x461af7), !_0x461af7 && (_0x44ad9a && _0x449e48[_0x4b580c(0x2c5)]()); } else { _0x5bf34b(_0x4b580c(0xaf5)); return; } } if (_0x5b7738) { const _0x320ad0 = _0x3cf4de[_0x4b580c(0xb88)][_0x4b580c(0x6f0)](_0x27c85b => _0x27c85b['id'] === _0x5b7738); _0x320ad0 && (_0x320ad0['name'] = _0x2b0856, _0x320ad0[_0x4b580c(0x313)] = _0x226dda, _0x320ad0[_0x4b580c(0x2da)] = _0x38ded1); } else { if (_0x4b580c(0x953) !== _0x4b580c(0x953)) { const _0x95066a = (_0x118119 - _0x8b4150) / (0x3e8 * 0x3c); _0x95066a < 0x3c ? _0x1d1390 += _0x4b580c(0x58a) : _0x4ed999 += _0x4b580c(0x522) + _0xab0393[_0x4b580c(0x53a)](_0x95066a / 0x3c) + _0x4b580c(0x54e); } else { const _0x336271 = { 'id': _0x4b580c(0xa44) + Date[_0x4b580c(0x740)](), 'name': _0x2b0856, 'content': _0x226dda, 'categoryId': _0x38ded1 }; _0x3cf4de['worldBooks'][_0x4b580c(0x967)](_0x336271); } } _0x3cf4de[_0x4b580c(0x781)] = _0x38ded1, _0x3a3bc1(), _0x5bf34b('世界书条目已保存！'), _0x11518b(), _0x459e0a(_0x4b580c(0x8ac), _0x4b580c(0xb6b)); } async function _0x235d04() { const _0x295ea5 = _0xe59ed1; if ('HBFzN' === _0x295ea5(0x538)) { const _0x40248d = document['getElementById'](_0x295ea5(0x9fc))[_0x295ea5(0x35c)]; if (!_0x40248d) return; const _0xed4008 = await _0x56efd8(_0x295ea5(0x125)); _0xed4008 && (_0x3cf4de[_0x295ea5(0xb88)] = _0x3cf4de['worldBooks'][_0x295ea5(0x3f0)](_0xd606d2 => _0xd606d2['id'] !== _0x40248d), _0x3cf4de['characters'][_0x295ea5(0x8cf)](_0x17b752 => { const _0x1ecf7e = _0x295ea5; _0x17b752[_0x1ecf7e(0x91e)] && (_0x17b752['linkedWorldBookIds'] = _0x17b752['linkedWorldBookIds']['filter'](_0x295220 => _0x295220 !== _0x40248d)); }), _0x3a3bc1(), _0x5bf34b('条目已删除。'), _0x11518b(), _0x459e0a(_0x295ea5(0x8ac), _0x295ea5(0xb6b))); } else _0x4f0d8f > _0x2ef2d0 && (_0x27fcc9 *= _0x3feda0 / _0x318d43, _0xa0255f = _0x17a1e2); } function _0x5b0a17() { const _0x269552 = _0xe59ed1, _0x46ca1b = document[_0x269552(0x7ef)](_0x269552(0x2c3)), _0xdfc230 = _0x46ca1b[_0x269552(0x53f)](_0x269552(0x1ed)), _0x57cf18 = document[_0x269552(0x5cb)](_0x269552(0x148)); if (_0xdfc230[_0x269552(0x30c)] === 0x0) { if ('KxwuX' !== _0x269552(0xaeb)) _0x57cf18[_0x269552(0x5f8)] = _0x269552(0xd6); else { const _0x552b75 = _0x10502a[_0x269552(0x7ef)](_0x269552(0x9fb)); _0x552b75[_0x269552(0x5f8)] = _0x58cc3, _0x552b75[_0x269552(0x937)][_0x269552(0x8a4)] = _0x269552(0x540); if (_0x194e54['_t']) _0x2ae9af(_0x33e9ca['_t']); _0x42df96['_t'] = _0x38820a(() => { const _0x2a458b = _0x269552; _0x552b75[_0x2a458b(0x937)][_0x2a458b(0x8a4)] = _0x2a458b(0xacf); }, 0x640); } } else { if (_0xdfc230[_0x269552(0x30c)] > 0x2) _0x57cf18[_0x269552(0x5f8)] = '已选择\x20' + _0xdfc230[_0x269552(0x30c)] + '\x20项'; else { if (_0x269552(0x873) !== _0x269552(0x873)) { const { playlist: _0x3a74f3, currentIndex: _0x584175 } = _0x2627b5[_0x269552(0x6e7)](_0x5a04a3); _0x322bc3[_0x269552(0x9a1)](_0x3a74f3) && _0x3a74f3[_0x269552(0x30c)] > 0x0 && _0x584175 > -0x1 && (_0x58ea96[_0x269552(0xaab)] = _0x3a74f3, _0x5b9e5a[_0x269552(0x627)] = _0x584175, _0xf3d181[_0x269552(0x5e9)] = ![], _0x1332e8()); } else _0x57cf18[_0x269552(0x5f8)] = Array[_0x269552(0x60a)](_0xdfc230)[_0x269552(0x48a)](_0x4dc4ac => _0x4dc4ac[_0x269552(0x93e)][_0x269552(0x5f8)][_0x269552(0x4ca)]())['join']('、'); } } } async function _0x557213(_0x47c5f9) { const _0x29b515 = _0xe59ed1, _0x554235 = _0x3cf4de[_0x29b515(0x27a)][_0x29b515(0x6f0)](_0x416b27 => _0x416b27['id'] === _0x47c5f9); if (!_0x554235 || _0x554235[_0x29b515(0x76d)] !== _0x29b515(0x861)) return; document[_0x29b515(0x7ef)](_0x29b515(0x833))[_0x29b515(0x35c)] = _0x554235[_0x29b515(0x382)] || '', _0x336ace(_0x29b515(0x80d)), document[_0x29b515(0x7ef)](_0x29b515(0x80d))[_0x29b515(0x35c)] = _0x554235['boundUserProfileId'] || _0x3cf4de[_0x29b515(0xa37)], _0x2ef5a5(_0x29b515(0x561), _0x554235[_0x29b515(0x91e)] || []), _0x2e4ab7(); const _0x5f4c35 = document[_0x29b515(0x7ef)](_0x29b515(0x1a8)), _0x516852 = document[_0x29b515(0x7ef)](_0x29b515(0x270)); _0x516852['style'][_0x29b515(0x6aa)] = '', _0x47b504(_0x29b515(0x6f6) + _0x47c5f9)['then'](_0x3eb4f3 => { const _0x2e31db = _0x29b515; _0x5f4c35[_0x2e31db(0x557)] = _0x3eb4f3 ? URL[_0x2e31db(0x9e4)](_0x3eb4f3) : _0x574d9b; }), _0x47b504(_0x29b515(0x528) + _0x47c5f9)[_0x29b515(0x683)](_0x5d130a => { const _0x5628f2 = _0x29b515; if (_0x5d130a) _0x516852[_0x5628f2(0x937)][_0x5628f2(0x6aa)] = _0x5628f2(0x550) + URL[_0x5628f2(0x9e4)](_0x5d130a) + '\x27)'; }), _0x459e0a(_0x29b515(0x1c4), _0x29b515(0x2b9)); } async function _0x35c784() { const _0x2bf1d6 = _0xe59ed1, _0x28dd0e = _0x5234d7(); if (!_0x28dd0e || _0x28dd0e[_0x2bf1d6(0x76d)] !== _0x2bf1d6(0x861)) return; const _0x6a9de0 = document['getElementById'](_0x2bf1d6(0x833))[_0x2bf1d6(0x35c)][_0x2bf1d6(0x4ca)](); if (!_0x6a9de0) { _0x5bf34b(_0x2bf1d6(0x23a)); return; } _0x28dd0e['name'] = _0x6a9de0; const _0x431639 = document[_0x2bf1d6(0x53f)](_0x2bf1d6(0x761)); _0x28dd0e[_0x2bf1d6(0x91e)] = Array['from'](_0x431639)[_0x2bf1d6(0x48a)](_0x345d93 => _0x345d93[_0x2bf1d6(0x35c)]), _0x28dd0e[_0x2bf1d6(0x2c4)] = document[_0x2bf1d6(0x7ef)](_0x2bf1d6(0x80d))[_0x2bf1d6(0x35c)]; const _0x1dcc00 = document[_0x2bf1d6(0x7ef)](_0x2bf1d6(0x62a))[_0x2bf1d6(0x27c)][0x0], _0x1d08f8 = document[_0x2bf1d6(0x7ef)](_0x2bf1d6(0x987))[_0x2bf1d6(0x27c)][0x0]; if (_0x1dcc00) await _0x30635e('group_avatar_' + _0x28dd0e['id'], _0x1dcc00); if (_0x1d08f8) await _0x30635e('group_bg_' + _0x28dd0e['id'], _0x1d08f8); _0x3a3bc1(), _0x1897fd(), await _0x8d695a(), _0x5bf34b(_0x2bf1d6(0x639)), _0x459e0a(_0x2bf1d6(0x2b9), _0x2bf1d6(0x1c4)); } function _0x2e4ab7() { const _0x1d9af6 = _0xe59ed1; if (_0x1d9af6(0x2bd) === _0x1d9af6(0x2bd)) { const _0x258c54 = document[_0x1d9af6(0x7ef)](_0x1d9af6(0x561)), _0x36bd90 = _0x258c54[_0x1d9af6(0x53f)](_0x1d9af6(0x1ed)), _0x16f87c = document[_0x1d9af6(0x5cb)](_0x1d9af6(0x514)); if (_0x36bd90[_0x1d9af6(0x30c)] === 0x0) _0x16f87c[_0x1d9af6(0x5f8)] = _0x1d9af6(0xd6); else _0x36bd90[_0x1d9af6(0x30c)] > 0x2 ? _0x1d9af6(0x555) !== _0x1d9af6(0x555) ? _0x382f9d[_0x1d9af6(0xa0d)]() : _0x16f87c[_0x1d9af6(0x5f8)] = _0x1d9af6(0xa10) + _0x36bd90['length'] + '\x20项' : _0x1d9af6(0x731) !== 'BemHL' ? _0x16f87c[_0x1d9af6(0x5f8)] = Array[_0x1d9af6(0x60a)](_0x36bd90)[_0x1d9af6(0x48a)](_0x2d7906 => _0x2d7906[_0x1d9af6(0x93e)]['textContent'][_0x1d9af6(0x4ca)]())[_0x1d9af6(0x863)]('、') : (_0x2c4eaf[_0x1d9af6(0xa3d)] = _0x4564be[_0x1d9af6(0xa3d)][_0x1d9af6(0x3f0)](_0x35c5c9 => _0x35c5c9['id'] !== _0x13b593), _0x4bbea7[_0x1d9af6(0x62f)] === _0x12bf9d && (_0xccda5c[_0x1d9af6(0x62f)] = null), _0x1000a5(), _0x5120aa(_0x1d9af6(0x31d)), _0x5a3d4c(), _0x48f262('friendCircleList', _0x1d9af6(0xa47))); } else _0x41b2df = _0x3b6fd0[_0x1d9af6(0x6e7)](_0x59503b); } async function _0x50758e() { const _0x5bb063 = _0xe59ed1; if (_0x5bb063(0x65b) === _0x5bb063(0x65b)) { const _0x3c1b5a = _0x5234d7(), _0x54c883 = (_0x3c1b5a?.[_0x5bb063(0x48f)] || [])[_0x5bb063(0x48a)](_0xd97907)[_0x5bb063(0x3f0)](Boolean), _0x5d0db9 = _0x1af79f(_0x3c1b5a['id']); if (!_0x3c1b5a || _0x3c1b5a['type'] !== _0x5bb063(0x861) || _0x54c883[_0x5bb063(0x30c)] < 0x2) return null; const _0x5cebbe = _0x3c1b5a[_0x5bb063(0x91e)] && _0x3c1b5a[_0x5bb063(0x91e)][_0x5bb063(0x30c)] > 0x0 ? _0x5bb063(0x96c) + _0x3c1b5a[_0x5bb063(0x91e)]['map'](_0x1077de => _0x3cf4de[_0x5bb063(0xb88)][_0x5bb063(0x6f0)](_0x145045 => _0x145045['id'] === _0x1077de))['filter'](Boolean)[_0x5bb063(0x48a)](_0x4ea2e5 => _0x5bb063(0x67e) + _0x4ea2e5[_0x5bb063(0x382)] + '\x0a' + _0x4ea2e5[_0x5bb063(0x313)])['join']('') : '', _0x382c5b = _0x5d0db9[_0x5bb063(0xa2e)] ? '\x0a\x0a#\x20关于群聊参与者“' + _0x5d0db9[_0x5bb063(0x382)] + '”的补充信息\x0a' + _0x5d0db9[_0x5bb063(0xa2e)] : ''; let _0x21d1d2 = ''; const _0xb85b89 = new Date(), _0x50e790 = _0x3cf4de[_0x5bb063(0x103)]['at'](-0x1); _0x21d1d2 += _0x5bb063(0x5fc) + _0xb85b89['toLocaleString'](_0x5bb063(0x77e), { 'dateStyle': 'full', 'timeStyle': _0x5bb063(0x5cf) }); if (_0x50e790) { const _0x535b6d = new Date(_0x50e790[_0x5bb063(0x554)]), _0x5371a7 = Math['floor']((_0xb85b89 - _0x535b6d) / (0x3e8 * 0x3c)); if (_0x5371a7 < 0x5) _0x21d1d2 += _0x5bb063(0x116); else { if (_0x5371a7 < 0x78) _0x21d1d2 += '\x0a-\x20**对话状态**:\x20群里在' + _0x5371a7 + _0x5bb063(0x3c8); else { const _0x57509b = Math[_0x5bb063(0x1e8)](_0x5371a7 / 0x3c); if (_0x57509b < 0x30) _0x21d1d2 += _0x5bb063(0x2cf) + _0x57509b + _0x5bb063(0xb74); else _0x21d1d2 += _0x5bb063(0x972) + Math[_0x5bb063(0x1e8)](_0x57509b / 0x18) + _0x5bb063(0x260); } } } else _0x21d1d2 += _0x5bb063(0x43b); const _0x1482e5 = [..._0x3cf4de['conversationHistory']][_0x5bb063(0x1e2)]()[_0x5bb063(0x6f0)](_0x54177c => _0x54177c[_0x5bb063(0x84c)] === _0x5bb063(0x32c))?.['content'] || '', _0x3c6544 = _0x5c6167(_0x3c1b5a, _0x1482e5), _0x1d93cf = _0x3cf4de[_0x5bb063(0x103)]['slice'](-0x78), _0x2524af = _0x35cf89[_0x5bb063(0x48a)](_0x5f1607 => _0x5f1607['name']), _0x319861 = _0x43ae40(), _0x27e0a3 = await Promise[_0x5bb063(0x6d5)](_0x54c883[_0x5bb063(0x48a)](async _0x2a2215 => { const _0x45d69d = _0x5bb063; if (_0x45d69d(0x80c) !== _0x45d69d(0x80c)) _0x3ff7f1(_0x45d69d(0x310) + _0x2cd928[_0x45d69d(0x99)]); else { const { omniText: _0x3dc486 } = _0x7987c1(_0x2a2215['id'], _0x3c1b5a['id']), _0x319cbc = _0x5c4d13(_0x2a2215['id']), _0x371d63 = await _0x12334d(_0x2a2215['id']), _0x3f518e = _0x2a2215[_0x45d69d(0x91e)] && _0x2a2215['linkedWorldBookIds'][_0x45d69d(0x30c)] > 0x0 ? _0x45d69d(0x14b) + _0x2a2215['name'] + _0x45d69d(0xacc) + _0x2a2215[_0x45d69d(0x91e)][_0x45d69d(0x48a)](_0x535b2b => _0x3cf4de['worldBooks']['find'](_0x163b89 => _0x163b89['id'] === _0x535b2b))[_0x45d69d(0x3f0)](Boolean)[_0x45d69d(0x48a)](_0x7d6b8e => _0x45d69d(0xb58) + _0x7d6b8e[_0x45d69d(0x382)] + '\x0a' + _0x7d6b8e[_0x45d69d(0x313)])[_0x45d69d(0x863)]('') : ''; let _0x54ef58 = '\x0a#\x20关于你\x20(' + _0x2a2215[_0x45d69d(0x382)] + _0x45d69d(0x5ce); const _0x20b26e = _0x3de80d(_0x2a2215['id']), _0x30bf58 = new Date(); if (_0x20b26e) { if (_0x45d69d(0xa3) !== _0x45d69d(0x988)) { const _0x50f924 = new Date(_0x20b26e['timestamp']); _0x54ef58 += _0x45d69d(0x37a) + _0x5d0db9[_0x45d69d(0x382)] + _0x45d69d(0x55b) + _0x19c0c3(_0x50f924) + '\x0a'; } else { const _0x1a8c8f = _0x25d5a9[_0x45d69d(0x96b)](), _0x456ca2 = _0x61b0e4(_0x23dab8[_0x45d69d(0x677)]() + 0x1)[_0x45d69d(0x5b5)](0x2, '0'), _0x414a9a = _0x8628c2(_0x575343[_0x45d69d(0x5c3)]())[_0x45d69d(0x5b5)](0x2, '0'); return _0x1a8c8f + '-' + _0x456ca2 + '-' + _0x414a9a; } } else { if (_0x45d69d(0xa12) === _0x45d69d(0xaee)) { const _0x30fda9 = _0xcd342f(_0x13df18['id']), _0x21b38a = _0x30fda9[_0x45d69d(0x30c)] > 0x0 ? _0x30fda9[_0x30fda9['length'] - 0x1] : null; return { 'chat': _0xc3269b, 'history': _0x30fda9, 'lastTimestamp': _0x21b38a ? _0x21b38a[_0x45d69d(0x554)] : 0x0 }; } else _0x54ef58 += _0x45d69d(0xa77) + _0x5d0db9['name'] + '的第一次互动。\x0a'; } return { 'id': _0x2a2215['id'], 'name': _0x2a2215[_0x45d69d(0x382)], 'persona': _0x2a2215[_0x45d69d(0xa2e)] || _0x45d69d(0x63d), 'memory': _0x3dc486 + _0x319cbc + _0x371d63 + _0x3f518e + _0x54ef58 }; } })), _0x4b4e2d = 0x5, _0x13885b = 0xc, _0x456d06 = _0x5bb063(0xb23)[_0x5bb063(0x4ca)](), _0x347a60 = { 'instruction': (_0x5bb063(0xb33) + (_0x3c1b5a['name'] || '群聊') + _0x5bb063(0x925) + (_0x5d0db9[_0x5bb063(0x382)] || '用户') + '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20' + _0x4b4e2d + _0x5bb063(0x213) + _0x13885b + '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕' + (_0x5d0db9[_0x5bb063(0x382)] || '用户') + _0x5bb063(0x502) + _0x21d1d2 + '\x20\x0a' + _0x382c5b + '\x0a' + _0x5cebbe + _0x5bb063(0x92e) + _0x319861 + '\x0a')[_0x5bb063(0x4ca)](), 'personas': _0x27e0a3, 'mentioned': _0x3c6544 ? { 'id': _0x3c6544['id'], 'name': _0x3c6544[_0x5bb063(0x382)] } : null, 'stickerList': _0x2524af }, _0x2fb931 = { 'type': _0x5bb063(0xa56), 'properties': { 'events': { 'type': _0x5bb063(0x810), 'items': { 'type': 'object', 'required': [_0x5bb063(0x105), _0x5bb063(0x366)], 'properties': { 'senderId': { 'type': _0x5bb063(0xf4) }, 'kind': { 'type': _0x5bb063(0xf4), 'enum': [_0x5bb063(0x993), _0x5bb063(0xae0), _0x5bb063(0x42f)] }, 'content': { 'type': 'string' }, 'sticker': { 'type': _0x5bb063(0xf4) }, 'songName': { 'type': 'string' }, 'artist': { 'type': 'string' } } } } }, 'required': [_0x5bb063(0x1d2)] }, _0x20a7b4 = [{ 'role': 'system', 'content': _0x456d06 }]; for (const _0x1faddc of _0x1d93cf) { const _0x48d585 = _0x1faddc['role'] === 'ai' || _0x1faddc[_0x5bb063(0x84c)] === _0x5bb063(0x78b) ? _0x5bb063(0x78b) : _0x5bb063(0x32c); let _0x36ab8a = { 'role': _0x48d585, 'content': _0x1faddc[_0x5bb063(0x313)] }, _0x2f0819 = !!_0x1faddc[_0x5bb063(0x313)], _0x49535d = null; if (_0x1faddc[_0x5bb063(0x9bd)]) _0x49535d = _0x1faddc[_0x5bb063(0x9bd)]; else { if (_0x1faddc[_0x5bb063(0x6b9)]) try { if (_0x5bb063(0x553) === 'FgwHH') { const _0x232183 = await _0x47b504(_0x1faddc[_0x5bb063(0x6b9)]); if (_0x232183) _0x49535d = await _0x50ddb8(_0x232183); } else { const _0x5f3c53 = _0x5c5218[_0x5bb063(0x27a)]['find'](_0x285463 => _0x285463[_0x5bb063(0x671)] && _0x285463[_0x5bb063(0x671)][_0x5bb063(0x644)]); _0x5f3c53 && (_0x5f3c53['activeListenSession'] = null, _0x2d7f8f(), _0x515f5f(_0x5bb063(0x633)), _0x47e7ee(), _0x18457a[_0x5bb063(0x4ad)][_0x5bb063(0x713)]('show'), _0x4ca00d(() => _0x53cdab[_0x5bb063(0x937)][_0x5bb063(0x8a4)] = 'none', 0x12c)); } } catch (_0x596f1a) { if ('lJwBs' === 'BkeYP') return _0x29d85e['characters'][_0x5bb063(0x6f0)](_0x54c388 => _0x54c388['id'] === _0xbb2df4); else console['error']('准备群聊API数据时，读取图片失败:', _0x596f1a); } } _0x49535d && (_0x36ab8a['image'] = _0x49535d, _0x2f0819 = !![]); if (_0x2f0819) _0x20a7b4[_0x5bb063(0x967)](_0x36ab8a); } _0x20a7b4[_0x5bb063(0x967)]({ 'role': _0x5bb063(0x32c), 'content': '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a' + JSON[_0x5bb063(0x56e)](_0x2fb931) + '\x0a\x0aINPUT:\x0a' + JSON[_0x5bb063(0x56e)](_0x347a60) }); try { if (_0x5bb063(0x6ea) !== _0x5bb063(0xb83)) { const _0x512390 = await _0x63fdee(_0x20a7b4, { 'json': !![] }); if (!_0x512390) return null; let _0x48dac7 = _0x512390[_0x5bb063(0x4ca)](); const _0x2676df = _0x48dac7[_0x5bb063(0xd2)](/```json([\s\S]*?)```/i); if (_0x2676df) _0x48dac7 = _0x2676df[0x1]['trim'](); _0x48dac7 = _0xfdedc7(_0x48dac7); let _0x2aafb9 = null; try { _0x2aafb9 = JSON[_0x5bb063(0x6e7)](_0x48dac7); } catch (_0x2d7e74) { console['error'](_0x5bb063(0x58f), _0x2d7e74), console[_0x5bb063(0x5e3)](_0x5bb063(0x7d1), _0x48dac7); } if (!_0x2aafb9 || !Array[_0x5bb063(0x9a1)](_0x2aafb9[_0x5bb063(0x1d2)])) return null; return _0x2aafb9 = _0x9d7cc6(_0x2aafb9, _0x54c883, _0x2524af), _0x2aafb9[_0x5bb063(0x1d2)] = _0x2aafb9[_0x5bb063(0x1d2)]['slice'](0x0, _0x13885b), _0x2aafb9[_0x5bb063(0x1d2)]['length'] ? _0x2aafb9 : null; } else { const _0x3ba96e = (_0x472068 - _0x832dc8) / (0x3e8 * 0x3c); _0x1ded00 += _0x5bb063(0x823); } } catch (_0x5c125e) { if (_0x5bb063(0x8bf) !== _0x5bb063(0x8ff)) return _0x5c125e[_0x5bb063(0x382)] !== _0x5bb063(0x2bc) && console[_0x5bb063(0x5e3)](_0x5bb063(0x651), _0x5c125e), null; else { _0x14d917('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } } } else _0x7c7b75(_0x5bb063(0x898) + _0xb2afc8[_0x5bb063(0x99)]); } function _0x2848ff() { const _0x2763e3 = _0xe59ed1, _0x11673d = document[_0x2763e3(0x7ef)](_0x2763e3(0x7d5)); _0x11673d[_0x2763e3(0x252)] = ''; if (_0x3cf4de[_0x2763e3(0xa3d)][_0x2763e3(0x30c)] === 0x0) { if ('TdoEt' !== _0x2763e3(0x167)) _0x34848e[_0x2763e3(0x5e3)](_0x2763e3(0x733), _0x16a08e); else { _0x11673d[_0x2763e3(0x252)] = _0x2763e3(0xa8b); return; } } _0x3cf4de[_0x2763e3(0xa3d)][_0x2763e3(0x8cf)](_0x56d5ff => { const _0x50a9b2 = _0x2763e3; if (_0x50a9b2(0x48d) === _0x50a9b2(0x48d)) { const _0x1ec86c = _0x3cf4de[_0x50a9b2(0x3ec)][_0x50a9b2(0x6f0)](_0x6f26a1 => _0x6f26a1['id'] === _0x56d5ff[_0x50a9b2(0x2c4)]) || { 'name': _0x50a9b2(0x875) }, _0x24d1ea = document['createElement']('div'); _0x24d1ea[_0x50a9b2(0x199)] = _0x50a9b2(0x88d), _0x24d1ea[_0x50a9b2(0x361)]['id'] = _0x56d5ff['id'], _0x24d1ea[_0x50a9b2(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x56d5ff[_0x50a9b2(0x382)] + _0x50a9b2(0xb69) + _0x1ec86c[_0x50a9b2(0x382)] + _0x50a9b2(0x2cc) + _0x56d5ff[_0x50a9b2(0x4c3)][_0x50a9b2(0x30c)] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x24d1ea[_0x50a9b2(0x25c)](_0x50a9b2(0x2c5), () => _0x3e016b(_0x56d5ff['id'])), _0x11673d[_0x50a9b2(0x8fe)](_0x24d1ea); } else _0xcfd5bc(_0x50a9b2(0x9f2), _0x50a9b2(0xa19)); }); } function _0x13c9bb(_0x4a846a = null) { const _0x13f2ee = _0xe59ed1; if (_0x13f2ee(0x5fe) === 'iXzTP') { const _0x1be865 = document[_0x13f2ee(0x7ef)](_0x13f2ee(0x32d)), _0xd9e6b1 = document[_0x13f2ee(0x7ef)]('friend-circle-edit-bind-user'), _0xefbb98 = document['getElementById']('friend-circle-member-selection'), _0x56ffaa = document['getElementById'](_0x13f2ee(0x1a7)), _0x4b5b6e = document[_0x13f2ee(0x7ef)](_0x13f2ee(0x563)), _0x57f39c = document[_0x13f2ee(0x7ef)]('delete-friend-circle-button'); _0x336ace(_0x13f2ee(0x66f)), _0xefbb98[_0x13f2ee(0x252)] = '', _0x3cf4de['characters'][_0x13f2ee(0x8cf)](_0x4e2ce4 => { const _0x570aa4 = _0x13f2ee, _0x346316 = document['createElement'](_0x570aa4(0xb0b)); _0x346316[_0x570aa4(0x199)] = 'member-selection-item', _0x346316[_0x570aa4(0x252)] = _0x570aa4(0x597) + _0x4e2ce4['id'] + _0x570aa4(0x57e) + _0x4e2ce4['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x4e2ce4['avatar'] || _0x574d9b) + _0x570aa4(0x9b2) + _0x4e2ce4['id'] + _0x570aa4(0x97b) + _0x4e2ce4[_0x570aa4(0x382)] + _0x570aa4(0xb37), _0xefbb98['appendChild'](_0x346316); }); if (_0x4a846a) { if (_0x13f2ee(0x4fe) === _0x13f2ee(0x4fe)) { const _0x357898 = _0x3cf4de[_0x13f2ee(0xa3d)][_0x13f2ee(0x6f0)](_0x31fe23 => _0x31fe23['id'] === _0x4a846a); if (!_0x357898) return; _0x56ffaa[_0x13f2ee(0x5f8)] = _0x13f2ee(0xb49), _0x4b5b6e['value'] = _0x357898['id'], _0x1be865[_0x13f2ee(0x35c)] = _0x357898[_0x13f2ee(0x382)], _0xd9e6b1['value'] = _0x357898['boundUserProfileId'], _0x57f39c['style'][_0x13f2ee(0x8a4)] = _0x13f2ee(0x540), _0x357898[_0x13f2ee(0x4c3)][_0x13f2ee(0x8cf)](_0x3a8205 => { const _0x18c2a6 = _0x13f2ee; if (_0x18c2a6(0x82f) === _0x18c2a6(0x82f)) { const _0x49ff2b = _0xefbb98[_0x18c2a6(0x5cb)](_0x18c2a6(0x5d0) + _0x3a8205); if (_0x49ff2b) _0x49ff2b[_0x18c2a6(0x5f3)] = !![]; } else throw new _0x64746(_0x18c2a6(0x67c)); }); } else _0x233ef5['type'] = 'text'; } else _0x56ffaa[_0x13f2ee(0x5f8)] = _0x13f2ee(0x921), _0x4b5b6e[_0x13f2ee(0x35c)] = '', _0x1be865[_0x13f2ee(0x35c)] = _0x13f2ee(0x6dd) + (_0x3cf4de['friendCircles'][_0x13f2ee(0x30c)] + 0x1), _0xd9e6b1['value'] = _0x3cf4de[_0x13f2ee(0xa37)], _0x57f39c[_0x13f2ee(0x937)][_0x13f2ee(0x8a4)] = _0x13f2ee(0xacf); _0x459e0a(_0x13f2ee(0xa47), _0x13f2ee(0x150)); } else _0x580e3d(), _0x5adde2['click'](); } function _0x591e3f() { const _0x18ab09 = _0xe59ed1, _0x2f1531 = document[_0x18ab09(0x7ef)]('editing-friend-circle-id')[_0x18ab09(0x35c)], _0x524279 = document[_0x18ab09(0x7ef)]('friend-circle-edit-name')[_0x18ab09(0x35c)][_0x18ab09(0x4ca)](), _0x54b23e = document[_0x18ab09(0x7ef)](_0x18ab09(0x66f))[_0x18ab09(0x35c)], _0x3a4be2 = Array[_0x18ab09(0x60a)](document[_0x18ab09(0x53f)]('#friend-circle-member-selection\x20input:checked'))['map'](_0x138d0c => _0x138d0c[_0x18ab09(0x361)]['id']); if (!_0x524279) { _0x5bf34b(_0x18ab09(0x1e4)); return; } if (_0x3a4be2[_0x18ab09(0x30c)] === 0x0) { if (_0x18ab09(0x8d1) === _0x18ab09(0x8d1)) { _0x5bf34b(_0x18ab09(0xb2e)); return; } else _0x4d72be[_0x18ab09(0x5e3)]('生成动态失败:', _0x18d36e), _0x28633a(_0x18ab09(0xae4) + _0x255dcd['message']); } if (_0x2f1531) { if (_0x18ab09(0x705) === _0x18ab09(0x33c)) _0x16a71a[_0x18ab09(0x7ef)](_0x18ab09(0x844))[_0x18ab09(0x937)][_0x18ab09(0x8a4)] = 'none', _0x539910(_0x18ab09(0x859), 'snoopPhone'); else { const _0x1e0db5 = _0x3cf4de[_0x18ab09(0xa3d)][_0x18ab09(0x6f0)](_0x2841bd => _0x2841bd['id'] === _0x2f1531); _0x1e0db5 && (_0x1e0db5[_0x18ab09(0x382)] = _0x524279, _0x1e0db5['boundUserProfileId'] = _0x54b23e, _0x1e0db5[_0x18ab09(0x4c3)] = _0x3a4be2); } } else { if (_0x18ab09(0x8fc) !== _0x18ab09(0x8fc)) _0x42ccc9(), _0x2cecde(_0x18ab09(0x90), 'home'); else { const _0x2c3bd5 = { 'id': _0x18ab09(0x4bb) + Date[_0x18ab09(0x740)](), 'name': _0x524279, 'boundUserProfileId': _0x54b23e, 'memberCharacterIds': _0x3a4be2, 'posts': [] }; _0x3cf4de[_0x18ab09(0xa3d)]['push'](_0x2c3bd5); } } _0x3a3bc1(), _0x5bf34b(_0x18ab09(0x9df)), _0x2848ff(), _0x459e0a(_0x18ab09(0x150), 'friendCircleEdit'); } async function _0x7c80f9() { const _0x52ff64 = _0xe59ed1, _0x1b7838 = document['getElementById'](_0x52ff64(0x563))[_0x52ff64(0x35c)]; if (!_0x1b7838) return; const _0x14679e = await _0x56efd8(_0x52ff64(0xfc)); if (_0x14679e) { if ('RwEMG' === 'hKCli') _0x375dca[_0x52ff64(0x62f)] && _0x35a09d(_0x46c7c4[_0x52ff64(0x62f)]); else { _0x3cf4de[_0x52ff64(0xa3d)] = _0x3cf4de[_0x52ff64(0xa3d)][_0x52ff64(0x3f0)](_0x58b898 => _0x58b898['id'] !== _0x1b7838); if (_0x3cf4de[_0x52ff64(0x62f)] === _0x1b7838) { if (_0x52ff64(0x47d) === _0x52ff64(0x47d)) _0x3cf4de[_0x52ff64(0x62f)] = null; else { const _0x2b80bf = _0x3e6a13 === _0x16004b ? _0x52ff64(0x445) : ''; return '' + _0x2b80bf + _0x363c7b['text']; } } _0x3a3bc1(), _0x5bf34b(_0x52ff64(0x31d)), _0x2848ff(), _0x459e0a('friendCircleList', _0x52ff64(0xa47)); } } } function _0x3e016b(_0x2a7061) { const _0x7baab6 = _0xe59ed1; _0x2f8a96(); const _0x55afcb = _0x3cf4de[_0x7baab6(0xa3d)][_0x7baab6(0x6f0)](_0x54fff4 => _0x54fff4['id'] === _0x2a7061); if (!_0x55afcb) return; _0x3cf4de[_0x7baab6(0x62f)] = _0x2a7061, _0x3a3bc1(), document[_0x7baab6(0x7ef)](_0x7baab6(0x827))[_0x7baab6(0x5f8)] = _0x55afcb[_0x7baab6(0x382)], _0xf4b9c3(), _0x459e0a(_0x7baab6(0x42f), _0x7baab6(0x150)), _0x4ab281(); } function _0x28a586() { const _0x4ca6ba = _0xe59ed1; if (!_0x3cf4de['friendCircles'] || _0x3cf4de[_0x4ca6ba(0xa3d)]['length'] === 0x0) { if ('aBTeo' === 'GgouQ') _0x3a223e(!![]); else { console[_0x4ca6ba(0x5e3)](_0x4ca6ba(0x291)); return; } } const _0x494f11 = _0x3cf4de['friendCircles'][0x0]; if (_0x494f11[_0x4ca6ba(0x4c3)][_0x4ca6ba(0x30c)] < 0x2) { if ('TfEsI' !== _0x4ca6ba(0xadc)) return { 'type': _0x4ca6ba(0x963), 'eventType': _0x587de6[0x1][_0x4ca6ba(0x4ca)](), 'eventDate': _0x1291d7[0x2][_0x4ca6ba(0x4ca)](), 'eventContent': _0xfe3623[0x3][_0x4ca6ba(0x4ca)]() }; else { console[_0x4ca6ba(0x5e3)]('错误：第一个好友圈\x20\x22' + _0x494f11[_0x4ca6ba(0x382)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } } const _0x1e944a = { 'id': 'test_post_' + Date[_0x4ca6ba(0x740)](), 'authorType': 'character', 'authorId': _0x494f11['memberCharacterIds'][0x0], 'content': _0x4ca6ba(0xad), 'timestamp': Date[_0x4ca6ba(0x740)](), 'likes': [_0x494f11[_0x4ca6ba(0x4c3)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x4ca6ba(0x740)](), 'authorId': _0x494f11[_0x4ca6ba(0x4c3)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x494f11['posts'][_0x4ca6ba(0x967)](_0x1e944a), _0x3a3bc1(), console[_0x4ca6ba(0x76a)]('成功向好友圈\x20\x22' + _0x494f11[_0x4ca6ba(0x382)] + _0x4ca6ba(0x7b2)), _0x5bf34b(_0x4ca6ba(0x9d4)); } window[_0xe59ed1(0x23e)] = _0x28a586; function _0x502589(_0x404d04) { const _0x3afabc = _0xe59ed1; return _0x3cf4de[_0x3afabc(0x3ec)][_0x3afabc(0x6f0)](_0x44e87b => _0x44e87b['id'] === _0x404d04); } function _0x2a565e(_0x5dd66e, _0x5d4ac7 = _0xe59ed1(0x393)) { const _0x51659d = _0xe59ed1; if (_0x51659d(0x206) === _0x51659d(0x160)) { const _0x148feb = _0xab8f6c[_0x51659d(0x6e7)](_0x546afc), _0x3c329a = { ..._0xe2f342 }, _0x998aec = { ..._0x3c329a, ..._0x148feb }; _0x998aec[_0x51659d(0x84a)] = { ..._0x3c329a[_0x51659d(0x84a)], ..._0x148feb['preferences'] || {} }, _0x998aec[_0x51659d(0x71a)] = { ..._0x3c329a[_0x51659d(0x71a)], ..._0x148feb[_0x51659d(0x71a)] || {} }, _0x507ed6[_0x51659d(0x7a2)](_0x3c3804, _0x998aec); } else { const _0x2fb1da = document[_0x51659d(0x7ef)](_0x51659d(0xa6e)); let _0x27cae4 = document[_0x51659d(0x7ef)](_0x51659d(0x139)); if (_0x5dd66e) !_0x27cae4 && ('ukyuu' !== _0x51659d(0x520) ? _0x515fc7(_0x51659d(0x902)) : (_0x27cae4 = document[_0x51659d(0xb60)](_0x51659d(0xb0b)), _0x27cae4['id'] = _0x51659d(0x139), _0x2fb1da[_0x51659d(0x8fe)](_0x27cae4))), _0x27cae4[_0x51659d(0x252)] = _0x51659d(0x7f3) + _0x5d4ac7 + '</span>', _0x27cae4[_0x51659d(0x937)][_0x51659d(0x8a4)] = _0x51659d(0x98c); else { if (_0x51659d(0x228) === _0x51659d(0xce)) { const _0x2b4057 = _0x2cd1ce(_0x12b24e['id']); if (_0x2b4057 && _0x2b4057[_0x51659d(0x30c)] > 0x0) { const _0xbbe5e0 = _0x2b4057[_0x2b4057[_0x51659d(0x30c)] - 0x1]; (!_0x5148dd || _0xbbe5e0['timestamp'] > _0x5a9f3d[_0x51659d(0x554)]) && (_0x3c0ecc = _0xbbe5e0); } } else _0x27cae4 && (_0x27cae4[_0x51659d(0x937)][_0x51659d(0x8a4)] = _0x51659d(0xacf)); } } } async function _0xf71a94() { const _0x4a2fc6 = _0xe59ed1, _0x349da2 = _0x3cf4de['friendCircles'][_0x4a2fc6(0x6f0)](_0x544f8a => _0x544f8a['id'] === _0x3cf4de[_0x4a2fc6(0x62f)]); if (!_0x349da2 || _0x3cf4de[_0x4a2fc6(0x2c7)]) return; _0x2a565e(!![], _0x4a2fc6(0x954)), await new Promise(_0x36ef6f => setTimeout(_0x36ef6f, 0x32)), _0x3cf4de['isGenerating'] = !![]; try { if (_0x4a2fc6(0x409) !== _0x4a2fc6(0xa7a)) { let _0x8b5a1c = Date[_0x4a2fc6(0x740)](); _0x349da2[_0x4a2fc6(0x516)] && _0x349da2['posts'][_0x4a2fc6(0x30c)] > 0x0 && (_0x8b5a1c = Math[_0x4a2fc6(0x58b)](..._0x349da2[_0x4a2fc6(0x516)][_0x4a2fc6(0x48a)](_0x254740 => _0x254740['timestamp']))); const _0x1f5408 = await _0x67cb05(_0x349da2); if (!_0x1f5408 || _0x1f5408['length'] === 0x0) { if (_0x4a2fc6(0x98e) !== _0x4a2fc6(0x98e)) { const _0x249387 = _0x26de63[_0x4a2fc6(0x7ef)]('meeting-list-container'); _0x249387[_0x4a2fc6(0x252)] = ''; const _0x46576a = _0x3b12af[_0x4a2fc6(0xad3)]['filter'](_0xd908d7 => _0x1d2f6d[_0x4a2fc6(0x27a)][_0x4a2fc6(0xa9f)](_0x5beeee => _0x5beeee['type'] === _0x4a2fc6(0x86c) && _0x5beeee['participantIds'][_0x4a2fc6(0x5cc)](_0xd908d7['id']))); if (_0x46576a['length'] === 0x0) { _0x249387['innerHTML'] = _0x4a2fc6(0x6ec); return; } _0x46576a[_0x4a2fc6(0x8cf)](_0x5f37e1 => { const _0x1a8b26 = _0x4a2fc6, _0x5a1c0e = _0x48175d['createElement']('li'); _0x5a1c0e[_0x1a8b26(0x199)] = _0x1a8b26(0x956), _0x5a1c0e['dataset'][_0x1a8b26(0x8f3)] = _0x5f37e1['id'], _0x5a1c0e[_0x1a8b26(0x252)] = _0x1a8b26(0x1a6) + (_0x5f37e1[_0x1a8b26(0x3f1)] || _0x5b0d9d) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x5f37e1[_0x1a8b26(0x382)] + _0x1a8b26(0x34b) + (_0x5f37e1[_0x1a8b26(0x43f)] || '私聊') + _0x1a8b26(0x29a), _0x5a1c0e[_0x1a8b26(0x25c)](_0x1a8b26(0x2c5), () => { _0x3b5e17(_0x5f37e1['id']); }), _0x249387['appendChild'](_0x5a1c0e); }); } else { _0x5bf34b(_0x4a2fc6(0x246)); return; } } const _0x251b89 = _0x1f5408['map'](async (_0x138287, _0x11fd86) => { const _0x488de9 = _0x4a2fc6; if (_0x488de9(0x483) !== _0x488de9(0x483)) _0x280f9c[_0x488de9(0x7ef)](_0x488de9(0x100))[_0x488de9(0x2c5)](); else { _0x2a565e(!![], _0x488de9(0xb81) + (_0x11fd86 + 0x1) + '\x20/\x20' + _0x1f5408[_0x488de9(0x30c)] + _0x488de9(0xa85)); const _0x3d9d30 = _0x8b5a1c + (_0x11fd86 + 0x1) * 0x3c * 0x3e8, _0x491464 = { 'id': _0x488de9(0x819) + _0x138287[_0x488de9(0x89c)] + '_' + _0x3d9d30, 'authorType': _0x488de9(0xb7e), 'authorId': _0x138287[_0x488de9(0x89c)], 'content': _0x138287[_0x488de9(0x7a0)], 'timestamp': _0x3d9d30, 'likes': _0x138287[_0x488de9(0x5a3)] || [], 'comments': (_0x138287[_0x488de9(0x3cf)] || [])[_0x488de9(0x48a)]((_0x5d6c18, _0x414656) => ({ 'commentId': 'c_' + _0x3d9d30 + '_' + _0x414656, 'authorId': _0x5d6c18[_0x488de9(0x89c)], 'content': _0x5d6c18[_0x488de9(0x313)] })) }; if (_0x138287[_0x488de9(0x68d)] === _0x488de9(0x42f) && _0x138287[_0x488de9(0x6fd)] && _0x138287['artist']) try { const _0x599a4a = await _0x5de43b(_0x138287[_0x488de9(0x6fd)], _0x138287['artist']); _0x491464['type'] = _0x488de9(0x42f), _0x491464[_0x488de9(0x6fd)] = _0x138287[_0x488de9(0x6fd)], _0x491464[_0x488de9(0xb08)] = _0x138287[_0x488de9(0xb08)], _0x491464[_0x488de9(0xa08)] = _0x599a4a[_0x488de9(0xa99)], _0x491464['playableUrl'] = _0x599a4a[_0x488de9(0x98a)]; } catch (_0x181042) { console['error'](_0x488de9(0x911), _0x181042), _0x491464[_0x488de9(0x76d)] = _0x488de9(0x993); } else _0x488de9(0x56c) !== _0x488de9(0x56c) ? (_0xd6cf1d = { 'characterId': _0x4e0d76[_0x488de9(0x253)], 'entries': [] }, _0x436f96['diaries'][_0x488de9(0x967)](_0x488a14)) : _0x491464[_0x488de9(0x76d)] = _0x488de9(0x993); return _0x491464; } }), _0x954fab = await Promise[_0x4a2fc6(0x6d5)](_0x251b89); _0x349da2[_0x4a2fc6(0x516)][_0x4a2fc6(0x967)](..._0x954fab), _0x3a3bc1(); } else _0x3db153 = _0x4a2fc6(0x212); } catch (_0x2f92e2) { console[_0x4a2fc6(0x5e3)](_0x4a2fc6(0x488), _0x2f92e2), _0x5bf34b(_0x4a2fc6(0xae4) + _0x2f92e2['message']); } finally { if (_0x4a2fc6(0x107) === 'PcraJ') _0xf4b9c3(), _0x2a565e(![]), _0x3cf4de[_0x4a2fc6(0x2c7)] = ![]; else { const _0x23dff9 = _0xeff093[_0x4a2fc6(0x179)]['dataset'][_0x4a2fc6(0x5bd)], _0x22339f = _0x34722b['accountingLedger'][_0x23dff9]; _0x22339f && _0xdf63a1(_0x22339f, _0x23dff9); } } } async function _0x67cb05(_0x3dfdc9) { const _0x304407 = _0xe59ed1; if ('AnhsK' !== _0x304407(0x509)) _0x88cea6(), _0x39d21d(_0x304407(0x9f), _0x304407(0x1bf)); else { const _0x1224f3 = _0x3dfdc9['memberCharacterIds'][_0x304407(0x48a)](_0x3295b9 => _0xd97907(_0x3295b9))[_0x304407(0x3f0)](Boolean); if (_0x1224f3[_0x304407(0x30c)] === 0x0) return null; const _0xcb3582 = _0x43ae40(), _0x16edc9 = _0x502589(_0x3dfdc9[_0x304407(0x2c4)]) || _0x3cf4de[_0x304407(0x3ec)][0x0], _0x3cfe0e = _0x16edc9 ? _0x304407(0x4d1) + _0x16edc9[_0x304407(0x382)] + _0x304407(0x6db) + (_0x16edc9['persona'] || '无') + '\x0a' : '', _0x200c69 = _0x1224f3[_0x304407(0x48a)](_0xe2819 => { const _0x29f7c8 = _0x304407, { omniText: _0x87f704 } = _0x7987c1(_0xe2819['id'], null), _0x21750b = _0x5c4d13(_0xe2819['id']), _0x170b56 = _0xe2819[_0x29f7c8(0x91e)] && _0xe2819[_0x29f7c8(0x91e)][_0x29f7c8(0x30c)] > 0x0 ? _0x29f7c8(0x14b) + _0xe2819[_0x29f7c8(0x382)] + _0x29f7c8(0xacc) + _0xe2819[_0x29f7c8(0x91e)][_0x29f7c8(0x48a)](_0x17481a => _0x3cf4de[_0x29f7c8(0xb88)]['find'](_0x17332a => _0x17332a['id'] === _0x17481a))[_0x29f7c8(0x3f0)](Boolean)['map'](_0x3c135e => '\x0a##\x20条目:\x20' + _0x3c135e[_0x29f7c8(0x382)] + '\x0a' + _0x3c135e[_0x29f7c8(0x313)])[_0x29f7c8(0x863)]('') : ''; return _0x29f7c8(0x98d) + _0xe2819['name'] + _0x29f7c8(0x853) + _0xe2819['id'] + _0x29f7c8(0xa6c) + _0xe2819['persona'] + _0x29f7c8(0x7dc) + _0x87f704 + '\x0a' + _0x21750b + '\x0a' + _0x170b56; })[_0x304407(0x863)]('\x0a\x0a'), _0x210a44 = Math['floor'](Math[_0x304407(0x758)]() * 0x3) + 0x2, _0x4455fe = _0x304407(0x39f) + _0x210a44 + _0x304407(0x566) + _0x16edc9['name'] + _0x304407(0xab4) + _0x200c69 + '\x0a' + _0x3cfe0e + _0x304407(0x7ba) + _0xcb3582 + _0x304407(0x801) + _0x210a44 + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0x210a44 + '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。ID只用于\x20\x22authorId\x22\x20和\x20\x22likes\x22\x20这种结构化字段。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x162233 = [{ 'role': _0x304407(0x24d), 'content': _0x4455fe }, { 'role': _0x304407(0x32c), 'content': _0x304407(0x7f1) }]; _0x162233[_0x304407(0x967)]({ 'role': _0x304407(0x32c), 'content': '请根据以上所有规则，生成\x20' + _0x210a44 + _0x304407(0x76c) }); try { const _0x3bdcc7 = await _0x63fdee(_0x162233, { 'json': !![] }), _0x40f622 = _0x3bdcc7[_0x304407(0xd2)](/(\[[\s\S]*\])/); if (!_0x40f622) throw new Error('AI未能返回有效的JSON数组格式。'); const _0x3edc42 = _0x40f622[0x1], _0x11bc05 = JSON['parse'](_0x3edc42); if (!Array['isArray'](_0x11bc05)) throw new Error('AI返回的不是一个数组。'); return _0x11bc05; } catch (_0x1d4337) { if (_0x304407(0x2ab) !== _0x304407(0x2ab)) { if (!_0x507b3f[_0x304407(0xa0e)]) return; _0x287dce[_0x304407(0x5f8)] = _0x304407(0x4a3) + _0x468226[_0x304407(0xa0e)]['sender'], _0x256b97[_0x304407(0x5f8)] = _0x4fdcc4[_0x304407(0xa0e)][_0x304407(0x313)], _0x55d4ed['style'][_0x304407(0x8a4)] = 'block'; } else return console[_0x304407(0x5e3)]('批量生成动态失败:\x20', _0x1d4337), console[_0x304407(0x5e3)](_0x304407(0x7bf), _0x1d4337[_0x304407(0x470)] || _0x304407(0x135)), null; } } } async function _0x40ff0c() { const _0x5d7772 = _0xe59ed1, _0x4cadbd = _0x3cf4de[_0x5d7772(0xa3d)][_0x5d7772(0x6f0)](_0x272abc => _0x272abc['id'] === _0x3cf4de['activeFriendCircleId']); if (!_0x4cadbd) return; const _0x34bbe7 = await _0x56efd8(_0x5d7772(0x75c) + _0x4cadbd[_0x5d7772(0x382)] + _0x5d7772(0x95e)); _0x34bbe7 && (_0x5d7772(0x64c) === _0x5d7772(0x64c) ? (_0x4cadbd[_0x5d7772(0x516)] = [], _0x3a3bc1(), _0xf4b9c3(), _0x5bf34b(_0x5d7772(0xae))) : _0x407315(_0x58583c, _0x2dffbe)); } function _0xf4b9c3() { const _0x8f2c04 = _0xe59ed1, _0x2f330e = document[_0x8f2c04(0x7ef)](_0x8f2c04(0x28d)), _0x3ebf81 = _0x3cf4de[_0x8f2c04(0xa3d)]['find'](_0x586fd7 => _0x586fd7['id'] === _0x3cf4de[_0x8f2c04(0x62f)]); if (!_0x3ebf81) { _0x2f330e[_0x8f2c04(0x252)] = _0x8f2c04(0xb98); return; } if (!_0x3ebf81['posts'] || _0x3ebf81[_0x8f2c04(0x516)][_0x8f2c04(0x30c)] === 0x0) { _0x2f330e[_0x8f2c04(0x252)] = _0x8f2c04(0x87e); return; } _0x2f330e['innerHTML'] = ''; const _0xe1732c = [..._0x3ebf81[_0x8f2c04(0x516)]]['sort']((_0x30517e, _0x45b205) => _0x45b205[_0x8f2c04(0x554)] - _0x30517e[_0x8f2c04(0x554)]); _0xe1732c[_0x8f2c04(0x8cf)](_0x1e1914 => { const _0x23698e = _0x8f2c04; if (_0x23698e(0x978) === 'kIzXX') _0x2f08e1 = '0x' + _0x5294dd[0x1] + _0xa4f20f[0x1], _0x3dc109 = '0x' + _0x5521dc[0x2] + _0x30287d[0x2], _0x7113d8 = '0x' + _0x56cee1[0x3] + _0x99e874[0x3]; else { const _0x1e7af2 = document[_0x23698e(0xb60)](_0x23698e(0xb0b)); _0x1e7af2[_0x23698e(0x199)] = _0x23698e(0xb2d); let _0x3a74e5 = '未知', _0x50834a = _0x574d9b; if (_0x1e1914[_0x23698e(0x42b)] === 'user') { const _0x8a8c7f = _0x502589(_0x1e1914[_0x23698e(0x89c)]); _0x8a8c7f && (_0x3a74e5 = _0x8a8c7f[_0x23698e(0x382)], _0x50834a = _0x8a8c7f[_0x23698e(0x3f1)]); } else { const _0x5a013b = _0xd97907(_0x1e1914['authorId']); _0x5a013b && (_0x3a74e5 = _0x5a013b['name'], _0x50834a = _0x5a013b['avatar']); } const _0x8f6b99 = _0x23698e(0x6ee) + _0x50834a + _0x23698e(0x3b7) + _0x3a74e5 + _0x23698e(0xa31), _0xbf694c = _0x23698e(0x7a8) + _0x1e1914[_0x23698e(0x313)] + _0x23698e(0x3dd); let _0x56bad4 = ''; if (_0x1e1914['image'] || _0x1e1914['imageId']) { const _0x26aeb7 = _0x23698e(0x9d0) + _0x1e1914['id']; _0x56bad4 = _0x23698e(0xbd) + _0x26aeb7 + _0x23698e(0x1f5), setTimeout(() => { const _0x448ddc = _0x23698e, _0x4aea8b = document[_0x448ddc(0x7ef)](_0x26aeb7); if (!_0x4aea8b) return; if (_0x1e1914[_0x448ddc(0x9bd)]) _0x4aea8b[_0x448ddc(0x557)] = _0x1e1914[_0x448ddc(0x9bd)]; else _0x1e1914[_0x448ddc(0x6b9)] && _0x47b504(_0x1e1914[_0x448ddc(0x6b9)])['then'](_0x310b26 => { const _0x4c4b53 = _0x448ddc; if (_0x310b26) { const _0x50d128 = URL[_0x4c4b53(0x9e4)](_0x310b26); _0x4aea8b[_0x4c4b53(0x557)] = _0x50d128, _0x4aea8b['onload'] = () => URL[_0x4c4b53(0x3c9)](_0x50d128); } }); }, 0x0); } let _0x5f1204 = ''; _0x1e1914[_0x23698e(0x76d)] === _0x23698e(0x42f) && _0x1e1914['songName'] && (_0x23698e(0x1b4) !== 'dtRUz' ? _0x5f1204 = _0x23698e(0x1a3) + _0x1e1914['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x1e1914[_0x23698e(0xa08)] || _0x574d9b) + _0x23698e(0x88e) + _0x1e1914['songName'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x1e1914[_0x23698e(0xb08)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>' + (_0x1e1914[_0x23698e(0x4c7)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20' : _0x11363a[_0x23698e(0x6a5)](_0x45fe01 => { _0x45fe01 ? _0x57d40e(_0x45fe01) : _0x102a40(new _0x31a694('Canvas\x20to\x20Blob\x20conversion\x20failed.')); }, _0x4b585f, _0x3f105a)); const _0x2d746b = _0x23698e(0x7e4) + new Date(_0x1e1914['timestamp'])[_0x23698e(0x118)](_0x23698e(0x77e)) + _0x23698e(0x4e1); let _0x40171b = ''; if (_0x1e1914[_0x23698e(0x5a3)] && _0x1e1914['likes'][_0x23698e(0x30c)] > 0x0 || _0x1e1914[_0x23698e(0x3cf)] && _0x1e1914[_0x23698e(0x3cf)][_0x23698e(0x30c)] > 0x0) { if (_0x23698e(0x8ce) === _0x23698e(0x8ce)) { let _0x505ced = ''; if (_0x1e1914['likes'] && _0x1e1914['likes'][_0x23698e(0x30c)] > 0x0) { const _0x164464 = _0x1e1914[_0x23698e(0x5a3)][_0x23698e(0x48a)](_0x5608d3 => _0xd97907(_0x5608d3)?.[_0x23698e(0x382)] || '未知')[_0x23698e(0x863)]('、'), _0x298d73 = _0x23698e(0x8cb); _0x505ced = _0x23698e(0x169) + _0x298d73 + '\x20' + _0x164464 + _0x23698e(0x4e1); } let _0xe7badf = ''; if (_0x1e1914[_0x23698e(0x3cf)] && _0x1e1914[_0x23698e(0x3cf)][_0x23698e(0x30c)] > 0x0) { const _0x3fa080 = _0x1e1914[_0x23698e(0x3cf)][_0x23698e(0x48a)](_0x353b59 => { const _0x204814 = _0x23698e, _0x5818a0 = _0xd97907(_0x353b59[_0x204814(0x89c)])?.[_0x204814(0x382)] || '未知'; return _0x204814(0x5f7) + _0x5818a0 + _0x204814(0x822) + _0x353b59[_0x204814(0x313)] + '</div>'; })[_0x23698e(0x863)](''); _0xe7badf = _0x23698e(0x11d) + _0x3fa080 + _0x23698e(0x4e1); } _0x40171b = _0x23698e(0x1ec) + _0x505ced + _0x23698e(0x32b) + _0xe7badf + _0x23698e(0x265); } else { if (_0x514ccf) { _0x1696f5[_0x23698e(0x4ad)][_0x23698e(0x6c7)](_0x23698e(0x244)); const _0xa930e2 = _0x6253cb[_0x23698e(0x5cb)](_0x23698e(0xa16)); _0x48cb36[_0x23698e(0x4ad)][_0x23698e(0x6c7)](_0x23698e(0x5d1), !!_0xa930e2); } else _0x4662f0(_0x3d5369); } } const _0x428993 = _0x23698e(0x34f) + _0xbf694c + _0x56bad4 + _0x5f1204 + _0x23698e(0x4e1); _0x1e7af2[_0x23698e(0x252)] = _0x8f6b99 + _0x428993 + _0x2d746b + _0x40171b; if (_0x1e1914[_0x23698e(0x76d)] === _0x23698e(0x42f) && _0x1e1914[_0x23698e(0x4c7)]) { const _0x233a57 = _0x1e7af2['querySelector'](_0x23698e(0x9e1)); _0x233a57 && (_0x23698e(0x2cb) === _0x23698e(0x9c4) ? _0x364c7d ? _0x24570f(_0xb6f24a) : _0x31cec3(new _0x2f3ee5(_0x23698e(0x3a1))) : _0x233a57[_0x23698e(0x25c)](_0x23698e(0x2c5), function () { const _0x1667d4 = _0x23698e; if (_0x1667d4(0x77c) === 'jnnfO') _0x546e2d['src'] = _0x342130[_0x1667d4(0x4c7)], _0x435733[_0x1667d4(0x28a)](), _0x5af593['textContent'] = '❚❚'; else { const _0x89a570 = { 'id': _0x1e1914['id'], 'url': _0x1e1914[_0x1667d4(0x4c7)] }; _0x4f135b(this, _0x89a570); } })); } _0x2f330e['appendChild'](_0x1e7af2); } }); } document[_0xe59ed1(0x7ef)](_0xe59ed1(0x31b))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x40ff0c), document[_0xe59ed1(0x7ef)]('refresh-feed-button')[_0xe59ed1(0x25c)]('click', _0xf71a94), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x481))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a('home', _0xe59ed1(0x150))), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x2ac))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x13c9bb()), document[_0xe59ed1(0x7ef)]('back-to-circle-list-from-edit')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a(_0xe59ed1(0x150), _0xe59ed1(0xa47))), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x890))['addEventListener'](_0xe59ed1(0x2c5), _0x591e3f), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x78d))['addEventListener']('click', _0x7c80f9), document[_0xe59ed1(0x7ef)]('back-to-circle-list-from-feed')['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x239c9f = _0xe59ed1; if ('kQXkD' !== _0x239c9f(0x471)) _0x2848ff(), _0x459e0a(_0x239c9f(0x150), _0x239c9f(0x42f)); else { _0x5e7d09(_0x239c9f(0x263)); return; } }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x845))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x38f58e = _0xe59ed1; _0x3cf4de[_0x38f58e(0x62f)] && ('DzEtr' !== _0x38f58e(0x976) ? _0x13c9bb(_0x3cf4de[_0x38f58e(0x62f)]) : (_0x585887[_0x38f58e(0x76a)](_0x38f58e(0x18e)), _0x502fcd['indexedDBSnoopData'][_0x38f58e(0x8cf)](_0x5b8f53 => _0x326143['put'](_0x5b8f53)))); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x76f))['addEventListener'](_0xe59ed1(0x2c5), async () => { const _0x435be3 = _0xe59ed1; if ('DxwMv' === _0x435be3(0x975)) { const _0x552e5e = _0x3cf4de[_0x435be3(0xa3d)]['find'](_0x47a644 => _0x47a644['id'] === _0x3cf4de['activeFriendCircleId']); if (!_0x552e5e || _0x3cf4de['isGenerating']) return; const _0x4738a9 = _0x552e5e[_0x435be3(0x2c4)], _0x34f583 = _0x3cf4de[_0x435be3(0x3ec)][_0x435be3(0x6f0)](_0x3ed30d => _0x3ed30d['id'] === _0x4738a9); if (!_0x34f583) { _0x5bf34b(_0x435be3(0x992)); return; } const _0x306629 = document[_0x435be3(0x7ef)](_0x435be3(0x46b))['value'][_0x435be3(0x4ca)](), _0x37b8bd = _0x3cf4de[_0x435be3(0x1a5)]['image'], _0x370fe5 = _0x3cf4de[_0x435be3(0x1a5)][_0x435be3(0x42f)], _0xa345b8 = _0x3cf4de[_0x435be3(0x1a5)]['imageId']; if (!_0x306629 && !_0x37b8bd && !_0x370fe5) { if ('PXlGJ' === _0x435be3(0x658)) { _0x5bf34b(_0x435be3(0x8e6)); return; } else _0xa09bdd(_0x384f73), _0x1400d5[_0x435be3(0x23b)](_0x435be3(0xa8e), _0x3530d1), _0x41c459[_0x435be3(0x23b)](_0x435be3(0x299), _0x2b6df0), _0xd5944c['removeEventListener'](_0x435be3(0x947), _0x4cbb49), _0x20d71b[_0x435be3(0x23b)](_0x435be3(0x300), _0x1c80fb); } const _0x7771ab = { 'id': _0x435be3(0x1aa) + Date[_0x435be3(0x740)](), 'authorType': 'user', 'authorId': _0x34f583['id'], 'content': _0x306629, 'timestamp': Date[_0x435be3(0x740)](), 'likes': [], 'comments': [] }; if (_0xa345b8) _0x7771ab[_0x435be3(0x6b9)] = _0xa345b8; else _0x37b8bd && (_0x7771ab[_0x435be3(0x9bd)] = _0x37b8bd); _0x370fe5 ? (_0x7771ab[_0x435be3(0x76d)] = 'music', Object[_0x435be3(0x7a2)](_0x7771ab, _0x370fe5)) : _0x7771ab[_0x435be3(0x76d)] = 'text', _0x552e5e[_0x435be3(0x516)]['push'](_0x7771ab), _0x3a3bc1(), _0xf4b9c3(), document['getElementById'](_0x435be3(0x46b))['value'] = '', _0x3cf4de[_0x435be3(0x1a5)][_0x435be3(0x9bd)] = null, _0x3cf4de[_0x435be3(0x1a5)][_0x435be3(0x42f)] = null, _0x3cf4de[_0x435be3(0x1a5)][_0x435be3(0x6b9)] = null, _0x4cdd31(), _0x19cae4(_0x7771ab); } else _0x1957a3(), _0x7b315c(_0x435be3(0x6be), _0x435be3(0x2b5)); }), document[_0xe59ed1(0x7ef)]('user-post-image-button')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x114c83 = _0xe59ed1; document['getElementById'](_0x114c83(0x100))[_0x114c83(0x2c5)](); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x100))[_0xe59ed1(0x25c)](_0xe59ed1(0x9cb), async _0x230a1c => { const _0x10f5bf = _0xe59ed1; if (_0x10f5bf(0x142) !== _0x10f5bf(0x876)) { const _0x4117ef = _0x230a1c['target'][_0x10f5bf(0x27c)][0x0]; if (!_0x4117ef) return; try { const _0x39fdd4 = await _0x250c4e(_0x4117ef, 0x320, 0.8, !![]), _0x3c4bfc = _0x10f5bf(0xa92) + Date['now'](); await _0x30635e(_0x3c4bfc, _0x39fdd4), _0x3cf4de['pendingPostAttachments'][_0x10f5bf(0x6b9)] = _0x3c4bfc, _0x3cf4de[_0x10f5bf(0x1a5)][_0x10f5bf(0x9bd)] = null, _0x3cf4de[_0x10f5bf(0x1a5)][_0x10f5bf(0x42f)] = null, _0x4cdd31(); } catch (_0x5e3d9f) { _0x5bf34b(_0x10f5bf(0x3fc) + _0x5e3d9f[_0x10f5bf(0x99)]); } _0x230a1c['target']['value'] = ''; } else { const _0x16845e = _0x31493f[_0x10f5bf(0x35c)]; _0x699932['documentElement'][_0x10f5bf(0x937)][_0x10f5bf(0x529)](_0x10f5bf(0xb12), _0x16845e), _0x181fb0[_0x10f5bf(0x531)](_0x10f5bf(0x296), _0x16845e), _0x3f2db8(); } }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x4bc))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), async () => { const _0x466a8f = _0xe59ed1, _0x53c0e2 = await _0x200407(); if (!_0x53c0e2) return; _0x5bf34b(_0x466a8f(0xb7b)); try { if (_0x466a8f(0xb0e) === 'dxXMi') { const _0xdcde9f = _0x555f57[_0x466a8f(0x103)][_0x466a8f(0x3f0)](_0x23b671 => _0x23b671['type'] === _0x466a8f(0x42f) && _0x23b671[_0x466a8f(0x4c7)])['map'](_0x2fd565 => ({ ..._0x2fd565, 'id': _0x466a8f(0x709) + _0x2fd565[_0x466a8f(0x554)], 'source': 'chat' })); _0x10792b[_0x466a8f(0x967)](..._0xdcde9f); } else { const _0x35b563 = await _0x5de43b(_0x53c0e2[_0x466a8f(0x6fd)], _0x53c0e2[_0x466a8f(0xb08)]); _0x3cf4de[_0x466a8f(0x1a5)]['music'] = { 'songName': _0x53c0e2[_0x466a8f(0x6fd)], 'artist': _0x53c0e2[_0x466a8f(0xb08)], 'coverUrl': _0x35b563[_0x466a8f(0xa99)], 'playableUrl': _0x35b563[_0x466a8f(0x98a)] }, _0x3cf4de[_0x466a8f(0x1a5)][_0x466a8f(0x9bd)] = null, _0x4cdd31(); } } catch (_0x33cc7c) { _0x466a8f(0xa5e) === _0x466a8f(0xa5e) ? _0x5bf34b('音乐搜索失败:\x20' + _0x33cc7c[_0x466a8f(0x99)]) : _0xab8c9b(![]); } }); function _0x3b6e39() { const _0x786b99 = _0xe59ed1, _0x29fda6 = new Date(), _0x1d1dcb = document[_0x786b99(0x7ef)](_0x786b99(0x493)), _0x51c03c = document[_0x786b99(0x7ef)](_0x786b99(0x98f)); if (_0x1d1dcb && _0x51c03c) { const _0x33ce02 = String(_0x29fda6[_0x786b99(0x669)]())[_0x786b99(0x5b5)](0x2, '0'), _0x59d6ab = String(_0x29fda6[_0x786b99(0x33a)]())['padStart'](0x2, '0'); _0x1d1dcb[_0x786b99(0x5f8)] = _0x33ce02 + ':' + _0x59d6ab; const _0x317452 = _0x29fda6[_0x786b99(0x677)]() + 0x1, _0x2c23eb = _0x29fda6['getDate'](), _0x36133c = [_0x786b99(0x59b), '星期一', _0x786b99(0x38e), _0x786b99(0x21f), _0x786b99(0x24c), _0x786b99(0x656), '星期六'][_0x29fda6[_0x786b99(0xa72)]()]; _0x51c03c[_0x786b99(0x5f8)] = _0x317452 + '月' + _0x2c23eb + '日\x20' + _0x36133c; } } function _0xcefae8(_0xe80138) { const _0x1e1873 = _0xe59ed1; if (!_0xe80138) return ''; const _0x59af9d = new Date(_0xe80138), _0x353341 = String(_0x59af9d[_0x1e1873(0x669)]())[_0x1e1873(0x5b5)](0x2, '0'), _0xdc92d7 = String(_0x59af9d[_0x1e1873(0x33a)]())[_0x1e1873(0x5b5)](0x2, '0'); return _0x353341 + ':' + _0xdc92d7; } function _0x43ae40() { const _0x10bb68 = _0xe59ed1, _0x51a67c = _0x3cf4de[_0x10bb68(0xa3d)][_0x10bb68(0x6f0)](_0x141280 => _0x141280['id'] === _0x3cf4de[_0x10bb68(0x62f)]), _0x582b26 = _0x51a67c ? _0x51a67c[_0x10bb68(0x516)] : []; if (!_0x582b26 || _0x582b26[_0x10bb68(0x30c)] === 0x0) { if (_0x10bb68(0x6ef) !== _0x10bb68(0x6ef)) _0x44cc1f(); else return ''; } const _0x5251bb = _0x582b26[_0x10bb68(0x6cd)](0x0, 0x5), _0x5a87fc = _0x5251bb[_0x10bb68(0x48a)](_0x3589ee => { const _0x5f4372 = _0x10bb68, _0x45adba = _0xd97907(_0x3589ee[_0x5f4372(0x89c)]) || { 'name': '未知' }; let _0x58c21a = _0x5f4372(0x122) + _0x45adba[_0x5f4372(0x382)] + _0x5f4372(0x81b) + (_0x3589ee[_0x5f4372(0x797)] || _0x3589ee[_0x5f4372(0x313)]) + '”'; return _0x3589ee[_0x5f4372(0x76d)] === _0x5f4372(0x42f) && (_0x58c21a += '\x20(分享了歌曲:\x20' + _0x3589ee[_0x5f4372(0x6fd)] + _0x5f4372(0x9f1) + _0x3589ee['artist'] + ')'), _0x58c21a; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0x5a87fc['join']('\x0a'); } function _0x5c4d13(_0x4c9749) { const _0x114213 = _0xe59ed1, _0x204919 = _0x3cf4de[_0x114213(0x3ec)][_0x114213(0x6f0)](_0xca79af => _0xca79af['id'] === _0x3cf4de[_0x114213(0xa37)]) || { 'name': '你' }, _0x5179ae = _0x3cf4de[_0x114213(0x865)][_0x114213(0x6f0)](_0x48a496 => _0x48a496['characterId'] === _0x4c9749); if (!_0x5179ae || !_0x5179ae[_0x114213(0x2fc)] || _0x5179ae[_0x114213(0x2fc)]['length'] === 0x0) return ''; const _0x5a2abe = _0x5179ae['entries'][_0x114213(0x6cd)](-0x8), _0x4d4413 = _0x5a2abe[_0x114213(0x48a)](_0x42531f => { const _0x5294b6 = _0x114213; if (_0x5294b6(0x417) === _0x5294b6(0x9d1)) { const _0x19c7cb = _0x428c4d(_0x1cf48d[_0x5294b6(0xac6)]); _0x19c7cb && (_0x19c7cb['spriteTransform'] = _0x259759, _0x20bfc1(_0x5c6d32[_0x5294b6(0xac6)], _0x5294b6(0x9e5))); } else { const _0x54d89d = _0x42531f[_0x5294b6(0x1b8)] === _0x5294b6(0x32c) ? _0x204919[_0x5294b6(0x382)] : _0xd97907(_0x42531f['author'])[_0x5294b6(0x382)]; return '-\x20[' + new Date(_0x42531f['timestamp'])[_0x5294b6(0xa15)]() + ']\x20' + _0x54d89d + _0x5294b6(0x49c) + _0x42531f[_0x5294b6(0x313)]; } })[_0x114213(0x863)]('\x0a'); return _0x114213(0x5f9) + _0x204919[_0x114213(0x382)] + _0x114213(0x70e) + _0x4d4413; } function _0x27ee74() { const _0x5c4526 = _0xe59ed1, _0x1563ad = document[_0x5c4526(0x7ef)]('music-widget-card'), _0x53cb49 = _0x3cf4de[_0x5c4526(0x84a)][_0x5c4526(0x225)]; _0x53cb49 ? 'xAmfB' === _0x5c4526(0x7c8) ? _0x3cd239[_0x5c4526(0xaef)] = ![] : (_0x1563ad[_0x5c4526(0x937)][_0x5c4526(0x6aa)] = _0x5c4526(0x891) + _0x53cb49 + ')', _0x1563ad[_0x5c4526(0x937)][_0x5c4526(0x143)] = _0x5c4526(0xa99), _0x1563ad[_0x5c4526(0x937)][_0x5c4526(0x913)] = 'center', _0x1563ad[_0x5c4526(0x937)][_0x5c4526(0x501)] = 'white', _0x1563ad['querySelectorAll'](_0x5c4526(0x1c3))[_0x5c4526(0x8cf)](_0x28e41e => { const _0x58c8f1 = _0x5c4526; _0x28e41e[_0x58c8f1(0x937)][_0x58c8f1(0x586)] = _0x58c8f1(0x90c); })) : (_0x1563ad[_0x5c4526(0x937)][_0x5c4526(0x6aa)] = '', _0x1563ad[_0x5c4526(0x937)]['color'] = '', _0x1563ad[_0x5c4526(0x53f)](_0x5c4526(0x1c3))[_0x5c4526(0x8cf)](_0x1b8f4b => { const _0x537369 = _0x5c4526; _0x1b8f4b[_0x537369(0x937)][_0x537369(0x586)] = ''; })); } const _0x19d8ba = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x91f)), _0x3198cd = document['getElementById'](_0xe59ed1(0xace)); _0x19d8ba[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0xda768d = _0xe59ed1; _0x2848ff(), _0x459e0a(_0xda768d(0x150), _0xda768d(0x1bf)); }), _0x3198cd[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x15390e = _0xe59ed1; _0x21419e(), _0x459e0a('meetingList', _0x15390e(0x1bf)); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x990))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x279081 = _0xe59ed1; 'UaLAW' !== _0x279081(0x3ab) ? (_0x17bc32[_0x279081(0x5e3)]('加载\x20' + _0x26ae9e + _0x279081(0x7e0), _0x15cad6), _0x539b3a[_0x279081(0x252)] = _0x279081(0x854) + _0x2ca9da[_0x279081(0x99)] + _0x279081(0x3dd)) : _0x459e0a(_0x279081(0x1bf), _0x279081(0x90)); }), document['getElementById'](_0xe59ed1(0x217))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x32fa62 = _0xe59ed1; if (_0x32fa62(0x474) !== _0x32fa62(0x474)) { if (_0xc9fd3[_0x32fa62(0x13b)][_0x32fa62(0xb09)](_0x32fa62(0x434))) return; const _0x1b98e7 = _0x3cb6eb['getElementById'](_0x32fa62(0x661)); _0x1b98e7 && _0x1b98e7['click'](); } else { if (_0x34852c) clearInterval(_0x34852c); _0x34852c = null, _0x3cf4de[_0x32fa62(0x4a5)] = [], _0x3cf4de[_0x32fa62(0xac6)] = null, document['getElementById'](_0x32fa62(0xa53))[_0x32fa62(0x937)][_0x32fa62(0x8a4)] = _0x32fa62(0xacf), _0x3cf4de[_0x32fa62(0xa9a)] = null, _0x3a3bc1(), _0x459e0a(_0x32fa62(0x90), 'meetingView'); } }); const _0x457fe3 = document[_0xe59ed1(0x7ef)]('meeting-message-input'), _0x748f1b = document['getElementById'](_0xe59ed1(0x903)); _0x748f1b[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x24788e = _0xe59ed1; if (_0x24788e(0x8e1) === 'dgwDg') { if (_0x3671a5[_0x24788e(0x203)]) _0x20528e[_0x24788e(0x967)]('[' + _0x315ab5(_0x2a8eac) + ']\x20[sticker:' + (_0x12ef1f[_0x24788e(0x313)]?.[_0x24788e(0xd2)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x3bedd7[_0x24788e(0x9bd)]) { const _0xfa4f40 = _0x298626[_0x24788e(0x313)] ? '\x20' + _0x53b985[_0x24788e(0x313)] : ''; _0x23ba23['push']('[' + _0x739be8(_0xe76e1a) + ']\x20[image]' + _0xfa4f40); } else _0x1475c0['content'] && _0x21b198[_0x24788e(0x967)]('[' + _0x115548(_0x4cb205) + ']\x20' + _0x2cacde[_0x24788e(0x313)]); } } else { const _0x39c3da = _0x457fe3['value'][_0x24788e(0x4ca)](); _0x39c3da && (_0x3449f3(_0x39c3da), _0x457fe3[_0x24788e(0x35c)] = '', setTimeout(_0xe6ae60, 0x64)); } }); function _0x4f135b(_0x3b0d0c, _0x1ae6e1) { const _0x2ca2fa = _0xe59ed1, _0x4e1570 = document[_0x2ca2fa(0x7ef)](_0x2ca2fa(0xb4)), _0x30f61d = _0x3cf4de[_0x2ca2fa(0xaab)]['find'](_0x26e573 => _0x26e573['id'] === _0x1ae6e1['id']); if (!_0x30f61d) { console['error'](_0x2ca2fa(0xac0), _0x1ae6e1['id']); return; } const _0x5732ec = _0x4e1570['src']['includes'](_0x30f61d[_0x2ca2fa(0x4c7)]) && !_0x4e1570['paused']; _0x5732ec ? _0x4e1570[_0x2ca2fa(0x5d8)]() : _0x2ca2fa(0x492) === 'jVlXt' ? _0x507ec8++ : (_0x3ec13b = { 'title': _0x30f61d[_0x2ca2fa(0x6fd)], 'artist': _0x30f61d[_0x2ca2fa(0xb08)], 'cover': _0x30f61d[_0x2ca2fa(0xa08)] || (_0x30f61d[_0x2ca2fa(0x6b3)] ? _0x2ca2fa(0x389) + _0x30f61d[_0x2ca2fa(0x6b3)] : _0x574d9b), 'isFromLibrary': !![] }, _0x4e1570[_0x2ca2fa(0x557)] = _0x30f61d[_0x2ca2fa(0x4c7)], _0x4e1570[_0x2ca2fa(0x28a)](), _0x3cf4de[_0x2ca2fa(0x627)] = _0x3cf4de['musicPlaylist'][_0x2ca2fa(0xaa2)](_0x5534b0 => _0x5534b0['id'] === _0x1ae6e1['id']), _0x41c7b0()); } const _0x209aaf = document['getElementById'](_0xe59ed1(0x506)); async function _0x5e8d51(_0x3c9cf5) { const _0x254ba7 = _0xe59ed1; if (!_0x3c9cf5 || !_0x3c9cf5[_0x254ba7(0xb05)]('http')) return ![]; return new Promise(_0x290fcd => { const _0x380b15 = _0x254ba7; if (_0x380b15(0x3af) === _0x380b15(0xb91)) _0x3d1058('欢迎！请先创建一个角色开始聊天。'), _0x20557d(() => { const _0x738146 = _0x380b15; _0x5090b0(_0x738146(0x2b9), _0x738146(0x1bf)), _0x53c339(() => _0x54add2(), 0x64); }, 0x6a4); else { const _0x27bb23 = document[_0x380b15(0xb60)]('audio'); _0x27bb23[_0x380b15(0x557)] = _0x3c9cf5; const _0x317079 = setTimeout(() => { _0x133994(), _0x290fcd(![]); }, 0xbb8), _0x133994 = () => { const _0x3ea2a1 = _0x380b15; if (_0x3ea2a1(0x549) !== _0x3ea2a1(0x549)) return { 'type': _0x3ea2a1(0x993), 'content': _0x274992 }; else clearTimeout(_0x317079), _0x27bb23[_0x3ea2a1(0x23b)](_0x3ea2a1(0x9e6), _0x77baf), _0x27bb23[_0x3ea2a1(0x23b)](_0x3ea2a1(0x5e3), _0x309a78), _0x27bb23[_0x3ea2a1(0x557)] = '', _0x27bb23['remove'](); }, _0x77baf = () => { const _0x2aaae5 = _0x380b15; if (_0x2aaae5(0x95d) === _0x2aaae5(0x941)) { const _0x27a4db = _0x4b1f28[_0x2aaae5(0x6b6)](_0x2aaae5(0x524) + _0x3e0801), _0x1fcd67 = _0x1c1054[_0x2aaae5(0x6e7)](_0x27a4db || '[]'); return _0x20fa2d[_0x2aaae5(0x9a1)](_0x1fcd67) ? _0x1fcd67 : []; } else _0x133994(), _0x290fcd(!![]); }, _0x309a78 = () => { _0x133994(), _0x290fcd(![]); }; _0x27bb23[_0x380b15(0x25c)]('canplaythrough', _0x77baf), _0x27bb23['addEventListener'](_0x380b15(0x5e3), _0x309a78); } }); } async function _0x5de43b(_0x38e27b, _0xa494c9) { const _0x35e310 = _0xe59ed1, _0xa809b6 = [_0x35e310(0x25f), _0x35e310(0x601)]; for (const _0x5b2b11 of _0xa809b6) { if (_0x35e310(0x6e2) !== _0x35e310(0x6e2)) _0x25320c['type'] = _0x35e310(0x993); else try { if ('LHQbp' === _0x35e310(0x3c4)) { const _0x3315ea = _0x35e310(0x480) + _0x5b2b11 + _0x35e310(0xc6) + encodeURIComponent(_0x38e27b) + '-' + encodeURIComponent(_0xa494c9), _0x88ac52 = await fetch(_0x3315ea), _0x5e399f = await _0x88ac52['json'](); if (_0x5e399f['code'] !== 0xc8 || !_0x5e399f[_0x35e310(0x3e1)] || _0x5e399f[_0x35e310(0x3e1)]['length'] === 0x0) continue; const _0x4d4948 = _0x5e399f[_0x35e310(0x3e1)][_0x35e310(0x6cd)](0x0, 0x5); for (const _0x549672 of _0x4d4948) { const _0x5399e5 = 'https://api.vkeys.cn/v2/music/' + _0x5b2b11 + _0x35e310(0x8f9) + _0x549672['id'], _0xcd52a4 = await fetch(_0x5399e5), _0x323c21 = await _0xcd52a4[_0x35e310(0x6dc)](), _0xb42e9f = _0x323c21[_0x35e310(0x3e1)]?.[_0x35e310(0x98a)]; if (await _0x5e8d51(_0xb42e9f)) return { 'url': _0xb42e9f, 'cover': _0x549672[_0x35e310(0xa99)], 'source': _0x5b2b11 }; } } else { _0x11f750['activeChatId'] = null, _0x563d66(), _0xb9ea0e(![]), _0x57cb2e['getElementById'](_0x35e310(0xa4b))[_0x35e310(0x937)]['backgroundImage'] = ''; return; } } catch (_0x5a5b3b) { _0x35e310(0x1ff) !== _0x35e310(0x1ff) ? (_0x306f18['error']('Failed\x20to\x20save\x20state\x20to\x20localStorage:', _0x222327), _0x44b498('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。')) : console[_0x35e310(0x5e3)]('Error\x20fetching\x20from\x20' + _0x5b2b11 + ':', _0x5a5b3b); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x402f4d() { const _0x11013b = _0xe59ed1; if ('jEonu' === 'sYZuc') _0x182337[_0x11013b(0x5e3)](_0x11013b(0x91a), _0x55eab8), _0x393b87(_0x11013b(0xb40)); else { const _0x251967 = document[_0x11013b(0x7ef)](_0x11013b(0x29f)), _0xf4af8a = document[_0x11013b(0x72e)], _0x5c29b9 = document['getElementById'](_0x11013b(0xb70)); if (!_0x251967 || !_0x5c29b9) return; const _0xed0529 = localStorage[_0x11013b(0x6b6)](_0x11013b(0xb28)) || '1'; _0xf4af8a['style']['setProperty'](_0x11013b(0xae1), _0xed0529), _0x251967['value'] = _0xed0529, _0x251967['addEventListener']('input', () => { const _0x4b3cfa = _0x11013b, _0x11f2d8 = _0x251967['value']; _0xf4af8a['style'][_0x4b3cfa(0x529)](_0x4b3cfa(0xae1), _0x11f2d8), localStorage[_0x4b3cfa(0x531)](_0x4b3cfa(0xb28), _0x11f2d8); }), _0x5c29b9[_0x11013b(0x25c)](_0x11013b(0x2c5), () => { const _0x4186ba = _0x11013b; if ('SpYir' !== 'SpYir') _0x304a2a[_0x4186ba(0x695)] = !![]; else { const _0x39f727 = '1'; _0x251967[_0x4186ba(0x35c)] = _0x39f727, _0xf4af8a[_0x4186ba(0x937)][_0x4186ba(0x529)](_0x4186ba(0xae1), _0x39f727), localStorage[_0x4186ba(0x531)]('uiScale', _0x39f727); } }); } } function _0x509423(_0x37c4e9) { const _0x5565bf = _0xe59ed1; try { if (_0x5565bf(0x421) !== _0x5565bf(0x77f)) { const _0x3c5bdc = JSON['parse'](localStorage[_0x5565bf(0x6b6)](_0x5565bf(0x37e)) || '{}'), _0x5567cb = { ..._0x3c5bdc, ..._0x37c4e9 }; localStorage[_0x5565bf(0x531)]('badgeState', JSON['stringify'](_0x5567cb)); } else _0x55107b[_0x5565bf(0x937)]['backgroundImage'] = ''; } catch (_0x53c63f) { if (_0x5565bf(0x9b7) === 'BRfLs') console[_0x5565bf(0x5e3)]('保存徽章状态失败', _0x53c63f); else { const _0x4aaa62 = _0x615b78(_0xb80dcb[_0x5565bf(0xac6)]); if (!_0x4aaa62) return; const _0x2a6af7 = _0x415ad5(_0x585e16[_0x5565bf(0x7ef)](_0x5565bf(0x1f2))['value']), _0x2d70e1 = _0x1a66cf(_0x2a5dca[_0x5565bf(0x7ef)]('sprite-slider-y')[_0x5565bf(0x35c)]), _0x394291 = _0x5c6338(_0x4a0edf['getElementById'](_0x5565bf(0x6a1))[_0x5565bf(0x35c)]) / 0x64; _0x4aaa62[_0x5565bf(0xa82)] = { 'x': _0x2a6af7, 'y': _0x2d70e1, 'scale': _0x394291 }, _0x310e42(), _0x28f4ee(_0x5565bf(0x765)), _0x32ee38(!![]); } } } async function _0x3ffcbf() { const _0x5746f1 = _0xe59ed1, _0x2d7423 = document[_0x5746f1(0x7ef)](_0x5746f1(0xacd)), _0x7baee6 = document[_0x5746f1(0x7ef)]('badge-image'); try { let _0x3828bd = await _0x47b504(_0x5746f1(0x6c6)); if (!_0x3828bd) { const _0x3a2697 = JSON['parse'](localStorage[_0x5746f1(0x6b6)](_0x5746f1(0x37e)) || '{}'); _0x3a2697[_0x5746f1(0x9bd)] && ('rzjxY' === _0x5746f1(0x176) ? _0x455509[_0x5746f1(0x340)] = _0x53774a[_0x5746f1(0x60d)] : (_0x3828bd = await _0x151f54(_0x3a2697[_0x5746f1(0x9bd)]), await _0x30635e(_0x5746f1(0x6c6), _0x3828bd))); } _0x3828bd ? 'QiCTG' === _0x5746f1(0x381) ? _0x3e2c08('错误:\x20' + _0x3cdb54[_0x5746f1(0x99)]) : (_0x7baee6[_0x5746f1(0x557)] = URL[_0x5746f1(0x9e4)](_0x3828bd), _0x7baee6[_0x5746f1(0x937)][_0x5746f1(0x8a4)] = _0x5746f1(0x540), _0x2d7423['style'][_0x5746f1(0x986)] = 'none') : _0x5746f1(0x512) === _0x5746f1(0x512) ? (_0x7baee6[_0x5746f1(0x937)][_0x5746f1(0x8a4)] = 'none', _0x2d7423['style']['border'] = _0x5746f1(0x4de)) : _0x30b29f[_0x5746f1(0x981)] = { 'response_mime_type': _0x5746f1(0x8dc) }, _0x2d7423[_0x5746f1(0x937)][_0x5746f1(0x8a4)] = 'block'; } catch (_0x18e3b9) { _0x5746f1(0x25d) !== _0x5746f1(0x25d) ? _0x2d048c = _0x1c5e77[_0x5746f1(0x3ec)][_0x5746f1(0x6f0)](_0x2aa351 => _0x2aa351['id'] === _0x3591ae[_0x5746f1(0xa37)]) || _0x950df5[_0x5746f1(0x3ec)][0x0] : console[_0x5746f1(0x5e3)](_0x5746f1(0x175), _0x18e3b9); } } async function _0x30cb49() { const _0x35041c = _0xe59ed1, _0x4d14d2 = document[_0x35041c(0x7ef)](_0x35041c(0x764)), _0x5319b1 = document[_0x35041c(0x7ef)](_0x35041c(0x9cd)), _0xb6bcfd = document[_0x35041c(0x7ef)](_0x35041c(0x4a8)), _0x31480c = document[_0x35041c(0x7ef)](_0x35041c(0x46e)); try { let _0x665f00 = await _0x47b504(_0x35041c(0x62e)); _0x665f00 ? (_0x5319b1[_0x35041c(0x557)] = URL[_0x35041c(0x9e4)](_0x665f00), _0x5319b1[_0x35041c(0x937)]['display'] = _0x35041c(0x540), _0x4d14d2[_0x35041c(0x937)][_0x35041c(0x986)] = _0x35041c(0xacf), _0x4d14d2['style'][_0x35041c(0x32a)] = _0x35041c(0x463)) : (_0x5319b1[_0x35041c(0x937)]['display'] = _0x35041c(0xacf), _0x4d14d2[_0x35041c(0x937)]['border'] = _0x35041c(0x4de), _0x4d14d2[_0x35041c(0x937)]['background'] = _0x35041c(0x3fb)); _0x4d14d2['style'][_0x35041c(0x8a4)] = _0x35041c(0x540); let _0x4a6868 = await _0x47b504('widget_card_2'); if (_0x4a6868) { if (_0x35041c(0xf9) !== _0x35041c(0xae7)) _0x31480c['src'] = URL[_0x35041c(0x9e4)](_0x4a6868), _0x31480c[_0x35041c(0x937)]['display'] = _0x35041c(0x540), _0xb6bcfd[_0x35041c(0x937)]['border'] = 'none', _0xb6bcfd[_0x35041c(0x937)][_0x35041c(0x32a)] = _0x35041c(0x463); else { const _0xaa4da2 = _0x1b5e60[_0x35041c(0x3a3)][_0x52e75b], _0x1aef9b = _0xaa4da2['categorizedExpenses'][_0x35041c(0x3f9)]((_0x5a96ee, _0x1370f1) => _0x5a96ee + (_0x1370f1[_0x35041c(0x359)] || 0x0), 0x0); _0x260fbe += _0x35041c(0x9e0) + _0xfe1ce9 + _0x35041c(0x39c) + _0x538723 + _0x35041c(0xdf) + _0x1aef9b[_0x35041c(0x196)](0x2) + _0x35041c(0x687); } } else _0x31480c[_0x35041c(0x937)]['display'] = _0x35041c(0xacf), _0xb6bcfd['style']['border'] = '2px\x20dashed\x20var(--border-color)', _0xb6bcfd[_0x35041c(0x937)][_0x35041c(0x32a)] = _0x35041c(0x3fb); _0xb6bcfd[_0x35041c(0x937)][_0x35041c(0x8a4)] = 'block'; } catch (_0x4ea966) { if (_0x35041c(0x966) !== _0x35041c(0x966)) { const _0x764372 = _0x529817[_0x35041c(0x5a3)]['map'](_0x40d826 => _0x3bf551(_0x40d826)?.[_0x35041c(0x382)] || '未知')[_0x35041c(0x863)]('、'), _0xec9ea3 = _0x35041c(0x8cb); _0x404ae2 = _0x35041c(0x169) + _0xec9ea3 + '\x20' + _0x764372 + _0x35041c(0x4e1); } else console[_0x35041c(0x5e3)](_0x35041c(0x9ea), _0x4ea966); } } async function _0x30cb49() { const _0x11326b = _0xe59ed1, _0x1dad0a = document[_0x11326b(0x7ef)](_0x11326b(0x764)), _0x5c8b49 = document['getElementById'](_0x11326b(0x9cd)); try { if (_0x11326b(0x643) === _0x11326b(0x643)) { let _0x19f0e6 = await _0x47b504(_0x11326b(0x62e)); if (!_0x19f0e6) { if (_0x11326b(0xa57) === _0x11326b(0x780)) { const _0x1acfa6 = _0x576c66[_0x11326b(0xd2)](_0x345f70); if (_0x1acfa6) { const _0x3bc4c1 = _0x1c08ee(_0x1acfa6[0x1], 0xa), _0x2e0c98 = _0x1740d6(_0x1acfa6[0x2], 0xa), _0x1c9076 = _0x3865ec(_0x1acfa6[0x3], 0xa) * (_0x1acfa6[0x3][_0x11326b(0x30c)] === 0x2 ? 0xa : 0x1), _0x147153 = _0x3bc4c1 * 0x3c + _0x2e0c98 + _0x1c9076 / 0x3e8, _0x1c8e97 = _0xc8f543[_0x11326b(0xb53)](_0x526f0f, '')[_0x11326b(0x4ca)](); _0x1c8e97 && _0x232b99[_0x11326b(0x967)]({ 'time': _0x147153, 'text': _0x1c8e97 }); } } else { const _0x469e4f = JSON[_0x11326b(0x6e7)](localStorage['getItem'](_0x11326b(0x839)) || '{}'); _0x469e4f['image'] && (console[_0x11326b(0x76a)](_0x11326b(0xb44)), _0x19f0e6 = await _0x151f54(_0x469e4f[_0x11326b(0x9bd)]), await _0x30635e(_0x11326b(0x62e), _0x19f0e6)); } } _0x19f0e6 ? (_0x5c8b49[_0x11326b(0x557)] = URL[_0x11326b(0x9e4)](_0x19f0e6), _0x1dad0a['style'][_0x11326b(0x8a4)] = 'block') : _0x11326b(0x929) === _0x11326b(0x929) ? _0x1dad0a[_0x11326b(0x937)][_0x11326b(0x8a4)] = _0x11326b(0xacf) : _0x3fbed2 = _0x744930[_0x11326b(0x6b6)](_0x11326b(0x394)); } else { const _0x3a4a9e = _0x36e031['transaction'](_0x3e52e6, _0x11326b(0x571)), _0x25bddb = _0x3a4a9e[_0x11326b(0x326)](_0x1fda1d), _0x13af32 = _0x25bddb[_0x11326b(0x222)](_0xf198e3); _0x13af32[_0x11326b(0x78f)] = () => _0x1cbf83(_0x13af32[_0x11326b(0xb95)]), _0x13af32[_0x11326b(0x1bb)] = () => _0x1a7f48(_0x13af32[_0x11326b(0x5e3)]); } } catch (_0x437a60) { console[_0x11326b(0x5e3)](_0x11326b(0x9ea), _0x437a60); } try { let _0xd04b11 = await _0x47b504('widget_card_2'); const _0x2821c6 = document[_0x11326b(0x7ef)](_0x11326b(0x46e)), _0x4d1da1 = document[_0x11326b(0x7ef)]('card-widget-2'); _0xd04b11 ? _0x11326b(0x9b4) === 'fopnw' ? _0x24492d[_0x11326b(0x531)](_0xf74f4f, _0x1ffc5a[_0x11326b(0x56e)](_0x1f229f)) : (_0x2821c6[_0x11326b(0x557)] = URL[_0x11326b(0x9e4)](_0xd04b11), _0x4d1da1[_0x11326b(0x937)][_0x11326b(0x8a4)] = _0x11326b(0x540)) : _0x4d1da1['style'][_0x11326b(0x8a4)] = _0x11326b(0xacf); } catch (_0x1b3d32) { console['error'](_0x11326b(0x4b1), _0x1b3d32); } } _0xc4705e[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x13390d = _0xe59ed1; _0x47b9ef(), _0x459e0a(_0x13390d(0x6be), _0x13390d(0x1bf)); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x796))[_0xe59ed1(0x25c)]('click', () => _0x459e0a(_0xe59ed1(0x1bf), _0xe59ed1(0x6be))), document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa94))[_0xe59ed1(0x25c)]('click', () => _0x12318d()), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x20d))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x5b00b4 = _0xe59ed1; _0x5b00b4(0x391) === _0x5b00b4(0xb4f) ? _0x2a29bf[_0x5b00b4(0x4ad)][_0x5b00b4(0x713)](_0x5b00b4(0x258)) : (_0x47b9ef(), _0x459e0a('userProfileList', 'userProfile')); }), document[_0xe59ed1(0x7ef)]('save-user-profile-button')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x3f6828), document['getElementById'](_0xe59ed1(0x924))[_0xe59ed1(0x25c)]('click', _0x283086), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x9b0))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x574957 = _0xe59ed1, _0x5ade7f = document[_0x574957(0x7ef)](_0x574957(0x5c4))[_0x574957(0x35c)]; if (_0x5ade7f) { if (_0x574957(0xad4) === 'XwsGU') _0x3cf4de[_0x574957(0xa37)] = _0x5ade7f, _0x3a3bc1(), _0x5bf34b(_0x574957(0x9c7)), _0x47b9ef(), document[_0x574957(0x7ef)](_0x574957(0x9b0))[_0x574957(0x937)][_0x574957(0x8a4)] = _0x574957(0xacf); else { const _0x5f2014 = _0x3ec356['getElementById'](_0x574957(0x2f8)), _0x541c6d = _0xbeba3['getElementById']('organize-button-container'), _0x90f185 = new _0x2fcd8c(), _0xbbe640 = _0x582fe5['accountingData']['filter'](_0xb492de => new _0xd2fe68(_0xb492de['timestamp'])[_0x574957(0x9fd)]() === _0x90f185['toDateString']()); if (_0xbbe640[_0x574957(0x30c)] === 0x0) { _0x5f2014['innerHTML'] = _0x574957(0x49d), _0x541c6d[_0x574957(0x252)] = ''; return; } _0x5f2014[_0x574957(0x252)] = '', _0xbbe640[_0x574957(0xb11)]((_0x1aac41, _0x2a717c) => _0x2a717c['timestamp'] - _0x1aac41[_0x574957(0x554)])[_0x574957(0x8cf)](_0xa45886 => { const _0x39bdba = _0x574957, _0x32e471 = _0x16a074['createElement'](_0x39bdba(0xb0b)); _0x32e471[_0x39bdba(0x199)] = _0x39bdba(0x7b5), _0x32e471['innerHTML'] = _0x39bdba(0x10e) + _0xa45886['description'] + _0x39bdba(0x919) + _0xa45886[_0x39bdba(0x359)][_0x39bdba(0x196)](0x2) + _0x39bdba(0x616) + _0xa45886['id'] + _0x39bdba(0x5d7), _0x5f2014[_0x39bdba(0x8fe)](_0x32e471); }), _0x541c6d && (_0x541c6d['innerHTML'] = _0x574957(0x50d), _0x8fad48[_0x574957(0x7ef)](_0x574957(0x21c))[_0x574957(0x25c)](_0x574957(0x2c5), _0x456cc8)); } } }); function _0x1af79f(_0x582676) { const _0x39e38e = _0xe59ed1, _0x4c5d46 = _0x3cf4de['chats'][_0x39e38e(0x6f0)](_0x784e6c => _0x784e6c['id'] === _0x582676), _0x38bc0f = _0x4c5d46?.[_0x39e38e(0x2c4)]; let _0x20ea39 = _0x3cf4de[_0x39e38e(0x3ec)]['find'](_0x126e80 => _0x126e80['id'] === _0x38bc0f); return !_0x20ea39 && (_0x20ea39 = _0x3cf4de[_0x39e38e(0x3ec)][_0x39e38e(0x6f0)](_0x417e2d => _0x417e2d['id'] === _0x3cf4de[_0x39e38e(0xa37)]) || _0x3cf4de[_0x39e38e(0x3ec)][0x0]), _0x20ea39 || { 'name': '用户', 'avatar': _0x2e585f, 'persona': '' }; } function _0x336ace(_0x47128b) { const _0x3acdcb = _0xe59ed1; if (_0x3acdcb(0x234) === _0x3acdcb(0x735)) _0xcad82e(), _0x5a08e7[_0x3acdcb(0x103)] = [], _0xfa4546(); else { const _0x134071 = document[_0x3acdcb(0x7ef)](_0x47128b); _0x134071[_0x3acdcb(0x252)] = '', _0x3cf4de['userProfiles'][_0x3acdcb(0x8cf)](_0xaaba9a => { const _0x54aa64 = _0x3acdcb; if ('pNxHv' !== 'DEsqB') { const _0x353c75 = document['createElement']('option'); _0x353c75[_0x54aa64(0x35c)] = _0xaaba9a['id'], _0x353c75[_0x54aa64(0x5f8)] = _0xaaba9a['name'], _0x134071[_0x54aa64(0x8fe)](_0x353c75); } else _0x19232a[_0x54aa64(0x781)] = _0x50bb03['id'], _0x490c25(); }); } } function _0x25c080(_0x10feac) { const _0x1d908b = _0xe59ed1; if (_0x1d908b(0x3f8) !== 'jULYW') { const _0x455612 = _0x59e390(_0x3de01c['authorId']) || { 'name': '未知' }; let _0x48eda5 = _0x1d908b(0x122) + _0x455612[_0x1d908b(0x382)] + _0x1d908b(0x81b) + (_0x376dc2[_0x1d908b(0x797)] || _0xd2bf1c[_0x1d908b(0x313)]) + '”'; return _0x25e62b[_0x1d908b(0x76d)] === _0x1d908b(0x42f) && (_0x48eda5 += _0x1d908b(0x2d3) + _0x4a0acd[_0x1d908b(0x6fd)] + _0x1d908b(0x9f1) + _0x4ba108[_0x1d908b(0xb08)] + ')'), _0x48eda5; } else { const _0x1b4e08 = _0xd97907(_0x10feac), _0x278e4b = document['getElementById'](_0x1d908b(0xa4b)); _0x278e4b[_0x1d908b(0x937)][_0x1d908b(0x6aa)] = ''; let _0x13ff9c = document[_0x1d908b(0x7ef)](_0x1d908b(0x67f) + _0x10feac); if (_0x13ff9c) _0x13ff9c[_0x1d908b(0x252)] = ''; if (!_0x1b4e08) return; _0x1b4e08[_0x1d908b(0x31a)] && ('djtOK' === _0x1d908b(0x787) ? (_0x278e4b[_0x1d908b(0x937)][_0x1d908b(0x6aa)] = _0x1d908b(0x550) + _0x1b4e08['chatWallpaper'] + '\x27)', _0x278e4b[_0x1d908b(0x937)]['backgroundSize'] = _0x1d908b(0xa99), _0x278e4b[_0x1d908b(0x937)][_0x1d908b(0x913)] = _0x1d908b(0x7be)) : _0x41268c += _0x1d908b(0x259)); if (_0x1b4e08[_0x1d908b(0x9d5)]) { if (_0x1d908b(0x12f) !== _0x1d908b(0x12f)) _0x59dc70[_0x1d908b(0x5e3)](_0x1d908b(0x9c9), _0x2bccd5), _0x449ef0('大家好像不知道该怎么回复...'); else { let _0x182ed0 = document['getElementById']('style-' + _0x1b4e08['id']); !_0x182ed0 && (_0x182ed0 = document[_0x1d908b(0xb60)](_0x1d908b(0x937)), _0x182ed0['id'] = _0x1d908b(0x67f) + _0x1b4e08['id'], document[_0x1d908b(0x7a6)][_0x1d908b(0x8fe)](_0x182ed0)); const _0x5c6981 = _0x1b4e08['bubbleCss'], _0x1bcb77 = _0x5c6981[_0x1d908b(0xb53)](/\.bubble\.sent/g, _0x1d908b(0x3aa) + _0x1b4e08['id'] + _0x1d908b(0x69a))['replace'](/\.bubble\.received/g, _0x1d908b(0x3aa) + _0x1b4e08['id'] + _0x1d908b(0xb94)); _0x182ed0[_0x1d908b(0x252)] = _0x1bcb77; } } } } function _0x4cdd31() { const _0x40d49e = _0xe59ed1; if ('uJKCW' !== _0x40d49e(0x45e)) _0x179dd5['classList'][_0x40d49e(0x713)](_0x40d49e(0xfb)); else { const _0x40cd76 = document[_0x40d49e(0x7ef)]('user-post-attachment-preview'); _0x40cd76['innerHTML'] = ''; const _0x2fba96 = _0x3bf446 => { const _0x13708e = _0x40d49e; _0x3cf4de[_0x13708e(0x1a5)][_0x3bf446] = null; if (_0x3bf446 === _0x13708e(0x9bd)) _0x3cf4de['pendingPostAttachments'][_0x13708e(0x6b9)] = null; _0x4cdd31(); }, _0x202590 = _0x3cf4de[_0x40d49e(0x1a5)][_0x40d49e(0x6b9)], _0x431bc4 = _0x3cf4de['pendingPostAttachments'][_0x40d49e(0x42f)]; if (_0x202590) { if (_0x40d49e(0xae5) === _0x40d49e(0xae5)) { const _0x45ac7d = document[_0x40d49e(0xb60)](_0x40d49e(0xb0b)); _0x45ac7d['className'] = _0x40d49e(0x9ee), _0x45ac7d['innerHTML'] = _0x40d49e(0x2f4), _0x45ac7d[_0x40d49e(0x5cb)](_0x40d49e(0x491))['onclick'] = () => _0x2fba96('image'), _0x40cd76['appendChild'](_0x45ac7d), _0x47b504(_0x202590)[_0x40d49e(0x683)](_0x34e373 => { const _0x203271 = _0x40d49e, _0x2246fa = document[_0x203271(0x7ef)](_0x203271(0xb65)); _0x2246fa && _0x34e373 && (_0x2246fa[_0x203271(0x557)] = URL['createObjectURL'](_0x34e373)); }); } else { let _0x15f08b = 0x0, _0xac648b = 0x0, _0x2c3604 = 0x0; if (_0x3cc6e8['length'] == 0x4) _0x15f08b = '0x' + _0x2e84de[0x1] + _0x223dde[0x1], _0xac648b = '0x' + _0x2680f0[0x2] + _0x1b30eb[0x2], _0x2c3604 = '0x' + _0x1e4bca[0x3] + _0x5b51fa[0x3]; else _0x3fa8f8[_0x40d49e(0x30c)] == 0x7 && (_0x15f08b = '0x' + _0xa1416a[0x1] + _0x42d08b[0x2], _0xac648b = '0x' + _0x495f02[0x3] + _0xf5a36c[0x4], _0x2c3604 = '0x' + _0x55092b[0x5] + _0x473af4[0x6]); _0x15f08b /= 0xff, _0xac648b /= 0xff, _0x2c3604 /= 0xff; let _0x5a789d = _0x31e95e['min'](_0x15f08b, _0xac648b, _0x2c3604), _0x459496 = _0x3891f0[_0x40d49e(0x58b)](_0x15f08b, _0xac648b, _0x2c3604), _0x24752f = _0x459496 - _0x5a789d, _0x7fc365 = 0x0, _0x2ba9ce = 0x0, _0x48cd7a = 0x0; if (_0x24752f == 0x0) _0x7fc365 = 0x0; else { if (_0x459496 == _0x15f08b) _0x7fc365 = (_0xac648b - _0x2c3604) / _0x24752f % 0x6; else { if (_0x459496 == _0xac648b) _0x7fc365 = (_0x2c3604 - _0x15f08b) / _0x24752f + 0x2; else _0x7fc365 = (_0x15f08b - _0xac648b) / _0x24752f + 0x4; } } _0x7fc365 = _0x3952ca['round'](_0x7fc365 * 0x3c); if (_0x7fc365 < 0x0) _0x7fc365 += 0x168; return _0x48cd7a = (_0x459496 + _0x5a789d) / 0x2, _0x2ba9ce = _0x24752f == 0x0 ? 0x0 : _0x24752f / (0x1 - _0x3c7307[_0x40d49e(0xb84)](0x2 * _0x48cd7a - 0x1)), _0x2ba9ce = +(_0x2ba9ce * 0x64)['toFixed'](0x1), _0x48cd7a = +(_0x48cd7a * 0x64)[_0x40d49e(0x196)](0x1), { 'h': _0x7fc365, 's': _0x2ba9ce, 'l': _0x48cd7a }; } } if (_0x431bc4) { const _0x5df098 = document[_0x40d49e(0xb60)](_0x40d49e(0xb0b)); _0x5df098[_0x40d49e(0x199)] = _0x40d49e(0x9ee), _0x5df098[_0x40d49e(0x252)] = _0x40d49e(0x3d2) + (_0x431bc4[_0x40d49e(0xa08)] || _0x574d9b) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x431bc4[_0x40d49e(0x6fd)] + _0x40d49e(0x3a5) + _0x431bc4[_0x40d49e(0xb08)] + _0x40d49e(0x166), _0x5df098[_0x40d49e(0x5cb)]('.remove-attachment-btn')[_0x40d49e(0xafa)] = () => _0x2fba96(_0x40d49e(0x42f)), _0x40cd76[_0x40d49e(0x8fe)](_0x5df098); } } } async function _0x19cae4(_0x5d10af) { const _0x353b3a = _0xe59ed1, _0x1b7c05 = _0x3cf4de[_0x353b3a(0xa3d)][_0x353b3a(0x6f0)](_0x5de5fa => _0x5de5fa['id'] === _0x3cf4de[_0x353b3a(0x62f)]); if (!_0x1b7c05) return; _0x2a565e(!![], '大家正在赶来回复...'), _0x3cf4de[_0x353b3a(0x2c7)] = !![]; try { const _0x3ffca0 = _0x1b7c05[_0x353b3a(0x4c3)][_0x353b3a(0x48a)](_0xb9979c => _0xd97907(_0xb9979c))[_0x353b3a(0x3f0)](Boolean), _0x43a393 = _0x43ae40(), _0x4f1232 = _0x3ffca0['map'](_0x3430a0 => { const _0x4833a8 = _0x353b3a; if (_0x4833a8(0x759) !== 'IJBNc') { const _0x4f71c0 = _0x7bda17['currentDate']['getFullYear'](), _0x527f94 = _0x5efb65[_0x4833a8(0x66d)][_0x4833a8(0x677)](); _0x40c6db[_0x4833a8(0x7ef)]('calendar-header-title')[_0x4833a8(0x5f8)] = _0x4f71c0 + '年\x20' + (_0x527f94 + 0x1) + '月', _0x5b91d1(_0x4f71c0, _0x527f94), _0x35e60e(_0x101f36[_0x4833a8(0x5b1)]); } else { const { omniText: _0x54d970 } = _0x7987c1(_0x3430a0['id'], null), _0x41dbf6 = _0x5c4d13(_0x3430a0['id']), _0x5cba74 = _0x3430a0['linkedWorldBookIds'] && _0x3430a0[_0x4833a8(0x91e)][_0x4833a8(0x30c)] > 0x0 ? _0x4833a8(0x14b) + _0x3430a0[_0x4833a8(0x382)] + _0x4833a8(0xacc) + _0x3430a0['linkedWorldBookIds']['map'](_0x2e57e0 => _0x3cf4de[_0x4833a8(0xb88)]['find'](_0x36c7c5 => _0x36c7c5['id'] === _0x2e57e0))[_0x4833a8(0x3f0)](Boolean)[_0x4833a8(0x48a)](_0x35d707 => '\x0a##\x20条目:\x20' + _0x35d707[_0x4833a8(0x382)] + '\x0a' + _0x35d707['content'])[_0x4833a8(0x863)]('') : ''; return '-\x20姓名:\x20' + _0x3430a0[_0x4833a8(0x382)] + _0x4833a8(0x853) + _0x3430a0['id'] + _0x4833a8(0xa6c) + _0x3430a0[_0x4833a8(0xa2e)] + '\x0a\x20\x20相关记忆:\x0a' + _0x54d970 + '\x0a' + _0x41dbf6 + '\x0a' + _0x5cba74; } })[_0x353b3a(0x863)]('\x0a\x0a'), _0x2d8090 = _0x502589(_0x5d10af[_0x353b3a(0x89c)]) || { 'name': '用户' }, _0x458f04 = _0x2d8090[_0x353b3a(0xa2e)] ? _0x353b3a(0x218) + _0x2d8090[_0x353b3a(0x382)] + _0x353b3a(0x6db) + _0x2d8090[_0x353b3a(0xa2e)] + '\x0a' : ''; let _0x39ad1d = null; if (_0x5d10af['image']) _0x39ad1d = _0x5d10af[_0x353b3a(0x9bd)]; else { if (_0x5d10af['imageId']) try { const _0x48a9a3 = await _0x47b504(_0x5d10af[_0x353b3a(0x6b9)]); _0x48a9a3 && (_0x39ad1d = await _0x50ddb8(_0x48a9a3)); } catch (_0x26b86b) { if ('uJilI' === _0x353b3a(0x87b)) console[_0x353b3a(0x5e3)]('在准备动态回复时，读取图片失败:', _0x26b86b); else { _0x3a8af1['pendingPostAttachments'][_0x8ff6d0] = null; if (_0x2721cd === _0x353b3a(0x9bd)) _0x5c6c62[_0x353b3a(0x1a5)]['imageId'] = null; _0x1eda97(); } } } let _0x4ffed0 = _0x2d8090[_0x353b3a(0x382)] + _0x353b3a(0x3de) + _0x5d10af[_0x353b3a(0x313)] + '”'; _0x39ad1d && (_0x4ffed0 += _0x353b3a(0x259)); _0x5d10af['type'] === _0x353b3a(0x42f) && (_0x4ffed0 += _0x353b3a(0x2cd) + _0x5d10af[_0x353b3a(0x6fd)] + _0x353b3a(0x9f1) + _0x5d10af['artist'] + ']'); const _0x2c69db = '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a' + _0x4f1232 + '\x0a\x0a' + _0x458f04 + '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a' + _0x43a393 + '\x0a\x0a#\x20用户的动态\x0a' + _0x4ffed0 + _0x353b3a(0x7aa), _0x298b54 = [{ 'role': 'system', 'content': _0x2c69db }], _0x19f568 = { 'role': _0x353b3a(0x32c), 'content': _0x353b3a(0xa2) }; _0x39ad1d && (_0x19f568[_0x353b3a(0x9bd)] = _0x39ad1d); _0x298b54[_0x353b3a(0x967)](_0x19f568); const _0x192ec7 = await _0x63fdee(_0x298b54, { 'json': !![] }), _0x3aa43b = _0x192ec7[_0x353b3a(0xd2)](/({[\s\S]*})/); if (!_0x3aa43b) throw new Error(_0x353b3a(0xaa3)); const _0x53e4fa = JSON[_0x353b3a(0x6e7)](_0x3aa43b[0x1]), _0x5d9795 = _0x1b7c05[_0x353b3a(0x516)][_0x353b3a(0x6f0)](_0x5c3418 => _0x5c3418['id'] === _0x5d10af['id']); _0x5d9795 && (_0x5d9795[_0x353b3a(0x5a3)] = _0x53e4fa[_0x353b3a(0x5a3)] || [], _0x5d9795['comments'] = (_0x53e4fa[_0x353b3a(0x3cf)] || [])[_0x353b3a(0x48a)]((_0x3a7a70, _0x2d98b2) => ({ ..._0x3a7a70, 'commentId': 'c_' + _0x5d10af[_0x353b3a(0x554)] + '_' + _0x2d98b2 })), _0x3a3bc1(), _0xf4b9c3()); } catch (_0x1029ea) { console['error'](_0x353b3a(0x9c9), _0x1029ea), _0x5bf34b(_0x353b3a(0x840)); } finally { if ('fyvNk' === _0x353b3a(0x6b5)) { const _0x19f920 = _0x32d46a[_0x353b3a(0x7ef)](_0x353b3a(0x9ef)); _0x19f920[_0x353b3a(0x252)] = ''; if (_0x185c7a[_0x353b3a(0x3ec)][_0x353b3a(0x30c)] === 0x0) { _0x19f920[_0x353b3a(0x252)] = _0x353b3a(0x152); return; } _0x1fcfd5[_0x353b3a(0x3ec)]['forEach'](_0x5ed30f => { const _0x2cea58 = _0x353b3a, _0x3adb24 = _0x5eece8['createElement'](_0x2cea58(0xb0b)); _0x3adb24[_0x2cea58(0x199)] = 'world-book-item', _0x3adb24[_0x2cea58(0x361)]['id'] = _0x5ed30f['id']; const _0x294aab = _0x5ed30f['id'] === _0x38c7d8['activeUserProfileId'] ? _0x2cea58(0x932) : ''; _0x3adb24[_0x2cea58(0x252)] = _0x2cea58(0x81c) + (_0x5ed30f[_0x2cea58(0x3f1)] || _0x21ba38) + _0x2cea58(0x335) + _0x5ed30f['name'] + _0x294aab + _0x2cea58(0x46f) + _0x5ed30f[_0x2cea58(0xa2e)][_0x2cea58(0xab5)](0x0, 0x64) + _0x2cea58(0x8fd), _0x3adb24[_0x2cea58(0x25c)](_0x2cea58(0x2c5), () => _0x41c064(_0x5ed30f['id'])), _0x19f920[_0x2cea58(0x8fe)](_0x3adb24); }); } else _0x2a565e(![]), _0x3cf4de[_0x353b3a(0x2c7)] = ![]; } } function _0x4ab281() { const _0x138898 = _0xe59ed1; if ('REhcx' === _0x138898(0x433)) { const _0x1227e8 = _0x3cf4de[_0x138898(0xa3d)][_0x138898(0x6f0)](_0x1f357b => _0x1f357b['id'] === _0x3cf4de[_0x138898(0x62f)]), _0x5a4b47 = _0x1227e8?.[_0x138898(0x2c4)]; let _0x2c7da9 = _0x3cf4de[_0x138898(0x3ec)]['find'](_0x56f972 => _0x56f972['id'] === _0x5a4b47); !_0x2c7da9 && (_0x2c7da9 = _0x3cf4de[_0x138898(0x3ec)]['find'](_0x577a8c => _0x577a8c['id'] === _0x3cf4de['activeUserProfileId'])); if (!_0x2c7da9) { if (_0x138898(0xaaa) !== _0x138898(0x334)) _0x2c7da9 = _0x3cf4de[_0x138898(0x3ec)][0x0]; else { const _0x3bcd9a = _0xe23f34[_0x138898(0xb60)](_0x138898(0xb0b)); _0x3bcd9a[_0x138898(0x199)] = _0x138898(0xd9); const _0x203803 = _0x11f22c + '-' + _0x38aaaa(_0x4eb650 + 0x1)[_0x138898(0x5b5)](0x2, '0') + '-' + _0x1590a0(_0x251ed8)[_0x138898(0x5b5)](0x2, '0'); if (_0x203803 === _0x3162f5) _0x3bcd9a['classList'][_0x138898(0x44c)](_0x138898(0x526)); if (_0x203803 === _0x303570[_0x138898(0x5b1)]) _0x3bcd9a['classList']['add'](_0x138898(0x989)); const _0x47482c = _0x5aefd5[_0x138898(0xb60)](_0x138898(0x92b)); _0x47482c[_0x138898(0x199)] = _0x138898(0x535), _0x47482c['textContent'] = _0x141986, _0x3bcd9a[_0x138898(0x8fe)](_0x47482c); const _0x18a895 = _0x18a288['calendarEvents'][_0x138898(0x3f0)](_0x4e983a => _0x4e983a[_0x138898(0x5bd)] === _0x203803); if (_0x18a895['length'] > 0x0) { const _0x2a527b = _0x28bfc3[_0x138898(0xb60)]('div'); _0x2a527b['className'] = _0x138898(0x1d1), _0x3bcd9a[_0x138898(0x8fe)](_0x2a527b); } _0x3bcd9a[_0x138898(0x25c)]('click', () => { const _0x1f65d8 = _0x138898; _0x2cd083[_0x1f65d8(0x5b1)] = _0x203803, _0x59aa3e(); }), _0x8d231c[_0x138898(0x8fe)](_0x3bcd9a); } } _0x2c7da9 && ('FaKyF' !== _0x138898(0x1c2) ? document['getElementById'](_0x138898(0x3cd))['src'] = _0x2c7da9[_0x138898(0x3f1)] || _0x2e585f : (_0x3a5425(), _0x9bc5ad['displayedMessageCount'] = 0x64)); } else _0x38c4cb['error']('保存壁纸失败:', _0x54dcba), _0x4daf4a(_0x138898(0xab) + _0x17ac08['message']); } function _0x27af77(_0x1cc915) { const _0x1dce8c = _0xe59ed1; if ('OtyJj' === _0x1dce8c(0x5bb)) _0x2a0d91[_0x1dce8c(0xa37)] = _0x4169c2, _0x5abda5(), _0x52241e(_0x1dce8c(0x9c7)), _0x17210c(), _0x488a3e[_0x1dce8c(0x7ef)](_0x1dce8c(0x9b0))[_0x1dce8c(0x937)][_0x1dce8c(0x8a4)] = _0x1dce8c(0xacf); else { let _0x4d8127 = 0x0, _0x5ece37 = 0x0, _0x355bdf = 0x0; if (_0x1cc915[_0x1dce8c(0x30c)] == 0x4) { if (_0x1dce8c(0x7e2) !== _0x1dce8c(0x5db)) _0x4d8127 = '0x' + _0x1cc915[0x1] + _0x1cc915[0x1], _0x5ece37 = '0x' + _0x1cc915[0x2] + _0x1cc915[0x2], _0x355bdf = '0x' + _0x1cc915[0x3] + _0x1cc915[0x3]; else { _0x440d0e[_0x1dce8c(0x252)] = _0x1dce8c(0x6ec); return; } } else { if (_0x1cc915[_0x1dce8c(0x30c)] == 0x7) { if (_0x1dce8c(0x831) !== _0x1dce8c(0x831)) { if (_0x374239) { const _0x2808bf = _0x14f420[_0x1dce8c(0xb60)]('p'); _0x2808bf[_0x1dce8c(0x252)] = _0x3e143e, _0x2808bf[_0x1dce8c(0x937)]['margin'] = '0', _0x2b3263[_0x1dce8c(0x8fe)](_0x2808bf); } } else _0x4d8127 = '0x' + _0x1cc915[0x1] + _0x1cc915[0x2], _0x5ece37 = '0x' + _0x1cc915[0x3] + _0x1cc915[0x4], _0x355bdf = '0x' + _0x1cc915[0x5] + _0x1cc915[0x6]; } } _0x4d8127 /= 0xff, _0x5ece37 /= 0xff, _0x355bdf /= 0xff; let _0xfe91ef = Math[_0x1dce8c(0x81d)](_0x4d8127, _0x5ece37, _0x355bdf), _0x3e9e9a = Math['max'](_0x4d8127, _0x5ece37, _0x355bdf), _0x33c6e5 = _0x3e9e9a - _0xfe91ef, _0xcefa18 = 0x0, _0x235d23 = 0x0, _0x48554f = 0x0; if (_0x33c6e5 == 0x0) _0xcefa18 = 0x0; else { if (_0x3e9e9a == _0x4d8127) _0xcefa18 = (_0x5ece37 - _0x355bdf) / _0x33c6e5 % 0x6; else { if (_0x3e9e9a == _0x5ece37) _0xcefa18 = (_0x355bdf - _0x4d8127) / _0x33c6e5 + 0x2; else _0xcefa18 = (_0x4d8127 - _0x5ece37) / _0x33c6e5 + 0x4; } } _0xcefa18 = Math[_0x1dce8c(0x53a)](_0xcefa18 * 0x3c); if (_0xcefa18 < 0x0) _0xcefa18 += 0x168; return _0x48554f = (_0x3e9e9a + _0xfe91ef) / 0x2, _0x235d23 = _0x33c6e5 == 0x0 ? 0x0 : _0x33c6e5 / (0x1 - Math[_0x1dce8c(0xb84)](0x2 * _0x48554f - 0x1)), _0x235d23 = +(_0x235d23 * 0x64)['toFixed'](0x1), _0x48554f = +(_0x48554f * 0x64)[_0x1dce8c(0x196)](0x1), { 'h': _0xcefa18, 's': _0x235d23, 'l': _0x48554f }; } } function _0x277a53() { const _0x918c6f = _0xe59ed1; if (_0x918c6f(0x1cf) === _0x918c6f(0x9da)) { const _0x2cf811 = _0x218948[_0x918c6f(0xa3d)]['find'](_0x1bedd7 => _0x1bedd7['id'] === _0x10c8ed[_0x918c6f(0x62f)]), _0x34c24e = _0x2cf811 ? _0x2cf811[_0x918c6f(0x516)] : []; if (!_0x34c24e || _0x34c24e[_0x918c6f(0x30c)] === 0x0) return ''; const _0x54d09c = _0x34c24e[_0x918c6f(0x6cd)](0x0, 0x5), _0x36bc01 = _0x54d09c[_0x918c6f(0x48a)](_0x3dafcc => { const _0x4c35c3 = _0x918c6f, _0x404f14 = _0x24688d(_0x3dafcc['authorId']) || { 'name': '未知' }; let _0x55ef30 = _0x4c35c3(0x122) + _0x404f14[_0x4c35c3(0x382)] + _0x4c35c3(0x81b) + (_0x3dafcc['thought'] || _0x3dafcc[_0x4c35c3(0x313)]) + '”'; return _0x3dafcc[_0x4c35c3(0x76d)] === _0x4c35c3(0x42f) && (_0x55ef30 += _0x4c35c3(0x2d3) + _0x3dafcc['songName'] + _0x4c35c3(0x9f1) + _0x3dafcc['artist'] + ')'), _0x55ef30; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0x36bc01[_0x918c6f(0x863)]('\x0a'); } else { const _0x1ed6ef = (_0x1d0f06, _0xa11338, _0x5aa70d) => { const _0x4f4575 = _0x918c6f, _0x319ded = document[_0x4f4575(0x7ef)](_0x1d0f06); if (!_0x319ded) return; let _0x4d8864 = null; try { _0x4f4575(0x34a) === 'tfdUy' ? (_0x16e9f3['style'][_0x4f4575(0x1b0)] = _0x5477b4[_0x4f4575(0x1b0)] + '%', _0x4babda[_0x4f4575(0x937)][_0x4f4575(0x54a)] = _0x9ad67[_0x4f4575(0x54a)] + '%') : _0x4d8864 = JSON[_0x4f4575(0x6e7)](localStorage[_0x4f4575(0x6b6)](_0xa11338) || '{}'); } catch { if ('OOecG' === _0x4f4575(0xadf)) { _0x1c1510(_0x4f4575(0x6da) + _0x4e481b + _0x4f4575(0x930)), _0x144f04(() => _0x42647f[_0x4f4575(0xa0d)](), 0x5dc); return; } else _0x4d8864 = {}; } _0x319ded['style']['position'] = _0x4f4575(0x5ab), _0x319ded[_0x4f4575(0x937)]['top'] = '', _0x319ded[_0x4f4575(0x937)][_0x4f4575(0x54a)] = '', _0x319ded[_0x4f4575(0x937)][_0x4f4575(0x6c5)] = '', _0x319ded[_0x4f4575(0x937)][_0x4f4575(0xc5)] = '', _0x319ded['style']['transform'] = ''; if (typeof _0x4d8864[_0x4f4575(0x1b0)] === 'number' && typeof _0x4d8864[_0x4f4575(0x54a)] === _0x4f4575(0x62c)) _0x4f4575(0x74d) === 'Lwemu' ? (_0x356a47 = _0x2d5647[_0x4f4575(0xb60)]('div'), _0x38e1ab['className'] = _0x4f4575(0x6fa), _0x153875['textContent'] = _0x4f4575(0x8ee), _0x4d8025[_0x4f4575(0x7ef)](_0x4f4575(0xa4b))[_0x4f4575(0x8fe)](_0x3b53f7)) : (_0x319ded[_0x4f4575(0x937)][_0x4f4575(0x1b0)] = _0x4d8864['top'] + '%', _0x319ded[_0x4f4575(0x937)][_0x4f4575(0x54a)] = _0x4d8864[_0x4f4575(0x54a)] + '%'); else { if (_0x4f4575(0x449) === 'cnkwD') for (const _0x4d41a5 in _0x5aa70d) { _0x319ded['style'][_0x4d41a5] = _0x5aa70d[_0x4d41a5]; } else _0x1b4fa3['style'][_0x4f4575(0x6aa)] = _0x4f4575(0x550) + _0x1be316['createObjectURL'](_0x4aefd3) + '\x27)', _0x288010['style'][_0x4f4575(0x143)] = _0x4f4575(0xa99), _0x441c6c[_0x4f4575(0x937)][_0x4f4575(0x913)] = 'center'; } }; _0x1ed6ef(_0x918c6f(0x824), _0x918c6f(0x380), { 'top': _0x918c6f(0x19e), 'left': '50%', 'transform': 'translateX(-50%)' }), _0x1ed6ef(_0x918c6f(0x432), 'appIconPosition_app-wallpaper', { 'top': _0x918c6f(0x1fa), 'right': '4%' }), _0x1ed6ef('app-user-profiles', _0x918c6f(0x91), { 'top': _0x918c6f(0x1fa), 'right': _0x918c6f(0x17e) }), _0x1ed6ef(_0x918c6f(0x47e), 'appIconPosition_app-settings', { 'top': '8%', 'right': _0x918c6f(0x17e) }), _0x1ed6ef(_0x918c6f(0x970), _0x918c6f(0x2c2), { 'top': '8%', 'right': '4%' }), _0x1ed6ef('app-music-library', _0x918c6f(0xa24), { 'top': _0x918c6f(0x619), 'left': '5%' }), _0x1ed6ef(_0x918c6f(0x6c2), _0x918c6f(0xa4), { 'top': _0x918c6f(0x21b), 'left': '29%' }), _0x1ed6ef(_0x918c6f(0x2ad), 'appIconPosition_app-snoop', { 'top': _0x918c6f(0x21b), 'left': '5%' }), _0x1ed6ef(_0x918c6f(0x7b3), _0x918c6f(0x232), { 'top': _0x918c6f(0x619), 'left': _0x918c6f(0x9b5) }), _0x1ed6ef(_0x918c6f(0xacd), _0x918c6f(0x37e), { 'top': _0x918c6f(0x6a6), 'right': '5%' }), _0x1ed6ef('card-widget-2', _0x918c6f(0x17f), { 'top': '8%', 'left': '5%' }); const _0x419b28 = document[_0x918c6f(0x7ef)](_0x918c6f(0x764)); _0x419b28 && (_0x419b28[_0x918c6f(0x937)][_0x918c6f(0x843)] = _0x918c6f(0x5ab), _0x419b28[_0x918c6f(0x937)]['top'] = _0x918c6f(0x805), _0x419b28[_0x918c6f(0x937)][_0x918c6f(0x54a)] = _0x918c6f(0x99e), _0x419b28[_0x918c6f(0x937)][_0x918c6f(0x40a)] = _0x918c6f(0x275), _0x419b28[_0x918c6f(0x937)][_0x918c6f(0x8a4)] = _0x918c6f(0x540)); const _0x549a09 = document[_0x918c6f(0x7ef)](_0x918c6f(0x171)); _0x549a09 && (_0x549a09[_0x918c6f(0x937)][_0x918c6f(0x843)] = 'absolute', _0x549a09['style'][_0x918c6f(0x1b0)] = _0x918c6f(0xdd), _0x549a09[_0x918c6f(0x937)][_0x918c6f(0x54a)] = '50%', _0x549a09['style'][_0x918c6f(0x40a)] = _0x918c6f(0x275), _0x549a09[_0x918c6f(0x937)][_0x918c6f(0x8a4)] = _0x918c6f(0x6cf)); } } function _0x40dc44() { const _0x1da18e = _0xe59ed1, _0x105586 = document['getElementById']('custom-icon-list-container'); _0x105586[_0x1da18e(0x252)] = ''; const _0x5d7eac = document[_0x1da18e(0x53f)](_0x1da18e(0x109)); _0x5d7eac['forEach'](_0x35a057 => { const _0x5e59b9 = _0x1da18e, _0x138016 = _0x35a057['id'], _0x42291f = _0x35a057['querySelector']('span')['textContent'], _0x334100 = _0x5e59b9(0xb48) + _0x138016, _0x4934c = localStorage[_0x5e59b9(0x6b6)](_0x334100), _0x339902 = document['createElement'](_0x5e59b9(0xb0b)); _0x339902[_0x5e59b9(0x199)] = _0x5e59b9(0x96e), _0x339902[_0x5e59b9(0x937)][_0x5e59b9(0x9f7)] = '10px\x200', _0x339902[_0x5e59b9(0x252)] = _0x5e59b9(0xaba) + _0x138016 + _0x5e59b9(0x855) + (_0x4934c || _0x5e59b9(0xa11)) + _0x5e59b9(0x629) + _0x42291f + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_' + _0x138016 + '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_' + _0x138016 + _0x5e59b9(0x84b) + _0x334100 + _0x5e59b9(0x8a3), _0x105586[_0x5e59b9(0x8fe)](_0x339902); const _0x332c0e = document[_0x5e59b9(0x7ef)](_0x5e59b9(0x1b7) + _0x138016); _0x332c0e['addEventListener'](_0x5e59b9(0x9cb), async _0x34598d => { const _0x1c5d96 = _0x5e59b9; if (_0x1c5d96(0xa04) !== 'UnKoW') { const _0x7ae8d2 = _0x182955[_0x1c5d96(0x313)] ? '\x20' + _0x2e7444[_0x1c5d96(0x313)] : ''; _0x1bbc6f[_0x1c5d96(0x967)]('[' + _0x5de5d3(_0x1a1ecd) + _0x1c5d96(0x4a2) + _0x7ae8d2); } else { const _0x2f1902 = _0x34598d[_0x1c5d96(0x13b)][_0x1c5d96(0x27c)][0x0]; if (!_0x2f1902) return; try { if (_0x1c5d96(0xb3b) !== _0x1c5d96(0x6a2)) { const _0x42c390 = await _0x4ed984(_0x2f1902); localStorage[_0x1c5d96(0x531)](_0x334100, _0x42c390), document[_0x1c5d96(0x7ef)]('preview_' + _0x138016)[_0x1c5d96(0x557)] = _0x42c390, _0x4785cf(); } else _0x3bab3c = _0x6fc2f2; } catch (_0x43ab25) { _0x5bf34b('图标处理失败:\x20' + _0x43ab25[_0x1c5d96(0x99)]); } } }); }); } function _0x4785cf() { const _0x3a706b = _0xe59ed1, _0x40042d = document[_0x3a706b(0x53f)](_0x3a706b(0x109)); _0x40042d[_0x3a706b(0x8cf)](_0x1a162c => { const _0xbb209e = _0x3a706b; if (_0xbb209e(0x441) !== _0xbb209e(0x723)) { const _0x1b8aa2 = _0x1a162c['id'], _0x3ab735 = 'customIcon_' + _0x1b8aa2, _0x291e95 = localStorage['getItem'](_0x3ab735), _0x3c7f3d = _0x1a162c[_0xbb209e(0x5cb)](_0xbb209e(0x1e7)); if (_0x291e95) _0x3c7f3d[_0xbb209e(0x252)] = _0xbb209e(0x519) + _0x291e95 + '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>'; else { if ('qfpnS' === _0xbb209e(0x302)) { const _0x13761c = document[_0xbb209e(0x5cb)]('#app-dock-bottom-left\x20#' + _0x1b8aa2 + _0xbb209e(0xada) + _0x1b8aa2 + _0xbb209e(0x2be))?.[_0xbb209e(0x252)]; _0x13761c && (_0x3c7f3d['innerHTML'] = _0x13761c); } else _0xd6ad3f !== _0x1b9b44 && (_0x1b63b1[_0xbb209e(0x5f8)] = '▶'); } } else { const _0x59cda8 = _0x2571f5[_0xbb209e(0x35c)][_0xbb209e(0x4ca)](); _0x59cda8 && (_0x1c275f(_0x59cda8), _0x2451fd['value'] = '', _0xb3a89d(_0x3191a7, 0x64)); } }); } function _0x2f8a96() { const _0x574a43 = _0xe59ed1, _0x5d66ea = _0x3cf4de[_0x574a43(0xa3d)][_0x574a43(0x6f0)](_0x320e4f => _0x320e4f['id'] === _0x3cf4de[_0x574a43(0x62f)]), _0x548a6e = _0x5234d7(); let _0x3607d4 = []; if (_0x5d66ea && _0x5d66ea[_0x574a43(0x516)]) { if (_0x574a43(0x9ec) === 'SCHzb') { const _0x102e9f = _0x5d66ea[_0x574a43(0x516)][_0x574a43(0x3f0)](_0x2152fc => _0x2152fc[_0x574a43(0x76d)] === _0x574a43(0x42f) && _0x2152fc[_0x574a43(0x4c7)])[_0x574a43(0x48a)](_0x51d202 => ({ ..._0x51d202, 'source': _0x574a43(0x961) })); _0x3607d4[_0x574a43(0x967)](..._0x102e9f); } else return ''; } if (_0x548a6e && _0x3cf4de[_0x574a43(0x103)]) { if (_0x574a43(0x50b) === _0x574a43(0x7ad)) _0x7b7c16(_0x2c5ce4[_0x574a43(0x6b9)])[_0x574a43(0x683)](_0x2982f3 => { const _0x1c4191 = _0x574a43; if (_0x2982f3) { const _0x22a773 = _0x5b1d90[_0x1c4191(0x9e4)](_0x2982f3); _0xe5aca8['src'] = _0x22a773, _0x362dca['onload'] = () => _0x8f9b7f[_0x1c4191(0x3c9)](_0x22a773); } }); else { const _0x503256 = _0x3cf4de[_0x574a43(0x103)]['filter'](_0x1fd8a1 => _0x1fd8a1[_0x574a43(0x76d)] === _0x574a43(0x42f) && _0x1fd8a1[_0x574a43(0x4c7)])['map'](_0x1de34f => ({ ..._0x1de34f, 'id': _0x574a43(0x709) + _0x1de34f[_0x574a43(0x554)], 'source': _0x574a43(0x2b9) })); _0x3607d4[_0x574a43(0x967)](..._0x503256); } } const _0xc8b642 = Array[_0x574a43(0x60a)](new Map(_0x3607d4[_0x574a43(0x48a)](_0x2fe220 => [_0x2fe220['playableUrl'], _0x2fe220]))[_0x574a43(0x311)]()); _0x3cf4de[_0x574a43(0xaab)] = _0xc8b642[_0x574a43(0xb11)]((_0x2dad90, _0x301aec) => _0x301aec['timestamp'] - _0x2dad90[_0x574a43(0x554)]); } function _0xd24a6d(_0x428491) { const _0x11ad2f = _0xe59ed1; if (_0x428491 < 0x0 || _0x428491 >= _0x147d8d[_0x11ad2f(0x30c)]) return; _0x593c3c = _0x428491; const _0x20247f = _0x147d8d[_0x428491]; _0x450910[_0x11ad2f(0x557)] = _0x20247f[_0x11ad2f(0x4c7)] || _0x20247f[_0x11ad2f(0x98a)], _0x450910[_0x11ad2f(0x28a)](), _0x201630(), _0x41c7b0(); } function _0x201630() { const _0x1fe48b = _0xe59ed1, _0x28b962 = _0x3cf4de[_0x1fe48b(0xaab)][_0x3cf4de[_0x1fe48b(0x627)]], _0x56ebf8 = _0x3cf4de[_0x1fe48b(0x5e9)]; _0xcac1e4(), _0x4417d7(); const _0x1fb2f5 = document[_0x1fe48b(0x53f)]('.music-post-song-card,\x20.music-share-card'); _0x1fb2f5[_0x1fe48b(0x8cf)](_0x449d69 => { const _0x139cad = _0x1fe48b, _0x560e5e = _0x449d69[_0x139cad(0x361)][_0x139cad(0x3e6)], _0x5d6a92 = _0x449d69[_0x139cad(0x5cb)](_0x139cad(0x321)); if (!_0x5d6a92) return; _0x28b962 && _0x560e5e === _0x28b962['id'] && _0x56ebf8 ? _0x139cad(0x57b) !== 'bcEZv' ? _0x55ed1b('错误:\x20' + _0x277270[_0x139cad(0x99)]) : _0x5d6a92[_0x139cad(0x5f8)] = '❚❚' : _0x5d6a92[_0x139cad(0x5f8)] = '▶'; }); } function _0x41c7b0() { const _0x1e3757 = _0xe59ed1; try { localStorage[_0x1e3757(0x531)](_0x1e3757(0xde), JSON[_0x1e3757(0x56e)]({ 'playlist': _0x3cf4de['musicPlaylist'], 'currentIndex': _0x3cf4de[_0x1e3757(0x627)] })); } catch (_0xc78ccc) { console[_0x1e3757(0x5e3)](_0x1e3757(0x52c), _0xc78ccc); } } function _0x21a01d() { const _0x63b4c5 = _0xe59ed1; try { if (_0x63b4c5(0x730) === _0x63b4c5(0x9e2)) { const _0x59527f = _0x343780[_0x63b4c5(0x6e7)](_0x321dba['target']['result']); if (_0x59527f[_0x63b4c5(0x76d)] !== _0x63b4c5(0x35d) || !_0x59527f['accountingData'] || !_0x59527f[_0x63b4c5(0x3a3)]) throw new _0x5eeb37(_0x63b4c5(0xa79)); _0x192d06[_0x63b4c5(0xb4a)] = _0x59527f[_0x63b4c5(0xb4a)], _0x431436[_0x63b4c5(0x3a3)] = _0x59527f['accountingLedger'], _0x1c5eb5(), _0x245d8c(![]), _0x240c3b(_0x63b4c5(0x256)), _0x38ffbb(); } else { const _0x3ec87b = localStorage[_0x63b4c5(0x6b6)](_0x63b4c5(0xde)); if (_0x3ec87b) { const { playlist: _0xb78da4, currentIndex: _0x139b01 } = JSON['parse'](_0x3ec87b); Array['isArray'](_0xb78da4) && _0xb78da4[_0x63b4c5(0x30c)] > 0x0 && _0x139b01 > -0x1 && (_0x3cf4de[_0x63b4c5(0xaab)] = _0xb78da4, _0x3cf4de[_0x63b4c5(0x627)] = _0x139b01, _0x3cf4de[_0x63b4c5(0x5e9)] = ![], _0x201630()); } } } catch (_0x134c01) { _0x63b4c5(0x1dc) === _0x63b4c5(0x46a) ? _0xd327ee[_0x63b4c5(0x252)] += _0x63b4c5(0x4ae) + _0x173040 + _0x63b4c5(0x3dd) : console[_0x63b4c5(0x5e3)](_0x63b4c5(0x1c5), _0x134c01); } } function _0x481abc(_0x17fa69) { const _0x1d23f0 = _0xe59ed1; if (window[_0x1d23f0(0xfe)]) clearTimeout(window[_0x1d23f0(0xfe)]); const _0x2b3906 = _0x17fa69[_0x1d23f0(0x13b)][_0x1d23f0(0xb09)](_0x1d23f0(0xb47)); if (!_0x2b3906) return; const _0x3a5dd9 = _0x2b3906['dataset'][_0x1d23f0(0x554)], _0xd1bba5 = _0x2b3906[_0x1d23f0(0x4ad)][_0x1d23f0(0x182)](_0x1d23f0(0x32c)) ? _0x1d23f0(0x32c) : 'ai'; if (!_0x3a5dd9) return; const _0x5eb75f = () => { window['diaryPressTimer'] = setTimeout(() => { const _0x5116c6 = _0x2a1e; if (_0x17fa69[_0x5116c6(0x76d)] === _0x5116c6(0x9c0)) _0x17fa69[_0x5116c6(0x3e2)](); _0xca252c(parseInt(_0x3a5dd9, 0xa), _0xd1bba5); }, 0x320); }, _0x228fa6 = () => { const _0x5912b8 = _0x1d23f0; if (window['diaryPressTimer']) clearTimeout(window[_0x5912b8(0xfe)]); }; document['addEventListener']('mouseup', _0x228fa6, { 'once': !![] }), document[_0x1d23f0(0x25c)](_0x1d23f0(0x299), _0x228fa6, { 'once': !![] }), document[_0x1d23f0(0x25c)]('touchcancel', _0x228fa6, { 'once': !![] }), _0x5eb75f(); } function _0xca252c(_0x417e3d, _0x3b4f18) { const _0xcfdcde = _0xe59ed1; if ('rLqkw' !== _0xcfdcde(0x927)) _0x41a53e(![]), _0x3490da['error'](_0xcfdcde(0x2c8), _0x18ed2b), _0x2c6d0c(_0xcfdcde(0x39e) + _0x103d34['message'] + '\x20'); else { const _0x309151 = _0xcfdcde(0x965) + _0x417e3d; let _0x5deec2 = document['getElementById'](_0x309151); if (_0x5deec2) return; const _0x4e6377 = '\x0a\x20\x20\x20\x20<div\x20id=\x22' + _0x309151 + _0xcfdcde(0xa5a) + (_0x3b4f18 === 'ai' ? _0xcfdcde(0x221) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20'; document['body'][_0xcfdcde(0xb63)](_0xcfdcde(0xa62), _0x4e6377); const _0x34ee4f = document[_0xcfdcde(0x7ef)](_0x309151), _0x46e8b0 = () => _0x34ee4f[_0xcfdcde(0x713)](); _0x34ee4f[_0xcfdcde(0x5cb)](_0xcfdcde(0xb06))[_0xcfdcde(0xafa)] = _0x46e8b0, _0x34ee4f[_0xcfdcde(0x5cb)](_0xcfdcde(0x1e0))['onclick'] = _0x46e8b0, _0x34ee4f[_0xcfdcde(0x5cb)](_0xcfdcde(0x20b))[_0xcfdcde(0xafa)] = () => { const _0x3b9c1c = _0xcfdcde; _0x3b9c1c(0x3ce) === _0x3b9c1c(0x2a0) ? _0x138673[_0x3b9c1c(0x25c)]('click', () => { const _0x40d59e = _0x3b9c1c, _0x4c9011 = _0x37031f[_0x40d59e(0x6e7)](_0x2392ab[_0x40d59e(0x361)][_0x40d59e(0x76a)][_0x40d59e(0xb53)](/&quot;/g, '\x22')), _0x48c9f4 = _0xa0a837[_0x40d59e(0x361)]['contactName'], _0xd207ba = _0x3ee5eb[_0x40d59e(0x361)][_0x40d59e(0x200)]; _0x1d621d(_0x48c9f4, _0xd207ba, _0x4c9011); }) : (_0x57678d(_0x417e3d), _0x46e8b0()); }, _0x3b4f18 === 'ai' && (_0x34ee4f[_0xcfdcde(0x5cb)]('#diary-action-reroll')[_0xcfdcde(0xafa)] = () => { const _0x52760a = _0xcfdcde; 'TTBrU' === _0x52760a(0x3ed) ? (_0x52a577(![]), _0x2803b6(_0x52760a(0x4f2) + _0x4f9a0a['message'])) : (_0x53565d(_0x417e3d), _0x46e8b0()); }); } } async function _0x57678d(_0x156810) { const _0x611d6b = _0xe59ed1, _0xc059f2 = await _0x56efd8(_0x611d6b(0x817)); if (!_0xc059f2) return; const _0x1eaf79 = _0x3cf4de[_0x611d6b(0x865)][_0x611d6b(0x6f0)](_0x262b54 => _0x262b54[_0x611d6b(0x697)] === _0x3cf4de[_0x611d6b(0x253)]); if (!_0x1eaf79) return; const _0x34179a = _0x1eaf79['entries'][_0x611d6b(0xaa2)](_0x5f16b0 => _0x5f16b0[_0x611d6b(0x554)] === _0x156810); _0x34179a > -0x1 && (_0x611d6b(0x79b) !== _0x611d6b(0x79b) ? _0x528eae = _0x4c8093[_0x611d6b(0x3ec)][0x0] : (_0x1eaf79[_0x611d6b(0x2fc)][_0x611d6b(0x673)](_0x34179a, 0x1), _0x3a3bc1(), _0xfe105d(), _0x5bf34b(_0x611d6b(0x6e3)))); } async function _0x53565d(_0x257a0b) { const _0x272d3d = _0xe59ed1, _0x4592d8 = _0x3cf4de['diaries'][_0x272d3d(0x6f0)](_0x82c0f0 => _0x82c0f0['characterId'] === _0x3cf4de[_0x272d3d(0x253)]); if (!_0x4592d8) return; const _0x46cff1 = _0x4592d8[_0x272d3d(0x2fc)][_0x272d3d(0xaa2)](_0x2d7cb6 => _0x2d7cb6['timestamp'] === _0x257a0b); _0x46cff1 > -0x1 && (_0x4592d8[_0x272d3d(0x2fc)][_0x272d3d(0x673)](_0x46cff1, 0x1), _0x3a3bc1(), _0xfe105d(), await _0x4e4383()); } function _0x5ac08c() { const _0x45d6fa = _0xe59ed1, _0x3a9f50 = document[_0x45d6fa(0x7ef)](_0x45d6fa(0x38d)); _0x3a9f50[_0x45d6fa(0x252)] = ''; const _0x35951a = _0x3cf4de[_0x45d6fa(0xad3)]['filter'](_0x49c9b8 => _0x3cf4de[_0x45d6fa(0x27a)][_0x45d6fa(0xa9f)](_0x2c41d4 => _0x2c41d4[_0x45d6fa(0x76d)] === _0x45d6fa(0x86c) && _0x2c41d4[_0x45d6fa(0x48f)][_0x45d6fa(0x5cc)](_0x49c9b8['id']))); if (_0x35951a[_0x45d6fa(0x30c)] === 0x0) { _0x3a9f50[_0x45d6fa(0x252)] = _0x45d6fa(0x648); return; } _0x35951a[_0x45d6fa(0x8cf)](_0x4da327 => { const _0xa85de9 = _0x45d6fa, _0x518594 = document[_0xa85de9(0xb60)]('li'); _0x518594[_0xa85de9(0x199)] = _0xa85de9(0x956), _0x518594[_0xa85de9(0x361)]['charId'] = _0x4da327['id'], _0x518594[_0xa85de9(0x252)] = _0xa85de9(0x1a6) + (_0x4da327[_0xa85de9(0x3f1)] || _0x574d9b) + _0xa85de9(0x907) + _0x4da327[_0xa85de9(0x382)] + _0xa85de9(0x6a8), _0x518594[_0xa85de9(0x25c)](_0xa85de9(0x2c5), () => { const _0x5e8b5f = _0xa85de9; _0x5e8b5f(0x1fd) === _0x5e8b5f(0x1fd) ? _0x2d3c12(_0x4da327['id']) : (_0x1de24f[_0x5e8b5f(0x35c)] = _0x3fefb2, _0x4bfcc3[_0x5e8b5f(0x4ad)][_0x5e8b5f(0x713)](_0x5e8b5f(0xfb))); }), _0x518594['querySelector'](_0xa85de9(0x3a8))['addEventListener']('click', () => { const _0x213a4d = _0xa85de9; if ('NUUem' !== _0x213a4d(0x826)) { if (!_0x3a0aca) return; _0x256ed6 = _0x1b1cc8[_0x213a4d(0x542)][0x0][_0x213a4d(0x22d)], _0x5bc0fd === _0x213a4d(0x85b) && _0x3fc9d7(), _0x55f8bc = ![]; } else _0x2d3c12(_0x4da327['id']); }), _0x518594[_0xa85de9(0x5cb)]('.diary-delete-btn')[_0xa85de9(0x25c)](_0xa85de9(0x2c5), _0x39b5f7 => { const _0x1f92e1 = _0xa85de9; if ('aZIxG' === _0x1f92e1(0x3a6)) { if (!_0x10dd89) return; const _0x562d1f = _0x322458['activeMeetingCharId'], _0xbf5057 = _0x1bec98(_0x562d1f); if (!_0xbf5057) return; const _0x55f630 = _0x4d4e0d(_0x55413c['getElementById'](_0x1f92e1(0x1f2))[_0x1f92e1(0x35c)]), _0x3d8ff3 = _0x3618c1(_0x1e6cf4[_0x1f92e1(0x7ef)]('sprite-slider-y')[_0x1f92e1(0x35c)]), _0x6c83b5 = _0x4eeac0(_0x39f051[_0x1f92e1(0x7ef)]('sprite-slider-scale')[_0x1f92e1(0x35c)]) / 0x64; _0xbf5057[_0x1f92e1(0xa82)] = { 'x': _0x55f630, 'y': _0x3d8ff3, 'scale': _0x6c83b5 }; const _0x42edc4 = _0x175e25[_0x1f92e1(0x7ef)](_0x1f92e1(0x8c0)), _0x311240 = 0x50 * _0x6c83b5; _0x42edc4[_0x1f92e1(0x937)][_0x1f92e1(0x293)] = _0x311240 + '%', _0x42edc4[_0x1f92e1(0x937)]['width'] = _0x311240 + '%', _0x42edc4[_0x1f92e1(0x937)][_0x1f92e1(0x54a)] = _0x55f630 + '%', _0x42edc4['style'][_0x1f92e1(0x1b0)] = _0x3d8ff3 + '%', _0x42edc4[_0x1f92e1(0x937)]['transform'] = _0x1f92e1(0x133); } else _0x39b5f7[_0x1f92e1(0x886)](), _0x3dddd1(_0x4da327['id']); }), _0x3a9f50[_0xa85de9(0x8fe)](_0x518594); }); } function _0x2d3c12(_0xb9e9fb) { const _0x1f9d0f = _0xe59ed1, _0x56abe5 = _0xd97907(_0xb9e9fb); if (!_0x56abe5) return; _0x3cf4de[_0x1f9d0f(0x253)] = _0xb9e9fb; const _0x48f74e = _0x3cf4de[_0x1f9d0f(0x865)][_0x1f9d0f(0x6f0)](_0x213601 => _0x213601[_0x1f9d0f(0x697)] === _0xb9e9fb), _0x1608d2 = _0x48f74e ? _0x48f74e['entries'][_0x1f9d0f(0x30c)] : 0x0, _0x419f80 = 0x2; _0x3cf4de['diaryCurrentPage'] = Math[_0x1f9d0f(0x58b)](0x0, Math[_0x1f9d0f(0x849)](_0x1608d2 / _0x419f80) - 0x1), document[_0x1f9d0f(0x7ef)](_0x1f9d0f(0x65f))[_0x1f9d0f(0x5f8)] = _0x56abe5[_0x1f9d0f(0x382)] + _0x1f9d0f(0x5ed), _0xfe105d(), _0x459e0a(_0x1f9d0f(0x7c7), _0x1f9d0f(0x3b6)); } function _0xfe105d() { const _0x5e6a76 = _0xe59ed1, _0x50485d = document[_0x5e6a76(0x7ef)]('diary-entries-container'), _0x36ae22 = document[_0x5e6a76(0x7ef)]('diary-input-wrapper'); _0x50485d['innerHTML'] = '', _0x36ae22[_0x5e6a76(0x252)] = ''; const _0x546b68 = _0x307c1d() || { 'name': '我' }, _0x2a2f72 = _0x3cf4de[_0x5e6a76(0x865)]['find'](_0x213e32 => _0x213e32['characterId'] === _0x3cf4de[_0x5e6a76(0x253)]); if (!_0x2a2f72 || !_0x2a2f72[_0x5e6a76(0x2fc)] || _0x2a2f72[_0x5e6a76(0x2fc)][_0x5e6a76(0x30c)] === 0x0) { if ('vgtUC' === 'vgtUC') { _0x50485d[_0x5e6a76(0x252)] = _0x5e6a76(0x48e), _0x36ae22[_0x5e6a76(0x252)] = _0x5e6a76(0x5e6), document[_0x5e6a76(0x7ef)](_0x5e6a76(0x2fb))['addEventListener'](_0x5e6a76(0x2c5), _0xcf91c5), document[_0x5e6a76(0x7ef)](_0x5e6a76(0x6f7))['addEventListener'](_0x5e6a76(0x2c5), _0x4e4383); return; } else _0x5c72f1(_0x5e6a76(0xa73) + _0x790a8d['name'] + _0x5e6a76(0x985) + _0x2579ae[_0x5e6a76(0x4ea)]); } const _0x340fca = 0x2, _0x58648d = [..._0x2a2f72[_0x5e6a76(0x2fc)]][_0x5e6a76(0xb11)]((_0x4c1257, _0x5d5aed) => _0x4c1257['timestamp'] - _0x5d5aed[_0x5e6a76(0x554)]), _0x213c06 = []; for (let _0x586471 = 0x0; _0x586471 < _0x58648d[_0x5e6a76(0x30c)]; _0x586471 += _0x340fca) { _0x213c06[_0x5e6a76(0x967)](_0x58648d[_0x5e6a76(0x6cd)](_0x586471, _0x586471 + _0x340fca)); } const _0x433519 = _0x213c06[_0x5e6a76(0x30c)]; _0x213c06[_0x5e6a76(0x8cf)]((_0x508d1d, _0x5f13a7) => { const _0x4dd40a = _0x5e6a76, _0x12b4dd = document[_0x4dd40a(0xb60)](_0x4dd40a(0xb0b)); _0x12b4dd[_0x4dd40a(0x199)] = _0x4dd40a(0x236), _0x12b4dd['id'] = _0x4dd40a(0x57a) + _0x5f13a7, _0x5f13a7 === _0x3cf4de[_0x4dd40a(0x676)] && _0x12b4dd[_0x4dd40a(0x4ad)][_0x4dd40a(0x44c)](_0x4dd40a(0x61e)), _0x508d1d[_0x4dd40a(0x8cf)](_0x59a340 => { const _0x3a9e43 = _0x4dd40a, _0x4d2d11 = _0x59a340[_0x3a9e43(0x1b8)] === _0x3a9e43(0x32c) ? _0x3a9e43(0x32c) : 'ai', _0x2e7c38 = _0x59a340[_0x3a9e43(0x1b8)] === _0x3a9e43(0x32c) ? _0x546b68['name'] : _0xd97907(_0x59a340[_0x3a9e43(0x1b8)])[_0x3a9e43(0x382)], _0x1f1994 = document[_0x3a9e43(0xb60)]('div'); _0x1f1994[_0x3a9e43(0x199)] = _0x3a9e43(0x53c) + _0x4d2d11, _0x1f1994[_0x3a9e43(0x361)]['timestamp'] = _0x59a340['timestamp'], _0x1f1994[_0x3a9e43(0x937)][_0x3a9e43(0x686)] = _0x3a9e43(0xacf), _0x1f1994[_0x3a9e43(0x937)][_0x3a9e43(0x40f)] = '0', _0x1f1994['innerHTML'] = _0x3a9e43(0x93b) + _0x2e7c38 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new Date(_0x59a340[_0x3a9e43(0x554)])['toLocaleString']('zh-CN') + _0x3a9e43(0x84d) + _0x59a340[_0x3a9e43(0x313)][_0x3a9e43(0xb53)](/\n/g, _0x3a9e43(0x5e1)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x12b4dd[_0x3a9e43(0x8fe)](_0x1f1994); }), _0x50485d[_0x4dd40a(0x8fe)](_0x12b4dd); }), _0x36ae22[_0x5e6a76(0x252)] = _0x5e6a76(0x721) + (_0x3cf4de[_0x5e6a76(0x676)] + 0x1) + _0x5e6a76(0x2eb) + _0x433519 + _0x5e6a76(0x188), document['getElementById'](_0x5e6a76(0x7bc))[_0x5e6a76(0x193)] = _0x3cf4de['diaryCurrentPage'] === 0x0, document[_0x5e6a76(0x7ef)](_0x5e6a76(0xadd))[_0x5e6a76(0x193)] = _0x3cf4de['diaryCurrentPage'] === _0x433519 - 0x1, document[_0x5e6a76(0x7ef)]('diary-prev-button')[_0x5e6a76(0x25c)]('click', _0x1ca1f9), document[_0x5e6a76(0x7ef)](_0x5e6a76(0xadd))[_0x5e6a76(0x25c)](_0x5e6a76(0x2c5), _0x2fc9e8), document['getElementById'](_0x5e6a76(0x2fb))[_0x5e6a76(0x25c)](_0x5e6a76(0x2c5), _0xcf91c5), document[_0x5e6a76(0x7ef)](_0x5e6a76(0x6f7))[_0x5e6a76(0x25c)](_0x5e6a76(0x2c5), _0x4e4383); } function _0x2fc9e8() { const _0x37bda4 = _0xe59ed1; if (_0x37bda4(0xb5c) !== 'ctOMS') { if (_0x3cf4de['isAnimatingDiary']) return; const _0x29bf90 = _0x3cf4de[_0x37bda4(0x676)], _0x5d296a = Math[_0x37bda4(0x849)](_0x3cf4de[_0x37bda4(0x865)]['find'](_0x22a6c6 => _0x22a6c6[_0x37bda4(0x697)] === _0x3cf4de[_0x37bda4(0x253)])[_0x37bda4(0x2fc)]['length'] / 0x2); if (_0x29bf90 >= _0x5d296a - 0x1) return; _0x3cf4de['isAnimatingDiary'] = !![]; const _0x58d072 = _0x29bf90 + 0x1, _0x2fe62d = document[_0x37bda4(0x7ef)](_0x37bda4(0x57a) + _0x29bf90), _0x216529 = document[_0x37bda4(0x7ef)](_0x37bda4(0x57a) + _0x58d072); if (_0x2fe62d && _0x216529) { if (_0x37bda4(0x879) === _0x37bda4(0x879)) _0x216529[_0x37bda4(0x4ad)][_0x37bda4(0x44c)]('is-entering-from-right'), _0x2fe62d[_0x37bda4(0x4ad)][_0x37bda4(0x44c)]('is-exiting-left'), _0x216529['classList'][_0x37bda4(0x44c)](_0x37bda4(0x61e)), setTimeout(() => { const _0x598370 = _0x37bda4; _0x2fe62d[_0x598370(0x4ad)][_0x598370(0x713)](_0x598370(0x61e), _0x598370(0x87f)), _0x216529[_0x598370(0x4ad)][_0x598370(0x713)](_0x598370(0x8e2)), _0x3cf4de['diaryCurrentPage'] = _0x58d072, _0xfe105d(), _0x3cf4de[_0x598370(0xaef)] = ![]; }, 0x2bc); else { _0x1768ab[_0x37bda4(0x252)] = _0x37bda4(0x4db); return; } } else _0x3cf4de['isAnimatingDiary'] = ![]; } else _0x104ab1[_0x37bda4(0x4ad)][_0x37bda4(0x713)](_0x37bda4(0x2f9)), _0x2881c1[_0x37bda4(0x937)]['transform'] = '', _0x549bcc['style'][_0x37bda4(0x52e)] = ''; } function _0x1ca1f9() { const _0x1d22c4 = _0xe59ed1; if (_0x3cf4de[_0x1d22c4(0xaef)]) return; const _0x343155 = _0x3cf4de[_0x1d22c4(0x676)]; if (_0x343155 <= 0x0) return; _0x3cf4de[_0x1d22c4(0xaef)] = !![]; const _0x228bbb = _0x343155 - 0x1, _0x3ed2af = document[_0x1d22c4(0x7ef)](_0x1d22c4(0x57a) + _0x343155), _0x27d3ba = document[_0x1d22c4(0x7ef)](_0x1d22c4(0x57a) + _0x228bbb); _0x3ed2af && _0x27d3ba ? (_0x27d3ba[_0x1d22c4(0x4ad)][_0x1d22c4(0x44c)]('is-entering-from-left'), _0x3ed2af[_0x1d22c4(0x4ad)][_0x1d22c4(0x44c)]('is-exiting-right'), _0x27d3ba[_0x1d22c4(0x4ad)][_0x1d22c4(0x44c)](_0x1d22c4(0x61e)), setTimeout(() => { const _0x2cb120 = _0x1d22c4; _0x3ed2af[_0x2cb120(0x4ad)]['remove'](_0x2cb120(0x61e), 'is-exiting-right'), _0x27d3ba[_0x2cb120(0x4ad)][_0x2cb120(0x713)]('is-entering-from-left'), _0x3cf4de['diaryCurrentPage'] = _0x228bbb, _0xfe105d(), _0x3cf4de[_0x2cb120(0xaef)] = ![]; }, 0x2bc)) : _0x3cf4de['isAnimatingDiary'] = ![]; } function _0xcf91c5() { const _0x11c000 = _0xe59ed1; if ('UOcWW' === _0x11c000(0x3ee)) return new Promise(_0x314b97 => { const _0x1af366 = _0x11c000, _0x49d1c4 = _0x1af366(0xa20); document[_0x1af366(0x5e5)][_0x1af366(0xb63)](_0x1af366(0xa62), _0x49d1c4); const _0x323b23 = document[_0x1af366(0x7ef)](_0x1af366(0x806)), _0x1afe11 = document[_0x1af366(0x7ef)](_0x1af366(0x1ea)), _0x2aaab0 = document[_0x1af366(0x7ef)](_0x1af366(0x773)), _0x448ecd = document['getElementById'](_0x1af366(0x127)), _0x6374d4 = _0x323b23['querySelector'](_0x1af366(0xb06)), _0x5bed1c = () => { const _0x323f00 = _0x1af366; _0x323b23[_0x323f00(0x713)](), _0x314b97(); }; _0x2aaab0[_0x1af366(0xafa)] = () => { _0x2aeac0(_0x1afe11['value']), _0x5bed1c(); }, _0x448ecd[_0x1af366(0xafa)] = _0x5bed1c, _0x6374d4[_0x1af366(0xafa)] = _0x5bed1c; }); else { const _0x34f5c2 = new _0x3a8d21(_0x189ff3[_0x11c000(0x554)]), _0x1fe762 = _0x391a59(_0x34f5c2); _0x1f3775 += _0x11c000(0x63b) + _0x1fe762 + '\x0a'; const _0x4cbad3 = _0x1dd0f0[_0x11c000(0x9fd)](), _0x6f5d8d = _0x34f5c2[_0x11c000(0x9fd)](), _0x1ea732 = new _0x210952(); _0x1ea732[_0x11c000(0x2ea)](_0x3c4766[_0x11c000(0x5c3)]() - 0x1); const _0x415c2d = _0x1ea732[_0x11c000(0x9fd)](); if (_0x4cbad3 === _0x6f5d8d) { const _0x1509eb = (_0x4b3b24 - _0x34f5c2) / (0x3e8 * 0x3c); _0x592fff += _0x11c000(0x823); } else { if (_0x415c2d === _0x6f5d8d) _0x15693f += _0x11c000(0xaf); else { const _0x10e55a = _0x3ae496[_0x11c000(0x53a)]((_0x23e815 - _0x34f5c2) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x4c6081 += _0x11c000(0x237) + _0x10e55a + '\x20天没活动了。你生成的内容必须是全新的事件。\x0a'; } } } } function _0x2aeac0(_0x1ddad4) { const _0x1196d1 = _0xe59ed1; if (_0x1196d1(0x102) === 'QVpdE') _0x12dc85[_0x1196d1(0x35c)] = ''; else { const _0x4f348d = _0x1ddad4['trim'](); if (!_0x4f348d || !_0x3cf4de[_0x1196d1(0x253)]) return; let _0x31fdb8 = _0x3cf4de[_0x1196d1(0x865)][_0x1196d1(0x6f0)](_0x1fd008 => _0x1fd008[_0x1196d1(0x697)] === _0x3cf4de[_0x1196d1(0x253)]); !_0x31fdb8 && ('EQafs' !== 'wBIIK' ? (_0x31fdb8 = { 'characterId': _0x3cf4de['activeDiaryCharacterId'], 'entries': [] }, _0x3cf4de[_0x1196d1(0x865)][_0x1196d1(0x967)](_0x31fdb8)) : _0x463b52[_0x1196d1(0x25c)](_0x1196d1(0x2c5), function () { const _0x136044 = _0x1196d1, _0x287985 = { 'id': _0x379467['id'], 'url': _0x569188[_0x136044(0x4c7)] }; _0x2550bc(this, _0x287985); })); _0x31fdb8[_0x1196d1(0x2fc)][_0x1196d1(0x967)]({ 'timestamp': Date[_0x1196d1(0x740)](), 'author': _0x1196d1(0x32c), 'content': _0x4f348d }), _0x3a3bc1(); const _0x13a964 = _0x31fdb8[_0x1196d1(0x2fc)][_0x1196d1(0x30c)]; _0x3cf4de[_0x1196d1(0x676)] = Math[_0x1196d1(0x849)](_0x13a964 / 0x2) - 0x1, _0xfe105d(); } } async function _0x4e4383() { const _0xbb9529 = _0xe59ed1, _0x13a9ba = _0x3cf4de['diaries'][_0xbb9529(0x6f0)](_0x2acb9c => _0x2acb9c[_0xbb9529(0x697)] === _0x3cf4de[_0xbb9529(0x253)]), _0x3b2eb7 = _0x3cf4de['activeDiaryCharacterId'], _0x23528b = _0xd97907(_0x3b2eb7); if (!_0x23528b || _0x3cf4de[_0xbb9529(0x2c7)]) return; _0x2a565e(!![], _0xbb9529(0x49b)), await new Promise(_0x212e8c => setTimeout(_0x212e8c, 0x32)), _0x3cf4de[_0xbb9529(0x2c7)] = !![]; let _0x582303 = []; try { const _0x23d9be = _0x307c1d() || { 'name': '你' }, _0x277c5c = _0x5c4d13(_0x3b2eb7), { omniText: _0x478a8e } = _0x7987c1(_0x3b2eb7, _0x3cf4de[_0xbb9529(0xa9a)]); let _0x2c2882 = ''; if (_0x23528b['linkedWorldBookIds'] && _0x23528b[_0xbb9529(0x91e)][_0xbb9529(0x30c)] > 0x0) { const _0x46a625 = _0x23528b[_0xbb9529(0x91e)][_0xbb9529(0x48a)](_0x177966 => _0x3cf4de[_0xbb9529(0xb88)]['find'](_0x238009 => _0x238009['id'] === _0x177966))[_0xbb9529(0x3f0)](Boolean)[_0xbb9529(0x48a)](_0x65606d => _0xbb9529(0x9de) + _0x65606d[_0xbb9529(0x382)] + '\x0a' + _0x65606d[_0xbb9529(0x313)])[_0xbb9529(0x863)](''); if (_0x46a625) _0x2c2882 = _0xbb9529(0x88c) + _0x46a625; } const _0x3b326c = _0x23d9be['persona'] ? _0xbb9529(0x94a) + _0x23d9be[_0xbb9529(0x382)] + _0xbb9529(0x398) + _0x23d9be['persona'] : '', _0x4f47eb = _0x43ae40(); let _0x5f5b9b = '你还没有写日记。'; if (_0x13a9ba && _0x13a9ba['entries']) { const _0x1624bf = _0x13a9ba[_0xbb9529(0x2fc)]['filter'](_0x282759 => _0x282759[_0xbb9529(0x1b8)] === 'user')[_0xbb9529(0x7d7)](); _0x1624bf && (_0x5f5b9b = _0x1624bf['content']); } const _0x48f1e = _0xbb9529(0xb8b) + _0x23528b['name'] + _0xbb9529(0x317) + _0x23d9be['name'] + _0xbb9529(0x1a2) + _0x23d9be['name'] + _0xbb9529(0x8a0) + _0x5f5b9b + _0xbb9529(0x73b) + _0x23528b['persona'] + '\x0a' + _0x3b326c + '\x0a' + _0x2c2882 + '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20' + new Date()[_0xbb9529(0x118)](_0xbb9529(0x77e), { 'dateStyle': _0xbb9529(0x88f), 'timeStyle': _0xbb9529(0x5cf) }) + '\x0a-\x20**日记本的上一笔记录是在**:\x20' + _0x19c0c3(new Date(_0x13a9ba?.[_0xbb9529(0x2fc)]?.['at'](-0x1)?.[_0xbb9529(0x554)] || Date[_0xbb9529(0x740)]())) + _0xbb9529(0x4f8) + (_0x478a8e || _0xbb9529(0x6bd)) + _0xbb9529(0x33f) + (_0x4f47eb || '最近没有动态记录。') + _0xbb9529(0xb1b); _0x582303 = [{ 'role': _0xbb9529(0x24d), 'content': _0x48f1e }, { 'role': _0xbb9529(0x32c), 'content': _0xbb9529(0x4e2) }]; const _0x17e4e2 = await _0x63fdee(_0x582303); if (_0x17e4e2) { let _0x3f0dac = _0x3cf4de[_0xbb9529(0x865)][_0xbb9529(0x6f0)](_0x3f6b13 => _0x3f6b13[_0xbb9529(0x697)] === _0x3b2eb7); if (!_0x3f0dac) { if (_0xbb9529(0x42e) !== 'TfeIG') _0x3f0dac = { 'characterId': _0x3b2eb7, 'entries': [] }, _0x3cf4de['diaries'][_0xbb9529(0x967)](_0x3f0dac); else try { _0x3a80e9[_0x6ce170] = _0x56b73f[_0xbb9529(0x6e7)](_0x302715); } catch (_0x3958c6) { } } _0x3f0dac[_0xbb9529(0x2fc)][_0xbb9529(0x967)]({ 'timestamp': Date[_0xbb9529(0x740)](), 'author': _0x3b2eb7, 'content': _0x17e4e2 }), _0x3a3bc1(); const _0x23da5e = _0x3f0dac[_0xbb9529(0x2fc)][_0xbb9529(0x30c)]; _0x3cf4de[_0xbb9529(0x676)] = Math[_0xbb9529(0x849)](_0x23da5e / 0x2) - 0x1, _0xfe105d(); } } catch (_0x485699) { _0xbb9529(0x8db) === _0xbb9529(0x8db) ? _0x5bf34b(_0xbb9529(0x180) + _0x485699[_0xbb9529(0x99)]) : _0xa9a637[_0xbb9529(0x91e)] && _0x4cde34[_0xbb9529(0x91e)][_0xbb9529(0x30c)] > 0x0 && (_0x2dbd1b[_0xbb9529(0x91e)] = _0x527534['linkedWorldBookIds'][_0xbb9529(0x3f0)](_0x4cfa69 => !_0x475616[_0xbb9529(0x5cc)](_0x4cfa69))); } finally { _0xbb9529(0x58c) === _0xbb9529(0x58c) ? (_0x2a565e(![]), _0x3cf4de[_0xbb9529(0x2c7)] = ![]) : _0x39f011('图片处理失败:\x20' + _0x2d030c[_0xbb9529(0x99)]); } } function _0x1c8937() { const _0x526795 = _0xe59ed1, _0x30db97 = document[_0x526795(0x7ef)](_0x526795(0x5d3)), _0x576312 = document['getElementById'](_0x526795(0xaaf)), _0x937825 = document[_0x526795(0x5cb)](_0x526795(0x9c8)); _0x3cf4de[_0x526795(0x1d7)] === _0x526795(0xa38) ? 'tLnxc' !== _0x526795(0x7b9) ? (_0xb1ccb9(_0x526795(0x2b9), 'groupChatCreate'), _0x305feb(![])) : (_0x30db97[_0x526795(0x937)][_0x526795(0x8a4)] = 'none', _0x576312[_0x526795(0x937)][_0x526795(0x8a4)] = _0x526795(0x540)) : (_0x30db97['style'][_0x526795(0x8a4)] = 'block', _0x576312[_0x526795(0x937)][_0x526795(0x8a4)] = _0x526795(0xacf), setTimeout(() => { const _0xc4a60e = _0x526795; if (_0xc4a60e(0x94d) === _0xc4a60e(0x75d)) return _0x548429(new _0x391340('哼，这不是图片，你想让我压缩什么？')); else { const _0x45afc6 = _0x30db97[_0xc4a60e(0x5cb)](_0xc4a60e(0x69e)); _0x45afc6 ? _0x45afc6[_0xc4a60e(0x637)]({ 'behavior': _0xc4a60e(0x33e), 'block': 'end' }) : _0x30db97['scrollTop'] = _0x30db97['scrollHeight']; } }, 0x32)), _0x937825[_0x526795(0x937)][_0x526795(0x8a4)] = _0x526795(0x540); } function _0x54c22e() { const _0x223ae1 = _0xe59ed1, _0x5d1e23 = document[_0x223ae1(0x7ef)](_0x223ae1(0x889)), _0x3451a4 = document[_0x223ae1(0x7ef)]('galgame-text'); if (_0x3cf4de[_0x223ae1(0x4a5)][_0x223ae1(0x30c)] > 0x0) { if ('DLdtW' !== 'DLdtW') _0x5eb3b6[_0x223ae1(0x6b9)] = _0x88962f; else { const _0x33e092 = _0x3cf4de[_0x223ae1(0x4a5)][_0x223ae1(0x56a)](); _0x5d1e23['textContent'] = _0x33e092[_0x223ae1(0x5b4)] === 'narrator' ? '旁白' : _0x33e092[_0x223ae1(0x5b4)], _0x3451a4['textContent'] = _0x33e092[_0x223ae1(0x312)], _0x33e092['speaker'] !== _0x223ae1(0x785) && _0x116a4d(_0x3cf4de[_0x223ae1(0xac6)], _0x33e092[_0x223ae1(0x140)]); } } else { const _0x4a16b2 = _0x3cf4de[_0x223ae1(0x771)][_0x3cf4de['activeMeetingCharId']]; if (_0x4a16b2 && _0x4a16b2['length'] > 0x0) { if (_0x223ae1(0x777) !== _0x223ae1(0x777)) { const _0x58a6d0 = new _0x3e68fe(); _0x58a6d0[_0x223ae1(0x46c)] = () => _0x3d6c91(_0x58a6d0[_0x223ae1(0xb95)]), _0x58a6d0[_0x223ae1(0x1bb)] = _0x27798f, _0x58a6d0[_0x223ae1(0x186)](_0x423622); } else { _0x3cf4de[_0x223ae1(0x4a5)] = [..._0x4a16b2]; const _0x5472a3 = _0x3cf4de[_0x223ae1(0x4a5)][_0x223ae1(0x56a)](); _0x5d1e23[_0x223ae1(0x5f8)] = _0x5472a3[_0x223ae1(0x5b4)] === _0x223ae1(0x785) ? '旁白' : _0x5472a3['speaker'], _0x3451a4[_0x223ae1(0x5f8)] = _0x5472a3[_0x223ae1(0x312)], _0x5472a3['speaker'] !== _0x223ae1(0x785) && (_0x223ae1(0x7e1) === _0x223ae1(0x7e1) ? _0x116a4d(_0x3cf4de[_0x223ae1(0xac6)], _0x5472a3[_0x223ae1(0x140)]) : _0x1b2160[_0x223ae1(0x5f8)] = '▶'); } } else { if (_0x223ae1(0x8fa) !== _0x223ae1(0x185)) _0x5d1e23['textContent'] = '旁白', _0x3451a4[_0x223ae1(0x5f8)] = _0x223ae1(0x804); else { const _0x31bc6f = (_0x1aabb4[_0x223ae1(0xae0)] ?? _0x358a30[_0x223ae1(0xb07)] ?? _0x2694d3['emote'] ?? _0x3054b2[_0x223ae1(0x7ec)])?.[_0x223ae1(0x4ca)](); if (_0x31bc6f && _0x13162c['has'](_0x31bc6f)) _0x1a0fa8['events'][_0x223ae1(0x967)]({ 'senderId': _0x54a5de['id'], 'kind': _0x223ae1(0xae0), 'sticker': _0x31bc6f }); else { const _0x113398 = _0x2528df(_0x1c313d[_0x223ae1(0x313)] ?? _0x3bd701[_0x223ae1(0x993)] ?? '')['trim']() || '[sticker:' + (_0x31bc6f || '未知表情') + ']'; if (_0x113398) _0x17d20b[_0x223ae1(0x1d2)][_0x223ae1(0x967)]({ 'senderId': _0x4b2723['id'], 'kind': _0x223ae1(0x993), 'content': _0x113398 }); } } } } } async function _0x116a4d(_0x211f7a, _0x50b378) { const _0x20a56c = _0xe59ed1; if ('sNsDy' === 'sNsDy') { const _0x4f7f87 = document[_0x20a56c(0x7ef)]('galgame-sprite'), _0x29ca20 = document['getElementById']('galgame-sprite-container'), _0x7eda45 = _0xd97907(_0x211f7a), _0x5bb43 = _0x7eda45?.['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x4ddbc8 = 0x50 * _0x5bb43[_0x20a56c(0x545)]; _0x29ca20[_0x20a56c(0x937)][_0x20a56c(0x293)] = _0x4ddbc8 + '%', _0x29ca20[_0x20a56c(0x937)][_0x20a56c(0x198)] = _0x4ddbc8 + '%', _0x29ca20[_0x20a56c(0x937)][_0x20a56c(0x54a)] = _0x5bb43['x'] + '%', _0x29ca20[_0x20a56c(0x937)][_0x20a56c(0x1b0)] = _0x5bb43['y'] + '%', _0x29ca20[_0x20a56c(0x937)]['transform'] = 'translate(-50%,\x20-100%)', _0x29ca20[_0x20a56c(0x937)][_0x20a56c(0xc5)] = _0x20a56c(0x33e); const _0x3f6745 = [_0x20a56c(0x9e5), 'happy', _0x20a56c(0xe3), _0x20a56c(0x9a4), 'shy'], _0x4db075 = _0x3f6745[_0x20a56c(0x5cc)](_0x50b378) ? _0x50b378 : _0x20a56c(0x9e5); try { if (_0x20a56c(0x8e5) === _0x20a56c(0x8e5)) { const _0x217659 = await _0x47b504(_0x20a56c(0xb51) + _0x4db075 + '_' + _0x211f7a); if (_0x217659) _0x4f7f87[_0x20a56c(0x557)] && _0x4f7f87[_0x20a56c(0x937)][_0x20a56c(0x52e)] !== '0' ? 'bbWGF' === _0x20a56c(0x41c) ? (_0x4f7f87['style']['opacity'] = 0x0, setTimeout(() => { const _0x5c18a5 = _0x20a56c; if (_0x5c18a5(0x92a) === _0x5c18a5(0x3a2)) { const _0x102e06 = { 'id': _0x227501['id'], 'url': _0x2a39dc[_0x5c18a5(0x4c7)] }; _0x59b0c1(this, _0x102e06); } else _0x4f7f87[_0x5c18a5(0x557)] = URL[_0x5c18a5(0x9e4)](_0x217659), _0x4f7f87['style'][_0x5c18a5(0x52e)] = 0x1; }, 0x96)) : _0x682ac0(_0x372839) : (_0x4f7f87[_0x20a56c(0x557)] = URL[_0x20a56c(0x9e4)](_0x217659), _0x4f7f87[_0x20a56c(0x937)]['opacity'] = 0x1); else { const _0x14693b = await _0x47b504(_0x20a56c(0xac7) + _0x211f7a); _0x4f7f87[_0x20a56c(0x557)] = _0x14693b ? URL[_0x20a56c(0x9e4)](_0x14693b) : ''; } } else { const _0x3dbdf6 = _0x62f282[_0x20a56c(0x3ec)]['find'](_0x1a48bb => _0x1a48bb['id'] === _0xa20bb5['boundUserProfileId']) || { 'name': _0x20a56c(0x875) }, _0x749357 = _0x2e54f4[_0x20a56c(0xb60)](_0x20a56c(0xb0b)); _0x749357[_0x20a56c(0x199)] = _0x20a56c(0x88d), _0x749357[_0x20a56c(0x361)]['id'] = _0x1060ce['id'], _0x749357[_0x20a56c(0x252)] = _0x20a56c(0xb61) + _0x2a8d4c[_0x20a56c(0x382)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x3dbdf6[_0x20a56c(0x382)] + _0x20a56c(0x2cc) + _0x4f7253[_0x20a56c(0x4c3)]['length'] + _0x20a56c(0x383), _0x749357[_0x20a56c(0x25c)]('click', () => _0x901dbd(_0x39fe99['id'])), _0x413f43['appendChild'](_0x749357); } } catch (_0x111575) { _0x20a56c(0x3e3) !== 'ZuRDG' ? _0x423a1f[_0x20a56c(0x8fe)](_0x4a14aa['createElement'](_0x20a56c(0xb0b))) : (console[_0x20a56c(0x5e3)](_0x20a56c(0x790), _0x111575), _0x4f7f87[_0x20a56c(0x557)] = ''); } } else _0x456f59['quotedMessage'] = { ..._0x17c995[_0x20a56c(0xa0e)] }; } let _0x5664de = ![], _0x901144 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x29f250 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x17b)), _0x40391e = document['getElementById']('sprite-confirm-button'), _0x40ab54 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x353)), _0x584851 = document['getElementById'](_0xe59ed1(0xa46)), _0x5c99ac = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa45)), _0x3f6d13 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x8c0)), _0x38d7c2 = document['getElementById'](_0xe59ed1(0x4e5)), _0xe076e0 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x5f4)); let _0x1f3cd9 = {}; function _0x33a519() { const _0x4583bd = _0xe59ed1; if (_0x4583bd(0x5a6) !== _0x4583bd(0x5a6)) _0x494ac1[_0x4583bd(0x4ad)]['remove'](_0x4583bd(0xfb)); else { const _0x527c41 = _0xd97907(_0x3cf4de[_0x4583bd(0xac6)]); if (!_0x527c41) return; _0x5664de = !![], _0x5c99ac['style']['display'] = _0x4583bd(0x540); const _0x4bb94e = _0x527c41[_0x4583bd(0xa82)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x4583bd(0x7ef)](_0x4583bd(0x1f2))['value'] = _0x4bb94e['x'], document[_0x4583bd(0x7ef)]('sprite-slider-y')[_0x4583bd(0x35c)] = _0x4bb94e['y'], document['getElementById'](_0x4583bd(0x6a1))[_0x4583bd(0x35c)] = _0x4bb94e[_0x4583bd(0x545)] * 0x64, _0x1f3cd9 = { ..._0x4bb94e }, document[_0x4583bd(0x7ef)]('galgame-textbox-container')[_0x4583bd(0x937)][_0x4583bd(0x8a4)] = _0x4583bd(0xacf), document[_0x4583bd(0x7ef)]('galgame-sprite-adjust-ui')[_0x4583bd(0x937)]['display'] = _0x4583bd(0xacf); } } function _0x767d62(_0xbe8b20 = ![]) { const _0x27c1ed = _0xe59ed1; _0x5664de = ![], _0x5c99ac[_0x27c1ed(0x937)]['display'] = _0x27c1ed(0xacf), document['getElementById'](_0x27c1ed(0xb8e))[_0x27c1ed(0x937)]['display'] = 'block', document[_0x27c1ed(0x7ef)]('galgame-sprite-adjust-ui')[_0x27c1ed(0x937)][_0x27c1ed(0x8a4)] = _0x27c1ed(0x540); if (!_0xbe8b20) { if (_0x27c1ed(0x6f9) === _0x27c1ed(0x6f9)) { const _0x3b4c0b = _0xd97907(_0x3cf4de['activeMeetingCharId']); _0x3b4c0b && (_0x3b4c0b['spriteTransform'] = _0x1f3cd9, _0x116a4d(_0x3cf4de[_0x27c1ed(0xac6)], _0x27c1ed(0x9e5))); } else _0x49d2a1[_0x27c1ed(0x5f8)] = _0x3e4238[_0x27c1ed(0x5b4)] === _0x27c1ed(0x785) ? '旁白' : _0x1e9c21[_0x27c1ed(0x5b4)], _0x14043c[_0x27c1ed(0x5f8)] = _0x17e522['line'], _0x2410c2[_0x27c1ed(0x5b4)] === _0x67f99a['name'] ? _0x41d588(_0x597498, _0x44f839['emotion']) : _0x32524c(_0x5384d0, _0x27c1ed(0x9e5)); } } function _0x3c9050() { const _0x3bda13 = _0xe59ed1; if ('cUSqD' === _0x3bda13(0x415)) _0x4926e9[_0x3bda13(0x8fe)](_0x2fa5b0); else { const _0x18165a = _0xd97907(_0x3cf4de['activeMeetingCharId']); if (!_0x18165a) return; const _0x4d813d = parseFloat(document[_0x3bda13(0x7ef)]('sprite-slider-x')['value']), _0x4628cd = parseFloat(document['getElementById'](_0x3bda13(0x121))[_0x3bda13(0x35c)]), _0x556b11 = parseFloat(document['getElementById'](_0x3bda13(0x6a1))['value']) / 0x64; _0x18165a[_0x3bda13(0xa82)] = { 'x': _0x4d813d, 'y': _0x4628cd, 'scale': _0x556b11 }, _0x3a3bc1(), _0x5bf34b('哼，就按你说的办好了。'), _0x767d62(!![]); } } function _0x375878() { const _0x2c268d = _0xe59ed1; _0x56efd8(_0x2c268d(0x54c))[_0x2c268d(0x683)](_0x345590 => { const _0x3910e0 = _0x2c268d; if (_0x3910e0(0x323) !== _0x3910e0(0x323)) { const _0x170424 = ['星期日', _0x3910e0(0xb6a), _0x3910e0(0x38e), _0x3910e0(0x21f), _0x3910e0(0x24c), _0x3910e0(0x656), '星期六']; return _0x170424[_0x51a133['getDay']()] + '\x20' + _0x529443; } else { if (_0x345590) { if (_0x3910e0(0x1ab) === _0x3910e0(0x682)) _0x5aa2b8 = !_0x4c3ec5, _0x351dac[_0x3910e0(0x4ad)]['toggle']('deletion-mode', _0x1a2eb4), _0x3018cf[_0x3910e0(0x5f8)] = _0x3ea6e3 ? '完成' : '管理', _0x8f6c06['style'][_0x3910e0(0x8a4)] = _0x481cc3 ? _0x3910e0(0x540) : _0x3910e0(0xacf), !_0x3cb39b && (_0x356437[_0x3910e0(0x53f)](_0x3910e0(0xa16))[_0x3910e0(0x8cf)](_0x99f9af => _0x99f9af[_0x3910e0(0x4ad)][_0x3910e0(0x713)](_0x3910e0(0x244))), _0x2f7d27['classList'][_0x3910e0(0x713)](_0x3910e0(0x5d1))); else { const _0xbe2d6b = _0xd97907(_0x3cf4de[_0x3910e0(0xac6)]); _0xbe2d6b && (delete _0xbe2d6b[_0x3910e0(0xa82)], _0x3a3bc1(), _0x116a4d(_0xbe2d6b['id'], _0x3910e0(0x9e5)), _0x5bf34b(_0x3910e0(0x641)), _0x767d62(!![])); } } } }); } function _0x4154b3() { const _0x1ae775 = _0xe59ed1; if ('zuiVp' === _0x1ae775(0x406)) _0x2a582e[_0x1ae775(0x937)]['backgroundImage'] = ''; else { if (!_0x5664de) return; const _0x1c3d09 = _0x3cf4de[_0x1ae775(0xac6)], _0x58e5f2 = _0xd97907(_0x1c3d09); if (!_0x58e5f2) return; const _0x40aff6 = parseFloat(document[_0x1ae775(0x7ef)](_0x1ae775(0x1f2))['value']), _0x4877eb = parseFloat(document[_0x1ae775(0x7ef)]('sprite-slider-y')['value']), _0x3b0673 = parseFloat(document[_0x1ae775(0x7ef)](_0x1ae775(0x6a1))['value']) / 0x64; _0x58e5f2[_0x1ae775(0xa82)] = { 'x': _0x40aff6, 'y': _0x4877eb, 'scale': _0x3b0673 }; const _0x1ee66b = document[_0x1ae775(0x7ef)]('galgame-sprite-container'), _0x2f0296 = 0x50 * _0x3b0673; _0x1ee66b[_0x1ae775(0x937)][_0x1ae775(0x293)] = _0x2f0296 + '%', _0x1ee66b[_0x1ae775(0x937)][_0x1ae775(0x198)] = _0x2f0296 + '%', _0x1ee66b[_0x1ae775(0x937)][_0x1ae775(0x54a)] = _0x40aff6 + '%', _0x1ee66b[_0x1ae775(0x937)][_0x1ae775(0x1b0)] = _0x4877eb + '%', _0x1ee66b[_0x1ae775(0x937)][_0x1ae775(0x40a)] = _0x1ae775(0x133); } } document[_0xe59ed1(0x7ef)]('sprite-slider-x')['addEventListener'](_0xe59ed1(0x9cc), _0x4154b3), document['getElementById'](_0xe59ed1(0x121))['addEventListener'](_0xe59ed1(0x9cc), _0x4154b3), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x6a1))['addEventListener'](_0xe59ed1(0x9cc), _0x4154b3), _0x29f250[_0xe59ed1(0x25c)]('click', _0x33a519), _0x40391e['addEventListener'](_0xe59ed1(0x2c5), _0x3c9050), _0x40ab54[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x767d62(![])), _0x584851[_0xe59ed1(0x25c)]('click', _0x375878); function _0x5c21c8(_0x14c738) { const _0x42f084 = _0xe59ed1; if (_0x42f084(0x808) !== _0x42f084(0x36b)) { const _0x35fc40 = _0xd97907(_0x14c738); if (!_0x35fc40) return; const _0x5611b7 = _0x3cf4de[_0x42f084(0x27a)]['find'](_0x233089 => _0x233089[_0x42f084(0x76d)] === 'private' && _0x233089['participantIds'][_0x42f084(0x5cc)](_0x14c738)), _0x2a548f = _0x1af79f(_0x5611b7['id']), _0x4c96ff = _0x3cf4de[_0x42f084(0x103)]['filter'](_0x57ba64 => _0x57ba64[_0x42f084(0x8f5)])[_0x42f084(0x7d7)](), _0x5081ec = document[_0x42f084(0x7ef)](_0x42f084(0x889)), _0x314961 = document['getElementById']('galgame-text'); let _0x211efc = null; if (_0x4c96ff) { if (_0x42f084(0x3db) === _0x42f084(0x3db)) { if (_0x4c96ff[_0x42f084(0x84c)] === _0x42f084(0x78b)) { const _0xcae1fd = _0x3cf4de[_0x42f084(0x771)][_0x14c738]; _0xcae1fd && _0xcae1fd[_0x42f084(0x30c)] > 0x0 && (_0x211efc = _0xcae1fd['at'](-0x1)); } else _0x211efc = { 'speaker': _0x2a548f[_0x42f084(0x382)], 'line': _0x4c96ff[_0x42f084(0x313)], 'emotion': _0x42f084(0x9e5) }; } else { const _0x3206cd = new _0x5358df(), _0x213eaa = _0x43a9bf[_0x42f084(0x7ef)](_0x42f084(0xa8f)), _0x5d5664 = _0x389d2e['getElementById']('snoop-home-date'), _0x374fdb = _0x15e02f['getElementById'](_0x42f084(0x36e)); _0x213eaa && _0x5d5664 && (_0x213eaa[_0x42f084(0x5f8)] = _0x3206cd[_0x42f084(0x86a)](_0x42f084(0x77e), { 'hour': '2-digit', 'minute': _0x42f084(0x56f), 'hour12': ![] }), _0x5d5664[_0x42f084(0x5f8)] = _0x3206cd[_0x42f084(0xa15)](_0x42f084(0x77e), { 'month': _0x42f084(0x541), 'day': _0x42f084(0x73e), 'weekday': _0x42f084(0x541) })), _0x374fdb && (_0x374fdb['innerHTML'] = _0x42f084(0x67a) + _0x3206cd[_0x42f084(0x86a)]('zh-CN', { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }) + _0x42f084(0xb62)); } } _0x211efc ? _0x42f084(0xa2b) === _0x42f084(0xa2b) ? (_0x5081ec[_0x42f084(0x5f8)] = _0x211efc['speaker'] === _0x42f084(0x785) ? '旁白' : _0x211efc[_0x42f084(0x5b4)], _0x314961[_0x42f084(0x5f8)] = _0x211efc['line'], _0x211efc[_0x42f084(0x5b4)] === _0x35fc40[_0x42f084(0x382)] ? _0x116a4d(_0x14c738, _0x211efc['emotion']) : _0x116a4d(_0x14c738, 'normal')) : _0x51e698(_0x46f42a[_0x42f084(0x5b1)]) : (_0x5081ec[_0x42f084(0x5f8)] = _0x35fc40['name'], _0x314961[_0x42f084(0x5f8)] = _0x42f084(0x741), _0x116a4d(_0x14c738, _0x42f084(0x9e5))); } else { _0x12ec71(_0x42f084(0x151)); return; } } function _0x41e8b2() { const _0x2aae18 = _0xe59ed1, _0x4695a0 = new Date(), _0x287a65 = document[_0x2aae18(0x7ef)](_0x2aae18(0x945)), _0x14a889 = document[_0x2aae18(0x7ef)](_0x2aae18(0x766)); if (_0x287a65 && _0x14a889) { if (_0x2aae18(0x564) === _0x2aae18(0x564)) { const _0x471ac4 = String(_0x4695a0[_0x2aae18(0x669)]())[_0x2aae18(0x5b5)](0x2, '0'), _0x29fb95 = String(_0x4695a0[_0x2aae18(0x33a)]())['padStart'](0x2, '0'); _0x287a65[_0x2aae18(0x5f8)] = _0x471ac4 + ':' + _0x29fb95; const _0x8a071f = _0x4695a0[_0x2aae18(0x677)]() + 0x1, _0x22dcdb = _0x4695a0[_0x2aae18(0x5c3)](), _0x55445a = [_0x2aae18(0x59b), '星期一', '星期二', _0x2aae18(0x21f), _0x2aae18(0x24c), '星期五', _0x2aae18(0xfd)][_0x4695a0[_0x2aae18(0xa72)]()]; _0x14a889[_0x2aae18(0x5f8)] = _0x8a071f + '月' + _0x22dcdb + '日\x20' + _0x55445a; } else { if (_0x1319f3) _0x26584f[_0x2aae18(0x557)] = _0x293369['createObjectURL'](_0x4fd3e0); } } } const _0x1d10f9 = document['getElementById'](_0xe59ed1(0x373)), _0x420165 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x61b)), _0x173e2a = document[_0xe59ed1(0x7ef)]('cancel-listen-together'), _0x480dcf = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x181)), _0x3903c6 = document[_0xe59ed1(0x7ef)]('listen-together-song-list'), _0x450910 = document[_0xe59ed1(0x7ef)]('unified-audio-player'), _0x2bb107 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0xa74)), _0x1a3c90 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x475)), _0x1be786 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x908)); let _0x468a85 = [], _0x5a0190 = ![]; async function _0x36a32c() { const _0x14b702 = _0xe59ed1; if (!_0x3cf4de[_0x14b702(0xa9a)]) return; _0x3903c6[_0x14b702(0x252)] = _0x14b702(0x666), _0x1d10f9[_0x14b702(0x4ad)]['add'](_0x14b702(0xfb)); const _0x5d58b3 = await _0x1db9d2(); if (_0x5d58b3['length'] === 0x0) { _0x3903c6[_0x14b702(0x252)] = _0x14b702(0x4db); return; } _0x3903c6[_0x14b702(0x252)] = '', _0x5d58b3[_0x14b702(0x8cf)](_0x473921 => { const _0x485fac = _0x14b702, _0x3892ed = document[_0x485fac(0xb60)]('div'); _0x3892ed[_0x485fac(0x199)] = _0x485fac(0x72f); const _0x3e8d0f = _0x473921[_0x485fac(0xa99)] ? URL['createObjectURL'](_0x473921[_0x485fac(0xa99)]) : _0x574d9b; _0x3892ed[_0x485fac(0x252)] = _0x485fac(0x4d0) + _0x3e8d0f + _0x485fac(0x60f) + (_0x473921[_0x485fac(0x718)][_0x485fac(0x536)] || _0x485fac(0x546)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x473921[_0x485fac(0x718)]['歌手'] || _0x485fac(0x518)) + _0x485fac(0xb34), _0x3892ed['addEventListener'](_0x485fac(0x2c5), () => { _0x3e3410(_0x473921); }), _0x3903c6[_0x485fac(0x8fe)](_0x3892ed); }); } function _0x6b99f5() { const _0x8eb428 = _0xe59ed1; _0x8eb428(0x7c3) !== _0x8eb428(0x3ea) ? _0x1d10f9[_0x8eb428(0x4ad)][_0x8eb428(0x713)]('show') : _0x3fe339[_0x8eb428(0xaca)]['abort'](_0x8eb428(0x608)); } async function _0x3e3410(_0xa981b2) { const _0x410029 = _0xe59ed1; if (_0x410029(0xaac) === _0x410029(0x73a)) { const _0x38a91d = _0x4c6417[_0x410029(0x13b)]['files'][0x0]; if (!_0x38a91d) return; const _0x346966 = _0x345fb0['createObjectURL'](_0x38a91d); _0x5bb06e['getElementById'](_0x410029(0x270))[_0x410029(0x937)][_0x410029(0x6aa)] = _0x410029(0x550) + _0x346966 + '\x27)'; } else { if (!_0x3cf4de[_0x410029(0xa9a)] || !_0xa981b2) return; let _0x8c2c41 = null; if (_0xa981b2[_0x410029(0xa99)]) try { _0x8c2c41 = 'music_cover_' + Date[_0x410029(0x740)]() + '_' + Math[_0x410029(0x758)](), await _0x30635e(_0x8c2c41, _0xa981b2['cover']); } catch (_0x1243dd) { if (_0x410029(0xab6) === _0x410029(0x727)) { const _0xaecbfc = _0x307bf2[_0x410029(0x6e7)](_0x16b09a); _0x7f2a72[_0x410029(0x9a1)](_0xaecbfc) ? _0x45a674 = [..._0x55639b, ..._0xaecbfc] : _0x5f0d20 = _0x317883; } else console[_0x410029(0x5e3)](_0x410029(0x9aa), _0x1243dd); } const _0x5b62a9 = { 'role': _0x410029(0x32c), 'type': _0x410029(0x59f), 'content': _0x410029(0x9ba) + _0xa981b2['info'][_0x410029(0x536)] + ']', 'songId': _0xa981b2['id'], 'songName': _0xa981b2['info'][_0x410029(0x536)], 'artist': _0xa981b2[_0x410029(0x718)]['歌手'], 'coverId': _0x8c2c41, 'timestamp': Date[_0x410029(0x740)]() }; _0x3cf4de[_0x410029(0x103)][_0x410029(0x967)](_0x5b62a9), _0x162973(), _0x200086(), _0x6b99f5(), setTimeout(_0xe6ae60, 0x64); } } _0x420165['addEventListener'](_0xe59ed1(0x2c5), _0x36a32c), _0x173e2a[_0xe59ed1(0x25c)]('click', _0x6b99f5), _0x480dcf[_0xe59ed1(0x25c)]('click', _0x6b99f5); async function _0x2f01d1(_0x1246cb, _0x480ebb, _0x2692cb) { const _0x5e62ca = _0xe59ed1; if (_0x5e62ca(0x7ab) === _0x5e62ca(0x2d7)) try { _0x1d1055[_0x5e62ca(0x531)]('musicPlayerState', _0xb9b5d4['stringify']({ 'playlist': _0x21e0ea[_0x5e62ca(0xaab)], 'currentIndex': _0x28a9ea[_0x5e62ca(0x627)] })); } catch (_0xd651ee) { _0x152c46[_0x5e62ca(0x5e3)](_0x5e62ca(0x52c), _0xd651ee); } else { if (_0x5a0190) return; _0x5a0190 = !![]; try { const _0x2f4986 = _0x3cf4de['chats']['find'](_0x6e08b => _0x6e08b['activeListenSession'] && _0x6e08b[_0x5e62ca(0x671)][_0x5e62ca(0x644)]), _0x5c16f9 = _0x5234d7(); if (_0x2f4986 && _0x2f4986['id'] !== _0x5c16f9['id']) _0x2f4986[_0x5e62ca(0x671)] = null, _0x5bf34b(_0x5e62ca(0x906)), _0x3a3bc1(); else { if (_0x2f4986 && _0x2f4986['id'] === _0x5c16f9['id']) { if (_0x5e62ca(0x3b5) === _0x5e62ca(0x3b5)) _0x5bf34b('正在为你切换新的歌曲...'); else { const _0x351405 = _0x542426['toLowerCase'](); if (_0x5d4312[_0x5e62ca(0xa9f)](_0x1f502d => _0x351405['startsWith'](_0x1f502d))) { const _0x5395ab = _0xf2a574[_0x80615a]; if (typeof _0x5395ab === 'string') _0x2c1a13['push'](_0x5395ab); if (_0x32d662[_0x5e62ca(0x9a1)](_0x5395ab)) _0x5395ab[_0x5e62ca(0x8cf)](_0x4b7712 => { const _0x3d6b7c = _0x5e62ca; if (typeof _0x4b7712 === _0x3d6b7c(0xf4)) _0x21fd22[_0x3d6b7c(0x967)](_0x4b7712); }); } } } } _0x2a565e(!![], _0x5e62ca(0x7b4)); if (!_0x5c16f9) { _0x2a565e(![]), _0x5bf34b(_0x5e62ca(0x610)); return; } const _0x79df = await _0x454120(_0x1246cb); if (!_0x79df) { if (_0x5e62ca(0x556) === _0x5e62ca(0x852)) { const _0x1840cc = _0x5d908a[_0x5e62ca(0x6b6)]('musicPlayerState'); if (_0x1840cc) { const { playlist: _0x3a9773, currentIndex: _0x1f6191 } = _0x3703c3['parse'](_0x1840cc); _0x258b6b[_0x5e62ca(0x9a1)](_0x3a9773) && _0x3a9773[_0x5e62ca(0x30c)] > 0x0 && _0x1f6191 > -0x1 && (_0x1d6a63['musicPlaylist'] = _0x3a9773, _0x796403['currentlyPlayingIndex'] = _0x1f6191, _0x598b13[_0x5e62ca(0x5e9)] = ![], _0x26f680()); } } else { _0x2a565e(![]), _0x5bf34b(_0x5e62ca(0xac2)); return; } } _0x5c16f9[_0x5e62ca(0x671)] = { 'isActive': !![], 'songId': _0x1246cb, 'leaderId': _0x5e62ca(0x32c), 'songName': _0x79df[_0x5e62ca(0x718)]['歌曲名称'], 'artist': _0x79df[_0x5e62ca(0x718)]['歌手'], 'cover': _0x79df[_0x5e62ca(0xa99)] }, _0x3a3bc1(), document[_0x5e62ca(0x7ef)](_0x5e62ca(0x7e5))[_0x5e62ca(0x557)] = _0x79df[_0x5e62ca(0xa99)] ? URL['createObjectURL'](_0x79df[_0x5e62ca(0xa99)]) : _0x574d9b, document[_0x5e62ca(0x7ef)](_0x5e62ca(0xb16))[_0x5e62ca(0x5f8)] = _0x79df[_0x5e62ca(0x718)][_0x5e62ca(0x536)], document[_0x5e62ca(0x7ef)](_0x5e62ca(0x3d6))[_0x5e62ca(0x5f8)] = _0x79df['info']['歌手'], _0x126632(_0x79df), _0x2bb107[_0x5e62ca(0x937)][_0x5e62ca(0x8a4)] = _0x5e62ca(0x98c), setTimeout(() => _0x2bb107['classList'][_0x5e62ca(0x44c)]('show'), 0xa), _0x2692cb[_0x5e62ca(0x252)] = _0x5e62ca(0x912) + _0x2692cb[_0x5e62ca(0x5cb)](_0x5e62ca(0x5ee))[_0x5e62ca(0x5ad)], _0x3cf4de[_0x5e62ca(0x103)][_0x480ebb] && (_0x5e62ca(0x1cd) !== _0x5e62ca(0x154) ? (_0x3cf4de[_0x5e62ca(0x103)][_0x480ebb][_0x5e62ca(0x684)] = !![], _0x162973()) : (_0x31d80f[_0x5e62ca(0x5e3)](_0x5e62ca(0x276), _0x2090b4), _0x1fdd1c('导出失败了，哼:\x20' + _0x3004b5[_0x5e62ca(0x99)]))), _0x2a565e(![]), _0x42f4f1(_0x1246cb, [_0x1246cb]), _0xcac1e4(_0x79df, !![]); } finally { _0x5a0190 = ![]; } } } function _0x341ff2() { const _0x390188 = _0xe59ed1; if (_0x390188(0x325) === _0x390188(0xaf2)) _0x34eac5[_0x390188(0x65e)](_0x390188(0x524) + _0x443736); else { const _0x193730 = _0x3cf4de[_0x390188(0x27a)][_0x390188(0x6f0)](_0x3ea9b3 => _0x3ea9b3['activeListenSession'] && _0x3ea9b3[_0x390188(0x671)][_0x390188(0x644)]); _0x193730 && (_0x193730['activeListenSession'] = null, _0x3a3bc1(), _0x5bf34b(_0x390188(0x633)), _0xcac1e4(), _0x2bb107[_0x390188(0x4ad)]['remove'](_0x390188(0xfb)), setTimeout(() => _0x2bb107[_0x390188(0x937)][_0x390188(0x8a4)] = _0x390188(0xacf), 0x12c)); } } function _0x38a7d7(_0x355e1c) { const _0x379e2b = _0xe59ed1; if (!_0x355e1c) return []; const _0x209cb4 = _0x355e1c[_0x379e2b(0x35a)]('\x0a'), _0x52fadd = [], _0x36b15f = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0xf279a8 of _0x209cb4) { if (_0x379e2b(0x357) !== 'NIhAk') { const _0x529f91 = _0x604f0d['value']['trim'](); if (!_0x529f91) { _0x270838(_0x379e2b(0xaea)); return; } const _0xc449ef = _0x2316bb[_0x379e2b(0x60a)](_0x1c5d49[_0x379e2b(0x53f)]('input[type=\x22checkbox\x22]:checked'))[_0x379e2b(0x48a)](_0xe6bc52 => _0xe6bc52[_0x379e2b(0x361)]['id']); if (_0xc449ef[_0x379e2b(0x30c)] < 0x2) { _0x3bbd6a('群聊至少需要2名成员。'); return; } const _0x106173 = { 'id': _0x379e2b(0x905) + _0xb80cef['now'](), 'type': _0x379e2b(0x861), 'name': _0x529f91, 'participantIds': _0xc449ef }; _0x3f33b8[_0x379e2b(0x27a)]['push'](_0x106173), _0x4d379d[_0x379e2b(0xa9a)] = _0x106173['id'], _0x2d416b(), _0x196935(), _0x16a518(), _0x2df1e2(), _0x567215(_0x379e2b(0x539) + _0x529f91 + _0x379e2b(0x767)), _0xde910e(_0x379e2b(0x2b9), _0x379e2b(0x13c)); } else { const _0x2ca588 = _0xf279a8[_0x379e2b(0xd2)](_0x36b15f); if (_0x2ca588) { const _0x3eedcf = parseInt(_0x2ca588[0x1], 0xa), _0x30e7e7 = parseInt(_0x2ca588[0x2], 0xa), _0x5b2930 = parseInt(_0x2ca588[0x3], 0xa) * (_0x2ca588[0x3][_0x379e2b(0x30c)] === 0x2 ? 0xa : 0x1), _0x3b32c1 = _0x3eedcf * 0x3c + _0x30e7e7 + _0x5b2930 / 0x3e8, _0x143dc3 = _0xf279a8[_0x379e2b(0xb53)](_0x36b15f, '')[_0x379e2b(0x4ca)](); _0x143dc3 && _0x52fadd[_0x379e2b(0x967)]({ 'time': _0x3b32c1, 'text': _0x143dc3 }); } } } return _0x52fadd; } function _0x126632(_0x77679b) { const _0x4798e6 = _0xe59ed1; _0x468a85 = _0x38a7d7(_0x77679b[_0x4798e6(0x602)]), _0x1be786[_0x4798e6(0x252)] = ''; if (_0x468a85[_0x4798e6(0x30c)] === 0x0) { if (_0x4798e6(0x726) !== _0x4798e6(0x726)) _0x2ce69d = _0x186a2b, _0x307fb1[_0x4798e6(0x4ad)][_0x4798e6(0x44c)](_0x4798e6(0xfb)); else { _0x1be786['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } } _0x468a85[_0x4798e6(0x8cf)]((_0x409688, _0x433ca) => { const _0x4d220a = _0x4798e6; if (_0x4d220a(0x4ff) !== _0x4d220a(0xa2d)) { const _0x39f546 = document[_0x4d220a(0xb60)]('p'); _0x39f546[_0x4d220a(0x5f8)] = _0x409688[_0x4d220a(0x993)], _0x39f546['id'] = _0x4d220a(0x982) + _0x433ca, _0x1be786[_0x4d220a(0x8fe)](_0x39f546); } else { _0xd7f604[_0x4d220a(0x71a)][_0x4d220a(0x1a0)] = _0x24aa14[_0x4d220a(0x35c)]['trim'](), _0x5728a8[_0x4d220a(0x71a)][_0x4d220a(0x6bc)] = _0xd6709a[_0x4d220a(0x35c)][_0x4d220a(0x4ca)](), _0x3264a2[_0x4d220a(0x71a)][_0x4d220a(0x76b)] = _0x1572b2[_0x4d220a(0x35c)][_0x4d220a(0x4ca)](), _0x572d8d['apiSettings'][_0x4d220a(0x591)] = _0x482464['getElementById'](_0x4d220a(0x940))[_0x4d220a(0x35c)]; const _0x43c809 = _0x5d9922(_0x986743['value'], 0xa); _0x2e3c9e[_0x4d220a(0x84a)][_0x4d220a(0xb59)] = _0x10a621[_0x4d220a(0x4ba)](_0x43c809) && _0x43c809 > 0x0 ? _0x43c809 : 0x64, _0x27b5ef(), _0x3ea211('设置已保存！'); } }); } function _0x35c23e(_0xbdce4a, _0x38be5e, _0x1ae187, _0x5e735f) { const _0x12f59d = _0xe59ed1, _0xe8b9d4 = (_0x5e735f - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0xbdce4a + _0x1ae187 * Math[_0x12f59d(0x245)](_0xe8b9d4), 'y': _0x38be5e + _0x1ae187 * Math[_0x12f59d(0x19a)](_0xe8b9d4) }; } function _0x3bdf91(_0x471143) { const _0x4a6071 = _0xe59ed1, _0x575397 = _0x4a6071(0x5d9), _0xef334b = document[_0x4a6071(0x746)](_0x575397, _0x4a6071(0x7da)), _0x44c3f = 0xfa, _0x24eefa = _0x44c3f / 0x2, _0xe550c6 = _0x44c3f / 0x2, _0x8763b7 = _0x44c3f / 0x2 - 0x14; _0xef334b[_0x4a6071(0x2e8)](_0x4a6071(0x198), '100%'), _0xef334b[_0x4a6071(0x2e8)](_0x4a6071(0x293), _0x4a6071(0xac9)), _0xef334b[_0x4a6071(0x2e8)](_0x4a6071(0x5ae), '0\x200\x20' + _0x44c3f + '\x20' + _0x44c3f); const _0x342a36 = Object[_0x4a6071(0x311)](_0x471143)['reduce']((_0x18def8, _0xc648c7) => _0x18def8 + _0xc648c7, 0x0); if (_0x342a36 === 0x0) return _0xef334b; let _0x3bdb53 = -0x5a; const _0x28dfc6 = ['#66b3ff', _0x4a6071(0x867), _0x4a6071(0x830), '#ff9999', _0x4a6071(0x523), '#ffb366', _0x4a6071(0x343), _0x4a6071(0x9eb)]; let _0x5b2192 = 0x0; for (const _0x473cf9 in _0x471143) { if (_0x4a6071(0x45d) !== _0x4a6071(0x2f7)) { const _0xefc03d = _0x471143[_0x473cf9]; if (_0xefc03d <= 0x0) continue; const _0x2ec287 = _0xefc03d / _0x342a36 * 0x168, _0x33968f = _0x3bdb53 + _0x2ec287, _0x59ad3d = _0x35c23e(_0x24eefa, _0xe550c6, _0x8763b7, _0x33968f), _0x5baed8 = _0x35c23e(_0x24eefa, _0xe550c6, _0x8763b7, _0x3bdb53), _0x5ca4bb = _0x2ec287 > 0xb4 ? '1' : '0', _0x1c66c6 = ['M', _0x59ad3d['x'], _0x59ad3d['y'], 'A', _0x8763b7, _0x8763b7, 0x0, _0x5ca4bb, 0x1, _0x5baed8['x'], _0x5baed8['y'], 'L', _0x24eefa, _0xe550c6, 'Z']['join']('\x20'), _0x17230c = document[_0x4a6071(0x746)](_0x575397, _0x4a6071(0xcf)); _0x17230c[_0x4a6071(0x2e8)]('d', _0x1c66c6), _0x17230c['setAttribute'](_0x4a6071(0x618), _0x28dfc6[_0x5b2192 % _0x28dfc6[_0x4a6071(0x30c)]]), _0x5b2192++; const _0x29ba44 = document[_0x4a6071(0x746)](_0x575397, 'title'); _0x29ba44['textContent'] = _0x473cf9 + ':\x20' + _0xefc03d[_0x4a6071(0x196)](0x2) + '\x20(' + (_0xefc03d / _0x342a36 * 0x64)[_0x4a6071(0x196)](0x1) + '%)', _0x17230c[_0x4a6071(0x8fe)](_0x29ba44), _0xef334b['appendChild'](_0x17230c), _0x3bdb53 = _0x33968f; } else _0x494836(), _0x16517f[_0x4a6071(0x76a)](_0x4a6071(0x8c9)); } return _0xef334b; } function _0x3c502a() { const _0x51cfa2 = _0xe59ed1; if (_0x51cfa2(0x3ac) !== _0x51cfa2(0xafc)) { if (_0x468a85[_0x51cfa2(0x30c)] === 0x0) return; const _0x297a6a = _0x450910[_0x51cfa2(0xa83)]; let _0x5dc417 = -0x1; for (let _0x3ccbfb = 0x0; _0x3ccbfb < _0x468a85[_0x51cfa2(0x30c)]; _0x3ccbfb++) { if (_0x51cfa2(0xac8) !== _0x51cfa2(0xac8)) return { 'url': _0xec96aa, 'cover': _0x1e786e['cover'], 'source': _0x32cacb }; else { if (_0x297a6a >= _0x468a85[_0x3ccbfb][_0x51cfa2(0xa3a)]) _0x51cfa2(0xab7) === 'drGBu' ? _0x5dc417 = _0x3ccbfb : _0x901fe6(_0x44e94a[_0x51cfa2(0xac6)], _0x3ded4b[_0x51cfa2(0x140)]); else { if (_0x51cfa2(0x20a) !== _0x51cfa2(0x20a)) _0x5b04c3(![]), _0x231b52[_0x51cfa2(0x13b)][_0x51cfa2(0x35c)] = ''; else break; } } } if (_0x5dc417 !== -0x1) { const _0x5ef537 = _0x1be786['querySelectorAll']('p'); _0x5ef537['forEach'](_0x5059ed => _0x5059ed[_0x51cfa2(0x4ad)]['remove'](_0x51cfa2(0x5d1))); const _0x437ddb = document['getElementById'](_0x51cfa2(0x982) + _0x5dc417); if (_0x437ddb) { if ('qgjpR' !== 'KpGDk') _0x437ddb['classList'][_0x51cfa2(0x44c)]('active'), _0x437ddb[_0x51cfa2(0x637)]({ 'behavior': _0x51cfa2(0xa7d), 'block': _0x51cfa2(0x7be) }); else { const _0x39e1e2 = _0x545265['linkedWorldBookIds']['map'](_0x6a9976 => _0x42c8fc[_0x51cfa2(0xb88)][_0x51cfa2(0x6f0)](_0x23178d => _0x23178d['id'] === _0x6a9976))['filter'](_0x5949c3)[_0x51cfa2(0x48a)](_0x33b6a1 => _0x51cfa2(0x9de) + _0x33b6a1[_0x51cfa2(0x382)] + '\x0a' + _0x33b6a1[_0x51cfa2(0x313)])[_0x51cfa2(0x863)](''); if (_0x39e1e2) _0x4e84ca = _0x51cfa2(0x88c) + _0x39e1e2; } } } } else _0x278f36[_0x51cfa2(0x7ef)](_0x51cfa2(0x347))[_0x51cfa2(0x5f8)] = _0x51cfa2(0xafb); } _0x1a3c90[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x42d663 = _0xe59ed1; _0x2bb107[_0x42d663(0x4ad)]['remove'](_0x42d663(0xfb)), setTimeout(() => _0x2bb107[_0x42d663(0x937)][_0x42d663(0x8a4)] = _0x42d663(0xacf), 0x12c); }), document[_0xe59ed1(0x7ef)]('music-widget-card')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x230660 = _0xe59ed1; if (_0x3cf4de[_0x230660(0xb6d)] && _0x3cf4de[_0x230660(0xb6d)][_0x230660(0x644)]) { if (_0x230660(0x9a8) !== _0x230660(0x9a8)) { const _0x9cf3e = _0x2bd05f['createObjectURL'](_0x292ad5), _0x3618ad = _0x230660(0x273), _0x277ae8 = _0x230660(0x9c3) + _0x3618ad + _0x230660(0xb6) + _0x9cf3e + _0x230660(0x9af); _0x50c6d7['innerHTML'] = _0x277ae8, _0x4d7652[_0x230660(0x72e)][_0x230660(0x937)]['setProperty'](_0x230660(0x6c8), '\x27' + _0x3618ad + '\x27'), _0x4fedcc[_0x230660(0x5f8)] = '字体已应用！(Font\x20Applied!)'; } else _0x2bb107[_0x230660(0x937)]['display'] = 'flex', setTimeout(() => _0x2bb107[_0x230660(0x4ad)][_0x230660(0x44c)](_0x230660(0xfb)), 0xa); } }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x3b0), _0x3c502a); const _0x583b26 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x661)), _0x208210 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x84e)), _0x1fcd9a = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x3ca)); _0x583b26[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x3b59dc = _0xe59ed1; _0x450910['src'] && (_0x3b59dc(0xe0) !== 'IgjYe' ? _0x31285d['push'](_0x3e56d9['id']) : _0x450910[_0x3b59dc(0x88b)] ? _0x450910[_0x3b59dc(0x28a)]() : _0x450910[_0x3b59dc(0x5d8)]()); }), _0x208210['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x2dca96 = _0xe59ed1; if (_0x2dca96(0x6f8) === _0x2dca96(0x745)) _0x351459[_0x2dca96(0x76d)] === _0x2dca96(0x861) && (_0x45d026[_0x2dca96(0x48f)] = _0x1088bd[_0x2dca96(0x48f)]['filter'](_0x381e89 => _0x381e89 !== _0x19c122)); else { if (_0x147d8d[_0x2dca96(0x30c)] === 0x0) return; _0x593c3c = (_0x593c3c + 0x1) % _0x147d8d[_0x2dca96(0x30c)], _0x42f4f1(_0x147d8d[_0x593c3c], _0x147d8d); } }), _0x1fcd9a[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x5b3394 = _0xe59ed1; if (_0x147d8d[_0x5b3394(0x30c)] === 0x0) return; _0x593c3c = (_0x593c3c - 0x1 + _0x147d8d[_0x5b3394(0x30c)]) % _0x147d8d[_0x5b3394(0x30c)], _0x42f4f1(_0x147d8d[_0x593c3c], _0x147d8d); }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x28a), () => { const _0x4cfb59 = _0xe59ed1; if (_0x4cfb59(0x20e) !== _0x4cfb59(0x667)) _0x583b26[_0x4cfb59(0x5f8)] = '❚❚'; else { const _0x5d147f = _0x4ab7e0[_0x4cfb59(0xb60)]('li'); _0x5d147f['className'] = 'character-item', _0x5d147f[_0x4cfb59(0x361)][_0x4cfb59(0x8f3)] = _0x23cce9['id'], _0x5d147f['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x45e775[_0x4cfb59(0x3f1)] || _0x33bc2b) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x260b4e[_0x4cfb59(0x382)] + _0x4cfb59(0x6a8), _0x5d147f[_0x4cfb59(0x25c)](_0x4cfb59(0x2c5), () => { _0x4de6fa(_0x493428['id']); }), _0x5d147f[_0x4cfb59(0x5cb)](_0x4cfb59(0x3a8))[_0x4cfb59(0x25c)](_0x4cfb59(0x2c5), () => { _0x66b771(_0x2f3d07['id']); }), _0x5d147f[_0x4cfb59(0x5cb)](_0x4cfb59(0xabe))[_0x4cfb59(0x25c)]('click', _0x568953 => { const _0x44fc8e = _0x4cfb59; _0x568953[_0x44fc8e(0x886)](), _0x4cdd50(_0x300835['id']); }), _0x7ca044['appendChild'](_0x5d147f); } }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x5d8), () => { const _0x32bd7f = _0xe59ed1; if (_0x32bd7f(0x99b) !== _0x32bd7f(0x99b)) { const _0x503655 = _0x431aca[_0x11769c['id']] || []; if (_0x503655[_0x32bd7f(0x30c)] === 0x0) return; const _0x578454 = _0x3d9c90[_0x32bd7f(0xb60)](_0x32bd7f(0xb0b)); _0x578454['className'] = _0x32bd7f(0x1c0); const _0x434990 = _0x503655['every'](_0x2bf1ab => _0x1dfd83[_0x32bd7f(0x5cc)](_0x2bf1ab['id'])); _0x578454[_0x32bd7f(0x252)] = _0x32bd7f(0x9f9) + _0x15c0af['id'] + '\x22\x20' + (_0x434990 ? _0x32bd7f(0x5f3) : '') + _0x32bd7f(0x2e0) + _0x321e83[_0x32bd7f(0x382)] + _0x32bd7f(0x8e9); const _0x5f5183 = _0x578454[_0x32bd7f(0x5cb)](_0x32bd7f(0x86d)); _0x503655[_0x32bd7f(0x8cf)](_0x24591a => { const _0x4881f0 = _0x32bd7f, _0x3f1215 = _0x4cfbde[_0x4881f0(0x5cc)](_0x24591a['id']), _0x37ab87 = _0x463fdf['createElement']('label'); _0x37ab87['className'] = _0x4881f0(0x272), _0x37ab87[_0x4881f0(0x252)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x24591a['id'] + _0x4881f0(0xa7e) + _0x479535['id'] + '\x22\x20' + (_0x3f1215 ? _0x4881f0(0x5f3) : '') + '>\x20' + _0x24591a[_0x4881f0(0x382)], _0x5f5183[_0x4881f0(0x8fe)](_0x37ab87); }), _0x5937db[_0x32bd7f(0x8fe)](_0x578454); } else _0x583b26[_0x32bd7f(0x5f8)] = '▶'; }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x594), () => { _0x208210['click'](); }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x28a), () => { const _0x19421d = _0xe59ed1, _0x4a3fa8 = document[_0x19421d(0x7ef)](_0x19421d(0xb13)); if (_0x4a3fa8) _0x4a3fa8['textContent'] = '❚❚'; }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x5d8), () => { const _0x3e9b96 = _0xe59ed1; if (_0x3e9b96(0x5e0) !== _0x3e9b96(0x34c)) { const _0x3e00f6 = document[_0x3e9b96(0x7ef)](_0x3e9b96(0xb13)); if (_0x3e00f6) _0x3e00f6['textContent'] = '▶'; } else { const _0x1fe437 = _0x139e2b[0x0]['trim'](), _0x40ec8c = _0x494289[0x1][_0x3e9b96(0x4ca)]()[_0x3e9b96(0xb53)](/^"|"$/g, ''); _0x1d577b[_0x1fe437] = _0x40ec8c; } }), _0x450910['addEventListener'](_0xe59ed1(0x594), () => { const _0x12b0e6 = _0xe59ed1; if ('mfKZn' !== _0x12b0e6(0xb82)) { const _0x547bde = document[_0x12b0e6(0x7ef)](_0x12b0e6(0x439)); _0x547bde && (_0x12b0e6(0x8fb) !== _0x12b0e6(0x8c7) ? _0x547bde['click']() : _0x69c33c['innerHTML'] = _0x12b0e6(0xb3f) + _0x5123a7 + _0x12b0e6(0x147) + _0x3f5916[_0x12b0e6(0x6fd)] + _0x12b0e6(0x892) + _0x283f0c[_0x12b0e6(0xb08)] + _0x12b0e6(0x4b8)); } else _0x5f3ec7 = _0x149332[_0x12b0e6(0xb60)](_0x12b0e6(0xb0b)), _0x5d5f39[_0x12b0e6(0x199)] = _0x12b0e6(0x6fa), _0x2986e8[_0x12b0e6(0x5f8)] = _0x12b0e6(0x86e), _0x58612e[_0x12b0e6(0x937)][_0x12b0e6(0x9ad)] = _0x12b0e6(0x70a), _0x4d5adc['style'][_0x12b0e6(0x9f7)] = _0x12b0e6(0x4dc), _0x5793d3['style'][_0x12b0e6(0xb76)] = _0x12b0e6(0x3ef), _0x2d7d16[_0x12b0e6(0x8fe)](_0x143585); }); function _0x451102(_0x9707e5) { const _0x59efb6 = _0xe59ed1; if (!_0x9707e5 || typeof _0x9707e5 !== _0x59efb6(0xf4)) return null; const _0xa8b35 = _0x9707e5['indexOf']('['), _0x1773f6 = _0x9707e5['lastIndexOf'](']'); if (_0xa8b35 > -0x1 && _0x1773f6 > _0xa8b35) { if (_0x59efb6(0x750) === 'DogAU') return _0x9707e5[_0x59efb6(0xab5)](_0xa8b35, _0x1773f6 + 0x1); else _0x2c7ed1[_0x59efb6(0x25c)](_0x59efb6(0x2c5), () => { const _0x1306b4 = _0x59efb6; if (_0x95a499['length'] === 0x0) return; _0x944cd4 = (_0x589181 - 0x1 + _0xf21ba4['length']) % _0x2df0ba[_0x1306b4(0x30c)], _0x46337d(_0x226a00[_0xb3b68f], _0x2fa188); }); } return null; } document['getElementById'](_0xe59ed1(0x7b3))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0xbe7870 = _0xe59ed1; _0x22168e(), _0x459e0a(_0xbe7870(0x9f), _0xbe7870(0x1bf)); }), document[_0xe59ed1(0x7ef)](_0xe59ed1(0x210))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a(_0xe59ed1(0x1bf), _0xe59ed1(0x9f))); const _0x5323b5 = document[_0xe59ed1(0x7ef)]('tab-record-expense'), _0x39d7de = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x939)); _0x5323b5[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), _0x22168e), _0x39d7de['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x3d8b19 = _0xe59ed1; _0x5323b5[_0x3d8b19(0x4ad)]['remove']('active'), _0x39d7de[_0x3d8b19(0x4ad)][_0x3d8b19(0x44c)]('active'), _0x12423b(); }); function _0x22168e() { const _0x3aa575 = _0xe59ed1; _0x39d7de[_0x3aa575(0x4ad)][_0x3aa575(0x713)]('active'), _0x5323b5[_0x3aa575(0x4ad)][_0x3aa575(0x44c)](_0x3aa575(0x5d1)), _0x55189b(); } function _0x55189b() { const _0x36718b = _0xe59ed1, _0x5ba725 = document[_0x36718b(0x7ef)](_0x36718b(0x459)); document[_0x36718b(0x7ef)](_0x36718b(0x36a))[_0x36718b(0x5f8)] = _0x36718b(0xb4c), document[_0x36718b(0x7ef)](_0x36718b(0x851))[_0x36718b(0x252)] = '', _0x5ba725[_0x36718b(0x252)] = _0x36718b(0x33b), _0x2cd072(), document['getElementById'](_0x36718b(0xab2))[_0x36718b(0x25c)](_0x36718b(0x2c5), _0x4066ce), document[_0x36718b(0x7ef)]('daily-expenses-list')['addEventListener'](_0x36718b(0x2c5), _0x16c630 => { const _0x43c2ca = _0x36718b; if (_0x43c2ca(0x942) !== _0x43c2ca(0x942)) _0xb25d40[_0x43c2ca(0x713)](); else { if (_0x16c630[_0x43c2ca(0x13b)][_0x43c2ca(0x4ad)][_0x43c2ca(0x182)](_0x43c2ca(0x38b))) { if (_0x43c2ca(0x2a8) === _0x43c2ca(0xa3f)) _0x9e5f47(), _0x485ffa = null; else { const _0xe8e537 = _0x16c630['target'][_0x43c2ca(0x361)]['id']; _0x56efd8('确定要删除这笔记录吗？')[_0x43c2ca(0x683)](_0x3c0c51 => { const _0x4d4529 = _0x43c2ca; if (_0x3c0c51) { if (_0x4d4529(0x595) !== 'CkNRj') { if (_0x18da97[_0x4d4529(0x6bc)] === _0x4d4529(0x407)) _0x111160(![]); if (_0x46486d[_0x4d4529(0x6bc)] === _0x4d4529(0x74f)) _0x206a9b(!![]); } else _0x288bc8(_0xe8e537); } }); } } } }), document[_0x36718b(0x7ef)](_0x36718b(0x23c))[_0x36718b(0x4c1)](); } function _0x5c7217(_0x229a18, _0x22fce7) { const _0x47d495 = _0xe59ed1; if (_0x47d495(0xb4e) !== _0x47d495(0xb4e)) { const _0x450d12 = _0x441fd8[_0x47d495(0x6e7)](_0x374b1a['getItem'](_0x47d495(0x4ee)) || '[]'); if (_0x450d12['length'] === 0x0) return _0x5b6fb8; return _0xa3700f[_0x47d495(0x3f0)](_0x34fd21 => !_0x450d12['includes'](_0x34fd21[_0x47d495(0x382)])); } else { const _0x434921 = document[_0x47d495(0x7ef)](_0x47d495(0x459)), _0x3b108d = document[_0x47d495(0x7ef)](_0x47d495(0x851)); document[_0x47d495(0x7ef)](_0x47d495(0x36a))[_0x47d495(0x5f8)] = _0x22fce7 + _0x47d495(0x1f7); const _0x1532b1 = _0x229a18[_0x47d495(0x43c)]['reduce']((_0xbe1a64, _0x14af2e) => _0xbe1a64 + (_0x14af2e[_0x47d495(0x359)] || 0x0), 0x0); let _0x599bba = _0x47d495(0x703) + _0x1532b1[_0x47d495(0x196)](0x2) + _0x47d495(0xa0f); _0x434921[_0x47d495(0x252)] = _0x599bba; const _0x8c173f = document[_0x47d495(0x7ef)](_0x47d495(0x887)), _0x2e1aa4 = { '餐饮美食': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', '交通出行': _0x47d495(0x933), '购物消费': _0x47d495(0xa87), '生活服务': _0x47d495(0xade), '休闲娱乐': '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', '医疗健康': _0x47d495(0x64e), '人情红包': _0x47d495(0x2aa), '其他杂项': _0x47d495(0xb85), '默认': _0x47d495(0x7bb) }; _0x229a18['categorizedExpenses'][_0x47d495(0x8cf)](_0x566d2a => { const _0x46ab21 = _0x47d495, _0x8ec6c4 = document[_0x46ab21(0xb60)](_0x46ab21(0xb0b)); _0x8ec6c4[_0x46ab21(0x199)] = _0x46ab21(0x7b5), _0x8ec6c4[_0x46ab21(0x937)][_0x46ab21(0x4e0)] = _0x46ab21(0x6e6), _0x8ec6c4['style'][_0x46ab21(0x5d2)] = _0x46ab21(0x477), _0x8ec6c4[_0x46ab21(0x937)][_0x46ab21(0x9f7)] = '15px', _0x8ec6c4[_0x46ab21(0x937)][_0x46ab21(0x7ea)] = '0'; const _0x43940d = _0x2e1aa4[_0x566d2a[_0x46ab21(0x72b)]] || _0x2e1aa4['默认'], _0x5b919f = _0x46ab21(0x498) + _0x43940d + _0x46ab21(0x3ba), _0x119213 = _0x46ab21(0x346) + _0x5b919f + _0x46ab21(0x882) + _0x566d2a[_0x46ab21(0x60e)] + _0x46ab21(0x416) + (_0x566d2a[_0x46ab21(0x72b)] || _0x46ab21(0x71f)) + _0x46ab21(0x55d) + (_0x566d2a['amount'] || 0x0)[_0x46ab21(0x196)](0x2) + '</span></div>'; let _0x76efe2 = ''; if (_0x566d2a[_0x46ab21(0x7d8)] && _0x566d2a[_0x46ab21(0x7d8)][_0x46ab21(0x8f3)]) { if (_0x46ab21(0x625) === 'JjGfO') { const _0x597c18 = _0xd97907(_0x566d2a[_0x46ab21(0x7d8)][_0x46ab21(0x8f3)]); _0x597c18 && (_0x76efe2 = '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22' + _0x597c18[_0x46ab21(0x3f1)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x597c18['name'] + _0x46ab21(0x19d) + _0x566d2a['review'][_0x46ab21(0x993)] + _0x46ab21(0x4b8)); } else return { 'type': _0x46ab21(0xae0), 'name': _0x46bd73[0x1][_0x46ab21(0x4ca)]() }; } _0x8ec6c4[_0x46ab21(0x252)] = _0x119213 + _0x76efe2, _0x8c173f[_0x46ab21(0x8fe)](_0x8ec6c4); }), _0x3b108d[_0x47d495(0x252)] = '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', document[_0x47d495(0x7ef)](_0x47d495(0x2e5))[_0x47d495(0x25c)](_0x47d495(0x2c5), async () => { const _0x247cb1 = _0x47d495; if (_0x247cb1(0x577) === _0x247cb1(0x2ca)) { if (_0x227273) _0x4dba77(_0x263507); _0x5754e6 = null, _0x1b7f59[_0x247cb1(0x4a5)] = [], _0x47f1d8[_0x247cb1(0xac6)] = null, _0x15a44a[_0x247cb1(0x7ef)](_0x247cb1(0xa53))[_0x247cb1(0x937)][_0x247cb1(0x8a4)] = _0x247cb1(0xacf), _0x3e8abb[_0x247cb1(0xa9a)] = null, _0x52a342(), _0x120183(_0x247cb1(0x90), 'meetingView'); } else { const _0x52b1c1 = await _0x56efd8(_0x247cb1(0x2b3)); if (_0x52b1c1) { const _0x54375a = _0x3cf4de[_0x247cb1(0x3a3)][_0x22fce7]; _0x54375a && _0x54375a[_0x247cb1(0x4da)] && _0x3cf4de[_0x247cb1(0xb4a)][_0x247cb1(0x967)](..._0x54375a[_0x247cb1(0x4da)]), delete _0x3cf4de[_0x247cb1(0x3a3)][_0x22fce7], _0x3a3bc1(), _0x55189b(); } } }); } } function _0x12423b() { const _0x192e3a = _0xe59ed1; if (_0x192e3a(0x7af) === 'WowAD') { const _0x210d7f = document[_0x192e3a(0x7ef)](_0x192e3a(0x459)); document[_0x192e3a(0x7ef)](_0x192e3a(0x36a))[_0x192e3a(0x5f8)] = '账本', document[_0x192e3a(0x7ef)]('header-actions')[_0x192e3a(0x252)] = ''; const _0x2a7d4c = Object['keys'](_0x3cf4de[_0x192e3a(0x3a3)])['sort']((_0x4a106a, _0x47ff5a) => new Date(_0x47ff5a) - new Date(_0x4a106a)); let _0x2d6c50 = _0x192e3a(0x2ee); _0x2a7d4c['length'] === 0x0 ? _0x2d6c50 += _0x192e3a(0x191) : _0x2a7d4c[_0x192e3a(0x8cf)](_0x2bb488 => { const _0x5eea98 = _0x192e3a, _0x319fbb = _0x3cf4de[_0x5eea98(0x3a3)][_0x2bb488], _0x2e973c = _0x319fbb[_0x5eea98(0x43c)][_0x5eea98(0x3f9)]((_0x9ad562, _0x4f3582) => _0x9ad562 + (_0x4f3582[_0x5eea98(0x359)] || 0x0), 0x0); _0x2d6c50 += _0x5eea98(0x9e0) + _0x2bb488 + '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>' + _0x2bb488 + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20' + _0x2e973c['toFixed'](0x2) + _0x5eea98(0x687); }), _0x210d7f[_0x192e3a(0x252)] = _0x2d6c50, document[_0x192e3a(0x7ef)](_0x192e3a(0x4a0))[_0x192e3a(0x25c)](_0x192e3a(0x2c5), _0x3f1569), document[_0x192e3a(0x7ef)](_0x192e3a(0x4c4))[_0x192e3a(0x25c)]('click', () => { const _0x3a29e1 = _0x192e3a; document[_0x3a29e1(0x7ef)](_0x3a29e1(0x40b))[_0x3a29e1(0x2c5)](); }), _0x210d7f[_0x192e3a(0x53f)](_0x192e3a(0x7a3))[_0x192e3a(0x8cf)](_0x3cc870 => { const _0x43ecd7 = _0x192e3a; _0x3cc870[_0x43ecd7(0x25c)]('click', _0x5a1eae => { const _0x5369c8 = _0x43ecd7; if ('wTeWm' !== _0x5369c8(0x354)) _0x49dbef[_0x5369c8(0x5e3)](_0x5369c8(0x175), _0x50b6d6); else { const _0x2ef94d = _0x5a1eae[_0x5369c8(0x179)][_0x5369c8(0x361)][_0x5369c8(0x5bd)], _0x925c90 = _0x3cf4de[_0x5369c8(0x3a3)][_0x2ef94d]; _0x925c90 && _0x5c7217(_0x925c90, _0x2ef94d); } }); }); } else return _0x22842d[_0x192e3a(0x76a)]('Fetch\x20request\x20was\x20aborted.'), ''; } function _0x4066ce() { const _0x5f3402 = _0xe59ed1, _0xf42128 = document['getElementById'](_0x5f3402(0x23c)), _0x560368 = document[_0x5f3402(0x7ef)](_0x5f3402(0x4a7)), _0x5b1ba9 = _0xf42128['value'][_0x5f3402(0x4ca)](), _0x32f5ed = parseFloat(_0x560368[_0x5f3402(0x35c)]); if (!_0x5b1ba9 || isNaN(_0x32f5ed) || _0x32f5ed <= 0x0) { _0x5bf34b(_0x5f3402(0x1ba)); return; } _0x3cf4de[_0x5f3402(0xb4a)][_0x5f3402(0x967)]({ 'id': _0x5f3402(0x97e) + Date[_0x5f3402(0x740)](), 'description': _0x5b1ba9, 'amount': _0x32f5ed, 'timestamp': Date[_0x5f3402(0x740)]() }), _0x3a3bc1(), _0x2cd072(), _0xf42128[_0x5f3402(0x35c)] = '', _0x560368[_0x5f3402(0x35c)] = '', _0xf42128[_0x5f3402(0x4c1)](); } function _0x288bc8(_0x5ae3e6) { const _0xbb2263 = _0xe59ed1; if (_0xbb2263(0x5ec) === _0xbb2263(0x5ec)) { const _0x173fe9 = _0x3cf4de[_0xbb2263(0xb4a)]['findIndex'](_0x17e665 => _0x17e665['id'] === _0x5ae3e6); _0x173fe9 > -0x1 && (_0xbb2263(0x85f) === _0xbb2263(0x85f) ? (_0x3cf4de[_0xbb2263(0xb4a)][_0xbb2263(0x673)](_0x173fe9, 0x1), _0x3a3bc1(), _0x2cd072()) : (_0x3612e6['currentDate']['setMonth'](_0x5cb955[_0xbb2263(0x66d)]['getMonth']() - 0x1), _0x980397())); } else _0x4341b3 += _0x4fb122[_0xbb2263(0x6e7)](_0x145342)[_0xbb2263(0x15d)][0x0][_0xbb2263(0x313)]['parts'][0x0][_0xbb2263(0x993)]; } function _0x2cd072() { const _0x1d13f9 = _0xe59ed1, _0x44e244 = document[_0x1d13f9(0x7ef)](_0x1d13f9(0x2f8)), _0x1ed7c9 = document[_0x1d13f9(0x7ef)](_0x1d13f9(0x251)), _0xaa4901 = new Date(), _0x2dd8d5 = _0x3cf4de['accountingData'][_0x1d13f9(0x3f0)](_0x5d0d00 => new Date(_0x5d0d00[_0x1d13f9(0x554)])['toDateString']() === _0xaa4901[_0x1d13f9(0x9fd)]()); if (_0x2dd8d5[_0x1d13f9(0x30c)] === 0x0) { _0x44e244[_0x1d13f9(0x252)] = _0x1d13f9(0x49d), _0x1ed7c9['innerHTML'] = ''; return; } _0x44e244[_0x1d13f9(0x252)] = '', _0x2dd8d5[_0x1d13f9(0xb11)]((_0x5643f7, _0x15c435) => _0x15c435[_0x1d13f9(0x554)] - _0x5643f7[_0x1d13f9(0x554)])[_0x1d13f9(0x8cf)](_0xe67edd => { const _0x2484a8 = _0x1d13f9; if (_0x2484a8(0x376) !== _0x2484a8(0xafd)) { const _0x5779b6 = document[_0x2484a8(0xb60)](_0x2484a8(0xb0b)); _0x5779b6[_0x2484a8(0x199)] = _0x2484a8(0x7b5), _0x5779b6[_0x2484a8(0x252)] = _0x2484a8(0x10e) + _0xe67edd[_0x2484a8(0x60e)] + _0x2484a8(0x919) + _0xe67edd[_0x2484a8(0x359)][_0x2484a8(0x196)](0x2) + _0x2484a8(0x616) + _0xe67edd['id'] + _0x2484a8(0x5d7), _0x44e244[_0x2484a8(0x8fe)](_0x5779b6); } else _0x402af6[_0x2484a8(0x557)] = _0x1f6a6f[_0x2484a8(0x9e4)](_0x2728bb), _0x33272b[_0x2484a8(0x937)][_0x2484a8(0x8a4)] = _0x2484a8(0x540), _0x48b3b7[_0x2484a8(0x937)][_0x2484a8(0x986)] = _0x2484a8(0xacf), _0x873271['style'][_0x2484a8(0x32a)] = _0x2484a8(0x463); }), _0x1ed7c9 && (_0x1ed7c9[_0x1d13f9(0x252)] = _0x1d13f9(0x50d), document[_0x1d13f9(0x7ef)]('organize-bill-button')['addEventListener']('click', _0x30dc6b)); } async function _0x30dc6b() { const _0x993d17 = _0xe59ed1, _0x51d481 = new Date(), _0x5f5769 = _0x51d481[_0x993d17(0x96b)]() + '-' + String(_0x51d481[_0x993d17(0x677)]() + 0x1)[_0x993d17(0x5b5)](0x2, '0') + '-' + String(_0x51d481[_0x993d17(0x5c3)]())[_0x993d17(0x5b5)](0x2, '0'); if (_0x3cf4de['accountingLedger'][_0x5f5769]) { if (_0x993d17(0x233) !== _0x993d17(0x233)) _0x377da2(_0x1bdd83); else { _0x5bf34b(_0x993d17(0x50f)); return; } } const _0x4b7f54 = _0x3cf4de[_0x993d17(0xb4a)][_0x993d17(0x3f0)](_0x312c41 => new Date(_0x312c41[_0x993d17(0x554)])[_0x993d17(0x9fd)]() === _0x51d481[_0x993d17(0x9fd)]()); if (_0x4b7f54[_0x993d17(0x30c)] === 0x0) { _0x5bf34b(_0x993d17(0x403)); return; } _0x2a565e(!![], '正在整理…'); try { const _0x2fcd56 = [_0x993d17(0x75b), '交通出行', _0x993d17(0x306), _0x993d17(0xbb), _0x993d17(0xa68), '医疗健康', '人情红包', _0x993d17(0xa6a)], _0x299bc7 = _0x4b7f54[_0x993d17(0x48a)](_0x473d5b => '-\x20' + _0x473d5b['description'] + ':\x20' + _0x473d5b[_0x993d17(0x359)])[_0x993d17(0x863)]('\x0a'), _0xd8e3b4 = _0x3cf4de[_0x993d17(0xad3)][_0x993d17(0x48a)](_0x344449 => { const _0x3a8c32 = _0x993d17; if (_0x3a8c32(0x8ea) === 'AgQnu') { const _0xcc4c5 = 'chat_char_' + _0x58176c[_0x3a8c32(0x740)](); _0x29ed70(_0xcc4c5), _0x2b118e(!![]); } else { const _0x6c14a0 = _0x3cf4de['chats'][_0x3a8c32(0x6f0)](_0x1504ed => _0x1504ed[_0x3a8c32(0x76d)] === 'private' && _0x1504ed[_0x3a8c32(0x48f)]['includes'](_0x344449['id'])), _0x17cb8b = _0x3cf4de[_0x3a8c32(0x3ec)][_0x3a8c32(0x6f0)](_0x20835b => _0x20835b['id'] === (_0x6c14a0?.[_0x3a8c32(0x2c4)] || _0x3cf4de['activeUserProfileId'])) || { 'id': _0x3a8c32(0xa41), 'name': '你' }; let _0x729bf9 = ''; return _0x344449['linkedWorldBookIds'] && _0x344449['linkedWorldBookIds'][_0x3a8c32(0x30c)] > 0x0 && (_0x3a8c32(0x16f) === 'IAGHD' ? (_0x1a849d(_0x91eabe['id']), _0x1251b3(!![])) : _0x729bf9 = _0x344449['linkedWorldBookIds'][_0x3a8c32(0x48a)](_0x49178c => _0x3cf4de[_0x3a8c32(0xb88)]['find'](_0x36e972 => _0x36e972['id'] === _0x49178c))[_0x3a8c32(0x3f0)](Boolean)[_0x3a8c32(0x48a)](_0x1045db => _0x3a8c32(0xa3b) + _0x1045db[_0x3a8c32(0x382)] + ']:\x20' + _0x1045db[_0x3a8c32(0x313)])[_0x3a8c32(0x863)]('')), _0x3a8c32(0x369) + _0x344449['id'] + _0x3a8c32(0xbe) + _0x344449[_0x3a8c32(0x382)] + _0x3a8c32(0x257) + _0x344449[_0x3a8c32(0xa2e)] + _0x3a8c32(0x4aa) + _0x17cb8b[_0x3a8c32(0x382)] + _0x3a8c32(0x751) + _0x17cb8b['id'] + ')\x0a' + _0x729bf9; } })[_0x993d17(0x863)]('\x0a'), _0xaf6a97 = _0x3cf4de[_0x993d17(0x3ec)]['map'](_0x23e4a2 => _0x993d17(0x7e9) + _0x23e4a2['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x23e4a2['name'] + _0x993d17(0x257) + (_0x23e4a2[_0x993d17(0xa2e)] || '无'))['join']('\x0a'), _0x1e8f64 = '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', _0x2131ef = _0x993d17(0x123) + _0x2fcd56[_0x993d17(0x863)](',\x20') + _0x993d17(0x2a7) + _0xd8e3b4 + _0x993d17(0x89a) + _0xaf6a97 + '\x0a\x0a#\x20今日消费流水\x0a' + _0x299bc7, _0x42d88 = [{ 'role': _0x993d17(0x24d), 'content': _0x1e8f64 }, { 'role': 'user', 'content': _0x2131ef }], _0x31a0e5 = await _0x63fdee(_0x42d88, { 'json': !![] }), _0x32de68 = _0x451102(_0x31a0e5); if (!_0x32de68) { if (_0x993d17(0xaa9) === 'ZfeEz') throw new Error(_0x993d17(0x1a9) + _0x31a0e5); else { const _0x30c94d = _0x5cef62[_0x993d17(0x105)] || _0x297a0c?.['participantIds'][0x0], _0x5d2b29 = _0x2e89c6(_0x30c94d); _0x22f1fe = _0x5d2b29 ? _0x5d2b29[_0x993d17(0x382)] : '角色'; } } const _0x20e782 = JSON['parse'](_0x32de68); _0x3cf4de[_0x993d17(0x3a3)][_0x5f5769] = { 'categorizedExpenses': _0x20e782, 'timestamp': Date['now'](), 'originalExpenses': _0x4b7f54 }, _0x3cf4de[_0x993d17(0xb4a)] = _0x3cf4de[_0x993d17(0xb4a)][_0x993d17(0x3f0)](_0x121712 => new Date(_0x121712[_0x993d17(0x554)])[_0x993d17(0x9fd)]() !== _0x51d481[_0x993d17(0x9fd)]()), _0x3a3bc1(), _0x5c7217(_0x3cf4de[_0x993d17(0x3a3)][_0x5f5769], _0x5f5769); } catch (_0x3a4e93) { _0x5bf34b(_0x993d17(0x898) + _0x3a4e93['message']); } finally { _0x2a565e(![]); } } async function _0x1f4762() { const _0x3cc2e4 = _0xe59ed1; _0x402f4d(); if (!_0x3cf4de['worldBookCategories'] || _0x3cf4de[_0x3cc2e4(0x79c)][_0x3cc2e4(0x30c)] === 0x0) { if (_0x3cc2e4(0x136) !== _0x3cc2e4(0x136)) return _0x13458f + _0x3cc2e4(0x798); else _0x3cf4de['worldBookCategories'] = [{ 'id': _0x3cc2e4(0xa41), 'name': _0x3cc2e4(0x6b0) }], _0x3cf4de[_0x3cc2e4(0xb88)][_0x3cc2e4(0x8cf)](_0x425c2f => { const _0x36dca7 = _0x3cc2e4; if (_0x36dca7(0x9bb) !== _0x36dca7(0xaa8)) !_0x425c2f['categoryId'] && (_0x425c2f['categoryId'] = 'default'); else return _0x562522(_0x13e3ea)[_0x36dca7(0x683)](_0x552a60 => _0x552a60[_0x36dca7(0x664)]()); }); } const _0x1fb9ab = [..._0x13da56]; try { const _0x10fc0d = localStorage[_0x3cc2e4(0x6b6)](_0x3cc2e4(0x65d)); if (_0x10fc0d) { const _0x351896 = JSON[_0x3cc2e4(0x6e7)](_0x10fc0d); Array[_0x3cc2e4(0x9a1)](_0x351896) ? 'TkuKq' === _0x3cc2e4(0x423) ? _0x35cf89 = [..._0x1fb9ab, ..._0x351896] : _0x337a15['style'][_0x3cc2e4(0x8a4)] = _0x3cc2e4(0xacf) : _0x35cf89 = _0x1fb9ab; } else { if (_0x3cc2e4(0x95b) !== 'EzbBy') { const _0x6465ba = _0x4c1c3b[_0x3cc2e4(0xb88)][_0x3cc2e4(0x6f0)](_0x2bee8b => _0x2bee8b['id'] === _0x48d007); _0x6465ba && (_0x6465ba[_0x3cc2e4(0x382)] = _0x155d2c, _0x6465ba['content'] = _0x5aaefe, _0x6465ba[_0x3cc2e4(0x2da)] = _0x5a1d83); } else _0x35cf89 = _0x1fb9ab; } } catch (_0x410a83) { 'EnQNZ' !== 'HrlEX' ? (console[_0x3cc2e4(0x5e3)](_0x3cc2e4(0x719), _0x410a83), _0x35cf89 = _0x1fb9ab) : _0x4b999e[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), _0x2836a7 => { const _0x512bd2 = _0x3cc2e4; if (_0x2836a7[_0x512bd2(0x13b)][_0x512bd2(0x76d)] === _0x512bd2(0x565)) return; const _0x12f0de = _0x2a3064[_0x512bd2(0x4af)], _0x401296 = _0x4b3871[_0x512bd2(0x5cb)](_0x512bd2(0x79d)), _0xdbdebc = _0x12f0de[_0x512bd2(0x4ad)][_0x512bd2(0x182)](_0x512bd2(0xa98)); _0x12f0de['classList'][_0x512bd2(0x6c7)](_0x512bd2(0xa98), !_0xdbdebc), _0x401296[_0x512bd2(0x4ad)][_0x512bd2(0x6c7)]('expanded', !_0xdbdebc); }); } if (!localStorage['getItem'](_0x3cc2e4(0xb1c))) { _0x56efd8(_0x3cc2e4(0x5ac))[_0x3cc2e4(0x683)](async _0x4cddf6 => { const _0x16a8c2 = _0x3cc2e4; _0x4cddf6 ? (_0x2a565e(!![], _0x16a8c2(0x22e)), await _0x52194c(), localStorage['setItem'](_0x16a8c2(0xb1c), _0x16a8c2(0x752)), _0x2a565e(![]), _0x5bf34b('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'), setTimeout(() => location[_0x16a8c2(0xa0d)](), 0x5dc)) : _0x5bf34b(_0x16a8c2(0xa09)); }); return; } if (!localStorage['getItem'](_0x3cc2e4(0x15c))) { console['log']('执行好友圈数据净化...'), _0x2a565e(!![], '正在检查好友圈数据...'); const _0x17fae9 = await _0x472d03(); localStorage[_0x3cc2e4(0x531)](_0x3cc2e4(0x15c), 'true'), _0x2a565e(![]); if (_0x17fae9 > 0x0) { _0x5bf34b(_0x3cc2e4(0x92) + _0x17fae9 + '\x20张旧图片。应用即将刷新。'), setTimeout(() => location[_0x3cc2e4(0xa0d)](), 0x5dc); return; } } if (!localStorage[_0x3cc2e4(0x6b6)](_0x3cc2e4(0x15c))) { } if (!localStorage[_0x3cc2e4(0x6b6)](_0x3cc2e4(0xa69))) { console['log'](_0x3cc2e4(0x15b)), _0x2a565e(!![], _0x3cc2e4(0x208)); const _0x5abdff = await _0x5b435a(); localStorage[_0x3cc2e4(0x531)](_0x3cc2e4(0xa69), 'true'), _0x2a565e(![]); if (_0x5abdff > 0x0) { if (_0x3cc2e4(0x2f1) === _0x3cc2e4(0x9e9)) _0x3de4ca['scrollTop'] = _0x142d03[_0x3cc2e4(0x60d)]; else { _0x5bf34b(_0x3cc2e4(0x6da) + _0x5abdff + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0x3cc2e4(0xa0d)](), 0x5dc); return; } } } if (!localStorage[_0x3cc2e4(0x6b6)](_0x3cc2e4(0x62b))) { const _0x3409f5 = await _0x40dc36(); localStorage[_0x3cc2e4(0x531)](_0x3cc2e4(0x62b), _0x3cc2e4(0x752)); if (_0x3409f5 > 0x0) { if (_0x3cc2e4(0x6ff) === _0x3cc2e4(0xf0)) _0x33e82e[_0x3cc2e4(0x5f8)] = _0x5f545d[_0x3cc2e4(0x86a)](_0x3cc2e4(0x77e), { 'hour': _0x3cc2e4(0x56f), 'minute': _0x3cc2e4(0x56f), 'hour12': ![] }), _0x52a929[_0x3cc2e4(0x5f8)] = _0x20da8a[_0x3cc2e4(0xa15)]('zh-CN', { 'month': 'long', 'day': _0x3cc2e4(0x73e), 'weekday': 'long' }); else { _0x5bf34b('数据结构升级：成功救援了\x20' + _0x3409f5 + _0x3cc2e4(0x8f6)), setTimeout(() => location[_0x3cc2e4(0xa0d)](), 0x5dc); return; } } } const _0x59f451 = document['getElementById'](_0x3cc2e4(0x2ad)); _0x59f451 ? _0x59f451[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => { _0x3e0553(), _0x459e0a('snoopList', 'home'); }) : console['error'](_0x3cc2e4(0x5aa)); const _0x2d1378 = _0x10e5c0(); await _0x3b7b37(), _0x4af17b(), ((() => { const _0x2cacdc = _0x3cc2e4; if (_0x2cacdc(0x870) === _0x2cacdc(0xb31)) { const _0x56d7ae = _0xecf717['querySelector']('.avatar'); _0x463e6a(_0x2cacdc(0x54f) + _0x3e30a4['id'])['then'](_0x24f8c4 => { const _0x47059b = _0x2cacdc; _0x24f8c4 && (_0x56d7ae[_0x47059b(0x557)] = _0x4d5415[_0x47059b(0x9e4)](_0x24f8c4)); }); } else { let _0x3930c3 = ![], _0x802c6c = _0x3cf4de[_0x2cacdc(0x79c)]['find'](_0x514903 => _0x514903[_0x2cacdc(0x382)] === _0x2cacdc(0x674)); !_0x802c6c && (_0x802c6c = { 'id': _0x2cacdc(0x7d9), 'name': _0x2cacdc(0x674) }, _0x3cf4de[_0x2cacdc(0x79c)][_0x2cacdc(0x967)](_0x802c6c), console[_0x2cacdc(0x76a)](_0x2cacdc(0x655)), _0x3930c3 = !![]); const _0x5840ac = _0x2cacdc(0x955); let _0x3ec5f7 = _0x3cf4de['worldBooks']['some'](_0x475fee => _0x475fee['id'] === _0x5840ac); if (!_0x3ec5f7) { console['log'](_0x2cacdc(0x551)); const _0x310168 = '#\x20核心能力：HTML模块生成\x0a\x0a你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20推荐生成场景\x0a\x0a当用户明确表示希望“查看”、“展示”或“接收”一个适合用卡片形式呈现的内容时，你应该主动生成一个HTML模块来满足该请求。这包括但不限于：\x0a\x0a*\x20**邀请函**:\x20当提到聚会、活动或约会的邀请时。\x0a*\x20**聊天记录截图**:\x20当用户想回顾或展示一段（虚构的）聊天对话时。\x0a*\x20**订单/票据**:\x20当提到购物、点餐或预订的凭证时。\x0a*\x20**通知/提醒**:\x20模拟系统通知、日程提醒等。\x0a\x0a你应该发挥创造力，判断何时使用此功能能增强沉浸感。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]', _0x100627 = { 'id': _0x5840ac, 'name': _0x2cacdc(0xb7a), 'content': _0x310168, 'categoryId': _0x802c6c['id'] }; _0x3cf4de[_0x2cacdc(0xb88)][_0x2cacdc(0x967)](_0x100627), _0x3930c3 = !![]; } if (_0x3930c3) { if (_0x2cacdc(0x960) !== _0x2cacdc(0x960)) { if (_0x42e425[_0x2cacdc(0x382)] !== _0x2cacdc(0x2bc)) { _0x4147d5[_0x2cacdc(0x5e3)]('生成失败:\x20', _0x33868e); const _0x553d8b = { 'role': _0x2cacdc(0x78b), 'content': '错误:\x20' + _0x29d317[_0x2cacdc(0x99)], 'senderId': _0x44488f['id'], 'isOffline': _0x3ed12f }; _0x13dd57[_0x2cacdc(0x103)][_0x2cacdc(0x967)](_0x553d8b), _0x48f754(); } return ![]; } else _0x3a3bc1(), console[_0x2cacdc(0x76a)](_0x2cacdc(0x8c9)); } } })()), _0x480343(), _0x5e6a15(), _0x435b1c(), _0x25c609(), _0x40dc44(), _0x4785cf(), _0xe99091(), _0x21a01d(), _0x40dfdd(), _0x277a53(); const _0x554a8e = document['getElementById'](_0x3cc2e4(0x1ac)); _0x554a8e && requestAnimationFrame(() => { const _0x11da12 = _0x3cc2e4; if (_0x11da12(0xa70) !== 'zdonr') _0x554a8e[_0x11da12(0x937)][_0x11da12(0x52e)] = '1'; else { const _0x247cf1 = _0x3ae830[_0x11da12(0x7ef)]('clock-color-toggle'); if (!_0x247cf1) return; _0x247cf1[_0x11da12(0x5f3)] = _0x37797c[_0x11da12(0x84a)][_0x11da12(0xa4f)] || ![], _0x247cf1['addEventListener'](_0x11da12(0x9cb), () => { const _0x1a9758 = _0x11da12; _0x2c5244[_0x1a9758(0x84a)][_0x1a9758(0xa4f)] = _0x247cf1[_0x1a9758(0x5f3)], _0x31b8bc(), _0x19533f(); }); } }); _0xcac1e4(), _0x3b6e39(), setInterval(_0x3b6e39, 0x7530), _0x27ee74(), _0x8d695a(), _0x1b3d88(); const _0x3da918 = document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x216)); document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x880))['addEventListener']('click', function (_0x216da8) { const _0x24c0c2 = _0x3cc2e4; if (_0x216da8[_0x24c0c2(0x13b)][_0x24c0c2(0xb09)](_0x24c0c2(0x434))) return; const _0xfb9e4e = document['getElementById'](_0x24c0c2(0x661)); if (_0xfb9e4e) { if (_0x24c0c2(0x592) === 'dJalV') _0xfb9e4e[_0x24c0c2(0x2c5)](); else { const _0x5efd7b = _0x56d60f[_0x24c0c2(0x7ef)](_0x24c0c2(0xb4)), _0x179c40 = _0x35891a[_0x24c0c2(0xaab)][_0x24c0c2(0x6f0)](_0x193030 => _0x193030['id'] === _0x577256['id']); if (!_0x179c40) { _0x38fb84[_0x24c0c2(0x5e3)](_0x24c0c2(0xac0), _0x1dbbb0['id']); return; } const _0x84f950 = _0x5efd7b[_0x24c0c2(0x557)]['includes'](_0x179c40[_0x24c0c2(0x4c7)]) && !_0x5efd7b[_0x24c0c2(0x88b)]; _0x84f950 ? _0x5efd7b[_0x24c0c2(0x5d8)]() : (_0x5b1d7b = { 'title': _0x179c40['songName'], 'artist': _0x179c40['artist'], 'cover': _0x179c40[_0x24c0c2(0xa08)] || (_0x179c40[_0x24c0c2(0x6b3)] ? _0x24c0c2(0x389) + _0x179c40[_0x24c0c2(0x6b3)] : _0x1a0744), 'isFromLibrary': !![] }, _0x5efd7b['src'] = _0x179c40[_0x24c0c2(0x4c7)], _0x5efd7b[_0x24c0c2(0x28a)](), _0x45d8c8[_0x24c0c2(0x627)] = _0x159fbc[_0x24c0c2(0xaab)]['findIndex'](_0x470de3 => _0x470de3['id'] === _0x1ed391['id']), _0x3a8b55()); } } }), _0x459e0a(_0x3cc2e4(0x1bf), _0x3cc2e4(0x9b6)); (_0x2d1378 || _0x3cf4de[_0x3cc2e4(0xad3)][_0x3cc2e4(0x30c)] === 0x0) && (_0x5bf34b('欢迎！请先创建一个角色开始聊天。'), setTimeout(() => { const _0x60e43f = _0x3cc2e4; _0x60e43f(0x757) !== 'kfHzN' ? (_0x459e0a('chat', 'home'), setTimeout(() => _0xf22453(), 0x64)) : _0x8cc16f[_0x60e43f(0x5e3)](_0x60e43f(0x52c), _0x599c77); }, 0x6a4)); document[_0x3cc2e4(0x7ef)]('meeting-reroll-button')['addEventListener']('click', _0x3e7038); const _0x286b3b = document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x111)); document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x130))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => _0x286b3b['click']()), document['getElementById']('reset-widget-bg-button')['addEventListener']('click', () => { const _0x275630 = _0x3cc2e4; _0x275630(0x99d) === _0x275630(0x99d) ? (_0x3cf4de['preferences'][_0x275630(0x225)] = null, _0x3a3bc1(), _0x27ee74(), _0x5bf34b(_0x275630(0x4dd))) : _0x4dc0cc[_0x275630(0x937)][_0x275630(0x586)] = _0x275630(0x90c); }), _0x286b3b[_0x3cc2e4(0x25c)]('change', async _0x14bc09 => { const _0x4a152b = _0x3cc2e4, _0xc9349e = _0x14bc09[_0x4a152b(0x13b)][_0x4a152b(0x27c)][0x0]; if (!_0xc9349e) return; try { const _0x3bd711 = await _0x4ed984(_0xc9349e); _0x3cf4de[_0x4a152b(0x84a)][_0x4a152b(0x225)] = _0x3bd711, _0x3a3bc1(), _0x27ee74(), _0x5bf34b(_0x4a152b(0x14f)); } catch (_0x5da231) { if (_0x4a152b(0x80a) !== _0x4a152b(0x80a)) { const _0x4d09de = _0x15284e[_0x4a152b(0x716)][0x0][_0x4a152b(0x22d)] - _0x484f92, _0x18969b = _0x4eac06[_0x4a152b(0x716)][0x0]['clientY'] - _0x364036; _0x173a5e['abs'](_0x4d09de) > _0x36cdbe[_0x4a152b(0xb84)](_0x18969b) ? _0x24642d = _0x4a152b(0x85b) : _0x18fd17 = 'vertical'; } else _0x5bf34b(_0x4a152b(0xa32) + _0x5da231[_0x4a152b(0x99)]); } }), _0x3ffcbf(), document[_0x3cc2e4(0x7ef)]('upload-badge-button')[_0x3cc2e4(0x25c)]('click', () => document[_0x3cc2e4(0x7ef)]('badge-input')[_0x3cc2e4(0x2c5)]()), document['getElementById'](_0x3cc2e4(0x505))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), async () => { const _0x6f51e9 = _0x3cc2e4; 'UtwIL' === 'UtwIL' ? (await _0x2a986e(_0x6f51e9(0x6c6)), localStorage[_0x6f51e9(0x65e)](_0x6f51e9(0x37e)), _0x3ffcbf(), _0x5bf34b('徽章已移除。')) : _0x471ccb[_0x6f51e9(0x5e3)](_0x6f51e9(0x368), _0x5b9564); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x61c))[_0x3cc2e4(0x25c)]('change', async _0x31dee9 => { const _0x2806dc = _0x3cc2e4, _0x1587cd = _0x31dee9[_0x2806dc(0x13b)]['files'][0x0]; if (!_0x1587cd) return; try { await _0x30635e(_0x2806dc(0x6c6), _0x1587cd), await _0x3ffcbf(), _0x5bf34b('徽章已更换！'); } catch (_0x36c544) { _0x5bf34b('错误:\x20' + _0x36c544[_0x2806dc(0x99)]); } }), _0x30cb49(), document['getElementById'](_0x3cc2e4(0x5de))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x318), _0x481abc), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x5de))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x9c0), _0x481abc, { 'passive': ![] }), document['getElementById']('upload-card-button')['addEventListener'](_0x3cc2e4(0x2c5), () => document[_0x3cc2e4(0x7ef)]('card-input')[_0x3cc2e4(0x2c5)]()), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0xe5))['addEventListener'](_0x3cc2e4(0x2c5), async () => { const _0x3ba49a = _0x3cc2e4; _0x3ba49a(0x2f2) === _0x3ba49a(0x9b3) ? (_0x43a293[_0x3ba49a(0x5e3)](_0x3ba49a(0x451), _0x245a1e), _0x54b759(_0x3ba49a(0x772) + _0x53afed[_0x3ba49a(0x99)])) : (await _0x2a986e(_0x3ba49a(0x62e)), localStorage[_0x3ba49a(0x65e)]('cardState'), _0x30cb49(), _0x5bf34b(_0x3ba49a(0xa91))); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x672))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x9cb), async _0x16b948 => { const _0x2ce78f = _0x3cc2e4, _0x2ddacd = _0x16b948[_0x2ce78f(0x13b)][_0x2ce78f(0x27c)][0x0]; if (!_0x2ddacd) return; try { _0x2ce78f(0xb26) === _0x2ce78f(0xb26) ? (await _0x30635e('widget_card', _0x2ddacd), await _0x30cb49(), _0x5bf34b('卡片已更换！')) : (_0x49495b[_0x2ce78f(0x5f3)] = ![], _0x5aed3c[_0x2ce78f(0x695)] = ![]); } catch (_0x3555e6) { _0x5bf34b('错误:\x20' + _0x3555e6[_0x2ce78f(0x99)]); } }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x3f4))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), async () => { const _0x518d5f = _0x3cc2e4, _0x2b392 = await _0x56efd8(_0x518d5f(0x5c9)); _0x2b392 && (_0x518d5f(0x8aa) !== _0x518d5f(0x8aa) ? _0xc6ca1c[_0x518d5f(0x967)]('[' + _0x342b3f(_0x292126) + _0x518d5f(0x337) + (_0xc0c00a[_0x518d5f(0x313)]?.[_0x518d5f(0xd2)](/：(.+?)]/)?.[0x1] || '表情') + ']') : (localStorage[_0x518d5f(0x65e)](_0x518d5f(0x37e)), localStorage[_0x518d5f(0x65e)]('cardWidgetState'), _0x5bf34b(_0x518d5f(0x809)), setTimeout(() => location['reload'](), 0x3e8))); }); const _0x1551dd = document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x6c2)); _0x1551dd[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => { const _0x49d1a1 = _0x3cc2e4; 'mmfUv' !== _0x49d1a1(0xb4b) ? _0x303d01[_0x49d1a1(0x557)] && (_0x2ee6d6['paused'] ? _0x49ebf7[_0x49d1a1(0x28a)]() : _0x17022f[_0x49d1a1(0x5d8)]()) : (_0x5ac08c(), _0x459e0a(_0x49d1a1(0x3b6), _0x49d1a1(0x1bf))); }); const _0x3c0508 = document[_0x3cc2e4(0x7ef)]('app-music-library'); _0x3c0508['addEventListener'](_0x3cc2e4(0x2c5), () => { const _0x5bde72 = _0x3cc2e4; _0x5da6ad(), _0x459e0a('musicLibrary', _0x5bde72(0x1bf)); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x1dd))['addEventListener'](_0x3cc2e4(0x2c5), () => _0x459e0a(_0x3cc2e4(0x1bf), _0x3cc2e4(0x9f2))), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x612))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => _0x459e0a(_0x3cc2e4(0x1bf), _0x3cc2e4(0x3b6))), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x8e3))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => { const _0x27a74a = _0x3cc2e4; _0x3cf4de['activeDiaryCharacterId'] = null, _0x459e0a(_0x27a74a(0x3b6), 'diaryView'); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x1fe))[_0x3cc2e4(0x25c)]('click', _0x2aeac0), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x6f7))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), _0x4e4383), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x72c))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x90d), _0x3a3ffa => { const _0x264f39 = _0x3cc2e4; _0x3a3ffa['key'] === 'Enter' && !_0x3a3ffa[_0x264f39(0x495)] && (_0x264f39(0x110) !== 'stmMh' ? _0x19fde3 = {} : (_0x3a3ffa[_0x264f39(0x3e2)](), _0x2aeac0())); }); const _0x1b9d45 = [_0x3cc2e4(0x9e5), _0x3cc2e4(0x784), _0x3cc2e4(0xe3), _0x3cc2e4(0x9a4), _0x3cc2e4(0x2f0)]; _0x1b9d45[_0x3cc2e4(0x8cf)](_0x5f4bcf => { const _0x4a4dff = _0x3cc2e4, _0x3aeed0 = document[_0x4a4dff(0x7ef)](_0x4a4dff(0x7ca) + _0x5f4bcf + _0x4a4dff(0x83b)), _0x389985 = document[_0x4a4dff(0x7ef)](_0x4a4dff(0x7ca) + _0x5f4bcf + _0x4a4dff(0xf2)); _0x3aeed0 && _0x389985 && (_0x3aeed0[_0x4a4dff(0x25c)](_0x4a4dff(0x2c5), () => _0x389985[_0x4a4dff(0x2c5)]()), _0x389985[_0x4a4dff(0x25c)]('change', _0x2b3873 => { const _0x109411 = _0x4a4dff, _0x444bbe = _0x2b3873[_0x109411(0x13b)][_0x109411(0x27c)][0x0]; if (!_0x444bbe) return; try { if (_0x109411(0x43e) !== _0x109411(0x79e)) { const _0x1ec2f2 = URL[_0x109411(0x9e4)](_0x444bbe); _0x3aeed0[_0x109411(0x937)][_0x109411(0x6aa)] = _0x109411(0x550) + _0x1ec2f2 + '\x27)'; } else _0x5c3f3c[_0x109411(0x7a2)](_0x3aa2e3, { 'content': _0x109411(0x92c) + _0x36564a[_0x109411(0x382)] + ']', 'displayUrl': _0x2f8273[_0x109411(0x98a)] }), _0x35e344['conversationHistory'][_0x109411(0x967)](_0x247f41), _0x447009(), _0x31b3fb(_0x3943bc, _0x30d62d['conversationHistory'][_0x109411(0x30c)] - 0x1), _0x374afd[_0x109411(0x340)] = _0x5d5ba7[_0x109411(0x60d)]; } catch (_0x17fa62) { _0x5bf34b(_0x109411(0xb79) + _0x17fa62[_0x109411(0x99)]); } })); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0xb8e))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), _0x54c22e), document['getElementById'](_0x3cc2e4(0x426))['addEventListener'](_0x3cc2e4(0x2c5), () => { const _0x7a569 = _0x3cc2e4; 'KACtX' === 'KACtX' ? (_0x3cf4de[_0x7a569(0x1d7)] = _0x3cf4de[_0x7a569(0x1d7)] === _0x7a569(0xed) ? _0x7a569(0xa38) : _0x7a569(0xed), _0x1c8937()) : (_0x4775c6[_0x7a569(0x7ef)]('editing-user-id')[_0x7a569(0x35c)] = '', _0x5846f7[_0x7a569(0x7ef)]('user-profile-edit-title')['textContent'] = _0x7a569(0x465), _0x41001f[_0x7a569(0x7ef)](_0x7a569(0xc8))[_0x7a569(0x35c)] = '新用户\x20' + (_0x20ebb5[_0x7a569(0x3ec)][_0x7a569(0x30c)] + 0x1), _0x24e959['style'][_0x7a569(0x6aa)] = 'url(\x27' + _0x4a995e + '\x27)', _0x13ae62['getElementById'](_0x7a569(0x575))['value'] = '', _0x3fcf38[_0x7a569(0x937)][_0x7a569(0x8a4)] = _0x7a569(0xacf), _0xb3989['getElementById'](_0x7a569(0x924))[_0x7a569(0x937)]['display'] = _0x7a569(0xacf)); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x5d3))[_0x3cc2e4(0x25c)](_0x3cc2e4(0x318), _0x1648f5), document[_0x3cc2e4(0x7ef)]('meeting-scene-view')[_0x3cc2e4(0x25c)](_0x3cc2e4(0x9c0), _0x1648f5, { 'passive': ![] }); let _0x41fda4 = null; function _0x1648f5(_0x3ff9f4) { const _0x49ec2a = _0x3cc2e4; if (_0x41fda4) clearTimeout(_0x41fda4); const _0x131d59 = _0x3ff9f4[_0x49ec2a(0x13b)][_0x49ec2a(0xb09)](_0x49ec2a(0x59c)); if (!_0x131d59) return; const _0x57e1f5 = parseInt(_0x131d59[_0x49ec2a(0x361)][_0x49ec2a(0x47a)], 0xa); if (isNaN(_0x57e1f5)) return; const _0x49236d = () => { _0x41fda4 = setTimeout(() => { const _0x55575f = _0x2a1e; if (_0x3ff9f4['type'] === _0x55575f(0x9c0)) _0x3ff9f4[_0x55575f(0x3e2)](); _0x5078fb(_0x57e1f5); }, 0x320); }, _0x51e49b = () => { if (_0x41fda4) clearTimeout(_0x41fda4); }; document[_0x49ec2a(0x25c)]('mouseup', _0x51e49b, { 'once': !![] }), document[_0x49ec2a(0x25c)](_0x49ec2a(0x8cc), _0x51e49b, { 'once': !![] }), document['addEventListener'](_0x49ec2a(0x299), _0x51e49b, { 'once': !![] }), document[_0x49ec2a(0x25c)](_0x49ec2a(0x947), _0x51e49b, { 'once': !![] }), _0x49236d(); } document[_0x3cc2e4(0x7ef)]('import-accounting-input')[_0x3cc2e4(0x25c)](_0x3cc2e4(0x9cb), _0x4f2a7f), document[_0x3cc2e4(0x5e5)][_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), _0x5c930f => { const _0x104951 = _0x3cc2e4, _0x6c0955 = _0x5c930f[_0x104951(0x13b)][_0x104951(0xb09)](_0x104951(0xa5)); if (_0x6c0955) { const _0x3e0de2 = _0x5c930f[_0x104951(0x13b)]['closest'](_0x104951(0x6d1)), _0xf90b43 = _0x5c930f['target']['closest'](_0x104951(0x2d6)); if (_0x3e0de2) _0x341ff2(); else { if (_0xf90b43) { const _0x4b316f = _0xf90b43[_0x104951(0xb09)](_0x104951(0x280)), _0x1ba8b3 = _0xf90b43[_0x104951(0x361)][_0x104951(0x96)], _0x336059 = parseInt(_0x4b316f[_0x104951(0x361)][_0x104951(0x47a)], 0xa); _0x2f01d1(_0x1ba8b3, _0x336059, _0x6c0955); } else { if (_0x104951(0xaf7) !== _0x104951(0x665)) { const _0x5225b3 = _0x5234d7(); _0x5225b3 && _0x5225b3['activeListenSession'] && _0x5225b3[_0x104951(0x671)]['isActive'] && (_0x2bb107[_0x104951(0x937)][_0x104951(0x8a4)] = _0x104951(0x98c), setTimeout(() => _0x2bb107['classList'][_0x104951(0x44c)](_0x104951(0xfb)), 0xa)); } else _0x552eb3['getElementById'](_0x104951(0x816))[_0x104951(0x2c5)](); } } return; } if (window[_0x104951(0x9b9)]()[_0x104951(0x1ad)]()) return; const _0x3332da = _0x5c930f['target'][_0x104951(0xb09)](_0x104951(0x280)); if (_0x3332da && !_0x5c930f[_0x104951(0x13b)][_0x104951(0xb09)](_0x104951(0x527))) { const _0x321327 = parseInt(_0x3332da[_0x104951(0x361)][_0x104951(0x47a)], 0xa); !isNaN(_0x321327) && _0x5078fb(_0x321327); } }); const _0x4e5152 = document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0xe8)); _0x4e5152 && _0x4e5152[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => { _0x5bf34b('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a'); }); const _0x25164c = document[_0x3cc2e4(0x7ef)]('custom-stickers-input'), _0x6ea2e8 = localStorage[_0x3cc2e4(0x6b6)](_0x3cc2e4(0x65d)); if (_0x6ea2e8) try { if (_0x3cc2e4(0x699) === 'aEJin') { const _0x38fa63 = JSON['parse'](_0x6ea2e8); if (Array[_0x3cc2e4(0x9a1)](_0x38fa63)) { if (_0x3cc2e4(0xb25) === 'Hqrxc') _0x25164c[_0x3cc2e4(0x35c)] = _0x38fa63['map'](_0x4c1fe9 => _0x4c1fe9[_0x3cc2e4(0x382)] + '--' + _0x4c1fe9['url'])[_0x3cc2e4(0x863)]('\x0a'); else { let _0xe64b45 = ![], _0x59499a = _0x49fdbd[_0x3cc2e4(0x79c)][_0x3cc2e4(0x6f0)](_0x157aab => _0x157aab[_0x3cc2e4(0x382)] === _0x3cc2e4(0x674)); !_0x59499a && (_0x59499a = { 'id': _0x3cc2e4(0x7d9), 'name': _0x3cc2e4(0x674) }, _0x42a97a[_0x3cc2e4(0x79c)][_0x3cc2e4(0x967)](_0x59499a), _0x4974a7[_0x3cc2e4(0x76a)](_0x3cc2e4(0x655)), _0xe64b45 = !![]); const _0x34ce40 = _0x3cc2e4(0x955); let _0x455e6c = _0x4d14c3[_0x3cc2e4(0xb88)]['some'](_0x2e12d2 => _0x2e12d2['id'] === _0x34ce40); if (!_0x455e6c) { _0x3b5bff['log']('Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.'); const _0x7d041f = _0x3cc2e4(0x1b5), _0x1f7088 = { 'id': _0x34ce40, 'name': _0x3cc2e4(0xb7a), 'content': _0x7d041f, 'categoryId': _0x59499a['id'] }; _0x31bb57[_0x3cc2e4(0xb88)][_0x3cc2e4(0x967)](_0x1f7088), _0xe64b45 = !![]; } _0xe64b45 && (_0x1c0e9f(), _0x18f118['log']('Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.')); } } } else { const _0x2c7040 = []; if (_0x1dcfa0['content']) _0x2c7040[_0x3cc2e4(0x967)]({ 'text': _0x9bf1a7[_0x3cc2e4(0x313)] }); if (_0x2fd4bf[_0x3cc2e4(0x9bd)]) { const _0x41d4e2 = _0x303d36[_0x3cc2e4(0x9bd)][_0x3cc2e4(0x35a)](',')[0x1], _0x3c33f0 = _0x41363b['image'][_0x3cc2e4(0xab5)](_0x53d86b['image'][_0x3cc2e4(0xb6c)](':') + 0x1, _0x2591c1[_0x3cc2e4(0x9bd)]['indexOf'](';')) || _0x3cc2e4(0x3cb); _0x2c7040[_0x3cc2e4(0x967)]({ 'inline_data': { 'mime_type': _0x3c33f0, 'data': _0x41d4e2 } }); } return _0x2c7040; } } catch (_0x3556de) { } document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0xb3d))[_0x3cc2e4(0x25c)]('click', () => { const _0x2b9d98 = _0x3cc2e4; if (_0x2b9d98(0x4d9) === _0x2b9d98(0x4ac)) _0x989e62(); else { const _0x41bfa3 = _0x25164c[_0x2b9d98(0x35c)], _0x14c3c6 = _0x41bfa3['split']('\x0a')[_0x2b9d98(0x3f0)](_0x4c3b5d => _0x4c3b5d[_0x2b9d98(0x4ca)]() !== ''), _0x474f04 = []; let _0x1c6721 = 0x0; for (const _0xe27051 of _0x14c3c6) { if ('fZSJE' !== 'fZSJE') _0x5cea24(![]); else { const _0x2c6c2a = _0xe27051[_0x2b9d98(0x35a)]('--'); _0x2c6c2a[_0x2b9d98(0x30c)] === 0x2 && _0x2c6c2a[0x0][_0x2b9d98(0x4ca)]() && _0x2c6c2a[0x1]['trim']()[_0x2b9d98(0xb05)](_0x2b9d98(0x396)) ? _0x474f04[_0x2b9d98(0x967)]({ 'name': _0x2c6c2a[0x0][_0x2b9d98(0x4ca)](), 'url': _0x2c6c2a[0x1][_0x2b9d98(0x4ca)]() }) : _0x1c6721++; } } _0x1c6721 > 0x0 && _0x5bf34b('有\x20' + _0x1c6721 + _0x2b9d98(0x65a)); try { if (_0x2b9d98(0x9a9) !== _0x2b9d98(0x9a9)) { _0x2e8782(_0x2b9d98(0xb2e)); return; } else localStorage['setItem'](_0x2b9d98(0x65d), JSON[_0x2b9d98(0x56e)](_0x474f04)), _0x5bf34b(_0x2b9d98(0xa76)), setTimeout(() => location[_0x2b9d98(0xa0d)](), 0x5dc); } catch (_0x19b33b) { if ('chXYP' === _0x2b9d98(0x3d0)) _0x5bf34b('保存失败，你的表情包是不是太多了？'); else { const _0x841ec5 = _0x2a792f['createElement']('div'); _0x841ec5[_0x2b9d98(0x199)] = _0x2b9d98(0x363), _0x841ec5[_0x2b9d98(0x5f8)] = _0x2634e9['content'], _0x5468e0[_0x2b9d98(0x8fe)](_0x841ec5); } } } }), _0x45500e(), _0xee089d(), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x828))[_0x3cc2e4(0x25c)]('click', () => { const _0x43af03 = _0x3cc2e4; document[_0x43af03(0x7ef)](_0x43af03(0x816))[_0x43af03(0x2c5)](); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x578))[_0x3cc2e4(0x25c)]('click', async () => { const _0x14da12 = _0x3cc2e4; _0x14da12(0x330) === _0x14da12(0x330) ? (await _0x2a986e('widget_card_2'), localStorage[_0x14da12(0x65e)]('cardState2'), _0x30cb49(), _0x5bf34b(_0x14da12(0x707))) : (_0x536fae[_0x14da12(0x35c)] = _0x3ad3f7['userProfile'][_0x14da12(0x382)] || '', _0x1f9893[_0x14da12(0x557)] = _0x595c61['userProfile'][_0x14da12(0x3f1)] || _0xc9a707, _0x44104a[_0x14da12(0x35c)] = _0x571eda[_0x14da12(0x2b5)][_0x14da12(0xa2e)] || ''); }), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x816))['addEventListener'](_0x3cc2e4(0x9cb), async _0x247e1e => { const _0x3f07f7 = _0x3cc2e4, _0x10f05e = _0x247e1e['target'][_0x3f07f7(0x27c)][0x0]; if (!_0x10f05e) return; try { await _0x30635e('widget_card_2', _0x10f05e), await _0x30cb49(), _0x5bf34b(_0x3f07f7(0xb9a)); } catch (_0x54f11b) { _0x5bf34b('错误:\x20' + _0x54f11b[_0x3f07f7(0x99)]); } }), _0x5bafe8(), _0x4e9656(), _0x3b168b(), document[_0x3cc2e4(0x7ef)](_0x3cc2e4(0x56b))['addEventListener'](_0x3cc2e4(0x2c5), async () => { const _0x52a531 = _0x3cc2e4; if (_0x52a531(0x44e) !== _0x52a531(0x1a4)) { const _0x337075 = await _0x56efd8(_0x52a531(0x292)); if (_0x337075) { const _0x5b4bdb = await _0x56efd8('最后一次确认，真的要清空所有数据吗？'); if (_0x5b4bdb) { _0x2a565e(!![], _0x52a531(0x284)); try { if (_0x52a531(0x548) !== _0x52a531(0x1ef)) { localStorage['clear'](); const _0x8c52f6 = await _0xa7a9d2, _0x56b549 = _0x8c52f6[_0x52a531(0x9b1)]([_0x52a531(0x1f8), 'music_library', _0x52a531(0x7ce)], _0x52a531(0x12b)); await Promise[_0x52a531(0x6d5)]([_0x56b549[_0x52a531(0x326)](_0x52a531(0x1f8))[_0x52a531(0x436)](), _0x56b549[_0x52a531(0x326)](_0x52a531(0x51a))[_0x52a531(0x436)](), _0x56b549['objectStore']('snoop_cache')['clear']()]), await new Promise(_0x2ff8cc => { const _0x2d61fa = _0x52a531; _0x56b549[_0x2d61fa(0x455)] = _0x2ff8cc; }), _0x5bf34b(_0x52a531(0x567)), setTimeout(() => { const _0x1a5050 = _0x52a531; _0x1a5050(0x857) !== _0x1a5050(0x6ad) ? location[_0x1a5050(0xa0d)]() : _0x3ecf19[_0x1a5050(0x5e3)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x140398['id'], _0xee697e); }, 0x5dc); } else return _0x52a531(0x1ca); } catch (_0x198a27) { _0x2a565e(![]), _0x5bf34b(_0x52a531(0x4f2) + _0x198a27[_0x52a531(0x99)]); } } } } else { if (_0xc69f1d[_0x52a531(0xfe)]) _0x5e6ce0(_0x1f9ca5['diaryPressTimer']); const _0xdf6eaa = _0x514cce[_0x52a531(0x13b)][_0x52a531(0xb09)]('.diary-entry'); if (!_0xdf6eaa) return; const _0x4c9e5e = _0xdf6eaa[_0x52a531(0x361)]['timestamp'], _0x4ece35 = _0xdf6eaa[_0x52a531(0x4ad)][_0x52a531(0x182)]('user') ? _0x52a531(0x32c) : 'ai'; if (!_0x4c9e5e) return; const _0x4a1c5c = () => { const _0x447dc6 = _0x52a531; _0x5002ba[_0x447dc6(0xfe)] = _0x332486(() => { const _0x18ac6f = _0x447dc6; if (_0x4e559b[_0x18ac6f(0x76d)] === 'touchstart') _0x470333['preventDefault'](); _0x4e55e7(_0x3f0f83(_0x4c9e5e, 0xa), _0x4ece35); }, 0x320); }, _0xc96d8c = () => { const _0x556714 = _0x52a531; if (_0x1f0295[_0x556714(0xfe)]) _0x3aeb5c(_0x70cf80['diaryPressTimer']); }; _0x4ab29c[_0x52a531(0x25c)](_0x52a531(0xa8e), _0xc96d8c, { 'once': !![] }), _0x19a383[_0x52a531(0x25c)]('touchend', _0xc96d8c, { 'once': !![] }), _0x18a7f1['addEventListener'](_0x52a531(0x947), _0xc96d8c, { 'once': !![] }), _0x4a1c5c(); } }); const _0x50681b = document['querySelector'](_0x3cc2e4(0x6ac)); if (_0x50681b) { if (_0x3cc2e4(0x711) === _0x3cc2e4(0x2b1)) _0x414f34(), _0xbe8a61(); else { const _0x10c61f = document[_0x3cc2e4(0xb60)](_0x3cc2e4(0xb0b)); _0x10c61f['id'] = _0x3cc2e4(0x211), _0x10c61f['textContent'] = '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', Object[_0x3cc2e4(0x7a2)](_0x10c61f[_0x3cc2e4(0x937)], { 'position': _0x3cc2e4(0x5ab), 'top': _0x3cc2e4(0x762), 'right': '20px', 'fontSize': '0.7rem', 'lineHeight': _0x3cc2e4(0x73c), 'color': _0x3cc2e4(0x3fe), 'opacity': _0x3cc2e4(0x8ed), 'cursor': _0x3cc2e4(0xa86), 'zIndex': '1', 'transition': 'opacity\x200.2s\x20ease-in-out', 'whiteSpace': _0x3cc2e4(0x589), 'textAlign': 'right' }), _0x10c61f[_0x3cc2e4(0x8bb)] = () => { const _0x2816b9 = _0x3cc2e4; _0x10c61f['style'][_0x2816b9(0x52e)] = '1'; }, _0x10c61f[_0x3cc2e4(0x11c)] = () => { const _0x1d436a = _0x3cc2e4; if (_0x1d436a(0x696) !== 'ZwZzP') { const _0x161645 = _0x55de65[_0x1d436a(0x9b1)](_0x4d7f58, _0x1d436a(0x12b)), _0x4055a5 = _0x161645[_0x1d436a(0x326)](_0x21474e), _0x143834 = _0x4055a5[_0x1d436a(0x336)]({ 'id': _0x4f78a8, 'blob': _0x27f55d }); _0x143834['onsuccess'] = () => _0x48490c(_0x143834['result']), _0x143834['onerror'] = () => _0x469eb3(_0x143834[_0x1d436a(0x5e3)]); } else _0x10c61f[_0x1d436a(0x937)][_0x1d436a(0x52e)] = '0.5'; }, _0x10c61f[_0x3cc2e4(0x25c)](_0x3cc2e4(0x2c5), () => { const _0x9a7680 = _0x3cc2e4; 'HyOck' !== _0x9a7680(0x7eb) ? (_0x5ca2d0[_0x9a7680(0x76a)](_0x9a7680(0x8ab) + _0xdb7042), _0x554032[_0x9a7680(0x7fb)](_0x2cec89, { 'keyPath': 'id' })) : window[_0x9a7680(0x91d)](_0x9a7680(0x219), _0x9a7680(0x83a)); }), _0x50681b[_0x3cc2e4(0x937)][_0x3cc2e4(0x843)] = _0x3cc2e4(0x320), _0x50681b[_0x3cc2e4(0x66a)](_0x10c61f); } } } const _0x4327d0 = _0xe59ed1(0x51a); async function _0x454120(_0x5440ff) { const _0x30dd14 = _0xe59ed1; if (_0x30dd14(0x81e) !== 'hMhas') { const _0x379424 = await _0xa7a9d2; return new Promise((_0x35d0d7, _0x7ba37d) => { const _0x31b79a = _0x30dd14, _0x1927dc = _0x379424['transaction'](_0x4327d0, _0x31b79a(0x571)), _0x2ddf33 = _0x1927dc[_0x31b79a(0x326)](_0x4327d0), _0x427b0a = _0x2ddf33[_0x31b79a(0x222)](_0x5440ff); _0x427b0a[_0x31b79a(0x78f)] = () => _0x35d0d7(_0x427b0a[_0x31b79a(0xb95)]), _0x427b0a[_0x31b79a(0x1bb)] = () => _0x7ba37d(_0x427b0a[_0x31b79a(0x5e3)]); }); } else _0x2c571d['value'] = _0x130491[_0x30dd14(0x71a)][_0x30dd14(0x1a0)] || '', _0x5299ad[_0x30dd14(0x35c)] = _0xb7fa70[_0x30dd14(0x71a)]['key'] || '', _0x215dcf[_0x30dd14(0x35c)] = _0x4436a2[_0x30dd14(0x71a)]['model'] || '', _0x1271a7[_0x30dd14(0x35c)] = _0x23b6d1(_0x11b265[_0x30dd14(0x84a)]?.[_0x30dd14(0xb59)] ?? 0x64), _0x3196ce['getElementById']('api-provider')['value'] = _0x44c195[_0x30dd14(0x71a)][_0x30dd14(0x591)] || _0x30dd14(0x194); } async function _0x1db9d2() { const _0x169816 = await _0xa7a9d2; return new Promise((_0x39bbea, _0xd5ddc2) => { const _0x32fbda = _0x2a1e; if (_0x32fbda(0x14c) === _0x32fbda(0x14c)) { const _0x4826ee = _0x169816[_0x32fbda(0x9b1)](_0x4327d0, _0x32fbda(0x571)), _0x13c530 = _0x4826ee[_0x32fbda(0x326)](_0x4327d0), _0x173243 = _0x13c530[_0x32fbda(0x5ef)](); _0x173243[_0x32fbda(0x78f)] = () => _0x39bbea(_0x173243[_0x32fbda(0xb95)]), _0x173243[_0x32fbda(0x1bb)] = () => _0xd5ddc2(_0x173243[_0x32fbda(0x5e3)]); } else { const _0x43d9a3 = _0x13b1e4[_0x32fbda(0x13b)][_0x32fbda(0x361)]['categoryId'], _0x4ddfe3 = _0x2ca6af[_0x32fbda(0x53f)](_0x32fbda(0x792) + _0x43d9a3 + '\x22]'), _0x3f07ee = _0x2a015a[_0x32fbda(0x53f)](_0x32fbda(0x792) + _0x43d9a3 + _0x32fbda(0xac)), _0x37f6de = _0xd9c05a[_0x32fbda(0x5cb)](_0x32fbda(0x6f2) + _0x43d9a3 + '\x22]'); if (_0x3f07ee[_0x32fbda(0x30c)] === 0x0) _0x37f6de[_0x32fbda(0x5f3)] = ![], _0x37f6de[_0x32fbda(0x695)] = ![]; else _0x3f07ee[_0x32fbda(0x30c)] === _0x4ddfe3[_0x32fbda(0x30c)] ? (_0x37f6de[_0x32fbda(0x5f3)] = !![], _0x37f6de[_0x32fbda(0x695)] = ![]) : _0x37f6de['indeterminate'] = !![]; _0x16a1e1(); } }); } async function _0x448938(_0x3767c7) { const _0x3d539e = await _0xa7a9d2; return new Promise((_0x52fb14, _0x26e36c) => { const _0x4a3f2d = _0x2a1e, _0xe7be1e = _0x3d539e['transaction'](_0x4327d0, 'readwrite'), _0x578b63 = _0xe7be1e[_0x4a3f2d(0x326)](_0x4327d0), _0x35643b = _0x578b63[_0x4a3f2d(0x336)](_0x3767c7); _0x35643b[_0x4a3f2d(0x78f)] = () => _0x52fb14(_0x35643b[_0x4a3f2d(0xb95)]), _0x35643b[_0x4a3f2d(0x1bb)] = () => _0x26e36c(_0x35643b[_0x4a3f2d(0x5e3)]); }); } async function _0x1af611(_0x4cbe48) { const _0x23c2ff = await _0xa7a9d2; return new Promise((_0x231d9b, _0x215b82) => { const _0xf703cf = _0x2a1e, _0x259a3a = _0x23c2ff['transaction'](_0x4327d0, _0xf703cf(0x12b)), _0xf4869c = _0x259a3a[_0xf703cf(0x326)](_0x4327d0), _0x1b5f44 = _0xf4869c[_0xf703cf(0x68c)](_0x4cbe48); _0x1b5f44[_0xf703cf(0x78f)] = () => _0x231d9b(), _0x1b5f44[_0xf703cf(0x1bb)] = () => _0x215b82(_0x1b5f44[_0xf703cf(0x5e3)]); }); } let _0x4b8acd = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x36d04b = { 'audio': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x379)), 'cover': document['getElementById'](_0xe59ed1(0xb7d)), 'info': document[_0xe59ed1(0x7ef)](_0xe59ed1(0x3e7)), 'lyrics': document[_0xe59ed1(0x7ef)]('altar-slot-lyrics') }, _0x30593d = { 'audio': document['getElementById'](_0xe59ed1(0xb5a)), 'cover': document[_0xe59ed1(0x7ef)](_0xe59ed1(0xae3)), 'info': document[_0xe59ed1(0x7ef)](_0xe59ed1(0xabf)), 'lyrics': document[_0xe59ed1(0x7ef)]('lyrics-file-input') }; for (const _0x30e413 in _0x36d04b) { _0x36d04b[_0x30e413][_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x30593d[_0x30e413][_0xe59ed1(0x2c5)]()), _0x30593d[_0x30e413]['addEventListener'](_0xe59ed1(0x9cb), _0x499dc1 => { _0x5d98c4(_0x30e413, _0x499dc1['target']['files'][0x0]); }); } function _0x5d98c4(_0x94174e, _0x556540) { const _0x16f392 = _0xe59ed1; if (!_0x556540) return; _0x4b8acd[_0x94174e] = _0x556540, _0x36d04b[_0x94174e][_0x16f392(0x5cb)](_0x16f392(0x9a))[_0x16f392(0x5f8)] = _0x556540['name'], _0x36d04b[_0x94174e][_0x16f392(0x4ad)][_0x16f392(0x44c)](_0x16f392(0x800)), _0x3ad7ec(); } function _0x3ad7ec() { const _0x15cf5d = _0xe59ed1; if (_0x15cf5d(0x8ae) !== 'fXjAe') { if (_0x1383d8[_0x15cf5d(0x30c)] === 0x0) return; _0x11b9ff = (_0x20b862 + 0x1) % _0x1efa2b['length'], _0x5bd6a8(_0x14cd02[_0x86ca38], _0x45744f); } else { const _0x4abf9b = document['getElementById']('confirm-altar-upload-button'); _0x4b8acd['audio'] && _0x4b8acd['info'] ? _0x4abf9b[_0x15cf5d(0x193)] = ![] : _0x15cf5d(0x4eb) !== 'TdWhi' ? (_0x9bdaa1[_0x15cf5d(0x937)][_0x15cf5d(0x843)] = _0x15cf5d(0x5ab), _0x4e0f1f[_0x15cf5d(0x937)]['top'] = _0x15cf5d(0xdd), _0x3fbdca[_0x15cf5d(0x937)][_0x15cf5d(0x54a)] = _0x15cf5d(0x99e), _0x3022e2[_0x15cf5d(0x937)]['transform'] = 'translateX(-50%)', _0x2d2176[_0x15cf5d(0x937)][_0x15cf5d(0x8a4)] = 'inline-block') : _0x4abf9b[_0x15cf5d(0x193)] = !![]; } } function _0x1b36af() { const _0xb8c9fc = _0xe59ed1; _0x4b8acd = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0xfd30a6 in _0x36d04b) { _0x36d04b[_0xfd30a6][_0xb8c9fc(0x4ad)][_0xb8c9fc(0x713)](_0xb8c9fc(0x800)), _0x30593d[_0xfd30a6][_0xb8c9fc(0x35c)] = ''; } _0x36d04b[_0xb8c9fc(0x17c)][_0xb8c9fc(0x5cb)](_0xb8c9fc(0x9a))['textContent'] = _0xb8c9fc(0x1e9), _0x36d04b[_0xb8c9fc(0xa99)]['querySelector'](_0xb8c9fc(0x9a))['textContent'] = '点击选择\x20.jpg\x20或\x20.png', _0x36d04b[_0xb8c9fc(0x718)][_0xb8c9fc(0x5cb)]('.slot-filename')[_0xb8c9fc(0x5f8)] = _0xb8c9fc(0x763), _0x36d04b[_0xb8c9fc(0x602)]['querySelector'](_0xb8c9fc(0x9a))['textContent'] = _0xb8c9fc(0x74a), _0x3ad7ec(); } document['getElementById'](_0xe59ed1(0x431))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), async () => { const _0x21af00 = _0xe59ed1; if (!_0x4b8acd[_0x21af00(0x17c)] || !_0x4b8acd[_0x21af00(0x718)]) { _0x5bf34b('真是的，必需的祭品都还没准备好！'); return; } await _0x3cd347(); }), document[_0xe59ed1(0x7ef)]('upload-music-button')['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x5c2ece = _0xe59ed1; _0x1b36af(), _0x459e0a(_0x5c2ece(0xa19), 'musicLibrary'); }), document[_0xe59ed1(0x7ef)]('back-to-library-from-altar')[_0xe59ed1(0x25c)]('click', () => { const _0x4203ba = _0xe59ed1; _0x459e0a(_0x4203ba(0x9f2), _0x4203ba(0xa19)); }); async function _0x3cd347() { const _0x189477 = _0xe59ed1; _0x2a565e(!![], _0x189477(0x4f0)); try { const _0x2938a1 = await _0x4b8acd[_0x189477(0x718)][_0x189477(0x993)](); let _0x466355; if (_0x2938a1[_0x189477(0x4ca)]()[_0x189477(0xb05)]('{')) _0x189477(0x31e) !== _0x189477(0x747) ? _0x466355 = JSON[_0x189477(0x6e7)](_0x2938a1) : (_0x1abef1(_0x50a2ae['id']), _0x333c7e(_0x189477(0x2df)), _0x5928a9('chat'), _0x372af4(![])); else { _0x466355 = {}; const _0x334f52 = _0x2938a1['split']('\x0a'); _0x334f52[_0x189477(0x8cf)](_0x489657 => { const _0x414679 = _0x189477; if (_0x414679(0x205) !== 'HxTaJ') { const _0x53adae = _0x489657[_0x414679(0x35a)](/:\s|：\s/); if (_0x53adae['length'] === 0x2) { if (_0x414679(0x749) !== 'gytOB') _0x1a8017[_0x414679(0x382)] = _0x1813e9, _0x598d7a[_0x414679(0x313)] = _0x15dbf8, _0x4da820['categoryId'] = _0x2ac0fa; else { const _0x1eec51 = _0x53adae[0x0][_0x414679(0x4ca)](), _0x1ed890 = _0x53adae[0x1]['trim'](), _0x4d5d2f = { '歌名': _0x414679(0x536), '艺术家': '歌手', '专辑': '专辑' }; _0x4d5d2f[_0x1eec51] && (_0x466355[_0x4d5d2f[_0x1eec51]] = _0x1ed890); } } } else _0x448246 += _0x414679(0x650) + _0x50d75a['contact_name'] + _0x414679(0x6e8) + _0x34b9f7['last_message_preview'] + _0x414679(0xb0f), _0x439dc[_0x414679(0x76a)] && _0x34b1f4[_0x414679(0x9a1)](_0x13fab7['log']) && (_0x33cc8b += _0x414679(0x42c), _0x250dc2['log'][_0x414679(0x8cf)](_0x3f880b => { const _0x47145c = _0x414679, _0x243c68 = _0x3f880b['sender'] === _0x47145c(0xb7e) ? '你' : _0x3c03e1['contact_name']; _0x3a8f0d += _0x47145c(0x98b) + _0x243c68 + ':\x20' + _0x3f880b['content'] + '\x0a'; })); }); if (!_0x466355[_0x189477(0x536)]) { if (_0x189477(0xa4d) === 'wFfGQ') throw new Error(_0x189477(0x67c)); else _0xf1abb2(() => { const _0x432deb = _0x189477; _0x283b43[_0x432deb(0x937)][_0x432deb(0x52e)] = '1'; }); } _0x466355[_0x189477(0x85d)] = _0x189477(0x55c) + Date[_0x189477(0x740)]() + '\x20'; } const _0x4eefa8 = _0x189477(0x55c) + (_0x466355[_0x189477(0x85d)] || Date['now']()) + '\x20', _0x515a3e = { 'id': _0x4eefa8, 'info': _0x466355, 'audio': _0x4b8acd[_0x189477(0x17c)], 'cover': _0x4b8acd[_0x189477(0xa99)], 'lyrics': _0x4b8acd[_0x189477(0x602)] ? await _0x4b8acd[_0x189477(0x602)]['text']() : '' }; await _0x448938(_0x515a3e), await _0x5da6ad(), _0x2a565e(![]), _0x5bf34b(_0x189477(0x999) + _0x466355['歌曲名称'] + _0x189477(0x71b)), _0x459e0a(_0x189477(0x9f2), _0x189477(0xa19)); } catch (_0x180eac) { _0x2a565e(![]), console[_0x189477(0x5e3)](_0x189477(0x2c8), _0x180eac), _0x5bf34b(_0x189477(0x39e) + _0x180eac[_0x189477(0x99)] + '\x20'); } } async function _0x5da6ad() { const _0x54fa49 = _0xe59ed1; if (_0x54fa49(0x570) !== _0x54fa49(0x570)) { const _0x20d9ca = _0x2f7e93[_0x54fa49(0x9b1)](_0x579e08, _0x54fa49(0x571)), _0x20632b = _0x20d9ca[_0x54fa49(0x326)](_0x15a2bc), _0x29e566 = _0x20632b[_0x54fa49(0x222)](_0x2a2d72); _0x29e566['onsuccess'] = () => _0x5de90c(_0x29e566['result'] ? _0x29e566[_0x54fa49(0xb95)][_0x54fa49(0x3e1)] : null), _0x29e566['onerror'] = () => _0x37251d(_0x29e566['error']); } else { const _0x50e55f = document[_0x54fa49(0x7ef)](_0x54fa49(0x9f3)); _0x50e55f[_0x54fa49(0x252)] = ''; const _0xe95212 = await _0x1db9d2(); if (_0xe95212['length'] === 0x0) { _0x50e55f[_0x54fa49(0x252)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } _0xe95212[_0x54fa49(0xb11)]((_0x43a6e5, _0x3b4a6d) => (_0x43a6e5[_0x54fa49(0x718)][_0x54fa49(0x536)] || '')[_0x54fa49(0x653)](_0x3b4a6d[_0x54fa49(0x718)][_0x54fa49(0x536)] || '')); for (const _0x14f1d2 of _0xe95212) { if (_0x54fa49(0x1c7) !== _0x54fa49(0xb36)) { const _0x421540 = document[_0x54fa49(0xb60)]('div'); _0x421540[_0x54fa49(0x199)] = _0x54fa49(0x72f), _0x421540[_0x54fa49(0x361)][_0x54fa49(0x96)] = _0x14f1d2['id']; const _0x5c0a4e = _0x14f1d2[_0x54fa49(0xa99)] ? URL['createObjectURL'](_0x14f1d2['cover']) : _0x574d9b; _0x421540[_0x54fa49(0x252)] = _0x54fa49(0x4d0) + _0x5c0a4e + _0x54fa49(0x60f) + (_0x14f1d2[_0x54fa49(0x718)][_0x54fa49(0x536)] || '未知歌曲') + _0x54fa49(0xe1) + (_0x14f1d2[_0x54fa49(0x718)]['歌手'] || _0x54fa49(0x518)) + _0x54fa49(0xb34); let _0x202ae9 = null; const _0x54e5b3 = _0x12af34 => { const _0x194997 = _0x54fa49; if (_0x12af34[_0x194997(0x434)] === 0x2) return; _0x202ae9 = setTimeout(async () => { const _0xb87eb4 = _0x194997; if (_0xb87eb4(0x794) !== _0xb87eb4(0x4b7)) { if (_0x12af34['type'] === _0xb87eb4(0x9c0)) _0x12af34[_0xb87eb4(0x3e2)](); const _0x4f11ec = await _0x56efd8(_0xb87eb4(0x31c) + _0x14f1d2[_0xb87eb4(0x718)]['歌曲名称'] + _0xb87eb4(0xb15)); _0x4f11ec && (await _0x1af611(_0x14f1d2['id']), await _0x5da6ad(), _0x5bf34b('已删除。')); } else _0x5af701[_0xb87eb4(0x84a)][_0xb87eb4(0x225)] = null, _0x181409(), _0x136a8c(), _0x30f044(_0xb87eb4(0x4dd)); }, 0x320); }, _0x27955c = () => { const _0x4fb7f3 = _0x54fa49; _0x4fb7f3(0x7e8) === 'ClVZf' ? clearTimeout(_0x202ae9) : (_0x46179d[_0x4fb7f3(0x65e)](_0x4fb7f3(0xa71)), _0xcb8c52(), _0x1db02a(_0x4fb7f3(0x350))); }; _0x421540[_0x54fa49(0x25c)](_0x54fa49(0x318), _0x54e5b3), _0x421540[_0x54fa49(0x25c)]('mouseup', _0x27955c), _0x421540[_0x54fa49(0x25c)]('mouseleave', _0x27955c), _0x421540[_0x54fa49(0x25c)]('touchstart', _0x54e5b3, { 'passive': ![] }), _0x421540['addEventListener'](_0x54fa49(0x299), _0x27955c), _0x421540['addEventListener'](_0x54fa49(0x947), _0x27955c), _0x421540[_0x54fa49(0x25c)](_0x54fa49(0x2c5), _0x13f29e => { const _0x1e8f4f = _0x54fa49; if (_0x202ae9) clearTimeout(_0x202ae9); if (_0x13f29e[_0x1e8f4f(0x12d)]) return; setTimeout(() => { const _0x55f834 = _0x1e8f4f; 'jlEfR' === _0x55f834(0x372) ? _0x202ae9 && ('wdmbK' === 'wdmbK' ? _0x42f4f1(_0x14f1d2['id'], _0xe95212['map'](_0x3b3f96 => _0x3b3f96['id'])) : (_0x5883d9['posts'] = [], _0x103a76(), _0x1c8061(), _0x506a5f(_0x55f834(0xae)))) : _0x4dd1ce[_0x55f834(0x1d2)]['push']({ 'senderId': _0x10a882['id'], 'kind': _0x55f834(0x42f), 'songName': _0xa1034e['songName'], 'artist': _0xaa253a['artist'] }); }, 0x32); }), _0x50e55f[_0x54fa49(0x8fe)](_0x421540); } else { _0x42d092 = ![], _0x37f62a[_0x54fa49(0x937)][_0x54fa49(0x8a4)] = _0x54fa49(0xacf), _0x410e56[_0x54fa49(0x7ef)]('galgame-textbox-container')[_0x54fa49(0x937)][_0x54fa49(0x8a4)] = _0x54fa49(0x540), _0x4d2d61[_0x54fa49(0x7ef)](_0x54fa49(0xa53))[_0x54fa49(0x937)][_0x54fa49(0x8a4)] = 'block'; if (!_0x4d4515) { const _0x24d156 = _0x58abd2(_0x14d7f4[_0x54fa49(0xac6)]); _0x24d156 && (_0x24d156[_0x54fa49(0xa82)] = _0x3142b6, _0x167b88(_0x8196dc[_0x54fa49(0xac6)], _0x54fa49(0x9e5))); } } } } } _0x208210['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x225f36 = _0xe59ed1; _0x5bf34b(_0x225f36(0xa13)); }), _0x1fcd9a['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x495719 = _0xe59ed1; _0x5bf34b(_0x495719(0x6df)); }); let _0x147d8d = [], _0x593c3c = -0x1; async function _0x42f4f1(_0x5d00ed, _0x5b67cc) { const _0x26da33 = _0xe59ed1, _0x58c869 = await _0x454120(_0x5d00ed); if (!_0x58c869) return; _0x3ec13b = { 'title': _0x58c869[_0x26da33(0x718)][_0x26da33(0x536)] || _0x26da33(0x546), 'artist': _0x58c869[_0x26da33(0x718)]['歌手'] || _0x26da33(0x518), 'cover': _0x58c869['cover'] ? URL[_0x26da33(0x9e4)](_0x58c869[_0x26da33(0xa99)]) : _0x574d9b, 'isFromLibrary': !![] }; const _0x554688 = URL[_0x26da33(0x9e4)](_0x58c869[_0x26da33(0x17c)]); _0x450910[_0x26da33(0x557)] = _0x554688, _0x450910['play'](), _0xcac1e4(); } async function _0xcac1e4() { const _0x19ff45 = _0xe59ed1; if (_0x19ff45(0xa33) !== _0x19ff45(0x155)) { const _0x4ea7e4 = document[_0x19ff45(0x7ef)](_0x19ff45(0x880)), _0x5cdf65 = document[_0x19ff45(0x7ef)]('widget-title'), _0x2ba9d1 = document[_0x19ff45(0x7ef)](_0x19ff45(0x28b)), _0xc70084 = document[_0x19ff45(0x7ef)](_0x19ff45(0x371)), _0x4cb627 = _0x3ec13b; if (_0x4cb627 && _0x4cb627[_0x19ff45(0x8f0)]) { if (_0x19ff45(0x7df) !== _0x19ff45(0x42d)) _0x5cdf65[_0x19ff45(0x5f8)] = _0x4cb627[_0x19ff45(0x4c5)], _0x2ba9d1[_0x19ff45(0x5f8)] = _0x4cb627[_0x19ff45(0xb08)], _0x4ea7e4[_0x19ff45(0x4ad)][_0x19ff45(0x44c)](_0x19ff45(0xa05)), _0x4ea7e4[_0x19ff45(0x937)]['setProperty'](_0x19ff45(0x9f6), _0x19ff45(0x891) + _0x4cb627[_0x19ff45(0xa99)] + ')'); else return _0x29944e['error'](_0x19ff45(0x9ab), _0x4cf3ba), _0x160bcd[_0x19ff45(0x5e3)](_0x19ff45(0x7bf), _0x4d64f8[_0x19ff45(0x470)] || _0x19ff45(0x135)), null; } else _0x19ff45(0x3d9) !== 'OwJFf' ? (_0x5cdf65[_0x19ff45(0x5f8)] = '暂无音乐', _0x2ba9d1[_0x19ff45(0x5f8)] = '请在动态或聊天中播放', _0x4ea7e4[_0x19ff45(0x4ad)][_0x19ff45(0x713)](_0x19ff45(0xa05)), _0xc70084['style'][_0x19ff45(0x529)](_0x19ff45(0x9f6), 'none')) : (_0x544638 = _0x5ce982[_0x19ff45(0xb60)](_0x19ff45(0x937)), _0x9ba560['id'] = _0x19ff45(0xb39), _0x58f48f[_0x19ff45(0x7a6)]['appendChild'](_0x565646)); } else _0x57969d *= _0x3c9b70 / _0x32d9f0, _0x395a58 = _0x46cb26; } function _0x4417d7() { const _0x109921 = _0xe59ed1, _0x45ced8 = document[_0x109921(0x7ef)](_0x109921(0x506)); if (!_0x45ced8) return; const _0x29ae23 = document[_0x109921(0x7ef)](_0x109921(0x584)), _0x326f36 = document[_0x109921(0x7ef)](_0x109921(0x94)), _0x36ddcd = document[_0x109921(0x7ef)](_0x109921(0x803)), _0x2d07c7 = document[_0x109921(0x7ef)](_0x109921(0x177)), _0x452b78 = _0x3cf4de[_0x109921(0xaab)][_0x3cf4de['currentlyPlayingIndex']], _0x4b0f79 = _0x3cf4de['isPlaying'], _0x3a04be = document[_0x109921(0x7ef)](_0x109921(0x15e))['classList'][_0x109921(0x182)](_0x109921(0x5d1)); _0x452b78 && _0x3a04be ? (_0x45ced8[_0x109921(0x4ad)]['remove']('hidden'), _0x452b78[_0x109921(0x6b3)] ? _0x47b504(_0x452b78[_0x109921(0x6b3)])[_0x109921(0x683)](_0x586c53 => { if (_0x586c53) _0x29ae23['src'] = URL['createObjectURL'](_0x586c53); }) : _0x29ae23['src'] = _0x452b78[_0x109921(0xa08)] || _0x574d9b, _0x326f36[_0x109921(0x5f8)] = _0x452b78[_0x109921(0x6fd)] || _0x109921(0x546), _0x36ddcd[_0x109921(0x5f8)] = _0x452b78[_0x109921(0xb08)] || '未知艺术家', _0x2d07c7[_0x109921(0x5f8)] = _0x4b0f79 ? '❚❚' : '▶') : _0x109921(0x6ab) !== _0x109921(0x6ab) ? _0x2f69bd['classList'][_0x109921(0x44c)](_0x109921(0x8c3)) : _0x45ced8[_0x109921(0x4ad)]['add']('hidden'); } _0x208210 && _0x208210['addEventListener']('click', () => { const _0x33c462 = _0xe59ed1; if ('ndliv' !== _0x33c462(0xa7b)) { _0x342374(_0x33c462(0xb6b), _0x33c462(0x8ac)); const _0x567744 = _0x325d29[_0x33c462(0x7ef)](_0x33c462(0x4c6)); _0x567744[_0x33c462(0x252)] = '', _0x540fff[_0x33c462(0x79c)]['forEach'](_0x99f5cc => { const _0x58394c = _0x33c462, _0xc4d0e3 = _0x113afc[_0x58394c(0xb60)](_0x58394c(0x308)); _0xc4d0e3[_0x58394c(0x35c)] = _0x99f5cc['id'], _0xc4d0e3[_0x58394c(0x5f8)] = _0x99f5cc[_0x58394c(0x382)], _0x567744[_0x58394c(0x8fe)](_0xc4d0e3); }); if (_0x59cadb) { const _0x344b6e = _0xc3888f[_0x33c462(0xb88)][_0x33c462(0x6f0)](_0xbe5422 => _0xbe5422['id'] === _0x42d287); if (!_0x344b6e) return; _0x389892[_0x33c462(0x7ef)](_0x33c462(0x9fc))[_0x33c462(0x35c)] = _0x344b6e['id'], _0x385c4b['getElementById'](_0x33c462(0xb92))['textContent'] = _0x33c462(0x44d), _0x566a69[_0x33c462(0x7ef)](_0x33c462(0x938))['value'] = _0x344b6e['name'], _0x42014d['getElementById'](_0x33c462(0x813))['value'] = _0x344b6e[_0x33c462(0x313)], _0x567744[_0x33c462(0x35c)] = _0x344b6e[_0x33c462(0x2da)] || _0x33c462(0xa41); } else _0xe54b8f[_0x33c462(0x7ef)]('editing-world-book-id')[_0x33c462(0x35c)] = '', _0x21d5a1[_0x33c462(0x7ef)](_0x33c462(0xb92))['textContent'] = _0x33c462(0x11b), _0x29d4b5[_0x33c462(0x7ef)]('world-book-edit-name')[_0x33c462(0x35c)] = '', _0x5c1206['getElementById'](_0x33c462(0x813))['value'] = '', _0x567744[_0x33c462(0x35c)] = _0x2e1699[_0x33c462(0x781)]; } else { if (_0x147d8d[_0x33c462(0x30c)] === 0x0) return; _0x593c3c = (_0x593c3c + 0x1) % _0x147d8d[_0x33c462(0x30c)], _0x42f4f1(_0x147d8d[_0x593c3c], _0x147d8d); } }); _0x1fcd9a && _0x1fcd9a['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x135429 = _0xe59ed1; if ('nMCbt' === _0x135429(0x4bf)) _0x299a29 = _0x1a1e02[_0x135429(0x6e7)](_0x31bfab); else { if (_0x147d8d['length'] === 0x0) return; _0x593c3c = (_0x593c3c - 0x1 + _0x147d8d[_0x135429(0x30c)]) % _0x147d8d['length'], _0x42f4f1(_0x147d8d[_0x593c3c], _0x147d8d); } }); _0x450910[_0xe59ed1(0x25c)]('play', () => { const _0x34f762 = _0xe59ed1; 'gBbMV' === _0x34f762(0xa25) ? (_0x184132[_0x34f762(0x937)][_0x34f762(0x8a4)] = _0x34f762(0xacf), _0x1b99ae['getElementById'](_0x34f762(0xa22))[_0x34f762(0x937)][_0x34f762(0x8a4)] = 'flex') : (_0x3cf4de['isPlaying'] = !![], _0x201630()); }), _0x450910[_0xe59ed1(0x25c)]('pause', () => { const _0x1f947d = _0xe59ed1; _0x3cf4de[_0x1f947d(0x5e9)] = ![], _0x201630(); }), _0x450910[_0xe59ed1(0x25c)](_0xe59ed1(0x594), () => { const _0x11c343 = _0xe59ed1; if (_0x208210) _0x208210[_0x11c343(0x2c5)](); }); function _0x1199c0() { const _0x180648 = _0xe59ed1, _0x361855 = _0x5234d7(); if (!_0x361855) return; _0x3887dc[_0x180648(0x252)] = '', _0x2c2712[_0x180648(0x35c)] = '', _0x361855[_0x180648(0x76d)] === _0x180648(0x861) ? (_0x361855[_0x180648(0x48f)][_0x180648(0x8cf)](_0x4d35be => { const _0x48b027 = _0x180648; if (_0x48b027(0x230) !== _0x48b027(0x230)) _0x3058ea[_0x48b027(0x103)][_0x48b027(0x8cf)]((_0x196dd9, _0x2f545e) => _0x5bc11b(_0x196dd9, _0x2f545e)); else { const _0x344bcc = _0xd97907(_0x4d35be); if (_0x344bcc) { const _0x33e4e5 = document[_0x48b027(0xb60)](_0x48b027(0x308)); _0x33e4e5[_0x48b027(0x35c)] = _0x344bcc['id'], _0x33e4e5[_0x48b027(0x5f8)] = _0x344bcc[_0x48b027(0x382)], _0x3887dc[_0x48b027(0x8fe)](_0x33e4e5); } } }), _0x178d9c[_0x180648(0x937)][_0x180648(0x8a4)] = 'block') : _0x178d9c[_0x180648(0x937)][_0x180648(0x8a4)] = _0x180648(0xacf), _0x213385['classList'][_0x180648(0x44c)](_0x180648(0xfb)), _0x2c2712['focus'](); } function _0x957eb6() { const _0x2e17a2 = _0xe59ed1; if (_0x2e17a2(0xa0a) !== 'SanYa') { const _0x25b161 = parseFloat(_0x2c2712[_0x2e17a2(0x35c)]); if (isNaN(_0x25b161) || _0x25b161 <= 0x0) { _0x5bf34b(_0x2e17a2(0x365)); return; } const _0x1b3ead = _0x5234d7(); let _0x3ffc56 = null; _0x1b3ead[_0x2e17a2(0x76d)] === _0x2e17a2(0x861) ? _0x3ffc56 = _0x3887dc[_0x2e17a2(0x35c)] : _0x2e17a2(0x89f) !== _0x2e17a2(0x427) ? _0x3ffc56 = _0x1b3ead[_0x2e17a2(0x48f)][0x0] : _0x278f26[_0x2e17a2(0x193)] = ![]; const _0x235638 = _0x1af79f(_0x1b3ead['id']), _0x5f2b8b = { 'role': _0x2e17a2(0x32c), 'type': _0x2e17a2(0x4d2), 'content': _0x2e17a2(0x2ef) + (_0xd97907(_0x3ffc56)?.['name'] || '未知') + _0x2e17a2(0x327) + _0x25b161 + ']', 'amount': _0x25b161, 'recipientId': _0x3ffc56, 'senderId': _0x235638['id'], 'timestamp': Date[_0x2e17a2(0x740)]() }; _0x3cf4de[_0x2e17a2(0x103)][_0x2e17a2(0x967)](_0x5f2b8b), _0x162973(), _0x200086(), _0x213385[_0x2e17a2(0x4ad)]['remove'](_0x2e17a2(0xfb)); } else { _0x215c73(_0x2e17a2(0x403)); return; } } async function _0x3dddd1(_0x8aa723) { const _0x90aec5 = _0xe59ed1, _0x18dac6 = _0xd97907(_0x8aa723); if (!_0x18dac6) return; const _0xf58f4a = await _0x56efd8('确定要永久清空【' + _0x18dac6[_0x90aec5(0x382)] + _0x90aec5(0x4ce)); if (!_0xf58f4a) return; const _0x566cec = _0x3cf4de['diaries'][_0x90aec5(0xaa2)](_0x547a18 => _0x547a18[_0x90aec5(0x697)] === _0x8aa723); _0x566cec > -0x1 ? (_0x3cf4de[_0x90aec5(0x865)]['splice'](_0x566cec, 0x1), _0x3a3bc1(), _0x5ac08c(), _0x5bf34b('【' + _0x18dac6[_0x90aec5(0x382)] + _0x90aec5(0x568))) : _0x5bf34b(_0x90aec5(0x902)); } function _0x3e0553() { const _0x1f081c = _0xe59ed1, _0x4f9633 = document['getElementById']('snoop-character-list-container'); _0x4f9633['innerHTML'] = ''; const _0x3caa50 = _0x3cf4de['characters'][_0x1f081c(0x3f0)](_0xbe6bb3 => _0x3cf4de[_0x1f081c(0x27a)][_0x1f081c(0xa9f)](_0x3da279 => _0x3da279[_0x1f081c(0x76d)] === _0x1f081c(0x86c) && _0x3da279['participantIds'][_0x1f081c(0x5cc)](_0xbe6bb3['id']))); if (_0x3caa50[_0x1f081c(0x30c)] === 0x0) { _0x4f9633['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } _0x3caa50[_0x1f081c(0x8cf)](_0x39c891 => { const _0x583867 = _0x1f081c; if ('dKyFb' === _0x583867(0x7c9)) { const _0x59bf3a = document['createElement']('li'); _0x59bf3a[_0x583867(0x199)] = _0x583867(0x956), _0x59bf3a[_0x583867(0x361)][_0x583867(0x8f3)] = _0x39c891['id'], _0x59bf3a[_0x583867(0x252)] = _0x583867(0x1a6) + (_0x39c891[_0x583867(0x3f1)] || _0x574d9b) + _0x583867(0x907) + _0x39c891['name'] + _0x583867(0x8cd) + _0x39c891[_0x583867(0x382)] + _0x583867(0x131), _0x59bf3a['querySelector'](_0x583867(0x3a8))['addEventListener'](_0x583867(0x2c5), () => _0x13af1c(_0x39c891['id'])), _0x59bf3a[_0x583867(0x5cb)](_0x583867(0x144))['addEventListener'](_0x583867(0x2c5), async _0x97868e => { const _0x5f2b03 = _0x583867; if ('vrGwq' === 'vrGwq') { _0x97868e[_0x5f2b03(0x886)](); const _0x4c5a5f = _0xd97907(_0x39c891['id']); if (!_0x4c5a5f) return; const _0x5fcfc8 = await _0x56efd8(_0x5f2b03(0x8f4) + _0x4c5a5f[_0x5f2b03(0x382)] + _0x5f2b03(0xcc)); if (_0x5fcfc8) { _0x2a565e(!![], _0x5f2b03(0x405) + _0x4c5a5f[_0x5f2b03(0x382)] + _0x5f2b03(0x1cb)); const _0x4985cc = [_0x5f2b03(0x7f9), 'whispers', _0x5f2b03(0xa35), _0x5f2b03(0x7cd), _0x5f2b03(0x9e3), _0x5f2b03(0x4df), _0x5f2b03(0x1b2), _0x5f2b03(0x80f)]; for (const _0x13ddf9 of _0x4985cc) { const _0x7143ea = 'snoop_' + _0x4c5a5f['id'] + '_' + _0x13ddf9; await _0x4d33a2(_0x7143ea); } _0x2a565e(![]), _0x5bf34b('【' + _0x4c5a5f[_0x5f2b03(0x382)] + _0x5f2b03(0xaf8)); } } else { if (!_0x13e174[_0x5f2b03(0x9a1)](_0x4656a9)) return '<p>格式错误</p>'; if (_0x1b6e97[_0x5f2b03(0x30c)] === 0x0) return _0x5f2b03(0x467); return _0x58b7ea[_0x5f2b03(0xb11)]((_0x32b6de, _0x1ef7e8) => new _0x57603c(_0x1ef7e8[_0x5f2b03(0x554)]) - new _0x478b84(_0x32b6de[_0x5f2b03(0x554)])), _0x34f0c8['map'](_0x29f1df => _0x5f2b03(0x8b8) + (_0x29f1df[_0x5f2b03(0x788)] || _0x5f2b03(0x58e)) + _0x5f2b03(0x8bd) + (_0x29f1df[_0x5f2b03(0x554)] || '') + _0x5f2b03(0x342) + (_0x29f1df[_0x5f2b03(0xad5)] || _0x5f2b03(0x457)) + _0x5f2b03(0x227) + (_0x29f1df['cost'] || 0x0)[_0x5f2b03(0x196)](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x5f2b03(0x863)](''); } }), _0x4f9633[_0x583867(0x8fe)](_0x59bf3a); } else { const _0xe777db = []; for (const _0x2c5c50 of _0x13b7f0['keys'](_0x59951a)) { const _0x446682 = _0x2c5c50[_0x583867(0x812)](); if (_0x53a720[_0x583867(0xa9f)](_0x1ea89d => _0x446682[_0x583867(0xb05)](_0x1ea89d))) { const _0x1a3b9a = _0x254d92[_0x2c5c50]; if (typeof _0x1a3b9a === _0x583867(0xf4)) _0xe777db[_0x583867(0x967)](_0x1a3b9a); if (_0x5e9695[_0x583867(0x9a1)](_0x1a3b9a)) _0x1a3b9a[_0x583867(0x8cf)](_0x1eeead => { const _0x5ef3de = _0x583867; if (typeof _0x1eeead === 'string') _0xe777db[_0x5ef3de(0x967)](_0x1eeead); }); } } if (_0xe777db[_0x583867(0x30c)]) return _0xe777db[_0x583867(0x63e)](_0x402d74)[_0x583867(0x6cd)](0x0, 0x9); } }); } let _0x231426 = null, _0x3b2c3c = null; function _0xe4666c() { const _0x5c8104 = _0xe59ed1, _0x10c85a = new Date(), _0x996916 = document[_0x5c8104(0x7ef)]('snoop-home-time'), _0x21362c = document[_0x5c8104(0x7ef)](_0x5c8104(0x20f)), _0x22483c = document[_0x5c8104(0x7ef)](_0x5c8104(0x36e)); _0x996916 && _0x21362c && (_0x996916[_0x5c8104(0x5f8)] = _0x10c85a[_0x5c8104(0x86a)](_0x5c8104(0x77e), { 'hour': _0x5c8104(0x56f), 'minute': _0x5c8104(0x56f), 'hour12': ![] }), _0x21362c['textContent'] = _0x10c85a[_0x5c8104(0xa15)]('zh-CN', { 'month': _0x5c8104(0x541), 'day': _0x5c8104(0x73e), 'weekday': _0x5c8104(0x541) })), _0x22483c && (_0x5c8104(0x5b2) === _0x5c8104(0x5b2) ? _0x22483c['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x10c85a[_0x5c8104(0x86a)](_0x5c8104(0x77e), { 'hour': _0x5c8104(0x56f), 'minute': '2-digit', 'hour12': ![] }) + _0x5c8104(0xb62) : _0x2d5766(_0x5c8104(0x8b4))); } function _0x13af1c(_0x57a3c9) { const _0x21ed58 = _0xe59ed1; if (_0x21ed58(0xb22) === _0x21ed58(0xa7)) { _0x57cd7e[_0x21ed58(0x252)] = _0x21ed58(0x152); return; } else { _0x231426 = _0x57a3c9; const _0x2407c8 = _0xd97907(_0x57a3c9); if (!_0x2407c8) return; const _0x580bb4 = document[_0x21ed58(0x7ef)](_0x21ed58(0x339)), _0x586f46 = document[_0x21ed58(0x7ef)](_0x21ed58(0x530)); if (_0x586f46) _0x586f46[_0x21ed58(0x713)](); const _0x21bc45 = document['getElementById'](_0x21ed58(0x1df)); if (_0x21bc45) _0x21bc45[_0x21ed58(0x713)](); _0x580bb4['insertAdjacentHTML'](_0x21ed58(0xa62), _0x21ed58(0x7de)), _0x580bb4[_0x21ed58(0xb63)](_0x21ed58(0xa62), _0x21ed58(0xa8d)), document['getElementById'](_0x21ed58(0xa96))[_0x21ed58(0x5f8)] = '', _0x1747cf(); if (_0x3b2c3c) clearInterval(_0x3b2c3c); _0xe4666c(), _0x3b2c3c = setInterval(_0xe4666c, 0x2710), _0x459e0a(_0x21ed58(0x9c), _0x21ed58(0x859)); } } function _0x1747cf() { const _0x96097d = _0xe59ed1, _0x5707b3 = document[_0x96097d(0x7ef)](_0x96097d(0x6de)), _0x330017 = document['getElementById'](_0x96097d(0x1df)); _0x5707b3[_0x96097d(0x252)] = _0x96097d(0x440), _0x330017[_0x96097d(0x252)] = ''; const _0x1b9459 = _0x5707b3[_0x96097d(0x5cb)](_0x96097d(0xa9e)), _0x2148e0 = [{ 'id': _0x96097d(0x8a1), 'name': '聊天', 'svg': _0x96097d(0x69d), 'area': _0x96097d(0xac5) }, { 'id': _0x96097d(0xa35), 'name': _0x96097d(0x587), 'svg': _0x96097d(0x4b4), 'area': _0x96097d(0xac5) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x96097d(0x1b9), 'area': _0x96097d(0xac5) }, { 'id': _0x96097d(0x80f), 'name': '总结', 'svg': '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'area': _0x96097d(0xac5) }, { 'id': _0x96097d(0x7cd), 'name': _0x96097d(0x81a), 'svg': _0x96097d(0x19f), 'area': _0x96097d(0x603) }, { 'id': _0x96097d(0x9e3), 'name': '外卖', 'svg': _0x96097d(0x9c2), 'area': 'main' }, { 'id': 'wants', 'name': '购物', 'svg': _0x96097d(0xa87), 'area': _0x96097d(0x603) }, { 'id': _0x96097d(0x1b2), 'name': '足迹', 'svg': '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'area': _0x96097d(0x603) }]; _0x2148e0[_0x96097d(0x8cf)](_0x340920 => { const _0xfde022 = _0x96097d; if (_0xfde022(0x3b8) !== _0xfde022(0x3b8)) { const _0x1c6f81 = _0x1448a6['stringify'](_0x4f1aa2[_0xfde022(0x76a)] || [])[_0xfde022(0xb53)](/'/g, _0xfde022(0x4b6))[_0xfde022(0xb53)](/"/g, _0xfde022(0x732)), _0x34fa0d = _0x2af33e['contact_name'] || '未知联系人'; return _0xfde022(0x281) + (_0x141725 < _0x9d8b18['length'] - 0x1 ? _0xfde022(0x8b5) : '') + _0xfde022(0x7cf) + _0x1c6f81 + _0xfde022(0x7c5) + _0x34fa0d + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x3faa2a + _0xfde022(0x511) + _0x34fa0d['charAt'](0x0) + _0xfde022(0x9b8) + _0x34fa0d + _0xfde022(0xa2c) + (_0x59a1a9[_0xfde022(0x1a1)] || '') + _0xfde022(0xa9); } else { const _0xdefaaa = document[_0xfde022(0xb60)](_0xfde022(0xb0b)); _0xdefaaa['className'] = 'snoop-app-icon', _0xdefaaa[_0xfde022(0x252)] = _0xfde022(0x783) + _0x340920[_0xfde022(0x7da)] + _0xfde022(0x70f) + _0x340920[_0xfde022(0x382)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0xdefaaa['addEventListener'](_0xfde022(0x2c5), () => _0x5188c2(_0x340920['id'], _0x340920['name'])), _0x340920['area'] === 'dock' ? _0x330017['appendChild'](_0xdefaaa) : _0xfde022(0x452) === _0xfde022(0x6a9) ? (_0x40ee51['entries']['splice'](_0x4270e4, 0x1), _0x227154(), _0x1288b2(), _0x156b6b(_0xfde022(0x6e3))) : _0x1b9459['appendChild'](_0xdefaaa); } }); } document['getElementById']('back-to-snoop-list-from-phone')[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x105ecd = _0xe59ed1; if ('PjDfj' === _0x105ecd(0x6b8)) { _0x3b2c3c && (clearInterval(_0x3b2c3c), _0x3b2c3c = null); document[_0x105ecd(0x7ef)](_0x105ecd(0x844))['style']['display'] = _0x105ecd(0xacf); const _0x357f04 = document[_0x105ecd(0x7ef)]('snoop-dock'); if (_0x357f04) _0x357f04[_0x105ecd(0x713)](); const _0x48ae05 = document[_0x105ecd(0x7ef)](_0x105ecd(0x530)); if (_0x48ae05) _0x48ae05[_0x105ecd(0x713)](); _0x459e0a(_0x105ecd(0x859), _0x105ecd(0x9c)); } else _0x147342['addEventListener'](_0x105ecd(0x318), _0x48debd), _0x3b6578[_0x105ecd(0x25c)](_0x105ecd(0x9c0), _0x1ab264, { 'passive': ![] }), _0x5314a9[_0x105ecd(0x25c)](_0x105ecd(0x37f), _0x29e1a5 => _0x29e1a5['preventDefault']()); }); async function _0x5188c2(_0x23831e, _0x3dfb0a, _0x11d7f9 = ![]) { const _0x2fb227 = _0xe59ed1; document[_0x2fb227(0x7ef)](_0x2fb227(0xa22))[_0x2fb227(0x937)][_0x2fb227(0x8a4)] = _0x2fb227(0xacf); const _0x162272 = document['getElementById'](_0x2fb227(0x844)); _0x162272[_0x2fb227(0x252)] = _0x2fb227(0x979), _0x162272['style'][_0x2fb227(0x8a4)] = _0x2fb227(0x98c); const _0x577fc2 = 'snoop_' + _0x231426 + '_' + _0x23831e; try { if (_0x2fb227(0x69f) !== _0x2fb227(0x351)) { if (_0x23831e === 'summary') { const _0x518aa4 = await _0x13ecd8(_0x231426); _0x4c8119(_0x23831e, _0x3dfb0a, _0x518aa4); return; } let _0xc34945 = await _0x5a1d99(_0x577fc2); if (_0x11d7f9 || !_0xc34945) { console[_0x2fb227(0x76a)](_0x2fb227(0x56d) + _0x577fc2 + _0x2fb227(0x2e7)); let _0x4a369b = await _0x3215e3(_0x23831e, _0x231426, _0xc34945); if (_0x4a369b) { const _0x180202 = _0x4a369b[_0x2fb227(0xd2)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x5e869e = _0x180202 ? _0x180202[0x1][_0x2fb227(0x4ca)]() : _0x4a369b['trim'](); let _0x28f8fa; try { _0x28f8fa = JSON['parse'](_0x5e869e); } catch (_0x19ad33) { _0x28f8fa = _0x29df98(_0x5e869e); if (!_0x28f8fa) throw new Error(_0x2fb227(0x64d)); } const _0x59e146 = JSON[_0x2fb227(0x56e)](_0x28f8fa); console[_0x2fb227(0x76a)]('Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。'), await _0x46f30f(_0x577fc2, _0x59e146), _0xc34945 = _0x59e146; } } else _0x2fb227(0x430) === 'kvwBk' ? _0x372e4d(_0x4cecdb, _0x26ee5f) : console['log'](_0x2fb227(0xa88) + _0x577fc2); _0x4c8119(_0x23831e, _0x3dfb0a, _0xc34945); } else { if (_0x2d32f9['id'] === _0x2fb227(0xa41)) return; _0x19eb24 = _0x276e39(() => { const _0x4fc811 = _0x2fb227; if (_0x2f1fc2['type'] === _0x4fc811(0x9c0)) _0x5cf339[_0x4fc811(0x3e2)](); _0x473671(_0x5cd6a4['id'], _0x589b8a['name']); }, 0x320); } } catch (_0x2bb8aa) { console[_0x2fb227(0x5e3)](_0x2fb227(0x93d) + _0x3dfb0a + '\x20内容失败:', _0x2bb8aa), _0x162272[_0x2fb227(0x252)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x2bb8aa[_0x2fb227(0x99)] + _0x2fb227(0x3dd); } } function _0x4c8119(_0x42c57f, _0x3c39fb, _0x306218) { const _0x303f43 = _0xe59ed1; if ('WMntU' !== _0x303f43(0x9e)) { const _0x3557bc = _0xd97907(_0x231426), _0x51f77b = document[_0x303f43(0x7ef)](_0x303f43(0x844)); let _0x562876 = ''; if (!_0x306218) _0x303f43(0x868) !== _0x303f43(0x712) ? _0x562876 = _0x303f43(0x212) : !_0xb1a561[_0x303f43(0x2da)] && (_0x2277f1[_0x303f43(0x2da)] = 'default'); else { if (_0x42c57f === 'summary') _0x562876 = _0x303f43(0x7a7) + _0x306218 + _0x303f43(0x10d); else { if (_0x303f43(0xa9b) !== _0x303f43(0xab3)) try { let _0x2b5338 = null; const _0xb753b6 = _0x306218[_0x303f43(0xd2)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x1c7447 = _0xb753b6 ? _0xb753b6[0x1][_0x303f43(0x4ca)]() : _0x306218['trim'](); try { _0x2b5338 = JSON['parse'](_0x1c7447); } catch (_0x386859) { if (_0x303f43(0xb73) !== _0x303f43(0xb73)) { if (_0x2c7583 === null) return; _0x3314b8[_0x303f43(0x103)][_0x303f43(0x673)](_0x3f403b, 0x1), _0x2b95db(), _0x49048a(), _0x3c1d71(); } else { console[_0x303f43(0x315)](_0x303f43(0x279), _0x386859['message']); try { _0x2b5338 = _0x29df98(_0x1c7447); if (!_0x2b5338) { if (_0x303f43(0x126) === _0x303f43(0x126)) throw new Error('YAML翻译机也无法理解这段梦话。'); else _0x15bd86[_0x303f43(0x5a3)] = _0x2ef060[_0x303f43(0x5a3)] || [], _0x33ddd5[_0x303f43(0x3cf)] = (_0x296a58[_0x303f43(0x3cf)] || [])['map']((_0x5859b1, _0x39521f) => ({ ..._0x5859b1, 'commentId': 'c_' + _0x2216d4['timestamp'] + '_' + _0x39521f })), _0x495cbf(), _0x580838(); } console['log']('兼容模式成功，已将旧格式数据翻译。'); } catch (_0x576b95) { if (_0x303f43(0x8eb) !== _0x303f43(0x68e)) throw _0x386859; else _0x2c9238[_0x303f43(0x9bd)] = _0x494aa9, _0x4a308a = !![]; } } } switch (_0x42c57f) { case _0x303f43(0x7f9): _0x562876 = _0x5c9745(_0x2b5338); break; case _0x303f43(0x8a1): _0x562876 = _0x1b77f5(_0x2b5338, _0x3557bc[_0x303f43(0x382)]); break; case 'abyss': _0x562876 = _0x3c9ff2(_0x2b5338); break; case 'fragments': _0x562876 = _0x21cec6(_0x2b5338); break; case _0x303f43(0x9e3): _0x562876 = _0x491952(_0x2b5338); break; case _0x303f43(0x4df): _0x562876 = _0x14f945(_0x2b5338); break; case _0x303f43(0x1b2): _0x562876 = _0x540afc(_0x2b5338); break; default: _0x562876 = _0x303f43(0x1d5) + JSON[_0x303f43(0x56e)](_0x2b5338, null, 0x2) + _0x303f43(0x5f2); } } catch (_0x4d3028) { _0x303f43(0x4f9) !== _0x303f43(0x4f9) ? (_0x4c2c2b[_0x303f43(0x252)] = _0x303f43(0x50d), _0xd5cef5[_0x303f43(0x7ef)](_0x303f43(0x21c))['addEventListener'](_0x303f43(0x2c5), _0x21b114)) : (console[_0x303f43(0x5e3)](_0x303f43(0x820), _0x4d3028), _0x562876 = _0x303f43(0x331) + _0x306218 + _0x303f43(0x5f2)); } else { const _0x5d9732 = _0x25ff3f[_0x303f43(0xb60)](_0x303f43(0xb0b)); return _0x5d9732['className'] = _0x303f43(0x239), _0x5d9732[_0x303f43(0x361)]['historyIndex'] = _0x493e3c, _0x5d9732[_0x303f43(0x252)] = _0x164aae, _0x437d7b[_0x303f43(0x8fe)](_0x5d9732), _0x5d9732; } } } _0x51f77b['innerHTML'] = _0x303f43(0xb97) + _0x3c39fb + _0x303f43(0xa67) + _0x3557bc[_0x303f43(0x382)] + _0x303f43(0x617) + (_0x42c57f === 'summary' ? '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>' : _0x303f43(0x44f)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x562876 + _0x303f43(0x8fd); const _0x3f52bb = _0x51f77b[_0x303f43(0x5cb)](_0x303f43(0xa1a)); _0x42c57f === _0x303f43(0x80f) && (_0x303f43(0x668) !== 'FPKip' ? _0x485acd ? _0x35cc53[_0x303f43(0x4ad)][_0x303f43(0x44c)](_0x303f43(0x258)) : _0x281a0f[_0x303f43(0x4ad)][_0x303f43(0x713)](_0x303f43(0x258)) : _0x3f52bb[_0x303f43(0x937)][_0x303f43(0x9f7)] = '0'), document[_0x303f43(0x7ef)]('snoop-app-back-btn')[_0x303f43(0x25c)](_0x303f43(0x2c5), () => { const _0x53a340 = _0x303f43; _0x51f77b[_0x53a340(0x937)][_0x53a340(0x8a4)] = 'none', document[_0x53a340(0x7ef)]('snoop-phone-top-nav')['style']['display'] = 'flex'; }), _0x42c57f === _0x303f43(0x80f) ? _0x303f43(0x2ff) !== 'mhbhS' ? document[_0x303f43(0x7ef)](_0x303f43(0x41f))[_0x303f43(0x25c)](_0x303f43(0x2c5), () => { const _0x4761a5 = _0x303f43, _0x2c843b = document[_0x4761a5(0x7ef)](_0x4761a5(0x525)); _0x2c843b[_0x4761a5(0x8f1)](), document[_0x4761a5(0xad6)](_0x4761a5(0x7b7)), _0x5bf34b(_0x4761a5(0xa7f)); }) : (_0x33dda2[_0x303f43(0x4ad)][_0x303f43(0x713)](_0x303f43(0x61e), _0x303f43(0x60c)), _0x4aedd8['classList']['remove'](_0x303f43(0x1eb)), _0x135518[_0x303f43(0x676)] = _0x34e2f3, _0x3140aa(), _0x124bc1[_0x303f43(0xaef)] = ![]) : _0x303f43(0x579) !== _0x303f43(0x207) ? document[_0x303f43(0x7ef)]('snoop-app-refresh-btn')[_0x303f43(0x25c)](_0x303f43(0x2c5), async () => { const _0x56a843 = _0x303f43; if (_0x56a843(0x78e) === _0x56a843(0x78e)) _0x5188c2(_0x42c57f, _0x3c39fb, !![]); else { const _0x493335 = _0x373f91[_0x56a843(0xb60)](_0x56a843(0xb0b)); _0x493335[_0x56a843(0x199)] = _0x56a843(0x236), _0x493335['id'] = _0x56a843(0x57a) + _0x281124, _0x32c789 === _0x484f77[_0x56a843(0x676)] && _0x493335[_0x56a843(0x4ad)][_0x56a843(0x44c)](_0x56a843(0x61e)), _0x59b76e['forEach'](_0x4253b2 => { const _0x5f48c2 = _0x56a843, _0xe9379d = _0x4253b2['author'] === 'user' ? _0x5f48c2(0x32c) : 'ai', _0x1dbe88 = _0x4253b2[_0x5f48c2(0x1b8)] === _0x5f48c2(0x32c) ? _0x53e2cd[_0x5f48c2(0x382)] : _0x5252ce(_0x4253b2['author'])[_0x5f48c2(0x382)], _0x56ecfb = _0x2e63f7[_0x5f48c2(0xb60)](_0x5f48c2(0xb0b)); _0x56ecfb[_0x5f48c2(0x199)] = 'diary-entry\x20' + _0xe9379d, _0x56ecfb[_0x5f48c2(0x361)][_0x5f48c2(0x554)] = _0x4253b2['timestamp'], _0x56ecfb[_0x5f48c2(0x937)][_0x5f48c2(0x686)] = _0x5f48c2(0xacf), _0x56ecfb[_0x5f48c2(0x937)][_0x5f48c2(0x40f)] = '0', _0x56ecfb[_0x5f48c2(0x252)] = _0x5f48c2(0x93b) + _0x1dbe88 + _0x5f48c2(0x8b0) + new _0x48e377(_0x4253b2[_0x5f48c2(0x554)])['toLocaleString'](_0x5f48c2(0x77e)) + _0x5f48c2(0x84d) + _0x4253b2['content'][_0x5f48c2(0xb53)](/\n/g, _0x5f48c2(0x5e1)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x493335[_0x5f48c2(0x8fe)](_0x56ecfb); }), _0x3b966a[_0x56a843(0x8fe)](_0x493335); } }) : _0x4c965b[_0x303f43(0xa37)] = _0x5e86b6[_0x303f43(0x3ec)][0x0]['id'], _0x42c57f === 'whispers' && _0x51f77b[_0x303f43(0x53f)](_0x303f43(0xa6f))[_0x303f43(0x8cf)](_0x10d9cd => { const _0x1e95ac = _0x303f43; _0x1e95ac(0xb5d) === _0x1e95ac(0x8ca) ? _0x202248[_0x1e95ac(0x5d8)]() : _0x10d9cd[_0x1e95ac(0x25c)](_0x1e95ac(0x2c5), () => { const _0x9468e3 = _0x1e95ac; if (_0x9468e3(0x411) === _0x9468e3(0x411)) { const _0x5bbd28 = JSON[_0x9468e3(0x6e7)](_0x10d9cd[_0x9468e3(0x361)][_0x9468e3(0x76a)]['replace'](/&quot;/g, '\x22')), _0x5797d4 = _0x10d9cd[_0x9468e3(0x361)]['contactName'], _0x1ce736 = _0x10d9cd[_0x9468e3(0x361)][_0x9468e3(0x200)]; _0x3aac93(_0x5797d4, _0x1ce736, _0x5bbd28); } else { _0x114082(_0x9468e3(0x71d)); return; } }); }); } else _0x42f922['style'][_0x303f43(0x8a4)] = _0x303f43(0x98c), _0x18a91b(() => _0x55a653[_0x303f43(0x4ad)][_0x303f43(0x44c)]('show'), 0xa); } function _0x29df98(_0x1ce5c4) { const _0x1c1c32 = _0xe59ed1; if (_0x1c1c32(0x957) !== _0x1c1c32(0x4f7)) { if (!_0x1ce5c4 || typeof _0x1ce5c4 !== _0x1c1c32(0xf4)) return null; const _0x1baf98 = _0x1ce5c4['trim']()[_0x1c1c32(0x35a)]('\x0a'), _0x132ece = []; let _0x2bf537 = null; for (const _0x5863f8 of _0x1baf98) { const _0x1fcb85 = _0x5863f8['trim'](); if (_0x1fcb85[_0x1c1c32(0xb05)]('-\x20')) { if (_0x1c1c32(0x8e7) === _0x1c1c32(0x5f6)) { _0x462c85 = _0x32d2ea(_0x489b1c); if (!_0x1cdd22) throw new _0x388f06(_0x1c1c32(0x72d)); _0x4bf6c4[_0x1c1c32(0x76a)]('兼容模式成功，已将旧格式数据翻译。'); } else { _0x2bf537 && (_0x1c1c32(0x38f) === _0x1c1c32(0x38f) ? _0x132ece[_0x1c1c32(0x967)](_0x2bf537) : (_0xdcdce7(_0x4859d2, -0x1), _0x2fb13d['scrollTop'] = _0x24fcac[_0x1c1c32(0x60d)])); _0x2bf537 = {}; const _0x2e0425 = _0x1fcb85[_0x1c1c32(0xab5)](0x2), _0xa98943 = _0x2e0425['split'](/:\s(.+)/); if (_0xa98943['length'] > 0x1) { if ('CpwWF' === 'LByQG') _0x5d3ceb[_0x1c1c32(0xb4a)]['splice'](_0x6fa81d, 0x1), _0x508df3(), _0x51fec8(); else { const _0x407c06 = _0xa98943[0x0][_0x1c1c32(0x4ca)](), _0x5a2aa2 = _0xa98943[0x1]['trim']()[_0x1c1c32(0xb53)](/^"|"$/g, ''); _0x2bf537[_0x407c06] = _0x5a2aa2; } } } } else { if (_0x2bf537 && _0x1fcb85) { const _0x257b82 = _0x1fcb85[_0x1c1c32(0x35a)](/:\s(.+)/); if (_0x257b82[_0x1c1c32(0x30c)] > 0x1) { if (_0x1c1c32(0x543) === 'qQTPF') { const _0x5f3719 = _0x39c032(_0x2c59f7[_0x1c1c32(0x105)]); return _0x5f3719?.['name'] || _0x1c1c32(0x3c1); } else { const _0x20e53d = _0x257b82[0x0]['trim'](), _0x45b715 = _0x257b82[0x1]['trim']()[_0x1c1c32(0xb53)](/^"|"$/g, ''); _0x2bf537[_0x20e53d] = _0x45b715; } } } } } return _0x2bf537 && _0x132ece[_0x1c1c32(0x967)](_0x2bf537), _0x132ece[_0x1c1c32(0x30c)] > 0x0 ? _0x132ece : null; } else { const _0x515b3a = new _0x290935(_0x126978['timestamp']); _0x2b7b6e += '-\x20**你与' + _0x2d58a8[_0x1c1c32(0x382)] + _0x1c1c32(0x55b) + _0x5bcacc(_0x515b3a) + '\x0a'; } } function _0x3aac93(_0x285032, _0x456474, _0x417443) { const _0x512ef1 = _0xe59ed1; if (_0x512ef1(0x90a) !== _0x512ef1(0xb1e)) { const _0x2eb754 = document[_0x512ef1(0x5cb)]('#snoop-app-view-container\x20.snoop-app-content'), _0x2ccfce = document[_0x512ef1(0x5cb)]('#snoop-app-view-container\x20.snoop-app-header'); let _0xf9e064 = _0x512ef1(0x607); !_0x417443 || _0x417443['length'] === 0x0 ? _0x512ef1(0x7a5) === _0x512ef1(0x7a5) ? _0xf9e064 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>' : _0x375cc6('未找到可用模型。') : _0x512ef1(0x4a1) === _0x512ef1(0x4a1) ? _0x417443[_0x512ef1(0x8cf)](_0x5b26d8 => { const _0x4d05f2 = _0x512ef1, _0x286998 = _0x5b26d8[_0x4d05f2(0x93)] === _0x4d05f2(0xb7e), _0x3ce5c3 = _0x286998 ? _0x456474 ? _0x456474[0x0] : '?' : _0x285032 ? _0x285032[0x0] : '?'; _0xf9e064 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x286998 ? _0x4d05f2(0x32c) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x286998 ? _0x4d05f2(0x89b) + _0x3ce5c3 + '</div>' : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0x286998 ? _0x4d05f2(0x32c) : 'ai') + _0x4d05f2(0x917) + _0x5b26d8[_0x4d05f2(0x313)] + _0x4d05f2(0x26c) + (_0x286998 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x3ce5c3 + _0x4d05f2(0x4e1) : '') + _0x4d05f2(0x500); }) : _0x12f592[_0x512ef1(0x382)] !== 'AbortError' && (_0x4fb3a7[_0x512ef1(0x5e3)](_0x512ef1(0x3b1), _0x1dad02), _0xcbb7a5({ 'role': _0x512ef1(0x78b), 'content': _0x512ef1(0xa32) + _0x491c68['message'] }, _0x493b30[_0x512ef1(0x103)][_0x512ef1(0x30c)] - 0x1)), _0xf9e064 += _0x512ef1(0x4e1), _0x2eb754[_0x512ef1(0x252)] = _0xf9e064, _0x2eb754['scrollTop'] = _0x2eb754[_0x512ef1(0x60d)], _0x2ccfce[_0x512ef1(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>' + _0x285032 + _0x512ef1(0x700), document[_0x512ef1(0x7ef)](_0x512ef1(0x277))[_0x512ef1(0x25c)](_0x512ef1(0x2c5), () => { _0x5188c2('whispers', '聊天'); }), !document[_0x512ef1(0x7ef)](_0x512ef1(0x743)) && (_0x512ef1(0xb2a) !== _0x512ef1(0xb10) ? document[_0x512ef1(0x7a6)][_0x512ef1(0xb63)](_0x512ef1(0xa62), _0x512ef1(0x922)) : _0xd1ebc9 += '-\x20你点过一份外卖：“' + _0x252049[_0x512ef1(0x559)] + _0x512ef1(0x971) + _0x3d2ce2[_0x512ef1(0x32f)][_0x512ef1(0x863)]('、') + '。\x0a'); } else return _0x24cb5f[_0x512ef1(0x967)](_0x30df83), _0x5d63e7; } function _0x29df98(_0x1d5d32) { const _0x45057b = _0xe59ed1; if (!_0x1d5d32 || typeof _0x1d5d32 !== 'string') return null; const _0x5e0253 = _0x1d5d32['trim']()[_0x45057b(0x35a)]('\x0a'), _0x14e795 = []; let _0x1dabc3 = null; for (const _0xa829b8 of _0x5e0253) { if (_0x45057b(0x1fb) !== _0x45057b(0x5ea)) { const _0x117825 = _0xa829b8[_0x45057b(0x4ca)](); if (_0x117825[_0x45057b(0xb05)]('-\x20')) { if (_0x45057b(0x7f0) !== _0x45057b(0x7f0)) _0x235a09[_0x45057b(0x8fe)](_0x385043), _0x5883d3[_0x45057b(0x8fe)](_0x231125); else { _0x1dabc3 && _0x14e795[_0x45057b(0x967)](_0x1dabc3); _0x1dabc3 = {}; const _0x59cd64 = _0x117825[_0x45057b(0xab5)](0x2), _0x5759eb = _0x59cd64[_0x45057b(0x35a)](/:\s(.+)/); if (_0x5759eb[_0x45057b(0x30c)] > 0x1) { const _0x409662 = _0x5759eb[0x0][_0x45057b(0x4ca)](), _0x4088ed = _0x5759eb[0x1]['trim']()[_0x45057b(0xb53)](/^"|"$/g, ''); _0x1dabc3[_0x409662] = _0x4088ed; } } } else { if (_0x1dabc3 && _0x117825) { const _0x4eca5e = _0x117825[_0x45057b(0x35a)](/:\s(.+)/); if (_0x4eca5e['length'] > 0x1) { const _0x34077e = _0x4eca5e[0x0][_0x45057b(0x4ca)](), _0x37b454 = _0x4eca5e[0x1]['trim']()[_0x45057b(0xb53)](/^"|"$/g, ''); _0x1dabc3[_0x34077e] = _0x37b454; } } } } else _0x58e2f6(_0x3df5a8[_0x45057b(0x6b3)])[_0x45057b(0x683)](_0x12eece => { const _0x2b6718 = _0x45057b; if (_0x12eece) _0x1a6bb7[_0x2b6718(0x557)] = _0x2f86c2[_0x2b6718(0x9e4)](_0x12eece); }); } return _0x1dabc3 && _0x14e795[_0x45057b(0x967)](_0x1dabc3), _0x14e795['length'] > 0x0 ? _0x14e795 : null; } async function _0x12334d(_0x173b16) { const _0x55f3b1 = _0xe59ed1; if (_0x55f3b1(0x1ce) !== 'ZdwuD') _0x2e4d6c[_0x55f3b1(0x2c7)] = ![], _0x57f35b(![]); else { if (!_0x173b16) return ''; const _0x16cc4f = [{ 'id': _0x55f3b1(0x7f9), 'name': '相册' }, { 'id': _0x55f3b1(0x8a1), 'name': _0x55f3b1(0x63f) }, { 'id': _0x55f3b1(0xa35), 'name': _0x55f3b1(0x7c1) }, { 'id': _0x55f3b1(0x7cd), 'name': '备忘录' }, { 'id': _0x55f3b1(0x9e3), 'name': _0x55f3b1(0x1c1) }, { 'id': _0x55f3b1(0x4df), 'name': _0x55f3b1(0x324) }, { 'id': _0x55f3b1(0x1b2), 'name': _0x55f3b1(0x6e0) }]; let _0x4fd8e3 = ''; for (const _0x4d5095 of _0x16cc4f) { try { const _0x18e87f = _0x55f3b1(0x149) + _0x173b16 + '_' + _0x4d5095['id'], _0x40ebbd = await _0x5a1d99(_0x18e87f); if (_0x40ebbd) { const _0xa04c97 = _0x40ebbd[_0x55f3b1(0xd2)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x4590ac = _0xa04c97 ? _0xa04c97[0x1][_0x55f3b1(0x4ca)]() : _0x40ebbd[_0x55f3b1(0x4ca)](); if (!_0x4590ac) continue; let _0x337555 = null; try { if (_0x55f3b1(0x78a) === _0x55f3b1(0x78a)) _0x337555 = JSON[_0x55f3b1(0x6e7)](_0x4590ac); else { const _0x34aebb = _0x40fdca[_0x55f3b1(0x76d)] === _0x55f3b1(0x1c9) ? _0x55f3b1(0xec) : '待办'; return _0x55f3b1(0xa52) + _0x34aebb + ']\x20' + _0x2da837[_0x55f3b1(0x5bd)] + ':\x20' + _0x29d449['content']; } } catch (_0x3f5145) { console[_0x55f3b1(0x315)]('JSON解析失败\x20(' + _0x4d5095['id'] + _0x55f3b1(0x41d), _0x3f5145[_0x55f3b1(0x99)]); try { _0x337555 = _0x29df98(_0x4590ac); if (!_0x337555) throw new Error(_0x55f3b1(0x72d)); console[_0x55f3b1(0x76a)](_0x55f3b1(0x54b) + _0x4d5095['id'] + '\x20的旧格式数据翻译。'); } catch (_0x25a98a) { if (_0x55f3b1(0xa50) !== 'sSHrW') _0x45b970[_0x55f3b1(0xb88)] = _0x24006e[_0x55f3b1(0x91e)][_0x55f3b1(0x48a)](_0x3445c0 => _0x7904f2[_0x55f3b1(0xb88)]['find'](_0x3f4a6a => _0x3f4a6a['id'] === _0x3445c0))[_0x55f3b1(0x3f0)](_0x5c7dd)[_0x55f3b1(0x48a)](_0x41e850 => ({ 'name': _0x41e850[_0x55f3b1(0x382)], 'content': _0x41e850[_0x55f3b1(0x313)], 'categoryId': _0x41e850[_0x55f3b1(0x2da)] || _0x55f3b1(0xa41) })); else throw _0x3f5145; } } if (Array['isArray'](_0x337555) && _0x337555[_0x55f3b1(0x30c)] > 0x0) { _0x4fd8e3 === '' && (_0x4fd8e3 += _0x55f3b1(0x68b)); _0x4fd8e3 += '\x0a##\x20' + _0x4d5095['name'] + '\x0a'; switch (_0x4d5095['id']) { case 'gallery': _0x337555[_0x55f3b1(0x8cf)](_0x1457e => { const _0x56361a = _0x55f3b1; if ('wspDw' !== 'wspDw') return ''; else _0x4fd8e3 += _0x56361a(0xa1e) + _0x1457e[_0x56361a(0x60e)] + _0x56361a(0xb0f); }); break; case _0x55f3b1(0x8a1): _0x337555[_0x55f3b1(0x8cf)](_0x2c45d9 => { const _0x3633dc = _0x55f3b1; 'svgNJ' === 'svgNJ' ? (_0x4fd8e3 += '-\x20你记得曾和“' + _0x2c45d9[_0x3633dc(0x437)] + _0x3633dc(0x6e8) + _0x2c45d9[_0x3633dc(0x1a1)] + '”。\x0a', _0x2c45d9['log'] && Array['isArray'](_0x2c45d9[_0x3633dc(0x76a)]) && (_0x4fd8e3 += _0x3633dc(0x42c), _0x2c45d9[_0x3633dc(0x76a)][_0x3633dc(0x8cf)](_0x1b423a => { const _0x23e635 = _0x3633dc, _0x367d69 = _0x1b423a['sender'] === _0x23e635(0xb7e) ? '你' : _0x2c45d9[_0x23e635(0x437)]; _0x4fd8e3 += _0x23e635(0x98b) + _0x367d69 + ':\x20' + _0x1b423a[_0x23e635(0x313)] + '\x0a'; }))) : _0x92b8(_0x2db81e['id']); }); break; case _0x55f3b1(0xa35): _0x337555[_0x55f3b1(0x8cf)](_0x3dd968 => { const _0xd91029 = _0x55f3b1; if (_0xd91029(0x384) !== _0xd91029(0x13d)) _0x4fd8e3 += _0xd91029(0xa1b) + _0x3dd968[_0xd91029(0x70b)] + _0xd91029(0xb0f); else { _0x3d1940(_0xd91029(0xae8)); return; } }); break; case _0x55f3b1(0x7cd): _0x337555[_0x55f3b1(0x8cf)](_0x2a3208 => { const _0x242fe0 = _0x55f3b1; 'sJSpN' === _0x242fe0(0x920) ? _0x5d6777 = _0x1b887d[_0x242fe0(0x9bd)] : _0x4fd8e3 += _0x242fe0(0x811) + _0x2a3208[_0x242fe0(0x4c5)] + _0x242fe0(0x8b9) + _0x2a3208['content'][_0x242fe0(0xb53)](/\n/g, '\x20') + '”。\x0a'; }); break; case _0x55f3b1(0x9e3): _0x337555['forEach'](_0x564613 => { const _0x4b81bf = _0x55f3b1; _0x4fd8e3 += _0x4b81bf(0xb93) + _0x564613[_0x4b81bf(0x559)] + '”，里面有\x20' + _0x564613[_0x4b81bf(0x32f)][_0x4b81bf(0x863)]('、') + '。\x0a'; }); break; case 'wants': _0x337555[_0x55f3b1(0x8cf)](_0xf59b9e => { const _0x843164 = _0x55f3b1; _0x4fd8e3 += _0x843164(0x1f3) + _0xf59b9e[_0x843164(0x788)] + _0x843164(0x446) + _0xf59b9e[_0x843164(0xad5)] + _0x843164(0xb0f); }); break; case 'footprints': _0x337555[_0x55f3b1(0x8cf)](_0x2599fc => { const _0x415120 = _0x55f3b1; _0x4fd8e3 += '-\x20你最近去过：“' + _0x2599fc[_0x415120(0x168)] + '”，在那里“' + _0x2599fc['activity_description'] + _0x415120(0xb0f); }); break; default: _0x337555[_0x55f3b1(0x8cf)](_0x452242 => { const _0x3a33b2 = _0x55f3b1; _0x4fd8e3 += '-\x20' + JSON[_0x3a33b2(0x56e)](_0x452242) + '\x0a'; }); break; } } } } catch (_0x4f5d8e) { _0x55f3b1(0x4d4) !== _0x55f3b1(0x4d4) ? (_0x30b54f[_0x55f3b1(0x5e3)](_0x55f3b1(0x3fd), _0x3592b6), _0x319459[_0x55f3b1(0x7ef)](_0x55f3b1(0x5d3))[_0x55f3b1(0x252)] = _0x55f3b1(0x298)) : console[_0x55f3b1(0x5e3)]('加载视奸记忆失败\x20(' + _0x4d5095['id'] + _0x55f3b1(0xf1), _0x4f5d8e); } } return _0x4fd8e3; } } function _0x5c9745(_0x118704) { const _0x21f4c3 = _0xe59ed1; if ('HZOZF' !== 'HZOZF') { const _0x49ac17 = _0x4c4db7['createElement'](_0x21f4c3(0xb0b)); _0x49ac17['className'] = _0x21f4c3(0x96e), _0x49ac17[_0x21f4c3(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-' + _0x265bed['id'] + '\x22\x20data-id=\x22' + _0x56baba['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x3979e8['avatar'] || _0x1c62bb) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x4364bd['id'] + _0x21f4c3(0x97b) + _0x3c608a[_0x21f4c3(0x382)] + _0x21f4c3(0xb37), _0xb1f89e['appendChild'](_0x49ac17); } else { _0x118704['sort']((_0x23fcf3, _0x54d99f) => new Date(_0x54d99f[_0x21f4c3(0x554)]) - new Date(_0x23fcf3['timestamp'])); if (!Array[_0x21f4c3(0x9a1)](_0x118704)) return '<p>格式错误</p>'; if (_0x118704[_0x21f4c3(0x30c)] === 0x0) return _0x21f4c3(0x3c3); return _0x21f4c3(0x821) + _0x118704['map']((_0x36f54a, _0x1256b4) => _0x21f4c3(0x51b) + (_0x1256b4 < _0x118704[_0x21f4c3(0x30c)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x21f4c3(0x30e) + (_0x36f54a[_0x21f4c3(0x60e)] || _0x21f4c3(0x402)) + _0x21f4c3(0x8b2) + (_0x36f54a[_0x21f4c3(0x554)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x21f4c3(0x863)]('') + _0x21f4c3(0x4e1); } } function _0x1b77f5(_0x385e98, _0x3661c3) { const _0x43cc17 = _0xe59ed1; if ('zKjIw' === _0x43cc17(0x8de)) { if (!Array[_0x43cc17(0x9a1)](_0x385e98) || _0x385e98[_0x43cc17(0x30c)] === 0x0) return _0x43cc17(0x8e8); return _0x43cc17(0x821) + _0x385e98[_0x43cc17(0x48a)]((_0xc74883, _0x41ca58) => { const _0x2b1693 = _0x43cc17, _0x685154 = JSON[_0x2b1693(0x56e)](_0xc74883[_0x2b1693(0x76a)] || [])[_0x2b1693(0xb53)](/'/g, _0x2b1693(0x4b6))['replace'](/"/g, _0x2b1693(0x732)), _0x30547e = _0xc74883[_0x2b1693(0x437)] || '未知联系人'; return _0x2b1693(0x281) + (_0x41ca58 < _0x385e98[_0x2b1693(0x30c)] - 0x1 ? _0x2b1693(0x8b5) : '') + _0x2b1693(0x7cf) + _0x685154 + _0x2b1693(0x7c5) + _0x30547e + _0x2b1693(0xb3c) + _0x3661c3 + _0x2b1693(0x511) + _0x30547e[_0x2b1693(0x104)](0x0) + _0x2b1693(0x9b8) + _0x30547e + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0xc74883['last_message_preview'] || '') + _0x2b1693(0xa9); })[_0x43cc17(0x863)]('') + _0x43cc17(0x4e1); } else _0x2601e0('home', _0x43cc17(0x2b9)); } function _0x3c9ff2(_0xf846c1) { const _0x359ca6 = _0xe59ed1; if (_0x359ca6(0x49a) !== _0x359ca6(0xe2)) { if (!Array[_0x359ca6(0x9a1)](_0xf846c1)) return _0x359ca6(0x4b5); if (_0xf846c1['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0xf846c1[_0x359ca6(0xb11)]((_0x1ccc8c, _0x597813) => new Date(_0x597813[_0x359ca6(0x554)]) - new Date(_0x1ccc8c[_0x359ca6(0x554)])), _0x359ca6(0x821) + _0xf846c1['map']((_0x2dee47, _0xc576fa) => _0x359ca6(0x95c) + (_0xc576fa < _0xf846c1[_0x359ca6(0x30c)] - 0x1 ? _0x359ca6(0x8b5) : '') + _0x359ca6(0xa64) + (_0x2dee47[_0x359ca6(0x70b)] || '未知搜索') + _0x359ca6(0x5c8) + (_0x2dee47[_0x359ca6(0xf3)] || _0x359ca6(0x534)) + _0x359ca6(0x2c1) + (_0x2dee47[_0x359ca6(0x554)] || '') + _0x359ca6(0x87d))['join']('') + _0x359ca6(0x4e1); } else _0x3936f8[_0x359ca6(0x91e)] = _0x3d1bcf[_0x359ca6(0x91e)][_0x359ca6(0x3f0)](_0x30b433 => _0x30b433 !== _0x43fadd); } function _0x21cec6(_0x291ed5) { const _0x59a30d = _0xe59ed1; if (!Array[_0x59a30d(0x9a1)](_0x291ed5)) return '<p>格式错误</p>'; if (_0x291ed5[_0x59a30d(0x30c)] === 0x0) return _0x59a30d(0x77b); return _0x291ed5[_0x59a30d(0xb11)]((_0x1823b9, _0x392e3b) => new Date(_0x392e3b['last_edited']) - new Date(_0x1823b9[_0x59a30d(0x1db)])), _0x291ed5[_0x59a30d(0x48a)](_0x3e6bc5 => _0x59a30d(0x9db) + (_0x3e6bc5[_0x59a30d(0x4c5)] || _0x59a30d(0xaf1)) + _0x59a30d(0xb71) + (_0x3e6bc5[_0x59a30d(0x313)] || '') + _0x59a30d(0x774) + (_0x3e6bc5[_0x59a30d(0x1db)] || '') + _0x59a30d(0xf7))[_0x59a30d(0x863)](''); } function _0x491952(_0x27b04b) { const _0x50c555 = _0xe59ed1; if (_0x50c555(0x739) !== _0x50c555(0x739)) { if (_0x8ef478) _0x41be8a[_0x50c555(0x557)] = _0x1f903f[_0x50c555(0x9e4)](_0x1d6091); else _0xd1a37c[_0x50c555(0x5d5)] = _0x50c555(0x5b9); } else { if (!Array[_0x50c555(0x9a1)](_0x27b04b)) return '<p>格式错误</p>'; if (_0x27b04b[_0x50c555(0x30c)] === 0x0) return _0x50c555(0x3d1); return _0x27b04b['sort']((_0x5bf432, _0xc8b42) => new Date(_0xc8b42['timestamp']) - new Date(_0x5bf432['timestamp'])), _0x27b04b[_0x50c555(0x48a)](_0xb6820d => { const _0x5b5f6c = _0x50c555; if (_0x5b5f6c(0x2de) !== 'IwIGA') _0xe9dbab(), _0x5ca088(_0x5b5f6c(0x150), _0x5b5f6c(0x42f)); else { const _0x2bc16e = (_0xb6820d[_0x5b5f6c(0x32f)] || [])['map'](_0x3a96dd => _0x5b5f6c(0xd7) + _0x3a96dd + _0x5b5f6c(0xb35))['join'](''); return _0x5b5f6c(0x775) + (_0xb6820d[_0x5b5f6c(0x559)] || '未知餐厅') + _0x5b5f6c(0xa61) + (_0xb6820d[_0x5b5f6c(0x554)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0xb6820d['status'] || _0x5b5f6c(0x95a)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2bc16e + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0xb6820d[_0x5b5f6c(0x789)] || 0x0)[_0x5b5f6c(0x196)](0x2) + _0x5b5f6c(0xad1); } })['join'](''); } } function _0x14f945(_0x50c69d) { const _0x1b57a9 = _0xe59ed1; if (!Array[_0x1b57a9(0x9a1)](_0x50c69d)) return '<p>格式错误</p>'; if (_0x50c69d['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>'; return _0x50c69d[_0x1b57a9(0xb11)]((_0x19c448, _0x1c31c0) => new Date(_0x1c31c0[_0x1b57a9(0x554)]) - new Date(_0x19c448[_0x1b57a9(0x554)])), _0x50c69d[_0x1b57a9(0x48a)](_0x3fd6da => _0x1b57a9(0x8b8) + (_0x3fd6da[_0x1b57a9(0x788)] || '未知商店') + _0x1b57a9(0x8bd) + (_0x3fd6da[_0x1b57a9(0x554)] || '') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x3fd6da[_0x1b57a9(0xad5)] || _0x1b57a9(0x457)) + _0x1b57a9(0x227) + (_0x3fd6da['cost'] || 0x0)[_0x1b57a9(0x196)](0x2) + _0x1b57a9(0x4e7))[_0x1b57a9(0x863)](''); } function _0x540afc(_0x468131) { const _0x21ae87 = _0xe59ed1; if (!Array['isArray'](_0x468131)) return _0x21ae87(0x4b5); if (_0x468131[_0x21ae87(0x30c)] === 0x0) return _0x21ae87(0x30b); return _0x468131[_0x21ae87(0xb11)]((_0x4de134, _0xe44a34) => new Date(_0xe44a34[_0x21ae87(0x554)]) - new Date(_0x4de134[_0x21ae87(0x554)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x468131[_0x21ae87(0x48a)](_0x26b74b => _0x21ae87(0x3f3) + (_0x26b74b[_0x21ae87(0x168)] || _0x21ae87(0x5be)) + _0x21ae87(0x532) + (_0x26b74b[_0x21ae87(0xb99)] || '') + _0x21ae87(0xac3) + (_0x26b74b[_0x21ae87(0x554)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x21ae87(0x863)]('') + '</div>'; } async function _0x3215e3(_0x4223d2, _0x1ca115, _0x290d3f = null) { const _0x270866 = _0xe59ed1, _0x12fa65 = _0xd97907(_0x1ca115), _0x4ad82a = _0x3cf4de[_0x270866(0x27a)][_0x270866(0x6f0)](_0x38062c => _0x38062c[_0x270866(0x76d)] === _0x270866(0x86c) && _0x38062c[_0x270866(0x48f)]['includes'](_0x1ca115)), _0x36c39c = _0x1af79f(_0x4ad82a?.['id'] || _0x3cf4de[_0x270866(0xa9a)]); if (!_0x12fa65) throw new Error('找不到角色信息。'); const { omniText: _0x2fb505 } = _0x7987c1(_0x1ca115); let _0x6e6148 = ''; const _0x1f2f95 = new Date(); let _0x1ed233 = null, _0x272947 = '无'; if (_0x290d3f) { if ('NoKRe' === 'cdGMB') { const _0x147d40 = _0x76b859[_0x270866(0x5cb)](_0x270866(0xa28)); _0x147d40 && _0x147d40[_0x270866(0x713)](); const _0x593e3e = _0x434e30[_0x270866(0x5cb)]('.screen.active'); if (_0x593e3e && (_0x593e3e['id'] === 'meeting-view-screen' || _0x593e3e['id'] === _0x270866(0x4f4))) _0x3a01b1(); else { const _0x2f2629 = _0x373a65['querySelectorAll'](_0x270866(0x9bf)); _0x2f2629[_0x270866(0x8cf)](_0xa10def => _0xa10def[_0x270866(0x713)]()); } } else try { let _0x29df33; try { _0x29df33 = JSON['parse'](_0x290d3f); } catch (_0x38c697) { _0x270866(0x412) === _0x270866(0x8d4) ? _0x1b5868 = _0x270866(0x85b) : _0x29df33 = _0x29df98(_0x290d3f); } if (Array[_0x270866(0x9a1)](_0x29df33) && _0x29df33[_0x270866(0x30c)] > 0x0) { if (_0x270866(0x572) !== _0x270866(0x242)) { const _0x3e1a05 = _0x29df33['map'](_0x45e831 => new Date(_0x45e831['timestamp'] || _0x45e831['last_edited']))['filter'](_0x14de4a => !isNaN(_0x14de4a)); _0x3e1a05[_0x270866(0x30c)] > 0x0 && (_0x270866(0x26d) === 'DBben' ? (_0x182cd3['error'](_0x270866(0x593), _0x5e6ce3), _0xb603d7(_0x270866(0xa4c))) : (_0x1ed233 = new Date(Math[_0x270866(0x58b)][_0x270866(0x80e)](null, _0x3e1a05)), _0x272947 = _0x1ed233['toLocaleString'](_0x270866(0x77e), { 'dateStyle': 'medium', 'timeStyle': _0x270866(0x5cf) }))); } else _0x59008b[_0x270866(0x8fe)](_0x5c4acc); } } catch (_0x219b5b) { _0x270866(0x37d) === _0x270866(0x37d) ? console[_0x270866(0x315)](_0x270866(0x611), _0x219b5b) : _0x73e99c[_0x270866(0x937)][_0x264dd0] = _0x13ca5a[_0x5a4d13]; } } const _0x33c59d = _0x3de80d(_0x1ca115); _0x6e6148 = _0x270866(0x24b), _0x6e6148 += _0x270866(0x776) + _0x1f2f95[_0x270866(0x118)](_0x270866(0x77e), { 'dateStyle': _0x270866(0x88f), 'timeStyle': _0x270866(0x5cf) }) + '\x0a'; if (_0x33c59d) { if (_0x270866(0x659) !== _0x270866(0x659)) _0x1b718e = _0x4f6a02['parse'](_0x1b5599['getItem'](_0x4fa43e) || '{}'); else { const _0x178935 = new Date(_0x33c59d['timestamp']), _0x5d75b8 = _0x19c0c3(_0x178935); _0x6e6148 += _0x270866(0x63b) + _0x5d75b8 + '\x0a'; const _0x31d4e6 = _0x1f2f95['toDateString'](), _0x83b27 = _0x178935[_0x270866(0x9fd)](), _0x31e368 = new Date(); _0x31e368[_0x270866(0x2ea)](_0x1f2f95['getDate']() - 0x1); const _0x22f67b = _0x31e368[_0x270866(0x9fd)](); if (_0x31d4e6 === _0x83b27) { const _0x4d8537 = (_0x1f2f95 - _0x178935) / (0x3e8 * 0x3c); _0x6e6148 += _0x270866(0x823); } else { if (_0x22f67b === _0x83b27) { if (_0x270866(0xaf4) === _0x270866(0x172)) { const _0x549e11 = _0x1b733c[_0x270866(0x35a)](/:\s(.+)/); if (_0x549e11[_0x270866(0x30c)] > 0x1) { const _0x3f8137 = _0x549e11[0x0][_0x270866(0x4ca)](), _0x52143 = _0x549e11[0x1][_0x270866(0x4ca)]()[_0x270866(0xb53)](/^"|"$/g, ''); _0x5ef6b2[_0x3f8137] = _0x52143; } } else _0x6e6148 += _0x270866(0xaf); } else { const _0x11d796 = Math[_0x270866(0x53a)]((_0x1f2f95 - _0x178935) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x6e6148 += _0x270866(0x237) + _0x11d796 + _0x270866(0x2dc); } } } } else { if (_0x270866(0x3d5) !== _0x270866(0x3d5)) return new _0x3ad865(_0x239679 => { const _0x5a96d5 = _0x270866, _0xbe5b99 = _0x5a96d5(0xa20); _0x44f77f[_0x5a96d5(0x5e5)][_0x5a96d5(0xb63)](_0x5a96d5(0xa62), _0xbe5b99); const _0x158a5e = _0x3e5b4c[_0x5a96d5(0x7ef)](_0x5a96d5(0x806)), _0x172d56 = _0x1221a5[_0x5a96d5(0x7ef)](_0x5a96d5(0x1ea)), _0x68d72d = _0x10e93b[_0x5a96d5(0x7ef)](_0x5a96d5(0x773)), _0xca366d = _0x585166[_0x5a96d5(0x7ef)](_0x5a96d5(0x127)), _0x3361f6 = _0x158a5e[_0x5a96d5(0x5cb)](_0x5a96d5(0xb06)), _0x8e38a0 = () => { const _0x4c6baa = _0x5a96d5; _0x158a5e[_0x4c6baa(0x713)](), _0x239679(); }; _0x68d72d[_0x5a96d5(0xafa)] = () => { const _0x8f2e5d = _0x5a96d5; _0xa88359(_0x172d56[_0x8f2e5d(0x35c)]), _0x8e38a0(); }, _0xca366d[_0x5a96d5(0xafa)] = _0x8e38a0, _0x3361f6[_0x5a96d5(0xafa)] = _0x8e38a0; }); else _0x6e6148 += '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a'; } let _0x5ef80e = '', _0x2e9448 = ''; _0x290d3f ? (_0x5ef80e = _0x270866(0x9f0), _0x2e9448 = _0x270866(0xb2c) + _0x290d3f + '\x0a```') : _0x5ef80e = _0x270866(0x779); const _0x29d334 = { 'gallery': _0x270866(0x662), 'whispers': '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'abyss': _0x270866(0xe7), 'fragments': _0x270866(0xa39), 'bites': _0x270866(0x362), 'wants': _0x270866(0x675), 'footprints': '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]' }, _0x14b2ce = _0x29d334[_0x4223d2] || _0x270866(0x93a) + _0x4223d2 + _0x270866(0x5c1); let _0x312385 = ''; if (_0x12fa65[_0x270866(0x91e)] && _0x12fa65[_0x270866(0x91e)][_0x270866(0x30c)] > 0x0) { const _0x44f798 = _0x12fa65[_0x270866(0x91e)][_0x270866(0x48a)](_0x1a4bd5 => _0x3cf4de[_0x270866(0xb88)][_0x270866(0x6f0)](_0x48c082 => _0x48c082['id'] === _0x1a4bd5))[_0x270866(0x3f0)](Boolean)['map'](_0x1e80a9 => '\x0a##\x20世界书条目:\x20' + _0x1e80a9[_0x270866(0x382)] + '\x0a' + _0x1e80a9[_0x270866(0x313)])[_0x270866(0x863)](''); _0x44f798 && (_0x312385 = _0x270866(0x3e0) + _0x44f798); } const _0x269849 = _0x270866(0x786) + _0x12fa65[_0x270866(0x382)] + _0x270866(0x4ec) + _0x12fa65[_0x270866(0x382)] + _0x270866(0x161) + _0x36c39c[_0x270866(0x382)] + _0x270866(0x420) + _0x272947 + _0x270866(0xa40) + _0x1f2f95[_0x270866(0x118)](_0x270866(0x77e), { 'dateStyle': _0x270866(0x88f), 'timeStyle': _0x270866(0x5cf) }) + _0x270866(0x8d2) + _0x12fa65['name'] + _0x270866(0x6db) + _0x12fa65[_0x270866(0xa2e)] + '\x0a' + _0x312385 + _0x270866(0xa27) + _0x36c39c[_0x270866(0x382)] + _0x270866(0x6db) + _0x36c39c[_0x270866(0xa2e)] + _0x270866(0xc9) + _0x2fb505 + '\x0a' + _0x2e9448 + _0x270866(0x6c1) + _0x5ef80e + '\x0a' + _0x14b2ce + _0x270866(0xa80), _0x559118 = [{ 'role': _0x270866(0x24d), 'content': _0x269849 }]; _0x559118[_0x270866(0x967)]({ 'role': _0x270866(0x32c), 'content': _0x270866(0x241) }); const _0x4ec39d = await _0x63fdee(_0x559118, { 'json': !![] }); return _0x4ec39d; } async function _0x13ecd8(_0x437378) { const _0x2b5113 = _0xe59ed1, _0x424114 = _0xd97907(_0x437378); if (!_0x424114) throw new Error(_0x2b5113(0x952)); _0x2a565e(!![], _0x2b5113(0x9ce)); const _0x11cdae = [_0x2b5113(0x7f9), _0x2b5113(0x8a1), _0x2b5113(0xa35), 'fragments', _0x2b5113(0x9e3), _0x2b5113(0x4df), _0x2b5113(0x1b2)]; let _0x5829b5 = {}; await Promise[_0x2b5113(0x6d5)](_0x11cdae['map'](async _0xa32e72 => { const _0x124d6f = _0x2b5113; if (_0x124d6f(0xaf9) === _0x124d6f(0xaf9)) { const _0x4bc942 = _0x124d6f(0x149) + _0x437378 + '_' + _0xa32e72, _0x919906 = await _0x5a1d99(_0x4bc942); if (_0x919906) { if ('DZEQc' !== _0x124d6f(0x476)) _0x4a2cbd['error'](_0x124d6f(0x6e1), _0x5b00f0, _0x124d6f(0xa2a), _0x1222c0), _0x4ca1b7[_0x124d6f(0x103)][_0x124d6f(0x967)]({ 'role': _0x124d6f(0x78b), 'senderId': _0x19f10d['id'], 'timestamp': _0x3e22dd[_0x124d6f(0x740)](), 'isOffline': !![], 'content': _0x124d6f(0x6c9) + _0x3a014d + ']' }); else try { if (_0x124d6f(0x34d) !== _0x124d6f(0x34d)) { const _0x436350 = _0x1bfc8a[_0x124d6f(0x13b)][_0x124d6f(0x27c)][0x0]; if (!_0x436350) return; const _0x1641cd = _0x4279ab['createObjectURL'](_0x436350); _0x2ecb4c[_0x124d6f(0x937)]['backgroundImage'] = _0x124d6f(0x550) + _0x1641cd + '\x27)'; } else _0x5829b5[_0xa32e72] = JSON[_0x124d6f(0x6e7)](_0x919906); } catch (_0x1e3f2a) { } } } else _0x41ca51[_0x124d6f(0x5cb)](_0x124d6f(0xa17))['onclick'] = () => { _0x231a29(_0x5779bd), _0x2166bb(); }; })); if (Object['keys'](_0x5829b5)[_0x2b5113(0x30c)] === 0x0) return _0x2b5113(0x1ca); const _0x2b7a77 = _0x2b5113(0x670) + _0x424114[_0x2b5113(0x382)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x50b30a = [{ 'role': 'system', 'content': _0x2b7a77 }, { 'role': _0x2b5113(0x32c), 'content': JSON[_0x2b5113(0x56e)](_0x5829b5, null, 0x2) }]; _0x2a565e(!![], _0x2b5113(0x74e)); const _0x527329 = await _0x63fdee(_0x50b30a); return _0x527329 || 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。'; } async function _0x13ecd8(_0x318d36) { const _0x5a4b62 = _0xe59ed1; if (_0x5a4b62(0x77d) === _0x5a4b62(0x80b)) { _0x42307c[_0x5a4b62(0x76a)](_0x5a4b62(0x10c)); return; } else { const _0xd5f936 = _0xd97907(_0x318d36); if (!_0xd5f936) throw new Error(_0x5a4b62(0x952)); try { _0x2a565e(!![], _0x5a4b62(0x9ce)); const _0x210ce4 = [_0x5a4b62(0x7f9), _0x5a4b62(0x8a1), 'abyss', _0x5a4b62(0x7cd), _0x5a4b62(0x9e3), 'wants', 'footprints']; let _0x5bf567 = {}; await Promise['all'](_0x210ce4['map'](async _0x5be2c0 => { const _0x23321b = _0x5a4b62; if (_0x23321b(0x129) === _0x23321b(0xa26)) _0x107417[_0x23321b(0x5e3)](_0x23321b(0x9ea), _0x190436); else { const _0x3d9609 = _0x23321b(0x149) + _0x318d36 + '_' + _0x5be2c0, _0x2bfb1d = await _0x5a1d99(_0x3d9609); if (_0x2bfb1d) { if (_0x23321b(0x6ed) === _0x23321b(0x6ed)) try { _0x5bf567[_0x5be2c0] = JSON['parse'](_0x2bfb1d); } catch (_0x5812ae) { } else { const _0x2a91df = _0x54a32f[_0x23321b(0x4a5)][_0x23321b(0x56a)](); _0x44205c['textContent'] = _0x2a91df[_0x23321b(0x5b4)] === 'narrator' ? '旁白' : _0x2a91df[_0x23321b(0x5b4)], _0x221373[_0x23321b(0x5f8)] = _0x2a91df[_0x23321b(0x312)], _0x2a91df[_0x23321b(0x5b4)] !== _0x23321b(0x785) && _0x31b36e(_0x4f47b0['activeMeetingCharId'], _0x2a91df['emotion']); } } } })); if (Object[_0x5a4b62(0x52a)](_0x5bf567)[_0x5a4b62(0x30c)] === 0x0) { if ('EPvXk' !== 'DhakC') return _0x5a4b62(0x1ca); else _0x324262[_0x5a4b62(0x5f8)] = '--\x20点击选择\x20--'; } const _0x20e968 = _0x5a4b62(0x670) + _0xd5f936['name'] + _0x5a4b62(0x969), _0x22c5ea = [{ 'role': _0x5a4b62(0x24d), 'content': _0x20e968 }, { 'role': _0x5a4b62(0x32c), 'content': JSON[_0x5a4b62(0x56e)](_0x5bf567, null, 0x2) }]; _0x2a565e(!![], _0x5a4b62(0x74e)); const _0x20fbb5 = await _0x63fdee(_0x22c5ea); return _0x20fbb5 || _0x5a4b62(0x4c0); } finally { _0x2a565e(![]); } } } document[_0xe59ed1(0x7ef)](_0xe59ed1(0x9dd))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => _0x459e0a(_0xe59ed1(0x1bf), _0xe59ed1(0x859))), document['getElementById'](_0xe59ed1(0x45c))[_0xe59ed1(0x25c)](_0xe59ed1(0x2c5), () => { const _0x5c2bf4 = _0xe59ed1; document[_0x5c2bf4(0x7ef)](_0x5c2bf4(0x844))[_0x5c2bf4(0x937)][_0x5c2bf4(0x8a4)] = _0x5c2bf4(0xacf), _0x459e0a(_0x5c2bf4(0x859), _0x5c2bf4(0x9c)); }); const _0x14cf04 = document[_0xe59ed1(0x7ef)](_0xe59ed1(0x6ae)); _0x14cf04 && (_0xe59ed1(0x159) === _0xe59ed1(0x52f) ? (_0x155890[_0xe59ed1(0x4ad)]['add'](_0xe59ed1(0xae0)), _0x7d83bc[_0xe59ed1(0x252)] += _0xe59ed1(0x519) + _0x1733ac + '\x22\x20class=\x22sticker-content\x22>') : _0x14cf04['addEventListener'](_0xe59ed1(0x2c5), () => { const _0x53fb65 = _0xe59ed1, _0x376fec = document[_0x53fb65(0x7ef)]('lock-screen-overlay'); if (_0x376fec) { if (_0x53fb65(0x2c9) === _0x53fb65(0x2c9)) _0x376fec[_0x53fb65(0x4ad)][_0x53fb65(0x713)](_0x53fb65(0x2f9)), _0x376fec[_0x53fb65(0x937)]['transform'] = '', _0x376fec[_0x53fb65(0x937)]['opacity'] = ''; else { const _0x1c5bb9 = _0x31a37e[_0x53fb65(0x13b)]['files'][0x0]; if (!_0x1c5bb9) return; const _0x277bc8 = _0x46a036[_0x53fb65(0x9e4)](_0x1c5bb9); _0x5dd1c0['src'] = _0x277bc8, _0x262d18[_0x53fb65(0x8f7)] = () => { const _0x2bae4a = _0x53fb65; _0x2e9284[_0x2bae4a(0x3c9)](_0x277bc8); }; } } })), _0x1f4762(); }); function _0x2a1e(_0x197fbd, _0x4105e6) { const _0x39df23 = _0x39df(); return _0x2a1e = function (_0x2a1e34, _0x13be3d) { _0x2a1e34 = _0x2a1e34 - 0x90; let _0x439686 = _0x39df23[_0x2a1e34]; return _0x439686; }, _0x2a1e(_0x197fbd, _0x4105e6); } async function _0x52194c() { const _0x3ca4e8 = _0x471ec9; console[_0x3ca4e8(0x76a)](_0x3ca4e8(0x1ee)), console[_0x3ca4e8(0x76a)](_0x3ca4e8(0x183)); async function _0x169c9a(_0x5be82b, _0x157182) { const _0x211c94 = _0x3ca4e8; if (_0x211c94(0x90e) === _0x211c94(0x9c6)) _0x26954b = 'vertical'; else { const _0x2b0f40 = await _0xa7a9d2; return new Promise((_0x21090b, _0x5a71e7) => { const _0x1bbd14 = _0x211c94, _0x388049 = _0x2b0f40[_0x1bbd14(0x9b1)](_0x4c2fa8, _0x1bbd14(0x12b)), _0x1fab87 = _0x388049[_0x1bbd14(0x326)](_0x4c2fa8), _0x56c008 = _0x1fab87[_0x1bbd14(0x336)]({ 'id': _0x5be82b, 'blob': _0x157182 }); _0x56c008[_0x1bbd14(0x78f)] = () => _0x21090b(_0x56c008[_0x1bbd14(0xb95)]), _0x56c008[_0x1bbd14(0x1bb)] = () => _0x5a71e7(_0x56c008['error']); }); } } async function _0x19fa7f(_0x3ccb7c) { const _0x30f064 = _0x3ca4e8; if (_0x30f064(0x717) !== _0x30f064(0x503)) { const _0x2ee365 = await _0xa7a9d2; return new Promise((_0x20dd24, _0x3c61b2) => { const _0x4bac88 = _0x30f064; if (_0x4bac88(0xaa6) !== _0x4bac88(0x24f)) { const _0x45da80 = _0x2ee365[_0x4bac88(0x9b1)](_0x3db906, _0x4bac88(0x571)), _0x1006c6 = _0x45da80[_0x4bac88(0x326)](_0x3db906), _0x33ba93 = _0x1006c6['get'](_0x3ccb7c); _0x33ba93[_0x4bac88(0x78f)] = () => _0x20dd24(_0x33ba93[_0x4bac88(0xb95)] ? _0x33ba93[_0x4bac88(0xb95)]['data'] : null), _0x33ba93[_0x4bac88(0x1bb)] = () => _0x3c61b2(_0x33ba93[_0x4bac88(0x5e3)]); } else { const { omniText: _0x2738a0 } = _0x507d55(_0x999b09['id'], null), _0x46efe1 = _0xa6c438(_0x1f9b54['id']), _0x20ffd1 = _0x3ebd8e['linkedWorldBookIds'] && _0x3df8e6['linkedWorldBookIds'][_0x4bac88(0x30c)] > 0x0 ? _0x4bac88(0x14b) + _0x2313b7['name'] + _0x4bac88(0xacc) + _0x455e18[_0x4bac88(0x91e)][_0x4bac88(0x48a)](_0x830cec => _0x58595d[_0x4bac88(0xb88)][_0x4bac88(0x6f0)](_0x459ee2 => _0x459ee2['id'] === _0x830cec))[_0x4bac88(0x3f0)](_0x319a95)[_0x4bac88(0x48a)](_0x27dbd6 => _0x4bac88(0xb58) + _0x27dbd6[_0x4bac88(0x382)] + '\x0a' + _0x27dbd6['content'])[_0x4bac88(0x863)]('') : ''; return _0x4bac88(0x98d) + _0x5b3d32['name'] + ',\x20ID:\x20' + _0x6d1afa['id'] + _0x4bac88(0xa6c) + _0x25fac2[_0x4bac88(0xa2e)] + _0x4bac88(0x7dc) + _0x2738a0 + '\x0a' + _0x46efe1 + '\x0a' + _0x20ffd1; } }); } else { const _0xa19ed8 = _0x3a9ffe[_0x30f064(0x7ef)](_0x30f064(0x5c4))[_0x30f064(0x35c)]; _0xa19ed8 && (_0x23c6bd[_0x30f064(0xa37)] = _0xa19ed8, _0x2028ee(), _0x571e1f(_0x30f064(0x9c7)), _0x2ce439(), _0x4a7e14[_0x30f064(0x7ef)]('set-active-user-button')[_0x30f064(0x937)]['display'] = _0x30f064(0xacf)); } } async function _0x5edb53(_0x1e68b1, _0x561ead) { const _0x216561 = await _0xa7a9d2; return new Promise((_0x137c76, _0x36e196) => { const _0x201be1 = _0x2a1e; if (_0x201be1(0x450) === _0x201be1(0x75f)) { const _0x1d324f = _0x241672['friendCircles'][_0x201be1(0x6f0)](_0xc13d47 => _0xc13d47['id'] === _0x2e5257); _0x1d324f && (_0x1d324f[_0x201be1(0x382)] = _0xf2f564, _0x1d324f[_0x201be1(0x2c4)] = _0x9ae895, _0x1d324f['memberCharacterIds'] = _0x54421d); } else { const _0xc75d5f = _0x216561[_0x201be1(0x9b1)](_0x3db906, _0x201be1(0x12b)), _0x3c64e3 = _0xc75d5f[_0x201be1(0x326)](_0x3db906), _0x3d508e = _0x3c64e3[_0x201be1(0x336)]({ 'id': _0x1e68b1, 'data': _0x561ead }); _0x3d508e['onsuccess'] = () => _0x137c76(), _0x3d508e['onerror'] = () => _0x36e196(_0x3d508e['error']); } }); } function _0x2caaf0(_0x20c8f7) { const _0x48d4d9 = _0x3ca4e8; if ('bgxXS' === 'EdHhc') { _0x2ec2e5 = _0x320921(_0x561618[_0x48d4d9(0x602)]), _0x3429cc[_0x48d4d9(0x252)] = ''; if (_0x295385['length'] === 0x0) { _0xfffb06[_0x48d4d9(0x252)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x540c1a['forEach']((_0x2ea2c0, _0x3850c3) => { const _0xf14d9 = _0x48d4d9, _0xcc0d91 = _0x31d34d[_0xf14d9(0xb60)]('p'); _0xcc0d91[_0xf14d9(0x5f8)] = _0x2ea2c0[_0xf14d9(0x993)], _0xcc0d91['id'] = _0xf14d9(0x982) + _0x3850c3, _0x221c24[_0xf14d9(0x8fe)](_0xcc0d91); }); } else return fetch(_0x20c8f7)[_0x48d4d9(0x683)](_0x36a716 => _0x36a716[_0x48d4d9(0x664)]()); } let _0x47571d = 0x0; for (let _0x5dfb53 = 0x0; _0x5dfb53 < localStorage[_0x3ca4e8(0x30c)]; _0x5dfb53++) { const _0x5db33e = localStorage[_0x3ca4e8(0x6bc)](_0x5dfb53); if (_0x5db33e && _0x5db33e['startsWith'](_0x3ca4e8(0x524))) { if (_0x3ca4e8(0x598) !== _0x3ca4e8(0x598)) { if (_0x49b735['type'] === _0x3ca4e8(0x9c0)) _0x47a911[_0x3ca4e8(0x3e2)](); _0x4c84eb(_0x9463f8); } else { let _0x3377d4, _0x2ead1d = ![]; try { _0x3377d4 = JSON[_0x3ca4e8(0x6e7)](localStorage[_0x3ca4e8(0x6b6)](_0x5db33e)); if (!Array[_0x3ca4e8(0x9a1)](_0x3377d4)) continue; for (const _0x47c4b4 of _0x3377d4) { if (_0x47c4b4 && _0x47c4b4[_0x3ca4e8(0x9bd)] && _0x47c4b4[_0x3ca4e8(0x9bd)][_0x3ca4e8(0xb05)](_0x3ca4e8(0x6bf))) { const _0xc4bb5e = await _0x2caaf0(_0x47c4b4[_0x3ca4e8(0x9bd)]), _0x4e8d95 = _0x3ca4e8(0x948) + Date['now']() + '_' + Math[_0x3ca4e8(0x758)](); await _0x169c9a(_0x4e8d95, _0xc4bb5e), _0x47c4b4[_0x3ca4e8(0x6b9)] = _0x4e8d95, delete _0x47c4b4['image'], _0x2ead1d = !![], _0x47571d++; } } _0x2ead1d && localStorage['setItem'](_0x5db33e, JSON['stringify'](_0x3377d4)); } catch (_0x18b6dd) { console['error']('处理\x20' + _0x5db33e + '\x20时出错:', _0x18b6dd); continue; } } } } console[_0x3ca4e8(0x76a)](_0x3ca4e8(0x37b) + _0x47571d + _0x3ca4e8(0x367)); } async function _0x472d03() { const _0x3165d4 = _0x471ec9; console[_0x3165d4(0x76a)](_0x3165d4(0x5bc)), console[_0x3165d4(0x76a)](_0x3165d4(0x18b)); async function _0x1dcd75(_0x5c0c07, _0x385e47) { const _0x212f31 = _0x3165d4; if (_0x212f31(0x742) === 'onFCA') _0xf34d44[_0x212f31(0x937)][_0x212f31(0x8a4)] = _0x212f31(0xacf); else { const _0xc2a908 = await _0xa7a9d2; return new Promise((_0xc66e8c, _0x501d20) => { const _0x1a211f = _0x212f31, _0x8e5bcf = _0xc2a908[_0x1a211f(0x9b1)](_0x1a211f(0x1f8), _0x1a211f(0x12b)), _0xabc54c = _0x8e5bcf[_0x1a211f(0x326)](_0x1a211f(0x1f8)), _0x216b36 = _0xabc54c[_0x1a211f(0x336)]({ 'id': _0x5c0c07, 'blob': _0x385e47 }); _0x216b36[_0x1a211f(0x78f)] = () => _0xc66e8c(_0x216b36['result']), _0x216b36[_0x1a211f(0x1bb)] = () => _0x501d20(_0x216b36[_0x1a211f(0x5e3)]); }); } } function _0x587604(_0x2a7fc7) { const _0x5af553 = _0x3165d4; return fetch(_0x2a7fc7)[_0x5af553(0x683)](_0x7d6f89 => _0x7d6f89['blob']()); } let _0x13da79 = 0x0, _0x365795 = ![]; try { if (_0x3165d4(0x34e) === _0x3165d4(0x34e)) { const _0x1ec7d8 = localStorage[_0x3165d4(0x6b6)](_0x3165d4(0x394)); if (!_0x1ec7d8) { console['log']('好友圈档案柜是空的，无需净化。'); return; } const _0x51844d = JSON[_0x3165d4(0x6e7)](_0x1ec7d8); if (!_0x51844d[_0x3165d4(0xa3d)] || !Array[_0x3165d4(0x9a1)](_0x51844d[_0x3165d4(0xa3d)])) return; for (const _0x2ad9b0 of _0x51844d[_0x3165d4(0xa3d)]) { if (_0x2ad9b0[_0x3165d4(0x516)] && Array[_0x3165d4(0x9a1)](_0x2ad9b0[_0x3165d4(0x516)])) for (const _0x42aeed of _0x2ad9b0[_0x3165d4(0x516)]) { if (_0x42aeed && _0x42aeed[_0x3165d4(0x9bd)] && _0x42aeed[_0x3165d4(0x9bd)][_0x3165d4(0xb05)]('data:image')) { console[_0x3165d4(0x76a)]('在好友圈\x20\x22' + _0x2ad9b0['name'] + _0x3165d4(0xb24)); const _0x553e96 = await _0x587604(_0x42aeed[_0x3165d4(0x9bd)]), _0x2752ec = _0x3165d4(0x26a) + Date[_0x3165d4(0x740)]() + '_' + Math['random'](); await _0x1dcd75(_0x2752ec, _0x553e96), _0x42aeed[_0x3165d4(0x6b9)] = _0x2752ec, delete _0x42aeed[_0x3165d4(0x9bd)], _0x365795 = !![], _0x13da79++; } } } _0x365795 && (console[_0x3165d4(0x76a)](_0x3165d4(0x4a6)), localStorage['setItem'](_0x3165d4(0x394), JSON[_0x3165d4(0x56e)](_0x51844d))); } else _0x7c7309[_0x3165d4(0x671)] = null, _0x353d2a(), _0x331558(_0x3165d4(0x633)), _0x45cbd5(), _0x3a0f43[_0x3165d4(0x4ad)][_0x3165d4(0x713)](_0x3165d4(0xfb)), _0x44fecf(() => _0x6638ca[_0x3165d4(0x937)][_0x3165d4(0x8a4)] = _0x3165d4(0xacf), 0x12c); } catch (_0x5f1361) { console['error'](_0x3165d4(0xb72), _0x5f1361); } return console['log'](_0x3165d4(0x24e)), console[_0x3165d4(0x76a)]('成功净化并迁移了\x20' + _0x13da79 + _0x3165d4(0x8a9)), _0x13da79; } async function _0x5b435a() { const _0x557ec9 = _0x471ec9; console['log']('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'), console[_0x557ec9(0x76a)](_0x557ec9(0x7e3)); let _0x593efc = 0x0, _0x2d8ec4 = ![]; try { if (_0x557ec9(0x2c0) !== 'ajqbc') { const _0x595de8 = localStorage[_0x557ec9(0x6b6)](_0x557ec9(0x394)); if (!_0x595de8) return console[_0x557ec9(0x76a)]('聊天档案柜是空的，无需净化。'), 0x0; for (let _0x269de0 = 0x0; _0x269de0 < localStorage[_0x557ec9(0x30c)]; _0x269de0++) { const _0x206085 = localStorage[_0x557ec9(0x6bc)](_0x269de0); if (_0x206085 && _0x206085['startsWith'](_0x557ec9(0x524))) { if ('QAMZL' !== _0x557ec9(0x756)) return new _0x3228f5((_0x3fe3da, _0x190911) => { const _0x1c841a = _0x557ec9, _0x23469f = new _0x30029b(); _0x23469f['onloadend'] = () => _0x3fe3da(_0x23469f['result']), _0x23469f[_0x1c841a(0x1bb)] = _0x190911, _0x23469f['readAsDataURL'](_0x57074c); }); else { let _0xf2b8ba, _0x357a7d = ![]; try { _0xf2b8ba = JSON[_0x557ec9(0x6e7)](localStorage[_0x557ec9(0x6b6)](_0x206085)); if (!Array[_0x557ec9(0x9a1)](_0xf2b8ba)) continue; for (const _0xedb86a of _0xf2b8ba) { if (_0x557ec9(0x2a3) !== _0x557ec9(0x9f8)) { if (_0xedb86a && (_0xedb86a[_0x557ec9(0x76d)] === 'music' || _0xedb86a['type'] === _0x557ec9(0x59f)) && _0xedb86a[_0x557ec9(0xa08)] && _0xedb86a[_0x557ec9(0xa08)][_0x557ec9(0xb05)](_0x557ec9(0x6bf))) { const _0x5738f2 = await _0x151f54(_0xedb86a[_0x557ec9(0xa08)]), _0x12407e = _0x557ec9(0x901) + Date['now']() + '_' + Math['random'](); await _0x30635e(_0x12407e, _0x5738f2), _0xedb86a['coverId'] = _0x12407e, delete _0xedb86a['coverUrl'], _0x357a7d = !![], _0x593efc++; } } else for (const _0x170a0d of _0x3c200b[_0x557ec9(0xb88)]) { let _0x3a9849 = _0xd61f26[_0x557ec9(0xb88)][_0x557ec9(0x6f0)](_0xa7d853 => _0xa7d853['name'] === _0x170a0d[_0x557ec9(0x382)] && (_0xa7d853[_0x557ec9(0x2da)] || _0x557ec9(0xa41)) === (_0x170a0d[_0x557ec9(0x2da)] || _0x557ec9(0xa41))); if (_0x3a9849) _0x2aa410[_0x557ec9(0x967)](_0x3a9849['id']); else { const _0x217fec = { 'id': _0x557ec9(0xa44) + _0x5c8eb1[_0x557ec9(0x740)]() + '_' + _0x56175f[_0x557ec9(0x758)](), 'name': _0x170a0d['name'], 'content': _0x170a0d['content'], 'categoryId': _0x170a0d[_0x557ec9(0x2da)] || _0x557ec9(0xa41) }; _0xf125b3[_0x557ec9(0xb88)]['push'](_0x217fec), _0x1bf96b['push'](_0x217fec['id']); } } } _0x357a7d && localStorage['setItem'](_0x206085, JSON[_0x557ec9(0x56e)](_0xf2b8ba)); } catch (_0x872ad7) { if ('aBOCK' !== _0x557ec9(0x9ed)) { const _0x3fc835 = _0x470cd1['posts'][_0x557ec9(0x3f0)](_0x1a2137 => _0x1a2137[_0x557ec9(0x76d)] === _0x557ec9(0x42f) && _0x1a2137[_0x557ec9(0x4c7)])[_0x557ec9(0x48a)](_0xb12cce => ({ ..._0xb12cce, 'source': _0x557ec9(0x961) })); _0x107b33['push'](..._0x3fc835); } else { console[_0x557ec9(0x5e3)]('处理\x20' + _0x206085 + _0x557ec9(0x5f0), _0x872ad7); continue; } } } } } } else _0x1f0847(), _0x50f029(![]); } catch (_0x142ff6) { _0x557ec9(0x70c) === _0x557ec9(0x841) ? _0x454357[_0x557ec9(0x53f)]('.snoop-chat-item')[_0x557ec9(0x8cf)](_0xd686c3 => { const _0x192f45 = _0x557ec9; _0xd686c3[_0x192f45(0x25c)]('click', () => { const _0x58573f = _0x192f45, _0x300acb = _0x1986f4[_0x58573f(0x6e7)](_0xd686c3[_0x58573f(0x361)][_0x58573f(0x76a)][_0x58573f(0xb53)](/&quot;/g, '\x22')), _0xa0a4d4 = _0xd686c3[_0x58573f(0x361)]['contactName'], _0x29f177 = _0xd686c3['dataset'][_0x58573f(0x200)]; _0x5a5b97(_0xa0a4d4, _0x29f177, _0x300acb); }); }) : console[_0x557ec9(0x5e3)](_0x557ec9(0x614), _0x142ff6); } return console[_0x557ec9(0x76a)]('---\x20音乐净化仪式完成\x20---'), console[_0x557ec9(0x76a)](_0x557ec9(0x75a) + _0x593efc + _0x557ec9(0xa5d)), _0x593efc; } async function _0x40dc36() { const _0x51523e = _0x471ec9; console[_0x51523e(0x76a)](_0x51523e(0x82b)), console[_0x51523e(0x76a)]('正在检查是否有需要救援的旧头像...'); let _0x21125a = 0x0; try { if (_0x51523e(0x47b) !== _0x51523e(0x9f5)) { const _0x3f8eaa = localStorage['getItem'](_0x51523e(0x394)); if (!_0x3f8eaa) return console[_0x51523e(0x76a)]('找不到旧的存档，无需救援。'), 0x0; const _0x452275 = JSON[_0x51523e(0x6e7)](_0x3f8eaa); if (!_0x452275[_0x51523e(0xad3)] || !Array['isArray'](_0x452275['characters'])) { if (_0x51523e(0x286) !== _0x51523e(0x2e2)) return 0x0; else _0x3194ce(_0x51523e(0xa32) + _0x20cf9a['message']); } for (const _0x133d99 of _0x452275[_0x51523e(0xad3)]) { if (_0x133d99 && _0x133d99[_0x51523e(0x3f1)] && _0x133d99['avatar'][_0x51523e(0xb05)](_0x51523e(0x6bf))) { if ('ctgFZ' !== _0x51523e(0x51e)) { const _0x4a38b3 = _0x8ad503['dataset'][_0x51523e(0xaa1)]; !_0x4c7926[_0x51523e(0x5cc)](_0x4a38b3) && _0x6a4f48[_0x51523e(0x967)](_0x4a38b3); } else { const _0xd2ffde = await _0x47b504(_0x51523e(0x54f) + _0x133d99['id']); if (!_0xd2ffde) { if (_0x51523e(0x479) === _0x51523e(0x429)) _0x3ddc03['error'](_0x51523e(0x378), _0x366e13), _0xc7a67b(_0x51523e(0xaf3) + _0x1294c4[_0x51523e(0x99)]); else { console['log'](_0x51523e(0x1b3) + _0x133d99['name'] + _0x51523e(0x793)); const _0x558443 = await _0x151f54(_0x133d99[_0x51523e(0x3f1)]); await _0x30635e(_0x51523e(0x54f) + _0x133d99['id'], _0x558443), _0x21125a++; } } } } } } else _0x2e9f6d[_0x51523e(0x937)][_0x51523e(0x6aa)] = 'url(' + _0x2e1175 + ')', _0x4df1a8[_0x51523e(0x937)][_0x51523e(0x143)] = _0x51523e(0xa99), _0x1958a1['style'][_0x51523e(0x913)] = 'center', _0x54025a['style']['color'] = _0x51523e(0x220), _0x47d40d['querySelectorAll'](_0x51523e(0x1c3))['forEach'](_0x533702 => { const _0x190860 = _0x51523e; _0x533702[_0x190860(0x937)][_0x190860(0x586)] = _0x190860(0x90c); }); } catch (_0x3fd87f) { console[_0x51523e(0x5e3)]('救援头像时出错:', _0x3fd87f); } return console[_0x51523e(0x76a)](_0x51523e(0x8c6)), console[_0x51523e(0x76a)](_0x51523e(0x97a) + _0x21125a + _0x51523e(0x818)), _0x21125a; } function _0x307c1d() { const _0x5411b8 = _0x471ec9; if (!_0x3cf4de[_0x5411b8(0x253)]) { if (_0x5411b8(0x893) === _0x5411b8(0x893)) return _0x3cf4de[_0x5411b8(0x3ec)][_0x5411b8(0x6f0)](_0x32c527 => _0x32c527['id'] === _0x3cf4de[_0x5411b8(0xa37)]) || _0x3cf4de[_0x5411b8(0x3ec)][0x0]; else { _0x4af91c(![]), _0x35b390(_0x5411b8(0xac2)); return; } } const _0x2ad389 = _0x3cf4de['chats']['find'](_0x5e80eb => _0x5e80eb['type'] === _0x5411b8(0x86c) && _0x5e80eb[_0x5411b8(0x48f)][_0x5411b8(0x5cc)](_0x3cf4de[_0x5411b8(0x253)])), _0x49305d = _0x2ad389?.[_0x5411b8(0x2c4)] || _0x3cf4de['activeUserProfileId']; return _0x3cf4de[_0x5411b8(0x3ec)][_0x5411b8(0x6f0)](_0x221731 => _0x221731['id'] === _0x49305d) || _0x3cf4de[_0x5411b8(0x3ec)][0x0]; } function _0x19c0c3(_0x3485c7) { const _0x598b90 = _0x471ec9, _0x3428fe = new Date(), _0x21fba7 = _0x3428fe - _0x3485c7, _0x1a9b63 = Math['round'](_0x21fba7 / 0x3e8), _0x25c678 = Math[_0x598b90(0x53a)](_0x1a9b63 / 0x3c), _0x526c6f = Math[_0x598b90(0x53a)](_0x25c678 / 0x3c), _0x3cd25d = Math[_0x598b90(0x53a)](_0x526c6f / 0x18), _0x2b4b69 = _0x3485c7[_0x598b90(0x86a)](_0x598b90(0x77e), { 'hour': _0x598b90(0x56f), 'minute': '2-digit' }); if (_0x1a9b63 < 0x3c) return '刚才'; if (_0x25c678 < 0x3c) { if ('NbrUy' === _0x598b90(0x85e)) return _0x25c678 + '分钟前'; else _0x5eb2b5 += _0x598b90(0x187); } const _0x154f24 = _0x3428fe[_0x598b90(0x9fd)]() === _0x3485c7[_0x598b90(0x9fd)](); if (_0x154f24) { if (_0x598b90(0x153) === _0x598b90(0x97d)) _0x2c16d0['innerHTML'] = _0x598b90(0xb30); else return '今天\x20' + _0x2b4b69; } const _0x4d28e6 = new Date(); _0x4d28e6[_0x598b90(0x2ea)](_0x3428fe[_0x598b90(0x5c3)]() - 0x1); const _0x22874d = _0x4d28e6[_0x598b90(0x9fd)]() === _0x3485c7['toDateString'](); if (_0x22874d) return _0x598b90(0xb5f) + _0x2b4b69; if (_0x3cd25d <= 0x7) { if (_0x598b90(0xa95) === _0x598b90(0xa95)) { const _0x46f5ff = [_0x598b90(0x59b), _0x598b90(0xb6a), _0x598b90(0x38e), '星期三', _0x598b90(0x24c), '星期五', _0x598b90(0xfd)]; return _0x46f5ff[_0x3485c7[_0x598b90(0xa72)]()] + '\x20' + _0x2b4b69; } else { if (_0x539270) _0x151664(_0x1ff2c4); } } return _0x3485c7[_0x598b90(0x96b)]() + '年' + (_0x3485c7[_0x598b90(0x677)]() + 0x1) + '月' + _0x3485c7[_0x598b90(0x5c3)]() + '日'; } function _0x250c4e(_0x5eef99, _0x2d56e8 = 0x320, _0x53f7cb = 0.8, _0x4b8cf = ![]) { return new Promise((_0x3e202d, _0x35e0aa) => { const _0x9d078b = _0x2a1e; if (_0x9d078b(0x76e) !== _0x9d078b(0x76e)) _0x2a777b[_0x9d078b(0x5e3)](_0x9d078b(0xb32) + _0x2935cf, _0x5297d3); else { if (!_0x5eef99 || !_0x5eef99[_0x9d078b(0x76d)][_0x9d078b(0xb05)](_0x9d078b(0x2e9))) { if (_0x9d078b(0x606) !== _0x9d078b(0x8da)) return _0x35e0aa(new Error('哼，这不是图片，你想让我压缩什么？')); else _0x1e5c60['value'] = '', _0x3b6bea['textContent'] = _0x9d078b(0x115), _0x32fdd7['value'] = _0x9d078b(0x27b) + (_0x1831b3[_0x9d078b(0xad3)][_0x9d078b(0x30c)] + 0x1), _0x16d9e9['value'] = '', _0x4a7ab0[_0x9d078b(0x35c)] = _0x9d078b(0x30d), _0x38676e[_0x9d078b(0x7ef)](_0x9d078b(0x994))[_0x9d078b(0x35c)] = '', _0x5a1700['value'] = '', _0xf8804a['value'] = ''; } const _0x1bfb30 = new FileReader(); _0x1bfb30['readAsDataURL'](_0x5eef99), _0x1bfb30[_0x9d078b(0x8f7)] = _0x3e7765 => { const _0x200d13 = _0x9d078b; if ('QBlJg' === 'QBlJg') { const _0x291883 = new Image(); _0x291883[_0x200d13(0x557)] = _0x3e7765[_0x200d13(0x13b)][_0x200d13(0xb95)], _0x291883['onload'] = () => { const _0xe612dc = _0x200d13, _0x30aa87 = document[_0xe612dc(0xb60)]('canvas'); let _0x33c38b = _0x291883[_0xe612dc(0x198)], _0x167c20 = _0x291883[_0xe612dc(0x293)]; _0x33c38b > _0x167c20 ? _0x33c38b > _0x2d56e8 && (_0x167c20 *= _0x2d56e8 / _0x33c38b, _0x33c38b = _0x2d56e8) : 'YoTZY' === 'Npmsx' ? (_0x5b1bb1[_0xe612dc(0x5b1)] = _0x32f1db, _0x354d2b()) : _0x167c20 > _0x2d56e8 && (_0xe612dc(0xb7) !== _0xe612dc(0xb7) ? _0x403296(new _0x25f819('Canvas\x20to\x20Blob\x20conversion\x20failed.')) : (_0x33c38b *= _0x2d56e8 / _0x167c20, _0x167c20 = _0x2d56e8)); _0x30aa87['width'] = _0x33c38b, _0x30aa87[_0xe612dc(0x293)] = _0x167c20; const _0x6eaa15 = _0x30aa87[_0xe612dc(0x615)]('2d'); _0x6eaa15['drawImage'](_0x291883, 0x0, 0x0, _0x33c38b, _0x167c20); const _0x1c8635 = _0x5eef99['type'] === _0xe612dc(0x117) ? _0xe612dc(0x117) : _0xe612dc(0x3cb); _0x4b8cf ? _0xe612dc(0x728) === _0xe612dc(0x32e) ? (_0x48b924 = _0x53cdd5[_0xe612dc(0x716)][0x0][_0xe612dc(0x22d)], _0x499b2e = _0x4ade14['touches'][0x0]['clientY'], _0x59ed56 = !![], _0x5e014c = '') : _0x30aa87[_0xe612dc(0x6a5)](_0x443527 => { _0x443527 ? _0x3e202d(_0x443527) : _0x35e0aa(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.')); }, _0x1c8635, _0x53f7cb) : _0x3e202d(_0x30aa87['toDataURL'](_0x1c8635, _0x53f7cb)); }, _0x291883[_0x200d13(0x1bb)] = _0x22c795 => _0x35e0aa(_0x22c795); } else { const _0x27b28e = _0x3f4408[_0x200d13(0x6e7)](_0x2be5f3); _0x333ab6[_0x200d13(0x9a1)](_0x27b28e) && (_0x7cbe7e[_0x200d13(0x35c)] = _0x27b28e[_0x200d13(0x48a)](_0x43e119 => _0x43e119[_0x200d13(0x382)] + '--' + _0x43e119['url'])[_0x200d13(0x863)]('\x0a')); } }, _0x1bfb30['onerror'] = _0x276d9a => _0x35e0aa(_0x276d9a); } }); } function _0x50ddb8(_0x14aa57) { return new Promise((_0x4e0173, _0x4366cd) => { const _0x1ca33a = _0x2a1e; if (_0x1ca33a(0x4b2) === 'DyLOO') { if (!_0x5bc090['isArray'](_0x2fd56f)) return _0x1ca33a(0x4b5); if (_0x3f4db3[_0x1ca33a(0x30c)] === 0x0) return _0x1ca33a(0x77b); return _0x4ac238[_0x1ca33a(0xb11)]((_0x50772c, _0x2cba42) => new _0xf9f20a(_0x2cba42[_0x1ca33a(0x1db)]) - new _0x4ede48(_0x50772c['last_edited'])), _0x507ed5['map'](_0x8b897e => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + (_0x8b897e[_0x1ca33a(0x4c5)] || '无标题笔记') + _0x1ca33a(0xb71) + (_0x8b897e[_0x1ca33a(0x313)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20' + (_0x8b897e['last_edited'] || '') + _0x1ca33a(0xf7))[_0x1ca33a(0x863)](''); } else { const _0x3eb812 = new FileReader(); _0x3eb812[_0x1ca33a(0x46c)] = () => _0x4e0173(_0x3eb812[_0x1ca33a(0xb95)]), _0x3eb812[_0x1ca33a(0x1bb)] = _0x4366cd, _0x3eb812[_0x1ca33a(0x186)](_0x14aa57); } }); } function _0x39df() { const _0x48e162 = ['<span>', 'div', 'chat_', 'cover_placeholder_', 'yEYFT', '”。\x0a', 'dPGoM', 'sort', '--primary-hue', 'global-player-play-pause-btn', 'edit-clear-history-button', '》吗？', 'lt-ui-song-title', 'GpEiL', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'grid', 'lGQyq', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'noir_data_migration_v1_complete', '清空聊天记录失败。', 'MDHfu', 'IqwZZ', 'cancel', 'ATItt', 'zVIfI', '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。', '\x22\x20中发现一张需要净化的图片...', 'Hqrxc', 'EFGZu', 'countdown-title', 'uiScale', 'getReader', 'sUbAR', 'href', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，【不许动它！】)\x0a```\x0a', 'music-post', '至少要选择一个圈内成员！', 'RcLEy', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'OKMnS', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '\x0a-\x20你正在为一个名为“', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', 'uOAWP', '</label>\x0a\x20\x20\x20\x20', 'api-endpoint', 'live-preview-style', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'AdDjj', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'save-custom-stickers-button', 'BaPrg', '<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>', '哼，你这字体文件有问题，用不了。', 'wjdfc', 'ORiPL', 'api-model', '正在搬运旧卡片...', 'WnnCB', '有点破防', '.diary-entry', 'customIcon_', '编辑好友圈', 'accountingData', 'mmfUv', '记一笔', 'ajDwT', 'lYPOZ', 'NCHsB', '我错了', 'char_sprite_', '(歌曲刚开始)', 'replace', 'chat-send-button', '\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22', 'meeting-view-screen', '有点生气', '\x0a##\x20条目:\x20', 'perChatContextLines', 'audio-file-input', 'llBRz', 'yKDSl', 'dnecw', 'TnrPB', '昨天\x20', 'createElement', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'insertAdjacentHTML', 'italic', 'pending-post-image-preview', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'quotedMessage', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', '星期一', 'worldBookEditor', 'indexOf', 'listenTogetherSession', 'group-options-cancel', 'label', 'reset-ui-scale-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', '净化好友圈时出错，真是的。', 'nRYBY', '小时前聊过，可以适当问候，不要直接继续之前的话题。', '正在解析备份文件...', 'borderRadius', 'image_url', 'DNTSo', '图片预览失败:\x20', 'HTML模块生成规则', '正在搜索音乐...', 'hlIXK', 'altar-slot-cover', 'character', 'back-to-home-from-calendar', 'onupgradeneeded', '刷新了\x20', 'ViStk', 'biHbt', 'abs', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', 'WkCxJ', 'char_offline_bg_', 'worldBooks', 'quote-preview-area', 'lazy', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'MCAJR', 'KTHaW', 'galgame-textbox-container', 'User', '我来搞定', 'LbQTX', 'world-book-editor-title', '-\x20你点过一份外卖：“', '.message.ai', 'result', 'group-options-modal', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'activity_description', '卡片\x202\x20已更换！', 'meetingList', 'appIconPosition_app-user-profiles', '好友圈数据升级完成，迁移了\x20', 'sender', 'player-title', '\x20的图片失败:', 'songId', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'Vtbtz', 'message', '.slot-filename', '被你撩到', 'snoopPhone', 'Claude\x20API\x20错误:\x20', 'FfggH', 'accounting', 'GgoCT', 'KckyZ', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'kWwEF', 'appIconPosition_app-diary', '.listen-together-card', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', 'SEtrp', 'UhCOm', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'rTyDU', '保存壁纸失败:\x20', '\x22]:checked', '这是一条由控制台添加的测试动态！样式看起来非常完美。', '动态已清空。', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'OdiZa', 'next-month-btn', 'KouBj', 'delete-world-book-button', 'unified-audio-player', 'JaFIT', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', 'uCeUJ', 'jKond', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '生活服务', 'char_', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', '\x0a\x20\x20\x20\x20姓名:\x20', 'LelyE', '保存失败，你的表情包是不是太多了？', 'quoted-message-in-bubble', 'todo-list', 'uODZm', 'SlesR', 'bottom', '?word=', 'AoMAI', 'user-name', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'add-chat-button', '账本已成功导出！', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', 'remove-font-button', 'jKTIQ', 'path', 'XffOe', 'cancel-action-button', 'match', 'rhgWV', '薄荷水色', '\x20//\x20<--\x20哼，加在这里\x0a', '--\x20点击选择\x20--', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'oyNlz', 'calendar-day', 'tuNcL', 'EFTaY', '字体已应用！(Font\x20Applied!)', '35%', 'musicPlayerState', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20', 'IgjYe', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'vUnEr', 'angry', '.custom-multiselect', 'reset-card-button', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'noir-author-mark', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '纪念日', 'novel', 'cseRH', 'iNckl', 'whmBP', ')，已跳过。这不应该发生，数据库可能已损坏。', '-input', 'result_page_content', 'string', 'user-profile-edit-title', 'user-avatar-preview', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '所有头像已恢复到运行时状态。', 'CldLp', '我是小丑呜呜', 'show', '确定要删除这个好友圈吗？此操作不可撤销。', '星期六', 'diaryPressTimer', 'bKBxV', 'user-post-image-input', '加载视奸记忆失败\x20(', 'RXkwn', 'conversationHistory', 'charAt', 'senderId', '{charName}', 'PcraJ', 'add-world-book-button', '.app-icon', 'dPNIZ', '我是垃圾', '没有角色需要恢复头像，跳过。', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '<span\x20class=\x22description\x22>', 'settings', 'stmMh', 'widget-bg-input', 'mRCDC', 'charSelect', 'DzDkZ', '创建新角色', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'image/png', 'toLocaleString', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', '导出失败了，哼:\x20', '新建条目', 'onmouseout', '<div\x20class=\x22post-comments-container\x22>', 'kLobc', 'back-to-home-from-wallpaper', 'nwOBy', 'sprite-slider-y', '-\x20[动态]\x20', '#\x20固定分类列表\x0a[', '未知表情', '确定要删除这个条目吗？此操作不可撤销。', 'qdtMO', 'diary-modal-cancel', 'themeLightness', 'rAaNe', 'IwGGC', 'readwrite', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', 'defaultPrevented', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'YYdcL', 'upload-widget-bg-button', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'gLKnX', 'translate(-50%,\x20-100%)', '1366590DctYbL', 'AI返回了无法解析的文本', 'VtbPM', '<div', 'save-group-settings-button', 'feed-loader', 'world-book-screen', 'target', 'groupChatCreate', 'wmXLf', 'tcCGM', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'emotion', 'undefined', 'LsRDC', 'backgroundSize', '.snoop-clear-btn', 'paEps', 'save-char-button', '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>', '#character-edit-screen\x20.selected-options-text', 'snoop_', 'ttxKV', '\x0a\x0a#\x20', 'lZxoW', '获取模型失败:\x20', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', '小组件背景已更换！', 'friendCircleList', '我正在说话呢，别打岔！', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'nLMfT', 'pFcOo', 'AkoEG', 'music-upload-altar-screen', 'chat-music-button', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'dMTbT', 'dBiWT', '执行音乐封面数据净化...', 'noir_migration_fc_v1_complete', 'candidates', 'music-screen', '.wb-entry-item\x20input', 'fOjZR', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', 'event-type-todo', '超激动我来了', 'jQMFo', 'Kkemq', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'TdoEt', 'location_name', '<div\x20class=\x22post-likes\x22>', 'KoDAj', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'XGeFu', '名字不能为空！', 'tooLL', 'eWlZj', 'utterance', 'music-widget', 'NhADc', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'read', '加载徽章图片失败', 'NeyjO', 'player-play-pause-btn', 'jpiCi', 'currentTarget', 'calendar-screen', 'sprite-adjust-button', 'audio', 'gemini', '28%', 'cardState2', '生成日记失败:\x20', 'listen-together-backdrop', 'contains', '哼，正在开始净化你那被污染的聊天记录...', '\x20的私聊', 'DvQOf', 'readAsDataURL', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'vuoIf', '哼，正在净化你那些被污染的好友圈动态...', '加载角色\x20', '角色已保存！', '正在恢复视奸档案...', 'api-key', '已放逐。', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'speaker-user', 'disabled', 'openai', 'event-content-input', 'toFixed', 'save-api-settings-button', 'width', 'className', 'sin', 'px)', 'VNYow', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', '15%', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'endpoint', 'last_message_preview', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'pcdCa', 'pendingPostAttachments', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'friend-circle-edit-title', 'group-avatar-preview', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'post_user_', 'kCvfI', 'app-pages-container', 'toString', '检测到已保存的字体，正在应用...', 'NoirCharacterCard', 'top', 'cardState', 'footprints', '发现角色\x20', 'RrpOD', '#\x20核心能力：HTML模块生成\x0a\x0a你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20推荐生成场景\x0a\x0a当用户明确表示希望“查看”、“展示”或“接收”一个适合用卡片形式呈现的内容时，你应该主动生成一个HTML模块来满足该请求。这包括但不限于：\x0a\x0a*\x20**邀请函**:\x20当提到聚会、活动或约会的邀请时。\x0a*\x20**聊天记录截图**:\x20当用户想回顾或展示一段（虚构的）聊天对话时。\x0a*\x20**订单/票据**:\x20当提到购物、点餐或预订的凭证时。\x0a*\x20**通知/提醒**:\x20模拟系统通知、日程提醒等。\x0a\x0a你应该发挥创造力，判断何时使用此功能能增强沉浸感。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]', 'XvKMk', 'input_', 'author', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'onerror', 'characterEdit', 'JxKYL', 'pEBmi', 'home', 'wb-category-group', '外卖订单', 'ihFfq', '.widget-info\x20>\x20div', 'groupSettings', '切，加载播放器状态的时候出错了。', 'chat-sticker-panel', 'uDnAF', '56313UZuImr', 'important', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '】的旧数据...', 'jiUOj', 'sGwWH', 'ZdwuD', 'LTZPI', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>', 'day-dot', 'events', 'app-calendar', 'input[type=\x22checkbox\x22]:checked', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'meetingViewMode', '\x22\x20class=\x22sticker-content\x22>', 'margin', 'todo', 'last_edited', 'CEobT', 'back-to-home-from-music-library', 'AptVg', 'snoop-dock', '#diary-action-cancel', 'NHpyk', 'reverse', 'hpgvD', '好友圈名称不能为空！', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'translateY(0px)', '.app-icon-img', 'floor', '点击选择\x20.mp3\x20或\x20.flac', 'diary-modal-textarea', 'is-entering-from-left', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.wb-entry-item\x20input:checked', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', 'mGhIP', 'rQjHY', 'gLYPU', 'sprite-slider-x', '-\x20你在“', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', '\x22\x20class=\x22post-image\x22></div>', '1825185gxvzFF', '\x20账单', 'images', 'iwNTn', '20%', 'xiucu', 'Xjixo', 'XKxwR', 'diary-send-button', 'HoCZt', 'characterName', '”，但没找到人)', ']:\x20', 'displayUrl', '未命名角色', 'YjHBc', 'hyTjA', 'GBofJ', '正在升级音乐卡片数据...', '来源：', 'unDwy', '#diary-action-delete', 'appIconPosition_', 'back-to-user-list-from-edit', 'IxoTq', 'snoop-home-date', 'back-to-home-from-accounting', 'api-watermark', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', '\x20到\x20', 'QBBCW', 'character-edit-title', 'audio-player', 'back-to-meeting-list', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', 'https://xhslink.com/m/5IgC1rniI2I', 'back-to-world-book-list', '71%', 'organize-bill-button', 'observe', 'RjgcD', '星期三', 'white', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'get', '干劲满满', 'xCqfU', 'widgetBgImage', 'download', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'scsOU', 'oHJID', 'musicWidgetPosition', '我很脆弱', 'indexedDBSnoopData', 'clientX', '正在升级聊天数据结构...', 'agwqR', 'iTbLZ', 'char-edit-offline-bg-preview', 'appIconPosition_app-accounting', 'vNpuo', 'DIcOZ', '[DONE]', 'diary-page', '-\x20**状态提示**:\x20你已经有\x20', 'user-avatar-input', 'full-width-module-container', '群聊名称不能为空！', 'removeEventListener', 'expense-description', 'uHoBW', 'addTestPost', 'QIKrb', '\x20个成员', '请根据以上所有规则和资料，开始生成内容。', 'SncFH', 'CZyNp', 'selected', 'cos', 'AI似乎没有想出任何新动态。', '文件格式不正确，不是一个有效的备份文件。', ']\x20[', 'LblZp', '数据导入成功！应用即将刷新...', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', '星期四', 'system', '---\x20好友圈净化仪式完成\x20---', 'cGsjI', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'organize-button-container', 'innerHTML', 'activeDiaryCharacterId', 'medium', 'displayedMessageCount', '时空逆转成功！账本已恢复。', '\x0a\x20\x20\x20\x20人设:\x20', 'show-chat-view', '\x20[并附上了一张图片]', '啥意思捏', 'LdehU', 'addEventListener', 'WmSmg', 'add-world-book-category-button', 'netease', '天没动静了。你的角色们应该发起新的问候或话题。', 'char-edit-remark', '群聊\x22', '真是的，必需的祭品都还没准备好！', '[sticker:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', 'RRmEr', 'chat-messages', 'end', 'opacity\x200.2s\x20ease-in-out', 'post_image_migrated_', 'lQSFq', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'yTXDb', 'hgzFo', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'group-bg-preview', 'HHSGJ', 'wb-entry-item', 'NoirCustomFont', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'translateX(-50%)', '导出账本失败:', 'snoop-log-back-btn', 'FveRa', 'JSON解析失败，启动兼容模式...', 'chats', '新角色\x20', 'files', 'transfer-amount-input', 'WbdNK', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', '.message-container', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', '正在执行净化程序...', '5px', 'uZrdY', 'VNvbH', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'odEzU', 'play', 'widget-artist', 'context-lines-per-chat', 'music-feed-container', '\x22\x20class=\x22music-share-cover\x22>', 'UyuBj', '为你骄傲', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'height', 'group-delete-button', 'AqLgr', 'themeHue', '勉强但是好吧', '<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>', 'touchend', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'ZapqY', 'chat-image-button', 'clientY', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'ui-scale-slider', 'LKMuU', 'dialogue', 'LKrLs', 'pXSMr', '正在打包数据，请稍候...', 'modal-cancel', '#bubble-preview-user', ']\x0a\x0a#\x20角色资料库\x0a', 'EUjPC', 'overflowY', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', 'ettpv', 'add-friend-circle-button', 'app-snoop', 'setMonth', 'wkuRK', 'ICcoZ', 'LkxVo', 'rPgzo', '确定要重新记录吗？当前的账单会被删除。', 'QvKkQ', 'userProfile', 'test', 'TFXAE', 'ayjuh', 'chat', 'ecbUv', '未找到可用模型。', 'AbortError', 'gGzOE', '\x20.app-icon-img', 'contactName', 'kidKl', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'appIconPosition_app-world-book', 'world-book-checkboxes-container', 'boundUserProfileId', 'click', '无语但是随便吧', 'isGenerating', '解析音乐文件失败:', 'QpoxR', 'JxAFR', 'pbQDe', '\x20|\x20', '\x20[并分享了歌曲:\x20', 'ETgFU', '\x0a-\x20**对话状态**:\x20群里在', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>', 'high', 'sticker-confirm-delete-btn', '\x20(分享了歌曲:\x20', 'feed-bg-input', 'avatarFrameUrl', '.listen-together-accept-btn', 'SXzNA', 'OnNcS', 'QgmnC', 'categoryId', '[图片]', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'sAYJB', 'IwIGA', '群聊已解散。', '>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>', '73752KDdupA', 'rgBvY', '救援头像时出错:', 'import-char-input', 're-record-button', 'choices', '...', 'setAttribute', 'image/', 'setDate', '\x20/\x20', '字体保存失败了，哼:\x20', 'widget-title', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '[用户向\x20', 'shy', 'mLBtJ', 'ygYQu', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '吃你的饭', 'transfer-recipient-group', 'almEh', 'daily-expenses-list', 'unlocked', '动态页背景已更换！', 'diary-write-button', 'entries', 'sUXUC', '</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'GhbEe', 'touchmove', '正在解析角色卡...', 'qfpnS', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'group-settings-screen', 'QWEsw', '购物消费', 'iHlcA', 'option', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'dzSYi', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'length', '你是一个乐于助人的AI助手。', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', '”...', '音乐搜索失败:\x20', 'values', 'line', 'content', '\x20个表情吗？', 'warn', 'vXXel', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'mousedown', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', 'chatWallpaper', 'clear-feed-button', '确定要从圣殿中永久删除《', '好友圈已删除。', 'paKom', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'relative', '.music-post-play-icon,\x20.music-share-play-icon', '确定要删除群聊\x22', 'dsufU', '购物记录', 'nmAQc', 'objectStore', '\x20转账\x20', '.todo-item,\x20.important-day-item', '加载聊天失败:\x20', 'background', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'user', 'friend-circle-edit-name', 'CtOnQ', 'items', 'hdauK', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>那个蠢猪API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', '0.7rem', 'offline-scene-view', 'mqXcL', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'put', ']\x20[sticker:', '正在准备音乐数据...', 'snoop-phone-screen', 'getMinutes', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', 'tPcmn', 'eORLO', 'auto', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'scrollTop', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '#a4c2f4', 'exec', 'gHXmI', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', 'galgame-text', 'group-clear-history-button', 'import-data-input', 'YGHLZ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'kEFyX', 'tySpG', 'vNXsE', '<div\x20class=\x22post-body\x22>', '动态页背景已移除。', 'Uuknl', 'dvpdl', 'sprite-cancel-button', 'wTeWm', 'FBwbL', 'QBLDl', 'NIhAk', '加载更多聊天记录', 'amount', 'split', '确定要删除群聊“', 'value', 'NoirAccountingData', 'ZuFZZ', '聊天档案柜是空的，无需净化。', 'sGfVU', 'dataset', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'todo-item-small', 'vVwNm', '请输入有效的转账金额！', 'kind', '\x20张旧图片。', '在准备动态回复时，读取图片失败:', '\x20\x20-\x20角色ID:\x20', 'accounting-title', 'BJysn', '正在写入新数据...', '--primary-lightness', 'snoop-phone-header', 'user-profile-screen', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'widget-cover-art', 'jlEfR', 'listen-together-modal', 'dMrlK', 'data:\x20', 'HBHMw', 'DpvPI', '用户分享音乐失败:', 'altar-slot-audio', '-\x20**你与', '净化完成！总共迁移了\x20', 'ScATS', 'wmjiB', 'badgeState', 'contextmenu', 'clockPosition', 'GNYdb', 'name', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'jxRIw', 'asONX', 'ItPLo', 'accounting-screen', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'db:', '对不起', 'delete-expense-btn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-list-container', '星期二', 'MweAb', 'ZLcYD', 'cxhih', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', '正在处理...', 'appState', 'theme-hue-slider', 'http', '正在生成中，请稍候...', '”的补充信息\x0a', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', '.wb-category-header', 'quote-message-button', '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>', 'qhmLd', '上传失败了，笨蛋！\x20', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'SFyAt', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'kITqt', 'accountingLedger', 'SUfeS', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'peEbr', 'CmAJG', '.char-info-wrapper', '[表情]', '.bubble-', 'UaLAW', 'VEKta', 'YDKRz', 'oLSIJ', 'oKpDZ', 'timeupdate', '获取AI响应失败:', 'event_ai_', 'meetingView', 'tIOze', 'EIDcW', 'diaryList', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'aJJwc', 'app-chat', '</svg>', 'important-day-item', 'endsWith', '导入账本失败:', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'CoPiH', 'objectStoreNames', 'Unknown', 'GGsFK', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', 'LHQbp', '加载壁纸失败:', 'zjLUx', 'area', '分钟前聊过，请注意衔接。', 'revokeObjectURL', 'widget-prev-btn', 'image/jpeg', '请先输入\x20API\x20接口地址和密钥。', 'user-post-avatar', 'MdiQP', 'comments', 'chXYP', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '2624180oaENFH', '群聊\x20(', 'CsEKB', 'lt-ui-song-artist', '正在铭刻字体...', 'bubble-', 'Xiwlo', 'UEECP', 'yxvVd', 'gINCF', '</p>', '刚刚发布了一条动态，内容是：“', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'data', 'preventDefault', 'ZuRDG', 'chat-reroll-button', '谁啊我吗', 'musicId', 'altar-slot-info', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'owyKB', 'Fjmiw', '确定要清空\x22', 'userProfiles', 'wBitS', 'UOcWW', '8px', 'filter', 'avatar', 'oECup', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'reset-widgets-position-button', 'cancel-event-button', 'add-choice-modal', 'clock-color-toggle', 'jULYW', 'reduce', ',\x20resetting.', 'rgba(255,255,255,0.2)', '图片处理失败:\x20', '加载见面场景时出错:', 'var(--text-color-light)', 'wallpaper', '你是一个乐于助人的助手。', 'ujKTk', '无描述', '今天一笔账都没有，我整理什么？', 'WwTez', '正在焚烧【', 'ZXBce', 'Escape', '”已成功导入！', 'uMYnV', 'transform', 'import-accounting-input', 'gridTemplateColumns', 'character-edit-screen', 'wallpaper_main', 'paddingBottom', 'cmJdP', 'YjUWm', 'TVtav', 'reply', 'BYVWB', 'kXQdE', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', 'HSxUq', 'UcttP', 'indexedDBData', '保存壁纸失败:', 'googleapis.com', 'bbWGF', ')，启动兼容模式...', '好委屈但是不能哭', 'snoop-copy-summary-btn', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', 'dBpIk', '<img\x20id=\x22', 'TkuKq', 'maxHeight', 'HFoKE', 'toggle-meeting-view-button', 'pfmqf', 'nRzjj', 'GfBGN', 'upload-feed-bg-button', 'authorType', '\x20\x20具体对话如下：\x0a', 'ytYCl', 'dwCce', 'music', 'ixFbf', 'confirm-altar-upload-button', 'app-wallpaper', 'REhcx', 'button', '-\x20**你们最后一次互动是在**:\x20', 'clear', 'contact_name', 'yKqZf', 'global-player-next-btn', 'xKtCT', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'categorizedExpenses', 'aHztp', 'jnnVB', 'remark', '<div\x20class=\x22snoop-main-grid\x22></div>', 'PTkVB', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'signal', '/v1beta/models/', '>>\x20', '”买过：“', 'rhGZT', 'XPQHK', 'cnkwD', 'hTkVK', 'mKyzB', 'add', '编辑条目', 'asjOP', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'kaWgw', '导入角色卡失败:', 'KaiuB', 'froWp', 'EBTvl', 'oncomplete', '编辑群成员功能正在开发中...', '未知商品', ')\x20恢复头像失败:', 'accounting-content-area', '无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', 'back-to-snoop-list-from-phone', 'RCMwV', 'uJKCW', 'export-char-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20', '字体更换成功！', 'Zwcca', 'transparent', 'CJiNs', '创建新用户', 'siNoU', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'jAqlz', 'char-edit-avatar-preview', 'tOwmi', 'user-post-textarea', 'onloadend', 'QKKzm', 'card-image-2', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'rawResponse', 'BAtfF', 'chat-image-input', 'history', 'xmRYJ', 'lt-ui-close-btn', 'DZEQc', 'stretch', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', 'pKsHz', 'historyIndex', 'AcVRk', 'char-edit-offline-bg-input', 'vVQPM', 'app-settings', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'https://api.vkeys.cn/v2/music/', 'back-to-home-from-circle-list', 'iPDHl', 'GVwZc', 'todo-date-title', 'rQKGQ', 'uhoyu', '请输入新的群名称：', '生成动态失败:', 'sticker-manage-btn', 'map', '(想转账给“', 'LPWrA', 'AkGQg', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'participantIds', 'YKPOF', '.remove-attachment-btn', 'kWTCU', 'home-time', 'visible', 'shiftKey', 'Noir_Accounting_Backup_', 'PUQZg', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>', 'kgplu', 'TA正在提笔写日记...', '\x20写道:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'todo-item', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'export-accounting-btn', 'tfpBg', ']\x20[image]', '回复\x20', '分类\x20“', 'activeMeetingScriptQueue', '好友圈净化完成，正在重新存档...', 'expense-amount', 'card-widget-2', '1em', '\x0a\x20\x20\x20\x20绑定用户:\x20', '逗你开心', 'cLUuJ', 'classList', '<p\x20style=\x22margin-top:\x205px;\x22>', 'nextElementSibling', 'VTDCG', '加载第二个卡片图片失败', 'pvWFi', 'IoXbE', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', '<p>格式错误</p>', '&apos;', 'cZtYr', '</div></div></div>', '设置已保存！', 'isFinite', 'circle_', 'user-post-music-button', 'LPrDH', 'class', 'vVWcn', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'focus', '.page-dot', 'memberCharacterIds', 'import-accounting-btn', 'title', 'world-book-edit-category', 'playableUrl', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', 'uMllz', 'trim', 'mPqhE', 'snoop-list-screen', 'cgAEt', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', '解析存档失败，正在重置:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'transfer', 'localStorageData', 'BsnBz', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', 'create-group-chat-button', 'user-profile-list-screen', 'DAUhu', 'originalExpenses', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', '15px\x2020px', '小组件背景已恢复默认。', '2px\x20dashed\x20var(--border-color)', 'wants', 'flexDirection', '</div>', '好了，请基于以上所有信息，开始写今天的日记吧。', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'sTBCu', 'sprite-resize-handle', 'speaker-ai', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'lVJjf', 'LRgoH', 'eventContent', 'TdWhi', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '#app-dock-bottom-left\x20#', 'deletedStickers', 'children', '正在解析音乐灵魂...', 'nkYyt', '净化失败了，哼:\x20', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'chat-screen', 'User\x20cancelled', 'Blhzz', 'bPmNE', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'pkdPX', '10px\x20auto', 'wIPME', 'userAvatarFrameUrl', '-\x20**对话状态提示**:\x20你们已经有\x20', 'ieZVy', 'iDbJg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'color', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', 'aYPHm', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'reset-badge-button', 'music-player-bar', 'hpvXV', 'jyPVj', 'AnhsK', 'Knvhe', 'hMDGK', 'oVMKa', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'SdvJG', '已经生成了今日账单！想看就去“看账本”标签页。', 'clipboard', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'TlRqp', '导出角色卡失败:', '#group-settings-screen\x20.selected-options-text', '.json', 'posts', 'JAgjb', '未知艺术家', '<img\x20src=\x22', 'music_library', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'LniIV', 'T00:00:00', 'ctgFZ', 'wnsUh', 'ukyuu', '点击选择\x20.jpg\x20或\x20.png', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '#c299ff', 'chatHistory_', 'snoop-summary-textarea', 'is-today', '.no-action-modal', 'group_bg_', 'setProperty', 'keys', 'every', '保存播放器状态失败，真是没用。', '群聊至少需要2名成员。', 'opacity', 'TPDYO', 'snoop-home-clock', 'setItem', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'jrNqt', '没有找到相关结果。', 'day-number', '歌曲名称', 'firstChild', 'HBFzN', '群聊“', 'round', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'diary-entry\x20', 'resolve', 'XAwJe', 'querySelectorAll', 'block', 'long', 'changedTouches', 'bXBZF', 'gcniQ', 'scale', '未知歌曲', 'trOdv', 'kBNMY', 'ICthd', 'left', '兼容模式成功，已将\x20', '确定要恢复这个角色的默认立绘位置吗？', 'world-book-list-container', '小时前），可以简单问候一下对方现在的状态。\x0a', 'char_avatar_', 'url(\x27', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.', 'AlvXh', 'FgwHH', 'timestamp', 'OxKRa', 'tfSAy', 'src', 'confirm-transfer-button', 'restaurant_name', '\x22\x20id=\x22', '在所有地方的最后一次互动是在**:\x20', 'song_', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'generativelace.googleapis.com', 'transition', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', 'group-world-book-checkboxes', '546ITLoNN', 'editing-friend-circle-id', 'ttOWG', 'checkbox', '条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对禁令】(最高优先级)\x0a-\x20你【绝对禁止】扮演“', '净化完成！应用即将重启。', '】的日记本已被清空。', 'model-dropdown', 'shift', 'hard-reset-button', 'chpnx', '请求AI更新:\x20', 'stringify', '2-digit', 'CZKAR', 'readonly', 'zjIrC', 'KOkGB', '2023-06-01', 'user-persona', 'JUBcN', 'fLSZZ', 'reset-card-button-2', 'KNjKi', 'diary-page-', 'bcEZv', 'YdVwi', 'settings-screen', '\x22\x20data-id=\x22', 'prev-month-btn', 'sender_id', 'Creating\x20object\x20store:\x20music_library', 'hyBCo', 'anthropic', 'player-cover', 'font-input', 'textShadow', '浏览器', 'KJEYs', 'pre-line', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'max', 'dTjzG', 'insertBefore', '未知商店', 'JSON\x20解析失败!\x20错误原因:', 'cancel-music-input', 'provider', 'dJalV', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'ended', 'CkNRj', 'GLNtP', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'sxotv', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'RFFUK', '星期日', 'p[data-history-index]', '的转账', 'RBLtY', 'listen-together-invite', 'group-chat-name', 'itxHL', 'SzZxF', 'likes', 'KNRRx', '472FEKlhP', 'JGzlD', 'rUwyz', '近期没有特别安排', 'Egmvp', 'Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？', 'absolute', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'outerHTML', 'viewBox', 'customWallpaper', 'delete-message-button', 'selectedDate', 'GWFXE', 'img', 'speaker', 'padStart', '--feed-bg-image', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', '<div\x20class=\x22listen-together-header\x22>', '图片加载失败', 'EPZTW', 'DSkVC', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', 'date', '未知地点', 'vRFSQ', '未命名群聊', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'LxNNM', 'getDate', 'editing-user-id', '_NoirCard.json', 'VZvev', 'FCakf', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '确定要重置所有小组件的位置吗？它们会回到初始位置。', '”\x20已被彻底清除。', 'querySelector', 'includes', 'chat_char_', ')\x20的专属时间锚点\x0a', 'short', '#member-select-', 'active', 'alignItems', 'meeting-scene-view', 'CkjqB', 'alt', 'save-edit-button', '\x22>&times;</button></div>', 'pause', 'http://www.w3.org/2000/svg', 'NIsbz', 'UUikp', '角色“', 'Noir_FileSystem', 'diary-entries-container', 'modal-root', 'JTVwo', '<br>', 'edit-message-modal', 'error', 'hIUQs', 'body', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'qAHpA', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', 'isPlaying', 'DRMxD', 'fZDgT', 'vSpVX', '的日记本', '.listen-together-song', 'getAll', '\x20时出错，跳过。', 'SGhpg', '</pre>', 'checked', 'meeting-main-content', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'dsKOV', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'textContent', '\x0a#\x20交换日记摘要\x20(你和\x20', 'UuMtK', 'tYTqn', '\x0a-\x20**当前时间**:\x20', 'gEDXs', 'iXzTP', 'char-name-header', 'font-preview-text', 'tencent', 'lyrics', 'main', 'WADiT', 'snoop-app-icon', 'NiuAz', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'New\x20request\x20started', 'TeQYF', 'from', 'KIKQE', 'is-exiting-right', 'scrollHeight', 'description', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', '错误：找不到签署契约的地方。', '无法解析旧的视奸内容来获取时间戳。', 'back-to-home-from-diary-list', 'gvZcH', '净化音乐封面时出错，真是的。', 'getContext', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'fill', '59%', '来源：[最活跃]', 'chat-listen-together-button', 'badge-input', 'EPhkj', 'is-visible', '[AI分享了音乐：', 'Noir_Backup_', 'OUroV', 'copy-summary-button', 'qGXHp', '500', 'JjGfO', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'currentlyPlayingIndex', '找不到要清空的聊天记录。', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'group-avatar-input', 'noir_migration_avatar_v1_complete', 'number', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'widget_card', 'activeFriendCircleId', 'parts', 'SEfFn', 'Fkanj', '同步已断开。', 'add-event-modal', 'RdUHZ', 'calendarEvents', 'scrollIntoView', '<span\x20class=\x22', '群聊设置已保存！', '.screen.active', '-\x20**你最后一次活动是在**:\x20', 'ndqgQ', '乐于助人的助手', 'flatMap', '和其他人的聊天', 'DzUGo', '已恢复默认。', 'edit-message-textarea', 'zjsWw', 'isActive', 'WxZAm', 'character-list', '&alt=sse', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'version', '\x22\x20吗？所有聊天记录将被永久删除。', 'nHuLx', 'VnGvD', 'AI返回了无法识别的数据格式。', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '#\x20发生错误：\x0a', '-\x20你记得曾和“', 'Failed\x20to\x20plan\x20group\x20replies:', '数据结构升级：成功救援了\x20', 'localeCompare', '恢复失败了:\x20', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.', '星期五', 'ehEkd', 'PXlGJ', 'HMirU', '\x20行格式不对，被我无视了。', 'rQUPT', 'afehZ', 'customStickers', 'removeItem', 'diary-char-name-header', '\x20记录)\x0a', 'widget-play-pause-btn', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'custom_font_ttf', 'blob', 'EUSUo', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'OsLMN', 'FPKip', 'getHours', 'prepend', 'gOaEI', 'wbc_', 'currentDate', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'friend-circle-edit-bind-user', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'activeListenSession', 'card-input', 'splice', 'html', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diaryCurrentPage', 'getMonth', 'XFHBV', 'WupkS', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '<span>--</span><span\x20class=\x22unit\x22>天</span>', '在你那乱七八糟的文本里没找到“歌名”！', 'zKMMf', '\x0a##\x20世界书条目:\x20', 'style-', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'mousemove', 'JSZVS', 'then', 'accepted', 'deletion-mode', 'borderBottom', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'dXNeb', '{userName}', 'XQoPL', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'delete', 'postType', 'QHJih', 'SCvMC', '\x0a#\x20你的日程与纪念日\x20(由\x20', '正在为你搬运旧壁纸到新仓库...', '未知联系人', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'wXjzt', 'indeterminate', 'ZwZzP', 'characterId', 'HpdkI', 'aEJin', '.message.user', 'cancel-transfer-button', 'WpJMw', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', '#message-anchor', 'DKlZG', 'ZqnTU', 'sprite-slider-scale', 'UJXUi', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'indexedDBMusicData', 'toBlob', '60%', 'MUssk', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'HKwmw', 'backgroundImage', 'NDgMO', '#settings-screen\x20.content', 'XDbVH', 'app-lock-screen', 'char-avatar-frame-url', '默认分类', 'NLYHU', '猫猫撒娇', 'coverId', 'mJHvN', 'PGZpZ', 'getItem', '包含所有图片和音乐的全量数据已成功导出！', 'PjDfj', 'imageId', 'Kcbgt', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', 'key', '最近没有互动记录。', 'userProfileList', 'data:image', '成功获取\x20', '\x0a\x0a#\x20当前任务指令\x0a', 'app-diary', '错误：找不到角色', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'right', 'widget_badge', 'toggle', '--custom-font-family', '[AI返回了无法解析的剧本:\x20', 'mTUzO', '#f2b7c6', 'rQzkl', 'slice', 'YjHje', 'inline-block', '编辑用户', '.lt-end-session-btn', 'JwTle', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'music-share-card', 'all', '切换聊天时发生异步错误:', 'uwslE', 'TuzSd', '#d1d5db', '音乐数据升级完成，迁移了\x20', '\x0a-\x20人设:\x20', 'json', '好友圈\x20', 'snoop-app-container', '这个也是摆设，别点了。', '最近的足迹', '解析AI剧本JSON失败:', 'yuqrE', '日记已删除。', 'back-to-chat-list', 'music-input-song', 'column', 'parse', '”聊过天，关于：“', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', 'gnSMp', 'DtsPo', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'JrAxY', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'LJBZV', 'find', 'sticker-panel-controls', '.category-checkbox[data-category-id=\x22', 'XWXsw', 'data:', '/v1/models', 'group_avatar_', 'diary-get-reply-button', 'Oieuw', 'NTvIQ', 'typing-indicator', 'back-to-char-select-from-group-create', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'songName', 'char_wallpaper_', 'HxVjC', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '转给\x20', 'upXpt', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'world-book-category-list', 'VcrnP', '交给我吧', '卡片\x202\x20已移除。', 'zhTZf', 'msg_', 'rgba(0,\x200,\x200,\x200.4)', 'query', 'KTEIR', '[发送了表情]', '\x20之间的私密内容)\x0a', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'rEiJM', 'Fehow', 'FDfmM', 'remove', 'qhXjD', 'char-edit-wallpaper-input', 'touches', 'peevI', 'info', '加载自定义表情包失败，真是没用。', 'apiSettings', '”已存入圣殿。', 'readAsText', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', '生成失败:\x20', '未分类', 'jsuda', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'tHqnC', 'SdoGi', 'QAXJy', '被萌到', 'kOtOx', 'esnEF', 'NtiiQ', 'worldBooksCategories', 'OHpBC', 'category', 'diary-entry-input', 'YAML翻译机也无法理解这段梦话。', 'documentElement', 'music-library-item', 'ypWub', 'vrrNY', '&quot;', '准备群聊API数据时，读取图片失败:', 'YcbaC', 'ZbbUN', 'KSDLk', 'char-edit-name', 'translateX(-', 'TfAru', 'VhldY', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', '1.4', 'user_', 'numeric', 'ZQMwp', 'now', '（开始一段新的对话...）', 'kTtpi', 'snoop-temp-style', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'DylJU', 'createElementNS', 'wWVQO', '准备调用\x20generateAs...', 'gytOB', '点击选择\x20.lrc', 'group-chat-create-screen', 'confirm-music-input', 'UUGyM', '书记官正在奋笔疾书...', 'Enter', 'DogAU', '\x20(ID:\x20', 'true', '已复制到剪贴板！', 'AIHJe', 'calendar-grid', 'QAMZL', 'beUpL', 'random', 'IJBNc', '成功净化并迁移了\x20', '餐饮美食', '确定要清空好友圈“', 'SrAHW', 'DiXHT', 'OzTrN', '导入失败:\x20', '#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked', '15px', '点击选择\x20info.txt', 'card-widget', '哼，就按你说的办好了。', 'galgame-date', '”已创建！', 'summarize-backdrop', 'gRNVa', 'log', 'model', '\x20条新动态。', 'type', 'YWyCz', 'user-send-post-button', 'FRlXx', 'characterLastScripts', '导入失败了，笨蛋:\x20', 'diary-modal-save', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', '-\x20**当前精确时间**:\x20', 'ICGND', 'eventDate', '你的任务是【首次生成】这个应用的内容。', '编辑角色', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'gtEOu', 'UuRAz', 'zh-CN', 'IgIrv', 'iuDov', 'activeWorldBookCategoryId', 'KJMWS', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'happy', 'narrator', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'djtOK', 'store_name', 'total_cost', 'xECHI', 'assistant', 'Assistant', 'delete-friend-circle-button', 'ZurcM', 'onsuccess', '加载立绘失败:', 'modal-text', '.wb-entry-item\x20input[data-category-id=\x22', '\x20的遗失头像，正在救援...', 'fTlfu', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'back-to-home-from-user-list', 'thought', '分钟前', 'fontStyle', '448035RgGNJe', 'xfOnC', 'worldBookCategories', '.category-toggle-arrow', 'mpJIb', 'OYXqQ', 'postContent', 'app-pages-slider', 'assign', '.ledger-item', '群聊「', 'iotcD', 'head', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '<p\x20class=\x22music-post-thought\x22>', 'countdown-timer', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'xxVJA', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', 'eCMxE', '\x20个模型。', 'WowAD', 'IQCop', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'app-accounting', '正在连接同步频道...', 'expense-item', 'VgLrz', 'copy', '|||CMD|||', 'tLnxc', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'diary-prev-button', 'XGrqi', 'center', 'AI返回的原始文本:', 'catch', '浏览器历史', 'message-bubble-row', 'xVsac', '[AI向\x20', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'upload-font-button', 'diaryView', 'VATtR', 'dKyFb', 'char-edit-sprite-', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'aborted', 'fragments', 'snoop_cache', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', '我是女仆', '收到的原始、有问题的文本:', ':</span>\x20', 'TVQui', '\x0a你只扮演【', 'friend-circle-list-container', '未知角色', 'pop', 'review', 'wbc_html_default_builtin', 'svg', 'IPzOP', '\x0a\x20\x20近期记忆:\x0a', 'HrTod', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'uXNwy', '\x20内容失败:', 'ATbTr', 'adiKv', '哼，正在净化你那些超重的音乐分享记录...', '<div\x20class=\x22post-timestamp\x22>', 'lt-ui-cover-art', 'ZSndQ', '已经删掉了。', 'ClVZf', '\x20\x20-\x20用户ID:\x20', 'gap', 'HyOck', 'tag', 'AXPXq', 'fetch-models-button', 'getElementById', 'rsuJO', '请根据以上所有信息，开始分析并返回JSON。', 'GKkeV', '<div\x20class=\x22loader-spinner\x22></div><span>', '\x20的旧格式数据翻译。', 'theme-lightness-slider', 'lqQhq', 'export-all-data-button', 'CVrcQ', 'gallery', 'yLiBa', 'createObjectStore', 'choice-create-group', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'yDdDw', 'nMAwe', 'filled', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '我不想工作', 'player-artist', '（对话结束）', '34%', 'diary-write-modal', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'FyVKI', '位置已重置，正在刷新...', 'OzoSQ', 'iTPaA', 'jNeJS', 'group-settings-bind-user', 'apply', 'summary', 'array', '-\x20你的备忘录里有一条叫“', 'toLowerCase', 'world-book-edit-content', 'Eboym', 'UXhpC', 'card-input-2', '确定要删除这篇日记吗？此操作不可撤销。', '\x20个旧头像。', 'post_', '备忘录', '\x20说：“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'min', 'NPetb', 'EWkYS', '视奸内容解析失败:', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', '</span>:\x20', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'home-clock-container', 'message-action-backdrop', 'NUUem', 'friend-circle-title', 'upload-card-button-2', 'galgame-sprite', 'fBKOR', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', 'userId', 'UcEnx', '在准备API数据时，从IndexedDB读取图片失败:', 'CCiGN', '#99ff99', 'kLpeH', 'wsHol', 'group-settings-name', 'VleWs', 'pow', 'Upgrading\x20database\x20to\x20version\x20', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'JObKm', 'cardWidgetState', '_blank', '-preview', 'marginBottom', '2513409HSJBuV', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', '大家好像不知道该怎么回复...', 'Azeje', 'FZQas', 'position', 'snoop-app-view-container', 'edit-current-circle-button', 'bpOLE', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'ceil', 'preferences', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', 'role', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', 'widget-next-btn', 'meeting-list-container', 'feRvC', 'header-actions', 'bDiKC', ',\x20ID:\x20', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', '\x22\x20src=\x22', '20px', 'wkyXw', 'ssKwp', 'snoopList', '歌名和歌手都不能为空！', 'horizontal', 'elxwk', '歌曲ID', 'NbrUy', 'AavsN', 'PsyRG', 'group', 'SZWgH', 'join', 'group-clear-history', 'diaries', '暂无音乐', '#ffcc66', 'QIrOm', '服务器错误:\x20', 'toLocaleTimeString', 'has', 'private', '.wb-entry-list', '对方正在行动中...', '10px', 'EjSHR', 'fontWeight', '\x22\x20的聊天记录吗？此操作不可撤销。', 'AZChp', 'reset-feed-bg-button', '未知用户', 'fGGdO', '不高兴撒娇', '#bubble-preview-ai', 'DtRIK', ']。严禁使用列表之外的任何表情名。\x0a', 'uJilI', 'eVCeS', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'is-exiting-left', 'music-widget-card', '.load-more-btn', '</span><div><div\x20class=\x22description\x22>', 'CXTUb', 'eBYWT', 'lastIndexOf', 'stopPropagation', 'categorized-expenses-list', 'IAxDq', 'galgame-speaker', ';\x22>', 'paused', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'world-book-item', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'full', 'save-friend-circle-button', 'url(', '</div><div\x20class=\x22artist\x22>', 'RxXln', '弱小委屈但凶恶', 'DOMContentLoaded', 'HBqEw', 'status', 'AI整理失败了，哼:\x20', '##\x20', '\x0a\x0a#\x20用户资料库\x0a', '<div\x20class=\x22snoop-avatar\x22>', 'authorId', 'etoqR', 'home-screen', 'ETmlp', '）最新写下的日记内容。Ta写的是：\x0a\x20“', 'whispers', 'sKoIf', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'display', '.avatar', 'meeting-char-name-header', 'import-all-data-button', '选择聊天', '\x20张旧的动态图片。', 'SFhVn', 'Creating\x20object\x20store:\x20', 'worldBook', '请看是我', 'fXjAe', '总结失败:', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'PkHNc', '正在为你切换新的歌曲...', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'quote-preview-sender', '正在打包“', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', '”的笔记，内容是：“', 'mujgX', 'onmouseover', 'CdUWy', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'PdKJu', 'galgame-sprite-container', 'exPqt', 'nrATt', 'hidden', '桌面已重置，即将刷新...', 'back-to-home-from-world-book', '---\x20救援任务完成\x20---', 'kLRsc', 'DKqsl', 'Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.', 'XdxWX', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'mouseleave', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'ZvlYZ', 'forEach', 'FEIXM', 'VsGrl', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'Swpbf', '导出过程中发生严重错误:\x20', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'PGNuR', '资料已更新，为了让所有变更完全生效，我来帮你刷新一下。', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'zFjTB', 'yJwOc', 'application/json', 'removeChild', 'zKjIw', '一起听歌', '用户操作中断了\x20AI\x20响应。', 'agNkz', 'is-entering-from-right', 'back-to-diary-list', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'amlNK', '总得说点什么吧？', 'qgLWY', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'QDDZc', 'LCnqB', 'world-book-editor-screen', '0.5', '对方正在输入...', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>', 'isFromLibrary', 'select', '#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked', 'charId', '确定要彻底清空【', 'isOffline', '\x20个旧头像。应用即将刷新。', 'onload', 'modal-ok', '?id=', 'LpmeV', 'DqLsm', 'rQFrH', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'appendChild', 'ZXusV', '出去玩', 'music_cover_migrated_', '这本日记本来就是空的，你还想清空什么？', 'meeting-send-button', '未知餐厅', 'chat_group_', '已自动断开与其他人的听歌同步。', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'lt-ui-lyrics-container', 'wallpaper-input', 'KTvyp', '当前聊天', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'keydown', 'QeEPb', 'UriSJ', '</span><span\x20class=\x22unit\x22>天</span>', '动态中的音乐搜索失败:', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'backgroundPosition', '正在处理图片...', '[发送了图片]', 'YZpPZ', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', '正在准备图片数据...', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', '字体应用失败:', 'XrTpN', 'EUvUh', 'open', 'linkedWorldBookIds', 'app-music', 'PRcgB', '新建好友圈', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'eventType', 'delete-user-profile-button', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'translateY(-', 'rLqkw', 'ElAyy', 'ltsbQ', 'TtjSO', 'span', '[AI发送了表情：', 'MUwLg', '\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', '樱花薄粉', '\x20张旧封面。应用即将刷新。', '还没有我的回复可以重新生成哦。', '\x20(当前)', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '确定要放逐这\x20', 'IlpoQ', 'writeText', 'style', 'world-book-edit-name', 'tab-view-ledger', '#\x20任务:\x20生成\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'event_', '加载\x20', 'parentElement', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'api-provider', 'ujzdx', 'vlbiO', 'char-edit-bind-user', 'group-delete', 'galgame-time', 'YXuKH', 'touchcancel', 'chat_image_migrated_', 'qJnfu', '\x0a\x0a#\x20关于读者“', '吃薯条', 'xmczh', 'hDokm', 'Fetch\x20request\x20was\x20aborted.', '确定要删除这个安排吗？此操作不可撤销。', 'json_object', '买新衣服', '找不到角色。', 'HlGNS', '好像有动态了...', 'wb_html_module_builtin_1', 'character-item', 'fFcSX', 'yqCwj', 'VLcMk', '已送达', 'EzbBy', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'CWYaX', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'var(--primary-color)', 'gpKgu', 'feed', 'POST', 'create_event', '\x0a\x0a#\x20关于对话者“', 'diary-action-modal-', 'GElyc', 'push', 'jhAIU', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'nqNew', 'getFullYear', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', '用户已删除。', 'member-selection-item', '正在构思中，请稍候...', 'app-world-book', '”，里面有\x20', '\x0a-\x20**对话状态**:\x20群里已经有', 'BjIZh', 'sgFCk', 'DxwMv', 'saxgX', 'summary-textarea', 'GGDHo', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', '成功救援并备份了\x20', '\x22\x20class=\x22char-name\x22>', 'app-user-profiles', 'OTJbv', 'exp_', 'group-edit-members', 'back-to-settings-from-user-profile', 'generationConfig', 'lyric-line-', 'JQiXe', 'KaSGg', '\x20添加了新的纪念日：', 'border', 'group-bg-input', 'ocOoN', 'is-selected', 'url', '\x20\x20\x20\x20-\x20', 'flex', '-\x20姓名:\x20', 'pcPKK', 'home-date', 'back-to-home-from-meeting-list', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '错误：找不到此好友圈绑定的用户！', 'text', 'char-edit-css', 'var(--text-color)', 'loading', 'njQDH', 'ULtmC', '歌曲“', 'UCTjq', 'JtwMt', 'swtxj', 'fpNiH', '50%', '#FFFFFF', 'chat-sticker-button', 'isArray', '的第一次互动。\x0a', 'FqTZw', 'sad', '咱俩天下第一好', 'newAvatar', 'Gemini\x20stream\x20reading\x20aborted.', 'jsiLZ', 'kFQmw', '在“一起听”邀请中，净化封面失败:', '批量生成动态失败:\x20', 'Cgtgk', 'backgroundColor', 'LXAjk', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'set-active-user-button', 'transaction', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'iAHJV', 'ZdOqP', '29%', 'init', 'BRfLs', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'getSelection', '[用户发起了听歌邀请:\x20', 'CgSvg', 'fayuP', 'image', 'MHArz', '.typing-indicator', 'touchstart', 'oJdbm', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'uZxTS', 'transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease', 'xtioT', '已设为当前用户！', '#meeting-view-screen\x20.chat-input-area', '生成动态回复失败:', 'HrjMa', 'change', 'input', 'card-image', '正在翻阅所有档案...', 'kwkBM', 'post-img-', 'BJPOA', 'WDuJD', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '测试动态已添加！', 'bubbleCss', 'GzVAt', 'lock-screen-overlay', 'choice-import-character', 'recipientId', 'wpzAT', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '全量导出失败:', 'back-to-home-from-snoop-list', '\x0a\x0a##\x20世界书条目:\x20', '好友圈已保存！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22', '.music-post-song-card', 'byQCr', 'bites', 'createObjectURL', 'normal', 'canplaythrough', '请在动态或聊天中播放', 'YZEnT', 'crnDf', '加载卡片图片失败', '#ff8c66', 'SCHzb', 'aBOCK', 'preview-item', 'user-profile-list-container', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', '\x20-\x20', 'musicLibrary', 'music-library-container', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'csSMs', '--widget-cover-image', 'padding', 'ADOMI', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22', 'XvwSY', 'toast', 'editing-world-book-id', 'toDateString', 'choice-cancel', 'mYSGO', 'GQAmK', 'statusText', 'qhhYr', 'xpSGB', 'UnKoW', 'is-playing', 'aIsHm', '未命名', 'coverUrl', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'sPxkh', 'upload-wallpaper-button', 'iCBfY', 'reload', 'activeQuote', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', '已选择\x20', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'SOgBq', '说了是摆设啦，笨蛋。', 'IzbmZ', 'toLocaleDateString', '.selected', '#diary-action-reroll', 'home-dock', 'musicUploadAltar', '.snoop-app-content', '-\x20你曾经搜索过：“', 'message-container', 'sprites', '-\x20你拍过一张照片，内容是：“', '还没有我的回应可以重新生成哦。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'music-input-modal', 'snoop-phone-top-nav', 'choice-create-character', 'appIconPosition_app-music-library', 'JhpXZ', 'tVqCI', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', '#chat-view-pane\x20>\x20.typing-indicator', 'message-action-modal', '原始文本:', 'tOwBh', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'KiYya', 'persona', 'aSBYe', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '错误:\x20', 'cPtFr', '事情好多', 'abyss', '距离「', 'activeUserProfileId', 'galgame', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'time', '\x0a\x20\x20\x20\x20-\x20世界书[', 'add-event-modal-title', 'friendCircles', 'MAHIv', 'hxDRK', '\x0a-\x20当前精确时间:\x20', 'default', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'wb_', 'galgame-sprite-controls', 'sprite-reset-button', 'friendCircleEdit', 'fyAhE', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', '\x22>一起听</button></div>', 'chat-view-pane', '无法保存聊天记录。', 'wFfGQ', '该角色', 'forceWhiteClock', 'sSHrW', 'OpenAI\x20API\x20错误:\x20', '-\x20[', 'galgame-sprite-adjust-ui', 'sticker-item', 'sticker-item-wrapper', 'object', 'EZEKK', 'RqbcY', 'user-avatar-frame-url-in-chat', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'today-btn', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', '\x20张旧的音乐封面。', 'QvDZR', '需要至少2个角色才能创建群聊。', 'tMbRZ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'beforeend', 'OoonT', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'aiDYi', 'QIEzY', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', '休闲娱乐', 'noir_migration_music_v1_complete', '其他杂项', 'edit-delete-char-button', '\x0a\x20\x20人设:\x20', 'DipgD', 'phone-container', '.snoop-chat-item', 'uPexL', 'customFeedWallpaper', 'getDay', '💜\x20', 'listen-together-ui', 'save-event-button', '表情包已保存！正在刷新应用...', '-\x20**状态提示**:\x20这是你和', '已恢复默认字体。', '这不是我认证的账本卷轴，导入失败！', 'NJcIm', 'ndliv', 'GaAgm', 'smooth', '\x22\x20data-category-id=\x22', '档案已复制到剪贴板！', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'spriteTransform', 'currentTime', 'aSkJO', '\x20条动态...', 'pointer', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '缓存命中:\x20', 'modal-mask', 'ZgRqk', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'qVOGR', '<div\x20id=\x22snoop-dock\x22></div>', 'mouseup', 'snoop-home-time', '确定要删除角色“', '卡片已移除。', 'post_image_', 'QbAyo', 'add-user-profile-button', 'eqKJV', 'snoop-char-name-header', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', 'expanded', 'cover', 'activeChatId', 'OIwdX', '10px\x208px', 'OoKCa', '.snoop-main-grid', 'some', 'ohrRd', 'stickerName', 'findIndex', 'AI未能返回有效的JSON对象。', 'QkkqV', 'FObxR', 'jzeRT', '委屈哭', 'pJtYa', 'ZfeEz', 'qsLBt', 'musicPlaylist', 'WYzgY', '保存失败:\x20', 'FSYSH', 'galgame-view-container', 'load-more-btn', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'add-expense-button', 'uhhDR', '”（即“我”，用户）来发布任何动态或评论。\x0a-\x20所有的动态发布者（authorId）和评论者（authorId）都【必须】从【好友圈成员信息】列表中提供的角色ID里选择。\x0a\x0a#\x20好友圈成员信息\x0a', 'substring', 'PYWAC', 'drGBu', 'oGrsQ', 'cCwBL', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'YZiZH', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', 'claude', '.diary-delete-btn', 'info-file-input', 'Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:', 'calendar', '错误：找不到这首作为“信物”的歌。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'back-to-char-select-from-edit', 'dock', 'activeMeetingCharId', 'char_sprite_normal_', 'qFteN', '100%', 'currentAbortController', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '的个人专属世界观设定\x0a', 'decorative-badge', 'app-meeting', 'none', 'lastTimestamp', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'editing-char-id', 'characters', 'XwsGU', 'item_name', 'execCommand', 'LSZnM', 'save-world-book-button', 'RoMiu', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', '正在逆转时空...', 'TfEsI', 'diary-next-button', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', 'YHGoH', 'sticker', '--desktop-item-scale', 'cifkP', 'cover-file-input', '生成动态时发生错误:\x20', 'OQuNQ', '保存角色失败:', 'nNcvG', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'avatar-frame', '请输入群聊名称。', 'nIoDp', 'replaceAll', 'today-todo-list', 'DSlHf', 'isAnimatingDiary', '#a7c7e7', '无标题笔记', 'YtqUh', '搜索失败:\x20', 'HfuKw', '条目名称和内容都不能为空！', 'Gemini\x20API\x20Error:\x20', 'Ykobg', '】的手机已被重置。', 'ejlPy', 'onclick', '（正在构思中...）', 'uNvTh', 'YILoN', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', 'edit-message-button', '加载已保存字体失败:', 'bHqBU', 'uByNy', '.category-checkbox', 'BjltU', 'startsWith', '.choice-modal-backdrop', 'emoji', 'artist', 'closest']; _0x39df = function () { return _0x48e162; }; return _0x39df(); } function _0x50ddb8(_0x3e895f) { return new Promise((_0x3cd58e, _0xf43c9b) => { const _0xa7084c = _0x2a1e, _0x56eeba = new FileReader(); _0x56eeba[_0xa7084c(0x46c)] = () => _0x3cd58e(_0x56eeba['result']), _0x56eeba[_0xa7084c(0x1bb)] = _0xf43c9b, _0x56eeba[_0xa7084c(0x186)](_0x3e895f); }); } function _0x1a4f38(_0x7e5855, _0x3c0dc6, _0x793661) { const _0x52cb96 = _0x471ec9, _0x5a526c = _0x49a6d1 => { const _0x313873 = _0x2a1e; if (_0x313873(0x2ba) !== _0x313873(0x2ba)) { const _0x21ca7c = _0x372201['getElementById'](_0x313873(0x880)), _0x5c2f78 = _0x256f5c[_0x313873(0x7ef)](_0x313873(0x2ed)), _0x364577 = _0x16d68d[_0x313873(0x7ef)]('widget-artist'), _0x5ad5df = _0x24d5bb['getElementById'](_0x313873(0x371)), _0x10a909 = _0x96521e; _0x10a909 && _0x10a909[_0x313873(0x8f0)] ? (_0x5c2f78['textContent'] = _0x10a909['title'], _0x364577[_0x313873(0x5f8)] = _0x10a909['artist'], _0x21ca7c['classList'][_0x313873(0x44c)](_0x313873(0xa05)), _0x21ca7c[_0x313873(0x937)][_0x313873(0x529)](_0x313873(0x9f6), _0x313873(0x891) + _0x10a909[_0x313873(0xa99)] + ')')) : (_0x5c2f78['textContent'] = _0x313873(0x866), _0x364577[_0x313873(0x5f8)] = _0x313873(0x9e7), _0x21ca7c[_0x313873(0x4ad)]['remove'](_0x313873(0xa05)), _0x5ad5df[_0x313873(0x937)][_0x313873(0x529)](_0x313873(0x9f6), _0x313873(0xacf))); } else { if (_0x49a6d1[_0x313873(0x84c)] === _0x313873(0x32c)) return _0x3cf4de[_0x313873(0x2b5)]?.[_0x313873(0x382)] || _0x313873(0xb8f); if (_0x7e5855['type'] === 'group') { const _0x5083ba = _0x49a6d1[_0x313873(0x105)] ? _0x1286e7(_0x49a6d1[_0x313873(0x105)]) : null; return _0x5083ba?.[_0x313873(0x382)] || _0x313873(0x3c1); } else { const _0x52c7d9 = _0x1286e7(_0x7e5855[_0x313873(0x48f)][0x0]); return _0x52c7d9?.[_0x313873(0x382)] || 'AI'; } } }, _0xdc9bb7 = _0x3c0dc6[_0x52cb96(0x6cd)](-_0x793661), _0x4673c6 = []; for (const _0x242d27 of _0xdc9bb7) { const _0x347c11 = new Date(_0x242d27['timestamp'])[_0x52cb96(0x86a)](_0x52cb96(0x77e), { 'hour': _0x52cb96(0x56f), 'minute': '2-digit' }); _0x242d27[_0x52cb96(0x313)] && _0x4673c6[_0x52cb96(0x967)]('[' + _0x347c11 + _0x52cb96(0x248) + _0x5a526c(_0x242d27) + ']\x20' + String(_0x242d27[_0x52cb96(0x313)])[_0x52cb96(0x4ca)]()); } return _0x4673c6; } function _0x586d97(_0x4d6c97) { const _0x5790b2 = _0x471ec9; if (_0x4d6c97[_0x5790b2(0x76d)] === _0x5790b2(0x861)) return _0x5790b2(0x7a4) + (_0x4d6c97['name'] || _0x5790b2(0xa07)) + '」'; const _0x5ba9c7 = _0x1286e7(_0x4d6c97[_0x5790b2(0x48f)][0x0]); return '与\x20' + (_0x5ba9c7?.[_0x5790b2(0x382)] || _0x5790b2(0x7d6)) + '\x20的私聊'; } function _0x7c98da(_0x3a49ba) { const _0x55490b = _0x471ec9; try { if (_0x55490b(0x9bc) !== _0x55490b(0x9bc)) { _0x417489[_0x55490b(0x35c)] = '', _0x3ed3ff[_0x55490b(0x252)] = ''; if (_0x18c1f7[_0x55490b(0xad3)][_0x55490b(0x30c)] < 0x2) { _0x181297(_0x55490b(0xa5f)); return; } _0x21a72d[_0x55490b(0xad3)]['forEach'](_0x255487 => { const _0xb75885 = _0x55490b, _0x3e4d52 = _0x5f2164[_0xb75885(0xb60)]('li'); _0x3e4d52['className'] = _0xb75885(0x96e), _0x3e4d52[_0xb75885(0x252)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x255487['id'] + _0xb75885(0x57e) + _0x255487['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x255487[_0xb75885(0x3f1)] || _0x25ad67) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-' + _0x255487['id'] + _0xb75885(0x97b) + _0x255487[_0xb75885(0x382)] + _0xb75885(0xeb), _0xb4db81[_0xb75885(0x8fe)](_0x3e4d52); }), _0x512898(_0x55490b(0x13c), _0x55490b(0x113)); } else { const _0x3410e9 = localStorage['getItem']('chatHistory_' + _0x3a49ba), _0x356242 = JSON[_0x55490b(0x6e7)](_0x3410e9 || '[]'); return Array[_0x55490b(0x9a1)](_0x356242) ? _0x356242 : []; } } catch { return []; } } function _0x7987c1(_0xa755d3) { const _0x2561b7 = _0x471ec9, _0x504572 = Math['max'](0x1, Number(_0x3cf4de['preferences']?.[_0x2561b7(0xb59)] ?? 0x64)), _0x142c69 = _0x3cf4de[_0x2561b7(0x27a)][_0x2561b7(0x3f0)](_0x3193ea => _0x3193ea['participantIds'][_0x2561b7(0x5cc)](_0xa755d3)), _0x1646c8 = _0x142c69[_0x2561b7(0x48a)](_0x363e17 => { const _0x273538 = _0x2561b7; if (_0x273538(0x5a9) === _0x273538(0x99a)) _0x42a8d5[_0x273538(0x967)](_0x5c591b[_0x39c5e6][_0x273538(0x4ca)]()), _0x1724bb++; else { const _0xc0debc = _0x7c98da(_0x363e17['id']), _0x137049 = _0xc0debc[_0x273538(0x30c)] > 0x0 ? _0xc0debc[_0xc0debc[_0x273538(0x30c)] - 0x1] : null; return { 'chat': _0x363e17, 'history': _0xc0debc, 'lastTimestamp': _0x137049 ? _0x137049['timestamp'] : 0x0 }; } })['filter'](_0x6f5e2d => _0x6f5e2d['history']['length'] > 0x0); _0x1646c8[_0x2561b7(0xb11)]((_0x531a0a, _0x35c14a) => _0x35c14a[_0x2561b7(0xad0)] - _0x531a0a[_0x2561b7(0xad0)]); const _0x3fda2e = [], _0x18f27d = {}; return _0x1646c8[_0x2561b7(0x8cf)]((_0x37d459, _0x5540ee) => { const _0x427d97 = _0x2561b7, _0x244fb9 = _0x1a4f38(_0x37d459[_0x427d97(0x2b9)], _0x37d459[_0x427d97(0x473)], _0x504572); if (_0x244fb9['length'] === 0x0) return; const _0x102bb8 = _0x5540ee === 0x0 ? _0x427d97(0x61a) : _0x427d97(0x209); _0x3fda2e[_0x427d97(0x967)](_0x427d97(0x899) + _0x102bb8 + _0x586d97(_0x37d459[_0x427d97(0x2b9)]) + '\x0a' + _0x244fb9['join']('\x0a')), _0x18f27d[_0x37d459[_0x427d97(0x2b9)]['id']] = _0x244fb9[_0x427d97(0x30c)]; }), { 'omniText': _0x3fda2e[_0x2561b7(0x863)]('\x0a\x0a'), 'usedCounts': _0x18f27d }; } function _0x3de80d(_0x100e36) { const _0x25f9b7 = _0x471ec9; let _0xffdfe6 = null; const _0x3d2714 = _0x3cf4de[_0x25f9b7(0x27a)]['filter'](_0x364381 => _0x364381[_0x25f9b7(0x48f)][_0x25f9b7(0x5cc)](_0x100e36)); for (const _0x1a40e1 of _0x3d2714) { const _0x4a5119 = _0x7c98da(_0x1a40e1['id']); if (_0x4a5119 && _0x4a5119[_0x25f9b7(0x30c)] > 0x0) { if (_0x25f9b7(0xd8) !== 'oyNlz') _0x3911eb['textContent'] = _0x25f9b7(0x5a8), _0x316891['innerHTML'] = _0x25f9b7(0x67b); else { const _0x21aab4 = _0x4a5119[_0x4a5119[_0x25f9b7(0x30c)] - 0x1]; if (!_0xffdfe6 || _0x21aab4[_0x25f9b7(0x554)] > _0xffdfe6[_0x25f9b7(0x554)]) { if (_0x25f9b7(0x8d7) === _0x25f9b7(0xa58)) { const _0x2a2ef2 = _0x3ae873[_0x25f9b7(0x6e7)](_0x5cefff['dataset'][_0x25f9b7(0x76a)]['replace'](/&quot;/g, '\x22')), _0x1609c7 = _0x40b7f2[_0x25f9b7(0x361)][_0x25f9b7(0x2bf)], _0x36a377 = _0x2274f8[_0x25f9b7(0x361)]['characterName']; _0xa4481b(_0x1609c7, _0x36a377, _0x2a2ef2); } else _0xffdfe6 = _0x21aab4; } } } } return _0xffdfe6; } function _0x1ef07d(_0x5ce7c5) { const _0x56f314 = _0x471ec9; if (!_0x5ce7c5 || !_0x5ce7c5[_0x56f314(0x5cc)](',')) return _0x5ce7c5; const _0x311242 = _0x5ce7c5[_0x56f314(0x35a)](',')[_0x56f314(0x48a)](_0x5a0bec => _0x5a0bec[_0x56f314(0x4ca)]()); return _0x311242[Math[_0x56f314(0x1e8)](Math[_0x56f314(0x758)]() * _0x311242['length'])]; } function _0x56efd8(_0x19fa11) { return new Promise(_0xbd756a => { const _0xf513c2 = _0x2a1e; if (_0xf513c2(0x178) !== _0xf513c2(0x178)) _0x224ff4(![]), _0x2bbd29[_0xf513c2(0x35c)] = ''; else { const _0x45e15c = document['getElementById'](_0xf513c2(0x5df)), _0x488b6c = document[_0xf513c2(0x7ef)](_0xf513c2(0x791)), _0x1c7afb = document[_0xf513c2(0x7ef)](_0xf513c2(0x8f8)), _0x40b15f = document['getElementById'](_0xf513c2(0x2a5)), _0x268351 = document['getElementById'](_0xf513c2(0xa89)); _0x488b6c[_0xf513c2(0x5f8)] = _0x19fa11, _0x45e15c[_0xf513c2(0x937)][_0xf513c2(0x8a4)] = _0xf513c2(0x98c); const _0x1ed159 = _0x797885 => { const _0x359bc5 = _0xf513c2; _0x45e15c[_0x359bc5(0x937)][_0x359bc5(0x8a4)] = 'none', _0x1c7afb[_0x359bc5(0xafa)] = _0x40b15f[_0x359bc5(0xafa)] = _0x268351[_0x359bc5(0xafa)] = null, document[_0x359bc5(0x23b)](_0x359bc5(0x90d), _0x1e02a0), _0xbd756a(_0x797885); }, _0x1e02a0 = _0x57c103 => { const _0x2b85a9 = _0xf513c2; if (_0x57c103[_0x2b85a9(0x6bc)] === 'Escape') _0x1ed159(![]); if (_0x57c103[_0x2b85a9(0x6bc)] === _0x2b85a9(0x74f)) _0x1ed159(!![]); }; _0x1c7afb['onclick'] = () => _0x1ed159(!![]), _0x40b15f['onclick'] = () => _0x1ed159(![]), _0x268351[_0xf513c2(0xafa)] = () => _0x1ed159(![]), document[_0xf513c2(0x25c)]('keydown', _0x1e02a0); } }); } function _0x5bf34b(_0x3a4932) { const _0x28e7a5 = _0x471ec9, _0x3e3ba7 = document[_0x28e7a5(0x7ef)]('toast'); _0x3e3ba7[_0x28e7a5(0x5f8)] = _0x3a4932, _0x3e3ba7['style'][_0x28e7a5(0x8a4)] = _0x28e7a5(0x540); if (_0x5bf34b['_t']) clearTimeout(_0x5bf34b['_t']); _0x5bf34b['_t'] = setTimeout(() => { const _0x31ad42 = _0x28e7a5; if (_0x31ad42(0x7f6) === 'GWLcz') { const _0xff25ab = (_0x3d7dfd[_0x31ad42(0x32f)] || [])[_0x31ad42(0x48a)](_0x53d82e => _0x31ad42(0xd7) + _0x53d82e + _0x31ad42(0xb35))[_0x31ad42(0x863)](''); return _0x31ad42(0x775) + (_0x1418cd[_0x31ad42(0x559)] || '未知餐厅') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x304384['timestamp'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0x397c81[_0x31ad42(0x897)] || _0x31ad42(0x95a)) + _0x31ad42(0xa81) + _0xff25ab + _0x31ad42(0x392) + (_0x18960b[_0x31ad42(0x789)] || 0x0)[_0x31ad42(0x196)](0x2) + _0x31ad42(0xad1); } else _0x3e3ba7[_0x31ad42(0x937)][_0x31ad42(0x8a4)] = _0x31ad42(0xacf); }, 0x640); } function _0xee089d() { const _0x15d043 = _0x471ec9, _0x5c2670 = document[_0x15d043(0x7ef)](_0x15d043(0x9d7)); if (!_0x5c2670) return; let _0x3ceea0 = 0x0, _0x1c1cb4 = 0x0; const _0x2a81ca = 0x50; let _0x1be2f8 = ![]; const _0x26edfd = _0x564896 => { const _0x4dbf18 = _0x15d043; if (_0x4dbf18(0x1f9) === 'xvFDw') _0x576428[_0x4dbf18(0x9bd)] = _0x30653b; else { _0x3ceea0 = _0x564896['touches'] ? _0x564896['touches'][0x0][_0x4dbf18(0x29d)] : _0x564896[_0x4dbf18(0x29d)], _0x1c1cb4 = 0x0, _0x5c2670[_0x4dbf18(0x937)]['transition'] = 'none', _0x1be2f8 = !![]; if (_0x564896[_0x4dbf18(0x76d)] === _0x4dbf18(0x318)) { if (_0x4dbf18(0x316) !== _0x4dbf18(0x316)) { const _0x2dd57e = [], _0x3d92f8 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x49c60a; while ((_0x49c60a = _0x3d92f8[_0x4dbf18(0x344)](_0x4975b9)) !== null) { const _0x55063c = _0x49c60a[0x1][_0x4dbf18(0xb53)](/\\"/g, '\x22')[_0x4dbf18(0xb53)](/\\n/g, '\x0a')[_0x4dbf18(0x4ca)](); if (_0x55063c) _0x2dd57e[_0x4dbf18(0x967)](_0x55063c); } if (_0x2dd57e[_0x4dbf18(0x30c)]) return _0x2dd57e[_0x4dbf18(0x63e)](_0x425a93)[_0x4dbf18(0x6cd)](0x0, 0x9); } else document['addEventListener'](_0x4dbf18(0x681), _0x49e7d1), document[_0x4dbf18(0x25c)](_0x4dbf18(0xa8e), _0x51debd); } } }, _0x49e7d1 = _0xb3fc0e => { const _0x3dcd18 = _0x15d043; if (_0x3dcd18(0xb45) !== 'WnnCB') _0x1662f9[_0x3dcd18(0x2da)] = _0x3dcd18(0xa41); else { if (!_0x1be2f8) return; const _0x4710a5 = _0xb3fc0e[_0x3dcd18(0x716)] ? _0xb3fc0e['touches'][0x0][_0x3dcd18(0x29d)] : _0xb3fc0e[_0x3dcd18(0x29d)]; _0x1c1cb4 = _0x4710a5 - _0x3ceea0; if (_0x1c1cb4 < 0x0) { if ('FBwbL' !== _0x3dcd18(0x355)) { const _0x569a1a = _0x42e118[_0x3dcd18(0x53f)]('p'); _0x569a1a['forEach'](_0x58984d => _0x58984d[_0x3dcd18(0x4ad)]['remove']('active')); const _0x3cd334 = _0x151ccf[_0x3dcd18(0x7ef)]('lyric-line-' + _0x33f62f); _0x3cd334 && (_0x3cd334[_0x3dcd18(0x4ad)]['add'](_0x3dcd18(0x5d1)), _0x3cd334[_0x3dcd18(0x637)]({ 'behavior': _0x3dcd18(0xa7d), 'block': _0x3dcd18(0x7be) })); } else { const _0x497685 = Math[_0x3dcd18(0xb84)](_0x1c1cb4), _0x20562a = 0.4, _0xc35520 = Math[_0x3dcd18(0x835)](_0x497685, _0x20562a) * 0x14; _0x5c2670[_0x3dcd18(0x937)]['transform'] = _0x3dcd18(0x926) + _0xc35520 + _0x3dcd18(0x19b); } } } }, _0x51debd = () => { const _0x592a84 = _0x15d043; if (!_0x1be2f8) return; _0x1be2f8 = ![], _0x5c2670[_0x592a84(0x937)][_0x592a84(0x55f)] = _0x592a84(0x9c5); if (_0x1c1cb4 < -_0x2a81ca) { if (_0x592a84(0xaa5) !== _0x592a84(0xaa5)) { const _0xb4d54 = new _0x1f3247(), _0x39f6fd = _0x3e89ad[_0x592a84(0x7ef)](_0x592a84(0x945)), _0x37a1ff = _0x3e6294['getElementById'](_0x592a84(0x766)); if (_0x39f6fd && _0x37a1ff) { const _0x4b12d9 = _0x42e268(_0xb4d54[_0x592a84(0x669)]())[_0x592a84(0x5b5)](0x2, '0'), _0x37654d = _0x5b5ae4(_0xb4d54[_0x592a84(0x33a)]())[_0x592a84(0x5b5)](0x2, '0'); _0x39f6fd[_0x592a84(0x5f8)] = _0x4b12d9 + ':' + _0x37654d; const _0x266ae4 = _0xb4d54[_0x592a84(0x677)]() + 0x1, _0xd62f49 = _0xb4d54[_0x592a84(0x5c3)](), _0x471c57 = [_0x592a84(0x59b), _0x592a84(0xb6a), _0x592a84(0x38e), _0x592a84(0x21f), _0x592a84(0x24c), _0x592a84(0x656), _0x592a84(0xfd)][_0xb4d54[_0x592a84(0xa72)]()]; _0x37a1ff[_0x592a84(0x5f8)] = _0x266ae4 + '月' + _0xd62f49 + '日\x20' + _0x471c57; } } else _0x5c2670[_0x592a84(0x4ad)][_0x592a84(0x44c)](_0x592a84(0x2f9)); } else _0x5c2670[_0x592a84(0x937)]['transform'] = _0x592a84(0x1e6); document[_0x592a84(0x23b)](_0x592a84(0x681), _0x49e7d1), document[_0x592a84(0x23b)](_0x592a84(0xa8e), _0x51debd); }; _0x5c2670[_0x15d043(0x25c)](_0x15d043(0x9c0), _0x26edfd, { 'passive': !![] }), _0x5c2670[_0x15d043(0x25c)](_0x15d043(0x300), _0x49e7d1, { 'passive': !![] }), _0x5c2670[_0x15d043(0x25c)]('touchend', _0x51debd), _0x5c2670[_0x15d043(0x25c)](_0x15d043(0x318), _0x26edfd); } function _0x45500e() { const _0x410bba = _0x471ec9, _0x54c397 = document[_0x410bba(0x7ef)]('app-pages-container'), _0x2c8073 = document[_0x410bba(0x7ef)](_0x410bba(0x7a1)), _0x173cdb = document[_0x410bba(0x53f)](_0x410bba(0x4c2)), _0x59d7dc = document[_0x410bba(0x7ef)](_0x410bba(0xa18)); let _0x31c061 = 0x0; const _0x12950f = 0x2; _0x2c8073[_0x410bba(0x937)][_0x410bba(0x198)] = '200%', _0x59d7dc['style'][_0x410bba(0x8a4)] = _0x410bba(0x98c); function _0x3fbb71(_0x5a0f40) { const _0x3894a4 = _0x410bba; if (_0x3894a4(0x66b) !== _0x3894a4(0x66b)) _0x3073f8[_0x3894a4(0x2c5)](); else { if (_0x5a0f40 < 0x0 || _0x5a0f40 >= _0x12950f) return; _0x2c8073['style']['transform'] = _0x3894a4(0x738) + _0x5a0f40 * (0x64 / _0x12950f) + '%)', _0x173cdb[_0x3894a4(0x8cf)](_0x43cc70 => _0x43cc70[_0x3894a4(0x4ad)]['remove'](_0x3894a4(0x5d1))), _0x173cdb[_0x5a0f40][_0x3894a4(0x4ad)][_0x3894a4(0x44c)]('active'), _0x31c061 = _0x5a0f40; } } _0x3fbb71(0x0), _0x173cdb[_0x410bba(0x8cf)](_0x5cda75 => { const _0x2c97dd = _0x410bba; if (_0x2c97dd(0x59e) !== _0x2c97dd(0x59e)) { _0x22f264['innerHTML'] = _0x2c97dd(0xa8b); return; } else _0x5cda75[_0x2c97dd(0x25c)](_0x2c97dd(0x2c5), () => { const _0x41bd71 = parseInt(_0x5cda75['dataset']['page'], 0xa); _0x3fbb71(_0x41bd71); }); }); let _0x442ab3 = 0x0, _0x5ca3bf = 0x0, _0x4f4b0e = 0x0, _0x237af4 = ![], _0x23009c = ''; _0x54c397['addEventListener'](_0x410bba(0x9c0), _0x574029 => { const _0x3f3deb = _0x410bba; _0x3f3deb(0x15a) === _0x3f3deb(0xaa0) ? (_0x41d499[_0x3f3deb(0x4ad)][_0x3f3deb(0x713)](_0x3f3deb(0xfb)), _0x358827 = null) : (_0x442ab3 = _0x574029[_0x3f3deb(0x716)][0x0]['clientX'], _0x5ca3bf = _0x574029[_0x3f3deb(0x716)][0x0][_0x3f3deb(0x29d)], _0x237af4 = !![], _0x23009c = ''); }, { 'passive': !![] }), _0x54c397[_0x410bba(0x25c)]('touchmove', _0x4196dc => { const _0x4f2213 = _0x410bba; if (!_0x237af4) return; if (_0x23009c === '') { const _0x4214f9 = _0x4196dc['touches'][0x0]['clientX'] - _0x442ab3, _0x2e8dfc = _0x4196dc['touches'][0x0][_0x4f2213(0x29d)] - _0x5ca3bf; Math[_0x4f2213(0xb84)](_0x4214f9) > Math[_0x4f2213(0xb84)](_0x2e8dfc) ? _0x23009c = _0x4f2213(0x85b) : _0x4f2213(0xc7) !== 'fTRrL' ? _0x23009c = 'vertical' : !_0x94080f[_0x4f2213(0x182)](_0xca606[_0x4f2213(0x13b)]) && _0x4e3efa[_0x4f2213(0x13b)] !== _0x728e40 && _0x2574d1['target'] !== _0xdb2023 && _0x334cb6[_0x4f2213(0x4ad)][_0x4f2213(0x713)](_0x4f2213(0xfb)); } _0x23009c === _0x4f2213(0x85b) && _0x4196dc[_0x4f2213(0x3e2)](); }, { 'passive': ![] }), _0x54c397['addEventListener'](_0x410bba(0x299), _0x4ed8f1 => { const _0x331dc4 = _0x410bba; if ('pnWBV' !== _0x331dc4(0xb5)) { if (!_0x237af4) return; _0x4f4b0e = _0x4ed8f1[_0x331dc4(0x542)][0x0]['clientX'], _0x23009c === _0x331dc4(0x85b) && _0x5c416e(), _0x237af4 = ![]; } else { if (_0x990a44[_0x331dc4(0x76d)] === _0x331dc4(0x861)) return _0x331dc4(0x7a4) + (_0xdf28ec[_0x331dc4(0x382)] || _0x331dc4(0xa07)) + '」'; const _0x27273b = _0x3ff62a(_0x4340e5[_0x331dc4(0x48f)][0x0]); return '与\x20' + (_0x27273b?.[_0x331dc4(0x382)] || _0x331dc4(0x7d6)) + _0x331dc4(0x184); } }); function _0x5c416e() { const _0x18c9c0 = _0x410bba; if (_0x18c9c0(0x112) !== _0x18c9c0(0x16e)) { const _0x50ad59 = 0x32; if (_0x4f4b0e < _0x442ab3 - _0x50ad59) _0x18c9c0(0x997) !== _0x18c9c0(0x73f) ? _0x3fbb71(_0x31c061 + 0x1) : _0x81aaf2[_0x29abf1][_0x18c9c0(0x4ad)][_0x18c9c0(0x44c)]('active'); else _0x4f4b0e > _0x442ab3 + _0x50ad59 && _0x3fbb71(_0x31c061 - 0x1); } else _0x43e30b['error']('切换聊天时发生异步错误:', _0x5cf774), _0x1b47fc(_0x18c9c0(0x329) + _0x79898d['message']); } } function _0x200407() { return new Promise(_0x25c076 => { const _0x328815 = _0x2a1e, _0xe23b8 = document[_0x328815(0x7ef)](_0x328815(0xa21)), _0x3c32f0 = document[_0x328815(0x7ef)](_0x328815(0x6e5)), _0x415981 = document[_0x328815(0x7ef)]('music-input-artist'), _0x13231a = document[_0x328815(0x7ef)](_0x328815(0x74c)), _0x9b5660 = document['getElementById'](_0x328815(0x590)), _0x3a5bf5 = document[_0x328815(0x7ef)]('music-input-backdrop'); _0x3c32f0['value'] = '', _0x415981[_0x328815(0x35c)] = '', _0xe23b8[_0x328815(0x4ad)][_0x328815(0x44c)](_0x328815(0xfb)), _0x3c32f0['focus'](); const _0x15f47e = _0x28614d => { const _0x4814ab = _0x328815; if ('EmkyL' === _0x4814ab(0x9a3)) { const _0x12bfdf = _0x85cc33[_0x4814ab(0x9d9)] === _0x5450dc(_0x54f014[_0x4814ab(0xa9a)])['id'] ? _0x18ba1b(_0x4e4db2[_0x4814ab(0xa9a)]) : _0x4091af(_0x9daa49[_0x4814ab(0x9d9)]); _0x3e40db[_0x4814ab(0x7a2)](_0xfcfe52, { 'type': _0x4814ab(0x4d2), 'amount': _0x2adeef['amount'], 'recipientId': _0x47ae33[_0x4814ab(0x9d9)], 'content': _0x4814ab(0x7c4) + (_0x12bfdf?.[_0x4814ab(0x382)] || '未知') + _0x4814ab(0x327) + _0x24e5f1['amount'] + ']' }); } else _0xe23b8[_0x4814ab(0x4ad)][_0x4814ab(0x713)](_0x4814ab(0xfb)), _0x13231a['onclick'] = null, _0x9b5660[_0x4814ab(0xafa)] = null, _0x3a5bf5['onclick'] = null, document[_0x4814ab(0x23b)]('keydown', _0x185e1a), _0x25c076(_0x28614d); }, _0xf3ceb6 = () => { const _0x14fd69 = _0x328815; if (_0x14fd69(0x3bf) === _0x14fd69(0x485)) _0x4ba2cd[_0x14fd69(0x557)] = _0x3108dd[_0x14fd69(0x9e4)](_0x3c6366), _0x377a8f[_0x14fd69(0x937)][_0x14fd69(0x8a4)] = 'block'; else { const _0x3f159c = _0x3c32f0['value'][_0x14fd69(0x4ca)](), _0x19d0d0 = _0x415981[_0x14fd69(0x35c)][_0x14fd69(0x4ca)](); if (!_0x3f159c || !_0x19d0d0) { _0x5bf34b(_0x14fd69(0x85a)); return; } _0x15f47e({ 'songName': _0x3f159c, 'artist': _0x19d0d0 }); } }, _0x185e1a = _0x545db7 => { const _0x472fde = _0x328815; if ('WxZAm' !== _0x472fde(0x645)) { _0x38257a[_0x472fde(0x252)] = _0x472fde(0x49d), _0x45ee51[_0x472fde(0x252)] = ''; return; } else { if (_0x545db7['key'] === _0x472fde(0x407)) _0x15f47e(null); if (_0x545db7[_0x472fde(0x6bc)] === _0x472fde(0x74f)) { if ('ZuFZZ' !== _0x472fde(0x35e)) { if (!_0x3baba9) return []; const _0x2dc3fd = _0x291c0b[_0x472fde(0x35a)]('\x0a'), _0x24d618 = [], _0x478c93 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x49c275 of _0x2dc3fd) { const _0x443490 = _0x49c275[_0x472fde(0xd2)](_0x478c93); if (_0x443490) { const _0xd5ff2c = _0x9261a5(_0x443490[0x1], 0xa), _0x1a05ad = _0x4a9962(_0x443490[0x2], 0xa), _0x14f169 = _0x492ae3(_0x443490[0x3], 0xa) * (_0x443490[0x3][_0x472fde(0x30c)] === 0x2 ? 0xa : 0x1), _0x5c0bae = _0xd5ff2c * 0x3c + _0x1a05ad + _0x14f169 / 0x3e8, _0x928435 = _0x49c275['replace'](_0x478c93, '')[_0x472fde(0x4ca)](); _0x928435 && _0x24d618['push']({ 'time': _0x5c0bae, 'text': _0x928435 }); } } return _0x24d618; } else _0x545db7[_0x472fde(0x3e2)](), _0xf3ceb6(); } } }; _0x13231a[_0x328815(0xafa)] = _0xf3ceb6, _0x9b5660[_0x328815(0xafa)] = () => _0x15f47e(null), _0x3a5bf5['onclick'] = () => _0x15f47e(null), document[_0x328815(0x25c)](_0x328815(0x90d), _0x185e1a); }); } function _0x5a5592(_0x462cec) { const _0x3722b9 = _0x471ec9; if (!_0x462cec) return []; const _0x5029da = _0x462cec[_0x3722b9(0x4ca)](); if (_0x5029da[_0x3722b9(0xb05)]('<div') && _0x5029da[_0x3722b9(0x3bc)]('</div>')) return [_0x5029da]; const _0x4ddd08 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\])/g, _0x3d7ebe = _0x3722b9(0x7b8), _0x1464f7 = [], _0x5a867f = _0x462cec[_0x3722b9(0xb53)](_0x4ddd08, _0x50eaff => { return _0x1464f7['push'](_0x50eaff), _0x3d7ebe; }), _0x572140 = _0x5a867f['split'](_0x3d7ebe), _0x118d1e = []; let _0x48a2de = 0x0; return _0x572140[_0x3722b9(0x8cf)]((_0x4fe658, _0x2df96e) => { const _0x3270ac = _0x3722b9, _0x3d42fb = _0x4fe658['trim'](); _0x3d42fb && _0x118d1e['push'](..._0x1654fa(_0x3d42fb)), _0x48a2de < _0x1464f7[_0x3270ac(0x30c)] && (_0x118d1e[_0x3270ac(0x967)](_0x1464f7[_0x48a2de][_0x3270ac(0x4ca)]()), _0x48a2de++); }), _0x118d1e; } function _0x24c710(_0x1c9e49, _0x49f99e, _0x42d093 = '') { const _0xce9f85 = _0x471ec9, _0x3e3f5a = document[_0xce9f85(0xb60)](_0xce9f85(0xb0b)); _0x3e3f5a[_0xce9f85(0x199)] = 'avatar-wrapper\x20' + _0x42d093; const _0x10cddd = document['createElement']('img'); _0x10cddd[_0xce9f85(0x557)] = _0x1c9e49, _0x10cddd[_0xce9f85(0x199)] = _0xce9f85(0x3f1); const _0xc60dcb = document['createElement'](_0xce9f85(0xb0b)); return _0xc60dcb[_0xce9f85(0x199)] = _0xce9f85(0xae9), _0x49f99e && (_0xce9f85(0x6d7) === _0xce9f85(0x6d7) ? _0xc60dcb['style'][_0xce9f85(0x6aa)] = _0xce9f85(0x550) + _0x49f99e + '\x27)' : (_0x4aed98 += _0xce9f85(0x42c), _0x393bd3[_0xce9f85(0x76a)][_0xce9f85(0x8cf)](_0x267d49 => { const _0x250994 = _0xce9f85, _0x2f6be9 = _0x267d49['sender'] === _0x250994(0xb7e) ? '你' : _0x22d80f[_0x250994(0x437)]; _0x451209 += _0x250994(0x98b) + _0x2f6be9 + ':\x20' + _0x267d49['content'] + '\x0a'; }))), _0x3e3f5a[_0xce9f85(0x8fe)](_0x10cddd), _0x3e3f5a[_0xce9f85(0x8fe)](_0xc60dcb), _0x3e3f5a; } function _0x507ba5(_0x917b84) { const _0x24f680 = _0x471ec9; if (!_0x917b84) return []; let _0x246f44 = String(_0x917b84)[_0x24f680(0x4ca)](); const _0x57e21c = _0x246f44[_0x24f680(0xd2)](/```(?:json)?([\s\S]*?)```/i); if (_0x57e21c) _0x246f44 = _0x57e21c[0x1][_0x24f680(0x4ca)](); try { const _0x227d8c = JSON['parse'](_0x246f44); if (_0x227d8c && Array['isArray'](_0x227d8c[_0x24f680(0x413)])) return _0x227d8c[_0x24f680(0x413)]['map'](_0x1a2c74 => typeof _0x1a2c74 === _0x24f680(0xf4) ? _0x1a2c74 : _0x1a2c74?.['content'])[_0x24f680(0x3f0)](Boolean)[_0x24f680(0x63e)](_0x1654fa); const _0x5b5891 = ['response', _0x24f680(0x2a1), 'message', _0x24f680(0x993), _0x24f680(0x313), _0x24f680(0x312), _0x24f680(0x170)]; if (_0x227d8c && typeof _0x227d8c === _0x24f680(0xa56)) { const _0x74e6a0 = []; for (const _0x51b1f6 of Object[_0x24f680(0x52a)](_0x227d8c)) { const _0x33e038 = _0x51b1f6[_0x24f680(0x812)](); if (_0x5b5891['some'](_0x13d254 => _0x33e038[_0x24f680(0xb05)](_0x13d254))) { const _0x428ea9 = _0x227d8c[_0x51b1f6]; if (typeof _0x428ea9 === _0x24f680(0xf4)) _0x74e6a0[_0x24f680(0x967)](_0x428ea9); if (Array[_0x24f680(0x9a1)](_0x428ea9)) _0x428ea9[_0x24f680(0x8cf)](_0x753241 => { const _0x3d5f42 = _0x24f680; if ('evUUX' !== _0x3d5f42(0x44b)) { if (typeof _0x753241 === _0x3d5f42(0xf4)) _0x74e6a0[_0x3d5f42(0x967)](_0x753241); } else { const _0x6a0fc0 = _0x5f2e3f['conversationHistory']['indexOf'](_0x289b1a); _0x6a0fc0 > -0x1 && _0xebb9af(_0x324e2c, _0x6a0fc0); } }); } } if (_0x74e6a0[_0x24f680(0x30c)]) return _0x74e6a0['flatMap'](_0x1654fa)['slice'](0x0, 0x9); } } catch { } if (/[{\[]/[_0x24f680(0x2b6)](_0x246f44) && /":/['test'](_0x246f44)) { const _0x3c238b = [], _0x18b4a8 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x197b8b; while ((_0x197b8b = _0x18b4a8[_0x24f680(0x344)](_0x246f44)) !== null) { if ('NMTTd' === _0x24f680(0x3ae)) return (_0x104ae1?.[_0x24f680(0xad3)] || [])[_0x24f680(0x6f0)](_0xce508f => _0xce508f['id'] === _0x269362); else { const _0xe7fbb5 = _0x197b8b[0x1][_0x24f680(0xb53)](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x24f680(0x4ca)](); if (_0xe7fbb5) _0x3c238b[_0x24f680(0x967)](_0xe7fbb5); } } if (_0x3c238b[_0x24f680(0x30c)]) return _0x3c238b['flatMap'](_0x1654fa)[_0x24f680(0x6cd)](0x0, 0x9); } return _0x1654fa(_0x246f44); } function _0x1654fa(_0x276f85) { const _0x220f54 = _0x471ec9, _0x2561c5 = String(_0x276f85)[_0x220f54(0x4ca)](); if (_0x2561c5[_0x220f54(0xb05)]('<div') && _0x2561c5[_0x220f54(0x3bc)]('</div>')) return [_0x2561c5]; const _0xf94905 = _0x2561c5[_0x220f54(0x35a)](/(?<=[。！？!?…])\s+|[\r\n]+/)['map'](_0x24c884 => _0x24c884[_0x220f54(0x4ca)]())[_0x220f54(0x3f0)](Boolean); if (_0xf94905[_0x220f54(0x30c)] > 0x0) { if (_0x220f54(0x9ff) !== _0x220f54(0x9ff)) { if (!_0xb33457[_0x220f54(0x253)]) return _0x14fbb7[_0x220f54(0x3ec)][_0x220f54(0x6f0)](_0x14d46f => _0x14d46f['id'] === _0x294037[_0x220f54(0xa37)]) || _0x3cadce[_0x220f54(0x3ec)][0x0]; const _0x3f0eff = _0x2fab58[_0x220f54(0x27a)][_0x220f54(0x6f0)](_0x23a98b => _0x23a98b[_0x220f54(0x76d)] === _0x220f54(0x86c) && _0x23a98b[_0x220f54(0x48f)][_0x220f54(0x5cc)](_0x3edb73[_0x220f54(0x253)])), _0x33b34e = _0x3f0eff?.[_0x220f54(0x2c4)] || _0x130e15[_0x220f54(0xa37)]; return _0x42aaf3[_0x220f54(0x3ec)][_0x220f54(0x6f0)](_0x52655d => _0x52655d['id'] === _0x33b34e) || _0x45eca7['userProfiles'][0x0]; } else return _0xf94905['slice'](0x0, 0xc); } return [_0x2561c5]['filter'](Boolean); } const _0xa7a9d2 = new Promise((_0x3f6fbf, _0x58fb2c) => { const _0x3b2615 = _0x471ec9, _0x4cec79 = indexedDB['open'](_0x19955f, 0x3); _0x4cec79[_0x3b2615(0x1bb)] = () => _0x58fb2c('IndexedDB\x20failed\x20to\x20open'), _0x4cec79[_0x3b2615(0x78f)] = () => _0x3f6fbf(_0x4cec79[_0x3b2615(0xb95)]), _0x4cec79[_0x3b2615(0xb80)] = _0x369361 => { const _0x46882b = _0x3b2615; if (_0x46882b(0x679) === 'boXoA') return { 'type': _0x46882b(0x42f), 'songName': _0x2f072e[0x1][_0x46882b(0x4ca)](), 'artist': _0x4af300[0x2][_0x46882b(0x4ca)]() }; else { const _0x5c36db = _0x369361['target'][_0x46882b(0xb95)]; console['log'](_0x46882b(0x836) + _0x5c36db[_0x46882b(0x649)] + _0x46882b(0x2e7)); !_0x5c36db[_0x46882b(0x3c0)][_0x46882b(0x182)](_0x4c2fa8) && (console[_0x46882b(0x76a)](_0x46882b(0x8ab) + _0x4c2fa8), _0x5c36db['createObjectStore'](_0x4c2fa8, { 'keyPath': 'id' })); if (!_0x5c36db[_0x46882b(0x3c0)][_0x46882b(0x182)](_0x46882b(0x51a))) { if (_0x46882b(0x21e) === _0x46882b(0x21e)) console[_0x46882b(0x76a)](_0x46882b(0x581)), _0x5c36db[_0x46882b(0x7fb)]('music_library', { 'keyPath': 'id' }); else { const _0x1c5ac6 = _0x1a05dc[_0x46882b(0x79c)][_0x46882b(0xa9f)](_0x31f684 => _0x31f684['id'] === _0x46882b(0xa41)); !_0x1c5ac6 && _0x5f1277[_0x46882b(0x967)]({ 'id': 'default', 'name': _0x46882b(0x6b0) }); } } !_0x5c36db[_0x46882b(0x3c0)][_0x46882b(0x182)](_0x3db906) && (console[_0x46882b(0x76a)](_0x46882b(0x8ab) + _0x3db906), _0x5c36db[_0x46882b(0x7fb)](_0x3db906, { 'keyPath': 'id' })); } }; }); async function _0x47b504(_0x28fa91) { const _0xa3618e = await _0xa7a9d2; return new Promise((_0x1c9f93, _0x3acaea) => { const _0x314fb1 = _0x2a1e, _0x15bd4f = _0xa3618e[_0x314fb1(0x9b1)](_0x4c2fa8, _0x314fb1(0x571)), _0x57d13d = _0x15bd4f[_0x314fb1(0x326)](_0x4c2fa8), _0x3a480d = _0x57d13d[_0x314fb1(0x222)](_0x28fa91); _0x3a480d[_0x314fb1(0x78f)] = () => _0x1c9f93(_0x3a480d[_0x314fb1(0xb95)] ? _0x3a480d['result'][_0x314fb1(0x664)] : null), _0x3a480d[_0x314fb1(0x1bb)] = () => _0x3acaea(_0x3a480d[_0x314fb1(0x5e3)]); }); } async function _0x5a1d99(_0xd7e871) { const _0x40b77f = await _0xa7a9d2; return new Promise((_0x41489b, _0x51c33b) => { const _0x554d0b = _0x2a1e, _0xd912a5 = _0x40b77f[_0x554d0b(0x9b1)](_0x3db906, _0x554d0b(0x571)), _0x31c135 = _0xd912a5[_0x554d0b(0x326)](_0x3db906), _0x5ab2aa = _0x31c135[_0x554d0b(0x222)](_0xd7e871); _0x5ab2aa[_0x554d0b(0x78f)] = () => _0x41489b(_0x5ab2aa[_0x554d0b(0xb95)] ? _0x5ab2aa[_0x554d0b(0xb95)][_0x554d0b(0x3e1)] : null), _0x5ab2aa['onerror'] = () => _0x51c33b(_0x5ab2aa[_0x554d0b(0x5e3)]); }); } async function _0x46f30f(_0x261889, _0x83d778) { const _0x1276f8 = await _0xa7a9d2; return new Promise((_0x32c058, _0x56d441) => { const _0x28802f = _0x2a1e; if (_0x28802f(0x5c6) === _0x28802f(0x414)) { if (_0x61a536['type'] === 'touchstart') _0x365cee[_0x28802f(0x3e2)](); _0x260063(_0x2dd240(_0x1e07f1, 0xa), _0x4a0948); } else { const _0x2b4361 = _0x1276f8[_0x28802f(0x9b1)](_0x3db906, _0x28802f(0x12b)), _0x900884 = _0x2b4361['objectStore'](_0x3db906), _0x24e4f8 = _0x900884[_0x28802f(0x336)]({ 'id': _0x261889, 'data': _0x83d778 }); _0x24e4f8[_0x28802f(0x78f)] = () => _0x32c058(), _0x24e4f8[_0x28802f(0x1bb)] = () => _0x56d441(_0x24e4f8[_0x28802f(0x5e3)]); } }); } async function _0x4d33a2(_0x3e6fdf) { const _0x4cf62f = await _0xa7a9d2; return new Promise((_0x384cde, _0xc5f931) => { const _0xaa263d = _0x2a1e; if (_0xaa263d(0x5e7) === _0xaa263d(0x7fe)) { const _0x53b45b = _0x55f9a4[_0xaa263d(0x3ec)]['find'](_0x2e3f41 => _0x2e3f41['id'] === _0x37b402[_0xaa263d(0xa37)]) || { 'name': '你' }, _0x16d0a9 = _0x20bf8f[_0xaa263d(0x865)][_0xaa263d(0x6f0)](_0x1dacab => _0x1dacab[_0xaa263d(0x697)] === _0x320d3a); if (!_0x16d0a9 || !_0x16d0a9[_0xaa263d(0x2fc)] || _0x16d0a9[_0xaa263d(0x2fc)][_0xaa263d(0x30c)] === 0x0) return ''; const _0x2a108b = _0x16d0a9[_0xaa263d(0x2fc)][_0xaa263d(0x6cd)](-0x8), _0x225f58 = _0x2a108b[_0xaa263d(0x48a)](_0x2c4823 => { const _0x2786dd = _0xaa263d, _0x5a1ca4 = _0x2c4823[_0x2786dd(0x1b8)] === _0x2786dd(0x32c) ? _0x53b45b[_0x2786dd(0x382)] : _0x3b60ec(_0x2c4823[_0x2786dd(0x1b8)])[_0x2786dd(0x382)]; return '-\x20[' + new _0x79398b(_0x2c4823[_0x2786dd(0x554)])['toLocaleDateString']() + ']\x20' + _0x5a1ca4 + '\x20写道:\x20' + _0x2c4823[_0x2786dd(0x313)]; })[_0xaa263d(0x863)]('\x0a'); return _0xaa263d(0x5f9) + _0x53b45b[_0xaa263d(0x382)] + _0xaa263d(0x70e) + _0x225f58; } else { const _0x3ccdc2 = _0x4cf62f[_0xaa263d(0x9b1)](_0x3db906, _0xaa263d(0x12b)), _0x5db10a = _0x3ccdc2[_0xaa263d(0x326)](_0x3db906), _0x1ff9ed = _0x5db10a[_0xaa263d(0x68c)](_0x3e6fdf); _0x1ff9ed['onsuccess'] = () => _0x384cde(), _0x1ff9ed['onerror'] = () => _0xc5f931(_0x1ff9ed[_0xaa263d(0x5e3)]); } }); } async function _0x30635e(_0x1f8a87, _0x71b664) { const _0x221bfb = await _0xa7a9d2; return new Promise((_0x3cf342, _0x304fc0) => { const _0x1c5f44 = _0x2a1e, _0x122792 = _0x221bfb['transaction'](_0x4c2fa8, 'readwrite'), _0x105e94 = _0x122792['objectStore'](_0x4c2fa8), _0x36d46a = _0x105e94[_0x1c5f44(0x336)]({ 'id': _0x1f8a87, 'blob': _0x71b664 }); _0x36d46a[_0x1c5f44(0x78f)] = () => _0x3cf342(_0x36d46a['result']), _0x36d46a[_0x1c5f44(0x1bb)] = () => _0x304fc0(_0x36d46a['error']); }); } async function _0x2a986e(_0x438c55) { const _0x291b54 = await _0xa7a9d2; return new Promise((_0x520108, _0x1a42e0) => { const _0x6ed75e = _0x2a1e, _0x59f7ba = _0x291b54['transaction'](_0x4c2fa8, _0x6ed75e(0x12b)), _0x2c0289 = _0x59f7ba[_0x6ed75e(0x326)](_0x4c2fa8), _0xb65ec3 = _0x2c0289['delete'](_0x438c55); _0xb65ec3['onsuccess'] = () => _0x520108(), _0xb65ec3[_0x6ed75e(0x1bb)] = () => _0x1a42e0(_0xb65ec3[_0x6ed75e(0x5e3)]); }); } function _0x151f54(_0x29b7f4) { return fetch(_0x29b7f4)['then'](_0x494482 => _0x494482['blob']()); }
  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
