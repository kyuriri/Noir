<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>


  <script>
    const _0xf11eb5 = _0x585d; (function (_0x337e1c, _0x559f34) { const _0x198f1f = _0x585d, _0x5c7f62 = _0x337e1c(); while (!![]) { try { const _0x51cb50 = -parseInt(_0x198f1f(0xac4)) / 0x1 + -parseInt(_0x198f1f(0xb21)) / 0x2 * (parseInt(_0x198f1f(0xaac)) / 0x3) + -parseInt(_0x198f1f(0x1f3)) / 0x4 + -parseInt(_0x198f1f(0x32a)) / 0x5 * (parseInt(_0x198f1f(0x3e5)) / 0x6) + -parseInt(_0x198f1f(0xa06)) / 0x7 + parseInt(_0x198f1f(0x535)) / 0x8 + parseInt(_0x198f1f(0x6d3)) / 0x9; if (_0x51cb50 === _0x559f34) break; else _0x5c7f62['push'](_0x5c7f62['shift']()); } catch (_0x2e32b5) { _0x5c7f62['push'](_0x5c7f62['shift']()); } } }(_0x419d, 0xccf31)); const _0x4177a9 = _0xf11eb5(0x31a), _0x136f7d = _0xf11eb5(0xadc), _0x4efc38 = _0xf11eb5(0x87e), _0x27b98d = document[_0xf11eb5(0x6a8)](_0xf11eb5(0x7c9)); _0x27b98d['id'] = _0xf11eb5(0xa82), document[_0xf11eb5(0x757)][_0xf11eb5(0x1ce)](_0x27b98d); var _0x4295e2, _0x59df15 = null; let _0x4cfb86 = [], _0x51d882 = ![], _0x32112c = { 'x': 0x0, 'y': 0x0 }; function _0x5ea761(_0x1a9513) { const _0x30144b = _0xf11eb5; return (_0x4295e2?.[_0x30144b(0x45f)] || [])[_0x30144b(0x7e6)](_0xd6855 => _0xd6855['id'] === _0x1a9513); } const _0x1255b0 = _0xf11eb5(0x3cb), _0x17eab7 = _0xf11eb5(0x791), _0x2fd48c = _0xf11eb5(0x476), _0x3d4134 = [{ 'name': _0xf11eb5(0x9b2), 'url': 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg' }, { 'name': '崩溃', 'url': _0xf11eb5(0x256) }, { 'name': '生病', 'url': 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg' }, { 'name': '工作', 'url': _0xf11eb5(0x1e2) }, { 'name': _0xf11eb5(0xba0), 'url': _0xf11eb5(0xa70) }, { 'name': '弱小委屈但凶恶', 'url': _0xf11eb5(0x553) }, { 'name': _0xf11eb5(0x93f), 'url': _0xf11eb5(0x765) }, { 'name': '期待', 'url': 'https://sharkpan.xyz/f/35lse/xmsue5.jpg' }, { 'name': '喜欢', 'url': 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg' }, { 'name': '被萌到', 'url': 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg' }, { 'name': _0xf11eb5(0xb18), 'url': _0xf11eb5(0x611) }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif' }, { 'name': '加油', 'url': _0xf11eb5(0x26b) }, { 'name': '对的', 'url': _0xf11eb5(0xafb) }, { 'name': '不满', 'url': 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg' }, { 'name': _0xf11eb5(0x25b), 'url': _0xf11eb5(0xb5a) }, { 'name': '猫猫撒娇', 'url': _0xf11eb5(0x798) }, { 'name': '委屈', 'url': _0xf11eb5(0xa8b) }, { 'name': '平静', 'url': _0xf11eb5(0x9a0) }, { 'name': '咬你', 'url': _0xf11eb5(0x4bb) }, { 'name': _0xf11eb5(0x354), 'url': _0xf11eb5(0x58d) }, { 'name': '好困', 'url': _0xf11eb5(0x640) }, { 'name': '摸鱼', 'url': 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg' }, { 'name': _0xf11eb5(0x30e), 'url': _0xf11eb5(0x860) }, { 'name': _0xf11eb5(0xacd), 'url': 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg' }, { 'name': _0xf11eb5(0x744), 'url': _0xf11eb5(0x285) }, { 'name': '一起听歌', 'url': 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg' }, { 'name': _0xf11eb5(0xaff), 'url': _0xf11eb5(0x766) }, { 'name': _0xf11eb5(0x5bd), 'url': _0xf11eb5(0x61d) }, { 'name': _0xf11eb5(0x399), 'url': _0xf11eb5(0xaf5) }, { 'name': _0xf11eb5(0x571), 'url': _0xf11eb5(0x557) }, { 'name': _0xf11eb5(0x2a1), 'url': _0xf11eb5(0x33e) }, { 'name': _0xf11eb5(0x2af), 'url': 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg' }, { 'name': '逗你开心', 'url': 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg' }, { 'name': _0xf11eb5(0x2c3), 'url': _0xf11eb5(0x296) }, { 'name': _0xf11eb5(0x20f), 'url': 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg' }, { 'name': '对不起', 'url': _0xf11eb5(0x3da) }, { 'name': _0xf11eb5(0x9c5), 'url': 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg' }, { 'name': _0xf11eb5(0x531), 'url': 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg' }, { 'name': _0xf11eb5(0x9f6), 'url': _0xf11eb5(0xb43) }, { 'name': _0xf11eb5(0x340), 'url': 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg' }, { 'name': _0xf11eb5(0x737), 'url': _0xf11eb5(0xb07) }, { 'name': _0xf11eb5(0x6f5), 'url': _0xf11eb5(0x6e0) }, { 'name': _0xf11eb5(0x7f4), 'url': _0xf11eb5(0x7ec) }, { 'name': _0xf11eb5(0x92f), 'url': _0xf11eb5(0x576) }, { 'name': '很好哦', 'url': _0xf11eb5(0xa8d) }, { 'name': '甜蜜地和你聊天', 'url': _0xf11eb5(0x865) }, { 'name': _0xf11eb5(0x816), 'url': 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg' }, { 'name': _0xf11eb5(0x6bd), 'url': _0xf11eb5(0x815) }, { 'name': _0xf11eb5(0x23b), 'url': _0xf11eb5(0x2e2) }, { 'name': _0xf11eb5(0x96e), 'url': _0xf11eb5(0x90d) }, { 'name': _0xf11eb5(0x6c6), 'url': _0xf11eb5(0x4aa) }, { 'name': _0xf11eb5(0x3be), 'url': _0xf11eb5(0xaae) }, { 'name': '等你', 'url': _0xf11eb5(0x5da) }, { 'name': _0xf11eb5(0x37f), 'url': _0xf11eb5(0x9f5) }, { 'name': '等你消息', 'url': _0xf11eb5(0x33c) }, { 'name': '喝酒', 'url': _0xf11eb5(0x9bf) }, { 'name': _0xf11eb5(0xa0c), 'url': _0xf11eb5(0x60c) }, { 'name': '呜呜', 'url': _0xf11eb5(0x5a0) }, { 'name': _0xf11eb5(0x976), 'url': _0xf11eb5(0x8ad) }, { 'name': '我错了', 'url': _0xf11eb5(0x505) }, { 'name': _0xf11eb5(0x85f), 'url': _0xf11eb5(0xacb) }, { 'name': _0xf11eb5(0x491), 'url': _0xf11eb5(0x530) }, { 'name': _0xf11eb5(0x821), 'url': _0xf11eb5(0x1fa) }], _0x524f25 = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0xf11eb5(0x6d8), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0xf11eb5(0x8f5), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0xf11eb5(0xae5), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0xf11eb5(0x46a)]('DOMContentLoaded', () => { const _0x34dc25 = _0xf11eb5, _0x55e0bf = document[_0x34dc25(0x61b)](_0x34dc25(0x459)), _0x31edb4 = document['getElementById'](_0x34dc25(0xb74)), _0x4dac92 = document[_0x34dc25(0x61b)]('transfer-modal'), _0x15b424 = document[_0x34dc25(0x61b)](_0x34dc25(0x22d)), _0x5adbfd = document[_0x34dc25(0x61b)](_0x34dc25(0xab0)), _0x43dad6 = document[_0x34dc25(0x61b)](_0x34dc25(0xb50)), _0x31ac5e = document['getElementById'](_0x34dc25(0x290)), _0x679889 = document[_0x34dc25(0x61b)]('transfer-recipient-select'), _0x174c86 = document[_0x34dc25(0x61b)]('transfer-amount-input'), _0x1b6efa = document[_0x34dc25(0x61b)](_0x34dc25(0x8a8)), _0x5add9f = document[_0x34dc25(0x61b)](_0x34dc25(0x498)), _0x31571e = document[_0x34dc25(0x61b)](_0x34dc25(0x8cb)), _0x20ccef = document[_0x34dc25(0x61b)](_0x34dc25(0x21a)), _0x3ad033 = document['getElementById'](_0x34dc25(0x389)), _0x30d7df = document[_0x34dc25(0x61b)](_0x34dc25(0x61e)), _0x7b1014 = document[_0x34dc25(0x61b)]('close-summary-button'), _0x28aef8 = document['getElementById'](_0x34dc25(0x876)), _0x54d741 = document['getElementById'](_0x34dc25(0x27f)), _0x541cd9 = document['getElementById'](_0x34dc25(0x9ab)), _0x506991 = document[_0x34dc25(0x61b)](_0x34dc25(0x796)), _0x255841 = document[_0x34dc25(0x61b)](_0x34dc25(0x3e2)), _0xa4a0a2 = document['getElementById'](_0x34dc25(0xb88)), _0x45a227 = document[_0x34dc25(0x61b)]('export-char-button'), _0x3b0bdc = document['getElementById'](_0x34dc25(0x4dd)), _0x29b759 = document[_0x34dc25(0x61b)]('remove-font-button'), _0x2cf283 = document['getElementById'](_0x34dc25(0xa0d)), _0x3cdfa4 = document[_0x34dc25(0x61b)](_0x34dc25(0x4bd)); async function _0x87b2a3(_0x3c1d5b) { const _0xd753ec = _0x34dc25; try { const _0x4f16d6 = URL[_0xd753ec(0xa4f)](_0x3c1d5b), _0x56f9a2 = _0xd753ec(0x27d), _0x247b6b = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x56f9a2 + _0xd753ec(0x6d5) + _0x4f16d6 + _0xd753ec(0xb90); _0x27b98d[_0xd753ec(0x72d)] = _0x247b6b, document[_0xd753ec(0x706)][_0xd753ec(0x7c9)][_0xd753ec(0xb7e)](_0xd753ec(0x30d), '\x27' + _0x56f9a2 + '\x27'), _0x3cdfa4['textContent'] = _0xd753ec(0xa47); } catch (_0x115a39) { console[_0xd753ec(0x214)](_0xd753ec(0x893), _0x115a39), _0x925876(_0xd753ec(0x627)); } } async function _0x3b8d4e() { const _0x49a034 = _0x34dc25; try { if ('HXycF' !== _0x49a034(0x3f8)) { const _0x15fa6b = await _0x2b4d72(_0x49a034(0x4f3)); _0x15fa6b && (_0x49a034(0x48d) !== _0x49a034(0x48d) ? _0x3a8a13[_0x49a034(0x7c9)]['backgroundImage'] = '' : (console[_0x49a034(0x777)](_0x49a034(0xa33)), await _0x87b2a3(_0x15fa6b))); } else _0x5a0bb1[_0x49a034(0x230)]('[' + _0x3a7e4f(_0x5e93da) + _0x49a034(0xac3) + (_0x30ee7b[_0x49a034(0x8f0)]?.[_0x49a034(0x4ed)](/：(.+?)]/)?.[0x1] || '表情') + ']'); } catch (_0x27d8c0) { console[_0x49a034(0x214)]('加载已保存字体失败:', _0x27d8c0); } } async function _0x2763a2(_0x47b737) { const _0x2ed623 = _0x34dc25, _0x1d9207 = _0x47b737['target'][_0x2ed623(0xaa5)][0x0]; if (!_0x1d9207 || !_0x1d9207[_0x2ed623(0x9dc)][_0x2ed623(0x94b)]()[_0x2ed623(0x3f9)](_0x2ed623(0x2ae))) { _0x925876(_0x2ed623(0x366)); return; } _0x48b9ad(!![], _0x2ed623(0x9be)); try { await _0x190daf('custom_font_ttf', _0x1d9207), await _0x87b2a3(_0x1d9207), _0x925876(_0x2ed623(0x2d2)); } catch (_0x43e335) { _0x925876(_0x2ed623(0x728) + _0x43e335['message']); } finally { _0x48b9ad(![]), _0x2cf283[_0x2ed623(0x21f)] = ''; } } async function _0x53926f() { const _0x29816f = _0x34dc25, _0x23a860 = await _0x4fac8b('确定要恢复默认字体吗？'); if (_0x23a860) try { _0x29816f(0x208) !== _0x29816f(0x97b) ? (await _0x5505ca(_0x29816f(0x4f3)), _0x27b98d[_0x29816f(0x72d)] = '', document['documentElement']['style']['removeProperty'](_0x29816f(0x30d)), _0x3cdfa4['textContent'] = _0x29816f(0x559), _0x925876(_0x29816f(0x928))) : (_0x572d5b[_0x29816f(0x1f5)][_0x29816f(0xaf2)](_0x29816f(0x301)), _0x330a18[_0x29816f(0x1f5)][_0x29816f(0xaf2)](_0x29816f(0x7f3)), _0x17a0a3[_0x29816f(0x1f5)][_0x29816f(0xaf2)]('is-visible'), _0x348d6c(() => { const _0x5d5f9a = _0x29816f; _0x1f95ed[_0x5d5f9a(0x1f5)][_0x5d5f9a(0x194)](_0x5d5f9a(0xa74), _0x5d5f9a(0x7f3)), _0x34165f['classList']['remove']('is-entering-from-right'), _0x2d6f19[_0x5d5f9a(0x79b)] = _0x332237, _0x3f0773(), _0x5401a8[_0x5d5f9a(0x443)] = ![]; }, 0x2bc)); } catch (_0x1b431a) { _0x925876(_0x29816f(0x336) + _0x1b431a['message']); } } function _0x3b5830() { const _0x106c91 = _0x34dc25, _0x5a18d5 = document[_0x106c91(0x61b)]('theme-hue-slider'); if (!_0x5a18d5) return; const _0x25520b = localStorage[_0x106c91(0x2f0)](_0x106c91(0x35a)) || '35'; document[_0x106c91(0x706)][_0x106c91(0x7c9)]['setProperty'](_0x106c91(0xa69), _0x25520b), _0x5a18d5[_0x106c91(0x21f)] = _0x25520b, _0x5a18d5['addEventListener'](_0x106c91(0x602), () => { const _0xc3187 = _0x106c91, _0x237a64 = _0x5a18d5['value']; document[_0xc3187(0x706)]['style']['setProperty'](_0xc3187(0xa69), _0x237a64), localStorage[_0xc3187(0x783)](_0xc3187(0x35a), _0x237a64), _0x30d85c(); }); } function _0x53652f() { const _0x9a7359 = _0x34dc25, _0x2ef5ba = document[_0x9a7359(0x61b)]('theme-lightness-slider'); if (!_0x2ef5ba) return; const _0x363301 = localStorage['getItem'](_0x9a7359(0x632)) || '80'; document['documentElement'][_0x9a7359(0x7c9)][_0x9a7359(0xb7e)]('--primary-lightness', _0x363301 + '%'), _0x2ef5ba['value'] = _0x363301, _0x2ef5ba[_0x9a7359(0x46a)]('input', () => { const _0x3f27d9 = _0x9a7359, _0x235967 = _0x2ef5ba['value']; document[_0x3f27d9(0x706)][_0x3f27d9(0x7c9)]['setProperty'](_0x3f27d9(0x56d), _0x235967 + '%'), localStorage[_0x3f27d9(0x783)](_0x3f27d9(0x632), _0x235967), _0x30d85c(); }); } function _0x30d85c() { const _0x5b7434 = _0x34dc25, _0x1758a7 = document[_0x5b7434(0x61b)](_0x5b7434(0x824)); if (!_0x1758a7) return; _0x4295e2[_0x5b7434(0x81c)][_0x5b7434(0x421)] ? (_0x1758a7['style'][_0x5b7434(0xa43)] = _0x5b7434(0x4c2), _0x1758a7[_0x5b7434(0x7c9)][_0x5b7434(0xa1f)] = _0x5b7434(0x25f)) : 'ewspi' !== _0x5b7434(0x197) ? (_0x1758a7[_0x5b7434(0x7c9)]['color'] = _0x5b7434(0x78c), _0x1758a7[_0x5b7434(0x7c9)][_0x5b7434(0xa1f)] = _0x5b7434(0x678)) : (_0x58407e = _0x2d2b20[_0x5b7434(0x6a8)]('div'), _0x4cf048[_0x5b7434(0x6e1)] = _0x5b7434(0x9fc), _0x25cf01[_0x5b7434(0x6c7)] = _0x5b7434(0xa72), _0x4cad87[_0x5b7434(0x7c9)][_0x5b7434(0x7a7)] = _0x5b7434(0x990), _0x254768[_0x5b7434(0x7c9)]['padding'] = _0x5b7434(0x9c9), _0x46a9c6[_0x5b7434(0x7c9)]['borderRadius'] = '8px', _0x262e6c[_0x5b7434(0x1ce)](_0x4fc49b)); } function _0x4937b5() { const _0x3387fc = _0x34dc25; if (_0x3387fc(0x575) !== _0x3387fc(0x9b6)) { const _0x4c3aea = document['getElementById'](_0x3387fc(0xb5c)); if (!_0x4c3aea) return; _0x4c3aea['checked'] = _0x4295e2[_0x3387fc(0x81c)]['forceWhiteClock'] || ![], _0x4c3aea[_0x3387fc(0x46a)](_0x3387fc(0x631), () => { const _0x2f0274 = _0x3387fc; _0x2f0274(0x216) === _0x2f0274(0x216) ? (_0x4295e2[_0x2f0274(0x81c)][_0x2f0274(0x421)] = _0x4c3aea[_0x2f0274(0xa20)], _0x1b6337(), _0x30d85c()) : _0x93bb9f(![]); }); } else _0x44fcd2[_0x3387fc(0x6c7)] = _0x3387fc(0x587), _0x2b7fa4[_0x3387fc(0x21f)] = '', _0x4f9cd0[_0x3387fc(0x21f)] = _0x3387fc(0x461) + (_0x42a7e0['friendCircles'][_0x3387fc(0xa1e)] + 0x1), _0x285cc8[_0x3387fc(0x21f)] = _0x333ec9['activeUserProfileId'], _0x42c7c6[_0x3387fc(0x7c9)][_0x3387fc(0x458)] = _0x3387fc(0x678); } _0x45a227[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x5f8de2), _0x255841[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x354c86 = _0x34dc25; _0x354c86(0x31e) !== 'PNbco' ? (_0x56f20f[_0x354c86(0x832)] = ![], _0x158ce6[_0x354c86(0x6c7)] = '获取') : (_0x5d7d08(), _0xa4a0a2[_0x354c86(0x3cd)]()); }), _0xa4a0a2['addEventListener'](_0x34dc25(0x631), _0x116aa2); const _0x68c2f4 = { 'home': document[_0x34dc25(0x61b)](_0x34dc25(0x8f8)), 'chat': document[_0x34dc25(0x61b)](_0x34dc25(0xa67)), 'settings': document['getElementById'](_0x34dc25(0x323)), 'userProfile': document['getElementById'](_0x34dc25(0x5a7)), 'characterEdit': document[_0x34dc25(0x61b)]('character-edit-screen'), 'groupChatCreate': document[_0x34dc25(0x61b)](_0x34dc25(0xa6a)), 'wallpaper': document[_0x34dc25(0x61b)]('wallpaper-screen'), 'worldBook': document[_0x34dc25(0x61b)](_0x34dc25(0xacf)), 'worldBookEditor': document['getElementById']('world-book-editor-screen'), 'groupSettings': document[_0x34dc25(0x61b)](_0x34dc25(0x834)), 'music': document[_0x34dc25(0x61b)](_0x34dc25(0x6cf)), 'friendCircleList': document[_0x34dc25(0x61b)]('friend-circle-list-screen'), 'friendCircleEdit': document[_0x34dc25(0x61b)](_0x34dc25(0x390)), 'meetingList': document['getElementById'](_0x34dc25(0x2a3)), 'meetingView': document[_0x34dc25(0x61b)](_0x34dc25(0x8b9)), 'userProfileList': document[_0x34dc25(0x61b)](_0x34dc25(0xa13)), 'diaryList': document[_0x34dc25(0x61b)](_0x34dc25(0x8d2)), 'diaryView': document[_0x34dc25(0x61b)]('diary-view-screen'), 'musicLibrary': document[_0x34dc25(0x61b)](_0x34dc25(0x3b7)), 'musicUploadAltar': document[_0x34dc25(0x61b)](_0x34dc25(0x60d)), 'accounting': document[_0x34dc25(0x61b)](_0x34dc25(0x711)), 'snoopList': document[_0x34dc25(0x61b)]('snoop-list-screen'), 'snoopPhone': document[_0x34dc25(0x61b)](_0x34dc25(0x430)), 'calendar': document['getElementById'](_0x34dc25(0x34e)) }, _0x2977da = document[_0x34dc25(0x61b)]('upload-feed-bg-button'), _0xfee29d = document[_0x34dc25(0x61b)](_0x34dc25(0x4cf)), _0x212434 = document['getElementById']('reset-feed-bg-button'), _0x23fd47 = document['getElementById'](_0x34dc25(0xa89)), _0x19e224 = document[_0x34dc25(0x61b)](_0x34dc25(0x9b4)), _0x48cff5 = document[_0x34dc25(0x61b)]('back-to-home-from-wallpaper'), _0x253b41 = document[_0x34dc25(0x61b)](_0x34dc25(0x749)), _0x3d4b0e = document[_0x34dc25(0x61b)](_0x34dc25(0x373)); document[_0x34dc25(0x61b)](_0x34dc25(0x58b))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), async () => { const _0x29bca8 = _0x34dc25; if (_0x29bca8(0x7ad) !== _0x29bca8(0x7ad)) _0x3b1240[_0x29bca8(0x214)](_0x29bca8(0x77d), _0x1ea49c), _0x5262ce(_0x29bca8(0x8fe) + _0x56571a[_0x29bca8(0x1c9)]); else { const _0x96c142 = await _0x4fac8b(_0x29bca8(0x551)); if (_0x96c142) { if ('TXGzC' !== _0x29bca8(0x669)) { let _0x5e1dc0 = null; const _0x435622 = _0xdac7a6[_0x29bca8(0x7af)][_0x29bca8(0x695)](_0x1e09ea => _0x1e09ea[_0x29bca8(0x5c9)][_0x29bca8(0x2b7)](_0x5df573)); for (const _0x470e37 of _0x435622) { const _0x5a5857 = _0x18296e(_0x470e37['id']); if (_0x5a5857 && _0x5a5857['length'] > 0x0) { const _0x4a1993 = _0x5a5857[_0x5a5857[_0x29bca8(0xa1e)] - 0x1]; (!_0x5e1dc0 || _0x4a1993[_0x29bca8(0x6aa)] > _0x5e1dc0[_0x29bca8(0x6aa)]) && (_0x5e1dc0 = _0x4a1993); } } return _0x5e1dc0; } else { localStorage[_0x29bca8(0x662)]('badgeState'), localStorage[_0x29bca8(0x662)]('cardState'), localStorage[_0x29bca8(0x662)](_0x29bca8(0x18f)), localStorage['removeItem'](_0x29bca8(0x687)); const _0x342b84 = []; for (let _0xc35698 = 0x0; _0xc35698 < localStorage[_0x29bca8(0xa1e)]; _0xc35698++) { if (_0x29bca8(0x1a8) === 'OJQxB') { const _0x1261a9 = localStorage[_0x29bca8(0x807)](_0xc35698); _0x1261a9 && _0x1261a9[_0x29bca8(0x772)](_0x29bca8(0x387)) && _0x342b84[_0x29bca8(0x230)](_0x1261a9); } else { const _0x23d5bc = _0x529c43[_0x29bca8(0x6a8)](_0x29bca8(0xa9f)); _0x23d5bc[_0x29bca8(0x6e1)] = 'avatar-wrapper\x20' + _0xf9c5df; const _0x5c5a0e = _0x5a9256[_0x29bca8(0x6a8)](_0x29bca8(0x41e)); _0x5c5a0e[_0x29bca8(0x1b2)] = _0x1887c0, _0x5c5a0e[_0x29bca8(0x6e1)] = _0x29bca8(0x1c4); const _0x273b0d = _0x118d3a['createElement'](_0x29bca8(0xa9f)); return _0x273b0d[_0x29bca8(0x6e1)] = _0x29bca8(0x7c6), _0x2edeb1 && (_0x273b0d[_0x29bca8(0x7c9)][_0x29bca8(0x54b)] = _0x29bca8(0x3bd) + _0x8260d9 + '\x27)'), _0x23d5bc[_0x29bca8(0x1ce)](_0x5c5a0e), _0x23d5bc[_0x29bca8(0x1ce)](_0x273b0d), _0x23d5bc; } } _0x342b84[_0x29bca8(0xaa9)](_0x265384 => localStorage['removeItem'](_0x265384)), await _0x190daf(_0x29bca8(0x33f), await _0x30f5c0(_0x29bca8(0x5b0))), _0x925876(_0x29bca8(0x1b1)), setTimeout(() => location[_0x29bca8(0x377)](), 0x5dc); } } } }); const _0x412fe3 = document[_0x34dc25(0x61b)]('add-choice-modal'), _0x69471d = document['getElementById'](_0x34dc25(0x3ef)), _0x40fd0a = document[_0x34dc25(0x61b)]('choice-create-character'), _0x454398 = document[_0x34dc25(0x61b)](_0x34dc25(0x9b0)), _0x7be0b1 = document[_0x34dc25(0x61b)](_0x34dc25(0x411)), _0x1bf439 = document[_0x34dc25(0x61b)](_0x34dc25(0x404)), _0x4d5ce5 = document[_0x34dc25(0x61b)](_0x34dc25(0x48b)), _0x42ccbf = document[_0x34dc25(0x61b)](_0x34dc25(0x36e)), _0x369c97 = document[_0x34dc25(0x61b)](_0x34dc25(0xa57)), _0x211f91 = document[_0x34dc25(0x61b)]('app-chat'), _0x23196b = document[_0x34dc25(0x61b)]('app-settings'), _0x12e4b6 = document[_0x34dc25(0x61b)](_0x34dc25(0x8b2)), _0x3d2d98 = document[_0x34dc25(0x61b)](_0x34dc25(0x472)), _0x23e142 = document[_0x34dc25(0x61b)](_0x34dc25(0x84b)), _0x59e989 = document[_0x34dc25(0x61b)]('back-to-settings-from-user-profile'), _0x2f1578 = document['getElementById'](_0x34dc25(0x77b)), _0xea3523 = document[_0x34dc25(0x61b)](_0x34dc25(0x2ce)), _0x14e8f5 = document[_0x34dc25(0x61b)]('add-chat-button'), _0x4f0971 = document['getElementById']('chat-screen'), _0x3cf136 = document[_0x34dc25(0x61b)]('chat-messages'), _0x2a16a3 = document[_0x34dc25(0x61b)](_0x34dc25(0x639)), _0x54bb4e = document[_0x34dc25(0x61b)](_0x34dc25(0xa86)), _0x48d725 = document['getElementById'](_0x34dc25(0x992)), _0x561903 = document[_0x34dc25(0x61b)](_0x34dc25(0x799)), _0x45f0f7 = document[_0x34dc25(0x61b)](_0x34dc25(0x1a7)), _0x31c111 = document[_0x34dc25(0x61b)](_0x34dc25(0xa58)), _0x4032f6 = document[_0x34dc25(0x61b)](_0x34dc25(0x991)), _0x42ff06 = document['getElementById']('char-name-header'), _0xfe48d3 = document[_0x34dc25(0x61b)]('chat-sticker-button'), _0xcc3613 = document[_0x34dc25(0x61b)](_0x34dc25(0xb04)), _0x1ddc85 = document[_0x34dc25(0x61b)](_0x34dc25(0x8ae)), _0xefae0b = document[_0x34dc25(0x61b)](_0x34dc25(0x8fa)), _0x817758 = document['getElementById'](_0x34dc25(0x7f9)), _0x382950 = document['getElementById'](_0x34dc25(0x4a6)), _0x1e7a79 = document[_0x34dc25(0x61b)]('api-endpoint'), _0x5be61e = document['getElementById'](_0x34dc25(0x613)), _0x1a99bb = document[_0x34dc25(0x61b)](_0x34dc25(0x614)), _0xd89b14 = document[_0x34dc25(0x61b)]('save-api-settings-button'), _0x33b392 = document[_0x34dc25(0x61b)](_0x34dc25(0x580)), _0x2a7dfd = document[_0x34dc25(0x61b)](_0x34dc25(0xac8)), _0x551a9b = document[_0x34dc25(0x61b)]('context-lines-per-chat'), _0x38e143 = document['getElementById'](_0x34dc25(0x244)), _0x944a2f = document[_0x34dc25(0x61b)](_0x34dc25(0x76b)), _0x36ee53 = document['getElementById'](_0x34dc25(0xa1c)), _0x219e63 = document[_0x34dc25(0x61b)](_0x34dc25(0x9b8)), _0x4fc206 = document[_0x34dc25(0x61b)]('save-user-profile-button'), _0x5877a1 = document['getElementById']('editing-char-id'), _0x2f2d0d = document['getElementById'](_0x34dc25(0x6f7)), _0xb76210 = document[_0x34dc25(0x61b)](_0x34dc25(0x795)), _0x38967f = document[_0x34dc25(0x61b)](_0x34dc25(0x3d6)), _0x35d88d = document[_0x34dc25(0x61b)]('char-edit-avatar-preview'), _0x136ed3 = document['getElementById'](_0x34dc25(0x1f9)), _0x561076 = document['getElementById'](_0x34dc25(0xba3)), _0x3a3e29 = document[_0x34dc25(0x61b)]('save-char-button'), _0x3ba134 = document[_0x34dc25(0x61b)](_0x34dc25(0xb9d)), _0x53b159 = document[_0x34dc25(0x61b)](_0x34dc25(0x4d7)); let _0x38c310 = null; const _0x43afa8 = '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', _0x201a69 = _0x34dc25(0x952); _0x4295e2 = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': _0x34dc25(0x9e8), 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x1b6337() { const _0x3bd252 = _0x34dc25; if ('IgyHR' === _0x3bd252(0xb42)) try { const _0x595d87 = { 'characters': _0x4295e2[_0x3bd252(0x45f)], 'worldBooks': _0x4295e2[_0x3bd252(0x496)], 'chats': _0x4295e2['chats'], 'userProfile': _0x4295e2['userProfile'], 'apiSettings': _0x4295e2[_0x3bd252(0x484)], 'preferences': _0x4295e2[_0x3bd252(0x81c)], 'activeChatId': _0x4295e2['activeChatId'], 'diaries': _0x4295e2[_0x3bd252(0x801)], 'friendCircles': _0x4295e2[_0x3bd252(0x7f0)], 'activeFriendCircleId': _0x4295e2[_0x3bd252(0xb77)], 'userProfiles': _0x4295e2[_0x3bd252(0x59b)], 'activeUserProfileId': _0x4295e2[_0x3bd252(0x2e4)], 'accountingData': _0x4295e2[_0x3bd252(0x3c9)], 'accountingLedger': _0x4295e2['accountingLedger'], 'calendarEvents': _0x4295e2['calendarEvents'] }; localStorage[_0x3bd252(0x783)]('appState', JSON[_0x3bd252(0x1c5)](_0x595d87)); } catch (_0x432abd) { _0x3bd252(0xa1a) !== 'HhZKn' ? (console[_0x3bd252(0x214)]('Failed\x20to\x20save\x20state\x20to\x20localStorage:', _0x432abd), _0x925876(_0x3bd252(0x6d7))) : _0x342ad5(_0x345e67['id']); } else _0x112a7b['style']['padding'] = '0'; } function _0x424257() { const _0x37e2cd = _0x34dc25; let _0x28b081 = null; try { if ('lfFYj' === _0x37e2cd(0x830)) { const _0x2d1232 = _0xc59dd2['querySelector'](_0x37e2cd(0xb23)); if (!_0x2d1232) return; _0x2d1232['id'] === _0x37e2cd(0x8b9) ? _0x4220de() : _0x46addb(); } else _0x28b081 = localStorage[_0x37e2cd(0x2f0)](_0x37e2cd(0x372)); } catch (_0xa0c219) { console[_0x37e2cd(0x214)]('Failed\x20to\x20read\x20state\x20from\x20localStorage:', _0xa0c219), _0x925876('无法读取状态，浏览器可能禁用了存储功能。'); } if (_0x28b081) try { if (_0x37e2cd(0x27a) === _0x37e2cd(0x27a)) { const _0x2e566c = JSON[_0x37e2cd(0xb4e)](_0x28b081); if (!_0x2e566c || typeof _0x2e566c !== _0x37e2cd(0x9f4)) throw new Error('Invalid\x20saved\x20state\x20format'); Array[_0x37e2cd(0x9bd)](_0x2e566c['characters']) && (_0x4295e2[_0x37e2cd(0x45f)] = _0x2e566c[_0x37e2cd(0x45f)]['map'](_0x599c0c => ({ 'offlineBackground': '', ..._0x599c0c }))['filter'](_0x415fa5 => _0x415fa5 && typeof _0x415fa5 === _0x37e2cd(0x9f4) && _0x415fa5['id'])); _0x2e566c['accountingData'] && (_0x4295e2[_0x37e2cd(0x3c9)] = _0x2e566c[_0x37e2cd(0x3c9)]); _0x2e566c['accountingLedger'] && (_0x4295e2['accountingLedger'] = _0x2e566c[_0x37e2cd(0x904)]); if (Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x496)])) { if (_0x37e2cd(0xafa) === _0x37e2cd(0x853)) { const _0x4512da = _0x13041a[_0x37e2cd(0x76d)](_0x37e2cd(0xb23)); if (_0x4512da && (_0x4512da['id'] === _0x37e2cd(0x8b9) || _0x4512da['id'] === 'chat-screen')) _0x138f91(); else { const _0x40a68d = _0x147537[_0x37e2cd(0x4f8)](_0x37e2cd(0xba1)); _0x40a68d[_0x37e2cd(0xaa9)](_0x10ecaf => _0x10ecaf[_0x37e2cd(0x194)]()); } } else _0x4295e2['worldBooks'] = _0x2e566c['worldBooks']; } if (Array['isArray'](_0x2e566c['diaries'])) { if (_0x37e2cd(0x896) !== 'GWzjI') { if (!_0x2fed2a['isArray'](_0x49a5c8) || _0x187e11['length'] === 0x0) return _0x37e2cd(0x4af); return _0x37e2cd(0x27b) + _0x559f23['map']((_0xf6666c, _0x4db9fa) => { const _0x2a9279 = _0x37e2cd, _0x2110bb = _0x1511d5[_0x2a9279(0x1c5)](_0xf6666c[_0x2a9279(0x777)] || [])[_0x2a9279(0x1dc)](/'/g, _0x2a9279(0x4ac))['replace'](/"/g, _0x2a9279(0x544)), _0x125c72 = _0xf6666c['contact_name'] || _0x2a9279(0xa49); return _0x2a9279(0x25a) + (_0x4db9fa < _0x56f65d[_0x2a9279(0xa1e)] - 0x1 ? _0x2a9279(0x3c3) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x2110bb + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x125c72 + _0x2a9279(0xa68) + _0x57fefb + '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>' + _0x125c72[_0x2a9279(0x6e2)](0x0) + _0x2a9279(0x4c3) + _0x125c72 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0xf6666c[_0x2a9279(0xb5e)] || '') + _0x2a9279(0x944); })[_0x37e2cd(0x247)]('') + '</div>'; } else _0x4295e2[_0x37e2cd(0x801)] = _0x2e566c[_0x37e2cd(0x801)]; } Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x2ed)]) && (_0x4295e2[_0x37e2cd(0x2ed)] = _0x2e566c[_0x37e2cd(0x2ed)]); if (Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x7f0)])) { if (_0x37e2cd(0x242) !== _0x37e2cd(0x242)) { _0x3ce64e[_0x37e2cd(0x1f5)]['add']('sticker'); const _0x28745d = _0x486888[_0x37e2cd(0x6a8)](_0x37e2cd(0x41e)); _0x28745d[_0x37e2cd(0x1b2)] = _0x1495c7, _0x28745d[_0x37e2cd(0x1f5)]['add'](_0x37e2cd(0x397)), _0x158c05[_0x37e2cd(0x1ce)](_0x28745d); } else _0x4295e2[_0x37e2cd(0x7f0)] = _0x2e566c['friendCircles'], _0x4295e2[_0x37e2cd(0xb77)] = _0x2e566c[_0x37e2cd(0xb77)]; } else { if (Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x995)]) && _0x2e566c[_0x37e2cd(0x995)][_0x37e2cd(0xa1e)] > 0x0) { if (_0x37e2cd(0x2a0) !== _0x37e2cd(0x2a0)) _0x57ff31[_0x37e2cd(0x7c9)][_0x37e2cd(0x54b)] = _0x37e2cd(0x3bd) + _0x34232e[_0x37e2cd(0x64e)] + '\x27)', _0x3de6e3[_0x37e2cd(0x7c9)][_0x37e2cd(0x2ff)] = _0x37e2cd(0x211), _0x51d0d6[_0x37e2cd(0x7c9)][_0x37e2cd(0x9b1)] = _0x37e2cd(0x231); else { console['log'](_0x37e2cd(0x277)); const _0x27b24f = { 'id': _0x37e2cd(0xb44) + Date['now'](), 'name': '我的动态', 'boundUserProfileId': _0x2e566c[_0x37e2cd(0x2e4)], 'memberCharacterIds': _0x2e566c[_0x37e2cd(0x45f)][_0x37e2cd(0x959)](_0x5e9f53 => _0x5e9f53['id']), 'posts': _0x2e566c[_0x37e2cd(0x995)] }; _0x4295e2[_0x37e2cd(0x7f0)] = [_0x27b24f], _0x4295e2[_0x37e2cd(0xb77)] = _0x27b24f['id']; } } } if (Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x59b)])) _0x4295e2['userProfiles'] = _0x2e566c['userProfiles'], _0x4295e2['activeUserProfileId'] = _0x2e566c[_0x37e2cd(0x2e4)]; else { if (_0x2e566c['userProfile']) { console['log'](_0x37e2cd(0x8b6)); const _0x28d2d5 = { 'id': _0x37e2cd(0x488) + Date[_0x37e2cd(0xb3d)](), 'name': _0x2e566c[_0x37e2cd(0x5f2)][_0x37e2cd(0x9dc)] || '我', 'avatar': _0x2e566c['userProfile'][_0x37e2cd(0x1c4)] || _0x17eab7, 'persona': _0x2e566c[_0x37e2cd(0x5f2)]['persona'] || '' }; _0x4295e2['userProfiles'] = [_0x28d2d5], _0x4295e2[_0x37e2cd(0x2e4)] = _0x28d2d5['id']; } } _0x2e566c[_0x37e2cd(0x484)] && typeof _0x2e566c[_0x37e2cd(0x484)] === _0x37e2cd(0x9f4) && (_0x4295e2[_0x37e2cd(0x484)] = { ..._0x4295e2[_0x37e2cd(0x484)], ..._0x2e566c['apiSettings'] }); _0x2e566c['preferences'] && typeof _0x2e566c['preferences'] === _0x37e2cd(0x9f4) ? _0x4295e2[_0x37e2cd(0x81c)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null, ..._0x2e566c['preferences'] } : 'mWNUu' === _0x37e2cd(0x663) ? _0x5ca1e7[_0x37e2cd(0x1b2)] = _0x5d764b[_0x37e2cd(0x37c)] : _0x4295e2[_0x37e2cd(0x81c)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null }; if (Array[_0x37e2cd(0x9bd)](_0x2e566c['chats'])) _0x4295e2['chats'] = _0x2e566c[_0x37e2cd(0x7af)], _0x4295e2[_0x37e2cd(0x845)] = _0x2e566c[_0x37e2cd(0x845)] || null; else { if (Array[_0x37e2cd(0x9bd)](_0x2e566c[_0x37e2cd(0x45f)])) { console[_0x37e2cd(0x777)]('Migrating\x20old\x20data\x20structure\x20to\x20new\x20chat-based\x20structure.'), _0x4295e2[_0x37e2cd(0x7af)] = _0x2e566c[_0x37e2cd(0x45f)][_0x37e2cd(0x959)](_0x11f6b4 => ({ 'id': _0x37e2cd(0x65d) + _0x11f6b4['id'], 'type': _0x37e2cd(0x780), 'participantIds': [_0x11f6b4['id']] })); if (_0x2e566c[_0x37e2cd(0x6a1)]) { if (_0x37e2cd(0x7cf) === _0x37e2cd(0x7cf)) _0x4295e2['activeChatId'] = _0x37e2cd(0x65d) + _0x2e566c[_0x37e2cd(0x6a1)]; else { const _0x182562 = _0x467378(_0x2ba2df[0x1]), _0x5e801f = _0x1c73ce[0x2][_0x37e2cd(0x2c7)](), _0x4a0af6 = _0xc3f3a4(_0x9e1563[_0x37e2cd(0x845)]); let _0x30a865 = null; if (_0x5e801f === _0x4a0af6[_0x37e2cd(0x9dc)]) _0x30a865 = _0x4a0af6['id']; else { const _0x56abe7 = _0x3fe0d8(); if (_0x56abe7['type'] === _0x37e2cd(0x519)) { const _0x3c14db = _0x322ec3[_0x37e2cd(0x45f)]['find'](_0x1d300f => _0x56abe7[_0x37e2cd(0x5c9)][_0x37e2cd(0x2b7)](_0x1d300f['id']) && _0x1d300f[_0x37e2cd(0x9dc)] === _0x5e801f); if (_0x3c14db) _0x30a865 = _0x3c14db['id']; } } if (_0x30a865) return { 'type': _0x37e2cd(0x42c), 'amount': _0x182562, 'recipientId': _0x30a865, 'senderId': _0x2fc7c6['id'] }; else return { 'type': 'text', 'content': _0x37e2cd(0x414) + _0x5e801f + _0x37e2cd(0x723) }; } } _0x2e566c[_0x37e2cd(0x45f)][_0x37e2cd(0xaa9)](_0x515c72 => { const _0x5e2787 = _0x37e2cd; if (_0x5e2787(0x9cd) !== _0x5e2787(0x7cb)) { const _0x418f39 = _0x5e2787(0x1a9) + _0x515c72['id'], _0x481182 = _0x5e2787(0x4cb) + _0x515c72['id'], _0x5bdb48 = localStorage['getItem'](_0x418f39); if (_0x5bdb48) { if ('ABZXu' === _0x5e2787(0x664)) { const _0x4dd06a = _0x4801e9(_0x3c6ccc[_0x5e2787(0x21f)]); if (_0x512b71(_0x4dd06a) || _0x4dd06a <= 0x0) { _0x3c8c4c(_0x5e2787(0x55f)); return; } const _0x15dde3 = _0x35470c(); let _0x35bbfc = null; _0x15dde3[_0x5e2787(0x63a)] === _0x5e2787(0x519) ? _0x35bbfc = _0x43f3b8['value'] : _0x35bbfc = _0x15dde3[_0x5e2787(0x5c9)][0x0]; const _0x28d580 = _0xbd6148(_0x15dde3['id']), _0x1f0a91 = { 'role': 'user', 'type': _0x5e2787(0x42c), 'content': _0x5e2787(0x907) + (_0x30ecec(_0x35bbfc)?.[_0x5e2787(0x9dc)] || '未知') + _0x5e2787(0x33a) + _0x4dd06a + ']', 'amount': _0x4dd06a, 'recipientId': _0x35bbfc, 'senderId': _0x28d580['id'], 'timestamp': _0x1c349f[_0x5e2787(0xb3d)]() }; _0x57bd83[_0x5e2787(0x369)][_0x5e2787(0x230)](_0x1f0a91), _0x3b81f4(), _0x3f5349(), _0x2d24eb['classList'][_0x5e2787(0x194)]('show'); } else localStorage[_0x5e2787(0x783)](_0x481182, _0x5bdb48), localStorage[_0x5e2787(0x662)](_0x418f39); } } else { if (_0x441202) _0x52908f(_0x85ac99); _0x48b986 = null, _0x4ee502[_0x5e2787(0x63e)] = [], _0x2823b6[_0x5e2787(0xa6b)] = null, _0x119f62[_0x5e2787(0x61b)](_0x5e2787(0x513))['style'][_0x5e2787(0x458)] = _0x5e2787(0x678), _0x5beb94[_0x5e2787(0x845)] = null, _0x2c9c42(), _0x430422(_0x5e2787(0x20e), _0x5e2787(0x707)); } }); } } } else _0x57d07e(_0x2455b2), _0xcb1e10(); } catch (_0x2974d9) { console[_0x37e2cd(0x214)]('Failed\x20to\x20parse\x20state\x20from\x20localStorage,\x20resetting.', _0x2974d9), _0x4295e2[_0x37e2cd(0x45f)] = [], _0x4295e2[_0x37e2cd(0x7af)] = [], _0x4295e2[_0x37e2cd(0x845)] = null; try { _0x37e2cd(0xb1f) !== _0x37e2cd(0xb1f) ? _0x484878['type'] = _0x37e2cd(0x8f6) : localStorage[_0x37e2cd(0x662)](_0x37e2cd(0x372)); } catch (_0x7cb534) { if (_0x37e2cd(0x8bd) === _0x37e2cd(0x61f)) { const _0x5418e0 = _0x2af891[_0x37e2cd(0x76d)]('.music-post-song-card'); _0x5418e0 && _0x5418e0[_0x37e2cd(0x46a)](_0x37e2cd(0x3cd), function () { const _0x509d40 = { 'id': _0x288c6d['id'], 'url': _0x2c651f['playableUrl'] }; _0xd6e640(this, _0x509d40); }); } else console['error'](_0x37e2cd(0xa76), _0x7cb534); } } let _0x4646e5 = ![]; if (_0x4295e2[_0x37e2cd(0x45f)][_0x37e2cd(0xa1e)] === 0x0) 'wMUTz' === _0x37e2cd(0x564) ? (_0x4646e5 = !![], _0x4295e2[_0x37e2cd(0x845)] = null) : _0x4400bc(_0x37e2cd(0x209)); else !_0x4295e2[_0x37e2cd(0x7af)][_0x37e2cd(0x7e6)](_0x4f3c60 => _0x4f3c60['id'] === _0x4295e2[_0x37e2cd(0x845)]) && (_0x4295e2[_0x37e2cd(0x845)] = _0x4295e2[_0x37e2cd(0x7af)][0x0]?.['id'] || null); return _0x1b6337(), _0x4646e5; } function _0x236ac2() { const _0x703c54 = _0x34dc25; if (!_0x4295e2[_0x703c54(0x845)]) return; try { _0x703c54(0x24a) === 'LLeUB' ? _0x2de916 += _0x703c54(0x625) : localStorage[_0x703c54(0x783)](_0x703c54(0x1a9) + _0x4295e2['activeChatId'], JSON[_0x703c54(0x1c5)](_0x4295e2[_0x703c54(0x369)])); } catch (_0xfa25da) { console[_0x703c54(0x214)](_0x703c54(0x522), _0xfa25da), _0x925876(_0x703c54(0x81b)); } } function _0x57f23e() { const _0xf886cd = _0x34dc25; if (_0xf886cd(0x665) !== _0xf886cd(0x665)) _0xc2dd4a = _0x2bf5e8[_0xf886cd(0x2f0)](_0xf886cd(0x372)); else { if (!_0x4295e2[_0xf886cd(0x845)]) { _0x4295e2[_0xf886cd(0x369)] = [], _0x1639f3(); return; } let _0x5260f8 = null; try { _0x5260f8 = localStorage['getItem'](_0xf886cd(0x1a9) + _0x4295e2[_0xf886cd(0x845)]); } catch (_0x2fbd49) { _0xf886cd(0x851) !== _0xf886cd(0x409) ? console[_0xf886cd(0x214)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x4295e2[_0xf886cd(0x845)], _0x2fbd49) : (_0x7fe14e[_0xf886cd(0x7c9)][_0xf886cd(0x38c)] = _0xf886cd(0x971), _0x64b56d[_0xf886cd(0x7c9)]['top'] = '34%', _0x3991eb[_0xf886cd(0x7c9)][_0xf886cd(0x5d5)] = _0xf886cd(0x95d), _0x1d2ea0[_0xf886cd(0x7c9)][_0xf886cd(0x827)] = _0xf886cd(0xae3), _0x393d3b['style'][_0xf886cd(0x458)] = 'block'); } let _0x375f41 = []; if (_0x5260f8) { if (_0xf886cd(0xaea) === _0xf886cd(0xaea)) try { const _0x3bd1bb = JSON[_0xf886cd(0xb4e)](_0x5260f8); Array[_0xf886cd(0x9bd)](_0x3bd1bb) && (_0x375f41 = _0x3bd1bb[_0xf886cd(0x695)](_0x2c30e2 => _0x2c30e2 && typeof _0x2c30e2 === _0xf886cd(0x9f4) && typeof _0x2c30e2[_0xf886cd(0x55e)] === 'string' && typeof _0x2c30e2[_0xf886cd(0x8f0)] !== _0xf886cd(0xa17))); } catch (_0x4fa4b1) { console[_0xf886cd(0x214)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20' + _0x4295e2['activeChatId'] + _0xf886cd(0x50c), _0x4fa4b1); try { localStorage[_0xf886cd(0x662)]('chatHistory_' + _0x4295e2[_0xf886cd(0x845)]); } catch (_0x421ab4) { _0xf886cd(0x735) === _0xf886cd(0x875) ? (_0x2dd411[_0xf886cd(0x7c9)][_0xf886cd(0x458)] = 'none', _0x3bfe82[_0xf886cd(0x7c9)]['display'] = 'block') : console['error'](_0xf886cd(0x19c), _0x421ab4); } } else _0x227c22['image'] = _0x3430da; } _0x4295e2['conversationHistory'] = _0x375f41, _0x3cf136['innerHTML'] = '', _0x4295e2['conversationHistory'] && _0x4295e2[_0xf886cd(0x369)]['forEach']((_0x53004d, _0x432f20) => _0x4b41ed(_0x53004d, _0x432f20)), setTimeout(() => { const _0x3dd8b9 = _0xf886cd; _0x3cf136[_0x3dd8b9(0xb0c)] = _0x3cf136[_0x3dd8b9(0x6cb)]; }, 0x0); } } async function _0x3f3a7b() { const _0x592002 = _0x34dc25; if ('KwzwK' !== _0x592002(0xa07)) { const _0x4716b0 = document[_0x592002(0x61b)](_0x592002(0x8f8)); if (!_0x4716b0) { console[_0x592002(0x214)](_0x592002(0x5ed)); return; } try { let _0x1980f1 = await _0x2b4d72(_0x592002(0x33f)); if (!_0x1980f1) { if (_0x592002(0x288) !== _0x592002(0x5c5)) { const _0x52379b = localStorage[_0x592002(0x2f0)](_0x592002(0x96b)); if (_0x52379b) { if (_0x592002(0x55a) === _0x592002(0x55a)) console[_0x592002(0x777)](_0x592002(0x444)), _0x1980f1 = await _0x30f5c0(_0x52379b), await _0x190daf(_0x592002(0x33f), _0x1980f1), localStorage['removeItem']('customWallpaper'); else return [_0x589268]; } } else { _0x618ac3['error'](_0x592002(0xa32) + _0x49531d[_0x592002(0x9dc)] + _0x592002(0x7c0)); return; } } _0x1980f1 ? (_0x4716b0[_0x592002(0x7c9)][_0x592002(0x54b)] = _0x592002(0x83d) + URL['createObjectURL'](_0x1980f1) + ')', _0x4716b0[_0x592002(0x7c9)]['backgroundSize'] = _0x592002(0x211), _0x4716b0[_0x592002(0x7c9)][_0x592002(0x9b1)] = 'center') : _0x4716b0['style'][_0x592002(0x54b)] = ''; } catch (_0x83889) { console[_0x592002(0x214)](_0x592002(0x5dd), _0x83889), _0x4716b0 && (_0x592002(0x1f2) !== _0x592002(0x1f2) ? _0x2a9a4c(_0x592002(0x266)) : _0x4716b0[_0x592002(0x7c9)][_0x592002(0x54b)] = ''); } } else _0x57b24e += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; } function _0x529a13() { const _0x317fdb = _0x34dc25, _0x508871 = localStorage[_0x317fdb(0x2f0)](_0x317fdb(0x9bc)); _0x508871 ? _0x317fdb(0x28f) === 'NDGad' ? _0x38f3c4 = _0x5be2ef[_0x317fdb(0x37c)] : document[_0x317fdb(0x61b)](_0x317fdb(0x6cf))[_0x317fdb(0x7c9)][_0x317fdb(0xb7e)]('--feed-bg-image', _0x317fdb(0x83d) + _0x508871 + ')') : document[_0x317fdb(0x61b)](_0x317fdb(0x6cf))[_0x317fdb(0x7c9)][_0x317fdb(0xb7e)](_0x317fdb(0x609), _0x317fdb(0x678)); } async function _0x31fc1f(_0x534196) { const _0x347c3f = _0x34dc25; try { if ('AGKpA' !== _0x347c3f(0x868)) await _0x190daf(_0x347c3f(0x33f), _0x534196), await _0x3f3a7b(), _0x925876(_0x347c3f(0x998)); else { const _0x17242d = _0x29261e[_0x347c3f(0x7f0)]['find'](_0x417f23 => _0x417f23['id'] === _0x147908); _0x17242d && (_0x17242d[_0x347c3f(0x9dc)] = _0x250920, _0x17242d[_0x347c3f(0x4b1)] = _0x45f12c, _0x17242d['memberCharacterIds'] = _0x416ff2); } } catch (_0x5ab837) { _0x347c3f(0xb19) === 'NqObZ' ? (console[_0x347c3f(0x214)](_0x347c3f(0x77d), _0x5ab837), _0x925876('保存壁纸失败:\x20' + _0x5ab837['message'])) : _0x246437 = _0x45557b[_0x347c3f(0x1c5)](_0x5df0a0); } } function _0x20a8e2(_0x3b2464) { const _0x2dd6e4 = _0x34dc25; if ('LxidO' !== _0x2dd6e4(0x312)) { const _0x2f29b1 = { 'quotedMessage': null, 'content': _0x3b2464 }, _0x1f7b52 = _0x3b2464[_0x2dd6e4(0x4ed)](/^\[引用\|(.*?)\|(.*?)\]\s*/); if (_0x1f7b52) { if (_0x2dd6e4(0x743) === _0x2dd6e4(0x743)) _0x2f29b1['quotedMessage'] = { 'sender': _0x1f7b52[0x1][_0x2dd6e4(0x2c7)](), 'content': _0x1f7b52[0x2][_0x2dd6e4(0x2c7)]() }, _0x2f29b1['content'] = _0x3b2464['substring'](_0x1f7b52[0x0][_0x2dd6e4(0xa1e)])[_0x2dd6e4(0x2c7)](); else { const _0x145e10 = _0xf5dac9(_0x2e4079[_0x2dd6e4(0x19a)], _0x3a5227[_0x2dd6e4(0x2a9)], _0x4dffcd); if (_0x145e10[_0x2dd6e4(0xa1e)] === 0x0) return; const _0x2ca26c = _0x5c7e6b === 0x0 ? _0x2dd6e4(0x4e2) : _0x2dd6e4(0x184); _0x5f2b71[_0x2dd6e4(0x230)]('##\x20' + _0x2ca26c + _0x50eece(_0x588080[_0x2dd6e4(0x19a)]) + '\x0a' + _0x145e10[_0x2dd6e4(0x247)]('\x0a')), _0x2517ca[_0x4bed1c['chat']['id']] = _0x145e10[_0x2dd6e4(0xa1e)]; } } return _0x2f29b1; } else { _0x1c853a(_0x2dd6e4(0x4a3)); return; } } const _0x26eac1 = document[_0x34dc25(0x61b)](_0x34dc25(0x5b3)), _0x59c4b3 = document[_0x34dc25(0x61b)](_0x34dc25(0x934)), _0x33e036 = document[_0x34dc25(0x61b)](_0x34dc25(0x616)), _0x560575 = document[_0x34dc25(0x61b)](_0x34dc25(0xb2c)), _0x1f178d = document['getElementById']('cancel-action-button'), _0x520663 = document['getElementById']('quote-message-button'), _0x2a5cd0 = document[_0x34dc25(0x61b)](_0x34dc25(0x34b)), _0x6f4543 = document[_0x34dc25(0x61b)](_0x34dc25(0x8b8)), _0x6e1c51 = document[_0x34dc25(0x61b)](_0x34dc25(0x9da)), _0x48ea4c = document['getElementById']('save-edit-button'), _0x2e1cff = document[_0x34dc25(0x61b)](_0x34dc25(0x5b4)); let _0x50c8ab = null; function _0x224ceb(_0x308f1a) { const _0x465f45 = _0x34dc25; _0x50c8ab = _0x308f1a, _0x26eac1[_0x465f45(0x1f5)][_0x465f45(0xaf2)]('show'); } function _0x4423bf() { const _0x365941 = _0x34dc25; _0x365941(0x96c) === _0x365941(0x2d9) ? (_0x28c695(![]), _0x1cbcc4['error']('全量导入失败:', _0x543e0f), _0x5837b8('导入失败:\x20' + _0xaa0cda['message'])) : _0x26eac1[_0x365941(0x1f5)]['remove'](_0x365941(0xa03)); } function _0x261db7() { _0x4423bf(), _0x50c8ab = null; } function _0x29468e() { const _0x3fb6bb = _0x34dc25; if (_0x50c8ab === null) return; _0x4295e2[_0x3fb6bb(0x369)][_0x3fb6bb(0x99e)](_0x50c8ab, 0x1), _0x236ac2(), _0x5eb56f(), _0x261db7(); } function _0x375e05() { const _0x4dc4e7 = _0x34dc25; if (_0x50c8ab === null) return; const _0x21c602 = _0x4295e2[_0x4dc4e7(0x369)][_0x50c8ab]; if (!_0x21c602) return; _0x6e1c51[_0x4dc4e7(0x21f)] = _0x21c602['content'], _0x4423bf(), _0x2a5cd0[_0x4dc4e7(0x1f5)][_0x4dc4e7(0xaf2)]('show'), _0x6e1c51['focus'](); } function _0xf03fa7() { const _0x2bec3e = _0x34dc25; if (_0x50c8ab === null) return; const _0x53ec63 = _0x6e1c51[_0x2bec3e(0x21f)][_0x2bec3e(0x2c7)](); if (_0x53ec63 === '') { if (_0x2bec3e(0x50a) !== 'iXpTA') { _0x2fd7b9(); return; } else _0x297f8d = _0x3095b6[_0x2bec3e(0xb4e)](_0x6c9087); } const _0x3be03d = _0x4295e2[_0x2bec3e(0x369)][_0x50c8ab]; _0x3be03d && (_0x3be03d['content'] = _0x53ec63, _0x236ac2(), _0x5eb56f()), _0x2a5cd0['classList'][_0x2bec3e(0x194)](_0x2bec3e(0xa03)), _0x50c8ab = null; } function _0x2fd7b9() { const _0x5bfa9c = _0x34dc25; _0x2a5cd0[_0x5bfa9c(0x1f5)][_0x5bfa9c(0x194)](_0x5bfa9c(0xa03)), _0x50c8ab = null; } _0x59c4b3[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x261db7), _0x1f178d[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x261db7), _0x560575['addEventListener'](_0x34dc25(0x3cd), _0x29468e), _0x33e036[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x375e05), _0x520663[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x3999d0), _0x4032f6[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x261627), _0x48ea4c[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0xf03fa7), _0x2e1cff[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x2fd7b9), _0x6f4543['addEventListener']('click', _0x2fd7b9); function _0x3999d0() { const _0x49fdcc = _0x34dc25; if (_0x49fdcc(0x7d4) !== _0x49fdcc(0x2da)) { if (_0x50c8ab === null) return; const _0x1356e2 = _0x4295e2['conversationHistory'][_0x50c8ab]; if (!_0x1356e2) return; const _0x4290db = _0x33b638(); let _0x5d983 = '未知'; if (_0x1356e2['role'] === _0x49fdcc(0x742)) _0x5d983 = _0x4295e2['userProfile'][_0x49fdcc(0x9dc)] || '我'; else { const _0x1ec36d = _0x1356e2[_0x49fdcc(0x428)] || _0x4290db?.[_0x49fdcc(0x5c9)][0x0], _0x5ccf8a = _0x5aa3d9(_0x1ec36d); _0x5d983 = _0x5ccf8a ? _0x5ccf8a['name'] : '角色'; } let _0xe023aa = _0x1356e2['content'] || ''; if (_0x1356e2[_0x49fdcc(0xa4b)]) _0xe023aa = _0x49fdcc(0x6ca); if (_0x1356e2[_0x49fdcc(0x37c)]) _0xe023aa = _0x49fdcc(0x7dd); if (_0xe023aa[_0x49fdcc(0xa1e)] > 0x32) _0xe023aa = _0xe023aa['substring'](0x0, 0x32) + _0x49fdcc(0x9ec); _0x4295e2[_0x49fdcc(0x9ce)] = { 'sender': _0x5d983, 'content': _0xe023aa }, _0x19d3d4(), _0x261db7(), _0x2a16a3[_0x49fdcc(0x5a1)](); } else _0x3902dc(_0x220df2['id']); } function _0x19d3d4() { const _0x29a836 = _0x34dc25; if (_0x29a836(0x248) !== 'aTfTB') { if (!_0x4295e2['activeQuote']) return; _0x45f0f7[_0x29a836(0x6c7)] = _0x29a836(0xae2) + _0x4295e2[_0x29a836(0x9ce)][_0x29a836(0x2d4)], _0x31c111[_0x29a836(0x6c7)] = _0x4295e2['activeQuote'][_0x29a836(0x8f0)], _0x561903[_0x29a836(0x7c9)][_0x29a836(0x458)] = _0x29a836(0x1c1); } else _0xf34dcc(_0x4e63c7), _0x36becf[_0x29a836(0x21f)] = '', _0x4b1abc(_0x384c33, 0x64); } function _0x261627() { const _0x1e8334 = _0x34dc25; 'ypOzd' === 'ahsVM' ? _0x3e3ba6['activeFriendCircleId'] = null : (_0x4295e2[_0x1e8334(0x9ce)] = null, _0x561903[_0x1e8334(0x7c9)][_0x1e8334(0x458)] = _0x1e8334(0x678)); } function _0xd18e04(_0x1397b6, _0x1e5017) { const _0x5e6a53 = _0x34dc25, _0x4a6cae = document[_0x5e6a53(0x61b)](_0x5e6a53(0x49e)); _0x4a6cae && (_0x5e6a53(0x2c6) === _0x5e6a53(0x2c6) ? _0x1397b6 === 'home' ? _0x4a6cae['style'][_0x5e6a53(0x458)] = 'inline-block' : _0x4a6cae['style'][_0x5e6a53(0x458)] = _0x5e6a53(0x678) : _0x4abf83(_0x5e6a53(0x64d))), _0x38c310 = _0x1e5017 || null, Object[_0x5e6a53(0xad1)](_0x68c2f4)[_0x5e6a53(0xaa9)](_0x16d7c1 => _0x16d7c1[_0x5e6a53(0x1f5)]['remove'](_0x5e6a53(0x45a))), _0x68c2f4[_0x1397b6] && _0x68c2f4[_0x1397b6][_0x5e6a53(0x1f5)][_0x5e6a53(0xaf2)](_0x5e6a53(0x45a)), _0x1397b6 !== 'chat' && (_0x5e6a53(0x763) !== _0x5e6a53(0x321) ? _0x4f0971[_0x5e6a53(0x1f5)][_0x5e6a53(0x194)](_0x5e6a53(0x567)) : _0x971404[_0x5e6a53(0x230)](_0x148aa9)); } function _0x2c224f(_0x1eeef3) { const _0x526ae3 = _0x34dc25; _0x1eeef3 ? _0x4f0971[_0x526ae3(0x1f5)][_0x526ae3(0xaf2)]('show-chat-view') : _0x4f0971[_0x526ae3(0x1f5)][_0x526ae3(0x194)](_0x526ae3(0x567)); } async function _0x3a458e() { const _0xa6917 = _0x34dc25; if (_0xa6917(0x392) === _0xa6917(0x392)) { _0xea3523[_0xa6917(0x72d)] = ''; for (const _0x164509 of _0x4295e2[_0xa6917(0x7af)]) { const _0x4307c6 = document[_0xa6917(0x6a8)]('li'); _0x4307c6['className'] = 'character-item', _0x4307c6[_0xa6917(0x6c3)]['id'] = _0x164509['id']; let _0x14eb60 = _0x2fd48c, _0x3bbe6a = '群聊', _0x47fb9d = ''; if (_0x164509[_0xa6917(0x63a)] === _0xa6917(0x780)) { const _0x1c5214 = _0x5aa3d9(_0x164509[_0xa6917(0x5c9)][0x0]); if (_0x1c5214) _0x14eb60 = _0x1c5214[_0xa6917(0x1c4)] || _0x2fd48c, _0x3bbe6a = _0x1c5214[_0xa6917(0x9dc)] || _0xa6917(0x212), _0x47fb9d = _0x1c5214[_0xa6917(0x4db)] || '私聊'; else { if ('PGxmy' !== 'OXcSj') _0x3bbe6a = _0xa6917(0x2d5), _0x47fb9d = '错误：找不到角色'; else return _0x456146[_0xa6917(0x45f)][_0xa6917(0x7e6)](_0x2151eb => _0x2151eb['id'] === _0x3189); } } else { if (_0xa6917(0x1c8) === _0xa6917(0x1c8)) { _0x3bbe6a = _0x164509[_0xa6917(0x9dc)] || _0xa6917(0x5cb), _0x47fb9d = _0x164509['participantIds']['length'] + _0xa6917(0x260); const _0x1bd165 = await _0x2b4d72(_0xa6917(0x8dc) + _0x164509['id']); if (_0x1bd165) _0x14eb60 = URL[_0xa6917(0xa4f)](_0x1bd165); } else _0x588cdb(); } _0x4307c6[_0xa6917(0x72d)] = _0xa6917(0x915) + _0x14eb60 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x3bbe6a + _0xa6917(0x3e8) + _0x47fb9d + _0xa6917(0x331), _0x4307c6[_0xa6917(0x76d)](_0xa6917(0x2db))[_0xa6917(0x46a)](_0xa6917(0x3cd), () => { const _0x35bfe3 = _0xa6917; _0x35bfe3(0x311) !== _0x35bfe3(0x3b1) ? (_0x2481e4(_0x164509['id']), _0x2c224f(!![])) : _0x146c7d['key'] === _0x35bfe3(0x7d7) && !_0xddb815[_0x35bfe3(0x308)] && (_0x2c88c6['preventDefault'](), _0x2ce3ad()); }), _0xea3523[_0xa6917(0x1ce)](_0x4307c6); } } else { const _0x4865ad = _0x18da0d(_0x49fdd5['activeMeetingCharId']); if (!_0x4865ad) return; const _0x375d9d = _0x14dda7(_0x50bf21['getElementById'](_0xa6917(0x89f))['value']), _0xdf7972 = _0x304225(_0x55056b['getElementById']('sprite-slider-y')[_0xa6917(0x21f)]), _0x30385e = _0x365924(_0xa3e7c7[_0xa6917(0x61b)](_0xa6917(0x40d))[_0xa6917(0x21f)]) / 0x64; _0x4865ad[_0xa6917(0x384)] = { 'x': _0x375d9d, 'y': _0xdf7972, 'scale': _0x30385e }, _0x5d63c9(), _0x57b86a(_0xa6917(0x871)), _0x5053f2(!![]); } } function _0xb41a83() { const _0x406d29 = _0x34dc25, _0x5caca5 = document[_0x406d29(0x61b)]('meeting-list-container'); _0x5caca5[_0x406d29(0x72d)] = ''; const _0x372c30 = _0x4295e2[_0x406d29(0x45f)][_0x406d29(0x695)](_0xee77e1 => _0x4295e2[_0x406d29(0x7af)][_0x406d29(0x3bb)](_0x12f14a => _0x12f14a['type'] === 'private' && _0x12f14a[_0x406d29(0x5c9)][_0x406d29(0x2b7)](_0xee77e1['id']))); if (_0x372c30[_0x406d29(0xa1e)] === 0x0) { _0x5caca5[_0x406d29(0x72d)] = _0x406d29(0x6fd); return; } _0x372c30[_0x406d29(0xaa9)](_0x307596 => { const _0x338466 = _0x406d29; if (_0x338466(0x596) === _0x338466(0x596)) { const _0x28c15d = document['createElement']('li'); _0x28c15d['className'] = 'character-item', _0x28c15d[_0x338466(0x6c3)][_0x338466(0x259)] = _0x307596['id'], _0x28c15d[_0x338466(0x72d)] = _0x338466(0x597) + (_0x307596[_0x338466(0x1c4)] || _0x2fd48c) + _0x338466(0x356) + _0x307596[_0x338466(0x9dc)] + _0x338466(0x3a5) + (_0x307596['remark'] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x28c15d['addEventListener'](_0x338466(0x3cd), () => { _0x5076b4(_0x307596['id']); }), _0x5caca5[_0x338466(0x1ce)](_0x28c15d); } else _0x8af8a4['activeChatId'] = _0x440ef4[_0x338466(0x7af)][0x0]?.['id'] || null, _0x2adb1d(_0x1ec764[_0x338466(0x845)]); }); } async function _0x5076b4(_0x58c3d3) { const _0x2d6684 = _0x34dc25, _0x227a8b = _0x5aa3d9(_0x58c3d3); if (!_0x227a8b) return; document[_0x2d6684(0x61b)](_0x2d6684(0x8ba))[_0x2d6684(0x1b2)] = '', _0x4295e2[_0x2d6684(0xa6b)] = _0x58c3d3; const _0x883a = _0x4295e2[_0x2d6684(0x7af)][_0x2d6684(0x7e6)](_0x585ce4 => _0x585ce4[_0x2d6684(0x63a)] === _0x2d6684(0x780) && _0x585ce4[_0x2d6684(0x5c9)]['includes'](_0x58c3d3)); _0x883a ? (_0x4295e2[_0x2d6684(0x845)] = _0x883a['id'], _0x1b6337(), _0x57f23e(), _0x268551(_0x58c3d3)) : _0x4295e2[_0x2d6684(0x369)] = []; document[_0x2d6684(0x61b)](_0x2d6684(0x79e))[_0x2d6684(0x6c7)] = _0x227a8b['name']; const _0x553beb = document[_0x2d6684(0x61b)]('meeting-main-content'); try { if ('QdVmo' !== _0x2d6684(0x40f)) { const _0xe47975 = await _0x2b4d72(_0x2d6684(0x1df) + _0x58c3d3); _0xe47975 ? (_0x553beb[_0x2d6684(0x7c9)]['backgroundImage'] = _0x2d6684(0x3bd) + URL[_0x2d6684(0xa4f)](_0xe47975) + '\x27)', _0x553beb[_0x2d6684(0x7c9)][_0x2d6684(0x2ff)] = _0x2d6684(0x211), _0x553beb[_0x2d6684(0x7c9)][_0x2d6684(0x9b1)] = _0x2d6684(0x231)) : _0x553beb[_0x2d6684(0x7c9)]['backgroundImage'] = _0x2d6684(0x678); } else { const _0x3f9561 = _0x55b832[_0x2d6684(0x4ed)](_0xdfec28); if (_0x3f9561) { const _0x4cc6f8 = _0x1ebfe4(_0x3f9561[0x1], 0xa), _0x45e872 = _0x26b320(_0x3f9561[0x2], 0xa), _0x23ab25 = _0x5419fe(_0x3f9561[0x3], 0xa) * (_0x3f9561[0x3][_0x2d6684(0xa1e)] === 0x2 ? 0xa : 0x1), _0x9ac379 = _0x4cc6f8 * 0x3c + _0x45e872 + _0x23ab25 / 0x3e8, _0x321ce7 = _0x161f87['replace'](_0x430ce3, '')[_0x2d6684(0x2c7)](); _0x321ce7 && _0x369f21['push']({ 'time': _0x9ac379, 'text': _0x321ce7 }); } } } catch (_0x32f63f) { if ('zMhxF' !== _0x2d6684(0x49d)) return { 'type': _0x2d6684(0x8f6), 'content': _0x2281d4 }; else console[_0x2d6684(0x214)](_0x2d6684(0x4dc) + _0x58c3d3 + ':', _0x32f63f), _0x553beb['style'][_0x2d6684(0x54b)] = _0x2d6684(0x678); } _0x56a34a(), _0x294f1c(); if (_0x1600c6) clearInterval(_0x1600c6); _0x52675b(), _0x1600c6 = setInterval(_0x52675b, 0x2710), document['getElementById'](_0x2d6684(0x513))[_0x2d6684(0x7c9)][_0x2d6684(0x458)] = _0x2d6684(0x1c1), _0xd18e04(_0x2d6684(0x707), 'meetingList'); } function _0x294f1c() { const _0x1e46db = _0x34dc25, _0x14fa88 = document[_0x1e46db(0x61b)](_0x1e46db(0x36a)); _0x14fa88[_0x1e46db(0x72d)] = ''; const _0xc059fa = _0x14fa88[_0x1e46db(0x76d)]('#message-anchor'); if (_0xc059fa) _0xc059fa['remove'](); _0x4295e2[_0x1e46db(0x369)] && _0x4295e2[_0x1e46db(0x369)][_0x1e46db(0xaa9)]((_0x4cc242, _0x460471) => { const _0x16a451 = _0x1e46db; if (!_0x4cc242[_0x16a451(0x5b2)] || _0x4cc242[_0x16a451(0x55e)] === _0x16a451(0x4f2)) return; const _0x4e848d = document[_0x16a451(0x6a8)]('p'); _0x4e848d['dataset']['historyIndex'] = _0x460471; const _0x42b0de = _0x4cc242[_0x16a451(0x8f0)]['replace'](/\n/g, _0x16a451(0xb56)); let _0x5227fd = '', _0x55a1ec = ''; const _0x5a768e = _0x4b57ed(_0x4295e2[_0x16a451(0x845)]); if (_0x4cc242['role'] === _0x16a451(0x742)) _0x16a451(0x8a2) !== _0x16a451(0xb2a) ? (_0x5227fd = _0x5a768e[_0x16a451(0x9dc)] || '我', _0x55a1ec = _0x16a451(0x508)) : _0x28838b('有\x20' + _0x4a9926 + _0x16a451(0xa4e)); else { if (_0x4cc242[_0x16a451(0x55e)] === 'assistant') { if (_0x16a451(0x85a) !== _0x16a451(0x85a)) { _0x5e7ea0(_0x16a451(0x566)); return; } else { const _0x1d9d8d = _0x5aa3d9(_0x4cc242[_0x16a451(0x428)] || _0x4295e2[_0x16a451(0xa6b)]); _0x5227fd = _0x1d9d8d?.[_0x16a451(0x9dc)] || '角色', _0x55a1ec = 'speaker-ai'; } } } _0x4e848d[_0x16a451(0x7c9)][_0x16a451(0x7a7)] = _0x16a451(0x990), _0x4e848d['style'][_0x16a451(0x5ce)] = '15px\x2020px', _0x4e848d[_0x16a451(0x7c9)][_0x16a451(0x7d0)] = _0x16a451(0x2a7), _0x4e848d[_0x16a451(0x7c9)][_0x16a451(0x63f)] = _0x16a451(0x2d0), _0x5227fd ? _0x4e848d[_0x16a451(0x72d)] = '<span\x20class=\x22' + _0x55a1ec + _0x16a451(0x856) + (_0x55a1ec === _0x16a451(0x508) ? _0x16a451(0x5d8) : _0x16a451(0x3c0)) + _0x16a451(0x9a8) + _0x5227fd + _0x16a451(0x3e9) + _0x42b0de : (_0x4e848d[_0x16a451(0x6e1)] = _0x16a451(0x8ee), _0x4e848d['style'][_0x16a451(0x273)] = _0x16a451(0x4c1), _0x4e848d[_0x16a451(0x7c9)][_0x16a451(0xa43)] = '#d1d5db', _0x4e848d[_0x16a451(0x72d)] = _0x42b0de), _0x14fa88[_0x16a451(0x1ce)](_0x4e848d); }); if (_0x4295e2[_0x1e46db(0x2ac)]) { if (_0x1e46db(0x702) !== _0x1e46db(0x702)) _0x2cae78(_0x1e46db(0x88b)); else { let _0x45f39f = _0x14fa88[_0x1e46db(0x76d)](_0x1e46db(0xba1)); !_0x45f39f && (_0x1e46db(0x83f) === _0x1e46db(0x6e4) ? _0x5d8ec8['style'][_0x1e46db(0x458)] = _0x1e46db(0x3f1) : (_0x45f39f = document['createElement'](_0x1e46db(0xa9f)), _0x45f39f[_0x1e46db(0x6e1)] = _0x1e46db(0x9fc), _0x45f39f[_0x1e46db(0x6c7)] = _0x1e46db(0xa72), _0x45f39f[_0x1e46db(0x7c9)][_0x1e46db(0x7a7)] = _0x1e46db(0x990), _0x45f39f[_0x1e46db(0x7c9)][_0x1e46db(0x5ce)] = _0x1e46db(0x9c9), _0x45f39f['style'][_0x1e46db(0x7d0)] = _0x1e46db(0x2a7), _0x14fa88[_0x1e46db(0x1ce)](_0x45f39f))); } } const _0x255782 = document[_0x1e46db(0x6a8)](_0x1e46db(0xa9f)); _0x255782['id'] = _0x1e46db(0x53e), _0x14fa88[_0x1e46db(0x1ce)](_0x255782), setTimeout(() => { const _0x100473 = _0x1e46db; _0x100473(0x6b6) !== 'HCXwX' ? _0x255782['scrollIntoView']({ 'behavior': _0x100473(0x507), 'block': _0x100473(0xaa1) }) : _0x3a012f[_0x100473(0x5c9)] = _0x4d54db[_0x100473(0x5c9)]['filter'](_0x3248be => _0x3248be !== _0x274a6f); }, 0x32); } function _0x5eb56f() { const _0x428dc1 = _0x34dc25, _0x566e41 = document['querySelector'](_0x428dc1(0xb23)); if (!_0x566e41) return; _0x566e41['id'] === _0x428dc1(0x8b9) ? _0x294f1c() : _0x1639f3(); } function _0x1639f3() { const _0x42d4cb = _0x34dc25, _0x45e521 = _0x4295e2['conversationHistory']['filter'](_0x2b4f34 => !_0x2b4f34['isOffline'] && _0x2b4f34[_0x42d4cb(0x55e)] !== 'system'); if (_0x45e521[_0x42d4cb(0xa1e)] > _0x4295e2[_0x42d4cb(0x4b0)]) { if (_0x42d4cb(0xaeb) !== _0x42d4cb(0xb0e)) { let _0xbf9718 = _0x3cf136[_0x42d4cb(0x76d)](_0x42d4cb(0x6b8)); if (!_0xbf9718) { if (_0x42d4cb(0x548) === _0x42d4cb(0x554)) { const _0x189cb2 = _0x46c39d[_0x3a24af]; _0x1425a4(_0x189cb2); } else _0xbf9718 = document['createElement'](_0x42d4cb(0x655)), _0xbf9718[_0x42d4cb(0x6c7)] = _0x42d4cb(0xae9), _0xbf9718[_0x42d4cb(0x6e1)] = _0x42d4cb(0xa63), _0xbf9718[_0x42d4cb(0x7c9)][_0x42d4cb(0x46c)] = _0x42d4cb(0x507), _0xbf9718['style'][_0x42d4cb(0x5ec)] = _0x42d4cb(0xb80), _0xbf9718[_0x42d4cb(0x7c9)][_0x42d4cb(0x5ce)] = _0x42d4cb(0x761), _0xbf9718['onclick'] = () => { const _0x3b56f2 = _0x42d4cb, _0x5e01f5 = _0x3cf136, _0x139700 = _0x5e01f5[_0x3b56f2(0x6cb)], _0x897c32 = _0x5e01f5[_0x3b56f2(0xb0c)]; _0x4295e2[_0x3b56f2(0x4b0)] += 0x64, _0x1639f3(), requestAnimationFrame(() => { const _0x33cc03 = _0x3b56f2; if (_0x33cc03(0x3ee) === _0x33cc03(0x2de)) { const _0x2908e5 = _0x134d6a['value']; _0x177c54['documentElement'][_0x33cc03(0x7c9)][_0x33cc03(0xb7e)](_0x33cc03(0x56d), _0x2908e5 + '%'), _0x1dace3[_0x33cc03(0x783)](_0x33cc03(0x632), _0x2908e5), _0x3599a7(); } else { const _0x132281 = _0x5e01f5[_0x33cc03(0x6cb)]; _0x5e01f5[_0x33cc03(0xb0c)] = _0x897c32 + (_0x132281 - _0x139700); } }); }, _0x3cf136[_0x42d4cb(0x867)] ? _0x3cf136['insertBefore'](_0xbf9718, _0x3cf136[_0x42d4cb(0x867)]) : _0x3cf136[_0x42d4cb(0x1ce)](_0xbf9718); } } else _0x293383(![]); } else { const _0xf42701 = _0x3cf136[_0x42d4cb(0x76d)](_0x42d4cb(0x6b8)); if (_0xf42701) _0xf42701['remove'](); } Array['from'](_0x3cf136[_0x42d4cb(0xa73)])[_0x42d4cb(0xaa9)](_0x302a7c => { const _0x5dd1f7 = _0x42d4cb; if ('TUGKJ' === _0x5dd1f7(0x29a)) { _0x4acdbe('正在构思中，请稍候...'); return; } else !_0x302a7c[_0x5dd1f7(0x1f5)][_0x5dd1f7(0x5f7)]('load-more-btn') && _0x302a7c[_0x5dd1f7(0x194)](); }); const _0xfc07a8 = _0x45e521['slice'](-_0x4295e2[_0x42d4cb(0x4b0)]); _0xfc07a8[_0x42d4cb(0xaa9)](_0x35dacf => { const _0x13b837 = _0x42d4cb; if (_0x13b837(0xb82) !== 'tigup') { const _0x465bcb = _0xba3b3b['getElementById'](_0x13b837(0x824)); if (!_0x465bcb) return; _0x1ee6c4[_0x13b837(0x81c)]['forceWhiteClock'] ? (_0x465bcb[_0x13b837(0x7c9)][_0x13b837(0xa43)] = _0x13b837(0x4c2), _0x465bcb[_0x13b837(0x7c9)][_0x13b837(0xa1f)] = _0x13b837(0x25f)) : (_0x465bcb['style']['color'] = 'var(--text-color)', _0x465bcb['style'][_0x13b837(0xa1f)] = _0x13b837(0x678)); } else { const _0xb1b650 = _0x4295e2['conversationHistory'][_0x13b837(0x66b)](_0x35dacf); _0xb1b650 > -0x1 && (_0x13b837(0x9e5) === 'YMenU' ? _0x4acb0f = _0x18ac48[_0x13b837(0x460)](..._0x2d2c9c[_0x13b837(0xad3)][_0x13b837(0x959)](_0x2fc63c => _0x2fc63c[_0x13b837(0x6aa)])) : _0x4b41ed(_0x35dacf, _0xb1b650)); } }); if (_0x4295e2['isGenerating']) { if (_0x42d4cb(0x53b) !== _0x42d4cb(0x53b)) { if (_0x3592a7[_0x42d4cb(0x6e7)][_0x42d4cb(0x1f5)]['contains'](_0x42d4cb(0x7cd))) { const _0x31353d = _0x37b69a[_0x42d4cb(0x6e7)][_0x42d4cb(0x6c3)]['id']; _0x165284(_0x42d4cb(0x25c))[_0x42d4cb(0xb30)](_0x18f17c => { _0x18f17c && _0x5dfd4e(_0x31353d); }); } } else { let _0x2bc37c = _0x3cf136[_0x42d4cb(0x76d)](_0x42d4cb(0xba1)); !_0x2bc37c && (_0x42d4cb(0x869) !== 'WdNKJ' ? _0x3a690d(_0xb5e260['id']) : (_0x2bc37c = document['createElement'](_0x42d4cb(0xa9f)), _0x2bc37c[_0x42d4cb(0x6e1)] = 'typing-indicator', _0x2bc37c[_0x42d4cb(0x6c7)] = _0x42d4cb(0x5ea), _0x3cf136[_0x42d4cb(0x1ce)](_0x2bc37c))); } } if (_0xfc07a8['length'] <= _0x4295e2['displayedMessageCount']) { if (_0x42d4cb(0x408) !== _0x42d4cb(0x3b0)) setTimeout(() => { const _0x404478 = _0x42d4cb; 'qolfO' === 'nNqVd' ? _0x61b10c[_0x404478(0x593)]({ 'behavior': _0x404478(0x507), 'block': 'end' }) : _0x3cf136[_0x404478(0xb0c)] = _0x3cf136[_0x404478(0x6cb)]; }, 0x0); else { const _0x596d1c = _0x4f6589[_0x42d4cb(0x807)](_0x4e6378); _0x596d1c && _0x596d1c[_0x42d4cb(0x772)](_0x42d4cb(0x387)) && _0x1cdd85[_0x42d4cb(0x230)](_0x596d1c); } } } function _0x4b41ed(_0x1bdc92, _0x155164) { const _0x92aade = _0x34dc25; if (_0x92aade(0x236) !== _0x92aade(0x431)) { const { role: _0x228495, content: _0x4dc16c, displayUrl: _0x5d6081, image: _0x546d4d, senderId: _0x424735 } = _0x1bdc92, _0x5b9116 = _0x228495 === _0x92aade(0x725) ? 'ai' : _0x228495, _0xc982a4 = _0x33b638(), _0x543aa0 = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0x543aa0['classList'][_0x92aade(0xaf2)](_0x92aade(0x2e9), _0x5b9116), _0x543aa0[_0x92aade(0x6c3)][_0x92aade(0xb55)] = _0x155164; const _0x3cb105 = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0x3cb105[_0x92aade(0x6e1)] = _0x92aade(0x2fe); let _0x119f99 = ''; if (_0x228495 === _0x92aade(0x742)) { const _0x4e20e3 = _0x4b57ed(_0x4295e2['activeChatId']); _0x119f99 = _0x4e20e3['avatar'] || _0x17eab7; } else { _0x119f99 = _0x2fd48c; let _0x5b159b = null; if (_0xc982a4?.[_0x92aade(0x63a)] === _0x92aade(0x780)) _0x92aade(0x577) !== _0x92aade(0x85d) ? _0x5b159b = _0x5aa3d9(_0xc982a4[_0x92aade(0x5c9)][0x0]) : _0x5383fa && (_0x5a1608[_0x92aade(0x7c9)]['display'] = _0x92aade(0x678)); else _0xc982a4?.[_0x92aade(0x63a)] === _0x92aade(0x519) && _0x424735 && (_0x5b159b = _0x5aa3d9(_0x424735)); _0x5b159b?.[_0x92aade(0x1c4)] && (_0x119f99 = _0x5b159b['avatar']); } let _0x46c764 = ''; const _0x5278f5 = _0x5aa3d9(_0xc982a4?.[_0x92aade(0x5c9)][0x0]); if (_0x228495 === _0x92aade(0x742)) _0x5278f5 && (_0x46c764 = _0x5278f5[_0x92aade(0x38d)] || ''); else { let _0xb3fad9 = null; if (_0xc982a4?.['type'] === _0x92aade(0x780)) _0x92aade(0x68e) === _0x92aade(0x19b) ? _0x366b49[_0x92aade(0x214)](_0x92aade(0x6db), _0x432135) : _0xb3fad9 = _0x5278f5; else _0xc982a4?.['type'] === _0x92aade(0x519) && _0x424735 && (_0xb3fad9 = _0x5aa3d9(_0x424735)); _0xb3fad9 && (_0x46c764 = _0xb3fad9[_0x92aade(0x1e8)] || ''); } const _0xa1e346 = _0x4c219a(_0x119f99, _0x46c764), _0x50706d = _0x4dc16c && _0x4dc16c[_0x92aade(0x2c7)]()['startsWith'](_0x92aade(0x545)) && _0x4dc16c[_0x92aade(0x2c7)]()[_0x92aade(0x3f9)](_0x92aade(0x300)); if (_0x50706d) { const _0xe36415 = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0xe36415['className'] = _0x92aade(0xb72), _0xe36415[_0x92aade(0x72d)] = _0x4dc16c, _0x5b9116 === _0x92aade(0x742) ? (_0x3cb105[_0x92aade(0x1ce)](_0xe36415), _0x3cb105['appendChild'](_0xa1e346)) : (_0x3cb105['appendChild'](_0xa1e346), _0x3cb105[_0x92aade(0x1ce)](_0xe36415)); } else { const _0x40eb84 = document['createElement']('div'); _0x40eb84['classList']['add']('message', _0x5b9116); if (_0xc982a4?.['type'] === 'private') { if (_0x92aade(0x423) === 'NBfNQ') { const _0x1e586e = _0xc982a4['participantIds'][0x0]; _0x40eb84['classList'][_0x92aade(0xaf2)](_0x92aade(0x676) + _0x1e586e); } else _0x33dc54[_0x92aade(0x443)] = ![]; } if (_0x1bdc92['quotedMessage']) { if (_0x92aade(0x6e6) === _0x92aade(0x6e6)) { const _0x49e6c4 = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0x49e6c4[_0x92aade(0x6e1)] = _0x92aade(0x8b0); const _0x3ae1ba = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0x3ae1ba[_0x92aade(0x6e1)] = _0x92aade(0x562), _0x3ae1ba[_0x92aade(0x6c7)] = _0x1bdc92[_0x92aade(0x30a)][_0x92aade(0x2d4)]; const _0x4a6a70 = document[_0x92aade(0x6a8)](_0x92aade(0xa9f)); _0x4a6a70[_0x92aade(0x6e1)] = 'quoted-content', _0x4a6a70['textContent'] = _0x1bdc92[_0x92aade(0x30a)]['content'], _0x49e6c4[_0x92aade(0x1ce)](_0x3ae1ba), _0x49e6c4[_0x92aade(0x1ce)](_0x4a6a70), _0x40eb84[_0x92aade(0x1ce)](_0x49e6c4); } else { if (_0x501d08) { const _0x380dfc = _0x3097f6[_0x92aade(0xa4f)](_0x2c39f2); _0x5080e6[_0x92aade(0x1b2)] = _0x380dfc, _0x28be5d[_0x92aade(0x5a9)] = () => { const _0x3212ef = _0x92aade; _0x345314[_0x3212ef(0x3c8)](_0x380dfc); }; } else _0x44727f['alt'] = _0x92aade(0x5a8); } } if (_0x5d6081) { _0x40eb84[_0x92aade(0x1f5)][_0x92aade(0xaf2)](_0x92aade(0x25e)); const _0x220661 = document[_0x92aade(0x6a8)]('img'); _0x220661[_0x92aade(0x1b2)] = _0x5d6081, _0x220661[_0x92aade(0x1f5)][_0x92aade(0xaf2)](_0x92aade(0x397)), _0x40eb84[_0x92aade(0x1ce)](_0x220661); } else { if (_0x1bdc92[_0x92aade(0x37c)] || _0x1bdc92['imageId']) { _0x40eb84[_0x92aade(0x1f5)][_0x92aade(0xaf2)]('image'); const _0x20cdec = document[_0x92aade(0x6a8)]('img'); _0x20cdec[_0x92aade(0x1f5)][_0x92aade(0xaf2)](_0x92aade(0x674)), _0x40eb84[_0x92aade(0x1ce)](_0x20cdec); _0x1bdc92['image'] ? _0x92aade(0x914) === _0x92aade(0x914) ? _0x20cdec[_0x92aade(0x1b2)] = _0x1bdc92['image'] : _0x5b75ac[_0x92aade(0x230)](_0x2294fb[_0x92aade(0xae6)](_0x28685b, _0x43c939 + _0xc17741)) : (_0x20cdec[_0x92aade(0x1b2)] = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', _0x2b4d72(_0x1bdc92[_0x92aade(0x295)])['then'](_0xfe00d2 => { const _0xf87b7c = _0x92aade; if (_0xfe00d2) { const _0x487cde = URL[_0xf87b7c(0xa4f)](_0xfe00d2); _0x20cdec['src'] = _0x487cde, _0x20cdec[_0xf87b7c(0x5a9)] = () => { URL['revokeObjectURL'](_0x487cde); }; } else _0x20cdec['alt'] = '图片加载失败'; })[_0x92aade(0x3ab)](_0x432d61 => { const _0x331b4d = _0x92aade; _0x331b4d(0x694) !== _0x331b4d(0x99a) ? (console['error'](_0x331b4d(0x1f1), _0x432d61), _0x20cdec['alt'] = _0x331b4d(0x5a8)) : _0x3eb43e['innerHTML'] = _0x331b4d(0x284) + _0x4b0e74 + _0x331b4d(0x585); })); if (_0x4dc16c) { if (_0x92aade(0x1dd) !== _0x92aade(0x1dd)) _0x183ed3[_0x92aade(0x3a7)](), _0x5a82cb(); else { const _0x5d618f = document[_0x92aade(0x6a8)]('p'); _0x5d618f[_0x92aade(0x7c9)][_0x92aade(0x710)] = _0x92aade(0x32d), _0x5d618f['textContent'] = _0x4dc16c, _0x40eb84[_0x92aade(0x1ce)](_0x5d618f); } } } else { if (_0x1bdc92['type'] === 'transfer') { _0x40eb84[_0x92aade(0x1f5)][_0x92aade(0xaf2)]('transfer'); const _0xb15a9d = _0x1bdc92[_0x92aade(0x55e)] === _0x92aade(0x742) ? _0x4b57ed(_0x4295e2[_0x92aade(0x845)]) : _0x5aa3d9(_0x1bdc92[_0x92aade(0x428)]), _0x5202f1 = _0x1bdc92[_0x92aade(0x463)] === _0x4b57ed(_0x4295e2[_0x92aade(0x845)])['id'] ? _0x4b57ed(_0x4295e2[_0x92aade(0x845)]) : _0x5aa3d9(_0x1bdc92['recipientId']), _0x4c4bad = _0xb15a9d?.[_0x92aade(0x9dc)] ? _0xb15a9d[_0x92aade(0x9dc)] + _0x92aade(0xa7b) : '转账', _0x3e859b = _0x5202f1?.[_0x92aade(0x9dc)] ? _0x92aade(0x1d9) + _0x5202f1['name'] : '转账', _0x5b3c00 = _0x92aade(0x1be) + _0x4c4bad + _0x92aade(0x68d) + _0x1bdc92[_0x92aade(0x4a1)][_0x92aade(0x1ba)](0x2) + _0x92aade(0xa2a) + _0x3e859b + _0x92aade(0x8a9); _0x40eb84[_0x92aade(0x72d)] = _0x5b3c00; } else { if (_0x1bdc92[_0x92aade(0x63a)] === _0x92aade(0x5c7)) { _0x40eb84[_0x92aade(0x1f5)][_0x92aade(0xaf2)]('music'); const _0x39a0af = document[_0x92aade(0x6a8)]('div'); _0x39a0af['className'] = _0x92aade(0x776), _0x39a0af[_0x92aade(0x1f5)][_0x92aade(0xaf2)](_0x92aade(0xaf6)); const _0x2b2565 = _0x1bdc92[_0x92aade(0x55e)] === _0x92aade(0x742) ? _0x4b57ed(_0x4295e2[_0x92aade(0x845)])[_0x92aade(0x9dc)] || '你' : _0x5aa3d9(_0x1bdc92[_0x92aade(0x428)])?.['name'] || 'TA', _0x2b34f3 = _0x92aade(0xada) + _0x1bdc92['timestamp'], _0x6a61c1 = '<img\x20id=\x22' + _0x2b34f3 + _0x92aade(0x75a) + _0x2fd48c + '\x22>'; _0x1bdc92['coverId'] && ('cDYqb' !== 'OYkxJ' ? _0x2b4d72(_0x1bdc92[_0x92aade(0xb8c)])[_0x92aade(0xb30)](_0x6506d3 => { const _0x30ceee = _0x92aade, _0x1038b8 = document[_0x30ceee(0x61b)](_0x2b34f3); if (_0x1038b8 && _0x6506d3) _0x1038b8[_0x30ceee(0x1b2)] = URL['createObjectURL'](_0x6506d3); }) : _0x1380a7(_0x8fefac)), _0x1bdc92[_0x92aade(0x3dc)] ? _0x92aade(0x987) === _0x92aade(0x987) ? _0x39a0af[_0x92aade(0x72d)] = _0x92aade(0xb3c) + _0x6a61c1 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x1bdc92[_0x92aade(0x3a6)] + _0x92aade(0x714) + _0x1bdc92[_0x92aade(0xa5b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>' : _0x43c547[_0x92aade(0x76d)](_0x92aade(0x2ba))['onclick'] = () => { _0x1ef4f0(_0x386313), _0x1178d1(); } : _0x39a0af['innerHTML'] = _0x92aade(0x306) + _0x2b2565 + '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x6a61c1 + _0x92aade(0x24d) + _0x1bdc92[_0x92aade(0x3a6)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x1bdc92[_0x92aade(0xa5b)] + _0x92aade(0x8a4) + _0x1bdc92[_0x92aade(0x9d4)] + _0x92aade(0x9ca), _0x40eb84[_0x92aade(0x1ce)](_0x39a0af); } else { if (_0x1bdc92['type'] === _0x92aade(0x67f) && _0x1bdc92[_0x92aade(0x3a6)]) { _0x40eb84[_0x92aade(0x1f5)]['add']('music'); const _0x42a120 = document['createElement'](_0x92aade(0xa9f)); _0x42a120[_0x92aade(0x6e1)] = 'music-share-card', _0x42a120[_0x92aade(0x6c3)]['musicId'] = 'msg_' + _0x1bdc92['timestamp']; const _0x5e982a = _0x92aade(0xada) + _0x1bdc92[_0x92aade(0x6aa)], _0x55e1be = _0x92aade(0x284) + _0x2fd48c + _0x92aade(0x4d9) + _0x5e982a + _0x92aade(0x977); if (_0x1bdc92[_0x92aade(0xb8c)]) { if ('OARpa' === 'OARpa') _0x2b4d72(_0x1bdc92[_0x92aade(0xb8c)])[_0x92aade(0xb30)](_0x2ad48b => { const _0x4f6133 = _0x92aade, _0x7fbb15 = document[_0x4f6133(0x61b)](_0x5e982a); if (_0x7fbb15 && _0x2ad48b) _0x7fbb15['src'] = URL['createObjectURL'](_0x2ad48b); }); else { if (_0x18ef4f) _0x133975[_0x92aade(0x6c7)] = '▶'; } } else _0x1bdc92[_0x92aade(0x382)] && setTimeout(() => { const _0x2b9fcf = _0x92aade, _0x1ee7dc = document[_0x2b9fcf(0x61b)](_0x5e982a); if (_0x1ee7dc) _0x1ee7dc[_0x2b9fcf(0x1b2)] = _0x1bdc92['coverUrl']; }, 0x0); _0x42a120['innerHTML'] = _0x92aade(0x4a9) + _0x55e1be + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x1bdc92[_0x92aade(0x3a6)] + _0x92aade(0x7b8) + _0x1bdc92[_0x92aade(0xa5b)] + _0x92aade(0x985) + (_0x1bdc92['playableUrl'] ? '▶' : '⚠') + _0x92aade(0x300), _0x1bdc92[_0x92aade(0x65e)] && _0x42a120[_0x92aade(0x46a)](_0x92aade(0x3cd), function () { const _0x41924c = _0x92aade, _0x1c6748 = { 'id': _0x41924c(0x3a3) + _0x1bdc92[_0x41924c(0x6aa)], 'url': _0x1bdc92[_0x41924c(0x65e)] }; _0x407470(this, _0x1c6748); }), _0x40eb84['appendChild'](_0x42a120); } else { if (_0x4dc16c) { if (_0x92aade(0x2bc) !== _0x92aade(0x2bc)) _0x4011a8[_0x92aade(0x6c7)] = _0x92aade(0x713), _0x23ba7c[_0x92aade(0x72d)] = '<span>--</span><span\x20class=\x22unit\x22>天</span>'; else { const _0x2186d3 = document[_0x92aade(0x6a8)]('p'); _0x2186d3['innerHTML'] = _0x4dc16c, _0x2186d3[_0x92aade(0x7c9)][_0x92aade(0x5ec)] = '0', _0x40eb84[_0x92aade(0x1ce)](_0x2186d3); } } } } } } } _0x5b9116 === 'user' ? _0x92aade(0xb9a) === 'tTbyz' ? (_0x3cb105['appendChild'](_0x40eb84), _0x3cb105[_0x92aade(0x1ce)](_0xa1e346)) : (_0x8329f5(), _0x267f95('friendCircleList', _0x92aade(0x67f))) : (_0x3cb105['appendChild'](_0xa1e346), _0x3cb105[_0x92aade(0x1ce)](_0x40eb84)); } _0x543aa0[_0x92aade(0x1ce)](_0x3cb105); const _0x2f3230 = document[_0x92aade(0x6a8)]('div'); return _0x2f3230['className'] = _0x92aade(0x6aa), _0x2f3230[_0x92aade(0x6c7)] = _0x46dd1b(_0x1bdc92[_0x92aade(0x6aa)]), _0x543aa0[_0x92aade(0x1ce)](_0x2f3230), _0x3cf136['appendChild'](_0x543aa0), _0x543aa0; } else { const _0x497f0d = (_0x3eda75 - _0x431f58) / (0x3e8 * 0x3c); _0x497f0d < 0x3c ? _0xa4f1ee += _0x92aade(0x436) : _0x162058 += _0x92aade(0x58c) + _0x5d8837[_0x92aade(0x198)](_0x497f0d / 0x3c) + _0x92aade(0x788); } } document[_0x34dc25(0x61b)](_0x34dc25(0x57e))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0xc19d68); let _0x28a07d = null, _0x1600c6 = null; function _0xc19d68(_0x22b730) { const _0x38d2f4 = _0x34dc25; if (window[_0x38d2f4(0x74e)]()[_0x38d2f4(0xa41)]()) return; const _0x5a6c99 = _0x22b730['target'][_0x38d2f4(0x97d)](_0x38d2f4(0x70f)), _0x582bae = _0x22b730[_0x38d2f4(0x6e7)][_0x38d2f4(0x97d)](_0x38d2f4(0x3af)); if (!_0x5a6c99 || _0x582bae) return; const _0x8992e = parseInt(_0x5a6c99['dataset'][_0x38d2f4(0xb55)], 0xa); if (isNaN(_0x8992e)) return; _0x224ceb(_0x8992e); } function _0x3a40b9() { const _0x1ed8e3 = _0x34dc25, _0x3b5741 = _0x33b638(); if (!_0x3b5741) { if (_0x1ed8e3(0xb9b) !== _0x1ed8e3(0x858)) { _0x42ff06['textContent'] = _0x1ed8e3(0xb01); return; } else { const _0x5c64df = _0x1ed8e3(0x62e); _0x91dea9[_0x1ed8e3(0x68f)][_0x1ed8e3(0xb6e)](_0x1ed8e3(0x4cc), _0x5c64df); const _0x35b6f0 = _0x4c0cb4[_0x1ed8e3(0x61b)]('diary-write-modal'), _0x5d178b = _0x3e7476[_0x1ed8e3(0x61b)](_0x1ed8e3(0xb95)), _0x123136 = _0xd42e7f[_0x1ed8e3(0x61b)](_0x1ed8e3(0xa34)), _0x251d24 = _0x2b790c[_0x1ed8e3(0x61b)](_0x1ed8e3(0xa92)), _0x18d3a7 = _0x35b6f0[_0x1ed8e3(0x76d)](_0x1ed8e3(0x1ff)), _0x29ac68 = () => { const _0x2b96c0 = _0x1ed8e3; _0x35b6f0[_0x2b96c0(0x194)](), _0x3891cf(); }; _0x123136[_0x1ed8e3(0x81f)] = () => { const _0x4da651 = _0x1ed8e3; _0x454875(_0x5d178b[_0x4da651(0x21f)]), _0x29ac68(); }, _0x251d24[_0x1ed8e3(0x81f)] = _0x29ac68, _0x18d3a7[_0x1ed8e3(0x81f)] = _0x29ac68; } } if (_0x3b5741[_0x1ed8e3(0x63a)] === _0x1ed8e3(0x780)) { if (_0x1ed8e3(0xb9f) !== 'XcRMr') _0x46228b(_0x1ed8e3(0x19a), _0x1ed8e3(0xa8f)); else { const _0x38fde5 = _0x5aa3d9(_0x3b5741[_0x1ed8e3(0x5c9)][0x0]); _0x42ff06[_0x1ed8e3(0x6c7)] = _0x38fde5 ? _0x38fde5['name'] : _0x1ed8e3(0x2d5); } } else _0x42ff06[_0x1ed8e3(0x6c7)] = _0x3b5741[_0x1ed8e3(0x9dc)] || '群聊\x20(' + _0x3b5741[_0x1ed8e3(0x5c9)][_0x1ed8e3(0xa1e)] + ')'; } function _0x4d0bb5(_0xb2090d) { const _0x4fa849 = _0x34dc25, _0x2f56f0 = document[_0x4fa849(0x76d)](_0x4fa849(0xb23)); if (_0x2f56f0 && (_0x2f56f0['id'] === _0x4fa849(0x8b9) || _0x2f56f0['id'] === _0x4fa849(0xa67))) _0x5eb56f(); else { const _0x28e53b = document[_0x4fa849(0x4f8)](_0x4fa849(0xba1)); _0x28e53b[_0x4fa849(0xaa9)](_0x357935 => _0x357935[_0x4fa849(0x194)]()); } } function _0x53b62a() { const _0x1c56e3 = _0x34dc25; if (_0x1c56e3(0x657) !== 'ydxkf') _0x4295e2[_0x1c56e3(0x2ac)] && _0x4295e2['currentAbortController'] && ('lNEuj' === 'lNEuj' ? (console['log'](_0x1c56e3(0x7a0)), _0x4295e2[_0x1c56e3(0x324)]['abort'](_0x1c56e3(0x2aa)), _0x4295e2[_0x1c56e3(0x324)] = null) : _0x8ce543(_0x5eab8b['id'])), _0x4295e2['isGenerating'] = ![], _0x4d0bb5(![]); else { _0xa6a249[_0x1c56e3(0x21f)] = '', _0x4fa41b[_0x1c56e3(0x21f)] = ''; if (_0x47c9d3) _0x28526a[_0x1c56e3(0x7c9)][_0x1c56e3(0x54b)] = ''; } } function _0x33b638() { const _0x1a498e = _0x34dc25; if ('RXbIH' !== _0x1a498e(0x2c5)) return _0x4295e2[_0x1a498e(0x7af)][_0x1a498e(0x7e6)](_0x2c3589 => _0x2c3589['id'] === _0x4295e2['activeChatId']); else _0x1f6b1b['disabled'] = ![]; } function _0x5aa3d9(_0x5045ca) { const _0x272d2b = _0x34dc25; if (_0x272d2b(0x42d) !== 'NVCSP') return _0x4295e2['characters'][_0x272d2b(0x7e6)](_0x104689 => _0x104689['id'] === _0x5045ca); else { _0x252dc0('至少要保留一个用户。'); return; } } function _0x14cb05(_0x30b23b) { const _0x27fe4a = _0x34dc25; _0x4295e2[_0x27fe4a(0x45f)] = _0x4295e2[_0x27fe4a(0x45f)][_0x27fe4a(0x695)](_0x5673e7 => _0x5673e7['id'] !== _0x30b23b), _0x4295e2[_0x27fe4a(0x7af)][_0x27fe4a(0xaa9)](_0xaf7f2a => { const _0x594b7b = _0x27fe4a; _0xaf7f2a['type'] === 'group' && (_0xaf7f2a[_0x594b7b(0x5c9)] = _0xaf7f2a[_0x594b7b(0x5c9)][_0x594b7b(0x695)](_0x3c9d2f => _0x3c9d2f !== _0x30b23b)); }); const _0x75972e = _0x4295e2['chats'][_0x27fe4a(0x7e6)](_0x1bb862 => _0x1bb862[_0x27fe4a(0x63a)] === 'private' && _0x1bb862['participantIds'][_0x27fe4a(0x2b7)](_0x30b23b)); _0x75972e && _0x2b39c2(_0x75972e['id']), _0x4295e2[_0x27fe4a(0x7af)] = _0x4295e2[_0x27fe4a(0x7af)][_0x27fe4a(0x695)](_0x501da6 => _0x501da6[_0x27fe4a(0x63a)] !== _0x27fe4a(0x519) || _0x501da6[_0x27fe4a(0x5c9)][_0x27fe4a(0xa1e)] > 0x1), _0x1b6337(), _0x3a458e(); } function _0x2b39c2(_0x594336) { const _0x20b542 = _0x34dc25; _0x4295e2['chats'] = _0x4295e2[_0x20b542(0x7af)][_0x20b542(0x695)](_0x19b7be => _0x19b7be['id'] !== _0x594336); try { localStorage[_0x20b542(0x662)](_0x20b542(0x1a9) + _0x594336); } catch (_0x471d4e) { _0x20b542(0x3ec) === _0x20b542(0x3ec) ? console[_0x20b542(0x214)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x594336, _0x471d4e) : _0x191830 = _0x20b542(0xab6) + _0x1cfb44[_0x20b542(0x9dc)] + _0x20b542(0x5de); } _0x4295e2[_0x20b542(0x845)] === _0x594336 && (_0x4295e2[_0x20b542(0x845)] = _0x4295e2[_0x20b542(0x7af)][0x0]?.['id'] || null, _0x2481e4(_0x4295e2[_0x20b542(0x845)])), _0x1b6337(), _0x3a458e(); } async function _0x2481e4(_0x310b81) { const _0x2e03bb = _0x34dc25; _0x4295e2[_0x2e03bb(0x845)] !== _0x310b81 && (_0x53b62a(), _0x4295e2[_0x2e03bb(0x4b0)] = 0x64); if (!_0x310b81) { _0x4295e2[_0x2e03bb(0x845)] = null, _0x1b6337(), _0x2c224f(![]), document[_0x2e03bb(0x61b)]('chat-view-pane')[_0x2e03bb(0x7c9)][_0x2e03bb(0x54b)] = ''; return; } _0x4295e2[_0x2e03bb(0x845)] = _0x310b81, _0x1b6337(), _0x3a40b9(), _0x3cf136[_0x2e03bb(0x72d)] = '', _0x48b9ad(!![], _0x2e03bb(0x9d7)), setTimeout(async () => { const _0x176baa = _0x2e03bb; if ('DVfDp' === _0x176baa(0x54f)) { const _0x27a3a3 = _0x5c1c81['senderId'] || _0x580268?.['participantIds'][0x0], _0x4840dd = _0x3f6d45(_0x27a3a3); _0x443e90 = _0x4840dd ? _0x4840dd[_0x176baa(0x9dc)] : '角色'; } else try { _0x57f23e(); const _0x203957 = _0x33b638(), _0x126e23 = document['getElementById']('chat-view-pane'); let _0x456809 = null; if (_0x203957) { if (_0x203957[_0x176baa(0x63a)] === 'private') { const _0x4b9823 = _0x203957['participantIds'][0x0]; _0x2183bf(_0x4b9823), _0x456809 = await _0x2b4d72('char_wallpaper_' + _0x4b9823); } else _0x176baa(0x4b8) !== _0x176baa(0x74c) ? _0x456809 = await _0x2b4d72(_0x176baa(0x66c) + _0x203957['id']) : _0x54a413['push']({ 'name': _0x59aeac[0x0][_0x176baa(0x2c7)](), 'url': _0x2b90e1[0x1][_0x176baa(0x2c7)]() }); if (_0x456809) _0x176baa(0x189) === _0x176baa(0x2fc) ? (_0x5b7e54[_0x176baa(0x369)][_0x10a4b4]['accepted'] = !![], _0x1602f5()) : (_0x126e23[_0x176baa(0x7c9)][_0x176baa(0x54b)] = _0x176baa(0x3bd) + URL[_0x176baa(0xa4f)](_0x456809) + '\x27)', _0x126e23['style']['backgroundSize'] = 'cover', _0x126e23[_0x176baa(0x7c9)][_0x176baa(0x9b1)] = _0x176baa(0x231)); else { if (_0x176baa(0x6f4) !== _0x176baa(0xa3f)) _0x126e23[_0x176baa(0x7c9)]['backgroundImage'] = ''; else { if (!_0x25e0c6 || typeof _0x52d8df !== 'string') return null; const _0x208883 = _0x33dfc3[_0x176baa(0x66b)]('['), _0x1fd172 = _0x4193c5[_0x176baa(0x322)](']'); if (_0x208883 > -0x1 && _0x1fd172 > _0x208883) return _0xbf6e9f[_0x176baa(0x705)](_0x208883, _0x1fd172 + 0x1); return null; } } } _0x1639f3(); } catch (_0x2f1851) { _0x176baa(0x4d8) !== _0x176baa(0x71d) ? (console[_0x176baa(0x214)]('切换聊天时发生异步错误:', _0x2f1851), _0x925876(_0x176baa(0x201) + _0x2f1851[_0x176baa(0x1c9)])) : _0x8882e2[_0x176baa(0x230)](_0x422bfb); } finally { 'dqiFM' !== _0x176baa(0x933) ? _0x583bfd(_0x176baa(0x8b7)) : _0x48b9ad(![]); } }, 0x32); } async function _0x7718fd() { const _0x5a0654 = _0x34dc25; if (_0x4295e2['isGenerating']) { _0x925876(_0x5a0654(0x1d6)); return; } const _0x1c7108 = _0x4295e2[_0x5a0654(0x369)]; if (_0x1c7108[_0x5a0654(0xa1e)] === 0x0) return; let _0x45798f = -0x1; for (let _0x31b214 = _0x1c7108['length'] - 0x1; _0x31b214 >= 0x0; _0x31b214--) { if (_0x5a0654(0x5c2) !== _0x5a0654(0x612)) { if (_0x1c7108[_0x31b214][_0x5a0654(0x55e)] === _0x5a0654(0x742)) { _0x45798f = _0x31b214; break; } } else _0x149838(![]), _0x33b306[_0x5a0654(0x2ac)] = ![]; } if (_0x45798f === -0x1 || _0x45798f === _0x1c7108[_0x5a0654(0xa1e)] - 0x1) { _0x925876('还没有我的回应可以重新生成哦。'); return; } _0x1c7108[_0x5a0654(0x99e)](_0x45798f + 0x1), _0x4295e2[_0x5a0654(0x63e)] = [], _0x236ac2(), _0x294f1c(), _0x268551(_0x4295e2[_0x5a0654(0xa6b)]), setTimeout(() => { _0x1dc518(); }, 0x64); } async function _0x995e13() { const _0x1e780d = _0x34dc25; if (_0x4295e2[_0x1e780d(0x2ac)]) { _0x925876(_0x1e780d(0x6f6)); return; } const _0x5c9b61 = _0x4295e2[_0x1e780d(0x369)]; if (_0x5c9b61['length'] === 0x0) return; let _0x29635c = -0x1; for (let _0x22d731 = _0x5c9b61[_0x1e780d(0xa1e)] - 0x1; _0x22d731 >= 0x0; _0x22d731--) { if (_0x5c9b61[_0x22d731][_0x1e780d(0x55e)] === _0x1e780d(0x742)) { _0x29635c = _0x22d731; break; } } if (_0x29635c === -0x1 || _0x29635c === _0x5c9b61['length'] - 0x1) { if (_0x1e780d(0x565) !== _0x1e780d(0x5c0)) { _0x925876(_0x1e780d(0xa19)); return; } else { _0x464140 = _0x254546(_0x58b472[_0x1e780d(0x1d7)]), _0x273ae4[_0x1e780d(0x72d)] = ''; if (_0x49d482[_0x1e780d(0xa1e)] === 0x0) { _0x4aeea7[_0x1e780d(0x72d)] = _0x1e780d(0x813); return; } _0x44815e['forEach']((_0x2332f4, _0x1b9913) => { const _0x1567d8 = _0x1e780d, _0x372b7a = _0x232d13[_0x1567d8(0x6a8)]('p'); _0x372b7a[_0x1567d8(0x6c7)] = _0x2332f4[_0x1567d8(0x8f6)], _0x372b7a['id'] = 'lyric-line-' + _0x1b9913, _0x166a5d[_0x1567d8(0x1ce)](_0x372b7a); }); } } _0x5c9b61['splice'](_0x29635c + 0x1), _0x236ac2(), _0x5eb56f(), setTimeout(() => { _0x1dc518(); }, 0x64); } function _0xf19bda(_0x33aeb1 = null) { const _0x34c186 = _0x34dc25, _0x21f25c = _0x33aeb1 ?? _0x2a16a3[_0x34c186(0x21f)][_0x34c186(0x2c7)](); if (_0x21f25c === '' || !_0x4295e2['activeChatId']) return; const _0x1ebe6a = document[_0x34c186(0x76d)]('.screen.active'), _0x16b0a2 = _0x1ebe6a['id'] === _0x34c186(0x8b9), _0x994d4d = { 'role': _0x34c186(0x742), 'content': _0x21f25c, 'timestamp': Date[_0x34c186(0xb3d)](), 'isOffline': _0x16b0a2 }; _0x4295e2[_0x34c186(0x9ce)] && (_0x994d4d[_0x34c186(0x30a)] = { ..._0x4295e2[_0x34c186(0x9ce)] }), _0x4295e2[_0x34c186(0x369)][_0x34c186(0x230)](_0x994d4d), _0x236ac2(), _0x5eb56f(), !_0x33aeb1 && (_0x2a16a3['value'] = ''), _0x261627(); } function _0x5014ef(_0x17a388) { const _0x4d0898 = _0x34dc25; if (!_0x17a388 || !_0x4295e2[_0x4d0898(0x845)]) return; const _0x5866d1 = { 'role': _0x4d0898(0x742), 'content': _0x4d0898(0x465) + _0x17a388['name'] + ']', 'displayUrl': _0x17a388[_0x4d0898(0xb79)], 'timestamp': Date[_0x4d0898(0xb3d)]() }; _0x4295e2[_0x4d0898(0x369)]['push'](_0x5866d1), _0x4b41ed(_0x5866d1, _0x4295e2['conversationHistory'][_0x4d0898(0xa1e)] - 0x1), _0x236ac2(), _0xcc3613[_0x4d0898(0x1f5)][_0x4d0898(0x194)](_0x4d0898(0xa03)); } async function _0x414092(_0x3793f7) { const _0x1f0536 = _0x34dc25, _0x59c3e4 = _0x3793f7[_0x1f0536(0x6e7)]['files'][0x0]; if (!_0x59c3e4 || !_0x4295e2[_0x1f0536(0x845)]) return; _0x48b9ad(!![], '正在处理图片...'); try { const _0x2114e1 = await _0x2b0e1f(_0x59c3e4, 0x320, 0.8, !![]), _0x49a761 = _0x1f0536(0x438) + Date[_0x1f0536(0xb3d)](); await _0x190daf(_0x49a761, _0x2114e1); const _0x4fdd52 = _0x2a16a3[_0x1f0536(0x21f)][_0x1f0536(0x2c7)](); _0x2a16a3[_0x1f0536(0x21f)] = ''; const _0x411dff = { 'role': 'user', 'content': _0x4fdd52, 'imageId': _0x49a761, 'timestamp': Date[_0x1f0536(0xb3d)]() }; _0x4295e2[_0x1f0536(0x369)]['push'](_0x411dff), _0x4b41ed(_0x411dff, _0x4295e2[_0x1f0536(0x369)][_0x1f0536(0xa1e)] - 0x1), _0x236ac2(); } catch (_0x547482) { _0x925876('图片处理失败:\x20' + _0x547482[_0x1f0536(0x1c9)]); } finally { _0x48b9ad(![]), _0x3793f7[_0x1f0536(0x6e7)][_0x1f0536(0x21f)] = ''; } } async function _0x1cd9f0() { const _0x26d98f = _0x34dc25; if (!_0x4295e2[_0x26d98f(0x845)]) return; const _0x312215 = await _0x2fffc9(); if (!_0x312215) return; _0x925876(_0x26d98f(0x668)); try { const _0x35c946 = await _0x53e88b(_0x312215[_0x26d98f(0x3a6)], _0x312215[_0x26d98f(0xa5b)]); let _0x4f3095 = _0x35c946['cover']; if (_0x35c946[_0x26d98f(0x211)] && _0x35c946['cover']['startsWith'](_0x26d98f(0x4a8))) try { if (_0x26d98f(0xad0) !== _0x26d98f(0xad0)) _0x3f4b92(_0x5e6816[_0x26d98f(0xb77)]); else { const _0x434620 = await fetch(_0x35c946['cover']), _0x372197 = await _0x434620[_0x26d98f(0x7da)](); _0x4f3095 = await _0x512f2f(_0x372197); } } catch (_0x21c22c) { if (_0x26d98f(0x8df) === _0x26d98f(0x8df)) console[_0x26d98f(0x214)](_0x26d98f(0x29e), _0x21c22c), _0x4f3095 = _0x2fd48c; else { let _0x16d835 = 0x0, _0x503ded = 0x0, _0x14f4f3 = 0x0; if (_0x3c40bc['length'] == 0x4) _0x16d835 = '0x' + _0x39f4c9[0x1] + _0x48c80a[0x1], _0x503ded = '0x' + _0x3032d2[0x2] + _0x58a083[0x2], _0x14f4f3 = '0x' + _0x22988c[0x3] + _0x2627e2[0x3]; else _0x5c24ce[_0x26d98f(0xa1e)] == 0x7 && (_0x16d835 = '0x' + _0x3d6c13[0x1] + _0x24d2af[0x2], _0x503ded = '0x' + _0xd8f92c[0x3] + _0x198cb0[0x4], _0x14f4f3 = '0x' + _0xd62ed2[0x5] + _0x20c332[0x6]); _0x16d835 /= 0xff, _0x503ded /= 0xff, _0x14f4f3 /= 0xff; let _0x484c5b = _0x583f43[_0x26d98f(0x33d)](_0x16d835, _0x503ded, _0x14f4f3), _0x383255 = _0x4e76d6[_0x26d98f(0x460)](_0x16d835, _0x503ded, _0x14f4f3), _0x35ab5b = _0x383255 - _0x484c5b, _0x45359f = 0x0, _0x37752f = 0x0, _0x515e8d = 0x0; if (_0x35ab5b == 0x0) _0x45359f = 0x0; else { if (_0x383255 == _0x16d835) _0x45359f = (_0x503ded - _0x14f4f3) / _0x35ab5b % 0x6; else { if (_0x383255 == _0x503ded) _0x45359f = (_0x14f4f3 - _0x16d835) / _0x35ab5b + 0x2; else _0x45359f = (_0x16d835 - _0x503ded) / _0x35ab5b + 0x4; } } _0x45359f = _0x47c01d['round'](_0x45359f * 0x3c); if (_0x45359f < 0x0) _0x45359f += 0x168; return _0x515e8d = (_0x383255 + _0x484c5b) / 0x2, _0x37752f = _0x35ab5b == 0x0 ? 0x0 : _0x35ab5b / (0x1 - _0x2f8e56[_0x26d98f(0x62a)](0x2 * _0x515e8d - 0x1)), _0x37752f = +(_0x37752f * 0x64)['toFixed'](0x1), _0x515e8d = +(_0x515e8d * 0x64)[_0x26d98f(0x1ba)](0x1), { 'h': _0x45359f, 's': _0x37752f, 'l': _0x515e8d }; } } const _0x75de1e = { 'role': _0x26d98f(0x742), 'type': 'music', 'content': _0x26d98f(0xa87) + _0x312215[_0x26d98f(0x3a6)] + _0x26d98f(0x4df) + _0x312215[_0x26d98f(0xa5b)] + ']', 'songName': _0x312215['songName'], 'artist': _0x312215['artist'], 'coverUrl': _0x4f3095, 'playableUrl': _0x35c946[_0x26d98f(0xb79)], 'timestamp': Date['now']() }; _0x4295e2[_0x26d98f(0x369)]['push'](_0x75de1e), _0x4b41ed(_0x75de1e, _0x4295e2[_0x26d98f(0x369)][_0x26d98f(0xa1e)] - 0x1), _0x236ac2(); } catch (_0x347f03) { console[_0x26d98f(0x214)](_0x26d98f(0x455), _0x347f03), _0x925876(_0x26d98f(0x330) + _0x347f03[_0x26d98f(0x1c9)]); } } function _0x131189(_0x1568e3, _0x2a5184 = 0x78) { const _0x5c98e8 = _0x34dc25, _0x2867e6 = _0xaa7225 => { const _0x4e9edc = _0x585d; if (_0x4e9edc(0x4e6) === 'FvcXp') return []; else { if (_0xaa7225[_0x4e9edc(0x55e)] === 'user') return _0x4295e2[_0x4e9edc(0x5f2)]?.[_0x4e9edc(0x9dc)] || _0x4e9edc(0x5ef); if (_0xaa7225[_0x4e9edc(0x428)]) { const _0x457f40 = _0x5aa3d9(_0xaa7225['senderId']); return _0x457f40?.[_0x4e9edc(0x9dc)] || 'Unknown'; } if (_0x1568e3?.[_0x4e9edc(0x63a)] === _0x4e9edc(0x780)) { const _0x24f4c6 = _0x5aa3d9(_0x1568e3[_0x4e9edc(0x5c9)][0x0]); return _0x24f4c6?.[_0x4e9edc(0x9dc)] || 'AI'; } return 'Assistant'; } }, _0x57aeb6 = _0x4295e2[_0x5c98e8(0x369)][_0x5c98e8(0xae6)](-_0x2a5184), _0x2e0572 = []; for (const _0x14d95c of _0x57aeb6) { if (_0x5c98e8(0xad7) === _0x5c98e8(0xad7)) { if (_0x14d95c['displayUrl']) _0x5c98e8(0x2e0) !== _0x5c98e8(0xb0f) ? _0x2e0572[_0x5c98e8(0x230)]('[' + _0x2867e6(_0x14d95c) + _0x5c98e8(0xac3) + (_0x14d95c[_0x5c98e8(0x8f0)]?.[_0x5c98e8(0x4ed)](/：(.+?)]/)?.[0x1] || '表情') + ']') : (_0x1c26df[_0x5c98e8(0x845)] = _0x46a785['id'], _0x1c2c5f(), _0x17a8e6(), _0x11c1fd(_0x247358)); else { if (_0x14d95c[_0x5c98e8(0x37c)]) { const _0x427c1e = _0x14d95c[_0x5c98e8(0x8f0)] ? '\x20' + _0x14d95c[_0x5c98e8(0x8f0)] : ''; _0x2e0572[_0x5c98e8(0x230)]('[' + _0x2867e6(_0x14d95c) + _0x5c98e8(0x225) + _0x427c1e); } else _0x14d95c['content'] && _0x2e0572[_0x5c98e8(0x230)]('[' + _0x2867e6(_0x14d95c) + ']\x20' + _0x14d95c[_0x5c98e8(0x8f0)]); } } else { _0x730bd5[_0x5c98e8(0xa8c)]('Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.'); const _0xac5d6c = _0x54450c[_0x5c98e8(0x5c9)][_0x5c98e8(0x959)](_0x2c8cf7)[_0x5c98e8(0x695)](_0x2dd977); if (!_0xac5d6c[_0x5c98e8(0xa1e)]) return; let _0x278fe1 = 0x0; for (const _0x4aca22 of _0xac5d6c) { _0x5df1f1(_0x4aca22, { 'force': !![], 'delayMs': _0x278fe1 }), _0x278fe1 += 0x1f4; } } } return _0x2e0572['join']('\x0a'); } function _0x32e770(_0x12b1be, _0x1c3d7b) { const _0x25a4d4 = _0x34dc25; if (!_0x12b1be || !_0x1c3d7b) return null; const _0x1fb4b1 = _0x1c3d7b['match'](/@([^\s:：,，。!?]+)/); if (!_0x1fb4b1) return null; const _0x260857 = _0x1fb4b1[0x1]['toLowerCase'](); for (const _0x90ef77 of _0x12b1be[_0x25a4d4(0x5c9)]) { const _0x468d84 = _0x5aa3d9(_0x90ef77); if (!_0x468d84?.[_0x25a4d4(0x9dc)]) continue; if (_0x468d84[_0x25a4d4(0x9dc)][_0x25a4d4(0x94b)]() === _0x260857) return _0x468d84; if (_0x468d84[_0x25a4d4(0x9dc)][_0x25a4d4(0x94b)]()['startsWith'](_0x260857)) return _0x468d84; } return null; } function _0x4fd453(_0x3ef12b) { const _0x271c5a = _0x34dc25, _0x3bc696 = _0x3ef12b['indexOf']('{'), _0x168e41 = _0x3ef12b['lastIndexOf']('}'); if (_0x3bc696 >= 0x0 && _0x168e41 > _0x3bc696) return _0x3ef12b[_0x271c5a(0xae6)](_0x3bc696, _0x168e41 + 0x1); return _0x3ef12b; } function _0x21f193(_0x1bfde3, _0x6e493b, _0x11cb1f) { const _0x53b7cf = _0x34dc25; if (_0x53b7cf(0x457) !== 'AfYkn') { const _0x584dac = _0x195e23['id'], _0x35200c = _0x53b7cf(0x3c1) + _0x584dac, _0x2eee51 = _0x39dbe0[_0x53b7cf(0x2f0)](_0x35200c), _0x860b4e = _0xd44e9b['querySelector'](_0x53b7cf(0x59a)); if (_0x2eee51) _0x860b4e[_0x53b7cf(0x72d)] = '<img\x20src=\x22' + _0x2eee51 + _0x53b7cf(0x585); else { const _0x3b0c7 = _0x203ae4['querySelector'](_0x53b7cf(0x6e3) + _0x584dac + _0x53b7cf(0x758) + _0x584dac + _0x53b7cf(0xa94))?.['innerHTML']; _0x3b0c7 && (_0x860b4e[_0x53b7cf(0x72d)] = _0x3b0c7); } } else { const _0x416b32 = new Map(_0x6e493b['map'](_0x2869a9 => [String(_0x2869a9['id']), _0x2869a9])), _0x32cf96 = _0x3f93e7 => String(_0x3f93e7 || '')['toLowerCase']()['replace'](/\s+/g, ''), _0x48d1ee = new Map(_0x6e493b[_0x53b7cf(0x959)](_0x1bb1f7 => [_0x32cf96(_0x1bb1f7['name']), _0x1bb1f7])), _0xf09d3a = new Set(_0x11cb1f), _0x199bea = { 'events': [] }; for (const _0x4bc4c7 of _0x1bfde3?.[_0x53b7cf(0x520)] || []) { if (_0x53b7cf(0x79a) !== _0x53b7cf(0xb4f)) { const _0x277a3b = _0x4bc4c7[_0x53b7cf(0x428)] ?? _0x4bc4c7['sender'] ?? _0x4bc4c7['sender_id'] ?? _0x4bc4c7['speaker'] ?? _0x4bc4c7[_0x53b7cf(0x55e)] ?? _0x4bc4c7[_0x53b7cf(0x9dc)]; if (!_0x277a3b) continue; let _0x54b5cc = _0x416b32[_0x53b7cf(0xb51)](String(_0x277a3b)) || _0x48d1ee['get'](_0x32cf96(_0x277a3b)); if (!_0x54b5cc) continue; const _0x49b753 = (_0x4bc4c7[_0x53b7cf(0x804)] || _0x4bc4c7[_0x53b7cf(0x63a)] || _0x53b7cf(0x8f6))['toLowerCase'](); if (_0x49b753 === _0x53b7cf(0x25e)) { const _0x436683 = (_0x4bc4c7[_0x53b7cf(0x25e)] ?? _0x4bc4c7[_0x53b7cf(0x42e)] ?? _0x4bc4c7['emote'] ?? _0x4bc4c7[_0x53b7cf(0xa5e)])?.[_0x53b7cf(0x2c7)](); if (_0x436683 && _0xf09d3a['has'](_0x436683)) _0x199bea[_0x53b7cf(0x520)]['push']({ 'senderId': _0x54b5cc['id'], 'kind': _0x53b7cf(0x25e), 'sticker': _0x436683 }); else { if (_0x53b7cf(0x8e8) !== 'veElh') { const _0x2164bd = _0x2cd0c5[_0x53b7cf(0x6a8)](_0x53b7cf(0xa9f)); _0x2164bd[_0x53b7cf(0x6e1)] = _0x53b7cf(0xaa4), _0x2164bd['dataset']['id'] = _0x18adea['id'], _0x2164bd['innerHTML'] = _0x53b7cf(0x1b7) + _0x200e65['name'] + _0x53b7cf(0x7a3) + _0x17e82e['content'][_0x53b7cf(0x705)](0x0, 0x64) + _0x53b7cf(0x2b3), _0x2164bd[_0x53b7cf(0x46a)](_0x53b7cf(0x3cd), () => _0x5a9e84(_0x5c95fc['id'])), _0x3f5f09[_0x53b7cf(0x1ce)](_0x2164bd); } else { const _0x2e5312 = String(_0x4bc4c7[_0x53b7cf(0x8f0)] ?? _0x4bc4c7[_0x53b7cf(0x8f6)] ?? '')[_0x53b7cf(0x2c7)]() || '[sticker:' + (_0x436683 || _0x53b7cf(0xa56)) + ']'; if (_0x2e5312) _0x199bea['events']['push']({ 'senderId': _0x54b5cc['id'], 'kind': _0x53b7cf(0x8f6), 'content': _0x2e5312 }); } } } else { if (_0x53b7cf(0x429) === 'EFTMJ') { const _0x2a784e = String(_0x4bc4c7[_0x53b7cf(0x8f0)] ?? _0x4bc4c7['text'] ?? _0x4bc4c7[_0x53b7cf(0x1c9)] ?? '')[_0x53b7cf(0x2c7)](); if (_0x2a784e) _0x199bea[_0x53b7cf(0x520)][_0x53b7cf(0x230)]({ 'senderId': _0x54b5cc['id'], 'kind': _0x53b7cf(0x8f6), 'content': _0x2a784e }); } else _0x44493b = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>'; } } else _0x1b0d0c[_0x53b7cf(0x7c9)][_0x53b7cf(0x458)] = 'flex', _0x3b4102(() => _0x53bd62[_0x53b7cf(0x1f5)][_0x53b7cf(0xaf2)](_0x53b7cf(0xa03)), 0xa); } return _0x199bea; } } async function _0x2bf72c(_0x37ad94) { const _0x33af5e = _0x34dc25; if (_0x33af5e(0xb16) === _0x33af5e(0xb16)) { if (!_0x37ad94 || !Array[_0x33af5e(0x9bd)](_0x37ad94[_0x33af5e(0x520)]) || _0x37ad94[_0x33af5e(0x520)]['length'] === 0x0) return; const _0x1a85d9 = _0x5bc824 => _0x5bc824 + Math[_0x33af5e(0x29c)](Math['random']() * 0x190); let _0x57f839 = 0x1f4; for (const _0x304732 of _0x37ad94[_0x33af5e(0x520)]) { if ('iSWMw' !== 'sVPSt') { await new Promise(_0x1fd01f => setTimeout(_0x1fd01f, _0x1a85d9(_0x57f839))), _0x57f839 += 0x2bc; const _0xb37e04 = _0x4295e2[_0x33af5e(0x369)]['at'](-0x1)?.[_0x33af5e(0x5b2)] ?? ![]; if (_0x304732[_0x33af5e(0x804)] === _0x33af5e(0x25e)) { const _0x2240a1 = _0x4cfb86[_0x33af5e(0x7e6)](_0x65126a => _0x65126a[_0x33af5e(0x9dc)] === _0x304732[_0x33af5e(0x25e)]); if (_0x2240a1) { if (_0x33af5e(0x5a2) === _0x33af5e(0x9ba)) delete _0x373207[_0x33af5e(0x384)], _0x202952(), _0x370292(_0x4a15a0['id'], _0x33af5e(0x8a7)), _0x1ed4d2(_0x33af5e(0x2b9)), _0xfe2f1f(!![]); else { const _0xe15817 = { 'role': _0x33af5e(0x725), 'content': '[AI发送了表情：' + _0x2240a1[_0x33af5e(0x9dc)] + ']', 'displayUrl': _0x2240a1[_0x33af5e(0xb79)], 'senderId': _0x304732[_0x33af5e(0x428)], 'timestamp': Date['now'](), 'isOffline': _0xb37e04 }; _0x4295e2['conversationHistory'][_0x33af5e(0x230)](_0xe15817); } } } else { if (_0x304732['kind'] === _0x33af5e(0x67f) && _0x304732['songName'] && _0x304732[_0x33af5e(0xa5b)]) { const { songName: _0x53daf4, artist: _0x4112f6 } = _0x304732, _0x542708 = { 'role': _0x33af5e(0x725), 'type': 'music', 'content': _0x33af5e(0x621) + _0x53daf4 + _0x33af5e(0x4df) + _0x4112f6 + ']', 'songName': _0x53daf4, 'artist': _0x4112f6, 'senderId': _0x304732[_0x33af5e(0x428)], 'timestamp': Date['now'](), 'isOffline': _0xb37e04 }; try { const _0xda237a = await _0x53e88b(_0x53daf4, _0x4112f6); _0x542708[_0x33af5e(0x382)] = _0xda237a[_0x33af5e(0x211)], _0x542708[_0x33af5e(0x65e)] = _0xda237a[_0x33af5e(0xb79)]; } catch (_0x136600) { _0x33af5e(0x62c) === _0x33af5e(0x62c) ? (console['error'](_0x33af5e(0x407) + _0x53daf4 + _0x33af5e(0x4df) + _0x4112f6 + '):', _0x136600), _0x542708[_0x33af5e(0x382)] = null, _0x542708[_0x33af5e(0x65e)] = null) : (_0x334ca7 = _0x552a2c[_0x33af5e(0x6a8)]('div'), _0x1648dc['className'] = _0x33af5e(0x9fc), _0xc04197[_0x33af5e(0x6c7)] = _0x33af5e(0x5ea), _0x51a4b1[_0x33af5e(0x1ce)](_0x40c318)); } _0x4295e2['conversationHistory'][_0x33af5e(0x230)](_0x542708); } else { if (_0x304732[_0x33af5e(0x804)] === _0x33af5e(0x8f6)) { const _0x23d96b = _0x1e9ce2(_0x304732['content'])[_0x33af5e(0xae6)](0x0, 0x3); for (let _0x1d4a8b = 0x0; _0x1d4a8b < _0x23d96b['length']; _0x1d4a8b++) { if (_0x1d4a8b > 0x0) await new Promise(_0x1c1c98 => setTimeout(_0x1c1c98, _0x1a85d9(0x190))); const _0xc82b74 = { 'role': _0x33af5e(0x725), 'content': _0x23d96b[_0x1d4a8b], 'senderId': _0x304732['senderId'], 'timestamp': Date['now'](), 'isOffline': _0xb37e04 }; _0x4295e2['conversationHistory'][_0x33af5e(0x230)](_0xc82b74); } } } } } else _0x43a53b[_0x33af5e(0x662)](_0x33af5e(0x372)); } _0x236ac2(), _0x5eb56f(); } else _0xf71c3a = '0x' + _0x240dcf[0x1] + _0x4d1b29[0x1], _0x232f9d = '0x' + _0x4b23f2[0x2] + _0x37a5ba[0x2], _0x42d02d = '0x' + _0x131c44[0x3] + _0x2b0a55[0x3]; } async function _0x313c67(_0x99cc71, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x4eca90 = _0x34dc25; await new Promise(_0x52d927 => setTimeout(_0x52d927, 0xa)); if (!_0x4295e2[_0x4eca90(0x484)][_0x4eca90(0x419)] || !_0x4295e2[_0x4eca90(0x484)]['key'] || !_0x4295e2[_0x4eca90(0x484)]['model']) return _0x925876('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; const _0x12d38e = _0x33b638(); if (!_0x12d38e || !_0x99cc71) return ![]; const _0x4fb9d2 = _0x4b57ed(_0x12d38e['id']), _0x44ff37 = _0x4295e2[_0x4eca90(0x369)]['at'](-0x1)?.['role'] === _0x4eca90(0x742); if (!force && !_0x44ff37) return ![]; const _0x460ec2 = _0x4295e2[_0x4eca90(0x369)]['at'](-0x1)?.['isOffline'] ?? ![]; if (delayMs) await new Promise(_0x4f5bdc => setTimeout(_0x4f5bdc, delayMs)); _0x460ec2 ? document[_0x4eca90(0x61b)](_0x4eca90(0x74d))['textContent'] = '（正在构思中...）' : _0x4d0bb5(!![]); let _0xce70c3 = ''; const _0x5edd50 = _0x33b638(); if (_0x5edd50?.[_0x4eca90(0x20a)]?.['isActive']) { if (_0x4eca90(0x955) !== _0x4eca90(0x955)) return _0x47c184 + _0x4eca90(0x3d9); else { const _0x385c98 = _0x5edd50[_0x4eca90(0x20a)], _0x238c03 = await _0x4c41ea(_0x385c98[_0x4eca90(0x9d4)]); if (_0x238c03 && _0x238c03[_0x4eca90(0x1d7)]) { const _0x38cd91 = _0x3f4f0d(_0x238c03[_0x4eca90(0x1d7)]); if (_0x38cd91['length'] > 0x0) { const _0x18be8d = _0x49d30d[_0x4eca90(0x54a)]; let _0x337e31 = -0x1; for (let _0x578456 = 0x0; _0x578456 < _0x38cd91[_0x4eca90(0xa1e)]; _0x578456++) { if (_0x18be8d >= _0x38cd91[_0x578456]['time']) _0x337e31 = _0x578456; else break; } const _0x1750e1 = _0x38cd91[_0x4eca90(0x959)]((_0x4090ae, _0x2f591d) => { const _0x589871 = _0x4eca90, _0x1f9063 = _0x2f591d === _0x337e31 ? _0x589871(0x7e1) : ''; return '' + _0x1f9063 + _0x4090ae[_0x589871(0x8f6)]; })[_0x4eca90(0x247)]('\x0a'); _0xce70c3 = ('\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20' + _0x385c98[_0x4eca90(0xa5b)] + '\x20的《' + _0x385c98[_0x4eca90(0x3a6)] + _0x4eca90(0x4e4) + _0x1750e1 + _0x4eca90(0xa8a))['trim'](); } } } } let _0x184862 = '', _0x1e98f0 = ''; const _0x142a3d = _0x4295e2['conversationHistory'][_0x4eca90(0xa1e)]; if (_0x142a3d > 0x1) { if ('zrjdk' === _0x4eca90(0x2cb)) { const _0x3e265b = _0x4295e2[_0x4eca90(0x369)][_0x142a3d - 0x2], _0xebbfe0 = _0x4295e2[_0x4eca90(0x369)][_0x142a3d - 0x1]; if (_0x3e265b['isOffline'] === ![] && _0xebbfe0[_0x4eca90(0x5b2)] === !![]) _0x1e98f0 = _0x4eca90(0x666) + _0x4fb9d2[_0x4eca90(0x9dc)] + _0x4eca90(0x618); else _0x3e265b[_0x4eca90(0x5b2)] === !![] && _0xebbfe0[_0x4eca90(0x5b2)] === ![] && (_0x1e98f0 = _0x4eca90(0xab6) + _0x4fb9d2[_0x4eca90(0x9dc)] + _0x4eca90(0x5de)); } else _0x454d84[_0x3f72a0[_0xe62027]] = _0x1a3df8; } if (_0x460ec2) { if (_0x4eca90(0x7c5) === _0x4eca90(0x7c5)) { const _0x5c035b = _0x4eca90(0xa08); _0x184862 = _0x4eca90(0x3b8) + _0x4fb9d2[_0x4eca90(0x9dc)] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0x5c035b + _0x4eca90(0x2c1) + _0x99cc71['name'] + _0x4eca90(0x1b6) + _0x5c035b + _0x4eca90(0x477) + _0x5c035b + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0x427f1d(new _0xd6cb06(_0x4eca90(0x78e))); } else { if ('pmRFF' !== 'OYncN') _0x4eca90(0x4d3); else { _0xfefc08['innerHTML'] = _0x4eca90(0x5c6); return; } } const { omniText: _0x2fb803 } = _0x2442b3(_0x99cc71['id'], _0x12d38e['id']), _0x159612 = _0x523643(), _0x91d331 = _0x49199f(_0x99cc71['id']), _0x586281 = _0xbaf4da(_0x99cc71['id']), _0x31225b = await _0x5309d7(_0x99cc71['id']), _0x4c416d = typeof _0x43afa8 === _0x4eca90(0x3f4) ? _0x43afa8[_0x4eca90(0x83a)](_0x4eca90(0x2cd), _0x99cc71[_0x4eca90(0x9dc)])[_0x4eca90(0x83a)](_0x4eca90(0x3b3), _0x4fb9d2[_0x4eca90(0x9dc)] || '用户') : '', _0xef3a99 = _0x4cfb86['map'](_0x9df8ad => _0x9df8ad[_0x4eca90(0x9dc)])[_0x4eca90(0x247)](',\x20'); let _0x1a6300 = ''; if (_0x99cc71[_0x4eca90(0x473)] && _0x99cc71[_0x4eca90(0x473)][_0x4eca90(0xa1e)] > 0x0) { const _0x57955d = _0x99cc71[_0x4eca90(0x473)][_0x4eca90(0x959)](_0x305057 => _0x4295e2[_0x4eca90(0x496)]['find'](_0xde518 => _0xde518['id'] === _0x305057))['filter'](Boolean)['map'](_0x21c9a5 => _0x4eca90(0xad5) + _0x21c9a5[_0x4eca90(0x9dc)] + '\x0a' + _0x21c9a5[_0x4eca90(0x8f0)])[_0x4eca90(0x247)](''); if (_0x57955d) _0x1a6300 = _0x4eca90(0x90f) + _0x57955d; } const _0x32a832 = _0x4fb9d2[_0x4eca90(0xb70)] ? _0x4eca90(0x8c1) + _0x4fb9d2['name'] + _0x4eca90(0xb58) + _0x4fb9d2[_0x4eca90(0xb70)] : ''; let _0x3d014b = ''; const _0x51d07a = new Date(), _0x148150 = _0x53390d(_0x99cc71['id']); _0x3d014b = _0x4eca90(0x4b7), _0x3d014b += _0x4eca90(0x8ef) + _0x51d07a[_0x4eca90(0x773)](_0x4eca90(0x5a5), { 'dateStyle': _0x4eca90(0x294), 'timeStyle': _0x4eca90(0x5fe) }) + '\x0a'; if (_0x148150) { const _0x51b4c1 = new Date(_0x148150[_0x4eca90(0x6aa)]), _0x8ebf82 = _0x582cc2(_0x51b4c1); _0x3d014b += '-\x20**你们最后一次互动是在**:\x20' + _0x8ebf82 + '\x0a'; const _0x3405b2 = _0x51d07a[_0x4eca90(0x753)](), _0x3df481 = _0x51b4c1[_0x4eca90(0x753)](), _0x439e23 = new Date(); _0x439e23['setDate'](_0x51d07a['getDate']() - 0x1); const _0x36092d = _0x439e23[_0x4eca90(0x753)](); if (_0x3405b2 === _0x3df481) { const _0x1a8832 = (_0x51d07a - _0x51b4c1) / (0x3e8 * 0x3c); _0x1a8832 < 0x3c ? _0x3d014b += _0x4eca90(0x5f3) : _0x3d014b += _0x4eca90(0x5f8) + Math[_0x4eca90(0x198)](_0x1a8832 / 0x3c) + _0x4eca90(0x8f4); } else { if (_0x36092d === _0x3df481) _0x3d014b += _0x4eca90(0x66e); else { if ('vpvNm' === 'zDgSB') { const _0x54919e = _0x3a7aaa[_0x4eca90(0x61b)](_0x369145); if (_0x54919e && _0x482ff0) _0x54919e[_0x4eca90(0x1b2)] = _0x5c22ca['createObjectURL'](_0x97c519); } else { const _0x2b7438 = Math['round']((_0x51d07a - _0x51b4c1) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x3d014b += _0x4eca90(0x6c9) + _0x2b7438 + _0x4eca90(0xa9b); } } } } else _0x3d014b += _0x4eca90(0x320); const _0x2558c7 = ('\x0a' + _0x184862 + _0x4eca90(0x881) + _0x99cc71[_0x4eca90(0x9dc)] + _0x4eca90(0x187) + _0x99cc71[_0x4eca90(0x9dc)] + _0x4eca90(0x501) + _0x99cc71['name'] + _0x4eca90(0x1b3) + _0xef3a99 + _0x4eca90(0x6fe) + _0x4c416d + '\x0a')['trim'](), _0xde9311 = [{ 'role': _0x4eca90(0x4f2), 'content': _0x2558c7 }], _0x21bbc5 = (_0x4eca90(0x246) + (_0x99cc71['persona'] || '你是一个乐于助人的助手。') + '\x0a' + _0x32a832 + '\x20\x0a' + _0x2fb803 + '\x0a' + _0x159612 + '\x0a' + _0x91d331 + '\x0a' + _0x586281 + _0x4eca90(0x8bb) + _0x31225b + _0x4eca90(0x48e) + _0xce70c3 + '\x0a' + _0x3d014b + '\x0a' + _0x1a6300 + '\x0a')['trim'](); _0x21bbc5['replace'](/#.*|\s/g, '') && (_0xde9311[_0x4eca90(0x230)]({ 'role': _0x4eca90(0x742), 'content': _0x21bbc5 }), _0xde9311[_0x4eca90(0x230)]({ 'role': _0x4eca90(0x725), 'content': _0x4eca90(0x245) })); const _0x1f483f = _0x4295e2['preferences']?.['perChatContextLines'] ?? 0x64, _0x4b8f34 = _0x4295e2[_0x4eca90(0x369)][_0x4eca90(0xae6)](-_0x1f483f); for (const _0x14dca9 of _0x4b8f34) { if ('AwqAS' !== _0x4eca90(0x797)) _0x5daaa1 = _0x8c929e[_0x4eca90(0x59b)][_0x4eca90(0x7e6)](_0x115e40 => _0x115e40['id'] === _0x4888ec[_0x4eca90(0x2e4)]) || _0x175a3d[_0x4eca90(0x59b)][0x0]; else { const _0x3f97f9 = _0x14dca9[_0x4eca90(0x55e)] === 'ai' || _0x14dca9[_0x4eca90(0x55e)] === _0x4eca90(0x725) ? 'assistant' : _0x4eca90(0x742); let _0x1994ed = { 'role': _0x3f97f9, 'content': _0x14dca9[_0x4eca90(0x8f0)] }, _0x426944 = !!_0x14dca9[_0x4eca90(0x8f0)]; if (_0x14dca9[_0x4eca90(0xa4b)] && _0x14dca9['content']['includes']('表情')) { if (_0x4eca90(0xb61) === _0x4eca90(0x71f)) { const _0x1e09f3 = _0x467555['createElement'](_0x4eca90(0xa9f)); _0x1e09f3[_0x4eca90(0x6e1)] = _0x4eca90(0x7f7); const _0x24f21b = _0x51ceff['cover'] ? _0x4cf56f[_0x4eca90(0xa4f)](_0x234039['cover']) : _0x47b4c5; _0x1e09f3['innerHTML'] = _0x4eca90(0x7c4) + _0x24f21b + _0x4eca90(0x32c) + (_0x58b7ee['info']['歌曲名称'] || _0x4eca90(0x516)) + _0x4eca90(0x217) + (_0x3d6695[_0x4eca90(0x835)]['歌手'] || _0x4eca90(0xb02)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x1e09f3[_0x4eca90(0x46a)](_0x4eca90(0x3cd), () => { _0x33586c(_0x18f016); }), _0x398ae0[_0x4eca90(0x1ce)](_0x1e09f3); } else { const _0x50f9c6 = _0x14dca9['content'][_0x4eca90(0x4ed)](/：(.*?)]$/); _0x1994ed[_0x4eca90(0x8f0)] = _0x4eca90(0x7ac) + (_0x50f9c6 ? _0x50f9c6[0x1] : '未知表情') + ']', _0xde9311[_0x4eca90(0x230)](_0x1994ed); } } else { if (_0x4eca90(0x5e1) === 'jbSGV') { let _0x6a91b9 = null; if (_0x14dca9[_0x4eca90(0x37c)]) { if (_0x4eca90(0xb14) === _0x4eca90(0xb14)) _0x6a91b9 = _0x14dca9[_0x4eca90(0x37c)]; else { if (_0x16fc84) _0x40c792[_0x4eca90(0x7c9)][_0x4eca90(0x54b)] = _0x330868['value'] ? _0x4eca90(0x3bd) + _0x3cc63c[_0x4eca90(0x21f)] + '\x27)' : ''; } } else { if (_0x14dca9[_0x4eca90(0x295)]) try { if (_0x4eca90(0x811) !== _0x4eca90(0x95f)) { const _0x3dd452 = await _0x2b4d72(_0x14dca9[_0x4eca90(0x295)]); _0x3dd452 && (_0x6a91b9 = await _0x512f2f(_0x3dd452)); } else _0xbc299a(), _0x3b5d4c(_0x4eca90(0x57b), _0x4eca90(0x19d)); } catch (_0x1797b7) { console[_0x4eca90(0x214)](_0x4eca90(0x185), _0x1797b7); } } _0x6a91b9 && ('FLOtA' === _0x4eca90(0x850) ? (_0x513f00['setItem'](_0x4eca90(0xb99), _0x4a6663[_0x4eca90(0x1c5)](_0x18042d)), _0xd30fff(_0x4eca90(0x303)), _0x5e24fd(() => _0x3ced3e[_0x4eca90(0x377)](), 0x5dc)) : (_0x1994ed[_0x4eca90(0x37c)] = _0x6a91b9, _0x426944 = !![])); if (_0x426944) { if (_0x4eca90(0x5e7) !== _0x4eca90(0x5e7)) { if (!_0x3d6ea1) return []; const _0x3b2bce = _0x52285b['split']('\x0a'), _0x58e4cb = [], _0x5704ad = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x1e5ab9 of _0x3b2bce) { const _0x56836e = _0x1e5ab9[_0x4eca90(0x4ed)](_0x5704ad); if (_0x56836e) { const _0x448bc3 = _0x5da9eb(_0x56836e[0x1], 0xa), _0xd2f0f8 = _0x257293(_0x56836e[0x2], 0xa), _0x2df422 = _0x3ae8d6(_0x56836e[0x3], 0xa) * (_0x56836e[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x56bbea = _0x448bc3 * 0x3c + _0xd2f0f8 + _0x2df422 / 0x3e8, _0x2b0f8a = _0x1e5ab9['replace'](_0x5704ad, '')[_0x4eca90(0x2c7)](); _0x2b0f8a && _0x58e4cb[_0x4eca90(0x230)]({ 'time': _0x56bbea, 'text': _0x2b0f8a }); } } return _0x58e4cb; } else _0xde9311[_0x4eca90(0x230)](_0x1994ed); } } else _0x5bceff[_0x4eca90(0x6c7)] = _0x24be79[_0x4eca90(0x468)](_0x32aecc)[_0x4eca90(0x959)](_0x39dfb8 => _0x39dfb8[_0x4eca90(0x67b)][_0x4eca90(0x6c7)][_0x4eca90(0x2c7)]())['join']('、'); } } } try { const _0x5d310c = await _0x110c3c(_0xde9311); if (!_0x5d310c) return ![]; if (_0x460ec2) { if ('dHogM' !== _0x4eca90(0x7db)) _0x5e0613[_0x4eca90(0x61b)](_0x4eca90(0xa3b))[_0x4eca90(0x21f)] = '', _0x37a251['getElementById'](_0x4eca90(0x89a))[_0x4eca90(0x6c7)] = _0x4eca90(0x4b2), _0x4dccfe['getElementById']('world-book-edit-name')[_0x4eca90(0x21f)] = '', _0x199399[_0x4eca90(0x61b)](_0x4eca90(0xaad))[_0x4eca90(0x21f)] = ''; else try { let _0x8dbe72 = _0x5d310c[_0x4eca90(0x2c7)](); const _0x80e4ff = _0x8dbe72[_0x4eca90(0x4ed)](/(\[[\s\S]*\])/); _0x80e4ff && (_0x8dbe72 = _0x80e4ff[0x1]); const _0x320021 = JSON['parse'](_0x8dbe72); if (Array[_0x4eca90(0x9bd)](_0x320021)) { _0x4295e2['activeMeetingScriptQueue'] = [..._0x320021], _0x4295e2['characterLastScripts'][_0x99cc71['id']] = [..._0x320021], _0x4f3690(); const _0x491924 = _0x320021[_0x4eca90(0x959)](_0x3c42b8 => _0x3c42b8[_0x4eca90(0x34c)] === 'narrator' ? _0x3c42b8[_0x4eca90(0x8af)] : _0x3c42b8[_0x4eca90(0x34c)] + ':\x20' + _0x3c42b8[_0x4eca90(0x8af)])[_0x4eca90(0x247)]('\x0a\x0a'); _0x4295e2[_0x4eca90(0x369)][_0x4eca90(0x230)]({ 'role': _0x4eca90(0x725), 'senderId': _0x99cc71['id'], 'timestamp': Date[_0x4eca90(0xb3d)](), 'isOffline': !![], 'content': _0x491924 }); } } catch (_0x19f1a5) { _0x4eca90(0x186) === _0x4eca90(0x1d5) ? (_0x35b158[_0x4eca90(0x30a)] = { 'sender': _0x4f7d1d[0x1][_0x4eca90(0x2c7)](), 'content': _0x1c44d5[0x2]['trim']() }, _0x4d57b9[_0x4eca90(0x8f0)] = _0x2bc571[_0x4eca90(0x705)](_0x5f04ee[0x0]['length'])[_0x4eca90(0x2c7)]()) : (console[_0x4eca90(0x214)]('解析AI剧本JSON失败:', _0x19f1a5, _0x4eca90(0x213), _0x5d310c), _0x4295e2[_0x4eca90(0x369)][_0x4eca90(0x230)]({ 'role': _0x4eca90(0x725), 'senderId': _0x99cc71['id'], 'timestamp': Date[_0x4eca90(0xb3d)](), 'isOffline': !![], 'content': '[AI返回了无法解析的剧本:\x20' + _0x5d310c + ']' })); } } else { if (_0x4eca90(0x92c) === _0x4eca90(0x92c)) { const _0x18b624 = _0x736f9c(_0x5d310c), _0x4ec2b5 = _0x18b624[_0x4eca90(0x959)](_0x215bc3 => { const _0x5767ab = _0x4eca90, _0x1e7830 = _0x215bc3['trim'](), _0x19fc6d = _0x1e7830[_0x5767ab(0x4ed)](/^\[sticker:(.*?)\]$/), _0x819b81 = _0x1e7830[_0x5767ab(0x4ed)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x864bff = _0x1e7830['match'](/^\[music:(.*?)\|(.*?)\]$/), _0x53282f = _0x1e7830[_0x5767ab(0x4ed)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x864bff) return { 'type': _0x5767ab(0x67f), 'songName': _0x864bff[0x1]['trim'](), 'artist': _0x864bff[0x2][_0x5767ab(0x2c7)]() }; else { if (_0x19fc6d) return _0x5767ab(0x653) !== _0x5767ab(0x63b) ? { 'type': 'sticker', 'name': _0x19fc6d[0x1][_0x5767ab(0x2c7)]() } : (_0x5f2b00?.[_0x5767ab(0x45f)] || [])[_0x5767ab(0x7e6)](_0x24e1e7 => _0x24e1e7['id'] === _0x407966); else { if (_0x53282f) return { 'type': 'create_event', 'eventType': _0x53282f[0x1][_0x5767ab(0x2c7)](), 'eventDate': _0x53282f[0x2][_0x5767ab(0x2c7)](), 'eventContent': _0x53282f[0x3][_0x5767ab(0x2c7)]() }; else { if (_0x819b81) { const _0x4662a5 = parseFloat(_0x819b81[0x1]), _0x7087d = _0x819b81[0x2]['trim'](), _0x55fd66 = _0x4b57ed(_0x4295e2[_0x5767ab(0x845)]); let _0x13c83c = null; if (_0x7087d === _0x55fd66[_0x5767ab(0x9dc)]) _0x13c83c = _0x55fd66['id']; else { const _0x5a426b = _0x33b638(); if (_0x5a426b['type'] === _0x5767ab(0x519)) { if (_0x5767ab(0x5f6) === _0x5767ab(0x71c)) { let _0x18d5d9 = _0x2ba1ed[_0x5767ab(0x801)]['find'](_0x25b39a => _0x25b39a[_0x5767ab(0x900)] === _0x1ebd17); !_0x18d5d9 && (_0x18d5d9 = { 'characterId': _0x3291d7, 'entries': [] }, _0x14e786['diaries'][_0x5767ab(0x230)](_0x18d5d9)); _0x18d5d9[_0x5767ab(0x9d1)][_0x5767ab(0x230)]({ 'timestamp': _0x3e0997['now'](), 'author': _0x535bad, 'content': _0x505b71 }), _0x35993e(); const _0x25da51 = _0x18d5d9[_0x5767ab(0x9d1)][_0x5767ab(0xa1e)]; _0x1476da[_0x5767ab(0x79b)] = _0x470dc7[_0x5767ab(0x344)](_0x25da51 / 0x2) - 0x1, _0x38fd76(); } else { const _0x488587 = _0x4295e2['characters'][_0x5767ab(0x7e6)](_0x57bd88 => _0x5a426b[_0x5767ab(0x5c9)][_0x5767ab(0x2b7)](_0x57bd88['id']) && _0x57bd88[_0x5767ab(0x9dc)] === _0x7087d); if (_0x488587) _0x13c83c = _0x488587['id']; } } } if (_0x13c83c) return { 'type': _0x5767ab(0x42c), 'amount': _0x4662a5, 'recipientId': _0x13c83c, 'senderId': _0x99cc71['id'] }; else return { 'type': 'text', 'content': _0x5767ab(0x414) + _0x7087d + _0x5767ab(0x723) }; } else { if (_0x1e7830) return { 'type': _0x5767ab(0x8f6), 'content': _0x1e7830 }; } } } } return null; })[_0x4eca90(0x695)](Boolean), _0x13bc94 = async _0x10c69c => { const _0x2b89b1 = _0x4eca90; if (_0x2b89b1(0x897) === _0x2b89b1(0x686)) _0x2e6de3 && _0x362201(_0x3f19aa); else { const _0xdfe864 = { 'role': _0x2b89b1(0x725), 'senderId': _0x99cc71['id'], 'timestamp': Date[_0x2b89b1(0xb3d)](), 'isOffline': _0x460ec2 }; if (_0x10c69c['type'] === 'music') { const { songName: _0x4743d8, artist: _0x1193d } = _0x10c69c; _0xdfe864[_0x2b89b1(0x63a)] = _0x2b89b1(0x67f), _0xdfe864[_0x2b89b1(0x8f0)] = '[AI分享了音乐：' + _0x4743d8 + '\x20-\x20' + _0x1193d + ']'; try { const _0x25276e = await _0x53e88b(_0x4743d8, _0x1193d); let _0x7b4ec1 = null; if (_0x25276e[_0x2b89b1(0x211)]) { const _0x52342c = await _0x30f5c0(_0x25276e[_0x2b89b1(0x211)]); _0x7b4ec1 = _0x2b89b1(0x2dd) + Date[_0x2b89b1(0xb3d)]() + '_' + Math[_0x2b89b1(0x6cc)](), await _0x190daf(_0x7b4ec1, _0x52342c); } Object[_0x2b89b1(0x718)](_0xdfe864, { 'songName': _0x4743d8, 'artist': _0x1193d, 'coverId': _0x7b4ec1, 'playableUrl': _0x25276e[_0x2b89b1(0xb79)] }); } catch (_0x414327) { Object[_0x2b89b1(0x718)](_0xdfe864, { 'songName': _0x4743d8, 'artist': _0x1193d, 'coverId': null, 'playableUrl': null }); } } else { if (_0x10c69c[_0x2b89b1(0x63a)] === 'sticker') { const _0x42f4e4 = _0x4cfb86[_0x2b89b1(0x7e6)](_0x1f2860 => _0x1f2860[_0x2b89b1(0x9dc)] === _0x10c69c['name']); if (_0x42f4e4) Object[_0x2b89b1(0x718)](_0xdfe864, { 'content': _0x2b89b1(0x592) + _0x42f4e4[_0x2b89b1(0x9dc)] + ']', 'displayUrl': _0x42f4e4['url'] }); else _0xdfe864[_0x2b89b1(0x8f0)] = '[sticker:' + _0x10c69c[_0x2b89b1(0x9dc)] + ']'; } else { if (_0x10c69c[_0x2b89b1(0x63a)] === _0x2b89b1(0x42c)) { const _0x1c8977 = _0x10c69c['recipientId'] === _0x4b57ed(_0x4295e2[_0x2b89b1(0x845)])['id'] ? _0x4b57ed(_0x4295e2['activeChatId']) : _0x5aa3d9(_0x10c69c[_0x2b89b1(0x463)]); Object[_0x2b89b1(0x718)](_0xdfe864, { 'type': _0x2b89b1(0x42c), 'amount': _0x10c69c['amount'], 'recipientId': _0x10c69c[_0x2b89b1(0x463)], 'content': _0x2b89b1(0x4e5) + (_0x1c8977?.[_0x2b89b1(0x9dc)] || '未知') + _0x2b89b1(0x33a) + _0x10c69c[_0x2b89b1(0x4a1)] + ']' }); } else { if (_0x10c69c[_0x2b89b1(0x63a)] === _0x2b89b1(0x4f0)) { const _0x3c827c = _0x4b57ed(_0x12d38e['id']); if (!_0x3c827c || !_0x3c827c['id']) return console[_0x2b89b1(0x214)]('AI\x20试图创建事件，但找不到有效的用户ID。'), null; _0x4295e2['calendarEvents'][_0x2b89b1(0x230)]({ 'id': 'event_ai_' + Date[_0x2b89b1(0xb3d)](), 'date': _0x10c69c['eventDate'], 'type': _0x10c69c['eventType'], 'content': _0x10c69c[_0x2b89b1(0xa09)], 'userId': _0x3c827c['id'], 'createdBy': 'ai' }), _0x1b6337(), _0x46f553(), _0x1023d4(); const _0x284407 = _0x5aa3d9(_0x99cc71['id']); _0x284407 && _0x10c69c[_0x2b89b1(0xa62)] === _0x2b89b1(0x8a0) && (_0x2b89b1(0x64f) === _0x2b89b1(0x64f) ? _0x925876(_0x2b89b1(0xa14) + _0x284407['name'] + '\x20添加了新的纪念日：' + _0x10c69c[_0x2b89b1(0xa09)]) : _0x4de212[_0x2b89b1(0x3a7)]()); return { 'role': _0x2b89b1(0x725), 'senderId': _0x99cc71['id'], 'timestamp': Date['now'](), 'isOffline': _0x460ec2, 'content': null }; return { 'role': _0x2b89b1(0x725), 'senderId': _0x99cc71['id'], 'timestamp': Date['now'](), 'isOffline': _0x460ec2, 'content': null }; } else { const _0x3f3ebe = _0x20a8e2(_0x10c69c[_0x2b89b1(0x8f0)]); Object[_0x2b89b1(0x718)](_0xdfe864, { 'content': _0x3f3ebe[_0x2b89b1(0x8f0)], 'quotedMessage': _0x3f3ebe[_0x2b89b1(0x30a)] }); } } } } return _0xdfe864; } }, _0x1b109b = await Promise[_0x4eca90(0x253)](_0x4ec2b5[_0x4eca90(0x959)](_0x13bc94)); for (const _0x447698 of _0x1b109b) { _0x4eca90(0x855) !== 'AFAcQ' ? _0x3e54c1['forEach'](_0x29f5d1 => { const _0x3f31e5 = _0x4eca90, _0x25b704 = _0x29f5d1['sender'] === _0x3f31e5(0x3f6), _0x50ad45 = _0x25b704 ? _0x2c0f4d ? _0x1b6e57[0x0] : '?' : _0x2333ee ? _0x516617[0x0] : '?'; _0x1c7e9e += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x25b704 ? _0x3f31e5(0x742) : 'ai') + _0x3f31e5(0x891) + (!_0x25b704 ? _0x3f31e5(0x2eb) + _0x50ad45 + '</div>' : '') + _0x3f31e5(0xb4c) + (_0x25b704 ? 'user' : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x29f5d1[_0x3f31e5(0x8f0)] + _0x3f31e5(0xa0e) + (_0x25b704 ? _0x3f31e5(0x2eb) + _0x50ad45 + _0x3f31e5(0x300) : '') + _0x3f31e5(0x1d0); }) : (_0x447698[_0x4eca90(0x8f0)] || _0x447698[_0x4eca90(0xa4b)] || _0x447698['type'] === _0x4eca90(0x67f)) && ('Jeqsx' === _0x4eca90(0x584) ? _0x35f148 += _0x4eca90(0xa0f) + _0x1f914e[_0x4eca90(0x9dc)] + _0x4eca90(0x97e) : (await new Promise(_0x5909a0 => setTimeout(_0x5909a0, 0x12c + Math[_0x4eca90(0x6cc)]() * 0x190)), _0x4295e2['conversationHistory'][_0x4eca90(0x230)](_0x447698), _0x5eb56f())); } } else _0x58f455 = _0x4eca90(0x6df); } return _0x236ac2(), _0x5eb56f(), !![]; } catch (_0x358600) { if (_0x358600[_0x4eca90(0x9dc)] !== _0x4eca90(0x317)) { console[_0x4eca90(0x214)]('生成失败:\x20', _0x358600); const _0x381728 = { 'role': _0x4eca90(0x725), 'content': _0x4eca90(0x8cf) + _0x358600[_0x4eca90(0x1c9)], 'senderId': _0x99cc71['id'], 'isOffline': _0x460ec2 }; _0x4295e2[_0x4eca90(0x369)]['push'](_0x381728), _0x5eb56f(); } return ![]; } finally { _0x4eca90(0x957) !== _0x4eca90(0x898) ? _0x4d0bb5(![]) : (_0x10f713(), _0x46bf92[_0x4eca90(0x369)] = [], _0x486f39()); } } async function _0x325086() { const _0x870a = _0x34dc25, _0x2e54e1 = _0x33b638(); if (!_0x2e54e1 || _0x2e54e1[_0x870a(0x63a)] !== _0x870a(0x780)) { _0x925876('哼，只有私聊才能进行总结，群聊那么乱怎么记！'); return; } if (_0x4295e2[_0x870a(0x2ac)]) { if (_0x870a(0x375) === _0x870a(0x748)) { _0x7d770a[_0x870a(0x72d)] = _0x870a(0x630), _0x44663e[_0x870a(0x72d)] = ''; return; } else { _0x925876(_0x870a(0x499)); return; } } const _0x205c7b = await _0x4fac8b('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x205c7b) return; _0x48b9ad(!![], _0x870a(0x68a)), _0x3ad033[_0x870a(0x21f)] = '', _0x31571e['classList'][_0x870a(0xaf2)](_0x870a(0xa03)), _0x4295e2[_0x870a(0x2ac)] = !![]; try { const _0xf35032 = _0x5aa3d9(_0x2e54e1[_0x870a(0x5c9)][0x0]), _0x39d324 = _0x4b57ed(_0x2e54e1['id']), _0x3bd19b = _0x2df268(_0x2e54e1['id']); if (_0x3bd19b[_0x870a(0xa1e)] === 0x0) { _0x3ad033['value'] = _0x870a(0x24f); return; } const _0x19834e = _0x3bd19b[_0x870a(0x959)](_0x12a0aa => { const _0x231847 = _0x870a, _0x2643d7 = new Date(_0x12a0aa[_0x231847(0x6aa)]), _0x20feef = _0x2643d7[_0x231847(0x874)]() + '-' + String(_0x2643d7[_0x231847(0x4ef)]() + 0x1)[_0x231847(0x956)](0x2, '0') + '-' + String(_0x2643d7['getDate']())[_0x231847(0x956)](0x2, '0'), _0x14877c = String(_0x2643d7[_0x231847(0x220)]())['padStart'](0x2, '0') + ':' + String(_0x2643d7[_0x231847(0x503)]())['padStart'](0x2, '0'); let _0x2a98bb = '未知'; _0x12a0aa[_0x231847(0x55e)] === 'user' ? _0x2a98bb = _0x39d324[_0x231847(0x9dc)] : _0x2a98bb = _0xf35032[_0x231847(0x9dc)]; let _0x75ff26 = _0x12a0aa[_0x231847(0x8f0)]; if (_0x12a0aa[_0x231847(0xa4b)]) _0x75ff26 = _0x231847(0xb34); if (_0x12a0aa['imageId']) _0x75ff26 = '[发送了图片]'; return '[' + _0x20feef + '\x20' + _0x14877c + _0x231847(0x8be) + _0x2a98bb + _0x231847(0x890) + _0x75ff26; })[_0x870a(0x247)]('\x0a'), _0x420378 = _0x201a69[_0x870a(0x1dc)](/{charName}/g, _0xf35032[_0x870a(0x9dc)])[_0x870a(0x1dc)](/{userName}/g, _0x39d324[_0x870a(0x9dc)]), _0x9ca969 = [{ 'role': 'system', 'content': _0x420378 }, { 'role': _0x870a(0x742), 'content': _0x19834e }], _0x1b80de = await _0x110c3c(_0x9ca969); _0x3ad033[_0x870a(0x21f)] = _0x1b80de || _0x870a(0x5ee), _0x3ad033['scrollTop'] = 0x0; } catch (_0x54619a) { if (_0x870a(0x3f0) === _0x870a(0x342)) { const _0x23d974 = _0x221d0b[_0x870a(0x80d)](_0x755e4, 'readwrite'), _0x1b2b5d = _0x23d974[_0x870a(0x193)](_0x31ecb6), _0x3e168e = _0x1b2b5d[_0x870a(0x573)]({ 'id': _0x2f7fbf, 'data': _0x46f9ff }); _0x3e168e[_0x870a(0x371)] = () => _0xe15a74(), _0x3e168e[_0x870a(0x6f9)] = () => _0x5cc67c(_0x3e168e['error']); } else console['error'](_0x870a(0x8dd), _0x54619a), _0x3ad033[_0x870a(0x21f)] = _0x870a(0x808) + _0x54619a[_0x870a(0x1c9)]; } finally { _0x870a(0x658) !== _0x870a(0x658) ? _0x11d30c[_0x870a(0x6c7)] = _0x870a(0xa2d) : (_0x48b9ad(![]), _0x4295e2[_0x870a(0x2ac)] = ![]); } } async function _0x1dc518() { const _0x2c9c21 = _0x34dc25; if (_0x2c9c21(0x6c1) === _0x2c9c21(0x6b5)) _0x226a61[_0x2c9c21(0xa8c)]('无法解析旧的视奸内容来获取时间戳。', _0x29b079); else { console['log'](_0x2c9c21(0x71a)); if (!_0x4295e2['apiSettings']['endpoint'] || !_0x4295e2[_0x2c9c21(0x484)][_0x2c9c21(0x807)] || !_0x4295e2[_0x2c9c21(0x484)][_0x2c9c21(0x3ed)]) { if ('vVxRP' !== _0x2c9c21(0x60b)) { _0x925876(_0x2c9c21(0x47d)); return; } else { _0x5b82f3['innerHTML'] = _0x2c9c21(0x721); return; } } const _0x5382dd = _0x4295e2[_0x2c9c21(0x369)]['at'](-0x1)?.[_0x2c9c21(0x55e)] === _0x2c9c21(0x742); if (!_0x5382dd || _0x4295e2['isGenerating']) return; const _0x50a4a4 = _0x33b638(); if (!_0x50a4a4) return; _0x4295e2['isGenerating'] = !![], _0x4d0bb5(!![]); try { if (_0x2c9c21(0x4cd) === _0x2c9c21(0x4cd)) { if (_0x50a4a4[_0x2c9c21(0x63a)] === _0x2c9c21(0x780)) { const _0x96bf74 = _0x5aa3d9(_0x50a4a4[_0x2c9c21(0x5c9)][0x0]); console[_0x2c9c21(0x777)]('准备调用\x20generateAs...'); if (_0x96bf74) await _0x313c67(_0x96bf74, { 'force': !![] }); } else { if (_0x2c9c21(0xb7f) === _0x2c9c21(0x547)) { const _0x48e8f3 = _0x5a6f19[_0x2c9c21(0x61b)]('expense-description'), _0x2400b7 = _0x50eed5[_0x2c9c21(0x61b)](_0x2c9c21(0x50b)), _0x19e199 = _0x48e8f3[_0x2c9c21(0x21f)][_0x2c9c21(0x2c7)](), _0x1e8beb = _0x225950(_0x2400b7[_0x2c9c21(0x21f)]); if (!_0x19e199 || _0x128eae(_0x1e8beb) || _0x1e8beb <= 0x0) { _0x57c712(_0x2c9c21(0x1b5)); return; } _0x1ff82a['accountingData'][_0x2c9c21(0x230)]({ 'id': _0x2c9c21(0x68c) + _0x44154d[_0x2c9c21(0xb3d)](), 'description': _0x19e199, 'amount': _0x1e8beb, 'timestamp': _0x3c5674['now']() }), _0x195851(), _0x4b8a0a(), _0x48e8f3[_0x2c9c21(0x21f)] = '', _0x2400b7[_0x2c9c21(0x21f)] = '', _0x48e8f3['focus'](); } else { const _0x353789 = await _0x4179a1(); if (_0x353789 && _0x353789['events']?.[_0x2c9c21(0xa1e)]) await _0x2bf72c(_0x353789); else { if (_0x2c9c21(0x9a2) !== _0x2c9c21(0xb10)) { console[_0x2c9c21(0xa8c)](_0x2c9c21(0x5e6)); const _0x1e2926 = _0x50a4a4['participantIds']['map'](_0x5aa3d9)[_0x2c9c21(0x695)](Boolean); if (!_0x1e2926[_0x2c9c21(0xa1e)]) return; let _0x2ae220 = 0x0; for (const _0xfb72da of _0x1e2926) { _0x313c67(_0xfb72da, { 'force': !![], 'delayMs': _0x2ae220 }), _0x2ae220 += 0x1f4; } } else _0x386247[_0x2c9c21(0x230)]({ 'role': _0x2c9c21(0x742), 'content': _0x8804a9 }), _0x48c5b0[_0x2c9c21(0x230)]({ 'role': _0x2c9c21(0x725), 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' }); } } } } else { const _0x2b8942 = _0x3ee1d0[_0x2c9c21(0x904)][_0x57de0b]; _0x2b8942 && _0x2b8942[_0x2c9c21(0x67c)] && _0x1ab332[_0x2c9c21(0x3c9)]['push'](..._0x2b8942['originalExpenses']), delete _0x43c9dc[_0x2c9c21(0x904)][_0x2ec5fc], _0x30f9d8(), _0x5de1bd(); } } catch (_0x574f41) { _0x574f41[_0x2c9c21(0x9dc)] !== _0x2c9c21(0x317) && (_0x2c9c21(0x768) === _0x2c9c21(0x26c) ? (_0x53bc44[_0x2c9c21(0x1b2)] = _0x31d370[_0x2c9c21(0xb79)], _0xd0f29a[_0x2c9c21(0xb59)](), _0x330675[_0x2c9c21(0x76d)](_0x2c9c21(0x940))[_0x2c9c21(0x6c7)] = '❚❚') : (console[_0x2c9c21(0x214)](_0x2c9c21(0x908), _0x574f41), _0x4b41ed({ 'role': _0x2c9c21(0x725), 'content': _0x2c9c21(0x8cf) + _0x574f41[_0x2c9c21(0x1c9)] }, _0x4295e2['conversationHistory']['length'] - 0x1))); } finally { _0x4295e2[_0x2c9c21(0x2ac)] = ![], _0x4d0bb5(![]); } } } function _0x355b87(_0x2f9133, _0x20e153) { const _0x125b81 = _0x34dc25; if ('oBjLZ' === 'oBjLZ') { const _0x941929 = _0x20e153[_0x125b81(0x94b)](), _0x3cc741 = _0x2f9133['toLowerCase'](); if (_0x941929[_0x125b81(0x772)]('claude')) return _0x125b81(0x745); if (_0x3cc741['includes'](_0x125b81(0x1da))) return 'anthropic'; if (_0x3cc741['includes'](_0x125b81(0x848))) return _0x125b81(0x5ca); if (_0x941929[_0x125b81(0x772)](_0x125b81(0x5ca))) return _0x125b81(0x5ca); return 'openai'; } else { if (_0x4a7941[_0x125b81(0x74e)]()['toString']()) return; const _0x27a3c7 = _0x2b4f0f[_0x125b81(0x6e7)][_0x125b81(0x97d)]('.message-container'), _0x2a96c0 = _0x5f2f6d[_0x125b81(0x6e7)][_0x125b81(0x97d)](_0x125b81(0x3af)); if (!_0x27a3c7 || _0x2a96c0) return; const _0x346438 = _0x4d70ba(_0x27a3c7['dataset'][_0x125b81(0xb55)], 0xa); if (_0x53df51(_0x346438)) return; _0x4945ef(_0x346438); } } async function _0x110c3c(_0x13a1ac, _0x20c477 = {}) { const _0x4d202c = _0x34dc25; if (_0x4d202c(0x35d) === _0x4d202c(0x4e0)) { const _0x50780a = _0x195f01[_0x4d202c(0x76d)](_0x4d202c(0x6e3) + _0x37a8ee + _0x4d202c(0x758) + _0x5115e1 + '\x20.app-icon-img')?.['innerHTML']; _0x50780a && (_0x365711[_0x4d202c(0x72d)] = _0x50780a); } else { _0x4295e2[_0x4d202c(0x324)] && (_0x4d202c(0x86e) !== _0x4d202c(0xad4) ? _0x4295e2[_0x4d202c(0x324)][_0x4d202c(0x56e)]('New\x20request\x20started') : _0x17e8c2[_0x4d202c(0x777)]('缓存命中:\x20' + _0x91c5bc)); _0x4295e2[_0x4d202c(0x324)] = new AbortController(); const _0x28bddd = _0x4295e2[_0x4d202c(0x324)][_0x4d202c(0x2d8)], { endpoint: _0x191044, key: _0x5019a6, model: _0xe81e87 } = _0x4295e2[_0x4d202c(0x484)], _0x467258 = !!_0x20c477['json'], _0x174e93 = _0x355b87(_0x191044, _0xe81e87); console[_0x4d202c(0x777)](_0x4d202c(0x909) + _0x174e93); let _0x46bdc4 = ''; try { switch (_0x174e93) { case _0x4d202c(0x745): { const _0x4cb9f1 = _0x565a2f(_0x5019a6), _0x14c2af = _0x13a1ac['find'](_0x37b7a0 => _0x37b7a0[_0x4d202c(0x55e)] === 'system')?.[_0x4d202c(0x8f0)] || '', _0x402c04 = _0x13a1ac['filter'](_0x26da48 => _0x26da48['role'] !== _0x4d202c(0x4f2)), _0x584fd5 = { 'model': _0xe81e87, 'system': _0x14c2af, 'messages': _0x402c04[_0x4d202c(0x959)](_0x2739d4 => ({ 'role': _0x2739d4[_0x4d202c(0x55e)], 'content': [{ 'type': _0x4d202c(0x8f6), 'text': _0x2739d4['content'] }] })), 'max_tokens': 0x1000 }, _0x40354d = await fetch(_0x191044, { 'method': _0x4d202c(0x6d1), 'headers': { 'Content-Type': 'application/json', 'x-api-key': _0x4cb9f1, 'anthropic-version': _0x4d202c(0x5f1) }, 'body': JSON[_0x4d202c(0x1c5)](_0x584fd5), 'signal': _0x28bddd }); if (!_0x40354d['ok']) { const _0x8e0266 = await _0x40354d['json']()[_0x4d202c(0x3ab)](() => ({})); throw new Error(_0x4d202c(0x59d) + _0x40354d[_0x4d202c(0x6e9)] + _0x4d202c(0x4df) + (_0x8e0266[_0x4d202c(0x214)]?.[_0x4d202c(0x1c9)] || _0x40354d[_0x4d202c(0x43a)])); } const _0x4ef02e = await _0x40354d['json'](); _0x46bdc4 = _0x4ef02e[_0x4d202c(0x8f0)]?.[0x0]?.[_0x4d202c(0x8f6)] || ''; break; } case _0x4d202c(0x5ca): { const _0x4307fb = _0x565a2f(_0x5019a6), _0x125250 = _0x191044[_0x4d202c(0x2b7)](_0x4d202c(0x93a)), _0x11a069 = _0x5198c4 => { const _0x353c1e = _0x4d202c; if (_0x353c1e(0x5bc) !== _0x353c1e(0x69d)) { const _0x34c326 = []; if (_0x5198c4[_0x353c1e(0x8f0)]) _0x34c326[_0x353c1e(0x230)]({ 'text': _0x5198c4[_0x353c1e(0x8f0)] }); if (_0x5198c4[_0x353c1e(0x37c)]) { if ('EImZS' === _0x353c1e(0x263)) _0x40e107['activeUserProfileId'] = _0x18b42e[_0x353c1e(0x59b)][0x0]['id']; else { const _0x48562e = _0x5198c4[_0x353c1e(0x37c)]['split'](',')[0x1], _0x2c031a = _0x5198c4[_0x353c1e(0x37c)][_0x353c1e(0x705)](_0x5198c4['image'][_0x353c1e(0x66b)](':') + 0x1, _0x5198c4[_0x353c1e(0x37c)][_0x353c1e(0x66b)](';')) || _0x353c1e(0x87c); _0x34c326[_0x353c1e(0x230)]({ 'inline_data': { 'mime_type': _0x2c031a, 'data': _0x48562e } }); } } return _0x34c326; } else { const _0xd62e91 = [], _0x1151af = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x241297; while ((_0x241297 = _0x1151af['exec'](_0x44536f)) !== null) { const _0x3e5600 = _0x241297[0x1]['replace'](/\\"/g, '\x22')[_0x353c1e(0x1dc)](/\\n/g, '\x0a')[_0x353c1e(0x2c7)](); if (_0x3e5600) _0xd62e91[_0x353c1e(0x230)](_0x3e5600); } if (_0xd62e91[_0x353c1e(0xa1e)]) return _0xd62e91[_0x353c1e(0x380)](_0x36fb6)[_0x353c1e(0xae6)](0x0, 0x9); } }, _0x3344a4 = _0x13a1ac['map'](_0x54918d => ({ 'role': _0x54918d[_0x4d202c(0x55e)] === _0x4d202c(0x725) ? 'model' : _0x54918d['role'] === _0x4d202c(0x4f2) ? _0x4d202c(0x742) : _0x54918d[_0x4d202c(0x55e)], 'parts': _0x11a069(_0x54918d) }))['filter'](_0x452cbd => _0x452cbd[_0x4d202c(0x78b)][_0x4d202c(0xa1e)] > 0x0), _0xc89510 = { 'contents': _0x3344a4 }; if (_0x467258 && _0x125250) { if (_0x4d202c(0x572) === 'Pjvoy') { const _0x58c181 = _0x43e57f(_0x3474af[_0x4d202c(0xa6b)]); if (!_0x58c181) return; _0x3d2d99 = !![], _0x109f12[_0x4d202c(0x7c9)]['display'] = _0x4d202c(0x1c1); const _0x767445 = _0x58c181[_0x4d202c(0x384)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0x619544[_0x4d202c(0x61b)](_0x4d202c(0x89f))['value'] = _0x767445['x'], _0x509b50[_0x4d202c(0x61b)](_0x4d202c(0x7df))[_0x4d202c(0x21f)] = _0x767445['y'], _0x2a219a[_0x4d202c(0x61b)](_0x4d202c(0x40d))['value'] = _0x767445[_0x4d202c(0x1b9)] * 0x64, _0x35e742 = { ..._0x767445 }, _0x188ac4[_0x4d202c(0x61b)](_0x4d202c(0x9c6))[_0x4d202c(0x7c9)]['display'] = _0x4d202c(0x678), _0x3e1682[_0x4d202c(0x61b)](_0x4d202c(0x513))[_0x4d202c(0x7c9)][_0x4d202c(0x458)] = _0x4d202c(0x678); } else _0xc89510[_0x4d202c(0x90c)] = { 'response_mime_type': _0x4d202c(0x76f) }; } const _0x48a522 = _0x191044 + '/v1beta/models/' + _0xe81e87 + _0x4d202c(0xb03) + _0x4307fb + _0x4d202c(0x319), _0x287826 = await fetch(_0x48a522, { 'method': _0x4d202c(0x6d1), 'headers': { 'Content-Type': 'application/json' }, 'body': JSON['stringify'](_0xc89510), 'signal': _0x28bddd }); if (!_0x287826['ok']) throw new Error('Gemini\x20API\x20Error:\x20' + _0x287826['status']); const _0x76537d = _0x287826[_0x4d202c(0x68f)][_0x4d202c(0x417)](), _0x3ccd7d = new TextDecoder(); let _0x735c96 = ''; while (!![]) { if (_0x4d202c(0x6b1) === 'aoRzU') { if (_0x28bddd[_0x4d202c(0x644)]) { if (_0x4d202c(0x91c) === _0x4d202c(0x84e)) !_0x230d5e[_0x4d202c(0x1f5)][_0x4d202c(0x5f7)]('load-more-btn') && _0x923c3a['remove'](); else { console[_0x4d202c(0x777)](_0x4d202c(0x6d0)), _0x76537d['cancel'](); break; } } const { done: _0x24545, value: _0x3b2b25 } = await _0x76537d[_0x4d202c(0x9db)](); if (_0x24545) break; const _0x540254 = _0x3ccd7d[_0x4d202c(0x1cd)](_0x3b2b25, { 'stream': !![] }), _0x3ab791 = _0x540254['split']('\x0a')['filter'](_0x24ddda => _0x24ddda[_0x4d202c(0x2c7)]()['startsWith'](_0x4d202c(0x1fe))); for (const _0x59cac9 of _0x3ab791) { if (_0x4d202c(0x568) !== _0x4d202c(0x568)) { const _0x1a4c6b = _0x16e5b9(_0x4f32f6); if (_0x1a4c6b) { const _0x527c54 = _0x3875b9['createElement'](_0x4d202c(0x9ac)); _0x527c54[_0x4d202c(0x21f)] = _0x1a4c6b['id'], _0x527c54[_0x4d202c(0x6c7)] = _0x1a4c6b[_0x4d202c(0x9dc)], _0x468547[_0x4d202c(0x1ce)](_0x527c54); } } else { const _0x4439c3 = _0x59cac9[_0x4d202c(0x1dc)](_0x4d202c(0x2f8), ''); if (_0x4439c3 === _0x4d202c(0x51a)) break; try { _0x735c96 += JSON[_0x4d202c(0xb4e)](_0x4439c3)['candidates'][0x0][_0x4d202c(0x8f0)]['parts'][0x0][_0x4d202c(0x8f6)]; } catch { } } } } else { const _0x4762c9 = _0x57186d[_0x4d202c(0x29c)](_0x1664e3 / 0x3c); if (_0x4762c9 < 0x30) _0x4f5784 += _0x4d202c(0x877) + _0x4762c9 + _0x4d202c(0x374); else _0x51181d += _0x4d202c(0x5f4) + _0x3bea81[_0x4d202c(0x29c)](_0x4762c9 / 0x18) + _0x4d202c(0x75d); } } _0x46bdc4 = _0x735c96; break; } case _0x4d202c(0x950): default: { if (_0x4d202c(0xb5d) !== 'rZKQw') _0x4c5cde = _0x1cfda4[_0x4d202c(0x21f)]; else { const _0x1ad849 = _0x565a2f(_0x5019a6), _0x13bea5 = _0x191044['replace'](/\/+$/, '') + _0x4d202c(0x9ee), _0x58e501 = _0x13a1ac[_0x4d202c(0x959)](_0x31e3b7 => { const _0x3fc087 = _0x4d202c; if (_0x31e3b7[_0x3fc087(0x55e)] === _0x3fc087(0x742) && _0x31e3b7['image']) return { 'role': _0x3fc087(0x742), 'content': [{ 'type': _0x3fc087(0x8f6), 'text': _0x31e3b7['content'] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x31e3b7[_0x3fc087(0x37c)], 'detail': 'high' } }] }; return { 'role': _0x31e3b7[_0x3fc087(0x55e)], 'content': _0x31e3b7[_0x3fc087(0x8f0)] }; })[_0x4d202c(0x695)](_0xedee21 => _0xedee21[_0x4d202c(0x8f0)]), _0x4bf871 = { 'model': _0xe81e87, 'messages': _0x58e501, 'max_tokens': 0x1000, ..._0x467258 ? { 'response_format': { 'type': 'json_object' } } : {} }, _0x3249ad = await fetch(_0x13bea5, { 'method': _0x4d202c(0x6d1), 'headers': { 'Content-Type': _0x4d202c(0x76f), 'Authorization': _0x4d202c(0xab2) + _0x1ad849 }, 'body': JSON['stringify'](_0x4bf871), 'signal': _0x28bddd }); if (!_0x3249ad['ok']) { if (_0x4d202c(0x4c4) !== _0x4d202c(0xa90)) { const _0x491be4 = await _0x3249ad['json']()[_0x4d202c(0x3ab)](() => ({})); throw new Error(_0x4d202c(0x9f0) + _0x3249ad[_0x4d202c(0x6e9)] + _0x4d202c(0x4df) + (_0x491be4[_0x4d202c(0x214)]?.['message'] || _0x3249ad[_0x4d202c(0x43a)])); } else { if (_0x21c35e[_0x4d202c(0x6e7)][_0x4d202c(0x97d)]('button')) return; const _0x37606b = _0x24af53[_0x4d202c(0x61b)](_0x4d202c(0x483)); _0x37606b && _0x37606b[_0x4d202c(0x3cd)](); } } const _0x537c94 = await _0x3249ad[_0x4d202c(0x787)](); _0x46bdc4 = _0x537c94[_0x4d202c(0x7ed)]?.[0x0]?.[_0x4d202c(0x1c9)]?.[_0x4d202c(0x8f0)] || ''; break; } } }return _0x46bdc4; } catch (_0xaa2dab) { if (_0xaa2dab[_0x4d202c(0x9dc)] === _0x4d202c(0x317)) { if (_0x4d202c(0x5dc) !== 'YWYsD') return console[_0x4d202c(0x777)](_0x4d202c(0x86b)), ''; else { const _0x4db6c6 = _0x38cfa8[_0x4d202c(0x6e7)][_0x4d202c(0xaa5)][0x0]; if (!_0x4db6c6) return; const _0x4f488a = _0x2fbffa[_0x4d202c(0xa4f)](_0x4db6c6); _0x2d5fc3['src'] = _0x4f488a, _0x47b791[_0x4d202c(0x5a9)] = () => { const _0x3b7598 = _0x4d202c; _0x38c358[_0x3b7598(0x3c8)](_0x4f488a); }; } } throw _0xaa2dab; } finally { if (_0x4d202c(0x1e1) !== _0x4d202c(0xa5d)) { if (_0x4295e2['currentAbortController'] && _0x4295e2[_0x4d202c(0x324)]['signal'] === _0x28bddd) { if (_0x4d202c(0x852) === 'CBYDt') _0x4295e2['currentAbortController'] = null; else { const _0x5f1067 = _0x5ac1e8[_0x4d202c(0x6a8)](_0x4d202c(0xa9f)); _0x5f1067[_0x4d202c(0x6e1)] = _0x4d202c(0x365), _0x5f1067[_0x4d202c(0x72d)] = '<span\x20class=\x22description\x22>' + _0x7b86e1[_0x4d202c(0x489)] + _0x4d202c(0x5af) + _0x648190[_0x4d202c(0x4a1)][_0x4d202c(0x1ba)](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0x463794['id'] + _0x4d202c(0x402), _0x28cb93[_0x4d202c(0x1ce)](_0x5f1067); } } } else { const _0x3f16b7 = _0x18dfa9[_0x4d202c(0x460)](0x1, _0xdd594c(_0x19e1ed[_0x4d202c(0x81c)]?.[_0x4d202c(0x378)] ?? 0x64)), _0x1c7396 = _0x56119a[_0x4d202c(0x7af)][_0x4d202c(0x695)](_0x1e69aa => _0x1e69aa[_0x4d202c(0x5c9)][_0x4d202c(0x2b7)](_0x346850)), _0x2571ef = _0x1c7396['map'](_0x17c418 => { const _0x8afe41 = _0x4d202c, _0x4b1107 = _0x20d160(_0x17c418['id']), _0x543a15 = _0x4b1107[_0x8afe41(0xa1e)] > 0x0 ? _0x4b1107[_0x4b1107['length'] - 0x1] : null; return { 'chat': _0x17c418, 'history': _0x4b1107, 'lastTimestamp': _0x543a15 ? _0x543a15['timestamp'] : 0x0 }; })[_0x4d202c(0x695)](_0x230a19 => _0x230a19[_0x4d202c(0x2a9)][_0x4d202c(0xa1e)] > 0x0); _0x2571ef['sort']((_0x576fd3, _0xb8dad8) => _0xb8dad8[_0x4d202c(0x825)] - _0x576fd3[_0x4d202c(0x825)]); const _0x320fde = [], _0x58e45f = {}; return _0x2571ef[_0x4d202c(0xaa9)]((_0x285a93, _0x56d481) => { const _0x3a13f7 = _0x4d202c, _0x14bf49 = _0x44f05b(_0x285a93[_0x3a13f7(0x19a)], _0x285a93[_0x3a13f7(0x2a9)], _0x3f16b7); if (_0x14bf49[_0x3a13f7(0xa1e)] === 0x0) return; const _0x4f5467 = _0x56d481 === 0x0 ? _0x3a13f7(0x4e2) : _0x3a13f7(0x184); _0x320fde[_0x3a13f7(0x230)]('##\x20' + _0x4f5467 + _0x4b058f(_0x285a93[_0x3a13f7(0x19a)]) + '\x0a' + _0x14bf49['join']('\x0a')), _0x58e45f[_0x285a93[_0x3a13f7(0x19a)]['id']] = _0x14bf49['length']; }), { 'omniText': _0x320fde['join']('\x0a\x0a'), 'usedCounts': _0x58e45f }; } } } } async function _0x4ca44e() { const _0x2ce1e8 = _0x34dc25, _0x594178 = _0x68c2f4['characterEdit'][_0x2ce1e8(0x1f5)][_0x2ce1e8(0x5f7)](_0x2ce1e8(0x45a)), _0x1a76b9 = _0x594178 ? _0x5877a1[_0x2ce1e8(0x21f)] : null; let _0x51358b = null, _0x295d84 = ''; if (_0x594178 && _0x1a76b9) { _0x51358b = _0x4295e2['chats'][_0x2ce1e8(0x7e6)](_0x2ab734 => _0x2ab734[_0x2ce1e8(0x63a)] === _0x2ce1e8(0x780) && _0x2ab734[_0x2ce1e8(0x5c9)]['includes'](_0x1a76b9)); const _0x14486a = _0x5aa3d9(_0x1a76b9); _0x295d84 = _0x14486a ? _0x14486a['name'] : _0x2ce1e8(0x7de); } else { if (_0x4295e2['activeChatId']) { _0x51358b = _0x33b638(); const _0x420dcc = document['getElementById']('char-name-header')[_0x2ce1e8(0x6c7)]; _0x295d84 = _0x420dcc || _0x2ce1e8(0x67d); } } if (!_0x51358b) { if (_0x2ce1e8(0xa6e) !== _0x2ce1e8(0x5ff)) { _0x925876(_0x2ce1e8(0x8d0)); return; } else { _0x2eb455[_0x2ce1e8(0x72d)] = _0x2ce1e8(0x569); return; } } const _0x316280 = await _0x4fac8b(_0x2ce1e8(0x37e) + _0x295d84 + '\x22\x20的聊天记录吗？此操作不可撤销。'); if (!_0x316280) return; if (_0x51358b['id'] === _0x4295e2[_0x2ce1e8(0x845)]) { if (_0x2ce1e8(0x3e7) !== _0x2ce1e8(0x44d)) _0x53b62a(), _0x4295e2['conversationHistory'] = [], _0x1639f3(); else { const _0x21715f = _0x3e2359[_0x2ce1e8(0x61b)](_0x2ce1e8(0x4ea)); _0x4f9b4f[_0x2ce1e8(0x61b)](_0x2ce1e8(0x53a))[_0x2ce1e8(0x6c7)] = '账本', _0x22cdc2['getElementById']('header-actions')[_0x2ce1e8(0x72d)] = ''; const _0x2c4009 = _0x178f25['keys'](_0xf960df['accountingLedger'])['sort']((_0x33cb17, _0x6720df) => new _0x3f2224(_0x6720df) - new _0x37cbfc(_0x33cb17)); if (_0x2c4009[_0x2ce1e8(0xa1e)] === 0x0) { _0x21715f[_0x2ce1e8(0x72d)] = _0x2ce1e8(0x980); return; } _0x21715f[_0x2ce1e8(0x72d)] = '', _0x2c4009[_0x2ce1e8(0xaa9)](_0x469a02 => { const _0x49b631 = _0x2ce1e8, _0x220da0 = _0x516825[_0x49b631(0x6a8)]('div'); _0x220da0[_0x49b631(0x6e1)] = _0x49b631(0x365), _0x220da0[_0x49b631(0x7c9)][_0x49b631(0x98e)] = 'pointer'; const _0x4036b3 = _0x1eeccc[_0x49b631(0x904)][_0x469a02], _0x1a09e2 = _0x4036b3[_0x49b631(0xb1b)][_0x49b631(0x9a6)]((_0x655afc, _0x234d5e) => _0x655afc + (_0x234d5e[_0x49b631(0x4a1)] || 0x0), 0x0); _0x220da0['innerHTML'] = '<span\x20class=\x22description\x22>' + _0x469a02 + '</span><span\x20class=\x22amount\x22>总计:\x20' + _0x1a09e2['toFixed'](0x2) + _0x49b631(0x279), _0x220da0['addEventListener']('click', () => { const _0x3c3733 = _0x49b631; _0x1bdb0a[_0x3c3733(0x1f5)][_0x3c3733(0x194)](_0x3c3733(0x45a)), _0x1a000f[_0x3c3733(0x1f5)][_0x3c3733(0xaf2)]('active'), _0x46eb21(_0x4036b3, _0x469a02); }), _0x21715f[_0x49b631(0x1ce)](_0x220da0); }); } } try { localStorage[_0x2ce1e8(0x662)](_0x2ce1e8(0x1a9) + _0x51358b['id']); } catch (_0x289b93) { if (_0x2ce1e8(0x84d) !== _0x2ce1e8(0x4e9)) console[_0x2ce1e8(0x214)](_0x2ce1e8(0xabc) + _0x51358b['id'], _0x289b93); else return ''; } _0x925876('\x22' + _0x295d84 + _0x2ce1e8(0x278)); } const _0x2da36c = document[_0x34dc25(0x61b)](_0x34dc25(0x5ab)), _0x1c3f7e = document[_0x34dc25(0x61b)](_0x34dc25(0xa51)), _0xd92e3b = document[_0x34dc25(0x61b)](_0x34dc25(0xa26)); _0x2da36c['addEventListener'](_0x34dc25(0x3cd), async () => { const _0x2ad08d = _0x34dc25; _0x48b9ad(!![], _0x2ad08d(0x31f)); const _0x3c79f1 = []; try { if ('Gfuga' !== _0x2ad08d(0x74a)) { _0xc7af7a[_0x2ad08d(0x21f)] = _0x2ad08d(0x24f); return; } else { const _0x207cd6 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x219f63 = 0x0; _0x219f63 < localStorage['length']; _0x219f63++) { const _0x598198 = localStorage[_0x2ad08d(0x807)](_0x219f63); if (_0x598198) _0x207cd6[_0x2ad08d(0xa64)][_0x598198] = localStorage['getItem'](_0x598198); } const _0x23af57 = await _0x1dfda6, _0x24d01f = _0x23af57[_0x2ad08d(0x80d)](_0x136f7d, 'readonly'), _0x5bad5a = _0x24d01f[_0x2ad08d(0x193)](_0x136f7d), _0x1db38 = await new Promise((_0x18f5af, _0xcad93a) => { const _0x304dc6 = _0x2ad08d; if ('OoUUL' === _0x304dc6(0xa96)) { const _0x3a930d = _0x5bad5a[_0x304dc6(0x913)](); _0x3a930d[_0x304dc6(0x371)] = () => _0x18f5af(_0x3a930d['result']), _0x3a930d[_0x304dc6(0x6f9)] = () => _0xcad93a(_0x3a930d[_0x304dc6(0x214)]); } else _0x358168['innerHTML'] = _0x304dc6(0xa9e); }); for (const _0x48d197 of _0x1db38) { if (_0x48d197[_0x2ad08d(0x7da)] instanceof Blob) { if (_0x2ad08d(0x5a3) !== _0x2ad08d(0x2c4)) try { _0x207cd6[_0x2ad08d(0x736)][_0x48d197['id']] = await _0x512f2f(_0x48d197[_0x2ad08d(0x7da)]); } catch (_0x996d8e) { _0x3c79f1[_0x2ad08d(0x230)](_0x48d197['id']); } else { _0x349828(_0x2ad08d(0x6a0) + _0x26d575 + '\x20张旧封面。应用即将刷新。'), _0x2667fd(() => _0x2b28c8[_0x2ad08d(0x377)](), 0x5dc); return; } } } const _0x510db3 = _0x23af57[_0x2ad08d(0x80d)](_0x4aa13b, _0x2ad08d(0x932)), _0x11dca3 = _0x510db3[_0x2ad08d(0x193)](_0x4aa13b), _0x47eec5 = await new Promise((_0xfb7af0, _0x1a8e89) => { const _0x571a29 = _0x2ad08d, _0x3ddb59 = _0x11dca3['getAll'](); _0x3ddb59[_0x571a29(0x371)] = () => _0xfb7af0(_0x3ddb59[_0x571a29(0x979)]), _0x3ddb59['onerror'] = () => _0x1a8e89(_0x3ddb59[_0x571a29(0x214)]); }); for (const _0x6eb21 of _0x47eec5) { const _0x35f4fa = { ..._0x6eb21 }; _0x6eb21[_0x2ad08d(0x624)] instanceof Blob && (_0x35f4fa[_0x2ad08d(0x624)] = await _0x512f2f(_0x6eb21[_0x2ad08d(0x624)])), _0x6eb21['cover'] instanceof Blob && (_0x35f4fa['cover'] = await _0x512f2f(_0x6eb21[_0x2ad08d(0x211)])), _0x207cd6[_0x2ad08d(0x7e2)][_0x2ad08d(0x230)](_0x35f4fa); } const _0x39912d = new Blob([JSON['stringify'](_0x207cd6, null, 0x2)], { 'type': 'application/json' }), _0x11c97b = URL['createObjectURL'](_0x39912d), _0x43741a = document[_0x2ad08d(0x6a8)]('a'), _0x4fc038 = new Date(), _0x5bbc33 = _0x4fc038[_0x2ad08d(0x874)]() + '-' + String(_0x4fc038[_0x2ad08d(0x4ef)]() + 0x1)[_0x2ad08d(0x956)](0x2, '0') + '-' + String(_0x4fc038[_0x2ad08d(0x72b)]())['padStart'](0x2, '0'); _0x43741a[_0x2ad08d(0xb94)] = _0x11c97b, _0x43741a[_0x2ad08d(0x99b)] = 'Noir_Backup_' + _0x5bbc33 + _0x2ad08d(0x1a5), document[_0x2ad08d(0x68f)][_0x2ad08d(0x1ce)](_0x43741a), _0x43741a[_0x2ad08d(0x3cd)](), document[_0x2ad08d(0x68f)][_0x2ad08d(0xa93)](_0x43741a), URL[_0x2ad08d(0x3c8)](_0x11c97b), _0x48b9ad(![]); if (_0x3c79f1[_0x2ad08d(0xa1e)] > 0x0) { if (_0x2ad08d(0x5ae) !== 'VEFla') _0x925876(_0x2ad08d(0x497) + _0x3c79f1[_0x2ad08d(0x247)]('\x0a')); else { const _0x493ee0 = new _0x40cd9c(), _0x46347b = _0x39e297['getElementById'](_0x2ad08d(0x677)), _0x4b5d58 = _0x27b9a1['getElementById'](_0x2ad08d(0x696)), _0x546a81 = _0x5540b6['getElementById'](_0x2ad08d(0xb97)); _0x46347b && _0x4b5d58 && (_0x46347b[_0x2ad08d(0x6c7)] = _0x493ee0[_0x2ad08d(0x510)](_0x2ad08d(0x5a5), { 'hour': _0x2ad08d(0x48c), 'minute': _0x2ad08d(0x48c), 'hour12': ![] }), _0x4b5d58[_0x2ad08d(0x6c7)] = _0x493ee0['toLocaleDateString']('zh-CN', { 'month': _0x2ad08d(0x9a1), 'day': 'numeric', 'weekday': _0x2ad08d(0x9a1) })), _0x546a81 && (_0x546a81['innerHTML'] = _0x2ad08d(0x251) + _0x493ee0[_0x2ad08d(0x510)](_0x2ad08d(0x5a5), { 'hour': '2-digit', 'minute': _0x2ad08d(0x48c), 'hour12': ![] }) + _0x2ad08d(0x93e)); } } else _0x925876(_0x2ad08d(0x495)); } } catch (_0x51b150) { _0x48b9ad(![]), console[_0x2ad08d(0x214)]('全量导出失败:', _0x51b150), _0x925876(_0x2ad08d(0x95c) + _0x51b150[_0x2ad08d(0x1c9)]); } }), _0x1c3f7e['addEventListener']('click', () => { const _0xf24618 = _0x34dc25; if ('vDwbI' === _0xf24618(0x40a)) { const _0x1aec96 = _0x155190[_0xf24618(0x80d)](_0x37d0fd, _0xf24618(0xab9)), _0x1e0e05 = _0x1aec96[_0xf24618(0x193)](_0x46ac19), _0x2390da = _0x1e0e05[_0xf24618(0x573)]({ 'id': _0x1e5f7f, 'blob': _0x4a36d0 }); _0x2390da[_0xf24618(0x371)] = () => _0x512037(_0x2390da[_0xf24618(0x979)]), _0x2390da[_0xf24618(0x6f9)] = () => _0x29cca7(_0x2390da[_0xf24618(0x214)]); } else _0xd92e3b['click'](); }), _0x1b6efa['addEventListener'](_0x34dc25(0x3cd), _0x995e13), _0xd92e3b['addEventListener'](_0x34dc25(0x631), _0x305ad9 => { const _0x347a3b = _0x34dc25; if (_0x347a3b(0x44b) !== 'hbHVW') { const _0x2a38cc = _0x4619c3[0x0][_0x347a3b(0x2c7)](), _0xfd1d66 = _0x32530b[0x1][_0x347a3b(0x2c7)](), _0x2d6844 = { '歌名': _0x347a3b(0xa21), '艺术家': '歌手', '专辑': '专辑' }; _0x2d6844[_0x2a38cc] && (_0x3f7728[_0x2d6844[_0x2a38cc]] = _0xfd1d66); } else { const _0x47600e = _0x305ad9[_0x347a3b(0x6e7)][_0x347a3b(0xaa5)][0x0]; if (!_0x47600e) return; _0x4fac8b(_0x347a3b(0x9fa))[_0x347a3b(0xb30)](_0x12523f => { const _0x5b7d1c = _0x347a3b; if (_0x5b7d1c(0x994) !== _0x5b7d1c(0x670)) { if (!_0x12523f) { if ('zirtm' !== _0x5b7d1c(0x5b8)) _0x5853e1[_0x5b7d1c(0x1f5)][_0x5b7d1c(0xaf2)](_0x5b7d1c(0x45a)), _0x10dad9[_0x5b7d1c(0x593)]({ 'behavior': _0x5b7d1c(0x7bd), 'block': _0x5b7d1c(0x231) }); else { _0xd92e3b[_0x5b7d1c(0x21f)] = ''; return; } } _0x48b9ad(!![], _0x5b7d1c(0x7f1)); const _0x59efd8 = new FileReader(); _0x59efd8[_0x5b7d1c(0x5a9)] = async _0x1d443b => { const _0x3b1d47 = _0x5b7d1c; if (_0x3b1d47(0x603) !== 'dVVky') _0x3600e9[_0x3b1d47(0x230)](_0x1cde15['id']); else try { const _0x30ba4d = JSON[_0x3b1d47(0xb4e)](_0x1d443b[_0x3b1d47(0x6e7)][_0x3b1d47(0x979)]); if (!_0x30ba4d[_0x3b1d47(0xa64)] || !_0x30ba4d['indexedDBData']) { if ('zriEb' === _0x3b1d47(0x966)) throw new Error('文件格式不正确，不是一个有效的备份文件。'); else _0x453e62 = _0x4d5ac2; } _0x48b9ad(!![], _0x3b1d47(0xa66)); const _0x7220eb = await Promise['all'](Object['keys'](_0x30ba4d[_0x3b1d47(0x736)])['map'](async _0x31499f => { const _0x142a96 = _0x3b1d47; if (_0x142a96(0x7bc) === _0x142a96(0x36b)) { _0x5b8f96(_0x142a96(0x1b5)); return; } else { const _0x52bbfc = _0x30ba4d[_0x142a96(0x736)][_0x31499f]; if (typeof _0x52bbfc === _0x142a96(0x3f4) && _0x52bbfc[_0x142a96(0x772)]('data:')) { const _0x314979 = await _0x30f5c0(_0x52bbfc); return { 'id': _0x31499f, 'blob': _0x314979 }; } return null; } }))[_0x3b1d47(0xb30)](_0x5743bb => _0x5743bb[_0x3b1d47(0x695)](Boolean)), _0x5f26a7 = []; if (_0x30ba4d[_0x3b1d47(0x7e2)]) { if ('iCBNS' === _0x3b1d47(0x8c9)) _0x165add = _0x2a2c5e['touches'][0x0][_0x3b1d47(0x60f)], _0x2fe51e = _0x4af73b[_0x3b1d47(0x5e5)][0x0]['clientY'], _0x4816cf = !![], _0x45c79c = ''; else { _0x48b9ad(!![], _0x3b1d47(0xb8d)); const _0x131bed = _0x30ba4d['indexedDBMusicData']['map'](async _0x2947f6 => { const _0x416e59 = _0x3b1d47, _0x35731b = { ..._0x2947f6 }; if (_0x2947f6[_0x416e59(0x624)]) _0x35731b[_0x416e59(0x624)] = await _0x30f5c0(_0x2947f6['audio']); if (_0x2947f6[_0x416e59(0x211)]) _0x35731b['cover'] = await _0x30f5c0(_0x2947f6[_0x416e59(0x211)]); return _0x35731b; }); _0x5f26a7['push'](...await Promise[_0x3b1d47(0x253)](_0x131bed)); } } _0x48b9ad(!![], '正在清空旧数据...'), localStorage[_0x3b1d47(0xb69)](); for (const _0xa9eaf7 in _0x30ba4d[_0x3b1d47(0xa64)]) { localStorage['setItem'](_0xa9eaf7, _0x30ba4d[_0x3b1d47(0xa64)][_0xa9eaf7]); } _0x48b9ad(!![], _0x3b1d47(0x970)); const _0x28bf21 = await _0x1dfda6, _0x41e91c = _0x28bf21['transaction']([_0x136f7d, _0x4aa13b, _0x4efc38], 'readwrite'), _0x25e184 = _0x41e91c[_0x3b1d47(0x193)](_0x136f7d), _0x174b60 = _0x41e91c[_0x3b1d47(0x193)](_0x4aa13b), _0x5a4fdf = _0x41e91c[_0x3b1d47(0x193)](_0x4efc38); _0x25e184['clear'](), _0x174b60[_0x3b1d47(0xb69)](), _0x5a4fdf['clear'](), _0x7220eb['forEach'](_0x113d74 => _0x25e184['put'](_0x113d74)), _0x5f26a7[_0x3b1d47(0xaa9)](_0x176bc9 => _0x174b60[_0x3b1d47(0x573)](_0x176bc9)), await new Promise((_0x1997cc, _0x8f0d4d) => { const _0x3f4a4f = _0x3b1d47; _0x41e91c[_0x3f4a4f(0x590)] = _0x1997cc, _0x41e91c[_0x3f4a4f(0x6f9)] = _0xd4fd57 => _0x8f0d4d(_0xd4fd57['target'][_0x3f4a4f(0x214)]); }), _0x48b9ad(![]), _0x925876(_0x3b1d47(0x9fb)), setTimeout(() => location[_0x3b1d47(0x377)](), 0x640); } catch (_0x4a4b04) { if ('MvvYB' === 'VkyOs') { const _0x12fd1a = _0x1b62ee[_0x3b1d47(0x80d)](_0x4193a6, 'readwrite'), _0x2bf840 = _0x12fd1a['objectStore'](_0x172a97), _0x3e820b = _0x2bf840['delete'](_0x3048c2); _0x3e820b[_0x3b1d47(0x371)] = () => _0x176924(), _0x3e820b[_0x3b1d47(0x6f9)] = () => _0x9f2261(_0x3e820b['error']); } else _0x48b9ad(![]), console[_0x3b1d47(0x214)](_0x3b1d47(0x45c), _0x4a4b04), _0x925876('导入失败:\x20' + _0x4a4b04['message']); } finally { 'yaEHP' !== 'Guqrp' ? _0xd92e3b[_0x3b1d47(0x21f)] = '' : _0xf90dae(_0xa29c2b, _0x3dbe0a, !![]); } }, _0x59efd8[_0x5b7d1c(0x49c)](_0x47600e); } else return _0x4c4c1b(_0x5adfb2)[_0x5b7d1c(0xb30)](_0x47c043 => _0x47c043[_0x5b7d1c(0x7da)]()); }); } }); function _0x567a30() { const _0x259894 = _0x34dc25; _0x1e7a79[_0x259894(0x21f)] = _0x4295e2[_0x259894(0x484)][_0x259894(0x419)] || '', _0x5be61e[_0x259894(0x21f)] = _0x4295e2['apiSettings'][_0x259894(0x807)] || '', _0x1a99bb[_0x259894(0x21f)] = _0x4295e2['apiSettings']['model'] || '', _0x551a9b[_0x259894(0x21f)] = String(_0x4295e2[_0x259894(0x81c)]?.[_0x259894(0x378)] ?? 0x64), document[_0x259894(0x61b)](_0x259894(0x620))[_0x259894(0x21f)] = _0x4295e2['apiSettings'][_0x259894(0x873)] || _0x259894(0x950); } function _0x917b46() { const _0x3a593f = _0x34dc25; if (_0x3a593f(0x493) !== _0x3a593f(0xac5)) { _0x4295e2[_0x3a593f(0x484)][_0x3a593f(0x419)] = _0x1e7a79[_0x3a593f(0x21f)]['trim'](), _0x4295e2[_0x3a593f(0x484)][_0x3a593f(0x807)] = _0x5be61e[_0x3a593f(0x21f)][_0x3a593f(0x2c7)](), _0x4295e2[_0x3a593f(0x484)][_0x3a593f(0x3ed)] = _0x1a99bb[_0x3a593f(0x21f)]['trim'](), _0x4295e2[_0x3a593f(0x484)][_0x3a593f(0x873)] = document[_0x3a593f(0x61b)]('api-provider')['value']; const _0x4f7b4d = parseInt(_0x551a9b[_0x3a593f(0x21f)], 0xa); _0x4295e2[_0x3a593f(0x81c)][_0x3a593f(0x378)] = Number[_0x3a593f(0x1d4)](_0x4f7b4d) && _0x4f7b4d > 0x0 ? _0x4f7b4d : 0x64, _0x1b6337(), _0x925876(_0x3a593f(0xb96)); } else _0x2a4829(_0x3a593f(0x911), 'musicUploadAltar'); } function _0x1c2615() { const _0x56e61e = _0x34dc25; 'bHHrd' !== _0x56e61e(0x82a) ? (_0x38e143[_0x56e61e(0x21f)] = _0x4295e2[_0x56e61e(0x5f2)]['name'] || '', _0x944a2f['src'] = _0x4295e2[_0x56e61e(0x5f2)]['avatar'] || _0x17eab7, _0x219e63['value'] = _0x4295e2['userProfile'][_0x56e61e(0xb70)] || '') : (_0x2440cb[_0x56e61e(0x214)](_0x56e61e(0x40c), _0x21f284), _0x4e9faf('大家好像不知道该怎么回复...')); } async function _0x558554(_0x275936 = null) { const _0xcd1e0d = _0x34dc25; _0xd18e04(_0xcd1e0d(0xa8f), _0x38c310); const _0x37ebc5 = document[_0xcd1e0d(0x61b)](_0xcd1e0d(0x4e7)), _0x2cd078 = document[_0xcd1e0d(0x61b)](_0xcd1e0d(0x416)), _0x102b5c = document[_0xcd1e0d(0x76d)](_0xcd1e0d(0x218)); if (_0x275936) { const _0x3ff419 = _0x4295e2[_0xcd1e0d(0x45f)][_0xcd1e0d(0x7e6)](_0x322e87 => _0x322e87['id'] === _0x275936); _0x37ebc5[_0xcd1e0d(0x21f)] = _0x3ff419[_0xcd1e0d(0x1e8)] || '', _0x2cd078[_0xcd1e0d(0x21f)] = _0x3ff419[_0xcd1e0d(0x38d)] || ''; if (_0x102b5c) _0x102b5c['style']['backgroundImage'] = _0x3ff419['avatarFrameUrl'] ? _0xcd1e0d(0x3bd) + _0x3ff419['avatarFrameUrl'] + '\x27)' : ''; } else { if (_0xcd1e0d(0x93b) === _0xcd1e0d(0x5fd)) _0x4af198[_0xcd1e0d(0x295)] = _0x3f89c3; else { _0x37ebc5[_0xcd1e0d(0x21f)] = '', _0x2cd078[_0xcd1e0d(0x21f)] = ''; if (_0x102b5c) _0x102b5c[_0xcd1e0d(0x7c9)][_0xcd1e0d(0x54b)] = ''; } } _0x37ebc5[_0xcd1e0d(0x46a)](_0xcd1e0d(0x602), () => { const _0x4b6b9e = _0xcd1e0d; if (_0x102b5c) _0x102b5c['style'][_0x4b6b9e(0x54b)] = _0x37ebc5[_0x4b6b9e(0x21f)] ? _0x4b6b9e(0x3bd) + _0x37ebc5[_0x4b6b9e(0x21f)] + '\x27)' : ''; }); const _0x55f16b = document[_0xcd1e0d(0x61b)]('world-book-checkboxes-container'); _0x55f16b[_0xcd1e0d(0x72d)] = '', _0x4295e2[_0xcd1e0d(0x496)]['forEach'](_0x563576 => { const _0x3d2fdf = _0xcd1e0d; if (_0x3d2fdf(0x2ea) !== _0x3d2fdf(0x2ea)) try { const _0x150ade = _0x3abb60['getItem']('chatHistory_' + _0x28faa4), _0x1369f4 = _0x5b82da[_0x3d2fdf(0xb4e)](_0x150ade || '[]'); return _0x443d50['isArray'](_0x1369f4) ? _0x1369f4 : []; } catch { return []; } else { const _0x482f06 = document[_0x3d2fdf(0x6a8)](_0x3d2fdf(0xb78)); _0x482f06['innerHTML'] = _0x3d2fdf(0x700) + _0x563576['id'] + _0x3d2fdf(0x3ca) + _0x563576[_0x3d2fdf(0x9dc)], _0x55f16b[_0x3d2fdf(0x1ce)](_0x482f06); } }), _0x433142(_0xcd1e0d(0xb15)), _0x35d88d['src'] = _0x2fd48c, _0x136ed3[_0xcd1e0d(0x21f)] = '', _0x28aef8['style'][_0xcd1e0d(0x54b)] = '', _0x54d741[_0xcd1e0d(0x21f)] = '', _0x541cd9[_0xcd1e0d(0x7c9)]['backgroundImage'] = '', _0x506991['value'] = ''; const _0x3529a8 = [_0xcd1e0d(0x8a7), _0xcd1e0d(0x56c), _0xcd1e0d(0x265), _0xcd1e0d(0x6f2), _0xcd1e0d(0xa46)]; _0x3529a8[_0xcd1e0d(0xaa9)](_0x426430 => { const _0x19ac00 = _0xcd1e0d; document[_0x19ac00(0x61b)](_0x19ac00(0x297) + _0x426430 + _0x19ac00(0x8c8))[_0x19ac00(0x7c9)][_0x19ac00(0x54b)] = '', document[_0x19ac00(0x61b)]('char-edit-sprite-' + _0x426430 + '-input')[_0x19ac00(0x21f)] = ''; }); if (_0x275936) { const _0x50d97f = _0x4295e2['characters'][_0xcd1e0d(0x7e6)](_0x4b4a62 => _0x4b4a62['id'] === _0x275936); if (!_0x50d97f) return; _0x5877a1[_0xcd1e0d(0x21f)] = _0x50d97f['id'], _0x2f2d0d[_0xcd1e0d(0x6c7)] = _0xcd1e0d(0x864), _0xb76210['value'] = _0x50d97f['name'], _0x38967f['value'] = _0x50d97f[_0xcd1e0d(0x4db)], _0x561076['value'] = _0x50d97f[_0xcd1e0d(0xb70)], document[_0xcd1e0d(0x61b)](_0xcd1e0d(0x2ee))[_0xcd1e0d(0x21f)] = _0x50d97f['bubbleCss'] || ''; const _0x32421e = _0x4295e2[_0xcd1e0d(0x7af)][_0xcd1e0d(0x7e6)](_0x3d3bb5 => _0x3d3bb5[_0xcd1e0d(0x63a)] === 'private' && _0x3d3bb5[_0xcd1e0d(0x5c9)][_0xcd1e0d(0x2b7)](_0x275936)); document[_0xcd1e0d(0x61b)]('char-edit-bind-user')[_0xcd1e0d(0x21f)] = _0x32421e?.[_0xcd1e0d(0x4b1)] || _0x4295e2[_0xcd1e0d(0x2e4)]; try { if ('Sliya' === 'Sliya') { const _0x526e8f = await _0x2b4d72(_0xcd1e0d(0x469) + _0x50d97f['id']), _0x16a0a4 = await _0x2b4d72(_0xcd1e0d(0x2ca) + _0x50d97f['id']), _0x5e98ca = await _0x2b4d72(_0xcd1e0d(0x1df) + _0x50d97f['id']); _0x35d88d['src'] = _0x526e8f ? URL[_0xcd1e0d(0xa4f)](_0x526e8f) : _0x50d97f[_0xcd1e0d(0x1c4)] || _0x2fd48c; if (_0x16a0a4) _0x28aef8[_0xcd1e0d(0x7c9)][_0xcd1e0d(0x54b)] = 'url(\x27' + URL[_0xcd1e0d(0xa4f)](_0x16a0a4) + '\x27)'; if (_0x5e98ca) _0x541cd9[_0xcd1e0d(0x7c9)][_0xcd1e0d(0x54b)] = 'url(\x27' + URL[_0xcd1e0d(0xa4f)](_0x5e98ca) + '\x27)'; for (const _0x2e41ed of _0x3529a8) { if (_0xcd1e0d(0x647) === _0xcd1e0d(0x23c)) _0x5f2a17[_0xcd1e0d(0x1b2)] = _0x13aa30[_0xcd1e0d(0xa4f)](_0x6fd463); else { const _0x5d9bc7 = await _0x2b4d72(_0xcd1e0d(0xb38) + _0x2e41ed + '_' + _0x50d97f['id']); _0x5d9bc7 && (document[_0xcd1e0d(0x61b)]('char-edit-sprite-' + _0x2e41ed + '-preview')[_0xcd1e0d(0x7c9)][_0xcd1e0d(0x54b)] = _0xcd1e0d(0x3bd) + URL[_0xcd1e0d(0xa4f)](_0x5d9bc7) + '\x27)'); } } } else return { 'url': _0x500f6a, 'cover': _0x4da15a[_0xcd1e0d(0x211)], 'source': _0x3d451a }; } catch (_0x994d9b) { console[_0xcd1e0d(0x214)]('加载角色\x20' + _0x50d97f['id'] + '\x20的图片失败:', _0x994d9b), _0x35d88d[_0xcd1e0d(0x1b2)] = _0x50d97f[_0xcd1e0d(0x1c4)] || _0x2fd48c; } if (_0x50d97f[_0xcd1e0d(0x473)]) { if (_0xcd1e0d(0x53f) === _0xcd1e0d(0x53f)) _0x55f16b['querySelectorAll'](_0xcd1e0d(0x1ee))[_0xcd1e0d(0xaa9)](_0x533ece => { const _0x561274 = _0xcd1e0d; if (_0x50d97f[_0x561274(0x473)]['includes'](_0x533ece[_0x561274(0x21f)])) _0x533ece[_0x561274(0xa20)] = !![]; }); else { const _0xad266d = _0x54ca19[_0xcd1e0d(0x6a8)]('li'); _0xad266d['className'] = 'character-item', _0xad266d[_0xcd1e0d(0x6c3)]['charId'] = _0x351f6f['id'], _0xad266d[_0xcd1e0d(0x72d)] = _0xcd1e0d(0x597) + (_0x1d321f[_0xcd1e0d(0x1c4)] || _0x3c783d) + _0xcd1e0d(0x356) + _0x4d95ff[_0xcd1e0d(0x9dc)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x57cd7a[_0xcd1e0d(0x4db)] || '私聊') + _0xcd1e0d(0x59e), _0xad266d[_0xcd1e0d(0x46a)](_0xcd1e0d(0x3cd), () => { _0x474a13(_0x47378b['id']); }), _0x303069[_0xcd1e0d(0x1ce)](_0xad266d); } } _0xdd0ab2(); } else _0xcd1e0d(0x79c) === _0xcd1e0d(0x79c) ? (_0x5877a1[_0xcd1e0d(0x21f)] = '', _0x2f2d0d[_0xcd1e0d(0x6c7)] = _0xcd1e0d(0x582), _0xb76210[_0xcd1e0d(0x21f)] = _0xcd1e0d(0x234) + (_0x4295e2[_0xcd1e0d(0x45f)][_0xcd1e0d(0xa1e)] + 0x1), _0x38967f['value'] = '', _0x561076[_0xcd1e0d(0x21f)] = '你是一个乐于助人的AI助手。', document[_0xcd1e0d(0x61b)](_0xcd1e0d(0x2ee))[_0xcd1e0d(0x21f)] = '', _0xdd0ab2()) : _0xc36d08[_0xcd1e0d(0x942)](); const _0x22580b = document[_0xcd1e0d(0x61b)](_0xcd1e0d(0x2ee)); let _0x52c0e9 = document[_0xcd1e0d(0x61b)](_0xcd1e0d(0xb32)); !_0x52c0e9 && (_0xcd1e0d(0x479) === 'tNYMw' ? _0x2b1a04 !== _0x38388c[_0xcd1e0d(0x76d)](_0xcd1e0d(0x940)) && (_0x5d7df4[_0xcd1e0d(0x6c7)] = '▶') : (_0x52c0e9 = document['createElement']('style'), _0x52c0e9['id'] = _0xcd1e0d(0xb32), document['head']['appendChild'](_0x52c0e9))); const _0x493f91 = () => { const _0x27c12b = _0xcd1e0d; if (_0x27c12b(0x9de) !== _0x27c12b(0xb46)) { const _0x3ee61b = _0x22580b[_0x27c12b(0x21f)]; let _0x1f2219 = _0x3ee61b['replace'](/\.bubble\.sent/g, _0x27c12b(0xa3c))[_0x27c12b(0x1dc)](/\.bubble\.received/g, _0x27c12b(0xaa8)); _0x52c0e9[_0x27c12b(0x72d)] = _0x1f2219; } else _0x4ad860 === _0x27c12b(0x19d) ? _0x2586cb[_0x27c12b(0x7c9)][_0x27c12b(0x458)] = _0x27c12b(0x3f1) : _0x23afc0[_0x27c12b(0x7c9)]['display'] = _0x27c12b(0x678); }; _0x22580b[_0xcd1e0d(0x33b)](_0xcd1e0d(0x602), _0x493f91), _0x22580b[_0xcd1e0d(0x46a)]('input', _0x493f91), _0x493f91(); } async function _0x5f8de2() { const _0x5c9b03 = _0x34dc25, _0x155987 = _0x5877a1[_0x5c9b03(0x21f)]; if (!_0x155987) { _0x925876(_0x5c9b03(0xa91)); return; } const _0x4e3d95 = _0x5aa3d9(_0x155987); if (!_0x4e3d95) return; _0x48b9ad(!![], _0x5c9b03(0x449) + _0x4e3d95[_0x5c9b03(0x9dc)] + '”...'); try { const _0x41beb5 = { 'type': 'NoirCharacterCard', 'version': 0x1, 'name': _0x4e3d95[_0x5c9b03(0x9dc)], 'remark': _0x4e3d95[_0x5c9b03(0x4db)], 'persona': _0x4e3d95[_0x5c9b03(0xb70)], 'bubbleCss': _0x4e3d95[_0x5c9b03(0x697)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x35c1f9 = await _0x2b4d72(_0x5c9b03(0x469) + _0x4e3d95['id']); if (_0x35c1f9) _0x41beb5[_0x5c9b03(0x1c4)] = await _0x512f2f(_0x35c1f9); const _0x1ed693 = [_0x5c9b03(0x8a7), _0x5c9b03(0x56c), 'angry', _0x5c9b03(0x6f2), _0x5c9b03(0xa46)]; for (const _0x28d31d of _0x1ed693) { const _0x46c796 = await _0x2b4d72(_0x5c9b03(0xb38) + _0x28d31d + '_' + _0x4e3d95['id']); _0x46c796 && (_0x41beb5[_0x5c9b03(0x5d4)][_0x28d31d] = await _0x512f2f(_0x46c796)); } if (_0x4e3d95[_0x5c9b03(0x473)] && _0x4e3d95[_0x5c9b03(0x473)][_0x5c9b03(0xa1e)] > 0x0) { if (_0x5c9b03(0x83c) !== 'XBTFl') { const _0x5f0ec9 = _0x3a9cc5[_0x5c9b03(0x61b)](_0x5c9b03(0xa01))[_0x5c9b03(0x21f)]; _0x5f0ec9 && (_0x566324[_0x5c9b03(0x2e4)] = _0x5f0ec9, _0x2d1c7e(), _0x3f4062('已设为当前用户！'), _0x1b7aa1(), _0x3ed559['getElementById']('set-active-user-button')['style'][_0x5c9b03(0x458)] = 'none'); } else _0x41beb5[_0x5c9b03(0x496)] = _0x4e3d95[_0x5c9b03(0x473)][_0x5c9b03(0x959)](_0x9cedce => _0x4295e2[_0x5c9b03(0x496)]['find'](_0xb3ceb => _0xb3ceb['id'] === _0x9cedce))[_0x5c9b03(0x695)](Boolean)['map'](_0x101647 => ({ 'name': _0x101647[_0x5c9b03(0x9dc)], 'content': _0x101647[_0x5c9b03(0x8f0)] })); } const _0x49ae98 = new Blob([JSON['stringify'](_0x41beb5, null, 0x2)], { 'type': _0x5c9b03(0x76f) }), _0x1bd35b = URL['createObjectURL'](_0x49ae98), _0x6e5295 = document[_0x5c9b03(0x6a8)]('a'); _0x6e5295[_0x5c9b03(0xb94)] = _0x1bd35b, _0x6e5295[_0x5c9b03(0x99b)] = _0x4e3d95[_0x5c9b03(0x9dc)] + _0x5c9b03(0x264), document['body'][_0x5c9b03(0x1ce)](_0x6e5295), _0x6e5295[_0x5c9b03(0x3cd)](), document[_0x5c9b03(0x68f)][_0x5c9b03(0xa93)](_0x6e5295), URL[_0x5c9b03(0x3c8)](_0x1bd35b); } catch (_0x27b7bd) { console[_0x5c9b03(0x214)](_0x5c9b03(0xa39), _0x27b7bd), _0x925876(_0x5c9b03(0x25d) + _0x27b7bd[_0x5c9b03(0x1c9)]); } finally { _0x48b9ad(![]); } } async function _0x116aa2(_0x31960a) { const _0xc7ce1b = _0x34dc25; if (_0xc7ce1b(0x89d) === _0xc7ce1b(0x89d)) { const _0xb0d0ea = _0x31960a[_0xc7ce1b(0x6e7)][_0xc7ce1b(0xaa5)][0x0]; if (!_0xb0d0ea) return; _0x48b9ad(!![], _0xc7ce1b(0x1bd)); const _0x484b1a = new FileReader(); _0x484b1a['onload'] = async _0x59cf37 => { const _0x367e5b = _0xc7ce1b; try { const _0x377fc6 = JSON[_0x367e5b(0xb4e)](_0x59cf37[_0x367e5b(0x6e7)]['result']); if (_0x377fc6[_0x367e5b(0x63a)] !== _0x367e5b(0x3ea)) { if (_0x367e5b(0x8aa) !== _0x367e5b(0x2e1)) throw new Error(_0x367e5b(0xac9)); else _0x378390(_0x4cc6c4['id'], _0x485929[_0x367e5b(0x959)](_0x6a5ebe => _0x6a5ebe['id'])); } const _0x11f66c = []; if (_0x377fc6['worldBooks'] && _0x377fc6[_0x367e5b(0x496)][_0x367e5b(0xa1e)] > 0x0) for (const _0x1f84f3 of _0x377fc6[_0x367e5b(0x496)]) { if (_0x367e5b(0x866) === _0x367e5b(0x2cc)) { const _0x558476 = _0x3a65bb[_0x367e5b(0x61b)](_0x367e5b(0x927))[_0x367e5b(0x21f)][_0x367e5b(0x2c7)](), _0x50de8f = _0x1f919c[_0x367e5b(0x76d)](_0x367e5b(0x8d7))['value']; if (!_0x558476) { _0x1d82a8(_0x367e5b(0x190)); return; } const _0x4892c6 = _0x3c7dda[_0x367e5b(0x59b)]['find'](_0x5f3b67 => _0x5f3b67['id'] === _0x59deb9['activeUserProfileId']); if (!_0x4892c6) { _0x511249('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } _0xbd3e34[_0x367e5b(0x2ed)]['push']({ 'id': _0x367e5b(0xb27) + _0x496ef9['now'](), 'date': _0x2ea3e7[_0x367e5b(0x679)], 'type': _0x50de8f, 'content': _0x558476, 'userId': _0x4892c6['id'] }), _0x5a0e59(), _0x222fb0(), _0x22132d(), _0x11d11a(), _0x319961[_0x367e5b(0x61b)](_0x367e5b(0x556))['classList'][_0x367e5b(0x194)]('show'); } else { let _0x1fa88b = _0x4295e2[_0x367e5b(0x496)]['find'](_0x185e1d => _0x185e1d[_0x367e5b(0x9dc)] === _0x1f84f3[_0x367e5b(0x9dc)]); if (_0x1fa88b) _0x11f66c[_0x367e5b(0x230)](_0x1fa88b['id']); else { const _0x17a293 = { 'id': _0x367e5b(0x6cd) + Date[_0x367e5b(0xb3d)]() + '_' + Math['random'](), 'name': _0x1f84f3['name'], 'content': _0x1f84f3[_0x367e5b(0x8f0)] }; _0x4295e2[_0x367e5b(0x496)][_0x367e5b(0x230)](_0x17a293), _0x11f66c[_0x367e5b(0x230)](_0x17a293['id']); } } } const _0x307c18 = _0x367e5b(0x591) + Date['now'](), _0x2e98c9 = { 'id': _0x307c18, 'name': _0x377fc6['name'], 'remark': _0x377fc6['remark'] || '', 'persona': _0x377fc6['persona'], 'avatar': _0x377fc6[_0x367e5b(0x1c4)] || _0x2fd48c, 'linkedWorldBookIds': _0x11f66c, 'bubbleCss': _0x377fc6[_0x367e5b(0x697)] || '' }; if (_0x377fc6[_0x367e5b(0x1c4)]) { if ('CmINK' !== _0x367e5b(0x689)) { const _0x150102 = await _0x30f5c0(_0x377fc6['avatar']); await _0x190daf('char_avatar_' + _0x307c18, _0x150102); } else { const _0x4d2196 = _0x2d16e3[_0x367e5b(0x369)]['filter'](_0x38225e => _0x38225e[_0x367e5b(0x63a)] === _0x367e5b(0x67f) && _0x38225e[_0x367e5b(0x65e)])['map'](_0x144569 => ({ ..._0x144569, 'source': _0x367e5b(0x19a) })); _0x39f36e[_0x367e5b(0x230)](..._0x4d2196); } } if (_0x377fc6[_0x367e5b(0x5d4)]) for (const _0x149cc9 in _0x377fc6[_0x367e5b(0x5d4)]) { if (_0x367e5b(0x2fd) !== _0x367e5b(0x2fd)) { const _0x295b93 = _0xdd9a16[_0x367e5b(0x692)](/:\s|：\s/); if (_0x295b93['length'] === 0x2) { const _0x3a28ec = _0x295b93[0x0]['trim'](), _0xeec234 = _0x295b93[0x1]['trim'](), _0x515d84 = { '歌名': _0x367e5b(0xa21), '艺术家': '歌手', '专辑': '专辑' }; _0x515d84[_0x3a28ec] && (_0x40065c[_0x515d84[_0x3a28ec]] = _0xeec234); } } else { const _0x24f083 = _0x377fc6['sprites'][_0x149cc9], _0x124c10 = await _0x30f5c0(_0x24f083); await _0x190daf(_0x367e5b(0xb38) + _0x149cc9 + '_' + _0x307c18, _0x124c10); } } _0x4295e2[_0x367e5b(0x45f)]['push'](_0x2e98c9); const _0x37e1b7 = { 'id': _0x367e5b(0x65d) + _0x307c18, 'type': 'private', 'participantIds': [_0x307c18], 'boundUserProfileId': _0x4295e2[_0x367e5b(0x2e4)] }; _0x4295e2['chats'][_0x367e5b(0x230)](_0x37e1b7), _0x1b6337(), _0x3a458e(), _0x925876('“' + _0x2e98c9[_0x367e5b(0x9dc)] + _0x367e5b(0xaa6)); } catch (_0x504d47) { console[_0x367e5b(0x214)](_0x367e5b(0x7d2), _0x504d47), _0x925876(_0x367e5b(0xa77) + _0x504d47[_0x367e5b(0x1c9)]); } finally { _0x48b9ad(![]), _0x31960a[_0x367e5b(0x6e7)][_0x367e5b(0x21f)] = ''; } }, _0x484b1a[_0xc7ce1b(0x49c)](_0xb0d0ea); } else { if (!_0xb5a267) return; const _0x19420e = _0x5c6886['activeMeetingCharId'], _0x5e8059 = _0x2358c8(_0x19420e); if (!_0x5e8059) return; const _0x56bf79 = _0x585b99(_0x2cf3d6[_0xc7ce1b(0x61b)](_0xc7ce1b(0x89f))[_0xc7ce1b(0x21f)]), _0x5e5e5a = _0x531dab(_0x1a17d4[_0xc7ce1b(0x61b)](_0xc7ce1b(0x7df))[_0xc7ce1b(0x21f)]), _0x210e49 = _0xb7360d(_0x23026f[_0xc7ce1b(0x61b)](_0xc7ce1b(0x40d))[_0xc7ce1b(0x21f)]) / 0x64; _0x5e8059[_0xc7ce1b(0x384)] = { 'x': _0x56bf79, 'y': _0x5e5e5a, 'scale': _0x210e49 }; const _0x4491b3 = _0x1d4ac0['getElementById'](_0xc7ce1b(0x3d3)), _0x94183c = 0x50 * _0x210e49; _0x4491b3['style'][_0xc7ce1b(0x7ae)] = _0x94183c + '%', _0x4491b3[_0xc7ce1b(0x7c9)][_0xc7ce1b(0x46c)] = _0x94183c + '%', _0x4491b3['style']['left'] = _0x56bf79 + '%', _0x4491b3[_0xc7ce1b(0x7c9)][_0xc7ce1b(0x99f)] = _0x5e5e5a + '%', _0x4491b3[_0xc7ce1b(0x7c9)][_0xc7ce1b(0x827)] = _0xc7ce1b(0x35c); } } async function _0x19d22e() { const _0x726c4a = _0x34dc25, _0x2df43a = _0x5877a1[_0x726c4a(0x21f)], _0x14b6b7 = document[_0x726c4a(0x61b)]('char-edit-bind-user')[_0x726c4a(0x21f)], _0x5b407d = _0x136ed3[_0x726c4a(0xaa5)][0x0], _0x18888b = _0x54d741[_0x726c4a(0xaa5)][0x0], _0x1b3d7a = _0x506991[_0x726c4a(0xaa5)][0x0], _0x30ac5d = document['querySelectorAll'](_0x726c4a(0x9e7)), _0x1f5100 = Array[_0x726c4a(0x468)](_0x30ac5d)['map'](_0x396d7d => _0x396d7d['value']), _0xf71a0a = { 'name': _0xb76210['value'][_0x726c4a(0x2c7)](), 'remark': _0x38967f[_0x726c4a(0x21f)][_0x726c4a(0x2c7)](), 'persona': _0x561076[_0x726c4a(0x21f)]['trim'](), 'linkedWorldBookIds': _0x1f5100, 'bubbleCss': document[_0x726c4a(0x61b)]('char-edit-css')['value'][_0x726c4a(0x2c7)](), 'avatarFrameUrl': document[_0x726c4a(0x61b)](_0x726c4a(0x4e7))[_0x726c4a(0x21f)][_0x726c4a(0x2c7)](), 'userAvatarFrameUrl': document[_0x726c4a(0x61b)](_0x726c4a(0x416))[_0x726c4a(0x21f)]['trim']() }; if (!_0xf71a0a[_0x726c4a(0x9dc)]) { if (_0x726c4a(0x94d) !== _0x726c4a(0x94d)) { _0x58bc70['log'](_0x726c4a(0x8b6)); const _0x38d974 = { 'id': _0x726c4a(0x488) + _0x9a8ad[_0x726c4a(0xb3d)](), 'name': _0x25b4f1[_0x726c4a(0x5f2)][_0x726c4a(0x9dc)] || '我', 'avatar': _0x54c1b3[_0x726c4a(0x5f2)][_0x726c4a(0x1c4)] || _0x422a1f, 'persona': _0x7cb2d[_0x726c4a(0x5f2)][_0x726c4a(0xb70)] || '' }; _0x206d35[_0x726c4a(0x59b)] = [_0x38d974], _0x4e0ce2[_0x726c4a(0x2e4)] = _0x38d974['id']; } else { _0x925876(_0x726c4a(0xa5c)); return; } } try { const _0x4048c4 = [_0x726c4a(0x8a7), _0x726c4a(0x56c), _0x726c4a(0x265), 'sad', _0x726c4a(0xa46)]; let _0x290c7a = _0x2df43a; if (_0x2df43a) { const _0xe1eab2 = _0x4295e2[_0x726c4a(0x45f)][_0x726c4a(0x7e6)](_0x28d578 => _0x28d578['id'] === _0x2df43a); _0xe1eab2 && ('KehiZ' !== _0x726c4a(0x462) ? _0x2f4b54['image'] = _0x2dd717 : Object[_0x726c4a(0x718)](_0xe1eab2, _0xf71a0a)); } else { const _0x269cfc = _0x726c4a(0x591) + Date[_0x726c4a(0xb3d)](); _0x290c7a = _0x269cfc; const _0x5e9eb8 = { 'id': _0x269cfc, ..._0xf71a0a }; _0x5e9eb8['avatar'] = _0x5b407d ? await _0x5780c8(_0x5b407d) : _0x2fd48c, _0x4295e2[_0x726c4a(0x45f)][_0x726c4a(0x230)](_0x5e9eb8); const _0x453931 = { 'id': _0x726c4a(0x65d) + _0x269cfc, 'type': _0x726c4a(0x780), 'participantIds': [_0x269cfc], 'listenTogetherSession': null }; _0x4295e2[_0x726c4a(0x7af)][_0x726c4a(0x230)](_0x453931); } const _0x3dd0ca = _0x4295e2[_0x726c4a(0x7af)][_0x726c4a(0x7e6)](_0x503b56 => _0x503b56[_0x726c4a(0x63a)] === _0x726c4a(0x780) && _0x503b56[_0x726c4a(0x5c9)][_0x726c4a(0x2b7)](_0x290c7a)); _0x3dd0ca && (_0x3dd0ca[_0x726c4a(0x4b1)] = _0x14b6b7); if (_0x5b407d) await _0x190daf(_0x726c4a(0x469) + _0x290c7a, _0x5b407d); if (_0x18888b) await _0x190daf(_0x726c4a(0x2ca) + _0x290c7a, _0x18888b); if (_0x1b3d7a) await _0x190daf(_0x726c4a(0x1df) + _0x290c7a, _0x1b3d7a); for (const _0x279e05 of _0x4048c4) { if (_0x726c4a(0x6fb) !== 'iDgkA') { const _0x365bc8 = document[_0x726c4a(0x61b)](_0x726c4a(0x297) + _0x279e05 + _0x726c4a(0x1e4))[_0x726c4a(0xaa5)][0x0]; if (_0x365bc8) await _0x190daf(_0x726c4a(0xb38) + _0x279e05 + '_' + _0x290c7a, _0x365bc8); } else _0xa01e00(), _0x18bc3f('home', _0x726c4a(0x19a)); } _0x1b6337(), _0x3a458e(), _0x925876(_0x726c4a(0x2a6)), _0xd18e04('chat', _0x726c4a(0xa8f)); if (!_0x2df43a) { const _0xb9f02e = _0x726c4a(0x65d) + _0x290c7a; _0x2481e4(_0xb9f02e), _0x2c224f(!![]); } } catch (_0x4a3b1e) { console[_0x726c4a(0x214)](_0x726c4a(0x45b), _0x4a3b1e), _0x925876(_0x726c4a(0xa4a) + _0x4a3b1e['message']); } } function _0x91df7d() { const _0x224eca = _0x34dc25; _0x42ccbf[_0x224eca(0x21f)] = '', _0x369c97[_0x224eca(0x72d)] = ''; if (_0x4295e2['characters']['length'] < 0x2) { _0x925876(_0x224eca(0xac1)); return; } _0x4295e2[_0x224eca(0x45f)][_0x224eca(0xaa9)](_0x2b630a => { const _0x934d4e = _0x224eca, _0x5431e0 = document[_0x934d4e(0x6a8)]('li'); _0x5431e0['className'] = _0x934d4e(0x2b2), _0x5431e0['innerHTML'] = _0x934d4e(0x8d8) + _0x2b630a['id'] + _0x934d4e(0x82b) + _0x2b630a['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2b630a[_0x934d4e(0x1c4)] || _0x2fd48c) + _0x934d4e(0x769) + _0x2b630a['id'] + _0x934d4e(0x9ff) + _0x2b630a[_0x934d4e(0x9dc)] + _0x934d4e(0x348), _0x369c97[_0x934d4e(0x1ce)](_0x5431e0); }), _0xd18e04('groupChatCreate', 'charSelect'); } function _0x4f6a7d() { const _0x154baf = _0x34dc25; if (_0x154baf(0x96a) !== 'KOdYk') _0x2698c2[_0x154baf(0x783)](_0x5a4fab, _0x186ea2[_0x154baf(0x1c5)](_0x4105a9)); else { const _0x770338 = _0x42ccbf[_0x154baf(0x21f)][_0x154baf(0x2c7)](); if (!_0x770338) { _0x925876(_0x154baf(0xa15)); return; } const _0x539c2d = Array[_0x154baf(0x468)](_0x369c97[_0x154baf(0x4f8)]('input[type=\x22checkbox\x22]:checked'))[_0x154baf(0x959)](_0x8e6cdf => _0x8e6cdf['dataset']['id']); if (_0x539c2d[_0x154baf(0xa1e)] < 0x2) { _0x925876(_0x154baf(0x8bc)); return; } const _0x3b6a3f = { 'id': _0x154baf(0x257) + Date[_0x154baf(0xb3d)](), 'type': _0x154baf(0x519), 'name': _0x770338, 'participantIds': _0x539c2d }; _0x4295e2[_0x154baf(0x7af)][_0x154baf(0x230)](_0x3b6a3f), _0x4295e2[_0x154baf(0x845)] = _0x3b6a3f['id'], _0x1b6337(), _0x3a458e(), _0x3a40b9(), _0x57f23e(), _0x925876('群聊“' + _0x770338 + _0x154baf(0x892)), _0xd18e04('chat', _0x154baf(0x606)); } } _0x3b0bdc['addEventListener'](_0x34dc25(0x3cd), () => _0x2cf283[_0x34dc25(0x3cd)]()), _0x29b759[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x53926f), _0x2cf283[_0x34dc25(0x46a)](_0x34dc25(0x631), _0x2763a2), _0x5add9f[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x325086), _0x7b1014['addEventListener'](_0x34dc25(0x3cd), () => _0x31571e[_0x34dc25(0x1f5)][_0x34dc25(0x194)]('show')), _0x20ccef[_0x34dc25(0x46a)]('click', () => _0x31571e['classList'][_0x34dc25(0x194)](_0x34dc25(0xa03))), _0x30d7df['addEventListener'](_0x34dc25(0x3cd), () => { const _0x57e558 = _0x34dc25; _0x3ad033[_0x57e558(0x6a5)](), navigator[_0x57e558(0x9b9)][_0x57e558(0x315)](_0x3ad033[_0x57e558(0x21f)])[_0x57e558(0xb30)](() => { const _0x2e5d53 = _0x57e558; _0x925876(_0x2e5d53(0x64d)); })['catch'](_0x3fc66f => { const _0x5e177e = _0x57e558; _0x925876(_0x5e177e(0x8b7)); }); }), _0x31edb4['addEventListener'](_0x34dc25(0x3cd), _0x1db140), _0x5adbfd[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x489eb0), _0x43dad6[_0x34dc25(0x46a)]('click', () => _0x4dac92[_0x34dc25(0x1f5)]['remove']('show')), _0x15b424[_0x34dc25(0x46a)]('click', () => _0x4dac92['classList'][_0x34dc25(0x194)]('show')), _0x28aef8['addEventListener'](_0x34dc25(0x3cd), () => _0x54d741[_0x34dc25(0x3cd)]()), _0x541cd9[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x506991[_0x34dc25(0x3cd)]()), _0x54d741['addEventListener'](_0x34dc25(0x631), _0x52e75f => { const _0xd0b7df = _0x34dc25; if (_0xd0b7df(0x329) !== _0xd0b7df(0x2b4)) { const _0x371b9f = _0x52e75f[_0xd0b7df(0x6e7)][_0xd0b7df(0xaa5)][0x0]; if (!_0x371b9f) return; const _0x43b2ae = URL[_0xd0b7df(0xa4f)](_0x371b9f); _0x28aef8[_0xd0b7df(0x7c9)][_0xd0b7df(0x54b)] = _0xd0b7df(0x3bd) + _0x43b2ae + '\x27)'; } else { if (_0x2c091a) _0x199dff[_0xd0b7df(0x3cd)](); } }), _0x506991[_0x34dc25(0x46a)]('change', _0x372f64 => { const _0x3f5847 = _0x34dc25, _0x4765a7 = _0x372f64[_0x3f5847(0x6e7)]['files'][0x0]; if (!_0x4765a7) return; const _0x1fcbf1 = URL[_0x3f5847(0xa4f)](_0x4765a7); _0x541cd9[_0x3f5847(0x7c9)][_0x3f5847(0x54b)] = _0x3f5847(0x3bd) + _0x1fcbf1 + '\x27)'; }), _0x2977da[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0xfee29d['click']()), _0x212434['addEventListener'](_0x34dc25(0x3cd), () => { const _0x1ba88a = _0x34dc25; localStorage[_0x1ba88a(0x662)]('customFeedWallpaper'), _0x529a13(), _0x925876(_0x1ba88a(0x3c5)); }), _0xfee29d[_0x34dc25(0x46a)](_0x34dc25(0x631), async _0x1c8e3d => { const _0x16db5b = _0x34dc25, _0x5295de = _0x1c8e3d[_0x16db5b(0x6e7)][_0x16db5b(0xaa5)][0x0]; if (!_0x5295de) return; try { const _0x2b7a70 = await _0x5780c8(_0x5295de); localStorage[_0x16db5b(0x783)](_0x16db5b(0x9bc), _0x2b7a70), _0x529a13(), _0x925876(_0x16db5b(0xab8)); } catch (_0x114764) { _0x925876(_0x16db5b(0x8cf) + _0x114764['message']); } }), document['getElementById'](_0x34dc25(0x608))['addEventListener'](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x19a), _0x34dc25(0x2b0))), document[_0x34dc25(0x61b)](_0x34dc25(0x91d))['addEventListener']('click', _0x42ca46); const _0x40176b = document[_0x34dc25(0x61b)](_0x34dc25(0x917)), _0x3587f9 = document[_0x34dc25(0x61b)](_0x34dc25(0x726)); _0x40176b[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x3587f9[_0x34dc25(0x3cd)]()), _0x3587f9[_0x34dc25(0x46a)](_0x34dc25(0x631), _0x47c726 => { const _0x27841a = _0x34dc25; if (_0x27841a(0x471) === _0x27841a(0x5d0)) _0x35d8a8[_0x27841a(0xb77)] && _0x16046f(_0xf0ba06[_0x27841a(0xb77)]); else { const _0x53b70a = _0x47c726[_0x27841a(0x6e7)][_0x27841a(0xaa5)][0x0]; if (!_0x53b70a) return; const _0x4d39d3 = URL[_0x27841a(0xa4f)](_0x53b70a); _0x40176b['src'] = _0x4d39d3, _0x40176b[_0x27841a(0x5a9)] = () => { const _0x5a70ca = _0x27841a; URL[_0x5a70ca(0x3c8)](_0x4d39d3); }; } }); const _0x13d7e0 = document['getElementById']('group-bg-preview')[_0x34dc25(0x67b)], _0x35fa99 = document[_0x34dc25(0x61b)](_0x34dc25(0xadf)), _0x2595de = document[_0x34dc25(0x61b)]('group-bg-preview'); _0x13d7e0[_0x34dc25(0x46a)]('click', () => _0x35fa99[_0x34dc25(0x3cd)]()), _0x35fa99[_0x34dc25(0x46a)]('change', _0x24cf70 => { const _0x357197 = _0x34dc25, _0x7eecff = _0x24cf70['target'][_0x357197(0xaa5)][0x0]; if (!_0x7eecff) return; const _0x5506c6 = URL[_0x357197(0xa4f)](_0x7eecff); document[_0x357197(0x61b)]('group-bg-preview')[_0x357197(0x7c9)][_0x357197(0x54b)] = _0x357197(0x3bd) + _0x5506c6 + '\x27)'; }); const _0x2002cc = document[_0x34dc25(0x76d)]('#group-settings-screen\x20.select-box'), _0x29e145 = document[_0x34dc25(0x61b)](_0x34dc25(0xa71)); _0x2002cc['addEventListener'](_0x34dc25(0x3cd), _0x1bb03f => { const _0x10f77e = _0x34dc25; _0x1bb03f[_0x10f77e(0x3d5)](), _0x29e145[_0x10f77e(0x1f5)][_0x10f77e(0x367)](_0x10f77e(0x7f5)), _0x2002cc[_0x10f77e(0x1f5)][_0x10f77e(0x367)](_0x10f77e(0x1ae)); }), _0x29e145[_0x34dc25(0x46a)](_0x34dc25(0x631), _0x1b8cba), document[_0x34dc25(0x61b)](_0x34dc25(0x28e))['addEventListener'](_0x34dc25(0x3cd), _0x4ca44e), document[_0x34dc25(0x61b)]('group-delete-button')[_0x34dc25(0x46a)](_0x34dc25(0x3cd), async () => { const _0x5d62ae = _0x34dc25, _0x132734 = _0x33b638(); if (!_0x132734 || _0x132734[_0x5d62ae(0x63a)] !== _0x5d62ae(0x519)) return; const _0x368480 = await _0x4fac8b(_0x5d62ae(0x425) + _0x132734[_0x5d62ae(0x9dc)] + _0x5d62ae(0x8fd)); _0x368480 && (_0x2b39c2(_0x132734['id']), _0x925876(_0x5d62ae(0x298)), _0xd18e04('chat'), _0x2c224f(![])); }); const _0x77d4ce = document['querySelector'](_0x34dc25(0x349)), _0x1b6057 = document[_0x34dc25(0x61b)](_0x34dc25(0x661)); _0x77d4ce[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x247293 => { const _0x57d4e7 = _0x34dc25; _0x247293['stopPropagation'](), _0x1b6057[_0x57d4e7(0x1f5)]['toggle'](_0x57d4e7(0x7f5)), _0x77d4ce[_0x57d4e7(0x1f5)][_0x57d4e7(0x367)]('expanded'); }), _0x1b6057[_0x34dc25(0x46a)](_0x34dc25(0x631), _0xdd0ab2), document[_0x34dc25(0x46a)]('click', _0x3c065f => { const _0x4dfaa5 = _0x34dc25; !document[_0x4dfaa5(0x76d)]('.custom-multiselect')[_0x4dfaa5(0x5f7)](_0x3c065f[_0x4dfaa5(0x6e7)]) && ('FrKrc' === _0x4dfaa5(0xaaa) ? _0x312045 = _0x1ec447[_0x4dfaa5(0x473)][_0x4dfaa5(0x959)](_0x493239 => _0x1b3c10[_0x4dfaa5(0x496)][_0x4dfaa5(0x7e6)](_0x3fca7a => _0x3fca7a['id'] === _0x493239))[_0x4dfaa5(0x695)](_0x1084d7)['map'](_0x2a5740 => _0x4dfaa5(0xaa0) + _0x2a5740[_0x4dfaa5(0x9dc)] + ']:\x20' + _0x2a5740['content'])[_0x4dfaa5(0x247)]('') : (_0x1b6057[_0x4dfaa5(0x1f5)][_0x4dfaa5(0x194)](_0x4dfaa5(0x7f5)), _0x77d4ce[_0x4dfaa5(0x1f5)][_0x4dfaa5(0x194)](_0x4dfaa5(0x1ae)))); }), _0x19e224[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x3767b6 = _0x34dc25; _0x1efa86(), _0xd18e04('worldBook', _0x3767b6(0x19d)); }), document[_0x34dc25(0x61b)](_0x34dc25(0x47c))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x19d), _0x34dc25(0x75c))), document[_0x34dc25(0x61b)](_0x34dc25(0x337))['addEventListener'](_0x34dc25(0x3cd), () => _0x4d4682()), document[_0x34dc25(0x61b)](_0x34dc25(0x95a))[_0x34dc25(0x46a)]('click', () => { const _0x197e53 = _0x34dc25; if (_0x197e53(0x885) !== _0x197e53(0x56f)) _0x1efa86(), _0xd18e04(_0x197e53(0x75c), _0x197e53(0xa61)); else { _0x2be64c[_0x197e53(0x45f)] = _0x2b5350[_0x197e53(0x45f)]['filter'](_0x1fd444 => _0x1fd444['id'] !== _0x3d7dc4), _0x2497d7[_0x197e53(0x7af)][_0x197e53(0xaa9)](_0x28bf44 => { const _0x2e92c1 = _0x197e53; _0x28bf44[_0x2e92c1(0x63a)] === _0x2e92c1(0x519) && (_0x28bf44[_0x2e92c1(0x5c9)] = _0x28bf44[_0x2e92c1(0x5c9)][_0x2e92c1(0x695)](_0x1f2570 => _0x1f2570 !== _0x47297b)); }); const _0x1211e6 = _0xabac9b[_0x197e53(0x7af)]['find'](_0x372a60 => _0x372a60[_0x197e53(0x63a)] === 'private' && _0x372a60[_0x197e53(0x5c9)][_0x197e53(0x2b7)](_0x5dda4f)); _0x1211e6 && _0x4d3878(_0x1211e6['id']), _0x193b57[_0x197e53(0x7af)] = _0x41d152[_0x197e53(0x7af)][_0x197e53(0x695)](_0x300bd4 => _0x300bd4[_0x197e53(0x63a)] !== _0x197e53(0x519) || _0x300bd4['participantIds'][_0x197e53(0xa1e)] > 0x1), _0x1e95ea(), _0x2f8d9d(); } }), document[_0x34dc25(0x61b)](_0x34dc25(0x629))['addEventListener'](_0x34dc25(0x3cd), _0x49239e), document['getElementById']('delete-world-book-button')['addEventListener'](_0x34dc25(0x3cd), _0x2e1583), _0x23fd47[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x4b3), 'home')), _0x48cff5['addEventListener']('click', () => _0xd18e04('home', _0x34dc25(0x4b3))), _0x3d4b0e[_0x34dc25(0x46a)]('click', () => _0x253b41['click']()), _0x253b41[_0x34dc25(0x46a)](_0x34dc25(0x631), async _0x1b5833 => { const _0x270982 = _0x34dc25; if (_0x270982(0x7a9) !== _0x270982(0x3fe)) { const _0x5c0d67 = _0x1b5833[_0x270982(0x6e7)][_0x270982(0xaa5)][0x0]; if (!_0x5c0d67) return; await _0x31fc1f(_0x5c0d67); } else { const _0x379d1f = _0x250d00['parse'](_0x52f436); _0x2ade65[_0x270982(0x9bd)](_0x379d1f) && (_0x354d43 = _0x379d1f[_0x270982(0x695)](_0x4d8b20 => _0x4d8b20 && typeof _0x4d8b20 === 'object' && typeof _0x4d8b20[_0x270982(0x55e)] === 'string' && typeof _0x4d8b20[_0x270982(0x8f0)] !== _0x270982(0xa17))); } }), _0x211f91[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x56ad0c = _0x34dc25; if (_0x56ad0c(0x8a5) === _0x56ad0c(0x453)) { if (_0x5b5561 === null) return; const _0x32047c = _0xd3fd8c[_0x56ad0c(0x21f)][_0x56ad0c(0x2c7)](); if (_0x32047c === '') { _0x4d7f34(); return; } const _0x1ec282 = _0x444b4b[_0x56ad0c(0x369)][_0x323e44]; _0x1ec282 && (_0x1ec282[_0x56ad0c(0x8f0)] = _0x32047c, _0x4b1535(), _0x4072dd()), _0x4b2909['classList']['remove'](_0x56ad0c(0xa03)), _0x4eb6c3 = null; } else _0x3a458e(), _0xd18e04(_0x56ad0c(0x19a), _0x56ad0c(0x19d)); }), _0x23196b[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x3fa8a3 = _0x34dc25; if (_0x3fa8a3(0x2fb) !== _0x3fa8a3(0x7d5)) { _0x567a30(); const _0x1c3d6e = (_0x4295e2[_0x3fa8a3(0x484)][_0x3fa8a3(0x419)] || '')['includes'](_0x1255b0); _0x33b392[_0x3fa8a3(0x832)] = _0x1c3d6e, _0xd18e04('settings', 'home'); } else { const _0x2f1814 = _0x4660c6[_0x3fa8a3(0x7f0)]['find'](_0x4d7490 => _0x4d7490['id'] === _0x243472['activeFriendCircleId']), _0x14fdee = _0x2f1814?.[_0x3fa8a3(0x4b1)]; let _0x2481b7 = _0x3d5bf8[_0x3fa8a3(0x59b)][_0x3fa8a3(0x7e6)](_0x4608d3 => _0x4608d3['id'] === _0x14fdee); !_0x2481b7 && (_0x2481b7 = _0x3bf3a9[_0x3fa8a3(0x59b)][_0x3fa8a3(0x7e6)](_0x13f11d => _0x13f11d['id'] === _0xb5e041[_0x3fa8a3(0x2e4)])), !_0x2481b7 && (_0x2481b7 = _0x3d9381[_0x3fa8a3(0x59b)][0x0]), _0x2481b7 && (_0x549d88['getElementById'](_0x3fa8a3(0x1ef))[_0x3fa8a3(0x1b2)] = _0x2481b7['avatar'] || _0x36d1f6); } }), _0x12e4b6['addEventListener'](_0x34dc25(0x3cd), () => _0xd18e04('home', _0x34dc25(0x598))), _0x3d2d98[_0x34dc25(0x46a)]('click', () => { const _0xa126b2 = _0x34dc25; _0x53b62a(), _0xd18e04(_0xa126b2(0x19d), 'chat'); }), _0x23e142[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x2159fc = _0x34dc25; _0x2159fc(0x97a) !== _0x2159fc(0x57a) ? (_0x53b62a(), _0x2c224f(![])) : _0x51dd46[_0x2159fc(0x230)]({ 'time': _0x5349ad, 'text': _0x1c06d3 }); }), _0x2f1578['addEventListener']('click', () => { const _0x1511bb = _0x34dc25; if (_0x1511bb(0x712) !== 'jwzAg') { _0x2dfb55[_0x1511bb(0x369)] = [], _0x493ca3(); return; } else _0xd18e04('chat', _0x1511bb(0xa8f)); }), _0x14e8f5[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x17edd9 = _0x34dc25; _0x412fe3[_0x17edd9(0x1f5)][_0x17edd9(0xaf2)](_0x17edd9(0xa03)); }), _0x54bb4e['addEventListener'](_0x34dc25(0x3cd), () => _0xf19bda()), _0x48d725[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x1dc518); function _0x3b8de9(_0x158392) { const _0x6f7531 = _0x34dc25; if (_0x6f7531(0x78d) !== 'CNZxf') { if (!_0x158392 || _0x158392['type'] !== _0x6f7531(0x519)) return; const _0x361d42 = _0x6f7531(0x466); document[_0x6f7531(0x68f)][_0x6f7531(0xb6e)]('beforeend', _0x361d42); const _0x24c8ae = document['getElementById'](_0x6f7531(0x72f)), _0x38c75b = _0x24c8ae['querySelector'](_0x6f7531(0x1ff)), _0x350d3a = document[_0x6f7531(0x61b)](_0x6f7531(0xb33)), _0x475165 = document[_0x6f7531(0x61b)](_0x6f7531(0x368)), _0x1e4ed1 = document[_0x6f7531(0x61b)]('group-edit-name'), _0x225e19 = document['getElementById'](_0x6f7531(0x26a)), _0x530fab = document[_0x6f7531(0x61b)](_0x6f7531(0xb28)), _0x55a910 = () => _0x24c8ae['remove'](); _0x350d3a[_0x6f7531(0x46a)](_0x6f7531(0x3cd), async () => { const _0x3b73c8 = _0x6f7531; _0x55a910(); const _0xd75aa2 = await _0x4fac8b(_0x3b73c8(0x6b4) + _0x158392[_0x3b73c8(0x9dc)] + _0x3b73c8(0x849)); if (_0xd75aa2) { if (_0x3b73c8(0xa44) !== _0x3b73c8(0x854)) { _0x158392['id'] === _0x4295e2[_0x3b73c8(0x845)] && (_0x53b62a(), _0x4295e2['conversationHistory'] = [], _0x1639f3()); try { localStorage[_0x3b73c8(0x662)](_0x3b73c8(0x1a9) + _0x158392['id']), _0x925876(_0x3b73c8(0x45e) + _0x158392['name'] + _0x3b73c8(0x278)); } catch (_0x4b7249) { if (_0x3b73c8(0x188) !== _0x3b73c8(0x188)) { if (_0x46df09[_0x3b73c8(0x807)] === _0x3b73c8(0x38f)) _0x30c294(![]); if (_0x23d667[_0x3b73c8(0x807)] === _0x3b73c8(0x7d7)) _0x90511d(!![]); } else console['error'](_0x3b73c8(0x1fd) + _0x158392['id'], _0x4b7249), _0x925876('清空聊天记录失败。'); } } else _0x20a200[_0x3b73c8(0x777)](_0x3b73c8(0x638) + _0x573a86), _0x549375[_0x3b73c8(0xafd)](_0x503b84, { 'keyPath': 'id' }); } }), _0x475165[_0x6f7531(0x46a)](_0x6f7531(0x3cd), () => { const _0xde1bd1 = _0x6f7531; _0xde1bd1(0x486) === _0xde1bd1(0x649) ? (_0x55c66b = '未知角色', _0xdfd72e = _0xde1bd1(0x972)) : (_0x55a910(), _0x925876('编辑群成员功能正在开发中...')); }), _0x1e4ed1['addEventListener'](_0x6f7531(0x3cd), async () => { const _0x3cac65 = _0x6f7531; _0x55a910(); const _0x33e256 = prompt(_0x3cac65(0xb29), _0x158392[_0x3cac65(0x9dc)]); if (_0x33e256 && _0x33e256[_0x3cac65(0x2c7)]() && _0x33e256 !== _0x158392[_0x3cac65(0x9dc)]) { if ('WxIzI' === 'WxIzI') _0x158392['name'] = _0x33e256[_0x3cac65(0x2c7)](), _0x1b6337(), _0x3a458e(), _0x3a40b9(), _0x925876('群名称已更改为\x22' + _0x158392[_0x3cac65(0x9dc)] + '\x22。'); else { if (_0x22249c[_0x3cac65(0xa1e)] === 0x0) return; _0x44ab9c = (_0x29aff + 0x1) % _0x1fef3a['length'], _0x52b3a3(_0x1b4b0c[_0x33b0a0], _0x840821); } } }), _0x225e19[_0x6f7531(0x46a)](_0x6f7531(0x3cd), async () => { const _0x2f9d89 = _0x6f7531; _0x55a910(); const _0x108bab = await _0x4fac8b(_0x2f9d89(0x651) + _0x158392[_0x2f9d89(0x9dc)] + '\x22\x20吗？所有聊天记录将被永久删除。'); if (_0x108bab) { if (_0x2f9d89(0x43b) !== _0x2f9d89(0x43b)) { const _0x191a79 = _0x25a38a[_0x2f9d89(0x496)][_0x2f9d89(0x7e6)](_0x1fe331 => _0x1fe331['id'] === _0xb8fa8c); _0x191a79 && (_0x191a79[_0x2f9d89(0x9dc)] = _0x3ffb1a, _0x191a79[_0x2f9d89(0x8f0)] = _0xbc77d3); } else _0x2b39c2(_0x158392['id']), _0x925876('群聊\x22' + _0x158392[_0x2f9d89(0x9dc)] + _0x2f9d89(0x929)), _0x2c224f(![]); } }), _0x38c75b[_0x6f7531(0x46a)](_0x6f7531(0x3cd), _0x55a910), _0x530fab[_0x6f7531(0x46a)]('click', _0x55a910); } else { const _0x5431ae = new _0x104b09(_0x3d1932[_0x6f7531(0x6aa)])['toLocaleTimeString']('zh-CN', { 'hour': _0x6f7531(0x48c), 'minute': _0x6f7531(0x48c) }); _0x37d192[_0x6f7531(0x8f0)] && _0x113dc7[_0x6f7531(0x230)]('[' + _0x5431ae + _0x6f7531(0x8be) + _0x58749d(_0x2132c4) + ']\x20' + _0x489b6f(_0x321cbe[_0x6f7531(0x8f0)])[_0x6f7531(0x2c7)]()); } } _0x817758[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x5ae182 = _0x34dc25, _0x288cc4 = _0x33b638(); if (_0x288cc4 && _0x288cc4['type'] === _0x5ae182(0x780)) _0x558554(_0x288cc4[_0x5ae182(0x5c9)][0x0]); else _0x288cc4 && _0x288cc4[_0x5ae182(0x63a)] === _0x5ae182(0x519) && _0x5d6fbf(_0x288cc4['id']); }), _0x2a16a3['addEventListener'](_0x34dc25(0xb2b), _0x95f698 => { const _0x23369c = _0x34dc25; _0x95f698[_0x23369c(0x807)] === _0x23369c(0x7d7) && !_0x95f698[_0x23369c(0x308)] && (_0x95f698[_0x23369c(0x3a7)](), _0xf19bda()); }); const _0x5d7d08 = () => _0x412fe3['classList'][_0x34dc25(0x194)](_0x34dc25(0xa03)); _0x69471d['addEventListener'](_0x34dc25(0x3cd), _0x5d7d08), _0x7be0b1[_0x34dc25(0x46a)]('click', _0x5d7d08), _0x40fd0a[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x291d94 = _0x34dc25; if (_0x291d94(0x2dc) !== _0x291d94(0x2dc)) return _0x33d0fd[_0x291d94(0x59b)][_0x291d94(0x7e6)](_0x370c86 => _0x370c86['id'] === _0x1803a3); else _0x5d7d08(), _0x558554(); }), _0x454398[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0xeee24b = _0x34dc25; _0xeee24b(0x4d2) !== _0xeee24b(0x7f6) ? (_0x5d7d08(), _0x91df7d()) : (_0x378640[_0xeee24b(0x7c9)]['color'] = '#FFFFFF', _0x2f2738['style']['textShadow'] = _0xeee24b(0x25f)); }), _0x1bf439[_0x34dc25(0x46a)]('click', () => { const _0x1ce62b = _0x34dc25; _0xd18e04(_0x1ce62b(0x19a), _0x1ce62b(0x606)), _0x2c224f(![]); }), _0x4d5ce5[_0x34dc25(0x46a)]('click', _0x4f6a7d), _0xfe48d3['addEventListener'](_0x34dc25(0x3cd), () => { const _0x32ceda = _0x34dc25; _0xcc3613[_0x32ceda(0x1f5)]['toggle'](_0x32ceda(0xa03)), _0xcc3613[_0x32ceda(0x1f5)][_0x32ceda(0x5f7)]('show') && ('lRRuE' !== _0x32ceda(0x391) ? _0x414558[_0xe942a5][_0x32ceda(0x1f5)][_0x32ceda(0xaf2)]('active') : _0x3cf136['scrollTop'] = _0x3cf136[_0x32ceda(0x6cb)]); }), _0x1ddc85[_0x34dc25(0x46a)]('click', () => _0xefae0b[_0x34dc25(0x3cd)]()); const _0x4524af = document['getElementById'](_0x34dc25(0x3fc)); _0xefae0b[_0x34dc25(0x46a)]('change', _0x414092), _0x4524af[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x1cd9f0), _0xd89b14[_0x34dc25(0x46a)]('click', _0x917b46), _0x4fc206['addEventListener'](_0x34dc25(0x3cd), _0x76f00d), _0x3a3e29[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x19d22e), _0x3ba134[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x4ca44e), _0x53b159[_0x34dc25(0x46a)](_0x34dc25(0x3cd), async () => { const _0x322c45 = _0x34dc25, _0x11d838 = _0x5877a1[_0x322c45(0x21f)]; if (!_0x11d838) return; const _0x7b5cdd = _0x5aa3d9(_0x11d838); if (!_0x7b5cdd) return; const _0x314353 = await _0x4fac8b('确定要删除角色“' + _0x7b5cdd[_0x322c45(0x9dc)] + '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。'); _0x314353 && (_0x14cb05(_0x11d838), _0x925876(_0x322c45(0x839) + _0x7b5cdd['name'] + '”已删除。'), _0xd18e04('chat', 'characterEdit'), _0x2c224f(![])); }), _0x1e7a79[_0x34dc25(0x46a)]('input', () => { const _0x303e88 = _0x34dc25, _0x54a1fd = _0x1e7a79[_0x303e88(0x21f)][_0x303e88(0x2c7)]()['includes'](_0x1255b0); _0x33b392['disabled'] = _0x54a1fd; }); async function _0x59e4bc() { const _0x372678 = _0x34dc25, _0x23b726 = _0x1e7a79[_0x372678(0x21f)]['trim'](), _0x1f7d84 = _0x5be61e[_0x372678(0x21f)]['trim'](); if (!_0x23b726 || !_0x1f7d84) { _0x925876(_0x372678(0x566)); return; } const _0xcb93f1 = _0x23b726[_0x372678(0x1dc)](/\/+$/, ''), _0x272b45 = _0xcb93f1 + '/v1/models'; _0x33b392[_0x372678(0x832)] = !![], _0x33b392[_0x372678(0x6c7)] = '获取中…', _0x2a7dfd['classList'][_0x372678(0x194)]('show'); try { const _0x6d29a3 = await fetch(_0x272b45, { 'headers': { 'Authorization': _0x372678(0xab2) + _0x565a2f(_0x1f7d84) } }); if (!_0x6d29a3['ok']) throw new Error(_0x372678(0x9b7) + _0x6d29a3['status']); const _0x1ac33b = await _0x6d29a3['json'](), _0x4e4af8 = (_0x1ac33b['data'] || _0x1ac33b)[_0x372678(0x959)](_0x273452 => _0x273452['id'])[_0x372678(0x96f)](); _0x4e4af8[_0x372678(0xa1e)] > 0x0 ? (_0x2a7dfd[_0x372678(0x72d)] = '', _0x4e4af8[_0x372678(0xaa9)](_0x5d8f93 => { const _0x413e90 = _0x372678; if (_0x413e90(0x2b6) !== 'SSUbe') { const _0x3a435f = document[_0x413e90(0x6a8)](_0x413e90(0xa9f)); _0x3a435f['textContent'] = _0x5d8f93, _0x3a435f[_0x413e90(0x46a)](_0x413e90(0x3cd), () => { const _0x348568 = _0x413e90; _0x1a99bb['value'] = _0x5d8f93, _0x2a7dfd[_0x348568(0x1f5)][_0x348568(0x194)](_0x348568(0xa03)); }), _0x2a7dfd[_0x413e90(0x1ce)](_0x3a435f); } else { _0x20ff71(_0x413e90(0xa19)); return; } }), _0x2a7dfd[_0x372678(0x1f5)][_0x372678(0xaf2)](_0x372678(0xa03)), _0x925876(_0x372678(0x6be) + _0x4e4af8[_0x372678(0xa1e)] + _0x372678(0xae8))) : _0x925876(_0x372678(0x88b)); } catch (_0x29bc09) { _0x372678(0x7eb) !== _0x372678(0xa2e) ? _0x925876(_0x372678(0x54c) + _0x29bc09[_0x372678(0x1c9)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1') : _0x4f9bbb = _0x19c65f[_0x372678(0x5c9)][0x0]; } finally { _0x372678(0x5cf) === _0x372678(0x5cc) ? _0x3e4011 = _0x4d4d94[_0x372678(0x2f0)](_0x372678(0x1a9) + _0x2d7ed6['activeChatId']) : (_0x33b392['disabled'] = ![], _0x33b392[_0x372678(0x6c7)] = '获取'); } } _0x33b392['addEventListener'](_0x34dc25(0x3cd), _0x4e98c7 => { const _0x229873 = _0x34dc25; _0x229873(0x916) !== 'CIKok' ? _0x4840b7[_0x229873(0x4b1)] = _0x39b190 : (_0x4e98c7[_0x229873(0x3d5)](), _0x59e4bc()); }), document['addEventListener'](_0x34dc25(0x3cd), _0x540163 => { const _0x35f0b9 = _0x34dc25; !_0x2a7dfd[_0x35f0b9(0x5f7)](_0x540163[_0x35f0b9(0x6e7)]) && _0x540163[_0x35f0b9(0x6e7)] !== _0x1a99bb && _0x540163[_0x35f0b9(0x6e7)] !== _0x33b392 && _0x2a7dfd[_0x35f0b9(0x1f5)][_0x35f0b9(0x194)](_0x35f0b9(0xa03)); }); async function _0x5780c8(_0x2255a7) { const _0x275f4d = _0x34dc25; if (_0x275f4d(0x770) === _0x275f4d(0x8ed)) _0x27edb0[_0x45c1ed] = _0x542481[_0x275f4d(0xb4e)](_0x5e8330); else return await _0x2b0e1f(_0x2255a7, 0x190, 0.85); } _0x944a2f['addEventListener']('click', () => _0x36ee53['click']()), _0x36ee53[_0x34dc25(0x46a)](_0x34dc25(0x631), async _0x4eaab8 => { const _0x3c60e0 = _0x34dc25, _0x277056 = _0x4eaab8[_0x3c60e0(0x6e7)]['files'][0x0]; if (!_0x277056) return; try { if (_0x3c60e0(0x46e) !== 'Jkcwq') { const _0x3c7bc6 = await _0x5780c8(_0x277056), _0x5ef218 = document[_0x3c60e0(0x61b)](_0x3c60e0(0x76b)); _0x5ef218[_0x3c60e0(0x7c9)][_0x3c60e0(0x54b)] = _0x3c60e0(0x3bd) + _0x3c7bc6 + '\x27)', _0x5ef218[_0x3c60e0(0x6c3)]['newAvatar'] = _0x3c7bc6; } else { const _0x3024b1 = _0x51df43['accountingData'][_0x3c60e0(0xb2e)](_0x2d29cc => _0x2d29cc['id'] === _0xd2d83); _0x3024b1 > -0x1 && (_0x4e5879[_0x3c60e0(0x3c9)][_0x3c60e0(0x99e)](_0x3024b1, 0x1), _0x5082dc(), _0x4bcce2()); } } catch (_0x531c73) { _0x925876(_0x3c60e0(0x8cf) + _0x531c73[_0x3c60e0(0x1c9)]); } }), _0x35d88d['addEventListener']('click', () => _0x136ed3[_0x34dc25(0x3cd)]()), _0x136ed3[_0x34dc25(0x46a)](_0x34dc25(0x631), async _0x282f64 => { const _0x19afc9 = _0x34dc25; if (_0x19afc9(0xb0d) === _0x19afc9(0xb0d)) { const _0x26f2f3 = _0x282f64[_0x19afc9(0x6e7)]['files'][0x0]; if (!_0x26f2f3) return; try { _0x35d88d[_0x19afc9(0x1b2)] = await _0x5780c8(_0x26f2f3); } catch (_0x31be8b) { _0x925876(_0x19afc9(0x8cf) + _0x31be8b[_0x19afc9(0x1c9)]); } } else { if (_0x28dae8[_0x19afc9(0x63a)] === _0x19afc9(0x229)) _0x224a54[_0x19afc9(0x3a7)](); _0x40fc15(_0x3b3ada); } }); function _0x1eca0b() { const _0xde0e94 = _0x34dc25; if (_0xde0e94(0x386) !== 'DrBGw') _0xcc3613['innerHTML'] = '', _0x4cfb86[_0xde0e94(0xaa9)](_0x3a113a => { const _0x3568e8 = _0xde0e94; if (_0x3568e8(0x99c) === _0x3568e8(0x99c)) { const _0x44de14 = document[_0x3568e8(0x6a8)]('img'); _0x44de14['src'] = _0x3a113a[_0x3568e8(0xb79)], _0x44de14[_0x3568e8(0x675)] = _0x3568e8(0x7bb), _0x44de14['title'] = _0x3a113a[_0x3568e8(0x9dc)], _0x44de14[_0x3568e8(0x1f5)][_0x3568e8(0xaf2)](_0x3568e8(0x636)), _0x44de14[_0x3568e8(0x46a)](_0x3568e8(0x3cd), () => _0x5014ef(_0x3a113a)), _0xcc3613['appendChild'](_0x44de14); } else _0x27eb31['classList'][_0x3568e8(0x194)]('show-chat-view'); }); else { const _0x435fe1 = _0x4b3710['participantIds'][0x0]; _0x134e84[_0xde0e94(0x1f5)][_0xde0e94(0xaf2)](_0xde0e94(0x676) + _0x435fe1); } } async function _0x1e38c1(_0x4700fd) { const _0x1df22d = _0x34dc25, _0x3ce40b = await _0x4fac8b(_0x1df22d(0x716)); if (!_0x3ce40b) return; const _0x41fb7b = _0x4295e2[_0x1df22d(0x2ed)]['findIndex'](_0x298cef => _0x298cef['id'] === _0x4700fd); if (_0x41fb7b > -0x1) { if (_0x1df22d(0x2c2) === _0x1df22d(0x394)) { const { playlist: _0x4f040f, currentIndex: _0x44d89c } = _0x245c2e[_0x1df22d(0xb4e)](_0x17ae55); _0xaed7fd[_0x1df22d(0x9bd)](_0x4f040f) && _0x4f040f['length'] > 0x0 && _0x44d89c > -0x1 && (_0x28bd0c['musicPlaylist'] = _0x4f040f, _0x37a345['currentlyPlayingIndex'] = _0x44d89c, _0x23d260[_0x1df22d(0x4e3)] = ![], _0x1de599()); } else _0x4295e2[_0x1df22d(0x2ed)][_0x1df22d(0x99e)](_0x41fb7b, 0x1), _0x1b6337(), _0x3d3e8f(), _0x46f553(), _0x1023d4(), _0x925876(_0x1df22d(0x9d8)); } } let _0x4d520a = null; function _0x2b0492(_0x10e832) { const _0x240029 = _0x34dc25; if (_0x4d520a) clearTimeout(_0x4d520a); const _0x3caaa0 = _0x10e832['target']['closest'](_0x240029(0x2a8)); if (!_0x3caaa0) return; const _0x37e6d3 = _0x3caaa0[_0x240029(0x6c3)]['id']; if (!_0x37e6d3) return; const _0x3b305a = () => { const _0x15cc30 = _0x240029; if ('qIqDm' === _0x15cc30(0x83b)) { if (!_0x35870d[_0x15cc30(0x9ce)]) return; _0x353a99['textContent'] = _0x15cc30(0xae2) + _0x42c210[_0x15cc30(0x9ce)][_0x15cc30(0x2d4)], _0x3bfb98[_0x15cc30(0x6c7)] = _0x2db0cb['activeQuote'][_0x15cc30(0x8f0)], _0x1c9f42[_0x15cc30(0x7c9)]['display'] = _0x15cc30(0x1c1); } else _0x4d520a = setTimeout(() => { const _0x1bc3e2 = _0x15cc30; if (_0x1bc3e2(0x724) === _0x1bc3e2(0x724)) { if (_0x10e832[_0x1bc3e2(0x63a)] === _0x1bc3e2(0x229)) _0x10e832['preventDefault'](); _0x1e38c1(_0x37e6d3); } else { const _0x43c173 = _0x54f41b[_0x1bc3e2(0xb4e)](_0x1f8752); _0x5b268a[_0x1bc3e2(0x9bd)](_0x43c173) ? _0x18ad45 = [..._0x4cc96a, ..._0x43c173] : _0x15da36 = _0x175d93; } }, 0x320); }, _0x3f7b9f = () => { if (_0x4d520a) clearTimeout(_0x4d520a); }; document[_0x240029(0x46a)](_0x240029(0x831), _0x3f7b9f, { 'once': !![] }), document[_0x240029(0x46a)](_0x240029(0x94e), _0x3f7b9f, { 'once': !![] }), document[_0x240029(0x46a)](_0x240029(0x445), _0x3f7b9f, { 'once': !![] }), document['addEventListener'](_0x240029(0x7c3), _0x3f7b9f, { 'once': !![] }), _0x3b305a(); } function _0xbaf4da(_0x1af3b3) { const _0x4d8f9a = _0x34dc25; if ('YvlEU' === _0x4d8f9a(0xa4d)) { const _0x36f82 = _0x4295e2['chats'][_0x4d8f9a(0x7e6)](_0x296334 => _0x296334['participantIds'][_0x4d8f9a(0x2b7)](_0x1af3b3)); if (!_0x36f82) return ''; const _0x4d407c = _0x4b57ed(_0x36f82['id']), _0x2dad99 = _0x4295e2[_0x4d8f9a(0x2ed)]['filter'](_0x100946 => _0x100946[_0x4d8f9a(0x4bf)] === _0x4d407c['id'] || !_0x100946['userId']); if (_0x2dad99[_0x4d8f9a(0xa1e)] === 0x0) return ''; const _0x2842ab = _0x2dad99[_0x4d8f9a(0x959)](_0x39c75f => { const _0x2af1e4 = _0x4d8f9a; if (_0x2af1e4(0x6d4) === 'VqvxL') { const _0x5e297a = _0x39c75f[_0x2af1e4(0x63a)] === _0x2af1e4(0x8a0) ? '纪念日' : '待办'; return _0x2af1e4(0x485) + _0x5e297a + ']\x20' + _0x39c75f[_0x2af1e4(0x191)] + ':\x20' + _0x39c75f[_0x2af1e4(0x8f0)]; } else _0x2abdf2(![]); })[_0x4d8f9a(0x247)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x4d407c[_0x4d8f9a(0x9dc)] + _0x4d8f9a(0x254) + _0x2842ab; } else { const _0x18b6f9 = _0x1b8b4f[_0x4d8f9a(0x80d)](_0x45f437, _0x4d8f9a(0x932)), _0x3a91a0 = _0x18b6f9[_0x4d8f9a(0x193)](_0x4c256f), _0x10178a = _0x3a91a0[_0x4d8f9a(0xb51)](_0xe99cad); _0x10178a[_0x4d8f9a(0x371)] = () => _0x278c2e(_0x10178a[_0x4d8f9a(0x979)] ? _0x10178a[_0x4d8f9a(0x979)][_0x4d8f9a(0x7da)] : null), _0x10178a['onerror'] = () => _0x570b3b(_0x10178a[_0x4d8f9a(0x214)]); } } let _0x220718 = { 'currentDate': new Date(), 'selectedDate': new Date()[_0x34dc25(0x7b0)]()[_0x34dc25(0x692)]('T')[0x0] }; function _0xa79ed3() { const _0x1619b3 = _0x34dc25; if (_0x1619b3(0xa75) !== _0x1619b3(0xa75)) _0xcc170f[_0x1619b3(0x1f5)]['add'](_0x1619b3(0xa74)); else { document['getElementById'](_0x1619b3(0x9cb))[_0x1619b3(0x46a)]('click', () => { const _0x16ec5a = _0x1619b3; if ('lCgKT' !== _0x16ec5a(0x276)) { const _0x256a09 = _0x11bf99['createElement'](_0x16ec5a(0xa9f)); _0x256a09['className'] = _0x16ec5a(0x2b2), _0x256a09['innerHTML'] = _0x16ec5a(0x50f) + _0x5572bb['id'] + _0x16ec5a(0x82b) + _0xe9ead9['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2387e1[_0x16ec5a(0x1c4)] || _0x2e3a68) + _0x16ec5a(0x490) + _0x40a440['id'] + '\x22\x20class=\x22char-name\x22>' + _0x55f1de[_0x16ec5a(0x9dc)] + _0x16ec5a(0x996), _0x179d2b[_0x16ec5a(0x1ce)](_0x256a09); } else _0x3d3e8f(), _0xd18e04(_0x16ec5a(0x81e), _0x16ec5a(0x19d)); }), document[_0x1619b3(0x61b)]('back-to-home-from-calendar')[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => _0xd18e04('home', _0x1619b3(0x81e))), document[_0x1619b3(0x61b)]('prev-month-btn')[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => { const _0x268794 = _0x1619b3; _0x220718[_0x268794(0xaf0)][_0x268794(0x7d9)](_0x220718['currentDate'][_0x268794(0x4ef)]() - 0x1), _0x3d3e8f(); }), document[_0x1619b3(0x61b)](_0x1619b3(0xa7d))[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => { const _0x52bafd = _0x1619b3; _0x220718[_0x52bafd(0xaf0)][_0x52bafd(0x7d9)](_0x220718['currentDate'][_0x52bafd(0x4ef)]() + 0x1), _0x3d3e8f(); }), document[_0x1619b3(0x61b)](_0x1619b3(0x6bc))[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => { const _0x135246 = _0x1619b3; _0x220718['currentDate'] = new Date(), _0x220718[_0x135246(0x679)] = new Date()[_0x135246(0x7b0)]()[_0x135246(0x692)]('T')[0x0], _0x3d3e8f(); }), document['getElementById'](_0x1619b3(0x286))[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => { const _0x262b25 = _0x1619b3; _0x2685f9(_0x220718[_0x262b25(0x679)]); }), document['getElementById'](_0x1619b3(0x44c))[_0x1619b3(0x46a)](_0x1619b3(0x3cd), _0x159c26), document['getElementById'](_0x1619b3(0x3a0))[_0x1619b3(0x46a)](_0x1619b3(0x3cd), () => document[_0x1619b3(0x61b)]('add-event-modal')[_0x1619b3(0x1f5)][_0x1619b3(0x194)](_0x1619b3(0xa03))), document[_0x1619b3(0x61b)]('add-event-backdrop')['addEventListener'](_0x1619b3(0x3cd), () => document[_0x1619b3(0x61b)]('add-event-modal')[_0x1619b3(0x1f5)][_0x1619b3(0x194)](_0x1619b3(0xa03))); const _0x40d398 = document[_0x1619b3(0x61b)](_0x1619b3(0x4fb)); _0x40d398[_0x1619b3(0x46a)](_0x1619b3(0x546), _0x2b0492), _0x40d398[_0x1619b3(0x46a)](_0x1619b3(0x229), _0x2b0492, { 'passive': ![] }); } } function _0x3d3e8f() { const _0x1fb8b9 = _0x34dc25; if ('fIbii' !== _0x1fb8b9(0x1e3)) _0x2edd95['stopPropagation'](), _0x2b1585(); else { const _0x4d78db = _0x220718['currentDate'][_0x1fb8b9(0x874)](), _0x4ac013 = _0x220718['currentDate'][_0x1fb8b9(0x4ef)](); document['getElementById'](_0x1fb8b9(0x5df))['textContent'] = _0x4d78db + '年\x20' + (_0x4ac013 + 0x1) + '月', _0x2515e1(_0x4d78db, _0x4ac013), _0x47f6d3(_0x220718[_0x1fb8b9(0x679)]); } } function _0x1023d4() { const _0x7cc51 = _0x34dc25, _0x52e12f = document[_0x7cc51(0x61b)]('today-todo-list'); if (!_0x52e12f) return; const _0x1dcc3f = new Date()[_0x7cc51(0x7b0)]()[_0x7cc51(0x692)]('T')[0x0], _0x2320fd = _0x4295e2[_0x7cc51(0x2ed)][_0x7cc51(0x695)](_0x4502c5 => _0x4502c5[_0x7cc51(0x191)] === _0x1dcc3f && _0x4502c5[_0x7cc51(0x63a)] === 'todo'); _0x52e12f[_0x7cc51(0x72d)] = '', _0x2320fd[_0x7cc51(0xa1e)] > 0x0 ? _0x2320fd['forEach'](_0x304e2e => { const _0x531877 = _0x7cc51; if (_0x531877(0x58e) !== 'pIkuf') { const _0x129a38 = document['createElement'](_0x531877(0xa9f)); _0x129a38[_0x531877(0x6e1)] = _0x531877(0x4a7), _0x129a38['textContent'] = _0x304e2e[_0x531877(0x8f0)], _0x52e12f[_0x531877(0x1ce)](_0x129a38); } else _0x4d7fd8[_0x531877(0x214)]('加载徽章图片失败', _0x4f966f); }) : _0x52e12f[_0x7cc51(0x72d)] = '<span\x20style=\x22opacity:\x200.6;\x22>无</span>'; } function _0x2515e1(_0x5ab2c2, _0x3a98f2) { const _0x4649c3 = _0x34dc25, _0x3ab984 = document[_0x4649c3(0x61b)](_0x4649c3(0xb71)); _0x3ab984[_0x4649c3(0x72d)] = ''; const _0x3651d8 = new Date(_0x5ab2c2, _0x3a98f2, 0x1)[_0x4649c3(0x961)](), _0x30a7fa = new Date(_0x5ab2c2, _0x3a98f2 + 0x1, 0x0)['getDate'](), _0x387220 = new Date()['toISOString']()[_0x4649c3(0x692)]('T')[0x0]; for (let _0xa3f434 = 0x0; _0xa3f434 < _0x3651d8; _0xa3f434++) { if (_0x4649c3(0xa8e) === 'rBZsi') _0x3ab984['appendChild'](document[_0x4649c3(0x6a8)]('div')); else { const _0x224d13 = _0x5833c4[_0x4649c3(0x61b)](_0x4649c3(0x6b9)); if (!_0x224d13) return; const _0x3169d2 = _0x16e3c2[_0x4649c3(0x2f0)](_0x4649c3(0x35a)) || '35'; _0x18129c[_0x4649c3(0x706)][_0x4649c3(0x7c9)]['setProperty']('--primary-hue', _0x3169d2), _0x224d13[_0x4649c3(0x21f)] = _0x3169d2, _0x224d13[_0x4649c3(0x46a)](_0x4649c3(0x602), () => { const _0x511474 = _0x4649c3, _0x53fcde = _0x224d13[_0x511474(0x21f)]; _0x3e40ff['documentElement'][_0x511474(0x7c9)][_0x511474(0xb7e)](_0x511474(0xa69), _0x53fcde), _0x47c54c[_0x511474(0x783)](_0x511474(0x35a), _0x53fcde), _0x573147(); }); } } for (let _0x504522 = 0x1; _0x504522 <= _0x30a7fa; _0x504522++) { const _0x2290d7 = document[_0x4649c3(0x6a8)](_0x4649c3(0xa9f)); _0x2290d7[_0x4649c3(0x6e1)] = _0x4649c3(0x941); const _0x2201d0 = _0x5ab2c2 + '-' + String(_0x3a98f2 + 0x1)[_0x4649c3(0x956)](0x2, '0') + '-' + String(_0x504522)[_0x4649c3(0x956)](0x2, '0'); if (_0x2201d0 === _0x387220) _0x2290d7[_0x4649c3(0x1f5)][_0x4649c3(0xaf2)]('is-today'); if (_0x2201d0 === _0x220718[_0x4649c3(0x679)]) _0x2290d7[_0x4649c3(0x1f5)]['add'](_0x4649c3(0xa38)); const _0x3fdcdf = document[_0x4649c3(0x6a8)](_0x4649c3(0x302)); _0x3fdcdf['className'] = _0x4649c3(0x635), _0x3fdcdf[_0x4649c3(0x6c7)] = _0x504522, _0x2290d7['appendChild'](_0x3fdcdf); const _0x2ad89c = _0x4295e2[_0x4649c3(0x2ed)][_0x4649c3(0x695)](_0x1dffeb => _0x1dffeb[_0x4649c3(0x191)] === _0x2201d0); if (_0x2ad89c[_0x4649c3(0xa1e)] > 0x0) { const _0x42ab47 = document[_0x4649c3(0x6a8)](_0x4649c3(0xa9f)); _0x42ab47[_0x4649c3(0x6e1)] = _0x4649c3(0x90b), _0x2290d7[_0x4649c3(0x1ce)](_0x42ab47); } _0x2290d7[_0x4649c3(0x46a)]('click', () => { const _0x48e6d9 = _0x4649c3; _0x48e6d9(0x4ce) !== _0x48e6d9(0x4ce) ? (_0x2dea5a(_0x382676, { 'force': !![], 'delayMs': _0x21025d }), _0x1f43e5 += 0x1f4) : (_0x220718[_0x48e6d9(0x679)] = _0x2201d0, _0x3d3e8f()); }), _0x3ab984[_0x4649c3(0x1ce)](_0x2290d7); } } function _0x47f6d3(_0x47b135) { const _0x712b89 = _0x34dc25, _0x32be1d = document['getElementById'](_0x712b89(0x4fb)), _0x100e32 = document[_0x712b89(0x61b)]('todo-date-title'); _0x32be1d[_0x712b89(0x72d)] = ''; const _0x4edc30 = new Date(_0x47b135 + _0x712b89(0xa55)); _0x100e32[_0x712b89(0x6c7)] = _0x4edc30['getMonth']() + 0x1 + '月' + _0x4edc30['getDate']() + '日'; const _0x4177f1 = _0x4295e2[_0x712b89(0x2ed)]['filter'](_0x2cd905 => _0x2cd905['date'] === _0x47b135); if (_0x4177f1[_0x712b89(0xa1e)] === 0x0) { _0x32be1d[_0x712b89(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>'; return; } _0x4177f1[_0x712b89(0xaa9)](_0x39b12d => { const _0x556728 = _0x712b89; if (_0x556728(0x9df) === _0x556728(0x9df)) { const _0x12f5cd = document[_0x556728(0x6a8)](_0x556728(0xa9f)); _0x12f5cd['className'] = _0x39b12d[_0x556728(0x63a)] === _0x556728(0x8a0) ? _0x556728(0x1f6) : 'todo-item', _0x12f5cd[_0x556728(0x6c7)] = _0x39b12d[_0x556728(0x8f0)], _0x12f5cd['dataset']['id'] = _0x39b12d['id'], _0x32be1d['appendChild'](_0x12f5cd); } else _0x3b98d3(_0x556728(0xb1c) + _0x5d80b8[_0x556728(0x1c9)]); }); } function _0x2685f9(_0x3ee85f) { const _0x50e1e1 = _0x34dc25; document[_0x50e1e1(0x61b)](_0x50e1e1(0x861))[_0x50e1e1(0x6c7)] = '为\x20' + _0x3ee85f + _0x50e1e1(0x86d), document[_0x50e1e1(0x61b)](_0x50e1e1(0x927))['value'] = '', document['getElementById'](_0x50e1e1(0x789))[_0x50e1e1(0xa20)] = !![], document[_0x50e1e1(0x61b)](_0x50e1e1(0x556))[_0x50e1e1(0x1f5)]['add'](_0x50e1e1(0xa03)), document['getElementById'](_0x50e1e1(0x927))[_0x50e1e1(0x5a1)](); } function _0x159c26() { const _0x5b48cf = _0x34dc25; if ('GMctS' !== _0x5b48cf(0x719)) { const _0x1a5f70 = document['getElementById'](_0x5b48cf(0x927))[_0x5b48cf(0x21f)][_0x5b48cf(0x2c7)](), _0x40dde0 = document['querySelector'](_0x5b48cf(0x8d7))[_0x5b48cf(0x21f)]; if (!_0x1a5f70) { if (_0x5b48cf(0x7fd) === _0x5b48cf(0x7fd)) { _0x925876(_0x5b48cf(0x190)); return; } else { _0x153a71[_0x5b48cf(0x214)](_0x5b48cf(0xa2c), _0x12b386); const _0x5b31cf = { 'role': 'assistant', 'content': _0x5b48cf(0x8cf) + _0x28e1ea[_0x5b48cf(0x1c9)], 'senderId': _0x59be47['id'], 'isOffline': _0x1a8405 }; _0xd7800d[_0x5b48cf(0x369)][_0x5b48cf(0x230)](_0x5b31cf), _0x54f798(); } } const _0x498912 = _0x4295e2[_0x5b48cf(0x59b)][_0x5b48cf(0x7e6)](_0xab9db4 => _0xab9db4['id'] === _0x4295e2[_0x5b48cf(0x2e4)]); if (!_0x498912) { if (_0x5b48cf(0x7bf) !== 'AfhNV') { _0x925876(_0x5b48cf(0x5d3)); return; } else _0x50d1af[_0x5b48cf(0xaef)] && _0x53a146[_0x5b48cf(0xaef)][_0x5b48cf(0x833)] && (_0x2892f6[_0x5b48cf(0x7c9)][_0x5b48cf(0x458)] = _0x5b48cf(0x58f), _0x42a901(() => _0x22fcb8[_0x5b48cf(0x1f5)][_0x5b48cf(0xaf2)](_0x5b48cf(0xa03)), 0xa)); } _0x4295e2[_0x5b48cf(0x2ed)][_0x5b48cf(0x230)]({ 'id': _0x5b48cf(0xb27) + Date[_0x5b48cf(0xb3d)](), 'date': _0x220718[_0x5b48cf(0x679)], 'type': _0x40dde0, 'content': _0x1a5f70, 'userId': _0x498912['id'] }), _0x1b6337(), _0x3d3e8f(), _0x46f553(), _0x1023d4(), document['getElementById'](_0x5b48cf(0x556))[_0x5b48cf(0x1f5)][_0x5b48cf(0x194)]('show'); } else { const _0x39548a = _0x264cd1(_0x1c920d['content'] ?? _0x7752b3[_0x5b48cf(0x8f6)] ?? '')[_0x5b48cf(0x2c7)]() || _0x5b48cf(0x7ac) + (_0x4fe8c5 || _0x5b48cf(0xa56)) + ']'; if (_0x39548a) _0x57f04a[_0x5b48cf(0x520)][_0x5b48cf(0x230)]({ 'senderId': _0x5d0be3['id'], 'kind': 'text', 'content': _0x39548a }); } } function _0x46f553() { const _0x28b703 = _0x34dc25; if (_0x28b703(0x67e) === _0x28b703(0x67e)) { const _0x57b711 = document[_0x28b703(0x61b)](_0x28b703(0x626)), _0x4fddc6 = document[_0x28b703(0x61b)]('countdown-timer'), _0x105414 = new Date(); _0x105414['setHours'](0x0, 0x0, 0x0, 0x0); const _0x2a0da3 = _0x4295e2[_0x28b703(0x2ed)]['filter'](_0x289124 => _0x289124[_0x28b703(0x63a)] === _0x28b703(0x8a0) && new Date(_0x289124['date'] + _0x28b703(0xa55)) >= _0x105414)['sort']((_0x50ceff, _0x439785) => new Date(_0x50ceff[_0x28b703(0x191)]) - new Date(_0x439785[_0x28b703(0x191)])); if (_0x2a0da3[_0x28b703(0xa1e)] > 0x0) { const _0x5f1f03 = _0x2a0da3[0x0], _0x1ede94 = new Date(_0x5f1f03[_0x28b703(0x191)] + _0x28b703(0xa55)), _0x12c096 = _0x1ede94 - _0x105414, _0x5ed74a = Math[_0x28b703(0x344)](_0x12c096 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x57b711['textContent'] = _0x28b703(0xb1e) + _0x5f1f03[_0x28b703(0x8f0)] + '」', _0x4fddc6[_0x28b703(0x72d)] = _0x28b703(0x32f) + _0x5ed74a + _0x28b703(0xb4d); } else _0x57b711[_0x28b703(0x6c7)] = _0x28b703(0x713), _0x4fddc6['innerHTML'] = '<span>--</span><span\x20class=\x22unit\x22>天</span>'; } else _0x37c79f(_0x341395['id']), _0x59ab5f(_0x28b703(0x298)), _0xd71dea(_0x28b703(0x19a)), _0x308dbf(![]); } function _0x1ea4a8() { const _0x52e4ca = _0x34dc25, _0x1283b0 = document['getElementById'](_0x52e4ca(0x18c)); _0x1283b0['innerHTML'] = ''; if (_0x4295e2['userProfiles'][_0x52e4ca(0xa1e)] === 0x0) { if (_0x52e4ca(0x482) === _0x52e4ca(0x482)) { _0x1283b0[_0x52e4ca(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>'; return; } else { if (!_0x11541b[_0x52e4ca(0x9bd)](_0x5f9030)) return _0x52e4ca(0x8e6); if (_0x202d48['length'] === 0x0) return _0x52e4ca(0xad8); return _0x516536[_0x52e4ca(0x96f)]((_0x238c73, _0x3a88c7) => new _0x50a8a9(_0x3a88c7[_0x52e4ca(0x6aa)]) - new _0x8b5b97(_0x238c73[_0x52e4ca(0x6aa)])), _0x52e4ca(0x27b) + _0x2528e6['map']((_0x5f0980, _0x5f29ce) => _0x52e4ca(0x91e) + (_0x5f29ce < _0x479385[_0x52e4ca(0xa1e)] - 0x1 ? _0x52e4ca(0x3c3) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + (_0x5f0980[_0x52e4ca(0xb40)] || '未知搜索') + _0x52e4ca(0x26f) + (_0x5f0980[_0x52e4ca(0xb4b)] || '没有找到相关结果。') + _0x52e4ca(0xa7a) + (_0x5f0980['timestamp'] || '') + _0x52e4ca(0x4c9))[_0x52e4ca(0x247)]('') + _0x52e4ca(0x300); } } _0x4295e2[_0x52e4ca(0x59b)][_0x52e4ca(0xaa9)](_0x321d83 => { const _0x2d6a6f = _0x52e4ca, _0x4fb4ec = document[_0x2d6a6f(0x6a8)](_0x2d6a6f(0xa9f)); _0x4fb4ec['className'] = _0x2d6a6f(0xaa4), _0x4fb4ec['dataset']['id'] = _0x321d83['id']; const _0x551cf1 = _0x321d83['id'] === _0x4295e2[_0x2d6a6f(0x2e4)] ? _0x2d6a6f(0x267) : ''; _0x4fb4ec[_0x2d6a6f(0x72d)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x321d83[_0x2d6a6f(0x1c4)] || _0x17eab7) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x321d83[_0x2d6a6f(0x9dc)] + _0x551cf1 + _0x2d6a6f(0x910) + _0x321d83['persona'][_0x2d6a6f(0x705)](0x0, 0x64) + _0x2d6a6f(0x708), _0x4fb4ec[_0x2d6a6f(0x46a)](_0x2d6a6f(0x3cd), () => _0x80fd42(_0x321d83['id'])), _0x1283b0[_0x2d6a6f(0x1ce)](_0x4fb4ec); }); } function _0x80fd42(_0x2319c2 = null) { const _0x544b68 = _0x34dc25; if (_0x544b68(0x6ec) === 'FiaAz') { _0xd18e04(_0x544b68(0x5f2), _0x544b68(0x326)); const _0x467cfd = document[_0x544b68(0x61b)](_0x544b68(0x8d4)), _0x45b6dd = document['getElementById'](_0x544b68(0x76b)); _0x45b6dd[_0x544b68(0x7c9)][_0x544b68(0x54b)] = '', delete _0x45b6dd[_0x544b68(0x6c3)][_0x544b68(0x5d2)]; if (_0x2319c2) { const _0x31030f = _0x4295e2[_0x544b68(0x59b)][_0x544b68(0x7e6)](_0x471930 => _0x471930['id'] === _0x2319c2); if (!_0x31030f) return; document[_0x544b68(0x61b)]('editing-user-id')[_0x544b68(0x21f)] = _0x31030f['id'], document[_0x544b68(0x61b)](_0x544b68(0x1aa))[_0x544b68(0x6c7)] = '编辑用户', document['getElementById'](_0x544b68(0x244))['value'] = _0x31030f['name']; if (_0x31030f[_0x544b68(0x1c4)]) { if (_0x544b68(0x601) !== 'TqjtK') _0x45b6dd[_0x544b68(0x7c9)][_0x544b68(0x54b)] = _0x544b68(0x3bd) + _0x31030f['avatar'] + '\x27)'; else { const _0x565937 = _0x107b78['querySelectorAll']('p'); _0x565937['forEach'](_0x26f20c => _0x26f20c[_0x544b68(0x1f5)][_0x544b68(0x194)](_0x544b68(0x45a))); const _0x306596 = _0x15bf1f[_0x544b68(0x61b)](_0x544b68(0x812) + _0x53e116); _0x306596 && (_0x306596[_0x544b68(0x1f5)][_0x544b68(0xaf2)](_0x544b68(0x45a)), _0x306596[_0x544b68(0x593)]({ 'behavior': 'smooth', 'block': 'center' })); } } else 'bomtm' === _0x544b68(0x91b) ? _0x45b6dd[_0x544b68(0x7c9)][_0x544b68(0x54b)] = 'url(\x27' + _0x17eab7 + '\x27)' : (_0x3e58ab[_0x544b68(0x214)](_0x544b68(0x908), _0x51f6f9), _0x2a3988({ 'role': 'assistant', 'content': _0x544b68(0x8cf) + _0x38e80a[_0x544b68(0x1c9)] }, _0x5882e6[_0x544b68(0x369)][_0x544b68(0xa1e)] - 0x1)); document[_0x544b68(0x61b)](_0x544b68(0x9b8))[_0x544b68(0x21f)] = _0x31030f[_0x544b68(0xb70)], _0x467cfd[_0x544b68(0x7c9)][_0x544b68(0x458)] = _0x31030f['id'] === _0x4295e2[_0x544b68(0x2e4)] ? _0x544b68(0x678) : _0x544b68(0x1c1), document[_0x544b68(0x61b)]('delete-user-profile-button')[_0x544b68(0x7c9)][_0x544b68(0x458)] = _0x544b68(0x1c1); } else document['getElementById'](_0x544b68(0xa01))[_0x544b68(0x21f)] = '', document[_0x544b68(0x61b)]('user-profile-edit-title')[_0x544b68(0x6c7)] = '创建新用户', document[_0x544b68(0x61b)]('user-name')[_0x544b68(0x21f)] = _0x544b68(0x589) + (_0x4295e2[_0x544b68(0x59b)][_0x544b68(0xa1e)] + 0x1), _0x45b6dd[_0x544b68(0x7c9)]['backgroundImage'] = _0x544b68(0x3bd) + _0x17eab7 + '\x27)', document[_0x544b68(0x61b)]('user-persona')[_0x544b68(0x21f)] = '', _0x467cfd[_0x544b68(0x7c9)]['display'] = _0x544b68(0x678), document[_0x544b68(0x61b)]('delete-user-profile-button')[_0x544b68(0x7c9)][_0x544b68(0x458)] = _0x544b68(0x678); } else _0x40139a[_0x544b68(0x7c9)]['display'] = _0x544b68(0x678); } function _0x76f00d() { const _0x3d48d1 = _0x34dc25, _0x13c2ac = document['getElementById'](_0x3d48d1(0xa01))[_0x3d48d1(0x21f)], _0x580a1c = document[_0x3d48d1(0x61b)](_0x3d48d1(0x76b)), _0x34b685 = { 'name': document[_0x3d48d1(0x61b)](_0x3d48d1(0x244))['value'][_0x3d48d1(0x2c7)](), 'persona': document[_0x3d48d1(0x61b)]('user-persona')[_0x3d48d1(0x21f)][_0x3d48d1(0x2c7)](), 'avatar': _0x4295e2[_0x3d48d1(0x59b)][_0x3d48d1(0x7e6)](_0x5947d0 => _0x5947d0['id'] === _0x13c2ac)?.['avatar'] || _0x580a1c[_0x3d48d1(0x7c9)][_0x3d48d1(0x54b)][_0x3d48d1(0xae6)](0x5, -0x2)[_0x3d48d1(0x1dc)](/'/g, '') || _0x17eab7 }; if (_0x580a1c[_0x3d48d1(0x6c3)][_0x3d48d1(0x5d2)]) { if (_0x3d48d1(0xb65) !== _0x3d48d1(0x89c)) _0x34b685[_0x3d48d1(0x1c4)] = _0x580a1c['dataset'][_0x3d48d1(0x5d2)], delete _0x580a1c[_0x3d48d1(0x6c3)][_0x3d48d1(0x5d2)]; else { const _0x55ce69 = new _0x4d765f(_0x50b42f[_0x3d48d1(0x6aa)]), _0x4f5835 = _0x55ce69[_0x3d48d1(0x874)]() + '-' + _0x167d50(_0x55ce69[_0x3d48d1(0x4ef)]() + 0x1)[_0x3d48d1(0x956)](0x2, '0') + '-' + _0x1887b9(_0x55ce69[_0x3d48d1(0x72b)]())['padStart'](0x2, '0'), _0x49b81d = _0x35c55b(_0x55ce69[_0x3d48d1(0x220)]())[_0x3d48d1(0x956)](0x2, '0') + ':' + _0x1553ec(_0x55ce69[_0x3d48d1(0x503)]())['padStart'](0x2, '0'); let _0x2a4d07 = '未知'; _0x500046[_0x3d48d1(0x55e)] === 'user' ? _0x2a4d07 = _0x2fdcdd[_0x3d48d1(0x9dc)] : _0x2a4d07 = _0x26d54c[_0x3d48d1(0x9dc)]; let _0x49d9ab = _0x54b338[_0x3d48d1(0x8f0)]; if (_0x1d3c26[_0x3d48d1(0xa4b)]) _0x49d9ab = _0x3d48d1(0xb34); if (_0x3227d5[_0x3d48d1(0x295)]) _0x49d9ab = _0x3d48d1(0x88e); return '[' + _0x4f5835 + '\x20' + _0x49b81d + _0x3d48d1(0x8be) + _0x2a4d07 + ']:\x20' + _0x49d9ab; } } if (!_0x34b685[_0x3d48d1(0x9dc)]) { if ('hnDuG' !== _0x3d48d1(0x291)) _0x4d9e4a['diaryPressTimer'] = _0xd1848d(() => { const _0x5b8da6 = _0x3d48d1; if (_0x3844cc[_0x5b8da6(0x63a)] === _0x5b8da6(0x229)) _0x144d70[_0x5b8da6(0x3a7)](); _0xa60fb2(_0x31816e(_0xd35e0a, 0xa), _0x2bdd96); }, 0x320); else { _0x925876(_0x3d48d1(0xa5c)); return; } } if (_0x13c2ac) { if (_0x3d48d1(0xa9a) === 'jjOml') { const _0x4c0f93 = _0x40b696['getElementById'](_0x356bdc); if (_0x4c0f93 && _0x363695) _0x4c0f93[_0x3d48d1(0x1b2)] = _0x471645[_0x3d48d1(0xa4f)](_0x3472e9); } else { const _0x63121e = _0x4295e2['userProfiles'][_0x3d48d1(0x7e6)](_0x5b15f9 => _0x5b15f9['id'] === _0x13c2ac); if (_0x63121e) Object[_0x3d48d1(0x718)](_0x63121e, _0x34b685); } } else { const _0x2be938 = { 'id': _0x3d48d1(0x488) + Date[_0x3d48d1(0xb3d)](), ..._0x34b685 }; _0x4295e2['userProfiles'][_0x3d48d1(0x230)](_0x2be938), !_0x4295e2[_0x3d48d1(0x2e4)] && (_0x4295e2['activeUserProfileId'] = _0x2be938['id']); } _0x1b6337(), _0x925876(_0x3d48d1(0x393)), _0x1ea4a8(), _0xd18e04(_0x3d48d1(0x326), _0x3d48d1(0x5f2)); } async function _0x516fe4() { const _0xa717d6 = _0x34dc25; if (_0xa717d6(0x403) === _0xa717d6(0x403)) { const _0x3b31e8 = document[_0xa717d6(0x61b)](_0xa717d6(0xa01))[_0xa717d6(0x21f)]; if (!_0x3b31e8) return; if (_0x4295e2[_0xa717d6(0x59b)]['length'] <= 0x1) { _0x925876('至少要保留一个用户。'); return; } const _0x3b1743 = await _0x4fac8b(_0xa717d6(0xb09)); _0x3b1743 && (_0xa717d6(0x9cc) !== _0xa717d6(0x901) ? (_0x4295e2[_0xa717d6(0x59b)] = _0x4295e2[_0xa717d6(0x59b)][_0xa717d6(0x695)](_0x1afa17 => _0x1afa17['id'] !== _0x3b31e8), _0x4295e2[_0xa717d6(0x2e4)] === _0x3b31e8 && (_0x4295e2[_0xa717d6(0x2e4)] = _0x4295e2[_0xa717d6(0x59b)][0x0]['id']), _0x4295e2[_0xa717d6(0x7af)][_0xa717d6(0xaa9)](_0x10be90 => { const _0x5e346a = _0xa717d6; if (_0x5e346a(0x884) === 'ibnGL') { _0x34b0a1(_0x5e346a(0x82d)); return; } else _0x10be90[_0x5e346a(0x4b1)] === _0x3b31e8 && (_0x5e346a(0xb1d) === _0x5e346a(0x822) ? (_0x47178a[_0x5e346a(0x384)] = _0x48e2c8, _0x160904(_0x559eb2['activeMeetingCharId'], _0x5e346a(0x8a7))) : _0x10be90[_0x5e346a(0x4b1)] = _0x4295e2[_0x5e346a(0x2e4)]); }), _0x1b6337(), _0x925876(_0xa717d6(0x6d2)), _0x1ea4a8(), _0xd18e04('userProfileList', 'userProfile')) : (_0x28f1a2[_0xa717d6(0x3d5)](), _0x239ad7(_0x51a7a4['id']))); } else _0x524062 += _0xa717d6(0x436); } function _0x1efa86() { const _0x46a115 = _0x34dc25, _0x4e6180 = document[_0x46a115(0x61b)](_0x46a115(0x6ed)); _0x4e6180['innerHTML'] = ''; if (_0x4295e2[_0x46a115(0x496)][_0x46a115(0xa1e)] === 0x0) { if ('QvGOf' !== _0x46a115(0x21e)) { _0x4e6180[_0x46a115(0x72d)] = _0x46a115(0xa65); return; } else _0x222d91(![]), _0x3ea8bf[_0x46a115(0x2ac)] = ![]; } _0x4295e2[_0x46a115(0x496)][_0x46a115(0xaa9)](_0x206a29 => { const _0x56802b = _0x46a115, _0x5a4386 = document[_0x56802b(0x6a8)](_0x56802b(0xa9f)); _0x5a4386[_0x56802b(0x6e1)] = 'world-book-item', _0x5a4386[_0x56802b(0x6c3)]['id'] = _0x206a29['id'], _0x5a4386[_0x56802b(0x72d)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x206a29[_0x56802b(0x9dc)] + _0x56802b(0x7a3) + _0x206a29[_0x56802b(0x8f0)][_0x56802b(0x705)](0x0, 0x64) + _0x56802b(0x2b3), _0x5a4386[_0x56802b(0x46a)](_0x56802b(0x3cd), () => _0x4d4682(_0x206a29['id'])), _0x4e6180[_0x56802b(0x1ce)](_0x5a4386); }); } function _0x4d4682(_0x3dfdb5 = null) { const _0x2d40d7 = _0x34dc25; if (_0x2d40d7(0x5bf) === _0x2d40d7(0x5bf)) { _0xd18e04(_0x2d40d7(0xa61), _0x2d40d7(0x75c)); if (_0x3dfdb5) { if (_0x2d40d7(0x599) !== _0x2d40d7(0x599)) _0x210de8[_0x2d40d7(0x904)] = _0x416ebb[_0x2d40d7(0x904)]; else { const _0x4bc919 = _0x4295e2['worldBooks'][_0x2d40d7(0x7e6)](_0x2f7aa1 => _0x2f7aa1['id'] === _0x3dfdb5); if (!_0x4bc919) return; document[_0x2d40d7(0x61b)](_0x2d40d7(0xa3b))[_0x2d40d7(0x21f)] = _0x4bc919['id'], document['getElementById'](_0x2d40d7(0x89a))['textContent'] = _0x2d40d7(0x24e), document['getElementById'](_0x2d40d7(0x8e1))[_0x2d40d7(0x21f)] = _0x4bc919[_0x2d40d7(0x9dc)], document[_0x2d40d7(0x61b)](_0x2d40d7(0xaad))[_0x2d40d7(0x21f)] = _0x4bc919[_0x2d40d7(0x8f0)]; } } else { if (_0x2d40d7(0x782) === _0x2d40d7(0x9a7)) { const _0x519fd5 = _0x33f4e6[_0x2d40d7(0x2c7)](); _0x519fd5 && _0x454c1b[_0x2d40d7(0x230)](..._0x5cdfbb(_0x519fd5)), _0x2c2f47 < _0x3fad8f['length'] && (_0x2692db['push'](_0x18eecd[_0x3793f5][_0x2d40d7(0x2c7)]()), _0x4606c2++); } else document[_0x2d40d7(0x61b)](_0x2d40d7(0xa3b))[_0x2d40d7(0x21f)] = '', document[_0x2d40d7(0x61b)](_0x2d40d7(0x89a))['textContent'] = _0x2d40d7(0x4b2), document[_0x2d40d7(0x61b)]('world-book-edit-name')[_0x2d40d7(0x21f)] = '', document[_0x2d40d7(0x61b)]('world-book-edit-content')[_0x2d40d7(0x21f)] = ''; } } else _0x349b22[_0x2d40d7(0x63a)] = _0x2d40d7(0x67f), _0x47199d[_0x2d40d7(0x718)](_0x15930f, _0x354a6f); } function _0x49239e() { const _0x3ec521 = _0x34dc25, _0x4054ed = document[_0x3ec521(0x61b)](_0x3ec521(0xa3b))[_0x3ec521(0x21f)], _0x2787a4 = document[_0x3ec521(0x61b)](_0x3ec521(0x8e1))[_0x3ec521(0x21f)][_0x3ec521(0x2c7)](), _0x331f07 = document[_0x3ec521(0x61b)](_0x3ec521(0xaad))[_0x3ec521(0x21f)][_0x3ec521(0x2c7)](); if (!_0x2787a4 || !_0x331f07) { _0x925876(_0x3ec521(0x746)); return; } if (_0x4054ed) { const _0x3b9df0 = _0x4295e2[_0x3ec521(0x496)][_0x3ec521(0x7e6)](_0x45d998 => _0x45d998['id'] === _0x4054ed); if (_0x3b9df0) { if ('dXSme' !== 'dXSme') { const _0xcce93 = _0x4aa244(_0x550457[_0x3ec521(0x30c)]); _0xcce93 && (_0x2e8836 = _0xcce93[_0x3ec521(0x9dc)], _0x4ad231 = _0xcce93[_0x3ec521(0x1c4)]); } else _0x3b9df0[_0x3ec521(0x9dc)] = _0x2787a4, _0x3b9df0['content'] = _0x331f07; } } else { const _0x1a2d47 = { 'id': _0x3ec521(0x6cd) + Date['now'](), 'name': _0x2787a4, 'content': _0x331f07 }; _0x4295e2['worldBooks']['push'](_0x1a2d47); } _0x1b6337(), _0x925876('世界书条目已保存！'), _0x1efa86(), _0xd18e04('worldBook', _0x3ec521(0xa61)); } async function _0x2e1583() { const _0x207503 = _0x34dc25, _0x377f4d = document[_0x207503(0x61b)](_0x207503(0xa3b))[_0x207503(0x21f)]; if (!_0x377f4d) return; const _0x3c3b12 = await _0x4fac8b(_0x207503(0x9c1)); _0x3c3b12 && (_0x4295e2['worldBooks'] = _0x4295e2[_0x207503(0x496)]['filter'](_0x4ce63b => _0x4ce63b['id'] !== _0x377f4d), _0x4295e2[_0x207503(0x45f)][_0x207503(0xaa9)](_0x4b8c4f => { const _0x40f432 = _0x207503; _0x4b8c4f[_0x40f432(0x473)] && (_0x4b8c4f['linkedWorldBookIds'] = _0x4b8c4f[_0x40f432(0x473)][_0x40f432(0x695)](_0x41f108 => _0x41f108 !== _0x377f4d)); }), _0x1b6337(), _0x925876(_0x207503(0x767)), _0x1efa86(), _0xd18e04(_0x207503(0x75c), _0x207503(0xa61))); } function _0xdd0ab2() { const _0x4fea75 = _0x34dc25; if (_0x4fea75(0x2e5) === 'GGmHC') { const _0x57621c = _0x20e1bb[_0x4fea75(0x7af)][_0x4fea75(0x7e6)](_0x25eab9 => _0x25eab9['id'] === _0x261b76), _0x2f6df3 = _0x57621c?.[_0x4fea75(0x4b1)]; let _0x154ffe = _0x1b17b1[_0x4fea75(0x59b)]['find'](_0x400ce2 => _0x400ce2['id'] === _0x2f6df3); return !_0x154ffe && (_0x154ffe = _0x14a0ac[_0x4fea75(0x59b)]['find'](_0x279c1a => _0x279c1a['id'] === _0x5546c5[_0x4fea75(0x2e4)]) || _0x4c4567['userProfiles'][0x0]), _0x154ffe || { 'name': '用户', 'avatar': _0x448907, 'persona': '' }; } else { const _0xbaae9b = document['getElementById'](_0x4fea75(0x661)), _0x8f016c = _0xbaae9b[_0x4fea75(0x4f8)]('input:checked'), _0xd6813f = document[_0x4fea75(0x76d)](_0x4fea75(0x1fb)); if (_0x8f016c[_0x4fea75(0xa1e)] === 0x0) _0xd6813f[_0x4fea75(0x6c7)] = _0x4fea75(0xa2d); else { if (_0x8f016c['length'] > 0x2) { if ('iOkdn' !== 'cAgOt') _0xd6813f['textContent'] = _0x4fea75(0xa9d) + _0x8f016c['length'] + '\x20项'; else { _0x38cea1(_0x4fea75(0x746)); return; } } else _0xd6813f[_0x4fea75(0x6c7)] = Array[_0x4fea75(0x468)](_0x8f016c)[_0x4fea75(0x959)](_0x4766da => _0x4766da[_0x4fea75(0x67b)]['textContent'][_0x4fea75(0x2c7)]())[_0x4fea75(0x247)]('、'); } } } async function _0x5d6fbf(_0x57b306) { const _0x5dc7da = _0x34dc25, _0x1a92b6 = _0x4295e2[_0x5dc7da(0x7af)]['find'](_0x1a7bf9 => _0x1a7bf9['id'] === _0x57b306); if (!_0x1a92b6 || _0x1a92b6[_0x5dc7da(0x63a)] !== 'group') return; document[_0x5dc7da(0x61b)]('group-settings-name')[_0x5dc7da(0x21f)] = _0x1a92b6['name'] || '', _0x433142(_0x5dc7da(0xa7f)), document['getElementById'](_0x5dc7da(0xa7f))['value'] = _0x1a92b6['boundUserProfileId'] || _0x4295e2[_0x5dc7da(0x2e4)]; const _0x3e50b2 = document[_0x5dc7da(0x61b)](_0x5dc7da(0xa71)); _0x3e50b2['innerHTML'] = '', _0x4295e2[_0x5dc7da(0x496)]['forEach'](_0x208b3f => { const _0xa384b4 = _0x5dc7da, _0x5689e4 = _0x1a92b6[_0xa384b4(0x473)]?.['includes'](_0x208b3f['id']), _0x175818 = document['createElement'](_0xa384b4(0xb78)); _0x175818['innerHTML'] = _0xa384b4(0x700) + _0x208b3f['id'] + '\x22\x20' + (_0x5689e4 ? _0xa384b4(0xa20) : '') + '>\x20' + _0x208b3f[_0xa384b4(0x9dc)], _0x3e50b2[_0xa384b4(0x1ce)](_0x175818); }), _0x1b8cba(); const _0x3aa218 = document[_0x5dc7da(0x61b)](_0x5dc7da(0x917)), _0x4bb445 = document[_0x5dc7da(0x61b)](_0x5dc7da(0x6ee)); _0x4bb445[_0x5dc7da(0x7c9)][_0x5dc7da(0x54b)] = '', _0x2b4d72(_0x5dc7da(0x8dc) + _0x57b306)[_0x5dc7da(0xb30)](_0x5966e0 => { const _0x43b0ec = _0x5dc7da; if (_0x43b0ec(0xaf7) === 'xEiGA') _0x3aa218[_0x43b0ec(0x1b2)] = _0x5966e0 ? URL[_0x43b0ec(0xa4f)](_0x5966e0) : _0x2fd48c; else { const _0x425170 = _0xa785f[_0x43b0ec(0x61b)]('music-widget-card'), _0x4c6ba7 = _0x27b2ae['getElementById'](_0x43b0ec(0xa98)), _0x20acae = _0x32bf83['getElementById'](_0x43b0ec(0x5e8)), _0x3ddad2 = _0x3ff57e[_0x43b0ec(0x61b)](_0x43b0ec(0x9c2)), _0x4eedb6 = _0x57ad7e; _0x4eedb6 && _0x4eedb6[_0x43b0ec(0x9c0)] ? (_0x4c6ba7[_0x43b0ec(0x6c7)] = _0x4eedb6['title'], _0x20acae[_0x43b0ec(0x6c7)] = _0x4eedb6[_0x43b0ec(0xa5b)], _0x425170[_0x43b0ec(0x1f5)][_0x43b0ec(0xaf2)](_0x43b0ec(0x8e0)), _0x425170[_0x43b0ec(0x7c9)][_0x43b0ec(0xb7e)](_0x43b0ec(0x60a), _0x43b0ec(0x83d) + _0x4eedb6[_0x43b0ec(0x211)] + ')')) : (_0x4c6ba7[_0x43b0ec(0x6c7)] = _0x43b0ec(0x683), _0x20acae[_0x43b0ec(0x6c7)] = _0x43b0ec(0x682), _0x425170[_0x43b0ec(0x1f5)]['remove']('is-playing'), _0x3ddad2[_0x43b0ec(0x7c9)][_0x43b0ec(0xb7e)](_0x43b0ec(0x60a), _0x43b0ec(0x678))); } }), _0x2b4d72(_0x5dc7da(0x66c) + _0x57b306)[_0x5dc7da(0xb30)](_0x1e3761 => { const _0x4b6415 = _0x5dc7da; if (_0x1e3761) _0x4bb445[_0x4b6415(0x7c9)]['backgroundImage'] = _0x4b6415(0x3bd) + URL['createObjectURL'](_0x1e3761) + '\x27)'; }), _0xd18e04(_0x5dc7da(0x2b0), _0x5dc7da(0x19a)); } async function _0x42ca46() { const _0x40375f = _0x34dc25, _0x48f19f = _0x33b638(); if (!_0x48f19f || _0x48f19f[_0x40375f(0x63a)] !== _0x40375f(0x519)) return; const _0x4f1058 = document['getElementById'](_0x40375f(0x1fc))[_0x40375f(0x21f)][_0x40375f(0x2c7)](); if (!_0x4f1058) { _0x925876(_0x40375f(0xb08)); return; } _0x48f19f['name'] = _0x4f1058; const _0x2a7086 = document[_0x40375f(0x4f8)]('#group-world-book-checkboxes\x20input:checked'); _0x48f19f[_0x40375f(0x473)] = Array[_0x40375f(0x468)](_0x2a7086)['map'](_0x365cbf => _0x365cbf[_0x40375f(0x21f)]), _0x48f19f[_0x40375f(0x4b1)] = document[_0x40375f(0x61b)](_0x40375f(0xa7f))['value']; const _0x5db91a = document['getElementById'](_0x40375f(0x726))['files'][0x0], _0x39f83a = document['getElementById'](_0x40375f(0xadf))[_0x40375f(0xaa5)][0x0]; if (_0x5db91a) await _0x190daf('group_avatar_' + _0x48f19f['id'], _0x5db91a); if (_0x39f83a) await _0x190daf('group_bg_' + _0x48f19f['id'], _0x39f83a); _0x1b6337(), _0x3a40b9(), await _0x3a458e(), _0x925876(_0x40375f(0x3de)), _0xd18e04(_0x40375f(0x19a), _0x40375f(0x2b0)); } function _0x1b8cba() { const _0x12c8bf = _0x34dc25; if (_0x12c8bf(0x6ff) === _0x12c8bf(0x6ff)) { const _0x1c1ad1 = document[_0x12c8bf(0x61b)](_0x12c8bf(0xa71)), _0x3f55e0 = _0x1c1ad1['querySelectorAll'](_0x12c8bf(0x7ca)), _0x13cda0 = document['querySelector'](_0x12c8bf(0x360)); if (_0x3f55e0['length'] === 0x0) _0x13cda0[_0x12c8bf(0x6c7)] = _0x12c8bf(0xa2d); else _0x3f55e0['length'] > 0x2 ? _0x12c8bf(0x6f3) === _0x12c8bf(0x9c4) ? (_0x4f203b(), _0x332173('accounting', _0x12c8bf(0x19d))) : _0x13cda0[_0x12c8bf(0x6c7)] = '已选择\x20' + _0x3f55e0[_0x12c8bf(0xa1e)] + '\x20项' : 'pVGuM' === _0x12c8bf(0x8c0) ? _0x13cda0[_0x12c8bf(0x6c7)] = Array[_0x12c8bf(0x468)](_0x3f55e0)[_0x12c8bf(0x959)](_0x4dc80e => _0x4dc80e[_0x12c8bf(0x67b)][_0x12c8bf(0x6c7)]['trim']())[_0x12c8bf(0x247)]('、') : _0x2cd926[_0x12c8bf(0x61b)]('char-edit-sprite-' + _0x12fe59 + _0x12c8bf(0x8c8))[_0x12c8bf(0x7c9)][_0x12c8bf(0x54b)] = _0x12c8bf(0x3bd) + _0x383d90[_0x12c8bf(0xa4f)](_0x2ce48c) + '\x27)'; } else { const _0x440c25 = _0x3e2d75[_0x12c8bf(0x6a8)]('option'); _0x440c25['value'] = _0x36984d['id'], _0x440c25[_0x12c8bf(0x6c7)] = _0x59a1d5[_0x12c8bf(0x9dc)], _0x324167[_0x12c8bf(0x1ce)](_0x440c25); } } async function _0x4179a1() { const _0x14eac5 = _0x34dc25, _0x345d0f = _0x33b638(), _0x4221b9 = (_0x345d0f?.[_0x14eac5(0x5c9)] || [])[_0x14eac5(0x959)](_0x5aa3d9)[_0x14eac5(0x695)](Boolean), _0x4a99f3 = _0x4b57ed(_0x345d0f['id']); if (!_0x345d0f || _0x345d0f[_0x14eac5(0x63a)] !== 'group' || _0x4221b9['length'] < 0x2) return null; const _0x1d9b10 = _0x345d0f['linkedWorldBookIds'] && _0x345d0f[_0x14eac5(0x473)][_0x14eac5(0xa1e)] > 0x0 ? '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a' + _0x345d0f[_0x14eac5(0x473)][_0x14eac5(0x959)](_0x5e5cfb => _0x4295e2[_0x14eac5(0x496)][_0x14eac5(0x7e6)](_0x2521b3 => _0x2521b3['id'] === _0x5e5cfb))[_0x14eac5(0x695)](Boolean)['map'](_0xed8d66 => _0x14eac5(0x918) + _0xed8d66[_0x14eac5(0x9dc)] + '\x0a' + _0xed8d66['content'])[_0x14eac5(0x247)]('') : '', _0x5c1f8f = _0x4a99f3[_0x14eac5(0xb70)] ? _0x14eac5(0x494) + _0x4a99f3[_0x14eac5(0x9dc)] + '”的补充信息\x0a' + _0x4a99f3[_0x14eac5(0xb70)] : ''; let _0x2d4db5 = ''; const _0x36cb6d = new Date(), _0x4cb72b = _0x4295e2[_0x14eac5(0x369)]['at'](-0x1); _0x2d4db5 += _0x14eac5(0x578) + _0x36cb6d[_0x14eac5(0x773)]('zh-CN', { 'dateStyle': _0x14eac5(0x294), 'timeStyle': _0x14eac5(0x5fe) }); if (_0x4cb72b) { const _0x14fbb5 = new Date(_0x4cb72b['timestamp']), _0x2c841c = Math[_0x14eac5(0x29c)]((_0x36cb6d - _0x14fbb5) / (0x3e8 * 0x3c)); if (_0x2c841c < 0x5) _0x2d4db5 += _0x14eac5(0x4f7); else { if (_0x2c841c < 0x78) _0x2d4db5 += _0x14eac5(0x877) + _0x2c841c + _0x14eac5(0xad2); else { if ('zizXD' !== _0x14eac5(0x741)) _0x473959(), _0x8b14a4(_0x14eac5(0x21d), 'musicLibrary'); else { const _0x129287 = Math[_0x14eac5(0x29c)](_0x2c841c / 0x3c); if (_0x129287 < 0x30) _0x2d4db5 += _0x14eac5(0x877) + _0x129287 + _0x14eac5(0x374); else _0x2d4db5 += _0x14eac5(0x5f4) + Math['floor'](_0x129287 / 0x18) + _0x14eac5(0x75d); } } } } else _0x14eac5(0x195) === _0x14eac5(0x8ca) ? _0x435ae2[_0x14eac5(0x6c7)] = _0x51b44f[_0x14eac5(0x468)](_0x379561)[_0x14eac5(0x959)](_0x4028eb => _0x4028eb[_0x14eac5(0x67b)][_0x14eac5(0x6c7)][_0x14eac5(0x2c7)]())[_0x14eac5(0x247)]('、') : _0x2d4db5 += _0x14eac5(0xb47); const _0x1d9930 = [..._0x4295e2['conversationHistory']][_0x14eac5(0x902)]()[_0x14eac5(0x7e6)](_0x1bed3c => _0x1bed3c[_0x14eac5(0x55e)] === 'user')?.[_0x14eac5(0x8f0)] || '', _0x4a3414 = _0x32e770(_0x345d0f, _0x1d9930), _0x2ecf48 = _0x4295e2[_0x14eac5(0x369)][_0x14eac5(0xae6)](-0x78), _0x4bea6c = _0x4cfb86[_0x14eac5(0x959)](_0x15ebfb => _0x15ebfb[_0x14eac5(0x9dc)]), _0x476d4b = _0x523643(), _0x46c523 = _0x4221b9['map'](_0x4161fc => { const _0xa38cb8 = _0x14eac5; if (_0xa38cb8(0x7e8) !== _0xa38cb8(0x512)) { const { omniText: _0x2c35d5 } = _0x2442b3(_0x4161fc['id'], _0x345d0f['id']), _0x6172bd = _0x49199f(_0x4161fc['id']), _0x54ace4 = _0x4161fc[_0xa38cb8(0x473)] && _0x4161fc[_0xa38cb8(0x473)]['length'] > 0x0 ? _0xa38cb8(0xb22) + _0x4161fc['name'] + _0xa38cb8(0x62b) + _0x4161fc[_0xa38cb8(0x473)][_0xa38cb8(0x959)](_0x180aaa => _0x4295e2[_0xa38cb8(0x496)][_0xa38cb8(0x7e6)](_0x1756e9 => _0x1756e9['id'] === _0x180aaa))[_0xa38cb8(0x695)](Boolean)[_0xa38cb8(0x959)](_0x54ce47 => _0xa38cb8(0xb63) + _0x54ce47[_0xa38cb8(0x9dc)] + '\x0a' + _0x54ce47[_0xa38cb8(0x8f0)])[_0xa38cb8(0x247)]('') : ''; let _0xffd466 = _0xa38cb8(0x29f) + _0x4161fc[_0xa38cb8(0x9dc)] + ')\x20的专属时间锚点\x0a'; const _0x246abc = _0x53390d(_0x4161fc['id']), _0x196796 = new Date(); if (_0x246abc) { if (_0xa38cb8(0x325) === _0xa38cb8(0x325)) { const _0x3867e9 = new Date(_0x246abc[_0xa38cb8(0x6aa)]); _0xffd466 += _0xa38cb8(0x422) + _0x4a99f3[_0xa38cb8(0x9dc)] + '在所有地方的最后一次互动是在**:\x20' + _0x582cc2(_0x3867e9) + '\x0a'; const _0x3e539c = _0x196796[_0xa38cb8(0x753)]() === _0x3867e9[_0xa38cb8(0x753)](), _0xdb25a3 = new Date(); _0xdb25a3[_0xa38cb8(0x698)](_0x196796[_0xa38cb8(0x72b)]() - 0x1); const _0x256c2a = _0xdb25a3[_0xa38cb8(0x753)]() === _0x3867e9['toDateString'](); if (_0x3e539c) _0xffd466 += _0xa38cb8(0x5c8); else _0x256c2a ? _0xa38cb8(0xa85) === 'XwpkX' ? _0x206cd9 && _0x156b8d(_0x447338['id'], _0x411906[_0xa38cb8(0x959)](_0x1c7f7a => _0x1c7f7a['id'])) : _0xffd466 += _0xa38cb8(0x625) : 'pacFN' !== _0xa38cb8(0x1f4) ? _0xffd466 += _0xa38cb8(0x34d) : _0x19f360[_0xa38cb8(0x46a)]('click', () => { const _0x1f83a4 = _0xa38cb8; _0x1bae76(_0x1f83a4(0x470)); }); } else { const _0x411ceb = _0x424374(); if (!_0x411ceb) { _0x561c70[_0xa38cb8(0x6c7)] = _0xa38cb8(0xb01); return; } if (_0x411ceb[_0xa38cb8(0x63a)] === 'private') { const _0x49893c = _0x2dfbf7(_0x411ceb[_0xa38cb8(0x5c9)][0x0]); _0x93acd5['textContent'] = _0x49893c ? _0x49893c[_0xa38cb8(0x9dc)] : _0xa38cb8(0x2d5); } else _0x27c358[_0xa38cb8(0x6c7)] = _0x411ceb['name'] || _0xa38cb8(0x857) + _0x411ceb[_0xa38cb8(0x5c9)][_0xa38cb8(0xa1e)] + ')'; } } else _0xffd466 += _0xa38cb8(0xa0f) + _0x4a99f3[_0xa38cb8(0x9dc)] + '的第一次互动。\x0a'; return { 'id': _0x4161fc['id'], 'name': _0x4161fc['name'], 'persona': _0x4161fc[_0xa38cb8(0xb70)] || _0xa38cb8(0x62f), 'memory': _0x2c35d5 + _0x6172bd + _0x54ace4 + _0xffd466 }; } else _0x1aa98b[_0xa38cb8(0x4b1)] = _0x3c50f4[_0xa38cb8(0x2e4)]; }), _0x3c7a63 = 0x5, _0x4af04a = 0xc, _0x28effd = _0x14eac5(0x67a)['trim'](), _0xd30777 = { 'instruction': (_0x14eac5(0x73d) + (_0x4a99f3[_0x14eac5(0x9dc)] || '用户') + _0x14eac5(0x4be) + (_0x4a99f3[_0x14eac5(0x9dc)] || '用户') + '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20' + _0x3c7a63 + _0x14eac5(0x543) + _0x4af04a + '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕' + (_0x4a99f3['name'] || '用户') + _0x14eac5(0x50e) + _0x2d4db5 + '\x20\x0a' + _0x5c1f8f + '\x0a' + _0x1d9b10 + _0x14eac5(0x5b1) + _0x476d4b + '\x0a')['trim'](), 'personas': _0x46c523, 'mentioned': _0x4a3414 ? { 'id': _0x4a3414['id'], 'name': _0x4a3414[_0x14eac5(0x9dc)] } : null, 'stickerList': _0x4bea6c }, _0xf3c7cf = { 'type': _0x14eac5(0x9f4), 'properties': { 'events': { 'type': _0x14eac5(0x859), 'items': { 'type': _0x14eac5(0x9f4), 'required': [_0x14eac5(0x428), _0x14eac5(0x804)], 'properties': { 'senderId': { 'type': _0x14eac5(0x3f4) }, 'kind': { 'type': _0x14eac5(0x3f4), 'enum': ['text', 'sticker', _0x14eac5(0x67f)] }, 'content': { 'type': _0x14eac5(0x3f4) }, 'sticker': { 'type': _0x14eac5(0x3f4) }, 'songName': { 'type': 'string' }, 'artist': { 'type': _0x14eac5(0x3f4) } } } } }, 'required': [_0x14eac5(0x520)] }, _0xb01b0c = []; _0xb01b0c[_0x14eac5(0x230)]({ 'role': 'system', 'content': _0x28effd }); for (const _0xed2f47 of _0x2ecf48) { const _0x4c1b57 = _0xed2f47[_0x14eac5(0x55e)] === 'ai' || _0xed2f47[_0x14eac5(0x55e)] === _0x14eac5(0x725) ? _0x14eac5(0x725) : _0x14eac5(0x742); let _0x2e1eef = { 'role': _0x4c1b57, 'content': _0xed2f47[_0x14eac5(0x8f0)] }, _0x4199f8 = !!_0xed2f47['content'], _0x5825b1 = null; if (_0xed2f47[_0x14eac5(0x37c)]) _0x5825b1 = _0xed2f47[_0x14eac5(0x37c)]; else { if (_0xed2f47['imageId']) try { if (_0x14eac5(0x3e3) !== _0x14eac5(0x671)) { const _0x2bfe1c = await _0x2b4d72(_0xed2f47['imageId']); _0x2bfe1c && (_0x5825b1 = await _0x512f2f(_0x2bfe1c)); } else { const _0x150d15 = { 'characters': _0xc3185c['characters'], 'worldBooks': _0x3f9f61[_0x14eac5(0x496)], 'chats': _0x4b3226[_0x14eac5(0x7af)], 'userProfile': _0xe73dfa[_0x14eac5(0x5f2)], 'apiSettings': _0x41beec['apiSettings'], 'preferences': _0x1659ea[_0x14eac5(0x81c)], 'activeChatId': _0x45d14e[_0x14eac5(0x845)], 'diaries': _0x219192[_0x14eac5(0x801)], 'friendCircles': _0x2b28a8[_0x14eac5(0x7f0)], 'activeFriendCircleId': _0x48be43['activeFriendCircleId'], 'userProfiles': _0x564dcc[_0x14eac5(0x59b)], 'activeUserProfileId': _0x48f4d3[_0x14eac5(0x2e4)], 'accountingData': _0x3fce42['accountingData'], 'accountingLedger': _0x34298e['accountingLedger'], 'calendarEvents': _0xa00b42[_0x14eac5(0x2ed)] }; _0x39b614['setItem'](_0x14eac5(0x372), _0x54ddd3[_0x14eac5(0x1c5)](_0x150d15)); } } catch (_0x1a9145) { console[_0x14eac5(0x214)]('在准备群聊API数据时，读取图片失败:', _0x1a9145); } } _0x5825b1 && (_0x14eac5(0x558) === _0x14eac5(0x558) ? (_0x2e1eef[_0x14eac5(0x37c)] = _0x5825b1, _0x4199f8 = !![]) : (_0x4252a0('chat', _0x14eac5(0x19d)), _0x5e2a3c(() => _0x596295(), 0x64))), _0x4199f8 && _0xb01b0c[_0x14eac5(0x230)](_0x2e1eef); } _0xb01b0c[_0x14eac5(0x230)]({ 'role': _0x14eac5(0x742), 'content': _0x14eac5(0x1f8) + JSON[_0x14eac5(0x1c5)](_0xf3c7cf) + _0x14eac5(0x4f1) + JSON['stringify'](_0xd30777) }); try { const _0x78844e = await _0x110c3c(_0xb01b0c, { 'json': !![] }); if (!_0x78844e) return null; let _0x3839e4 = _0x78844e['trim'](); const _0x224b61 = _0x3839e4[_0x14eac5(0x4ed)](/```json([\s\S]*?)```/i); if (_0x224b61) _0x3839e4 = _0x224b61[0x1][_0x14eac5(0x2c7)](); _0x3839e4 = _0x4fd453(_0x3839e4); let _0x437596 = null; try { 'ISPoL' !== _0x14eac5(0x8cd) ? (_0x9a962f *= _0x537ad8 / _0x3e5d1a, _0x47c48b = _0x456253) : _0x437596 = JSON[_0x14eac5(0xb4e)](_0x3839e4); } catch (_0x2e5689) { _0x14eac5(0x9eb) === 'UHRWg' ? (console[_0x14eac5(0x214)](_0x14eac5(0x600), _0x2e5689), console[_0x14eac5(0x214)]('收到的原始、有问题的文本:', _0x3839e4)) : _0x56c535['src'] = _0x2f32c0['image']; } if (!_0x437596 || !Array[_0x14eac5(0x9bd)](_0x437596[_0x14eac5(0x520)])) return null; return _0x437596 = _0x21f193(_0x437596, _0x4221b9, _0x4bea6c), _0x437596[_0x14eac5(0x520)] = _0x437596[_0x14eac5(0x520)]['slice'](0x0, _0x4af04a), _0x437596[_0x14eac5(0x520)]['length'] ? _0x437596 : null; } catch (_0x46e820) { return _0x46e820[_0x14eac5(0x9dc)] !== _0x14eac5(0x317) && console[_0x14eac5(0x214)]('Failed\x20to\x20plan\x20group\x20replies:', _0x46e820), null; } } function _0x1779b4() { const _0x30e38f = _0x34dc25; if (_0x30e38f(0xb76) === _0x30e38f(0x70c)) _0x206487[_0x30e38f(0x230)](_0x9e0433['id']); else { const _0x1d5a9b = document[_0x30e38f(0x61b)](_0x30e38f(0x802)); _0x1d5a9b[_0x30e38f(0x72d)] = ''; if (_0x4295e2[_0x30e38f(0x7f0)][_0x30e38f(0xa1e)] === 0x0) { if (_0x30e38f(0xa88) !== _0x30e38f(0xa88)) _0x327fef(_0x30e38f(0xa95) + _0x493eb4[_0x30e38f(0x1c9)]); else { _0x1d5a9b[_0x30e38f(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>'; return; } } _0x4295e2['friendCircles'][_0x30e38f(0xaa9)](_0x3f345b => { const _0x164fec = _0x30e38f, _0x31bf4c = _0x4295e2['userProfiles'][_0x164fec(0x7e6)](_0x43c3b2 => _0x43c3b2['id'] === _0x3f345b[_0x164fec(0x4b1)]) || { 'name': _0x164fec(0x9f2) }, _0x26b480 = document[_0x164fec(0x6a8)]('div'); _0x26b480[_0x164fec(0x6e1)] = _0x164fec(0xaa4), _0x26b480[_0x164fec(0x6c3)]['id'] = _0x3f345b['id'], _0x26b480[_0x164fec(0x72d)] = _0x164fec(0x1b7) + _0x3f345b[_0x164fec(0x9dc)] + _0x164fec(0x221) + _0x31bf4c[_0x164fec(0x9dc)] + _0x164fec(0x4d4) + _0x3f345b[_0x164fec(0x528)][_0x164fec(0xa1e)] + _0x164fec(0x29b), _0x26b480[_0x164fec(0x46a)]('click', () => _0x4968df(_0x3f345b['id'])), _0x1d5a9b[_0x164fec(0x1ce)](_0x26b480); }); } } function _0x3d03e4(_0x2e8707 = null) { const _0x298e9d = _0x34dc25, _0x55a20f = document[_0x298e9d(0x61b)](_0x298e9d(0x2ab)), _0x570526 = document[_0x298e9d(0x61b)](_0x298e9d(0x999)), _0x5bcde8 = document['getElementById']('friend-circle-member-selection'), _0x24638a = document['getElementById'](_0x298e9d(0x8a3)), _0x520971 = document[_0x298e9d(0x61b)](_0x298e9d(0x78f)), _0x4ec18d = document[_0x298e9d(0x61b)]('delete-friend-circle-button'); _0x433142('friend-circle-edit-bind-user'), _0x5bcde8[_0x298e9d(0x72d)] = '', _0x4295e2[_0x298e9d(0x45f)][_0x298e9d(0xaa9)](_0x549da7 => { const _0x2477f8 = _0x298e9d, _0x2e36c4 = document[_0x2477f8(0x6a8)](_0x2477f8(0xa9f)); _0x2e36c4[_0x2477f8(0x6e1)] = _0x2477f8(0x2b2), _0x2e36c4['innerHTML'] = _0x2477f8(0x50f) + _0x549da7['id'] + _0x2477f8(0x82b) + _0x549da7['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x549da7[_0x2477f8(0x1c4)] || _0x2fd48c) + _0x2477f8(0x490) + _0x549da7['id'] + _0x2477f8(0x9ff) + _0x549da7[_0x2477f8(0x9dc)] + _0x2477f8(0x996), _0x5bcde8[_0x2477f8(0x1ce)](_0x2e36c4); }); if (_0x2e8707) { if (_0x298e9d(0xab3) !== _0x298e9d(0x862)) { const _0x41fe26 = _0x4295e2[_0x298e9d(0x7f0)][_0x298e9d(0x7e6)](_0x261119 => _0x261119['id'] === _0x2e8707); if (!_0x41fe26) return; _0x24638a[_0x298e9d(0x6c7)] = _0x298e9d(0x6d6), _0x520971[_0x298e9d(0x21f)] = _0x41fe26['id'], _0x55a20f['value'] = _0x41fe26[_0x298e9d(0x9dc)], _0x570526[_0x298e9d(0x21f)] = _0x41fe26[_0x298e9d(0x4b1)], _0x4ec18d[_0x298e9d(0x7c9)][_0x298e9d(0x458)] = _0x298e9d(0x1c1), _0x41fe26[_0x298e9d(0x528)][_0x298e9d(0xaa9)](_0x2d0ead => { const _0x2fe60a = _0x298e9d, _0x1fefa2 = _0x5bcde8[_0x2fe60a(0x76d)](_0x2fe60a(0x223) + _0x2d0ead); if (_0x1fefa2) _0x1fefa2[_0x2fe60a(0xa20)] = !![]; }); } else _0xdeab09(_0x5e63c3[_0x298e9d(0xa6b)], _0x568031[_0x298e9d(0x905)]); } else _0x24638a[_0x298e9d(0x6c7)] = _0x298e9d(0x587), _0x520971[_0x298e9d(0x21f)] = '', _0x55a20f['value'] = _0x298e9d(0x461) + (_0x4295e2[_0x298e9d(0x7f0)][_0x298e9d(0xa1e)] + 0x1), _0x570526[_0x298e9d(0x21f)] = _0x4295e2[_0x298e9d(0x2e4)], _0x4ec18d['style'][_0x298e9d(0x458)] = _0x298e9d(0x678); _0xd18e04(_0x298e9d(0x1bb), _0x298e9d(0x3a2)); } function _0x255700() { const _0x3d1fd2 = _0x34dc25; if (_0x3d1fd2(0x8c4) === 'RULhb') { const _0x2a90d1 = document[_0x3d1fd2(0x61b)]('editing-friend-circle-id')[_0x3d1fd2(0x21f)], _0x3c0fe9 = document['getElementById']('friend-circle-edit-name')[_0x3d1fd2(0x21f)][_0x3d1fd2(0x2c7)](), _0x39913b = document['getElementById']('friend-circle-edit-bind-user')[_0x3d1fd2(0x21f)], _0x51f1b9 = Array[_0x3d1fd2(0x468)](document['querySelectorAll'](_0x3d1fd2(0x506)))[_0x3d1fd2(0x959)](_0x34f1c8 => _0x34f1c8[_0x3d1fd2(0x6c3)]['id']); if (!_0x3c0fe9) { _0x925876(_0x3d1fd2(0x9f3)); return; } if (_0x51f1b9[_0x3d1fd2(0xa1e)] === 0x0) { _0x925876(_0x3d1fd2(0x3e6)); return; } if (_0x2a90d1) { const _0x55b697 = _0x4295e2['friendCircles']['find'](_0x256d60 => _0x256d60['id'] === _0x2a90d1); if (_0x55b697) { if (_0x3d1fd2(0x1ed) === _0x3d1fd2(0xa0b)) { const _0x304060 = _0x52b904['scrollHeight']; _0x545c6e[_0x3d1fd2(0xb0c)] = _0x41d7be + (_0x304060 - _0x1d4ac4); } else _0x55b697['name'] = _0x3c0fe9, _0x55b697[_0x3d1fd2(0x4b1)] = _0x39913b, _0x55b697['memberCharacterIds'] = _0x51f1b9; } } else { const _0x2ebd98 = { 'id': _0x3d1fd2(0xb44) + Date[_0x3d1fd2(0xb3d)](), 'name': _0x3c0fe9, 'boundUserProfileId': _0x39913b, 'memberCharacterIds': _0x51f1b9, 'posts': [] }; _0x4295e2['friendCircles'][_0x3d1fd2(0x230)](_0x2ebd98); } _0x1b6337(), _0x925876('好友圈已保存！'), _0x1779b4(), _0xd18e04(_0x3d1fd2(0x3a2), _0x3d1fd2(0x1bb)); } else return _0x1896e6[_0x3d1fd2(0x59b)]['find'](_0x135f1e => _0x135f1e['id'] === _0x1598a8[_0x3d1fd2(0x2e4)]) || _0x25f631[_0x3d1fd2(0x59b)][0x0]; } async function _0x6c1c45() { const _0x591b04 = _0x34dc25; if (_0x591b04(0xba4) === _0x591b04(0x22b)) { const _0x499ff2 = _0x591b04(0x1a9) + _0x20edce['id'], _0x14d602 = 'chatHistory_chat_' + _0x470c9e['id'], _0x40c9bb = _0x3f1750[_0x591b04(0x2f0)](_0x499ff2); _0x40c9bb && (_0x4105c0['setItem'](_0x14d602, _0x40c9bb), _0x431e79[_0x591b04(0x662)](_0x499ff2)); } else { const _0x11ee70 = document[_0x591b04(0x61b)](_0x591b04(0x78f))['value']; if (!_0x11ee70) return; const _0x6e9503 = await _0x4fac8b(_0x591b04(0x49f)); _0x6e9503 && (_0x4295e2[_0x591b04(0x7f0)] = _0x4295e2['friendCircles']['filter'](_0x2dbeb0 => _0x2dbeb0['id'] !== _0x11ee70), _0x4295e2[_0x591b04(0xb77)] === _0x11ee70 && (_0x4295e2[_0x591b04(0xb77)] = null), _0x1b6337(), _0x925876(_0x591b04(0x921)), _0x1779b4(), _0xd18e04(_0x591b04(0x3a2), 'friendCircleEdit')); } } function _0x4968df(_0x48ec0a) { const _0x462541 = _0x34dc25; if (_0x462541(0xad9) !== _0x462541(0xad9)) { const _0x2554f6 = _0x2f5a4e[_0x462541(0x6e7)][_0x462541(0xaa5)][0x0]; if (!_0x2554f6) return; const _0x30dd1a = _0x5966b4['createObjectURL'](_0x2554f6); _0x3ebbad['style'][_0x462541(0x54b)] = _0x462541(0x3bd) + _0x30dd1a + '\x27)'; } else { _0xa77536(); const _0x51285b = _0x4295e2['friendCircles'][_0x462541(0x7e6)](_0x2ad333 => _0x2ad333['id'] === _0x48ec0a); if (!_0x51285b) return; _0x4295e2[_0x462541(0xb77)] = _0x48ec0a, _0x1b6337(), document[_0x462541(0x61b)]('friend-circle-title')[_0x462541(0x6c7)] = _0x51285b[_0x462541(0x9dc)], _0x17f944(), _0xd18e04(_0x462541(0x67f), _0x462541(0x3a2)), _0x425ddc(); } } function _0x1d6ee1() { const _0x59b7ad = _0x34dc25; if (_0x59b7ad(0x51f) === 'KzKfj') throw new _0xbc70fb(_0x59b7ad(0x240) + _0x47a07d); else { if (!_0x4295e2[_0x59b7ad(0x7f0)] || _0x4295e2[_0x59b7ad(0x7f0)][_0x59b7ad(0xa1e)] === 0x0) { console[_0x59b7ad(0x214)](_0x59b7ad(0x586)); return; } const _0x126b67 = _0x4295e2[_0x59b7ad(0x7f0)][0x0]; if (_0x126b67[_0x59b7ad(0x528)]['length'] < 0x2) { console['error'](_0x59b7ad(0xa32) + _0x126b67[_0x59b7ad(0x9dc)] + _0x59b7ad(0x7c0)); return; } const _0x27b083 = { 'id': _0x59b7ad(0x8c3) + Date[_0x59b7ad(0xb3d)](), 'authorType': _0x59b7ad(0x3f6), 'authorId': _0x126b67[_0x59b7ad(0x528)][0x0], 'content': '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'timestamp': Date[_0x59b7ad(0xb3d)](), 'likes': [_0x126b67[_0x59b7ad(0x528)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x59b7ad(0xb3d)](), 'authorId': _0x126b67[_0x59b7ad(0x528)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x126b67[_0x59b7ad(0xad3)][_0x59b7ad(0x230)](_0x27b083), _0x1b6337(), console[_0x59b7ad(0x777)](_0x59b7ad(0x3ad) + _0x126b67[_0x59b7ad(0x9dc)] + _0x59b7ad(0x2c0)), _0x925876('测试动态已添加！'); } } window['addTestPost'] = _0x1d6ee1; function _0x5ab3f1(_0x2a6ee3) { const _0x5738cc = _0x34dc25; return _0x4295e2[_0x5738cc(0x59b)][_0x5738cc(0x7e6)](_0x5ed9fa => _0x5ed9fa['id'] === _0x2a6ee3); } function _0x48b9ad(_0x3cabec, _0x14bca1 = '正在处理...') { const _0x4a853b = _0x34dc25, _0x222153 = document[_0x4a853b(0x61b)](_0x4a853b(0xadb)); let _0x1bbfa9 = document[_0x4a853b(0x61b)](_0x4a853b(0x504)); _0x3cabec ? (!_0x1bbfa9 && (_0x1bbfa9 = document[_0x4a853b(0x6a8)]('div'), _0x1bbfa9['id'] = _0x4a853b(0x504), _0x222153[_0x4a853b(0x1ce)](_0x1bbfa9)), _0x1bbfa9[_0x4a853b(0x72d)] = _0x4a853b(0x427) + _0x14bca1 + _0x4a853b(0x279), _0x1bbfa9[_0x4a853b(0x7c9)][_0x4a853b(0x458)] = _0x4a853b(0x58f)) : _0x1bbfa9 && (_0x1bbfa9[_0x4a853b(0x7c9)][_0x4a853b(0x458)] = _0x4a853b(0x678)); } async function _0x2755ea() { const _0x2d50ba = _0x34dc25; if ('mDbcZ' === _0x2d50ba(0x6a3)) _0x3c0bc7(_0x363cd6, _0x16ac54[_0x2d50ba(0x6e7)][_0x2d50ba(0xaa5)][0x0]); else { const _0x5857fd = _0x4295e2['friendCircles'][_0x2d50ba(0x7e6)](_0x429cd7 => _0x429cd7['id'] === _0x4295e2[_0x2d50ba(0xb77)]); if (!_0x5857fd || _0x4295e2['isGenerating']) return; _0x48b9ad(!![], _0x2d50ba(0x24c)), _0x4295e2['isGenerating'] = !![]; try { let _0x32d286 = Date[_0x2d50ba(0xb3d)](); _0x5857fd[_0x2d50ba(0xad3)] && _0x5857fd[_0x2d50ba(0xad3)][_0x2d50ba(0xa1e)] > 0x0 && (_0x32d286 = Math[_0x2d50ba(0x460)](..._0x5857fd[_0x2d50ba(0xad3)]['map'](_0x305b09 => _0x305b09['timestamp']))); const _0x5826d4 = await _0x3ba2a9(_0x5857fd); if (!_0x5826d4 || _0x5826d4[_0x2d50ba(0xa1e)] === 0x0) { _0x925876('AI似乎没有想出任何新动态。'); return; } const _0x55231d = _0x5826d4['map'](async (_0x51a7e2, _0x2fe95c) => { const _0x42ec13 = _0x2d50ba; _0x48b9ad(!![], '刷新了\x20' + (_0x2fe95c + 0x1) + _0x42ec13(0x40b) + _0x5826d4['length'] + _0x42ec13(0x829)); const _0x2094d3 = _0x32d286 + (_0x2fe95c + 0x1) * 0x3c * 0x3e8, _0x16a6af = { 'id': _0x42ec13(0x39c) + _0x51a7e2[_0x42ec13(0x30c)] + '_' + _0x2094d3, 'authorType': 'character', 'authorId': _0x51a7e2[_0x42ec13(0x30c)], 'content': _0x51a7e2[_0x42ec13(0xae7)], 'timestamp': _0x2094d3, 'likes': _0x51a7e2[_0x42ec13(0x805)] || [], 'comments': (_0x51a7e2[_0x42ec13(0xaee)] || [])['map']((_0x211b60, _0x51aec0) => ({ 'commentId': 'c_' + _0x2094d3 + '_' + _0x51aec0, 'authorId': _0x211b60['authorId'], 'content': _0x211b60['content'] })) }; if (_0x51a7e2[_0x42ec13(0x781)] === _0x42ec13(0x67f) && _0x51a7e2[_0x42ec13(0x3a6)] && _0x51a7e2[_0x42ec13(0xa5b)]) try { const _0x594af4 = await _0x53e88b(_0x51a7e2['songName'], _0x51a7e2[_0x42ec13(0xa5b)]); _0x16a6af['type'] = _0x42ec13(0x67f), _0x16a6af[_0x42ec13(0x3a6)] = _0x51a7e2[_0x42ec13(0x3a6)], _0x16a6af[_0x42ec13(0xa5b)] = _0x51a7e2[_0x42ec13(0xa5b)], _0x16a6af[_0x42ec13(0x382)] = _0x594af4[_0x42ec13(0x211)], _0x16a6af['playableUrl'] = _0x594af4[_0x42ec13(0xb79)]; } catch (_0x20edcc) { console[_0x42ec13(0x214)]('动态中的音乐搜索失败:', _0x20edcc), _0x16a6af[_0x42ec13(0x63a)] = _0x42ec13(0x8f6); } else { if (_0x42ec13(0x292) === _0x42ec13(0x292)) _0x16a6af[_0x42ec13(0x63a)] = _0x42ec13(0x8f6); else { if (_0x324ce6[_0x42ec13(0x9dc)] !== _0x42ec13(0x317)) { _0x44a427[_0x42ec13(0x214)](_0x42ec13(0xa2c), _0x59391f); const _0x565af9 = { 'role': _0x42ec13(0x725), 'content': _0x42ec13(0x8cf) + _0x23f976[_0x42ec13(0x1c9)], 'senderId': _0x45c203['id'], 'isOffline': _0x3fb942 }; _0x51014[_0x42ec13(0x369)][_0x42ec13(0x230)](_0x565af9), _0x48a79c(); } return ![]; } } return _0x16a6af; }), _0x10557c = await Promise[_0x2d50ba(0x253)](_0x55231d); _0x5857fd[_0x2d50ba(0xad3)][_0x2d50ba(0x230)](..._0x10557c), _0x1b6337(); } catch (_0x27ad87) { if (_0x2d50ba(0x688) === _0x2d50ba(0x3b5)) { const _0x452ccb = _0x21499d[_0x2d50ba(0x80d)](_0x4f072c, 'readonly'), _0x14c684 = _0x452ccb[_0x2d50ba(0x193)](_0x26df95), _0xa018d1 = _0x14c684['get'](_0x1babc5); _0xa018d1[_0x2d50ba(0x371)] = () => _0x3551d7(_0xa018d1[_0x2d50ba(0x979)]), _0xa018d1[_0x2d50ba(0x6f9)] = () => _0x293b2b(_0xa018d1[_0x2d50ba(0x214)]); } else console[_0x2d50ba(0x214)](_0x2d50ba(0x3b2), _0x27ad87), _0x925876(_0x2d50ba(0x59f) + _0x27ad87[_0x2d50ba(0x1c9)]); } finally { _0x2d50ba(0xa00) !== _0x2d50ba(0xa00) ? (_0x3b19ac = _0x43d47c[_0x2d50ba(0x9dc)] || '我', _0x2ad134 = _0x2d50ba(0x508)) : (_0x17f944(), _0x48b9ad(![]), _0x4295e2['isGenerating'] = ![]); } } } async function _0x3ba2a9(_0x531c1b) { const _0xb44d74 = _0x34dc25, _0x508940 = _0x531c1b[_0xb44d74(0x528)][_0xb44d74(0x959)](_0x425be5 => _0x5aa3d9(_0x425be5))[_0xb44d74(0x695)](Boolean); if (_0x508940[_0xb44d74(0xa1e)] === 0x0) return null; const _0x39c712 = _0x523643(), _0xe25bf1 = _0x5ab3f1(_0x531c1b[_0xb44d74(0x4b1)]) || _0x4295e2[_0xb44d74(0x59b)][0x0], _0x273cdf = _0xe25bf1 ? _0xb44d74(0x339) + _0xe25bf1[_0xb44d74(0x9dc)] + _0xb44d74(0x8ec) + (_0xe25bf1[_0xb44d74(0xb70)] || '无') + '\x0a' : '', _0x54a699 = _0x508940[_0xb44d74(0x959)](_0x5d9717 => { const _0x2ed27b = _0xb44d74, { omniText: _0x10065f } = _0x2442b3(_0x5d9717['id'], null), _0x574154 = _0x49199f(_0x5d9717['id']), _0x327177 = _0x5d9717[_0x2ed27b(0x473)] && _0x5d9717[_0x2ed27b(0x473)]['length'] > 0x0 ? _0x2ed27b(0xb22) + _0x5d9717[_0x2ed27b(0x9dc)] + _0x2ed27b(0x62b) + _0x5d9717['linkedWorldBookIds'][_0x2ed27b(0x959)](_0x484c24 => _0x4295e2['worldBooks'][_0x2ed27b(0x7e6)](_0xb3cc76 => _0xb3cc76['id'] === _0x484c24))[_0x2ed27b(0x695)](Boolean)['map'](_0x122cc9 => _0x2ed27b(0xb63) + _0x122cc9['name'] + '\x0a' + _0x122cc9[_0x2ed27b(0x8f0)])[_0x2ed27b(0x247)]('') : ''; return '-\x20姓名:\x20' + _0x5d9717['name'] + _0x2ed27b(0x750) + _0x5d9717['id'] + _0x2ed27b(0x820) + _0x5d9717[_0x2ed27b(0xb70)] + _0x2ed27b(0x756) + _0x10065f + '\x0a' + _0x574154 + '\x0a' + _0x327177; })[_0xb44d74(0x247)]('\x0a\x0a'), _0x5873f7 = Math[_0xb44d74(0x29c)](Math['random']() * 0x3) + 0x2, _0x39d697 = _0xb44d74(0x1e9) + _0x5873f7 + _0xb44d74(0x3cf) + _0x54a699 + '\x0a' + _0x273cdf + _0xb44d74(0x1d1) + _0x39c712 + _0xb44d74(0x659) + _0x5873f7 + _0xb44d74(0x1bc) + _0x5873f7 + _0xb44d74(0x922), _0x259dc5 = [{ 'role': 'system', 'content': _0x39d697 }, { 'role': _0xb44d74(0x742), 'content': _0xb44d74(0x4a4) }]; _0x259dc5[_0xb44d74(0x230)]({ 'role': _0xb44d74(0x742), 'content': _0xb44d74(0x9a5) + _0x5873f7 + _0xb44d74(0x579) }); try { const _0xdea842 = await _0x110c3c(_0x259dc5, { 'json': !![] }), _0xbd6ff = _0xdea842[_0xb44d74(0x4ed)](/(\[[\s\S]*\])/); if (!_0xbd6ff) throw new Error(_0xb44d74(0x755)); const _0x537ca5 = _0xbd6ff[0x1], _0x485b70 = JSON[_0xb44d74(0xb4e)](_0x537ca5); if (!Array[_0xb44d74(0x9bd)](_0x485b70)) throw new Error(_0xb44d74(0x760)); return _0x485b70; } catch (_0x343597) { if ('DnwBF' !== _0xb44d74(0x43d)) return console[_0xb44d74(0x214)](_0xb44d74(0x36d), _0x343597), console['error']('AI返回的原始文本:', _0x343597[_0xb44d74(0x451)] || 'AI返回了无法解析的文本'), null; else _0xdbc3a8('home', 'meetingList'); } } async function _0x5765a1() { const _0x40cfe2 = _0x34dc25, _0x45759d = _0x4295e2[_0x40cfe2(0x7f0)][_0x40cfe2(0x7e6)](_0x274818 => _0x274818['id'] === _0x4295e2['activeFriendCircleId']); if (!_0x45759d) return; const _0x2869f8 = await _0x4fac8b('确定要清空好友圈“' + _0x45759d[_0x40cfe2(0x9dc)] + _0x40cfe2(0x886)); _0x2869f8 && (_0x40cfe2(0x454) !== _0x40cfe2(0x454) ? _0x5814d3[_0x40cfe2(0x3c9)]['push'](..._0xa17593[_0x40cfe2(0x67c)]) : (_0x45759d[_0x40cfe2(0xad3)] = [], _0x1b6337(), _0x17f944(), _0x925876(_0x40cfe2(0x7ba)))); } function _0x17f944() { const _0x1290ab = _0x34dc25, _0x4dec00 = document[_0x1290ab(0x61b)](_0x1290ab(0xaf1)), _0x280901 = _0x4295e2[_0x1290ab(0x7f0)]['find'](_0x57e4e5 => _0x57e4e5['id'] === _0x4295e2[_0x1290ab(0xb77)]); if (!_0x280901) { _0x4dec00['innerHTML'] = _0x1290ab(0x37b); return; } if (!_0x280901['posts'] || _0x280901['posts']['length'] === 0x0) { _0x4dec00[_0x1290ab(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>'; return; } _0x4dec00[_0x1290ab(0x72d)] = ''; const _0x5cc0d5 = [..._0x280901[_0x1290ab(0xad3)]][_0x1290ab(0x96f)]((_0x1795d3, _0xf4962f) => _0xf4962f['timestamp'] - _0x1795d3['timestamp']); _0x5cc0d5[_0x1290ab(0xaa9)](_0x51374b => { const _0x2cb213 = _0x1290ab; if (_0x2cb213(0xb8f) !== _0x2cb213(0xb8f)) _0xe85d14[_0x2cb213(0x484)] = { ..._0x5ca9e1[_0x2cb213(0x484)], ..._0x5aa8f6[_0x2cb213(0x484)] }; else { const _0x4b7907 = document[_0x2cb213(0x6a8)](_0x2cb213(0xa9f)); _0x4b7907[_0x2cb213(0x6e1)] = 'music-post'; let _0xeacd49 = '未知', _0x44dc74 = _0x2fd48c; if (_0x51374b[_0x2cb213(0x5e2)] === _0x2cb213(0x742)) { const _0x4acc0a = _0x5ab3f1(_0x51374b[_0x2cb213(0x30c)]); _0x4acc0a && (_0xeacd49 = _0x4acc0a[_0x2cb213(0x9dc)], _0x44dc74 = _0x4acc0a[_0x2cb213(0x1c4)]); } else { const _0x28f133 = _0x5aa3d9(_0x51374b[_0x2cb213(0x30c)]); _0x28f133 && (_0xeacd49 = _0x28f133[_0x2cb213(0x9dc)], _0x44dc74 = _0x28f133[_0x2cb213(0x1c4)]); } const _0x3976c5 = _0x2cb213(0x237) + _0x44dc74 + _0x2cb213(0x563) + _0xeacd49 + _0x2cb213(0x836), _0x3cfeb4 = _0x2cb213(0x532) + _0x51374b[_0x2cb213(0x8f0)] + _0x2cb213(0x475); let _0x52147d = ''; if (_0x51374b['image'] || _0x51374b[_0x2cb213(0x295)]) { if ('WcOEW' === 'WcOEW') { const _0x242cad = 'post-img-' + _0x51374b['id']; _0x52147d = _0x2cb213(0x23f) + _0x242cad + _0x2cb213(0x5aa), setTimeout(() => { const _0x140a76 = _0x2cb213, _0x527347 = document[_0x140a76(0x61b)](_0x242cad); if (!_0x527347) return; if (_0x51374b[_0x140a76(0x37c)]) { if (_0x140a76(0x76a) === _0x140a76(0x76a)) _0x527347[_0x140a76(0x1b2)] = _0x51374b[_0x140a76(0x37c)]; else { const _0x223052 = _0x258991['createElement'](_0x140a76(0xa9f)); _0x223052[_0x140a76(0x6e1)] = _0x140a76(0x365), _0x223052[_0x140a76(0x7c9)][_0x140a76(0x38e)] = 'column', _0x223052[_0x140a76(0x7c9)][_0x140a76(0x5b5)] = _0x140a76(0x92d), _0x223052['style']['padding'] = _0x140a76(0xb89), _0x223052['style'][_0x140a76(0x269)] = '0'; const _0x1092a9 = _0xb2baa3[_0x30e96b[_0x140a76(0xa10)]] || _0x22fa5b['默认'], _0x1535b7 = _0x140a76(0x1d8) + _0x1092a9 + _0x140a76(0xa18), _0x387f9a = _0x140a76(0xae1) + _0x1535b7 + '</span><div><div\x20class=\x22description\x22>' + _0x35b30e[_0x140a76(0x489)] + _0x140a76(0x656) + (_0x2e9184[_0x140a76(0xa10)] || _0x140a76(0x9d9)) + _0x140a76(0x49a) + (_0x516471[_0x140a76(0x4a1)] || 0x0)[_0x140a76(0x1ba)](0x2) + _0x140a76(0x5fc); let _0x220272 = ''; if (_0x5e62d6['review'] && _0x3f2923[_0x140a76(0x541)][_0x140a76(0x259)]) { const _0x5640ee = _0x122dcf(_0x1aa30d[_0x140a76(0x541)][_0x140a76(0x259)]); _0x5640ee && (_0x220272 = _0x140a76(0xa24) + _0x5640ee[_0x140a76(0x1c4)] + _0x140a76(0x727) + _0x5640ee[_0x140a76(0x9dc)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x1c6456[_0x140a76(0x541)][_0x140a76(0x8f6)] + _0x140a76(0x3c2)); } _0x223052[_0x140a76(0x72d)] = _0x387f9a + _0x220272, _0x5908b2['appendChild'](_0x223052); } } else _0x51374b[_0x140a76(0x295)] && (_0x140a76(0x82e) === 'mHzlo' ? _0x5b9ee3('音乐搜索失败:\x20' + _0x181cd6[_0x140a76(0x1c9)]) : _0x2b4d72(_0x51374b[_0x140a76(0x295)])[_0x140a76(0xb30)](_0x3cc586 => { const _0x1b97db = _0x140a76; if (_0x3cc586) { const _0xf0f078 = URL[_0x1b97db(0xa4f)](_0x3cc586); _0x527347[_0x1b97db(0x1b2)] = _0xf0f078, _0x527347[_0x1b97db(0x5a9)] = () => URL[_0x1b97db(0x3c8)](_0xf0f078); } })); }, 0x0); } else { if (_0x4c02cd[_0x2cb213(0x55e)] === _0x2cb213(0x742) && _0x8106d8[_0x2cb213(0x37c)]) return { 'role': _0x2cb213(0x742), 'content': [{ 'type': 'text', 'text': _0x49aeec[_0x2cb213(0x8f0)] || '\x20' }, { 'type': _0x2cb213(0x6ef), 'image_url': { 'url': _0x2b4db1[_0x2cb213(0x37c)], 'detail': _0x2cb213(0x38b) } }] }; return { 'role': _0x2dfcfc[_0x2cb213(0x55e)], 'content': _0x5d4a2a[_0x2cb213(0x8f0)] }; } } let _0x5e07f5 = ''; _0x51374b[_0x2cb213(0x63a)] === _0x2cb213(0x67f) && _0x51374b[_0x2cb213(0x3a6)] && (_0x5e07f5 = _0x2cb213(0x560) + _0x51374b['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x51374b[_0x2cb213(0x382)] || _0x2fd48c) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x51374b[_0x2cb213(0x3a6)] + _0x2cb213(0x3ff) + _0x51374b[_0x2cb213(0xa5b)] + _0x2cb213(0x88f) + (_0x51374b['playableUrl'] ? '▶' : '⚠') + _0x2cb213(0x60e)); const _0x4bc8d7 = _0x2cb213(0x65f) + new Date(_0x51374b[_0x2cb213(0x6aa)])[_0x2cb213(0x773)](_0x2cb213(0x5a5)) + _0x2cb213(0x300); let _0x49f82c = ''; if (_0x51374b['likes'] && _0x51374b[_0x2cb213(0x805)]['length'] > 0x0 || _0x51374b['comments'] && _0x51374b[_0x2cb213(0xaee)][_0x2cb213(0xa1e)] > 0x0) { if (_0x2cb213(0x771) !== 'tLKVs') { let _0x553ec7 = ''; if (_0x51374b[_0x2cb213(0x805)] && _0x51374b['likes']['length'] > 0x0) { const _0x496780 = _0x51374b[_0x2cb213(0x805)][_0x2cb213(0x959)](_0x353051 => _0x5aa3d9(_0x353051)?.[_0x2cb213(0x9dc)] || '未知')[_0x2cb213(0x247)]('、'), _0x29bb08 = _0x2cb213(0x69a); _0x553ec7 = _0x2cb213(0x7be) + _0x29bb08 + '\x20' + _0x496780 + _0x2cb213(0x300); } let _0x25f655 = ''; if (_0x51374b[_0x2cb213(0xaee)] && _0x51374b[_0x2cb213(0xaee)][_0x2cb213(0xa1e)] > 0x0) { const _0x14bbab = _0x51374b[_0x2cb213(0xaee)][_0x2cb213(0x959)](_0x3aab9a => { const _0xa97ceb = _0x2cb213, _0x1c6204 = _0x5aa3d9(_0x3aab9a[_0xa97ceb(0x30c)])?.[_0xa97ceb(0x9dc)] || '未知'; return _0xa97ceb(0xa35) + _0x1c6204 + _0xa97ceb(0x4f6) + _0x3aab9a[_0xa97ceb(0x8f0)] + _0xa97ceb(0x300); })[_0x2cb213(0x247)](''); _0x25f655 = '<div\x20class=\x22post-comments-container\x22>' + _0x14bbab + _0x2cb213(0x300); } _0x49f82c = _0x2cb213(0x79f) + _0x553ec7 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x25f655 + _0x2cb213(0x7e0); } else { const _0x62cbef = _0x4f76f8[_0x2cb213(0xb4e)](_0x44f03c['getItem']('badgeState') || '{}'), _0x6c43dc = { ..._0x62cbef, ..._0x48c23b }; _0x460904[_0x2cb213(0x783)](_0x2cb213(0x693), _0x4b2e63[_0x2cb213(0x1c5)](_0x6c43dc)); } } const _0x52d0 = _0x2cb213(0x235) + _0x3cfeb4 + _0x52147d + _0x5e07f5 + _0x2cb213(0x300); _0x4b7907[_0x2cb213(0x72d)] = _0x3976c5 + _0x52d0 + _0x4bc8d7 + _0x49f82c; if (_0x51374b[_0x2cb213(0x63a)] === 'music' && _0x51374b[_0x2cb213(0x65e)]) { const _0x1bc9a5 = _0x4b7907[_0x2cb213(0x76d)](_0x2cb213(0x843)); _0x1bc9a5 && _0x1bc9a5[_0x2cb213(0x46a)](_0x2cb213(0x3cd), function () { const _0x283981 = _0x2cb213, _0x1bc8f7 = { 'id': _0x51374b['id'], 'url': _0x51374b[_0x283981(0x65e)] }; _0x407470(this, _0x1bc8f7); }); } _0x4dec00[_0x2cb213(0x1ce)](_0x4b7907); } }); } document[_0x34dc25(0x61b)](_0x34dc25(0x84f))[_0x34dc25(0x46a)]('click', _0x5765a1), document[_0x34dc25(0x61b)](_0x34dc25(0x937))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x2755ea), document[_0x34dc25(0x61b)](_0x34dc25(0x39b))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x19d), _0x34dc25(0x3a2))), document[_0x34dc25(0x61b)](_0x34dc25(0x243))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x3d03e4()), document[_0x34dc25(0x61b)](_0x34dc25(0x654))['addEventListener']('click', () => _0xd18e04(_0x34dc25(0x3a2), 'friendCircleEdit')), document['getElementById'](_0x34dc25(0x98f))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x255700), document['getElementById']('delete-friend-circle-button')[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x6c1c45), document['getElementById'](_0x34dc25(0x24b))[_0x34dc25(0x46a)]('click', () => { const _0x44f70c = _0x34dc25; if ('sRAXT' !== _0x44f70c(0x953)) _0x1779b4(), _0xd18e04(_0x44f70c(0x3a2), _0x44f70c(0x67f)); else { const _0x26d34f = _0x444ae6[_0x44f70c(0x6a8)](_0x44f70c(0xa9f)); _0x26d34f[_0x44f70c(0x6e1)] = _0x44f70c(0x720), _0x26d34f[_0x44f70c(0x72d)] = _0x44f70c(0x27c), _0x26d34f[_0x44f70c(0x76d)](_0x44f70c(0x8d5))[_0x44f70c(0x81f)] = () => _0xde1844(_0x44f70c(0x37c)), _0x33ca10[_0x44f70c(0x1ce)](_0x26d34f), _0xeb9751(_0x23f3fd)['then'](_0xb6f756 => { const _0xb1ca2c = _0x44f70c, _0x4c7dbb = _0x44030f[_0xb1ca2c(0x61b)](_0xb1ca2c(0x7f2)); _0x4c7dbb && _0xb6f756 && (_0x4c7dbb[_0xb1ca2c(0x1b2)] = _0x260bae['createObjectURL'](_0xb6f756)); }); } }), document['getElementById'](_0x34dc25(0xb93))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x32f244 = _0x34dc25; _0x4295e2['activeFriendCircleId'] && (_0x32f244(0x43e) !== _0x32f244(0x3aa) ? _0x3d03e4(_0x4295e2[_0x32f244(0xb77)]) : _0x20602a = _0x13c3ef['at'](-0x1)); }), document['getElementById'](_0x34dc25(0x4c8))['addEventListener'](_0x34dc25(0x3cd), async () => { const _0x3b2c55 = _0x34dc25, _0x451032 = _0x4295e2[_0x3b2c55(0x7f0)][_0x3b2c55(0x7e6)](_0x35018e => _0x35018e['id'] === _0x4295e2[_0x3b2c55(0xb77)]); if (!_0x451032 || _0x4295e2[_0x3b2c55(0x2ac)]) return; const _0x34d457 = _0x451032['boundUserProfileId'], _0xeefdec = _0x4295e2[_0x3b2c55(0x59b)][_0x3b2c55(0x7e6)](_0x339d10 => _0x339d10['id'] === _0x34d457); if (!_0xeefdec) { if (_0x3b2c55(0x54e) !== 'KGzmE') { _0x925876(_0x3b2c55(0x4a3)); return; } else { const _0x271ca4 = _0x1ca310[_0x3b2c55(0x6a8)]('p'); _0x271ca4['style'][_0x3b2c55(0x710)] = '5px', _0x271ca4[_0x3b2c55(0x6c7)] = _0x57bf3f, _0x3a06b5[_0x3b2c55(0x1ce)](_0x271ca4); } } const _0x72c34f = document[_0x3b2c55(0x61b)](_0x3b2c55(0x65b))[_0x3b2c55(0x21f)][_0x3b2c55(0x2c7)](), _0x3f6f86 = _0x4295e2[_0x3b2c55(0xb53)][_0x3b2c55(0x37c)], _0x59471f = _0x4295e2[_0x3b2c55(0xb53)][_0x3b2c55(0x67f)], _0x2d0e73 = _0x4295e2[_0x3b2c55(0xb53)]['imageId']; if (!_0x72c34f && !_0x3f6f86 && !_0x59471f) { _0x925876(_0x3b2c55(0xa7e)); return; } const _0xbbeb2f = { 'id': _0x3b2c55(0x51b) + Date[_0x3b2c55(0xb3d)](), 'authorType': 'user', 'authorId': _0xeefdec['id'], 'content': _0x72c34f, 'timestamp': Date['now'](), 'likes': [], 'comments': [] }; if (_0x2d0e73) _0xbbeb2f[_0x3b2c55(0x295)] = _0x2d0e73; else _0x3f6f86 && (_0xbbeb2f[_0x3b2c55(0x37c)] = _0x3f6f86); if (_0x59471f) _0xbbeb2f[_0x3b2c55(0x63a)] = _0x3b2c55(0x67f), Object[_0x3b2c55(0x718)](_0xbbeb2f, _0x59471f); else { if (_0x3b2c55(0x9c8) === _0x3b2c55(0xa6c)) throw new _0x5ce46e(_0x3b2c55(0x313)); else _0xbbeb2f['type'] = _0x3b2c55(0x8f6); } _0x451032[_0x3b2c55(0xad3)][_0x3b2c55(0x230)](_0xbbeb2f), _0x1b6337(), _0x17f944(), document[_0x3b2c55(0x61b)](_0x3b2c55(0x65b))[_0x3b2c55(0x21f)] = '', _0x4295e2[_0x3b2c55(0xb53)][_0x3b2c55(0x37c)] = null, _0x4295e2[_0x3b2c55(0xb53)][_0x3b2c55(0x67f)] = null, _0x4295e2[_0x3b2c55(0xb53)][_0x3b2c55(0x295)] = null, _0x5996dd(), _0x43d09b(_0xbbeb2f); }), document[_0x34dc25(0x61b)](_0x34dc25(0x222))['addEventListener'](_0x34dc25(0x3cd), () => { const _0x1c88a8 = _0x34dc25; document[_0x1c88a8(0x61b)](_0x1c88a8(0x610))['click'](); }), document['getElementById']('user-post-image-input')[_0x34dc25(0x46a)](_0x34dc25(0x631), async _0x5c2285 => { const _0x5e3050 = _0x34dc25, _0x6e4484 = _0x5c2285[_0x5e3050(0x6e7)][_0x5e3050(0xaa5)][0x0]; if (!_0x6e4484) return; try { const _0x3f2c6e = await _0x2b0e1f(_0x6e4484, 0x320, 0.8, !![]), _0x2a034a = _0x5e3050(0x637) + Date[_0x5e3050(0xb3d)](); await _0x190daf(_0x2a034a, _0x3f2c6e), _0x4295e2[_0x5e3050(0xb53)][_0x5e3050(0x295)] = _0x2a034a, _0x4295e2['pendingPostAttachments'][_0x5e3050(0x37c)] = null, _0x4295e2['pendingPostAttachments'][_0x5e3050(0x67f)] = null, _0x5996dd(); } catch (_0x17426d) { _0x925876(_0x5e3050(0xa95) + _0x17426d[_0x5e3050(0x1c9)]); } _0x5c2285[_0x5e3050(0x6e7)][_0x5e3050(0x21f)] = ''; }), document[_0x34dc25(0x61b)](_0x34dc25(0x623))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), async () => { const _0x404812 = _0x34dc25, _0x206fa5 = await _0x2fffc9(); if (!_0x206fa5) return; _0x925876('正在搜索音乐...'); try { const _0x4f3431 = await _0x53e88b(_0x206fa5['songName'], _0x206fa5[_0x404812(0xa5b)]); _0x4295e2[_0x404812(0xb53)][_0x404812(0x67f)] = { 'songName': _0x206fa5['songName'], 'artist': _0x206fa5['artist'], 'coverUrl': _0x4f3431[_0x404812(0x211)], 'playableUrl': _0x4f3431[_0x404812(0xb79)] }, _0x4295e2[_0x404812(0xb53)][_0x404812(0x37c)] = null, _0x5996dd(); } catch (_0x4d544b) { 'oZyLz' === _0x404812(0x400) ? _0x925876(_0x404812(0x71b) + _0x4d544b['message']) : (_0x97f4b2[_0x404812(0x7c9)][_0x404812(0x54b)] = '', _0x47507a['style'][_0x404812(0xa43)] = '', _0x1479f4[_0x404812(0x4f8)]('.widget-info\x20>\x20div')[_0x404812(0xaa9)](_0x21b9fe => { const _0x48925a = _0x404812; _0x21b9fe[_0x48925a(0x7c9)][_0x48925a(0xa1f)] = ''; })); } }); function _0x454b80() { const _0x3d50a1 = _0x34dc25; if ('EmOHJ' === _0x3d50a1(0x673)) { const _0x2c067e = new Date(), _0x2839d4 = document[_0x3d50a1(0x61b)]('home-time'), _0x4a0783 = document[_0x3d50a1(0x61b)](_0x3d50a1(0x685)); if (_0x2839d4 && _0x4a0783) { if (_0x3d50a1(0x6af) !== _0x3d50a1(0x6af)) return _0x20189f[_0x3d50a1(0x230)](_0x25b682), _0x23d29e; else { const _0x38e261 = String(_0x2c067e[_0x3d50a1(0x220)]())['padStart'](0x2, '0'), _0x568428 = String(_0x2c067e[_0x3d50a1(0x503)]())['padStart'](0x2, '0'); _0x2839d4['textContent'] = _0x38e261 + ':' + _0x568428; const _0x5b77b4 = _0x2c067e[_0x3d50a1(0x4ef)]() + 0x1, _0x165e4a = _0x2c067e[_0x3d50a1(0x72b)](), _0x5e8cb4 = [_0x3d50a1(0x63c), _0x3d50a1(0xa42), _0x3d50a1(0x73c), _0x3d50a1(0xb9c), _0x3d50a1(0x492), _0x3d50a1(0x4a0), _0x3d50a1(0x997)][_0x2c067e['getDay']()]; _0x4a0783[_0x3d50a1(0x6c7)] = _0x5b77b4 + '月' + _0x165e4a + '日\x20' + _0x5e8cb4; } } } else _0x143092[_0x3d50a1(0x7f0)] = _0x264c94[_0x3d50a1(0x7f0)], _0x208733['activeFriendCircleId'] = _0x100f47[_0x3d50a1(0xb77)]; } function _0x46dd1b(_0x17b8ee) { const _0x5ea0d4 = _0x34dc25; if (!_0x17b8ee) return ''; const _0x1f6ec7 = new Date(_0x17b8ee), _0x542e98 = String(_0x1f6ec7['getHours']())[_0x5ea0d4(0x956)](0x2, '0'), _0x25d609 = String(_0x1f6ec7[_0x5ea0d4(0x503)]())[_0x5ea0d4(0x956)](0x2, '0'); return _0x542e98 + ':' + _0x25d609; } function _0x523643() { const _0x3efb8f = _0x34dc25, _0x11e3b9 = _0x4295e2[_0x3efb8f(0x7f0)][_0x3efb8f(0x7e6)](_0x786210 => _0x786210['id'] === _0x4295e2[_0x3efb8f(0xb77)]), _0x43929b = _0x11e3b9 ? _0x11e3b9[_0x3efb8f(0xad3)] : []; if (!_0x43929b || _0x43929b[_0x3efb8f(0xa1e)] === 0x0) { if (_0x3efb8f(0x6ae) === _0x3efb8f(0x906)) { const _0x1ccf23 = _0x447db5(_0x9f6524[_0x3efb8f(0x5c9)][0x0]); return _0x1ccf23?.['name'] || 'AI'; } else return ''; } const _0x2d9ae5 = _0x43929b['slice'](0x0, 0x5), _0x2653c5 = _0x2d9ae5['map'](_0x4c1d04 => { const _0x49cefd = _0x3efb8f, _0x56a18b = _0x5aa3d9(_0x4c1d04[_0x49cefd(0x30c)]) || { 'name': '未知' }; let _0x314d19 = _0x49cefd(0xb8e) + _0x56a18b[_0x49cefd(0x9dc)] + _0x49cefd(0x52d) + (_0x4c1d04[_0x49cefd(0x65a)] || _0x4c1d04[_0x49cefd(0x8f0)]) + '”'; return _0x4c1d04[_0x49cefd(0x63a)] === _0x49cefd(0x67f) && (_0x314d19 += '\x20(分享了歌曲:\x20' + _0x4c1d04[_0x49cefd(0x3a6)] + _0x49cefd(0x4df) + _0x4c1d04[_0x49cefd(0xa5b)] + ')'), _0x314d19; }); return _0x3efb8f(0x6da) + _0x2653c5[_0x3efb8f(0x247)]('\x0a'); } function _0x49199f(_0x491527) { const _0x4169e5 = _0x34dc25; if (_0x4169e5(0x2e3) !== _0x4169e5(0x1e0)) { const _0x5ef6c1 = _0x4295e2[_0x4169e5(0x59b)][_0x4169e5(0x7e6)](_0x257b3e => _0x257b3e['id'] === _0x4295e2[_0x4169e5(0x2e4)]) || { 'name': '你' }, _0x27c825 = _0x4295e2[_0x4169e5(0x801)][_0x4169e5(0x7e6)](_0x12df6d => _0x12df6d['characterId'] === _0x491527); if (!_0x27c825 || !_0x27c825[_0x4169e5(0x9d1)] || _0x27c825['entries'][_0x4169e5(0xa1e)] === 0x0) return ''; const _0x3f894a = _0x27c825[_0x4169e5(0x9d1)][_0x4169e5(0xae6)](-0x8), _0x141921 = _0x3f894a[_0x4169e5(0x959)](_0x2ca380 => { const _0x557d76 = _0x4169e5; if (_0x557d76(0x87b) === _0x557d76(0x870)) _0x3bd929[_0x557d76(0x1f5)]['remove']('show-chat-view'); else { const _0x139b74 = _0x2ca380[_0x557d76(0x1b8)] === _0x557d76(0x742) ? _0x5ef6c1[_0x557d76(0x9dc)] : _0x5aa3d9(_0x2ca380[_0x557d76(0x1b8)])[_0x557d76(0x9dc)]; return _0x557d76(0x485) + new Date(_0x2ca380['timestamp'])[_0x557d76(0x949)]() + ']\x20' + _0x139b74 + _0x557d76(0x204) + _0x2ca380[_0x557d76(0x8f0)]; } })[_0x4169e5(0x247)]('\x0a'); return _0x4169e5(0x6a2) + _0x5ef6c1[_0x4169e5(0x9dc)] + '\x20之间的私密内容)\x0a' + _0x141921; } else _0x53bef2[_0x4169e5(0x9dc)] = _0x24477a, _0x4a2241['boundUserProfileId'] = _0x57e32a, _0x29d2d6[_0x4169e5(0x528)] = _0x44e75e; } function _0x1dfe11() { const _0x5c7bb7 = _0x34dc25; if (_0x5c7bb7(0xb64) !== _0x5c7bb7(0x9e2)) { const _0x6d95d2 = document[_0x5c7bb7(0x61b)]('music-widget-card'), _0x5aa8d6 = _0x4295e2[_0x5c7bb7(0x81c)]['widgetBgImage']; _0x5aa8d6 ? (_0x6d95d2[_0x5c7bb7(0x7c9)][_0x5c7bb7(0x54b)] = _0x5c7bb7(0x83d) + _0x5aa8d6 + ')', _0x6d95d2[_0x5c7bb7(0x7c9)]['backgroundSize'] = _0x5c7bb7(0x211), _0x6d95d2[_0x5c7bb7(0x7c9)]['backgroundPosition'] = _0x5c7bb7(0x231), _0x6d95d2['style']['color'] = 'white', _0x6d95d2[_0x5c7bb7(0x4f8)](_0x5c7bb7(0x7c2))[_0x5c7bb7(0xaa9)](_0x3ee2f5 => { const _0x4f03e0 = _0x5c7bb7; _0x3ee2f5['style'][_0x4f03e0(0xa1f)] = '0\x201px\x203px\x20rgba(0,0,0,0.6)'; })) : (_0x6d95d2['style'][_0x5c7bb7(0x54b)] = '', _0x6d95d2[_0x5c7bb7(0x7c9)]['color'] = '', _0x6d95d2['querySelectorAll'](_0x5c7bb7(0x7c2))[_0x5c7bb7(0xaa9)](_0x5225f7 => { const _0x25b62a = _0x5c7bb7; _0x5225f7[_0x25b62a(0x7c9)]['textShadow'] = ''; })); } else { const _0x27318a = _0xa2bc4d[_0x5c7bb7(0x94b)](), _0x525c40 = _0x2fd3f1['toLowerCase'](); if (_0x27318a['startsWith']('claude')) return _0x5c7bb7(0x745); if (_0x525c40[_0x5c7bb7(0x2b7)](_0x5c7bb7(0x1da))) return _0x5c7bb7(0x745); if (_0x525c40[_0x5c7bb7(0x2b7)]('googleapis.com')) return _0x5c7bb7(0x5ca); if (_0x27318a[_0x5c7bb7(0x772)](_0x5c7bb7(0x5ca))) return _0x5c7bb7(0x5ca); return _0x5c7bb7(0x950); } } const _0x478b76 = document[_0x34dc25(0x61b)](_0x34dc25(0x645)), _0x9ee85d = document['getElementById'](_0x34dc25(0x7fb)); _0x478b76[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x59ebda = _0x34dc25; _0x1779b4(), _0xd18e04(_0x59ebda(0x3a2), _0x59ebda(0x19d)); }), _0x9ee85d[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x11f561 = _0x34dc25; 'wnJyI' === _0x11f561(0x3b4) ? (_0xb41a83(), _0xd18e04(_0x11f561(0x20e), 'home')) : (_0x3ae634['src'] = _0x12dc74[_0x11f561(0xa4f)](_0x4de6d8), _0x442ed4[_0x11f561(0x7c9)][_0x11f561(0x458)] = 'block', _0x32de53['style'][_0x11f561(0x7e3)] = 'none', _0x2ca907['style']['background'] = _0x11f561(0x39e)); }), document['getElementById'](_0x34dc25(0x203))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x296ab4 = _0x34dc25; _0x296ab4(0x984) === _0x296ab4(0x984) ? _0xd18e04(_0x296ab4(0x19d), _0x296ab4(0x20e)) : _0x5c39bb = _0x296ab4(0x968) + _0x3919a7; }), document[_0x34dc25(0x61b)](_0x34dc25(0x9bb))[_0x34dc25(0x46a)]('click', () => { const _0x27f3aa = _0x34dc25; if (_0x1600c6) clearInterval(_0x1600c6); _0x1600c6 = null, _0x4295e2[_0x27f3aa(0x63e)] = [], _0x4295e2[_0x27f3aa(0xa6b)] = null, document[_0x27f3aa(0x61b)]('galgame-sprite-adjust-ui')[_0x27f3aa(0x7c9)][_0x27f3aa(0x458)] = _0x27f3aa(0x678), _0x4295e2[_0x27f3aa(0x845)] = null, _0x1b6337(), _0xd18e04(_0x27f3aa(0x20e), _0x27f3aa(0x707)); }); const _0x52853c = document['getElementById'](_0x34dc25(0x3a1)), _0x3667ed = document['getElementById'](_0x34dc25(0x6b2)); _0x3667ed[_0x34dc25(0x46a)]('click', () => { const _0x44e6f8 = _0x34dc25; if (_0x44e6f8(0x249) === _0x44e6f8(0x925)) { const _0x3b42df = 'diary-action-modal-' + _0x14ca48; let _0x576baa = _0x1de07f[_0x44e6f8(0x61b)](_0x3b42df); if (_0x576baa) return; const _0x44dd22 = _0x44e6f8(0x9e0) + _0x3b42df + _0x44e6f8(0x5c3) + (_0x13033a === 'ai' ? _0x44e6f8(0x775) : '') + _0x44e6f8(0x54d); _0x457e8b[_0x44e6f8(0x68f)]['insertAdjacentHTML'](_0x44e6f8(0x4cc), _0x44dd22); const _0x331b69 = _0x3a6b87[_0x44e6f8(0x61b)](_0x3b42df), _0x1ca9ce = () => _0x331b69['remove'](); _0x331b69[_0x44e6f8(0x76d)](_0x44e6f8(0x1ff))['onclick'] = _0x1ca9ce, _0x331b69[_0x44e6f8(0x76d)](_0x44e6f8(0x3ae))[_0x44e6f8(0x81f)] = _0x1ca9ce, _0x331b69[_0x44e6f8(0x76d)]('#diary-action-delete')[_0x44e6f8(0x81f)] = () => { _0xe00c3f(_0x33ad62), _0x1ca9ce(); }, _0x5979ce === 'ai' && (_0x331b69[_0x44e6f8(0x76d)](_0x44e6f8(0x2ba))[_0x44e6f8(0x81f)] = () => { _0xa159c7(_0x35f9c0), _0x1ca9ce(); }); } else { const _0xe3d0a = _0x52853c['value'][_0x44e6f8(0x2c7)](); _0xe3d0a && (_0xf19bda(_0xe3d0a), _0x52853c[_0x44e6f8(0x21f)] = '', setTimeout(_0x1dc518, 0x64)); } }); function _0x407470(_0xd79851, _0x2311f6) { const _0x32c152 = _0x34dc25; if ('wsukQ' !== _0x32c152(0x23d)) { const _0x57b3d1 = _0x16fd42[_0x32c152(0x59b)]['find'](_0x43e4c6 => _0x43e4c6['id'] === _0x41aa62[_0x32c152(0x4b1)]) || { 'name': _0x32c152(0x9f2) }, _0x4c1df3 = _0x1ee09['createElement'](_0x32c152(0xa9f)); _0x4c1df3['className'] = _0x32c152(0xaa4), _0x4c1df3[_0x32c152(0x6c3)]['id'] = _0x11c71e['id'], _0x4c1df3[_0x32c152(0x72d)] = _0x32c152(0x1b7) + _0xdcaffd[_0x32c152(0x9dc)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x57b3d1[_0x32c152(0x9dc)] + _0x32c152(0x4d4) + _0x25f181[_0x32c152(0x528)]['length'] + _0x32c152(0x29b), _0x4c1df3[_0x32c152(0x46a)](_0x32c152(0x3cd), () => _0x218d25(_0x233986['id'])), _0x4e2e0c[_0x32c152(0x1ce)](_0x4c1df3); } else { const _0x23c5af = document[_0x32c152(0x61b)](_0x32c152(0x72a)), _0x403e4b = document[_0x32c152(0x4f8)](_0x32c152(0x940)); _0x403e4b[_0x32c152(0xaa9)](_0x29d50d => { const _0x4e3205 = _0x32c152; _0x29d50d !== _0xd79851[_0x4e3205(0x76d)](_0x4e3205(0x940)) && (_0x29d50d[_0x4e3205(0x6c7)] = '▶'); }), _0x23c5af[_0x32c152(0x1b2)] === _0x2311f6[_0x32c152(0xb79)] && !_0x23c5af['paused'] ? (_0x23c5af[_0x32c152(0x942)](), _0xd79851['querySelector'](_0x32c152(0x940))['textContent'] = '▶') : 'wICpj' === _0x32c152(0x26d) ? _0x4c4883[_0x32c152(0x7c9)][_0x32c152(0x54b)] = _0x32c152(0x3bd) + _0x50c25b[_0x32c152(0x1c4)] + '\x27)' : (_0x23c5af[_0x32c152(0x1b2)] = _0x2311f6[_0x32c152(0xb79)], _0x23c5af[_0x32c152(0xb59)](), _0xd79851[_0x32c152(0x76d)](_0x32c152(0x940))[_0x32c152(0x6c7)] = '❚❚'); } } const _0x1afcb2 = document[_0x34dc25(0x61b)](_0x34dc25(0x7b4)); async function _0x31f0b6(_0x5a49dc) { const _0x3a5b11 = _0x34dc25; if (!_0x5a49dc || !_0x5a49dc['startsWith'](_0x3a5b11(0x4a8))) return ![]; return new Promise(_0x49382f => { const _0x181d81 = _0x3a5b11; if (_0x181d81(0x8e3) === _0x181d81(0x5ad)) return '刚才'; else { const _0x4961d4 = document[_0x181d81(0x6a8)](_0x181d81(0x624)); _0x4961d4[_0x181d81(0x1b2)] = _0x5a49dc; const _0x4eb730 = setTimeout(() => { const _0x4969e2 = _0x181d81; if (_0x4969e2(0x1cb) === 'jkmEh') _0x3e9b54(), _0x49382f(![]); else { _0x50f888(_0x4969e2(0x366)); return; } }, 0xbb8), _0x3e9b54 = () => { const _0x4e9015 = _0x181d81; clearTimeout(_0x4eb730), _0x4961d4[_0x4e9015(0x33b)]('canplaythrough', _0x152712), _0x4961d4[_0x4e9015(0x33b)](_0x4e9015(0x214), _0xef1cfe), _0x4961d4[_0x4e9015(0x1b2)] = '', _0x4961d4['remove'](); }, _0x152712 = () => { _0x3e9b54(), _0x49382f(!![]); }, _0xef1cfe = () => { const _0x2d0eea = _0x181d81; if (_0x2d0eea(0x18d) !== 'UkiyB') { if (_0x288c3b[_0x2d0eea(0x9bd)](_0x5780f4) && _0x2acb79[_0x2d0eea(0x9bd)](_0x351bd4)) { const _0x23f40f = _0x37f31d[_0x2d0eea(0x333)](_0x863632); _0x591b1b = _0xd3e711[_0x2d0eea(0x1c5)](_0x23f40f), _0xc139db[_0x2d0eea(0x777)]('Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。'); } else _0x49b05f = _0x1a3275[_0x2d0eea(0x1c5)](_0x400f98); } else _0x3e9b54(), _0x49382f(![]); }; _0x4961d4[_0x181d81(0x46a)]('canplaythrough', _0x152712), _0x4961d4[_0x181d81(0x46a)](_0x181d81(0x214), _0xef1cfe); } }); } async function _0x53e88b(_0x509ba9, _0x5addf8) { const _0x26402d = _0x34dc25, _0x584863 = [_0x26402d(0x9c7), 'tencent']; for (const _0x304713 of _0x584863) { try { const _0x17cf06 = _0x26402d(0x7cc) + _0x304713 + '?word=' + encodeURIComponent(_0x509ba9) + '-' + encodeURIComponent(_0x5addf8), _0x10c185 = await fetch(_0x17cf06), _0x3e9df6 = await _0x10c185['json'](); if (_0x3e9df6['code'] !== 0xc8 || !_0x3e9df6[_0x26402d(0x4ff)] || _0x3e9df6['data'][_0x26402d(0xa1e)] === 0x0) continue; const _0xab58c8 = _0x3e9df6[_0x26402d(0x4ff)][_0x26402d(0xae6)](0x0, 0x5); for (const _0x3224c1 of _0xab58c8) { const _0x18cb98 = _0x26402d(0x7cc) + _0x304713 + '?id=' + _0x3224c1['id'], _0x97b5c8 = await fetch(_0x18cb98), _0x21f691 = await _0x97b5c8[_0x26402d(0x787)](), _0x226772 = _0x21f691[_0x26402d(0x4ff)]?.[_0x26402d(0xb79)]; if (await _0x31f0b6(_0x226772)) { if (_0x26402d(0x660) !== _0x26402d(0x5be)) return { 'url': _0x226772, 'cover': _0x3224c1[_0x26402d(0x211)], 'source': _0x304713 }; else { _0x24f8ea[_0x26402d(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>'; return; } } } } catch (_0x4e7cc0) { if (_0x26402d(0x5e0) !== _0x26402d(0x5e0)) { if (_0x11ff8f[_0x26402d(0x63a)] === 'group') return _0x26402d(0x3e1) + (_0x227ced[_0x26402d(0x9dc)] || _0x26402d(0x4ab)) + '」'; const _0x341854 = _0xf15e46(_0x3196ee[_0x26402d(0x5c9)][0x0]); return '与\x20' + (_0x341854?.[_0x26402d(0x9dc)] || _0x26402d(0x2d5)) + _0x26402d(0x7e5); } else console[_0x26402d(0x214)](_0x26402d(0x252) + _0x304713 + ':', _0x4e7cc0); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x550b71(_0xfb7c3) { const _0x1ac020 = _0x34dc25; try { if (_0x1ac020(0x1e5) === _0x1ac020(0xb39)) _0x4233f3 += _0x1ac020(0x5f8) + _0x1b1dff[_0x1ac020(0x198)](_0x117111 / 0x3c) + _0x1ac020(0x8f4); else { const _0x47d283 = JSON[_0x1ac020(0xb4e)](localStorage['getItem'](_0x1ac020(0x693)) || '{}'), _0x4b52bb = { ..._0x47d283, ..._0xfb7c3 }; localStorage[_0x1ac020(0x783)](_0x1ac020(0x693), JSON['stringify'](_0x4b52bb)); } } catch (_0x5557ff) { if ('iwIRx' !== 'iwIRx') for (const _0x306c2e of _0x24d80b[_0x1ac020(0x496)]) { let _0x558ed1 = _0x534185[_0x1ac020(0x496)][_0x1ac020(0x7e6)](_0x154455 => _0x154455[_0x1ac020(0x9dc)] === _0x306c2e[_0x1ac020(0x9dc)]); if (_0x558ed1) _0xd2c7a7[_0x1ac020(0x230)](_0x558ed1['id']); else { const _0x102872 = { 'id': _0x1ac020(0x6cd) + _0x5d4c8d['now']() + '_' + _0x5167f2[_0x1ac020(0x6cc)](), 'name': _0x306c2e[_0x1ac020(0x9dc)], 'content': _0x306c2e[_0x1ac020(0x8f0)] }; _0x40ae45[_0x1ac020(0x496)][_0x1ac020(0x230)](_0x102872), _0x13f769[_0x1ac020(0x230)](_0x102872['id']); } } else console[_0x1ac020(0x214)]('保存徽章状态失败', _0x5557ff); } } async function _0x1962f6() { const _0x5e2193 = _0x34dc25; if (_0x5e2193(0x4c7) === _0x5e2193(0xb3b)) return _0x3a1705(new _0x334b87(_0x5e2193(0x4da))); else { const _0x57c29b = document[_0x5e2193(0x61b)](_0x5e2193(0xb8a)), _0x2fff4f = document['getElementById'](_0x5e2193(0x817)); try { let _0x435b34 = await _0x2b4d72(_0x5e2193(0x183)); if (!_0x435b34) { const _0x58b59c = JSON[_0x5e2193(0xb4e)](localStorage[_0x5e2193(0x2f0)](_0x5e2193(0x693)) || '{}'); _0x58b59c['image'] && (_0x435b34 = await _0x30f5c0(_0x58b59c['image']), await _0x190daf(_0x5e2193(0x183), _0x435b34)); } if (_0x435b34) _0x2fff4f['src'] = URL[_0x5e2193(0xa4f)](_0x435b34), _0x2fff4f[_0x5e2193(0x7c9)][_0x5e2193(0x458)] = _0x5e2193(0x1c1), _0x57c29b['style'][_0x5e2193(0x7e3)] = _0x5e2193(0x678); else { if (_0x5e2193(0x55c) !== 'bNDxX') { _0x2fc9c8 = _0x1119a0[_0x5e2193(0x7af)][_0x5e2193(0x7e6)](_0x1e076f => _0x1e076f[_0x5e2193(0x63a)] === _0x5e2193(0x780) && _0x1e076f[_0x5e2193(0x5c9)]['includes'](_0x76e21f)); const _0x55193d = _0x1b9cf0(_0x4f1911); _0x3207f2 = _0x55193d ? _0x55193d[_0x5e2193(0x9dc)] : _0x5e2193(0x7de); } else _0x2fff4f[_0x5e2193(0x7c9)][_0x5e2193(0x458)] = _0x5e2193(0x678), _0x57c29b['style'][_0x5e2193(0x7e3)] = _0x5e2193(0x4b4); } _0x57c29b[_0x5e2193(0x7c9)][_0x5e2193(0x458)] = _0x5e2193(0x1c1); } catch (_0x15f6e3) { console[_0x5e2193(0x214)]('加载徽章图片失败', _0x15f6e3); } } } async function _0xb2a6c7() { const _0x1e3173 = _0x34dc25; if (_0x1e3173(0x6b3) !== _0x1e3173(0x2f5)) { const _0x500678 = document[_0x1e3173(0x61b)](_0x1e3173(0x272)), _0x40a55d = document[_0x1e3173(0x61b)]('card-image'), _0x4c4109 = document['getElementById'](_0x1e3173(0x361)), _0x335abf = document[_0x1e3173(0x61b)](_0x1e3173(0x70e)); try { let _0x1bce91 = await _0x2b4d72(_0x1e3173(0x729)); if (_0x1bce91) { if (_0x1e3173(0x92e) === 'LeLAL') { const _0x39703d = _0x53bbda['characterLastScripts'][_0x375f7]; _0x39703d && _0x39703d[_0x1e3173(0xa1e)] > 0x0 && (_0x2ed6fc = _0x39703d['at'](-0x1)); } else _0x40a55d['src'] = URL[_0x1e3173(0xa4f)](_0x1bce91), _0x40a55d['style']['display'] = _0x1e3173(0x1c1), _0x500678['style'][_0x1e3173(0x7e3)] = 'none', _0x500678['style'][_0x1e3173(0x6a7)] = _0x1e3173(0x39e); } else _0x40a55d['style'][_0x1e3173(0x458)] = _0x1e3173(0x678), _0x500678[_0x1e3173(0x7c9)][_0x1e3173(0x7e3)] = _0x1e3173(0x4b4), _0x500678[_0x1e3173(0x7c9)]['background'] = _0x1e3173(0x282); _0x500678[_0x1e3173(0x7c9)][_0x1e3173(0x458)] = _0x1e3173(0x1c1); let _0x230be2 = await _0x2b4d72(_0x1e3173(0x539)); if (_0x230be2) { if ('rsnST' === _0x1e3173(0x2f6)) _0x335abf[_0x1e3173(0x1b2)] = URL['createObjectURL'](_0x230be2), _0x335abf['style'][_0x1e3173(0x458)] = _0x1e3173(0x1c1), _0x4c4109[_0x1e3173(0x7c9)][_0x1e3173(0x7e3)] = _0x1e3173(0x678), _0x4c4109['style']['background'] = _0x1e3173(0x39e); else { const _0x5efc7d = _0x52f7dd[0x0], _0x36bd6 = new _0xd5de19(_0x5efc7d[_0x1e3173(0x191)] + _0x1e3173(0xa55)), _0x331f04 = _0x36bd6 - _0x456d1a, _0x2bd89e = _0x30ca27[_0x1e3173(0x344)](_0x331f04 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5f9178[_0x1e3173(0x6c7)] = _0x1e3173(0xb1e) + _0x5efc7d[_0x1e3173(0x8f0)] + '」', _0x1782db[_0x1e3173(0x72d)] = '<span>' + _0x2bd89e + _0x1e3173(0xb4d); } } else _0x335abf[_0x1e3173(0x7c9)][_0x1e3173(0x458)] = _0x1e3173(0x678), _0x4c4109['style'][_0x1e3173(0x7e3)] = '2px\x20dashed\x20var(--border-color)', _0x4c4109['style']['background'] = _0x1e3173(0x282); _0x4c4109[_0x1e3173(0x7c9)][_0x1e3173(0x458)] = 'block'; } catch (_0x5f8ab9) { console[_0x1e3173(0x214)](_0x1e3173(0x1cc), _0x5f8ab9); } } else _0x5b6e5f[_0x1e3173(0x1ce)](_0xc3575f); } async function _0xb2a6c7() { const _0x1f77e2 = _0x34dc25; if (_0x1f77e2(0x537) !== 'jOzWb') { if (!_0x440f4e[_0x1f77e2(0x7f0)] || _0x5c7b41[_0x1f77e2(0x7f0)]['length'] === 0x0) { _0x5800af[_0x1f77e2(0x214)](_0x1f77e2(0x586)); return; } const _0x51a177 = _0x10fcf0['friendCircles'][0x0]; if (_0x51a177[_0x1f77e2(0x528)][_0x1f77e2(0xa1e)] < 0x2) { _0x337583['error'](_0x1f77e2(0xa32) + _0x51a177[_0x1f77e2(0x9dc)] + _0x1f77e2(0x7c0)); return; } const _0x4052d2 = { 'id': _0x1f77e2(0x8c3) + _0x4a059f[_0x1f77e2(0xb3d)](), 'authorType': _0x1f77e2(0x3f6), 'authorId': _0x51a177['memberCharacterIds'][0x0], 'content': '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'timestamp': _0x2f85ea['now'](), 'likes': [_0x51a177[_0x1f77e2(0x528)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x4c0f14[_0x1f77e2(0xb3d)](), 'authorId': _0x51a177[_0x1f77e2(0x528)][0x1], 'content': _0x1f77e2(0xa99) }] }; _0x51a177[_0x1f77e2(0xad3)][_0x1f77e2(0x230)](_0x4052d2), _0x4952e6(), _0x4cdadd[_0x1f77e2(0x777)](_0x1f77e2(0x3ad) + _0x51a177[_0x1f77e2(0x9dc)] + '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'), _0x1d12d9(_0x1f77e2(0x9d3)); } else { const _0x3ae187 = document['getElementById'](_0x1f77e2(0x272)), _0x5b5f36 = document['getElementById'](_0x1f77e2(0x442)); try { if (_0x1f77e2(0x786) !== _0x1f77e2(0x30b)) { let _0x3f51f3 = await _0x2b4d72(_0x1f77e2(0x729)); if (!_0x3f51f3) { const _0x4df6f6 = JSON['parse'](localStorage[_0x1f77e2(0x2f0)](_0x1f77e2(0x8f1)) || '{}'); if (_0x4df6f6['image']) { if ('MpZGw' !== 'MpZGw') { const _0x498a41 = _0x7b6511[_0x1f77e2(0x4f8)]('.typing-indicator'); _0x498a41[_0x1f77e2(0xaa9)](_0xbc8953 => _0xbc8953[_0x1f77e2(0x194)]()); } else console['log'](_0x1f77e2(0x433)), _0x3f51f3 = await _0x30f5c0(_0x4df6f6['image']), await _0x190daf(_0x1f77e2(0x729), _0x3f51f3); } } _0x3f51f3 ? _0x1f77e2(0xb31) !== _0x1f77e2(0xb31) ? _0x1c2fdf = _0x1f77e2(0x500) : (_0x5b5f36[_0x1f77e2(0x1b2)] = URL[_0x1f77e2(0xa4f)](_0x3f51f3), _0x3ae187[_0x1f77e2(0x7c9)][_0x1f77e2(0x458)] = _0x1f77e2(0x1c1)) : _0x3ae187['style']['display'] = _0x1f77e2(0x678); } else _0x29a1dd = _0x191519[_0x1f77e2(0x37c)]; } catch (_0x4af00e) { 'cfMma' !== _0x1f77e2(0x672) ? _0xdf6bc1 = _0x232aba['id'] : console[_0x1f77e2(0x214)](_0x1f77e2(0x1cc), _0x4af00e); } try { let _0x75a3fc = await _0x2b4d72(_0x1f77e2(0x539)); const _0x314f01 = document[_0x1f77e2(0x61b)](_0x1f77e2(0x70e)), _0x1d1de7 = document[_0x1f77e2(0x61b)](_0x1f77e2(0x361)); _0x75a3fc ? _0x1f77e2(0x2e8) === _0x1f77e2(0xa3e) ? (_0x1f8ed7(), _0x2c5b13(![])) : (_0x314f01[_0x1f77e2(0x1b2)] = URL[_0x1f77e2(0xa4f)](_0x75a3fc), _0x1d1de7['style']['display'] = 'block') : _0x1d1de7['style'][_0x1f77e2(0x458)] = _0x1f77e2(0x678); } catch (_0x5f36a2) { if (_0x1f77e2(0x69f) === _0x1f77e2(0x7b2)) { _0x153b6a['activeMeetingScriptQueue'] = [..._0xd6e885], _0x130463[_0x1f77e2(0x6eb)][_0x3b72a0['id']] = [..._0x4d4195], _0x169696(); const _0x442737 = _0x37b0db['map'](_0x211320 => _0x211320[_0x1f77e2(0x34c)] === _0x1f77e2(0x8ee) ? _0x211320[_0x1f77e2(0x8af)] : _0x211320[_0x1f77e2(0x34c)] + ':\x20' + _0x211320[_0x1f77e2(0x8af)])[_0x1f77e2(0x247)]('\x0a\x0a'); _0x3abd1b[_0x1f77e2(0x369)][_0x1f77e2(0x230)]({ 'role': _0x1f77e2(0x725), 'senderId': _0x28201b['id'], 'timestamp': _0x354e6e[_0x1f77e2(0xb3d)](), 'isOffline': !![], 'content': _0x442737 }); } else console[_0x1f77e2(0x214)](_0x1f77e2(0x8b3), _0x5f36a2); } } } _0x55e0bf[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x576972 = _0x34dc25; _0x1ea4a8(), _0xd18e04(_0x576972(0x326), 'home'); }), document['getElementById']('back-to-home-from-user-list')[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x19d), _0x34dc25(0x326))), document[_0x34dc25(0x61b)](_0x34dc25(0xb0a))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x80fd42()), document['getElementById'](_0x34dc25(0xba2))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x424512 = _0x34dc25; if ('PljoU' === _0x424512(0x97f)) _0x1ea4a8(), _0xd18e04('userProfileList', 'userProfile'); else { if (_0x32623d) _0x27b6c9(_0x3dbd1f); const _0x568f23 = _0xc1bd4b[_0x424512(0x6e7)][_0x424512(0x97d)](_0x424512(0x2a8)); if (!_0x568f23) return; const _0xbbe050 = _0x568f23[_0x424512(0x6c3)]['id']; if (!_0xbbe050) return; const _0x5aae75 = () => { _0xcec78b = _0x3b5db8(() => { const _0x24f6e2 = _0x585d; if (_0x37cd58[_0x24f6e2(0x63a)] === _0x24f6e2(0x229)) _0x4142c3[_0x24f6e2(0x3a7)](); _0x358cb0(_0xbbe050); }, 0x320); }, _0x50642d = () => { if (_0x59543c) _0x560b0b(_0x3a2ddf); }; _0x40637b[_0x424512(0x46a)](_0x424512(0x831), _0x50642d, { 'once': !![] }), _0x3c19c0[_0x424512(0x46a)](_0x424512(0x94e), _0x50642d, { 'once': !![] }), _0x40a109[_0x424512(0x46a)](_0x424512(0x445), _0x50642d, { 'once': !![] }), _0x2de6bc[_0x424512(0x46a)](_0x424512(0x7c3), _0x50642d, { 'once': !![] }), _0x5aae75(); } }), document[_0x34dc25(0x61b)]('save-user-profile-button')['addEventListener'](_0x34dc25(0x3cd), _0x76f00d), document['getElementById'](_0x34dc25(0x732))[_0x34dc25(0x46a)]('click', _0x516fe4), document[_0x34dc25(0x61b)]('set-active-user-button')[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x7cae41 = _0x34dc25; if (_0x7cae41(0x667) === 'TfZDH') _0x1ffc34(_0x7cae41(0x336) + _0x2e30c2[_0x7cae41(0x1c9)]); else { const _0x199429 = document[_0x7cae41(0x61b)](_0x7cae41(0xa01))[_0x7cae41(0x21f)]; if (_0x199429) { if (_0x7cae41(0x1db) !== _0x7cae41(0x1db)) { _0x2aeda3[_0x7cae41(0x214)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } else _0x4295e2[_0x7cae41(0x2e4)] = _0x199429, _0x1b6337(), _0x925876(_0x7cae41(0x405)), _0x1ea4a8(), document[_0x7cae41(0x61b)]('set-active-user-button')[_0x7cae41(0x7c9)]['display'] = _0x7cae41(0x678); } } }); function _0x4b57ed(_0x508c20) { const _0x1ff686 = _0x34dc25; if (_0x1ff686(0x398) === _0x1ff686(0x398)) { const _0x41b1d4 = _0x4295e2[_0x1ff686(0x7af)]['find'](_0x18d8f3 => _0x18d8f3['id'] === _0x508c20), _0x44f5d9 = _0x41b1d4?.[_0x1ff686(0x4b1)]; let _0x35cf1a = _0x4295e2[_0x1ff686(0x59b)][_0x1ff686(0x7e6)](_0x429883 => _0x429883['id'] === _0x44f5d9); return !_0x35cf1a && (_0x1ff686(0x8b1) !== _0x1ff686(0x936) ? _0x35cf1a = _0x4295e2[_0x1ff686(0x59b)][_0x1ff686(0x7e6)](_0x52c4a3 => _0x52c4a3['id'] === _0x4295e2[_0x1ff686(0x2e4)]) || _0x4295e2[_0x1ff686(0x59b)][0x0] : _0x5ba4f0[_0x1ff686(0x214)](_0x1ff686(0x6a6), _0x302dd3)), _0x35cf1a || { 'name': '用户', 'avatar': _0x17eab7, 'persona': '' }; } else _0x102201[_0x1ff686(0x214)](_0x1ff686(0xac6) + _0x5824c7['id'] + _0x1ff686(0x3b6), _0x5dc352), _0x3be535[_0x1ff686(0x1b2)] = _0x5bad58[_0x1ff686(0x1c4)] || _0xde0268; } function _0x433142(_0x2d7e1f) { const _0x1cda35 = _0x34dc25, _0x530976 = document[_0x1cda35(0x61b)](_0x2d7e1f); _0x530976[_0x1cda35(0x72d)] = '', _0x4295e2[_0x1cda35(0x59b)][_0x1cda35(0xaa9)](_0xed6d2d => { const _0x2ed8d6 = _0x1cda35, _0x1f9591 = document['createElement'](_0x2ed8d6(0x9ac)); _0x1f9591['value'] = _0xed6d2d['id'], _0x1f9591[_0x2ed8d6(0x6c7)] = _0xed6d2d[_0x2ed8d6(0x9dc)], _0x530976['appendChild'](_0x1f9591); }); } function _0x2183bf(_0x198484) { const _0x18b1a4 = _0x34dc25; if ('JIWNG' !== 'JIWNG') { if (!_0x5778a2[_0x18b1a4(0x9bd)](_0x3f5d77)) return '<p>格式错误</p>'; if (_0xe874a3['length'] === 0x0) return _0x18b1a4(0x604); return _0x26d4dc[_0x18b1a4(0x96f)]((_0x54e3a8, _0x3c5848) => new _0x287b1f(_0x3c5848[_0x18b1a4(0xb60)]) - new _0x273e56(_0x54e3a8['last_edited'])), _0x2d192f[_0x18b1a4(0x959)](_0x4dc0b4 => _0x18b1a4(0x8e4) + (_0x4dc0b4['title'] || _0x18b1a4(0x1ec)) + _0x18b1a4(0xb52) + (_0x4dc0b4[_0x18b1a4(0x8f0)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20' + (_0x4dc0b4[_0x18b1a4(0xb60)] || '') + _0x18b1a4(0x293))[_0x18b1a4(0x247)](''); } else { const _0x287cc8 = _0x5aa3d9(_0x198484), _0x4bd33b = document['getElementById'](_0x18b1a4(0x1c6)); _0x4bd33b[_0x18b1a4(0x7c9)][_0x18b1a4(0x54b)] = ''; let _0x2e2908 = document[_0x18b1a4(0x61b)](_0x18b1a4(0xb57) + _0x198484); if (_0x2e2908) _0x2e2908[_0x18b1a4(0x72d)] = ''; if (!_0x287cc8) return; _0x287cc8[_0x18b1a4(0x64e)] && (_0x4bd33b[_0x18b1a4(0x7c9)][_0x18b1a4(0x54b)] = _0x18b1a4(0x3bd) + _0x287cc8[_0x18b1a4(0x64e)] + '\x27)', _0x4bd33b[_0x18b1a4(0x7c9)][_0x18b1a4(0x2ff)] = _0x18b1a4(0x211), _0x4bd33b[_0x18b1a4(0x7c9)][_0x18b1a4(0x9b1)] = _0x18b1a4(0x231)); if (_0x287cc8[_0x18b1a4(0x697)]) { if (_0x18b1a4(0x64c) === _0x18b1a4(0x64c)) { let _0x61cfc8 = document[_0x18b1a4(0x61b)](_0x18b1a4(0xb57) + _0x287cc8['id']); if (!_0x61cfc8) { if (_0x18b1a4(0x9f7) === 'tLCMI') { _0x2b52ab[_0x18b1a4(0x21f)] = ''; return; } else _0x61cfc8 = document[_0x18b1a4(0x6a8)](_0x18b1a4(0x7c9)), _0x61cfc8['id'] = _0x18b1a4(0xb57) + _0x287cc8['id'], document[_0x18b1a4(0x757)][_0x18b1a4(0x1ce)](_0x61cfc8); } const _0x12bf4d = _0x287cc8[_0x18b1a4(0x697)], _0x400716 = _0x12bf4d[_0x18b1a4(0x1dc)](/\.bubble\.sent/g, _0x18b1a4(0x84c) + _0x287cc8['id'] + '.message.user')['replace'](/\.bubble\.received/g, '.bubble-' + _0x287cc8['id'] + _0x18b1a4(0x41c)); _0x61cfc8[_0x18b1a4(0x72d)] = _0x400716; } else _0x13f067(), _0x321261(); } } } function _0x5996dd() { const _0x33728e = _0x34dc25, _0x38e4b8 = document[_0x33728e(0x61b)](_0x33728e(0x699)); _0x38e4b8[_0x33728e(0x72d)] = ''; const _0x570c4a = _0x1c7df1 => { const _0x50ed3c = _0x33728e; _0x4295e2[_0x50ed3c(0xb53)][_0x1c7df1] = null; if (_0x1c7df1 === 'image') _0x4295e2['pendingPostAttachments']['imageId'] = null; _0x5996dd(); }, _0x564079 = _0x4295e2[_0x33728e(0xb53)][_0x33728e(0x295)], _0x2c088f = _0x4295e2[_0x33728e(0xb53)][_0x33728e(0x67f)]; if (_0x564079) { if ('aFyOk' !== _0x33728e(0x75f)) { const _0x518df3 = document['createElement'](_0x33728e(0xa9f)); _0x518df3[_0x33728e(0x6e1)] = 'preview-item', _0x518df3[_0x33728e(0x72d)] = _0x33728e(0x27c), _0x518df3[_0x33728e(0x76d)](_0x33728e(0x8d5))['onclick'] = () => _0x570c4a(_0x33728e(0x37c)), _0x38e4b8['appendChild'](_0x518df3), _0x2b4d72(_0x564079)[_0x33728e(0xb30)](_0x3c0ecf => { const _0x2e70da = _0x33728e; if (_0x2e70da(0xa48) === _0x2e70da(0xa48)) { const _0x41a173 = document[_0x2e70da(0x61b)]('pending-post-image-preview'); _0x41a173 && _0x3c0ecf && (_0x41a173[_0x2e70da(0x1b2)] = URL['createObjectURL'](_0x3c0ecf)); } else _0xac6039[_0x2e70da(0x7c9)][_0x2e70da(0xa1f)] = ''; }); } else _0x3c8679 += '-\x20' + _0xe8ab00[_0x33728e(0x1c5)](_0xec63f8) + '\x0a'; } if (_0x2c088f) { const _0x7b82f8 = document['createElement'](_0x33728e(0xa9f)); _0x7b82f8['className'] = _0x33728e(0x720), _0x7b82f8[_0x33728e(0x72d)] = _0x33728e(0xb91) + (_0x2c088f[_0x33728e(0x382)] || _0x2fd48c) + _0x33728e(0x617) + _0x2c088f[_0x33728e(0x3a6)] + _0x33728e(0x80e) + _0x2c088f[_0x33728e(0xa5b)] + _0x33728e(0x92b), _0x7b82f8[_0x33728e(0x76d)]('.remove-attachment-btn')['onclick'] = () => _0x570c4a(_0x33728e(0x67f)), _0x38e4b8[_0x33728e(0x1ce)](_0x7b82f8); } } async function _0x43d09b(_0xe66d82) { const _0x180807 = _0x34dc25, _0x3aa603 = _0x4295e2[_0x180807(0x7f0)][_0x180807(0x7e6)](_0x4ceb0a => _0x4ceb0a['id'] === _0x4295e2[_0x180807(0xb77)]); if (!_0x3aa603) return; _0x48b9ad(!![], '大家正在赶来回复...'), _0x4295e2[_0x180807(0x2ac)] = !![]; try { const _0x59de2e = _0x3aa603[_0x180807(0x528)][_0x180807(0x959)](_0x57b93a => _0x5aa3d9(_0x57b93a))[_0x180807(0x695)](Boolean), _0x2833a1 = _0x523643(), _0x4e5fb4 = _0x59de2e[_0x180807(0x959)](_0x49bf55 => { const _0x4a966d = _0x180807, { omniText: _0x2792f7 } = _0x2442b3(_0x49bf55['id'], null), _0x495859 = _0x49199f(_0x49bf55['id']), _0x31da5a = _0x49bf55[_0x4a966d(0x473)] && _0x49bf55[_0x4a966d(0x473)]['length'] > 0x0 ? _0x4a966d(0xb22) + _0x49bf55[_0x4a966d(0x9dc)] + '的个人专属世界观设定\x0a' + _0x49bf55[_0x4a966d(0x473)][_0x4a966d(0x959)](_0x5c4db2 => _0x4295e2[_0x4a966d(0x496)][_0x4a966d(0x7e6)](_0x3facdb => _0x3facdb['id'] === _0x5c4db2))[_0x4a966d(0x695)](Boolean)[_0x4a966d(0x959)](_0x3edbe4 => _0x4a966d(0xb63) + _0x3edbe4[_0x4a966d(0x9dc)] + '\x0a' + _0x3edbe4[_0x4a966d(0x8f0)])['join']('') : ''; return _0x4a966d(0x9f8) + _0x49bf55[_0x4a966d(0x9dc)] + ',\x20ID:\x20' + _0x49bf55['id'] + '\x0a\x20\x20人设:\x20' + _0x49bf55['persona'] + _0x4a966d(0x97c) + _0x2792f7 + '\x0a' + _0x495859 + '\x0a' + _0x31da5a; })[_0x180807(0x247)]('\x0a\x0a'), _0x4188c7 = _0x5ab3f1(_0xe66d82['authorId']) || { 'name': '用户' }, _0x3d2e4a = _0x4188c7[_0x180807(0xb70)] ? '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20' + _0x4188c7[_0x180807(0x9dc)] + _0x180807(0x8ec) + _0x4188c7[_0x180807(0xb70)] + '\x0a' : ''; let _0x400c24 = null; if (_0xe66d82[_0x180807(0x37c)]) { if (_0x180807(0x6de) === _0x180807(0x526)) { _0x19df6d && _0x3c2d54[_0x180807(0x230)](_0x4eab87); _0x37a893 = {}; const _0x2a6948 = _0x46a117[_0x180807(0x705)](0x2), _0x4d5884 = _0x2a6948[_0x180807(0x692)](/:\s(.+)/); if (_0x4d5884['length'] > 0x1) { const _0x1c4f9b = _0x4d5884[0x0][_0x180807(0x2c7)](), _0x4eb4fc = _0x4d5884[0x1]['trim']()[_0x180807(0x1dc)](/^"|"$/g, ''); _0x428c60[_0x1c4f9b] = _0x4eb4fc; } } else _0x400c24 = _0xe66d82[_0x180807(0x37c)]; } else { if (_0xe66d82['imageId']) try { const _0x5e5d0a = await _0x2b4d72(_0xe66d82['imageId']); _0x5e5d0a && (_0x180807(0x7a4) === 'LRADR' ? (_0x25e817[_0x180807(0x904)] = _0x180540[_0x180807(0x904)], _0x36f9f2[_0x180807(0x777)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.')) : _0x400c24 = await _0x512f2f(_0x5e5d0a)); } catch (_0x237df7) { console[_0x180807(0x214)]('在准备动态回复时，读取图片失败:', _0x237df7); } } let _0x1893c4 = _0x4188c7['name'] + _0x180807(0x1a4) + _0xe66d82[_0x180807(0x8f0)] + '”'; _0x400c24 && (_0x1893c4 += _0x180807(0x550)); _0xe66d82['type'] === 'music' && (_0x1893c4 += '\x20[并分享了歌曲:\x20' + _0xe66d82[_0x180807(0x3a6)] + _0x180807(0x4df) + _0xe66d82['artist'] + ']'); const _0x1cc290 = '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a' + _0x4e5fb4 + '\x0a\x0a' + _0x3d2e4a + '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a' + _0x2833a1 + '\x0a\x0a#\x20用户的动态\x0a' + _0x1893c4 + _0x180807(0x1f0), _0xe94196 = [{ 'role': _0x180807(0x4f2), 'content': _0x1cc290 }], _0x455637 = { 'role': 'user', 'content': '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。' }; _0x400c24 && ('tNMQt' === _0x180807(0x7b3) ? _0x455637[_0x180807(0x37c)] = _0x400c24 : (_0x19fb55[_0x180807(0x7c9)]['display'] = _0x180807(0x58f), _0x2afeb6(() => _0x3753b3[_0x180807(0x1f5)][_0x180807(0xaf2)]('show'), 0xa))); _0xe94196['push'](_0x455637); const _0x45de1f = await _0x110c3c(_0xe94196, { 'json': !![] }), _0x280d80 = _0x45de1f[_0x180807(0x4ed)](/({[\s\S]*})/); if (!_0x280d80) throw new Error('AI未能返回有效的JSON对象。'); const _0x2f6e61 = JSON[_0x180807(0xb4e)](_0x280d80[0x1]), _0x4c0a54 = _0x3aa603['posts'][_0x180807(0x7e6)](_0x270fc9 => _0x270fc9['id'] === _0xe66d82['id']); _0x4c0a54 && (_0x4c0a54['likes'] = _0x2f6e61[_0x180807(0x805)] || [], _0x4c0a54[_0x180807(0xaee)] = (_0x2f6e61[_0x180807(0xaee)] || [])[_0x180807(0x959)]((_0x2091f2, _0x1ade45) => ({ ..._0x2091f2, 'commentId': 'c_' + _0xe66d82[_0x180807(0x6aa)] + '_' + _0x1ade45 })), _0x1b6337(), _0x17f944()); } catch (_0x575b58) { console[_0x180807(0x214)](_0x180807(0x40c), _0x575b58), _0x925876(_0x180807(0x5a6)); } finally { if ('QBsLq' === 'lSWgV') { const _0x1f06ff = _0x53d123['sender'] === 'character', _0x3abff9 = _0x1f06ff ? _0x20fa04 ? _0x2ae19e[0x0] : '?' : _0x412fd4 ? _0xaeee7c[0x0] : '?'; _0x139896 += _0x180807(0x7ff) + (_0x1f06ff ? _0x180807(0x742) : 'ai') + _0x180807(0x891) + (!_0x1f06ff ? '<div\x20class=\x22snoop-avatar\x22>' + _0x3abff9 + _0x180807(0x300) : '') + _0x180807(0xb4c) + (_0x1f06ff ? _0x180807(0x742) : 'ai') + _0x180807(0xab7) + _0x41344d['content'] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x1f06ff ? '<div\x20class=\x22snoop-avatar\x22>' + _0x3abff9 + _0x180807(0x300) : '') + _0x180807(0x1d0); } else _0x48b9ad(![]), _0x4295e2[_0x180807(0x2ac)] = ![]; } } function _0x425ddc() { const _0xee6cb4 = _0x34dc25, _0x559a00 = _0x4295e2[_0xee6cb4(0x7f0)][_0xee6cb4(0x7e6)](_0x210475 => _0x210475['id'] === _0x4295e2[_0xee6cb4(0xb77)]), _0x534c2a = _0x559a00?.['boundUserProfileId']; let _0x55ee2a = _0x4295e2[_0xee6cb4(0x59b)][_0xee6cb4(0x7e6)](_0x136d8f => _0x136d8f['id'] === _0x534c2a); !_0x55ee2a && (_0x55ee2a = _0x4295e2['userProfiles']['find'](_0xfa4ce9 => _0xfa4ce9['id'] === _0x4295e2[_0xee6cb4(0x2e4)])), !_0x55ee2a && (_0x55ee2a = _0x4295e2[_0xee6cb4(0x59b)][0x0]), _0x55ee2a && (document[_0xee6cb4(0x61b)](_0xee6cb4(0x1ef))[_0xee6cb4(0x1b2)] = _0x55ee2a[_0xee6cb4(0x1c4)] || _0x17eab7); } function _0x13a14c(_0x14c755) { const _0x2a53be = _0x34dc25; let _0x53c9b5 = 0x0, _0x39851b = 0x0, _0x5713e0 = 0x0; if (_0x14c755[_0x2a53be(0xa1e)] == 0x4) { if (_0x2a53be(0x847) !== _0x2a53be(0x4f5)) _0x53c9b5 = '0x' + _0x14c755[0x1] + _0x14c755[0x1], _0x39851b = '0x' + _0x14c755[0x2] + _0x14c755[0x2], _0x5713e0 = '0x' + _0x14c755[0x3] + _0x14c755[0x3]; else { _0x175721(_0x2a53be(0x55f)); return; } } else _0x14c755[_0x2a53be(0xa1e)] == 0x7 && (_0x53c9b5 = '0x' + _0x14c755[0x1] + _0x14c755[0x2], _0x39851b = '0x' + _0x14c755[0x3] + _0x14c755[0x4], _0x5713e0 = '0x' + _0x14c755[0x5] + _0x14c755[0x6]); _0x53c9b5 /= 0xff, _0x39851b /= 0xff, _0x5713e0 /= 0xff; let _0x3ee964 = Math[_0x2a53be(0x33d)](_0x53c9b5, _0x39851b, _0x5713e0), _0x5c6b3f = Math[_0x2a53be(0x460)](_0x53c9b5, _0x39851b, _0x5713e0), _0x14c3ae = _0x5c6b3f - _0x3ee964, _0x324e8b = 0x0, _0x65c105 = 0x0, _0x2a8b02 = 0x0; if (_0x14c3ae == 0x0) _0x324e8b = 0x0; else { if (_0x5c6b3f == _0x53c9b5) _0x324e8b = (_0x39851b - _0x5713e0) / _0x14c3ae % 0x6; else { if (_0x5c6b3f == _0x39851b) _0x324e8b = (_0x5713e0 - _0x53c9b5) / _0x14c3ae + 0x2; else _0x324e8b = (_0x53c9b5 - _0x39851b) / _0x14c3ae + 0x4; } } _0x324e8b = Math[_0x2a53be(0x198)](_0x324e8b * 0x3c); if (_0x324e8b < 0x0) _0x324e8b += 0x168; return _0x2a8b02 = (_0x5c6b3f + _0x3ee964) / 0x2, _0x65c105 = _0x14c3ae == 0x0 ? 0x0 : _0x14c3ae / (0x1 - Math[_0x2a53be(0x62a)](0x2 * _0x2a8b02 - 0x1)), _0x65c105 = +(_0x65c105 * 0x64)[_0x2a53be(0x1ba)](0x1), _0x2a8b02 = +(_0x2a8b02 * 0x64)[_0x2a53be(0x1ba)](0x1), { 'h': _0x324e8b, 's': _0x65c105, 'l': _0x2a8b02 }; } function _0x683f50() { const _0x19746e = _0x34dc25; if (_0x19746e(0x487) === 'kZYVt') { const _0x17ef0a = (_0x2b3a65, _0x326f0a, _0x4a310d) => { const _0x32824d = _0x19746e; if (_0x32824d(0x364) !== _0x32824d(0x364)) _0x46b371 = _0x571621[_0x32824d(0x1e8)] || ''; else { const _0xdca423 = document[_0x32824d(0x61b)](_0x2b3a65); if (!_0xdca423) return; let _0x3e8e87 = null; try { if ('fWyPA' === _0x32824d(0x863)) { _0x54aa65[_0x32824d(0x214)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20' + _0x3e5900['activeChatId'] + _0x32824d(0x50c), _0xee7ba8); try { _0x25b63c[_0x32824d(0x662)](_0x32824d(0x1a9) + _0xb93aea[_0x32824d(0x845)]); } catch (_0x324c38) { _0x54cffb[_0x32824d(0x214)](_0x32824d(0x19c), _0x324c38); } } else _0x3e8e87 = JSON[_0x32824d(0xb4e)](localStorage['getItem'](_0x326f0a) || '{}'); } catch { _0x3e8e87 = {}; } _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x38c)] = _0x32824d(0x971), _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x99f)] = '', _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x5d5)] = '', _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x709)] = '', _0xdca423[_0x32824d(0x7c9)][_0x32824d(0xa97)] = '', _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x827)] = ''; if (typeof _0x3e8e87['top'] === _0x32824d(0xa2f) && typeof _0x3e8e87[_0x32824d(0x5d5)] === _0x32824d(0xa2f)) _0xdca423['style'][_0x32824d(0x99f)] = _0x3e8e87[_0x32824d(0x99f)] + '%', _0xdca423[_0x32824d(0x7c9)][_0x32824d(0x5d5)] = _0x3e8e87['left'] + '%'; else { if (_0x32824d(0x6bb) === _0x32824d(0x3a4)) { if (_0x55a263 === null) return; const _0x5925f4 = _0xb24c3d['conversationHistory'][_0x1e2f85]; if (!_0x5925f4) return; const _0x568443 = _0x3a6ebd(); let _0x28c641 = '未知'; if (_0x5925f4[_0x32824d(0x55e)] === 'user') _0x28c641 = _0x306ea8['userProfile'][_0x32824d(0x9dc)] || '我'; else { const _0x12e71a = _0x5925f4[_0x32824d(0x428)] || _0x568443?.[_0x32824d(0x5c9)][0x0], _0xf71951 = _0x96c4d3(_0x12e71a); _0x28c641 = _0xf71951 ? _0xf71951[_0x32824d(0x9dc)] : '角色'; } let _0x7e08ac = _0x5925f4[_0x32824d(0x8f0)] || ''; if (_0x5925f4['displayUrl']) _0x7e08ac = _0x32824d(0x6ca); if (_0x5925f4['image']) _0x7e08ac = _0x32824d(0x7dd); if (_0x7e08ac[_0x32824d(0xa1e)] > 0x32) _0x7e08ac = _0x7e08ac[_0x32824d(0x705)](0x0, 0x32) + _0x32824d(0x9ec); _0x400ece[_0x32824d(0x9ce)] = { 'sender': _0x28c641, 'content': _0x7e08ac }, _0x41f9c6(), _0x42eef3(), _0x10aade[_0x32824d(0x5a1)](); } else for (const _0x4802d0 in _0x4a310d) { if (_0x32824d(0x8ea) === _0x32824d(0x8ea)) _0xdca423[_0x32824d(0x7c9)][_0x4802d0] = _0x4a310d[_0x4802d0]; else { const _0x2f9b63 = _0x1d9ef3[0x0]['trim'](), _0x405a4e = _0xccfd16[0x1][_0x32824d(0x2c7)]()[_0x32824d(0x1dc)](/^"|"$/g, ''); _0x48ac54[_0x2f9b63] = _0x405a4e; } } } } }; _0x17ef0a(_0x19746e(0x824), _0x19746e(0x18f), { 'top': _0x19746e(0x715), 'left': _0x19746e(0x95d), 'transform': _0x19746e(0xae3) }), _0x17ef0a('app-wallpaper', _0x19746e(0x3c4), { 'top': _0x19746e(0x6ab), 'right': '4%' }), _0x17ef0a('app-user-profiles', 'appIconPosition_app-user-profiles', { 'top': '20%', 'right': _0x19746e(0x960) }), _0x17ef0a(_0x19746e(0x227), _0x19746e(0x7d1), { 'top': '8%', 'right': _0x19746e(0x960) }), _0x17ef0a(_0x19746e(0x9b4), _0x19746e(0x4de), { 'top': '8%', 'right': '4%' }), _0x17ef0a(_0x19746e(0x338), _0x19746e(0xa53), { 'top': _0x19746e(0x502), 'left': '5%' }), _0x17ef0a('app-diary', _0x19746e(0xb20), { 'top': _0x19746e(0x57f), 'left': _0x19746e(0x4b6) }), _0x17ef0a(_0x19746e(0x42f), _0x19746e(0x8e5), { 'top': '71%', 'left': '5%' }), _0x17ef0a(_0x19746e(0xb4a), 'appIconPosition_app-accounting', { 'top': _0x19746e(0x502), 'left': _0x19746e(0x4b6) }), _0x17ef0a(_0x19746e(0xb8a), _0x19746e(0x693), { 'top': _0x19746e(0xb54), 'right': '5%' }), _0x17ef0a(_0x19746e(0x361), _0x19746e(0x363), { 'top': '8%', 'left': '5%' }); const _0x12c700 = document[_0x19746e(0x61b)](_0x19746e(0x272)); _0x12c700 && (_0x12c700[_0x19746e(0x7c9)][_0x19746e(0x38c)] = _0x19746e(0x971), _0x12c700[_0x19746e(0x7c9)][_0x19746e(0x99f)] = _0x19746e(0x731), _0x12c700['style'][_0x19746e(0x5d5)] = _0x19746e(0x95d), _0x12c700[_0x19746e(0x7c9)][_0x19746e(0x827)] = _0x19746e(0xae3), _0x12c700['style'][_0x19746e(0x458)] = _0x19746e(0x1c1)); const _0x367921 = document[_0x19746e(0x61b)]('music-widget'); _0x367921 && (_0x19746e(0x973) !== 'yqDzl' ? (_0x367921[_0x19746e(0x7c9)]['position'] = _0x19746e(0x971), _0x367921[_0x19746e(0x7c9)]['top'] = _0x19746e(0x19e), _0x367921[_0x19746e(0x7c9)]['left'] = '50%', _0x367921['style'][_0x19746e(0x827)] = 'translateX(-50%)', _0x367921[_0x19746e(0x7c9)][_0x19746e(0x458)] = _0x19746e(0x3f1)) : _0x32796f(_0x19746e(0x54c) + _0xe44b06[_0x19746e(0x1c9)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1')); } else _0x5f6758[_0x19746e(0x1f5)]['remove'](_0x19746e(0xa03)); } function _0x318f2f() { const _0x7162b9 = _0x34dc25, _0x229249 = document['getElementById'](_0x7162b9(0x4ca)); _0x229249[_0x7162b9(0x72d)] = ''; const _0x2d398 = document[_0x7162b9(0x4f8)]('.app-icon'); _0x2d398[_0x7162b9(0xaa9)](_0x37d1d0 => { const _0x485838 = _0x7162b9, _0x5062b6 = _0x37d1d0['id'], _0x370809 = _0x37d1d0[_0x485838(0x76d)](_0x485838(0x302))[_0x485838(0x6c7)], _0x40604d = 'customIcon_' + _0x5062b6, _0x2cf98d = localStorage[_0x485838(0x2f0)](_0x40604d), _0x186077 = document[_0x485838(0x6a8)]('div'); _0x186077[_0x485838(0x6e1)] = _0x485838(0x2b2), _0x186077[_0x485838(0x7c9)][_0x485838(0x5ce)] = _0x485838(0x66a), _0x186077[_0x485838(0x72d)] = _0x485838(0x22e) + _0x5062b6 + _0x485838(0x75a) + (_0x2cf98d || _0x485838(0x32e)) + _0x485838(0x6dc) + _0x370809 + _0x485838(0x5e3) + _0x5062b6 + '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_' + _0x5062b6 + _0x485838(0x2f9) + _0x40604d + _0x485838(0x96d), _0x229249[_0x485838(0x1ce)](_0x186077); const _0x1ba19d = document[_0x485838(0x61b)](_0x485838(0x964) + _0x5062b6); _0x1ba19d[_0x485838(0x46a)]('change', async _0x4f6d10 => { const _0x38b5d9 = _0x485838; if ('cQrXL' !== _0x38b5d9(0x196)) { const _0x9f12a1 = _0x4f6d10[_0x38b5d9(0x6e7)][_0x38b5d9(0xaa5)][0x0]; if (!_0x9f12a1) return; try { if (_0x38b5d9(0xa25) !== _0x38b5d9(0xa25)) { const _0x2568bb = _0x24653d[_0x38b5d9(0x7f0)]['find'](_0x1a44f1 => _0x1a44f1['id'] === _0x100ca7[_0x38b5d9(0xb77)]), _0x1554a0 = _0x2568bb ? _0x2568bb[_0x38b5d9(0xad3)] : []; if (!_0x1554a0 || _0x1554a0['length'] === 0x0) return ''; const _0xfbc2c5 = _0x1554a0[_0x38b5d9(0xae6)](0x0, 0x5), _0x520564 = _0xfbc2c5[_0x38b5d9(0x959)](_0x5a1a5d => { const _0x113ee2 = _0x38b5d9, _0x18cb47 = _0x4f33be(_0x5a1a5d[_0x113ee2(0x30c)]) || { 'name': '未知' }; let _0x36329d = '-\x20[动态]\x20' + _0x18cb47[_0x113ee2(0x9dc)] + '\x20说：“' + (_0x5a1a5d[_0x113ee2(0x65a)] || _0x5a1a5d[_0x113ee2(0x8f0)]) + '”'; return _0x5a1a5d[_0x113ee2(0x63a)] === _0x113ee2(0x67f) && (_0x36329d += '\x20(分享了歌曲:\x20' + _0x5a1a5d[_0x113ee2(0x3a6)] + '\x20-\x20' + _0x5a1a5d[_0x113ee2(0xa5b)] + ')'), _0x36329d; }); return _0x38b5d9(0x6da) + _0x520564[_0x38b5d9(0x247)]('\x0a'); } else { const _0x3edfb5 = await _0x5780c8(_0x9f12a1); localStorage[_0x38b5d9(0x783)](_0x40604d, _0x3edfb5), document[_0x38b5d9(0x61b)](_0x38b5d9(0x1ea) + _0x5062b6)[_0x38b5d9(0x1b2)] = _0x3edfb5, _0x1d7793(); } } catch (_0x450038) { _0x925876('图标处理失败:\x20' + _0x450038[_0x38b5d9(0x1c9)]); } } else { const _0x31ef4e = _0xd420bf(_0x167ff1[_0x38b5d9(0x845)]); _0x1088c7 = _0x31ef4e[_0x38b5d9(0x1c4)] || _0x13d587; } }); }); } function _0x1d7793() { const _0x2084e1 = _0x34dc25, _0x517ff5 = document[_0x2084e1(0x4f8)]('.app-icon'); _0x517ff5[_0x2084e1(0xaa9)](_0xd3b8dc => { const _0x304361 = _0x2084e1, _0x2aa6f6 = _0xd3b8dc['id'], _0x4d882a = _0x304361(0x3c1) + _0x2aa6f6, _0x5f2517 = localStorage[_0x304361(0x2f0)](_0x4d882a), _0x56ec7d = _0xd3b8dc[_0x304361(0x76d)](_0x304361(0x59a)); if (_0x5f2517) _0x56ec7d[_0x304361(0x72d)] = '<img\x20src=\x22' + _0x5f2517 + _0x304361(0x585); else { const _0x67676e = document[_0x304361(0x76d)](_0x304361(0x6e3) + _0x2aa6f6 + _0x304361(0x758) + _0x2aa6f6 + _0x304361(0xa94))?.[_0x304361(0x72d)]; _0x67676e && ('cdUXk' !== _0x304361(0x8fc) ? _0x56ec7d[_0x304361(0x72d)] = _0x67676e : _0x104c26('图片预览失败:\x20' + _0x1ab737['message'])); } }); } function _0xa77536() { const _0x333ac7 = _0x34dc25, _0x3d75d2 = _0x4295e2[_0x333ac7(0x7f0)]['find'](_0x381c2b => _0x381c2b['id'] === _0x4295e2[_0x333ac7(0xb77)]), _0x4accd3 = _0x33b638(); let _0x11d9a = []; if (_0x3d75d2 && _0x3d75d2['posts']) { const _0x4d19d3 = _0x3d75d2[_0x333ac7(0xad3)]['filter'](_0x2aa3ea => _0x2aa3ea['type'] === _0x333ac7(0x67f) && _0x2aa3ea[_0x333ac7(0x65e)])['map'](_0x214815 => ({ ..._0x214815, 'source': 'feed' })); _0x11d9a['push'](..._0x4d19d3); } if (_0x4accd3 && _0x4295e2['conversationHistory']) { const _0x128165 = _0x4295e2[_0x333ac7(0x369)]['filter'](_0x350dd8 => _0x350dd8[_0x333ac7(0x63a)] === _0x333ac7(0x67f) && _0x350dd8['playableUrl'])['map'](_0x5cdea4 => ({ ..._0x5cdea4, 'source': 'chat' })); _0x11d9a['push'](..._0x128165); } const _0x5183af = Array[_0x333ac7(0x468)](new Map(_0x11d9a['map'](_0x4be7bf => [_0x4be7bf['playableUrl'], _0x4be7bf]))['values']()); _0x4295e2[_0x333ac7(0x734)] = _0x5183af[_0x333ac7(0x96f)]((_0x10b1ad, _0x267461) => _0x267461[_0x333ac7(0x6aa)] - _0x10b1ad['timestamp']); } function _0x23738e(_0xbb8f64) { const _0x46ae93 = _0x34dc25; if (_0x46ae93(0x4fd) === _0x46ae93(0x4fd)) { if (_0xbb8f64 < 0x0 || _0xbb8f64 >= _0x1c6e37[_0x46ae93(0xa1e)]) return; _0x4483d3 = _0xbb8f64; const _0xa2be8d = _0x1c6e37[_0xbb8f64]; _0x49d30d['src'] = _0xa2be8d[_0x46ae93(0x65e)] || _0xa2be8d[_0x46ae93(0xb79)], _0x49d30d[_0x46ae93(0xb59)](), _0x74dd5d(), _0x13bc31(); } else { const _0x3baa2d = _0x4161a7[_0x46ae93(0x97d)](_0x46ae93(0x70f)), _0x26b84a = _0x34e33d[_0x46ae93(0x6c3)][_0x46ae93(0x9d4)], _0x13f7fe = _0x8660c2(_0x3baa2d[_0x46ae93(0x6c3)]['historyIndex'], 0xa); _0x384914(_0x26b84a, _0x13f7fe, _0x2574a6); } } function _0x74dd5d() { const _0x2b44b9 = _0x1c6e37[_0x4483d3]; _0x364150(_0x2b44b9); } function _0x13bc31() { const _0x3477e8 = _0x34dc25; if ('VuIeK' !== _0x3477e8(0xabf)) try { localStorage[_0x3477e8(0x783)](_0x3477e8(0x939), JSON[_0x3477e8(0x1c5)]({ 'playlist': _0x4295e2[_0x3477e8(0x734)], 'currentIndex': _0x4295e2['currentlyPlayingIndex'] })); } catch (_0x59978f) { console[_0x3477e8(0x214)]('保存播放器状态失败，真是没用。', _0x59978f); } else _0x29ca20[_0x3477e8(0x214)]('加载壁纸失败:', _0x2fab6f), _0x3411f6 && (_0x5e4f1c['style']['backgroundImage'] = ''); } function _0x411321() { const _0x185981 = _0x34dc25; try { if (_0x185981(0xa40) !== _0x185981(0xa40)) { const _0x2bc124 = _0x392ebd['querySelector'](_0x185981(0x6b8)); if (_0x2bc124) _0x2bc124['remove'](); } else { const _0x32dc07 = localStorage[_0x185981(0x2f0)](_0x185981(0x939)); if (_0x32dc07) { const { playlist: _0x5138c3, currentIndex: _0x752052 } = JSON['parse'](_0x32dc07); Array['isArray'](_0x5138c3) && _0x5138c3['length'] > 0x0 && _0x752052 > -0x1 && (_0x4295e2[_0x185981(0x734)] = _0x5138c3, _0x4295e2['currentlyPlayingIndex'] = _0x752052, _0x4295e2['isPlaying'] = ![], _0x74dd5d()); } } } catch (_0xbef614) { console['error'](_0x185981(0x6db), _0xbef614); } } function _0x4dfc42(_0x1e8ef1) { const _0x2084d5 = _0x34dc25; if (window[_0x2084d5(0x6f1)]) clearTimeout(window[_0x2084d5(0x6f1)]); const _0x4015af = _0x1e8ef1[_0x2084d5(0x6e7)][_0x2084d5(0x97d)](_0x2084d5(0xb66)); if (!_0x4015af) return; const _0x28b568 = _0x4015af[_0x2084d5(0x6c3)]['timestamp'], _0x5c5b27 = _0x4015af[_0x2084d5(0x1f5)][_0x2084d5(0x5f7)](_0x2084d5(0x742)) ? _0x2084d5(0x742) : 'ai'; if (!_0x28b568) return; const _0x7750e3 = () => { const _0x3c927e = _0x2084d5; window[_0x3c927e(0x6f1)] = setTimeout(() => { const _0x363e3a = _0x3c927e; if ('kWCgo' === 'kWCgo') { if (_0x1e8ef1[_0x363e3a(0x63a)] === _0x363e3a(0x229)) _0x1e8ef1[_0x363e3a(0x3a7)](); _0x319762(parseInt(_0x28b568, 0xa), _0x5c5b27); } else _0x1b5409 = _0x3f27f4[_0x363e3a(0x9dc)], _0x36f1fe = _0x5af47b[_0x363e3a(0x1c4)]; }, 0x320); }, _0x3f58f2 = () => { const _0x3d3dfd = _0x2084d5; if (_0x3d3dfd(0x328) !== _0x3d3dfd(0x8d6)) { if (window['diaryPressTimer']) clearTimeout(window[_0x3d3dfd(0x6f1)]); } else { if (_0x4afcc0[_0x3d3dfd(0xa4b)]) _0x1daf63['push']('[' + _0x554106(_0x4bf2a5) + _0x3d3dfd(0xac3) + (_0x729607[_0x3d3dfd(0x8f0)]?.[_0x3d3dfd(0x4ed)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x3eb78f[_0x3d3dfd(0x37c)]) { const _0x60a5cc = _0x408e32[_0x3d3dfd(0x8f0)] ? '\x20' + _0x46b352[_0x3d3dfd(0x8f0)] : ''; _0x3252db['push']('[' + _0x36acd6(_0x312f49) + _0x3d3dfd(0x225) + _0x60a5cc); } else _0x522101[_0x3d3dfd(0x8f0)] && _0x4774b6[_0x3d3dfd(0x230)]('[' + _0x4b2834(_0x2f1369) + ']\x20' + _0x96807b[_0x3d3dfd(0x8f0)]); } } }; document[_0x2084d5(0x46a)](_0x2084d5(0x831), _0x3f58f2, { 'once': !![] }), document[_0x2084d5(0x46a)](_0x2084d5(0x94e), _0x3f58f2, { 'once': !![] }), document['addEventListener'](_0x2084d5(0x445), _0x3f58f2, { 'once': !![] }), _0x7750e3(); } function _0x319762(_0x3c3ca6, _0x2771e7) { const _0x34ae44 = _0x34dc25; if (_0x34ae44(0x90e) !== _0x34ae44(0x90e)) _0x2c9534(); else { const _0x166f9c = 'diary-action-modal-' + _0x3c3ca6; let _0x420fbf = document['getElementById'](_0x166f9c); if (_0x420fbf) return; const _0x3dea8b = _0x34ae44(0x9e0) + _0x166f9c + '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x2771e7 === 'ai' ? _0x34ae44(0x775) : '') + _0x34ae44(0x54d); document[_0x34ae44(0x68f)]['insertAdjacentHTML'](_0x34ae44(0x4cc), _0x3dea8b); const _0x3d3cb6 = document[_0x34ae44(0x61b)](_0x166f9c), _0x3af05e = () => _0x3d3cb6[_0x34ae44(0x194)](); _0x3d3cb6[_0x34ae44(0x76d)](_0x34ae44(0x1ff))[_0x34ae44(0x81f)] = _0x3af05e, _0x3d3cb6[_0x34ae44(0x76d)]('#diary-action-cancel')[_0x34ae44(0x81f)] = _0x3af05e, _0x3d3cb6['querySelector'](_0x34ae44(0x307))[_0x34ae44(0x81f)] = () => { const _0x4c3310 = _0x34ae44; 'yXYwB' === 'yXYwB' ? (_0x3355b9(_0x3c3ca6), _0x3af05e()) : _0x257818 += '-\x20你最近去过：“' + _0x4b6197['location_name'] + _0x4c3310(0x2a2) + _0x84470f['activity_description'] + '”。\x0a'; }, _0x2771e7 === 'ai' && (_0x3d3cb6[_0x34ae44(0x76d)]('#diary-action-reroll')['onclick'] = () => { const _0xd6f95a = _0x34ae44; if ('dwDQy' === _0xd6f95a(0x44f)) { if (_0x2f8d46) { const _0x2541df = _0x4eefc5(_0x1bcba7[_0xd6f95a(0xa6b)]); _0x2541df && (delete _0x2541df[_0xd6f95a(0x384)], _0x14dd42(), _0x5655bc(_0x2541df['id'], _0xd6f95a(0x8a7)), _0x12e0bb('已恢复默认。'), _0x36f428(!![])); } } else _0x4d19f5(_0x3c3ca6), _0x3af05e(); }); } } async function _0x3355b9(_0x95f1d3) { const _0x12a29f = _0x34dc25, _0x196025 = await _0x4fac8b(_0x12a29f(0x561)); if (!_0x196025) return; const _0x277a6e = _0x4295e2[_0x12a29f(0x801)][_0x12a29f(0x7e6)](_0x1a4be4 => _0x1a4be4[_0x12a29f(0x900)] === _0x4295e2['activeDiaryCharacterId']); if (!_0x277a6e) return; const _0x275811 = _0x277a6e[_0x12a29f(0x9d1)][_0x12a29f(0xb2e)](_0x39a980 => _0x39a980[_0x12a29f(0x6aa)] === _0x95f1d3); if (_0x275811 > -0x1) { if (_0x12a29f(0xb6a) === _0x12a29f(0x85b)) { _0x4f6e88[_0x12a29f(0x845)] = null, _0x473703(), _0x900144(![]), _0x39b7f6['getElementById'](_0x12a29f(0x1c6))[_0x12a29f(0x7c9)]['backgroundImage'] = ''; return; } else _0x277a6e[_0x12a29f(0x9d1)][_0x12a29f(0x99e)](_0x275811, 0x1), _0x1b6337(), _0x3537ce(), _0x925876(_0x12a29f(0x2f1)); } } async function _0x4d19f5(_0x2f0db5) { const _0x26e47e = _0x34dc25, _0x5cb200 = _0x4295e2[_0x26e47e(0x801)][_0x26e47e(0x7e6)](_0x2ecf9f => _0x2ecf9f[_0x26e47e(0x900)] === _0x4295e2[_0x26e47e(0x5c1)]); if (!_0x5cb200) return; const _0x34f526 = _0x5cb200[_0x26e47e(0x9d1)][_0x26e47e(0xb2e)](_0x5374e0 => _0x5374e0[_0x26e47e(0x6aa)] === _0x2f0db5); _0x34f526 > -0x1 && (_0x5cb200[_0x26e47e(0x9d1)][_0x26e47e(0x99e)](_0x34f526, 0x1), _0x1b6337(), _0x3537ce(), await _0x25e292()); } function _0x3a5b10() { const _0x11075e = _0x34dc25; if (_0x11075e(0x1c2) === _0x11075e(0xabb)) _0x19b944[_0x11075e(0x1f5)][_0x11075e(0x194)](_0x11075e(0x7f5)), _0x21c392[_0x11075e(0x1f5)][_0x11075e(0x194)](_0x11075e(0x1ae)); else { const _0x719cfa = document[_0x11075e(0x61b)](_0x11075e(0x79d)); _0x719cfa[_0x11075e(0x72d)] = ''; const _0x45bc80 = _0x4295e2['characters'][_0x11075e(0x695)](_0x374ff3 => _0x4295e2[_0x11075e(0x7af)]['some'](_0x7a9a7c => _0x7a9a7c[_0x11075e(0x63a)] === _0x11075e(0x780) && _0x7a9a7c[_0x11075e(0x5c9)][_0x11075e(0x2b7)](_0x374ff3['id']))); if (_0x45bc80['length'] === 0x0) { _0x719cfa[_0x11075e(0x72d)] = _0x11075e(0x9a9); return; } _0x45bc80['forEach'](_0x2739d3 => { const _0x2a9d30 = _0x11075e; if ('BdaLd' === _0x2a9d30(0x793)) _0x5925a6['addEventListener'](_0x2a9d30(0x3cd), function () { const _0x5b7ce8 = _0x2a9d30, _0x12e513 = { 'id': _0x174cbc['id'], 'url': _0x491064[_0x5b7ce8(0x65e)] }; _0x9ca487(this, _0x12e513); }); else { const _0xa85145 = document[_0x2a9d30(0x6a8)]('li'); _0xa85145[_0x2a9d30(0x6e1)] = _0x2a9d30(0x1de), _0xa85145[_0x2a9d30(0x6c3)][_0x2a9d30(0x259)] = _0x2739d3['id'], _0xa85145['innerHTML'] = _0x2a9d30(0x597) + (_0x2739d3[_0x2a9d30(0x1c4)] || _0x2fd48c) + _0x2a9d30(0x356) + _0x2739d3['name'] + _0x2a9d30(0x919), _0xa85145[_0x2a9d30(0x46a)](_0x2a9d30(0x3cd), () => { const _0x53f2c5 = _0x2a9d30; if ('SmtfY' === _0x53f2c5(0x3ce)) _0x314d4c(_0x2739d3['id']); else { _0x5bb36b = _0x4612bb(_0x3baf40); if (!_0x329af1) throw new _0x595778(_0x53f2c5(0x313)); _0x1b19ec[_0x53f2c5(0x777)](_0x53f2c5(0x353) + _0xb933bd['id'] + _0x53f2c5(0x202)); } }), _0xa85145[_0x2a9d30(0x76d)](_0x2a9d30(0x2db))[_0x2a9d30(0x46a)]('click', () => { _0x314d4c(_0x2739d3['id']); }), _0xa85145[_0x2a9d30(0x76d)](_0x2a9d30(0x809))['addEventListener']('click', _0x4e0cb7 => { const _0x4de8a4 = _0x2a9d30; if ('GmQjU' !== 'GmQjU') { const _0x1d3778 = _0xf5e820[_0x4de8a4(0xb4e)](_0x5b97ab); _0x1d3778[_0x4de8a4(0x904)] && (_0x25dbea[_0x4de8a4(0x904)] = _0x1d3778[_0x4de8a4(0x904)], _0x3e4d27['log'](_0x4de8a4(0x6c5))); } else _0x4e0cb7[_0x4de8a4(0x3d5)](), _0x154eda(_0x2739d3['id']); }), _0x719cfa[_0x2a9d30(0x1ce)](_0xa85145); } }); } } function _0x314d4c(_0x484671) { const _0xc1a205 = _0x34dc25, _0x18332e = _0x5aa3d9(_0x484671); if (!_0x18332e) return; _0x4295e2['activeDiaryCharacterId'] = _0x484671; const _0x499218 = _0x4295e2[_0xc1a205(0x801)][_0xc1a205(0x7e6)](_0x68f96c => _0x68f96c[_0xc1a205(0x900)] === _0x484671), _0x2586b1 = _0x499218 ? _0x499218[_0xc1a205(0x9d1)][_0xc1a205(0xa1e)] : 0x0, _0x3ed045 = 0x2; _0x4295e2['diaryCurrentPage'] = Math[_0xc1a205(0x460)](0x0, Math[_0xc1a205(0x344)](_0x2586b1 / _0x3ed045) - 0x1), document['getElementById'](_0xc1a205(0x9ad))[_0xc1a205(0x6c7)] = _0x18332e[_0xc1a205(0x9dc)] + _0xc1a205(0x887), _0x3537ce(), _0xd18e04('diaryView', _0xc1a205(0x57b)); } function _0x3537ce() { const _0x2f4f30 = _0x34dc25, _0x19baaa = document[_0x2f4f30(0x61b)]('diary-entries-container'), _0x339607 = document['getElementById'](_0x2f4f30(0x6c2)); _0x19baaa['innerHTML'] = '', _0x339607[_0x2f4f30(0x72d)] = ''; const _0x2eef8a = _0x2633dd() || { 'name': '我' }, _0xd5ce51 = _0x4295e2['diaries'][_0x2f4f30(0x7e6)](_0x5071ea => _0x5071ea[_0x2f4f30(0x900)] === _0x4295e2[_0x2f4f30(0x5c1)]); if (!_0xd5ce51 || !_0xd5ce51[_0x2f4f30(0x9d1)] || _0xd5ce51[_0x2f4f30(0x9d1)][_0x2f4f30(0xa1e)] === 0x0) { if (_0x2f4f30(0x5b6) === _0x2f4f30(0x5b6)) { _0x19baaa[_0x2f4f30(0x72d)] = _0x2f4f30(0x2d6), _0x339607['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document[_0x2f4f30(0x61b)](_0x2f4f30(0x549))[_0x2f4f30(0x46a)]('click', _0x52e36d), document['getElementById']('diary-get-reply-button')['addEventListener'](_0x2f4f30(0x3cd), _0x25e292); return; } else _0x47f304['getElementById'](_0x2f4f30(0x1ef))[_0x2f4f30(0x1b2)] = _0x2711b9[_0x2f4f30(0x1c4)] || _0x46db7b; } const _0xc23ab0 = 0x2, _0x4c078d = [..._0xd5ce51[_0x2f4f30(0x9d1)]][_0x2f4f30(0x96f)]((_0x2e85fa, _0xeec973) => _0x2e85fa[_0x2f4f30(0x6aa)] - _0xeec973[_0x2f4f30(0x6aa)]), _0x853baf = []; for (let _0xd54397 = 0x0; _0xd54397 < _0x4c078d[_0x2f4f30(0xa1e)]; _0xd54397 += _0xc23ab0) { if (_0x2f4f30(0xaaf) !== _0x2f4f30(0xaaf)) { const _0x22fec7 = _0x31b498['createElement'](_0x2f4f30(0xa9f)); _0x22fec7[_0x2f4f30(0x6e1)] = _0x2f4f30(0x720), _0x22fec7['innerHTML'] = _0x2f4f30(0xb91) + (_0x461852[_0x2f4f30(0x382)] || _0x2efa5f) + _0x2f4f30(0x617) + _0x409ab4[_0x2f4f30(0x3a6)] + _0x2f4f30(0x80e) + _0x4bf6e2['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x22fec7[_0x2f4f30(0x76d)](_0x2f4f30(0x8d5))[_0x2f4f30(0x81f)] = () => _0x1eff65(_0x2f4f30(0x67f)), _0x75d250[_0x2f4f30(0x1ce)](_0x22fec7); } else _0x853baf['push'](_0x4c078d[_0x2f4f30(0xae6)](_0xd54397, _0xd54397 + _0xc23ab0)); } const _0x51850c = _0x853baf[_0x2f4f30(0xa1e)]; _0x853baf['forEach']((_0x5a1199, _0x1597a7) => { const _0x529995 = _0x2f4f30, _0x1583ec = document[_0x529995(0x6a8)](_0x529995(0xa9f)); _0x1583ec[_0x529995(0x6e1)] = _0x529995(0x65c), _0x1583ec['id'] = _0x529995(0x3d1) + _0x1597a7; if (_0x1597a7 === _0x4295e2[_0x529995(0x79b)]) { if ('hnWqL' !== _0x529995(0x2b5)) _0x1583ec['classList']['add']('is-visible'); else { const _0x2ab1e0 = _0x3d5042['createElement'](_0x529995(0xa9f)); _0x2ab1e0[_0x529995(0x6e1)] = _0x529995(0x4a7), _0x2ab1e0[_0x529995(0x6c7)] = _0x338bec[_0x529995(0x8f0)], _0x27e4b4[_0x529995(0x1ce)](_0x2ab1e0); } } _0x5a1199[_0x529995(0xaa9)](_0x27f3ff => { const _0x203dde = _0x529995, _0x42d483 = _0x27f3ff[_0x203dde(0x1b8)] === _0x203dde(0x742) ? _0x203dde(0x742) : 'ai', _0x17491d = _0x27f3ff['author'] === _0x203dde(0x742) ? _0x2eef8a[_0x203dde(0x9dc)] : _0x5aa3d9(_0x27f3ff[_0x203dde(0x1b8)])[_0x203dde(0x9dc)], _0x3ff7a4 = document[_0x203dde(0x6a8)]('div'); _0x3ff7a4['className'] = _0x203dde(0x81a) + _0x42d483, _0x3ff7a4['dataset']['timestamp'] = _0x27f3ff[_0x203dde(0x6aa)], _0x3ff7a4[_0x203dde(0x7c9)][_0x203dde(0x800)] = _0x203dde(0x678), _0x3ff7a4[_0x203dde(0x7c9)][_0x203dde(0x643)] = '0', _0x3ff7a4['innerHTML'] = _0x203dde(0xb5b) + _0x17491d + _0x203dde(0x5e4) + new Date(_0x27f3ff[_0x203dde(0x6aa)])[_0x203dde(0x773)](_0x203dde(0x5a5)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>' + _0x27f3ff[_0x203dde(0x8f0)][_0x203dde(0x1dc)](/\n/g, '<br>') + _0x203dde(0x205), _0x1583ec[_0x203dde(0x1ce)](_0x3ff7a4); }), _0x19baaa[_0x529995(0x1ce)](_0x1583ec); }), _0x339607[_0x2f4f30(0x72d)] = _0x2f4f30(0xb26) + (_0x4295e2[_0x2f4f30(0x79b)] + 0x1) + '\x20/\x20' + _0x51850c + _0x2f4f30(0x5d1), document['getElementById']('diary-prev-button')[_0x2f4f30(0x832)] = _0x4295e2['diaryCurrentPage'] === 0x0, document[_0x2f4f30(0x61b)](_0x2f4f30(0x8bf))['disabled'] = _0x4295e2[_0x2f4f30(0x79b)] === _0x51850c - 0x1, document['getElementById'](_0x2f4f30(0x81d))['addEventListener'](_0x2f4f30(0x3cd), _0x53de6a), document[_0x2f4f30(0x61b)](_0x2f4f30(0x8bf))['addEventListener']('click', _0x407b65), document[_0x2f4f30(0x61b)](_0x2f4f30(0x549))[_0x2f4f30(0x46a)](_0x2f4f30(0x3cd), _0x52e36d), document[_0x2f4f30(0x61b)](_0x2f4f30(0x7a8))[_0x2f4f30(0x46a)]('click', _0x25e292); } function _0x407b65() { const _0x3eebcc = _0x34dc25; if (_0x3eebcc(0x534) !== _0x3eebcc(0x534)) _0x54afc6[_0x3eebcc(0x214)](_0x3eebcc(0xa1b), _0x552239); else { if (_0x4295e2[_0x3eebcc(0x443)]) return; const _0x1863ed = _0x4295e2[_0x3eebcc(0x79b)], _0x5cb815 = Math['ceil'](_0x4295e2['diaries'][_0x3eebcc(0x7e6)](_0x2a6c1b => _0x2a6c1b['characterId'] === _0x4295e2['activeDiaryCharacterId'])[_0x3eebcc(0x9d1)][_0x3eebcc(0xa1e)] / 0x2); if (_0x1863ed >= _0x5cb815 - 0x1) return; _0x4295e2['isAnimatingDiary'] = !![]; const _0x68d68c = _0x1863ed + 0x1, _0x57df2b = document[_0x3eebcc(0x61b)]('diary-page-' + _0x1863ed), _0x3f86cd = document['getElementById']('diary-page-' + _0x68d68c); _0x57df2b && _0x3f86cd ? 'siRXS' === _0x3eebcc(0x19f) ? _0x52a315[_0x3eebcc(0x1f5)][_0x3eebcc(0xaf2)](_0x3eebcc(0xa03)) : (_0x3f86cd[_0x3eebcc(0x1f5)][_0x3eebcc(0xaf2)]('is-entering-from-right'), _0x57df2b[_0x3eebcc(0x1f5)]['add'](_0x3eebcc(0x7f3)), _0x3f86cd[_0x3eebcc(0x1f5)][_0x3eebcc(0xaf2)](_0x3eebcc(0xa74)), setTimeout(() => { const _0x2c0584 = _0x3eebcc; if ('glejK' !== _0x2c0584(0x7aa)) { const _0x2b081d = _0x4e1edc[_0x2c0584(0x7e6)](_0x3d8ee4 => _0x3d8ee4[_0x2c0584(0x9dc)] === _0x55d0c1[_0x2c0584(0x9dc)]); if (_0x2b081d) _0x57f0f6[_0x2c0584(0x718)](_0x449849, { 'content': _0x2c0584(0x592) + _0x2b081d[_0x2c0584(0x9dc)] + ']', 'displayUrl': _0x2b081d[_0x2c0584(0xb79)] }); else _0x2134b0[_0x2c0584(0x8f0)] = _0x2c0584(0x7ac) + _0x59f84[_0x2c0584(0x9dc)] + ']'; } else _0x57df2b[_0x2c0584(0x1f5)][_0x2c0584(0x194)](_0x2c0584(0xa74), _0x2c0584(0x7f3)), _0x3f86cd['classList']['remove']('is-entering-from-right'), _0x4295e2[_0x2c0584(0x79b)] = _0x68d68c, _0x3537ce(), _0x4295e2[_0x2c0584(0x443)] = ![]; }, 0x2bc)) : _0x3eebcc(0x3d0) === 'yqloG' ? (_0x5d3869[_0x3eebcc(0x7c9)][_0x3eebcc(0x316)] = 0x0, _0x326b3e(() => { const _0x51d8da = _0x3eebcc; _0x8a395c[_0x51d8da(0x1b2)] = _0x269b96[_0x51d8da(0xa4f)](_0x310bb9), _0x22f02e['style'][_0x51d8da(0x316)] = 0x1; }, 0x96)) : _0x4295e2['isAnimatingDiary'] = ![]; } } function _0x53de6a() { const _0x2040a8 = _0x34dc25; if (_0x2040a8(0x3a8) !== _0x2040a8(0x3a8)) _0x3cbb0e[_0x2040a8(0x473)] = _0x55856e[_0x2040a8(0x473)][_0x2040a8(0x695)](_0x5286cc => _0x5286cc !== _0x76f519); else { if (_0x4295e2['isAnimatingDiary']) return; const _0x5f464f = _0x4295e2[_0x2040a8(0x79b)]; if (_0x5f464f <= 0x0) return; _0x4295e2[_0x2040a8(0x443)] = !![]; const _0x5f1e94 = _0x5f464f - 0x1, _0x3442c3 = document[_0x2040a8(0x61b)](_0x2040a8(0x3d1) + _0x5f464f), _0x5a2104 = document[_0x2040a8(0x61b)]('diary-page-' + _0x5f1e94); _0x3442c3 && _0x5a2104 ? _0x2040a8(0x4f9) !== _0x2040a8(0x4f9) ? _0x109590 += _0x2040a8(0xace) + _0x28c6ec[_0x2040a8(0x2e7)] + _0x2040a8(0x1b4) + _0x5d2d4a['content']['replace'](/\n/g, '\x20') + _0x2040a8(0x975) : (_0x5a2104[_0x2040a8(0x1f5)][_0x2040a8(0xaf2)](_0x2040a8(0x86a)), _0x3442c3['classList'][_0x2040a8(0xaf2)](_0x2040a8(0xb36)), _0x5a2104[_0x2040a8(0x1f5)][_0x2040a8(0xaf2)]('is-visible'), setTimeout(() => { const _0x3f2e93 = _0x2040a8; _0x3f2e93(0x9b3) !== _0x3f2e93(0x3e4) ? (_0x3442c3[_0x3f2e93(0x1f5)]['remove']('is-visible', 'is-exiting-right'), _0x5a2104[_0x3f2e93(0x1f5)][_0x3f2e93(0x194)](_0x3f2e93(0x86a)), _0x4295e2['diaryCurrentPage'] = _0x5f1e94, _0x3537ce(), _0x4295e2[_0x3f2e93(0x443)] = ![]) : (_0x593a9e(), _0x4b4b02['conversationHistory'] = [], _0xc0af67()); }, 0x2bc)) : _0x4295e2[_0x2040a8(0x443)] = ![]; } } function _0x52e36d() { return new Promise(_0x2b212a => { const _0xe037f1 = _0x585d; if (_0xe037f1(0x581) !== _0xe037f1(0x6c8)) { const _0x2a4fee = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0xe037f1(0x68f)][_0xe037f1(0xb6e)]('beforeend', _0x2a4fee); const _0x82483e = document[_0xe037f1(0x61b)](_0xe037f1(0x7e9)), _0x5a3c89 = document[_0xe037f1(0x61b)]('diary-modal-textarea'), _0x5c4c7a = document['getElementById']('diary-modal-save'), _0x3c769d = document['getElementById']('diary-modal-cancel'), _0x58d218 = _0x82483e[_0xe037f1(0x76d)](_0xe037f1(0x1ff)), _0x5657fe = () => { const _0x498aad = _0xe037f1; if (_0x498aad(0x232) !== _0x498aad(0x76e)) _0x82483e[_0x498aad(0x194)](), _0x2b212a(); else { const _0x169ece = _0x5af443[_0x498aad(0x59b)][_0x498aad(0x7e6)](_0x5afedb => _0x5afedb['id'] === _0x479cc9[_0x498aad(0x2e4)]) || { 'name': '你' }, _0x2f2856 = _0x165184['diaries'][_0x498aad(0x7e6)](_0x2bd35c => _0x2bd35c[_0x498aad(0x900)] === _0x133967); if (!_0x2f2856 || !_0x2f2856[_0x498aad(0x9d1)] || _0x2f2856[_0x498aad(0x9d1)][_0x498aad(0xa1e)] === 0x0) return ''; const _0x29953a = _0x2f2856[_0x498aad(0x9d1)][_0x498aad(0xae6)](-0x8), _0x30d9dc = _0x29953a[_0x498aad(0x959)](_0xbe3d6b => { const _0x25442d = _0x498aad, _0x18ad8b = _0xbe3d6b[_0x25442d(0x1b8)] === _0x25442d(0x742) ? _0x169ece[_0x25442d(0x9dc)] : _0x4c6ceb(_0xbe3d6b[_0x25442d(0x1b8)])['name']; return '-\x20[' + new _0x43023a(_0xbe3d6b[_0x25442d(0x6aa)])['toLocaleDateString']() + ']\x20' + _0x18ad8b + _0x25442d(0x204) + _0xbe3d6b[_0x25442d(0x8f0)]; })['join']('\x0a'); return _0x498aad(0x6a2) + _0x169ece[_0x498aad(0x9dc)] + _0x498aad(0xb92) + _0x30d9dc; } }; _0x5c4c7a[_0xe037f1(0x81f)] = () => { const _0x27f1d3 = _0xe037f1; _0x41f4f1(_0x5a3c89[_0x27f1d3(0x21f)]), _0x5657fe(); }, _0x3c769d['onclick'] = _0x5657fe, _0x58d218[_0xe037f1(0x81f)] = _0x5657fe; } else _0x578730[_0xe037f1(0x1f5)]['remove']('show'); }); } function _0x41f4f1(_0x484d3f) { const _0x44eed6 = _0x34dc25, _0x5c59bd = _0x484d3f['trim'](); if (!_0x5c59bd || !_0x4295e2[_0x44eed6(0x5c1)]) return; let _0x3c5bb1 = _0x4295e2['diaries'][_0x44eed6(0x7e6)](_0x4ee053 => _0x4ee053[_0x44eed6(0x900)] === _0x4295e2[_0x44eed6(0x5c1)]); if (!_0x3c5bb1) { if (_0x44eed6(0x274) !== 'prFxf') _0x3c5bb1 = { 'characterId': _0x4295e2[_0x44eed6(0x5c1)], 'entries': [] }, _0x4295e2[_0x44eed6(0x801)]['push'](_0x3c5bb1); else return _0x276245['reply']['map'](_0xa1c01d => typeof _0xa1c01d === _0x44eed6(0x3f4) ? _0xa1c01d : _0xa1c01d?.['content'])['filter'](_0x50b6cf)[_0x44eed6(0x380)](_0x5f046a); } _0x3c5bb1[_0x44eed6(0x9d1)]['push']({ 'timestamp': Date[_0x44eed6(0xb3d)](), 'author': _0x44eed6(0x742), 'content': _0x5c59bd }), _0x1b6337(); const _0x43adbc = _0x3c5bb1[_0x44eed6(0x9d1)][_0x44eed6(0xa1e)]; _0x4295e2[_0x44eed6(0x79b)] = Math['ceil'](_0x43adbc / 0x2) - 0x1, _0x3537ce(); } async function _0x25e292() { const _0x46537a = _0x34dc25, _0x437f04 = _0x4295e2[_0x46537a(0x801)][_0x46537a(0x7e6)](_0x241ce3 => _0x241ce3[_0x46537a(0x900)] === _0x4295e2[_0x46537a(0x5c1)]), _0x728015 = _0x4295e2[_0x46537a(0x5c1)], _0x3540fd = _0x5aa3d9(_0x728015); if (!_0x3540fd || _0x4295e2[_0x46537a(0x2ac)]) return; _0x48b9ad(!![], _0x46537a(0x518)), _0x4295e2[_0x46537a(0x2ac)] = !![]; let _0x30b4c7 = []; try { const _0x589231 = _0x2633dd() || { 'name': '你' }, _0x511558 = _0x49199f(_0x728015), { omniText: _0x7d94a4 } = _0x2442b3(_0x728015, _0x4295e2[_0x46537a(0x845)]); let _0x5ef521 = ''; if (_0x3540fd[_0x46537a(0x473)] && _0x3540fd[_0x46537a(0x473)]['length'] > 0x0) { const _0x43c424 = _0x3540fd[_0x46537a(0x473)][_0x46537a(0x959)](_0x3a1e7b => _0x4295e2['worldBooks'][_0x46537a(0x7e6)](_0x4d1d4b => _0x4d1d4b['id'] === _0x3a1e7b))[_0x46537a(0x695)](Boolean)['map'](_0x4b9159 => _0x46537a(0xad5) + _0x4b9159[_0x46537a(0x9dc)] + '\x0a' + _0x4b9159[_0x46537a(0x8f0)])[_0x46537a(0x247)](''); if (_0x43c424) _0x5ef521 = _0x46537a(0x90f) + _0x43c424; } const _0x3c6b6f = _0x589231['persona'] ? _0x46537a(0x89b) + _0x589231[_0x46537a(0x9dc)] + _0x46537a(0xb58) + _0x589231[_0x46537a(0xb70)] : '', _0x23e3a3 = _0x523643(); let _0x159fe0 = _0x46537a(0x3eb); if (_0x437f04 && _0x437f04[_0x46537a(0x9d1)]) { const _0x32872a = _0x437f04[_0x46537a(0x9d1)][_0x46537a(0x695)](_0xbcbedc => _0xbcbedc[_0x46537a(0x1b8)] === _0x46537a(0x742))[_0x46537a(0x52b)](); if (_0x32872a) { if ('Bzmfp' !== _0x46537a(0x1d3)) _0x159fe0 = _0x32872a['content']; else return ''; } } const _0x1e4b18 = _0x46537a(0x410) + _0x3540fd[_0x46537a(0x9dc)] + _0x46537a(0x31d) + _0x589231[_0x46537a(0x9dc)] + _0x46537a(0x7dc) + _0x589231[_0x46537a(0x9dc)] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x159fe0 + _0x46537a(0xaba) + _0x3540fd[_0x46537a(0xb70)] + '\x0a' + _0x3c6b6f + '\x0a' + _0x5ef521 + _0x46537a(0xb49) + new Date()[_0x46537a(0x773)](_0x46537a(0x5a5), { 'dateStyle': _0x46537a(0x294), 'timeStyle': _0x46537a(0x5fe) }) + _0x46537a(0x98c) + _0x582cc2(new Date(_0x437f04?.[_0x46537a(0x9d1)]?.['at'](-0x1)?.[_0x46537a(0x6aa)] || Date[_0x46537a(0xb3d)]())) + _0x46537a(0x1a3) + (_0x7d94a4 || _0x46537a(0x415)) + _0x46537a(0x594) + (_0x23e3a3 || _0x46537a(0x7a6)) + _0x46537a(0x838); _0x30b4c7 = [{ 'role': _0x46537a(0x4f2), 'content': _0x1e4b18 }, { 'role': _0x46537a(0x742), 'content': _0x46537a(0x8b4) }]; const _0x2acfdc = await _0x110c3c(_0x30b4c7); if (_0x2acfdc) { if (_0x46537a(0x37a) === _0x46537a(0x37a)) { let _0x1e6f9c = _0x4295e2[_0x46537a(0x801)]['find'](_0x248a88 => _0x248a88[_0x46537a(0x900)] === _0x728015); !_0x1e6f9c && (_0x1e6f9c = { 'characterId': _0x728015, 'entries': [] }, _0x4295e2[_0x46537a(0x801)][_0x46537a(0x230)](_0x1e6f9c)); _0x1e6f9c[_0x46537a(0x9d1)]['push']({ 'timestamp': Date[_0x46537a(0xb3d)](), 'author': _0x728015, 'content': _0x2acfdc }), _0x1b6337(); const _0x38ce10 = _0x1e6f9c[_0x46537a(0x9d1)][_0x46537a(0xa1e)]; _0x4295e2['diaryCurrentPage'] = Math[_0x46537a(0x344)](_0x38ce10 / 0x2) - 0x1, _0x3537ce(); } else { _0x3b4adb(); const _0x17145f = _0xd22090(_0x46537a(0xb29), _0x2fa920['name']); _0x17145f && _0x17145f['trim']() && _0x17145f !== _0xdf3ad3[_0x46537a(0x9dc)] && (_0x1934a7[_0x46537a(0x9dc)] = _0x17145f[_0x46537a(0x2c7)](), _0x585d4c(), _0x219f8d(), _0x517548(), _0x131d6c(_0x46537a(0x7b9) + _0x4253b4[_0x46537a(0x9dc)] + '\x22。')); } } } catch (_0x1f56b5) { _0x925876(_0x46537a(0x2c9) + _0x1f56b5['message']); } finally { _0x48b9ad(![]), _0x4295e2[_0x46537a(0x2ac)] = ![]; } } function _0x56a34a() { const _0x442810 = _0x34dc25, _0x5b32ce = document[_0x442810(0x61b)]('meeting-scene-view'), _0xa066b = document['getElementById']('galgame-view-container'), _0x13c1ea = document[_0x442810(0x76d)](_0x442810(0x396)); if (_0x4295e2[_0x442810(0x9ed)] === 'galgame') _0x5b32ce['style']['display'] = _0x442810(0x678), _0xa066b[_0x442810(0x7c9)][_0x442810(0x458)] = _0x442810(0x1c1); else { if (_0x442810(0x370) === _0x442810(0x370)) _0x5b32ce[_0x442810(0x7c9)][_0x442810(0x458)] = 'block', _0xa066b[_0x442810(0x7c9)][_0x442810(0x458)] = 'none'; else { _0x3b1f32['chats'] = _0x419ab1['chats'][_0x442810(0x695)](_0x2e6be7 => _0x2e6be7['id'] !== _0x5bdece); try { _0x3547e1[_0x442810(0x662)](_0x442810(0x1a9) + _0x26adeb); } catch (_0x5c5926) { _0x4134eb[_0x442810(0x214)](_0x442810(0xabc) + _0x4d8405, _0x5c5926); } _0x3384a4[_0x442810(0x845)] === _0x197774 && (_0x30ee2b['activeChatId'] = _0x253a9f['chats'][0x0]?.['id'] || null, _0x74426(_0x1b3abf[_0x442810(0x845)])), _0xe9aaa1(), _0x3a6eff(); } } _0x13c1ea[_0x442810(0x7c9)][_0x442810(0x458)] = 'block'; } function _0x4f3690() { const _0x3e8c35 = _0x34dc25, _0x1bdc9a = document['getElementById'](_0x3e8c35(0xa78)), _0x2f8a3f = document[_0x3e8c35(0x61b)](_0x3e8c35(0x74d)); if (_0x4295e2['activeMeetingScriptQueue'][_0x3e8c35(0xa1e)] > 0x0) { if (_0x3e8c35(0xb25) === _0x3e8c35(0x3bc)) { _0x23a9c0(_0x3e8c35(0xaf4)); return; } else { const _0x260bd5 = _0x4295e2[_0x3e8c35(0x63e)][_0x3e8c35(0x542)](); _0x1bdc9a[_0x3e8c35(0x6c7)] = _0x260bd5[_0x3e8c35(0x34c)] === _0x3e8c35(0x8ee) ? '旁白' : _0x260bd5['speaker'], _0x2f8a3f[_0x3e8c35(0x6c7)] = _0x260bd5[_0x3e8c35(0x8af)], _0x260bd5[_0x3e8c35(0x34c)] !== 'narrator' && _0x8ae8c3(_0x4295e2[_0x3e8c35(0xa6b)], _0x260bd5[_0x3e8c35(0x905)]); } } else { if (_0x3e8c35(0x46b) === 'GoKEe') _0x5befcf = _0x3808ae, _0x23dc32[_0x3e8c35(0x1f5)][_0x3e8c35(0xaf2)](_0x3e8c35(0xa03)); else { const _0xee7b73 = _0x4295e2['characterLastScripts'][_0x4295e2[_0x3e8c35(0xa6b)]]; if (_0xee7b73 && _0xee7b73[_0x3e8c35(0xa1e)] > 0x0) { _0x4295e2['activeMeetingScriptQueue'] = [..._0xee7b73]; const _0x3e6123 = _0x4295e2[_0x3e8c35(0x63e)][_0x3e8c35(0x542)](); _0x1bdc9a[_0x3e8c35(0x6c7)] = _0x3e6123['speaker'] === _0x3e8c35(0x8ee) ? '旁白' : _0x3e6123[_0x3e8c35(0x34c)], _0x2f8a3f[_0x3e8c35(0x6c7)] = _0x3e6123[_0x3e8c35(0x8af)], _0x3e6123[_0x3e8c35(0x34c)] !== _0x3e8c35(0x8ee) && _0x8ae8c3(_0x4295e2[_0x3e8c35(0xa6b)], _0x3e6123[_0x3e8c35(0x905)]); } else _0x1bdc9a['textContent'] = '旁白', _0x2f8a3f[_0x3e8c35(0x6c7)] = _0x3e8c35(0xb9e); } } } async function _0x8ae8c3(_0x3639b5, _0x220b0b) { const _0x1f023f = _0x34dc25; if (_0x1f023f(0x98b) !== 'OayRd') _0x40eff3[_0x1f023f(0x1b2)] && (_0x59b0a3[_0x1f023f(0x690)] ? _0x3528d0[_0x1f023f(0xb59)]() : _0x7bd803[_0x1f023f(0x942)]()); else { const _0x130ce4 = document[_0x1f023f(0x61b)](_0x1f023f(0x8ba)), _0x8249b8 = document[_0x1f023f(0x61b)]('galgame-sprite-container'), _0x4e90ac = _0x5aa3d9(_0x3639b5), _0x227aa6 = _0x4e90ac?.[_0x1f023f(0x384)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x1eb43d = 0x50 * _0x227aa6[_0x1f023f(0x1b9)]; _0x8249b8['style']['height'] = _0x1eb43d + '%', _0x8249b8[_0x1f023f(0x7c9)]['width'] = _0x1eb43d + '%', _0x8249b8[_0x1f023f(0x7c9)][_0x1f023f(0x5d5)] = _0x227aa6['x'] + '%', _0x8249b8['style'][_0x1f023f(0x99f)] = _0x227aa6['y'] + '%', _0x8249b8[_0x1f023f(0x7c9)][_0x1f023f(0x827)] = _0x1f023f(0x35c), _0x8249b8[_0x1f023f(0x7c9)][_0x1f023f(0xa97)] = 'auto'; const _0x3e9fef = ['normal', _0x1f023f(0x56c), _0x1f023f(0x265), _0x1f023f(0x6f2), _0x1f023f(0xa46)], _0x5b4150 = _0x3e9fef[_0x1f023f(0x2b7)](_0x220b0b) ? _0x220b0b : _0x1f023f(0x8a7); try { if (_0x1f023f(0x6b0) !== _0x1f023f(0x8f2)) { const _0x48e986 = await _0x2b4d72(_0x1f023f(0xb38) + _0x5b4150 + '_' + _0x3639b5); if (_0x48e986) { if (_0x1f023f(0x3ac) !== _0x1f023f(0x3ac)) { const _0x2aab11 = _0xda5e02[_0x1f023f(0x7af)][_0x1f023f(0x7e6)](_0x145247 => _0x145247[_0x1f023f(0x20a)] && _0x145247['activeListenSession'][_0x1f023f(0x833)]); _0x2aab11 && (_0x2aab11[_0x1f023f(0x20a)] = null, _0x2e0a35(), _0x3d5ba4(_0x1f023f(0x7a1)), _0x5c27f6(), _0x4b3721[_0x1f023f(0x1f5)][_0x1f023f(0x194)]('show'), _0x15da6b(() => _0x2c1113[_0x1f023f(0x7c9)][_0x1f023f(0x458)] = 'none', 0x12c)); } else _0x130ce4[_0x1f023f(0x1b2)] && _0x130ce4['style']['opacity'] !== '0' ? (_0x130ce4[_0x1f023f(0x7c9)][_0x1f023f(0x316)] = 0x0, setTimeout(() => { const _0xdc4cf0 = _0x1f023f; _0x130ce4[_0xdc4cf0(0x1b2)] = URL[_0xdc4cf0(0xa4f)](_0x48e986), _0x130ce4[_0xdc4cf0(0x7c9)]['opacity'] = 0x1; }, 0x96)) : (_0x130ce4[_0x1f023f(0x1b2)] = URL[_0x1f023f(0xa4f)](_0x48e986), _0x130ce4[_0x1f023f(0x7c9)][_0x1f023f(0x316)] = 0x1); } else { const _0x290085 = await _0x2b4d72(_0x1f023f(0x87d) + _0x3639b5); _0x130ce4[_0x1f023f(0x1b2)] = _0x290085 ? URL['createObjectURL'](_0x290085) : ''; } } else _0x542531[_0x1f023f(0x214)](_0x1f023f(0x785), _0x41b012, '原始文本:', _0x3a80c1), _0x23b548[_0x1f023f(0x369)][_0x1f023f(0x230)]({ 'role': _0x1f023f(0x725), 'senderId': _0x1d2ae5['id'], 'timestamp': _0x432bf9[_0x1f023f(0xb3d)](), 'isOffline': !![], 'content': '[AI返回了无法解析的剧本:\x20' + _0x1dab78 + ']' }); } catch (_0x432d01) { console[_0x1f023f(0x214)](_0x1f023f(0xae4), _0x432d01), _0x130ce4[_0x1f023f(0x1b2)] = ''; } } } let _0xd763f0 = ![], _0x236286 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x437c8a = document[_0x34dc25(0x61b)]('sprite-adjust-button'), _0x3683bb = document['getElementById']('sprite-confirm-button'), _0x951c73 = document[_0x34dc25(0x61b)](_0x34dc25(0xb1a)), _0x1a938b = document['getElementById'](_0x34dc25(0xa79)), _0x1dd33d = document[_0x34dc25(0x61b)](_0x34dc25(0x517)), _0x5a1b1c = document['getElementById'](_0x34dc25(0x3d3)), _0x26f86b = document[_0x34dc25(0x61b)](_0x34dc25(0x633)), _0x23921a = document[_0x34dc25(0x61b)](_0x34dc25(0x5eb)); let _0x5ca906 = {}; function _0x43e585() { const _0x633880 = _0x34dc25; if (_0x633880(0x381) !== _0x633880(0x381)) { _0x397d73(); const _0x315acb = _0x3acebe[_0x633880(0x7f0)]['find'](_0x56511f => _0x56511f['id'] === _0x160b91); if (!_0x315acb) return; _0x3a623b[_0x633880(0xb77)] = _0x59b51a, _0x3fe17f(), _0x2688ca['getElementById'](_0x633880(0x931))[_0x633880(0x6c7)] = _0x315acb['name'], _0x4d3df8(), _0x320da5(_0x633880(0x67f), _0x633880(0x3a2)), _0x21a3fb(); } else { const _0x30787e = _0x5aa3d9(_0x4295e2[_0x633880(0xa6b)]); if (!_0x30787e) return; _0xd763f0 = !![], _0x1dd33d[_0x633880(0x7c9)][_0x633880(0x458)] = _0x633880(0x1c1); const _0x1b6daf = _0x30787e[_0x633880(0x384)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document['getElementById'](_0x633880(0x89f))[_0x633880(0x21f)] = _0x1b6daf['x'], document['getElementById'](_0x633880(0x7df))[_0x633880(0x21f)] = _0x1b6daf['y'], document['getElementById']('sprite-slider-scale')[_0x633880(0x21f)] = _0x1b6daf['scale'] * 0x64, _0x5ca906 = { ..._0x1b6daf }, document[_0x633880(0x61b)](_0x633880(0x9c6))[_0x633880(0x7c9)][_0x633880(0x458)] = 'none', document[_0x633880(0x61b)](_0x633880(0x513))[_0x633880(0x7c9)][_0x633880(0x458)] = _0x633880(0x678); } } function _0x2f6894(_0x1bc33d = ![]) { const _0x59a086 = _0x34dc25; _0xd763f0 = ![], _0x1dd33d[_0x59a086(0x7c9)][_0x59a086(0x458)] = _0x59a086(0x678), document['getElementById'](_0x59a086(0x9c6))[_0x59a086(0x7c9)][_0x59a086(0x458)] = _0x59a086(0x1c1), document[_0x59a086(0x61b)](_0x59a086(0x513))[_0x59a086(0x7c9)][_0x59a086(0x458)] = _0x59a086(0x1c1); if (!_0x1bc33d) { if ('LJOsE' !== _0x59a086(0x95b)) _0x24d2cd[_0x59a086(0x230)]('[' + _0x3e39f8(_0x3630bb) + ']\x20' + _0x3b0049[_0x59a086(0x8f0)]); else { const _0x453350 = _0x5aa3d9(_0x4295e2[_0x59a086(0xa6b)]); _0x453350 && ('RnOuK' !== 'HRvaz' ? (_0x453350[_0x59a086(0x384)] = _0x5ca906, _0x8ae8c3(_0x4295e2[_0x59a086(0xa6b)], _0x59a086(0x8a7))) : (_0xf95f94[_0x59a086(0x6c7)] = _0x715395[_0x59a086(0x34c)] === _0x59a086(0x8ee) ? '旁白' : _0x48cc69[_0x59a086(0x34c)], _0x1f2757['textContent'] = _0x5d4107['line'], _0x474a85[_0x59a086(0x34c)] === _0x2c664d[_0x59a086(0x9dc)] ? _0x2b4d97(_0x3124f6, _0x174a9e[_0x59a086(0x905)]) : _0x4fd824(_0x3214c8, _0x59a086(0x8a7)))); } } } function _0x28ea92() { const _0x21d46c = _0x34dc25, _0x4b9241 = _0x5aa3d9(_0x4295e2[_0x21d46c(0xa6b)]); if (!_0x4b9241) return; const _0x38c365 = parseFloat(document['getElementById'](_0x21d46c(0x89f))[_0x21d46c(0x21f)]), _0x43c522 = parseFloat(document[_0x21d46c(0x61b)]('sprite-slider-y')['value']), _0x547230 = parseFloat(document['getElementById']('sprite-slider-scale')[_0x21d46c(0x21f)]) / 0x64; _0x4b9241[_0x21d46c(0x384)] = { 'x': _0x38c365, 'y': _0x43c522, 'scale': _0x547230 }, _0x1b6337(), _0x925876(_0x21d46c(0x871)), _0x2f6894(!![]); } function _0x249ceb() { const _0x4bc7fd = _0x34dc25; _0x4bc7fd(0x4f4) === _0x4bc7fd(0x4f4) ? _0x4fac8b(_0x4bc7fd(0xaf9))[_0x4bc7fd(0xb30)](_0x56a479 => { const _0x49ae3d = _0x4bc7fd; if (_0x49ae3d(0x88a) !== _0x49ae3d(0x226)) { if (_0x56a479) { const _0x491f5c = _0x5aa3d9(_0x4295e2['activeMeetingCharId']); _0x491f5c && (delete _0x491f5c[_0x49ae3d(0x384)], _0x1b6337(), _0x8ae8c3(_0x491f5c['id'], _0x49ae3d(0x8a7)), _0x925876(_0x49ae3d(0x2b9)), _0x2f6894(!![])); } } else { const _0x188b16 = _0x5a21a2(_0x50282b[_0x49ae3d(0x5c9)][0x0]); _0x188b16 ? (_0x38d445 = _0x188b16[_0x49ae3d(0x1c4)] || _0x58f2b2, _0x1766e2 = _0x188b16[_0x49ae3d(0x9dc)] || _0x49ae3d(0x212), _0x2e41ae = _0x188b16[_0x49ae3d(0x4db)] || '私聊') : (_0x247b9c = _0x49ae3d(0x2d5), _0x255e40 = _0x49ae3d(0x972)); } }) : _0x4e4cb7[_0x4bc7fd(0x214)](_0x4bc7fd(0x8b3), _0x2d785e); } function _0x409d74() { const _0x509b4e = _0x34dc25; if (!_0xd763f0) return; const _0x5469ea = _0x4295e2['activeMeetingCharId'], _0x1d110a = _0x5aa3d9(_0x5469ea); if (!_0x1d110a) return; const _0x5c3c8c = parseFloat(document['getElementById'](_0x509b4e(0x89f))[_0x509b4e(0x21f)]), _0x372243 = parseFloat(document[_0x509b4e(0x61b)]('sprite-slider-y')[_0x509b4e(0x21f)]), _0x1678ad = parseFloat(document[_0x509b4e(0x61b)]('sprite-slider-scale')['value']) / 0x64; _0x1d110a[_0x509b4e(0x384)] = { 'x': _0x5c3c8c, 'y': _0x372243, 'scale': _0x1678ad }; const _0x57fae7 = document[_0x509b4e(0x61b)](_0x509b4e(0x3d3)), _0xfdd935 = 0x50 * _0x1678ad; _0x57fae7[_0x509b4e(0x7c9)]['height'] = _0xfdd935 + '%', _0x57fae7[_0x509b4e(0x7c9)]['width'] = _0xfdd935 + '%', _0x57fae7[_0x509b4e(0x7c9)][_0x509b4e(0x5d5)] = _0x5c3c8c + '%', _0x57fae7[_0x509b4e(0x7c9)][_0x509b4e(0x99f)] = _0x372243 + '%', _0x57fae7['style'][_0x509b4e(0x827)] = _0x509b4e(0x35c); } document[_0x34dc25(0x61b)](_0x34dc25(0x89f))['addEventListener'](_0x34dc25(0x602), _0x409d74), document[_0x34dc25(0x61b)](_0x34dc25(0x7df))[_0x34dc25(0x46a)](_0x34dc25(0x602), _0x409d74), document['getElementById'](_0x34dc25(0x40d))[_0x34dc25(0x46a)](_0x34dc25(0x602), _0x409d74), _0x437c8a[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x43e585), _0x3683bb[_0x34dc25(0x46a)]('click', _0x28ea92), _0x951c73[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x2f6894(![])), _0x1a938b[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x249ceb); function _0x268551(_0x29235d) { const _0x13cebb = _0x34dc25; if (_0x13cebb(0x69e) !== _0x13cebb(0x69e)) _0x20a898[_0x13cebb(0x214)]('净化音乐封面时出错，真是的。', _0x43198b); else { const _0x3f0411 = _0x5aa3d9(_0x29235d); if (!_0x3f0411) return; const _0x19312a = _0x4295e2['chats']['find'](_0x42db2d => _0x42db2d[_0x13cebb(0x63a)] === _0x13cebb(0x780) && _0x42db2d[_0x13cebb(0x5c9)][_0x13cebb(0x2b7)](_0x29235d)), _0x3ea0a1 = _0x4b57ed(_0x19312a['id']), _0x15b6d8 = _0x4295e2[_0x13cebb(0x369)][_0x13cebb(0x695)](_0x3f22a8 => _0x3f22a8['isOffline'])[_0x13cebb(0x52b)](), _0x4646e6 = document[_0x13cebb(0x61b)]('galgame-speaker'), _0x34f409 = document[_0x13cebb(0x61b)]('galgame-text'); let _0x38eeaa = null; if (_0x15b6d8) { if (_0x15b6d8[_0x13cebb(0x55e)] === _0x13cebb(0x725)) { const _0x3b9752 = _0x4295e2['characterLastScripts'][_0x29235d]; if (_0x3b9752 && _0x3b9752[_0x13cebb(0xa1e)] > 0x0) { if (_0x13cebb(0x533) !== 'gPyoj') _0x38eeaa = _0x3b9752['at'](-0x1); else { if (!_0x3d3bde) return ''; const _0x234c54 = new _0x4aff9b(_0x321492), _0x400652 = _0x57b190(_0x234c54[_0x13cebb(0x220)]())['padStart'](0x2, '0'), _0x32ce8f = _0x5f81e9(_0x234c54[_0x13cebb(0x503)]())['padStart'](0x2, '0'); return _0x400652 + ':' + _0x32ce8f; } } } else { if ('oFUpu' === _0x13cebb(0x982)) _0x38eeaa = { 'speaker': _0x3ea0a1['name'], 'line': _0x15b6d8[_0x13cebb(0x8f0)], 'emotion': 'normal' }; else { if (_0xc4bad7[_0x13cebb(0xa1e)] === 0x0) return; _0x56cb6b = (_0x5dd59d - 0x1 + _0x153ae1[_0x13cebb(0xa1e)]) % _0x302f17[_0x13cebb(0xa1e)], _0x2ec2ec(_0x300362[_0x3f25d4], _0x35e26b); } } } if (_0x38eeaa) { _0x4646e6[_0x13cebb(0x6c7)] = _0x38eeaa[_0x13cebb(0x34c)] === _0x13cebb(0x8ee) ? '旁白' : _0x38eeaa[_0x13cebb(0x34c)], _0x34f409[_0x13cebb(0x6c7)] = _0x38eeaa[_0x13cebb(0x8af)]; if (_0x38eeaa[_0x13cebb(0x34c)] === _0x3f0411[_0x13cebb(0x9dc)]) 'hYmmQ' !== _0x13cebb(0x424) ? _0x8ae8c3(_0x29235d, _0x38eeaa['emotion']) : (_0x1479d6[_0x13cebb(0x61b)](_0x13cebb(0xa01))['value'] = '', _0x14db17['getElementById'](_0x13cebb(0x1aa))[_0x13cebb(0x6c7)] = _0x13cebb(0x8e9), _0x5a89f0[_0x13cebb(0x61b)](_0x13cebb(0x244))[_0x13cebb(0x21f)] = _0x13cebb(0x589) + (_0x407bf8[_0x13cebb(0x59b)][_0x13cebb(0xa1e)] + 0x1), _0x15ce04[_0x13cebb(0x7c9)]['backgroundImage'] = _0x13cebb(0x3bd) + _0x2772fc + '\x27)', _0x2c8517[_0x13cebb(0x61b)](_0x13cebb(0x9b8))['value'] = '', _0x319d20[_0x13cebb(0x7c9)]['display'] = 'none', _0x500ab9['getElementById'](_0x13cebb(0x732))[_0x13cebb(0x7c9)][_0x13cebb(0x458)] = 'none'); else { if (_0x13cebb(0xa27) !== _0x13cebb(0xa27)) { const _0x23ade0 = _0x587814[_0x13cebb(0x21f)]; _0x36d82e[_0x13cebb(0x706)][_0x13cebb(0x7c9)][_0x13cebb(0xb7e)]('--primary-hue', _0x23ade0), _0x45acc6[_0x13cebb(0x783)]('themeHue', _0x23ade0), _0x4f52a8(); } else _0x8ae8c3(_0x29235d, _0x13cebb(0x8a7)); } } else { if (_0x13cebb(0x44e) === _0x13cebb(0x44e)) _0x4646e6['textContent'] = _0x3f0411[_0x13cebb(0x9dc)], _0x34f409[_0x13cebb(0x6c7)] = '（开始一段新的对话...）', _0x8ae8c3(_0x29235d, _0x13cebb(0x8a7)); else { const _0x3433e9 = _0xa1a926[_0x13cebb(0x61b)](_0x13cebb(0x327)), _0x2f2a05 = _0x657f7d[_0x13cebb(0x61b)](_0x13cebb(0x3a9)); _0x3433e9['innerHTML'] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x2f2a05['innerHTML'] = ''; const _0x19155c = _0x3433e9['querySelector']('.snoop-main-grid'), _0x5b7a23 = [{ 'id': _0x13cebb(0x199), 'name': '聊天', 'svg': _0x13cebb(0x63d), 'area': _0x13cebb(0x74b) }, { 'id': _0x13cebb(0x8d1), 'name': _0x13cebb(0x5a4), 'svg': _0x13cebb(0xade), 'area': _0x13cebb(0x74b) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x13cebb(0x912), 'area': 'dock' }, { 'id': 'summary', 'name': '总结', 'svg': _0x13cebb(0x3bf), 'area': _0x13cebb(0x74b) }, { 'id': 'fragments', 'name': _0x13cebb(0xaa7), 'svg': _0x13cebb(0xb2f), 'area': 'main' }, { 'id': _0x13cebb(0x57c), 'name': '外卖', 'svg': _0x13cebb(0x652), 'area': 'main' }, { 'id': _0x13cebb(0x334), 'name': '购物', 'svg': _0x13cebb(0x1ad), 'area': _0x13cebb(0x2a5) }, { 'id': _0x13cebb(0x4d0), 'name': '足迹', 'svg': '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'area': _0x13cebb(0x2a5) }]; _0x5b7a23[_0x13cebb(0xaa9)](_0x2cf304 => { const _0x4bf451 = _0x13cebb, _0x25e4af = _0x568063[_0x4bf451(0x6a8)](_0x4bf451(0xa9f)); _0x25e4af[_0x4bf451(0x6e1)] = _0x4bf451(0x5d6), _0x25e4af['innerHTML'] = _0x4bf451(0x426) + _0x2cf304['svg'] + _0x4bf451(0x8cc) + _0x2cf304['name'] + _0x4bf451(0x1c0), _0x25e4af[_0x4bf451(0x46a)]('click', () => _0x332721(_0x2cf304['id'], _0x2cf304[_0x4bf451(0x9dc)])), _0x2cf304[_0x4bf451(0x4e1)] === _0x4bf451(0x74b) ? _0x2f2a05[_0x4bf451(0x1ce)](_0x25e4af) : _0x19155c['appendChild'](_0x25e4af); }); } } } } function _0x52675b() { const _0x3f36d4 = _0x34dc25, _0x1fbbe0 = new Date(), _0x2f3838 = document[_0x3f36d4(0x61b)](_0x3f36d4(0xa6f)), _0x458a8e = document[_0x3f36d4(0x61b)]('galgame-date'); if (_0x2f3838 && _0x458a8e) { if (_0x3f36d4(0x7ef) === _0x3f36d4(0x7ef)) { const _0x1e5b43 = String(_0x1fbbe0[_0x3f36d4(0x220)]())[_0x3f36d4(0x956)](0x2, '0'), _0x4a7779 = String(_0x1fbbe0[_0x3f36d4(0x503)]())[_0x3f36d4(0x956)](0x2, '0'); _0x2f3838['textContent'] = _0x1e5b43 + ':' + _0x4a7779; const _0x389a36 = _0x1fbbe0[_0x3f36d4(0x4ef)]() + 0x1, _0x2fb2ab = _0x1fbbe0['getDate'](), _0x3a7fc7 = [_0x3f36d4(0x63c), _0x3f36d4(0xa42), _0x3f36d4(0x73c), _0x3f36d4(0xb9c), '星期四', _0x3f36d4(0x4a0), _0x3f36d4(0x997)][_0x1fbbe0[_0x3f36d4(0x961)]()]; _0x458a8e['textContent'] = _0x389a36 + '月' + _0x2fb2ab + '日\x20' + _0x3a7fc7; } else _0x9b627c['addEventListener'](_0x3f36d4(0x3cd), () => { const _0x3d9ac2 = _0x3f36d4; if (_0x49bc9f[_0x3d9ac2(0xa1e)] === 0x0) return; _0x300456 = (_0x1454f8 - 0x1 + _0x2c9d94[_0x3d9ac2(0xa1e)]) % _0xd2338c['length'], _0x1d075f(_0x5a8929[_0x2c614a], _0x16ad35); }); } } const _0xedbcc6 = document['getElementById'](_0x34dc25(0x341)), _0x5f576f = document[_0x34dc25(0x61b)]('chat-listen-together-button'), _0x2795b4 = document[_0x34dc25(0x61b)](_0x34dc25(0x989)), _0x337939 = document[_0x34dc25(0x61b)](_0x34dc25(0x3e0)), _0x585c9f = document['getElementById'](_0x34dc25(0x401)), _0x49d30d = document[_0x34dc25(0x61b)](_0x34dc25(0xb87)), _0x59e9b1 = document[_0x34dc25(0x61b)](_0x34dc25(0xa7c)), _0xe9f8b3 = document[_0x34dc25(0x61b)](_0x34dc25(0x80a)), _0x4dad50 = document[_0x34dc25(0x61b)](_0x34dc25(0x9f1)); let _0x2435c0 = []; async function _0x41348a() { const _0x3bbe83 = _0x34dc25; if ('gsKrx' === _0x3bbe83(0x525)) _0x3d9b16['assign'](_0x23fc90, { 'songName': _0x4a04d6, 'artist': _0x49a0fa, 'coverId': null, 'playableUrl': null }); else { if (!_0x4295e2['activeChatId']) return; _0x585c9f[_0x3bbe83(0x72d)] = _0x3bbe83(0xa3d), _0xedbcc6[_0x3bbe83(0x1f5)][_0x3bbe83(0xaf2)](_0x3bbe83(0xa03)); const _0x3e3953 = await _0x3c7c0a(); if (_0x3e3953[_0x3bbe83(0xa1e)] === 0x0) { _0x585c9f[_0x3bbe83(0x72d)] = _0x3bbe83(0x5c6); return; } _0x585c9f['innerHTML'] = '', _0x3e3953['forEach'](_0x170caa => { const _0x54dd12 = _0x3bbe83; if ('fNfnE' !== _0x54dd12(0x73a)) { const _0x190765 = document[_0x54dd12(0x6a8)](_0x54dd12(0xa9f)); _0x190765['className'] = _0x54dd12(0x7f7); const _0x205e59 = _0x170caa['cover'] ? URL[_0x54dd12(0xa4f)](_0x170caa[_0x54dd12(0x211)]) : _0x2fd48c; _0x190765[_0x54dd12(0x72d)] = _0x54dd12(0x7c4) + _0x205e59 + _0x54dd12(0x32c) + (_0x170caa[_0x54dd12(0x835)][_0x54dd12(0xa21)] || _0x54dd12(0x516)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x170caa[_0x54dd12(0x835)]['歌手'] || '未知艺术家') + _0x54dd12(0x293), _0x190765[_0x54dd12(0x46a)](_0x54dd12(0x3cd), () => { _0x1d3753(_0x170caa); }), _0x585c9f[_0x54dd12(0x1ce)](_0x190765); } else _0x20de22[_0x54dd12(0x1f5)]['toggle'](_0x54dd12(0xa03)), _0x196e0f[_0x54dd12(0x1f5)][_0x54dd12(0x5f7)]('show') && (_0x557968[_0x54dd12(0xb0c)] = _0x31e075[_0x54dd12(0x6cb)]); }); } } function _0x1a0498() { const _0x2297ae = _0x34dc25; _0xedbcc6['classList'][_0x2297ae(0x194)](_0x2297ae(0xa03)); } async function _0x1d3753(_0x4ea0b5) { const _0x53646b = _0x34dc25; if ('mZhrM' === _0x53646b(0x241)) { if (!_0x4295e2[_0x53646b(0x845)] || !_0x4ea0b5) return; let _0x1c26f2 = null; if (_0x4ea0b5['cover']) { if (_0x53646b(0x385) !== _0x53646b(0x385)) throw _0x20c1ea; else try { _0x1c26f2 = _0x53646b(0x2dd) + Date[_0x53646b(0xb3d)]() + '_' + Math[_0x53646b(0x6cc)](), await _0x190daf(_0x1c26f2, _0x4ea0b5['cover']); } catch (_0x4b2edc) { console[_0x53646b(0x214)](_0x53646b(0x938), _0x4b2edc); } } const _0x12f49a = { 'role': 'user', 'type': _0x53646b(0x5c7), 'content': _0x53646b(0x8a1) + _0x4ea0b5[_0x53646b(0x835)][_0x53646b(0xa21)] + ']', 'songId': _0x4ea0b5['id'], 'songName': _0x4ea0b5['info']['歌曲名称'], 'artist': _0x4ea0b5[_0x53646b(0x835)]['歌手'], 'coverId': _0x1c26f2, 'timestamp': Date['now']() }; _0x4295e2['conversationHistory'][_0x53646b(0x230)](_0x12f49a), _0x236ac2(), _0x1639f3(), _0x1a0498(), setTimeout(_0x1dc518, 0x64); } else { if (_0x3fc2d4['linkedWorldBookIds'][_0x53646b(0x2b7)](_0x42aaaa[_0x53646b(0x21f)])) _0x38a52b[_0x53646b(0xa20)] = !![]; } } _0x5f576f[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x41348a), _0x2795b4[_0x34dc25(0x46a)](_0x34dc25(0x3cd), _0x1a0498), _0x337939['addEventListener'](_0x34dc25(0x3cd), _0x1a0498); async function _0x1d9b2f(_0x2a7ca0, _0x1735cb, _0x4816bb) { const _0x46f5bb = _0x34dc25, _0x5d24fe = _0x4295e2[_0x46f5bb(0x7af)]['find'](_0x123036 => _0x123036[_0x46f5bb(0x20a)] && _0x123036[_0x46f5bb(0x20a)][_0x46f5bb(0x833)]), _0x29944b = _0x33b638(); if (_0x5d24fe && _0x5d24fe['id'] !== _0x29944b['id']) _0x5d24fe['activeListenSession'] = null, _0x925876(_0x46f5bb(0x814)), _0x1b6337(); else _0x5d24fe && _0x5d24fe['id'] === _0x29944b['id'] && _0x925876(_0x46f5bb(0x1a1)); _0x48b9ad(!![], _0x46f5bb(0x346)); if (!_0x29944b) { if (_0x46f5bb(0x4b9) === _0x46f5bb(0x4b9)) { _0x48b9ad(![]), _0x925876(_0x46f5bb(0x51e)); return; } else return new _0x433ca0(_0x451f1e => { const _0x1d8a86 = _0x46f5bb, _0x174924 = _0x424795['getElementById'](_0x1d8a86(0x752)), _0x4d7b9f = _0x28ab88[_0x1d8a86(0x61b)](_0x1d8a86(0x3d7)), _0x30ec32 = _0x34d7b3[_0x1d8a86(0x61b)]('modal-ok'), _0x15cb9c = _0x162b8a[_0x1d8a86(0x61b)](_0x1d8a86(0x3f3)), _0xe63f77 = _0x30fd08['getElementById'](_0x1d8a86(0x903)); _0x4d7b9f[_0x1d8a86(0x6c7)] = _0x44d04c, _0x174924[_0x1d8a86(0x7c9)][_0x1d8a86(0x458)] = _0x1d8a86(0x58f); const _0x50d386 = _0xdbb7cf => { const _0x2a1777 = _0x1d8a86; _0x174924[_0x2a1777(0x7c9)][_0x2a1777(0x458)] = 'none', _0x30ec32[_0x2a1777(0x81f)] = _0x15cb9c[_0x2a1777(0x81f)] = _0xe63f77['onclick'] = null, _0x11a578[_0x2a1777(0x33b)](_0x2a1777(0xb2b), _0x4eae96), _0x451f1e(_0xdbb7cf); }, _0x4eae96 = _0x282ec6 => { const _0x3eb53a = _0x1d8a86; if (_0x282ec6[_0x3eb53a(0x807)] === 'Escape') _0x50d386(![]); if (_0x282ec6[_0x3eb53a(0x807)] === _0x3eb53a(0x7d7)) _0x50d386(!![]); }; _0x30ec32[_0x1d8a86(0x81f)] = () => _0x50d386(!![]), _0x15cb9c[_0x1d8a86(0x81f)] = () => _0x50d386(![]), _0xe63f77[_0x1d8a86(0x81f)] = () => _0x50d386(![]), _0x5e36ce[_0x1d8a86(0x46a)]('keydown', _0x4eae96); }); } const _0x29ac08 = await _0x4c41ea(_0x2a7ca0); if (!_0x29ac08) { if (_0x46f5bb(0xb2d) !== _0x46f5bb(0xabe)) { _0x48b9ad(![]), _0x925876(_0x46f5bb(0x3d4)); return; } else _0x4c9021(), _0x3c8c82['click'](); } _0x29944b[_0x46f5bb(0x20a)] = { 'isActive': !![], 'songId': _0x2a7ca0, 'leaderId': _0x46f5bb(0x742), 'songName': _0x29ac08[_0x46f5bb(0x835)]['歌曲名称'], 'artist': _0x29ac08['info']['歌手'], 'cover': _0x29ac08[_0x46f5bb(0x211)] }, _0x1b6337(), document[_0x46f5bb(0x61b)](_0x46f5bb(0x648))['src'] = _0x29ac08['cover'] ? URL[_0x46f5bb(0xa4f)](_0x29ac08[_0x46f5bb(0x211)]) : _0x2fd48c, document[_0x46f5bb(0x61b)](_0x46f5bb(0x930))[_0x46f5bb(0x6c7)] = _0x29ac08['info']['歌曲名称'], document[_0x46f5bb(0x61b)](_0x46f5bb(0xb73))[_0x46f5bb(0x6c7)] = _0x29ac08[_0x46f5bb(0x835)]['歌手'], _0x14211f(_0x29ac08), _0x59e9b1[_0x46f5bb(0x7c9)][_0x46f5bb(0x458)] = _0x46f5bb(0x58f), setTimeout(() => _0x59e9b1[_0x46f5bb(0x1f5)][_0x46f5bb(0xaf2)](_0x46f5bb(0xa03)), 0xa), _0x4816bb[_0x46f5bb(0x72d)] = _0x46f5bb(0x41a) + _0x4816bb[_0x46f5bb(0x76d)](_0x46f5bb(0x21b))[_0x46f5bb(0x4fe)], _0x4295e2['conversationHistory'][_0x1735cb] && (_0x46f5bb(0xa11) !== 'mRpVM' ? _0x23891d[_0x46f5bb(0x832)] = !![] : (_0x4295e2[_0x46f5bb(0x369)][_0x1735cb]['accepted'] = !![], _0x236ac2())), _0x48b9ad(![]), _0x382fd6(_0x2a7ca0, [_0x2a7ca0]), _0x364150(_0x29ac08, !![]); } function _0x3b2a3a() { const _0x3b0b18 = _0x34dc25, _0x300f9a = _0x4295e2[_0x3b0b18(0x7af)][_0x3b0b18(0x7e6)](_0x375de6 => _0x375de6['activeListenSession'] && _0x375de6[_0x3b0b18(0x20a)][_0x3b0b18(0x833)]); _0x300f9a && (_0x3b0b18(0x413) === _0x3b0b18(0x66f) ? (_0x2551e2['push'](_0x3743b0[_0x47b994][_0x3b0b18(0x2c7)]()), _0xf53d0d++) : (_0x300f9a[_0x3b0b18(0x20a)] = null, _0x1b6337(), _0x925876(_0x3b0b18(0x7a1)), _0x364150(), _0x59e9b1[_0x3b0b18(0x1f5)]['remove']('show'), setTimeout(() => _0x59e9b1[_0x3b0b18(0x7c9)]['display'] = 'none', 0x12c))); } function _0x3f4f0d(_0x4de85e) { const _0x38daad = _0x34dc25; if (!_0x4de85e) return []; const _0x14d8e9 = _0x4de85e[_0x38daad(0x692)]('\x0a'), _0x144a2e = [], _0x3d9335 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x449704 of _0x14d8e9) { const _0x199686 = _0x449704[_0x38daad(0x4ed)](_0x3d9335); if (_0x199686) { const _0x576de0 = parseInt(_0x199686[0x1], 0xa), _0x476d5f = parseInt(_0x199686[0x2], 0xa), _0x381e15 = parseInt(_0x199686[0x3], 0xa) * (_0x199686[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x4857f4 = _0x576de0 * 0x3c + _0x476d5f + _0x381e15 / 0x3e8, _0x128512 = _0x449704['replace'](_0x3d9335, '')[_0x38daad(0x2c7)](); _0x128512 && _0x144a2e[_0x38daad(0x230)]({ 'time': _0x4857f4, 'text': _0x128512 }); } } return _0x144a2e; } function _0x14211f(_0x5af091) { const _0x3de56f = _0x34dc25; _0x2435c0 = _0x3f4f0d(_0x5af091[_0x3de56f(0x1d7)]), _0x4dad50['innerHTML'] = ''; if (_0x2435c0['length'] === 0x0) { _0x4dad50['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x2435c0[_0x3de56f(0xaa9)]((_0x16eb89, _0x1daedc) => { const _0x10ba94 = _0x3de56f; if ('OXttf' === _0x10ba94(0x7c7)) _0x21e6e5['style'][_0x10ba94(0x54b)] = _0x10ba94(0x3bd) + _0x15e030[_0x10ba94(0xa4f)](_0xdfa450) + '\x27)', _0x6cc65d[_0x10ba94(0x7c9)]['backgroundSize'] = _0x10ba94(0x211), _0x5935ba['style']['backgroundPosition'] = 'center'; else { const _0x3733f0 = document[_0x10ba94(0x6a8)]('p'); _0x3733f0['textContent'] = _0x16eb89['text'], _0x3733f0['id'] = _0x10ba94(0x812) + _0x1daedc, _0x4dad50[_0x10ba94(0x1ce)](_0x3733f0); } }); } function _0x4074f8(_0x423357, _0x45a7c2, _0x2da909, _0x3bf25e) { const _0x4a2b1b = _0x34dc25; if (_0x4a2b1b(0x51c) === _0x4a2b1b(0x51c)) { const _0xa2fa6 = (_0x3bf25e - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x423357 + _0x2da909 * Math[_0x4a2b1b(0x945)](_0xa2fa6), 'y': _0x45a7c2 + _0x2da909 * Math[_0x4a2b1b(0x32b)](_0xa2fa6) }; } else _0x3316b0 = _0x2933b2[_0x4a2b1b(0x9dc)], _0x5737cb = _0x2e05c0['avatar']; } function _0x503a5d(_0x1efbf5) { const _0x2ea9d0 = _0x34dc25; if ('UFbjw' !== _0x2ea9d0(0x7e7)) { const _0xdf8b6f = _0x4cc0c8['getElementById'](_0x2ea9d0(0x18c)); _0xdf8b6f[_0x2ea9d0(0x72d)] = ''; if (_0x510e23['userProfiles']['length'] === 0x0) { _0xdf8b6f[_0x2ea9d0(0x72d)] = _0x2ea9d0(0x1ca); return; } _0x295cdf[_0x2ea9d0(0x59b)][_0x2ea9d0(0xaa9)](_0x41ab7f => { const _0x462b63 = _0x2ea9d0, _0x2f8315 = _0x3e4d47[_0x462b63(0x6a8)](_0x462b63(0xa9f)); _0x2f8315[_0x462b63(0x6e1)] = _0x462b63(0xaa4), _0x2f8315['dataset']['id'] = _0x41ab7f['id']; const _0x3ef08e = _0x41ab7f['id'] === _0x2a34c5[_0x462b63(0x2e4)] ? _0x462b63(0x267) : ''; _0x2f8315['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x41ab7f[_0x462b63(0x1c4)] || _0x31f60e) + _0x462b63(0x464) + _0x41ab7f[_0x462b63(0x9dc)] + _0x3ef08e + _0x462b63(0x910) + _0x41ab7f['persona'][_0x462b63(0x705)](0x0, 0x64) + _0x462b63(0x708), _0x2f8315[_0x462b63(0x46a)](_0x462b63(0x3cd), () => _0x5a64da(_0x41ab7f['id'])), _0xdf8b6f[_0x462b63(0x1ce)](_0x2f8315); }); } else { const _0x25bf0d = _0x2ea9d0(0x441), _0x45916f = document[_0x2ea9d0(0x6ce)](_0x25bf0d, _0x2ea9d0(0xb3a)), _0x376440 = 0xfa, _0x2413ba = _0x376440 / 0x2, _0x15e2b8 = _0x376440 / 0x2, _0x24f507 = _0x376440 / 0x2 - 0x14; _0x45916f['setAttribute'](_0x2ea9d0(0x46c), _0x2ea9d0(0x792)), _0x45916f[_0x2ea9d0(0x2ef)](_0x2ea9d0(0x7ae), _0x2ea9d0(0x792)), _0x45916f['setAttribute'](_0x2ea9d0(0x846), _0x2ea9d0(0x8ab) + _0x376440 + '\x20' + _0x376440); const _0xdcd1d7 = Object[_0x2ea9d0(0xad1)](_0x1efbf5)[_0x2ea9d0(0x9a6)]((_0x38fd6c, _0x57d4c2) => _0x38fd6c + _0x57d4c2, 0x0); if (_0xdcd1d7 === 0x0) return _0x45916f; let _0x334584 = -0x5a; const _0x5930fe = [_0x2ea9d0(0x299), _0x2ea9d0(0x305), _0x2ea9d0(0x3fd), _0x2ea9d0(0xa80), _0x2ea9d0(0x523), '#ffb366', _0x2ea9d0(0x5f5), _0x2ea9d0(0x255)]; let _0xf12fd0 = 0x0; for (const _0x555f27 in _0x1efbf5) { const _0x4d1a23 = _0x1efbf5[_0x555f27]; if (_0x4d1a23 <= 0x0) continue; const _0x29f56a = _0x4d1a23 / _0xdcd1d7 * 0x168, _0x1835ed = _0x334584 + _0x29f56a, _0x5c4317 = _0x4074f8(_0x2413ba, _0x15e2b8, _0x24f507, _0x1835ed), _0x19c593 = _0x4074f8(_0x2413ba, _0x15e2b8, _0x24f507, _0x334584), _0x3e3bf5 = _0x29f56a > 0xb4 ? '1' : '0', _0x1cba13 = ['M', _0x5c4317['x'], _0x5c4317['y'], 'A', _0x24f507, _0x24f507, 0x0, _0x3e3bf5, 0x1, _0x19c593['x'], _0x19c593['y'], 'L', _0x2413ba, _0x15e2b8, 'Z'][_0x2ea9d0(0x247)]('\x20'), _0x57ed19 = document['createElementNS'](_0x25bf0d, _0x2ea9d0(0x3ba)); _0x57ed19['setAttribute']('d', _0x1cba13), _0x57ed19[_0x2ea9d0(0x2ef)](_0x2ea9d0(0x480), _0x5930fe[_0xf12fd0 % _0x5930fe[_0x2ea9d0(0xa1e)]]), _0xf12fd0++; const _0x16f600 = document['createElementNS'](_0x25bf0d, _0x2ea9d0(0x2e7)); _0x16f600[_0x2ea9d0(0x6c7)] = _0x555f27 + ':\x20' + _0x4d1a23[_0x2ea9d0(0x1ba)](0x2) + '\x20(' + (_0x4d1a23 / _0xdcd1d7 * 0x64)[_0x2ea9d0(0x1ba)](0x1) + '%)', _0x57ed19[_0x2ea9d0(0x1ce)](_0x16f600), _0x45916f[_0x2ea9d0(0x1ce)](_0x57ed19), _0x334584 = _0x1835ed; } return _0x45916f; } } function _0x4cec12() { const _0x2fd236 = _0x34dc25; if (_0x2435c0[_0x2fd236(0xa1e)] === 0x0) return; const _0x29bdca = _0x49d30d[_0x2fd236(0x54a)]; let _0x2de653 = -0x1; for (let _0x50f042 = 0x0; _0x50f042 < _0x2435c0[_0x2fd236(0xa1e)]; _0x50f042++) { if (_0x29bdca >= _0x2435c0[_0x50f042][_0x2fd236(0x359)]) { if (_0x2fd236(0x7a5) === _0x2fd236(0x85c)) { _0x5be6a2['activeMeetingScriptQueue'] = [..._0x3762be]; const _0x5380d2 = _0x17f8e8[_0x2fd236(0x63e)]['shift'](); _0x190d1b['textContent'] = _0x5380d2[_0x2fd236(0x34c)] === _0x2fd236(0x8ee) ? '旁白' : _0x5380d2['speaker'], _0x45cfa3[_0x2fd236(0x6c7)] = _0x5380d2[_0x2fd236(0x8af)], _0x5380d2[_0x2fd236(0x34c)] !== _0x2fd236(0x8ee) && _0x588446(_0x420317['activeMeetingCharId'], _0x5380d2[_0x2fd236(0x905)]); } else _0x2de653 = _0x50f042; } else { if ('lPfjy' !== _0x2fd236(0x704)) { _0x6a798a['innerHTML'] = _0x2fd236(0x2d6), _0x2b17fa[_0x2fd236(0x72d)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x53d9e0['getElementById'](_0x2fd236(0x549))[_0x2fd236(0x46a)](_0x2fd236(0x3cd), _0x3ccd5e), _0x371206[_0x2fd236(0x61b)]('diary-get-reply-button')['addEventListener'](_0x2fd236(0x3cd), _0x50e908); return; } else break; } } if (_0x2de653 !== -0x1) { const _0x3a0cf0 = _0x4dad50[_0x2fd236(0x4f8)]('p'); _0x3a0cf0['forEach'](_0x2f69bd => _0x2f69bd['classList']['remove'](_0x2fd236(0x45a))); const _0xe3483e = document['getElementById'](_0x2fd236(0x812) + _0x2de653); if (_0xe3483e) { if ('kMNCD' !== _0x2fd236(0x7ea)) { let _0x26a450 = _0x1e9468[_0x2fd236(0x61b)](_0x2fd236(0xb57) + _0x585dc1['id']); !_0x26a450 && (_0x26a450 = _0x1576ef[_0x2fd236(0x6a8)](_0x2fd236(0x7c9)), _0x26a450['id'] = 'style-' + _0x46d3ac['id'], _0x36ebc2[_0x2fd236(0x757)][_0x2fd236(0x1ce)](_0x26a450)); const _0xfce8c0 = _0x470569[_0x2fd236(0x697)], _0xc384aa = _0xfce8c0[_0x2fd236(0x1dc)](/\.bubble\.sent/g, '.bubble-' + _0x417858['id'] + _0x2fd236(0x7ce))['replace'](/\.bubble\.received/g, _0x2fd236(0x84c) + _0x54e449['id'] + '.message.ai'); _0x26a450[_0x2fd236(0x72d)] = _0xc384aa; } else _0xe3483e[_0x2fd236(0x1f5)]['add'](_0x2fd236(0x45a)), _0xe3483e[_0x2fd236(0x593)]({ 'behavior': _0x2fd236(0x7bd), 'block': _0x2fd236(0x231) }); } } } _0xe9f8b3['addEventListener'](_0x34dc25(0x3cd), () => { const _0x135813 = _0x34dc25; _0x59e9b1[_0x135813(0x1f5)][_0x135813(0x194)](_0x135813(0xa03)), setTimeout(() => _0x59e9b1['style'][_0x135813(0x458)] = _0x135813(0x678), 0x12c); }), document['getElementById'](_0x34dc25(0x740))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x4d6c2e = _0x34dc25; if (_0x4d6c2e(0x91f) === _0x4d6c2e(0x7b6)) return; else _0x4295e2[_0x4d6c2e(0xaef)] && _0x4295e2[_0x4d6c2e(0xaef)][_0x4d6c2e(0x833)] && (_0x59e9b1[_0x4d6c2e(0x7c9)][_0x4d6c2e(0x458)] = 'flex', setTimeout(() => _0x59e9b1[_0x4d6c2e(0x1f5)][_0x4d6c2e(0xaf2)](_0x4d6c2e(0xa03)), 0xa)); }), _0x49d30d[_0x34dc25(0x46a)](_0x34dc25(0x642), _0x4cec12); const _0x235cc3 = document['getElementById']('widget-play-pause-btn'), _0x140cf4 = document[_0x34dc25(0x61b)](_0x34dc25(0x66d)), _0x2d0982 = document[_0x34dc25(0x61b)]('widget-prev-btn'); _0x235cc3[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x388400 = _0x34dc25; if (_0x49d30d[_0x388400(0x1b2)]) { if ('ErlOh' === _0x388400(0xa29)) _0x49d30d['paused'] ? _0x388400(0x6dd) !== 'DjKSq' ? _0x22bfab(_0x388400(0x8cf) + _0x4dce51[_0x388400(0x1c9)]) : _0x49d30d['play']() : _0x388400(0x350) === _0x388400(0x350) ? _0x49d30d[_0x388400(0x942)]() : _0x42f6bf['style']['display'] = _0x388400(0x678); else { if (_0x4d7c52) _0x3bb67f['style'][_0x388400(0x54b)] = 'url(\x27' + _0x4a0e07[_0x388400(0xa4f)](_0x5fad0f) + '\x27)'; } } }), _0x140cf4[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x2a354f = _0x34dc25; if (_0x1c6e37[_0x2a354f(0xa1e)] === 0x0) return; _0x4483d3 = (_0x4483d3 + 0x1) % _0x1c6e37['length'], _0x382fd6(_0x1c6e37[_0x4483d3], _0x1c6e37); }), _0x2d0982[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0xe03362 = _0x34dc25; if (_0x1c6e37[_0xe03362(0xa1e)] === 0x0) return; _0x4483d3 = (_0x4483d3 - 0x1 + _0x1c6e37['length']) % _0x1c6e37[_0xe03362(0xa1e)], _0x382fd6(_0x1c6e37[_0x4483d3], _0x1c6e37); }), _0x49d30d['addEventListener'](_0x34dc25(0xb59), () => { const _0x295eae = _0x34dc25; _0x235cc3[_0x295eae(0x6c7)] = '❚❚'; }), _0x49d30d['addEventListener']('pause', () => { _0x235cc3['textContent'] = '▶'; }), _0x49d30d[_0x34dc25(0x46a)](_0x34dc25(0x412), () => { const _0x510e0c = _0x34dc25; _0x140cf4[_0x510e0c(0x3cd)](); }), _0x49d30d[_0x34dc25(0x46a)](_0x34dc25(0xb59), () => { const _0x195fcb = _0x34dc25, _0x242b4c = document[_0x195fcb(0x61b)]('global-player-play-pause-btn'); if (_0x242b4c) _0x242b4c[_0x195fcb(0x6c7)] = '❚❚'; }), _0x49d30d[_0x34dc25(0x46a)]('pause', () => { const _0xffc51 = _0x34dc25, _0x55dbae = document[_0xffc51(0x61b)]('global-player-play-pause-btn'); if (_0x55dbae) _0x55dbae[_0xffc51(0x6c7)] = '▶'; }), _0x49d30d[_0x34dc25(0x46a)]('ended', () => { const _0x20f9ae = _0x34dc25; if (_0x20f9ae(0xb7d) === _0x20f9ae(0xb7d)) { const _0x296f6a = document[_0x20f9ae(0x61b)](_0x20f9ae(0x418)); _0x296f6a && _0x296f6a[_0x20f9ae(0x3cd)](); } else _0x2385eb(_0x20f9ae(0x495)); }); function _0x5a355e(_0xacfc40) { const _0x1c0eda = _0x34dc25; if (!_0xacfc40 || typeof _0xacfc40 !== 'string') return null; const _0x2f5bb9 = _0xacfc40[_0x1c0eda(0x66b)]('['), _0x46d8ae = _0xacfc40['lastIndexOf'](']'); if (_0x2f5bb9 > -0x1 && _0x46d8ae > _0x2f5bb9) return _0xacfc40[_0x1c0eda(0x705)](_0x2f5bb9, _0x46d8ae + 0x1); return null; } document[_0x34dc25(0x61b)]('app-accounting')[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0xb72f73 = _0x34dc25; if (_0xb72f73(0x86c) === _0xb72f73(0x86c)) _0x45d912(), _0xd18e04(_0xb72f73(0x923), _0xb72f73(0x19d)); else { if (_0x5d60b9['isAnimatingDiary']) return; const _0xe8c09c = _0x394655[_0xb72f73(0x79b)], _0x1de2d8 = _0x528f05[_0xb72f73(0x344)](_0xfe3e7d[_0xb72f73(0x801)][_0xb72f73(0x7e6)](_0x389e6b => _0x389e6b['characterId'] === _0x46af9e[_0xb72f73(0x5c1)])[_0xb72f73(0x9d1)][_0xb72f73(0xa1e)] / 0x2); if (_0xe8c09c >= _0x1de2d8 - 0x1) return; _0x1ea689[_0xb72f73(0x443)] = !![]; const _0x4d5dc3 = _0xe8c09c + 0x1, _0x1d53b9 = _0x5b5bc8['getElementById']('diary-page-' + _0xe8c09c), _0xeb212f = _0x178685[_0xb72f73(0x61b)](_0xb72f73(0x3d1) + _0x4d5dc3); _0x1d53b9 && _0xeb212f ? (_0xeb212f[_0xb72f73(0x1f5)]['add'](_0xb72f73(0x301)), _0x1d53b9[_0xb72f73(0x1f5)][_0xb72f73(0xaf2)](_0xb72f73(0x7f3)), _0xeb212f[_0xb72f73(0x1f5)][_0xb72f73(0xaf2)]('is-visible'), _0x54ab97(() => { const _0x4679a5 = _0xb72f73; _0x1d53b9[_0x4679a5(0x1f5)][_0x4679a5(0x194)](_0x4679a5(0xa74), 'is-exiting-left'), _0xeb212f[_0x4679a5(0x1f5)][_0x4679a5(0x194)](_0x4679a5(0x301)), _0x30e1dc['diaryCurrentPage'] = _0x4d5dc3, _0xb212bf(), _0x500fb8[_0x4679a5(0x443)] = ![]; }, 0x2bc)) : _0x26dc1b['isAnimatingDiary'] = ![]; } }), document[_0x34dc25(0x61b)]('back-to-home-from-accounting')['addEventListener'](_0x34dc25(0x3cd), () => _0xd18e04(_0x34dc25(0x19d), 'accounting')); const _0x4862dd = document['getElementById'](_0x34dc25(0x6a9)), _0x31aee9 = document[_0x34dc25(0x61b)](_0x34dc25(0x9a4)); _0x4862dd['addEventListener']('click', _0x45d912), _0x31aee9[_0x34dc25(0x46a)]('click', () => { const _0x168ef8 = _0x34dc25; _0x168ef8(0x2f7) !== _0x168ef8(0x51d) ? (_0x4862dd[_0x168ef8(0x1f5)]['remove'](_0x168ef8(0x45a)), _0x31aee9[_0x168ef8(0x1f5)][_0x168ef8(0xaf2)](_0x168ef8(0x45a)), _0x57985a()) : _0x900efe[_0x168ef8(0x61b)](_0x168ef8(0x74d))[_0x168ef8(0x6c7)] = _0x168ef8(0x6f0); }); function _0x45d912() { const _0x22dbac = _0x34dc25; _0x31aee9[_0x22dbac(0x1f5)][_0x22dbac(0x194)](_0x22dbac(0x45a)), _0x4862dd[_0x22dbac(0x1f5)]['add'](_0x22dbac(0x45a)), _0x1d035e(); } function _0x1d035e() { const _0x3ade2b = _0x34dc25; if (_0x3ade2b(0x8f3) === 'CTshv') { let _0xcb8206 = _0x337333[_0x3ade2b(0x2c7)](); const _0x207ab9 = _0xcb8206[_0x3ade2b(0x4ed)](/(\[[\s\S]*\])/); _0x207ab9 && (_0xcb8206 = _0x207ab9[0x1]); const _0xcfa56e = _0x103643[_0x3ade2b(0xb4e)](_0xcb8206); if (_0x15b467[_0x3ade2b(0x9bd)](_0xcfa56e)) { _0x5beda9['activeMeetingScriptQueue'] = [..._0xcfa56e], _0x52f9f9[_0x3ade2b(0x6eb)][_0x3a4a64['id']] = [..._0xcfa56e], _0x1c34dd(); const _0x274735 = _0xcfa56e[_0x3ade2b(0x959)](_0xc599a8 => _0xc599a8[_0x3ade2b(0x34c)] === _0x3ade2b(0x8ee) ? _0xc599a8[_0x3ade2b(0x8af)] : _0xc599a8[_0x3ade2b(0x34c)] + ':\x20' + _0xc599a8[_0x3ade2b(0x8af)])['join']('\x0a\x0a'); _0x353109['conversationHistory'][_0x3ade2b(0x230)]({ 'role': _0x3ade2b(0x725), 'senderId': _0x5c9451['id'], 'timestamp': _0x4084b3[_0x3ade2b(0xb3d)](), 'isOffline': !![], 'content': _0x274735 }); } } else { const _0x1325eb = document[_0x3ade2b(0x61b)](_0x3ade2b(0x4ea)); document[_0x3ade2b(0x61b)]('accounting-title')['textContent'] = _0x3ade2b(0xac7), document[_0x3ade2b(0x61b)](_0x3ade2b(0x1b0))[_0x3ade2b(0x72d)] = '', _0x1325eb['innerHTML'] = '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', _0x14f4e4(), document[_0x3ade2b(0x61b)](_0x3ade2b(0x437))[_0x3ade2b(0x46a)](_0x3ade2b(0x3cd), _0x31468e), document[_0x3ade2b(0x61b)](_0x3ade2b(0x615))[_0x3ade2b(0x46a)]('click', _0x1b93fd => { const _0x342703 = _0x3ade2b; if (_0x1b93fd[_0x342703(0x6e7)][_0x342703(0x1f5)]['contains']('delete-expense-btn')) { const _0x50b57c = _0x1b93fd[_0x342703(0x6e7)][_0x342703(0x6c3)]['id']; _0x4fac8b(_0x342703(0x25c))[_0x342703(0xb30)](_0x460e49 => { _0x460e49 && _0x959abb(_0x50b57c); }); } }), document[_0x3ade2b(0x61b)](_0x3ade2b(0x7ee))[_0x3ade2b(0x5a1)](); } } function _0x4d9ded(_0x1ea6dd, _0x38eece) { const _0x37f370 = _0x34dc25; if ('ZjOeT' === _0x37f370(0x9fe)) { const _0xad0852 = document[_0x37f370(0x61b)](_0x37f370(0x4ea)), _0x8779a0 = document['getElementById']('header-actions'); document[_0x37f370(0x61b)](_0x37f370(0x53a))[_0x37f370(0x6c7)] = _0x38eece + _0x37f370(0x70d); const _0x5d9b9a = _0x1ea6dd[_0x37f370(0xb1b)][_0x37f370(0x9a6)]((_0x13dd0c, _0x1dd087) => _0x13dd0c + (_0x1dd087[_0x37f370(0x4a1)] || 0x0), 0x0); let _0x4b3bf4 = _0x37f370(0xa31) + _0x5d9b9a[_0x37f370(0x1ba)](0x2) + _0x37f370(0x4a5); _0xad0852[_0x37f370(0x72d)] = _0x4b3bf4; const _0x165dd4 = document[_0x37f370(0x61b)](_0x37f370(0x6ea)), _0x40c6e7 = { '餐饮美食': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', '交通出行': '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '购物消费': _0x37f370(0x1ad), '生活服务': _0x37f370(0x4eb), '休闲娱乐': _0x37f370(0xb00), '医疗健康': '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '人情红包': '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '其他杂项': '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '默认': _0x37f370(0x969) }; _0x1ea6dd[_0x37f370(0xb1b)][_0x37f370(0xaa9)](_0x44d551 => { const _0x561a2e = _0x37f370, _0x27ff87 = document[_0x561a2e(0x6a8)](_0x561a2e(0xa9f)); _0x27ff87['className'] = _0x561a2e(0x365), _0x27ff87[_0x561a2e(0x7c9)][_0x561a2e(0x38e)] = _0x561a2e(0x49b), _0x27ff87[_0x561a2e(0x7c9)][_0x561a2e(0x5b5)] = _0x561a2e(0x92d), _0x27ff87[_0x561a2e(0x7c9)][_0x561a2e(0x5ce)] = '15px', _0x27ff87[_0x561a2e(0x7c9)]['gap'] = '0'; const _0x2feef4 = _0x40c6e7[_0x44d551[_0x561a2e(0xa10)]] || _0x40c6e7['默认'], _0x1071c9 = _0x561a2e(0x1d8) + _0x2feef4 + _0x561a2e(0xa18), _0x2be434 = _0x561a2e(0xae1) + _0x1071c9 + _0x561a2e(0x717) + _0x44d551['description'] + '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>' + (_0x44d551['category'] || _0x561a2e(0x9d9)) + '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20' + (_0x44d551['amount'] || 0x0)[_0x561a2e(0x1ba)](0x2) + '</span></div>'; let _0x23b808 = ''; if (_0x44d551[_0x561a2e(0x541)] && _0x44d551[_0x561a2e(0x541)][_0x561a2e(0x259)]) { const _0x122f3b = _0x5aa3d9(_0x44d551['review'][_0x561a2e(0x259)]); _0x122f3b && (_0x23b808 = _0x561a2e(0xa24) + _0x122f3b[_0x561a2e(0x1c4)] + _0x561a2e(0x727) + _0x122f3b[_0x561a2e(0x9dc)] + _0x561a2e(0x924) + _0x44d551[_0x561a2e(0x541)]['text'] + _0x561a2e(0x3c2)); } _0x27ff87[_0x561a2e(0x72d)] = _0x2be434 + _0x23b808, _0x165dd4['appendChild'](_0x27ff87); }), _0x8779a0[_0x37f370(0x72d)] = _0x37f370(0x8c6), document[_0x37f370(0x61b)]('re-record-button')[_0x37f370(0x46a)](_0x37f370(0x3cd), async () => { const _0x1ca547 = _0x37f370; if ('igaJV' === _0x1ca547(0x4d6)) _0x46a64e[_0x1ca547(0x214)](_0x1ca547(0x3b2), _0x6d7f47), _0x517dc2(_0x1ca547(0x59f) + _0x2a1315[_0x1ca547(0x1c9)]); else { const _0x454054 = await _0x4fac8b(_0x1ca547(0x30f)); if (_0x454054) { const _0x58da53 = _0x4295e2[_0x1ca547(0x904)][_0x38eece]; if (_0x58da53 && _0x58da53[_0x1ca547(0x67c)]) { if (_0x1ca547(0x43c) === _0x1ca547(0x467)) { const _0x442f79 = (_0xd9403d - 0x5a) * _0x58577a['PI'] / 0xb4; return { 'x': _0x1c73bb + _0x4e8731 * _0x501b4e[_0x1ca547(0x945)](_0x442f79), 'y': _0x4c9917 + _0x8f4105 * _0x34617c[_0x1ca547(0x32b)](_0x442f79) }; } else _0x4295e2[_0x1ca547(0x3c9)][_0x1ca547(0x230)](..._0x58da53[_0x1ca547(0x67c)]); } delete _0x4295e2[_0x1ca547(0x904)][_0x38eece], _0x1b6337(), _0x1d035e(); } } }); } else _0x2df71d['src'] = _0xeac72e[_0x37f370(0xa4f)](_0x2582a1), _0x38079a[_0x37f370(0x7c9)]['display'] = 'block'; } function _0x57985a() { const _0x366a22 = _0x34dc25; if (_0x366a22(0x8e2) !== _0x366a22(0x8e2)) _0x521f00[_0x366a22(0x72d)] = _0x366a22(0x268) + _0x2005f7 + _0x366a22(0x856) + (_0x3114d6 === _0x366a22(0x508) ? '#a7c7e7' : '#f2b7c6') + ';\x22>' + _0x336399 + _0x366a22(0x3e9) + _0x58a820; else { const _0x3c21dc = document[_0x366a22(0x61b)](_0x366a22(0x4ea)); document[_0x366a22(0x61b)](_0x366a22(0x53a))[_0x366a22(0x6c7)] = '账本', document['getElementById']('header-actions')[_0x366a22(0x72d)] = ''; const _0x4b3ea3 = Object[_0x366a22(0x974)](_0x4295e2[_0x366a22(0x904)])['sort']((_0x106cf0, _0x5f3948) => new Date(_0x5f3948) - new Date(_0x106cf0)); if (_0x4b3ea3['length'] === 0x0) { _0x3c21dc[_0x366a22(0x72d)] = _0x366a22(0x980); return; } _0x3c21dc[_0x366a22(0x72d)] = '', _0x4b3ea3['forEach'](_0x947871 => { const _0x53f1f5 = _0x366a22; if ('HjAXC' !== _0x53f1f5(0x77c)) { const _0x3bebd2 = _0x3e4727[_0x53f1f5(0x369)][_0x43f1e4 - 0x2], _0x3f6a8b = _0x58b1be[_0x53f1f5(0x369)][_0x461130 - 0x1]; if (_0x3bebd2[_0x53f1f5(0x5b2)] === ![] && _0x3f6a8b[_0x53f1f5(0x5b2)] === !![]) _0x4bb9d5 = _0x53f1f5(0x666) + _0x2ed26e[_0x53f1f5(0x9dc)] + _0x53f1f5(0x618); else _0x3bebd2['isOffline'] === !![] && _0x3f6a8b[_0x53f1f5(0x5b2)] === ![] && (_0x16be19 = _0x53f1f5(0xab6) + _0x28c6d6[_0x53f1f5(0x9dc)] + _0x53f1f5(0x5de)); } else { const _0x235ed3 = document[_0x53f1f5(0x6a8)](_0x53f1f5(0xa9f)); _0x235ed3[_0x53f1f5(0x6e1)] = _0x53f1f5(0x365), _0x235ed3[_0x53f1f5(0x7c9)][_0x53f1f5(0x98e)] = _0x53f1f5(0x8eb); const _0x57422a = _0x4295e2['accountingLedger'][_0x947871], _0x5d7f6a = _0x57422a[_0x53f1f5(0xb1b)][_0x53f1f5(0x9a6)]((_0x1a5b57, _0x95c1d4) => _0x1a5b57 + (_0x95c1d4['amount'] || 0x0), 0x0); _0x235ed3[_0x53f1f5(0x72d)] = _0x53f1f5(0x82f) + _0x947871 + _0x53f1f5(0x2e6) + _0x5d7f6a['toFixed'](0x2) + _0x53f1f5(0x279), _0x235ed3[_0x53f1f5(0x46a)]('click', () => { const _0xf65306 = _0x53f1f5; _0x4862dd['classList'][_0xf65306(0x194)](_0xf65306(0x45a)), _0x31aee9[_0xf65306(0x1f5)][_0xf65306(0xaf2)]('active'), _0x4d9ded(_0x57422a, _0x947871); }), _0x3c21dc['appendChild'](_0x235ed3); } }); } } function _0x31468e() { const _0x42a582 = _0x34dc25, _0x1168ac = document[_0x42a582(0x61b)](_0x42a582(0x7ee)), _0x1f5431 = document[_0x42a582(0x61b)]('expense-amount'), _0x369d2f = _0x1168ac[_0x42a582(0x21f)][_0x42a582(0x2c7)](), _0x518fd5 = parseFloat(_0x1f5431[_0x42a582(0x21f)]); if (!_0x369d2f || isNaN(_0x518fd5) || _0x518fd5 <= 0x0) { _0x925876(_0x42a582(0x1b5)); return; } _0x4295e2[_0x42a582(0x3c9)][_0x42a582(0x230)]({ 'id': _0x42a582(0x68c) + Date[_0x42a582(0xb3d)](), 'description': _0x369d2f, 'amount': _0x518fd5, 'timestamp': Date[_0x42a582(0xb3d)]() }), _0x1b6337(), _0x14f4e4(), _0x1168ac['value'] = '', _0x1f5431[_0x42a582(0x21f)] = '', _0x1168ac[_0x42a582(0x5a1)](); } function _0x959abb(_0x27782b) { const _0x4cd409 = _0x34dc25; if (_0x4cd409(0x77a) === _0x4cd409(0x751)) { _0x1213d8(_0x4cd409(0xac1)); return; } else { const _0x1d059f = _0x4295e2[_0x4cd409(0x3c9)][_0x4cd409(0xb2e)](_0x3410c1 => _0x3410c1['id'] === _0x27782b); _0x1d059f > -0x1 && (_0x4295e2[_0x4cd409(0x3c9)][_0x4cd409(0x99e)](_0x1d059f, 0x1), _0x1b6337(), _0x14f4e4()); } } function _0x14f4e4() { const _0x5c580b = _0x34dc25, _0x4edf0f = document[_0x5c580b(0x61b)](_0x5c580b(0x615)), _0x345e12 = document[_0x5c580b(0x61b)]('organize-button-container'), _0x5ce1b8 = new Date(), _0x584eaf = _0x4295e2[_0x5c580b(0x3c9)][_0x5c580b(0x695)](_0x3f7165 => new Date(_0x3f7165[_0x5c580b(0x6aa)])[_0x5c580b(0x753)]() === _0x5ce1b8[_0x5c580b(0x753)]()); if (_0x584eaf[_0x5c580b(0xa1e)] === 0x0) { if (_0x5c580b(0x926) !== 'yKAMx') { _0x4edf0f[_0x5c580b(0x72d)] = _0x5c580b(0x630), _0x345e12[_0x5c580b(0x72d)] = ''; return; } else _0x5c8c84['error'](_0x5c580b(0x2df), _0x43e261); } _0x4edf0f[_0x5c580b(0x72d)] = '', _0x584eaf['sort']((_0x46c003, _0x4a0099) => _0x4a0099[_0x5c580b(0x6aa)] - _0x46c003['timestamp'])[_0x5c580b(0xaa9)](_0x3d4b52 => { const _0x46a4d8 = _0x5c580b; if (_0x46a4d8(0x4bc) === 'WJymy') _0x55fd2a[_0x46a4d8(0x662)](_0x46a4d8(0x1a9) + _0x59696c[_0x46a4d8(0x845)]); else { const _0x5e202d = document['createElement'](_0x46a4d8(0xa9f)); _0x5e202d[_0x46a4d8(0x6e1)] = _0x46a4d8(0x365), _0x5e202d[_0x46a4d8(0x72d)] = _0x46a4d8(0x82f) + _0x3d4b52[_0x46a4d8(0x489)] + _0x46a4d8(0x5af) + _0x3d4b52[_0x46a4d8(0x4a1)][_0x46a4d8(0x1ba)](0x2) + _0x46a4d8(0x2a4) + _0x3d4b52['id'] + _0x46a4d8(0x402), _0x4edf0f[_0x46a4d8(0x1ce)](_0x5e202d); } }), _0x345e12 && (_0x345e12[_0x5c580b(0x72d)] = _0x5c580b(0xb45), document['getElementById'](_0x5c580b(0x332))[_0x5c580b(0x46a)](_0x5c580b(0x3cd), _0x3da0f9)); } async function _0x3da0f9() { const _0x40b04f = _0x34dc25; if (_0x40b04f(0x540) !== _0x40b04f(0xa2b)) { const _0x3947a5 = new Date(), _0x4efaad = _0x3947a5[_0x40b04f(0x874)]() + '-' + String(_0x3947a5[_0x40b04f(0x4ef)]() + 0x1)[_0x40b04f(0x956)](0x2, '0') + '-' + String(_0x3947a5[_0x40b04f(0x72b)]())[_0x40b04f(0x956)](0x2, '0'); if (_0x4295e2[_0x40b04f(0x904)][_0x4efaad]) { _0x925876(_0x40b04f(0x357)); return; } const _0xe86c7a = _0x4295e2[_0x40b04f(0x3c9)][_0x40b04f(0x695)](_0x369116 => new Date(_0x369116[_0x40b04f(0x6aa)])[_0x40b04f(0x753)]() === _0x3947a5[_0x40b04f(0x753)]()); if (_0xe86c7a[_0x40b04f(0xa1e)] === 0x0) { _0x925876(_0x40b04f(0x9cf)); return; } _0x48b9ad(!![], _0x40b04f(0xaed)); try { const _0x257e51 = ['餐饮美食', '交通出行', _0x40b04f(0x4ae), _0x40b04f(0xb86), _0x40b04f(0xa0a), _0x40b04f(0x207), '人情红包', '其他杂项'], _0x57eb49 = _0xe86c7a[_0x40b04f(0x959)](_0x3b9025 => '-\x20' + _0x3b9025['description'] + ':\x20' + _0x3b9025[_0x40b04f(0x4a1)])['join']('\x0a'), _0x52683e = _0x4295e2['characters'][_0x40b04f(0x959)](_0x4324c9 => { const _0xbf7d0c = _0x40b04f; if (_0xbf7d0c(0x803) === _0xbf7d0c(0x803)) { const _0x28699c = _0x4295e2['chats']['find'](_0x45335d => _0x45335d[_0xbf7d0c(0x63a)] === 'private' && _0x45335d[_0xbf7d0c(0x5c9)]['includes'](_0x4324c9['id'])), _0x24d767 = _0x4295e2['userProfiles']['find'](_0x38c24f => _0x38c24f['id'] === (_0x28699c?.[_0xbf7d0c(0x4b1)] || _0x4295e2[_0xbf7d0c(0x2e4)])) || { 'id': _0xbf7d0c(0x80f), 'name': '你' }; let _0x5d35f9 = ''; return _0x4324c9['linkedWorldBookIds'] && _0x4324c9['linkedWorldBookIds'][_0xbf7d0c(0xa1e)] > 0x0 && (_0x5d35f9 = _0x4324c9[_0xbf7d0c(0x473)][_0xbf7d0c(0x959)](_0x16fa4a => _0x4295e2[_0xbf7d0c(0x496)]['find'](_0x35927e => _0x35927e['id'] === _0x16fa4a))['filter'](Boolean)[_0xbf7d0c(0x959)](_0x5911be => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x5911be[_0xbf7d0c(0x9dc)] + _0xbf7d0c(0x890) + _0x5911be[_0xbf7d0c(0x8f0)])[_0xbf7d0c(0x247)]('')), '\x20\x20-\x20角色ID:\x20' + _0x4324c9['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x4324c9[_0xbf7d0c(0x9dc)] + _0xbf7d0c(0x76c) + _0x4324c9[_0xbf7d0c(0xb70)] + _0xbf7d0c(0xa50) + _0x24d767[_0xbf7d0c(0x9dc)] + _0xbf7d0c(0x62d) + _0x24d767['id'] + ')\x0a' + _0x5d35f9; } else { const _0x4e8daf = _0x236ea5[_0xbf7d0c(0x2f0)]('customFeedWallpaper'); _0x4e8daf ? _0x6ec7d0[_0xbf7d0c(0x61b)]('music-screen')[_0xbf7d0c(0x7c9)][_0xbf7d0c(0xb7e)]('--feed-bg-image', 'url(' + _0x4e8daf + ')') : _0x42c9c7[_0xbf7d0c(0x61b)](_0xbf7d0c(0x6cf))[_0xbf7d0c(0x7c9)][_0xbf7d0c(0xb7e)](_0xbf7d0c(0x609), 'none'); } })[_0x40b04f(0x247)]('\x0a'), _0x1abb3d = _0x4295e2[_0x40b04f(0x59b)][_0x40b04f(0x959)](_0x143a2c => _0x40b04f(0x878) + _0x143a2c['id'] + _0x40b04f(0x2b1) + _0x143a2c[_0x40b04f(0x9dc)] + _0x40b04f(0x76c) + (_0x143a2c['persona'] || '无'))['join']('\x0a'), _0x5792c2 = _0x40b04f(0xaca), _0x363524 = '#\x20固定分类列表\x0a[' + _0x257e51[_0x40b04f(0x247)](',\x20') + _0x40b04f(0xa60) + _0x52683e + _0x40b04f(0x224) + _0x1abb3d + _0x40b04f(0xab1) + _0x57eb49, _0x1e5bd7 = [{ 'role': 'system', 'content': _0x5792c2 }, { 'role': 'user', 'content': _0x363524 }], _0x3de544 = await _0x110c3c(_0x1e5bd7, { 'json': !![] }), _0x5300dc = _0x5a355e(_0x3de544); if (!_0x5300dc) throw new Error('AI返回的内容里找不到有效的JSON数组。原始回复:\x20' + _0x3de544); const _0x2d4332 = JSON[_0x40b04f(0xb4e)](_0x5300dc); _0x4295e2['accountingLedger'][_0x4efaad] = { 'categorizedExpenses': _0x2d4332, 'timestamp': Date[_0x40b04f(0xb3d)](), 'originalExpenses': _0xe86c7a }, _0x4295e2['accountingData'] = _0x4295e2[_0x40b04f(0x3c9)][_0x40b04f(0x695)](_0x22bf78 => new Date(_0x22bf78['timestamp'])[_0x40b04f(0x753)]() !== _0x3947a5[_0x40b04f(0x753)]()), _0x1b6337(), _0x4d9ded(_0x4295e2['accountingLedger'][_0x4efaad], _0x4efaad); } catch (_0x1868de) { _0x925876(_0x40b04f(0xb1c) + _0x1868de[_0x40b04f(0x1c9)]); } finally { _0x40b04f(0x509) === _0x40b04f(0x509) ? _0x48b9ad(![]) : _0x4e87d1('错误:\x20' + _0x5e4694[_0x40b04f(0x1c9)]); } } else _0x59b9e5[_0x40b04f(0x214)](_0x40b04f(0x754), _0x32d46a); } async function _0x2c1657() { const _0xd64172 = _0x34dc25, _0x11b475 = [..._0x3d4134]; try { const _0x42ea45 = localStorage['getItem'](_0xd64172(0xb99)); if (_0x42ea45) { const _0x194513 = JSON[_0xd64172(0xb4e)](_0x42ea45); Array[_0xd64172(0x9bd)](_0x194513) ? _0x4cfb86 = [..._0x11b475, ..._0x194513] : _0xd64172(0x947) !== _0xd64172(0x947) ? _0x1d2cb9 += '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a' : _0x4cfb86 = _0x11b475; } else _0x4cfb86 = _0x11b475; } catch (_0xf61ddd) { 'bxeBh' !== _0xd64172(0x5bb) ? (_0x3b1dae[_0xd64172(0x1ce)](_0x571041), _0x257a62['appendChild'](_0x844f8d)) : (console[_0xd64172(0x214)]('加载自定义表情包失败，真是没用。', _0xf61ddd), _0x4cfb86 = _0x11b475); } if (!localStorage['getItem']('noir_data_migration_v1_complete')) { _0x4fac8b(_0xd64172(0x3f2))[_0xd64172(0xb30)](async _0x1ef93d => { const _0x490978 = _0xd64172; _0x1ef93d ? (_0x48b9ad(!![], '正在升级聊天数据结构...'), await _0x45124d(), localStorage[_0x490978(0x783)](_0x490978(0x536), _0x490978(0x23e)), _0x48b9ad(![]), _0x925876(_0x490978(0xb35)), setTimeout(() => location['reload'](), 0x5dc)) : _0x925876(_0x490978(0x61c)); }); return; } if (!localStorage['getItem'](_0xd64172(0xb11))) { console[_0xd64172(0x777)](_0xd64172(0x759)), _0x48b9ad(!![], _0xd64172(0xb3e)); const _0x47786f = await _0x5db71d(); localStorage[_0xd64172(0x783)](_0xd64172(0xb11), _0xd64172(0x23e)), _0x48b9ad(![]); if (_0x47786f > 0x0) { _0x925876('好友圈数据升级完成，迁移了\x20' + _0x47786f + '\x20张旧图片。应用即将刷新。'), setTimeout(() => location[_0xd64172(0x377)](), 0x5dc); return; } } if (!localStorage[_0xd64172(0x2f0)]('noir_migration_fc_v1_complete')) { } if (!localStorage[_0xd64172(0x2f0)](_0xd64172(0x889))) { if (_0xd64172(0x73e) !== _0xd64172(0x73e)) _0x5d719a[_0xd64172(0x21f)] = _0x5a013f[_0xd64172(0x5f2)]['name'] || '', _0x18daec[_0xd64172(0x1b2)] = _0xdebf89[_0xd64172(0x5f2)][_0xd64172(0x1c4)] || _0x27be1a, _0x5b69b8[_0xd64172(0x21f)] = _0x4fa730['userProfile'][_0xd64172(0xb70)] || ''; else { console['log']('执行音乐封面数据净化...'), _0x48b9ad(!![], _0xd64172(0xa59)); const _0x56204a = await _0x5ead46(); localStorage['setItem'](_0xd64172(0x889), 'true'), _0x48b9ad(![]); if (_0x56204a > 0x0) { _0x925876('音乐数据升级完成，迁移了\x20' + _0x56204a + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0xd64172(0x377)](), 0x5dc); return; } } } const _0x31d533 = document['getElementById'](_0xd64172(0x42f)); _0x31d533[_0xd64172(0x46a)](_0xd64172(0x3cd), () => { _0x23b581(), _0xd18e04('snoopList', 'home'); }); const _0x1dc73c = _0x424257(); try { const _0x504f16 = localStorage['getItem'](_0xd64172(0x372)); if (_0x504f16) { if (_0xd64172(0x810) === _0xd64172(0x810)) { const _0x2b3fb6 = JSON[_0xd64172(0xb4e)](_0x504f16); _0x2b3fb6[_0xd64172(0x904)] && (_0x4295e2[_0xd64172(0x904)] = _0x2b3fb6[_0xd64172(0x904)], console[_0xd64172(0x777)](_0xd64172(0x6c5))); } else { const _0x11f8c4 = _0x24a194['getElementById'](_0x296aae); if (_0x11f8c4) _0x11f8c4[_0xd64172(0x1b2)] = _0x102681['coverUrl']; } } } catch (_0x3e8e55) { console[_0xd64172(0x214)](_0xd64172(0x1e6), _0x3e8e55); } _0x3b8d4e(), _0x4937b5(), _0x3b5830(), _0x30d85c(), _0x53652f(), _0x318f2f(), _0x1d7793(), _0x3f3a7b(), _0x411321(), _0x529a13(), _0x683f50(), _0x364150(), _0x454b80(), setInterval(_0x454b80, 0x7530), _0x1dfe11(), _0x3a458e(), _0x1eca0b(); const _0x25b24a = document['getElementById'](_0xd64172(0x72a)); document[_0xd64172(0x61b)](_0xd64172(0x740))[_0xd64172(0x46a)](_0xd64172(0x3cd), function (_0x472407) { const _0x480d2a = _0xd64172; if (_0x472407[_0x480d2a(0x6e7)]['closest'](_0x480d2a(0x655))) return; const _0x8f9c6e = document['getElementById'](_0x480d2a(0x483)); if (_0x8f9c6e) { if (_0x480d2a(0x4a2) !== _0x480d2a(0x4a2)) { const _0x12798c = _0x12a06d[_0x480d2a(0x333)](_0x512ba2); _0x56878c = _0x2562b9[_0x480d2a(0x1c5)](_0x12798c), _0x403806[_0x480d2a(0x777)](_0x480d2a(0x304)); } else _0x8f9c6e[_0x480d2a(0x3cd)](); } }), _0xd18e04(_0xd64172(0x19d), _0xd64172(0x6f8)); (_0x1dc73c || _0x4295e2['characters']['length'] === 0x0) && (_0x925876(_0xd64172(0x39d)), setTimeout(() => { const _0x2f9f72 = _0xd64172; _0x2f9f72(0x1cf) === _0x2f9f72(0x1cf) ? (_0xd18e04(_0x2f9f72(0x19a), _0x2f9f72(0x19d)), setTimeout(() => _0x558554(), 0x64)) : _0x3b5e94[_0x2f9f72(0x718)](_0x19e340, _0x5163fa); }, 0x6a4)); document['getElementById']('meeting-reroll-button')[_0xd64172(0x46a)](_0xd64172(0x3cd), _0x7718fd); const _0x3de960 = document[_0xd64172(0x61b)]('widget-bg-input'); document[_0xd64172(0x61b)](_0xd64172(0x3c7))['addEventListener']('click', () => _0x3de960['click']()), document[_0xd64172(0x61b)](_0xd64172(0x59c))['addEventListener']('click', () => { const _0x5374dd = _0xd64172; _0x5374dd(0x434) !== _0x5374dd(0xac0) ? (_0x4295e2[_0x5374dd(0x81c)][_0x5374dd(0x73f)] = null, _0x1b6337(), _0x1dfe11(), _0x925876(_0x5374dd(0x778))) : (_0x363df0[_0x5374dd(0x37c)] = _0x5e2c44, _0xb32fe9 = !![]); }), _0x3de960[_0xd64172(0x46a)](_0xd64172(0x631), async _0x29c8e4 => { const _0x2109df = _0xd64172, _0x2d055b = _0x29c8e4[_0x2109df(0x6e7)]['files'][0x0]; if (!_0x2d055b) return; try { if ('ZDjiE' === 'KfiYo') { _0x417fbf = _0x18b7ce; let _0x30bccc = null; if (_0x48aa35?.[_0x2109df(0x63a)] === _0x2109df(0x780)) _0x30bccc = _0x42261b(_0x5b6dc0[_0x2109df(0x5c9)][0x0]); else _0xdf6ac0?.[_0x2109df(0x63a)] === _0x2109df(0x519) && _0x511178 && (_0x30bccc = _0x4e63d1(_0x3b61af)); _0x30bccc?.[_0x2109df(0x1c4)] && (_0x5d167b = _0x30bccc['avatar']); } else { const _0x2dae8f = await _0x5780c8(_0x2d055b); _0x4295e2[_0x2109df(0x81c)][_0x2109df(0x73f)] = _0x2dae8f, _0x1b6337(), _0x1dfe11(), _0x925876(_0x2109df(0x515)); } } catch (_0x2f0eec) { _0x925876(_0x2109df(0x8cf) + _0x2f0eec['message']); } }), _0x1962f6(), document[_0xd64172(0x61b)](_0xd64172(0xa83))[_0xd64172(0x46a)](_0xd64172(0x3cd), () => document[_0xd64172(0x61b)](_0xd64172(0xb13))[_0xd64172(0x3cd)]()), document['getElementById'](_0xd64172(0x514))[_0xd64172(0x46a)](_0xd64172(0x3cd), async () => { const _0x414015 = _0xd64172; _0x414015(0x271) === _0x414015(0x271) ? (await _0x5505ca(_0x414015(0x183)), localStorage['removeItem'](_0x414015(0x693)), _0x1962f6(), _0x925876(_0x414015(0x28a))) : (_0x34be11['stopPropagation'](), _0x32ede6[_0x414015(0x1f5)]['toggle']('visible'), _0x2cdca7[_0x414015(0x1f5)][_0x414015(0x367)](_0x414015(0x1ae))); }), document['getElementById'](_0xd64172(0xb13))[_0xd64172(0x46a)](_0xd64172(0x631), async _0x5a1456 => { const _0x3410fb = _0xd64172, _0x37f67a = _0x5a1456[_0x3410fb(0x6e7)]['files'][0x0]; if (!_0x37f67a) return; try { 'TYQij' !== _0x3410fb(0x722) ? (await _0x190daf('widget_badge', _0x37f67a), await _0x1962f6(), _0x925876(_0x3410fb(0x28d))) : _0x3b1767[_0x3410fb(0x2cf)](_0x4a2e94, _0x2a4977[_0x3410fb(0x867)]); } catch (_0x1f13f7) { 'wryQq' !== _0x3410fb(0x9c3) ? _0x925876(_0x3410fb(0x8cf) + _0x1f13f7['message']) : _0x4c2fba[_0x3410fb(0x4f8)](_0x3410fb(0x35e))[_0x3410fb(0xaa9)](_0x43a301 => { const _0x55acd9 = _0x3410fb; _0x43a301[_0x55acd9(0x46a)](_0x55acd9(0x3cd), () => { const _0x5e5648 = _0x55acd9, _0x113e1f = _0x40c2a6[_0x5e5648(0xb4e)](_0x43a301[_0x5e5648(0x6c3)][_0x5e5648(0x777)][_0x5e5648(0x1dc)](/&quot;/g, '\x22')), _0xc93cf6 = _0x43a301[_0x5e5648(0x6c3)][_0x5e5648(0xb6c)], _0x3e108c = _0x43a301[_0x5e5648(0x6c3)][_0x5e5648(0x872)]; _0x236d71(_0xc93cf6, _0x3e108c, _0x113e1f); }); }); } }), _0xb2a6c7(), document[_0xd64172(0x61b)](_0xd64172(0x784))['addEventListener'](_0xd64172(0x546), _0x4dfc42), document[_0xd64172(0x61b)]('diary-entries-container')[_0xd64172(0x46a)](_0xd64172(0x229), _0x4dfc42, { 'passive': ![] }), document['getElementById']('upload-card-button')['addEventListener'](_0xd64172(0x3cd), () => document['getElementById'](_0xd64172(0x228))[_0xd64172(0x3cd)]()), document['getElementById'](_0xd64172(0x439))[_0xd64172(0x46a)]('click', async () => { const _0x59cc4d = _0xd64172; await _0x5505ca(_0x59cc4d(0x729)), localStorage[_0x59cc4d(0x662)](_0x59cc4d(0x34f)), _0xb2a6c7(), _0x925876(_0x59cc4d(0x36c)); }), document[_0xd64172(0x61b)](_0xd64172(0x228))[_0xd64172(0x46a)](_0xd64172(0x631), async _0x1d521f => { const _0x2c4774 = _0xd64172; if (_0x2c4774(0x3d2) !== _0x2c4774(0x52c)) { const _0x1392f8 = _0x1d521f[_0x2c4774(0x6e7)][_0x2c4774(0xaa5)][0x0]; if (!_0x1392f8) return; try { await _0x190daf(_0x2c4774(0x729), _0x1392f8), await _0xb2a6c7(), _0x925876('卡片已更换！'); } catch (_0x5b8d67) { _0x925876('错误:\x20' + _0x5b8d67['message']); } } else { const _0x48278f = _0x5e9a5f[_0x2c4774(0x1b8)] === _0x2c4774(0x742) ? _0x2c5f4d['name'] : _0x268351(_0xb175e1['author'])[_0x2c4774(0x9dc)]; return _0x2c4774(0x485) + new _0x28bde1(_0x44f9a5['timestamp'])[_0x2c4774(0x949)]() + ']\x20' + _0x48278f + '\x20写道:\x20' + _0x3ae7f2['content']; } }), document[_0xd64172(0x61b)](_0xd64172(0x9e9))[_0xd64172(0x46a)](_0xd64172(0x3cd), async () => { const _0x16eb5f = _0xd64172, _0x21bcf4 = await _0x4fac8b(_0x16eb5f(0x1af)); _0x21bcf4 && (localStorage[_0x16eb5f(0x662)](_0x16eb5f(0x693)), localStorage['removeItem']('cardWidgetState'), _0x925876('位置已重置，正在刷新...'), setTimeout(() => location[_0x16eb5f(0x377)](), 0x3e8)); }); const _0x3c23ea = document['getElementById'](_0xd64172(0x4ad)); _0x3c23ea['addEventListener']('click', () => { const _0x30700f = _0xd64172; if ('EoDxw' === _0x30700f(0x806)) { _0x5a9b56(_0x30700f(0x499)); return; } else _0x3a5b10(), _0xd18e04(_0x30700f(0x57b), _0x30700f(0x19d)); }); const _0x4b4a25 = document['getElementById'](_0xd64172(0x338)); _0x4b4a25[_0xd64172(0x46a)](_0xd64172(0x3cd), () => { const _0x2ef8d7 = _0xd64172; _0x2ef8d7(0x7a2) === _0x2ef8d7(0x8e7) ? _0x65fc32(_0x2ef8d7(0x1a1)) : (_0x22af97(), _0xd18e04(_0x2ef8d7(0x911), _0x2ef8d7(0x19d))); }), document[_0xd64172(0x61b)](_0xd64172(0x4c0))['addEventListener']('click', () => _0xd18e04(_0xd64172(0x19d), _0xd64172(0x911))), document['getElementById']('back-to-home-from-diary-list')[_0xd64172(0x46a)](_0xd64172(0x3cd), () => _0xd18e04(_0xd64172(0x19d), _0xd64172(0x57b))), document['getElementById'](_0xd64172(0x552))[_0xd64172(0x46a)](_0xd64172(0x3cd), () => { const _0x538ad1 = _0xd64172; _0x4295e2[_0x538ad1(0x5c1)] = null, _0xd18e04(_0x538ad1(0x57b), 'diaryView'); }), document[_0xd64172(0x61b)](_0xd64172(0x779))[_0xd64172(0x46a)]('click', _0x41f4f1), document[_0xd64172(0x61b)](_0xd64172(0x7a8))[_0xd64172(0x46a)]('click', _0x25e292), document['getElementById'](_0xd64172(0x4ee))['addEventListener'](_0xd64172(0xb2b), _0x5043db => { const _0x57193a = _0xd64172; _0x5043db[_0x57193a(0x807)] === _0x57193a(0x7d7) && !_0x5043db[_0x57193a(0x308)] && (_0x5043db[_0x57193a(0x3a7)](), _0x41f4f1()); }); const _0x1d308d = [_0xd64172(0x8a7), _0xd64172(0x56c), _0xd64172(0x265), _0xd64172(0x6f2), 'shy']; _0x1d308d[_0xd64172(0xaa9)](_0x4d7438 => { const _0x36994d = _0xd64172, _0x5e0e6c = document[_0x36994d(0x61b)]('char-edit-sprite-' + _0x4d7438 + _0x36994d(0x8c8)), _0x12221d = document[_0x36994d(0x61b)]('char-edit-sprite-' + _0x4d7438 + '-input'); _0x5e0e6c && _0x12221d && (_0x5e0e6c[_0x36994d(0x46a)](_0x36994d(0x3cd), () => _0x12221d[_0x36994d(0x3cd)]()), _0x12221d['addEventListener'](_0x36994d(0x631), _0x30b0b3 => { const _0x47c4b9 = _0x36994d, _0x16da99 = _0x30b0b3[_0x47c4b9(0x6e7)][_0x47c4b9(0xaa5)][0x0]; if (!_0x16da99) return; try { const _0x265fd1 = URL[_0x47c4b9(0xa4f)](_0x16da99); _0x5e0e6c[_0x47c4b9(0x7c9)][_0x47c4b9(0x54b)] = _0x47c4b9(0x3bd) + _0x265fd1 + '\x27)'; } catch (_0x39d617) { _0x47c4b9(0x5e9) === 'vXWpr' ? _0x4f3057['error']('净化好友圈时出错，真是的。', _0x2470e6) : _0x925876('图片预览失败:\x20' + _0x39d617[_0x47c4b9(0x1c9)]); } })); }), document[_0xd64172(0x61b)]('galgame-textbox-container')[_0xd64172(0x46a)](_0xd64172(0x3cd), _0x4f3690), document[_0xd64172(0x61b)](_0xd64172(0x435))[_0xd64172(0x46a)](_0xd64172(0x3cd), () => { const _0x474770 = _0xd64172; _0x4295e2[_0x474770(0x9ed)] = _0x4295e2[_0x474770(0x9ed)] === _0x474770(0x9e8) ? _0x474770(0x823) : _0x474770(0x9e8), _0x56a34a(); }), document['getElementById'](_0xd64172(0x36a))[_0xd64172(0x46a)](_0xd64172(0x546), _0x43cfee), document[_0xd64172(0x61b)](_0xd64172(0x36a))[_0xd64172(0x46a)](_0xd64172(0x229), _0x43cfee, { 'passive': ![] }); let _0x5d808d = null; function _0x43cfee(_0x13044b) { const _0xf78aa6 = _0xd64172; if (_0x5d808d) clearTimeout(_0x5d808d); const _0x1c477a = _0x13044b[_0xf78aa6(0x6e7)]['closest'](_0xf78aa6(0x53c)); if (!_0x1c477a) return; const _0x3c75ff = parseInt(_0x1c477a['dataset'][_0xf78aa6(0xb55)], 0xa); if (isNaN(_0x3c75ff)) return; const _0x4f8db3 = () => { _0x5d808d = setTimeout(() => { const _0x2ba039 = _0x585d; if (_0x13044b[_0x2ba039(0x63a)] === _0x2ba039(0x229)) _0x13044b[_0x2ba039(0x3a7)](); _0x224ceb(_0x3c75ff); }, 0x320); }, _0x5ef605 = () => { if (_0x5d808d) clearTimeout(_0x5d808d); }; document['addEventListener']('mouseup', _0x5ef605, { 'once': !![] }), document[_0xf78aa6(0x46a)](_0xf78aa6(0x73b), _0x5ef605, { 'once': !![] }), document['addEventListener'](_0xf78aa6(0x94e), _0x5ef605, { 'once': !![] }), document[_0xf78aa6(0x46a)](_0xf78aa6(0x445), _0x5ef605, { 'once': !![] }), _0x4f8db3(); } document[_0xd64172(0x68f)][_0xd64172(0x46a)](_0xd64172(0x3cd), _0x35f716 => { const _0x2a8595 = _0xd64172, _0x3da881 = _0x35f716[_0x2a8595(0x6e7)]['closest'](_0x2a8595(0x4fc)); if (_0x3da881) { if (_0x2a8595(0x6e8) === _0x2a8595(0x6e8)) { const _0x3b4cf9 = _0x35f716[_0x2a8595(0x6e7)][_0x2a8595(0x97d)]('.lt-end-session-btn'), _0x588d4e = _0x35f716['target'][_0x2a8595(0x97d)](_0x2a8595(0x46f)); if (_0x3b4cf9) _0x3b2a3a(); else { if (_0x588d4e) { const _0x459fa6 = _0x588d4e[_0x2a8595(0x97d)](_0x2a8595(0x70f)), _0x3d2f0d = _0x588d4e[_0x2a8595(0x6c3)]['songId'], _0x94fd7a = parseInt(_0x459fa6[_0x2a8595(0x6c3)][_0x2a8595(0xb55)], 0xa); _0x1d9b2f(_0x3d2f0d, _0x94fd7a, _0x3da881); } else { if (_0x2a8595(0xaf3) === _0x2a8595(0xaf3)) { const _0x433be0 = _0x33b638(); _0x433be0 && _0x433be0[_0x2a8595(0x20a)] && _0x433be0['activeListenSession'][_0x2a8595(0x833)] && (_0x2a8595(0x2bf) !== 'Jxrrz' ? (_0x59e9b1['style'][_0x2a8595(0x458)] = _0x2a8595(0x58f), setTimeout(() => _0x59e9b1[_0x2a8595(0x1f5)][_0x2a8595(0xaf2)](_0x2a8595(0xa03)), 0xa)) : !_0x4e31a9[_0x2a8595(0x5f7)](_0x583866[_0x2a8595(0x6e7)]) && _0x227473['target'] !== _0x4e3756 && _0x2d707e['target'] !== _0x44b274 && _0x5ff098['classList']['remove']('show')); } else _0x423821[_0x2a8595(0x443)] = ![]; } } return; } else _0xced803[_0x2a8595(0x450)](_0x20fa17 => { const _0x270629 = _0x2a8595; _0x20fa17 ? _0x22f4f2(_0x20fa17) : _0x3ccbcf(new _0x280d7e(_0x270629(0x78e))); }, _0x30adad, _0x5f5836); } if (window[_0x2a8595(0x74e)]()[_0x2a8595(0xa41)]()) return; const _0x4c28e7 = _0x35f716[_0x2a8595(0x6e7)][_0x2a8595(0x97d)](_0x2a8595(0x70f)); if (_0x4c28e7 && !_0x35f716[_0x2a8595(0x6e7)][_0x2a8595(0x97d)](_0x2a8595(0x3af))) { const _0x162542 = parseInt(_0x4c28e7[_0x2a8595(0x6c3)][_0x2a8595(0xb55)], 0xa); !isNaN(_0x162542) && _0x224ceb(_0x162542); } }); const _0x27136a = document['getElementById'](_0xd64172(0x4d5)); _0x27136a && ('yBVSm' !== _0xd64172(0x628) ? _0x27136a['addEventListener']('click', () => { const _0x3fb850 = _0xd64172; _0x925876(_0x3fb850(0x470)); }) : (_0x513a3c['preventDefault'](), _0x515918())); const _0x1d8963 = document[_0xd64172(0x61b)](_0xd64172(0x52e)), _0x49f2d5 = localStorage[_0xd64172(0x2f0)](_0xd64172(0xb99)); if (_0x49f2d5) try { const _0x5e6f91 = JSON[_0xd64172(0xb4e)](_0x49f2d5); Array[_0xd64172(0x9bd)](_0x5e6f91) && (_0xd64172(0x9f9) === _0xd64172(0x20b) ? (_0x32f6d3[_0xd64172(0x7c9)][_0xd64172(0x458)] = _0xd64172(0x678), _0x35d592[_0xd64172(0x7c9)][_0xd64172(0x7e3)] = _0xd64172(0x4b4)) : _0x1d8963[_0xd64172(0x21f)] = _0x5e6f91['map'](_0x23e2d4 => _0x23e2d4[_0xd64172(0x9dc)] + '--' + _0x23e2d4[_0xd64172(0xb79)])['join']('\x0a')); } catch (_0x5cfb9a) { } document['getElementById'](_0xd64172(0x69b))[_0xd64172(0x46a)](_0xd64172(0x3cd), () => { const _0x357038 = _0xd64172; if (_0x357038(0xb37) !== _0x357038(0xb37)) { const _0x55fa55 = { 'id': 'wb_' + _0x267177['now'](), 'name': _0xebdea, 'content': _0x2b56cb }; _0x568a93[_0x357038(0x496)][_0x357038(0x230)](_0x55fa55); } else { const _0x2051d8 = _0x1d8963[_0x357038(0x21f)], _0x12616e = _0x2051d8[_0x357038(0x692)]('\x0a')[_0x357038(0x695)](_0x37e43d => _0x37e43d['trim']() !== ''), _0x36f2fc = []; let _0x252fb2 = 0x0; for (const _0x25da3f of _0x12616e) { const _0x26f393 = _0x25da3f[_0x357038(0x692)]('--'); _0x26f393[_0x357038(0xa1e)] === 0x2 && _0x26f393[0x0][_0x357038(0x2c7)]() && _0x26f393[0x1][_0x357038(0x2c7)]()[_0x357038(0x772)](_0x357038(0x4a8)) ? _0x36f2fc[_0x357038(0x230)]({ 'name': _0x26f393[0x0][_0x357038(0x2c7)](), 'url': _0x26f393[0x1][_0x357038(0x2c7)]() }) : _0x252fb2++; } _0x252fb2 > 0x0 && _0x925876('有\x20' + _0x252fb2 + _0x357038(0xa4e)); try { _0x357038(0x981) !== _0x357038(0x981) ? _0x1aabf9 > _0xef3c7c && (_0x366ba6 *= _0x1f9945 / _0x44a685, _0x4bee31 = _0x430037) : (localStorage[_0x357038(0x783)](_0x357038(0xb99), JSON['stringify'](_0x36f2fc)), _0x925876(_0x357038(0x303)), setTimeout(() => location[_0x357038(0x377)](), 0x5dc)); } catch (_0x532d0d) { _0x925876(_0x357038(0x266)); } } }), _0x301db5(), document[_0xd64172(0x61b)]('upload-card-button-2')['addEventListener'](_0xd64172(0x3cd), () => { const _0x54b4ba = _0xd64172; document[_0x54b4ba(0x61b)](_0x54b4ba(0xa81))['click'](); }), document[_0xd64172(0x61b)](_0xd64172(0x2ec))[_0xd64172(0x46a)](_0xd64172(0x3cd), async () => { const _0x4b8c3c = _0xd64172; _0x4b8c3c(0x9d5) === _0x4b8c3c(0x46d) ? (_0x18853d[_0x4b8c3c(0x1b2)] = _0x90f118[_0x4b8c3c(0xa4f)](_0x1054bf), _0x1a39d4[_0x4b8c3c(0x7c9)][_0x4b8c3c(0x458)] = _0x4b8c3c(0x1c1), _0x809ff9['style'][_0x4b8c3c(0x7e3)] = 'none') : (await _0x5505ca(_0x4b8c3c(0x539)), localStorage[_0x4b8c3c(0x662)](_0x4b8c3c(0x363)), _0xb2a6c7(), _0x925876(_0x4b8c3c(0x739))); }), document[_0xd64172(0x61b)](_0xd64172(0xa81))[_0xd64172(0x46a)](_0xd64172(0x631), async _0xbe833d => { const _0x460e96 = _0xd64172; if (_0x460e96(0x28b) === _0x460e96(0x28b)) { const _0x595d92 = _0xbe833d[_0x460e96(0x6e7)][_0x460e96(0xaa5)][0x0]; if (!_0x595d92) return; try { if ('oCGZP' === _0x460e96(0x72e)) await _0x190daf(_0x460e96(0x539), _0x595d92), await _0xb2a6c7(), _0x925876(_0x460e96(0x347)); else { if (!_0x496d77) return; _0x4c76a0[_0x19a6cc] = _0x4f9bbe, _0x3a69ca[_0x478cbb]['querySelector'](_0x460e96(0x691))[_0x460e96(0x6c7)] = _0x2faef4['name'], _0x615a86[_0x5d355a][_0x460e96(0x1f5)][_0x460e96(0xaf2)](_0x460e96(0x47b)), _0x151bf5(); } } catch (_0x4c1da3) { _0x925876(_0x460e96(0x8cf) + _0x4c1da3['message']); } } else _0xf2d2b6('错误:\x20' + _0x3d8c03[_0x460e96(0x1c9)]); }), _0xa79ed3(), _0x46f553(), _0x1023d4(); } const _0x4aa13b = _0x34dc25(0x844); async function _0x4c41ea(_0x18302f) { const _0x235075 = await _0x1dfda6; return new Promise((_0x43dfc0, _0x3262ac) => { const _0x1fc005 = _0x585d; if (_0x1fc005(0x794) === _0x1fc005(0x94a)) { const _0x4eb8f4 = _0x115063(_0x59a9ae[_0x1fc005(0x30c)]); _0x4eb8f4 && (_0x33bed4 = _0x4eb8f4[_0x1fc005(0x9dc)], _0x12075d = _0x4eb8f4['avatar']); } else { const _0x537386 = _0x235075['transaction'](_0x4aa13b, _0x1fc005(0x932)), _0x327885 = _0x537386[_0x1fc005(0x193)](_0x4aa13b), _0x1420a5 = _0x327885[_0x1fc005(0xb51)](_0x18302f); _0x1420a5[_0x1fc005(0x371)] = () => _0x43dfc0(_0x1420a5['result']), _0x1420a5['onerror'] = () => _0x3262ac(_0x1420a5['error']); } }); } async function _0x3c7c0a() { const _0x121283 = _0x34dc25; if (_0x121283(0x3f5) !== 'eOhOi') _0x48d139[_0x121283(0x7c9)][_0x121283(0x458)] = 'none', _0x49d580[_0x121283(0x81f)] = _0x291221['onclick'] = _0x328f55['onclick'] = null, _0x594949[_0x121283(0x33b)](_0x121283(0xb2b), _0x41d13c), _0x484f90(_0x27b0c1); else { const _0x1f1c91 = await _0x1dfda6; return new Promise((_0x4d33d9, _0x2fa357) => { const _0x306bee = _0x121283; if (_0x306bee(0x7e4) !== _0x306bee(0x7e4)) _0x1016c1[_0x306bee(0x90c)] = { 'response_mime_type': _0x306bee(0x76f) }; else { const _0x3c85ed = _0x1f1c91[_0x306bee(0x80d)](_0x4aa13b, _0x306bee(0x932)), _0x5bd785 = _0x3c85ed[_0x306bee(0x193)](_0x4aa13b), _0x259ed4 = _0x5bd785[_0x306bee(0x913)](); _0x259ed4[_0x306bee(0x371)] = () => _0x4d33d9(_0x259ed4[_0x306bee(0x979)]), _0x259ed4[_0x306bee(0x6f9)] = () => _0x2fa357(_0x259ed4[_0x306bee(0x214)]); } }); } } async function _0x1099d6(_0x18e766) { const _0x3f512e = _0x34dc25; if ('orlVM' === _0x3f512e(0x5f0)) { const _0x2a0739 = { 'id': _0x3f512e(0x6cd) + _0x10f75d[_0x3f512e(0xb3d)]() + '_' + _0x3fcbb8['random'](), 'name': _0x2a4de1[_0x3f512e(0x9dc)], 'content': _0x3d1573[_0x3f512e(0x8f0)] }; _0x30248a[_0x3f512e(0x496)][_0x3f512e(0x230)](_0x2a0739), _0x377f9c[_0x3f512e(0x230)](_0x2a0739['id']); } else { const _0x51b248 = await _0x1dfda6; return new Promise((_0x53425f, _0x3e5e14) => { const _0x325749 = _0x3f512e; if (_0x325749(0x432) === _0x325749(0xa37)) _0x19a117[_0x325749(0x3cd)](); else { const _0x55d29d = _0x51b248[_0x325749(0x80d)](_0x4aa13b, _0x325749(0xab9)), _0x1ba18d = _0x55d29d['objectStore'](_0x4aa13b), _0x25dcdc = _0x1ba18d[_0x325749(0x573)](_0x18e766); _0x25dcdc['onsuccess'] = () => _0x53425f(_0x25dcdc[_0x325749(0x979)]), _0x25dcdc[_0x325749(0x6f9)] = () => _0x3e5e14(_0x25dcdc[_0x325749(0x214)]); } }); } } async function _0x1844a4(_0x59b552) { const _0x3e98ca = await _0x1dfda6; return new Promise((_0x4f80e4, _0x39cf54) => { const _0x2032e4 = _0x585d, _0x483c4e = _0x3e98ca['transaction'](_0x4aa13b, 'readwrite'), _0x111251 = _0x483c4e[_0x2032e4(0x193)](_0x4aa13b), _0x1b3165 = _0x111251[_0x2032e4(0xa52)](_0x59b552); _0x1b3165['onsuccess'] = () => _0x4f80e4(), _0x1b3165[_0x2032e4(0x6f9)] = () => _0x39cf54(_0x1b3165[_0x2032e4(0x214)]); }); } let _0xf7c298 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x31c242 = { 'audio': document[_0x34dc25(0x61b)]('altar-slot-audio'), 'cover': document['getElementById']('altar-slot-cover'), 'info': document[_0x34dc25(0x61b)](_0x34dc25(0x6a4)), 'lyrics': document[_0x34dc25(0x61b)](_0x34dc25(0x894)) }, _0x2c7689 = { 'audio': document[_0x34dc25(0x61b)](_0x34dc25(0x6fa)), 'cover': document[_0x34dc25(0x61b)](_0x34dc25(0x7ab)), 'info': document[_0x34dc25(0x61b)](_0x34dc25(0x26e)), 'lyrics': document[_0x34dc25(0x61b)](_0x34dc25(0x9ae)) }; for (const _0x1f036a in _0x31c242) { _0x31c242[_0x1f036a][_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => _0x2c7689[_0x1f036a][_0x34dc25(0x3cd)]()), _0x2c7689[_0x1f036a][_0x34dc25(0x46a)](_0x34dc25(0x631), _0x4deaa3 => { const _0x205eac = _0x34dc25; _0x3bdf5c(_0x1f036a, _0x4deaa3[_0x205eac(0x6e7)][_0x205eac(0xaa5)][0x0]); }); } function _0x3bdf5c(_0x33f6b9, _0x1004db) { const _0x46fdc4 = _0x34dc25; if (_0x46fdc4(0x43f) !== _0x46fdc4(0x43f)) _0xab6026 = !![], _0x408713[_0x46fdc4(0x845)] = null; else { if (!_0x1004db) return; _0xf7c298[_0x33f6b9] = _0x1004db, _0x31c242[_0x33f6b9]['querySelector']('.slot-filename')['textContent'] = _0x1004db['name'], _0x31c242[_0x33f6b9][_0x46fdc4(0x1f5)][_0x46fdc4(0xaf2)](_0x46fdc4(0x47b)), _0x5b735e(); } } function _0x5b735e() { const _0x35c850 = _0x34dc25, _0x2cf02a = document[_0x35c850(0x61b)](_0x35c850(0x395)); if (_0xf7c298['audio'] && _0xf7c298[_0x35c850(0x835)]) _0x2cf02a['disabled'] = ![]; else { if (_0x35c850(0x39f) === _0x35c850(0x39f)) _0x2cf02a[_0x35c850(0x832)] = !![]; else { const _0x2a05b2 = _0x5cf63c[_0x35c850(0x5e5)][0x0]['clientX'] - _0x176ede, _0x36f4ff = _0x331831['touches'][0x0]['clientY'] - _0x5ef748; _0x375a95[_0x35c850(0x62a)](_0x2a05b2) > _0x1a7bac['abs'](_0x36f4ff) ? _0x48d38e = 'horizontal' : _0x4e5859 = _0x35c850(0x452); } } } function _0x34ab35() { const _0x36b67a = _0x34dc25; _0xf7c298 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x24188c in _0x31c242) { 'XRnPD' === _0x36b67a(0x74f) ? _0x5ceec0[_0x36b67a(0x7c9)]['backgroundImage'] = _0x36b67a(0x3bd) + _0x3c9e27 + '\x27)' : (_0x31c242[_0x24188c]['classList'][_0x36b67a(0x194)](_0x36b67a(0x47b)), _0x2c7689[_0x24188c][_0x36b67a(0x21f)] = ''); } _0x31c242[_0x36b67a(0x624)]['querySelector'](_0x36b67a(0x691))['textContent'] = _0x36b67a(0xb81), _0x31c242[_0x36b67a(0x211)]['querySelector'](_0x36b67a(0x691))['textContent'] = _0x36b67a(0x52f), _0x31c242['info'][_0x36b67a(0x76d)]('.slot-filename')[_0x36b67a(0x6c7)] = _0x36b67a(0x27e), _0x31c242['lyrics'][_0x36b67a(0x76d)](_0x36b67a(0x691))[_0x36b67a(0x6c7)] = _0x36b67a(0x83e), _0x5b735e(); } document[_0x34dc25(0x61b)](_0x34dc25(0x395))['addEventListener']('click', async () => { const _0x4d907c = _0x34dc25; if (!_0xf7c298['audio'] || !_0xf7c298[_0x4d907c(0x835)]) { _0x925876('真是的，必需的祭品都还没准备好！'); return; } await _0xfb773c(); }), document['getElementById'](_0x34dc25(0x90a))['addEventListener'](_0x34dc25(0x3cd), () => { const _0x572f1f = _0x34dc25; _0x34ab35(), _0xd18e04(_0x572f1f(0x21d), _0x572f1f(0x911)); }), document[_0x34dc25(0x61b)](_0x34dc25(0xb5f))['addEventListener'](_0x34dc25(0x3cd), () => { const _0x2bb80c = _0x34dc25; _0x2bb80c(0x4b5) === _0x2bb80c(0x4b5) ? _0xd18e04(_0x2bb80c(0x911), 'musicUploadAltar') : (_0x2fb0a4[_0x2bb80c(0x1ce)](_0x163f93), _0x2a3780[_0x2bb80c(0x1ce)](_0x15d798)); }); async function _0xfb773c() { const _0x267617 = _0x34dc25; _0x48b9ad(!![], _0x267617(0x3fa)); try { const _0x53c930 = await _0xf7c298[_0x267617(0x835)][_0x267617(0x8f6)](); let _0x2f1497; if (_0x53c930[_0x267617(0x2c7)]()[_0x267617(0x772)]('{')) _0x2f1497 = JSON['parse'](_0x53c930); else { if (_0x267617(0x899) !== 'CtMJI') _0x29b275[_0x267617(0x7c9)][_0x267617(0x99f)] = _0x4cb151[_0x267617(0x99f)] + '%', _0x1a25f7[_0x267617(0x7c9)][_0x267617(0x5d5)] = _0x48c87b[_0x267617(0x5d5)] + '%'; else { _0x2f1497 = {}; const _0x395e09 = _0x53c930['split']('\x0a'); _0x395e09[_0x267617(0xaa9)](_0x3de461 => { const _0x121f6e = _0x267617; if (_0x121f6e(0x75e) === _0x121f6e(0x36f)) { const _0x45ad56 = _0x2377b8[_0x121f6e(0xa4f)](_0x29aa4c); _0x457f49[_0x121f6e(0x1b2)] = _0x45ad56, _0x212579[_0x121f6e(0x5a9)] = () => _0x2f0965[_0x121f6e(0x3c8)](_0x45ad56); } else { const _0x8df680 = _0x3de461[_0x121f6e(0x692)](/:\s|：\s/); if (_0x8df680[_0x121f6e(0xa1e)] === 0x2) { const _0x503fb2 = _0x8df680[0x0][_0x121f6e(0x2c7)](), _0x155bbd = _0x8df680[0x1][_0x121f6e(0x2c7)](), _0x58ed23 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x58ed23[_0x503fb2] && (_0x121f6e(0x8c5) === 'kQDxS' ? _0x2f1497[_0x58ed23[_0x503fb2]] = _0x155bbd : _0x221cae[_0x121f6e(0x6c7)] = _0x37b5ee[_0x121f6e(0x9dc)] || _0x121f6e(0x857) + _0x2db049[_0x121f6e(0x5c9)][_0x121f6e(0xa1e)] + ')'); } } }); if (!_0x2f1497['歌曲名称']) throw new Error(_0x267617(0x262)); _0x2f1497[_0x267617(0x879)] = _0x267617(0x5b7) + Date[_0x267617(0xb3d)](); } } const _0x3c5116 = 'song_' + (_0x2f1497[_0x267617(0x879)] || Date[_0x267617(0xb3d)]()), _0x33a2cd = { 'id': _0x3c5116, 'info': _0x2f1497, 'audio': _0xf7c298['audio'], 'cover': _0xf7c298[_0x267617(0x211)], 'lyrics': _0xf7c298[_0x267617(0x1d7)] ? await _0xf7c298['lyrics'][_0x267617(0x8f6)]() : '' }; await _0x1099d6(_0x33a2cd), await _0x22af97(), _0x48b9ad(![]), _0x925876(_0x267617(0x826) + _0x2f1497[_0x267617(0xa21)] + '”已存入圣殿。'), _0xd18e04(_0x267617(0x911), _0x267617(0x21d)); } catch (_0x2171a0) { _0x267617(0x7b1) === 'WFfkv' ? _0x43dcdf(_0x45a666, _0x4b31ae[_0x267617(0x905)]) : (_0x48b9ad(![]), console[_0x267617(0x214)](_0x267617(0x38a), _0x2171a0), _0x925876(_0x267617(0x56a) + _0x2171a0[_0x267617(0x1c9)])); } } async function _0x22af97() { const _0x52f8fe = _0x34dc25, _0x168eae = document[_0x52f8fe(0x61b)](_0x52f8fe(0x287)); _0x168eae[_0x52f8fe(0x72d)] = ''; const _0x4d2d71 = await _0x3c7c0a(); if (_0x4d2d71[_0x52f8fe(0xa1e)] === 0x0) { _0x168eae['innerHTML'] = _0x52f8fe(0x569); return; } _0x4d2d71[_0x52f8fe(0x96f)]((_0x49a3e2, _0x34b36a) => (_0x49a3e2[_0x52f8fe(0x835)]['歌曲名称'] || '')[_0x52f8fe(0x895)](_0x34b36a[_0x52f8fe(0x835)][_0x52f8fe(0xa21)] || '')); for (const _0x1d79a1 of _0x4d2d71) { const _0x5c95b0 = document[_0x52f8fe(0x6a8)]('div'); _0x5c95b0[_0x52f8fe(0x6e1)] = _0x52f8fe(0x7f7), _0x5c95b0[_0x52f8fe(0x6c3)][_0x52f8fe(0x9d4)] = _0x1d79a1['id']; const _0x48339a = _0x1d79a1[_0x52f8fe(0x211)] ? URL[_0x52f8fe(0xa4f)](_0x1d79a1[_0x52f8fe(0x211)]) : _0x2fd48c; _0x5c95b0[_0x52f8fe(0x72d)] = _0x52f8fe(0x7c4) + _0x48339a + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x1d79a1[_0x52f8fe(0x835)][_0x52f8fe(0xa21)] || _0x52f8fe(0x516)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x1d79a1[_0x52f8fe(0x835)]['歌手'] || _0x52f8fe(0xb02)) + _0x52f8fe(0x293); let _0x5ad980 = null; const _0x59e81f = _0x52e869 => { const _0x4fdd78 = _0x52f8fe; if (_0x4fdd78(0x70b) !== _0x4fdd78(0x20d)) { if (_0x52e869['button'] === 0x2) return; _0x5ad980 = setTimeout(async () => { const _0xd80cf2 = _0x4fdd78; if (_0xd80cf2(0x9aa) === _0xd80cf2(0x9aa)) { if (_0x52e869[_0xd80cf2(0x63a)] === 'touchstart') _0x52e869[_0xd80cf2(0x3a7)](); const _0x24b8cf = await _0x4fac8b('确定要从圣殿中永久删除《' + _0x1d79a1['info'][_0xd80cf2(0xa21)] + '》吗？'); _0x24b8cf && (await _0x1844a4(_0x1d79a1['id']), await _0x22af97(), _0x925876('已删除。')); } else _0x27131e[_0xd80cf2(0x7c9)][_0xd80cf2(0x54b)] = _0xd80cf2(0x3bd) + _0x1acfc4['createObjectURL'](_0x4c5360) + '\x27)', _0x3c360a[_0xd80cf2(0x7c9)][_0xd80cf2(0x2ff)] = _0xd80cf2(0x211), _0x31bc81['style'][_0xd80cf2(0x9b1)] = 'center'; }, 0x320); } else { const _0xffa3b6 = _0x2f80d2[_0x4fdd78(0x1c5)](_0x520b28[_0x4fdd78(0x777)] || [])[_0x4fdd78(0x1dc)](/'/g, _0x4fdd78(0x4ac))[_0x4fdd78(0x1dc)](/"/g, _0x4fdd78(0x544)), _0x4eeba2 = _0x321b97[_0x4fdd78(0xaf8)] || _0x4fdd78(0xa49); return _0x4fdd78(0x25a) + (_0x31b279 < _0x3d02f3[_0x4fdd78(0xa1e)] - 0x1 ? _0x4fdd78(0x3c3) : '') + _0x4fdd78(0x650) + _0xffa3b6 + _0x4fdd78(0xa05) + _0x4eeba2 + _0x4fdd78(0xa68) + _0x57172d + _0x4fdd78(0x2bd) + _0x4eeba2['charAt'](0x0) + _0x4fdd78(0x4c3) + _0x4eeba2 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x227574[_0x4fdd78(0xb5e)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } }, _0x5b253b = () => { clearTimeout(_0x5ad980); }; _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x546), _0x59e81f), _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x831), _0x5b253b), _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x73b), _0x5b253b), _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x229), _0x59e81f, { 'passive': ![] }), _0x5c95b0['addEventListener'](_0x52f8fe(0x94e), _0x5b253b), _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x445), _0x5b253b), _0x5c95b0[_0x52f8fe(0x46a)](_0x52f8fe(0x3cd), _0x1e247f => { const _0x104c13 = _0x52f8fe; if ('OzcWq' === _0x104c13(0x9fd)) { const _0x153962 = _0x220abf(_0x50fe51[_0x104c13(0x220)]())[_0x104c13(0x956)](0x2, '0'), _0xe0a1f = _0x6f6080(_0x1fd3e4[_0x104c13(0x503)]())[_0x104c13(0x956)](0x2, '0'); _0x425509['textContent'] = _0x153962 + ':' + _0xe0a1f; const _0x33bd7f = _0x292987[_0x104c13(0x4ef)]() + 0x1, _0x27c457 = _0x2a704a[_0x104c13(0x72b)](), _0x5de0f7 = [_0x104c13(0x63c), '星期一', '星期二', _0x104c13(0xb9c), '星期四', _0x104c13(0x4a0), _0x104c13(0x997)][_0x16e49c[_0x104c13(0x961)]()]; _0x24e303[_0x104c13(0x6c7)] = _0x33bd7f + '月' + _0x27c457 + '日\x20' + _0x5de0f7; } else { if (_0x5ad980) clearTimeout(_0x5ad980); if (_0x1e247f[_0x104c13(0x47f)]) return; setTimeout(() => { const _0x19b61a = _0x104c13; _0x5ad980 && _0x382fd6(_0x1d79a1['id'], _0x4d2d71[_0x19b61a(0x959)](_0x490905 => _0x490905['id'])); }, 0x32); } }), _0x168eae[_0x52f8fe(0x1ce)](_0x5c95b0); } } _0x140cf4[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x189472 = _0x34dc25; _0x189472(0xb48) !== 'yKPxv' ? _0x925876(_0x189472(0xb68)) : (_0x243d26 = { 'characterId': _0x45c8aa, 'entries': [] }, _0x334437[_0x189472(0x801)][_0x189472(0x230)](_0xad1196)); }), _0x2d0982[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { _0x925876('这个也是摆设，别点了。'); }); let _0x1c6e37 = [], _0x4483d3 = -0x1; async function _0x382fd6(_0x690967, _0x204622) { const _0x265955 = _0x34dc25; if ('yVAhq' === _0x265955(0x45d)) _0x15ebee[_0x265955(0x1f5)]['remove'](_0x265955(0xa03)), _0x5cc226(() => _0xebe1e2['style'][_0x265955(0x458)] = _0x265955(0x678), 0x12c); else { const _0x59a031 = await _0x4c41ea(_0x690967); if (!_0x59a031) return; _0x59df15 = { 'title': _0x59a031['info']['歌曲名称'] || _0x265955(0x516), 'artist': _0x59a031['info']['歌手'] || _0x265955(0xb02), 'cover': _0x59a031[_0x265955(0x211)] ? URL[_0x265955(0xa4f)](_0x59a031['cover']) : _0x2fd48c, 'isFromLibrary': !![] }; const _0x1e74ad = URL[_0x265955(0xa4f)](_0x59a031[_0x265955(0x624)]); _0x49d30d[_0x265955(0x1b2)] = _0x1e74ad, _0x49d30d[_0x265955(0xb59)](), _0x364150(); } } async function _0x364150() { const _0x5078aa = _0x34dc25; if (_0x5078aa(0x8c7) !== 'YrhMC') _0xd84ecf += _0x5078aa(0x5cd) + _0x67efdb[_0x5078aa(0xaf8)] + _0x5078aa(0x20c) + _0x70f125['last_message_preview'] + _0x5078aa(0x975), _0xbdf042[_0x5078aa(0x777)] && _0x526b1b[_0x5078aa(0x9bd)](_0x1830c5['log']) && (_0x367c74 += _0x5078aa(0x31b), _0x4638ba['log'][_0x5078aa(0xaa9)](_0x251587 => { const _0x5049be = _0x5078aa, _0x3c1bbb = _0x251587['sender'] === 'character' ? '你' : _0x49ec8c[_0x5049be(0xaf8)]; _0x484ca7 += _0x5049be(0x6bf) + _0x3c1bbb + ':\x20' + _0x251587[_0x5049be(0x8f0)] + '\x0a'; })); else { const _0x53243b = document['getElementById'](_0x5078aa(0x740)), _0x345fa3 = document[_0x5078aa(0x61b)](_0x5078aa(0xa98)), _0x29647e = document[_0x5078aa(0x61b)](_0x5078aa(0x5e8)), _0x56df30 = document[_0x5078aa(0x61b)](_0x5078aa(0x9c2)), _0x35de4a = _0x59df15; if (_0x35de4a && _0x35de4a[_0x5078aa(0x9c0)]) { if ('kzrND' !== _0x5078aa(0x570)) { if (_0x466216[_0x5078aa(0x55e)] === _0x5078aa(0x742)) return _0x3c9f11[_0x5078aa(0x5f2)]?.[_0x5078aa(0x9dc)] || _0x5078aa(0x5ef); if (_0x14abc1[_0x5078aa(0x428)]) { const _0x122613 = _0x390cb2(_0x184f03['senderId']); return _0x122613?.[_0x5078aa(0x9dc)] || _0x5078aa(0x2c8); } if (_0x3afc5d?.[_0x5078aa(0x63a)] === _0x5078aa(0x780)) { const _0x53cb9b = _0x42095(_0x54b98f[_0x5078aa(0x5c9)][0x0]); return _0x53cb9b?.[_0x5078aa(0x9dc)] || 'AI'; } return _0x5078aa(0x1ac); } else _0x345fa3[_0x5078aa(0x6c7)] = _0x35de4a[_0x5078aa(0x2e7)], _0x29647e['textContent'] = _0x35de4a[_0x5078aa(0xa5b)], _0x53243b[_0x5078aa(0x1f5)][_0x5078aa(0xaf2)](_0x5078aa(0x8e0)), _0x53243b[_0x5078aa(0x7c9)][_0x5078aa(0xb7e)](_0x5078aa(0x60a), _0x5078aa(0x83d) + _0x35de4a[_0x5078aa(0x211)] + ')'); } else _0x5078aa(0x91a) === _0x5078aa(0x91a) ? (_0x345fa3[_0x5078aa(0x6c7)] = '暂无音乐', _0x29647e[_0x5078aa(0x6c7)] = _0x5078aa(0x682), _0x53243b[_0x5078aa(0x1f5)][_0x5078aa(0x194)](_0x5078aa(0x8e0)), _0x56df30['style'][_0x5078aa(0xb7e)]('--widget-cover-image', _0x5078aa(0x678))) : _0x4d1277(_0x5078aa(0x2c9) + _0x34f329['message']); } } _0x140cf4 && _0x140cf4[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { if (_0x1c6e37['length'] === 0x0) return; _0x4483d3 = (_0x4483d3 + 0x1) % _0x1c6e37['length'], _0x382fd6(_0x1c6e37[_0x4483d3], _0x1c6e37); }); _0x2d0982 && _0x2d0982['addEventListener'](_0x34dc25(0x3cd), () => { const _0x1fac9f = _0x34dc25; if (_0x1c6e37[_0x1fac9f(0xa1e)] === 0x0) return; _0x4483d3 = (_0x4483d3 - 0x1 + _0x1c6e37[_0x1fac9f(0xa1e)]) % _0x1c6e37[_0x1fac9f(0xa1e)], _0x382fd6(_0x1c6e37[_0x4483d3], _0x1c6e37); }); _0x49d30d[_0x34dc25(0x46a)](_0x34dc25(0xb59), () => { const _0xc23825 = _0x34dc25; if (_0xc23825(0x80b) !== _0xc23825(0x80b)) _0x32a954[_0xc23825(0x214)](_0xc23825(0x1fd) + _0x4b5069['id'], _0x3d38ec), _0x13fd81(_0xc23825(0xacc)); else { if (_0x235cc3) _0x235cc3[_0xc23825(0x6c7)] = '❚❚'; } }), _0x49d30d['addEventListener'](_0x34dc25(0x942), () => { const _0x3281f8 = _0x34dc25; if (_0x3281f8(0x86f) === _0x3281f8(0x86f)) { if (_0x235cc3) _0x235cc3['textContent'] = '▶'; } else { const _0x16ccb2 = _0x5ea8f4[_0x3281f8(0x21f)]; let _0x3f8ed8 = _0x16ccb2[_0x3281f8(0x1dc)](/\.bubble\.sent/g, _0x3281f8(0xa3c))[_0x3281f8(0x1dc)](/\.bubble\.received/g, _0x3281f8(0xaa8)); _0x5f2353[_0x3281f8(0x72d)] = _0x3f8ed8; } }), _0x49d30d['addEventListener'](_0x34dc25(0x412), () => { const _0x27dbe0 = _0x34dc25; if (_0x27dbe0(0x283) !== _0x27dbe0(0x7fc)) { if (_0x140cf4) _0x140cf4[_0x27dbe0(0x3cd)](); } else { if (_0x43a386['type'] === _0x27dbe0(0x229)) _0xad971[_0x27dbe0(0x3a7)](); _0x2afa6e(_0x6b24f0); } }); function _0x1db140() { const _0x4cb628 = _0x34dc25; if (_0x4cb628(0xb24) === _0x4cb628(0x99d)) { const _0x13a08b = _0x59ee54[_0x4cb628(0x6e7)][_0x4cb628(0x6c3)]['id']; _0x4dc7f0(_0x4cb628(0x25c))[_0x4cb628(0xb30)](_0x4aadcd => { _0x4aadcd && _0x38eafb(_0x13a08b); }); } else { const _0xb8e188 = _0x33b638(); if (!_0xb8e188) return; _0x679889['innerHTML'] = '', _0x174c86[_0x4cb628(0x21f)] = '', _0xb8e188[_0x4cb628(0x63a)] === 'group' ? (_0xb8e188[_0x4cb628(0x5c9)]['forEach'](_0xdea1ec => { const _0x1c73d6 = _0x4cb628, _0x23a7c3 = _0x5aa3d9(_0xdea1ec); if (_0x23a7c3) { const _0x477b22 = document['createElement'](_0x1c73d6(0x9ac)); _0x477b22[_0x1c73d6(0x21f)] = _0x23a7c3['id'], _0x477b22[_0x1c73d6(0x6c7)] = _0x23a7c3['name'], _0x679889[_0x1c73d6(0x1ce)](_0x477b22); } }), _0x31ac5e['style'][_0x4cb628(0x458)] = _0x4cb628(0x1c1)) : _0x4cb628(0x993) !== 'aoTkr' ? _0x5d14d0[_0x4cb628(0x81c)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null } : _0x31ac5e[_0x4cb628(0x7c9)]['display'] = _0x4cb628(0x678), _0x4dac92['classList'][_0x4cb628(0xaf2)](_0x4cb628(0xa03)), _0x174c86[_0x4cb628(0x5a1)](); } } function _0x489eb0() { const _0x44133e = _0x34dc25, _0x2a24f3 = parseFloat(_0x174c86[_0x44133e(0x21f)]); if (isNaN(_0x2a24f3) || _0x2a24f3 <= 0x0) { _0x925876(_0x44133e(0x55f)); return; } const _0x3b90b5 = _0x33b638(); let _0x698241 = null; _0x3b90b5[_0x44133e(0x63a)] === _0x44133e(0x519) ? _0x698241 = _0x679889[_0x44133e(0x21f)] : _0x698241 = _0x3b90b5[_0x44133e(0x5c9)][0x0]; const _0x21342b = _0x4b57ed(_0x3b90b5['id']), _0xf85265 = { 'role': _0x44133e(0x742), 'type': 'transfer', 'content': _0x44133e(0x907) + (_0x5aa3d9(_0x698241)?.['name'] || '未知') + _0x44133e(0x33a) + _0x2a24f3 + ']', 'amount': _0x2a24f3, 'recipientId': _0x698241, 'senderId': _0x21342b['id'], 'timestamp': Date['now']() }; _0x4295e2['conversationHistory'][_0x44133e(0x230)](_0xf85265), _0x236ac2(), _0x1639f3(), _0x4dac92[_0x44133e(0x1f5)][_0x44133e(0x194)]('show'); } async function _0x154eda(_0x449e3c) { const _0x368d20 = _0x34dc25, _0x3360dc = _0x5aa3d9(_0x449e3c); if (!_0x3360dc) return; const _0x520f4f = await _0x4fac8b('确定要永久清空【' + _0x3360dc[_0x368d20(0x9dc)] + _0x368d20(0x9e6)); if (!_0x520f4f) return; const _0x1a5065 = _0x4295e2[_0x368d20(0x801)][_0x368d20(0xb2e)](_0xc171f0 => _0xc171f0[_0x368d20(0x900)] === _0x449e3c); _0x1a5065 > -0x1 ? _0x368d20(0x828) !== _0x368d20(0x78a) ? (_0x4295e2[_0x368d20(0x801)][_0x368d20(0x99e)](_0x1a5065, 0x1), _0x1b6337(), _0x3a5b10(), _0x925876('【' + _0x3360dc['name'] + _0x368d20(0x93d))) : _0x40a63e = _0x251823[_0x368d20(0xb4e)](_0x44f51e) : _0x925876(_0x368d20(0x4d1)); } function _0x23b581() { const _0x78d6e7 = _0x34dc25, _0x954380 = document[_0x78d6e7(0x61b)](_0x78d6e7(0xb6f)); _0x954380['innerHTML'] = ''; const _0xd5ed1 = _0x4295e2['characters'][_0x78d6e7(0x695)](_0x5651c2 => _0x4295e2[_0x78d6e7(0x7af)][_0x78d6e7(0x3bb)](_0x579a17 => _0x579a17[_0x78d6e7(0x63a)] === 'private' && _0x579a17[_0x78d6e7(0x5c9)][_0x78d6e7(0x2b7)](_0x5651c2['id']))); if (_0xd5ed1[_0x78d6e7(0xa1e)] === 0x0) { if (_0x78d6e7(0x98d) !== 'ffxgl') { _0x458bba(_0x78d6e7(0xa5c)); return; } else { _0x954380[_0x78d6e7(0x72d)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } } _0xd5ed1['forEach'](_0x2b5c90 => { const _0x47241c = _0x78d6e7; if (_0x47241c(0x6ba) !== _0x47241c(0x6ba)) _0x5208b0('错误:\x20' + _0x1e6d71[_0x47241c(0x1c9)]); else { const _0x2ae169 = document[_0x47241c(0x6a8)]('li'); _0x2ae169[_0x47241c(0x6e1)] = _0x47241c(0x1de), _0x2ae169['dataset'][_0x47241c(0x259)] = _0x2b5c90['id'], _0x2ae169['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2b5c90[_0x47241c(0x1c4)] || _0x2fd48c) + _0x47241c(0x356) + _0x2b5c90[_0x47241c(0x9dc)] + _0x47241c(0x641) + _0x2b5c90[_0x47241c(0x9dc)] + _0x47241c(0x762), _0x2ae169[_0x47241c(0x76d)]('.char-info-wrapper')[_0x47241c(0x46a)](_0x47241c(0x3cd), () => _0x4c4b81(_0x2b5c90['id'])), _0x2ae169[_0x47241c(0x76d)]('.snoop-clear-btn')[_0x47241c(0x46a)](_0x47241c(0x3cd), async _0x33ebc3 => { const _0x53d719 = _0x47241c; if ('zjJuP' === _0x53d719(0xb0b)) { _0x33ebc3[_0x53d719(0x3d5)](); const _0x5ee954 = _0x5aa3d9(_0x2b5c90['id']); if (!_0x5ee954) return; const _0x5e8332 = await _0x4fac8b(_0x53d719(0x983) + _0x5ee954[_0x53d719(0x9dc)] + _0x53d719(0xa30)); if (_0x5e8332) { _0x48b9ad(!![], '正在焚烧【' + _0x5ee954[_0x53d719(0x9dc)] + _0x53d719(0x351)); const _0x46c9e8 = [_0x53d719(0x41b), _0x53d719(0x199), _0x53d719(0x8d1), _0x53d719(0x9ea), _0x53d719(0x57c), _0x53d719(0x334), _0x53d719(0x4d0), 'summary']; for (const _0x1dc088 of _0x46c9e8) { const _0x3709c3 = _0x53d719(0x6ad) + _0x5ee954['id'] + '_' + _0x1dc088; await _0x59c695(_0x3709c3); } _0x48b9ad(![]), _0x925876('【' + _0x5ee954[_0x53d719(0x9dc)] + _0x53d719(0xb7c)); } } else _0x5daa68['meetingViewMode'] = _0x30cc22['meetingViewMode'] === _0x53d719(0x9e8) ? _0x53d719(0x823) : _0x53d719(0x9e8), _0x2d63b2(); }), _0x954380[_0x47241c(0x1ce)](_0x2ae169); } }); } let _0x40af2f = null, _0xa1a5d8 = null; function _0x54ea1e() { const _0x3225ee = _0x34dc25; if (_0x3225ee(0x388) === _0x3225ee(0x948)) { const { omniText: _0x52fcf0 } = _0x52ad99(_0x52aae2['id'], null), _0x24302e = _0x380e3d(_0x4a7938['id']), _0x4bc2da = _0x16ff23[_0x3225ee(0x473)] && _0x5ce578[_0x3225ee(0x473)][_0x3225ee(0xa1e)] > 0x0 ? _0x3225ee(0xb22) + _0x15537e[_0x3225ee(0x9dc)] + '的个人专属世界观设定\x0a' + _0x2f1d83[_0x3225ee(0x473)][_0x3225ee(0x959)](_0x4b2a62 => _0x1f2c1f['worldBooks'][_0x3225ee(0x7e6)](_0x5ca72c => _0x5ca72c['id'] === _0x4b2a62))[_0x3225ee(0x695)](_0x1a19a2)[_0x3225ee(0x959)](_0x3bd35b => _0x3225ee(0xb63) + _0x3bd35b[_0x3225ee(0x9dc)] + '\x0a' + _0x3bd35b[_0x3225ee(0x8f0)])[_0x3225ee(0x247)]('') : ''; return _0x3225ee(0x9f8) + _0x54b20f[_0x3225ee(0x9dc)] + _0x3225ee(0x750) + _0x41956f['id'] + _0x3225ee(0x820) + _0x50f91b[_0x3225ee(0xb70)] + _0x3225ee(0x756) + _0x52fcf0 + '\x0a' + _0x24302e + '\x0a' + _0x4bc2da; } else { const _0xdce0a6 = new Date(), _0x3e450b = document[_0x3225ee(0x61b)](_0x3225ee(0x677)), _0x3c48d8 = document['getElementById'](_0x3225ee(0x696)), _0x2f038c = document[_0x3225ee(0x61b)](_0x3225ee(0xb97)); _0x3e450b && _0x3c48d8 && (_0x3225ee(0x2f4) === 'PRVUV' ? (_0x344d3f['activeDiaryCharacterId'] = null, _0x230ac1('diaryList', 'diaryView')) : (_0x3e450b[_0x3225ee(0x6c7)] = _0xdce0a6[_0x3225ee(0x510)]('zh-CN', { 'hour': _0x3225ee(0x48c), 'minute': _0x3225ee(0x48c), 'hour12': ![] }), _0x3c48d8[_0x3225ee(0x6c7)] = _0xdce0a6[_0x3225ee(0x949)](_0x3225ee(0x5a5), { 'month': _0x3225ee(0x9a1), 'day': _0x3225ee(0x1c3), 'weekday': 'long' }))), _0x2f038c && (_0x3225ee(0x583) === _0x3225ee(0x583) ? _0x2f038c['innerHTML'] = _0x3225ee(0x251) + _0xdce0a6[_0x3225ee(0x510)](_0x3225ee(0x5a5), { 'hour': '2-digit', 'minute': _0x3225ee(0x48c), 'hour12': ![] }) + _0x3225ee(0x93e) : _0x146af6[_0x3225ee(0x214)](_0x3225ee(0x200) + _0x3630cd['id'] + _0x3225ee(0x963), _0x2d46be)); } } function _0x4c4b81(_0x128d20) { const _0x425f93 = _0x34dc25; _0x40af2f = _0x128d20; const _0x430352 = _0x5aa3d9(_0x128d20); if (!_0x430352) return; const _0x9dbe3e = document[_0x425f93(0x61b)](_0x425f93(0x430)), _0x444678 = document[_0x425f93(0x61b)](_0x425f93(0xb3f)); if (_0x444678) _0x444678[_0x425f93(0x194)](); const _0x3205d4 = document[_0x425f93(0x61b)](_0x425f93(0x3a9)); if (_0x3205d4) _0x3205d4[_0x425f93(0x194)](); _0x9dbe3e[_0x425f93(0xb6e)]('beforeend', _0x425f93(0x206)), _0x9dbe3e[_0x425f93(0xb6e)](_0x425f93(0x4cc), _0x425f93(0x738)), document['getElementById'](_0x425f93(0x684))[_0x425f93(0x6c7)] = '', _0x2dbfb9(); if (_0xa1a5d8) clearInterval(_0xa1a5d8); _0x54ea1e(), _0xa1a5d8 = setInterval(_0x54ea1e, 0x2710), _0xd18e04(_0x425f93(0xb85), 'snoopList'); } function _0x2dbfb9() { const _0x416255 = _0x34dc25, _0x12b40e = document[_0x416255(0x61b)]('snoop-app-container'), _0x34bd65 = document[_0x416255(0x61b)]('snoop-dock'); _0x12b40e[_0x416255(0x72d)] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x34bd65['innerHTML'] = ''; const _0x5058fa = _0x12b40e[_0x416255(0x76d)]('.snoop-main-grid'), _0x5a63bd = [{ 'id': _0x416255(0x199), 'name': '聊天', 'svg': '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'area': _0x416255(0x74b) }, { 'id': _0x416255(0x8d1), 'name': _0x416255(0x5a4), 'svg': _0x416255(0xade), 'area': _0x416255(0x74b) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x416255(0x912), 'area': 'dock' }, { 'id': 'summary', 'name': '总结', 'svg': _0x416255(0x3bf), 'area': _0x416255(0x74b) }, { 'id': _0x416255(0x9ea), 'name': _0x416255(0xaa7), 'svg': _0x416255(0xb2f), 'area': _0x416255(0x2a5) }, { 'id': _0x416255(0x57c), 'name': '外卖', 'svg': _0x416255(0x652), 'area': _0x416255(0x2a5) }, { 'id': _0x416255(0x334), 'name': '购物', 'svg': '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'area': _0x416255(0x2a5) }, { 'id': _0x416255(0x4d0), 'name': '足迹', 'svg': _0x416255(0x29d), 'area': _0x416255(0x2a5) }]; _0x5a63bd[_0x416255(0xaa9)](_0x281db3 => { const _0x5f3c47 = _0x416255, _0x1f3afa = document[_0x5f3c47(0x6a8)](_0x5f3c47(0xa9f)); _0x1f3afa[_0x5f3c47(0x6e1)] = 'snoop-app-icon', _0x1f3afa['innerHTML'] = _0x5f3c47(0x426) + _0x281db3[_0x5f3c47(0xb3a)] + _0x5f3c47(0x8cc) + _0x281db3['name'] + _0x5f3c47(0x1c0), _0x1f3afa[_0x5f3c47(0x46a)]('click', () => _0x4064bd(_0x281db3['id'], _0x281db3['name'])), _0x281db3[_0x5f3c47(0x4e1)] === _0x5f3c47(0x74b) ? _0x34bd65[_0x5f3c47(0x1ce)](_0x1f3afa) : _0x5058fa[_0x5f3c47(0x1ce)](_0x1f3afa); }); } document[_0x34dc25(0x61b)](_0x34dc25(0xaec))[_0x34dc25(0x46a)]('click', () => { const _0x4aaf89 = _0x34dc25; _0xa1a5d8 && (clearInterval(_0xa1a5d8), _0xa1a5d8 = null); document[_0x4aaf89(0x61b)](_0x4aaf89(0xa9c))[_0x4aaf89(0x7c9)][_0x4aaf89(0x458)] = _0x4aaf89(0x678); const _0x52b200 = document[_0x4aaf89(0x61b)]('snoop-dock'); if (_0x52b200) _0x52b200['remove'](); const _0x33f454 = document[_0x4aaf89(0x61b)](_0x4aaf89(0xb3f)); if (_0x33f454) _0x33f454[_0x4aaf89(0x194)](); _0xd18e04(_0x4aaf89(0x622), 'snoopPhone'); }); async function _0x4064bd(_0x1c36d0, _0x394e48, _0x12b72f = ![]) { const _0x4d29f1 = _0x34dc25; document['getElementById'](_0x4d29f1(0x35f))['style']['display'] = 'none'; const _0xb05692 = document[_0x4d29f1(0x61b)](_0x4d29f1(0xa9c)); _0xb05692[_0x4d29f1(0x72d)] = _0x4d29f1(0x1a0), _0xb05692[_0x4d29f1(0x7c9)][_0x4d29f1(0x458)] = 'flex'; const _0x2397ba = _0x4d29f1(0x6ad) + _0x40af2f + '_' + _0x1c36d0; try { if (_0x1c36d0 === _0x4d29f1(0x1e7)) { const _0x5f1f52 = await _0x327dbd(_0x40af2f); _0x1f1a64(_0x1c36d0, _0x394e48, _0x5f1f52); return; } let _0x2947e2 = await _0x168090(_0x2397ba); if (_0x12b72f || !_0x2947e2) { if (_0x4d29f1(0x4e8) !== _0x4d29f1(0x4ba)) { console[_0x4d29f1(0x777)]('请求AI更新:\x20' + _0x2397ba + _0x4d29f1(0x9ec)); let _0x385b0b = await _0x2fd35e(_0x1c36d0, _0x40af2f, _0x2947e2); if (_0x385b0b) { const _0x148864 = _0x385b0b[_0x4d29f1(0x4ed)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x3bf646 = _0x148864 ? _0x148864[0x1]['trim']() : _0x385b0b['trim'](); let _0x5573de; try { _0x5573de = JSON[_0x4d29f1(0xb4e)](_0x3bf646); } catch (_0x3727c1) { if (_0x4d29f1(0x920) !== _0x4d29f1(0x920)) _0x1cb366[_0x4d29f1(0x214)](_0x4d29f1(0x4dc) + _0x2808fc + ':', _0x579afd), _0x5a9e6c[_0x4d29f1(0x7c9)][_0x4d29f1(0x54b)] = _0x4d29f1(0x678); else { _0x5573de = _0x2e51f3(_0x3bf646); if (!_0x5573de) throw new Error(_0x4d29f1(0xa02)); } } let _0x3d86bb; if (_0x12b72f && _0x2947e2) { if ('FxIoI' === 'aQPdU') _0x506471(_0x383aec), _0x41df2f['removeEventListener'](_0x4d29f1(0x8f9), _0xba28fb), _0x1f83b4[_0x4d29f1(0x33b)]('error', _0x24c1a9), _0x5b0c32[_0x4d29f1(0x1b2)] = '', _0x2f5fc4['remove'](); else try { if (_0x4d29f1(0x9af) !== _0x4d29f1(0x18e)) { const _0x434241 = JSON[_0x4d29f1(0xb4e)](_0x2947e2); if (_0x1c36d0 === _0x4d29f1(0x199)) _0x4d29f1(0x619) !== _0x4d29f1(0x376) ? (_0x3d86bb = JSON['stringify'](_0x5573de), console['log']('Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。')) : _0x18702b[_0x4d29f1(0x21f)] = ''; else { if (Array[_0x4d29f1(0x9bd)](_0x434241) && Array['isArray'](_0x5573de)) { const _0x204d41 = _0x434241[_0x4d29f1(0x333)](_0x5573de); _0x3d86bb = JSON[_0x4d29f1(0x1c5)](_0x204d41), console['log'](_0x4d29f1(0x304)); } else { if (_0x4d29f1(0x986) === _0x4d29f1(0x962)) { _0x35e740[_0x4d29f1(0x72d)] = _0x4d29f1(0x1ca); return; } else _0x3d86bb = JSON[_0x4d29f1(0x1c5)](_0x5573de); } } } else try { const _0x28bf8b = _0x27a891['parse'](_0x342d94[_0x4d29f1(0x2f0)](_0x4d29f1(0x693)) || '{}'), _0x351a4d = { ..._0x28bf8b, ..._0x216634 }; _0x39305c[_0x4d29f1(0x783)]('badgeState', _0x397fb5['stringify'](_0x351a4d)); } catch (_0x3b884) { _0x4bb98a['error']('保存徽章状态失败', _0x3b884); } } catch (_0x1d5217) { _0x4d29f1(0x790) !== _0x4d29f1(0x72c) ? _0x3d86bb = JSON[_0x4d29f1(0x1c5)](_0x5573de) : _0x402371['style'][_0x4d29f1(0x458)] = 'flex'; } } else { if (_0x4d29f1(0x8ac) === _0x4d29f1(0x8ac)) _0x3d86bb = JSON[_0x4d29f1(0x1c5)](_0x5573de); else { const _0xa968a2 = { 'id': _0x4d29f1(0xb44) + _0x1051b2[_0x4d29f1(0xb3d)](), 'name': _0x536826, 'boundUserProfileId': _0x15ca73, 'memberCharacterIds': _0x1ade9f, 'posts': [] }; _0x486db1[_0x4d29f1(0x7f0)]['push'](_0xa968a2); } } await _0x1aeaf6(_0x2397ba, _0x3d86bb), _0x2947e2 = _0x3d86bb; } } else _0x1e2a11(![]), _0x88edbb[_0x4d29f1(0x2ac)] = ![]; } else console[_0x4d29f1(0x777)](_0x4d29f1(0x521) + _0x2397ba); _0x1f1a64(_0x1c36d0, _0x394e48, _0x2947e2); } catch (_0x4c7115) { console[_0x4d29f1(0x214)](_0x4d29f1(0x2b8) + _0x394e48 + _0x4d29f1(0x47a), _0x4c7115), _0xb05692[_0x4d29f1(0x72d)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x4c7115['message'] + _0x4d29f1(0x475); } } function _0x1f1a64(_0x44e6e5, _0x4810e8, _0x4704e0) { const _0x5de35a = _0x34dc25, _0x4641ed = _0x5aa3d9(_0x40af2f), _0x42e111 = document['getElementById'](_0x5de35a(0xa9c)); let _0x262776 = ''; if (!_0x4704e0) 'FCGTG' === _0x5de35a(0x880) ? _0x262776 = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>' : (_0x456551(), _0x5d6c5c(![]), _0x350ddc['isGenerating'] = ![]); else { if (_0x44e6e5 === _0x5de35a(0x1e7)) _0x262776 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x4704e0 + _0x5de35a(0x8ff); else try { let _0x305e2c = null; const _0x474c4f = _0x4704e0[_0x5de35a(0x4ed)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x1a47df = _0x474c4f ? _0x474c4f[0x1] : _0x4704e0; _0x305e2c = JSON[_0x5de35a(0xb4e)](_0x1a47df); const _0x174168 = _0x5aa3d9(_0x40af2f); switch (_0x44e6e5) { case _0x5de35a(0x41b): _0x262776 = _0x296599(_0x305e2c); break; case 'whispers': _0x262776 = _0x50e943(_0x305e2c, _0x174168[_0x5de35a(0x9dc)]); break; case _0x5de35a(0x8d1): _0x262776 = _0x34a41c(_0x305e2c); break; case _0x5de35a(0x9ea): _0x262776 = _0x5842fc(_0x305e2c); break; case _0x5de35a(0x57c): _0x262776 = _0x24d846(_0x305e2c); break; case _0x5de35a(0x334): _0x262776 = _0x57b6c9(_0x305e2c); break; case _0x5de35a(0x4d0): _0x262776 = _0x3789eb(_0x305e2c); break; case 'summary': _0x262776 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x4704e0 + '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; break; default: _0x262776 = _0x5de35a(0x6c4) + JSON[_0x5de35a(0x1c5)](_0x305e2c, null, 0x2) + _0x5de35a(0x8d3); } } catch (_0x25dc90) { _0x5de35a(0x607) !== 'zCEDK' ? (console['error'](_0x5de35a(0x448), _0x25dc90), _0x262776 = _0x5de35a(0xadd) + _0x4704e0 + _0x5de35a(0x8d3)) : (_0x8e6303[_0x5de35a(0x1ce)](_0x30f414), _0x56a694['appendChild'](_0xdd2677)); } } _0x42e111[_0x5de35a(0x72d)] = _0x5de35a(0x446) + _0x4810e8 + _0x5de35a(0xb06) + _0x4641ed[_0x5de35a(0x9dc)] + _0x5de35a(0x4ec) + (_0x44e6e5 === _0x5de35a(0x1e7) ? '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>' : _0x5de35a(0x6fc)) + _0x5de35a(0x47e) + _0x262776 + _0x5de35a(0x708); const _0x32d7db = _0x42e111[_0x5de35a(0x76d)](_0x5de35a(0x8da)); _0x44e6e5 === _0x5de35a(0x1e7) && (_0x32d7db['style'][_0x5de35a(0x5ce)] = '0'); document[_0x5de35a(0x61b)]('snoop-app-back-btn')[_0x5de35a(0x46a)](_0x5de35a(0x3cd), () => { const _0x8910b = _0x5de35a; _0x42e111[_0x8910b(0x7c9)][_0x8910b(0x458)] = 'none', document[_0x8910b(0x61b)](_0x8910b(0x35f))['style'][_0x8910b(0x458)] = _0x8910b(0x58f); }); _0x44e6e5 === _0x5de35a(0x1e7) ? document[_0x5de35a(0x61b)](_0x5de35a(0xa16))[_0x5de35a(0x46a)](_0x5de35a(0x3cd), () => { const _0x499b2e = _0x5de35a, _0x253916 = document[_0x499b2e(0x61b)](_0x499b2e(0x28c)); _0x253916[_0x499b2e(0x6a5)](), document[_0x499b2e(0x68b)]('copy'), _0x925876('档案已复制到剪贴板！'); }) : document[_0x5de35a(0x61b)]('snoop-app-refresh-btn')[_0x5de35a(0x46a)](_0x5de35a(0x3cd), async () => { _0x4064bd(_0x44e6e5, _0x4810e8, !![]); }); if (_0x44e6e5 === _0x5de35a(0x199)) { if (_0x5de35a(0x22f) === 'LSaMS') { const _0x4e5a6d = _0x10a65f['createObjectURL'](_0x36af52); _0x54aa8e['src'] = _0x4e5a6d, _0xe7a2d8['onload'] = () => { const _0x3e7e19 = _0x5de35a; _0x4f744e[_0x3e7e19(0x3c8)](_0x4e5a6d); }; } else _0x42e111[_0x5de35a(0x4f8)](_0x5de35a(0x35e))[_0x5de35a(0xaa9)](_0xa7de1c => { const _0x50b5e5 = _0x5de35a; _0xa7de1c[_0x50b5e5(0x46a)](_0x50b5e5(0x3cd), () => { const _0x4cd3f4 = _0x50b5e5; if (_0x4cd3f4(0xb98) === _0x4cd3f4(0x7d6)) { const _0x1fad19 = _0x16ab6b[_0x4cd3f4(0x692)]('--'); _0x1fad19[_0x4cd3f4(0xa1e)] === 0x2 && _0x1fad19[0x0][_0x4cd3f4(0x2c7)]() && _0x1fad19[0x1][_0x4cd3f4(0x2c7)]()[_0x4cd3f4(0x772)](_0x4cd3f4(0x4a8)) ? _0x2f15e9['push']({ 'name': _0x1fad19[0x0][_0x4cd3f4(0x2c7)](), 'url': _0x1fad19[0x1]['trim']() }) : _0x56ef06++; } else { const _0x12c9f4 = JSON[_0x4cd3f4(0xb4e)](_0xa7de1c[_0x4cd3f4(0x6c3)][_0x4cd3f4(0x777)][_0x4cd3f4(0x1dc)](/&quot;/g, '\x22')), _0x598630 = _0xa7de1c[_0x4cd3f4(0x6c3)][_0x4cd3f4(0xb6c)], _0x34db6c = _0xa7de1c[_0x4cd3f4(0x6c3)][_0x4cd3f4(0x872)]; _0x118506(_0x598630, _0x34db6c, _0x12c9f4); } }); }); } } function _0x118506(_0x17b6fd, _0xf70864, _0x49d9a8) { const _0x337f45 = _0x34dc25; if ('BFfRX' === _0x337f45(0x440)) { _0x3f722c(_0x337f45(0x5db)); return; } else { const _0x53dc6a = document['querySelector'](_0x337f45(0x42b)), _0xa32b4a = document[_0x337f45(0x76d)]('#snoop-app-view-container\x20.snoop-app-header'); let _0x2251aa = '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>'; if (!_0x49d9a8 || _0x49d9a8[_0x337f45(0xa1e)] === 0x0) _0x2251aa += _0x337f45(0x50d); else { if (_0x337f45(0xaab) === 'XUNmU') _0x49d9a8[_0x337f45(0xaa9)](_0x5352f2 => { const _0x5e6a12 = _0x337f45, _0x3de638 = _0x5352f2[_0x5e6a12(0x2d4)] === _0x5e6a12(0x3f6), _0x2d2662 = _0x3de638 ? _0xf70864 ? _0xf70864[0x0] : '?' : _0x17b6fd ? _0x17b6fd[0x0] : '?'; _0x2251aa += _0x5e6a12(0x7ff) + (_0x3de638 ? _0x5e6a12(0x742) : 'ai') + _0x5e6a12(0x891) + (!_0x3de638 ? _0x5e6a12(0x2eb) + _0x2d2662 + _0x5e6a12(0x300) : '') + _0x5e6a12(0xb4c) + (_0x3de638 ? _0x5e6a12(0x742) : 'ai') + _0x5e6a12(0xab7) + _0x5352f2[_0x5e6a12(0x8f0)] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x3de638 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x2d2662 + _0x5e6a12(0x300) : '') + _0x5e6a12(0x1d0); }); else { _0x32016b[_0x337f45(0x777)]('好友圈档案柜是空的，无需净化。'); return; } } _0x2251aa += _0x337f45(0x300), _0x53dc6a[_0x337f45(0x72d)] = _0x2251aa, _0x53dc6a[_0x337f45(0xb0c)] = _0x53dc6a['scrollHeight'], _0xa32b4a['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>' + _0x17b6fd + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document[_0x337f45(0x61b)](_0x337f45(0xaa3))['addEventListener'](_0x337f45(0x3cd), () => { const _0x26530d = _0x337f45; _0x4064bd(_0x26530d(0x199), '聊天'); }), !document[_0x337f45(0x61b)]('snoop-temp-style') && document['head'][_0x337f45(0xb6e)](_0x337f45(0x4cc), _0x337f45(0x3df)); } } function _0x2e51f3(_0x1007af) { const _0x1bdf19 = _0x34dc25; if (!_0x1007af || typeof _0x1007af !== _0x1bdf19(0x3f4)) return null; const _0x395530 = _0x1007af[_0x1bdf19(0x2c7)]()['split']('\x0a'), _0x5bd9c9 = []; let _0x3a31d6 = null; for (const _0x3d985b of _0x395530) { const _0x9f85e4 = _0x3d985b[_0x1bdf19(0x2c7)](); if (_0x9f85e4['startsWith']('-\x20')) { _0x3a31d6 && _0x5bd9c9[_0x1bdf19(0x230)](_0x3a31d6); _0x3a31d6 = {}; const _0x2b38f6 = _0x9f85e4[_0x1bdf19(0x705)](0x2), _0x20b4d1 = _0x2b38f6[_0x1bdf19(0x692)](/:\s(.+)/); if (_0x20b4d1[_0x1bdf19(0xa1e)] > 0x1) { if ('aBjqF' === 'aBjqF') { const _0x42280b = _0x20b4d1[0x0][_0x1bdf19(0x2c7)](), _0x55a927 = _0x20b4d1[0x1][_0x1bdf19(0x2c7)]()[_0x1bdf19(0x1dc)](/^"|"$/g, ''); _0x3a31d6[_0x42280b] = _0x55a927; } else { const _0x17d12f = _0x544ca2[_0x1bdf19(0x8f0)][_0x1bdf19(0x4ed)](/：(.*?)]$/); _0x19f4ed['content'] = _0x1bdf19(0x7ac) + (_0x17d12f ? _0x17d12f[0x1] : _0x1bdf19(0xa56)) + ']', _0xe51dfa[_0x1bdf19(0x230)](_0x2ef3df); } } } else { if (_0x3a31d6 && _0x9f85e4) { const _0x361cab = _0x9f85e4[_0x1bdf19(0x692)](/:\s(.+)/); if (_0x361cab['length'] > 0x1) { if (_0x1bdf19(0x215) !== 'nuphR') _0x26f754 += _0x1bdf19(0x8fb) + _0x296f56[_0x1bdf19(0x489)] + _0x1bdf19(0x975); else { const _0x4159e4 = _0x361cab[0x0][_0x1bdf19(0x2c7)](), _0x2b4cef = _0x361cab[0x1][_0x1bdf19(0x2c7)]()[_0x1bdf19(0x1dc)](/^"|"$/g, ''); _0x3a31d6[_0x4159e4] = _0x2b4cef; } } } } } return _0x3a31d6 && (_0x1bdf19(0xb12) !== _0x1bdf19(0x22c) ? _0x5bd9c9[_0x1bdf19(0x230)](_0x3a31d6) : _0x31aae0 = _0x1bdf19(0x452)), _0x5bd9c9[_0x1bdf19(0xa1e)] > 0x0 ? _0x5bd9c9 : null; } async function _0x5309d7(_0xfad3c8) { const _0x24783a = _0x34dc25; if (_0x24783a(0x524) !== _0x24783a(0x524)) { const _0x2d9198 = _0x356b2a[_0x24783a(0x807)](_0x2be56d); if (_0x2d9198) _0x1c5151[_0x24783a(0xa64)][_0x2d9198] = _0x2948c6[_0x24783a(0x2f0)](_0x2d9198); } else { if (!_0xfad3c8) return ''; const _0x510893 = [{ 'id': _0x24783a(0x41b), 'name': '相册' }, { 'id': 'whispers', 'name': _0x24783a(0x2d1) }, { 'id': 'abyss', 'name': _0x24783a(0x837) }, { 'id': _0x24783a(0x9ea), 'name': _0x24783a(0xaa7) }, { 'id': 'bites', 'name': _0x24783a(0x1eb) }, { 'id': _0x24783a(0x334), 'name': _0x24783a(0x22a) }, { 'id': _0x24783a(0x4d0), 'name': _0x24783a(0xb6b) }]; let _0x6f8a35 = ''; for (const _0x1cda77 of _0x510893) { try { const _0x2a712b = _0x24783a(0x6ad) + _0xfad3c8 + '_' + _0x1cda77['id'], _0x17359d = await _0x168090(_0x2a712b); if (_0x17359d) { const _0x249511 = _0x17359d[_0x24783a(0x4ed)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x479882 = _0x249511 ? _0x249511[0x1][_0x24783a(0x2c7)]() : _0x17359d[_0x24783a(0x2c7)](); if (!_0x479882) continue; let _0x230de1 = null; try { if ('onYSx' !== _0x24783a(0x9d0)) { const _0x1932f2 = _0x2458eb['chats']['find'](_0x333091 => _0x333091['id'] === _0x3b86df); if (!_0x1932f2 || _0x1932f2['type'] !== _0x24783a(0x519)) return; _0x162ab2[_0x24783a(0x61b)]('group-settings-name')['value'] = _0x1932f2[_0x24783a(0x9dc)] || '', _0x19b9ea(_0x24783a(0xa7f)), _0xf0e501[_0x24783a(0x61b)]('group-settings-bind-user')[_0x24783a(0x21f)] = _0x1932f2['boundUserProfileId'] || _0x16dc7d[_0x24783a(0x2e4)]; const _0x59c9a5 = _0x364ec2['getElementById'](_0x24783a(0xa71)); _0x59c9a5[_0x24783a(0x72d)] = '', _0x4042c5[_0x24783a(0x496)][_0x24783a(0xaa9)](_0x39f215 => { const _0x1a4027 = _0x24783a, _0x3a7e72 = _0x1932f2[_0x1a4027(0x473)]?.[_0x1a4027(0x2b7)](_0x39f215['id']), _0x118d36 = _0x1267c1['createElement'](_0x1a4027(0xb78)); _0x118d36[_0x1a4027(0x72d)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x39f215['id'] + '\x22\x20' + (_0x3a7e72 ? _0x1a4027(0xa20) : '') + '>\x20' + _0x39f215['name'], _0x59c9a5[_0x1a4027(0x1ce)](_0x118d36); }), _0x494976(); const _0x225c13 = _0x906f18[_0x24783a(0x61b)](_0x24783a(0x917)), _0x328b = _0x3e836b[_0x24783a(0x61b)](_0x24783a(0x6ee)); _0x328b[_0x24783a(0x7c9)][_0x24783a(0x54b)] = '', _0x5cc4fb('group_avatar_' + _0x39d444)[_0x24783a(0xb30)](_0x916e04 => { _0x225c13['src'] = _0x916e04 ? _0x6cf7e2['createObjectURL'](_0x916e04) : _0x417935; }), _0xd70dc(_0x24783a(0x66c) + _0x4e67f7)[_0x24783a(0xb30)](_0x2d8bb8 => { const _0x5c97be = _0x24783a; if (_0x2d8bb8) _0x328b[_0x5c97be(0x7c9)][_0x5c97be(0x54b)] = _0x5c97be(0x3bd) + _0x2953ee[_0x5c97be(0xa4f)](_0x2d8bb8) + '\x27)'; }), _0xd0b56b('groupSettings', 'chat'); } else _0x230de1 = JSON['parse'](_0x479882); } catch (_0x5f1e91) { if (_0x24783a(0x511) === _0x24783a(0x77f)) _0x17847e(_0x44c89e), _0x123fa8(); else { console['warn'](_0x24783a(0x55d) + _0x1cda77['id'] + _0x24783a(0x605), _0x5f1e91[_0x24783a(0x1c9)]); try { if (_0x24783a(0x379) === _0x24783a(0x239)) _0x54aaa5 += _0x24783a(0x58c) + _0xe170a3['round'](_0x269576 / 0x3c) + _0x24783a(0x788); else { _0x230de1 = _0x2e51f3(_0x479882); if (!_0x230de1) throw new Error(_0x24783a(0x313)); console[_0x24783a(0x777)]('兼容模式成功，已将\x20' + _0x1cda77['id'] + _0x24783a(0x202)); } } catch (_0x43ea5e) { if ('aEHaa' !== _0x24783a(0x93c)) throw _0x5f1e91; else _0x2e7e3a = _0x41cda0; } } } if (Array[_0x24783a(0x9bd)](_0x230de1) && _0x230de1[_0x24783a(0xa1e)] > 0x0) { _0x6f8a35 === '' && (_0x24783a(0x529) !== _0x24783a(0x529) ? (_0x34126b[_0x24783a(0x1f5)][_0x24783a(0x194)](_0x24783a(0x45a)), _0x171cd2[_0x24783a(0x1f5)]['add'](_0x24783a(0x45a)), _0xce3a3d(_0x4412ff, _0x4efb87)) : _0x6f8a35 += _0x24783a(0x819)); _0x6f8a35 += _0x24783a(0xb84) + _0x1cda77[_0x24783a(0x9dc)] + '\x0a'; switch (_0x1cda77['id']) { case _0x24783a(0x41b): _0x230de1[_0x24783a(0xaa9)](_0x2b74b3 => { const _0x2dd90d = _0x24783a; if (_0x2dd90d(0x53d) === _0x2dd90d(0x406)) { _0x5bd216('歌名和歌手都不能为空！'); return; } else _0x6f8a35 += _0x2dd90d(0x8fb) + _0x2b74b3[_0x2dd90d(0x489)] + _0x2dd90d(0x975); }); break; case 'whispers': _0x230de1['forEach'](_0x11c642 => { const _0x5554a9 = _0x24783a; _0x6f8a35 += '-\x20你记得曾和“' + _0x11c642['contact_name'] + '”聊过天，关于：“' + _0x11c642[_0x5554a9(0xb5e)] + '”。\x0a', _0x11c642[_0x5554a9(0x777)] && Array['isArray'](_0x11c642[_0x5554a9(0x777)]) && (_0x6f8a35 += '\x20\x20具体对话如下：\x0a', _0x11c642['log'][_0x5554a9(0xaa9)](_0x1eb5cd => { const _0x431f1b = _0x5554a9, _0x1ffcc3 = _0x1eb5cd['sender'] === _0x431f1b(0x3f6) ? '你' : _0x11c642[_0x431f1b(0xaf8)]; _0x6f8a35 += _0x431f1b(0x6bf) + _0x1ffcc3 + ':\x20' + _0x1eb5cd[_0x431f1b(0x8f0)] + '\x0a'; })); }); break; case _0x24783a(0x8d1): _0x230de1['forEach'](_0x41a4d7 => { const _0x2349c2 = _0x24783a; _0x6f8a35 += '-\x20你曾经搜索过：“' + _0x41a4d7[_0x2349c2(0xb40)] + '”。\x0a'; }); break; case _0x24783a(0x9ea): _0x230de1[_0x24783a(0xaa9)](_0x81b8dd => { const _0x35d345 = _0x24783a; _0x6f8a35 += _0x35d345(0xace) + _0x81b8dd[_0x35d345(0x2e7)] + '”的笔记，内容是：“' + _0x81b8dd[_0x35d345(0x8f0)][_0x35d345(0x1dc)](/\n/g, '\x20') + _0x35d345(0x975); }); break; case _0x24783a(0x57c): _0x230de1[_0x24783a(0xaa9)](_0x588409 => { const _0x39921e = _0x24783a; _0x39921e(0x289) !== 'ZNwsI' ? _0x6f8a35 += _0x39921e(0x447) + _0x588409[_0x39921e(0xad6)] + '”，里面有\x20' + _0x588409[_0x39921e(0xac2)][_0x39921e(0x247)]('、') + '。\x0a' : _0x5c86a9[_0x39921e(0x1f5)][_0x39921e(0xaf2)](_0x39921e(0x567)); }); break; case _0x24783a(0x334): _0x230de1['forEach'](_0x1632b6 => { const _0x5a24aa = _0x24783a; _0x5a24aa(0x420) !== 'UWQFO' ? _0x6f8a35 += '-\x20你在“' + _0x1632b6[_0x5a24aa(0x5ba)] + _0x5a24aa(0x730) + _0x1632b6[_0x5a24aa(0x61a)] + '”。\x0a' : (_0x2b710f['isGenerating'] && _0x52e062[_0x5a24aa(0x324)] && (_0x3def3b[_0x5a24aa(0x777)](_0x5a24aa(0x7a0)), _0x471d4f[_0x5a24aa(0x324)][_0x5a24aa(0x56e)](_0x5a24aa(0x2aa)), _0x1f55eb[_0x5a24aa(0x324)] = null), _0x33c900[_0x5a24aa(0x2ac)] = ![], _0x3d4682(![])); }); break; case _0x24783a(0x4d0): _0x230de1['forEach'](_0x932c52 => { const _0x42cc0c = _0x24783a; _0x42cc0c(0x9e4) === _0x42cc0c(0x9e4) ? _0x6f8a35 += _0x42cc0c(0x527) + _0x932c52[_0x42cc0c(0x8d9)] + _0x42cc0c(0x2a2) + _0x932c52[_0x42cc0c(0x9d6)] + _0x42cc0c(0x975) : _0x2d16e5 = [..._0x41bcd8, ..._0x2dcaf6]; }); break; default: _0x230de1[_0x24783a(0xaa9)](_0x4a5752 => { const _0x22bf57 = _0x24783a; if (_0x22bf57(0x275) === 'LMBYz') _0x6f8a35 += '-\x20' + JSON[_0x22bf57(0x1c5)](_0x4a5752) + '\x0a'; else { const _0x4af585 = new _0x321c11(), _0x2ae94d = _0x1e881a[_0x22bf57(0x61b)](_0x22bf57(0xa6f)), _0x22a1ae = _0xc16284[_0x22bf57(0x61b)]('galgame-date'); if (_0x2ae94d && _0x22a1ae) { const _0x492363 = _0x23edca(_0x4af585[_0x22bf57(0x220)]())['padStart'](0x2, '0'), _0x41ae33 = _0x20e18a(_0x4af585[_0x22bf57(0x503)]())[_0x22bf57(0x956)](0x2, '0'); _0x2ae94d[_0x22bf57(0x6c7)] = _0x492363 + ':' + _0x41ae33; const _0x492194 = _0x4af585[_0x22bf57(0x4ef)]() + 0x1, _0x3a3bf9 = _0x4af585['getDate'](), _0xd025c1 = [_0x22bf57(0x63c), _0x22bf57(0xa42), _0x22bf57(0x73c), _0x22bf57(0xb9c), '星期四', _0x22bf57(0x4a0), _0x22bf57(0x997)][_0x4af585[_0x22bf57(0x961)]()]; _0x22a1ae['textContent'] = _0x492194 + '月' + _0x3a3bf9 + '日\x20' + _0xd025c1; } } }); break; } } } } catch (_0x239443) { console[_0x24783a(0x214)]('加载视奸记忆失败\x20(' + _0x1cda77['id'] + _0x24783a(0x963), _0x239443); } } return _0x6f8a35; } } function _0x296599(_0x36b22f) { const _0x10264b = _0x34dc25; if (!Array[_0x10264b(0x9bd)](_0x36b22f)) return '<p>格式错误</p>'; if (_0x36b22f[_0x10264b(0xa1e)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>'; return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x36b22f[_0x10264b(0x959)]((_0xa89fc4, _0x5ab3c7) => _0x10264b(0xa1d) + (_0x5ab3c7 < _0x36b22f['length'] - 0x1 ? _0x10264b(0x3c3) : '') + _0x10264b(0x646) + (_0xa89fc4[_0x10264b(0x489)] || _0x10264b(0x2d3)) + _0x10264b(0x4fa) + (_0xa89fc4['timestamp'] || '') + _0x10264b(0x59e))[_0x10264b(0x247)]('') + _0x10264b(0x300); } function _0x50e943(_0x44a311, _0x8736a8) { const _0x516941 = _0x34dc25; if (!Array['isArray'](_0x44a311) || _0x44a311[_0x516941(0xa1e)] === 0x0) return _0x516941(0x4af); return _0x516941(0x27b) + _0x44a311[_0x516941(0x959)]((_0x4742ba, _0x155fb5) => { const _0x270889 = _0x516941, _0x86820 = JSON['stringify'](_0x4742ba['log'] || [])['replace'](/'/g, _0x270889(0x4ac))[_0x270889(0x1dc)](/"/g, _0x270889(0x544)), _0x59fa4a = _0x4742ba[_0x270889(0xaf8)] || '未知联系人'; return _0x270889(0x25a) + (_0x155fb5 < _0x44a311[_0x270889(0xa1e)] - 0x1 ? _0x270889(0x3c3) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x86820 + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x59fa4a + _0x270889(0xa68) + _0x8736a8 + _0x270889(0x2bd) + _0x59fa4a[_0x270889(0x6e2)](0x0) + _0x270889(0x4c3) + _0x59fa4a + _0x270889(0xa54) + (_0x4742ba[_0x270889(0xb5e)] || '') + _0x270889(0x944); })[_0x516941(0x247)]('') + '</div>'; } function _0x34a41c(_0x5b40eb) { const _0x21359f = _0x34dc25; if ('ZhZVn' === _0x21359f(0x98a)) { if (!Array[_0x21359f(0x9bd)](_0x5b40eb)) return _0x21359f(0x8e6); if (_0x5b40eb[_0x21359f(0xa1e)] === 0x0) return _0x21359f(0xad8); return _0x5b40eb[_0x21359f(0x96f)]((_0xd78828, _0x497a5a) => new Date(_0x497a5a['timestamp']) - new Date(_0xd78828[_0x21359f(0x6aa)])), _0x21359f(0x27b) + _0x5b40eb[_0x21359f(0x959)]((_0x4d72e5, _0x227c7d) => _0x21359f(0x91e) + (_0x227c7d < _0x5b40eb[_0x21359f(0xa1e)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x21359f(0x281) + (_0x4d72e5[_0x21359f(0xb40)] || _0x21359f(0x946)) + _0x21359f(0x26f) + (_0x4d72e5['result_page_content'] || '没有找到相关结果。') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>' + (_0x4d72e5['timestamp'] || '') + _0x21359f(0x4c9))[_0x21359f(0x247)]('') + _0x21359f(0x300); } else _0x9daf81(_0x32c287, _0x145b67); } function _0x5842fc(_0x198520) { const _0x506474 = _0x34dc25; if (!Array[_0x506474(0x9bd)](_0x198520)) return _0x506474(0x8e6); if (_0x198520[_0x506474(0xa1e)] === 0x0) return _0x506474(0x604); return _0x198520[_0x506474(0x96f)]((_0x352e5d, _0x42e20a) => new Date(_0x42e20a[_0x506474(0xb60)]) - new Date(_0x352e5d[_0x506474(0xb60)])), _0x198520[_0x506474(0x959)](_0x5a2dd0 => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + (_0x5a2dd0['title'] || _0x506474(0x1ec)) + _0x506474(0xb52) + (_0x5a2dd0[_0x506474(0x8f0)] || '') + _0x506474(0x5d7) + (_0x5a2dd0[_0x506474(0xb60)] || '') + _0x506474(0x293))[_0x506474(0x247)](''); } function _0x24d846(_0x46139b) { const _0x382b6b = _0x34dc25; if (!Array[_0x382b6b(0x9bd)](_0x46139b)) return '<p>格式错误</p>'; if (_0x46139b[_0x382b6b(0xa1e)] === 0x0) return _0x382b6b(0xb05); return _0x46139b['sort']((_0x456eb4, _0xd19244) => new Date(_0xd19244[_0x382b6b(0x6aa)]) - new Date(_0x456eb4[_0x382b6b(0x6aa)])), _0x46139b[_0x382b6b(0x959)](_0x475ad3 => { const _0xcb6972 = _0x382b6b, _0x2a03ee = (_0x475ad3[_0xcb6972(0xac2)] || [])[_0xcb6972(0x959)](_0x4a251e => _0xcb6972(0x345) + _0x4a251e + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0xcb6972(0x247)](''); return _0xcb6972(0x40e) + (_0x475ad3[_0xcb6972(0xad6)] || _0xcb6972(0x358)) + _0xcb6972(0x270) + (_0x475ad3[_0xcb6972(0x6aa)] || '') + _0xcb6972(0x7b5) + (_0x475ad3[_0xcb6972(0x6e9)] || '已送达') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2a03ee + _0xcb6972(0xb41) + (_0x475ad3[_0xcb6972(0x5fb)] || 0x0)['toFixed'](0x2) + _0xcb6972(0x31c); })[_0x382b6b(0x247)](''); } function _0x57b6c9(_0xc33ffc) { const _0x482cdc = _0x34dc25; if (_0x482cdc(0x70a) === _0x482cdc(0x343)) { const _0x38a2d1 = _0x5b5ab2[_0x482cdc(0x6a8)](_0x482cdc(0xa9f)); _0x38a2d1[_0x482cdc(0x6e1)] = _0x482cdc(0x5d6), _0x38a2d1['innerHTML'] = _0x482cdc(0x426) + _0x557c3c[_0x482cdc(0xb3a)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x40b37e['name'] + _0x482cdc(0x1c0), _0x38a2d1[_0x482cdc(0x46a)](_0x482cdc(0x3cd), () => _0x37f994(_0x3e5cad['id'], _0x694a2e[_0x482cdc(0x9dc)])), _0x30559f[_0x482cdc(0x4e1)] === 'dock' ? _0x102547[_0x482cdc(0x1ce)](_0x38a2d1) : _0x579b1e[_0x482cdc(0x1ce)](_0x38a2d1); } else { if (!Array[_0x482cdc(0x9bd)](_0xc33ffc)) return _0x482cdc(0x8e6); if (_0xc33ffc[_0x482cdc(0xa1e)] === 0x0) return _0x482cdc(0x3f7); return _0xc33ffc[_0x482cdc(0x96f)]((_0x233ce5, _0x4003da) => new Date(_0x4003da[_0x482cdc(0x6aa)]) - new Date(_0x233ce5[_0x482cdc(0x6aa)])), _0xc33ffc[_0x482cdc(0x959)](_0x385983 => '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20' + (_0x385983[_0x482cdc(0x5ba)] || _0x482cdc(0x1bf)) + _0x482cdc(0x634) + (_0x385983['timestamp'] || '') + _0x482cdc(0xa6d) + (_0x385983['item_name'] || _0x482cdc(0x44a)) + _0x482cdc(0x840) + (_0x385983['cost'] || 0x0)['toFixed'](0x2) + _0x482cdc(0x9dd))[_0x482cdc(0x247)](''); } } function _0x3789eb(_0x15e313) { const _0x299d67 = _0x34dc25; if (!Array[_0x299d67(0x9bd)](_0x15e313)) return _0x299d67(0x8e6); if (_0x15e313['length'] === 0x0) return _0x299d67(0xa4c); return _0x15e313['sort']((_0x489617, _0x174a07) => new Date(_0x174a07[_0x299d67(0x6aa)]) - new Date(_0x489617[_0x299d67(0x6aa)])), _0x299d67(0x383) + _0x15e313[_0x299d67(0x959)](_0x5bac70 => _0x299d67(0x4c5) + (_0x5bac70[_0x299d67(0x8d9)] || _0x299d67(0xb67)) + _0x299d67(0x8ce) + (_0x5bac70[_0x299d67(0x9d6)] || '') + _0x299d67(0x1a6) + (_0x5bac70[_0x299d67(0x6aa)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x299d67(0x247)]('') + _0x299d67(0x300); } async function _0x2fd35e(_0x1191f8, _0x19877a, _0x429240 = null) { const _0x5ad9f6 = _0x34dc25, _0x3e7537 = _0x5aa3d9(_0x19877a), _0x120df3 = _0x4295e2[_0x5ad9f6(0x7af)][_0x5ad9f6(0x7e6)](_0x3ae3ec => _0x3ae3ec[_0x5ad9f6(0x63a)] === _0x5ad9f6(0x780) && _0x3ae3ec[_0x5ad9f6(0x5c9)][_0x5ad9f6(0x2b7)](_0x19877a)), _0x2ba609 = _0x4b57ed(_0x120df3?.['id'] || _0x4295e2[_0x5ad9f6(0x845)]); if (!_0x3e7537) throw new Error('找不到角色信息。'); const { omniText: _0x3c8b6f } = _0x2442b3(_0x19877a); let _0x1fbd41 = ''; const _0x27d1f4 = new Date(); let _0x1ce091 = null, _0x2ced = '无'; if (_0x429240) try { if (_0x5ad9f6(0x362) !== _0x5ad9f6(0x842)) { const _0x3fb76d = JSON[_0x5ad9f6(0xb4e)](_0x429240); if (Array[_0x5ad9f6(0x9bd)](_0x3fb76d) && _0x3fb76d[_0x5ad9f6(0xa1e)] > 0x0) { if (_0x5ad9f6(0xba5) !== 'xhAWP') { const _0x2ec1f7 = _0x3fb76d[_0x5ad9f6(0x959)](_0x4f1c64 => new Date(_0x4f1c64['timestamp'] || _0x4f1c64[_0x5ad9f6(0xb60)]))[_0x5ad9f6(0x695)](_0x38135b => !isNaN(_0x38135b)); _0x2ec1f7[_0x5ad9f6(0xa1e)] > 0x0 && (_0x1ce091 = new Date(Math[_0x5ad9f6(0x460)][_0x5ad9f6(0x95e)](null, _0x2ec1f7)), _0x2ced = _0x1ce091['toLocaleString'](_0x5ad9f6(0x5a5), { 'dateStyle': _0x5ad9f6(0x35b), 'timeStyle': _0x5ad9f6(0x5fe) })); } else { const _0x112c89 = _0x1f2f98['getElementById'](_0x5ad9f6(0x21c)); _0x112c89[_0x5ad9f6(0x72d)] = ''; const _0x5cb41a = _0x3c1822[_0x5ad9f6(0x45f)]['filter'](_0x49c235 => _0x4c3972[_0x5ad9f6(0x7af)][_0x5ad9f6(0x3bb)](_0x4280c4 => _0x4280c4['type'] === 'private' && _0x4280c4[_0x5ad9f6(0x5c9)]['includes'](_0x49c235['id']))); if (_0x5cb41a[_0x5ad9f6(0xa1e)] === 0x0) { _0x112c89['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } _0x5cb41a[_0x5ad9f6(0xaa9)](_0x50e8a8 => { const _0x2f15da = _0x5ad9f6, _0x223477 = _0x4c2cfb[_0x2f15da(0x6a8)]('li'); _0x223477['className'] = _0x2f15da(0x1de), _0x223477['dataset'][_0x2f15da(0x259)] = _0x50e8a8['id'], _0x223477[_0x2f15da(0x72d)] = _0x2f15da(0x597) + (_0x50e8a8[_0x2f15da(0x1c4)] || _0x2c7931) + _0x2f15da(0x356) + _0x50e8a8[_0x2f15da(0x9dc)] + _0x2f15da(0x3a5) + (_0x50e8a8[_0x2f15da(0x4db)] || '私聊') + _0x2f15da(0x59e), _0x223477[_0x2f15da(0x46a)](_0x2f15da(0x3cd), () => { _0x2e5ba3(_0x50e8a8['id']); }), _0x112c89[_0x2f15da(0x1ce)](_0x223477); }); } } } else return _0x275c24[_0x5ad9f6(0x705)](_0x3a47f4, _0x5db924 + 0x1); } catch (_0x373ec2) { console[_0x5ad9f6(0xa8c)](_0x5ad9f6(0xa23), _0x373ec2); } const _0x41c57d = _0x53390d(_0x19877a); _0x1fbd41 = _0x5ad9f6(0x6b7), _0x1fbd41 += '-\x20**当前精确时间**:\x20' + _0x27d1f4[_0x5ad9f6(0x773)]('zh-CN', { 'dateStyle': _0x5ad9f6(0x294), 'timeStyle': 'short' }) + '\x0a'; if (_0x41c57d) { if (_0x5ad9f6(0x94f) !== _0x5ad9f6(0x1ab)) { const _0x42d938 = new Date(_0x41c57d[_0x5ad9f6(0x6aa)]), _0x5e1028 = _0x582cc2(_0x42d938); _0x1fbd41 += _0x5ad9f6(0x210) + _0x5e1028 + '\x0a'; const _0x53f270 = _0x27d1f4['toDateString'](), _0x41dd37 = _0x42d938[_0x5ad9f6(0x753)](), _0x9b9ea1 = new Date(); _0x9b9ea1[_0x5ad9f6(0x698)](_0x27d1f4[_0x5ad9f6(0x72b)]() - 0x1); const _0x1f8896 = _0x9b9ea1[_0x5ad9f6(0x753)](); if (_0x53f270 === _0x41dd37) { const _0xaf7636 = (_0x27d1f4 - _0x42d938) / (0x3e8 * 0x3c); if (_0xaf7636 < 0x3c) { if ('LHZZg' === _0x5ad9f6(0x18a)) _0x1fbd41 += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; else { const _0x2e418b = _0x3a2e5e[_0x5ad9f6(0x6a8)]('li'); _0x2e418b[_0x5ad9f6(0x6e1)] = 'character-item', _0x2e418b[_0x5ad9f6(0x6c3)][_0x5ad9f6(0x259)] = _0x5c1bc5['id'], _0x2e418b[_0x5ad9f6(0x72d)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x4b9433[_0x5ad9f6(0x1c4)] || _0x7cdf78) + _0x5ad9f6(0x356) + _0x6a81fa['name'] + _0x5ad9f6(0x919), _0x2e418b['addEventListener'](_0x5ad9f6(0x3cd), () => { _0x33159b(_0x488c1['id']); }), _0x2e418b[_0x5ad9f6(0x76d)](_0x5ad9f6(0x2db))[_0x5ad9f6(0x46a)](_0x5ad9f6(0x3cd), () => { _0x1970a1(_0x30a0da['id']); }), _0x2e418b[_0x5ad9f6(0x76d)](_0x5ad9f6(0x809))[_0x5ad9f6(0x46a)](_0x5ad9f6(0x3cd), _0x5ceb00 => { const _0x5e4e96 = _0x5ad9f6; _0x5ceb00[_0x5e4e96(0x3d5)](), _0x215649(_0x56e8bf['id']); }), _0x1b9766['appendChild'](_0x2e418b); } } else _0x1fbd41 += _0x5ad9f6(0x58c) + Math[_0x5ad9f6(0x198)](_0xaf7636 / 0x3c) + _0x5ad9f6(0x788); } else { if (_0x1f8896 === _0x41dd37) _0x1fbd41 += _0x5ad9f6(0x818); else { const _0x3a208e = Math['round']((_0x27d1f4 - _0x42d938) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x1fbd41 += _0x5ad9f6(0x4c6) + _0x3a208e + _0x5ad9f6(0x7c1); } } } else _0x44abb4[_0x5ad9f6(0x214)](_0x5ad9f6(0xabc) + _0x2280a7['id'], _0x334a9c); } else _0x1fbd41 += _0x5ad9f6(0x965); let _0x773402 = '', _0x33240d = ''; if (_0x429240) { if (_0x5ad9f6(0xa36) !== _0x5ad9f6(0xb17)) _0x773402 = _0x5ad9f6(0xa28), _0x33240d = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```json\x0a' + _0x429240 + _0x5ad9f6(0x951); else { const _0x23d2b4 = _0x37347c[_0x5ad9f6(0x61b)](_0x5ad9f6(0x64b)); _0x23d2b4[_0x5ad9f6(0x6c7)] = _0xa7d387, _0x23d2b4['style'][_0x5ad9f6(0x458)] = 'block'; if (_0x45dc1b['_t']) _0x17fe6a(_0x23b6ed['_t']); _0x3f1f2d['_t'] = _0x17dafb(() => { const _0x34c0c5 = _0x5ad9f6; _0x23d2b4[_0x34c0c5(0x7c9)][_0x34c0c5(0x458)] = _0x34c0c5(0x678); }, 0x640); } } else _0x5ad9f6(0x309) === _0x5ad9f6(0x64a) ? (_0x3c4635[_0x5ad9f6(0x214)](_0x5ad9f6(0x893), _0xd6b52), _0x39b48(_0x5ad9f6(0x627))) : _0x773402 = _0x5ad9f6(0x500); const _0x15684f = { 'gallery': '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'whispers': _0x5ad9f6(0xafe), 'abyss': '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'fragments': _0x5ad9f6(0x9b5), 'bites': _0x5ad9f6(0x7d8), 'wants': _0x5ad9f6(0xabd), 'footprints': _0x5ad9f6(0x2bb) }, _0xa7b08b = _0x15684f[_0x1191f8] || _0x5ad9f6(0x888) + _0x1191f8 + _0x5ad9f6(0x87f); let _0x9fe926 = ''; if (_0x3e7537[_0x5ad9f6(0x473)] && _0x3e7537[_0x5ad9f6(0x473)][_0x5ad9f6(0xa1e)] > 0x0) { const _0x4b90e5 = _0x3e7537[_0x5ad9f6(0x473)]['map'](_0x56e9f3 => _0x4295e2[_0x5ad9f6(0x496)][_0x5ad9f6(0x7e6)](_0x3ab990 => _0x3ab990['id'] === _0x56e9f3))[_0x5ad9f6(0x695)](Boolean)[_0x5ad9f6(0x959)](_0x30090b => _0x5ad9f6(0x918) + _0x30090b[_0x5ad9f6(0x9dc)] + '\x0a' + _0x30090b[_0x5ad9f6(0x8f0)])['join'](''); _0x4b90e5 && (_0x9fe926 = _0x5ad9f6(0x968) + _0x4b90e5); } const _0x46d2cc = _0x5ad9f6(0x41d) + _0x3e7537['name'] + _0x5ad9f6(0x75b) + _0x3e7537[_0x5ad9f6(0x9dc)] + _0x5ad9f6(0xa3a) + _0x2ba609[_0x5ad9f6(0x9dc)] + _0x5ad9f6(0x352) + _0x2ced + _0x5ad9f6(0x7fa) + _0x27d1f4[_0x5ad9f6(0x773)]('zh-CN', { 'dateStyle': _0x5ad9f6(0x294), 'timeStyle': _0x5ad9f6(0x5fe) }) + _0x5ad9f6(0x69c) + _0x3e7537[_0x5ad9f6(0x9dc)] + _0x5ad9f6(0x8ec) + _0x3e7537['persona'] + '\x0a' + _0x9fe926 + _0x5ad9f6(0x55b) + _0x2ba609[_0x5ad9f6(0x9dc)] + _0x5ad9f6(0x8ec) + _0x2ba609['persona'] + _0x5ad9f6(0x5f9) + _0x3c8b6f + '\x0a' + _0x33240d + _0x5ad9f6(0x883) + _0x773402 + '\x0a' + _0xa7b08b + _0x5ad9f6(0x233), _0x4fbcff = [{ 'role': _0x5ad9f6(0x4f2), 'content': _0x46d2cc }], _0x2870d8 = await _0x110c3c(_0x4fbcff, { 'json': !![] }); return _0x2870d8; } async function _0x327dbd(_0x49696a) { const _0x1eb9ac = _0x34dc25; if (_0x1eb9ac(0xaa2) !== _0x1eb9ac(0xaa2)) _0xfe9345 += _0x1eb9ac(0x965); else { const _0x1bda91 = _0x5aa3d9(_0x49696a); if (!_0x1bda91) throw new Error(_0x1eb9ac(0x2be)); _0x48b9ad(!![], _0x1eb9ac(0xb7a)); const _0x199646 = ['gallery', _0x1eb9ac(0x199), _0x1eb9ac(0x8d1), 'fragments', _0x1eb9ac(0x57c), _0x1eb9ac(0x334), _0x1eb9ac(0x4d0)]; let _0x5bb9ab = {}; await Promise[_0x1eb9ac(0x253)](_0x199646[_0x1eb9ac(0x959)](async _0x1d2738 => { const _0x5c88f6 = _0x1eb9ac, _0x44f1dc = _0x5c88f6(0x6ad) + _0x49696a + '_' + _0x1d2738, _0x8eecf = await _0x168090(_0x44f1dc); if (_0x8eecf) { if ('mmsdZ' === _0x5c88f6(0x5c4)) { const _0x13d1ce = _0x17e6b8[_0x5c88f6(0x61b)]('global-player-play-pause-btn'); if (_0x13d1ce) _0x13d1ce[_0x5c88f6(0x6c7)] = '▶'; } else try { _0x5bb9ab[_0x1d2738] = JSON[_0x5c88f6(0xb4e)](_0x8eecf); } catch (_0x197c6a) { } } })); if (Object[_0x1eb9ac(0x974)](_0x5bb9ab)[_0x1eb9ac(0xa1e)] === 0x0) { if (_0x1eb9ac(0x5fa) !== _0x1eb9ac(0x48f)) return _0x1eb9ac(0x2d7); else _0x16c263['classList'][_0x1eb9ac(0x194)](_0x1eb9ac(0x45a)), _0x371783[_0x1eb9ac(0x1f5)][_0x1eb9ac(0xaf2)](_0x1eb9ac(0x45a)), _0x2b2030(); } const _0x2dc225 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x1bda91[_0x1eb9ac(0x9dc)] + _0x1eb9ac(0x9e1), _0x1f02a0 = [{ 'role': 'system', 'content': _0x2dc225 }, { 'role': _0x1eb9ac(0x742), 'content': JSON[_0x1eb9ac(0x1c5)](_0x5bb9ab, null, 0x2) }]; _0x48b9ad(!![], '书记官正在奋笔疾书...'); const _0xd7c3a5 = await _0x110c3c(_0x1f02a0); return _0xd7c3a5 || _0x1eb9ac(0x1f7); } } async function _0x327dbd(_0x259c9a) { const _0x4f9c82 = _0x34dc25, _0x1da881 = _0x5aa3d9(_0x259c9a); if (!_0x1da881) throw new Error(_0x4f9c82(0x2be)); try { _0x48b9ad(!![], _0x4f9c82(0xb7a)); const _0x54a086 = [_0x4f9c82(0x41b), _0x4f9c82(0x199), _0x4f9c82(0x8d1), _0x4f9c82(0x9ea), _0x4f9c82(0x57c), 'wants', _0x4f9c82(0x4d0)]; let _0x6137a4 = {}; await Promise[_0x4f9c82(0x253)](_0x54a086[_0x4f9c82(0x959)](async _0x48106a => { const _0xc79f9c = _0x4f9c82, _0x2ac9a2 = _0xc79f9c(0x6ad) + _0x259c9a + '_' + _0x48106a, _0x5d3b57 = await _0x168090(_0x2ac9a2); if (_0x5d3b57) try { _0xc79f9c(0x87a) !== _0xc79f9c(0x555) ? _0x6137a4[_0x48106a] = JSON[_0xc79f9c(0xb4e)](_0x5d3b57) : _0x20b7ed[_0xc79f9c(0x46a)](_0xc79f9c(0x3cd), function () { const _0x26cf78 = _0xc79f9c, _0x3aa4c6 = { 'id': _0x26cf78(0x3a3) + _0x1f7e1f[_0x26cf78(0x6aa)], 'url': _0x41f5ca[_0x26cf78(0x65e)] }; _0xb3f2d5(this, _0x3aa4c6); }); } catch (_0x1e04aa) { } })); if (Object[_0x4f9c82(0x974)](_0x6137a4)['length'] === 0x0) return _0x4f9c82(0x7f8) !== _0x4f9c82(0x7f8) ? new _0x147978((_0x22573c, _0x1d26ac) => { const _0x1eccd5 = _0x4f9c82, _0x20a918 = new _0x5e6c90(); _0x20a918[_0x1eccd5(0x3dd)] = () => _0x22573c(_0x20a918[_0x1eccd5(0x979)]), _0x20a918[_0x1eccd5(0x6f9)] = _0x1d26ac, _0x20a918['readAsDataURL'](_0x27a434); }) : 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。'; const _0x2c2c01 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x1da881[_0x4f9c82(0x9dc)] + _0x4f9c82(0xa5a), _0x35d9fb = [{ 'role': _0x4f9c82(0x4f2), 'content': _0x2c2c01 }, { 'role': 'user', 'content': JSON['stringify'](_0x6137a4, null, 0x2) }]; _0x48b9ad(!![], '书记官正在奋笔疾书...'); const _0x5334ca = await _0x110c3c(_0x35d9fb); return _0x5334ca || _0x4f9c82(0x1f7); } finally { if (_0x4f9c82(0x84a) === _0x4f9c82(0x57d)) { const _0x1e5d7e = _0x4e90ae ?? _0x44560c[_0x4f9c82(0x21f)][_0x4f9c82(0x2c7)](); if (_0x1e5d7e === '' || !_0xdadb3a[_0x4f9c82(0x845)]) return; const _0x541e05 = _0x3db4d7['querySelector'](_0x4f9c82(0xb23)), _0x31d820 = _0x541e05['id'] === _0x4f9c82(0x8b9), _0x5351b2 = { 'role': _0x4f9c82(0x742), 'content': _0x1e5d7e, 'timestamp': _0x5b69fe[_0x4f9c82(0xb3d)](), 'isOffline': _0x31d820 }; _0x2baed0['activeQuote'] && (_0x5351b2[_0x4f9c82(0x30a)] = { ..._0xb02de1[_0x4f9c82(0x9ce)] }), _0x1b5f33[_0x4f9c82(0x369)][_0x4f9c82(0x230)](_0x5351b2), _0x5bed98(), _0xa0e737(), !_0x20f735 && (_0x378e41[_0x4f9c82(0x21f)] = ''), _0x4daaf9(); } else _0x48b9ad(![]); } } document['getElementById'](_0x34dc25(0x318))[_0x34dc25(0x46a)]('click', () => _0xd18e04(_0x34dc25(0x19d), _0x34dc25(0x622))), document[_0x34dc25(0x61b)](_0x34dc25(0xaec))[_0x34dc25(0x46a)](_0x34dc25(0x3cd), () => { const _0x430d3c = _0x34dc25; 'ktKwv' !== _0x430d3c(0x238) ? _0x32c404(_0x4055ac[_0x430d3c(0x71e)](_0x46e99e, _0x116938)) : (document[_0x430d3c(0x61b)](_0x430d3c(0xa9c))['style'][_0x430d3c(0x458)] = _0x430d3c(0x678), _0xd18e04('snoopList', 'snoopPhone')); }), _0x2c1657(); }); async function _0x45124d() { const _0x244354 = _0xf11eb5; console[_0x244354(0x777)](_0x244354(0x764)), console[_0x244354(0x777)](_0x244354(0x89e)); async function _0x510551(_0x1dd2e9, _0x2423e1) { const _0x191f41 = _0x244354; if ('bJKju' !== 'bJKju') { _0x102889 = ![], _0x2aab8b['style'][_0x191f41(0x458)] = _0x191f41(0x678), _0x490b6e['getElementById'](_0x191f41(0x9c6))[_0x191f41(0x7c9)][_0x191f41(0x458)] = 'block', _0x29be2b[_0x191f41(0x61b)]('galgame-sprite-adjust-ui')[_0x191f41(0x7c9)][_0x191f41(0x458)] = _0x191f41(0x1c1); if (!_0x570451) { const _0x3a0401 = _0x269828(_0x2d85a8[_0x191f41(0xa6b)]); _0x3a0401 && (_0x3a0401[_0x191f41(0x384)] = _0x15a2f1, _0x19a4a1(_0x5bd591[_0x191f41(0xa6b)], _0x191f41(0x8a7))); } } else { const _0x1ee4de = await _0x1dfda6; return new Promise((_0x284775, _0x2a9c96) => { const _0x32df23 = _0x191f41, _0x1b7c76 = _0x1ee4de[_0x32df23(0x80d)](_0x136f7d, 'readwrite'), _0x2533a2 = _0x1b7c76['objectStore'](_0x136f7d), _0x4058d5 = _0x2533a2[_0x32df23(0x573)]({ 'id': _0x1dd2e9, 'blob': _0x2423e1 }); _0x4058d5[_0x32df23(0x371)] = () => _0x284775(_0x4058d5['result']), _0x4058d5[_0x32df23(0x6f9)] = () => _0x2a9c96(_0x4058d5[_0x32df23(0x214)]); }); } } async function _0x53eeed(_0x3fe087) { const _0x3d0251 = await _0x1dfda6; return new Promise((_0x5ed1e6, _0x9e2d6b) => { const _0x61b055 = _0x585d, _0x445dad = _0x3d0251[_0x61b055(0x80d)](_0x4efc38, 'readonly'), _0x368025 = _0x445dad[_0x61b055(0x193)](_0x4efc38), _0x2ed3f2 = _0x368025[_0x61b055(0xb51)](_0x3fe087); _0x2ed3f2[_0x61b055(0x371)] = () => _0x5ed1e6(_0x2ed3f2[_0x61b055(0x979)] ? _0x2ed3f2['result'][_0x61b055(0x4ff)] : null), _0x2ed3f2[_0x61b055(0x6f9)] = () => _0x9e2d6b(_0x2ed3f2[_0x61b055(0x214)]); }); } async function _0x46df25(_0x172e72, _0x4ce69d) { const _0x512394 = _0x244354; if (_0x512394(0x3b9) !== _0x512394(0x3b9)) _0x2e8890[_0x512394(0x81c)][_0x512394(0x73f)] = null, _0x2404d8(), _0x2c09ce(), _0x119e1a(_0x512394(0x778)); else { const _0x305e46 = await _0x1dfda6; return new Promise((_0x72cdf0, _0x443619) => { const _0x26e999 = _0x512394, _0x4da3e1 = _0x305e46[_0x26e999(0x80d)](_0x4efc38, 'readwrite'), _0x15bba5 = _0x4da3e1[_0x26e999(0x193)](_0x4efc38), _0x558afe = _0x15bba5[_0x26e999(0x573)]({ 'id': _0x172e72, 'data': _0x4ce69d }); _0x558afe[_0x26e999(0x371)] = () => _0x72cdf0(), _0x558afe['onerror'] = () => _0x443619(_0x558afe[_0x26e999(0x214)]); }); } } function _0x10441f(_0x4a1c35) { const _0x3f69d3 = _0x244354; return fetch(_0x4a1c35)[_0x3f69d3(0xb30)](_0x207684 => _0x207684[_0x3f69d3(0x7da)]()); } let _0x415600 = 0x0; for (let _0x16c27f = 0x0; _0x16c27f < localStorage[_0x244354(0xa1e)]; _0x16c27f++) { const _0x4032a3 = localStorage[_0x244354(0x807)](_0x16c27f); if (_0x4032a3 && _0x4032a3[_0x244354(0x772)](_0x244354(0x1a9))) { if (_0x244354(0x8db) === _0x244354(0x6e5)) { _0x4d793e['innerHTML'] = _0x244354(0x39a); return; } else { let _0x532b85, _0x347bb4 = ![]; try { _0x532b85 = JSON['parse'](localStorage[_0x244354(0x2f0)](_0x4032a3)); if (!Array[_0x244354(0x9bd)](_0x532b85)) continue; for (const _0x400512 of _0x532b85) { if (_0x400512 && _0x400512['image'] && _0x400512[_0x244354(0x37c)][_0x244354(0x772)](_0x244354(0x8f7))) { if (_0x244354(0x5d9) === _0x244354(0x5d9)) { const _0x25b5a6 = await _0x10441f(_0x400512[_0x244354(0x37c)]), _0x24c4e6 = 'chat_image_migrated_' + Date['now']() + '_' + Math[_0x244354(0x6cc)](); await _0x510551(_0x24c4e6, _0x25b5a6), _0x400512[_0x244354(0x295)] = _0x24c4e6, delete _0x400512[_0x244354(0x37c)], _0x347bb4 = !![], _0x415600++; } else { _0x323bb4(); const _0xcdf3eb = (_0xb0e17a[_0x244354(0x484)][_0x244354(0x419)] || '')['includes'](_0x4f90ed); _0x4c2391[_0x244354(0x832)] = _0xcdf3eb, _0x5b2152('settings', 'home'); } } } if (_0x347bb4) { if (_0x244354(0x261) !== _0x244354(0x82c)) localStorage['setItem'](_0x4032a3, JSON[_0x244354(0x1c5)](_0x532b85)); else { const _0x24bf8f = _0x40f5a6[_0x244354(0x2d4)] === _0x244354(0x3f6) ? '你' : _0x85f9d8[_0x244354(0xaf8)]; _0x3e2356 += '\x20\x20\x20\x20-\x20' + _0x24bf8f + ':\x20' + _0x1bb856[_0x244354(0x8f0)] + '\x0a'; } } } catch (_0x4d18ea) { console[_0x244354(0x214)](_0x244354(0x703) + _0x4032a3 + _0x244354(0xa5f), _0x4d18ea); continue; } } } } console[_0x244354(0x777)](_0x244354(0x958) + _0x415600 + _0x244354(0x967)); } async function _0x5db71d() { const _0x1424b2 = _0xf11eb5; console[_0x1424b2(0x777)](_0x1424b2(0x88d)), console['log']('哼，正在净化你那些被污染的好友圈动态...'); async function _0xf8bd3c(_0x4e8903, _0x4218f7) { const _0xc3ef0f = _0x1424b2; if (_0xc3ef0f(0x9a3) === _0xc3ef0f(0x978)) _0x5dcf6e[_0xc3ef0f(0x9ce)] = null, _0x2c987c[_0xc3ef0f(0x7c9)]['display'] = _0xc3ef0f(0x678); else { const _0x235146 = await _0x1dfda6; return new Promise((_0x1f5d05, _0x5b6bdb) => { const _0x1ee3a5 = _0xc3ef0f, _0x19e0aa = _0x235146[_0x1ee3a5(0x80d)](_0x1ee3a5(0xadc), _0x1ee3a5(0xab9)), _0x3859dc = _0x19e0aa['objectStore'](_0x1ee3a5(0xadc)), _0x3159f6 = _0x3859dc['put']({ 'id': _0x4e8903, 'blob': _0x4218f7 }); _0x3159f6['onsuccess'] = () => _0x1f5d05(_0x3159f6[_0x1ee3a5(0x979)]), _0x3159f6[_0x1ee3a5(0x6f9)] = () => _0x5b6bdb(_0x3159f6[_0x1ee3a5(0x214)]); }); } } function _0x35e35f(_0x4ef38d) { const _0x32ea84 = _0x1424b2; if (_0x32ea84(0x258) !== _0x32ea84(0x841)) return fetch(_0x4ef38d)['then'](_0x4f685f => _0x4f685f[_0x32ea84(0x7da)]()); else { const _0x952894 = _0x2238f2[_0x32ea84(0x61b)](_0x32ea84(0x626)), _0x5a08bf = _0x233d57[_0x32ea84(0x61b)](_0x32ea84(0x478)), _0x85c88c = new _0xdc26e5(); _0x85c88c[_0x32ea84(0x8c2)](0x0, 0x0, 0x0, 0x0); const _0x28f624 = _0x499635[_0x32ea84(0x2ed)][_0x32ea84(0x695)](_0x3143aa => _0x3143aa['type'] === _0x32ea84(0x8a0) && new _0x47d32d(_0x3143aa[_0x32ea84(0x191)] + 'T00:00:00') >= _0x85c88c)[_0x32ea84(0x96f)]((_0x2614ba, _0x102c37) => new _0x21bb2d(_0x2614ba[_0x32ea84(0x191)]) - new _0x311714(_0x102c37['date'])); if (_0x28f624[_0x32ea84(0xa1e)] > 0x0) { const _0x20da37 = _0x28f624[0x0], _0x5c71cc = new _0x5cdfc5(_0x20da37[_0x32ea84(0x191)] + 'T00:00:00'), _0x2bc6a3 = _0x5c71cc - _0x85c88c, _0x8c0a9d = _0x5dce15[_0x32ea84(0x344)](_0x2bc6a3 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x952894['textContent'] = _0x32ea84(0xb1e) + _0x20da37[_0x32ea84(0x8f0)] + '」', _0x5a08bf['innerHTML'] = _0x32ea84(0x32f) + _0x8c0a9d + _0x32ea84(0xb4d); } else _0x952894[_0x32ea84(0x6c7)] = _0x32ea84(0x713), _0x5a08bf[_0x32ea84(0x72d)] = '<span>--</span><span\x20class=\x22unit\x22>天</span>'; } } let _0x452341 = 0x0, _0xb2ff91 = ![]; try { const _0x55641b = localStorage[_0x1424b2(0x2f0)]('appState'); if (!_0x55641b) { console[_0x1424b2(0x777)]('好友圈档案柜是空的，无需净化。'); return; } const _0x558ddb = JSON[_0x1424b2(0xb4e)](_0x55641b); if (!_0x558ddb[_0x1424b2(0x7f0)] || !Array[_0x1424b2(0x9bd)](_0x558ddb['friendCircles'])) return; for (const _0x5105db of _0x558ddb[_0x1424b2(0x7f0)]) { if (_0x5105db[_0x1424b2(0xad3)] && Array[_0x1424b2(0x9bd)](_0x5105db[_0x1424b2(0xad3)])) for (const _0x5be214 of _0x5105db[_0x1424b2(0xad3)]) { if (_0x5be214 && _0x5be214['image'] && _0x5be214[_0x1424b2(0x37c)]['startsWith'](_0x1424b2(0x8f7))) { if (_0x1424b2(0xb8b) === 'DwzxN') { if (_0x159c67[_0x1424b2(0x6f1)]) _0x439917(_0x13965d[_0x1424b2(0x6f1)]); } else { console[_0x1424b2(0x777)]('在好友圈\x20\x22' + _0x5105db['name'] + _0x1424b2(0x681)); const _0x48f495 = await _0x35e35f(_0x5be214['image']), _0x3852a2 = _0x1424b2(0x192) + Date[_0x1424b2(0xb3d)]() + '_' + Math[_0x1424b2(0x6cc)](); await _0xf8bd3c(_0x3852a2, _0x48f495), _0x5be214[_0x1424b2(0x295)] = _0x3852a2, delete _0x5be214[_0x1424b2(0x37c)], _0xb2ff91 = !![], _0x452341++; } } } } _0xb2ff91 && (console[_0x1424b2(0x777)](_0x1424b2(0xa22)), localStorage[_0x1424b2(0x783)]('appState', JSON['stringify'](_0x558ddb))); } catch (_0x358e78) { _0x1424b2(0x943) !== _0x1424b2(0x6ac) ? console['error'](_0x1424b2(0xb62), _0x358e78) : (_0xa50ae8[_0x1424b2(0x214)](_0x1424b2(0x455), _0x30f2fa), _0x1a3958(_0x1424b2(0x330) + _0x5c4f66['message'])); } return console[_0x1424b2(0x777)]('---\x20好友圈净化仪式完成\x20---'), console['log'](_0x1424b2(0x538) + _0x452341 + _0x1424b2(0xa45)), _0x452341; } async function _0x5ead46() { const _0xb04f9c = _0xf11eb5; console[_0xb04f9c(0x777)]('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'), console[_0xb04f9c(0x777)]('哼，正在净化你那些超重的音乐分享记录...'); let _0x329556 = 0x0, _0x344b61 = ![]; try { if (_0xb04f9c(0x3d8) !== _0xb04f9c(0x3d8)) { const _0x74873b = _0x47e2e3[_0xb04f9c(0x9d1)][_0xb04f9c(0x695)](_0x8c8bca => _0x8c8bca[_0xb04f9c(0x1b8)] === _0xb04f9c(0x742))[_0xb04f9c(0x52b)](); _0x74873b && (_0x3ea424 = _0x74873b[_0xb04f9c(0x8f0)]); } else { const _0x57f739 = localStorage[_0xb04f9c(0x2f0)](_0xb04f9c(0x372)); if (!_0x57f739) return console[_0xb04f9c(0x777)](_0xb04f9c(0x56b)), 0x0; for (let _0x102eab = 0x0; _0x102eab < localStorage[_0xb04f9c(0xa1e)]; _0x102eab++) { const _0x4b4400 = localStorage[_0xb04f9c(0x807)](_0x102eab); if (_0x4b4400 && _0x4b4400['startsWith'](_0xb04f9c(0x1a9))) { let _0x574b23, _0x40f5ae = ![]; try { _0x574b23 = JSON[_0xb04f9c(0xb4e)](localStorage['getItem'](_0x4b4400)); if (!Array[_0xb04f9c(0x9bd)](_0x574b23)) continue; for (const _0x5533ee of _0x574b23) { if ('JjiNn' === _0xb04f9c(0xab4)) { if (_0x5533ee && (_0x5533ee[_0xb04f9c(0x63a)] === _0xb04f9c(0x67f) || _0x5533ee['type'] === _0xb04f9c(0x5c7)) && _0x5533ee[_0xb04f9c(0x382)] && _0x5533ee[_0xb04f9c(0x382)][_0xb04f9c(0x772)](_0xb04f9c(0x8f7))) { if (_0xb04f9c(0x92a) !== 'BVdBk') _0x47c79d['type'] = 'text'; else { const _0xc8bec3 = await _0x30f5c0(_0x5533ee['coverUrl']), _0x5defa7 = 'music_cover_migrated_' + Date['now']() + '_' + Math[_0xb04f9c(0x6cc)](); await _0x190daf(_0x5defa7, _0xc8bec3), _0x5533ee['coverId'] = _0x5defa7, delete _0x5533ee[_0xb04f9c(0x382)], _0x40f5ae = !![], _0x329556++; } } } else { if (_0x5d6266) { const _0x598b39 = _0xc557d0[_0xb04f9c(0xa4f)](_0x1906cb); _0x133d84['src'] = _0x598b39, _0x1dae8d[_0xb04f9c(0x5a9)] = () => _0x4368ad[_0xb04f9c(0x3c8)](_0x598b39); } } } _0x40f5ae && localStorage[_0xb04f9c(0x783)](_0x4b4400, JSON[_0xb04f9c(0x1c5)](_0x574b23)); } catch (_0x1d1e99) { console[_0xb04f9c(0x214)](_0xb04f9c(0x703) + _0x4b4400 + _0xb04f9c(0x335), _0x1d1e99); continue; } } } } } catch (_0x38c533) { if (_0xb04f9c(0x2ad) !== _0xb04f9c(0x2ad)) { const _0x38c7b0 = _0x3b0a7a['target'][_0xb04f9c(0xaa5)][0x0]; if (!_0x38c7b0) return; const _0x39d2c0 = _0x51f8b3[_0xb04f9c(0xa4f)](_0x38c7b0); _0x253c46[_0xb04f9c(0x7c9)]['backgroundImage'] = _0xb04f9c(0x3bd) + _0x39d2c0 + '\x27)'; } else console[_0xb04f9c(0x214)](_0xb04f9c(0x7b7), _0x38c533); } return console[_0xb04f9c(0x777)](_0xb04f9c(0x882)), console[_0xb04f9c(0x777)](_0xb04f9c(0x538) + _0x329556 + '\x20张旧的音乐封面。'), _0x329556; } function _0x2633dd() { const _0x273950 = _0xf11eb5; if (!_0x4295e2[_0x273950(0x5c1)]) return _0x4295e2['userProfiles'][_0x273950(0x7e6)](_0x47a25a => _0x47a25a['id'] === _0x4295e2[_0x273950(0x2e4)]) || _0x4295e2[_0x273950(0x59b)][0x0]; const _0x4fd428 = _0x4295e2[_0x273950(0x7af)]['find'](_0x483a42 => _0x483a42[_0x273950(0x63a)] === _0x273950(0x780) && _0x483a42[_0x273950(0x5c9)][_0x273950(0x2b7)](_0x4295e2[_0x273950(0x5c1)])), _0x5601ba = _0x4fd428?.[_0x273950(0x4b1)] || _0x4295e2[_0x273950(0x2e4)]; return _0x4295e2[_0x273950(0x59b)][_0x273950(0x7e6)](_0x45542d => _0x45542d['id'] === _0x5601ba) || _0x4295e2['userProfiles'][0x0]; } function _0x582cc2(_0x259481) { const _0x5b4e3a = _0xf11eb5, _0x3d96cf = new Date(), _0x1d7dcc = _0x3d96cf - _0x259481, _0x2f7e81 = Math['round'](_0x1d7dcc / 0x3e8), _0x34eea9 = Math[_0x5b4e3a(0x198)](_0x2f7e81 / 0x3c), _0x10cecb = Math[_0x5b4e3a(0x198)](_0x34eea9 / 0x3c), _0x42eee1 = Math[_0x5b4e3a(0x198)](_0x10cecb / 0x18), _0x2eba0a = _0x259481['toLocaleTimeString'](_0x5b4e3a(0x5a5), { 'hour': '2-digit', 'minute': '2-digit' }); if (_0x2f7e81 < 0x3c) return '刚才'; if (_0x34eea9 < 0x3c) { if (_0x5b4e3a(0x85e) === _0x5b4e3a(0x85e)) return _0x34eea9 + _0x5b4e3a(0x3d9); else _0x418ccc[_0x5b4e3a(0x59b)] = _0x42d151[_0x5b4e3a(0x59b)], _0x4a9f90[_0x5b4e3a(0x2e4)] = _0x53321d['activeUserProfileId']; } const _0x230bd0 = _0x3d96cf[_0x5b4e3a(0x753)]() === _0x259481[_0x5b4e3a(0x753)](); if (_0x230bd0) { if (_0x5b4e3a(0x481) !== _0x5b4e3a(0x481)) { const _0x265b46 = _0x31b72e[0x1]['replace'](/\\"/g, '\x22')[_0x5b4e3a(0x1dc)](/\\n/g, '\x0a')['trim'](); if (_0x265b46) _0x593f27[_0x5b4e3a(0x230)](_0x265b46); } else return _0x5b4e3a(0x314) + _0x2eba0a; } const _0x4a0a5c = new Date(); _0x4a0a5c[_0x5b4e3a(0x698)](_0x3d96cf[_0x5b4e3a(0x72b)]() - 0x1); const _0x8ad6c4 = _0x4a0a5c['toDateString']() === _0x259481[_0x5b4e3a(0x753)](); if (_0x8ad6c4) return '昨天\x20' + _0x2eba0a; if (_0x42eee1 <= 0x7) { if (_0x5b4e3a(0x5ac) === _0x5b4e3a(0x774)) { const _0x27c885 = _0x267758[_0x5b4e3a(0x473)][_0x5b4e3a(0x959)](_0x368329 => _0x5dee09[_0x5b4e3a(0x496)][_0x5b4e3a(0x7e6)](_0x4bc2c9 => _0x4bc2c9['id'] === _0x368329))['filter'](_0x4a63df)[_0x5b4e3a(0x959)](_0x10095a => '\x0a\x0a##\x20世界书条目:\x20' + _0x10095a[_0x5b4e3a(0x9dc)] + '\x0a' + _0x10095a[_0x5b4e3a(0x8f0)])[_0x5b4e3a(0x247)](''); if (_0x27c885) _0x1b6076 = _0x5b4e3a(0x90f) + _0x27c885; } else { const _0x2cd318 = [_0x5b4e3a(0x63c), '星期一', _0x5b4e3a(0x73c), _0x5b4e3a(0xb9c), '星期四', _0x5b4e3a(0x4a0), _0x5b4e3a(0x997)]; return _0x2cd318[_0x259481['getDay']()] + '\x20' + _0x2eba0a; } } return _0x259481[_0x5b4e3a(0x874)]() + '年' + (_0x259481[_0x5b4e3a(0x4ef)]() + 0x1) + '月' + _0x259481[_0x5b4e3a(0x72b)]() + '日'; } function _0x2b0e1f(_0x5d36a9, _0x17b436 = 0x320, _0x4f2779 = 0.8, _0x22bf09 = ![]) { return new Promise((_0x5390db, _0x418956) => { const _0x5dcde4 = _0x585d; if (!_0x5d36a9 || !_0x5d36a9['type'][_0x5dcde4(0x772)](_0x5dcde4(0xafc))) return _0x418956(new Error(_0x5dcde4(0x4da))); const _0x28e149 = new FileReader(); _0x28e149[_0x5dcde4(0x7fe)](_0x5d36a9), _0x28e149[_0x5dcde4(0x5a9)] = _0x574c37 => { const _0x113db7 = _0x5dcde4, _0xc4af1d = new Image(); _0xc4af1d[_0x113db7(0x1b2)] = _0x574c37[_0x113db7(0x6e7)][_0x113db7(0x979)], _0xc4af1d['onload'] = () => { const _0x28f815 = _0x113db7, _0x2454bd = document[_0x28f815(0x6a8)](_0x28f815(0xa04)); let _0x193cd7 = _0xc4af1d[_0x28f815(0x46c)], _0x396dc1 = _0xc4af1d[_0x28f815(0x7ae)]; _0x193cd7 > _0x396dc1 ? _0x193cd7 > _0x17b436 && (_0x28f815(0x5b9) !== _0x28f815(0x747) ? (_0x396dc1 *= _0x17b436 / _0x193cd7, _0x193cd7 = _0x17b436) : _0x2645fe[_0x28f815(0x369)] = []) : _0x28f815(0x310) !== _0x28f815(0x2f2) ? _0x396dc1 > _0x17b436 && (_0x193cd7 *= _0x17b436 / _0x396dc1, _0x396dc1 = _0x17b436) : _0x4770e8[_0x28f815(0x783)](_0x28f815(0x939), _0x703517[_0x28f815(0x1c5)]({ 'playlist': _0x362714[_0x28f815(0x734)], 'currentIndex': _0x1af876[_0x28f815(0xb83)] })); _0x2454bd[_0x28f815(0x46c)] = _0x193cd7, _0x2454bd['height'] = _0x396dc1; const _0x4b7570 = _0x2454bd[_0x28f815(0x6c0)]('2d'); _0x4b7570['drawImage'](_0xc4af1d, 0x0, 0x0, _0x193cd7, _0x396dc1); const _0x53b378 = _0x5d36a9[_0x28f815(0x63a)] === 'image/png' ? _0x28f815(0x9d2) : _0x28f815(0x87c); if (_0x22bf09) { if (_0x28f815(0xa12) === _0x28f815(0xa12)) _0x2454bd['toBlob'](_0x4670b3 => { const _0x5b94e2 = _0x28f815; _0x4670b3 ? _0x5b94e2(0x9e3) === _0x5b94e2(0x37d) ? _0x106013[_0x5b94e2(0x72d)] = _0x136589 : _0x5390db(_0x4670b3) : _0x418956(new Error(_0x5b94e2(0x78e))); }, _0x53b378, _0x4f2779); else { _0x3a7156['textContent'] = _0x28f815(0xb01); return; } } else _0x5390db(_0x2454bd['toDataURL'](_0x53b378, _0x4f2779)); }, _0xc4af1d[_0x113db7(0x6f9)] = _0x401bee => _0x418956(_0x401bee); }, _0x28e149[_0x5dcde4(0x6f9)] = _0x5ac2d4 => _0x418956(_0x5ac2d4); }); } function _0x512f2f(_0x41eca7) { return new Promise((_0x35c27b, _0x29f09d) => { const _0x45d67b = _0x585d, _0x4eec21 = new FileReader(); _0x4eec21[_0x45d67b(0x3dd)] = () => _0x35c27b(_0x4eec21['result']), _0x4eec21[_0x45d67b(0x6f9)] = _0x29f09d, _0x4eec21[_0x45d67b(0x7fe)](_0x41eca7); }); } function _0x512f2f(_0x56606f) { return new Promise((_0x55a9ac, _0x2b575c) => { const _0x2a1165 = _0x585d; if (_0x2a1165(0x8de) !== _0x2a1165(0x8de)) _0x1eb51f[_0x2a1165(0x194)](); else { const _0x3fa242 = new FileReader(); _0x3fa242[_0x2a1165(0x3dd)] = () => _0x55a9ac(_0x3fa242[_0x2a1165(0x979)]), _0x3fa242['onerror'] = _0x2b575c, _0x3fa242[_0x2a1165(0x7fe)](_0x56606f); } }); } function _0xc216fb(_0x4735e0, _0x3995ec, _0x1c52c2) { const _0x3ae9d6 = _0xf11eb5, _0x1c2a03 = _0x43c012 => { const _0x20a442 = _0x585d; if (_0x43c012['role'] === 'user') return _0x4295e2[_0x20a442(0x5f2)]?.[_0x20a442(0x9dc)] || _0x20a442(0x5ef); if (_0x4735e0[_0x20a442(0x63a)] === 'group') { if (_0x20a442(0x48a) === _0x20a442(0x48a)) { const _0x261d13 = _0x43c012[_0x20a442(0x428)] ? _0x5ea761(_0x43c012[_0x20a442(0x428)]) : null; return _0x261d13?.[_0x20a442(0x9dc)] || _0x20a442(0x2c8); } else _0x50f3ab['userProfiles'] = _0x234623[_0x20a442(0x59b)][_0x20a442(0x695)](_0xb738b7 => _0xb738b7['id'] !== _0x3bf3aa), _0x176249[_0x20a442(0x2e4)] === _0x5c9302 && (_0x4868b7[_0x20a442(0x2e4)] = _0x5e5665[_0x20a442(0x59b)][0x0]['id']), _0x2e9c77[_0x20a442(0x7af)]['forEach'](_0x1a87a3 => { const _0x4156ee = _0x20a442; _0x1a87a3[_0x4156ee(0x4b1)] === _0x2285c3 && (_0x1a87a3[_0x4156ee(0x4b1)] = _0x3cf933['activeUserProfileId']); }), _0x4fe561(), _0x4bee39(_0x20a442(0x6d2)), _0x3b4066(), _0x14af0e('userProfileList', _0x20a442(0x5f2)); } else { if (_0x20a442(0x3db) === _0x20a442(0x3db)) { const _0x4365cb = _0x5ea761(_0x4735e0[_0x20a442(0x5c9)][0x0]); return _0x4365cb?.['name'] || 'AI'; } else _0x55cee8(_0x9b22b8); } }, _0x2e0546 = _0x3995ec['slice'](-_0x1c52c2), _0x1290e7 = []; for (const _0x5e1a03 of _0x2e0546) { const _0x29e2c1 = new Date(_0x5e1a03[_0x3ae9d6(0x6aa)])[_0x3ae9d6(0x510)](_0x3ae9d6(0x5a5), { 'hour': _0x3ae9d6(0x48c), 'minute': '2-digit' }); _0x5e1a03['content'] && _0x1290e7[_0x3ae9d6(0x230)]('[' + _0x29e2c1 + _0x3ae9d6(0x8be) + _0x1c2a03(_0x5e1a03) + ']\x20' + String(_0x5e1a03[_0x3ae9d6(0x8f0)])['trim']()); } return _0x1290e7; } function _0x585d(_0x5b8e93, _0x448d8d) { const _0x419ded = _0x419d(); return _0x585d = function (_0x585d16, _0x5cf436) { _0x585d16 = _0x585d16 - 0x183; let _0x4515dc = _0x419ded[_0x585d16]; return _0x4515dc; }, _0x585d(_0x5b8e93, _0x448d8d); } function _0x46d42b(_0x146b64) { const _0x316586 = _0xf11eb5; if (_0x146b64[_0x316586(0x63a)] === _0x316586(0x519)) return _0x316586(0x3e1) + (_0x146b64[_0x316586(0x9dc)] || _0x316586(0x4ab)) + '」'; const _0x5cfb18 = _0x5ea761(_0x146b64[_0x316586(0x5c9)][0x0]); return '与\x20' + (_0x5cfb18?.[_0x316586(0x9dc)] || _0x316586(0x2d5)) + _0x316586(0x7e5); } function _0x2df268(_0x5e4c6e) { const _0x37b45f = _0xf11eb5; try { const _0x4cc2e6 = localStorage[_0x37b45f(0x2f0)](_0x37b45f(0x1a9) + _0x5e4c6e), _0xa6c69e = JSON[_0x37b45f(0xb4e)](_0x4cc2e6 || '[]'); return Array[_0x37b45f(0x9bd)](_0xa6c69e) ? _0xa6c69e : []; } catch { return []; } } function _0x2442b3(_0x271eb8) { const _0x2f531b = _0xf11eb5, _0x5dda51 = Math[_0x2f531b(0x460)](0x1, Number(_0x4295e2[_0x2f531b(0x81c)]?.['perChatContextLines'] ?? 0x64)), _0x57a616 = _0x4295e2[_0x2f531b(0x7af)]['filter'](_0x436249 => _0x436249[_0x2f531b(0x5c9)][_0x2f531b(0x2b7)](_0x271eb8)), _0x3af089 = _0x57a616[_0x2f531b(0x959)](_0x1fe3e0 => { const _0x6f7a6 = _0x2f531b, _0x1267b9 = _0x2df268(_0x1fe3e0['id']), _0x48ed61 = _0x1267b9['length'] > 0x0 ? _0x1267b9[_0x1267b9[_0x6f7a6(0xa1e)] - 0x1] : null; return { 'chat': _0x1fe3e0, 'history': _0x1267b9, 'lastTimestamp': _0x48ed61 ? _0x48ed61[_0x6f7a6(0x6aa)] : 0x0 }; })['filter'](_0x4f40f0 => _0x4f40f0[_0x2f531b(0x2a9)][_0x2f531b(0xa1e)] > 0x0); _0x3af089[_0x2f531b(0x96f)]((_0x4972e4, _0x240b3d) => _0x240b3d[_0x2f531b(0x825)] - _0x4972e4[_0x2f531b(0x825)]); const _0x5a6f8b = [], _0x243fb8 = {}; return _0x3af089[_0x2f531b(0xaa9)]((_0x502bfd, _0x48ab0f) => { const _0x1c94af = _0x2f531b, _0x171cb7 = _0xc216fb(_0x502bfd[_0x1c94af(0x19a)], _0x502bfd[_0x1c94af(0x2a9)], _0x5dda51); if (_0x171cb7[_0x1c94af(0xa1e)] === 0x0) return; const _0x3277e4 = _0x48ab0f === 0x0 ? _0x1c94af(0x4e2) : _0x1c94af(0x184); _0x5a6f8b[_0x1c94af(0x230)]('##\x20' + _0x3277e4 + _0x46d42b(_0x502bfd[_0x1c94af(0x19a)]) + '\x0a' + _0x171cb7[_0x1c94af(0x247)]('\x0a')), _0x243fb8[_0x502bfd[_0x1c94af(0x19a)]['id']] = _0x171cb7[_0x1c94af(0xa1e)]; }), { 'omniText': _0x5a6f8b['join']('\x0a\x0a'), 'usedCounts': _0x243fb8 }; } function _0x53390d(_0x3bde26) { const _0x546b2c = _0xf11eb5; let _0x5cc597 = null; const _0x1d4140 = _0x4295e2[_0x546b2c(0x7af)]['filter'](_0x308ce1 => _0x308ce1[_0x546b2c(0x5c9)]['includes'](_0x3bde26)); for (const _0x5488e8 of _0x1d4140) { const _0x4a3b98 = _0x2df268(_0x5488e8['id']); if (_0x4a3b98 && _0x4a3b98[_0x546b2c(0xa1e)] > 0x0) { const _0x1415c1 = _0x4a3b98[_0x4a3b98[_0x546b2c(0xa1e)] - 0x1]; if (!_0x5cc597 || _0x1415c1[_0x546b2c(0x6aa)] > _0x5cc597[_0x546b2c(0x6aa)]) { if (_0x546b2c(0x1d2) === 'RPiBF') { const _0x1e0084 = _0x32abfb(_0x4e4d1a['id']), _0x28b424 = _0x1e0084[_0x546b2c(0xa1e)] > 0x0 ? _0x1e0084[_0x1e0084[_0x546b2c(0xa1e)] - 0x1] : null; return { 'chat': _0x223dc6, 'history': _0x1e0084, 'lastTimestamp': _0x28b424 ? _0x28b424[_0x546b2c(0x6aa)] : 0x0 }; } else _0x5cc597 = _0x1415c1; } } } return _0x5cc597; } function _0x565a2f(_0x51b976) { const _0x19c969 = _0xf11eb5; if (!_0x51b976 || !_0x51b976[_0x19c969(0x2b7)](',')) return _0x51b976; const _0x15e3c9 = _0x51b976[_0x19c969(0x692)](',')['map'](_0x56ce52 => _0x56ce52['trim']()); return _0x15e3c9[Math[_0x19c969(0x29c)](Math[_0x19c969(0x6cc)]() * _0x15e3c9[_0x19c969(0xa1e)])]; } function _0x4fac8b(_0x3553ab) { return new Promise(_0x4ebfe0 => { const _0x4196d7 = _0x585d; if (_0x4196d7(0x1c7) !== 'qRIci') { const _0x3538af = document[_0x4196d7(0x61b)](_0x4196d7(0x752)), _0x463849 = document[_0x4196d7(0x61b)](_0x4196d7(0x3d7)), _0x372cfc = document['getElementById']('modal-ok'), _0x1a349f = document[_0x4196d7(0x61b)]('modal-cancel'), _0x47e274 = document[_0x4196d7(0x61b)]('modal-mask'); _0x463849[_0x4196d7(0x6c7)] = _0x3553ab, _0x3538af[_0x4196d7(0x7c9)][_0x4196d7(0x458)] = _0x4196d7(0x58f); const _0xd37bb2 = _0x358e59 => { const _0x452993 = _0x4196d7; _0x452993(0x680) === 'yavVg' ? _0x26111c(_0x408d01[_0x452993(0xb8c)])[_0x452993(0xb30)](_0x2050f3 => { const _0x33cd9a = _0x452993, _0x420665 = _0xaba741['getElementById'](_0x23f3dc); if (_0x420665 && _0x2050f3) _0x420665[_0x33cd9a(0x1b2)] = _0x56cff1[_0x33cd9a(0xa4f)](_0x2050f3); }) : (_0x3538af[_0x452993(0x7c9)]['display'] = _0x452993(0x678), _0x372cfc['onclick'] = _0x1a349f[_0x452993(0x81f)] = _0x47e274[_0x452993(0x81f)] = null, document['removeEventListener']('keydown', _0x16fbc3), _0x4ebfe0(_0x358e59)); }, _0x16fbc3 = _0x4c77c0 => { const _0x1e7073 = _0x4196d7; if (_0x4c77c0['key'] === _0x1e7073(0x38f)) _0xd37bb2(![]); if (_0x4c77c0[_0x1e7073(0x807)] === 'Enter') _0xd37bb2(!![]); }; _0x372cfc[_0x4196d7(0x81f)] = () => _0xd37bb2(!![]), _0x1a349f[_0x4196d7(0x81f)] = () => _0xd37bb2(![]), _0x47e274[_0x4196d7(0x81f)] = () => _0xd37bb2(![]), document[_0x4196d7(0x46a)]('keydown', _0x16fbc3); } else { const _0x1796ea = _0x3411db['currentDate'][_0x4196d7(0x874)](), _0x1d8459 = _0x28581d[_0x4196d7(0xaf0)][_0x4196d7(0x4ef)](); _0x43d43a['getElementById'](_0x4196d7(0x5df))[_0x4196d7(0x6c7)] = _0x1796ea + '年\x20' + (_0x1d8459 + 0x1) + '月', _0x5161ea(_0x1796ea, _0x1d8459), _0x513c69(_0x5be3fc[_0x4196d7(0x679)]); } }); } function _0x925876(_0x4d10e3) { const _0x19cd5a = _0xf11eb5, _0x3452ac = document[_0x19cd5a(0x61b)](_0x19cd5a(0x64b)); _0x3452ac[_0x19cd5a(0x6c7)] = _0x4d10e3, _0x3452ac[_0x19cd5a(0x7c9)]['display'] = 'block'; if (_0x925876['_t']) clearTimeout(_0x925876['_t']); _0x925876['_t'] = setTimeout(() => { const _0x5c6114 = _0x19cd5a; _0x5c6114(0x94c) !== 'KBmnJ' ? _0x276f4f[_0x5c6114(0x61b)](_0x5c6114(0x6cf))[_0x5c6114(0x7c9)][_0x5c6114(0xb7e)]('--feed-bg-image', _0x5c6114(0x83d) + _0x4d61c0 + ')') : _0x3452ac['style'][_0x5c6114(0x458)] = _0x5c6114(0x678); }, 0x640); } function _0x301db5() { const _0x100ec2 = _0xf11eb5, _0xd47055 = document[_0x100ec2(0x61b)](_0x100ec2(0x7c8)), _0x1f5817 = document[_0x100ec2(0x61b)](_0x100ec2(0xa84)), _0x31282a = document[_0x100ec2(0x4f8)](_0x100ec2(0x58a)), _0x273a47 = document[_0x100ec2(0x61b)]('home-dock'); let _0x366789 = 0x0; _0x1f5817['style'][_0x100ec2(0x46c)] = _0x100ec2(0x23a); const _0x12fcf6 = 0x3; function _0x5bcdad(_0x3fbf43) { const _0x2883e9 = _0x100ec2; if (_0x2883e9(0x733) === _0x2883e9(0x733)) { if (_0x3fbf43 < 0x0 || _0x3fbf43 >= _0x12fcf6) return; _0x1f5817[_0x2883e9(0x7c9)][_0x2883e9(0x827)] = _0x2883e9(0x219) + _0x3fbf43 * (0x64 / _0x12fcf6) + '%)', _0x31282a[_0x2883e9(0xaa9)](_0x4d62d0 => _0x4d62d0[_0x2883e9(0x1f5)][_0x2883e9(0x194)](_0x2883e9(0x45a))), _0x31282a[_0x3fbf43]['classList'][_0x2883e9(0xaf2)](_0x2883e9(0x45a)), _0x366789 = _0x3fbf43, _0x3fbf43 === 0x0 ? _0x273a47['style'][_0x2883e9(0x458)] = 'none' : _0x273a47[_0x2883e9(0x7c9)][_0x2883e9(0x458)] = _0x2883e9(0x58f); } else _0x3c0c54[_0x2883e9(0x214)](_0x2883e9(0x8dd), _0x36bf04), _0xa0d95a[_0x2883e9(0x21f)] = _0x2883e9(0x808) + _0x1c31d1['message']; } _0x5bcdad(0x0), _0x31282a[_0x100ec2(0xaa9)](_0xa624 => { const _0x35c2f0 = _0x100ec2; _0xa624[_0x35c2f0(0x46a)](_0x35c2f0(0x3cd), () => { const _0x5b3b0a = _0x35c2f0, _0x1920e8 = parseInt(_0xa624[_0x5b3b0a(0x6c3)][_0x5b3b0a(0x280)], 0xa); _0x5bcdad(_0x1920e8); }); }); let _0x41f67b = 0x0, _0x4f0c72 = 0x0, _0x56b316 = 0x0, _0xfc3d23 = ![], _0xade152 = ''; _0xd47055[_0x100ec2(0x46a)](_0x100ec2(0x229), _0x1f65ba => { const _0x468c3a = _0x100ec2; _0x41f67b = _0x1f65ba[_0x468c3a(0x5e5)][0x0][_0x468c3a(0x60f)], _0x4f0c72 = _0x1f65ba[_0x468c3a(0x5e5)][0x0][_0x468c3a(0x41f)], _0xfc3d23 = !![], _0xade152 = ''; }, { 'passive': !![] }), _0xd47055[_0x100ec2(0x46a)](_0x100ec2(0x7c3), _0x387d1d => { const _0x382dd3 = _0x100ec2; if (_0x382dd3(0x3c6) === 'NVpiQ') _0x2533ba = _0x33aff1[_0x382dd3(0x38d)] || ''; else { if (!_0xfc3d23) return; if (_0xade152 === '') { if ('yvALM' !== 'vmcTU') { const _0x5809a2 = _0x387d1d['touches'][0x0][_0x382dd3(0x60f)] - _0x41f67b, _0x1b381d = _0x387d1d['touches'][0x0][_0x382dd3(0x41f)] - _0x4f0c72; Math[_0x382dd3(0x62a)](_0x5809a2) > Math[_0x382dd3(0x62a)](_0x1b381d) ? _0xade152 = _0x382dd3(0x6df) : _0x382dd3(0x574) === _0x382dd3(0x80c) ? _0x33bf15(_0x5d9bf8) : _0xade152 = _0x382dd3(0x452); } else _0x180d99 = _0x19e2f0[_0x382dd3(0x9dc)]; } if (_0xade152 === _0x382dd3(0x6df)) { if ('yDQpK' === _0x382dd3(0x2f3)) { const _0x4bc41d = _0xfe3483 === _0x468f03 ? _0x382dd3(0x7e1) : ''; return '' + _0x4bc41d + _0xbf6c72['text']; } else _0x387d1d['preventDefault'](); } } }, { 'passive': ![] }), _0xd47055[_0x100ec2(0x46a)](_0x100ec2(0x94e), _0x19712f => { const _0x326593 = _0x100ec2; if ('ALdvC' !== _0x326593(0xab5)) _0x15bc36[_0x326593(0x214)](_0x326593(0x9ef), _0x32ead6); else { if (!_0xfc3d23) return; _0x56b316 = _0x19712f[_0x326593(0xb75)][0x0]['screenX'], _0xade152 === _0x326593(0x6df) && _0x3bcf61(), _0xfc3d23 = ![]; } }); function _0x3bcf61() { const _0x1f0d04 = 0x32; if (_0x56b316 < _0x41f67b - _0x1f0d04) _0x5bcdad(_0x366789 + 0x1); else _0x56b316 > _0x41f67b + _0x1f0d04 && _0x5bcdad(_0x366789 - 0x1); } } function _0x2fffc9() { return new Promise(_0x4e161f => { const _0x188918 = _0x585d; if (_0x188918(0x701) !== _0x188918(0x701)) _0x1643c1 = _0x38e0d0['filter'](_0x234cef => _0x234cef && typeof _0x234cef === _0x188918(0x9f4) && typeof _0x234cef[_0x188918(0x55e)] === _0x188918(0x3f4) && typeof _0x234cef[_0x188918(0x8f0)] !== 'undefined'); else { const _0x309ed7 = document[_0x188918(0x61b)]('music-input-modal'), _0xccbfe8 = document[_0x188918(0x61b)](_0x188918(0x250)), _0x5f1248 = document[_0x188918(0x61b)](_0x188918(0x77e)), _0x92839e = document['getElementById'](_0x188918(0x42a)), _0x160b88 = document[_0x188918(0x61b)](_0x188918(0x18b)), _0x5bbce0 = document['getElementById'](_0x188918(0x7d3)); _0xccbfe8[_0x188918(0x21f)] = '', _0x5f1248['value'] = '', _0x309ed7['classList']['add'](_0x188918(0xa03)), _0xccbfe8[_0x188918(0x5a1)](); const _0x2a872a = _0x3d7c8e => { const _0x2eb383 = _0x188918; _0x309ed7[_0x2eb383(0x1f5)][_0x2eb383(0x194)](_0x2eb383(0xa03)), _0x92839e['onclick'] = null, _0x160b88['onclick'] = null, _0x5bbce0[_0x2eb383(0x81f)] = null, document[_0x2eb383(0x33b)](_0x2eb383(0xb2b), _0x1300c6), _0x4e161f(_0x3d7c8e); }, _0x367d03 = () => { const _0x1560d9 = _0x188918, _0x5a1d75 = _0xccbfe8[_0x1560d9(0x21f)][_0x1560d9(0x2c7)](), _0x10cd56 = _0x5f1248['value'][_0x1560d9(0x2c7)](); if (!_0x5a1d75 || !_0x10cd56) { _0x925876(_0x1560d9(0x954)); return; } _0x2a872a({ 'songName': _0x5a1d75, 'artist': _0x10cd56 }); }, _0x1300c6 = _0x380497 => { const _0x38fc63 = _0x188918; if (_0x38fc63(0x935) === 'SLzWG') { const _0x40c481 = _0x22524a(_0x4e7da2['activeMeetingCharId']); _0x40c481 && (delete _0x40c481[_0x38fc63(0x384)], _0x4f1ad0(), _0x308e40(_0x40c481['id'], 'normal'), _0xaca377(_0x38fc63(0x2b9)), _0x53f9ae(!![])); } else { if (_0x380497[_0x38fc63(0x807)] === _0x38fc63(0x38f)) _0x2a872a(null); if (_0x380497[_0x38fc63(0x807)] === _0x38fc63(0x7d7)) { if (_0x38fc63(0xb6d) !== _0x38fc63(0xb6d)) { if (_0x29111a['role'] === 'user') return _0x130bb6[_0x38fc63(0x5f2)]?.['name'] || _0x38fc63(0x5ef); if (_0x28f4be['type'] === _0x38fc63(0x519)) { const _0x1465b7 = _0x4319fd['senderId'] ? _0x2e51ea(_0x528f87[_0x38fc63(0x428)]) : null; return _0x1465b7?.[_0x38fc63(0x9dc)] || _0x38fc63(0x2c8); } else { const _0x2c392c = _0x36ce61(_0x37f2bb['participantIds'][0x0]); return _0x2c392c?.[_0x38fc63(0x9dc)] || 'AI'; } } else _0x380497[_0x38fc63(0x3a7)](), _0x367d03(); } } }; _0x92839e[_0x188918(0x81f)] = _0x367d03, _0x160b88[_0x188918(0x81f)] = () => _0x2a872a(null), _0x5bbce0['onclick'] = () => _0x2a872a(null), document['addEventListener'](_0x188918(0xb2b), _0x1300c6); } }); } function _0x736f9c(_0x557032) { const _0x2bb91f = _0xf11eb5; if (!_0x557032) return []; const _0x6582b6 = _0x557032[_0x2bb91f(0x2c7)](); if (_0x6582b6[_0x2bb91f(0x772)]('<div') && _0x6582b6[_0x2bb91f(0x3f9)](_0x2bb91f(0x300))) return [_0x6582b6]; const _0x18c7f8 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x570305 = '|||CMD|||', _0x2668f5 = [], _0x57ddf1 = _0x557032['replace'](_0x18c7f8, _0x4a92ff => { const _0x311353 = _0x2bb91f; return _0x2668f5[_0x311353(0x230)](_0x4a92ff), _0x570305; }), _0x31cee5 = _0x57ddf1[_0x2bb91f(0x692)](_0x570305), _0xa2d1a = []; let _0x1d3937 = 0x0; return _0x31cee5[_0x2bb91f(0xaa9)]((_0x23867a, _0x8617bc) => { const _0xab99ba = _0x2bb91f, _0x4be343 = _0x23867a[_0xab99ba(0x2c7)](); _0x4be343 && _0xa2d1a['push'](..._0x1e9ce2(_0x4be343)), _0x1d3937 < _0x2668f5[_0xab99ba(0xa1e)] && (_0xa2d1a[_0xab99ba(0x230)](_0x2668f5[_0x1d3937][_0xab99ba(0x2c7)]()), _0x1d3937++); }), _0xa2d1a; } function _0x4c219a(_0x54cdfa, _0x5a81d8, _0x1db9aa = '') { const _0x52ae25 = _0xf11eb5, _0x5a9939 = document[_0x52ae25(0x6a8)](_0x52ae25(0xa9f)); _0x5a9939[_0x52ae25(0x6e1)] = _0x52ae25(0xb7b) + _0x1db9aa; const _0x1e185d = document[_0x52ae25(0x6a8)]('img'); _0x1e185d[_0x52ae25(0x1b2)] = _0x54cdfa, _0x1e185d[_0x52ae25(0x6e1)] = _0x52ae25(0x1c4); const _0x62aaf7 = document['createElement'](_0x52ae25(0xa9f)); return _0x62aaf7[_0x52ae25(0x6e1)] = _0x52ae25(0x7c6), _0x5a81d8 && (_0x62aaf7[_0x52ae25(0x7c9)][_0x52ae25(0x54b)] = _0x52ae25(0x3bd) + _0x5a81d8 + '\x27)'), _0x5a9939['appendChild'](_0x1e185d), _0x5a9939['appendChild'](_0x62aaf7), _0x5a9939; } function _0x261bfb(_0x57c787) { const _0x739389 = _0xf11eb5; if (!_0x57c787) return []; let _0x44bdfd = String(_0x57c787)[_0x739389(0x2c7)](); const _0x27a394 = _0x44bdfd['match'](/```(?:json)?([\s\S]*?)```/i); if (_0x27a394) _0x44bdfd = _0x27a394[0x1]['trim'](); try { const _0x588e4b = JSON['parse'](_0x44bdfd); if (_0x588e4b && Array['isArray'](_0x588e4b[_0x739389(0x8b5)])) { if (_0x739389(0xae0) !== 'dTMec') return _0x588e4b['reply']['map'](_0x274c1e => typeof _0x274c1e === 'string' ? _0x274c1e : _0x274c1e?.[_0x739389(0x8f0)])['filter'](Boolean)[_0x739389(0x380)](_0x1e9ce2); else _0x41f430 = { 'speaker': _0x1859b6[_0x739389(0x9dc)], 'line': _0x1f7c13[_0x739389(0x8f0)], 'emotion': _0x739389(0x8a7) }; } const _0x3d8643 = ['response', 'dialogue', _0x739389(0x1c9), 'text', _0x739389(0x8f0), _0x739389(0x8af), _0x739389(0x588)]; if (_0x588e4b && typeof _0x588e4b === 'object') { const _0x274c84 = []; for (const _0x709124 of Object[_0x739389(0x974)](_0x588e4b)) { if (_0x739389(0x1a2) === _0x739389(0x88c)) { const _0x545101 = _0x27099b(_0x225cc0[_0x739389(0x6c3)]['historyIndex'], 0xa); !_0x72845e(_0x545101) && _0x1325a1(_0x545101); } else { const _0xa090b0 = _0x709124['toLowerCase'](); if (_0x3d8643[_0x739389(0x3bb)](_0x5b39c6 => _0xa090b0[_0x739389(0x772)](_0x5b39c6))) { const _0x124f1a = _0x588e4b[_0x709124]; if (typeof _0x124f1a === _0x739389(0x3f4)) _0x274c84[_0x739389(0x230)](_0x124f1a); if (Array['isArray'](_0x124f1a)) _0x124f1a[_0x739389(0xaa9)](_0x101f2d => { const _0x1320b1 = _0x739389; if (typeof _0x101f2d === _0x1320b1(0x3f4)) _0x274c84[_0x1320b1(0x230)](_0x101f2d); }); } } } if (_0x274c84[_0x739389(0xa1e)]) return _0x274c84['flatMap'](_0x1e9ce2)[_0x739389(0xae6)](0x0, 0x9); } } catch { } if (/[{\[]/['test'](_0x44bdfd) && /":/[_0x739389(0x456)](_0x44bdfd)) { if (_0x739389(0x2fa) !== _0x739389(0x6d9)) { const _0x48822b = [], _0x54037f = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x1c9821; while ((_0x1c9821 = _0x54037f[_0x739389(0x474)](_0x44bdfd)) !== null) { const _0x259053 = _0x1c9821[0x1][_0x739389(0x1dc)](/\\"/g, '\x22')[_0x739389(0x1dc)](/\\n/g, '\x0a')[_0x739389(0x2c7)](); if (_0x259053) _0x48822b[_0x739389(0x230)](_0x259053); } if (_0x48822b[_0x739389(0xa1e)]) return _0x48822b['flatMap'](_0x1e9ce2)['slice'](0x0, 0x9); } else { const _0x3e1402 = _0x2991b9[_0x739389(0x80d)]('images', 'readwrite'), _0x34c4b5 = _0x3e1402['objectStore']('images'), _0x2105b1 = _0x34c4b5[_0x739389(0x573)]({ 'id': _0x334330, 'blob': _0x22356b }); _0x2105b1['onsuccess'] = () => _0x51b9e2(_0x2105b1[_0x739389(0x979)]), _0x2105b1[_0x739389(0x6f9)] = () => _0x1b2b0f(_0x2105b1[_0x739389(0x214)]); } } return _0x1e9ce2(_0x44bdfd); } function _0x1e9ce2(_0x2e8a91) { const _0x7ece32 = _0xf11eb5; if (!_0x2e8a91) return []; const _0xa38906 = String(_0x2e8a91)[_0x7ece32(0x2c7)](), _0x7e8063 = _0xa38906[_0x7ece32(0x692)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x7ece32(0x959)](_0x4c15a7 => _0x4c15a7[_0x7ece32(0x2c7)]())['filter'](Boolean); if (_0x7e8063['length'] > 0x0) return _0x7e8063[_0x7ece32(0xae6)](0x0, 0x9); return [_0xa38906][_0x7ece32(0x695)](Boolean); } const _0x1dfda6 = new Promise((_0x53aa0d, _0x942a13) => { const _0x37a962 = _0xf11eb5, _0x4d1408 = indexedDB[_0x37a962(0x8a6)](_0x4177a9, 0x3); _0x4d1408[_0x37a962(0x6f9)] = () => _0x942a13('IndexedDB\x20failed\x20to\x20open'), _0x4d1408[_0x37a962(0x371)] = () => _0x53aa0d(_0x4d1408[_0x37a962(0x979)]), _0x4d1408[_0x37a962(0x3fb)] = _0xfe8a49 => { const _0x4560e0 = _0x37a962, _0x13fea6 = _0xfe8a49['target'][_0x4560e0(0x979)]; console[_0x4560e0(0x777)](_0x4560e0(0x595) + _0x13fea6[_0x4560e0(0x52a)] + _0x4560e0(0x9ec)), !_0x13fea6[_0x4560e0(0x355)][_0x4560e0(0x5f7)](_0x136f7d) && (console['log'](_0x4560e0(0x638) + _0x136f7d), _0x13fea6['createObjectStore'](_0x136f7d, { 'keyPath': 'id' })), !_0x13fea6[_0x4560e0(0x355)][_0x4560e0(0x5f7)]('music_library') && (console[_0x4560e0(0x777)](_0x4560e0(0x3cc)), _0x13fea6[_0x4560e0(0xafd)](_0x4560e0(0x844), { 'keyPath': 'id' })), !_0x13fea6[_0x4560e0(0x355)]['contains'](_0x4efc38) && (_0x4560e0(0x988) === _0x4560e0(0x988) ? (console[_0x4560e0(0x777)]('Creating\x20object\x20store:\x20' + _0x4efc38), _0x13fea6[_0x4560e0(0xafd)](_0x4efc38, { 'keyPath': 'id' })) : _0x31b11['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x3e7a70 + _0x4560e0(0x24d) + _0x398517[_0x4560e0(0x3a6)] + _0x4560e0(0x714) + _0x5af018['artist'] + _0x4560e0(0x34a)); }; }); function _0x419d() { const _0x100c68 = ['forEach', 'zpDKS', 'XUNmU', '6gdGovL', 'world-book-edit-content', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', 'MdBmD', 'confirm-transfer-button', '\x0a\x0a#\x20今日消费流水\x0a', 'Bearer\x20', 'VOjZi', 'JjiNn', 'ALdvC', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', '动态页背景已更换！', 'readwrite', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'ROWwz', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'dAcTp', 'pfkcW', 'XTjFx', '需要至少2个角色才能创建群聊。', 'items', ']\x20[sticker:', '82609yIGmvP', 'orDkv', '加载角色\x20', '记一笔', 'model-dropdown', '这不是一张有效的Noir角色卡。', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', '清空聊天记录失败。', '超激动我来了', '-\x20你的备忘录里有一条叫“', 'world-book-screen', 'tnGpW', 'values', '分钟前聊过，请注意衔接。', 'posts', 'YmwWp', '\x0a\x0a##\x20世界书条目:\x20', 'restaurant_name', 'YDbpM', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', 'HPIcd', 'cover_placeholder_', 'phone-container', 'images', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'group-bg-input', 'cJwKE', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '回复\x20', 'translateX(-50%)', '加载立绘失败:', '暗夜紫晶', 'slice', 'postContent', '\x20个模型。', '加载更多聊天记录', 'MJnjY', 'cBDYp', 'back-to-snoop-list-from-phone', '正在整理…', 'comments', 'listenTogetherSession', 'currentDate', 'music-feed-container', 'add', 'akXIw', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'no-action-modal', 'xEiGA', 'contact_name', '确定要恢复这个角色的默认立绘位置吗？', 'eibVp', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'image/', 'createObjectStore', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', '刷我的卡', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', '选择聊天', '未知艺术家', ':streamGenerateContent?key=', 'chat-sticker-panel', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', '群聊名称不能为空！', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'add-user-profile-button', 'zjJuP', 'scrollTop', 'FZFPQ', 'IYWoM', 'DKeqb', 'ihVXe', 'noir_migration_fc_v1_complete', 'XzmTT', 'badge-input', 'MWcoe', 'char-edit-bind-user', 'zUsMt', 'vXiGP', '有点生气', 'NqObZ', 'sprite-cancel-button', 'categorizedExpenses', 'AI整理失败了，哼:\x20', 'hRXSE', '距离「', 'XJbnE', 'appIconPosition_app-diary', '189586LQTGVM', '\x0a\x0a#\x20', '.screen.active', 'xjVxT', 'dLehz', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'event_', 'group-options-cancel', '请输入新的群名称：', 'Fonkp', 'keydown', 'delete-message-button', 'RPqZi', 'findIndex', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'then', 'fRerZ', 'live-preview-style', 'group-clear-history', '[发送了表情]', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', 'is-exiting-right', 'LukPf', 'char_sprite_', 'NRxHP', 'svg', 'qdONX', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'now', '正在检查好友圈数据...', 'snoop-home-clock', 'query', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'IgyHR', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'circle_', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'ALjMa', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'LqOSp', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'app-accounting', 'result_page_content', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', '</span><span\x20class=\x22unit\x22>天</span>', 'parse', 'OhyeQ', 'cancel-transfer-button', 'get', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'pendingPostAttachments', '60%', 'historyIndex', '<br>', 'style-', '”的补充信息\x0a', 'play', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'clock-color-toggle', 'rZKQw', 'last_message_preview', 'back-to-library-from-altar', 'last_edited', 'rXKKQ', '净化好友圈时出错，真是的。', '\x0a##\x20条目:\x20', 'KnKlT', 'lgobS', '.diary-entry', '未知地点', '说了是摆设啦，笨蛋。', 'clear', 'ROTOQ', '最近的足迹', 'contactName', 'gXjAj', 'insertAdjacentHTML', 'snoop-character-list-container', 'persona', 'calendar-grid', 'html-module-container', 'lt-ui-song-artist', 'chat-transfer-button', 'changedTouches', 'BfZoE', 'activeFriendCircleId', 'label', 'url', '正在翻阅所有档案...', 'avatar-wrapper\x20', '】的手机已被重置。', 'KOwOv', 'setProperty', 'uKmDY', '10px\x20auto', '点击选择\x20.mp3\x20或\x20.flac', 'tigup', 'currentlyPlayingIndex', '\x0a##\x20', 'snoopPhone', '生活服务', 'unified-audio-player', 'import-char-input', '15px', 'decorative-badge', 'hQmex', 'coverId', '正在准备音乐数据...', '-\x20[动态]\x20', 'omPQj', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x20之间的私密内容)\x0a', 'edit-current-circle-button', 'href', 'diary-modal-textarea', '设置已保存！', 'snoop-phone-header', 'nktkF', 'customStickers', 'tTbyz', 'adxbf', '星期三', 'edit-clear-history-button', '（对话结束）', 'XcRMr', '我很脆弱', '.typing-indicator', 'back-to-user-list-from-edit', 'char-edit-persona', 'ABnNx', 'GkLVT', 'widget_badge', '来源：', '在准备API数据时，从IndexedDB读取图片失败:', 'pfbGi', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'cBIJC', 'VxXox', 'LHZZg', 'cancel-music-input', 'user-profile-list-container', 'UkiyB', 'DEKRX', 'clockPosition', '内容不能为空！', 'date', 'post_image_migrated_', 'objectStore', 'remove', 'YjALf', 'nuqod', 'iERZO', 'round', 'whispers', 'chat', 'AifhM', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'home', '35%', 'xFOhU', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', '正在为你切换新的歌曲...', 'tgPxJ', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', '刚刚发布了一条动态，内容是：“', '.json', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'quote-preview-sender', 'OJQxB', 'chatHistory_', 'user-profile-edit-title', 'KSqTO', 'Assistant', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'expanded', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'header-actions', '桌面已重置，即将刷新...', 'src', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', '”的笔记，内容是：“', '哼，不好好写清楚花在哪、花了多少，我怎么记？', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'author', 'scale', 'toFixed', 'friendCircleEdit', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', '正在解析角色卡...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', '未知商店', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'block', 'msmsJ', 'numeric', 'avatar', 'stringify', 'chat-view-pane', 'lmlyo', 'UAgON', 'message', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'jkmEh', '加载卡片图片失败', 'decode', 'appendChild', 'CgXpf', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', 'IKZzw', 'sJoDf', 'isFinite', 'JJaIE', '正在构思中，请稍候...', 'lyrics', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', '转给\x20', 'anthropic.com', 'eCXnR', 'replace', 'yfgEY', 'character-item', 'char_offline_bg_', 'sawVc', 'dQeeP', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'fIbii', '-input', 'EpGIw', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'summary', 'avatarFrameUrl', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'preview_', '外卖订单', '无标题笔记', 'EPsTf', 'input[type=\x22checkbox\x22]', 'user-post-avatar', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', '无法从\x20IndexedDB\x20加载聊天图片:', 'gxbBj', '4558692dGAhMJ', 'Trllj', 'classList', 'important-day-item', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'char-edit-avatar-input', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', '.selected-options-text', 'group-settings-name', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'data:', '.choice-modal-backdrop', '加载视奸记忆失败\x20(', '加载聊天失败:\x20', '\x20的旧格式数据翻译。', 'back-to-home-from-meeting-list', '\x20写道:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '医疗健康', 'ladMc', '这个也是摆设，别点了。', 'activeListenSession', 'Jresj', '”聊过天，关于：“', 'jIqFk', 'meetingList', '干劲满满', '-\x20**你最后一次活动是在**:\x20', 'cover', '未命名角色', '原始文本:', 'error', 'nuphR', 'yKYUW', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', '#char-edit-avatar-preview\x20+\x20.avatar-frame', 'translateX(-', 'summarize-backdrop', '.listen-together-song', 'meeting-list-container', 'musicUploadAltar', 'oEBtm', 'value', 'getHours', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', 'user-post-image-button', '#member-select-', '\x0a\x0a#\x20用户资料库\x0a', ']\x20[image]', 'PCatg', 'app-settings', 'card-input', 'touchstart', '购物记录', 'abdoC', 'WpVqK', 'transfer-backdrop', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'DlVWO', 'push', 'center', 'nlHaD', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '新角色\x20', '<div\x20class=\x22post-body\x22>', 'DznHn', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'ktKwv', 'PgbkC', '300%', '我不想工作', 'fZgyR', 'wsukQ', 'true', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'mZhrM', 'Tnkxm', 'add-friend-circle-button', 'user-name', '好的，我记住了这些人设和历史。现在我们开始对话。', '\x0a#\x20你的个性（节选）\x0a', 'join', 'tFNnG', 'sHsdx', 'isqHa', 'back-to-circle-list-from-feed', '好像有动态了...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '编辑条目', '#\x20记录是空的，没什么好总结的。', 'music-input-song', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'Error\x20fetching\x20from\x20', 'all', '\x20记录)\x0a', '#ff8c66', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'chat_group_', 'soPtk', 'charId', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', '很期待', '确定要删除这笔记录吗？', '导出失败了，哼:\x20', 'sticker', '0\x202px\x208px\x20rgba(0,0,0,0.4)', '\x20个成员', 'GhMRH', '在你那乱七八糟的文本里没找到“歌名”！', 'skJvK', '_NoirCard.json', 'angry', '保存失败，你的表情包是不是太多了？', '\x20(当前)', '<span\x20class=\x22', 'gap', 'group-delete', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'FhMnj', 'nNSgF', 'info-file-input', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'WBsPP', 'card-widget', 'fontStyle', 'ovLcV', 'LMBYz', 'lCgKT', '正在迁移旧的动态数据到新的好友圈系统...', '\x22\x20的聊天记录已清空。', '</span>', 'wTjan', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'NoirCustomFont', '点击选择\x20info.txt', 'char-edit-wallpaper-input', 'page', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'rgba(255,255,255,0.2)', 'Quzqr', '<img\x20src=\x22', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', 'add-event-fab', 'music-library-container', 'gkvik', 'NsCBw', '徽章已移除。', 'BzQIB', 'snoop-summary-textarea', '徽章已更换！', 'group-clear-history-button', 'Ppyzd', 'transfer-recipient-group', 'hnDuG', 'uGsCZ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'full', 'imageId', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', 'char-edit-sprite-', '群聊已解散。', '#66b3ff', 'oPJgy', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'floor', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', '下载并转换网络封面失败:', '\x0a#\x20关于你\x20(', 'cCswz', '我是垃圾', '”，在那里“', 'meeting-list-screen', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'main', '角色已保存！', '8px', '.todo-item,\x20.important-day-item', 'history', 'User\x20cancelled', 'friend-circle-edit-name', 'isGenerating', 'VCxgv', '.ttf', '勉强但是好吧', 'groupSettings', '\x0a\x20\x20\x20\x20姓名:\x20', 'member-selection-item', '</div>\x0a\x20\x20\x20\x20', 'kiiRv', 'CediH', 'VEhjk', 'includes', '加载\x20', '已恢复默认。', '#diary-action-reroll', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'xYrHH', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', '找不到角色。', 'bJvYF', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'rypuq', '买新衣服', 'EymVp', 'aVcsy', 'MmMqi', 'trim', 'Unknown', '生成日记失败:\x20', 'char_wallpaper_', 'zrjdk', 'henOp', '{charName}', 'character-list', 'insertBefore', '1em', '和其他人的聊天', '字体更换成功！', '无描述', 'sender', '未知角色', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'signal', 'ceTXY', 'aGpvN', '.char-info-wrapper', 'sWNEO', 'music_cover_', 'DcXjm', 'Failed\x20to\x20plan\x20group\x20replies:', 'xeaWR', 'ZoDwg', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'pKARx', 'activeUserProfileId', 'Ezenc', '</span><span\x20class=\x22amount\x22>总计:\x20', 'title', 'OPYsI', 'message-container', 'gCTwI', '<div\x20class=\x22snoop-avatar\x22>', 'reset-card-button-2', 'calendarEvents', 'char-edit-css', 'setAttribute', 'getItem', '日记已删除。', 'DmWOq', 'ZxwtJ', 'GiUgm', 'QjjsH', 'rsnST', 'esSnz', 'data:\x20', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', 'ackWf', 'KfBnU', 'BxpMc', 'Vfxbf', 'message-bubble-row', 'backgroundSize', '</div>', 'is-entering-from-right', 'span', '表情包已保存！正在刷新应用...', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', '#ffcc66', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', '#diary-action-delete', 'shiftKey', 'jkFdL', 'quotedMessage', 'yQceI', 'authorId', '--custom-font-family', '委屈那我歇了', '确定要重新记录吗？当前的账单会被删除。', 'zBQAU', 'HgwEP', 'FrSLG', 'YAML翻译机也无法理解这段梦话。', '今天\x20', 'writeText', 'opacity', 'AbortError', 'back-to-home-from-snoop-list', '&alt=sse', 'Noir_FileSystem', '\x20\x20具体对话如下：\x0a', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'PNbco', '正在打包数据，请稍候...', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'jGdmR', 'lastIndexOf', 'settings-screen', 'currentAbortController', 'DGhrJ', 'userProfileList', 'snoop-app-container', 'ItKlB', 'FMAok', '4611170rIaOMx', 'sin', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', '5px', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', '<span>', '搜索失败:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', 'organize-bill-button', 'concat', 'wants', '\x20时出错，跳过。', '恢复失败了:\x20', 'add-world-book-button', 'app-music-library', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', '\x20转账\x20', 'removeEventListener', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'min', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'wallpaper_main', '快点哄我', 'listen-together-modal', 'BXFjS', 'qSVmP', 'ceil', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', '正在连接同步频道...', '卡片\x202\x20已更换！', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.custom-multiselect\x20.select-box', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'edit-message-modal', 'speaker', '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a', 'calendar-screen', 'cardState', 'BLZfo', '】的旧数据...', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', '兼容模式成功，已将\x20', '咱俩天下第一好', 'objectStoreNames', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '已经生成了今日账单！想看就去“看账本”标签页。', '未知餐厅', 'time', 'themeHue', 'medium', 'translate(-50%,\x20-100%)', 'gvtqd', '.snoop-chat-item', 'snoop-phone-top-nav', '#group-settings-screen\x20.selected-options-text', 'card-widget-2', 'vBCJZ', 'cardState2', 'HyAIN', 'expense-item', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'toggle', 'group-edit-members', 'conversationHistory', 'meeting-scene-view', 'SJIfM', '卡片已移除。', '批量生成动态失败:\x20', 'group-chat-name', 'XxKwO', 'yDpoc', 'onsuccess', 'appState', 'upload-wallpaper-button', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'pkgTc', 'dfYLc', 'reload', 'perChatContextLines', 'apTSD', 'kOntL', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'image', 'JOwga', '确定要清空\x22', '一个人可怜吃饭', 'flatMap', 'zJoOu', 'coverUrl', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'spriteTransform', 'MRwZr', 'uoPIy', 'appIconPosition_', 'PIfJK', 'summary-textarea', '解析音乐文件失败:', 'high', 'position', 'userAvatarFrameUrl', 'flexDirection', 'Escape', 'friend-circle-edit-screen', 'lRRuE', 'CCePa', '用户资料已保存！', 'zELPg', 'confirm-altar-upload-button', '#meeting-view-screen\x20.chat-input-area', 'sticker-content', 'OvLKI', '好委屈但是不能哭', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'back-to-home-from-circle-list', 'post_', '欢迎！请先创建一个角色开始聊天。', 'transparent', 'JgRHv', 'cancel-event-button', 'meeting-message-input', 'friendCircleList', 'msg_', 'OMCWa', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'songName', 'preventDefault', 'AyspS', 'snoop-dock', 'cxefM', 'catch', 'fxPjs', '成功向好友圈\x20\x22', '#diary-action-cancel', '.no-action-modal', 'ECvpR', 'uAfNv', '生成动态失败:', '{userName}', 'wnJyI', 'AWWQi', '\x20的图片失败:', 'music-library-screen', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', 'UBXGM', 'path', 'some', 'qqJzv', 'url(\x27', '我是女仆', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '#f2b7c6', 'customIcon_', '</div></div></div>', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'appIconPosition_app-wallpaper', '动态页背景已移除。', 'gwcjC', 'upload-widget-bg-button', 'revokeObjectURL', 'accountingData', '\x22>\x20', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', 'Creating\x20object\x20store:\x20music_library', 'click', 'SmtfY', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'wkqsj', 'diary-page-', 'SLONs', 'galgame-sprite-container', '错误：找不到这首作为“信物”的歌。', 'stopPropagation', 'char-edit-remark', 'modal-text', 'kERjV', '分钟前', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'IDesP', 'accepted', 'onloadend', '群聊设置已保存！', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'listen-together-backdrop', '群聊「', 'choice-import-character', 'rLzrC', 'lCZlO', '6vDWbKA', '至少要选择一个圈内成员！', 'kyHIx', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', ':</span>\x20', 'NoirCharacterCard', '你还没有写日记。', 'ivTyO', 'model', 'qiVvH', 'add-choice-backdrop', 'wbhAz', 'inline-block', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'modal-cancel', 'string', 'eOhOi', 'character', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'UDpsD', 'endsWith', '正在解析音乐灵魂...', 'onupgradeneeded', 'chat-music-button', '#99ff99', 'iXovN', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'oZyLz', 'listen-together-song-list', '\x22>&times;</button></div>', 'kqSeK', 'back-to-char-select-from-group-create', '已设为当前用户！', 'NnEFs', '群聊音乐搜索失败\x20(', 'YbXBS', 'ACtpe', 'XdiCO', '\x20/\x20', '生成动态回复失败:', 'sprite-slider-scale', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', 'WkUJa', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'choice-cancel', 'ended', 'dkhqX', '(想转账给“', '最近没有互动记录。', 'user-avatar-frame-url-in-chat', 'getReader', 'global-player-next-btn', 'endpoint', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'gallery', '.message.ai', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'img', 'clientY', 'IfCwq', 'forceWhiteClock', '-\x20**你与', 'NBfNQ', 'KNpuT', '确定要删除群聊“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '<div\x20class=\x22loader-spinner\x22></div><span>', 'senderId', 'EFTMJ', 'confirm-music-input', '#snoop-app-view-container\x20.snoop-app-content', 'transfer', 'qPIcE', 'emoji', 'app-snoop', 'snoop-phone-screen', 'votRQ', 'ACaXZ', '正在搬运旧卡片...', 'sTpgL', 'toggle-meeting-view-button', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'add-expense-button', 'chat_image_', 'reset-card-button', 'statusText', 'VGdQH', 'HXOOW', 'DhaND', 'nHskU', 'Ytots', 'FiwvG', 'http://www.w3.org/2000/svg', 'card-image', 'isAnimatingDiary', '正在为你搬运旧壁纸到新仓库...', 'touchcancel', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', '-\x20你点过一份外卖：“', '视奸内容解析失败:', '正在打包“', '未知商品', 'hbHVW', 'save-event-button', 'tAuuf', 'QdLrP', 'htdJc', 'toBlob', 'rawResponse', 'vertical', 'vxLlT', 'NkJtO', '用户分享音乐失败:', 'test', 'AfYkn', 'display', 'app-user-profiles', 'active', '保存角色失败:', '全量导入失败:', 'BWhCY', '群聊\x22', 'characters', 'max', '好友圈\x20', 'KehiZ', 'recipientId', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '[用户发送了表情：', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'plqiC', 'from', 'char_avatar_', 'addEventListener', 'jUsyR', 'width', 'terCi', 'aohfy', '.listen-together-accept-btn', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'yrCIY', 'back-to-home-from-chat', 'linkedWorldBookIds', 'exec', '</p>', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', 'countdown-timer', 'NPKpj', '\x20内容失败:', 'filled', 'back-to-home-from-world-book', '请先在\x22设置\x22中配置你的\x20API\x20信息。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', 'defaultPrevented', 'fill', 'XxrjL', 'OrPBP', 'widget-play-pause-btn', 'apiSettings', '-\x20[', 'Nhvol', 'kZYVt', 'user_', 'description', 'UWJHU', 'create-group-chat-button', '2-digit', 'lkaYN', '\x20\x0a#\x20当前情景\x0a', 'vVciM', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', '请看是我', '星期四', 'tZEei', '\x0a\x0a#\x20关于群聊参与者“', '包含所有图片和音乐的全量数据已成功导出！', 'worldBooks', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'chat-summarize-button', '我正在说话呢，别打岔！', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'column', 'readAsText', 'zMhxF', 'music-widget', '确定要删除这个好友圈吗？此操作不可撤销。', '星期五', 'amount', 'VKIMP', '错误：找不到此好友圈绑定的用户！', '请根据以上所有信息，开始分析并返回JSON。', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'offline-scene-view', 'todo-item-small', 'http', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', '未命名', '&apos;', 'app-diary', '购物消费', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'displayedMessageCount', 'boundUserProfileId', '新建条目', 'wallpaper', '2px\x20dashed\x20var(--border-color)', 'nByfM', '29%', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'TVveu', 'XsZrg', 'AOcaS', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'nxidM', 'font-preview-text', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'userId', 'back-to-home-from-music-library', 'italic', '#FFFFFF', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'OvvSM', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', '-\x20**状态提示**:\x20你已经有\x20', 'atcZE', 'user-send-post-button', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'custom-icon-list-container', 'chatHistory_chat_', 'beforeend', 'BQzCo', 'yoFPJ', 'feed-bg-input', 'footprints', '这本日记本来就是空的，你还想清空什么？', 'vlDBE', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', '\x20|\x20', 'noir-author-mark', 'BqEGF', 'edit-delete-char-button', 'bOExp', '\x22\x20id=\x22', '哼，这不是图片，你想让我压缩什么？', 'remark', '加载见面背景失败\x20for\x20', 'upload-font-button', 'appIconPosition_app-world-book', '\x20-\x20', 'CIaKf', 'area', '来源：[最活跃]', 'isPlaying', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', '[AI向\x20', 'ghQuL', 'char-avatar-frame-url', 'LIADB', 'cINJH', 'accounting-content-area', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'match', 'diary-entry-input', 'getMonth', 'create_event', '\x0a\x0aINPUT:\x0a', 'system', 'custom_font_ttf', 'DchYq', 'qkuuy', '</span>:\x20', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'querySelectorAll', 'bbSZM', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'todo-list', '.listen-together-card', 'uyGxY', 'outerHTML', 'data', '你的任务是【首次生成】这个应用的内容。', ':\x22\x20或\x22[', '59%', 'getMinutes', 'feed-loader', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', '#friend-circle-member-selection\x20input:checked', 'auto', 'speaker-user', 'mkxQe', 'ERnuJ', 'expense-amount', ',\x20resetting.', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'toLocaleTimeString', 'IwkDb', 'edIvC', 'galgame-sprite-adjust-ui', 'reset-badge-button', '小组件背景已更换！', '未知歌曲', 'galgame-sprite-controls', 'TA正在提笔写日记...', 'group', '[DONE]', 'post_user_', 'juCNk', 'FkCip', '错误：找不到签署契约的地方。', 'hkCtf', 'events', '缓存命中:\x20', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', '#c299ff', 'clKqg', 'skvDK', 'CMoVN', '-\x20你最近去过：“', 'memberCharacterIds', 'YtdTF', 'version', 'pop', 'cypQo', '\x20说：“', 'custom-stickers-input', '点击选择\x20.jpg\x20或\x20.png', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', '无语但是随便吧', '<p\x20class=\x22music-post-thought\x22>', 'siXTw', 'lbhCX', '10005976ziEEzH', 'noir_data_migration_v1_complete', 'jOzWb', '成功净化并迁移了\x20', 'widget_card_2', 'accounting-title', 'ZoPFZ', 'p[data-history-index]', 'QizQH', 'message-anchor', 'IWEVy', 'XyWKk', 'review', 'shift', '\x20到\x20', '&quot;', '<div', 'mousedown', 'QVLjU', 'wzqyE', 'diary-write-button', 'currentTime', 'backgroundImage', '获取模型失败:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'jshsW', 'mfiSK', '\x20[并附上了一张图片]', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'back-to-diary-list', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'UwFBH', 'gSpxH', 'add-event-modal', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'dPzym', '你好，世界\x20(Hello,\x20World)', 'scBue', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'bNDxX', 'JSON解析失败\x20(', 'role', '请输入有效的转账金额！', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', '确定要删除这篇日记吗？此操作不可撤销。', 'quoted-sender', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'wMUTz', 'oNpCd', '请先输入\x20API\x20接口地址和密钥。', 'show-chat-view', 'UJhEa', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', '上传失败了，笨蛋！\x20', '聊天档案柜是空的，无需净化。', 'happy', '--primary-lightness', 'abort', 'UuNUI', 'kzrND', '事情好多', 'qeKbY', 'put', 'wyhmP', 'bHHLf', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', 'bqZSW', '\x0a-\x20**当前时间**:\x20', '\x20条新动态。', 'DzvHF', 'diaryList', 'bites', 'gDQdg', 'chat-messages', '71%', 'fetch-models-button', 'LBwxo', '创建新角色', 'Mkclo', 'DQXKQ', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '新建好友圈', 'utterance', '新用户\x20', '.page-dot', 'reset-desktop-button', '-\x20**状态提示**:\x20你上一次活动是在', 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg', 'tGxQh', 'flex', 'oncomplete', 'char_', '[AI发送了表情：', 'scrollIntoView', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'Upgrading\x20database\x20to\x20version\x20', 'TThQX', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'settings', 'qGpRL', '.app-icon-img', 'userProfiles', 'reset-widget-bg-button', 'Claude\x20API\x20错误:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '生成动态时发生错误:\x20', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'focus', 'SwslY', 'XayYh', '浏览器', 'zh-CN', '大家好像不知道该怎么回复...', 'user-profile-screen', '图片加载失败', 'onload', '\x22\x20class=\x22post-image\x22></div>', 'export-all-data-button', 'wuopS', 'ssBmU', 'IeumZ', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'isOffline', 'message-action-modal', 'cancel-edit-button', 'alignItems', 'Zipup', 'song_', 'zirtm', 'Uebty', 'store_name', 'bxeBh', 'wChHN', '啥意思捏', 'EYrJu', 'NXHCb', 'zHzup', 'activeDiaryCharacterId', 'RfvxO', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'QBTCp', 'Vrccq', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', 'listen-together-invite', '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a', 'participantIds', 'gemini', '未命名群聊', 'utqqp', '-\x20你记得曾和“', 'padding', 'XRLWC', 'vPoZP', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'newAvatar', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'sprites', 'left', 'snoop-app-icon', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', '#a7c7e7', 'nrxLP', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', '真是的，必需的祭品都还没准备好！', 'OoHxw', '加载壁纸失败:', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'calendar-header-title', 'dRbfj', 'jbSGV', 'authorType', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'touches', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'Utoab', 'widget-artist', 'JMdlj', '对方正在输入...', 'meeting-main-content', 'margin', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', '#\x20总结失败了，可能是记录太长或太复杂。', 'User', 'YDPNT', '2023-06-01', 'userProfile', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', '\x0a-\x20**对话状态**:\x20群里已经有', '#a4c2f4', 'IuQEk', 'contains', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'GcgUX', 'total_cost', '</span></div>', 'WDplK', 'short', 'UzWlN', 'JSON\x20解析失败!\x20错误原因:', 'SOLKZ', 'input', 'dVVky', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', ')，启动兼容模式...', 'groupChatCreate', 'uzvQy', 'back-to-chat-from-group-settings', '--feed-bg-image', '--widget-cover-image', 'vsCmV', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', 'music-upload-altar-screen', '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'clientX', 'user-post-image-input', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'hhEId', 'api-key', 'api-model', 'daily-expenses-list', 'edit-message-button', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'TqiRi', 'item_name', 'getElementById', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', 'copy-summary-button', 'dAEQo', 'api-provider', '[AI分享了音乐：', 'snoopList', 'user-post-music-button', 'audio', '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a', 'countdown-title', '哼，你这字体文件有问题，用不了。', 'BDMGj', 'save-world-book-button', 'abs', '的个人专属世界观设定\x0a', 'XsiTD', '\x20(ID:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '乐于助人的助手', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'change', 'themeLightness', 'sprite-resize-handle', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'day-number', 'sticker-item', 'post_image_', 'Creating\x20object\x20store:\x20', 'chat-message-input', 'type', 'LTSoL', '星期日', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'activeMeetingScriptQueue', 'marginBottom', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'timeupdate', 'paddingBottom', 'aborted', 'app-music', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'gSQkK', 'lt-ui-cover-art', 'OWUNc', 'cWjwR', 'toast', 'rChJB', '已复制到剪贴板！', 'chatWallpaper', 'OcqyG', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', '确定要删除群聊\x22', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'Emgef', 'back-to-circle-list-from-edit', 'button', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', 'DmcBk', 'gQbMH', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', 'thought', 'user-post-textarea', 'diary-page', 'chat_', 'playableUrl', '<div\x20class=\x22post-timestamp\x22>', 'ZFeus', 'world-book-checkboxes-container', 'removeItem', 'KzIRS', 'TqVSv', 'VwSfv', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'anUgv', '正在搜索音乐...', 'TXGzC', '10px\x200', 'indexOf', 'group_bg_', 'widget-next-btn', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'cxvnM', 'vYTRf', 'GqILm', 'cfMma', 'EmOHJ', 'message-image-content', 'loading', 'bubble-', 'snoop-home-time', 'none', 'selectedDate', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', 'parentElement', 'originalExpenses', '当前聊天', 'VumYN', 'music', 'SaMOG', '\x22\x20中发现一张需要净化的图片...', '请在动态或聊天中播放', '暂无音乐', 'snoop-char-name-header', 'home-date', 'UWqHi', 'musicWidgetPosition', 'FAxMg', 'agVJt', '正在翻阅全部历史记录...', 'execCommand', 'exp_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'rjccw', 'body', 'paused', '.slot-filename', 'split', 'badgeState', 'xocYA', 'filter', 'snoop-home-date', 'bubbleCss', 'setDate', 'user-post-attachment-preview', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'save-custom-stickers-button', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', 'eyHDs', 'XeLbx', 'rAqnb', '音乐数据升级完成，迁移了\x20', 'activeCharacterId', '\x0a#\x20交换日记摘要\x20(你和\x20', 'pYjad', 'altar-slot-info', 'select', '在准备动态回复时，读取图片失败:', 'background', 'createElement', 'tab-record-expense', 'timestamp', '20%', 'hVNwg', 'snoop_', 'Cnfnm', 'oGOEh', 'HSjOu', 'aoRzU', 'meeting-send-button', 'xRBSG', '确定要清空群聊\x22', 'kyLsq', 'PZAwf', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', '.load-more-btn', 'theme-hue-slider', 'XoUlN', 'xoZzv', 'today-btn', '我是小丑呜呜', '成功获取\x20', '\x20\x20\x20\x20-\x20', 'getContext', 'ATnWU', 'diary-input-wrapper', 'dataset', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', '我来搞定', 'textContent', 'HhQyd', '-\x20**对话状态提示**:\x20你们已经有\x20', '[表情]', 'scrollHeight', 'random', 'wb_', 'createElementNS', 'music-screen', 'Gemini\x20stream\x20reading\x20aborted.', 'POST', '用户已删除。', '26873955RMzGsX', 'VqvxL', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '编辑好友圈', '无法保存状态，浏览器可能禁用了存储功能。', '薄荷水色', 'SZJoC', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', '切，加载播放器状态的时候出错了。', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'DjKSq', 'WDFxx', 'horizontal', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', 'className', 'charAt', '#app-dock-bottom-left\x20#', 'KEmUm', 'IxjcJ', 'tJMdw', 'target', 'uwOjQ', 'status', 'categorized-expenses-list', 'characterLastScripts', 'FiaAz', 'world-book-list-container', 'group-bg-preview', 'image_url', '（正在构思中...）', 'diaryPressTimer', 'sad', 'AKetb', 'RGkTv', '一拳打爆', '正在生成中，请稍候...', 'character-edit-title', 'init', 'onerror', 'audio-file-input', 'HwVRm', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', ']。严禁使用列表之外的任何表情名。\x0a', 'ezBEj', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'oqaDr', 'mRjOD', '处理\x20', 'lPfjy', 'substring', 'documentElement', 'meetingView', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'right', 'iTmhD', 'EdFUa', 'IUPPY', '\x20账单', 'card-image-2', '.message-container', 'marginTop', 'accounting-screen', 'jwzAg', '近期没有特别安排', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '15%', '确定要删除这个安排吗？此操作不可撤销。', '</span><div><div\x20class=\x22description\x22>', 'assign', 'lQYiH', '---\x20开始AI回复流程\x20---', '音乐搜索失败:\x20', 'NvPKd', 'SnSTA', 'toDataURL', 'dQFDV', 'preview-item', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'WNrob', '”，但没找到人)', 'cdmuv', 'assistant', 'group-avatar-input', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', '字体保存失败了，哼:\x20', 'widget_card', 'audio-player', 'getDate', 'zeCzQ', 'innerHTML', 'oCGZP', 'group-options-modal', '”买过：“', '34%', 'delete-user-profile-button', 'BKfUL', 'musicPlaylist', 'QNTzY', 'indexedDBData', '有点无语', '<div\x20id=\x22snoop-dock\x22></div>', '卡片\x202\x20已移除。', 'wNuwl', 'mouseleave', '星期二', '\x0a-\x20你正在为一个名为“', 'ZzlcL', 'widgetBgImage', 'music-widget-card', 'zizXD', 'user', 'lCDdw', '被你撩到', 'anthropic', '条目名称和内容都不能为空！', 'xNyPM', 'NxhYw', 'wallpaper-input', 'Gfuga', 'dock', 'VHKse', 'galgame-text', 'getSelection', 'VJSJJ', ',\x20ID:\x20', 'NEhfb', 'modal-root', 'toDateString', '保存徽章状态失败', 'AI未能返回有效的JSON数组格式。', '\x0a\x20\x20近期记忆:\x0a', 'head', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', '执行好友圈数据净化...', '\x22\x20src=\x22', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', 'worldBook', '天没动静了。你的角色们应该发起新的问候或话题。', 'ALwkU', 'qfpqo', 'AI返回的不是一个数组。', '8px\x2016px', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'DCZtX', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', '条目已删除。', 'oAzto', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'hYMCL', 'user-avatar-preview', '\x0a\x20\x20\x20\x20人设:\x20', 'querySelector', 'uWXSZ', 'application/json', 'AxMDr', 'rbONb', 'startsWith', 'toLocaleString', 'VkUhk', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'listen-together-card', 'log', '小组件背景已恢复默认。', 'diary-send-button', 'bSysO', 'back-to-char-select-from-edit', 'HjAXC', '保存壁纸失败:', 'music-input-artist', 'dUXBT', 'private', 'postType', 'sSVaV', 'setItem', 'diary-entries-container', '解析AI剧本JSON失败:', 'zcAbX', 'json', '小时前，生成的内容应该符合这段时间的空白。\x0a', 'event-type-todo', 'mcIwZ', 'parts', 'var(--text-color)', 'GTtHY', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'editing-friend-circle-id', 'QXLoZ', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', '100%', 'jMOdR', 'YSPvb', 'char-edit-name', 'char-edit-offline-bg-input', 'AwqAS', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'quote-preview-area', 'txUfF', 'diaryCurrentPage', 'doVBU', 'diary-list-container', 'meeting-char-name-header', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '用户操作中断了\x20AI\x20响应。', '同步已断开。', 'eTKuY', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'qhkKJ', 'lUwMH', '最近没有动态记录。', 'backgroundColor', 'diary-get-reply-button', 'DgYqu', 'glejK', 'cover-file-input', '[sticker:', 'OXOzC', 'height', 'chats', 'toISOString', 'cXcMR', 'ZbOhz', 'tNMQt', 'music-player-bar', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'OoqjH', '净化音乐封面时出错，真是的。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '群名称已更改为\x22', '动态已清空。', 'lazy', 'BIOSe', 'smooth', '<div\x20class=\x22post-likes\x22>', 'wvxaw', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', '\x20天没活动了。你生成的内容必须是全新的、符合这几天空白时间的事件，不能再纠结于几天前的事情。\x0a', '.widget-info\x20>\x20div', 'touchmove', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'HQoNU', 'avatar-frame', 'owsum', 'app-pages-container', 'style', 'input:checked', 'HYsRI', 'https://api.vkeys.cn/v2/music/', 'delete-expense-btn', '.message.user', 'Ocqki', 'borderRadius', 'appIconPosition_app-settings', '导入角色卡失败:', 'music-input-backdrop', 'kqbuV', 'XoAEc', 'wmRac', 'Enter', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'setMonth', 'blob', 'dHogM', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', '[图片]', '该角色', 'sprite-slider-y', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', '>>\x20', 'indexedDBMusicData', 'border', 'PoEgD', '\x20的私聊', 'find', 'UFbjw', 'oHzXv', 'diary-write-modal', 'kMNCD', 'QycsW', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', 'choices', 'expense-description', 'mUPLr', 'friendCircles', '正在解析备份文件...', 'pending-post-image-preview', 'is-exiting-left', '绝对不想', 'visible', 'XVXcR', 'music-library-item', 'syzDv', 'character-settings-button', '\x0a-\x20当前精确时间:\x20', 'app-meeting', 'jVdpn', 'cNYIo', 'readAsDataURL', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'borderBottom', 'diaries', 'friend-circle-list-container', 'RrLKf', 'kind', 'likes', 'IowKP', 'key', '#\x20发生错误：\x0a', '.diary-delete-btn', 'lt-ui-close-btn', 'bxmvT', 'gPjaV', 'transaction', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'default', 'GgZzC', 'PMujW', 'lyric-line-', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', '已自动断开与其他人的听歌同步。', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', '不高兴撒娇', 'badge-image', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情，可以是对昨天事情的回应，但时间点必须是“今天”。\x0a', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'diary-entry\x20', '无法保存聊天记录。', 'preferences', 'diary-prev-button', 'calendar', 'onclick', '\x0a\x20\x20人设:\x20', '别这样嘛我哭哭', 'oDJex', 'galgame', 'home-clock-container', 'lastTimestamp', '歌曲“', 'transform', 'Npbfg', '\x20条动态...', 'ImOJL', '\x22\x20data-id=\x22', 'vjEbY', 'AI似乎没有想出任何新动态。', 'SVcuk', '<span\x20class=\x22description\x22>', 'edPjK', 'mouseup', 'disabled', 'isActive', 'group-settings-screen', 'info', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '浏览器历史', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', '角色“', 'replaceAll', 'Fajui', 'XBTFl', 'url(', '点击选择\x20.lrc', 'wLmGb', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'aBxhY', 'vfBPn', '.music-post-song-card', 'music_library', 'activeChatId', 'viewBox', 'IxVtB', 'googleapis.com', '\x22\x20的聊天记录吗？此操作不可撤销。', 'cMoke', 'back-to-chat-list', '.bubble-', 'uCfSB', 'WjKIx', 'clear-feed-button', 'invXW', 'NYUVI', 'CBYDt', 'hYujy', 'DoiqC', 'AFAcQ', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', '群聊\x20(', 'ROjiz', 'array', 'bZjWp', 'LxETf', 'VCeoG', 'ZEjKS', 'oxLZv', '出去玩', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'add-event-modal-title', 'mUsTb', 'yCEPQ', '编辑角色', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'MqMue', 'firstChild', 'mClMT', 'WdNKJ', 'is-entering-from-left', 'Fetch\x20request\x20was\x20aborted.', 'QBmKi', '\x20添加...', 'vVWcC', 'EAsNc', 'lApAP', '哼，就按你说的办好了。', 'characterName', 'provider', 'getFullYear', 'HtLvS', 'char-edit-wallpaper-preview', '\x0a-\x20**对话状态**:\x20群里在', '\x20\x20-\x20用户ID:\x20', '歌曲ID', 'mfEPr', 'KItZF', 'image/jpeg', 'char_sprite_normal_', 'snoop_cache', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'FCGTG', '\x0a你只扮演【', '---\x20音乐净化仪式完成\x20---', '\x0a\x0a#\x20当前任务指令\x0a', 'NLwEL', 'gKvNM', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', '的日记本', '#\x20任务:\x20生成\x20', 'noir_migration_music_v1_complete', 'XyoXr', '未找到可用模型。', 'hVusm', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', '[发送了图片]', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', ']:\x20', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '”已创建！', '字体应用失败:', 'altar-slot-lyrics', 'localeCompare', 'GWzjI', 'lqXxG', 'hRyQi', 'CtMJI', 'world-book-editor-title', '\x0a\x0a#\x20关于读者“', 'vkMJn', 'bapQb', '哼，正在开始净化你那被污染的聊天记录...', 'sprite-slider-x', 'important', '[用户发起了听歌邀请:\x20', 'FTeOx', 'friend-circle-edit-title', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'uszUe', 'open', 'normal', 'chat-reroll-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'liFMU', '0\x200\x20', 'kYRFP', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', 'chat-image-button', 'line', 'quoted-message-in-bubble', 'ZYtur', 'back-to-home-from-settings', '加载第二个卡片图片失败', '好了，请基于以上所有信息，开始写今天的日记吧。', 'reply', '正在迁移旧的用户数据...', '复制失败了，哼。', 'edit-message-backdrop', 'meeting-view-screen', 'galgame-sprite', '\x20//\x20<--\x20哼，加在这里\x0a', '群聊至少需要2名成员。', 'bVKmP', ']\x20[', 'diary-next-button', 'pVGuM', '\x0a\x0a#\x20关于对话者“', 'setHours', 'test_post_', 'RULhb', 'kQDxS', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', 'YrhMC', '-preview', 'Bbtnp', 'fyyln', 'summarize-modal', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'ISPoL', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '错误:\x20', '找不到要清空的聊天记录。', 'abyss', 'diary-list-screen', '</pre>', 'set-active-user-button', '.remove-attachment-btn', 'QcuZL', 'input[name=\x22event-type\x22]:checked', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'location_name', '.snoop-app-content', 'KOQcY', 'group_avatar_', '总结失败:', 'nEvWo', 'wWmpN', 'is-playing', 'world-book-edit-name', 'XbcJd', 'IFoAY', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'appIconPosition_app-snoop', '<p>格式错误</p>', 'kKBYB', 'veElh', '创建新用户', 'YejhD', 'pointer', '\x0a-\x20人设:\x20', 'uUZiz', 'narrator', '-\x20**当前精确时间**:\x20', 'content', 'cardWidgetState', 'yniDk', 'IDTFP', '小时前），可以简单问候一下对方现在的状态。\x0a', '樱花薄粉', 'text', 'data:image', 'home-screen', 'canplaythrough', 'chat-image-input', '-\x20你拍过一张照片，内容是：“', 'kTeIx', '”吗？此操作不可撤销。', '保存壁纸失败:\x20', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'characterId', 'hmPTj', 'reverse', 'modal-mask', 'accountingLedger', 'emotion', 'aVxYv', '[用户向\x20', '获取AI响应失败:', 'Detected\x20API\x20provider:\x20', 'upload-music-button', 'day-dot', 'generationConfig', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'jbTZg', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'musicLibrary', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'getAll', 'joCgR', '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'CIKok', 'group-avatar-preview', '\x0a##\x20世界书条目:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'KBbAa', 'bomtm', 'jIZyk', 'save-group-settings-button', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'wmpcu', 'woYAy', '好友圈已删除。', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'accounting', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'rgPXW', 'KLIUq', 'event-content-input', '已恢复默认字体。', '\x22\x20已删除。', 'BVdBk', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'chPpz', 'stretch', 'xnTfY', '谁啊我吗', 'lt-ui-song-title', 'friend-circle-title', 'readonly', 'dqiFM', 'message-action-backdrop', 'fmAQz', 'bTrTQ', 'refresh-feed-button', '在“一起听”邀请中，净化封面失败:', 'musicPlayerState', 'generativelace.googleapis.com', 'NXgGk', 'ScrCe', '】的日记本已被清空。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '吃薯条', '.music-post-play-icon,\x20.music-share-play-icon', 'calendar-day', 'pause', 'KVyVu', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'cos', '未知搜索', 'Glxtn', 'eWmUL', 'toLocaleDateString', 'inSUG', 'toLowerCase', 'KBmnJ', 'Azrjk', 'touchend', 'pGuWY', 'openai', '\x0a```', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'udwOh', '歌名和歌手都不能为空！', 'xwpaa', 'padStart', 'BkZKj', '净化完成！总共迁移了\x20', 'map', 'back-to-world-book-list', 'LJOsE', '导出过程中发生严重错误:\x20', '50%', 'apply', 'CViRK', '28%', 'getDay', 'RHjuK', ')，已跳过。这不应该发生，数据库可能已损坏。', 'input_', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', 'zriEb', '\x20张旧图片。', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'KOdYk', 'customWallpaper', 'NoTTh', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '吃你的饭', 'sort', '正在写入新数据...', 'absolute', '错误：找不到角色', 'cCFyn', 'keys', '”。\x0a', '为你骄傲', '\x22\x20class=\x22music-share-cover\x22>', 'xsbHT', 'result', 'qvPbG', 'ZAQZr', '\x0a\x20\x20相关记忆:\x0a', 'closest', '的第一次互动。\x0a', 'PljoU', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'IqdMb', 'oFUpu', '确定要彻底清空【', 'ndCiT', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'FfqiC', 'EnsgY', 'QURts', 'cancel-listen-together', 'ZhZVn', 'OayRd', '\x0a-\x20**日记本的上一笔记录是在**:\x20', 'ffxgl', 'cursor', 'save-friend-circle-button', 'rgba(0,\x200,\x200,\x200.4)', 'cancel-quote-button', 'chat-get-reply-button', 'aoTkr', 'xJjLg', 'musicFeed', '</label>\x0a\x20\x20\x20\x20', '星期六', '壁纸已更换！', 'friend-circle-edit-bind-user', 'AXgxV', 'download', 'laTmO', 'bzqeV', 'splice', 'top', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'long', 'bmeHy', 'OHsWI', 'tab-view-ledger', '请根据以上所有规则，生成\x20', 'reduce', 'pvrib', ';\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'yKBRM', 'char-edit-offline-bg-preview', 'option', 'diary-char-name-header', 'lyrics-file-input', 'tBExK', 'choice-create-group', 'backgroundPosition', '委屈哭', 'azxIJ', 'app-world-book', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'YAdnO', '服务器错误:\x20', 'user-persona', 'clipboard', 'SAJgH', 'back-to-meeting-list', 'customFeedWallpaper', 'isArray', '正在铭刻字体...', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'isFromLibrary', '确定要删除这个条目吗？此操作不可撤销。', 'widget-cover-art', 'MoqiK', 'lRaxj', '交给我吧', 'galgame-textbox-container', 'netease', 'jejcH', '15px\x2020px', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'app-calendar', 'FQPFz', 'FgMIa', 'activeQuote', '今天一笔账都没有，我整理什么？', 'onYSx', 'entries', 'image/png', '测试动态已添加！', 'songId', 'wgshj', 'activity_description', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', '已经删掉了。', '未分类', 'edit-message-textarea', 'read', 'name', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'dAaaA', 'NNKpk', '\x0a\x20\x20\x20\x20<div\x20id=\x22', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'rCpcR', 'JLMhl', 'owUKD', 'XGbYf', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', '#world-book-checkboxes-container\x20input:checked', 'novel', 'reset-widgets-position-button', 'fragments', 'UHRWg', '...', 'meetingViewMode', '/v1/chat/completions', '在准备群聊API数据时，读取图片失败:', 'OpenAI\x20API\x20错误:\x20', 'lt-ui-lyrics-container', '未知用户', '好友圈名称不能为空！', 'object', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', '有点破防', 'gPhag', '-\x20姓名:\x20', 'YpGTw', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '数据导入成功！应用即将刷新...', 'typing-indicator', 'jHYrj', 'ZjOeT', '\x22\x20class=\x22char-name\x22>', 'kRUSd', 'editing-user-id', 'AI返回了无法识别的数据格式。', 'show', 'canvas', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', '7442169TzTdOP', 'VHYKJ', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'eventContent', '休闲娱乐', 'GDcCS', '喝多了', 'font-input', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '-\x20**状态提示**:\x20这是你和', 'category', 'mRpVM', 'uRNRf', 'user-profile-list-screen', '💜\x20', '请输入群聊名称。', 'snoop-copy-summary-btn', 'undefined', '</svg>', '还没有我的回复可以重新生成哦。', 'WkNBA', '保存播放器状态失败，真是没用。', 'user-avatar-input', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'length', 'textShadow', 'checked', '歌曲名称', '好友圈净化完成，正在重新存档...', '无法解析旧的视奸内容来获取时间戳。', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'Hdlxe', 'import-data-input', 'sTuRN', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'ErlOh', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'OLAbi', '生成失败:\x20', '--\x20点击选择\x20--', 'KMEkA', 'number', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', '错误：第一个好友圈\x20\x22', '检测到已保存的字体，正在应用...', 'diary-modal-save', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'DfDik', 'vUWWP', 'is-selected', '导出角色卡失败:', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', 'editing-world-book-id', '#bubble-preview-user', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'TlAgL', 'xwTXJ', 'jyHsE', 'toString', '星期一', 'color', 'hsPrg', '\x20张旧的动态图片。', 'shy', '字体已应用！(Font\x20Applied!)', 'jPCnH', '未知联系人', '保存失败:\x20', 'displayUrl', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'YvlEU', '\x20行格式不对，被我无视了。', 'createObjectURL', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'import-all-data-button', 'delete', 'appIconPosition_app-music-library', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'T00:00:00', '未知表情', 'group-chat-member-list', 'quote-preview-text', '正在升级音乐卡片数据...', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'artist', '名字不能为空！', 'XEvMz', 'tag', '\x20时出错:', ']\x0a\x0a#\x20角色资料库\x0a', 'worldBookEditor', 'eventType', 'form-button\x20load-more-btn', 'localStorageData', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', '正在准备图片数据...', 'chat-screen', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', '--primary-hue', 'group-chat-create-screen', 'activeMeetingCharId', 'mprpZ', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'EMTzH', 'galgame-time', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'group-world-book-checkboxes', '对方正在行动中...', 'children', 'is-visible', 'sOZzw', 'Failed\x20to\x20remove\x20corrupted\x20state\x20from\x20localStorage:', '导入失败了，笨蛋:\x20', 'galgame-speaker', 'sprite-reset-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', '的转账', 'listen-together-ui', 'next-month-btn', '总得说点什么吧？', 'group-settings-bind-user', '#ff9999', 'card-input-2', 'noir-custom-font-style', 'upload-badge-button', 'app-pages-slider', 'pHyKL', 'chat-send-button', '[用户分享了音乐：', 'RbDii', 'app-wallpaper', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', 'warn', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'rBZsi', 'characterEdit', 'HHwju', '你还没保存这个角色呢，导什么导？', 'diary-modal-cancel', 'removeChild', '\x20.app-icon-img', '图片处理失败:\x20', 'OoUUL', 'bottom', 'widget-title', '赞同！渲染效果一级棒！', 'QcuJB', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'snoop-app-view-container', '已选择\x20', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'div', '\x0a\x20\x20\x20\x20-\x20世界书[', 'end', 'uxjiY', 'snoop-log-back-btn', 'world-book-item', 'files', '”已成功导入！', '备忘录', '#bubble-preview-ai']; _0x419d = function () { return _0x100c68; }; return _0x419d(); } async function _0x2b4d72(_0x2c86b9) { const _0xf6882 = await _0x1dfda6; return new Promise((_0xd1bab, _0x4a3129) => { const _0xfd5e42 = _0x585d, _0x3fa688 = _0xf6882['transaction'](_0x136f7d, _0xfd5e42(0x932)), _0x55386c = _0x3fa688[_0xfd5e42(0x193)](_0x136f7d), _0x26efcb = _0x55386c[_0xfd5e42(0xb51)](_0x2c86b9); _0x26efcb[_0xfd5e42(0x371)] = () => _0xd1bab(_0x26efcb[_0xfd5e42(0x979)] ? _0x26efcb[_0xfd5e42(0x979)]['blob'] : null), _0x26efcb[_0xfd5e42(0x6f9)] = () => _0x4a3129(_0x26efcb[_0xfd5e42(0x214)]); }); } async function _0x168090(_0x471905) { const _0x304fea = await _0x1dfda6; return new Promise((_0x3d746b, _0x70714b) => { const _0x5a2a12 = _0x585d, _0x4a7200 = _0x304fea[_0x5a2a12(0x80d)](_0x4efc38, 'readonly'), _0x38ccef = _0x4a7200[_0x5a2a12(0x193)](_0x4efc38), _0x27b81f = _0x38ccef[_0x5a2a12(0xb51)](_0x471905); _0x27b81f['onsuccess'] = () => _0x3d746b(_0x27b81f[_0x5a2a12(0x979)] ? _0x27b81f[_0x5a2a12(0x979)]['data'] : null), _0x27b81f[_0x5a2a12(0x6f9)] = () => _0x70714b(_0x27b81f[_0x5a2a12(0x214)]); }); } async function _0x1aeaf6(_0x111b99, _0x4f3692) { const _0xe4558e = await _0x1dfda6; return new Promise((_0x4ea173, _0x515914) => { const _0x44fa60 = _0x585d, _0x236213 = _0xe4558e[_0x44fa60(0x80d)](_0x4efc38, _0x44fa60(0xab9)), _0x4bfb39 = _0x236213[_0x44fa60(0x193)](_0x4efc38), _0x339f1a = _0x4bfb39[_0x44fa60(0x573)]({ 'id': _0x111b99, 'data': _0x4f3692 }); _0x339f1a[_0x44fa60(0x371)] = () => _0x4ea173(), _0x339f1a[_0x44fa60(0x6f9)] = () => _0x515914(_0x339f1a['error']); }); } async function _0x59c695(_0x19ab79) { const _0x2e8695 = await _0x1dfda6; return new Promise((_0x2ab3bf, _0x4cc99e) => { const _0x261ebf = _0x585d, _0x22f195 = _0x2e8695['transaction'](_0x4efc38, 'readwrite'), _0x3e6540 = _0x22f195[_0x261ebf(0x193)](_0x4efc38), _0x160b11 = _0x3e6540['delete'](_0x19ab79); _0x160b11[_0x261ebf(0x371)] = () => _0x2ab3bf(), _0x160b11[_0x261ebf(0x6f9)] = () => _0x4cc99e(_0x160b11[_0x261ebf(0x214)]); }); } async function _0x190daf(_0x741a3f, _0x197379) { const _0x40cc98 = await _0x1dfda6; return new Promise((_0x344d09, _0xee6d8b) => { const _0x58884e = _0x585d, _0x1ff68d = _0x40cc98[_0x58884e(0x80d)](_0x136f7d, _0x58884e(0xab9)), _0x50cada = _0x1ff68d[_0x58884e(0x193)](_0x136f7d), _0x451160 = _0x50cada[_0x58884e(0x573)]({ 'id': _0x741a3f, 'blob': _0x197379 }); _0x451160['onsuccess'] = () => _0x344d09(_0x451160[_0x58884e(0x979)]), _0x451160['onerror'] = () => _0xee6d8b(_0x451160[_0x58884e(0x214)]); }); } async function _0x5505ca(_0x51aaee) { const _0x148cd7 = await _0x1dfda6; return new Promise((_0x5dc2cd, _0x57c5c2) => { const _0x2ff2d8 = _0x585d; if ('CFUln' === 'cWLMe') _0x2c4d8e(_0x2ff2d8(0xa95) + _0x3e8f57[_0x2ff2d8(0x1c9)]); else { const _0x1755ef = _0x148cd7['transaction'](_0x136f7d, _0x2ff2d8(0xab9)), _0x1e39f8 = _0x1755ef[_0x2ff2d8(0x193)](_0x136f7d), _0x268e5e = _0x1e39f8[_0x2ff2d8(0xa52)](_0x51aaee); _0x268e5e[_0x2ff2d8(0x371)] = () => _0x5dc2cd(), _0x268e5e[_0x2ff2d8(0x6f9)] = () => _0x57c5c2(_0x268e5e[_0x2ff2d8(0x214)]); } }); } function _0x30f5c0(_0x33cd06) { const _0x87dc10 = _0xf11eb5; return fetch(_0x33cd06)[_0x87dc10(0xb30)](_0x4d1824 => _0x4d1824['blob']()); }
  </script>


  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
