<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px 15px;
      /* 左右15px的呼吸空间 */
      overflow-y: auto;
      display: flex;
      flex-direction: column;

    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    .typing-indicator {
      /* ▼▼▼ 核心改造 ▼▼▼ */
      position: absolute;
      /* 别再用什么粘性了，直接给我焊死！*/
      bottom: 115px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 把它从左边顶出去，和头像对齐 */
      /* ▲▲▲ 改造完毕 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */
      margin-left: 50px;
      padding: 8px 12px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.85rem;
      background: var(--card-bg);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      z-index: 5;
      width: fit-content;
      box-shadow: var(--soft-shadow);
      /* 加个阴影，让它浮起来 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 125%;
      height: 125%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>
    const _0x1eaaca = _0x4bce; (function (_0xfc173d, _0x18dd77) { const _0x17f144 = _0x4bce, _0x2d298e = _0xfc173d(); while (!![]) { try { const _0x286c67 = parseInt(_0x17f144(0x776)) / 0x1 * (-parseInt(_0x17f144(0x284)) / 0x2) + parseInt(_0x17f144(0x193)) / 0x3 * (parseInt(_0x17f144(0xaaa)) / 0x4) + -parseInt(_0x17f144(0xac2)) / 0x5 + parseInt(_0x17f144(0x95a)) / 0x6 + -parseInt(_0x17f144(0x561)) / 0x7 * (parseInt(_0x17f144(0x6f7)) / 0x8) + -parseInt(_0x17f144(0x83b)) / 0x9 + parseInt(_0x17f144(0x3ea)) / 0xa; if (_0x286c67 === _0x18dd77) break; else _0x2d298e['push'](_0x2d298e['shift']()); } catch (_0x42bebe) { _0x2d298e['push'](_0x2d298e['shift']()); } } }(_0xf721, 0xebde9)); function _0x3aa513(_0x20fcf2 = new Date()) { const _0x82864d = _0x4bce, _0x8a342a = _0x20fcf2[_0x82864d(0x688)](), _0x53f22f = String(_0x20fcf2['getMonth']() + 0x1)[_0x82864d(0x7d4)](0x2, '0'), _0x3f9019 = String(_0x20fcf2['getDate']())[_0x82864d(0x7d4)](0x2, '0'); return _0x8a342a + '-' + _0x53f22f + '-' + _0x3f9019; } const _0x4591c3 = _0x1eaaca(0xa89), _0x42e918 = _0x1eaaca(0x79c), _0x2c779d = _0x1eaaca(0x2f7), _0x50b670 = document[_0x1eaaca(0x2fa)](_0x1eaaca(0x7be)); _0x50b670['id'] = _0x1eaaca(0x260), document[_0x1eaaca(0x1d4)][_0x1eaaca(0xc15)](_0x50b670); var _0x1d2a6a, _0x3ca067 = null; let _0x5e6fd1 = [], _0x249708 = ![], _0x51c566 = null, _0x4dcc20 = ![], _0x23444e = { 'x': 0x0, 'y': 0x0 }; function _0x3e5497(_0x334ad4) { const _0x509eca = _0x1eaaca; return (_0x1d2a6a?.[_0x509eca(0x1bc)] || [])[_0x509eca(0x2ec)](_0x2b1797 => _0x2b1797['id'] === _0x334ad4); } const _0x31e73f = _0x1eaaca(0x713), _0x43e6b0 = _0x1eaaca(0xa7a), _0x133533 = _0x1eaaca(0x613), _0x151129 = [{ 'name': _0x1eaaca(0x8ad), 'url': _0x1eaaca(0xbe3) }, { 'name': '崩溃', 'url': 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg' }, { 'name': '生病', 'url': _0x1eaaca(0x1e7) }, { 'name': '工作', 'url': _0x1eaaca(0x90c) }, { 'name': _0x1eaaca(0x3c9), 'url': _0x1eaaca(0xaba) }, { 'name': _0x1eaaca(0x640), 'url': _0x1eaaca(0x929) }, { 'name': _0x1eaaca(0x981), 'url': _0x1eaaca(0x341) }, { 'name': '期待', 'url': _0x1eaaca(0x1b9) }, { 'name': '喜欢', 'url': _0x1eaaca(0x706) }, { 'name': _0x1eaaca(0x5ff), 'url': _0x1eaaca(0x591) }, { 'name': _0x1eaaca(0x8f9), 'url': _0x1eaaca(0x43d) }, { 'name': '委屈', 'url': _0x1eaaca(0x537) }, { 'name': '加油', 'url': _0x1eaaca(0x692) }, { 'name': '对的', 'url': _0x1eaaca(0xb30) }, { 'name': '不满', 'url': 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg' }, { 'name': _0x1eaaca(0xa42), 'url': _0x1eaaca(0x81c) }, { 'name': _0x1eaaca(0x6f0), 'url': 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif' }, { 'name': '委屈', 'url': _0x1eaaca(0x32c) }, { 'name': '平静', 'url': _0x1eaaca(0x530) }, { 'name': '咬你', 'url': _0x1eaaca(0x614) }, { 'name': _0x1eaaca(0x362), 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': _0x1eaaca(0x98c) }, { 'name': '摸鱼', 'url': 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg' }, { 'name': _0x1eaaca(0xadd), 'url': _0x1eaaca(0x618) }, { 'name': _0x1eaaca(0xb5f), 'url': _0x1eaaca(0x45a) }, { 'name': _0x1eaaca(0xa64), 'url': 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg' }, { 'name': _0x1eaaca(0x87b), 'url': 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg' }, { 'name': _0x1eaaca(0x407), 'url': 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg' }, { 'name': '啥意思捏', 'url': _0x1eaaca(0x707) }, { 'name': '好委屈但是不能哭', 'url': _0x1eaaca(0x371) }, { 'name': _0x1eaaca(0x3db), 'url': _0x1eaaca(0x36b) }, { 'name': _0x1eaaca(0x3cd), 'url': _0x1eaaca(0x6e8) }, { 'name': _0x1eaaca(0x547), 'url': _0x1eaaca(0x53d) }, { 'name': _0x1eaaca(0x189), 'url': _0x1eaaca(0x48c) }, { 'name': _0x1eaaca(0x8e6), 'url': 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg' }, { 'name': _0x1eaaca(0x821), 'url': _0x1eaaca(0x43a) }, { 'name': '对不起', 'url': 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg' }, { 'name': _0x1eaaca(0x3fb), 'url': 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg' }, { 'name': _0x1eaaca(0x940), 'url': _0x1eaaca(0xc42) }, { 'name': _0x1eaaca(0x289), 'url': _0x1eaaca(0xb2e) }, { 'name': _0x1eaaca(0x4ea), 'url': _0x1eaaca(0x489) }, { 'name': _0x1eaaca(0x5f7), 'url': _0x1eaaca(0x5fe) }, { 'name': _0x1eaaca(0x1c8), 'url': _0x1eaaca(0xa8a) }, { 'name': _0x1eaaca(0x559), 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': _0x1eaaca(0x714), 'url': _0x1eaaca(0xc1a) }, { 'name': _0x1eaaca(0x89e), 'url': _0x1eaaca(0x535) }, { 'name': _0x1eaaca(0xab9), 'url': 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg' }, { 'name': _0x1eaaca(0x41d), 'url': 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg' }, { 'name': _0x1eaaca(0x35e), 'url': _0x1eaaca(0x990) }, { 'name': _0x1eaaca(0xa53), 'url': _0x1eaaca(0x349) }, { 'name': _0x1eaaca(0xc45), 'url': _0x1eaaca(0x7c4) }, { 'name': _0x1eaaca(0xc7e), 'url': _0x1eaaca(0x43e) }, { 'name': _0x1eaaca(0x753), 'url': 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg' }, { 'name': '等你', 'url': _0x1eaaca(0x609) }, { 'name': _0x1eaaca(0x451), 'url': _0x1eaaca(0x213) }, { 'name': _0x1eaaca(0x1ed), 'url': 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg' }, { 'name': '喝酒', 'url': 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg' }, { 'name': _0x1eaaca(0x3c1), 'url': _0x1eaaca(0x540) }, { 'name': '呜呜', 'url': 'https://sharkpan.xyz/f/z1xc5/iore2n.gif' }, { 'name': _0x1eaaca(0x741), 'url': 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg' }, { 'name': _0x1eaaca(0xba6), 'url': _0x1eaaca(0x399) }, { 'name': _0x1eaaca(0x3dd), 'url': _0x1eaaca(0x396) }, { 'name': _0x1eaaca(0x5ba), 'url': 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg' }, { 'name': _0x1eaaca(0x1b4), 'url': _0x1eaaca(0x325) }], _0x175190 = { 'beige': { 'name': _0x1eaaca(0x3b2), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': '薄荷水色', 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x1eaaca(0x74f), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x1eaaca(0x4c3), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x1eaaca(0x672)](_0x1eaaca(0x1d0), () => { const _0x8e5972 = _0x1eaaca, _0x1ce954 = document[_0x8e5972(0x94d)](_0x8e5972(0x4a8)), _0x460006 = document['getElementById'](_0x8e5972(0xc18)), _0x3d6082 = document['getElementById'](_0x8e5972(0x7ee)), _0x1727ae = document[_0x8e5972(0x94d)](_0x8e5972(0x24f)), _0x373530 = document['getElementById'](_0x8e5972(0x5b3)), _0xeaf3b4 = document[_0x8e5972(0x94d)](_0x8e5972(0xb8c)), _0x581f64 = document[_0x8e5972(0x94d)](_0x8e5972(0x364)), _0x587469 = document[_0x8e5972(0x94d)](_0x8e5972(0x2b9)), _0x31bac3 = document[_0x8e5972(0x94d)](_0x8e5972(0xafd)), _0x15405b = document[_0x8e5972(0x94d)](_0x8e5972(0x552)), _0x4eae0e = document[_0x8e5972(0x94d)](_0x8e5972(0x2a5)), _0x3f5e03 = document['getElementById'](_0x8e5972(0x982)), _0x46ee48 = document['getElementById'](_0x8e5972(0x527)), _0x18ef37 = document['getElementById'](_0x8e5972(0x8fc)), _0x470967 = document[_0x8e5972(0x94d)](_0x8e5972(0x660)), _0x284b48 = document[_0x8e5972(0x94d)]('close-summary-button'), _0x429c9d = document[_0x8e5972(0x94d)](_0x8e5972(0x32a)), _0x4428cd = document[_0x8e5972(0x94d)](_0x8e5972(0xc12)), _0x26ef47 = document['getElementById'](_0x8e5972(0x64c)), _0x13122a = document[_0x8e5972(0x94d)](_0x8e5972(0x91e)), _0x44adfd = document[_0x8e5972(0x94d)](_0x8e5972(0x96f)), _0x484d47 = document[_0x8e5972(0x94d)](_0x8e5972(0x9b3)), _0xe4eb5a = document[_0x8e5972(0x94d)](_0x8e5972(0x87d)), _0x57c124 = document[_0x8e5972(0x94d)]('upload-font-button'), _0x2b1b67 = document[_0x8e5972(0x94d)](_0x8e5972(0x671)), _0x4ee84e = document[_0x8e5972(0x94d)](_0x8e5972(0x54d)), _0x2b9fa8 = document[_0x8e5972(0x94d)](_0x8e5972(0x88d)); async function _0x31bdfd(_0x1b19b1) { const _0x1e18c4 = _0x8e5972; if (_0x1e18c4(0x411) === _0x1e18c4(0x793)) _0x5dda27[_0x1e18c4(0x724)] = '旁白', _0x54b43f[_0x1e18c4(0x724)] = '（对话结束）'; else try { if (_0x1e18c4(0x795) !== _0x1e18c4(0x795)) { const _0x4b941e = _0x28c7b3[_0x1e18c4(0x94d)]('pending-post-image-preview'); _0x4b941e && _0x1ef496 && (_0x4b941e[_0x1e18c4(0x802)] = _0x152e35['createObjectURL'](_0x1c5471)); } else { const _0x439f2a = URL[_0x1e18c4(0x413)](_0x1b19b1), _0x3e101b = _0x1e18c4(0x42d), _0x55fa2c = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x3e101b + _0x1e18c4(0x386) + _0x439f2a + _0x1e18c4(0x65f); _0x50b670[_0x1e18c4(0x806)] = _0x55fa2c, document[_0x1e18c4(0x903)]['style'][_0x1e18c4(0x318)]('--custom-font-family', '\x27' + _0x3e101b + '\x27'), _0x2b9fa8[_0x1e18c4(0x724)] = _0x1e18c4(0xc25); } } catch (_0x430b9d) { if ('ljCtT' !== 'ljCtT') { const _0x59d76d = _0x5f565a[_0x1e18c4(0x575)]['find'](_0x52255d => _0x52255d['id'] === _0x5d24e4['boundUserProfileId']) || { 'name': _0x1e18c4(0x2c8) }, _0x39cfad = _0x2252db[_0x1e18c4(0x2fa)](_0x1e18c4(0xaf1)); _0x39cfad[_0x1e18c4(0x1ea)] = 'world-book-item', _0x39cfad[_0x1e18c4(0xaac)]['id'] = _0x397051['id'], _0x39cfad['innerHTML'] = _0x1e18c4(0x33d) + _0x561696['name'] + _0x1e18c4(0x4fb) + _0x59d76d[_0x1e18c4(0x7e6)] + '\x20|\x20' + _0x21f8d3[_0x1e18c4(0x861)][_0x1e18c4(0x2ab)] + _0x1e18c4(0x18c), _0x39cfad[_0x1e18c4(0x672)]('click', () => _0x477909(_0x22d87f['id'])), _0x1fc928[_0x1e18c4(0xc15)](_0x39cfad); } else console[_0x1e18c4(0x1be)](_0x1e18c4(0x5bc), _0x430b9d), _0x5294eb('哼，你这字体文件有问题，用不了。'); } } async function _0x425812() { const _0x1c71d8 = _0x8e5972; try { if (_0x1c71d8(0xb86) !== _0x1c71d8(0xc7f)) { const _0xe14f07 = await _0xe5b0ea('custom_font_ttf'); _0xe14f07 && (console[_0x1c71d8(0x668)](_0x1c71d8(0x1bf)), await _0x31bdfd(_0xe14f07)); } else { const _0x4376cf = _0x1aa1dd[_0x1c71d8(0x2fa)](_0x1c71d8(0xaf1)); _0x4376cf[_0x1c71d8(0x1ea)] = _0x1c71d8(0xbd1), _0x4376cf[_0x1c71d8(0xaac)]['id'] = _0x53e0c0['id']; const _0x20e11b = _0x17e644['id'] === _0x41eddb[_0x1c71d8(0xc02)] ? _0x1c71d8(0x36a) : ''; _0x4376cf['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x1f6d30['avatar'] || _0x36260c) + _0x1c71d8(0x42e) + _0x4a55d3[_0x1c71d8(0x7e6)] + _0x20e11b + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x3970a4['persona'][_0x1c71d8(0x9dd)](0x0, 0x64) + _0x1c71d8(0x21c), _0x4376cf[_0x1c71d8(0x672)]('click', () => _0x5a24be(_0x1c56be['id'])), _0x400055[_0x1c71d8(0xc15)](_0x4376cf); } } catch (_0x220bf1) { console[_0x1c71d8(0x1be)](_0x1c71d8(0xad8), _0x220bf1); } } async function _0x4ba719(_0x52918c) { const _0x3aa859 = _0x8e5972, _0x3cdded = _0x52918c['target']['files'][0x0]; if (!_0x3cdded || !_0x3cdded[_0x3aa859(0x7e6)][_0x3aa859(0x8ce)]()[_0x3aa859(0x37c)]('.ttf')) { _0x5294eb(_0x3aa859(0xa02)); return; } _0xea506e(!![], _0x3aa859(0xb62)); try { if (_0x3aa859(0xb11) === _0x3aa859(0x24d)) { _0x2c9bf7[_0x3aa859(0x806)] = _0x3aa859(0x3c6); return; } else await _0x1ebaf2(_0x3aa859(0x367), _0x3cdded), await _0x31bdfd(_0x3cdded), _0x5294eb(_0x3aa859(0x286)); } catch (_0x58120f) { _0x5294eb(_0x3aa859(0x66c) + _0x58120f[_0x3aa859(0x6da)]); } finally { 'tghOq' !== _0x3aa859(0x788) ? _0x3ec9e5(_0x3fb921, _0x3aa859(0x8fe)) : (_0xea506e(![]), _0x4ee84e[_0x3aa859(0x41a)] = ''); } } async function _0x261cae() { const _0x411e48 = _0x8e5972; if (_0x411e48(0xc23) !== 'vZzls') _0x1c8de4 = _0x4186e1[_0x411e48(0x7e6)] || _0x411e48(0xaab), _0x46278f = _0x264021[_0x411e48(0x182)][_0x411e48(0x2ab)] + _0x411e48(0xa7f); else { const _0x16e741 = await _0x2f43da(_0x411e48(0x47e)); if (_0x16e741) try { await _0x3ecfc9(_0x411e48(0x367)), _0x50b670['innerHTML'] = '', document[_0x411e48(0x903)][_0x411e48(0x7be)][_0x411e48(0x3a4)](_0x411e48(0x885)), _0x2b9fa8[_0x411e48(0x724)] = _0x411e48(0xc60), _0x5294eb(_0x411e48(0x2bc)); } catch (_0x5b7c4a) { if (_0x411e48(0x744) === _0x411e48(0x744)) _0x5294eb(_0x411e48(0x765) + _0x5b7c4a[_0x411e48(0x6da)]); else { const _0x4dcbe7 = _0x27b015[_0x411e48(0x2fa)](_0x411e48(0xaf1)); _0x4dcbe7['className'] = _0x411e48(0x188), _0x4dcbe7[_0x411e48(0x806)] = _0x411e48(0x65b) + _0x2be3a4[_0x411e48(0x994)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x4a3590['name'] + _0x411e48(0x6ea), _0x4dcbe7[_0x411e48(0x672)](_0x411e48(0xc5e), () => _0x5d9ef1(_0x44d184['id'], _0x905f6e[_0x411e48(0x7e6)])), _0x3551b5[_0x411e48(0x945)] === _0x411e48(0x8f6) ? _0x52bab6[_0x411e48(0xc15)](_0x4dcbe7) : _0x24fc22[_0x411e48(0xc15)](_0x4dcbe7); } } } } function _0x26858a() { const _0x54d872 = _0x8e5972, _0x45efe1 = document[_0x54d872(0x94d)](_0x54d872(0xb06)); if (!_0x45efe1) return; const _0x36a2d4 = localStorage['getItem'](_0x54d872(0x370)) || '35'; document[_0x54d872(0x903)][_0x54d872(0x7be)][_0x54d872(0x318)](_0x54d872(0xb37), _0x36a2d4), _0x45efe1[_0x54d872(0x41a)] = _0x36a2d4, _0x45efe1[_0x54d872(0x672)](_0x54d872(0xac7), () => { const _0x1f4175 = _0x54d872, _0x137b96 = _0x45efe1[_0x1f4175(0x41a)]; document[_0x1f4175(0x903)][_0x1f4175(0x7be)][_0x1f4175(0x318)]('--primary-hue', _0x137b96), localStorage['setItem']('themeHue', _0x137b96), _0x43139c(); }); } function _0x330e2d() { const _0x4595e2 = _0x8e5972, _0x8ad840 = document[_0x4595e2(0x94d)](_0x4595e2(0x37a)); if (!_0x8ad840) return; const _0xfb7b54 = localStorage[_0x4595e2(0x1c6)](_0x4595e2(0x7ac)) || '80'; document['documentElement'][_0x4595e2(0x7be)][_0x4595e2(0x318)](_0x4595e2(0x8c0), _0xfb7b54 + '%'), _0x8ad840[_0x4595e2(0x41a)] = _0xfb7b54, _0x8ad840[_0x4595e2(0x672)](_0x4595e2(0xac7), () => { const _0x3bf048 = _0x4595e2, _0x4558dc = _0x8ad840[_0x3bf048(0x41a)]; document['documentElement'][_0x3bf048(0x7be)]['setProperty']('--primary-lightness', _0x4558dc + '%'), localStorage[_0x3bf048(0x2ca)]('themeLightness', _0x4558dc), _0x43139c(); }); } function _0x43139c() { const _0x5230e1 = _0x8e5972, _0x5a54fc = document[_0x5230e1(0x94d)](_0x5230e1(0x6f2)); if (!_0x5a54fc) return; _0x1d2a6a['preferences'][_0x5230e1(0x5d9)] ? _0x5230e1(0x7f5) !== _0x5230e1(0x6f4) ? (_0x5a54fc['style']['color'] = '#FFFFFF', _0x5a54fc[_0x5230e1(0x7be)]['textShadow'] = _0x5230e1(0x27d)) : (_0x11fcec[_0x5230e1(0x668)](_0x5230e1(0x542) + _0x4f4acd), _0xd0b1d8['createObjectStore'](_0x401611, { 'keyPath': 'id' })) : (_0x5a54fc['style']['color'] = _0x5230e1(0x99f), _0x5a54fc[_0x5230e1(0x7be)]['textShadow'] = _0x5230e1(0x546)); } function _0x297801() { const _0x153b27 = _0x8e5972, _0x120639 = document[_0x153b27(0x94d)](_0x153b27(0x6c7)); if (!_0x120639) return; _0x120639[_0x153b27(0x460)] = _0x1d2a6a[_0x153b27(0x2de)][_0x153b27(0x5d9)] || ![], _0x120639['addEventListener'](_0x153b27(0x5d0), () => { const _0x13710c = _0x153b27; _0x1d2a6a[_0x13710c(0x2de)][_0x13710c(0x5d9)] = _0x120639[_0x13710c(0x460)], _0x4b4b09(), _0x43139c(); }); } _0xe4eb5a[_0x8e5972(0x672)]('click', _0x16dce3), _0x44adfd[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x21e94c = _0x8e5972; _0x1c23d9(), _0x484d47[_0x21e94c(0xc5e)](); }), _0x484d47[_0x8e5972(0x672)](_0x8e5972(0x5d0), _0x335bee); const _0x1f52e1 = { 'home': document[_0x8e5972(0x94d)](_0x8e5972(0xc5d)), 'chat': document['getElementById'](_0x8e5972(0x79b)), 'settings': document[_0x8e5972(0x94d)](_0x8e5972(0x4b1)), 'userProfile': document[_0x8e5972(0x94d)](_0x8e5972(0x643)), 'characterEdit': document['getElementById'](_0x8e5972(0x7e1)), 'groupChatCreate': document[_0x8e5972(0x94d)](_0x8e5972(0x974)), 'wallpaper': document[_0x8e5972(0x94d)](_0x8e5972(0x4c9)), 'worldBook': document[_0x8e5972(0x94d)](_0x8e5972(0x8cb)), 'worldBookEditor': document[_0x8e5972(0x94d)](_0x8e5972(0x72f)), 'groupSettings': document[_0x8e5972(0x94d)]('group-settings-screen'), 'music': document[_0x8e5972(0x94d)](_0x8e5972(0x567)), 'friendCircleList': document[_0x8e5972(0x94d)]('friend-circle-list-screen'), 'friendCircleEdit': document[_0x8e5972(0x94d)](_0x8e5972(0xb6c)), 'meetingList': document[_0x8e5972(0x94d)](_0x8e5972(0x8a6)), 'meetingView': document[_0x8e5972(0x94d)](_0x8e5972(0x37b)), 'userProfileList': document[_0x8e5972(0x94d)](_0x8e5972(0x77a)), 'diaryList': document[_0x8e5972(0x94d)](_0x8e5972(0xbe1)), 'diaryView': document[_0x8e5972(0x94d)](_0x8e5972(0x97f)), 'musicLibrary': document['getElementById'](_0x8e5972(0x2dc)), 'musicUploadAltar': document[_0x8e5972(0x94d)](_0x8e5972(0xc0d)), 'accounting': document['getElementById'](_0x8e5972(0x35b)), 'snoopList': document[_0x8e5972(0x94d)](_0x8e5972(0x3cf)), 'snoopPhone': document[_0x8e5972(0x94d)](_0x8e5972(0x745)), 'calendar': document[_0x8e5972(0x94d)](_0x8e5972(0x557)) }, _0x306b12 = document[_0x8e5972(0x94d)](_0x8e5972(0xbd3)), _0x20d220 = document[_0x8e5972(0x94d)](_0x8e5972(0x77d)), _0x2c21ac = document[_0x8e5972(0x94d)]('reset-feed-bg-button'), _0x2ccf90 = document[_0x8e5972(0x94d)](_0x8e5972(0x9a3)), _0x1d8a7f = document['getElementById'](_0x8e5972(0x408)), _0x2602cc = document['getElementById'](_0x8e5972(0xa10)), _0x96c602 = document[_0x8e5972(0x94d)](_0x8e5972(0x1ba)), _0x3141ed = document[_0x8e5972(0x94d)](_0x8e5972(0x41c)); document[_0x8e5972(0x94d)]('reset-desktop-button')[_0x8e5972(0x672)](_0x8e5972(0xc5e), async () => { const _0x56adb6 = _0x8e5972, _0x49dde1 = await _0x2f43da(_0x56adb6(0x457)); if (_0x49dde1) { localStorage[_0x56adb6(0x34a)](_0x56adb6(0x307)), localStorage[_0x56adb6(0x34a)](_0x56adb6(0x7b3)), localStorage[_0x56adb6(0x34a)](_0x56adb6(0x350)), localStorage['removeItem']('musicWidgetPosition'); const _0x144ebf = []; for (let _0x5a18d2 = 0x0; _0x5a18d2 < localStorage['length']; _0x5a18d2++) { const _0x1b42df = localStorage['key'](_0x5a18d2); if (_0x1b42df && _0x1b42df['startsWith'](_0x56adb6(0x204))) { if (_0x56adb6(0x9e2) === _0x56adb6(0x9e2)) _0x144ebf[_0x56adb6(0x8b0)](_0x1b42df); else { if (_0x12cc9d[_0x56adb6(0x874)] === _0x56adb6(0xadb) && _0x42b8a9[_0x56adb6(0x7dc)]) return { 'role': _0x56adb6(0xadb), 'content': [{ 'type': 'text', 'text': _0x1ca644[_0x56adb6(0x415)] || '\x20' }, { 'type': _0x56adb6(0x4dc), 'image_url': { 'url': _0x1135aa[_0x56adb6(0x7dc)], 'detail': 'high' } }] }; return { 'role': _0x54c7c4[_0x56adb6(0x874)], 'content': _0x40018a[_0x56adb6(0x415)] }; } } } _0x144ebf[_0x56adb6(0x83e)](_0x45566b => localStorage[_0x56adb6(0x34a)](_0x45566b)), await _0x1ebaf2(_0x56adb6(0x2c3), await _0x5a3320(_0x56adb6(0x584))), _0x5294eb(_0x56adb6(0x35a)), setTimeout(() => location['reload'](), 0x5dc); } }); const _0x2c3df4 = document[_0x8e5972(0x94d)](_0x8e5972(0xc1c)), _0x130513 = document['getElementById'](_0x8e5972(0x1ad)), _0x584421 = document[_0x8e5972(0x94d)](_0x8e5972(0xa74)), _0xd9b821 = document[_0x8e5972(0x94d)](_0x8e5972(0x6ee)), _0x5cbffb = document[_0x8e5972(0x94d)]('choice-cancel'), _0x124c50 = document[_0x8e5972(0x94d)](_0x8e5972(0xc70)), _0x16f94c = document[_0x8e5972(0x94d)](_0x8e5972(0x7ad)), _0x39d283 = document[_0x8e5972(0x94d)](_0x8e5972(0x214)), _0x13bc81 = document[_0x8e5972(0x94d)](_0x8e5972(0xac9)), _0x43d9a5 = document[_0x8e5972(0x94d)](_0x8e5972(0x6a4)), _0x2a91e3 = document[_0x8e5972(0x94d)]('app-settings'), _0x197d69 = document['getElementById']('back-to-home-from-settings'), _0x150a08 = document[_0x8e5972(0x94d)](_0x8e5972(0x372)), _0x3e426a = document['getElementById'](_0x8e5972(0x4f5)), _0x5a440b = document['getElementById']('back-to-settings-from-user-profile'), _0x4e82c2 = document[_0x8e5972(0x94d)]('back-to-char-select-from-edit'), _0x32b408 = document[_0x8e5972(0x94d)](_0x8e5972(0x379)), _0x1733f1 = document[_0x8e5972(0x94d)](_0x8e5972(0x4ee)), _0x457bf7 = document['getElementById'](_0x8e5972(0x79b)), _0x7cbcb = document['getElementById'](_0x8e5972(0x663)), _0x58c11d = document[_0x8e5972(0x94d)]('chat-message-input'), _0x4f91ee = document['getElementById']('chat-send-button'), _0x15f0cb = document[_0x8e5972(0x94d)](_0x8e5972(0x361)), _0x57d10a = document[_0x8e5972(0x94d)](_0x8e5972(0x3da)), _0x1a9499 = document[_0x8e5972(0x94d)]('quote-preview-sender'), _0x3de992 = document[_0x8e5972(0x94d)]('quote-preview-text'), _0x15e761 = document[_0x8e5972(0x94d)](_0x8e5972(0x315)), _0x2074ae = document[_0x8e5972(0x94d)](_0x8e5972(0x20a)), _0x253536 = document[_0x8e5972(0x94d)](_0x8e5972(0x7aa)), _0x1e3b0e = document[_0x8e5972(0x94d)](_0x8e5972(0xb9d)), _0xdfe8b6 = document[_0x8e5972(0x94d)](_0x8e5972(0x634)), _0x514e96 = document[_0x8e5972(0x94d)]('chat-image-input'), _0x451b9d = document[_0x8e5972(0x94d)]('character-settings-button'), _0x4ecdc1 = document[_0x8e5972(0x94d)](_0x8e5972(0x42c)), _0x9de1bd = document[_0x8e5972(0x94d)](_0x8e5972(0x3d2)), _0x4750c1 = document[_0x8e5972(0x94d)](_0x8e5972(0x9e3)), _0x48a005 = document[_0x8e5972(0x94d)](_0x8e5972(0x8c3)), _0xcfcbf1 = document[_0x8e5972(0x94d)](_0x8e5972(0x62a)), _0x5441a2 = document[_0x8e5972(0x94d)]('fetch-models-button'), _0x16bdc9 = document['getElementById']('model-dropdown'), _0x13cbcf = document['getElementById'](_0x8e5972(0xbbf)), _0x3dac66 = document[_0x8e5972(0x94d)](_0x8e5972(0x395)), _0x493595 = document[_0x8e5972(0x94d)]('user-avatar-preview'), _0x2eea78 = document[_0x8e5972(0x94d)](_0x8e5972(0xab5)), _0x41e697 = document[_0x8e5972(0x94d)]('user-persona'), _0x3c46c6 = document[_0x8e5972(0x94d)](_0x8e5972(0x995)), _0x4b2d84 = document['getElementById']('editing-char-id'), _0x39f008 = document[_0x8e5972(0x94d)]('character-edit-title'), _0x269a4c = document[_0x8e5972(0x94d)](_0x8e5972(0xa80)), _0x4f179b = document[_0x8e5972(0x94d)](_0x8e5972(0x6a7)), _0x96a3bc = document[_0x8e5972(0x94d)](_0x8e5972(0x499)), _0x1cf59f = document['getElementById']('char-edit-avatar-input'), _0x553250 = document['getElementById'](_0x8e5972(0xa5d)), _0x54ca2d = document[_0x8e5972(0x94d)]('save-char-button'), _0x49ee9b = document[_0x8e5972(0x94d)](_0x8e5972(0x2cf)), _0x3a73df = document[_0x8e5972(0x94d)](_0x8e5972(0x3ad)); let _0x171639 = null; const _0x19d10f = _0x8e5972(0x58b), _0x1a3f53 = _0x8e5972(0x73e); _0x1d2a6a = { 'characters': [], 'worldBooks': [], 'worldBookCategories': [], 'activeWorldBookCategoryId': _0x8e5972(0x1c1), 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x4b4b09() { const _0x1d6ace = _0x8e5972; if (_0x1d6ace(0x856) === 'hFAOA') try { if ('wbHVL' === 'wbHVL') { const _0xf7b6f1 = _0x1d2a6a[_0x1d6ace(0x1bc)]['map'](_0x295ad1 => { const _0x52b3fa = _0x1d6ace, _0x458623 = { ..._0x295ad1 }; return _0x458623['avatar'] && _0x458623[_0x52b3fa(0x7a4)][_0x52b3fa(0x3c5)](_0x52b3fa(0x83a)) && delete _0x458623[_0x52b3fa(0x7a4)], _0x458623; }), _0x308d7c = { 'version': 0x1, 'characters': _0xf7b6f1, 'worldBooks': _0x1d2a6a['worldBooks'], 'worldBookCategories': _0x1d2a6a[_0x1d6ace(0x463)], 'activeWorldBookCategoryId': _0x1d2a6a['activeWorldBookCategoryId'], 'chats': _0x1d2a6a['chats'], 'apiSettings': _0x1d2a6a[_0x1d6ace(0xb07)], 'preferences': _0x1d2a6a[_0x1d6ace(0x2de)], 'activeChatId': _0x1d2a6a[_0x1d6ace(0x5e4)], 'diaries': _0x1d2a6a[_0x1d6ace(0x82b)], 'friendCircles': _0x1d2a6a[_0x1d6ace(0xc00)], 'activeFriendCircleId': _0x1d2a6a['activeFriendCircleId'], 'userProfiles': _0x1d2a6a['userProfiles'], 'activeUserProfileId': _0x1d2a6a['activeUserProfileId'], 'accountingData': _0x1d2a6a[_0x1d6ace(0x2d5)], 'accountingLedger': _0x1d2a6a['accountingLedger'], 'calendarEvents': _0x1d2a6a['calendarEvents'] }; localStorage[_0x1d6ace(0x2ca)](_0x1d6ace(0x2ad), JSON[_0x1d6ace(0x838)](_0x308d7c)); } else _0x4f458e[_0x1d6ace(0x5c7)][_0x4181c1][_0x1d6ace(0x965)] = !![], _0x5a43cc(); } catch (_0x561d87) { console[_0x1d6ace(0x1be)](_0x1d6ace(0x5d4), _0x561d87), _0x5294eb(_0x1d6ace(0x6b3)); } else _0x3503df(_0x1d6ace(0x1d9)); } async function _0x4e6665() { const _0x422edd = _0x8e5972; if (_0x422edd(0x2a1) !== _0x422edd(0x512)) { if (!_0x1d2a6a[_0x422edd(0x1bc)] || _0x1d2a6a[_0x422edd(0x1bc)][_0x422edd(0x2ab)] === 0x0) { console[_0x422edd(0x668)]('没有角色需要恢复头像，跳过。'); return; } console[_0x422edd(0x668)]('启动头像恢复程序...'); for (const _0x3b68bb of _0x1d2a6a[_0x422edd(0x1bc)]) { if (!_0x3b68bb[_0x422edd(0x7a4)]) try { const _0x1c8206 = await _0xe5b0ea(_0x422edd(0xa03) + _0x3b68bb['id']); _0x1c8206 && (_0x3b68bb['avatar'] = await _0x22515d(_0x1c8206)); } catch (_0x180e70) { if (_0x422edd(0x505) !== _0x422edd(0x1c9)) console['error']('为角色\x20' + _0x3b68bb['name'] + '\x20(' + _0x3b68bb['id'] + _0x422edd(0x6c5), _0x180e70); else { const _0x38d2fc = _0x2c3437[_0x422edd(0x1c6)](_0x422edd(0xbf3)); if (_0x38d2fc) { const { playlist: _0x37701a, currentIndex: _0x33e795 } = _0x3ebed9[_0x422edd(0xac1)](_0x38d2fc); _0x315c76[_0x422edd(0x57e)](_0x37701a) && _0x37701a['length'] > 0x0 && _0x33e795 > -0x1 && (_0xdc2e3f[_0x422edd(0x345)] = _0x37701a, _0x364d86[_0x422edd(0x4dd)] = _0x33e795, _0x2b60b6[_0x422edd(0x22c)] = ![], _0x2b090c()); } } } } console['log']('所有头像已恢复到运行时状态。'); } else _0x45e14a[_0x422edd(0x8b0)](_0x65e422); } function _0x275e21() { const _0x4cad56 = _0x8e5972; if (_0x4cad56(0x896) !== _0x4cad56(0xb75)) { let _0x293bd4 = null; try { _0x293bd4 = localStorage[_0x4cad56(0x1c6)]('appState'); } catch (_0x144ab5) { if (_0x4cad56(0x94b) !== 'AEziy') console[_0x4cad56(0x1be)](_0x4cad56(0x7d9), _0x144ab5); else { const _0x493d4b = _0x18a9f1(_0x13f4f9[_0x4cad56(0xc2c)]); _0x493d4b && (delete _0x493d4b[_0x4cad56(0x91c)], _0x1af214(), _0x29929d(_0x493d4b['id'], _0x4cad56(0x8fe)), _0x54d026(_0x4cad56(0x7ba)), _0x55ad72(!![])); } } if (_0x293bd4) try { if ('WqPlo' === _0x4cad56(0x344)) { const _0xc9f363 = JSON[_0x4cad56(0xac1)](_0x293bd4), _0x5a115f = { ..._0x1d2a6a }, _0x4655d7 = { ..._0x5a115f, ..._0xc9f363 }; _0x4655d7[_0x4cad56(0x2de)] = { ..._0x5a115f[_0x4cad56(0x2de)], ..._0xc9f363[_0x4cad56(0x2de)] || {} }, _0x4655d7['apiSettings'] = { ..._0x5a115f[_0x4cad56(0xb07)], ..._0xc9f363[_0x4cad56(0xb07)] || {} }, Object[_0x4cad56(0x60e)](_0x1d2a6a, _0x4655d7); } else { const _0x3c386c = _0xbdc794[_0x4cad56(0x25c)](_0x26e950, _0x4cad56(0x461)), _0xb71c1e = _0x3c386c['objectStore'](_0x44fa1f), _0x5f3cad = _0xb71c1e[_0x4cad56(0x734)]({ 'id': _0x3a04a1, 'blob': _0x23c980 }); _0x5f3cad[_0x4cad56(0x33f)] = () => _0x56774a(_0x5f3cad[_0x4cad56(0xa75)]), _0x5f3cad[_0x4cad56(0x2b0)] = () => _0x48f2b3(_0x5f3cad[_0x4cad56(0x1be)]); } } catch (_0x56812c) { console[_0x4cad56(0x1be)]('解析存档失败，正在重置:', _0x56812c), localStorage[_0x4cad56(0x34a)](_0x4cad56(0x2ad)); } const _0x507abc = _0x1d2a6a[_0x4cad56(0x1bc)][_0x4cad56(0x2ab)] === 0x0; return !_0x1d2a6a[_0x4cad56(0x816)]['find'](_0x1b4efb => _0x1b4efb['id'] === _0x1d2a6a['activeChatId']) && (_0x1d2a6a[_0x4cad56(0x5e4)] = _0x1d2a6a['chats'][0x0]?.['id'] || null), _0x293bd4 && (_0x4cad56(0x7fd) === _0x4cad56(0x7fd) ? _0x4b4b09() : _0x2075db(_0x365761['id'])), _0x507abc; } else _0x389b87[_0x4cad56(0x672)](_0x4cad56(0xc5e), () => { const _0x5205bb = _0x4cad56, _0x28e77e = _0x1e79a6['getElementById']('lock-screen-overlay'); _0x28e77e && (_0x28e77e['classList'][_0x5205bb(0x8f0)](_0x5205bb(0x400)), _0x28e77e[_0x5205bb(0x7be)][_0x5205bb(0xb82)] = '', _0x28e77e[_0x5205bb(0x7be)]['opacity'] = ''); }); } function _0x596ec3() { const _0xa7faa4 = _0x8e5972; if ('SDhEu' !== _0xa7faa4(0x9d0)) { if (!_0x1d2a6a[_0xa7faa4(0x5e4)]) return; try { localStorage[_0xa7faa4(0x2ca)]('chatHistory_' + _0x1d2a6a['activeChatId'], JSON[_0xa7faa4(0x838)](_0x1d2a6a[_0xa7faa4(0x5c7)])); } catch (_0x4d5348) { console[_0xa7faa4(0x1be)](_0xa7faa4(0xb38), _0x4d5348), _0x5294eb('无法保存聊天记录。'); } } else _0x1e9f41[_0xa7faa4(0x806)] = '<span\x20style=\x22opacity:\x200.6;\x22>无</span>'; } function _0x23301c() { const _0x74af50 = _0x8e5972; if (_0x74af50(0x4f7) !== _0x74af50(0x4f7)) return new _0x48059d(_0x72c2cb => { const _0x3621dc = _0x74af50, _0x1dedcc = _0x23f504[_0x3621dc(0x94d)](_0x3621dc(0x853)), _0x2894ca = _0x92a842[_0x3621dc(0x94d)]('modal-text'), _0x462f11 = _0x46a741['getElementById'](_0x3621dc(0x19b)), _0x3559e2 = _0x2ae149[_0x3621dc(0x94d)](_0x3621dc(0xb14)), _0x3a8a32 = _0x2745bd[_0x3621dc(0x94d)](_0x3621dc(0x459)); _0x2894ca['textContent'] = _0x1b4cf4, _0x1dedcc[_0x3621dc(0x7be)][_0x3621dc(0x180)] = _0x3621dc(0x67c); const _0x1130c5 = _0x43d932 => { const _0x3cf576 = _0x3621dc; _0x1dedcc[_0x3cf576(0x7be)][_0x3cf576(0x180)] = _0x3cf576(0x546), _0x462f11['onclick'] = _0x3559e2[_0x3cf576(0x997)] = _0x3a8a32['onclick'] = null, _0x229430[_0x3cf576(0x6a2)](_0x3cf576(0x611), _0x192d8d), _0x72c2cb(_0x43d932); }, _0x192d8d = _0x7adfd2 => { const _0x3926b8 = _0x3621dc; if (_0x7adfd2[_0x3926b8(0x5c2)] === 'Escape') _0x1130c5(![]); if (_0x7adfd2[_0x3926b8(0x5c2)] === _0x3926b8(0x2f3)) _0x1130c5(!![]); }; _0x462f11['onclick'] = () => _0x1130c5(!![]), _0x3559e2['onclick'] = () => _0x1130c5(![]), _0x3a8a32[_0x3621dc(0x997)] = () => _0x1130c5(![]), _0x285345[_0x3621dc(0x672)](_0x3621dc(0x611), _0x192d8d); }); else { if (!_0x1d2a6a[_0x74af50(0x5e4)]) { _0x1d2a6a[_0x74af50(0x5c7)] = [], _0x2784f3(); return; } let _0x3606c7 = null; try { _0x3606c7 = localStorage[_0x74af50(0x1c6)]('chatHistory_' + _0x1d2a6a[_0x74af50(0x5e4)]); } catch (_0xd965ed) { 'USWgL' === _0x74af50(0xbb0) ? console[_0x74af50(0x1be)](_0x74af50(0xc77) + _0x1d2a6a['activeChatId'], _0xd965ed) : (_0x3f27d1[_0x74af50(0x94d)](_0x74af50(0x625))['value'] = '', _0x2c9a14[_0x74af50(0x94d)](_0x74af50(0x22a))[_0x74af50(0x724)] = _0x74af50(0x19d), _0x5ab589[_0x74af50(0x94d)](_0x74af50(0x395))[_0x74af50(0x41a)] = '新用户\x20' + (_0x34877f[_0x74af50(0x575)]['length'] + 0x1), _0x220fdc[_0x74af50(0x7be)][_0x74af50(0x4d7)] = _0x74af50(0x80f) + _0x58a155 + '\x27)', _0x503ad7[_0x74af50(0x94d)](_0x74af50(0x563))[_0x74af50(0x41a)] = '', _0xc7f906[_0x74af50(0x7be)][_0x74af50(0x180)] = _0x74af50(0x546), _0x32279a[_0x74af50(0x94d)](_0x74af50(0x9e8))[_0x74af50(0x7be)]['display'] = _0x74af50(0x546)); } let _0x4e1511 = []; if (_0x3606c7) try { if (_0x74af50(0x314) !== _0x74af50(0x314)) { const _0x163716 = _0x3b9855[_0x74af50(0x20e)](_0x74af50(0x5a8)); if (!_0x163716) return; _0x163716['id'] === _0x74af50(0x37b) ? _0x51a1ee() : _0x2fa593(); } else { const _0x240577 = JSON[_0x74af50(0xac1)](_0x3606c7); Array[_0x74af50(0x57e)](_0x240577) && (_0x74af50(0x8ed) === _0x74af50(0x234) ? (_0x2e524c = _0x2fa65c[_0x74af50(0x2fa)]('div'), _0x20d786[_0x74af50(0x1ea)] = _0x74af50(0x57b), _0x41a481[_0x74af50(0x724)] = '对方正在输入...', _0x20f432[_0x74af50(0x94d)](_0x74af50(0x5b2))['appendChild'](_0x3550df)) : _0x4e1511 = _0x240577[_0x74af50(0x564)](_0x235a7f => _0x235a7f && typeof _0x235a7f === _0x74af50(0x595) && typeof _0x235a7f[_0x74af50(0x874)] === 'string' && typeof _0x235a7f['content'] !== _0x74af50(0x68c))); } } catch (_0x453f52) { console[_0x74af50(0x1be)](_0x74af50(0x1f4) + _0x1d2a6a[_0x74af50(0x5e4)] + ',\x20resetting.', _0x453f52); try { localStorage[_0x74af50(0x34a)](_0x74af50(0x6ba) + _0x1d2a6a[_0x74af50(0x5e4)]); } catch (_0x536bbd) { _0x74af50(0x908) === _0x74af50(0x908) ? console['error'](_0x74af50(0xad6), _0x536bbd) : _0x826e6d(!![]); } } _0x1d2a6a[_0x74af50(0x5c7)] = _0x4e1511, _0x7cbcb[_0x74af50(0x806)] = '', _0x1d2a6a[_0x74af50(0x5c7)] && _0x1d2a6a[_0x74af50(0x5c7)][_0x74af50(0x83e)]((_0x3f7d55, _0x27450b) => _0x4a73f8(_0x3f7d55, _0x27450b)), setTimeout(() => { const _0x2c35f4 = _0x74af50; 'GnDBw' !== _0x2c35f4(0x661) ? _0x7cbcb[_0x2c35f4(0xa4f)] = _0x7cbcb[_0x2c35f4(0x227)] : _0x30f79e = _0x1ff1c0[_0x2c35f4(0x1c6)](_0x2c35f4(0x2ad)); }, 0x0); } } async function _0x4e348f() { const _0x71bc16 = _0x8e5972; if (_0x71bc16(0xa6a) !== _0x71bc16(0x678)) { const _0x1b151e = document[_0x71bc16(0x94d)](_0x71bc16(0xc5d)); if (!_0x1b151e) { console['error'](_0x71bc16(0xc5f)); return; } try { let _0x165b7a = await _0xe5b0ea(_0x71bc16(0x2c3)); if (!_0x165b7a) { if (_0x71bc16(0x8f8) === _0x71bc16(0x68e)) { const _0x3d0246 = _0x802234[_0x71bc16(0x816)]['find'](_0x5abeec => _0x5abeec[_0x71bc16(0x182)][_0x71bc16(0x7d3)](_0x1deb07)); if (!_0x3d0246) return ''; const _0x4e1ca1 = _0xc6193b(_0x3d0246['id']), _0x1e3e15 = _0x1abdef[_0x71bc16(0x5ca)][_0x71bc16(0x564)](_0xfff68f => _0xfff68f[_0x71bc16(0xa22)] === _0x4e1ca1['id'] || !_0xfff68f['userId']); if (_0x1e3e15[_0x71bc16(0x2ab)] === 0x0) return ''; const _0x492c85 = _0x1e3e15[_0x71bc16(0x719)](_0x4a6fc1 => { const _0x387348 = _0x71bc16, _0x743374 = _0x4a6fc1[_0x387348(0x832)] === 'important' ? _0x387348(0xc06) : '待办'; return '-\x20[' + _0x743374 + ']\x20' + _0x4a6fc1[_0x387348(0x9ba)] + ':\x20' + _0x4a6fc1[_0x387348(0x415)]; })[_0x71bc16(0x973)]('\x0a'); return _0x71bc16(0x6b0) + _0x4e1ca1['name'] + _0x71bc16(0x510) + _0x492c85; } else { const _0x24d369 = localStorage[_0x71bc16(0x1c6)](_0x71bc16(0xa38)); _0x24d369 && (_0x71bc16(0x1ae) === _0x71bc16(0x1ae) ? (console[_0x71bc16(0x668)](_0x71bc16(0x1e4)), _0x165b7a = await _0x5a3320(_0x24d369), await _0x1ebaf2('wallpaper_main', _0x165b7a), localStorage['removeItem'](_0x71bc16(0xa38))) : _0x3a1041['disabled'] = !![]); } } _0x165b7a ? _0x71bc16(0x804) === _0x71bc16(0x851) ? _0x17b12e(_0x71bc16(0x7f7), '聊天') : (_0x1b151e[_0x71bc16(0x7be)]['backgroundImage'] = _0x71bc16(0x9bf) + URL[_0x71bc16(0x413)](_0x165b7a) + ')', _0x1b151e['style'][_0x71bc16(0x947)] = _0x71bc16(0x9a7), _0x1b151e[_0x71bc16(0x7be)][_0x71bc16(0xbed)] = _0x71bc16(0x2aa)) : _0x1b151e['style'][_0x71bc16(0x4d7)] = ''; } catch (_0x12e743) { console[_0x71bc16(0x1be)](_0x71bc16(0x409), _0x12e743); if (_0x1b151e) { if ('OeOsn' !== _0x71bc16(0x55b)) { const _0x1c3f9f = _0x3ffcf2[_0x71bc16(0x94d)](_0x71bc16(0x6b7)); if (!_0x1c3f9f) return; const _0x1a9677 = _0x83221c(), _0x167738 = _0x44622c[_0x71bc16(0x5ca)]['filter'](_0x2f4bc4 => _0x2f4bc4[_0x71bc16(0x9ba)] === _0x1a9677 && _0x2f4bc4['type'] === 'todo'); _0x1c3f9f[_0x71bc16(0x806)] = '', _0x167738[_0x71bc16(0x2ab)] > 0x0 ? _0x167738[_0x71bc16(0x83e)](_0x432762 => { const _0x3873bb = _0x71bc16, _0x277922 = _0x299eed['createElement'](_0x3873bb(0xaf1)); _0x277922[_0x3873bb(0x1ea)] = 'todo-item-small', _0x277922[_0x3873bb(0x724)] = _0x432762['content'], _0x1c3f9f[_0x3873bb(0xc15)](_0x277922); }) : _0x1c3f9f[_0x71bc16(0x806)] = _0x71bc16(0xa1d); } else _0x1b151e['style'][_0x71bc16(0x4d7)] = ''; } } } else _0x271355['entries'][_0x71bc16(0xa95)](_0x3cd9f7, 0x1), _0x20427c(), _0x2fe39a(), _0xf8efee(_0x71bc16(0x33b)); } function _0x16939f() { const _0x2527ec = _0x8e5972; if (_0x2527ec(0x46c) === _0x2527ec(0x46c)) { const _0x363456 = localStorage[_0x2527ec(0x1c6)]('customFeedWallpaper'); _0x363456 ? _0x2527ec(0x8e9) !== _0x2527ec(0x8e9) ? (_0x277d15 = _0x58758a[_0x2527ec(0x7e6)], _0x53d267 = _0x5a220b['avatar']) : document[_0x2527ec(0x94d)](_0x2527ec(0x567))[_0x2527ec(0x7be)][_0x2527ec(0x318)](_0x2527ec(0xb32), _0x2527ec(0x9bf) + _0x363456 + ')') : document[_0x2527ec(0x94d)](_0x2527ec(0x567))[_0x2527ec(0x7be)]['setProperty'](_0x2527ec(0xb32), _0x2527ec(0x546)); } else _0x17fa4e += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; } async function _0x591fce(_0x25f240) { const _0x20da5c = _0x8e5972; try { _0x20da5c(0xc6e) === 'MuiTb' ? (await _0x1ebaf2(_0x20da5c(0x2c3), _0x25f240), await _0x4e348f(), _0x5294eb(_0x20da5c(0x54a))) : (_0xee5fbc[_0x20da5c(0xa47)][_0x20da5c(0x8f0)](_0x20da5c(0x7dd)), _0x49018c(() => _0x113002[_0x20da5c(0x7be)][_0x20da5c(0x180)] = 'none', 0x12c)); } catch (_0x2d4aea) { _0x20da5c(0x97b) !== _0x20da5c(0x682) ? (console[_0x20da5c(0x1be)]('保存壁纸失败:', _0x2d4aea), _0x5294eb(_0x20da5c(0x3a5) + _0x2d4aea[_0x20da5c(0x6da)])) : _0x338c11(_0x20da5c(0x26a) + _0xcf6a05['message']); } } function _0x111aa0(_0x678b72) { const _0x4683a5 = _0x8e5972, _0x4b50ef = { 'quotedMessage': null, 'content': _0x678b72 }, _0x26df73 = _0x678b72[_0x4683a5(0x5f9)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x26df73 && (_0x4683a5(0xb89) === 'RoPEG' ? (_0x4b50ef[_0x4683a5(0x651)] = { 'sender': _0x26df73[0x1][_0x4683a5(0x667)](), 'content': _0x26df73[0x2]['trim']() }, _0x4b50ef['content'] = _0x678b72[_0x4683a5(0x9dd)](_0x26df73[0x0][_0x4683a5(0x2ab)])[_0x4683a5(0x667)]()) : _0x2e368c[_0x4683a5(0x1be)](_0x4683a5(0x236), _0x1458fa)), _0x4b50ef; } const _0x54afed = document[_0x8e5972(0x94d)]('message-action-modal'), _0x54f6e4 = document['getElementById'](_0x8e5972(0xc48)), _0xbc35cd = document[_0x8e5972(0x94d)](_0x8e5972(0xb20)), _0x5243fa = document[_0x8e5972(0x94d)](_0x8e5972(0x240)), _0x228b28 = document[_0x8e5972(0x94d)](_0x8e5972(0x8e0)), _0x1c3eb8 = document[_0x8e5972(0x94d)](_0x8e5972(0x3f6)), _0x1d4215 = document[_0x8e5972(0x94d)]('edit-message-modal'), _0x460321 = document[_0x8e5972(0x94d)](_0x8e5972(0x4a0)), _0x1c5a4b = document[_0x8e5972(0x94d)](_0x8e5972(0x1a6)), _0x4fbb67 = document['getElementById'](_0x8e5972(0xbcc)), _0x1ff535 = document[_0x8e5972(0x94d)](_0x8e5972(0x447)); let _0x53b8d6 = null; function _0x5be91d(_0x832c78) { const _0x4dc93a = _0x8e5972; if ('SGXjJ' === 'UqdlH') { const _0x33ce50 = _0x429b56[_0x4dc93a(0x25c)](_0x43ec31, 'readwrite'), _0x27f27c = _0x33ce50[_0x4dc93a(0x926)](_0x498cd1), _0x5e3b87 = _0x27f27c['delete'](_0x589cdb); _0x5e3b87[_0x4dc93a(0x33f)] = () => _0x4007a1(), _0x5e3b87['onerror'] = () => _0x4b430b(_0x5e3b87[_0x4dc93a(0x1be)]); } else _0x53b8d6 = _0x832c78, _0x54afed[_0x4dc93a(0xa47)][_0x4dc93a(0x5ee)](_0x4dc93a(0x7dd)); } function _0x2ecf73() { const _0x7da7b8 = _0x8e5972; _0x7da7b8(0x6e1) === _0x7da7b8(0x6e1) ? _0x54afed[_0x7da7b8(0xa47)][_0x7da7b8(0x8f0)](_0x7da7b8(0x7dd)) : _0x1d6c9d(![]); } function _0x44527c() { _0x2ecf73(), _0x53b8d6 = null; } function _0x16849c() { const _0x286043 = _0x8e5972; if (_0x53b8d6 === null) return; _0x1d2a6a[_0x286043(0x5c7)][_0x286043(0xa95)](_0x53b8d6, 0x1), _0x596ec3(), _0x4379f2(), _0x44527c(); } function _0x3d7322() { const _0x57684b = _0x8e5972; if (_0x53b8d6 === null) return; const _0x5f1c5c = _0x1d2a6a['conversationHistory'][_0x53b8d6]; if (!_0x5f1c5c) return; _0x1c5a4b['value'] = _0x5f1c5c[_0x57684b(0x415)], _0x2ecf73(), _0x1d4215['classList'][_0x57684b(0x5ee)](_0x57684b(0x7dd)), _0x1c5a4b[_0x57684b(0x75e)](); } function _0x308a52() { const _0x489847 = _0x8e5972; if (_0x53b8d6 === null) return; const _0x5972b5 = _0x1c5a4b[_0x489847(0x41a)][_0x489847(0x667)](); if (_0x5972b5 === '') { _0x26c684(); return; } const _0x2f3bb0 = _0x1d2a6a[_0x489847(0x5c7)][_0x53b8d6]; _0x2f3bb0 && (_0x2f3bb0[_0x489847(0x415)] = _0x5972b5, _0x596ec3(), _0x4379f2()), _0x1d4215['classList'][_0x489847(0x8f0)](_0x489847(0x7dd)), _0x53b8d6 = null; } function _0x26c684() { const _0xa4f61e = _0x8e5972; _0x1d4215[_0xa4f61e(0xa47)][_0xa4f61e(0x8f0)](_0xa4f61e(0x7dd)), _0x53b8d6 = null; } _0x54f6e4[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x44527c), _0x228b28[_0x8e5972(0x672)]('click', _0x44527c), _0x5243fa[_0x8e5972(0x672)]('click', _0x16849c), _0xbc35cd[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x3d7322), _0x1c3eb8[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x10ab7c), _0x15e761[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x48b8cf), _0x4fbb67[_0x8e5972(0x672)]('click', _0x308a52), _0x1ff535[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x26c684), _0x460321[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x26c684); function _0x10ab7c() { const _0x2d8235 = _0x8e5972; if (_0x53b8d6 === null) return; const _0x204716 = _0x1d2a6a['conversationHistory'][_0x53b8d6]; if (!_0x204716) return; const _0x5195d0 = _0x3f5192(); let _0x138b9c = '未知'; if (_0x204716[_0x2d8235(0x874)] === _0x2d8235(0xadb)) { if ('lYijG' !== _0x2d8235(0x893)) { const _0x3f6d2a = _0x43b50c(_0x1d2a6a[_0x2d8235(0x5e4)]); _0x138b9c = _0x3f6d2a['name'] || '我'; } else { const _0x3d8c48 = _0x134254[_0x2d8235(0x575)][_0x2d8235(0x2ec)](_0x112f79 => _0x112f79['id'] === _0x5816bf[_0x2d8235(0xc02)]) || { 'name': '你' }, _0x493dbf = _0x48e240[_0x2d8235(0x82b)][_0x2d8235(0x2ec)](_0x552c0b => _0x552c0b[_0x2d8235(0x835)] === _0x2d7a80); if (!_0x493dbf || !_0x493dbf[_0x2d8235(0xb46)] || _0x493dbf[_0x2d8235(0xb46)]['length'] === 0x0) return ''; const _0x51a723 = _0x493dbf[_0x2d8235(0xb46)][_0x2d8235(0x59d)](-0x8), _0x446959 = _0x51a723['map'](_0x5daec3 => { const _0x539bd9 = _0x2d8235, _0x535445 = _0x5daec3[_0x539bd9(0x732)] === _0x539bd9(0xadb) ? _0x3d8c48[_0x539bd9(0x7e6)] : _0x95a4fc(_0x5daec3['author'])['name']; return _0x539bd9(0xa4e) + new _0x246b28(_0x5daec3[_0x539bd9(0x83c)])['toLocaleDateString']() + ']\x20' + _0x535445 + _0x539bd9(0x39b) + _0x5daec3[_0x539bd9(0x415)]; })[_0x2d8235(0x973)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0x3d8c48['name'] + _0x2d8235(0x18e) + _0x446959; } } else { const _0x3018bf = _0x204716[_0x2d8235(0xa71)] || _0x5195d0?.[_0x2d8235(0x182)][0x0], _0xf8cc83 = _0x5964f7(_0x3018bf); _0x138b9c = _0xf8cc83 ? _0xf8cc83['name'] : '角色'; } let _0x532e6e = _0x204716[_0x2d8235(0x415)] || ''; if (_0x204716[_0x2d8235(0x639)]) _0x532e6e = _0x2d8235(0x8bb); if (_0x204716[_0x2d8235(0x7dc)]) _0x532e6e = _0x2d8235(0x991); if (_0x532e6e['length'] > 0x32) _0x532e6e = _0x532e6e[_0x2d8235(0x9dd)](0x0, 0x32) + _0x2d8235(0xc11); _0x1d2a6a[_0x2d8235(0xba1)] = { 'sender': _0x138b9c, 'content': _0x532e6e }, _0x42ae6f(), _0x44527c(), _0x58c11d[_0x2d8235(0x75e)](); } function _0x42ae6f() { const _0x5552a4 = _0x8e5972; if (!_0x1d2a6a[_0x5552a4(0xba1)]) return; _0x1a9499['textContent'] = _0x5552a4(0x498) + _0x1d2a6a[_0x5552a4(0xba1)][_0x5552a4(0xa79)], _0x3de992[_0x5552a4(0x724)] = _0x1d2a6a['activeQuote'][_0x5552a4(0x415)], _0x57d10a[_0x5552a4(0x7be)]['display'] = _0x5552a4(0x26d); } function _0x48b8cf() { const _0x4c1640 = _0x8e5972; _0x1d2a6a[_0x4c1640(0xba1)] = null, _0x57d10a[_0x4c1640(0x7be)][_0x4c1640(0x180)] = _0x4c1640(0x546); } function _0x40b080(_0x330743, _0x4a3e2c) { const _0x4c2e4b = _0x8e5972; if (_0x4c2e4b(0xc63) === _0x4c2e4b(0xc63)) { const _0x51d745 = document[_0x4c2e4b(0x94d)](_0x4c2e4b(0xa55)); if (_0x51d745) { if (_0x4c2e4b(0x3b0) !== 'wiDTp') _0x55a1c3['preferences']['forceWhiteClock'] = _0x594729[_0x4c2e4b(0x460)], _0x17b4db(), _0x5e659e(); else { if (_0x330743 === _0x4c2e4b(0x5a6)) { if (_0x4c2e4b(0xb36) === _0x4c2e4b(0xb36)) _0x51d745[_0x4c2e4b(0x7be)][_0x4c2e4b(0x180)] = _0x4c2e4b(0x86e); else { _0x152fb2(_0x4c2e4b(0x9a6)); return; } } else _0x51d745['style'][_0x4c2e4b(0x180)] = _0x4c2e4b(0x546); } } _0x171639 = _0x4a3e2c || null, Object[_0x4c2e4b(0x2d0)](_0x1f52e1)['forEach'](_0x40be69 => _0x40be69[_0x4c2e4b(0xa47)][_0x4c2e4b(0x8f0)](_0x4c2e4b(0xbb6))), _0x1f52e1[_0x330743] && _0x1f52e1[_0x330743][_0x4c2e4b(0xa47)][_0x4c2e4b(0x5ee)](_0x4c2e4b(0xbb6)), _0x330743 !== 'chat' && _0x457bf7['classList'][_0x4c2e4b(0x8f0)]('show-chat-view'); } else _0x514d26['name'] = _0x390ea1['trim'](), _0x3483b7(), _0x6c353f(), _0x40121b(), _0x5d99f9(_0x4c2e4b(0xaa2) + _0x406405[_0x4c2e4b(0x7e6)] + '\x22。'); } function _0x525e66(_0x5eed73) { const _0x161646 = _0x8e5972; _0x5eed73 ? _0x457bf7[_0x161646(0xa47)][_0x161646(0x5ee)]('show-chat-view') : _0x457bf7[_0x161646(0xa47)]['remove']('show-chat-view'); } async function _0x540cfc() { const _0x2f2096 = _0x8e5972; _0x32b408['innerHTML'] = ''; const _0x382f9e = _0x1d2a6a['chats']['map'](_0x2ada3a => { const _0xd564a6 = _0x4bce; if ('wIXyJ' === 'wwUIq') _0x18793d(); else { if (_0x2ada3a[_0xd564a6(0x832)] === _0xd564a6(0x5ac)) { if (_0xd564a6(0x279) === _0xd564a6(0x279)) { const _0x515f68 = _0x5964f7(_0x2ada3a['participantIds'][0x0]); return _0x515f68 ? _0xe5b0ea(_0xd564a6(0xa03) + _0x515f68['id']) : Promise['resolve'](null); } else _0x3f68d1[_0xd564a6(0x1be)](_0xd564a6(0x313), _0x148451); } else return _0xe5b0ea('group_avatar_' + _0x2ada3a['id']); } }), _0x2c8383 = await Promise[_0x2f2096(0x8af)](_0x382f9e); _0x1d2a6a[_0x2f2096(0x816)][_0x2f2096(0x83e)]((_0x5b0227, _0x1d834e) => { const _0x3a0152 = _0x2f2096, _0x21dad3 = document[_0x3a0152(0x2fa)]('li'); _0x21dad3[_0x3a0152(0x1ea)] = 'character-item', _0x21dad3[_0x3a0152(0xaac)]['id'] = _0x5b0227['id']; let _0x24258f = _0x133533, _0xf1bc3e = '群聊', _0x416ad7 = ''; const _0x2dbc66 = _0x2c8383[_0x1d834e]; _0x2dbc66 && (_0x24258f = URL[_0x3a0152(0x413)](_0x2dbc66)); if (_0x5b0227[_0x3a0152(0x832)] === _0x3a0152(0x5ac)) { if (_0x3a0152(0x428) === _0x3a0152(0x428)) { const _0x557463 = _0x5964f7(_0x5b0227[_0x3a0152(0x182)][0x0]); _0x557463 ? (!_0x2dbc66 && (_0x3a0152(0xb16) !== _0x3a0152(0xb16) ? (_0x28564f[_0x3a0152(0x1be)](_0x3a0152(0x250), _0x113bd7), _0x4e6d20[_0x3a0152(0x802)] = '') : _0x24258f = _0x557463['avatar'] || _0x133533), _0xf1bc3e = _0x557463['name'] || _0x3a0152(0xa40), _0x416ad7 = _0x557463[_0x3a0152(0x2ef)] || '私聊') : (_0xf1bc3e = _0x3a0152(0xa1f), _0x416ad7 = '错误：找不到角色'); } else { const _0x262df3 = _0x37bea1['value'][_0x3a0152(0x667)]()['includes'](_0x156a2); _0x274654[_0x3a0152(0x1b5)] = _0x262df3; } } else 'XbSmE' === _0x3a0152(0x5eb) ? (_0xf1bc3e = _0x5b0227['name'] || _0x3a0152(0xaab), _0x416ad7 = _0x5b0227['participantIds']['length'] + '\x20个成员') : (_0x57e30f[_0x3a0152(0x82b)]['splice'](_0x37a901, 0x1), _0x573659(), _0x253aeb(), _0x46f363('【' + _0x1c746a[_0x3a0152(0x7e6)] + _0x3a0152(0x6c8))); _0x21dad3[_0x3a0152(0x806)] = _0x3a0152(0x194) + _0x24258f + _0x3a0152(0x72d) + _0xf1bc3e + _0x3a0152(0x3b4) + _0x416ad7 + _0x3a0152(0xbd4), _0x21dad3['querySelector'](_0x3a0152(0x657))['addEventListener'](_0x3a0152(0xc5e), () => { _0x32d938(_0x5b0227['id']), _0x525e66(!![]); }), _0x32b408[_0x3a0152(0xc15)](_0x21dad3); }); } function _0x45d5af() { const _0x508c7b = _0x8e5972, _0x25bc12 = document[_0x508c7b(0x94d)](_0x508c7b(0xc20)); _0x25bc12['innerHTML'] = ''; const _0x5c0042 = _0x1d2a6a[_0x508c7b(0x1bc)][_0x508c7b(0x564)](_0xb46c6c => _0x1d2a6a['chats'][_0x508c7b(0x870)](_0x5d9a86 => _0x5d9a86['type'] === _0x508c7b(0x5ac) && _0x5d9a86[_0x508c7b(0x182)][_0x508c7b(0x7d3)](_0xb46c6c['id']))); if (_0x5c0042[_0x508c7b(0x2ab)] === 0x0) { _0x25bc12['innerHTML'] = _0x508c7b(0x9e0); return; } _0x5c0042[_0x508c7b(0x83e)](_0x17a4b3 => { const _0x55ed5b = _0x508c7b; if ('CoyHG' !== 'CoyHG') { _0x171127[_0x55ed5b(0x806)] = _0x55ed5b(0x725), _0x2a9d8d['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2d606b[_0x55ed5b(0x94d)](_0x55ed5b(0xa60))['addEventListener'](_0x55ed5b(0xc5e), _0x32653a), _0x57e935['getElementById'](_0x55ed5b(0x9fa))[_0x55ed5b(0x672)](_0x55ed5b(0xc5e), _0xed7801); return; } else { const _0x4a42d7 = document['createElement']('li'); _0x4a42d7[_0x55ed5b(0x1ea)] = _0x55ed5b(0x4e3), _0x4a42d7[_0x55ed5b(0xaac)]['charId'] = _0x17a4b3['id'], _0x4a42d7[_0x55ed5b(0x806)] = _0x55ed5b(0x194) + (_0x17a4b3[_0x55ed5b(0x7a4)] || _0x133533) + _0x55ed5b(0x72d) + _0x17a4b3[_0x55ed5b(0x7e6)] + _0x55ed5b(0x3b4) + (_0x17a4b3[_0x55ed5b(0x2ef)] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x4a42d7['addEventListener'](_0x55ed5b(0xc5e), () => { _0x3458d8(_0x17a4b3['id']); }), _0x25bc12['appendChild'](_0x4a42d7); } }); } async function _0x3458d8(_0x3c5da5) { const _0x3594be = _0x8e5972, _0x15486a = _0x5964f7(_0x3c5da5); if (!_0x15486a) return; _0x1d2a6a[_0x3594be(0xc2c)] = _0x3c5da5, document[_0x3594be(0x94d)](_0x3594be(0xa8b))[_0x3594be(0x724)] = _0x15486a[_0x3594be(0x7e6)]; const _0x2cb6c4 = document['getElementById'](_0x3594be(0xa78)); _0x2cb6c4[_0x3594be(0x7be)][_0x3594be(0x4d7)] = _0x3594be(0x546), document[_0x3594be(0x94d)]('meeting-scene-view')[_0x3594be(0x806)] = _0x3594be(0xb5b), document['getElementById'](_0x3594be(0x5a5))['textContent'] = '（正在回忆...）', document[_0x3594be(0x94d)](_0x3594be(0xb3f))[_0x3594be(0x724)] = '旁白', document[_0x3594be(0x94d)](_0x3594be(0xa52))[_0x3594be(0x802)] = '', _0x40b080('meetingView', _0x3594be(0x936)), setTimeout(async () => { const _0x541015 = _0x3594be; try { if (_0x541015(0x864) === 'JoZNX') { const _0x20842f = await _0xe5b0ea('char_offline_bg_' + _0x3c5da5); _0x20842f && (_0x2cb6c4[_0x541015(0x7be)][_0x541015(0x4d7)] = _0x541015(0x80f) + URL[_0x541015(0x413)](_0x20842f) + '\x27)', _0x2cb6c4[_0x541015(0x7be)][_0x541015(0x947)] = _0x541015(0x9a7), _0x2cb6c4['style'][_0x541015(0xbed)] = _0x541015(0x2aa)); const _0x1ac450 = _0x1d2a6a[_0x541015(0x816)]['find'](_0x4f9754 => _0x4f9754[_0x541015(0x832)] === 'private' && _0x4f9754['participantIds']['includes'](_0x3c5da5)); if (_0x1ac450) 'Jqtvm' === _0x541015(0xc54) ? (_0x4518e6['error'](_0x541015(0xb38), _0x424704), _0x421bbd(_0x541015(0x5de))) : (_0x1d2a6a[_0x541015(0x5e4)] = _0x1ac450['id'], _0x4b4b09(), _0x23301c()); else { if (_0x541015(0x977) === _0x541015(0x1ca)) { const _0xbf494c = new _0x4b155f(), _0x330ff2 = _0x537fd3[_0x541015(0x94d)](_0x541015(0x24a)), _0x33bbbd = _0x3cc7b9[_0x541015(0x94d)](_0x541015(0xc65)); if (_0x330ff2 && _0x33bbbd) { const _0x17fb15 = _0x319dfb(_0xbf494c['getHours']())[_0x541015(0x7d4)](0x2, '0'), _0x1bafa3 = _0x3b8c17(_0xbf494c[_0x541015(0xbc5)]())[_0x541015(0x7d4)](0x2, '0'); _0x330ff2['textContent'] = _0x17fb15 + ':' + _0x1bafa3; const _0x59c9eb = _0xbf494c[_0x541015(0x833)]() + 0x1, _0x48fddd = _0xbf494c['getDate'](), _0x4b4ac7 = [_0x541015(0x417), _0x541015(0xc79), _0x541015(0x235), _0x541015(0x5ec), _0x541015(0x820), '星期五', '星期六'][_0xbf494c[_0x541015(0x9b0)]()]; _0x33bbbd[_0x541015(0x724)] = _0x59c9eb + '月' + _0x48fddd + '日\x20' + _0x4b4ac7; } } else _0x1d2a6a[_0x541015(0x5c7)] = []; } _0x5d5440(_0x3c5da5), _0x152b78(), _0x3a8232(); if (_0x51c566) clearInterval(_0x51c566); _0xa05518(), _0x51c566 = setInterval(_0xa05518, 0x2710), document[_0x541015(0x94d)](_0x541015(0xa2f))['style'][_0x541015(0x180)] = _0x541015(0x26d); } else { const _0x362981 = _0x26947c(_0x2ab7ca[_0x541015(0xa71)] || _0x1a72ce[_0x541015(0xc2c)]); _0x11341a = _0x362981?.[_0x541015(0x7e6)] || '角色', _0x555758 = 'speaker-ai'; } } catch (_0x22a927) { _0x541015(0x91d) === _0x541015(0x697) ? (_0x41b084(![]), _0x5e7e63[_0x541015(0xbdf)][_0x541015(0x41a)] = '') : (console['error'](_0x541015(0xc71), _0x22a927), document[_0x541015(0x94d)](_0x541015(0x1ac))[_0x541015(0x806)] = _0x541015(0x20b)); } }, 0x32); } function _0x3a8232() { const _0x11de17 = _0x8e5972, _0x948245 = document['getElementById'](_0x11de17(0x1ac)); _0x948245[_0x11de17(0x806)] = ''; const _0x59de9a = _0x948245[_0x11de17(0x20e)]('#message-anchor'); if (_0x59de9a) _0x59de9a[_0x11de17(0x8f0)](); _0x1d2a6a[_0x11de17(0x5c7)] && (_0x11de17(0xade) === _0x11de17(0x89f) ? (_0x4171e1[_0x11de17(0x1be)](_0x11de17(0x7e0), _0x5898e1), _0x42ac4c['value'] = '#\x20发生错误：\x0a' + _0x1078b9[_0x11de17(0x6da)]) : _0x1d2a6a[_0x11de17(0x5c7)][_0x11de17(0x83e)]((_0x1cf49a, _0x2e24ed) => { const _0x597863 = _0x11de17; if (_0x597863(0x23c) !== _0x597863(0x23c)) _0x44f76e(_0x49d4ae[_0x597863(0x83d)](_0x268b57, _0x2da598)); else { if (!_0x1cf49a[_0x597863(0x490)] || _0x1cf49a['role'] === 'system') return; const _0x3b1533 = document[_0x597863(0x2fa)]('p'); _0x3b1533[_0x597863(0xaac)][_0x597863(0xc28)] = _0x2e24ed; const _0x20b7b9 = _0x1cf49a[_0x597863(0x415)][_0x597863(0x9ed)](/\n/g, _0x597863(0x695)); let _0x5da3b9 = '', _0x529ecf = ''; const _0x5096e0 = _0x43b50c(_0x1d2a6a[_0x597863(0x5e4)]); if (_0x1cf49a['role'] === 'user') _0x5da3b9 = _0x5096e0[_0x597863(0x7e6)] || '我', _0x529ecf = _0x597863(0x978); else { if (_0x1cf49a[_0x597863(0x874)] === _0x597863(0xb29)) { if (_0x597863(0x840) !== _0x597863(0x84d)) { const _0x135459 = _0x5964f7(_0x1cf49a[_0x597863(0xa71)] || _0x1d2a6a[_0x597863(0xc2c)]); _0x5da3b9 = _0x135459?.[_0x597863(0x7e6)] || '角色', _0x529ecf = _0x597863(0x69b); } else { if (!_0x3c9c3d['isArray'](_0x903884)) return _0x597863(0x462); if (_0x4580e9[_0x597863(0x2ab)] === 0x0) return _0x597863(0x40f); return _0x289582[_0x597863(0xa24)]((_0x59c152, _0x129904) => new _0x4193c0(_0x129904[_0x597863(0x81f)]) - new _0x265bc2(_0x59c152[_0x597863(0x81f)])), _0x233d6f[_0x597863(0x719)](_0xaeb31f => _0x597863(0x7e3) + (_0xaeb31f[_0x597863(0x443)] || '无标题笔记') + _0x597863(0xbbc) + (_0xaeb31f[_0x597863(0x415)] || '') + _0x597863(0xaf9) + (_0xaeb31f[_0x597863(0x81f)] || '') + _0x597863(0x30e))[_0x597863(0x973)](''); } } } _0x3b1533[_0x597863(0x7be)]['backgroundColor'] = _0x597863(0x398), _0x3b1533[_0x597863(0x7be)][_0x597863(0x401)] = '15px\x2020px', _0x3b1533[_0x597863(0x7be)][_0x597863(0x80e)] = _0x597863(0x5e0), _0x3b1533['style'][_0x597863(0x478)] = _0x597863(0x569), _0x5da3b9 ? _0x597863(0x517) !== _0x597863(0x517) ? (_0x26b819(), _0x1316b8 = _0x2308f0(() => { _0x248f81(_0x551cd5); }, 0x258), _0x487544['addEventListener'](_0x597863(0x731), _0x440ff4), _0x43172b[_0x597863(0x672)]('touchend', _0xdf5f0d), _0x17f477[_0x597863(0x672)](_0x597863(0xa3f), _0x579668), _0x5ba8c5[_0x597863(0x672)](_0x597863(0x51e), _0x348d06)) : _0x3b1533[_0x597863(0x806)] = '<span\x20class=\x22' + _0x529ecf + _0x597863(0xb6a) + (_0x529ecf === 'speaker-user' ? '#a7c7e7' : _0x597863(0x7c5)) + _0x597863(0x787) + _0x5da3b9 + _0x597863(0xa8d) + _0x20b7b9 : (_0x3b1533[_0x597863(0x1ea)] = _0x597863(0x468), _0x3b1533[_0x597863(0x7be)]['fontStyle'] = _0x597863(0x435), _0x3b1533[_0x597863(0x7be)][_0x597863(0x8e3)] = _0x597863(0xbe9), _0x3b1533['innerHTML'] = _0x20b7b9), _0x948245[_0x597863(0xc15)](_0x3b1533); } })); if (_0x1d2a6a[_0x11de17(0xa31)]) { if ('OJgsv' !== _0x11de17(0x6eb)) { let _0xed4ff5 = _0x948245[_0x11de17(0x20e)](_0x11de17(0x8d1)); !_0xed4ff5 && (_0x11de17(0xaae) === _0x11de17(0x890) ? (_0x16034a[_0x11de17(0x34a)]('chatHistory_' + _0x4e6bec['id']), _0x3123b5(_0x11de17(0x7ef) + _0x14d909['name'] + _0x11de17(0x683))) : (_0xed4ff5 = document[_0x11de17(0x2fa)](_0x11de17(0xaf1)), _0xed4ff5[_0x11de17(0x1ea)] = 'typing-indicator', _0xed4ff5[_0x11de17(0x724)] = '对方正在行动中...', _0xed4ff5[_0x11de17(0x7be)][_0x11de17(0x8b7)] = _0x11de17(0x398), _0xed4ff5[_0x11de17(0x7be)][_0x11de17(0x401)] = _0x11de17(0x894), _0xed4ff5[_0x11de17(0x7be)][_0x11de17(0x80e)] = '8px', _0x948245[_0x11de17(0xc15)](_0xed4ff5))); } else _0x221afa[_0x11de17(0x1be)]('用户分享音乐失败:', _0x3aa5a5), _0x2fd5a4(_0x11de17(0x218) + _0x56a13c[_0x11de17(0x6da)]); } const _0x4e1870 = document[_0x11de17(0x2fa)]('div'); _0x4e1870['id'] = _0x11de17(0x8b4), _0x948245['appendChild'](_0x4e1870), setTimeout(() => { const _0x25e4b1 = _0x11de17; _0x4e1870[_0x25e4b1(0x7fb)]({ 'behavior': _0x25e4b1(0x2c5), 'block': _0x25e4b1(0x659) }); }, 0x32); } function _0x4379f2() { const _0x1d3fda = _0x8e5972, _0x3333da = document[_0x1d3fda(0x20e)](_0x1d3fda(0x5a8)); if (!_0x3333da) return; _0x3333da['id'] === _0x1d3fda(0x37b) ? _0x3a8232() : _0x2784f3(); } function _0x2784f3() { const _0x3c2952 = _0x8e5972; if (_0x3c2952(0xc3e) === 'INmVQ') { const _0x20deaa = _0x1d2a6a[_0x3c2952(0x5c7)][_0x3c2952(0x564)](_0x384011 => !_0x384011['isOffline'] && _0x384011[_0x3c2952(0x874)] !== _0x3c2952(0xc0f)); if (_0x20deaa[_0x3c2952(0x2ab)] > _0x1d2a6a['displayedMessageCount']) { if (_0x3c2952(0xb01) === _0x3c2952(0x7b5)) _0x4520d2[_0x3c2952(0x9a0)] = _0x3c2952(0x1c1); else { let _0x42f01e = _0x7cbcb[_0x3c2952(0x20e)](_0x3c2952(0x1b8)); if (!_0x42f01e) { _0x42f01e = document[_0x3c2952(0x2fa)](_0x3c2952(0x21a)), _0x42f01e[_0x3c2952(0x724)] = _0x3c2952(0xc41), _0x42f01e[_0x3c2952(0x1ea)] = _0x3c2952(0x681), _0x42f01e[_0x3c2952(0x7be)]['width'] = _0x3c2952(0x2c5), _0x42f01e[_0x3c2952(0x7be)][_0x3c2952(0x347)] = _0x3c2952(0x416), _0x42f01e['style']['padding'] = _0x3c2952(0x49c), _0x42f01e[_0x3c2952(0x997)] = () => { const _0x2b6526 = _0x3c2952; if (_0x2b6526(0x988) === _0x2b6526(0x30b)) { if (!_0x5b863a) return; const _0x457f42 = _0xbd3e62['activeMeetingCharId'], _0x43700f = _0x55706d(_0x457f42); if (!_0x43700f) return; const _0x459a4c = _0x234b54(_0x55583a[_0x2b6526(0x94d)](_0x2b6526(0x7fc))['value']), _0x517e68 = _0x634a7a(_0x130073[_0x2b6526(0x94d)](_0x2b6526(0x655))['value']), _0x1cda64 = _0x2f4fc4(_0x4bf30b[_0x2b6526(0x94d)](_0x2b6526(0x1e9))['value']) / 0x64; _0x43700f['spriteTransform'] = { 'x': _0x459a4c, 'y': _0x517e68, 'scale': _0x1cda64 }; const _0x297a8a = _0x5a0769['getElementById']('galgame-sprite-container'), _0x2beeb7 = 0x50 * _0x1cda64; _0x297a8a[_0x2b6526(0x7be)][_0x2b6526(0x6fa)] = _0x2beeb7 + '%', _0x297a8a['style'][_0x2b6526(0x7f1)] = _0x2beeb7 + '%', _0x297a8a['style'][_0x2b6526(0x31a)] = _0x459a4c + '%', _0x297a8a[_0x2b6526(0x7be)][_0x2b6526(0xa3b)] = _0x517e68 + '%', _0x297a8a[_0x2b6526(0x7be)][_0x2b6526(0xb82)] = _0x2b6526(0x4ac); } else { const _0xfbb33b = _0x7cbcb, _0x385c9c = _0xfbb33b[_0x2b6526(0x227)], _0x50ede4 = _0xfbb33b['scrollTop']; _0x1d2a6a['displayedMessageCount'] += 0x64, _0x2784f3(), requestAnimationFrame(() => { const _0x3ca501 = _0xfbb33b['scrollHeight']; _0xfbb33b['scrollTop'] = _0x50ede4 + (_0x3ca501 - _0x385c9c); }); } }; if (_0x7cbcb[_0x3c2952(0x58a)]) { if (_0x3c2952(0x57c) === 'XInUy') { const _0x5f4250 = _0x495881[_0x3c2952(0x2fa)]('li'); _0x5f4250[_0x3c2952(0x1ea)] = 'member-selection-item', _0x5f4250['innerHTML'] = _0x3c2952(0x4c6) + _0x393566['id'] + _0x3c2952(0x4b0) + _0x173e57['id'] + _0x3c2952(0x228) + (_0x256e63[_0x3c2952(0x7a4)] || _0x291090) + _0x3c2952(0x9c2) + _0x404687['id'] + '\x22\x20class=\x22char-name\x22>' + _0x3c54aa[_0x3c2952(0x7e6)] + _0x3c2952(0x266), _0x2e3d67['appendChild'](_0x5f4250); } else _0x7cbcb['insertBefore'](_0x42f01e, _0x7cbcb[_0x3c2952(0x58a)]); } else { if (_0x3c2952(0x369) === _0x3c2952(0x20c)) { const _0x5e0cca = _0x2c13ad[_0x3c2952(0xbdf)]['files'][0x0]; if (!_0x5e0cca) return; const _0x296669 = _0x45d111['createObjectURL'](_0x5e0cca); _0x5a32df[_0x3c2952(0x94d)](_0x3c2952(0xa23))[_0x3c2952(0x7be)]['backgroundImage'] = _0x3c2952(0x80f) + _0x296669 + '\x27)'; } else _0x7cbcb[_0x3c2952(0xc15)](_0x42f01e); } } } } else { if (_0x3c2952(0x1e0) !== _0x3c2952(0xbeb)) { const _0x3e503a = _0x7cbcb['querySelector'](_0x3c2952(0x1b8)); if (_0x3e503a) _0x3e503a[_0x3c2952(0x8f0)](); } else { const _0x144d6c = _0x1ba232['abs'](_0x1b666a), _0x2ca7e2 = 0.4, _0x2c5c3f = _0x3c121a[_0x3c2952(0xc4e)](_0x144d6c, _0x2ca7e2) * 0x14; _0x2da3bc['style'][_0x3c2952(0xb82)] = _0x3c2952(0x219) + _0x2c5c3f + _0x3c2952(0x6cf); } } Array[_0x3c2952(0xc3b)](_0x7cbcb[_0x3c2952(0x7af)])['forEach'](_0x119071 => { const _0x3f6fc5 = _0x3c2952; !_0x119071[_0x3f6fc5(0xa47)]['contains'](_0x3f6fc5(0xbb7)) && _0x119071[_0x3f6fc5(0x8f0)](); }); const _0x14eb6f = _0x20deaa['slice'](-_0x1d2a6a[_0x3c2952(0x5da)]); _0x14eb6f[_0x3c2952(0x83e)](_0x50ea10 => { const _0x567768 = _0x3c2952, _0x377237 = _0x1d2a6a[_0x567768(0x5c7)]['indexOf'](_0x50ea10); _0x377237 > -0x1 && _0x4a73f8(_0x50ea10, _0x377237); }); if (_0x1d2a6a[_0x3c2952(0xa31)]) { let _0x126d4c = _0x7cbcb[_0x3c2952(0x20e)](_0x3c2952(0x8d1)); !_0x126d4c && (_0x3c2952(0x6a1) !== _0x3c2952(0x71f) ? (_0x126d4c = document[_0x3c2952(0x2fa)](_0x3c2952(0xaf1)), _0x126d4c[_0x3c2952(0x1ea)] = 'typing-indicator', _0x126d4c[_0x3c2952(0x724)] = _0x3c2952(0xa0b), document[_0x3c2952(0x94d)](_0x3c2952(0x5b2))[_0x3c2952(0xc15)](_0x126d4c)) : _0x2010bf(_0x3c2952(0x38a))['then'](_0x8a02e2 => { const _0x4bc1c8 = _0x3c2952; if (_0x8a02e2) { const _0x33d6b8 = _0x380d9a(_0x58843a[_0x4bc1c8(0xc2c)]); _0x33d6b8 && (delete _0x33d6b8[_0x4bc1c8(0x91c)], _0x2399db(), _0x28edc2(_0x33d6b8['id'], _0x4bc1c8(0x8fe)), _0xf367be(_0x4bc1c8(0x7ba)), _0x1b7f14(!![])); } })); } _0x14eb6f['length'] <= _0x1d2a6a[_0x3c2952(0x5da)] && setTimeout(() => { const _0x32a9eb = _0x3c2952; _0x7cbcb['scrollTop'] = _0x7cbcb[_0x32a9eb(0x227)]; }, 0x0); } else _0xf0f979['addEventListener'](_0x3c2952(0xc5e), () => { const _0x331165 = _0x3c2952; _0x4a00a1(_0x331165(0x50d)); }); } function _0x4a73f8(_0x4d5958, _0x320688) { const _0x2a2ece = _0x8e5972; if (_0x2a2ece(0x2e1) !== 'JjEwE') _0x386da2(_0x2a2ece(0x268) + _0x31dc4d['message']); else { const { role: _0x229584, content: _0x19be9d, displayUrl: _0xe3348e, image: _0x5eb612, senderId: _0x2f2d46 } = _0x4d5958, _0x3b21ef = document[_0x2a2ece(0x94d)](_0x2a2ece(0x663)), _0x356ddf = _0x19be9d && _0x19be9d['trim']()['startsWith']('<div') && _0x19be9d['trim']()[_0x2a2ece(0x37c)]('</div>'); if (_0x356ddf) { if (_0x2a2ece(0x718) !== _0x2a2ece(0xb4f)) { const _0x439fe0 = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); return _0x439fe0[_0x2a2ece(0x1ea)] = _0x2a2ece(0xa70), _0x439fe0[_0x2a2ece(0xaac)][_0x2a2ece(0xc28)] = _0x320688, _0x439fe0[_0x2a2ece(0x806)] = _0x19be9d, _0x3b21ef[_0x2a2ece(0xc15)](_0x439fe0), _0x439fe0; } else { _0x5870e6['error'](_0x2a2ece(0xc5f)); return; } } const _0x144ab0 = _0x229584 === _0x2a2ece(0xb29) ? 'ai' : _0x229584, _0x77d49f = _0x3f5192(), _0x534524 = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); _0x534524[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)](_0x2a2ece(0x3dc), _0x144ab0), _0x534524[_0x2a2ece(0xaac)]['historyIndex'] = _0x320688; const _0x2cd60b = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); _0x2cd60b[_0x2a2ece(0x1ea)] = _0x2a2ece(0xaad); let _0x1425e5 = '', _0x5a9ae7 = '', _0x5cd696 = null; if (_0x229584 === _0x2a2ece(0xadb)) { if ('eZkhZ' !== _0x2a2ece(0x310)) { const _0x2926ad = _0x43b50c(_0x1d2a6a[_0x2a2ece(0x5e4)]); _0x1425e5 = _0x2926ad['avatar'] || _0x43e6b0; const _0x5cad1e = _0x5964f7(_0x77d49f?.[_0x2a2ece(0x182)][0x0]); _0x5cad1e && (_0x5a9ae7 = _0x5cad1e[_0x2a2ece(0x727)] || ''); } else _0x448522[_0x2a2ece(0x94d)](_0x2a2ece(0x4e7))[_0x2a2ece(0x672)](_0x2a2ece(0xc5e), async () => { _0x18c316(_0x5e4daf, _0x2b1689, !![]); }); } else { if (_0x77d49f?.[_0x2a2ece(0x832)] === _0x2a2ece(0x5ac)) _0x5cd696 = _0x5964f7(_0x77d49f[_0x2a2ece(0x182)][0x0]); else _0x77d49f?.[_0x2a2ece(0x832)] === _0x2a2ece(0x8aa) && _0x2f2d46 && (_0x5cd696 = _0x5964f7(_0x2f2d46)); _0x1425e5 = _0x5cd696?.['avatar'] || _0x133533, _0x5a9ae7 = _0x5cd696?.[_0x2a2ece(0x783)] || ''; } const _0x3a7506 = _0x57a073(_0x1425e5, _0x5a9ae7); if (_0x229584 !== _0x2a2ece(0xadb) && _0x5cd696) { const _0x5123f4 = _0x3a7506[_0x2a2ece(0x20e)](_0x2a2ece(0x253)); _0xe5b0ea(_0x2a2ece(0xa03) + _0x5cd696['id'])[_0x2a2ece(0x1d2)](_0x4a0919 => { const _0x1e5604 = _0x2a2ece; if ('yBUkw' === 'hqZoI') _0x1bb01d = [..._0x101c3b, ..._0x3da9f7]; else { if (_0x4a0919) { if (_0x1e5604(0x70c) === 'IJZrH') { if (_0x2c3f3b[_0x1e5604(0x832)] === _0x1e5604(0xae6)) _0x31f99d['preventDefault'](); _0x1493d6(_0x2a75ac['id'], _0x4fbec6[_0x1e5604(0x7e6)]); } else _0x5123f4[_0x1e5604(0x802)] = URL[_0x1e5604(0x413)](_0x4a0919); } } }); } const _0x2f3144 = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); _0x2f3144[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)]('message', _0x144ab0); if (_0x77d49f?.[_0x2a2ece(0x832)] === _0x2a2ece(0x5ac)) { if (_0x2a2ece(0x758) === _0x2a2ece(0x51d)) { const _0x5f1fb9 = _0x19581f['transaction'](_0x412b6b, _0x2a2ece(0xb76)), _0x58549b = _0x5f1fb9[_0x2a2ece(0x926)](_0x8a13f9), _0x3d2eb6 = _0x58549b[_0x2a2ece(0x267)](); _0x3d2eb6[_0x2a2ece(0x33f)] = () => _0x5d52cf(_0x3d2eb6[_0x2a2ece(0xa75)]), _0x3d2eb6[_0x2a2ece(0x2b0)] = () => _0x46d680(_0x3d2eb6['error']); } else { const _0x37d5b7 = _0x77d49f[_0x2a2ece(0x182)][0x0]; _0x2f3144['classList']['add'](_0x2a2ece(0x4d3) + _0x37d5b7); } } if (_0x4d5958[_0x2a2ece(0x651)]) { const _0x556bfd = document[_0x2a2ece(0x2fa)]('div'); _0x556bfd['className'] = _0x2a2ece(0x23e), _0x556bfd['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>' + _0x4d5958['quotedMessage'][_0x2a2ece(0xa79)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>' + _0x4d5958['quotedMessage']['content'] + '</div>\x0a\x20\x20\x20\x20\x20\x20', _0x2f3144[_0x2a2ece(0xc15)](_0x556bfd); } if (_0xe3348e) { if (_0x2a2ece(0x4f3) !== _0x2a2ece(0xb08)) _0x2f3144[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)]('sticker'), _0x2f3144[_0x2a2ece(0x806)] += _0x2a2ece(0x73f) + _0xe3348e + _0x2a2ece(0x273); else { const _0x5ca3a7 = _0x128381['split'](/:\s|：\s/); if (_0x5ca3a7['length'] === 0x2) { const _0x39c1c4 = _0x5ca3a7[0x0][_0x2a2ece(0x667)](), _0x582255 = _0x5ca3a7[0x1][_0x2a2ece(0x667)](), _0x1969be = { '歌名': _0x2a2ece(0x2fe), '艺术家': '歌手', '专辑': '专辑' }; _0x1969be[_0x39c1c4] && (_0x87c802[_0x1969be[_0x39c1c4]] = _0x582255); } } } else { if (_0x4d5958['image'] || _0x4d5958['imageId']) { _0x2f3144[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)]('image'); const _0x5de79d = document[_0x2a2ece(0x2fa)]('img'); _0x5de79d[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)](_0x2a2ece(0x6fc)), _0x2f3144[_0x2a2ece(0xc15)](_0x5de79d); if (_0x4d5958[_0x2a2ece(0x7dc)]) { if ('miFqb' === _0x2a2ece(0x9ae)) { _0x354558[_0x2a2ece(0x1bc)] = _0x165476[_0x2a2ece(0x1bc)][_0x2a2ece(0x564)](_0xc57b13 => _0xc57b13['id'] !== _0x70f300), _0x2a7c0b[_0x2a2ece(0x816)][_0x2a2ece(0x83e)](_0x2c81bf => { const _0x5852d6 = _0x2a2ece; _0x2c81bf[_0x5852d6(0x832)] === _0x5852d6(0x8aa) && (_0x2c81bf['participantIds'] = _0x2c81bf[_0x5852d6(0x182)][_0x5852d6(0x564)](_0x519bf3 => _0x519bf3 !== _0x262551)); }); const _0x4e2df7 = _0x2d4ca7[_0x2a2ece(0x816)]['find'](_0x44987b => _0x44987b[_0x2a2ece(0x832)] === 'private' && _0x44987b[_0x2a2ece(0x182)][_0x2a2ece(0x7d3)](_0x53382a)); _0x4e2df7 && _0x46410c(_0x4e2df7['id']), _0x251a8c[_0x2a2ece(0x816)] = _0x436e3b[_0x2a2ece(0x816)][_0x2a2ece(0x564)](_0x417600 => _0x417600[_0x2a2ece(0x832)] !== _0x2a2ece(0x8aa) || _0x417600[_0x2a2ece(0x182)]['length'] > 0x1), _0x26e624(), _0x2967c4(); } else _0x5de79d['src'] = _0x4d5958[_0x2a2ece(0x7dc)]; } else _0x5de79d['src'] = _0x2a2ece(0x81e), _0xe5b0ea(_0x4d5958[_0x2a2ece(0xbf0)])[_0x2a2ece(0x1d2)](_0x723bb4 => { const _0x1dd093 = _0x2a2ece; if (_0x723bb4) _0x5de79d[_0x1dd093(0x802)] = URL[_0x1dd093(0x413)](_0x723bb4); else _0x5de79d[_0x1dd093(0x74d)] = '图片加载失败'; })[_0x2a2ece(0x88c)](() => _0x5de79d[_0x2a2ece(0x74d)] = _0x2a2ece(0x67b)); _0x19be9d && (_0x2f3144[_0x2a2ece(0x806)] += _0x2a2ece(0xb7f) + _0x19be9d + '</p>'); } else { if (_0x4d5958[_0x2a2ece(0x832)] === _0x2a2ece(0xc3a)) { _0x2f3144[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)](_0x2a2ece(0xc3a)); const _0x205192 = _0x4d5958['role'] === _0x2a2ece(0xadb) ? _0x43b50c(_0x1d2a6a[_0x2a2ece(0x5e4)]) : _0x5964f7(_0x4d5958['senderId']), _0x494f59 = _0x4d5958[_0x2a2ece(0x790)] === _0x43b50c(_0x1d2a6a[_0x2a2ece(0x5e4)])['id'] ? _0x43b50c(_0x1d2a6a[_0x2a2ece(0x5e4)]) : _0x5964f7(_0x4d5958[_0x2a2ece(0x790)]), _0x3b9b35 = _0x205192?.[_0x2a2ece(0x7e6)] ? _0x205192[_0x2a2ece(0x7e6)] + '的转账' : '转账', _0x37ddf6 = _0x494f59?.[_0x2a2ece(0x7e6)] ? '转给\x20' + _0x494f59['name'] : '转账'; _0x2f3144[_0x2a2ece(0x806)] += _0x2a2ece(0x9e4) + _0x3b9b35 + _0x2a2ece(0x536) + _0x4d5958[_0x2a2ece(0x897)][_0x2a2ece(0x3a8)](0x2) + _0x2a2ece(0x4c2) + _0x37ddf6 + _0x2a2ece(0x6df); } else { if (_0x4d5958[_0x2a2ece(0x832)] === 'listen-together-invite') { _0x2f3144['classList'][_0x2a2ece(0x5ee)](_0x2a2ece(0x6d1)); const _0x2c3ddf = document['createElement'](_0x2a2ece(0xaf1)); _0x2c3ddf['className'] = _0x2a2ece(0x44f); const _0x8afa70 = _0x4d5958[_0x2a2ece(0x874)] === 'user' ? _0x43b50c(_0x1d2a6a[_0x2a2ece(0x5e4)])[_0x2a2ece(0x7e6)] || '你' : _0x5964f7(_0x4d5958[_0x2a2ece(0xa71)])?.[_0x2a2ece(0x7e6)] || 'TA', _0x434fc7 = _0x2a2ece(0x31b) + _0x4d5958[_0x2a2ece(0x83c)], _0x503b51 = _0x2a2ece(0x5ed) + _0x434fc7 + _0x2a2ece(0x721) + _0x133533 + '\x22>'; _0x4d5958[_0x2a2ece(0x965)] ? _0x2c3ddf['innerHTML'] = '<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>' + _0x503b51 + _0x2a2ece(0x41f) + _0x4d5958[_0x2a2ece(0x4d2)] + _0x2a2ece(0x1de) + _0x4d5958['artist'] + _0x2a2ece(0x770) : _0x2c3ddf[_0x2a2ece(0x806)] = _0x2a2ece(0x9d4) + _0x8afa70 + _0x2a2ece(0xa85) + _0x503b51 + '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>' + _0x4d5958[_0x2a2ece(0x4d2)] + _0x2a2ece(0x1de) + _0x4d5958[_0x2a2ece(0xa2c)] + _0x2a2ece(0xa1a) + _0x4d5958[_0x2a2ece(0x452)] + _0x2a2ece(0xbe5), _0x2f3144[_0x2a2ece(0xc15)](_0x2c3ddf), _0x4d5958[_0x2a2ece(0xb05)] && setTimeout(() => { const _0x10bc9d = _0x2a2ece; if (_0x10bc9d(0x328) !== 'fWrZK') _0xe5b0ea(_0x4d5958[_0x10bc9d(0xb05)])['then'](_0x2e81a4 => { const _0x1159e0 = _0x10bc9d; if (_0x1159e0(0x881) !== _0x1159e0(0x881)) _0x15054b(_0x1b05d8); else { const _0x4e01c6 = document['getElementById'](_0x434fc7); if (_0x4e01c6 && _0x2e81a4) _0x4e01c6[_0x1159e0(0x802)] = URL[_0x1159e0(0x413)](_0x2e81a4); } }); else { if (_0x48a8c2) _0x328841(_0x122557); } }, 0x0); } else { if (_0x4d5958[_0x2a2ece(0x832)] === _0x2a2ece(0x6d1) && _0x4d5958[_0x2a2ece(0x4d2)]) { if (_0x2a2ece(0x8f4) !== 'YBjgl') { _0x2f3144[_0x2a2ece(0xa47)]['add'](_0x2a2ece(0x6d1)); const _0x3d68cf = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); _0x3d68cf[_0x2a2ece(0x1ea)] = 'music-share-card', _0x3d68cf['dataset'][_0x2a2ece(0x197)] = _0x2a2ece(0xa0c) + _0x4d5958[_0x2a2ece(0x83c)]; const _0x18aee6 = _0x2a2ece(0x31b) + _0x4d5958[_0x2a2ece(0x83c)]; let _0x1c54c3 = _0x2a2ece(0x73f) + _0x133533 + _0x2a2ece(0x71e) + _0x18aee6 + _0x2a2ece(0x5fd); _0x3d68cf[_0x2a2ece(0x806)] = _0x2a2ece(0x9aa) + _0x1c54c3 + _0x2a2ece(0x418) + _0x4d5958[_0x2a2ece(0x4d2)] + _0x2a2ece(0xa8c) + _0x4d5958['artist'] + _0x2a2ece(0x690) + (_0x4d5958[_0x2a2ece(0x324)] ? '▶' : '⚠') + _0x2a2ece(0x2d6), _0x2f3144['appendChild'](_0x3d68cf), setTimeout(() => { const _0x3c3b87 = _0x2a2ece, _0x23cfda = document['getElementById'](_0x18aee6); if (!_0x23cfda) return; if (_0x4d5958[_0x3c3b87(0xb05)]) _0x3c3b87(0x288) === 'OuwOy' ? _0xe5b0ea(_0x4d5958[_0x3c3b87(0xb05)])['then'](_0x1705bf => { const _0x4b20fd = _0x3c3b87; if (_0x4b20fd(0x1cb) === _0x4b20fd(0x454)) _0x5438cf['name'] !== _0x4b20fd(0x30a) && (_0x57d388[_0x4b20fd(0x1be)](_0x4b20fd(0x467), _0x2c32ac), _0x2a27cf({ 'role': _0x4b20fd(0xb29), 'content': _0x4b20fd(0x26a) + _0x4ab0d3[_0x4b20fd(0x6da)] }, _0x469cf3[_0x4b20fd(0x5c7)][_0x4b20fd(0x2ab)] - 0x1)); else { if (_0x1705bf) _0x23cfda[_0x4b20fd(0x802)] = URL['createObjectURL'](_0x1705bf); } }) : _0x3c3dbe(_0x3c3b87(0x4bf)); else _0x4d5958[_0x3c3b87(0x8ae)] && (_0x3c3b87(0x785) !== _0x3c3b87(0x785) ? _0x54f436() : _0x23cfda[_0x3c3b87(0x802)] = _0x4d5958[_0x3c3b87(0x8ae)]); }, 0x0), _0x4d5958['playableUrl'] && _0x3d68cf[_0x2a2ece(0x672)](_0x2a2ece(0xc5e), function () { const _0x22c0b0 = _0x2a2ece; if (_0x22c0b0(0x5f5) !== 'rEvVc') _0x42cfa2[_0x22c0b0(0xbb5)] = { 'response_mime_type': _0x22c0b0(0x37d) }; else { const _0x4f8d82 = document[_0x22c0b0(0x94d)](_0x22c0b0(0x883)), _0xfb373 = document[_0x22c0b0(0x599)](_0x22c0b0(0x4a3)), _0x33abfc = this[_0x22c0b0(0x20e)](_0x22c0b0(0x8a5)), _0x4c8a96 = _0x4f8d82[_0x22c0b0(0x802)][_0x22c0b0(0x7d3)](_0x4d5958[_0x22c0b0(0x324)]) && !_0x4f8d82['paused']; _0xfb373[_0x22c0b0(0x83e)](_0x1c8118 => { const _0xe46bea = _0x22c0b0; _0xe46bea(0x964) !== _0xe46bea(0x964) ? _0x52227b['worldBooks'] = _0x1e6907['linkedWorldBookIds'][_0xe46bea(0x719)](_0x4309ba => _0x19c613['worldBooks'][_0xe46bea(0x2ec)](_0x3266c1 => _0x3266c1['id'] === _0x4309ba))['filter'](_0x3fa01e)[_0xe46bea(0x719)](_0x2eab2b => ({ 'name': _0x2eab2b[_0xe46bea(0x7e6)], 'content': _0x2eab2b[_0xe46bea(0x415)], 'categoryId': _0x2eab2b[_0xe46bea(0x9a0)] || _0xe46bea(0x1c1) })) : _0x1c8118 !== _0x33abfc && (_0xe46bea(0x351) !== 'bJxNC' ? _0x49cf47[_0xe46bea(0x463)][_0xe46bea(0x8b0)]({ 'id': _0x5a0e1c['id'] || _0xe46bea(0xba5) + _0x3fafe3[_0xe46bea(0x4b7)](), 'name': _0x5a7403[_0xe46bea(0x7e6)] }) : _0x1c8118['textContent'] = '▶'); }), !_0x4c8a96 && document[_0x22c0b0(0x94d)]('unified-audio-player')[_0x22c0b0(0x48b)](), _0x4c8a96 ? _0x22c0b0(0x39f) === _0x22c0b0(0x19c) ? (_0x1deece[_0x22c0b0(0x672)](_0x22c0b0(0x869), _0x39e9b4), _0x16149a[_0x22c0b0(0x672)]('touchstart', _0x36e25c, { 'passive': ![] }), _0x56904c['addEventListener'](_0x22c0b0(0x887), _0x1e1355 => _0x1e1355[_0x22c0b0(0x506)]())) : (_0x4f8d82[_0x22c0b0(0x48b)](), _0x33abfc[_0x22c0b0(0x724)] = '▶') : (_0x4f8d82[_0x22c0b0(0x802)] = _0x4d5958[_0x22c0b0(0x324)], _0x4f8d82[_0x22c0b0(0x8d8)](), _0x33abfc[_0x22c0b0(0x724)] = '❚❚'); } }); } else _0x2a5c57[_0x2a2ece(0x724)] = _0xb1e3a0[_0x2a2ece(0x443)], _0xc97c50['textContent'] = _0x12c711[_0x2a2ece(0xa2c)], _0x4e63e7[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)](_0x2a2ece(0x4ad)), _0x1d9018[_0x2a2ece(0x7be)][_0x2a2ece(0x318)](_0x2a2ece(0x292), _0x2a2ece(0x9bf) + _0x5c654d[_0x2a2ece(0x9a7)] + ')'); } else { if (_0x19be9d) { if (_0x2a2ece(0x92f) !== _0x2a2ece(0x92f)) { if (_0x4cc595[_0x2a2ece(0x832)] === _0x2a2ece(0x5ac)) { const _0x4a9fa5 = _0x540d6a(_0xc95936[_0x2a2ece(0x182)][0x0]); return _0x4a9fa5 ? _0x28dfc1(_0x2a2ece(0xa03) + _0x4a9fa5['id']) : _0x9af473[_0x2a2ece(0xc56)](null); } else return _0x56817e('group_avatar_' + _0x28b19c['id']); } else { const _0x3e556a = document[_0x2a2ece(0x2fa)]('p'); _0x3e556a[_0x2a2ece(0x806)] = _0x19be9d, _0x3e556a['style'][_0x2a2ece(0x347)] = '0', _0x2f3144[_0x2a2ece(0xc15)](_0x3e556a); } } } } } } } _0x144ab0 === _0x2a2ece(0xadb) ? _0x2a2ece(0x86f) === _0x2a2ece(0x86f) ? (_0x2cd60b[_0x2a2ece(0xc15)](_0x2f3144), _0x2cd60b['appendChild'](_0x3a7506)) : (_0x26f05a['classList']['remove']('active'), _0xf755c9[_0x2a2ece(0xa47)][_0x2a2ece(0x5ee)](_0x2a2ece(0xbb6)), _0x46e34f()) : (_0x2cd60b[_0x2a2ece(0xc15)](_0x3a7506), _0x2cd60b[_0x2a2ece(0xc15)](_0x2f3144)); _0x534524[_0x2a2ece(0xc15)](_0x2cd60b); const _0x5361f1 = document[_0x2a2ece(0x2fa)](_0x2a2ece(0xaf1)); return _0x5361f1[_0x2a2ece(0x1ea)] = _0x2a2ece(0x83c), _0x5361f1['textContent'] = _0xa3ccf9(_0x4d5958[_0x2a2ece(0x83c)]), _0x534524[_0x2a2ece(0xc15)](_0x5361f1), _0x3b21ef[_0x2a2ece(0xc15)](_0x534524), _0x534524; } } let _0x5e2320 = null; function _0x2ecc8f(_0x315540) { const _0x3d64f6 = _0x8e5972; if (window[_0x3d64f6(0x867)]()[_0x3d64f6(0x8ec)]() || _0x315540[_0x3d64f6(0x21a)] !== 0x0) return; const _0xc3df1e = _0x315540[_0x3d64f6(0xbdf)][_0x3d64f6(0x508)](_0x3d64f6(0x9ad)), _0x50e064 = _0x315540[_0x3d64f6(0xbdf)]['closest'](_0x3d64f6(0xc4f)); if (!_0xc3df1e || _0x50e064) return; const _0x43b2cd = parseInt(_0xc3df1e[_0x3d64f6(0xaac)][_0x3d64f6(0xc28)], 0xa); if (isNaN(_0x43b2cd)) return; const _0x2c0058 = () => { const _0x203acf = _0x3d64f6; 'nlFKE' === _0x203acf(0xb55) ? (_0xe25d73[_0x203acf(0x41a)] = _0x25e7c3, _0x103109[_0x203acf(0xa47)][_0x203acf(0x8f0)]('show')) : (clearTimeout(_0x5e2320), document[_0x203acf(0x6a2)](_0x203acf(0x731), _0x2c0058), document[_0x203acf(0x6a2)]('touchend', _0x2c0058), document[_0x203acf(0x6a2)](_0x203acf(0xa3f), _0x2c0058), document['removeEventListener']('touchmove', _0x2c0058)); }, _0x2e7408 = () => { const _0x366f76 = _0x3d64f6; if (_0x366f76(0xbff) === 'CjZur') _0x2c0058(), _0x5e2320 = setTimeout(() => { _0x5be91d(_0x43b2cd); }, 0x258), document[_0x366f76(0x672)]('mouseup', _0x2c0058), document[_0x366f76(0x672)]('touchend', _0x2c0058), document[_0x366f76(0x672)](_0x366f76(0xa3f), _0x2c0058), document[_0x366f76(0x672)](_0x366f76(0x51e), _0x2c0058); else { const _0x586e06 = _0x1f1b44[_0x366f76(0x20e)]('.avatar'); _0x37b09d(_0x366f76(0xa03) + _0x217fe7['id'])[_0x366f76(0x1d2)](_0x26851c => { const _0x23b4d5 = _0x366f76; _0x26851c && (_0x586e06['src'] = _0x15eae4[_0x23b4d5(0x413)](_0x26851c)); }); } }; _0x2e7408(); } const _0x1d6975 = document['getElementById'](_0x8e5972(0x663)); _0x1d6975 && (_0x1d6975[_0x8e5972(0x672)]('mousedown', _0x2ecc8f), _0x1d6975[_0x8e5972(0x672)]('touchstart', _0x2ecc8f, { 'passive': ![] }), _0x1d6975['addEventListener']('contextmenu', _0x366387 => _0x366387['preventDefault']())); function _0x115dbd() { const _0x5415b2 = _0x8e5972; if (_0x5415b2(0x3ce) === _0x5415b2(0xa86)) _0x35ee98 ? _0x3557bd(_0x2c86a8) : _0x561214(new _0x221e26(_0x5415b2(0x588))); else { const _0x2a294 = _0x3f5192(); if (!_0x2a294) { _0x2074ae['textContent'] = _0x5415b2(0x323); return; } if (_0x2a294[_0x5415b2(0x832)] === _0x5415b2(0x5ac)) { if (_0x5415b2(0x631) === _0x5415b2(0x631)) { const _0x8b0d42 = _0x5964f7(_0x2a294[_0x5415b2(0x182)][0x0]); _0x2074ae[_0x5415b2(0x724)] = _0x8b0d42 ? _0x8b0d42[_0x5415b2(0x7e6)] : _0x5415b2(0xa1f); } else _0x368668[_0x5415b2(0x7be)]['top'] = _0x143349[_0x5415b2(0xa3b)] + '%', _0x2ec3e6['style']['left'] = _0x36b223[_0x5415b2(0x31a)] + '%'; } else _0x2074ae[_0x5415b2(0x724)] = _0x2a294['name'] || _0x5415b2(0xb66) + _0x2a294[_0x5415b2(0x182)]['length'] + ')'; } } function _0x2f0dba(_0x353013) { const _0x155f19 = _0x8e5972, _0x1546d1 = document[_0x155f19(0x20e)](_0x155f19(0xc4a)); _0x1546d1 && _0x1546d1['remove'](); const _0x361ccb = document['querySelector'](_0x155f19(0x5a8)); if (_0x361ccb && (_0x361ccb['id'] === _0x155f19(0x37b) || _0x361ccb['id'] === 'chat-screen')) _0x155f19(0x807) !== _0x155f19(0x7b6) ? _0x4379f2() : (_0xc8196(![]), _0x58afaa[_0x155f19(0x1be)](_0x155f19(0xbc6), _0x49b73f), _0xcd2986(_0x155f19(0x48e) + _0x35eb4d[_0x155f19(0x6da)])); else { if ('kGEJz' === _0x155f19(0x91b)) throw new _0x171b18(_0x155f19(0x4be)); else { const _0x5f2c30 = document['querySelectorAll'](_0x155f19(0x8d1)); _0x5f2c30[_0x155f19(0x83e)](_0x5658b0 => _0x5658b0[_0x155f19(0x8f0)]()); } } } function _0x1eadbc() { const _0x295e04 = _0x8e5972; if (_0x295e04(0x50c) === _0x295e04(0x23d)) { const _0x2e7a88 = _0x2568cc['value'][_0x295e04(0x667)](); if (!_0x2e7a88) { _0x4821f2(_0x295e04(0x95b)); return; } const _0x5d7d96 = _0x19040b[_0x295e04(0xc3b)](_0x411ec5[_0x295e04(0x599)](_0x295e04(0x518)))['map'](_0x1baeea => _0x1baeea['dataset']['id']); if (_0x5d7d96[_0x295e04(0x2ab)] < 0x2) { _0x16c008('群聊至少需要2名成员。'); return; } const _0x1eb95c = { 'id': _0x295e04(0x49b) + _0x503f27[_0x295e04(0x4b7)](), 'type': _0x295e04(0x8aa), 'name': _0x2e7a88, 'participantIds': _0x5d7d96 }; _0x3b5b96[_0x295e04(0x816)]['push'](_0x1eb95c), _0x587e4a[_0x295e04(0x5e4)] = _0x1eb95c['id'], _0x48c7e6(), _0x427dcc(), _0x19205b(), _0x3493a7(), _0x4aa85c('群聊“' + _0x2e7a88 + '”已创建！'), _0x37aa44(_0x295e04(0xa68), _0x295e04(0x5fa)); } else _0x1d2a6a['isGenerating'] && _0x1d2a6a[_0x295e04(0x943)] && (console[_0x295e04(0x668)](_0x295e04(0x494)), _0x1d2a6a[_0x295e04(0x943)][_0x295e04(0xbc2)]('User\x20cancelled'), _0x1d2a6a[_0x295e04(0x943)] = null), _0x1d2a6a['isGenerating'] = ![], _0x2f0dba(![]); } function _0x3f5192() { const _0x438ae4 = _0x8e5972; if (_0x438ae4(0x1dc) !== 'OEBte') { if (_0x30e05c[_0x438ae4(0x832)] === _0x438ae4(0xae6)) _0x26d1b6[_0x438ae4(0x506)](); _0x235fce(_0x28969d(_0x2a5611, 0xa), _0x5e9df1); } else return _0x1d2a6a[_0x438ae4(0x816)][_0x438ae4(0x2ec)](_0x44bff8 => _0x44bff8['id'] === _0x1d2a6a[_0x438ae4(0x5e4)]); } function _0x5964f7(_0x246391) { const _0x95d9ae = _0x8e5972; return _0x1d2a6a[_0x95d9ae(0x1bc)][_0x95d9ae(0x2ec)](_0x31c42f => _0x31c42f['id'] === _0x246391); } function _0x3cce89(_0x456d96) { const _0x46059a = _0x8e5972; _0x1d2a6a[_0x46059a(0x1bc)] = _0x1d2a6a['characters'][_0x46059a(0x564)](_0x422ecb => _0x422ecb['id'] !== _0x456d96), _0x1d2a6a[_0x46059a(0x816)]['forEach'](_0x158deb => { const _0x109fe7 = _0x46059a; _0x158deb['type'] === _0x109fe7(0x8aa) && (_0x158deb[_0x109fe7(0x182)] = _0x158deb[_0x109fe7(0x182)]['filter'](_0x14484f => _0x14484f !== _0x456d96)); }); const _0x1b6b03 = _0x1d2a6a[_0x46059a(0x816)][_0x46059a(0x2ec)](_0x12057c => _0x12057c[_0x46059a(0x832)] === _0x46059a(0x5ac) && _0x12057c['participantIds'][_0x46059a(0x7d3)](_0x456d96)); _0x1b6b03 && _0x23c85a(_0x1b6b03['id']), _0x1d2a6a[_0x46059a(0x816)] = _0x1d2a6a[_0x46059a(0x816)]['filter'](_0xfec038 => _0xfec038['type'] !== _0x46059a(0x8aa) || _0xfec038[_0x46059a(0x182)][_0x46059a(0x2ab)] > 0x1), _0x4b4b09(), _0x540cfc(); } function _0x23c85a(_0xee819f) { const _0x1d3bb9 = _0x8e5972; _0x1d2a6a['chats'] = _0x1d2a6a['chats'][_0x1d3bb9(0x564)](_0x26132a => _0x26132a['id'] !== _0xee819f); try { localStorage[_0x1d3bb9(0x34a)]('chatHistory_' + _0xee819f); } catch (_0x241d93) { console[_0x1d3bb9(0x1be)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0xee819f, _0x241d93); } _0x1d2a6a[_0x1d3bb9(0x5e4)] === _0xee819f && (_0x1d2a6a['activeChatId'] = _0x1d2a6a[_0x1d3bb9(0x816)][0x0]?.['id'] || null, _0x32d938(_0x1d2a6a['activeChatId'])), _0x4b4b09(); } async function _0x32d938(_0x1a4810) { const _0x1ae966 = _0x8e5972; if ('YwrDJ' === _0x1ae966(0x2e8)) { const _0x4b2542 = _0x37b833['createElement'](_0x1ae966(0xaf1)); _0x4b2542[_0x1ae966(0x1ea)] = _0x1ae966(0x849), _0x4b2542[_0x1ae966(0x7be)][_0x1ae966(0x729)] = _0x1ae966(0x75c), _0x4b2542[_0x1ae966(0x7be)][_0x1ae966(0x73d)] = 'stretch', _0x4b2542['style'][_0x1ae966(0x401)] = _0x1ae966(0xc2b), _0x4b2542['style'][_0x1ae966(0xb74)] = '0'; const _0xebe87a = _0x27e146[_0x5b91ea['category']] || _0x329aa5['默认'], _0x33232e = _0x1ae966(0x687) + _0xebe87a + _0x1ae966(0x43f), _0x2c970a = _0x1ae966(0xbee) + _0x33232e + _0x1ae966(0xad7) + _0x2201eb[_0x1ae966(0x29f)] + '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>' + (_0x4527f7[_0x1ae966(0x4b5)] || _0x1ae966(0xa12)) + _0x1ae966(0x476) + (_0x47805c[_0x1ae966(0x897)] || 0x0)[_0x1ae966(0x3a8)](0x2) + _0x1ae966(0x9b8); let _0x156e34 = ''; if (_0x258708['review'] && _0x358578[_0x1ae966(0x97d)][_0x1ae966(0xbec)]) { const _0x105cd3 = _0x5767fc(_0x56305b[_0x1ae966(0x97d)]['charId']); _0x105cd3 && (_0x156e34 = _0x1ae966(0x8c7) + _0x105cd3[_0x1ae966(0x7a4)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x105cd3[_0x1ae966(0x7e6)] + _0x1ae966(0x18b) + _0x2927ca[_0x1ae966(0x97d)][_0x1ae966(0x8df)] + _0x1ae966(0x770)); } _0x4b2542[_0x1ae966(0x806)] = _0x2c970a + _0x156e34, _0x2870d4[_0x1ae966(0xc15)](_0x4b2542); } else { _0x1d2a6a[_0x1ae966(0x5e4)] !== _0x1a4810 && (_0x1eadbc(), _0x1d2a6a[_0x1ae966(0x5da)] = 0x64); if (!_0x1a4810) { _0x1d2a6a[_0x1ae966(0x5e4)] = null, _0x4b4b09(), _0x525e66(![]), document[_0x1ae966(0x94d)](_0x1ae966(0x5b2))['style'][_0x1ae966(0x4d7)] = ''; return; } _0x1d2a6a[_0x1ae966(0x5e4)] = _0x1a4810, _0x4b4b09(), _0x115dbd(), _0x7cbcb[_0x1ae966(0x806)] = '', _0xea506e(!![], _0x1ae966(0xb2b)), setTimeout(async () => { const _0x7d6a43 = _0x1ae966; try { if (_0x7d6a43(0x1d3) !== 'cUQFn') { _0x23301c(); const _0x12b4c7 = _0x3f5192(), _0x2b1791 = document[_0x7d6a43(0x94d)](_0x7d6a43(0x5b2)); let _0x7aa2f6 = null; if (_0x12b4c7) { if (_0x7d6a43(0x670) === _0x7d6a43(0xa3d)) { const _0x1bcdaf = _0x91c1f1[_0x7d6a43(0xa71)] || _0x24195e?.[_0x7d6a43(0x182)][0x0], _0x1dc330 = _0x2edc6e(_0x1bcdaf); _0x4bbef2 = _0x1dc330 ? _0x1dc330[_0x7d6a43(0x7e6)] : '角色'; } else { if (_0x12b4c7[_0x7d6a43(0x832)] === _0x7d6a43(0x5ac)) { if (_0x7d6a43(0x759) !== 'PWMVW') { const _0x55cd2e = _0x12b4c7[_0x7d6a43(0x182)][0x0]; _0x4f78a0(_0x55cd2e), _0x7aa2f6 = await _0xe5b0ea(_0x7d6a43(0xb3d) + _0x55cd2e); } else _0x4d2630 = _0x7d6a43(0xc09); } else 'slBVN' === _0x7d6a43(0x4d1) ? _0x7aa2f6 = await _0xe5b0ea(_0x7d6a43(0x58f) + _0x12b4c7['id']) : (_0xa7117d[_0x7d6a43(0x596)](), _0x3476a0[_0x7d6a43(0xa47)]['toggle'](_0x7d6a43(0x5a2)), _0x1a4ffc['classList']['toggle']('expanded')); if (_0x7aa2f6) _0x2b1791[_0x7d6a43(0x7be)]['backgroundImage'] = _0x7d6a43(0x80f) + URL[_0x7d6a43(0x413)](_0x7aa2f6) + '\x27)', _0x2b1791[_0x7d6a43(0x7be)][_0x7d6a43(0x947)] = _0x7d6a43(0x9a7), _0x2b1791[_0x7d6a43(0x7be)][_0x7d6a43(0xbed)] = _0x7d6a43(0x2aa); else { if (_0x7d6a43(0x1b2) === _0x7d6a43(0x1b2)) _0x2b1791['style'][_0x7d6a43(0x4d7)] = ''; else { if (!_0x3137e0) return; const _0x314819 = _0x587460[_0x7d6a43(0xa9b)] ? _0x29d431[_0x7d6a43(0xa9b)][0x0][_0x7d6a43(0x854)] : _0x4ac26a[_0x7d6a43(0x854)]; _0xa769b1 = _0x314819 - _0x390bb1; if (_0x4a058f < 0x0) { const _0x309c6f = _0x2c07d2[_0x7d6a43(0x1db)](_0x454403), _0x3422cc = 0.4, _0x93744b = _0x1de2cd['pow'](_0x309c6f, _0x3422cc) * 0x14; _0x402fcc[_0x7d6a43(0x7be)]['transform'] = _0x7d6a43(0x219) + _0x93744b + _0x7d6a43(0x6cf); } } } } } _0x2784f3(); } else { let _0x3428c7 = 0x0, _0xb1d844 = 0x0, _0x36aa4c = 0x0; if (_0x11249a[_0x7d6a43(0x2ab)] == 0x4) _0x3428c7 = '0x' + _0x505ff6[0x1] + _0x1659ef[0x1], _0xb1d844 = '0x' + _0x22cca1[0x2] + _0x4cfc74[0x2], _0x36aa4c = '0x' + _0x6592ac[0x3] + _0x516076[0x3]; else _0x8e76cf[_0x7d6a43(0x2ab)] == 0x7 && (_0x3428c7 = '0x' + _0x55e459[0x1] + _0x282522[0x2], _0xb1d844 = '0x' + _0x24e46d[0x3] + _0x3c9677[0x4], _0x36aa4c = '0x' + _0x178594[0x5] + _0x1c5817[0x6]); _0x3428c7 /= 0xff, _0xb1d844 /= 0xff, _0x36aa4c /= 0xff; let _0x47bb69 = _0x55804a[_0x7d6a43(0x3c8)](_0x3428c7, _0xb1d844, _0x36aa4c), _0x46e9e9 = _0x35fd37[_0x7d6a43(0x1aa)](_0x3428c7, _0xb1d844, _0x36aa4c), _0x70dda6 = _0x46e9e9 - _0x47bb69, _0x27d0a5 = 0x0, _0x5c9373 = 0x0, _0x4e02f9 = 0x0; if (_0x70dda6 == 0x0) _0x27d0a5 = 0x0; else { if (_0x46e9e9 == _0x3428c7) _0x27d0a5 = (_0xb1d844 - _0x36aa4c) / _0x70dda6 % 0x6; else { if (_0x46e9e9 == _0xb1d844) _0x27d0a5 = (_0x36aa4c - _0x3428c7) / _0x70dda6 + 0x2; else _0x27d0a5 = (_0x3428c7 - _0xb1d844) / _0x70dda6 + 0x4; } } _0x27d0a5 = _0x55bb96['round'](_0x27d0a5 * 0x3c); if (_0x27d0a5 < 0x0) _0x27d0a5 += 0x168; return _0x4e02f9 = (_0x46e9e9 + _0x47bb69) / 0x2, _0x5c9373 = _0x70dda6 == 0x0 ? 0x0 : _0x70dda6 / (0x1 - _0x41e241[_0x7d6a43(0x1db)](0x2 * _0x4e02f9 - 0x1)), _0x5c9373 = +(_0x5c9373 * 0x64)[_0x7d6a43(0x3a8)](0x1), _0x4e02f9 = +(_0x4e02f9 * 0x64)[_0x7d6a43(0x3a8)](0x1), { 'h': _0x27d0a5, 's': _0x5c9373, 'l': _0x4e02f9 }; } } catch (_0x3b3692) { _0x7d6a43(0x2e2) === _0x7d6a43(0x9c1) ? _0x95cde3 += _0x7d6a43(0x59f) + _0x3377ce[_0x7d6a43(0x1a4)] + _0x7d6a43(0x3f8) + _0x1fcbf3['item_name'] + _0x7d6a43(0x652) : (console['error'](_0x7d6a43(0x987), _0x3b3692), _0x5294eb(_0x7d6a43(0xba8) + _0x3b3692['message'])); } finally { 'LWPKK' === 'LWPKK' ? _0xea506e(![]) : (!_0x292b87 && (_0x2651a9 = _0x19a5ba[_0x7d6a43(0x7a4)] || _0x173602), _0x38f637 = _0x1c9b73[_0x7d6a43(0x7e6)] || _0x7d6a43(0xa40), _0x59a6be = _0x21f464[_0x7d6a43(0x2ef)] || '私聊'); } }, 0x32); } } async function _0x176a62() { const _0x210deb = _0x8e5972; if (_0x1d2a6a[_0x210deb(0xa31)]) { _0x5294eb('正在构思中，请稍候...'); return; } const _0x269873 = _0x1d2a6a['conversationHistory']; if (_0x269873[_0x210deb(0x2ab)] === 0x0) return; let _0x50a14f = -0x1; for (let _0x2c8d3f = _0x269873[_0x210deb(0x2ab)] - 0x1; _0x2c8d3f >= 0x0; _0x2c8d3f--) { if (_0x210deb(0x2bb) === _0x210deb(0x2bb)) { if (_0x269873[_0x2c8d3f][_0x210deb(0x874)] === 'user') { if (_0x210deb(0x523) !== _0x210deb(0xb0b)) { _0x50a14f = _0x2c8d3f; break; } else _0xb6f73e[_0x210deb(0x802)] = _0x4b48f0[_0x210deb(0x413)](_0x50daae), _0x35a161[_0x210deb(0x7be)][_0x210deb(0x180)] = _0x210deb(0x26d); } } else _0x1ca592[_0x210deb(0x8b0)]('[' + _0x56b52c + _0x210deb(0x77c) + _0x1284f3(_0x5ef894) + ']\x20' + _0x40c05c(_0xa04134[_0x210deb(0x415)])[_0x210deb(0x667)]()); } if (_0x50a14f === -0x1 || _0x50a14f === _0x269873[_0x210deb(0x2ab)] - 0x1) { _0x5294eb(_0x210deb(0xbb3)); return; } _0x269873[_0x210deb(0xa95)](_0x50a14f + 0x1), _0x1d2a6a[_0x210deb(0x1eb)] = [], _0x596ec3(), _0x3a8232(), _0x5d5440(_0x1d2a6a[_0x210deb(0xc2c)]), setTimeout(() => { const _0x2af82a = _0x210deb; if ('nGlUA' !== _0x2af82a(0xc58)) { _0xd12a8['pendingPostAttachments'][_0x31480a] = null; if (_0x2e8480 === _0x2af82a(0x7dc)) _0x46b546[_0x2af82a(0x4e1)][_0x2af82a(0xbf0)] = null; _0x2ce954(); } else _0x5f2ca7(); }, 0x64); } async function _0x5c837e() { const _0x388ec0 = _0x8e5972; if (_0x388ec0(0xa5e) === 'UTTtL') { const _0x4cfbb2 = _0x53ea03[_0x4ec892]; if (typeof _0x4cfbb2 === 'string') _0x482c57['push'](_0x4cfbb2); if (_0x229bc2[_0x388ec0(0x57e)](_0x4cfbb2)) _0x4cfbb2[_0x388ec0(0x83e)](_0x36d257 => { const _0x489fac = _0x388ec0; if (typeof _0x36d257 === _0x489fac(0x3e9)) _0x20146e[_0x489fac(0x8b0)](_0x36d257); }); } else { if (_0x1d2a6a[_0x388ec0(0xa31)]) { _0x5294eb('正在生成中，请稍候...'); return; } const _0x3e76ea = _0x1d2a6a[_0x388ec0(0x5c7)]; if (_0x3e76ea[_0x388ec0(0x2ab)] === 0x0) return; let _0x385130 = -0x1; for (let _0x29f0e8 = _0x3e76ea['length'] - 0x1; _0x29f0e8 >= 0x0; _0x29f0e8--) { if (_0x388ec0(0x35c) !== _0x388ec0(0x35c)) { const _0x155827 = _0x20a26b[_0x388ec0(0x2fa)]('div'); _0x155827['textContent'] = _0x1b9dae, _0x155827[_0x388ec0(0x672)](_0x388ec0(0xc5e), () => { const _0x3c7057 = _0x388ec0; _0x301ea6[_0x3c7057(0x41a)] = _0x5d57d6, _0x5dbeb0['classList'][_0x3c7057(0x8f0)]('show'); }), _0x18554f['appendChild'](_0x155827); } else { if (_0x3e76ea[_0x29f0e8][_0x388ec0(0x874)] === _0x388ec0(0xadb)) { _0x385130 = _0x29f0e8; break; } } } if (_0x385130 === -0x1 || _0x385130 === _0x3e76ea[_0x388ec0(0x2ab)] - 0x1) { _0x5294eb('还没有我的回复可以重新生成哦。'); return; } _0x3e76ea[_0x388ec0(0xa95)](_0x385130 + 0x1), _0x596ec3(), _0x4379f2(), setTimeout(() => { _0x5f2ca7(); }, 0x64); } } function _0x4d8484(_0x3aecce = null) { const _0x17b562 = _0x8e5972, _0xb1d806 = _0x3aecce ?? _0x58c11d['value'][_0x17b562(0x667)](); if (_0xb1d806 === '' || !_0x1d2a6a['activeChatId']) return; const _0xfb9e70 = document[_0x17b562(0x20e)]('.screen.active'), _0xee76ea = _0xfb9e70['id'] === _0x17b562(0x37b), _0x33f37d = { 'role': _0x17b562(0xadb), 'content': _0xb1d806, 'timestamp': Date[_0x17b562(0x4b7)](), 'isOffline': _0xee76ea }; if (_0x1d2a6a[_0x17b562(0xba1)]) { if (_0x17b562(0xb0e) !== _0x17b562(0xb0e)) { const _0x2f5516 = _0x39cfb8[_0x17b562(0xc00)]['find'](_0x3157e7 => _0x3157e7['id'] === _0x2eea2e); _0x2f5516 && (_0x2f5516[_0x17b562(0x7e6)] = _0x15d2c3, _0x2f5516[_0x17b562(0x25d)] = _0x4fa208, _0x2f5516[_0x17b562(0x861)] = _0x2c41f8); } else _0x33f37d[_0x17b562(0x651)] = { ..._0x1d2a6a[_0x17b562(0xba1)] }; } _0x1d2a6a[_0x17b562(0x5c7)]['push'](_0x33f37d); const _0x3cad86 = _0x4a73f8(_0x33f37d, _0x1d2a6a[_0x17b562(0x5c7)][_0x17b562(0x2ab)] - 0x1); _0x3cad86 && ('zhbCt' !== 'XZoKi' ? _0x7cbcb[_0x17b562(0xa4f)] = _0x7cbcb[_0x17b562(0x227)] : (_0x40b671[_0x17b562(0x22c)] = !![], _0x5926a7())), _0x596ec3(), _0x58c11d['value'] = '', _0x48b8cf(); } function _0x1acba0(_0xfb55a1) { const _0x2c55d4 = _0x8e5972; if (!_0xfb55a1 || !_0x1d2a6a[_0x2c55d4(0x5e4)]) return; const _0x24c8a0 = { 'role': _0x2c55d4(0xadb), 'content': _0x2c55d4(0xbd0) + _0xfb55a1['name'] + ']', 'displayUrl': _0xfb55a1['url'], 'timestamp': Date[_0x2c55d4(0x4b7)]() }; _0x1d2a6a[_0x2c55d4(0x5c7)][_0x2c55d4(0x8b0)](_0x24c8a0), _0x4a73f8(_0x24c8a0, _0x1d2a6a['conversationHistory'][_0x2c55d4(0x2ab)] - 0x1), _0x596ec3(), _0x1e3b0e[_0x2c55d4(0xa47)]['remove'](_0x2c55d4(0x7dd)); } async function _0x228ed5(_0x3139c4) { const _0x293d09 = _0x8e5972; if (_0x293d09(0x7b8) === _0x293d09(0xa1e)) _0x2432a6[_0x293d09(0x832)] = _0x293d09(0x8df); else { const _0x128c83 = _0x3139c4[_0x293d09(0xbdf)][_0x293d09(0x63c)][0x0]; if (!_0x128c83 || !_0x1d2a6a[_0x293d09(0x5e4)]) return; _0xea506e(!![], _0x293d09(0x210)); try { if (_0x293d09(0x56c) !== _0x293d09(0x56c)) _0x4dd991[_0x293d09(0x465)] = !![]; else { const _0x235cec = await _0x270777(_0x128c83, 0x320, 0.8, !![]), _0x432405 = 'chat_image_' + Date[_0x293d09(0x4b7)](); await _0x1ebaf2(_0x432405, _0x235cec); const _0x41b4d1 = _0x58c11d[_0x293d09(0x41a)][_0x293d09(0x667)](); _0x58c11d[_0x293d09(0x41a)] = ''; const _0x35b5af = { 'role': _0x293d09(0xadb), 'content': _0x41b4d1, 'imageId': _0x432405, 'timestamp': Date[_0x293d09(0x4b7)]() }; _0x1d2a6a[_0x293d09(0x5c7)][_0x293d09(0x8b0)](_0x35b5af), _0x4a73f8(_0x35b5af, _0x1d2a6a['conversationHistory']['length'] - 0x1), _0x596ec3(); } } catch (_0x1097f4) { _0x5294eb(_0x293d09(0xa3c) + _0x1097f4[_0x293d09(0x6da)]); } finally { _0x293d09(0x9a2) !== _0x293d09(0x502) ? (_0xea506e(![]), _0x3139c4[_0x293d09(0xbdf)][_0x293d09(0x41a)] = '') : _0x192fe2(_0x293d09(0x772)); } } } async function _0x1a01d9() { const _0x499b2e = _0x8e5972; if (!_0x1d2a6a[_0x499b2e(0x5e4)]) return; const _0xe7ede4 = await _0x52a1e3(); if (!_0xe7ede4) return; _0x5294eb(_0x499b2e(0xb6d)); try { const _0x520625 = await _0xd33e1a(_0xe7ede4[_0x499b2e(0x4d2)], _0xe7ede4['artist']), _0x947794 = { 'role': _0x499b2e(0xadb), 'type': _0x499b2e(0x6d1), 'content': _0x499b2e(0xb34) + _0xe7ede4[_0x499b2e(0x4d2)] + _0x499b2e(0x3e5) + _0xe7ede4[_0x499b2e(0xa2c)] + ']', 'songName': _0xe7ede4[_0x499b2e(0x4d2)], 'artist': _0xe7ede4[_0x499b2e(0xa2c)], 'coverUrl': _0x520625[_0x499b2e(0x9a7)], 'playableUrl': _0x520625[_0x499b2e(0x42a)], 'timestamp': Date[_0x499b2e(0x4b7)]() }; _0x1d2a6a[_0x499b2e(0x5c7)]['push'](_0x947794), _0x596ec3(), _0x2784f3(); } catch (_0x50e357) { console['error'](_0x499b2e(0x939), _0x50e357), _0x5294eb(_0x499b2e(0x218) + _0x50e357[_0x499b2e(0x6da)]); } } function _0x6f5c0b(_0x4edbad, _0x19ef54 = 0x78) { const _0x1da08f = _0x8e5972, _0x29c6e3 = _0x1a607a => { const _0x1c2461 = _0x4bce; if (_0x1a607a[_0x1c2461(0x874)] === _0x1c2461(0xadb)) return _0x1d2a6a[_0x1c2461(0x7cf)]?.[_0x1c2461(0x7e6)] || _0x1c2461(0x513); if (_0x1a607a[_0x1c2461(0xa71)]) { const _0x5ae84d = _0x5964f7(_0x1a607a[_0x1c2461(0xa71)]); return _0x5ae84d?.[_0x1c2461(0x7e6)] || _0x1c2461(0x61e); } if (_0x4edbad?.['type'] === _0x1c2461(0x5ac)) { if ('hijXx' === _0x1c2461(0x811)) _0x4838d9[_0x1c2461(0x1be)](_0x1c2461(0x531), _0x1df470), _0x238418(_0x1c2461(0x46e) + _0x39bfbe['message']); else { const _0xc31430 = _0x5964f7(_0x4edbad['participantIds'][0x0]); return _0xc31430?.[_0x1c2461(0x7e6)] || 'AI'; } } return _0x1c2461(0x6e2); }, _0xec13e9 = _0x1d2a6a[_0x1da08f(0x5c7)][_0x1da08f(0x59d)](-_0x19ef54), _0x228960 = []; for (const _0x37562f of _0xec13e9) { if (_0x37562f[_0x1da08f(0x639)]) _0x228960[_0x1da08f(0x8b0)]('[' + _0x29c6e3(_0x37562f) + _0x1da08f(0xc7a) + (_0x37562f[_0x1da08f(0x415)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x37562f[_0x1da08f(0x7dc)]) { const _0x3d17e6 = _0x37562f['content'] ? '\x20' + _0x37562f[_0x1da08f(0x415)] : ''; _0x228960[_0x1da08f(0x8b0)]('[' + _0x29c6e3(_0x37562f) + _0x1da08f(0xac5) + _0x3d17e6); } else { if (_0x37562f[_0x1da08f(0x415)]) { if (_0x1da08f(0xc34) === 'tGOSt') _0x228960[_0x1da08f(0x8b0)]('[' + _0x29c6e3(_0x37562f) + ']\x20' + _0x37562f[_0x1da08f(0x415)]); else { const _0x7f6232 = _0x2548cf[_0x1da08f(0x789)]((_0x387469 - _0x3a9bb6) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x447e1d += _0x1da08f(0x191) + _0x7f6232 + _0x1da08f(0x287); } } } } } return _0x228960[_0x1da08f(0x973)]('\x0a'); } function _0x501073(_0x4fff59, _0x5cdec1) { const _0x1eddfd = _0x8e5972; if (!_0x4fff59 || !_0x5cdec1) return null; const _0x378094 = _0x5cdec1[_0x1eddfd(0x5f9)](/@([^\s:：,，。!?]+)/); if (!_0x378094) return null; const _0x3d3cf4 = _0x378094[0x1][_0x1eddfd(0x8ce)](); for (const _0x5115a6 of _0x4fff59[_0x1eddfd(0x182)]) { if ('bhydT' === _0x1eddfd(0x5df)) { const _0x181400 = _0x5964f7(_0x5115a6); if (!_0x181400?.[_0x1eddfd(0x7e6)]) continue; if (_0x181400[_0x1eddfd(0x7e6)][_0x1eddfd(0x8ce)]() === _0x3d3cf4) return _0x181400; if (_0x181400[_0x1eddfd(0x7e6)][_0x1eddfd(0x8ce)]()['startsWith'](_0x3d3cf4)) return _0x181400; } else _0x45ae02(_0xfc60ef, _0x276ac1['target'][_0x1eddfd(0x63c)][0x0]); } return null; } function _0x3f0d88(_0x4a3f77) { const _0xddb3d0 = _0x8e5972; if (_0xddb3d0(0x4a1) === 'yTsFj') { const _0x50fb0b = _0x4a3f77['indexOf']('{'), _0xdb8573 = _0x4a3f77[_0xddb3d0(0x471)]('}'); if (_0x50fb0b >= 0x0 && _0xdb8573 > _0x50fb0b) return _0x4a3f77['slice'](_0x50fb0b, _0xdb8573 + 0x1); return _0x4a3f77; } else { const _0x31a488 = _0x11b308(_0x5b68db[_0xddb3d0(0xa71)]); return _0x31a488?.[_0xddb3d0(0x7e6)] || _0xddb3d0(0x61e); } } function _0x173af6(_0x56accf, _0x3e00b0, _0x5c209e) { const _0x30e780 = _0x8e5972, _0x331845 = new Map(_0x3e00b0[_0x30e780(0x719)](_0x7d9091 => [String(_0x7d9091['id']), _0x7d9091])), _0x4f4031 = _0x5f3815 => String(_0x5f3815 || '')['toLowerCase']()[_0x30e780(0x9ed)](/\s+/g, ''), _0x24e493 = new Map(_0x3e00b0[_0x30e780(0x719)](_0x1cbbe4 => [_0x4f4031(_0x1cbbe4['name']), _0x1cbbe4])), _0x52255f = new Set(_0x5c209e), _0xe2dd5f = { 'events': [] }; for (const _0x21f102 of _0x56accf?.['events'] || []) { const _0x4dc099 = _0x21f102['senderId'] ?? _0x21f102['sender'] ?? _0x21f102['sender_id'] ?? _0x21f102[_0x30e780(0x4e2)] ?? _0x21f102['role'] ?? _0x21f102[_0x30e780(0x7e6)]; if (!_0x4dc099) continue; let _0x272f18 = _0x331845[_0x30e780(0x689)](String(_0x4dc099)) || _0x24e493['get'](_0x4f4031(_0x4dc099)); if (!_0x272f18) continue; const _0x5f1c82 = (_0x21f102[_0x30e780(0x2fd)] || _0x21f102[_0x30e780(0x832)] || 'text')[_0x30e780(0x8ce)](); if (_0x5f1c82 === _0x30e780(0x4b6)) { const _0x20f41f = (_0x21f102[_0x30e780(0x4b6)] ?? _0x21f102['emoji'] ?? _0x21f102[_0x30e780(0x9fe)] ?? _0x21f102[_0x30e780(0x94c)])?.[_0x30e780(0x667)](); if (_0x20f41f && _0x52255f[_0x30e780(0x1d1)](_0x20f41f)) _0xe2dd5f[_0x30e780(0x845)][_0x30e780(0x8b0)]({ 'senderId': _0x272f18['id'], 'kind': 'sticker', 'sticker': _0x20f41f }); else { if ('hMiDW' !== _0x30e780(0x5f3)) { const _0x3d8f23 = String(_0x21f102[_0x30e780(0x415)] ?? _0x21f102[_0x30e780(0x8df)] ?? '')[_0x30e780(0x667)]() || _0x30e780(0x837) + (_0x20f41f || _0x30e780(0xc22)) + ']'; if (_0x3d8f23) _0xe2dd5f['events'][_0x30e780(0x8b0)]({ 'senderId': _0x272f18['id'], 'kind': 'text', 'content': _0x3d8f23 }); } else return _0x30e780(0xafc) + _0x10fd1c; } } else { if (_0x5f1c82 === 'music' && _0x21f102[_0x30e780(0x4d2)] && _0x21f102['artist']) _0xe2dd5f['events'][_0x30e780(0x8b0)]({ 'senderId': _0x272f18['id'], 'kind': _0x30e780(0x6d1), 'songName': _0x21f102['songName'], 'artist': _0x21f102[_0x30e780(0xa2c)] }); else { if (_0x30e780(0xa82) !== _0x30e780(0xa82)) { if (_0x5d83d1['diaryPressTimer']) _0x5b0afd(_0x338b03['diaryPressTimer']); } else { const _0x160467 = String(_0x21f102[_0x30e780(0x415)] ?? _0x21f102[_0x30e780(0x8df)] ?? _0x21f102[_0x30e780(0x6da)] ?? '')[_0x30e780(0x667)](); if (_0x160467) _0xe2dd5f[_0x30e780(0x845)]['push']({ 'senderId': _0x272f18['id'], 'kind': _0x30e780(0x8df), 'content': _0x160467 }); } } } } return _0xe2dd5f; } async function _0x37d0e6(_0x490f07) { const _0x3dd43f = _0x8e5972; if (!_0x490f07 || !Array['isArray'](_0x490f07[_0x3dd43f(0x845)]) || _0x490f07[_0x3dd43f(0x845)]['length'] === 0x0) return; const _0x2aa76d = _0x327863 => _0x327863 + Math[_0x3dd43f(0x7a5)](Math['random']() * 0x190); let _0x34da56 = 0x1f4; for (const _0x1e584a of _0x490f07['events']) { await new Promise(_0x348718 => setTimeout(_0x348718, _0x2aa76d(_0x34da56))), _0x34da56 = 0x2bc; const _0x75eb84 = _0x1d2a6a[_0x3dd43f(0x5c7)]['at'](-0x1)?.[_0x3dd43f(0x490)] ?? ![], _0x3f3e2a = { 'role': 'assistant', 'senderId': _0x1e584a[_0x3dd43f(0xa71)], 'timestamp': Date[_0x3dd43f(0x4b7)](), 'isOffline': _0x75eb84 }; if (_0x1e584a[_0x3dd43f(0x2fd)] === _0x3dd43f(0x953)) { Object[_0x3dd43f(0x60e)](_0x3f3e2a, { 'type': _0x3dd43f(0x953), 'content': _0x1e584a[_0x3dd43f(0x415)] }), _0x4a73f8(_0x3f3e2a, -0x1), _0x7cbcb[_0x3dd43f(0xa4f)] = _0x7cbcb[_0x3dd43f(0x227)]; continue; } if (_0x1e584a[_0x3dd43f(0x2fd)] === 'sticker') { if (_0x3dd43f(0x491) !== 'SeuOv') { const _0x387aa8 = _0x45075e[_0x3dd43f(0xaac)]['stickerName']; !_0x18da01[_0x3dd43f(0x7d3)](_0x387aa8) && _0x1f9bb4[_0x3dd43f(0x8b0)](_0x387aa8); } else { const _0x2936b3 = _0x5e6fd1['find'](_0x1dbb6d => _0x1dbb6d[_0x3dd43f(0x7e6)] === _0x1e584a['sticker']); _0x2936b3 && (Object['assign'](_0x3f3e2a, { 'content': _0x3dd43f(0xb6b) + _0x2936b3['name'] + ']', 'displayUrl': _0x2936b3[_0x3dd43f(0x42a)] }), _0x1d2a6a[_0x3dd43f(0x5c7)][_0x3dd43f(0x8b0)](_0x3f3e2a), _0x596ec3(), _0x4a73f8(_0x3f3e2a, _0x1d2a6a[_0x3dd43f(0x5c7)]['length'] - 0x1), _0x7cbcb['scrollTop'] = _0x7cbcb[_0x3dd43f(0x227)]); continue; } } if (_0x1e584a[_0x3dd43f(0x2fd)] === 'music' && _0x1e584a[_0x3dd43f(0x4d2)] && _0x1e584a['artist']) { const { songName: _0x27b856, artist: _0x5bb9b3 } = _0x1e584a; Object['assign'](_0x3f3e2a, { 'type': _0x3dd43f(0x6d1), 'content': '[AI分享了音乐：' + _0x27b856 + _0x3dd43f(0x3e5) + _0x5bb9b3 + ']', 'songName': _0x27b856, 'artist': _0x5bb9b3 }); try { const _0x39472b = await _0xd33e1a(_0x27b856, _0x5bb9b3); _0x3f3e2a['coverUrl'] = _0x39472b[_0x3dd43f(0x9a7)], _0x3f3e2a[_0x3dd43f(0x324)] = _0x39472b[_0x3dd43f(0x42a)]; } catch (_0x426dfc) { } _0x1d2a6a[_0x3dd43f(0x5c7)][_0x3dd43f(0x8b0)](_0x3f3e2a), _0x596ec3(), _0x4379f2(); continue; } if (_0x1e584a[_0x3dd43f(0x2fd)] === _0x3dd43f(0x8df)) { if ('cktRm' === _0x3dd43f(0x356)) { const _0x540581 = _0x2d564d(_0x33af0f[_0x3dd43f(0x415)] ?? _0x130de1[_0x3dd43f(0x8df)] ?? _0x28d35a['message'] ?? '')[_0x3dd43f(0x667)](); if (_0x540581) _0x6600a6[_0x3dd43f(0x845)][_0x3dd43f(0x8b0)]({ 'senderId': _0x31e7ac['id'], 'kind': 'text', 'content': _0x540581 }); } else { const _0x39fd3e = (_0x1e584a['content'] || '')[_0x3dd43f(0x5f9)](/^\[引用\|(.*?)\|(.*?)\]\s*/); let _0x57d5e4 = _0x1e584a[_0x3dd43f(0x415)] || ''; _0x39fd3e && ('kutPn' !== _0x3dd43f(0x4fd) ? _0x37a6a1[_0x3dd43f(0x594)]('无法解析旧的视奸内容来获取时间戳。', _0x40f960) : (_0x3f3e2a[_0x3dd43f(0x651)] = { 'sender': _0x39fd3e[0x1]['trim'](), 'content': _0x39fd3e[0x2][_0x3dd43f(0x667)]() }, _0x57d5e4 = _0x1e584a[_0x3dd43f(0x415)]['substring'](_0x39fd3e[0x0]['length'])[_0x3dd43f(0x667)]())); const _0x55bb0d = _0x511112(_0x57d5e4)[_0x3dd43f(0x59d)](0x0, 0x3); for (let _0x146ae7 = 0x0; _0x146ae7 < _0x55bb0d[_0x3dd43f(0x2ab)]; _0x146ae7++) { _0x3dd43f(0x8eb) !== _0x3dd43f(0x8ea) ? (_0x146ae7 > 0x0 && (await new Promise(_0x19fb5e => setTimeout(_0x19fb5e, _0x2aa76d(0x190))), delete _0x3f3e2a[_0x3dd43f(0x651)]), _0x3f3e2a[_0x3dd43f(0x415)] = _0x55bb0d[_0x146ae7], _0x1d2a6a[_0x3dd43f(0x5c7)][_0x3dd43f(0x8b0)]({ ..._0x3f3e2a }), _0x596ec3(), _0x4379f2()) : (_0x4474f8[_0x3dd43f(0x596)](), _0x318a40()); } } } } } async function _0x11a3ce(_0x1976a8, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x26dc49 = _0x8e5972; if (_0x26dc49(0xaa1) === _0x26dc49(0xaa1)) { await new Promise(_0x58117d => setTimeout(_0x58117d, 0xa)); if (!_0x1d2a6a[_0x26dc49(0xb07)]['endpoint'] || !_0x1d2a6a[_0x26dc49(0xb07)][_0x26dc49(0x5c2)] || !_0x1d2a6a['apiSettings'][_0x26dc49(0xb9e)]) return _0x5294eb('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; const _0x178fb6 = _0x3f5192(); if (!_0x178fb6 || !_0x1976a8) return ![]; const _0x10c2dd = _0x43b50c(_0x178fb6['id']), _0x331037 = _0x1d2a6a[_0x26dc49(0x5c7)]['at'](-0x1)?.[_0x26dc49(0x874)] === _0x26dc49(0xadb); if (!force && !_0x331037) return ![]; const _0x381790 = _0x1d2a6a[_0x26dc49(0x5c7)]['at'](-0x1)?.[_0x26dc49(0x490)] ?? ![]; if (delayMs) await new Promise(_0x78bf9d => setTimeout(_0x78bf9d, delayMs)); _0x381790 ? 'vqdiI' !== 'vqdiI' ? _0x4df699[_0x26dc49(0x680)](_0x26dc49(0xb92), _0x26dc49(0x25a)) : document['getElementById']('galgame-text')[_0x26dc49(0x724)] = _0x26dc49(0xbf7) : _0x2f0dba(!![]); let _0x195874 = ''; const _0x4411cb = _0x3f5192(); if (_0x4411cb?.[_0x26dc49(0x7c0)]?.[_0x26dc49(0xb65)]) { if ('GVGGk' === _0x26dc49(0x889)) _0x47bc30[_0x26dc49(0x1be)](_0x26dc49(0xb72), _0x1b8e29); else { const _0x53caf0 = _0x4411cb[_0x26dc49(0x7c0)], _0x3d97a7 = await _0x15e62e(_0x53caf0[_0x26dc49(0x452)]); if (_0x3d97a7 && _0x3d97a7[_0x26dc49(0x654)]) { if (_0x26dc49(0x7d2) !== _0x26dc49(0x7d2)) _0x38ff19 = _0x4ca646; else { const _0x4e16d4 = _0xf227c8(_0x3d97a7[_0x26dc49(0x654)]); if (_0x4e16d4[_0x26dc49(0x2ab)] > 0x0) { const _0x1105c5 = _0x5d8c3c[_0x26dc49(0x6dd)]; let _0x5f1fba = -0x1; for (let _0x5bcc69 = 0x0; _0x5bcc69 < _0x4e16d4[_0x26dc49(0x2ab)]; _0x5bcc69++) { if (_0x26dc49(0xa4d) !== _0x26dc49(0xa4d)) _0x5803e2[_0x26dc49(0xa4f)] = _0x521d5b['scrollHeight']; else { if (_0x1105c5 >= _0x4e16d4[_0x5bcc69][_0x26dc49(0xc4d)]) _0x5f1fba = _0x5bcc69; else break; } } const _0x5a3367 = _0x4e16d4[_0x26dc49(0x719)]((_0x3530d0, _0x5e715d) => { const _0x4cb2e5 = _0x26dc49, _0x2d73b1 = _0x5e715d === _0x5f1fba ? _0x4cb2e5(0xc07) : ''; return '' + _0x2d73b1 + _0x3530d0[_0x4cb2e5(0x8df)]; })[_0x26dc49(0x973)]('\x0a'), _0x38a4e4 = _0x4e16d4[_0x26dc49(0x719)](_0x351fe3 => _0x351fe3[_0x26dc49(0x8df)])[_0x26dc49(0x973)]('\x0a'), _0x4e44fe = _0x5f1fba > -0x1 ? _0x4e16d4[_0x5f1fba][_0x26dc49(0x8df)] : _0x26dc49(0x390); _0x195874 = ('\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20' + _0x53caf0['artist'] + _0x26dc49(0x5e3) + _0x53caf0[_0x26dc49(0x4d2)] + _0x26dc49(0x32e) + _0x38a4e4 + _0x26dc49(0xc7c) + _0x4e44fe + _0x26dc49(0x924))[_0x26dc49(0x667)](); } } } } } let _0x375958 = '', _0x21c12a = ''; const _0x5edb7e = _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x2ab)]; if (_0x5edb7e > 0x1) { const _0x26302f = _0x1d2a6a[_0x26dc49(0x5c7)][_0x5edb7e - 0x2], _0x3a75ac = _0x1d2a6a[_0x26dc49(0x5c7)][_0x5edb7e - 0x1]; if (_0x26302f['isOffline'] === ![] && _0x3a75ac[_0x26dc49(0x490)] === !![]) _0x21c12a = _0x26dc49(0x74b) + _0x10c2dd['name'] + _0x26dc49(0xa84); else _0x26302f[_0x26dc49(0x490)] === !![] && _0x3a75ac[_0x26dc49(0x490)] === ![] && (_0x21c12a = _0x26dc49(0xa9d) + _0x10c2dd[_0x26dc49(0x7e6)] + _0x26dc49(0x3e2)); } if (_0x381790) { const _0x4bf8db = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x375958 = _0x26dc49(0x3b5) + _0x10c2dd['name'] + _0x26dc49(0x9ac) + _0x4bf8db + _0x26dc49(0x782) + _0x1976a8[_0x26dc49(0x7e6)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x4bf8db + _0x26dc49(0x73b) + _0x4bf8db + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0x26dc49(0xb60) !== _0x26dc49(0xae9) ? _0x26dc49(0x8bf) : _0x2c968b[_0x26dc49(0x94d)]('char-edit-sprite-' + _0x5d9d02 + _0x26dc49(0x980))[_0x26dc49(0x7be)][_0x26dc49(0x4d7)] = _0x26dc49(0x80f) + _0x5479c7[_0x26dc49(0x413)](_0x4dd92a) + '\x27)'; const { omniText: _0x43889c } = _0x57f616(_0x1976a8['id'], _0x178fb6['id']), _0x5421e4 = _0x5d551b(), _0x5c4a7f = _0x49ee64(_0x1976a8['id']), _0x1c9932 = _0x274167(_0x1976a8['id']), _0x343b31 = await _0x1b021d(_0x1976a8['id']), _0x36dfe0 = typeof _0x19d10f === _0x26dc49(0x3e9) ? _0x19d10f['replaceAll']('{charName}', _0x1976a8['name'])[_0x26dc49(0x966)]('{userName}', _0x10c2dd[_0x26dc49(0x7e6)] || '用户') : '', _0x146a33 = _0x26304c()[_0x26dc49(0x719)](_0x1c04c6 => _0x1c04c6[_0x26dc49(0x7e6)])[_0x26dc49(0x973)](',\x20'); let _0x4fada8 = ''; if (_0x1976a8[_0x26dc49(0xa93)] && _0x1976a8[_0x26dc49(0xa93)][_0x26dc49(0x2ab)] > 0x0) { const _0x2462c4 = _0x1976a8[_0x26dc49(0xa93)][_0x26dc49(0x719)](_0x138ffc => _0x1d2a6a['worldBooks']['find'](_0x2f6bdb => _0x2f6bdb['id'] === _0x138ffc))['filter'](Boolean)[_0x26dc49(0x719)](_0x589d6f => '\x0a\x0a##\x20世界书条目:\x20' + _0x589d6f[_0x26dc49(0x7e6)] + '\x0a' + _0x589d6f['content'])[_0x26dc49(0x973)](''); if (_0x2462c4) _0x4fada8 = _0x26dc49(0x7fe) + _0x2462c4; } const _0x2995e4 = _0x10c2dd['persona'] ? _0x26dc49(0x402) + _0x10c2dd['name'] + '”的补充信息\x0a' + _0x10c2dd[_0x26dc49(0x647)] : ''; let _0x2ba415 = ''; const _0x109e04 = new Date(), _0x2588ca = _0x3f02c3(_0x1976a8['id']); _0x2ba415 = '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', _0x2ba415 += '-\x20**当前精确时间**:\x20' + _0x109e04['toLocaleString'](_0x26dc49(0x4cf), { 'dateStyle': _0x26dc49(0x541), 'timeStyle': _0x26dc49(0x25e) }) + '\x0a'; if (_0x2588ca) { const _0x23c654 = new Date(_0x2588ca[_0x26dc49(0x83c)]), _0x2ab410 = _0x1af056(_0x23c654); _0x2ba415 += '-\x20**你们最后一次互动是在**:\x20' + _0x2ab410 + '\x0a'; const _0x53fdfb = _0x109e04[_0x26dc49(0x430)](), _0x2429e2 = _0x23c654[_0x26dc49(0x430)](), _0x6434e8 = new Date(); _0x6434e8['setDate'](_0x109e04[_0x26dc49(0x3fc)]() - 0x1); const _0x197d9d = _0x6434e8['toDateString'](); if (_0x53fdfb === _0x2429e2) { if (_0x26dc49(0x5a3) === _0x26dc49(0x99a)) { if (!_0x49eec6[_0x26dc49(0xc00)] || _0x398bc9[_0x26dc49(0xc00)]['length'] === 0x0) { _0x59847f[_0x26dc49(0x1be)](_0x26dc49(0xbc4)); return; } const _0x5067a4 = _0x2f9649[_0x26dc49(0xc00)][0x0]; if (_0x5067a4[_0x26dc49(0x861)][_0x26dc49(0x2ab)] < 0x2) { _0x57277e['error']('错误：第一个好友圈\x20\x22' + _0x5067a4[_0x26dc49(0x7e6)] + _0x26dc49(0xc16)); return; } const _0x4a355a = { 'id': _0x26dc49(0x999) + _0x5c3f12['now'](), 'authorType': _0x26dc49(0x322), 'authorId': _0x5067a4[_0x26dc49(0x861)][0x0], 'content': _0x26dc49(0x87e), 'timestamp': _0x158bad[_0x26dc49(0x4b7)](), 'likes': [_0x5067a4[_0x26dc49(0x861)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x2b2896['now'](), 'authorId': _0x5067a4[_0x26dc49(0x861)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x5067a4['posts'][_0x26dc49(0x8b0)](_0x4a355a), _0x5c5a1b(), _0x1a96c9['log'](_0x26dc49(0x62e) + _0x5067a4[_0x26dc49(0x7e6)] + _0x26dc49(0x5cd)), _0x32efd2(_0x26dc49(0x915)); } else { const _0x56bc46 = (_0x109e04 - _0x23c654) / (0x3e8 * 0x3c); _0x56bc46 < 0x3c ? _0x2ba415 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x2ba415 += _0x26dc49(0x9c4) + Math[_0x26dc49(0x789)](_0x56bc46 / 0x3c) + '小时前），可以简单问候一下对方现在的状态。\x0a'; } } else { if (_0x197d9d === _0x2429e2) _0x26dc49(0x3af) !== _0x26dc49(0x3af) ? _0x3b00cd[_0x26dc49(0x806)] = '<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>' + _0x3cae6c + _0x26dc49(0x41f) + _0x5dc4a2[_0x26dc49(0x4d2)] + '</div><div\x20class=\x22artist\x22>' + _0x451899[_0x26dc49(0xa2c)] + _0x26dc49(0x770) : _0x2ba415 += _0x26dc49(0xaef); else { const _0x4fb3c2 = Math[_0x26dc49(0x789)]((_0x109e04 - _0x23c654) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2ba415 += _0x26dc49(0x191) + _0x4fb3c2 + _0x26dc49(0x287); } } } else _0x26dc49(0x956) !== 'vGuBI' ? _0x111bef[_0x26dc49(0x1e1)] = _0x5b429d : _0x2ba415 += '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a'; const _0x4f70b5 = ('\x0a' + _0x375958 + _0x26dc49(0x302) + _0x1976a8[_0x26dc49(0x7e6)] + '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22' + _0x1976a8[_0x26dc49(0x7e6)] + _0x26dc49(0xa9f) + _0x1976a8['name'] + _0x26dc49(0x2a8) + _0x146a33 + _0x26dc49(0x1b3) + _0x36dfe0 + '\x0a')[_0x26dc49(0x667)](), _0x52dc94 = [{ 'role': _0x26dc49(0xc0f), 'content': _0x4f70b5 }], _0x814bc9 = (_0x26dc49(0x6ac) + (_0x1976a8[_0x26dc49(0x647)] || _0x26dc49(0xb91)) + '\x0a' + _0x2995e4 + '\x20\x0a' + _0x43889c + '\x0a' + _0x5421e4 + '\x0a' + _0x5c4a7f + '\x0a' + _0x1c9932 + _0x26dc49(0x56b) + _0x343b31 + _0x26dc49(0x984) + _0x195874 + '\x0a' + _0x2ba415 + '\x0a' + _0x4fada8 + '\x0a')[_0x26dc49(0x667)](); _0x814bc9[_0x26dc49(0x9ed)](/#.*|\s/g, '') && ('Vtjyb' === _0x26dc49(0x94f) ? (_0x52dc94[_0x26dc49(0x8b0)]({ 'role': 'user', 'content': _0x814bc9 }), _0x52dc94['push']({ 'role': _0x26dc49(0xb29), 'content': _0x26dc49(0xa6e) })) : (_0x1778e2['classList'][_0x26dc49(0x8f0)](_0x26dc49(0x7dd)), _0x428468[_0x26dc49(0x997)] = null, _0x3503d8[_0x26dc49(0x997)] = null, _0x1a12d8['onclick'] = null, _0xec4897[_0x26dc49(0x6a2)]('keydown', _0x447f14), _0x1b5b71(_0x2bb33a))); const _0x4857dc = _0x1d2a6a['preferences']?.[_0x26dc49(0x4fc)] ?? 0x64, _0x3b9cd9 = _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x59d)](-_0x4857dc); for (const _0x1b95a4 of _0x3b9cd9) { if (_0x26dc49(0x495) !== _0x26dc49(0x495)) { const _0x3778c3 = _0x1967e0(_0x1432d2['activeMeetingCharId']); if (!_0x3778c3) return; _0x3b34c2 = !![], _0x3c8719['style'][_0x26dc49(0x180)] = _0x26dc49(0x26d); const _0xcc0bd5 = _0x3778c3['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0x51f170['getElementById'](_0x26dc49(0x7fc))[_0x26dc49(0x41a)] = _0xcc0bd5['x'], _0x4173d8[_0x26dc49(0x94d)](_0x26dc49(0x655))['value'] = _0xcc0bd5['y'], _0x40dc4d[_0x26dc49(0x94d)](_0x26dc49(0x1e9))[_0x26dc49(0x41a)] = _0xcc0bd5[_0x26dc49(0x9ef)] * 0x64, _0xea546a = { ..._0xcc0bd5 }, _0x2624a2['getElementById'](_0x26dc49(0x831))[_0x26dc49(0x7be)]['display'] = _0x26dc49(0x546), _0x282985[_0x26dc49(0x94d)]('galgame-sprite-adjust-ui')['style'][_0x26dc49(0x180)] = 'none'; } else { const _0x27189f = _0x1b95a4[_0x26dc49(0x874)] === 'ai' || _0x1b95a4[_0x26dc49(0x874)] === _0x26dc49(0xb29) ? 'assistant' : _0x26dc49(0xadb); let _0x59a758 = { 'role': _0x27189f, 'content': _0x1b95a4[_0x26dc49(0x415)] }, _0x4a366f = !!_0x1b95a4[_0x26dc49(0x415)]; if (_0x1b95a4[_0x26dc49(0x639)] && _0x1b95a4['content'][_0x26dc49(0x7d3)]('表情')) { if (_0x26dc49(0xba2) === _0x26dc49(0x52d)) _0x208356[_0x26dc49(0x48b)](); else { const _0x5dba86 = _0x1b95a4[_0x26dc49(0x415)]['match'](/：(.*?)]$/); _0x59a758[_0x26dc49(0x415)] = _0x26dc49(0x837) + (_0x5dba86 ? _0x5dba86[0x1] : '未知表情') + ']', _0x52dc94[_0x26dc49(0x8b0)](_0x59a758); } } else { let _0x34d2a0 = null; if (_0x1b95a4[_0x26dc49(0x7dc)]) _0x34d2a0 = _0x1b95a4[_0x26dc49(0x7dc)]; else { if (_0x1b95a4[_0x26dc49(0xbf0)]) { if (_0x26dc49(0x77b) === _0x26dc49(0x190)) { const _0x48cfea = _0x5359a9[_0x26dc49(0x94d)](_0x26dc49(0xab0)), _0x4230ec = _0x5a837f['getElementById']('expense-amount'), _0x182b65 = _0x48cfea[_0x26dc49(0x41a)]['trim'](), _0x10c6b0 = _0xeb718f(_0x4230ec[_0x26dc49(0x41a)]); if (!_0x182b65 || _0x113c78(_0x10c6b0) || _0x10c6b0 <= 0x0) { _0x39dd84(_0x26dc49(0x51f)); return; } _0x540dcb[_0x26dc49(0x2d5)][_0x26dc49(0x8b0)]({ 'id': _0x26dc49(0xaed) + _0x676f09['now'](), 'description': _0x182b65, 'amount': _0x10c6b0, 'timestamp': _0x50e60b[_0x26dc49(0x4b7)]() }), _0x5abd98(), _0x4e8e89(), _0x48cfea[_0x26dc49(0x41a)] = '', _0x4230ec[_0x26dc49(0x41a)] = '', _0x48cfea['focus'](); } else try { if ('lhSUG' !== 'MVIpg') { const _0x5e2591 = await _0xe5b0ea(_0x1b95a4[_0x26dc49(0xbf0)]); if (_0x5e2591) { if (_0x26dc49(0x3fd) === 'FyGlr') return _0x1dcedb[_0x26dc49(0x575)][_0x26dc49(0x2ec)](_0x2298c3 => _0x2298c3['id'] === _0x1094a5[_0x26dc49(0xc02)]) || _0x5999df['userProfiles'][0x0]; else _0x34d2a0 = await _0x22515d(_0x5e2591); } } else return { 'role': 'user', 'content': [{ 'type': 'text', 'text': _0x59eacb[_0x26dc49(0x415)] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x4085bb[_0x26dc49(0x7dc)], 'detail': _0x26dc49(0x743) } }] }; } catch (_0x44e1a9) { _0x26dc49(0x9dc) !== 'odaYp' ? (_0x3d2ef8(), _0x2ba8b1[_0x26dc49(0x5c7)] = [], _0x49acaf()) : console['error'](_0x26dc49(0x28f), _0x44e1a9); } } } _0x34d2a0 && (_0x59a758[_0x26dc49(0x7dc)] = _0x34d2a0, _0x4a366f = !![]), _0x4a366f && _0x52dc94[_0x26dc49(0x8b0)](_0x59a758); } } } try { const _0x11d66a = await _0x3e56bc(_0x52dc94); if (!_0x11d66a) return ![]; if (_0x381790) { if (_0x26dc49(0x656) === _0x26dc49(0x656)) try { let _0x29ff5a = _0x11d66a[_0x26dc49(0x667)](); const _0x554b10 = _0x29ff5a[_0x26dc49(0x5f9)](/(\[[\s\S]*\])/); if (_0x554b10) { if (_0x26dc49(0x29e) !== _0x26dc49(0x412)) _0x29ff5a = _0x554b10[0x1]; else { const _0x3c6bdc = _0x117680(_0x4f4288)[_0x26dc49(0x667)](); if (_0x3c6bdc[_0x26dc49(0x3c5)](_0x26dc49(0x64d)) && _0x3c6bdc['endsWith']('</div>')) return [_0x3c6bdc]; const _0x3ea02e = _0x3c6bdc['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x26dc49(0x719)](_0x97b8d3 => _0x97b8d3[_0x26dc49(0x667)]())['filter'](_0x5c603c); if (_0x3ea02e[_0x26dc49(0x2ab)] > 0x0) return _0x3ea02e[_0x26dc49(0x59d)](0x0, 0xc); return [_0x3c6bdc][_0x26dc49(0x564)](_0x53d650); } } const _0x25d38b = JSON[_0x26dc49(0xac1)](_0x29ff5a); if (Array[_0x26dc49(0x57e)](_0x25d38b)) { if ('BrboV' !== _0x26dc49(0x5cc)) _0x2cacc0 = _0x2601ed['parse'](_0x4b9e20); else { _0x1d2a6a['activeMeetingScriptQueue'] = [..._0x25d38b], _0x1d2a6a[_0x26dc49(0x5d2)][_0x1976a8['id']] = [..._0x25d38b], _0x2b301c(); const _0x47ccf7 = _0x25d38b[_0x26dc49(0x719)](_0x108244 => _0x108244[_0x26dc49(0x4e2)] === _0x26dc49(0x468) ? _0x108244[_0x26dc49(0xb61)] : _0x108244[_0x26dc49(0x4e2)] + ':\x20' + _0x108244[_0x26dc49(0xb61)])[_0x26dc49(0x973)]('\x0a\x0a'); _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x8b0)]({ 'role': _0x26dc49(0xb29), 'senderId': _0x1976a8['id'], 'timestamp': Date[_0x26dc49(0x4b7)](), 'isOffline': !![], 'content': _0x47ccf7 }); } } } catch (_0x4f26ef) { console[_0x26dc49(0x1be)]('解析AI剧本JSON失败:', _0x4f26ef, _0x26dc49(0x8d0), _0x11d66a), _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x8b0)]({ 'role': 'assistant', 'senderId': _0x1976a8['id'], 'timestamp': Date[_0x26dc49(0x4b7)](), 'isOffline': !![], 'content': '[AI返回了无法解析的剧本:\x20' + _0x11d66a + ']' }); } else _0x5a1105(_0x26dc49(0xacb)); } else { const _0xffa283 = _0x4389a5(_0x11d66a), _0x27db8e = _0xffa283['map'](_0x22e2cd => { const _0x559694 = _0x26dc49; if (_0x559694(0x3a6) !== _0x559694(0x3a6)) _0x321150[_0x559694(0x943)] = null; else { const _0x1edc60 = _0x22e2cd[_0x559694(0x667)](), _0x1d1a33 = _0x1edc60[_0x559694(0x5f9)](/^\[sticker:(.*?)\]$/), _0x4c14c1 = _0x1edc60[_0x559694(0x5f9)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x1a41ae = _0x1edc60['match'](/^\[music:(.*?)\|(.*?)\]$/), _0x224a98 = _0x1edc60[_0x559694(0x5f9)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/), _0x384c68 = _0x1edc60[_0x559694(0x5f9)](/^\[html\]([\s\S]*)\[\/html\]$/); if (_0x384c68) return { 'type': _0x559694(0x953), 'content': _0x384c68[0x1]['trim']() }; else { if (_0x1a41ae) return { 'type': 'music', 'songName': _0x1a41ae[0x1]['trim'](), 'artist': _0x1a41ae[0x2][_0x559694(0x667)]() }; else { if (_0x1d1a33) { if ('DgXGC' !== 'rHhAs') return { 'type': _0x559694(0x4b6), 'name': _0x1d1a33[0x1]['trim']() }; else try { _0x9bede6[_0x27b156] = _0x229f94['parse'](_0x442a91); } catch (_0x3310e1) { } } else { if (_0x224a98) { if (_0x559694(0x473) === _0x559694(0x473)) return { 'type': 'create_event', 'eventType': _0x224a98[0x1][_0x559694(0x667)](), 'eventDate': _0x224a98[0x2][_0x559694(0x667)](), 'eventContent': _0x224a98[0x3][_0x559694(0x667)]() }; else { let _0x47acd8 = _0x4911bc[_0x559694(0x5cb)][_0x559694(0x2ec)](_0x52549a => _0x52549a[_0x559694(0x7e6)] === _0x261aa0[_0x559694(0x7e6)] && (_0x52549a[_0x559694(0x9a0)] || _0x559694(0x1c1)) === (_0x4543e9[_0x559694(0x9a0)] || _0x559694(0x1c1))); if (_0x47acd8) _0x63f3d6[_0x559694(0x8b0)](_0x47acd8['id']); else { const _0x3d8599 = { 'id': _0x559694(0x836) + _0x4846c1[_0x559694(0x4b7)]() + '_' + _0x5d3633[_0x559694(0x4bc)](), 'name': _0x14f3a9['name'], 'content': _0xed4351[_0x559694(0x415)], 'categoryId': _0x809d7a[_0x559694(0x9a0)] || _0x559694(0x1c1) }; _0x541766[_0x559694(0x5cb)]['push'](_0x3d8599), _0x6cfa6d[_0x559694(0x8b0)](_0x3d8599['id']); } } } else { if (_0x4c14c1) { const _0x47005d = parseFloat(_0x4c14c1[0x1]), _0x5cba07 = _0x4c14c1[0x2][_0x559694(0x667)](), _0x4b4a1c = _0x43b50c(_0x1d2a6a[_0x559694(0x5e4)]); let _0x55dcb8 = null; if (_0x5cba07 === _0x4b4a1c[_0x559694(0x7e6)]) _0x55dcb8 = _0x4b4a1c['id']; else { const _0x32f327 = _0x3f5192(); if (_0x32f327[_0x559694(0x832)] === _0x559694(0x8aa)) { if (_0x559694(0xa6f) !== 'MrUmh') { const _0x535ad3 = new _0xcedb96(_0x1a92bb[_0x559694(0x83c)])[_0x559694(0x28e)](_0x559694(0x4cf), { 'hour': _0x559694(0x5d1), 'minute': _0x559694(0x5d1) }); _0x1b75f1[_0x559694(0x415)] && _0x341acb[_0x559694(0x8b0)]('[' + _0x535ad3 + _0x559694(0x77c) + _0x1c857e(_0x26057a) + ']\x20' + _0x36aa40(_0x1a7919[_0x559694(0x415)])['trim']()); } else { const _0x564e7b = _0x1d2a6a[_0x559694(0x1bc)][_0x559694(0x2ec)](_0x59f10e => _0x32f327[_0x559694(0x182)][_0x559694(0x7d3)](_0x59f10e['id']) && _0x59f10e[_0x559694(0x7e6)] === _0x5cba07); if (_0x564e7b) _0x55dcb8 = _0x564e7b['id']; } } } if (_0x55dcb8) return { 'type': _0x559694(0xc3a), 'amount': _0x47005d, 'recipientId': _0x55dcb8, 'senderId': _0x1976a8['id'] }; else return { 'type': _0x559694(0x8df), 'content': _0x559694(0x6e5) + _0x5cba07 + '”，但没找到人)' }; } else { if (_0x1edc60) return { 'type': _0x559694(0x8df), 'content': _0x1edc60 }; } } } } } return null; } })['filter'](Boolean), _0x1031a0 = async _0x5791e0 => { const _0x49aaae = _0x26dc49, _0x3fd306 = { 'role': _0x49aaae(0xb29), 'senderId': _0x1976a8['id'], 'timestamp': Date[_0x49aaae(0x4b7)](), 'isOffline': _0x381790 }; if (_0x5791e0[_0x49aaae(0x832)] === 'music') { const { songName: _0x3a2643, artist: _0x5238f4 } = _0x5791e0; _0x3fd306['type'] = _0x49aaae(0x6d1), _0x3fd306[_0x49aaae(0x415)] = _0x49aaae(0x6bc) + _0x3a2643 + _0x49aaae(0x3e5) + _0x5238f4 + ']'; try { const _0x294c5f = await _0xd33e1a(_0x3a2643, _0x5238f4); Object[_0x49aaae(0x60e)](_0x3fd306, { 'songName': _0x3a2643, 'artist': _0x5238f4, 'coverUrl': _0x294c5f['cover'], 'playableUrl': _0x294c5f['url'] }); } catch (_0x2f552) { Object['assign'](_0x3fd306, { 'songName': _0x3a2643, 'artist': _0x5238f4, 'coverUrl': null, 'playableUrl': null }); } } else { if (_0x5791e0[_0x49aaae(0x832)] === _0x49aaae(0x4b6)) { if (_0x49aaae(0x44c) === 'LwOFL') { const _0x1bb5fd = _0x5e6fd1[_0x49aaae(0x2ec)](_0x164eea => _0x164eea[_0x49aaae(0x7e6)] === _0x5791e0[_0x49aaae(0x7e6)]); if (_0x1bb5fd) Object['assign'](_0x3fd306, { 'content': '[AI发送了表情：' + _0x1bb5fd[_0x49aaae(0x7e6)] + ']', 'displayUrl': _0x1bb5fd[_0x49aaae(0x42a)] }); else _0x3fd306['content'] = '[sticker:' + _0x5791e0['name'] + ']'; } else { const _0x161242 = _0x487d79['querySelectorAll'](_0x49aaae(0x8d1)); _0x161242[_0x49aaae(0x83e)](_0xc1526f => _0xc1526f[_0x49aaae(0x8f0)]()); } } else { if (_0x5791e0[_0x49aaae(0x832)] === _0x49aaae(0xc3a)) { const _0x842efe = _0x5791e0['recipientId'] === _0x43b50c(_0x1d2a6a[_0x49aaae(0x5e4)])['id'] ? _0x43b50c(_0x1d2a6a['activeChatId']) : _0x5964f7(_0x5791e0[_0x49aaae(0x790)]); Object[_0x49aaae(0x60e)](_0x3fd306, { 'type': _0x49aaae(0xc3a), 'amount': _0x5791e0[_0x49aaae(0x897)], 'recipientId': _0x5791e0[_0x49aaae(0x790)], 'content': _0x49aaae(0x7d6) + (_0x842efe?.[_0x49aaae(0x7e6)] || '未知') + '\x20转账\x20' + _0x5791e0['amount'] + ']' }); } else { if (_0x5791e0[_0x49aaae(0x832)] === _0x49aaae(0x862)) { const _0x138842 = _0x43b50c(_0x178fb6['id']); if (!_0x138842 || !_0x138842['id']) return console[_0x49aaae(0x1be)](_0x49aaae(0x86d)), null; _0x1d2a6a['calendarEvents'][_0x49aaae(0x8b0)]({ 'id': _0x49aaae(0x8b6) + Date['now'](), 'date': _0x5791e0['eventDate'], 'type': _0x5791e0['eventType'], 'content': _0x5791e0['eventContent'], 'userId': _0x138842['id'], 'createdBy': 'ai' }), _0x4b4b09(), _0x1acbb4(), _0x36a868(); const _0x27b07d = _0x5964f7(_0x1976a8['id']); _0x27b07d && _0x5791e0['eventType'] === _0x49aaae(0xb43) && _0x5294eb(_0x49aaae(0xbd8) + _0x27b07d['name'] + _0x49aaae(0x54b) + _0x5791e0[_0x49aaae(0x626)]); return { 'role': _0x49aaae(0xb29), 'senderId': _0x1976a8['id'], 'timestamp': Date['now'](), 'isOffline': _0x381790, 'content': null }; return { 'role': _0x49aaae(0xb29), 'senderId': _0x1976a8['id'], 'timestamp': Date[_0x49aaae(0x4b7)](), 'isOffline': _0x381790, 'content': null }; } else { const _0x2799f9 = _0x111aa0(_0x5791e0['content']); Object['assign'](_0x3fd306, { 'content': _0x2799f9[_0x49aaae(0x415)], 'quotedMessage': _0x2799f9[_0x49aaae(0x651)] }); } } } } return _0x3fd306; }, _0x1d45f6 = await Promise[_0x26dc49(0x8af)](_0x27db8e[_0x26dc49(0x719)](_0x1031a0)); for (const _0x221be6 of _0x1d45f6) { if (_0x221be6[_0x26dc49(0x832)] === _0x26dc49(0x953)) { if ('hmiHW' !== _0x26dc49(0x23a)) { const _0x3ba678 = _0x18598b[_0x26dc49(0x8ce)](); if (_0x18f08f[_0x26dc49(0x870)](_0x4af795 => _0x3ba678[_0x26dc49(0x3c5)](_0x4af795))) { const _0x3acece = _0x33125f[_0x422dc5]; if (typeof _0x3acece === _0x26dc49(0x3e9)) _0x1a55f7[_0x26dc49(0x8b0)](_0x3acece); if (_0x177e64[_0x26dc49(0x57e)](_0x3acece)) _0x3acece['forEach'](_0x500727 => { const _0x327fc5 = _0x26dc49; if (typeof _0x500727 === _0x327fc5(0x3e9)) _0x1baa91[_0x327fc5(0x8b0)](_0x500727); }); } } else _0x4a73f8(_0x221be6, -0x1), _0x7cbcb['scrollTop'] = _0x7cbcb[_0x26dc49(0x227)]; } else { if (_0x221be6[_0x26dc49(0x415)] || _0x221be6[_0x26dc49(0x639)] || _0x221be6[_0x26dc49(0x832)] === _0x26dc49(0x6d1) || _0x221be6[_0x26dc49(0x651)]) { if (_0x26dc49(0x72c) !== _0x26dc49(0x72c)) { const _0x2c9db8 = _0x26d27a[_0x26dc49(0x5c2)](_0x2477a9); if (_0x2c9db8) _0x4a1af2[_0x26dc49(0x4a2)][_0x2c9db8] = _0x27c8bc[_0x26dc49(0x1c6)](_0x2c9db8); } else await new Promise(_0x167439 => setTimeout(_0x167439, 0x12c + Math[_0x26dc49(0x4bc)]() * 0x190)), _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x8b0)](_0x221be6), _0x4a73f8(_0x221be6, _0x1d2a6a['conversationHistory'][_0x26dc49(0x2ab)] - 0x1), _0x7cbcb['scrollTop'] = _0x7cbcb['scrollHeight']; } } } } return _0x596ec3(), !![]; } catch (_0x35a7f8) { if (_0x35a7f8[_0x26dc49(0x7e6)] !== _0x26dc49(0x30a)) { console['error'](_0x26dc49(0xaf6), _0x35a7f8); const _0x40c214 = { 'role': 'assistant', 'content': _0x26dc49(0x26a) + _0x35a7f8[_0x26dc49(0x6da)], 'senderId': _0x1976a8['id'], 'isOffline': _0x381790 }; _0x1d2a6a[_0x26dc49(0x5c7)][_0x26dc49(0x8b0)](_0x40c214), _0x4379f2(); } return ![]; } finally { _0x26dc49(0x360) === 'TvUvy' ? _0x429659 = _0x1a61b7['value'] : _0x2f0dba(![]); } } else _0xf91534 += _0x26dc49(0x7a3); } async function _0x244da9() { const _0x5778d9 = _0x8e5972, _0x4c953f = _0x3f5192(); if (!_0x4c953f || _0x4c953f[_0x5778d9(0x832)] !== _0x5778d9(0x5ac)) { _0x5294eb('哼，只有私聊才能进行总结，群聊那么乱怎么记！'); return; } if (_0x1d2a6a['isGenerating']) { _0x5294eb('我正在说话呢，别打岔！'); return; } const _0x288b36 = await _0x2f43da(_0x5778d9(0x9a5)); if (!_0x288b36) return; _0xea506e(!![], '正在翻阅全部历史记录...'), _0x18ef37['value'] = '', _0x3f5e03['classList'][_0x5778d9(0x5ee)](_0x5778d9(0x7dd)), _0x1d2a6a['isGenerating'] = !![]; try { const _0x1a834d = _0x5964f7(_0x4c953f[_0x5778d9(0x182)][0x0]), _0x4f9c66 = _0x43b50c(_0x4c953f['id']), _0x21aa0d = _0x4b1697(_0x4c953f['id']); if (_0x21aa0d[_0x5778d9(0x2ab)] === 0x0) { _0x18ef37[_0x5778d9(0x41a)] = '#\x20记录是空的，没什么好总结的。'; return; } const _0x136919 = _0x21aa0d[_0x5778d9(0x719)](_0x552e37 => { const _0x15009f = _0x5778d9; if ('uWPPr' === _0x15009f(0x8a0)) { const _0x31aadf = new Date(_0x552e37['timestamp']), _0x3ce784 = _0x31aadf[_0x15009f(0x688)]() + '-' + String(_0x31aadf[_0x15009f(0x833)]() + 0x1)[_0x15009f(0x7d4)](0x2, '0') + '-' + String(_0x31aadf[_0x15009f(0x3fc)]())[_0x15009f(0x7d4)](0x2, '0'), _0x52bb85 = String(_0x31aadf['getHours']())[_0x15009f(0x7d4)](0x2, '0') + ':' + String(_0x31aadf[_0x15009f(0xbc5)]())['padStart'](0x2, '0'); let _0x3cbebe = '未知'; _0x552e37[_0x15009f(0x874)] === _0x15009f(0xadb) ? _0x3cbebe = _0x4f9c66[_0x15009f(0x7e6)] : _0x3cbebe = _0x1a834d[_0x15009f(0x7e6)]; let _0x3e20e4 = _0x552e37[_0x15009f(0x415)]; if (_0x552e37[_0x15009f(0x639)]) _0x3e20e4 = _0x15009f(0x602); if (_0x552e37[_0x15009f(0xbf0)]) _0x3e20e4 = _0x15009f(0x679); return '[' + _0x3ce784 + '\x20' + _0x52bb85 + _0x15009f(0x77c) + _0x3cbebe + _0x15009f(0xa7c) + _0x3e20e4; } else return _0x22ea61[_0x15009f(0x1be)](_0x15009f(0x86d)), null; })[_0x5778d9(0x973)]('\x0a'), _0x384e79 = _0x1a3f53[_0x5778d9(0x9ed)](/{charName}/g, _0x1a834d[_0x5778d9(0x7e6)])[_0x5778d9(0x9ed)](/{userName}/g, _0x4f9c66['name']), _0x4ed3e4 = [{ 'role': _0x5778d9(0xc0f), 'content': _0x384e79 }, { 'role': _0x5778d9(0xadb), 'content': _0x136919 }], _0xb2d2d0 = await _0x3e56bc(_0x4ed3e4); _0x18ef37[_0x5778d9(0x41a)] = _0xb2d2d0 || _0x5778d9(0x29a), _0x18ef37[_0x5778d9(0xa4f)] = 0x0; } catch (_0x559818) { console[_0x5778d9(0x1be)](_0x5778d9(0x7e0), _0x559818), _0x18ef37[_0x5778d9(0x41a)] = _0x5778d9(0x92e) + _0x559818['message']; } finally { if ('NZILR' !== 'NZILR') { if (_0x1b94f0) { const _0x9ff64a = _0x4b5310(_0x36b99e[_0x5778d9(0xc2c)]); _0x9ff64a && (delete _0x9ff64a[_0x5778d9(0x91c)], _0x1f4f68(), _0x239c83(_0x9ff64a['id'], _0x5778d9(0x8fe)), _0x4a0db1(_0x5778d9(0x7ba)), _0x5853c9(!![])); } } else _0xea506e(![]), _0x1d2a6a['isGenerating'] = ![]; } } async function _0x5f2ca7() { const _0x30f9f = _0x8e5972; console['log'](_0x30f9f(0x7bb)); if (!_0x1d2a6a[_0x30f9f(0xb07)][_0x30f9f(0xa91)] || !_0x1d2a6a[_0x30f9f(0xb07)][_0x30f9f(0x5c2)] || !_0x1d2a6a[_0x30f9f(0xb07)][_0x30f9f(0xb9e)]) { if ('KsMBv' === 'KsMBv') { _0x5294eb('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } else { if (_0x468986[_0x30f9f(0x2ab)] === 0x0) return; _0x2e67a9 = (_0xe91f1b + 0x1) % _0x4db9c5[_0x30f9f(0x2ab)], _0xf1776e(_0x3172cc[_0x5ed0f2], _0x381856); } } const _0xde129b = _0x1d2a6a[_0x30f9f(0x5c7)]['at'](-0x1)?.[_0x30f9f(0x874)] === _0x30f9f(0xadb); if (!_0xde129b || _0x1d2a6a[_0x30f9f(0xa31)]) return; const _0x5eb32c = _0x3f5192(); if (!_0x5eb32c) return; _0x1d2a6a[_0x30f9f(0xa31)] = !![], _0x2f0dba(!![]); try { if ('Hvhhc' === _0x30f9f(0x3b8)) { if (_0x5eb32c['type'] === _0x30f9f(0x5ac)) { const _0x7646c3 = _0x5964f7(_0x5eb32c['participantIds'][0x0]); console[_0x30f9f(0x668)]('准备调用\x20generateAs...'); if (_0x7646c3) await _0x11a3ce(_0x7646c3, { 'force': !![] }); } else { const _0x311011 = await _0x18542d(); if (_0x311011 && _0x311011[_0x30f9f(0x845)]?.[_0x30f9f(0x2ab)]) await _0x37d0e6(_0x311011); else { console['warn']('Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.'); const _0x1797b8 = _0x5eb32c['participantIds'][_0x30f9f(0x719)](_0x5964f7)['filter'](Boolean); if (!_0x1797b8[_0x30f9f(0x2ab)]) return; let _0x52a268 = 0x0; for (const _0x29bef8 of _0x1797b8) { if (_0x30f9f(0x4b2) !== _0x30f9f(0x5e7)) _0x11a3ce(_0x29bef8, { 'force': !![], 'delayMs': _0x52a268 }), _0x52a268 += 0x1f4; else { const _0x49d68b = _0x3b2803[_0x30f9f(0x25c)](_0x3295f5, _0x30f9f(0x461)), _0x442ab7 = _0x49d68b[_0x30f9f(0x926)](_0x449d6a), _0x3da355 = _0x442ab7['put']({ 'id': _0x47ae14, 'data': _0x4879a5 }); _0x3da355['onsuccess'] = () => _0x5159ce(), _0x3da355[_0x30f9f(0x2b0)] = () => _0x4cdb27(_0x3da355['error']); } } } } } else _0x1daba0[_0x30f9f(0x724)] = _0x46afa2[_0x30f9f(0xc3b)](_0x35d7ad)[_0x30f9f(0x719)](_0x1213a9 => _0x1213a9[_0x30f9f(0x98b)][_0x30f9f(0x724)][_0x30f9f(0x667)]())[_0x30f9f(0x973)]('、'); } catch (_0x2704d4) { _0x2704d4[_0x30f9f(0x7e6)] !== _0x30f9f(0x30a) && (console[_0x30f9f(0x1be)]('获取AI响应失败:', _0x2704d4), _0x4a73f8({ 'role': 'assistant', 'content': _0x30f9f(0x26a) + _0x2704d4['message'] }, _0x1d2a6a['conversationHistory'][_0x30f9f(0x2ab)] - 0x1)); } finally { _0x1d2a6a[_0x30f9f(0xa31)] = ![], _0x2f0dba(![]); } } function _0x2e63af(_0x5ebb1d, _0x718d97) { const _0x310b94 = _0x8e5972; if (_0x310b94(0x877) === _0x310b94(0x50f)) _0x5d431c = _0x224058(_0x4e270f); else { const _0x12550f = _0x718d97[_0x310b94(0x8ce)](), _0x2450a9 = _0x5ebb1d[_0x310b94(0x8ce)](); if (_0x12550f[_0x310b94(0x3c5)](_0x310b94(0x3d7))) return 'anthropic'; if (_0x2450a9['includes']('anthropic.com')) return _0x310b94(0x6f9); if (_0x2450a9[_0x310b94(0x7d3)](_0x310b94(0x3f0))) return _0x310b94(0x998); if (_0x12550f['startsWith']('gemini')) return _0x310b94(0x998); return _0x310b94(0x666); } } async function _0x3e56bc(_0x2d4d13, _0x33c5d1 = {}) { const _0x3a701f = _0x8e5972; _0x1d2a6a[_0x3a701f(0x943)] && _0x1d2a6a[_0x3a701f(0x943)][_0x3a701f(0xbc2)](_0x3a701f(0x1ee)); _0x1d2a6a[_0x3a701f(0x943)] = new AbortController(); const _0x4c359b = _0x1d2a6a[_0x3a701f(0x943)][_0x3a701f(0x9be)], { endpoint: _0x582cbb, key: _0x566855, model: _0x2da533 } = _0x1d2a6a['apiSettings'], _0x30e360 = !!_0x33c5d1[_0x3a701f(0x9b2)], _0x34e611 = _0x2e63af(_0x582cbb, _0x2da533); console[_0x3a701f(0x668)](_0x3a701f(0xb04) + _0x34e611); let _0x330def = ''; try { if (_0x3a701f(0x36e) === _0x3a701f(0x36e)) { switch (_0x34e611) { case _0x3a701f(0x6f9): { if ('SFzzn' !== _0x3a701f(0xa98)) { const _0x224bc7 = _0x33378f(_0x566855), _0x5dc490 = _0x2d4d13[_0x3a701f(0x2ec)](_0x1233f7 => _0x1233f7['role'] === 'system')?.['content'] || '', _0x2b6ae6 = _0x2d4d13[_0x3a701f(0x564)](_0x2abece => _0x2abece['role'] !== _0x3a701f(0xc0f)), _0x972f17 = { 'model': _0x2da533, 'system': _0x5dc490, 'messages': _0x2b6ae6[_0x3a701f(0x719)](_0x3cb778 => ({ 'role': _0x3cb778[_0x3a701f(0x874)], 'content': [{ 'type': _0x3a701f(0x8df), 'text': _0x3cb778['content'] }] })), 'max_tokens': 0x1000 }, _0x3f4810 = await fetch(_0x582cbb, { 'method': _0x3a701f(0x5a9), 'headers': { 'Content-Type': _0x3a701f(0x37d), 'x-api-key': _0x224bc7, 'anthropic-version': _0x3a701f(0x8f2) }, 'body': JSON[_0x3a701f(0x838)](_0x972f17), 'signal': _0x4c359b }); if (!_0x3f4810['ok']) { const _0x3addb9 = await _0x3f4810[_0x3a701f(0x9b2)]()[_0x3a701f(0x88c)](() => ({})); throw new Error(_0x3a701f(0x664) + _0x3f4810[_0x3a701f(0x950)] + '\x20-\x20' + (_0x3addb9[_0x3a701f(0x1be)]?.[_0x3a701f(0x6da)] || _0x3f4810[_0x3a701f(0x37f)])); } const _0x4e2575 = await _0x3f4810[_0x3a701f(0x9b2)](); _0x330def = _0x4e2575[_0x3a701f(0x415)]?.[0x0]?.['text'] || ''; break; } else _0x4fe4e9['style'][_0x3a701f(0x4d7)] = _0x3a701f(0x80f) + _0x2c2ac0[_0x3a701f(0x7a4)] + '\x27)'; } case _0x3a701f(0x998): { const _0x3cd4b2 = _0x33378f(_0x566855), _0x493518 = _0x582cbb['includes'](_0x3a701f(0x251)), _0x5c6be5 = _0x5e8a66 => { const _0x53dcf9 = _0x3a701f, _0x266adc = []; if (_0x5e8a66[_0x53dcf9(0x415)]) _0x266adc[_0x53dcf9(0x8b0)]({ 'text': _0x5e8a66[_0x53dcf9(0x415)] }); if (_0x5e8a66[_0x53dcf9(0x7dc)]) { if (_0x53dcf9(0x21b) !== _0x53dcf9(0x553)) { const _0x33f282 = _0x5e8a66['image'][_0x53dcf9(0xc21)](',')[0x1], _0x3e719e = _0x5e8a66[_0x53dcf9(0x7dc)][_0x53dcf9(0x9dd)](_0x5e8a66[_0x53dcf9(0x7dc)]['indexOf'](':') + 0x1, _0x5e8a66[_0x53dcf9(0x7dc)]['indexOf'](';')) || 'image/jpeg'; _0x266adc[_0x53dcf9(0x8b0)]({ 'inline_data': { 'mime_type': _0x3e719e, 'data': _0x33f282 } }); } else _0x26dfd7('图片处理失败:\x20' + _0x36b985[_0x53dcf9(0x6da)]); } return _0x266adc; }, _0x3d4ecf = _0x2d4d13[_0x3a701f(0x719)](_0x1a97ff => ({ 'role': _0x1a97ff[_0x3a701f(0x874)] === _0x3a701f(0xb29) ? 'model' : _0x1a97ff[_0x3a701f(0x874)] === _0x3a701f(0xc0f) ? _0x3a701f(0xadb) : _0x1a97ff[_0x3a701f(0x874)], 'parts': _0x5c6be5(_0x1a97ff) }))[_0x3a701f(0x564)](_0xdeb316 => _0xdeb316[_0x3a701f(0x93d)]['length'] > 0x0), _0x246efa = { 'contents': _0x3d4ecf }; _0x30e360 && _0x493518 && (_0x246efa['generationConfig'] = { 'response_mime_type': 'application/json' }); const _0x3bfde8 = _0x582cbb + _0x3a701f(0x501) + _0x2da533 + _0x3a701f(0xbe6) + _0x3cd4b2 + _0x3a701f(0x368), _0x247c24 = await fetch(_0x3bfde8, { 'method': _0x3a701f(0x5a9), 'headers': { 'Content-Type': _0x3a701f(0x37d) }, 'body': JSON[_0x3a701f(0x838)](_0x246efa), 'signal': _0x4c359b }); if (!_0x247c24['ok']) throw new Error(_0x3a701f(0x380) + _0x247c24[_0x3a701f(0x950)]); const _0x2cb7d4 = _0x247c24[_0x3a701f(0x3ef)][_0x3a701f(0x886)](), _0x30fa43 = new TextDecoder(); let _0x439d57 = ''; while (!![]) { if (_0x4c359b['aborted']) { console[_0x3a701f(0x668)](_0x3a701f(0x2c2)), _0x2cb7d4[_0x3a701f(0xaf3)](); break; } const { done: _0x3c2900, value: _0x2d1448 } = await _0x2cb7d4['read'](); if (_0x3c2900) break; const _0x401d4a = _0x30fa43[_0x3a701f(0x477)](_0x2d1448, { 'stream': !![] }), _0x2b6d85 = _0x401d4a[_0x3a701f(0xc21)]('\x0a')[_0x3a701f(0x564)](_0x51f9c3 => _0x51f9c3[_0x3a701f(0x667)]()[_0x3a701f(0x3c5)](_0x3a701f(0x686))); for (const _0x457f6e of _0x2b6d85) { if (_0x3a701f(0xbae) === _0x3a701f(0xbae)) { const _0x2c81c8 = _0x457f6e[_0x3a701f(0x9ed)](_0x3a701f(0x4b8), ''); if (_0x2c81c8 === _0x3a701f(0x90d)) break; try { _0x439d57 += JSON['parse'](_0x2c81c8)['candidates'][0x0][_0x3a701f(0x415)][_0x3a701f(0x93d)][0x0][_0x3a701f(0x8df)]; } catch { } } else !_0x541c4f && (_0x3a12f5 = _0x1883b8[_0x3a701f(0x2fa)](_0x3a701f(0xaf1)), _0x2cc39c['id'] = _0x3a701f(0x828), _0x366ea8['getElementById']('chat-view-pane')[_0x3a701f(0xc15)](_0xc1fa50)), _0xdf6b97[_0x3a701f(0x806)] = _0x3a701f(0x7b9) + _0x547a65 + _0x3a701f(0x515), _0x844e53[_0x3a701f(0x7be)][_0x3a701f(0x180)] = _0x3a701f(0x67c); } } _0x330def = _0x439d57; break; } case _0x3a701f(0x666): default: { const _0x30dfa5 = _0x33378f(_0x566855), _0x58d325 = _0x582cbb[_0x3a701f(0x9ed)](/\/+$/, '') + _0x3a701f(0x556), _0x36b8a4 = _0x2d4d13['map'](_0x1dd890 => { const _0x387e20 = _0x3a701f; if (_0x1dd890[_0x387e20(0x874)] === _0x387e20(0xadb) && _0x1dd890[_0x387e20(0x7dc)]) { if (_0x387e20(0x5ef) !== _0x387e20(0x932)) return { 'role': _0x387e20(0xadb), 'content': [{ 'type': _0x387e20(0x8df), 'text': _0x1dd890[_0x387e20(0x415)] || '\x20' }, { 'type': _0x387e20(0x4dc), 'image_url': { 'url': _0x1dd890[_0x387e20(0x7dc)], 'detail': 'high' } }] }; else try { const _0x2aa1ad = { 'type': _0x387e20(0xc17), 'version': 0x1, 'timestamp': _0x431644[_0x387e20(0x4b7)](), 'accountingData': _0x56fb1b['accountingData'], 'accountingLedger': _0x1289e8[_0x387e20(0x698)] }, _0x1b745b = new _0x2120f1([_0x1caeea[_0x387e20(0x838)](_0x2aa1ad, null, 0x2)], { 'type': 'application/json' }), _0x4843e8 = _0x3daf24['createObjectURL'](_0x1b745b), _0x36fa32 = _0x2f5b8d[_0x387e20(0x2fa)]('a'), _0x166bd5 = new _0x1e64d3(), _0x33dd8d = _0x166bd5[_0x387e20(0x688)]() + '-' + _0x1d7f65(_0x166bd5['getMonth']() + 0x1)['padStart'](0x2, '0') + '-' + _0x391b31(_0x166bd5['getDate']())[_0x387e20(0x7d4)](0x2, '0'); _0x36fa32[_0x387e20(0x238)] = _0x4843e8, _0x36fa32['download'] = _0x387e20(0x62c) + _0x33dd8d + '.json', _0x5413b4[_0x387e20(0x3ef)][_0x387e20(0xc15)](_0x36fa32), _0x36fa32[_0x387e20(0xc5e)](), _0x48d150[_0x387e20(0x3ef)][_0x387e20(0x65e)](_0x36fa32), _0x3abfc4[_0x387e20(0xc74)](_0x4843e8), _0x5d09b9('账本已成功导出！'); } catch (_0x5114b4) { _0x4bba5f['error'](_0x387e20(0xafe), _0x5114b4), _0x2bd3a6(_0x387e20(0x81b) + _0x5114b4[_0x387e20(0x6da)]); } } return { 'role': _0x1dd890[_0x387e20(0x874)], 'content': _0x1dd890[_0x387e20(0x415)] }; })[_0x3a701f(0x564)](_0x24fe60 => _0x24fe60[_0x3a701f(0x415)]), _0x22604f = { 'model': _0x2da533, 'messages': _0x36b8a4, 'max_tokens': 0x1000, ..._0x30e360 ? { 'response_format': { 'type': _0x3a701f(0x22f) } } : {} }, _0x34c4d7 = await fetch(_0x58d325, { 'method': _0x3a701f(0x5a9), 'headers': { 'Content-Type': _0x3a701f(0x37d), 'Authorization': 'Bearer\x20' + _0x30dfa5 }, 'body': JSON[_0x3a701f(0x838)](_0x22604f), 'signal': _0x4c359b }); if (!_0x34c4d7['ok']) { const _0x58fd57 = await _0x34c4d7[_0x3a701f(0x9b2)]()[_0x3a701f(0x88c)](() => ({})); throw new Error(_0x3a701f(0x8a1) + _0x34c4d7['status'] + _0x3a701f(0x3e5) + (_0x58fd57[_0x3a701f(0x1be)]?.[_0x3a701f(0x6da)] || _0x34c4d7[_0x3a701f(0x37f)])); } const _0x49e4fd = await _0x34c4d7[_0x3a701f(0x9b2)](); _0x330def = _0x49e4fd['choices']?.[0x0]?.[_0x3a701f(0x6da)]?.[_0x3a701f(0x415)] || ''; break; } }return _0x330def; } else { const _0x1121ac = _0x49eed0[_0x3a701f(0x7a5)](_0x738801 / 0x3c); if (_0x1121ac < 0x30) _0x5e40f1 += '\x0a-\x20**对话状态**:\x20群里在' + _0x1121ac + _0x3a701f(0x6f3); else _0x533495 += '\x0a-\x20**对话状态**:\x20群里已经有' + _0x5376c8[_0x3a701f(0x7a5)](_0x1121ac / 0x18) + _0x3a701f(0xad3); } } catch (_0x2128dd) { if (_0x2128dd[_0x3a701f(0x7e6)] === _0x3a701f(0x30a)) return console[_0x3a701f(0x668)]('Fetch\x20request\x20was\x20aborted.'), ''; throw _0x2128dd; } finally { _0x1d2a6a[_0x3a701f(0x943)] && _0x1d2a6a[_0x3a701f(0x943)][_0x3a701f(0x9be)] === _0x4c359b && (_0x1d2a6a[_0x3a701f(0x943)] = null); } } async function _0x56d4dc() { const _0x3b63da = _0x8e5972; if (_0x3b63da(0xbfe) === _0x3b63da(0x7d7)) { _0x3431d1[_0x3b63da(0x1be)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } else { const _0x4f0307 = _0x1f52e1[_0x3b63da(0x274)][_0x3b63da(0xa47)][_0x3b63da(0xc7d)](_0x3b63da(0xbb6)), _0x3c909a = _0x4f0307 ? _0x4b2d84['value'] : null; let _0x3205c1 = null, _0x29fae5 = ''; if (_0x4f0307 && _0x3c909a) { if (_0x3b63da(0xa2e) === _0x3b63da(0xa2e)) { _0x3205c1 = _0x1d2a6a['chats'][_0x3b63da(0x2ec)](_0x3375b5 => _0x3375b5['type'] === 'private' && _0x3375b5[_0x3b63da(0x182)]['includes'](_0x3c909a)); const _0x59f1f3 = _0x5964f7(_0x3c909a); _0x29fae5 = _0x59f1f3 ? _0x59f1f3[_0x3b63da(0x7e6)] : _0x3b63da(0xbea); } else { _0x1b6e5c(); const _0x153663 = (_0x761b8f[_0x3b63da(0xb07)]['endpoint'] || '')[_0x3b63da(0x7d3)](_0x52cc75); _0x357498[_0x3b63da(0x1b5)] = _0x153663, _0x52380b('settings', 'home'); } } else { if (_0x1d2a6a['activeChatId']) { _0x3205c1 = _0x3f5192(); const _0x584561 = document[_0x3b63da(0x94d)](_0x3b63da(0x20a))[_0x3b63da(0x724)]; _0x29fae5 = _0x584561 || '当前聊天'; } } if (!_0x3205c1) { _0x5294eb('找不到要清空的聊天记录。'); return; } const _0x19ea70 = await _0x2f43da(_0x3b63da(0x496) + _0x29fae5 + _0x3b63da(0x8fd)); if (!_0x19ea70) return; _0x3205c1['id'] === _0x1d2a6a[_0x3b63da(0x5e4)] && (_0x1eadbc(), _0x1d2a6a['conversationHistory'] = [], _0x2784f3()); try { localStorage[_0x3b63da(0x34a)](_0x3b63da(0x6ba) + _0x3205c1['id']); } catch (_0x1668de) { console[_0x3b63da(0x1be)](_0x3b63da(0x5bf) + _0x3205c1['id'], _0x1668de); } _0x5294eb('\x22' + _0x29fae5 + _0x3b63da(0x683)); } } const _0x2dfd22 = document[_0x8e5972(0x94d)]('export-all-data-button'), _0x5d8caa = document[_0x8e5972(0x94d)]('import-all-data-button'), _0x346826 = document[_0x8e5972(0x94d)](_0x8e5972(0x439)); _0x2dfd22[_0x8e5972(0x672)](_0x8e5972(0xc5e), async () => { const _0x5c59d9 = _0x8e5972; if (_0x5c59d9(0x3d5) === _0x5c59d9(0x3d5)) { _0xea506e(!![], _0x5c59d9(0xad1)); const _0x1fc44e = []; try { const _0x537648 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [], 'indexedDBSnoopData': [] }; for (let _0x5c2746 = 0x0; _0x5c2746 < localStorage[_0x5c59d9(0x2ab)]; _0x5c2746++) { if (_0x5c59d9(0xb81) !== 'eDgbk') _0x1fdce6(_0x435c91, _0x3518b0, !![]); else { const _0x2394ed = localStorage[_0x5c59d9(0x5c2)](_0x5c2746); if (_0x2394ed) _0x537648['localStorageData'][_0x2394ed] = localStorage[_0x5c59d9(0x1c6)](_0x2394ed); } } const _0x4bb0bf = await _0x1e3691, _0xb59efe = _0x4bb0bf['transaction']([_0x42e918, _0x523d31, _0x2c779d], _0x5c59d9(0xb76)), _0x3e0cb1 = _0xb59efe[_0x5c59d9(0x926)](_0x42e918), _0x1984bf = _0xb59efe[_0x5c59d9(0x926)](_0x523d31), _0x42432c = _0xb59efe[_0x5c59d9(0x926)](_0x2c779d), _0x29a13f = new Promise((_0x19ae48, _0xbb178e) => { const _0x142de3 = _0x5c59d9, _0x136d04 = _0x3e0cb1[_0x142de3(0x267)](); _0x136d04[_0x142de3(0x33f)] = () => _0x19ae48(_0x136d04['result']), _0x136d04[_0x142de3(0x2b0)] = () => _0xbb178e(_0x136d04['error']); }), _0x5a9701 = new Promise((_0x1d01eb, _0x3ec884) => { const _0x5364c5 = _0x5c59d9, _0x381327 = _0x1984bf[_0x5364c5(0x267)](); _0x381327[_0x5364c5(0x33f)] = () => _0x1d01eb(_0x381327[_0x5364c5(0xa75)]), _0x381327[_0x5364c5(0x2b0)] = () => _0x3ec884(_0x381327[_0x5364c5(0x1be)]); }), _0x3d4962 = new Promise((_0x5112f8, _0x20a54e) => { const _0x102656 = _0x5c59d9, _0x3ea9b8 = _0x42432c[_0x102656(0x267)](); _0x3ea9b8[_0x102656(0x33f)] = () => _0x5112f8(_0x3ea9b8['result']), _0x3ea9b8['onerror'] = () => _0x20a54e(_0x3ea9b8[_0x102656(0x1be)]); }), [_0x10b578, _0x1e4e48, _0x17a010] = await Promise[_0x5c59d9(0x8af)]([_0x29a13f, _0x5a9701, _0x3d4962]); for (const _0x498cc9 of _0x10b578) { if (_0x498cc9[_0x5c59d9(0x3c3)] instanceof Blob) try { _0x537648[_0x5c59d9(0x64a)][_0x498cc9['id']] = await _0x22515d(_0x498cc9[_0x5c59d9(0x3c3)]); } catch (_0x159792) { _0x1fc44e[_0x5c59d9(0x8b0)](_0x498cc9['id']); } } for (const _0x23ea00 of _0x1e4e48) { if (_0x5c59d9(0xb9f) !== _0x5c59d9(0xb9f)) { const _0xbc0df9 = _0x3279f6[_0x5c59d9(0x2fa)](_0x5c59d9(0xaf1)); _0xbc0df9[_0x5c59d9(0x1ea)] = 'quoted-message-in-bubble', _0xbc0df9['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>' + _0x3e7614[_0x5c59d9(0x651)][_0x5c59d9(0xa79)] + _0x5c59d9(0x8bc) + _0x2dac14[_0x5c59d9(0x651)][_0x5c59d9(0x415)] + _0x5c59d9(0x21d), _0x547e1e['appendChild'](_0xbc0df9); } else { const _0x2c23ca = { ..._0x23ea00 }; _0x23ea00[_0x5c59d9(0x26c)] instanceof Blob && (_0x2c23ca[_0x5c59d9(0x26c)] = await _0x22515d(_0x23ea00[_0x5c59d9(0x26c)])), _0x23ea00[_0x5c59d9(0x9a7)] instanceof Blob && (_0x2c23ca['cover'] = await _0x22515d(_0x23ea00[_0x5c59d9(0x9a7)])), _0x537648[_0x5c59d9(0x40c)][_0x5c59d9(0x8b0)](_0x2c23ca); } } _0x537648[_0x5c59d9(0x8a3)] = _0x17a010; const _0x59c611 = new Blob([JSON['stringify'](_0x537648, null, 0x2)], { 'type': _0x5c59d9(0x37d) }), _0xa76ede = URL['createObjectURL'](_0x59c611), _0x41b8c2 = document[_0x5c59d9(0x2fa)]('a'), _0x516d96 = new Date(), _0x44e0dc = _0x516d96[_0x5c59d9(0x688)]() + '-' + String(_0x516d96[_0x5c59d9(0x833)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x516d96['getDate']())['padStart'](0x2, '0'); _0x41b8c2[_0x5c59d9(0x238)] = _0xa76ede, _0x41b8c2[_0x5c59d9(0xc46)] = _0x5c59d9(0x68d) + _0x44e0dc + _0x5c59d9(0x63a), document[_0x5c59d9(0x3ef)][_0x5c59d9(0xc15)](_0x41b8c2), _0x41b8c2[_0x5c59d9(0xc5e)](), document[_0x5c59d9(0x3ef)]['removeChild'](_0x41b8c2), URL[_0x5c59d9(0xc74)](_0xa76ede), _0xea506e(![]), _0x1fc44e[_0x5c59d9(0x2ab)] > 0x0 ? _0x5294eb(_0x5c59d9(0x70f) + _0x1fc44e[_0x5c59d9(0x973)]('\x0a')) : _0x5294eb(_0x5c59d9(0x772)); } catch (_0x316ccc) { _0xea506e(![]), console[_0x5c59d9(0x1be)](_0x5c59d9(0xbc6), _0x316ccc), _0x5294eb('导出过程中发生严重错误:\x20' + _0x316ccc['message']); } } else _0x717fd8[_0x5c59d9(0x1b5)] = ![]; }), _0x5d8caa[_0x8e5972(0x672)]('click', () => { const _0x1b2d9d = _0x8e5972; if ('vpPik' !== _0x1b2d9d(0x7c1)) { const _0x539b56 = { 'id': _0x1b2d9d(0x836) + _0x5caceb[_0x1b2d9d(0x4b7)](), 'name': _0x4aa663, 'content': _0x33a3af, 'categoryId': _0x4b8e07 }; _0x52633b[_0x1b2d9d(0x5cb)]['push'](_0x539b56); } else _0x346826[_0x1b2d9d(0xc5e)](); }), _0x15405b[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x5c837e), _0x346826['addEventListener']('change', _0x63507a => { const _0x393457 = _0x8e5972, _0x46db23 = _0x63507a[_0x393457(0xbdf)][_0x393457(0x63c)][0x0]; if (!_0x46db23) return; _0x2f43da(_0x393457(0xbe4))[_0x393457(0x1d2)](_0x2d40bf => { const _0x147c71 = _0x393457; if (_0x147c71(0x858) !== _0x147c71(0x858)) { const _0x164bab = _0x33544e[_0x147c71(0x5c3)][_0x147c71(0x719)](_0x143fe3 => _0x4db926(_0x143fe3)?.[_0x147c71(0x7e6)] || '未知')[_0x147c71(0x973)]('、'), _0x3b5839 = _0x147c71(0x4ca); _0x274931 = _0x147c71(0x684) + _0x3b5839 + '\x20' + _0x164bab + _0x147c71(0x2d6); } else { if (!_0x2d40bf) { if (_0x147c71(0x2e5) !== _0x147c71(0x550)) { _0x346826[_0x147c71(0x41a)] = ''; return; } else _0x14a908[_0x147c71(0x7be)]['display'] = _0x147c71(0x546), _0x1e9c53[_0x147c71(0x94d)]('snoop-phone-top-nav')[_0x147c71(0x7be)][_0x147c71(0x180)] = _0x147c71(0x67c); } _0xea506e(!![], _0x147c71(0xa36)); const _0x1b698c = new FileReader(); _0x1b698c[_0x147c71(0x437)] = async _0x344bb8 => { const _0x228eb7 = _0x147c71; try { if (_0x228eb7(0xbda) !== _0x228eb7(0xbda)) _0x544751[_0x228eb7(0x7be)][_0x228eb7(0x180)] = _0x228eb7(0x546), _0x47e6b3['onclick'] = _0x4a5a9d['onclick'] = _0x3004d4[_0x228eb7(0x997)] = null, _0x2404e1[_0x228eb7(0x6a2)](_0x228eb7(0x611), _0x346900), _0xb422d(_0xeed7d2); else { const _0x8a49a = JSON[_0x228eb7(0xac1)](_0x344bb8[_0x228eb7(0xbdf)][_0x228eb7(0xa75)]); if (!_0x8a49a[_0x228eb7(0x4a2)] || !_0x8a49a[_0x228eb7(0x64a)]) throw new Error(_0x228eb7(0x92c)); _0xea506e(!![], '正在准备图片数据...'); const _0x43c26a = await Promise[_0x228eb7(0x8af)](Object[_0x228eb7(0x1b1)](_0x8a49a['indexedDBData'])['map'](async _0xc428ea => { const _0xa2c4b2 = _0x228eb7; if (_0xa2c4b2(0x382) !== 'vYWMY') { const _0x4d6a8a = _0x8a49a[_0xa2c4b2(0x64a)][_0xc428ea]; if (typeof _0x4d6a8a === _0xa2c4b2(0x3e9) && _0x4d6a8a[_0xa2c4b2(0x3c5)](_0xa2c4b2(0x686))) { const _0x3ff2d2 = await _0x5a3320(_0x4d6a8a); return { 'id': _0xc428ea, 'blob': _0x3ff2d2 }; } return null; } else _0x2104e7['classList'][_0xa2c4b2(0x8f0)](_0xa2c4b2(0x7dd)), _0x120913 = null; }))[_0x228eb7(0x1d2)](_0xaaeb34 => _0xaaeb34[_0x228eb7(0x564)](Boolean)), _0x544563 = []; if (_0x8a49a[_0x228eb7(0x40c)]) { if (_0x228eb7(0x54e) === _0x228eb7(0x330)) { const _0x2c3f86 = _0x2a7935[_0x228eb7(0xbdf)][_0x228eb7(0x63c)][0x0]; if (!_0x2c3f86) return; const _0x38c229 = _0x561543['createObjectURL'](_0x2c3f86); _0x40a524['style']['backgroundImage'] = _0x228eb7(0x80f) + _0x38c229 + '\x27)'; } else { _0xea506e(!![], _0x228eb7(0x2d2)); const _0x110337 = _0x8a49a[_0x228eb7(0x40c)]['map'](async _0x1c29c5 => { const _0x1688ee = _0x228eb7, _0x14d750 = { ..._0x1c29c5 }; if (_0x1c29c5[_0x1688ee(0x26c)]) _0x14d750[_0x1688ee(0x26c)] = await _0x5a3320(_0x1c29c5[_0x1688ee(0x26c)]); if (_0x1c29c5[_0x1688ee(0x9a7)]) _0x14d750['cover'] = await _0x5a3320(_0x1c29c5['cover']); return _0x14d750; }); _0x544563[_0x228eb7(0x8b0)](...await Promise[_0x228eb7(0x8af)](_0x110337)); } } _0xea506e(!![], _0x228eb7(0x32d)), localStorage[_0x228eb7(0xa61)](); for (const _0x2152a3 in _0x8a49a[_0x228eb7(0x4a2)]) { localStorage['setItem'](_0x2152a3, _0x8a49a[_0x228eb7(0x4a2)][_0x2152a3]); } _0xea506e(!![], '正在写入新数据...'); const _0x270a0a = await _0x1e3691, _0x33e6d8 = _0x270a0a[_0x228eb7(0x25c)]([_0x42e918, _0x523d31, _0x2c779d], _0x228eb7(0x461)), _0x3ee46c = _0x33e6d8['objectStore'](_0x42e918), _0x26b03b = _0x33e6d8['objectStore'](_0x523d31), _0x26b964 = _0x33e6d8[_0x228eb7(0x926)](_0x2c779d); _0x3ee46c[_0x228eb7(0xa61)](), _0x26b03b[_0x228eb7(0xa61)](), _0x26b964[_0x228eb7(0xa61)](), _0x43c26a[_0x228eb7(0x83e)](_0x319dac => _0x3ee46c['put'](_0x319dac)), _0x544563['forEach'](_0x1de251 => _0x26b03b[_0x228eb7(0x734)](_0x1de251)), _0x8a49a['indexedDBSnoopData'] && Array[_0x228eb7(0x57e)](_0x8a49a['indexedDBSnoopData']) && (console['log'](_0x228eb7(0x385)), _0x8a49a[_0x228eb7(0x8a3)]['forEach'](_0x386a9f => _0x26b964[_0x228eb7(0x734)](_0x386a9f))), await new Promise((_0x26de3c, _0x35ae64) => { const _0x170ea0 = _0x228eb7; _0x33e6d8[_0x170ea0(0x1e1)] = _0x26de3c, _0x33e6d8[_0x170ea0(0x2b0)] = _0x5ea300 => _0x35ae64(_0x5ea300['target'][_0x170ea0(0x1be)]); }), _0xea506e(![]), _0x5294eb('数据导入成功！应用即将刷新...'), setTimeout(() => location[_0x228eb7(0x4ae)](), 0x640); } } catch (_0x329d75) { _0xea506e(![]), console[_0x228eb7(0x1be)]('全量导入失败:', _0x329d75), _0x5294eb(_0x228eb7(0x6fb) + _0x329d75[_0x228eb7(0x6da)]); } finally { _0x346826[_0x228eb7(0x41a)] = ''; } }, _0x1b698c['readAsText'](_0x46db23); } }); }); function _0xee4a5() { const _0x2dca1b = _0x8e5972; if (_0x2dca1b(0x406) !== 'vmQsL') _0x9de1bd[_0x2dca1b(0x41a)] = _0x1d2a6a[_0x2dca1b(0xb07)]['endpoint'] || '', _0x4750c1['value'] = _0x1d2a6a[_0x2dca1b(0xb07)][_0x2dca1b(0x5c2)] || '', _0x48a005[_0x2dca1b(0x41a)] = _0x1d2a6a[_0x2dca1b(0xb07)]['model'] || '', _0x13cbcf[_0x2dca1b(0x41a)] = String(_0x1d2a6a['preferences']?.['perChatContextLines'] ?? 0x64), document['getElementById'](_0x2dca1b(0x9b9))['value'] = _0x1d2a6a['apiSettings']['provider'] || _0x2dca1b(0x666); else { const _0x366717 = _0x2a1f78(_0x4fd662['authorId']) || { 'name': '未知' }; let _0x541f23 = _0x2dca1b(0x4e5) + _0x366717['name'] + _0x2dca1b(0x565) + (_0x4a3f19['thought'] || _0x30ec6d[_0x2dca1b(0x415)]) + '”'; return _0x46d3a3[_0x2dca1b(0x832)] === _0x2dca1b(0x6d1) && (_0x541f23 += _0x2dca1b(0x68a) + _0x54d104[_0x2dca1b(0x4d2)] + _0x2dca1b(0x3e5) + _0x6c76fe[_0x2dca1b(0xa2c)] + ')'), _0x541f23; } } function _0x27facb() { const _0x27051c = _0x8e5972; if (_0x27051c(0x976) === _0x27051c(0xb19)) _0x57c1ef[_0x27051c(0x8b0)](..._0x238e3f(_0xc169eb)); else { _0x1d2a6a[_0x27051c(0xb07)]['endpoint'] = _0x9de1bd[_0x27051c(0x41a)][_0x27051c(0x667)](), _0x1d2a6a['apiSettings'][_0x27051c(0x5c2)] = _0x4750c1[_0x27051c(0x41a)][_0x27051c(0x667)](), _0x1d2a6a[_0x27051c(0xb07)][_0x27051c(0xb9e)] = _0x48a005['value'][_0x27051c(0x667)](), _0x1d2a6a['apiSettings'][_0x27051c(0x44b)] = document[_0x27051c(0x94d)]('api-provider')[_0x27051c(0x41a)]; const _0x388af0 = parseInt(_0x13cbcf['value'], 0xa); _0x1d2a6a['preferences']['perChatContextLines'] = Number[_0x27051c(0x74a)](_0x388af0) && _0x388af0 > 0x0 ? _0x388af0 : 0x64, _0x4b4b09(), _0x5294eb(_0x27051c(0x74e)); } } function _0x3b6ab8() { const _0x45e0a8 = _0x8e5972; _0x3dac66[_0x45e0a8(0x41a)] = _0x1d2a6a[_0x45e0a8(0x7cf)][_0x45e0a8(0x7e6)] || '', _0x493595[_0x45e0a8(0x802)] = _0x1d2a6a['userProfile'][_0x45e0a8(0x7a4)] || _0x43e6b0, _0x41e697[_0x45e0a8(0x41a)] = _0x1d2a6a[_0x45e0a8(0x7cf)][_0x45e0a8(0x647)] || ''; } async function _0x344c0e(_0x2c8d29 = null) { const _0x5b07d2 = _0x8e5972; _0x40b080(_0x5b07d2(0x274), _0x171639), _0x583012(_0x5b07d2(0xa67)); const _0xd2f1d1 = _0x2c8d29 ? _0x1d2a6a['characters'][_0x5b07d2(0x2ec)](_0x568d92 => _0x568d92['id'] === _0x2c8d29) : null; _0x5b507c(_0x5b07d2(0x30c), _0xd2f1d1 ? _0xd2f1d1[_0x5b07d2(0xa93)] || [] : []); const _0x340d4a = document['getElementById'](_0x5b07d2(0x570)), _0x1d8a0c = document[_0x5b07d2(0x94d)](_0x5b07d2(0x593)); _0x96a3bc[_0x5b07d2(0x802)] = _0x133533, _0x1cf59f[_0x5b07d2(0x41a)] = '', _0x429c9d['style'][_0x5b07d2(0x4d7)] = '', _0x4428cd[_0x5b07d2(0x41a)] = '', _0x26ef47['style'][_0x5b07d2(0x4d7)] = '', _0x13122a[_0x5b07d2(0x41a)] = ''; const _0x4b170e = [_0x5b07d2(0x8fe), _0x5b07d2(0x47d), _0x5b07d2(0x1ef), _0x5b07d2(0xb96), 'shy']; _0x4b170e[_0x5b07d2(0x83e)](_0xd48b75 => { const _0x52020e = _0x5b07d2; document[_0x52020e(0x94d)](_0x52020e(0x2a4) + _0xd48b75 + _0x52020e(0x980))['style']['backgroundImage'] = '', document[_0x52020e(0x94d)](_0x52020e(0x2a4) + _0xd48b75 + _0x52020e(0xad2))[_0x52020e(0x41a)] = ''; }); if (_0x2c8d29) { if (_0x5b07d2(0x92d) === _0x5b07d2(0x92d)) { if (!_0xd2f1d1) return; _0x4b2d84[_0x5b07d2(0x41a)] = _0xd2f1d1['id'], _0x39f008[_0x5b07d2(0x724)] = _0x5b07d2(0xb3e), _0x269a4c[_0x5b07d2(0x41a)] = _0xd2f1d1[_0x5b07d2(0x7e6)], _0x4f179b['value'] = _0xd2f1d1[_0x5b07d2(0x2ef)], _0x553250[_0x5b07d2(0x41a)] = _0xd2f1d1[_0x5b07d2(0x647)], document[_0x5b07d2(0x94d)]('char-edit-css')[_0x5b07d2(0x41a)] = _0xd2f1d1[_0x5b07d2(0x2d1)] || '', _0x340d4a[_0x5b07d2(0x41a)] = _0xd2f1d1[_0x5b07d2(0x783)] || '', _0x1d8a0c[_0x5b07d2(0x41a)] = _0xd2f1d1[_0x5b07d2(0x727)] || ''; const _0x43cc4f = _0x1d2a6a[_0x5b07d2(0x816)][_0x5b07d2(0x2ec)](_0x47592e => _0x47592e[_0x5b07d2(0x832)] === _0x5b07d2(0x5ac) && _0x47592e['participantIds'][_0x5b07d2(0x7d3)](_0x2c8d29)); document['getElementById']('char-edit-bind-user')['value'] = _0x43cc4f?.[_0x5b07d2(0x25d)] || _0x1d2a6a[_0x5b07d2(0xc02)]; try { if (_0x5b07d2(0x22b) === _0x5b07d2(0xc44)) return _0x274842(_0x28fb0a)[_0x5b07d2(0x1d2)](_0x14dc8d => _0x14dc8d[_0x5b07d2(0x3c3)]()); else { const _0x188832 = await _0xe5b0ea(_0x5b07d2(0xa03) + _0xd2f1d1['id']); _0x96a3bc['src'] = _0x188832 ? URL[_0x5b07d2(0x413)](_0x188832) : _0xd2f1d1[_0x5b07d2(0x7a4)] || _0x133533; const _0x39b325 = await _0xe5b0ea('char_wallpaper_' + _0xd2f1d1['id']); if (_0x39b325) _0x429c9d['style'][_0x5b07d2(0x4d7)] = _0x5b07d2(0x80f) + URL[_0x5b07d2(0x413)](_0x39b325) + '\x27)'; const _0x1e6257 = await _0xe5b0ea(_0x5b07d2(0xa1b) + _0xd2f1d1['id']); if (_0x1e6257) _0x26ef47[_0x5b07d2(0x7be)][_0x5b07d2(0x4d7)] = _0x5b07d2(0x80f) + URL[_0x5b07d2(0x413)](_0x1e6257) + '\x27)'; for (const _0x23101f of _0x4b170e) { const _0x430512 = await _0xe5b0ea(_0x5b07d2(0x578) + _0x23101f + '_' + _0xd2f1d1['id']); _0x430512 && (_0x5b07d2(0xae5) === _0x5b07d2(0xae5) ? document[_0x5b07d2(0x94d)]('char-edit-sprite-' + _0x23101f + _0x5b07d2(0x980))[_0x5b07d2(0x7be)][_0x5b07d2(0x4d7)] = 'url(\x27' + URL['createObjectURL'](_0x430512) + '\x27)' : (_0xf0bcde[_0x5b07d2(0x7be)][_0x5b07d2(0x180)] = _0x5b07d2(0x67c), _0x446d35(() => _0x288809[_0x5b07d2(0xa47)][_0x5b07d2(0x5ee)](_0x5b07d2(0x7dd)), 0xa))); } } } catch (_0x381aba) { _0x5b07d2(0x9e9) === _0x5b07d2(0x43b) ? _0x4e4080['error'](_0x5b07d2(0xc77) + _0x33156e[_0x5b07d2(0x5e4)], _0x5eded5) : (console['error'](_0x5b07d2(0x79a) + _0xd2f1d1['id'] + _0x5b07d2(0xb84), _0x381aba), _0x96a3bc[_0x5b07d2(0x802)] = _0xd2f1d1[_0x5b07d2(0x7a4)] || _0x133533); } } else _0x291ed9[_0x5b07d2(0x1be)]('在“一起听”邀请中，净化封面失败:', _0x358cd4); } else 'YEgKQ' !== _0x5b07d2(0x2b4) ? (_0x4b2d84[_0x5b07d2(0x41a)] = '', _0x39f008[_0x5b07d2(0x724)] = _0x5b07d2(0x22d), _0x269a4c[_0x5b07d2(0x41a)] = '新角色\x20' + (_0x1d2a6a[_0x5b07d2(0x1bc)][_0x5b07d2(0x2ab)] + 0x1), _0x4f179b['value'] = '', _0x553250[_0x5b07d2(0x41a)] = '你是一个乐于助人的AI助手。', document['getElementById'](_0x5b07d2(0x554))['value'] = '', _0x340d4a[_0x5b07d2(0x41a)] = '', _0x1d8a0c[_0x5b07d2(0x41a)] = '') : _0x3fdb08(_0x36b5b9); _0x1a3865(); const _0x5e9cc0 = document[_0x5b07d2(0x94d)]('char-edit-css'); let _0x275bd3 = document['getElementById'](_0x5b07d2(0x59c)); !_0x275bd3 && (_0x275bd3 = document[_0x5b07d2(0x2fa)](_0x5b07d2(0x7be)), _0x275bd3['id'] = _0x5b07d2(0x59c), document[_0x5b07d2(0x1d4)][_0x5b07d2(0xc15)](_0x275bd3)); const _0x103629 = () => { const _0x5cabaa = _0x5b07d2; if (_0x5cabaa(0x843) !== _0x5cabaa(0x9eb)) { const _0x520ac3 = _0x5e9cc0[_0x5cabaa(0x41a)]; let _0x29174c = _0x520ac3[_0x5cabaa(0x9ed)](/\.bubble\.sent/g, _0x5cabaa(0x708))[_0x5cabaa(0x9ed)](/\.bubble\.received/g, _0x5cabaa(0xb98)); _0x275bd3[_0x5cabaa(0x806)] = _0x29174c; } else { const _0x515b79 = _0x7f5536[_0x5cabaa(0x2fa)]('li'); _0x515b79[_0x5cabaa(0x1ea)] = _0x5cabaa(0x4e3), _0x515b79[_0x5cabaa(0xaac)][_0x5cabaa(0xbec)] = _0x4b56c9['id'], _0x515b79['innerHTML'] = _0x5cabaa(0x194) + (_0x5814de[_0x5cabaa(0x7a4)] || _0x4d2126) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x5bc6eb[_0x5cabaa(0x7e6)] + _0x5cabaa(0xa92), _0x515b79['addEventListener'](_0x5cabaa(0xc5e), () => { _0x362aa7(_0x3ea03b['id']); }), _0x515b79[_0x5cabaa(0x20e)](_0x5cabaa(0x657))[_0x5cabaa(0x672)](_0x5cabaa(0xc5e), () => { _0x1efdc9(_0x1bad82['id']); }), _0x515b79[_0x5cabaa(0x20e)](_0x5cabaa(0x872))[_0x5cabaa(0x672)](_0x5cabaa(0xc5e), _0x21164c => { _0x21164c['stopPropagation'](), _0x5accf3(_0x7fd892['id']); }), _0x956dd3['appendChild'](_0x515b79); } }; _0x5e9cc0[_0x5b07d2(0x6a2)](_0x5b07d2(0xac7), _0x103629), _0x5e9cc0[_0x5b07d2(0x672)](_0x5b07d2(0xac7), _0x103629), _0x103629(); } function _0x6a9a74() { const _0x54b3d7 = _0x8e5972; try { if (_0x54b3d7(0xa08) === _0x54b3d7(0xc75)) _0x4b2665(![]); else { const _0x1815f0 = { 'type': _0x54b3d7(0xc17), 'version': 0x1, 'timestamp': Date[_0x54b3d7(0x4b7)](), 'accountingData': _0x1d2a6a[_0x54b3d7(0x2d5)], 'accountingLedger': _0x1d2a6a[_0x54b3d7(0x698)] }, _0x54a612 = new Blob([JSON[_0x54b3d7(0x838)](_0x1815f0, null, 0x2)], { 'type': _0x54b3d7(0x37d) }), _0x42e822 = URL['createObjectURL'](_0x54a612), _0x46c959 = document[_0x54b3d7(0x2fa)]('a'), _0x28b47f = new Date(), _0x515be1 = _0x28b47f['getFullYear']() + '-' + String(_0x28b47f[_0x54b3d7(0x833)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x28b47f[_0x54b3d7(0x3fc)]())[_0x54b3d7(0x7d4)](0x2, '0'); _0x46c959[_0x54b3d7(0x238)] = _0x42e822, _0x46c959[_0x54b3d7(0xc46)] = 'Noir_Accounting_Backup_' + _0x515be1 + _0x54b3d7(0x63a), document[_0x54b3d7(0x3ef)][_0x54b3d7(0xc15)](_0x46c959), _0x46c959[_0x54b3d7(0xc5e)](), document[_0x54b3d7(0x3ef)][_0x54b3d7(0x65e)](_0x46c959), URL[_0x54b3d7(0xc74)](_0x42e822), _0x5294eb('账本已成功导出！'); } } catch (_0x52234a) { 'HlydZ' === _0x54b3d7(0xb8f) ? (console[_0x54b3d7(0x1be)](_0x54b3d7(0xafe), _0x52234a), _0x5294eb(_0x54b3d7(0x81b) + _0x52234a[_0x54b3d7(0x6da)])) : _0x5164d8[_0x54b3d7(0xa47)][_0x54b3d7(0x8f0)](_0x54b3d7(0x8d5)); } } function _0x404c42(_0x3ec222) { const _0x4635f2 = _0x8e5972; if (_0x4635f2(0x7cd) !== _0x4635f2(0x7cd)) { _0x1805c1 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x340d3f in _0x55e492) { _0x54c63c[_0x340d3f][_0x4635f2(0xa47)][_0x4635f2(0x8f0)](_0x4635f2(0xb41)), _0x41e3e9[_0x340d3f][_0x4635f2(0x41a)] = ''; } _0x33ae18['audio'][_0x4635f2(0x20e)](_0x4635f2(0xc57))[_0x4635f2(0x724)] = _0x4635f2(0x8e4), _0xe11a11['cover'][_0x4635f2(0x20e)](_0x4635f2(0xc57))[_0x4635f2(0x724)] = '点击选择\x20.jpg\x20或\x20.png', _0x4652f7['info'][_0x4635f2(0x20e)]('.slot-filename')[_0x4635f2(0x724)] = _0x4635f2(0x6d7), _0xe5e493[_0x4635f2(0x654)][_0x4635f2(0x20e)](_0x4635f2(0xc57))[_0x4635f2(0x724)] = _0x4635f2(0x726), _0x5d8587(); } else { const _0x43eb93 = _0x3ec222[_0x4635f2(0xbdf)]['files'][0x0]; if (!_0x43eb93) return; _0x2f43da(_0x4635f2(0x7a9))[_0x4635f2(0x1d2)](_0x5e3bf3 => { const _0x13e1e8 = _0x4635f2; if (!_0x5e3bf3) { _0x3ec222[_0x13e1e8(0xbdf)][_0x13e1e8(0x41a)] = ''; return; } _0xea506e(!![], _0x13e1e8(0xbca)); const _0x46f553 = new FileReader(); _0x46f553[_0x13e1e8(0x437)] = _0x221d61 => { const _0x25142a = _0x13e1e8; try { if (_0x25142a(0x80d) !== _0x25142a(0x80d)) { if (!_0x36091c[_0x25142a(0x57e)](_0x1e90cf)) return _0x25142a(0x462); if (_0x3976be[_0x25142a(0x2ab)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x1a5bd0[_0x25142a(0xa24)]((_0x213aae, _0x5fea74) => new _0x29ea37(_0x5fea74[_0x25142a(0x83c)]) - new _0x4eba8f(_0x213aae[_0x25142a(0x83c)])), _0x25142a(0x1c3) + _0x5287e4[_0x25142a(0x719)]((_0x591f22, _0x3834e2) => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20' + (_0x3834e2 < _0x2625f9[_0x25142a(0x2ab)] - 0x1 ? _0x25142a(0x90e) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + (_0x591f22[_0x25142a(0x85f)] || '未知搜索') + _0x25142a(0x374) + (_0x591f22['result_page_content'] || _0x25142a(0x3c0)) + _0x25142a(0x1f3) + (_0x591f22[_0x25142a(0x83c)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x25142a(0x973)]('') + _0x25142a(0x2d6); } else { const _0x210ab9 = JSON['parse'](_0x221d61['target']['result']); if (_0x210ab9[_0x25142a(0x832)] !== _0x25142a(0xc17) || !_0x210ab9[_0x25142a(0x2d5)] || !_0x210ab9['accountingLedger']) { if (_0x25142a(0x791) === _0x25142a(0x791)) throw new Error('这不是我认证的账本卷轴，导入失败！'); else _0x34d2a9[_0x25142a(0xb56)](_0x338ff1 => { const _0x23ff0c = _0x25142a; _0x338ff1 ? _0x560ef1(_0x338ff1) : _0x3c172d(new _0x1dfb79(_0x23ff0c(0x588))); }, _0x54e00c, _0x937d7); } _0x1d2a6a[_0x25142a(0x2d5)] = _0x210ab9[_0x25142a(0x2d5)], _0x1d2a6a[_0x25142a(0x698)] = _0x210ab9[_0x25142a(0x698)], _0x4b4b09(), _0xea506e(![]), _0x5294eb(_0x25142a(0x57d)), _0x541d46(); } } catch (_0xc55e5b) { _0xea506e(![]), console[_0x25142a(0x1be)](_0x25142a(0x601), _0xc55e5b), _0x5294eb(_0x25142a(0x6fb) + _0xc55e5b['message']); } finally { _0x3ec222[_0x25142a(0xbdf)][_0x25142a(0x41a)] = ''; } }, _0x46f553[_0x13e1e8(0x944)](_0x43eb93); }); } } async function _0x16dce3() { const _0xf99919 = _0x8e5972; if (_0xf99919(0xc52) === _0xf99919(0x6d0)) _0x1815c0[_0xf99919(0x34a)]('chatHistory_' + _0x1ac303['activeChatId']); else { const _0x4caebe = _0x4b2d84[_0xf99919(0x41a)]; if (!_0x4caebe) { _0x5294eb('你还没保存这个角色呢，导什么导？'); return; } const _0x49a0e5 = _0x5964f7(_0x4caebe); if (!_0x49a0e5) return; _0xea506e(!![], '正在打包“' + _0x49a0e5[_0xf99919(0x7e6)] + _0xf99919(0x51a)); try { const _0x486fe7 = { 'type': _0xf99919(0x387), 'version': 0x1, 'name': _0x49a0e5['name'], 'remark': _0x49a0e5[_0xf99919(0x2ef)], 'persona': _0x49a0e5[_0xf99919(0x647)], 'bubbleCss': _0x49a0e5[_0xf99919(0x2d1)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x26b8cf = await _0xe5b0ea(_0xf99919(0xa03) + _0x49a0e5['id']); if (_0x26b8cf) _0x486fe7[_0xf99919(0x7a4)] = await _0x22515d(_0x26b8cf); const _0x3ff672 = ['normal', _0xf99919(0x47d), _0xf99919(0x1ef), _0xf99919(0xb96), 'shy']; for (const _0xa38f1a of _0x3ff672) { if (_0xf99919(0x592) === _0xf99919(0x592)) { const _0x58f1b4 = await _0xe5b0ea(_0xf99919(0x578) + _0xa38f1a + '_' + _0x49a0e5['id']); _0x58f1b4 && (_0x486fe7[_0xf99919(0x855)][_0xa38f1a] = await _0x22515d(_0x58f1b4)); } else _0x521a25[_0xf99919(0x7be)][_0xf99919(0xb52)] = '1'; } _0x49a0e5[_0xf99919(0xa93)] && _0x49a0e5['linkedWorldBookIds'][_0xf99919(0x2ab)] > 0x0 && (_0x486fe7[_0xf99919(0x5cb)] = _0x49a0e5[_0xf99919(0xa93)][_0xf99919(0x719)](_0x329879 => _0x1d2a6a[_0xf99919(0x5cb)]['find'](_0x5c8cd4 => _0x5c8cd4['id'] === _0x329879))['filter'](Boolean)['map'](_0x655ab6 => ({ 'name': _0x655ab6[_0xf99919(0x7e6)], 'content': _0x655ab6[_0xf99919(0x415)], 'categoryId': _0x655ab6['categoryId'] || _0xf99919(0x1c1) }))); const _0x2a38f8 = new Set(_0x486fe7[_0xf99919(0x5cb)][_0xf99919(0x719)](_0x57db2d => _0x57db2d[_0xf99919(0x9a0)])); _0x486fe7['worldBookCategories'] = _0x1d2a6a[_0xf99919(0x463)][_0xf99919(0x564)](_0x4f6d2e => _0x2a38f8['has'](_0x4f6d2e['id'])); const _0x384154 = new Blob([JSON[_0xf99919(0x838)](_0x486fe7, null, 0x2)], { 'type': _0xf99919(0x37d) }), _0x3c36e8 = URL[_0xf99919(0x413)](_0x384154), _0x40bd10 = document['createElement']('a'); _0x40bd10[_0xf99919(0x238)] = _0x3c36e8, _0x40bd10[_0xf99919(0xc46)] = _0x49a0e5[_0xf99919(0x7e6)] + _0xf99919(0xae7), document[_0xf99919(0x3ef)]['appendChild'](_0x40bd10), _0x40bd10[_0xf99919(0xc5e)](), document['body'][_0xf99919(0x65e)](_0x40bd10), URL[_0xf99919(0xc74)](_0x3c36e8); } catch (_0x3277a8) { console[_0xf99919(0x1be)](_0xf99919(0x815), _0x3277a8), _0x5294eb(_0xf99919(0x81b) + _0x3277a8[_0xf99919(0x6da)]); } finally { if ('SDuuI' === _0xf99919(0x6bf)) { const _0x5017f3 = { 'id': _0xf99919(0x4c5) + _0x132f54[_0xf99919(0x4b7)](), 'name': _0x3d66c6[_0xf99919(0x667)]() }; _0x43ac7f['worldBookCategories'][_0xf99919(0x8b0)](_0x5017f3), _0x1e1519[_0xf99919(0x89b)] = _0x5017f3['id'], _0x566891(), _0x2e1e3c(); } else _0xea506e(![]); } } } async function _0x335bee(_0x1c9a66) { const _0x373d10 = _0x8e5972; if (_0x373d10(0x183) !== _0x373d10(0x9ea)) { const _0x42a4ef = _0x1c9a66[_0x373d10(0xbdf)]['files'][0x0]; if (!_0x42a4ef) return; _0xea506e(!![], _0x373d10(0xb7b)); const _0x2c0af1 = new FileReader(); _0x2c0af1[_0x373d10(0x437)] = async _0x213b1f => { const _0x106596 = _0x373d10; try { const _0x2c0290 = JSON[_0x106596(0xac1)](_0x213b1f[_0x106596(0xbdf)][_0x106596(0xa75)]); if (_0x2c0290[_0x106596(0x832)] !== _0x106596(0x387)) { if (_0x106596(0x7e2) !== _0x106596(0x7e2)) { if (_0x144978[_0x106596(0x5c2)] === _0x106596(0x82c)) _0x5c8c37(null); _0x4e1dc5['key'] === _0x106596(0x2f3) && (_0xdbb845[_0x106596(0x506)](), _0x1899b9()); } else throw new Error(_0x106596(0x492)); } const _0x50570d = []; _0x2c0290[_0x106596(0x463)] && Array['isArray'](_0x2c0290['worldBookCategories']) && _0x2c0290[_0x106596(0x463)][_0x106596(0x83e)](_0x106469 => { const _0x25329c = _0x106596, _0x400b8f = _0x1d2a6a[_0x25329c(0x463)]['find'](_0x215fca => _0x215fca['name'] === _0x106469[_0x25329c(0x7e6)]); !_0x400b8f && _0x1d2a6a[_0x25329c(0x463)][_0x25329c(0x8b0)]({ 'id': _0x106469['id'] || _0x25329c(0xba5) + Date[_0x25329c(0x4b7)](), 'name': _0x106469[_0x25329c(0x7e6)] }); }); if (_0x2c0290['worldBooks'] && _0x2c0290[_0x106596(0x5cb)][_0x106596(0x2ab)] > 0x0) { if (_0x106596(0xb3c) === _0x106596(0xb3c)) for (const _0x156ab9 of _0x2c0290[_0x106596(0x5cb)]) { if (_0x106596(0x710) !== _0x106596(0x583)) { let _0x5c7b9d = _0x1d2a6a['worldBooks'][_0x106596(0x2ec)](_0x5ef839 => _0x5ef839[_0x106596(0x7e6)] === _0x156ab9['name'] && (_0x5ef839[_0x106596(0x9a0)] || _0x106596(0x1c1)) === (_0x156ab9[_0x106596(0x9a0)] || 'default')); if (_0x5c7b9d) 'mElex' === 'fAIsd' ? (_0x459255(![]), _0x4d7a5c[_0x106596(0x1be)](_0x106596(0xb8b), _0x6ef5e1), _0x322d80(_0x106596(0x6fb) + _0x31c253['message'])) : _0x50570d['push'](_0x5c7b9d['id']); else { const _0x296fdc = { 'id': _0x106596(0x836) + Date['now']() + '_' + Math[_0x106596(0x4bc)](), 'name': _0x156ab9[_0x106596(0x7e6)], 'content': _0x156ab9[_0x106596(0x415)], 'categoryId': _0x156ab9['categoryId'] || _0x106596(0x1c1) }; _0x1d2a6a[_0x106596(0x5cb)][_0x106596(0x8b0)](_0x296fdc), _0x50570d[_0x106596(0x8b0)](_0x296fdc['id']); } } else _0x5207d1['querySelector']('#diary-action-reroll')[_0x106596(0x997)] = () => { _0x405bde(_0x4a1405), _0x5c9cd2(); }; } else _0x14d853[_0x106596(0x1be)](_0x106596(0x5d4), _0x177e5b), _0x24da94('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。'); } const _0x10a3b0 = _0x106596(0x8b2) + Date['now'](); let _0x3d8277 = null; if (_0x2c0290[_0x106596(0x7a4)]) { if (_0x106596(0x1b6) === _0x106596(0x803)) _0x1774bd[_0x106596(0x672)](_0x106596(0xc5e), () => { const _0xb9cee = _0x106596; _0x2b27f2(), _0x2683ab(_0xb9cee(0xb22), 'home'); }); else { const _0x15c8ba = await _0x5a3320(_0x2c0290[_0x106596(0x7a4)]); await _0x1ebaf2('char_avatar_' + _0x10a3b0, _0x15c8ba), _0x3d8277 = await _0x22515d(_0x15c8ba); } } if (_0x2c0290['sprites']) { if (_0x106596(0x248) === _0x106596(0x6ef)) { const _0x1d3e21 = _0x39e927(_0x1eada5); if (!_0x1d3e21) return; _0x2dfd09[_0x106596(0x254)] = _0x32fafb; const _0x5f2b4f = _0x422ca6[_0x106596(0x82b)][_0x106596(0x2ec)](_0x3c112f => _0x3c112f[_0x106596(0x835)] === _0x4f8a96), _0x66c829 = _0x5f2b4f ? _0x5f2b4f[_0x106596(0xb46)][_0x106596(0x2ab)] : 0x0, _0x4d7a09 = 0x2; _0x1bf0c2['diaryCurrentPage'] = _0x3af7f0['max'](0x0, _0x14355f[_0x106596(0x6f8)](_0x66c829 / _0x4d7a09) - 0x1), _0x5e181a[_0x106596(0x94d)](_0x106596(0x19f))[_0x106596(0x724)] = _0x1d3e21['name'] + '的日记本', _0x1f5a62(), _0x1141fd(_0x106596(0xa9e), _0x106596(0x45c)); } else for (const _0x4737d8 in _0x2c0290[_0x106596(0x855)]) { const _0x2ab521 = _0x2c0290[_0x106596(0x855)][_0x4737d8]; if (_0x2ab521) { const _0x579875 = await _0x5a3320(_0x2ab521); await _0x1ebaf2(_0x106596(0x578) + _0x4737d8 + '_' + _0x10a3b0, _0x579875); } } } const _0x1999c9 = { 'id': _0x10a3b0, 'name': _0x2c0290['name'], 'remark': _0x2c0290[_0x106596(0x2ef)] || '', 'persona': _0x2c0290['persona'], 'avatar': _0x3d8277, 'linkedWorldBookIds': _0x50570d, 'bubbleCss': _0x2c0290[_0x106596(0x2d1)] || '' }; _0x1d2a6a[_0x106596(0x1bc)][_0x106596(0x8b0)](_0x1999c9); const _0x49787c = { 'id': _0x106596(0x1a8) + _0x10a3b0, 'type': 'private', 'participantIds': [_0x10a3b0], 'boundUserProfileId': _0x1d2a6a['activeUserProfileId'] }; _0x1d2a6a[_0x106596(0x816)][_0x106596(0x8b0)](_0x49787c), _0x4b4b09(), await _0x540cfc(), _0x5294eb('“' + _0x1999c9[_0x106596(0x7e6)] + _0x106596(0x918)); } catch (_0x4fe9d0) { console[_0x106596(0x1be)](_0x106596(0x216), _0x4fe9d0), _0x5294eb('导入失败了，笨蛋:\x20' + _0x4fe9d0[_0x106596(0x6da)]); } finally { _0xea506e(![]), _0x1c9a66[_0x106596(0xbdf)][_0x106596(0x41a)] = ''; } }, _0x2c0af1['readAsText'](_0x42a4ef); } else { _0xd7ab89(_0x373d10(0xa68), _0x373d10(0x274)); if (!_0x1539fc) { const _0x5c05c3 = _0x373d10(0x892) + _0x42ec8d[_0x373d10(0x4b7)](); _0x500bf2(_0x5c05c3), _0x377fe0(!![]); } } } function _0x5b507c(_0x5351b6, _0x5dea5d = []) { const _0x18dd68 = _0x8e5972; if ('oxIKa' !== _0x18dd68(0x8a4)) { const _0x5a11aa = document['getElementById'](_0x5351b6); _0x5a11aa[_0x18dd68(0x806)] = ''; const _0x40ce00 = _0x1d2a6a['worldBooks'][_0x18dd68(0xaf5)]((_0x236eec, _0x39aff3) => { const _0x57545b = _0x18dd68, _0x1e0f26 = _0x39aff3[_0x57545b(0x9a0)] || _0x57545b(0x1c1); return !_0x236eec[_0x1e0f26] && (_0x236eec[_0x1e0f26] = []), _0x236eec[_0x1e0f26][_0x57545b(0x8b0)](_0x39aff3), _0x236eec; }, {}), _0x2a59f1 = () => { const _0x5a7d71 = _0x18dd68; _0x5351b6 === _0x5a7d71(0x30c) ? _0x1a3865() : 'nGxSd' !== _0x5a7d71(0xa3e) ? _0x16a025() : _0x34fc0e[_0x5a7d71(0x802)] = _0x1f7db7[_0x5a7d71(0x7dc)]; }, _0x18e75a = [..._0x1d2a6a[_0x18dd68(0x463)]]; if (_0x40ce00[_0x18dd68(0x1c1)] && !_0x18e75a[_0x18dd68(0x2ec)](_0x48e98d => _0x48e98d['id'] === _0x18dd68(0x1c1))) { const _0x13f278 = _0x1d2a6a['worldBookCategories'][_0x18dd68(0x870)](_0x3985c0 => _0x3985c0['id'] === _0x18dd68(0x1c1)); if (!_0x13f278) { if (_0x18dd68(0x9df) === _0x18dd68(0xab3)) { if (_0x502e48?.[_0x18dd68(0x832)] === _0x18dd68(0x5ac)) _0x5c753e = _0x75a707(_0x3bb32b[_0x18dd68(0x182)][0x0]); else _0x54bfe2?.[_0x18dd68(0x832)] === _0x18dd68(0x8aa) && _0x37425b && (_0x54f4fd = _0x4ae329(_0x484e29)); _0x353602 = _0x528296?.['avatar'] || _0x1a4111, _0x5372ea = _0xee640c?.[_0x18dd68(0x783)] || ''; } else _0x18e75a['push']({ 'id': 'default', 'name': _0x18dd68(0x85b) }); } } _0x18e75a['forEach'](_0x41d0de => { const _0x1b1371 = _0x18dd68, _0x1c82d5 = _0x40ce00[_0x41d0de['id']] || []; if (_0x1c82d5[_0x1b1371(0x2ab)] === 0x0) return; const _0x28c8f7 = document['createElement'](_0x1b1371(0xaf1)); _0x28c8f7[_0x1b1371(0x1ea)] = _0x1b1371(0xc69); const _0x332772 = _0x1c82d5[_0x1b1371(0x1c5)](_0x304c2e => _0x5dea5d[_0x1b1371(0x7d3)](_0x304c2e['id'])); _0x28c8f7[_0x1b1371(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22' + _0x41d0de['id'] + '\x22\x20' + (_0x332772 ? _0x1b1371(0x460) : '') + _0x1b1371(0xbab) + _0x41d0de[_0x1b1371(0x7e6)] + _0x1b1371(0x636); const _0x439979 = _0x28c8f7[_0x1b1371(0x20e)](_0x1b1371(0x485)); _0x1c82d5[_0x1b1371(0x83e)](_0x92732c => { const _0x39215b = _0x1b1371; if ('kmgeL' !== _0x39215b(0x76b)) { const _0x526b88 = _0x175fc6['getElementById'](_0x39215b(0x37a)); if (!_0x526b88) return; const _0x3740eb = _0x3b3a37[_0x39215b(0x1c6)]('themeLightness') || '80'; _0x37ac8a['documentElement'][_0x39215b(0x7be)]['setProperty']('--primary-lightness', _0x3740eb + '%'), _0x526b88['value'] = _0x3740eb, _0x526b88[_0x39215b(0x672)](_0x39215b(0xac7), () => { const _0x58889c = _0x39215b, _0x67d39c = _0x526b88[_0x58889c(0x41a)]; _0x2ac3c6[_0x58889c(0x903)][_0x58889c(0x7be)]['setProperty']('--primary-lightness', _0x67d39c + '%'), _0x5391cc[_0x58889c(0x2ca)](_0x58889c(0x7ac), _0x67d39c), _0x37b371(); }); } else { const _0x37ce59 = _0x5dea5d[_0x39215b(0x7d3)](_0x92732c['id']), _0x51e45d = document[_0x39215b(0x2fa)](_0x39215b(0x8cc)); _0x51e45d['className'] = 'wb-entry-item', _0x51e45d['innerHTML'] = _0x39215b(0x7f4) + _0x92732c['id'] + '\x22\x20data-category-id=\x22' + _0x41d0de['id'] + '\x22\x20' + (_0x37ce59 ? _0x39215b(0x460) : '') + '>\x20' + _0x92732c[_0x39215b(0x7e6)], _0x439979[_0x39215b(0xc15)](_0x51e45d); } }), _0x5a11aa[_0x1b1371(0xc15)](_0x28c8f7); }), _0x5a11aa[_0x18dd68(0x599)](_0x18dd68(0x4ef))[_0x18dd68(0x83e)](_0xa64ba7 => { const _0x2bd222 = _0x18dd68; if (_0x2bd222(0x68b) !== _0x2bd222(0x68b)) { const { playlist: _0x175b29, currentIndex: _0xcf2327 } = _0x2af1ff[_0x2bd222(0xac1)](_0x292255); _0x2794d3['isArray'](_0x175b29) && _0x175b29[_0x2bd222(0x2ab)] > 0x0 && _0xcf2327 > -0x1 && (_0x566f25[_0x2bd222(0x345)] = _0x175b29, _0x4f308f[_0x2bd222(0x4dd)] = _0xcf2327, _0x5a6295['isPlaying'] = ![], _0x3875cb()); } else _0xa64ba7['addEventListener'](_0x2bd222(0xc5e), _0x3096d3 => { const _0x1450d9 = _0x2bd222; if (_0x3096d3[_0x1450d9(0xbdf)]['type'] === _0x1450d9(0x230)) return; const _0x3fe7ad = _0xa64ba7[_0x1450d9(0x49e)], _0x222ec2 = _0xa64ba7[_0x1450d9(0x20e)](_0x1450d9(0x75f)), _0x3d4351 = _0x3fe7ad[_0x1450d9(0xa47)]['contains'](_0x1450d9(0x445)); _0x3fe7ad[_0x1450d9(0xa47)]['toggle'](_0x1450d9(0x445), !_0x3d4351), _0x222ec2[_0x1450d9(0xa47)]['toggle'](_0x1450d9(0x445), !_0x3d4351); }); }), _0x5a11aa['querySelectorAll'](_0x18dd68(0x699))[_0x18dd68(0x83e)](_0x1850a8 => { const _0x205324 = _0x18dd68; _0x205324(0x1f2) !== _0x205324(0x226) ? _0x1850a8[_0x205324(0x672)](_0x205324(0xc5e), _0x26748b => { const _0x1bf159 = _0x205324, _0x1f97c5 = _0x26748b[_0x1bf159(0xbdf)][_0x1bf159(0xaac)][_0x1bf159(0x9a0)], _0x2e265f = _0x26748b[_0x1bf159(0xbdf)]['checked']; _0x5a11aa[_0x1bf159(0x599)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x1f97c5 + '\x22]')[_0x1bf159(0x83e)](_0x5dcd5a => { const _0x27870c = _0x1bf159; _0x27870c(0xc4b) !== _0x27870c(0xc4b) ? _0x50da26(() => { const _0x5138ae = _0x27870c; _0xaf856(_0x138d4b[_0x5138ae(0xb05)])[_0x5138ae(0x1d2)](_0x2dd026 => { const _0x5c18c1 = _0x5138ae, _0x124d70 = _0x833e8b[_0x5c18c1(0x94d)](_0x456e84); if (_0x124d70 && _0x2dd026) _0x124d70[_0x5c18c1(0x802)] = _0x6129af[_0x5c18c1(0x413)](_0x2dd026); }); }, 0x0) : _0x5dcd5a[_0x27870c(0x460)] = _0x2e265f; }), _0x2a59f1(); }) : (_0x55e054['innerHTML'] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', _0x112102['getElementById'](_0x205324(0x975))[_0x205324(0x672)]('click', _0x5a6754)); }), _0x5a11aa[_0x18dd68(0x599)](_0x18dd68(0x3f3))[_0x18dd68(0x83e)](_0x404b20 => { const _0x2a6023 = _0x18dd68; _0x404b20[_0x2a6023(0x672)](_0x2a6023(0xac7), _0x10b4f4 => { const _0xec8919 = _0x2a6023; if (_0xec8919(0x95e) !== 'rILLD') { const _0x1504c5 = _0x10b4f4[_0xec8919(0xbdf)]['dataset'][_0xec8919(0x9a0)], _0x1acb72 = _0x5a11aa['querySelectorAll']('.wb-entry-item\x20input[data-category-id=\x22' + _0x1504c5 + '\x22]'), _0x306de2 = _0x5a11aa['querySelectorAll']('.wb-entry-item\x20input[data-category-id=\x22' + _0x1504c5 + _0xec8919(0x504)), _0xabfe09 = _0x5a11aa[_0xec8919(0x20e)](_0xec8919(0x9f9) + _0x1504c5 + '\x22]'); if (_0x306de2['length'] === 0x0) 'NvxDT' === 'NvxDT' ? (_0xabfe09[_0xec8919(0x460)] = ![], _0xabfe09[_0xec8919(0x465)] = ![]) : _0x356bb1 && (_0x6b18c7[_0xec8919(0x802)] = _0x12d95e[_0xec8919(0x413)](_0x4ef724)); else _0x306de2[_0xec8919(0x2ab)] === _0x1acb72[_0xec8919(0x2ab)] ? (_0xabfe09[_0xec8919(0x460)] = !![], _0xabfe09['indeterminate'] = ![]) : _0xabfe09[_0xec8919(0x465)] = !![]; _0x2a59f1(); } else { const _0xe8115c = _0x2ed2fc[_0xec8919(0xaac)][_0xec8919(0x9a0)], _0x38429e = _0x1cfd83['querySelectorAll'](_0xec8919(0xb35) + _0xe8115c + '\x22]'), _0x301736 = _0xa9b81a[_0xec8919(0x599)](_0xec8919(0xb35) + _0xe8115c + _0xec8919(0x504)); _0x301736[_0xec8919(0x2ab)] > 0x0 && _0x301736['length'] < _0x38429e[_0xec8919(0x2ab)] && (_0x2a706f[_0xec8919(0x465)] = !![]); } }); }), _0x5a11aa['querySelectorAll'](_0x18dd68(0x699))[_0x18dd68(0x83e)](_0x2a219a => { const _0x1dba94 = _0x18dd68; if (_0x1dba94(0x983) !== _0x1dba94(0x2d7)) { const _0x3f75b7 = _0x2a219a[_0x1dba94(0xaac)][_0x1dba94(0x9a0)], _0x26c19f = _0x5a11aa[_0x1dba94(0x599)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x3f75b7 + '\x22]'), _0x3d51ac = _0x5a11aa[_0x1dba94(0x599)](_0x1dba94(0xb35) + _0x3f75b7 + _0x1dba94(0x504)); _0x3d51ac[_0x1dba94(0x2ab)] > 0x0 && _0x3d51ac[_0x1dba94(0x2ab)] < _0x26c19f[_0x1dba94(0x2ab)] && ('CDnCP' === _0x1dba94(0x766) ? _0x4cc4b8(_0x52dc05[_0x1dba94(0xc2c)], _0x1d15f9[_0x1dba94(0xa0f)]) : _0x2a219a['indeterminate'] = !![]); } else _0x30c7fe['classList'][_0x1dba94(0x5ee)]('is-entering-from-left'), _0x521f43['classList']['add'](_0x1dba94(0x6c3)), _0x3fde8b[_0x1dba94(0xa47)][_0x1dba94(0x5ee)](_0x1dba94(0x433)), _0x5b9f9d(() => { const _0x1aa2a0 = _0x1dba94; _0x5c531c[_0x1aa2a0(0xa47)]['remove'](_0x1aa2a0(0x433), _0x1aa2a0(0x6c3)), _0x1a5f92[_0x1aa2a0(0xa47)][_0x1aa2a0(0x8f0)](_0x1aa2a0(0xab7)), _0x3b1788[_0x1aa2a0(0xae1)] = _0x427758, _0xc88a17(), _0x4d65bf[_0x1aa2a0(0x971)] = ![]; }, 0x2bc); }); } else try { const _0x4f2609 = _0x3252a0[_0x18dd68(0x413)](_0x54ca5d), _0x5bfa16 = _0x18dd68(0x42d), _0xf393d6 = _0x18dd68(0x8c4) + _0x5bfa16 + _0x18dd68(0x386) + _0x4f2609 + _0x18dd68(0x65f); _0x93bfca[_0x18dd68(0x806)] = _0xf393d6, _0x206e9d['documentElement']['style'][_0x18dd68(0x318)](_0x18dd68(0x885), '\x27' + _0x5bfa16 + '\x27'), _0x54cd76['textContent'] = _0x18dd68(0xc25); } catch (_0x47fd9a) { _0x3ec586[_0x18dd68(0x1be)](_0x18dd68(0x5bc), _0x47fd9a), _0x3aaa36(_0x18dd68(0x500)); } } async function _0x65174b() { const _0x521c07 = _0x8e5972; if (_0x521c07(0x4c1) === 'zGnRO') { const _0x53b0b9 = [_0x521c07(0x8fe), _0x521c07(0x47d), _0x521c07(0x1ef), _0x521c07(0xb96), _0x521c07(0x280)], _0x353221 = _0x4b2d84[_0x521c07(0x41a)], _0x317212 = document[_0x521c07(0x94d)](_0x521c07(0xa67))[_0x521c07(0x41a)], _0x1d13a0 = _0x1cf59f[_0x521c07(0x63c)][0x0], _0x12f755 = _0x4428cd['files'][0x0], _0x320e29 = _0x13122a[_0x521c07(0x63c)][0x0], _0x3162d3 = document[_0x521c07(0x599)](_0x521c07(0x81d)), _0x55a4b7 = Array['from'](_0x3162d3)['map'](_0x5d20c9 => _0x5d20c9[_0x521c07(0x41a)]), _0x4dbdf0 = { 'name': _0x269a4c['value']['trim'](), 'remark': _0x4f179b['value'][_0x521c07(0x667)](), 'persona': _0x553250['value'][_0x521c07(0x667)](), 'linkedWorldBookIds': _0x55a4b7, 'bubbleCss': document[_0x521c07(0x94d)]('char-edit-css')[_0x521c07(0x41a)][_0x521c07(0x667)](), 'avatarFrameUrl': document['getElementById'](_0x521c07(0x570))[_0x521c07(0x41a)]['trim'](), 'userAvatarFrameUrl': document[_0x521c07(0x94d)](_0x521c07(0x593))[_0x521c07(0x41a)][_0x521c07(0x667)]() }; if (!_0x4dbdf0['name']) { _0x5294eb(_0x521c07(0x192)); return; } try { let _0x313550 = _0x353221; if (_0x353221) { const _0x49478b = _0x1d2a6a['characters'][_0x521c07(0x2ec)](_0x446d61 => _0x446d61['id'] === _0x353221); _0x49478b && Object[_0x521c07(0x60e)](_0x49478b, _0x4dbdf0); } else { const _0x285f74 = 'char_' + Date[_0x521c07(0x4b7)](); _0x313550 = _0x285f74; const _0x1a129d = { 'id': _0x285f74, ..._0x4dbdf0 }; _0x1a129d[_0x521c07(0x7a4)] = _0x1d13a0 ? await _0x30dd9b(_0x1d13a0) : _0x133533, _0x1d2a6a['characters'][_0x521c07(0x8b0)](_0x1a129d); const _0xb76b94 = { 'id': _0x521c07(0x1a8) + _0x285f74, 'type': _0x521c07(0x5ac), 'participantIds': [_0x285f74], 'listenTogetherSession': null }; _0x1d2a6a[_0x521c07(0x816)][_0x521c07(0x8b0)](_0xb76b94); } const _0x4fc196 = _0x1d2a6a[_0x521c07(0x816)]['find'](_0x291a4b => _0x291a4b[_0x521c07(0x832)] === 'private' && _0x291a4b['participantIds']['includes'](_0x313550)); _0x4fc196 && (_0x521c07(0x62d) === _0x521c07(0xb18) ? (_0x17f952[_0x521c07(0x1be)](_0x521c07(0xa15), _0x3da8d2, _0x521c07(0x8d0), _0x203c77), _0x4182e4[_0x521c07(0x5c7)][_0x521c07(0x8b0)]({ 'role': 'assistant', 'senderId': _0x14213c['id'], 'timestamp': _0x112a24[_0x521c07(0x4b7)](), 'isOffline': !![], 'content': '[AI返回了无法解析的剧本:\x20' + _0x11d59f + ']' })) : _0x4fc196[_0x521c07(0x25d)] = _0x317212); if (_0x1d13a0) await _0x1ebaf2(_0x521c07(0xa03) + _0x313550, _0x1d13a0); if (_0x12f755) await _0x1ebaf2('char_wallpaper_' + _0x313550, _0x12f755); if (_0x320e29) await _0x1ebaf2('char_offline_bg_' + _0x313550, _0x320e29); for (const _0x194a7d of _0x53b0b9) { if ('yrkSj' !== _0x521c07(0xbc3)) _0x255280 = { 'title': _0x5258ff['songName'], 'artist': _0x4faea9[_0x521c07(0xa2c)], 'cover': _0x258737[_0x521c07(0x8ae)] || (_0x5225a0[_0x521c07(0xb05)] ? 'db:' + _0x34fc28['coverId'] : _0xa22c32), 'isFromLibrary': !![] }, _0x18f9ab[_0x521c07(0x802)] = _0x1841b6[_0x521c07(0x324)], _0x3df9e7['play'](), _0x51d7b8['currentlyPlayingIndex'] = _0x32028c[_0x521c07(0x345)][_0x521c07(0x53e)](_0x3c1f62 => _0x3c1f62['id'] === _0x439b11['id']), _0x44f5c6(); else { const _0xcc0ad7 = document[_0x521c07(0x94d)]('char-edit-sprite-' + _0x194a7d + _0x521c07(0xad2))[_0x521c07(0x63c)][0x0]; if (_0xcc0ad7) await _0x1ebaf2(_0x521c07(0x578) + _0x194a7d + '_' + _0x313550, _0xcc0ad7); } } _0x4b4b09(), _0x540cfc(), _0x5294eb(_0x521c07(0xbaa)), _0x40b080(_0x521c07(0xa68), 'characterEdit'); if (!_0x353221) { const _0x4cb0ab = _0x521c07(0x1a8) + _0x313550; _0x32d938(_0x4cb0ab), _0x525e66(!![]); } } catch (_0x34bb3e) { if (_0x521c07(0x88b) === _0x521c07(0x4e8)) { const _0x438b96 = new _0x3a410a(), _0x2b923e = _0x35e1eb[_0x521c07(0x94d)](_0x521c07(0x1da)), _0x4d8c0c = _0xe32eab[_0x521c07(0x94d)](_0x521c07(0x71b)); if (_0x2b923e && _0x4d8c0c) { const _0x5b32be = _0xf7e2ed(_0x438b96['getHours']())[_0x521c07(0x7d4)](0x2, '0'), _0x411522 = _0x5988cf(_0x438b96[_0x521c07(0xbc5)]())[_0x521c07(0x7d4)](0x2, '0'); _0x2b923e[_0x521c07(0x724)] = _0x5b32be + ':' + _0x411522; const _0x90e345 = _0x438b96['getMonth']() + 0x1, _0x38b591 = _0x438b96[_0x521c07(0x3fc)](), _0x2aaf8b = [_0x521c07(0x417), _0x521c07(0xc79), '星期二', '星期三', _0x521c07(0x820), _0x521c07(0xc4c), _0x521c07(0x389)][_0x438b96[_0x521c07(0x9b0)]()]; _0x4d8c0c['textContent'] = _0x90e345 + '月' + _0x38b591 + '日\x20' + _0x2aaf8b; } } else console['error'](_0x521c07(0x531), _0x34bb3e), _0x5294eb(_0x521c07(0x46e) + _0x34bb3e[_0x521c07(0x6da)]); } if (_0x1d13a0 || _0x12f755 || _0x320e29 || _0x53b0b9[_0x521c07(0x870)](_0x3f74f9 => document['getElementById'](_0x521c07(0x2a4) + _0x3f74f9 + _0x521c07(0xad2))[_0x521c07(0x63c)][0x0])) _0x521c07(0xc81) !== 'bsfGc' ? _0x1357be(_0x521c07(0xac4)) : (_0x5294eb(_0x521c07(0xc6a)), setTimeout(() => location['reload'](), 0x5dc)); else { _0x40b080(_0x521c07(0xa68), _0x521c07(0x274)); if (!_0x353221) { if (_0x521c07(0xc5a) === 'ulfZR') { const _0x1a79cb = _0x3f45ee[_0x1ebf9c['length'] - 0x1]; (!_0x504a71 || _0x1a79cb[_0x521c07(0x83c)] > _0x1aab77[_0x521c07(0x83c)]) && (_0x279756 = _0x1a79cb); } else { const _0x15a441 = _0x521c07(0x892) + Date[_0x521c07(0x4b7)](); _0x32d938(_0x15a441), _0x525e66(!![]); } } } } else _0x5140dd = _0x1786cf[_0x521c07(0x564)](_0xfc2b7e => _0xfc2b7e && typeof _0xfc2b7e === 'object' && typeof _0xfc2b7e[_0x521c07(0x874)] === 'string' && typeof _0xfc2b7e[_0x521c07(0x415)] !== _0x521c07(0x68c)); } function _0x523c78() { const _0x57eca3 = _0x8e5972; _0x39d283[_0x57eca3(0x41a)] = '', _0x13bc81[_0x57eca3(0x806)] = ''; if (_0x1d2a6a[_0x57eca3(0x1bc)][_0x57eca3(0x2ab)] < 0x2) { if (_0x57eca3(0x2ed) === _0x57eca3(0x524)) _0x4ff131[_0x57eca3(0x1be)]('在准备动态回复时，读取图片失败:', _0x8dad21); else { _0x5294eb(_0x57eca3(0x879)); return; } } _0x1d2a6a[_0x57eca3(0x1bc)][_0x57eca3(0x83e)](_0x2b84bd => { const _0x5b9757 = _0x57eca3; if (_0x5b9757(0x2af) === _0x5b9757(0x44d)) _0x348bca = _0x5bf49e['userProfiles']['find'](_0x585da4 => _0x585da4['id'] === _0x2d1bc4['activeUserProfileId']) || _0x1d6334[_0x5b9757(0x575)][0x0]; else { const _0xb61ec4 = document[_0x5b9757(0x2fa)]('li'); _0xb61ec4['className'] = 'member-selection-item', _0xb61ec4[_0x5b9757(0x806)] = _0x5b9757(0x4c6) + _0x2b84bd['id'] + _0x5b9757(0x4b0) + _0x2b84bd['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2b84bd[_0x5b9757(0x7a4)] || _0x133533) + _0x5b9757(0x9c2) + _0x2b84bd['id'] + '\x22\x20class=\x22char-name\x22>' + _0x2b84bd[_0x5b9757(0x7e6)] + _0x5b9757(0x266), _0x13bc81[_0x5b9757(0xc15)](_0xb61ec4); } }), _0x40b080(_0x57eca3(0x5fa), _0x57eca3(0x1dd)); } function _0x1ccdae() { const _0x3e46b1 = _0x8e5972; if (_0x3e46b1(0x51c) === _0x3e46b1(0x51c)) { const _0x4f3aab = _0x39d283[_0x3e46b1(0x41a)][_0x3e46b1(0x667)](); if (!_0x4f3aab) { _0x5294eb(_0x3e46b1(0x95b)); return; } const _0x26a1bc = Array[_0x3e46b1(0xc3b)](_0x13bc81[_0x3e46b1(0x599)]('input[type=\x22checkbox\x22]:checked'))[_0x3e46b1(0x719)](_0x10f1e7 => _0x10f1e7[_0x3e46b1(0xaac)]['id']); if (_0x26a1bc[_0x3e46b1(0x2ab)] < 0x2) { if (_0x3e46b1(0x938) !== _0x3e46b1(0x938)) _0x4d2737[_0x3e46b1(0x668)](_0x3e46b1(0x385)), _0x17c0f1[_0x3e46b1(0x8a3)]['forEach'](_0x5053e7 => _0xa06e5a['put'](_0x5053e7)); else { _0x5294eb(_0x3e46b1(0x573)); return; } } const _0x5bf1fd = { 'id': _0x3e46b1(0x49b) + Date[_0x3e46b1(0x4b7)](), 'type': 'group', 'name': _0x4f3aab, 'participantIds': _0x26a1bc }; _0x1d2a6a['chats']['push'](_0x5bf1fd), _0x1d2a6a[_0x3e46b1(0x5e4)] = _0x5bf1fd['id'], _0x4b4b09(), _0x540cfc(), _0x115dbd(), _0x23301c(), _0x5294eb(_0x3e46b1(0x5b1) + _0x4f3aab + _0x3e46b1(0x89a)), _0x40b080(_0x3e46b1(0xa68), _0x3e46b1(0x5fa)); } else _0x5a7f5e = { 'characterId': _0xac2cbf[_0x3e46b1(0x254)], 'entries': [] }, _0x10bc61[_0x3e46b1(0x82b)][_0x3e46b1(0x8b0)](_0x464b8e); } _0x57c124[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x4ee84e[_0x8e5972(0xc5e)]()), _0x2b1b67[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x261cae), _0x4ee84e[_0x8e5972(0x672)](_0x8e5972(0x5d0), _0x4ba719), _0x4eae0e[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x244da9), _0x284b48['addEventListener'](_0x8e5972(0xc5e), () => _0x3f5e03['classList'][_0x8e5972(0x8f0)](_0x8e5972(0x7dd))), _0x46ee48['addEventListener'](_0x8e5972(0xc5e), () => _0x3f5e03['classList'][_0x8e5972(0x8f0)](_0x8e5972(0x7dd))), _0x470967[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x46dbe6 = _0x8e5972; _0x18ef37[_0x46dbe6(0x33c)](), navigator[_0x46dbe6(0x610)][_0x46dbe6(0x276)](_0x18ef37[_0x46dbe6(0x41a)])[_0x46dbe6(0x1d2)](() => { _0x5294eb('已复制到剪贴板！'); })[_0x46dbe6(0x88c)](_0xc7bf17 => { const _0x2f4da0 = _0x46dbe6; _0x5294eb(_0x2f4da0(0x1d9)); }); }), _0x460006['addEventListener'](_0x8e5972(0xc5e), _0x195014), _0x373530[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x3355ae), _0xeaf3b4[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x3d6082[_0x8e5972(0xa47)]['remove'](_0x8e5972(0x7dd))), _0x1727ae[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x3d6082['classList'][_0x8e5972(0x8f0)](_0x8e5972(0x7dd))), _0x429c9d[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x4428cd[_0x8e5972(0xc5e)]()), _0x26ef47['addEventListener'](_0x8e5972(0xc5e), () => _0x13122a[_0x8e5972(0xc5e)]()), _0x4428cd[_0x8e5972(0x672)](_0x8e5972(0x5d0), _0x4530fb => { const _0x3a5ea7 = _0x8e5972, _0x52a0ce = _0x4530fb[_0x3a5ea7(0xbdf)][_0x3a5ea7(0x63c)][0x0]; if (!_0x52a0ce) return; const _0x188095 = URL[_0x3a5ea7(0x413)](_0x52a0ce); _0x429c9d['style'][_0x3a5ea7(0x4d7)] = 'url(\x27' + _0x188095 + '\x27)'; }), _0x13122a['addEventListener']('change', _0x18eb5f => { const _0x529269 = _0x8e5972, _0x6da875 = _0x18eb5f[_0x529269(0xbdf)][_0x529269(0x63c)][0x0]; if (!_0x6da875) return; const _0x4e3e73 = URL[_0x529269(0x413)](_0x6da875); _0x26ef47[_0x529269(0x7be)][_0x529269(0x4d7)] = _0x529269(0x80f) + _0x4e3e73 + '\x27)'; }), _0x306b12[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x20d220['click']()), _0x2c21ac['addEventListener']('click', () => { const _0x5ae101 = _0x8e5972; localStorage[_0x5ae101(0x34a)](_0x5ae101(0xbe2)), _0x16939f(), _0x5294eb(_0x5ae101(0x4d5)); }), _0x20d220['addEventListener'](_0x8e5972(0x5d0), async _0x3984d1 => { const _0x541aff = _0x8e5972; if (_0x541aff(0x4d6) === 'JdeDd') _0x56a633[_0x541aff(0x7be)][_0x541aff(0x4d7)] = ''; else { const _0x33b60a = _0x3984d1[_0x541aff(0xbdf)]['files'][0x0]; if (!_0x33b60a) return; try { const _0x5bfd0d = await _0x30dd9b(_0x33b60a); localStorage[_0x541aff(0x2ca)](_0x541aff(0xbe2), _0x5bfd0d), _0x16939f(), _0x5294eb('动态页背景已更换！'); } catch (_0x38fdb8) { 'pxrDv' === _0x541aff(0xba9) ? (_0x3499d9 *= _0x3960fa / _0x189a44, _0x3b4ae4 = _0x22eeff) : _0x5294eb('错误:\x20' + _0x38fdb8[_0x541aff(0x6da)]); } } }), document[_0x8e5972(0x94d)](_0x8e5972(0x1e8))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080('chat', 'groupSettings')), document[_0x8e5972(0x94d)]('save-group-settings-button')[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x190ce8); const _0x4897a1 = document[_0x8e5972(0x94d)](_0x8e5972(0x4e0)), _0x34776c = document[_0x8e5972(0x94d)](_0x8e5972(0x53c)); _0x4897a1[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x34776c[_0x8e5972(0xc5e)]()), _0x34776c[_0x8e5972(0x672)]('change', _0x3103a1 => { const _0x277ad2 = _0x8e5972, _0x3dda1b = _0x3103a1[_0x277ad2(0xbdf)][_0x277ad2(0x63c)][0x0]; if (!_0x3dda1b) return; const _0x2a3a18 = URL['createObjectURL'](_0x3dda1b); _0x4897a1[_0x277ad2(0x802)] = _0x2a3a18, _0x4897a1[_0x277ad2(0x437)] = () => { const _0x7ded85 = _0x277ad2; 'QTiqh' === _0x7ded85(0x768) ? URL[_0x7ded85(0xc74)](_0x2a3a18) : _0xe6336e['error']('Failed\x20to\x20read\x20state\x20from\x20localStorage:', _0x3ffe3b); }; }); const _0x588749 = document[_0x8e5972(0x94d)](_0x8e5972(0xa23))['parentElement'], _0x1e5e53 = document[_0x8e5972(0x94d)](_0x8e5972(0x630)), _0x359bce = document[_0x8e5972(0x94d)]('group-bg-preview'); _0x588749['addEventListener']('click', () => _0x1e5e53['click']()), _0x1e5e53['addEventListener'](_0x8e5972(0x5d0), _0x3412d3 => { const _0x1aaa8f = _0x8e5972, _0x24400c = _0x3412d3['target'][_0x1aaa8f(0x63c)][0x0]; if (!_0x24400c) return; const _0x535546 = URL['createObjectURL'](_0x24400c); document['getElementById']('group-bg-preview')[_0x1aaa8f(0x7be)]['backgroundImage'] = 'url(\x27' + _0x535546 + '\x27)'; }); const _0xe593cb = document[_0x8e5972(0x20e)]('#group-settings-screen\x20.select-box'), _0x5397d2 = document[_0x8e5972(0x94d)](_0x8e5972(0x269)); _0xe593cb[_0x8e5972(0x672)]('click', _0x174562 => { const _0x27bd0a = _0x8e5972; _0x174562[_0x27bd0a(0x596)](), _0x5397d2[_0x27bd0a(0xa47)][_0x27bd0a(0x410)](_0x27bd0a(0x5a2)), _0xe593cb['classList'][_0x27bd0a(0x410)](_0x27bd0a(0x445)); }), _0x5397d2[_0x8e5972(0x672)]('change', _0x16a025), document[_0x8e5972(0x94d)]('group-clear-history-button')[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x56d4dc), document[_0x8e5972(0x94d)](_0x8e5972(0x797))['addEventListener'](_0x8e5972(0xc5e), async () => { const _0x563740 = _0x8e5972, _0x3193ad = _0x3f5192(); if (!_0x3193ad || _0x3193ad[_0x563740(0x832)] !== 'group') return; const _0x32f98a = await _0x2f43da(_0x563740(0x96b) + _0x3193ad[_0x563740(0x7e6)] + _0x563740(0xc38)); _0x32f98a && (_0x563740(0x320) !== _0x563740(0x66d) ? (_0x23c85a(_0x3193ad['id']), _0x5294eb(_0x563740(0x7d1)), _0x40b080(_0x563740(0xa68)), _0x525e66(![])) : _0x223747[_0x563740(0x672)](_0x563740(0xc5e), function () { const _0x1483f0 = _0x563740, _0x1aec01 = { 'id': _0x5086d6['id'], 'url': _0x559ddd[_0x1483f0(0x324)] }; _0x245ba1(this, _0x1aec01); })); }); const _0x25c894 = document['querySelector'](_0x8e5972(0x6b6)), _0x326b06 = document[_0x8e5972(0x94d)]('world-book-checkboxes-container'); _0x25c894[_0x8e5972(0x672)]('click', _0x4088b9 => { const _0x8457cc = _0x8e5972; _0x4088b9[_0x8457cc(0x596)](), _0x326b06[_0x8457cc(0xa47)]['toggle'](_0x8457cc(0x5a2)), _0x25c894[_0x8457cc(0xa47)][_0x8457cc(0x410)](_0x8457cc(0x445)); }), _0x326b06[_0x8e5972(0x672)](_0x8e5972(0x5d0), _0x1a3865), document[_0x8e5972(0x672)]('click', _0x450f60 => { const _0x1c6d58 = _0x8e5972; !document['querySelector'](_0x1c6d58(0x566))[_0x1c6d58(0xc7d)](_0x450f60[_0x1c6d58(0xbdf)]) && (_0x326b06[_0x1c6d58(0xa47)]['remove']('visible'), _0x25c894['classList'][_0x1c6d58(0x8f0)](_0x1c6d58(0x445))); }), _0x1d8a7f[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x314749 = _0x8e5972; _0x299f31(), _0x40b080(_0x314749(0x77f), 'home'); }), document[_0x8e5972(0x94d)](_0x8e5972(0x808))['addEventListener'](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0x77f))), document[_0x8e5972(0x94d)](_0x8e5972(0x69f))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x1c9492()), document[_0x8e5972(0x94d)]('back-to-world-book-list')[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x273506 = _0x8e5972; _0x273506(0x1cc) !== _0x273506(0x8c8) ? (_0x299f31(), _0x40b080(_0x273506(0x77f), _0x273506(0x1f5))) : _0x3cacc7 += '-\x20' + _0x1c7431[_0x273506(0x838)](_0x2bb460) + '\x0a'; }), document[_0x8e5972(0x94d)](_0x8e5972(0xb70))[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x7b5add), document[_0x8e5972(0x94d)](_0x8e5972(0x1a7))[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x3627fb), _0x2ccf90[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x481), 'home')), _0x2602cc[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0x481))), _0x3141ed[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x96c602['click']()), _0x96c602[_0x8e5972(0x672)](_0x8e5972(0x5d0), async _0x49ab0c => { const _0x4947e0 = _0x8e5972, _0x2c3146 = _0x49ab0c[_0x4947e0(0xbdf)][_0x4947e0(0x63c)][0x0]; if (!_0x2c3146) return; await _0x591fce(_0x2c3146); }), _0x43d9a5[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x3263b3 = _0x8e5972; _0x540cfc(), _0x40b080(_0x3263b3(0xa68), _0x3263b3(0x5a6)); }), _0x2a91e3[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x29a978 = _0x8e5972; _0xee4a5(); const _0x22479e = (_0x1d2a6a[_0x29a978(0xb07)][_0x29a978(0xa91)] || '')[_0x29a978(0x7d3)](_0x31e73f); _0x5441a2['disabled'] = _0x22479e, _0x40b080(_0x29a978(0x1ce), 'home'); }), _0x197d69[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x5a6), 'settings')), _0x150a08[_0x8e5972(0x672)]('click', () => { const _0x2ff140 = _0x8e5972; _0x1eadbc(), document[_0x2ff140(0x94d)]('chat-sticker-panel')['classList'][_0x2ff140(0x8f0)](_0x2ff140(0x7dd)), document[_0x2ff140(0x94d)](_0x2ff140(0x3da))[_0x2ff140(0x7be)][_0x2ff140(0x180)] = _0x2ff140(0x546), setTimeout(() => { const _0x247c66 = _0x2ff140; _0x40b080('home', _0x247c66(0xa68)); }, 0x14); }), _0x3e426a[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x43261f = _0x8e5972; _0x1eadbc(), document[_0x43261f(0x94d)](_0x43261f(0xb9d))[_0x43261f(0xa47)][_0x43261f(0x8f0)](_0x43261f(0x7dd)), document[_0x43261f(0x94d)](_0x43261f(0x3da))['style']['display'] = 'none', setTimeout(() => { _0x525e66(![]); }, 0x14); }), _0x4e82c2['addEventListener']('click', () => { const _0x42b039 = _0x8e5972; _0x40b080(_0x42b039(0xa68), _0x42b039(0x274)); }), _0x1733f1[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0xdcc89d = _0x8e5972; _0x2c3df4[_0xdcc89d(0xa47)][_0xdcc89d(0x5ee)](_0xdcc89d(0x7dd)); }), _0x4f91ee[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x4d8484()), _0x15f0cb['addEventListener'](_0x8e5972(0xc5e), _0x5f2ca7); function _0x1460ad(_0x465567) { const _0x296629 = _0x8e5972; if (!_0x465567 || _0x465567[_0x296629(0x832)] !== 'group') return; const _0x27c9d1 = _0x296629(0x7a6); document['body'][_0x296629(0x1c4)](_0x296629(0x440), _0x27c9d1); const _0xfc4d77 = document[_0x296629(0x94d)](_0x296629(0x4df)), _0x2b559a = _0xfc4d77[_0x296629(0x20e)]('.choice-modal-backdrop'), _0x2f0391 = document['getElementById'](_0x296629(0x937)), _0x201976 = document['getElementById']('group-edit-members'), _0x39137c = document[_0x296629(0x94d)](_0x296629(0x3b9)), _0x5dc2b3 = document[_0x296629(0x94d)](_0x296629(0x436)), _0x38bf7b = document[_0x296629(0x94d)](_0x296629(0x458)), _0x2120d8 = () => _0xfc4d77[_0x296629(0x8f0)](); _0x2f0391['addEventListener'](_0x296629(0xc5e), async () => { const _0x3203df = _0x296629; _0x2120d8(); const _0x1fb1f1 = await _0x2f43da(_0x3203df(0xb58) + _0x465567['name'] + _0x3203df(0x8fd)); if (_0x1fb1f1) { _0x465567['id'] === _0x1d2a6a[_0x3203df(0x5e4)] && (_0x1eadbc(), _0x1d2a6a[_0x3203df(0x5c7)] = [], _0x2784f3()); try { if (_0x3203df(0x241) !== _0x3203df(0x241)) { const _0x47163e = _0x3f5ccc['chats'][_0x3203df(0x2ec)](_0x7ea48c => _0x7ea48c['id'] === _0x34c895), _0xb5d9a1 = _0x47163e?.[_0x3203df(0x25d)]; let _0x4c9423 = _0x4ef001[_0x3203df(0x575)][_0x3203df(0x2ec)](_0x3a8312 => _0x3a8312['id'] === _0xb5d9a1); return !_0x4c9423 && (_0x4c9423 = _0x577d26[_0x3203df(0x575)][_0x3203df(0x2ec)](_0x3c96ff => _0x3c96ff['id'] === _0x286308[_0x3203df(0xc02)]) || _0x388205['userProfiles'][0x0]), _0x4c9423 || { 'name': '用户', 'avatar': _0x4e4b70, 'persona': '' }; } else localStorage[_0x3203df(0x34a)](_0x3203df(0x6ba) + _0x465567['id']), _0x5294eb('群聊\x22' + _0x465567[_0x3203df(0x7e6)] + '\x22\x20的聊天记录已清空。'); } catch (_0x2841e4) { if (_0x3203df(0xc50) === _0x3203df(0x608)) { const _0x4a29f7 = _0x7d6670['querySelector'](_0x3203df(0x779)); _0x4a29f7 ? _0x4a29f7[_0x3203df(0x7fb)]({ 'behavior': _0x3203df(0x2c5), 'block': _0x3203df(0x659) }) : _0x200b6b[_0x3203df(0xa4f)] = _0x334260['scrollHeight']; } else console[_0x3203df(0x1be)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x465567['id'], _0x2841e4), _0x5294eb(_0x3203df(0x71c)); } } }), _0x201976[_0x296629(0x672)](_0x296629(0xc5e), () => { const _0xb42ab3 = _0x296629; if (_0xb42ab3(0x9d9) === _0xb42ab3(0x60f)) { const _0xe7cfb8 = _0x20a5f9[_0xb42ab3(0x2fa)](_0xb42ab3(0xaf1)); _0xe7cfb8[_0xb42ab3(0x1ea)] = 'calendar-day'; const _0x5ba3b4 = _0x38c46b + '-' + _0x24c1cc(_0x1f5836 + 0x1)['padStart'](0x2, '0') + '-' + _0x596719(_0x4c3fb5)[_0xb42ab3(0x7d4)](0x2, '0'); if (_0x5ba3b4 === _0x2a4fe7) _0xe7cfb8[_0xb42ab3(0xa47)][_0xb42ab3(0x5ee)](_0xb42ab3(0x277)); if (_0x5ba3b4 === _0x1c2f02[_0xb42ab3(0x229)]) _0xe7cfb8[_0xb42ab3(0xa47)][_0xb42ab3(0x5ee)](_0xb42ab3(0xb77)); const _0x4f4f4d = _0xcbf77b['createElement']('span'); _0x4f4f4d[_0xb42ab3(0x1ea)] = _0xb42ab3(0x3d6), _0x4f4f4d[_0xb42ab3(0x724)] = _0x20d930, _0xe7cfb8[_0xb42ab3(0xc15)](_0x4f4f4d); const _0x2db98b = _0x3cabeb[_0xb42ab3(0x5ca)][_0xb42ab3(0x564)](_0x138c92 => _0x138c92[_0xb42ab3(0x9ba)] === _0x5ba3b4); if (_0x2db98b[_0xb42ab3(0x2ab)] > 0x0) { const _0x335d7d = _0x27ce53[_0xb42ab3(0x2fa)](_0xb42ab3(0xaf1)); _0x335d7d[_0xb42ab3(0x1ea)] = _0xb42ab3(0x195), _0xe7cfb8[_0xb42ab3(0xc15)](_0x335d7d); } _0xe7cfb8['addEventListener'](_0xb42ab3(0xc5e), () => { const _0x578682 = _0xb42ab3; _0x4370fd[_0x578682(0x229)] = _0x5ba3b4, _0x28afcf(); }), _0x49b87f[_0xb42ab3(0xc15)](_0xe7cfb8); } else _0x2120d8(), _0x5294eb(_0xb42ab3(0xc10)); }), _0x39137c[_0x296629(0x672)](_0x296629(0xc5e), async () => { const _0x569e3c = _0x296629; _0x2120d8(); const _0x58da70 = prompt('请输入新的群名称：', _0x465567[_0x569e3c(0x7e6)]); _0x58da70 && _0x58da70[_0x569e3c(0x667)]() && _0x58da70 !== _0x465567['name'] && (_0x465567[_0x569e3c(0x7e6)] = _0x58da70[_0x569e3c(0x667)](), _0x4b4b09(), _0x540cfc(), _0x115dbd(), _0x5294eb('群名称已更改为\x22' + _0x465567[_0x569e3c(0x7e6)] + '\x22。')); }), _0x5dc2b3[_0x296629(0x672)]('click', async () => { const _0x5caeea = _0x296629; _0x2120d8(); const _0xc2bd10 = await _0x2f43da(_0x5caeea(0x841) + _0x465567[_0x5caeea(0x7e6)] + _0x5caeea(0x558)); _0xc2bd10 && (_0x23c85a(_0x465567['id']), _0x5294eb(_0x5caeea(0x7ef) + _0x465567[_0x5caeea(0x7e6)] + '\x22\x20已删除。'), _0x525e66(![])); }), _0x2b559a[_0x296629(0x672)](_0x296629(0xc5e), _0x2120d8), _0x38bf7b[_0x296629(0x672)](_0x296629(0xc5e), _0x2120d8); } _0x451b9d[_0x8e5972(0x672)]('click', () => { const _0x2d2f17 = _0x8e5972, _0x30cddf = _0x3f5192(); if (_0x30cddf && _0x30cddf[_0x2d2f17(0x832)] === _0x2d2f17(0x5ac)) _0x344c0e(_0x30cddf['participantIds'][0x0]); else _0x30cddf && _0x30cddf[_0x2d2f17(0x832)] === _0x2d2f17(0x8aa) && _0x33db93(_0x30cddf['id']); }), _0x58c11d[_0x8e5972(0x672)](_0x8e5972(0x611), _0x48ac9f => { const _0x2a4c8b = _0x8e5972; _0x48ac9f['key'] === _0x2a4c8b(0x2f3) && !_0x48ac9f[_0x2a4c8b(0x54c)] && (_0x48ac9f['preventDefault'](), _0x4d8484()); }); const _0x1c23d9 = () => _0x2c3df4['classList'][_0x8e5972(0x8f0)](_0x8e5972(0x7dd)); _0x130513[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x1c23d9), _0x5cbffb[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x1c23d9), _0x584421[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { _0x1c23d9(), _0x344c0e(); }), _0xd9b821['addEventListener'](_0x8e5972(0xc5e), () => { const _0x2412d4 = _0x8e5972; _0x2412d4(0xb57) === 'sYcim' ? _0x46ac1f['click']() : (_0x1c23d9(), _0x523c78()); }), _0x124c50['addEventListener'](_0x8e5972(0xc5e), () => { const _0x292294 = _0x8e5972; _0x40b080(_0x292294(0xa68), _0x292294(0x5fa)), _0x525e66(![]); }), _0x16f94c['addEventListener']('click', _0x1ccdae), _0x253536[_0x8e5972(0x672)]('click', () => { const _0x23f502 = _0x8e5972; _0x1e3b0e[_0x23f502(0xa47)]['toggle'](_0x23f502(0x7dd)), _0x1e3b0e[_0x23f502(0xa47)][_0x23f502(0xc7d)](_0x23f502(0x7dd)) && (_0x7cbcb['scrollTop'] = _0x7cbcb[_0x23f502(0x227)]); }), _0xdfe8b6[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x514e96[_0x8e5972(0xc5e)]()); const _0x375533 = document[_0x8e5972(0x94d)]('chat-music-button'); _0x514e96[_0x8e5972(0x672)]('change', _0x228ed5), _0x375533[_0x8e5972(0x672)]('click', _0x1a01d9), _0xcfcbf1['addEventListener'](_0x8e5972(0xc5e), _0x27facb), _0x3c46c6[_0x8e5972(0x672)]('click', _0x4a9deb), _0x54ca2d[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x65174b), _0x49ee9b[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x56d4dc), _0x3a73df['addEventListener'](_0x8e5972(0xc5e), async () => { const _0xe25f52 = _0x8e5972, _0x2c48b2 = _0x4b2d84[_0xe25f52(0x41a)]; if (!_0x2c48b2) return; const _0x8241ed = _0x5964f7(_0x2c48b2); if (!_0x8241ed) return; const _0x4da8e9 = await _0x2f43da(_0xe25f52(0x7b4) + _0x8241ed[_0xe25f52(0x7e6)] + _0xe25f52(0xa90)); if (_0x4da8e9) { if ('JOHct' === 'JOHct') _0x3cce89(_0x2c48b2), _0x5294eb(_0xe25f52(0x9ec) + _0x8241ed[_0xe25f52(0x7e6)] + _0xe25f52(0xa8e)), _0x40b080(_0xe25f52(0xa68), _0xe25f52(0x274)), _0x525e66(![]); else { const _0x70d660 = _0x7f75cd['createElement'](_0xe25f52(0xaf1)); _0x70d660['className'] = 'member-selection-item', _0x70d660[_0xe25f52(0x806)] = _0xe25f52(0x723) + _0x562240['id'] + '\x22\x20data-id=\x22' + _0x2836c5['id'] + _0xe25f52(0x4b9) + (_0x43e7c9[_0xe25f52(0x7a4)] || _0x25be88) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x111721['id'] + _0xe25f52(0xabf) + _0x566cf6[_0xe25f52(0x7e6)] + _0xe25f52(0xb93), _0xca95c2[_0xe25f52(0xc15)](_0x70d660); } } }), _0x9de1bd[_0x8e5972(0x672)](_0x8e5972(0xac7), () => { const _0x1dda4f = _0x8e5972, _0x8df912 = _0x9de1bd['value'][_0x1dda4f(0x667)]()[_0x1dda4f(0x7d3)](_0x31e73f); _0x5441a2[_0x1dda4f(0x1b5)] = _0x8df912; }); async function _0x3f4804() { const _0x19422a = _0x8e5972; if (_0x19422a(0x865) !== 'TzAcw') { const _0x3afec6 = _0x9de1bd[_0x19422a(0x41a)]['trim'](), _0x28512c = _0x4750c1[_0x19422a(0x41a)][_0x19422a(0x667)](); if (!_0x3afec6 || !_0x28512c) { _0x5294eb(_0x19422a(0xa73)); return; } const _0x32414b = _0x3afec6[_0x19422a(0x9ed)](/\/+$/, ''), _0x502bc9 = _0x32414b + _0x19422a(0x185); _0x5441a2[_0x19422a(0x1b5)] = !![], _0x5441a2[_0x19422a(0x724)] = _0x19422a(0x3c4), _0x16bdc9[_0x19422a(0xa47)][_0x19422a(0x8f0)](_0x19422a(0x7dd)); try { const _0x3b60ba = await fetch(_0x502bc9, { 'headers': { 'Authorization': 'Bearer\x20' + _0x33378f(_0x28512c) } }); if (!_0x3b60ba['ok']) throw new Error(_0x19422a(0x51b) + _0x3b60ba[_0x19422a(0x950)]); const _0x382c58 = await _0x3b60ba[_0x19422a(0x9b2)](), _0x5c7a98 = (_0x382c58[_0x19422a(0x572)] || _0x382c58)[_0x19422a(0x719)](_0x16e8dc => _0x16e8dc['id'])[_0x19422a(0xa24)](); if (_0x5c7a98['length'] > 0x0) _0x16bdc9[_0x19422a(0x806)] = '', _0x5c7a98[_0x19422a(0x83e)](_0x287d14 => { const _0x137dc1 = _0x19422a, _0x186229 = document[_0x137dc1(0x2fa)](_0x137dc1(0xaf1)); _0x186229[_0x137dc1(0x724)] = _0x287d14, _0x186229[_0x137dc1(0x672)]('click', () => { const _0x1fbb08 = _0x137dc1; _0x48a005[_0x1fbb08(0x41a)] = _0x287d14, _0x16bdc9['classList']['remove'](_0x1fbb08(0x7dd)); }), _0x16bdc9[_0x137dc1(0xc15)](_0x186229); }), _0x16bdc9[_0x19422a(0xa47)][_0x19422a(0x5ee)]('show'), _0x5294eb('成功获取\x20' + _0x5c7a98[_0x19422a(0x2ab)] + _0x19422a(0x914)); else { if (_0x19422a(0x996) === _0x19422a(0x8da)) { const _0x267e7d = _0xce1d55[_0x19422a(0x94d)](_0x19422a(0x6c7)); if (!_0x267e7d) return; _0x267e7d[_0x19422a(0x460)] = _0xa8ddaa['preferences'][_0x19422a(0x5d9)] || ![], _0x267e7d['addEventListener'](_0x19422a(0x5d0), () => { const _0x19aba6 = _0x19422a; _0xb1d384[_0x19aba6(0x2de)][_0x19aba6(0x5d9)] = _0x267e7d['checked'], _0x2ce9a7(), _0xb7d9ad(); }); } else _0x5294eb(_0x19422a(0x1f9)); } } catch (_0x5987f6) { if (_0x19422a(0x792) !== 'QyLeP') { const _0x251962 = _0x4de227['getElementById'](_0x19422a(0x493)); _0x251962[_0x19422a(0x806)] = ''; if (_0x3c27ab[_0x19422a(0xc00)]['length'] === 0x0) { _0x251962[_0x19422a(0x806)] = _0x19422a(0xa4a); return; } _0x299362['friendCircles'][_0x19422a(0x83e)](_0x5c9d76 => { const _0x1ea2f1 = _0x19422a, _0x3b6e04 = _0x401d38[_0x1ea2f1(0x575)][_0x1ea2f1(0x2ec)](_0x1d0a9f => _0x1d0a9f['id'] === _0x5c9d76[_0x1ea2f1(0x25d)]) || { 'name': _0x1ea2f1(0x2c8) }, _0x4a0744 = _0x5ebdd3[_0x1ea2f1(0x2fa)](_0x1ea2f1(0xaf1)); _0x4a0744[_0x1ea2f1(0x1ea)] = _0x1ea2f1(0xbd1), _0x4a0744[_0x1ea2f1(0xaac)]['id'] = _0x5c9d76['id'], _0x4a0744[_0x1ea2f1(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x5c9d76[_0x1ea2f1(0x7e6)] + _0x1ea2f1(0x4fb) + _0x3b6e04[_0x1ea2f1(0x7e6)] + _0x1ea2f1(0x9cd) + _0x5c9d76[_0x1ea2f1(0x861)]['length'] + _0x1ea2f1(0x18c), _0x4a0744[_0x1ea2f1(0x672)](_0x1ea2f1(0xc5e), () => _0x2c90cd(_0x5c9d76['id'])), _0x251962[_0x1ea2f1(0xc15)](_0x4a0744); }); } else _0x5294eb(_0x19422a(0x6d5) + _0x5987f6['message'] + _0x19422a(0x275)); } finally { if (_0x19422a(0xc47) === _0x19422a(0x8c6)) return _0x446025[_0x19422a(0x1be)]('批量生成动态失败:\x20', _0x343e91), _0x36d8ba[_0x19422a(0x1be)](_0x19422a(0x35f), _0x5092a4['rawResponse'] || _0x19422a(0xa56)), null; else _0x5441a2['disabled'] = ![], _0x5441a2[_0x19422a(0x724)] = '获取'; } } else { const _0x4bfc1b = _0x33f936[_0x46bcec['id']] || []; if (_0x4bfc1b[_0x19422a(0x2ab)] === 0x0) return; const _0x4a9bb8 = _0x925506[_0x19422a(0x2fa)](_0x19422a(0xaf1)); _0x4a9bb8[_0x19422a(0x1ea)] = _0x19422a(0xc69); const _0x12ba65 = _0x4bfc1b['every'](_0x268fa2 => _0xbf6ebb['includes'](_0x268fa2['id'])); _0x4a9bb8[_0x19422a(0x806)] = _0x19422a(0x69c) + _0x2e45bc['id'] + '\x22\x20' + (_0x12ba65 ? _0x19422a(0x460) : '') + '>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>' + _0x2a69e4['name'] + _0x19422a(0x636); const _0x23c962 = _0x4a9bb8['querySelector'](_0x19422a(0x485)); _0x4bfc1b[_0x19422a(0x83e)](_0x495599 => { const _0x5542e2 = _0x19422a, _0x3272b4 = _0x293454[_0x5542e2(0x7d3)](_0x495599['id']), _0x58aa0b = _0x2d0e36['createElement'](_0x5542e2(0x8cc)); _0x58aa0b['className'] = _0x5542e2(0x6c1), _0x58aa0b[_0x5542e2(0x806)] = _0x5542e2(0x7f4) + _0x495599['id'] + _0x5542e2(0xa0a) + _0x590a2b['id'] + '\x22\x20' + (_0x3272b4 ? _0x5542e2(0x460) : '') + '>\x20' + _0x495599[_0x5542e2(0x7e6)], _0x23c962['appendChild'](_0x58aa0b); }), _0x35f943[_0x19422a(0xc15)](_0x4a9bb8); } } _0x5441a2[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x5bddd1 => { const _0x5b3f3a = _0x8e5972; _0x5bddd1[_0x5b3f3a(0x596)](), _0x3f4804(); }), document[_0x8e5972(0x672)]('click', _0x1e31b3 => { const _0x49673b = _0x8e5972; !_0x16bdc9[_0x49673b(0xc7d)](_0x1e31b3[_0x49673b(0xbdf)]) && _0x1e31b3[_0x49673b(0xbdf)] !== _0x48a005 && _0x1e31b3[_0x49673b(0xbdf)] !== _0x5441a2 && (_0x49673b(0xae8) !== _0x49673b(0xa87) ? _0x16bdc9['classList'][_0x49673b(0x8f0)](_0x49673b(0x7dd)) : (_0x1b7fe5(![]), _0x221e32(_0x49673b(0xa94) + _0x75577a[_0x49673b(0x6da)]))); }); async function _0x30dd9b(_0x129b7b) { return await _0x270777(_0x129b7b, 0x190, 0.85); } _0x493595['addEventListener']('click', () => _0x2eea78['click']()), _0x2eea78[_0x8e5972(0x672)](_0x8e5972(0x5d0), async _0xa20931 => { const _0x3f2bfb = _0x8e5972; if (_0x3f2bfb(0x39e) !== _0x3f2bfb(0x39e)) _0x44cd79('图片预览失败:\x20' + _0x228357[_0x3f2bfb(0x6da)]); else { const _0x19aadc = _0xa20931[_0x3f2bfb(0xbdf)]['files'][0x0]; if (!_0x19aadc) return; try { const _0x5d66f4 = await _0x30dd9b(_0x19aadc), _0x45870d = document[_0x3f2bfb(0x94d)](_0x3f2bfb(0xa16)); _0x45870d[_0x3f2bfb(0x7be)][_0x3f2bfb(0x4d7)] = _0x3f2bfb(0x80f) + _0x5d66f4 + '\x27)', _0x45870d['dataset']['newAvatar'] = _0x5d66f4; } catch (_0x595a4c) { _0x5294eb('错误:\x20' + _0x595a4c[_0x3f2bfb(0x6da)]); } } }), _0x96a3bc[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x1cf59f[_0x8e5972(0xc5e)]()), _0x1cf59f['addEventListener'](_0x8e5972(0x5d0), async _0x3b8046 => { const _0x781671 = _0x8e5972, _0x5a2db7 = _0x3b8046[_0x781671(0xbdf)][_0x781671(0x63c)][0x0]; if (!_0x5a2db7) return; try { if (_0x781671(0x2d8) !== _0x781671(0x620)) _0x96a3bc[_0x781671(0x802)] = await _0x30dd9b(_0x5a2db7); else { const _0x344a02 = _0x279898[_0x781671(0x94d)](_0x781671(0x786)); _0x31c5a2['audio'] && _0x4bd75a[_0x781671(0x5a0)] ? _0x344a02[_0x781671(0x1b5)] = ![] : _0x344a02['disabled'] = !![]; } } catch (_0x265aa1) { _0x5294eb(_0x781671(0x26a) + _0x265aa1[_0x781671(0x6da)]); } }); function _0x1b6e77() { const _0x4fd472 = _0x8e5972, _0x937422 = document['getElementById'](_0x4fd472(0xb9d)); _0x937422['innerHTML'] = '', _0x249708 = ![]; const _0x4e7ad9 = document[_0x4fd472(0x2fa)]('div'); _0x4e7ad9['id'] = 'sticker-panel-controls', _0x4e7ad9['innerHTML'] = _0x4fd472(0xbad), _0x937422[_0x4fd472(0xc15)](_0x4e7ad9); const _0x21fa86 = document[_0x4fd472(0x94d)](_0x4fd472(0x383)), _0x1b8097 = document['getElementById'](_0x4fd472(0x84e)), _0x551ac9 = document[_0x4fd472(0x2fa)](_0x4fd472(0xaf1)); _0x551ac9[_0x4fd472(0x7be)]['display'] = _0x4fd472(0x777), _0x551ac9['style']['gridTemplateColumns'] = _0x4fd472(0xa7b), _0x551ac9[_0x4fd472(0x7be)]['gap'] = '10px', _0x551ac9['style'][_0x4fd472(0x401)] = '10px', _0x551ac9['style'][_0x4fd472(0x9f6)] = _0x4fd472(0x605), _0x551ac9[_0x4fd472(0x7be)][_0x4fd472(0x742)] = _0x4fd472(0x2c5), _0x937422[_0x4fd472(0xc15)](_0x551ac9); const _0x1b24de = _0x26304c(); _0x1b24de['forEach'](_0x18662a => { const _0xa54d7 = _0x4fd472, _0x4a864c = document[_0xa54d7(0x2fa)](_0xa54d7(0xaf1)); _0x4a864c[_0xa54d7(0x1ea)] = _0xa54d7(0x78f), _0x4a864c[_0xa54d7(0xaac)][_0xa54d7(0x76f)] = _0x18662a[_0xa54d7(0x7e6)]; const _0x1d57ce = document[_0xa54d7(0x2fa)](_0xa54d7(0x25f)); _0x1d57ce[_0xa54d7(0x802)] = _0x18662a['url'], _0x1d57ce[_0xa54d7(0x18a)] = 'lazy', _0x1d57ce[_0xa54d7(0x443)] = _0x18662a[_0xa54d7(0x7e6)], _0x1d57ce[_0xa54d7(0x1ea)] = _0xa54d7(0xa5a), _0x4a864c[_0xa54d7(0xc15)](_0x1d57ce), _0x551ac9[_0xa54d7(0xc15)](_0x4a864c), _0x4a864c[_0xa54d7(0x672)](_0xa54d7(0xc5e), () => { const _0x1e7e5c = _0xa54d7; if (_0x1e7e5c(0xa76) === 'HEFgP') { if (_0x249708) { if (_0x1e7e5c(0x327) !== _0x1e7e5c(0x3b6)) { _0x4a864c[_0x1e7e5c(0xa47)]['toggle']('selected'); const _0x4718a8 = _0x551ac9[_0x1e7e5c(0x20e)]('.selected'); _0x1b8097[_0x1e7e5c(0xa47)]['toggle'](_0x1e7e5c(0xbb6), !!_0x4718a8); } else { const _0x557e82 = _0x2c08db[_0x1e7e5c(0x816)]['find'](_0x3f6df8 => _0x3f6df8[_0x1e7e5c(0x832)] === _0x1e7e5c(0x5ac) && _0x3f6df8[_0x1e7e5c(0x182)]['includes'](_0x4afecf['id'])), _0x26de19 = _0x125692['userProfiles'][_0x1e7e5c(0x2ec)](_0x198432 => _0x198432['id'] === (_0x557e82?.[_0x1e7e5c(0x25d)] || _0x4e4a0e[_0x1e7e5c(0xc02)])) || { 'id': _0x1e7e5c(0x1c1), 'name': '你' }; let _0x303aa0 = ''; return _0x1db6c5[_0x1e7e5c(0xa93)] && _0x572736[_0x1e7e5c(0xa93)]['length'] > 0x0 && (_0x303aa0 = _0x46a442['linkedWorldBookIds'][_0x1e7e5c(0x719)](_0x571cf5 => _0x4e29c1[_0x1e7e5c(0x5cb)][_0x1e7e5c(0x2ec)](_0x356b8b => _0x356b8b['id'] === _0x571cf5))[_0x1e7e5c(0x564)](_0x57e806)[_0x1e7e5c(0x719)](_0x3e1c65 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x3e1c65[_0x1e7e5c(0x7e6)] + _0x1e7e5c(0xa7c) + _0x3e1c65['content'])[_0x1e7e5c(0x973)]('')), _0x1e7e5c(0x587) + _0x467ef9['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0xec3869[_0x1e7e5c(0x7e6)] + _0x1e7e5c(0x293) + _0xb5e7d[_0x1e7e5c(0x647)] + _0x1e7e5c(0x187) + _0x26de19[_0x1e7e5c(0x7e6)] + _0x1e7e5c(0x516) + _0x26de19['id'] + ')\x0a' + _0x303aa0; } } else _0x1acba0(_0x18662a); } else _0x4101b3 += _0x1e7e5c(0x84b); }); }), _0x21fa86[_0x4fd472(0x672)](_0x4fd472(0xc5e), () => { const _0x20ce94 = _0x4fd472; _0x20ce94(0x488) === _0x20ce94(0x488) ? (_0x249708 = !_0x249708, _0x937422['classList'][_0x20ce94(0x410)](_0x20ce94(0x715), _0x249708), _0x21fa86[_0x20ce94(0x724)] = _0x249708 ? '完成' : '管理', _0x1b8097['style']['display'] = _0x249708 ? _0x20ce94(0x26d) : 'none', !_0x249708 && (_0x551ac9[_0x20ce94(0x599)]('.selected')[_0x20ce94(0x83e)](_0x19fc73 => _0x19fc73[_0x20ce94(0xa47)][_0x20ce94(0x8f0)](_0x20ce94(0x70a))), _0x1b8097[_0x20ce94(0xa47)][_0x20ce94(0x8f0)](_0x20ce94(0xbb6)))) : _0x531186[_0x20ce94(0xc5e)](); }), _0x1b8097[_0x4fd472(0x672)](_0x4fd472(0xc5e), async () => { const _0xa12e7a = _0x4fd472, _0x4eea08 = _0x551ac9[_0xa12e7a(0x599)](_0xa12e7a(0xc33)); if (_0x4eea08['length'] === 0x0) return; const _0x233e64 = await _0x2f43da(_0xa12e7a(0x2ac) + _0x4eea08['length'] + _0xa12e7a(0xc80)); if (_0x233e64) { const _0x4bcdf2 = JSON[_0xa12e7a(0xac1)](localStorage[_0xa12e7a(0x1c6)]('deletedStickers') || '[]'); _0x4eea08[_0xa12e7a(0x83e)](_0x57dbb7 => { const _0x1f78b0 = _0xa12e7a, _0x5b11be = _0x57dbb7[_0x1f78b0(0xaac)]['stickerName']; !_0x4bcdf2[_0x1f78b0(0x7d3)](_0x5b11be) && _0x4bcdf2[_0x1f78b0(0x8b0)](_0x5b11be); }), localStorage['setItem'](_0xa12e7a(0x198), JSON[_0xa12e7a(0x838)](_0x4bcdf2)), _0x249708 = ![], _0x1b6e77(), _0x5294eb(_0xa12e7a(0xacd)); } }), _0x1b8097[_0x4fd472(0x7be)]['display'] = _0x4fd472(0x546); const _0x53a69c = document[_0x4fd472(0x94d)](_0x4fd472(0x7aa)), _0x2f768b = new MutationObserver(() => { const _0x38b09f = _0x4fd472, _0x5c3ac6 = _0x937422['classList'][_0x38b09f(0xc7d)]('show'); _0x4e7ad9[_0x38b09f(0xa47)][_0x38b09f(0x410)](_0x38b09f(0x5a2), _0x5c3ac6), !_0x5c3ac6 && (_0x249708 && _0x21fa86[_0x38b09f(0xc5e)]()); }); _0x2f768b[_0x4fd472(0x32f)](_0x937422, { 'attributes': !![], 'attributeFilter': ['class'] }); } function _0x26304c() { const _0x177779 = _0x8e5972; if (_0x177779(0x215) === _0x177779(0x215)) { const _0x121a77 = JSON[_0x177779(0xac1)](localStorage[_0x177779(0x1c6)](_0x177779(0x198)) || '[]'); if (_0x121a77['length'] === 0x0) return _0x5e6fd1; return _0x5e6fd1[_0x177779(0x564)](_0xd98347 => !_0x121a77[_0x177779(0x7d3)](_0xd98347['name'])); } else _0x5afd8('chat', _0x177779(0x5a6)), _0x20edcf(() => _0x286ee4(), 0x64); } async function _0x4222fd(_0x387bdc) { const _0x1f7767 = _0x8e5972; if ('UUYBD' !== 'pfGiS') { const _0x21019e = await _0x2f43da(_0x1f7767(0x635)); if (!_0x21019e) return; const _0x547051 = _0x1d2a6a[_0x1f7767(0x5ca)]['findIndex'](_0x5e7e64 => _0x5e7e64['id'] === _0x387bdc); _0x547051 > -0x1 && (_0x1d2a6a[_0x1f7767(0x5ca)]['splice'](_0x547051, 0x1), _0x4b4b09(), _0x1730bf(), _0x1acbb4(), _0x36a868(), _0x5294eb('已经删掉了。')); } else _0x4f6f18[_0x1f7767(0xa47)][_0x1f7767(0x5ee)](_0x1f7767(0xbb2)), _0x121fbc[_0x1f7767(0xa47)][_0x1f7767(0x5ee)](_0x1f7767(0xb1a)), _0x4930db['classList'][_0x1f7767(0x5ee)](_0x1f7767(0x433)), _0x10479c(() => { const _0x4c0c32 = _0x1f7767; _0x2e76cb[_0x4c0c32(0xa47)][_0x4c0c32(0x8f0)]('is-visible', _0x4c0c32(0xb1a)), _0x26e28e[_0x4c0c32(0xa47)][_0x4c0c32(0x8f0)](_0x4c0c32(0xbb2)), _0x3fd6f7[_0x4c0c32(0xae1)] = _0x4542ff, _0x57de9d(), _0xed8d39['isAnimatingDiary'] = ![]; }, 0x2bc); } let _0x2b1d8e = null; function _0x2853a1(_0x233507) { const _0x435063 = _0x8e5972; if (_0x435063(0x1d7) === _0x435063(0x1d7)) { if (_0x2b1d8e) clearTimeout(_0x2b1d8e); const _0x4b1d2c = _0x233507['target'][_0x435063(0x508)]('.todo-item,\x20.important-day-item'); if (!_0x4b1d2c) return; const _0x106ec4 = _0x4b1d2c[_0x435063(0xaac)]['id']; if (!_0x106ec4) return; const _0x2ef069 = () => { const _0x493b4d = _0x435063; _0x493b4d(0x3de) !== 'TyzzF' ? (_0xe479da(), _0x407e2e[_0x493b4d(0x94d)](_0x493b4d(0xb9d))[_0x493b4d(0xa47)][_0x493b4d(0x8f0)](_0x493b4d(0x7dd)), _0x4fd084[_0x493b4d(0x94d)](_0x493b4d(0x3da))[_0x493b4d(0x7be)][_0x493b4d(0x180)] = 'none', _0xf63793(() => { const _0xf383de = _0x493b4d; _0x4e34b2(_0xf383de(0x5a6), 'chat'); }, 0x14)) : _0x2b1d8e = setTimeout(() => { const _0x28ccf5 = _0x493b4d; if (_0x233507[_0x28ccf5(0x832)] === _0x28ccf5(0xae6)) _0x233507[_0x28ccf5(0x506)](); _0x4222fd(_0x106ec4); }, 0x320); }, _0x31620f = () => { const _0x4dd983 = _0x435063; if (_0x4dd983(0x9cf) !== _0x4dd983(0x9cf)) _0x1fe3a0 = _0xa24ddb['getItem'](_0x4dd983(0x6ba) + _0x50e89d[_0x4dd983(0x5e4)]); else { if (_0x2b1d8e) clearTimeout(_0x2b1d8e); } }; document[_0x435063(0x672)](_0x435063(0x731), _0x31620f, { 'once': !![] }), document[_0x435063(0x672)](_0x435063(0x6c4), _0x31620f, { 'once': !![] }), document[_0x435063(0x672)](_0x435063(0xa3f), _0x31620f, { 'once': !![] }), document[_0x435063(0x672)]('touchmove', _0x31620f, { 'once': !![] }), _0x2ef069(); } else _0x2685e6['innerHTML'] = '<div\x20class=\x22listen-together-header\x22>' + _0x2b6925 + '\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>' + _0x589e1c + _0x435063(0x41f) + _0xb12667[_0x435063(0x4d2)] + '</div><div\x20class=\x22artist\x22>' + _0x183068[_0x435063(0xa2c)] + _0x435063(0xa1a) + _0x3bc128[_0x435063(0x452)] + '\x22>一起听</button></div>'; } function _0x274167(_0xd934c0) { const _0x437996 = _0x8e5972, _0xb5f45f = _0x1d2a6a['chats'][_0x437996(0x2ec)](_0x46a7bb => _0x46a7bb[_0x437996(0x182)]['includes'](_0xd934c0)); if (!_0xb5f45f) return ''; const _0x1e63f5 = _0x43b50c(_0xb5f45f['id']), _0x304b78 = _0x1d2a6a['calendarEvents'][_0x437996(0x564)](_0x2bb1b1 => _0x2bb1b1[_0x437996(0xa22)] === _0x1e63f5['id'] || !_0x2bb1b1[_0x437996(0xa22)]); if (_0x304b78[_0x437996(0x2ab)] === 0x0) return ''; const _0x308d89 = _0x304b78['map'](_0x5ec62c => { const _0x573136 = _0x437996; if (_0x573136(0x3ca) === 'DmQmi') _0x4e252e = _0xabf301['id']; else { const _0x93f4a4 = _0x5ec62c[_0x573136(0x832)] === _0x573136(0xb43) ? _0x573136(0xc06) : '待办'; return '-\x20[' + _0x93f4a4 + ']\x20' + _0x5ec62c['date'] + ':\x20' + _0x5ec62c[_0x573136(0x415)]; } })[_0x437996(0x973)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x1e63f5[_0x437996(0x7e6)] + '\x20记录)\x0a' + _0x308d89; } let _0x4f56b6 = { 'currentDate': new Date(), 'selectedDate': _0x3aa513() }; function _0x5d87b5() { const _0x4dd40a = _0x8e5972; if (_0x4dd40a(0x703) === 'TacdO') { document[_0x4dd40a(0x94d)](_0x4dd40a(0x927))[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => { const _0x453f8e = _0x4dd40a; _0x453f8e(0xc73) === _0x453f8e(0x696) ? _0xad93c1['src'] = _0x1fbe51[_0x453f8e(0x413)](_0x451dfc) : (_0x1730bf(), _0x40b080('calendar', _0x453f8e(0x5a6))); }), document[_0x4dd40a(0x94d)](_0x4dd40a(0xb6e))['addEventListener'](_0x4dd40a(0xc5e), () => _0x40b080(_0x4dd40a(0x5a6), _0x4dd40a(0x4eb))), document[_0x4dd40a(0x94d)](_0x4dd40a(0x873))[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => { const _0x34a2fe = _0x4dd40a; _0x4f56b6[_0x34a2fe(0x888)][_0x34a2fe(0xaf4)](_0x4f56b6[_0x34a2fe(0x888)]['getMonth']() - 0x1), _0x1730bf(); }), document['getElementById'](_0x4dd40a(0x61a))['addEventListener']('click', () => { const _0x55671c = _0x4dd40a; _0x55671c(0x824) !== 'foaRO' ? (_0x3adb6d['style']['display'] = _0x55671c(0x546), _0x416bad[_0x55671c(0x7be)][_0x55671c(0x180)] = _0x55671c(0x26d)) : (_0x4f56b6[_0x55671c(0x888)][_0x55671c(0xaf4)](_0x4f56b6['currentDate'][_0x55671c(0x833)]() + 0x1), _0x1730bf()); }), document[_0x4dd40a(0x94d)](_0x4dd40a(0x739))[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => { const _0xca59dd = _0x4dd40a; _0xca59dd(0x36d) === _0xca59dd(0x71a) ? (_0x5a85e1[_0xca59dd(0xa31)] = ![], _0x19063b(![])) : (_0x4f56b6[_0xca59dd(0x888)] = new Date(), _0x4f56b6[_0xca59dd(0x229)] = _0x3aa513(), _0x1730bf()); }), document[_0x4dd40a(0x94d)](_0x4dd40a(0xbbd))[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => { const _0x2e2942 = _0x4dd40a; if (_0x2e2942(0xab8) === _0x2e2942(0xab8)) _0x11230d(_0x4f56b6[_0x2e2942(0x229)]); else { _0x412908(_0x2e2942(0x65d)); return; } }), document[_0x4dd40a(0x94d)]('save-event-button')['addEventListener'](_0x4dd40a(0xc5e), _0x30e627), document['getElementById']('cancel-event-button')[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => document[_0x4dd40a(0x94d)](_0x4dd40a(0xb8a))[_0x4dd40a(0xa47)]['remove'](_0x4dd40a(0x7dd))), document[_0x4dd40a(0x94d)](_0x4dd40a(0x7b1))[_0x4dd40a(0x672)](_0x4dd40a(0xc5e), () => document[_0x4dd40a(0x94d)](_0x4dd40a(0xb8a))['classList']['remove'](_0x4dd40a(0x7dd))); const _0x14c9ef = document[_0x4dd40a(0x94d)](_0x4dd40a(0x7e8)); _0x14c9ef[_0x4dd40a(0x672)](_0x4dd40a(0x869), _0x2853a1), _0x14c9ef[_0x4dd40a(0x672)](_0x4dd40a(0xae6), _0x2853a1, { 'passive': ![] }); } else _0x500f3c[_0x4dd40a(0x7be)][_0x4dd40a(0x4d7)] = _0x4dd40a(0x80f) + _0x286bda[_0x4dd40a(0x413)](_0x58acf8) + '\x27)', _0x538ef9[_0x4dd40a(0x7be)][_0x4dd40a(0x947)] = 'cover', _0x2047dd[_0x4dd40a(0x7be)][_0x4dd40a(0xbed)] = _0x4dd40a(0x2aa); } function _0x1730bf() { const _0x453076 = _0x8e5972; if (_0x453076(0x95f) !== _0x453076(0x46f)) { const _0x4b9ead = _0x4f56b6[_0x453076(0x888)][_0x453076(0x688)](), _0x5c29b6 = _0x4f56b6[_0x453076(0x888)]['getMonth'](); document['getElementById']('calendar-header-title')[_0x453076(0x724)] = _0x4b9ead + '年\x20' + (_0x5c29b6 + 0x1) + '月', _0x39ff9c(_0x4b9ead, _0x5c29b6), _0x9911a4(_0x4f56b6[_0x453076(0x229)]); } else _0x42b95a[_0x453076(0x7be)]['backgroundImage'] = ''; } function _0x36a868() { const _0x2bc383 = _0x8e5972; if (_0x2bc383(0xbfd) === _0x2bc383(0xbfd)) { const _0x3048d9 = document[_0x2bc383(0x94d)]('today-todo-list'); if (!_0x3048d9) return; const _0x541d40 = _0x3aa513(), _0x45a0fe = _0x1d2a6a[_0x2bc383(0x5ca)][_0x2bc383(0x564)](_0x2f3301 => _0x2f3301['date'] === _0x541d40 && _0x2f3301['type'] === _0x2bc383(0x3b3)); _0x3048d9[_0x2bc383(0x806)] = '', _0x45a0fe[_0x2bc383(0x2ab)] > 0x0 ? _0x2bc383(0x767) !== _0x2bc383(0x767) ? (_0x5d1643(), _0x55adb9('userProfileList', 'userProfile')) : _0x45a0fe[_0x2bc383(0x83e)](_0x22c600 => { const _0x28e759 = _0x2bc383; if (_0x28e759(0x9a9) === 'solnC') _0x1f82ab[_0x28e759(0x1be)](_0x28e759(0x467), _0x50a2ee), _0x4e0d4c({ 'role': 'assistant', 'content': _0x28e759(0x26a) + _0x35ee1e['message'] }, _0x2eb5e2[_0x28e759(0x5c7)]['length'] - 0x1); else { const _0x3d4f28 = document['createElement'](_0x28e759(0xaf1)); _0x3d4f28['className'] = _0x28e759(0xb0c), _0x3d4f28[_0x28e759(0x724)] = _0x22c600[_0x28e759(0x415)], _0x3048d9[_0x28e759(0xc15)](_0x3d4f28); } }) : _0x3048d9[_0x2bc383(0x806)] = _0x2bc383(0xa1d); } else _0x27bc16(_0x5e9923['id']), _0xa0cf4d(_0x2bc383(0x7d1)), _0x83be2c(_0x2bc383(0xa68)), _0x497da8(![]); } function _0x39ff9c(_0x5a6854, _0x2da6a0) { const _0x2cf1dd = _0x8e5972, _0xc73cdb = document[_0x2cf1dd(0x94d)](_0x2cf1dd(0xafa)); _0xc73cdb['innerHTML'] = ''; const _0x13aa5e = new Date(_0x5a6854, _0x2da6a0, 0x1)['getDay'](), _0x262a87 = new Date(_0x5a6854, _0x2da6a0 + 0x1, 0x0)['getDate'](), _0x1a735a = _0x3aa513(); for (let _0x259935 = 0x0; _0x259935 < _0x13aa5e; _0x259935++) { 'KCxdj' !== _0x2cf1dd(0xa96) ? _0xc73cdb[_0x2cf1dd(0xc15)](document[_0x2cf1dd(0x2fa)](_0x2cf1dd(0xaf1))) : (_0xe35d08(), _0x1d5b77(_0x2cf1dd(0x6c9), _0x2cf1dd(0x5a6))); } for (let _0x12fa26 = 0x1; _0x12fa26 <= _0x262a87; _0x12fa26++) { if (_0x2cf1dd(0x576) === 'xBRVU') { const _0x23a537 = document[_0x2cf1dd(0x2fa)](_0x2cf1dd(0xaf1)); _0x23a537[_0x2cf1dd(0x1ea)] = _0x2cf1dd(0xbf9); const _0x22da4c = _0x5a6854 + '-' + String(_0x2da6a0 + 0x1)['padStart'](0x2, '0') + '-' + String(_0x12fa26)['padStart'](0x2, '0'); if (_0x22da4c === _0x1a735a) _0x23a537[_0x2cf1dd(0xa47)][_0x2cf1dd(0x5ee)](_0x2cf1dd(0x277)); if (_0x22da4c === _0x4f56b6[_0x2cf1dd(0x229)]) _0x23a537['classList'][_0x2cf1dd(0x5ee)](_0x2cf1dd(0xb77)); const _0x2fa877 = document['createElement'](_0x2cf1dd(0x6b2)); _0x2fa877[_0x2cf1dd(0x1ea)] = _0x2cf1dd(0x3d6), _0x2fa877[_0x2cf1dd(0x724)] = _0x12fa26, _0x23a537[_0x2cf1dd(0xc15)](_0x2fa877); const _0x3d2905 = _0x1d2a6a[_0x2cf1dd(0x5ca)][_0x2cf1dd(0x564)](_0x5f140b => _0x5f140b[_0x2cf1dd(0x9ba)] === _0x22da4c); if (_0x3d2905[_0x2cf1dd(0x2ab)] > 0x0) { if (_0x2cf1dd(0x392) !== 'Jwkfx') _0x336838[_0x2cf1dd(0x1be)](_0x2cf1dd(0xad8), _0x24906b); else { const _0x4c76f5 = document[_0x2cf1dd(0x2fa)](_0x2cf1dd(0xaf1)); _0x4c76f5[_0x2cf1dd(0x1ea)] = _0x2cf1dd(0x195), _0x23a537[_0x2cf1dd(0xc15)](_0x4c76f5); } } _0x23a537[_0x2cf1dd(0x672)](_0x2cf1dd(0xc5e), () => { const _0x3338a9 = _0x2cf1dd; _0x4f56b6[_0x3338a9(0x229)] = _0x22da4c, _0x1730bf(); }), _0xc73cdb[_0x2cf1dd(0xc15)](_0x23a537); } else { const _0x458310 = _0x16734b[_0x2cf1dd(0x832)] === _0x2cf1dd(0xb43) ? _0x2cf1dd(0xc06) : '待办'; return _0x2cf1dd(0xa4e) + _0x458310 + ']\x20' + _0x5bd0e9[_0x2cf1dd(0x9ba)] + ':\x20' + _0x398768[_0x2cf1dd(0x415)]; } } } function _0x9911a4(_0x4d6cf8) { const _0x385f61 = _0x8e5972; if ('wrnfH' !== _0x385f61(0xb1d)) { _0xee89e8 && _0x3f1cf9['push'](_0x5e93bb); _0x1dec95 = {}; const _0x9cfb97 = _0x45e169[_0x385f61(0x9dd)](0x2), _0x3b0aa5 = _0x9cfb97[_0x385f61(0xc21)](/:\s(.+)/); if (_0x3b0aa5[_0x385f61(0x2ab)] > 0x1) { const _0x46e947 = _0x3b0aa5[0x0][_0x385f61(0x667)](), _0x47c1e9 = _0x3b0aa5[0x1][_0x385f61(0x667)]()[_0x385f61(0x9ed)](/^"|"$/g, ''); _0x5457be[_0x46e947] = _0x47c1e9; } } else { const _0x5327f5 = document['getElementById']('todo-list'), _0x46edef = document['getElementById'](_0x385f61(0x27a)); _0x5327f5[_0x385f61(0x806)] = ''; const _0x158461 = new Date(_0x4d6cf8 + _0x385f61(0x321)); _0x46edef[_0x385f61(0x724)] = _0x158461[_0x385f61(0x833)]() + 0x1 + '月' + _0x158461[_0x385f61(0x3fc)]() + '日'; const _0x1f7eba = _0x1d2a6a[_0x385f61(0x5ca)][_0x385f61(0x564)](_0x337b8f => _0x337b8f[_0x385f61(0x9ba)] === _0x4d6cf8); if (_0x1f7eba[_0x385f61(0x2ab)] === 0x0) { _0x5327f5[_0x385f61(0x806)] = _0x385f61(0x77e); return; } _0x1f7eba[_0x385f61(0x83e)](_0xda21cf => { const _0x55be30 = _0x385f61, _0x6db3c6 = document[_0x55be30(0x2fa)](_0x55be30(0xaf1)); _0x6db3c6['className'] = _0xda21cf[_0x55be30(0x832)] === 'important' ? _0x55be30(0x2ae) : 'todo-item', _0x6db3c6['textContent'] = _0xda21cf[_0x55be30(0x415)], _0x6db3c6[_0x55be30(0xaac)]['id'] = _0xda21cf['id'], _0x5327f5[_0x55be30(0xc15)](_0x6db3c6); }); } } function _0x11230d(_0x3b79f6) { const _0x35b429 = _0x8e5972; document[_0x35b429(0x94d)](_0x35b429(0x5f4))['textContent'] = '为\x20' + _0x3b79f6 + _0x35b429(0x203), document[_0x35b429(0x94d)](_0x35b429(0x340))[_0x35b429(0x41a)] = '', document[_0x35b429(0x94d)](_0x35b429(0xa46))[_0x35b429(0x460)] = !![], document[_0x35b429(0x94d)](_0x35b429(0xb8a))[_0x35b429(0xa47)][_0x35b429(0x5ee)](_0x35b429(0x7dd)), document['getElementById'](_0x35b429(0x340))[_0x35b429(0x75e)](); } function _0x30e627() { const _0x167480 = _0x8e5972; if (_0x167480(0x25b) !== _0x167480(0x25b)) _0x47b337(), _0x90ce4f(![]); else { const _0x3e7ec1 = document[_0x167480(0x94d)](_0x167480(0x340))[_0x167480(0x41a)][_0x167480(0x667)](), _0x5e090f = document[_0x167480(0x20e)](_0x167480(0x64e))['value']; if (!_0x3e7ec1) { if (_0x167480(0x31e) !== _0x167480(0x31e)) { _0x196894 = ![], _0x30e472['style'][_0x167480(0x180)] = _0x167480(0x546), _0x408250[_0x167480(0x94d)](_0x167480(0x831))[_0x167480(0x7be)]['display'] = 'block', _0x25464c[_0x167480(0x94d)](_0x167480(0xa2f))[_0x167480(0x7be)]['display'] = 'block'; if (!_0x1851d5) { const _0x575d9a = _0x493b74(_0x5f5a96[_0x167480(0xc2c)]); _0x575d9a && (_0x575d9a[_0x167480(0x91c)] = _0x39525e, _0x5823d1(_0x53afe9[_0x167480(0xc2c)], 'normal')); } } else { _0x5294eb(_0x167480(0x6b8)); return; } } const _0x582152 = _0x1d2a6a[_0x167480(0x575)][_0x167480(0x2ec)](_0x10f316 => _0x10f316['id'] === _0x1d2a6a[_0x167480(0xc02)]); if (!_0x582152) { if (_0x167480(0x2fc) !== _0x167480(0x2fc)) { const _0x423d03 = _0x5439be['getElementById'](_0x47760b); if (!_0x423d03) return; if (_0x43228a['coverId']) _0x5b42c1(_0x4e7aa1['coverId'])[_0x167480(0x1d2)](_0x27cfa4 => { const _0x3bee84 = _0x167480; if (_0x27cfa4) _0x423d03[_0x3bee84(0x802)] = _0x57899b[_0x3bee84(0x413)](_0x27cfa4); }); else _0x446762['coverUrl'] && (_0x423d03[_0x167480(0x802)] = _0x54ed87[_0x167480(0x8ae)]); } else { _0x5294eb(_0x167480(0x3e6)); return; } } _0x1d2a6a[_0x167480(0x5ca)][_0x167480(0x8b0)]({ 'id': _0x167480(0xbe7) + Date[_0x167480(0x4b7)](), 'date': _0x4f56b6['selectedDate'], 'type': _0x5e090f, 'content': _0x3e7ec1, 'userId': _0x582152['id'] }), _0x4b4b09(), _0x1730bf(), _0x1acbb4(), _0x36a868(), document[_0x167480(0x94d)](_0x167480(0xb8a))['classList'][_0x167480(0x8f0)]('show'); } } function _0x1acbb4() { const _0x3ef7a4 = _0x8e5972, _0x256ac0 = document[_0x3ef7a4(0x94d)](_0x3ef7a4(0x92a)), _0x50a971 = document[_0x3ef7a4(0x94d)](_0x3ef7a4(0xb15)), _0x553b88 = new Date(); _0x553b88[_0x3ef7a4(0xa05)](0x0, 0x0, 0x0, 0x0); const _0x59225c = _0x1d2a6a['calendarEvents']['filter'](_0x51f075 => _0x51f075[_0x3ef7a4(0x832)] === 'important' && new Date(_0x51f075[_0x3ef7a4(0x9ba)] + _0x3ef7a4(0x321)) >= _0x553b88)['sort']((_0x5b1b1a, _0x23f589) => new Date(_0x5b1b1a[_0x3ef7a4(0x9ba)]) - new Date(_0x23f589[_0x3ef7a4(0x9ba)])); if (_0x59225c[_0x3ef7a4(0x2ab)] > 0x0) { if (_0x3ef7a4(0x6ab) !== _0x3ef7a4(0x6ab)) _0xa7ff90[_0x3ef7a4(0xa93)] && _0x581977[_0x3ef7a4(0xa93)][_0x3ef7a4(0x2ab)] > 0x0 && (_0x4e0aa4[_0x3ef7a4(0xa93)] = _0x233bcb['linkedWorldBookIds'][_0x3ef7a4(0x564)](_0x2380ef => !_0x48aeb2[_0x3ef7a4(0x7d3)](_0x2380ef))); else { const _0x1785ac = _0x59225c[0x0], _0x56c183 = new Date(_0x1785ac[_0x3ef7a4(0x9ba)] + _0x3ef7a4(0x321)), _0x37746f = _0x56c183 - _0x553b88, _0x584dc0 = Math[_0x3ef7a4(0x6f8)](_0x37746f / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x256ac0[_0x3ef7a4(0x724)] = _0x3ef7a4(0x487) + _0x1785ac['content'] + '」', _0x50a971[_0x3ef7a4(0x806)] = _0x3ef7a4(0x52c) + _0x584dc0 + '</span><span\x20class=\x22unit\x22>天</span>'; } } else _0x256ac0[_0x3ef7a4(0x724)] = _0x3ef7a4(0x6bb), _0x50a971[_0x3ef7a4(0x806)] = _0x3ef7a4(0x6d2); } function _0x56f33b() { const _0x45abd6 = _0x8e5972, _0x308299 = document[_0x45abd6(0x94d)](_0x45abd6(0x5ad)); _0x308299[_0x45abd6(0x806)] = ''; if (_0x1d2a6a['userProfiles'][_0x45abd6(0x2ab)] === 0x0) { _0x308299['innerHTML'] = _0x45abd6(0x9da); return; } _0x1d2a6a['userProfiles'][_0x45abd6(0x83e)](_0x2a8551 => { const _0xa45b18 = _0x45abd6, _0x2eeb20 = document[_0xa45b18(0x2fa)]('div'); _0x2eeb20[_0xa45b18(0x1ea)] = _0xa45b18(0xbd1), _0x2eeb20[_0xa45b18(0xaac)]['id'] = _0x2a8551['id']; const _0x146e41 = _0x2a8551['id'] === _0x1d2a6a[_0xa45b18(0xc02)] ? _0xa45b18(0x36a) : ''; _0x2eeb20[_0xa45b18(0x806)] = _0xa45b18(0xb5a) + (_0x2a8551[_0xa45b18(0x7a4)] || _0x43e6b0) + _0xa45b18(0x42e) + _0x2a8551['name'] + _0x146e41 + _0xa45b18(0x3f4) + _0x2a8551[_0xa45b18(0x647)][_0xa45b18(0x9dd)](0x0, 0x64) + _0xa45b18(0x21c), _0x2eeb20['addEventListener']('click', () => _0x3d7bf0(_0x2a8551['id'])), _0x308299[_0xa45b18(0xc15)](_0x2eeb20); }); } function _0x3d7bf0(_0xb54d03 = null) { const _0x17ce37 = _0x8e5972; if ('QlOvg' === _0x17ce37(0xa6d)) { _0x40b080('userProfile', _0x17ce37(0x444)); const _0x351cf1 = document[_0x17ce37(0x94d)](_0x17ce37(0x38b)), _0x29bb41 = document['getElementById'](_0x17ce37(0xa16)); _0x29bb41[_0x17ce37(0x7be)][_0x17ce37(0x4d7)] = '', delete _0x29bb41['dataset'][_0x17ce37(0x534)]; if (_0xb54d03) { if (_0x17ce37(0xa1c) !== _0x17ce37(0x9f0)) { const _0x4ed5ce = _0x1d2a6a['userProfiles']['find'](_0x2bb5a6 => _0x2bb5a6['id'] === _0xb54d03); if (!_0x4ed5ce) return; document[_0x17ce37(0x94d)](_0x17ce37(0x625))[_0x17ce37(0x41a)] = _0x4ed5ce['id'], document[_0x17ce37(0x94d)](_0x17ce37(0x22a))[_0x17ce37(0x724)] = _0x17ce37(0x365), document[_0x17ce37(0x94d)]('user-name')[_0x17ce37(0x41a)] = _0x4ed5ce['name']; if (_0x4ed5ce[_0x17ce37(0x7a4)]) _0x17ce37(0x74c) === 'WgTRd' ? _0x29bb41[_0x17ce37(0x7be)]['backgroundImage'] = _0x17ce37(0x80f) + _0x4ed5ce[_0x17ce37(0x7a4)] + '\x27)' : _0x225482[_0x52b45e] = _0x294c5d[_0x17ce37(0xac1)](_0x48c4fa); else { if ('RxcJk' === _0x17ce37(0x5dd)) { _0x1d8d99(_0x17ce37(0x544)); return; } else _0x29bb41[_0x17ce37(0x7be)][_0x17ce37(0x4d7)] = _0x17ce37(0x80f) + _0x43e6b0 + '\x27)'; } document[_0x17ce37(0x94d)]('user-persona')[_0x17ce37(0x41a)] = _0x4ed5ce[_0x17ce37(0x647)], _0x351cf1[_0x17ce37(0x7be)][_0x17ce37(0x180)] = _0x4ed5ce['id'] === _0x1d2a6a[_0x17ce37(0xc02)] ? _0x17ce37(0x546) : 'block', document[_0x17ce37(0x94d)]('delete-user-profile-button')[_0x17ce37(0x7be)][_0x17ce37(0x180)] = _0x17ce37(0x26d); } else _0x2baa7c['getElementById']('editing-world-book-id')[_0x17ce37(0x41a)] = '', _0x4060a1[_0x17ce37(0x94d)](_0x17ce37(0x733))[_0x17ce37(0x724)] = _0x17ce37(0x750), _0x229439['getElementById'](_0x17ce37(0xa2a))[_0x17ce37(0x41a)] = '', _0xefa1b0[_0x17ce37(0x94d)](_0x17ce37(0x93a))[_0x17ce37(0x41a)] = '', _0x9ace76[_0x17ce37(0x41a)] = _0x46f3aa[_0x17ce37(0x89b)]; } else document[_0x17ce37(0x94d)](_0x17ce37(0x625))[_0x17ce37(0x41a)] = '', document['getElementById'](_0x17ce37(0x22a))[_0x17ce37(0x724)] = '创建新用户', document[_0x17ce37(0x94d)](_0x17ce37(0x395))[_0x17ce37(0x41a)] = _0x17ce37(0x85a) + (_0x1d2a6a['userProfiles']['length'] + 0x1), _0x29bb41['style']['backgroundImage'] = _0x17ce37(0x80f) + _0x43e6b0 + '\x27)', document[_0x17ce37(0x94d)]('user-persona')[_0x17ce37(0x41a)] = '', _0x351cf1[_0x17ce37(0x7be)][_0x17ce37(0x180)] = _0x17ce37(0x546), document[_0x17ce37(0x94d)](_0x17ce37(0x9e8))[_0x17ce37(0x7be)]['display'] = 'none'; } else _0x1054b0[_0x17ce37(0x41a)] = _0x955d82['map'](_0x2eb170 => _0x2eb170[_0x17ce37(0x7e6)] + '--' + _0x2eb170[_0x17ce37(0x42a)])['join']('\x0a'); } function _0x4a9deb() { const _0x5e5650 = _0x8e5972; if (_0x5e5650(0x472) !== _0x5e5650(0x78d)) { const _0x1567d5 = document[_0x5e5650(0x94d)](_0x5e5650(0x625))['value'], _0x1fd7f9 = document[_0x5e5650(0x94d)]('user-avatar-preview'), _0x20a378 = { 'name': document[_0x5e5650(0x94d)](_0x5e5650(0x395))[_0x5e5650(0x41a)][_0x5e5650(0x667)](), 'persona': document[_0x5e5650(0x94d)](_0x5e5650(0x563))[_0x5e5650(0x41a)][_0x5e5650(0x667)](), 'avatar': _0x1d2a6a[_0x5e5650(0x575)][_0x5e5650(0x2ec)](_0x29f7e7 => _0x29f7e7['id'] === _0x1567d5)?.['avatar'] || _0x1fd7f9['style'][_0x5e5650(0x4d7)][_0x5e5650(0x59d)](0x5, -0x2)[_0x5e5650(0x9ed)](/'/g, '') || _0x43e6b0 }; _0x1fd7f9[_0x5e5650(0xaac)]['newAvatar'] && (_0x20a378['avatar'] = _0x1fd7f9[_0x5e5650(0xaac)]['newAvatar'], delete _0x1fd7f9[_0x5e5650(0xaac)][_0x5e5650(0x534)]); if (!_0x20a378[_0x5e5650(0x7e6)]) { if (_0x5e5650(0x255) === _0x5e5650(0xbaf)) _0x21a0f4[_0x5e5650(0x7dc)] = _0xdb16ce, _0x46ebe2 = !![]; else { _0x5294eb(_0x5e5650(0x192)); return; } } if (_0x1567d5) { if (_0x5e5650(0x1fa) === _0x5e5650(0x1fa)) { const _0x14ec52 = _0x1d2a6a['userProfiles'][_0x5e5650(0x2ec)](_0x3f43e3 => _0x3f43e3['id'] === _0x1567d5); if (_0x14ec52) Object[_0x5e5650(0x60e)](_0x14ec52, _0x20a378); } else { const _0x3c6b53 = _0x5e5650(0x812); _0x327b3c = _0x5e5650(0x3b5) + _0x9dffd4[_0x5e5650(0x7e6)] + _0x5e5650(0x9ac) + _0x3c6b53 + ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“' + _0x35ed69[_0x5e5650(0x7e6)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x3c6b53 + _0x5e5650(0x73b) + _0x3c6b53 + _0x5e5650(0x40b); } } else { if (_0x5e5650(0x357) !== _0x5e5650(0x357)) { const _0x763b9c = _0x352f72(); if (_0x763b9c && _0x763b9c['type'] === 'private') _0x492d2a(_0x763b9c[_0x5e5650(0x182)][0x0]); else _0x763b9c && _0x763b9c[_0x5e5650(0x832)] === _0x5e5650(0x8aa) && _0x142cc9(_0x763b9c['id']); } else { const _0x1b2d6c = { 'id': _0x5e5650(0x9d8) + Date[_0x5e5650(0x4b7)](), ..._0x20a378 }; _0x1d2a6a[_0x5e5650(0x575)][_0x5e5650(0x8b0)](_0x1b2d6c); if (!_0x1d2a6a[_0x5e5650(0xc02)]) { if (_0x5e5650(0x427) !== 'VTczP') { _0x23cb9b[_0x5e5650(0x806)] = _0x5e5650(0x9e0); return; } else _0x1d2a6a[_0x5e5650(0xc02)] = _0x1b2d6c['id']; } } } _0x4b4b09(), _0x5294eb(_0x5e5650(0x45d)), _0x56f33b(), _0x40b080(_0x5e5650(0x444), _0x5e5650(0x7cf)); } else { const _0x363e31 = _0x3e4cc0[_0x5e5650(0xc21)](/:\s(.+)/); if (_0x363e31[_0x5e5650(0x2ab)] > 0x1) { const _0x334819 = _0x363e31[0x0][_0x5e5650(0x667)](), _0x26c192 = _0x363e31[0x1][_0x5e5650(0x667)]()[_0x5e5650(0x9ed)](/^"|"$/g, ''); _0x576cfa[_0x334819] = _0x26c192; } } } async function _0x1c76ce() { const _0xf55002 = _0x8e5972; if (_0xf55002(0xa2d) !== _0xf55002(0xba3)) { const _0x332655 = document[_0xf55002(0x94d)](_0xf55002(0x625))['value']; if (!_0x332655) return; if (_0x1d2a6a[_0xf55002(0x575)]['length'] <= 0x1) { if ('xIkNG' !== 'xIkNG') _0x2a78db[_0xf55002(0x1be)](_0xf55002(0xb7a) + _0x1b3c13 + _0xf55002(0x27e), _0x4d4612), _0x36358f[_0xf55002(0x806)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x1eb23e[_0xf55002(0x6da)] + '</p>'; else { _0x5294eb('至少要保留一个用户。'); return; } } const _0x46198a = await _0x2f43da(_0xf55002(0x5cf)); _0x46198a && (_0x1d2a6a[_0xf55002(0x575)] = _0x1d2a6a[_0xf55002(0x575)][_0xf55002(0x564)](_0x5ca771 => _0x5ca771['id'] !== _0x332655), _0x1d2a6a[_0xf55002(0xc02)] === _0x332655 && (_0x1d2a6a[_0xf55002(0xc02)] = _0x1d2a6a['userProfiles'][0x0]['id']), _0x1d2a6a[_0xf55002(0x816)][_0xf55002(0x83e)](_0x1f04a5 => { const _0x5abb2f = _0xf55002; _0x1f04a5[_0x5abb2f(0x25d)] === _0x332655 && (_0x1f04a5[_0x5abb2f(0x25d)] = _0x1d2a6a['activeUserProfileId']); }), _0x4b4b09(), _0x5294eb(_0xf55002(0x796)), _0x56f33b(), _0x40b080(_0xf55002(0x444), _0xf55002(0x7cf))); } else _0xcbbd78(), _0x17f392[_0xf55002(0x5c7)] = [], _0x448dc1(); } function _0x299f31() { const _0x3a7fbd = _0x8e5972; _0x43e51a(), _0x57a2af(_0x1d2a6a[_0x3a7fbd(0x89b)]); } function _0x43e51a() { const _0x5bef13 = _0x8e5972, _0x5165b3 = document[_0x5bef13(0x94d)](_0x5bef13(0x809)); _0x5165b3[_0x5bef13(0x806)] = '', _0x1d2a6a[_0x5bef13(0x463)][_0x5bef13(0x83e)](_0xca9090 => { const _0x3f4f7a = _0x5bef13, _0x2bae78 = document['createElement'](_0x3f4f7a(0xaf1)); _0x2bae78[_0x3f4f7a(0x724)] = _0xca9090[_0x3f4f7a(0x7e6)], _0x2bae78['dataset']['id'] = _0xca9090['id'], _0x2bae78[_0x3f4f7a(0x7be)]['padding'] = '10px\x208px', _0x2bae78[_0x3f4f7a(0x7be)][_0x3f4f7a(0x80e)] = _0x3f4f7a(0x5e0), _0x2bae78[_0x3f4f7a(0x7be)]['cursor'] = _0x3f4f7a(0x5dc), _0x2bae78[_0x3f4f7a(0x7be)][_0x3f4f7a(0x478)] = _0x3f4f7a(0xa19), _0x2bae78['style'][_0x3f4f7a(0x5aa)] = '500'; if (_0xca9090['id'] === _0x1d2a6a[_0x3f4f7a(0x89b)]) _0x2bae78[_0x3f4f7a(0x7be)]['backgroundColor'] = _0x3f4f7a(0xa63), _0x2bae78[_0x3f4f7a(0x7be)]['color'] = _0x3f4f7a(0x5b4); else { if (_0x3f4f7a(0x730) === _0x3f4f7a(0x6e6)) { const _0x3cef80 = _0x15c6f7(_0x404247[_0x3f4f7a(0xc2c)]); if (!_0x3cef80) return; const _0x2bee5c = _0x3d7a39(_0xb2f05e[_0x3f4f7a(0x94d)](_0x3f4f7a(0x7fc))['value']), _0x4fcef8 = _0x1f705c(_0x5f2a8c[_0x3f4f7a(0x94d)](_0x3f4f7a(0x655))[_0x3f4f7a(0x41a)]), _0x224a32 = _0x3df458(_0x485028[_0x3f4f7a(0x94d)]('sprite-slider-scale')[_0x3f4f7a(0x41a)]) / 0x64; _0x3cef80['spriteTransform'] = { 'x': _0x2bee5c, 'y': _0x4fcef8, 'scale': _0x224a32 }, _0x38e9cd(), _0x6d4c6c(_0x3f4f7a(0x296)), _0x4c68ef(!![]); } else _0x2bae78[_0x3f4f7a(0x7be)][_0x3f4f7a(0x8e3)] = 'var(--text-color)'; } _0x2bae78[_0x3f4f7a(0x672)](_0x3f4f7a(0xc5e), () => { const _0x1e51a4 = _0x3f4f7a; _0x1d2a6a[_0x1e51a4(0x89b)] = _0xca9090['id'], _0x299f31(); }); let _0x58138e = null; const _0x2fdf57 = _0x18c7a3 => { if (_0xca9090['id'] === 'default') return; _0x58138e = setTimeout(() => { const _0x17abd6 = _0x4bce; if (_0x18c7a3[_0x17abd6(0x832)] === _0x17abd6(0xae6)) _0x18c7a3[_0x17abd6(0x506)](); _0x1570ec(_0xca9090['id'], _0xca9090[_0x17abd6(0x7e6)]); }, 0x320); }, _0x5a0a71 = () => { const _0x12db33 = _0x3f4f7a; if (_0x12db33(0x7d0) === 'WLsXs') { const _0x2a3ee2 = _0x1aed06, _0x25ae48 = _0x2a3ee2[_0x12db33(0x227)], _0x4f2ea1 = _0x2a3ee2[_0x12db33(0xa4f)]; _0xa0bafc[_0x12db33(0x5da)] += 0x64, _0x6e5faa(), _0x36388e(() => { const _0x47e6e5 = _0x12db33, _0x8df50e = _0x2a3ee2[_0x47e6e5(0x227)]; _0x2a3ee2[_0x47e6e5(0xa4f)] = _0x4f2ea1 + (_0x8df50e - _0x25ae48); }); } else clearTimeout(_0x58138e); }; _0x2bae78['addEventListener'](_0x3f4f7a(0x869), _0x2fdf57), _0x2bae78[_0x3f4f7a(0x672)](_0x3f4f7a(0x731), _0x5a0a71), _0x2bae78[_0x3f4f7a(0x672)]('mouseleave', _0x5a0a71), _0x2bae78[_0x3f4f7a(0x672)](_0x3f4f7a(0xae6), _0x2fdf57, { 'passive': ![] }), _0x2bae78[_0x3f4f7a(0x672)](_0x3f4f7a(0x6c4), _0x5a0a71), _0x2bae78[_0x3f4f7a(0x672)](_0x3f4f7a(0xa3f), _0x5a0a71), _0x5165b3[_0x3f4f7a(0xc15)](_0x2bae78); }); } async function _0x1570ec(_0x195fbb, _0x3a75c4) { const _0x24f735 = _0x8e5972, _0x127e26 = await _0x2f43da('确定要永久删除分类\x20“' + _0x3a75c4 + '”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。'); if (!_0x127e26) return; const _0x528bbb = _0x1d2a6a['worldBooks'][_0x24f735(0x564)](_0x592f92 => _0x592f92[_0x24f735(0x9a0)] === _0x195fbb)[_0x24f735(0x719)](_0x2e6e4a => _0x2e6e4a['id']); _0x1d2a6a[_0x24f735(0x5cb)] = _0x1d2a6a[_0x24f735(0x5cb)][_0x24f735(0x564)](_0xab72ae => _0xab72ae[_0x24f735(0x9a0)] !== _0x195fbb), _0x1d2a6a[_0x24f735(0xc64)] = _0x1d2a6a['worldBookCategories'][_0x24f735(0x564)](_0x179cb3 => _0x179cb3['id'] !== _0x195fbb); _0x1d2a6a[_0x24f735(0x89b)] === _0x195fbb && (_0x1d2a6a[_0x24f735(0x89b)] = _0x24f735(0x1c1)); const _0x3245df = [..._0x1d2a6a[_0x24f735(0x1bc)], ..._0x1d2a6a['chats']]; _0x3245df['forEach'](_0x1e29d0 => { const _0x374707 = _0x24f735; _0x374707(0xa4b) === 'kavUg' ? _0x2a11a2['src'] && _0x39d5c4['style']['opacity'] !== '0' ? (_0x3ca4e4[_0x374707(0x7be)][_0x374707(0xb52)] = 0x0, _0x3d2e8b(() => { const _0x11bd3c = _0x374707; _0x5188e6['src'] = _0x226710['createObjectURL'](_0x2b48d2), _0xa2c8d6[_0x11bd3c(0x7be)][_0x11bd3c(0xb52)] = 0x1; }, 0x96)) : (_0x86e61c['src'] = _0x350d99[_0x374707(0x413)](_0x4dc1ae), _0x4ec2e6[_0x374707(0x7be)][_0x374707(0xb52)] = 0x1) : _0x1e29d0[_0x374707(0xa93)] && _0x1e29d0[_0x374707(0xa93)][_0x374707(0x2ab)] > 0x0 && (_0x1e29d0[_0x374707(0xa93)] = _0x1e29d0['linkedWorldBookIds'][_0x374707(0x564)](_0x45fa79 => !_0x528bbb[_0x374707(0x7d3)](_0x45fa79))); }), _0x4b4b09(), _0x299f31(), _0x5294eb('分类\x20“' + _0x3a75c4 + _0x24f735(0x55f)); } function _0x57a2af(_0x3c6956) { const _0x1950a6 = _0x8e5972, _0x486837 = document[_0x1950a6(0x94d)](_0x1950a6(0xc55)); _0x486837[_0x1950a6(0x806)] = ''; const _0x247d8c = _0x1d2a6a['worldBooks'][_0x1950a6(0x564)](_0x107f45 => _0x107f45[_0x1950a6(0x9a0)] === _0x3c6956 || _0x3c6956 === _0x1950a6(0x1c1) && !_0x107f45[_0x1950a6(0x9a0)]); if (_0x247d8c['length'] === 0x0) { _0x486837['innerHTML'] = _0x1950a6(0x844); return; } _0x247d8c['forEach'](_0x1d434b => { const _0x3f0bc1 = _0x1950a6, _0x5693fe = document['createElement'](_0x3f0bc1(0xaf1)); _0x5693fe[_0x3f0bc1(0x1ea)] = _0x3f0bc1(0xbd1), _0x5693fe['dataset']['id'] = _0x1d434b['id'], _0x5693fe[_0x3f0bc1(0x806)] = _0x3f0bc1(0x6b4) + _0x1d434b[_0x3f0bc1(0x7e6)] + _0x3f0bc1(0x5e1) + _0x1d434b['content'][_0x3f0bc1(0x9dd)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x5693fe[_0x3f0bc1(0x672)](_0x3f0bc1(0xc5e), () => _0x1c9492(_0x1d434b['id'])), _0x486837[_0x3f0bc1(0xc15)](_0x5693fe); }); } document[_0x8e5972(0x94d)](_0x8e5972(0x6b1))['addEventListener'](_0x8e5972(0xc5e), async () => { const _0xeee7ba = _0x8e5972; if (_0xeee7ba(0x860) !== _0xeee7ba(0x4d0)) { const _0x45fb6e = prompt(_0xeee7ba(0xbc1)); if (_0x45fb6e && _0x45fb6e[_0xeee7ba(0x667)]()) { const _0x463149 = { 'id': _0xeee7ba(0x4c5) + Date[_0xeee7ba(0x4b7)](), 'name': _0x45fb6e['trim']() }; _0x1d2a6a['worldBookCategories'][_0xeee7ba(0x8b0)](_0x463149), _0x1d2a6a[_0xeee7ba(0x89b)] = _0x463149['id'], _0x4b4b09(), _0x299f31(); } } else { _0x2278fd[_0xeee7ba(0x816)] = _0x31bcac['chats'][_0xeee7ba(0x564)](_0x38db40 => _0x38db40['id'] !== _0x103994); try { _0x50637a[_0xeee7ba(0x34a)]('chatHistory_' + _0x5aa711); } catch (_0x276be6) { _0x31aba3[_0xeee7ba(0x1be)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x59900b, _0x276be6); } _0x29e787['activeChatId'] === _0x5e8516 && (_0x2170fc[_0xeee7ba(0x5e4)] = _0x47e5c6[_0xeee7ba(0x816)][0x0]?.['id'] || null, _0xdd359f(_0x622d1[_0xeee7ba(0x5e4)])), _0x5bf25a(); } }); function _0x1c9492(_0x11152e = null) { const _0x396057 = _0x8e5972; if ('DrXOG' === _0x396057(0x3e0)) _0x4d3079(_0x396057(0x50d)); else { _0x40b080(_0x396057(0x1f5), _0x396057(0x77f)); const _0xcf5dea = document[_0x396057(0x94d)](_0x396057(0x6e9)); _0xcf5dea[_0x396057(0x806)] = '', _0x1d2a6a['worldBookCategories']['forEach'](_0x3508c1 => { const _0x228b84 = _0x396057; if ('bnkws' !== _0x228b84(0x5c8)) { const _0x477789 = _0x2b855e[_0x228b84(0x20e)](_0x228b84(0x9c5)); _0x477789 && _0x477789['addEventListener'](_0x228b84(0xc5e), function () { const _0x4b6848 = _0x228b84, _0x38068a = { 'id': _0x5989ef['id'], 'url': _0xb6129b[_0x4b6848(0x324)] }; _0xee988c(this, _0x38068a); }); } else { const _0x73c32c = document[_0x228b84(0x2fa)]('option'); _0x73c32c[_0x228b84(0x41a)] = _0x3508c1['id'], _0x73c32c[_0x228b84(0x724)] = _0x3508c1[_0x228b84(0x7e6)], _0xcf5dea[_0x228b84(0xc15)](_0x73c32c); } }); if (_0x11152e) { if (_0x396057(0x519) === 'lKSxT') return _0x3e8767['log'](_0x396057(0x884)), 0x0; else { const _0x27d6c6 = _0x1d2a6a[_0x396057(0x5cb)][_0x396057(0x2ec)](_0x23c84c => _0x23c84c['id'] === _0x11152e); if (!_0x27d6c6) return; document['getElementById'](_0x396057(0x514))['value'] = _0x27d6c6['id'], document[_0x396057(0x94d)](_0x396057(0x733))[_0x396057(0x724)] = '编辑条目', document[_0x396057(0x94d)](_0x396057(0xa2a))[_0x396057(0x41a)] = _0x27d6c6['name'], document[_0x396057(0x94d)](_0x396057(0x93a))[_0x396057(0x41a)] = _0x27d6c6[_0x396057(0x415)], _0xcf5dea[_0x396057(0x41a)] = _0x27d6c6[_0x396057(0x9a0)] || _0x396057(0x1c1); } } else document[_0x396057(0x94d)](_0x396057(0x514))[_0x396057(0x41a)] = '', document[_0x396057(0x94d)](_0x396057(0x733))[_0x396057(0x724)] = _0x396057(0x750), document['getElementById'](_0x396057(0xa2a))['value'] = '', document[_0x396057(0x94d)](_0x396057(0x93a))['value'] = '', _0xcf5dea[_0x396057(0x41a)] = _0x1d2a6a['activeWorldBookCategoryId']; } } function _0x7b5add() { const _0x36a917 = _0x8e5972; if (_0x36a917(0xb9b) === _0x36a917(0xa11)) { _0x2e98e3(_0x36a917(0xa73)); return; } else { const _0x410404 = document[_0x36a917(0x94d)](_0x36a917(0x514))[_0x36a917(0x41a)], _0x453453 = document['getElementById'](_0x36a917(0xa2a))[_0x36a917(0x41a)][_0x36a917(0x667)](), _0x43bc01 = document['getElementById'](_0x36a917(0x93a))[_0x36a917(0x41a)]['trim'](), _0xcf06b6 = document[_0x36a917(0x94d)](_0x36a917(0x6e9))['value']; if (!_0x453453 || !_0x43bc01) { if (_0x36a917(0x37e) !== 'Ldmkd') { if (_0x23e840[_0x36a917(0x7e6)] === _0x36a917(0x30a)) return _0x4ec87c['log'](_0x36a917(0x2c6)), ''; throw _0x5a39f0; } else { _0x5294eb('条目名称和内容都不能为空！'); return; } } if (_0x410404) { const _0x15a8a1 = _0x1d2a6a['worldBooks'][_0x36a917(0x2ec)](_0x3d03a8 => _0x3d03a8['id'] === _0x410404); _0x15a8a1 && (_0x36a917(0x5c9) !== 'DwOdC' ? _0x2dd35c = _0x36a917(0x4f8) : (_0x15a8a1[_0x36a917(0x7e6)] = _0x453453, _0x15a8a1[_0x36a917(0x415)] = _0x43bc01, _0x15a8a1[_0x36a917(0x9a0)] = _0xcf06b6)); } else { const _0x1c05b9 = { 'id': _0x36a917(0x836) + Date[_0x36a917(0x4b7)](), 'name': _0x453453, 'content': _0x43bc01, 'categoryId': _0xcf06b6 }; _0x1d2a6a['worldBooks'][_0x36a917(0x8b0)](_0x1c05b9); } _0x1d2a6a[_0x36a917(0x89b)] = _0xcf06b6, _0x4b4b09(), _0x5294eb(_0x36a917(0x29c)), _0x299f31(), _0x40b080('worldBook', 'worldBookEditor'); } } async function _0x3627fb() { const _0x559c23 = _0x8e5972; if (_0x559c23(0x669) === _0x559c23(0x669)) { const _0x5039c7 = document['getElementById'](_0x559c23(0x514))[_0x559c23(0x41a)]; if (!_0x5039c7) return; const _0x1ce5eb = await _0x2f43da('确定要删除这个条目吗？此操作不可撤销。'); _0x1ce5eb && (_0x1d2a6a[_0x559c23(0x5cb)] = _0x1d2a6a['worldBooks'][_0x559c23(0x564)](_0xf2d07b => _0xf2d07b['id'] !== _0x5039c7), _0x1d2a6a[_0x559c23(0x1bc)][_0x559c23(0x83e)](_0x3c3e71 => { const _0x39db2a = _0x559c23; _0x3c3e71[_0x39db2a(0xa93)] && (_0x3c3e71[_0x39db2a(0xa93)] = _0x3c3e71[_0x39db2a(0xa93)][_0x39db2a(0x564)](_0x5cc8a1 => _0x5cc8a1 !== _0x5039c7)); }), _0x4b4b09(), _0x5294eb(_0x559c23(0x67e)), _0x299f31(), _0x40b080(_0x559c23(0x77f), _0x559c23(0x1f5))); } else { if (_0x55996f['type'] === _0x559c23(0xae6)) _0xbaf042[_0x559c23(0x506)](); _0x483efb(_0x299c88); } } function _0x1a3865() { const _0x2a6829 = _0x8e5972, _0x1a9186 = document[_0x2a6829(0x94d)](_0x2a6829(0x30c)), _0x514994 = _0x1a9186['querySelectorAll'](_0x2a6829(0x4da)), _0x2da323 = document[_0x2a6829(0x20e)](_0x2a6829(0x3e1)); if (_0x514994[_0x2a6829(0x2ab)] === 0x0) _0x2da323[_0x2a6829(0x724)] = _0x2a6829(0xaf7); else _0x514994[_0x2a6829(0x2ab)] > 0x2 ? _0x2da323[_0x2a6829(0x724)] = _0x2a6829(0x548) + _0x514994['length'] + '\x20项' : _0x2da323['textContent'] = Array[_0x2a6829(0xc3b)](_0x514994)['map'](_0x4cbdd2 => _0x4cbdd2[_0x2a6829(0x98b)][_0x2a6829(0x724)][_0x2a6829(0x667)]())[_0x2a6829(0x973)]('、'); } async function _0x33db93(_0x412c60) { const _0x236593 = _0x8e5972; if (_0x236593(0xaa6) !== 'FwqKP') { const _0x5c2f92 = _0x1d2a6a[_0x236593(0x816)][_0x236593(0x2ec)](_0x2bd7fb => _0x2bd7fb['id'] === _0x412c60); if (!_0x5c2f92 || _0x5c2f92[_0x236593(0x832)] !== _0x236593(0x8aa)) return; document[_0x236593(0x94d)](_0x236593(0x685))[_0x236593(0x41a)] = _0x5c2f92[_0x236593(0x7e6)] || '', _0x583012('group-settings-bind-user'), document[_0x236593(0x94d)](_0x236593(0x58d))[_0x236593(0x41a)] = _0x5c2f92[_0x236593(0x25d)] || _0x1d2a6a[_0x236593(0xc02)], _0x5b507c(_0x236593(0x269), _0x5c2f92[_0x236593(0xa93)] || []), _0x16a025(); const _0x5eb5e6 = document[_0x236593(0x94d)]('group-avatar-preview'), _0x787d9b = document[_0x236593(0x94d)](_0x236593(0xa23)); _0x787d9b[_0x236593(0x7be)][_0x236593(0x4d7)] = '', _0xe5b0ea(_0x236593(0x63b) + _0x412c60)[_0x236593(0x1d2)](_0x7155bb => { const _0x3bfb75 = _0x236593; _0x5eb5e6[_0x3bfb75(0x802)] = _0x7155bb ? URL[_0x3bfb75(0x413)](_0x7155bb) : _0x133533; }), _0xe5b0ea('group_bg_' + _0x412c60)['then'](_0x6921a => { const _0x226cb1 = _0x236593; if (_0x226cb1(0x673) !== _0x226cb1(0x243)) { if (_0x6921a) _0x787d9b['style'][_0x226cb1(0x4d7)] = 'url(\x27' + URL[_0x226cb1(0x413)](_0x6921a) + '\x27)'; } else _0x4024f8[_0x226cb1(0x2ca)](_0x2e0855, _0x302dfc[_0x226cb1(0x838)](_0x296b08)); }), _0x40b080(_0x236593(0x852), _0x236593(0xa68)); } else { const _0x255642 = _0x22d83e[_0x236593(0xa79)] === _0x236593(0x322) ? '你' : _0x5461c4[_0x236593(0x1a0)]; _0x3d8f29 += _0x236593(0x9ca) + _0x255642 + ':\x20' + _0x5a1c6e[_0x236593(0x415)] + '\x0a'; } } async function _0x190ce8() { const _0x35f9f2 = _0x8e5972, _0x441159 = _0x3f5192(); if (!_0x441159 || _0x441159[_0x35f9f2(0x832)] !== 'group') return; const _0x39a1da = document[_0x35f9f2(0x94d)](_0x35f9f2(0x685))[_0x35f9f2(0x41a)]['trim'](); if (!_0x39a1da) { _0x5294eb('群聊名称不能为空！'); return; } _0x441159[_0x35f9f2(0x7e6)] = _0x39a1da; const _0xa2b54d = document['querySelectorAll']('#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked'); _0x441159[_0x35f9f2(0xa93)] = Array['from'](_0xa2b54d)[_0x35f9f2(0x719)](_0x10aa13 => _0x10aa13[_0x35f9f2(0x41a)]), _0x441159[_0x35f9f2(0x25d)] = document[_0x35f9f2(0x94d)](_0x35f9f2(0x58d))[_0x35f9f2(0x41a)]; const _0x2bf918 = document[_0x35f9f2(0x94d)](_0x35f9f2(0x53c))[_0x35f9f2(0x63c)][0x0], _0x5e36a5 = document[_0x35f9f2(0x94d)](_0x35f9f2(0x630))[_0x35f9f2(0x63c)][0x0]; if (_0x2bf918) await _0x1ebaf2(_0x35f9f2(0x63b) + _0x441159['id'], _0x2bf918); if (_0x5e36a5) await _0x1ebaf2(_0x35f9f2(0x58f) + _0x441159['id'], _0x5e36a5); _0x4b4b09(), _0x115dbd(), await _0x540cfc(), _0x5294eb('群聊设置已保存！'), _0x40b080('chat', _0x35f9f2(0x852)); } function _0x16a025() { const _0x48ab31 = _0x8e5972; if ('pLNoi' !== _0x48ab31(0xc6f)) { const _0xf5c1ba = document[_0x48ab31(0x94d)]('group-world-book-checkboxes'), _0x46c6b0 = _0xf5c1ba['querySelectorAll']('.wb-entry-item\x20input:checked'), _0x520fde = document[_0x48ab31(0x20e)](_0x48ab31(0xb97)); if (_0x46c6b0[_0x48ab31(0x2ab)] === 0x0) _0x48ab31(0xaff) === _0x48ab31(0x7ec) ? (_0x4c7f04 = '0x' + _0x424190[0x1] + _0x1fbabb[0x2], _0x58ce3c = '0x' + _0x5e0abb[0x3] + _0x2cd294[0x4], _0x49c152 = '0x' + _0x58e728[0x5] + _0x4f0c71[0x6]) : _0x520fde[_0x48ab31(0x724)] = _0x48ab31(0xaf7); else { if (_0x46c6b0[_0x48ab31(0x2ab)] > 0x2) _0x48ab31(0x419) !== _0x48ab31(0x822) ? _0x520fde['textContent'] = _0x48ab31(0x548) + _0x46c6b0[_0x48ab31(0x2ab)] + '\x20项' : (_0x49f290['textContent'] = _0x48ab31(0x98e), _0x25621b[_0x48ab31(0x41a)] = '', _0x34f478[_0x48ab31(0x41a)] = _0x48ab31(0xa01) + (_0x87566e[_0x48ab31(0xc00)][_0x48ab31(0x2ab)] + 0x1), _0x1309db[_0x48ab31(0x41a)] = _0x1dfc18[_0x48ab31(0xc02)], _0x25aebf[_0x48ab31(0x7be)][_0x48ab31(0x180)] = _0x48ab31(0x546)); else { if (_0x48ab31(0x332) !== _0x48ab31(0x98a)) _0x520fde[_0x48ab31(0x724)] = Array[_0x48ab31(0xc3b)](_0x46c6b0)[_0x48ab31(0x719)](_0x533b3b => _0x533b3b[_0x48ab31(0x98b)][_0x48ab31(0x724)][_0x48ab31(0x667)]())[_0x48ab31(0x973)]('、'); else { const _0x28ebd4 = _0x32d8ec[_0x48ab31(0x25c)](_0x25b68d, 'readwrite'), _0x50f180 = _0x28ebd4[_0x48ab31(0x926)](_0x1ff051), _0x406890 = _0x50f180[_0x48ab31(0xbac)](_0xf23f96); _0x406890[_0x48ab31(0x33f)] = () => _0x20f282(), _0x406890['onerror'] = () => _0x4ab066(_0x406890[_0x48ab31(0x1be)]); } } } } else _0xc176ab && _0x2358fa(_0x2c1d8c['id'], _0x525f3d[_0x48ab31(0x719)](_0x5dc1d3 => _0x5dc1d3['id'])); } async function _0x18542d() { const _0x4a9673 = _0x8e5972; if ('FbAgC' === 'eRSeh') _0x15165c += '\x20[并附上了一张图片]'; else { const _0x2c176c = _0x3f5192(), _0xe3755d = (_0x2c176c?.['participantIds'] || [])[_0x4a9673(0x719)](_0x5964f7)[_0x4a9673(0x564)](Boolean), _0x492b0a = _0x43b50c(_0x2c176c['id']); if (!_0x2c176c || _0x2c176c[_0x4a9673(0x832)] !== _0x4a9673(0x8aa) || _0xe3755d[_0x4a9673(0x2ab)] < 0x2) return null; const _0x432e39 = _0x2c176c['linkedWorldBookIds'] && _0x2c176c[_0x4a9673(0xa93)]['length'] > 0x0 ? _0x4a9673(0x4db) + _0x2c176c[_0x4a9673(0xa93)][_0x4a9673(0x719)](_0x49704d => _0x1d2a6a[_0x4a9673(0x5cb)][_0x4a9673(0x2ec)](_0x5c59ac => _0x5c59ac['id'] === _0x49704d))['filter'](Boolean)[_0x4a9673(0x719)](_0x48396a => _0x4a9673(0x959) + _0x48396a['name'] + '\x0a' + _0x48396a[_0x4a9673(0x415)])[_0x4a9673(0x973)]('') : '', _0x2895ed = _0x492b0a['persona'] ? _0x4a9673(0xb39) + _0x492b0a['name'] + _0x4a9673(0xb42) + _0x492b0a['persona'] : ''; let _0x2e2b03 = ''; const _0x2ee441 = new Date(), _0x2aced9 = _0x1d2a6a[_0x4a9673(0x5c7)]['at'](-0x1); _0x2e2b03 += '\x0a-\x20**当前时间**:\x20' + _0x2ee441['toLocaleString'](_0x4a9673(0x4cf), { 'dateStyle': _0x4a9673(0x541), 'timeStyle': _0x4a9673(0x25e) }); if (_0x2aced9) { const _0x19053f = new Date(_0x2aced9[_0x4a9673(0x83c)]), _0x6a9e07 = Math[_0x4a9673(0x7a5)]((_0x2ee441 - _0x19053f) / (0x3e8 * 0x3c)); if (_0x6a9e07 < 0x5) _0x2e2b03 += _0x4a9673(0x3ff); else { if (_0x6a9e07 < 0x78) _0x2e2b03 += '\x0a-\x20**对话状态**:\x20群里在' + _0x6a9e07 + _0x4a9673(0x5ea); else { const _0x1e5476 = Math[_0x4a9673(0x7a5)](_0x6a9e07 / 0x3c); if (_0x1e5476 < 0x30) _0x2e2b03 += _0x4a9673(0x61f) + _0x1e5476 + _0x4a9673(0x6f3); else _0x2e2b03 += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x4a9673(0x7a5)](_0x1e5476 / 0x18) + _0x4a9673(0xad3); } } } else _0x2e2b03 += _0x4a9673(0x528); const _0x828ed4 = [..._0x1d2a6a[_0x4a9673(0x5c7)]][_0x4a9673(0xba0)]()[_0x4a9673(0x2ec)](_0x88ff49 => _0x88ff49[_0x4a9673(0x874)] === _0x4a9673(0xadb))?.[_0x4a9673(0x415)] || '', _0x1ade81 = _0x501073(_0x2c176c, _0x828ed4), _0x27f133 = _0x1d2a6a['conversationHistory'][_0x4a9673(0x59d)](-0x78), _0x169902 = _0x5e6fd1['map'](_0x288e28 => _0x288e28[_0x4a9673(0x7e6)]), _0x1338fd = _0x5d551b(), _0xba33e2 = await Promise['all'](_0xe3755d[_0x4a9673(0x719)](async _0x22e1cc => { const _0x2e1151 = _0x4a9673, { omniText: _0x2dbaf9 } = _0x57f616(_0x22e1cc['id'], _0x2c176c['id']), _0x588b52 = _0x49ee64(_0x22e1cc['id']), _0x1d5cdd = await _0x1b021d(_0x22e1cc['id']), _0x3caf3e = _0x22e1cc[_0x2e1151(0xa93)] && _0x22e1cc[_0x2e1151(0xa93)][_0x2e1151(0x2ab)] > 0x0 ? _0x2e1151(0x39d) + _0x22e1cc[_0x2e1151(0x7e6)] + _0x2e1151(0x549) + _0x22e1cc[_0x2e1151(0xa93)][_0x2e1151(0x719)](_0x1f0ad9 => _0x1d2a6a[_0x2e1151(0x5cb)][_0x2e1151(0x2ec)](_0x5a5b52 => _0x5a5b52['id'] === _0x1f0ad9))[_0x2e1151(0x564)](Boolean)[_0x2e1151(0x719)](_0x2e7c6a => _0x2e1151(0x2e9) + _0x2e7c6a[_0x2e1151(0x7e6)] + '\x0a' + _0x2e7c6a[_0x2e1151(0x415)])[_0x2e1151(0x973)]('') : ''; let _0x3a790f = _0x2e1151(0xbdb) + _0x22e1cc['name'] + _0x2e1151(0xb2c); const _0x167119 = _0x3f02c3(_0x22e1cc['id']), _0x384586 = new Date(); if (_0x167119) { if ('sbnkH' === _0x2e1151(0xb7e)) _0x16086a[_0x2e1151(0x7be)][_0x2e1151(0x4d7)] = _0x2e1151(0x80f) + _0x520691[_0x2e1151(0x413)](_0x3ce5d4) + '\x27)', _0x574abd[_0x2e1151(0x7be)][_0x2e1151(0x947)] = _0x2e1151(0x9a7), _0x4a45e1[_0x2e1151(0x7be)][_0x2e1151(0xbed)] = _0x2e1151(0x2aa); else { const _0xadf8cd = new Date(_0x167119[_0x2e1151(0x83c)]); _0x3a790f += _0x2e1151(0xbd9) + _0x492b0a[_0x2e1151(0x7e6)] + _0x2e1151(0x847) + _0x1af056(_0xadf8cd) + '\x0a'; } } else _0x2e1151(0xa5f) !== 'cPmpR' ? _0x3a790f += _0x2e1151(0x246) + _0x492b0a[_0x2e1151(0x7e6)] + '的第一次互动。\x0a' : _0x4d6cc9[_0x2e1151(0x802)] = _0x1b7dfd[_0x2e1151(0x413)](_0x57db34); return { 'id': _0x22e1cc['id'], 'name': _0x22e1cc['name'], 'persona': _0x22e1cc[_0x2e1151(0x647)] || '乐于助人的助手', 'memory': _0x2dbaf9 + _0x588b52 + _0x1d5cdd + _0x3caf3e + _0x3a790f }; })), _0x3ded33 = 0x5, _0x2c8b26 = 0xc, _0x29ae97 = _0x4a9673(0x331)[_0x4a9673(0x667)](), _0x498e9a = { 'instruction': ('\x0a-\x20你正在为一个名为“' + (_0x2c176c[_0x4a9673(0x7e6)] || '群聊') + '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“' + (_0x492b0a[_0x4a9673(0x7e6)] || '用户') + _0x4a9673(0x96d) + _0x3ded33 + '\x20到\x20' + _0x2c8b26 + _0x4a9673(0x72a) + (_0x492b0a['name'] || '用户') + _0x4a9673(0x3ed) + _0x2e2b03 + '\x20\x0a' + _0x2895ed + '\x0a' + _0x432e39 + _0x4a9673(0x911) + _0x1338fd + '\x0a')[_0x4a9673(0x667)](), 'personas': _0xba33e2, 'mentioned': _0x1ade81 ? { 'id': _0x1ade81['id'], 'name': _0x1ade81[_0x4a9673(0x7e6)] } : null, 'stickerList': _0x169902 }, _0x389290 = { 'type': 'object', 'properties': { 'events': { 'type': 'array', 'items': { 'type': _0x4a9673(0x595), 'required': [_0x4a9673(0xa71), 'kind'], 'properties': { 'senderId': { 'type': 'string' }, 'kind': { 'type': 'string', 'enum': [_0x4a9673(0x8df), _0x4a9673(0x4b6), _0x4a9673(0x6d1)] }, 'content': { 'type': _0x4a9673(0x3e9) }, 'sticker': { 'type': _0x4a9673(0x3e9) }, 'songName': { 'type': 'string' }, 'artist': { 'type': 'string' } } } } }, 'required': [_0x4a9673(0x845)] }, _0x4072e5 = [{ 'role': _0x4a9673(0xc0f), 'content': _0x29ae97 }]; for (const _0x3de40d of _0x27f133) { const _0xcb90a0 = _0x3de40d['role'] === 'ai' || _0x3de40d[_0x4a9673(0x874)] === 'assistant' ? _0x4a9673(0xb29) : _0x4a9673(0xadb); let _0x1dd061 = { 'role': _0xcb90a0, 'content': _0x3de40d['content'] }, _0x1f4a93 = !!_0x3de40d[_0x4a9673(0x415)], _0x5ed651 = null; if (_0x3de40d[_0x4a9673(0x7dc)]) _0x5ed651 = _0x3de40d['image']; else { if (_0x3de40d[_0x4a9673(0xbf0)]) { if ('mHMvx' !== _0x4a9673(0xb5d)) !_0x597f4a[_0x4a9673(0xc7d)](_0x3f6cdb[_0x4a9673(0xbdf)]) && _0x27abe0['target'] !== _0x3ea26b && _0x27a09e[_0x4a9673(0xbdf)] !== _0x171910 && _0x45b873['classList'][_0x4a9673(0x8f0)](_0x4a9673(0x7dd)); else try { const _0x5ec373 = await _0xe5b0ea(_0x3de40d['imageId']); if (_0x5ec373) _0x5ed651 = await _0x22515d(_0x5ec373); } catch (_0x3c483c) { console[_0x4a9673(0x1be)](_0x4a9673(0xb1f), _0x3c483c); } } } _0x5ed651 && (_0x1dd061['image'] = _0x5ed651, _0x1f4a93 = !![]); if (_0x1f4a93) _0x4072e5['push'](_0x1dd061); } _0x4072e5[_0x4a9673(0x8b0)]({ 'role': 'user', 'content': _0x4a9673(0x2cb) + JSON[_0x4a9673(0x838)](_0x389290) + '\x0a\x0aINPUT:\x0a' + JSON[_0x4a9673(0x838)](_0x498e9a) }); try { if (_0x4a9673(0xa06) !== _0x4a9673(0xa06)) _0x4b1247[_0x4a9673(0x7be)][_0x4a9673(0x8e3)] = _0x4a9673(0x99f); else { const _0x5d6497 = await _0x3e56bc(_0x4072e5, { 'json': !![] }); if (!_0x5d6497) return null; let _0x3bf266 = _0x5d6497[_0x4a9673(0x667)](); const _0x5da209 = _0x3bf266['match'](/```json([\s\S]*?)```/i); if (_0x5da209) _0x3bf266 = _0x5da209[0x1][_0x4a9673(0x667)](); _0x3bf266 = _0x3f0d88(_0x3bf266); let _0x38fd7c = null; try { 'EFWiq' !== _0x4a9673(0x7f3) ? _0x38fd7c = JSON[_0x4a9673(0xac1)](_0x3bf266) : _0x4884b9[_0x4a9673(0x5c2)] === _0x4a9673(0x2f3) && !_0x452730[_0x4a9673(0x54c)] && (_0xa1c7da['preventDefault'](), _0x13a637()); } catch (_0xa750fa) { console['error']('JSON\x20解析失败!\x20错误原因:', _0xa750fa), console['error'](_0x4a9673(0xb80), _0x3bf266); } if (!_0x38fd7c || !Array[_0x4a9673(0x57e)](_0x38fd7c[_0x4a9673(0x845)])) return null; return _0x38fd7c = _0x173af6(_0x38fd7c, _0xe3755d, _0x169902), _0x38fd7c[_0x4a9673(0x845)] = _0x38fd7c[_0x4a9673(0x845)][_0x4a9673(0x59d)](0x0, _0x2c8b26), _0x38fd7c[_0x4a9673(0x845)][_0x4a9673(0x2ab)] ? _0x38fd7c : null; } } catch (_0x20b35e) { if ('fSOly' !== 'aUcCu') { if (_0x20b35e[_0x4a9673(0x7e6)] !== _0x4a9673(0x30a)) { if (_0x4a9673(0xc05) === _0x4a9673(0xc05)) console[_0x4a9673(0x1be)](_0x4a9673(0x65c), _0x20b35e); else { const _0x177232 = []; for (const _0x1648a7 of _0x4c2a55['keys'](_0x46469b)) { const _0x330134 = _0x1648a7[_0x4a9673(0x8ce)](); if (_0x4d264b['some'](_0x3c063d => _0x330134[_0x4a9673(0x3c5)](_0x3c063d))) { const _0x1f4383 = _0x32faed[_0x1648a7]; if (typeof _0x1f4383 === _0x4a9673(0x3e9)) _0x177232[_0x4a9673(0x8b0)](_0x1f4383); if (_0x6f99fc['isArray'](_0x1f4383)) _0x1f4383[_0x4a9673(0x83e)](_0x49343b => { const _0x14b8f7 = _0x4a9673; if (typeof _0x49343b === _0x14b8f7(0x3e9)) _0x177232['push'](_0x49343b); }); } } if (_0x177232[_0x4a9673(0x2ab)]) return _0x177232[_0x4a9673(0x585)](_0x2543cd)['slice'](0x0, 0x9); } } return null; } else _0x499319 = { 'speaker': _0x44ec2b[_0x4a9673(0x7e6)], 'line': _0x14fadc[_0x4a9673(0x415)], 'emotion': _0x4a9673(0x8fe) }; } } } function _0x2a4c9e() { const _0x4db53e = _0x8e5972, _0x6c61d5 = document['getElementById']('friend-circle-list-container'); _0x6c61d5[_0x4db53e(0x806)] = ''; if (_0x1d2a6a[_0x4db53e(0xc00)][_0x4db53e(0x2ab)] === 0x0) { _0x6c61d5[_0x4db53e(0x806)] = _0x4db53e(0xa4a); return; } _0x1d2a6a['friendCircles'][_0x4db53e(0x83e)](_0x3c51e5 => { const _0x1ac0e4 = _0x4db53e, _0x2e3e2f = _0x1d2a6a[_0x1ac0e4(0x575)][_0x1ac0e4(0x2ec)](_0x194fa7 => _0x194fa7['id'] === _0x3c51e5[_0x1ac0e4(0x25d)]) || { 'name': _0x1ac0e4(0x2c8) }, _0x4597f3 = document[_0x1ac0e4(0x2fa)](_0x1ac0e4(0xaf1)); _0x4597f3[_0x1ac0e4(0x1ea)] = 'world-book-item', _0x4597f3[_0x1ac0e4(0xaac)]['id'] = _0x3c51e5['id'], _0x4597f3[_0x1ac0e4(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x3c51e5[_0x1ac0e4(0x7e6)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x2e3e2f[_0x1ac0e4(0x7e6)] + _0x1ac0e4(0x9cd) + _0x3c51e5['memberCharacterIds'][_0x1ac0e4(0x2ab)] + _0x1ac0e4(0x18c), _0x4597f3[_0x1ac0e4(0x672)](_0x1ac0e4(0xc5e), () => _0x52aebf(_0x3c51e5['id'])), _0x6c61d5[_0x1ac0e4(0xc15)](_0x4597f3); }); } function _0x371c70(_0x188163 = null) { const _0x3cd46f = _0x8e5972, _0x49b9c4 = document[_0x3cd46f(0x94d)](_0x3cd46f(0xc2d)), _0x1fedbd = document['getElementById']('friend-circle-edit-bind-user'), _0x2fedf8 = document[_0x3cd46f(0x94d)](_0x3cd46f(0x299)), _0x43b1a1 = document[_0x3cd46f(0x94d)]('friend-circle-edit-title'), _0x25be7b = document['getElementById']('editing-friend-circle-id'), _0xa3c29 = document[_0x3cd46f(0x94d)](_0x3cd46f(0xa6b)); _0x583012(_0x3cd46f(0x2f8)), _0x2fedf8[_0x3cd46f(0x806)] = '', _0x1d2a6a['characters'][_0x3cd46f(0x83e)](_0x2df0c8 => { const _0x1983ba = _0x3cd46f; if ('KoIwi' === 'ggmvy') _0x4b76f4[_0x1983ba(0xa47)]['add'](_0x1983ba(0x400)); else { const _0xf08609 = document[_0x1983ba(0x2fa)](_0x1983ba(0xaf1)); _0xf08609['className'] = _0x1983ba(0x761), _0xf08609[_0x1983ba(0x806)] = _0x1983ba(0x723) + _0x2df0c8['id'] + _0x1983ba(0x4b0) + _0x2df0c8['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2df0c8['avatar'] || _0x133533) + _0x1983ba(0x42b) + _0x2df0c8['id'] + _0x1983ba(0xabf) + _0x2df0c8['name'] + _0x1983ba(0xb93), _0x2fedf8['appendChild'](_0xf08609); } }); if (_0x188163) { const _0x323d81 = _0x1d2a6a[_0x3cd46f(0xc00)][_0x3cd46f(0x2ec)](_0x126926 => _0x126926['id'] === _0x188163); if (!_0x323d81) return; _0x43b1a1['textContent'] = '编辑好友圈', _0x25be7b[_0x3cd46f(0x41a)] = _0x323d81['id'], _0x49b9c4[_0x3cd46f(0x41a)] = _0x323d81[_0x3cd46f(0x7e6)], _0x1fedbd['value'] = _0x323d81[_0x3cd46f(0x25d)], _0xa3c29[_0x3cd46f(0x7be)][_0x3cd46f(0x180)] = _0x3cd46f(0x26d), _0x323d81[_0x3cd46f(0x861)][_0x3cd46f(0x83e)](_0x181ee9 => { const _0xa12ce0 = _0x3cd46f; if (_0xa12ce0(0x79e) === _0xa12ce0(0x79e)) { const _0x26f43d = _0x2fedf8['querySelector'](_0xa12ce0(0x2a6) + _0x181ee9); if (_0x26f43d) _0x26f43d[_0xa12ce0(0x460)] = !![]; } else _0x20ee6d > _0xb53626 && (_0xb0bfd1 *= _0x2baccf / _0x3a9346, _0x4da6aa = _0x131a01); }); } else _0x43b1a1[_0x3cd46f(0x724)] = _0x3cd46f(0x98e), _0x25be7b['value'] = '', _0x49b9c4[_0x3cd46f(0x41a)] = _0x3cd46f(0xa01) + (_0x1d2a6a[_0x3cd46f(0xc00)][_0x3cd46f(0x2ab)] + 0x1), _0x1fedbd[_0x3cd46f(0x41a)] = _0x1d2a6a['activeUserProfileId'], _0xa3c29[_0x3cd46f(0x7be)]['display'] = _0x3cd46f(0x546); _0x40b080('friendCircleEdit', _0x3cd46f(0x3df)); } function _0x5148dc() { const _0x4f846d = _0x8e5972, _0x530341 = document[_0x4f846d(0x94d)]('editing-friend-circle-id')['value'], _0x16c381 = document['getElementById'](_0x4f846d(0xc2d))[_0x4f846d(0x41a)][_0x4f846d(0x667)](), _0x2915e9 = document[_0x4f846d(0x94d)](_0x4f846d(0x2f8))[_0x4f846d(0x41a)], _0x6886c2 = Array[_0x4f846d(0xc3b)](document[_0x4f846d(0x599)]('#friend-circle-member-selection\x20input:checked'))[_0x4f846d(0x719)](_0x311b92 => _0x311b92[_0x4f846d(0xaac)]['id']); if (!_0x16c381) { if (_0x4f846d(0xace) === 'dKpFH') { _0x5294eb(_0x4f846d(0x65d)); return; } else _0x1f86cb[_0x4f846d(0x888)] = new _0xbf94a9(), _0x5c7461[_0x4f846d(0x229)] = _0x3427ea(), _0x2e3748(); } if (_0x6886c2['length'] === 0x0) { _0x5294eb(_0x4f846d(0x616)); return; } if (_0x530341) { if (_0x4f846d(0x4ff) === _0x4f846d(0x4ff)) { const _0x5e8cee = _0x1d2a6a[_0x4f846d(0xc00)][_0x4f846d(0x2ec)](_0x327c49 => _0x327c49['id'] === _0x530341); _0x5e8cee && (_0x4f846d(0x6e3) !== _0x4f846d(0x2ee) ? (_0x5e8cee['name'] = _0x16c381, _0x5e8cee[_0x4f846d(0x25d)] = _0x2915e9, _0x5e8cee['memberCharacterIds'] = _0x6886c2) : (_0x105a76[_0x4f846d(0x7be)][_0x4f846d(0x180)] = _0x4f846d(0x546), _0x4be944['style'][_0x4f846d(0xc39)] = '2px\x20dashed\x20var(--border-color)', _0x3f0db0[_0x4f846d(0x7be)][_0x4f846d(0x79d)] = 'rgba(255,255,255,0.2)')); } else _0x5b1ebc['classList'][_0x4f846d(0x8f0)](_0x4f846d(0x433), _0x4f846d(0xb1a)), _0x5aed44[_0x4f846d(0xa47)][_0x4f846d(0x8f0)]('is-entering-from-right'), _0x4918f0[_0x4f846d(0xae1)] = _0x93161b, _0x1d2508(), _0x5cc2f1[_0x4f846d(0x971)] = ![]; } else { const _0x54433d = { 'id': 'circle_' + Date[_0x4f846d(0x4b7)](), 'name': _0x16c381, 'boundUserProfileId': _0x2915e9, 'memberCharacterIds': _0x6886c2, 'posts': [] }; _0x1d2a6a[_0x4f846d(0xc00)][_0x4f846d(0x8b0)](_0x54433d); } _0x4b4b09(), _0x5294eb('好友圈已保存！'), _0x2a4c9e(), _0x40b080('friendCircleList', _0x4f846d(0xad4)); } async function _0x186a76() { const _0x39b6dc = _0x8e5972; if (_0x39b6dc(0x63f) !== _0x39b6dc(0x63f)) { const _0x87c393 = _0x3a1761[_0x39b6dc(0x94d)](_0x39b6dc(0x358)); if (_0x87c393) _0x87c393[_0x39b6dc(0x724)] = '❚❚'; } else { const _0xa0a0cd = document[_0x39b6dc(0x94d)](_0x39b6dc(0x6e4))[_0x39b6dc(0x41a)]; if (!_0xa0a0cd) return; const _0xdd8365 = await _0x2f43da(_0x39b6dc(0x9cc)); _0xdd8365 && (_0x1d2a6a[_0x39b6dc(0xc00)] = _0x1d2a6a[_0x39b6dc(0xc00)][_0x39b6dc(0x564)](_0x3b4afb => _0x3b4afb['id'] !== _0xa0a0cd), _0x1d2a6a[_0x39b6dc(0x474)] === _0xa0a0cd && (_0x39b6dc(0x282) === 'ArvQS' ? (_0x759b69(_0x39b6dc(0xa68), _0x39b6dc(0x5fa)), _0x458a45(![])) : _0x1d2a6a[_0x39b6dc(0x474)] = null), _0x4b4b09(), _0x5294eb(_0x39b6dc(0x7f9)), _0x2a4c9e(), _0x40b080(_0x39b6dc(0x3df), _0x39b6dc(0xad4))); } } function _0x52aebf(_0x168424) { const _0x56e00f = _0x8e5972; _0x3193a8(); const _0x4235bf = _0x1d2a6a[_0x56e00f(0xc00)][_0x56e00f(0x2ec)](_0x3ca75b => _0x3ca75b['id'] === _0x168424); if (!_0x4235bf) return; _0x1d2a6a[_0x56e00f(0x474)] = _0x168424, _0x4b4b09(), document[_0x56e00f(0x94d)](_0x56e00f(0x597))['textContent'] = _0x4235bf['name'], _0x3babe8(), _0x40b080(_0x56e00f(0x6d1), _0x56e00f(0x3df)), _0x54bc26(); } function _0x558490() { const _0x482b84 = _0x8e5972; if (!_0x1d2a6a[_0x482b84(0xc00)] || _0x1d2a6a['friendCircles'][_0x482b84(0x2ab)] === 0x0) { console[_0x482b84(0x1be)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x3daf6e = _0x1d2a6a[_0x482b84(0xc00)][0x0]; if (_0x3daf6e['memberCharacterIds'][_0x482b84(0x2ab)] < 0x2) { if (_0x482b84(0xb68) === 'mwBLe') { console[_0x482b84(0x1be)](_0x482b84(0x5fc) + _0x3daf6e[_0x482b84(0x7e6)] + _0x482b84(0xc16)); return; } else _0x5f3e98(), _0x4facfd(); } const _0x256e97 = { 'id': _0x482b84(0x999) + Date[_0x482b84(0x4b7)](), 'authorType': _0x482b84(0x322), 'authorId': _0x3daf6e[_0x482b84(0x861)][0x0], 'content': _0x482b84(0x87e), 'timestamp': Date['now'](), 'likes': [_0x3daf6e[_0x482b84(0x861)][0x1]], 'comments': [{ 'commentId': 'c_' + Date['now'](), 'authorId': _0x3daf6e['memberCharacterIds'][0x1], 'content': _0x482b84(0x91f) }] }; _0x3daf6e['posts'][_0x482b84(0x8b0)](_0x256e97), _0x4b4b09(), console[_0x482b84(0x668)](_0x482b84(0x62e) + _0x3daf6e[_0x482b84(0x7e6)] + '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'), _0x5294eb(_0x482b84(0x915)); } window[_0x8e5972(0xc62)] = _0x558490; function _0x5d564a(_0x11efdb) { const _0x4c93ed = _0x8e5972; return _0x1d2a6a[_0x4c93ed(0x575)]['find'](_0x51831e => _0x51831e['id'] === _0x11efdb); } function _0xea506e(_0x2dc1c9, _0x565292 = _0x8e5972(0xbbb)) { const _0x24bb4b = _0x8e5972, _0x11f14f = document[_0x24bb4b(0x94d)](_0x24bb4b(0x67f)); let _0x242a17 = document[_0x24bb4b(0x94d)]('feed-loader'); if (_0x2dc1c9) { if (_0x24bb4b(0x603) !== _0x24bb4b(0x603)) { if (_0x5927ab['key'] === 'Escape') _0x2c593e(![]); if (_0xd8708e[_0x24bb4b(0x5c2)] === _0x24bb4b(0x2f3)) _0x4db490(!![]); } else !_0x242a17 && (_0x24bb4b(0x801) === 'clVrd' ? _0x4de8af[_0x24bb4b(0xa47)][_0x24bb4b(0x5ee)]('show-chat-view') : (_0x242a17 = document[_0x24bb4b(0x2fa)](_0x24bb4b(0xaf1)), _0x242a17['id'] = _0x24bb4b(0x828), document['getElementById']('chat-view-pane')['appendChild'](_0x242a17))), _0x242a17[_0x24bb4b(0x806)] = _0x24bb4b(0x7b9) + _0x565292 + '</span>', _0x242a17['style'][_0x24bb4b(0x180)] = 'flex'; } else _0x242a17 && (_0x24bb4b(0x44e) === _0x24bb4b(0x44e) ? _0x242a17[_0x24bb4b(0x7be)][_0x24bb4b(0x180)] = 'none' : (_0x59eb36(), _0x3620c4(_0x24bb4b(0x936), 'home'))); } async function _0x163928() { const _0x16faec = _0x8e5972, _0x204dff = _0x1d2a6a['friendCircles']['find'](_0x2e24f1 => _0x2e24f1['id'] === _0x1d2a6a[_0x16faec(0x474)]); if (!_0x204dff || _0x1d2a6a[_0x16faec(0xa31)]) return; _0xea506e(!![], '好像有动态了...'), _0x1d2a6a[_0x16faec(0xa31)] = !![]; try { if (_0x16faec(0xc04) !== _0x16faec(0xa09)) { let _0x4f649d = Date[_0x16faec(0x4b7)](); _0x204dff['posts'] && _0x204dff[_0x16faec(0xbc0)][_0x16faec(0x2ab)] > 0x0 && (_0x4f649d = Math['max'](..._0x204dff[_0x16faec(0xbc0)][_0x16faec(0x719)](_0x5025c1 => _0x5025c1[_0x16faec(0x83c)]))); const _0x3598ad = await _0x6fed1b(_0x204dff); if (!_0x3598ad || _0x3598ad['length'] === 0x0) { _0x5294eb('AI似乎没有想出任何新动态。'); return; } const _0x1041d1 = _0x3598ad[_0x16faec(0x719)](async (_0x25c285, _0x38cf8d) => { const _0x683b95 = _0x16faec; if (_0x683b95(0x8d6) === 'yJrKs') _0x3a258f = _0x2ee897[_0x683b95(0x1aa)](..._0x501cec[_0x683b95(0xbc0)][_0x683b95(0x719)](_0x114288 => _0x114288[_0x683b95(0x83c)])); else { _0xea506e(!![], _0x683b95(0xad0) + (_0x38cf8d + 0x1) + _0x683b95(0x53a) + _0x3598ad[_0x683b95(0x2ab)] + '\x20条动态...'); const _0x53ab83 = _0x4f649d + (_0x38cf8d + 0x1) * 0x3c * 0x3e8, _0x580e68 = { 'id': _0x683b95(0xaca) + _0x25c285[_0x683b95(0x9d5)] + '_' + _0x53ab83, 'authorType': _0x683b95(0x322), 'authorId': _0x25c285[_0x683b95(0x9d5)], 'content': _0x25c285[_0x683b95(0x355)], 'timestamp': _0x53ab83, 'likes': _0x25c285[_0x683b95(0x5c3)] || [], 'comments': (_0x25c285[_0x683b95(0x448)] || [])[_0x683b95(0x719)]((_0x573c86, _0xd22547) => ({ 'commentId': 'c_' + _0x53ab83 + '_' + _0xd22547, 'authorId': _0x573c86[_0x683b95(0x9d5)], 'content': _0x573c86['content'] })) }; if (_0x25c285[_0x683b95(0x422)] === _0x683b95(0x6d1) && _0x25c285[_0x683b95(0x4d2)] && _0x25c285[_0x683b95(0xa2c)]) { if ('qmxBY' === _0x683b95(0x623)) { const _0x411ee9 = _0x3fe876[_0x683b95(0x94d)](_0x683b95(0x7bc)); _0x411ee9[_0x683b95(0x724)] = _0x32d497, _0x411ee9[_0x683b95(0x7be)][_0x683b95(0x180)] = _0x683b95(0x26d); if (_0x4c6e66['_t']) _0x726de(_0x3fd341['_t']); _0x39f32c['_t'] = _0x264279(() => { const _0x4c6b85 = _0x683b95; _0x411ee9['style'][_0x4c6b85(0x180)] = _0x4c6b85(0x546); }, 0x640); } else try { const _0x1817c3 = await _0xd33e1a(_0x25c285['songName'], _0x25c285[_0x683b95(0xa2c)]); _0x580e68[_0x683b95(0x832)] = _0x683b95(0x6d1), _0x580e68[_0x683b95(0x4d2)] = _0x25c285[_0x683b95(0x4d2)], _0x580e68[_0x683b95(0xa2c)] = _0x25c285[_0x683b95(0xa2c)], _0x580e68[_0x683b95(0x8ae)] = _0x1817c3[_0x683b95(0x9a7)], _0x580e68[_0x683b95(0x324)] = _0x1817c3[_0x683b95(0x42a)]; } catch (_0x36ea25) { _0x683b95(0x3e8) !== _0x683b95(0x202) ? (console['error']('动态中的音乐搜索失败:', _0x36ea25), _0x580e68[_0x683b95(0x832)] = 'text') : (_0x344e8f[_0x683b95(0x7be)]['display'] = _0x683b95(0x546), _0x38499c['style'][_0x683b95(0xc39)] = _0x683b95(0xbcd), _0x57ec4e['style'][_0x683b95(0x79d)] = _0x683b95(0x5e6)); } } else { if ('oblTG' === 'dGtaJ') { const _0x17b1ac = _0x4e9d7b[_0x683b95(0x816)][_0x683b95(0x2ec)](_0x5be374 => _0x5be374['id'] === _0x564341); if (!_0x17b1ac || _0x17b1ac[_0x683b95(0x832)] !== _0x683b95(0x8aa)) return; _0x13ee13[_0x683b95(0x94d)](_0x683b95(0x685))[_0x683b95(0x41a)] = _0x17b1ac[_0x683b95(0x7e6)] || '', _0x2cdb4f(_0x683b95(0x58d)), _0x1e4f61[_0x683b95(0x94d)](_0x683b95(0x58d))['value'] = _0x17b1ac[_0x683b95(0x25d)] || _0x345d6e['activeUserProfileId'], _0x2551cf('group-world-book-checkboxes', _0x17b1ac[_0x683b95(0xa93)] || []), _0x4a34b2(); const _0x22bb99 = _0x2463fb[_0x683b95(0x94d)](_0x683b95(0x4e0)), _0x3ab26a = _0x2f47c0[_0x683b95(0x94d)](_0x683b95(0xa23)); _0x3ab26a[_0x683b95(0x7be)][_0x683b95(0x4d7)] = '', _0x44896c(_0x683b95(0x63b) + _0x1f5806)[_0x683b95(0x1d2)](_0x40b1ee => { const _0x58cec2 = _0x683b95; _0x22bb99[_0x58cec2(0x802)] = _0x40b1ee ? _0x4f490f['createObjectURL'](_0x40b1ee) : _0x49ddc5; }), _0x155961(_0x683b95(0x58f) + _0x3d16f4)[_0x683b95(0x1d2)](_0x1420a0 => { const _0x4b39c8 = _0x683b95; if (_0x1420a0) _0x3ab26a['style'][_0x4b39c8(0x4d7)] = _0x4b39c8(0x80f) + _0x3e4a81['createObjectURL'](_0x1420a0) + '\x27)'; }), _0x4a1a8d('groupSettings', _0x683b95(0xa68)); } else _0x580e68[_0x683b95(0x832)] = _0x683b95(0x8df); } return _0x580e68; } }), _0x348e0b = await Promise[_0x16faec(0x8af)](_0x1041d1); _0x204dff[_0x16faec(0xbc0)][_0x16faec(0x8b0)](..._0x348e0b), _0x4b4b09(); } else { const _0x3c2de2 = _0x2b6437[_0x16faec(0xc00)]['find'](_0x4cf5d8 => _0x4cf5d8['id'] === _0x35cf89[_0x16faec(0x474)]), _0x256eeb = _0x3c2de2 ? _0x3c2de2[_0x16faec(0xbc0)] : []; if (!_0x256eeb || _0x256eeb[_0x16faec(0x2ab)] === 0x0) return ''; const _0x33dcd3 = _0x256eeb[_0x16faec(0x59d)](0x0, 0x5), _0xaa1ed5 = _0x33dcd3[_0x16faec(0x719)](_0x1f1fc8 => { const _0xdf844d = _0x16faec, _0x29e258 = _0x5c1607(_0x1f1fc8[_0xdf844d(0x9d5)]) || { 'name': '未知' }; let _0x1784cd = _0xdf844d(0x4e5) + _0x29e258[_0xdf844d(0x7e6)] + '\x20说：“' + (_0x1f1fc8[_0xdf844d(0x21f)] || _0x1f1fc8[_0xdf844d(0x415)]) + '”'; return _0x1f1fc8['type'] === _0xdf844d(0x6d1) && (_0x1784cd += _0xdf844d(0x68a) + _0x1f1fc8['songName'] + _0xdf844d(0x3e5) + _0x1f1fc8[_0xdf844d(0xa2c)] + ')'), _0x1784cd; }); return _0x16faec(0x5c5) + _0xaa1ed5[_0x16faec(0x973)]('\x0a'); } } catch (_0x404ca2) { console[_0x16faec(0x1be)]('生成动态失败:', _0x404ca2), _0x5294eb(_0x16faec(0x3a2) + _0x404ca2[_0x16faec(0x6da)]); } finally { _0x3babe8(), _0xea506e(![]), _0x1d2a6a[_0x16faec(0xa31)] = ![]; } } async function _0x6fed1b(_0x1307b9) { const _0x37ee73 = _0x8e5972, _0x3f2c9a = _0x1307b9['memberCharacterIds'][_0x37ee73(0x719)](_0x1753f8 => _0x5964f7(_0x1753f8))[_0x37ee73(0x564)](Boolean); if (_0x3f2c9a[_0x37ee73(0x2ab)] === 0x0) return null; const _0x40e3cb = _0x5d551b(), _0x53ecac = _0x5d564a(_0x1307b9[_0x37ee73(0x25d)]) || _0x1d2a6a[_0x37ee73(0x575)][0x0], _0x46cf95 = _0x53ecac ? _0x37ee73(0x453) + _0x53ecac['name'] + _0x37ee73(0x27b) + (_0x53ecac[_0x37ee73(0x647)] || '无') + '\x0a' : '', _0xe4b680 = _0x3f2c9a[_0x37ee73(0x719)](_0x50b5f6 => { const _0x2d96ec = _0x37ee73, { omniText: _0x5d562e } = _0x57f616(_0x50b5f6['id'], null), _0x24bc20 = _0x49ee64(_0x50b5f6['id']), _0x135147 = _0x50b5f6[_0x2d96ec(0xa93)] && _0x50b5f6[_0x2d96ec(0xa93)]['length'] > 0x0 ? _0x2d96ec(0x39d) + _0x50b5f6[_0x2d96ec(0x7e6)] + _0x2d96ec(0x549) + _0x50b5f6[_0x2d96ec(0xa93)][_0x2d96ec(0x719)](_0x68cfe7 => _0x1d2a6a[_0x2d96ec(0x5cb)][_0x2d96ec(0x2ec)](_0x58ec27 => _0x58ec27['id'] === _0x68cfe7))[_0x2d96ec(0x564)](Boolean)[_0x2d96ec(0x719)](_0x567f59 => _0x2d96ec(0x2e9) + _0x567f59[_0x2d96ec(0x7e6)] + '\x0a' + _0x567f59[_0x2d96ec(0x415)])[_0x2d96ec(0x973)]('') : ''; return _0x2d96ec(0x895) + _0x50b5f6['name'] + ',\x20ID:\x20' + _0x50b5f6['id'] + _0x2d96ec(0x86b) + _0x50b5f6[_0x2d96ec(0x647)] + _0x2d96ec(0x29d) + _0x5d562e + '\x0a' + _0x24bc20 + '\x0a' + _0x135147; })[_0x37ee73(0x973)]('\x0a\x0a'), _0xdd1d48 = Math[_0x37ee73(0x7a5)](Math[_0x37ee73(0x4bc)]() * 0x3) + 0x2, _0x5170fc = _0x37ee73(0x4f0) + _0xdd1d48 + _0x37ee73(0x8d7) + _0x53ecac[_0x37ee73(0x7e6)] + '”（即“我”，用户）来发布任何动态或评论。\x0a-\x20所有的动态发布者（authorId）和评论者（authorId）都【必须】从【好友圈成员信息】列表中提供的角色ID里选择。\x0a\x0a#\x20好友圈成员信息\x0a' + _0xe4b680 + '\x0a' + _0x46cf95 + '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a' + _0x40e3cb + _0x37ee73(0x8a9) + _0xdd1d48 + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0xdd1d48 + _0x37ee73(0x34f), _0x568743 = [{ 'role': 'system', 'content': _0x5170fc }, { 'role': _0x37ee73(0xadb), 'content': _0x37ee73(0x353) }]; _0x568743[_0x37ee73(0x8b0)]({ 'role': _0x37ee73(0xadb), 'content': '请根据以上所有规则，生成\x20' + _0xdd1d48 + _0x37ee73(0x8be) }); try { const _0x5cee97 = await _0x3e56bc(_0x568743, { 'json': !![] }), _0x3cd674 = _0x5cee97[_0x37ee73(0x5f9)](/(\[[\s\S]*\])/); if (!_0x3cd674) throw new Error(_0x37ee73(0x9d6)); const _0x1c2fa0 = _0x3cd674[0x1], _0x6c6ff8 = JSON[_0x37ee73(0xac1)](_0x1c2fa0); if (!Array['isArray'](_0x6c6ff8)) throw new Error(_0x37ee73(0xb8d)); return _0x6c6ff8; } catch (_0x548804) { return console['error']('批量生成动态失败:\x20', _0x548804), console['error']('AI返回的原始文本:', _0x548804['rawResponse'] || _0x37ee73(0xa56)), null; } } async function _0x1639cc() { const _0xde0f2b = _0x8e5972; if (_0xde0f2b(0x36f) !== 'CquXv') _0x33f3d0 += '-\x20你拍过一张照片，内容是：“' + _0x4ca57c[_0xde0f2b(0x29f)] + _0xde0f2b(0x652); else { const _0x595d25 = _0x1d2a6a[_0xde0f2b(0xc00)][_0xde0f2b(0x2ec)](_0x178cc5 => _0x178cc5['id'] === _0x1d2a6a['activeFriendCircleId']); if (!_0x595d25) return; const _0xbd98b3 = await _0x2f43da(_0xde0f2b(0x5bd) + _0x595d25[_0xde0f2b(0x7e6)] + _0xde0f2b(0x521)); if (_0xbd98b3) { if (_0xde0f2b(0x8a2) !== _0xde0f2b(0x3bb)) _0x595d25['posts'] = [], _0x4b4b09(), _0x3babe8(), _0x5294eb('动态已清空。'); else { const _0x43dd91 = _0xc735df(_0xde0f2b(0xbc1)); if (_0x43dd91 && _0x43dd91[_0xde0f2b(0x667)]()) { const _0x43c3c3 = { 'id': _0xde0f2b(0x4c5) + _0x562867[_0xde0f2b(0x4b7)](), 'name': _0x43dd91[_0xde0f2b(0x667)]() }; _0x135052[_0xde0f2b(0x463)][_0xde0f2b(0x8b0)](_0x43c3c3), _0x265157[_0xde0f2b(0x89b)] = _0x43c3c3['id'], _0x39f8b7(), _0x941e0a(); } } } } } function _0x3babe8() { const _0x12b078 = _0x8e5972, _0x127d4a = document[_0x12b078(0x94d)](_0x12b078(0xa48)), _0x1522f6 = _0x1d2a6a['friendCircles'][_0x12b078(0x2ec)](_0x49cf19 => _0x49cf19['id'] === _0x1d2a6a['activeFriendCircleId']); if (!_0x1522f6) { if (_0x12b078(0x2dd) === _0x12b078(0x96c)) throw _0x1b720a; else { _0x127d4a['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>'; return; } } if (!_0x1522f6[_0x12b078(0xbc0)] || _0x1522f6[_0x12b078(0xbc0)][_0x12b078(0x2ab)] === 0x0) { _0x127d4a[_0x12b078(0x806)] = _0x12b078(0x20d); return; } _0x127d4a['innerHTML'] = ''; const _0x323fe3 = [..._0x1522f6[_0x12b078(0xbc0)]][_0x12b078(0xa24)]((_0x8dbd4a, _0x3f327b) => _0x3f327b[_0x12b078(0x83c)] - _0x8dbd4a[_0x12b078(0x83c)]); _0x323fe3['forEach'](_0x22666f => { const _0x321ac3 = _0x12b078, _0x4c5fdf = document[_0x321ac3(0x2fa)](_0x321ac3(0xaf1)); _0x4c5fdf['className'] = _0x321ac3(0x9a4); let _0x1d3a6e = '未知', _0x488246 = _0x133533; if (_0x22666f[_0x321ac3(0x8e1)] === _0x321ac3(0xadb)) { const _0x56cfe8 = _0x5d564a(_0x22666f[_0x321ac3(0x9d5)]); _0x56cfe8 && (_0x321ac3(0x3bc) !== 'YtXWy' ? _0x4655d2[_0x321ac3(0x2ca)](_0x435127, _0x21cce5['stringify'](_0x2124c7)) : (_0x1d3a6e = _0x56cfe8[_0x321ac3(0x7e6)], _0x488246 = _0x56cfe8[_0x321ac3(0x7a4)])); } else { if (_0x321ac3(0x7bf) !== _0x321ac3(0x7bf)) _0x575a8b[_0x321ac3(0x724)] = _0x482d77['toLocaleTimeString'](_0x321ac3(0x4cf), { 'hour': _0x321ac3(0x5d1), 'minute': _0x321ac3(0x5d1), 'hour12': ![] }), _0x167420[_0x321ac3(0x724)] = _0x90fd05[_0x321ac3(0x6cd)](_0x321ac3(0x4cf), { 'month': _0x321ac3(0x3bd), 'day': _0x321ac3(0x923), 'weekday': _0x321ac3(0x3bd) }); else { const _0x1fb05c = _0x5964f7(_0x22666f[_0x321ac3(0x9d5)]); _0x1fb05c && (_0x321ac3(0x48f) === _0x321ac3(0x533) ? _0x246e8f['boundUserProfileId'] = _0xfdbd2d : (_0x1d3a6e = _0x1fb05c[_0x321ac3(0x7e6)], _0x488246 = _0x1fb05c[_0x321ac3(0x7a4)])); } } const _0x4f1ecc = _0x321ac3(0x56a) + _0x488246 + _0x321ac3(0x317) + _0x1d3a6e + _0x321ac3(0x748), _0x20051a = '<p\x20class=\x22music-post-thought\x22>' + _0x22666f['content'] + '</p>'; let _0x24fc05 = ''; if (_0x22666f[_0x321ac3(0x7dc)] || _0x22666f['imageId']) { const _0x5abee9 = _0x321ac3(0xbfc) + _0x22666f['id']; _0x24fc05 = '<div\x20class=\x22post-image-container\x22><img\x20id=\x22' + _0x5abee9 + '\x22\x20class=\x22post-image\x22></div>', setTimeout(() => { const _0x350cf2 = _0x321ac3; if (_0x350cf2(0xaa8) !== _0x350cf2(0xaa8)) _0x33613c[_0x350cf2(0x7be)][_0x350cf2(0x8b7)] = _0x350cf2(0xa63), _0x53bef5[_0x350cf2(0x7be)]['color'] = 'white'; else { const _0x79ad9b = document[_0x350cf2(0x94d)](_0x5abee9); if (!_0x79ad9b) return; if (_0x22666f[_0x350cf2(0x7dc)]) _0x79ad9b['src'] = _0x22666f[_0x350cf2(0x7dc)]; else _0x22666f['imageId'] && _0xe5b0ea(_0x22666f[_0x350cf2(0xbf0)])[_0x350cf2(0x1d2)](_0x2f425b => { const _0x14a03a = _0x350cf2; if (_0x2f425b) { if (_0x14a03a(0x38e) !== _0x14a03a(0x431)) { const _0x3b029f = URL[_0x14a03a(0x413)](_0x2f425b); _0x79ad9b[_0x14a03a(0x802)] = _0x3b029f, _0x79ad9b['onload'] = () => URL[_0x14a03a(0xc74)](_0x3b029f); } else _0xe9d327(_0x14a03a(0x823)), _0x5af749(() => { const _0x71a289 = _0x14a03a; _0x3b745d(_0x71a289(0xa68), 'home'), _0x5c7c20(() => _0xd0ff17(), 0x64); }, 0x6a4); } }); } }, 0x0); } let _0x170881 = ''; if (_0x22666f[_0x321ac3(0x832)] === 'music' && _0x22666f[_0x321ac3(0x4d2)]) { if (_0x321ac3(0x935) !== _0x321ac3(0x935)) { _0x4c83b2(_0x321ac3(0x391)); return; } else _0x170881 = _0x321ac3(0x47b) + _0x22666f['id'] + _0x321ac3(0x1bb) + (_0x22666f[_0x321ac3(0x8ae)] || _0x133533) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x22666f[_0x321ac3(0x4d2)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x22666f[_0x321ac3(0xa2c)] + _0x321ac3(0xb50) + (_0x22666f[_0x321ac3(0x324)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } const _0x3883b1 = '<div\x20class=\x22post-timestamp\x22>' + new Date(_0x22666f['timestamp'])[_0x321ac3(0x28c)](_0x321ac3(0x4cf)) + '</div>'; let _0x425a40 = ''; if (_0x22666f[_0x321ac3(0x5c3)] && _0x22666f[_0x321ac3(0x5c3)][_0x321ac3(0x2ab)] > 0x0 || _0x22666f[_0x321ac3(0x448)] && _0x22666f['comments'][_0x321ac3(0x2ab)] > 0x0) { if (_0x321ac3(0x7ab) !== 'aSYgv') _0xdb5741[_0x321ac3(0x7be)]['opacity'] = 0x0, _0x56c817(() => { const _0x67b6c0 = _0x321ac3; _0xaa1079[_0x67b6c0(0x802)] = _0x147ca8[_0x67b6c0(0x413)](_0x40c54c), _0x8ac271[_0x67b6c0(0x7be)][_0x67b6c0(0xb52)] = 0x1; }, 0x96); else { let _0x29edf6 = ''; if (_0x22666f[_0x321ac3(0x5c3)] && _0x22666f['likes'][_0x321ac3(0x2ab)] > 0x0) { if ('hAufi' !== _0x321ac3(0x8db)) { const _0x256b70 = _0x22666f[_0x321ac3(0x5c3)][_0x321ac3(0x719)](_0x464e46 => _0x5964f7(_0x464e46)?.[_0x321ac3(0x7e6)] || '未知')[_0x321ac3(0x973)]('、'), _0x44b998 = _0x321ac3(0x4ca); _0x29edf6 = '<div\x20class=\x22post-likes\x22>' + _0x44b998 + '\x20' + _0x256b70 + _0x321ac3(0x2d6); } else _0x298769[_0x321ac3(0x48b)](); } let _0x3aa6c1 = ''; if (_0x22666f[_0x321ac3(0x448)] && _0x22666f[_0x321ac3(0x448)][_0x321ac3(0x2ab)] > 0x0) { const _0x96b918 = _0x22666f[_0x321ac3(0x448)][_0x321ac3(0x719)](_0x2acd34 => { const _0x39d282 = _0x321ac3; if ('ZVypI' === _0x39d282(0x794)) { const _0x5584de = _0x5964f7(_0x2acd34[_0x39d282(0x9d5)])?.[_0x39d282(0x7e6)] || '未知'; return _0x39d282(0x335) + _0x5584de + _0x39d282(0x95c) + _0x2acd34[_0x39d282(0x415)] + _0x39d282(0x2d6); } else { if (_0x1bd6b6) { const _0x25aed4 = _0x30594a[_0x39d282(0x2fa)]('p'); _0x25aed4[_0x39d282(0x806)] = _0x60304c, _0x25aed4[_0x39d282(0x7be)]['margin'] = '0', _0x312a18[_0x39d282(0xc15)](_0x25aed4); } } })[_0x321ac3(0x973)](''); _0x3aa6c1 = _0x321ac3(0xa72) + _0x96b918 + _0x321ac3(0x2d6); } _0x425a40 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x29edf6 + _0x321ac3(0x921) + _0x3aa6c1 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20'; } } const _0x33ecf8 = _0x321ac3(0x738) + _0x20051a + _0x24fc05 + _0x170881 + _0x321ac3(0x2d6); _0x4c5fdf[_0x321ac3(0x806)] = _0x4f1ecc + _0x33ecf8 + _0x3883b1 + _0x425a40; if (_0x22666f[_0x321ac3(0x832)] === 'music' && _0x22666f[_0x321ac3(0x324)]) { if (_0x321ac3(0x52f) !== _0x321ac3(0x2c7)) { const _0x4e1420 = _0x4c5fdf['querySelector'](_0x321ac3(0x9c5)); if (_0x4e1420) { if ('jXEiH' !== 'VQFXp') _0x4e1420[_0x321ac3(0x672)](_0x321ac3(0xc5e), function () { const _0x24e0e3 = _0x321ac3, _0x936d28 = { 'id': _0x22666f['id'], 'url': _0x22666f[_0x24e0e3(0x324)] }; _0x135516(this, _0x936d28); }); else { const _0x2f8901 = _0x533458(_0x5c3ee3), _0x2ea0c2 = _0x1259ed[_0x321ac3(0x94d)](_0x321ac3(0x5b2)); _0x2ea0c2[_0x321ac3(0x7be)][_0x321ac3(0x4d7)] = ''; let _0xbc4296 = _0x51b04d['getElementById'](_0x321ac3(0x480) + _0x4ce73e); if (_0xbc4296) _0xbc4296[_0x321ac3(0x806)] = ''; if (!_0x2f8901) return; _0x2f8901[_0x321ac3(0x421)] && (_0x2ea0c2['style'][_0x321ac3(0x4d7)] = 'url(\x27' + _0x2f8901[_0x321ac3(0x421)] + '\x27)', _0x2ea0c2[_0x321ac3(0x7be)]['backgroundSize'] = _0x321ac3(0x9a7), _0x2ea0c2[_0x321ac3(0x7be)][_0x321ac3(0xbed)] = _0x321ac3(0x2aa)); if (_0x2f8901['bubbleCss']) { let _0x30d5e4 = _0x50c918[_0x321ac3(0x94d)](_0x321ac3(0x480) + _0x2f8901['id']); !_0x30d5e4 && (_0x30d5e4 = _0x86bfa0[_0x321ac3(0x2fa)](_0x321ac3(0x7be)), _0x30d5e4['id'] = 'style-' + _0x2f8901['id'], _0x598a60[_0x321ac3(0x1d4)]['appendChild'](_0x30d5e4)); const _0x8fadf2 = _0x2f8901['bubbleCss'], _0x2b184b = _0x8fadf2['replace'](/\.bubble\.sent/g, _0x321ac3(0x54f) + _0x2f8901['id'] + _0x321ac3(0x6a3))[_0x321ac3(0x9ed)](/\.bubble\.received/g, _0x321ac3(0x54f) + _0x2f8901['id'] + '.message.ai'); _0x30d5e4[_0x321ac3(0x806)] = _0x2b184b; } } } } else _0x316811[_0x321ac3(0x5c7)]['forEach']((_0x28a391, _0x3aacaa) => _0x5245a0(_0x28a391, _0x3aacaa)); } _0x127d4a[_0x321ac3(0xc15)](_0x4c5fdf); }); } document[_0x8e5972(0x94d)](_0x8e5972(0x89c))['addEventListener'](_0x8e5972(0xc5e), _0x1639cc), document[_0x8e5972(0x94d)](_0x8e5972(0x8ac))['addEventListener'](_0x8e5972(0xc5e), _0x163928), document[_0x8e5972(0x94d)](_0x8e5972(0x31f))[_0x8e5972(0x672)]('click', () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0x3df))), document['getElementById'](_0x8e5972(0x73a))[_0x8e5972(0x672)]('click', () => _0x371c70()), document[_0x8e5972(0x94d)]('back-to-circle-list-from-edit')[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x3df), _0x8e5972(0xad4))), document[_0x8e5972(0x94d)](_0x8e5972(0x590))[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x5148dc), document[_0x8e5972(0x94d)](_0x8e5972(0xa6b))['addEventListener'](_0x8e5972(0xc5e), _0x186a76), document[_0x8e5972(0x94d)](_0x8e5972(0x329))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x5a0426 = _0x8e5972; _0x2a4c9e(), _0x40b080(_0x5a0426(0x3df), 'music'); }), document['getElementById'](_0x8e5972(0x38c))['addEventListener'](_0x8e5972(0xc5e), () => { const _0x19db7f = _0x8e5972; _0x1d2a6a[_0x19db7f(0x474)] && _0x371c70(_0x1d2a6a['activeFriendCircleId']); }), document[_0x8e5972(0x94d)](_0x8e5972(0xb64))[_0x8e5972(0x672)](_0x8e5972(0xc5e), async () => { const _0x377db4 = _0x8e5972, _0x5d28eb = _0x1d2a6a['friendCircles'][_0x377db4(0x2ec)](_0x5acaca => _0x5acaca['id'] === _0x1d2a6a[_0x377db4(0x474)]); if (!_0x5d28eb || _0x1d2a6a['isGenerating']) return; const _0x6ea811 = _0x5d28eb[_0x377db4(0x25d)], _0x2b3a3c = _0x1d2a6a[_0x377db4(0x575)][_0x377db4(0x2ec)](_0x19cae6 => _0x19cae6['id'] === _0x6ea811); if (!_0x2b3a3c) { if ('zCjJJ' !== _0x377db4(0x6cb)) { _0x5294eb(_0x377db4(0x720)); return; } else _0x51b286(![]); } const _0x5d7c9e = document[_0x377db4(0x94d)](_0x377db4(0x9e6))[_0x377db4(0x41a)]['trim'](), _0x293da9 = _0x1d2a6a[_0x377db4(0x4e1)][_0x377db4(0x7dc)], _0x343130 = _0x1d2a6a[_0x377db4(0x4e1)][_0x377db4(0x6d1)], _0x3e2928 = _0x1d2a6a['pendingPostAttachments'][_0x377db4(0xbf0)]; if (!_0x5d7c9e && !_0x293da9 && !_0x343130) { if (_0x377db4(0x300) !== 'iOKMX') return; else { _0x5294eb(_0x377db4(0xa20)); return; } } const _0x2df936 = { 'id': _0x377db4(0x9c6) + Date[_0x377db4(0x4b7)](), 'authorType': _0x377db4(0xadb), 'authorId': _0x2b3a3c['id'], 'content': _0x5d7c9e, 'timestamp': Date[_0x377db4(0x4b7)](), 'likes': [], 'comments': [] }; if (_0x3e2928) _0x2df936[_0x377db4(0xbf0)] = _0x3e2928; else _0x293da9 && (_0x2df936[_0x377db4(0x7dc)] = _0x293da9); _0x343130 ? (_0x2df936[_0x377db4(0x832)] = _0x377db4(0x6d1), Object[_0x377db4(0x60e)](_0x2df936, _0x343130)) : _0x2df936[_0x377db4(0x832)] = _0x377db4(0x8df), _0x5d28eb[_0x377db4(0xbc0)][_0x377db4(0x8b0)](_0x2df936), _0x4b4b09(), _0x3babe8(), document[_0x377db4(0x94d)](_0x377db4(0x9e6))[_0x377db4(0x41a)] = '', _0x1d2a6a[_0x377db4(0x4e1)][_0x377db4(0x7dc)] = null, _0x1d2a6a[_0x377db4(0x4e1)][_0x377db4(0x6d1)] = null, _0x1d2a6a['pendingPostAttachments'][_0x377db4(0xbf0)] = null, _0x477316(), _0x4ad53c(_0x2df936); }), document[_0x8e5972(0x94d)](_0x8e5972(0x650))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x1f57a0 = _0x8e5972; if (_0x1f57a0(0x3bf) !== _0x1f57a0(0x3bf)) { const _0x3040db = new _0x3a419f(_0x55b2e7['timestamp']); _0x37013f += _0x1f57a0(0xbd9) + _0x21cf08[_0x1f57a0(0x7e6)] + '在所有地方的最后一次互动是在**:\x20' + _0x5090b1(_0x3040db) + '\x0a'; } else document[_0x1f57a0(0x94d)](_0x1f57a0(0x4a4))[_0x1f57a0(0xc5e)](); }), document[_0x8e5972(0x94d)]('user-post-image-input')['addEventListener'](_0x8e5972(0x5d0), async _0x28f697 => { const _0x1636ea = _0x8e5972, _0x39e98b = _0x28f697[_0x1636ea(0xbdf)][_0x1636ea(0x63c)][0x0]; if (!_0x39e98b) return; try { if (_0x1636ea(0xbd6) !== _0x1636ea(0xbd6)) _0x30be3b(_0x9dea60[_0x1636ea(0xc2c)], _0x786810[_0x1636ea(0xa0f)]); else { const _0x4fcc4b = await _0x270777(_0x39e98b, 0x320, 0.8, !![]), _0x17da27 = _0x1636ea(0xc59) + Date['now'](); await _0x1ebaf2(_0x17da27, _0x4fcc4b), _0x1d2a6a[_0x1636ea(0x4e1)]['imageId'] = _0x17da27, _0x1d2a6a['pendingPostAttachments'][_0x1636ea(0x7dc)] = null, _0x1d2a6a['pendingPostAttachments'][_0x1636ea(0x6d1)] = null, _0x477316(); } } catch (_0x57b195) { if (_0x1636ea(0x89d) === _0x1636ea(0x89d)) _0x5294eb(_0x1636ea(0xa3c) + _0x57b195[_0x1636ea(0x6da)]); else { const _0x9d9413 = _0x3fb533(_0x360137[_0x1636ea(0xaac)][_0x1636ea(0x44a)], 0xa); _0xd24516(_0x9d9413); } } _0x28f697[_0x1636ea(0xbdf)][_0x1636ea(0x41a)] = ''; }), document[_0x8e5972(0x94d)](_0x8e5972(0x4e9))[_0x8e5972(0x672)](_0x8e5972(0xc5e), async () => { const _0xbb03d6 = _0x8e5972, _0xd5f0e0 = await _0x52a1e3(); if (!_0xd5f0e0) return; _0x5294eb(_0xbb03d6(0xb6d)); try { const _0x32c7b7 = await _0xd33e1a(_0xd5f0e0[_0xbb03d6(0x4d2)], _0xd5f0e0[_0xbb03d6(0xa2c)]); _0x1d2a6a[_0xbb03d6(0x4e1)][_0xbb03d6(0x6d1)] = { 'songName': _0xd5f0e0['songName'], 'artist': _0xd5f0e0[_0xbb03d6(0xa2c)], 'coverUrl': _0x32c7b7[_0xbb03d6(0x9a7)], 'playableUrl': _0x32c7b7['url'] }, _0x1d2a6a[_0xbb03d6(0x4e1)][_0xbb03d6(0x7dc)] = null, _0x477316(); } catch (_0x3a7126) { _0xbb03d6(0x1d8) !== 'GRSIi' ? _0x5294eb('音乐搜索失败:\x20' + _0x3a7126[_0xbb03d6(0x6da)]) : (_0x1dff68['setItem'](_0xbb03d6(0x45b), _0x53fdc6[_0xbb03d6(0x838)](_0x26a029)), _0x1216c5(_0xbb03d6(0x5c1)), _0x148432(() => _0x2000cf[_0xbb03d6(0x4ae)](), 0x5dc)); } }); function _0x1d0c5a() { const _0x26f659 = _0x8e5972; if (_0x26f659(0x375) === _0x26f659(0x375)) { const _0x13d400 = new Date(), _0x4c97f7 = document[_0x26f659(0x94d)](_0x26f659(0x1da)), _0x1a85b1 = document['getElementById'](_0x26f659(0x71b)); if (_0x4c97f7 && _0x1a85b1) { const _0x2e5f28 = String(_0x13d400['getHours']())[_0x26f659(0x7d4)](0x2, '0'), _0x1fc68e = String(_0x13d400['getMinutes']())[_0x26f659(0x7d4)](0x2, '0'); _0x4c97f7[_0x26f659(0x724)] = _0x2e5f28 + ':' + _0x1fc68e; const _0x54b843 = _0x13d400[_0x26f659(0x833)]() + 0x1, _0x3edfcd = _0x13d400[_0x26f659(0x3fc)](), _0xa3c079 = ['星期日', '星期一', '星期二', _0x26f659(0x5ec), _0x26f659(0x820), _0x26f659(0xc4c), _0x26f659(0x389)][_0x13d400['getDay']()]; _0x1a85b1[_0x26f659(0x724)] = _0x54b843 + '月' + _0x3edfcd + '日\x20' + _0xa3c079; } } else for (const _0x1a72d7 of _0x4f1570['worldBooks']) { let _0x49bf24 = _0x4f695c[_0x26f659(0x5cb)][_0x26f659(0x2ec)](_0x4cc2a1 => _0x4cc2a1[_0x26f659(0x7e6)] === _0x1a72d7[_0x26f659(0x7e6)] && (_0x4cc2a1[_0x26f659(0x9a0)] || _0x26f659(0x1c1)) === (_0x1a72d7[_0x26f659(0x9a0)] || _0x26f659(0x1c1))); if (_0x49bf24) _0x9c8d57[_0x26f659(0x8b0)](_0x49bf24['id']); else { const _0x495d36 = { 'id': _0x26f659(0x836) + _0x22037e[_0x26f659(0x4b7)]() + '_' + _0x53e672[_0x26f659(0x4bc)](), 'name': _0x1a72d7['name'], 'content': _0x1a72d7[_0x26f659(0x415)], 'categoryId': _0x1a72d7[_0x26f659(0x9a0)] || _0x26f659(0x1c1) }; _0x4ab1c2[_0x26f659(0x5cb)][_0x26f659(0x8b0)](_0x495d36), _0x5df3cc[_0x26f659(0x8b0)](_0x495d36['id']); } } } function _0xa3ccf9(_0x3ff9d8) { const _0x3bedf8 = _0x8e5972; if (_0x3bedf8(0x764) !== _0x3bedf8(0xb4d)) { if (!_0x3ff9d8) return ''; const _0x2e7dd8 = new Date(_0x3ff9d8), _0x182a68 = String(_0x2e7dd8['getHours']())['padStart'](0x2, '0'), _0x38e505 = String(_0x2e7dd8[_0x3bedf8(0xbc5)]())[_0x3bedf8(0x7d4)](0x2, '0'); return _0x182a68 + ':' + _0x38e505; } else _0x2d18c0['scrollTop'] = _0x43ee34['scrollHeight']; } function _0x5d551b() { const _0xc7cab3 = _0x8e5972, _0x391eff = _0x1d2a6a[_0xc7cab3(0xc00)][_0xc7cab3(0x2ec)](_0x253b98 => _0x253b98['id'] === _0x1d2a6a[_0xc7cab3(0x474)]), _0x269d9d = _0x391eff ? _0x391eff[_0xc7cab3(0xbc0)] : []; if (!_0x269d9d || _0x269d9d[_0xc7cab3(0x2ab)] === 0x0) return ''; const _0x15dff8 = _0x269d9d[_0xc7cab3(0x59d)](0x0, 0x5), _0x5cac58 = _0x15dff8['map'](_0x29b39d => { const _0x47cdb5 = _0xc7cab3, _0x1966d0 = _0x5964f7(_0x29b39d['authorId']) || { 'name': '未知' }; let _0x3ab7c5 = _0x47cdb5(0x4e5) + _0x1966d0[_0x47cdb5(0x7e6)] + _0x47cdb5(0x565) + (_0x29b39d[_0x47cdb5(0x21f)] || _0x29b39d[_0x47cdb5(0x415)]) + '”'; return _0x29b39d[_0x47cdb5(0x832)] === _0x47cdb5(0x6d1) && (_0x3ab7c5 += '\x20(分享了歌曲:\x20' + _0x29b39d[_0x47cdb5(0x4d2)] + '\x20-\x20' + _0x29b39d[_0x47cdb5(0xa2c)] + ')'), _0x3ab7c5; }); return _0xc7cab3(0x5c5) + _0x5cac58['join']('\x0a'); } function _0x49ee64(_0x1b9e69) { const _0x3a508e = _0x8e5972; if ('cFGFs' !== 'gYaUf') { const _0x3407f3 = _0x1d2a6a[_0x3a508e(0x575)][_0x3a508e(0x2ec)](_0x4eee63 => _0x4eee63['id'] === _0x1d2a6a[_0x3a508e(0xc02)]) || { 'name': '你' }, _0x446a15 = _0x1d2a6a[_0x3a508e(0x82b)]['find'](_0x1ffe71 => _0x1ffe71[_0x3a508e(0x835)] === _0x1b9e69); if (!_0x446a15 || !_0x446a15['entries'] || _0x446a15[_0x3a508e(0xb46)]['length'] === 0x0) { if (_0x3a508e(0xa34) === 'qYTwj') _0xfbd854[_0x3a508e(0x672)](_0x3a508e(0xc5e), _0x226146 => { const _0x42774a = _0x3a508e; if (_0x226146[_0x42774a(0xbdf)][_0x42774a(0x832)] === _0x42774a(0x230)) return; const _0x58f2e9 = _0xd7288c['nextElementSibling'], _0x1df46f = _0x10d5c7[_0x42774a(0x20e)](_0x42774a(0x75f)), _0x14d5ba = _0x58f2e9[_0x42774a(0xa47)]['contains']('expanded'); _0x58f2e9[_0x42774a(0xa47)]['toggle'](_0x42774a(0x445), !_0x14d5ba), _0x1df46f[_0x42774a(0xa47)][_0x42774a(0x410)](_0x42774a(0x445), !_0x14d5ba); }); else return ''; } const _0x586276 = _0x446a15[_0x3a508e(0xb46)]['slice'](-0x8), _0x34c6b7 = _0x586276[_0x3a508e(0x719)](_0x3e0b2b => { const _0x4905ea = _0x3a508e; if ('TwKVu' === _0x4905ea(0xb21)) _0x43cc0b(_0x4905ea(0xa68), 'characterEdit'); else { const _0x961e82 = _0x3e0b2b['author'] === _0x4905ea(0xadb) ? _0x3407f3[_0x4905ea(0x7e6)] : _0x5964f7(_0x3e0b2b['author'])[_0x4905ea(0x7e6)]; return _0x4905ea(0xa4e) + new Date(_0x3e0b2b[_0x4905ea(0x83c)])[_0x4905ea(0x6cd)]() + ']\x20' + _0x961e82 + _0x4905ea(0x39b) + _0x3e0b2b[_0x4905ea(0x415)]; } })[_0x3a508e(0x973)]('\x0a'); return _0x3a508e(0x26b) + _0x3407f3[_0x3a508e(0x7e6)] + _0x3a508e(0x18e) + _0x34c6b7; } else _0x43fc4c[_0x3a508e(0x2d5)]['push'](..._0x2d9818[_0x3a508e(0x346)]); } function _0x2e1213() { const _0x316837 = _0x8e5972, _0xbf26c5 = document['getElementById'](_0x316837(0x1f0)), _0x447d72 = _0x1d2a6a[_0x316837(0x2de)]['widgetBgImage']; _0x447d72 ? (_0xbf26c5[_0x316837(0x7be)][_0x316837(0x4d7)] = _0x316837(0x9bf) + _0x447d72 + ')', _0xbf26c5[_0x316837(0x7be)]['backgroundSize'] = 'cover', _0xbf26c5[_0x316837(0x7be)][_0x316837(0xbed)] = _0x316837(0x2aa), _0xbf26c5[_0x316837(0x7be)][_0x316837(0x8e3)] = 'white', _0xbf26c5[_0x316837(0x599)](_0x316837(0xa2b))['forEach'](_0x4507ad => { const _0x189f5c = _0x316837; _0x4507ad[_0x189f5c(0x7be)][_0x189f5c(0x305)] = _0x189f5c(0x813); })) : (_0xbf26c5[_0x316837(0x7be)][_0x316837(0x4d7)] = '', _0xbf26c5[_0x316837(0x7be)][_0x316837(0x8e3)] = '', _0xbf26c5[_0x316837(0x599)](_0x316837(0xa2b))[_0x316837(0x83e)](_0x1c9a31 => { const _0xb02d4c = _0x316837; _0x1c9a31[_0xb02d4c(0x7be)][_0xb02d4c(0x305)] = ''; })); } const _0x51e63a = document[_0x8e5972(0x94d)](_0x8e5972(0x28b)), _0x1d9d08 = document['getElementById'](_0x8e5972(0xc03)); _0x51e63a[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x3ceb9a = _0x8e5972; _0x2a4c9e(), _0x40b080('friendCircleList', _0x3ceb9a(0x5a6)); }), _0x1d9d08[_0x8e5972(0x672)]('click', () => { const _0xb059ad = _0x8e5972; 'vvctT' !== 'vvctT' ? _0x38d1f8 += _0xb059ad(0x709) + _0x30b7e0[_0xb059ad(0x818)] + _0xb059ad(0xae0) + _0x501c17[_0xb059ad(0x4f6)]['join']('、') + '。\x0a' : (_0x45d5af(), _0x40b080(_0xb059ad(0x936), _0xb059ad(0x5a6))); }), document['getElementById'](_0x8e5972(0x9bb))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x4b0d90 = _0x8e5972; _0x4b0d90(0x579) === _0x4b0d90(0x579) ? _0x40b080(_0x4b0d90(0x5a6), _0x4b0d90(0x936)) : _0x1d3b9a[_0x4b0d90(0xa4f)] = _0x43ccab[_0x4b0d90(0x227)]; }), document[_0x8e5972(0x94d)](_0x8e5972(0xb5e))['addEventListener'](_0x8e5972(0xc5e), () => { const _0x11c520 = _0x8e5972; if (_0x11c520(0xab2) !== _0x11c520(0xab2)) { _0x541107(_0x11c520(0x192)); return; } else { if (_0x51c566) clearInterval(_0x51c566); _0x51c566 = null, _0x1d2a6a[_0x11c520(0x1eb)] = [], _0x1d2a6a['activeMeetingCharId'] = null, document['getElementById'](_0x11c520(0xa2f))[_0x11c520(0x7be)][_0x11c520(0x180)] = _0x11c520(0x546), _0x1d2a6a[_0x11c520(0x5e4)] = null, _0x4b4b09(), _0x40b080('meetingList', _0x11c520(0xac6)); } }); const _0x5c71fd = document[_0x8e5972(0x94d)](_0x8e5972(0xbc9)), _0x1b4e23 = document[_0x8e5972(0x94d)](_0x8e5972(0xacc)); _0x1b4e23[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x1d1a54 = _0x8e5972; if (_0x1d1a54(0x27f) === 'uuLIB') _0x237477(_0x59a885); else { const _0x91356d = _0x5c71fd[_0x1d1a54(0x41a)]['trim'](); _0x91356d && (_0x4d8484(_0x91356d), _0x5c71fd[_0x1d1a54(0x41a)] = '', setTimeout(_0x5f2ca7, 0x64)); } }); function _0x135516(_0x36fef3, _0x48ef77) { const _0x55d92c = _0x8e5972; if (_0x55d92c(0xbcf) === _0x55d92c(0x239)) { const _0x22775a = _0x15edec[_0x55d92c(0x94d)]('todo-list'), _0x1aafd7 = _0x3409dd[_0x55d92c(0x94d)](_0x55d92c(0x27a)); _0x22775a[_0x55d92c(0x806)] = ''; const _0xb25fd4 = new _0x5be70c(_0x45210c + 'T00:00:00'); _0x1aafd7[_0x55d92c(0x724)] = _0xb25fd4[_0x55d92c(0x833)]() + 0x1 + '月' + _0xb25fd4['getDate']() + '日'; const _0x3dce41 = _0x4392df[_0x55d92c(0x5ca)][_0x55d92c(0x564)](_0x10384d => _0x10384d['date'] === _0x27ab60); if (_0x3dce41[_0x55d92c(0x2ab)] === 0x0) { _0x22775a[_0x55d92c(0x806)] = _0x55d92c(0x77e); return; } _0x3dce41[_0x55d92c(0x83e)](_0x5793f9 => { const _0x169773 = _0x55d92c, _0x559b25 = _0x417623[_0x169773(0x2fa)](_0x169773(0xaf1)); _0x559b25[_0x169773(0x1ea)] = _0x5793f9[_0x169773(0x832)] === _0x169773(0xb43) ? _0x169773(0x2ae) : _0x169773(0x62b), _0x559b25[_0x169773(0x724)] = _0x5793f9[_0x169773(0x415)], _0x559b25['dataset']['id'] = _0x5793f9['id'], _0x22775a[_0x169773(0xc15)](_0x559b25); }); } else { const _0x46ea96 = document[_0x55d92c(0x94d)]('unified-audio-player'), _0x4e96d7 = _0x1d2a6a[_0x55d92c(0x345)]['find'](_0x1dac9a => _0x1dac9a['id'] === _0x48ef77['id']); if (!_0x4e96d7) { console[_0x55d92c(0x1be)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:', _0x48ef77['id']); return; } const _0x33a6df = _0x46ea96[_0x55d92c(0x802)][_0x55d92c(0x7d3)](_0x4e96d7[_0x55d92c(0x324)]) && !_0x46ea96[_0x55d92c(0x7f2)]; _0x33a6df ? _0x46ea96[_0x55d92c(0x48b)]() : _0x55d92c(0xb6f) !== _0x55d92c(0x49d) ? (_0x3ca067 = { 'title': _0x4e96d7[_0x55d92c(0x4d2)], 'artist': _0x4e96d7['artist'], 'cover': _0x4e96d7[_0x55d92c(0x8ae)] || (_0x4e96d7[_0x55d92c(0xb05)] ? _0x55d92c(0xb23) + _0x4e96d7['coverId'] : _0x133533), 'isFromLibrary': !![] }, _0x46ea96[_0x55d92c(0x802)] = _0x4e96d7[_0x55d92c(0x324)], _0x46ea96[_0x55d92c(0x8d8)](), _0x1d2a6a[_0x55d92c(0x4dd)] = _0x1d2a6a[_0x55d92c(0x345)][_0x55d92c(0x53e)](_0x54d608 => _0x54d608['id'] === _0x48ef77['id']), _0x5bff79()) : (_0x348455[_0x55d92c(0x415)] = _0xf58738, _0x4f0af7(), _0x10eb61()); } } const _0x5740f6 = document[_0x8e5972(0x94d)](_0x8e5972(0x9d2)); async function _0x24a6fc(_0x456ab5) { const _0x54cd8f = _0x8e5972; if (_0x54cd8f(0x842) !== _0x54cd8f(0xb48)) { if (!_0x456ab5 || !_0x456ab5[_0x54cd8f(0x3c5)]('http')) return ![]; return new Promise(_0x18adc6 => { const _0x4b9cb9 = _0x54cd8f, _0x21e8e8 = document['createElement'](_0x4b9cb9(0x26c)); _0x21e8e8[_0x4b9cb9(0x802)] = _0x456ab5; const _0x2d2901 = setTimeout(() => { const _0x2a98c3 = _0x4b9cb9; if ('OwbIZ' !== _0x2a98c3(0xaa3)) _0x17c3ce(), _0x18adc6(![]); else { _0x41d39c['error'](_0x2a98c3(0x5fc) + _0x197af4[_0x2a98c3(0x7e6)] + _0x2a98c3(0xc16)); return; } }, 0xbb8), _0x17c3ce = () => { const _0x3e4276 = _0x4b9cb9; clearTimeout(_0x2d2901), _0x21e8e8[_0x3e4276(0x6a2)](_0x3e4276(0x403), _0x2948a6), _0x21e8e8[_0x3e4276(0x6a2)](_0x3e4276(0x1be), _0x4e558f), _0x21e8e8[_0x3e4276(0x802)] = '', _0x21e8e8[_0x3e4276(0x8f0)](); }, _0x2948a6 = () => { _0x17c3ce(), _0x18adc6(!![]); }, _0x4e558f = () => { const _0x36843b = _0x4b9cb9; if ('FuGMs' === _0x36843b(0x560)) { const _0x4a5032 = _0x156927[_0x36843b(0x413)](_0x19696c); _0x8ff829[_0x36843b(0x7be)][_0x36843b(0x4d7)] = _0x36843b(0x80f) + _0x4a5032 + '\x27)'; } else _0x17c3ce(), _0x18adc6(![]); }; _0x21e8e8[_0x4b9cb9(0x672)](_0x4b9cb9(0x403), _0x2948a6), _0x21e8e8[_0x4b9cb9(0x672)](_0x4b9cb9(0x1be), _0x4e558f); }); } else { const _0x57b75b = _0x7a07a5[_0x54cd8f(0x790)] === _0x500c5e(_0x24c148[_0x54cd8f(0x5e4)])['id'] ? _0x69ab84(_0x2a7174[_0x54cd8f(0x5e4)]) : _0x548058(_0x4d7b9c['recipientId']); _0x2c05dc[_0x54cd8f(0x60e)](_0x1dc164, { 'type': _0x54cd8f(0xc3a), 'amount': _0x28eef9[_0x54cd8f(0x897)], 'recipientId': _0x51ab64[_0x54cd8f(0x790)], 'content': _0x54cd8f(0x7d6) + (_0x57b75b?.['name'] || '未知') + '\x20转账\x20' + _0x4521f7['amount'] + ']' }); } } async function _0xd33e1a(_0x55a9f1, _0x476a48) { const _0x5e2049 = _0x8e5972, _0x25908a = [_0x5e2049(0xc6d), _0x5e2049(0xc31)]; for (const _0x1b3682 of _0x25908a) { try { const _0x4d3027 = _0x5e2049(0x28d) + _0x1b3682 + _0x5e2049(0x7a7) + encodeURIComponent(_0x55a9f1) + '-' + encodeURIComponent(_0x476a48), _0x18995e = await fetch(_0x4d3027), _0x3c1906 = await _0x18995e[_0x5e2049(0x9b2)](); if (_0x3c1906[_0x5e2049(0x2bd)] !== 0xc8 || !_0x3c1906[_0x5e2049(0x572)] || _0x3c1906[_0x5e2049(0x572)]['length'] === 0x0) continue; const _0x34c0a4 = _0x3c1906[_0x5e2049(0x572)][_0x5e2049(0x59d)](0x0, 0x5); for (const _0x30a4ac of _0x34c0a4) { const _0x44c582 = _0x5e2049(0x28d) + _0x1b3682 + _0x5e2049(0x84c) + _0x30a4ac['id'], _0x5ae0fe = await fetch(_0x44c582), _0x2f668a = await _0x5ae0fe[_0x5e2049(0x9b2)](), _0x37be2f = _0x2f668a['data']?.[_0x5e2049(0x42a)]; if (await _0x24a6fc(_0x37be2f)) { if (_0x5e2049(0xb44) !== _0x5e2049(0xb90)) return { 'url': _0x37be2f, 'cover': _0x30a4ac[_0x5e2049(0x9a7)], 'source': _0x1b3682 }; else _0x383f3b['click'](); } } } catch (_0x1b6b02) { _0x5e2049(0xbf8) === _0x5e2049(0xbf8) ? console[_0x5e2049(0x1be)](_0x5e2049(0x3fa) + _0x1b3682 + ':', _0x1b6b02) : _0x4ad55f[_0x5e2049(0x7be)][_0x5e2049(0xb82)] = 'translateY(0px)'; } } return { 'url': null, 'cover': null, 'source': null }; } function _0x20e169() { const _0x1e970b = _0x8e5972, _0x57e280 = document[_0x1e970b(0x94d)](_0x1e970b(0x9b5)), _0x3405d4 = document['documentElement'], _0x2c2d36 = document['getElementById'](_0x1e970b(0x3ba)); if (!_0x57e280 || !_0x2c2d36) return; const _0x1410dc = localStorage[_0x1e970b(0x1c6)](_0x1e970b(0x93f)) || '1'; _0x3405d4['style']['setProperty']('--desktop-item-scale', _0x1410dc), _0x57e280['value'] = _0x1410dc, _0x57e280[_0x1e970b(0x672)]('input', () => { const _0x2e7c13 = _0x1e970b; if (_0x2e7c13(0xb54) === _0x2e7c13(0xb54)) { const _0x235264 = _0x57e280['value']; _0x3405d4[_0x2e7c13(0x7be)]['setProperty']('--desktop-item-scale', _0x235264), localStorage[_0x2e7c13(0x2ca)](_0x2e7c13(0x93f), _0x235264); } else { const _0x67aba9 = _0x33ef0f['createElement']('p'); _0x67aba9[_0x2e7c13(0x724)] = _0x2fec86[_0x2e7c13(0x8df)], _0x67aba9['id'] = _0x2e7c13(0x8d4) + _0x333c3b, _0x5b3499[_0x2e7c13(0xc15)](_0x67aba9); } }), _0x2c2d36['addEventListener'](_0x1e970b(0xc5e), () => { const _0x2ab159 = _0x1e970b, _0x3f0cbd = '1'; _0x57e280[_0x2ab159(0x41a)] = _0x3f0cbd, _0x3405d4['style'][_0x2ab159(0x318)]('--desktop-item-scale', _0x3f0cbd), localStorage[_0x2ab159(0x2ca)](_0x2ab159(0x93f), _0x3f0cbd); }); } function _0x2c4005(_0x896aae) { const _0x193972 = _0x8e5972; try { const _0x200a8a = JSON[_0x193972(0xac1)](localStorage['getItem'](_0x193972(0x307)) || '{}'), _0x3bf245 = { ..._0x200a8a, ..._0x896aae }; localStorage['setItem']('badgeState', JSON[_0x193972(0x838)](_0x3bf245)); } catch (_0x2dc2ac) { _0x193972(0x8de) !== _0x193972(0x8de) ? (_0x3eaee5(), _0x22706f(_0x136b5b[_0x193972(0x89b)])) : console[_0x193972(0x1be)](_0x193972(0x5b5), _0x2dc2ac); } } async function _0x3b2dae() { const _0x3cf395 = _0x8e5972, _0x4bd11d = document[_0x3cf395(0x94d)](_0x3cf395(0x4ce)), _0xbac86 = document[_0x3cf395(0x94d)](_0x3cf395(0x694)); try { if (_0x3cf395(0x95d) !== _0x3cf395(0xb7c)) { let _0x42aafe = await _0xe5b0ea('widget_badge'); if (!_0x42aafe) { const _0x2af24d = JSON[_0x3cf395(0xac1)](localStorage['getItem'](_0x3cf395(0x307)) || '{}'); _0x2af24d[_0x3cf395(0x7dc)] && (_0x42aafe = await _0x5a3320(_0x2af24d[_0x3cf395(0x7dc)]), await _0x1ebaf2(_0x3cf395(0x6a6), _0x42aafe)); } if (_0x42aafe) { if (_0x3cf395(0x434) === _0x3cf395(0x434)) _0xbac86[_0x3cf395(0x802)] = URL[_0x3cf395(0x413)](_0x42aafe), _0xbac86[_0x3cf395(0x7be)][_0x3cf395(0x180)] = _0x3cf395(0x26d), _0x4bd11d['style'][_0x3cf395(0xc39)] = 'none'; else { const _0x193afc = (_0x4bb5c1 - _0x2abfea) / (0x3e8 * 0x3c); _0x55a9d8 += _0x3cf395(0x2ff); } } else _0x3cf395(0x93e) !== _0x3cf395(0x93e) ? _0x12e560[_0x3cf395(0x943)] && _0x5b0b93[_0x3cf395(0x943)][_0x3cf395(0x9be)] === _0xe9fde1 && (_0x17b564[_0x3cf395(0x943)] = null) : (_0xbac86[_0x3cf395(0x7be)]['display'] = _0x3cf395(0x546), _0x4bd11d[_0x3cf395(0x7be)][_0x3cf395(0xc39)] = _0x3cf395(0xbcd)); _0x4bd11d['style']['display'] = _0x3cf395(0x26d); } else { const _0x59b8ad = _0x281e31['getElementById'](_0x3bab64); _0x59b8ad[_0x3cf395(0x806)] = '', _0x153095[_0x3cf395(0x575)]['forEach'](_0x466d1e => { const _0x445f56 = _0x3cf395, _0x4ad5ff = _0x463fba[_0x445f56(0x2fa)](_0x445f56(0x2e4)); _0x4ad5ff[_0x445f56(0x41a)] = _0x466d1e['id'], _0x4ad5ff[_0x445f56(0x724)] = _0x466d1e[_0x445f56(0x7e6)], _0x59b8ad['appendChild'](_0x4ad5ff); }); } } catch (_0x180e85) { console[_0x3cf395(0x1be)](_0x3cf395(0xb72), _0x180e85); } } async function _0x4e7726() { const _0x27c6a1 = _0x8e5972, _0x35dc42 = document[_0x27c6a1(0x94d)](_0x27c6a1(0xa57)), _0x4b19f5 = document[_0x27c6a1(0x94d)](_0x27c6a1(0x507)), _0x51805a = document[_0x27c6a1(0x94d)](_0x27c6a1(0x2b6)), _0x483174 = document[_0x27c6a1(0x94d)](_0x27c6a1(0x615)); try { if (_0x27c6a1(0xc53) !== _0x27c6a1(0xb1b)) { let _0x26dbf9 = await _0xe5b0ea('widget_card'); _0x26dbf9 ? (_0x4b19f5[_0x27c6a1(0x802)] = URL[_0x27c6a1(0x413)](_0x26dbf9), _0x4b19f5['style']['display'] = 'block', _0x35dc42[_0x27c6a1(0x7be)][_0x27c6a1(0xc39)] = 'none', _0x35dc42['style'][_0x27c6a1(0x79d)] = 'transparent') : (_0x4b19f5[_0x27c6a1(0x7be)][_0x27c6a1(0x180)] = _0x27c6a1(0x546), _0x35dc42[_0x27c6a1(0x7be)]['border'] = _0x27c6a1(0xbcd), _0x35dc42[_0x27c6a1(0x7be)][_0x27c6a1(0x79d)] = 'rgba(255,255,255,0.2)'); _0x35dc42[_0x27c6a1(0x7be)][_0x27c6a1(0x180)] = _0x27c6a1(0x26d); let _0x2b519c = await _0xe5b0ea(_0x27c6a1(0x397)); _0x2b519c ? _0x27c6a1(0x270) !== _0x27c6a1(0x270) ? _0x5a3f44(_0x27c6a1(0x26a) + _0x24d6e1[_0x27c6a1(0x6da)]) : (_0x483174[_0x27c6a1(0x802)] = URL['createObjectURL'](_0x2b519c), _0x483174['style'][_0x27c6a1(0x180)] = 'block', _0x51805a['style']['border'] = _0x27c6a1(0x546), _0x51805a[_0x27c6a1(0x7be)][_0x27c6a1(0x79d)] = _0x27c6a1(0xa35)) : 'SQvGt' !== _0x27c6a1(0x4aa) ? _0x3d5b46 += _0x27c6a1(0x642) : (_0x483174[_0x27c6a1(0x7be)]['display'] = _0x27c6a1(0x546), _0x51805a['style'][_0x27c6a1(0xc39)] = _0x27c6a1(0xbcd), _0x51805a[_0x27c6a1(0x7be)][_0x27c6a1(0x79d)] = _0x27c6a1(0x5e6)), _0x51805a[_0x27c6a1(0x7be)][_0x27c6a1(0x180)] = _0x27c6a1(0x26d); } else _0x580b37(), _0x3eb051(![]), _0x52bfb9[_0x27c6a1(0xa31)] = ![]; } catch (_0x50a6a8) { console[_0x27c6a1(0x1be)](_0x27c6a1(0x866), _0x50a6a8); } } async function _0x4e7726() { const _0x59e3e3 = _0x8e5972; if (_0x59e3e3(0x49a) !== 'ckRyU') { const _0x390fca = document[_0x59e3e3(0x94d)](_0x59e3e3(0xa57)), _0x2602ef = document['getElementById'](_0x59e3e3(0x507)); try { let _0x598c52 = await _0xe5b0ea(_0x59e3e3(0x810)); if (!_0x598c52) { if (_0x59e3e3(0x979) !== _0x59e3e3(0x6ff)) { const _0x9d6257 = JSON[_0x59e3e3(0xac1)](localStorage[_0x59e3e3(0x1c6)](_0x59e3e3(0x5f6)) || '{}'); _0x9d6257[_0x59e3e3(0x7dc)] && (console[_0x59e3e3(0x668)](_0x59e3e3(0x9c7)), _0x598c52 = await _0x5a3320(_0x9d6257['image']), await _0x1ebaf2(_0x59e3e3(0x810), _0x598c52)); } else { const _0x3ffe6a = new _0x555fc9(_0xfebac2[_0x59e3e3(0x83c)]), _0x432a01 = _0x3ea98f(_0x3ffe6a); _0xe8cc20 += _0x59e3e3(0x756) + _0x432a01 + '\x0a'; const _0x4724b7 = _0x465b7a[_0x59e3e3(0x430)](), _0xee6985 = _0x3ffe6a['toDateString'](), _0x10af4b = new _0x4db936(); _0x10af4b[_0x59e3e3(0x919)](_0x5f5413[_0x59e3e3(0x3fc)]() - 0x1); const _0x554d8e = _0x10af4b[_0x59e3e3(0x430)](); if (_0x4724b7 === _0xee6985) { const _0x148c0e = (_0x1c2402 - _0x3ffe6a) / (0x3e8 * 0x3c); _0x316aa5 += _0x59e3e3(0x2ff); } else { if (_0x554d8e === _0xee6985) _0x2b0e51 += _0x59e3e3(0x7a3); else { const _0x17c26b = _0x4092a7['round']((_0x261aa5 - _0x3ffe6a) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5e84f1 += _0x59e3e3(0x604) + _0x17c26b + _0x59e3e3(0x76c); } } } } _0x598c52 ? (_0x2602ef['src'] = URL[_0x59e3e3(0x413)](_0x598c52), _0x390fca[_0x59e3e3(0x7be)]['display'] = _0x59e3e3(0x26d)) : _0x59e3e3(0x2e3) === 'qxqog' ? _0x5b986c[_0x59e3e3(0x1be)](_0x59e3e3(0x866), _0x1877b5) : _0x390fca[_0x59e3e3(0x7be)][_0x59e3e3(0x180)] = 'none'; } catch (_0x23eb07) { console['error']('加载卡片图片失败', _0x23eb07); } try { if ('XcIZT' !== _0x59e3e3(0x301)) try { const _0xb9a25d = _0x526878[_0x59e3e3(0xac1)](_0x310525), _0x188114 = { ..._0x3b8ee5 }, _0x5b0b63 = { ..._0x188114, ..._0xb9a25d }; _0x5b0b63['preferences'] = { ..._0x188114['preferences'], ..._0xb9a25d[_0x59e3e3(0x2de)] || {} }, _0x5b0b63[_0x59e3e3(0xb07)] = { ..._0x188114[_0x59e3e3(0xb07)], ..._0xb9a25d['apiSettings'] || {} }, _0x155c0e['assign'](_0x292825, _0x5b0b63); } catch (_0x833b0c) { _0x2028cc[_0x59e3e3(0x1be)](_0x59e3e3(0x8d9), _0x833b0c), _0x2f6153[_0x59e3e3(0x34a)](_0x59e3e3(0x2ad)); } else { let _0x34d591 = await _0xe5b0ea(_0x59e3e3(0x397)); const _0x464bff = document[_0x59e3e3(0x94d)](_0x59e3e3(0x615)), _0x36f877 = document[_0x59e3e3(0x94d)](_0x59e3e3(0x2b6)); _0x34d591 ? _0x59e3e3(0x7da) === _0x59e3e3(0x3c2) ? _0x1db6d1[_0x59e3e3(0x724)] = '▶' : (_0x464bff[_0x59e3e3(0x802)] = URL['createObjectURL'](_0x34d591), _0x36f877[_0x59e3e3(0x7be)][_0x59e3e3(0x180)] = _0x59e3e3(0x26d)) : _0x36f877[_0x59e3e3(0x7be)][_0x59e3e3(0x180)] = _0x59e3e3(0x546); } } catch (_0x4914e9) { if ('fAHLW' === _0x59e3e3(0x5b6)) { const _0x30cdc0 = _0x2e1dc0[_0x59e3e3(0x2fa)]('div'); _0x30cdc0[_0x59e3e3(0x1ea)] = 'preview-item', _0x30cdc0['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x30cdc0['querySelector'](_0x59e3e3(0x342))[_0x59e3e3(0x997)] = () => _0x5dc70f(_0x59e3e3(0x7dc)), _0x2c559a[_0x59e3e3(0xc15)](_0x30cdc0), _0x2ebef7(_0x5702b9)[_0x59e3e3(0x1d2)](_0x1e2c99 => { const _0x2e46d7 = _0x59e3e3, _0x2355a9 = _0xb34ad8[_0x2e46d7(0x94d)](_0x2e46d7(0x6b5)); _0x2355a9 && _0x1e2c99 && (_0x2355a9[_0x2e46d7(0x802)] = _0x39f57a[_0x2e46d7(0x413)](_0x1e2c99)); }); } else console[_0x59e3e3(0x1be)](_0x59e3e3(0x3d3), _0x4914e9); } } else _0x515978[_0x59e3e3(0x802)] = _0xc755d4[_0x59e3e3(0x8ae)] || _0x5d92e2; } _0x1ce954[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x21d697 = _0x8e5972; _0x21d697(0x920) === _0x21d697(0x920) ? (_0x56f33b(), _0x40b080(_0x21d697(0x444), _0x21d697(0x5a6))) : (_0x497800(![]), _0x1a41c7[_0x21d697(0xa31)] = ![]); }), document['getElementById'](_0x8e5972(0x9c3))['addEventListener']('click', () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0x444))), document[_0x8e5972(0x94d)](_0x8e5972(0x933))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x3d7bf0()), document['getElementById'](_0x8e5972(0x848))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x1df2a9 = _0x8e5972; _0x56f33b(), _0x40b080(_0x1df2a9(0x444), _0x1df2a9(0x7cf)); }), document[_0x8e5972(0x94d)](_0x8e5972(0x995))['addEventListener'](_0x8e5972(0xc5e), _0x4a9deb), document[_0x8e5972(0x94d)](_0x8e5972(0x9e8))[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x1c76ce), document[_0x8e5972(0x94d)](_0x8e5972(0x38b))[_0x8e5972(0x672)]('click', () => { const _0x55cddf = _0x8e5972, _0x152572 = document[_0x55cddf(0x94d)]('editing-user-id')[_0x55cddf(0x41a)]; _0x152572 && (_0x1d2a6a[_0x55cddf(0xc02)] = _0x152572, _0x4b4b09(), _0x5294eb('已设为当前用户！'), _0x56f33b(), document[_0x55cddf(0x94d)]('set-active-user-button')[_0x55cddf(0x7be)][_0x55cddf(0x180)] = _0x55cddf(0x546)); }); function _0x43b50c(_0x1ae216) { const _0x10bc6d = _0x8e5972, _0x50bb45 = _0x1d2a6a[_0x10bc6d(0x816)][_0x10bc6d(0x2ec)](_0x3107bf => _0x3107bf['id'] === _0x1ae216), _0x1736c7 = _0x50bb45?.[_0x10bc6d(0x25d)]; let _0xd03efc = _0x1d2a6a[_0x10bc6d(0x575)][_0x10bc6d(0x2ec)](_0x50d12a => _0x50d12a['id'] === _0x1736c7); return !_0xd03efc && (_0xd03efc = _0x1d2a6a[_0x10bc6d(0x575)]['find'](_0x429013 => _0x429013['id'] === _0x1d2a6a[_0x10bc6d(0xc02)]) || _0x1d2a6a['userProfiles'][0x0]), _0xd03efc || { 'name': '用户', 'avatar': _0x43e6b0, 'persona': '' }; } function _0x583012(_0x1ee36f) { const _0x12b000 = _0x8e5972, _0x30abaf = document[_0x12b000(0x94d)](_0x1ee36f); _0x30abaf['innerHTML'] = '', _0x1d2a6a['userProfiles'][_0x12b000(0x83e)](_0x1a01cf => { const _0x8d3175 = _0x12b000; if (_0x8d3175(0xbf6) === _0x8d3175(0x39c)) _0x4592e1 && (_0x107933[_0x8d3175(0x7be)]['display'] = _0x8d3175(0x546)); else { const _0x21bff7 = document['createElement'](_0x8d3175(0x2e4)); _0x21bff7[_0x8d3175(0x41a)] = _0x1a01cf['id'], _0x21bff7['textContent'] = _0x1a01cf['name'], _0x30abaf['appendChild'](_0x21bff7); } }); } function _0x4f78a0(_0x251c71) { const _0x42169d = _0x8e5972; if (_0x42169d(0x4af) === _0x42169d(0x4af)) { const _0x476562 = _0x5964f7(_0x251c71), _0x35f4ea = document[_0x42169d(0x94d)](_0x42169d(0x5b2)); _0x35f4ea['style'][_0x42169d(0x4d7)] = ''; let _0x42f0a8 = document[_0x42169d(0x94d)](_0x42169d(0x480) + _0x251c71); if (_0x42f0a8) _0x42f0a8[_0x42169d(0x806)] = ''; if (!_0x476562) return; if (_0x476562['chatWallpaper']) { if (_0x42169d(0xb0f) !== _0x42169d(0xb0f)) { const _0x2269b5 = _0x2e6e6d[0x0][_0x42169d(0x667)](), _0x45704d = _0x44053a[0x1][_0x42169d(0x667)](), _0x1e453c = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x1e453c[_0x2269b5] && (_0x4d7155[_0x1e453c[_0x2269b5]] = _0x45704d); } else _0x35f4ea[_0x42169d(0x7be)]['backgroundImage'] = _0x42169d(0x80f) + _0x476562[_0x42169d(0x421)] + '\x27)', _0x35f4ea[_0x42169d(0x7be)]['backgroundSize'] = _0x42169d(0x9a7), _0x35f4ea[_0x42169d(0x7be)][_0x42169d(0xbed)] = _0x42169d(0x2aa); } if (_0x476562[_0x42169d(0x2d1)]) { if ('vafnS' === _0x42169d(0x426)) _0x1c47b1 += _0x42169d(0x414); else { let _0x4366d3 = document[_0x42169d(0x94d)]('style-' + _0x476562['id']); !_0x4366d3 && (_0x4366d3 = document[_0x42169d(0x2fa)](_0x42169d(0x7be)), _0x4366d3['id'] = _0x42169d(0x480) + _0x476562['id'], document['head']['appendChild'](_0x4366d3)); const _0x321471 = _0x476562[_0x42169d(0x2d1)], _0x3af01a = _0x321471[_0x42169d(0x9ed)](/\.bubble\.sent/g, _0x42169d(0x54f) + _0x476562['id'] + _0x42169d(0x6a3))[_0x42169d(0x9ed)](/\.bubble\.received/g, _0x42169d(0x54f) + _0x476562['id'] + _0x42169d(0xb2d)); _0x4366d3['innerHTML'] = _0x3af01a; } } } else _0x3d2ee2[_0x42169d(0x89b)] = _0x4a95b0['id'], _0xa547ed(); } function _0x477316() { const _0x544ffd = _0x8e5972; if ('cdafM' !== _0x544ffd(0x4c0)) { const _0x4d2485 = document[_0x544ffd(0x94d)](_0x544ffd(0x181)); _0x4d2485['innerHTML'] = ''; const _0x11ab24 = _0x57522e => { const _0x4c3032 = _0x544ffd; if (_0x4c3032(0x5b0) === _0x4c3032(0x5b0)) { _0x1d2a6a['pendingPostAttachments'][_0x57522e] = null; if (_0x57522e === _0x4c3032(0x7dc)) _0x1d2a6a[_0x4c3032(0x4e1)][_0x4c3032(0xbf0)] = null; _0x477316(); } else { _0x1334a5[_0x4c3032(0x806)] = _0x4c3032(0x9da); return; } }, _0x475a18 = _0x1d2a6a['pendingPostAttachments']['imageId'], _0x108160 = _0x1d2a6a['pendingPostAttachments'][_0x544ffd(0x6d1)]; if (_0x475a18) { const _0x5395cb = document[_0x544ffd(0x2fa)](_0x544ffd(0xaf1)); _0x5395cb['className'] = 'preview-item', _0x5395cb[_0x544ffd(0x806)] = _0x544ffd(0x56d), _0x5395cb[_0x544ffd(0x20e)]('.remove-attachment-btn')[_0x544ffd(0x997)] = () => _0x11ab24(_0x544ffd(0x7dc)), _0x4d2485[_0x544ffd(0xc15)](_0x5395cb), _0xe5b0ea(_0x475a18)[_0x544ffd(0x1d2)](_0x1a9447 => { const _0x5dc346 = _0x544ffd; if (_0x5dc346(0xae2) !== _0x5dc346(0xc35)) { const _0x2ffeda = document[_0x5dc346(0x94d)]('pending-post-image-preview'); _0x2ffeda && _0x1a9447 && (_0x2ffeda[_0x5dc346(0x802)] = URL[_0x5dc346(0x413)](_0x1a9447)); } else { const _0x38e187 = _0xc65154[_0x5dc346(0x789)]((_0x5d9660 - _0x56b25a) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x267e85 += '-\x20**状态提示**:\x20你已经有\x20' + _0x38e187 + _0x5dc346(0x76c); } }); } if (_0x108160) { const _0x301454 = document[_0x544ffd(0x2fa)]('div'); _0x301454[_0x544ffd(0x1ea)] = _0x544ffd(0x712), _0x301454[_0x544ffd(0x806)] = _0x544ffd(0x33a) + (_0x108160[_0x544ffd(0x8ae)] || _0x133533) + _0x544ffd(0x93c) + _0x108160[_0x544ffd(0x4d2)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>' + _0x108160[_0x544ffd(0xa2c)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x301454['querySelector'](_0x544ffd(0x342))[_0x544ffd(0x997)] = () => _0x11ab24('music'), _0x4d2485[_0x544ffd(0xc15)](_0x301454); } } else _0x2a97dd[_0x544ffd(0xa47)]['remove'](_0x544ffd(0x8d5)); } async function _0x4ad53c(_0x365048) { const _0x39caef = _0x8e5972, _0x2583ae = _0x1d2a6a['friendCircles'][_0x39caef(0x2ec)](_0x2206c8 => _0x2206c8['id'] === _0x1d2a6a['activeFriendCircleId']); if (!_0x2583ae) return; _0xea506e(!![], _0x39caef(0x7bd)), _0x1d2a6a['isGenerating'] = !![]; try { const _0x180e8e = _0x2583ae[_0x39caef(0x861)][_0x39caef(0x719)](_0x486112 => _0x5964f7(_0x486112))[_0x39caef(0x564)](Boolean), _0x18503d = _0x5d551b(), _0x198425 = _0x180e8e[_0x39caef(0x719)](_0xebbb8a => { const _0x53c0b2 = _0x39caef; if (_0x53c0b2(0x5f0) === _0x53c0b2(0x4f9)) { const _0x29b897 = _0x1a2d72['transaction'](_0x2e60e3, _0x53c0b2(0xb76)), _0x4f935c = _0x29b897[_0x53c0b2(0x926)](_0x2b4aeb), _0x178367 = _0x4f935c[_0x53c0b2(0x689)](_0x704c34); _0x178367['onsuccess'] = () => _0x42ead2(_0x178367[_0x53c0b2(0xa75)] ? _0x178367[_0x53c0b2(0xa75)][_0x53c0b2(0x3c3)] : null), _0x178367['onerror'] = () => _0x5e3d38(_0x178367['error']); } else { const { omniText: _0x13d269 } = _0x57f616(_0xebbb8a['id'], null), _0x2dc2e7 = _0x49ee64(_0xebbb8a['id']), _0x1d7417 = _0xebbb8a['linkedWorldBookIds'] && _0xebbb8a[_0x53c0b2(0xa93)]['length'] > 0x0 ? _0x53c0b2(0x39d) + _0xebbb8a['name'] + '的个人专属世界观设定\x0a' + _0xebbb8a[_0x53c0b2(0xa93)]['map'](_0x51ebab => _0x1d2a6a[_0x53c0b2(0x5cb)]['find'](_0x2251c6 => _0x2251c6['id'] === _0x51ebab))[_0x53c0b2(0x564)](Boolean)[_0x53c0b2(0x719)](_0x569075 => _0x53c0b2(0x2e9) + _0x569075[_0x53c0b2(0x7e6)] + '\x0a' + _0x569075[_0x53c0b2(0x415)])[_0x53c0b2(0x973)]('') : ''; return _0x53c0b2(0x895) + _0xebbb8a['name'] + _0x53c0b2(0x64f) + _0xebbb8a['id'] + _0x53c0b2(0x86b) + _0xebbb8a['persona'] + _0x53c0b2(0x9d1) + _0x13d269 + '\x0a' + _0x2dc2e7 + '\x0a' + _0x1d7417; } })[_0x39caef(0x973)]('\x0a\x0a'), _0x28b76e = _0x5d564a(_0x365048[_0x39caef(0x9d5)]) || { 'name': '用户' }, _0x546dc2 = _0x28b76e[_0x39caef(0x647)] ? _0x39caef(0x1ec) + _0x28b76e[_0x39caef(0x7e6)] + _0x39caef(0x27b) + _0x28b76e[_0x39caef(0x647)] + '\x0a' : ''; let _0x4ccf42 = null; if (_0x365048[_0x39caef(0x7dc)]) _0x39caef(0x55c) !== _0x39caef(0x55c) ? delete _0x38deb2[_0x39caef(0x7a4)] : _0x4ccf42 = _0x365048[_0x39caef(0x7dc)]; else { if (_0x365048[_0x39caef(0xbf0)]) try { const _0x3de0ef = await _0xe5b0ea(_0x365048[_0x39caef(0xbf0)]); _0x3de0ef && (_0x4ccf42 = await _0x22515d(_0x3de0ef)); } catch (_0x2aadbb) { console[_0x39caef(0x1be)](_0x39caef(0x76a), _0x2aadbb); } } let _0x1d1166 = _0x28b76e[_0x39caef(0x7e6)] + _0x39caef(0xa18) + _0x365048[_0x39caef(0x415)] + '”'; _0x4ccf42 && (_0x1d1166 += _0x39caef(0x67a)); _0x365048[_0x39caef(0x832)] === _0x39caef(0x6d1) && (_0x1d1166 += _0x39caef(0x50a) + _0x365048[_0x39caef(0x4d2)] + '\x20-\x20' + _0x365048[_0x39caef(0xa2c)] + ']'); const _0x31b9e6 = '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a' + _0x198425 + '\x0a\x0a' + _0x546dc2 + _0x39caef(0x658) + _0x18503d + _0x39caef(0xb53) + _0x1d1166 + _0x39caef(0x8ef), _0x4fcb9f = [{ 'role': _0x39caef(0xc0f), 'content': _0x31b9e6 }], _0x581764 = { 'role': _0x39caef(0xadb), 'content': _0x39caef(0xaf8) }; _0x4ccf42 && (_0x581764[_0x39caef(0x7dc)] = _0x4ccf42); _0x4fcb9f['push'](_0x581764); const _0x557803 = await _0x3e56bc(_0x4fcb9f, { 'json': !![] }), _0x58669f = _0x557803[_0x39caef(0x5f9)](/({[\s\S]*})/); if (!_0x58669f) throw new Error(_0x39caef(0x4f4)); const _0x44abb7 = JSON[_0x39caef(0xac1)](_0x58669f[0x1]), _0x21d330 = _0x2583ae[_0x39caef(0xbc0)][_0x39caef(0x2ec)](_0x237458 => _0x237458['id'] === _0x365048['id']); _0x21d330 && (_0x21d330[_0x39caef(0x5c3)] = _0x44abb7[_0x39caef(0x5c3)] || [], _0x21d330[_0x39caef(0x448)] = (_0x44abb7[_0x39caef(0x448)] || [])['map']((_0x9c38af, _0x14fce8) => ({ ..._0x9c38af, 'commentId': 'c_' + _0x365048[_0x39caef(0x83c)] + '_' + _0x14fce8 })), _0x4b4b09(), _0x3babe8()); } catch (_0x3d3f9f) { console['error'](_0x39caef(0xbc8), _0x3d3f9f), _0x5294eb(_0x39caef(0x9fb)); } finally { _0xea506e(![]), _0x1d2a6a[_0x39caef(0xa31)] = ![]; } } function _0x54bc26() { const _0x316319 = _0x8e5972, _0x558be2 = _0x1d2a6a['friendCircles'][_0x316319(0x2ec)](_0x1afb21 => _0x1afb21['id'] === _0x1d2a6a[_0x316319(0x474)]), _0x3afb42 = _0x558be2?.['boundUserProfileId']; let _0x34000f = _0x1d2a6a[_0x316319(0x575)][_0x316319(0x2ec)](_0x12269c => _0x12269c['id'] === _0x3afb42); !_0x34000f && (_0x34000f = _0x1d2a6a['userProfiles'][_0x316319(0x2ec)](_0x3f042a => _0x3f042a['id'] === _0x1d2a6a[_0x316319(0xc02)])), !_0x34000f && (_0x316319(0x3d0) === _0x316319(0x82d) ? (_0x1f5d6b[_0x316319(0x7be)]['position'] = _0x316319(0x8b5), _0x3b96e2['style']['top'] = _0x316319(0xb71), _0x4dd62b[_0x316319(0x7be)]['left'] = '50%', _0x46c275[_0x316319(0x7be)][_0x316319(0xb82)] = _0x316319(0x2c9), _0x2d3748[_0x316319(0x7be)]['display'] = _0x316319(0x26d)) : _0x34000f = _0x1d2a6a[_0x316319(0x575)][0x0]), _0x34000f && ('TWurn' !== 'jvcqd' ? document[_0x316319(0x94d)](_0x316319(0x717))['src'] = _0x34000f['avatar'] || _0x43e6b0 : _0x2006c1[_0x316319(0xc02)] = _0x2a123a['id']); } function _0x400227(_0x37e94a) { const _0x1574a7 = _0x8e5972; let _0x1a8b05 = 0x0, _0x32b059 = 0x0, _0x19bd78 = 0x0; if (_0x37e94a[_0x1574a7(0x2ab)] == 0x4) 'xreJf' !== _0x1574a7(0x941) ? (_0x167797[_0x1574a7(0xa47)]['add']('active'), _0x37bfd9[_0x1574a7(0x7fb)]({ 'behavior': _0x1574a7(0x469), 'block': 'center' })) : (_0x1a8b05 = '0x' + _0x37e94a[0x1] + _0x37e94a[0x1], _0x32b059 = '0x' + _0x37e94a[0x2] + _0x37e94a[0x2], _0x19bd78 = '0x' + _0x37e94a[0x3] + _0x37e94a[0x3]); else _0x37e94a[_0x1574a7(0x2ab)] == 0x7 && (_0x1a8b05 = '0x' + _0x37e94a[0x1] + _0x37e94a[0x2], _0x32b059 = '0x' + _0x37e94a[0x3] + _0x37e94a[0x4], _0x19bd78 = '0x' + _0x37e94a[0x5] + _0x37e94a[0x6]); _0x1a8b05 /= 0xff, _0x32b059 /= 0xff, _0x19bd78 /= 0xff; let _0x5bccbc = Math[_0x1574a7(0x3c8)](_0x1a8b05, _0x32b059, _0x19bd78), _0x49a244 = Math['max'](_0x1a8b05, _0x32b059, _0x19bd78), _0x31b2d4 = _0x49a244 - _0x5bccbc, _0x2612e4 = 0x0, _0x456532 = 0x0, _0x5b2702 = 0x0; if (_0x31b2d4 == 0x0) _0x2612e4 = 0x0; else { if (_0x49a244 == _0x1a8b05) _0x2612e4 = (_0x32b059 - _0x19bd78) / _0x31b2d4 % 0x6; else { if (_0x49a244 == _0x32b059) _0x2612e4 = (_0x19bd78 - _0x1a8b05) / _0x31b2d4 + 0x2; else _0x2612e4 = (_0x1a8b05 - _0x32b059) / _0x31b2d4 + 0x4; } } _0x2612e4 = Math[_0x1574a7(0x789)](_0x2612e4 * 0x3c); if (_0x2612e4 < 0x0) _0x2612e4 += 0x168; return _0x5b2702 = (_0x49a244 + _0x5bccbc) / 0x2, _0x456532 = _0x31b2d4 == 0x0 ? 0x0 : _0x31b2d4 / (0x1 - Math[_0x1574a7(0x1db)](0x2 * _0x5b2702 - 0x1)), _0x456532 = +(_0x456532 * 0x64)[_0x1574a7(0x3a8)](0x1), _0x5b2702 = +(_0x5b2702 * 0x64)['toFixed'](0x1), { 'h': _0x2612e4, 's': _0x456532, 'l': _0x5b2702 }; } function _0x50ab92() { const _0x1aaa0d = _0x8e5972, _0x32d832 = (_0x7e8ccf, _0x4fbe04, _0x93982f) => { const _0x10d452 = _0x4bce; if (_0x10d452(0x8b3) === _0x10d452(0x59e)) { _0xe796b4['value'] = _0x10d452(0x283); return; } else { const _0x1efde1 = document[_0x10d452(0x94d)](_0x7e8ccf); if (!_0x1efde1) return; let _0x3691ad = null; try { _0x3691ad = JSON[_0x10d452(0xac1)](localStorage['getItem'](_0x4fbe04) || '{}'); } catch { _0x3691ad = {}; } _0x1efde1['style'][_0x10d452(0x87a)] = _0x10d452(0x8b5), _0x1efde1[_0x10d452(0x7be)][_0x10d452(0xa3b)] = '', _0x1efde1['style']['left'] = '', _0x1efde1[_0x10d452(0x7be)][_0x10d452(0x18d)] = '', _0x1efde1['style'][_0x10d452(0x81a)] = '', _0x1efde1[_0x10d452(0x7be)][_0x10d452(0xb82)] = ''; if (typeof _0x3691ad[_0x10d452(0xa3b)] === _0x10d452(0x404) && typeof _0x3691ad[_0x10d452(0x31a)] === 'number') _0x1efde1['style']['top'] = _0x3691ad[_0x10d452(0xa3b)] + '%', _0x1efde1['style'][_0x10d452(0x31a)] = _0x3691ad[_0x10d452(0x31a)] + '%'; else { if (_0x10d452(0x82e) === _0x10d452(0xc36)) _0x549869[_0x10d452(0xa47)][_0x10d452(0x8f0)](_0x10d452(0xbb6)), _0x2c5df2[_0x10d452(0xa47)][_0x10d452(0x5ee)](_0x10d452(0xbb6)), _0x3a4279(); else for (const _0x5db054 in _0x93982f) { if (_0x10d452(0xa26) === _0x10d452(0xa26)) _0x1efde1[_0x10d452(0x7be)][_0x5db054] = _0x93982f[_0x5db054]; else { const _0x522fb9 = _0x35c96c['createElement'](_0x10d452(0xaf1)); _0x522fb9[_0x10d452(0x1ea)] = _0x10d452(0xc37); const _0x44ea1c = _0x4f5934[_0x10d452(0x9a7)] ? _0x5ef250['createObjectURL'](_0x1f4054[_0x10d452(0x9a7)]) : _0x6b56c9; _0x522fb9[_0x10d452(0x806)] = _0x10d452(0xbc7) + _0x44ea1c + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x335fbf[_0x10d452(0x5a0)][_0x10d452(0x2fe)] || _0x10d452(0x8c2)) + _0x10d452(0x3d9) + (_0x44e3d8[_0x10d452(0x5a0)]['歌手'] || _0x10d452(0x52b)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x522fb9[_0x10d452(0x672)](_0x10d452(0xc5e), () => { _0x8b0c26(_0x32b1a0); }), _0x35d0dd['appendChild'](_0x522fb9); } } } } }; _0x32d832('home-clock-container', _0x1aaa0d(0x350), { 'top': '15%', 'left': _0x1aaa0d(0xb10), 'transform': _0x1aaa0d(0x2c9) }), _0x32d832(_0x1aaa0d(0x9a3), _0x1aaa0d(0xb59), { 'top': _0x1aaa0d(0xa21), 'right': '4%' }), _0x32d832('app-user-profiles', 'appIconPosition_app-user-profiles', { 'top': _0x1aaa0d(0xa21), 'right': _0x1aaa0d(0xb4c) }), _0x32d832('app-settings', 'appIconPosition_app-settings', { 'top': '8%', 'right': '28%' }), _0x32d832(_0x1aaa0d(0x408), _0x1aaa0d(0x1e2), { 'top': '8%', 'right': '4%' }), _0x32d832(_0x1aaa0d(0x2d9), _0x1aaa0d(0xbbe), { 'top': _0x1aaa0d(0x464), 'left': '5%' }), _0x32d832(_0x1aaa0d(0xc49), _0x1aaa0d(0x85d), { 'top': _0x1aaa0d(0x8cf), 'left': _0x1aaa0d(0xb95) }), _0x32d832('app-snoop', _0x1aaa0d(0x5fb), { 'top': '71%', 'left': '5%' }), _0x32d832(_0x1aaa0d(0x746), _0x1aaa0d(0x946), { 'top': _0x1aaa0d(0x464), 'left': _0x1aaa0d(0xb95) }), _0x32d832(_0x1aaa0d(0x4ce), _0x1aaa0d(0x307), { 'top': '60%', 'right': '5%' }), _0x32d832(_0x1aaa0d(0x2b6), _0x1aaa0d(0x486), { 'top': '8%', 'left': '5%' }); const _0x7890cd = document['getElementById'](_0x1aaa0d(0xa57)); _0x7890cd && (_0x7890cd[_0x1aaa0d(0x7be)][_0x1aaa0d(0x87a)] = 'absolute', _0x7890cd[_0x1aaa0d(0x7be)][_0x1aaa0d(0xa3b)] = _0x1aaa0d(0xb71), _0x7890cd['style']['left'] = _0x1aaa0d(0xb10), _0x7890cd[_0x1aaa0d(0x7be)][_0x1aaa0d(0xb82)] = _0x1aaa0d(0x2c9), _0x7890cd[_0x1aaa0d(0x7be)][_0x1aaa0d(0x180)] = _0x1aaa0d(0x26d)); const _0x9f52e9 = document[_0x1aaa0d(0x94d)]('music-widget'); _0x9f52e9 && ('doOno' !== _0x1aaa0d(0x4ab) ? (_0x9f52e9[_0x1aaa0d(0x7be)][_0x1aaa0d(0x87a)] = _0x1aaa0d(0x8b5), _0x9f52e9[_0x1aaa0d(0x7be)][_0x1aaa0d(0xa3b)] = '35%', _0x9f52e9['style'][_0x1aaa0d(0x31a)] = '50%', _0x9f52e9[_0x1aaa0d(0x7be)][_0x1aaa0d(0xb82)] = _0x1aaa0d(0x2c9), _0x9f52e9[_0x1aaa0d(0x7be)][_0x1aaa0d(0x180)] = _0x1aaa0d(0x86e)) : _0x38794f[_0x1aaa0d(0x83e)](_0x1cac6a => { const _0x2f2d39 = _0x1aaa0d, _0x4cf85f = _0x4dcc61['accountingLedger'][_0x1cac6a], _0x5dbb4e = _0x4cf85f['categorizedExpenses'][_0x2f2d39(0xaf5)]((_0x1ffcc8, _0x5e9029) => _0x1ffcc8 + (_0x5e9029[_0x2f2d39(0x897)] || 0x0), 0x0); _0x86d963 += _0x2f2d39(0x67d) + _0x1cac6a + _0x2f2d39(0x80c) + _0x1cac6a + _0x2f2d39(0x961) + _0x5dbb4e[_0x2f2d39(0x3a8)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; })); } function _0x46b5ac() { const _0x5d4862 = _0x8e5972; if (_0x5d4862(0x829) === _0x5d4862(0xba7)) _0x5bc41d = _0x5d4862(0x74b) + _0x5eeb2a[_0x5d4862(0x7e6)] + _0x5d4862(0xa84); else { const _0x14d682 = document[_0x5d4862(0x94d)]('custom-icon-list-container'); _0x14d682['innerHTML'] = ''; const _0x5004fb = document[_0x5d4862(0x599)](_0x5d4862(0x65a)); _0x5004fb[_0x5d4862(0x83e)](_0x2f44bd => { const _0x3db69f = _0x5d4862, _0x1bbaf6 = _0x2f44bd['id'], _0x4803f4 = _0x2f44bd['querySelector'](_0x3db69f(0x6b2))[_0x3db69f(0x724)], _0x115c27 = 'customIcon_' + _0x1bbaf6, _0x4af63c = localStorage[_0x3db69f(0x1c6)](_0x115c27), _0x3358cd = document['createElement'](_0x3db69f(0xaf1)); _0x3358cd[_0x3db69f(0x1ea)] = _0x3db69f(0x761), _0x3358cd[_0x3db69f(0x7be)][_0x3db69f(0x401)] = '10px\x200', _0x3358cd[_0x3db69f(0x806)] = _0x3db69f(0x901) + _0x1bbaf6 + _0x3db69f(0x721) + (_0x4af63c || _0x3db69f(0x81e)) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>' + _0x4803f4 + _0x3db69f(0xb4b) + _0x1bbaf6 + _0x3db69f(0x97c) + _0x1bbaf6 + _0x3db69f(0x900) + _0x115c27 + _0x3db69f(0x7e5), _0x14d682[_0x3db69f(0xc15)](_0x3358cd); const _0x210f5d = document[_0x3db69f(0x94d)](_0x3db69f(0x6ec) + _0x1bbaf6); _0x210f5d[_0x3db69f(0x672)]('change', async _0x16716d => { const _0x20bd94 = _0x3db69f, _0x59bc2d = _0x16716d[_0x20bd94(0xbdf)][_0x20bd94(0x63c)][0x0]; if (!_0x59bc2d) return; try { if (_0x20bd94(0x674) === _0x20bd94(0x256)) { _0x2b03ce('需要至少2个角色才能创建群聊。'); return; } else { const _0x55eea7 = await _0x30dd9b(_0x59bc2d); localStorage[_0x20bd94(0x2ca)](_0x115c27, _0x55eea7), document[_0x20bd94(0x94d)]('preview_' + _0x1bbaf6)['src'] = _0x55eea7, _0x57c03f(); } } catch (_0xc5107a) { 'PfZad' !== _0x20bd94(0x6f5) ? _0x5294eb(_0x20bd94(0x268) + _0xc5107a[_0x20bd94(0x6da)]) : _0x2d4354(![]); } }); }); } } function _0x57c03f() { const _0x383d51 = _0x8e5972; if ('MBeWk' !== _0x383d51(0xb9c)) { const _0x3a651a = document['querySelectorAll']('.app-icon'); _0x3a651a['forEach'](_0x142adc => { const _0x5913b2 = _0x383d51; if (_0x5913b2(0xb73) !== _0x5913b2(0xb73)) { _0x31b7fe(_0x5913b2(0x221)); return; } else { const _0xa238e8 = _0x142adc['id'], _0x3da944 = _0x5913b2(0x88e) + _0xa238e8, _0x296297 = localStorage['getItem'](_0x3da944), _0x767079 = _0x142adc['querySelector'](_0x5913b2(0xc78)); if (_0x296297) _0x767079[_0x5913b2(0x806)] = _0x5913b2(0x73f) + _0x296297 + _0x5913b2(0x98f); else { if (_0x5913b2(0x4a7) === 'nCopy') _0x3e1a6c(_0x5f3cd9 - 0x1); else { const _0x4e5ddb = document[_0x5913b2(0x20e)]('#app-dock-bottom-left\x20#' + _0xa238e8 + _0x5913b2(0x28a) + _0xa238e8 + _0x5913b2(0x799))?.[_0x5913b2(0x806)]; _0x4e5ddb && (_0x767079[_0x5913b2(0x806)] = _0x4e5ddb); } } } }); } else _0x3d1563('资料已更新，为了让所有变更完全生效，我来帮你刷新一下。'), _0x452276(() => _0x497b21[_0x383d51(0x4ae)](), 0x5dc); } function _0x3193a8() { const _0xd49a3a = _0x8e5972, _0xdfc15a = _0x1d2a6a[_0xd49a3a(0xc00)][_0xd49a3a(0x2ec)](_0x16a673 => _0x16a673['id'] === _0x1d2a6a[_0xd49a3a(0x474)]), _0xa0b6fe = _0x3f5192(); let _0x507a56 = []; if (_0xdfc15a && _0xdfc15a['posts']) { const _0x3eeda9 = _0xdfc15a['posts'][_0xd49a3a(0x564)](_0x4dabad => _0x4dabad['type'] === _0xd49a3a(0x6d1) && _0x4dabad[_0xd49a3a(0x324)])[_0xd49a3a(0x719)](_0xa61480 => ({ ..._0xa61480, 'source': _0xd49a3a(0x47f) })); _0x507a56['push'](..._0x3eeda9); } if (_0xa0b6fe && _0x1d2a6a[_0xd49a3a(0x5c7)]) { if ('ZzyXf' === _0xd49a3a(0x85e)) { const _0x623ab7 = _0x1d2a6a[_0xd49a3a(0x5c7)][_0xd49a3a(0x564)](_0x665e46 => _0x665e46['type'] === _0xd49a3a(0x6d1) && _0x665e46[_0xd49a3a(0x324)])['map'](_0x400b4c => ({ ..._0x400b4c, 'id': 'msg_' + _0x400b4c['timestamp'], 'source': _0xd49a3a(0xa68) })); _0x507a56[_0xd49a3a(0x8b0)](..._0x623ab7); } else !_0x43750d[_0xd49a3a(0x9a0)] && (_0x30b125[_0xd49a3a(0x9a0)] = _0xd49a3a(0x1c1)); } const _0x31ec03 = Array[_0xd49a3a(0xc3b)](new Map(_0x507a56['map'](_0x193e54 => [_0x193e54[_0xd49a3a(0x324)], _0x193e54]))[_0xd49a3a(0x2d0)]()); _0x1d2a6a['musicPlaylist'] = _0x31ec03[_0xd49a3a(0xa24)]((_0x393570, _0x4c5bee) => _0x4c5bee[_0xd49a3a(0x83c)] - _0x393570[_0xd49a3a(0x83c)]); } function _0x7f68a3(_0x12d5c6) { const _0x39a699 = _0x8e5972; if (_0x39a699(0x665) === _0x39a699(0x1f8)) _0x4ff649[_0x39a699(0x724)] = '▶'; else { if (_0x12d5c6 < 0x0 || _0x12d5c6 >= _0x53d6a2[_0x39a699(0x2ab)]) return; _0x4fe53d = _0x12d5c6; const _0x119cf0 = _0x53d6a2[_0x12d5c6]; _0x5d8c3c[_0x39a699(0x802)] = _0x119cf0[_0x39a699(0x324)] || _0x119cf0[_0x39a699(0x42a)], _0x5d8c3c[_0x39a699(0x8d8)](), _0x41e199(), _0x5bff79(); } } function _0x41e199() { const _0x2aa63b = _0x8e5972, _0x2584eb = _0x1d2a6a[_0x2aa63b(0x345)][_0x1d2a6a[_0x2aa63b(0x4dd)]], _0x5910c3 = _0x1d2a6a['isPlaying']; _0x462b64(), _0x3b4926(); const _0x1460b1 = document[_0x2aa63b(0x599)](_0x2aa63b(0x196)); _0x1460b1[_0x2aa63b(0x83e)](_0x35ebf8 => { const _0x456271 = _0x2aa63b, _0x5031d1 = _0x35ebf8['dataset'][_0x456271(0x197)], _0x1d90b2 = _0x35ebf8[_0x456271(0x20e)](_0x456271(0x4a3)); if (!_0x1d90b2) return; _0x2584eb && _0x5031d1 === _0x2584eb['id'] && _0x5910c3 ? _0x1d90b2[_0x456271(0x724)] = '❚❚' : _0x1d90b2[_0x456271(0x724)] = '▶'; }); } function _0x5bff79() { const _0x19729a = _0x8e5972; try { localStorage[_0x19729a(0x2ca)](_0x19729a(0xbf3), JSON[_0x19729a(0x838)]({ 'playlist': _0x1d2a6a['musicPlaylist'], 'currentIndex': _0x1d2a6a['currentlyPlayingIndex'] })); } catch (_0x27e4d4) { console[_0x19729a(0x1be)](_0x19729a(0x313), _0x27e4d4); } } function _0xce903e() { const _0x296166 = _0x8e5972; try { if (_0x296166(0xa69) !== _0x296166(0xa69)) _0xd11a80[_0x296166(0xa47)][_0x296166(0x8f0)](_0x296166(0x7dd)); else { const _0x83f6c = localStorage[_0x296166(0x1c6)](_0x296166(0xbf3)); if (_0x83f6c) { const { playlist: _0x5b3a5c, currentIndex: _0x18dec9 } = JSON[_0x296166(0xac1)](_0x83f6c); Array[_0x296166(0x57e)](_0x5b3a5c) && _0x5b3a5c['length'] > 0x0 && _0x18dec9 > -0x1 && (_0x1d2a6a[_0x296166(0x345)] = _0x5b3a5c, _0x1d2a6a[_0x296166(0x4dd)] = _0x18dec9, _0x1d2a6a[_0x296166(0x22c)] = ![], _0x41e199()); } } } catch (_0x5da178) { console[_0x296166(0x1be)]('切，加载播放器状态的时候出错了。', _0x5da178); } } function _0x5291ab(_0x1b1d5e) { const _0x46eb94 = _0x8e5972; if (window[_0x46eb94(0x2b1)]) clearTimeout(window['diaryPressTimer']); const _0x462a76 = _0x1b1d5e[_0x46eb94(0xbdf)][_0x46eb94(0x508)](_0x46eb94(0x955)); if (!_0x462a76) return; const _0x54d867 = _0x462a76['dataset']['timestamp'], _0xccc4b0 = _0x462a76['classList'][_0x46eb94(0xc7d)]('user') ? _0x46eb94(0xadb) : 'ai'; if (!_0x54d867) return; const _0x4cf5cd = () => { window['diaryPressTimer'] = setTimeout(() => { const _0x3ae763 = _0x4bce; if (_0x1b1d5e['type'] === _0x3ae763(0xae6)) _0x1b1d5e[_0x3ae763(0x506)](); _0x4da672(parseInt(_0x54d867, 0xa), _0xccc4b0); }, 0x320); }, _0x1522f3 = () => { const _0x11b74b = _0x46eb94; if (_0x11b74b(0xb0a) !== _0x11b74b(0xb0a)) _0x2d9309 === 'world-book-checkboxes-container' ? _0x79cc83() : _0x4e429c(); else { if (window[_0x11b74b(0x2b1)]) clearTimeout(window[_0x11b74b(0x2b1)]); } }; document[_0x46eb94(0x672)]('mouseup', _0x1522f3, { 'once': !![] }), document[_0x46eb94(0x672)](_0x46eb94(0x6c4), _0x1522f3, { 'once': !![] }), document[_0x46eb94(0x672)](_0x46eb94(0xa3f), _0x1522f3, { 'once': !![] }), _0x4cf5cd(); } function _0x4da672(_0x1cb786, _0x34580d) { const _0x4cc071 = _0x8e5972, _0x593741 = _0x4cc071(0xb17) + _0x1cb786; let _0x169bd4 = document[_0x4cc071(0x94d)](_0x593741); if (_0x169bd4) return; const _0x20a60d = '\x0a\x20\x20\x20\x20<div\x20id=\x22' + _0x593741 + _0x4cc071(0xbd7) + (_0x34580d === 'ai' ? _0x4cc071(0x4e6) : '') + _0x4cc071(0x70e); document[_0x4cc071(0x3ef)][_0x4cc071(0x1c4)](_0x4cc071(0x440), _0x20a60d); const _0x2486b6 = document[_0x4cc071(0x94d)](_0x593741), _0x59058b = () => _0x2486b6[_0x4cc071(0x8f0)](); _0x2486b6[_0x4cc071(0x20e)]('.choice-modal-backdrop')[_0x4cc071(0x997)] = _0x59058b, _0x2486b6[_0x4cc071(0x20e)](_0x4cc071(0x649))[_0x4cc071(0x997)] = _0x59058b, _0x2486b6[_0x4cc071(0x20e)](_0x4cc071(0xc26))[_0x4cc071(0x997)] = () => { _0x198d7a(_0x1cb786), _0x59058b(); }, _0x34580d === 'ai' && (_0x2486b6[_0x4cc071(0x20e)](_0x4cc071(0x290))[_0x4cc071(0x997)] = () => { _0xbf65b1(_0x1cb786), _0x59058b(); }); } async function _0x198d7a(_0x4fdacf) { const _0x4b1928 = _0x8e5972; if (_0x4b1928(0x60b) !== 'DdCdb') { const _0x4cfe37 = _0x42bd5e(_0x22830c[_0x4b1928(0x97d)]['charId']); _0x4cfe37 && (_0x38f273 = _0x4b1928(0x8c7) + _0x4cfe37[_0x4b1928(0x7a4)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x4cfe37['name'] + _0x4b1928(0x18b) + _0xf4b156[_0x4b1928(0x97d)][_0x4b1928(0x8df)] + '</div></div></div>'); } else { const _0x3f15b3 = await _0x2f43da(_0x4b1928(0x66a)); if (!_0x3f15b3) return; const _0x267d39 = _0x1d2a6a[_0x4b1928(0x82b)][_0x4b1928(0x2ec)](_0x31b23a => _0x31b23a[_0x4b1928(0x835)] === _0x1d2a6a[_0x4b1928(0x254)]); if (!_0x267d39) return; const _0x2f440e = _0x267d39[_0x4b1928(0xb46)][_0x4b1928(0x53e)](_0x1e392f => _0x1e392f[_0x4b1928(0x83c)] === _0x4fdacf); _0x2f440e > -0x1 && (_0x267d39['entries']['splice'](_0x2f440e, 0x1), _0x4b4b09(), _0x57a2a4(), _0x5294eb('日记已删除。')); } } async function _0xbf65b1(_0x3e25c3) { const _0x3d56e4 = _0x8e5972; if (_0x3d56e4(0x63e) === _0x3d56e4(0x63e)) { const _0x331870 = _0x1d2a6a[_0x3d56e4(0x82b)][_0x3d56e4(0x2ec)](_0x5384d9 => _0x5384d9[_0x3d56e4(0x835)] === _0x1d2a6a[_0x3d56e4(0x254)]); if (!_0x331870) return; const _0x532725 = _0x331870[_0x3d56e4(0xb46)][_0x3d56e4(0x53e)](_0x59a935 => _0x59a935[_0x3d56e4(0x83c)] === _0x3e25c3); if (_0x532725 > -0x1) { if ('RhscT' === _0x3d56e4(0xa54)) { const _0x4ed7be = (_0x19841c - _0x44ba6c) / (0x3e8 * 0x3c); _0x4ed7be < 0x3c ? _0x1c682f += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x41b5df += _0x3d56e4(0x9c4) + _0xe55f78[_0x3d56e4(0x789)](_0x4ed7be / 0x3c) + _0x3d56e4(0xbde); } else _0x331870[_0x3d56e4(0xb46)][_0x3d56e4(0xa95)](_0x532725, 0x1), _0x4b4b09(), _0x57a2a4(), await _0x3dd117(); } } else _0x3d9e0b[_0x3d56e4(0x7f2)] ? _0x164c35['play']() : _0x270316['pause'](); } function _0x2d1e61() { const _0x3fe864 = _0x8e5972, _0x1bb532 = document['getElementById'](_0x3fe864(0x4e4)); _0x1bb532[_0x3fe864(0x806)] = ''; const _0x56689b = _0x1d2a6a[_0x3fe864(0x1bc)][_0x3fe864(0x564)](_0x413227 => _0x1d2a6a[_0x3fe864(0x816)][_0x3fe864(0x870)](_0x253d8c => _0x253d8c[_0x3fe864(0x832)] === _0x3fe864(0x5ac) && _0x253d8c[_0x3fe864(0x182)][_0x3fe864(0x7d3)](_0x413227['id']))); if (_0x56689b[_0x3fe864(0x2ab)] === 0x0) { _0x1bb532['innerHTML'] = _0x3fe864(0x3c6); return; } _0x56689b['forEach'](_0x3953a5 => { const _0x54ed5f = _0x3fe864, _0x58b6f4 = document['createElement']('li'); _0x58b6f4[_0x54ed5f(0x1ea)] = _0x54ed5f(0x4e3), _0x58b6f4[_0x54ed5f(0xaac)][_0x54ed5f(0xbec)] = _0x3953a5['id'], _0x58b6f4['innerHTML'] = _0x54ed5f(0x194) + (_0x3953a5[_0x54ed5f(0x7a4)] || _0x133533) + _0x54ed5f(0x72d) + _0x3953a5[_0x54ed5f(0x7e6)] + _0x54ed5f(0xa92), _0x58b6f4[_0x54ed5f(0x672)](_0x54ed5f(0xc5e), () => { _0x35bd21(_0x3953a5['id']); }), _0x58b6f4[_0x54ed5f(0x20e)](_0x54ed5f(0x657))[_0x54ed5f(0x672)]('click', () => { const _0x13bbd2 = _0x54ed5f; if (_0x13bbd2(0x972) !== _0x13bbd2(0x52a)) _0x35bd21(_0x3953a5['id']); else { if (_0x483cba) _0x3e38fb(_0x2d35fd); } }), _0x58b6f4[_0x54ed5f(0x20e)]('.diary-delete-btn')['addEventListener'](_0x54ed5f(0xc5e), _0x1dfd3e => { const _0x27f176 = _0x54ed5f; _0x1dfd3e[_0x27f176(0x596)](), _0x286605(_0x3953a5['id']); }), _0x1bb532[_0x54ed5f(0xc15)](_0x58b6f4); }); } function _0x35bd21(_0x307b19) { const _0x12b1f1 = _0x8e5972, _0x564e1d = _0x5964f7(_0x307b19); if (!_0x564e1d) return; _0x1d2a6a[_0x12b1f1(0x254)] = _0x307b19; const _0x4408c4 = _0x1d2a6a[_0x12b1f1(0x82b)][_0x12b1f1(0x2ec)](_0x44c33f => _0x44c33f[_0x12b1f1(0x835)] === _0x307b19), _0x36c3db = _0x4408c4 ? _0x4408c4['entries']['length'] : 0x0, _0x2af6f1 = 0x2; _0x1d2a6a[_0x12b1f1(0xae1)] = Math[_0x12b1f1(0x1aa)](0x0, Math['ceil'](_0x36c3db / _0x2af6f1) - 0x1), document[_0x12b1f1(0x94d)](_0x12b1f1(0x19f))[_0x12b1f1(0x724)] = _0x564e1d['name'] + _0x12b1f1(0xc3c), _0x57a2a4(), _0x40b080('diaryView', _0x12b1f1(0x45c)); } function _0x57a2a4() { const _0xce9be4 = _0x8e5972; if (_0xce9be4(0x6c0) === _0xce9be4(0x442)) _0x3ee442['error'](_0xce9be4(0xc71), _0x2cb572), _0x255adb[_0xce9be4(0x94d)](_0xce9be4(0x1ac))[_0xce9be4(0x806)] = _0xce9be4(0x20b); else { const _0x497af1 = document[_0xce9be4(0x94d)](_0xce9be4(0x60c)), _0x4de3bb = document[_0xce9be4(0x94d)](_0xce9be4(0x633)); _0x497af1[_0xce9be4(0x806)] = '', _0x4de3bb[_0xce9be4(0x806)] = ''; const _0x788c7f = _0x3a7fab() || { 'name': '我' }, _0x4fb0e1 = _0x1d2a6a[_0xce9be4(0x82b)][_0xce9be4(0x2ec)](_0x520779 => _0x520779[_0xce9be4(0x835)] === _0x1d2a6a[_0xce9be4(0x254)]); if (!_0x4fb0e1 || !_0x4fb0e1['entries'] || _0x4fb0e1[_0xce9be4(0xb46)][_0xce9be4(0x2ab)] === 0x0) { _0x497af1[_0xce9be4(0x806)] = _0xce9be4(0x725), _0x4de3bb['innerHTML'] = _0xce9be4(0xc40), document[_0xce9be4(0x94d)](_0xce9be4(0xa60))[_0xce9be4(0x672)](_0xce9be4(0xc5e), _0x2fac75), document[_0xce9be4(0x94d)](_0xce9be4(0x9fa))[_0xce9be4(0x672)](_0xce9be4(0xc5e), _0x3dd117); return; } const _0x428b47 = 0x2, _0x128fcf = [..._0x4fb0e1['entries']][_0xce9be4(0xa24)]((_0x5993e8, _0x4b190e) => _0x5993e8[_0xce9be4(0x83c)] - _0x4b190e[_0xce9be4(0x83c)]), _0x1d4ef3 = []; for (let _0x270a72 = 0x0; _0x270a72 < _0x128fcf[_0xce9be4(0x2ab)]; _0x270a72 += _0x428b47) { _0xce9be4(0x18f) === 'RzTfu' ? _0x1d4ef3[_0xce9be4(0x8b0)](_0x128fcf[_0xce9be4(0x59d)](_0x270a72, _0x270a72 + _0x428b47)) : _0x10fe4e['activeFriendCircleId'] = null; } const _0x148b60 = _0x1d4ef3[_0xce9be4(0x2ab)]; _0x1d4ef3[_0xce9be4(0x83e)]((_0x441532, _0x3431c3) => { const _0x2b6ae5 = _0xce9be4, _0x4a3a55 = document['createElement']('div'); _0x4a3a55[_0x2b6ae5(0x1ea)] = _0x2b6ae5(0x39a), _0x4a3a55['id'] = _0x2b6ae5(0xb4a) + _0x3431c3; if (_0x3431c3 === _0x1d2a6a[_0x2b6ae5(0xae1)]) { if ('Stdyk' === _0x2b6ae5(0x456)) { const _0x1f6ebf = { 'id': _0x2b6ae5(0x836) + _0x3e2451['now']() + '_' + _0x30cfa0['random'](), 'name': _0x230f9d[_0x2b6ae5(0x7e6)], 'content': _0x49266d[_0x2b6ae5(0x415)], 'categoryId': _0x31f540['categoryId'] || _0x2b6ae5(0x1c1) }; _0xb847ba['worldBooks'][_0x2b6ae5(0x8b0)](_0x1f6ebf), _0x571274[_0x2b6ae5(0x8b0)](_0x1f6ebf['id']); } else _0x4a3a55['classList'][_0x2b6ae5(0x5ee)](_0x2b6ae5(0x433)); } _0x441532[_0x2b6ae5(0x83e)](_0x427ca2 => { const _0x52109c = _0x2b6ae5, _0x3ee105 = _0x427ca2['author'] === _0x52109c(0xadb) ? _0x52109c(0xadb) : 'ai', _0xeb9204 = _0x427ca2['author'] === 'user' ? _0x788c7f[_0x52109c(0x7e6)] : _0x5964f7(_0x427ca2[_0x52109c(0x732)])[_0x52109c(0x7e6)], _0x347b5d = document[_0x52109c(0x2fa)](_0x52109c(0xaf1)); _0x347b5d['className'] = _0x52109c(0x814) + _0x3ee105, _0x347b5d[_0x52109c(0xaac)][_0x52109c(0x83c)] = _0x427ca2[_0x52109c(0x83c)], _0x347b5d[_0x52109c(0x7be)][_0x52109c(0x817)] = _0x52109c(0x546), _0x347b5d['style'][_0x52109c(0x863)] = '0', _0x347b5d[_0x52109c(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0xeb9204 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new Date(_0x427ca2[_0x52109c(0x83c)])[_0x52109c(0x28c)](_0x52109c(0x4cf)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>' + _0x427ca2[_0x52109c(0x415)][_0x52109c(0x9ed)](/\n/g, _0x52109c(0x695)) + _0x52109c(0x3d1), _0x4a3a55[_0x52109c(0xc15)](_0x347b5d); }), _0x497af1['appendChild'](_0x4a3a55); }), _0x4de3bb['innerHTML'] = _0xce9be4(0x212) + (_0x1d2a6a[_0xce9be4(0xae1)] + 0x1) + '\x20/\x20' + _0x148b60 + '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', document[_0xce9be4(0x94d)]('diary-prev-button')[_0xce9be4(0x1b5)] = _0x1d2a6a[_0xce9be4(0xae1)] === 0x0, document[_0xce9be4(0x94d)]('diary-next-button')[_0xce9be4(0x1b5)] = _0x1d2a6a['diaryCurrentPage'] === _0x148b60 - 0x1, document[_0xce9be4(0x94d)]('diary-prev-button')[_0xce9be4(0x672)](_0xce9be4(0xc5e), _0xcd1602), document[_0xce9be4(0x94d)](_0xce9be4(0x581))['addEventListener'](_0xce9be4(0xc5e), _0x152b00), document[_0xce9be4(0x94d)](_0xce9be4(0xa60))['addEventListener'](_0xce9be4(0xc5e), _0x2fac75), document['getElementById'](_0xce9be4(0x9fa))[_0xce9be4(0x672)](_0xce9be4(0xc5e), _0x3dd117); } } function _0x152b00() { const _0xc2c8d = _0x8e5972; if (_0x1d2a6a[_0xc2c8d(0x971)]) return; const _0x92cc8d = _0x1d2a6a[_0xc2c8d(0xae1)], _0x6380ca = Math[_0xc2c8d(0x6f8)](_0x1d2a6a['diaries'][_0xc2c8d(0x2ec)](_0x4b9a21 => _0x4b9a21[_0xc2c8d(0x835)] === _0x1d2a6a['activeDiaryCharacterId'])[_0xc2c8d(0xb46)][_0xc2c8d(0x2ab)] / 0x2); if (_0x92cc8d >= _0x6380ca - 0x1) return; _0x1d2a6a[_0xc2c8d(0x971)] = !![]; const _0x114ad3 = _0x92cc8d + 0x1, _0x2e8d09 = document[_0xc2c8d(0x94d)]('diary-page-' + _0x92cc8d), _0x4011e9 = document[_0xc2c8d(0x94d)]('diary-page-' + _0x114ad3); _0x2e8d09 && _0x4011e9 ? (_0x4011e9[_0xc2c8d(0xa47)][_0xc2c8d(0x5ee)](_0xc2c8d(0xbb2)), _0x2e8d09[_0xc2c8d(0xa47)][_0xc2c8d(0x5ee)](_0xc2c8d(0xb1a)), _0x4011e9['classList'][_0xc2c8d(0x5ee)](_0xc2c8d(0x433)), setTimeout(() => { const _0x31b4a0 = _0xc2c8d; _0x31b4a0(0x5d3) !== _0x31b4a0(0x5d3) ? _0x5cb9d3(_0x31b4a0(0x6c9), _0x31b4a0(0x993)) : (_0x2e8d09[_0x31b4a0(0xa47)]['remove'](_0x31b4a0(0x433), _0x31b4a0(0xb1a)), _0x4011e9['classList'][_0x31b4a0(0x8f0)](_0x31b4a0(0xbb2)), _0x1d2a6a[_0x31b4a0(0xae1)] = _0x114ad3, _0x57a2a4(), _0x1d2a6a['isAnimatingDiary'] = ![]); }, 0x2bc)) : _0x1d2a6a[_0xc2c8d(0x971)] = ![]; } function _0xcd1602() { const _0x35845e = _0x8e5972; if (_0x1d2a6a['isAnimatingDiary']) return; const _0x8c79ee = _0x1d2a6a['diaryCurrentPage']; if (_0x8c79ee <= 0x0) return; _0x1d2a6a[_0x35845e(0x971)] = !![]; const _0x42543 = _0x8c79ee - 0x1, _0x545f66 = document['getElementById'](_0x35845e(0xb4a) + _0x8c79ee), _0xbd91f8 = document[_0x35845e(0x94d)]('diary-page-' + _0x42543); _0x545f66 && _0xbd91f8 ? (_0xbd91f8['classList'][_0x35845e(0x5ee)](_0x35845e(0xab7)), _0x545f66[_0x35845e(0xa47)][_0x35845e(0x5ee)](_0x35845e(0x6c3)), _0xbd91f8[_0x35845e(0xa47)][_0x35845e(0x5ee)]('is-visible'), setTimeout(() => { const _0x4fd4ea = _0x35845e; _0x545f66[_0x4fd4ea(0xa47)][_0x4fd4ea(0x8f0)](_0x4fd4ea(0x433), _0x4fd4ea(0x6c3)), _0xbd91f8['classList'][_0x4fd4ea(0x8f0)](_0x4fd4ea(0xab7)), _0x1d2a6a[_0x4fd4ea(0xae1)] = _0x42543, _0x57a2a4(), _0x1d2a6a[_0x4fd4ea(0x971)] = ![]; }, 0x2bc)) : _0x1d2a6a[_0x35845e(0x971)] = ![]; } function _0x2fac75() { return new Promise(_0x150c39 => { const _0x95aaf2 = _0x4bce; if (_0x95aaf2(0xada) === _0x95aaf2(0xada)) { const _0x57194a = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x95aaf2(0x3ef)][_0x95aaf2(0x1c4)](_0x95aaf2(0x440), _0x57194a); const _0x473c0f = document[_0x95aaf2(0x94d)](_0x95aaf2(0x675)), _0x2d92c8 = document[_0x95aaf2(0x94d)](_0x95aaf2(0x94a)), _0x264d33 = document['getElementById'](_0x95aaf2(0x711)), _0x32270c = document[_0x95aaf2(0x94d)](_0x95aaf2(0x9db)), _0x26bb43 = _0x473c0f[_0x95aaf2(0x20e)](_0x95aaf2(0xa30)), _0x1ebeb3 = () => { const _0x419432 = _0x95aaf2; if ('vhhnu' !== _0x419432(0x4a9)) _0x473c0f[_0x419432(0x8f0)](), _0x150c39(); else { if (!_0x32acc7) return; _0x25ba18[_0x10df58] = _0x3c0be7, _0xa75c34[_0x3967c8][_0x419432(0x20e)](_0x419432(0xc57))['textContent'] = _0x313564[_0x419432(0x7e6)], _0x352e49[_0x40c7b6][_0x419432(0xa47)]['add']('filled'), _0x1efd4c(); } }; _0x264d33[_0x95aaf2(0x997)] = () => { const _0x4476e8 = _0x95aaf2; if (_0x4476e8(0x577) !== _0x4476e8(0x577)) { const _0x47f1fc = _0x357874[_0x4476e8(0x94d)]('daily-expenses-list'), _0x39ff3e = _0x20e963[_0x4476e8(0x94d)](_0x4476e8(0x9fc)), _0x1f2582 = new _0x1635bb(), _0x346674 = _0x24d8da['accountingData']['filter'](_0xb1269d => new _0x21ebd1(_0xb1269d['timestamp'])[_0x4476e8(0x430)]() === _0x1f2582[_0x4476e8(0x430)]()); if (_0x346674[_0x4476e8(0x2ab)] === 0x0) { _0x47f1fc[_0x4476e8(0x806)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', _0x39ff3e['innerHTML'] = ''; return; } _0x47f1fc[_0x4476e8(0x806)] = '', _0x346674[_0x4476e8(0xa24)]((_0x218c7c, _0x5689c1) => _0x5689c1[_0x4476e8(0x83c)] - _0x218c7c[_0x4476e8(0x83c)])[_0x4476e8(0x83e)](_0x5a42cd => { const _0x148646 = _0x4476e8, _0x281570 = _0x1142c9[_0x148646(0x2fa)](_0x148646(0xaf1)); _0x281570[_0x148646(0x1ea)] = _0x148646(0x849), _0x281570['innerHTML'] = _0x148646(0x6db) + _0x5a42cd[_0x148646(0x29f)] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x5a42cd[_0x148646(0x897)][_0x148646(0x3a8)](0x2) + _0x148646(0x6d8) + _0x5a42cd['id'] + _0x148646(0xb8e), _0x47f1fc[_0x148646(0xc15)](_0x281570); }), _0x39ff3e && (_0x39ff3e['innerHTML'] = _0x4476e8(0xc27), _0x4a842e[_0x4476e8(0x94d)]('organize-bill-button')[_0x4476e8(0x672)]('click', _0x44b21d)); } else _0x5813b7(_0x2d92c8[_0x4476e8(0x41a)]), _0x1ebeb3(); }, _0x32270c[_0x95aaf2(0x997)] = _0x1ebeb3, _0x26bb43[_0x95aaf2(0x997)] = _0x1ebeb3; } else { _0x1b1426(_0x95aaf2(0x244) + _0x601b79 + _0x95aaf2(0x38f)), _0x4db489(() => _0x205e46['reload'](), 0x5dc); return; } }); } function _0x5813b7(_0x57393f) { const _0x375a51 = _0x8e5972, _0xc6dd0c = _0x57393f[_0x375a51(0x667)](); if (!_0xc6dd0c || !_0x1d2a6a[_0x375a51(0x254)]) return; let _0x93aa26 = _0x1d2a6a['diaries']['find'](_0x2fe056 => _0x2fe056[_0x375a51(0x835)] === _0x1d2a6a[_0x375a51(0x254)]); !_0x93aa26 && (_0x93aa26 = { 'characterId': _0x1d2a6a[_0x375a51(0x254)], 'entries': [] }, _0x1d2a6a[_0x375a51(0x82b)]['push'](_0x93aa26)); _0x93aa26['entries']['push']({ 'timestamp': Date[_0x375a51(0x4b7)](), 'author': _0x375a51(0xadb), 'content': _0xc6dd0c }), _0x4b4b09(); const _0x44156b = _0x93aa26['entries'][_0x375a51(0x2ab)]; _0x1d2a6a['diaryCurrentPage'] = Math[_0x375a51(0x6f8)](_0x44156b / 0x2) - 0x1, _0x57a2a4(); } async function _0x3dd117() { const _0x1533e9 = _0x8e5972; if (_0x1533e9(0x2f9) === _0x1533e9(0xc0b)) { const _0x5a993f = _0x4de571['getElementById'](_0x1533e9(0x625))[_0x1533e9(0x41a)]; _0x5a993f && (_0x4e2f70[_0x1533e9(0xc02)] = _0x5a993f, _0x28cf2a(), _0xe74459(_0x1533e9(0x3a3)), _0x12da59(), _0x11a389[_0x1533e9(0x94d)]('set-active-user-button')[_0x1533e9(0x7be)]['display'] = _0x1533e9(0x546)); } else { const _0x5551df = _0x1d2a6a[_0x1533e9(0x82b)]['find'](_0x40d28f => _0x40d28f['characterId'] === _0x1d2a6a[_0x1533e9(0x254)]), _0x37619a = _0x1d2a6a[_0x1533e9(0x254)], _0x38f9ed = _0x5964f7(_0x37619a); if (!_0x38f9ed || _0x1d2a6a[_0x1533e9(0xa31)]) return; _0xea506e(!![], _0x1533e9(0xc01)), _0x1d2a6a[_0x1533e9(0xa31)] = !![]; let _0xfeb5c0 = []; try { if ('VDmCB' !== _0x1533e9(0x316)) { _0x412dc1('还没有我的回应可以重新生成哦。'); return; } else { const _0x610b59 = _0x3a7fab() || { 'name': '你' }, _0x5743f0 = _0x49ee64(_0x37619a), { omniText: _0x1cc98a } = _0x57f616(_0x37619a, _0x1d2a6a[_0x1533e9(0x5e4)]); let _0x1a2e6f = ''; if (_0x38f9ed[_0x1533e9(0xa93)] && _0x38f9ed['linkedWorldBookIds'][_0x1533e9(0x2ab)] > 0x0) { const _0x67ab36 = _0x38f9ed[_0x1533e9(0xa93)][_0x1533e9(0x719)](_0x5e2545 => _0x1d2a6a['worldBooks'][_0x1533e9(0x2ec)](_0x392620 => _0x392620['id'] === _0x5e2545))['filter'](Boolean)[_0x1533e9(0x719)](_0xee58c3 => _0x1533e9(0xc1e) + _0xee58c3[_0x1533e9(0x7e6)] + '\x0a' + _0xee58c3[_0x1533e9(0x415)])[_0x1533e9(0x973)](''); if (_0x67ab36) _0x1a2e6f = _0x1533e9(0x7fe) + _0x67ab36; } const _0x5e3c07 = _0x610b59[_0x1533e9(0x647)] ? _0x1533e9(0x7b0) + _0x610b59['name'] + _0x1533e9(0xb42) + _0x610b59[_0x1533e9(0x647)] : '', _0x24913f = _0x5d551b(); let _0xc61918 = '你还没有写日记。'; if (_0x5551df && _0x5551df[_0x1533e9(0xb46)]) { if (_0x1533e9(0xaaf) === _0x1533e9(0x70b)) _0x3fe772[_0x1533e9(0xba1)] = null, _0x2685f0[_0x1533e9(0x7be)][_0x1533e9(0x180)] = _0x1533e9(0x546); else { const _0x5eec0b = _0x5551df[_0x1533e9(0xb46)][_0x1533e9(0x564)](_0x91b764 => _0x91b764[_0x1533e9(0x732)] === _0x1533e9(0xadb))['pop'](); _0x5eec0b && ('dmqhJ' !== _0x1533e9(0x2eb) ? _0xc61918 = _0x5eec0b['content'] : _0x127d60(_0xf54520['id'])); } } const _0x5894ad = _0x1533e9(0x1d6) + _0x38f9ed[_0x1533e9(0x7e6)] + '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a' + _0x610b59['name'] + _0x1533e9(0x509) + _0x610b59['name'] + _0x1533e9(0x278) + _0xc61918 + _0x1533e9(0x909) + _0x38f9ed[_0x1533e9(0x647)] + '\x0a' + _0x5e3c07 + '\x0a' + _0x1a2e6f + _0x1533e9(0x96e) + new Date()[_0x1533e9(0x28c)](_0x1533e9(0x4cf), { 'dateStyle': _0x1533e9(0x541), 'timeStyle': _0x1533e9(0x25e) }) + _0x1533e9(0xa5c) + _0x1af056(new Date(_0x5551df?.[_0x1533e9(0xb46)]?.['at'](-0x1)?.[_0x1533e9(0x83c)] || Date['now']())) + _0x1533e9(0x449) + (_0x1cc98a || '最近没有互动记录。') + '\x0a---\x0a##\x20最近的朋友圈动态\x0a' + (_0x24913f || '最近没有动态记录。') + '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。'; _0xfeb5c0 = [{ 'role': _0x1533e9(0xc0f), 'content': _0x5894ad }, { 'role': 'user', 'content': _0x1533e9(0x880) }]; const _0x255afe = await _0x3e56bc(_0xfeb5c0); if (_0x255afe) { let _0x2d12b1 = _0x1d2a6a['diaries'][_0x1533e9(0x2ec)](_0xf3e7a0 => _0xf3e7a0[_0x1533e9(0x835)] === _0x37619a); if (!_0x2d12b1) { if (_0x1533e9(0x882) !== _0x1533e9(0x882)) { const _0x3784c0 = _0x3e2ea6[_0x1533e9(0xa47)][_0x1533e9(0xc7d)]('show'); _0x1206bd[_0x1533e9(0xa47)]['toggle']('visible', _0x3784c0), !_0x3784c0 && (_0x1034a9 && _0x45e273[_0x1533e9(0xc5e)]()); } else _0x2d12b1 = { 'characterId': _0x37619a, 'entries': [] }, _0x1d2a6a[_0x1533e9(0x82b)][_0x1533e9(0x8b0)](_0x2d12b1); } _0x2d12b1['entries']['push']({ 'timestamp': Date[_0x1533e9(0x4b7)](), 'author': _0x37619a, 'content': _0x255afe }), _0x4b4b09(); const _0x2839b2 = _0x2d12b1[_0x1533e9(0xb46)]['length']; _0x1d2a6a[_0x1533e9(0xae1)] = Math[_0x1533e9(0x6f8)](_0x2839b2 / 0x2) - 0x1, _0x57a2a4(); } } } catch (_0x3271bd) { _0x5294eb('生成日记失败:\x20' + _0x3271bd[_0x1533e9(0x6da)]); } finally { _0xea506e(![]), _0x1d2a6a[_0x1533e9(0xa31)] = ![]; } } } function _0x152b78() { const _0x4dc534 = _0x8e5972, _0x1f6a35 = document[_0x4dc534(0x94d)]('meeting-scene-view'), _0x4e9413 = document['getElementById'](_0x4dc534(0x90f)), _0x2098e5 = document['querySelector'](_0x4dc534(0x898)); _0x1d2a6a['meetingViewMode'] === _0x4dc534(0x970) ? (_0x1f6a35[_0x4dc534(0x7be)][_0x4dc534(0x180)] = _0x4dc534(0x546), _0x4e9413[_0x4dc534(0x7be)][_0x4dc534(0x180)] = _0x4dc534(0x26d)) : _0x4dc534(0x525) !== 'ukYjR' ? (_0x2b763e['textContent'] = _0x546c83[_0x4dc534(0x7e6)], _0x236def['textContent'] = _0x4dc534(0x99b), _0x283c8b(_0x394f2d, _0x4dc534(0x8fe))) : (_0x1f6a35[_0x4dc534(0x7be)][_0x4dc534(0x180)] = _0x4dc534(0x26d), _0x4e9413[_0x4dc534(0x7be)][_0x4dc534(0x180)] = _0x4dc534(0x546), setTimeout(() => { const _0x353f5c = _0x4dc534, _0x2f05a3 = _0x1f6a35[_0x353f5c(0x20e)](_0x353f5c(0x779)); if (_0x2f05a3) { if (_0x353f5c(0x3c7) !== _0x353f5c(0x3c7)) { if (_0xe1e48) { _0x1f4907[_0x353f5c(0xa47)][_0x353f5c(0x410)](_0x353f5c(0x70a)); const _0x3cf592 = _0x41b5f[_0x353f5c(0x20e)](_0x353f5c(0xc33)); _0x39173a[_0x353f5c(0xa47)][_0x353f5c(0x410)](_0x353f5c(0xbb6), !!_0x3cf592); } else _0xbcda2f(_0x12b763); } else _0x2f05a3[_0x353f5c(0x7fb)]({ 'behavior': _0x353f5c(0x2c5), 'block': 'end' }); } else _0x1f6a35[_0x353f5c(0xa4f)] = _0x1f6a35['scrollHeight']; }, 0x32)), _0x2098e5[_0x4dc534(0x7be)][_0x4dc534(0x180)] = _0x4dc534(0x26d); } function _0x2b301c() { const _0x2ee5e5 = _0x8e5972; if (_0x2ee5e5(0x736) !== 'dGJth') { const _0x322ddc = document[_0x2ee5e5(0x94d)](_0x2ee5e5(0xb3f)), _0x45606b = document[_0x2ee5e5(0x94d)](_0x2ee5e5(0x5a5)); if (_0x1d2a6a['activeMeetingScriptQueue'][_0x2ee5e5(0x2ab)] > 0x0) { const _0x89e99e = _0x1d2a6a[_0x2ee5e5(0x1eb)][_0x2ee5e5(0x60d)](); _0x322ddc[_0x2ee5e5(0x724)] = _0x89e99e['speaker'] === _0x2ee5e5(0x468) ? '旁白' : _0x89e99e[_0x2ee5e5(0x4e2)], _0x45606b['textContent'] = _0x89e99e[_0x2ee5e5(0xb61)], _0x89e99e[_0x2ee5e5(0x4e2)] !== 'narrator' && _0x11e897(_0x1d2a6a[_0x2ee5e5(0xc2c)], _0x89e99e[_0x2ee5e5(0xa0f)]); } else { const _0x17e5e2 = _0x1d2a6a['characterLastScripts'][_0x1d2a6a[_0x2ee5e5(0xc2c)]]; if (_0x17e5e2 && _0x17e5e2[_0x2ee5e5(0x2ab)] > 0x0) { _0x1d2a6a['activeMeetingScriptQueue'] = [..._0x17e5e2]; const _0x9199ba = _0x1d2a6a['activeMeetingScriptQueue']['shift'](); _0x322ddc[_0x2ee5e5(0x724)] = _0x9199ba['speaker'] === _0x2ee5e5(0x468) ? '旁白' : _0x9199ba[_0x2ee5e5(0x4e2)], _0x45606b[_0x2ee5e5(0x724)] = _0x9199ba['line'], _0x9199ba['speaker'] !== _0x2ee5e5(0x468) && (_0x2ee5e5(0xc0a) !== _0x2ee5e5(0xc0a) ? _0x38322a['push']('[' + _0x10258e(_0x37e0ca) + ']\x20' + _0x253ce8[_0x2ee5e5(0x415)]) : _0x11e897(_0x1d2a6a[_0x2ee5e5(0xc2c)], _0x9199ba[_0x2ee5e5(0xa0f)])); } else _0x322ddc['textContent'] = '旁白', _0x45606b[_0x2ee5e5(0x724)] = _0x2ee5e5(0x285); } } else { _0x257006(_0x2ee5e5(0xa62)); return; } } async function _0x11e897(_0x4ef708, _0x2c18c3) { const _0x940ead = _0x8e5972, _0xf89a4c = document[_0x940ead(0x94d)](_0x940ead(0xa52)), _0x6014f2 = document[_0x940ead(0x94d)]('galgame-sprite-container'), _0x4cf8c5 = _0x5964f7(_0x4ef708), _0x431f5e = _0x4cf8c5?.[_0x940ead(0x91c)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x1c3495 = 0x50 * _0x431f5e[_0x940ead(0x9ef)]; _0x6014f2[_0x940ead(0x7be)][_0x940ead(0x6fa)] = _0x1c3495 + '%', _0x6014f2['style'][_0x940ead(0x7f1)] = _0x1c3495 + '%', _0x6014f2[_0x940ead(0x7be)][_0x940ead(0x31a)] = _0x431f5e['x'] + '%', _0x6014f2[_0x940ead(0x7be)]['top'] = _0x431f5e['y'] + '%', _0x6014f2[_0x940ead(0x7be)][_0x940ead(0xb82)] = _0x940ead(0x4ac), _0x6014f2['style'][_0x940ead(0x81a)] = 'auto'; const _0x344510 = [_0x940ead(0x8fe), _0x940ead(0x47d), 'angry', _0x940ead(0xb96), _0x940ead(0x280)], _0x16e8a6 = _0x344510[_0x940ead(0x7d3)](_0x2c18c3) ? _0x2c18c3 : 'normal'; try { const _0x547555 = await _0xe5b0ea(_0x940ead(0x578) + _0x16e8a6 + '_' + _0x4ef708); if (_0x547555) { if (_0xf89a4c[_0x940ead(0x802)] && _0xf89a4c[_0x940ead(0x7be)][_0x940ead(0xb52)] !== '0') { if (_0x940ead(0x378) === _0x940ead(0xb83)) { const _0x474c04 = _0xec26d8['key'](_0x1e81bb); _0x474c04 && _0x474c04[_0x940ead(0x3c5)](_0x940ead(0x204)) && _0x3a72c0['push'](_0x474c04); } else _0xf89a4c[_0x940ead(0x7be)][_0x940ead(0xb52)] = 0x0, setTimeout(() => { const _0x78c38d = _0x940ead; if (_0x78c38d(0x7c2) === 'hyfVi') { const _0xf28b38 = { ..._0x5add22 }; return _0xf28b38['avatar'] && _0xf28b38[_0x78c38d(0x7a4)][_0x78c38d(0x3c5)]('data:image') && delete _0xf28b38[_0x78c38d(0x7a4)], _0xf28b38; } else _0xf89a4c[_0x78c38d(0x802)] = URL['createObjectURL'](_0x547555), _0xf89a4c[_0x78c38d(0x7be)][_0x78c38d(0xb52)] = 0x1; }, 0x96); } else { if (_0x940ead(0x34d) !== _0x940ead(0xadf)) _0xf89a4c[_0x940ead(0x802)] = URL[_0x940ead(0x413)](_0x547555), _0xf89a4c[_0x940ead(0x7be)][_0x940ead(0xb52)] = 0x1; else { const _0x5cbc04 = _0x559eef['getElementById'](_0x201f01); if (_0x5cbc04 && _0x500c0d) _0x5cbc04[_0x940ead(0x802)] = _0x1ae262['createObjectURL'](_0xdde428); } } } else { const _0x528d80 = await _0xe5b0ea(_0x940ead(0x2ce) + _0x4ef708); _0xf89a4c[_0x940ead(0x802)] = _0x528d80 ? URL[_0x940ead(0x413)](_0x528d80) : ''; } } catch (_0x1fb15b) { if ('KsQzA' === 'KsQzA') console['error'](_0x940ead(0x250), _0x1fb15b), _0xf89a4c['src'] = ''; else return _0x3380c2[_0x940ead(0x8b0)](_0x3bb6b2), _0x5f42f1; } } let _0x58f9df = ![], _0x4b5607 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x3d1f63 = document[_0x8e5972(0x94d)]('sprite-adjust-button'), _0x616a91 = document[_0x8e5972(0x94d)](_0x8e5972(0xa8f)), _0x5ed0ae = document['getElementById'](_0x8e5972(0x6f1)), _0x1d9da2 = document[_0x8e5972(0x94d)](_0x8e5972(0x4fe)), _0x288094 = document[_0x8e5972(0x94d)](_0x8e5972(0xb4e)), _0x25b26f = document[_0x8e5972(0x94d)](_0x8e5972(0x233)), _0x954268 = document['getElementById'](_0x8e5972(0xbb8)), _0x35fa0a = document[_0x8e5972(0x94d)](_0x8e5972(0xa78)); let _0xc73f8a = {}; function _0x1f6ed8() { const _0x29c901 = _0x8e5972; if (_0x29c901(0x6a9) !== 'lTVjm') { _0x3f21b && (_0x2d1b89(_0xb5accb), _0x14a714 = null); _0x43a81d[_0x29c901(0x94d)](_0x29c901(0x702))[_0x29c901(0x7be)]['display'] = _0x29c901(0x546); const _0xac0d6d = _0x483c25['getElementById']('snoop-dock'); if (_0xac0d6d) _0xac0d6d[_0x29c901(0x8f0)](); const _0xb6f441 = _0x40bc6f[_0x29c901(0x94d)](_0x29c901(0x704)); if (_0xb6f441) _0xb6f441['remove'](); _0x723a11('snoopList', _0x29c901(0x99c)); } else { const _0x298621 = _0x5964f7(_0x1d2a6a[_0x29c901(0xc2c)]); if (!_0x298621) return; _0x58f9df = !![], _0x288094[_0x29c901(0x7be)][_0x29c901(0x180)] = _0x29c901(0x26d); const _0x5583ce = _0x298621[_0x29c901(0x91c)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x29c901(0x94d)]('sprite-slider-x')[_0x29c901(0x41a)] = _0x5583ce['x'], document[_0x29c901(0x94d)](_0x29c901(0x655))[_0x29c901(0x41a)] = _0x5583ce['y'], document['getElementById'](_0x29c901(0x1e9))['value'] = _0x5583ce[_0x29c901(0x9ef)] * 0x64, _0xc73f8a = { ..._0x5583ce }, document[_0x29c901(0x94d)](_0x29c901(0x831))[_0x29c901(0x7be)]['display'] = _0x29c901(0x546), document[_0x29c901(0x94d)](_0x29c901(0xa2f))['style'][_0x29c901(0x180)] = 'none'; } } function _0xe4f359(_0x3598f4 = ![]) { const _0x39be47 = _0x8e5972; _0x58f9df = ![], _0x288094[_0x39be47(0x7be)]['display'] = _0x39be47(0x546), document['getElementById']('galgame-textbox-container')[_0x39be47(0x7be)][_0x39be47(0x180)] = _0x39be47(0x26d), document[_0x39be47(0x94d)](_0x39be47(0xa2f))['style'][_0x39be47(0x180)] = _0x39be47(0x26d); if (!_0x3598f4) { const _0x2e95bb = _0x5964f7(_0x1d2a6a[_0x39be47(0xc2c)]); _0x2e95bb && (_0x2e95bb['spriteTransform'] = _0xc73f8a, _0x11e897(_0x1d2a6a[_0x39be47(0xc2c)], _0x39be47(0x8fe))); } } function _0x31138a() { const _0x374561 = _0x8e5972, _0x2cead7 = _0x5964f7(_0x1d2a6a['activeMeetingCharId']); if (!_0x2cead7) return; const _0x18827a = parseFloat(document['getElementById'](_0x374561(0x7fc))['value']), _0x1efd56 = parseFloat(document[_0x374561(0x94d)](_0x374561(0x655))[_0x374561(0x41a)]), _0x32d266 = parseFloat(document[_0x374561(0x94d)](_0x374561(0x1e9))[_0x374561(0x41a)]) / 0x64; _0x2cead7[_0x374561(0x91c)] = { 'x': _0x18827a, 'y': _0x1efd56, 'scale': _0x32d266 }, _0x4b4b09(), _0x5294eb(_0x374561(0x296)), _0xe4f359(!![]); } function _0x3fd598() { const _0x4bc8c1 = _0x8e5972; _0x2f43da(_0x4bc8c1(0x38a))[_0x4bc8c1(0x1d2)](_0x4af9f5 => { const _0x916189 = _0x4bc8c1; if ('VuWPL' !== _0x916189(0xc3f)) { if (_0x4af9f5) { const _0x30feb5 = _0x5964f7(_0x1d2a6a[_0x916189(0xc2c)]); _0x30feb5 && (delete _0x30feb5[_0x916189(0x91c)], _0x4b4b09(), _0x11e897(_0x30feb5['id'], _0x916189(0x8fe)), _0x5294eb(_0x916189(0x7ba)), _0xe4f359(!![])); } } else { if (_0x12f1f6[_0x916189(0xbdf)]['classList'][_0x916189(0xc7d)](_0x916189(0xa49))) { const _0x303e13 = _0x59ec3d[_0x916189(0xbdf)]['dataset']['id']; _0x501581(_0x916189(0x1f7))[_0x916189(0x1d2)](_0xf348fc => { _0xf348fc && _0x349a71(_0x303e13); }); } } }); } function _0x3f0c76() { const _0x2d58b0 = _0x8e5972; if (!_0x58f9df) return; const _0x4a26a9 = _0x1d2a6a[_0x2d58b0(0xc2c)], _0x51e958 = _0x5964f7(_0x4a26a9); if (!_0x51e958) return; const _0x3562dc = parseFloat(document[_0x2d58b0(0x94d)](_0x2d58b0(0x7fc))[_0x2d58b0(0x41a)]), _0x476ec7 = parseFloat(document['getElementById'](_0x2d58b0(0x655))[_0x2d58b0(0x41a)]), _0x254603 = parseFloat(document[_0x2d58b0(0x94d)](_0x2d58b0(0x1e9))['value']) / 0x64; _0x51e958['spriteTransform'] = { 'x': _0x3562dc, 'y': _0x476ec7, 'scale': _0x254603 }; const _0x4c5ba9 = document[_0x2d58b0(0x94d)]('galgame-sprite-container'), _0x154b98 = 0x50 * _0x254603; _0x4c5ba9[_0x2d58b0(0x7be)][_0x2d58b0(0x6fa)] = _0x154b98 + '%', _0x4c5ba9[_0x2d58b0(0x7be)][_0x2d58b0(0x7f1)] = _0x154b98 + '%', _0x4c5ba9['style']['left'] = _0x3562dc + '%', _0x4c5ba9[_0x2d58b0(0x7be)]['top'] = _0x476ec7 + '%', _0x4c5ba9[_0x2d58b0(0x7be)][_0x2d58b0(0xb82)] = _0x2d58b0(0x4ac); } document[_0x8e5972(0x94d)]('sprite-slider-x')[_0x8e5972(0x672)](_0x8e5972(0xac7), _0x3f0c76), document[_0x8e5972(0x94d)](_0x8e5972(0x655))[_0x8e5972(0x672)](_0x8e5972(0xac7), _0x3f0c76), document[_0x8e5972(0x94d)](_0x8e5972(0x1e9))[_0x8e5972(0x672)](_0x8e5972(0xac7), _0x3f0c76), _0x3d1f63['addEventListener'](_0x8e5972(0xc5e), _0x1f6ed8), _0x616a91[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x31138a), _0x5ed0ae[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0xe4f359(![])), _0x1d9da2[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x3fd598); function _0x5d5440(_0x1ec9ae) { const _0x125ee9 = _0x8e5972; if (_0x125ee9(0xabb) !== _0x125ee9(0xabb)) _0x187087[_0x125ee9(0x2d5)][_0x125ee9(0xa95)](_0x12476d, 0x1), _0x417f41(), _0x359eb3(); else { const _0x2f44f1 = _0x5964f7(_0x1ec9ae); if (!_0x2f44f1) return; const _0x30926f = _0x1d2a6a[_0x125ee9(0x816)][_0x125ee9(0x2ec)](_0x2a8317 => _0x2a8317[_0x125ee9(0x832)] === _0x125ee9(0x5ac) && _0x2a8317[_0x125ee9(0x182)][_0x125ee9(0x7d3)](_0x1ec9ae)), _0xe50744 = _0x43b50c(_0x30926f['id']), _0x2ecc0d = _0x1d2a6a[_0x125ee9(0x5c7)][_0x125ee9(0x564)](_0x1049ab => _0x1049ab[_0x125ee9(0x490)])['pop'](), _0x535b2d = document[_0x125ee9(0x94d)](_0x125ee9(0xb3f)), _0x4bff34 = document[_0x125ee9(0x94d)](_0x125ee9(0x5a5)); let _0x2a76f6 = null; if (_0x2ecc0d) { if (_0x125ee9(0xc14) === _0x125ee9(0xc14)) { if (_0x2ecc0d[_0x125ee9(0x874)] === _0x125ee9(0xb29)) { const _0x41b70e = _0x1d2a6a['characterLastScripts'][_0x1ec9ae]; if (_0x41b70e && _0x41b70e[_0x125ee9(0x2ab)] > 0x0) { if (_0x125ee9(0x740) !== _0x125ee9(0x740)) { if (!_0x2143da[_0x125ee9(0x57e)](_0x4b6df1)) return _0x125ee9(0x462); if (_0x3e64f3['length'] === 0x0) return _0x125ee9(0x5c6); return _0x6bb1f5[_0x125ee9(0xa24)]((_0x79e663, _0x269ac1) => new _0x29a2aa(_0x269ac1[_0x125ee9(0x83c)]) - new _0x3a2c5a(_0x79e663['timestamp'])), _0x125ee9(0x245) + _0x512a44[_0x125ee9(0x719)](_0x909b07 => _0x125ee9(0x9de) + (_0x909b07[_0x125ee9(0xaea)] || _0x125ee9(0x763)) + _0x125ee9(0xb69) + (_0x909b07['activity_description'] || '') + _0x125ee9(0x2b3) + (_0x909b07[_0x125ee9(0x83c)] || '') + _0x125ee9(0xaf0))[_0x125ee9(0x973)]('') + _0x125ee9(0x2d6); } else _0x2a76f6 = _0x41b70e['at'](-0x1); } } else _0x2a76f6 = { 'speaker': _0xe50744['name'], 'line': _0x2ecc0d[_0x125ee9(0x415)], 'emotion': _0x125ee9(0x8fe) }; } else return [_0x35f7c0]; } if (_0x2a76f6) { if ('XNPyx' === 'jaZCF') { const _0x9652f3 = _0x2ef522[_0x125ee9(0x2ec)](_0x17096b => _0x17096b[_0x125ee9(0x7e6)] === _0x192bb2[_0x125ee9(0x7e6)]); if (_0x9652f3) _0x590dda[_0x125ee9(0x60e)](_0x4ad751, { 'content': _0x125ee9(0xb6b) + _0x9652f3['name'] + ']', 'displayUrl': _0x9652f3[_0x125ee9(0x42a)] }); else _0x5b53fa[_0x125ee9(0x415)] = _0x125ee9(0x837) + _0x195fcb['name'] + ']'; } else { _0x535b2d[_0x125ee9(0x724)] = _0x2a76f6['speaker'] === _0x125ee9(0x468) ? '旁白' : _0x2a76f6['speaker'], _0x4bff34[_0x125ee9(0x724)] = _0x2a76f6['line']; if (_0x2a76f6[_0x125ee9(0x4e2)] === _0x2f44f1[_0x125ee9(0x7e6)]) _0x11e897(_0x1ec9ae, _0x2a76f6[_0x125ee9(0xa0f)]); else { if (_0x125ee9(0x1a9) === 'XiJYn') _0x11e897(_0x1ec9ae, _0x125ee9(0x8fe)); else { const _0x3ecc8c = _0x3e0f43(_0x485411['getHours']())[_0x125ee9(0x7d4)](0x2, '0'), _0x4df0fc = _0x14ef80(_0xf69a31[_0x125ee9(0xbc5)]())['padStart'](0x2, '0'); _0x50525f['textContent'] = _0x3ecc8c + ':' + _0x4df0fc; const _0x298ce4 = _0x5c20fe[_0x125ee9(0x833)]() + 0x1, _0x5710f2 = _0x3ef220[_0x125ee9(0x3fc)](), _0x28d84a = [_0x125ee9(0x417), _0x125ee9(0xc79), _0x125ee9(0x235), _0x125ee9(0x5ec), _0x125ee9(0x820), _0x125ee9(0xc4c), _0x125ee9(0x389)][_0x310934['getDay']()]; _0x19ca0b[_0x125ee9(0x724)] = _0x298ce4 + '月' + _0x5710f2 + '日\x20' + _0x28d84a; } } } } else _0x125ee9(0xaa7) !== 'NbJNX' ? (_0x5ccd68[_0x125ee9(0x60e)](_0x97a16, { 'content': '[AI发送了表情：' + _0x17653d[_0x125ee9(0x7e6)] + ']', 'displayUrl': _0x15f2aa[_0x125ee9(0x42a)] }), _0x11fcaf[_0x125ee9(0x5c7)][_0x125ee9(0x8b0)](_0x268682), _0x2db520(), _0x13cb51(_0x43436b, _0xa844fd['conversationHistory']['length'] - 0x1), _0x355bdc[_0x125ee9(0xa4f)] = _0x5af300[_0x125ee9(0x227)]) : (_0x535b2d[_0x125ee9(0x724)] = _0x2f44f1['name'], _0x4bff34[_0x125ee9(0x724)] = _0x125ee9(0x99b), _0x11e897(_0x1ec9ae, _0x125ee9(0x8fe))); } } function _0xa05518() { const _0x1a66aa = _0x8e5972, _0x30fe7b = new Date(), _0x5137ff = document['getElementById'](_0x1a66aa(0x24a)), _0x1c8679 = document[_0x1a66aa(0x94d)](_0x1a66aa(0xc65)); if (_0x5137ff && _0x1c8679) { if (_0x1a66aa(0x9b6) !== 'SYyNT') { const _0x402c31 = String(_0x30fe7b['getHours']())[_0x1a66aa(0x7d4)](0x2, '0'), _0x41f9b3 = String(_0x30fe7b[_0x1a66aa(0xbc5)]())['padStart'](0x2, '0'); _0x5137ff['textContent'] = _0x402c31 + ':' + _0x41f9b3; const _0x4437de = _0x30fe7b['getMonth']() + 0x1, _0x398258 = _0x30fe7b[_0x1a66aa(0x3fc)](), _0x3f86ae = [_0x1a66aa(0x417), '星期一', _0x1a66aa(0x235), '星期三', _0x1a66aa(0x820), _0x1a66aa(0xc4c), _0x1a66aa(0x389)][_0x30fe7b[_0x1a66aa(0x9b0)]()]; _0x1c8679[_0x1a66aa(0x724)] = _0x4437de + '月' + _0x398258 + '日\x20' + _0x3f86ae; } else _0x1800b7['innerHTML'] = '<img\x20src=\x22' + _0x47bedb + _0x1a66aa(0x98f); } } const _0x3bf1ea = document[_0x8e5972(0x94d)]('listen-together-modal'), _0x115152 = document[_0x8e5972(0x94d)](_0x8e5972(0x968)), _0x21016b = document[_0x8e5972(0x94d)]('cancel-listen-together'), _0x143ddb = document[_0x8e5972(0x94d)]('listen-together-backdrop'), _0x1e3352 = document['getElementById'](_0x8e5972(0x309)), _0x5d8c3c = document[_0x8e5972(0x94d)](_0x8e5972(0x271)), _0x1482ed = document[_0x8e5972(0x94d)](_0x8e5972(0x757)), _0x4b6057 = document['getElementById'](_0x8e5972(0x62f)), _0x22eda8 = document[_0x8e5972(0x94d)](_0x8e5972(0x56e)); let _0x2e7091 = [], _0x16b4be = ![]; async function _0x1a506f() { const _0x35c539 = _0x8e5972; if (!_0x1d2a6a['activeChatId']) return; _0x1e3352['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', _0x3bf1ea[_0x35c539(0xa47)]['add'](_0x35c539(0x7dd)); const _0x3d5828 = await _0x8519d9(); if (_0x3d5828[_0x35c539(0x2ab)] === 0x0) { if (_0x35c539(0x930) === _0x35c539(0x930)) { _0x1e3352[_0x35c539(0x806)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>'; return; } else _0x84aa83['error'](_0x35c539(0x5b5), _0x5ebbb1); } _0x1e3352['innerHTML'] = '', _0x3d5828[_0x35c539(0x83e)](_0x7fdecd => { const _0x3961a8 = _0x35c539; if (_0x3961a8(0x8c1) === _0x3961a8(0x8c1)) { const _0xe3755b = document[_0x3961a8(0x2fa)](_0x3961a8(0xaf1)); _0xe3755b['className'] = _0x3961a8(0xc37); const _0x2c5909 = _0x7fdecd[_0x3961a8(0x9a7)] ? URL['createObjectURL'](_0x7fdecd[_0x3961a8(0x9a7)]) : _0x133533; _0xe3755b[_0x3961a8(0x806)] = _0x3961a8(0xbc7) + _0x2c5909 + _0x3961a8(0xaf2) + (_0x7fdecd['info']['歌曲名称'] || _0x3961a8(0x8c2)) + _0x3961a8(0x3d9) + (_0x7fdecd[_0x3961a8(0x5a0)]['歌手'] || _0x3961a8(0x52b)) + _0x3961a8(0x9f2), _0xe3755b['addEventListener']('click', () => { const _0x54c97d = _0x3961a8; _0x54c97d(0x70d) !== _0x54c97d(0xbe0) ? _0x5de0a0(_0x7fdecd) : _0x3638ba[_0x54c97d(0x724)] = '▶'; }), _0x1e3352['appendChild'](_0xe3755b); } else try { _0x2ccd21[_0x3961a8(0x2ca)](_0x3961a8(0xbf3), _0x23f518[_0x3961a8(0x838)]({ 'playlist': _0x4f4256[_0x3961a8(0x345)], 'currentIndex': _0x27121f[_0x3961a8(0x4dd)] })); } catch (_0x4f42ad) { _0x2eba88['error'](_0x3961a8(0x313), _0x4f42ad); } }); } function _0x22fea7() { const _0x114e86 = _0x8e5972; _0x3bf1ea[_0x114e86(0xa47)]['remove']('show'); } async function _0x5de0a0(_0x421ec8) { const _0x93e93c = _0x8e5972; if (!_0x1d2a6a[_0x93e93c(0x5e4)] || !_0x421ec8) return; let _0x13a8c8 = null; if (_0x421ec8[_0x93e93c(0x9a7)]) try { _0x13a8c8 = _0x93e93c(0x4b3) + Date['now']() + '_' + Math[_0x93e93c(0x4bc)](), await _0x1ebaf2(_0x13a8c8, _0x421ec8['cover']); } catch (_0x4283cf) { console[_0x93e93c(0x1be)](_0x93e93c(0x8dc), _0x4283cf); } const _0x3938a3 = { 'role': _0x93e93c(0xadb), 'type': _0x93e93c(0x3ac), 'content': _0x93e93c(0x6bd) + _0x421ec8['info']['歌曲名称'] + ']', 'songId': _0x421ec8['id'], 'songName': _0x421ec8[_0x93e93c(0x5a0)][_0x93e93c(0x2fe)], 'artist': _0x421ec8[_0x93e93c(0x5a0)]['歌手'], 'coverId': _0x13a8c8, 'timestamp': Date[_0x93e93c(0x4b7)]() }; _0x1d2a6a[_0x93e93c(0x5c7)]['push'](_0x3938a3), _0x596ec3(), _0x2784f3(), _0x22fea7(), setTimeout(_0x5f2ca7, 0x64); } _0x115152[_0x8e5972(0x672)]('click', _0x1a506f), _0x21016b[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x22fea7), _0x143ddb['addEventListener'](_0x8e5972(0xc5e), _0x22fea7); async function _0x64d550(_0x2660fc, _0x3dc7ef, _0x1f344e) { const _0x508595 = _0x8e5972; if (_0x508595(0x905) === _0x508595(0x905)) { if (_0x16b4be) return; _0x16b4be = !![]; try { if (_0x508595(0x868) === _0x508595(0x868)) { const _0x167a8f = _0x1d2a6a['chats'][_0x508595(0x2ec)](_0x40fe38 => _0x40fe38[_0x508595(0x7c0)] && _0x40fe38[_0x508595(0x7c0)][_0x508595(0xb65)]), _0x38a5b3 = _0x3f5192(); if (_0x167a8f && _0x167a8f['id'] !== _0x38a5b3['id']) { if (_0x508595(0x846) !== _0x508595(0x1a5)) _0x167a8f[_0x508595(0x7c0)] = null, _0x5294eb(_0x508595(0xaec)), _0x4b4b09(); else return (_0x34b779?.[_0x508595(0x1bc)] || [])['find'](_0x345a6b => _0x345a6b['id'] === _0x3c45a9); } else _0x167a8f && _0x167a8f['id'] === _0x38a5b3['id'] && _0x5294eb('正在为你切换新的歌曲...'); _0xea506e(!![], '正在连接同步频道...'); if (!_0x38a5b3) { if (_0x508595(0x8e7) !== _0x508595(0x760)) { _0xea506e(![]), _0x5294eb(_0x508595(0x4f1)); return; } else { const _0x5127c8 = _0x588d22['sender'] === _0x508595(0x322), _0x42b536 = _0x5127c8 ? _0x300128 ? _0x221f94[0x0] : '?' : _0x292bb6 ? _0x338899[0x0] : '?'; _0x20e4d1 += _0x508595(0xc0c) + (_0x5127c8 ? 'user' : 'ai') + _0x508595(0x40e) + (!_0x5127c8 ? _0x508595(0x6d4) + _0x42b536 + _0x508595(0x2d6) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0x5127c8 ? 'user' : 'ai') + _0x508595(0x209) + _0x172cf3[_0x508595(0x415)] + _0x508595(0x1fb) + (_0x5127c8 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x42b536 + _0x508595(0x2d6) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } } const _0x1f0a98 = await _0x15e62e(_0x2660fc); if (!_0x1f0a98) { _0xea506e(![]), _0x5294eb(_0x508595(0x61d)); return; } _0x38a5b3[_0x508595(0x7c0)] = { 'isActive': !![], 'songId': _0x2660fc, 'leaderId': 'user', 'songName': _0x1f0a98[_0x508595(0x5a0)][_0x508595(0x2fe)], 'artist': _0x1f0a98[_0x508595(0x5a0)]['歌手'], 'cover': _0x1f0a98['cover'] }, _0x4b4b09(), document[_0x508595(0x94d)](_0x508595(0x281))[_0x508595(0x802)] = _0x1f0a98[_0x508595(0x9a7)] ? URL[_0x508595(0x413)](_0x1f0a98[_0x508595(0x9a7)]) : _0x133533, document[_0x508595(0x94d)]('lt-ui-song-title')[_0x508595(0x724)] = _0x1f0a98[_0x508595(0x5a0)][_0x508595(0x2fe)], document[_0x508595(0x94d)](_0x508595(0x5d7))[_0x508595(0x724)] = _0x1f0a98[_0x508595(0x5a0)]['歌手'], _0x2bb001(_0x1f0a98), _0x1482ed[_0x508595(0x7be)]['display'] = _0x508595(0x67c), setTimeout(() => _0x1482ed[_0x508595(0xa47)][_0x508595(0x5ee)](_0x508595(0x7dd)), 0xa), _0x1f344e[_0x508595(0x806)] = _0x508595(0x5c4) + _0x1f344e[_0x508595(0x20e)](_0x508595(0x223))['outerHTML'], _0x1d2a6a['conversationHistory'][_0x3dc7ef] && (_0x1d2a6a[_0x508595(0x5c7)][_0x3dc7ef][_0x508595(0x965)] = !![], _0x596ec3()), _0xea506e(![]), _0x5b6d22(_0x2660fc, [_0x2660fc]), _0x462b64(_0x1f0a98, !![]); } else _0x4e5bb9['pause'](), _0x252248[_0x508595(0x724)] = '▶'; } finally { _0x16b4be = ![]; } } else { const _0x41066d = _0x36cf7b[_0x508595(0x94d)]('meeting-list-container'); _0x41066d['innerHTML'] = ''; const _0x20c7c6 = _0x23a47b[_0x508595(0x1bc)]['filter'](_0x2b4d75 => _0x133835['chats']['some'](_0x1b6267 => _0x1b6267[_0x508595(0x832)] === 'private' && _0x1b6267[_0x508595(0x182)][_0x508595(0x7d3)](_0x2b4d75['id']))); if (_0x20c7c6['length'] === 0x0) { _0x41066d[_0x508595(0x806)] = _0x508595(0x9e0); return; } _0x20c7c6[_0x508595(0x83e)](_0x2d0796 => { const _0x449ca6 = _0x508595, _0x1649f2 = _0x2a62a3[_0x449ca6(0x2fa)]('li'); _0x1649f2['className'] = _0x449ca6(0x4e3), _0x1649f2[_0x449ca6(0xaac)][_0x449ca6(0xbec)] = _0x2d0796['id'], _0x1649f2[_0x449ca6(0x806)] = _0x449ca6(0x194) + (_0x2d0796[_0x449ca6(0x7a4)] || _0x3502ed) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x2d0796[_0x449ca6(0x7e6)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x2d0796['remark'] || '私聊') + _0x449ca6(0xbd4), _0x1649f2[_0x449ca6(0x672)](_0x449ca6(0xc5e), () => { _0x3ea43c(_0x2d0796['id']); }), _0x41066d['appendChild'](_0x1649f2); }); } } function _0xb766d2() { const _0x29b105 = _0x8e5972; if ('eOQYi' !== 'eOQYi') _0x58a5c1[_0x29b105(0x7dc)] = _0x597fd5, _0x51430a = !![]; else { const _0x26bcca = _0x1d2a6a['chats']['find'](_0x1549db => _0x1549db[_0x29b105(0x7c0)] && _0x1549db[_0x29b105(0x7c0)]['isActive']); _0x26bcca && ('ofJaC' === 'JPdca' ? _0x504655[_0x29b105(0xa47)][_0x29b105(0x5ee)](_0x29b105(0x954)) : (_0x26bcca['activeListenSession'] = null, _0x4b4b09(), _0x5294eb(_0x29b105(0x261)), _0x462b64(), _0x1482ed[_0x29b105(0xa47)][_0x29b105(0x8f0)](_0x29b105(0x7dd)), setTimeout(() => _0x1482ed[_0x29b105(0x7be)][_0x29b105(0x180)] = 'none', 0x12c))); } } function _0xf227c8(_0x41277a) { const _0xcfe4a5 = _0x8e5972; if (_0xcfe4a5(0xbba) !== _0xcfe4a5(0xbba)) _0xcacbca(_0xcfe4a5(0x3a7)); else { if (!_0x41277a) return []; const _0x1402a0 = _0x41277a[_0xcfe4a5(0xc21)]('\x0a'), _0x1ade82 = [], _0x1d9057 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x1ccfdc of _0x1402a0) { if (_0xcfe4a5(0x9ee) !== 'gYCZG') { const _0xd96a24 = _0x1ccfdc[_0xcfe4a5(0x5f9)](_0x1d9057); if (_0xd96a24) { const _0x28d989 = parseInt(_0xd96a24[0x1], 0xa), _0x2a7496 = parseInt(_0xd96a24[0x2], 0xa), _0x329ff3 = parseInt(_0xd96a24[0x3], 0xa) * (_0xd96a24[0x3][_0xcfe4a5(0x2ab)] === 0x2 ? 0xa : 0x1), _0xb19d4c = _0x28d989 * 0x3c + _0x2a7496 + _0x329ff3 / 0x3e8, _0x322d85 = _0x1ccfdc[_0xcfe4a5(0x9ed)](_0x1d9057, '')[_0xcfe4a5(0x667)](); _0x322d85 && _0x1ade82[_0xcfe4a5(0x8b0)]({ 'time': _0xb19d4c, 'text': _0x322d85 }); } } else _0x3f8276(); } return _0x1ade82; } } function _0x2bb001(_0x23c492) { const _0x428f5b = _0x8e5972; _0x2e7091 = _0xf227c8(_0x23c492[_0x428f5b(0x654)]), _0x22eda8['innerHTML'] = ''; if (_0x2e7091[_0x428f5b(0x2ab)] === 0x0) { _0x22eda8[_0x428f5b(0x806)] = _0x428f5b(0xa32); return; } _0x2e7091['forEach']((_0x6fe2d3, _0x467f28) => { const _0x4ce7e5 = _0x428f5b; if (_0x4ce7e5(0x34c) !== 'vgJhb') _0x7b5cdc['addEventListener']('click', () => { const _0x494eaa = _0x4ce7e5, _0xc39db2 = _0x46686c(_0x1da272['dataset'][_0x494eaa(0x44a)], 0xa); _0x27424b(_0xc39db2); }); else { const _0x3c0214 = document['createElement']('p'); _0x3c0214[_0x4ce7e5(0x724)] = _0x6fe2d3['text'], _0x3c0214['id'] = 'lyric-line-' + _0x467f28, _0x22eda8['appendChild'](_0x3c0214); } }); } function _0x2132e2(_0x557677, _0x43551c, _0xaff366, _0x25fe6f) { const _0x48323c = _0x8e5972; if (_0x48323c(0xa83) === _0x48323c(0x394)) _0x3c660a[_0x48323c(0x668)](_0x48323c(0x4d9)), _0x14f4c1['createObjectStore']('music_library', { 'keyPath': 'id' }); else { const _0x43e930 = (_0x25fe6f - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x557677 + _0xaff366 * Math[_0x48323c(0x6d9)](_0x43e930), 'y': _0x43551c + _0xaff366 * Math['sin'](_0x43e930) }; } } function _0x26fbe4(_0x17a55e) { const _0x5be6fe = _0x8e5972; if (_0x5be6fe(0x31c) === _0x5be6fe(0x257)) _0x4d2d02['avatar'] = _0x2f73e5[_0x5be6fe(0xaac)][_0x5be6fe(0x534)], delete _0x5bf01b[_0x5be6fe(0xaac)]['newAvatar']; else { const _0x520f82 = 'http://www.w3.org/2000/svg', _0x48c22d = document[_0x5be6fe(0x82a)](_0x520f82, _0x5be6fe(0x994)), _0x1a6027 = 0xfa, _0x46a08d = _0x1a6027 / 0x2, _0x29c06c = _0x1a6027 / 0x2, _0x3e5e36 = _0x1a6027 / 0x2 - 0x14; _0x48c22d['setAttribute'](_0x5be6fe(0x7f1), _0x5be6fe(0xa41)), _0x48c22d['setAttribute'](_0x5be6fe(0x6fa), _0x5be6fe(0xa41)), _0x48c22d[_0x5be6fe(0xa81)]('viewBox', '0\x200\x20' + _0x1a6027 + '\x20' + _0x1a6027); const _0x5aa543 = Object[_0x5be6fe(0x2d0)](_0x17a55e)[_0x5be6fe(0xaf5)]((_0x55104c, _0x2bbabd) => _0x55104c + _0x2bbabd, 0x0); if (_0x5aa543 === 0x0) return _0x48c22d; let _0x3302e1 = -0x5a; const _0x42b981 = [_0x5be6fe(0x9ff), _0x5be6fe(0x904), _0x5be6fe(0x916), '#ff9999', _0x5be6fe(0x762), '#ffb366', '#a4c2f4', '#ff8c66']; let _0x3f8275 = 0x0; for (const _0x588eb1 in _0x17a55e) { const _0x2fdf0d = _0x17a55e[_0x588eb1]; if (_0x2fdf0d <= 0x0) continue; const _0xbdc83b = _0x2fdf0d / _0x5aa543 * 0x168, _0x183988 = _0x3302e1 + _0xbdc83b, _0x363263 = _0x2132e2(_0x46a08d, _0x29c06c, _0x3e5e36, _0x183988), _0x2ffc8b = _0x2132e2(_0x46a08d, _0x29c06c, _0x3e5e36, _0x3302e1), _0x148ce = _0xbdc83b > 0xb4 ? '1' : '0', _0x401216 = ['M', _0x363263['x'], _0x363263['y'], 'A', _0x3e5e36, _0x3e5e36, 0x0, _0x148ce, 0x1, _0x2ffc8b['x'], _0x2ffc8b['y'], 'L', _0x46a08d, _0x29c06c, 'Z'][_0x5be6fe(0x973)]('\x20'), _0x3b56a8 = document[_0x5be6fe(0x82a)](_0x520f82, _0x5be6fe(0x381)); _0x3b56a8[_0x5be6fe(0xa81)]('d', _0x401216), _0x3b56a8['setAttribute'](_0x5be6fe(0xc68), _0x42b981[_0x3f8275 % _0x42b981[_0x5be6fe(0x2ab)]]), _0x3f8275++; const _0x16e9d0 = document[_0x5be6fe(0x82a)](_0x520f82, _0x5be6fe(0x443)); _0x16e9d0[_0x5be6fe(0x724)] = _0x588eb1 + ':\x20' + _0x2fdf0d[_0x5be6fe(0x3a8)](0x2) + '\x20(' + (_0x2fdf0d / _0x5aa543 * 0x64)['toFixed'](0x1) + '%)', _0x3b56a8[_0x5be6fe(0xc15)](_0x16e9d0), _0x48c22d[_0x5be6fe(0xc15)](_0x3b56a8), _0x3302e1 = _0x183988; } return _0x48c22d; } } function _0x5efd2d() { const _0x576db5 = _0x8e5972; if (_0x2e7091[_0x576db5(0x2ab)] === 0x0) return; const _0x521679 = _0x5d8c3c[_0x576db5(0x6dd)]; let _0x2f70c4 = -0x1; for (let _0x56198c = 0x0; _0x56198c < _0x2e7091[_0x576db5(0x2ab)]; _0x56198c++) { if (_0x521679 >= _0x2e7091[_0x56198c][_0x576db5(0xc4d)]) _0x2f70c4 = _0x56198c; else { if ('HsOrx' !== _0x576db5(0x539)) break; else _0x2adbc2(_0x576db5(0x26a) + _0x339c15[_0x576db5(0x6da)]); } } if (_0x2f70c4 !== -0x1) { if (_0x576db5(0x225) !== 'IYSfq') { const _0x2cf950 = _0x22eda8[_0x576db5(0x599)]('p'); _0x2cf950[_0x576db5(0x83e)](_0x3a0485 => _0x3a0485['classList'][_0x576db5(0x8f0)](_0x576db5(0xbb6))); const _0x9788c2 = document[_0x576db5(0x94d)](_0x576db5(0x8d4) + _0x2f70c4); _0x9788c2 && (_0x9788c2['classList'][_0x576db5(0x5ee)]('active'), _0x9788c2[_0x576db5(0x7fb)]({ 'behavior': _0x576db5(0x469), 'block': _0x576db5(0x2aa) })); } else _0x540c7f['push']({ 'name': _0x2d6493[0x0][_0x576db5(0x667)](), 'url': _0x2faac1[0x1][_0x576db5(0x667)]() }); } } _0x4b6057[_0x8e5972(0x672)]('click', () => { const _0x3e5c85 = _0x8e5972; if ('dMwKy' !== _0x3e5c85(0x247)) _0x1482ed[_0x3e5c85(0xa47)][_0x3e5c85(0x8f0)](_0x3e5c85(0x7dd)), setTimeout(() => _0x1482ed[_0x3e5c85(0x7be)]['display'] = _0x3e5c85(0x546), 0x12c); else return '今天\x20' + _0x41ff08; }), document[_0x8e5972(0x94d)]('music-widget-card')['addEventListener']('click', () => { const _0x29854d = _0x8e5972; if (_0x29854d(0x2a3) !== _0x29854d(0x201)) _0x1d2a6a[_0x29854d(0x7c9)] && _0x1d2a6a[_0x29854d(0x7c9)][_0x29854d(0xb65)] && (_0x1482ed['style']['display'] = _0x29854d(0x67c), setTimeout(() => _0x1482ed[_0x29854d(0xa47)][_0x29854d(0x5ee)]('show'), 0xa)); else { const _0x174cda = _0x1e34b8[_0x29854d(0x94d)](_0x29854d(0xc55)); _0x174cda['innerHTML'] = ''; const _0x2e703b = _0x52a66e[_0x29854d(0x5cb)][_0x29854d(0x564)](_0x335396 => _0x335396[_0x29854d(0x9a0)] === _0x2a193c || _0x5de655 === 'default' && !_0x335396[_0x29854d(0x9a0)]); if (_0x2e703b[_0x29854d(0x2ab)] === 0x0) { _0x174cda[_0x29854d(0x806)] = _0x29854d(0x844); return; } _0x2e703b[_0x29854d(0x83e)](_0x3ce239 => { const _0x49321d = _0x29854d, _0x2b4314 = _0x415d92[_0x49321d(0x2fa)](_0x49321d(0xaf1)); _0x2b4314[_0x49321d(0x1ea)] = _0x49321d(0xbd1), _0x2b4314[_0x49321d(0xaac)]['id'] = _0x3ce239['id'], _0x2b4314[_0x49321d(0x806)] = _0x49321d(0x6b4) + _0x3ce239['name'] + _0x49321d(0x5e1) + _0x3ce239['content'][_0x49321d(0x9dd)](0x0, 0x64) + _0x49321d(0x21c), _0x2b4314['addEventListener'](_0x49321d(0xc5e), () => _0x314c75(_0x3ce239['id'])), _0x174cda[_0x49321d(0xc15)](_0x2b4314); }); } }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0x339), _0x5efd2d); const _0x434c63 = document[_0x8e5972(0x94d)]('widget-play-pause-btn'), _0x55e980 = document[_0x8e5972(0x94d)](_0x8e5972(0xaeb)), _0x1bb830 = document['getElementById'](_0x8e5972(0x32b)); _0x434c63[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x4a5f90 = _0x8e5972; if (_0x4a5f90(0x8ba) !== _0x4a5f90(0x8ba)) { if (!_0x10788f[_0x4a5f90(0x57e)](_0x5ed3f8)) return _0x4a5f90(0x462); if (_0x2312b2[_0x4a5f90(0x2ab)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>'; return _0x535b45['sort']((_0x424a58, _0x19eaf6) => new _0x9cf68d(_0x19eaf6['timestamp']) - new _0x25c4bc(_0x424a58['timestamp'])), _0x157015[_0x4a5f90(0x719)](_0x1775ca => { const _0x36b7cf = _0x4a5f90, _0x203dc8 = (_0x1775ca[_0x36b7cf(0x4f6)] || [])['map'](_0x598a28 => _0x36b7cf(0x902) + _0x598a28 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0x36b7cf(0x973)](''); return '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x1775ca[_0x36b7cf(0x818)] || _0x36b7cf(0x834)) + _0x36b7cf(0x511) + (_0x1775ca[_0x36b7cf(0x83c)] || '') + _0x36b7cf(0x6be) + (_0x1775ca[_0x36b7cf(0x950)] || _0x36b7cf(0x875)) + _0x36b7cf(0xa43) + _0x203dc8 + _0x36b7cf(0x4f2) + (_0x1775ca['total_cost'] || 0x0)[_0x36b7cf(0x3a8)](0x2) + _0x36b7cf(0x2a7); })[_0x4a5f90(0x973)](''); } else _0x5d8c3c[_0x4a5f90(0x802)] && (_0x5d8c3c['paused'] ? _0x5d8c3c[_0x4a5f90(0x8d8)]() : _0x5d8c3c[_0x4a5f90(0x48b)]()); }), _0x55e980[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x162751 = _0x8e5972; if (_0x53d6a2[_0x162751(0x2ab)] === 0x0) return; _0x4fe53d = (_0x4fe53d + 0x1) % _0x53d6a2[_0x162751(0x2ab)], _0x5b6d22(_0x53d6a2[_0x4fe53d], _0x53d6a2); }), _0x1bb830[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x42e0e0 = _0x8e5972; if (_0x42e0e0(0xba4) === 'ZpMUz') _0x58a4fb[_0x42e0e0(0x7fb)]({ 'behavior': 'auto', 'block': 'end' }); else { if (_0x53d6a2[_0x42e0e0(0x2ab)] === 0x0) return; _0x4fe53d = (_0x4fe53d - 0x1 + _0x53d6a2[_0x42e0e0(0x2ab)]) % _0x53d6a2['length'], _0x5b6d22(_0x53d6a2[_0x4fe53d], _0x53d6a2); } }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0x8d8), () => { const _0x5bcd01 = _0x8e5972; _0x434c63[_0x5bcd01(0x724)] = '❚❚'; }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0x48b), () => { const _0x55c54f = _0x8e5972; _0x55c54f(0xaee) !== 'lABRb' ? (_0x133f03(_0x6b16da['id']), _0x2a6b97(_0x55c54f(0x7ef) + _0x1bfb52[_0x55c54f(0x7e6)] + _0x55c54f(0xb2a)), _0x3b2994(![])) : _0x434c63[_0x55c54f(0x724)] = '▶'; }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0xbcb), () => { const _0x5c7e65 = _0x8e5972; _0x5c7e65(0x589) !== _0x5c7e65(0x482) ? _0x55e980[_0x5c7e65(0xc5e)]() : (_0x227904[_0x5c7e65(0xa47)]['toggle'](_0x5c7e65(0x7dd)), _0x15ed6e[_0x5c7e65(0xa47)][_0x5c7e65(0xc7d)]('show') && (_0x1ddd2f[_0x5c7e65(0xa4f)] = _0x5119fc['scrollHeight'])); }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0x8d8), () => { const _0x3c8fcc = _0x8e5972, _0x4d02b3 = document[_0x3c8fcc(0x94d)](_0x3c8fcc(0x358)); if (_0x4d02b3) _0x4d02b3['textContent'] = '❚❚'; }), _0x5d8c3c[_0x8e5972(0x672)]('pause', () => { const _0x55e9fd = _0x8e5972, _0x469bbf = document[_0x55e9fd(0x94d)](_0x55e9fd(0x358)); if (_0x469bbf) _0x469bbf[_0x55e9fd(0x724)] = '▶'; }), _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0xbcb), () => { const _0x588029 = _0x8e5972, _0x117acb = document[_0x588029(0x94d)](_0x588029(0x9a8)); _0x117acb && _0x117acb[_0x588029(0xc5e)](); }); function _0x30f0c4(_0x211a52) { const _0xbcf776 = _0x8e5972; if (!_0x211a52 || typeof _0x211a52 !== _0xbcf776(0x3e9)) return null; const _0x35b2c7 = _0x211a52[_0xbcf776(0xbb9)]('['), _0x358335 = _0x211a52['lastIndexOf'](']'); if (_0x35b2c7 > -0x1 && _0x358335 > _0x35b2c7) return _0x211a52['substring'](_0x35b2c7, _0x358335 + 0x1); return null; } document[_0x8e5972(0x94d)]('app-accounting')[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0xc0d18a = _0x8e5972; if (_0xc0d18a(0x827) !== _0xc0d18a(0x827)) { _0x43b965(![]), _0x498fd6(_0xc0d18a(0x4f1)); return; } else _0x7cf931(), _0x40b080('accounting', _0xc0d18a(0x5a6)); }), document[_0x8e5972(0x94d)](_0x8e5972(0xa7e))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0x6f6))); const _0x1867d3 = document[_0x8e5972(0x94d)](_0x8e5972(0x989)), _0x391017 = document[_0x8e5972(0x94d)](_0x8e5972(0x38d)); _0x1867d3[_0x8e5972(0x672)](_0x8e5972(0xc5e), _0x7cf931), _0x391017[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x1c1650 = _0x8e5972; _0x1867d3['classList']['remove'](_0x1c1650(0xbb6)), _0x391017[_0x1c1650(0xa47)][_0x1c1650(0x5ee)](_0x1c1650(0xbb6)), _0x541d46(); }); function _0x7cf931() { const _0x5acc4b = _0x8e5972; _0x391017[_0x5acc4b(0xa47)][_0x5acc4b(0x8f0)]('active'), _0x1867d3[_0x5acc4b(0xa47)][_0x5acc4b(0x5ee)](_0x5acc4b(0xbb6)), _0x17d4b0(); } function _0x17d4b0() { const _0x516e65 = _0x8e5972, _0x5564a8 = document[_0x516e65(0x94d)](_0x516e65(0x8e2)); document[_0x516e65(0x94d)](_0x516e65(0x3f9))[_0x516e65(0x724)] = _0x516e65(0x871), document[_0x516e65(0x94d)](_0x516e65(0x249))[_0x516e65(0x806)] = '', _0x5564a8[_0x516e65(0x806)] = _0x516e65(0x3e3), _0x447c58(), document[_0x516e65(0x94d)](_0x516e65(0x72e))[_0x516e65(0x672)](_0x516e65(0xc5e), _0x5baea2), document[_0x516e65(0x94d)](_0x516e65(0xbfa))[_0x516e65(0x672)](_0x516e65(0xc5e), _0x161f8a => { const _0x474fdc = _0x516e65; if (_0x161f8a[_0x474fdc(0xbdf)][_0x474fdc(0xa47)][_0x474fdc(0xc7d)]('delete-expense-btn')) { const _0x28fe90 = _0x161f8a[_0x474fdc(0xbdf)][_0x474fdc(0xaac)]['id']; _0x2f43da(_0x474fdc(0x1f7))[_0x474fdc(0x1d2)](_0x5b1283 => { const _0x324a26 = _0x474fdc; if (_0x324a26(0xbf4) !== 'mPqme') _0x5b1283 && _0x563aca(_0x28fe90); else return { 'url': _0x352d37, 'cover': _0x2163cc[_0x324a26(0x9a7)], 'source': _0x69c5cb }; }); } }), document['getElementById']('expense-description')[_0x516e65(0x75e)](); } function _0x3e4b55(_0x3870ce, _0x43a7db) { const _0xeceb3b = _0x8e5972, _0x4cedf4 = document[_0xeceb3b(0x94d)](_0xeceb3b(0x8e2)), _0xc0f782 = document[_0xeceb3b(0x94d)](_0xeceb3b(0x249)); document['getElementById']('accounting-title')[_0xeceb3b(0x724)] = _0x43a7db + '\x20账单'; const _0x15968b = _0x3870ce[_0xeceb3b(0x41b)][_0xeceb3b(0xaf5)]((_0xf9dcb3, _0x2a758b) => _0xf9dcb3 + (_0x2a758b[_0xeceb3b(0x897)] || 0x0), 0x0); let _0x4fa33a = _0xeceb3b(0x4cb) + _0x15968b[_0xeceb3b(0x3a8)](0x2) + _0xeceb3b(0xaa5); _0x4cedf4[_0xeceb3b(0x806)] = _0x4fa33a; const _0x57b99d = document['getElementById'](_0xeceb3b(0x2ba)), _0x101557 = { '餐饮美食': _0xeceb3b(0x3cb), '交通出行': _0xeceb3b(0x568), '购物消费': _0xeceb3b(0x775), '生活服务': _0xeceb3b(0x2b5), '休闲娱乐': _0xeceb3b(0xb0d), '医疗健康': _0xeceb3b(0x6a5), '人情红包': _0xeceb3b(0x769), '其他杂项': _0xeceb3b(0x466), '默认': _0xeceb3b(0x1e3) }; _0x3870ce[_0xeceb3b(0x41b)]['forEach'](_0x33a0aa => { const _0x5dfcf8 = _0xeceb3b, _0x3dbfcc = document[_0x5dfcf8(0x2fa)](_0x5dfcf8(0xaf1)); _0x3dbfcc[_0x5dfcf8(0x1ea)] = _0x5dfcf8(0x849), _0x3dbfcc['style'][_0x5dfcf8(0x729)] = _0x5dfcf8(0x75c), _0x3dbfcc[_0x5dfcf8(0x7be)]['alignItems'] = _0x5dfcf8(0x5db), _0x3dbfcc[_0x5dfcf8(0x7be)][_0x5dfcf8(0x401)] = '15px', _0x3dbfcc[_0x5dfcf8(0x7be)][_0x5dfcf8(0xb74)] = '0'; const _0x3f2caf = _0x101557[_0x33a0aa[_0x5dfcf8(0x4b5)]] || _0x101557['默认'], _0x2cd3be = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>' + _0x3f2caf + '</svg>', _0x1edafe = _0x5dfcf8(0xbee) + _0x2cd3be + '</span><div><div\x20class=\x22description\x22>' + _0x33a0aa[_0x5dfcf8(0x29f)] + _0x5dfcf8(0x9d3) + (_0x33a0aa[_0x5dfcf8(0x4b5)] || _0x5dfcf8(0xa12)) + _0x5dfcf8(0x476) + (_0x33a0aa[_0x5dfcf8(0x897)] || 0x0)[_0x5dfcf8(0x3a8)](0x2) + _0x5dfcf8(0x9b8); let _0x38608f = ''; if (_0x33a0aa[_0x5dfcf8(0x97d)] && _0x33a0aa['review'][_0x5dfcf8(0xbec)]) { if (_0x5dfcf8(0x606) !== 'FUBGe') { const _0x257576 = _0x5964f7(_0x33a0aa['review']['charId']); if (_0x257576) { if ('wusjd' !== _0x5dfcf8(0x2d3)) { const _0x13d41a = _0x571134(_0x3a37dd[_0x5dfcf8(0x41a)]); if (_0x26ad86(_0x13d41a) || _0x13d41a <= 0x0) { _0x4cbb4b(_0x5dfcf8(0x391)); return; } const _0x25c206 = _0x1c9795(); let _0x344306 = null; _0x25c206[_0x5dfcf8(0x832)] === _0x5dfcf8(0x8aa) ? _0x344306 = _0x480f17[_0x5dfcf8(0x41a)] : _0x344306 = _0x25c206[_0x5dfcf8(0x182)][0x0]; const _0x920a00 = _0x1ade45(_0x25c206['id']), _0x37d5e3 = { 'role': 'user', 'type': 'transfer', 'content': _0x5dfcf8(0x199) + (_0x200aa1(_0x344306)?.[_0x5dfcf8(0x7e6)] || '未知') + _0x5dfcf8(0xa00) + _0x13d41a + ']', 'amount': _0x13d41a, 'recipientId': _0x344306, 'senderId': _0x920a00['id'], 'timestamp': _0x40a043[_0x5dfcf8(0x4b7)]() }; _0xb7ad82[_0x5dfcf8(0x5c7)][_0x5dfcf8(0x8b0)](_0x37d5e3), _0x4ac519(), _0x4b9f1f(), _0x63e2c6[_0x5dfcf8(0xa47)][_0x5dfcf8(0x8f0)](_0x5dfcf8(0x7dd)); } else _0x38608f = _0x5dfcf8(0x8c7) + _0x257576[_0x5dfcf8(0x7a4)] + _0x5dfcf8(0xaa0) + _0x257576['name'] + _0x5dfcf8(0x18b) + _0x33a0aa[_0x5dfcf8(0x97d)]['text'] + _0x5dfcf8(0x770); } } else { const _0x2ca830 = _0x28390d[0x1]['replace'](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x5dfcf8(0x667)](); if (_0x2ca830) _0x1bdb34['push'](_0x2ca830); } } _0x3dbfcc[_0x5dfcf8(0x806)] = _0x1edafe + _0x38608f, _0x57b99d[_0x5dfcf8(0xc15)](_0x3dbfcc); }), _0xc0f782[_0xeceb3b(0x806)] = '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', document[_0xeceb3b(0x94d)](_0xeceb3b(0xc1d))[_0xeceb3b(0x672)](_0xeceb3b(0xc5e), async () => { const _0x35974e = _0xeceb3b, _0x2fec4b = await _0x2f43da(_0x35974e(0xc2f)); if (_0x2fec4b) { const _0x2753a5 = _0x1d2a6a[_0x35974e(0x698)][_0x43a7db]; if (_0x2753a5 && _0x2753a5['originalExpenses']) { if (_0x35974e(0x617) !== _0x35974e(0x1ff)) _0x1d2a6a['accountingData'][_0x35974e(0x8b0)](..._0x2753a5[_0x35974e(0x346)]); else { _0x44dc90(_0x35974e(0xb3b) + _0x416eb4 + '\x20个旧头像。应用即将刷新。'), _0x4798be(() => _0x5d5aaa['reload'](), 0x5dc); return; } } delete _0x1d2a6a[_0x35974e(0x698)][_0x43a7db], _0x4b4b09(), _0x17d4b0(); } }); } function _0x541d46() { const _0x3d9c8b = _0x8e5972; if (_0x3d9c8b(0x1d5) === _0x3d9c8b(0x1d5)) { const _0x197e39 = document['getElementById'](_0x3d9c8b(0x8e2)); document[_0x3d9c8b(0x94d)](_0x3d9c8b(0x3f9))['textContent'] = '账本', document[_0x3d9c8b(0x94d)](_0x3d9c8b(0x249))[_0x3d9c8b(0x806)] = ''; const _0x2a5551 = Object['keys'](_0x1d2a6a[_0x3d9c8b(0x698)])[_0x3d9c8b(0xa24)]((_0x482e9e, _0x55e296) => new Date(_0x55e296) - new Date(_0x482e9e)); let _0x48531b = _0x3d9c8b(0x46a); _0x2a5551[_0x3d9c8b(0x2ab)] === 0x0 ? _0x48531b += _0x3d9c8b(0x2f2) : _0x2a5551[_0x3d9c8b(0x83e)](_0x4ecd65 => { const _0x4551b1 = _0x3d9c8b, _0x4dfb5e = _0x1d2a6a[_0x4551b1(0x698)][_0x4ecd65], _0x49da57 = _0x4dfb5e[_0x4551b1(0x41b)][_0x4551b1(0xaf5)]((_0x1116a0, _0x2e51f2) => _0x1116a0 + (_0x2e51f2[_0x4551b1(0x897)] || 0x0), 0x0); _0x48531b += _0x4551b1(0x67d) + _0x4ecd65 + '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>' + _0x4ecd65 + _0x4551b1(0x961) + _0x49da57[_0x4551b1(0x3a8)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; }), _0x197e39[_0x3d9c8b(0x806)] = _0x48531b, document[_0x3d9c8b(0x94d)](_0x3d9c8b(0x5d5))['addEventListener'](_0x3d9c8b(0xc5e), _0x6a9a74), document['getElementById'](_0x3d9c8b(0x69a))[_0x3d9c8b(0x672)](_0x3d9c8b(0xc5e), () => { const _0x3bbd6c = _0x3d9c8b; _0x3bbd6c(0x446) === _0x3bbd6c(0x526) ? _0x40b111 = _0x3bbd6c(0x5bb) : document[_0x3bbd6c(0x94d)](_0x3bbd6c(0x1cf))['click'](); }), _0x197e39['querySelectorAll']('.ledger-item')[_0x3d9c8b(0x83e)](_0x9629e2 => { const _0x14cc31 = _0x3d9c8b; 'OszIZ' === _0x14cc31(0x7de) ? _0x9629e2[_0x14cc31(0x672)](_0x14cc31(0xc5e), _0x2335aa => { const _0xf3acd5 = _0x14cc31, _0x415123 = _0x2335aa[_0xf3acd5(0x60a)][_0xf3acd5(0xaac)][_0xf3acd5(0x9ba)], _0x1da6b7 = _0x1d2a6a[_0xf3acd5(0x698)][_0x415123]; _0x1da6b7 && _0x3e4b55(_0x1da6b7, _0x415123); }) : _0x5871c1[_0x14cc31(0x1be)]('准备群聊API数据时，读取图片失败:', _0x394fe2); }); } else _0x32b2a2 = _0x3d9c8b(0xa1f), _0x49f52d = _0x3d9c8b(0x4bd); } function _0x5baea2() { const _0xcbedb6 = _0x8e5972; if ('lrKFK' === 'vkpAg') !_0x4bb18a[_0xcbedb6(0xa47)][_0xcbedb6(0xc7d)](_0xcbedb6(0xbb7)) && _0x5c1883['remove'](); else { const _0x57bac1 = document['getElementById'](_0xcbedb6(0xab0)), _0xfae5ee = document[_0xcbedb6(0x94d)](_0xcbedb6(0x47a)), _0x1e2837 = _0x57bac1['value'][_0xcbedb6(0x667)](), _0x9d0a75 = parseFloat(_0xfae5ee[_0xcbedb6(0x41a)]); if (!_0x1e2837 || isNaN(_0x9d0a75) || _0x9d0a75 <= 0x0) { _0x5294eb('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } _0x1d2a6a[_0xcbedb6(0x2d5)]['push']({ 'id': 'exp_' + Date[_0xcbedb6(0x4b7)](), 'description': _0x1e2837, 'amount': _0x9d0a75, 'timestamp': Date[_0xcbedb6(0x4b7)]() }), _0x4b4b09(), _0x447c58(), _0x57bac1[_0xcbedb6(0x41a)] = '', _0xfae5ee[_0xcbedb6(0x41a)] = '', _0x57bac1['focus'](); } } function _0x563aca(_0x5baae9) { const _0x54ff9b = _0x8e5972, _0xe76156 = _0x1d2a6a[_0x54ff9b(0x2d5)][_0x54ff9b(0x53e)](_0x3a2cda => _0x3a2cda['id'] === _0x5baae9); _0xe76156 > -0x1 && (_0x1d2a6a['accountingData'][_0x54ff9b(0xa95)](_0xe76156, 0x1), _0x4b4b09(), _0x447c58()); } function _0x447c58() { const _0x2c97f6 = _0x8e5972; if (_0x2c97f6(0xa58) !== _0x2c97f6(0xa58)) _0x520d8f(), _0x50227a(_0x2c97f6(0x4eb), _0x2c97f6(0x5a6)); else { const _0xcceba8 = document[_0x2c97f6(0x94d)](_0x2c97f6(0xbfa)), _0x286416 = document[_0x2c97f6(0x94d)](_0x2c97f6(0x9fc)), _0x5db67a = new Date(), _0x307762 = _0x1d2a6a[_0x2c97f6(0x2d5)][_0x2c97f6(0x564)](_0x1026d3 => new Date(_0x1026d3[_0x2c97f6(0x83c)])[_0x2c97f6(0x430)]() === _0x5db67a['toDateString']()); if (_0x307762[_0x2c97f6(0x2ab)] === 0x0) { _0xcceba8['innerHTML'] = _0x2c97f6(0xc13), _0x286416['innerHTML'] = ''; return; } _0xcceba8['innerHTML'] = '', _0x307762[_0x2c97f6(0xa24)]((_0x279139, _0x52ea39) => _0x52ea39[_0x2c97f6(0x83c)] - _0x279139[_0x2c97f6(0x83c)])[_0x2c97f6(0x83e)](_0x425c67 => { const _0x30fb12 = _0x2c97f6, _0x5b54e8 = document[_0x30fb12(0x2fa)](_0x30fb12(0xaf1)); _0x5b54e8[_0x30fb12(0x1ea)] = _0x30fb12(0x849), _0x5b54e8[_0x30fb12(0x806)] = _0x30fb12(0x6db) + _0x425c67[_0x30fb12(0x29f)] + _0x30fb12(0x4de) + _0x425c67[_0x30fb12(0x897)]['toFixed'](0x2) + _0x30fb12(0x6d8) + _0x425c67['id'] + _0x30fb12(0xb8e), _0xcceba8[_0x30fb12(0xc15)](_0x5b54e8); }), _0x286416 && (_0x286416[_0x2c97f6(0x806)] = _0x2c97f6(0xc27), document[_0x2c97f6(0x94d)](_0x2c97f6(0x975))[_0x2c97f6(0x672)](_0x2c97f6(0xc5e), _0x45fc22)); } } async function _0x45fc22() { const _0x388cca = _0x8e5972, _0x3e7005 = new Date(), _0x13ece6 = _0x3e7005[_0x388cca(0x688)]() + '-' + String(_0x3e7005[_0x388cca(0x833)]() + 0x1)[_0x388cca(0x7d4)](0x2, '0') + '-' + String(_0x3e7005['getDate']())['padStart'](0x2, '0'); if (_0x1d2a6a['accountingLedger'][_0x13ece6]) { if ('NdKDq' !== 'NdKDq') _0x2b6a18[_0x388cca(0x7e6)] = _0x97469b, _0x209cb3[_0x388cca(0x25d)] = _0x2ae17f, _0x2360a6[_0x388cca(0x861)] = _0x588d43; else { _0x5294eb(_0x388cca(0x99d)); return; } } const _0x483965 = _0x1d2a6a['accountingData'][_0x388cca(0x564)](_0x34d03e => new Date(_0x34d03e[_0x388cca(0x83c)])[_0x388cca(0x430)]() === _0x3e7005[_0x388cca(0x430)]()); if (_0x483965[_0x388cca(0x2ab)] === 0x0) { if (_0x388cca(0xacf) !== _0x388cca(0xacf)) _0xdaa689 = _0x6d81cf[_0x388cca(0x413)](_0x3b7f72); else { _0x5294eb('今天一笔账都没有，我整理什么？'); return; } } _0xea506e(!![], _0x388cca(0xb99)); try { if (_0x388cca(0x562) === _0x388cca(0x295)) { _0x51b5d3[_0x388cca(0x668)](_0x388cca(0x701)); return; } else { const _0x140a5e = [_0x388cca(0x8a7), _0x388cca(0xa88), _0x388cca(0xc1b), _0x388cca(0x8dd), _0x388cca(0x582), _0x388cca(0x87c), _0x388cca(0x7b7), _0x388cca(0x2fb)], _0x414ea0 = _0x483965[_0x388cca(0x719)](_0x4bd98 => '-\x20' + _0x4bd98[_0x388cca(0x29f)] + ':\x20' + _0x4bd98[_0x388cca(0x897)])[_0x388cca(0x973)]('\x0a'), _0x5307e2 = _0x1d2a6a[_0x388cca(0x1bc)][_0x388cca(0x719)](_0x2d1966 => { const _0x25398d = _0x388cca; if (_0x25398d(0x61b) === _0x25398d(0xb12)) return _0x3b083c(_0x42aabc)['then'](_0x25798a => _0x25798a[_0x25398d(0x3c3)]()); else { const _0x5a41dc = _0x1d2a6a[_0x25398d(0x816)][_0x25398d(0x2ec)](_0x16f356 => _0x16f356[_0x25398d(0x832)] === _0x25398d(0x5ac) && _0x16f356[_0x25398d(0x182)][_0x25398d(0x7d3)](_0x2d1966['id'])), _0x6ee6f0 = _0x1d2a6a[_0x25398d(0x575)][_0x25398d(0x2ec)](_0x50097e => _0x50097e['id'] === (_0x5a41dc?.[_0x25398d(0x25d)] || _0x1d2a6a[_0x25398d(0xc02)])) || { 'id': _0x25398d(0x1c1), 'name': '你' }; let _0x23c270 = ''; return _0x2d1966[_0x25398d(0xa93)] && _0x2d1966[_0x25398d(0xa93)][_0x25398d(0x2ab)] > 0x0 && (_0x23c270 = _0x2d1966[_0x25398d(0xa93)][_0x25398d(0x719)](_0x5ba7cb => _0x1d2a6a[_0x25398d(0x5cb)][_0x25398d(0x2ec)](_0x95074a => _0x95074a['id'] === _0x5ba7cb))[_0x25398d(0x564)](Boolean)['map'](_0x549e15 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x549e15['name'] + _0x25398d(0xa7c) + _0x549e15['content'])[_0x25398d(0x973)]('')), _0x25398d(0x587) + _0x2d1966['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x2d1966['name'] + '\x0a\x20\x20\x20\x20人设:\x20' + _0x2d1966[_0x25398d(0x647)] + _0x25398d(0x187) + _0x6ee6f0['name'] + '\x20(ID:\x20' + _0x6ee6f0['id'] + ')\x0a' + _0x23c270; } })['join']('\x0a'), _0x47f5ef = _0x1d2a6a['userProfiles']['map'](_0xa13561 => _0x388cca(0x1fd) + _0xa13561['id'] + _0x388cca(0x78e) + _0xa13561[_0x388cca(0x7e6)] + '\x0a\x20\x20\x20\x20人设:\x20' + (_0xa13561[_0x388cca(0x647)] || '无'))[_0x388cca(0x973)]('\x0a'), _0x129d2d = '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', _0x163a79 = _0x388cca(0x798) + _0x140a5e[_0x388cca(0x973)](',\x20') + _0x388cca(0x9c9) + _0x5307e2 + _0x388cca(0x57f) + _0x47f5ef + _0x388cca(0x73c) + _0x414ea0, _0x243ecb = [{ 'role': _0x388cca(0xc0f), 'content': _0x129d2d }, { 'role': _0x388cca(0xadb), 'content': _0x163a79 }], _0x201d80 = await _0x3e56bc(_0x243ecb, { 'json': !![] }), _0x5c344e = _0x30f0c4(_0x201d80); if (!_0x5c344e) { if ('viEGW' === _0x388cca(0x6b9)) _0x23432b['linkedWorldBookIds'] = _0x5adbd6[_0x388cca(0xa93)][_0x388cca(0x564)](_0x634006 => _0x634006 !== _0x4b00e4); else throw new Error(_0x388cca(0x8c5) + _0x201d80); } const _0x5d2a56 = JSON[_0x388cca(0xac1)](_0x5c344e); _0x1d2a6a['accountingLedger'][_0x13ece6] = { 'categorizedExpenses': _0x5d2a56, 'timestamp': Date[_0x388cca(0x4b7)](), 'originalExpenses': _0x483965 }, _0x1d2a6a[_0x388cca(0x2d5)] = _0x1d2a6a[_0x388cca(0x2d5)][_0x388cca(0x564)](_0x74f644 => new Date(_0x74f644[_0x388cca(0x83c)])[_0x388cca(0x430)]() !== _0x3e7005[_0x388cca(0x430)]()), _0x4b4b09(), _0x3e4b55(_0x1d2a6a[_0x388cca(0x698)][_0x13ece6], _0x13ece6); } } catch (_0x381f76) { if (_0x388cca(0x628) === _0x388cca(0x628)) _0x5294eb('AI整理失败了，哼:\x20' + _0x381f76['message']); else for (const _0x525bfe in _0x1c3250) { _0x24a989[_0x388cca(0x7be)][_0x525bfe] = _0x5cdd7b[_0x525bfe]; } } finally { 'ufuVh' === 'ufuVh' ? _0xea506e(![]) : (_0x26480b[_0x388cca(0x888)][_0x388cca(0xaf4)](_0x1afed7[_0x388cca(0x888)]['getMonth']() - 0x1), _0x349e64()); } } async function _0x28d2bd() { const _0x5b6239 = _0x8e5972; _0x20e169(); (!_0x1d2a6a['worldBookCategories'] || _0x1d2a6a[_0x5b6239(0x463)][_0x5b6239(0x2ab)] === 0x0) && ('MVVLj' === 'MVVLj' ? (_0x1d2a6a[_0x5b6239(0x463)] = [{ 'id': _0x5b6239(0x1c1), 'name': '默认分类' }], _0x1d2a6a['worldBooks'][_0x5b6239(0x83e)](_0x18b751 => { const _0x3eb9f0 = _0x5b6239; _0x3eb9f0(0x5ce) !== _0x3eb9f0(0x24c) ? !_0x18b751[_0x3eb9f0(0x9a0)] && (_0x18b751[_0x3eb9f0(0x9a0)] = _0x3eb9f0(0x1c1)) : _0x562ed0 = _0x40b24e[_0x3eb9f0(0x575)][_0x3eb9f0(0x2ec)](_0x3a2375 => _0x3a2375['id'] === _0x3a08f8[_0x3eb9f0(0xc02)]); })) : _0x16a52c = _0x5ea9b1(_0x580dac[_0x5b6239(0x182)][0x0])); const _0x5c563e = [..._0x151129]; try { if (_0x5b6239(0x624) !== _0x5b6239(0x624)) _0x3c7f4a[_0x5b6239(0x575)] = _0x1a3b2f[_0x5b6239(0x575)][_0x5b6239(0x564)](_0xc085a6 => _0xc085a6['id'] !== _0x5ca955), _0x146178[_0x5b6239(0xc02)] === _0x26db2c && (_0x26de52['activeUserProfileId'] = _0x42fb6c[_0x5b6239(0x575)][0x0]['id']), _0xcee032['chats'][_0x5b6239(0x83e)](_0x27821c => { const _0x36f659 = _0x5b6239; _0x27821c[_0x36f659(0x25d)] === _0x3b6903 && (_0x27821c[_0x36f659(0x25d)] = _0x4adcf5[_0x36f659(0xc02)]); }), _0x25ffe2(), _0x2e8860(_0x5b6239(0x796)), _0x14050b(), _0x3a6367(_0x5b6239(0x444), _0x5b6239(0x7cf)); else { const _0x89f9fe = localStorage[_0x5b6239(0x1c6)](_0x5b6239(0x45b)); if (_0x89f9fe) { const _0x2a7a38 = JSON[_0x5b6239(0xac1)](_0x89f9fe); Array[_0x5b6239(0x57e)](_0x2a7a38) ? _0x5e6fd1 = [..._0x5c563e, ..._0x2a7a38] : 'YyEpJ' === 'YyEpJ' ? _0x5e6fd1 = _0x5c563e : (_0x11e157[_0x5b6239(0x668)](_0x5b6239(0xc29)), _0x23a1ba[_0x5b6239(0x2ca)](_0x5b6239(0x2ad), _0x38cf96[_0x5b6239(0x838)](_0x6084f))); } else _0x5b6239(0x693) !== _0x5b6239(0x303) ? _0x5e6fd1 = _0x5c563e : _0x58dd0f[_0x5b6239(0xc15)](_0x1f0b18); } } catch (_0x2fda88) { console['error'](_0x5b6239(0xb1c), _0x2fda88), _0x5e6fd1 = _0x5c563e; } if (!localStorage[_0x5b6239(0x1c6)](_0x5b6239(0x910))) { _0x2f43da(_0x5b6239(0x503))['then'](async _0x466e79 => { const _0x626247 = _0x5b6239; if (_0x466e79) { if ('vWnTi' === _0x626247(0x1fe)) return ''; else _0xea506e(!![], '正在升级聊天数据结构...'), await _0x28c69c(), localStorage[_0x626247(0x2ca)](_0x626247(0x910), _0x626247(0x338)), _0xea506e(![]), _0x5294eb('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'), setTimeout(() => location[_0x626247(0x4ae)](), 0x5dc); } else _0x5294eb(_0x626247(0x352)); }); return; } if (!localStorage[_0x5b6239(0x1c6)](_0x5b6239(0x265))) { console[_0x5b6239(0x668)](_0x5b6239(0x644)), _0xea506e(!![], _0x5b6239(0xc43)); const _0x2306c6 = await _0x4369ba(); localStorage[_0x5b6239(0x2ca)]('noir_migration_fc_v1_complete', _0x5b6239(0x338)), _0xea506e(![]); if (_0x2306c6 > 0x0) { _0x5294eb(_0x5b6239(0x48a) + _0x2306c6 + _0x5b6239(0x6af)), setTimeout(() => location['reload'](), 0x5dc); return; } } if (!localStorage[_0x5b6239(0x1c6)](_0x5b6239(0x265))) { } if (!localStorage[_0x5b6239(0x1c6)](_0x5b6239(0xac3))) { console[_0x5b6239(0x668)](_0x5b6239(0x1b7)), _0xea506e(!![], '正在升级音乐卡片数据...'); const _0x3a780c = await _0x550d47(); localStorage[_0x5b6239(0x2ca)](_0x5b6239(0xac3), _0x5b6239(0x338)), _0xea506e(![]); if (_0x3a780c > 0x0) { _0x5294eb(_0x5b6239(0x244) + _0x3a780c + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0x5b6239(0x4ae)](), 0x5dc); return; } } if (!localStorage[_0x5b6239(0x1c6)](_0x5b6239(0xa50))) { const _0x4b90b2 = await _0x2f5b58(); localStorage['setItem']('noir_migration_avatar_v1_complete', 'true'); if (_0x4b90b2 > 0x0) { if ('sFkIP' === _0x5b6239(0x728)) { _0x5294eb(_0x5b6239(0xb3b) + _0x4b90b2 + _0x5b6239(0xc66)), setTimeout(() => location[_0x5b6239(0x4ae)](), 0x5dc); return; } else { const _0x4f5a34 = _0x8427ed['parse'](_0x12cddf), _0x7a2a97 = { ..._0x344f37 }, _0x347150 = { ..._0x7a2a97, ..._0x4f5a34 }; _0x347150[_0x5b6239(0x2de)] = { ..._0x7a2a97[_0x5b6239(0x2de)], ..._0x4f5a34['preferences'] || {} }, _0x347150[_0x5b6239(0xb07)] = { ..._0x7a2a97[_0x5b6239(0xb07)], ..._0x4f5a34[_0x5b6239(0xb07)] || {} }, _0x38d016[_0x5b6239(0x60e)](_0xf30154, _0x347150); } } } const _0x13dc1f = document[_0x5b6239(0x94d)](_0x5b6239(0x645)); _0x13dc1f ? _0x13dc1f[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => { const _0x3f780f = _0x5b6239; _0x222b7f(), _0x40b080(_0x3f780f(0xb22), 'home'); }) : console['error'](_0x5b6239(0xb25)); const _0x1c6326 = _0x275e21(); await _0x4e6665(), _0x425812(), ((() => { const _0x3bc3ab = _0x5b6239; if (_0x3bc3ab(0x46b) !== _0x3bc3ab(0x46b)) _0x3c0a8c(), _0x34146a(); else { let _0x233a78 = ![], _0x64539c = _0x1d2a6a[_0x3bc3ab(0x463)][_0x3bc3ab(0x2ec)](_0x4c36a1 => _0x4c36a1[_0x3bc3ab(0x7e6)] === _0x3bc3ab(0x953)); !_0x64539c && (_0x64539c = { 'id': 'wbc_html_default_builtin', 'name': _0x3bc3ab(0x953) }, _0x1d2a6a[_0x3bc3ab(0x463)][_0x3bc3ab(0x8b0)](_0x64539c), console[_0x3bc3ab(0x668)](_0x3bc3ab(0x638)), _0x233a78 = !![]); const _0x1dd924 = _0x3bc3ab(0x19a); let _0x340c64 = _0x1d2a6a[_0x3bc3ab(0x5cb)][_0x3bc3ab(0x870)](_0x51313b => _0x51313b['id'] === _0x1dd924); if (!_0x340c64) { console[_0x3bc3ab(0x668)](_0x3bc3ab(0x220)); const _0x4b8edc = _0x3bc3ab(0x3f5), _0xf0eb72 = { 'id': _0x1dd924, 'name': 'HTML模块生成规则', 'content': _0x4b8edc, 'categoryId': _0x64539c['id'] }; _0x1d2a6a['worldBooks']['push'](_0xf0eb72), _0x233a78 = !![]; } _0x233a78 && (_0x4b4b09(), console[_0x3bc3ab(0x668)](_0x3bc3ab(0x34b))); } })()), _0x297801(), _0x26858a(), _0x43139c(), _0x330e2d(), _0x46b5ac(), _0x57c03f(), _0x4e348f(), _0xce903e(), _0x16939f(), _0x50ab92(); const _0x322b7f = document[_0x5b6239(0x94d)]('app-pages-container'); _0x322b7f && requestAnimationFrame(() => { const _0x43a204 = _0x5b6239; _0x322b7f[_0x43a204(0x7be)][_0x43a204(0xb52)] = '1'; }); _0x462b64(), _0x1d0c5a(), setInterval(_0x1d0c5a, 0x7530), _0x2e1213(), _0x540cfc(), _0x1b6e77(); const _0x426734 = document[_0x5b6239(0x94d)](_0x5b6239(0x883)); document[_0x5b6239(0x94d)](_0x5b6239(0x1f0))[_0x5b6239(0x672)](_0x5b6239(0xc5e), function (_0x224f07) { const _0x6f9cba = _0x5b6239; if ('XrrtO' !== _0x6f9cba(0x949)) { if (!_0x5a64c7) return []; const _0x9e8e70 = _0x539a0f[_0x6f9cba(0xc21)]('\x0a'), _0x363ac8 = [], _0x42b7fa = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x2cacaa of _0x9e8e70) { const _0x78a0a3 = _0x2cacaa[_0x6f9cba(0x5f9)](_0x42b7fa); if (_0x78a0a3) { const _0xf4917c = _0x4c2c4b(_0x78a0a3[0x1], 0xa), _0x4cae1f = _0x5c0046(_0x78a0a3[0x2], 0xa), _0x2cb36e = _0x2fe00b(_0x78a0a3[0x3], 0xa) * (_0x78a0a3[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x23be15 = _0xf4917c * 0x3c + _0x4cae1f + _0x2cb36e / 0x3e8, _0x56938b = _0x2cacaa[_0x6f9cba(0x9ed)](_0x42b7fa, '')[_0x6f9cba(0x667)](); _0x56938b && _0x363ac8[_0x6f9cba(0x8b0)]({ 'time': _0x23be15, 'text': _0x56938b }); } } return _0x363ac8; } else { if (_0x224f07[_0x6f9cba(0xbdf)][_0x6f9cba(0x508)](_0x6f9cba(0x21a))) return; const _0x3df2e5 = document[_0x6f9cba(0x94d)](_0x6f9cba(0x7f8)); _0x3df2e5 && _0x3df2e5[_0x6f9cba(0xc5e)](); } }), _0x40b080(_0x5b6239(0x5a6), _0x5b6239(0x23b)); (_0x1c6326 || _0x1d2a6a['characters'][_0x5b6239(0x2ab)] === 0x0) && (_0x5b6239(0x1c2) !== 'iSXll' ? (_0x5294eb(_0x5b6239(0x823)), setTimeout(() => { const _0xe67f3a = _0x5b6239; if (_0xe67f3a(0xa7d) === _0xe67f3a(0xc5b)) { const _0x1cb8ac = { 'id': _0xe67f3a(0x9d8) + _0x2e9450[_0xe67f3a(0x4b7)](), ..._0x439e9b }; _0x2bc13c[_0xe67f3a(0x575)][_0xe67f3a(0x8b0)](_0x1cb8ac), !_0x3283c0['activeUserProfileId'] && (_0xfa852c['activeUserProfileId'] = _0x1cb8ac['id']); } else _0x40b080(_0xe67f3a(0xa68), 'home'), setTimeout(() => _0x344c0e(), 0x64); }, 0x6a4)) : _0x512899[_0x1c1142] = []); document[_0x5b6239(0x94d)](_0x5b6239(0xb31))[_0x5b6239(0x672)]('click', _0x176a62); const _0x152932 = document[_0x5b6239(0x94d)](_0x5b6239(0x9f5)); document[_0x5b6239(0x94d)](_0x5b6239(0x962))[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => _0x152932[_0x5b6239(0xc5e)]()), document[_0x5b6239(0x94d)](_0x5b6239(0x600))['addEventListener'](_0x5b6239(0xc5e), () => { const _0x1f6b22 = _0x5b6239; if (_0x1f6b22(0x607) === _0x1f6b22(0x607)) _0x1d2a6a[_0x1f6b22(0x2de)]['widgetBgImage'] = null, _0x4b4b09(), _0x2e1213(), _0x5294eb(_0x1f6b22(0x66b)); else { const _0x56b920 = _0x50613b[_0x1f6b22(0x838)](_0x502b20[_0x1f6b22(0x668)] || [])['replace'](/'/g, _0x1f6b22(0x3d4))[_0x1f6b22(0x9ed)](/"/g, _0x1f6b22(0xb78)), _0x3e506a = _0x1fb9eb[_0x1f6b22(0x1a0)] || '未知联系人'; return _0x1f6b22(0x31d) + (_0x2e5443 < _0x2f97d5[_0x1f6b22(0x2ab)] - 0x1 ? _0x1f6b22(0x90e) : '') + _0x1f6b22(0x951) + _0x56b920 + _0x1f6b22(0x859) + _0x3e506a + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x18fe9d + _0x1f6b22(0xc5c) + _0x3e506a[_0x1f6b22(0xc32)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x3e506a + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x568e37[_0x1f6b22(0xb94)] || '') + _0x1f6b22(0x9bc); } }), _0x152932['addEventListener'](_0x5b6239(0x5d0), async _0xf11604 => { const _0x33e50e = _0x5b6239, _0x3907b7 = _0xf11604['target'][_0x33e50e(0x63c)][0x0]; if (!_0x3907b7) return; try { const _0x3bd57b = await _0x30dd9b(_0x3907b7); _0x1d2a6a[_0x33e50e(0x2de)][_0x33e50e(0x1a3)] = _0x3bd57b, _0x4b4b09(), _0x2e1213(), _0x5294eb('小组件背景已更换！'); } catch (_0x428704) { _0x5294eb(_0x33e50e(0x26a) + _0x428704[_0x33e50e(0x6da)]); } }), _0x3b2dae(), document[_0x5b6239(0x94d)](_0x5b6239(0x8bd))[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => document[_0x5b6239(0x94d)](_0x5b6239(0x2a2))[_0x5b6239(0xc5e)]()), document[_0x5b6239(0x94d)](_0x5b6239(0x9c0))[_0x5b6239(0x672)](_0x5b6239(0xc5e), async () => { const _0x4356d4 = _0x5b6239; _0x4356d4(0x529) === _0x4356d4(0x529) ? (await _0x3ecfc9(_0x4356d4(0x6a6)), localStorage[_0x4356d4(0x34a)](_0x4356d4(0x307)), _0x3b2dae(), _0x5294eb(_0x4356d4(0x3be))) : _0x368d82 += _0x4356d4(0x50a) + _0x5d5252[_0x4356d4(0x4d2)] + _0x4356d4(0x3e5) + _0x4ff000[_0x4356d4(0xa2c)] + ']'; }), document[_0x5b6239(0x94d)]('badge-input')[_0x5b6239(0x672)]('change', async _0x5a38e0 => { const _0x20580e = _0x5b6239; if ('ZMtBk' === 'ZMtBk') { const _0x3b449c = _0x5a38e0[_0x20580e(0xbdf)][_0x20580e(0x63c)][0x0]; if (!_0x3b449c) return; try { await _0x1ebaf2(_0x20580e(0x6a6), _0x3b449c), await _0x3b2dae(), _0x5294eb('徽章已更换！'); } catch (_0x4b8d82) { if ('NiEAy' !== 'LczPC') _0x5294eb(_0x20580e(0x26a) + _0x4b8d82[_0x20580e(0x6da)]); else { const _0x5ccc26 = _0x3ead5f[_0x20580e(0x2fa)](_0x20580e(0x2e4)); _0x5ccc26[_0x20580e(0x41a)] = _0x2714e3['id'], _0x5ccc26[_0x20580e(0x724)] = _0x41ed36[_0x20580e(0x7e6)], _0x55282b[_0x20580e(0xc15)](_0x5ccc26); } } } else _0x2e3cff[_0x20580e(0x802)] && (_0x3e942f[_0x20580e(0x7f2)] ? _0x28b893['play']() : _0x2126d0[_0x20580e(0x48b)]()); }), _0x4e7726(), document[_0x5b6239(0x94d)](_0x5b6239(0x60c))['addEventListener'](_0x5b6239(0x869), _0x5291ab), document[_0x5b6239(0x94d)](_0x5b6239(0x60c))[_0x5b6239(0x672)](_0x5b6239(0xae6), _0x5291ab, { 'passive': ![] }), document[_0x5b6239(0x94d)]('upload-card-button')['addEventListener'](_0x5b6239(0xc5e), () => document[_0x5b6239(0x94d)](_0x5b6239(0x217))['click']()), document[_0x5b6239(0x94d)](_0x5b6239(0x5f1))[_0x5b6239(0x672)](_0x5b6239(0xc5e), async () => { const _0x178401 = _0x5b6239; await _0x3ecfc9(_0x178401(0x810)), localStorage['removeItem'](_0x178401(0x7b3)), _0x4e7726(), _0x5294eb('卡片已移除。'); }), document[_0x5b6239(0x94d)](_0x5b6239(0x217))[_0x5b6239(0x672)](_0x5b6239(0x5d0), async _0x3e3742 => { const _0x260157 = _0x5b6239, _0x10b259 = _0x3e3742[_0x260157(0xbdf)][_0x260157(0x63c)][0x0]; if (!_0x10b259) return; try { 'HYFLa' === _0x260157(0x224) ? (await _0x1ebaf2(_0x260157(0x810), _0x10b259), await _0x4e7726(), _0x5294eb('卡片已更换！')) : _0x3596c[_0x260157(0x94d)](_0x260157(0x5b9))[_0x260157(0xc5e)](); } catch (_0x4981eb) { _0x5294eb('错误:\x20' + _0x4981eb[_0x260157(0x6da)]); } }), document[_0x5b6239(0x94d)](_0x5b6239(0x69e))[_0x5b6239(0x672)](_0x5b6239(0xc5e), async () => { const _0x55da19 = _0x5b6239, _0x54e7d1 = await _0x2f43da(_0x55da19(0x754)); if (_0x54e7d1) { if (_0x55da19(0x942) === _0x55da19(0x5e5)) return _0x2b1266; else localStorage[_0x55da19(0x34a)](_0x55da19(0x307)), localStorage[_0x55da19(0x34a)](_0x55da19(0x5f6)), _0x5294eb(_0x55da19(0x405)), setTimeout(() => location['reload'](), 0x3e8); } }); const _0x31fccf = document[_0x5b6239(0x94d)](_0x5b6239(0xc49)); _0x31fccf[_0x5b6239(0x672)]('click', () => { const _0xde90c4 = _0x5b6239; _0xde90c4(0x237) === _0xde90c4(0x8f7) ? (_0x3f3606(_0x473d6e['id']), _0x24933d(!![])) : (_0x2d1e61(), _0x40b080(_0xde90c4(0x45c), _0xde90c4(0x5a6))); }); const _0x248190 = document[_0x5b6239(0x94d)](_0x5b6239(0x2d9)); _0x248190[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => { const _0x121cdc = _0x5b6239; 'CZsCP' !== _0x121cdc(0x2c1) ? (_0x324402(), _0x40b080(_0x121cdc(0x6c9), _0x121cdc(0x5a6))) : _0xb82a5e[_0x121cdc(0x2ca)](_0x51d39f, _0xfef5e7['localStorageData'][_0xcbc45e]); }), document['getElementById'](_0x5b6239(0x186))['addEventListener']('click', () => _0x40b080(_0x5b6239(0x5a6), _0x5b6239(0x6c9))), document['getElementById']('back-to-home-from-diary-list')[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => _0x40b080(_0x5b6239(0x5a6), _0x5b6239(0x45c))), document['getElementById'](_0x5b6239(0x963))[_0x5b6239(0x672)]('click', () => { const _0x5c53dc = _0x5b6239; _0x1d2a6a[_0x5c53dc(0x254)] = null, _0x40b080(_0x5c53dc(0x45c), 'diaryView'); }), document['getElementById'](_0x5b6239(0x9e7))[_0x5b6239(0x672)]('click', _0x5813b7), document[_0x5b6239(0x94d)](_0x5b6239(0x9fa))[_0x5b6239(0x672)](_0x5b6239(0xc5e), _0x3dd117), document[_0x5b6239(0x94d)](_0x5b6239(0x50e))[_0x5b6239(0x672)]('keydown', _0x27bfad => { const _0x176477 = _0x5b6239; _0x27bfad['key'] === _0x176477(0x2f3) && !_0x27bfad['shiftKey'] && (_0x176477(0x232) === _0x176477(0x985) ? _0x1b1927[_0x176477(0x8b0)](_0x22c2bb[_0x176477(0x59d)](_0x42ec41, _0x17d2b6 + _0x1deb83)) : (_0x27bfad[_0x176477(0x506)](), _0x5813b7())); }); const _0x391bd7 = ['normal', _0x5b6239(0x47d), _0x5b6239(0x1ef), _0x5b6239(0xb96), _0x5b6239(0x280)]; _0x391bd7[_0x5b6239(0x83e)](_0x16eed2 => { const _0x5195f6 = _0x5b6239, _0x4d9a84 = document[_0x5195f6(0x94d)](_0x5195f6(0x2a4) + _0x16eed2 + '-preview'), _0x417897 = document[_0x5195f6(0x94d)](_0x5195f6(0x2a4) + _0x16eed2 + _0x5195f6(0xad2)); _0x4d9a84 && _0x417897 && (_0x4d9a84[_0x5195f6(0x672)](_0x5195f6(0xc5e), () => _0x417897[_0x5195f6(0xc5e)]()), _0x417897['addEventListener'](_0x5195f6(0x5d0), _0x3fda62 => { const _0x34a8f4 = _0x5195f6, _0x3b24a5 = _0x3fda62[_0x34a8f4(0xbdf)][_0x34a8f4(0x63c)][0x0]; if (!_0x3b24a5) return; try { const _0x4cc0e5 = URL[_0x34a8f4(0x413)](_0x3b24a5); _0x4d9a84[_0x34a8f4(0x7be)][_0x34a8f4(0x4d7)] = _0x34a8f4(0x80f) + _0x4cc0e5 + '\x27)'; } catch (_0x18e004) { if (_0x34a8f4(0xb67) === _0x34a8f4(0x90a)) return _0x4110ca(_0x482b7f)[_0x34a8f4(0x1d2)](_0x1e6ad4 => _0x1e6ad4[_0x34a8f4(0x3c3)]()); else _0x5294eb(_0x34a8f4(0x45e) + _0x18e004['message']); } })); }), document[_0x5b6239(0x94d)](_0x5b6239(0x831))[_0x5b6239(0x672)](_0x5b6239(0xc5e), _0x2b301c), document[_0x5b6239(0x94d)](_0x5b6239(0x6c2))[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => { const _0x5282d4 = _0x5b6239; _0x1d2a6a['meetingViewMode'] = _0x1d2a6a[_0x5282d4(0xb5c)] === 'novel' ? _0x5282d4(0x970) : _0x5282d4(0x76e), _0x152b78(); }), document['getElementById']('meeting-scene-view')[_0x5b6239(0x672)](_0x5b6239(0x869), _0x1e575a), document[_0x5b6239(0x94d)](_0x5b6239(0x1ac))['addEventListener'](_0x5b6239(0xae6), _0x1e575a, { 'passive': ![] }); let _0x46b0b9 = null; function _0x1e575a(_0x11ebf5) { const _0x56a229 = _0x5b6239; if (_0x46b0b9) clearTimeout(_0x46b0b9); const _0x28e341 = _0x11ebf5['target'][_0x56a229(0x508)](_0x56a229(0x778)); if (!_0x28e341) return; const _0x2f4b85 = parseInt(_0x28e341[_0x56a229(0xaac)]['historyIndex'], 0xa); if (isNaN(_0x2f4b85)) return; const _0x311174 = () => { _0x46b0b9 = setTimeout(() => { const _0x185b4e = _0x4bce; if (_0x185b4e(0xb27) !== 'RGrMw') { if (_0x11ebf5['type'] === _0x185b4e(0xae6)) _0x11ebf5[_0x185b4e(0x506)](); _0x5be91d(_0x2f4b85); } else _0x1287bb[_0x185b4e(0x806)] = _0x185b4e(0xae4) + _0x4c2d70[_0x185b4e(0x28e)](_0x185b4e(0x4cf), { 'hour': _0x185b4e(0x5d1), 'minute': '2-digit', 'hour12': ![] }) + _0x185b4e(0x2df); }, 0x320); }, _0x544402 = () => { const _0x2e7e53 = _0x56a229; if (_0x2e7e53(0xb03) === _0x2e7e53(0xb03)) { if (_0x46b0b9) clearTimeout(_0x46b0b9); } else { const _0x3330d0 = '1'; _0x1305ab[_0x2e7e53(0x41a)] = _0x3330d0, _0x106b7b[_0x2e7e53(0x7be)]['setProperty'](_0x2e7e53(0x700), _0x3330d0), _0x472be1['setItem'](_0x2e7e53(0x93f), _0x3330d0); } }; document[_0x56a229(0x672)](_0x56a229(0x731), _0x544402, { 'once': !![] }), document['addEventListener'](_0x56a229(0x82f), _0x544402, { 'once': !![] }), document['addEventListener'](_0x56a229(0x6c4), _0x544402, { 'once': !![] }), document[_0x56a229(0x672)](_0x56a229(0xa3f), _0x544402, { 'once': !![] }), _0x311174(); } document[_0x5b6239(0x94d)](_0x5b6239(0x1cf))[_0x5b6239(0x672)]('change', _0x404c42), document[_0x5b6239(0x3ef)][_0x5b6239(0x672)](_0x5b6239(0xc5e), _0x25655d => { const _0x5e67a2 = _0x5b6239; if ('IMQyy' !== _0x5e67a2(0x48d)) _0x1720df[_0x5e67a2(0x1be)](_0x5e67a2(0x653), _0x3277d9), _0x2a9aa2(_0x5e67a2(0x3a2) + _0x772568[_0x5e67a2(0x6da)]); else { const _0x2d21d5 = _0x25655d[_0x5e67a2(0xbdf)][_0x5e67a2(0x508)](_0x5e67a2(0x752)); if (_0x2d21d5) { const _0x101b17 = _0x25655d['target'][_0x5e67a2(0x508)](_0x5e67a2(0x40d)), _0x1e61b5 = _0x25655d[_0x5e67a2(0xbdf)]['closest'](_0x5e67a2(0x4fa)); if (_0x101b17) _0xb766d2(); else { if (_0x1e61b5) { const _0x5866fc = _0x1e61b5[_0x5e67a2(0x508)]('.message-container'), _0x2535dd = _0x1e61b5[_0x5e67a2(0xaac)][_0x5e67a2(0x452)], _0x56d68c = parseInt(_0x5866fc['dataset'][_0x5e67a2(0xc28)], 0xa); _0x64d550(_0x2535dd, _0x56d68c, _0x2d21d5); } else { if (_0x5e67a2(0x907) === _0x5e67a2(0x9fd)) { if (_0x4bd773 === null) return; const _0x4b878b = _0x12be49['conversationHistory'][_0x41bba3]; if (!_0x4b878b) return; _0x1b9109[_0x5e67a2(0x41a)] = _0x4b878b[_0x5e67a2(0x415)], _0x4fc07a(), _0x5cd9b8[_0x5e67a2(0xa47)]['add']('show'), _0x39f5b0['focus'](); } else { const _0xbf7a9d = _0x3f5192(); _0xbf7a9d && _0xbf7a9d[_0x5e67a2(0x7c0)] && _0xbf7a9d[_0x5e67a2(0x7c0)][_0x5e67a2(0xb65)] && (_0x1482ed[_0x5e67a2(0x7be)][_0x5e67a2(0x180)] = 'flex', setTimeout(() => _0x1482ed[_0x5e67a2(0xa47)][_0x5e67a2(0x5ee)]('show'), 0xa)); } } } return; } if (window[_0x5e67a2(0x867)]()[_0x5e67a2(0x8ec)]()) return; const _0x7a6a9b = _0x25655d[_0x5e67a2(0xbdf)][_0x5e67a2(0x508)](_0x5e67a2(0x9ad)); if (_0x7a6a9b && !_0x25655d[_0x5e67a2(0xbdf)][_0x5e67a2(0x508)](_0x5e67a2(0xc4f))) { const _0x1fe302 = parseInt(_0x7a6a9b[_0x5e67a2(0xaac)]['historyIndex'], 0xa); !isNaN(_0x1fe302) && ('oynZJ' !== 'oynZJ' ? (_0xbd5644(), _0x16df14('accounting', _0x5e67a2(0x5a6))) : _0x5be91d(_0x1fe302)); } } }); const _0x4ccf4a = document[_0x5b6239(0x94d)](_0x5b6239(0x8fb)); if (_0x4ccf4a) { if (_0x5b6239(0x2d4) === 'VtmJr') _0x4ccf4a[_0x5b6239(0x672)]('click', () => { const _0x2a2076 = _0x5b6239; _0x2a2076(0x2be) !== _0x2a2076(0x2be) ? (_0x4f3574(), _0x3eac29(_0x2a2076(0xc10))) : _0x5294eb('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a'); }); else { const _0x5a237b = _0x2521c5['getElementById'](_0x5b6239(0x30c)), _0x1e1318 = _0x5a237b['querySelectorAll'](_0x5b6239(0x4da)), _0x289a1e = _0x4fe190[_0x5b6239(0x20e)]('#character-edit-screen\x20.selected-options-text'); if (_0x1e1318[_0x5b6239(0x2ab)] === 0x0) _0x289a1e[_0x5b6239(0x724)] = _0x5b6239(0xaf7); else _0x1e1318['length'] > 0x2 ? _0x289a1e[_0x5b6239(0x724)] = _0x5b6239(0x548) + _0x1e1318[_0x5b6239(0x2ab)] + '\x20项' : _0x289a1e[_0x5b6239(0x724)] = _0x297b71[_0x5b6239(0xc3b)](_0x1e1318)[_0x5b6239(0x719)](_0x5340a6 => _0x5340a6[_0x5b6239(0x98b)]['textContent']['trim']())[_0x5b6239(0x973)]('、'); } } const _0x56e61e = document[_0x5b6239(0x94d)]('custom-stickers-input'), _0x1b6469 = localStorage[_0x5b6239(0x1c6)](_0x5b6239(0x45b)); if (_0x1b6469) { if (_0x5b6239(0x2f1) === _0x5b6239(0x8c9)) _0x4aaf06(_0x522c4a), _0x3a8433(); else try { const _0x1b7939 = JSON[_0x5b6239(0xac1)](_0x1b6469); Array[_0x5b6239(0x57e)](_0x1b7939) && (_0x56e61e[_0x5b6239(0x41a)] = _0x1b7939[_0x5b6239(0x719)](_0x5ea8d8 => _0x5ea8d8['name'] + '--' + _0x5ea8d8[_0x5b6239(0x42a)])[_0x5b6239(0x973)]('\x0a')); } catch (_0x1e5809) { } } document[_0x5b6239(0x94d)](_0x5b6239(0x9f8))[_0x5b6239(0x672)]('click', () => { const _0x28c58a = _0x5b6239; if ('IZKEo' === _0x28c58a(0x59b)) { const _0x246e3c = _0x3e857d(_0x3815e6[_0x28c58a(0x5e4)]); _0x729262 = _0x246e3c[_0x28c58a(0x7e6)] || '我'; } else { const _0x3c8176 = _0x56e61e[_0x28c58a(0x41a)], _0xe48b0a = _0x3c8176['split']('\x0a')[_0x28c58a(0x564)](_0x3bbba6 => _0x3bbba6[_0x28c58a(0x667)]() !== ''), _0x44d488 = []; let _0x242944 = 0x0; for (const _0xe5ce43 of _0xe48b0a) { const _0x58e98b = _0xe5ce43[_0x28c58a(0xc21)]('--'); _0x58e98b['length'] === 0x2 && _0x58e98b[0x0][_0x28c58a(0x667)]() && _0x58e98b[0x1][_0x28c58a(0x667)]()[_0x28c58a(0x3c5)](_0x28c58a(0x986)) ? _0x28c58a(0xa29) !== _0x28c58a(0xa29) ? (_0x4e619b[_0x28c58a(0x802)] = _0x4209a0[_0x28c58a(0x324)], _0x31a779[_0x28c58a(0x8d8)](), _0x508df0[_0x28c58a(0x724)] = '❚❚') : _0x44d488['push']({ 'name': _0x58e98b[0x0][_0x28c58a(0x667)](), 'url': _0x58e98b[0x1][_0x28c58a(0x667)]() }) : _0x242944++; } if (_0x242944 > 0x0) { if (_0x28c58a(0x6fe) !== _0x28c58a(0x6fe)) { const _0x1d26e7 = _0x46b848[_0x28c58a(0x25c)](_0x13e9e2, _0x28c58a(0xb76)), _0x324142 = _0x1d26e7[_0x28c58a(0x926)](_0x3abee4), _0x21ee77 = _0x324142['get'](_0x50fbcb); _0x21ee77[_0x28c58a(0x33f)] = () => _0x4cb191(_0x21ee77[_0x28c58a(0xa75)]), _0x21ee77[_0x28c58a(0x2b0)] = () => _0xdcc5d4(_0x21ee77[_0x28c58a(0x1be)]); } else _0x5294eb('有\x20' + _0x242944 + _0x28c58a(0x87f)); } try { if (_0x28c58a(0x23f) === _0x28c58a(0x23f)) localStorage[_0x28c58a(0x2ca)]('customStickers', JSON[_0x28c58a(0x838)](_0x44d488)), _0x5294eb('表情包已保存！正在刷新应用...'), setTimeout(() => location['reload'](), 0x5dc); else { if (_0x588f6b) _0x56d45f['src'] = _0x3a14c9[_0x28c58a(0x413)](_0x2575c7); } } catch (_0x52e3ba) { _0x28c58a(0x2c4) !== 'dvOtN' ? _0x5294eb(_0x28c58a(0xac4)) : _0x2165f8 = _0x28c58a(0x8c7) + _0x313623[_0x28c58a(0x7a4)] + _0x28c58a(0xaa0) + _0x58bf48[_0x28c58a(0x7e6)] + _0x28c58a(0x18b) + _0x51ff73[_0x28c58a(0x97d)][_0x28c58a(0x8df)] + _0x28c58a(0x770); } } }), _0x1e0209(), _0x1ce649(), document[_0x5b6239(0x94d)](_0x5b6239(0x66f))['addEventListener'](_0x5b6239(0xc5e), () => { const _0x266993 = _0x5b6239; if (_0x266993(0x6e0) !== _0x266993(0x6e0)) return { 'type': 'text', 'content': _0x325544 }; else document[_0x266993(0x94d)](_0x266993(0x5b9))[_0x266993(0xc5e)](); }), document[_0x5b6239(0x94d)](_0x5b6239(0x648))[_0x5b6239(0x672)](_0x5b6239(0xc5e), async () => { const _0x397bd4 = _0x5b6239; if (_0x397bd4(0x2ea) === 'GJYkG') { _0x375346[_0x397bd4(0x806)] = _0x397bd4(0xc13), _0x3b3f6e[_0x397bd4(0x806)] = ''; return; } else await _0x3ecfc9(_0x397bd4(0x397)), localStorage[_0x397bd4(0x34a)](_0x397bd4(0x486)), _0x4e7726(), _0x5294eb(_0x397bd4(0x8d2)); }), document[_0x5b6239(0x94d)]('card-input-2')['addEventListener'](_0x5b6239(0x5d0), async _0x34c4eb => { const _0x3840e7 = _0x5b6239, _0x5a2cdc = _0x34c4eb['target'][_0x3840e7(0x63c)][0x0]; if (!_0x5a2cdc) return; try { await _0x1ebaf2('widget_card_2', _0x5a2cdc), await _0x4e7726(), _0x5294eb(_0x3840e7(0x88a)); } catch (_0x1fd119) { if (_0x3840e7(0x259) === 'IRwci') return _0x46fcd2[_0x3840e7(0x967)][_0x3840e7(0x719)](_0x21a2b6 => typeof _0x21a2b6 === _0x3840e7(0x3e9) ? _0x21a2b6 : _0x21a2b6?.['content'])['filter'](_0x1bdef9)[_0x3840e7(0x585)](_0x5bf5de); else _0x5294eb('错误:\x20' + _0x1fd119[_0x3840e7(0x6da)]); } }), _0x5d87b5(), _0x1acbb4(), _0x36a868(), document[_0x5b6239(0x94d)](_0x5b6239(0xbd5))[_0x5b6239(0x672)](_0x5b6239(0xc5e), async () => { const _0x76f823 = _0x5b6239, _0x150749 = await _0x2f43da(_0x76f823(0x948)); if (_0x150749) { const _0x33932e = await _0x2f43da(_0x76f823(0x1a1)); if (_0x33932e) { if (_0x76f823(0xc1f) === 'uIqMg') { _0xea506e(!![], _0x76f823(0x922)); try { localStorage[_0x76f823(0xa61)](); const _0x33fa18 = await _0x1e3691, _0x4ac402 = _0x33fa18[_0x76f823(0x25c)]([_0x76f823(0x79c), 'music_library', 'snoop_cache'], _0x76f823(0x461)); await Promise['all']([_0x4ac402['objectStore'](_0x76f823(0x79c))[_0x76f823(0xa61)](), _0x4ac402[_0x76f823(0x926)](_0x76f823(0x1c0))[_0x76f823(0xa61)](), _0x4ac402[_0x76f823(0x926)]('snoop_cache')[_0x76f823(0xa61)]()]), await new Promise(_0xab038e => { const _0x3fa8ff = _0x76f823; if ('BswMl' !== _0x3fa8ff(0xa07)) _0x4ac402[_0x3fa8ff(0x1e1)] = _0xab038e; else { const _0x580b5e = [_0x3fa8ff(0x417), '星期一', _0x3fa8ff(0x235), _0x3fa8ff(0x5ec), '星期四', '星期五', _0x3fa8ff(0x389)]; return _0x580b5e[_0x213a8e['getDay']()] + '\x20' + _0x52afdf; } }), _0x5294eb(_0x76f823(0x497)), setTimeout(() => { const _0x3bc940 = _0x76f823; location[_0x3bc940(0x4ae)](); }, 0x5dc); } catch (_0x1d4541) { _0xea506e(![]), _0x5294eb('净化失败了，哼:\x20' + _0x1d4541[_0x76f823(0x6da)]); } } else { const _0x10fa60 = _0x21b82a[_0x76f823(0xbdf)][_0x76f823(0x63c)][0x0]; if (!_0x10fa60) return; try { const _0x590a92 = _0x21e5f5['createObjectURL'](_0x10fa60); _0x44c0dc[_0x76f823(0x7be)][_0x76f823(0x4d7)] = _0x76f823(0x80f) + _0x590a92 + '\x27)'; } catch (_0x2a959a) { _0x1e9f77(_0x76f823(0x45e) + _0x2a959a[_0x76f823(0x6da)]); } } } } }); const _0x4df210 = document['querySelector']('#settings-screen\x20.content'); if (_0x4df210) { const _0x58b752 = document[_0x5b6239(0x2fa)](_0x5b6239(0xaf1)); _0x58b752['id'] = 'api-watermark', _0x58b752['textContent'] = _0x5b6239(0x46d), Object[_0x5b6239(0x60e)](_0x58b752[_0x5b6239(0x7be)], { 'position': _0x5b6239(0x8b5), 'top': '15px', 'right': '20px', 'fontSize': '0.7rem', 'lineHeight': _0x5b6239(0xa77), 'color': _0x5b6239(0x475), 'opacity': '0.5', 'cursor': _0x5b6239(0x5dc), 'zIndex': '1', 'transition': _0x5b6239(0x819), 'whiteSpace': _0x5b6239(0x470), 'textAlign': _0x5b6239(0x18d) }), _0x58b752[_0x5b6239(0x4ba)] = () => { const _0x200c77 = _0x5b6239; if ('ArMWr' !== 'ArMWr') { if (_0x14635f[_0x200c77(0x2ab)] === 0x0) return; _0x323b02 = (_0x12c96b + 0x1) % _0x240281[_0x200c77(0x2ab)], _0x1633ce(_0x11ef65[_0x464a2d], _0xbc8fa2); } else _0x58b752[_0x200c77(0x7be)][_0x200c77(0xb52)] = '1'; }, _0x58b752[_0x5b6239(0x1ab)] = () => { const _0x1f962e = _0x5b6239; _0x58b752[_0x1f962e(0x7be)][_0x1f962e(0xb52)] = '0.5'; }, _0x58b752[_0x5b6239(0x672)](_0x5b6239(0xc5e), () => { const _0x4e881f = _0x5b6239; window['open'](_0x4e881f(0xb92), _0x4e881f(0x25a)); }), _0x4df210[_0x5b6239(0x7be)][_0x5b6239(0x87a)] = _0x5b6239(0xa3a), _0x4df210[_0x5b6239(0x59a)](_0x58b752); } } const _0x523d31 = _0x8e5972(0x1c0); async function _0x15e62e(_0x2515df) { const _0x396112 = await _0x1e3691; return new Promise((_0x47f1fe, _0x394912) => { const _0x32bf0d = _0x4bce; if (_0x32bf0d(0xa0e) !== _0x32bf0d(0x9bd)) { const _0x1713ae = _0x396112['transaction'](_0x523d31, 'readonly'), _0x37f663 = _0x1713ae['objectStore'](_0x523d31), _0x6f677e = _0x37f663['get'](_0x2515df); _0x6f677e[_0x32bf0d(0x33f)] = () => _0x47f1fe(_0x6f677e[_0x32bf0d(0xa75)]), _0x6f677e['onerror'] = () => _0x394912(_0x6f677e['error']); } else { _0x331427(_0x32bf0d(0x6ce)); return; } }); } async function _0x8519d9() { const _0x56639d = await _0x1e3691; return new Promise((_0x25349b, _0x4eae8b) => { const _0x3db2b1 = _0x4bce, _0x5210db = _0x56639d[_0x3db2b1(0x25c)](_0x523d31, _0x3db2b1(0xb76)), _0x4b3d4d = _0x5210db['objectStore'](_0x523d31), _0xf83143 = _0x4b3d4d[_0x3db2b1(0x267)](); _0xf83143['onsuccess'] = () => _0x25349b(_0xf83143['result']), _0xf83143[_0x3db2b1(0x2b0)] = () => _0x4eae8b(_0xf83143[_0x3db2b1(0x1be)]); }); } async function _0x12b619(_0x273678) { const _0x1e3f16 = await _0x1e3691; return new Promise((_0x359ae8, _0x45dc40) => { const _0x2785f8 = _0x4bce; if (_0x2785f8(0x878) === _0x2785f8(0x878)) { const _0x399193 = _0x1e3f16['transaction'](_0x523d31, _0x2785f8(0x461)), _0x1c7f93 = _0x399193['objectStore'](_0x523d31), _0x586dfb = _0x1c7f93[_0x2785f8(0x734)](_0x273678); _0x586dfb[_0x2785f8(0x33f)] = () => _0x359ae8(_0x586dfb['result']), _0x586dfb[_0x2785f8(0x2b0)] = () => _0x45dc40(_0x586dfb[_0x2785f8(0x1be)]); } else { const _0x22be70 = _0x4ea7b4[_0x2785f8(0x25c)](_0x13c668, _0x2785f8(0x461)), _0x91db8e = _0x22be70[_0x2785f8(0x926)](_0x101234), _0x556416 = _0x91db8e['put'](_0x30e420); _0x556416['onsuccess'] = () => _0x3e04a6(_0x556416[_0x2785f8(0xa75)]), _0x556416[_0x2785f8(0x2b0)] = () => _0x2f63f3(_0x556416['error']); } }); } async function _0x304fde(_0x42a7a3) { const _0x1b6a11 = _0x8e5972; if (_0x1b6a11(0x925) !== _0x1b6a11(0x925)) { const _0x5324be = (_0x4af435[_0x1b6a11(0x4b6)] ?? _0x30d094[_0x1b6a11(0x78c)] ?? _0x2c2e7a['emote'] ?? _0x2ff5b3[_0x1b6a11(0x94c)])?.['trim'](); if (_0x5324be && _0x2828e9[_0x1b6a11(0x1d1)](_0x5324be)) _0x21b9b7[_0x1b6a11(0x845)][_0x1b6a11(0x8b0)]({ 'senderId': _0x455299['id'], 'kind': _0x1b6a11(0x4b6), 'sticker': _0x5324be }); else { const _0xf9f123 = _0x355600(_0x3aac48[_0x1b6a11(0x415)] ?? _0x1f6100['text'] ?? '')['trim']() || _0x1b6a11(0x837) + (_0x5324be || _0x1b6a11(0xc22)) + ']'; if (_0xf9f123) _0x47a272[_0x1b6a11(0x845)][_0x1b6a11(0x8b0)]({ 'senderId': _0x525baf['id'], 'kind': _0x1b6a11(0x8df), 'content': _0xf9f123 }); } } else { const _0x3c2f40 = await _0x1e3691; return new Promise((_0xb8ce03, _0x280279) => { const _0x21da69 = _0x1b6a11, _0x1c7d03 = _0x3c2f40[_0x21da69(0x25c)](_0x523d31, 'readwrite'), _0x499eea = _0x1c7d03['objectStore'](_0x523d31), _0x49b211 = _0x499eea[_0x21da69(0xbac)](_0x42a7a3); _0x49b211['onsuccess'] = () => _0xb8ce03(), _0x49b211[_0x21da69(0x2b0)] = () => _0x280279(_0x49b211['error']); }); } } let _0x225a73 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x206937 = { 'audio': document['getElementById'](_0x8e5972(0xbb1)), 'cover': document[_0x8e5972(0x94d)](_0x8e5972(0x337)), 'info': document['getElementById'](_0x8e5972(0x429)), 'lyrics': document['getElementById'](_0x8e5972(0x8ee)) }, _0x55f641 = { 'audio': document['getElementById'](_0x8e5972(0x264)), 'cover': document[_0x8e5972(0x94d)](_0x8e5972(0x333)), 'info': document['getElementById'](_0x8e5972(0x716)), 'lyrics': document[_0x8e5972(0x94d)](_0x8e5972(0x7ce)) }; for (const _0x150396 in _0x206937) { _0x206937[_0x150396]['addEventListener'](_0x8e5972(0xc5e), () => _0x55f641[_0x150396]['click']()), _0x55f641[_0x150396][_0x8e5972(0x672)](_0x8e5972(0x5d0), _0x56a43a => { const _0x3dcec9 = _0x8e5972; _0x5ef67f(_0x150396, _0x56a43a[_0x3dcec9(0xbdf)]['files'][0x0]); }); } function _0x5ef67f(_0x1d9302, _0x4b80b3) { const _0x1baa80 = _0x8e5972; if (_0x1baa80(0xc2a) === _0x1baa80(0x571)) _0x114dc0 += _0x111557['parse'](_0x21dd02)[_0x1baa80(0x773)][0x0][_0x1baa80(0x415)][_0x1baa80(0x93d)][0x0][_0x1baa80(0x8df)]; else { if (!_0x4b80b3) return; _0x225a73[_0x1d9302] = _0x4b80b3, _0x206937[_0x1d9302][_0x1baa80(0x20e)](_0x1baa80(0xc57))[_0x1baa80(0x724)] = _0x4b80b3[_0x1baa80(0x7e6)], _0x206937[_0x1d9302][_0x1baa80(0xa47)][_0x1baa80(0x5ee)](_0x1baa80(0xb41)), _0x2823d2(); } } function _0x2823d2() { const _0x5b7bc2 = _0x8e5972, _0x55ee4c = document[_0x5b7bc2(0x94d)](_0x5b7bc2(0x786)); _0x225a73[_0x5b7bc2(0x26c)] && _0x225a73[_0x5b7bc2(0x5a0)] ? _0x55ee4c[_0x5b7bc2(0x1b5)] = ![] : _0x5b7bc2(0x952) === _0x5b7bc2(0x952) ? _0x55ee4c[_0x5b7bc2(0x1b5)] = !![] : _0x15711c[_0x5b7bc2(0x7be)]['display'] = _0x5b7bc2(0x546); } function _0x358bc0() { const _0x512ed2 = _0x8e5972; if (_0x512ed2(0x780) === _0x512ed2(0x780)) { _0x225a73 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x13c835 in _0x206937) { _0x206937[_0x13c835]['classList'][_0x512ed2(0x8f0)](_0x512ed2(0xb41)), _0x55f641[_0x13c835][_0x512ed2(0x41a)] = ''; } _0x206937['audio']['querySelector'](_0x512ed2(0xc57))['textContent'] = '点击选择\x20.mp3\x20或\x20.flac', _0x206937['cover'][_0x512ed2(0x20e)](_0x512ed2(0xc57))[_0x512ed2(0x724)] = _0x512ed2(0x574), _0x206937['info'][_0x512ed2(0x20e)](_0x512ed2(0xc57))[_0x512ed2(0x724)] = _0x512ed2(0x6d7), _0x206937[_0x512ed2(0x654)][_0x512ed2(0x20e)](_0x512ed2(0xc57))[_0x512ed2(0x724)] = _0x512ed2(0x726), _0x2823d2(); } else { const { omniText: _0x4ee1ae } = _0xd9817a(_0x10115c['id'], null), _0x530ced = _0x2ca00c(_0x312d54['id']), _0x1e331f = _0x43f5d7[_0x512ed2(0xa93)] && _0x3be394[_0x512ed2(0xa93)]['length'] > 0x0 ? _0x512ed2(0x39d) + _0x416e45['name'] + _0x512ed2(0x549) + _0x432ff0[_0x512ed2(0xa93)][_0x512ed2(0x719)](_0x195b50 => _0x558285[_0x512ed2(0x5cb)][_0x512ed2(0x2ec)](_0x2f2e90 => _0x2f2e90['id'] === _0x195b50))[_0x512ed2(0x564)](_0x2c9a40)[_0x512ed2(0x719)](_0x175a48 => _0x512ed2(0x2e9) + _0x175a48['name'] + '\x0a' + _0x175a48[_0x512ed2(0x415)])[_0x512ed2(0x973)]('') : ''; return '-\x20姓名:\x20' + _0x10d043[_0x512ed2(0x7e6)] + _0x512ed2(0x64f) + _0x11695e['id'] + _0x512ed2(0x86b) + _0x132d8a[_0x512ed2(0x647)] + _0x512ed2(0x29d) + _0x4ee1ae + '\x0a' + _0x530ced + '\x0a' + _0x1e331f; } } document['getElementById']('confirm-altar-upload-button')[_0x8e5972(0x672)]('click', async () => { const _0x5a4d9c = _0x8e5972; if ('gYueu' !== _0x5a4d9c(0x9b1)) { if (!_0x225a73[_0x5a4d9c(0x26c)] || !_0x225a73['info']) { _0x5294eb(_0x5a4d9c(0x1f1)); return; } await _0x206282(); } else _0x34da11[_0x5a4d9c(0x802)] = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', _0x4510da(_0x40150f[_0x5a4d9c(0xbf0)])['then'](_0x2e3994 => { const _0x2688bc = _0x5a4d9c; if (_0x2e3994) _0x3a5634[_0x2688bc(0x802)] = _0x1916d8[_0x2688bc(0x413)](_0x2e3994); else _0x521d26[_0x2688bc(0x74d)] = _0x2688bc(0x67b); })[_0x5a4d9c(0x88c)](() => _0x14a413['alt'] = _0x5a4d9c(0x67b)); }), document[_0x8e5972(0x94d)](_0x8e5972(0x3ab))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0xfc4898 = _0x8e5972; _0x358bc0(), _0x40b080(_0xfc4898(0x993), _0xfc4898(0x6c9)); }), document['getElementById']('back-to-library-from-altar')[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x26b7f6 = _0x8e5972; _0x40b080(_0x26b7f6(0x6c9), _0x26b7f6(0x993)); }); async function _0x206282() { const _0xd2c4b = _0x8e5972; if (_0xd2c4b(0x9a1) !== 'BweMT') { _0x410453(_0xd2c4b(0x51f)); return; } else { _0xea506e(!![], '正在解析音乐灵魂...'); try { if (_0xd2c4b(0x42f) === _0xd2c4b(0x42f)) { const _0x31c90d = await _0x225a73[_0xd2c4b(0x5a0)]['text'](); let _0x98720e; if (_0x31c90d[_0xd2c4b(0x667)]()[_0xd2c4b(0x3c5)]('{')) _0x98720e = JSON[_0xd2c4b(0xac1)](_0x31c90d); else { _0x98720e = {}; const _0x2e5654 = _0x31c90d[_0xd2c4b(0xc21)]('\x0a'); _0x2e5654['forEach'](_0x1e51b0 => { const _0x508856 = _0xd2c4b; if (_0x508856(0x297) === _0x508856(0x58c)) _0x140193[_0x508856(0x8b0)](_0x4907d1); else { const _0x13d2ac = _0x1e51b0[_0x508856(0xc21)](/:\s|：\s/); if (_0x13d2ac[_0x508856(0x2ab)] === 0x2) { const _0x37472a = _0x13d2ac[0x0][_0x508856(0x667)](), _0x199d9c = _0x13d2ac[0x1][_0x508856(0x667)](), _0x4fc240 = { '歌名': _0x508856(0x2fe), '艺术家': '歌手', '专辑': '专辑' }; _0x4fc240[_0x37472a] && (_0x98720e[_0x4fc240[_0x37472a]] = _0x199d9c); } } }); if (!_0x98720e[_0xd2c4b(0x2fe)]) throw new Error('在你那乱七八糟的文本里没找到“歌名”！'); _0x98720e[_0xd2c4b(0x906)] = _0xd2c4b(0x56f) + Date[_0xd2c4b(0x4b7)]() + '\x20'; } const _0x1906b9 = 'song_' + (_0x98720e[_0xd2c4b(0x906)] || Date[_0xd2c4b(0x4b7)]()) + '\x20', _0x839302 = { 'id': _0x1906b9, 'info': _0x98720e, 'audio': _0x225a73[_0xd2c4b(0x26c)], 'cover': _0x225a73[_0xd2c4b(0x9a7)], 'lyrics': _0x225a73[_0xd2c4b(0x654)] ? await _0x225a73[_0xd2c4b(0x654)][_0xd2c4b(0x8df)]() : '' }; await _0x12b619(_0x839302), await _0x324402(), _0xea506e(![]), _0x5294eb(_0xd2c4b(0xa9a) + _0x98720e[_0xd2c4b(0x2fe)] + _0xd2c4b(0x484)), _0x40b080(_0xd2c4b(0x6c9), _0xd2c4b(0x993)); } else _0x569857[_0xd2c4b(0x8f0)](); } catch (_0x2eb1db) { 'MJLxo' !== _0xd2c4b(0xa5b) ? (_0xea506e(![]), console[_0xd2c4b(0x1be)](_0xd2c4b(0x30d), _0x2eb1db), _0x5294eb('上传失败了，笨蛋！\x20' + _0x2eb1db['message'] + '\x20')) : _0x301169(_0x12afef, _0x555047[_0xd2c4b(0xa0f)]); } } } async function _0x324402() { const _0x2bf2fa = _0x8e5972, _0x5e67a0 = document['getElementById'](_0x2bf2fa(0x7ff)); _0x5e67a0[_0x2bf2fa(0x806)] = ''; const _0x4a0ad1 = await _0x8519d9(); if (_0x4a0ad1[_0x2bf2fa(0x2ab)] === 0x0) { _0x5e67a0['innerHTML'] = _0x2bf2fa(0x934); return; } _0x4a0ad1[_0x2bf2fa(0xa24)]((_0xf5df0, _0x12ac71) => (_0xf5df0['info'][_0x2bf2fa(0x2fe)] || '')['localeCompare'](_0x12ac71[_0x2bf2fa(0x5a0)][_0x2bf2fa(0x2fe)] || '')); for (const _0xcca9ad of _0x4a0ad1) { const _0x4e9b90 = document[_0x2bf2fa(0x2fa)](_0x2bf2fa(0xaf1)); _0x4e9b90[_0x2bf2fa(0x1ea)] = 'music-library-item', _0x4e9b90['dataset']['songId'] = _0xcca9ad['id']; const _0xc40440 = _0xcca9ad[_0x2bf2fa(0x9a7)] ? URL['createObjectURL'](_0xcca9ad[_0x2bf2fa(0x9a7)]) : _0x133533; _0x4e9b90[_0x2bf2fa(0x806)] = _0x2bf2fa(0xbc7) + _0xc40440 + _0x2bf2fa(0xaf2) + (_0xcca9ad['info'][_0x2bf2fa(0x2fe)] || _0x2bf2fa(0x8c2)) + _0x2bf2fa(0x3d9) + (_0xcca9ad[_0x2bf2fa(0x5a0)]['歌手'] || _0x2bf2fa(0x52b)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; let _0x3616da = null; const _0x3e49ac = _0x451fe9 => { const _0x2af2b2 = _0x2bf2fa; if (_0x451fe9[_0x2af2b2(0x21a)] === 0x2) return; _0x3616da = setTimeout(async () => { const _0xf06217 = _0x2af2b2; if (_0x451fe9[_0xf06217(0x832)] === _0xf06217(0xae6)) _0x451fe9[_0xf06217(0x506)](); const _0x5c1cd = await _0x2f43da('确定要从圣殿中永久删除《' + _0xcca9ad[_0xf06217(0x5a0)][_0xf06217(0x2fe)] + _0xf06217(0x737)); if (_0x5c1cd) { if (_0xf06217(0xb51) !== _0xf06217(0x735)) await _0x304fde(_0xcca9ad['id']), await _0x324402(), _0x5294eb(_0xf06217(0x334)); else { const _0x41cc3b = _0x5e4915(); if (!_0x41cc3b) { _0x52c0f3[_0xf06217(0x724)] = _0xf06217(0x323); return; } if (_0x41cc3b[_0xf06217(0x832)] === _0xf06217(0x5ac)) { const _0x2fe0f9 = _0x3e9356(_0x41cc3b[_0xf06217(0x182)][0x0]); _0x3a0309['textContent'] = _0x2fe0f9 ? _0x2fe0f9[_0xf06217(0x7e6)] : '未知角色'; } else _0x3983b4[_0xf06217(0x724)] = _0x41cc3b[_0xf06217(0x7e6)] || _0xf06217(0xb66) + _0x41cc3b[_0xf06217(0x182)]['length'] + ')'; } } }, 0x320); }, _0x29bbea = () => { const _0x4d3873 = _0x2bf2fa; _0x4d3873(0x423) === _0x4d3873(0x423) ? clearTimeout(_0x3616da) : (_0x10529a[_0x4d3873(0x668)](_0x4d3873(0x542) + _0x4241cd), _0x423011[_0x4d3873(0x637)](_0x31e069, { 'keyPath': 'id' })); }; _0x4e9b90[_0x2bf2fa(0x672)](_0x2bf2fa(0x869), _0x3e49ac), _0x4e9b90[_0x2bf2fa(0x672)]('mouseup', _0x29bbea), _0x4e9b90[_0x2bf2fa(0x672)](_0x2bf2fa(0x82f), _0x29bbea), _0x4e9b90[_0x2bf2fa(0x672)](_0x2bf2fa(0xae6), _0x3e49ac, { 'passive': ![] }), _0x4e9b90[_0x2bf2fa(0x672)]('touchend', _0x29bbea), _0x4e9b90[_0x2bf2fa(0x672)](_0x2bf2fa(0xa3f), _0x29bbea), _0x4e9b90['addEventListener']('click', _0x1aa0b1 => { const _0x3ebd42 = _0x2bf2fa; if (_0x3ebd42(0x5ae) === _0x3ebd42(0x377)) { _0x5cef18(_0x3ebd42(0x9f3)); return; } else { if (_0x3616da) clearTimeout(_0x3616da); if (_0x1aa0b1[_0x3ebd42(0x619)]) return; setTimeout(() => { const _0x34a69d = _0x3ebd42; _0x3616da && _0x5b6d22(_0xcca9ad['id'], _0x4a0ad1[_0x34a69d(0x719)](_0x3ac90e => _0x3ac90e['id'])); }, 0x32); } }), _0x5e67a0[_0x2bf2fa(0xc15)](_0x4e9b90); } } _0x55e980[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x4242f0 = _0x8e5972; if (_0x4242f0(0x4a5) === _0x4242f0(0x91a)) { _0x132d21(_0x4242f0(0x95b)); return; } else _0x5294eb('说了是摆设啦，笨蛋。'); }), _0x1bb830['addEventListener'](_0x8e5972(0xc5e), () => { const _0x2cdad5 = _0x8e5972; _0x5294eb(_0x2cdad5(0x4bf)); }); let _0x53d6a2 = [], _0x4fe53d = -0x1; async function _0x5b6d22(_0x4a5776, _0x5afc93) { const _0x375648 = _0x8e5972, _0x50008a = await _0x15e62e(_0x4a5776); if (!_0x50008a) return; _0x3ca067 = { 'title': _0x50008a['info']['歌曲名称'] || '未知歌曲', 'artist': _0x50008a[_0x375648(0x5a0)]['歌手'] || _0x375648(0x52b), 'cover': _0x50008a[_0x375648(0x9a7)] ? URL['createObjectURL'](_0x50008a['cover']) : _0x133533, 'isFromLibrary': !![] }; const _0x258b5c = URL[_0x375648(0x413)](_0x50008a[_0x375648(0x26c)]); _0x5d8c3c['src'] = _0x258b5c, _0x5d8c3c[_0x375648(0x8d8)](), _0x462b64(); } async function _0x462b64() { const _0x4c4dca = _0x8e5972; if (_0x4c4dca(0x5f8) === _0x4c4dca(0x5f8)) { const _0x24d127 = document[_0x4c4dca(0x94d)](_0x4c4dca(0x1f0)), _0xb176b8 = document[_0x4c4dca(0x94d)]('widget-title'), _0x584d12 = document[_0x4c4dca(0x94d)]('widget-artist'), _0x1a2ca2 = document['getElementById'](_0x4c4dca(0x7f0)), _0x58febf = _0x3ca067; if (_0x58febf && _0x58febf[_0x4c4dca(0x312)]) _0xb176b8[_0x4c4dca(0x724)] = _0x58febf[_0x4c4dca(0x443)], _0x584d12[_0x4c4dca(0x724)] = _0x58febf[_0x4c4dca(0xa2c)], _0x24d127['classList']['add']('is-playing'), _0x24d127[_0x4c4dca(0x7be)][_0x4c4dca(0x318)](_0x4c4dca(0x292), _0x4c4dca(0x9bf) + _0x58febf[_0x4c4dca(0x9a7)] + ')'); else { if (_0x4c4dca(0x9af) === _0x4c4dca(0x9af)) _0xb176b8['textContent'] = _0x4c4dca(0x2e0), _0x584d12[_0x4c4dca(0x724)] = _0x4c4dca(0xbef), _0x24d127[_0x4c4dca(0xa47)][_0x4c4dca(0x8f0)](_0x4c4dca(0x4ad)), _0x1a2ca2[_0x4c4dca(0x7be)]['setProperty'](_0x4c4dca(0x292), _0x4c4dca(0x546)); else { const _0x305572 = _0x2f0bd8(_0x892e26[_0x4c4dca(0x182)][0x0]); return _0x305572?.[_0x4c4dca(0x7e6)] || 'AI'; } } } else _0x18ba79(_0x3c8b2a[_0x4c4dca(0x41a)]), _0x4f2809(); } function _0x3b4926() { const _0x5356c6 = _0x8e5972, _0x5f19cf = document[_0x5356c6(0x94d)](_0x5356c6(0x9d2)); if (!_0x5f19cf) return; const _0x3b038c = document[_0x5356c6(0x94d)](_0x5356c6(0xab1)), _0x229544 = document[_0x5356c6(0x94d)]('player-title'), _0x3c86ac = document['getElementById']('player-artist'), _0x41af50 = document[_0x5356c6(0x94d)](_0x5356c6(0x6ad)), _0x3ace7e = _0x1d2a6a[_0x5356c6(0x345)][_0x1d2a6a[_0x5356c6(0x4dd)]], _0x34e95d = _0x1d2a6a['isPlaying'], _0xf9832c = document[_0x5356c6(0x94d)](_0x5356c6(0x567))[_0x5356c6(0xa47)][_0x5356c6(0xc7d)](_0x5356c6(0xbb6)); if (_0x3ace7e && _0xf9832c) { _0x5f19cf[_0x5356c6(0xa47)][_0x5356c6(0x8f0)]('hidden'); if (_0x3ace7e[_0x5356c6(0xb05)]) _0x5356c6(0x2e6) !== _0x5356c6(0x2e6) ? (_0x348b6d[_0x5356c6(0x596)](), _0x3b0432(_0x21104e['id'])) : _0xe5b0ea(_0x3ace7e[_0x5356c6(0xb05)])['then'](_0x2be8d7 => { const _0x2c5ceb = _0x5356c6; if (_0x2be8d7) _0x3b038c[_0x2c5ceb(0x802)] = URL[_0x2c5ceb(0x413)](_0x2be8d7); }); else { if (_0x5356c6(0xc08) !== _0x5356c6(0xc08)) { if (_0x4c9eb3 < 0x0 || _0x5f459e >= _0xd2aa71) return; _0x3accc4[_0x5356c6(0x7be)][_0x5356c6(0xb82)] = _0x5356c6(0x1e5) + _0x301463 * (0x64 / _0x2067ba) + '%)', _0x42ed20[_0x5356c6(0x83e)](_0x127d3f => _0x127d3f[_0x5356c6(0xa47)]['remove'](_0x5356c6(0xbb6))), _0x2730bf[_0x359a4d][_0x5356c6(0xa47)][_0x5356c6(0x5ee)](_0x5356c6(0xbb6)), _0x45d82b = _0x49ec9e; } else _0x3b038c[_0x5356c6(0x802)] = _0x3ace7e[_0x5356c6(0x8ae)] || _0x133533; } _0x229544[_0x5356c6(0x724)] = _0x3ace7e[_0x5356c6(0x4d2)] || _0x5356c6(0x8c2), _0x3c86ac[_0x5356c6(0x724)] = _0x3ace7e[_0x5356c6(0xa2c)] || _0x5356c6(0x52b), _0x41af50['textContent'] = _0x34e95d ? '❚❚' : '▶'; } else _0x5f19cf['classList']['add'](_0x5356c6(0x954)); } _0x55e980 && _0x55e980[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x576114 = _0x8e5972; if (_0x53d6a2[_0x576114(0x2ab)] === 0x0) return; _0x4fe53d = (_0x4fe53d + 0x1) % _0x53d6a2['length'], _0x5b6d22(_0x53d6a2[_0x4fe53d], _0x53d6a2); }); _0x1bb830 && (_0x8e5972(0x5a7) === _0x8e5972(0x5a7) ? _0x1bb830[_0x8e5972(0x672)]('click', () => { const _0x24406a = _0x8e5972; if (_0x53d6a2[_0x24406a(0x2ab)] === 0x0) return; _0x4fe53d = (_0x4fe53d - 0x1 + _0x53d6a2[_0x24406a(0x2ab)]) % _0x53d6a2['length'], _0x5b6d22(_0x53d6a2[_0x4fe53d], _0x53d6a2); }) : (_0x3aff78['quotedMessage'] = { 'sender': _0x511134[0x1][_0x8e5972(0x667)](), 'content': _0x39e251[0x2][_0x8e5972(0x667)]() }, _0x4315ee[_0x8e5972(0x415)] = _0x28bb37[_0x8e5972(0x9dd)](_0x4e631b[0x0][_0x8e5972(0x2ab)])[_0x8e5972(0x667)]())); _0x5d8c3c[_0x8e5972(0x672)](_0x8e5972(0x8d8), () => { const _0x50512f = _0x8e5972; _0x1d2a6a[_0x50512f(0x22c)] = !![], _0x41e199(); }), _0x5d8c3c[_0x8e5972(0x672)]('pause', () => { const _0x12ff63 = _0x8e5972; if ('NKEpX' !== 'NKEpX') { const _0x2bc7cf = _0x3877de[_0x12ff63(0x94d)]('music-widget-card'), _0x5616e5 = _0x160ee4[_0x12ff63(0x94d)](_0x12ff63(0x441)), _0x4697f9 = _0xe47646[_0x12ff63(0x94d)](_0x12ff63(0x4bb)), _0x34cc6e = _0x31fdd8[_0x12ff63(0x94d)](_0x12ff63(0x7f0)), _0x52ae1a = _0xefab58; _0x52ae1a && _0x52ae1a['isFromLibrary'] ? (_0x5616e5[_0x12ff63(0x724)] = _0x52ae1a[_0x12ff63(0x443)], _0x4697f9['textContent'] = _0x52ae1a[_0x12ff63(0xa2c)], _0x2bc7cf[_0x12ff63(0xa47)][_0x12ff63(0x5ee)](_0x12ff63(0x4ad)), _0x2bc7cf[_0x12ff63(0x7be)][_0x12ff63(0x318)](_0x12ff63(0x292), 'url(' + _0x52ae1a[_0x12ff63(0x9a7)] + ')')) : (_0x5616e5[_0x12ff63(0x724)] = _0x12ff63(0x2e0), _0x4697f9[_0x12ff63(0x724)] = _0x12ff63(0xbef), _0x2bc7cf['classList'][_0x12ff63(0x8f0)](_0x12ff63(0x4ad)), _0x34cc6e[_0x12ff63(0x7be)][_0x12ff63(0x318)](_0x12ff63(0x292), _0x12ff63(0x546))); } else _0x1d2a6a[_0x12ff63(0x22c)] = ![], _0x41e199(); }), _0x5d8c3c[_0x8e5972(0x672)]('ended', () => { const _0x143b3a = _0x8e5972; if (_0x143b3a(0x479) !== _0x143b3a(0x479)) { const _0x3ec355 = _0x284cd0[_0x143b3a(0x267)](); _0x3ec355['onsuccess'] = () => _0x4c36e4(_0x3ec355[_0x143b3a(0xa75)]), _0x3ec355[_0x143b3a(0x2b0)] = () => _0x494519(_0x3ec355[_0x143b3a(0x1be)]); } else { if (_0x55e980) _0x55e980[_0x143b3a(0xc5e)](); } }); function _0x195014() { const _0x1e13bc = _0x8e5972, _0x44d907 = _0x3f5192(); if (!_0x44d907) return; _0x587469[_0x1e13bc(0x806)] = '', _0x31bac3['value'] = '', _0x44d907['type'] === _0x1e13bc(0x8aa) ? _0x1e13bc(0x6dc) === _0x1e13bc(0x7c8) ? (_0x50c539[_0x1e13bc(0x41a)] = '', _0x2db464[_0x1e13bc(0x724)] = _0x1e13bc(0x22d), _0x545b4d[_0x1e13bc(0x41a)] = _0x1e13bc(0x66e) + (_0x542ca0[_0x1e13bc(0x1bc)]['length'] + 0x1), _0x45948c['value'] = '', _0x380504[_0x1e13bc(0x41a)] = _0x1e13bc(0x8cd), _0x39a6c1[_0x1e13bc(0x94d)](_0x1e13bc(0x554))[_0x1e13bc(0x41a)] = '', _0x1919ec[_0x1e13bc(0x41a)] = '', _0x4d05cb['value'] = '') : (_0x44d907[_0x1e13bc(0x182)]['forEach'](_0x221bdd => { const _0x553f0c = _0x1e13bc; if (_0x553f0c(0x7f6) === _0x553f0c(0xb33)) _0x526a93[_0x553f0c(0x7be)]['display'] = _0x553f0c(0x26d), _0x118ffb[_0x553f0c(0x7be)]['display'] = _0x553f0c(0x546), _0x176e48(() => { const _0x76a218 = _0x553f0c, _0x105455 = _0x26cb92['querySelector'](_0x76a218(0x779)); _0x105455 ? _0x105455[_0x76a218(0x7fb)]({ 'behavior': 'auto', 'block': _0x76a218(0x659) }) : _0x1c956a['scrollTop'] = _0x20011e[_0x76a218(0x227)]; }, 0x32); else { const _0x1298a9 = _0x5964f7(_0x221bdd); if (_0x1298a9) { if (_0x553f0c(0x354) === _0x553f0c(0x9e5)) _0x422acb = _0x32246a[_0x553f0c(0x182)][0x0]; else { const _0x18d763 = document[_0x553f0c(0x2fa)](_0x553f0c(0x2e4)); _0x18d763[_0x553f0c(0x41a)] = _0x1298a9['id'], _0x18d763['textContent'] = _0x1298a9[_0x553f0c(0x7e6)], _0x587469[_0x553f0c(0xc15)](_0x18d763); } } } }), _0x581f64[_0x1e13bc(0x7be)][_0x1e13bc(0x180)] = _0x1e13bc(0x26d)) : _0x581f64[_0x1e13bc(0x7be)][_0x1e13bc(0x180)] = _0x1e13bc(0x546), _0x3d6082[_0x1e13bc(0xa47)]['add'](_0x1e13bc(0x7dd)), _0x31bac3[_0x1e13bc(0x75e)](); } function _0x3355ae() { const _0x2eeb79 = _0x8e5972, _0x35e0b8 = parseFloat(_0x31bac3[_0x2eeb79(0x41a)]); if (isNaN(_0x35e0b8) || _0x35e0b8 <= 0x0) { _0x5294eb(_0x2eeb79(0x391)); return; } const _0x3ee0da = _0x3f5192(); let _0x490857 = null; _0x3ee0da[_0x2eeb79(0x832)] === _0x2eeb79(0x8aa) ? _0x490857 = _0x587469[_0x2eeb79(0x41a)] : _0x2eeb79(0x749) !== 'vzdVv' ? _0xba14a2[_0x2eeb79(0x83e)](_0x5333a3 => { const _0x1e5fff = _0x2eeb79, _0x156235 = _0x5333a3[_0x1e5fff(0xa79)] === _0x1e5fff(0x322), _0x448272 = _0x156235 ? _0x286145 ? _0x53d083[0x0] : '?' : _0x8cef2d ? _0x3e6670[0x0] : '?'; _0x1ec6c6 += _0x1e5fff(0xc0c) + (_0x156235 ? 'user' : 'ai') + _0x1e5fff(0x40e) + (!_0x156235 ? _0x1e5fff(0x6d4) + _0x448272 + _0x1e5fff(0x2d6) : '') + _0x1e5fff(0xb49) + (_0x156235 ? _0x1e5fff(0xadb) : 'ai') + _0x1e5fff(0x209) + _0x5333a3[_0x1e5fff(0x415)] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x156235 ? _0x1e5fff(0x6d4) + _0x448272 + _0x1e5fff(0x2d6) : '') + _0x1e5fff(0xb13); }) : _0x490857 = _0x3ee0da[_0x2eeb79(0x182)][0x0]; const _0x42f297 = _0x43b50c(_0x3ee0da['id']), _0x39931 = { 'role': _0x2eeb79(0xadb), 'type': _0x2eeb79(0xc3a), 'content': _0x2eeb79(0x199) + (_0x5964f7(_0x490857)?.[_0x2eeb79(0x7e6)] || '未知') + _0x2eeb79(0xa00) + _0x35e0b8 + ']', 'amount': _0x35e0b8, 'recipientId': _0x490857, 'senderId': _0x42f297['id'], 'timestamp': Date[_0x2eeb79(0x4b7)]() }; _0x1d2a6a['conversationHistory'][_0x2eeb79(0x8b0)](_0x39931), _0x596ec3(), _0x2784f3(), _0x3d6082[_0x2eeb79(0xa47)][_0x2eeb79(0x8f0)](_0x2eeb79(0x7dd)); } async function _0x286605(_0x1202e6) { const _0x4b0a7e = _0x8e5972, _0x283620 = _0x5964f7(_0x1202e6); if (!_0x283620) return; const _0x42e426 = await _0x2f43da(_0x4b0a7e(0x5ab) + _0x283620[_0x4b0a7e(0x7e6)] + '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。'); if (!_0x42e426) return; const _0x2c735d = _0x1d2a6a[_0x4b0a7e(0x82b)][_0x4b0a7e(0x53e)](_0x4b5f4c => _0x4b5f4c[_0x4b0a7e(0x835)] === _0x1202e6); _0x2c735d > -0x1 ? (_0x1d2a6a[_0x4b0a7e(0x82b)][_0x4b0a7e(0xa95)](_0x2c735d, 0x1), _0x4b4b09(), _0x2d1e61(), _0x5294eb('【' + _0x283620[_0x4b0a7e(0x7e6)] + _0x4b0a7e(0x6c8))) : _0x5294eb(_0x4b0a7e(0xacb)); } function _0x222b7f() { const _0x3c3964 = _0x8e5972, _0x36a460 = document[_0x3c3964(0x94d)](_0x3c3964(0xb3a)); _0x36a460[_0x3c3964(0x806)] = ''; const _0x4bed8f = _0x1d2a6a['characters']['filter'](_0x2b0f74 => _0x1d2a6a[_0x3c3964(0x816)][_0x3c3964(0x870)](_0x54f0c9 => _0x54f0c9[_0x3c3964(0x832)] === _0x3c3964(0x5ac) && _0x54f0c9['participantIds']['includes'](_0x2b0f74['id']))); if (_0x4bed8f['length'] === 0x0) { if (_0x3c3964(0x3e4) === 'LfYog') { _0x36a460[_0x3c3964(0x806)] = _0x3c3964(0x26f); return; } else return _0x3b7ef7(new _0x4eac25('哼，这不是图片，你想让我压缩什么？')); } _0x4bed8f[_0x3c3964(0x83e)](_0x4d1c3b => { const _0x2e4c2a = _0x3c3964, _0x187321 = document[_0x2e4c2a(0x2fa)]('li'); _0x187321[_0x2e4c2a(0x1ea)] = _0x2e4c2a(0x4e3), _0x187321['dataset'][_0x2e4c2a(0xbec)] = _0x4d1c3b['id'], _0x187321[_0x2e4c2a(0x806)] = _0x2e4c2a(0x194) + (_0x4d1c3b[_0x2e4c2a(0x7a4)] || _0x133533) + _0x2e4c2a(0x72d) + _0x4d1c3b[_0x2e4c2a(0x7e6)] + _0x2e4c2a(0x2b8) + _0x4d1c3b[_0x2e4c2a(0x7e6)] + _0x2e4c2a(0x8ff), _0x187321['querySelector'](_0x2e4c2a(0x657))['addEventListener'](_0x2e4c2a(0xc5e), () => _0x31ee08(_0x4d1c3b['id'])), _0x187321['querySelector'](_0x2e4c2a(0xa99))[_0x2e4c2a(0x672)](_0x2e4c2a(0xc5e), async _0x46ae36 => { const _0x274135 = _0x2e4c2a; _0x46ae36[_0x274135(0x596)](); const _0x22e41c = _0x5964f7(_0x4d1c3b['id']); if (!_0x22e41c) return; const _0x1ebe23 = await _0x2f43da(_0x274135(0x522) + _0x22e41c[_0x274135(0x7e6)] + '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。'); if (_0x1ebe23) { _0xea506e(!![], _0x274135(0x3b1) + _0x22e41c[_0x274135(0x7e6)] + _0x274135(0x3a0)); const _0x2fd1e1 = [_0x274135(0x49f), _0x274135(0x7f7), 'abyss', _0x274135(0xaa4), _0x274135(0x629), _0x274135(0x691), 'footprints', _0x274135(0x376)]; for (const _0x5722dc of _0x2fd1e1) { if (_0x274135(0x612) === _0x274135(0x432)) _0x5967e1[_0x274135(0xc15)](_0x5aaa1e), _0x26dc00[_0x274135(0xc15)](_0x353b6c); else { const _0x127b7f = _0x274135(0x69d) + _0x22e41c['id'] + '_' + _0x5722dc; await _0x1e431a(_0x127b7f); } } _0xea506e(![]), _0x5294eb('【' + _0x22e41c[_0x274135(0x7e6)] + _0x274135(0x78a)); } }), _0x36a460['appendChild'](_0x187321); }); } let _0x58e628 = null, _0x444b5d = null; function _0x9a1e15() { const _0x171cab = _0x8e5972, _0x2a6add = new Date(), _0x5028cf = document[_0x171cab(0x94d)](_0x171cab(0x913)), _0x256548 = document[_0x171cab(0x94d)](_0x171cab(0x9f1)), _0x3f2c83 = document[_0x171cab(0x94d)](_0x171cab(0xae3)); _0x5028cf && _0x256548 && (_0x171cab(0x7e7) !== 'XsxIP' ? _0x11fcef[_0x171cab(0x7be)][_0x171cab(0x401)] = '0' : (_0x5028cf['textContent'] = _0x2a6add[_0x171cab(0x28e)](_0x171cab(0x4cf), { 'hour': _0x171cab(0x5d1), 'minute': _0x171cab(0x5d1), 'hour12': ![] }), _0x256548[_0x171cab(0x724)] = _0x2a6add[_0x171cab(0x6cd)](_0x171cab(0x4cf), { 'month': _0x171cab(0x3bd), 'day': _0x171cab(0x923), 'weekday': _0x171cab(0x3bd) }))), _0x3f2c83 && (_0x3f2c83[_0x171cab(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x2a6add['toLocaleTimeString'](_0x171cab(0x4cf), { 'hour': _0x171cab(0x5d1), 'minute': _0x171cab(0x5d1), 'hour12': ![] }) + _0x171cab(0x2df)); } function _0x31ee08(_0x31f90a) { const _0x53f000 = _0x8e5972; _0x58e628 = _0x31f90a; const _0x39594b = _0x5964f7(_0x31f90a); if (!_0x39594b) return; const _0x3dfc6d = document[_0x53f000(0x94d)](_0x53f000(0x745)), _0x461203 = document[_0x53f000(0x94d)](_0x53f000(0x704)); if (_0x461203) _0x461203[_0x53f000(0x8f0)](); const _0x381fde = document[_0x53f000(0x94d)](_0x53f000(0x876)); if (_0x381fde) _0x381fde[_0x53f000(0x8f0)](); _0x3dfc6d['insertAdjacentHTML'](_0x53f000(0x440), _0x53f000(0x2da)), _0x3dfc6d[_0x53f000(0x1c4)](_0x53f000(0x440), _0x53f000(0x784)), document[_0x53f000(0x94d)](_0x53f000(0x891))[_0x53f000(0x724)] = '', _0x3de326(); if (_0x444b5d) clearInterval(_0x444b5d); _0x9a1e15(), _0x444b5d = setInterval(_0x9a1e15, 0x2710), _0x40b080('snoopPhone', _0x53f000(0xb22)); } function _0x3de326() { const _0x366a61 = _0x8e5972, _0x35c177 = document[_0x366a61(0x94d)](_0x366a61(0xb00)), _0x18920f = document['getElementById'](_0x366a61(0x876)); _0x35c177[_0x366a61(0x806)] = _0x366a61(0x8f5), _0x18920f[_0x366a61(0x806)] = ''; const _0x376acc = _0x35c177[_0x366a61(0x20e)](_0x366a61(0x5c0)), _0x2c765f = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x366a61(0x36c), 'area': _0x366a61(0x8f6) }, { 'id': _0x366a61(0x9f4), 'name': '浏览器', 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': _0x366a61(0x8f6) }, { 'id': _0x366a61(0x49f), 'name': '相册', 'svg': _0x366a61(0x57a), 'area': _0x366a61(0x8f6) }, { 'id': _0x366a61(0x376), 'name': '总结', 'svg': _0x366a61(0x2f6), 'area': _0x366a61(0x8f6) }, { 'id': _0x366a61(0xaa4), 'name': _0x366a61(0x781), 'svg': _0x366a61(0x326), 'area': 'main' }, { 'id': _0x366a61(0x629), 'name': '外卖', 'svg': _0x366a61(0xc6c), 'area': _0x366a61(0x1df) }, { 'id': 'wants', 'name': '购物', 'svg': _0x366a61(0x775), 'area': _0x366a61(0x1df) }, { 'id': 'footprints', 'name': '足迹', 'svg': _0x366a61(0x520), 'area': _0x366a61(0x1df) }]; _0x2c765f[_0x366a61(0x83e)](_0x19e398 => { const _0x2ea360 = _0x366a61, _0x4ef83c = document[_0x2ea360(0x2fa)]('div'); _0x4ef83c[_0x2ea360(0x1ea)] = 'snoop-app-icon', _0x4ef83c[_0x2ea360(0x806)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x19e398[_0x2ea360(0x994)] + _0x2ea360(0x857) + _0x19e398[_0x2ea360(0x7e6)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x4ef83c[_0x2ea360(0x672)]('click', () => _0x9c79bc(_0x19e398['id'], _0x19e398[_0x2ea360(0x7e6)])), _0x19e398[_0x2ea360(0x945)] === _0x2ea360(0x8f6) ? _0x18920f['appendChild'](_0x4ef83c) : _0x376acc['appendChild'](_0x4ef83c); }); } document['getElementById'](_0x8e5972(0xadc))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x3a3506 = _0x8e5972; if (_0x3a3506(0xc2e) !== _0x3a3506(0xbfb)) { if (_0x444b5d) { if ('EilsW' !== _0x3a3506(0xab4)) clearInterval(_0x444b5d), _0x444b5d = null; else throw new _0x359b15(_0x3a3506(0x492)); } document[_0x3a3506(0x94d)]('snoop-app-view-container')[_0x3a3506(0x7be)][_0x3a3506(0x180)] = _0x3a3506(0x546); const _0x7d2bc8 = document[_0x3a3506(0x94d)](_0x3a3506(0x876)); if (_0x7d2bc8) _0x7d2bc8[_0x3a3506(0x8f0)](); const _0x4fd71c = document[_0x3a3506(0x94d)](_0x3a3506(0x704)); if (_0x4fd71c) _0x4fd71c[_0x3a3506(0x8f0)](); _0x40b080('snoopList', _0x3a3506(0x99c)); } else _0x2d7e40 = {}; }); async function _0x9c79bc(_0x474052, _0x2f8296, _0x5e1e89 = ![]) { const _0x26ab3e = _0x8e5972; if ('CrDYT' !== _0x26ab3e(0x319)) { document[_0x26ab3e(0x94d)](_0x26ab3e(0x4a6))[_0x26ab3e(0x7be)][_0x26ab3e(0x180)] = _0x26ab3e(0x546); const _0x360133 = document[_0x26ab3e(0x94d)]('snoop-app-view-container'); _0x360133[_0x26ab3e(0x806)] = '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', _0x360133[_0x26ab3e(0x7be)][_0x26ab3e(0x180)] = 'flex'; const _0x1a54a5 = 'snoop_' + _0x58e628 + '_' + _0x474052; try { if (_0x474052 === _0x26ab3e(0x376)) { if (_0x26ab3e(0x751) !== _0x26ab3e(0x532)) { const _0x56a533 = await _0x1f12ba(_0x58e628); _0x507233(_0x474052, _0x2f8296, _0x56a533); return; } else { const _0x5db326 = _0x17ed8d[_0x26ab3e(0x415)] ? '\x20' + _0x3c117f[_0x26ab3e(0x415)] : ''; _0x193aee[_0x26ab3e(0x8b0)]('[' + _0x15f3a8(_0x838b00) + _0x26ab3e(0xac5) + _0x5db326); } } let _0x3312bd = await _0x1a97c4(_0x1a54a5); if (_0x5e1e89 || !_0x3312bd) { console[_0x26ab3e(0x668)]('请求AI更新:\x20' + _0x1a54a5 + '...'); let _0x2a9b88 = await _0x205349(_0x474052, _0x58e628, _0x3312bd); if (_0x2a9b88) { if (_0x26ab3e(0x97e) !== _0x26ab3e(0x291)) { const _0x4ec371 = _0x2a9b88[_0x26ab3e(0x5f9)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x2b5492 = _0x4ec371 ? _0x4ec371[0x1][_0x26ab3e(0x667)]() : _0x2a9b88[_0x26ab3e(0x667)](); let _0x33c5a6; try { 'CjzPi' !== _0x26ab3e(0xabc) ? _0x33c5a6 = JSON[_0x26ab3e(0xac1)](_0x2b5492) : _0x332fab += _0x26ab3e(0x2f2); } catch (_0x101c82) { _0x33c5a6 = _0x120ca2(_0x2b5492); if (!_0x33c5a6) throw new Error(_0x26ab3e(0x3eb)); } const _0x5f39c0 = JSON[_0x26ab3e(0x838)](_0x33c5a6); console[_0x26ab3e(0x668)]('Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。'), await _0x574cb8(_0x1a54a5, _0x5f39c0), _0x3312bd = _0x5f39c0; } else _0x34f7f4[_0x26ab3e(0x971)] = ![]; } } else _0x26ab3e(0x9f7) !== 'gElte' ? console[_0x26ab3e(0x668)](_0x26ab3e(0x425) + _0x1a54a5) : (_0x45f0e7[_0x26ab3e(0x91c)] = _0x5e0dfa, _0x1e26f0(_0x3f2594[_0x26ab3e(0xc2c)], 'normal')); _0x507233(_0x474052, _0x2f8296, _0x3312bd); } catch (_0x1bf85c) { console[_0x26ab3e(0x1be)]('加载\x20' + _0x2f8296 + _0x26ab3e(0x27e), _0x1bf85c), _0x360133[_0x26ab3e(0x806)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x1bf85c[_0x26ab3e(0x6da)] + _0x26ab3e(0xb7d); } } else _0x494d66['friendCircles'] = _0x5b1037['friendCircles'][_0x26ab3e(0x564)](_0x568ed9 => _0x568ed9['id'] !== _0x586fd5), _0x2aba13[_0x26ab3e(0x474)] === _0x2ac82c && (_0x2c5236[_0x26ab3e(0x474)] = null), _0x32155d(), _0x61461a(_0x26ab3e(0x7f9)), _0x5d1d90(), _0x3143a4(_0x26ab3e(0x3df), 'friendCircleEdit'); } function _0x507233(_0x56e9f9, _0x1d3543, _0x276b31) { const _0x1e05c1 = _0x8e5972; if (_0x1e05c1(0x52e) === _0x1e05c1(0x7ae)) _0x43366b = _0x46da25[_0x1e05c1(0xa9b)] ? _0x3b802b[_0x1e05c1(0xa9b)][0x0]['clientY'] : _0x177e83[_0x1e05c1(0x854)], _0x11eb84 = 0x0, _0x39b698[_0x1e05c1(0x7be)][_0x1e05c1(0x9cb)] = 'none', _0x1fd7ef = !![], _0xee8cc4[_0x1e05c1(0x832)] === _0x1e05c1(0x869) && (_0x421713[_0x1e05c1(0x672)](_0x1e05c1(0x45f), _0x20627b), _0xa1edcc['addEventListener']('mouseup', _0x183547)); else { const _0x2db879 = _0x5964f7(_0x58e628), _0x525d02 = document[_0x1e05c1(0x94d)](_0x1e05c1(0x702)); let _0x38c5a9 = ''; if (!_0x276b31) 'oDiEd' !== _0x1e05c1(0xb26) ? _0x38c5a9 = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>' : _0x4ef4fe(_0x5b0825['id'], _0x2afb64['map'](_0x2c0723 => _0x2c0723['id'])); else { if (_0x56e9f9 === _0x1e05c1(0x376)) _0x38c5a9 = _0x1e05c1(0x43c) + _0x276b31 + _0x1e05c1(0x93b); else { if (_0x1e05c1(0x676) === _0x1e05c1(0x676)) try { let _0x5eab54 = null; const _0x33e1ce = _0x276b31['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x25fa21 = _0x33e1ce ? _0x33e1ce[0x1]['trim']() : _0x276b31[_0x1e05c1(0x667)](); try { _0x5eab54 = JSON['parse'](_0x25fa21); } catch (_0x3bf76b) { console[_0x1e05c1(0x594)](_0x1e05c1(0x86c), _0x3bf76b[_0x1e05c1(0x6da)]); try { _0x5eab54 = _0x120ca2(_0x25fa21); if (!_0x5eab54) { if (_0x1e05c1(0xa28) !== _0x1e05c1(0x92b)) throw new Error(_0x1e05c1(0xbe8)); else _0x4f3c57('home', _0x1e05c1(0xa68)); } console['log'](_0x1e05c1(0x2f5)); } catch (_0x2c3dcf) { throw _0x3bf76b; } } switch (_0x56e9f9) { case _0x1e05c1(0x49f): _0x38c5a9 = _0x1381f4(_0x5eab54); break; case 'whispers': _0x38c5a9 = _0x672ea8(_0x5eab54, _0x2db879['name']); break; case _0x1e05c1(0x9f4): _0x38c5a9 = _0x12d3a3(_0x5eab54); break; case 'fragments': _0x38c5a9 = _0x5cfb64(_0x5eab54); break; case _0x1e05c1(0x629): _0x38c5a9 = _0x17ee93(_0x5eab54); break; case _0x1e05c1(0x691): _0x38c5a9 = _0x213161(_0x5eab54); break; case 'footprints': _0x38c5a9 = _0x47c546(_0x5eab54); break; default: _0x38c5a9 = _0x1e05c1(0xc61) + JSON[_0x1e05c1(0x838)](_0x5eab54, null, 0x2) + '</pre>'; } } catch (_0x557e66) { if (_0x1e05c1(0x9b7) === 'eekkz') { const _0x5c6bdf = { 'id': _0x5ef2fa['id'], 'url': _0x59d83b[_0x1e05c1(0x324)] }; _0x1b45b0(this, _0x5c6bdf); } else console[_0x1e05c1(0x1be)](_0x1e05c1(0x8ca), _0x557e66), _0x38c5a9 = _0x1e05c1(0x7e9) + _0x276b31 + _0x1e05c1(0x306); } else { if (_0x41fe13 < 0x0 || _0x26cc25 >= _0x2dbdd0[_0x1e05c1(0x2ab)]) return; _0x5ab376 = _0x5c142f; const _0x22acd3 = _0x23192f[_0x55554c]; _0x2a32fd[_0x1e05c1(0x802)] = _0x22acd3[_0x1e05c1(0x324)] || _0x22acd3[_0x1e05c1(0x42a)], _0xd574fb[_0x1e05c1(0x8d8)](), _0x569e0e(), _0xeb2b93(); } } } _0x525d02[_0x1e05c1(0x806)] = _0x1e05c1(0x805) + _0x1d3543 + _0x1e05c1(0xbdc) + _0x2db879[_0x1e05c1(0x7e6)] + '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x56e9f9 === _0x1e05c1(0x376) ? _0x1e05c1(0x992) : _0x1e05c1(0x1cd)) + _0x1e05c1(0x7db) + _0x38c5a9 + _0x1e05c1(0x21c); const _0x3da38c = _0x525d02['querySelector'](_0x1e05c1(0xb45)); _0x56e9f9 === 'summary' && (_0x1e05c1(0x4d4) === _0x1e05c1(0x4d4) ? _0x3da38c[_0x1e05c1(0x7be)][_0x1e05c1(0x401)] = '0' : (_0x3a876f['activeListenSession'] = null, _0x269477(), _0x13cf4a(_0x1e05c1(0x261)), _0x1f3711(), _0x363f0f[_0x1e05c1(0xa47)]['remove']('show'), _0x48a01d(() => _0xbc27fa[_0x1e05c1(0x7be)][_0x1e05c1(0x180)] = _0x1e05c1(0x546), 0x12c))); document[_0x1e05c1(0x94d)](_0x1e05c1(0xa13))['addEventListener'](_0x1e05c1(0xc5e), () => { const _0xd0dccf = _0x1e05c1; _0xd0dccf(0x208) === 'tQdmt' ? (_0x54ef20[_0xd0dccf(0x94d)](_0xd0dccf(0x2a4) + _0x3e732f + '-preview')[_0xd0dccf(0x7be)][_0xd0dccf(0x4d7)] = '', _0x434586[_0xd0dccf(0x94d)](_0xd0dccf(0x2a4) + _0x4c03f9 + _0xd0dccf(0xad2))['value'] = '') : (_0x525d02[_0xd0dccf(0x7be)][_0xd0dccf(0x180)] = _0xd0dccf(0x546), document['getElementById']('snoop-phone-top-nav')[_0xd0dccf(0x7be)][_0xd0dccf(0x180)] = 'flex'); }); if (_0x56e9f9 === _0x1e05c1(0x376)) { if (_0x1e05c1(0xa25) === _0x1e05c1(0x7ed)) { const _0x84308b = _0x49dd4f[_0x1e05c1(0xb46)]['filter'](_0x3e626b => _0x3e626b[_0x1e05c1(0x732)] === _0x1e05c1(0xadb))[_0x1e05c1(0x4d8)](); _0x84308b && (_0x47cfbd = _0x84308b[_0x1e05c1(0x415)]); } else document['getElementById'](_0x1e05c1(0x20f))['addEventListener']('click', () => { const _0x1ecbab = _0x1e05c1; if (_0x1ecbab(0x298) !== _0x1ecbab(0x298)) { _0x19ed53(_0x1ecbab(0x6b8)); return; } else { const _0x4ecc06 = document[_0x1ecbab(0x94d)]('snoop-summary-textarea'); _0x4ecc06[_0x1ecbab(0x33c)](), document['execCommand'](_0x1ecbab(0x4cd)), _0x5294eb(_0x1ecbab(0x3f7)); } }); } else document[_0x1e05c1(0x94d)](_0x1e05c1(0x4e7))[_0x1e05c1(0x672)]('click', async () => { _0x9c79bc(_0x56e9f9, _0x1d3543, !![]); }); _0x56e9f9 === 'whispers' && (_0x1e05c1(0x7c6) !== _0x1e05c1(0xafb) ? _0x525d02['querySelectorAll']('.snoop-chat-item')[_0x1e05c1(0x83e)](_0x4ed725 => { const _0x5e6830 = _0x1e05c1; _0x4ed725['addEventListener'](_0x5e6830(0xc5e), () => { const _0x405d2f = _0x5e6830; if (_0x405d2f(0x826) === 'jERoq') _0x3d3b17(_0x301c5f, -0x1), _0x1e921a[_0x405d2f(0xa4f)] = _0x1c0840['scrollHeight']; else { const _0x4c72ba = JSON['parse'](_0x4ed725[_0x405d2f(0xaac)][_0x405d2f(0x668)]['replace'](/&quot;/g, '\x22')), _0x47dd87 = _0x4ed725[_0x405d2f(0xaac)][_0x405d2f(0x231)], _0x3ddab5 = _0x4ed725[_0x405d2f(0xaac)][_0x405d2f(0x8fa)]; _0x2fc9a9(_0x47dd87, _0x3ddab5, _0x4c72ba); } }); }) : (_0x5a6c3c[_0x1e05c1(0x8f0)](), _0x29c9f9())); } } function _0x120ca2(_0x12bccf) { const _0x15f1e0 = _0x8e5972; if (!_0x12bccf || typeof _0x12bccf !== _0x15f1e0(0x3e9)) return null; const _0x12cbf7 = _0x12bccf[_0x15f1e0(0x667)]()['split']('\x0a'), _0x72d7bc = []; let _0x1da553 = null; for (const _0x2dfe76 of _0x12cbf7) { const _0x24ae0d = _0x2dfe76[_0x15f1e0(0x667)](); if (_0x24ae0d[_0x15f1e0(0x3c5)]('-\x20')) { _0x1da553 && _0x72d7bc[_0x15f1e0(0x8b0)](_0x1da553); _0x1da553 = {}; const _0x45c625 = _0x24ae0d['substring'](0x2), _0x9371a1 = _0x45c625['split'](/:\s(.+)/); if (_0x9371a1[_0x15f1e0(0x2ab)] > 0x1) { if (_0x15f1e0(0xb9a) !== _0x15f1e0(0x830)) { const _0x2575dd = _0x9371a1[0x0][_0x15f1e0(0x667)](), _0x1fb371 = _0x9371a1[0x1][_0x15f1e0(0x667)]()['replace'](/^"|"$/g, ''); _0x1da553[_0x2575dd] = _0x1fb371; } else { const _0x40b0d0 = _0x4a6ed3[_0x15f1e0(0x345)][_0x423999[_0x15f1e0(0x4dd)]], _0x5f4c55 = _0x2d1714[_0x15f1e0(0x22c)]; _0x58993e(), _0x3470a0(); const _0x4d1200 = _0x38136f[_0x15f1e0(0x599)](_0x15f1e0(0x196)); _0x4d1200[_0x15f1e0(0x83e)](_0x35299a => { const _0x5abf83 = _0x15f1e0, _0x229ca8 = _0x35299a['dataset']['musicId'], _0xf3f9e = _0x35299a[_0x5abf83(0x20e)](_0x5abf83(0x4a3)); if (!_0xf3f9e) return; _0x40b0d0 && _0x229ca8 === _0x40b0d0['id'] && _0x5f4c55 ? _0xf3f9e['textContent'] = '❚❚' : _0xf3f9e[_0x5abf83(0x724)] = '▶'; }); } } } else { if (_0x1da553 && _0x24ae0d) { const _0x3e251a = _0x24ae0d[_0x15f1e0(0xc21)](/:\s(.+)/); if (_0x3e251a[_0x15f1e0(0x2ab)] > 0x1) { if (_0x15f1e0(0x53b) === _0x15f1e0(0x53b)) { const _0x4c1ffc = _0x3e251a[0x0][_0x15f1e0(0x667)](), _0x8dcf61 = _0x3e251a[0x1][_0x15f1e0(0x667)]()['replace'](/^"|"$/g, ''); _0x1da553[_0x4c1ffc] = _0x8dcf61; } else _0xcaf4dc(_0x15f1e0(0x1f9)); } } } } return _0x1da553 && _0x72d7bc[_0x15f1e0(0x8b0)](_0x1da553), _0x72d7bc['length'] > 0x0 ? _0x72d7bc : null; } function _0x2fc9a9(_0x223351, _0x41d5bb, _0x2f84b2) { const _0x5adcf7 = _0x8e5972, _0x5dc6ea = document[_0x5adcf7(0x20e)](_0x5adcf7(0x84f)), _0x17daa3 = document[_0x5adcf7(0x20e)](_0x5adcf7(0x4cc)); let _0x5ee6af = _0x5adcf7(0x97a); !_0x2f84b2 || _0x2f84b2[_0x5adcf7(0x2ab)] === 0x0 ? _0x5ee6af += _0x5adcf7(0x84b) : 'mIsdU' !== 'mIsdU' ? (delete _0x2c34b1[_0x5adcf7(0x91c)], _0x59cf88(), _0x1fd544(_0x24b95b['id'], _0x5adcf7(0x8fe)), _0x1746c9('已恢复默认。'), _0x539d82(!![])) : _0x2f84b2[_0x5adcf7(0x83e)](_0x2c72fd => { const _0x6c9c2a = _0x5adcf7, _0x23977b = _0x2c72fd[_0x6c9c2a(0xa79)] === _0x6c9c2a(0x322), _0x3c97d7 = _0x23977b ? _0x41d5bb ? _0x41d5bb[0x0] : '?' : _0x223351 ? _0x223351[0x0] : '?'; _0x5ee6af += _0x6c9c2a(0xc0c) + (_0x23977b ? _0x6c9c2a(0xadb) : 'ai') + _0x6c9c2a(0x40e) + (!_0x23977b ? _0x6c9c2a(0x6d4) + _0x3c97d7 + _0x6c9c2a(0x2d6) : '') + _0x6c9c2a(0xb49) + (_0x23977b ? 'user' : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x2c72fd[_0x6c9c2a(0x415)] + _0x6c9c2a(0x1fb) + (_0x23977b ? _0x6c9c2a(0x6d4) + _0x3c97d7 + _0x6c9c2a(0x2d6) : '') + _0x6c9c2a(0xb13); }), _0x5ee6af += _0x5adcf7(0x2d6), _0x5dc6ea['innerHTML'] = _0x5ee6af, _0x5dc6ea['scrollTop'] = _0x5dc6ea[_0x5adcf7(0x227)], _0x17daa3[_0x5adcf7(0x806)] = _0x5adcf7(0x63d) + _0x223351 + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document[_0x5adcf7(0x94d)]('snoop-log-back-btn')[_0x5adcf7(0x672)](_0x5adcf7(0xc5e), () => { const _0x189e46 = _0x5adcf7; if (_0x189e46(0x308) === 'PyXun') { _0x85bee[_0x189e46(0x1be)](_0x189e46(0xaf6), _0x5a396e); const _0x1dff78 = { 'role': _0x189e46(0xb29), 'content': _0x189e46(0x26a) + _0xb69d3f[_0x189e46(0x6da)], 'senderId': _0x50e470['id'], 'isOffline': _0x4fbf8c }; _0x59621e[_0x189e46(0x5c7)][_0x189e46(0x8b0)](_0x1dff78), _0x412c30(); } else _0x9c79bc(_0x189e46(0x7f7), '聊天'); }), !document['getElementById'](_0x5adcf7(0x68f)) && document[_0x5adcf7(0x1d4)][_0x5adcf7(0x1c4)](_0x5adcf7(0x440), _0x5adcf7(0x88f)); } function _0x120ca2(_0x3ab671) { const _0x1bf2cc = _0x8e5972; if (!_0x3ab671 || typeof _0x3ab671 !== _0x1bf2cc(0x3e9)) return null; const _0x42f553 = _0x3ab671['trim']()[_0x1bf2cc(0xc21)]('\x0a'), _0x19f8be = []; let _0x8f3fb4 = null; for (const _0x57a734 of _0x42f553) { const _0x5c2933 = _0x57a734[_0x1bf2cc(0x667)](); if (_0x5c2933[_0x1bf2cc(0x3c5)]('-\x20')) { if (_0x8f3fb4) { if (_0x1bf2cc(0x83f) === _0x1bf2cc(0x83f)) _0x19f8be[_0x1bf2cc(0x8b0)](_0x8f3fb4); else { const _0x20454f = _0x1b506d[_0x1bf2cc(0x94d)](_0x1bf2cc(0x6f2)); if (!_0x20454f) return; _0x13fd38[_0x1bf2cc(0x2de)][_0x1bf2cc(0x5d9)] ? (_0x20454f[_0x1bf2cc(0x7be)][_0x1bf2cc(0x8e3)] = _0x1bf2cc(0x384), _0x20454f[_0x1bf2cc(0x7be)]['textShadow'] = _0x1bf2cc(0x27d)) : (_0x20454f[_0x1bf2cc(0x7be)][_0x1bf2cc(0x8e3)] = _0x1bf2cc(0x99f), _0x20454f[_0x1bf2cc(0x7be)][_0x1bf2cc(0x305)] = _0x1bf2cc(0x546)); } } _0x8f3fb4 = {}; const _0x2037b2 = _0x5c2933[_0x1bf2cc(0x9dd)](0x2), _0x5f0ef7 = _0x2037b2[_0x1bf2cc(0xc21)](/:\s(.+)/); if (_0x5f0ef7[_0x1bf2cc(0x2ab)] > 0x1) { if (_0x1bf2cc(0x94e) !== _0x1bf2cc(0x94e)) _0xed6681(_0x14c057['id']); else { const _0x5f5133 = _0x5f0ef7[0x0]['trim'](), _0x27b7fc = _0x5f0ef7[0x1]['trim']()[_0x1bf2cc(0x9ed)](/^"|"$/g, ''); _0x8f3fb4[_0x5f5133] = _0x27b7fc; } } } else { if (_0x8f3fb4 && _0x5c2933) { if (_0x1bf2cc(0x7b2) !== _0x1bf2cc(0x7e4)) { const _0x497b37 = _0x5c2933[_0x1bf2cc(0xc21)](/:\s(.+)/); if (_0x497b37[_0x1bf2cc(0x2ab)] > 0x1) { const _0x378e74 = _0x497b37[0x0]['trim'](), _0x4c0873 = _0x497b37[0x1][_0x1bf2cc(0x667)]()[_0x1bf2cc(0x9ed)](/^"|"$/g, ''); _0x8f3fb4[_0x378e74] = _0x4c0873; } } else _0x1c4299['value'] = ''; } } } return _0x8f3fb4 && _0x19f8be['push'](_0x8f3fb4), _0x19f8be[_0x1bf2cc(0x2ab)] > 0x0 ? _0x19f8be : null; } async function _0x1b021d(_0x3c7c58) { const _0x378f36 = _0x8e5972; if (!_0x3c7c58) return ''; const _0x37cb89 = [{ 'id': _0x378f36(0x49f), 'name': '相册' }, { 'id': _0x378f36(0x7f7), 'name': '和其他人的聊天' }, { 'id': _0x378f36(0x9f4), 'name': _0x378f36(0x7eb) }, { 'id': _0x378f36(0xaa4), 'name': _0x378f36(0x781) }, { 'id': _0x378f36(0x629), 'name': _0x378f36(0x646) }, { 'id': _0x378f36(0x691), 'name': '购物记录' }, { 'id': _0x378f36(0x47c), 'name': _0x378f36(0x8b9) }]; let _0x138f7f = ''; for (const _0x402c40 of _0x37cb89) { try { const _0x471c79 = _0x378f36(0x69d) + _0x3c7c58 + '_' + _0x402c40['id'], _0xceba68 = await _0x1a97c4(_0x471c79); if (_0xceba68) { const _0x50fdb3 = _0xceba68[_0x378f36(0x5f9)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x1cdfd5 = _0x50fdb3 ? _0x50fdb3[0x1]['trim']() : _0xceba68[_0x378f36(0x667)](); if (!_0x1cdfd5) continue; let _0x5657f9 = null; try { _0x5657f9 = JSON[_0x378f36(0xac1)](_0x1cdfd5); } catch (_0x395da6) { console[_0x378f36(0x594)]('JSON解析失败\x20(' + _0x402c40['id'] + ')，启动兼容模式...', _0x395da6[_0x378f36(0x6da)]); try { if (_0x378f36(0x30f) !== _0x378f36(0x6ae)) { _0x5657f9 = _0x120ca2(_0x1cdfd5); if (!_0x5657f9) { if (_0x378f36(0x7a1) === 'lHDMY') throw new Error(_0x378f36(0xbe8)); else { _0x178a19('已经生成了今日账单！想看就去“看账本”标签页。'); return; } } console[_0x378f36(0x668)](_0x378f36(0xa45) + _0x402c40['id'] + _0x378f36(0xc3d)); } else { const _0x1f38bc = _0x4fbe2c[_0x378f36(0x688)](), _0x1c9872 = _0x501e3e(_0x1cbb2a['getMonth']() + 0x1)['padStart'](0x2, '0'), _0xc8fa40 = _0x4024a4(_0x477358[_0x378f36(0x3fc)]())[_0x378f36(0x7d4)](0x2, '0'); return _0x1f38bc + '-' + _0x1c9872 + '-' + _0xc8fa40; } } catch (_0x2d835e) { throw _0x395da6; } } if (Array[_0x378f36(0x57e)](_0x5657f9) && _0x5657f9[_0x378f36(0x2ab)] > 0x0) { _0x138f7f === '' && (_0x378f36(0xa0d) !== _0x378f36(0x4c4) ? _0x138f7f += _0x378f36(0x642) : (_0x22f9f0[_0x378f36(0x724)] = _0x378f36(0x2e0), _0xcef6a6[_0x378f36(0x724)] = _0x378f36(0xbef), _0x27987a[_0x378f36(0xa47)][_0x378f36(0x8f0)](_0x378f36(0x4ad)), _0x2f6b31[_0x378f36(0x7be)]['setProperty'](_0x378f36(0x292), _0x378f36(0x546)))); _0x138f7f += _0x378f36(0x1e6) + _0x402c40[_0x378f36(0x7e6)] + '\x0a'; switch (_0x402c40['id']) { case 'gallery': _0x5657f9[_0x378f36(0x83e)](_0x4d15a4 => { const _0x57f17e = _0x378f36; _0x138f7f += _0x57f17e(0xac8) + _0x4d15a4[_0x57f17e(0x29f)] + _0x57f17e(0x652); }); break; case _0x378f36(0x7f7): _0x5657f9[_0x378f36(0x83e)](_0x5b6520 => { const _0x2d6ce7 = _0x378f36; _0x138f7f += _0x2d6ce7(0x222) + _0x5b6520[_0x2d6ce7(0x1a0)] + _0x2d6ce7(0x2db) + _0x5b6520[_0x2d6ce7(0xb94)] + _0x2d6ce7(0x652), _0x5b6520[_0x2d6ce7(0x668)] && Array['isArray'](_0x5b6520[_0x2d6ce7(0x668)]) && (_0x138f7f += '\x20\x20具体对话如下：\x0a', _0x5b6520['log'][_0x2d6ce7(0x83e)](_0x30c334 => { const _0x4b138a = _0x2d6ce7; if ('YBMwi' !== _0x4b138a(0x27c)) _0x5c35bc = _0x1bf87b[0x1]; else { const _0x39c65c = _0x30c334[_0x4b138a(0xa79)] === _0x4b138a(0x322) ? '你' : _0x5b6520[_0x4b138a(0x1a0)]; _0x138f7f += '\x20\x20\x20\x20-\x20' + _0x39c65c + ':\x20' + _0x30c334[_0x4b138a(0x415)] + '\x0a'; } })); }); break; case 'abyss': _0x5657f9['forEach'](_0x53d0cd => { const _0x23283d = _0x378f36; _0x138f7f += _0x23283d(0xabd) + _0x53d0cd['query'] + _0x23283d(0x652); }); break; case _0x378f36(0xaa4): _0x5657f9[_0x378f36(0x83e)](_0x36ca34 => { const _0x5a1d97 = _0x378f36; if (_0x5a1d97(0x2f0) !== 'toGvg') { _0x50cc49[_0x5a1d97(0x806)] = _0x5a1d97(0x26f); return; } else _0x138f7f += _0x5a1d97(0x58e) + _0x36ca34[_0x5a1d97(0x443)] + _0x5a1d97(0x184) + _0x36ca34[_0x5a1d97(0x415)][_0x5a1d97(0x9ed)](/\n/g, '\x20') + _0x5a1d97(0x652); }); break; case _0x378f36(0x629): _0x5657f9[_0x378f36(0x83e)](_0x2a4658 => { const _0x13a269 = _0x378f36; if (_0x13a269(0x348) === _0x13a269(0x348)) _0x138f7f += _0x13a269(0x709) + _0x2a4658[_0x13a269(0x818)] + '”，里面有\x20' + _0x2a4658['items'][_0x13a269(0x973)]('、') + '。\x0a'; else { const _0x1af5a5 = _0x500c2e[_0x13a269(0x267)](); _0x1af5a5[_0x13a269(0x33f)] = () => _0x95f2cd(_0x1af5a5[_0x13a269(0xa75)]), _0x1af5a5[_0x13a269(0x2b0)] = () => _0x3c7d1f(_0x1af5a5[_0x13a269(0x1be)]); } }); break; case _0x378f36(0x691): _0x5657f9[_0x378f36(0x83e)](_0x205ca2 => { const _0x1d69cd = _0x378f36; _0x138f7f += _0x1d69cd(0x59f) + _0x205ca2['store_name'] + _0x1d69cd(0x3f8) + _0x205ca2['item_name'] + _0x1d69cd(0x652); }); break; case _0x378f36(0x47c): _0x5657f9[_0x378f36(0x83e)](_0x351fbc => { const _0x27104a = _0x378f36; _0x138f7f += '-\x20你最近去过：“' + _0x351fbc[_0x27104a(0xaea)] + _0x27104a(0xa39) + _0x351fbc[_0x27104a(0x641)] + _0x27104a(0x652); }); break; default: _0x5657f9[_0x378f36(0x83e)](_0x44d9fe => { const _0x101ea1 = _0x378f36; if (_0x101ea1(0x705) !== _0x101ea1(0x2c0)) _0x138f7f += '-\x20' + JSON[_0x101ea1(0x838)](_0x44d9fe) + '\x0a'; else { const _0x556415 = _0x3971bd['userProfiles']['find'](_0x17b25d => _0x17b25d['id'] === _0xa4be7); if (!_0x556415) return; _0x186f17[_0x101ea1(0x94d)](_0x101ea1(0x625))[_0x101ea1(0x41a)] = _0x556415['id'], _0x11744a[_0x101ea1(0x94d)](_0x101ea1(0x22a))[_0x101ea1(0x724)] = _0x101ea1(0x365), _0x56db11['getElementById']('user-name')[_0x101ea1(0x41a)] = _0x556415[_0x101ea1(0x7e6)], _0x556415[_0x101ea1(0x7a4)] ? _0x590563[_0x101ea1(0x7be)][_0x101ea1(0x4d7)] = _0x101ea1(0x80f) + _0x556415['avatar'] + '\x27)' : _0x27673e['style'][_0x101ea1(0x4d7)] = _0x101ea1(0x80f) + _0x38dbcc + '\x27)', _0x328f2a[_0x101ea1(0x94d)](_0x101ea1(0x563))['value'] = _0x556415[_0x101ea1(0x647)], _0x5f209a[_0x101ea1(0x7be)][_0x101ea1(0x180)] = _0x556415['id'] === _0x281469[_0x101ea1(0xc02)] ? 'none' : _0x101ea1(0x26d), _0x2ab0a5[_0x101ea1(0x94d)](_0x101ea1(0x9e8))['style'][_0x101ea1(0x180)] = 'block'; } }); break; } } } } catch (_0x28bb18) { console[_0x378f36(0x1be)](_0x378f36(0x800) + _0x402c40['id'] + _0x378f36(0x7fa), _0x28bb18); } } return _0x138f7f; } function _0x1381f4(_0x24df20) { const _0x609d0a = _0x8e5972; _0x24df20['sort']((_0x263b49, _0x2a86ed) => new Date(_0x2a86ed[_0x609d0a(0x83c)]) - new Date(_0x263b49['timestamp'])); if (!Array[_0x609d0a(0x57e)](_0x24df20)) return '<p>格式错误</p>'; if (_0x24df20[_0x609d0a(0x2ab)] === 0x0) return _0x609d0a(0x483); return _0x609d0a(0x1c3) + _0x24df20[_0x609d0a(0x719)]((_0xdc4a14, _0x4cf179) => _0x609d0a(0xa17) + (_0x4cf179 < _0x24df20[_0x609d0a(0x2ab)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x609d0a(0x80a) + (_0xdc4a14['description'] || _0x609d0a(0x53f)) + _0x609d0a(0x3ec) + (_0xdc4a14[_0x609d0a(0x83c)] || '') + _0x609d0a(0xbd4))['join']('') + _0x609d0a(0x2d6); } function _0x672ea8(_0xe6fa2d, _0x5c9287) { const _0x5439c2 = _0x8e5972; if (!Array[_0x5439c2(0x57e)](_0xe6fa2d) || _0xe6fa2d['length'] === 0x0) return _0x5439c2(0x7cb); return _0x5439c2(0x1c3) + _0xe6fa2d[_0x5439c2(0x719)]((_0x2c5a17, _0x5037b6) => { const _0x1770a8 = _0x5439c2; if (_0x1770a8(0x75a) !== 'efGqU') _0xa9db77(), _0x543335['getElementById'](_0x1770a8(0xb9d))[_0x1770a8(0xa47)][_0x1770a8(0x8f0)](_0x1770a8(0x7dd)), _0x519189[_0x1770a8(0x94d)]('quote-preview-area')[_0x1770a8(0x7be)]['display'] = 'none', _0x288499(() => { _0x4a2a88(![]); }, 0x14); else { const _0x5d20de = JSON[_0x1770a8(0x838)](_0x2c5a17[_0x1770a8(0x668)] || [])['replace'](/'/g, _0x1770a8(0x3d4))[_0x1770a8(0x9ed)](/"/g, _0x1770a8(0xb78)), _0x3713de = _0x2c5a17[_0x1770a8(0x1a0)] || _0x1770a8(0x8a8); return _0x1770a8(0x31d) + (_0x5037b6 < _0xe6fa2d[_0x1770a8(0x2ab)] - 0x1 ? _0x1770a8(0x90e) : '') + _0x1770a8(0x951) + _0x5d20de + _0x1770a8(0x859) + _0x3713de + _0x1770a8(0xbb4) + _0x5c9287 + '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>' + _0x3713de[_0x1770a8(0xc32)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x3713de + _0x1770a8(0x84a) + (_0x2c5a17['last_message_preview'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } })[_0x5439c2(0x973)]('') + '</div>'; } function _0x12d3a3(_0x3d4aa6) { const _0x452b70 = _0x8e5972; if (!Array[_0x452b70(0x57e)](_0x3d4aa6)) return '<p>格式错误</p>'; if (_0x3d4aa6[_0x452b70(0x2ab)] === 0x0) return _0x452b70(0x4c7); return _0x3d4aa6[_0x452b70(0xa24)]((_0x1f0508, _0x1fcc27) => new Date(_0x1fcc27[_0x452b70(0x83c)]) - new Date(_0x1f0508['timestamp'])), '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x3d4aa6[_0x452b70(0x719)]((_0x4c75bf, _0x2c8096) => _0x452b70(0x200) + (_0x2c8096 < _0x3d4aa6[_0x452b70(0x2ab)] - 0x1 ? _0x452b70(0x90e) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + (_0x4c75bf[_0x452b70(0x85f)] || '未知搜索') + _0x452b70(0x374) + (_0x4c75bf[_0x452b70(0x7d8)] || _0x452b70(0x3c0)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>' + (_0x4c75bf[_0x452b70(0x83c)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x452b70(0x973)]('') + '</div>'; } function _0x5cfb64(_0x5c2a6c) { const _0x404f86 = _0x8e5972; if (_0x404f86(0x1c7) === _0x404f86(0x1c7)) { if (!Array[_0x404f86(0x57e)](_0x5c2a6c)) return _0x404f86(0x462); if (_0x5c2a6c[_0x404f86(0x2ab)] === 0x0) return _0x404f86(0x40f); return _0x5c2a6c[_0x404f86(0xa24)]((_0x463e95, _0x1e0e73) => new Date(_0x1e0e73[_0x404f86(0x81f)]) - new Date(_0x463e95['last_edited'])), _0x5c2a6c[_0x404f86(0x719)](_0x59add3 => _0x404f86(0x7e3) + (_0x59add3['title'] || _0x404f86(0x55e)) + _0x404f86(0xbbc) + (_0x59add3[_0x404f86(0x415)] || '') + _0x404f86(0xaf9) + (_0x59add3[_0x404f86(0x81f)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['join'](''); } else _0x2c4b99 = _0x49c7b4[_0x404f86(0x2fa)]('style'), _0x1ce4a7['id'] = _0x404f86(0x59c), _0x5bcd8b[_0x404f86(0x1d4)][_0x404f86(0xc15)](_0x33eca5); } function _0x17ee93(_0x4aa85e) { const _0x4092df = _0x8e5972; if (!Array[_0x4092df(0x57e)](_0x4aa85e)) return _0x4092df(0x462); if (_0x4aa85e[_0x4092df(0x2ab)] === 0x0) return _0x4092df(0x2b2); return _0x4aa85e['sort']((_0x5097da, _0x29edaf) => new Date(_0x29edaf[_0x4092df(0x83c)]) - new Date(_0x5097da[_0x4092df(0x83c)])), _0x4aa85e[_0x4092df(0x719)](_0x34d6ba => { const _0x1ab50e = _0x4092df; if ('cnwpe' === 'cnwpe') { const _0xf427a2 = (_0x34d6ba['items'] || [])[_0x1ab50e(0x719)](_0xa1c152 => _0x1ab50e(0x902) + _0xa1c152 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0x1ab50e(0x973)](''); return _0x1ab50e(0xc0e) + (_0x34d6ba[_0x1ab50e(0x818)] || _0x1ab50e(0x834)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x34d6ba[_0x1ab50e(0x83c)] || '') + _0x1ab50e(0x6be) + (_0x34d6ba['status'] || _0x1ab50e(0x875)) + _0x1ab50e(0xa43) + _0xf427a2 + _0x1ab50e(0x4f2) + (_0x34d6ba[_0x1ab50e(0x5e9)] || 0x0)[_0x1ab50e(0x3a8)](0x2) + _0x1ab50e(0x2a7); } else { const _0x54b049 = _0x2fb24b[_0x1ab50e(0x41a)]; _0x4ba754['style'][_0x1ab50e(0x318)](_0x1ab50e(0x700), _0x54b049), _0xd72f1b[_0x1ab50e(0x2ca)](_0x1ab50e(0x93f), _0x54b049); } })[_0x4092df(0x973)](''); } function _0x213161(_0x53d5f9) { const _0x137436 = _0x8e5972; if (!Array['isArray'](_0x53d5f9)) return _0x137436(0x462); if (_0x53d5f9[_0x137436(0x2ab)] === 0x0) return _0x137436(0xb02); return _0x53d5f9['sort']((_0x1ae8fd, _0x458154) => new Date(_0x458154[_0x137436(0x83c)]) - new Date(_0x1ae8fd[_0x137436(0x83c)])), _0x53d5f9[_0x137436(0x719)](_0x376286 => _0x137436(0xb2f) + (_0x376286['store_name'] || _0x137436(0x86a)) + _0x137436(0x6aa) + (_0x376286[_0x137436(0x83c)] || '') + _0x137436(0x3e7) + (_0x376286['item_name'] || _0x137436(0x72b)) + _0x137436(0x388) + (_0x376286[_0x137436(0x24e)] || 0x0)[_0x137436(0x3a8)](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')['join'](''); } function _0x47c546(_0x4fa668) { const _0x4eab8f = _0x8e5972; if ('XoKdV' !== _0x4eab8f(0x393)) { if (!Array[_0x4eab8f(0x57e)](_0x4fa668)) return _0x4eab8f(0x462); if (_0x4fa668[_0x4eab8f(0x2ab)] === 0x0) return _0x4eab8f(0x5c6); return _0x4fa668[_0x4eab8f(0xa24)]((_0x4ea53b, _0xe6a1f) => new Date(_0xe6a1f[_0x4eab8f(0x83c)]) - new Date(_0x4ea53b[_0x4eab8f(0x83c)])), _0x4eab8f(0x245) + _0x4fa668['map'](_0x2b8b36 => _0x4eab8f(0x9de) + (_0x2b8b36[_0x4eab8f(0xaea)] || _0x4eab8f(0x763)) + _0x4eab8f(0xb69) + (_0x2b8b36[_0x4eab8f(0x641)] || '') + _0x4eab8f(0x2b3) + (_0x2b8b36[_0x4eab8f(0x83c)] || '') + _0x4eab8f(0xaf0))[_0x4eab8f(0x973)]('') + _0x4eab8f(0x2d6); } else _0x1d4dad[_0x4eab8f(0x2ca)](_0x4eab8f(0xbf3), _0x27b963[_0x4eab8f(0x838)]({ 'playlist': _0x4d29c4[_0x4eab8f(0x345)], 'currentIndex': _0xd12d23[_0x4eab8f(0x4dd)] })); } async function _0x205349(_0xa073e5, _0x1427bf, _0x3f9c62 = null) { const _0x2eaf8b = _0x8e5972, _0x369cfc = _0x5964f7(_0x1427bf), _0x63e703 = _0x1d2a6a[_0x2eaf8b(0x816)][_0x2eaf8b(0x2ec)](_0x1acea5 => _0x1acea5[_0x2eaf8b(0x832)] === 'private' && _0x1acea5[_0x2eaf8b(0x182)][_0x2eaf8b(0x7d3)](_0x1427bf)), _0x21e28d = _0x43b50c(_0x63e703?.['id'] || _0x1d2a6a[_0x2eaf8b(0x5e4)]); if (!_0x369cfc) throw new Error(_0x2eaf8b(0x5b8)); const { omniText: _0x6b03c7 } = _0x57f616(_0x1427bf); let _0x344500 = ''; const _0x4385de = new Date(); let _0x49c73b = null, _0x3c10e3 = '无'; if (_0x3f9c62) { if (_0x2eaf8b(0x1fc) === _0x2eaf8b(0xabe)) { const _0x291748 = _0x299144[_0x2eaf8b(0xc00)][_0x2eaf8b(0x2ec)](_0x1957c0 => _0x1957c0['id'] === _0x19f3d3['activeFriendCircleId']), _0x4577fc = _0x43f9c2(); let _0x4fb798 = []; if (_0x291748 && _0x291748[_0x2eaf8b(0xbc0)]) { const _0x3d4893 = _0x291748[_0x2eaf8b(0xbc0)][_0x2eaf8b(0x564)](_0x12b7cb => _0x12b7cb[_0x2eaf8b(0x832)] === _0x2eaf8b(0x6d1) && _0x12b7cb[_0x2eaf8b(0x324)])[_0x2eaf8b(0x719)](_0x5d114d => ({ ..._0x5d114d, 'source': _0x2eaf8b(0x47f) })); _0x4fb798[_0x2eaf8b(0x8b0)](..._0x3d4893); } if (_0x4577fc && _0x3ee819['conversationHistory']) { const _0x156abc = _0x21b8d7[_0x2eaf8b(0x5c7)]['filter'](_0x55f802 => _0x55f802[_0x2eaf8b(0x832)] === _0x2eaf8b(0x6d1) && _0x55f802[_0x2eaf8b(0x324)])[_0x2eaf8b(0x719)](_0x3819e0 => ({ ..._0x3819e0, 'id': _0x2eaf8b(0xa0c) + _0x3819e0[_0x2eaf8b(0x83c)], 'source': _0x2eaf8b(0xa68) })); _0x4fb798[_0x2eaf8b(0x8b0)](..._0x156abc); } const _0x3744c2 = _0x7fdc['from'](new _0x559288(_0x4fb798[_0x2eaf8b(0x719)](_0x2128a1 => [_0x2128a1[_0x2eaf8b(0x324)], _0x2128a1]))['values']()); _0x38b0b[_0x2eaf8b(0x345)] = _0x3744c2[_0x2eaf8b(0xa24)]((_0x273b62, _0x436f6b) => _0x436f6b[_0x2eaf8b(0x83c)] - _0x273b62[_0x2eaf8b(0x83c)]); } else try { if (_0x2eaf8b(0xc24) !== _0x2eaf8b(0xbf5)) { let _0x492e4c; try { _0x492e4c = JSON['parse'](_0x3f9c62); } catch (_0x965c99) { if (_0x2eaf8b(0xa65) === 'YcZHp') _0x492e4c = _0x120ca2(_0x3f9c62); else { const _0x4ca1ff = _0x5e5348[_0x2eaf8b(0x20e)](_0x2eaf8b(0xc4a)); _0x4ca1ff && _0x4ca1ff[_0x2eaf8b(0x8f0)](); const _0x5263bd = _0x5043fe[_0x2eaf8b(0x20e)](_0x2eaf8b(0x5a8)); if (_0x5263bd && (_0x5263bd['id'] === _0x2eaf8b(0x37b) || _0x5263bd['id'] === _0x2eaf8b(0x79b))) _0x179a56(); else { const _0x44fc42 = _0xd820b1[_0x2eaf8b(0x599)](_0x2eaf8b(0x8d1)); _0x44fc42[_0x2eaf8b(0x83e)](_0x2225e0 => _0x2225e0[_0x2eaf8b(0x8f0)]()); } } } if (Array[_0x2eaf8b(0x57e)](_0x492e4c) && _0x492e4c[_0x2eaf8b(0x2ab)] > 0x0) { if (_0x2eaf8b(0x205) === _0x2eaf8b(0x205)) { const _0x1d8ce7 = _0x492e4c[_0x2eaf8b(0x719)](_0x2a09b8 => new Date(_0x2a09b8[_0x2eaf8b(0x83c)] || _0x2a09b8['last_edited']))[_0x2eaf8b(0x564)](_0x19d2d2 => !isNaN(_0x19d2d2)); _0x1d8ce7['length'] > 0x0 && (_0x49c73b = new Date(Math[_0x2eaf8b(0x1aa)]['apply'](null, _0x1d8ce7)), _0x3c10e3 = _0x49c73b[_0x2eaf8b(0x28c)](_0x2eaf8b(0x4cf), { 'dateStyle': _0x2eaf8b(0xb88), 'timeStyle': _0x2eaf8b(0x25e) })); } else { if (!_0x101b93[_0x2eaf8b(0x57e)](_0xbaeb82)) return _0x2eaf8b(0x462); if (_0x12ba3e[_0x2eaf8b(0x2ab)] === 0x0) return _0x2eaf8b(0xb02); return _0x3ddabc[_0x2eaf8b(0xa24)]((_0x5231af, _0x8fd519) => new _0x4b6ed0(_0x8fd519[_0x2eaf8b(0x83c)]) - new _0x373b60(_0x5231af['timestamp'])), _0x4c7313[_0x2eaf8b(0x719)](_0x12194b => _0x2eaf8b(0xb2f) + (_0x12194b['store_name'] || _0x2eaf8b(0x86a)) + _0x2eaf8b(0x6aa) + (_0x12194b[_0x2eaf8b(0x83c)] || '') + _0x2eaf8b(0x3e7) + (_0x12194b['item_name'] || _0x2eaf8b(0x72b)) + _0x2eaf8b(0x388) + (_0x12194b['cost'] || 0x0)[_0x2eaf8b(0x3a8)](0x2) + _0x2eaf8b(0xa4c))[_0x2eaf8b(0x973)](''); } } } else _0x3da3b1[_0x2eaf8b(0xc15)](_0x149f6d); } catch (_0x29c133) { console[_0x2eaf8b(0x594)](_0x2eaf8b(0x5e8), _0x29c133); } } const _0x3377d0 = _0x3f02c3(_0x1427bf); _0x344500 = _0x2eaf8b(0xa9c), _0x344500 += '-\x20**当前精确时间**:\x20' + _0x4385de[_0x2eaf8b(0x28c)](_0x2eaf8b(0x4cf), { 'dateStyle': 'full', 'timeStyle': 'short' }) + '\x0a'; if (_0x3377d0) { const _0xb6e536 = new Date(_0x3377d0[_0x2eaf8b(0x83c)]), _0x4434cc = _0x1af056(_0xb6e536); _0x344500 += _0x2eaf8b(0x756) + _0x4434cc + '\x0a'; const _0x4ce8c7 = _0x4385de['toDateString'](), _0x2163f1 = _0xb6e536[_0x2eaf8b(0x430)](), _0x3f7285 = new Date(); _0x3f7285[_0x2eaf8b(0x919)](_0x4385de[_0x2eaf8b(0x3fc)]() - 0x1); const _0x18a2fc = _0x3f7285[_0x2eaf8b(0x430)](); if (_0x4ce8c7 === _0x2163f1) { const _0x22cb09 = (_0x4385de - _0xb6e536) / (0x3e8 * 0x3c); _0x344500 += _0x2eaf8b(0x2ff); } else { if (_0x18a2fc === _0x2163f1) { if (_0x2eaf8b(0x3f1) === 'zUmRR') { _0x26ecfd = _0x1172ef; const _0x370492 = _0x57954f(_0x228fdf); if (!_0x370492) return; const _0x2e6b86 = _0x205662['getElementById']('snoop-phone-screen'), _0x22109e = _0x809771['getElementById']('snoop-home-clock'); if (_0x22109e) _0x22109e[_0x2eaf8b(0x8f0)](); const _0xf398aa = _0x29a79b[_0x2eaf8b(0x94d)](_0x2eaf8b(0x876)); if (_0xf398aa) _0xf398aa[_0x2eaf8b(0x8f0)](); _0x2e6b86[_0x2eaf8b(0x1c4)]('beforeend', _0x2eaf8b(0x2da)), _0x2e6b86['insertAdjacentHTML'](_0x2eaf8b(0x440), _0x2eaf8b(0x784)), _0x1dc526['getElementById'](_0x2eaf8b(0x891))[_0x2eaf8b(0x724)] = '', _0x18b492(); if (_0x16442f) _0x9f1da9(_0x382db4); _0x3ef376(), _0x5944f7 = _0x2b873e(_0x1c4cd4, 0x2710), _0x2ff97c(_0x2eaf8b(0x99c), 'snoopList'); } else _0x344500 += _0x2eaf8b(0x7a3); } else { const _0x1d2884 = Math[_0x2eaf8b(0x789)]((_0x4385de - _0xb6e536) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x344500 += _0x2eaf8b(0x604) + _0x1d2884 + _0x2eaf8b(0x76c); } } } else 'aQZpy' !== _0x2eaf8b(0x850) ? _0x344500 += '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a' : _0x6e6254['error'](_0x2eaf8b(0x3b7), _0x3b66f7); let _0x4ce1f8 = '', _0x2c5b31 = ''; if (_0x3f9c62) { if (_0x2eaf8b(0x3aa) === _0x2eaf8b(0x7c3)) { _0x3d61d5[_0x2eaf8b(0x1be)](_0x2eaf8b(0xc19), _0x2d3359['id']); return; } else _0x4ce1f8 = _0x2eaf8b(0x8f3), _0x2c5b31 = _0x2eaf8b(0x2a9) + _0x3f9c62 + _0x2eaf8b(0x771); } else _0x2eaf8b(0xb24) !== 'qPHdZ' ? _0x4ce1f8 = _0x2eaf8b(0x34e) : _0x3cd374('💜\x20' + _0xd6d1c1[_0x2eaf8b(0x7e6)] + '\x20添加了新的纪念日：' + _0x1725ce[_0x2eaf8b(0x626)]); const _0xf7115a = { 'gallery': _0x2eaf8b(0x545), 'whispers': _0x2eaf8b(0xa04), 'abyss': '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'fragments': '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'bites': _0x2eaf8b(0x343), 'wants': _0x2eaf8b(0x7df), 'footprints': _0x2eaf8b(0x99e) }, _0x397ad5 = _0xf7115a[_0xa073e5] || '#\x20任务:\x20生成\x20' + _0xa073e5 + _0x2eaf8b(0x373); let _0xf917d8 = ''; if (_0x369cfc[_0x2eaf8b(0xa93)] && _0x369cfc[_0x2eaf8b(0xa93)][_0x2eaf8b(0x2ab)] > 0x0) { const _0x3fcfe3 = _0x369cfc[_0x2eaf8b(0xa93)]['map'](_0x419146 => _0x1d2a6a[_0x2eaf8b(0x5cb)][_0x2eaf8b(0x2ec)](_0x13582b => _0x13582b['id'] === _0x419146))['filter'](Boolean)[_0x2eaf8b(0x719)](_0x31fef1 => _0x2eaf8b(0x959) + _0x31fef1[_0x2eaf8b(0x7e6)] + '\x0a' + _0x31fef1[_0x2eaf8b(0x415)])[_0x2eaf8b(0x973)](''); _0x3fcfe3 && (_0xf917d8 = '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a' + _0x3fcfe3); } const _0xcea1b8 = _0x2eaf8b(0x450) + _0x369cfc[_0x2eaf8b(0x7e6)] + _0x2eaf8b(0x6d6) + _0x369cfc['name'] + '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“' + _0x21e28d[_0x2eaf8b(0x7e6)] + '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20' + _0x3c10e3 + _0x2eaf8b(0x6c6) + _0x4385de[_0x2eaf8b(0x28c)](_0x2eaf8b(0x4cf), { 'dateStyle': _0x2eaf8b(0x541), 'timeStyle': _0x2eaf8b(0x25e) }) + _0x2eaf8b(0x7a2) + _0x369cfc[_0x2eaf8b(0x7e6)] + _0x2eaf8b(0x27b) + _0x369cfc[_0x2eaf8b(0x647)] + '\x0a' + _0xf917d8 + '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20' + _0x21e28d['name'] + _0x2eaf8b(0x27b) + _0x21e28d[_0x2eaf8b(0x647)] + _0x2eaf8b(0xb85) + _0x6b03c7 + '\x0a' + _0x2c5b31 + '\x0a\x0a#\x20当前任务指令\x0a' + _0x4ce1f8 + '\x0a' + _0x397ad5 + '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x4f9e63 = [{ 'role': _0x2eaf8b(0xc0f), 'content': _0xcea1b8 }]; _0x4f9e63[_0x2eaf8b(0x8b0)]({ 'role': _0x2eaf8b(0xadb), 'content': _0x2eaf8b(0x263) }); const _0x4dfbf0 = await _0x3e56bc(_0x4f9e63, { 'json': !![] }); return _0x4dfbf0; } async function _0x1f12ba(_0x27eda0) { const _0x35caf1 = _0x8e5972, _0x228073 = _0x5964f7(_0x27eda0); if (!_0x228073) throw new Error(_0x35caf1(0x969)); _0xea506e(!![], _0x35caf1(0x79f)); const _0x43cd3b = [_0x35caf1(0x49f), 'whispers', _0x35caf1(0x9f4), _0x35caf1(0xaa4), _0x35caf1(0x629), _0x35caf1(0x691), _0x35caf1(0x47c)]; let _0x3edff5 = {}; await Promise[_0x35caf1(0x8af)](_0x43cd3b['map'](async _0xa2a720 => { const _0x279c6d = _0x35caf1, _0x55d573 = _0x279c6d(0x69d) + _0x27eda0 + '_' + _0xa2a720, _0x1ea068 = await _0x1a97c4(_0x55d573); if (_0x1ea068) try { if (_0x279c6d(0x3a9) === _0x279c6d(0x40a)) return new _0x371e67((_0x1a83b2, _0x41e69a) => { const _0x1fd709 = _0x279c6d, _0x12f6c3 = new _0x37e373(); _0x12f6c3['onloadend'] = () => _0x1a83b2(_0x12f6c3[_0x1fd709(0xa75)]), _0x12f6c3['onerror'] = _0x41e69a, _0x12f6c3[_0x1fd709(0x586)](_0x5d6198); }); else _0x3edff5[_0xa2a720] = JSON[_0x279c6d(0xac1)](_0x1ea068); } catch (_0x148d18) { } })); if (Object[_0x35caf1(0x1b1)](_0x3edff5)[_0x35caf1(0x2ab)] === 0x0) { if (_0x35caf1(0x2bf) !== 'XtsdG') return _0x35caf1(0xc7b); else _0x3c708f(_0x4460fe[_0x35caf1(0x229)]); } const _0x162d04 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x228073['name'] + _0x35caf1(0x9b4), _0x277b9d = [{ 'role': _0x35caf1(0xc0f), 'content': _0x162d04 }, { 'role': _0x35caf1(0xadb), 'content': JSON[_0x35caf1(0x838)](_0x3edff5, null, 0x2) }]; _0xea506e(!![], _0x35caf1(0x928)); const _0xd97fb8 = await _0x3e56bc(_0x277b9d); return _0xd97fb8 || _0x35caf1(0x96a); } async function _0x1f12ba(_0x5786d3) { const _0x2819c6 = _0x8e5972; if (_0x2819c6(0x632) === _0x2819c6(0x632)) { const _0x1962b6 = _0x5964f7(_0x5786d3); if (!_0x1962b6) throw new Error(_0x2819c6(0x969)); try { _0xea506e(!![], _0x2819c6(0x79f)); const _0x55c65c = [_0x2819c6(0x49f), _0x2819c6(0x7f7), _0x2819c6(0x9f4), 'fragments', 'bites', _0x2819c6(0x691), 'footprints']; let _0x1e8aee = {}; await Promise['all'](_0x55c65c[_0x2819c6(0x719)](async _0x103e50 => { const _0x42c51e = _0x2819c6; if (_0x42c51e(0x8e5) !== _0x42c51e(0x8e5)) { const _0x26fff1 = _0x1f5fbd(_0x3a7878[_0x42c51e(0x9d5)]); _0x26fff1 && (_0x529896 = _0x26fff1[_0x42c51e(0x7e6)], _0x4d9805 = _0x26fff1[_0x42c51e(0x7a4)]); } else { const _0x80731f = 'snoop_' + _0x5786d3 + '_' + _0x103e50, _0x3a9ce3 = await _0x1a97c4(_0x80731f); if (_0x3a9ce3) try { _0x1e8aee[_0x103e50] = JSON[_0x42c51e(0xac1)](_0x3a9ce3); } catch (_0x5233be) { } } })); if (Object['keys'](_0x1e8aee)[_0x2819c6(0x2ab)] === 0x0) return _0x2819c6(0xc7b); const _0x3d3ec9 = _0x2819c6(0xb40) + _0x1962b6[_0x2819c6(0x7e6)] + _0x2819c6(0x6a0), _0x23096d = [{ 'role': _0x2819c6(0xc0f), 'content': _0x3d3ec9 }, { 'role': _0x2819c6(0xadb), 'content': JSON[_0x2819c6(0x838)](_0x1e8aee, null, 0x2) }]; _0xea506e(!![], _0x2819c6(0x928)); const _0x58a8f1 = await _0x3e56bc(_0x23096d); return _0x58a8f1 || _0x2819c6(0x96a); } finally { _0x2819c6(0x366) !== 'LvefG' ? _0xea506e(![]) : _0x10b88c[_0x2819c6(0x474)] && _0x5c3ee7(_0xdcccba[_0x2819c6(0x474)]); } } else _0x5abc64[_0x2819c6(0x672)](_0x2819c6(0xc5e), () => { const _0x5e6293 = _0x2819c6, _0x54bccc = _0x21e4b7[_0x5e6293(0xac1)](_0x96a1d1['dataset'][_0x5e6293(0x668)][_0x5e6293(0x9ed)](/&quot;/g, '\x22')), _0x30a359 = _0x58083a[_0x5e6293(0xaac)][_0x5e6293(0x231)], _0x533086 = _0xf0a1cc[_0x5e6293(0xaac)][_0x5e6293(0x8fa)]; _0x3b58fa(_0x30a359, _0x533086, _0x54bccc); }); } document[_0x8e5972(0x94d)](_0x8e5972(0x6ca))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => _0x40b080(_0x8e5972(0x5a6), _0x8e5972(0xb22))), document[_0x8e5972(0x94d)](_0x8e5972(0xadc))[_0x8e5972(0x672)](_0x8e5972(0xc5e), () => { const _0x53d017 = _0x8e5972; document[_0x53d017(0x94d)](_0x53d017(0x702))['style'][_0x53d017(0x180)] = _0x53d017(0x546), _0x40b080(_0x53d017(0xb22), _0x53d017(0x99c)); }); const _0x257254 = document[_0x8e5972(0x94d)](_0x8e5972(0x551)); _0x257254 && _0x257254['addEventListener'](_0x8e5972(0xc5e), () => { const _0x197723 = _0x8e5972; if (_0x197723(0x598) === _0x197723(0x90b)) { const _0x349321 = _0x7d29a3[_0x197723(0xac1)](_0x2a6da2); _0x33b765[_0x197723(0x57e)](_0x349321) && (_0x2b98d2 = _0x349321[_0x197723(0x564)](_0x1e69a5 => _0x1e69a5 && typeof _0x1e69a5 === _0x197723(0x595) && typeof _0x1e69a5[_0x197723(0x874)] === _0x197723(0x3e9) && typeof _0x1e69a5[_0x197723(0x415)] !== _0x197723(0x68c))); } else { const _0x2469cf = document[_0x197723(0x94d)](_0x197723(0x6de)); _0x2469cf && (_0x197723(0xad5) === _0x197723(0xad5) ? (_0x2469cf['classList']['remove'](_0x197723(0x400)), _0x2469cf[_0x197723(0x7be)][_0x197723(0xb82)] = '', _0x2469cf['style']['opacity'] = '') : (_0x9645c0[_0x197723(0xa47)]['add']('sticker'), _0x30d80b[_0x197723(0x806)] += _0x197723(0x73f) + _0xeae458 + _0x197723(0x273))); } }), _0x28d2bd(); }); async function _0x28c69c() { const _0x8361a7 = _0x1eaaca; console[_0x8361a7(0x668)](_0x8361a7(0x3fe)), console[_0x8361a7(0x668)](_0x8361a7(0xa6c)); async function _0x2ed9eb(_0x129639, _0x2063f3) { const _0xc459f = _0x8361a7; if ('hqfaG' === 'hqfaG') { const _0x3518d5 = await _0x1e3691; return new Promise((_0x13c621, _0x655b0f) => { const _0x5c33b7 = _0x4bce, _0x445f49 = _0x3518d5['transaction'](_0x42e918, _0x5c33b7(0x461)), _0x554b90 = _0x445f49[_0x5c33b7(0x926)](_0x42e918), _0x2e8bbd = _0x554b90[_0x5c33b7(0x734)]({ 'id': _0x129639, 'blob': _0x2063f3 }); _0x2e8bbd[_0x5c33b7(0x33f)] = () => _0x13c621(_0x2e8bbd[_0x5c33b7(0xa75)]), _0x2e8bbd['onerror'] = () => _0x655b0f(_0x2e8bbd['error']); }); } else { const _0x4ff36a = new _0x1ed98f(), _0x2867cb = _0x130b97['getElementById'](_0xc459f(0x913)), _0x3e16ba = _0x382b4e[_0xc459f(0x94d)]('snoop-home-date'), _0x38e48d = _0x324f14[_0xc459f(0x94d)]('snoop-phone-header'); _0x2867cb && _0x3e16ba && (_0x2867cb['textContent'] = _0x4ff36a['toLocaleTimeString'](_0xc459f(0x4cf), { 'hour': _0xc459f(0x5d1), 'minute': '2-digit', 'hour12': ![] }), _0x3e16ba[_0xc459f(0x724)] = _0x4ff36a['toLocaleDateString'](_0xc459f(0x4cf), { 'month': _0xc459f(0x3bd), 'day': _0xc459f(0x923), 'weekday': _0xc459f(0x3bd) })), _0x38e48d && (_0x38e48d[_0xc459f(0x806)] = _0xc459f(0xae4) + _0x4ff36a['toLocaleTimeString'](_0xc459f(0x4cf), { 'hour': _0xc459f(0x5d1), 'minute': _0xc459f(0x5d1), 'hour12': ![] }) + _0xc459f(0x2df)); } } async function _0x363a3f(_0x70b036) { const _0x1208ae = _0x8361a7; if (_0x1208ae(0x5af) === _0x1208ae(0x5af)) { const _0x1c9384 = await _0x1e3691; return new Promise((_0x4b66dd, _0x23dd0b) => { const _0x16d00d = _0x1208ae, _0x4b7ef5 = _0x1c9384['transaction'](_0x2c779d, _0x16d00d(0xb76)), _0x3956b1 = _0x4b7ef5[_0x16d00d(0x926)](_0x2c779d), _0x3ed402 = _0x3956b1['get'](_0x70b036); _0x3ed402[_0x16d00d(0x33f)] = () => _0x4b66dd(_0x3ed402[_0x16d00d(0xa75)] ? _0x3ed402[_0x16d00d(0xa75)][_0x16d00d(0x572)] : null), _0x3ed402[_0x16d00d(0x2b0)] = () => _0x23dd0b(_0x3ed402[_0x16d00d(0x1be)]); }); } else _0x2c7cf9[_0x1208ae(0x25d)] = _0x26f738['activeUserProfileId']; } async function _0xec68bd(_0x5a43b6, _0x539b9d) { const _0x251f63 = await _0x1e3691; return new Promise((_0x31dfbc, _0x5c601d) => { const _0x233830 = _0x4bce, _0x37eeca = _0x251f63[_0x233830(0x25c)](_0x2c779d, _0x233830(0x461)), _0x2766ed = _0x37eeca[_0x233830(0x926)](_0x2c779d), _0x54e9c8 = _0x2766ed[_0x233830(0x734)]({ 'id': _0x5a43b6, 'data': _0x539b9d }); _0x54e9c8[_0x233830(0x33f)] = () => _0x31dfbc(), _0x54e9c8['onerror'] = () => _0x5c601d(_0x54e9c8['error']); }); } function _0x53afca(_0xb269e) { const _0x47c0d7 = _0x8361a7; if (_0x47c0d7(0x3ae) === _0x47c0d7(0x917)) _0x1d7523[_0x47c0d7(0x724)] = _0x47c0d7(0x548) + _0x3a7d58[_0x47c0d7(0x2ab)] + '\x20项'; else return fetch(_0xb269e)[_0x47c0d7(0x1d2)](_0x412416 => _0x412416[_0x47c0d7(0x3c3)]()); } let _0x2d2f8d = 0x0; for (let _0x1b530f = 0x0; _0x1b530f < localStorage['length']; _0x1b530f++) { if (_0x8361a7(0x311) !== 'ICvto') _0x2f013c[_0x8361a7(0xc74)](_0x13ccfa); else { const _0x561569 = localStorage[_0x8361a7(0x5c2)](_0x1b530f); if (_0x561569 && _0x561569['startsWith'](_0x8361a7(0x6ba))) { if (_0x8361a7(0x2a0) !== _0x8361a7(0x2a0)) _0x3e9f24['reload'](); else { let _0x34d74b, _0x8d8965 = ![]; try { _0x34d74b = JSON[_0x8361a7(0xac1)](localStorage[_0x8361a7(0x1c6)](_0x561569)); if (!Array[_0x8361a7(0x57e)](_0x34d74b)) continue; for (const _0x5d9612 of _0x34d74b) { if (_0x5d9612 && _0x5d9612[_0x8361a7(0x7dc)] && _0x5d9612[_0x8361a7(0x7dc)][_0x8361a7(0x3c5)](_0x8361a7(0x83a))) { const _0x1363c0 = await _0x53afca(_0x5d9612[_0x8361a7(0x7dc)]), _0x330294 = _0x8361a7(0x41e) + Date[_0x8361a7(0x4b7)]() + '_' + Math[_0x8361a7(0x4bc)](); await _0x2ed9eb(_0x330294, _0x1363c0), _0x5d9612['imageId'] = _0x330294, delete _0x5d9612[_0x8361a7(0x7dc)], _0x8d8965 = !![], _0x2d2f8d++; } } _0x8d8965 && (_0x8361a7(0x9e1) !== _0x8361a7(0x6cc) ? localStorage['setItem'](_0x561569, JSON[_0x8361a7(0x838)](_0x34d74b)) : (_0x456cc2[_0x8361a7(0x8b0)](_0x44c98a[_0xea244b][_0x8361a7(0x667)]()), _0x47a349++)); } catch (_0x58a81c) { console['error'](_0x8361a7(0x1a2) + _0x561569 + _0x8361a7(0x424), _0x58a81c); continue; } } } } } console[_0x8361a7(0x668)](_0x8361a7(0xa14) + _0x2d2f8d + _0x8361a7(0x931)); } async function _0x4369ba() { const _0xb8dcc6 = _0x1eaaca; console[_0xb8dcc6(0x668)]('---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---'), console[_0xb8dcc6(0x668)](_0xb8dcc6(0xa97)); async function _0x5209a4(_0x59a20c, _0x293b75) { const _0x1bd490 = await _0x1e3691; return new Promise((_0x7c016a, _0x53e4fc) => { const _0x4f2094 = _0x4bce, _0x323ef8 = _0x1bd490[_0x4f2094(0x25c)](_0x4f2094(0x79c), _0x4f2094(0x461)), _0x5d137d = _0x323ef8['objectStore'](_0x4f2094(0x79c)), _0x392abe = _0x5d137d['put']({ 'id': _0x59a20c, 'blob': _0x293b75 }); _0x392abe[_0x4f2094(0x33f)] = () => _0x7c016a(_0x392abe[_0x4f2094(0xa75)]), _0x392abe[_0x4f2094(0x2b0)] = () => _0x53e4fc(_0x392abe[_0x4f2094(0x1be)]); }); } function _0x2ad6a0(_0x26921b) { const _0x27339d = _0xb8dcc6; if (_0x27339d(0x78b) !== _0x27339d(0x78b)) { const _0x2ec8ef = _0x591f54(_0x148bfc[_0x27339d(0x182)][0x0]); return _0x2ec8ef?.[_0x27339d(0x7e6)] || 'AI'; } else return fetch(_0x26921b)[_0x27339d(0x1d2)](_0x52d1be => _0x52d1be[_0x27339d(0x3c3)]()); } let _0x483c21 = 0x0, _0x5eb828 = ![]; try { const _0x589a25 = localStorage['getItem'](_0xb8dcc6(0x2ad)); if (!_0x589a25) { console[_0xb8dcc6(0x668)](_0xb8dcc6(0x701)); return; } const _0x111866 = JSON[_0xb8dcc6(0xac1)](_0x589a25); if (!_0x111866[_0xb8dcc6(0xc00)] || !Array['isArray'](_0x111866[_0xb8dcc6(0xc00)])) { if (_0xb8dcc6(0x55a) === 'qdQDO') return; else _0x244c6c['linkedWorldBookIds'] && (_0x3f9e62[_0xb8dcc6(0xa93)] = _0x16d864[_0xb8dcc6(0xa93)][_0xb8dcc6(0x564)](_0x36f598 => _0x36f598 !== _0xd46f71)); } for (const _0xcfe504 of _0x111866[_0xb8dcc6(0xc00)]) { if (_0xcfe504[_0xb8dcc6(0xbc0)] && Array[_0xb8dcc6(0x57e)](_0xcfe504[_0xb8dcc6(0xbc0)])) for (const _0x3d4661 of _0xcfe504[_0xb8dcc6(0xbc0)]) { if (_0x3d4661 && _0x3d4661[_0xb8dcc6(0x7dc)] && _0x3d4661[_0xb8dcc6(0x7dc)][_0xb8dcc6(0x3c5)](_0xb8dcc6(0x83a))) { if (_0xb8dcc6(0x839) === _0xb8dcc6(0x2cd)) _0x39b7fb[_0xb8dcc6(0x845)][_0xb8dcc6(0x8b0)]({ 'senderId': _0x147f6b['id'], 'kind': _0xb8dcc6(0x4b6), 'sticker': _0x5a4f45 }); else { console[_0xb8dcc6(0x668)](_0xb8dcc6(0x5a4) + _0xcfe504[_0xb8dcc6(0x7e6)] + _0xb8dcc6(0x2f4)); const _0x25afeb = await _0x2ad6a0(_0x3d4661['image']), _0x3bef02 = _0xb8dcc6(0x3ee) + Date[_0xb8dcc6(0x4b7)]() + '_' + Math[_0xb8dcc6(0x4bc)](); await _0x5209a4(_0x3bef02, _0x25afeb), _0x3d4661['imageId'] = _0x3bef02, delete _0x3d4661['image'], _0x5eb828 = !![], _0x483c21++; } } } } _0x5eb828 && (_0xb8dcc6(0xbce) !== _0xb8dcc6(0x543) ? (console[_0xb8dcc6(0x668)](_0xb8dcc6(0xc29)), localStorage[_0xb8dcc6(0x2ca)](_0xb8dcc6(0x2ad), JSON['stringify'](_0x111866))) : _0x2b4170[_0xb8dcc6(0x5c7)] = []); } catch (_0xbc2d03) { console[_0xb8dcc6(0x1be)](_0xb8dcc6(0x26e), _0xbc2d03); } return console[_0xb8dcc6(0x668)](_0xb8dcc6(0xb63)), console[_0xb8dcc6(0x668)]('成功净化并迁移了\x20' + _0x483c21 + _0xb8dcc6(0x262)), _0x483c21; } async function _0x550d47() { const _0x2ec379 = _0x1eaaca; console[_0x2ec379(0x668)](_0x2ec379(0x71d)), console[_0x2ec379(0x668)]('哼，正在净化你那些超重的音乐分享记录...'); let _0x4f5799 = 0x0, _0x1e6cac = ![]; try { const _0x5e429e = localStorage[_0x2ec379(0x1c6)]('appState'); if (!_0x5e429e) return console[_0x2ec379(0x668)](_0x2ec379(0x884)), 0x0; for (let _0x33958f = 0x0; _0x33958f < localStorage['length']; _0x33958f++) { const _0x328479 = localStorage['key'](_0x33958f); if (_0x328479 && _0x328479['startsWith'](_0x2ec379(0x6ba))) { let _0x155aea, _0x4f48c4 = ![]; try { _0x155aea = JSON[_0x2ec379(0xac1)](localStorage['getItem'](_0x328479)); if (!Array['isArray'](_0x155aea)) continue; for (const _0x1b506a of _0x155aea) { if (_0x1b506a && (_0x1b506a[_0x2ec379(0x832)] === _0x2ec379(0x6d1) || _0x1b506a[_0x2ec379(0x832)] === 'listen-together-invite') && _0x1b506a[_0x2ec379(0x8ae)] && _0x1b506a[_0x2ec379(0x8ae)]['startsWith']('data:image')) { const _0x2d2b6f = await _0x5a3320(_0x1b506a[_0x2ec379(0x8ae)]), _0x2ffc03 = _0x2ec379(0x627) + Date['now']() + '_' + Math[_0x2ec379(0x4bc)](); await _0x1ebaf2(_0x2ffc03, _0x2d2b6f), _0x1b506a['coverId'] = _0x2ffc03, delete _0x1b506a['coverUrl'], _0x4f48c4 = !![], _0x4f5799++; } } _0x4f48c4 && localStorage['setItem'](_0x328479, JSON[_0x2ec379(0x838)](_0x155aea)); } catch (_0x5f532a) { if (_0x2ec379(0x960) === _0x2ec379(0x960)) { console[_0x2ec379(0x1be)](_0x2ec379(0x1a2) + _0x328479 + _0x2ec379(0x747), _0x5f532a); continue; } else { const _0x1005dc = _0x3e2c04[_0x2ec379(0xbdf)]['dataset'][_0x2ec379(0x9a0)], _0x5c4d09 = _0x49ab44[_0x2ec379(0x599)](_0x2ec379(0xb35) + _0x1005dc + '\x22]'), _0x55ba4a = _0x4b4d97[_0x2ec379(0x599)](_0x2ec379(0xb35) + _0x1005dc + _0x2ec379(0x504)), _0x306036 = _0x228820[_0x2ec379(0x20e)]('.category-checkbox[data-category-id=\x22' + _0x1005dc + '\x22]'); if (_0x55ba4a['length'] === 0x0) _0x306036[_0x2ec379(0x460)] = ![], _0x306036[_0x2ec379(0x465)] = ![]; else _0x55ba4a[_0x2ec379(0x2ab)] === _0x5c4d09[_0x2ec379(0x2ab)] ? (_0x306036[_0x2ec379(0x460)] = !![], _0x306036[_0x2ec379(0x465)] = ![]) : _0x306036[_0x2ec379(0x465)] = !![]; _0x5ce19d(); } } } } } catch (_0xb6bcf0) { if (_0x2ec379(0x2b7) !== _0x2ec379(0x3f2)) console[_0x2ec379(0x1be)](_0x2ec379(0x8ab), _0xb6bcf0); else { const _0x1621d4 = _0x3a9010['split']('--'); _0x1621d4[_0x2ec379(0x2ab)] === 0x2 && _0x1621d4[0x0][_0x2ec379(0x667)]() && _0x1621d4[0x1][_0x2ec379(0x667)]()[_0x2ec379(0x3c5)](_0x2ec379(0x986)) ? _0x268497[_0x2ec379(0x8b0)]({ 'name': _0x1621d4[0x0][_0x2ec379(0x667)](), 'url': _0x1621d4[0x1][_0x2ec379(0x667)]() }) : _0x11ec02++; } } return console[_0x2ec379(0x668)](_0x2ec379(0x336)), console[_0x2ec379(0x668)](_0x2ec379(0x22e) + _0x4f5799 + _0x2ec379(0x33e)), _0x4f5799; } async function _0x2f5b58() { const _0x3b0664 = _0x1eaaca; console['log'](_0x3b0664(0xb1e)), console['log'](_0x3b0664(0x8d3)); let _0x5da10a = 0x0; try { if (_0x3b0664(0xaa9) === _0x3b0664(0xaa9)) { const _0x546d1b = localStorage[_0x3b0664(0x1c6)](_0x3b0664(0x2ad)); if (!_0x546d1b) { if (_0x3b0664(0x580) === _0x3b0664(0x580)) return console[_0x3b0664(0x668)](_0x3b0664(0x9d7)), 0x0; else throw new _0x5b3ef9('AI返回的内容里找不到有效的JSON数组。原始回复:\x20' + _0x52cba3); } const _0x43581c = JSON['parse'](_0x546d1b); if (!_0x43581c['characters'] || !Array[_0x3b0664(0x57e)](_0x43581c[_0x3b0664(0x1bc)])) return 0x0; for (const _0xe5944b of _0x43581c[_0x3b0664(0x1bc)]) { if (_0x3b0664(0x438) !== 'yRcqS') { if (_0xe5944b && _0xe5944b[_0x3b0664(0x7a4)] && _0xe5944b[_0x3b0664(0x7a4)][_0x3b0664(0x3c5)](_0x3b0664(0x83a))) { if (_0x3b0664(0x957) !== 'BNdwF') _0x3b11c3[_0x3b0664(0xc5e)](); else { const _0x51b30c = await _0xe5b0ea(_0x3b0664(0xa03) + _0xe5944b['id']); if (!_0x51b30c) { console['log']('发现角色\x20' + _0xe5944b[_0x3b0664(0x7e6)] + '\x20的遗失头像，正在救援...'); const _0x5e3571 = await _0x5a3320(_0xe5944b[_0x3b0664(0x7a4)]); await _0x1ebaf2(_0x3b0664(0xa03) + _0xe5944b['id'], _0x5e3571), _0x5da10a++; } } } } else _0x3afc87[_0x3b0664(0x806)] = _0x3b0664(0xc51) + _0x4efa9a + _0x3b0664(0xb6a) + (_0x1957db === _0x3b0664(0x978) ? _0x3b0664(0x29b) : _0x3b0664(0x7c5)) + _0x3b0664(0x787) + _0x521c9a + _0x3b0664(0xa8d) + _0x166ff1; } } else { const _0x255f3a = _0x1bc68b(_0x26e9c0['authorId']); _0x255f3a && (_0x902fe = _0x255f3a['name'], _0x5d9bf9 = _0x255f3a[_0x3b0664(0x7a4)]); } } catch (_0x13104a) { _0x3b0664(0x1bd) !== _0x3b0664(0x19e) ? console['error'](_0x3b0664(0x236), _0x13104a) : _0x5ed45c = _0x15811d(_0x13d2b1); } return console[_0x3b0664(0x668)](_0x3b0664(0x258)), console['log'](_0x3b0664(0x622) + _0x5da10a + _0x3b0664(0x9ab)), _0x5da10a; } function _0x3a7fab() { const _0x3bdbaf = _0x1eaaca; if (!_0x1d2a6a['activeDiaryCharacterId']) { if (_0x3bdbaf(0x455) === _0x3bdbaf(0x455)) return _0x1d2a6a[_0x3bdbaf(0x575)][_0x3bdbaf(0x2ec)](_0xdd265a => _0xdd265a['id'] === _0x1d2a6a[_0x3bdbaf(0xc02)]) || _0x1d2a6a[_0x3bdbaf(0x575)][0x0]; else _0x44559f(); } const _0xe2454e = _0x1d2a6a[_0x3bdbaf(0x816)]['find'](_0x56137f => _0x56137f[_0x3bdbaf(0x832)] === _0x3bdbaf(0x5ac) && _0x56137f['participantIds']['includes'](_0x1d2a6a[_0x3bdbaf(0x254)])), _0x27e081 = _0xe2454e?.[_0x3bdbaf(0x25d)] || _0x1d2a6a[_0x3bdbaf(0xc02)]; return _0x1d2a6a[_0x3bdbaf(0x575)][_0x3bdbaf(0x2ec)](_0xb2e569 => _0xb2e569['id'] === _0x27e081) || _0x1d2a6a['userProfiles'][0x0]; } function _0x1af056(_0xdc6508) { const _0x12204c = _0x1eaaca, _0x11b059 = new Date(), _0x466f99 = _0x11b059 - _0xdc6508, _0x47fe56 = Math[_0x12204c(0x789)](_0x466f99 / 0x3e8), _0x5b1be2 = Math[_0x12204c(0x789)](_0x47fe56 / 0x3c), _0x880a43 = Math[_0x12204c(0x789)](_0x5b1be2 / 0x3c), _0x5e4525 = Math['round'](_0x880a43 / 0x18), _0x5c7696 = _0xdc6508[_0x12204c(0x28e)](_0x12204c(0x4cf), { 'hour': '2-digit', 'minute': '2-digit' }); if (_0x47fe56 < 0x3c) { if (_0x12204c(0x8b1) === _0x12204c(0x755)) _0x5379f0['textContent'] = '❚❚'; else return '刚才'; } if (_0x5b1be2 < 0x3c) return _0x12204c(0x5f2) !== _0x12204c(0x359) ? _0x5b1be2 + '分钟前' : _0x12204c(0xc7b); const _0x43b77f = _0x11b059[_0x12204c(0x430)]() === _0xdc6508['toDateString'](); if (_0x43b77f) { if (_0x12204c(0x7d5) !== _0x12204c(0x7d5)) _0x3742ff[_0x12204c(0xa47)]['remove']('unlocked'), _0x5154bb[_0x12204c(0x7be)]['transform'] = '', _0x5ed121[_0x12204c(0x7be)][_0x12204c(0xb52)] = ''; else return _0x12204c(0x98d) + _0x5c7696; } const _0x36f9a4 = new Date(); _0x36f9a4[_0x12204c(0x919)](_0x11b059[_0x12204c(0x3fc)]() - 0x1); const _0x2d9725 = _0x36f9a4['toDateString']() === _0xdc6508[_0x12204c(0x430)](); if (_0x2d9725) return '昨天\x20' + _0x5c7696; if (_0x5e4525 <= 0x7) { if (_0x12204c(0xbd2) !== _0x12204c(0xbd2)) _0x3c81cc['src'] = _0x3fc7d6[_0x12204c(0x413)](_0x881965), _0x5a62b5[_0x12204c(0x7be)][_0x12204c(0x180)] = _0x12204c(0x26d), _0x57757f['style'][_0x12204c(0xc39)] = _0x12204c(0x546), _0x24fb06['style'][_0x12204c(0x79d)] = _0x12204c(0xa35); else { const _0x2c378a = ['星期日', _0x12204c(0xc79), '星期二', _0x12204c(0x5ec), _0x12204c(0x820), _0x12204c(0xc4c), _0x12204c(0x389)]; return _0x2c378a[_0xdc6508['getDay']()] + '\x20' + _0x5c7696; } } return _0xdc6508[_0x12204c(0x688)]() + '年' + (_0xdc6508['getMonth']() + 0x1) + '月' + _0xdc6508[_0x12204c(0x3fc)]() + '日'; } function _0x270777(_0x37cb78, _0x1a1430 = 0x320, _0x3febf8 = 0.8, _0x22587b = ![]) { return new Promise((_0x216902, _0x462acd) => { const _0x23f65e = _0x4bce; if (_0x23f65e(0x6d3) !== 'gBUqR') _0x31af3a[_0x23f65e(0x7be)][_0x23f65e(0xb52)] = '0.5'; else { if (!_0x37cb78 || !_0x37cb78[_0x23f65e(0x832)][_0x23f65e(0x3c5)](_0x23f65e(0xb09))) { if (_0x23f65e(0xb87) !== 'Bajus') { const _0x121090 = _0x237a69(_0x12143f[_0x23f65e(0x415)]); _0x541f4f['assign'](_0x4f6eaa, { 'content': _0x121090[_0x23f65e(0x415)], 'quotedMessage': _0x121090[_0x23f65e(0x651)] }); } else return _0x462acd(new Error(_0x23f65e(0x7c7))); } const _0x5329cf = new FileReader(); _0x5329cf[_0x23f65e(0x586)](_0x37cb78), _0x5329cf[_0x23f65e(0x437)] = _0x3dcce6 => { const _0x189f0a = _0x23f65e, _0x36673c = new Image(); _0x36673c[_0x189f0a(0x802)] = _0x3dcce6[_0x189f0a(0xbdf)][_0x189f0a(0xa75)], _0x36673c[_0x189f0a(0x437)] = () => { const _0x3398cc = _0x189f0a; if ('IZirB' === _0x3398cc(0x61c)) _0x12900b[_0x3398cc(0x7be)][_0x3398cc(0x8e3)] = '#FFFFFF', _0x46edd8[_0x3398cc(0x7be)][_0x3398cc(0x305)] = _0x3398cc(0x27d); else { const _0x57a4e7 = document[_0x3398cc(0x2fa)](_0x3398cc(0x555)); let _0x209576 = _0x36673c['width'], _0x1f4f8d = _0x36673c[_0x3398cc(0x6fa)]; _0x209576 > _0x1f4f8d ? 'uuntr' === _0x3398cc(0x621) ? _0xf2a3db(_0x2493f5) : _0x209576 > _0x1a1430 && (_0x3398cc(0x7cc) !== _0x3398cc(0x4ed) ? (_0x1f4f8d *= _0x1a1430 / _0x209576, _0x209576 = _0x1a1430) : (_0x5f3be5[_0x3398cc(0x94d)]('snoop-app-view-container')['style']['display'] = _0x3398cc(0x546), _0x4d5abd('snoopList', _0x3398cc(0x99c)))) : _0x1f4f8d > _0x1a1430 && (_0x209576 *= _0x1a1430 / _0x1f4f8d, _0x1f4f8d = _0x1a1430); _0x57a4e7[_0x3398cc(0x7f1)] = _0x209576, _0x57a4e7['height'] = _0x1f4f8d; const _0x31e191 = _0x57a4e7['getContext']('2d'); _0x31e191[_0x3398cc(0x3a1)](_0x36673c, 0x0, 0x0, _0x209576, _0x1f4f8d); const _0xfe147d = _0x37cb78[_0x3398cc(0x832)] === _0x3398cc(0x9c8) ? 'image/png' : _0x3398cc(0x6e7); _0x22587b ? _0x3398cc(0xc72) === _0x3398cc(0xc72) ? _0x57a4e7[_0x3398cc(0xb56)](_0x1672b3 => { const _0x558963 = _0x3398cc; _0x1672b3 ? _0x216902(_0x1672b3) : _0x462acd(new Error(_0x558963(0x588))); }, _0xfe147d, _0x3febf8) : _0x49e12d[_0x3398cc(0x7dc)] = _0x3e3e15 : _0x3398cc(0x677) !== _0x3398cc(0x76d) ? _0x216902(_0x57a4e7[_0x3398cc(0x83d)](_0xfe147d, _0x3febf8)) : _0x192099[_0x3398cc(0x845)][_0x3398cc(0x8b0)]({ 'senderId': _0x19f54b['id'], 'kind': _0x3398cc(0x6d1), 'songName': _0x745e2c['songName'], 'artist': _0xdf6a19[_0x3398cc(0xa2c)] }); } }, _0x36673c[_0x189f0a(0x2b0)] = _0x16112b => _0x462acd(_0x16112b); }, _0x5329cf[_0x23f65e(0x2b0)] = _0x2c3e0f => _0x462acd(_0x2c3e0f); } }); } function _0x22515d(_0x567f34) { return new Promise((_0x34b958, _0x4b9dd9) => { const _0x55b2a8 = _0x4bce, _0x590ceb = new FileReader(); _0x590ceb[_0x55b2a8(0x50b)] = () => _0x34b958(_0x590ceb[_0x55b2a8(0xa75)]), _0x590ceb[_0x55b2a8(0x2b0)] = _0x4b9dd9, _0x590ceb['readAsDataURL'](_0x567f34); }); } function _0x22515d(_0x20e65b) { return new Promise((_0x52fc78, _0x55d350) => { const _0x12a326 = _0x4bce, _0xaa571b = new FileReader(); _0xaa571b['onloadend'] = () => _0x52fc78(_0xaa571b[_0x12a326(0xa75)]), _0xaa571b[_0x12a326(0x2b0)] = _0x55d350, _0xaa571b[_0x12a326(0x586)](_0x20e65b); }); } function _0xee77e3(_0x11b303, _0x3fd38a, _0x48b10a) { const _0x367196 = _0x1eaaca, _0x40f636 = _0x59869c => { const _0x16be3d = _0x4bce; if (_0x59869c[_0x16be3d(0x874)] === _0x16be3d(0xadb)) return _0x1d2a6a[_0x16be3d(0x7cf)]?.[_0x16be3d(0x7e6)] || _0x16be3d(0x513); if (_0x11b303[_0x16be3d(0x832)] === _0x16be3d(0x8aa)) { if (_0x16be3d(0x1b0) !== _0x16be3d(0x1b0)) { if (_0x178d90['diaryPressTimer']) _0x2a0fa0(_0x3ca5d4[_0x16be3d(0x2b1)]); const _0x296d65 = _0x577e79['target'][_0x16be3d(0x508)]('.diary-entry'); if (!_0x296d65) return; const _0x378f8c = _0x296d65[_0x16be3d(0xaac)][_0x16be3d(0x83c)], _0x15de53 = _0x296d65['classList'][_0x16be3d(0xc7d)]('user') ? _0x16be3d(0xadb) : 'ai'; if (!_0x378f8c) return; const _0x3a0aba = () => { const _0x37d7cf = _0x16be3d; _0x59e955[_0x37d7cf(0x2b1)] = _0x2a4a14(() => { const _0x5ca618 = _0x37d7cf; if (_0x5be9b7[_0x5ca618(0x832)] === _0x5ca618(0xae6)) _0x56795c[_0x5ca618(0x506)](); _0x5ab713(_0x621a71(_0x378f8c, 0xa), _0x15de53); }, 0x320); }, _0x2be3c3 = () => { const _0x3a7e97 = _0x16be3d; if (_0xdb4abe['diaryPressTimer']) _0x21f6b3(_0x471e08[_0x3a7e97(0x2b1)]); }; _0x116b81[_0x16be3d(0x672)]('mouseup', _0x2be3c3, { 'once': !![] }), _0x18d8e5[_0x16be3d(0x672)](_0x16be3d(0x6c4), _0x2be3c3, { 'once': !![] }), _0x5c555a[_0x16be3d(0x672)]('touchcancel', _0x2be3c3, { 'once': !![] }), _0x3a0aba(); } else { const _0x47363a = _0x59869c[_0x16be3d(0xa71)] ? _0x3e5497(_0x59869c['senderId']) : null; return _0x47363a?.[_0x16be3d(0x7e6)] || _0x16be3d(0x61e); } } else { const _0x36180b = _0x3e5497(_0x11b303[_0x16be3d(0x182)][0x0]); return _0x36180b?.[_0x16be3d(0x7e6)] || 'AI'; } }, _0x16c77d = _0x3fd38a[_0x367196(0x59d)](-_0x48b10a), _0x19c29a = []; for (const _0x1a9a20 of _0x16c77d) { const _0x40c09e = new Date(_0x1a9a20[_0x367196(0x83c)])[_0x367196(0x28e)]('zh-CN', { 'hour': _0x367196(0x5d1), 'minute': _0x367196(0x5d1) }); _0x1a9a20[_0x367196(0x415)] && _0x19c29a[_0x367196(0x8b0)]('[' + _0x40c09e + _0x367196(0x77c) + _0x40f636(_0x1a9a20) + ']\x20' + String(_0x1a9a20[_0x367196(0x415)])[_0x367196(0x667)]()); } return _0x19c29a; } function _0x3a16e2(_0x3518fa) { const _0xc0a31e = _0x1eaaca; if (_0x3518fa[_0xc0a31e(0x832)] === _0xc0a31e(0x8aa)) return _0xc0a31e(0x35d) + (_0x3518fa[_0xc0a31e(0x7e6)] || _0xc0a31e(0x5d8)) + '」'; const _0x266705 = _0x3e5497(_0x3518fa[_0xc0a31e(0x182)][0x0]); return '与\x20' + (_0x266705?.[_0xc0a31e(0x7e6)] || '未知角色') + _0xc0a31e(0x75d); } function _0x4b1697(_0x2bdb4f) { const _0x59de8c = _0x1eaaca; try { const _0x29fbcd = localStorage[_0x59de8c(0x1c6)](_0x59de8c(0x6ba) + _0x2bdb4f), _0x54faea = JSON[_0x59de8c(0xac1)](_0x29fbcd || '[]'); return Array[_0x59de8c(0x57e)](_0x54faea) ? _0x54faea : []; } catch { return []; } } function _0x57f616(_0x27a556) { const _0x1f965e = _0x1eaaca, _0x533d41 = Math[_0x1f965e(0x1aa)](0x1, Number(_0x1d2a6a[_0x1f965e(0x2de)]?.[_0x1f965e(0x4fc)] ?? 0x64)), _0x30fddc = _0x1d2a6a[_0x1f965e(0x816)][_0x1f965e(0x564)](_0x27ce1d => _0x27ce1d['participantIds']['includes'](_0x27a556)), _0x30252c = _0x30fddc[_0x1f965e(0x719)](_0x3d1e52 => { const _0x2ad7b4 = _0x1f965e, _0x39e97f = _0x4b1697(_0x3d1e52['id']), _0x312d4c = _0x39e97f[_0x2ad7b4(0x2ab)] > 0x0 ? _0x39e97f[_0x39e97f[_0x2ad7b4(0x2ab)] - 0x1] : null; return { 'chat': _0x3d1e52, 'history': _0x39e97f, 'lastTimestamp': _0x312d4c ? _0x312d4c[_0x2ad7b4(0x83c)] : 0x0 }; })['filter'](_0x39c7b3 => _0x39c7b3[_0x1f965e(0x420)][_0x1f965e(0x2ab)] > 0x0); _0x30252c['sort']((_0x5e7185, _0x31874c) => _0x31874c['lastTimestamp'] - _0x5e7185['lastTimestamp']); const _0x1b868c = [], _0x2f5acb = {}; return _0x30252c[_0x1f965e(0x83e)]((_0x52c208, _0x3c0cd4) => { const _0x272168 = _0x1f965e; if (_0x272168(0x24b) === _0x272168(0xa59)) !_0x27d302[_0x272168(0x20e)](_0x272168(0x566))['contains'](_0x3e3783[_0x272168(0xbdf)]) && (_0xffa6d7[_0x272168(0xa47)][_0x272168(0x8f0)](_0x272168(0x5a2)), _0xd22284['classList'][_0x272168(0x8f0)](_0x272168(0x445))); else { const _0x5437b8 = _0xee77e3(_0x52c208[_0x272168(0xa68)], _0x52c208[_0x272168(0x420)], _0x533d41); if (_0x5437b8[_0x272168(0x2ab)] === 0x0) return; const _0x376d62 = _0x3c0cd4 === 0x0 ? _0x272168(0x304) : _0x272168(0x55d); _0x1b868c[_0x272168(0x8b0)](_0x272168(0xad9) + _0x376d62 + _0x3a16e2(_0x52c208[_0x272168(0xa68)]) + '\x0a' + _0x5437b8[_0x272168(0x973)]('\x0a')), _0x2f5acb[_0x52c208['chat']['id']] = _0x5437b8[_0x272168(0x2ab)]; } }), { 'omniText': _0x1b868c[_0x1f965e(0x973)]('\x0a\x0a'), 'usedCounts': _0x2f5acb }; } function _0x4bce(_0x58a289, _0x5a8dc1) { const _0xf72182 = _0xf721(); return _0x4bce = function (_0x4bceae, _0x5c92e2) { _0x4bceae = _0x4bceae - 0x180; let _0xe3d19f = _0xf72182[_0x4bceae]; return _0xe3d19f; }, _0x4bce(_0x58a289, _0x5a8dc1); } function _0x3f02c3(_0x2bbff9) { const _0x54c455 = _0x1eaaca; let _0x33bc1f = null; const _0x5a971c = _0x1d2a6a[_0x54c455(0x816)][_0x54c455(0x564)](_0x4839c4 => _0x4839c4[_0x54c455(0x182)][_0x54c455(0x7d3)](_0x2bbff9)); for (const _0x50553a of _0x5a971c) { const _0x5d8581 = _0x4b1697(_0x50553a['id']); if (_0x5d8581 && _0x5d8581[_0x54c455(0x2ab)] > 0x0) { const _0x5a44aa = _0x5d8581[_0x5d8581[_0x54c455(0x2ab)] - 0x1]; (!_0x33bc1f || _0x5a44aa[_0x54c455(0x83c)] > _0x33bc1f['timestamp']) && (_0x33bc1f = _0x5a44aa); } } return _0x33bc1f; } function _0x33378f(_0xb9ca8b) { const _0x2e7c3c = _0x1eaaca; if (!_0xb9ca8b || !_0xb9ca8b[_0x2e7c3c(0x7d3)](',')) return _0xb9ca8b; const _0x646d8c = _0xb9ca8b[_0x2e7c3c(0xc21)](',')['map'](_0x491e6a => _0x491e6a[_0x2e7c3c(0x667)]()); return _0x646d8c[Math[_0x2e7c3c(0x7a5)](Math[_0x2e7c3c(0x4bc)]() * _0x646d8c[_0x2e7c3c(0x2ab)])]; } function _0x2f43da(_0x1df548) { return new Promise(_0x32d83a => { const _0x44b931 = _0x4bce; if (_0x44b931(0x7a0) === _0x44b931(0xac0)) { const _0x59e7c3 = _0x5254ad[_0x44b931(0x94d)](_0x44b931(0x271)), _0x19ec81 = _0x4e5293[_0x44b931(0x345)][_0x44b931(0x2ec)](_0x17241a => _0x17241a['id'] === _0x5276a9['id']); if (!_0x19ec81) { _0x3d3041[_0x44b931(0x1be)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:', _0x480e5e['id']); return; } const _0x1ddde5 = _0x59e7c3[_0x44b931(0x802)]['includes'](_0x19ec81[_0x44b931(0x324)]) && !_0x59e7c3[_0x44b931(0x7f2)]; _0x1ddde5 ? _0x59e7c3[_0x44b931(0x48b)]() : (_0x341b97 = { 'title': _0x19ec81[_0x44b931(0x4d2)], 'artist': _0x19ec81['artist'], 'cover': _0x19ec81[_0x44b931(0x8ae)] || (_0x19ec81[_0x44b931(0xb05)] ? _0x44b931(0xb23) + _0x19ec81[_0x44b931(0xb05)] : _0xc0d046), 'isFromLibrary': !![] }, _0x59e7c3[_0x44b931(0x802)] = _0x19ec81['playableUrl'], _0x59e7c3['play'](), _0x27dc4c['currentlyPlayingIndex'] = _0x19a228['musicPlaylist']['findIndex'](_0x50606b => _0x50606b['id'] === _0x216d46['id']), _0x56b094()); } else { const _0xf76dc = document[_0x44b931(0x94d)](_0x44b931(0x853)), _0x362353 = document[_0x44b931(0x94d)](_0x44b931(0xc67)), _0x5bb2a7 = document[_0x44b931(0x94d)]('modal-ok'), _0x4982d8 = document[_0x44b931(0x94d)](_0x44b931(0xb14)), _0x1e7a4b = document['getElementById'](_0x44b931(0x459)); _0x362353[_0x44b931(0x724)] = _0x1df548, _0xf76dc[_0x44b931(0x7be)][_0x44b931(0x180)] = _0x44b931(0x67c); const _0x55f882 = _0xcb35e8 => { const _0xf8580a = _0x44b931; _0xf76dc[_0xf8580a(0x7be)][_0xf8580a(0x180)] = 'none', _0x5bb2a7[_0xf8580a(0x997)] = _0x4982d8[_0xf8580a(0x997)] = _0x1e7a4b['onclick'] = null, document['removeEventListener'](_0xf8580a(0x611), _0x7171b9), _0x32d83a(_0xcb35e8); }, _0x7171b9 = _0x582f21 => { const _0x5790fe = _0x44b931; if (_0x5790fe(0x3d8) !== 'wLTwG') { if (_0x582f21[_0x5790fe(0x5c2)] === _0x5790fe(0x82c)) _0x55f882(![]); if (_0x582f21[_0x5790fe(0x5c2)] === _0x5790fe(0x2f3)) _0x55f882(!![]); } else _0xf858b2['push'](_0x3fff48); }; _0x5bb2a7[_0x44b931(0x997)] = () => _0x55f882(!![]), _0x4982d8[_0x44b931(0x997)] = () => _0x55f882(![]), _0x1e7a4b[_0x44b931(0x997)] = () => _0x55f882(![]), document['addEventListener'](_0x44b931(0x611), _0x7171b9); } }); } function _0x5294eb(_0x136535) { const _0x57eea2 = _0x1eaaca, _0x5c6151 = document[_0x57eea2(0x94d)](_0x57eea2(0x7bc)); _0x5c6151[_0x57eea2(0x724)] = _0x136535, _0x5c6151['style'][_0x57eea2(0x180)] = _0x57eea2(0x26d); if (_0x5294eb['_t']) clearTimeout(_0x5294eb['_t']); _0x5294eb['_t'] = setTimeout(() => { const _0x3d357a = _0x57eea2; if (_0x3d357a(0xc6b) === _0x3d357a(0xc6b)) _0x5c6151['style'][_0x3d357a(0x180)] = _0x3d357a(0x546); else { const _0xc5158f = _0x2b6d65['createElement'](_0x3d357a(0x2e4)); _0xc5158f[_0x3d357a(0x41a)] = _0xbbf2ea['id'], _0xc5158f[_0x3d357a(0x724)] = _0x3008d1['name'], _0xe9eaf[_0x3d357a(0xc15)](_0xc5158f); } }, 0x640); } function _0x1ce649() { const _0x71974f = _0x1eaaca, _0x365367 = document[_0x71974f(0x94d)](_0x71974f(0x6de)); if (!_0x365367) return; let _0x85e881 = 0x0, _0x1ebbb8 = 0x0; const _0x49f925 = 0x50; let _0x392c08 = ![]; const _0x12bf3a = _0x5485e2 => { const _0x5dfc08 = _0x71974f; _0x85e881 = _0x5485e2[_0x5dfc08(0xa9b)] ? _0x5485e2[_0x5dfc08(0xa9b)][0x0][_0x5dfc08(0x854)] : _0x5485e2[_0x5dfc08(0x854)], _0x1ebbb8 = 0x0, _0x365367[_0x5dfc08(0x7be)]['transition'] = _0x5dfc08(0x546), _0x392c08 = !![], _0x5485e2[_0x5dfc08(0x832)] === 'mousedown' && (document[_0x5dfc08(0x672)]('mousemove', _0x1f6e16), document[_0x5dfc08(0x672)]('mouseup', _0x3f2a88)); }, _0x1f6e16 = _0x36458b => { const _0x188817 = _0x71974f; if ('csyRR' !== _0x188817(0x294)) { if (!_0x392c08) return; const _0x307946 = _0x36458b[_0x188817(0xa9b)] ? _0x36458b[_0x188817(0xa9b)][0x0][_0x188817(0x854)] : _0x36458b[_0x188817(0x854)]; _0x1ebbb8 = _0x307946 - _0x85e881; if (_0x1ebbb8 < 0x0) { if (_0x188817(0xb47) === _0x188817(0xb47)) { const _0x266b16 = Math['abs'](_0x1ebbb8), _0x1c1a9d = 0.4, _0x1f63f0 = Math[_0x188817(0xc4e)](_0x266b16, _0x1c1a9d) * 0x14; _0x365367[_0x188817(0x7be)]['transform'] = _0x188817(0x219) + _0x1f63f0 + 'px)'; } else _0x2f213c[_0x188817(0x599)](_0x188817(0x2e7))['forEach'](_0x4d309d => { const _0xe4e51c = _0x188817; _0x4d309d[_0xe4e51c(0x672)](_0xe4e51c(0xc5e), () => { const _0x5e8513 = _0xe4e51c, _0x2bb0d2 = _0x47bf4b[_0x5e8513(0xac1)](_0x4d309d[_0x5e8513(0xaac)]['log'][_0x5e8513(0x9ed)](/&quot;/g, '\x22')), _0x250748 = _0x4d309d[_0x5e8513(0xaac)][_0x5e8513(0x231)], _0x3c7d80 = _0x4d309d[_0x5e8513(0xaac)][_0x5e8513(0x8fa)]; _0x6b4e11(_0x250748, _0x3c7d80, _0x2bb0d2); }); }); } } else { const _0x261900 = _0x14f4b8[_0x188817(0x20e)](_0x188817(0x2a6) + _0x49225c); if (_0x261900) _0x261900['checked'] = !![]; } }, _0x3f2a88 = () => { const _0x407797 = _0x71974f; if (_0x407797(0x5e2) === _0x407797(0x4c8)) _0x4428b0[_0x407797(0x8b0)]({ 'id': 'default', 'name': _0x407797(0x85b) }); else { if (!_0x392c08) return; _0x392c08 = ![], _0x365367['style'][_0x407797(0x9cb)] = _0x407797(0x9ce); if (_0x1ebbb8 < -_0x49f925) _0x365367[_0x407797(0xa47)]['add'](_0x407797(0x400)); else { if (_0x407797(0x7a8) !== _0x407797(0x207)) _0x365367['style'][_0x407797(0xb82)] = _0x407797(0x899); else { const _0x970a10 = _0x4644c7[_0x407797(0x94d)](_0x407797(0xb06)); if (!_0x970a10) return; const _0x5bf312 = _0x405aa8[_0x407797(0x1c6)](_0x407797(0x370)) || '35'; _0x210a8f[_0x407797(0x903)]['style'][_0x407797(0x318)](_0x407797(0xb37), _0x5bf312), _0x970a10[_0x407797(0x41a)] = _0x5bf312, _0x970a10[_0x407797(0x672)](_0x407797(0xac7), () => { const _0x3fe150 = _0x407797, _0x112a88 = _0x970a10[_0x3fe150(0x41a)]; _0x2b7b70['documentElement']['style'][_0x3fe150(0x318)]('--primary-hue', _0x112a88), _0x263aa1[_0x3fe150(0x2ca)](_0x3fe150(0x370), _0x112a88), _0x125c82(); }); } } document[_0x407797(0x6a2)](_0x407797(0x45f), _0x1f6e16), document['removeEventListener']('mouseup', _0x3f2a88); } }; _0x365367[_0x71974f(0x672)](_0x71974f(0xae6), _0x12bf3a, { 'passive': !![] }), _0x365367[_0x71974f(0x672)](_0x71974f(0x51e), _0x1f6e16, { 'passive': !![] }), _0x365367[_0x71974f(0x672)](_0x71974f(0x6c4), _0x3f2a88), _0x365367[_0x71974f(0x672)]('mousedown', _0x12bf3a); } function _0x1e0209() { const _0x2fff0b = _0x1eaaca, _0x5ac8ba = document[_0x2fff0b(0x94d)](_0x2fff0b(0x6a8)), _0x207b42 = document[_0x2fff0b(0x94d)](_0x2fff0b(0x6ed)), _0x5e5aee = document[_0x2fff0b(0x599)](_0x2fff0b(0xa66)), _0x441e75 = document[_0x2fff0b(0x94d)](_0x2fff0b(0x4b4)); let _0x5e715f = 0x0; const _0x1744c3 = 0x2; _0x207b42[_0x2fff0b(0x7be)][_0x2fff0b(0x7f1)] = _0x2fff0b(0x5d6), _0x441e75[_0x2fff0b(0x7be)][_0x2fff0b(0x180)] = _0x2fff0b(0x67c); function _0x127212(_0x3927e2) { const _0x32bd9f = _0x2fff0b; if (_0x3927e2 < 0x0 || _0x3927e2 >= _0x1744c3) return; _0x207b42[_0x32bd9f(0x7be)][_0x32bd9f(0xb82)] = 'translateX(-' + _0x3927e2 * (0x64 / _0x1744c3) + '%)', _0x5e5aee[_0x32bd9f(0x83e)](_0x4bdf26 => _0x4bdf26[_0x32bd9f(0xa47)][_0x32bd9f(0x8f0)](_0x32bd9f(0xbb6))), _0x5e5aee[_0x3927e2]['classList']['add'](_0x32bd9f(0xbb6)), _0x5e715f = _0x3927e2; } _0x127212(0x0), _0x5e5aee[_0x2fff0b(0x83e)](_0x983ee5 => { const _0x248a2e = _0x2fff0b; if ('QEuGv' === _0x248a2e(0xab6)) { if (_0xb1b091) _0x1da770(_0x442be2); const _0x5c4c28 = _0x55a419[_0x248a2e(0xbdf)]['closest'](_0x248a2e(0x64b)); if (!_0x5c4c28) return; const _0x901fbf = _0x5c4c28[_0x248a2e(0xaac)]['id']; if (!_0x901fbf) return; const _0x237c27 = () => { _0x13d4e4 = _0x2596e0(() => { const _0x1bbe10 = _0x4bce; if (_0x313e1f[_0x1bbe10(0x832)] === _0x1bbe10(0xae6)) _0x42607d['preventDefault'](); _0x375e83(_0x901fbf); }, 0x320); }, _0x105d9d = () => { if (_0xba9656) _0x36b2df(_0x5a4c12); }; _0x4913de['addEventListener'](_0x248a2e(0x731), _0x105d9d, { 'once': !![] }), _0x406a94[_0x248a2e(0x672)](_0x248a2e(0x6c4), _0x105d9d, { 'once': !![] }), _0x3abd80['addEventListener'](_0x248a2e(0xa3f), _0x105d9d, { 'once': !![] }), _0x5058f0[_0x248a2e(0x672)]('touchmove', _0x105d9d, { 'once': !![] }), _0x237c27(); } else _0x983ee5[_0x248a2e(0x672)](_0x248a2e(0xc5e), () => { const _0x465a2c = _0x248a2e, _0x31ad1b = parseInt(_0x983ee5[_0x465a2c(0xaac)][_0x465a2c(0x44a)], 0xa); _0x127212(_0x31ad1b); }); }); let _0x2ed0cd = 0x0, _0x19556c = 0x0, _0x1c2a5f = 0x0, _0x3495ae = ![], _0x44aa29 = ''; _0x5ac8ba[_0x2fff0b(0x672)](_0x2fff0b(0xae6), _0x5d9a3d => { const _0x227876 = _0x2fff0b; 'aoslJ' !== _0x227876(0x3cc) ? (_0x2ed0cd = _0x5d9a3d[_0x227876(0xa9b)][0x0][_0x227876(0x825)], _0x19556c = _0x5d9a3d[_0x227876(0xa9b)][0x0]['clientY'], _0x3495ae = !![], _0x44aa29 = '') : _0x222bd3(); }, { 'passive': !![] }), _0x5ac8ba[_0x2fff0b(0x672)](_0x2fff0b(0x51e), _0x49213f => { const _0x1680fa = _0x2fff0b; if (!_0x3495ae) return; if (_0x44aa29 === '') { const _0x11b2d2 = _0x49213f['touches'][0x0][_0x1680fa(0x825)] - _0x2ed0cd, _0x2c0b3d = _0x49213f['touches'][0x0][_0x1680fa(0x854)] - _0x19556c; Math[_0x1680fa(0x1db)](_0x11b2d2) > Math[_0x1680fa(0x1db)](_0x2c0b3d) ? _0x44aa29 = _0x1680fa(0xc09) : _0x44aa29 = _0x1680fa(0x5bb); } _0x44aa29 === 'horizontal' && _0x49213f['preventDefault'](); }, { 'passive': ![] }), _0x5ac8ba[_0x2fff0b(0x672)]('touchend', _0x156ec5 => { const _0xce2c1b = _0x2fff0b; if (!_0x3495ae) return; _0x1c2a5f = _0x156ec5[_0xce2c1b(0x912)][0x0]['clientX']; if (_0x44aa29 === _0xce2c1b(0xc09)) { if ('bEFGA' === 'WqzDf') { const _0xe70724 = _0x7b5cba['createElement'](_0xce2c1b(0x2e4)); _0xe70724[_0xce2c1b(0x41a)] = _0x18efc4['id'], _0xe70724[_0xce2c1b(0x724)] = _0xaf3fa1[_0xce2c1b(0x7e6)], _0x3df3af[_0xce2c1b(0xc15)](_0xe70724); } else _0x2196d0(); } _0x3495ae = ![]; }); function _0x2196d0() { const _0x5c3387 = _0x2fff0b, _0x5f54f3 = 0x32; if (_0x1c2a5f < _0x2ed0cd - _0x5f54f3) _0x5c3387(0x75b) === _0x5c3387(0x75b) ? _0x127212(_0x5e715f + 0x1) : _0x3cd796(); else _0x1c2a5f > _0x2ed0cd + _0x5f54f3 && _0x127212(_0x5e715f - 0x1); } } function _0x52a1e3() { return new Promise(_0x21bc86 => { const _0x1ed4a2 = _0x4bce, _0x523742 = document[_0x1ed4a2(0x94d)](_0x1ed4a2(0x662)), _0x55efa3 = document[_0x1ed4a2(0x94d)](_0x1ed4a2(0x7ca)), _0xe6970a = document[_0x1ed4a2(0x94d)](_0x1ed4a2(0x8e8)), _0x24df15 = document['getElementById'](_0x1ed4a2(0xa33)), _0x559877 = document['getElementById']('cancel-music-input'), _0x7490c9 = document[_0x1ed4a2(0x94d)]('music-input-backdrop'); _0x55efa3['value'] = '', _0xe6970a['value'] = '', _0x523742['classList'][_0x1ed4a2(0x5ee)]('show'), _0x55efa3[_0x1ed4a2(0x75e)](); const _0x534d71 = _0x4dbdf4 => { const _0x11d281 = _0x1ed4a2; _0x11d281(0x363) !== 'bMTsv' ? (_0x523742[_0x11d281(0xa47)][_0x11d281(0x8f0)](_0x11d281(0x7dd)), _0x24df15['onclick'] = null, _0x559877[_0x11d281(0x997)] = null, _0x7490c9[_0x11d281(0x997)] = null, document['removeEventListener'](_0x11d281(0x611), _0x1bea4f), _0x21bc86(_0x4dbdf4)) : _0x1e87e0(_0x1ea1a6['id']); }, _0x49dd12 = () => { const _0x46c17e = _0x1ed4a2; if (_0x46c17e(0x2cc) !== 'VYMlB') { const _0x28da86 = _0x55efa3[_0x46c17e(0x41a)][_0x46c17e(0x667)](), _0x205bcb = _0xe6970a[_0x46c17e(0x41a)][_0x46c17e(0x667)](); if (!_0x28da86 || !_0x205bcb) { if (_0x46c17e(0xa27) === 'KaNnj') _0xfb143a *= _0x4f7c78 / _0x5a3106, _0x135906 = _0x5ca07d; else { _0x5294eb(_0x46c17e(0x544)); return; } } _0x534d71({ 'songName': _0x28da86, 'artist': _0x205bcb }); } else _0x47ecb6['appendChild'](_0x438b1f[_0x46c17e(0x2fa)]('div')); }, _0x1bea4f = _0x2ebd52 => { const _0x33ee5f = _0x1ed4a2; if (_0x2ebd52['key'] === _0x33ee5f(0x82c)) _0x534d71(null); _0x2ebd52['key'] === _0x33ee5f(0x2f3) && ('ZMhRl' !== _0x33ee5f(0xbf1) ? (_0xde4090(), _0x49336b(_0x33ee5f(0xa68), _0x33ee5f(0x5a6))) : (_0x2ebd52[_0x33ee5f(0x506)](), _0x49dd12())); }; _0x24df15['onclick'] = _0x49dd12, _0x559877[_0x1ed4a2(0x997)] = () => _0x534d71(null), _0x7490c9[_0x1ed4a2(0x997)] = () => _0x534d71(null), document[_0x1ed4a2(0x672)](_0x1ed4a2(0x611), _0x1bea4f); }); } function _0x4389a5(_0x50e04a) { const _0x29f219 = _0x1eaaca; if (!_0x50e04a) return []; const _0x4b75c = _0x50e04a[_0x29f219(0x667)](); if (_0x4b75c['startsWith']('<div') && _0x4b75c['endsWith'](_0x29f219(0x2d6))) { if (_0x29f219(0xc76) !== _0x29f219(0xc76)) { _0x4243f4(_0x29f219(0x7ea)); return; } else return [_0x4b75c]; } const _0x213642 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\])/g, _0x18c40d = _0x29f219(0x252), _0x1feabe = [], _0xef31df = _0x50e04a[_0x29f219(0x9ed)](_0x213642, _0x565c41 => { const _0x4f112d = _0x29f219; if (_0x4f112d(0xbdd) === _0x4f112d(0xb79)) try { _0x4c216a[_0x575dc9] = _0x772d6a['parse'](_0x556996); } catch (_0x322a89) { } else return _0x1feabe[_0x4f112d(0x8b0)](_0x565c41), _0x18c40d; }), _0x554cd1 = _0xef31df[_0x29f219(0xc21)](_0x18c40d), _0x2adb58 = []; let _0x17ceb0 = 0x0; return _0x554cd1[_0x29f219(0x83e)]((_0x490dc5, _0x5e3554) => { const _0x10c5c0 = _0x29f219; if (_0x10c5c0(0x242) !== _0x10c5c0(0x242)) _0xd3b32e['textContent'] = _0x10c5c0(0xaf7); else { const _0x156f62 = _0x490dc5[_0x10c5c0(0x667)](); _0x156f62 && _0x2adb58[_0x10c5c0(0x8b0)](..._0x511112(_0x156f62)), _0x17ceb0 < _0x1feabe[_0x10c5c0(0x2ab)] && ('vduuG' !== _0x10c5c0(0x5a1) ? (_0x2adb58[_0x10c5c0(0x8b0)](_0x1feabe[_0x17ceb0][_0x10c5c0(0x667)]()), _0x17ceb0++) : (_0x2457d7[_0x10c5c0(0x5ca)][_0x10c5c0(0xa95)](_0xd26959, 0x1), _0x1a17b5(), _0x171f58(), _0x35a04c(), _0x1dcb24(), _0x4af54f('已经删掉了。'))); } }), _0x2adb58; } function _0x57a073(_0x5f23bc, _0x41ecb7, _0x70d489 = '') { const _0x44b3e5 = _0x1eaaca, _0x557913 = document[_0x44b3e5(0x2fa)](_0x44b3e5(0xaf1)); _0x557913['className'] = _0x44b3e5(0x8b8) + _0x70d489; const _0xd4f59c = document['createElement'](_0x44b3e5(0x25f)); _0xd4f59c[_0x44b3e5(0x802)] = _0x5f23bc, _0xd4f59c['className'] = _0x44b3e5(0x7a4); const _0x58e82f = document['createElement'](_0x44b3e5(0xaf1)); return _0x58e82f[_0x44b3e5(0x1ea)] = _0x44b3e5(0x206), _0x41ecb7 && (_0x44b3e5(0x5b7) !== _0x44b3e5(0x774) ? _0x58e82f[_0x44b3e5(0x7be)][_0x44b3e5(0x4d7)] = 'url(\x27' + _0x41ecb7 + '\x27)' : (_0x115b96[_0x44b3e5(0x345)] = _0x15fd73, _0x45cb1a[_0x44b3e5(0x4dd)] = _0x2cae70, _0x2c0b36[_0x44b3e5(0x22c)] = ![], _0x541595())), _0x557913['appendChild'](_0xd4f59c), _0x557913[_0x44b3e5(0xc15)](_0x58e82f), _0x557913; } function _0x43b829(_0x382f6a) { const _0x114ecd = _0x1eaaca; if (!_0x382f6a) return []; let _0x16ccc2 = String(_0x382f6a)[_0x114ecd(0x667)](); const _0x5b7e6c = _0x16ccc2[_0x114ecd(0x5f9)](/```(?:json)?([\s\S]*?)```/i); if (_0x5b7e6c) _0x16ccc2 = _0x5b7e6c[0x1]['trim'](); try { if (_0x114ecd(0x1f6) !== _0x114ecd(0xbf2)) { const _0x2b0b3e = JSON['parse'](_0x16ccc2); if (_0x2b0b3e && Array[_0x114ecd(0x57e)](_0x2b0b3e['reply'])) return _0x2b0b3e[_0x114ecd(0x967)]['map'](_0x171b48 => typeof _0x171b48 === _0x114ecd(0x3e9) ? _0x171b48 : _0x171b48?.[_0x114ecd(0x415)])[_0x114ecd(0x564)](Boolean)[_0x114ecd(0x585)](_0x511112); const _0x41f084 = ['response', _0x114ecd(0x1af), _0x114ecd(0x6da), 'text', _0x114ecd(0x415), _0x114ecd(0xb61), _0x114ecd(0x85c)]; if (_0x2b0b3e && typeof _0x2b0b3e === 'object') { const _0xe7a72c = []; for (const _0x555029 of Object[_0x114ecd(0x1b1)](_0x2b0b3e)) { const _0x21c5ae = _0x555029[_0x114ecd(0x8ce)](); if (_0x41f084['some'](_0xf8c9d => _0x21c5ae[_0x114ecd(0x3c5)](_0xf8c9d))) { if (_0x114ecd(0x538) === _0x114ecd(0x538)) { const _0x33626a = _0x2b0b3e[_0x555029]; if (typeof _0x33626a === 'string') _0xe7a72c[_0x114ecd(0x8b0)](_0x33626a); if (Array['isArray'](_0x33626a)) _0x33626a['forEach'](_0x448ac6 => { const _0x2151bf = _0x114ecd; if (typeof _0x448ac6 === 'string') _0xe7a72c[_0x2151bf(0x8b0)](_0x448ac6); }); } else _0x30f665[_0x114ecd(0xa4f)] = _0x4e14d7['scrollHeight']; } } if (_0xe7a72c[_0x114ecd(0x2ab)]) return _0xe7a72c['flatMap'](_0x511112)[_0x114ecd(0x59d)](0x0, 0x9); } } else _0x4952ab(_0x1b67f4, { 'force': !![], 'delayMs': _0x2dfd10 }), _0x448dcd += 0x1f4; } catch { } if (/[{\[]/[_0x114ecd(0x958)](_0x16ccc2) && /":/[_0x114ecd(0x958)](_0x16ccc2)) { const _0x458328 = [], _0x4f38a5 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x1ec7da; while ((_0x1ec7da = _0x4f38a5['exec'](_0x16ccc2)) !== null) { const _0x18ad04 = _0x1ec7da[0x1][_0x114ecd(0x9ed)](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x114ecd(0x667)](); if (_0x18ad04) _0x458328[_0x114ecd(0x8b0)](_0x18ad04); } if (_0x458328[_0x114ecd(0x2ab)]) return _0x458328[_0x114ecd(0x585)](_0x511112)[_0x114ecd(0x59d)](0x0, 0x9); } return _0x511112(_0x16ccc2); } function _0x511112(_0x2a2bd0) { const _0x42ff62 = _0x1eaaca, _0xca03a8 = String(_0x2a2bd0)[_0x42ff62(0x667)](); if (_0xca03a8[_0x42ff62(0x3c5)](_0x42ff62(0x64d)) && _0xca03a8[_0x42ff62(0x37c)](_0x42ff62(0x2d6))) return [_0xca03a8]; const _0x1e537e = _0xca03a8[_0x42ff62(0xc21)](/(?<=[。！？!?…])\s+|[\r\n]+/)['map'](_0x5ac475 => _0x5ac475[_0x42ff62(0x667)]())[_0x42ff62(0x564)](Boolean); if (_0x1e537e[_0x42ff62(0x2ab)] > 0x0) { if (_0x42ff62(0x8f1) !== 'VgrSQ') return; else return _0x1e537e[_0x42ff62(0x59d)](0x0, 0xc); } return [_0xca03a8]['filter'](Boolean); } const _0x1e3691 = new Promise((_0x562899, _0x2bf1e9) => { const _0x61d32e = _0x1eaaca, _0x5e7588 = indexedDB[_0x61d32e(0x680)](_0x4591c3, 0x3); _0x5e7588[_0x61d32e(0x2b0)] = () => _0x2bf1e9(_0x61d32e(0xb28)), _0x5e7588['onsuccess'] = () => _0x562899(_0x5e7588['result']), _0x5e7588['onupgradeneeded'] = _0x2e8c05 => { const _0x54e649 = _0x61d32e; if ('HWWll' !== _0x54e649(0xa37)) { const _0xc1aa43 = _0x2e8c05[_0x54e649(0xbdf)][_0x54e649(0xa75)]; console['log'](_0x54e649(0x4ec) + _0xc1aa43[_0x54e649(0x722)] + '...'); !_0xc1aa43[_0x54e649(0xa44)]['contains'](_0x42e918) && (console[_0x54e649(0x668)](_0x54e649(0x542) + _0x42e918), _0xc1aa43[_0x54e649(0x637)](_0x42e918, { 'keyPath': 'id' })); !_0xc1aa43[_0x54e649(0xa44)][_0x54e649(0xc7d)](_0x54e649(0x1c0)) && (console[_0x54e649(0x668)](_0x54e649(0x4d9)), _0xc1aa43[_0x54e649(0x637)](_0x54e649(0x1c0), { 'keyPath': 'id' })); if (!_0xc1aa43['objectStoreNames'][_0x54e649(0xc7d)](_0x2c779d)) { if (_0x54e649(0xa51) === 'OmFtq') { const _0x125f80 = (_0x32ada0['items'] || [])[_0x54e649(0x719)](_0x1ccc1b => _0x54e649(0x902) + _0x1ccc1b + _0x54e649(0xc30))['join'](''); return _0x54e649(0xc0e) + (_0x36fba4[_0x54e649(0x818)] || '未知餐厅') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x2b67ec[_0x54e649(0x83c)] || '') + _0x54e649(0x6be) + (_0x18b725[_0x54e649(0x950)] || '已送达') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x125f80 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x58504a[_0x54e649(0x5e9)] || 0x0)[_0x54e649(0x3a8)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } else console['log'](_0x54e649(0x542) + _0x2c779d), _0xc1aa43['createObjectStore'](_0x2c779d, { 'keyPath': 'id' }); } } else _0x1798f1[_0x54e649(0x7be)]['textShadow'] = _0x54e649(0x813); }; }); async function _0xe5b0ea(_0x50d004) { const _0x1e2a93 = await _0x1e3691; return new Promise((_0x427599, _0x53e743) => { const _0x2d72f9 = _0x4bce, _0x460f0b = _0x1e2a93[_0x2d72f9(0x25c)](_0x42e918, _0x2d72f9(0xb76)), _0x493d13 = _0x460f0b[_0x2d72f9(0x926)](_0x42e918), _0x1cdbf1 = _0x493d13[_0x2d72f9(0x689)](_0x50d004); _0x1cdbf1['onsuccess'] = () => _0x427599(_0x1cdbf1['result'] ? _0x1cdbf1[_0x2d72f9(0xa75)][_0x2d72f9(0x3c3)] : null), _0x1cdbf1[_0x2d72f9(0x2b0)] = () => _0x53e743(_0x1cdbf1[_0x2d72f9(0x1be)]); }); } function _0xf721() { const _0x2cdfeb = ['noir_migration_music_v1_complete', '保存失败，你的表情包是不是太多了？', ']\x20[image]', 'meetingView', 'input', '-\x20你拍过一张照片，内容是：“', 'group-chat-member-list', 'post_', '这本日记本来就是空的，你还想清空什么？', 'meeting-send-button', '已放逐。', 'dKpFH', 'YHPsu', '刷新了\x20', '正在打包数据，请稍候...', '-input', '天没动静了。你的角色们应该发起新的问候或话题。', 'friendCircleEdit', 'BHBON', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', '</span><div><div\x20class=\x22description\x22>', '加载已保存字体失败:', '##\x20', 'fHrPK', 'user', 'back-to-snoop-list-from-phone', '委屈那我歇了', 'pZcdw', 'ZseMV', '”，里面有\x20', 'diaryCurrentPage', 'Hzuaj', 'snoop-phone-header', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'gdBDZ', 'touchstart', '_NoirCard.json', 'adtmv', 'NNUNR', 'location_name', 'widget-next-btn', '已自动断开与其他人的听歌同步。', 'exp_', 'lABRb', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'div', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'cancel', 'setMonth', 'reduce', '生成失败:\x20', '--\x20点击选择\x20--', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'calendar-grid', 'AyGdo', '昨天\x20', 'transfer-amount-input', '导出账本失败:', 'tYFdX', 'snoop-app-container', 'KZrtj', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'bLirh', 'Detected\x20API\x20provider:\x20', 'coverId', 'theme-hue-slider', 'apiSettings', 'RDENE', 'image/', 'ivxJR', 'miJNp', 'todo-item-small', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'gWMsq', 'lBYXV', '50%', 'VWQDw', 'FROFH', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'modal-cancel', 'countdown-timer', 'DXnmj', 'diary-action-modal-', 'jOOuN', 'fhCRI', 'is-exiting-left', 'dHeJl', '加载自定义表情包失败，真是没用。', 'wrnfH', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', '准备群聊API数据时，读取图片失败:', 'edit-message-button', 'zrbor', 'snoopList', 'db:', 'GICzF', 'Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？', 'nEYbO', 'TteJL', 'IndexedDB\x20failed\x20to\x20open', 'assistant', '\x22\x20已删除。', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书。非强制性，只是手机会有点卡，想继续聊下去也可以。', ')\x20的专属时间锚点\x0a', '.message.ai', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'meeting-reroll-button', '--feed-bg-image', 'dDxay', '[用户分享了音乐：', '.wb-entry-item\x20input[data-category-id=\x22', 'AuAsT', '--primary-hue', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', '\x0a\x0a#\x20关于群聊参与者“', 'snoop-character-list-container', '数据结构升级：成功救援了\x20', 'DlJnd', 'char_wallpaper_', '编辑角色', 'galgame-speaker', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'filled', '”的补充信息\x0a', 'important', 'FSpBe', '.snoop-app-content', 'entries', 'BqlfM', 'uezlJ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'diary-page-', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', '28%', 'QUXhy', 'galgame-sprite-controls', 'imoFn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', 'UJMxr', 'opacity', '\x0a\x0a#\x20用户的动态\x0a', 'xtKNN', 'gPPao', 'toBlob', 'PqLkw', '确定要清空群聊\x22', 'appIconPosition_app-wallpaper', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>', 'meetingViewMode', 'mHMvx', 'back-to-meeting-list', '超激动我来了', 'nBphz', 'line', '正在铭刻字体...', '---\x20好友圈净化仪式完成\x20---', 'user-send-post-button', 'isActive', '群聊\x20(', 'QFSTC', 'mwBLe', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', '[AI发送了表情：', 'friend-circle-edit-screen', '正在搜索音乐...', 'back-to-home-from-calendar', 'qdfjB', 'save-world-book-button', '34%', '加载徽章图片失败', 'tpnHF', 'gap', 'QuofR', 'readonly', 'is-selected', '&quot;', 'Nwige', '加载\x20', '正在解析角色卡...', 'QCzMr', '</p>', 'pEwmy', '<p\x20style=\x22margin-top:\x205px;\x22>', '收到的原始、有问题的文本:', 'eDgbk', 'transform', 'EbHkV', '\x20的图片失败:', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'dMWsw', 'Bajus', 'medium', 'RoPEG', 'add-event-modal', '全量导入失败:', 'cancel-transfer-button', 'AI返回的不是一个数组。', '\x22>&times;</button></div>', 'HlydZ', 'NeqqW', '你是一个乐于助人的助手。', 'https://xhslink.com/m/5IgC1rniI2I', '</label>\x0a\x20\x20\x20\x20', 'last_message_preview', '29%', 'sad', '#group-settings-screen\x20.selected-options-text', '#bubble-preview-ai', '正在整理…', 'DFlBl', 'qCXjF', 'ThYgs', 'chat-sticker-panel', 'model', 'RvlPU', 'reverse', 'activeQuote', 'YloCP', 'DqULs', 'HhQHL', 'wbc_imported_', '我错了', 'gbGzI', '加载聊天失败:\x20', 'vJfHH', '角色已保存！', '>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>', 'delete', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20', 'agdxd', 'mWxWE', 'USWgL', 'altar-slot-audio', 'is-entering-from-right', '还没有我的回应可以重新生成哦。', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'generationConfig', 'active', 'load-more-btn', 'sprite-resize-handle', 'indexOf', 'EaAZD', '正在处理...', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'add-event-fab', 'appIconPosition_app-music-library', 'context-lines-per-chat', 'posts', '请输入新的分类名称:', 'abort', 'yrkSj', '错误：你还没有创建任何好友圈。请先在App内创建一个。', 'getMinutes', '全量导出失败:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '生成动态回复失败:', 'meeting-message-input', '正在逆转时空...', 'ended', 'save-edit-button', '2px\x20dashed\x20var(--border-color)', 'ffvib', 'zhZdY', '[用户发送了表情：', 'world-book-item', 'JbgrW', 'upload-feed-bg-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'hard-reset-button', 'upylo', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '💜\x20', '-\x20**你与', 'aqskG', '\x0a#\x20关于你\x20(', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', 'bjpRH', '小时前），可以简单问候一下对方现在的状态。\x0a', 'target', 'TwVzY', 'diary-list-screen', 'customFeedWallpaper', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '\x22>一起听</button></div>', ':streamGenerateContent?key=', 'event_', 'YAML翻译机也无法理解这段梦话。', '#d1d5db', '该角色', 'UctnP', 'charId', 'backgroundPosition', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '请在动态或聊天中播放', 'imageId', 'ZMhRl', 'pGgCT', 'musicPlayerState', 'TEJjT', 'Prxkh', 'PKMMa', '（正在构思中...）', 'hkrRg', 'calendar-day', 'daily-expenses-list', 'qZLuj', 'post-img-', 'KijXB', 'FSFOa', 'CjZur', 'friendCircles', 'TA正在提笔写日记...', 'activeUserProfileId', 'app-meeting', 'paixY', 'lNgix', '纪念日', '>>\x20', 'pWFXh', 'horizontal', 'KtMLv', 'FVuUd', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'music-upload-altar-screen', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', 'system', '编辑群成员功能正在开发中...', '...', 'char-edit-wallpaper-input', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'LRwJU', 'appendChild', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'NoirAccountingData', 'chat-transfer-button', 'Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '购物消费', 'add-choice-modal', 're-record-button', '\x0a\x0a##\x20世界书条目:\x20', 'uIqMg', 'meeting-list-container', 'split', '未知表情', 'vZzls', 'IkFak', '字体已应用！(Font\x20Applied!)', '#diary-action-delete', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'historyIndex', '好友圈净化完成，正在重新存档...', 'DaINe', '15px', 'activeMeetingCharId', 'friend-circle-edit-name', 'TZMOo', '确定要重新记录吗？当前的账单会被删除。', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', 'tencent', 'charAt', '.selected', 'tGOSt', 'owhSv', 'TyrVl', 'music-library-item', '”吗？此操作不可撤销。', 'border', 'transfer', 'from', '的日记本', '\x20的旧格式数据翻译。', 'INmVQ', 'xPTkM', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '加载更多聊天记录', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', '正在检查好友圈数据...', 'QrNZg', '吃你的饭', 'download', 'kBgKU', 'message-action-backdrop', 'app-diary', '#chat-view-pane\x20>\x20.typing-indicator', 'sSjnn', '星期五', 'time', 'pow', '.no-action-modal', 'Jzzti', '<span\x20class=\x22', 'BZVXw', 'YNSRJ', 'KrZkw', 'world-book-list-container', 'resolve', '.slot-filename', 'nGlUA', 'post_image_', 'SMVqD', 'KWvXk', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'home-screen', 'click', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', '你好，世界\x20(Hello,\x20World)', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'addTestPost', 'jJNaH', 'worldBooksCategories', 'galgame-date', '\x20个旧头像。应用即将刷新。', 'modal-text', 'fill', 'wb-category-group', '资料已更新，为了让所有变更完全生效，我来帮你刷新一下。', 'gCFWy', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'netease', 'MuiTb', 'VjUyN', 'back-to-char-select-from-group-create', '加载见面场景时出错:', 'wFEgw', 'VriBQ', 'revokeObjectURL', 'qTNZx', 'OZUeW', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', '.app-icon-img', '星期一', ']\x20[sticker:', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22', 'contains', '我来搞定', 'AoXrA', '\x20个表情吗？', 'bsfGc', 'display', 'user-post-attachment-preview', 'participantIds', 'iHZJN', '”的笔记，内容是：“', '/v1/models', 'back-to-home-from-music-library', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'snoop-app-icon', '逗你开心', 'loading', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'right', '\x20之间的私密内容)\x0a', 'RzTfu', 'gpirO', '-\x20**对话状态提示**:\x20你们已经有\x20', '名字不能为空！', '99gFgDCA', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'day-dot', '.music-post-song-card,\x20.music-share-card', 'musicId', 'deletedStickers', '[用户向\x20', 'wb_html_module_builtin_1', 'modal-ok', 'dlzmj', '创建新用户', 'jwQhK', 'diary-char-name-header', 'contact_name', '最后一次确认，真的要清空所有数据吗？', '处理\x20', 'widgetBgImage', 'store_name', 'SQOPC', 'edit-message-textarea', 'delete-world-book-button', 'chat_', 'XiJYn', 'max', 'onmouseout', 'meeting-scene-view', 'add-choice-backdrop', 'mTgNu', 'dialogue', 'iyzgx', 'keys', 'HGSYY', ']。严禁使用列表之外的任何表情名。\x0a', '别这样嘛我哭哭', 'disabled', 'JKNKC', '执行音乐封面数据净化...', '.load-more-btn', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', 'wallpaper-input', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'characters', 'fTvXG', 'error', '检测到已保存的字体，正在应用...', 'music_library', 'default', 'dnCIX', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'insertAdjacentHTML', 'every', 'getItem', 'EjDOV', '一拳打爆', 'IQpEu', 'kksLJ', 'ebfuF', 'aNvzB', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'settings', 'import-accounting-input', 'DOMContentLoaded', 'has', 'then', 'CiNfx', 'head', 'gfSwa', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'GZQXa', 'xLdQC', '复制失败了，哼。', 'home-time', 'abs', 'OEBte', 'charSelect', '</div><div\x20class=\x22artist\x22>', 'main', 'qMWzb', 'oncomplete', 'appIconPosition_app-world-book', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', '正在为你搬运旧壁纸到新仓库...', 'translateX(-', '\x0a##\x20', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', 'back-to-chat-from-group-settings', 'sprite-slider-scale', 'className', 'activeMeetingScriptQueue', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', '等你消息', 'New\x20request\x20started', 'angry', 'music-widget-card', '真是的，必需的祭品都还没准备好！', 'vtwow', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'worldBookEditor', 'SlMDP', '确定要删除这笔记录吗？', 'qcNcl', '未找到可用模型。', 'UeOAS', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'YZSnd', '\x20\x20-\x20用户ID:\x20', 'KwLNs', 'NqgDU', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'zcHKl', 'ruVrg', '\x20添加...', 'appIconPosition_', 'TRRFF', 'avatar-frame', 'gyCCm', 'yOYLH', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'char-name-header', '<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>', 'CdGxP', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'querySelector', 'snoop-copy-summary-btn', '正在处理图片...', 'zptbm', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', 'group-chat-name', 'teorW', '导入角色卡失败:', 'card-input', '搜索失败:\x20', 'translateY(-', 'button', 'ClWBM', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20', '对方正在行动中...', 'thought', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.', '条目名称和内容都不能为空！', '-\x20你记得曾和“', '.listen-together-song', 'HYFLa', 'WFTWw', 'ftPiJ', 'scrollHeight', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'selectedDate', 'user-profile-edit-title', 'QZxoi', 'isPlaying', '创建新角色', '成功净化并迁移了\x20', 'json_object', 'checkbox', 'contactName', 'dSWGk', 'galgame-sprite-container', 'bvbPc', '星期二', '救援头像时出错:', 'oIVUQ', 'href', 'lRWHN', 'hmiHW', 'init', 'ToRwW', 'zSEPU', 'quoted-message-in-bubble', 'fYZbv', 'delete-message-button', 'hCuTC', 'KmpVR', 'mWxEe', '音乐数据升级完成，迁移了\x20', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', '-\x20**状态提示**:\x20这是你和', 'KfZvS', 'IkpHj', 'header-actions', 'galgame-time', 'Hptle', 'pscXj', 'sgyeS', 'cost', 'transfer-backdrop', '加载立绘失败:', 'generativelace.googleapis.com', '|||CMD|||', '.avatar', 'activeDiaryCharacterId', 'cXhek', 'OAOqL', 'fGWQh', '---\x20救援任务完成\x20---', 'oMGBv', '_blank', 'tyfNv', 'transaction', 'boundUserProfileId', 'short', 'img', 'noir-custom-font-style', '同步已断开。', '\x20张旧的动态图片。', '请根据以上所有规则和资料，开始生成内容。', 'audio-file-input', 'noir_migration_fc_v1_complete', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'getAll', '图标处理失败:\x20', 'group-world-book-checkboxes', '错误:\x20', '\x0a#\x20交换日记摘要\x20(你和\x20', 'audio', 'block', '净化好友圈时出错，真是的。', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'NfHxK', 'unified-audio-player', 'wEgGQ', '\x22\x20class=\x22sticker-content\x22>', 'characterEdit', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'writeText', 'is-today', '）最新写下的日记内容。Ta写的是：\x0a\x20“', 'vXwrz', 'todo-date-title', '\x0a-\x20人设:\x20', 'YBMwi', '0\x202px\x208px\x20rgba(0,0,0,0.4)', '\x20内容失败:', 'vNeNn', 'shy', 'lt-ui-cover-art', 'ZCkra', '#\x20记录是空的，没什么好总结的。', '14inOUqT', '（对话结束）', '字体更换成功！', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'OuwOy', '有点破防', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'app-music', 'toLocaleString', 'https://api.vkeys.cn/v2/music/', 'toLocaleTimeString', '在准备API数据时，从IndexedDB读取图片失败:', '#diary-action-reroll', 'VaaTQ', '--widget-cover-image', '\x0a\x20\x20\x20\x20人设:\x20', 'lCgQK', 'oXlph', '哼，就按你说的办好了。', 'JbFPV', 'mShka', 'friend-circle-member-selection', '#\x20总结失败了，可能是记录太长或太复杂。', '#a7c7e7', '世界书条目已保存！', '\x0a\x20\x20近期记忆:\x0a', 'fYSvB', 'description', 'DAXbM', 'mUCNG', 'badge-input', 'VMhId', 'char-edit-sprite-', 'chat-summarize-button', '#member-select-', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，【不许动它！】)\x0a```\x0a', 'center', 'length', '确定要放逐这\x20', 'appState', 'important-day-item', 'qnvZR', 'onerror', 'diaryPressTimer', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'JCuZd', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', 'card-widget-2', 'fEruy', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'transfer-recipient-select', 'categorized-expenses-list', 'Sggeq', '已恢复默认字体。', 'code', 'oTcfr', 'hwQET', 'jLruJ', 'frXJa', 'Gemini\x20stream\x20reading\x20aborted.', 'wallpaper_main', 'sQDvk', 'auto', 'Fetch\x20request\x20was\x20aborted.', 'qmiIN', '未知用户', 'translateX(-50%)', 'setItem', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'omlhs', 'hQtwg', 'char_sprite_normal_', 'edit-clear-history-button', 'values', 'bubbleCss', '正在准备音乐数据...', 'wusjd', 'VtmJr', 'accountingData', '</div>', 'RsVTA', 'uTYnv', 'app-music-library', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '”聊过天，关于：“', 'music-library-screen', 'fiaxW', 'preferences', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '暂无音乐', 'JjEwE', 'GXxWr', 'wJCHw', 'option', 'HmoUo', 'xVXAE', '.snoop-chat-item', 'RNtlP', '\x0a##\x20条目:\x20', 'fdeYH', 'AGCnb', 'find', 'tBNla', 'HnxCH', 'remark', 'toGvg', 'fAXVO', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'Enter', '\x22\x20中发现一张需要净化的图片...', '兼容模式成功，已将旧格式数据翻译。', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'snoop_cache', 'friend-circle-edit-bind-user', 'AOWTs', 'createElement', '其他杂项', 'Mkcfc', 'kind', '歌曲名称', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'iOKMX', 'XcIZT', '\x0a你只扮演【', 'VbBpf', '来源：[最活跃]', 'textShadow', '</pre>', 'badgeState', 'ahdgt', 'listen-together-song-list', 'AbortError', 'taUZd', 'world-book-checkboxes-container', '解析音乐文件失败:', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'EghRy', 'boMnI', 'ICvto', 'isFromLibrary', '保存播放器状态失败，真是没用。', 'JoSnx', 'cancel-quote-button', 'VDmCB', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'setProperty', 'zfWXY', 'left', 'cover_placeholder_', 'mVspU', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'JBPHE', 'back-to-home-from-circle-list', 'jeUsy', 'T00:00:00', 'character', '选择聊天', 'playableUrl', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'taBCg', 'ytPTu', 'back-to-circle-list-from-feed', 'char-edit-wallpaper-preview', 'widget-prev-btn', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', '正在清空旧数据...', '》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a', 'observe', 'TTaDm', '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。', 'moCei', 'cover-file-input', '已删除。', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', '---\x20音乐净化仪式完成\x20---', 'altar-slot-cover', 'true', 'timeupdate', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '日记已删除。', 'select', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '\x20张旧的音乐封面。', 'onsuccess', 'event-content-input', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', '.remove-attachment-btn', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'WqPlo', 'musicPlaylist', 'originalExpenses', 'margin', 'QsuoE', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'removeItem', 'Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.', 'vgJhb', 'jYmwB', '你的任务是【首次生成】这个应用的内容。', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'clockPosition', 'bJxNC', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', '请根据以上所有信息，开始分析并返回JSON。', 'MvXXe', 'postContent', 'AaeNh', 'wMzWR', 'global-player-play-pause-btn', 'TOtKa', '桌面已重置，即将刷新...', 'accounting-screen', 'MpDHQ', '群聊「', '我是小丑呜呜', 'AI返回的原始文本:', 'PBCNj', 'chat-get-reply-button', '咱俩天下第一好', 'CIWxW', 'transfer-recipient-group', '编辑用户', 'ONCGI', 'custom_font_ttf', '&alt=sse', 'QCvFM', '\x20(当前)', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'hseEv', 'iUUkR', 'CquXv', 'themeHue', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'back-to-home-from-chat', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'wpMav', 'summary', 'fEEwc', 'xKMUn', 'character-list', 'theme-lightness-slider', 'meeting-view-screen', 'endsWith', 'application/json', 'Ldmkd', 'statusText', 'Gemini\x20API\x20Error:\x20', 'path', 'vVoGR', 'sticker-manage-btn', '#FFFFFF', '正在恢复视奸档案...', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', 'NoirCharacterCard', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', '星期六', '确定要恢复这个角色的默认立绘位置吗？', 'set-active-user-button', 'edit-current-circle-button', 'tab-view-ledger', 'MlBUN', '\x20张旧封面。应用即将刷新。', '(歌曲刚开始)', '请输入有效的转账金额！', 'Jwkfx', 'BYIFh', 'UYBsm', 'user-name', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'widget_card_2', 'rgba(0,\x200,\x200,\x200.4)', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'diary-page', '\x20写道:\x20', 'NIzyv', '\x0a\x0a#\x20', 'tloTe', 'VWcdA', '】的旧数据...', 'drawImage', '生成动态时发生错误:\x20', '已设为当前用户！', 'removeProperty', '保存壁纸失败:\x20', 'oqecs', '说了是摆设啦，笨蛋。', 'toFixed', 'Hqsno', 'CPyOJ', 'upload-music-button', 'listen-together-invite', 'edit-delete-char-button', 'mSXlT', 'uNLVS', 'wiDTp', '正在焚烧【', '默认米白', 'todo', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', 'LpzMA', '切，加载播放器状态的时候出错了。', 'Hvhhc', 'group-edit-name', 'reset-ui-scale-button', 'GrqAH', 'YtXWy', 'long', '徽章已移除。', 'hhuYw', '没有找到相关结果。', '喝多了', 'CspZA', 'blob', '获取中…', 'startsWith', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'ZuGVc', 'min', '我很脆弱', 'cKEST', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'YEGkh', '我是垃圾', 'EIAZt', 'snoop-list-screen', 'dlLFt', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'api-endpoint', '加载第二个卡片图片失败', '&apos;', 'gYSZn', 'day-number', 'claude', 'wQwtk', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'quote-preview-area', '事情好多', 'message-container', '出去玩', 'TyzzF', 'friendCircleList', 'PRyft', '#character-edit-screen\x20.selected-options-text', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', 'LfYog', '\x20-\x20', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'qnnIG', 'string', '38927610vMXbxP', 'AI返回了无法识别的数据格式。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', 'post_image_migrated_', 'body', 'googleapis.com', 'OcMsl', 'hElck', '.wb-entry-item\x20input', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '#\x20核心能力：HTML模块生成\x0a\x0a你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20推荐生成场景\x0a\x0a当用户明确表示希望“查看”、“展示”或“接收”一个适合用卡片形式呈现的内容时，你应该主动生成一个HTML模块来满足该请求。这包括但不限于：\x0a\x0a*\x20**邀请函**:\x20当提到聚会、活动或约会的邀请时。\x0a*\x20**聊天记录截图**:\x20当用户想回顾或展示一段（虚构的）聊天对话时。\x0a*\x20**订单/票据**:\x20当提到购物、点餐或预订的凭证时。\x0a*\x20**通知/提醒**:\x20模拟系统通知、日程提醒等。\x0a\x0a你应该发挥创造力，判断何时使用此功能能增强沉浸感。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]', 'quote-message-button', '档案已复制到剪贴板！', '”买过：“', 'accounting-title', 'Error\x20fetching\x20from\x20', '交给我吧', 'getDate', 'yaXXp', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'unlocked', 'padding', '\x0a\x0a#\x20关于对话者“', 'canplaythrough', 'number', '位置已重置，正在刷新...', 'tooLl', '刷我的卡', 'app-world-book', '加载壁纸失败:', 'WPTGW', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', 'indexedDBMusicData', '.lt-end-session-btn', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'toggle', 'PVanD', 'tBraC', 'createObjectURL', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'content', '10px\x20auto', '星期日', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'DopmV', 'value', 'categorizedExpenses', 'upload-wallpaper-button', '不高兴撒娇', 'chat_image_migrated_', '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>', 'history', 'chatWallpaper', 'postType', 'RhaQe', '\x20时出错:', '缓存命中:\x20', 'HBQRb', 'VTczP', 'FWUYp', 'altar-slot-info', 'url', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'offline-scene-view', 'NoirCustomFont', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'QrNOA', 'toDateString', 'soJaI', 'xOJKl', 'is-visible', 'QFXsN', 'italic', 'group-delete', 'onload', 'MBOVI', 'import-data-input', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'VfvTD', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', '</svg>', 'beforeend', 'widget-title', 'saSNo', 'title', 'userProfileList', 'expanded', 'KYzeI', 'cancel-edit-button', 'comments', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'page', 'provider', 'LwOFL', 'NZfRJ', 'QwWKX', 'listen-together-card\x20no-action-modal', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', '一个人可怜吃饭', 'songId', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'ClFac', 'QSVtJ', 'fTqmq', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'group-options-cancel', 'modal-mask', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'customStickers', 'diaryList', '用户资料已保存！', '图片预览失败:\x20', 'mousemove', 'checked', 'readwrite', '<p>格式错误</p>', 'worldBookCategories', '59%', 'indeterminate', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '获取AI响应失败:', 'narrator', 'smooth', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'BiZBv', 'qNvYm', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', '保存失败:\x20', 'qOHWJ', 'pre-line', 'lastIndexOf', 'VlMjv', 'cuFAd', 'activeFriendCircleId', 'var(--text-color-light)', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'decode', 'marginBottom', 'yLBcs', 'expense-amount', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'footprints', 'happy', '确定要恢复默认字体吗？', 'feed', 'style-', 'wallpaper', 'yowWM', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', '”已存入圣殿。', '.wb-entry-list', 'cardState2', '距离「', 'VyyZd', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', '好友圈数据升级完成，迁移了\x20', 'pause', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'IMQyy', '导出过程中发生严重错误:\x20', 'zQJLq', 'isOffline', 'SeuOv', '这不是一张有效的Noir角色卡。', 'friend-circle-list-container', '用户操作中断了\x20AI\x20响应。', 'Cmefk', '确定要清空\x22', '净化完成！应用即将重启。', '回复\x20', 'char-edit-avatar-preview', 'NbvDh', 'chat_group_', '8px\x2016px', 'dJxUJ', 'nextElementSibling', 'gallery', 'edit-message-backdrop', 'yTsFj', 'localStorageData', '.music-post-play-icon,\x20.music-share-play-icon', 'user-post-image-input', 'GCAtd', 'snoop-phone-top-nav', 'VbBIO', 'app-user-profiles', 'ewjbL', 'SQvGt', 'SZmBd', 'translate(-50%,\x20-100%)', 'is-playing', 'reload', 'wBhYw', '\x22\x20data-id=\x22', 'settings-screen', 'benMg', 'music_cover_', 'home-dock', 'category', 'sticker', 'now', 'data:\x20', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'onmouseover', 'widget-artist', 'random', '错误：找不到角色', '在你那乱七八糟的文本里没找到“歌名”！', '这个也是摆设，别点了。', 'xxAfP', 'zGnRO', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', '暗夜紫晶', 'WoptW', 'wbc_', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', 'GALBd', 'wallpaper-screen', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', '#snoop-app-view-container\x20.snoop-app-header', 'copy', 'decorative-badge', 'zh-CN', 'acTxf', 'slBVN', 'songName', 'bubble-', 'rJqBD', '动态页背景已移除。', 'chHVQ', 'backgroundImage', 'pop', 'Creating\x20object\x20store:\x20music_library', '.wb-entry-item\x20input:checked', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', 'image_url', 'currentlyPlayingIndex', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'group-options-modal', 'group-avatar-preview', 'pendingPostAttachments', 'speaker', 'character-item', 'diary-list-container', '-\x20[动态]\x20', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'snoop-app-refresh-btn', 'wfjYg', 'user-post-music-button', '快点哄我', 'calendar', 'Upgrading\x20database\x20to\x20version\x20', 'uubbo', 'add-chat-button', '.wb-category-header', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', '错误：找不到签署契约的地方。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'jbDnB', 'AI未能返回有效的JSON对象。', 'back-to-chat-list', 'items', 'kMeTB', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', 'sJlhN', '.listen-together-accept-btn', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', 'perChatContextLines', 'kutPn', 'sprite-reset-button', 'lYqfx', '哼，你这字体文件有问题，用不了。', '/v1beta/models/', 'gesaU', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', '\x22]:checked', 'AlCrH', 'preventDefault', 'card-image', 'closest', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', '\x20[并分享了歌曲:\x20', 'onloadend', 'XTbrc', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'diary-entry-input', 'ZfudA', '\x20记录)\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'mXUWY', 'User', 'editing-world-book-id', '</span>', '\x20(ID:\x20', 'JVfTU', 'input[type=\x22checkbox\x22]:checked', 'XzEto', '”...', '服务器错误:\x20', 'aQMNZ', 'Jcjda', 'touchmove', '哼，不好好写清楚花在哪、花了多少，我怎么记？', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', '确定要彻底清空【', 'wJDLC', 'phrIN', 'ukYjR', 'FTyJB', 'summarize-backdrop', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'LmTVZ', 'KqtJj', '未知艺术家', '<span>', 'aoeHk', 'xMFgp', 'SAUWf', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '保存角色失败:', 'qYxWK', 'izwZT', 'newAvatar', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', 'qmlDR', 'niPXe', '\x20/\x20', 'TqHRw', 'group-avatar-input', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'findIndex', '无描述', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', 'full', 'Creating\x20object\x20store:\x20', 'xJZXj', '歌名和歌手都不能为空！', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'none', '勉强但是好吧', '已选择\x20', '的个人专属世界观设定\x0a', '壁纸已更换！', '\x20添加了新的纪念日：', 'shiftKey', 'font-input', 'UwGdv', '.bubble-', 'EjFsv', 'app-lock-screen', 'chat-reroll-button', 'ZtkNf', 'char-edit-css', 'canvas', '/v1/chat/completions', 'calendar-screen', '\x22\x20吗？所有聊天记录将被永久删除。', '绝对不想', 'qdQDO', 'OeOsn', 'xAlhv', '来源：', '无标题笔记', '”\x20已被彻底清除。', 'PLucA', '1169KOqzIB', 'WawSt', 'user-persona', 'filter', '\x20说：“', '.custom-multiselect', 'music-screen', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '1em', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x20//\x20<--\x20哼，加在这里\x0a', 'UwhcC', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'lt-ui-lyrics-container', 'song_', 'char-avatar-frame-url', 'sPjFE', 'data', '群聊至少需要2名成员。', '点击选择\x20.jpg\x20或\x20.png', 'userProfiles', 'xBRVU', 'aqWYg', 'char_sprite_', 'IwFKQ', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'typing-indicator', 'UuYxU', '时空逆转成功！账本已恢复。', 'isArray', '\x0a\x0a#\x20用户资料库\x0a', 'ASlOS', 'diary-next-button', '休闲娱乐', 'vWNbC', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'flatMap', 'readAsDataURL', '\x20\x20-\x20角色ID:\x20', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'cThjn', 'firstChild', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<\x20div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'ONZbb', 'group-settings-bind-user', '-\x20你的备忘录里有一条叫“', 'group_bg_', 'save-friend-circle-button', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', 'qUnGv', 'user-avatar-frame-url-in-chat', 'warn', 'object', 'stopPropagation', 'friend-circle-title', 'EgGwW', 'querySelectorAll', 'prepend', 'naWAy', 'live-preview-style', 'slice', 'Cuxjy', '-\x20你在“', 'info', 'Cwpmn', 'visible', 'bAnRq', '在好友圈\x20\x22', 'galgame-text', 'home', 'UeCGj', '.screen.active', 'POST', 'fontWeight', '确定要永久清空【', 'private', 'user-profile-list-container', 'caQZV', 'LEkWk', 'IZonK', '群聊“', 'chat-view-pane', 'confirm-transfer-button', 'white', '保存徽章状态失败', 'GRxmH', 'SwIwG', '找不到角色信息。', 'card-input-2', '请看是我', 'vertical', '字体应用失败:', '确定要清空好友圈“', 'ZhtAP', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '.snoop-main-grid', '表情包已保存！正在刷新应用...', 'key', 'likes', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'conversationHistory', 'bnkws', 'DwOdC', 'calendarEvents', 'worldBooks', 'BrboV', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'URdkH', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'change', '2-digit', 'characterLastScripts', 'ZmZgG', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'export-accounting-btn', '200%', 'lt-ui-song-artist', '未命名', 'forceWhiteClock', 'displayedMessageCount', 'stretch', 'pointer', 'IlQZJ', '无法保存聊天记录。', 'bhydT', '8px', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'XOnqU', '\x20的《', 'activeChatId', 'anUIN', 'rgba(255,255,255,0.2)', 'sFIVh', '无法解析旧的视奸内容来获取时间戳。', 'total_cost', '分钟前聊过，请注意衔接。', 'XbSmE', '星期三', '<img\x20id=\x22', 'add', 'xjOBA', 'NICfM', 'reset-card-button', 'rIOpd', 'pYvjp', 'add-event-modal-title', 'rEvVc', 'cardWidgetState', '有点无语', 'HYCVa', 'match', 'groupChatCreate', 'appIconPosition_app-snoop', '错误：第一个好友圈\x20\x22', '\x22\x20class=\x22music-share-cover\x22>', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', '被萌到', 'reset-widget-bg-button', '导入账本失败:', '[发送了表情]', 'ozQsE', '-\x20**状态提示**:\x20你已经有\x20', '180px', 'wQQoT', 'aODKq', 'SGFym', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'currentTarget', 'DdCdb', 'diary-entries-container', 'shift', 'assign', 'nGYEo', 'clipboard', 'keydown', 'rTYHQ', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'card-image-2', '至少要选择一个圈内成员！', 'XjkOh', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'defaultPrevented', 'next-month-btn', 'RCGxF', 'UbCdA', '错误：找不到这首作为“信物”的歌。', 'Unknown', '\x0a-\x20**对话状态**:\x20群里在', 'HoJab', 'oyZXO', '成功救援并备份了\x20', 'Ieoqj', 'ctSQE', 'editing-user-id', 'eventContent', 'music_cover_migrated_', 'ThJaT', 'bites', 'save-api-settings-button', 'todo-item', 'Noir_Accounting_Backup_', 'IxcqW', '成功向好友圈\x20\x22', 'lt-ui-close-btn', 'group-bg-input', 'gPijx', 'vIWUI', 'diary-input-wrapper', 'chat-image-button', '确定要删除这个安排吗？此操作不可撤销。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'createObjectStore', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.', 'displayUrl', '.json', 'group_avatar_', 'files', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'LwdJg', 'GfdJN', '弱小委屈但凶恶', 'activity_description', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'user-profile-screen', '执行好友圈数据净化...', 'app-snoop', '外卖订单', 'persona', 'reset-card-button-2', '#diary-action-cancel', 'indexedDBData', '.todo-item,\x20.important-day-item', 'char-edit-offline-bg-preview', '<div', 'input[name=\x22event-type\x22]:checked', ',\x20ID:\x20', 'user-post-image-button', 'quotedMessage', '”。\x0a', '生成动态失败:', 'lyrics', 'sprite-slider-y', 'VnOpU', '.char-info-wrapper', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'end', '.app-icon', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'Failed\x20to\x20plan\x20group\x20replies:', '好友圈名称不能为空！', 'removeChild', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'copy-summary-button', 'jSBAR', 'music-input-modal', 'chat-messages', 'Claude\x20API\x20错误:\x20', 'KcrvW', 'openai', 'trim', 'log', 'hAUAv', '确定要删除这篇日记吗？此操作不可撤销。', '小组件背景已恢复默认。', '字体保存失败了，哼:\x20', 'alBLr', '新角色\x20', 'upload-card-button-2', 'vIUoK', 'remove-font-button', 'addEventListener', 'Nhjwd', 'xLOYx', 'diary-write-modal', 'ZaxpI', 'nILxO', 'yIMHM', '[发送了图片]', '\x20[并附上了一张图片]', '图片加载失败', 'flex', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22', '条目已删除。', 'phone-container', 'open', 'form-button\x20load-more-btn', 'IjZrs', '\x22\x20的聊天记录已清空。', '<div\x20class=\x22post-likes\x22>', 'group-settings-name', 'data:', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'getFullYear', 'get', '\x20(分享了歌曲:\x20', 'VgYfv', 'undefined', 'Noir_Backup_', 'Cuald', 'snoop-temp-style', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'wants', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'PqKwy', 'badge-image', '<br>', 'HxZsv', 'FGDgK', 'accountingLedger', '.category-checkbox', 'import-accounting-btn', 'speaker-ai', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22', 'snoop_', 'reset-widgets-position-button', 'add-world-book-button', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'UPjlb', 'removeEventListener', '.message.user', 'app-chat', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'widget_badge', 'char-edit-remark', 'app-pages-container', 'lTVjm', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'pmNNS', '\x0a#\x20你的个性（节选）\x0a', 'player-play-pause-btn', 'ihzik', '\x20张旧图片。应用即将刷新。', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'add-world-book-category-button', 'span', '无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'pending-post-image-preview', '.custom-multiselect\x20.select-box', 'today-todo-list', '内容不能为空！', 'hYSVK', 'chatHistory_', '近期没有特别安排', '[AI分享了音乐：', '[用户发起了听歌邀请:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'qYslr', 'PVQjN', 'wb-entry-item', 'toggle-meeting-view-button', 'is-exiting-right', 'touchend', ')\x20恢复头像失败:', '\x0a-\x20当前精确时间:\x20', 'clock-color-toggle', '】的日记本已被清空。', 'musicLibrary', 'back-to-home-from-snoop-list', 'FmnjN', 'dcJKi', 'toLocaleDateString', '正在生成中，请稍候...', 'px)', 'FBSOR', 'music', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'gBUqR', '<div\x20class=\x22snoop-avatar\x22>', '获取模型失败:\x20', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '点击选择\x20info.txt', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'cos', 'message', '<span\x20class=\x22description\x22>', 'VILxC', 'currentTime', 'lock-screen-overlay', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>', 'cwcvX', 'OFKLI', 'Assistant', 'wULgO', 'editing-friend-circle-id', '(想转账给“', 'dPSYg', 'image/jpeg', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'world-book-edit-category', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'RogJn', 'input_', 'app-pages-slider', 'choice-create-group', 'YJiQd', '猫猫撒娇', 'sprite-cancel-button', 'home-clock-container', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'ansQd', 'QcEtW', 'accounting', '48736vgZEoX', 'ceil', 'anthropic', 'height', '导入失败:\x20', 'message-image-content', 'NFYqc', 'PkDIG', 'xKVXY', '--desktop-item-scale', '好友圈档案柜是空的，无需净化。', 'snoop-app-view-container', 'TacdO', 'snoop-home-clock', 'RNlZn', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', '#bubble-preview-user', '-\x20你点过一份外卖：“', 'selected', 'ttTJt', 'qqFlh', 'kUzXL', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'ljCil', 'diary-modal-save', 'preview-item', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '谁啊我吗', 'deletion-mode', 'info-file-input', 'user-post-avatar', 'PXxHr', 'map', 'ZEKlG', 'home-date', '清空聊天记录失败。', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', '\x22\x20id=\x22', 'txDhs', '错误：找不到此好友圈绑定的用户！', '\x22\x20src=\x22', 'version', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'textContent', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', '点击选择\x20.lrc', 'userAvatarFrameUrl', 'sFkIP', 'flexDirection', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', '未知商品', 'EUJYt', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'add-expense-button', 'world-book-editor-screen', 'ecOiK', 'mouseup', 'author', 'world-book-editor-title', 'put', 'Akpfh', 'yHwWE', '》吗？', '<div\x20class=\x22post-body\x22>', 'today-btn', 'add-friend-circle-button', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '\x0a\x0a#\x20今日消费流水\x0a', 'alignItems', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', '<img\x20src=\x22', 'verCg', '为你骄傲', 'overflowY', 'high', 'ShypM', 'snoop-phone-screen', 'app-accounting', '\x20时出错，跳过。', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'vzdVv', 'isFinite', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'WgTRd', 'alt', '设置已保存！', '樱花薄粉', '新建条目', 'NSSnW', '.listen-together-card', '我是女仆', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'JAEWm', '-\x20**你最后一次活动是在**:\x20', 'listen-together-ui', 'zHiBP', 'XfvwN', 'efGqU', 'QrkjD', 'column', '\x20的私聊', 'focus', '.category-toggle-arrow', 'BBGEf', 'member-selection-item', '#c299ff', '未知地点', 'tLjMF', '恢复失败了:\x20', 'rJpBN', 'OWeQm', 'QTiqh', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '在准备动态回复时，读取图片失败:', 'kmgeL', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'IOCRo', 'novel', 'stickerName', '</div></div></div>', '\x0a```', '包含所有图片和音乐的全量数据已成功导出！', 'candidates', 'Fufoe', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '25409lGunnx', 'grid', 'p[data-history-index]', '#message-anchor', 'user-profile-list-screen', 'KGbfc', ']\x20[', 'feed-bg-input', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'worldBook', 'rsbzw', '备忘录', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'avatarFrameUrl', '<div\x20id=\x22snoop-dock\x22></div>', 'PKELM', 'confirm-altar-upload-button', ';\x22>', 'tghOq', 'round', '】的手机已被重置。', 'xYwrc', 'emoji', 'iePBE', '\x0a\x20\x20\x20\x20姓名:\x20', 'sticker-item-wrapper', 'recipientId', 'XyJJp', 'QyLeP', 'fQczD', 'ZVypI', 'sGOJz', '用户已删除。', 'group-delete-button', '#\x20固定分类列表\x0a[', '\x20.app-icon-img', '加载角色\x20', 'chat-screen', 'images', 'background', 'dcTnD', '正在翻阅所有档案...', 'gGrMX', 'lHDMY', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'avatar', 'floor', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '?word=', 'oErcU', '确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！', 'chat-sticker-button', 'aSYgv', 'themeLightness', 'create-group-chat-button', 'BxMXA', 'children', '\x0a\x0a#\x20关于读者“', 'add-event-backdrop', 'FnCqN', 'cardState', '确定要删除角色“', 'PKxth', 'KiLWD', '人情红包', 'IYDgb', '<div\x20class=\x22loader-spinner\x22></div><span>', '已恢复默认。', '---\x20开始AI回复流程\x20---', 'toast', '大家正在赶来回复...', 'style', 'fopFY', 'activeListenSession', 'vpPik', 'xNYAd', 'rTWrE', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', '#f2b7c6', 'yIBxh', '哼，这不是图片，你想让我压缩什么？', 'CIwHs', 'listenTogetherSession', 'music-input-song', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'okESO', 'xuXSK', 'lyrics-file-input', 'userProfile', 'wwBXD', '群聊已解散。', 'VxuUx', 'includes', 'padStart', 'KQBXG', '[AI向\x20', 'TFoxy', 'result_page_content', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'pKTto', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', 'image', 'show', 'OszIZ', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '总结失败:', 'character-edit-screen', 'upRlc', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'oIuDT', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'name', 'XsxIP', 'todo-list', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>那个蠢猪API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', '今天一笔账都没有，我整理什么？', '浏览器历史', 'fAMPH', 'SuZVZ', 'transfer-modal', '群聊\x22', 'widget-cover-art', 'width', 'paused', 'eVGWj', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'CjCPZ', 'ZQEqP', 'whispers', 'widget-play-pause-btn', '好友圈已删除。', ')，已跳过。这不应该发生，数据库可能已损坏。', 'scrollIntoView', 'sprite-slider-x', 'jnUQc', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'music-library-container', '加载视奸记忆失败\x20(', 'fKbCq', 'src', 'WiEBR', 'IbUlP', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', 'innerHTML', 'PJehy', 'back-to-home-from-world-book', 'world-book-category-list', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'PINFK', '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>', 'zSJyE', 'borderRadius', 'url(\x27', 'widget_card', 'tFwMy', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'diary-entry\x20', '导出角色卡失败:', 'chats', 'borderBottom', 'restaurant_name', 'opacity\x200.2s\x20ease-in-out', 'bottom', '导出失败了，哼:\x20', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', '#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'last_edited', '星期四', '干劲满满', 'WOmXA', '欢迎！请先创建一个角色开始聊天。', 'foaRO', 'clientX', 'EVCdv', 'ZHaEK', 'feed-loader', 'Gdkyr', 'createElementNS', 'diaries', 'Escape', 'Rnyth', 'JSQqo', 'mouseleave', 'HbWqz', 'galgame-textbox-container', 'type', 'getMonth', '未知餐厅', 'characterId', 'wb_', '[sticker:', 'stringify', 'lfSrT', 'data:image', '5215725ZQwZsM', 'timestamp', 'toDataURL', 'forEach', 'tUcfg', 'LvWnx', '确定要删除群聊\x22', 'yfVQX', 'ojgBk', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>', 'events', 'gXDnE', '在所有地方的最后一次互动是在**:\x20', 'back-to-user-list-from-edit', 'expense-item', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', '?id=', 'XbDXu', 'sticker-confirm-delete-btn', '#snoop-app-view-container\x20.snoop-app-content', 'MQBmw', 'EwhPD', 'groupSettings', 'modal-root', 'clientY', 'sprites', 'hFAOA', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'KnFgX', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', '新用户\x20', '默认分类', 'utterance', 'appIconPosition_app-diary', 'ZzyXf', 'query', 'OypWj', 'memberCharacterIds', 'create_event', 'paddingBottom', 'JoZNX', 'BRqlo', '加载卡片图片失败', 'getSelection', 'JwHwf', 'mousedown', '未知商店', '\x0a\x20\x20人设:\x20', 'JSON解析失败，启动兼容模式...', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'inline-block', 'mlxFt', 'some', '记一笔', '.diary-delete-btn', 'prev-month-btn', 'role', '已送达', 'snoop-dock', 'Vqnsq', 'OqTQb', '需要至少2个角色才能创建群聊。', 'position', '一起听歌', '医疗健康', 'export-char-button', '这是一条由控制台添加的测试动态！样式看起来非常完美。', '\x20行格式不对，被我无视了。', '好了，请基于以上所有信息，开始写今天的日记吧。', 'IxWsR', 'vjlMv', 'audio-player', '聊天档案柜是空的，无需净化。', '--custom-font-family', 'getReader', 'contextmenu', 'currentDate', 'sCrOO', '卡片\x202\x20已更换！', 'KOXUw', 'catch', 'font-preview-text', 'customIcon_', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'RUYVX', 'snoop-char-name-header', 'chat_char_', 'NuhRx', '15px\x2020px', '-\x20姓名:\x20', 'jFzlY', 'amount', '#meeting-view-screen\x20.chat-input-area', 'translateY(0px)', '”已创建！', 'activeWorldBookCategoryId', 'clear-feed-button', 'vyKLe', '很好哦', 'iNtlH', 'uWPPr', 'OpenAI\x20API\x20错误:\x20', 'bOLDR', 'indexedDBSnoopData', 'MRDOM', '.music-share-play-icon', 'meeting-list-screen', '餐饮美食', '未知联系人', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', 'group', '净化音乐封面时出错，真是的。', 'refresh-feed-button', '委屈哭', 'coverUrl', 'all', 'push', 'FeWLF', 'char_', 'zdPAG', 'message-anchor', 'absolute', 'event_ai_', 'backgroundColor', 'avatar-wrapper\x20', '最近的足迹', 'VLQkf', '[表情]', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>', 'upload-badge-button', '\x20条新动态。', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', '--primary-lightness', 'WlMWV', '未知歌曲', 'api-model', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'Tikti', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'hornm', 'DVqFK', '视奸内容解析失败:', 'world-book-screen', 'label', '你是一个乐于助人的AI助手。', 'toLowerCase', '71%', '原始文本:', '.typing-indicator', '卡片\x202\x20已移除。', '正在检查是否有需要救援的旧头像...', 'lyric-line-', 'show-chat-view', 'hkUeM', '条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对禁令】(最高优先级)\x0a-\x20你【绝对禁止】扮演“', 'play', '解析存档失败，正在重置:', 'NfshL', 'QridJ', '在“一起听”邀请中，净化封面失败:', '生活服务', 'xWtpE', 'text', 'cancel-action-button', 'authorType', 'accounting-content-area', 'color', '点击选择\x20.mp3\x20或\x20.flac', 'KfGUD', '买新衣服', 'ciLVJ', 'music-input-artist', 'oCXAB', 'FMunI', 'XZPuO', 'toString', 'wRUGN', 'altar-slot-lyrics', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'remove', 'VgrSQ', '2023-06-01', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'spZhV', '<div\x20class=\x22snoop-main-grid\x22></div>', 'dock', 'lAWgC', 'vSojQ', '有点生气', 'characterName', 'noir-author-mark', 'summary-textarea', '\x22\x20的聊天记录吗？此操作不可撤销。', 'normal', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'documentElement', '#ffcc66', 'PBHPJ', '歌曲ID', 'twaIm', 'SBgEr', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'ttzkZ', 'UYswA', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', '[DONE]', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'galgame-view-container', 'noir_data_migration_v1_complete', '\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'changedTouches', 'snoop-home-time', '\x20个模型。', '测试动态已添加！', '#99ff99', 'DgFOQ', '”已成功导入！', 'setDate', 'mxNGO', 'gcNXr', 'spriteTransform', 'urmsK', 'char-edit-offline-bg-input', '赞同！渲染效果一级棒！', 'JMotn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '正在执行净化程序...', 'numeric', '\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20', 'EdjQw', 'objectStore', 'app-calendar', '书记官正在奋笔疾书...', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'countdown-title', 'Cwkdn', '文件格式不正确，不是一个有效的备份文件。', 'mRvdj', '#\x20发生错误：\x0a', 'mEVjv', 'BdvKU', '\x20张旧图片。', 'RUstu', 'add-user-profile-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'dtvem', 'meetingList', 'group-clear-history', 'LLAsS', '用户分享音乐失败:', 'world-book-edit-content', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'parts', 'CihwC', 'uiScale', '无语但是随便吧', 'xreJf', 'ILmBj', 'currentAbortController', 'readAsText', 'area', 'appIconPosition_app-accounting', 'backgroundSize', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'XrrtO', 'diary-modal-textarea', 'yJDzt', 'tag', 'getElementById', 'BCsyi', 'Vtjyb', 'status', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'BPMXy', 'html', 'hidden', '.diary-entry', 'vGuBI', 'BNdwF', 'test', '\x0a##\x20世界书条目:\x20', '1325802wllwRV', '请输入群聊名称。', '</span>:\x20', 'grLCE', 'ugRmO', 'aoKUp', 'VRPOX', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20', 'upload-widget-bg-button', 'back-to-diary-list', 'FXtdo', 'accepted', 'replaceAll', 'reply', 'chat-listen-together-button', '找不到角色。', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', '确定要删除群聊“', 'sYhoh', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'choice-import-character', 'galgame', 'isAnimatingDiary', 'mdpae', 'join', 'group-chat-create-screen', 'organize-bill-button', 'CyoiU', 'pduqq', 'speaker-user', 'AgVfq', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'vWyZD', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', 'review', 'rEsRg', 'diary-view-screen', '-preview', '吃薯条', 'summarize-modal', 'qCLQC', '\x20\x0a#\x20当前情景\x0a', 'Kldtv', 'http', '切换聊天时发生异步错误:', 'tjATj', 'tab-record-expense', 'HYHSI', 'parentElement', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', '今天\x20', '新建好友圈', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', '[图片]', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', 'musicUploadAltar', 'svg', 'save-user-profile-button', 'SruOH', 'onclick', 'gemini', 'test_post_', 'vpxQE', '（开始一段新的对话...）', 'snoopPhone', '已经生成了今日账单！想看就去“看账本”标签页。', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'var(--text-color)', 'categoryId', 'BweMT', 'tqqwK', 'app-wallpaper', 'music-post', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', '群聊名称不能为空！', 'cover', 'global-player-next-btn', 'TToNr', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20个旧头像。', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', '.message-container', 'BURaj', 'bjipz', 'getDay', 'BzlnA', 'json', 'import-char-input', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'ui-scale-slider', 'PZkIe', 'ILowo', '</span></div>', 'api-provider', 'date', 'back-to-home-from-meeting-list', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'xMkaF', 'signal', 'url(', 'reset-badge-button', 'fPSWu', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'back-to-home-from-user-list', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '.music-post-song-card', 'post_user_', '正在搬运旧卡片...', 'image/png', ']\x0a\x0a#\x20角色资料库\x0a', '\x20\x20\x20\x20-\x20', 'transition', '确定要删除这个好友圈吗？此操作不可撤销。', '\x20|\x20', 'transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease', 'PmRWg', 'ykNbi', '\x0a\x20\x20相关记忆:\x0a', 'music-player-bar', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', '<div\x20class=\x22listen-together-header\x22>', 'authorId', 'AI未能返回有效的JSON数组格式。', '找不到旧的存档，无需救援。', 'user_', 'Znyrr', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'diary-modal-cancel', 'odaYp', 'substring', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'Lcqzu', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'yiRpR', 'kBGRs', 'api-key', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', 'tnqFM', 'user-post-textarea', 'diary-send-button', 'delete-user-profile-button', 'GLfdE', 'LilJG', 'KWfCD', '角色“', 'replace', 'GekIx', 'scale', 'dqasY', 'snoop-home-date', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '至少要保留一个用户。', 'abyss', 'widget-bg-input', 'maxHeight', 'xfZXA', 'save-custom-stickers-button', '.category-checkbox[data-category-id=\x22', 'diary-get-reply-button', '大家好像不知道该怎么回复...', 'organize-button-container', 'zTvyK', 'emote', '#66b3ff', '\x20转账\x20', '好友圈\x20', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'char_avatar_', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'setHours', 'xwYnF', 'txnhb', 'ITayx', 'VRTmN', '\x22\x20data-category-id=\x22', '对方正在输入...', 'msg_', 'dcRcP', 'myJOJ', 'emotion', 'back-to-home-from-wallpaper', 'qfoId', '未分类', 'snoop-app-back-btn', '净化完成！总共迁移了\x20', '解析AI剧本JSON失败:', 'user-avatar-preview', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', '刚刚发布了一条动态，内容是：“', '5px', '</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'char_offline_bg_', 'CADzk', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'APaqs', '未知角色', '总得说点什么吧？', '20%', 'userId', 'group-bg-preview', 'sort', 'vMPYb', 'TxpMS', 'DdWEE', 'ThmuR', 'YNOBQ', 'world-book-edit-name', '.widget-info\x20>\x20div', 'artist', 'sPzIC', 'dbYkf', 'galgame-sprite-adjust-ui', '.choice-modal-backdrop', 'isGenerating', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', 'confirm-music-input', 'QoSof', 'transparent', '正在解析备份文件...', 'hapJi', 'customWallpaper', '”，在那里“', 'relative', 'top', '图片处理失败:\x20', 'KGTvX', 'yXKed', 'touchcancel', '未命名角色', '100%', '很期待', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'objectStoreNames', '兼容模式成功，已将\x20', 'event-type-todo', 'classList', 'music-feed-container', 'delete-expense-btn', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'uVaMo', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'Kosgm', '-\x20[', 'scrollTop', 'noir_migration_avatar_v1_complete', 'SqIHc', 'galgame-sprite', '我不想工作', 'KrMMY', 'music-widget', 'AI返回了无法解析的文本', 'card-widget', 'AoTJF', 'hyckG', 'sticker-item', 'yEPIF', '\x0a-\x20**日记本的上一笔记录是在**:\x20', 'char-edit-persona', 'uJKje', 'FLhRy', 'diary-write-button', 'clear', '正在构思中，请稍候...', 'var(--primary-color)', '被你撩到', 'YcZHp', '.page-dot', 'char-edit-bind-user', 'chat', 'rARoL', 'jprJT', 'delete-friend-circle-button', '哼，正在开始净化你那被污染的聊天记录...', 'QlOvg', '好的，我记住了这些人设和历史。现在我们开始对话。', 'MrUmh', 'full-width-module-container', 'senderId', '<div\x20class=\x22post-comments-container\x22>', '请先输入\x20API\x20接口地址和密钥。', 'choice-create-character', 'result', 'HEFgP', '1.4', 'meeting-main-content', 'sender', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', 'repeat(auto-fill,\x20minmax(60px,\x201fr))', ']:\x20', 'GFMnU', 'back-to-home-from-accounting', '\x20个成员', 'char-edit-name', 'setAttribute', 'THiTu', 'TIhlT', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', '\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>', 'IGJYo', 'meTkp', '交通出行', 'Noir_FileSystem', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', 'meeting-char-name-header', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', ':</span>\x20', '”已删除。', 'sprite-confirm-button', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', 'endpoint', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'linkedWorldBookIds', '净化失败了，哼:\x20', 'splice', 'MGmtB', '哼，正在净化你那些被污染的好友圈动态...', 'zPqxN', '.snoop-clear-btn', '歌曲“', 'touches', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', 'diaryView', ':\x22\x20或\x22[', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'NLdik', '群名称已更改为\x22', 'iGoNI', 'fragments', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'UBdSf', 'NbJNX', 'aIbVT', 'NSSOD', '9960IEnEQC', '未命名群聊', 'dataset', 'message-bubble-row', 'QfqhV', 'OPOBZ', 'expense-description', 'player-cover', 'YwJVd', 'MVDlh', 'sZRcT', 'user-avatar-input', 'nIEqC', 'is-entering-from-left', 'IGlNX', '甜蜜地和你聊天', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'Qkbsx', 'csPJG', '-\x20你曾经搜索过：“', 'JzyhS', '\x22\x20class=\x22char-name\x22>', 'LTySI', 'parse', '7275125EgQKsi']; _0xf721 = function () { return _0x2cdfeb; }; return _0xf721(); } async function _0x1a97c4(_0x3b8f1c) { const _0x5df4c5 = await _0x1e3691; return new Promise((_0x1f488a, _0x486c1f) => { const _0x262eb5 = _0x4bce; if (_0x262eb5(0x6fd) === 'YQwMZ') _0x11c9a1(![]); else { const _0x2d46c2 = _0x5df4c5['transaction'](_0x2c779d, _0x262eb5(0xb76)), _0x452848 = _0x2d46c2[_0x262eb5(0x926)](_0x2c779d), _0x35bcd7 = _0x452848[_0x262eb5(0x689)](_0x3b8f1c); _0x35bcd7['onsuccess'] = () => _0x1f488a(_0x35bcd7['result'] ? _0x35bcd7['result']['data'] : null), _0x35bcd7['onerror'] = () => _0x486c1f(_0x35bcd7[_0x262eb5(0x1be)]); } }); } async function _0x574cb8(_0x52bd4a, _0xb86df6) { const _0x5ad7b9 = await _0x1e3691; return new Promise((_0x20b93b, _0x31fa36) => { const _0x5bf869 = _0x4bce; if ('sZMWp' === _0x5bf869(0x5be)) _0x25ebe4(), _0x334ef9[_0x5bf869(0xc5e)](); else { const _0x1702e7 = _0x5ad7b9[_0x5bf869(0x25c)](_0x2c779d, _0x5bf869(0x461)), _0x3419ad = _0x1702e7['objectStore'](_0x2c779d), _0x4af6d4 = _0x3419ad[_0x5bf869(0x734)]({ 'id': _0x52bd4a, 'data': _0xb86df6 }); _0x4af6d4['onsuccess'] = () => _0x20b93b(), _0x4af6d4[_0x5bf869(0x2b0)] = () => _0x31fa36(_0x4af6d4[_0x5bf869(0x1be)]); } }); } async function _0x1e431a(_0x3e05bb) { const _0x3c24e3 = await _0x1e3691; return new Promise((_0x406e63, _0x3dd23a) => { const _0x2ca576 = _0x4bce; if (_0x2ca576(0x80b) !== _0x2ca576(0x211)) { const _0xa1828b = _0x3c24e3[_0x2ca576(0x25c)](_0x2c779d, _0x2ca576(0x461)), _0x34314d = _0xa1828b[_0x2ca576(0x926)](_0x2c779d), _0x508e02 = _0x34314d[_0x2ca576(0xbac)](_0x3e05bb); _0x508e02[_0x2ca576(0x33f)] = () => _0x406e63(), _0x508e02[_0x2ca576(0x2b0)] = () => _0x3dd23a(_0x508e02[_0x2ca576(0x1be)]); } else _0x275b48 = _0x3a4704['createElement'](_0x2ca576(0xaf1)), _0x485212[_0x2ca576(0x1ea)] = _0x2ca576(0x57b), _0x28eeb3[_0x2ca576(0x724)] = _0x2ca576(0x21e), _0x467535['style'][_0x2ca576(0x8b7)] = _0x2ca576(0x398), _0x3a38e3['style'][_0x2ca576(0x401)] = '15px\x2020px', _0x24ae78[_0x2ca576(0x7be)][_0x2ca576(0x80e)] = '8px', _0x5877b5[_0x2ca576(0xc15)](_0x44d716); }); } async function _0x1ebaf2(_0x235c3b, _0x1aeb37) { const _0x590f16 = await _0x1e3691; return new Promise((_0x1e9323, _0x1f770c) => { const _0xf00446 = _0x4bce; if (_0xf00446(0x272) === 'zRfKl') { const _0x38d80a = _0xfd3114['currentTarget'][_0xf00446(0xaac)][_0xf00446(0x9ba)], _0x205f1d = _0x5abb62[_0xf00446(0x698)][_0x38d80a]; _0x205f1d && _0x24624e(_0x205f1d, _0x38d80a); } else { const _0xa52b4b = _0x590f16[_0xf00446(0x25c)](_0x42e918, _0xf00446(0x461)), _0x34fae3 = _0xa52b4b[_0xf00446(0x926)](_0x42e918), _0x24ab4c = _0x34fae3[_0xf00446(0x734)]({ 'id': _0x235c3b, 'blob': _0x1aeb37 }); _0x24ab4c[_0xf00446(0x33f)] = () => _0x1e9323(_0x24ab4c[_0xf00446(0xa75)]), _0x24ab4c[_0xf00446(0x2b0)] = () => _0x1f770c(_0x24ab4c['error']); } }); } async function _0x3ecfc9(_0x1e93da) { const _0x1c1260 = await _0x1e3691; return new Promise((_0x14d415, _0x26749b) => { const _0x45c740 = _0x4bce, _0x4f121b = _0x1c1260[_0x45c740(0x25c)](_0x42e918, _0x45c740(0x461)), _0x179681 = _0x4f121b[_0x45c740(0x926)](_0x42e918), _0x25a46b = _0x179681[_0x45c740(0xbac)](_0x1e93da); _0x25a46b['onsuccess'] = () => _0x14d415(), _0x25a46b[_0x45c740(0x2b0)] = () => _0x26749b(_0x25a46b[_0x45c740(0x1be)]); }); } function _0x5a3320(_0x43903d) { const _0x2de493 = _0x1eaaca; return fetch(_0x43903d)[_0x2de493(0x1d2)](_0x1d8362 => _0x1d8362[_0x2de493(0x3c3)]()); }
  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
