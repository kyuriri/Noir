<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>


<script>

  const _0x2427d6 = _0x1826; (function (_0x1eed8c, _0x4d8e18) { const _0x53cc91 = _0x1826, _0x346c78 = _0x1eed8c(); while (!![]) { try { const _0x1b0873 = parseInt(_0x53cc91(0x3fe)) / 0x1 * (parseInt(_0x53cc91(0x1ec)) / 0x2) + -parseInt(_0x53cc91(0x8e1)) / 0x3 + -parseInt(_0x53cc91(0x311)) / 0x4 * (-parseInt(_0x53cc91(0xaa5)) / 0x5) + parseInt(_0x53cc91(0x637)) / 0x6 + parseInt(_0x53cc91(0xec)) / 0x7 + parseInt(_0x53cc91(0xad2)) / 0x8 + -parseInt(_0x53cc91(0x73a)) / 0x9; if (_0x1b0873 === _0x4d8e18) break; else _0x346c78['push'](_0x346c78['shift']()); } catch (_0x43588d) { _0x346c78['push'](_0x346c78['shift']()); } } }(_0x60eb, 0xb1a4f)); function _0x3696b4(_0x52f548 = new Date()) { const _0x438681 = _0x1826, _0x575e00 = _0x52f548[_0x438681(0x71a)](), _0x4353d6 = String(_0x52f548[_0x438681(0x180)]() + 0x1)[_0x438681(0x1df)](0x2, '0'), _0xba873f = String(_0x52f548[_0x438681(0x1c4)]())[_0x438681(0x1df)](0x2, '0'); return _0x575e00 + '-' + _0x4353d6 + '-' + _0xba873f; } const _0x399914 = _0x2427d6(0x8ac), _0x4f35d5 = 'images', _0x150da7 = 'snoop_cache', _0x5b1700 = document[_0x2427d6(0x53d)](_0x2427d6(0xab9)); _0x5b1700['id'] = 'noir-custom-font-style', document[_0x2427d6(0x4d9)][_0x2427d6(0x30a)](_0x5b1700); var _0x21e37d, _0x4ac7a8 = null; let _0x21b45c = [], _0x229bd9 = ![], _0x5f2086 = { 'x': 0x0, 'y': 0x0 }; function _0x134f5a(_0x2b0dbe) { const _0x220703 = _0x2427d6; return (_0x21e37d?.[_0x220703(0x32d)] || [])[_0x220703(0x354)](_0x8b674f => _0x8b674f['id'] === _0x2b0dbe); } const _0x1cb1a3 = 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', _0x3cf6e1 = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', _0x30019f = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', _0x112b9d = [{ 'name': _0x2427d6(0x714), 'url': _0x2427d6(0x7c7) }, { 'name': '崩溃', 'url': _0x2427d6(0x973) }, { 'name': '生病', 'url': _0x2427d6(0x443) }, { 'name': '工作', 'url': _0x2427d6(0x1b8) }, { 'name': _0x2427d6(0x2b5), 'url': 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg' }, { 'name': '弱小委屈但凶恶', 'url': _0x2427d6(0x220) }, { 'name': _0x2427d6(0xa0d), 'url': 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg' }, { 'name': '期待', 'url': _0x2427d6(0x2fb) }, { 'name': '喜欢', 'url': 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg' }, { 'name': _0x2427d6(0x694), 'url': 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg' }, { 'name': _0x2427d6(0x7db), 'url': _0x2427d6(0x9d7) }, { 'name': '委屈', 'url': _0x2427d6(0x751) }, { 'name': '加油', 'url': _0x2427d6(0xb1c) }, { 'name': '对的', 'url': _0x2427d6(0x4a7) }, { 'name': '不满', 'url': _0x2427d6(0x9e6) }, { 'name': '很期待', 'url': _0x2427d6(0x3c3) }, { 'name': _0x2427d6(0x89d), 'url': _0x2427d6(0x86b) }, { 'name': '委屈', 'url': _0x2427d6(0x1af) }, { 'name': '平静', 'url': _0x2427d6(0x8a9) }, { 'name': '咬你', 'url': _0x2427d6(0xa91) }, { 'name': '咱俩天下第一好', 'url': _0x2427d6(0x74e) }, { 'name': '好困', 'url': _0x2427d6(0x7d4) }, { 'name': '摸鱼', 'url': _0x2427d6(0x431) }, { 'name': _0x2427d6(0xaaa), 'url': _0x2427d6(0x36f) }, { 'name': _0x2427d6(0x346), 'url': _0x2427d6(0x958) }, { 'name': _0x2427d6(0x9ad), 'url': _0x2427d6(0x16e) }, { 'name': _0x2427d6(0x67e), 'url': _0x2427d6(0x768) }, { 'name': _0x2427d6(0x897), 'url': _0x2427d6(0x801) }, { 'name': _0x2427d6(0x4ad), 'url': _0x2427d6(0xb23) }, { 'name': _0x2427d6(0x97a), 'url': _0x2427d6(0x337) }, { 'name': _0x2427d6(0x445), 'url': 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg' }, { 'name': _0x2427d6(0x1d7), 'url': _0x2427d6(0xa0c) }, { 'name': _0x2427d6(0x249), 'url': 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg' }, { 'name': _0x2427d6(0x70b), 'url': _0x2427d6(0x92e) }, { 'name': _0x2427d6(0x2ae), 'url': _0x2427d6(0x486) }, { 'name': _0x2427d6(0xa1e), 'url': _0x2427d6(0x233) }, { 'name': _0x2427d6(0x698), 'url': 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg' }, { 'name': _0x2427d6(0x284), 'url': _0x2427d6(0x3c6) }, { 'name': _0x2427d6(0xaae), 'url': _0x2427d6(0x178) }, { 'name': '有点破防', 'url': 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg' }, { 'name': '快点哄我', 'url': _0x2427d6(0x8fe) }, { 'name': _0x2427d6(0x969), 'url': _0x2427d6(0x32c) }, { 'name': _0x2427d6(0x79d), 'url': 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg' }, { 'name': _0x2427d6(0x472), 'url': _0x2427d6(0x96d) }, { 'name': _0x2427d6(0xa63), 'url': _0x2427d6(0x3af) }, { 'name': _0x2427d6(0x9a9), 'url': _0x2427d6(0x92a) }, { 'name': '甜蜜地和你聊天', 'url': 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg' }, { 'name': _0x2427d6(0x5ca), 'url': _0x2427d6(0x8ee) }, { 'name': '我是小丑呜呜', 'url': _0x2427d6(0x4a1) }, { 'name': _0x2427d6(0x9e7), 'url': _0x2427d6(0x593) }, { 'name': _0x2427d6(0x531), 'url': _0x2427d6(0x52b) }, { 'name': _0x2427d6(0x4da), 'url': _0x2427d6(0x36a) }, { 'name': _0x2427d6(0xb39), 'url': _0x2427d6(0x371) }, { 'name': '等你', 'url': _0x2427d6(0x32e) }, { 'name': _0x2427d6(0x54f), 'url': _0x2427d6(0x6e3) }, { 'name': _0x2427d6(0x246), 'url': 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg' }, { 'name': '喝酒', 'url': _0x2427d6(0x6ee) }, { 'name': _0x2427d6(0x5d6), 'url': _0x2427d6(0x34f) }, { 'name': '呜呜', 'url': _0x2427d6(0x123) }, { 'name': _0x2427d6(0x213), 'url': _0x2427d6(0x9cd) }, { 'name': _0x2427d6(0x94f), 'url': _0x2427d6(0x735) }, { 'name': _0x2427d6(0x2df), 'url': _0x2427d6(0x19f) }, { 'name': _0x2427d6(0x748), 'url': _0x2427d6(0x506) }, { 'name': _0x2427d6(0xb1e), 'url': 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif' }], _0x176296 = { 'beige': { 'name': _0x2427d6(0x2dc), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x2427d6(0x327), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x2427d6(0x98a), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': '暗夜紫晶', 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x2427d6(0xe9)](_0x2427d6(0x30e), () => { const _0x4a89cb = _0x2427d6, _0x21c9ae = document['getElementById'](_0x4a89cb(0x461)), _0x35b5fe = document[_0x4a89cb(0x2fc)]('chat-transfer-button'), _0x2a3093 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x17f)), _0x5def4a = document['getElementById']('transfer-backdrop'), _0x381a24 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x95c)), _0x6b45eb = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x5c2)), _0x2ec08f = document['getElementById'](_0x4a89cb(0xadb)), _0x5e58a1 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x2fd)), _0x1ee8ee = document['getElementById'](_0x4a89cb(0x29d)), _0x34115d = document['getElementById']('chat-reroll-button'), _0x32c0b4 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x603)), _0x1c0e15 = document['getElementById'](_0x4a89cb(0x915)), _0x97fb64 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x678)), _0x406374 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x214)), _0x5a57fd = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa19)), _0x404e00 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x44d)), _0x2188b7 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa86)), _0xe6f39 = document['getElementById'](_0x4a89cb(0x4e8)), _0x414e47 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x64d)), _0xe5cef8 = document[_0x4a89cb(0x2fc)]('char-edit-offline-bg-input'), _0x5cdfd6 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x236)), _0x47b37f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x35d)), _0x48fe4c = document['getElementById'](_0x4a89cb(0x86f)), _0x254afb = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xac3)), _0x147c29 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x2ce)), _0x3ae8cb = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x166)), _0x49e959 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x61e)); async function _0x5d6cf6(_0x178372) { const _0x16cab6 = _0x4a89cb; if ('vlFRF' !== _0x16cab6(0x5aa)) try { const _0xdc6a89 = URL[_0x16cab6(0x3a1)](_0x178372), _0x123c66 = _0x16cab6(0x1da), _0x3c9c04 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x123c66 + _0x16cab6(0x9b2) + _0xdc6a89 + '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x5b1700[_0x16cab6(0x109)] = _0x3c9c04, document[_0x16cab6(0x7f3)][_0x16cab6(0xab9)][_0x16cab6(0x7e1)](_0x16cab6(0x46a), '\x27' + _0x123c66 + '\x27'), _0x49e959['textContent'] = _0x16cab6(0x59e); } catch (_0x354d2d) { _0x16cab6(0x627) === _0x16cab6(0x1ba) ? _0x22dce8[_0x16cab6(0x30a)](_0x1b5961) : (console[_0x16cab6(0xa12)](_0x16cab6(0x7bb), _0x354d2d), _0x2d1f89(_0x16cab6(0x372))); } else { const _0x350811 = _0x5a7707[_0x16cab6(0x53d)](_0x16cab6(0x6b3)); _0x350811[_0x16cab6(0x175)] = _0x16cab6(0x896); const _0x50e109 = _0x5eddf4[_0x16cab6(0x145)] ? _0x390611['createObjectURL'](_0x43362e['cover']) : _0x242c98; _0x350811[_0x16cab6(0x109)] = _0x16cab6(0x655) + _0x50e109 + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x510f79['info'][_0x16cab6(0x69b)] || _0x16cab6(0x1a9)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0xbe9966[_0x16cab6(0x747)]['歌手'] || _0x16cab6(0x565)) + _0x16cab6(0x774), _0x350811[_0x16cab6(0xe9)](_0x16cab6(0x6f4), () => { _0x4fee29(_0x17b4bc); }), _0x29f173[_0x16cab6(0x30a)](_0x350811); } } async function _0x475016() { const _0x5c1b36 = _0x4a89cb; try { if (_0x5c1b36(0x984) === _0x5c1b36(0x13c)) return _0x812fc1[_0x5c1b36(0x4a8)] !== _0x5c1b36(0xa1d) && _0x1b60fe[_0x5c1b36(0xa12)](_0x5c1b36(0x5c9), _0x1f7303), null; else { const _0x520e3b = await _0x3bbeae(_0x5c1b36(0x3d5)); if (_0x520e3b) { if (_0x5c1b36(0x5ec) === _0x5c1b36(0x5ec)) console[_0x5c1b36(0x172)](_0x5c1b36(0x137)), await _0x5d6cf6(_0x520e3b); else { _0x59c176[_0x5c1b36(0x872)] = [..._0x143c53], _0x4b84a0[_0x5c1b36(0xafb)][_0x483ef5['id']] = [..._0xe56d11], _0x3be9f7(); const _0x40390f = _0x162a02[_0x5c1b36(0x592)](_0x59b183 => _0x59b183[_0x5c1b36(0x966)] === 'narrator' ? _0x59b183['line'] : _0x59b183[_0x5c1b36(0x966)] + ':\x20' + _0x59b183[_0x5c1b36(0x810)])[_0x5c1b36(0x2c2)]('\x0a\x0a'); _0x253440['conversationHistory'][_0x5c1b36(0x9f2)]({ 'role': _0x5c1b36(0x31e), 'senderId': _0x456d8b['id'], 'timestamp': _0x1f94cf[_0x5c1b36(0x300)](), 'isOffline': !![], 'content': _0x40390f }); } } } } catch (_0x422e7a) { console[_0x5c1b36(0xa12)]('加载已保存字体失败:', _0x422e7a); } } async function _0x46fd63(_0x1e1521) { const _0x233434 = _0x4a89cb, _0x6baa1b = _0x1e1521[_0x233434(0x37e)][_0x233434(0x10d)][0x0]; if (!_0x6baa1b || !_0x6baa1b['name']['toLowerCase']()[_0x233434(0x601)](_0x233434(0x815))) { if ('zMmlG' === 'zMmlG') { _0x2d1f89(_0x233434(0x796)); return; } else _0x1f7558[_0x233434(0x2fc)](_0x233434(0x240))[_0x233434(0xe9)]('click', async () => { _0xcbc6f8(_0x20cd7b, _0x2d5ee2, !![]); }); } _0x171a38(!![], _0x233434(0x324)); try { _0x233434(0x426) === _0x233434(0xa8e) ? _0x108a9e[_0x233434(0x70c)] === _0x233434(0x60f) && !_0x4d6e63[_0x233434(0x4fa)] && (_0x32bd76['preventDefault'](), _0xef495f()) : (await _0x24ce6b(_0x233434(0x3d5), _0x6baa1b), await _0x5d6cf6(_0x6baa1b), _0x2d1f89(_0x233434(0x1ab))); } catch (_0x5e0fa0) { 'ywoKn' === _0x233434(0x83b) ? _0x2d1f89(_0x233434(0x10a) + _0x5e0fa0[_0x233434(0x420)]) : (_0x591c76 = new _0x127594(_0x4c50d2['max'][_0x233434(0x3a3)](null, _0x2d0b31)), _0x202ec5 = _0x5ec3bc[_0x233434(0x926)](_0x233434(0x223), { 'dateStyle': 'medium', 'timeStyle': _0x233434(0x79f) })); } finally { _0x171a38(![]), _0x3ae8cb[_0x233434(0x91b)] = ''; } } async function _0x2a3d87() { const _0x354c6c = _0x4a89cb, _0x3223d5 = await _0x46bf1c(_0x354c6c(0x8c7)); if (_0x3223d5) try { if (_0x354c6c(0x775) === _0x354c6c(0x775)) await _0xf90f34(_0x354c6c(0x3d5)), _0x5b1700['innerHTML'] = '', document[_0x354c6c(0x7f3)][_0x354c6c(0xab9)][_0x354c6c(0x269)](_0x354c6c(0x46a)), _0x49e959[_0x354c6c(0x908)] = _0x354c6c(0x212), _0x2d1f89('已恢复默认字体。'); else { const _0x1a80ca = _0x540993(_0x37460b); if (_0x1a80ca) { const _0x578353 = _0xc8af56[_0x354c6c(0x53d)](_0x354c6c(0x1f5)); _0x578353['value'] = _0x1a80ca['id'], _0x578353[_0x354c6c(0x908)] = _0x1a80ca[_0x354c6c(0x4a8)], _0x17da99['appendChild'](_0x578353); } } } catch (_0x3ef04f) { _0x2d1f89(_0x354c6c(0x348) + _0x3ef04f[_0x354c6c(0x420)]); } } function _0x50c4d3() { const _0x31f96e = _0x4a89cb; if (_0x31f96e(0x524) !== _0x31f96e(0x857)) { const _0x2ba086 = document[_0x31f96e(0x2fc)]('theme-hue-slider'); if (!_0x2ba086) return; const _0x2525df = localStorage[_0x31f96e(0x7b7)](_0x31f96e(0x812)) || '35'; document['documentElement'][_0x31f96e(0xab9)][_0x31f96e(0x7e1)](_0x31f96e(0xa26), _0x2525df), _0x2ba086[_0x31f96e(0x91b)] = _0x2525df, _0x2ba086['addEventListener'](_0x31f96e(0x978), () => { const _0x31eb15 = _0x31f96e; if (_0x31eb15(0x179) !== 'FIAeT') _0x64bf40(![]), _0x41e53b[_0x31eb15(0x91b)] = ''; else { const _0xf9e7a8 = _0x2ba086[_0x31eb15(0x91b)]; document[_0x31eb15(0x7f3)]['style'][_0x31eb15(0x7e1)](_0x31eb15(0xa26), _0xf9e7a8), localStorage['setItem']('themeHue', _0xf9e7a8), _0x272b51(); } }); } else _0x4f59b8(), _0x1ecc4a(_0x31f96e(0x937), _0x31f96e(0xa20)); } function _0x2f0687() { const _0x1189bf = _0x4a89cb, _0xd3b821 = document[_0x1189bf(0x2fc)](_0x1189bf(0xad9)); if (!_0xd3b821) return; const _0x4094ce = localStorage[_0x1189bf(0x7b7)](_0x1189bf(0xa80)) || '80'; document[_0x1189bf(0x7f3)]['style'][_0x1189bf(0x7e1)](_0x1189bf(0xb06), _0x4094ce + '%'), _0xd3b821[_0x1189bf(0x91b)] = _0x4094ce, _0xd3b821[_0x1189bf(0xe9)](_0x1189bf(0x978), () => { const _0x3524cb = _0x1189bf; if (_0x3524cb(0x9b0) !== _0x3524cb(0x964)) { const _0x27e3ad = _0xd3b821[_0x3524cb(0x91b)]; document[_0x3524cb(0x7f3)][_0x3524cb(0xab9)][_0x3524cb(0x7e1)](_0x3524cb(0xb06), _0x27e3ad + '%'), localStorage[_0x3524cb(0x25f)](_0x3524cb(0xa80), _0x27e3ad), _0x272b51(); } else { if (!_0xcd5e2c[_0x3524cb(0x684)](_0x3eed0b)) return _0x3524cb(0x571); if (_0x4ad6fa['length'] === 0x0) return _0x3524cb(0x64f); return _0x313215[_0x3524cb(0xa17)]((_0x3373fa, _0xb82a98) => new _0x5b8d62(_0xb82a98[_0x3524cb(0x6cc)]) - new _0x25fbef(_0x3373fa[_0x3524cb(0x6cc)])), _0x3524cb(0x769) + _0x1ae0b6['map'](_0x1e0e2f => _0x3524cb(0x920) + (_0x1e0e2f['location_name'] || _0x3524cb(0x469)) + _0x3524cb(0x3f9) + (_0x1e0e2f[_0x3524cb(0x261)] || '') + _0x3524cb(0xe7) + (_0x1e0e2f[_0x3524cb(0x6cc)] || '') + _0x3524cb(0xa5e))[_0x3524cb(0x2c2)]('') + _0x3524cb(0x94b); } }); } function _0x272b51() { const _0x1230ca = _0x4a89cb; if (_0x1230ca(0x48f) !== _0x1230ca(0x48f)) { const _0x34c673 = _0x5beee5[_0x1230ca(0x2fc)](_0x41ce4b); _0x34c673['innerHTML'] = '', _0x590627[_0x1230ca(0x63b)][_0x1230ca(0xb13)](_0x4555dd => { const _0x3796ef = _0x1230ca, _0x4d70d7 = _0x2c4d5c['createElement']('option'); _0x4d70d7['value'] = _0x4555dd['id'], _0x4d70d7['textContent'] = _0x4555dd[_0x3796ef(0x4a8)], _0x34c673[_0x3796ef(0x30a)](_0x4d70d7); }); } else { const _0x6b2bb0 = document[_0x1230ca(0x2fc)](_0x1230ca(0x45f)); if (!_0x6b2bb0) return; _0x21e37d['preferences'][_0x1230ca(0x70d)] ? (_0x6b2bb0['style'][_0x1230ca(0x9fd)] = '#FFFFFF', _0x6b2bb0[_0x1230ca(0xab9)][_0x1230ca(0x113)] = _0x1230ca(0x399)) : (_0x6b2bb0['style'][_0x1230ca(0x9fd)] = _0x1230ca(0x798), _0x6b2bb0['style'][_0x1230ca(0x113)] = 'none'); } } function _0x4bd1af() { const _0x37b2bc = _0x4a89cb, _0xea016d = document[_0x37b2bc(0x2fc)](_0x37b2bc(0x520)); if (!_0xea016d) return; _0xea016d[_0x37b2bc(0x21e)] = _0x21e37d['preferences']['forceWhiteClock'] || ![], _0xea016d[_0x37b2bc(0xe9)](_0x37b2bc(0x782), () => { const _0x521f89 = _0x37b2bc; _0x521f89(0xaf9) === 'xIErW' ? _0x19b5a0[_0x3f1f7e[_0x3c4a28]] = _0x2f6ff5 : (_0x21e37d[_0x521f89(0x88a)]['forceWhiteClock'] = _0xea016d[_0x521f89(0x21e)], _0x37e4ef(), _0x272b51()); }); } _0x48fe4c['addEventListener'](_0x4a89cb(0x6f4), _0x11758d), _0x5cdfd6[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x14e38e = _0x4a89cb; _0x50d530(), _0x47b37f[_0x14e38e(0x6f4)](); }), _0x47b37f[_0x4a89cb(0xe9)]('change', _0x5c050d); const _0x476dfb = { 'home': document[_0x4a89cb(0x2fc)]('home-screen'), 'chat': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x42b)), 'settings': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x16f)), 'userProfile': document[_0x4a89cb(0x2fc)]('user-profile-screen'), 'characterEdit': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x221)), 'groupChatCreate': document['getElementById'](_0x4a89cb(0xb0c)), 'wallpaper': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7c3)), 'worldBook': document[_0x4a89cb(0x2fc)]('world-book-screen'), 'worldBookEditor': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x19e)), 'groupSettings': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x89a)), 'music': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x12d)), 'friendCircleList': document[_0x4a89cb(0x2fc)]('friend-circle-list-screen'), 'friendCircleEdit': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x666)), 'meetingList': document[_0x4a89cb(0x2fc)]('meeting-list-screen'), 'meetingView': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1e2)), 'userProfileList': document['getElementById'](_0x4a89cb(0x3e8)), 'diaryList': document[_0x4a89cb(0x2fc)]('diary-list-screen'), 'diaryView': document[_0x4a89cb(0x2fc)]('diary-view-screen'), 'musicLibrary': document['getElementById'](_0x4a89cb(0x848)), 'musicUploadAltar': document[_0x4a89cb(0x2fc)]('music-upload-altar-screen'), 'accounting': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x417)), 'snoopList': document[_0x4a89cb(0x2fc)]('snoop-list-screen'), 'snoopPhone': document['getElementById'](_0x4a89cb(0x9a1)), 'calendar': document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa10)) }, _0xb96386 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9bd)), _0x5ad654 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9c1)), _0x519d95 = document['getElementById'](_0x4a89cb(0x419)), _0xe69685 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x567)), _0x1ce2ff = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x847)), _0x8ecc00 = document['getElementById'](_0x4a89cb(0x6bf)), _0x4e2e04 = document['getElementById'](_0x4a89cb(0x1fe)), _0x320a7e = document['getElementById'](_0x4a89cb(0x1a2)); document[_0x4a89cb(0x2fc)]('reset-desktop-button')[_0x4a89cb(0xe9)]('click', async () => { const _0xa23832 = _0x4a89cb, _0x115bf8 = await _0x46bf1c(_0xa23832(0x902)); if (_0x115bf8) { localStorage['removeItem']('badgeState'), localStorage['removeItem'](_0xa23832(0x608)), localStorage['removeItem']('clockPosition'), localStorage[_0xa23832(0xb05)](_0xa23832(0x2e5)); const _0x27795d = []; for (let _0x3d28ac = 0x0; _0x3d28ac < localStorage[_0xa23832(0x8ab)]; _0x3d28ac++) { if (_0xa23832(0x8de) === _0xa23832(0x7b6)) _0x2d0818(), _0x508bb3 = null; else { const _0x36bf39 = localStorage['key'](_0x3d28ac); _0x36bf39 && _0x36bf39[_0xa23832(0x835)](_0xa23832(0x418)) && _0x27795d[_0xa23832(0x9f2)](_0x36bf39); } } _0x27795d[_0xa23832(0xb13)](_0x232792 => localStorage['removeItem'](_0x232792)), await _0x24ce6b(_0xa23832(0xa16), await _0x32101d(_0xa23832(0x901))), _0x2d1f89(_0xa23832(0x7ea)), setTimeout(() => location[_0xa23832(0x6a1)](), 0x5dc); } }); const _0x30de4c = document['getElementById'](_0x4a89cb(0x7f2)), _0x389e54 = document[_0x4a89cb(0x2fc)]('add-choice-backdrop'), _0x3c2f0a = document['getElementById'](_0x4a89cb(0x999)), _0x269f70 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x85d)), _0x32e22f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x21d)), _0x452d9e = document[_0x4a89cb(0x2fc)]('back-to-char-select-from-group-create'), _0x480b8a = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb26)), _0x3f57d5 = document['getElementById'](_0x4a89cb(0x65e)), _0x588b43 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x651)), _0xef9ca5 = document['getElementById'](_0x4a89cb(0x898)), _0x1b47d7 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa94)), _0x332354 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa11)), _0x4cc989 = document[_0x4a89cb(0x2fc)]('back-to-home-from-chat'), _0x516c62 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1eb)), _0xe2f843 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x5f0)), _0x5e2918 = document['getElementById'](_0x4a89cb(0x4b0)), _0x41c635 = document['getElementById'](_0x4a89cb(0x110)), _0x35c2ba = document[_0x4a89cb(0x2fc)]('add-chat-button'), _0x1e32a1 = document[_0x4a89cb(0x2fc)]('chat-screen'), _0x52e3c1 = document[_0x4a89cb(0x2fc)]('chat-messages'), _0xa096b5 = document['getElementById'](_0x4a89cb(0x60a)), _0x174e09 = document['getElementById'](_0x4a89cb(0x8d2)), _0x2534bf = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x125)), _0x563038 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x994)), _0x12d49d = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9dc)), _0x45ea2f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7ad)), _0x2a8272 = document[_0x4a89cb(0x2fc)]('cancel-quote-button'), _0x1b22f5 = document['getElementById'](_0x4a89cb(0x2d8)), _0x47af0c = document[_0x4a89cb(0x2fc)]('chat-sticker-button'), _0x22569c = document['getElementById'](_0x4a89cb(0x9e4)), _0x25240b = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xac0)), _0xfecd2b = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xafe)), _0xd154c4 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x5a2)), _0x4770a3 = document['getElementById']('offline-scene-view'), _0x5a59ca = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa6b)), _0xae2b99 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb0a)), _0x10509f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb2e)), _0x390a94 = document['getElementById']('save-api-settings-button'), _0x183100 = document[_0x4a89cb(0x2fc)]('fetch-models-button'), _0x3705c6 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb3a)), _0xde0598 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x817)), _0x29531d = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x164)), _0x1942f9 = document[_0x4a89cb(0x2fc)]('user-avatar-preview'), _0x352bdc = document[_0x4a89cb(0x2fc)]('user-avatar-input'), _0x17e98d = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9d9)), _0x20a8ca = document['getElementById'](_0x4a89cb(0x3cd)), _0x324a4a = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xe8)), _0x27d0ce = document['getElementById'](_0x4a89cb(0xab4)), _0x34aeac = document['getElementById'](_0x4a89cb(0x74b)), _0x47fcc8 = document[_0x4a89cb(0x2fc)]('char-edit-remark'), _0x42f6e4 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x4ab)), _0x18aa2a = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x6e7)), _0x4039cf = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x929)), _0x4cbcc5 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x530)), _0x1cec63 = document[_0x4a89cb(0x2fc)]('edit-clear-history-button'), _0x414aef = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x102)); let _0x23d1f2 = null; const _0x448c0d = _0x4a89cb(0x433), _0x21b832 = _0x4a89cb(0x7be); _0x21e37d = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x37e4ef() { const _0x31de91 = _0x4a89cb; if (_0x31de91(0xb37) !== _0x31de91(0xb37)) _0x4c498e[_0x31de91(0x9fb)] = _0x111343[_0x31de91(0x3a1)](_0x4ad7cb), _0xa76a6b['style']['display'] = 'block'; else try { if ('YCOQm' === _0x31de91(0x5b5)) { const _0x1bf85f = _0x21e37d['characters']['map'](_0x4f15f5 => { const _0x31cfd7 = _0x31de91, _0x59fa1a = { ..._0x4f15f5 }; return _0x59fa1a[_0x31cfd7(0x496)] && _0x59fa1a[_0x31cfd7(0x496)][_0x31cfd7(0x835)](_0x31cfd7(0x7b9)) && delete _0x59fa1a[_0x31cfd7(0x496)], _0x59fa1a; }), _0x54d156 = { 'version': 0x1, 'characters': _0x1bf85f, 'worldBooks': _0x21e37d[_0x31de91(0x584)], 'chats': _0x21e37d['chats'], 'apiSettings': _0x21e37d[_0x31de91(0xa6e)], 'preferences': _0x21e37d[_0x31de91(0x88a)], 'activeChatId': _0x21e37d[_0x31de91(0x272)], 'diaries': _0x21e37d[_0x31de91(0x366)], 'friendCircles': _0x21e37d[_0x31de91(0x635)], 'activeFriendCircleId': _0x21e37d[_0x31de91(0x26c)], 'userProfiles': _0x21e37d['userProfiles'], 'activeUserProfileId': _0x21e37d['activeUserProfileId'], 'accountingData': _0x21e37d['accountingData'], 'accountingLedger': _0x21e37d[_0x31de91(0x288)], 'calendarEvents': _0x21e37d[_0x31de91(0x206)] }; localStorage[_0x31de91(0x25f)](_0x31de91(0x689), JSON[_0x31de91(0x41f)](_0x54d156)); } else { if (_0x25f938 === null) return; const _0x103184 = _0x2a0aba[_0x31de91(0x91b)][_0x31de91(0x1b5)](); if (_0x103184 === '') { _0x11f145(); return; } const _0x9d470 = _0x4ac7c3['conversationHistory'][_0x30630d]; _0x9d470 && (_0x9d470['content'] = _0x103184, _0x36563e(), _0x68a1f0()), _0x4a69f6[_0x31de91(0x402)][_0x31de91(0x3c2)](_0x31de91(0x393)), _0x29f445 = null; } } catch (_0x1cf86a) { console['error'](_0x31de91(0x836), _0x1cf86a), _0x2d1f89('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。'); } } async function _0x2cdd84() { const _0x464187 = _0x4a89cb; if (!_0x21e37d[_0x464187(0x32d)] || _0x21e37d[_0x464187(0x32d)][_0x464187(0x8ab)] === 0x0) { if ('NcfTs' !== _0x464187(0x681)) { _0x49ed98(_0x464187(0x7b1)); return; } else { console[_0x464187(0x172)]('没有角色需要恢复头像，跳过。'); return; } } console[_0x464187(0x172)]('启动头像恢复程序...'); for (const _0x284b43 of _0x21e37d[_0x464187(0x32d)]) { if (_0x464187(0x517) !== _0x464187(0xaea)) { if (!_0x284b43[_0x464187(0x496)]) { if (_0x464187(0x792) !== 'MrcbS') try { const _0x17d299 = await _0x3bbeae('char_avatar_' + _0x284b43['id']); _0x17d299 && (_0x284b43['avatar'] = await _0x425503(_0x17d299)); } catch (_0x49bd5f) { console[_0x464187(0xa12)](_0x464187(0x3fb) + _0x284b43['name'] + '\x20(' + _0x284b43['id'] + _0x464187(0x1c3), _0x49bd5f); } else _0x21ac74['classList']['add'](_0x464187(0x911)), _0x5ed671[_0x464187(0x410)]({ 'behavior': _0x464187(0x139), 'block': 'center' }); } } else { let _0x507437 = _0x1c7c91['getElementById'](_0x464187(0x181) + _0x1dddb9['id']); !_0x507437 && (_0x507437 = _0x4a0579[_0x464187(0x53d)](_0x464187(0xab9)), _0x507437['id'] = 'style-' + _0x59f992['id'], _0x2d6051[_0x464187(0x4d9)][_0x464187(0x30a)](_0x507437)); const _0x140de0 = _0x411ab5[_0x464187(0x158)], _0x11f3ca = _0x140de0['replace'](/\.bubble\.sent/g, _0x464187(0x51a) + _0x17978d['id'] + _0x464187(0x3a7))[_0x464187(0x8f0)](/\.bubble\.received/g, _0x464187(0x51a) + _0x45bbe6['id'] + _0x464187(0x5c3)); _0x507437['innerHTML'] = _0x11f3ca; } } console[_0x464187(0x172)](_0x464187(0x225)); } function _0x3b4234() { const _0x4fdcea = _0x4a89cb; if (_0x4fdcea(0x54d) === _0x4fdcea(0x695)) { const _0x3e5f1c = _0x282f52(_0x28fa89['id']); if (_0x3e5f1c && _0x3e5f1c[_0x4fdcea(0x8ab)] > 0x0) { const _0x23cdb8 = _0x3e5f1c[_0x3e5f1c[_0x4fdcea(0x8ab)] - 0x1]; (!_0x106bee || _0x23cdb8['timestamp'] > _0x2f0e7f[_0x4fdcea(0x6cc)]) && (_0x28082a = _0x23cdb8); } } else { let _0x1bebb7 = null; try { _0x4fdcea(0x1f4) === 'YpoaH' ? _0x1bebb7 = localStorage['getItem'](_0x4fdcea(0x689)) : _0x3e9423[_0x4fdcea(0x908)] = _0x3946bb[_0x4fdcea(0x4a8)] || _0x4fdcea(0x4e7) + _0x537341[_0x4fdcea(0xad8)][_0x4fdcea(0x8ab)] + ')'; } catch (_0x5b29a2) { console[_0x4fdcea(0xa12)](_0x4fdcea(0x1cf), _0x5b29a2); } if (_0x1bebb7) try { if (_0x4fdcea(0x75b) !== 'hFhyF') { const _0x14a17f = _0x1d1063['createElement']('p'); _0x14a17f[_0x4fdcea(0x109)] = _0x27a6e9, _0x14a17f[_0x4fdcea(0xab9)][_0x4fdcea(0xac7)] = '0', _0x6a1ba1[_0x4fdcea(0x30a)](_0x14a17f); } else { const _0x1f3eb2 = JSON[_0x4fdcea(0x16b)](_0x1bebb7), _0x5b506c = { ..._0x21e37d }, _0x16d161 = { ..._0x5b506c, ..._0x1f3eb2 }; _0x16d161[_0x4fdcea(0x88a)] = { ..._0x5b506c['preferences'], ..._0x1f3eb2['preferences'] || {} }, _0x16d161['apiSettings'] = { ..._0x5b506c[_0x4fdcea(0xa6e)], ..._0x1f3eb2['apiSettings'] || {} }, Object[_0x4fdcea(0x61c)](_0x21e37d, _0x16d161); } } catch (_0x324feb) { if ('xHwwm' === _0x4fdcea(0x271)) { if (_0x3eba0e[_0x4fdcea(0x4a8)] !== _0x4fdcea(0xa1d)) { _0x1fb95d[_0x4fdcea(0xa12)]('生成失败:\x20', _0x2dc9ec); const _0x46bd3c = { 'role': _0x4fdcea(0x31e), 'content': _0x4fdcea(0x3f1) + _0x62c825[_0x4fdcea(0x420)], 'senderId': _0x3280ec['id'], 'isOffline': _0x2c7031 }; _0x85a689[_0x4fdcea(0x31d)][_0x4fdcea(0x9f2)](_0x46bd3c), _0x6d596e(); } return ![]; } else console[_0x4fdcea(0xa12)](_0x4fdcea(0xa77), _0x324feb), localStorage['removeItem'](_0x4fdcea(0x689)); } const _0x1faadf = _0x21e37d['characters'][_0x4fdcea(0x8ab)] === 0x0; !_0x21e37d['chats'][_0x4fdcea(0x354)](_0x57bae7 => _0x57bae7['id'] === _0x21e37d[_0x4fdcea(0x272)]) && (_0x21e37d[_0x4fdcea(0x272)] = _0x21e37d[_0x4fdcea(0x69a)][0x0]?.['id'] || null); if (_0x1bebb7) { if (_0x4fdcea(0x611) === 'yOZYa') _0x37e4ef(); else { _0x4ab827(_0x4fdcea(0x550)); return; } } return _0x1faadf; } } function _0x1a9239() { const _0x1a9609 = _0x4a89cb; if (!_0x21e37d['activeChatId']) return; try { localStorage[_0x1a9609(0x25f)](_0x1a9609(0xacb) + _0x21e37d['activeChatId'], JSON[_0x1a9609(0x41f)](_0x21e37d[_0x1a9609(0x31d)])); } catch (_0x30866a) { console['error'](_0x1a9609(0x8a4), _0x30866a), _0x2d1f89(_0x1a9609(0x2db)); } } function _0x2edc85() { const _0x5ca369 = _0x4a89cb; if (!_0x21e37d['activeChatId']) { if (_0x5ca369(0x51b) !== _0x5ca369(0x51b)) _0x2a6584(_0x5ca369(0x3f1) + _0x1da37e[_0x5ca369(0x420)]); else { _0x21e37d[_0x5ca369(0x31d)] = [], _0x5a0ef9(); return; } } let _0xee3c2e = null; try { if ('qLLQD' !== _0x5ca369(0x9da)) _0xee3c2e = localStorage[_0x5ca369(0x7b7)](_0x5ca369(0xacb) + _0x21e37d[_0x5ca369(0x272)]); else return 0x0; } catch (_0x3ce6a7) { console['error'](_0x5ca369(0x11d) + _0x21e37d[_0x5ca369(0x272)], _0x3ce6a7); } let _0x549cb3 = []; if (_0xee3c2e) try { if (_0x5ca369(0x3b2) !== 'nqYPV') { const _0x5c0a1c = JSON['parse'](_0xee3c2e); if (Array[_0x5ca369(0x684)](_0x5c0a1c)) { if (_0x5ca369(0xadc) !== _0x5ca369(0x8c5)) _0x549cb3 = _0x5c0a1c[_0x5ca369(0x4b7)](_0x9b04a1 => _0x9b04a1 && typeof _0x9b04a1 === 'object' && typeof _0x9b04a1[_0x5ca369(0x568)] === _0x5ca369(0x9b5) && typeof _0x9b04a1[_0x5ca369(0xaf8)] !== _0x5ca369(0xa2d)); else { _0x55b7d1 = _0x2c5c67[_0x5ca369(0x69a)][_0x5ca369(0x354)](_0x267772 => _0x267772[_0x5ca369(0x497)] === _0x5ca369(0x9de) && _0x267772['participantIds'][_0x5ca369(0x6f7)](_0x599852)); const _0x56311f = _0x58ab94(_0x3e054e); _0x510aa0 = _0x56311f ? _0x56311f[_0x5ca369(0x4a8)] : _0x5ca369(0x5eb); } } } else { const _0x13803f = _0x408f60[_0x5ca369(0x2fc)](_0x5ca369(0x82b)); if (!_0x13803f) return; const _0x318158 = _0x4fe4d4[_0x5ca369(0x7b7)](_0x5ca369(0x812)) || '35'; _0x2ee9dd[_0x5ca369(0x7f3)][_0x5ca369(0xab9)][_0x5ca369(0x7e1)](_0x5ca369(0xa26), _0x318158), _0x13803f[_0x5ca369(0x91b)] = _0x318158, _0x13803f['addEventListener']('input', () => { const _0x427d87 = _0x5ca369, _0x5be7da = _0x13803f[_0x427d87(0x91b)]; _0x29e253[_0x427d87(0x7f3)][_0x427d87(0xab9)]['setProperty'](_0x427d87(0xa26), _0x5be7da), _0x320bad[_0x427d87(0x25f)](_0x427d87(0x812), _0x5be7da), _0x4b6fb3(); }); } } catch (_0x59ae57) { if ('xoxvD' !== _0x5ca369(0x6a9)) { console['error'](_0x5ca369(0x10f) + _0x21e37d[_0x5ca369(0x272)] + _0x5ca369(0x3e6), _0x59ae57); try { localStorage[_0x5ca369(0xb05)](_0x5ca369(0xacb) + _0x21e37d[_0x5ca369(0x272)]); } catch (_0x3044a1) { _0x5ca369(0x44c) === _0x5ca369(0x771) ? (_0x19872a['src'] = _0x595dee[_0x5ca369(0x3a1)](_0x34568b), _0x361024[_0x5ca369(0xab9)][_0x5ca369(0x243)] = _0x5ca369(0xa25), _0x41b82b[_0x5ca369(0xab9)]['border'] = 'none', _0x14af80[_0x5ca369(0xab9)][_0x5ca369(0x3ee)] = 'transparent') : console[_0x5ca369(0xa12)](_0x5ca369(0x685), _0x3044a1); } } else _0x3d2550 = _0x64f69b[_0x5ca369(0xaa9)]; } _0x21e37d['conversationHistory'] = _0x549cb3, _0x52e3c1[_0x5ca369(0x109)] = '', _0x21e37d[_0x5ca369(0x31d)] && (_0x5ca369(0x1e3) === _0x5ca369(0x424) ? _0x4f03d9[_0x5ca369(0x9f2)](_0x38c1b6[_0x5ca369(0x6de)](_0x47dbc4, _0x5d4cf5 + _0x2303a9)) : _0x21e37d[_0x5ca369(0x31d)][_0x5ca369(0xb13)]((_0x26438a, _0x5c9f46) => _0x3f843e(_0x26438a, _0x5c9f46))), setTimeout(() => { const _0x590168 = _0x5ca369; _0x52e3c1[_0x590168(0x9ce)] = _0x52e3c1[_0x590168(0x28b)]; }, 0x0); } async function _0x519ceb() { const _0x45976b = _0x4a89cb, _0x2c8441 = document[_0x45976b(0x2fc)](_0x45976b(0x766)); if (!_0x2c8441) { if ('cJCxc' !== _0x45976b(0x53b)) { console[_0x45976b(0xa12)](_0x45976b(0x36d)); return; } else throw new _0x49134d('这不是一张有效的Noir角色卡。'); } try { let _0x206e62 = await _0x3bbeae(_0x45976b(0xa16)); if (!_0x206e62) { if (_0x45976b(0x6b4) === _0x45976b(0x313)) _0x533cb5(_0x41c093[_0x45976b(0x61d)]); else { const _0x104e95 = localStorage[_0x45976b(0x7b7)](_0x45976b(0x1a0)); _0x104e95 && (console['log']('正在为你搬运旧壁纸到新仓库...'), _0x206e62 = await _0x32101d(_0x104e95), await _0x24ce6b('wallpaper_main', _0x206e62), localStorage[_0x45976b(0xb05)](_0x45976b(0x1a0))); } } if (_0x206e62) { if (_0x45976b(0x122) !== _0x45976b(0x590)) _0x2c8441[_0x45976b(0xab9)][_0x45976b(0x3ec)] = _0x45976b(0x713) + URL[_0x45976b(0x3a1)](_0x206e62) + ')', _0x2c8441[_0x45976b(0xab9)]['backgroundSize'] = _0x45976b(0x145), _0x2c8441['style']['backgroundPosition'] = _0x45976b(0x165); else { const _0x2ccc13 = (_0x2ffcc9 - 0x5a) * _0x37bc69['PI'] / 0xb4; return { 'x': _0x531b13 + _0x2c329f * _0x130056['cos'](_0x2ccc13), 'y': _0x148e48 + _0x40b7bd * _0x192600[_0x45976b(0x24f)](_0x2ccc13) }; } } else _0x2c8441[_0x45976b(0xab9)][_0x45976b(0x3ec)] = ''; } catch (_0x1195a0) { console[_0x45976b(0xa12)](_0x45976b(0x80d), _0x1195a0), _0x2c8441 && (_0x2c8441[_0x45976b(0xab9)][_0x45976b(0x3ec)] = ''); } } function _0xe1a9f2() { const _0x6a2490 = _0x4a89cb; if (_0x6a2490(0x95e) === _0x6a2490(0x95e)) { const _0x1c5433 = localStorage['getItem'](_0x6a2490(0x47c)); _0x1c5433 ? document[_0x6a2490(0x2fc)](_0x6a2490(0x12d))['style'][_0x6a2490(0x7e1)](_0x6a2490(0x322), _0x6a2490(0x713) + _0x1c5433 + ')') : document['getElementById'](_0x6a2490(0x12d))[_0x6a2490(0xab9)][_0x6a2490(0x7e1)](_0x6a2490(0x322), _0x6a2490(0x1ea)); } else _0x1b2ef7 = _0x227ea0[_0x6a2490(0xaa9)]; } async function _0x2909b1(_0x1d2866) { const _0x4cf71f = _0x4a89cb; try { await _0x24ce6b(_0x4cf71f(0xa16), _0x1d2866), await _0x519ceb(), _0x2d1f89(_0x4cf71f(0x20f)); } catch (_0x90bdef) { _0x4cf71f(0x6d4) !== 'Qcyyn' ? _0x4777e9['key'] === _0x4cf71f(0x60f) && !_0x4328a9[_0x4cf71f(0x4fa)] && (_0x4141b3['preventDefault'](), _0x11a038()) : (console[_0x4cf71f(0xa12)]('保存壁纸失败:', _0x90bdef), _0x2d1f89('保存壁纸失败:\x20' + _0x90bdef[_0x4cf71f(0x420)])); } } function _0x385b8a(_0x51de46) { const _0x3766b0 = _0x4a89cb; if ('cCrIg' === _0x3766b0(0x289)) { const _0x45fb49 = { 'quotedMessage': null, 'content': _0x51de46 }, _0x4a3f7f = _0x51de46[_0x3766b0(0x63a)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x4a3f7f && (_0x45fb49[_0x3766b0(0xad7)] = { 'sender': _0x4a3f7f[0x1][_0x3766b0(0x1b5)](), 'content': _0x4a3f7f[0x2][_0x3766b0(0x1b5)]() }, _0x45fb49[_0x3766b0(0xaf8)] = _0x51de46[_0x3766b0(0x7c5)](_0x4a3f7f[0x0][_0x3766b0(0x8ab)])[_0x3766b0(0x1b5)]()), _0x45fb49; } else { if (!_0x1ea519['isArray'](_0x348ff6)) return '<p>格式错误</p>'; if (_0x214ab5[_0x3766b0(0x8ab)] === 0x0) return _0x3766b0(0x730); return _0x176861[_0x3766b0(0xa17)]((_0x2cfb5b, _0x24019e) => new _0x234249(_0x24019e[_0x3766b0(0x6cc)]) - new _0x39c3be(_0x2cfb5b['timestamp'])), _0x5a3fcd['map'](_0x583530 => _0x3766b0(0x927) + (_0x583530[_0x3766b0(0xa3c)] || _0x3766b0(0x795)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>' + (_0x583530[_0x3766b0(0x6cc)] || '') + _0x3766b0(0xb02) + (_0x583530[_0x3766b0(0x669)] || _0x3766b0(0x52f)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20' + (_0x583530[_0x3766b0(0x99c)] || 0x0)[_0x3766b0(0x6be)](0x2) + _0x3766b0(0x867))['join'](''); } } const _0x5a0019 = document[_0x4a89cb(0x2fc)]('message-action-modal'), _0x5bbd77 = document['getElementById'](_0x4a89cb(0x4de)), _0x3a6f97 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x5a3)), _0x13cbbf = document['getElementById'](_0x4a89cb(0x3c0)), _0x428769 = document[_0x4a89cb(0x2fc)]('cancel-action-button'), _0xc3fede = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x297)), _0x571caf = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x863)), _0x27d627 = document[_0x4a89cb(0x2fc)]('edit-message-backdrop'), _0x19ea07 = document[_0x4a89cb(0x2fc)]('edit-message-textarea'), _0x3fc33a = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb0d)), _0x816846 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x8d6)); let _0x4fa128 = null; function _0x3731d9(_0x25e309) { const _0xaab170 = _0x4a89cb; _0x4fa128 = _0x25e309, _0x5a0019['classList'][_0xaab170(0x3ea)](_0xaab170(0x393)); } function _0x4949f5() { const _0x30c873 = _0x4a89cb; _0x5a0019[_0x30c873(0x402)][_0x30c873(0x3c2)](_0x30c873(0x393)); } function _0x27f0f4() { const _0x418215 = _0x4a89cb; if (_0x418215(0x736) !== _0x418215(0x400)) _0x4949f5(), _0x4fa128 = null; else { _0x59154c(_0x418215(0x5f7)); return; } } function _0x199970() { const _0x1737b6 = _0x4a89cb; if (_0x4fa128 === null) return; _0x21e37d[_0x1737b6(0x31d)][_0x1737b6(0x7d1)](_0x4fa128, 0x1), _0x1a9239(), _0x538d90(), _0x27f0f4(); } function _0x4b75fe() { const _0x14514a = _0x4a89cb; if (_0x4fa128 === null) return; const _0x4ef2a4 = _0x21e37d[_0x14514a(0x31d)][_0x4fa128]; if (!_0x4ef2a4) return; _0x19ea07[_0x14514a(0x91b)] = _0x4ef2a4[_0x14514a(0xaf8)], _0x4949f5(), _0x571caf[_0x14514a(0x402)]['add'](_0x14514a(0x393)), _0x19ea07[_0x14514a(0x83c)](); } function _0x14dcf9() { const _0x19cd73 = _0x4a89cb; if (_0x19cd73(0x5e9) !== _0x19cd73(0x5e9)) _0x48d6be = _0x19cd73(0x383) + _0x2a8b6b; else { if (_0x4fa128 === null) return; const _0x400309 = _0x19ea07['value'][_0x19cd73(0x1b5)](); if (_0x400309 === '') { _0x1715a8(); return; } const _0x2888f2 = _0x21e37d['conversationHistory'][_0x4fa128]; _0x2888f2 && (_0x2888f2[_0x19cd73(0xaf8)] = _0x400309, _0x1a9239(), _0x538d90()), _0x571caf[_0x19cd73(0x402)][_0x19cd73(0x3c2)]('show'), _0x4fa128 = null; } } function _0x1715a8() { const _0x93dd4d = _0x4a89cb; _0x571caf[_0x93dd4d(0x402)][_0x93dd4d(0x3c2)](_0x93dd4d(0x393)), _0x4fa128 = null; } _0x5bbd77[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x27f0f4), _0x428769[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x27f0f4), _0x13cbbf[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x199970), _0x3a6f97[_0x4a89cb(0xe9)]('click', _0x4b75fe), _0xc3fede[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x4bfd9f), _0x2a8272[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x2652f8), _0x3fc33a[_0x4a89cb(0xe9)]('click', _0x14dcf9), _0x816846['addEventListener']('click', _0x1715a8), _0x27d627['addEventListener'](_0x4a89cb(0x6f4), _0x1715a8); function _0x4bfd9f() { const _0x1fb46c = _0x4a89cb; if (_0x4fa128 === null) return; const _0x1358f3 = _0x21e37d[_0x1fb46c(0x31d)][_0x4fa128]; if (!_0x1358f3) return; const _0x385cc3 = _0x4cc3e0(); let _0x33941e = '未知'; if (_0x1358f3['role'] === _0x1fb46c(0x1a8)) { if ('hpGsm' === _0x1fb46c(0x13b)) _0x33941e = _0x21e37d[_0x1fb46c(0x87b)][_0x1fb46c(0x4a8)] || '我'; else { if (_0x1d842e[_0x1fb46c(0x537)]) _0x25d7fe(_0x2af4d8['diaryPressTimer']); const _0x47fad9 = _0xf1b7cc[_0x1fb46c(0x37e)][_0x1fb46c(0xb28)](_0x1fb46c(0x33a)); if (!_0x47fad9) return; const _0x525982 = _0x47fad9[_0x1fb46c(0x977)][_0x1fb46c(0x6cc)], _0x570668 = _0x47fad9['classList'][_0x1fb46c(0x7e6)](_0x1fb46c(0x1a8)) ? _0x1fb46c(0x1a8) : 'ai'; if (!_0x525982) return; const _0x356c42 = () => { const _0x19cdc8 = _0x1fb46c; _0x31fbef[_0x19cdc8(0x537)] = _0x1e17a0(() => { const _0x1c199c = _0x19cdc8; if (_0x343ae9[_0x1c199c(0x497)] === _0x1c199c(0x5d1)) _0x1e4f41[_0x1c199c(0x6bc)](); _0x35468a(_0x4566c8(_0x525982, 0xa), _0x570668); }, 0x320); }, _0x388331 = () => { if (_0x17ac6e['diaryPressTimer']) _0x5825c5(_0x3ade02['diaryPressTimer']); }; _0x410e13[_0x1fb46c(0xe9)](_0x1fb46c(0x76b), _0x388331, { 'once': !![] }), _0x49e8c6['addEventListener'](_0x1fb46c(0x4a3), _0x388331, { 'once': !![] }), _0x42e9c3[_0x1fb46c(0xe9)](_0x1fb46c(0x3ab), _0x388331, { 'once': !![] }), _0x356c42(); } } else { if (_0x1fb46c(0x5de) === 'WCXoG') { const _0x1f903c = _0x1358f3['senderId'] || _0x385cc3?.[_0x1fb46c(0xad8)][0x0], _0x2ab900 = _0xe97381(_0x1f903c); _0x33941e = _0x2ab900 ? _0x2ab900[_0x1fb46c(0x4a8)] : '角色'; } else _0x5ad48b = _0x1caa5f(() => { const _0x57ed5c = _0x1fb46c; if (_0x5e4b97[_0x57ed5c(0x497)] === 'touchstart') _0x241dc1[_0x57ed5c(0x6bc)](); _0x1be635(_0x53169b); }, 0x320); } let _0x2ba224 = _0x1358f3[_0x1fb46c(0xaf8)] || ''; if (_0x1358f3[_0x1fb46c(0xa70)]) _0x2ba224 = _0x1fb46c(0x60c); if (_0x1358f3[_0x1fb46c(0xaa9)]) _0x2ba224 = '[图片]'; if (_0x2ba224[_0x1fb46c(0x8ab)] > 0x32) _0x2ba224 = _0x2ba224[_0x1fb46c(0x7c5)](0x0, 0x32) + _0x1fb46c(0x92b); _0x21e37d[_0x1fb46c(0x564)] = { 'sender': _0x33941e, 'content': _0x2ba224 }, _0x57fa3d(), _0x27f0f4(), _0xa096b5[_0x1fb46c(0x83c)](); } function _0x57fa3d() { const _0x4c42b1 = _0x4a89cb; if (!_0x21e37d[_0x4c42b1(0x564)]) return; _0x12d49d['textContent'] = _0x4c42b1(0xa71) + _0x21e37d[_0x4c42b1(0x564)]['sender'], _0x45ea2f[_0x4c42b1(0x908)] = _0x21e37d[_0x4c42b1(0x564)][_0x4c42b1(0xaf8)], _0x563038['style'][_0x4c42b1(0x243)] = 'block'; } function _0x2652f8() { const _0x5dc65c = _0x4a89cb; _0x21e37d[_0x5dc65c(0x564)] = null, _0x563038[_0x5dc65c(0xab9)][_0x5dc65c(0x243)] = _0x5dc65c(0x1ea); } function _0x43c005(_0x4b2368, _0x4f735e) { const _0x19d506 = _0x4a89cb; if ('kIumY' === _0x19d506(0x27b)) _0x4903e6[_0x19d506(0xab9)][_0x19d506(0x243)] = _0x19d506(0x293), _0x2917f1(() => _0x4dfefe[_0x19d506(0x402)]['add'](_0x19d506(0x393)), 0xa); else { const _0x341961 = document[_0x19d506(0x2fc)](_0x19d506(0xa58)); if (_0x341961) { if (_0x19d506(0x37b) === _0x19d506(0x664)) _0x2e1874[_0x19d506(0x9f2)](_0x248af0); else { if (_0x4b2368 === _0x19d506(0xa20)) { if (_0x19d506(0x5c8) === _0x19d506(0x381)) try { const _0x4cd3cc = _0x5b3d40['createObjectURL'](_0x8919f1), _0x17b654 = _0x19d506(0x1da), _0xb1a3ae = _0x19d506(0x78e) + _0x17b654 + _0x19d506(0x9b2) + _0x4cd3cc + _0x19d506(0x75a); _0x314d68['innerHTML'] = _0xb1a3ae, _0x348c2c[_0x19d506(0x7f3)][_0x19d506(0xab9)][_0x19d506(0x7e1)](_0x19d506(0x46a), '\x27' + _0x17b654 + '\x27'), _0x2571ea[_0x19d506(0x908)] = _0x19d506(0x59e); } catch (_0x250a81) { _0x236d2b[_0x19d506(0xa12)](_0x19d506(0x7bb), _0x250a81), _0x1ac6db('哼，你这字体文件有问题，用不了。'); } else _0x341961[_0x19d506(0xab9)][_0x19d506(0x243)] = _0x19d506(0x991); } else _0x19d506(0x95d) === 'Lheuq' ? _0x341961[_0x19d506(0xab9)]['display'] = _0x19d506(0x1ea) : _0xfce23c[_0x19d506(0xab9)][_0x19d506(0x3ec)] = _0x19d506(0xac5) + _0x40a4a6[_0x19d506(0x496)] + '\x27)'; } } _0x23d1f2 = _0x4f735e || null, Object['values'](_0x476dfb)[_0x19d506(0xb13)](_0x15b6cd => _0x15b6cd['classList'][_0x19d506(0x3c2)](_0x19d506(0x911))), _0x476dfb[_0x4b2368] && _0x476dfb[_0x4b2368][_0x19d506(0x402)][_0x19d506(0x3ea)](_0x19d506(0x911)), _0x4b2368 !== _0x19d506(0x89b) && _0x1e32a1['classList'][_0x19d506(0x3c2)](_0x19d506(0xafc)); } } function _0x282fb7(_0x3a07db) { const _0x34ec72 = _0x4a89cb; if (_0x34ec72(0x229) !== 'pBFcX') { if (_0x3a07db) _0x1e32a1['classList']['add'](_0x34ec72(0xafc)); else { if ('ymomW' !== _0x34ec72(0x4c3)) { _0x5f449e('AI似乎没有想出任何新动态。'); return; } else _0x1e32a1['classList']['remove'](_0x34ec72(0xafc)); } } else { const _0x4ef1c7 = _0x4f62cd['comments'][_0x34ec72(0x592)](_0x3c112f => { const _0x3f75f4 = _0x34ec72, _0x19f7ea = _0x5b2cd6(_0x3c112f['authorId'])?.[_0x3f75f4(0x4a8)] || '未知'; return _0x3f75f4(0x65c) + _0x19f7ea + _0x3f75f4(0x1f8) + _0x3c112f[_0x3f75f4(0xaf8)] + _0x3f75f4(0x94b); })[_0x34ec72(0x2c2)](''); _0x2c00cd = _0x34ec72(0x740) + _0x4ef1c7 + '</div>'; } } async function _0x12c63b() { const _0x4dfb51 = _0x4a89cb; if (_0x4dfb51(0x35f) === _0x4dfb51(0xaa8)) { const _0x24f84e = _0x146685['querySelector'](_0x4dfb51(0x9c6)); if (!_0x24f84e) return; _0x24f84e['id'] === _0x4dfb51(0x1e2) ? _0x194995() : _0x4d7e04(); } else { _0x41c635[_0x4dfb51(0x109)] = ''; for (const _0x58736d of _0x21e37d['chats']) { if (_0x4dfb51(0x4f6) === 'bANfu') { const _0x151966 = document[_0x4dfb51(0x53d)]('li'); _0x151966['className'] = _0x4dfb51(0x3dd), _0x151966['dataset']['id'] = _0x58736d['id']; let _0x527c14 = _0x30019f, _0x5a11f4 = '群聊', _0x141202 = ''; if (_0x58736d[_0x4dfb51(0x497)] === 'private') { if (_0x4dfb51(0x2cc) === _0x4dfb51(0x2cc)) { const _0x2b6139 = _0xe97381(_0x58736d[_0x4dfb51(0xad8)][0x0]); if (_0x2b6139) { if ('FilzM' !== _0x4dfb51(0x6fa)) _0x41a34e['activeUserProfileId'] = _0x4952f9['id']; else { const _0x158230 = await _0x3bbeae('char_avatar_' + _0x2b6139['id']); _0x158230 ? _0x4dfb51(0x2f5) !== _0x4dfb51(0x2f5) ? _0x54b5a9(_0x334001) : _0x527c14 = URL['createObjectURL'](_0x158230) : _0x527c14 = _0x2b6139[_0x4dfb51(0x496)] || _0x30019f, _0x5a11f4 = _0x2b6139[_0x4dfb51(0x4a8)] || _0x4dfb51(0x1e1), _0x141202 = _0x2b6139['remark'] || '私聊'; } } else _0x4dfb51(0x163) === _0x4dfb51(0x163) ? (_0x5a11f4 = _0x4dfb51(0x5a7), _0x141202 = '错误：找不到角色') : (_0xcc3be7(), _0x67f9e0[_0x4dfb51(0x6f4)]()); } else { const _0x307121 = _0x5d0c46[_0x4dfb51(0x16b)](_0x39c0a5); _0x307121[_0x4dfb51(0x288)] && (_0x16650b[_0x4dfb51(0x288)] = _0x307121[_0x4dfb51(0x288)], _0x1943e6[_0x4dfb51(0x172)](_0x4dfb51(0x988))); } } else { if (_0x4dfb51(0x43f) === _0x4dfb51(0x43f)) { _0x5a11f4 = _0x58736d['name'] || '未命名群聊', _0x141202 = _0x58736d['participantIds'][_0x4dfb51(0x8ab)] + _0x4dfb51(0x3cb); const _0x219168 = await _0x3bbeae(_0x4dfb51(0x534) + _0x58736d['id']); if (_0x219168) _0x527c14 = URL[_0x4dfb51(0x3a1)](_0x219168); } else { _0x2dfc07['id'] === _0x32ef63[_0x4dfb51(0x272)] && (_0x418212(), _0x29503f['conversationHistory'] = [], _0xcc056()); try { _0x4d1218[_0x4dfb51(0xb05)]('chatHistory_' + _0x3a94b0['id']), _0x4a99c0(_0x4dfb51(0x69f) + _0x426f31[_0x4dfb51(0x4a8)] + _0x4dfb51(0x147)); } catch (_0x3709ef) { _0x592b90[_0x4dfb51(0xa12)](_0x4dfb51(0x33e) + _0x599312['id'], _0x3709ef), _0x396e78(_0x4dfb51(0x8eb)); } } } _0x151966['innerHTML'] = _0x4dfb51(0x850) + _0x527c14 + _0x4dfb51(0x717) + _0x5a11f4 + _0x4dfb51(0x7b3) + _0x141202 + _0x4dfb51(0x8be), _0x151966['querySelector'](_0x4dfb51(0x2b9))['addEventListener'](_0x4dfb51(0x6f4), () => { _0x5d2adc(_0x58736d['id']), _0x282fb7(!![]); }), _0x41c635[_0x4dfb51(0x30a)](_0x151966); } else { const _0xe9bba5 = _0x565a17(_0x5d2d97[_0x4dfb51(0x97b)]())[_0x4dfb51(0x1df)](0x2, '0'), _0x15e5c3 = _0x5f3b1c(_0x305823[_0x4dfb51(0x4d6)]())[_0x4dfb51(0x1df)](0x2, '0'); _0x3cf163[_0x4dfb51(0x908)] = _0xe9bba5 + ':' + _0x15e5c3; const _0x45229a = _0x2f9deb[_0x4dfb51(0x180)]() + 0x1, _0x48181d = _0x1b6299[_0x4dfb51(0x1c4)](), _0x925a1a = [_0x4dfb51(0x540), _0x4dfb51(0x873), '星期二', _0x4dfb51(0x6fc), _0x4dfb51(0x42d), _0x4dfb51(0x76f), _0x4dfb51(0x29a)][_0xf5122a[_0x4dfb51(0x759)]()]; _0x36a02e['textContent'] = _0x45229a + '月' + _0x48181d + '日\x20' + _0x925a1a; } } } } function _0x4afcef() { const _0x4d515c = _0x4a89cb; if (_0x4d515c(0x793) === _0x4d515c(0x793)) { const _0x17bdbf = document[_0x4d515c(0x2fc)](_0x4d515c(0x46d)); _0x17bdbf['innerHTML'] = ''; const _0x30c640 = _0x21e37d[_0x4d515c(0x32d)]['filter'](_0x2951b3 => _0x21e37d[_0x4d515c(0x69a)]['some'](_0x70ea23 => _0x70ea23[_0x4d515c(0x497)] === _0x4d515c(0x9de) && _0x70ea23[_0x4d515c(0xad8)][_0x4d515c(0x6f7)](_0x2951b3['id']))); if (_0x30c640['length'] === 0x0) { _0x17bdbf[_0x4d515c(0x109)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } _0x30c640[_0x4d515c(0xb13)](_0x1a3a45 => { const _0x4c9655 = _0x4d515c, _0x2c7b81 = document['createElement']('li'); _0x2c7b81[_0x4c9655(0x175)] = _0x4c9655(0x3dd), _0x2c7b81[_0x4c9655(0x977)]['charId'] = _0x1a3a45['id'], _0x2c7b81['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x1a3a45[_0x4c9655(0x496)] || _0x30019f) + _0x4c9655(0x7d6) + _0x1a3a45[_0x4c9655(0x4a8)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x1a3a45[_0x4c9655(0x3d9)] || '私聊') + _0x4c9655(0x104), _0x2c7b81[_0x4c9655(0xe9)](_0x4c9655(0x6f4), () => { const _0x3cf8bd = _0x4c9655; if (_0x3cf8bd(0xb04) === _0x3cf8bd(0x79b)) { const _0xd43511 = _0x38f40d[_0x3cf8bd(0x53d)](_0x3cf8bd(0x6b3)); _0xd43511[_0x3cf8bd(0x175)] = _0x3cf8bd(0x8b8), _0xd43511[_0x3cf8bd(0x109)] = _0x3cf8bd(0x5e3) + _0x6a93ae['description'] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x66f93[_0x3cf8bd(0xb31)][_0x3cf8bd(0x6be)](0x2) + _0x3cf8bd(0x626) + _0x4dda2e['id'] + _0x3cf8bd(0x87f), _0x37fc27['appendChild'](_0xd43511); } else _0x437478(_0x1a3a45['id']); }), _0x17bdbf[_0x4c9655(0x30a)](_0x2c7b81); }); } else { const _0x30eb11 = _0x4d82e8[0x0][_0x4d515c(0x1b5)](), _0x497d1d = _0x5d1fe7[0x1][_0x4d515c(0x1b5)]()[_0x4d515c(0x8f0)](/^"|"$/g, ''); _0xe562da[_0x30eb11] = _0x497d1d; } } async function _0x437478(_0x464e3a) { const _0x32638f = _0x4a89cb, _0x21ff33 = _0xe97381(_0x464e3a); if (!_0x21ff33) return; document[_0x32638f(0x2fc)](_0x32638f(0x703))[_0x32638f(0x9fb)] = '', _0x21e37d[_0x32638f(0x2fa)] = _0x464e3a; const _0x3c1ab3 = _0x21e37d['chats'][_0x32638f(0x354)](_0x3a4895 => _0x3a4895[_0x32638f(0x497)] === 'private' && _0x3a4895[_0x32638f(0xad8)][_0x32638f(0x6f7)](_0x464e3a)); _0x3c1ab3 ? (_0x21e37d[_0x32638f(0x272)] = _0x3c1ab3['id'], _0x37e4ef(), _0x2edc85(), _0x263526(_0x464e3a)) : _0x21e37d['conversationHistory'] = []; document[_0x32638f(0x2fc)](_0x32638f(0x504))[_0x32638f(0x908)] = _0x21ff33[_0x32638f(0x4a8)]; const _0x474cee = document['getElementById']('meeting-main-content'); try { if (_0x32638f(0x17d) !== 'oBicq') { const _0x4f7dc2 = await _0x3bbeae(_0x32638f(0x6c6) + _0x464e3a); _0x4f7dc2 ? _0x32638f(0x596) === _0x32638f(0x596) ? (_0x474cee[_0x32638f(0xab9)][_0x32638f(0x3ec)] = _0x32638f(0xac5) + URL[_0x32638f(0x3a1)](_0x4f7dc2) + '\x27)', _0x474cee[_0x32638f(0xab9)][_0x32638f(0x186)] = _0x32638f(0x145), _0x474cee[_0x32638f(0xab9)]['backgroundPosition'] = _0x32638f(0x165)) : (_0x574e04[_0x32638f(0x4a8)] = _0x417201, _0x42366c[_0x32638f(0xaf8)] = _0xc77491) : _0x32638f(0x3ca) !== _0x32638f(0x3ca) ? _0x544d8e[_0x32638f(0x3c2)]() : _0x474cee[_0x32638f(0xab9)][_0x32638f(0x3ec)] = _0x32638f(0x1ea); } else _0x24217c['open']('https://xhslink.com/m/5IgC1rniI2I', _0x32638f(0x299)); } catch (_0x4957fc) { 'jutcs' === _0x32638f(0x8b3) ? _0x2cbd29('字体保存失败了，哼:\x20' + _0x26ee88[_0x32638f(0x420)]) : (console['error'](_0x32638f(0x818) + _0x464e3a + ':', _0x4957fc), _0x474cee['style']['backgroundImage'] = _0x32638f(0x1ea)); } _0x22dc8c(), _0x30231f(); if (_0x171df0) clearInterval(_0x171df0); _0x47ae09(), _0x171df0 = setInterval(_0x47ae09, 0x2710), document[_0x32638f(0x2fc)](_0x32638f(0x81f))[_0x32638f(0xab9)][_0x32638f(0x243)] = _0x32638f(0xa25), _0x43c005('meetingView', _0x32638f(0x855)); } function _0x30231f() { const _0x482bf6 = _0x4a89cb, _0x1d9d45 = document[_0x482bf6(0x2fc)](_0x482bf6(0x17b)); _0x1d9d45[_0x482bf6(0x109)] = ''; const _0x241751 = _0x1d9d45[_0x482bf6(0x9d2)](_0x482bf6(0x71c)); if (_0x241751) _0x241751[_0x482bf6(0x3c2)](); _0x21e37d[_0x482bf6(0x31d)] && _0x21e37d['conversationHistory']['forEach']((_0x4ff5f9, _0x46445a) => { const _0x1b8ea9 = _0x482bf6; if (!_0x4ff5f9[_0x1b8ea9(0x7a0)] || _0x4ff5f9[_0x1b8ea9(0x568)] === 'system') return; const _0x4801bd = document[_0x1b8ea9(0x53d)]('p'); _0x4801bd[_0x1b8ea9(0x977)][_0x1b8ea9(0x5b1)] = _0x46445a; const _0x128723 = _0x4ff5f9[_0x1b8ea9(0xaf8)][_0x1b8ea9(0x8f0)](/\n/g, _0x1b8ea9(0x8d4)); let _0x1afc3e = '', _0x2d47e0 = ''; const _0x4893f0 = _0x3beafd(_0x21e37d[_0x1b8ea9(0x272)]); if (_0x4ff5f9[_0x1b8ea9(0x568)] === 'user') _0x1b8ea9(0x623) !== _0x1b8ea9(0x84e) ? (_0x1afc3e = _0x4893f0[_0x1b8ea9(0x4a8)] || '我', _0x2d47e0 = _0x1b8ea9(0x65d)) : _0x4422ca += _0x1b8ea9(0xa0f) + _0xddc5f6[_0x1b8ea9(0x2dd)](_0x53520d / 0x3c) + '小时前），可以简单问候一下对方现在的状态。\x0a'; else { if (_0x4ff5f9[_0x1b8ea9(0x568)] === _0x1b8ea9(0x31e)) { const _0x4c7bfa = _0xe97381(_0x4ff5f9[_0x1b8ea9(0x1e4)] || _0x21e37d[_0x1b8ea9(0x2fa)]); _0x1afc3e = _0x4c7bfa?.[_0x1b8ea9(0x4a8)] || '角色', _0x2d47e0 = 'speaker-ai'; } } _0x4801bd[_0x1b8ea9(0xab9)][_0x1b8ea9(0x44e)] = _0x1b8ea9(0x746), _0x4801bd[_0x1b8ea9(0xab9)][_0x1b8ea9(0xae0)] = _0x1b8ea9(0x4bb), _0x4801bd[_0x1b8ea9(0xab9)][_0x1b8ea9(0x119)] = _0x1b8ea9(0x4b6), _0x4801bd['style'][_0x1b8ea9(0x38c)] = _0x1b8ea9(0x1f6), _0x1afc3e ? _0x4801bd['innerHTML'] = _0x1b8ea9(0x55c) + _0x2d47e0 + _0x1b8ea9(0x4cf) + (_0x2d47e0 === _0x1b8ea9(0x65d) ? _0x1b8ea9(0x598) : '#f2b7c6') + ';\x22>' + _0x1afc3e + _0x1b8ea9(0x3ba) + _0x128723 : (_0x4801bd['className'] = _0x1b8ea9(0x6ce), _0x4801bd['style'][_0x1b8ea9(0x831)] = 'italic', _0x4801bd[_0x1b8ea9(0xab9)][_0x1b8ea9(0x9fd)] = '#d1d5db', _0x4801bd[_0x1b8ea9(0x109)] = _0x128723), _0x1d9d45[_0x1b8ea9(0x30a)](_0x4801bd); }); if (_0x21e37d[_0x482bf6(0x5f4)]) { if ('ydVzR' === _0x482bf6(0x41d)) _0x1ab4df = _0xe7b0c2['userProfiles']['find'](_0x34ed6e => _0x34ed6e['id'] === _0x39875c[_0x482bf6(0x514)]); else { let _0xd05643 = _0x1d9d45[_0x482bf6(0x9d2)]('.typing-indicator'); !_0xd05643 && (_0xd05643 = document[_0x482bf6(0x53d)](_0x482bf6(0x6b3)), _0xd05643['className'] = _0x482bf6(0x4d5), _0xd05643[_0x482bf6(0x908)] = '对方正在行动中...', _0xd05643[_0x482bf6(0xab9)]['backgroundColor'] = 'rgba(0,\x200,\x200,\x200.4)', _0xd05643[_0x482bf6(0xab9)][_0x482bf6(0xae0)] = _0x482bf6(0x4bb), _0xd05643[_0x482bf6(0xab9)]['borderRadius'] = '8px', _0x1d9d45[_0x482bf6(0x30a)](_0xd05643)); } } const _0x1902af = document[_0x482bf6(0x53d)]('div'); _0x1902af['id'] = 'message-anchor', _0x1d9d45['appendChild'](_0x1902af), setTimeout(() => { const _0x2f5744 = _0x482bf6; _0x1902af['scrollIntoView']({ 'behavior': _0x2f5744(0x449), 'block': 'end' }); }, 0x32); } function _0x538d90() { const _0x42b4b6 = _0x4a89cb, _0xcef09d = document[_0x42b4b6(0x9d2)](_0x42b4b6(0x9c6)); if (!_0xcef09d) return; if (_0xcef09d['id'] === 'meeting-view-screen') 'bvhOH' !== _0x42b4b6(0x667) ? _0x30231f() : _0x351d96 = _0x2c3cd5['userProfile'][_0x42b4b6(0x4a8)] || '我'; else { if (_0x42b4b6(0x62f) !== _0x42b4b6(0x2eb)) _0x5a0ef9(); else { const _0x9ab4d7 = _0x5e9e09['createElement'](_0x42b4b6(0x6b3)); _0x9ab4d7['id'] = _0x42b4b6(0xa01), _0x9ab4d7['textContent'] = _0x42b4b6(0x17a), _0xf78762[_0x42b4b6(0x61c)](_0x9ab4d7['style'], { 'position': _0x42b4b6(0x4e3), 'top': _0x42b4b6(0x1a4), 'right': _0x42b4b6(0x3dc), 'fontSize': _0x42b4b6(0x1b3), 'lineHeight': _0x42b4b6(0x6cf), 'color': _0x42b4b6(0x1cb), 'opacity': '0.5', 'cursor': 'pointer', 'zIndex': '1', 'transition': 'opacity\x200.2s\x20ease-in-out', 'whiteSpace': _0x42b4b6(0x160), 'textAlign': 'right' }), _0x9ab4d7[_0x42b4b6(0x975)] = () => { const _0x4965e3 = _0x42b4b6; _0x9ab4d7[_0x4965e3(0xab9)][_0x4965e3(0x5f8)] = '1'; }, _0x9ab4d7[_0x42b4b6(0x182)] = () => { const _0x211a76 = _0x42b4b6; _0x9ab4d7[_0x211a76(0xab9)][_0x211a76(0x5f8)] = _0x211a76(0x31c); }, _0x9ab4d7[_0x42b4b6(0xe9)](_0x42b4b6(0x6f4), () => { const _0x23eea7 = _0x42b4b6; _0x485f9c['open'](_0x23eea7(0x8f4), _0x23eea7(0x299)); }), _0xb934e9[_0x42b4b6(0xab9)]['position'] = 'relative', _0x48b650[_0x42b4b6(0x98f)](_0x9ab4d7); } } } function _0x5a0ef9() { const _0x474975 = _0x4a89cb; if (_0x474975(0x5e7) !== _0x474975(0x5e7)) { const _0x3bdabf = { 'id': _0x474975(0x2d1) + _0x54db37['now'](), 'name': _0x4d327e, 'boundUserProfileId': _0x99a8a6, 'memberCharacterIds': _0x5bc39b, 'posts': [] }; _0x56de94[_0x474975(0x635)]['push'](_0x3bdabf); } else { const _0x43edd3 = _0x21e37d[_0x474975(0x31d)]['filter'](_0x127af5 => !_0x127af5[_0x474975(0x7a0)] && _0x127af5[_0x474975(0x568)] !== 'system'); if (_0x43edd3[_0x474975(0x8ab)] > _0x21e37d[_0x474975(0x74c)]) { let _0x1321c4 = _0x52e3c1[_0x474975(0x9d2)](_0x474975(0xada)); if (!_0x1321c4) { if (_0x474975(0x56b) === 'DshWg') { const _0x13ed92 = _0x59627f[_0x474975(0x9d2)](_0x474975(0x6fd)); _0x1a5ed0(_0x474975(0x23a) + _0xd3d00e['id'])[_0x474975(0x8c0)](_0xc5c3e8 => { const _0x2c59bf = _0x474975; _0xc5c3e8 && (_0x13ed92[_0x2c59bf(0x9fb)] = _0xbe107d[_0x2c59bf(0x3a1)](_0xc5c3e8)); }); } else _0x1321c4 = document[_0x474975(0x53d)](_0x474975(0x6ec)), _0x1321c4['textContent'] = _0x474975(0x25d), _0x1321c4[_0x474975(0x175)] = 'form-button\x20load-more-btn', _0x1321c4[_0x474975(0xab9)][_0x474975(0x526)] = _0x474975(0x449), _0x1321c4[_0x474975(0xab9)][_0x474975(0xac7)] = '10px\x20auto', _0x1321c4[_0x474975(0xab9)][_0x474975(0xae0)] = '8px\x2016px', _0x1321c4['onclick'] = () => { const _0x53487f = _0x474975; if (_0x53487f(0x39e) !== _0x53487f(0x39e)) _0x3ea9ad['setItem'](_0x29b5ba, _0x361699[_0x53487f(0x41f)](_0x1f5b2f)); else { const _0xa352ea = _0x52e3c1, _0x564fe4 = _0xa352ea['scrollHeight'], _0x11bb4a = _0xa352ea[_0x53487f(0x9ce)]; _0x21e37d[_0x53487f(0x74c)] += 0x64, _0x5a0ef9(), requestAnimationFrame(() => { const _0x3ba198 = _0x53487f; if (_0x3ba198(0x675) !== _0x3ba198(0xab3)) { const _0x1ad68d = _0xa352ea[_0x3ba198(0x28b)]; _0xa352ea[_0x3ba198(0x9ce)] = _0x11bb4a + (_0x1ad68d - _0x564fe4); } else _0x25151e[_0x3ba198(0x908)] = '新建好友圈', _0x3d1eb1[_0x3ba198(0x91b)] = '', _0x1c2ab3[_0x3ba198(0x91b)] = _0x3ba198(0x9c7) + (_0x18ef19[_0x3ba198(0x635)][_0x3ba198(0x8ab)] + 0x1), _0x4a479b[_0x3ba198(0x91b)] = _0x47205b[_0x3ba198(0x514)], _0x216b80[_0x3ba198(0xab9)][_0x3ba198(0x243)] = 'none'; }); } }, _0x52e3c1[_0x474975(0x3bc)] ? _0x52e3c1[_0x474975(0x2e3)](_0x1321c4, _0x52e3c1[_0x474975(0x3bc)]) : _0x52e3c1[_0x474975(0x30a)](_0x1321c4); } } else { if (_0x474975(0x974) === 'EKnnp') _0x50e46b(_0x1606ba); else { const _0x2ffef = _0x52e3c1['querySelector'](_0x474975(0xada)); if (_0x2ffef) _0x2ffef['remove'](); } } Array[_0x474975(0xab0)](_0x52e3c1[_0x474975(0x68b)])[_0x474975(0xb13)](_0x41be93 => { const _0x469c24 = _0x474975; if (_0x469c24(0x256) === 'YYqYT') !_0x41be93[_0x469c24(0x402)]['contains'](_0x469c24(0x573)) && _0x41be93['remove'](); else { const _0x949926 = _0x3e5f85['senderId'] ? _0x5d9a23(_0x2d355e[_0x469c24(0x1e4)]) : null; return _0x949926?.[_0x469c24(0x4a8)] || 'Unknown'; } }); const _0x3e4ac1 = _0x43edd3[_0x474975(0x6de)](-_0x21e37d[_0x474975(0x74c)]); _0x3e4ac1[_0x474975(0xb13)](_0x2094d2 => { const _0x4c5f01 = _0x474975; if (_0x4c5f01(0x90c) !== _0x4c5f01(0x8fa)) { const _0x15a449 = _0x21e37d[_0x4c5f01(0x31d)][_0x4c5f01(0x2f9)](_0x2094d2); _0x15a449 > -0x1 && _0x3f843e(_0x2094d2, _0x15a449); } else { const _0x15b978 = { ..._0x4e18eb }; return _0x15b978[_0x4c5f01(0x496)] && _0x15b978['avatar'][_0x4c5f01(0x835)](_0x4c5f01(0x7b9)) && delete _0x15b978['avatar'], _0x15b978; } }); if (_0x21e37d['isGenerating']) { let _0x2455c1 = _0x52e3c1[_0x474975(0x9d2)](_0x474975(0x5c7)); !_0x2455c1 && (_0x2455c1 = document[_0x474975(0x53d)]('div'), _0x2455c1[_0x474975(0x175)] = _0x474975(0x4d5), _0x2455c1['textContent'] = '对方正在输入...', _0x52e3c1[_0x474975(0x30a)](_0x2455c1)); } if (_0x3e4ac1['length'] <= _0x21e37d['displayedMessageCount']) { if ('FXmfC' !== _0x474975(0x6d3)) setTimeout(() => { const _0x23226c = _0x474975; _0x23226c(0x942) !== _0x23226c(0x942) ? (_0x4bb500[_0x23226c(0x5a9)][_0x23226c(0x42e)](_0x5c4f96[_0x23226c(0x5a9)]['getMonth']() + 0x1), _0x1ced89()) : _0x52e3c1[_0x23226c(0x9ce)] = _0x52e3c1[_0x23226c(0x28b)]; }, 0x0); else { _0x386353 = _0x487a19(_0x9b6a8c); if (!_0x32a4ed) throw new _0x1a4b3e(_0x474975(0x804)); _0x3fa692[_0x474975(0x172)](_0x474975(0xa28) + _0x4a79c2['id'] + _0x474975(0x6bb)); } } } } function _0x3f843e(_0x3b2461, _0x28b5ea) { const _0xd1aa77 = _0x4a89cb, { role: _0xee9aa, content: _0x228723, displayUrl: _0x11a4e2, image: _0x4208c7, senderId: _0x5ae4e5 } = _0x3b2461, _0x1f792f = _0xee9aa === _0xd1aa77(0x31e) ? 'ai' : _0xee9aa, _0x56fa30 = _0x4cc3e0(), _0x5d16f4 = document['createElement'](_0xd1aa77(0x6b3)); _0x5d16f4[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x789), _0x1f792f), _0x5d16f4[_0xd1aa77(0x977)][_0xd1aa77(0x5b1)] = _0x28b5ea; const _0x2fd2c9 = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x2fd2c9[_0xd1aa77(0x175)] = _0xd1aa77(0x2b0); let _0x64c313 = '', _0x17ba63 = '', _0xa599e0 = null; if (_0xee9aa === _0xd1aa77(0x1a8)) { if (_0xd1aa77(0x38b) === 'Ehtah') _0x10dd61[_0xd1aa77(0xab9)][_0xd1aa77(0x3ec)] = _0xd1aa77(0xac5) + _0x2c94bb + '\x27)'; else { const _0x8c4bd8 = _0x3beafd(_0x21e37d[_0xd1aa77(0x272)]); _0x64c313 = _0x8c4bd8[_0xd1aa77(0x496)] || _0x3cf6e1; const _0x1081e1 = _0xe97381(_0x56fa30?.[_0xd1aa77(0xad8)][0x0]); _0x1081e1 && (_0x17ba63 = _0x1081e1['userAvatarFrameUrl'] || ''); } } else { if (_0x56fa30?.[_0xd1aa77(0x497)] === _0xd1aa77(0x9de)) 'OCHnV' !== _0xd1aa77(0x201) ? _0x11bf2e[_0xd1aa77(0xab9)][_0xd1aa77(0x243)] = _0xd1aa77(0x991) : _0xa599e0 = _0xe97381(_0x56fa30['participantIds'][0x0]); else _0x56fa30?.['type'] === 'group' && _0x5ae4e5 && (_0xa599e0 = _0xe97381(_0x5ae4e5)); _0x64c313 = _0xa599e0?.[_0xd1aa77(0x496)] || _0x30019f, _0x17ba63 = _0xa599e0?.[_0xd1aa77(0x66b)] || ''; } const _0x491102 = _0x2c4c8a(_0x64c313, _0x17ba63); if (_0xee9aa !== _0xd1aa77(0x1a8) && _0xa599e0) { if (_0xd1aa77(0x727) === 'wpHat') { _0x460b72[_0xd1aa77(0xa6e)][_0xd1aa77(0x2c6)] = _0x2e8578[_0xd1aa77(0x91b)]['trim'](), _0x27c9d3[_0xd1aa77(0xa6e)][_0xd1aa77(0x70c)] = _0x54a0fb[_0xd1aa77(0x91b)][_0xd1aa77(0x1b5)](), _0x3513ae[_0xd1aa77(0xa6e)][_0xd1aa77(0x60d)] = _0x2dd76b[_0xd1aa77(0x91b)][_0xd1aa77(0x1b5)](), _0x26e35c[_0xd1aa77(0xa6e)]['provider'] = _0x3a61df[_0xd1aa77(0x2fc)](_0xd1aa77(0xa29))[_0xd1aa77(0x91b)]; const _0x11d3e2 = _0x2ac269(_0x5f2320[_0xd1aa77(0x91b)], 0xa); _0x21120f[_0xd1aa77(0x88a)][_0xd1aa77(0x274)] = _0x53b3fc[_0xd1aa77(0x3b9)](_0x11d3e2) && _0x11d3e2 > 0x0 ? _0x11d3e2 : 0x64, _0x34eb3b(), _0xc2f69f(_0xd1aa77(0x258)); } else { const _0x54419a = _0x491102[_0xd1aa77(0x9d2)]('.avatar'); _0x3bbeae(_0xd1aa77(0x23a) + _0xa599e0['id'])[_0xd1aa77(0x8c0)](_0x5eea16 => { const _0x124a72 = _0xd1aa77; _0x5eea16 && (_0x54419a['src'] = URL[_0x124a72(0x3a1)](_0x5eea16)); }); } } const _0x5046f1 = _0x228723 && _0x228723[_0xd1aa77(0x1b5)]()['startsWith']('<div') && _0x228723[_0xd1aa77(0x1b5)]()[_0xd1aa77(0x601)](_0xd1aa77(0x94b)); if (_0x5046f1) { const _0x1cc23d = document[_0xd1aa77(0x53d)]('div'); _0x1cc23d[_0xd1aa77(0x175)] = _0xd1aa77(0xf4), _0x1cc23d[_0xd1aa77(0x109)] = _0x228723, _0x1f792f === _0xd1aa77(0x1a8) ? (_0x2fd2c9['appendChild'](_0x1cc23d), _0x2fd2c9['appendChild'](_0x491102)) : _0xd1aa77(0xed) === _0xd1aa77(0xed) ? (_0x2fd2c9[_0xd1aa77(0x30a)](_0x491102), _0x2fd2c9['appendChild'](_0x1cc23d)) : _0x1580aa[_0xd1aa77(0x2fc)](_0xd1aa77(0x141))[_0xd1aa77(0x9fb)] = _0xc31308[_0xd1aa77(0x496)] || _0x2084e6; } else { const _0x48264b = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x48264b[_0xd1aa77(0x402)]['add'](_0xd1aa77(0x420), _0x1f792f); if (_0x56fa30?.[_0xd1aa77(0x497)] === 'private') { const _0x14024a = _0x56fa30[_0xd1aa77(0xad8)][0x0]; _0x48264b['classList']['add'](_0xd1aa77(0x228) + _0x14024a); } if (_0x3b2461[_0xd1aa77(0xad7)]) { const _0x35fb8c = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x35fb8c['className'] = _0xd1aa77(0x2a3); const _0x15bf73 = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x15bf73[_0xd1aa77(0x175)] = _0xd1aa77(0x7af), _0x15bf73['textContent'] = _0x3b2461['quotedMessage'][_0xd1aa77(0x69e)]; const _0x71fe87 = document[_0xd1aa77(0x53d)]('div'); _0x71fe87[_0xd1aa77(0x175)] = 'quoted-content', _0x71fe87[_0xd1aa77(0x908)] = _0x3b2461[_0xd1aa77(0xad7)]['content'], _0x35fb8c[_0xd1aa77(0x30a)](_0x15bf73), _0x35fb8c[_0xd1aa77(0x30a)](_0x71fe87), _0x48264b[_0xd1aa77(0x30a)](_0x35fb8c); } if (_0x11a4e2) { if (_0xd1aa77(0x40a) !== _0xd1aa77(0x2e6)) { _0x48264b[_0xd1aa77(0x402)]['add']('sticker'); const _0x2b7b4f = document[_0xd1aa77(0x53d)](_0xd1aa77(0x187)); _0x2b7b4f[_0xd1aa77(0x9fb)] = _0x11a4e2, _0x2b7b4f[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x40d)), _0x48264b[_0xd1aa77(0x30a)](_0x2b7b4f); } else _0x16c6dc += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>'; } else { if (_0x3b2461[_0xd1aa77(0xaa9)] || _0x3b2461[_0xd1aa77(0x803)]) { _0x48264b[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)]('image'); const _0x386139 = document[_0xd1aa77(0x53d)](_0xd1aa77(0x187)); _0x386139['classList'][_0xd1aa77(0x3ea)]('message-image-content'), _0x48264b[_0xd1aa77(0x30a)](_0x386139); _0x3b2461[_0xd1aa77(0xaa9)] ? _0x386139[_0xd1aa77(0x9fb)] = _0x3b2461[_0xd1aa77(0xaa9)] : _0xd1aa77(0x75f) !== _0xd1aa77(0x936) ? (_0x386139[_0xd1aa77(0x9fb)] = _0xd1aa77(0xabf), _0x3bbeae(_0x3b2461['imageId'])[_0xd1aa77(0x8c0)](_0x155247 => { const _0x3e888d = _0xd1aa77; if (_0x155247) { if ('zcrRM' === _0x3e888d(0x88b)) { const _0x3ee45d = URL[_0x3e888d(0x3a1)](_0x155247); _0x386139[_0x3e888d(0x9fb)] = _0x3ee45d, _0x386139[_0x3e888d(0x4b8)] = () => { const _0x1d0f61 = _0x3e888d; if (_0x1d0f61(0x3f7) === _0x1d0f61(0xb38)) { const _0x5f25b4 = _0x2c63df[_0x1d0f61(0x130)](_0x3ce879, _0x1d0f61(0xb24)), _0x587aeb = _0x5f25b4[_0x1d0f61(0x50c)](_0xf6a3b6), _0x4e59cf = _0x587aeb[_0x1d0f61(0x259)](_0xb0e897); _0x4e59cf[_0x1d0f61(0x854)] = () => _0x3dbd3d(), _0x4e59cf['onerror'] = () => _0x3fd4b0(_0x4e59cf[_0x1d0f61(0xa12)]); } else URL[_0x1d0f61(0x705)](_0x3ee45d); }; } else _0x2adfab = _0x5359b5[_0x3e888d(0x4a8)], _0x12ae63 = _0x59053d[_0x3e888d(0x496)]; } else _0x3e888d(0xa23) === _0x3e888d(0x267) ? _0x5e6f78 = {} : _0x386139[_0x3e888d(0x310)] = _0x3e888d(0x561); })[_0xd1aa77(0x483)](_0x418f89 => { const _0x367f05 = _0xd1aa77; _0x367f05(0x305) === _0x367f05(0x305) ? (console[_0x367f05(0xa12)]('无法从\x20IndexedDB\x20加载聊天图片:', _0x418f89), _0x386139['alt'] = _0x367f05(0x561)) : (_0xce6eaf['error'](_0x367f05(0x836), _0x120443), _0x5df675(_0x367f05(0x33f))); })) : _0x34d157[_0xd1aa77(0x31d)] = []; if (_0x228723) { if (_0xd1aa77(0x58a) !== _0xd1aa77(0x58a)) _0x26cfb9(), _0x32ba85('musicUploadAltar', 'musicLibrary'); else { const _0x400a81 = document[_0xd1aa77(0x53d)]('p'); _0x400a81[_0xd1aa77(0xab9)][_0xd1aa77(0xae6)] = _0xd1aa77(0x5bf), _0x400a81[_0xd1aa77(0x908)] = _0x228723, _0x48264b['appendChild'](_0x400a81); } } } else { if (_0x3b2461[_0xd1aa77(0x497)] === _0xd1aa77(0x52a)) { _0x48264b[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x52a)); const _0x57a10f = _0x3b2461['role'] === _0xd1aa77(0x1a8) ? _0x3beafd(_0x21e37d[_0xd1aa77(0x272)]) : _0xe97381(_0x3b2461[_0xd1aa77(0x1e4)]), _0x241b8b = _0x3b2461[_0xd1aa77(0xa47)] === _0x3beafd(_0x21e37d[_0xd1aa77(0x272)])['id'] ? _0x3beafd(_0x21e37d['activeChatId']) : _0xe97381(_0x3b2461['recipientId']), _0x14ec2c = _0x57a10f?.[_0xd1aa77(0x4a8)] ? _0x57a10f[_0xd1aa77(0x4a8)] + '的转账' : '转账', _0x460202 = _0x241b8b?.[_0xd1aa77(0x4a8)] ? _0xd1aa77(0x4f5) + _0x241b8b['name'] : '转账', _0x148cc4 = _0xd1aa77(0x513) + _0x14ec2c + _0xd1aa77(0x653) + _0x3b2461[_0xd1aa77(0xb31)]['toFixed'](0x2) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>' + _0x460202 + _0xd1aa77(0xa02); _0x48264b[_0xd1aa77(0x109)] = _0x148cc4; } else { if (_0x3b2461['type'] === _0xd1aa77(0x50e)) { if (_0xd1aa77(0x5a1) !== _0xd1aa77(0x5a1)) { const _0xf89c27 = _0xec5c89[_0xd1aa77(0x635)][_0xd1aa77(0x354)](_0x286b8c => _0x286b8c['id'] === _0x325c98[_0xd1aa77(0x26c)]), _0x22385b = _0x454b76(); let _0x5b446c = []; if (_0xf89c27 && _0xf89c27[_0xd1aa77(0x8e6)]) { const _0x40c32f = _0xf89c27[_0xd1aa77(0x8e6)][_0xd1aa77(0x4b7)](_0xa3f702 => _0xa3f702['type'] === _0xd1aa77(0x529) && _0xa3f702[_0xd1aa77(0x25e)])['map'](_0x32ad44 => ({ ..._0x32ad44, 'source': _0xd1aa77(0x49c) })); _0x5b446c[_0xd1aa77(0x9f2)](..._0x40c32f); } if (_0x22385b && _0x412b84[_0xd1aa77(0x31d)]) { const _0x489282 = _0x279959[_0xd1aa77(0x31d)][_0xd1aa77(0x4b7)](_0x21895d => _0x21895d[_0xd1aa77(0x497)] === 'music' && _0x21895d[_0xd1aa77(0x25e)])[_0xd1aa77(0x592)](_0x2d98cf => ({ ..._0x2d98cf, 'source': 'chat' })); _0x5b446c[_0xd1aa77(0x9f2)](..._0x489282); } const _0xad40d1 = _0x4e7c0d[_0xd1aa77(0xab0)](new _0x45a0d6(_0x5b446c[_0xd1aa77(0x592)](_0x45518e => [_0x45518e[_0xd1aa77(0x25e)], _0x45518e]))[_0xd1aa77(0x464)]()); _0x456558[_0xd1aa77(0x101)] = _0xad40d1[_0xd1aa77(0xa17)]((_0x33248c, _0x297f26) => _0x297f26[_0xd1aa77(0x6cc)] - _0x33248c['timestamp']); } else { _0x48264b[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x529)); const _0x2556ca = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x2556ca[_0xd1aa77(0x175)] = _0xd1aa77(0x806), _0x2556ca[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x617)); const _0xe17422 = _0x3b2461[_0xd1aa77(0x568)] === 'user' ? _0x3beafd(_0x21e37d[_0xd1aa77(0x272)])[_0xd1aa77(0x4a8)] || '你' : _0xe97381(_0x3b2461['senderId'])?.[_0xd1aa77(0x4a8)] || 'TA', _0x27a9a4 = _0xd1aa77(0x609) + _0x3b2461[_0xd1aa77(0x6cc)], _0x1e74bd = '<img\x20id=\x22' + _0x27a9a4 + _0xd1aa77(0xacc) + _0x30019f + '\x22>'; _0x3b2461['coverId'] && _0x3bbeae(_0x3b2461[_0xd1aa77(0x6d7)])[_0xd1aa77(0x8c0)](_0x37a8d1 => { const _0x2b3c17 = _0xd1aa77, _0x596ac0 = document[_0x2b3c17(0x2fc)](_0x27a9a4); if (_0x596ac0 && _0x37a8d1) _0x596ac0[_0x2b3c17(0x9fb)] = URL[_0x2b3c17(0x3a1)](_0x37a8d1); }), _0x3b2461[_0xd1aa77(0xa69)] ? _0x2556ca[_0xd1aa77(0x109)] = _0xd1aa77(0x519) + _0x1e74bd + _0xd1aa77(0x3d1) + _0x3b2461[_0xd1aa77(0xaa1)] + _0xd1aa77(0x968) + _0x3b2461[_0xd1aa77(0x20b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>' : _0xd1aa77(0x917) !== _0xd1aa77(0x917) ? _0x47aa99[_0xd1aa77(0x4ee)](_0xd1aa77(0x722))[_0xd1aa77(0xb13)](_0x1fa60b => { const _0x1f07c9 = _0xd1aa77; _0x1fa60b['addEventListener'](_0x1f07c9(0x6f4), () => { const _0x51d524 = _0x1f07c9, _0x332e79 = _0x503e55['parse'](_0x1fa60b[_0x51d524(0x977)][_0x51d524(0x172)]['replace'](/&quot;/g, '\x22')), _0x1e3991 = _0x1fa60b[_0x51d524(0x977)][_0x51d524(0xa4b)], _0x4c4a53 = _0x1fa60b[_0x51d524(0x977)][_0x51d524(0x390)]; _0x33f489(_0x1e3991, _0x4c4a53, _0x332e79); }); }) : _0x2556ca[_0xd1aa77(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>' + _0xe17422 + _0xd1aa77(0x93c) + _0x1e74bd + _0xd1aa77(0x3d1) + _0x3b2461[_0xd1aa77(0xaa1)] + _0xd1aa77(0x968) + _0x3b2461['artist'] + _0xd1aa77(0xa22) + _0x3b2461[_0xd1aa77(0x8a3)] + _0xd1aa77(0x2ee), _0x48264b[_0xd1aa77(0x30a)](_0x2556ca); } } else { if (_0x3b2461[_0xd1aa77(0x497)] === 'music' && _0x3b2461[_0xd1aa77(0xaa1)]) { _0x48264b[_0xd1aa77(0x402)][_0xd1aa77(0x3ea)](_0xd1aa77(0x529)); const _0x19cbb9 = document[_0xd1aa77(0x53d)](_0xd1aa77(0x6b3)); _0x19cbb9[_0xd1aa77(0x175)] = _0xd1aa77(0x516), _0x19cbb9[_0xd1aa77(0x977)][_0xd1aa77(0x185)] = 'msg_' + _0x3b2461['timestamp']; const _0x1836df = _0xd1aa77(0x609) + _0x3b2461[_0xd1aa77(0x6cc)], _0x1985b0 = _0xd1aa77(0x2cf) + _0x30019f + _0xd1aa77(0xa9a) + _0x1836df + _0xd1aa77(0x34a); if (_0x3b2461[_0xd1aa77(0x6d7)]) { if (_0xd1aa77(0x706) === 'OPAfh') _0x3bbeae(_0x3b2461[_0xd1aa77(0x6d7)])['then'](_0x2c182b => { const _0x540b8f = _0xd1aa77, _0x5c05ad = document[_0x540b8f(0x2fc)](_0x1836df); if (_0x5c05ad && _0x2c182b) _0x5c05ad[_0x540b8f(0x9fb)] = URL[_0x540b8f(0x3a1)](_0x2c182b); }); else { if (_0x3d1813) _0x208103[_0xd1aa77(0xab9)]['backgroundImage'] = _0xd1aa77(0xac5) + _0x2faf7c[_0xd1aa77(0x3a1)](_0x527ae9) + '\x27)'; } } else { if (_0x3b2461['coverUrl']) { if (_0xd1aa77(0x62e) !== 'EOIhl') { _0x53bf7d[_0xd1aa77(0x294)](_0xd1aa77(0x6ef)); const _0x1110b5 = _0x133a57[_0xd1aa77(0xad8)]['map'](_0x45651e)[_0xd1aa77(0x4b7)](_0x2619bd); if (!_0x1110b5[_0xd1aa77(0x8ab)]) return; let _0x3c6528 = 0x0; for (const _0x50cae1 of _0x1110b5) { _0x9c65b9(_0x50cae1, { 'force': !![], 'delayMs': _0x3c6528 }), _0x3c6528 += 0x1f4; } } else setTimeout(() => { const _0x45e28f = _0xd1aa77; if ('vpCOF' === _0x45e28f(0x73f)) _0x2ecd3e[_0x45e28f(0xa12)]('切换聊天时发生异步错误:', _0x480d37), _0x412e69(_0x45e28f(0x931) + _0x203996[_0x45e28f(0x420)]); else { const _0x21169c = document[_0x45e28f(0x2fc)](_0x1836df); if (_0x21169c) _0x21169c['src'] = _0x3b2461[_0x45e28f(0xab6)]; } }, 0x0); } } _0x19cbb9[_0xd1aa77(0x109)] = _0xd1aa77(0x715) + _0x1985b0 + _0xd1aa77(0x57a) + _0x3b2461[_0xd1aa77(0xaa1)] + _0xd1aa77(0xb30) + _0x3b2461[_0xd1aa77(0x20b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>' + (_0x3b2461[_0xd1aa77(0x25e)] ? '▶' : '⚠') + _0xd1aa77(0x94b), _0x3b2461[_0xd1aa77(0x25e)] && _0x19cbb9[_0xd1aa77(0xe9)](_0xd1aa77(0x6f4), function () { const _0x1ff9f1 = _0xd1aa77, _0x5cbf68 = { 'id': _0x1ff9f1(0x658) + _0x3b2461[_0x1ff9f1(0x6cc)], 'url': _0x3b2461[_0x1ff9f1(0x25e)] }; _0x5f1860(this, _0x5cbf68); }), _0x48264b[_0xd1aa77(0x30a)](_0x19cbb9); } else { if (_0x228723) { const _0x9f22e9 = document[_0xd1aa77(0x53d)]('p'); _0x9f22e9[_0xd1aa77(0x109)] = _0x228723, _0x9f22e9['style'][_0xd1aa77(0xac7)] = '0', _0x48264b[_0xd1aa77(0x30a)](_0x9f22e9); } } } } } } _0x1f792f === _0xd1aa77(0x1a8) ? (_0x2fd2c9[_0xd1aa77(0x30a)](_0x48264b), _0x2fd2c9[_0xd1aa77(0x30a)](_0x491102)) : (_0x2fd2c9[_0xd1aa77(0x30a)](_0x491102), _0x2fd2c9[_0xd1aa77(0x30a)](_0x48264b)); } _0x5d16f4[_0xd1aa77(0x30a)](_0x2fd2c9); const _0x3056f7 = document['createElement'](_0xd1aa77(0x6b3)); return _0x3056f7[_0xd1aa77(0x175)] = _0xd1aa77(0x6cc), _0x3056f7[_0xd1aa77(0x908)] = _0xe8cb86(_0x3b2461[_0xd1aa77(0x6cc)]), _0x5d16f4[_0xd1aa77(0x30a)](_0x3056f7), _0x52e3c1[_0xd1aa77(0x30a)](_0x5d16f4), _0x5d16f4; } document[_0x4a89cb(0x2fc)]('chat-messages')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x1d0348); let _0x3c0324 = null, _0x171df0 = null; function _0x1d0348(_0x1bea69) { const _0x441347 = _0x4a89cb; if (window[_0x441347(0x43e)]()[_0x441347(0x50f)]()) return; const _0xc472cc = _0x1bea69[_0x441347(0x37e)][_0x441347(0xb28)](_0x441347(0x75c)), _0x2f5805 = _0x1bea69[_0x441347(0x37e)][_0x441347(0xb28)]('.no-action-modal'); if (!_0xc472cc || _0x2f5805) return; const _0x58f71f = parseInt(_0xc472cc['dataset']['historyIndex'], 0xa); if (isNaN(_0x58f71f)) return; _0x3731d9(_0x58f71f); } function _0x1d8f68() { const _0x4ff3d4 = _0x4a89cb; if (_0x4ff3d4(0x442) === _0x4ff3d4(0x442)) { const _0x5ea5e6 = _0x4cc3e0(); if (!_0x5ea5e6) { if (_0x4ff3d4(0x55b) === _0x4ff3d4(0x55b)) { _0x1b22f5['textContent'] = _0x4ff3d4(0x4ed); return; } else { const _0x41f050 = _0x558b92['getElementById'](_0x3ae8c2); if (_0x41f050 && _0x177c07) _0x41f050[_0x4ff3d4(0x9fb)] = _0x333632['createObjectURL'](_0x5544f9); } } if (_0x5ea5e6[_0x4ff3d4(0x497)] === _0x4ff3d4(0x9de)) { if (_0x4ff3d4(0x4e1) === _0x4ff3d4(0x64e)) _0x4996c6(_0x7f4a11[_0x4ff3d4(0x26c)]); else { const _0x6bf4b0 = _0xe97381(_0x5ea5e6[_0x4ff3d4(0xad8)][0x0]); _0x1b22f5[_0x4ff3d4(0x908)] = _0x6bf4b0 ? _0x6bf4b0[_0x4ff3d4(0x4a8)] : _0x4ff3d4(0x5a7); } } else { if (_0x4ff3d4(0x5b7) !== _0x4ff3d4(0x374)) _0x1b22f5[_0x4ff3d4(0x908)] = _0x5ea5e6[_0x4ff3d4(0x4a8)] || '群聊\x20(' + _0x5ea5e6['participantIds'][_0x4ff3d4(0x8ab)] + ')'; else { _0x38c531(_0x4ff3d4(0x3a9)); return; } } } else _0x5d5a26[_0x4ff3d4(0x2fc)](_0x4ff3d4(0x1e5))['textContent'] = '为\x20' + _0x5e0400 + _0x4ff3d4(0x8dc), _0x27dd49['getElementById']('event-content-input')[_0x4ff3d4(0x91b)] = '', _0x5765b5[_0x4ff3d4(0x2fc)](_0x4ff3d4(0xaba))[_0x4ff3d4(0x21e)] = !![], _0x1e0030[_0x4ff3d4(0x2fc)](_0x4ff3d4(0x37c))[_0x4ff3d4(0x402)][_0x4ff3d4(0x3ea)]('show'), _0x2fc38a['getElementById']('event-content-input')[_0x4ff3d4(0x83c)](); } function _0x505756(_0x3200be) { const _0x17dde9 = _0x4a89cb, _0x5dbe21 = document[_0x17dde9(0x9d2)](_0x17dde9(0x9c6)); if (_0x5dbe21 && (_0x5dbe21['id'] === 'meeting-view-screen' || _0x5dbe21['id'] === _0x17dde9(0x42b))) { if (_0x17dde9(0x605) === _0x17dde9(0x605)) _0x538d90(); else return _0x17dde9(0x2a4); } else { const _0x2cb45d = document['querySelectorAll'](_0x17dde9(0x5c7)); _0x2cb45d[_0x17dde9(0xb13)](_0x3391cc => _0x3391cc[_0x17dde9(0x3c2)]()); } } function _0x5b5749() { const _0x2df765 = _0x4a89cb; if (_0x21e37d[_0x2df765(0x5f4)] && _0x21e37d[_0x2df765(0x250)]) { if (_0x2df765(0x1a3) !== _0x2df765(0x1a3)) return _0x2df765(0x7fd) + _0x575fb3; else console['log'](_0x2df765(0x5df)), _0x21e37d[_0x2df765(0x250)][_0x2df765(0x6e2)](_0x2df765(0x8ef)), _0x21e37d['currentAbortController'] = null; } _0x21e37d[_0x2df765(0x5f4)] = ![], _0x505756(![]); } function _0x4cc3e0() { const _0x1abec5 = _0x4a89cb; if (_0x1abec5(0xb2c) !== _0x1abec5(0xb2c)) _0x4e94fa['error'](_0x1abec5(0x2b6), _0x1e9093); else return _0x21e37d[_0x1abec5(0x69a)][_0x1abec5(0x354)](_0x48b02d => _0x48b02d['id'] === _0x21e37d[_0x1abec5(0x272)]); } function _0xe97381(_0x55eb3f) { const _0x569f93 = _0x4a89cb; return _0x21e37d[_0x569f93(0x32d)]['find'](_0x3c5622 => _0x3c5622['id'] === _0x55eb3f); } function _0x2e3dc0(_0x4f8ac4) { const _0x5c4af3 = _0x4a89cb; _0x21e37d['characters'] = _0x21e37d[_0x5c4af3(0x32d)][_0x5c4af3(0x4b7)](_0xc4d5c6 => _0xc4d5c6['id'] !== _0x4f8ac4), _0x21e37d[_0x5c4af3(0x69a)][_0x5c4af3(0xb13)](_0x39a2dc => { const _0x270de6 = _0x5c4af3; _0x39a2dc[_0x270de6(0x497)] === _0x270de6(0x869) && (_0x39a2dc[_0x270de6(0xad8)] = _0x39a2dc[_0x270de6(0xad8)][_0x270de6(0x4b7)](_0x81eafc => _0x81eafc !== _0x4f8ac4)); }); const _0xeb2a54 = _0x21e37d[_0x5c4af3(0x69a)][_0x5c4af3(0x354)](_0x1f14c0 => _0x1f14c0['type'] === _0x5c4af3(0x9de) && _0x1f14c0[_0x5c4af3(0xad8)]['includes'](_0x4f8ac4)); _0xeb2a54 && _0x3b2917(_0xeb2a54['id']), _0x21e37d[_0x5c4af3(0x69a)] = _0x21e37d[_0x5c4af3(0x69a)][_0x5c4af3(0x4b7)](_0x542f6d => _0x542f6d[_0x5c4af3(0x497)] !== _0x5c4af3(0x869) || _0x542f6d[_0x5c4af3(0xad8)]['length'] > 0x1), _0x37e4ef(), _0x12c63b(); } function _0x3b2917(_0x377479) { const _0x485f44 = _0x4a89cb; _0x21e37d['chats'] = _0x21e37d['chats'][_0x485f44(0x4b7)](_0x225074 => _0x225074['id'] !== _0x377479); try { localStorage[_0x485f44(0xb05)]('chatHistory_' + _0x377479); } catch (_0x700673) { console[_0x485f44(0xa12)](_0x485f44(0x7ce) + _0x377479, _0x700673); } _0x21e37d[_0x485f44(0x272)] === _0x377479 && (_0x485f44(0x254) !== 'pYjFf' ? (_0x21e37d[_0x485f44(0x272)] = _0x21e37d[_0x485f44(0x69a)][0x0]?.['id'] || null, _0x5d2adc(_0x21e37d[_0x485f44(0x272)])) : _0x290d8a && _0x169a70(_0x5855d7)), _0x37e4ef(); } async function _0x5d2adc(_0x38b227) { const _0x4d0ee7 = _0x4a89cb; if (_0x21e37d[_0x4d0ee7(0x272)] !== _0x38b227) { if (_0x4d0ee7(0xa73) !== 'yenML') { const _0x5bfd87 = _0x637fb7[_0x4d0ee7(0x43a)][0x0][_0x4d0ee7(0x7f7)] - _0x56640e, _0x1437bb = _0x37c0cf[_0x4d0ee7(0x43a)][0x0][_0x4d0ee7(0xa0a)] - _0x43d3b8; _0x1fae71[_0x4d0ee7(0x7c6)](_0x5bfd87) > _0x3ae000[_0x4d0ee7(0x7c6)](_0x1437bb) ? _0x5764b9 = _0x4d0ee7(0xa72) : _0x581035 = _0x4d0ee7(0x827); } else _0x5b5749(), _0x21e37d['displayedMessageCount'] = 0x64; } if (!_0x38b227) { _0x21e37d[_0x4d0ee7(0x272)] = null, _0x37e4ef(), _0x282fb7(![]), document[_0x4d0ee7(0x2fc)](_0x4d0ee7(0x9a8))[_0x4d0ee7(0xab9)][_0x4d0ee7(0x3ec)] = ''; return; } _0x21e37d[_0x4d0ee7(0x272)] = _0x38b227, _0x37e4ef(), _0x1d8f68(), _0x52e3c1[_0x4d0ee7(0x109)] = '', _0x171a38(!![], _0x4d0ee7(0x787)), setTimeout(async () => { const _0x2d8d71 = _0x4d0ee7; if (_0x2d8d71(0x4ec) !== 'ketbo') _0x3aa43e[_0x2d8d71(0x908)] = _0x2b6e05[_0x2d8d71(0xab0)](_0xad9824)[_0x2d8d71(0x592)](_0x5d3665 => _0x5d3665[_0x2d8d71(0x22a)][_0x2d8d71(0x908)][_0x2d8d71(0x1b5)]())[_0x2d8d71(0x2c2)]('、'); else try { _0x2edc85(); const _0x126db2 = _0x4cc3e0(), _0x23846e = document['getElementById'](_0x2d8d71(0x9a8)); let _0x26e55e = null; if (_0x126db2) { if (_0x126db2['type'] === _0x2d8d71(0x9de)) { if (_0x2d8d71(0x1d9) !== _0x2d8d71(0x1d9)) { _0x48139c[_0x2d8d71(0x109)] = _0x2d8d71(0x8b7); return; } else { const _0x36bc8e = _0x126db2[_0x2d8d71(0xad8)][0x0]; _0x1f7ead(_0x36bc8e), _0x26e55e = await _0x3bbeae(_0x2d8d71(0x7de) + _0x36bc8e); } } else _0x26e55e = await _0x3bbeae(_0x2d8d71(0x42f) + _0x126db2['id']); if (_0x26e55e) { if (_0x2d8d71(0x209) === _0x2d8d71(0x209)) _0x23846e[_0x2d8d71(0xab9)][_0x2d8d71(0x3ec)] = 'url(\x27' + URL[_0x2d8d71(0x3a1)](_0x26e55e) + '\x27)', _0x23846e['style'][_0x2d8d71(0x186)] = 'cover', _0x23846e[_0x2d8d71(0xab9)][_0x2d8d71(0x811)] = _0x2d8d71(0x165); else { let _0xf65fba = _0xf70889[_0x2d8d71(0x9d2)](_0x2d8d71(0x5c7)); !_0xf65fba && (_0xf65fba = _0x225715[_0x2d8d71(0x53d)](_0x2d8d71(0x6b3)), _0xf65fba[_0x2d8d71(0x175)] = _0x2d8d71(0x4d5), _0xf65fba[_0x2d8d71(0x908)] = '对方正在输入...', _0x409733['appendChild'](_0xf65fba)); } } else { if ('kMmUj' === 'kMmUj') _0x23846e[_0x2d8d71(0xab9)][_0x2d8d71(0x3ec)] = ''; else { const _0x565b1f = _0x1167f5[0x1][_0x2d8d71(0x8f0)](/\\"/g, '\x22')[_0x2d8d71(0x8f0)](/\\n/g, '\x0a')[_0x2d8d71(0x1b5)](); if (_0x565b1f) _0x4f9a33[_0x2d8d71(0x9f2)](_0x565b1f); } } } _0x5a0ef9(); } catch (_0x37cf2f) { if (_0x2d8d71(0x4a6) !== 'pfNYg') console[_0x2d8d71(0xa12)](_0x2d8d71(0x156), _0x37cf2f), _0x2d1f89(_0x2d8d71(0x931) + _0x37cf2f['message']); else { const _0x3b6ebc = _0x37a49a['split'](/:\s(.+)/); if (_0x3b6ebc[_0x2d8d71(0x8ab)] > 0x1) { const _0x32a7b8 = _0x3b6ebc[0x0][_0x2d8d71(0x1b5)](), _0x325e3f = _0x3b6ebc[0x1][_0x2d8d71(0x1b5)]()[_0x2d8d71(0x8f0)](/^"|"$/g, ''); _0x1399ea[_0x32a7b8] = _0x325e3f; } } } finally { _0x2d8d71(0x2bc) !== _0x2d8d71(0x2bc) ? _0x945fa9[_0x2d8d71(0x310)] = _0x2d8d71(0x561) : _0x171a38(![]); } }, 0x32); } async function _0x39f260() { const _0x5d3e1a = _0x4a89cb; if (_0x21e37d[_0x5d3e1a(0x5f4)]) { _0x2d1f89(_0x5d3e1a(0x63d)); return; } const _0x45cee5 = _0x21e37d[_0x5d3e1a(0x31d)]; if (_0x45cee5[_0x5d3e1a(0x8ab)] === 0x0) return; let _0x3ef87f = -0x1; for (let _0x5c3161 = _0x45cee5[_0x5d3e1a(0x8ab)] - 0x1; _0x5c3161 >= 0x0; _0x5c3161--) { if (_0x5d3e1a(0x184) === 'buvVb') { if (_0x45cee5[_0x5c3161]['role'] === _0x5d3e1a(0x1a8)) { if (_0x5d3e1a(0x7bc) !== _0x5d3e1a(0x852)) { _0x3ef87f = _0x5c3161; break; } else _0x29d04d[_0x5d3e1a(0xa12)](_0x5d3e1a(0x35b), _0x118c44), _0x567da7 = _0x167c51; } } else _0x5624e5 = _0x412b6c[_0x5d3e1a(0x4a8)]; } if (_0x3ef87f === -0x1 || _0x3ef87f === _0x45cee5[_0x5d3e1a(0x8ab)] - 0x1) { _0x2d1f89(_0x5d3e1a(0x1ae)); return; } _0x45cee5[_0x5d3e1a(0x7d1)](_0x3ef87f + 0x1), _0x21e37d['activeMeetingScriptQueue'] = [], _0x1a9239(), _0x30231f(), _0x263526(_0x21e37d[_0x5d3e1a(0x2fa)]), setTimeout(() => { _0x4e63bc(); }, 0x64); } async function _0x4852a6() { const _0x557c8f = _0x4a89cb; if (_0x21e37d[_0x557c8f(0x5f4)]) { if ('Ahujh' === 'zuNDN') { _0x3c5eef(_0x557c8f(0x1c6) + _0x573478 + _0x557c8f(0x365)), _0x673ad4(() => _0x476f12[_0x557c8f(0x6a1)](), 0x5dc); return; } else { _0x2d1f89(_0x557c8f(0xea)); return; } } const _0x8a45e0 = _0x21e37d[_0x557c8f(0x31d)]; if (_0x8a45e0[_0x557c8f(0x8ab)] === 0x0) return; let _0x5dd93f = -0x1; for (let _0x574a3e = _0x8a45e0[_0x557c8f(0x8ab)] - 0x1; _0x574a3e >= 0x0; _0x574a3e--) { if (_0x8a45e0[_0x574a3e][_0x557c8f(0x568)] === _0x557c8f(0x1a8)) { _0x5dd93f = _0x574a3e; break; } } if (_0x5dd93f === -0x1 || _0x5dd93f === _0x8a45e0['length'] - 0x1) { _0x2d1f89(_0x557c8f(0x25c)); return; } _0x8a45e0['splice'](_0x5dd93f + 0x1), _0x1a9239(), _0x538d90(), setTimeout(() => { _0x4e63bc(); }, 0x64); } function _0x460b03(_0x380d2d = null) { const _0x52070d = _0x4a89cb; if (_0x52070d(0x335) === _0x52070d(0x335)) { const _0x3760c4 = _0x380d2d ?? _0xa096b5[_0x52070d(0x91b)][_0x52070d(0x1b5)](); if (_0x3760c4 === '' || !_0x21e37d[_0x52070d(0x272)]) return; const _0x2c5f5d = document[_0x52070d(0x9d2)](_0x52070d(0x9c6)), _0x443d92 = _0x2c5f5d['id'] === _0x52070d(0x1e2), _0x22cf64 = { 'role': _0x52070d(0x1a8), 'content': _0x3760c4, 'timestamp': Date[_0x52070d(0x300)](), 'isOffline': _0x443d92 }; _0x21e37d['activeQuote'] && (_0x22cf64[_0x52070d(0xad7)] = { ..._0x21e37d['activeQuote'] }), _0x21e37d[_0x52070d(0x31d)]['push'](_0x22cf64), _0x1a9239(), _0x538d90(), !_0x380d2d && ('TrGRS' !== 'TrGRS' ? _0x2892ce = _0x52070d(0x2bf) + _0x55962b['name'] + _0x52070d(0x168) : _0xa096b5[_0x52070d(0x91b)] = ''), _0x2652f8(); } else _0x47376e(_0x52070d(0x3f1) + _0x48a560[_0x52070d(0x420)]); } function _0x193c08(_0x1145dc) { const _0x32100e = _0x4a89cb; if (!_0x1145dc || !_0x21e37d['activeChatId']) return; const _0xaa2717 = { 'role': _0x32100e(0x1a8), 'content': _0x32100e(0x27e) + _0x1145dc[_0x32100e(0x4a8)] + ']', 'displayUrl': _0x1145dc[_0x32100e(0x677)], 'timestamp': Date[_0x32100e(0x300)]() }; _0x21e37d[_0x32100e(0x31d)][_0x32100e(0x9f2)](_0xaa2717), _0x3f843e(_0xaa2717, _0x21e37d['conversationHistory'][_0x32100e(0x8ab)] - 0x1), _0x1a9239(), _0x22569c['classList'][_0x32100e(0x3c2)](_0x32100e(0x393)); } async function _0x4f8f75(_0x16a95e) { const _0x2bb571 = _0x4a89cb, _0x1dd3e2 = _0x16a95e[_0x2bb571(0x37e)]['files'][0x0]; if (!_0x1dd3e2 || !_0x21e37d[_0x2bb571(0x272)]) return; _0x171a38(!![], _0x2bb571(0x543)); try { const _0x45129d = await _0x2210f6(_0x1dd3e2, 0x320, 0.8, !![]), _0x5b0c0f = _0x2bb571(0x8c1) + Date['now'](); await _0x24ce6b(_0x5b0c0f, _0x45129d); const _0x3b5c0c = _0xa096b5[_0x2bb571(0x91b)][_0x2bb571(0x1b5)](); _0xa096b5[_0x2bb571(0x91b)] = ''; const _0x3bb4be = { 'role': _0x2bb571(0x1a8), 'content': _0x3b5c0c, 'imageId': _0x5b0c0f, 'timestamp': Date[_0x2bb571(0x300)]() }; _0x21e37d['conversationHistory'][_0x2bb571(0x9f2)](_0x3bb4be), _0x3f843e(_0x3bb4be, _0x21e37d[_0x2bb571(0x31d)]['length'] - 0x1), _0x1a9239(); } catch (_0x464b89) { _0x2d1f89(_0x2bb571(0x1b7) + _0x464b89[_0x2bb571(0x420)]); } finally { _0x2bb571(0x6b5) !== _0x2bb571(0x6b5) ? (_0x3d2083[_0x2bb571(0xad7)] = { 'sender': _0x50e700[0x1]['trim'](), 'content': _0x479cef[0x2][_0x2bb571(0x1b5)]() }, _0x37efbe['content'] = _0x1b5eed[_0x2bb571(0x7c5)](_0x2d96eb[0x0][_0x2bb571(0x8ab)])[_0x2bb571(0x1b5)]()) : (_0x171a38(![]), _0x16a95e[_0x2bb571(0x37e)][_0x2bb571(0x91b)] = ''); } } async function _0x2f8b88() { const _0x5e4cd3 = _0x4a89cb; if (!_0x21e37d['activeChatId']) return; const _0x576847 = await _0x137320(); if (!_0x576847) return; _0x2d1f89(_0x5e4cd3(0x2f1)); try { const _0x121976 = await _0x1996a8(_0x576847[_0x5e4cd3(0xaa1)], _0x576847['artist']), _0x7b16b5 = { 'role': 'user', 'type': _0x5e4cd3(0x529), 'content': '[用户分享了音乐：' + _0x576847[_0x5e4cd3(0xaa1)] + _0x5e4cd3(0x919) + _0x576847[_0x5e4cd3(0x20b)] + ']', 'songName': _0x576847['songName'], 'artist': _0x576847[_0x5e4cd3(0x20b)], 'coverUrl': _0x121976['cover'], 'playableUrl': _0x121976[_0x5e4cd3(0x677)], 'timestamp': Date['now']() }; _0x21e37d[_0x5e4cd3(0x31d)][_0x5e4cd3(0x9f2)](_0x7b16b5), _0x1a9239(), _0x5a0ef9(); } catch (_0x17a4fb) { if (_0x5e4cd3(0x5fa) === _0x5e4cd3(0x296)) { _0xcc2b4f(_0x5e4cd3(0xa97)); return; } else console['error']('用户分享音乐失败:', _0x17a4fb), _0x2d1f89(_0x5e4cd3(0x92c) + _0x17a4fb['message']); } } function _0x62cfe8(_0x411cad, _0x1137a5 = 0x78) { const _0x4c5876 = _0x4a89cb, _0x29bcb0 = _0x1dcb4a => { const _0x13bf41 = _0x1826; if (_0x1dcb4a[_0x13bf41(0x568)] === 'user') return _0x21e37d['userProfile']?.[_0x13bf41(0x4a8)] || 'User'; if (_0x1dcb4a['senderId']) { const _0x490634 = _0xe97381(_0x1dcb4a[_0x13bf41(0x1e4)]); return _0x490634?.[_0x13bf41(0x4a8)] || _0x13bf41(0xb18); } if (_0x411cad?.[_0x13bf41(0x497)] === _0x13bf41(0x9de)) { if (_0x13bf41(0x750) !== _0x13bf41(0xa6f)) { const _0x57f8f6 = _0xe97381(_0x411cad[_0x13bf41(0xad8)][0x0]); return _0x57f8f6?.[_0x13bf41(0x4a8)] || 'AI'; } else _0x133fad(); } return 'Assistant'; }, _0x6e9190 = _0x21e37d[_0x4c5876(0x31d)][_0x4c5876(0x6de)](-_0x1137a5), _0x1fb2cb = []; for (const _0xe0e78 of _0x6e9190) { if (_0xe0e78[_0x4c5876(0xa70)]) _0x1fb2cb['push']('[' + _0x29bcb0(_0xe0e78) + _0x4c5876(0xf6) + (_0xe0e78[_0x4c5876(0xaf8)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0xe0e78['image']) { if (_0x4c5876(0x9b6) === 'GbUwa') _0x105123[_0x4c5876(0x9f2)](_0x566c6a['id']); else { const _0x5e1540 = _0xe0e78[_0x4c5876(0xaf8)] ? '\x20' + _0xe0e78[_0x4c5876(0xaf8)] : ''; _0x1fb2cb[_0x4c5876(0x9f2)]('[' + _0x29bcb0(_0xe0e78) + ']\x20[image]' + _0x5e1540); } } else _0xe0e78['content'] && _0x1fb2cb[_0x4c5876(0x9f2)]('[' + _0x29bcb0(_0xe0e78) + ']\x20' + _0xe0e78[_0x4c5876(0xaf8)]); } } return _0x1fb2cb['join']('\x0a'); } function _0x331e7b(_0x4635db, _0x1bfa54) { const _0x14bfe9 = _0x4a89cb; if ('WJBwL' !== _0x14bfe9(0x6fb)) { if (!_0x4635db || !_0x1bfa54) return null; const _0x412088 = _0x1bfa54[_0x14bfe9(0x63a)](/@([^\s:：,，。!?]+)/); if (!_0x412088) return null; const _0x2e2d0f = _0x412088[0x1][_0x14bfe9(0x2c3)](); for (const _0x4ae215 of _0x4635db['participantIds']) { const _0xf063e2 = _0xe97381(_0x4ae215); if (!_0xf063e2?.[_0x14bfe9(0x4a8)]) continue; if (_0xf063e2[_0x14bfe9(0x4a8)]['toLowerCase']() === _0x2e2d0f) return _0xf063e2; if (_0xf063e2[_0x14bfe9(0x4a8)][_0x14bfe9(0x2c3)]()[_0x14bfe9(0x835)](_0x2e2d0f)) return _0xf063e2; } return null; } else { const _0x3b60d4 = _0x290e03[_0x14bfe9(0x2f9)]('{'), _0x3d7582 = _0x2ad0de[_0x14bfe9(0x1aa)]('}'); if (_0x3b60d4 >= 0x0 && _0x3d7582 > _0x3b60d4) return _0x30fb99[_0x14bfe9(0x6de)](_0x3b60d4, _0x3d7582 + 0x1); return _0x43f37d; } } function _0x4f84b9(_0x4e0fbc) { const _0x3e242b = _0x4a89cb, _0x3f495d = _0x4e0fbc[_0x3e242b(0x2f9)]('{'), _0x1aae6a = _0x4e0fbc['lastIndexOf']('}'); if (_0x3f495d >= 0x0 && _0x1aae6a > _0x3f495d) return _0x4e0fbc[_0x3e242b(0x6de)](_0x3f495d, _0x1aae6a + 0x1); return _0x4e0fbc; } function _0x2fe6c1(_0x17ef48, _0x529b3c, _0xc8bb91) { const _0x10d800 = _0x4a89cb; if ('rFFsI' === _0x10d800(0x198)) { const _0x35f2bc = new Map(_0x529b3c[_0x10d800(0x592)](_0x53d2e4 => [String(_0x53d2e4['id']), _0x53d2e4])), _0x149ca3 = _0x4c6518 => String(_0x4c6518 || '')[_0x10d800(0x2c3)]()[_0x10d800(0x8f0)](/\s+/g, ''), _0x1b2099 = new Map(_0x529b3c['map'](_0x1dac20 => [_0x149ca3(_0x1dac20[_0x10d800(0x4a8)]), _0x1dac20])), _0x1fa5f0 = new Set(_0xc8bb91), _0x4c3299 = { 'events': [] }; for (const _0x1fae46 of _0x17ef48?.[_0x10d800(0x4ff)] || []) { if (_0x10d800(0x7aa) !== 'LLaKk') { const _0x49a469 = _0x1fae46[_0x10d800(0x1e4)] ?? _0x1fae46[_0x10d800(0x69e)] ?? _0x1fae46[_0x10d800(0x809)] ?? _0x1fae46[_0x10d800(0x966)] ?? _0x1fae46['role'] ?? _0x1fae46['name']; if (!_0x49a469) continue; let _0x280dd6 = _0x35f2bc[_0x10d800(0x3fa)](String(_0x49a469)) || _0x1b2099[_0x10d800(0x3fa)](_0x149ca3(_0x49a469)); if (!_0x280dd6) continue; const _0x5c022e = (_0x1fae46[_0x10d800(0x9dd)] || _0x1fae46['type'] || _0x10d800(0x331))['toLowerCase'](); if (_0x5c022e === _0x10d800(0x210)) { const _0x55ebcb = (_0x1fae46[_0x10d800(0x210)] ?? _0x1fae46[_0x10d800(0x5cb)] ?? _0x1fae46['emote'] ?? _0x1fae46['tag'])?.[_0x10d800(0x1b5)](); if (_0x55ebcb && _0x1fa5f0['has'](_0x55ebcb)) _0x4c3299[_0x10d800(0x4ff)][_0x10d800(0x9f2)]({ 'senderId': _0x280dd6['id'], 'kind': _0x10d800(0x210), 'sticker': _0x55ebcb }); else { const _0x3adf10 = String(_0x1fae46[_0x10d800(0xaf8)] ?? _0x1fae46['text'] ?? '')[_0x10d800(0x1b5)]() || _0x10d800(0xa3a) + (_0x55ebcb || _0x10d800(0x990)) + ']'; if (_0x3adf10) _0x4c3299[_0x10d800(0x4ff)][_0x10d800(0x9f2)]({ 'senderId': _0x280dd6['id'], 'kind': _0x10d800(0x331), 'content': _0x3adf10 }); } } else { if (_0x5c022e === _0x10d800(0x529) && _0x1fae46['songName'] && _0x1fae46[_0x10d800(0x20b)]) _0x4c3299[_0x10d800(0x4ff)][_0x10d800(0x9f2)]({ 'senderId': _0x280dd6['id'], 'kind': _0x10d800(0x529), 'songName': _0x1fae46['songName'], 'artist': _0x1fae46[_0x10d800(0x20b)] }); else { const _0x27622e = String(_0x1fae46[_0x10d800(0xaf8)] ?? _0x1fae46[_0x10d800(0x331)] ?? _0x1fae46['message'] ?? '')['trim'](); if (_0x27622e) _0x4c3299[_0x10d800(0x4ff)][_0x10d800(0x9f2)]({ 'senderId': _0x280dd6['id'], 'kind': _0x10d800(0x331), 'content': _0x27622e }); } } } else _0x3645b2(_0x10d800(0x89b), _0x10d800(0x8e7)); } return _0x4c3299; } else _0x572f50 = _0x234495[_0x10d800(0x16b)](_0x2edcd1); } async function _0x19ee28(_0x5322cd) { const _0x163f89 = _0x4a89cb; if (_0x163f89(0x819) === _0x163f89(0x4e0)) _0x475d6a[_0x163f89(0x91b)] = _0x260dd9['apiSettings'][_0x163f89(0x2c6)] || '', _0x2bb9b7[_0x163f89(0x91b)] = _0x36fd08[_0x163f89(0xa6e)][_0x163f89(0x70c)] || '', _0x58e8f6['value'] = _0x165755[_0x163f89(0xa6e)][_0x163f89(0x60d)] || '', _0x178a18[_0x163f89(0x91b)] = _0x1c2bf0(_0x3d34c1['preferences']?.[_0x163f89(0x274)] ?? 0x64), _0x552f3d['getElementById'](_0x163f89(0xa29))[_0x163f89(0x91b)] = _0x1e0660[_0x163f89(0xa6e)][_0x163f89(0x4b1)] || _0x163f89(0x4f0); else { if (!_0x5322cd || !Array[_0x163f89(0x684)](_0x5322cd['events']) || _0x5322cd[_0x163f89(0x4ff)][_0x163f89(0x8ab)] === 0x0) return; const _0x538b73 = _0x4767f6 => _0x4767f6 + Math[_0x163f89(0x124)](Math[_0x163f89(0x53f)]() * 0x190); let _0xce04d8 = 0x1f4; for (const _0x1d1972 of _0x5322cd[_0x163f89(0x4ff)]) { if (_0x163f89(0x816) === 'uGFiz') _0x5c6cb3 && _0x9e3fc3(_0x5a1598['id'], _0x7afe44['map'](_0x302460 => _0x302460['id'])); else { await new Promise(_0x18d91e => setTimeout(_0x18d91e, _0x538b73(_0xce04d8))), _0xce04d8 = 0x2bc; const _0x16b388 = _0x21e37d[_0x163f89(0x31d)]['at'](-0x1)?.[_0x163f89(0x7a0)] ?? ![]; if (_0x1d1972[_0x163f89(0x9dd)] === _0x163f89(0x210)) { const _0x515d44 = _0x21b45c['find'](_0x270fba => _0x270fba['name'] === _0x1d1972[_0x163f89(0x210)]); if (_0x515d44) { if (_0x163f89(0x455) !== 'dKboY') { const _0x47a2ac = { 'role': _0x163f89(0x31e), 'content': _0x163f89(0x826) + _0x515d44[_0x163f89(0x4a8)] + ']', 'displayUrl': _0x515d44[_0x163f89(0x677)], 'senderId': _0x1d1972[_0x163f89(0x1e4)], 'timestamp': Date[_0x163f89(0x300)](), 'isOffline': _0x16b388 }; _0x21e37d[_0x163f89(0x31d)][_0x163f89(0x9f2)](_0x47a2ac), _0x1a9239(), _0x538d90(); } else _0x2c21f5[_0x163f89(0xa12)]('加载壁纸失败:', _0x4e49fa), _0x197c19 && (_0x424fbf[_0x163f89(0xab9)]['backgroundImage'] = ''); } } else { if (_0x1d1972['kind'] === _0x163f89(0x529) && _0x1d1972[_0x163f89(0xaa1)] && _0x1d1972[_0x163f89(0x20b)]) { if (_0x163f89(0x33b) === _0x163f89(0x33b)) { const { songName: _0x1b5a61, artist: _0xc046b7 } = _0x1d1972, _0x534738 = { 'role': 'assistant', 'type': _0x163f89(0x529), 'content': _0x163f89(0xa68) + _0x1b5a61 + _0x163f89(0x919) + _0xc046b7 + ']', 'songName': _0x1b5a61, 'artist': _0xc046b7, 'senderId': _0x1d1972[_0x163f89(0x1e4)], 'timestamp': Date['now'](), 'isOffline': _0x16b388 }; try { if (_0x163f89(0xa49) !== _0x163f89(0xa49)) { const _0x443ecd = _0x302c35[_0x163f89(0x12e)]?.['includes'](_0x3c1956['id']), _0xe893dc = _0x417d41[_0x163f89(0x53d)](_0x163f89(0x314)); _0xe893dc[_0x163f89(0x109)] = _0x163f89(0x652) + _0x3b3e3c['id'] + '\x22\x20' + (_0x443ecd ? _0x163f89(0x21e) : '') + '>\x20' + _0x52b77c[_0x163f89(0x4a8)], _0x20d046['appendChild'](_0xe893dc); } else { const _0x133024 = await _0x1996a8(_0x1b5a61, _0xc046b7); _0x534738[_0x163f89(0xab6)] = _0x133024[_0x163f89(0x145)], _0x534738['playableUrl'] = _0x133024[_0x163f89(0x677)]; } } catch (_0x24a702) { console[_0x163f89(0xa12)]('群聊音乐搜索失败\x20(' + _0x1b5a61 + _0x163f89(0x919) + _0xc046b7 + '):', _0x24a702), _0x534738[_0x163f89(0xab6)] = null, _0x534738[_0x163f89(0x25e)] = null; } _0x21e37d[_0x163f89(0x31d)][_0x163f89(0x9f2)](_0x534738), _0x1a9239(), _0x538d90(); } else { let _0x1233e0 = _0x262d7b['worldBooks'][_0x163f89(0x354)](_0x436a75 => _0x436a75[_0x163f89(0x4a8)] === _0x443774['name']); if (_0x1233e0) _0x17443b['push'](_0x1233e0['id']); else { const _0x32eb3e = { 'id': 'wb_' + _0x4312b1[_0x163f89(0x300)]() + '_' + _0x599763[_0x163f89(0x53f)](), 'name': _0x2671b7[_0x163f89(0x4a8)], 'content': _0x70af49[_0x163f89(0xaf8)] }; _0x1491e7[_0x163f89(0x584)][_0x163f89(0x9f2)](_0x32eb3e), _0x4ff6ff[_0x163f89(0x9f2)](_0x32eb3e['id']); } } } else { if (_0x1d1972[_0x163f89(0x9dd)] === _0x163f89(0x331)) { if (_0x163f89(0x27d) === _0x163f89(0x79a)) { _0x5a09b2 && (_0x12579f(_0x1ab036), _0x4748fc = null); _0x156a05['getElementById'](_0x163f89(0x49e))[_0x163f89(0xab9)][_0x163f89(0x243)] = _0x163f89(0x1ea); const _0x1f2f54 = _0x1b58fe[_0x163f89(0x2fc)](_0x163f89(0x5a0)); if (_0x1f2f54) _0x1f2f54[_0x163f89(0x3c2)](); const _0x56643d = _0x36a0cb[_0x163f89(0x2fc)]('snoop-home-clock'); if (_0x56643d) _0x56643d[_0x163f89(0x3c2)](); _0x3dc6fa('snoopList', 'snoopPhone'); } else { const _0x89c80e = _0x2878ad(_0x1d1972[_0x163f89(0xaf8)])[_0x163f89(0x6de)](0x0, 0x3); for (let _0xadba34 = 0x0; _0xadba34 < _0x89c80e['length']; _0xadba34++) { if (_0xadba34 > 0x0) await new Promise(_0x2ee30c => setTimeout(_0x2ee30c, _0x538b73(0x190))); const _0x3c6681 = { 'role': _0x163f89(0x31e), 'content': _0x89c80e[_0xadba34], 'senderId': _0x1d1972[_0x163f89(0x1e4)], 'timestamp': Date[_0x163f89(0x300)](), 'isOffline': _0x16b388 }; _0x21e37d[_0x163f89(0x31d)][_0x163f89(0x9f2)](_0x3c6681), _0x1a9239(), _0x538d90(); } } } } } } } } } async function _0x16921e(_0x3428c8, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x199cab = _0x4a89cb; if (_0x199cab(0x5be) === _0x199cab(0x9d1)) _0x487492['textContent'] = _0x2ee987[_0x199cab(0x4a8)], _0x435c33[_0x199cab(0x908)] = _0x199cab(0x62b), _0x2a8361(_0x342c84, 'normal'); else { await new Promise(_0x51ed88 => setTimeout(_0x51ed88, 0xa)); if (!_0x21e37d[_0x199cab(0xa6e)][_0x199cab(0x2c6)] || !_0x21e37d[_0x199cab(0xa6e)]['key'] || !_0x21e37d[_0x199cab(0xa6e)][_0x199cab(0x60d)]) { if (_0x199cab(0x4e4) === _0x199cab(0x6f9)) { const _0x5be9ee = _0x31458b[_0x199cab(0x115)](/:\s|：\s/); if (_0x5be9ee['length'] === 0x2) { const _0x1e62da = _0x5be9ee[0x0][_0x199cab(0x1b5)](), _0x27038d = _0x5be9ee[0x1][_0x199cab(0x1b5)](), _0x32a21b = { '歌名': _0x199cab(0x69b), '艺术家': '歌手', '专辑': '专辑' }; _0x32a21b[_0x1e62da] && (_0x5d5588[_0x32a21b[_0x1e62da]] = _0x27038d); } } else return _0x2d1f89(_0x199cab(0x840)), ![]; } const _0x4286ba = _0x4cc3e0(); if (!_0x4286ba || !_0x3428c8) return ![]; const _0x12fdc2 = _0x3beafd(_0x4286ba['id']), _0x4c1bd1 = _0x21e37d[_0x199cab(0x31d)]['at'](-0x1)?.[_0x199cab(0x568)] === _0x199cab(0x1a8); if (!force && !_0x4c1bd1) return ![]; const _0x7171b9 = _0x21e37d[_0x199cab(0x31d)]['at'](-0x1)?.[_0x199cab(0x7a0)] ?? ![]; if (delayMs) await new Promise(_0x53f4c6 => setTimeout(_0x53f4c6, delayMs)); if (_0x7171b9) document[_0x199cab(0x2fc)](_0x199cab(0xb17))['textContent'] = '（正在构思中...）'; else { if ('sriME' !== _0x199cab(0x2d5)) { if (!_0x3884ff[_0x199cab(0x684)](_0x433fde)) return '<p>格式错误</p>'; if (_0xb6c282[_0x199cab(0x8ab)] === 0x0) return _0x199cab(0x4fb); return _0x15099d[_0x199cab(0xa17)]((_0x42c335, _0x129e04) => new _0x2c6605(_0x129e04[_0x199cab(0x6cc)]) - new _0x400428(_0x42c335[_0x199cab(0x6cc)])), _0x2b664b[_0x199cab(0x592)](_0x35425b => { const _0x23655b = _0x199cab, _0x228746 = (_0x35425b[_0x23655b(0x1b9)] || [])[_0x23655b(0x592)](_0xc41905 => '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0xc41905 + _0x23655b(0x3b8))[_0x23655b(0x2c2)](''); return _0x23655b(0x47b) + (_0x35425b[_0x23655b(0x853)] || '未知餐厅') + _0x23655b(0xb09) + (_0x35425b[_0x23655b(0x6cc)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0x35425b[_0x23655b(0x12a)] || _0x23655b(0x71e)) + _0x23655b(0x341) + _0x228746 + _0x23655b(0x484) + (_0x35425b[_0x23655b(0x985)] || 0x0)[_0x23655b(0x6be)](0x2) + _0x23655b(0x347); })[_0x199cab(0x2c2)](''); } else _0x505756(!![]); } let _0xe58377 = ''; const _0xa22424 = _0x4cc3e0(); if (_0xa22424?.['activeListenSession']?.[_0x199cab(0x6da)]) { const _0x563399 = _0xa22424[_0x199cab(0x9e5)], _0x3eeb40 = await _0x27a7ee(_0x563399[_0x199cab(0x8a3)]); if (_0x3eeb40 && _0x3eeb40[_0x199cab(0x8b5)]) { const _0x2adbc1 = _0x327157(_0x3eeb40[_0x199cab(0x8b5)]); if (_0x2adbc1[_0x199cab(0x8ab)] > 0x0) { const _0x8047a6 = _0x483c46[_0x199cab(0xb15)]; let _0xd11876 = -0x1; for (let _0x1af886 = 0x0; _0x1af886 < _0x2adbc1['length']; _0x1af886++) { if (_0x8047a6 >= _0x2adbc1[_0x1af886][_0x199cab(0x5e4)]) _0xd11876 = _0x1af886; else break; } const _0x4bc64d = _0x2adbc1[_0x199cab(0x592)]((_0x4b3c80, _0x523ab6) => { const _0x145b98 = _0x199cab; if ('KiAUF' !== _0x145b98(0x368)) { const _0x2768e3 = _0x8c5093[_0x145b98(0x288)][_0xa12741]; _0x2768e3 && _0x2768e3['originalExpenses'] && _0x496c72['accountingData'][_0x145b98(0x9f2)](..._0x2768e3[_0x145b98(0x81c)]), delete _0xd2f992[_0x145b98(0x288)][_0x3f2abe], _0x1c4609(), _0x5bfbce(); } else { const _0x5473ec = _0x523ab6 === _0xd11876 ? _0x145b98(0xa7c) : ''; return '' + _0x5473ec + _0x4b3c80[_0x145b98(0x331)]; } })[_0x199cab(0x2c2)]('\x0a'); _0xe58377 = ('\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20' + _0x563399[_0x199cab(0x20b)] + _0x199cab(0x67c) + _0x563399[_0x199cab(0xaa1)] + _0x199cab(0x4d8) + _0x4bc64d + _0x199cab(0x995))['trim'](); } } } let _0xc21f11 = '', _0x1b6b38 = ''; const _0x8aebf7 = _0x21e37d['conversationHistory']['length']; if (_0x8aebf7 > 0x1) { const _0x2c3525 = _0x21e37d['conversationHistory'][_0x8aebf7 - 0x2], _0x3e26a2 = _0x21e37d[_0x199cab(0x31d)][_0x8aebf7 - 0x1]; if (_0x2c3525[_0x199cab(0x7a0)] === ![] && _0x3e26a2[_0x199cab(0x7a0)] === !![]) _0x199cab(0x8cf) !== _0x199cab(0x16d) ? _0x1b6b38 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“' + _0x12fdc2[_0x199cab(0x4a8)] + '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。' : _0x53e56e['isAnimatingDiary'] = ![]; else _0x2c3525[_0x199cab(0x7a0)] === !![] && _0x3e26a2['isOffline'] === ![] && (_0x199cab(0x9fa) === _0x199cab(0x73c) ? _0x170f6e['style'][_0x199cab(0x113)] = _0x199cab(0x7ff) : _0x1b6b38 = _0x199cab(0x2bf) + _0x12fdc2[_0x199cab(0x4a8)] + _0x199cab(0x168)); } if (_0x7171b9) { const _0xe0d680 = _0x199cab(0x412); _0xc21f11 = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x12fdc2[_0x199cab(0x4a8)] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0xe0d680 + _0x199cab(0xa2b) + _0x3428c8['name'] + _0x199cab(0x27c) + _0xe0d680 + _0x199cab(0x967) + _0xe0d680 + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0x199cab(0x71b); const { omniText: _0x40123d } = _0x434953(_0x3428c8['id'], _0x4286ba['id']), _0x172b19 = _0x1c7188(), _0x3c6f74 = _0x345da9(_0x3428c8['id']), _0x4ddecc = _0x49e80b(_0x3428c8['id']), _0x526e83 = await _0x58a951(_0x3428c8['id']), _0x32b907 = typeof _0x448c0d === 'string' ? _0x448c0d[_0x199cab(0x7a1)](_0x199cab(0x47a), _0x3428c8[_0x199cab(0x4a8)])['replaceAll'](_0x199cab(0x8a6), _0x12fdc2['name'] || '用户') : '', _0x5e2588 = _0x21b45c['map'](_0x20247d => _0x20247d[_0x199cab(0x4a8)])[_0x199cab(0x2c2)](',\x20'); let _0x3f1831 = ''; if (_0x3428c8[_0x199cab(0x12e)] && _0x3428c8['linkedWorldBookIds'][_0x199cab(0x8ab)] > 0x0) { if (_0x199cab(0x972) !== 'eTcPF') { const _0x2007c8 = _0x3428c8[_0x199cab(0x12e)][_0x199cab(0x592)](_0x25ba73 => _0x21e37d['worldBooks']['find'](_0x30ca63 => _0x30ca63['id'] === _0x25ba73))[_0x199cab(0x4b7)](Boolean)[_0x199cab(0x592)](_0x5e8407 => _0x199cab(0x737) + _0x5e8407[_0x199cab(0x4a8)] + '\x0a' + _0x5e8407[_0x199cab(0xaf8)])[_0x199cab(0x2c2)](''); if (_0x2007c8) _0x3f1831 = '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a' + _0x2007c8; } else _0x39f311['textContent'] = _0x384fad['from'](_0x1228c0)[_0x199cab(0x592)](_0xbf214e => _0xbf214e[_0x199cab(0x22a)][_0x199cab(0x908)][_0x199cab(0x1b5)]())[_0x199cab(0x2c2)]('、'); } const _0x3c9c12 = _0x12fdc2[_0x199cab(0x87d)] ? '\x0a\x0a#\x20关于对话者“' + _0x12fdc2['name'] + _0x199cab(0x239) + _0x12fdc2['persona'] : ''; let _0x1d0456 = ''; const _0x211521 = new Date(), _0x5e350d = _0x218a8c(_0x3428c8['id']); _0x1d0456 = _0x199cab(0x2ba), _0x1d0456 += _0x199cab(0x369) + _0x211521[_0x199cab(0x926)](_0x199cab(0x223), { 'dateStyle': _0x199cab(0x959), 'timeStyle': _0x199cab(0x79f) }) + '\x0a'; if (_0x5e350d) { if (_0x199cab(0xad3) === _0x199cab(0xad3)) { const _0xb5a15a = new Date(_0x5e350d['timestamp']), _0x2fe114 = _0x2d7f7e(_0xb5a15a); _0x1d0456 += _0x199cab(0x414) + _0x2fe114 + '\x0a'; const _0x3fa632 = _0x211521[_0x199cab(0x24e)](), _0x46633d = _0xb5a15a[_0x199cab(0x24e)](), _0x15af06 = new Date(); _0x15af06[_0x199cab(0x24d)](_0x211521[_0x199cab(0x1c4)]() - 0x1); const _0x583d5b = _0x15af06[_0x199cab(0x24e)](); if (_0x3fa632 === _0x46633d) { const _0x4c24af = (_0x211521 - _0xb5a15a) / (0x3e8 * 0x3c); _0x4c24af < 0x3c ? _0x199cab(0x710) !== _0x199cab(0x710) ? _0x4e229b += '-\x20' + _0x35fbfd[_0x199cab(0x41f)](_0x251ce0) + '\x0a' : _0x1d0456 += _0x199cab(0x1f0) : _0x1d0456 += _0x199cab(0xa0f) + Math[_0x199cab(0x2dd)](_0x4c24af / 0x3c) + _0x199cab(0x821); } else { if (_0x583d5b === _0x46633d) { if (_0x199cab(0xa0b) !== _0x199cab(0xa0b)) { const _0x44ba73 = _0x4495c9['value']; _0x5cfd96[_0x199cab(0x7f3)][_0x199cab(0xab9)][_0x199cab(0x7e1)](_0x199cab(0xb06), _0x44ba73 + '%'), _0x401351[_0x199cab(0x25f)]('themeLightness', _0x44ba73), _0x5ae6dc(); } else _0x1d0456 += '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a'; } else { const _0x5233e2 = Math[_0x199cab(0x2dd)]((_0x211521 - _0xb5a15a) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x1d0456 += _0x199cab(0xa09) + _0x5233e2 + '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a'; } } } else _0x48d30c[_0x199cab(0x9fb)] = _0x314435[_0x199cab(0x3a1)](_0x190b92), _0x19cf24[_0x199cab(0xab9)][_0x199cab(0x5f8)] = 0x1; } else { if (_0x199cab(0x4c5) === _0x199cab(0x4c5)) _0x1d0456 += _0x199cab(0x460); else { _0x4353f5['innerHTML'] = _0x199cab(0x963); return; } } const _0x3dcd6f = ('\x0a' + _0xc21f11 + _0x199cab(0x4f2) + _0x3428c8[_0x199cab(0x4a8)] + _0x199cab(0x132) + _0x3428c8[_0x199cab(0x4a8)] + _0x199cab(0x476) + _0x3428c8[_0x199cab(0x4a8)] + _0x199cab(0x945) + _0x5e2588 + ']。严禁使用列表之外的任何表情名。\x0a' + _0x32b907 + '\x0a')['trim'](), _0x958127 = [{ 'role': _0x199cab(0x707), 'content': _0x3dcd6f }], _0x1f57ac = ('\x0a#\x20你的个性（节选）\x0a' + (_0x3428c8[_0x199cab(0x87d)] || _0x199cab(0x2b1)) + '\x0a' + _0x3c9c12 + '\x20\x0a' + _0x40123d + '\x0a' + _0x172b19 + '\x0a' + _0x3c6f74 + '\x0a' + _0x4ddecc + _0x199cab(0x35c) + _0x526e83 + _0x199cab(0x355) + _0xe58377 + '\x0a' + _0x1d0456 + '\x0a' + _0x3f1831 + '\x0a')[_0x199cab(0x1b5)](); _0x1f57ac[_0x199cab(0x8f0)](/#.*|\s/g, '') && (_0x958127['push']({ 'role': _0x199cab(0x1a8), 'content': _0x1f57ac }), _0x958127[_0x199cab(0x9f2)]({ 'role': 'assistant', 'content': _0x199cab(0x949) })); const _0x61f3e1 = _0x21e37d[_0x199cab(0x88a)]?.[_0x199cab(0x274)] ?? 0x64, _0x389f0d = _0x21e37d['conversationHistory'][_0x199cab(0x6de)](-_0x61f3e1); for (const _0x1752e3 of _0x389f0d) { const _0x39a4d7 = _0x1752e3[_0x199cab(0x568)] === 'ai' || _0x1752e3[_0x199cab(0x568)] === _0x199cab(0x31e) ? _0x199cab(0x31e) : _0x199cab(0x1a8); let _0x55f82c = { 'role': _0x39a4d7, 'content': _0x1752e3[_0x199cab(0xaf8)] }, _0x2180ae = !!_0x1752e3[_0x199cab(0xaf8)]; if (_0x1752e3[_0x199cab(0xa70)] && _0x1752e3[_0x199cab(0xaf8)][_0x199cab(0x6f7)]('表情')) { if ('CLqyz' !== 'CLqyz') { const _0x36b0b1 = _0x1075ed['getElementById']('theme-lightness-slider'); if (!_0x36b0b1) return; const _0x46d877 = _0x41626b[_0x199cab(0x7b7)](_0x199cab(0xa80)) || '80'; _0x223f27['documentElement'][_0x199cab(0xab9)][_0x199cab(0x7e1)](_0x199cab(0xb06), _0x46d877 + '%'), _0x36b0b1[_0x199cab(0x91b)] = _0x46d877, _0x36b0b1[_0x199cab(0xe9)](_0x199cab(0x978), () => { const _0x4e49df = _0x199cab, _0x4e0479 = _0x36b0b1[_0x4e49df(0x91b)]; _0x4f4882[_0x4e49df(0x7f3)][_0x4e49df(0xab9)]['setProperty']('--primary-lightness', _0x4e0479 + '%'), _0x5eb0e5[_0x4e49df(0x25f)]('themeLightness', _0x4e0479), _0x497e37(); }); } else { const _0x1e641f = _0x1752e3[_0x199cab(0xaf8)][_0x199cab(0x63a)](/：(.*?)]$/); _0x55f82c[_0x199cab(0xaf8)] = _0x199cab(0xa3a) + (_0x1e641f ? _0x1e641f[0x1] : '未知表情') + ']', _0x958127[_0x199cab(0x9f2)](_0x55f82c); } } else { let _0x30823b = null; if (_0x1752e3['image']) 'EqbUR' === _0x199cab(0xb00) ? _0x25b4eb += '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a' : _0x30823b = _0x1752e3[_0x199cab(0xaa9)]; else { if (_0x1752e3['imageId']) try { const _0xf2008a = await _0x3bbeae(_0x1752e3[_0x199cab(0x803)]); if (_0xf2008a) { if (_0x199cab(0x1d5) !== _0x199cab(0x1d5)) { const _0x3b4702 = _0x5ab78c[_0x199cab(0x1b5)](); _0x3b4702 && _0x234046['push'](..._0x299123(_0x3b4702)), _0xcbd5e1 < _0x174fc9[_0x199cab(0x8ab)] && (_0x1941c1['push'](_0x230815[_0x35cdbb][_0x199cab(0x1b5)]()), _0x426def++); } else _0x30823b = await _0x425503(_0xf2008a); } } catch (_0x49cd00) { _0x199cab(0x18e) !== _0x199cab(0x18e) ? _0x3101da[_0x199cab(0xa12)]('Failed\x20to\x20plan\x20group\x20replies:', _0x22e88c) : console[_0x199cab(0xa12)](_0x199cab(0x7da), _0x49cd00); } } _0x30823b && (_0x55f82c[_0x199cab(0xaa9)] = _0x30823b, _0x2180ae = !![]), _0x2180ae && _0x958127[_0x199cab(0x9f2)](_0x55f82c); } } try { if ('KYTuJ' !== 'KYTuJ') _0x10c13d = _0x5c0828[_0x199cab(0x3a1)](_0x1b8fcb); else { const _0x1d39c5 = await _0xa3cec0(_0x958127); if (!_0x1d39c5) return ![]; if (_0x7171b9) try { let _0x5f3f50 = _0x1d39c5[_0x199cab(0x1b5)](); const _0x2977ad = _0x5f3f50[_0x199cab(0x63a)](/(\[[\s\S]*\])/); _0x2977ad && (_0x5f3f50 = _0x2977ad[0x1]); const _0x759aea = JSON['parse'](_0x5f3f50); if (Array[_0x199cab(0x684)](_0x759aea)) { if ('EzlNI' === _0x199cab(0x263)) _0x3d0e36(_0x5cb462['id']), _0x521aa0(_0x199cab(0x452)), _0x209538(_0x199cab(0x89b)), _0x3f69c7(![]); else { _0x21e37d[_0x199cab(0x872)] = [..._0x759aea], _0x21e37d['characterLastScripts'][_0x3428c8['id']] = [..._0x759aea], _0x362baf(); const _0x287623 = _0x759aea[_0x199cab(0x592)](_0x352c5e => _0x352c5e[_0x199cab(0x966)] === 'narrator' ? _0x352c5e[_0x199cab(0x810)] : _0x352c5e[_0x199cab(0x966)] + ':\x20' + _0x352c5e[_0x199cab(0x810)])[_0x199cab(0x2c2)]('\x0a\x0a'); _0x21e37d[_0x199cab(0x31d)][_0x199cab(0x9f2)]({ 'role': _0x199cab(0x31e), 'senderId': _0x3428c8['id'], 'timestamp': Date[_0x199cab(0x300)](), 'isOffline': !![], 'content': _0x287623 }); } } } catch (_0x29cad9) { console[_0x199cab(0xa12)](_0x199cab(0x81b), _0x29cad9, _0x199cab(0x2e4), _0x1d39c5), _0x21e37d['conversationHistory'][_0x199cab(0x9f2)]({ 'role': _0x199cab(0x31e), 'senderId': _0x3428c8['id'], 'timestamp': Date[_0x199cab(0x300)](), 'isOffline': !![], 'content': _0x199cab(0x3e2) + _0x1d39c5 + ']' }); } else { const _0x15227a = _0x55bc13(_0x1d39c5), _0x3608ad = _0x15227a[_0x199cab(0x592)](_0x4eb170 => { const _0x34d985 = _0x199cab, _0x2decd9 = _0x4eb170[_0x34d985(0x1b5)](), _0x3ea1a3 = _0x2decd9[_0x34d985(0x63a)](/^\[sticker:(.*?)\]$/), _0x2026ac = _0x2decd9[_0x34d985(0x63a)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0xdb3ff8 = _0x2decd9['match'](/^\[music:(.*?)\|(.*?)\]$/), _0x314e34 = _0x2decd9[_0x34d985(0x63a)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0xdb3ff8) return { 'type': _0x34d985(0x529), 'songName': _0xdb3ff8[0x1]['trim'](), 'artist': _0xdb3ff8[0x2]['trim']() }; else { if (_0x3ea1a3) { if ('tryvv' === 'hVIhP') _0xc28f7d && (_0x2431cb[_0x34d985(0xab9)][_0x34d985(0x243)] = _0x34d985(0x1ea)); else return { 'type': _0x34d985(0x210), 'name': _0x3ea1a3[0x1][_0x34d985(0x1b5)]() }; } else { if (_0x314e34) { if ('CIVuK' !== _0x34d985(0x3c8)) return { 'type': _0x34d985(0x7e2), 'eventType': _0x314e34[0x1]['trim'](), 'eventDate': _0x314e34[0x2][_0x34d985(0x1b5)](), 'eventContent': _0x314e34[0x3]['trim']() }; else _0x3ef7d8[_0x34d985(0x30a)](_0x3c69ce[_0x34d985(0x53d)](_0x34d985(0x6b3))); } else { if (_0x2026ac) { const _0x135793 = parseFloat(_0x2026ac[0x1]), _0x5492f1 = _0x2026ac[0x2][_0x34d985(0x1b5)](), _0x5c3b55 = _0x3beafd(_0x21e37d[_0x34d985(0x272)]); let _0x2a6c14 = null; if (_0x5492f1 === _0x5c3b55[_0x34d985(0x4a8)]) _0x2a6c14 = _0x5c3b55['id']; else { if (_0x34d985(0xa7d) !== _0x34d985(0x1be)) { const _0x3d39db = _0x4cc3e0(); if (_0x3d39db[_0x34d985(0x497)] === _0x34d985(0x869)) { const _0x1d3422 = _0x21e37d['characters']['find'](_0x5ccbdf => _0x3d39db[_0x34d985(0xad8)][_0x34d985(0x6f7)](_0x5ccbdf['id']) && _0x5ccbdf[_0x34d985(0x4a8)] === _0x5492f1); if (_0x1d3422) _0x2a6c14 = _0x1d3422['id']; } } else { const _0x3fca9a = _0x4f3025[_0x34d985(0x12e)]['map'](_0x29a603 => _0x2c2348['worldBooks'][_0x34d985(0x354)](_0x1ea623 => _0x1ea623['id'] === _0x29a603))[_0x34d985(0x4b7)](_0x145983)['map'](_0x22c807 => _0x34d985(0x737) + _0x22c807['name'] + '\x0a' + _0x22c807[_0x34d985(0xaf8)])[_0x34d985(0x2c2)](''); if (_0x3fca9a) _0x500322 = _0x34d985(0x22c) + _0x3fca9a; } } if (_0x2a6c14) return { 'type': 'transfer', 'amount': _0x135793, 'recipientId': _0x2a6c14, 'senderId': _0x3428c8['id'] }; else return { 'type': _0x34d985(0x331), 'content': _0x34d985(0x189) + _0x5492f1 + _0x34d985(0x878) }; } else { if (_0x2decd9) { if (_0x34d985(0x639) === 'GXROd') _0x30ab77 = '0x' + _0x263611[0x1] + _0x4b8d65[0x1], _0x29943b = '0x' + _0x15afb3[0x2] + _0xa0cd36[0x2], _0x268e05 = '0x' + _0x20b50e[0x3] + _0x560811[0x3]; else return { 'type': _0x34d985(0x331), 'content': _0x2decd9 }; } } } } } return null; })[_0x199cab(0x4b7)](Boolean), _0x573a68 = async _0x1c6a0b => { const _0x483d51 = _0x199cab, _0x23319b = { 'role': _0x483d51(0x31e), 'senderId': _0x3428c8['id'], 'timestamp': Date['now'](), 'isOffline': _0x7171b9 }; if (_0x1c6a0b['type'] === 'music') { const { songName: _0x4a82f7, artist: _0x89ff3e } = _0x1c6a0b; _0x23319b[_0x483d51(0x497)] = _0x483d51(0x529), _0x23319b[_0x483d51(0xaf8)] = '[AI分享了音乐：' + _0x4a82f7 + _0x483d51(0x919) + _0x89ff3e + ']'; try { const _0x317963 = await _0x1996a8(_0x4a82f7, _0x89ff3e); Object[_0x483d51(0x61c)](_0x23319b, { 'songName': _0x4a82f7, 'artist': _0x89ff3e, 'coverUrl': _0x317963[_0x483d51(0x145)], 'playableUrl': _0x317963[_0x483d51(0x677)] }); } catch (_0x36f9fd) { Object[_0x483d51(0x61c)](_0x23319b, { 'songName': _0x4a82f7, 'artist': _0x89ff3e, 'coverUrl': null, 'playableUrl': null }); } } else { if (_0x1c6a0b[_0x483d51(0x497)] === _0x483d51(0x210)) { if ('XIZqo' === _0x483d51(0x1b0)) _0x3318f1[_0x483d51(0xab9)][_0x483d51(0x243)] = _0x483d51(0x1ea), _0x1beea8[_0x483d51(0x2fc)](_0x483d51(0x8d1))['style'][_0x483d51(0x243)] = 'flex'; else { const _0x2ad221 = _0x21b45c[_0x483d51(0x354)](_0x5335ca => _0x5335ca[_0x483d51(0x4a8)] === _0x1c6a0b[_0x483d51(0x4a8)]); if (_0x2ad221) Object['assign'](_0x23319b, { 'content': _0x483d51(0x826) + _0x2ad221[_0x483d51(0x4a8)] + ']', 'displayUrl': _0x2ad221[_0x483d51(0x677)] }); else _0x23319b[_0x483d51(0xaf8)] = _0x483d51(0xa3a) + _0x1c6a0b[_0x483d51(0x4a8)] + ']'; } } else { if (_0x1c6a0b[_0x483d51(0x497)] === 'transfer') { const _0x1cf7d1 = _0x1c6a0b[_0x483d51(0xa47)] === _0x3beafd(_0x21e37d[_0x483d51(0x272)])['id'] ? _0x3beafd(_0x21e37d[_0x483d51(0x272)]) : _0xe97381(_0x1c6a0b['recipientId']); Object[_0x483d51(0x61c)](_0x23319b, { 'type': 'transfer', 'amount': _0x1c6a0b[_0x483d51(0xb31)], 'recipientId': _0x1c6a0b['recipientId'], 'content': '[AI向\x20' + (_0x1cf7d1?.[_0x483d51(0x4a8)] || '未知') + '\x20转账\x20' + _0x1c6a0b['amount'] + ']' }); } else { if (_0x1c6a0b[_0x483d51(0x497)] === _0x483d51(0x7e2)) { const _0x1a9c6e = _0x3beafd(_0x4286ba['id']); if (!_0x1a9c6e || !_0x1a9c6e['id']) return console[_0x483d51(0xa12)](_0x483d51(0x868)), null; _0x21e37d[_0x483d51(0x206)][_0x483d51(0x9f2)]({ 'id': 'event_ai_' + Date[_0x483d51(0x300)](), 'date': _0x1c6a0b[_0x483d51(0x358)], 'type': _0x1c6a0b[_0x483d51(0xb10)], 'content': _0x1c6a0b[_0x483d51(0xb32)], 'userId': _0x1a9c6e['id'], 'createdBy': 'ai' }), _0x37e4ef(), _0x5c31e8(), _0x4f3194(); const _0x53538c = _0xe97381(_0x3428c8['id']); _0x53538c && _0x1c6a0b[_0x483d51(0xb10)] === _0x483d51(0x218) && _0x2d1f89('💜\x20' + _0x53538c[_0x483d51(0x4a8)] + _0x483d51(0x6f8) + _0x1c6a0b[_0x483d51(0xb32)]); return { 'role': 'assistant', 'senderId': _0x3428c8['id'], 'timestamp': Date['now'](), 'isOffline': _0x7171b9, 'content': null }; return { 'role': 'assistant', 'senderId': _0x3428c8['id'], 'timestamp': Date[_0x483d51(0x300)](), 'isOffline': _0x7171b9, 'content': null }; } else { if ('gWuPS' === _0x483d51(0x7ae)) { const _0x4408d6 = _0x385b8a(_0x1c6a0b[_0x483d51(0xaf8)]); Object[_0x483d51(0x61c)](_0x23319b, { 'content': _0x4408d6[_0x483d51(0xaf8)], 'quotedMessage': _0x4408d6['quotedMessage'] }); } else { const _0x1ea332 = _0x404b01['characterLastScripts'][_0x154823]; _0x1ea332 && _0x1ea332[_0x483d51(0x8ab)] > 0x0 && (_0x31acfc = _0x1ea332['at'](-0x1)); } } } } } return _0x23319b; }, _0x137514 = await Promise['all'](_0x3608ad[_0x199cab(0x592)](_0x573a68)); for (const _0x51a4e2 of _0x137514) { (_0x51a4e2[_0x199cab(0xaf8)] || _0x51a4e2[_0x199cab(0xa70)] || _0x51a4e2[_0x199cab(0x497)] === _0x199cab(0x529)) && (await new Promise(_0x3c99d5 => setTimeout(_0x3c99d5, 0x12c + Math['random']() * 0x190)), _0x21e37d['conversationHistory'][_0x199cab(0x9f2)](_0x51a4e2), _0x538d90()); } } return _0x1a9239(), _0x538d90(), !![]; } } catch (_0x4d10a2) { if (_0x4d10a2[_0x199cab(0x4a8)] !== _0x199cab(0xa1d)) { console[_0x199cab(0xa12)](_0x199cab(0x85e), _0x4d10a2); const _0x250fbe = { 'role': _0x199cab(0x31e), 'content': _0x199cab(0x3f1) + _0x4d10a2[_0x199cab(0x420)], 'senderId': _0x3428c8['id'], 'isOffline': _0x7171b9 }; _0x21e37d[_0x199cab(0x31d)]['push'](_0x250fbe), _0x538d90(); } return ![]; } finally { if ('IFZJh' !== _0x199cab(0x992)) { const _0x52279 = _0x3be14d['getElementById']('friend-circle-list-container'); _0x52279[_0x199cab(0x109)] = ''; if (_0x2832e8[_0x199cab(0x635)]['length'] === 0x0) { _0x52279[_0x199cab(0x109)] = _0x199cab(0x77c); return; } _0x5e7c2b[_0x199cab(0x635)][_0x199cab(0xb13)](_0x3d21a9 => { const _0x7ed01d = _0x199cab, _0x217f0e = _0x241922[_0x7ed01d(0x63b)][_0x7ed01d(0x354)](_0x218872 => _0x218872['id'] === _0x3d21a9[_0x7ed01d(0x482)]) || { 'name': _0x7ed01d(0x5e8) }, _0x4f1cbd = _0x5f1e1d['createElement'](_0x7ed01d(0x6b3)); _0x4f1cbd[_0x7ed01d(0x175)] = _0x7ed01d(0x23c), _0x4f1cbd[_0x7ed01d(0x977)]['id'] = _0x3d21a9['id'], _0x4f1cbd[_0x7ed01d(0x109)] = _0x7ed01d(0x4c7) + _0x3d21a9['name'] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x217f0e[_0x7ed01d(0x4a8)] + '\x20|\x20' + _0x3d21a9[_0x7ed01d(0xe4)][_0x7ed01d(0x8ab)] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x4f1cbd[_0x7ed01d(0xe9)](_0x7ed01d(0x6f4), () => _0x3dd6a5(_0x3d21a9['id'])), _0x52279[_0x7ed01d(0x30a)](_0x4f1cbd); }); } else _0x505756(![]); } } } async function _0x4cf348() { const _0x3cbeaf = _0x4a89cb, _0x40db17 = _0x4cc3e0(); if (!_0x40db17 || _0x40db17[_0x3cbeaf(0x497)] !== _0x3cbeaf(0x9de)) { _0x2d1f89(_0x3cbeaf(0xa8f)); return; } if (_0x21e37d[_0x3cbeaf(0x5f4)]) { if ('YMQaj' !== 'HbvRO') { _0x2d1f89(_0x3cbeaf(0x3a9)); return; } else { const _0x421112 = _0x579b5f[_0x3cbeaf(0x53d)](_0x3cbeaf(0x6b3)); _0x421112[_0x3cbeaf(0x175)] = _0x54238e[_0x3cbeaf(0x497)] === 'important' ? 'important-day-item' : _0x3cbeaf(0x1c1), _0x421112[_0x3cbeaf(0x908)] = _0xa34379[_0x3cbeaf(0xaf8)], _0x421112['dataset']['id'] = _0x3db1d4['id'], _0x35f08d[_0x3cbeaf(0x30a)](_0x421112); } } const _0x4c971c = await _0x46bf1c(_0x3cbeaf(0x35a)); if (!_0x4c971c) return; _0x171a38(!![], '正在翻阅全部历史记录...'), _0x406374['value'] = '', _0x1c0e15[_0x3cbeaf(0x402)][_0x3cbeaf(0x3ea)]('show'), _0x21e37d[_0x3cbeaf(0x5f4)] = !![]; try { if (_0x3cbeaf(0x77a) === 'rPUAk') { _0xaa5d1e[_0x3cbeaf(0x109)] = _0x3cbeaf(0x77c); return; } else { const _0x48095d = _0xe97381(_0x40db17[_0x3cbeaf(0xad8)][0x0]), _0x344cd2 = _0x3beafd(_0x40db17['id']), _0x13f28e = _0x427c2d(_0x40db17['id']); if (_0x13f28e[_0x3cbeaf(0x8ab)] === 0x0) { _0x406374[_0x3cbeaf(0x91b)] = _0x3cbeaf(0x44a); return; } const _0x1283be = _0x13f28e[_0x3cbeaf(0x592)](_0x2e4ef5 => { const _0x4227af = _0x3cbeaf; if (_0x4227af(0xa87) !== _0x4227af(0x733)) { const _0x5bc298 = new Date(_0x2e4ef5[_0x4227af(0x6cc)]), _0x3db2bc = _0x5bc298[_0x4227af(0x71a)]() + '-' + String(_0x5bc298[_0x4227af(0x180)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x5bc298[_0x4227af(0x1c4)]())[_0x4227af(0x1df)](0x2, '0'), _0x2a681f = String(_0x5bc298[_0x4227af(0x97b)]())[_0x4227af(0x1df)](0x2, '0') + ':' + String(_0x5bc298[_0x4227af(0x4d6)]())[_0x4227af(0x1df)](0x2, '0'); let _0x3f39ed = '未知'; _0x2e4ef5['role'] === _0x4227af(0x1a8) ? _0x3f39ed = _0x344cd2[_0x4227af(0x4a8)] : _0x3f39ed = _0x48095d[_0x4227af(0x4a8)]; let _0x5a2567 = _0x2e4ef5['content']; if (_0x2e4ef5['displayUrl']) _0x5a2567 = _0x4227af(0x7ca); if (_0x2e4ef5[_0x4227af(0x803)]) _0x5a2567 = '[发送了图片]'; return '[' + _0x3db2bc + '\x20' + _0x2a681f + _0x4227af(0xa8d) + _0x3f39ed + _0x4227af(0x3a4) + _0x5a2567; } else _0x141a1c[_0x4227af(0x2fc)](_0x4227af(0x3d8) + _0x3a497e + _0x4227af(0x742))[_0x4227af(0xab9)][_0x4227af(0x3ec)] = _0x4227af(0xac5) + _0x14361a[_0x4227af(0x3a1)](_0x3ec1ec) + '\x27)'; })[_0x3cbeaf(0x2c2)]('\x0a'), _0x1bf04c = _0x21b832[_0x3cbeaf(0x8f0)](/{charName}/g, _0x48095d[_0x3cbeaf(0x4a8)])[_0x3cbeaf(0x8f0)](/{userName}/g, _0x344cd2[_0x3cbeaf(0x4a8)]), _0xef0631 = [{ 'role': _0x3cbeaf(0x707), 'content': _0x1bf04c }, { 'role': _0x3cbeaf(0x1a8), 'content': _0x1283be }], _0x1b817a = await _0xa3cec0(_0xef0631); _0x406374[_0x3cbeaf(0x91b)] = _0x1b817a || _0x3cbeaf(0xaed), _0x406374['scrollTop'] = 0x0; } } catch (_0x599c0d) { console[_0x3cbeaf(0xa12)](_0x3cbeaf(0xac6), _0x599c0d), _0x406374['value'] = _0x3cbeaf(0x612) + _0x599c0d[_0x3cbeaf(0x420)]; } finally { _0x171a38(![]), _0x21e37d['isGenerating'] = ![]; } } async function _0x4e63bc() { const _0x4645f1 = _0x4a89cb; console[_0x4645f1(0x172)](_0x4645f1(0x224)); if (!_0x21e37d['apiSettings'][_0x4645f1(0x2c6)] || !_0x21e37d[_0x4645f1(0xa6e)][_0x4645f1(0x70c)] || !_0x21e37d[_0x4645f1(0xa6e)][_0x4645f1(0x60d)]) { _0x2d1f89('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } const _0x25eaef = _0x21e37d[_0x4645f1(0x31d)]['at'](-0x1)?.[_0x4645f1(0x568)] === _0x4645f1(0x1a8); if (!_0x25eaef || _0x21e37d[_0x4645f1(0x5f4)]) return; const _0xb3474 = _0x4cc3e0(); if (!_0xb3474) return; _0x21e37d[_0x4645f1(0x5f4)] = !![], _0x505756(!![]); try { if (_0xb3474[_0x4645f1(0x497)] === _0x4645f1(0x9de)) { const _0x487a69 = _0xe97381(_0xb3474[_0x4645f1(0xad8)][0x0]); console[_0x4645f1(0x172)]('准备调用\x20generateAs...'); if (_0x487a69) await _0x16921e(_0x487a69, { 'force': !![] }); } else { const _0x5c1043 = await _0x3c6f1a(); if (_0x5c1043 && _0x5c1043['events']?.[_0x4645f1(0x8ab)]) await _0x19ee28(_0x5c1043); else { console['warn']('Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.'); const _0x281a45 = _0xb3474[_0x4645f1(0xad8)][_0x4645f1(0x592)](_0xe97381)['filter'](Boolean); if (!_0x281a45[_0x4645f1(0x8ab)]) return; let _0x91882f = 0x0; for (const _0x21d384 of _0x281a45) { _0x16921e(_0x21d384, { 'force': !![], 'delayMs': _0x91882f }), _0x91882f += 0x1f4; } } } } catch (_0x562932) { _0x562932[_0x4645f1(0x4a8)] !== 'AbortError' && (console['error'](_0x4645f1(0x19c), _0x562932), _0x3f843e({ 'role': _0x4645f1(0x31e), 'content': '错误:\x20' + _0x562932[_0x4645f1(0x420)] }, _0x21e37d[_0x4645f1(0x31d)]['length'] - 0x1)); } finally { _0x21e37d[_0x4645f1(0x5f4)] = ![], _0x505756(![]); } } function _0x33d687(_0x491fed, _0x1cc4e0) { const _0x3b7062 = _0x4a89cb, _0x5f3067 = _0x1cc4e0['toLowerCase'](), _0x4c9424 = _0x491fed['toLowerCase'](); if (_0x5f3067[_0x3b7062(0x835)](_0x3b7062(0x2aa))) return _0x3b7062(0x4f3); if (_0x4c9424[_0x3b7062(0x6f7)](_0x3b7062(0x37a))) return _0x3b7062(0x4f3); if (_0x4c9424[_0x3b7062(0x6f7)](_0x3b7062(0x865))) return _0x3b7062(0xa56); if (_0x5f3067[_0x3b7062(0x835)](_0x3b7062(0xa56))) return 'gemini'; return _0x3b7062(0x4f0); } async function _0xa3cec0(_0x37e301, _0x4363f4 = {}) { const _0x1bc4f2 = _0x4a89cb; _0x21e37d[_0x1bc4f2(0x250)] && (_0x1bc4f2(0x136) === _0x1bc4f2(0x136) ? _0x21e37d['currentAbortController']['abort'](_0x1bc4f2(0x356)) : (_0x2ce4f2[_0x1bc4f2(0x3c2)](), _0x321244())); _0x21e37d['currentAbortController'] = new AbortController(); const _0x95b2e2 = _0x21e37d['currentAbortController'][_0x1bc4f2(0x535)], { endpoint: _0x1fca24, key: _0x5ef02c, model: _0xabaa2b } = _0x21e37d[_0x1bc4f2(0xa6e)], _0x12dd51 = !!_0x4363f4[_0x1bc4f2(0x40c)], _0x5a2912 = _0x33d687(_0x1fca24, _0xabaa2b); console[_0x1bc4f2(0x172)](_0x1bc4f2(0xad6) + _0x5a2912); let _0x26a3ff = ''; try { switch (_0x5a2912) { case _0x1bc4f2(0x4f3): { if (_0x1bc4f2(0x4fc) === _0x1bc4f2(0x861)) { _0x1db80a(_0x1bc4f2(0x1ae)); return; } else { const _0x3482db = _0x179ecd(_0x5ef02c), _0x2e72eb = _0x37e301[_0x1bc4f2(0x354)](_0x483c53 => _0x483c53[_0x1bc4f2(0x568)] === 'system')?.[_0x1bc4f2(0xaf8)] || '', _0x374464 = _0x37e301[_0x1bc4f2(0x4b7)](_0x3eccc2 => _0x3eccc2[_0x1bc4f2(0x568)] !== _0x1bc4f2(0x707)), _0x477021 = { 'model': _0xabaa2b, 'system': _0x2e72eb, 'messages': _0x374464['map'](_0x430447 => ({ 'role': _0x430447[_0x1bc4f2(0x568)], 'content': [{ 'type': _0x1bc4f2(0x331), 'text': _0x430447['content'] }] })), 'max_tokens': 0x1000 }, _0xe0682e = await fetch(_0x1fca24, { 'method': _0x1bc4f2(0x986), 'headers': { 'Content-Type': 'application/json', 'x-api-key': _0x3482db, 'anthropic-version': _0x1bc4f2(0x479) }, 'body': JSON['stringify'](_0x477021), 'signal': _0x95b2e2 }); if (!_0xe0682e['ok']) { if ('KBEDC' === _0x1bc4f2(0x99e)) { const _0xafb3ea = _0x5c240b[_0x1bc4f2(0x41f)](_0x102c0d[_0x1bc4f2(0x172)] || [])[_0x1bc4f2(0x8f0)](/'/g, _0x1bc4f2(0x576))[_0x1bc4f2(0x8f0)](/"/g, _0x1bc4f2(0xb29)), _0x4972e9 = _0x5515ae[_0x1bc4f2(0x95b)] || _0x1bc4f2(0x121); return _0x1bc4f2(0x2be) + (_0x548344 < _0x9fd70f[_0x1bc4f2(0x8ab)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x1bc4f2(0x830) + _0xafb3ea + _0x1bc4f2(0xa78) + _0x4972e9 + _0x1bc4f2(0x31a) + _0xa0ff66 + _0x1bc4f2(0x914) + _0x4972e9[_0x1bc4f2(0x6c9)](0x0) + _0x1bc4f2(0x8e9) + _0x4972e9 + _0x1bc4f2(0x20a) + (_0x5c9533['last_message_preview'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } else { const _0x9ed4f3 = await _0xe0682e[_0x1bc4f2(0x40c)]()[_0x1bc4f2(0x483)](() => ({})); throw new Error(_0x1bc4f2(0x81a) + _0xe0682e[_0x1bc4f2(0x12a)] + '\x20-\x20' + (_0x9ed4f3[_0x1bc4f2(0xa12)]?.[_0x1bc4f2(0x420)] || _0xe0682e[_0x1bc4f2(0x97d)])); } } const _0x10ae62 = await _0xe0682e[_0x1bc4f2(0x40c)](); _0x26a3ff = _0x10ae62['content']?.[0x0]?.[_0x1bc4f2(0x331)] || ''; break; } } case _0x1bc4f2(0xa56): { const _0x508c25 = _0x179ecd(_0x5ef02c), _0x5a8ced = _0x1fca24[_0x1bc4f2(0x6f7)](_0x1bc4f2(0x219)), _0x473159 = _0xa48ab8 => { const _0x529e4c = _0x1bc4f2; if (_0x529e4c(0xad0) !== _0x529e4c(0xad0)) { const _0x2a4fa1 = new _0x950d20(_0x530819[_0x529e4c(0x6cc)]), _0x173aec = _0xac531f[_0x529e4c(0x124)]((_0x27bdb0 - _0x2a4fa1) / (0x3e8 * 0x3c)); if (_0x173aec < 0x5) _0x2f7f85 += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x173aec < 0x78) _0x2621e3 += _0x529e4c(0x6c3) + _0x173aec + _0x529e4c(0x560); else { const _0x5d80c8 = _0x2f4045['floor'](_0x173aec / 0x3c); if (_0x5d80c8 < 0x30) _0x3cb313 += '\x0a-\x20**对话状态**:\x20群里在' + _0x5d80c8 + _0x529e4c(0x280); else _0x2d1ebd += _0x529e4c(0x9d4) + _0x4e8be7[_0x529e4c(0x124)](_0x5d80c8 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } else { const _0x2b255a = []; if (_0xa48ab8[_0x529e4c(0xaf8)]) _0x2b255a[_0x529e4c(0x9f2)]({ 'text': _0xa48ab8[_0x529e4c(0xaf8)] }); if (_0xa48ab8[_0x529e4c(0xaa9)]) { const _0x2f8086 = _0xa48ab8[_0x529e4c(0xaa9)]['split'](',')[0x1], _0x2bdba5 = _0xa48ab8['image'][_0x529e4c(0x7c5)](_0xa48ab8[_0x529e4c(0xaa9)][_0x529e4c(0x2f9)](':') + 0x1, _0xa48ab8[_0x529e4c(0xaa9)]['indexOf'](';')) || 'image/jpeg'; _0x2b255a[_0x529e4c(0x9f2)]({ 'inline_data': { 'mime_type': _0x2bdba5, 'data': _0x2f8086 } }); } return _0x2b255a; } }, _0x4c9936 = _0x37e301[_0x1bc4f2(0x592)](_0x3fffd1 => ({ 'role': _0x3fffd1[_0x1bc4f2(0x568)] === _0x1bc4f2(0x31e) ? _0x1bc4f2(0x60d) : _0x3fffd1[_0x1bc4f2(0x568)] === _0x1bc4f2(0x707) ? _0x1bc4f2(0x1a8) : _0x3fffd1[_0x1bc4f2(0x568)], 'parts': _0x473159(_0x3fffd1) }))[_0x1bc4f2(0x4b7)](_0x1103ad => _0x1103ad[_0x1bc4f2(0xa43)]['length'] > 0x0), _0x2f6060 = { 'contents': _0x4c9936 }; _0x12dd51 && _0x5a8ced && (_0x2f6060[_0x1bc4f2(0x451)] = { 'response_mime_type': _0x1bc4f2(0x2ca) }); const _0x5f022e = _0x1fca24 + _0x1bc4f2(0x7e9) + _0xabaa2b + ':streamGenerateContent?key=' + _0x508c25 + _0x1bc4f2(0x8fd), _0x212762 = await fetch(_0x5f022e, { 'method': _0x1bc4f2(0x986), 'headers': { 'Content-Type': 'application/json' }, 'body': JSON[_0x1bc4f2(0x41f)](_0x2f6060), 'signal': _0x95b2e2 }); if (!_0x212762['ok']) throw new Error(_0x1bc4f2(0x93a) + _0x212762[_0x1bc4f2(0x12a)]); const _0xb16695 = _0x212762[_0x1bc4f2(0x6cd)][_0x1bc4f2(0x6a8)](), _0x13fb89 = new TextDecoder(); let _0xd72856 = ''; while (!![]) { if (_0x95b2e2[_0x1bc4f2(0x88d)]) { console['log'](_0x1bc4f2(0x581)), _0xb16695[_0x1bc4f2(0xaa3)](); break; } const { done: _0x226e99, value: _0x452a8c } = await _0xb16695[_0x1bc4f2(0xa4d)](); if (_0x226e99) break; const _0x1a226b = _0x13fb89[_0x1bc4f2(0x6c8)](_0x452a8c, { 'stream': !![] }), _0x1ce9d1 = _0x1a226b[_0x1bc4f2(0x115)]('\x0a')[_0x1bc4f2(0x4b7)](_0x12fc06 => _0x12fc06['trim']()[_0x1bc4f2(0x835)](_0x1bc4f2(0x28a))); for (const _0x1f4b5f of _0x1ce9d1) { const _0x33d5be = _0x1f4b5f[_0x1bc4f2(0x8f0)](_0x1bc4f2(0x5db), ''); if (_0x33d5be === _0x1bc4f2(0x71f)) break; try { if ('IpRoI' !== 'IpRoI') { _0x33e23e[_0x1bc4f2(0x109)] = _0x1bc4f2(0x91f); return; } else _0xd72856 += JSON[_0x1bc4f2(0x16b)](_0x33d5be)['candidates'][0x0][_0x1bc4f2(0xaf8)][_0x1bc4f2(0xa43)][0x0][_0x1bc4f2(0x331)]; } catch { } } } _0x26a3ff = _0xd72856; break; } case _0x1bc4f2(0x4f0): default: { if (_0x1bc4f2(0x176) !== 'fRgvC') { const _0x2bbceb = _0x179ecd(_0x5ef02c), _0x510e26 = _0x1fca24['replace'](/\/+$/, '') + _0x1bc4f2(0x6ff), _0x140edd = _0x37e301['map'](_0x47287b => { const _0x565cda = _0x1bc4f2; if (_0x47287b['role'] === _0x565cda(0x1a8) && _0x47287b['image']) { if (_0x565cda(0x599) !== 'koHGf') _0x2147d4[_0x565cda(0xab9)][_0x565cda(0x3ec)] = ''; else return { 'role': 'user', 'content': [{ 'type': _0x565cda(0x331), 'text': _0x47287b[_0x565cda(0xaf8)] || '\x20' }, { 'type': _0x565cda(0x273), 'image_url': { 'url': _0x47287b[_0x565cda(0xaa9)], 'detail': _0x565cda(0x558) } }] }; } return { 'role': _0x47287b[_0x565cda(0x568)], 'content': _0x47287b[_0x565cda(0xaf8)] }; })[_0x1bc4f2(0x4b7)](_0x321a07 => _0x321a07['content']), _0x30f359 = { 'model': _0xabaa2b, 'messages': _0x140edd, 'max_tokens': 0x1000, ..._0x12dd51 ? { 'response_format': { 'type': _0x1bc4f2(0x106) } } : {} }, _0x181fc1 = await fetch(_0x510e26, { 'method': _0x1bc4f2(0x986), 'headers': { 'Content-Type': 'application/json', 'Authorization': _0x1bc4f2(0x2f8) + _0x2bbceb }, 'body': JSON[_0x1bc4f2(0x41f)](_0x30f359), 'signal': _0x95b2e2 }); if (!_0x181fc1['ok']) { if (_0x1bc4f2(0x7a8) === _0x1bc4f2(0x4c9)) _0x335720['removeItem'](_0x1bc4f2(0xacb) + _0x1f9408['id']); else { const _0x1d5837 = await _0x181fc1[_0x1bc4f2(0x40c)]()[_0x1bc4f2(0x483)](() => ({})); throw new Error(_0x1bc4f2(0x76d) + _0x181fc1['status'] + '\x20-\x20' + (_0x1d5837[_0x1bc4f2(0xa12)]?.[_0x1bc4f2(0x420)] || _0x181fc1[_0x1bc4f2(0x97d)])); } } const _0xa77b1 = await _0x181fc1[_0x1bc4f2(0x40c)](); _0x26a3ff = _0xa77b1[_0x1bc4f2(0xb0e)]?.[0x0]?.[_0x1bc4f2(0x420)]?.['content'] || ''; break; } else _0x1fe276('错误:\x20' + _0x57bd57[_0x1bc4f2(0x420)]); } }return _0x26a3ff; } catch (_0x10266a) { if (_0x10266a['name'] === _0x1bc4f2(0xa1d)) return console['log'](_0x1bc4f2(0x26a)), ''; throw _0x10266a; } finally { _0x1bc4f2(0xa32) !== _0x1bc4f2(0xa32) ? _0x1b0f15['style']['backgroundImage'] = '' : _0x21e37d['currentAbortController'] && _0x21e37d[_0x1bc4f2(0x250)][_0x1bc4f2(0x535)] === _0x95b2e2 && (_0x21e37d[_0x1bc4f2(0x250)] = null); } } async function _0x1e4ceb() { const _0x241e3a = _0x4a89cb, _0x3bb7d9 = _0x476dfb[_0x241e3a(0x8e7)]['classList'][_0x241e3a(0x7e6)](_0x241e3a(0x911)), _0x5321ad = _0x3bb7d9 ? _0x324a4a[_0x241e3a(0x91b)] : null; let _0x3f7ef5 = null, _0x375b07 = ''; if (_0x3bb7d9 && _0x5321ad) { if (_0x241e3a(0x9eb) === 'DEpbG') _0x43e3e2[_0x241e3a(0x9fb)] = _0x13b8ac['createObjectURL'](_0x5012b6), _0x438c55[_0x241e3a(0xab9)][_0x241e3a(0x5f8)] = 0x1; else { _0x3f7ef5 = _0x21e37d[_0x241e3a(0x69a)][_0x241e3a(0x354)](_0x21b085 => _0x21b085[_0x241e3a(0x497)] === _0x241e3a(0x9de) && _0x21b085[_0x241e3a(0xad8)][_0x241e3a(0x6f7)](_0x5321ad)); const _0x4ff13d = _0xe97381(_0x5321ad); _0x375b07 = _0x4ff13d ? _0x4ff13d[_0x241e3a(0x4a8)] : _0x241e3a(0x5eb); } } else { if (_0x21e37d[_0x241e3a(0x272)]) { _0x3f7ef5 = _0x4cc3e0(); const _0x3b0cde = document['getElementById'](_0x241e3a(0x2d8))[_0x241e3a(0x908)]; _0x375b07 = _0x3b0cde || _0x241e3a(0x9ee); } } if (!_0x3f7ef5) { _0x2d1f89(_0x241e3a(0x83a)); return; } const _0x35a508 = await _0x46bf1c('确定要清空\x22' + _0x375b07 + _0x241e3a(0x2e2)); if (!_0x35a508) return; _0x3f7ef5['id'] === _0x21e37d[_0x241e3a(0x272)] && (_0x5b5749(), _0x21e37d[_0x241e3a(0x31d)] = [], _0x5a0ef9()); try { localStorage[_0x241e3a(0xb05)]('chatHistory_' + _0x3f7ef5['id']); } catch (_0x12015d) { _0x241e3a(0x8e8) !== _0x241e3a(0x8e8) ? _0x3d4082 = '你的任务是【首次生成】这个应用的内容。' : console[_0x241e3a(0xa12)](_0x241e3a(0x7ce) + _0x3f7ef5['id'], _0x12015d); } _0x2d1f89('\x22' + _0x375b07 + _0x241e3a(0x147)); } const _0x4e5dd3 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x31b)), _0x467fb9 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x411)), _0x1496d8 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x555)); _0x4e5dd3['addEventListener'](_0x4a89cb(0x6f4), async () => { const _0x357854 = _0x4a89cb; if ('AANif' === _0x357854(0xaac)) _0x59858d['paused'] ? _0x4c98a1[_0x357854(0x432)]() : _0x3f00eb['pause'](); else { _0x171a38(!![], _0x357854(0x2a0)); const _0x36e965 = []; try { const _0x199b29 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x3e1e2a = 0x0; _0x3e1e2a < localStorage['length']; _0x3e1e2a++) { const _0x2887e7 = localStorage['key'](_0x3e1e2a); if (_0x2887e7) _0x199b29['localStorageData'][_0x2887e7] = localStorage[_0x357854(0x7b7)](_0x2887e7); } const _0x5674ce = await _0x5e9bb5, _0x16e28c = _0x5674ce[_0x357854(0x130)](_0x4f35d5, _0x357854(0x99b)), _0x549de4 = _0x16e28c[_0x357854(0x50c)](_0x4f35d5), _0x2291f8 = await new Promise((_0x39690c, _0x58bb72) => { const _0x1afd45 = _0x357854, _0x63c7d0 = _0x549de4[_0x1afd45(0x12c)](); _0x63c7d0[_0x1afd45(0x854)] = () => _0x39690c(_0x63c7d0[_0x1afd45(0x18a)]), _0x63c7d0['onerror'] = () => _0x58bb72(_0x63c7d0[_0x1afd45(0xa12)]); }); for (const _0x3f9687 of _0x2291f8) { if (_0x3f9687[_0x357854(0xad4)] instanceof Blob) { if ('LtqnZ' !== _0x357854(0x70f)) try { _0x199b29[_0x357854(0x687)][_0x3f9687['id']] = await _0x425503(_0x3f9687[_0x357854(0xad4)]); } catch (_0x493ddd) { _0x36e965[_0x357854(0x9f2)](_0x3f9687['id']); } else { const _0x2b3f9b = _0x468535[_0x357854(0x53d)]('li'); _0x2b3f9b[_0x357854(0x175)] = _0x357854(0x3dd), _0x2b3f9b['dataset']['charId'] = _0x4b9fd9['id'], _0x2b3f9b[_0x357854(0x109)] = _0x357854(0x84c) + (_0x4e45fd['avatar'] || _0x2edf60) + _0x357854(0x7d6) + _0x4c35d4[_0x357854(0x4a8)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x5a8f4f[_0x357854(0x3d9)] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2b3f9b[_0x357854(0xe9)](_0x357854(0x6f4), () => { _0x5c9e0c(_0x250f79['id']); }), _0x21290f[_0x357854(0x30a)](_0x2b3f9b); } } } const _0xac64d4 = _0x5674ce[_0x357854(0x130)](_0x3cb239, _0x357854(0x99b)), _0x29cb8e = _0xac64d4['objectStore'](_0x3cb239), _0xe7f328 = await new Promise((_0x31e367, _0x4562af) => { const _0x3cc046 = _0x357854, _0xadead7 = _0x29cb8e[_0x3cc046(0x12c)](); _0xadead7[_0x3cc046(0x854)] = () => _0x31e367(_0xadead7['result']), _0xadead7['onerror'] = () => _0x4562af(_0xadead7[_0x3cc046(0xa12)]); }); for (const _0x5923f2 of _0xe7f328) { if (_0x357854(0x339) === _0x357854(0x10e)) _0x180d91['classList'][_0x357854(0x3c2)](_0x357854(0x911)), _0x1c69ac['classList'][_0x357854(0x3ea)](_0x357854(0x911)), _0xa60762(); else { const _0x2cccfe = { ..._0x5923f2 }; _0x5923f2[_0x357854(0x413)] instanceof Blob && (_0x2cccfe[_0x357854(0x413)] = await _0x425503(_0x5923f2[_0x357854(0x413)])), _0x5923f2[_0x357854(0x145)] instanceof Blob && (_0x2cccfe[_0x357854(0x145)] = await _0x425503(_0x5923f2['cover'])), _0x199b29[_0x357854(0x1c7)][_0x357854(0x9f2)](_0x2cccfe); } } const _0x5e9ef8 = new Blob([JSON['stringify'](_0x199b29, null, 0x2)], { 'type': _0x357854(0x2ca) }), _0x511974 = URL[_0x357854(0x3a1)](_0x5e9ef8), _0x4ebab9 = document[_0x357854(0x53d)]('a'), _0x365ab1 = new Date(), _0x264db1 = _0x365ab1['getFullYear']() + '-' + String(_0x365ab1['getMonth']() + 0x1)[_0x357854(0x1df)](0x2, '0') + '-' + String(_0x365ab1[_0x357854(0x1c4)]())['padStart'](0x2, '0'); _0x4ebab9[_0x357854(0x3d7)] = _0x511974, _0x4ebab9['download'] = _0x357854(0x708) + _0x264db1 + _0x357854(0x306), document['body']['appendChild'](_0x4ebab9), _0x4ebab9[_0x357854(0x6f4)](), document[_0x357854(0x6cd)][_0x357854(0x744)](_0x4ebab9), URL['revokeObjectURL'](_0x511974), _0x171a38(![]), _0x36e965[_0x357854(0x8ab)] > 0x0 ? _0x2d1f89(_0x357854(0x81d) + _0x36e965[_0x357854(0x2c2)]('\x0a')) : _0x2d1f89('包含所有图片和音乐的全量数据已成功导出！'); } catch (_0x50ba19) { if (_0x357854(0x3f0) === 'ODgnH') { if (_0x32f0fb[_0x357854(0x12e)][_0x357854(0x6f7)](_0xf4c005[_0x357854(0x91b)])) _0xc1194b['checked'] = !![]; } else _0x171a38(![]), console[_0x357854(0xa12)](_0x357854(0x3ce), _0x50ba19), _0x2d1f89('导出过程中发生严重错误:\x20' + _0x50ba19[_0x357854(0x420)]); } } }), _0x467fb9[_0x4a89cb(0xe9)]('click', () => { const _0x584dad = _0x4a89cb; if (_0x584dad(0x34c) !== _0x584dad(0x5cc)) _0x1496d8[_0x584dad(0x6f4)](); else { const _0x5c28b6 = _0x2d8c35[_0x584dad(0x37e)][_0x584dad(0x10d)][0x0]; if (!_0x5c28b6) return; const _0x20ecba = _0x5f4825[_0x584dad(0x3a1)](_0x5c28b6); _0x1d7d71[_0x584dad(0xab9)][_0x584dad(0x3ec)] = _0x584dad(0xac5) + _0x20ecba + '\x27)'; } }), _0x34115d[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x4852a6), _0x1496d8[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x44f21e => { const _0x3d1be4 = _0x4a89cb, _0x1a874b = _0x44f21e[_0x3d1be4(0x37e)][_0x3d1be4(0x10d)][0x0]; if (!_0x1a874b) return; _0x46bf1c('确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！')[_0x3d1be4(0x8c0)](_0x2b5f15 => { const _0x4c15b8 = _0x3d1be4; if (_0x4c15b8(0x3f6) === _0x4c15b8(0x1a7)) _0x11e1b5(![]); else { if (!_0x2b5f15) { _0x1496d8[_0x4c15b8(0x91b)] = ''; return; } _0x171a38(!![], _0x4c15b8(0xae7)); const _0x715ce5 = new FileReader(); _0x715ce5[_0x4c15b8(0x4b8)] = async _0xe2a55a => { const _0xc72a87 = _0x4c15b8; try { if (_0xc72a87(0x2ac) !== _0xc72a87(0xa3d)) { const _0x15ded3 = JSON[_0xc72a87(0x16b)](_0xe2a55a['target'][_0xc72a87(0x18a)]); if (!_0x15ded3[_0xc72a87(0x805)] || !_0x15ded3['indexedDBData']) { if ('ovChA' === _0xc72a87(0x6ea)) throw new Error(_0xc72a87(0x773)); else { const _0x39a268 = { 'id': _0xc72a87(0x43b) + _0x4e0416[_0xc72a87(0x300)]() + '_' + _0x18e897[_0xc72a87(0x53f)](), 'name': _0x2925d8[_0xc72a87(0x4a8)], 'content': _0xdc6dfa[_0xc72a87(0xaf8)] }; _0x431860[_0xc72a87(0x584)][_0xc72a87(0x9f2)](_0x39a268), _0x10d3b4[_0xc72a87(0x9f2)](_0x39a268['id']); } } _0x171a38(!![], _0xc72a87(0x925)); const _0x402c45 = await Promise['all'](Object['keys'](_0x15ded3[_0xc72a87(0x687)])['map'](async _0x109de1 => { const _0x55a7c8 = _0xc72a87, _0x5a1d0e = _0x15ded3[_0x55a7c8(0x687)][_0x109de1]; if (typeof _0x5a1d0e === _0x55a7c8(0x9b5) && _0x5a1d0e[_0x55a7c8(0x835)](_0x55a7c8(0x28a))) { const _0x21c42f = await _0x32101d(_0x5a1d0e); return { 'id': _0x109de1, 'blob': _0x21c42f }; } return null; }))[_0xc72a87(0x8c0)](_0x589d5d => _0x589d5d[_0xc72a87(0x4b7)](Boolean)), _0x21ec39 = []; if (_0x15ded3[_0xc72a87(0x1c7)]) { _0x171a38(!![], _0xc72a87(0xaad)); const _0x3d2d3f = _0x15ded3[_0xc72a87(0x1c7)]['map'](async _0x1b72ec => { const _0x31440f = _0xc72a87, _0x3a9846 = { ..._0x1b72ec }; if (_0x1b72ec[_0x31440f(0x413)]) _0x3a9846['audio'] = await _0x32101d(_0x1b72ec[_0x31440f(0x413)]); if (_0x1b72ec[_0x31440f(0x145)]) _0x3a9846[_0x31440f(0x145)] = await _0x32101d(_0x1b72ec['cover']); return _0x3a9846; }); _0x21ec39[_0xc72a87(0x9f2)](...await Promise[_0xc72a87(0x7b0)](_0x3d2d3f)); } _0x171a38(!![], _0xc72a87(0x743)), localStorage[_0xc72a87(0x58e)](); for (const _0x1e48a3 in _0x15ded3[_0xc72a87(0x805)]) { _0xc72a87(0x28f) !== _0xc72a87(0x326) ? localStorage[_0xc72a87(0x25f)](_0x1e48a3, _0x15ded3[_0xc72a87(0x805)][_0x1e48a3]) : (_0xdbc901 += '\x20\x20具体对话如下：\x0a', _0x2438f3[_0xc72a87(0x172)][_0xc72a87(0xb13)](_0x542b01 => { const _0x5f2cc = _0xc72a87, _0x365503 = _0x542b01['sender'] === _0x5f2cc(0x3b7) ? '你' : _0x540bf1[_0x5f2cc(0x95b)]; _0x503c9d += _0x5f2cc(0x7b5) + _0x365503 + ':\x20' + _0x542b01[_0x5f2cc(0xaf8)] + '\x0a'; })); } _0x171a38(!![], _0xc72a87(0x19a)); const _0x1aa50e = await _0x5e9bb5, _0x2dfe33 = _0x1aa50e['transaction']([_0x4f35d5, _0x3cb239, _0x150da7], _0xc72a87(0xb24)), _0x4680db = _0x2dfe33[_0xc72a87(0x50c)](_0x4f35d5), _0x2fa531 = _0x2dfe33[_0xc72a87(0x50c)](_0x3cb239), _0x7714de = _0x2dfe33[_0xc72a87(0x50c)](_0x150da7); _0x4680db[_0xc72a87(0x58e)](), _0x2fa531[_0xc72a87(0x58e)](), _0x7714de[_0xc72a87(0x58e)](), _0x402c45[_0xc72a87(0xb13)](_0x2182c9 => _0x4680db[_0xc72a87(0xac8)](_0x2182c9)), _0x21ec39[_0xc72a87(0xb13)](_0x1f92f0 => _0x2fa531[_0xc72a87(0xac8)](_0x1f92f0)), await new Promise((_0x5a851e, _0x46a59f) => { const _0x14dc86 = _0xc72a87; _0x2dfe33[_0x14dc86(0x208)] = _0x5a851e, _0x2dfe33['onerror'] = _0x3f9d9c => _0x46a59f(_0x3f9d9c[_0x14dc86(0x37e)][_0x14dc86(0xa12)]); }), _0x171a38(![]), _0x2d1f89(_0xc72a87(0x98b)), setTimeout(() => location[_0xc72a87(0x6a1)](), 0x640); } else { const _0x21d5c7 = _0x2105c6(_0x17e9a0['activeMeetingCharId']); if (!_0x21d5c7) return; const _0x3ddebe = _0x2ff375(_0x525a66['getElementById']('sprite-slider-x')[_0xc72a87(0x91b)]), _0x379191 = _0x52622e(_0x58db06[_0xc72a87(0x2fc)](_0xc72a87(0xa3e))[_0xc72a87(0x91b)]), _0x16c017 = _0x5de60d(_0x52413c[_0xc72a87(0x2fc)](_0xc72a87(0x3aa))[_0xc72a87(0x91b)]) / 0x64; _0x21d5c7[_0xc72a87(0x174)] = { 'x': _0x3ddebe, 'y': _0x379191, 'scale': _0x16c017 }, _0x20e8ea(), _0x2629d6(_0xc72a87(0x595)), _0x47b992(!![]); } } catch (_0x5f0265) { _0xc72a87(0xa14) === _0xc72a87(0x641) ? _0x2b67c1['removeItem'](_0xc72a87(0xacb) + _0x30f84c[_0xc72a87(0x272)]) : (_0x171a38(![]), console[_0xc72a87(0xa12)](_0xc72a87(0x64b), _0x5f0265), _0x2d1f89(_0xc72a87(0x195) + _0x5f0265[_0xc72a87(0x420)])); } finally { _0x1496d8['value'] = ''; } }, _0x715ce5[_0x4c15b8(0x194)](_0x1a874b); } }); }); function _0x388c03() { const _0x437edc = _0x4a89cb; _0x5a59ca[_0x437edc(0x91b)] = _0x21e37d[_0x437edc(0xa6e)]['endpoint'] || '', _0xae2b99[_0x437edc(0x91b)] = _0x21e37d[_0x437edc(0xa6e)]['key'] || '', _0x10509f['value'] = _0x21e37d[_0x437edc(0xa6e)][_0x437edc(0x60d)] || '', _0xde0598[_0x437edc(0x91b)] = String(_0x21e37d[_0x437edc(0x88a)]?.[_0x437edc(0x274)] ?? 0x64), document[_0x437edc(0x2fc)](_0x437edc(0xa29))[_0x437edc(0x91b)] = _0x21e37d[_0x437edc(0xa6e)]['provider'] || _0x437edc(0x4f0); } function _0x31a738() { const _0x54ec11 = _0x4a89cb; if (_0x54ec11(0x48e) !== 'giLmF') { _0x21e37d['apiSettings'][_0x54ec11(0x2c6)] = _0x5a59ca[_0x54ec11(0x91b)][_0x54ec11(0x1b5)](), _0x21e37d['apiSettings'][_0x54ec11(0x70c)] = _0xae2b99[_0x54ec11(0x91b)][_0x54ec11(0x1b5)](), _0x21e37d[_0x54ec11(0xa6e)][_0x54ec11(0x60d)] = _0x10509f[_0x54ec11(0x91b)][_0x54ec11(0x1b5)](), _0x21e37d[_0x54ec11(0xa6e)][_0x54ec11(0x4b1)] = document['getElementById'](_0x54ec11(0xa29))[_0x54ec11(0x91b)]; const _0xaaa19a = parseInt(_0xde0598[_0x54ec11(0x91b)], 0xa); _0x21e37d[_0x54ec11(0x88a)][_0x54ec11(0x274)] = Number['isFinite'](_0xaaa19a) && _0xaaa19a > 0x0 ? _0xaaa19a : 0x64, _0x37e4ef(), _0x2d1f89(_0x54ec11(0x258)); } else _0x1d2464[_0x54ec11(0x9f2)](_0x3d7c46['id']); } function _0x4b7b1e() { const _0x89586e = _0x4a89cb; _0x29531d['value'] = _0x21e37d[_0x89586e(0x87b)][_0x89586e(0x4a8)] || '', _0x1942f9['src'] = _0x21e37d[_0x89586e(0x87b)]['avatar'] || _0x3cf6e1, _0x17e98d['value'] = _0x21e37d[_0x89586e(0x87b)]['persona'] || ''; } async function _0x737441(_0x50e5f4 = null) { const _0x41867b = _0x4a89cb; if (_0x41867b(0x9a0) !== _0x41867b(0x8a7)) { _0x43c005(_0x41867b(0x8e7), _0x23d1f2); const _0x34454f = document[_0x41867b(0x2fc)](_0x41867b(0xa21)), _0x3a47a1 = document[_0x41867b(0x2fc)](_0x41867b(0x777)), _0x41e58 = document[_0x41867b(0x9d2)](_0x41867b(0x14d)); if (_0x50e5f4) { const _0x3d2926 = _0x21e37d[_0x41867b(0x32d)][_0x41867b(0x354)](_0x23a8cc => _0x23a8cc['id'] === _0x50e5f4); _0x34454f[_0x41867b(0x91b)] = _0x3d2926[_0x41867b(0x66b)] || '', _0x3a47a1[_0x41867b(0x91b)] = _0x3d2926[_0x41867b(0x890)] || ''; if (_0x41e58) _0x41e58[_0x41867b(0xab9)]['backgroundImage'] = _0x3d2926[_0x41867b(0x66b)] ? _0x41867b(0xac5) + _0x3d2926[_0x41867b(0x66b)] + '\x27)' : ''; } else { _0x34454f[_0x41867b(0x91b)] = '', _0x3a47a1['value'] = ''; if (_0x41e58) _0x41e58[_0x41867b(0xab9)][_0x41867b(0x3ec)] = ''; } _0x34454f['addEventListener'](_0x41867b(0x978), () => { const _0x4f6895 = _0x41867b; if (_0x41e58) _0x41e58[_0x4f6895(0xab9)][_0x4f6895(0x3ec)] = _0x34454f[_0x4f6895(0x91b)] ? _0x4f6895(0xac5) + _0x34454f[_0x4f6895(0x91b)] + '\x27)' : ''; }); const _0x2cc7e5 = document[_0x41867b(0x2fc)](_0x41867b(0x499)); _0x2cc7e5['innerHTML'] = '', _0x21e37d[_0x41867b(0x584)][_0x41867b(0xb13)](_0xfd3ffb => { const _0x44f47b = _0x41867b, _0x416167 = document[_0x44f47b(0x53d)](_0x44f47b(0x314)); _0x416167[_0x44f47b(0x109)] = _0x44f47b(0x652) + _0xfd3ffb['id'] + _0x44f47b(0x886) + _0xfd3ffb['name'], _0x2cc7e5[_0x44f47b(0x30a)](_0x416167); }), _0x42e2f6(_0x41867b(0xf0)), _0x42f6e4['src'] = _0x30019f, _0x18aa2a[_0x41867b(0x91b)] = '', _0x2188b7['style'][_0x41867b(0x3ec)] = '', _0xe6f39[_0x41867b(0x91b)] = '', _0x414e47[_0x41867b(0xab9)][_0x41867b(0x3ec)] = '', _0xe5cef8[_0x41867b(0x91b)] = ''; const _0xc7e39f = [_0x41867b(0x8f1), 'happy', _0x41867b(0x114), _0x41867b(0x39d), _0x41867b(0xac2)]; _0xc7e39f[_0x41867b(0xb13)](_0x4c1640 => { const _0x4ab150 = _0x41867b; if (_0x4ab150(0x758) === _0x4ab150(0x758)) document[_0x4ab150(0x2fc)]('char-edit-sprite-' + _0x4c1640 + _0x4ab150(0x742))[_0x4ab150(0xab9)][_0x4ab150(0x3ec)] = '', document[_0x4ab150(0x2fc)](_0x4ab150(0x3d8) + _0x4c1640 + _0x4ab150(0xb14))['value'] = ''; else { const _0x5f0674 = _0x4ab150(0x412); _0x21aaae = _0x4ab150(0x10b) + _0x3edbbb['name'] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0x5f0674 + _0x4ab150(0xa2b) + _0x5e7105[_0x4ab150(0x4a8)] + _0x4ab150(0x27c) + _0x5f0674 + _0x4ab150(0x967) + _0x5f0674 + _0x4ab150(0x67b); } }); if (_0x50e5f4) { if (_0x41867b(0x20c) === _0x41867b(0x2a5)) _0x5c4647[_0x41867b(0x525)] = ![]; else { const _0x17e099 = _0x21e37d[_0x41867b(0x32d)]['find'](_0x12c879 => _0x12c879['id'] === _0x50e5f4); if (!_0x17e099) return; _0x324a4a[_0x41867b(0x91b)] = _0x17e099['id'], _0x27d0ce['textContent'] = _0x41867b(0xe6), _0x34aeac[_0x41867b(0x91b)] = _0x17e099['name'], _0x47fcc8['value'] = _0x17e099[_0x41867b(0x3d9)], _0x4039cf[_0x41867b(0x91b)] = _0x17e099['persona'], document[_0x41867b(0x2fc)](_0x41867b(0x586))[_0x41867b(0x91b)] = _0x17e099[_0x41867b(0x158)] || ''; const _0xe5c3f5 = _0x21e37d[_0x41867b(0x69a)][_0x41867b(0x354)](_0x5d1db1 => _0x5d1db1[_0x41867b(0x497)] === _0x41867b(0x9de) && _0x5d1db1[_0x41867b(0xad8)][_0x41867b(0x6f7)](_0x50e5f4)); document[_0x41867b(0x2fc)](_0x41867b(0xf0))[_0x41867b(0x91b)] = _0xe5c3f5?.[_0x41867b(0x482)] || _0x21e37d[_0x41867b(0x514)]; try { const _0x3be7d1 = await _0x3bbeae(_0x41867b(0x23a) + _0x17e099['id']), _0x353210 = await _0x3bbeae(_0x41867b(0x7de) + _0x17e099['id']), _0x74bb94 = await _0x3bbeae('char_offline_bg_' + _0x17e099['id']); _0x42f6e4[_0x41867b(0x9fb)] = _0x3be7d1 ? URL['createObjectURL'](_0x3be7d1) : _0x17e099['avatar'] || _0x30019f; if (_0x353210) _0x2188b7['style'][_0x41867b(0x3ec)] = _0x41867b(0xac5) + URL[_0x41867b(0x3a1)](_0x353210) + '\x27)'; if (_0x74bb94) _0x414e47[_0x41867b(0xab9)][_0x41867b(0x3ec)] = _0x41867b(0xac5) + URL[_0x41867b(0x3a1)](_0x74bb94) + '\x27)'; for (const _0x4ab26a of _0xc7e39f) { const _0x1a7105 = await _0x3bbeae(_0x41867b(0x72d) + _0x4ab26a + '_' + _0x17e099['id']); if (_0x1a7105) { if (_0x41867b(0x3e3) !== _0x41867b(0x3e3)) { if (_0x371b4b[_0x41867b(0x594)]) return; const _0x2bf6a5 = _0x42209f[_0x41867b(0x7d7)], _0x285cf6 = _0x13111d['ceil'](_0x351f02['diaries'][_0x41867b(0x354)](_0x9ed7e3 => _0x9ed7e3[_0x41867b(0x387)] === _0x5ca260[_0x41867b(0x8bb)])[_0x41867b(0x1d1)][_0x41867b(0x8ab)] / 0x2); if (_0x2bf6a5 >= _0x285cf6 - 0x1) return; _0x48846a[_0x41867b(0x594)] = !![]; const _0x279a00 = _0x2bf6a5 + 0x1, _0x530f42 = _0x1a124d[_0x41867b(0x2fc)]('diary-page-' + _0x2bf6a5), _0x2e17c7 = _0x11bdce[_0x41867b(0x2fc)](_0x41867b(0x646) + _0x279a00); _0x530f42 && _0x2e17c7 ? (_0x2e17c7['classList'][_0x41867b(0x3ea)](_0x41867b(0x8a1)), _0x530f42[_0x41867b(0x402)]['add']('is-exiting-left'), _0x2e17c7[_0x41867b(0x402)][_0x41867b(0x3ea)](_0x41867b(0x940)), _0x5eba13(() => { const _0x75ad9c = _0x41867b; _0x530f42['classList']['remove'](_0x75ad9c(0x940), _0x75ad9c(0x93b)), _0x2e17c7['classList']['remove']('is-entering-from-right'), _0x4226c8[_0x75ad9c(0x7d7)] = _0x279a00, _0x16fb35(), _0x2b92c6[_0x75ad9c(0x594)] = ![]; }, 0x2bc)) : _0xbe8b68[_0x41867b(0x594)] = ![]; } else document[_0x41867b(0x2fc)]('char-edit-sprite-' + _0x4ab26a + _0x41867b(0x742))[_0x41867b(0xab9)][_0x41867b(0x3ec)] = _0x41867b(0xac5) + URL[_0x41867b(0x3a1)](_0x1a7105) + '\x27)'; } } } catch (_0xd3715a) { console[_0x41867b(0xa12)](_0x41867b(0x5f3) + _0x17e099['id'] + _0x41867b(0x661), _0xd3715a), _0x42f6e4[_0x41867b(0x9fb)] = _0x17e099[_0x41867b(0x496)] || _0x30019f; } _0x17e099[_0x41867b(0x12e)] && _0x2cc7e5[_0x41867b(0x4ee)](_0x41867b(0x495))[_0x41867b(0xb13)](_0x14b084 => { const _0x5d0941 = _0x41867b; if ('vGHZP' === _0x5d0941(0x9b8)) { if (_0x17e099[_0x5d0941(0x12e)][_0x5d0941(0x6f7)](_0x14b084[_0x5d0941(0x91b)])) _0x14b084[_0x5d0941(0x21e)] = !![]; } else { let _0x15c242 = _0x5251f8['trim'](); const _0x5509b3 = _0x15c242[_0x5d0941(0x63a)](/(\[[\s\S]*\])/); _0x5509b3 && (_0x15c242 = _0x5509b3[0x1]); const _0x2ac863 = _0x27c205[_0x5d0941(0x16b)](_0x15c242); if (_0x499e03[_0x5d0941(0x684)](_0x2ac863)) { _0x1c9b70[_0x5d0941(0x872)] = [..._0x2ac863], _0x1bc18b[_0x5d0941(0xafb)][_0x257623['id']] = [..._0x2ac863], _0x24f036(); const _0x38a7cf = _0x2ac863[_0x5d0941(0x592)](_0x15aa02 => _0x15aa02[_0x5d0941(0x966)] === _0x5d0941(0x6ce) ? _0x15aa02['line'] : _0x15aa02[_0x5d0941(0x966)] + ':\x20' + _0x15aa02[_0x5d0941(0x810)])[_0x5d0941(0x2c2)]('\x0a\x0a'); _0x2888de[_0x5d0941(0x31d)][_0x5d0941(0x9f2)]({ 'role': _0x5d0941(0x31e), 'senderId': _0x4f70d2['id'], 'timestamp': _0x10eb8f['now'](), 'isOffline': !![], 'content': _0x38a7cf }); } } }), _0xffe7fb(); } } else _0x324a4a[_0x41867b(0x91b)] = '', _0x27d0ce[_0x41867b(0x908)] = _0x41867b(0x205), _0x34aeac[_0x41867b(0x91b)] = _0x41867b(0x7e5) + (_0x21e37d['characters'][_0x41867b(0x8ab)] + 0x1), _0x47fcc8[_0x41867b(0x91b)] = '', _0x4039cf[_0x41867b(0x91b)] = '你是一个乐于助人的AI助手。', document['getElementById'](_0x41867b(0x586))['value'] = '', _0xffe7fb(); const _0x2c39d7 = document[_0x41867b(0x2fc)](_0x41867b(0x586)); let _0x1fa43b = document[_0x41867b(0x2fc)](_0x41867b(0x328)); !_0x1fa43b && ('MXTli' === _0x41867b(0x283) ? (_0x1fa43b = document[_0x41867b(0x53d)](_0x41867b(0xab9)), _0x1fa43b['id'] = _0x41867b(0x328), document[_0x41867b(0x4d9)]['appendChild'](_0x1fa43b)) : (_0x441082 += _0x41867b(0x40e) + _0x14fb8b[_0x41867b(0x95b)] + _0x41867b(0xaf3) + _0x2c3d02[_0x41867b(0x9e3)] + '”。\x0a', _0x394c70[_0x41867b(0x172)] && _0x2d8615[_0x41867b(0x684)](_0x4138f1[_0x41867b(0x172)]) && (_0xb5646c += _0x41867b(0x93d), _0x29cadd[_0x41867b(0x172)][_0x41867b(0xb13)](_0xd70728 => { const _0x4a41dc = _0x41867b, _0x413100 = _0xd70728[_0x4a41dc(0x69e)] === _0x4a41dc(0x3b7) ? '你' : _0x373a51[_0x4a41dc(0x95b)]; _0x2bf278 += _0x4a41dc(0x7b5) + _0x413100 + ':\x20' + _0xd70728['content'] + '\x0a'; })))); const _0x31b468 = () => { const _0x5c925a = _0x41867b; if (_0x5c925a(0x6c4) !== _0x5c925a(0x29e)) { const _0x5520af = _0x2c39d7['value']; let _0x33e8a1 = _0x5520af[_0x5c925a(0x8f0)](/\.bubble\.sent/g, _0x5c925a(0x649))['replace'](/\.bubble\.received/g, _0x5c925a(0xa67)); _0x1fa43b[_0x5c925a(0x109)] = _0x33e8a1; } else _0x360835[_0x5c925a(0xa12)]('加载徽章图片失败', _0x106b09); }; _0x2c39d7[_0x41867b(0xace)](_0x41867b(0x978), _0x31b468), _0x2c39d7[_0x41867b(0xe9)](_0x41867b(0x978), _0x31b468), _0x31b468(); } else _0x24748f[_0x41867b(0xa12)](_0x41867b(0xac6), _0x3def4a), _0x349c2a[_0x41867b(0x91b)] = _0x41867b(0x612) + _0x1417c1[_0x41867b(0x420)]; } async function _0x11758d() { const _0x28b47d = _0x4a89cb, _0x2bad45 = _0x324a4a[_0x28b47d(0x91b)]; if (!_0x2bad45) { _0x2d1f89(_0x28b47d(0x8bf)); return; } const _0x589b77 = _0xe97381(_0x2bad45); if (!_0x589b77) return; _0x171a38(!![], _0x28b47d(0x5b6) + _0x589b77['name'] + _0x28b47d(0x8d5)); try { const _0x37e130 = { 'type': _0x28b47d(0x279), 'version': 0x1, 'name': _0x589b77[_0x28b47d(0x4a8)], 'remark': _0x589b77['remark'], 'persona': _0x589b77[_0x28b47d(0x87d)], 'bubbleCss': _0x589b77[_0x28b47d(0x158)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x480837 = await _0x3bbeae(_0x28b47d(0x23a) + _0x589b77['id']); if (_0x480837) _0x37e130['avatar'] = await _0x425503(_0x480837); const _0x28561d = [_0x28b47d(0x8f1), _0x28b47d(0xa9b), _0x28b47d(0x114), _0x28b47d(0x39d), 'shy']; for (const _0x441ecf of _0x28561d) { const _0x3914c0 = await _0x3bbeae(_0x28b47d(0x72d) + _0x441ecf + '_' + _0x589b77['id']); _0x3914c0 && (_0x37e130[_0x28b47d(0x89e)][_0x441ecf] = await _0x425503(_0x3914c0)); } if (_0x589b77[_0x28b47d(0x12e)] && _0x589b77['linkedWorldBookIds'][_0x28b47d(0x8ab)] > 0x0) { if (_0x28b47d(0xaf6) !== _0x28b47d(0xaf6)) { if (_0x2dec3c[_0x28b47d(0x37e)]['closest']('button')) return; const _0x51e116 = _0x3245ca['getElementById'](_0x28b47d(0x4a9)); _0x51e116 && _0x51e116[_0x28b47d(0x6f4)](); } else _0x37e130['worldBooks'] = _0x589b77[_0x28b47d(0x12e)][_0x28b47d(0x592)](_0x4ffcb6 => _0x21e37d[_0x28b47d(0x584)][_0x28b47d(0x354)](_0x4bcdb7 => _0x4bcdb7['id'] === _0x4ffcb6))[_0x28b47d(0x4b7)](Boolean)[_0x28b47d(0x592)](_0xd67939 => ({ 'name': _0xd67939[_0x28b47d(0x4a8)], 'content': _0xd67939[_0x28b47d(0xaf8)] })); } const _0x21029e = new Blob([JSON[_0x28b47d(0x41f)](_0x37e130, null, 0x2)], { 'type': _0x28b47d(0x2ca) }), _0x3a2373 = URL[_0x28b47d(0x3a1)](_0x21029e), _0x3bfe3b = document[_0x28b47d(0x53d)]('a'); _0x3bfe3b[_0x28b47d(0x3d7)] = _0x3a2373, _0x3bfe3b['download'] = _0x589b77[_0x28b47d(0x4a8)] + _0x28b47d(0x90a), document[_0x28b47d(0x6cd)][_0x28b47d(0x30a)](_0x3bfe3b), _0x3bfe3b[_0x28b47d(0x6f4)](), document['body'][_0x28b47d(0x744)](_0x3bfe3b), URL['revokeObjectURL'](_0x3a2373); } catch (_0xf7693b) { if (_0x28b47d(0x241) === _0x28b47d(0x192)) { const _0x545644 = _0x426897[_0x28b47d(0x37e)][_0x28b47d(0x10d)][0x0]; if (!_0x545644) return; const _0x30bc50 = _0x432227[_0x28b47d(0x3a1)](_0x545644); _0x5aed39[_0x28b47d(0x9fb)] = _0x30bc50, _0x3979d8[_0x28b47d(0x4b8)] = () => { const _0x5d6915 = _0x28b47d; _0x2ef698[_0x5d6915(0x705)](_0x30bc50); }; } else console[_0x28b47d(0xa12)]('导出角色卡失败:', _0xf7693b), _0x2d1f89('导出失败了，哼:\x20' + _0xf7693b[_0x28b47d(0x420)]); } finally { _0x171a38(![]); } } async function _0x5c050d(_0x3dae5f) { const _0x23bc68 = _0x4a89cb, _0x328834 = _0x3dae5f['target'][_0x23bc68(0x10d)][0x0]; if (!_0x328834) return; _0x171a38(!![], _0x23bc68(0x610)); const _0x2e490a = new FileReader(); _0x2e490a[_0x23bc68(0x4b8)] = async _0x548541 => { const _0x4522d7 = _0x23bc68; try { if (_0x4522d7(0x849) !== _0x4522d7(0x849)) try { const _0x41ec7a = _0x475636[_0x4522d7(0x16b)](_0x496dff), _0xe7130e = { ..._0x1a51d0 }, _0x4cce2e = { ..._0xe7130e, ..._0x41ec7a }; _0x4cce2e[_0x4522d7(0x88a)] = { ..._0xe7130e[_0x4522d7(0x88a)], ..._0x41ec7a[_0x4522d7(0x88a)] || {} }, _0x4cce2e[_0x4522d7(0xa6e)] = { ..._0xe7130e[_0x4522d7(0xa6e)], ..._0x41ec7a[_0x4522d7(0xa6e)] || {} }, _0x17c3e1[_0x4522d7(0x61c)](_0x1668d2, _0x4cce2e); } catch (_0x7c1e1c) { _0x453dbb[_0x4522d7(0xa12)](_0x4522d7(0xa77), _0x7c1e1c), _0x536caa[_0x4522d7(0xb05)](_0x4522d7(0x689)); } else { const _0x5cf5b8 = JSON[_0x4522d7(0x16b)](_0x548541[_0x4522d7(0x37e)]['result']); if (_0x5cf5b8[_0x4522d7(0x497)] !== 'NoirCharacterCard') { if (_0x4522d7(0x8ec) !== _0x4522d7(0x478)) throw new Error(_0x4522d7(0x154)); else { const _0x5bf801 = _0x4f1b08['getItem'](_0x4522d7(0xacb) + _0x3e97e2), _0x244150 = _0x115dbf[_0x4522d7(0x16b)](_0x5bf801 || '[]'); return _0x47273b[_0x4522d7(0x684)](_0x244150) ? _0x244150 : []; } } const _0x47967d = []; if (_0x5cf5b8[_0x4522d7(0x584)] && _0x5cf5b8[_0x4522d7(0x584)]['length'] > 0x0) for (const _0x190905 of _0x5cf5b8[_0x4522d7(0x584)]) { if (_0x4522d7(0xacd) === _0x4522d7(0xacd)) { let _0x57fb04 = _0x21e37d[_0x4522d7(0x584)]['find'](_0x209817 => _0x209817[_0x4522d7(0x4a8)] === _0x190905[_0x4522d7(0x4a8)]); if (_0x57fb04) _0x47967d[_0x4522d7(0x9f2)](_0x57fb04['id']); else { const _0x311429 = { 'id': 'wb_' + Date[_0x4522d7(0x300)]() + '_' + Math['random'](), 'name': _0x190905[_0x4522d7(0x4a8)], 'content': _0x190905[_0x4522d7(0xaf8)] }; _0x21e37d[_0x4522d7(0x584)][_0x4522d7(0x9f2)](_0x311429), _0x47967d[_0x4522d7(0x9f2)](_0x311429['id']); } } else { if (_0x5ae83a) { const _0x3b5b21 = _0x4521fb[_0x4522d7(0x53d)]('p'); _0x3b5b21[_0x4522d7(0x109)] = _0x18209b, _0x3b5b21[_0x4522d7(0xab9)][_0x4522d7(0xac7)] = '0', _0x57856b[_0x4522d7(0x30a)](_0x3b5b21); } } } const _0x3b6441 = _0x4522d7(0x7d2) + Date[_0x4522d7(0x300)](); let _0x37c1c0 = null; if (_0x5cf5b8[_0x4522d7(0x496)]) { const _0x4e6975 = await _0x32101d(_0x5cf5b8[_0x4522d7(0x496)]); await _0x24ce6b(_0x4522d7(0x23a) + _0x3b6441, _0x4e6975), _0x37c1c0 = await _0x425503(_0x4e6975); } if (_0x5cf5b8['sprites']) for (const _0x15affd in _0x5cf5b8['sprites']) { if ('JACWy' === _0x4522d7(0x2c9)) _0x3f9978(_0x39e687), _0x7019d0(); else { const _0x62177b = _0x5cf5b8[_0x4522d7(0x89e)][_0x15affd]; if (_0x62177b) { if (_0x4522d7(0x3d4) === _0x4522d7(0x3a2)) _0x1ad3b0[_0x4522d7(0x908)] = '近期没有特别安排', _0x1dc4e5[_0x4522d7(0x109)] = '<span>--</span><span\x20class=\x22unit\x22>天</span>'; else { const _0x1086e4 = await _0x32101d(_0x62177b); await _0x24ce6b(_0x4522d7(0x72d) + _0x15affd + '_' + _0x3b6441, _0x1086e4); } } } } const _0x38762a = { 'id': _0x3b6441, 'name': _0x5cf5b8[_0x4522d7(0x4a8)], 'remark': _0x5cf5b8[_0x4522d7(0x3d9)] || '', 'persona': _0x5cf5b8[_0x4522d7(0x87d)], 'avatar': _0x37c1c0, 'linkedWorldBookIds': _0x47967d, 'bubbleCss': _0x5cf5b8[_0x4522d7(0x158)] || '' }; _0x21e37d['characters']['push'](_0x38762a); const _0x5ea603 = { 'id': _0x4522d7(0x309) + _0x3b6441, 'type': _0x4522d7(0x9de), 'participantIds': [_0x3b6441], 'boundUserProfileId': _0x21e37d[_0x4522d7(0x514)] }; _0x21e37d[_0x4522d7(0x69a)][_0x4522d7(0x9f2)](_0x5ea603), _0x37e4ef(), await _0x12c63b(), _0x2d1f89('“' + _0x38762a[_0x4522d7(0x4a8)] + _0x4522d7(0x61f)); } } catch (_0x26f9db) { if (_0x4522d7(0x8c4) !== _0x4522d7(0x8c4)) { const _0x5cfa4a = _0x3b5b63[_0x4522d7(0x2fc)](_0x4522d7(0x140)); _0x5cfa4a[_0x4522d7(0x42c)](), _0xa37985[_0x4522d7(0x5ae)]('copy'), _0xf72bc3('档案已复制到剪贴板！'); } else console[_0x4522d7(0xa12)](_0x4522d7(0x542), _0x26f9db), _0x2d1f89(_0x4522d7(0xa9c) + _0x26f9db[_0x4522d7(0x420)]); } finally { _0x171a38(![]), _0x3dae5f['target'][_0x4522d7(0x91b)] = ''; } }, _0x2e490a[_0x23bc68(0x194)](_0x328834); } async function _0x20b2aa() { const _0xab1c99 = _0x4a89cb; if ('tkfaZ' !== _0xab1c99(0x556)) _0x3807b7(); else { const _0x363ff3 = _0x324a4a[_0xab1c99(0x91b)], _0x43f6c6 = document[_0xab1c99(0x2fc)](_0xab1c99(0xf0))['value'], _0x47ecc7 = _0x18aa2a[_0xab1c99(0x10d)][0x0], _0x374d9f = _0xe6f39[_0xab1c99(0x10d)][0x0], _0x354c54 = _0xe5cef8[_0xab1c99(0x10d)][0x0], _0x58b0b0 = document[_0xab1c99(0x4ee)](_0xab1c99(0x448)), _0x671fae = Array[_0xab1c99(0xab0)](_0x58b0b0)[_0xab1c99(0x592)](_0x35f926 => _0x35f926[_0xab1c99(0x91b)]), _0x1c90e5 = { 'name': _0x34aeac['value']['trim'](), 'remark': _0x47fcc8[_0xab1c99(0x91b)][_0xab1c99(0x1b5)](), 'persona': _0x4039cf[_0xab1c99(0x91b)][_0xab1c99(0x1b5)](), 'linkedWorldBookIds': _0x671fae, 'bubbleCss': document[_0xab1c99(0x2fc)](_0xab1c99(0x586))[_0xab1c99(0x91b)][_0xab1c99(0x1b5)](), 'avatarFrameUrl': document[_0xab1c99(0x2fc)](_0xab1c99(0xa21))[_0xab1c99(0x91b)]['trim'](), 'userAvatarFrameUrl': document[_0xab1c99(0x2fc)](_0xab1c99(0x777))[_0xab1c99(0x91b)][_0xab1c99(0x1b5)]() }; if (!_0x1c90e5[_0xab1c99(0x4a8)]) { _0x2d1f89(_0xab1c99(0x6a0)); return; } try { if ('LhglF' !== _0xab1c99(0x6e8)) { const _0x1d6204 = [_0xab1c99(0x8f1), _0xab1c99(0xa9b), _0xab1c99(0x114), _0xab1c99(0x39d), _0xab1c99(0xac2)]; let _0x43b2f7 = _0x363ff3; if (_0x363ff3) { const _0x121f0e = _0x21e37d['characters']['find'](_0x3f236f => _0x3f236f['id'] === _0x363ff3); _0x121f0e && Object[_0xab1c99(0x61c)](_0x121f0e, _0x1c90e5); } else { const _0x4a7073 = _0xab1c99(0x7d2) + Date[_0xab1c99(0x300)](); _0x43b2f7 = _0x4a7073; const _0x289b0f = { 'id': _0x4a7073, ..._0x1c90e5 }; _0x289b0f[_0xab1c99(0x496)] = _0x47ecc7 ? await _0x52f5ff(_0x47ecc7) : _0x30019f, _0x21e37d[_0xab1c99(0x32d)][_0xab1c99(0x9f2)](_0x289b0f); const _0xe6f0cb = { 'id': _0xab1c99(0x309) + _0x4a7073, 'type': 'private', 'participantIds': [_0x4a7073], 'listenTogetherSession': null }; _0x21e37d[_0xab1c99(0x69a)][_0xab1c99(0x9f2)](_0xe6f0cb); } const _0xfaf2a8 = _0x21e37d['chats'][_0xab1c99(0x354)](_0x25d669 => _0x25d669['type'] === 'private' && _0x25d669[_0xab1c99(0xad8)][_0xab1c99(0x6f7)](_0x43b2f7)); _0xfaf2a8 && (_0xfaf2a8[_0xab1c99(0x482)] = _0x43f6c6); if (_0x47ecc7) await _0x24ce6b(_0xab1c99(0x23a) + _0x43b2f7, _0x47ecc7); if (_0x374d9f) await _0x24ce6b(_0xab1c99(0x7de) + _0x43b2f7, _0x374d9f); if (_0x354c54) await _0x24ce6b(_0xab1c99(0x6c6) + _0x43b2f7, _0x354c54); for (const _0x5a8325 of _0x1d6204) { if ('tdfCa' !== _0xab1c99(0xa35)) { const _0x32bf49 = document[_0xab1c99(0x2fc)]('char-edit-sprite-' + _0x5a8325 + _0xab1c99(0xb14))[_0xab1c99(0x10d)][0x0]; if (_0x32bf49) await _0x24ce6b('char_sprite_' + _0x5a8325 + '_' + _0x43b2f7, _0x32bf49); } else { const _0x2b759f = _0x50dcf6[0x0], _0x32316c = new _0x45de20(_0x2b759f[_0xab1c99(0x377)] + _0xab1c99(0xac9)), _0x37f15b = _0x32316c - _0x534924, _0x55e3ca = _0x1fdac9[_0xab1c99(0x157)](_0x37f15b / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x42572d['textContent'] = _0xab1c99(0x879) + _0x2b759f[_0xab1c99(0xaf8)] + '」', _0x12df4a[_0xab1c99(0x109)] = '<span>' + _0x55e3ca + _0xab1c99(0x21f); } } _0x37e4ef(), _0x12c63b(), _0x2d1f89(_0xab1c99(0x552)), _0x43c005('chat', _0xab1c99(0x8e7)); if (!_0x363ff3) { const _0x47d055 = _0xab1c99(0x309) + _0x43b2f7; _0x5d2adc(_0x47d055), _0x282fb7(!![]); } } else { const _0x5871af = _0x32dc94[_0xab1c99(0x53d)](_0xab1c99(0x6b3)); _0x5871af[_0xab1c99(0x908)] = _0x181cb6, _0x5871af[_0xab1c99(0xe9)](_0xab1c99(0x6f4), () => { const _0x5d511f = _0xab1c99; _0x49e301[_0x5d511f(0x91b)] = _0x27ecd4, _0x53e28b['classList'][_0x5d511f(0x3c2)](_0x5d511f(0x393)); }), _0xe6b439[_0xab1c99(0x30a)](_0x5871af); } } catch (_0x25c3fe) { if ('KqEgl' !== _0xab1c99(0x9e0)) { const _0x567678 = _0x312e7b[_0xab1c99(0x91b)][_0xab1c99(0x1b5)](); _0x567678 && (_0x4b6c52(_0x567678), _0x474d66['value'] = '', _0x5dab96(_0x188b65, 0x64)); } else console[_0xab1c99(0xa12)](_0xab1c99(0x15d), _0x25c3fe), _0x2d1f89(_0xab1c99(0x7f6) + _0x25c3fe['message']); } } } function _0xcd11fc() { const _0x2dbd8c = _0x4a89cb; _0x3f57d5['value'] = '', _0x588b43[_0x2dbd8c(0x109)] = ''; if (_0x21e37d[_0x2dbd8c(0x32d)]['length'] < 0x2) { _0x2d1f89(_0x2dbd8c(0x5f7)); return; } _0x21e37d[_0x2dbd8c(0x32d)]['forEach'](_0x439193 => { const _0x3101cc = _0x2dbd8c, _0x3ed7f6 = document[_0x3101cc(0x53d)]('li'); _0x3ed7f6[_0x3101cc(0x175)] = _0x3101cc(0x386), _0x3ed7f6[_0x3101cc(0x109)] = _0x3101cc(0x30f) + _0x439193['id'] + _0x3101cc(0x336) + _0x439193['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x439193[_0x3101cc(0x496)] || _0x30019f) + _0x3101cc(0xabe) + _0x439193['id'] + _0x3101cc(0x825) + _0x439193[_0x3101cc(0x4a8)] + _0x3101cc(0x7a3), _0x588b43[_0x3101cc(0x30a)](_0x3ed7f6); }), _0x43c005(_0x2dbd8c(0x1db), _0x2dbd8c(0x47e)); } function _0x2f432f() { const _0xd48209 = _0x4a89cb, _0x3fc80c = _0x3f57d5[_0xd48209(0x91b)][_0xd48209(0x1b5)](); if (!_0x3fc80c) { _0x2d1f89('请输入群聊名称。'); return; } const _0x1125e2 = Array['from'](_0x588b43[_0xd48209(0x4ee)](_0xd48209(0x97c)))[_0xd48209(0x592)](_0x58303f => _0x58303f[_0xd48209(0x977)]['id']); if (_0x1125e2[_0xd48209(0x8ab)] < 0x2) { _0x2d1f89(_0xd48209(0x2c5)); return; } const _0x10de09 = { 'id': _0xd48209(0x544) + Date[_0xd48209(0x300)](), 'type': 'group', 'name': _0x3fc80c, 'participantIds': _0x1125e2 }; _0x21e37d[_0xd48209(0x69a)][_0xd48209(0x9f2)](_0x10de09), _0x21e37d[_0xd48209(0x272)] = _0x10de09['id'], _0x37e4ef(), _0x12c63b(), _0x1d8f68(), _0x2edc85(), _0x2d1f89(_0xd48209(0xa1a) + _0x3fc80c + '”已创建！'), _0x43c005(_0xd48209(0x89b), _0xd48209(0x1db)); } _0x254afb[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x3ae8cb[_0x4a89cb(0x6f4)]()), _0x147c29[_0x4a89cb(0xe9)]('click', _0x2a3d87), _0x3ae8cb[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x46fd63), _0x32c0b4[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x4cf348), _0x404e00[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x1c0e15[_0x4a89cb(0x402)]['remove'](_0x4a89cb(0x393))), _0x97fb64[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x1c0e15['classList'][_0x4a89cb(0x3c2)](_0x4a89cb(0x393))), _0x5a57fd[_0x4a89cb(0xe9)]('click', () => { const _0x10bcce = _0x4a89cb; _0x406374[_0x10bcce(0x42c)](), navigator['clipboard'][_0x10bcce(0x2bb)](_0x406374[_0x10bcce(0x91b)])[_0x10bcce(0x8c0)](() => { const _0x1c5389 = _0x10bcce; _0x2d1f89(_0x1c5389(0x46f)); })[_0x10bcce(0x483)](_0x324695 => { const _0x1699c2 = _0x10bcce; _0x1699c2(0x2cb) !== _0x1699c2(0x2cb) ? _0x3d1f9d = _0x2f960e[_0x1699c2(0xaf8)] : _0x2d1f89(_0x1699c2(0x7ab)); }); }), _0x35b5fe[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x3bccb0), _0x381a24[_0x4a89cb(0xe9)]('click', _0x12350d), _0x6b45eb[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x2a3093[_0x4a89cb(0x402)][_0x4a89cb(0x3c2)](_0x4a89cb(0x393))), _0x5def4a['addEventListener'](_0x4a89cb(0x6f4), () => _0x2a3093[_0x4a89cb(0x402)][_0x4a89cb(0x3c2)](_0x4a89cb(0x393))), _0x2188b7['addEventListener'](_0x4a89cb(0x6f4), () => _0xe6f39[_0x4a89cb(0x6f4)]()), _0x414e47['addEventListener'](_0x4a89cb(0x6f4), () => _0xe5cef8[_0x4a89cb(0x6f4)]()), _0xe6f39[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x1858d2 => { const _0xd723b7 = _0x4a89cb, _0x326aa8 = _0x1858d2[_0xd723b7(0x37e)][_0xd723b7(0x10d)][0x0]; if (!_0x326aa8) return; const _0x37b922 = URL[_0xd723b7(0x3a1)](_0x326aa8); _0x2188b7[_0xd723b7(0xab9)][_0xd723b7(0x3ec)] = _0xd723b7(0xac5) + _0x37b922 + '\x27)'; }), _0xe5cef8[_0x4a89cb(0xe9)]('change', _0x129881 => { const _0x1b25d8 = _0x4a89cb; if (_0x1b25d8(0xf1) !== _0x1b25d8(0xf1)) _0x44fc54[_0x1b25d8(0xab9)][_0x1b25d8(0x7b2)] = _0x1b25d8(0x4e3), _0x2e3c2d[_0x1b25d8(0xab9)][_0x1b25d8(0x388)] = _0x1b25d8(0x385), _0xa65b3e[_0x1b25d8(0xab9)][_0x1b25d8(0x9b9)] = _0x1b25d8(0xfc), _0xfde570[_0x1b25d8(0xab9)][_0x1b25d8(0x202)] = 'translateX(-50%)', _0x2b15ba[_0x1b25d8(0xab9)][_0x1b25d8(0x243)] = _0x1b25d8(0xa25); else { const _0x3c712f = _0x129881[_0x1b25d8(0x37e)]['files'][0x0]; if (!_0x3c712f) return; const _0x19a1c0 = URL[_0x1b25d8(0x3a1)](_0x3c712f); _0x414e47['style'][_0x1b25d8(0x3ec)] = 'url(\x27' + _0x19a1c0 + '\x27)'; } }), _0xb96386[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x5ad654[_0x4a89cb(0x6f4)]()), _0x519d95[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x137bb0 = _0x4a89cb; localStorage['removeItem'](_0x137bb0(0x47c)), _0xe1a9f2(), _0x2d1f89(_0x137bb0(0x37d)); }), _0x5ad654['addEventListener'](_0x4a89cb(0x782), async _0x51a06b => { const _0xe45163 = _0x4a89cb; if ('XRpjf' !== 'XRpjf') { const _0x2ca513 = _0x345c61(_0x49178b['participantIds'][0x0]); _0x2883e8[_0xe45163(0x908)] = _0x2ca513 ? _0x2ca513['name'] : _0xe45163(0x5a7); } else { const _0x281964 = _0x51a06b[_0xe45163(0x37e)][_0xe45163(0x10d)][0x0]; if (!_0x281964) return; try { const _0x10038a = await _0x52f5ff(_0x281964); localStorage[_0xe45163(0x25f)](_0xe45163(0x47c), _0x10038a), _0xe1a9f2(), _0x2d1f89('动态页背景已更换！'); } catch (_0x44f4bc) { _0xe45163(0x7b4) === _0xe45163(0x7b4) ? _0x2d1f89(_0xe45163(0x3f1) + _0x44f4bc[_0xe45163(0x420)]) : _0x1d944b[_0xe45163(0x4ff)][_0xe45163(0x9f2)]({ 'senderId': _0xd05828['id'], 'kind': _0xe45163(0x529), 'songName': _0x2b10dd[_0xe45163(0xaa1)], 'artist': _0x11df7c['artist'] }); } } }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x255))['addEventListener'](_0x4a89cb(0x6f4), () => _0x43c005('chat', _0x4a89cb(0x719))), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x8e3))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x314c34); const _0x48d996 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x548)), _0x8d6b67 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7ee)); _0x48d996[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x8d6b67['click']()), _0x8d6b67[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x290de0 => { const _0x3d3a30 = _0x4a89cb; if ('ltITt' !== _0x3d3a30(0x344)) { const _0x25ad0e = _0x290de0[_0x3d3a30(0x37e)]['files'][0x0]; if (!_0x25ad0e) return; const _0x411e88 = URL['createObjectURL'](_0x25ad0e); _0x48d996['src'] = _0x411e88, _0x48d996[_0x3d3a30(0x4b8)] = () => { const _0x1cdd87 = _0x3d3a30; URL[_0x1cdd87(0x705)](_0x411e88); }; } else _0x17934(![]), _0x5736c2[_0x3d3a30(0x5f4)] = ![]; }); const _0x5936dd = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x50d))[_0x4a89cb(0x22a)], _0x131849 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x48b)), _0x5437c3 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x50d)); _0x5936dd['addEventListener'](_0x4a89cb(0x6f4), () => _0x131849[_0x4a89cb(0x6f4)]()), _0x131849[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x8b46f5 => { const _0x45d607 = _0x4a89cb, _0x47ccda = _0x8b46f5[_0x45d607(0x37e)]['files'][0x0]; if (!_0x47ccda) return; const _0x11030a = URL['createObjectURL'](_0x47ccda); document['getElementById'](_0x45d607(0x50d))[_0x45d607(0xab9)][_0x45d607(0x3ec)] = _0x45d607(0xac5) + _0x11030a + '\x27)'; }); const _0x5d5a36 = document['querySelector'](_0x4a89cb(0x551)), _0x47ce43 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x5ea)); _0x5d5a36[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x501675 => { const _0x3e8010 = _0x4a89cb; if ('ZBXkz' !== 'qJEXo') _0x501675[_0x3e8010(0x7a7)](), _0x47ce43['classList']['toggle']('visible'), _0x5d5a36[_0x3e8010(0x402)]['toggle'](_0x3e8010(0x36b)); else { _0x35bd45(_0x3e8010(0x905)); return; } }), _0x47ce43[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x4f20d2), document[_0x4a89cb(0x2fc)]('group-clear-history-button')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x1e4ceb), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x4d7))['addEventListener'](_0x4a89cb(0x6f4), async () => { const _0x3ac13a = _0x4a89cb; if (_0x3ac13a(0x447) !== 'cMjxn') { const _0x5a9b51 = _0x131014(_0x2c909a[_0x3ac13a(0xaf8)] ?? _0x5eb061[_0x3ac13a(0x331)] ?? '')[_0x3ac13a(0x1b5)]() || _0x3ac13a(0xa3a) + (_0x1334e0 || _0x3ac13a(0x990)) + ']'; if (_0x5a9b51) _0x435b16[_0x3ac13a(0x4ff)][_0x3ac13a(0x9f2)]({ 'senderId': _0x2f8e96['id'], 'kind': _0x3ac13a(0x331), 'content': _0x5a9b51 }); } else { const _0x7c79c3 = _0x4cc3e0(); if (!_0x7c79c3 || _0x7c79c3[_0x3ac13a(0x497)] !== _0x3ac13a(0x869)) return; const _0x1d1b7e = await _0x46bf1c(_0x3ac13a(0x77f) + _0x7c79c3['name'] + _0x3ac13a(0x6f2)); if (_0x1d1b7e) { if (_0x3ac13a(0x876) === _0x3ac13a(0x876)) _0x3b2917(_0x7c79c3['id']), _0x2d1f89(_0x3ac13a(0x452)), _0x43c005(_0x3ac13a(0x89b)), _0x282fb7(![]); else { const _0x162bd3 = _0x45258d[_0x3ac13a(0x635)][_0x3ac13a(0x354)](_0x87b2d4 => _0x87b2d4['id'] === _0x4600bd); _0x162bd3 && (_0x162bd3[_0x3ac13a(0x4a8)] = _0x1f1d7e, _0x162bd3[_0x3ac13a(0x482)] = _0x255a6b, _0x162bd3[_0x3ac13a(0xe4)] = _0x4d312f); } } } }); const _0xd12b1d = document[_0x4a89cb(0x9d2)](_0x4a89cb(0x1f9)), _0x4e49ca = document['getElementById'](_0x4a89cb(0x499)); _0xd12b1d[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x3f38bd => { const _0x402b82 = _0x4a89cb; _0x3f38bd['stopPropagation'](), _0x4e49ca['classList'][_0x402b82(0x7fb)](_0x402b82(0x5d8)), _0xd12b1d[_0x402b82(0x402)][_0x402b82(0x7fb)](_0x402b82(0x36b)); }), _0x4e49ca[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0xffe7fb), document[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x5ed068 => { const _0x4117df = _0x4a89cb; !document[_0x4117df(0x9d2)](_0x4117df(0x9f9))[_0x4117df(0x7e6)](_0x5ed068['target']) && ('YFpPC' !== 'YFpPC' ? (_0x4f4302[_0x4117df(0xb05)](_0x4117df(0x47c)), _0xd9a072(), _0x3d1f72(_0x4117df(0x37d))) : (_0x4e49ca[_0x4117df(0x402)][_0x4117df(0x3c2)](_0x4117df(0x5d8)), _0xd12b1d[_0x4117df(0x402)][_0x4117df(0x3c2)]('expanded'))); }), _0x1ce2ff['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x5ccdf8 = _0x4a89cb; _0x5e4b98(), _0x43c005(_0x5ccdf8(0x7fe), _0x5ccdf8(0xa20)); }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1ca))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005('home', 'worldBook')), document['getElementById'](_0x4a89cb(0x391))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x32bddc()), document['getElementById'](_0x4a89cb(0x8ae))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x3ce210 = _0x4a89cb; if ('zNVnB' === 'zNVnB') _0x5e4b98(), _0x43c005(_0x3ce210(0x7fe), _0x3ce210(0x268)); else { const _0x27b187 = _0x51d5c1(_0x2758b1[_0x3ce210(0x1b4)])?.[_0x3ce210(0x4a8)] || '未知'; return _0x3ce210(0x65c) + _0x27b187 + _0x3ce210(0x1f8) + _0x447485['content'] + _0x3ce210(0x94b); } }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x49f))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x239a1e), document[_0x4a89cb(0x2fc)]('delete-world-book-button')['addEventListener'](_0x4a89cb(0x6f4), _0x1447a2), _0xe69685[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005('wallpaper', _0x4a89cb(0xa20))), _0x8ecc00[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005('home', _0x4a89cb(0x76a))), _0x320a7e[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x4e2e04[_0x4a89cb(0x6f4)]()), _0x4e2e04[_0x4a89cb(0xe9)]('change', async _0x25bfb9 => { const _0x24d4c2 = _0x4a89cb; if (_0x24d4c2(0x425) === 'ncLtv') { const _0x123baa = (_0x4f93ec - _0x1fd4b7) / (0x3e8 * 0x3c); _0x4df0ba += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; } else { const _0x4b5dec = _0x25bfb9[_0x24d4c2(0x37e)][_0x24d4c2(0x10d)][0x0]; if (!_0x4b5dec) return; await _0x2909b1(_0x4b5dec); } }), _0xef9ca5[_0x4a89cb(0xe9)]('click', () => { const _0x366f8a = _0x4a89cb; _0x366f8a(0x436) !== _0x366f8a(0xaef) ? (_0x12c63b(), _0x43c005(_0x366f8a(0x89b), 'home')) : _0x3ddbc8[_0x366f8a(0x2fc)](_0x366f8a(0x12d))['style'][_0x366f8a(0x7e1)](_0x366f8a(0x322), _0x366f8a(0x1ea)); }), _0x1b47d7['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x3102be = _0x4a89cb; if ('zJEDz' === _0x3102be(0x457)) _0x45c065[_0x3102be(0x172)](_0x3102be(0x3e1) + _0x385d93); else { _0x388c03(); const _0x3ff730 = (_0x21e37d[_0x3102be(0xa6e)][_0x3102be(0x2c6)] || '')[_0x3102be(0x6f7)](_0x1cb1a3); _0x183100[_0x3102be(0x525)] = _0x3ff730, _0x43c005('settings', 'home'); } }), _0x332354[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005(_0x4a89cb(0xa20), _0x4a89cb(0x34d))), _0x4cc989[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x59594c = _0x4a89cb; _0x5b5749(), _0x43c005(_0x59594c(0xa20), _0x59594c(0x89b)); }), _0x516c62[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { _0x5b5749(), _0x282fb7(![]); }), _0x5e2918[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x40d94b = _0x4a89cb; _0x43c005(_0x40d94b(0x89b), _0x40d94b(0x8e7)); }), _0x35c2ba[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x148fe1 = _0x4a89cb; _0x30de4c[_0x148fe1(0x402)]['add'](_0x148fe1(0x393)); }), _0x174e09[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x460b03()), _0x2534bf[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x4e63bc); function _0x1fc95a(_0x1c9593) { const _0x4bccea = _0x4a89cb; if (_0x4bccea(0x5a5) === _0x4bccea(0x466)) { _0x3c71d6('内容不能为空！'); return; } else { if (!_0x1c9593 || _0x1c9593[_0x4bccea(0x497)] !== _0x4bccea(0x869)) return; const _0x1493f1 = _0x4bccea(0x7cd); document[_0x4bccea(0x6cd)]['insertAdjacentHTML'](_0x4bccea(0x30b), _0x1493f1); const _0x2252a2 = document[_0x4bccea(0x2fc)](_0x4bccea(0x90b)), _0x308e6f = _0x2252a2[_0x4bccea(0x9d2)](_0x4bccea(0x167)), _0x2ff89b = document[_0x4bccea(0x2fc)](_0x4bccea(0x257)), _0x2ef836 = document[_0x4bccea(0x2fc)](_0x4bccea(0x9a7)), _0x125caa = document[_0x4bccea(0x2fc)](_0x4bccea(0x52c)), _0x10bc0e = document[_0x4bccea(0x2fc)]('group-delete'), _0x2cec68 = document[_0x4bccea(0x2fc)](_0x4bccea(0x643)), _0x50bdde = () => _0x2252a2[_0x4bccea(0x3c2)](); _0x2ff89b[_0x4bccea(0xe9)](_0x4bccea(0x6f4), async () => { const _0x24dcf0 = _0x4bccea; _0x50bdde(); const _0x333210 = await _0x46bf1c(_0x24dcf0(0x30d) + _0x1c9593[_0x24dcf0(0x4a8)] + '\x22\x20的聊天记录吗？此操作不可撤销。'); if (_0x333210) { if (_0x24dcf0(0x33d) === _0x24dcf0(0xa18)) _0x748add = _0x8c0d7d['stringify'](_0xbade0), _0x2d193b['log'](_0x24dcf0(0x4f8)); else { if (_0x1c9593['id'] === _0x21e37d[_0x24dcf0(0x272)]) { if (_0x24dcf0(0x8dd) !== _0x24dcf0(0x8dd)) { const _0x1814c8 = _0x187f08[_0x24dcf0(0x2fc)](_0x24dcf0(0x8ce)), _0x456b4b = _0x4e05c9[_0x24dcf0(0x2fc)](_0x24dcf0(0x5a0)); _0x1814c8[_0x24dcf0(0x109)] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x456b4b['innerHTML'] = ''; const _0x3029f4 = _0x1814c8['querySelector']('.snoop-main-grid'), _0x5d9e36 = [{ 'id': _0x24dcf0(0x843), 'name': '聊天', 'svg': _0x24dcf0(0x15f), 'area': _0x24dcf0(0x690) }, { 'id': _0x24dcf0(0xb0f), 'name': _0x24dcf0(0x6d0), 'svg': _0x24dcf0(0x5d9), 'area': _0x24dcf0(0x690) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x24dcf0(0x48a), 'area': 'dock' }, { 'id': _0x24dcf0(0xf3), 'name': '总结', 'svg': _0x24dcf0(0x820), 'area': _0x24dcf0(0x690) }, { 'id': 'fragments', 'name': _0x24dcf0(0x4d4), 'svg': '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'area': _0x24dcf0(0x11e) }, { 'id': _0x24dcf0(0x57f), 'name': '外卖', 'svg': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'area': 'main' }, { 'id': 'wants', 'name': '购物', 'svg': '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'area': _0x24dcf0(0x11e) }, { 'id': _0x24dcf0(0x53e), 'name': '足迹', 'svg': _0x24dcf0(0x8d7), 'area': _0x24dcf0(0x11e) }]; _0x5d9e36[_0x24dcf0(0xb13)](_0x5b1e5a => { const _0x52f7e5 = _0x24dcf0, _0x98a9ab = _0x4a8399['createElement'](_0x52f7e5(0x6b3)); _0x98a9ab[_0x52f7e5(0x175)] = _0x52f7e5(0x900), _0x98a9ab[_0x52f7e5(0x109)] = _0x52f7e5(0x131) + _0x5b1e5a['svg'] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x5b1e5a[_0x52f7e5(0x4a8)] + _0x52f7e5(0xa24), _0x98a9ab['addEventListener']('click', () => _0xd87c2a(_0x5b1e5a['id'], _0x5b1e5a['name'])), _0x5b1e5a['area'] === _0x52f7e5(0x690) ? _0x456b4b['appendChild'](_0x98a9ab) : _0x3029f4[_0x52f7e5(0x30a)](_0x98a9ab); }); } else _0x5b5749(), _0x21e37d[_0x24dcf0(0x31d)] = [], _0x5a0ef9(); } try { localStorage[_0x24dcf0(0xb05)](_0x24dcf0(0xacb) + _0x1c9593['id']), _0x2d1f89(_0x24dcf0(0x69f) + _0x1c9593[_0x24dcf0(0x4a8)] + _0x24dcf0(0x147)); } catch (_0x8f4c5e) { console[_0x24dcf0(0xa12)](_0x24dcf0(0x33e) + _0x1c9593['id'], _0x8f4c5e), _0x2d1f89(_0x24dcf0(0x8eb)); } } } }), _0x2ef836[_0x4bccea(0xe9)]('click', () => { _0x50bdde(), _0x2d1f89('编辑群成员功能正在开发中...'); }), _0x125caa[_0x4bccea(0xe9)](_0x4bccea(0x6f4), async () => { const _0x1169d1 = _0x4bccea; _0x50bdde(); const _0x3fe65a = prompt(_0x1169d1(0x833), _0x1c9593['name']); _0x3fe65a && _0x3fe65a[_0x1169d1(0x1b5)]() && _0x3fe65a !== _0x1c9593[_0x1169d1(0x4a8)] && (_0x1c9593[_0x1169d1(0x4a8)] = _0x3fe65a[_0x1169d1(0x1b5)](), _0x37e4ef(), _0x12c63b(), _0x1d8f68(), _0x2d1f89(_0x1169d1(0x2af) + _0x1c9593[_0x1169d1(0x4a8)] + '\x22。')); }), _0x10bc0e[_0x4bccea(0xe9)]('click', async () => { const _0x4d8aed = _0x4bccea; _0x50bdde(); const _0x2c3a14 = await _0x46bf1c(_0x4d8aed(0x933) + _0x1c9593[_0x4d8aed(0x4a8)] + _0x4d8aed(0x56d)); _0x2c3a14 && (_0x3b2917(_0x1c9593['id']), _0x2d1f89('群聊\x22' + _0x1c9593['name'] + _0x4d8aed(0xa9e)), _0x282fb7(![])); }), _0x308e6f[_0x4bccea(0xe9)](_0x4bccea(0x6f4), _0x50bdde), _0x2cec68[_0x4bccea(0xe9)](_0x4bccea(0x6f4), _0x50bdde); } } _0xd154c4[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x326627 = _0x4a89cb; if ('mqYMZ' !== _0x326627(0x1ee)) { const _0x239eaa = _0x36e5c4[_0x326627(0x53d)]('div'); _0x239eaa['className'] = _0x326627(0x37f), _0x239eaa[_0x326627(0x908)] = _0xd8f50d['content'], _0x5550af[_0x326627(0x30a)](_0x239eaa); } else { const _0x3980cd = _0x4cc3e0(); if (_0x3980cd && _0x3980cd[_0x326627(0x497)] === _0x326627(0x9de)) 'vDZwT' === _0x326627(0x2e7) ? _0x535411[_0x326627(0xb05)](_0x326627(0xacb) + _0x183f33) : _0x737441(_0x3980cd[_0x326627(0xad8)][0x0]); else _0x3980cd && _0x3980cd['type'] === _0x326627(0x869) && _0x495ae3(_0x3980cd['id']); } }), _0xa096b5[_0x4a89cb(0xe9)](_0x4a89cb(0x276), _0x49c9ee => { const _0x5de15b = _0x4a89cb; if (_0x5de15b(0xacf) === _0x5de15b(0x405)) { _0x53c245['error']('错误：第一个好友圈\x20\x22' + _0x458059[_0x5de15b(0x4a8)] + _0x5de15b(0x6e5)); return; } else _0x49c9ee[_0x5de15b(0x70c)] === _0x5de15b(0x60f) && !_0x49c9ee['shiftKey'] && (_0x49c9ee['preventDefault'](), _0x460b03()); }); const _0x50d530 = () => _0x30de4c[_0x4a89cb(0x402)][_0x4a89cb(0x3c2)](_0x4a89cb(0x393)); _0x389e54[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x50d530), _0x32e22f[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x50d530), _0x3c2f0a['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x41a274 = _0x4a89cb; _0x41a274(0x6f6) !== _0x41a274(0x85f) ? (_0x50d530(), _0x737441()) : (_0x2be963(), _0x209e67(_0x41a274(0x264), _0x41a274(0xa20))); }), _0x269f70[_0x4a89cb(0xe9)]('click', () => { _0x50d530(), _0xcd11fc(); }), _0x452d9e['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x57504a = _0x4a89cb; _0x43c005(_0x57504a(0x89b), _0x57504a(0x1db)), _0x282fb7(![]); }), _0x480b8a[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x2f432f), _0x47af0c[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x3a8c82 = _0x4a89cb; _0x22569c[_0x3a8c82(0x402)][_0x3a8c82(0x7fb)](_0x3a8c82(0x393)); if (_0x22569c['classList'][_0x3a8c82(0x7e6)](_0x3a8c82(0x393))) { if (_0x3a8c82(0x882) === _0x3a8c82(0x882)) _0x52e3c1[_0x3a8c82(0x9ce)] = _0x52e3c1[_0x3a8c82(0x28b)]; else { const _0x1bafcf = _0x155acb['id'], _0x4b89a0 = _0x3a8c82(0x88e) + _0x1bafcf, _0x5c862c = _0x5095f2[_0x3a8c82(0x7b7)](_0x4b89a0), _0x3be45e = _0x4f4688[_0x3a8c82(0x9d2)](_0x3a8c82(0x5c6)); if (_0x5c862c) _0x3be45e[_0x3a8c82(0x109)] = _0x3a8c82(0x2cf) + _0x5c862c + _0x3a8c82(0x55f); else { const _0x477f34 = _0x248541[_0x3a8c82(0x9d2)](_0x3a8c82(0x987) + _0x1bafcf + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x1bafcf + _0x3a8c82(0x4a4))?.[_0x3a8c82(0x109)]; _0x477f34 && (_0x3be45e[_0x3a8c82(0x109)] = _0x477f34); } } } }), _0x25240b[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0xfecd2b[_0x4a89cb(0x6f4)]()); const _0x3b4456 = document[_0x4a89cb(0x2fc)]('chat-music-button'); _0xfecd2b[_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x4f8f75), _0x3b4456[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x2f8b88), _0x390a94[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x31a738), _0x20a8ca['addEventListener'](_0x4a89cb(0x6f4), _0x18acc8), _0x4cbcc5[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x20b2aa), _0x1cec63['addEventListener'](_0x4a89cb(0x6f4), _0x1e4ceb), _0x414aef[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), async () => { const _0x1ee33c = _0x4a89cb, _0x21ce6b = _0x324a4a['value']; if (!_0x21ce6b) return; const _0x14ff5e = _0xe97381(_0x21ce6b); if (!_0x14ff5e) return; const _0x48843e = await _0x46bf1c(_0x1ee33c(0xa54) + _0x14ff5e['name'] + '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。'); _0x48843e && (_0x2e3dc0(_0x21ce6b), _0x2d1f89(_0x1ee33c(0x325) + _0x14ff5e[_0x1ee33c(0x4a8)] + _0x1ee33c(0x9cb)), _0x43c005('chat', _0x1ee33c(0x8e7)), _0x282fb7(![])); }), _0x5a59ca[_0x4a89cb(0xe9)](_0x4a89cb(0x978), () => { const _0x42de63 = _0x4a89cb, _0x36a1ea = _0x5a59ca[_0x42de63(0x91b)][_0x42de63(0x1b5)]()[_0x42de63(0x6f7)](_0x1cb1a3); _0x183100[_0x42de63(0x525)] = _0x36a1ea; }); async function _0xca82ca() { const _0x203c36 = _0x4a89cb; if (_0x203c36(0x7bd) === 'xMxzc') { const _0x38699e = _0x5a59ca['value']['trim'](), _0x1317f7 = _0xae2b99[_0x203c36(0x91b)][_0x203c36(0x1b5)](); if (!_0x38699e || !_0x1317f7) { _0x2d1f89('请先输入\x20API\x20接口地址和密钥。'); return; } const _0x3da193 = _0x38699e[_0x203c36(0x8f0)](/\/+$/, ''), _0x1d8cbb = _0x3da193 + '/v1/models'; _0x183100[_0x203c36(0x525)] = !![], _0x183100['textContent'] = _0x203c36(0x25b), _0x3705c6[_0x203c36(0x402)][_0x203c36(0x3c2)](_0x203c36(0x393)); try { const _0x3c0952 = await fetch(_0x1d8cbb, { 'headers': { 'Authorization': 'Bearer\x20' + _0x179ecd(_0x1317f7) } }); if (!_0x3c0952['ok']) throw new Error(_0x203c36(0x319) + _0x3c0952[_0x203c36(0x12a)]); const _0x54ed2d = await _0x3c0952[_0x203c36(0x40c)](), _0x5b7472 = (_0x54ed2d[_0x203c36(0x976)] || _0x54ed2d)[_0x203c36(0x592)](_0x512678 => _0x512678['id'])[_0x203c36(0xa17)](); _0x5b7472[_0x203c36(0x8ab)] > 0x0 ? 'xseeJ' !== _0x203c36(0x845) ? _0x298c4e[_0x203c36(0x908)] = _0x203c36(0x79c) : (_0x3705c6[_0x203c36(0x109)] = '', _0x5b7472['forEach'](_0x4f7a38 => { const _0x137ef2 = _0x203c36, _0x54d566 = document['createElement'](_0x137ef2(0x6b3)); _0x54d566[_0x137ef2(0x908)] = _0x4f7a38, _0x54d566[_0x137ef2(0xe9)](_0x137ef2(0x6f4), () => { const _0x53c6d9 = _0x137ef2; _0x10509f[_0x53c6d9(0x91b)] = _0x4f7a38, _0x3705c6['classList'][_0x53c6d9(0x3c2)](_0x53c6d9(0x393)); }), _0x3705c6[_0x137ef2(0x30a)](_0x54d566); }), _0x3705c6[_0x203c36(0x402)][_0x203c36(0x3ea)](_0x203c36(0x393)), _0x2d1f89('成功获取\x20' + _0x5b7472[_0x203c36(0x8ab)] + _0x203c36(0x647))) : _0x203c36(0x153) === _0x203c36(0x6e4) ? (_0x3805cc[_0x203c36(0x4a8)] = _0x20083d, _0x530e9c['boundUserProfileId'] = _0x323074, _0x216dfc['memberCharacterIds'] = _0x336690) : _0x2d1f89(_0x203c36(0x142)); } catch (_0x44583c) { if (_0x203c36(0x4c4) !== _0x203c36(0x4ae)) _0x2d1f89('获取模型失败:\x20' + _0x44583c[_0x203c36(0x420)] + _0x203c36(0x767)); else { _0x52f72c(_0x203c36(0x2a1) + _0x311143 + _0x203c36(0x118)), _0x3df0fc(() => _0x25f4cf[_0x203c36(0x6a1)](), 0x5dc); return; } } finally { if (_0x203c36(0x9f8) === _0x203c36(0x9f8)) _0x183100[_0x203c36(0x525)] = ![], _0x183100[_0x203c36(0x908)] = '获取'; else { const _0x579a8e = _0x172168['getElementById'](_0x203c36(0x5ea)), _0x3d1a00 = _0x579a8e['querySelectorAll']('input:checked'), _0x4370fd = _0x5a5940[_0x203c36(0x9d2)]('#group-settings-screen\x20.selected-options-text'); if (_0x3d1a00[_0x203c36(0x8ab)] === 0x0) _0x4370fd[_0x203c36(0x908)] = _0x203c36(0x79c); else _0x3d1a00['length'] > 0x2 ? _0x4370fd[_0x203c36(0x908)] = _0x203c36(0x2e0) + _0x3d1a00['length'] + '\x20项' : _0x4370fd[_0x203c36(0x908)] = _0x1e2333[_0x203c36(0xab0)](_0x3d1a00)[_0x203c36(0x592)](_0x1c730e => _0x1c730e[_0x203c36(0x22a)]['textContent']['trim']())[_0x203c36(0x2c2)]('、'); } } } else { const _0x2e0b5c = _0x4d4ddb[_0x203c36(0x2f7)][_0x203c36(0x34e)](_0x46acc5 => _0x46acc5['id'] === _0x20d1db); _0x2e0b5c > -0x1 && (_0x87599f[_0x203c36(0x2f7)]['splice'](_0x2e0b5c, 0x1), _0x227342(), _0x9d02ec()); } } _0x183100[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x11c1a8 => { const _0x138a44 = _0x4a89cb; _0x138a44(0x2a2) !== _0x138a44(0x437) ? (_0x11c1a8[_0x138a44(0x7a7)](), _0xca82ca()) : _0x2ddfb9[_0x138a44(0x402)]['remove']('show'); }), document[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x4dc5c8 => { const _0x35076c = _0x4a89cb; if (_0x35076c(0x64c) === _0x35076c(0x6dc)) { if (_0x1c37aa[_0x35076c(0x8ab)] === 0x0) return; _0x975841 = (_0x398e0a - 0x1 + _0x14ed6c['length']) % _0x217151[_0x35076c(0x8ab)], _0x26a417(_0x590340[_0x22539c], _0x33877e); } else !_0x3705c6[_0x35076c(0x7e6)](_0x4dc5c8['target']) && _0x4dc5c8['target'] !== _0x10509f && _0x4dc5c8[_0x35076c(0x37e)] !== _0x183100 && (_0x35076c(0x557) !== _0x35076c(0x557) ? (_0x17b61a[_0x35076c(0x109)] = '', _0x13905d[_0x35076c(0xb13)](_0x1935d1 => { const _0x5ad3b4 = _0x35076c, _0x39c560 = _0x52a242['createElement'](_0x5ad3b4(0x187)); _0x39c560[_0x5ad3b4(0x9fb)] = _0x1935d1['url'], _0x39c560[_0x5ad3b4(0x22f)] = 'lazy', _0x39c560[_0x5ad3b4(0x50b)] = _0x1935d1[_0x5ad3b4(0x4a8)], _0x39c560[_0x5ad3b4(0x402)][_0x5ad3b4(0x3ea)]('sticker-item'), _0x39c560[_0x5ad3b4(0xe9)](_0x5ad3b4(0x6f4), () => _0x4f31aa(_0x1935d1)), _0x4a681c['appendChild'](_0x39c560); })) : _0x3705c6[_0x35076c(0x402)][_0x35076c(0x3c2)]('show')); }); async function _0x52f5ff(_0x19d11a) { const _0x559a31 = _0x4a89cb; if (_0x559a31(0xa34) !== _0x559a31(0x49a)) return await _0x2210f6(_0x19d11a, 0x190, 0.85); else _0x4c7e95(_0x559a31(0x89b), _0x559a31(0x1db)), _0x196274(![]); } _0x1942f9['addEventListener'](_0x4a89cb(0x6f4), () => _0x352bdc['click']()), _0x352bdc[_0x4a89cb(0xe9)](_0x4a89cb(0x782), async _0x570071 => { const _0x2013d9 = _0x4a89cb, _0x41b0f2 = _0x570071[_0x2013d9(0x37e)][_0x2013d9(0x10d)][0x0]; if (!_0x41b0f2) return; try { const _0x4508b5 = await _0x52f5ff(_0x41b0f2), _0x317eb5 = document[_0x2013d9(0x2fc)]('user-avatar-preview'); _0x317eb5['style'][_0x2013d9(0x3ec)] = 'url(\x27' + _0x4508b5 + '\x27)', _0x317eb5[_0x2013d9(0x977)][_0x2013d9(0x78c)] = _0x4508b5; } catch (_0x14d285) { _0x2d1f89(_0x2013d9(0x3f1) + _0x14d285['message']); } }), _0x42f6e4[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x18aa2a['click']()), _0x18aa2a['addEventListener'](_0x4a89cb(0x782), async _0x1b1b45 => { const _0x273023 = _0x4a89cb; if (_0x273023(0x654) === _0x273023(0x654)) { const _0x5406e3 = _0x1b1b45['target'][_0x273023(0x10d)][0x0]; if (!_0x5406e3) return; try { _0x42f6e4[_0x273023(0x9fb)] = await _0x52f5ff(_0x5406e3); } catch (_0x21e780) { _0x2d1f89(_0x273023(0x3f1) + _0x21e780[_0x273023(0x420)]); } } else { if (_0x1328cd['isArray'](_0x194f8a) && _0x29896f['isArray'](_0x1460a3)) { const _0x441c5b = _0xea0849[_0x273023(0xa37)](_0x3e998c); _0x538bb5 = _0x5e9b67[_0x273023(0x41f)](_0x441c5b), _0xac0ecb[_0x273023(0x172)](_0x273023(0x734)); } else _0x236c17 = _0x42e7f1[_0x273023(0x41f)](_0x4d0fab); } }); function _0x3395e3() { const _0x342cf2 = _0x4a89cb; _0x22569c[_0x342cf2(0x109)] = '', _0x21b45c[_0x342cf2(0xb13)](_0x35bcf0 => { const _0x324118 = _0x342cf2; if (_0x324118(0x5d4) !== _0x324118(0x41a)) { const _0x59cb8b = document[_0x324118(0x53d)]('img'); _0x59cb8b[_0x324118(0x9fb)] = _0x35bcf0[_0x324118(0x677)], _0x59cb8b[_0x324118(0x22f)] = 'lazy', _0x59cb8b[_0x324118(0x50b)] = _0x35bcf0['name'], _0x59cb8b[_0x324118(0x402)][_0x324118(0x3ea)](_0x324118(0x248)), _0x59cb8b[_0x324118(0xe9)]('click', () => _0x193c08(_0x35bcf0)), _0x22569c[_0x324118(0x30a)](_0x59cb8b); } else { const _0x33890f = _0x45fd02['parse'](_0x27f7c7), _0x4db925 = { ..._0x1dd96c }, _0x34055e = { ..._0x4db925, ..._0x33890f }; _0x34055e[_0x324118(0x88a)] = { ..._0x4db925[_0x324118(0x88a)], ..._0x33890f[_0x324118(0x88a)] || {} }, _0x34055e[_0x324118(0xa6e)] = { ..._0x4db925[_0x324118(0xa6e)], ..._0x33890f[_0x324118(0xa6e)] || {} }, _0x5e05b9[_0x324118(0x61c)](_0x4660bf, _0x34055e); } }); } async function _0x12ed49(_0x3217fd) { const _0xfaa0e2 = _0x4a89cb, _0x2b5076 = await _0x46bf1c(_0xfaa0e2(0x15b)); if (!_0x2b5076) return; const _0x3ab7cc = _0x21e37d[_0xfaa0e2(0x206)]['findIndex'](_0x54a783 => _0x54a783['id'] === _0x3217fd); _0x3ab7cc > -0x1 && (_0x21e37d[_0xfaa0e2(0x206)][_0xfaa0e2(0x7d1)](_0x3ab7cc, 0x1), _0x37e4ef(), _0x3729ae(), _0x5c31e8(), _0x4f3194(), _0x2d1f89(_0xfaa0e2(0x8ba))); } let _0x2968e0 = null; function _0x25d7d2(_0x5c9f05) { const _0x3923ae = _0x4a89cb; if (_0x2968e0) clearTimeout(_0x2968e0); const _0x4275c0 = _0x5c9f05[_0x3923ae(0x37e)][_0x3923ae(0xb28)](_0x3923ae(0xae2)); if (!_0x4275c0) return; const _0x5800f6 = _0x4275c0[_0x3923ae(0x977)]['id']; if (!_0x5800f6) return; const _0x222ac9 = () => { _0x2968e0 = setTimeout(() => { const _0x544c70 = _0x1826; if (_0x544c70(0x6a5) !== _0x544c70(0x6a5)) { if (!_0x17069b[_0x544c70(0x684)](_0x1ea1ca) || _0x23d19d['length'] === 0x0) return _0x544c70(0x338); return _0x544c70(0xfd) + _0x17ba46[_0x544c70(0x592)]((_0xd42180, _0x2f4f4b) => { const _0x2c5fad = _0x544c70, _0x1e8993 = _0x25e60f[_0x2c5fad(0x41f)](_0xd42180['log'] || [])[_0x2c5fad(0x8f0)](/'/g, _0x2c5fad(0x576))[_0x2c5fad(0x8f0)](/"/g, _0x2c5fad(0xb29)), _0x38d883 = _0xd42180[_0x2c5fad(0x95b)] || _0x2c5fad(0x121); return _0x2c5fad(0x2be) + (_0x2f4f4b < _0x32e4a4[_0x2c5fad(0x8ab)] - 0x1 ? _0x2c5fad(0x6f3) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x1e8993 + _0x2c5fad(0xa78) + _0x38d883 + _0x2c5fad(0x31a) + _0x15529c + _0x2c5fad(0x914) + _0x38d883['charAt'](0x0) + _0x2c5fad(0x8e9) + _0x38d883 + _0x2c5fad(0x20a) + (_0xd42180['last_message_preview'] || '') + _0x2c5fad(0x1e9); })[_0x544c70(0x2c2)]('') + '</div>'; } else { if (_0x5c9f05[_0x544c70(0x497)] === _0x544c70(0x5d1)) _0x5c9f05['preventDefault'](); _0x12ed49(_0x5800f6); } }, 0x320); }, _0x526927 = () => { if (_0x2968e0) clearTimeout(_0x2968e0); }; document[_0x3923ae(0xe9)](_0x3923ae(0x76b), _0x526927, { 'once': !![] }), document[_0x3923ae(0xe9)]('touchend', _0x526927, { 'once': !![] }), document[_0x3923ae(0xe9)](_0x3923ae(0x3ab), _0x526927, { 'once': !![] }), document[_0x3923ae(0xe9)](_0x3923ae(0x68e), _0x526927, { 'once': !![] }), _0x222ac9(); } function _0x49e80b(_0x527ca3) { const _0x39f290 = _0x4a89cb, _0x2ba283 = _0x21e37d[_0x39f290(0x69a)][_0x39f290(0x354)](_0x4c8ec0 => _0x4c8ec0[_0x39f290(0xad8)][_0x39f290(0x6f7)](_0x527ca3)); if (!_0x2ba283) return ''; const _0x534d9a = _0x3beafd(_0x2ba283['id']), _0x2e1419 = _0x21e37d[_0x39f290(0x206)]['filter'](_0x57fd74 => _0x57fd74[_0x39f290(0x32f)] === _0x534d9a['id'] || !_0x57fd74[_0x39f290(0x32f)]); if (_0x2e1419['length'] === 0x0) return ''; const _0x2e8bf6 = _0x2e1419[_0x39f290(0x592)](_0x332b16 => { const _0x2cf7fb = _0x39f290; if (_0x2cf7fb(0x671) === _0x2cf7fb(0x14a)) { if (_0x3fb684) _0x310536[_0x2cf7fb(0xab9)]['backgroundImage'] = _0x2d9e6d[_0x2cf7fb(0x91b)] ? _0x2cf7fb(0xac5) + _0x3d4bda[_0x2cf7fb(0x91b)] + '\x27)' : ''; } else { const _0x520e47 = _0x332b16['type'] === _0x2cf7fb(0x218) ? _0x2cf7fb(0x566) : '待办'; return _0x2cf7fb(0x8c2) + _0x520e47 + ']\x20' + _0x332b16[_0x2cf7fb(0x377)] + ':\x20' + _0x332b16[_0x2cf7fb(0xaf8)]; } })[_0x39f290(0x2c2)]('\x0a'); return _0x39f290(0x7e7) + _0x534d9a[_0x39f290(0x4a8)] + _0x39f290(0x3c5) + _0x2e8bf6; } let _0x49d52c = { 'currentDate': new Date(), 'selectedDate': _0x3696b4() }; function _0x5f1937() { const _0x43bac3 = _0x4a89cb; if (_0x43bac3(0x72c) !== _0x43bac3(0x72c)) { if (_0x5b3ade) _0x11e6b9(_0x4f126f); const _0x193184 = _0x439b32['target'][_0x43bac3(0xb28)](_0x43bac3(0xae2)); if (!_0x193184) return; const _0x3e28b5 = _0x193184[_0x43bac3(0x977)]['id']; if (!_0x3e28b5) return; const _0x2661c6 = () => { _0x58ef8f = _0x281648(() => { const _0x416c2e = _0x1826; if (_0x155e2f[_0x416c2e(0x497)] === _0x416c2e(0x5d1)) _0x6d6288['preventDefault'](); _0x64859e(_0x3e28b5); }, 0x320); }, _0x3ce4c2 = () => { if (_0x5f940) _0x8a81ed(_0x4c7f51); }; _0x3d5fa4[_0x43bac3(0xe9)]('mouseup', _0x3ce4c2, { 'once': !![] }), _0x20035f[_0x43bac3(0xe9)](_0x43bac3(0x4a3), _0x3ce4c2, { 'once': !![] }), _0x49c903[_0x43bac3(0xe9)](_0x43bac3(0x3ab), _0x3ce4c2, { 'once': !![] }), _0x5ea7d1[_0x43bac3(0xe9)]('touchmove', _0x3ce4c2, { 'once': !![] }), _0x2661c6(); } else { document[_0x43bac3(0x2fc)](_0x43bac3(0x54c))[_0x43bac3(0xe9)]('click', () => { const _0x398aec = _0x43bac3; _0x3729ae(), _0x43c005(_0x398aec(0x1a1), 'home'); }), document[_0x43bac3(0x2fc)]('back-to-home-from-calendar')['addEventListener'](_0x43bac3(0x6f4), () => _0x43c005('home', _0x43bac3(0x1a1))), document[_0x43bac3(0x2fc)](_0x43bac3(0x656))[_0x43bac3(0xe9)](_0x43bac3(0x6f4), () => { const _0x46e475 = _0x43bac3; _0x46e475(0x574) !== _0x46e475(0x574) ? (_0x19f801[_0x46e475(0x272)] = _0xfc8d96[_0x46e475(0x69a)][0x0]?.['id'] || null, _0x222bff(_0x32dfa8[_0x46e475(0x272)])) : (_0x49d52c[_0x46e475(0x5a9)][_0x46e475(0x42e)](_0x49d52c[_0x46e475(0x5a9)][_0x46e475(0x180)]() - 0x1), _0x3729ae()); }), document[_0x43bac3(0x2fc)](_0x43bac3(0x1ff))[_0x43bac3(0xe9)](_0x43bac3(0x6f4), () => { _0x49d52c['currentDate']['setMonth'](_0x49d52c['currentDate']['getMonth']() + 0x1), _0x3729ae(); }), document['getElementById'](_0x43bac3(0xab1))[_0x43bac3(0xe9)](_0x43bac3(0x6f4), () => { const _0x4a12f0 = _0x43bac3; _0x49d52c[_0x4a12f0(0x5a9)] = new Date(), _0x49d52c[_0x4a12f0(0x61d)] = _0x3696b4(), _0x3729ae(); }), document[_0x43bac3(0x2fc)](_0x43bac3(0x51d))['addEventListener'](_0x43bac3(0x6f4), () => { const _0x3a9f30 = _0x43bac3; _0x32401e(_0x49d52c[_0x3a9f30(0x61d)]); }), document[_0x43bac3(0x2fc)](_0x43bac3(0x883))[_0x43bac3(0xe9)]('click', _0x57a579), document['getElementById'](_0x43bac3(0x4dd))[_0x43bac3(0xe9)](_0x43bac3(0x6f4), () => document[_0x43bac3(0x2fc)](_0x43bac3(0x37c))[_0x43bac3(0x402)][_0x43bac3(0x3c2)]('show')), document[_0x43bac3(0x2fc)](_0x43bac3(0x913))[_0x43bac3(0xe9)](_0x43bac3(0x6f4), () => document[_0x43bac3(0x2fc)](_0x43bac3(0x37c))[_0x43bac3(0x402)]['remove'](_0x43bac3(0x393))); const _0x386907 = document[_0x43bac3(0x2fc)](_0x43bac3(0x7ba)); _0x386907[_0x43bac3(0xe9)](_0x43bac3(0x281), _0x25d7d2), _0x386907[_0x43bac3(0xe9)](_0x43bac3(0x5d1), _0x25d7d2, { 'passive': ![] }); } } function _0x3729ae() { const _0x6068ad = _0x4a89cb, _0x4e0170 = _0x49d52c[_0x6068ad(0x5a9)][_0x6068ad(0x71a)](), _0x520710 = _0x49d52c['currentDate'][_0x6068ad(0x180)](); document['getElementById'](_0x6068ad(0x604))['textContent'] = _0x4e0170 + '年\x20' + (_0x520710 + 0x1) + '月', _0x5257cf(_0x4e0170, _0x520710), _0x509792(_0x49d52c[_0x6068ad(0x61d)]); } function _0x4f3194() { const _0x4c4003 = _0x4a89cb; if (_0x4c4003(0x3bd) === _0x4c4003(0x9e1)) _0x3ee783[_0x4c4003(0x109)] = _0x4c4003(0x1e7); else { const _0x5e7205 = document[_0x4c4003(0x2fc)](_0x4c4003(0x1d0)); if (!_0x5e7205) return; const _0x314f09 = _0x3696b4(), _0x4cc6bf = _0x21e37d['calendarEvents'][_0x4c4003(0x4b7)](_0x1b2aea => _0x1b2aea['date'] === _0x314f09 && _0x1b2aea['type'] === _0x4c4003(0x65a)); _0x5e7205[_0x4c4003(0x109)] = ''; if (_0x4cc6bf[_0x4c4003(0x8ab)] > 0x0) { if ('JJViF' !== 'bxiMq') _0x4cc6bf[_0x4c4003(0xb13)](_0x117d7b => { const _0x56610b = _0x4c4003, _0x5368ca = document[_0x56610b(0x53d)](_0x56610b(0x6b3)); _0x5368ca[_0x56610b(0x175)] = _0x56610b(0x37f), _0x5368ca['textContent'] = _0x117d7b['content'], _0x5e7205['appendChild'](_0x5368ca); }); else { if (_0x502a43[_0x4c4003(0x497)] === _0x4c4003(0x5d1)) _0x210a7b[_0x4c4003(0x6bc)](); _0x500147(_0x25366b); } } else _0x4c4003(0xa44) === _0x4c4003(0xa44) ? _0x5e7205[_0x4c4003(0x109)] = _0x4c4003(0x1e7) : _0x17e117(_0x469f40, _0x4c4003(0x8f1)); } } function _0x5257cf(_0x5b1ad5, _0x1823f4) { const _0xab7373 = _0x4a89cb, _0x33fdd8 = document[_0xab7373(0x2fc)](_0xab7373(0x282)); _0x33fdd8[_0xab7373(0x109)] = ''; const _0x2fb412 = new Date(_0x5b1ad5, _0x1823f4, 0x1)[_0xab7373(0x759)](), _0x1e71e6 = new Date(_0x5b1ad5, _0x1823f4 + 0x1, 0x0)[_0xab7373(0x1c4)](), _0x2690f7 = _0x3696b4(); for (let _0x424893 = 0x0; _0x424893 < _0x2fb412; _0x424893++) { if (_0xab7373(0x33c) !== _0xab7373(0x924)) _0x33fdd8[_0xab7373(0x30a)](document[_0xab7373(0x53d)]('div')); else { const _0x201317 = _0x52dc12[_0xab7373(0x130)](_0x253f5c, 'readwrite'), _0x4ea649 = _0x201317[_0xab7373(0x50c)](_0x13f17a), _0xd381a3 = _0x4ea649[_0xab7373(0x259)](_0x594e41); _0xd381a3[_0xab7373(0x854)] = () => _0x416661(), _0xd381a3[_0xab7373(0x4ef)] = () => _0x4a5ebe(_0xd381a3[_0xab7373(0xa12)]); } } for (let _0x11615e = 0x1; _0x11615e <= _0x1e71e6; _0x11615e++) { const _0x334327 = document[_0xab7373(0x53d)](_0xab7373(0x6b3)); _0x334327[_0xab7373(0x175)] = _0xab7373(0x96f); const _0x39ff94 = _0x5b1ad5 + '-' + String(_0x1823f4 + 0x1)[_0xab7373(0x1df)](0x2, '0') + '-' + String(_0x11615e)[_0xab7373(0x1df)](0x2, '0'); if (_0x39ff94 === _0x2690f7) _0x334327[_0xab7373(0x402)]['add']('is-today'); if (_0x39ff94 === _0x49d52c[_0xab7373(0x61d)]) _0x334327['classList'][_0xab7373(0x3ea)](_0xab7373(0x1d2)); const _0x1b3f95 = document[_0xab7373(0x53d)](_0xab7373(0xa4f)); _0x1b3f95[_0xab7373(0x175)] = _0xab7373(0x756), _0x1b3f95[_0xab7373(0x908)] = _0x11615e, _0x334327[_0xab7373(0x30a)](_0x1b3f95); const _0x3a41d5 = _0x21e37d[_0xab7373(0x206)][_0xab7373(0x4b7)](_0x443777 => _0x443777[_0xab7373(0x377)] === _0x39ff94); if (_0x3a41d5[_0xab7373(0x8ab)] > 0x0) { const _0x39a35b = document['createElement'](_0xab7373(0x6b3)); _0x39a35b[_0xab7373(0x175)] = _0xab7373(0x9ff), _0x334327[_0xab7373(0x30a)](_0x39a35b); } _0x334327['addEventListener'](_0xab7373(0x6f4), () => { const _0x488877 = _0xab7373; 'olIWA' === _0x488877(0xaca) ? (_0x49d52c[_0x488877(0x61d)] = _0x39ff94, _0x3729ae()) : (_0x1c573d[_0x488877(0x908)] = _0x18e3ff[_0x488877(0x50b)], _0x4a63d6[_0x488877(0x908)] = _0xba38f0['artist'], _0x2217d8[_0x488877(0x402)][_0x488877(0x3ea)](_0x488877(0xafd)), _0x20e3b2[_0x488877(0xab9)][_0x488877(0x7e1)](_0x488877(0x9b3), _0x488877(0x713) + _0x5d2220[_0x488877(0x145)] + ')')); }), _0x33fdd8['appendChild'](_0x334327); } } function _0x509792(_0xf23634) { const _0x1d32d9 = _0x4a89cb, _0x50420a = document[_0x1d32d9(0x2fc)](_0x1d32d9(0x7ba)), _0x38302e = document[_0x1d32d9(0x2fc)](_0x1d32d9(0x64a)); _0x50420a['innerHTML'] = ''; const _0x11e2e1 = new Date(_0xf23634 + 'T00:00:00'); _0x38302e['textContent'] = _0x11e2e1[_0x1d32d9(0x180)]() + 0x1 + '月' + _0x11e2e1[_0x1d32d9(0x1c4)]() + '日'; const _0x40b364 = _0x21e37d[_0x1d32d9(0x206)][_0x1d32d9(0x4b7)](_0x4c65a8 => _0x4c65a8['date'] === _0xf23634); if (_0x40b364[_0x1d32d9(0x8ab)] === 0x0) { if (_0x1d32d9(0x29b) === _0x1d32d9(0x217)) _0xd44082['removeItem']('chatHistory_' + _0x2d71bf['id']), _0x2f9e45(_0x1d32d9(0x69f) + _0x503ec5[_0x1d32d9(0x4a8)] + '\x22\x20的聊天记录已清空。'); else { _0x50420a[_0x1d32d9(0x109)] = _0x1d32d9(0x94d); return; } } _0x40b364[_0x1d32d9(0xb13)](_0x3f14ed => { const _0x3f18cd = _0x1d32d9; if (_0x3f18cd(0x329) === 'nGqsN') _0x5c3c1d = _0x57043f['participantIds'][0x0]; else { const _0x279e2e = document[_0x3f18cd(0x53d)](_0x3f18cd(0x6b3)); _0x279e2e[_0x3f18cd(0x175)] = _0x3f14ed[_0x3f18cd(0x497)] === _0x3f18cd(0x218) ? _0x3f18cd(0xa96) : _0x3f18cd(0x1c1), _0x279e2e[_0x3f18cd(0x908)] = _0x3f14ed[_0x3f18cd(0xaf8)], _0x279e2e[_0x3f18cd(0x977)]['id'] = _0x3f14ed['id'], _0x50420a[_0x3f18cd(0x30a)](_0x279e2e); } }); } function _0x32401e(_0xa3e829) { const _0x146f7d = _0x4a89cb; document[_0x146f7d(0x2fc)](_0x146f7d(0x1e5))[_0x146f7d(0x908)] = '为\x20' + _0xa3e829 + _0x146f7d(0x8dc), document[_0x146f7d(0x2fc)](_0x146f7d(0x505))[_0x146f7d(0x91b)] = '', document[_0x146f7d(0x2fc)]('event-type-todo')[_0x146f7d(0x21e)] = !![], document[_0x146f7d(0x2fc)](_0x146f7d(0x37c))[_0x146f7d(0x402)][_0x146f7d(0x3ea)](_0x146f7d(0x393)), document['getElementById']('event-content-input')['focus'](); } function _0x57a579() { const _0x513257 = _0x4a89cb; if (_0x513257(0x489) === 'abnkW') _0x59ce2f[_0x513257(0x402)][_0x513257(0x3c2)](_0x513257(0x940), _0x513257(0x30c)), _0x10834a[_0x513257(0x402)]['remove']('is-entering-from-left'), _0x51a79b[_0x513257(0x7d7)] = _0x1aa453, _0x1312a7(), _0x271ae0[_0x513257(0x594)] = ![]; else { const _0x57a413 = document[_0x513257(0x2fc)]('event-content-input')[_0x513257(0x91b)][_0x513257(0x1b5)](), _0x50634a = document['querySelector'](_0x513257(0x5f1))['value']; if (!_0x57a413) { _0x2d1f89(_0x513257(0x43d)); return; } const _0x4a26a8 = _0x21e37d[_0x513257(0x63b)][_0x513257(0x354)](_0x8d440a => _0x8d440a['id'] === _0x21e37d['activeUserProfileId']); if (!_0x4a26a8) { if ('xSdLQ' !== 'xSdLQ') { if (!_0x158cfb) return ''; const _0x3676a5 = new _0x12202c(_0x580122), _0x3f36ff = _0x353e37(_0x3676a5[_0x513257(0x97b)]())[_0x513257(0x1df)](0x2, '0'), _0x3fee15 = _0x478b79(_0x3676a5[_0x513257(0x4d6)]())[_0x513257(0x1df)](0x2, '0'); return _0x3f36ff + ':' + _0x3fee15; } else { _0x2d1f89(_0x513257(0x22b)); return; } } _0x21e37d[_0x513257(0x206)][_0x513257(0x9f2)]({ 'id': 'event_' + Date[_0x513257(0x300)](), 'date': _0x49d52c[_0x513257(0x61d)], 'type': _0x50634a, 'content': _0x57a413, 'userId': _0x4a26a8['id'] }), _0x37e4ef(), _0x3729ae(), _0x5c31e8(), _0x4f3194(), document[_0x513257(0x2fc)](_0x513257(0x37c))[_0x513257(0x402)][_0x513257(0x3c2)](_0x513257(0x393)); } } function _0x5c31e8() { const _0x1595d5 = _0x4a89cb; if ('kLkaP' === _0x1595d5(0x8f2)) { const _0x2535c6 = document['getElementById'](_0x1595d5(0x98d)), _0x327559 = document[_0x1595d5(0x2fc)](_0x1595d5(0x521)), _0x4430fa = new Date(); _0x4430fa[_0x1595d5(0x7ef)](0x0, 0x0, 0x0, 0x0); const _0x482795 = _0x21e37d[_0x1595d5(0x206)][_0x1595d5(0x4b7)](_0x2f1fa8 => _0x2f1fa8[_0x1595d5(0x497)] === _0x1595d5(0x218) && new Date(_0x2f1fa8[_0x1595d5(0x377)] + _0x1595d5(0xac9)) >= _0x4430fa)[_0x1595d5(0xa17)]((_0x44091a, _0x27f2ee) => new Date(_0x44091a[_0x1595d5(0x377)]) - new Date(_0x27f2ee['date'])); if (_0x482795['length'] > 0x0) { const _0x24415a = _0x482795[0x0], _0x4e67d7 = new Date(_0x24415a[_0x1595d5(0x377)] + _0x1595d5(0xac9)), _0xce190a = _0x4e67d7 - _0x4430fa, _0x271ca4 = Math[_0x1595d5(0x157)](_0xce190a / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2535c6[_0x1595d5(0x908)] = _0x1595d5(0x879) + _0x24415a[_0x1595d5(0xaf8)] + '」', _0x327559['innerHTML'] = _0x1595d5(0x60e) + _0x271ca4 + _0x1595d5(0x21f); } else _0x2535c6[_0x1595d5(0x908)] = _0x1595d5(0x572), _0x327559['innerHTML'] = _0x1595d5(0x375); } else _0x2e805b[_0x1595d5(0x402)][_0x1595d5(0x3c2)](_0x1595d5(0x393)); } function _0x2479e7() { const _0x55ab43 = _0x4a89cb, _0x3bf9c0 = document[_0x55ab43(0x2fc)](_0x55ab43(0x70a)); _0x3bf9c0['innerHTML'] = ''; if (_0x21e37d['userProfiles'][_0x55ab43(0x8ab)] === 0x0) { _0x3bf9c0[_0x55ab43(0x109)] = _0x55ab43(0x1fa); return; } _0x21e37d[_0x55ab43(0x63b)][_0x55ab43(0xb13)](_0x78e34a => { const _0x56d689 = _0x55ab43, _0x5cba18 = document[_0x56d689(0x53d)](_0x56d689(0x6b3)); _0x5cba18[_0x56d689(0x175)] = _0x56d689(0x23c), _0x5cba18[_0x56d689(0x977)]['id'] = _0x78e34a['id']; const _0x423924 = _0x78e34a['id'] === _0x21e37d[_0x56d689(0x514)] ? _0x56d689(0x948) : ''; _0x5cba18[_0x56d689(0x109)] = _0x56d689(0x397) + (_0x78e34a[_0x56d689(0x496)] || _0x3cf6e1) + _0x56d689(0x88c) + _0x78e34a['name'] + _0x423924 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x78e34a[_0x56d689(0x87d)]['substring'](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x5cba18[_0x56d689(0xe9)](_0x56d689(0x6f4), () => _0x2b047b(_0x78e34a['id'])), _0x3bf9c0['appendChild'](_0x5cba18); }); } function _0x2b047b(_0x2bc7af = null) { const _0x28a7e6 = _0x4a89cb; _0x43c005(_0x28a7e6(0x87b), _0x28a7e6(0x264)); const _0x387120 = document[_0x28a7e6(0x2fc)](_0x28a7e6(0x7a9)), _0x35afda = document[_0x28a7e6(0x2fc)](_0x28a7e6(0x5bd)); _0x35afda[_0x28a7e6(0xab9)][_0x28a7e6(0x3ec)] = '', delete _0x35afda[_0x28a7e6(0x977)]['newAvatar']; if (_0x2bc7af) { const _0x3bf95c = _0x21e37d[_0x28a7e6(0x63b)][_0x28a7e6(0x354)](_0x3b700e => _0x3b700e['id'] === _0x2bc7af); if (!_0x3bf95c) return; document[_0x28a7e6(0x2fc)]('editing-user-id')[_0x28a7e6(0x91b)] = _0x3bf95c['id'], document[_0x28a7e6(0x2fc)](_0x28a7e6(0x45c))[_0x28a7e6(0x908)] = _0x28a7e6(0x490), document[_0x28a7e6(0x2fc)](_0x28a7e6(0x164))[_0x28a7e6(0x91b)] = _0x3bf95c[_0x28a7e6(0x4a8)], _0x3bf95c['avatar'] ? _0x28a7e6(0xaa7) !== 'VMDoo' ? _0x35afda[_0x28a7e6(0xab9)]['backgroundImage'] = _0x28a7e6(0xac5) + _0x3bf95c[_0x28a7e6(0x496)] + '\x27)' : _0x2480a[_0x28a7e6(0xaa9)] = _0xa52142 : _0x35afda[_0x28a7e6(0xab9)][_0x28a7e6(0x3ec)] = _0x28a7e6(0xac5) + _0x3cf6e1 + '\x27)', document[_0x28a7e6(0x2fc)](_0x28a7e6(0x9d9))[_0x28a7e6(0x91b)] = _0x3bf95c[_0x28a7e6(0x87d)], _0x387120[_0x28a7e6(0xab9)][_0x28a7e6(0x243)] = _0x3bf95c['id'] === _0x21e37d[_0x28a7e6(0x514)] ? 'none' : _0x28a7e6(0xa25), document[_0x28a7e6(0x2fc)]('delete-user-profile-button')[_0x28a7e6(0xab9)][_0x28a7e6(0x243)] = _0x28a7e6(0xa25); } else document[_0x28a7e6(0x2fc)](_0x28a7e6(0x203))[_0x28a7e6(0x91b)] = '', document[_0x28a7e6(0x2fc)](_0x28a7e6(0x45c))[_0x28a7e6(0x908)] = _0x28a7e6(0x204), document[_0x28a7e6(0x2fc)](_0x28a7e6(0x164))['value'] = _0x28a7e6(0x4db) + (_0x21e37d[_0x28a7e6(0x63b)][_0x28a7e6(0x8ab)] + 0x1), _0x35afda[_0x28a7e6(0xab9)][_0x28a7e6(0x3ec)] = _0x28a7e6(0xac5) + _0x3cf6e1 + '\x27)', document[_0x28a7e6(0x2fc)]('user-persona')['value'] = '', _0x387120[_0x28a7e6(0xab9)]['display'] = 'none', document[_0x28a7e6(0x2fc)](_0x28a7e6(0x837))[_0x28a7e6(0xab9)]['display'] = _0x28a7e6(0x1ea); } function _0x18acc8() { const _0x2c2dc6 = _0x4a89cb, _0x2e72ea = document[_0x2c2dc6(0x2fc)](_0x2c2dc6(0x203))[_0x2c2dc6(0x91b)], _0x5033fd = document[_0x2c2dc6(0x2fc)](_0x2c2dc6(0x5bd)), _0x46c7d8 = { 'name': document[_0x2c2dc6(0x2fc)](_0x2c2dc6(0x164))[_0x2c2dc6(0x91b)]['trim'](), 'persona': document[_0x2c2dc6(0x2fc)](_0x2c2dc6(0x9d9))['value']['trim'](), 'avatar': _0x21e37d['userProfiles'][_0x2c2dc6(0x354)](_0x4796e1 => _0x4796e1['id'] === _0x2e72ea)?.[_0x2c2dc6(0x496)] || _0x5033fd[_0x2c2dc6(0xab9)][_0x2c2dc6(0x3ec)][_0x2c2dc6(0x6de)](0x5, -0x2)[_0x2c2dc6(0x8f0)](/'/g, '') || _0x3cf6e1 }; if (_0x5033fd[_0x2c2dc6(0x977)]['newAvatar']) { if (_0x2c2dc6(0x91e) === 'lFwFt') _0x46c7d8[_0x2c2dc6(0x496)] = _0x5033fd[_0x2c2dc6(0x977)][_0x2c2dc6(0x78c)], delete _0x5033fd[_0x2c2dc6(0x977)][_0x2c2dc6(0x78c)]; else { const _0x2d049a = _0x2faa2c[_0x2c2dc6(0x70c)](_0x30506f); _0x2d049a && _0x2d049a[_0x2c2dc6(0x835)](_0x2c2dc6(0x418)) && _0x3feae1[_0x2c2dc6(0x9f2)](_0x2d049a); } } if (!_0x46c7d8[_0x2c2dc6(0x4a8)]) { _0x2d1f89(_0x2c2dc6(0x6a0)); return; } if (_0x2e72ea) { if (_0x2c2dc6(0x4c6) !== 'TxfiC') _0x559b05(_0x2eaa93), _0x38fdb8['value'] = '', _0x11ad35(_0x161f2f, 0x64); else { const _0x143db5 = _0x21e37d[_0x2c2dc6(0x63b)][_0x2c2dc6(0x354)](_0x5f4a26 => _0x5f4a26['id'] === _0x2e72ea); if (_0x143db5) Object[_0x2c2dc6(0x61c)](_0x143db5, _0x46c7d8); } } else { const _0x493dfc = { 'id': _0x2c2dc6(0x99f) + Date['now'](), ..._0x46c7d8 }; _0x21e37d['userProfiles'][_0x2c2dc6(0x9f2)](_0x493dfc), !_0x21e37d[_0x2c2dc6(0x514)] && (_0x2c2dc6(0x58c) !== _0x2c2dc6(0x58c) ? (_0x4a568d[_0x359412][_0x2c2dc6(0x402)][_0x2c2dc6(0x3c2)](_0x2c2dc6(0xa92)), _0x20508b[_0x5984cc][_0x2c2dc6(0x91b)] = '') : _0x21e37d[_0x2c2dc6(0x514)] = _0x493dfc['id']); } _0x37e4ef(), _0x2d1f89(_0x2c2dc6(0x290)), _0x2479e7(), _0x43c005(_0x2c2dc6(0x264), _0x2c2dc6(0x87b)); } async function _0x1e1d10() { const _0x271afb = _0x4a89cb; if (_0x271afb(0x549) !== 'cfnIw') _0x459e5f[_0x271afb(0x584)] = _0x4409ab[_0x271afb(0x584)][_0x271afb(0x4b7)](_0x52d9ec => _0x52d9ec['id'] !== _0x385836), _0x5ddd4f[_0x271afb(0x32d)]['forEach'](_0x4c56b3 => { const _0x3dfd0e = _0x271afb; _0x4c56b3['linkedWorldBookIds'] && (_0x4c56b3[_0x3dfd0e(0x12e)] = _0x4c56b3['linkedWorldBookIds']['filter'](_0x77dd58 => _0x77dd58 !== _0x11763f)); }), _0x409f1b(), _0x2c1793(_0x271afb(0x71d)), _0x45692e(), _0x33bd34(_0x271afb(0x7fe), 'worldBookEditor'); else { const _0xb414b6 = document[_0x271afb(0x2fc)](_0x271afb(0x203))[_0x271afb(0x91b)]; if (!_0xb414b6) return; if (_0x21e37d['userProfiles'][_0x271afb(0x8ab)] <= 0x1) { _0x2d1f89(_0x271afb(0x7e3)); return; } const _0x2414fe = await _0x46bf1c(_0x271afb(0xa1b)); if (_0x2414fe) { if (_0x271afb(0xa59) !== 'POcVz') { _0x21e37d['userProfiles'] = _0x21e37d[_0x271afb(0x63b)][_0x271afb(0x4b7)](_0x82d35a => _0x82d35a['id'] !== _0xb414b6); if (_0x21e37d[_0x271afb(0x514)] === _0xb414b6) { if ('lKgnT' === _0x271afb(0x4fd)) { const _0x2830f8 = _0x134b2a[_0x271afb(0x8e6)][_0x271afb(0x4b7)](_0x53dbca => _0x53dbca['type'] === _0x271afb(0x529) && _0x53dbca['playableUrl'])[_0x271afb(0x592)](_0x515a4a => ({ ..._0x515a4a, 'source': _0x271afb(0x49c) })); _0x30b2c7[_0x271afb(0x9f2)](..._0x2830f8); } else _0x21e37d['activeUserProfileId'] = _0x21e37d[_0x271afb(0x63b)][0x0]['id']; } _0x21e37d[_0x271afb(0x69a)][_0x271afb(0xb13)](_0x5dce8f => { const _0x9a0080 = _0x271afb; _0x5dce8f[_0x9a0080(0x482)] === _0xb414b6 && (_0x5dce8f[_0x9a0080(0x482)] = _0x21e37d[_0x9a0080(0x514)]); }), _0x37e4ef(), _0x2d1f89(_0x271afb(0x622)), _0x2479e7(), _0x43c005('userProfileList', _0x271afb(0x87b)); } else _0x2c3bc1[_0x271afb(0xa12)]('加载卡片图片失败', _0x53c9d2); } } } function _0x5e4b98() { const _0x38ccd8 = _0x4a89cb, _0x327f03 = document[_0x38ccd8(0x2fc)]('world-book-list-container'); _0x327f03[_0x38ccd8(0x109)] = ''; if (_0x21e37d[_0x38ccd8(0x584)][_0x38ccd8(0x8ab)] === 0x0) { _0x327f03['innerHTML'] = _0x38ccd8(0x963); return; } _0x21e37d[_0x38ccd8(0x584)][_0x38ccd8(0xb13)](_0x4bb2f6 => { const _0x58aab0 = _0x38ccd8, _0x112c7f = document[_0x58aab0(0x53d)](_0x58aab0(0x6b3)); _0x112c7f[_0x58aab0(0x175)] = _0x58aab0(0x23c), _0x112c7f[_0x58aab0(0x977)]['id'] = _0x4bb2f6['id'], _0x112c7f[_0x58aab0(0x109)] = _0x58aab0(0x4c7) + _0x4bb2f6[_0x58aab0(0x4a8)] + _0x58aab0(0x56c) + _0x4bb2f6[_0x58aab0(0xaf8)][_0x58aab0(0x7c5)](0x0, 0x64) + _0x58aab0(0x83e), _0x112c7f[_0x58aab0(0xe9)]('click', () => _0x32bddc(_0x4bb2f6['id'])), _0x327f03[_0x58aab0(0x30a)](_0x112c7f); }); } function _0x32bddc(_0x151a56 = null) { const _0x121f4f = _0x4a89cb; if ('tDWZe' !== _0x121f4f(0x72e)) { _0x43c005(_0x121f4f(0x268), 'worldBook'); if (_0x151a56) { if (_0x121f4f(0x2f3) === _0x121f4f(0x211)) try { const _0x28f0ea = _0x38ef1b[_0x121f4f(0x16b)](_0x548e60); _0x2d823e[_0x121f4f(0x684)](_0x28f0ea) && (_0x2d51a1[_0x121f4f(0x91b)] = _0x28f0ea['map'](_0x2dbd65 => _0x2dbd65['name'] + '--' + _0x2dbd65[_0x121f4f(0x677)])[_0x121f4f(0x2c2)]('\x0a')); } catch (_0x46c15f) { } else { const _0x18a170 = _0x21e37d['worldBooks'][_0x121f4f(0x354)](_0x2dd3c0 => _0x2dd3c0['id'] === _0x151a56); if (!_0x18a170) return; document[_0x121f4f(0x2fc)](_0x121f4f(0x4b3))['value'] = _0x18a170['id'], document[_0x121f4f(0x2fc)](_0x121f4f(0xae4))[_0x121f4f(0x908)] = _0x121f4f(0xa5f), document['getElementById']('world-book-edit-name')['value'] = _0x18a170[_0x121f4f(0x4a8)], document[_0x121f4f(0x2fc)](_0x121f4f(0x231))[_0x121f4f(0x91b)] = _0x18a170[_0x121f4f(0xaf8)]; } } else 'AHdtG' === 'AHdtG' ? (document[_0x121f4f(0x2fc)](_0x121f4f(0x4b3))[_0x121f4f(0x91b)] = '', document[_0x121f4f(0x2fc)](_0x121f4f(0xae4))['textContent'] = _0x121f4f(0x95f), document[_0x121f4f(0x2fc)](_0x121f4f(0x1fc))['value'] = '', document[_0x121f4f(0x2fc)](_0x121f4f(0x231))[_0x121f4f(0x91b)] = '') : (_0x16446d[_0x121f4f(0xa12)](_0x121f4f(0x81b), _0x4de2fb, _0x121f4f(0x2e4), _0x328751), _0x9434d2[_0x121f4f(0x31d)]['push']({ 'role': 'assistant', 'senderId': _0x327fb3['id'], 'timestamp': _0x764ff9[_0x121f4f(0x300)](), 'isOffline': !![], 'content': _0x121f4f(0x3e2) + _0x2a272e + ']' })); } else { const _0x4f920a = _0x2055b3[_0x121f4f(0x32d)][_0x121f4f(0x354)](_0x33bb65 => _0x33bb65['id'] === _0x2f8ef9); _0x5dccad[_0x121f4f(0x91b)] = _0x4f920a[_0x121f4f(0x66b)] || '', _0x1a3dc7[_0x121f4f(0x91b)] = _0x4f920a[_0x121f4f(0x890)] || ''; if (_0x198221) _0x52fddd[_0x121f4f(0xab9)][_0x121f4f(0x3ec)] = _0x4f920a[_0x121f4f(0x66b)] ? _0x121f4f(0xac5) + _0x4f920a[_0x121f4f(0x66b)] + '\x27)' : ''; } } function _0x239a1e() { const _0xbd874 = _0x4a89cb; if ('dCnaa' === _0xbd874(0x6f1)) { const _0x42f8f9 = document[_0xbd874(0x2fc)](_0xbd874(0x4b3))[_0xbd874(0x91b)], _0x5a6871 = document['getElementById'](_0xbd874(0x1fc))[_0xbd874(0x91b)][_0xbd874(0x1b5)](), _0x1fc408 = document[_0xbd874(0x2fc)](_0xbd874(0x231))[_0xbd874(0x91b)][_0xbd874(0x1b5)](); if (!_0x5a6871 || !_0x1fc408) { _0x2d1f89(_0xbd874(0x550)); return; } if (_0x42f8f9) { if (_0xbd874(0x4ba) !== _0xbd874(0x4ba)) { const _0x4529da = _0x3b6817[_0xbd874(0x2dd)]((_0x5318c0 - _0x286108) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2a843d += _0xbd874(0xa09) + _0x4529da + _0xbd874(0x501); } else { const _0x4c1826 = _0x21e37d[_0xbd874(0x584)][_0xbd874(0x354)](_0x54058e => _0x54058e['id'] === _0x42f8f9); _0x4c1826 && (_0x4c1826[_0xbd874(0x4a8)] = _0x5a6871, _0x4c1826['content'] = _0x1fc408); } } else { const _0x1c66c0 = { 'id': _0xbd874(0x43b) + Date['now'](), 'name': _0x5a6871, 'content': _0x1fc408 }; _0x21e37d[_0xbd874(0x584)][_0xbd874(0x9f2)](_0x1c66c0); } _0x37e4ef(), _0x2d1f89(_0xbd874(0x379)), _0x5e4b98(), _0x43c005(_0xbd874(0x7fe), _0xbd874(0x268)); } else _0x15dcbc[_0xbd874(0xaa9)] = _0x1b4de8, _0x388ca7 = !![]; } async function _0x1447a2() { const _0x3c0a46 = _0x4a89cb, _0x221d3a = document[_0x3c0a46(0x2fc)](_0x3c0a46(0x4b3))[_0x3c0a46(0x91b)]; if (!_0x221d3a) return; const _0x10e5a4 = await _0x46bf1c(_0x3c0a46(0x875)); _0x10e5a4 && (_0x21e37d['worldBooks'] = _0x21e37d['worldBooks'][_0x3c0a46(0x4b7)](_0xa4d1b3 => _0xa4d1b3['id'] !== _0x221d3a), _0x21e37d[_0x3c0a46(0x32d)]['forEach'](_0x34c7f4 => { const _0x2f33fe = _0x3c0a46; _0x34c7f4[_0x2f33fe(0x12e)] && (_0x34c7f4[_0x2f33fe(0x12e)] = _0x34c7f4['linkedWorldBookIds'][_0x2f33fe(0x4b7)](_0x1cec2e => _0x1cec2e !== _0x221d3a)); }), _0x37e4ef(), _0x2d1f89('条目已删除。'), _0x5e4b98(), _0x43c005(_0x3c0a46(0x7fe), _0x3c0a46(0x268))); } function _0xffe7fb() { const _0x2bb745 = _0x4a89cb; if (_0x2bb745(0x207) !== _0x2bb745(0x207)) _0x13eaac('有\x20' + _0x269120 + _0x2bb745(0x993)); else { const _0x50c9a8 = document['getElementById'](_0x2bb745(0x499)), _0x2fe4ec = _0x50c9a8[_0x2bb745(0x4ee)](_0x2bb745(0x481)), _0x133bf7 = document[_0x2bb745(0x9d2)](_0x2bb745(0x3cc)); if (_0x2fe4ec[_0x2bb745(0x8ab)] === 0x0) { if ('oEAUz' !== _0x2bb745(0xaab)) { if (_0x26ef16 < 0x0 || _0x51a18b >= _0x6a7993) return; _0x1f238a['style'][_0x2bb745(0x202)] = _0x2bb745(0x362) + _0x2e2fc9 * (0x64 / _0x23be5e) + '%)', _0x4978f1[_0x2bb745(0xb13)](_0x34a4b8 => _0x34a4b8['classList'][_0x2bb745(0x3c2)](_0x2bb745(0x911))), _0x1e6b55[_0x36e1fd]['classList'][_0x2bb745(0x3ea)](_0x2bb745(0x911)), _0x4097a3 = _0x40f739, _0x1d778b === 0x0 ? _0x5d8d17[_0x2bb745(0xab9)][_0x2bb745(0x243)] = _0x2bb745(0x1ea) : _0x275e8e[_0x2bb745(0xab9)][_0x2bb745(0x243)] = _0x2bb745(0x293); } else _0x133bf7[_0x2bb745(0x908)] = _0x2bb745(0x79c); } else { if (_0x2fe4ec[_0x2bb745(0x8ab)] > 0x2) { if ('yBMHH' !== 'DaTbW') _0x133bf7[_0x2bb745(0x908)] = _0x2bb745(0x2e0) + _0x2fe4ec['length'] + '\x20项'; else return ''; } else _0x133bf7[_0x2bb745(0x908)] = Array['from'](_0x2fe4ec)['map'](_0x522361 => _0x522361[_0x2bb745(0x22a)][_0x2bb745(0x908)]['trim']())[_0x2bb745(0x2c2)]('、'); } } } async function _0x495ae3(_0x1af94a) { const _0x4cd6f7 = _0x4a89cb, _0x4e4702 = _0x21e37d[_0x4cd6f7(0x69a)][_0x4cd6f7(0x354)](_0x27d773 => _0x27d773['id'] === _0x1af94a); if (!_0x4e4702 || _0x4e4702[_0x4cd6f7(0x497)] !== _0x4cd6f7(0x869)) return; document[_0x4cd6f7(0x2fc)](_0x4cd6f7(0x17e))[_0x4cd6f7(0x91b)] = _0x4e4702[_0x4cd6f7(0x4a8)] || '', _0x42e2f6('group-settings-bind-user'), document[_0x4cd6f7(0x2fc)](_0x4cd6f7(0xaec))['value'] = _0x4e4702[_0x4cd6f7(0x482)] || _0x21e37d[_0x4cd6f7(0x514)]; const _0x1f208a = document[_0x4cd6f7(0x2fc)](_0x4cd6f7(0x5ea)); _0x1f208a['innerHTML'] = '', _0x21e37d[_0x4cd6f7(0x584)][_0x4cd6f7(0xb13)](_0x2b5471 => { const _0x4edd44 = _0x4cd6f7, _0x48f3bd = _0x4e4702['linkedWorldBookIds']?.[_0x4edd44(0x6f7)](_0x2b5471['id']), _0x23a7bc = document[_0x4edd44(0x53d)](_0x4edd44(0x314)); _0x23a7bc[_0x4edd44(0x109)] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x2b5471['id'] + '\x22\x20' + (_0x48f3bd ? _0x4edd44(0x21e) : '') + '>\x20' + _0x2b5471[_0x4edd44(0x4a8)], _0x1f208a[_0x4edd44(0x30a)](_0x23a7bc); }), _0x4f20d2(); const _0x2b8fa9 = document[_0x4cd6f7(0x2fc)](_0x4cd6f7(0x548)), _0xdd5d10 = document[_0x4cd6f7(0x2fc)](_0x4cd6f7(0x50d)); _0xdd5d10['style'][_0x4cd6f7(0x3ec)] = '', _0x3bbeae(_0x4cd6f7(0x534) + _0x1af94a)[_0x4cd6f7(0x8c0)](_0x179878 => { const _0x4d29a5 = _0x4cd6f7; _0x2b8fa9[_0x4d29a5(0x9fb)] = _0x179878 ? URL['createObjectURL'](_0x179878) : _0x30019f; }), _0x3bbeae(_0x4cd6f7(0x42f) + _0x1af94a)[_0x4cd6f7(0x8c0)](_0x579ce4 => { const _0x3bb550 = _0x4cd6f7; if (_0x3bb550(0x367) === 'bffMM') { if (_0x579ce4) _0xdd5d10[_0x3bb550(0xab9)][_0x3bb550(0x3ec)] = _0x3bb550(0xac5) + URL[_0x3bb550(0x3a1)](_0x579ce4) + '\x27)'; } else return _0x2daf8f(_0x5ae69e)[_0x3bb550(0x8c0)](_0x21e839 => _0x21e839[_0x3bb550(0xad4)]()); }), _0x43c005(_0x4cd6f7(0x719), _0x4cd6f7(0x89b)); } async function _0x314c34() { const _0x19da7b = _0x4a89cb; if (_0x19da7b(0xa9f) === _0x19da7b(0xa13)) { if (_0x18ebe1) _0x209536(_0x1e71f1); _0x3f7e01 = null, _0x868aa4['activeMeetingScriptQueue'] = [], _0x46f6c4['activeMeetingCharId'] = null, _0x151527[_0x19da7b(0x2fc)](_0x19da7b(0x81f))['style'][_0x19da7b(0x243)] = _0x19da7b(0x1ea), _0x21ec58[_0x19da7b(0x272)] = null, _0x40f009(), _0x4103cd(_0x19da7b(0x855), _0x19da7b(0x5ce)); } else { const _0x1a9328 = _0x4cc3e0(); if (!_0x1a9328 || _0x1a9328[_0x19da7b(0x497)] !== _0x19da7b(0x869)) return; const _0x4e5e29 = document[_0x19da7b(0x2fc)](_0x19da7b(0x17e))[_0x19da7b(0x91b)][_0x19da7b(0x1b5)](); if (!_0x4e5e29) { if (_0x19da7b(0x42a) === _0x19da7b(0x42a)) { _0x2d1f89(_0x19da7b(0xa97)); return; } else { const _0x56779b = _0xef018['transaction'](_0x551436, _0x19da7b(0x99b)), _0x207b44 = _0x56779b[_0x19da7b(0x50c)](_0xbdb196), _0x51beb7 = _0x207b44[_0x19da7b(0x3fa)](_0x2a202b); _0x51beb7[_0x19da7b(0x854)] = () => _0x3f2ccf(_0x51beb7['result']), _0x51beb7[_0x19da7b(0x4ef)] = () => _0x5c8d6e(_0x51beb7['error']); } } _0x1a9328['name'] = _0x4e5e29; const _0x59e0da = document[_0x19da7b(0x4ee)](_0x19da7b(0x364)); _0x1a9328[_0x19da7b(0x12e)] = Array['from'](_0x59e0da)[_0x19da7b(0x592)](_0x4b069e => _0x4b069e[_0x19da7b(0x91b)]), _0x1a9328['boundUserProfileId'] = document[_0x19da7b(0x2fc)](_0x19da7b(0xaec))[_0x19da7b(0x91b)]; const _0x47d2c6 = document[_0x19da7b(0x2fc)](_0x19da7b(0x7ee))['files'][0x0], _0x8c1e2a = document[_0x19da7b(0x2fc)](_0x19da7b(0x48b))[_0x19da7b(0x10d)][0x0]; if (_0x47d2c6) await _0x24ce6b(_0x19da7b(0x534) + _0x1a9328['id'], _0x47d2c6); if (_0x8c1e2a) await _0x24ce6b(_0x19da7b(0x42f) + _0x1a9328['id'], _0x8c1e2a); _0x37e4ef(), _0x1d8f68(), await _0x12c63b(), _0x2d1f89('群聊设置已保存！'), _0x43c005('chat', _0x19da7b(0x719)); } } function _0x4f20d2() { const _0x1a5892 = _0x4a89cb; if (_0x1a5892(0x80e) !== _0x1a5892(0x67f)) { const _0x5414a3 = document[_0x1a5892(0x2fc)]('group-world-book-checkboxes'), _0x4dc06e = _0x5414a3[_0x1a5892(0x4ee)](_0x1a5892(0x481)), _0x1bad3a = document[_0x1a5892(0x9d2)](_0x1a5892(0x3df)); if (_0x4dc06e[_0x1a5892(0x8ab)] === 0x0) _0x1bad3a[_0x1a5892(0x908)] = _0x1a5892(0x79c); else _0x4dc06e[_0x1a5892(0x8ab)] > 0x2 ? _0x1bad3a['textContent'] = _0x1a5892(0x2e0) + _0x4dc06e[_0x1a5892(0x8ab)] + '\x20项' : _0x1bad3a['textContent'] = Array[_0x1a5892(0xab0)](_0x4dc06e)[_0x1a5892(0x592)](_0x34cf83 => _0x34cf83['parentElement'][_0x1a5892(0x908)][_0x1a5892(0x1b5)]())['join']('、'); } else { const _0x441c1a = _0x3b36ab[_0x1a5892(0x9d2)]('.screen.active'); if (_0x441c1a && (_0x441c1a['id'] === 'meeting-view-screen' || _0x441c1a['id'] === 'chat-screen')) _0x4f9e4b(); else { const _0x5c1163 = _0x2120b5['querySelectorAll'](_0x1a5892(0x5c7)); _0x5c1163[_0x1a5892(0xb13)](_0x372225 => _0x372225['remove']()); } } } async function _0x3c6f1a() { const _0x3cb358 = _0x4a89cb; if (_0x3cb358(0xa88) !== _0x3cb358(0x468)) { const _0x4ebcee = _0x4cc3e0(), _0x2d8451 = (_0x4ebcee?.['participantIds'] || [])[_0x3cb358(0x592)](_0xe97381)[_0x3cb358(0x4b7)](Boolean), _0x35db36 = _0x3beafd(_0x4ebcee['id']); if (!_0x4ebcee || _0x4ebcee['type'] !== _0x3cb358(0x869) || _0x2d8451[_0x3cb358(0x8ab)] < 0x2) return null; const _0xa34d4f = _0x4ebcee['linkedWorldBookIds'] && _0x4ebcee[_0x3cb358(0x12e)][_0x3cb358(0x8ab)] > 0x0 ? '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a' + _0x4ebcee[_0x3cb358(0x12e)][_0x3cb358(0x592)](_0x169812 => _0x21e37d[_0x3cb358(0x584)][_0x3cb358(0x354)](_0x489f87 => _0x489f87['id'] === _0x169812))[_0x3cb358(0x4b7)](Boolean)['map'](_0x439c6b => _0x3cb358(0x73e) + _0x439c6b[_0x3cb358(0x4a8)] + '\x0a' + _0x439c6b[_0x3cb358(0xaf8)])[_0x3cb358(0x2c2)]('') : '', _0x382c16 = _0x35db36[_0x3cb358(0x87d)] ? _0x3cb358(0x4f9) + _0x35db36['name'] + _0x3cb358(0x239) + _0x35db36['persona'] : ''; let _0xd9600e = ''; const _0x1ebe18 = new Date(), _0xc058f8 = _0x21e37d[_0x3cb358(0x31d)]['at'](-0x1); _0xd9600e += _0x3cb358(0xa90) + _0x1ebe18[_0x3cb358(0x926)]('zh-CN', { 'dateStyle': _0x3cb358(0x959), 'timeStyle': _0x3cb358(0x79f) }); if (_0xc058f8) { const _0x11762c = new Date(_0xc058f8[_0x3cb358(0x6cc)]), _0x443c97 = Math[_0x3cb358(0x124)]((_0x1ebe18 - _0x11762c) / (0x3e8 * 0x3c)); if (_0x443c97 < 0x5) _0xd9600e += _0x3cb358(0x99d); else { if (_0x443c97 < 0x78) _0xd9600e += _0x3cb358(0x6c3) + _0x443c97 + '分钟前聊过，请注意衔接。'; else { const _0x484e2a = Math['floor'](_0x443c97 / 0x3c); if (_0x484e2a < 0x30) _0xd9600e += _0x3cb358(0x6c3) + _0x484e2a + _0x3cb358(0x280); else _0xd9600e += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x3cb358(0x124)](_0x484e2a / 0x18) + _0x3cb358(0x589); } } } else _0xd9600e += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; const _0x25e6dc = [..._0x21e37d[_0x3cb358(0x31d)]]['reverse']()['find'](_0x491369 => _0x491369[_0x3cb358(0x568)] === _0x3cb358(0x1a8))?.[_0x3cb358(0xaf8)] || '', _0x323b0d = _0x331e7b(_0x4ebcee, _0x25e6dc), _0x509866 = _0x21e37d[_0x3cb358(0x31d)]['slice'](-0x78), _0x19a2da = _0x21b45c['map'](_0x278976 => _0x278976[_0x3cb358(0x4a8)]), _0x141160 = _0x1c7188(), _0x444ad2 = _0x2d8451[_0x3cb358(0x592)](_0x9e3c13 => { const _0x380f77 = _0x3cb358, { omniText: _0x386acd } = _0x434953(_0x9e3c13['id'], _0x4ebcee['id']), _0x5095ba = _0x345da9(_0x9e3c13['id']), _0xc2ad34 = _0x9e3c13['linkedWorldBookIds'] && _0x9e3c13[_0x380f77(0x12e)][_0x380f77(0x8ab)] > 0x0 ? _0x380f77(0x6ba) + _0x9e3c13[_0x380f77(0x4a8)] + _0x380f77(0x7f1) + _0x9e3c13[_0x380f77(0x12e)]['map'](_0x4d3a2c => _0x21e37d['worldBooks']['find'](_0x5f28fd => _0x5f28fd['id'] === _0x4d3a2c))[_0x380f77(0x4b7)](Boolean)[_0x380f77(0x592)](_0x1d3eef => _0x380f77(0xabd) + _0x1d3eef[_0x380f77(0x4a8)] + '\x0a' + _0x1d3eef['content'])[_0x380f77(0x2c2)]('') : ''; let _0x3fb57f = _0x380f77(0x21c) + _0x9e3c13['name'] + ')\x20的专属时间锚点\x0a'; const _0x286420 = _0x218a8c(_0x9e3c13['id']), _0x21fed8 = new Date(); if (_0x286420) { if (_0x380f77(0x877) === 'KnyTK') { _0x2acb0b[_0x380f77(0x908)] = _0x380f77(0x4ed); return; } else { const _0x1823ca = new Date(_0x286420[_0x380f77(0x6cc)]); _0x3fb57f += _0x380f77(0xade) + _0x35db36[_0x380f77(0x4a8)] + '在所有地方的最后一次互动是在**:\x20' + _0x2d7f7e(_0x1823ca) + '\x0a'; } } else _0x3fb57f += _0x380f77(0x23f) + _0x35db36[_0x380f77(0x4a8)] + '的第一次互动。\x0a'; return { 'id': _0x9e3c13['id'], 'name': _0x9e3c13['name'], 'persona': _0x9e3c13['persona'] || _0x380f77(0x8cc), 'memory': _0x386acd + _0x5095ba + _0xc2ad34 + _0x3fb57f }; }), _0xe6d568 = 0x5, _0xea8e8f = 0xc, _0x1986cb = _0x3cb358(0x749)[_0x3cb358(0x1b5)](), _0x22f353 = { 'instruction': (_0x3cb358(0x9d8) + (_0x4ebcee[_0x3cb358(0x4a8)] || '群聊') + _0x3cb358(0x1b6) + (_0x35db36[_0x3cb358(0x4a8)] || '用户') + _0x3cb358(0x709) + _0xe6d568 + _0x3cb358(0x48d) + _0xea8e8f + _0x3cb358(0x2a7) + (_0x35db36[_0x3cb358(0x4a8)] || '用户') + '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a' + _0xd9600e + '\x20\x0a' + _0x382c16 + '\x0a' + _0xa34d4f + _0x3cb358(0x287) + _0x141160 + '\x0a')[_0x3cb358(0x1b5)](), 'personas': _0x444ad2, 'mentioned': _0x323b0d ? { 'id': _0x323b0d['id'], 'name': _0x323b0d[_0x3cb358(0x4a8)] } : null, 'stickerList': _0x19a2da }, _0x18569e = { 'type': _0x3cb358(0x76e), 'properties': { 'events': { 'type': 'array', 'items': { 'type': _0x3cb358(0x76e), 'required': [_0x3cb358(0x1e4), 'kind'], 'properties': { 'senderId': { 'type': _0x3cb358(0x9b5) }, 'kind': { 'type': _0x3cb358(0x9b5), 'enum': [_0x3cb358(0x331), _0x3cb358(0x210), _0x3cb358(0x529)] }, 'content': { 'type': 'string' }, 'sticker': { 'type': _0x3cb358(0x9b5) }, 'songName': { 'type': _0x3cb358(0x9b5) }, 'artist': { 'type': _0x3cb358(0x9b5) } } } } }, 'required': [_0x3cb358(0x4ff)] }, _0x56b678 = [{ 'role': _0x3cb358(0x707), 'content': _0x1986cb }]; for (const _0x4f5d01 of _0x509866) { const _0x45ee3f = _0x4f5d01['role'] === 'ai' || _0x4f5d01['role'] === _0x3cb358(0x31e) ? 'assistant' : _0x3cb358(0x1a8); let _0x3ea20f = { 'role': _0x45ee3f, 'content': _0x4f5d01['content'] }, _0x1aae3a = !!_0x4f5d01[_0x3cb358(0xaf8)], _0x4b64c1 = null; if (_0x4f5d01['image']) _0x4b64c1 = _0x4f5d01[_0x3cb358(0xaa9)]; else { if (_0x4f5d01['imageId']) try { if (_0x3cb358(0x753) === 'PLqNK') { const _0xa2f4ba = await _0x3bbeae(_0x4f5d01[_0x3cb358(0x803)]); if (_0xa2f4ba) _0x4b64c1 = await _0x425503(_0xa2f4ba); } else { const _0x608c15 = _0x52c6ca[_0x3cb358(0xaf8)] ? '\x20' + _0x3781c4[_0x3cb358(0xaf8)] : ''; _0x4b4256[_0x3cb358(0x9f2)]('[' + _0x153e79(_0x5cc89f) + _0x3cb358(0x6e0) + _0x608c15); } } catch (_0x3b8972) { _0x3cb358(0x9d5) !== 'NSwbU' ? _0x1c8269[_0x3cb358(0xa12)]('Error\x20fetching\x20from\x20' + _0x3aae5c + ':', _0x2fdae3) : console[_0x3cb358(0xa12)](_0x3cb358(0x3e9), _0x3b8972); } } _0x4b64c1 && (_0x3ea20f[_0x3cb358(0xaa9)] = _0x4b64c1, _0x1aae3a = !![]); if (_0x1aae3a) _0x56b678[_0x3cb358(0x9f2)](_0x3ea20f); } _0x56b678[_0x3cb358(0x9f2)]({ 'role': 'user', 'content': _0x3cb358(0x2cd) + JSON[_0x3cb358(0x41f)](_0x18569e) + _0x3cb358(0x90d) + JSON[_0x3cb358(0x41f)](_0x22f353) }); try { if ('VUIhU' === 'rIbDP') _0x29f8f[_0x3cb358(0xa12)](_0x3cb358(0x542), _0x507777), _0x2dd7da(_0x3cb358(0xa9c) + _0xe399ec[_0x3cb358(0x420)]); else { const _0x557e4e = await _0xa3cec0(_0x56b678, { 'json': !![] }); if (!_0x557e4e) return null; let _0x593d19 = _0x557e4e[_0x3cb358(0x1b5)](); const _0x2636fa = _0x593d19[_0x3cb358(0x63a)](/```json([\s\S]*?)```/i); if (_0x2636fa) _0x593d19 = _0x2636fa[0x1][_0x3cb358(0x1b5)](); _0x593d19 = _0x4f84b9(_0x593d19); let _0x4e5e24 = null; try { _0x4e5e24 = JSON[_0x3cb358(0x16b)](_0x593d19); } catch (_0x1da7c6) { _0x3cb358(0x791) !== _0x3cb358(0x644) ? (console[_0x3cb358(0xa12)](_0x3cb358(0x786), _0x1da7c6), console['error'](_0x3cb358(0x5e0), _0x593d19)) : _0x491fd4['accountingData']['push'](..._0x2c609f['originalExpenses']); } if (!_0x4e5e24 || !Array['isArray'](_0x4e5e24['events'])) return null; return _0x4e5e24 = _0x2fe6c1(_0x4e5e24, _0x2d8451, _0x19a2da), _0x4e5e24['events'] = _0x4e5e24['events'][_0x3cb358(0x6de)](0x0, _0xea8e8f), _0x4e5e24[_0x3cb358(0x4ff)][_0x3cb358(0x8ab)] ? _0x4e5e24 : null; } } catch (_0x366ec0) { if (_0x3cb358(0x55a) !== _0x3cb358(0x232)) return _0x366ec0[_0x3cb358(0x4a8)] !== _0x3cb358(0xa1d) && console[_0x3cb358(0xa12)](_0x3cb358(0x5c9), _0x366ec0), null; else { const _0x37d35b = _0x4ee481[_0x3cb358(0x37e)][_0x3cb358(0x10d)][0x0]; if (!_0x37d35b) return; try { const _0x267ab3 = _0x1c9f4d['createObjectURL'](_0x37d35b); _0x493219[_0x3cb358(0xab9)][_0x3cb358(0x3ec)] = _0x3cb358(0xac5) + _0x267ab3 + '\x27)'; } catch (_0x1768ee) { _0x19b76b(_0x3cb358(0x301) + _0x1768ee['message']); } } } } else { _0x327aab = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x2e1e80 in _0x3f1cf8) { _0x4d981c[_0x2e1e80][_0x3cb358(0x402)][_0x3cb358(0x3c2)](_0x3cb358(0xa92)), _0x2b4125[_0x2e1e80][_0x3cb358(0x91b)] = ''; } _0x1ab6a5[_0x3cb358(0x413)]['querySelector'](_0x3cb358(0x8bc))[_0x3cb358(0x908)] = _0x3cb358(0xf7), _0x381d73[_0x3cb358(0x145)]['querySelector'](_0x3cb358(0x8bc))[_0x3cb358(0x908)] = _0x3cb358(0x923), _0x654b45[_0x3cb358(0x747)][_0x3cb358(0x9d2)](_0x3cb358(0x8bc))[_0x3cb358(0x908)] = _0x3cb358(0xa1c), _0x578f7b[_0x3cb358(0x8b5)][_0x3cb358(0x9d2)](_0x3cb358(0x8bc))[_0x3cb358(0x908)] = _0x3cb358(0x72a), _0x552e00(); } } function _0x3bbad8() { const _0x541251 = _0x4a89cb; if (_0x541251(0xae3) !== _0x541251(0xae3)) _0x506b95[_0x541251(0xa12)](_0x541251(0x7ce) + _0x23a7a2['id'], _0xde5317); else { const _0x4d293f = document[_0x541251(0x2fc)](_0x541251(0x4cd)); _0x4d293f[_0x541251(0x109)] = ''; if (_0x21e37d[_0x541251(0x635)][_0x541251(0x8ab)] === 0x0) { _0x4d293f[_0x541251(0x109)] = _0x541251(0x77c); return; } _0x21e37d[_0x541251(0x635)]['forEach'](_0x52e656 => { const _0x31c649 = _0x541251; if (_0x31c649(0x244) !== _0x31c649(0x244)) _0x1ea7a6[_0x31c649(0x4a8)] !== _0x31c649(0xa1d) && (_0xbec26f[_0x31c649(0xa12)](_0x31c649(0x19c), _0x18ce7a), _0x12df88({ 'role': 'assistant', 'content': _0x31c649(0x3f1) + _0x42b8ce[_0x31c649(0x420)] }, _0x2feed8[_0x31c649(0x31d)][_0x31c649(0x8ab)] - 0x1)); else { const _0x425003 = _0x21e37d[_0x31c649(0x63b)][_0x31c649(0x354)](_0x217f90 => _0x217f90['id'] === _0x52e656[_0x31c649(0x482)]) || { 'name': _0x31c649(0x5e8) }, _0x3fcd95 = document[_0x31c649(0x53d)]('div'); _0x3fcd95[_0x31c649(0x175)] = _0x31c649(0x23c), _0x3fcd95[_0x31c649(0x977)]['id'] = _0x52e656['id'], _0x3fcd95['innerHTML'] = _0x31c649(0x4c7) + _0x52e656[_0x31c649(0x4a8)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x425003[_0x31c649(0x4a8)] + _0x31c649(0x532) + _0x52e656[_0x31c649(0xe4)][_0x31c649(0x8ab)] + _0x31c649(0xad5), _0x3fcd95[_0x31c649(0xe9)](_0x31c649(0x6f4), () => _0x35ae81(_0x52e656['id'])), _0x4d293f['appendChild'](_0x3fcd95); } }); } } function _0xabb997(_0x26ca85 = null) { const _0x386f10 = _0x4a89cb, _0xa25ced = document[_0x386f10(0x2fc)]('friend-circle-edit-name'), _0x2f5eeb = document['getElementById'](_0x386f10(0x939)), _0x97569a = document[_0x386f10(0x2fc)](_0x386f10(0x711)), _0xe7c125 = document['getElementById']('friend-circle-edit-title'), _0xa22be5 = document['getElementById']('editing-friend-circle-id'), _0xfde9cc = document[_0x386f10(0x2fc)]('delete-friend-circle-button'); _0x42e2f6('friend-circle-edit-bind-user'), _0x97569a[_0x386f10(0x109)] = '', _0x21e37d[_0x386f10(0x32d)][_0x386f10(0xb13)](_0x1565f7 => { const _0x23eec8 = _0x386f10, _0x40729b = document[_0x23eec8(0x53d)](_0x23eec8(0x6b3)); _0x40729b[_0x23eec8(0x175)] = 'member-selection-item', _0x40729b['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-' + _0x1565f7['id'] + _0x23eec8(0x336) + _0x1565f7['id'] + _0x23eec8(0x841) + (_0x1565f7[_0x23eec8(0x496)] || _0x30019f) + _0x23eec8(0x152) + _0x1565f7['id'] + _0x23eec8(0x825) + _0x1565f7['name'] + _0x23eec8(0x1ad), _0x97569a[_0x23eec8(0x30a)](_0x40729b); }); if (_0x26ca85) { if (_0x386f10(0x11a) !== _0x386f10(0x11a)) _0x1917ed(), _0x3b0a68('userProfileList', _0x386f10(0x87b)); else { const _0x2cbf9e = _0x21e37d['friendCircles'][_0x386f10(0x354)](_0x2d70f2 => _0x2d70f2['id'] === _0x26ca85); if (!_0x2cbf9e) return; _0xe7c125[_0x386f10(0x908)] = _0x386f10(0x3d0), _0xa22be5['value'] = _0x2cbf9e['id'], _0xa25ced['value'] = _0x2cbf9e[_0x386f10(0x4a8)], _0x2f5eeb[_0x386f10(0x91b)] = _0x2cbf9e['boundUserProfileId'], _0xfde9cc[_0x386f10(0xab9)][_0x386f10(0x243)] = _0x386f10(0xa25), _0x2cbf9e[_0x386f10(0xe4)][_0x386f10(0xb13)](_0x18c1c6 => { const _0x57ec37 = _0x386f10; if (_0x57ec37(0x454) === _0x57ec37(0x454)) { const _0x5a080e = _0x97569a[_0x57ec37(0x9d2)](_0x57ec37(0x4f1) + _0x18c1c6); if (_0x5a080e) _0x5a080e[_0x57ec37(0x21e)] = !![]; } else _0x16f001 += _0x57ec37(0x1f0); }); } } else _0xe7c125[_0x386f10(0x908)] = _0x386f10(0x545), _0xa22be5['value'] = '', _0xa25ced[_0x386f10(0x91b)] = _0x386f10(0x9c7) + (_0x21e37d['friendCircles']['length'] + 0x1), _0x2f5eeb[_0x386f10(0x91b)] = _0x21e37d['activeUserProfileId'], _0xfde9cc[_0x386f10(0xab9)][_0x386f10(0x243)] = _0x386f10(0x1ea); _0x43c005(_0x386f10(0x2c8), _0x386f10(0x937)); } function _0x4ab812() { const _0x4f5cbd = _0x4a89cb, _0x5b7ccc = document[_0x4f5cbd(0x2fc)](_0x4f5cbd(0x1a5))['value'], _0xe05995 = document[_0x4f5cbd(0x2fc)](_0x4f5cbd(0xa05))['value'][_0x4f5cbd(0x1b5)](), _0x106ac3 = document[_0x4f5cbd(0x2fc)](_0x4f5cbd(0x939))['value'], _0x422f72 = Array[_0x4f5cbd(0xab0)](document[_0x4f5cbd(0x4ee)](_0x4f5cbd(0x4a0)))[_0x4f5cbd(0x592)](_0x5c3ff9 => _0x5c3ff9['dataset']['id']); if (!_0xe05995) { if (_0x4f5cbd(0x1ef) !== _0x4f5cbd(0x5a4)) { _0x2d1f89(_0x4f5cbd(0x7b1)); return; } else { const _0xe2bbda = []; if (_0x29e077[_0x4f5cbd(0xaf8)]) _0xe2bbda[_0x4f5cbd(0x9f2)]({ 'text': _0x2f4e91[_0x4f5cbd(0xaf8)] }); if (_0x35858e[_0x4f5cbd(0xaa9)]) { const _0x24b8c3 = _0x5d4b66[_0x4f5cbd(0xaa9)]['split'](',')[0x1], _0x12b78b = _0x2bfd5d[_0x4f5cbd(0xaa9)][_0x4f5cbd(0x7c5)](_0x164c87[_0x4f5cbd(0xaa9)][_0x4f5cbd(0x2f9)](':') + 0x1, _0x57e9b5['image']['indexOf'](';')) || _0x4f5cbd(0x3b5); _0xe2bbda['push']({ 'inline_data': { 'mime_type': _0x12b78b, 'data': _0x24b8c3 } }); } return _0xe2bbda; } } if (_0x422f72['length'] === 0x0) { if ('Cahfw' !== 'MAiNC') { _0x2d1f89(_0x4f5cbd(0x2a6)); return; } else { _0x21f0e2[_0x4f5cbd(0x91b)] = _0x4f5cbd(0x44a); return; } } if (_0x5b7ccc) { const _0x42be86 = _0x21e37d[_0x4f5cbd(0x635)][_0x4f5cbd(0x354)](_0x95073a => _0x95073a['id'] === _0x5b7ccc); _0x42be86 && (_0x42be86['name'] = _0xe05995, _0x42be86[_0x4f5cbd(0x482)] = _0x106ac3, _0x42be86[_0x4f5cbd(0xe4)] = _0x422f72); } else { const _0x96fb4 = { 'id': _0x4f5cbd(0x2d1) + Date[_0x4f5cbd(0x300)](), 'name': _0xe05995, 'boundUserProfileId': _0x106ac3, 'memberCharacterIds': _0x422f72, 'posts': [] }; _0x21e37d[_0x4f5cbd(0x635)]['push'](_0x96fb4); } _0x37e4ef(), _0x2d1f89(_0x4f5cbd(0x7a4)), _0x3bbad8(), _0x43c005(_0x4f5cbd(0x937), 'friendCircleEdit'); } async function _0x27484f() { const _0x420af = _0x4a89cb, _0x13c978 = document[_0x420af(0x2fc)]('editing-friend-circle-id')[_0x420af(0x91b)]; if (!_0x13c978) return; const _0x56b118 = await _0x46bf1c('确定要删除这个好友圈吗？此操作不可撤销。'); _0x56b118 && ('qNcwt' !== 'qNcwt' ? _0x1dfff1['style'][_0x420af(0x5f8)] = '1' : (_0x21e37d[_0x420af(0x635)] = _0x21e37d[_0x420af(0x635)][_0x420af(0x4b7)](_0x36e9bc => _0x36e9bc['id'] !== _0x13c978), _0x21e37d[_0x420af(0x26c)] === _0x13c978 && (_0x21e37d[_0x420af(0x26c)] = null), _0x37e4ef(), _0x2d1f89('好友圈已删除。'), _0x3bbad8(), _0x43c005('friendCircleList', _0x420af(0x2c8)))); } function _0x35ae81(_0x11891e) { const _0x3b8af3 = _0x4a89cb; _0x84abb5(); const _0x496805 = _0x21e37d['friendCircles'][_0x3b8af3(0x354)](_0x2ae77d => _0x2ae77d['id'] === _0x11891e); if (!_0x496805) return; _0x21e37d[_0x3b8af3(0x26c)] = _0x11891e, _0x37e4ef(), document[_0x3b8af3(0x2fc)](_0x3b8af3(0x864))[_0x3b8af3(0x908)] = _0x496805['name'], _0x216205(), _0x43c005(_0x3b8af3(0x529), 'friendCircleList'), _0x14fa52(); } function _0x6dfe63() { const _0x4402c1 = _0x4a89cb; if (_0x4402c1(0x85b) === _0x4402c1(0x14b)) _0x23c264[_0x4402c1(0x42c)](), _0x56e4d1['clipboard'][_0x4402c1(0x2bb)](_0x52efeb[_0x4402c1(0x91b)])['then'](() => { const _0x38e5ea = _0x4402c1; _0x381cb0(_0x38e5ea(0x46f)); })[_0x4402c1(0x483)](_0x4d582b => { const _0xb85e34 = _0x4402c1; _0xb826fc(_0xb85e34(0x7ab)); }); else { if (!_0x21e37d[_0x4402c1(0x635)] || _0x21e37d['friendCircles'][_0x4402c1(0x8ab)] === 0x0) { console[_0x4402c1(0xa12)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x1cd7bf = _0x21e37d['friendCircles'][0x0]; if (_0x1cd7bf['memberCharacterIds'][_0x4402c1(0x8ab)] < 0x2) { if (_0x4402c1(0x91c) !== _0x4402c1(0x91c)) { if (!_0x51c915) return []; const _0x442d10 = _0x3556ce(_0x4686f8)[_0x4402c1(0x1b5)](), _0x47a326 = _0x442d10['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x4402c1(0x592)](_0x44253a => _0x44253a[_0x4402c1(0x1b5)]())[_0x4402c1(0x4b7)](_0x174d7e); if (_0x47a326['length'] > 0x0) return _0x47a326[_0x4402c1(0x6de)](0x0, 0x9); return [_0x442d10][_0x4402c1(0x4b7)](_0x3708ea); } else { console[_0x4402c1(0xa12)](_0x4402c1(0xa4a) + _0x1cd7bf['name'] + _0x4402c1(0x6e5)); return; } } const _0x2f3628 = { 'id': _0x4402c1(0xa5b) + Date[_0x4402c1(0x300)](), 'authorType': _0x4402c1(0x3b7), 'authorId': _0x1cd7bf[_0x4402c1(0xe4)][0x0], 'content': _0x4402c1(0x813), 'timestamp': Date[_0x4402c1(0x300)](), 'likes': [_0x1cd7bf[_0x4402c1(0xe4)][0x1]], 'comments': [{ 'commentId': 'c_' + Date['now'](), 'authorId': _0x1cd7bf[_0x4402c1(0xe4)][0x1], 'content': _0x4402c1(0x84f) }] }; _0x1cd7bf[_0x4402c1(0x8e6)][_0x4402c1(0x9f2)](_0x2f3628), _0x37e4ef(), console['log'](_0x4402c1(0xa5c) + _0x1cd7bf[_0x4402c1(0x4a8)] + _0x4402c1(0x3a0)), _0x2d1f89(_0x4402c1(0x808)); } } window[_0x4a89cb(0xaee)] = _0x6dfe63; function _0x327188(_0x475b52) { const _0x13affa = _0x4a89cb; return _0x21e37d[_0x13affa(0x63b)]['find'](_0x3d72b1 => _0x3d72b1['id'] === _0x475b52); } function _0x171a38(_0x561dfa, _0x4f5ce8 = _0x4a89cb(0x880)) { const _0x759caa = _0x4a89cb, _0x340808 = document[_0x759caa(0x2fc)](_0x759caa(0x8c6)); let _0x1459c8 = document[_0x759caa(0x2fc)]('feed-loader'); if (_0x561dfa) { if ('wYEke' !== _0x759caa(0x8e4)) return _0x1d5932[_0x759caa(0x9f2)](_0x553691), _0x4fcbad; else { if (!_0x1459c8) { if ('GneyA' !== _0x759caa(0x844)) { const _0x471b4e = [], _0xb99749 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x4c0e80; while ((_0x4c0e80 = _0xb99749[_0x759caa(0xaff)](_0x533dec)) !== null) { const _0x422f8f = _0x4c0e80[0x1][_0x759caa(0x8f0)](/\\"/g, '\x22')[_0x759caa(0x8f0)](/\\n/g, '\x0a')['trim'](); if (_0x422f8f) _0x471b4e[_0x759caa(0x9f2)](_0x422f8f); } if (_0x471b4e[_0x759caa(0x8ab)]) return _0x471b4e[_0x759caa(0x57e)](_0x46efdc)['slice'](0x0, 0x9); } else _0x1459c8 = document[_0x759caa(0x53d)](_0x759caa(0x6b3)), _0x1459c8['id'] = _0x759caa(0x1ed), _0x340808[_0x759caa(0x30a)](_0x1459c8); } _0x1459c8['innerHTML'] = _0x759caa(0x20d) + _0x4f5ce8 + _0x759caa(0x421), _0x1459c8[_0x759caa(0xab9)][_0x759caa(0x243)] = 'flex'; } } else _0x1459c8 && (_0x1459c8['style'][_0x759caa(0x243)] = _0x759caa(0x1ea)); } async function _0x1609ca() { const _0x2d3fbf = _0x4a89cb, _0x38f91e = _0x21e37d[_0x2d3fbf(0x635)][_0x2d3fbf(0x354)](_0x139ea4 => _0x139ea4['id'] === _0x21e37d[_0x2d3fbf(0x26c)]); if (!_0x38f91e || _0x21e37d[_0x2d3fbf(0x5f4)]) return; _0x171a38(!![], _0x2d3fbf(0x4aa)), _0x21e37d['isGenerating'] = !![]; try { let _0x37e118 = Date[_0x2d3fbf(0x300)](); if (_0x38f91e[_0x2d3fbf(0x8e6)] && _0x38f91e[_0x2d3fbf(0x8e6)][_0x2d3fbf(0x8ab)] > 0x0) { if (_0x2d3fbf(0x1e6) !== _0x2d3fbf(0x1e6)) { const _0x1958ef = _0x67930b[_0x2d3fbf(0x53d)]('p'); _0x1958ef[_0x2d3fbf(0x908)] = _0x5014c3[_0x2d3fbf(0x331)], _0x1958ef['id'] = _0x2d3fbf(0x4cc) + _0xfe1b8, _0x8fa817[_0x2d3fbf(0x30a)](_0x1958ef); } else _0x37e118 = Math[_0x2d3fbf(0x477)](..._0x38f91e[_0x2d3fbf(0x8e6)][_0x2d3fbf(0x592)](_0x406d93 => _0x406d93[_0x2d3fbf(0x6cc)])); } const _0x26dfc9 = await _0x4f8dd8(_0x38f91e); if (!_0x26dfc9 || _0x26dfc9[_0x2d3fbf(0x8ab)] === 0x0) { _0x2d1f89(_0x2d3fbf(0x190)); return; } const _0x48444a = _0x26dfc9[_0x2d3fbf(0x592)](async (_0xfcac1b, _0x110b46) => { const _0x2ab66b = _0x2d3fbf; if (_0x2ab66b(0x227) === _0x2ab66b(0x7d9)) _0x41d027[_0x2ab66b(0x88a)][_0x2ab66b(0x70d)] = _0x2f0e01['checked'], _0x3c447e(), _0x4c261a(); else { _0x171a38(!![], _0x2ab66b(0x5d3) + (_0x110b46 + 0x1) + '\x20/\x20' + _0x26dfc9[_0x2ab66b(0x8ab)] + _0x2ab66b(0xb12)); const _0x1c0680 = _0x37e118 + (_0x110b46 + 0x1) * 0x3c * 0x3e8, _0x43b9c8 = { 'id': 'post_' + _0xfcac1b['authorId'] + '_' + _0x1c0680, 'authorType': 'character', 'authorId': _0xfcac1b['authorId'], 'content': _0xfcac1b[_0x2ab66b(0xa53)], 'timestamp': _0x1c0680, 'likes': _0xfcac1b['likes'] || [], 'comments': (_0xfcac1b['comments'] || [])[_0x2ab66b(0x592)]((_0x5bf9bf, _0x2a2053) => ({ 'commentId': 'c_' + _0x1c0680 + '_' + _0x2a2053, 'authorId': _0x5bf9bf[_0x2ab66b(0x1b4)], 'content': _0x5bf9bf[_0x2ab66b(0xaf8)] })) }; if (_0xfcac1b[_0x2ab66b(0x1c8)] === 'music' && _0xfcac1b[_0x2ab66b(0xaa1)] && _0xfcac1b['artist']) { if ('KCpgt' !== 'dKZFE') try { const _0x4f7248 = await _0x1996a8(_0xfcac1b[_0x2ab66b(0xaa1)], _0xfcac1b['artist']); _0x43b9c8[_0x2ab66b(0x497)] = _0x2ab66b(0x529), _0x43b9c8[_0x2ab66b(0xaa1)] = _0xfcac1b['songName'], _0x43b9c8[_0x2ab66b(0x20b)] = _0xfcac1b['artist'], _0x43b9c8['coverUrl'] = _0x4f7248[_0x2ab66b(0x145)], _0x43b9c8[_0x2ab66b(0x25e)] = _0x4f7248[_0x2ab66b(0x677)]; } catch (_0x1f46c9) { console['error'](_0x2ab66b(0x19d), _0x1f46c9), _0x43b9c8['type'] = 'text'; } else _0x28bcd0(_0xf0934), _0x322997[_0x2ab66b(0xace)]('canplaythrough', _0x239caf), _0x2e9a59[_0x2ab66b(0xace)](_0x2ab66b(0xa12), _0x3cac1d), _0x1c13c4[_0x2ab66b(0x9fb)] = '', _0x6e89ee[_0x2ab66b(0x3c2)](); } else _0x43b9c8[_0x2ab66b(0x497)] = 'text'; return _0x43b9c8; } }), _0x1ea899 = await Promise['all'](_0x48444a); _0x38f91e[_0x2d3fbf(0x8e6)][_0x2d3fbf(0x9f2)](..._0x1ea899), _0x37e4ef(); } catch (_0x4ec97b) { console[_0x2d3fbf(0xa12)](_0x2d3fbf(0xb01), _0x4ec97b), _0x2d1f89(_0x2d3fbf(0x4a5) + _0x4ec97b[_0x2d3fbf(0x420)]); } finally { _0x216205(), _0x171a38(![]), _0x21e37d[_0x2d3fbf(0x5f4)] = ![]; } } async function _0x4f8dd8(_0x243a38) { const _0x2a4697 = _0x4a89cb; if ('TrjWT' !== _0x2a4697(0x904)) { const _0x406869 = _0x243a38['memberCharacterIds']['map'](_0x5d042c => _0xe97381(_0x5d042c))[_0x2a4697(0x4b7)](Boolean); if (_0x406869[_0x2a4697(0x8ab)] === 0x0) return null; const _0x5ed9ce = _0x1c7188(), _0x1734a0 = _0x327188(_0x243a38[_0x2a4697(0x482)]) || _0x21e37d['userProfiles'][0x0], _0xf3b29f = _0x1734a0 ? _0x2a4697(0x9c8) + _0x1734a0['name'] + _0x2a4697(0x80c) + (_0x1734a0['persona'] || '无') + '\x0a' : '', _0x43b722 = _0x406869[_0x2a4697(0x592)](_0x33e751 => { const _0x2d930a = _0x2a4697; if (_0x2d930a(0x881) !== 'FKjVX') { const { omniText: _0x3577b9 } = _0x434953(_0x33e751['id'], null), _0x1f6fef = _0x345da9(_0x33e751['id']), _0x14d3be = _0x33e751['linkedWorldBookIds'] && _0x33e751[_0x2d930a(0x12e)][_0x2d930a(0x8ab)] > 0x0 ? _0x2d930a(0x6ba) + _0x33e751[_0x2d930a(0x4a8)] + _0x2d930a(0x7f1) + _0x33e751[_0x2d930a(0x12e)][_0x2d930a(0x592)](_0x3d5dcd => _0x21e37d[_0x2d930a(0x584)][_0x2d930a(0x354)](_0x4e4c9d => _0x4e4c9d['id'] === _0x3d5dcd))['filter'](Boolean)['map'](_0x1c690a => _0x2d930a(0xabd) + _0x1c690a[_0x2d930a(0x4a8)] + '\x0a' + _0x1c690a[_0x2d930a(0xaf8)])[_0x2d930a(0x2c2)]('') : ''; return '-\x20姓名:\x20' + _0x33e751['name'] + _0x2d930a(0x58d) + _0x33e751['id'] + _0x2d930a(0x6f0) + _0x33e751[_0x2d930a(0x87d)] + '\x0a\x20\x20近期记忆:\x0a' + _0x3577b9 + '\x0a' + _0x1f6fef + '\x0a' + _0x14d3be; } else { const _0xef33ce = _0x550154(_0xe37433['senderId']); return _0xef33ce?.[_0x2d930a(0x4a8)] || _0x2d930a(0xb18); } })[_0x2a4697(0x2c2)]('\x0a\x0a'), _0x4075e3 = Math[_0x2a4697(0x124)](Math[_0x2a4697(0x53f)]() * 0x3) + 0x2, _0x3ee0c3 = _0x2a4697(0x226) + _0x4075e3 + _0x2a4697(0x7c0) + _0x43b722 + '\x0a' + _0xf3b29f + _0x2a4697(0x2de) + _0x5ed9ce + _0x2a4697(0x444) + _0x4075e3 + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0x4075e3 + _0x2a4697(0x851), _0x5262c9 = [{ 'role': _0x2a4697(0x707), 'content': _0x3ee0c3 }, { 'role': 'user', 'content': _0x2a4697(0x621) }]; _0x5262c9['push']({ 'role': _0x2a4697(0x1a8), 'content': '请根据以上所有规则，生成\x20' + _0x4075e3 + '\x20条新动态。' }); try { if (_0x2a4697(0x2c4) === 'QIEvr') { const _0x3a0db0 = await _0xa3cec0(_0x5262c9, { 'json': !![] }), _0x3e7002 = _0x3a0db0[_0x2a4697(0x63a)](/(\[[\s\S]*\])/); if (!_0x3e7002) throw new Error('AI未能返回有效的JSON数组格式。'); const _0x22f750 = _0x3e7002[0x1], _0x52a061 = JSON[_0x2a4697(0x16b)](_0x22f750); if (!Array[_0x2a4697(0x684)](_0x52a061)) throw new Error('AI返回的不是一个数组。'); return _0x52a061; } else _0x50f5b3[_0x2a4697(0x2fc)](_0x2a4697(0xb03))[_0x2a4697(0x6f4)](); } catch (_0x1e414b) { if (_0x2a4697(0x28c) !== _0x2a4697(0x668)) return console['error'](_0x2a4697(0xa1f), _0x1e414b), console[_0x2a4697(0xa12)](_0x2a4697(0xaeb), _0x1e414b[_0x2a4697(0x308)] || 'AI返回了无法解析的文本'), null; else _0x3b72ca[_0x34faef]['classList'][_0x2a4697(0x3ea)](_0x2a4697(0x911)); } } else { const _0x2d4f6e = _0x21736c[_0x2a4697(0x7b7)](_0x2a4697(0x47c)); _0x2d4f6e ? _0x1cd0ac[_0x2a4697(0x2fc)](_0x2a4697(0x12d))[_0x2a4697(0xab9)][_0x2a4697(0x7e1)](_0x2a4697(0x322), _0x2a4697(0x713) + _0x2d4f6e + ')') : _0x2a4750['getElementById'](_0x2a4697(0x12d))[_0x2a4697(0xab9)]['setProperty'](_0x2a4697(0x322), _0x2a4697(0x1ea)); } } async function _0x3a5f2b() { const _0x119b1d = _0x4a89cb; if (_0x119b1d(0x935) === 'nsIzv') { const _0x4d33e8 = _0x21e37d[_0x119b1d(0x635)][_0x119b1d(0x354)](_0x2de281 => _0x2de281['id'] === _0x21e37d['activeFriendCircleId']); if (!_0x4d33e8) return; const _0x1d4258 = await _0x46bf1c(_0x119b1d(0x277) + _0x4d33e8[_0x119b1d(0x4a8)] + _0x119b1d(0x5c1)); _0x1d4258 && (_0x4d33e8[_0x119b1d(0x8e6)] = [], _0x37e4ef(), _0x216205(), _0x2d1f89(_0x119b1d(0x8f5))); } else { const _0x5d9a74 = _0x779cd4['parse'](_0x101bc8); _0x2d8568[_0x119b1d(0x684)](_0x5d9a74) ? _0x8bce97 = [..._0x4cae91, ..._0x5d9a74] : _0x221f4b = _0x11b855; } } function _0x216205() { const _0x33e749 = _0x4a89cb; if ('SUYjX' === 'lHfjR') { const _0x5b829e = _0x56d0fc['image'][_0x33e749(0x115)](',')[0x1], _0x2e6b35 = _0x391a98[_0x33e749(0xaa9)]['substring'](_0x253a0a[_0x33e749(0xaa9)][_0x33e749(0x2f9)](':') + 0x1, _0x294171[_0x33e749(0xaa9)][_0x33e749(0x2f9)](';')) || _0x33e749(0x3b5); _0x505ddd['push']({ 'inline_data': { 'mime_type': _0x2e6b35, 'data': _0x5b829e } }); } else { const _0x28b6cd = document[_0x33e749(0x2fc)](_0x33e749(0x61b)), _0x4f71e3 = _0x21e37d[_0x33e749(0x635)][_0x33e749(0x354)](_0x34c10e => _0x34c10e['id'] === _0x21e37d[_0x33e749(0x26c)]); if (!_0x4f71e3) { _0x28b6cd[_0x33e749(0x109)] = _0x33e749(0x5b0); return; } if (!_0x4f71e3[_0x33e749(0x8e6)] || _0x4f71e3[_0x33e749(0x8e6)]['length'] === 0x0) { if (_0x33e749(0xa5d) === 'cSkoa') { _0x28b6cd['innerHTML'] = _0x33e749(0x84a); return; } else _0x247f37(_0x1cdbb4['id']); } _0x28b6cd[_0x33e749(0x109)] = ''; const _0x22867e = [..._0x4f71e3['posts']][_0x33e749(0xa17)]((_0x16a412, _0x48def9) => _0x48def9[_0x33e749(0x6cc)] - _0x16a412[_0x33e749(0x6cc)]); _0x22867e['forEach'](_0x3fa616 => { const _0x11aae7 = _0x33e749; if (_0x11aae7(0xe5) === 'BiUdo') _0x22bbac[_0x11aae7(0x9fb)] = _0x5184d6 ? _0x2fac4a[_0x11aae7(0x3a1)](_0x2b3fe2) : _0x34cecc; else { const _0x375069 = document['createElement'](_0x11aae7(0x6b3)); _0x375069['className'] = _0x11aae7(0xa27); let _0x2520fa = '未知', _0x179b64 = _0x30019f; if (_0x3fa616[_0x11aae7(0xa51)] === 'user') { if (_0x11aae7(0x46e) === _0x11aae7(0x4f4)) { if (_0x2c7cf3[_0x11aae7(0x568)] === _0x11aae7(0x1a8)) return _0x12cac6[_0x11aae7(0x87b)]?.['name'] || _0x11aae7(0x588); if (_0x246b93['senderId']) { const _0x4a8440 = _0x4af148(_0x314b05['senderId']); return _0x4a8440?.[_0x11aae7(0x4a8)] || 'Unknown'; } if (_0x43a94b?.[_0x11aae7(0x497)] === 'private') { const _0x11eaf7 = _0x30e073(_0x2d9d15[_0x11aae7(0xad8)][0x0]); return _0x11eaf7?.[_0x11aae7(0x4a8)] || 'AI'; } return _0x11aae7(0x8d9); } else { const _0x39d3f9 = _0x327188(_0x3fa616['authorId']); _0x39d3f9 && ('LjZFX' !== _0x11aae7(0x22d) ? (_0x2520fa = _0x39d3f9[_0x11aae7(0x4a8)], _0x179b64 = _0x39d3f9['avatar']) : _0x317a9a = _0x1e17b6); } } else { if (_0x11aae7(0x473) !== 'XfjvX') { const _0x520e6c = _0xe97381(_0x3fa616['authorId']); _0x520e6c && (_0x2520fa = _0x520e6c['name'], _0x179b64 = _0x520e6c[_0x11aae7(0x496)]); } else _0x2b157d['style'][_0x11aae7(0x243)] = _0x11aae7(0xa25), _0x20b53b['style'][_0x11aae7(0x243)] = 'none'; } const _0x596c97 = _0x11aae7(0x134) + _0x179b64 + _0x11aae7(0x6d6) + _0x2520fa + _0x11aae7(0x83f), _0x4d02c4 = '<p\x20class=\x22music-post-thought\x22>' + _0x3fa616['content'] + _0x11aae7(0x8ea); let _0x59cf67 = ''; if (_0x3fa616[_0x11aae7(0xaa9)] || _0x3fa616['imageId']) { const _0x1114c4 = _0x11aae7(0x78b) + _0x3fa616['id']; _0x59cf67 = _0x11aae7(0x9a6) + _0x1114c4 + '\x22\x20class=\x22post-image\x22></div>', setTimeout(() => { const _0x527cc5 = _0x11aae7, _0x3a2388 = document[_0x527cc5(0x2fc)](_0x1114c4); if (!_0x3a2388) return; if (_0x3fa616[_0x527cc5(0xaa9)]) _0x3a2388[_0x527cc5(0x9fb)] = _0x3fa616[_0x527cc5(0xaa9)]; else _0x3fa616[_0x527cc5(0x803)] && _0x3bbeae(_0x3fa616[_0x527cc5(0x803)])['then'](_0x2cf479 => { const _0x4612c8 = _0x527cc5; if (_0x2cf479) { if (_0x4612c8(0x7b8) === _0x4612c8(0x7b8)) { const _0x12e945 = URL[_0x4612c8(0x3a1)](_0x2cf479); _0x3a2388[_0x4612c8(0x9fb)] = _0x12e945, _0x3a2388['onload'] = () => URL[_0x4612c8(0x705)](_0x12e945); } else { const _0x327e2a = { 'quotedMessage': null, 'content': _0x385211 }, _0x485b13 = _0x47c6e8[_0x4612c8(0x63a)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x485b13 && (_0x327e2a['quotedMessage'] = { 'sender': _0x485b13[0x1]['trim'](), 'content': _0x485b13[0x2][_0x4612c8(0x1b5)]() }, _0x327e2a['content'] = _0x1f3b81[_0x4612c8(0x7c5)](_0x485b13[0x0][_0x4612c8(0x8ab)])['trim']()), _0x327e2a; } } }); }, 0x0); } let _0x528803 = ''; if (_0x3fa616[_0x11aae7(0x497)] === _0x11aae7(0x529) && _0x3fa616['songName']) { if (_0x11aae7(0x823) === _0x11aae7(0x58b)) { if (_0x2518be['role'] === _0x11aae7(0x31e)) { const _0x418355 = _0x1e9525[_0x11aae7(0xafb)][_0x55d73f]; _0x418355 && _0x418355[_0x11aae7(0x8ab)] > 0x0 && (_0x193afb = _0x418355['at'](-0x1)); } else _0x4f48fc = { 'speaker': _0x7645ef['name'], 'line': _0x2cc084[_0x11aae7(0xaf8)], 'emotion': _0x11aae7(0x8f1) }; } else _0x528803 = _0x11aae7(0x91d) + _0x3fa616['id'] + _0x11aae7(0x171) + (_0x3fa616[_0x11aae7(0xab6)] || _0x30019f) + _0x11aae7(0x69c) + _0x3fa616['songName'] + _0x11aae7(0x32b) + _0x3fa616['artist'] + _0x11aae7(0x108) + (_0x3fa616['playableUrl'] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } const _0xc33dcf = '<div\x20class=\x22post-timestamp\x22>' + new Date(_0x3fa616[_0x11aae7(0x6cc)])[_0x11aae7(0x926)](_0x11aae7(0x223)) + _0x11aae7(0x94b); let _0x2e5563 = ''; if (_0x3fa616[_0x11aae7(0x73d)] && _0x3fa616[_0x11aae7(0x73d)][_0x11aae7(0x8ab)] > 0x0 || _0x3fa616[_0x11aae7(0x2a8)] && _0x3fa616[_0x11aae7(0x2a8)]['length'] > 0x0) { let _0x496efc = ''; if (_0x3fa616[_0x11aae7(0x73d)] && _0x3fa616[_0x11aae7(0x73d)]['length'] > 0x0) { if ('lVUHp' === _0x11aae7(0xfb)) _0x26f33e > _0x32dff0 && (_0x3b3fcd *= _0x489d53 / _0x5870b6, _0x31757b = _0x35e62c); else { const _0x19897a = _0x3fa616[_0x11aae7(0x73d)][_0x11aae7(0x592)](_0x2ac573 => _0xe97381(_0x2ac573)?.['name'] || '未知')[_0x11aae7(0x2c2)]('、'), _0x4773cc = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>'; _0x496efc = _0x11aae7(0xa4e) + _0x4773cc + '\x20' + _0x19897a + _0x11aae7(0x94b); } } let _0x29e449 = ''; if (_0x3fa616['comments'] && _0x3fa616[_0x11aae7(0x2a8)][_0x11aae7(0x8ab)] > 0x0) { const _0x187e9c = _0x3fa616[_0x11aae7(0x2a8)]['map'](_0x5acede => { const _0x4df06c = _0x11aae7; if ('ANcxf' !== _0x4df06c(0x321)) { if (_0x59fc49) { const _0x27e47a = _0x5ee54a(_0x76fe9c['activeMeetingCharId']); _0x27e47a && (delete _0x27e47a[_0x4df06c(0x174)], _0x1f1157(), _0x8e0a5(_0x27e47a['id'], 'normal'), _0x3830ef('已恢复默认。'), _0x44a032(!![])); } } else { const _0x1d7288 = _0xe97381(_0x5acede[_0x4df06c(0x1b4)])?.[_0x4df06c(0x4a8)] || '未知'; return _0x4df06c(0x65c) + _0x1d7288 + '</span>:\x20' + _0x5acede[_0x4df06c(0xaf8)] + _0x4df06c(0x94b); } })['join'](''); _0x29e449 = _0x11aae7(0x740) + _0x187e9c + _0x11aae7(0x94b); } _0x2e5563 = _0x11aae7(0x5dc) + _0x496efc + _0x11aae7(0x77d) + _0x29e449 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20'; } const _0x316d11 = _0x11aae7(0x352) + _0x4d02c4 + _0x59cf67 + _0x528803 + '</div>'; _0x375069[_0x11aae7(0x109)] = _0x596c97 + _0x316d11 + _0xc33dcf + _0x2e5563; if (_0x3fa616[_0x11aae7(0x497)] === 'music' && _0x3fa616[_0x11aae7(0x25e)]) { const _0x187543 = _0x375069['querySelector'](_0x11aae7(0x193)); if (_0x187543) { if ('QBiSH' === _0x11aae7(0x515)) { if (_0x5a2219[_0x11aae7(0x43e)]()[_0x11aae7(0x50f)]()) return; const _0x441db1 = _0x4561a3[_0x11aae7(0x37e)]['closest'](_0x11aae7(0x75c)), _0x511f39 = _0x5d8499[_0x11aae7(0x37e)][_0x11aae7(0xb28)](_0x11aae7(0x6b1)); if (!_0x441db1 || _0x511f39) return; const _0x6417e2 = _0x1323b8(_0x441db1[_0x11aae7(0x977)][_0x11aae7(0x5b1)], 0xa); if (_0x582553(_0x6417e2)) return; _0x1cf05b(_0x6417e2); } else _0x187543['addEventListener'](_0x11aae7(0x6f4), function () { const _0x128b4b = _0x11aae7; if (_0x128b4b(0x83d) === 'PSLLh') _0xf63116[_0x128b4b(0x514)] = _0x3ee7ed, _0x2eaa90(), _0x4ca401(_0x128b4b(0x14e)), _0x5d77ee(), _0x298609[_0x128b4b(0x2fc)](_0x128b4b(0x7a9))['style'][_0x128b4b(0x243)] = 'none'; else { const _0x13f280 = { 'id': _0x3fa616['id'], 'url': _0x3fa616['playableUrl'] }; _0x5f1860(this, _0x13f280); } }); } } _0x28b6cd[_0x11aae7(0x30a)](_0x375069); } }); } } document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa30))['addEventListener'](_0x4a89cb(0x6f4), _0x3a5f2b), document[_0x4a89cb(0x2fc)]('refresh-feed-button')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x1609ca), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x92f))['addEventListener']('click', () => _0x43c005(_0x4a89cb(0xa20), _0x4a89cb(0x937))), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x13d))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0xabb997()), document['getElementById']('back-to-circle-list-from-edit')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005('friendCircleList', 'friendCircleEdit')), document['getElementById'](_0x4a89cb(0x161))['addEventListener'](_0x4a89cb(0x6f4), _0x4ab812), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x79e))['addEventListener']('click', _0x27484f), document['getElementById'](_0x4a89cb(0x8a8))['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x18e7d2 = _0x4a89cb; 'codFp' === _0x18e7d2(0xafa) ? (_0x3bbad8(), _0x43c005('friendCircleList', _0x18e7d2(0x529))) : (_0x1ab3e0['innerHTML'] = _0x18e7d2(0x59c), _0x594d8c[_0x18e7d2(0x2fc)]('organize-bill-button')['addEventListener'](_0x18e7d2(0x6f4), _0x41c341)); }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x523))[_0x4a89cb(0xe9)]('click', () => { const _0x2dc0e8 = _0x4a89cb; _0x2dc0e8(0x5ed) !== 'AYoWx' ? _0xcf3c97 = _0x2569b3[_0x2dc0e8(0x16b)](_0x31af28) : _0x21e37d[_0x2dc0e8(0x26c)] && _0xabb997(_0x21e37d['activeFriendCircleId']); }), document['getElementById'](_0x4a89cb(0x4c2))['addEventListener'](_0x4a89cb(0x6f4), async () => { const _0x14ae19 = _0x4a89cb, _0x558efa = _0x21e37d['friendCircles'][_0x14ae19(0x354)](_0x33aa1c => _0x33aa1c['id'] === _0x21e37d[_0x14ae19(0x26c)]); if (!_0x558efa || _0x21e37d['isGenerating']) return; const _0x238265 = _0x558efa['boundUserProfileId'], _0x28c651 = _0x21e37d['userProfiles'][_0x14ae19(0x354)](_0x221f89 => _0x221f89['id'] === _0x238265); if (!_0x28c651) { _0x2d1f89(_0x14ae19(0xa98)); return; } const _0x50e3f4 = document['getElementById'](_0x14ae19(0x2b7))[_0x14ae19(0x91b)][_0x14ae19(0x1b5)](), _0x27cda7 = _0x21e37d[_0x14ae19(0x6b9)]['image'], _0x1970ba = _0x21e37d[_0x14ae19(0x6b9)][_0x14ae19(0x529)], _0x1b8825 = _0x21e37d['pendingPostAttachments'][_0x14ae19(0x803)]; if (!_0x50e3f4 && !_0x27cda7 && !_0x1970ba) { if ('wJzzA' === 'Hndti') { const _0x4f392e = _0x4e2644[_0x14ae19(0x130)](_0x289ab7, _0x14ae19(0x99b)), _0x13c385 = _0x4f392e[_0x14ae19(0x50c)](_0x1a3052), _0x18ee0e = _0x13c385[_0x14ae19(0x3fa)](_0x12d356); _0x18ee0e['onsuccess'] = () => _0x57f689(_0x18ee0e[_0x14ae19(0x18a)] ? _0x18ee0e['result'][_0x14ae19(0x976)] : null), _0x18ee0e['onerror'] = () => _0x16d0b1(_0x18ee0e[_0x14ae19(0xa12)]); } else { _0x2d1f89(_0x14ae19(0x2ec)); return; } } const _0x20d424 = { 'id': _0x14ae19(0xa0e) + Date['now'](), 'authorType': _0x14ae19(0x1a8), 'authorId': _0x28c651['id'], 'content': _0x50e3f4, 'timestamp': Date['now'](), 'likes': [], 'comments': [] }; if (_0x1b8825) 'xPxNe' === _0x14ae19(0x6b7) ? _0x106fd7['error'](_0x14ae19(0x6d2), _0x191248) : _0x20d424[_0x14ae19(0x803)] = _0x1b8825; else _0x27cda7 && (_0x20d424[_0x14ae19(0xaa9)] = _0x27cda7); _0x1970ba ? (_0x20d424[_0x14ae19(0x497)] = _0x14ae19(0x529), Object[_0x14ae19(0x61c)](_0x20d424, _0x1970ba)) : _0x14ae19(0x6ab) !== _0x14ae19(0x35e) ? _0x20d424[_0x14ae19(0x497)] = 'text' : (_0x4d4c32[_0x14ae19(0x91b)] = _0xb9fe0['userProfile'][_0x14ae19(0x4a8)] || '', _0x55c60a['src'] = _0x56b1cf[_0x14ae19(0x87b)]['avatar'] || _0x45b8d4, _0xdf1f2f[_0x14ae19(0x91b)] = _0x2ddd9d['userProfile'][_0x14ae19(0x87d)] || ''), _0x558efa[_0x14ae19(0x8e6)][_0x14ae19(0x9f2)](_0x20d424), _0x37e4ef(), _0x216205(), document['getElementById'](_0x14ae19(0x2b7))[_0x14ae19(0x91b)] = '', _0x21e37d['pendingPostAttachments'][_0x14ae19(0xaa9)] = null, _0x21e37d[_0x14ae19(0x6b9)][_0x14ae19(0x529)] = null, _0x21e37d[_0x14ae19(0x6b9)][_0x14ae19(0x803)] = null, _0x392f65(), _0x3dea6e(_0x20d424); }), document['getElementById'](_0x4a89cb(0x665))[_0x4a89cb(0xe9)]('click', () => { const _0x339bff = _0x4a89cb; if ('HMSXX' === _0x339bff(0x2d2)) document['getElementById'](_0x339bff(0x4b5))['click'](); else { const _0x5cef75 = _0x11bc40[_0x339bff(0x53d)](_0x339bff(0x6b3)); _0x5cef75[_0x339bff(0x175)] = _0x339bff(0x8b8), _0x5cef75['style'][_0x339bff(0x9c4)] = _0x339bff(0x3d3), _0x5cef75[_0x339bff(0xab9)][_0x339bff(0x475)] = _0x339bff(0xa79), _0x5cef75[_0x339bff(0xab9)][_0x339bff(0xae0)] = _0x339bff(0x1a4), _0x5cef75[_0x339bff(0xab9)][_0x339bff(0x403)] = '0'; const _0x472daf = _0x15a163[_0x3e9fee['category']] || _0x3f993b['默认'], _0x406802 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>' + _0x472daf + _0x339bff(0x763), _0x1f729f = '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>' + _0x406802 + _0x339bff(0x725) + _0x11a200[_0x339bff(0x4bf)] + _0x339bff(0x962) + (_0x3e50ba[_0x339bff(0x318)] || _0x339bff(0x2d4)) + '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20' + (_0x47f935['amount'] || 0x0)[_0x339bff(0x6be)](0x2) + '</span></div>'; let _0x49bd45 = ''; if (_0x303f62[_0x339bff(0xaf5)] && _0x4ace15[_0x339bff(0xaf5)]['charId']) { const _0x4fa582 = _0xa0dd37(_0x195ecd[_0x339bff(0xaf5)][_0x339bff(0x493)]); _0x4fa582 && (_0x49bd45 = _0x339bff(0x3db) + _0x4fa582[_0x339bff(0x496)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x4fa582[_0x339bff(0x4a8)] + _0x339bff(0xaf1) + _0x47c8ea[_0x339bff(0xaf5)][_0x339bff(0x331)] + _0x339bff(0x453)); } _0x5cef75[_0x339bff(0x109)] = _0x1f729f + _0x49bd45, _0x469fb6[_0x339bff(0x30a)](_0x5cef75); } }), document[_0x4a89cb(0x2fc)]('user-post-image-input')[_0x4a89cb(0xe9)]('change', async _0x18fa80 => { const _0x4fe727 = _0x4a89cb, _0x2a70be = _0x18fa80[_0x4fe727(0x37e)][_0x4fe727(0x10d)][0x0]; if (!_0x2a70be) return; try { const _0xbac71e = await _0x2210f6(_0x2a70be, 0x320, 0.8, !![]), _0x1a9df4 = _0x4fe727(0x3ef) + Date['now'](); await _0x24ce6b(_0x1a9df4, _0xbac71e), _0x21e37d[_0x4fe727(0x6b9)][_0x4fe727(0x803)] = _0x1a9df4, _0x21e37d[_0x4fe727(0x6b9)]['image'] = null, _0x21e37d['pendingPostAttachments']['music'] = null, _0x392f65(); } catch (_0x76e342) { _0x2d1f89('图片处理失败:\x20' + _0x76e342['message']); } _0x18fa80['target'][_0x4fe727(0x91b)] = ''; }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1a6))['addEventListener'](_0x4a89cb(0x6f4), async () => { const _0xb3237c = _0x4a89cb, _0x243d2e = await _0x137320(); if (!_0x243d2e) return; _0x2d1f89(_0xb3237c(0x2f1)); try { if (_0xb3237c(0xa57) === _0xb3237c(0x508)) _0x3d64d8[_0xb3237c(0x6bc)](), _0x20d433(); else { const _0x52520c = await _0x1996a8(_0x243d2e['songName'], _0x243d2e[_0xb3237c(0x20b)]); _0x21e37d[_0xb3237c(0x6b9)][_0xb3237c(0x529)] = { 'songName': _0x243d2e[_0xb3237c(0xaa1)], 'artist': _0x243d2e[_0xb3237c(0x20b)], 'coverUrl': _0x52520c['cover'], 'playableUrl': _0x52520c['url'] }, _0x21e37d['pendingPostAttachments'][_0xb3237c(0xaa9)] = null, _0x392f65(); } } catch (_0x7a0ff2) { _0x2d1f89('音乐搜索失败:\x20' + _0x7a0ff2['message']); } }); function _0x26bfa9() { const _0x266ae7 = _0x4a89cb, _0x3e5b0a = new Date(), _0x7d543b = document[_0x266ae7(0x2fc)](_0x266ae7(0x23b)), _0x390f6a = document[_0x266ae7(0x2fc)](_0x266ae7(0x943)); if (_0x7d543b && _0x390f6a) { if ('tcwuR' !== 'tcwuR') _0x5b7d18 = _0x38c3b8(_0x48efdf); else { const _0x54924c = String(_0x3e5b0a[_0x266ae7(0x97b)]())['padStart'](0x2, '0'), _0x976e37 = String(_0x3e5b0a[_0x266ae7(0x4d6)]())[_0x266ae7(0x1df)](0x2, '0'); _0x7d543b[_0x266ae7(0x908)] = _0x54924c + ':' + _0x976e37; const _0x356754 = _0x3e5b0a['getMonth']() + 0x1, _0x1dfe24 = _0x3e5b0a[_0x266ae7(0x1c4)](), _0x1e0ab1 = ['星期日', _0x266ae7(0x873), '星期二', _0x266ae7(0x6fc), _0x266ae7(0x42d), _0x266ae7(0x76f), '星期六'][_0x3e5b0a['getDay']()]; _0x390f6a[_0x266ae7(0x908)] = _0x356754 + '月' + _0x1dfe24 + '日\x20' + _0x1e0ab1; } } } function _0xe8cb86(_0x16c935) { const _0xd3735 = _0x4a89cb; if (!_0x16c935) return ''; const _0x7f67d1 = new Date(_0x16c935), _0x511b9f = String(_0x7f67d1[_0xd3735(0x97b)]())[_0xd3735(0x1df)](0x2, '0'), _0x139171 = String(_0x7f67d1['getMinutes']())[_0xd3735(0x1df)](0x2, '0'); return _0x511b9f + ':' + _0x139171; } function _0x1c7188() { const _0x21c6bf = _0x4a89cb, _0x28d4f8 = _0x21e37d[_0x21c6bf(0x635)][_0x21c6bf(0x354)](_0x510545 => _0x510545['id'] === _0x21e37d[_0x21c6bf(0x26c)]), _0x4aa7b8 = _0x28d4f8 ? _0x28d4f8[_0x21c6bf(0x8e6)] : []; if (!_0x4aa7b8 || _0x4aa7b8[_0x21c6bf(0x8ab)] === 0x0) { if (_0x21c6bf(0x78a) !== 'tFdVF') _0x38f3dc[_0x21c6bf(0xa12)]('加载视奸记忆失败\x20(' + _0x294d4c['id'] + _0x21c6bf(0x5d0), _0x4d3360); else return ''; } const _0x32f0c6 = _0x4aa7b8[_0x21c6bf(0x6de)](0x0, 0x5), _0x2b74cd = _0x32f0c6[_0x21c6bf(0x592)](_0x34445c => { const _0x41329a = _0x21c6bf; if (_0x41329a(0x956) !== _0x41329a(0x24c)) { const _0x21da3c = _0xe97381(_0x34445c[_0x41329a(0x1b4)]) || { 'name': '未知' }; let _0x4162e7 = '-\x20[动态]\x20' + _0x21da3c[_0x41329a(0x4a8)] + _0x41329a(0xa9d) + (_0x34445c[_0x41329a(0x5ab)] || _0x34445c[_0x41329a(0xaf8)]) + '”'; if (_0x34445c[_0x41329a(0x497)] === _0x41329a(0x529)) { if (_0x41329a(0x591) === _0x41329a(0x591)) _0x4162e7 += _0x41329a(0x780) + _0x34445c[_0x41329a(0xaa1)] + _0x41329a(0x919) + _0x34445c[_0x41329a(0x20b)] + ')'; else { const _0x2ec3c2 = _0x1e8ee3[_0x41329a(0x9d2)](_0x41329a(0x4f1) + _0x32a020); if (_0x2ec3c2) _0x2ec3c2[_0x41329a(0x21e)] = !![]; } } return _0x4162e7; } else { _0x203bb9 = _0x28da39(_0x37552e[_0x41329a(0x8b5)]), _0x3d03d3['innerHTML'] = ''; if (_0x4913a5[_0x41329a(0x8ab)] === 0x0) { _0x54143e['innerHTML'] = _0x41329a(0x699); return; } _0x98778c[_0x41329a(0xb13)]((_0x413c06, _0x54869f) => { const _0x57b172 = _0x41329a, _0x5bffb8 = _0x450d61[_0x57b172(0x53d)]('p'); _0x5bffb8['textContent'] = _0x413c06[_0x57b172(0x331)], _0x5bffb8['id'] = _0x57b172(0x4cc) + _0x54869f, _0x21d9fe[_0x57b172(0x30a)](_0x5bffb8); }); } }); return _0x21c6bf(0x361) + _0x2b74cd[_0x21c6bf(0x2c2)]('\x0a'); } function _0x345da9(_0xabbe5e) { const _0x2a344b = _0x4a89cb, _0x40dfca = _0x21e37d[_0x2a344b(0x63b)][_0x2a344b(0x354)](_0x2e8e50 => _0x2e8e50['id'] === _0x21e37d[_0x2a344b(0x514)]) || { 'name': '你' }, _0x6a5872 = _0x21e37d[_0x2a344b(0x366)][_0x2a344b(0x354)](_0x34b4f8 => _0x34b4f8[_0x2a344b(0x387)] === _0xabbe5e); if (!_0x6a5872 || !_0x6a5872[_0x2a344b(0x1d1)] || _0x6a5872['entries'][_0x2a344b(0x8ab)] === 0x0) { if (_0x2a344b(0x4d1) === _0x2a344b(0x4d1)) return ''; else { const _0x4dcc76 = _0x333353[_0x2a344b(0x592)](_0x212fd2 => new _0x35acae(_0x212fd2[_0x2a344b(0x6cc)] || _0x212fd2[_0x2a344b(0x2b4)]))[_0x2a344b(0x4b7)](_0x199e6d => !_0x38f467(_0x199e6d)); _0x4dcc76[_0x2a344b(0x8ab)] > 0x0 && (_0x2731d7 = new _0x348303(_0x56796d[_0x2a344b(0x477)][_0x2a344b(0x3a3)](null, _0x4dcc76)), _0x5af3ef = _0x10a49b[_0x2a344b(0x926)](_0x2a344b(0x223), { 'dateStyle': _0x2a344b(0xa31), 'timeStyle': _0x2a344b(0x79f) })); } } const _0x103e71 = _0x6a5872['entries'][_0x2a344b(0x6de)](-0x8), _0x49e205 = _0x103e71[_0x2a344b(0x592)](_0x1b61c0 => { const _0x2b1431 = _0x2a344b; if (_0x2b1431(0x428) === _0x2b1431(0x5f6)) { const _0x278223 = _0x5f5349[_0x2b1431(0x53d)](_0x2b1431(0x6b3)); _0x278223[_0x2b1431(0x175)] = 'expense-item', _0x278223['style'][_0x2b1431(0x45b)] = _0x2b1431(0x270); const _0x2d2d34 = _0x47d149['accountingLedger'][_0x10f06d], _0x1eae6c = _0x2d2d34[_0x2b1431(0x781)][_0x2b1431(0x5e1)]((_0x5030dd, _0xd0090a) => _0x5030dd + (_0xd0090a[_0x2b1431(0xb31)] || 0x0), 0x0); _0x278223['innerHTML'] = _0x2b1431(0x5e3) + _0x2c9fcf + _0x2b1431(0x4c0) + _0x1eae6c['toFixed'](0x2) + _0x2b1431(0x421), _0x278223[_0x2b1431(0xe9)](_0x2b1431(0x6f4), () => { const _0x323caf = _0x2b1431; _0x404667['classList'][_0x323caf(0x3c2)](_0x323caf(0x911)), _0x3540c3[_0x323caf(0x402)][_0x323caf(0x3ea)](_0x323caf(0x911)), _0x177ab5(_0x2d2d34, _0x4eb559); }), _0x21c001[_0x2b1431(0x30a)](_0x278223); } else { const _0x4c5a37 = _0x1b61c0[_0x2b1431(0x85a)] === _0x2b1431(0x1a8) ? _0x40dfca[_0x2b1431(0x4a8)] : _0xe97381(_0x1b61c0[_0x2b1431(0x85a)])[_0x2b1431(0x4a8)]; return _0x2b1431(0x8c2) + new Date(_0x1b61c0[_0x2b1431(0x6cc)])[_0x2b1431(0xa7b)]() + ']\x20' + _0x4c5a37 + _0x2b1431(0x899) + _0x1b61c0[_0x2b1431(0xaf8)]; } })['join']('\x0a'); return _0x2a344b(0x3e5) + _0x40dfca[_0x2a344b(0x4a8)] + '\x20之间的私密内容)\x0a' + _0x49e205; } function _0x2befa2() { const _0x3b77a3 = _0x4a89cb; if (_0x3b77a3(0x928) === _0x3b77a3(0x9e8)) return _0x3b77a3(0x2a4); else { const _0x4a6048 = document['getElementById'](_0x3b77a3(0x887)), _0x19a69b = _0x21e37d['preferences'][_0x3b77a3(0x5ad)]; _0x19a69b ? (_0x4a6048[_0x3b77a3(0xab9)][_0x3b77a3(0x3ec)] = _0x3b77a3(0x713) + _0x19a69b + ')', _0x4a6048[_0x3b77a3(0xab9)]['backgroundSize'] = _0x3b77a3(0x145), _0x4a6048[_0x3b77a3(0xab9)][_0x3b77a3(0x811)] = _0x3b77a3(0x165), _0x4a6048[_0x3b77a3(0xab9)][_0x3b77a3(0x9fd)] = _0x3b77a3(0xa74), _0x4a6048['querySelectorAll'](_0x3b77a3(0xa07))[_0x3b77a3(0xb13)](_0x16b80 => { const _0x51b64b = _0x3b77a3; _0x16b80[_0x51b64b(0xab9)][_0x51b64b(0x113)] = '0\x201px\x203px\x20rgba(0,0,0,0.6)'; })) : _0x3b77a3(0xff) !== _0x3b77a3(0x1d4) ? (_0x4a6048[_0x3b77a3(0xab9)][_0x3b77a3(0x3ec)] = '', _0x4a6048[_0x3b77a3(0xab9)][_0x3b77a3(0x9fd)] = '', _0x4a6048['querySelectorAll']('.widget-info\x20>\x20div')['forEach'](_0x5005f5 => { const _0x2d5996 = _0x3b77a3; if (_0x2d5996(0x8b0) !== _0x2d5996(0x8b0)) return _0x67c9da(new _0xc21e2d('哼，这不是图片，你想让我压缩什么？')); else _0x5005f5['style'][_0x2d5996(0x113)] = ''; })) : _0x1f5e7d(_0x4a1afd['id']); } } const _0x2f2dca = document[_0x4a89cb(0x2fc)]('app-music'), _0x2e6392 = document['getElementById'](_0x4a89cb(0x90e)); _0x2f2dca[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x3090f3 = _0x4a89cb; _0x3bbad8(), _0x43c005(_0x3090f3(0x937), _0x3090f3(0xa20)); }), _0x2e6392[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x2b05c5 = _0x4a89cb; 'Psqtc' !== _0x2b05c5(0x54e) ? (_0x4afcef(), _0x43c005(_0x2b05c5(0x855), 'home')) : _0x11ac62[_0x2b05c5(0xab9)][_0x5f16c6] = _0x3bbd67[_0x538fd3]; }), document[_0x4a89cb(0x2fc)]('back-to-home-from-meeting-list')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x2ef8fc = _0x4a89cb; _0x2ef8fc(0x9df) !== _0x2ef8fc(0x9df) ? (_0x5e5fff(_0x2ef8fc(0x89b), _0x2ef8fc(0xa20)), _0x2d4cb5(() => _0x4857f3(), 0x64)) : _0x43c005(_0x2ef8fc(0xa20), _0x2ef8fc(0x855)); }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7c4))[_0x4a89cb(0xe9)]('click', () => { const _0x3aad29 = _0x4a89cb; if (_0x3aad29(0x8a5) === _0x3aad29(0x8a5)) { if (_0x171df0) clearInterval(_0x171df0); _0x171df0 = null, _0x21e37d[_0x3aad29(0x872)] = [], _0x21e37d[_0x3aad29(0x2fa)] = null, document[_0x3aad29(0x2fc)](_0x3aad29(0x81f))[_0x3aad29(0xab9)]['display'] = _0x3aad29(0x1ea), _0x21e37d['activeChatId'] = null, _0x37e4ef(), _0x43c005(_0x3aad29(0x855), _0x3aad29(0x5ce)); } else _0x289ae0[_0x3aad29(0xa12)](_0x3aad29(0xb21), _0x85f652); }); const _0x5c51a5 = document[_0x4a89cb(0x2fc)]('meeting-message-input'), _0xd547a5 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x183)); _0xd547a5[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x3dfea3 = _0x4a89cb; if (_0x3dfea3(0x680) === 'tzOnw') _0x50f6d7['style'][_0x3dfea3(0x243)] = _0x3dfea3(0x1ea), _0x4be538[_0x3dfea3(0xab9)][_0x3dfea3(0x7d5)] = _0x3dfea3(0x81e), _0x166687[_0x3dfea3(0xab9)][_0x3dfea3(0x3ee)] = _0x3dfea3(0x645); else { const _0x5ae389 = _0x5c51a5[_0x3dfea3(0x91b)][_0x3dfea3(0x1b5)](); if (_0x5ae389) { if ('alxxy' !== _0x3dfea3(0x8d3)) { const _0x454a8d = _0x5853aa[0x0][_0x3dfea3(0x1b5)](), _0x4b6bc4 = _0x212101[0x1][_0x3dfea3(0x1b5)]()[_0x3dfea3(0x8f0)](/^"|"$/g, ''); _0x26bd37[_0x454a8d] = _0x4b6bc4; } else _0x460b03(_0x5ae389), _0x5c51a5['value'] = '', setTimeout(_0x4e63bc, 0x64); } } }); function _0x5f1860(_0x1d2fe1, _0x341f98) { const _0x334875 = _0x4a89cb; if (_0x334875(0x934) !== _0x334875(0x934)) { if (_0x55290a[_0x334875(0x8ab)] === 0x0) return; _0x539e9f = (_0x5d7fe3 + 0x1) % _0x49293f[_0x334875(0x8ab)], _0x7552e1(_0x492d8c[_0x397557], _0x1c3803); } else { const _0x507b87 = document[_0x334875(0x2fc)](_0x334875(0x92d)), _0x3045d4 = document[_0x334875(0x4ee)]('.music-post-play-icon,\x20.music-share-play-icon'); _0x3045d4[_0x334875(0xb13)](_0x1b64a3 => { const _0x15dbe2 = _0x334875; _0x1b64a3 !== _0x1d2fe1[_0x15dbe2(0x9d2)](_0x15dbe2(0x5e5)) && (_0x1b64a3['textContent'] = '▶'); }), _0x507b87['src'] === _0x341f98[_0x334875(0x677)] && !_0x507b87['paused'] ? (_0x507b87[_0x334875(0x998)](), _0x1d2fe1[_0x334875(0x9d2)](_0x334875(0x5e5))[_0x334875(0x908)] = '▶') : (_0x507b87[_0x334875(0x9fb)] = _0x341f98['url'], _0x507b87[_0x334875(0x432)](), _0x1d2fe1[_0x334875(0x9d2)](_0x334875(0x5e5))[_0x334875(0x908)] = '❚❚'); } } const _0x54748e = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7ac)); async function _0x24bb5a(_0xeb6945) { const _0x28af27 = _0x4a89cb; if (!_0xeb6945 || !_0xeb6945[_0x28af27(0x835)]('http')) return ![]; return new Promise(_0x30146d => { const _0x18782b = _0x28af27, _0x572675 = document[_0x18782b(0x53d)](_0x18782b(0x413)); _0x572675[_0x18782b(0x9fb)] = _0xeb6945; const _0x539b4a = setTimeout(() => { const _0xb4c1c2 = _0x18782b; if (_0xb4c1c2(0x7c2) !== _0xb4c1c2(0x846)) _0x19165f(), _0x30146d(![]); else { const _0x29effa = _0x54483e['friendCircles'][_0xb4c1c2(0x354)](_0x12fa02 => _0x12fa02['id'] === _0x1567c0[_0xb4c1c2(0x26c)]), _0x45404c = _0x29effa ? _0x29effa[_0xb4c1c2(0x8e6)] : []; if (!_0x45404c || _0x45404c[_0xb4c1c2(0x8ab)] === 0x0) return ''; const _0x599d2e = _0x45404c['slice'](0x0, 0x5), _0x453cee = _0x599d2e['map'](_0x1ffe03 => { const _0x41fcd8 = _0xb4c1c2, _0xaa07f8 = _0x22471c(_0x1ffe03[_0x41fcd8(0x1b4)]) || { 'name': '未知' }; let _0x1b3d50 = _0x41fcd8(0x8c8) + _0xaa07f8['name'] + _0x41fcd8(0xa9d) + (_0x1ffe03[_0x41fcd8(0x5ab)] || _0x1ffe03[_0x41fcd8(0xaf8)]) + '”'; return _0x1ffe03[_0x41fcd8(0x497)] === _0x41fcd8(0x529) && (_0x1b3d50 += _0x41fcd8(0x780) + _0x1ffe03['songName'] + '\x20-\x20' + _0x1ffe03[_0x41fcd8(0x20b)] + ')'), _0x1b3d50; }); return _0xb4c1c2(0x361) + _0x453cee['join']('\x0a'); } }, 0xbb8), _0x19165f = () => { const _0x359504 = _0x18782b; if (_0x359504(0x9f5) !== _0x359504(0x9f5)) { const _0x5bc062 = _0x2b6925[_0x359504(0x2dd)]((_0x55ab90 - _0x41ac52) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5a72d2 += '-\x20**状态提示**:\x20你已经有\x20' + _0x5bc062 + _0x359504(0x99a); } else clearTimeout(_0x539b4a), _0x572675[_0x359504(0xace)](_0x359504(0xae5), _0x229c9a), _0x572675['removeEventListener'](_0x359504(0xa12), _0x338922), _0x572675[_0x359504(0x9fb)] = '', _0x572675[_0x359504(0x3c2)](); }, _0x229c9a = () => { const _0x4680c8 = _0x18782b; _0x4680c8(0x312) === _0x4680c8(0x7e4) ? (_0x25d3a5[_0x4680c8(0xa12)](_0x4680c8(0x8a4), _0x25b512), _0x5e7286(_0x4680c8(0x2db))) : (_0x19165f(), _0x30146d(!![])); }, _0x338922 = () => { _0x19165f(), _0x30146d(![]); }; _0x572675[_0x18782b(0xe9)](_0x18782b(0xae5), _0x229c9a), _0x572675[_0x18782b(0xe9)](_0x18782b(0xa12), _0x338922); }); } async function _0x1996a8(_0x28ea3e, _0x9973c6) { const _0x24de02 = _0x4a89cb, _0x4bd647 = [_0x24de02(0xf9), 'tencent']; for (const _0x2621ff of _0x4bd647) { try { const _0x505dc3 = _0x24de02(0x5e2) + _0x2621ff + _0x24de02(0x4bc) + encodeURIComponent(_0x28ea3e) + '-' + encodeURIComponent(_0x9973c6), _0x27723a = await fetch(_0x505dc3), _0x332f44 = await _0x27723a['json'](); if (_0x332f44[_0x24de02(0x570)] !== 0xc8 || !_0x332f44[_0x24de02(0x976)] || _0x332f44[_0x24de02(0x976)][_0x24de02(0x8ab)] === 0x0) continue; const _0x56c1b1 = _0x332f44[_0x24de02(0x976)][_0x24de02(0x6de)](0x0, 0x5); for (const _0x3de12a of _0x56c1b1) { const _0x37d23e = _0x24de02(0x5e2) + _0x2621ff + _0x24de02(0x950) + _0x3de12a['id'], _0x5f16c9 = await fetch(_0x37d23e), _0x40a44e = await _0x5f16c9[_0x24de02(0x40c)](), _0x1f044d = _0x40a44e[_0x24de02(0x976)]?.[_0x24de02(0x677)]; if (await _0x24bb5a(_0x1f044d)) return { 'url': _0x1f044d, 'cover': _0x3de12a[_0x24de02(0x145)], 'source': _0x2621ff }; } } catch (_0x25a0d8) { console['error'](_0x24de02(0x616) + _0x2621ff + ':', _0x25a0d8); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x22bcf8(_0x21a37b) { const _0x1f3e2d = _0x4a89cb; try { const _0x5e055a = JSON[_0x1f3e2d(0x16b)](localStorage[_0x1f3e2d(0x7b7)](_0x1f3e2d(0x2d3)) || '{}'), _0x4fe30c = { ..._0x5e055a, ..._0x21a37b }; localStorage[_0x1f3e2d(0x25f)](_0x1f3e2d(0x2d3), JSON['stringify'](_0x4fe30c)); } catch (_0x41472e) { console[_0x1f3e2d(0xa12)](_0x1f3e2d(0x697), _0x41472e); } } async function _0xb56ec6() { const _0x42e585 = _0x4a89cb, _0x58ab81 = document[_0x42e585(0x2fc)]('decorative-badge'), _0x1c0a46 = document[_0x42e585(0x2fc)](_0x42e585(0x169)); try { if (_0x42e585(0x409) === 'wvMBS') { let _0x5dc6fc = await _0x3bbeae(_0x42e585(0x4df)); if (!_0x5dc6fc) { if (_0x42e585(0x429) !== 'UmRBj') { const _0x238b22 = _0x3d6c03[_0x42e585(0x9d2)](_0x42e585(0x987) + _0xc386e3 + _0x42e585(0x456) + _0x59819f + _0x42e585(0x4a4))?.[_0x42e585(0x109)]; _0x238b22 && (_0x520b95[_0x42e585(0x109)] = _0x238b22); } else { const _0x199148 = JSON['parse'](localStorage[_0x42e585(0x7b7)](_0x42e585(0x2d3)) || '{}'); _0x199148[_0x42e585(0xaa9)] && (_0x42e585(0x1b2) !== _0x42e585(0xa15) ? (_0x5dc6fc = await _0x32101d(_0x199148[_0x42e585(0xaa9)]), await _0x24ce6b('widget_badge', _0x5dc6fc)) : _0x252bcf = _0x572bba[_0x42e585(0xaa9)]); } } _0x5dc6fc ? (_0x1c0a46['src'] = URL[_0x42e585(0x3a1)](_0x5dc6fc), _0x1c0a46[_0x42e585(0xab9)][_0x42e585(0x243)] = _0x42e585(0xa25), _0x58ab81[_0x42e585(0xab9)]['border'] = _0x42e585(0x1ea)) : (_0x1c0a46[_0x42e585(0xab9)][_0x42e585(0x243)] = _0x42e585(0x1ea), _0x58ab81[_0x42e585(0xab9)][_0x42e585(0x7d5)] = _0x42e585(0x81e)), _0x58ab81[_0x42e585(0xab9)][_0x42e585(0x243)] = _0x42e585(0xa25); } else _0x2fe1e9 = _0x42e585(0x107); } catch (_0x18bc8f) { console[_0x42e585(0xa12)](_0x42e585(0xb16), _0x18bc8f); } } async function _0x2782a6() { const _0x100154 = _0x4a89cb; if ('qlFYm' === 'ohuMg') _0x39b0c7(_0x100154(0x142)); else { const _0x3f077a = document['getElementById']('card-widget'), _0x36ae96 = document[_0x100154(0x2fc)](_0x100154(0x5c0)), _0x3d79c0 = document[_0x100154(0x2fc)](_0x100154(0x8f3)), _0x52724c = document[_0x100154(0x2fc)]('card-image-2'); try { if (_0x100154(0x392) === 'haQZA') { let _0xaaa529 = await _0x3bbeae(_0x100154(0x262)); _0xaaa529 ? (_0x36ae96[_0x100154(0x9fb)] = URL[_0x100154(0x3a1)](_0xaaa529), _0x36ae96[_0x100154(0xab9)]['display'] = _0x100154(0xa25), _0x3f077a[_0x100154(0xab9)]['border'] = _0x100154(0x1ea), _0x3f077a['style'][_0x100154(0x3ee)] = _0x100154(0x3f4)) : (_0x36ae96[_0x100154(0xab9)]['display'] = _0x100154(0x1ea), _0x3f077a[_0x100154(0xab9)]['border'] = _0x100154(0x81e), _0x3f077a[_0x100154(0xab9)][_0x100154(0x3ee)] = 'rgba(255,255,255,0.2)'); _0x3f077a[_0x100154(0xab9)][_0x100154(0x243)] = 'block'; let _0x1bceb9 = await _0x3bbeae(_0x100154(0xa38)); _0x1bceb9 ? (_0x52724c['src'] = URL[_0x100154(0x3a1)](_0x1bceb9), _0x52724c[_0x100154(0xab9)][_0x100154(0x243)] = _0x100154(0xa25), _0x3d79c0[_0x100154(0xab9)]['border'] = _0x100154(0x1ea), _0x3d79c0[_0x100154(0xab9)][_0x100154(0x3ee)] = _0x100154(0x3f4)) : _0x100154(0x4e2) !== _0x100154(0x1e0) ? (_0x52724c[_0x100154(0xab9)][_0x100154(0x243)] = _0x100154(0x1ea), _0x3d79c0[_0x100154(0xab9)][_0x100154(0x7d5)] = '2px\x20dashed\x20var(--border-color)', _0x3d79c0[_0x100154(0xab9)][_0x100154(0x3ee)] = 'rgba(255,255,255,0.2)') : _0x83da58 = _0x3787a6[_0x100154(0x16b)](_0x2a355a), _0x3d79c0[_0x100154(0xab9)][_0x100154(0x243)] = 'block'; } else _0xac5938 === _0x100154(0xa20) ? _0x24cab9['style']['display'] = _0x100154(0x991) : _0x5ae73c[_0x100154(0xab9)][_0x100154(0x243)] = _0x100154(0x1ea); } catch (_0x36d5fc) { console[_0x100154(0xa12)]('加载卡片图片失败', _0x36d5fc); } } } async function _0x2782a6() { const _0x477e2b = _0x4a89cb; if (_0x477e2b(0x9be) !== _0x477e2b(0x9be)) _0x2096ba = _0x3bf246[_0x477e2b(0x477)](..._0x37d70d[_0x477e2b(0x8e6)][_0x477e2b(0x592)](_0x495f69 => _0x495f69[_0x477e2b(0x6cc)])); else { const _0x3f04b3 = document[_0x477e2b(0x2fc)](_0x477e2b(0x799)), _0x58a87d = document[_0x477e2b(0x2fc)]('card-image'); try { if (_0x477e2b(0xad1) !== _0x477e2b(0xad1)) _0x49260c(_0x477e2b(0x359)); else { let _0x331c60 = await _0x3bbeae('widget_card'); if (!_0x331c60) { const _0x3e3b75 = JSON[_0x477e2b(0x16b)](localStorage[_0x477e2b(0x7b7)]('cardWidgetState') || '{}'); _0x3e3b75[_0x477e2b(0xaa9)] && (console[_0x477e2b(0x172)](_0x477e2b(0x340)), _0x331c60 = await _0x32101d(_0x3e3b75[_0x477e2b(0xaa9)]), await _0x24ce6b(_0x477e2b(0x262), _0x331c60)); } if (_0x331c60) _0x58a87d[_0x477e2b(0x9fb)] = URL['createObjectURL'](_0x331c60), _0x3f04b3[_0x477e2b(0xab9)][_0x477e2b(0x243)] = _0x477e2b(0xa25); else { if ('vyeNx' === _0x477e2b(0x6c2)) { let _0x27e955 = null; const _0x3684dd = _0x557c3b[_0x477e2b(0x69a)]['filter'](_0x1707c6 => _0x1707c6[_0x477e2b(0xad8)][_0x477e2b(0x6f7)](_0x297a4e)); for (const _0x5f2a32 of _0x3684dd) { const _0x3ae9eb = _0x4e0400(_0x5f2a32['id']); if (_0x3ae9eb && _0x3ae9eb[_0x477e2b(0x8ab)] > 0x0) { const _0x234324 = _0x3ae9eb[_0x3ae9eb[_0x477e2b(0x8ab)] - 0x1]; (!_0x27e955 || _0x234324[_0x477e2b(0x6cc)] > _0x27e955[_0x477e2b(0x6cc)]) && (_0x27e955 = _0x234324); } } return _0x27e955; } else _0x3f04b3[_0x477e2b(0xab9)][_0x477e2b(0x243)] = 'none'; } } } catch (_0x100fcc) { _0x477e2b(0xa40) !== _0x477e2b(0xa40) ? (_0x3d5002(), _0x54aa96[_0x477e2b(0x31d)] = [], _0x280573()) : console[_0x477e2b(0xa12)](_0x477e2b(0x3f2), _0x100fcc); } try { let _0x16322c = await _0x3bbeae(_0x477e2b(0xa38)); const _0x1dab9b = document['getElementById'](_0x477e2b(0x5da)), _0x752029 = document[_0x477e2b(0x2fc)](_0x477e2b(0x8f3)); _0x16322c ? (_0x1dab9b[_0x477e2b(0x9fb)] = URL[_0x477e2b(0x3a1)](_0x16322c), _0x752029[_0x477e2b(0xab9)]['display'] = _0x477e2b(0xa25)) : _0x752029['style'][_0x477e2b(0x243)] = 'none'; } catch (_0x4951b8) { if (_0x477e2b(0x26f) === 'JyITa') { if (!_0x37fc7a || typeof _0x556d64 !== _0x477e2b(0x9b5)) return null; const _0x18cf38 = _0xe52686[_0x477e2b(0x2f9)]('['), _0x1d1083 = _0x1da2cb[_0x477e2b(0x1aa)](']'); if (_0x18cf38 > -0x1 && _0x1d1083 > _0x18cf38) return _0x8a1872[_0x477e2b(0x7c5)](_0x18cf38, _0x1d1083 + 0x1); return null; } else console[_0x477e2b(0xa12)]('加载第二个卡片图片失败', _0x4951b8); } } } _0x21c9ae[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { _0x2479e7(), _0x43c005('userProfileList', 'home'); }), document[_0x4a89cb(0x2fc)]('back-to-home-from-user-list')['addEventListener'](_0x4a89cb(0x6f4), () => _0x43c005('home', _0x4a89cb(0x264))), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9f6))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x2b047b()), document[_0x4a89cb(0x2fc)]('back-to-user-list-from-edit')['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x488e8a = _0x4a89cb; _0x2479e7(), _0x43c005('userProfileList', _0x488e8a(0x87b)); }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x3cd))['addEventListener'](_0x4a89cb(0x6f4), _0x18acc8), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x837))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x1e1d10), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7a9))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x5a4da2 = _0x4a89cb, _0x278572 = document[_0x5a4da2(0x2fc)]('editing-user-id')[_0x5a4da2(0x91b)]; _0x278572 && (_0x21e37d[_0x5a4da2(0x514)] = _0x278572, _0x37e4ef(), _0x2d1f89(_0x5a4da2(0x14e)), _0x2479e7(), document['getElementById'](_0x5a4da2(0x7a9))[_0x5a4da2(0xab9)][_0x5a4da2(0x243)] = _0x5a4da2(0x1ea)); }); function _0x3beafd(_0x2febfa) { const _0x3d2795 = _0x4a89cb, _0x59b6d6 = _0x21e37d[_0x3d2795(0x69a)][_0x3d2795(0x354)](_0x55c65e => _0x55c65e['id'] === _0x2febfa), _0x58042b = _0x59b6d6?.[_0x3d2795(0x482)]; let _0x447f45 = _0x21e37d[_0x3d2795(0x63b)]['find'](_0x1ea063 => _0x1ea063['id'] === _0x58042b); return !_0x447f45 && ('VBetB' === _0x3d2795(0x215) ? _0x447f45 = _0x21e37d[_0x3d2795(0x63b)][_0x3d2795(0x354)](_0x1ae4a1 => _0x1ae4a1['id'] === _0x21e37d['activeUserProfileId']) || _0x21e37d[_0x3d2795(0x63b)][0x0] : (_0x3cb801['error'](_0x3d2795(0x56e), _0x551b1a), _0xfb24af['alt'] = _0x3d2795(0x561))), _0x447f45 || { 'name': '用户', 'avatar': _0x3cf6e1, 'persona': '' }; } function _0x42e2f6(_0x3e8e26) { const _0x551290 = _0x4a89cb; if (_0x551290(0x74f) !== 'MpWWJ') { const _0x453f29 = document['getElementById'](_0x3e8e26); _0x453f29[_0x551290(0x109)] = '', _0x21e37d[_0x551290(0x63b)][_0x551290(0xb13)](_0x1d6765 => { const _0x30f4fb = _0x551290, _0x1ecae2 = document[_0x30f4fb(0x53d)]('option'); _0x1ecae2[_0x30f4fb(0x91b)] = _0x1d6765['id'], _0x1ecae2[_0x30f4fb(0x908)] = _0x1d6765[_0x30f4fb(0x4a8)], _0x453f29['appendChild'](_0x1ecae2); }); } else _0x2c5cbd = _0x551290(0x3db) + _0x1973f2['avatar'] + _0x551290(0x94a) + _0x2922f6[_0x551290(0x4a8)] + _0x551290(0xaf1) + _0x5a5a43[_0x551290(0xaf5)][_0x551290(0x331)] + '</div></div></div>'; } function _0x1f7ead(_0x261ddb) { const _0x15cddb = _0x4a89cb; if ('XsRGv' !== _0x15cddb(0x90f)) { const _0x3307e2 = _0x395559(_0x418481[_0x15cddb(0x977)][_0x15cddb(0x23e)], 0xa); _0x51f97d(_0x3307e2); } else { const _0xeb665e = _0xe97381(_0x261ddb), _0x294877 = document['getElementById']('chat-view-pane'); _0x294877['style']['backgroundImage'] = ''; let _0x17a0ae = document['getElementById'](_0x15cddb(0x181) + _0x261ddb); if (_0x17a0ae) _0x17a0ae[_0x15cddb(0x109)] = ''; if (!_0xeb665e) return; _0xeb665e[_0x15cddb(0x670)] && (_0x294877[_0x15cddb(0xab9)]['backgroundImage'] = _0x15cddb(0xac5) + _0xeb665e['chatWallpaper'] + '\x27)', _0x294877[_0x15cddb(0xab9)][_0x15cddb(0x186)] = 'cover', _0x294877['style'][_0x15cddb(0x811)] = 'center'); if (_0xeb665e[_0x15cddb(0x158)]) { if (_0x15cddb(0xaf7) !== 'dCFFc') { _0x25abf2(_0x15cddb(0x796)); return; } else { let _0x17910d = document[_0x15cddb(0x2fc)](_0x15cddb(0x181) + _0xeb665e['id']); !_0x17910d && (_0x17910d = document['createElement'](_0x15cddb(0xab9)), _0x17910d['id'] = _0x15cddb(0x181) + _0xeb665e['id'], document[_0x15cddb(0x4d9)][_0x15cddb(0x30a)](_0x17910d)); const _0x5bf15e = _0xeb665e[_0x15cddb(0x158)], _0x50ed9b = _0x5bf15e[_0x15cddb(0x8f0)](/\.bubble\.sent/g, _0x15cddb(0x51a) + _0xeb665e['id'] + _0x15cddb(0x3a7))['replace'](/\.bubble\.received/g, '.bubble-' + _0xeb665e['id'] + _0x15cddb(0x5c3)); _0x17910d[_0x15cddb(0x109)] = _0x50ed9b; } } } } function _0x392f65() { const _0x495e79 = _0x4a89cb; if (_0x495e79(0x856) === 'nvhLj') { const _0x52ea40 = document[_0x495e79(0x2fc)](_0x495e79(0x427)); _0x52ea40[_0x495e79(0x109)] = ''; const _0x42d6c = _0x58c10b => { const _0x4e0028 = _0x495e79; _0x21e37d[_0x4e0028(0x6b9)][_0x58c10b] = null; if (_0x58c10b === _0x4e0028(0xaa9)) _0x21e37d[_0x4e0028(0x6b9)]['imageId'] = null; _0x392f65(); }, _0x3fe1ff = _0x21e37d[_0x495e79(0x6b9)][_0x495e79(0x803)], _0x971cc7 = _0x21e37d[_0x495e79(0x6b9)][_0x495e79(0x529)]; if (_0x3fe1ff) { const _0x2149b9 = document[_0x495e79(0x53d)](_0x495e79(0x6b3)); _0x2149b9[_0x495e79(0x175)] = _0x495e79(0x9c0), _0x2149b9[_0x495e79(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2149b9[_0x495e79(0x9d2)](_0x495e79(0x343))[_0x495e79(0x754)] = () => _0x42d6c(_0x495e79(0xaa9)), _0x52ea40['appendChild'](_0x2149b9), _0x3bbeae(_0x3fe1ff)[_0x495e79(0x8c0)](_0x2b1b99 => { const _0x460cec = _0x495e79; if (_0x460cec(0x4e6) === _0x460cec(0x146)) { const _0x46c35b = _0x307f67['getElementById'](_0x460cec(0x357)); _0x29d72a['getElementById'](_0x460cec(0x9d3))['textContent'] = '账本', _0x327fec[_0x460cec(0x2fc)](_0x460cec(0x28e))[_0x460cec(0x109)] = ''; const _0x234211 = _0x45beae[_0x460cec(0x2fe)](_0x3bdbc1['accountingLedger'])['sort']((_0x2f836c, _0x526311) => new _0x298545(_0x526311) - new _0x2f5759(_0x2f836c)); if (_0x234211[_0x460cec(0x8ab)] === 0x0) { _0x46c35b[_0x460cec(0x109)] = _0x460cec(0x8b7); return; } _0x46c35b[_0x460cec(0x109)] = '', _0x234211[_0x460cec(0xb13)](_0x59a5d8 => { const _0xcd0de1 = _0x460cec, _0x37f0f9 = _0x360737[_0xcd0de1(0x53d)](_0xcd0de1(0x6b3)); _0x37f0f9[_0xcd0de1(0x175)] = 'expense-item', _0x37f0f9[_0xcd0de1(0xab9)][_0xcd0de1(0x45b)] = 'pointer'; const _0x1efa3a = _0x17ab7c[_0xcd0de1(0x288)][_0x59a5d8], _0x4ed9fc = _0x1efa3a[_0xcd0de1(0x781)]['reduce']((_0xa09757, _0x55c979) => _0xa09757 + (_0x55c979[_0xcd0de1(0xb31)] || 0x0), 0x0); _0x37f0f9['innerHTML'] = _0xcd0de1(0x5e3) + _0x59a5d8 + _0xcd0de1(0x4c0) + _0x4ed9fc[_0xcd0de1(0x6be)](0x2) + '</span>', _0x37f0f9['addEventListener'](_0xcd0de1(0x6f4), () => { const _0x206a20 = _0xcd0de1; _0x218345[_0x206a20(0x402)][_0x206a20(0x3c2)](_0x206a20(0x911)), _0x51b3a7['classList'][_0x206a20(0x3ea)]('active'), _0x3d5e09(_0x1efa3a, _0x59a5d8); }), _0x46c35b[_0xcd0de1(0x30a)](_0x37f0f9); }); } else { const _0x51d915 = document[_0x460cec(0x2fc)](_0x460cec(0x518)); if (_0x51d915 && _0x2b1b99) { if (_0x460cec(0x265) === 'LYhoK') { const _0x1e0071 = _0x4276e1[0x0][_0x460cec(0x1b5)](), _0x392cc6 = _0x422087[0x1][_0x460cec(0x1b5)]()[_0x460cec(0x8f0)](/^"|"$/g, ''); _0x376bd5[_0x1e0071] = _0x392cc6; } else _0x51d915[_0x460cec(0x9fb)] = URL[_0x460cec(0x3a1)](_0x2b1b99); } } }); } if (_0x971cc7) { const _0x54afdb = document[_0x495e79(0x53d)](_0x495e79(0x6b3)); _0x54afdb['className'] = _0x495e79(0x9c0), _0x54afdb[_0x495e79(0x109)] = _0x495e79(0x58f) + (_0x971cc7['coverUrl'] || _0x30019f) + _0x495e79(0x580) + _0x971cc7[_0x495e79(0xaa1)] + _0x495e79(0x31f) + _0x971cc7[_0x495e79(0x20b)] + _0x495e79(0x27f), _0x54afdb[_0x495e79(0x9d2)]('.remove-attachment-btn')['onclick'] = () => _0x42d6c(_0x495e79(0x529)), _0x52ea40[_0x495e79(0x30a)](_0x54afdb); } } else { const _0xd369c4 = new _0x4608f5(_0x47ec46[_0x495e79(0x6cc)]); _0x3d4cda += _0x495e79(0xade) + _0x54a2cf[_0x495e79(0x4a8)] + _0x495e79(0x961) + _0xd39049(_0xd369c4) + '\x0a'; } } async function _0x3dea6e(_0xc17f94) { const _0x515d2a = _0x4a89cb; if (_0x515d2a(0x76c) === _0x515d2a(0x76c)) { const _0x4d5946 = _0x21e37d[_0x515d2a(0x635)][_0x515d2a(0x354)](_0x471388 => _0x471388['id'] === _0x21e37d[_0x515d2a(0x26c)]); if (!_0x4d5946) return; _0x171a38(!![], '大家正在赶来回复...'), _0x21e37d[_0x515d2a(0x5f4)] = !![]; try { const _0x381d39 = _0x4d5946[_0x515d2a(0xe4)][_0x515d2a(0x592)](_0x426f9b => _0xe97381(_0x426f9b))[_0x515d2a(0x4b7)](Boolean), _0x24b007 = _0x1c7188(), _0x303f95 = _0x381d39[_0x515d2a(0x592)](_0xbc0b56 => { const _0x1cb20f = _0x515d2a; if (_0x1cb20f(0x650) === _0x1cb20f(0xb1b)) _0x5455dd[_0x1cb20f(0x705)](_0x215f87); else { const { omniText: _0x2680bd } = _0x434953(_0xbc0b56['id'], null), _0x5938d4 = _0x345da9(_0xbc0b56['id']), _0x4670c2 = _0xbc0b56['linkedWorldBookIds'] && _0xbc0b56['linkedWorldBookIds']['length'] > 0x0 ? _0x1cb20f(0x6ba) + _0xbc0b56[_0x1cb20f(0x4a8)] + _0x1cb20f(0x7f1) + _0xbc0b56[_0x1cb20f(0x12e)][_0x1cb20f(0x592)](_0x29895a => _0x21e37d['worldBooks'][_0x1cb20f(0x354)](_0x180539 => _0x180539['id'] === _0x29895a))[_0x1cb20f(0x4b7)](Boolean)[_0x1cb20f(0x592)](_0x42f087 => _0x1cb20f(0xabd) + _0x42f087[_0x1cb20f(0x4a8)] + '\x0a' + _0x42f087[_0x1cb20f(0xaf8)])[_0x1cb20f(0x2c2)]('') : ''; return '-\x20姓名:\x20' + _0xbc0b56[_0x1cb20f(0x4a8)] + _0x1cb20f(0x58d) + _0xbc0b56['id'] + _0x1cb20f(0x6f0) + _0xbc0b56[_0x1cb20f(0x87d)] + _0x1cb20f(0x860) + _0x2680bd + '\x0a' + _0x5938d4 + '\x0a' + _0x4670c2; } })[_0x515d2a(0x2c2)]('\x0a\x0a'), _0x21f5cb = _0x327188(_0xc17f94[_0x515d2a(0x1b4)]) || { 'name': '用户' }, _0x2aaa57 = _0x21f5cb[_0x515d2a(0x87d)] ? '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20' + _0x21f5cb['name'] + _0x515d2a(0x80c) + _0x21f5cb['persona'] + '\x0a' : ''; let _0x3f0f59 = null; if (_0xc17f94[_0x515d2a(0xaa9)]) _0x3f0f59 = _0xc17f94[_0x515d2a(0xaa9)]; else { if (_0xc17f94['imageId']) { if (_0x515d2a(0x26b) !== 'AQBnu') { const _0x192682 = _0x552d11(_0x5f3603[_0x515d2a(0x2fa)]); if (!_0x192682) return; _0x4cc6e3 = !![], _0x329670['style']['display'] = 'block'; const _0x4b7d54 = _0x192682[_0x515d2a(0x174)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0xe81ac7[_0x515d2a(0x2fc)](_0x515d2a(0x143))['value'] = _0x4b7d54['x'], _0x2cbd1f[_0x515d2a(0x2fc)](_0x515d2a(0xa3e))[_0x515d2a(0x91b)] = _0x4b7d54['y'], _0x4bcd69[_0x515d2a(0x2fc)]('sprite-slider-scale')['value'] = _0x4b7d54[_0x515d2a(0x5fe)] * 0x64, _0x51eeec = { ..._0x4b7d54 }, _0x22f122[_0x515d2a(0x2fc)](_0x515d2a(0x439))['style']['display'] = _0x515d2a(0x1ea), _0x3762cd[_0x515d2a(0x2fc)](_0x515d2a(0x81f))[_0x515d2a(0xab9)][_0x515d2a(0x243)] = _0x515d2a(0x1ea); } else try { if (_0x515d2a(0x57c) !== _0x515d2a(0x57c)) _0x551c2d[_0x515d2a(0x25f)](_0x1c0cb6, _0x1dd931['stringify'](_0x2165e8)); else { const _0x3cf388 = await _0x3bbeae(_0xc17f94[_0x515d2a(0x803)]); _0x3cf388 && (_0x515d2a(0x4c1) === _0x515d2a(0x4c1) ? _0x3f0f59 = await _0x425503(_0x3cf388) : (_0x42e0ca[_0x515d2a(0x497)] = _0x515d2a(0x529), _0x49528c['assign'](_0x242d62, _0x56dde9))); } } catch (_0xbf1342) { if (_0x515d2a(0x4ce) !== 'tUiMx') { const _0x3f7e59 = _0x3567d9[_0x515d2a(0x3a1)](_0x40e9a9); _0x4ea15e['src'] = _0x3f7e59, _0x48a8b9[_0x515d2a(0x4b8)] = () => _0x10d856[_0x515d2a(0x705)](_0x3f7e59); } else console[_0x515d2a(0xa12)](_0x515d2a(0x8ad), _0xbf1342); } } } let _0x165a24 = _0x21f5cb[_0x515d2a(0x4a8)] + _0x515d2a(0x6af) + _0xc17f94[_0x515d2a(0xaf8)] + '”'; _0x3f0f59 && (_0x165a24 += '\x20[并附上了一张图片]'); _0xc17f94[_0x515d2a(0x497)] === _0x515d2a(0x529) && (_0x165a24 += _0x515d2a(0x3bf) + _0xc17f94['songName'] + _0x515d2a(0x919) + _0xc17f94['artist'] + ']'); const _0x124dde = '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a' + _0x303f95 + '\x0a\x0a' + _0x2aaa57 + '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a' + _0x24b007 + _0x515d2a(0x450) + _0x165a24 + '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', _0x1362c7 = [{ 'role': _0x515d2a(0x707), 'content': _0x124dde }], _0x222d2d = { 'role': _0x515d2a(0x1a8), 'content': _0x515d2a(0x4b4) }; _0x3f0f59 && (_0x222d2d[_0x515d2a(0xaa9)] = _0x3f0f59); _0x1362c7[_0x515d2a(0x9f2)](_0x222d2d); const _0x232016 = await _0xa3cec0(_0x1362c7, { 'json': !![] }), _0xdbeda2 = _0x232016[_0x515d2a(0x63a)](/({[\s\S]*})/); if (!_0xdbeda2) throw new Error('AI未能返回有效的JSON对象。'); const _0x197aac = JSON[_0x515d2a(0x16b)](_0xdbeda2[0x1]), _0x14d803 = _0x4d5946[_0x515d2a(0x8e6)][_0x515d2a(0x354)](_0x878ca4 => _0x878ca4['id'] === _0xc17f94['id']); _0x14d803 && (_0x14d803[_0x515d2a(0x73d)] = _0x197aac[_0x515d2a(0x73d)] || [], _0x14d803[_0x515d2a(0x2a8)] = (_0x197aac[_0x515d2a(0x2a8)] || [])['map']((_0xffe0f, _0x2bf764) => ({ ..._0xffe0f, 'commentId': 'c_' + _0xc17f94[_0x515d2a(0x6cc)] + '_' + _0x2bf764 })), _0x37e4ef(), _0x216205()); } catch (_0x532cb2) { _0x515d2a(0x87e) === _0x515d2a(0x870) ? _0x31b64f() : (console[_0x515d2a(0xa12)](_0x515d2a(0x871), _0x532cb2), _0x2d1f89(_0x515d2a(0xa41))); } finally { _0x515d2a(0x6b6) !== _0x515d2a(0x407) ? (_0x171a38(![]), _0x21e37d[_0x515d2a(0x5f4)] = ![]) : _0x104dc7(_0x515d2a(0x554)); } } else { const _0xf81ce3 = _0x529b05[_0x515d2a(0x16b)](_0x5133f3); _0xf0ad99['isArray'](_0xf81ce3) && (_0x4f3bc5[_0x515d2a(0x91b)] = _0xf81ce3[_0x515d2a(0x592)](_0x7b9f81 => _0x7b9f81[_0x515d2a(0x4a8)] + '--' + _0x7b9f81[_0x515d2a(0x677)])[_0x515d2a(0x2c2)]('\x0a')); } } function _0x14fa52() { const _0x4be881 = _0x4a89cb; if (_0x4be881(0x8d0) !== _0x4be881(0x5b8)) { const _0x25b673 = _0x21e37d[_0x4be881(0x635)][_0x4be881(0x354)](_0x93fd9f => _0x93fd9f['id'] === _0x21e37d[_0x4be881(0x26c)]), _0xd048ee = _0x25b673?.[_0x4be881(0x482)]; let _0x1dd26b = _0x21e37d[_0x4be881(0x63b)][_0x4be881(0x354)](_0x539349 => _0x539349['id'] === _0xd048ee); if (!_0x1dd26b) { if (_0x4be881(0x334) !== _0x4be881(0x334)) { const _0xc5779f = _0x438cad[_0x4be881(0x354)](_0x32452a => _0x32452a[_0x4be881(0x4a8)] === _0x24b567[_0x4be881(0x4a8)]); if (_0xc5779f) _0x4df9ec['assign'](_0x37811b, { 'content': _0x4be881(0x826) + _0xc5779f['name'] + ']', 'displayUrl': _0xc5779f['url'] }); else _0x138c61[_0x4be881(0xaf8)] = '[sticker:' + _0x274a59[_0x4be881(0x4a8)] + ']'; } else _0x1dd26b = _0x21e37d[_0x4be881(0x63b)][_0x4be881(0x354)](_0x37b113 => _0x37b113['id'] === _0x21e37d[_0x4be881(0x514)]); } !_0x1dd26b && (_0x4be881(0x6ae) === _0x4be881(0x6ae) ? _0x1dd26b = _0x21e37d[_0x4be881(0x63b)][0x0] : (_0x1b9aaf[_0x4be881(0xab9)][_0x4be881(0x243)] = _0x4be881(0x1ea), _0x5b0f3b[_0x4be881(0xab9)][_0x4be881(0x7d5)] = _0x4be881(0x81e), _0x5a0ebd['style'][_0x4be881(0x3ee)] = _0x4be881(0x645))), _0x1dd26b && (document['getElementById']('user-post-avatar')[_0x4be881(0x9fb)] = _0x1dd26b['avatar'] || _0x3cf6e1); } else _0x4bb711(![]), _0x22e02d[_0x4be881(0x37e)][_0x4be881(0x91b)] = ''; } function _0x210113(_0x3f172b) { const _0x558b37 = _0x4a89cb; let _0x2796cb = 0x0, _0x171f05 = 0x0, _0x58d032 = 0x0; if (_0x3f172b[_0x558b37(0x8ab)] == 0x4) _0x2796cb = '0x' + _0x3f172b[0x1] + _0x3f172b[0x1], _0x171f05 = '0x' + _0x3f172b[0x2] + _0x3f172b[0x2], _0x58d032 = '0x' + _0x3f172b[0x3] + _0x3f172b[0x3]; else { if (_0x3f172b['length'] == 0x7) { if (_0x558b37(0x6e6) !== _0x558b37(0x6e6)) { const { omniText: _0x4f7d3a } = _0x1d3c94(_0x47bfb5['id'], null), _0xbe00e5 = _0x3d260e(_0x4b00ea['id']), _0x3afdf7 = _0x50e441[_0x558b37(0x12e)] && _0x43f0a2[_0x558b37(0x12e)][_0x558b37(0x8ab)] > 0x0 ? _0x558b37(0x6ba) + _0x51287f[_0x558b37(0x4a8)] + '的个人专属世界观设定\x0a' + _0x266a87['linkedWorldBookIds'][_0x558b37(0x592)](_0xd71c28 => _0x3c8a5d['worldBooks'][_0x558b37(0x354)](_0x2ed717 => _0x2ed717['id'] === _0xd71c28))['filter'](_0x44e722)[_0x558b37(0x592)](_0xefa444 => _0x558b37(0xabd) + _0xefa444[_0x558b37(0x4a8)] + '\x0a' + _0xefa444[_0x558b37(0xaf8)])[_0x558b37(0x2c2)]('') : ''; return '-\x20姓名:\x20' + _0x584ef5[_0x558b37(0x4a8)] + _0x558b37(0x58d) + _0x2a4232['id'] + _0x558b37(0x6f0) + _0x53cc2f['persona'] + _0x558b37(0xeb) + _0x4f7d3a + '\x0a' + _0xbe00e5 + '\x0a' + _0x3afdf7; } else _0x2796cb = '0x' + _0x3f172b[0x1] + _0x3f172b[0x2], _0x171f05 = '0x' + _0x3f172b[0x3] + _0x3f172b[0x4], _0x58d032 = '0x' + _0x3f172b[0x5] + _0x3f172b[0x6]; } } _0x2796cb /= 0xff, _0x171f05 /= 0xff, _0x58d032 /= 0xff; let _0x52380c = Math[_0x558b37(0x395)](_0x2796cb, _0x171f05, _0x58d032), _0xa78106 = Math[_0x558b37(0x477)](_0x2796cb, _0x171f05, _0x58d032), _0x3440cf = _0xa78106 - _0x52380c, _0x3164b9 = 0x0, _0x2852fb = 0x0, _0xa949e6 = 0x0; if (_0x3440cf == 0x0) _0x3164b9 = 0x0; else { if (_0xa78106 == _0x2796cb) _0x3164b9 = (_0x171f05 - _0x58d032) / _0x3440cf % 0x6; else { if (_0xa78106 == _0x171f05) _0x3164b9 = (_0x58d032 - _0x2796cb) / _0x3440cf + 0x2; else _0x3164b9 = (_0x2796cb - _0x171f05) / _0x3440cf + 0x4; } } _0x3164b9 = Math[_0x558b37(0x2dd)](_0x3164b9 * 0x3c); if (_0x3164b9 < 0x0) _0x3164b9 += 0x168; return _0xa949e6 = (_0xa78106 + _0x52380c) / 0x2, _0x2852fb = _0x3440cf == 0x0 ? 0x0 : _0x3440cf / (0x1 - Math[_0x558b37(0x7c6)](0x2 * _0xa949e6 - 0x1)), _0x2852fb = +(_0x2852fb * 0x64)[_0x558b37(0x6be)](0x1), _0xa949e6 = +(_0xa949e6 * 0x64)['toFixed'](0x1), { 'h': _0x3164b9, 's': _0x2852fb, 'l': _0xa949e6 }; } function _0xf35ba() { const _0x57b9de = _0x4a89cb, _0x291e3d = (_0x5a5433, _0x45fe90, _0x27413b) => { const _0x49344c = _0x1826; if (_0x49344c(0x67d) === _0x49344c(0x582)) _0x672229['error'](_0x49344c(0x15d), _0x4f5cb4), _0x2f7595(_0x49344c(0x7f6) + _0x2e5dfe[_0x49344c(0x420)]); else { const _0x7138a7 = document[_0x49344c(0x2fc)](_0x5a5433); if (!_0x7138a7) return; let _0x3a475f = null; try { _0x3a475f = JSON[_0x49344c(0x16b)](localStorage['getItem'](_0x45fe90) || '{}'); } catch { _0x3a475f = {}; } _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x7b2)] = _0x49344c(0x4e3), _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x388)] = '', _0x7138a7[_0x49344c(0xab9)]['left'] = '', _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x1dc)] = '', _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x6d9)] = '', _0x7138a7[_0x49344c(0xab9)]['transform'] = ''; if (typeof _0x3a475f[_0x49344c(0x388)] === _0x49344c(0x89f) && typeof _0x3a475f[_0x49344c(0x9b9)] === _0x49344c(0x89f)) _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x388)] = _0x3a475f[_0x49344c(0x388)] + '%', _0x7138a7[_0x49344c(0xab9)][_0x49344c(0x9b9)] = _0x3a475f['left'] + '%'; else { if (_0x49344c(0xa7e) !== _0x49344c(0xb11)) for (const _0x556873 in _0x27413b) { _0x49344c(0x6ca) === _0x49344c(0x9f4) ? _0x21d3bd(new _0x36d0f8(_0x49344c(0x4e5))) : _0x7138a7[_0x49344c(0xab9)][_0x556873] = _0x27413b[_0x556873]; } else _0x24a85e[_0x49344c(0x9f2)]({ 'time': _0x5ac4f7, 'text': _0x4e4208 }); } } }; _0x291e3d(_0x57b9de(0x45f), _0x57b9de(0x370), { 'top': '15%', 'left': _0x57b9de(0xfc), 'transform': 'translateX(-50%)' }), _0x291e3d(_0x57b9de(0x567), _0x57b9de(0x716), { 'top': _0x57b9de(0x8fb), 'right': '4%' }), _0x291e3d(_0x57b9de(0x461), _0x57b9de(0x93f), { 'top': _0x57b9de(0x8fb), 'right': _0x57b9de(0x620) }), _0x291e3d(_0x57b9de(0xa94), _0x57b9de(0xb33), { 'top': '8%', 'right': _0x57b9de(0x620) }), _0x291e3d('app-world-book', 'appIconPosition_app-world-book', { 'top': '8%', 'right': '4%' }), _0x291e3d(_0x57b9de(0x8da), _0x57b9de(0x238), { 'top': _0x57b9de(0xfa), 'left': '5%' }), _0x291e3d(_0x57b9de(0x624), _0x57b9de(0x3d2), { 'top': _0x57b9de(0x66c), 'left': '29%' }), _0x291e3d('app-snoop', _0x57b9de(0x188), { 'top': _0x57b9de(0x66c), 'left': '5%' }), _0x291e3d('app-accounting', _0x57b9de(0x894), { 'top': '59%', 'left': _0x57b9de(0x4f7) }), _0x291e3d(_0x57b9de(0x9cf), 'badgeState', { 'top': _0x57b9de(0x921), 'right': '5%' }), _0x291e3d('card-widget-2', 'cardState2', { 'top': '8%', 'left': '5%' }); const _0x1b4077 = document['getElementById'](_0x57b9de(0x799)); _0x1b4077 && (_0x1b4077[_0x57b9de(0xab9)][_0x57b9de(0x7b2)] = _0x57b9de(0x4e3), _0x1b4077[_0x57b9de(0xab9)][_0x57b9de(0x388)] = _0x57b9de(0x385), _0x1b4077['style'][_0x57b9de(0x9b9)] = _0x57b9de(0xfc), _0x1b4077[_0x57b9de(0xab9)][_0x57b9de(0x202)] = 'translateX(-50%)', _0x1b4077[_0x57b9de(0xab9)][_0x57b9de(0x243)] = _0x57b9de(0xa25)); const _0x4ccb0f = document[_0x57b9de(0x2fc)]('music-widget'); _0x4ccb0f && (_0x57b9de(0x7cb) === _0x57b9de(0x149) ? _0x51e1f7[_0x57b9de(0x402)][_0x57b9de(0x3c2)]('show') : (_0x4ccb0f[_0x57b9de(0xab9)][_0x57b9de(0x7b2)] = _0x57b9de(0x4e3), _0x4ccb0f[_0x57b9de(0xab9)][_0x57b9de(0x388)] = '35%', _0x4ccb0f['style'][_0x57b9de(0x9b9)] = _0x57b9de(0xfc), _0x4ccb0f[_0x57b9de(0xab9)][_0x57b9de(0x202)] = _0x57b9de(0x788), _0x4ccb0f[_0x57b9de(0xab9)][_0x57b9de(0x243)] = 'inline-block')); } function _0x45e573() { const _0x23f8d7 = _0x4a89cb, _0x2dd3e3 = document[_0x23f8d7(0x2fc)](_0x23f8d7(0x536)); _0x2dd3e3[_0x23f8d7(0x109)] = ''; const _0x54443c = document['querySelectorAll'](_0x23f8d7(0x18f)); _0x54443c[_0x23f8d7(0xb13)](_0x510563 => { const _0x4ec74b = _0x23f8d7, _0x5eeeda = _0x510563['id'], _0x415c93 = _0x510563[_0x4ec74b(0x9d2)](_0x4ec74b(0xa4f))[_0x4ec74b(0x908)], _0x43cb46 = 'customIcon_' + _0x5eeeda, _0xae57ba = localStorage['getItem'](_0x43cb46), _0x1c0587 = document[_0x4ec74b(0x53d)](_0x4ec74b(0x6b3)); _0x1c0587[_0x4ec74b(0x175)] = _0x4ec74b(0x386), _0x1c0587[_0x4ec74b(0xab9)]['padding'] = _0x4ec74b(0x9c9), _0x1c0587[_0x4ec74b(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_' + _0x5eeeda + _0x4ec74b(0xacc) + (_0xae57ba || _0x4ec74b(0xabf)) + _0x4ec74b(0x380) + _0x415c93 + _0x4ec74b(0x657) + _0x5eeeda + '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_' + _0x5eeeda + _0x4ec74b(0x126) + _0x43cb46 + '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x2dd3e3['appendChild'](_0x1c0587); const _0x121b31 = document['getElementById'](_0x4ec74b(0x13e) + _0x5eeeda); _0x121b31[_0x4ec74b(0xe9)](_0x4ec74b(0x782), async _0x51f4f => { const _0x4ef80e = _0x4ec74b; if (_0x4ef80e(0x9e9) !== 'ZKtWQ') { const _0x50927d = _0x51f4f[_0x4ef80e(0x37e)]['files'][0x0]; if (!_0x50927d) return; try { const _0x5cf020 = await _0x52f5ff(_0x50927d); localStorage[_0x4ef80e(0x25f)](_0x43cb46, _0x5cf020), document[_0x4ef80e(0x2fc)](_0x4ef80e(0xabc) + _0x5eeeda)[_0x4ef80e(0x9fb)] = _0x5cf020, _0x3b2f7f(); } catch (_0x5aeabd) { if (_0x4ef80e(0x832) !== _0x4ef80e(0x94c)) _0x2d1f89(_0x4ef80e(0x440) + _0x5aeabd['message']); else return ''; } } else _0xc572e7['error'](_0x4ef80e(0x1cf), _0x1a1b4d); }); }); } function _0x3b2f7f() { const _0x356ad6 = _0x4a89cb; if (_0x356ad6(0x3f8) !== _0x356ad6(0x3f8)) { const _0x38c6b1 = _0x406fc3[_0x356ad6(0x4ee)]('p'); _0x38c6b1[_0x356ad6(0xb13)](_0x15dbdc => _0x15dbdc[_0x356ad6(0x402)][_0x356ad6(0x3c2)](_0x356ad6(0x911))); const _0x2aae35 = _0x2fd567[_0x356ad6(0x2fc)](_0x356ad6(0x4cc) + _0x197387); _0x2aae35 && (_0x2aae35[_0x356ad6(0x402)]['add']('active'), _0x2aae35[_0x356ad6(0x410)]({ 'behavior': 'smooth', 'block': _0x356ad6(0x165) })); } else { const _0x14665b = document[_0x356ad6(0x4ee)]('.app-icon'); _0x14665b['forEach'](_0x39dbae => { const _0x26c980 = _0x356ad6; if (_0x26c980(0x5bb) === _0x26c980(0x45a)) _0x3e156d['error'](_0x26c980(0x11d) + _0x464943[_0x26c980(0x272)], _0x4b98df); else { const _0x2a4476 = _0x39dbae['id'], _0x5da681 = _0x26c980(0x88e) + _0x2a4476, _0x1fd881 = localStorage[_0x26c980(0x7b7)](_0x5da681), _0x5e085a = _0x39dbae['querySelector']('.app-icon-img'); if (_0x1fd881) _0x5e085a[_0x26c980(0x109)] = _0x26c980(0x2cf) + _0x1fd881 + _0x26c980(0x55f); else { const _0x2c3fd5 = document[_0x26c980(0x9d2)](_0x26c980(0x987) + _0x2a4476 + _0x26c980(0x456) + _0x2a4476 + '\x20.app-icon-img')?.[_0x26c980(0x109)]; if (_0x2c3fd5) { if (_0x26c980(0x979) === _0x26c980(0x979)) _0x5e085a[_0x26c980(0x109)] = _0x2c3fd5; else { const _0x4a03aa = _0x1258d8[0x0][_0x26c980(0x1b5)](), _0x40063 = _0x138e4c[0x1][_0x26c980(0x1b5)](), _0x1d055d = { '歌名': _0x26c980(0x69b), '艺术家': '歌手', '专辑': '专辑' }; _0x1d055d[_0x4a03aa] && (_0x226d1b[_0x1d055d[_0x4a03aa]] = _0x40063); } } } } }); } } function _0x84abb5() { const _0xefae84 = _0x4a89cb; if (_0xefae84(0x8af) === 'uTvjt') { const _0x59ffcc = _0x33d363[_0xefae84(0x37e)][_0xefae84(0x18a)]; _0x1c12e7[_0xefae84(0x172)](_0xefae84(0x9b1) + _0x59ffcc['version'] + _0xefae84(0x92b)), !_0x59ffcc[_0xefae84(0x333)]['contains'](_0x29a3aa) && (_0x9fa54f['log'](_0xefae84(0xa5a) + _0x1ac9b3), _0x59ffcc[_0xefae84(0x7d8)](_0x3206a1, { 'keyPath': 'id' })), !_0x59ffcc['objectStoreNames'][_0xefae84(0x7e6)](_0xefae84(0x761)) && (_0x37d777['log'](_0xefae84(0xa08)), _0x59ffcc[_0xefae84(0x7d8)]('music_library', { 'keyPath': 'id' })), !_0x59ffcc[_0xefae84(0x333)][_0xefae84(0x7e6)](_0x57af08) && (_0x48d496['log'](_0xefae84(0xa5a) + _0x28186f), _0x59ffcc[_0xefae84(0x7d8)](_0x1c2318, { 'keyPath': 'id' })); } else { const _0x17049e = _0x21e37d[_0xefae84(0x635)][_0xefae84(0x354)](_0x471210 => _0x471210['id'] === _0x21e37d[_0xefae84(0x26c)]), _0x3e94ec = _0x4cc3e0(); let _0x542955 = []; if (_0x17049e && _0x17049e[_0xefae84(0x8e6)]) { const _0x24aa30 = _0x17049e[_0xefae84(0x8e6)][_0xefae84(0x4b7)](_0x3b402a => _0x3b402a[_0xefae84(0x497)] === _0xefae84(0x529) && _0x3b402a[_0xefae84(0x25e)])[_0xefae84(0x592)](_0x2bd259 => ({ ..._0x2bd259, 'source': 'feed' })); _0x542955['push'](..._0x24aa30); } if (_0x3e94ec && _0x21e37d[_0xefae84(0x31d)]) { const _0x30b010 = _0x21e37d[_0xefae84(0x31d)][_0xefae84(0x4b7)](_0x209539 => _0x209539['type'] === _0xefae84(0x529) && _0x209539[_0xefae84(0x25e)])[_0xefae84(0x592)](_0x2ae81d => ({ ..._0x2ae81d, 'source': _0xefae84(0x89b) })); _0x542955[_0xefae84(0x9f2)](..._0x30b010); } const _0x481a43 = Array['from'](new Map(_0x542955[_0xefae84(0x592)](_0xe7e3dc => [_0xe7e3dc[_0xefae84(0x25e)], _0xe7e3dc]))['values']()); _0x21e37d[_0xefae84(0x101)] = _0x481a43['sort']((_0xd11f4b, _0xa35d8a) => _0xa35d8a['timestamp'] - _0xd11f4b['timestamp']); } } function _0x4df575(_0x18dbda) { const _0x4c1cf7 = _0x4a89cb; if (_0x18dbda < 0x0 || _0x18dbda >= _0x1c8a26[_0x4c1cf7(0x8ab)]) return; _0x1d61a3 = _0x18dbda; const _0x440053 = _0x1c8a26[_0x18dbda]; _0x483c46[_0x4c1cf7(0x9fb)] = _0x440053[_0x4c1cf7(0x25e)] || _0x440053[_0x4c1cf7(0x677)], _0x483c46['play'](), _0xb650c5(), _0x304d87(); } function _0xb650c5() { const _0x5c4039 = _0x1c8a26[_0x1d61a3]; _0x38dbb6(_0x5c4039); } function _0x304d87() { const _0x2f682d = _0x4a89cb; try { 'YILTX' === _0x2f682d(0x1b1) ? _0x4982ac['innerHTML'] = _0x2f682d(0x55c) + _0x3aa497 + _0x2f682d(0x4cf) + (_0x27162e === _0x2f682d(0x65d) ? '#a7c7e7' : _0x2f682d(0x5bc)) + _0x2f682d(0xa95) + _0x47e018 + _0x2f682d(0x3ba) + _0x2db915 : localStorage['setItem'](_0x2f682d(0x906), JSON[_0x2f682d(0x41f)]({ 'playlist': _0x21e37d['musicPlaylist'], 'currentIndex': _0x21e37d[_0x2f682d(0x78d)] })); } catch (_0x21ace6) { console[_0x2f682d(0xa12)](_0x2f682d(0x12b), _0x21ace6); } } function _0x2dc505() { const _0xa12586 = _0x4a89cb; if (_0xa12586(0x86e) === _0xa12586(0x86e)) try { if ('dSkFK' !== 'dSkFK') { const _0x230375 = _0x15c89a[_0xa12586(0x635)][_0xa12586(0x354)](_0x34ed1f => _0x34ed1f['id'] === _0x554c81[_0xa12586(0x26c)]), _0x270094 = _0x230375?.[_0xa12586(0x482)]; let _0x3fd3ef = _0x93a3db[_0xa12586(0x63b)][_0xa12586(0x354)](_0x4aec2a => _0x4aec2a['id'] === _0x270094); !_0x3fd3ef && (_0x3fd3ef = _0x278d07[_0xa12586(0x63b)]['find'](_0x21951d => _0x21951d['id'] === _0x573a89[_0xa12586(0x514)])), !_0x3fd3ef && (_0x3fd3ef = _0x229510[_0xa12586(0x63b)][0x0]), _0x3fd3ef && (_0x12f1be[_0xa12586(0x2fc)]('user-post-avatar')[_0xa12586(0x9fb)] = _0x3fd3ef['avatar'] || _0x1ec3bc); } else { const _0x1f01bc = localStorage[_0xa12586(0x7b7)](_0xa12586(0x906)); if (_0x1f01bc) { const { playlist: _0x3a2978, currentIndex: _0x357e6b } = JSON['parse'](_0x1f01bc); Array[_0xa12586(0x684)](_0x3a2978) && _0x3a2978[_0xa12586(0x8ab)] > 0x0 && _0x357e6b > -0x1 && (_0x21e37d[_0xa12586(0x101)] = _0x3a2978, _0x21e37d[_0xa12586(0x78d)] = _0x357e6b, _0x21e37d['isPlaying'] = ![], _0xb650c5()); } } } catch (_0x175747) { 'OXSiY' === _0xa12586(0x197) ? console['error'](_0xa12586(0xfe), _0x175747) : _0x5cb42b(_0xe210f4); } else _0x356031 !== _0x1440f2[_0xa12586(0x9d2)](_0xa12586(0x5e5)) && (_0x38f003[_0xa12586(0x908)] = '▶'); } function _0x46a126(_0x2e27b9) { const _0x4455f5 = _0x4a89cb; if (window[_0x4455f5(0x537)]) clearTimeout(window['diaryPressTimer']); const _0x5764c9 = _0x2e27b9[_0x4455f5(0x37e)]['closest'](_0x4455f5(0x33a)); if (!_0x5764c9) return; const _0x73d6af = _0x5764c9['dataset'][_0x4455f5(0x6cc)], _0x17cfdf = _0x5764c9[_0x4455f5(0x402)][_0x4455f5(0x7e6)](_0x4455f5(0x1a8)) ? 'user' : 'ai'; if (!_0x73d6af) return; const _0x2a41cf = () => { const _0x493fca = _0x4455f5; window[_0x493fca(0x537)] = setTimeout(() => { const _0x5a8807 = _0x493fca; if (_0x2e27b9[_0x5a8807(0x497)] === 'touchstart') _0x2e27b9[_0x5a8807(0x6bc)](); _0x155c14(parseInt(_0x73d6af, 0xa), _0x17cfdf); }, 0x320); }, _0x4c96b6 = () => { const _0x3dd606 = _0x4455f5; if (_0x3dd606(0x726) === 'rEpUa') { if (window['diaryPressTimer']) clearTimeout(window[_0x3dd606(0x537)]); } else _0x1b39e5[_0x3dd606(0x9f2)]({ 'role': _0x3dd606(0x1a8), 'content': _0xbb01e9 }), _0x258f2a['push']({ 'role': _0x3dd606(0x31e), 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' }); }; document[_0x4455f5(0xe9)](_0x4455f5(0x76b), _0x4c96b6, { 'once': !![] }), document[_0x4455f5(0xe9)](_0x4455f5(0x4a3), _0x4c96b6, { 'once': !![] }), document[_0x4455f5(0xe9)]('touchcancel', _0x4c96b6, { 'once': !![] }), _0x2a41cf(); } function _0x155c14(_0x5d8b9b, _0xab1e2f) { const _0x4b6b66 = _0x4a89cb, _0x3ac10b = _0x4b6b66(0x416) + _0x5d8b9b; let _0x156d05 = document[_0x4b6b66(0x2fc)](_0x3ac10b); if (_0x156d05) return; const _0x3b5cbb = _0x4b6b66(0x938) + _0x3ac10b + _0x4b6b66(0x4ac) + (_0xab1e2f === 'ai' ? _0x4b6b66(0x6c7) : '') + _0x4b6b66(0x87c); document[_0x4b6b66(0x6cd)]['insertAdjacentHTML'](_0x4b6b66(0x30b), _0x3b5cbb); const _0x1e86cb = document['getElementById'](_0x3ac10b), _0x1f9967 = () => _0x1e86cb['remove'](); _0x1e86cb[_0x4b6b66(0x9d2)]('.choice-modal-backdrop')[_0x4b6b66(0x754)] = _0x1f9967, _0x1e86cb['querySelector']('#diary-action-cancel')[_0x4b6b66(0x754)] = _0x1f9967, _0x1e86cb[_0x4b6b66(0x9d2)]('#diary-action-delete')['onclick'] = () => { _0x1ab2e1(_0x5d8b9b), _0x1f9967(); }, _0xab1e2f === 'ai' && ('QieZL' !== _0x4b6b66(0xa2e) ? (_0x315b4c(), _0x22c3f9(_0x4b6b66(0x9d0), _0x4b6b66(0xa20))) : _0x1e86cb[_0x4b6b66(0x9d2)](_0x4b6b66(0x52d))[_0x4b6b66(0x754)] = () => { const _0x54eb51 = _0x4b6b66; if (_0x54eb51(0x56f) === _0x54eb51(0x9a2)) { const _0x593488 = _0x24025d[_0x54eb51(0xaf8)][_0x54eb51(0x63a)](/：(.*?)]$/); _0x30a7a9[_0x54eb51(0xaf8)] = _0x54eb51(0xa3a) + (_0x593488 ? _0x593488[0x1] : '未知表情') + ']', _0x560db7[_0x54eb51(0x9f2)](_0x34e45d); } else _0x78c88d(_0x5d8b9b), _0x1f9967(); }); } async function _0x1ab2e1(_0x5e1030) { const _0x39c086 = _0x4a89cb; if (_0x39c086(0x373) !== 'HklGR') { _0x1bf14d(_0x39c086(0x83a)); return; } else { const _0x1300a5 = await _0x46bf1c('确定要删除这篇日记吗？此操作不可撤销。'); if (!_0x1300a5) return; const _0x573638 = _0x21e37d[_0x39c086(0x366)][_0x39c086(0x354)](_0x7b0597 => _0x7b0597[_0x39c086(0x387)] === _0x21e37d[_0x39c086(0x8bb)]); if (!_0x573638) return; const _0x5bf60e = _0x573638[_0x39c086(0x1d1)][_0x39c086(0x34e)](_0x10fde8 => _0x10fde8[_0x39c086(0x6cc)] === _0x5e1030); _0x5bf60e > -0x1 && (_0x573638[_0x39c086(0x1d1)][_0x39c086(0x7d1)](_0x5bf60e, 0x1), _0x37e4ef(), _0x17e50a(), _0x2d1f89(_0x39c086(0x944))); } } async function _0x78c88d(_0x41a73a) { const _0x29dd61 = _0x4a89cb; if (_0x29dd61(0x11f) === 'jnfPm') { const _0x4c33f3 = _0x21e37d[_0x29dd61(0x366)][_0x29dd61(0x354)](_0x7c4cfe => _0x7c4cfe['characterId'] === _0x21e37d['activeDiaryCharacterId']); if (!_0x4c33f3) return; const _0x26b581 = _0x4c33f3[_0x29dd61(0x1d1)][_0x29dd61(0x34e)](_0x15d8cc => _0x15d8cc[_0x29dd61(0x6cc)] === _0x41a73a); _0x26b581 > -0x1 && (_0x29dd61(0x36e) === 'qFMof' ? (_0x4cd1c1['getElementById']('editing-world-book-id')['value'] = '', _0x225342[_0x29dd61(0x2fc)](_0x29dd61(0xae4))[_0x29dd61(0x908)] = _0x29dd61(0x95f), _0x17c6c5[_0x29dd61(0x2fc)](_0x29dd61(0x1fc))[_0x29dd61(0x91b)] = '', _0x1190df[_0x29dd61(0x2fc)](_0x29dd61(0x231))[_0x29dd61(0x91b)] = '') : (_0x4c33f3[_0x29dd61(0x1d1)][_0x29dd61(0x7d1)](_0x26b581, 0x1), _0x37e4ef(), _0x17e50a(), await _0x17cc8f())); } else _0x38929b[_0x29dd61(0x288)] = _0x511c05['accountingLedger'], _0x5caf1a[_0x29dd61(0x172)](_0x29dd61(0x988)); } function _0x1be739() { const _0x462631 = _0x4a89cb, _0x5e5db0 = document[_0x462631(0x2fc)]('diary-list-container'); _0x5e5db0[_0x462631(0x109)] = ''; const _0x2b0e3c = _0x21e37d[_0x462631(0x32d)][_0x462631(0x4b7)](_0x493639 => _0x21e37d[_0x462631(0x69a)][_0x462631(0x732)](_0xa94cd4 => _0xa94cd4['type'] === 'private' && _0xa94cd4[_0x462631(0xad8)][_0x462631(0x6f7)](_0x493639['id']))); if (_0x2b0e3c[_0x462631(0x8ab)] === 0x0) { _0x5e5db0['innerHTML'] = _0x462631(0x910); return; } _0x2b0e3c[_0x462631(0xb13)](_0x2d91b0 => { const _0x11d442 = _0x462631; if ('TbdKx' !== _0x11d442(0x738)) { const _0x3ac83b = document['createElement']('li'); _0x3ac83b[_0x11d442(0x175)] = _0x11d442(0x3dd), _0x3ac83b[_0x11d442(0x977)][_0x11d442(0x493)] = _0x2d91b0['id'], _0x3ac83b[_0x11d442(0x109)] = _0x11d442(0x84c) + (_0x2d91b0[_0x11d442(0x496)] || _0x30019f) + _0x11d442(0x7d6) + _0x2d91b0[_0x11d442(0x4a8)] + _0x11d442(0x1cc), _0x3ac83b[_0x11d442(0xe9)](_0x11d442(0x6f4), () => { _0x401d76(_0x2d91b0['id']); }), _0x3ac83b[_0x11d442(0x9d2)](_0x11d442(0x2b9))[_0x11d442(0xe9)](_0x11d442(0x6f4), () => { const _0x222c5f = _0x11d442; _0x222c5f(0x222) !== _0x222c5f(0xaaf) ? _0x401d76(_0x2d91b0['id']) : _0x16214e[_0x222c5f(0x432)](); }), _0x3ac83b['querySelector']('.diary-delete-btn')[_0x11d442(0xe9)](_0x11d442(0x6f4), _0x5369f7 => { const _0x4f1c8e = _0x11d442; if (_0x4f1c8e(0x12f) !== _0x4f1c8e(0x12f)) { _0x217eb5(_0x4f1c8e(0x2ec)); return; } else _0x5369f7[_0x4f1c8e(0x7a7)](), _0x236aac(_0x2d91b0['id']); }), _0x5e5db0[_0x11d442(0x30a)](_0x3ac83b); } else _0x3057f1 = _0x11d442(0x82e) + _0x5cb193['name'] + _0x11d442(0x100); }); } function _0x401d76(_0x554442) { const _0x41d211 = _0x4a89cb, _0x4c8e7a = _0xe97381(_0x554442); if (!_0x4c8e7a) return; _0x21e37d[_0x41d211(0x8bb)] = _0x554442; const _0x5bdf49 = _0x21e37d[_0x41d211(0x366)]['find'](_0x2814a2 => _0x2814a2[_0x41d211(0x387)] === _0x554442), _0x5b49ac = _0x5bdf49 ? _0x5bdf49[_0x41d211(0x1d1)][_0x41d211(0x8ab)] : 0x0, _0x4b4a95 = 0x2; _0x21e37d[_0x41d211(0x7d7)] = Math[_0x41d211(0x477)](0x0, Math[_0x41d211(0x157)](_0x5b49ac / _0x4b4a95) - 0x1), document['getElementById']('diary-char-name-header')['textContent'] = _0x4c8e7a[_0x41d211(0x4a8)] + '的日记本', _0x17e50a(), _0x43c005(_0x41d211(0x930), _0x41d211(0x5fd)); } function _0x17e50a() { const _0x57260f = _0x4a89cb; if (_0x57260f(0x6c5) !== _0x57260f(0x6c5)) _0x5cce72 ? _0x2e7f57(_0x436939) : _0xd05033(new _0x442b28(_0x57260f(0x4e5))); else { const _0x337b2e = document['getElementById'](_0x57260f(0x662)), _0x1bf23b = document[_0x57260f(0x2fc)](_0x57260f(0x834)); _0x337b2e[_0x57260f(0x109)] = '', _0x1bf23b['innerHTML'] = ''; const _0x2232b3 = _0x26533f() || { 'name': '我' }, _0x192dcb = _0x21e37d[_0x57260f(0x366)]['find'](_0x39280c => _0x39280c[_0x57260f(0x387)] === _0x21e37d[_0x57260f(0x8bb)]); if (!_0x192dcb || !_0x192dcb['entries'] || _0x192dcb[_0x57260f(0x1d1)]['length'] === 0x0) { _0x337b2e['innerHTML'] = _0x57260f(0xa6a), _0x1bf23b[_0x57260f(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document[_0x57260f(0x2fc)](_0x57260f(0xa8c))[_0x57260f(0xe9)](_0x57260f(0x6f4), _0xd9458b), document[_0x57260f(0x2fc)](_0x57260f(0x997))[_0x57260f(0xe9)](_0x57260f(0x6f4), _0x17cc8f); return; } const _0x551787 = 0x2, _0x1ff0dc = [..._0x192dcb[_0x57260f(0x1d1)]]['sort']((_0x1c7e70, _0x39805d) => _0x1c7e70[_0x57260f(0x6cc)] - _0x39805d[_0x57260f(0x6cc)]), _0xfa7664 = []; for (let _0x4f65a2 = 0x0; _0x4f65a2 < _0x1ff0dc[_0x57260f(0x8ab)]; _0x4f65a2 += _0x551787) { _0x57260f(0xb27) !== _0x57260f(0x6d5) ? _0xfa7664['push'](_0x1ff0dc['slice'](_0x4f65a2, _0x4f65a2 + _0x551787)) : _0x318391['error'](_0x57260f(0xfe), _0xceeee0); } const _0x11d043 = _0xfa7664[_0x57260f(0x8ab)]; _0xfa7664[_0x57260f(0xb13)]((_0x15fc92, _0x2062fc) => { const _0x17f384 = _0x57260f; if (_0x17f384(0x4cb) === _0x17f384(0x718)) { const _0x15ddff = _0x1e63c6(_0x2214ff[_0x17f384(0xaf8)]); _0x13d085['assign'](_0x3182b3, { 'content': _0x15ddff['content'], 'quotedMessage': _0x15ddff[_0x17f384(0xad7)] }); } else { const _0x50d872 = document[_0x17f384(0x53d)](_0x17f384(0x6b3)); _0x50d872[_0x17f384(0x175)] = _0x17f384(0x480), _0x50d872['id'] = 'diary-page-' + _0x2062fc, _0x2062fc === _0x21e37d[_0x17f384(0x7d7)] && _0x50d872[_0x17f384(0x402)][_0x17f384(0x3ea)]('is-visible'), _0x15fc92[_0x17f384(0xb13)](_0x18ae19 => { const _0x30e3f0 = _0x17f384; if (_0x30e3f0(0x5dd) === _0x30e3f0(0x68c)) return new _0x4f67b1(_0x10e30a => { const _0x12d165 = _0x30e3f0, _0x1b0513 = _0x12d165(0x528); _0x1d52ab[_0x12d165(0x6cd)]['insertAdjacentHTML'](_0x12d165(0x30b), _0x1b0513); const _0xc86cce = _0x3cbaf9[_0x12d165(0x2fc)](_0x12d165(0x9c3)), _0x1abd5b = _0x15c772['getElementById']('diary-modal-textarea'), _0x5ce12e = _0x2edf14[_0x12d165(0x2fc)](_0x12d165(0x48c)), _0x861a49 = _0x7893a8[_0x12d165(0x2fc)](_0x12d165(0x9e2)), _0xf1e4ed = _0xc86cce[_0x12d165(0x9d2)](_0x12d165(0x167)), _0x150546 = () => { const _0x41c01f = _0x12d165; _0xc86cce[_0x41c01f(0x3c2)](), _0x10e30a(); }; _0x5ce12e['onclick'] = () => { const _0x5c348a = _0x12d165; _0x5b8a54(_0x1abd5b[_0x5c348a(0x91b)]), _0x150546(); }, _0x861a49[_0x12d165(0x754)] = _0x150546, _0xf1e4ed[_0x12d165(0x754)] = _0x150546; }); else { const _0x42be49 = _0x18ae19[_0x30e3f0(0x85a)] === _0x30e3f0(0x1a8) ? _0x30e3f0(0x1a8) : 'ai', _0x105481 = _0x18ae19['author'] === _0x30e3f0(0x1a8) ? _0x2232b3['name'] : _0xe97381(_0x18ae19['author'])[_0x30e3f0(0x4a8)], _0x3f69b8 = document[_0x30e3f0(0x53d)](_0x30e3f0(0x6b3)); _0x3f69b8[_0x30e3f0(0x175)] = _0x30e3f0(0x235) + _0x42be49, _0x3f69b8[_0x30e3f0(0x977)][_0x30e3f0(0x6cc)] = _0x18ae19[_0x30e3f0(0x6cc)], _0x3f69b8[_0x30e3f0(0xab9)][_0x30e3f0(0x323)] = 'none', _0x3f69b8[_0x30e3f0(0xab9)][_0x30e3f0(0x9f0)] = '0', _0x3f69b8[_0x30e3f0(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x105481 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new Date(_0x18ae19[_0x30e3f0(0x6cc)])[_0x30e3f0(0x926)]('zh-CN') + _0x30e3f0(0x5d2) + _0x18ae19[_0x30e3f0(0xaf8)][_0x30e3f0(0x8f0)](/\n/g, _0x30e3f0(0x8d4)) + _0x30e3f0(0x55d), _0x50d872[_0x30e3f0(0x30a)](_0x3f69b8); } }), _0x337b2e[_0x17f384(0x30a)](_0x50d872); } }), _0x1bf23b[_0x57260f(0x109)] = _0x57260f(0x20e) + (_0x21e37d['diaryCurrentPage'] + 0x1) + _0x57260f(0x3a5) + _0x11d043 + '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', document[_0x57260f(0x2fc)](_0x57260f(0x7ec))[_0x57260f(0x525)] = _0x21e37d['diaryCurrentPage'] === 0x0, document[_0x57260f(0x2fc)](_0x57260f(0xa00))[_0x57260f(0x525)] = _0x21e37d['diaryCurrentPage'] === _0x11d043 - 0x1, document['getElementById'](_0x57260f(0x7ec))[_0x57260f(0xe9)](_0x57260f(0x6f4), _0x205a0b), document[_0x57260f(0x2fc)](_0x57260f(0xa00))['addEventListener'](_0x57260f(0x6f4), _0x23fc48), document[_0x57260f(0x2fc)]('diary-write-button')['addEventListener'](_0x57260f(0x6f4), _0xd9458b), document[_0x57260f(0x2fc)](_0x57260f(0x997))[_0x57260f(0xe9)](_0x57260f(0x6f4), _0x17cc8f); } } function _0x23fc48() { const _0x20552c = _0x4a89cb; if (_0x21e37d['isAnimatingDiary']) return; const _0x250a99 = _0x21e37d[_0x20552c(0x7d7)], _0x1a3696 = Math[_0x20552c(0x157)](_0x21e37d[_0x20552c(0x366)][_0x20552c(0x354)](_0x2f9867 => _0x2f9867[_0x20552c(0x387)] === _0x21e37d[_0x20552c(0x8bb)])[_0x20552c(0x1d1)]['length'] / 0x2); if (_0x250a99 >= _0x1a3696 - 0x1) return; _0x21e37d[_0x20552c(0x594)] = !![]; const _0x317dc0 = _0x250a99 + 0x1, _0x40a14d = document['getElementById']('diary-page-' + _0x250a99), _0xe01945 = document['getElementById'](_0x20552c(0x646) + _0x317dc0); _0x40a14d && _0xe01945 ? (_0xe01945[_0x20552c(0x402)][_0x20552c(0x3ea)](_0x20552c(0x8a1)), _0x40a14d[_0x20552c(0x402)][_0x20552c(0x3ea)](_0x20552c(0x93b)), _0xe01945[_0x20552c(0x402)][_0x20552c(0x3ea)](_0x20552c(0x940)), setTimeout(() => { const _0x522f62 = _0x20552c; _0x40a14d[_0x522f62(0x402)][_0x522f62(0x3c2)](_0x522f62(0x940), _0x522f62(0x93b)), _0xe01945[_0x522f62(0x402)][_0x522f62(0x3c2)](_0x522f62(0x8a1)), _0x21e37d[_0x522f62(0x7d7)] = _0x317dc0, _0x17e50a(), _0x21e37d['isAnimatingDiary'] = ![]; }, 0x2bc)) : _0x21e37d[_0x20552c(0x594)] = ![]; } function _0x205a0b() { const _0x469e48 = _0x4a89cb; if (_0x469e48(0x67a) !== _0x469e48(0x1d3)) { if (_0x21e37d['isAnimatingDiary']) return; const _0x468350 = _0x21e37d[_0x469e48(0x7d7)]; if (_0x468350 <= 0x0) return; _0x21e37d['isAnimatingDiary'] = !![]; const _0x146a64 = _0x468350 - 0x1, _0x451f13 = document[_0x469e48(0x2fc)](_0x469e48(0x646) + _0x468350), _0xfaea34 = document[_0x469e48(0x2fc)](_0x469e48(0x646) + _0x146a64); if (_0x451f13 && _0xfaea34) { if (_0x469e48(0x34b) !== _0x469e48(0x7e8)) _0xfaea34[_0x469e48(0x402)][_0x469e48(0x3ea)](_0x469e48(0x8a0)), _0x451f13['classList'][_0x469e48(0x3ea)](_0x469e48(0x30c)), _0xfaea34[_0x469e48(0x402)][_0x469e48(0x3ea)](_0x469e48(0x940)), setTimeout(() => { const _0x2e63bd = _0x469e48; _0x451f13['classList'][_0x2e63bd(0x3c2)](_0x2e63bd(0x940), _0x2e63bd(0x30c)), _0xfaea34[_0x2e63bd(0x402)][_0x2e63bd(0x3c2)](_0x2e63bd(0x8a0)), _0x21e37d[_0x2e63bd(0x7d7)] = _0x146a64, _0x17e50a(), _0x21e37d[_0x2e63bd(0x594)] = ![]; }, 0x2bc); else { const _0x317671 = _0xf3dd91[_0x469e48(0x70c)](_0xccff3e); if (_0x317671) _0x2cbb0e['localStorageData'][_0x317671] = _0x28889a[_0x469e48(0x7b7)](_0x317671); } } else _0x21e37d['isAnimatingDiary'] = ![]; } else { const _0x361ab9 = _0x277569[_0x469e48(0x31d)][_0x469e48(0x2f9)](_0x3b94b4); _0x361ab9 > -0x1 && _0x46d18e(_0x434ee7, _0x361ab9); } } function _0xd9458b() { return new Promise(_0x2935cb => { const _0x110fd9 = _0x1826; if (_0x110fd9(0x62d) !== _0x110fd9(0x522)) { const _0x55f6f8 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x110fd9(0x6cd)][_0x110fd9(0x38f)](_0x110fd9(0x30b), _0x55f6f8); const _0x5dd0c4 = document['getElementById'](_0x110fd9(0x9c3)), _0x358846 = document[_0x110fd9(0x2fc)]('diary-modal-textarea'), _0xb00601 = document[_0x110fd9(0x2fc)]('diary-modal-save'), _0x4ae611 = document['getElementById'](_0x110fd9(0x9e2)), _0x337735 = _0x5dd0c4['querySelector'](_0x110fd9(0x167)), _0x548934 = () => { const _0x54651d = _0x110fd9; if (_0x54651d(0x82c) !== _0x54651d(0x6d8)) _0x5dd0c4[_0x54651d(0x3c2)](), _0x2935cb(); else { _0x592d97(); const _0x57a2ae = _0x4ce1ea('请输入新的群名称：', _0x2e62ae[_0x54651d(0x4a8)]); _0x57a2ae && _0x57a2ae['trim']() && _0x57a2ae !== _0x2ca69e['name'] && (_0x2a63e0[_0x54651d(0x4a8)] = _0x57a2ae[_0x54651d(0x1b5)](), _0x3f8a25(), _0x45b968(), _0x136783(), _0x5ee995(_0x54651d(0x2af) + _0x3ce315[_0x54651d(0x4a8)] + '\x22。')); } }; _0xb00601[_0x110fd9(0x754)] = () => { const _0x4c7600 = _0x110fd9; _0x4c7600(0x547) === _0x4c7600(0x547) ? (_0x14c8e6(_0x358846[_0x4c7600(0x91b)]), _0x548934()) : (_0x5a57ef[_0x4c7600(0x402)][_0x4c7600(0x3c2)](_0x4c7600(0x393)), _0xad8621(() => _0x520798['style'][_0x4c7600(0x243)] = _0x4c7600(0x1ea), 0x12c)); }, _0x4ae611[_0x110fd9(0x754)] = _0x548934, _0x337735[_0x110fd9(0x754)] = _0x548934; } else _0x23f78a += _0x110fd9(0x780) + _0x24211b[_0x110fd9(0xaa1)] + _0x110fd9(0x919) + _0x18cb02[_0x110fd9(0x20b)] + ')'; }); } function _0x14c8e6(_0x684ec3) { const _0x2d33a4 = _0x4a89cb, _0x24c95d = _0x684ec3[_0x2d33a4(0x1b5)](); if (!_0x24c95d || !_0x21e37d[_0x2d33a4(0x8bb)]) return; let _0x5219ce = _0x21e37d['diaries'][_0x2d33a4(0x354)](_0x2b3a59 => _0x2b3a59[_0x2d33a4(0x387)] === _0x21e37d[_0x2d33a4(0x8bb)]); !_0x5219ce && (_0x5219ce = { 'characterId': _0x21e37d[_0x2d33a4(0x8bb)], 'entries': [] }, _0x21e37d['diaries']['push'](_0x5219ce)); _0x5219ce[_0x2d33a4(0x1d1)][_0x2d33a4(0x9f2)]({ 'timestamp': Date[_0x2d33a4(0x300)](), 'author': _0x2d33a4(0x1a8), 'content': _0x24c95d }), _0x37e4ef(); const _0x38f2b1 = _0x5219ce['entries'][_0x2d33a4(0x8ab)]; _0x21e37d[_0x2d33a4(0x7d7)] = Math['ceil'](_0x38f2b1 / 0x2) - 0x1, _0x17e50a(); } async function _0x17cc8f() { const _0x593ee0 = _0x4a89cb; if (_0x593ee0(0xae8) === _0x593ee0(0xae8)) { const _0x501c38 = _0x21e37d[_0x593ee0(0x366)]['find'](_0x2ef924 => _0x2ef924[_0x593ee0(0x387)] === _0x21e37d[_0x593ee0(0x8bb)]), _0x1df23c = _0x21e37d[_0x593ee0(0x8bb)], _0x3e8199 = _0xe97381(_0x1df23c); if (!_0x3e8199 || _0x21e37d['isGenerating']) return; _0x171a38(!![], _0x593ee0(0x54a)), _0x21e37d[_0x593ee0(0x5f4)] = !![]; let _0x34876e = []; try { if ('nJVIi' !== 'nJVIi') _0x1346d3['preventDefault'](); else { const _0x337594 = _0x26533f() || { 'name': '你' }, _0x1f7a19 = _0x345da9(_0x1df23c), { omniText: _0x311526 } = _0x434953(_0x1df23c, _0x21e37d[_0x593ee0(0x272)]); let _0x1df6bb = ''; if (_0x3e8199[_0x593ee0(0x12e)] && _0x3e8199[_0x593ee0(0x12e)]['length'] > 0x0) { const _0x527196 = _0x3e8199['linkedWorldBookIds'][_0x593ee0(0x592)](_0xa7984d => _0x21e37d[_0x593ee0(0x584)][_0x593ee0(0x354)](_0x548442 => _0x548442['id'] === _0xa7984d))[_0x593ee0(0x4b7)](Boolean)[_0x593ee0(0x592)](_0xb7a11f => _0x593ee0(0x737) + _0xb7a11f['name'] + '\x0a' + _0xb7a11f['content'])[_0x593ee0(0x2c2)](''); if (_0x527196) _0x1df6bb = _0x593ee0(0x22c) + _0x527196; } const _0x554105 = _0x337594[_0x593ee0(0x87d)] ? '\x0a\x0a#\x20关于读者“' + _0x337594[_0x593ee0(0x4a8)] + _0x593ee0(0x239) + _0x337594[_0x593ee0(0x87d)] : '', _0x41eb80 = _0x1c7188(); let _0x31dce8 = '你还没有写日记。'; if (_0x501c38 && _0x501c38[_0x593ee0(0x1d1)]) { const _0x4aec02 = _0x501c38[_0x593ee0(0x1d1)][_0x593ee0(0x4b7)](_0x2846cb => _0x2846cb[_0x593ee0(0x85a)] === _0x593ee0(0x1a8))[_0x593ee0(0xaa2)](); _0x4aec02 && (_0x31dce8 = _0x4aec02['content']); } const _0x1217e1 = _0x593ee0(0x60b) + _0x3e8199[_0x593ee0(0x4a8)] + _0x593ee0(0x672) + _0x337594[_0x593ee0(0x4a8)] + _0x593ee0(0x6ed) + _0x337594[_0x593ee0(0x4a8)] + _0x593ee0(0x292) + _0x31dce8 + _0x593ee0(0xee) + _0x3e8199[_0x593ee0(0x87d)] + '\x0a' + _0x554105 + '\x0a' + _0x1df6bb + '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20' + new Date()['toLocaleString'](_0x593ee0(0x223), { 'dateStyle': _0x593ee0(0x959), 'timeStyle': _0x593ee0(0x79f) }) + '\x0a-\x20**日记本的上一笔记录是在**:\x20' + _0x2d7f7e(new Date(_0x501c38?.[_0x593ee0(0x1d1)]?.['at'](-0x1)?.[_0x593ee0(0x6cc)] || Date[_0x593ee0(0x300)]())) + _0x593ee0(0x7f8) + (_0x311526 || '最近没有互动记录。') + _0x593ee0(0x9f1) + (_0x41eb80 || _0x593ee0(0x9ef)) + '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。'; _0x34876e = [{ 'role': 'system', 'content': _0x1217e1 }, { 'role': _0x593ee0(0x1a8), 'content': _0x593ee0(0x2f2) }]; const _0x3d15b0 = await _0xa3cec0(_0x34876e); if (_0x3d15b0) { if (_0x593ee0(0x682) !== _0x593ee0(0x59b)) { let _0x20161b = _0x21e37d['diaries']['find'](_0x3bcb70 => _0x3bcb70[_0x593ee0(0x387)] === _0x1df23c); !_0x20161b && (_0x20161b = { 'characterId': _0x1df23c, 'entries': [] }, _0x21e37d[_0x593ee0(0x366)][_0x593ee0(0x9f2)](_0x20161b)); _0x20161b[_0x593ee0(0x1d1)][_0x593ee0(0x9f2)]({ 'timestamp': Date[_0x593ee0(0x300)](), 'author': _0x1df23c, 'content': _0x3d15b0 }), _0x37e4ef(); const _0x2085c6 = _0x20161b[_0x593ee0(0x1d1)]['length']; _0x21e37d[_0x593ee0(0x7d7)] = Math[_0x593ee0(0x157)](_0x2085c6 / 0x2) - 0x1, _0x17e50a(); } else _0x344f81(), _0x34573b(![]), _0x295584['isGenerating'] = ![]; } } } catch (_0x52dce8) { _0x2d1f89('生成日记失败:\x20' + _0x52dce8[_0x593ee0(0x420)]); } finally { _0x171a38(![]), _0x21e37d['isGenerating'] = ![]; } } else _0x54a23e = _0x30de69[_0x593ee0(0x4b7)](_0x2644e4 => _0x2644e4 && typeof _0x2644e4 === _0x593ee0(0x76e) && typeof _0x2644e4[_0x593ee0(0x568)] === _0x593ee0(0x9b5) && typeof _0x2644e4[_0x593ee0(0xaf8)] !== _0x593ee0(0xa2d)); } function _0x22dc8c() { const _0xdf3c5b = _0x4a89cb, _0xc382d = document['getElementById'](_0xdf3c5b(0x17b)), _0x27396a = document[_0xdf3c5b(0x2fc)]('galgame-view-container'), _0x5d2e2d = document[_0xdf3c5b(0x9d2)](_0xdf3c5b(0x408)); _0x21e37d[_0xdf3c5b(0x488)] === _0xdf3c5b(0x8b9) ? (_0xc382d[_0xdf3c5b(0xab9)]['display'] = _0xdf3c5b(0x1ea), _0x27396a[_0xdf3c5b(0xab9)][_0xdf3c5b(0x243)] = _0xdf3c5b(0xa25)) : (_0xc382d[_0xdf3c5b(0xab9)][_0xdf3c5b(0x243)] = _0xdf3c5b(0xa25), _0x27396a[_0xdf3c5b(0xab9)]['display'] = _0xdf3c5b(0x1ea)), _0x5d2e2d[_0xdf3c5b(0xab9)][_0xdf3c5b(0x243)] = _0xdf3c5b(0xa25); } function _0x362baf() { const _0x2900a4 = _0x4a89cb; if (_0x2900a4(0x8c3) === _0x2900a4(0x8c3)) { const _0x57b466 = document[_0x2900a4(0x2fc)](_0x2900a4(0x44b)), _0x520513 = document[_0x2900a4(0x2fc)]('galgame-text'); if (_0x21e37d[_0x2900a4(0x872)]['length'] > 0x0) { if (_0x2900a4(0x1fb) !== _0x2900a4(0x1fb)) _0x54f164['style'][_0x2900a4(0x243)] = _0x2900a4(0x1ea); else { const _0x49ede4 = _0x21e37d[_0x2900a4(0x872)][_0x2900a4(0xa8b)](); _0x57b466[_0x2900a4(0x908)] = _0x49ede4[_0x2900a4(0x966)] === 'narrator' ? '旁白' : _0x49ede4['speaker'], _0x520513[_0x2900a4(0x908)] = _0x49ede4[_0x2900a4(0x810)], _0x49ede4[_0x2900a4(0x966)] !== _0x2900a4(0x6ce) && (_0x2900a4(0x9bb) !== 'XEHWk' ? _0x56b1ed(_0x21e37d['activeMeetingCharId'], _0x49ede4[_0x2900a4(0x8b6)]) : _0x3d7288 = _0x8f300['stringify'](_0x54813f)); } } else { if (_0x2900a4(0x6a4) === _0x2900a4(0x6a4)) { const _0x41a44d = _0x21e37d[_0x2900a4(0xafb)][_0x21e37d[_0x2900a4(0x2fa)]]; if (_0x41a44d && _0x41a44d[_0x2900a4(0x8ab)] > 0x0) { if (_0x2900a4(0x6c1) === _0x2900a4(0xa4c)) { const _0x11cc56 = _0x33eaf3['userProfiles']['find'](_0x397669 => _0x397669['id'] === _0x43301d[_0x2900a4(0x514)]) || { 'name': '你' }, _0x45f066 = _0x3ff772['diaries'][_0x2900a4(0x354)](_0x2753d1 => _0x2753d1[_0x2900a4(0x387)] === _0x12f8e8); if (!_0x45f066 || !_0x45f066[_0x2900a4(0x1d1)] || _0x45f066[_0x2900a4(0x1d1)][_0x2900a4(0x8ab)] === 0x0) return ''; const _0x3f6332 = _0x45f066[_0x2900a4(0x1d1)][_0x2900a4(0x6de)](-0x8), _0x23302d = _0x3f6332[_0x2900a4(0x592)](_0x1c42a1 => { const _0x1298f8 = _0x2900a4, _0x35bd7e = _0x1c42a1['author'] === 'user' ? _0x11cc56[_0x1298f8(0x4a8)] : _0x219955(_0x1c42a1[_0x1298f8(0x85a)])[_0x1298f8(0x4a8)]; return '-\x20[' + new _0x4881fc(_0x1c42a1[_0x1298f8(0x6cc)])[_0x1298f8(0xa7b)]() + ']\x20' + _0x35bd7e + _0x1298f8(0x899) + _0x1c42a1[_0x1298f8(0xaf8)]; })[_0x2900a4(0x2c2)]('\x0a'); return _0x2900a4(0x3e5) + _0x11cc56[_0x2900a4(0x4a8)] + _0x2900a4(0x764) + _0x23302d; } else { _0x21e37d['activeMeetingScriptQueue'] = [..._0x41a44d]; const _0x32e1bc = _0x21e37d['activeMeetingScriptQueue'][_0x2900a4(0xa8b)](); _0x57b466[_0x2900a4(0x908)] = _0x32e1bc[_0x2900a4(0x966)] === 'narrator' ? '旁白' : _0x32e1bc[_0x2900a4(0x966)], _0x520513['textContent'] = _0x32e1bc[_0x2900a4(0x810)], _0x32e1bc['speaker'] !== 'narrator' && ('CDtSJ' === _0x2900a4(0x971) ? _0x56b1ed(_0x21e37d[_0x2900a4(0x2fa)], _0x32e1bc[_0x2900a4(0x8b6)]) : _0x7d6f0f[_0x2900a4(0x294)](_0x2900a4(0x912), _0x23ef86)); } } else _0x57b466['textContent'] = '旁白', _0x520513[_0x2900a4(0x908)] = _0x2900a4(0x29f); } else _0x30cac1 = _0x486a61; } } else _0xd8ee04 += _0x2900a4(0x503); } async function _0x56b1ed(_0x171a0c, _0x3382d6) { const _0x2886eb = _0x4a89cb, _0x4838d4 = document[_0x2886eb(0x2fc)]('galgame-sprite'), _0x2c97c5 = document[_0x2886eb(0x2fc)](_0x2886eb(0x85c)), _0x26dd1f = _0xe97381(_0x171a0c), _0xdd59ca = _0x26dd1f?.[_0x2886eb(0x174)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x1d0c46 = 0x50 * _0xdd59ca[_0x2886eb(0x5fe)]; _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0xa04)] = _0x1d0c46 + '%', _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0x526)] = _0x1d0c46 + '%', _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0x9b9)] = _0xdd59ca['x'] + '%', _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0x388)] = _0xdd59ca['y'] + '%', _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0x202)] = _0x2886eb(0x541), _0x2c97c5[_0x2886eb(0xab9)][_0x2886eb(0x6d9)] = _0x2886eb(0x449); const _0x362d98 = [_0x2886eb(0x8f1), 'happy', 'angry', _0x2886eb(0x39d), _0x2886eb(0xac2)], _0x5890f9 = _0x362d98[_0x2886eb(0x6f7)](_0x3382d6) ? _0x3382d6 : _0x2886eb(0x8f1); try { if (_0x2886eb(0x2f6) !== 'PCSAI') { const _0x49900a = await _0x3bbeae('char_sprite_' + _0x5890f9 + '_' + _0x171a0c); if (_0x49900a) _0x4838d4[_0x2886eb(0x9fb)] && _0x4838d4['style'][_0x2886eb(0x5f8)] !== '0' ? (_0x4838d4['style'][_0x2886eb(0x5f8)] = 0x0, setTimeout(() => { const _0x32b79f = _0x2886eb; _0x4838d4[_0x32b79f(0x9fb)] = URL['createObjectURL'](_0x49900a), _0x4838d4['style']['opacity'] = 0x1; }, 0x96)) : (_0x4838d4[_0x2886eb(0x9fb)] = URL['createObjectURL'](_0x49900a), _0x4838d4[_0x2886eb(0xab9)][_0x2886eb(0x5f8)] = 0x1); else { const _0x40ac6a = await _0x3bbeae('char_sprite_normal_' + _0x171a0c); _0x4838d4[_0x2886eb(0x9fb)] = _0x40ac6a ? URL[_0x2886eb(0x3a1)](_0x40ac6a) : ''; } } else { const _0xa4de43 = _0x157d1c(_0x3f857b[0x1], 0xa), _0x1c2f00 = _0x1fda87(_0x5300e0[0x2], 0xa), _0xd54252 = _0xa2063b(_0x1d3ded[0x3], 0xa) * (_0x348616[0x3][_0x2886eb(0x8ab)] === 0x2 ? 0xa : 0x1), _0x3d382a = _0xa4de43 * 0x3c + _0x1c2f00 + _0xd54252 / 0x3e8, _0x11a9c5 = _0x1f0700[_0x2886eb(0x8f0)](_0x18a516, '')[_0x2886eb(0x1b5)](); _0x11a9c5 && _0x4fa206[_0x2886eb(0x9f2)]({ 'time': _0x3d382a, 'text': _0x11a9c5 }); } } catch (_0x2a9a59) { console[_0x2886eb(0xa12)](_0x2886eb(0x630), _0x2a9a59), _0x4838d4[_0x2886eb(0x9fb)] = ''; } } let _0x24a7f0 = ![], _0x46d80c = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0xdf7ed6 = document['getElementById'](_0x4a89cb(0x9f3)), _0x7a287 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x242)), _0x54ed1f = document['getElementById'](_0x4a89cb(0x752)), _0x1ded0f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x7e0)), _0x449889 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa62)), _0x532d09 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x85c)), _0x1b6d74 = document[_0x4a89cb(0x2fc)]('sprite-resize-handle'), _0x1206cc = document['getElementById'](_0x4a89cb(0x4eb)); let _0x198157 = {}; function _0x430d9c() { const _0x3de9aa = _0x4a89cb; if ('uzIAw' === _0x3de9aa(0x691)) { const _0x1afdf9 = _0xe97381(_0x21e37d[_0x3de9aa(0x2fa)]); if (!_0x1afdf9) return; _0x24a7f0 = !![], _0x449889[_0x3de9aa(0xab9)]['display'] = 'block'; const _0x369333 = _0x1afdf9['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x3de9aa(0x2fc)](_0x3de9aa(0x143))['value'] = _0x369333['x'], document[_0x3de9aa(0x2fc)](_0x3de9aa(0xa3e))[_0x3de9aa(0x91b)] = _0x369333['y'], document[_0x3de9aa(0x2fc)](_0x3de9aa(0x3aa))[_0x3de9aa(0x91b)] = _0x369333[_0x3de9aa(0x5fe)] * 0x64, _0x198157 = { ..._0x369333 }, document[_0x3de9aa(0x2fc)](_0x3de9aa(0x439))[_0x3de9aa(0xab9)][_0x3de9aa(0x243)] = 'none', document['getElementById'](_0x3de9aa(0x81f))[_0x3de9aa(0xab9)][_0x3de9aa(0x243)] = _0x3de9aa(0x1ea); } else _0x1986a2(_0x4d3dc2, _0x10da7e); } function _0x5af183(_0x31ae7a = ![]) { const _0x1c823c = _0x4a89cb; _0x24a7f0 = ![], _0x449889[_0x1c823c(0xab9)]['display'] = 'none', document[_0x1c823c(0x2fc)](_0x1c823c(0x439))[_0x1c823c(0xab9)]['display'] = _0x1c823c(0xa25), document[_0x1c823c(0x2fc)](_0x1c823c(0x81f))[_0x1c823c(0xab9)][_0x1c823c(0x243)] = _0x1c823c(0xa25); if (!_0x31ae7a) { const _0x51aa3d = _0xe97381(_0x21e37d[_0x1c823c(0x2fa)]); _0x51aa3d && ('OltXy' !== _0x1c823c(0x563) ? (_0x51aa3d[_0x1c823c(0x174)] = _0x198157, _0x56b1ed(_0x21e37d['activeMeetingCharId'], 'normal')) : _0x180330[_0x1c823c(0x91b)] = ''); } } function _0x539c52() { const _0x3476f0 = _0x4a89cb; if ('DhxVp' !== _0x3476f0(0x6e9)) { const _0x1d6d08 = _0xe97381(_0x21e37d['activeMeetingCharId']); if (!_0x1d6d08) return; const _0x57680b = parseFloat(document[_0x3476f0(0x2fc)](_0x3476f0(0x143))[_0x3476f0(0x91b)]), _0x3ea31b = parseFloat(document['getElementById'](_0x3476f0(0xa3e))[_0x3476f0(0x91b)]), _0x3cf97e = parseFloat(document[_0x3476f0(0x2fc)](_0x3476f0(0x3aa))['value']) / 0x64; _0x1d6d08['spriteTransform'] = { 'x': _0x57680b, 'y': _0x3ea31b, 'scale': _0x3cf97e }, _0x37e4ef(), _0x2d1f89('哼，就按你说的办好了。'), _0x5af183(!![]); } else _0x1c30c3[_0x3476f0(0xab9)]['backgroundImage'] = _0x3476f0(0xac5) + _0xfbe115['createObjectURL'](_0x498569) + '\x27)', _0x52671f[_0x3476f0(0xab9)][_0x3476f0(0x186)] = _0x3476f0(0x145), _0x8af3c1[_0x3476f0(0xab9)][_0x3476f0(0x811)] = _0x3476f0(0x165); } function _0x376a6c() { const _0x1e16ba = _0x4a89cb; _0x46bf1c(_0x1e16ba(0x4d0))[_0x1e16ba(0x8c0)](_0x381abb => { const _0x40af85 = _0x1e16ba; if (_0x40af85(0x638) !== _0x40af85(0x638)) { const _0x121621 = _0x2ea0bf[_0x40af85(0x91b)][_0x40af85(0x1b5)]()[_0x40af85(0x6f7)](_0x36428e); _0x3ba6af[_0x40af85(0x525)] = _0x121621; } else { if (_0x381abb) { const _0x2e6eb0 = _0xe97381(_0x21e37d['activeMeetingCharId']); if (_0x2e6eb0) { if (_0x40af85(0x39b) === _0x40af85(0x39b)) delete _0x2e6eb0['spriteTransform'], _0x37e4ef(), _0x56b1ed(_0x2e6eb0['id'], _0x40af85(0x8f1)), _0x2d1f89('已恢复默认。'), _0x5af183(!![]); else { _0x2f425c['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } } } } }); } function _0x54b13f() { const _0x3021e3 = _0x4a89cb; if (_0x3021e3(0x2f0) === _0x3021e3(0x2f0)) { if (!_0x24a7f0) return; const _0xeebf70 = _0x21e37d[_0x3021e3(0x2fa)], _0xef07f5 = _0xe97381(_0xeebf70); if (!_0xef07f5) return; const _0x2e364f = parseFloat(document[_0x3021e3(0x2fc)](_0x3021e3(0x143))[_0x3021e3(0x91b)]), _0x45feae = parseFloat(document['getElementById'](_0x3021e3(0xa3e))[_0x3021e3(0x91b)]), _0x1791a1 = parseFloat(document['getElementById'](_0x3021e3(0x3aa))[_0x3021e3(0x91b)]) / 0x64; _0xef07f5[_0x3021e3(0x174)] = { 'x': _0x2e364f, 'y': _0x45feae, 'scale': _0x1791a1 }; const _0x17188f = document[_0x3021e3(0x2fc)]('galgame-sprite-container'), _0x55aa47 = 0x50 * _0x1791a1; _0x17188f[_0x3021e3(0xab9)][_0x3021e3(0xa04)] = _0x55aa47 + '%', _0x17188f[_0x3021e3(0xab9)]['width'] = _0x55aa47 + '%', _0x17188f[_0x3021e3(0xab9)]['left'] = _0x2e364f + '%', _0x17188f[_0x3021e3(0xab9)][_0x3021e3(0x388)] = _0x45feae + '%', _0x17188f[_0x3021e3(0xab9)][_0x3021e3(0x202)] = _0x3021e3(0x541); } else { if (_0x6538c?.[_0x3021e3(0x497)] === _0x3021e3(0x9de)) _0x180260 = _0x428dd6(_0xdbb4cf[_0x3021e3(0xad8)][0x0]); else _0x5ae9ac?.[_0x3021e3(0x497)] === _0x3021e3(0x869) && _0x4b5bfc && (_0x108bb2 = _0x3a5933(_0x47a27d)); _0x50822f = _0x2178fc?.['avatar'] || _0x426c70, _0x420015 = _0x21555b?.[_0x3021e3(0x66b)] || ''; } } document['getElementById'](_0x4a89cb(0x143))['addEventListener'](_0x4a89cb(0x978), _0x54b13f), document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa3e))[_0x4a89cb(0xe9)]('input', _0x54b13f), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x3aa))['addEventListener'](_0x4a89cb(0x978), _0x54b13f), _0xdf7ed6[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x430d9c), _0x7a287[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0x539c52), _0x54ed1f[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x5af183(![])), _0x1ded0f['addEventListener'](_0x4a89cb(0x6f4), _0x376a6c); function _0x263526(_0xd5fb55) { const _0x1fd222 = _0x4a89cb; if (_0x1fd222(0x739) !== _0x1fd222(0x739)) { const _0x289e48 = _0x44c1e2[_0x1fd222(0x53d)](_0x1fd222(0x6b3)); _0x289e48[_0x1fd222(0x175)] = 'preview-item', _0x289e48['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2fae51['coverUrl'] || _0x24565b) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x11fba0[_0x1fd222(0xaa1)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>' + _0x4a3933[_0x1fd222(0x20b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x289e48[_0x1fd222(0x9d2)](_0x1fd222(0x343))[_0x1fd222(0x754)] = () => _0xb9be07(_0x1fd222(0x529)), _0x120e9d['appendChild'](_0x289e48); } else { const _0x348f9f = _0xe97381(_0xd5fb55); if (!_0x348f9f) return; const _0x1b698d = _0x21e37d[_0x1fd222(0x69a)][_0x1fd222(0x354)](_0xf72229 => _0xf72229[_0x1fd222(0x497)] === 'private' && _0xf72229['participantIds']['includes'](_0xd5fb55)), _0x78e413 = _0x3beafd(_0x1b698d['id']), _0x3cba82 = _0x21e37d[_0x1fd222(0x31d)][_0x1fd222(0x4b7)](_0x4248f3 => _0x4248f3[_0x1fd222(0x7a0)])['pop'](), _0x263cc1 = document[_0x1fd222(0x2fc)](_0x1fd222(0x44b)), _0x28fe65 = document[_0x1fd222(0x2fc)](_0x1fd222(0xb17)); let _0x39d20e = null; if (_0x3cba82) { if (_0x3cba82['role'] === _0x1fd222(0x31e)) { const _0x171e4c = _0x21e37d[_0x1fd222(0xafb)][_0xd5fb55]; _0x171e4c && _0x171e4c[_0x1fd222(0x8ab)] > 0x0 && (_0x39d20e = _0x171e4c['at'](-0x1)); } else { if (_0x1fd222(0x41c) !== 'sJKWF') { if (!_0x16b278) return; _0x8e2735 = _0x141ff9['changedTouches'][0x0]['screenX'], _0x1bcc09 === 'horizontal' && _0x443de3(), _0x4c6ba5 = ![]; } else _0x39d20e = { 'speaker': _0x78e413[_0x1fd222(0x4a8)], 'line': _0x3cba82[_0x1fd222(0xaf8)], 'emotion': _0x1fd222(0x8f1) }; } } if (_0x39d20e) { if ('mgnCZ' !== _0x1fd222(0x498)) { const _0x70f75b = _0x115826[_0x1fd222(0x12c)](); _0x70f75b[_0x1fd222(0x854)] = () => _0x39e8c6(_0x70f75b[_0x1fd222(0x18a)]), _0x70f75b['onerror'] = () => _0x35042e(_0x70f75b[_0x1fd222(0xa12)]); } else _0x263cc1[_0x1fd222(0x908)] = _0x39d20e[_0x1fd222(0x966)] === _0x1fd222(0x6ce) ? '旁白' : _0x39d20e[_0x1fd222(0x966)], _0x28fe65[_0x1fd222(0x908)] = _0x39d20e[_0x1fd222(0x810)], _0x39d20e[_0x1fd222(0x966)] === _0x348f9f['name'] ? _0x1fd222(0x404) === 'QANpN' ? _0x56b1ed(_0xd5fb55, _0x39d20e[_0x1fd222(0x8b6)]) : _0x313050[_0x1fd222(0x30a)](_0x3324f9) : _0x56b1ed(_0xd5fb55, 'normal'); } else _0x263cc1[_0x1fd222(0x908)] = _0x348f9f[_0x1fd222(0x4a8)], _0x28fe65[_0x1fd222(0x908)] = _0x1fd222(0x62b), _0x56b1ed(_0xd5fb55, _0x1fd222(0x8f1)); } } function _0x47ae09() { const _0x1c586e = _0x4a89cb, _0x3bf824 = new Date(), _0x3da635 = document[_0x1c586e(0x2fc)](_0x1c586e(0x105)), _0x38eae5 = document[_0x1c586e(0x2fc)](_0x1c586e(0x862)); if (_0x3da635 && _0x38eae5) { const _0x5c0282 = String(_0x3bf824[_0x1c586e(0x97b)]())[_0x1c586e(0x1df)](0x2, '0'), _0x438504 = String(_0x3bf824['getMinutes']())[_0x1c586e(0x1df)](0x2, '0'); _0x3da635[_0x1c586e(0x908)] = _0x5c0282 + ':' + _0x438504; const _0x47d004 = _0x3bf824[_0x1c586e(0x180)]() + 0x1, _0x2e6519 = _0x3bf824[_0x1c586e(0x1c4)](), _0x45d6ef = ['星期日', '星期一', _0x1c586e(0x1c9), _0x1c586e(0x6fc), _0x1c586e(0x42d), _0x1c586e(0x76f), _0x1c586e(0x29a)][_0x3bf824[_0x1c586e(0x759)]()]; _0x38eae5[_0x1c586e(0x908)] = _0x47d004 + '月' + _0x2e6519 + '日\x20' + _0x45d6ef; } } const _0x44580f = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x138)), _0x124487 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x38a)), _0x491126 = document['getElementById'](_0x4a89cb(0x96a)), _0x47602d = document['getElementById'](_0x4a89cb(0x2d0)), _0x4e4550 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa6d)), _0x483c46 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x4d2)), _0x27682a = document['getElementById'](_0x4a89cb(0x585)), _0x2585d8 = document[_0x4a89cb(0x2fc)]('lt-ui-close-btn'), _0x5f5c67 = document[_0x4a89cb(0x2fc)]('lt-ui-lyrics-container'); let _0x4d4eec = []; async function _0xbe3496() { const _0x2d3ae8 = _0x4a89cb; if (!_0x21e37d[_0x2d3ae8(0x272)]) return; _0x4e4550[_0x2d3ae8(0x109)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', _0x44580f[_0x2d3ae8(0x402)][_0x2d3ae8(0x3ea)]('show'); const _0x27f58f = await _0x1cde33(); if (_0x27f58f[_0x2d3ae8(0x8ab)] === 0x0) { _0x4e4550[_0x2d3ae8(0x109)] = _0x2d3ae8(0x91f); return; } _0x4e4550[_0x2d3ae8(0x109)] = '', _0x27f58f[_0x2d3ae8(0xb13)](_0x1253d2 => { const _0x5e96a7 = _0x2d3ae8, _0xe06d = document['createElement']('div'); _0xe06d['className'] = 'music-library-item'; const _0x259557 = _0x1253d2[_0x5e96a7(0x145)] ? URL['createObjectURL'](_0x1253d2[_0x5e96a7(0x145)]) : _0x30019f; _0xe06d[_0x5e96a7(0x109)] = _0x5e96a7(0x655) + _0x259557 + _0x5e96a7(0x3e4) + (_0x1253d2[_0x5e96a7(0x747)][_0x5e96a7(0x69b)] || '未知歌曲') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x1253d2[_0x5e96a7(0x747)]['歌手'] || _0x5e96a7(0x565)) + _0x5e96a7(0x774), _0xe06d[_0x5e96a7(0xe9)]('click', () => { _0xefcaba(_0x1253d2); }), _0x4e4550[_0x5e96a7(0x30a)](_0xe06d); }); } function _0xaf53e7() { const _0xeafea0 = _0x4a89cb; _0x44580f[_0xeafea0(0x402)]['remove'](_0xeafea0(0x393)); } async function _0xefcaba(_0x41da50) { const _0x245504 = _0x4a89cb; if (_0x245504(0x3e0) === _0x245504(0x253)) _0x29adc7['error'](_0x245504(0x8f7), _0x2e4989), _0x7113f0(_0x245504(0x92c) + _0x5a5dbb['message']); else { if (!_0x21e37d[_0x245504(0x272)] || !_0x41da50) return; let _0x1ea451 = null; if (_0x41da50[_0x245504(0x145)]) try { _0x1ea451 = _0x245504(0x893) + Date['now']() + '_' + Math[_0x245504(0x53f)](), await _0x24ce6b(_0x1ea451, _0x41da50[_0x245504(0x145)]); } catch (_0x277b05) { console[_0x245504(0xa12)](_0x245504(0x2b2), _0x277b05); } const _0xa35c3d = { 'role': _0x245504(0x1a8), 'type': _0x245504(0x50e), 'content': _0x245504(0x41b) + _0x41da50[_0x245504(0x747)][_0x245504(0x69b)] + ']', 'songId': _0x41da50['id'], 'songName': _0x41da50[_0x245504(0x747)]['歌曲名称'], 'artist': _0x41da50[_0x245504(0x747)]['歌手'], 'coverId': _0x1ea451, 'timestamp': Date['now']() }; _0x21e37d['conversationHistory'][_0x245504(0x9f2)](_0xa35c3d), _0x1a9239(), _0x5a0ef9(), _0xaf53e7(), setTimeout(_0x4e63bc, 0x64); } } _0x124487[_0x4a89cb(0xe9)]('click', _0xbe3496), _0x491126[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0xaf53e7), _0x47602d[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), _0xaf53e7); async function _0x25c013(_0x1aad24, _0x58caa3, _0x448963) { const _0x298592 = _0x4a89cb; if ('QzmgR' !== 'PPAbr') { const _0x10a04c = _0x21e37d[_0x298592(0x69a)][_0x298592(0x354)](_0x2ae1b6 => _0x2ae1b6['activeListenSession'] && _0x2ae1b6[_0x298592(0x9e5)][_0x298592(0x6da)]), _0x1e7c93 = _0x4cc3e0(); if (_0x10a04c && _0x10a04c['id'] !== _0x1e7c93['id']) _0x10a04c[_0x298592(0x9e5)] = null, _0x2d1f89(_0x298592(0x907)), _0x37e4ef(); else _0x10a04c && _0x10a04c['id'] === _0x1e7c93['id'] && (_0x298592(0xa99) === 'UiyEy' ? _0x2d1f89(_0x298592(0x5f2)) : _0x13eebb[_0x298592(0x402)][_0x298592(0x3ea)](_0x298592(0xafc))); _0x171a38(!![], _0x298592(0x602)); if (!_0x1e7c93) { if (_0x298592(0xa85) !== _0x298592(0xa85)) _0x24c2b1['spriteTransform'] = _0x5241a3, _0x1eaf45(_0x479028['activeMeetingCharId'], _0x298592(0x8f1)); else { _0x171a38(![]), _0x2d1f89(_0x298592(0xa2a)); return; } } const _0x35ff1b = await _0x27a7ee(_0x1aad24); if (!_0x35ff1b) { if (_0x298592(0x77e) !== _0x298592(0x77e)) { const _0x475071 = _0x42ebd9(_0x1a0f81['activeMeetingCharId']); _0x475071 && (_0x475071[_0x298592(0x174)] = _0x4e005a, _0x1339ec(_0x5bddc4[_0x298592(0x2fa)], _0x298592(0x8f1))); } else { _0x171a38(![]), _0x2d1f89(_0x298592(0x230)); return; } } _0x1e7c93[_0x298592(0x9e5)] = { 'isActive': !![], 'songId': _0x1aad24, 'leaderId': _0x298592(0x1a8), 'songName': _0x35ff1b['info'][_0x298592(0x69b)], 'artist': _0x35ff1b[_0x298592(0x747)]['歌手'], 'cover': _0x35ff1b['cover'] }, _0x37e4ef(), document['getElementById'](_0x298592(0x376))['src'] = _0x35ff1b[_0x298592(0x145)] ? URL[_0x298592(0x3a1)](_0x35ff1b[_0x298592(0x145)]) : _0x30019f, document[_0x298592(0x2fc)](_0x298592(0x3d6))[_0x298592(0x908)] = _0x35ff1b[_0x298592(0x747)][_0x298592(0x69b)], document[_0x298592(0x2fc)](_0x298592(0x133))['textContent'] = _0x35ff1b[_0x298592(0x747)]['歌手'], _0x367493(_0x35ff1b), _0x27682a['style'][_0x298592(0x243)] = _0x298592(0x293), setTimeout(() => _0x27682a[_0x298592(0x402)][_0x298592(0x3ea)](_0x298592(0x393)), 0xa), _0x448963[_0x298592(0x109)] = _0x298592(0x307) + _0x448963[_0x298592(0x9d2)](_0x298592(0x260))[_0x298592(0xaa0)], _0x21e37d['conversationHistory'][_0x58caa3] && (_0x298592(0xa7f) !== _0x298592(0xa7f) ? _0x2398a6[_0x298592(0xb13)](_0x17e54e => { const _0x1359fc = _0x298592, _0x43520b = _0x17e54e[_0x1359fc(0x69e)] === 'character', _0x5290ba = _0x43520b ? _0x531627 ? _0x6ce4e9[0x0] : '?' : _0x3fc4d8 ? _0x374562[0x0] : '?'; _0x1f8692 += _0x1359fc(0x981) + (_0x43520b ? _0x1359fc(0x1a8) : 'ai') + _0x1359fc(0x527) + (!_0x43520b ? _0x1359fc(0xa39) + _0x5290ba + '</div>' : '') + _0x1359fc(0x3c7) + (_0x43520b ? _0x1359fc(0x1a8) : 'ai') + _0x1359fc(0x500) + _0x17e54e[_0x1359fc(0xaf8)] + _0x1359fc(0x5b2) + (_0x43520b ? _0x1359fc(0xa39) + _0x5290ba + _0x1359fc(0x94b) : '') + _0x1359fc(0x342); }) : (_0x21e37d[_0x298592(0x31d)][_0x58caa3]['accepted'] = !![], _0x1a9239())), _0x171a38(![]), _0x42ede9(_0x1aad24, [_0x1aad24]), _0x38dbb6(_0x35ff1b, !![]); } else _0x1c82ad(), _0x465f1b('worldBook', _0x298592(0xa20)); } function _0x83b5b8() { const _0x3e47f9 = _0x4a89cb, _0x2fcbf0 = _0x21e37d[_0x3e47f9(0x69a)]['find'](_0x3235c2 => _0x3235c2[_0x3e47f9(0x9e5)] && _0x3235c2['activeListenSession'][_0x3e47f9(0x6da)]); _0x2fcbf0 && (_0x2fcbf0[_0x3e47f9(0x9e5)] = null, _0x37e4ef(), _0x2d1f89('同步已断开。'), _0x38dbb6(), _0x27682a[_0x3e47f9(0x402)][_0x3e47f9(0x3c2)](_0x3e47f9(0x393)), setTimeout(() => _0x27682a[_0x3e47f9(0xab9)]['display'] = _0x3e47f9(0x1ea), 0x12c)); } function _0x327157(_0x43431c) { const _0x2e6ac9 = _0x4a89cb; if (!_0x43431c) return []; const _0x191c3b = _0x43431c['split']('\x0a'), _0x3744b3 = [], _0x3f228a = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x17532b of _0x191c3b) { const _0x36522c = _0x17532b[_0x2e6ac9(0x63a)](_0x3f228a); if (_0x36522c) { const _0x3a37ab = parseInt(_0x36522c[0x1], 0xa), _0x4d316 = parseInt(_0x36522c[0x2], 0xa), _0x4116e3 = parseInt(_0x36522c[0x3], 0xa) * (_0x36522c[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x13a940 = _0x3a37ab * 0x3c + _0x4d316 + _0x4116e3 / 0x3e8, _0x17dcdd = _0x17532b[_0x2e6ac9(0x8f0)](_0x3f228a, '')[_0x2e6ac9(0x1b5)](); _0x17dcdd && _0x3744b3[_0x2e6ac9(0x9f2)]({ 'time': _0x13a940, 'text': _0x17dcdd }); } } return _0x3744b3; } function _0x367493(_0x4cee5d) { const _0x1b9544 = _0x4a89cb; if (_0x1b9544(0x435) === _0x1b9544(0x435)) { _0x4d4eec = _0x327157(_0x4cee5d[_0x1b9544(0x8b5)]), _0x5f5c67[_0x1b9544(0x109)] = ''; if (_0x4d4eec[_0x1b9544(0x8ab)] === 0x0) { _0x5f5c67[_0x1b9544(0x109)] = _0x1b9544(0x699); return; } _0x4d4eec[_0x1b9544(0xb13)]((_0x42638a, _0x27201d) => { const _0x1ca302 = _0x1b9544, _0x42e66f = document[_0x1ca302(0x53d)]('p'); _0x42e66f['textContent'] = _0x42638a[_0x1ca302(0x331)], _0x42e66f['id'] = 'lyric-line-' + _0x27201d, _0x5f5c67[_0x1ca302(0x30a)](_0x42e66f); }); } else { const _0x3067fe = _0x1b9544(0x309) + _0x3d1f99; _0x52981d(_0x3067fe), _0x2e55e4(!![]); } } function _0x18b339(_0x204041, _0x4aee53, _0x491c14, _0x107e95) { const _0x36c918 = _0x4a89cb, _0x25e0f5 = (_0x107e95 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x204041 + _0x491c14 * Math[_0x36c918(0x3fd)](_0x25e0f5), 'y': _0x4aee53 + _0x491c14 * Math['sin'](_0x25e0f5) }; } function _0x4ec784(_0x1cef02) { const _0xfecde7 = _0x4a89cb, _0x1a8771 = 'http://www.w3.org/2000/svg', _0x4077bf = document[_0xfecde7(0x3ed)](_0x1a8771, _0xfecde7(0x332)), _0x3fdd58 = 0xfa, _0x56dfcd = _0x3fdd58 / 0x2, _0x1814e1 = _0x3fdd58 / 0x2, _0x21dd6b = _0x3fdd58 / 0x2 - 0x14; _0x4077bf[_0xfecde7(0x5b3)](_0xfecde7(0x526), _0xfecde7(0x9f7)), _0x4077bf[_0xfecde7(0x5b3)](_0xfecde7(0xa04), _0xfecde7(0x9f7)), _0x4077bf[_0xfecde7(0x5b3)]('viewBox', '0\x200\x20' + _0x3fdd58 + '\x20' + _0x3fdd58); const _0x5e2c2e = Object[_0xfecde7(0x464)](_0x1cef02)[_0xfecde7(0x5e1)]((_0x5b3283, _0x368e9d) => _0x5b3283 + _0x368e9d, 0x0); if (_0x5e2c2e === 0x0) return _0x4077bf; let _0x452ded = -0x5a; const _0x24ebf4 = [_0xfecde7(0x607), _0xfecde7(0x458), '#99ff99', _0xfecde7(0x6a2), _0xfecde7(0x6dd), _0xfecde7(0x797), '#a4c2f4', '#ff8c66']; let _0x5ecabd = 0x0; for (const _0x341126 in _0x1cef02) { const _0x3e6d1c = _0x1cef02[_0x341126]; if (_0x3e6d1c <= 0x0) continue; const _0x5ec92e = _0x3e6d1c / _0x5e2c2e * 0x168, _0x528996 = _0x452ded + _0x5ec92e, _0x408230 = _0x18b339(_0x56dfcd, _0x1814e1, _0x21dd6b, _0x528996), _0x4531cf = _0x18b339(_0x56dfcd, _0x1814e1, _0x21dd6b, _0x452ded), _0x4619b7 = _0x5ec92e > 0xb4 ? '1' : '0', _0xd078f3 = ['M', _0x408230['x'], _0x408230['y'], 'A', _0x21dd6b, _0x21dd6b, 0x0, _0x4619b7, 0x1, _0x4531cf['x'], _0x4531cf['y'], 'L', _0x56dfcd, _0x1814e1, 'Z'][_0xfecde7(0x2c2)]('\x20'), _0x12ce0b = document[_0xfecde7(0x3ed)](_0x1a8771, _0xfecde7(0x162)); _0x12ce0b[_0xfecde7(0x5b3)]('d', _0xd078f3), _0x12ce0b[_0xfecde7(0x5b3)](_0xfecde7(0x70e), _0x24ebf4[_0x5ecabd % _0x24ebf4[_0xfecde7(0x8ab)]]), _0x5ecabd++; const _0x2c3c39 = document[_0xfecde7(0x3ed)](_0x1a8771, 'title'); _0x2c3c39[_0xfecde7(0x908)] = _0x341126 + ':\x20' + _0x3e6d1c[_0xfecde7(0x6be)](0x2) + '\x20(' + (_0x3e6d1c / _0x5e2c2e * 0x64)['toFixed'](0x1) + '%)', _0x12ce0b[_0xfecde7(0x30a)](_0x2c3c39), _0x4077bf[_0xfecde7(0x30a)](_0x12ce0b), _0x452ded = _0x528996; } return _0x4077bf; } function _0x17ff90() { const _0x5a3d91 = _0x4a89cb; if (_0x5a3d91(0x32a) !== _0x5a3d91(0x80f)) { if (_0x4d4eec[_0x5a3d91(0x8ab)] === 0x0) return; const _0x5407f7 = _0x483c46[_0x5a3d91(0xb15)]; let _0x5573d9 = -0x1; for (let _0x3239df = 0x0; _0x3239df < _0x4d4eec[_0x5a3d91(0x8ab)]; _0x3239df++) { if (_0x5407f7 >= _0x4d4eec[_0x3239df][_0x5a3d91(0x5e4)]) _0x5573d9 = _0x3239df; else break; } if (_0x5573d9 !== -0x1) { const _0x20d24d = _0x5f5c67[_0x5a3d91(0x4ee)]('p'); _0x20d24d['forEach'](_0x385b62 => _0x385b62[_0x5a3d91(0x402)][_0x5a3d91(0x3c2)](_0x5a3d91(0x911))); const _0x1737f5 = document[_0x5a3d91(0x2fc)](_0x5a3d91(0x4cc) + _0x5573d9); _0x1737f5 && (_0x1737f5[_0x5a3d91(0x402)][_0x5a3d91(0x3ea)](_0x5a3d91(0x911)), _0x1737f5[_0x5a3d91(0x410)]({ 'behavior': _0x5a3d91(0x139), 'block': 'center' })); } } else !_0x217783[_0x5a3d91(0x402)][_0x5a3d91(0x7e6)](_0x5a3d91(0x573)) && _0x56c70e[_0x5a3d91(0x3c2)](); } _0x2585d8[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x33ec0f = _0x4a89cb; _0x27682a['classList'][_0x33ec0f(0x3c2)](_0x33ec0f(0x393)), setTimeout(() => _0x27682a[_0x33ec0f(0xab9)]['display'] = _0x33ec0f(0x1ea), 0x12c); }), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x887))['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x37b18e = _0x4a89cb; if (_0x21e37d[_0x37b18e(0x7dc)] && _0x21e37d['listenTogetherSession'][_0x37b18e(0x6da)]) { if ('dIJJz' === _0x37b18e(0x916)) _0x27682a['style'][_0x37b18e(0x243)] = _0x37b18e(0x293), setTimeout(() => _0x27682a[_0x37b18e(0x402)][_0x37b18e(0x3ea)](_0x37b18e(0x393)), 0xa); else { const _0x5f3e09 = _0x45dba9['chats']['find'](_0x3e32a4 => _0x3e32a4[_0x37b18e(0x497)] === _0x37b18e(0x9de) && _0x3e32a4['participantIds'][_0x37b18e(0x6f7)](_0x2529ed['id'])), _0x374531 = _0x43a25e[_0x37b18e(0x63b)][_0x37b18e(0x354)](_0x2066d0 => _0x2066d0['id'] === (_0x5f3e09?.[_0x37b18e(0x482)] || _0x5d4297[_0x37b18e(0x514)])) || { 'id': 'default', 'name': '你' }; let _0xa4e917 = ''; return _0x32b0a1[_0x37b18e(0x12e)] && _0x4d683c[_0x37b18e(0x12e)][_0x37b18e(0x8ab)] > 0x0 && (_0xa4e917 = _0x35e0c8[_0x37b18e(0x12e)][_0x37b18e(0x592)](_0x3a9137 => _0x42a782[_0x37b18e(0x584)][_0x37b18e(0x354)](_0x45db49 => _0x45db49['id'] === _0x3a9137))[_0x37b18e(0x4b7)](_0x4e5a8e)[_0x37b18e(0x592)](_0x2b43da => _0x37b18e(0x487) + _0x2b43da[_0x37b18e(0x4a8)] + ']:\x20' + _0x2b43da['content'])[_0x37b18e(0x2c2)]('')), _0x37b18e(0x382) + _0x21c14a['id'] + _0x37b18e(0x559) + _0x4c1eff[_0x37b18e(0x4a8)] + _0x37b18e(0x3b4) + _0x12c4da[_0x37b18e(0x87d)] + _0x37b18e(0x87a) + _0x374531[_0x37b18e(0x4a8)] + _0x37b18e(0x553) + _0x374531['id'] + ')\x0a' + _0xa4e917; } } }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x4b9), _0x17ff90); const _0x112a52 = document['getElementById']('widget-play-pause-btn'), _0x285f08 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x8e5)), _0x441afe = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x2da)); _0x112a52[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x12a3d1 = _0x4a89cb; _0x483c46[_0x12a3d1(0x9fb)] && (_0x483c46[_0x12a3d1(0x23d)] ? _0x12a3d1(0xa7a) === _0x12a3d1(0x4ea) ? (_0xa7dfff['error'](_0x12a3d1(0xb01), _0x5254ea), _0x227313(_0x12a3d1(0x4a5) + _0x3a4a84['message'])) : _0x483c46['play']() : _0x12a3d1(0x72b) !== _0x12a3d1(0x8d8) ? _0x483c46[_0x12a3d1(0x998)]() : _0x35939a[_0x12a3d1(0xab9)][_0x12a3d1(0x3ec)] = _0x12a3d1(0x1ea)); }), _0x285f08['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x9b9365 = _0x4a89cb; if (_0x9b9365(0x8ed) === _0x9b9365(0x89c)) { const _0x53f124 = _0x1835eb(_0x72016c[_0x9b9365(0x89b)], _0x19ef46['history'], _0x50293b); if (_0x53f124[_0x9b9365(0x8ab)] === 0x0) return; const _0x195414 = _0x5c961f === 0x0 ? _0x9b9365(0x82a) : _0x9b9365(0x3b6); _0x4ae71b[_0x9b9365(0x9f2)](_0x9b9365(0x642) + _0x195414 + _0x1d5957(_0x34f2ab[_0x9b9365(0x89b)]) + '\x0a' + _0x53f124[_0x9b9365(0x2c2)]('\x0a')), _0x2d8d1e[_0x16734c[_0x9b9365(0x89b)]['id']] = _0x53f124[_0x9b9365(0x8ab)]; } else { if (_0x1c8a26['length'] === 0x0) return; _0x1d61a3 = (_0x1d61a3 + 0x1) % _0x1c8a26[_0x9b9365(0x8ab)], _0x42ede9(_0x1c8a26[_0x1d61a3], _0x1c8a26); } }), _0x441afe['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x1ffc3f = _0x4a89cb; if (_0x1c8a26[_0x1ffc3f(0x8ab)] === 0x0) return; _0x1d61a3 = (_0x1d61a3 - 0x1 + _0x1c8a26['length']) % _0x1c8a26[_0x1ffc3f(0x8ab)], _0x42ede9(_0x1c8a26[_0x1d61a3], _0x1c8a26); }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x432), () => { const _0xc1d04d = _0x4a89cb; _0x112a52[_0xc1d04d(0x908)] = '❚❚'; }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x998), () => { const _0x59f49f = _0x4a89cb; _0x112a52[_0x59f49f(0x908)] = '▶'; }), _0x483c46[_0x4a89cb(0xe9)]('ended', () => { const _0xcc792a = _0x4a89cb; _0x285f08[_0xcc792a(0x6f4)](); }), _0x483c46['addEventListener'](_0x4a89cb(0x432), () => { const _0x1a7345 = _0x4a89cb, _0x2e4ceb = document['getElementById'](_0x1a7345(0x151)); if (_0x2e4ceb) _0x2e4ceb[_0x1a7345(0x908)] = '❚❚'; }), _0x483c46['addEventListener'](_0x4a89cb(0x998), () => { const _0x1716e0 = _0x4a89cb, _0x1ccfd7 = document[_0x1716e0(0x2fc)](_0x1716e0(0x151)); if (_0x1ccfd7) _0x1ccfd7[_0x1716e0(0x908)] = '▶'; }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x692), () => { const _0x2d6cfe = _0x4a89cb, _0x500215 = document[_0x2d6cfe(0x2fc)](_0x2d6cfe(0x3ac)); _0x500215 && _0x500215['click'](); }); function _0x299e9f(_0x55272e) { const _0xd158d7 = _0x4a89cb; if (!_0x55272e || typeof _0x55272e !== 'string') return null; const _0x2a7d5c = _0x55272e['indexOf']('['), _0x801187 = _0x55272e[_0xd158d7(0x1aa)](']'); if (_0x2a7d5c > -0x1 && _0x801187 > _0x2a7d5c) return _0x55272e['substring'](_0x2a7d5c, _0x801187 + 0x1); return null; } document[_0x4a89cb(0x2fc)](_0x4a89cb(0x686))['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x1b91b0 = _0x4a89cb; _0x46e002(), _0x43c005(_0x1b91b0(0x9d0), _0x1b91b0(0xa20)); }), document['getElementById'](_0x4a89cb(0x430))['addEventListener'](_0x4a89cb(0x6f4), () => _0x43c005('home', _0x4a89cb(0x9d0))); const _0x579b29 = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x73b)), _0x2187ac = document[_0x4a89cb(0x2fc)](_0x4a89cb(0x9b7)); _0x579b29['addEventListener'](_0x4a89cb(0x6f4), _0x46e002), _0x2187ac['addEventListener']('click', () => { const _0x17cc6a = _0x4a89cb; _0x579b29[_0x17cc6a(0x402)][_0x17cc6a(0x3c2)](_0x17cc6a(0x911)), _0x2187ac[_0x17cc6a(0x402)][_0x17cc6a(0x3ea)](_0x17cc6a(0x911)), _0x33eb37(); }); function _0x46e002() { const _0x15c650 = _0x4a89cb; _0x2187ac['classList'][_0x15c650(0x3c2)](_0x15c650(0x911)), _0x579b29[_0x15c650(0x402)]['add'](_0x15c650(0x911)), _0x4b553f(); } function _0x4b553f() { const _0x437dcb = _0x4a89cb, _0xf99e5a = document[_0x437dcb(0x2fc)](_0x437dcb(0x357)); document[_0x437dcb(0x2fc)](_0x437dcb(0x9d3))[_0x437dcb(0x908)] = _0x437dcb(0x3f3), document[_0x437dcb(0x2fc)](_0x437dcb(0x28e))[_0x437dcb(0x109)] = '', _0xf99e5a[_0x437dcb(0x109)] = _0x437dcb(0x2bd), _0x4d473b(), document[_0x437dcb(0x2fc)](_0x437dcb(0x889))[_0x437dcb(0xe9)](_0x437dcb(0x6f4), _0x29d213), document[_0x437dcb(0x2fc)](_0x437dcb(0x859))[_0x437dcb(0xe9)](_0x437dcb(0x6f4), _0x31ab09 => { const _0x23b2a5 = _0x437dcb; if (_0x31ab09['target']['classList']['contains'](_0x23b2a5(0xa50))) { if (_0x23b2a5(0xab7) === 'wsvnG') { const _0x5dd1d6 = _0x31ab09['target'][_0x23b2a5(0x977)]['id']; _0x46bf1c('确定要删除这笔记录吗？')['then'](_0x3590c7 => { const _0x27d41a = _0x23b2a5; _0x3590c7 && (_0x27d41a(0xa8a) === _0x27d41a(0x755) ? _0x44b71f[_0x27d41a(0x91b)] = _0x2d13d1[_0x27d41a(0x592)](_0x2a0a7b => _0x2a0a7b[_0x27d41a(0x4a8)] + '--' + _0x2a0a7b[_0x27d41a(0x677)])[_0x27d41a(0x2c2)]('\x0a') : _0x51703c(_0x5dd1d6)); }); } else _0x5841e1(_0x33e470[_0x23b2a5(0x91b)]), _0x70aa8a(); } }), document['getElementById']('expense-description')['focus'](); } function _0x3c8c9c(_0x325ce3, _0xa18ffb) { const _0x503982 = _0x4a89cb, _0x5568da = document[_0x503982(0x2fc)]('accounting-content-area'), _0x174227 = document[_0x503982(0x2fc)]('header-actions'); document[_0x503982(0x2fc)]('accounting-title')[_0x503982(0x908)] = _0xa18ffb + _0x503982(0x41e); const _0x454b6b = _0x325ce3[_0x503982(0x781)][_0x503982(0x5e1)]((_0x3ba065, _0x4cb994) => _0x3ba065 + (_0x4cb994[_0x503982(0xb31)] || 0x0), 0x0); let _0x4c9cf5 = _0x503982(0x2f4) + _0x454b6b['toFixed'](0x2) + _0x503982(0x858); _0x5568da[_0x503982(0x109)] = _0x4c9cf5; const _0x3cce94 = document['getElementById'](_0x503982(0x587)), _0x399f40 = { '餐饮美食': _0x503982(0x731), '交通出行': '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '购物消费': _0x503982(0xb2f), '生活服务': _0x503982(0xaa6), '休闲娱乐': _0x503982(0x507), '医疗健康': _0x503982(0x315), '人情红包': _0x503982(0x72f), '其他杂项': _0x503982(0x618), '默认': _0x503982(0x11b) }; _0x325ce3[_0x503982(0x781)]['forEach'](_0x4c6ad0 => { const _0x267f26 = _0x503982, _0x4eb2f4 = document[_0x267f26(0x53d)]('div'); _0x4eb2f4['className'] = _0x267f26(0x8b8), _0x4eb2f4[_0x267f26(0xab9)][_0x267f26(0x9c4)] = _0x267f26(0x3d3), _0x4eb2f4[_0x267f26(0xab9)][_0x267f26(0x475)] = _0x267f26(0xa79), _0x4eb2f4[_0x267f26(0xab9)][_0x267f26(0xae0)] = _0x267f26(0x1a4), _0x4eb2f4[_0x267f26(0xab9)][_0x267f26(0x403)] = '0'; const _0x2301f5 = _0x399f40[_0x4c6ad0[_0x267f26(0x318)]] || _0x399f40['默认'], _0x1a23a2 = _0x267f26(0x970) + _0x2301f5 + '</svg>', _0x8197f4 = _0x267f26(0x7fa) + _0x1a23a2 + _0x267f26(0x725) + _0x4c6ad0['description'] + _0x267f26(0x962) + (_0x4c6ad0['category'] || '未分类') + _0x267f26(0x632) + (_0x4c6ad0[_0x267f26(0xb31)] || 0x0)['toFixed'](0x2) + _0x267f26(0x892); let _0x24c92b = ''; if (_0x4c6ad0[_0x267f26(0xaf5)] && _0x4c6ad0[_0x267f26(0xaf5)]['charId']) { const _0x10af35 = _0xe97381(_0x4c6ad0[_0x267f26(0xaf5)]['charId']); _0x10af35 && (_0x24c92b = '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22' + _0x10af35[_0x267f26(0x496)] + _0x267f26(0x94a) + _0x10af35['name'] + _0x267f26(0xaf1) + _0x4c6ad0[_0x267f26(0xaf5)]['text'] + _0x267f26(0x453)); } _0x4eb2f4['innerHTML'] = _0x8197f4 + _0x24c92b, _0x3cce94[_0x267f26(0x30a)](_0x4eb2f4); }), _0x174227[_0x503982(0x109)] = _0x503982(0x7df), document[_0x503982(0x2fc)]('re-record-button')[_0x503982(0xe9)](_0x503982(0x6f4), async () => { const _0x487162 = _0x503982; if (_0x487162(0x446) !== _0x487162(0x446)) { const _0x5f400b = _0x19243d[_0x487162(0x584)][_0x487162(0x354)](_0x4091e5 => _0x4091e5['id'] === _0x52cdff); if (!_0x5f400b) return; _0x25fa5d[_0x487162(0x2fc)]('editing-world-book-id')[_0x487162(0x91b)] = _0x5f400b['id'], _0x5951a0[_0x487162(0x2fc)](_0x487162(0xae4))[_0x487162(0x908)] = _0x487162(0xa5f), _0x2bcca4['getElementById'](_0x487162(0x1fc))[_0x487162(0x91b)] = _0x5f400b[_0x487162(0x4a8)], _0x28f74e[_0x487162(0x2fc)]('world-book-edit-content')[_0x487162(0x91b)] = _0x5f400b[_0x487162(0xaf8)]; } else { const _0x522c19 = await _0x46bf1c('确定要重新记录吗？当前的账单会被删除。'); if (_0x522c19) { if (_0x487162(0x760) !== _0x487162(0x760)) { _0x3580b7(_0x487162(0xa8f)); return; } else { const _0x55835b = _0x21e37d[_0x487162(0x288)][_0xa18ffb]; _0x55835b && _0x55835b[_0x487162(0x81c)] && _0x21e37d['accountingData'][_0x487162(0x9f2)](..._0x55835b[_0x487162(0x81c)]), delete _0x21e37d[_0x487162(0x288)][_0xa18ffb], _0x37e4ef(), _0x4b553f(); } } } }); } function _0x33eb37() { const _0x3db1d5 = _0x4a89cb, _0x20835e = document['getElementById'](_0x3db1d5(0x357)); document[_0x3db1d5(0x2fc)]('accounting-title')[_0x3db1d5(0x908)] = '账本', document[_0x3db1d5(0x2fc)](_0x3db1d5(0x28e))[_0x3db1d5(0x109)] = ''; const _0x214000 = Object[_0x3db1d5(0x2fe)](_0x21e37d[_0x3db1d5(0x288)])[_0x3db1d5(0xa17)]((_0x480a6a, _0x54b4ea) => new Date(_0x54b4ea) - new Date(_0x480a6a)); if (_0x214000[_0x3db1d5(0x8ab)] === 0x0) { _0x20835e[_0x3db1d5(0x109)] = _0x3db1d5(0x8b7); return; } _0x20835e[_0x3db1d5(0x109)] = '', _0x214000[_0x3db1d5(0xb13)](_0x3dfd81 => { const _0x3610c3 = _0x3db1d5, _0x1b075e = document[_0x3610c3(0x53d)]('div'); _0x1b075e[_0x3610c3(0x175)] = _0x3610c3(0x8b8), _0x1b075e['style']['cursor'] = 'pointer'; const _0x238ba6 = _0x21e37d[_0x3610c3(0x288)][_0x3dfd81], _0x4beef4 = _0x238ba6[_0x3610c3(0x781)][_0x3610c3(0x5e1)]((_0x3597c5, _0x55ef2b) => _0x3597c5 + (_0x55ef2b[_0x3610c3(0xb31)] || 0x0), 0x0); _0x1b075e[_0x3610c3(0x109)] = '<span\x20class=\x22description\x22>' + _0x3dfd81 + _0x3610c3(0x4c0) + _0x4beef4[_0x3610c3(0x6be)](0x2) + _0x3610c3(0x421), _0x1b075e[_0x3610c3(0xe9)](_0x3610c3(0x6f4), () => { const _0xd4c7e2 = _0x3610c3; _0x579b29[_0xd4c7e2(0x402)][_0xd4c7e2(0x3c2)](_0xd4c7e2(0x911)), _0x2187ac[_0xd4c7e2(0x402)][_0xd4c7e2(0x3ea)]('active'), _0x3c8c9c(_0x238ba6, _0x3dfd81); }), _0x20835e['appendChild'](_0x1b075e); }); } function _0x29d213() { const _0x5f2e8b = _0x4a89cb, _0x5d972e = document[_0x5f2e8b(0x2fc)]('expense-description'), _0x39d0b3 = document[_0x5f2e8b(0x2fc)]('expense-amount'), _0x27a83c = _0x5d972e[_0x5f2e8b(0x91b)][_0x5f2e8b(0x1b5)](), _0x4f80ba = parseFloat(_0x39d0b3[_0x5f2e8b(0x91b)]); if (!_0x27a83c || isNaN(_0x4f80ba) || _0x4f80ba <= 0x0) { _0x2d1f89('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } _0x21e37d['accountingData'][_0x5f2e8b(0x9f2)]({ 'id': 'exp_' + Date[_0x5f2e8b(0x300)](), 'description': _0x27a83c, 'amount': _0x4f80ba, 'timestamp': Date[_0x5f2e8b(0x300)]() }), _0x37e4ef(), _0x4d473b(), _0x5d972e[_0x5f2e8b(0x91b)] = '', _0x39d0b3[_0x5f2e8b(0x91b)] = '', _0x5d972e[_0x5f2e8b(0x83c)](); } function _0x51703c(_0xd5a899) { const _0x5383a8 = _0x4a89cb, _0x443c71 = _0x21e37d[_0x5383a8(0x2f7)][_0x5383a8(0x34e)](_0x22fd16 => _0x22fd16['id'] === _0xd5a899); _0x443c71 > -0x1 && (_0x21e37d['accountingData'][_0x5383a8(0x7d1)](_0x443c71, 0x1), _0x37e4ef(), _0x4d473b()); } function _0x4d473b() { const _0x9ac8c5 = _0x4a89cb; if (_0x9ac8c5(0x286) !== _0x9ac8c5(0x286)) { const _0x259bb6 = _0x26d58e[_0x9ac8c5(0x7b7)](_0x9ac8c5(0x906)); if (_0x259bb6) { const { playlist: _0x70af23, currentIndex: _0x48d5e6 } = _0x24b0ec['parse'](_0x259bb6); _0x9a7ee8[_0x9ac8c5(0x684)](_0x70af23) && _0x70af23[_0x9ac8c5(0x8ab)] > 0x0 && _0x48d5e6 > -0x1 && (_0x2f4c51['musicPlaylist'] = _0x70af23, _0xabb8f3['currentlyPlayingIndex'] = _0x48d5e6, _0x5f3238[_0x9ac8c5(0x4c8)] = ![], _0x4ed306()); } } else { const _0x2ad15b = document[_0x9ac8c5(0x2fc)](_0x9ac8c5(0x859)), _0x4c0d16 = document[_0x9ac8c5(0x2fc)]('organize-button-container'), _0x22f9f = new Date(), _0x4a7ce8 = _0x21e37d['accountingData'][_0x9ac8c5(0x4b7)](_0x553497 => new Date(_0x553497['timestamp'])[_0x9ac8c5(0x24e)]() === _0x22f9f['toDateString']()); if (_0x4a7ce8['length'] === 0x0) { if (_0x9ac8c5(0x628) !== 'vEVnL') _0x464d6b['textContent'] = '▶'; else { _0x2ad15b[_0x9ac8c5(0x109)] = _0x9ac8c5(0x4b2), _0x4c0d16[_0x9ac8c5(0x109)] = ''; return; } } _0x2ad15b[_0x9ac8c5(0x109)] = '', _0x4a7ce8[_0x9ac8c5(0xa17)]((_0x39ac3a, _0xf4a4ed) => _0xf4a4ed['timestamp'] - _0x39ac3a['timestamp'])['forEach'](_0x42dafd => { const _0x15fd6a = _0x9ac8c5, _0x5ec01d = document['createElement']('div'); _0x5ec01d[_0x15fd6a(0x175)] = _0x15fd6a(0x8b8), _0x5ec01d[_0x15fd6a(0x109)] = _0x15fd6a(0x5e3) + _0x42dafd['description'] + _0x15fd6a(0x54b) + _0x42dafd[_0x15fd6a(0xb31)][_0x15fd6a(0x6be)](0x2) + _0x15fd6a(0x626) + _0x42dafd['id'] + _0x15fd6a(0x87f), _0x2ad15b[_0x15fd6a(0x30a)](_0x5ec01d); }), _0x4c0d16 && (_0x9ac8c5(0x663) === _0x9ac8c5(0x663) ? (_0x4c0d16[_0x9ac8c5(0x109)] = _0x9ac8c5(0x59c), document[_0x9ac8c5(0x2fc)]('organize-bill-button')[_0x9ac8c5(0xe9)](_0x9ac8c5(0x6f4), _0x59b9f8)) : _0x218037['diaryPressTimer'] = _0x2821a8(() => { const _0x582e5d = _0x9ac8c5; if (_0x2901bb['type'] === _0x582e5d(0x5d1)) _0x431388[_0x582e5d(0x6bc)](); _0x5afd92(_0x155237(_0x451c6e, 0xa), _0x1a8cdc); }, 0x320)); } } async function _0x59b9f8() { const _0x343fb5 = _0x4a89cb, _0x2aac4f = new Date(), _0x576293 = _0x2aac4f[_0x343fb5(0x71a)]() + '-' + String(_0x2aac4f[_0x343fb5(0x180)]() + 0x1)[_0x343fb5(0x1df)](0x2, '0') + '-' + String(_0x2aac4f[_0x343fb5(0x1c4)]())['padStart'](0x2, '0'); if (_0x21e37d[_0x343fb5(0x288)][_0x576293]) { if (_0x343fb5(0x6a7) === _0x343fb5(0x2ab)) _0x11bf7d['listenTogetherSession'] && _0x44e5b1[_0x343fb5(0x7dc)]['isActive'] && (_0x2a7524[_0x343fb5(0xab9)][_0x343fb5(0x243)] = _0x343fb5(0x293), _0x102900(() => _0x536287['classList'][_0x343fb5(0x3ea)](_0x343fb5(0x393)), 0xa)); else { _0x2d1f89(_0x343fb5(0x874)); return; } } const _0x3d6dc2 = _0x21e37d['accountingData'][_0x343fb5(0x4b7)](_0x7a16d8 => new Date(_0x7a16d8['timestamp'])[_0x343fb5(0x24e)]() === _0x2aac4f['toDateString']()); if (_0x3d6dc2[_0x343fb5(0x8ab)] === 0x0) { if ('PqfEa' === _0x343fb5(0x615)) _0x3929e3 = _0x343fb5(0x120) + _0x44604f + _0x343fb5(0x21a); else { _0x2d1f89('今天一笔账都没有，我整理什么？'); return; } } _0x171a38(!![], '正在整理…'); try { const _0x606f34 = [_0x343fb5(0x15e), _0x343fb5(0xa84), _0x343fb5(0x5c4), '生活服务', _0x343fb5(0x757), '医疗健康', _0x343fb5(0x2e9), _0x343fb5(0x68a)], _0x1cef11 = _0x3d6dc2['map'](_0x5de9ce => '-\x20' + _0x5de9ce[_0x343fb5(0x4bf)] + ':\x20' + _0x5de9ce[_0x343fb5(0xb31)])[_0x343fb5(0x2c2)]('\x0a'), _0x262345 = _0x21e37d[_0x343fb5(0x32d)][_0x343fb5(0x592)](_0x13aa32 => { const _0x18a7e7 = _0x343fb5, _0x354726 = _0x21e37d[_0x18a7e7(0x69a)][_0x18a7e7(0x354)](_0x28917c => _0x28917c[_0x18a7e7(0x497)] === _0x18a7e7(0x9de) && _0x28917c[_0x18a7e7(0xad8)]['includes'](_0x13aa32['id'])), _0x25164b = _0x21e37d[_0x18a7e7(0x63b)]['find'](_0x8be1fd => _0x8be1fd['id'] === (_0x354726?.[_0x18a7e7(0x482)] || _0x21e37d[_0x18a7e7(0x514)])) || { 'id': _0x18a7e7(0xa45), 'name': '你' }; let _0x42a919 = ''; return _0x13aa32[_0x18a7e7(0x12e)] && _0x13aa32[_0x18a7e7(0x12e)][_0x18a7e7(0x8ab)] > 0x0 && (_0x42a919 = _0x13aa32[_0x18a7e7(0x12e)][_0x18a7e7(0x592)](_0x55cd21 => _0x21e37d['worldBooks'][_0x18a7e7(0x354)](_0x45bff7 => _0x45bff7['id'] === _0x55cd21))['filter'](Boolean)[_0x18a7e7(0x592)](_0x24e10d => _0x18a7e7(0x487) + _0x24e10d[_0x18a7e7(0x4a8)] + _0x18a7e7(0x3a4) + _0x24e10d[_0x18a7e7(0xaf8)])[_0x18a7e7(0x2c2)]('')), '\x20\x20-\x20角色ID:\x20' + _0x13aa32['id'] + _0x18a7e7(0x559) + _0x13aa32[_0x18a7e7(0x4a8)] + '\x0a\x20\x20\x20\x20人设:\x20' + _0x13aa32[_0x18a7e7(0x87d)] + '\x0a\x20\x20\x20\x20绑定用户:\x20' + _0x25164b['name'] + '\x20(ID:\x20' + _0x25164b['id'] + ')\x0a' + _0x42a919; })[_0x343fb5(0x2c2)]('\x0a'), _0x1a51eb = _0x21e37d[_0x343fb5(0x63b)][_0x343fb5(0x592)](_0x46933f => '\x20\x20-\x20用户ID:\x20' + _0x46933f['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x46933f[_0x343fb5(0x4a8)] + _0x343fb5(0x3b4) + (_0x46933f[_0x343fb5(0x87d)] || '无'))[_0x343fb5(0x2c2)]('\x0a'), _0x3c6d28 = _0x343fb5(0x4d3), _0xfca8f9 = _0x343fb5(0x9af) + _0x606f34[_0x343fb5(0x2c2)](',\x20') + _0x343fb5(0x298) + _0x262345 + _0x343fb5(0x6a6) + _0x1a51eb + _0x343fb5(0x423) + _0x1cef11, _0x77abc3 = [{ 'role': _0x343fb5(0x707), 'content': _0x3c6d28 }, { 'role': _0x343fb5(0x1a8), 'content': _0xfca8f9 }], _0x2aa671 = await _0xa3cec0(_0x77abc3, { 'json': !![] }), _0x30281c = _0x299e9f(_0x2aa671); if (!_0x30281c) throw new Error('AI返回的内容里找不到有效的JSON数组。原始回复:\x20' + _0x2aa671); const _0x18d0f4 = JSON['parse'](_0x30281c); _0x21e37d[_0x343fb5(0x288)][_0x576293] = { 'categorizedExpenses': _0x18d0f4, 'timestamp': Date[_0x343fb5(0x300)](), 'originalExpenses': _0x3d6dc2 }, _0x21e37d['accountingData'] = _0x21e37d['accountingData'][_0x343fb5(0x4b7)](_0x5d3b5c => new Date(_0x5d3b5c[_0x343fb5(0x6cc)])[_0x343fb5(0x24e)]() !== _0x2aac4f['toDateString']()), _0x37e4ef(), _0x3c8c9c(_0x21e37d[_0x343fb5(0x288)][_0x576293], _0x576293); } catch (_0x3c8ea9) { _0x2d1f89(_0x343fb5(0x1ac) + _0x3c8ea9[_0x343fb5(0x420)]); } finally { _0x171a38(![]); } } async function _0x54b26e() { const _0x3d0034 = _0x4a89cb, _0x36e95c = [..._0x112b9d]; try { const _0x3c824f = localStorage[_0x3d0034(0x7b7)]('customStickers'); if (_0x3c824f) { if ('btBNu' === _0x3d0034(0x762)) { const _0x1dec67 = JSON[_0x3d0034(0x16b)](_0x3c824f); Array[_0x3d0034(0x684)](_0x1dec67) ? _0x21b45c = [..._0x36e95c, ..._0x1dec67] : _0x21b45c = _0x36e95c; } else _0x297e14 += _0x3d0034(0x14c); } else _0x21b45c = _0x36e95c; } catch (_0x30799e) { console[_0x3d0034(0xa12)](_0x3d0034(0x35b), _0x30799e), _0x21b45c = _0x36e95c; } if (!localStorage[_0x3d0034(0x7b7)](_0x3d0034(0xa75))) { _0x46bf1c(_0x3d0034(0x45d))[_0x3d0034(0x8c0)](async _0x5c8de9 => { const _0x5efb7e = _0x3d0034; _0x5c8de9 ? 'ZdbAz' !== _0x5efb7e(0x575) ? (_0x33bc05[_0x7f20ce][_0x5efb7e(0xe9)](_0x5efb7e(0x6f4), () => _0x3a349b[_0x1cb298][_0x5efb7e(0x6f4)]()), _0x171401[_0x10e1cc]['addEventListener'](_0x5efb7e(0x782), _0x5619af => { const _0x5bee05 = _0x5efb7e; _0x1317ba(_0x53c784, _0x5619af['target'][_0x5bee05(0x10d)][0x0]); })) : (_0x171a38(!![], _0x5efb7e(0x829)), await _0x46f89f(), localStorage[_0x5efb7e(0x25f)](_0x5efb7e(0xa75), _0x5efb7e(0x648)), _0x171a38(![]), _0x2d1f89(_0x5efb7e(0x173)), setTimeout(() => location[_0x5efb7e(0x6a1)](), 0x5dc)) : _0x2d1f89(_0x5efb7e(0x2b8)); }); return; } if (!localStorage['getItem'](_0x3d0034(0x2d9))) { console[_0x3d0034(0x172)](_0x3d0034(0x741)), _0x171a38(!![], _0x3d0034(0x474)); const _0xc30fe6 = await _0x4a8fc3(); localStorage[_0x3d0034(0x25f)]('noir_migration_fc_v1_complete', _0x3d0034(0x648)), _0x171a38(![]); if (_0xc30fe6 > 0x0) { _0x2d1f89(_0x3d0034(0x1c6) + _0xc30fe6 + _0x3d0034(0x365)), setTimeout(() => location[_0x3d0034(0x6a1)](), 0x5dc); return; } } if (!localStorage['getItem'](_0x3d0034(0x2d9))) { } if (!localStorage[_0x3d0034(0x7b7)](_0x3d0034(0xa3f))) { console[_0x3d0034(0x172)]('执行音乐封面数据净化...'), _0x171a38(!![], _0x3d0034(0x9fe)); const _0x1fa20f = await _0x58d003(); localStorage[_0x3d0034(0x25f)]('noir_migration_music_v1_complete', _0x3d0034(0x648)), _0x171a38(![]); if (_0x1fa20f > 0x0) { _0x2d1f89('音乐数据升级完成，迁移了\x20' + _0x1fa20f + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0x3d0034(0x6a1)](), 0x5dc); return; } } if (!localStorage['getItem'](_0x3d0034(0x3ae))) { const _0x25103f = await _0x40fb81(); localStorage[_0x3d0034(0x25f)](_0x3d0034(0x3ae), _0x3d0034(0x648)); if (_0x25103f > 0x0) { _0x2d1f89(_0x3d0034(0x8e2) + _0x25103f + '\x20个旧头像。应用即将刷新。'), setTimeout(() => location[_0x3d0034(0x6a1)](), 0x5dc); return; } } const _0x3e51d9 = document[_0x3d0034(0x2fc)]('app-snoop'); _0x3e51d9 ? _0x3e51d9[_0x3d0034(0xe9)]('click', () => { const _0x281636 = _0x3d0034; if ('JnYag' !== _0x281636(0x960)) { const _0x104580 = _0x5bd65d[_0x281636(0x872)][_0x281636(0xa8b)](); _0x23c190['textContent'] = _0x104580[_0x281636(0x966)] === _0x281636(0x6ce) ? '旁白' : _0x104580['speaker'], _0x482f40['textContent'] = _0x104580['line'], _0x104580['speaker'] !== 'narrator' && _0x2f8b2f(_0x2e1619[_0x281636(0x2fa)], _0x104580[_0x281636(0x8b6)]); } else _0x4a8ae6(), _0x43c005(_0x281636(0x776), _0x281636(0xa20)); }) : console[_0x3d0034(0xa12)](_0x3d0034(0x9d6)); const _0x435e84 = _0x3b4234(); await _0x2cdd84(); try { const _0x2152cb = localStorage[_0x3d0034(0x7b7)](_0x3d0034(0x689)); if (_0x2152cb) { if (_0x3d0034(0xf5) !== _0x3d0034(0xae1)) { const _0x5df959 = JSON[_0x3d0034(0x16b)](_0x2152cb); _0x5df959[_0x3d0034(0x288)] && (_0x21e37d['accountingLedger'] = _0x5df959[_0x3d0034(0x288)], console[_0x3d0034(0x172)](_0x3d0034(0x988))); } else { _0xd6baed['innerHTML'] = _0x3d0034(0x5b0); return; } } } catch (_0x189990) { if (_0x3d0034(0x3e7) === _0x3d0034(0x8f6)) { if (_0x2fd728['type'] === 'group') return '群聊「' + (_0x507a03['name'] || '未命名') + '」'; const _0x5e09b9 = _0x4098c7(_0x33046d['participantIds'][0x0]); return '与\x20' + (_0x5e09b9?.[_0x3d0034(0x4a8)] || _0x3d0034(0x5a7)) + _0x3d0034(0x63f); } else console[_0x3d0034(0xa12)](_0x3d0034(0x772), _0x189990); } _0x475016(), _0x4bd1af(), _0x50c4d3(), _0x272b51(), _0x2f0687(), _0x45e573(), _0x3b2f7f(), _0x519ceb(), _0x2dc505(), _0xe1a9f2(), _0xf35ba(), _0x38dbb6(), _0x26bfa9(), setInterval(_0x26bfa9, 0x7530), _0x2befa2(), _0x12c63b(), _0x3395e3(); const _0x24aa3c = document[_0x3d0034(0x2fc)](_0x3d0034(0x92d)); document['getElementById'](_0x3d0034(0x887))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), function (_0x90d106) { const _0x5730cb = _0x3d0034; if ('oYBCm' !== _0x5730cb(0x800)) { const _0x41497e = _0x26c8e6[_0x5730cb(0x91b)]; let _0x4b856a = _0x41497e['replace'](/\.bubble\.sent/g, _0x5730cb(0x649))[_0x5730cb(0x8f0)](/\.bubble\.received/g, _0x5730cb(0xa67)); _0x5b4568[_0x5730cb(0x109)] = _0x4b856a; } else { if (_0x90d106[_0x5730cb(0x37e)][_0x5730cb(0xb28)](_0x5730cb(0x6ec))) { if (_0x5730cb(0x98e) === _0x5730cb(0x98e)) return; else _0x295d80 = _0xb4599[_0x5730cb(0x63b)][0x0]; } const _0x3f309b = document[_0x5730cb(0x2fc)](_0x5730cb(0x4a9)); _0x3f309b && (_0x5730cb(0xa2c) !== 'xXGNb' ? (_0x440422[_0x5730cb(0xa12)](_0x5730cb(0x29c), _0x1d9520), _0x236e47 = _0x5730cb(0x38d) + _0x34306e + _0x5730cb(0xb34)) : _0x3f309b[_0x5730cb(0x6f4)]()); } }), _0x43c005(_0x3d0034(0xa20), _0x3d0034(0x828)); (_0x435e84 || _0x21e37d[_0x3d0034(0x32d)][_0x3d0034(0x8ab)] === 0x0) && (_0x3d0034(0x96b) !== _0x3d0034(0x96b) ? _0x36dfb8 = 'vertical' : (_0x2d1f89(_0x3d0034(0xb2b)), setTimeout(() => { const _0x15a9a0 = _0x3d0034; _0x15a9a0(0x614) !== _0x15a9a0(0x946) ? (_0x43c005(_0x15a9a0(0x89b), _0x15a9a0(0xa20)), setTimeout(() => _0x737441(), 0x64)) : (_0x5f2267(_0x2d5ae7, { 'force': !![], 'delayMs': _0x2fc611 }), _0x21f850 += 0x1f4); }, 0x6a4))); document[_0x3d0034(0x2fc)](_0x3d0034(0x247))['addEventListener'](_0x3d0034(0x6f4), _0x39f260); const _0x166ac0 = document[_0x3d0034(0x2fc)](_0x3d0034(0x546)); document['getElementById']('upload-widget-bg-button')[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => _0x166ac0[_0x3d0034(0x6f4)]()), document['getElementById'](_0x3d0034(0x7cf))[_0x3d0034(0xe9)]('click', () => { const _0x4f3b1e = _0x3d0034; _0x21e37d[_0x4f3b1e(0x88a)][_0x4f3b1e(0x5ad)] = null, _0x37e4ef(), _0x2befa2(), _0x2d1f89('小组件背景已恢复默认。'); }), _0x166ac0['addEventListener'](_0x3d0034(0x782), async _0x27e52f => { const _0xc2a547 = _0x3d0034; if (_0xc2a547(0x3c9) !== _0xc2a547(0x903)) { const _0xf92102 = _0x27e52f[_0xc2a547(0x37e)][_0xc2a547(0x10d)][0x0]; if (!_0xf92102) return; try { if ('VAszs' !== _0xc2a547(0x6bd)) { const _0x536b5f = await _0x52f5ff(_0xf92102); _0x21e37d[_0xc2a547(0x88a)][_0xc2a547(0x5ad)] = _0x536b5f, _0x37e4ef(), _0x2befa2(), _0x2d1f89(_0xc2a547(0x82f)); } else { const _0x14bfc3 = _0x5cea41[_0xc2a547(0x53d)](_0xc2a547(0x6b3)); _0x14bfc3[_0xc2a547(0x175)] = 'member-selection-item', _0x14bfc3['innerHTML'] = _0xc2a547(0x597) + _0x175b5b['id'] + '\x22\x20data-id=\x22' + _0x388afd['id'] + _0xc2a547(0x841) + (_0x3f6d1e[_0xc2a547(0x496)] || _0x1247af) + _0xc2a547(0x152) + _0x48ac1a['id'] + '\x22\x20class=\x22char-name\x22>' + _0x5c97f5[_0xc2a547(0x4a8)] + _0xc2a547(0x1ad), _0x16571e[_0xc2a547(0x30a)](_0x14bfc3); } } catch (_0x4a5c12) { 'BngWe' !== 'IHyRZ' ? _0x2d1f89(_0xc2a547(0x3f1) + _0x4a5c12[_0xc2a547(0x420)]) : (_0x242027['activeQuote'] = null, _0x170ebc[_0xc2a547(0xab9)][_0xc2a547(0x243)] = _0xc2a547(0x1ea)); } } else { const _0x303597 = _0x2a76b4[_0xc2a547(0x130)](_0x26a32a, _0xc2a547(0xb24)), _0x20f40b = _0x303597[_0xc2a547(0x50c)](_0x225c16), _0x59db37 = _0x20f40b['delete'](_0x3046ff); _0x59db37[_0xc2a547(0x854)] = () => _0x2dd204(), _0x59db37[_0xc2a547(0x4ef)] = () => _0x57b780(_0x59db37[_0xc2a547(0xa12)]); } }), _0xb56ec6(), document[_0x3d0034(0x2fc)](_0x3d0034(0x39c))[_0x3d0034(0xe9)]('click', () => document['getElementById'](_0x3d0034(0x49b))[_0x3d0034(0x6f4)]()), document[_0x3d0034(0x2fc)](_0x3d0034(0x275))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), async () => { const _0x11edae = _0x3d0034; if (_0x11edae(0x895) !== _0x11edae(0x8f8)) await _0xf90f34('widget_badge'), localStorage[_0x11edae(0xb05)](_0x11edae(0x2d3)), _0xb56ec6(), _0x2d1f89(_0x11edae(0x1cd)); else { if (_0x476d9d['length'] === 0x0) return; _0x555ec7 = (_0x47cc74 + 0x1) % _0x373ed2[_0x11edae(0x8ab)], _0x4571cd(_0x42c5fc[_0x2d4fb4], _0x5f1970); } }), document[_0x3d0034(0x2fc)](_0x3d0034(0x49b))[_0x3d0034(0xe9)](_0x3d0034(0x782), async _0x19f645 => { const _0x781fd3 = _0x3d0034; if (_0x781fd3(0x345) === _0x781fd3(0x5c5)) { const _0x3d2b78 = _0x483eac[_0x781fd3(0x1e4)] || _0x436dc5?.[_0x781fd3(0xad8)][0x0], _0x122d0a = _0x34bac4(_0x3d2b78); _0x4cb826 = _0x122d0a ? _0x122d0a[_0x781fd3(0x4a8)] : '角色'; } else { const _0x3e6c08 = _0x19f645[_0x781fd3(0x37e)][_0x781fd3(0x10d)][0x0]; if (!_0x3e6c08) return; try { _0x781fd3(0x696) === _0x781fd3(0x696) ? (await _0x24ce6b(_0x781fd3(0x4df), _0x3e6c08), await _0xb56ec6(), _0x2d1f89(_0x781fd3(0x216))) : _0x3b200b++; } catch (_0x355f05) { _0x781fd3(0x6ac) !== _0x781fd3(0x511) ? _0x2d1f89(_0x781fd3(0x3f1) + _0x355f05[_0x781fd3(0x420)]) : (_0x25fb63[_0x781fd3(0xa12)](_0x781fd3(0x786), _0x557aff), _0x5acb9e[_0x781fd3(0xa12)]('收到的原始、有问题的文本:', _0x272a73)); } } }), _0x2782a6(), document[_0x3d0034(0x2fc)]('diary-entries-container')[_0x3d0034(0xe9)](_0x3d0034(0x281), _0x46a126), document['getElementById'](_0x3d0034(0x662))[_0x3d0034(0xe9)](_0x3d0034(0x5d1), _0x46a126, { 'passive': ![] }), document['getElementById'](_0x3d0034(0xf2))['addEventListener'](_0x3d0034(0x6f4), () => document['getElementById'](_0x3d0034(0xa64))['click']()), document[_0x3d0034(0x2fc)]('reset-card-button')[_0x3d0034(0xe9)](_0x3d0034(0x6f4), async () => { const _0x31e50d = _0x3d0034; await _0xf90f34(_0x31e50d(0x262)), localStorage['removeItem'](_0x31e50d(0x608)), _0x2782a6(), _0x2d1f89('卡片已移除。'); }), document['getElementById'](_0x3d0034(0xa64))[_0x3d0034(0xe9)](_0x3d0034(0x782), async _0x4293f3 => { const _0x5d2443 = _0x3d0034, _0x6cbc9b = _0x4293f3[_0x5d2443(0x37e)][_0x5d2443(0x10d)][0x0]; if (!_0x6cbc9b) return; try { _0x5d2443(0x512) === 'Wzwzs' ? (await _0x24ce6b(_0x5d2443(0x262), _0x6cbc9b), await _0x2782a6(), _0x2d1f89(_0x5d2443(0x673))) : (_0x16c95b[_0x5d2443(0xa12)]('加载角色\x20' + _0x397f09['id'] + _0x5d2443(0x661), _0x29a4f6), _0x2b7c29[_0x5d2443(0x9fb)] = _0x11b222['avatar'] || _0x5a5323); } catch (_0x1ae56f) { _0x5d2443(0x317) === _0x5d2443(0x317) ? _0x2d1f89(_0x5d2443(0x3f1) + _0x1ae56f[_0x5d2443(0x420)]) : _0x310af9['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x3cb8d8 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x405b22['songName'] + _0x5d2443(0x968) + _0x488ad2[_0x5d2443(0x20b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>'; } }), document[_0x3d0034(0x2fc)](_0x3d0034(0x7f4))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), async () => { const _0x354627 = _0x3d0034, _0x1823ab = await _0x46bf1c('确定要重置所有小组件的位置吗？它们会回到初始位置。'); _0x1823ab && (_0x354627(0x66a) === 'MjsJb' ? _0x4d856d[_0x354627(0x109)] = _0x5ac335 : (localStorage[_0x354627(0xb05)]('badgeState'), localStorage[_0x354627(0xb05)](_0x354627(0x75d)), _0x2d1f89(_0x354627(0x9b4)), setTimeout(() => location[_0x354627(0x6a1)](), 0x3e8))); }); const _0x3fe42e = document[_0x3d0034(0x2fc)](_0x3d0034(0x624)); _0x3fe42e[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => { const _0x3d3fea = _0x3d0034; _0x1be739(), _0x43c005(_0x3d3fea(0x5fd), _0x3d3fea(0xa20)); }); const _0x4a85e8 = document[_0x3d0034(0x2fc)]('app-music-library'); _0x4a85e8['addEventListener']('click', () => { const _0x35047a = _0x3d0034; _0x1d729f(), _0x43c005('musicLibrary', _0x35047a(0xa20)); }), document[_0x3d0034(0x2fc)](_0x3d0034(0xac1))[_0x3d0034(0xe9)]('click', () => _0x43c005(_0x3d0034(0xa20), 'musicLibrary')), document[_0x3d0034(0x2fc)](_0x3d0034(0x8e0))['addEventListener'](_0x3d0034(0x6f4), () => _0x43c005('home', _0x3d0034(0x5fd))), document[_0x3d0034(0x2fc)](_0x3d0034(0xa89))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => { const _0x55fc71 = _0x3d0034; 'sapnr' !== 'tUXsZ' ? (_0x21e37d[_0x55fc71(0x8bb)] = null, _0x43c005('diaryList', _0x55fc71(0x930))) : (_0x2452cd = { 'characterId': _0x2367cb['activeDiaryCharacterId'], 'entries': [] }, _0x537afe[_0x55fc71(0x366)][_0x55fc71(0x9f2)](_0x55fa90)); }), document[_0x3d0034(0x2fc)](_0x3d0034(0x55e))['addEventListener'](_0x3d0034(0x6f4), _0x14c8e6), document['getElementById'](_0x3d0034(0x997))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), _0x17cc8f), document['getElementById'](_0x3d0034(0x26e))[_0x3d0034(0xe9)]('keydown', _0x4b1884 => { const _0xbc6e9a = _0x3d0034; _0xbc6e9a(0x3b3) === _0xbc6e9a(0x3b3) ? _0x4b1884['key'] === _0xbc6e9a(0x60f) && !_0x4b1884[_0xbc6e9a(0x4fa)] && (_0xbc6e9a(0x1f2) === _0xbc6e9a(0x1f2) ? (_0x4b1884[_0xbc6e9a(0x6bc)](), _0x14c8e6()) : (_0xdbb405(![]), _0x217a51[_0xbc6e9a(0xa12)](_0xbc6e9a(0x64b), _0x215658), _0xdbfc32(_0xbc6e9a(0x195) + _0x1ec5bf['message']))) : (_0x5800ff(![]), _0x39a6b7[_0xbc6e9a(0x37e)][_0xbc6e9a(0x91b)] = ''); }); const _0x414b5c = ['normal', _0x3d0034(0xa9b), _0x3d0034(0x114), _0x3d0034(0x39d), 'shy']; _0x414b5c[_0x3d0034(0xb13)](_0x13f9a9 => { const _0x35eccc = _0x3d0034, _0x1655ce = document[_0x35eccc(0x2fc)]('char-edit-sprite-' + _0x13f9a9 + '-preview'), _0x5e7435 = document['getElementById'](_0x35eccc(0x3d8) + _0x13f9a9 + _0x35eccc(0xb14)); _0x1655ce && _0x5e7435 && (_0x1655ce[_0x35eccc(0xe9)](_0x35eccc(0x6f4), () => _0x5e7435[_0x35eccc(0x6f4)]()), _0x5e7435[_0x35eccc(0xe9)]('change', _0x5ce905 => { const _0x5ec473 = _0x35eccc, _0x25317f = _0x5ce905[_0x5ec473(0x37e)][_0x5ec473(0x10d)][0x0]; if (!_0x25317f) return; try { const _0x500ea1 = URL['createObjectURL'](_0x25317f); _0x1655ce[_0x5ec473(0xab9)]['backgroundImage'] = _0x5ec473(0xac5) + _0x500ea1 + '\x27)'; } catch (_0x2db53a) { if (_0x5ec473(0x578) !== 'nLWKf') _0x2d1f89(_0x5ec473(0x301) + _0x2db53a[_0x5ec473(0x420)]); else { const _0x4af2f1 = _0x4f7764[_0x5ec473(0x354)](_0x5cc173 => _0x5cc173['name'] === _0x55990f[_0x5ec473(0x210)]); if (_0x4af2f1) { const _0x41cc7e = { 'role': _0x5ec473(0x31e), 'content': _0x5ec473(0x826) + _0x4af2f1[_0x5ec473(0x4a8)] + ']', 'displayUrl': _0x4af2f1[_0x5ec473(0x677)], 'senderId': _0x5012c9['senderId'], 'timestamp': _0x520cc1[_0x5ec473(0x300)](), 'isOffline': _0x4edd05 }; _0x5a9450[_0x5ec473(0x31d)]['push'](_0x41cc7e), _0x4c3bf4(), _0x3f3396(); } } } })); }), document['getElementById']('galgame-textbox-container')['addEventListener'](_0x3d0034(0x6f4), _0x362baf), document[_0x3d0034(0x2fc)]('toggle-meeting-view-button')[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => { const _0x5eb46d = _0x3d0034; if (_0x5eb46d(0x330) === _0x5eb46d(0x330)) _0x21e37d['meetingViewMode'] = _0x21e37d[_0x5eb46d(0x488)] === _0x5eb46d(0x2ef) ? _0x5eb46d(0x8b9) : _0x5eb46d(0x2ef), _0x22dc8c(); else { _0x6c34e6[_0x5eb46d(0x32d)] = _0xd53882[_0x5eb46d(0x32d)][_0x5eb46d(0x4b7)](_0x234744 => _0x234744['id'] !== _0x1fc14d), _0x53327b['chats']['forEach'](_0x2a8e52 => { const _0x1bc3f1 = _0x5eb46d; _0x2a8e52[_0x1bc3f1(0x497)] === 'group' && (_0x2a8e52[_0x1bc3f1(0xad8)] = _0x2a8e52[_0x1bc3f1(0xad8)][_0x1bc3f1(0x4b7)](_0xdc834f => _0xdc834f !== _0x19ea35)); }); const _0x2b22b4 = _0xf7628e[_0x5eb46d(0x69a)][_0x5eb46d(0x354)](_0x21a9e3 => _0x21a9e3['type'] === _0x5eb46d(0x9de) && _0x21a9e3['participantIds'][_0x5eb46d(0x6f7)](_0x2032f2)); _0x2b22b4 && _0x5238a4(_0x2b22b4['id']), _0x1be9ae[_0x5eb46d(0x69a)] = _0x5a65c9[_0x5eb46d(0x69a)][_0x5eb46d(0x4b7)](_0x88b813 => _0x88b813['type'] !== _0x5eb46d(0x869) || _0x88b813[_0x5eb46d(0xad8)][_0x5eb46d(0x8ab)] > 0x1), _0x5e581a(), _0x152f5f(); } }), document[_0x3d0034(0x2fc)](_0x3d0034(0x17b))[_0x3d0034(0xe9)](_0x3d0034(0x281), _0x2eaa50), document[_0x3d0034(0x2fc)](_0x3d0034(0x17b))['addEventListener'](_0x3d0034(0x5d1), _0x2eaa50, { 'passive': ![] }); let _0x57b11d = null; function _0x2eaa50(_0x597b91) { const _0x269ec4 = _0x3d0034; if (_0x57b11d) clearTimeout(_0x57b11d); const _0xbf435 = _0x597b91[_0x269ec4(0x37e)]['closest'](_0x269ec4(0x459)); if (!_0xbf435) return; const _0x23ce10 = parseInt(_0xbf435[_0x269ec4(0x977)][_0x269ec4(0x5b1)], 0xa); if (isNaN(_0x23ce10)) return; const _0x42e586 = () => { _0x57b11d = setTimeout(() => { const _0x5eb3f7 = _0x1826; if ('gUtmF' === _0x5eb3f7(0x2ff)) { if (_0x597b91[_0x5eb3f7(0x497)] === _0x5eb3f7(0x5d1)) _0x597b91[_0x5eb3f7(0x6bc)](); _0x3731d9(_0x23ce10); } else { const _0x354db8 = _0xe324a4(_0x42c361); if (!_0x354db8) return; _0x2d31db[_0x5eb3f7(0x8bb)] = _0x26907a; const _0x4a328a = _0xe56679[_0x5eb3f7(0x366)][_0x5eb3f7(0x354)](_0x597f1b => _0x597f1b[_0x5eb3f7(0x387)] === _0xc0a836), _0x164a6d = _0x4a328a ? _0x4a328a['entries'][_0x5eb3f7(0x8ab)] : 0x0, _0x345085 = 0x2; _0x313ba8[_0x5eb3f7(0x7d7)] = _0x29ed1f[_0x5eb3f7(0x477)](0x0, _0x261d3e[_0x5eb3f7(0x157)](_0x164a6d / _0x345085) - 0x1), _0x4afb4f[_0x5eb3f7(0x2fc)](_0x5eb3f7(0x701))[_0x5eb3f7(0x908)] = _0x354db8[_0x5eb3f7(0x4a8)] + _0x5eb3f7(0x6aa), _0x174cd1(), _0x353f0b(_0x5eb3f7(0x930), _0x5eb3f7(0x5fd)); } }, 0x320); }, _0x29b56c = () => { if (_0x57b11d) clearTimeout(_0x57b11d); }; document[_0x269ec4(0xe9)](_0x269ec4(0x76b), _0x29b56c, { 'once': !![] }), document[_0x269ec4(0xe9)]('mouseleave', _0x29b56c, { 'once': !![] }), document[_0x269ec4(0xe9)](_0x269ec4(0x4a3), _0x29b56c, { 'once': !![] }), document[_0x269ec4(0xe9)](_0x269ec4(0x3ab), _0x29b56c, { 'once': !![] }), _0x42e586(); } document['body']['addEventListener'](_0x3d0034(0x6f4), _0x1b15fd => { const _0x32e10d = _0x3d0034, _0x1cbfa8 = _0x1b15fd[_0x32e10d(0x37e)][_0x32e10d(0xb28)](_0x32e10d(0x4bd)); if (_0x1cbfa8) { const _0x56ab5c = _0x1b15fd[_0x32e10d(0x37e)][_0x32e10d(0xb28)](_0x32e10d(0x941)), _0xe43e18 = _0x1b15fd[_0x32e10d(0x37e)][_0x32e10d(0xb28)](_0x32e10d(0x9c2)); if (_0x56ab5c) { if (_0x32e10d(0x822) === _0x32e10d(0x25a)) return; else _0x83b5b8(); } else { if (_0xe43e18) { if (_0x32e10d(0x952) !== _0x32e10d(0x952)) _0x15679c[_0x32e10d(0x908)] = '▶'; else { const _0x10e013 = _0xe43e18[_0x32e10d(0xb28)](_0x32e10d(0x75c)), _0xa12074 = _0xe43e18[_0x32e10d(0x977)][_0x32e10d(0x8a3)], _0x293666 = parseInt(_0x10e013[_0x32e10d(0x977)][_0x32e10d(0x5b1)], 0xa); _0x25c013(_0xa12074, _0x293666, _0x1cbfa8); } } else { const _0x56fa28 = _0x4cc3e0(); _0x56fa28 && _0x56fa28[_0x32e10d(0x9e5)] && _0x56fa28['activeListenSession'][_0x32e10d(0x6da)] && (_0x27682a['style']['display'] = _0x32e10d(0x293), setTimeout(() => _0x27682a[_0x32e10d(0x402)][_0x32e10d(0x3ea)](_0x32e10d(0x393)), 0xa)); } } return; } if (window[_0x32e10d(0x43e)]()[_0x32e10d(0x50f)]()) return; const _0x2f8822 = _0x1b15fd['target']['closest'](_0x32e10d(0x75c)); if (_0x2f8822 && !_0x1b15fd['target'][_0x32e10d(0xb28)](_0x32e10d(0x6b1))) { const _0x337924 = parseInt(_0x2f8822[_0x32e10d(0x977)]['historyIndex'], 0xa); !isNaN(_0x337924) && _0x3731d9(_0x337924); } }); const _0x3c0009 = document[_0x3d0034(0x2fc)](_0x3d0034(0x625)); _0x3c0009 && _0x3c0009[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => { const _0xc44e9f = _0x3d0034; _0x2d1f89(_0xc44e9f(0x22e)); }); const _0x5d82f0 = document[_0x3d0034(0x2fc)](_0x3d0034(0x51e)), _0x3197b0 = localStorage[_0x3d0034(0x7b7)](_0x3d0034(0x1bb)); if (_0x3197b0) { if (_0x3d0034(0x3eb) === 'yEELk') try { const _0x261887 = JSON['parse'](_0x3197b0); Array[_0x3d0034(0x684)](_0x261887) && (_0x5d82f0[_0x3d0034(0x91b)] = _0x261887['map'](_0x499380 => _0x499380[_0x3d0034(0x4a8)] + '--' + _0x499380[_0x3d0034(0x677)])[_0x3d0034(0x2c2)]('\x0a')); } catch (_0x449a0a) { } else _0x30f83c(_0x3b1f12), _0x5812d1(); } document[_0x3d0034(0x2fc)](_0x3d0034(0x721))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), () => { const _0x3886d7 = _0x3d0034, _0x265c60 = _0x5d82f0['value'], _0x3a9ab2 = _0x265c60[_0x3886d7(0x115)]('\x0a')[_0x3886d7(0x4b7)](_0x6484de => _0x6484de[_0x3886d7(0x1b5)]() !== ''), _0x18e08e = []; let _0x48cf1d = 0x0; for (const _0x521b89 of _0x3a9ab2) { const _0x436914 = _0x521b89[_0x3886d7(0x115)]('--'); if (_0x436914['length'] === 0x2 && _0x436914[0x0]['trim']() && _0x436914[0x1]['trim']()[_0x3886d7(0x835)](_0x3886d7(0x59a))) _0x18e08e[_0x3886d7(0x9f2)]({ 'name': _0x436914[0x0][_0x3886d7(0x1b5)](), 'url': _0x436914[0x1][_0x3886d7(0x1b5)]() }); else { if (_0x3886d7(0x5e6) !== _0x3886d7(0x5e6)) try { const _0x11e366 = _0x245351[_0x3886d7(0x16b)](_0x1a1d3a[_0x3886d7(0x7b7)](_0x3886d7(0x2d3)) || '{}'), _0x440a7e = { ..._0x11e366, ..._0x58a7fe }; _0x2233b9[_0x3886d7(0x25f)](_0x3886d7(0x2d3), _0x4bdc56[_0x3886d7(0x41f)](_0x440a7e)); } catch (_0x6b0dcb) { _0x4875e2[_0x3886d7(0xa12)](_0x3886d7(0x697), _0x6b0dcb); } else _0x48cf1d++; } } _0x48cf1d > 0x0 && _0x2d1f89('有\x20' + _0x48cf1d + '\x20行格式不对，被我无视了。'); try { localStorage['setItem'](_0x3886d7(0x1bb), JSON[_0x3886d7(0x41f)](_0x18e08e)), _0x2d1f89(_0x3886d7(0xa06)), setTimeout(() => location[_0x3886d7(0x6a1)](), 0x5dc); } catch (_0x58d1b9) { _0x2d1f89(_0x3886d7(0x359)); } }), _0x2f9821(), document[_0x3d0034(0x2fc)]('upload-card-button-2')['addEventListener'](_0x3d0034(0x6f4), () => { const _0x389bc8 = _0x3d0034; document['getElementById'](_0x389bc8(0xb03))[_0x389bc8(0x6f4)](); }), document[_0x3d0034(0x2fc)](_0x3d0034(0x50a))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), async () => { const _0x41139b = _0x3d0034; await _0xf90f34(_0x41139b(0xa38)), localStorage[_0x41139b(0xb05)](_0x41139b(0x8fc)), _0x2782a6(), _0x2d1f89('卡片\x202\x20已移除。'); }), document[_0x3d0034(0x2fc)](_0x3d0034(0xb03))[_0x3d0034(0xe9)](_0x3d0034(0x782), async _0x21a01a => { const _0xd5f312 = _0x3d0034, _0x4119a0 = _0x21a01a['target'][_0xd5f312(0x10d)][0x0]; if (!_0x4119a0) return; try { if (_0xd5f312(0x47d) === _0xd5f312(0x47d)) await _0x24ce6b('widget_card_2', _0x4119a0), await _0x2782a6(), _0x2d1f89(_0xd5f312(0x51c)); else { _0x4448ef['classList'][_0xd5f312(0x3ea)](_0xd5f312(0x52a)); const _0x529bec = _0xdcfb49[_0xd5f312(0x568)] === 'user' ? _0x1599b9(_0x4a8e8c[_0xd5f312(0x272)]) : _0x14e244(_0x2d2ee0[_0xd5f312(0x1e4)]), _0x15fac1 = _0x1952c5['recipientId'] === _0x27c2f0(_0x489bb6[_0xd5f312(0x272)])['id'] ? _0x322981(_0x4c2732[_0xd5f312(0x272)]) : _0x70a3c2(_0x4ac015[_0xd5f312(0xa47)]), _0x456495 = _0x529bec?.[_0xd5f312(0x4a8)] ? _0x529bec[_0xd5f312(0x4a8)] + _0xd5f312(0x462) : '转账', _0x5226d0 = _0x15fac1?.[_0xd5f312(0x4a8)] ? '转给\x20' + _0x15fac1[_0xd5f312(0x4a8)] : '转账', _0x1bdddd = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20' + _0x456495 + _0xd5f312(0x653) + _0x23e8b4[_0xd5f312(0xb31)]['toFixed'](0x2) + _0xd5f312(0x471) + _0x5226d0 + _0xd5f312(0xa02); _0x10d26e[_0xd5f312(0x109)] = _0x1bdddd; } } catch (_0x122a6b) { _0xd5f312(0x491) === _0xd5f312(0x491) ? _0x2d1f89('错误:\x20' + _0x122a6b['message']) : _0x4ba379 += _0xd5f312(0x884) + _0x416b04[_0xd5f312(0x853)] + _0xd5f312(0xa81) + _0x3aceda[_0xd5f312(0x1b9)][_0xd5f312(0x2c2)]('、') + '。\x0a'; } }), _0x5f1937(), _0x5c31e8(), _0x4f3194(), document[_0x3d0034(0x2fc)](_0x3d0034(0x6df))[_0x3d0034(0xe9)](_0x3d0034(0x6f4), async () => { const _0x444a11 = _0x3d0034, _0x1cf00f = await _0x46bf1c(_0x444a11(0x234)); if (_0x1cf00f) { const _0xd163eb = await _0x46bf1c(_0x444a11(0x485)); if (_0xd163eb) { if (_0x444a11(0x69d) === 'YXXVL') { _0x171a38(!![], _0x444a11(0x7c8)); try { if (_0x444a11(0x63c) === 'vEjfY') { localStorage[_0x444a11(0x58e)](); const _0x19508d = await _0x5e9bb5, _0x19fb9b = _0x19508d[_0x444a11(0x130)](['images', 'music_library', 'snoop_cache'], _0x444a11(0xb24)); await Promise[_0x444a11(0x7b0)]([_0x19fb9b['objectStore']('images')[_0x444a11(0x58e)](), _0x19fb9b[_0x444a11(0x50c)]('music_library')[_0x444a11(0x58e)](), _0x19fb9b[_0x444a11(0x50c)](_0x444a11(0x983))[_0x444a11(0x58e)]()]), await new Promise(_0x395af9 => { const _0x63187a = _0x444a11; 'ZvcuU' !== _0x63187a(0x802) ? _0x19fb9b[_0x63187a(0x208)] = _0x395af9 : _0x401a8d[_0x63187a(0x908)] = _0x63187a(0x2e0) + _0x3b1b6d['length'] + '\x20项'; }), _0x2d1f89(_0x444a11(0x406)), setTimeout(() => { const _0x270843 = _0x444a11; location[_0x270843(0x6a1)](); }, 0x5dc); } else { const _0xf6828e = _0x3a789c[_0x444a11(0x130)](_0x2f42d0, _0x444a11(0x99b)), _0x4959a5 = _0xf6828e[_0x444a11(0x50c)](_0x1552d7), _0x1c881f = _0x4959a5['get'](_0x1ac82c); _0x1c881f[_0x444a11(0x854)] = () => _0x345e3a(_0x1c881f[_0x444a11(0x18a)] ? _0x1c881f[_0x444a11(0x18a)]['data'] : null), _0x1c881f[_0x444a11(0x4ef)] = () => _0x24cd06(_0x1c881f['error']); } } catch (_0x114094) { if (_0x444a11(0x88f) !== _0x444a11(0x88f)) return []; else _0x171a38(![]), _0x2d1f89(_0x444a11(0x704) + _0x114094['message']); } } else { const _0x1dc52f = _0x279332['createObjectURL'](_0x285776); _0x1ce154[_0x444a11(0xab9)][_0x444a11(0x3ec)] = _0x444a11(0xac5) + _0x1dc52f + '\x27)'; } } } }); const _0x33a163 = document[_0x3d0034(0x9d2)]('#settings-screen\x20.content'); if (_0x33a163) { if (_0x3d0034(0x5a6) === 'NFyCG') { const _0x405997 = document[_0x3d0034(0x53d)](_0x3d0034(0x6b3)); _0x405997['id'] = _0x3d0034(0xa01), _0x405997[_0x3d0034(0x908)] = _0x3d0034(0x17a), Object[_0x3d0034(0x61c)](_0x405997[_0x3d0034(0xab9)], { 'position': 'absolute', 'top': _0x3d0034(0x1a4), 'right': _0x3d0034(0x3dc), 'fontSize': '0.7rem', 'lineHeight': '1.4', 'color': 'var(--text-color-light)', 'opacity': _0x3d0034(0x31c), 'cursor': 'pointer', 'zIndex': '1', 'transition': _0x3d0034(0x980), 'whiteSpace': _0x3d0034(0x160), 'textAlign': _0x3d0034(0x1dc) }), _0x405997[_0x3d0034(0x975)] = () => { const _0x1731c3 = _0x3d0034; _0x405997[_0x1731c3(0xab9)][_0x1731c3(0x5f8)] = '1'; }, _0x405997[_0x3d0034(0x182)] = () => { const _0x1f4b93 = _0x3d0034; _0x405997[_0x1f4b93(0xab9)]['opacity'] = _0x1f4b93(0x31c); }, _0x405997['addEventListener']('click', () => { const _0x5ca8b7 = _0x3d0034; window[_0x5ca8b7(0xa03)](_0x5ca8b7(0x8f4), '_blank'); }), _0x33a163[_0x3d0034(0xab9)][_0x3d0034(0x7b2)] = 'relative', _0x33a163['prepend'](_0x405997); } else return _0x4463be[_0x3d0034(0x32d)][_0x3d0034(0x354)](_0x53c080 => _0x53c080['id'] === _0x3e2068); } } const _0x3cb239 = _0x4a89cb(0x761); async function _0x27a7ee(_0x1d926e) { const _0x176ba2 = _0x4a89cb; if (_0x176ba2(0x679) !== 'ddsis') _0x5b5155 = '0x' + _0x73be2[0x1] + _0x54656b[0x2], _0x59d638 = '0x' + _0x1d992d[0x3] + _0x291d53[0x4], _0x386b7a = '0x' + _0x7025f3[0x5] + _0xcf56e5[0x6]; else { const _0xb47074 = await _0x5e9bb5; return new Promise((_0x32722c, _0x51ed03) => { const _0x1dbb39 = _0x176ba2, _0x452bbf = _0xb47074[_0x1dbb39(0x130)](_0x3cb239, _0x1dbb39(0x99b)), _0x2f6003 = _0x452bbf[_0x1dbb39(0x50c)](_0x3cb239), _0x4f5585 = _0x2f6003[_0x1dbb39(0x3fa)](_0x1d926e); _0x4f5585[_0x1dbb39(0x854)] = () => _0x32722c(_0x4f5585['result']), _0x4f5585[_0x1dbb39(0x4ef)] = () => _0x51ed03(_0x4f5585[_0x1dbb39(0xa12)]); }); } } async function _0x1cde33() { const _0x4533cb = await _0x5e9bb5; return new Promise((_0x5e79aa, _0x3213d6) => { const _0x4024e9 = _0x1826, _0x427125 = _0x4533cb[_0x4024e9(0x130)](_0x3cb239, 'readonly'), _0x5861bf = _0x427125['objectStore'](_0x3cb239), _0x1fb037 = _0x5861bf[_0x4024e9(0x12c)](); _0x1fb037[_0x4024e9(0x854)] = () => _0x5e79aa(_0x1fb037[_0x4024e9(0x18a)]), _0x1fb037[_0x4024e9(0x4ef)] = () => _0x3213d6(_0x1fb037['error']); }); } async function _0x52c7c9(_0x1c63a5) { const _0x3546a3 = _0x4a89cb; if (_0x3546a3(0x266) !== _0x3546a3(0x5cf)) { const _0x330a58 = await _0x5e9bb5; return new Promise((_0x4ae37e, _0x219242) => { const _0x4e733b = _0x3546a3, _0x33ef15 = _0x330a58['transaction'](_0x3cb239, 'readwrite'), _0x59efb4 = _0x33ef15[_0x4e733b(0x50c)](_0x3cb239), _0x46421f = _0x59efb4['put'](_0x1c63a5); _0x46421f[_0x4e733b(0x854)] = () => _0x4ae37e(_0x46421f[_0x4e733b(0x18a)]), _0x46421f[_0x4e733b(0x4ef)] = () => _0x219242(_0x46421f[_0x4e733b(0xa12)]); }); } else _0xd2190a[_0x3546a3(0x12e)] && (_0xc3c535['linkedWorldBookIds'] = _0x3bdd3d[_0x3546a3(0x12e)][_0x3546a3(0x4b7)](_0x5589dc => _0x5589dc !== _0x5a63a1)); } async function _0x58e86f(_0x1f0b9e) { const _0x12730a = _0x4a89cb; if (_0x12730a(0x39a) === _0x12730a(0x16a)) _0x35c1e4[_0x12730a(0x6f4)](); else { const _0x21ecdb = await _0x5e9bb5; return new Promise((_0x591cb, _0x2e24a7) => { const _0x590c19 = _0x12730a, _0x5d9632 = _0x21ecdb[_0x590c19(0x130)](_0x3cb239, _0x590c19(0xb24)), _0x33a2dd = _0x5d9632[_0x590c19(0x50c)](_0x3cb239), _0x201c1a = _0x33a2dd['delete'](_0x1f0b9e); _0x201c1a[_0x590c19(0x854)] = () => _0x591cb(), _0x201c1a['onerror'] = () => _0x2e24a7(_0x201c1a[_0x590c19(0xa12)]); }); } } let _0x2021ba = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x34fddf = { 'audio': document[_0x4a89cb(0x2fc)]('altar-slot-audio'), 'cover': document['getElementById'](_0x4a89cb(0x9cc)), 'info': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x6db)), 'lyrics': document[_0x4a89cb(0x2fc)]('altar-slot-lyrics') }, _0x53af58 = { 'audio': document[_0x4a89cb(0x2fc)](_0x4a89cb(0xb1a)), 'cover': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x683)), 'info': document[_0x4a89cb(0x2fc)]('info-file-input'), 'lyrics': document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1fd)) }; for (const _0x2c9917 in _0x34fddf) { _0x34fddf[_0x2c9917][_0x4a89cb(0xe9)]('click', () => _0x53af58[_0x2c9917][_0x4a89cb(0x6f4)]()), _0x53af58[_0x2c9917][_0x4a89cb(0xe9)](_0x4a89cb(0x782), _0x2a8881 => { const _0x5d6432 = _0x4a89cb; _0xdf691d(_0x2c9917, _0x2a8881[_0x5d6432(0x37e)][_0x5d6432(0x10d)][0x0]); }); } function _0xdf691d(_0x26884c, _0x1e90fb) { const _0x31a70b = _0x4a89cb; if ('QjbPS' === _0x31a70b(0x196)) { _0x463403[_0x31a70b(0x109)] = _0x31a70b(0x1fa); return; } else { if (!_0x1e90fb) return; _0x2021ba[_0x26884c] = _0x1e90fb, _0x34fddf[_0x26884c][_0x31a70b(0x9d2)](_0x31a70b(0x8bc))[_0x31a70b(0x908)] = _0x1e90fb[_0x31a70b(0x4a8)], _0x34fddf[_0x26884c][_0x31a70b(0x402)][_0x31a70b(0x3ea)]('filled'), _0x52b4b4(); } } function _0x52b4b4() { const _0x5b5614 = _0x4a89cb; if (_0x5b5614(0x728) !== _0x5b5614(0x728)) _0x21c07d['style']['display'] = 'flex', _0x62c1f6(() => _0x16c052[_0x5b5614(0x402)][_0x5b5614(0x3ea)](_0x5b5614(0x393)), 0xa); else { const _0x5bac7e = document['getElementById'](_0x5b5614(0xa93)); _0x2021ba['audio'] && _0x2021ba[_0x5b5614(0x747)] ? _0x5b5614(0xa60) !== 'onZqB' ? _0x5bac7e[_0x5b5614(0x525)] = ![] : _0x27f30f[_0x5b5614(0x584)] = _0x36a78d[_0x5b5614(0x12e)]['map'](_0x25ffa6 => _0x21a1c6['worldBooks'][_0x5b5614(0x354)](_0x299c3f => _0x299c3f['id'] === _0x25ffa6))[_0x5b5614(0x4b7)](_0x4dad15)['map'](_0x24c8fe => ({ 'name': _0x24c8fe[_0x5b5614(0x4a8)], 'content': _0x24c8fe[_0x5b5614(0xaf8)] })) : _0x5b5614(0x3be) === 'QbXjM' ? _0x5bac7e[_0x5b5614(0x525)] = !![] : (_0x10cd49(), _0x3e2835(_0x5b5614(0x5fd), _0x5b5614(0xa20))); } } function _0x336d01() { const _0x12e9a3 = _0x4a89cb; _0x2021ba = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x20a2a3 in _0x34fddf) { _0x34fddf[_0x20a2a3][_0x12e9a3(0x402)][_0x12e9a3(0x3c2)](_0x12e9a3(0xa92)), _0x53af58[_0x20a2a3]['value'] = ''; } _0x34fddf[_0x12e9a3(0x413)][_0x12e9a3(0x9d2)](_0x12e9a3(0x8bc))[_0x12e9a3(0x908)] = _0x12e9a3(0xf7), _0x34fddf[_0x12e9a3(0x145)][_0x12e9a3(0x9d2)](_0x12e9a3(0x8bc))[_0x12e9a3(0x908)] = '点击选择\x20.jpg\x20或\x20.png', _0x34fddf[_0x12e9a3(0x747)][_0x12e9a3(0x9d2)](_0x12e9a3(0x8bc))[_0x12e9a3(0x908)] = '点击选择\x20info.txt', _0x34fddf['lyrics']['querySelector']('.slot-filename')[_0x12e9a3(0x908)] = _0x12e9a3(0x72a), _0x52b4b4(); } document[_0x4a89cb(0x2fc)](_0x4a89cb(0xa93))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), async () => { const _0x461518 = _0x4a89cb; if ('pIUFf' !== _0x461518(0x606)) _0x557045[_0x461518(0x30a)](_0x206b23), _0x4ff3f1[_0x461518(0x30a)](_0x203d34); else { if (!_0x2021ba[_0x461518(0x413)] || !_0x2021ba['info']) { _0x2d1f89(_0x461518(0x6fe)); return; } await _0x30430d(); } }), document[_0x4a89cb(0x2fc)]('upload-music-button')[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x3e413b = _0x4a89cb; if ('CLjZR' === 'rwUNn') return { 'role': _0x3e413b(0x1a8), 'content': [{ 'type': _0x3e413b(0x331), 'text': _0x4b70d2[_0x3e413b(0xaf8)] || '\x20' }, { 'type': _0x3e413b(0x273), 'image_url': { 'url': _0x249ea7['image'], 'detail': _0x3e413b(0x558) } }] }; else _0x336d01(), _0x43c005(_0x3e413b(0x600), _0x3e413b(0xa48)); }), document['getElementById'](_0x4a89cb(0x39f))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x518bcb = _0x4a89cb; _0x43c005(_0x518bcb(0xa48), _0x518bcb(0x600)); }); async function _0x30430d() { const _0x1ba5f9 = _0x4a89cb; _0x171a38(!![], _0x1ba5f9(0x2ed)); try { if (_0x1ba5f9(0x9c5) !== _0x1ba5f9(0x3f5)) { const _0x2b1d98 = await _0x2021ba[_0x1ba5f9(0x747)][_0x1ba5f9(0x331)](); let _0x5d4e77; if (_0x2b1d98[_0x1ba5f9(0x1b5)]()[_0x1ba5f9(0x835)]('{')) _0x5d4e77 = JSON[_0x1ba5f9(0x16b)](_0x2b1d98); else { if ('iMujC' !== 'iMujC') _0x25e837[_0x1ba5f9(0x9fb)] = _0x385c03['image']; else { _0x5d4e77 = {}; const _0x322b0b = _0x2b1d98['split']('\x0a'); _0x322b0b[_0x1ba5f9(0xb13)](_0x521a23 => { const _0x1eedf5 = _0x1ba5f9; if (_0x1eedf5(0x144) === _0x1eedf5(0x36c)) _0xc48e7d(![]); else { const _0x7b957 = _0x521a23[_0x1eedf5(0x115)](/:\s|：\s/); if (_0x7b957[_0x1eedf5(0x8ab)] === 0x2) { if ('fbvXK' === 'gQQGK') { _0x527d49[_0x1eedf5(0xa12)](_0x1eedf5(0x85e), _0x112b40); const _0x5797a1 = { 'role': _0x1eedf5(0x31e), 'content': '错误:\x20' + _0x10b2f0['message'], 'senderId': _0x287f4c['id'], 'isOffline': _0x1ea4a2 }; _0x1833e6['conversationHistory'][_0x1eedf5(0x9f2)](_0x5797a1), _0x4cff64(); } else { const _0x5835db = _0x7b957[0x0][_0x1eedf5(0x1b5)](), _0x53b27b = _0x7b957[0x1][_0x1eedf5(0x1b5)](), _0x2d5a49 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x2d5a49[_0x5835db] && (_0x5d4e77[_0x2d5a49[_0x5835db]] = _0x53b27b); } } } }); if (!_0x5d4e77[_0x1ba5f9(0x69b)]) { if (_0x1ba5f9(0x778) !== _0x1ba5f9(0x778)) { const _0x2c963c = _0x53adbd[_0x1ba5f9(0x130)](_0x595acb, _0x1ba5f9(0xb24)), _0x4b9f53 = _0x2c963c[_0x1ba5f9(0x50c)](_0x3a14e2), _0x48a577 = _0x4b9f53['put']({ 'id': _0x197319, 'blob': _0x94b6f2 }); _0x48a577[_0x1ba5f9(0x854)] = () => _0x230156(_0x48a577[_0x1ba5f9(0x18a)]), _0x48a577['onerror'] = () => _0x1784d6(_0x48a577[_0x1ba5f9(0xa12)]); } else throw new Error(_0x1ba5f9(0xa3b)); } _0x5d4e77[_0x1ba5f9(0x1bd)] = _0x1ba5f9(0x285) + Date['now']() + '\x20'; } } const _0x3a6e0d = _0x1ba5f9(0x285) + (_0x5d4e77[_0x1ba5f9(0x1bd)] || Date[_0x1ba5f9(0x300)]()) + '\x20', _0x24c886 = { 'id': _0x3a6e0d, 'info': _0x5d4e77, 'audio': _0x2021ba[_0x1ba5f9(0x413)], 'cover': _0x2021ba[_0x1ba5f9(0x145)], 'lyrics': _0x2021ba[_0x1ba5f9(0x8b5)] ? await _0x2021ba[_0x1ba5f9(0x8b5)][_0x1ba5f9(0x331)]() : '' }; await _0x52c7c9(_0x24c886), await _0x1d729f(), _0x171a38(![]), _0x2d1f89(_0x1ba5f9(0x116) + _0x5d4e77[_0x1ba5f9(0x69b)] + _0x1ba5f9(0x27a)), _0x43c005(_0x1ba5f9(0xa48), _0x1ba5f9(0x600)); } else _0x17e513(_0x1ba5f9(0x7ab)); } catch (_0x465895) { _0x171a38(![]), console[_0x1ba5f9(0xa12)](_0x1ba5f9(0x7dd), _0x465895), _0x2d1f89(_0x1ba5f9(0x502) + _0x465895[_0x1ba5f9(0x420)] + '\x20'); } } async function _0x1d729f() { const _0x4fc265 = _0x4a89cb, _0x3a5250 = document[_0x4fc265(0x2fc)](_0x4fc265(0x398)); _0x3a5250[_0x4fc265(0x109)] = ''; const _0x770e45 = await _0x1cde33(); if (_0x770e45[_0x4fc265(0x8ab)] === 0x0) { _0x3a5250['innerHTML'] = _0x4fc265(0x84d); return; } _0x770e45[_0x4fc265(0xa17)]((_0x4ecc97, _0x2728b3) => (_0x4ecc97['info']['歌曲名称'] || '')[_0x4fc265(0x237)](_0x2728b3[_0x4fc265(0x747)][_0x4fc265(0x69b)] || '')); for (const _0x166559 of _0x770e45) { const _0x5769d4 = document['createElement'](_0x4fc265(0x6b3)); _0x5769d4[_0x4fc265(0x175)] = _0x4fc265(0x896), _0x5769d4['dataset']['songId'] = _0x166559['id']; const _0xda32f7 = _0x166559[_0x4fc265(0x145)] ? URL['createObjectURL'](_0x166559[_0x4fc265(0x145)]) : _0x30019f; _0x5769d4[_0x4fc265(0x109)] = _0x4fc265(0x655) + _0xda32f7 + _0x4fc265(0x3e4) + (_0x166559['info'][_0x4fc265(0x69b)] || '未知歌曲') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x166559[_0x4fc265(0x747)]['歌手'] || _0x4fc265(0x565)) + _0x4fc265(0x774); let _0x3d8464 = null; const _0x4337e1 = _0x2c8f42 => { const _0x3f322b = _0x4fc265; if (_0x3f322b(0x349) !== _0x3f322b(0x349)) { const _0xa29e25 = _0x578f86[_0x3f322b(0xb28)](_0x3f322b(0x75c)), _0x39cb54 = _0x51f1ff[_0x3f322b(0x977)]['songId'], _0x58403c = _0x37e8e5(_0xa29e25[_0x3f322b(0x977)][_0x3f322b(0x5b1)], 0xa); _0x5a6dfa(_0x39cb54, _0x58403c, _0x35e877); } else { if (_0x2c8f42['button'] === 0x2) return; _0x3d8464 = setTimeout(async () => { const _0xa28e2c = _0x3f322b; if (_0xa28e2c(0x53a) === _0xa28e2c(0x53a)) { if (_0x2c8f42['type'] === 'touchstart') _0x2c8f42[_0xa28e2c(0x6bc)](); const _0x44ff05 = await _0x46bf1c(_0xa28e2c(0x77b) + _0x166559[_0xa28e2c(0x747)][_0xa28e2c(0x69b)] + _0xa28e2c(0x1c2)); _0x44ff05 && (await _0x58e86f(_0x166559['id']), await _0x1d729f(), _0x2d1f89(_0xa28e2c(0x291))); } else throw _0x3a20d8; }, 0x320); } }, _0x52da84 = () => { clearTimeout(_0x3d8464); }; _0x5769d4['addEventListener'](_0x4fc265(0x281), _0x4337e1), _0x5769d4['addEventListener'](_0x4fc265(0x76b), _0x52da84), _0x5769d4['addEventListener']('mouseleave', _0x52da84), _0x5769d4[_0x4fc265(0xe9)](_0x4fc265(0x5d1), _0x4337e1, { 'passive': ![] }), _0x5769d4['addEventListener'](_0x4fc265(0x4a3), _0x52da84), _0x5769d4[_0x4fc265(0xe9)](_0x4fc265(0x3ab), _0x52da84), _0x5769d4[_0x4fc265(0xe9)](_0x4fc265(0x6f4), _0x38983a => { if (_0x3d8464) clearTimeout(_0x3d8464); if (_0x38983a['defaultPrevented']) return; setTimeout(() => { const _0x585e98 = _0x1826; _0x3d8464 && _0x42ede9(_0x166559['id'], _0x770e45[_0x585e98(0x592)](_0x104662 => _0x104662['id'])); }, 0x32); }), _0x3a5250[_0x4fc265(0x30a)](_0x5769d4); } } _0x285f08[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0xfcf32d = _0x4a89cb; if (_0xfcf32d(0xb2d) === 'hOEUE') { const _0x1f29ba = _0x4e8bbe[_0xfcf32d(0x2fc)]('toast'); _0x1f29ba[_0xfcf32d(0x908)] = _0x4ce3c5, _0x1f29ba[_0xfcf32d(0xab9)][_0xfcf32d(0x243)] = _0xfcf32d(0xa25); if (_0x583d2e['_t']) _0xa617e2(_0x2144fc['_t']); _0x3968fe['_t'] = _0x3a2bff(() => { const _0xee465c = _0xfcf32d; _0x1f29ba[_0xee465c(0xab9)][_0xee465c(0x243)] = _0xee465c(0x1ea); }, 0x640); } else _0x2d1f89(_0xfcf32d(0x438)); }), _0x441afe[_0x4a89cb(0xe9)]('click', () => { const _0x57d585 = _0x4a89cb; if ('nckFM' !== _0x57d585(0x57d)) { _0x107854('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } else _0x2d1f89(_0x57d585(0x554)); }); let _0x1c8a26 = [], _0x1d61a3 = -0x1; async function _0x42ede9(_0x3bd3e8, _0x44f108) { const _0x1eb4d7 = _0x4a89cb; if (_0x1eb4d7(0x295) !== _0x1eb4d7(0x295)) _0x5891df(); else { const _0x380dee = await _0x27a7ee(_0x3bd3e8); if (!_0x380dee) return; _0x4ac7a8 = { 'title': _0x380dee['info'][_0x1eb4d7(0x69b)] || _0x1eb4d7(0x1a9), 'artist': _0x380dee[_0x1eb4d7(0x747)]['歌手'] || _0x1eb4d7(0x565), 'cover': _0x380dee[_0x1eb4d7(0x145)] ? URL['createObjectURL'](_0x380dee[_0x1eb4d7(0x145)]) : _0x30019f, 'isFromLibrary': !![] }; const _0xf08e01 = URL[_0x1eb4d7(0x3a1)](_0x380dee[_0x1eb4d7(0x413)]); _0x483c46[_0x1eb4d7(0x9fb)] = _0xf08e01, _0x483c46[_0x1eb4d7(0x432)](), _0x38dbb6(); } } async function _0x38dbb6() { const _0x33dad6 = _0x4a89cb, _0x55f5ea = document[_0x33dad6(0x2fc)](_0x33dad6(0x887)), _0x55d352 = document[_0x33dad6(0x2fc)](_0x33dad6(0x634)), _0x599ec2 = document['getElementById'](_0x33dad6(0x96c)), _0x534880 = document[_0x33dad6(0x2fc)](_0x33dad6(0x66d)), _0x14ecda = _0x4ac7a8; _0x14ecda && _0x14ecda[_0x33dad6(0x199)] ? (_0x55d352[_0x33dad6(0x908)] = _0x14ecda[_0x33dad6(0x50b)], _0x599ec2['textContent'] = _0x14ecda[_0x33dad6(0x20b)], _0x55f5ea[_0x33dad6(0x402)][_0x33dad6(0x3ea)]('is-playing'), _0x55f5ea[_0x33dad6(0xab9)][_0x33dad6(0x7e1)](_0x33dad6(0x9b3), _0x33dad6(0x713) + _0x14ecda[_0x33dad6(0x145)] + ')')) : (_0x55d352[_0x33dad6(0x908)] = _0x33dad6(0x53c), _0x599ec2['textContent'] = '请在动态或聊天中播放', _0x55f5ea[_0x33dad6(0x402)][_0x33dad6(0x3c2)](_0x33dad6(0xafd)), _0x534880[_0x33dad6(0xab9)][_0x33dad6(0x7e1)](_0x33dad6(0x9b3), _0x33dad6(0x1ea))); } _0x285f08 && _0x285f08[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x518270 = _0x4a89cb; if (_0x518270(0x3a6) !== _0x518270(0x3a6)) { const _0x388387 = _0x465732[_0x518270(0x497)] === 'important' ? _0x518270(0x566) : '待办'; return _0x518270(0x8c2) + _0x388387 + ']\x20' + _0x4df5bd[_0x518270(0x377)] + ':\x20' + _0x1fd6eb[_0x518270(0xaf8)]; } else { if (_0x1c8a26[_0x518270(0x8ab)] === 0x0) return; _0x1d61a3 = (_0x1d61a3 + 0x1) % _0x1c8a26[_0x518270(0x8ab)], _0x42ede9(_0x1c8a26[_0x1d61a3], _0x1c8a26); } }); _0x441afe && _0x441afe['addEventListener'](_0x4a89cb(0x6f4), () => { const _0x1beead = _0x4a89cb; if (_0x1c8a26[_0x1beead(0x8ab)] === 0x0) return; _0x1d61a3 = (_0x1d61a3 - 0x1 + _0x1c8a26[_0x1beead(0x8ab)]) % _0x1c8a26[_0x1beead(0x8ab)], _0x42ede9(_0x1c8a26[_0x1d61a3], _0x1c8a26); }); _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x432), () => { if (_0x112a52) _0x112a52['textContent'] = '❚❚'; }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x998), () => { const _0x1c7b8f = _0x4a89cb; if (_0x112a52) _0x112a52[_0x1c7b8f(0x908)] = '▶'; }), _0x483c46[_0x4a89cb(0xe9)](_0x4a89cb(0x692), () => { const _0x2ec757 = _0x4a89cb; if (_0x2ec757(0x533) !== _0x2ec757(0x533)) _0x2a5b32[_0x2ec757(0x2fc)]('user-post-image-input')[_0x2ec757(0x6f4)](); else { if (_0x285f08) _0x285f08[_0x2ec757(0x6f4)](); } }); function _0x3bccb0() { const _0x51a1b2 = _0x4a89cb, _0xded63a = _0x4cc3e0(); if (!_0xded63a) return; _0x5e58a1[_0x51a1b2(0x109)] = '', _0x1ee8ee['value'] = ''; if (_0xded63a[_0x51a1b2(0x497)] === _0x51a1b2(0x869)) { if (_0x51a1b2(0x824) === _0x51a1b2(0x824)) _0xded63a[_0x51a1b2(0xad8)]['forEach'](_0x5abd8a => { const _0x6fc0bc = _0x51a1b2; if (_0x6fc0bc(0x24a) !== _0x6fc0bc(0x24a)) _0x4f1c09(_0x3802ec - 0x1); else { const _0x5d3f73 = _0xe97381(_0x5abd8a); if (_0x5d3f73) { const _0x12e135 = document[_0x6fc0bc(0x53d)]('option'); _0x12e135['value'] = _0x5d3f73['id'], _0x12e135['textContent'] = _0x5d3f73[_0x6fc0bc(0x4a8)], _0x5e58a1[_0x6fc0bc(0x30a)](_0x12e135); } } }), _0x2ec08f[_0x51a1b2(0xab9)]['display'] = _0x51a1b2(0xa25); else throw new _0x4df066(_0x51a1b2(0xa3b)); } else _0x51a1b2(0x46c) !== _0x51a1b2(0x720) ? _0x2ec08f[_0x51a1b2(0xab9)]['display'] = 'none' : _0x5e4b1f && (_0x4a832e[_0x51a1b2(0x9fb)] = _0x248f9a['createObjectURL'](_0x52a992)); _0x2a3093[_0x51a1b2(0x402)][_0x51a1b2(0x3ea)](_0x51a1b2(0x393)), _0x1ee8ee[_0x51a1b2(0x83c)](); } function _0x12350d() { const _0x5e866f = _0x4a89cb, _0x469251 = parseFloat(_0x1ee8ee['value']); if (isNaN(_0x469251) || _0x469251 <= 0x0) { _0x2d1f89('请输入有效的转账金额！'); return; } const _0x372321 = _0x4cc3e0(); let _0x2652f6 = null; if (_0x372321[_0x5e866f(0x497)] === _0x5e866f(0x869)) { if ('rTfja' !== 'rTfja') { if (_0x494f77) _0x53dba8[_0x5e866f(0x6f4)](); } else _0x2652f6 = _0x5e58a1[_0x5e866f(0x91b)]; } else _0x5e866f(0x75e) === _0x5e866f(0x3a8) ? _0x14c771[_0x5e866f(0xe9)](_0x5e866f(0x6f4), () => { const _0x22d175 = _0x5e866f, _0x5474f6 = _0x55d26a(_0x445fb6['dataset'][_0x22d175(0x23e)], 0xa); _0x1b04e7(_0x5474f6); }) : _0x2652f6 = _0x372321['participantIds'][0x0]; const _0x4ac4cb = _0x3beafd(_0x372321['id']), _0x3697bd = { 'role': _0x5e866f(0x1a8), 'type': _0x5e866f(0x52a), 'content': '[用户向\x20' + (_0xe97381(_0x2652f6)?.[_0x5e866f(0x4a8)] || '未知') + _0x5e866f(0x3b0) + _0x469251 + ']', 'amount': _0x469251, 'recipientId': _0x2652f6, 'senderId': _0x4ac4cb['id'], 'timestamp': Date[_0x5e866f(0x300)]() }; _0x21e37d['conversationHistory'][_0x5e866f(0x9f2)](_0x3697bd), _0x1a9239(), _0x5a0ef9(), _0x2a3093[_0x5e866f(0x402)][_0x5e866f(0x3c2)](_0x5e866f(0x393)); } async function _0x236aac(_0x183c85) { const _0x46b77a = _0x4a89cb, _0x5380e2 = _0xe97381(_0x183c85); if (!_0x5380e2) return; const _0x26bd44 = await _0x46bf1c(_0x46b77a(0x57b) + _0x5380e2[_0x46b77a(0x4a8)] + '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。'); if (!_0x26bd44) return; const _0x629270 = _0x21e37d[_0x46b77a(0x366)][_0x46b77a(0x34e)](_0x55267a => _0x55267a[_0x46b77a(0x387)] === _0x183c85); _0x629270 > -0x1 ? (_0x21e37d[_0x46b77a(0x366)][_0x46b77a(0x7d1)](_0x629270, 0x1), _0x37e4ef(), _0x1be739(), _0x2d1f89('【' + _0x5380e2[_0x46b77a(0x4a8)] + _0x46b77a(0x82d))) : _0x46b77a(0x7a6) === _0x46b77a(0x46b) ? (_0x11936f[_0x46b77a(0x402)][_0x46b77a(0x7fb)]('show'), _0x3905e3[_0x46b77a(0x402)]['contains']('show') && (_0x13cf74[_0x46b77a(0x9ce)] = _0x31d1ad['scrollHeight'])) : _0x2d1f89(_0x46b77a(0x5d5)); } function _0x4a8ae6() { const _0x4c0a60 = _0x4a89cb, _0x34d72d = document[_0x4c0a60(0x2fc)](_0x4c0a60(0x45e)); _0x34d72d[_0x4c0a60(0x109)] = ''; const _0x4a0333 = _0x21e37d['characters'][_0x4c0a60(0x4b7)](_0x433634 => _0x21e37d[_0x4c0a60(0x69a)][_0x4c0a60(0x732)](_0x26e87c => _0x26e87c['type'] === _0x4c0a60(0x9de) && _0x26e87c[_0x4c0a60(0xad8)][_0x4c0a60(0x6f7)](_0x433634['id']))); if (_0x4a0333[_0x4c0a60(0x8ab)] === 0x0) { _0x34d72d['innerHTML'] = _0x4c0a60(0x1e8); return; } _0x4a0333['forEach'](_0x43d431 => { const _0x401f0f = _0x4c0a60, _0x24f479 = document[_0x401f0f(0x53d)]('li'); _0x24f479[_0x401f0f(0x175)] = _0x401f0f(0x3dd), _0x24f479[_0x401f0f(0x977)][_0x401f0f(0x493)] = _0x43d431['id'], _0x24f479['innerHTML'] = _0x401f0f(0x84c) + (_0x43d431[_0x401f0f(0x496)] || _0x30019f) + _0x401f0f(0x7d6) + _0x43d431['name'] + _0x401f0f(0x6d1) + _0x43d431[_0x401f0f(0x4a8)] + '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x24f479[_0x401f0f(0x9d2)](_0x401f0f(0x2b9))['addEventListener'](_0x401f0f(0x6f4), () => _0x2df9aa(_0x43d431['id'])), _0x24f479['querySelector'](_0x401f0f(0xb0b))[_0x401f0f(0xe9)](_0x401f0f(0x6f4), async _0x6f2a3f => { const _0x469ad2 = _0x401f0f; _0x6f2a3f[_0x469ad2(0x7a7)](); const _0x4d49ca = _0xe97381(_0x43d431['id']); if (!_0x4d49ca) return; const _0x337244 = await _0x46bf1c('确定要彻底清空【' + _0x4d49ca['name'] + '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。'); if (_0x337244) { _0x171a38(!![], '正在焚烧【' + _0x4d49ca[_0x469ad2(0x4a8)] + '】的旧数据...'); const _0x588552 = [_0x469ad2(0xb1d), 'whispers', _0x469ad2(0xb0f), _0x469ad2(0x320), _0x469ad2(0x57f), _0x469ad2(0x583), 'footprints', 'summary']; for (const _0x326351 of _0x588552) { if (_0x469ad2(0x7a2) !== _0x469ad2(0x4be)) { const _0x2f2278 = _0x469ad2(0x888) + _0x4d49ca['id'] + '_' + _0x326351; await _0x526300(_0x2f2278); } else _0x38409e['activeFriendCircleId'] && _0x26f0a1(_0x1fbe1b[_0x469ad2(0x26c)]); } _0x171a38(![]), _0x2d1f89('【' + _0x4d49ca[_0x469ad2(0x4a8)] + _0x469ad2(0x363)); } }), _0x34d72d[_0x401f0f(0x30a)](_0x24f479); }); } let _0x40dee3 = null, _0x11a72f = null; function _0x330e76() { const _0x40293a = _0x4a89cb; if (_0x40293a(0x807) === _0x40293a(0x562)) { const _0x4ffb77 = _0x3c9a06['entries'][_0x40293a(0x4b7)](_0x3f341f => _0x3f341f[_0x40293a(0x85a)] === _0x40293a(0x1a8))[_0x40293a(0xaa2)](); _0x4ffb77 && (_0x1645f2 = _0x4ffb77[_0x40293a(0xaf8)]); } else { const _0x14f76e = new Date(), _0x5e5ad2 = document[_0x40293a(0x2fc)](_0x40293a(0x8db)), _0x22a5fe = document[_0x40293a(0x2fc)]('snoop-home-date'), _0x47f466 = document[_0x40293a(0x2fc)](_0x40293a(0x814)); _0x5e5ad2 && _0x22a5fe && ('lFJGm' === _0x40293a(0xadd) ? (_0x5e5ad2[_0x40293a(0x908)] = _0x14f76e[_0x40293a(0x909)](_0x40293a(0x223), { 'hour': _0x40293a(0x8b1), 'minute': '2-digit', 'hour12': ![] }), _0x22a5fe[_0x40293a(0x908)] = _0x14f76e[_0x40293a(0xa7b)]('zh-CN', { 'month': _0x40293a(0x8b2), 'day': 'numeric', 'weekday': 'long' })) : (_0x3d1458[_0x40293a(0x73d)] = _0x57eda9['likes'] || [], _0x22ec85[_0x40293a(0x2a8)] = (_0x463885[_0x40293a(0x2a8)] || [])[_0x40293a(0x592)]((_0x2dd5f, _0x5dc99a) => ({ ..._0x2dd5f, 'commentId': 'c_' + _0x57028a[_0x40293a(0x6cc)] + '_' + _0x5dc99a })), _0x347f80(), _0x9acf6a())), _0x47f466 && (_0x40293a(0x1ce) !== _0x40293a(0x1ce) ? _0x354219[_0x40293a(0xab9)][_0x40293a(0x113)] = '' : _0x47f466[_0x40293a(0x109)] = _0x40293a(0x8f9) + _0x14f76e[_0x40293a(0x909)]('zh-CN', { 'hour': _0x40293a(0x8b1), 'minute': '2-digit', 'hour12': ![] }) + _0x40293a(0xa46)); } } function _0x2df9aa(_0x41c37f) { const _0x1de5d8 = _0x4a89cb; if (_0x1de5d8(0x729) !== _0x1de5d8(0x729)) _0x20c6a5[_0x1de5d8(0xb13)](_0x11541 => { const _0x4803aa = _0x1de5d8, _0x582d6b = _0x4d1c0d[_0x4803aa(0x53d)](_0x4803aa(0x6b3)); _0x582d6b[_0x4803aa(0x175)] = _0x4803aa(0x37f), _0x582d6b[_0x4803aa(0x908)] = _0x11541[_0x4803aa(0xaf8)], _0x45834b[_0x4803aa(0x30a)](_0x582d6b); }); else { _0x40dee3 = _0x41c37f; const _0x5272ae = _0xe97381(_0x41c37f); if (!_0x5272ae) return; const _0x21c710 = document[_0x1de5d8(0x2fc)](_0x1de5d8(0x9a1)), _0x489a16 = document[_0x1de5d8(0x2fc)](_0x1de5d8(0x629)); if (_0x489a16) _0x489a16[_0x1de5d8(0x3c2)](); const _0x2af29a = document[_0x1de5d8(0x2fc)](_0x1de5d8(0x5a0)); if (_0x2af29a) _0x2af29a[_0x1de5d8(0x3c2)](); _0x21c710[_0x1de5d8(0x38f)]('beforeend', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'), _0x21c710[_0x1de5d8(0x38f)](_0x1de5d8(0x30b), '<div\x20id=\x22snoop-dock\x22></div>'), document[_0x1de5d8(0x2fc)](_0x1de5d8(0xae9))[_0x1de5d8(0x908)] = '', _0x49eddb(); if (_0x11a72f) clearInterval(_0x11a72f); _0x330e76(), _0x11a72f = setInterval(_0x330e76, 0x2710), _0x43c005(_0x1de5d8(0x918), 'snoopList'); } } function _0x49eddb() { const _0x2c3771 = _0x4a89cb, _0x8df43 = document['getElementById']('snoop-app-container'), _0x1b4415 = document[_0x2c3771(0x2fc)](_0x2c3771(0x5a0)); _0x8df43[_0x2c3771(0x109)] = _0x2c3771(0x953), _0x1b4415['innerHTML'] = ''; const _0x34e136 = _0x8df43[_0x2c3771(0x9d2)]('.snoop-main-grid'), _0x5ab6cf = [{ 'id': _0x2c3771(0x843), 'name': '聊天', 'svg': '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'area': 'dock' }, { 'id': 'abyss', 'name': '浏览器', 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': _0x2c3771(0x690) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x2c3771(0x48a), 'area': _0x2c3771(0x690) }, { 'id': _0x2c3771(0xf3), 'name': '总结', 'svg': _0x2c3771(0x820), 'area': _0x2c3771(0x690) }, { 'id': 'fragments', 'name': '备忘录', 'svg': _0x2c3771(0x3ff), 'area': _0x2c3771(0x11e) }, { 'id': _0x2c3771(0x57f), 'name': '外卖', 'svg': _0x2c3771(0x97e), 'area': _0x2c3771(0x11e) }, { 'id': _0x2c3771(0x583), 'name': '购物', 'svg': _0x2c3771(0xb2f), 'area': _0x2c3771(0x11e) }, { 'id': 'footprints', 'name': '足迹', 'svg': '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'area': _0x2c3771(0x11e) }]; _0x5ab6cf[_0x2c3771(0xb13)](_0x556e36 => { const _0x5b054b = _0x2c3771, _0x41324e = document[_0x5b054b(0x53d)](_0x5b054b(0x6b3)); _0x41324e[_0x5b054b(0x175)] = _0x5b054b(0x900), _0x41324e[_0x5b054b(0x109)] = _0x5b054b(0x131) + _0x556e36['svg'] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x556e36['name'] + _0x5b054b(0xa24), _0x41324e[_0x5b054b(0xe9)](_0x5b054b(0x6f4), () => _0x90d8f5(_0x556e36['id'], _0x556e36[_0x5b054b(0x4a8)])); if (_0x556e36[_0x5b054b(0xa65)] === _0x5b054b(0x690)) _0x1b4415[_0x5b054b(0x30a)](_0x41324e); else { if (_0x5b054b(0x7bf) === _0x5b054b(0x510)) { const _0x58546a = _0x5606e1['conversationHistory'][_0x4103ee - 0x2], _0x4ca5f8 = _0x556774[_0x5b054b(0x31d)][_0xde14b9 - 0x1]; if (_0x58546a[_0x5b054b(0x7a0)] === ![] && _0x4ca5f8[_0x5b054b(0x7a0)] === !![]) _0x835571 = _0x5b054b(0x82e) + _0x5c8a13['name'] + _0x5b054b(0x100); else _0x58546a['isOffline'] === !![] && _0x4ca5f8[_0x5b054b(0x7a0)] === ![] && (_0x32076e = _0x5b054b(0x2bf) + _0x16965c[_0x5b054b(0x4a8)] + _0x5b054b(0x168)); } else _0x34e136['appendChild'](_0x41324e); } }); } document['getElementById'](_0x4a89cb(0x1d8))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0xb83a78 = _0x4a89cb; if (_0xb83a78(0xadf) === 'eAsKb') { const _0x4c0482 = _0x38f7ec['createElement'](_0xb83a78(0x6b3)); _0x4c0482[_0xb83a78(0x175)] = 'avatar-wrapper\x20' + _0x15ac1f; const _0x421620 = _0x2b9887[_0xb83a78(0x53d)](_0xb83a78(0x187)); _0x421620[_0xb83a78(0x9fb)] = _0x3edd51, _0x421620['className'] = _0xb83a78(0x496); const _0x4c8b3f = _0x481b92['createElement']('div'); return _0x4c8b3f['className'] = _0xb83a78(0x463), _0x44245b && (_0x4c8b3f[_0xb83a78(0xab9)][_0xb83a78(0x3ec)] = _0xb83a78(0xac5) + _0x45e4c4 + '\x27)'), _0x4c0482['appendChild'](_0x421620), _0x4c0482[_0xb83a78(0x30a)](_0x4c8b3f), _0x4c0482; } else { _0x11a72f && (clearInterval(_0x11a72f), _0x11a72f = null); document[_0xb83a78(0x2fc)](_0xb83a78(0x49e))[_0xb83a78(0xab9)][_0xb83a78(0x243)] = _0xb83a78(0x1ea); const _0xb654e6 = document[_0xb83a78(0x2fc)](_0xb83a78(0x5a0)); if (_0xb654e6) _0xb654e6[_0xb83a78(0x3c2)](); const _0x63c097 = document[_0xb83a78(0x2fc)](_0xb83a78(0x629)); if (_0x63c097) _0x63c097[_0xb83a78(0x3c2)](); _0x43c005('snoopList', _0xb83a78(0x918)); } }); async function _0x90d8f5(_0x1b1428, _0xd7cda6, _0x598619 = ![]) { const _0x1576eb = _0x4a89cb; document[_0x1576eb(0x2fc)](_0x1576eb(0x8d1))[_0x1576eb(0xab9)][_0x1576eb(0x243)] = _0x1576eb(0x1ea); const _0x58f1d2 = document['getElementById']('snoop-app-view-container'); _0x58f1d2['innerHTML'] = _0x1576eb(0x712), _0x58f1d2[_0x1576eb(0xab9)][_0x1576eb(0x243)] = 'flex'; const _0xaf124a = _0x1576eb(0x888) + _0x40dee3 + '_' + _0x1b1428; try { if (_0x1b1428 === _0x1576eb(0xf3)) { if (_0x1576eb(0x7f0) !== _0x1576eb(0x7f0)) { _0x466ee4('你还没保存这个角色呢，导什么导？'); return; } else { const _0x52d50c = await _0x33e769(_0x40dee3); _0x146b79(_0x1b1428, _0xd7cda6, _0x52d50c); return; } } let _0x32526f = await _0x157f8d(_0xaf124a); if (_0x598619 || !_0x32526f) { console[_0x1576eb(0x172)](_0x1576eb(0x191) + _0xaf124a + '...'); let _0x1607ff = await _0x5b422d(_0x1b1428, _0x40dee3, _0x32526f); if (_0x1607ff) { if (_0x1576eb(0x16c) !== _0x1576eb(0x16c)) return _0x5a62cd[_0x1576eb(0x172)](_0x1576eb(0x26a)), ''; else { const _0x38cc5c = _0x1607ff[_0x1576eb(0x63a)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x155ad6 = _0x38cc5c ? _0x38cc5c[0x1][_0x1576eb(0x1b5)]() : _0x1607ff[_0x1576eb(0x1b5)](); let _0x500fba; try { _0x500fba = JSON[_0x1576eb(0x16b)](_0x155ad6); } catch (_0x469535) { _0x500fba = _0x34e6ae(_0x155ad6); if (!_0x500fba) throw new Error(_0x1576eb(0x1c5)); } let _0x2d4610; if (_0x598619 && _0x32526f) { if (_0x1576eb(0x150) !== _0x1576eb(0xef)) try { if (_0x1576eb(0x4e9) === _0x1576eb(0x4e9)) { const _0x573561 = JSON[_0x1576eb(0x16b)](_0x32526f); if (_0x1b1428 === 'whispers') { if ('HygOJ' !== _0x1576eb(0xb07)) { let _0x218699 = _0x169a1a[_0x1576eb(0x9d2)](_0x1576eb(0x5c7)); !_0x218699 && (_0x218699 = _0x4a97f2['createElement'](_0x1576eb(0x6b3)), _0x218699[_0x1576eb(0x175)] = _0x1576eb(0x4d5), _0x218699[_0x1576eb(0x908)] = '对方正在行动中...', _0x218699[_0x1576eb(0xab9)][_0x1576eb(0x44e)] = _0x1576eb(0x746), _0x218699[_0x1576eb(0xab9)][_0x1576eb(0xae0)] = _0x1576eb(0x4bb), _0x218699[_0x1576eb(0xab9)]['borderRadius'] = '8px', _0x21a146[_0x1576eb(0x30a)](_0x218699)); } else _0x2d4610 = JSON[_0x1576eb(0x41f)](_0x500fba), console[_0x1576eb(0x172)](_0x1576eb(0x4f8)); } else { if (Array[_0x1576eb(0x684)](_0x573561) && Array[_0x1576eb(0x684)](_0x500fba)) { const _0x4950a9 = _0x573561[_0x1576eb(0xa37)](_0x500fba); _0x2d4610 = JSON[_0x1576eb(0x41f)](_0x4950a9), console['log']('Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。'); } else _0x1576eb(0x492) !== _0x1576eb(0xb08) ? _0x2d4610 = JSON[_0x1576eb(0x41f)](_0x500fba) : (_0x22243d[_0x1576eb(0x908)] = _0x22bd7f[_0x1576eb(0x966)] === _0x1576eb(0x6ce) ? '旁白' : _0x296ccc[_0x1576eb(0x966)], _0x2b41ab[_0x1576eb(0x908)] = _0x2934dc[_0x1576eb(0x810)], _0x13af8b[_0x1576eb(0x966)] === _0xeb9225[_0x1576eb(0x4a8)] ? _0x4d517b(_0x2a5f0c, _0x4c9e95['emotion']) : _0x3ac06b(_0x13dfdf, 'normal')); } } else _0x214bc[_0x1576eb(0x208)] = _0x980ad6; } catch (_0x568aaa) { _0x1576eb(0x93e) === _0x1576eb(0x93e) ? _0x2d4610 = JSON[_0x1576eb(0x41f)](_0x500fba) : (_0x114729[_0x1576eb(0x61d)] = _0x952626, _0x1a0d25()); } else _0x54da70[_0x1576eb(0x410)]({ 'behavior': _0x1576eb(0x449), 'block': _0x1576eb(0x1dd) }); } else _0x2d4610 = JSON[_0x1576eb(0x41f)](_0x500fba); await _0x5757cd(_0xaf124a, _0x2d4610), _0x32526f = _0x2d4610; } } } else console['log'](_0x1576eb(0x3e1) + _0xaf124a); _0x146b79(_0x1b1428, _0xd7cda6, _0x32526f); } catch (_0x1c0067) { console[_0x1576eb(0xa12)]('加载\x20' + _0xd7cda6 + '\x20内容失败:', _0x1c0067), _0x58f1d2[_0x1576eb(0x109)] = _0x1576eb(0x111) + _0x1c0067[_0x1576eb(0x420)] + _0x1576eb(0x8ea); } } function _0x146b79(_0x2bfc5f, _0x1369b1, _0x92db69) { const _0x3c5321 = _0x4a89cb; if (_0x3c5321(0x86c) === 'SgdDS') { const _0x1f9d7b = _0xe97381(_0x40dee3), _0x4e2690 = document['getElementById']('snoop-app-view-container'); let _0x4729b5 = ''; if (!_0x92db69) _0x3c5321(0x200) === _0x3c5321(0x200) ? _0x4729b5 = _0x3c5321(0x107) : (_0x55e5c5 *= _0x15dab3 / _0x19a91f, _0x21c713 = _0x2570b8); else { if (_0x3c5321(0x129) === _0x3c5321(0x129)) { if (_0x2bfc5f === _0x3c5321(0xf3)) { if (_0x3c5321(0xa6c) !== _0x3c5321(0xa6c)) { _0x28d3fa[_0x3c5321(0xa12)](_0x3c5321(0x36d)); return; } else _0x4729b5 = _0x3c5321(0x120) + _0x92db69 + _0x3c5321(0x21a); } else try { let _0x4408b7 = null; const _0x29ebe7 = _0x92db69[_0x3c5321(0x63a)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x568bda = _0x29ebe7 ? _0x29ebe7[0x1] : _0x92db69; _0x4408b7 = JSON['parse'](_0x568bda); const _0x186e18 = _0xe97381(_0x40dee3); switch (_0x2bfc5f) { case 'gallery': _0x4729b5 = _0x4f609f(_0x4408b7); break; case _0x3c5321(0x843): _0x4729b5 = _0x2f2453(_0x4408b7, _0x186e18[_0x3c5321(0x4a8)]); break; case _0x3c5321(0xb0f): _0x4729b5 = _0x2f074e(_0x4408b7); break; case _0x3c5321(0x320): _0x4729b5 = _0x3c9e27(_0x4408b7); break; case _0x3c5321(0x57f): _0x4729b5 = _0xf2e6b2(_0x4408b7); break; case _0x3c5321(0x583): _0x4729b5 = _0x3446ce(_0x4408b7); break; case _0x3c5321(0x53e): _0x4729b5 = _0x4f924e(_0x4408b7); break; case _0x3c5321(0xf3): _0x4729b5 = _0x3c5321(0x15a) + _0x92db69 + _0x3c5321(0x38e); break; default: _0x4729b5 = '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>' + JSON['stringify'](_0x4408b7, null, 0x2) + _0x3c5321(0xb34); } } catch (_0x3e995a) { 'BKszp' === _0x3c5321(0xb35) ? (_0x443557[_0x3c5321(0xe9)]('click', () => _0x138588[_0x3c5321(0x6f4)]()), _0x162cdd['addEventListener'](_0x3c5321(0x782), _0x417a06 => { const _0x306f32 = _0x3c5321, _0x55edb6 = _0x417a06[_0x306f32(0x37e)]['files'][0x0]; if (!_0x55edb6) return; try { const _0x1bc388 = _0x501ffa[_0x306f32(0x3a1)](_0x55edb6); _0x1b6a69[_0x306f32(0xab9)]['backgroundImage'] = _0x306f32(0xac5) + _0x1bc388 + '\x27)'; } catch (_0x33dee5) { _0x36d6fe('图片预览失败:\x20' + _0x33dee5[_0x306f32(0x420)]); } })) : (console[_0x3c5321(0xa12)]('视奸内容解析失败:', _0x3e995a), _0x4729b5 = _0x3c5321(0x38d) + _0x92db69 + _0x3c5321(0xb34)); } } else { const _0x153cfc = _0x24eba0[_0x3c5321(0x69e)] === _0x3c5321(0x3b7) ? '你' : _0x340c72[_0x3c5321(0x95b)]; _0x4c293c += _0x3c5321(0x7b5) + _0x153cfc + ':\x20' + _0x35e89c[_0x3c5321(0xaf8)] + '\x0a'; } } _0x4e2690[_0x3c5321(0x109)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>' + _0x1369b1 + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>' + _0x1f9d7b['name'] + _0x3c5321(0x401) + (_0x2bfc5f === 'summary' ? '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>' : _0x3c5321(0xa82)) + _0x3c5321(0x97f) + _0x4729b5 + _0x3c5321(0x5f9); const _0x70a4f2 = _0x4e2690[_0x3c5321(0x9d2)](_0x3c5321(0x66e)); _0x2bfc5f === _0x3c5321(0xf3) && (_0x70a4f2[_0x3c5321(0xab9)][_0x3c5321(0xae0)] = '0'); document[_0x3c5321(0x2fc)]('snoop-app-back-btn')[_0x3c5321(0xe9)](_0x3c5321(0x6f4), () => { const _0x56eb48 = _0x3c5321; _0x4e2690[_0x56eb48(0xab9)][_0x56eb48(0x243)] = _0x56eb48(0x1ea), document['getElementById'](_0x56eb48(0x8d1))['style'][_0x56eb48(0x243)] = _0x56eb48(0x293); }); if (_0x2bfc5f === _0x3c5321(0xf3)) { if (_0x3c5321(0xab8) === 'gHYFA') document[_0x3c5321(0x2fc)]('snoop-copy-summary-btn')['addEventListener'](_0x3c5321(0x6f4), () => { const _0x4b4d1c = _0x3c5321, _0x23280c = document[_0x4b4d1c(0x2fc)](_0x4b4d1c(0x140)); _0x23280c[_0x4b4d1c(0x42c)](), document['execCommand'](_0x4b4d1c(0x7d0)), _0x2d1f89(_0x4b4d1c(0x5af)); }); else return _0x4bbee9(_0x591df5)['then'](_0x2f6fff => _0x2f6fff['blob']()); } else document[_0x3c5321(0x2fc)](_0x3c5321(0x240))[_0x3c5321(0xe9)](_0x3c5321(0x6f4), async () => { const _0x572bb0 = _0x3c5321; 'ryGOs' === _0x572bb0(0x5ba) ? _0x90d8f5(_0x2bfc5f, _0x1369b1, !![]) : _0x3a7fee += _0x572bb0(0x3bf) + _0x491ab4['songName'] + _0x572bb0(0x919) + _0x19d39c[_0x572bb0(0x20b)] + ']'; }); _0x2bfc5f === _0x3c5321(0x843) && _0x4e2690[_0x3c5321(0x4ee)]('.snoop-chat-item')['forEach'](_0x4b3540 => { const _0x292f9f = _0x3c5321; _0x292f9f(0x98c) === _0x292f9f(0x18b) ? _0x207fd0 = _0x292f9f(0x91d) + _0x72470d['id'] + _0x292f9f(0x171) + (_0x16969e[_0x292f9f(0xab6)] || _0xb8f30b) + _0x292f9f(0x69c) + _0x52e37d[_0x292f9f(0xaa1)] + _0x292f9f(0x32b) + _0x1cff17[_0x292f9f(0x20b)] + _0x292f9f(0x108) + (_0x23e816[_0x292f9f(0x25e)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20' : _0x4b3540[_0x292f9f(0xe9)]('click', () => { const _0x1477f6 = _0x292f9f, _0x5243c0 = JSON[_0x1477f6(0x16b)](_0x4b3540[_0x1477f6(0x977)][_0x1477f6(0x172)]['replace'](/&quot;/g, '\x22')), _0xfee38d = _0x4b3540['dataset'][_0x1477f6(0xa4b)], _0x4bf82d = _0x4b3540[_0x1477f6(0x977)][_0x1477f6(0x390)]; _0xda9d5a(_0xfee38d, _0x4bf82d, _0x5243c0); }); }); } else _0x48fcc4[_0x3c5321(0x6f4)](); } function _0x34e6ae(_0xf074a8) { const _0x2ed0b4 = _0x4a89cb; if (_0x2ed0b4(0x8bd) !== _0x2ed0b4(0x965)) { if (!_0xf074a8 || typeof _0xf074a8 !== _0x2ed0b4(0x9b5)) return null; const _0x3cbb5e = _0xf074a8[_0x2ed0b4(0x1b5)]()[_0x2ed0b4(0x115)]('\x0a'), _0x2432cd = []; let _0x3023c4 = null; for (const _0xb0df52 of _0x3cbb5e) { if (_0x2ed0b4(0x9ae) === _0x2ed0b4(0x9ab)) _0xf97eee(), _0x500070(); else { const _0x46d8a6 = _0xb0df52[_0x2ed0b4(0x1b5)](); if (_0x46d8a6[_0x2ed0b4(0x835)]('-\x20')) { _0x3023c4 && _0x2432cd[_0x2ed0b4(0x9f2)](_0x3023c4); _0x3023c4 = {}; const _0xa65c5e = _0x46d8a6['substring'](0x2), _0x4ce55f = _0xa65c5e[_0x2ed0b4(0x115)](/:\s(.+)/); if (_0x4ce55f[_0x2ed0b4(0x8ab)] > 0x1) { const _0x24b227 = _0x4ce55f[0x0][_0x2ed0b4(0x1b5)](), _0x1fe179 = _0x4ce55f[0x1][_0x2ed0b4(0x1b5)]()[_0x2ed0b4(0x8f0)](/^"|"$/g, ''); _0x3023c4[_0x24b227] = _0x1fe179; } } else { if (_0x3023c4 && _0x46d8a6) { if (_0x2ed0b4(0x538) === _0x2ed0b4(0x351)) { if (_0x1e460b) _0x11d65b(_0x5a78fb); if (_0x5b896f[_0x2ed0b4(0x723)]) return; _0x2d7e94(() => { _0x5f37a1 && _0x27e2a1(_0xc7118f['id'], _0x10be33['map'](_0x1f187e => _0x1f187e['id'])); }, 0x32); } else { const _0x741b7a = _0x46d8a6[_0x2ed0b4(0x115)](/:\s(.+)/); if (_0x741b7a[_0x2ed0b4(0x8ab)] > 0x1) { if (_0x2ed0b4(0x251) === _0x2ed0b4(0x8df)) _0x1afef6(_0x2ed0b4(0x3f1) + _0x299278['message']); else { const _0x4c7dd9 = _0x741b7a[0x0]['trim'](), _0x39d54c = _0x741b7a[0x1][_0x2ed0b4(0x1b5)]()[_0x2ed0b4(0x8f0)](/^"|"$/g, ''); _0x3023c4[_0x4c7dd9] = _0x39d54c; } } } } } } } return _0x3023c4 && (_0x2ed0b4(0x1d6) !== 'yMvLY' ? (_0x598908[_0x2ed0b4(0xa12)](_0x2ed0b4(0x818) + _0x29c11f + ':', _0x40dd67), _0x3efa77[_0x2ed0b4(0xab9)][_0x2ed0b4(0x3ec)] = _0x2ed0b4(0x1ea)) : _0x2432cd['push'](_0x3023c4)), _0x2432cd['length'] > 0x0 ? _0x2432cd : null; } else _0xf7643['classList'][_0x2ed0b4(0x3c2)](_0x2ed0b4(0xafc)); } function _0xda9d5a(_0x2535c0, _0x31e156, _0x1fe1e4) { const _0x366684 = _0x4a89cb, _0x5c95a1 = document[_0x366684(0x9d2)]('#snoop-app-view-container\x20.snoop-app-content'), _0x22b637 = document[_0x366684(0x9d2)]('#snoop-app-view-container\x20.snoop-app-header'); let _0x208fe5 = _0x366684(0x18d); if (!_0x1fe1e4 || _0x1fe1e4[_0x366684(0x8ab)] === 0x0) { if (_0x366684(0x783) !== _0x366684(0x783)) { const _0x1a22b5 = (_0x4916e5 - _0x8dc8a0) / (0x3e8 * 0x3c); _0x1a22b5 < 0x3c ? _0x56979a += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x6e4115 += _0x366684(0xa0f) + _0x49684c[_0x366684(0x2dd)](_0x1a22b5 / 0x3c) + _0x366684(0x821); } else _0x208fe5 += _0x366684(0x95a); } else _0x1fe1e4[_0x366684(0xb13)](_0x404e2f => { const _0x13afde = _0x366684; if (_0x13afde(0x52e) === _0x13afde(0x9bc)) _0x30fbbb[_0x13afde(0x8e6)] = [], _0x49e86d(), _0x518332(), _0x3b939d('动态已清空。'); else { const _0x287db3 = _0x404e2f[_0x13afde(0x69e)] === _0x13afde(0x3b7), _0x5ef291 = _0x287db3 ? _0x31e156 ? _0x31e156[0x0] : '?' : _0x2535c0 ? _0x2535c0[0x0] : '?'; _0x208fe5 += _0x13afde(0x981) + (_0x287db3 ? _0x13afde(0x1a8) : 'ai') + _0x13afde(0x527) + (!_0x287db3 ? _0x13afde(0xa39) + _0x5ef291 + _0x13afde(0x94b) : '') + _0x13afde(0x3c7) + (_0x287db3 ? _0x13afde(0x1a8) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x404e2f[_0x13afde(0xaf8)] + _0x13afde(0x5b2) + (_0x287db3 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x5ef291 + _0x13afde(0x94b) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } }); _0x208fe5 += '</div>', _0x5c95a1['innerHTML'] = _0x208fe5, _0x5c95a1['scrollTop'] = _0x5c95a1[_0x366684(0x28b)], _0x22b637['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>' + _0x2535c0 + _0x366684(0x441), document[_0x366684(0x2fc)](_0x366684(0x770))['addEventListener']('click', () => { const _0x42732d = _0x366684; _0x90d8f5(_0x42732d(0x843), '聊天'); }); if (!document[_0x366684(0x2fc)](_0x366684(0x693))) { if (_0x366684(0x633) === _0x366684(0x28d)) { _0x5c4398['classList'][_0x366684(0x3ea)](_0x366684(0x210)); const _0x5abb77 = _0x57014c[_0x366684(0x53d)](_0x366684(0x187)); _0x5abb77['src'] = _0x1b48a5, _0x5abb77[_0x366684(0x402)][_0x366684(0x3ea)]('sticker-content'), _0x4b61fe[_0x366684(0x30a)](_0x5abb77); } else document[_0x366684(0x4d9)][_0x366684(0x38f)]('beforeend', _0x366684(0x91a)); } } function _0x34e6ae(_0xb3a8c3) { const _0x25b378 = _0x4a89cb; if (!_0xb3a8c3 || typeof _0xb3a8c3 !== _0x25b378(0x9b5)) return null; const _0x55375a = _0xb3a8c3['trim']()[_0x25b378(0x115)]('\x0a'), _0x49884a = []; let _0x17c587 = null; for (const _0x1594b6 of _0x55375a) { if (_0x25b378(0x577) !== _0x25b378(0x577)) { const _0x255bad = _0x1f678c(_0x14e396['activeChatId']); _0x3b9359 = _0x255bad[_0x25b378(0x496)] || _0x101012; const _0x92cdf0 = _0x37590d(_0x3a911f?.[_0x25b378(0xad8)][0x0]); _0x92cdf0 && (_0x27fc97 = _0x92cdf0[_0x25b378(0x890)] || ''); } else { const _0x5ec402 = _0x1594b6['trim'](); if (_0x5ec402[_0x25b378(0x835)]('-\x20')) { _0x17c587 && _0x49884a[_0x25b378(0x9f2)](_0x17c587); _0x17c587 = {}; const _0x227948 = _0x5ec402[_0x25b378(0x7c5)](0x2), _0x1437ac = _0x227948['split'](/:\s(.+)/); if (_0x1437ac[_0x25b378(0x8ab)] > 0x1) { if (_0x25b378(0x640) === _0x25b378(0x21b)) { const _0x5db72c = _0x30173e[_0x25b378(0x115)]('--'); _0x5db72c[_0x25b378(0x8ab)] === 0x2 && _0x5db72c[0x0][_0x25b378(0x1b5)]() && _0x5db72c[0x1][_0x25b378(0x1b5)]()[_0x25b378(0x835)]('http') ? _0x26ee16[_0x25b378(0x9f2)]({ 'name': _0x5db72c[0x0][_0x25b378(0x1b5)](), 'url': _0x5db72c[0x1][_0x25b378(0x1b5)]() }) : _0x5a3dd5++; } else { const _0x98dcb7 = _0x1437ac[0x0][_0x25b378(0x1b5)](), _0x1fbe8f = _0x1437ac[0x1]['trim']()['replace'](/^"|"$/g, ''); _0x17c587[_0x98dcb7] = _0x1fbe8f; } } } else { if (_0x17c587 && _0x5ec402) { const _0x21cc9e = _0x5ec402[_0x25b378(0x115)](/:\s(.+)/); if (_0x21cc9e['length'] > 0x1) { if (_0x25b378(0xb2a) !== _0x25b378(0xb2a)) _0x154475(_0x25b378(0x22e)); else { const _0x4073db = _0x21cc9e[0x0][_0x25b378(0x1b5)](), _0x45830a = _0x21cc9e[0x1]['trim']()[_0x25b378(0x8f0)](/^"|"$/g, ''); _0x17c587[_0x4073db] = _0x45830a; } } } } } } return _0x17c587 && _0x49884a[_0x25b378(0x9f2)](_0x17c587), _0x49884a[_0x25b378(0x8ab)] > 0x0 ? _0x49884a : null; } async function _0x58a951(_0x18fec3) { const _0x542289 = _0x4a89cb; if (!_0x18fec3) return ''; const _0x285bf4 = [{ 'id': 'gallery', 'name': '相册' }, { 'id': _0x542289(0x843), 'name': '和其他人的聊天' }, { 'id': _0x542289(0xb0f), 'name': '浏览器历史' }, { 'id': _0x542289(0x320), 'name': _0x542289(0x4d4) }, { 'id': _0x542289(0x57f), 'name': _0x542289(0x9ba) }, { 'id': 'wants', 'name': _0x542289(0x932) }, { 'id': _0x542289(0x53e), 'name': _0x542289(0x13a) }]; let _0x27935f = ''; for (const _0x28eae5 of _0x285bf4) { try { const _0x380126 = 'snoop_' + _0x18fec3 + '_' + _0x28eae5['id'], _0x386909 = await _0x157f8d(_0x380126); if (_0x386909) { if ('KzsqN' !== _0x542289(0x86d)) { const _0xd10a31 = _0x3dabe7[_0x542289(0x69a)][_0x542289(0x354)](_0x392b32 => _0x392b32[_0x542289(0x9e5)] && _0x392b32[_0x542289(0x9e5)][_0x542289(0x6da)]); _0xd10a31 && (_0xd10a31[_0x542289(0x9e5)] = null, _0x2f30c8(), _0x3c8eb3(_0x542289(0x7eb)), _0x43ad50(), _0x33f071[_0x542289(0x402)]['remove']('show'), _0x1bb711(() => _0x33f468[_0x542289(0xab9)][_0x542289(0x243)] = 'none', 0x12c)); } else { const _0x873a49 = _0x386909['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x14b4ad = _0x873a49 ? _0x873a49[0x1][_0x542289(0x1b5)]() : _0x386909[_0x542289(0x1b5)](); if (!_0x14b4ad) continue; let _0x4b904d = null; try { _0x4b904d = JSON['parse'](_0x14b4ad); } catch (_0x55bed7) { console[_0x542289(0x294)](_0x542289(0x5b4) + _0x28eae5['id'] + _0x542289(0x9aa), _0x55bed7[_0x542289(0x420)]); try { _0x4b904d = _0x34e6ae(_0x14b4ad); if (!_0x4b904d) throw new Error('YAML翻译机也无法理解这段梦话。'); console[_0x542289(0x172)](_0x542289(0xa28) + _0x28eae5['id'] + _0x542289(0x6bb)); } catch (_0x33a09f) { throw _0x55bed7; } } if (Array[_0x542289(0x684)](_0x4b904d) && _0x4b904d[_0x542289(0x8ab)] > 0x0) { if ('RPzUd' !== _0x542289(0x5ef)) { _0x27935f === '' && (_0x27935f += _0x542289(0x353)); _0x27935f += _0x542289(0x1bc) + _0x28eae5[_0x542289(0x4a8)] + '\x0a'; switch (_0x28eae5['id']) { case _0x542289(0xb1d): _0x4b904d[_0x542289(0xb13)](_0x476c40 => { const _0x3eb7b4 = _0x542289; _0x3eb7b4(0x619) !== _0x3eb7b4(0x579) ? _0x27935f += _0x3eb7b4(0x278) + _0x476c40['description'] + '”。\x0a' : _0x5bcedd[_0x504054] = _0x3906d7['parse'](_0x196d80); }); break; case _0x542289(0x843): _0x4b904d[_0x542289(0xb13)](_0x171c3d => { const _0x506ed0 = _0x542289; _0x27935f += _0x506ed0(0x40e) + _0x171c3d[_0x506ed0(0x95b)] + _0x506ed0(0xaf3) + _0x171c3d[_0x506ed0(0x9e3)] + '”。\x0a', _0x171c3d[_0x506ed0(0x172)] && Array[_0x506ed0(0x684)](_0x171c3d[_0x506ed0(0x172)]) && (_0x27935f += '\x20\x20具体对话如下：\x0a', _0x171c3d[_0x506ed0(0x172)][_0x506ed0(0xb13)](_0xb76813 => { const _0x5b1cde = _0x506ed0, _0x24e82a = _0xb76813[_0x5b1cde(0x69e)] === _0x5b1cde(0x3b7) ? '你' : _0x171c3d[_0x5b1cde(0x95b)]; _0x27935f += _0x5b1cde(0x7b5) + _0x24e82a + ':\x20' + _0xb76813[_0x5b1cde(0xaf8)] + '\x0a'; })); }); break; case _0x542289(0xb0f): _0x4b904d[_0x542289(0xb13)](_0x5a7100 => { const _0x5871f9 = _0x542289; _0x27935f += _0x5871f9(0x659) + _0x5a7100[_0x5871f9(0x4dc)] + _0x5871f9(0xb1f); }); break; case _0x542289(0x320): _0x4b904d['forEach'](_0x2712e7 => { const _0x25ab87 = _0x542289; _0x27935f += _0x25ab87(0x19b) + _0x2712e7[_0x25ab87(0x50b)] + _0x25ab87(0x252) + _0x2712e7[_0x25ab87(0xaf8)][_0x25ab87(0x8f0)](/\n/g, '\x20') + _0x25ab87(0xb1f); }); break; case _0x542289(0x57f): _0x4b904d[_0x542289(0xb13)](_0x53601a => { const _0x3188d1 = _0x542289; 'GwAKK' === _0x3188d1(0x415) ? _0x27935f += '-\x20你点过一份外卖：“' + _0x53601a[_0x3188d1(0x853)] + '”，里面有\x20' + _0x53601a['items'][_0x3188d1(0x2c2)]('、') + '。\x0a' : _0x3841b8[_0x3188d1(0x402)][_0x3188d1(0x3ea)]('is-visible'); }); break; case 'wants': _0x4b904d[_0x542289(0xb13)](_0x14b863 => { const _0x5b9fad = _0x542289; _0x27935f += _0x5b9fad(0x1c0) + _0x14b863[_0x5b9fad(0xa3c)] + _0x5b9fad(0x61a) + _0x14b863[_0x5b9fad(0x669)] + '”。\x0a'; }); break; case _0x542289(0x53e): _0x4b904d[_0x542289(0xb13)](_0xf0ff8 => { const _0x5d386b = _0x542289; _0x27935f += _0x5d386b(0x784) + _0xf0ff8[_0x5d386b(0x951)] + _0x5d386b(0x745) + _0xf0ff8[_0x5d386b(0x261)] + _0x5d386b(0xb1f); }); break; default: _0x4b904d[_0x542289(0xb13)](_0x2f5301 => { const _0xdcc396 = _0x542289; if (_0xdcc396(0x5ac) !== _0xdcc396(0x5ac)) { _0x24ed79[_0xdcc396(0x109)] = _0xdcc396(0x4b2), _0x17c46f['innerHTML'] = ''; return; } else _0x27935f += '-\x20' + JSON[_0xdcc396(0x41f)](_0x2f5301) + '\x0a'; }); break; } } else _0xa05e44(), _0x2b1551(); } } } } catch (_0x30bdfa) { console['error']('加载视奸记忆失败\x20(' + _0x28eae5['id'] + ')，已跳过。这不应该发生，数据库可能已损坏。', _0x30bdfa); } } return _0x27935f; } function _0x4f609f(_0x42b434) { const _0x3beedc = _0x4a89cb; if (!Array[_0x3beedc(0x684)](_0x42b434)) return _0x3beedc(0x571); if (_0x42b434[_0x3beedc(0x8ab)] === 0x0) return _0x3beedc(0x9bf); return _0x3beedc(0xfd) + _0x42b434[_0x3beedc(0x592)]((_0x4434d9, _0x319001) => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20' + (_0x319001 < _0x42b434[_0x3beedc(0x8ab)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>' + (_0x4434d9[_0x3beedc(0x4bf)] || _0x3beedc(0x9a4)) + _0x3beedc(0x790) + (_0x4434d9[_0x3beedc(0x6cc)] || '') + _0x3beedc(0x104))['join']('') + _0x3beedc(0x94b); } function _0x2f2453(_0x4b6a0b, _0x5e981a) { const _0x4697db = _0x4a89cb; if (!Array[_0x4697db(0x684)](_0x4b6a0b) || _0x4b6a0b[_0x4697db(0x8ab)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>'; return _0x4697db(0xfd) + _0x4b6a0b[_0x4697db(0x592)]((_0x349797, _0x300b3a) => { const _0x17e054 = _0x4697db; if (_0x17e054(0x3da) !== 'vDdTH') { _0x1765f5[_0x17e054(0x109)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } else { const _0x300061 = JSON[_0x17e054(0x41f)](_0x349797[_0x17e054(0x172)] || [])['replace'](/'/g, '&apos;')['replace'](/"/g, _0x17e054(0xb29)), _0x5205e7 = _0x349797[_0x17e054(0x95b)] || _0x17e054(0x121); return _0x17e054(0x2be) + (_0x300b3a < _0x4b6a0b[_0x17e054(0x8ab)] - 0x1 ? _0x17e054(0x6f3) : '') + _0x17e054(0x830) + _0x300061 + _0x17e054(0xa78) + _0x5205e7 + _0x17e054(0x31a) + _0x5e981a + _0x17e054(0x914) + _0x5205e7['charAt'](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x5205e7 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x349797[_0x17e054(0x9e3)] || '') + _0x17e054(0x1e9); } })[_0x4697db(0x2c2)]('') + '</div>'; } function _0x2f074e(_0x21020e) { const _0x41ee91 = _0x4a89cb; if (!Array[_0x41ee91(0x684)](_0x21020e)) return _0x41ee91(0x571); if (_0x21020e[_0x41ee91(0x8ab)] === 0x0) return _0x41ee91(0x1f3); return _0x21020e[_0x41ee91(0xa17)]((_0x1521d1, _0x3a3565) => new Date(_0x3a3565[_0x41ee91(0x6cc)]) - new Date(_0x1521d1[_0x41ee91(0x6cc)])), _0x41ee91(0xfd) + _0x21020e[_0x41ee91(0x592)]((_0x53a1eb, _0x25a6ad) => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20' + (_0x25a6ad < _0x21020e[_0x41ee91(0x8ab)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x41ee91(0x127) + (_0x53a1eb[_0x41ee91(0x4dc)] || _0x41ee91(0x68f)) + _0x41ee91(0x66f) + (_0x53a1eb[_0x41ee91(0x396)] || '没有找到相关结果。') + _0x41ee91(0x954) + (_0x53a1eb[_0x41ee91(0x6cc)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x41ee91(0x2c2)]('') + _0x41ee91(0x94b); } function _0x3c9e27(_0xe41ce1) { const _0x4db7eb = _0x4a89cb; if (!Array['isArray'](_0xe41ce1)) return _0x4db7eb(0x571); if (_0xe41ce1[_0x4db7eb(0x8ab)] === 0x0) return _0x4db7eb(0x378); return _0xe41ce1['sort']((_0x5bf6d4, _0x573e3e) => new Date(_0x573e3e[_0x4db7eb(0x2b4)]) - new Date(_0x5bf6d4[_0x4db7eb(0x2b4)])), _0xe41ce1[_0x4db7eb(0x592)](_0x359a5d => _0x4db7eb(0x779) + (_0x359a5d[_0x4db7eb(0x50b)] || _0x4db7eb(0x2ea)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>' + (_0x359a5d[_0x4db7eb(0xaf8)] || '') + _0x4db7eb(0x43c) + (_0x359a5d['last_edited'] || '') + _0x4db7eb(0x989))[_0x4db7eb(0x2c2)](''); } function _0xf2e6b2(_0x48a48d) { const _0x10710c = _0x4a89cb; if (_0x10710c(0x74d) !== _0x10710c(0x74d)) _0x42c42f('图片处理失败:\x20' + _0x24b787['message']); else { if (!Array['isArray'](_0x48a48d)) return _0x10710c(0x571); if (_0x48a48d[_0x10710c(0x8ab)] === 0x0) return _0x10710c(0x4fb); return _0x48a48d[_0x10710c(0xa17)]((_0x1ef123, _0x2f0a08) => new Date(_0x2f0a08[_0x10710c(0x6cc)]) - new Date(_0x1ef123['timestamp'])), _0x48a48d['map'](_0x325dfd => { const _0x3e75f5 = _0x10710c, _0x158ebc = (_0x325dfd['items'] || [])[_0x3e75f5(0x592)](_0x455e21 => _0x3e75f5(0x56a) + _0x455e21 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')['join'](''); return _0x3e75f5(0x47b) + (_0x325dfd[_0x3e75f5(0x853)] || _0x3e75f5(0x631)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x325dfd[_0x3e75f5(0x6cc)] || '') + _0x3e75f5(0x947) + (_0x325dfd[_0x3e75f5(0x12a)] || _0x3e75f5(0x71e)) + _0x3e75f5(0x341) + _0x158ebc + _0x3e75f5(0x484) + (_0x325dfd[_0x3e75f5(0x985)] || 0x0)['toFixed'](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; })[_0x10710c(0x2c2)](''); } } function _0x3446ce(_0x4e1934) { const _0x1edbcb = _0x4a89cb; if (_0x1edbcb(0x5ff) === _0x1edbcb(0x159)) return _0x26d5a2['userProfiles']['find'](_0x3d0e26 => _0x3d0e26['id'] === _0x5554ee[_0x1edbcb(0x514)]) || _0x415896[_0x1edbcb(0x63b)][0x0]; else { if (!Array[_0x1edbcb(0x684)](_0x4e1934)) return '<p>格式错误</p>'; if (_0x4e1934[_0x1edbcb(0x8ab)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>'; return _0x4e1934[_0x1edbcb(0xa17)]((_0x5a1bde, _0x5cde51) => new Date(_0x5cde51['timestamp']) - new Date(_0x5a1bde[_0x1edbcb(0x6cc)])), _0x4e1934['map'](_0x2ab70e => _0x1edbcb(0x927) + (_0x2ab70e[_0x1edbcb(0xa3c)] || _0x1edbcb(0x795)) + _0x1edbcb(0x9ec) + (_0x2ab70e['timestamp'] || '') + _0x1edbcb(0xb02) + (_0x2ab70e[_0x1edbcb(0x669)] || _0x1edbcb(0x52f)) + _0x1edbcb(0x2c1) + (_0x2ab70e[_0x1edbcb(0x99c)] || 0x0)['toFixed'](0x2) + _0x1edbcb(0x867))[_0x1edbcb(0x2c2)](''); } } function _0x4f924e(_0x29239a) { const _0x4f2edf = _0x4a89cb; if (_0x4f2edf(0x2ad) !== _0x4f2edf(0x2ad)) { const _0x4c2640 = _0x516ef1[_0x4f2edf(0x2fc)](_0x4f2edf(0x518)); _0x4c2640 && _0x4676b8 && (_0x4c2640[_0x4f2edf(0x9fb)] = _0xe951ec[_0x4f2edf(0x3a1)](_0x3589a6)); } else { if (!Array['isArray'](_0x29239a)) return _0x4f2edf(0x571); if (_0x29239a[_0x4f2edf(0x8ab)] === 0x0) return _0x4f2edf(0x64f); return _0x29239a[_0x4f2edf(0xa17)]((_0x3ff1d5, _0x3559ad) => new Date(_0x3559ad[_0x4f2edf(0x6cc)]) - new Date(_0x3ff1d5[_0x4f2edf(0x6cc)])), _0x4f2edf(0x769) + _0x29239a[_0x4f2edf(0x592)](_0xa30044 => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0xa30044['location_name'] || _0x4f2edf(0x469)) + _0x4f2edf(0x3f9) + (_0xa30044[_0x4f2edf(0x261)] || '') + _0x4f2edf(0xe7) + (_0xa30044[_0x4f2edf(0x6cc)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x4f2edf(0x2c2)]('') + _0x4f2edf(0x94b); } } async function _0x5b422d(_0x512092, _0x33c702, _0x2d306b = null) { const _0x7d4be4 = _0x4a89cb, _0xd38adb = _0xe97381(_0x33c702), _0xf2342e = _0x21e37d['chats'][_0x7d4be4(0x354)](_0x4584b5 => _0x4584b5[_0x7d4be4(0x497)] === _0x7d4be4(0x9de) && _0x4584b5[_0x7d4be4(0xad8)]['includes'](_0x33c702)), _0x2b54de = _0x3beafd(_0xf2342e?.['id'] || _0x21e37d[_0x7d4be4(0x272)]); if (!_0xd38adb) throw new Error(_0x7d4be4(0x838)); const { omniText: _0x57f21a } = _0x434953(_0x33c702); let _0x305d8b = ''; const _0x1829b5 = new Date(); let _0x43967d = null, _0x41f0cf = '无'; if (_0x2d306b) try { let _0x1a5a49; try { _0x1a5a49 = JSON['parse'](_0x2d306b); } catch (_0x13a17c) { _0x1a5a49 = _0x34e6ae(_0x2d306b); } if (Array[_0x7d4be4(0x684)](_0x1a5a49) && _0x1a5a49[_0x7d4be4(0x8ab)] > 0x0) { const _0x5802c8 = _0x1a5a49[_0x7d4be4(0x592)](_0x56590d => new Date(_0x56590d[_0x7d4be4(0x6cc)] || _0x56590d['last_edited']))['filter'](_0x5c9e6d => !isNaN(_0x5c9e6d)); if (_0x5802c8[_0x7d4be4(0x8ab)] > 0x0) { if (_0x7d4be4(0x15c) === _0x7d4be4(0x62a)) { if (!_0x54a02e[_0x7d4be4(0x635)] || _0x282caa[_0x7d4be4(0x635)]['length'] === 0x0) { _0x4b2dc4[_0x7d4be4(0xa12)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x4ad242 = _0xc66f0[_0x7d4be4(0x635)][0x0]; if (_0x4ad242[_0x7d4be4(0xe4)][_0x7d4be4(0x8ab)] < 0x2) { _0x2a6895[_0x7d4be4(0xa12)]('错误：第一个好友圈\x20\x22' + _0x4ad242[_0x7d4be4(0x4a8)] + _0x7d4be4(0x6e5)); return; } const _0x57741f = { 'id': _0x7d4be4(0xa5b) + _0x74ea9b[_0x7d4be4(0x300)](), 'authorType': _0x7d4be4(0x3b7), 'authorId': _0x4ad242[_0x7d4be4(0xe4)][0x0], 'content': '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'timestamp': _0x6c8481['now'](), 'likes': [_0x4ad242[_0x7d4be4(0xe4)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x22d0a2[_0x7d4be4(0x300)](), 'authorId': _0x4ad242['memberCharacterIds'][0x1], 'content': _0x7d4be4(0x84f) }] }; _0x4ad242['posts'][_0x7d4be4(0x9f2)](_0x57741f), _0x48868d(), _0x26c8c0['log']('成功向好友圈\x20\x22' + _0x4ad242[_0x7d4be4(0x4a8)] + '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'), _0x1a4948(_0x7d4be4(0x808)); } else _0x43967d = new Date(Math[_0x7d4be4(0x477)]['apply'](null, _0x5802c8)), _0x41f0cf = _0x43967d[_0x7d4be4(0x926)]('zh-CN', { 'dateStyle': _0x7d4be4(0xa31), 'timeStyle': 'short' }); } } } catch (_0x4164ce) { console['warn'](_0x7d4be4(0x912), _0x4164ce); } const _0x56f115 = _0x218a8c(_0x33c702); _0x305d8b = _0x7d4be4(0x1de), _0x305d8b += _0x7d4be4(0x369) + _0x1829b5[_0x7d4be4(0x926)](_0x7d4be4(0x223), { 'dateStyle': _0x7d4be4(0x959), 'timeStyle': _0x7d4be4(0x79f) }) + '\x0a'; if (_0x56f115) { const _0x10773c = new Date(_0x56f115['timestamp']), _0x175f5f = _0x2d7f7e(_0x10773c); _0x305d8b += _0x7d4be4(0x170) + _0x175f5f + '\x0a'; const _0x233983 = _0x1829b5[_0x7d4be4(0x24e)](), _0x523606 = _0x10773c[_0x7d4be4(0x24e)](), _0x1b890a = new Date(); _0x1b890a[_0x7d4be4(0x24d)](_0x1829b5[_0x7d4be4(0x1c4)]() - 0x1); const _0x1834d4 = _0x1b890a[_0x7d4be4(0x24e)](); if (_0x233983 === _0x523606) { if ('ThaaN' !== _0x7d4be4(0x6a3)) { const _0x522462 = (_0x1829b5 - _0x10773c) / (0x3e8 * 0x3c); _0x305d8b += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; } else _0x3b5684[_0x7d4be4(0x488)] = _0x5b5a15['meetingViewMode'] === _0x7d4be4(0x2ef) ? 'galgame' : 'novel', _0x6813bd(); } else { if (_0x1834d4 === _0x523606) { if (_0x7d4be4(0x303) === _0x7d4be4(0x6c0)) { const _0xd82960 = _0x4188e0[_0xcad96f[_0x7d4be4(0x8ab)] - 0x1]; (!_0x442ba4 || _0xd82960['timestamp'] > _0x19a67d[_0x7d4be4(0x6cc)]) && (_0x16715e = _0xd82960); } else _0x305d8b += _0x7d4be4(0x14c); } else { const _0x1967f1 = Math[_0x7d4be4(0x2dd)]((_0x1829b5 - _0x10773c) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x305d8b += _0x7d4be4(0xa36) + _0x1967f1 + _0x7d4be4(0x99a); } } } else _0x7d4be4(0x842) === 'dfsQR' ? _0x305d8b += _0x7d4be4(0x6eb) : _0x7d8b59 += '-\x20你在“' + _0x4d7875[_0x7d4be4(0xa3c)] + '”买过：“' + _0x3b43e5[_0x7d4be4(0x669)] + _0x7d4be4(0xb1f); let _0x38c994 = '', _0x4bb59c = ''; _0x2d306b ? (_0x38c994 = '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', _0x4bb59c = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a' + _0x2d306b + _0x7d4be4(0x3c1)) : _0x38c994 = _0x7d4be4(0x5cd); const _0x415bc2 = { 'gallery': _0x7d4be4(0x866), 'whispers': _0x7d4be4(0xaf2), 'abyss': _0x7d4be4(0x148), 'fragments': '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'bites': _0x7d4be4(0x74a), 'wants': _0x7d4be4(0x794), 'footprints': _0x7d4be4(0x2d7) }, _0x3674e4 = _0x415bc2[_0x512092] || _0x7d4be4(0x1f7) + _0x512092 + _0x7d4be4(0x9ea); let _0x3257cb = ''; if (_0xd38adb['linkedWorldBookIds'] && _0xd38adb[_0x7d4be4(0x12e)]['length'] > 0x0) { const _0x56ac52 = _0xd38adb[_0x7d4be4(0x12e)][_0x7d4be4(0x592)](_0x24b56b => _0x21e37d[_0x7d4be4(0x584)][_0x7d4be4(0x354)](_0x590d2d => _0x590d2d['id'] === _0x24b56b))[_0x7d4be4(0x4b7)](Boolean)['map'](_0x3319e8 => _0x7d4be4(0x73e) + _0x3319e8[_0x7d4be4(0x4a8)] + '\x0a' + _0x3319e8[_0x7d4be4(0xaf8)])[_0x7d4be4(0x2c2)](''); _0x56ac52 && (_0x3257cb = _0x7d4be4(0x383) + _0x56ac52); } const _0x3470d1 = '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“' + _0xd38adb[_0x7d4be4(0x4a8)] + _0x7d4be4(0x78f) + _0xd38adb[_0x7d4be4(0x4a8)] + _0x7d4be4(0x350) + _0x2b54de['name'] + _0x7d4be4(0x9ca) + _0x41f0cf + '\x0a-\x20当前精确时间:\x20' + _0x1829b5[_0x7d4be4(0x926)](_0x7d4be4(0x223), { 'dateStyle': _0x7d4be4(0x959), 'timeStyle': _0x7d4be4(0x79f) }) + _0x7d4be4(0x3cf) + _0xd38adb[_0x7d4be4(0x4a8)] + _0x7d4be4(0x80c) + _0xd38adb['persona'] + '\x0a' + _0x3257cb + _0x7d4be4(0x5b9) + _0x2b54de[_0x7d4be4(0x4a8)] + _0x7d4be4(0x80c) + _0x2b54de[_0x7d4be4(0x87d)] + _0x7d4be4(0xa55) + _0x57f21a + '\x0a' + _0x4bb59c + '\x0a\x0a#\x20当前任务指令\x0a' + _0x38c994 + '\x0a' + _0x3674e4 + _0x7d4be4(0x5fb), _0x3bb2b0 = [{ 'role': _0x7d4be4(0x707), 'content': _0x3470d1 }]; _0x3bb2b0['push']({ 'role': _0x7d4be4(0x1a8), 'content': '请根据以上所有规则和资料，开始生成内容。' }); const _0x5eaafa = await _0xa3cec0(_0x3bb2b0, { 'json': !![] }); return _0x5eaafa; } async function _0x33e769(_0x519164) { const _0x48fefc = _0x4a89cb; if (_0x48fefc(0x3c4) !== _0x48fefc(0x17c)) { const _0x47ce08 = _0xe97381(_0x519164); if (!_0x47ce08) throw new Error('找不到角色。'); _0x171a38(!![], _0x48fefc(0x4fe)); const _0x4b37f3 = [_0x48fefc(0xb1d), _0x48fefc(0x843), _0x48fefc(0xb0f), _0x48fefc(0x320), _0x48fefc(0x57f), _0x48fefc(0x583), 'footprints']; let _0x37f6d1 = {}; await Promise[_0x48fefc(0x7b0)](_0x4b37f3['map'](async _0x38b7dd => { const _0x4a719c = _0x48fefc, _0xb48837 = _0x4a719c(0x888) + _0x519164 + '_' + _0x38b7dd, _0x28a294 = await _0x157f8d(_0xb48837); if (_0x28a294) { if (_0x4a719c(0x2e8) !== 'LxSrF') try { _0x37f6d1[_0x38b7dd] = JSON['parse'](_0x28a294); } catch (_0x450fad) { } else _0x45122b = _0x301bcd[_0x4a719c(0x4a8)] || '我', _0x210480 = _0x4a719c(0x65d); } })); if (Object[_0x48fefc(0x2fe)](_0x37f6d1)[_0x48fefc(0x8ab)] === 0x0) return 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。'; const _0x16e466 = _0x48fefc(0x9db) + _0x47ce08[_0x48fefc(0x4a8)] + _0x48fefc(0x3b1), _0x3faf5c = [{ 'role': _0x48fefc(0x707), 'content': _0x16e466 }, { 'role': 'user', 'content': JSON[_0x48fefc(0x41f)](_0x37f6d1, null, 0x2) }]; _0x171a38(!![], _0x48fefc(0x2a9)); const _0x33841e = await _0xa3cec0(_0x3faf5c); return _0x33841e || _0x48fefc(0x982); } else _0x56d9d8 += _0x1dfd91['parse'](_0x392a4b)[_0x48fefc(0x765)][0x0][_0x48fefc(0xaf8)][_0x48fefc(0xa43)][0x0]['text']; } async function _0x33e769(_0x405d3d) { const _0x3758c0 = _0x4a89cb; if ('LXscG' !== 'qIVcZ') { const _0x5b334b = _0xe97381(_0x405d3d); if (!_0x5b334b) throw new Error('找不到角色。'); try { _0x171a38(!![], _0x3758c0(0x4fe)); const _0x33d338 = [_0x3758c0(0xb1d), _0x3758c0(0x843), _0x3758c0(0xb0f), _0x3758c0(0x320), _0x3758c0(0x57f), _0x3758c0(0x583), _0x3758c0(0x53e)]; let _0x238755 = {}; await Promise[_0x3758c0(0x7b0)](_0x33d338[_0x3758c0(0x592)](async _0x4e17e1 => { const _0x3eeac6 = _0x3758c0, _0x5c9924 = _0x3eeac6(0x888) + _0x405d3d + '_' + _0x4e17e1, _0x409cc2 = await _0x157f8d(_0x5c9924); if (_0x409cc2) { if (_0x3eeac6(0x59d) !== 'JOpNV') _0x41928d[_0x3eeac6(0xaa9)] = _0x50c1ae, _0xe84235 = !![]; else try { _0x238755[_0x4e17e1] = JSON[_0x3eeac6(0x16b)](_0x409cc2); } catch (_0x1ce72a) { } } })); if (Object['keys'](_0x238755)[_0x3758c0(0x8ab)] === 0x0) return _0x3758c0(0x2a4); const _0x50a00d = _0x3758c0(0x9db) + _0x5b334b[_0x3758c0(0x4a8)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x569781 = [{ 'role': _0x3758c0(0x707), 'content': _0x50a00d }, { 'role': 'user', 'content': JSON['stringify'](_0x238755, null, 0x2) }]; _0x171a38(!![], _0x3758c0(0x2a9)); const _0x1fc93c = await _0xa3cec0(_0x569781); return _0x1fc93c || _0x3758c0(0x982); } finally { if (_0x3758c0(0x96e) !== _0x3758c0(0x96e)) { const _0x22a3f2 = _0x1198e3(_0x5dd292[_0x3758c0(0xad8)][0x0]); return _0x22a3f2?.[_0x3758c0(0x4a8)] || 'AI'; } else _0x171a38(![]); } } else { const _0x47777d = _0x36531f(_0x174f06['dataset'][_0x3758c0(0x5b1)], 0xa); !_0x395392(_0x47777d) && _0x960f93(_0x47777d); } } document[_0x4a89cb(0x2fc)](_0x4a89cb(0x360))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => _0x43c005(_0x4a89cb(0xa20), _0x4a89cb(0x776))), document[_0x4a89cb(0x2fc)](_0x4a89cb(0x1d8))[_0x4a89cb(0xe9)](_0x4a89cb(0x6f4), () => { const _0x1d54ad = _0x4a89cb; _0x1d54ad(0x302) === _0x1d54ad(0x6b0) ? _0x4567c1(_0x42c37a['id']) : (document[_0x1d54ad(0x2fc)](_0x1d54ad(0x49e))[_0x1d54ad(0xab9)]['display'] = _0x1d54ad(0x1ea), _0x43c005(_0x1d54ad(0x776), _0x1d54ad(0x918))); }), _0x54b26e(); }); async function _0x46f89f() { const _0x187743 = _0x2427d6; console['log'](_0x187743(0x26d)), console[_0x187743(0x172)]('哼，正在开始净化你那被污染的聊天记录...'); async function _0x12d7b6(_0x3cf578, _0x52a260) { const _0xec2b37 = _0x187743; if (_0xec2b37(0x509) !== 'DnDKy') _0x163ea3(_0x2d43e7); else { const _0x2c18f5 = await _0x5e9bb5; return new Promise((_0x30bdb3, _0x36dc0c) => { const _0x4e0fd0 = _0xec2b37, _0x1c872d = _0x2c18f5[_0x4e0fd0(0x130)](_0x4f35d5, _0x4e0fd0(0xb24)), _0x2a8bf8 = _0x1c872d[_0x4e0fd0(0x50c)](_0x4f35d5), _0xd917eb = _0x2a8bf8['put']({ 'id': _0x3cf578, 'blob': _0x52a260 }); _0xd917eb[_0x4e0fd0(0x854)] = () => _0x30bdb3(_0xd917eb['result']), _0xd917eb[_0x4e0fd0(0x4ef)] = () => _0x36dc0c(_0xd917eb[_0x4e0fd0(0xa12)]); }); } } async function _0x7843a9(_0x5a365d) { const _0xb92d55 = await _0x5e9bb5; return new Promise((_0x43ad30, _0x5c68d3) => { const _0x2dc6ce = _0x1826; if (_0x2dc6ce(0x9ed) === _0x2dc6ce(0x9ed)) { const _0x123823 = _0xb92d55[_0x2dc6ce(0x130)](_0x150da7, _0x2dc6ce(0x99b)), _0x2b555a = _0x123823[_0x2dc6ce(0x50c)](_0x150da7), _0x4fc129 = _0x2b555a[_0x2dc6ce(0x3fa)](_0x5a365d); _0x4fc129[_0x2dc6ce(0x854)] = () => _0x43ad30(_0x4fc129[_0x2dc6ce(0x18a)] ? _0x4fc129[_0x2dc6ce(0x18a)]['data'] : null), _0x4fc129[_0x2dc6ce(0x4ef)] = () => _0x5c68d3(_0x4fc129[_0x2dc6ce(0xa12)]); } else return _0x5d2296(_0x2dc6ce(0x840)), ![]; }); } async function _0x10ec8a(_0x1df3eb, _0x11ec04) { const _0x335a34 = await _0x5e9bb5; return new Promise((_0x4192bd, _0x4911ee) => { const _0x1451fb = _0x1826; if (_0x1451fb(0x839) !== _0x1451fb(0xa66)) { const _0x327e38 = _0x335a34[_0x1451fb(0x130)](_0x150da7, _0x1451fb(0xb24)), _0x20159d = _0x327e38[_0x1451fb(0x50c)](_0x150da7), _0x55b6e0 = _0x20159d['put']({ 'id': _0x1df3eb, 'data': _0x11ec04 }); _0x55b6e0[_0x1451fb(0x854)] = () => _0x4192bd(), _0x55b6e0[_0x1451fb(0x4ef)] = () => _0x4911ee(_0x55b6e0['error']); } else { const _0x1d793e = _0x2635d9[_0x1451fb(0x16b)](_0x54bd92['getItem'](_0x1451fb(0x2d3)) || '{}'), _0x1347c8 = { ..._0x1d793e, ..._0x184ed9 }; _0x3be2fd[_0x1451fb(0x25f)](_0x1451fb(0x2d3), _0x48df80[_0x1451fb(0x41f)](_0x1347c8)); } }); } function _0x22534d(_0x306825) { const _0x1f3c5f = _0x187743; return fetch(_0x306825)['then'](_0x9fca68 => _0x9fca68[_0x1f3c5f(0xad4)]()); } let _0x540133 = 0x0; for (let _0x78072d = 0x0; _0x78072d < localStorage[_0x187743(0x8ab)]; _0x78072d++) { if (_0x187743(0x2c7) === _0x187743(0x2c7)) { const _0x3c1f42 = localStorage[_0x187743(0x70c)](_0x78072d); if (_0x3c1f42 && _0x3c1f42[_0x187743(0x835)]('chatHistory_')) { if ('rOxbM' !== 'rOxbM') _0x7952f5 += _0x187743(0x6eb); else { let _0x223796, _0x28fca3 = ![]; try { if (_0x187743(0xb22) === _0x187743(0x8ca)) return { 'type': _0x187743(0x529), 'songName': _0x197438[0x1][_0x187743(0x1b5)](), 'artist': _0x5a9471[0x2][_0x187743(0x1b5)]() }; else { _0x223796 = JSON[_0x187743(0x16b)](localStorage[_0x187743(0x7b7)](_0x3c1f42)); if (!Array[_0x187743(0x684)](_0x223796)) continue; for (const _0x191ff5 of _0x223796) { if (_0x191ff5 && _0x191ff5[_0x187743(0xaa9)] && _0x191ff5[_0x187743(0xaa9)]['startsWith'](_0x187743(0x7b9))) { const _0x151182 = await _0x22534d(_0x191ff5['image']), _0x201873 = _0x187743(0x5fc) + Date[_0x187743(0x300)]() + '_' + Math['random'](); await _0x12d7b6(_0x201873, _0x151182), _0x191ff5['imageId'] = _0x201873, delete _0x191ff5[_0x187743(0xaa9)], _0x28fca3 = !![], _0x540133++; } } _0x28fca3 && ('ZbRBS' !== 'ZbRBS' ? _0xa6bc24[_0x187743(0xab9)]['display'] = _0x187743(0x1ea) : localStorage[_0x187743(0x25f)](_0x3c1f42, JSON[_0x187743(0x41f)](_0x223796))); } } catch (_0x392c79) { console[_0x187743(0xa12)](_0x187743(0x660) + _0x3c1f42 + _0x187743(0x6e1), _0x392c79); continue; } } } } else _0xe03db8 = _0x1c5217[_0x187743(0x16b)](_0x333c2b); } console[_0x187743(0x172)](_0x187743(0x112) + _0x540133 + _0x187743(0xb25)); } async function _0x4a8fc3() { const _0x19d803 = _0x2427d6; console[_0x19d803(0x172)]('---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---'), console[_0x19d803(0x172)](_0x19d803(0xabb)); async function _0x5a05ec(_0x19fdc5, _0x490c7b) { const _0x2aef22 = await _0x5e9bb5; return new Promise((_0x525b49, _0x2c3231) => { const _0x264c9f = _0x1826, _0x172332 = _0x2aef22[_0x264c9f(0x130)](_0x264c9f(0x14f), _0x264c9f(0xb24)), _0xb359aa = _0x172332['objectStore'](_0x264c9f(0x14f)), _0x965a04 = _0xb359aa[_0x264c9f(0xac8)]({ 'id': _0x19fdc5, 'blob': _0x490c7b }); _0x965a04[_0x264c9f(0x854)] = () => _0x525b49(_0x965a04[_0x264c9f(0x18a)]), _0x965a04['onerror'] = () => _0x2c3231(_0x965a04[_0x264c9f(0xa12)]); }); } function _0x38ef3e(_0x1ed295) { const _0x5ee705 = _0x19d803; return _0x5ee705(0xa61) !== _0x5ee705(0x5ee) ? fetch(_0x1ed295)['then'](_0x46d3a8 => _0x46d3a8['blob']()) : (_0x44b79e[_0x5ee705(0x172)]('找不到旧的存档，无需救援。'), 0x0); } let _0x25d5bd = 0x0, _0x4fea3d = ![]; try { const _0x4ec5dc = localStorage[_0x19d803(0x7b7)](_0x19d803(0x689)); if (!_0x4ec5dc) { console['log']('好友圈档案柜是空的，无需净化。'); return; } const _0x122ac1 = JSON[_0x19d803(0x16b)](_0x4ec5dc); if (!_0x122ac1[_0x19d803(0x635)] || !Array[_0x19d803(0x684)](_0x122ac1[_0x19d803(0x635)])) return; for (const _0xe8c5d4 of _0x122ac1[_0x19d803(0x635)]) { if (_0x19d803(0x9a3) !== _0x19d803(0x6b2)) { if (_0xe8c5d4['posts'] && Array[_0x19d803(0x684)](_0xe8c5d4[_0x19d803(0x8e6)])) for (const _0x1fd8f5 of _0xe8c5d4[_0x19d803(0x8e6)]) { if (_0x1fd8f5 && _0x1fd8f5['image'] && _0x1fd8f5[_0x19d803(0xaa9)]['startsWith'](_0x19d803(0x7b9))) { console['log'](_0x19d803(0x80b) + _0xe8c5d4[_0x19d803(0x4a8)] + _0x19d803(0x80a)); const _0x3bf0b4 = await _0x38ef3e(_0x1fd8f5[_0x19d803(0xaa9)]), _0x36d12f = 'post_image_migrated_' + Date[_0x19d803(0x300)]() + '_' + Math[_0x19d803(0x53f)](); await _0x5a05ec(_0x36d12f, _0x3bf0b4), _0x1fd8f5[_0x19d803(0x803)] = _0x36d12f, delete _0x1fd8f5[_0x19d803(0xaa9)], _0x4fea3d = !![], _0x25d5bd++; } } } else _0x35f41b[_0x19d803(0x402)]['remove'](_0x19d803(0x393)), _0x18689b = null; } _0x4fea3d && (console['log'](_0x19d803(0x177)), localStorage[_0x19d803(0x25f)](_0x19d803(0x689), JSON['stringify'](_0x122ac1))); } catch (_0x5b741c) { console[_0x19d803(0xa12)](_0x19d803(0x2b6), _0x5b741c); } return console['log']('---\x20好友圈净化仪式完成\x20---'), console['log'](_0x19d803(0x8aa) + _0x25d5bd + '\x20张旧的动态图片。'), _0x25d5bd; } async function _0x58d003() { const _0x436c53 = _0x2427d6; console[_0x436c53(0x172)](_0x436c53(0xaa4)), console[_0x436c53(0x172)](_0x436c53(0x135)); let _0x36590c = 0x0, _0x558cbc = ![]; try { const _0x37fef8 = localStorage['getItem']('appState'); if (!_0x37fef8) return console[_0x436c53(0x172)](_0x436c53(0x957)), 0x0; for (let _0x2f4504 = 0x0; _0x2f4504 < localStorage[_0x436c53(0x8ab)]; _0x2f4504++) { const _0xe389c3 = localStorage[_0x436c53(0x70c)](_0x2f4504); if (_0xe389c3 && _0xe389c3[_0x436c53(0x835)](_0x436c53(0xacb))) { let _0x50f8e0, _0x53f04f = ![]; try { if ('HHWSK' === 'oebfe') _0x452afc['log'](_0x436c53(0xa08)), _0x5da1fd[_0x436c53(0x7d8)]('music_library', { 'keyPath': 'id' }); else { _0x50f8e0 = JSON[_0x436c53(0x16b)](localStorage[_0x436c53(0x7b7)](_0xe389c3)); if (!Array[_0x436c53(0x684)](_0x50f8e0)) continue; for (const _0x4f0176 of _0x50f8e0) { if (_0x436c53(0x2e1) !== _0x436c53(0x2e1)) { const _0x28c32f = _0x4e0836 ?? _0x9ddc0d[_0x436c53(0x91b)][_0x436c53(0x1b5)](); if (_0x28c32f === '' || !_0x1f0baa[_0x436c53(0x272)]) return; const _0x42f558 = _0x20272a[_0x436c53(0x9d2)](_0x436c53(0x9c6)), _0x301bae = _0x42f558['id'] === 'meeting-view-screen', _0x5e9ba5 = { 'role': 'user', 'content': _0x28c32f, 'timestamp': _0x27ace1[_0x436c53(0x300)](), 'isOffline': _0x301bae }; _0x4e3369[_0x436c53(0x564)] && (_0x5e9ba5[_0x436c53(0xad7)] = { ..._0x3dc1e0['activeQuote'] }), _0x3616ad['conversationHistory'][_0x436c53(0x9f2)](_0x5e9ba5), _0x4cfcd4(), _0x5a5a25(), !_0x4fdf9f && (_0x2d6f72[_0x436c53(0x91b)] = ''), _0x469624(); } else { if (_0x4f0176 && (_0x4f0176[_0x436c53(0x497)] === _0x436c53(0x529) || _0x4f0176[_0x436c53(0x497)] === _0x436c53(0x50e)) && _0x4f0176['coverUrl'] && _0x4f0176[_0x436c53(0xab6)][_0x436c53(0x835)]('data:image')) { const _0x507665 = await _0x32101d(_0x4f0176[_0x436c53(0xab6)]), _0x396402 = _0x436c53(0xab5) + Date['now']() + '_' + Math[_0x436c53(0x53f)](); await _0x24ce6b(_0x396402, _0x507665), _0x4f0176[_0x436c53(0x6d7)] = _0x396402, delete _0x4f0176[_0x436c53(0xab6)], _0x53f04f = !![], _0x36590c++; } } } _0x53f04f && localStorage[_0x436c53(0x25f)](_0xe389c3, JSON[_0x436c53(0x41f)](_0x50f8e0)); } } catch (_0x135f50) { if (_0x436c53(0x702) !== _0x436c53(0x702)) _0x4977a4[_0x436c53(0x5f4)] = ![], _0x45c210(![]); else { console[_0x436c53(0xa12)](_0x436c53(0x660) + _0xe389c3 + _0x436c53(0x155), _0x135f50); continue; } } } } } catch (_0x3697d5) { console[_0x436c53(0xa12)](_0x436c53(0xb21), _0x3697d5); } return console['log'](_0x436c53(0x674)), console[_0x436c53(0x172)](_0x436c53(0x8aa) + _0x36590c + _0x436c53(0x470)), _0x36590c; } function _0x60eb() { const _0x235140 = ['zJyyX', 'eEmMo', 'add-user-profile-button', '100%', 'ExRll', '.custom-multiselect', 'tzdeE', 'src', 'modal-ok', 'color', '正在升级音乐卡片数据...', 'day-dot', 'diary-next-button', 'api-watermark', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'open', 'height', 'friend-circle-edit-name', '表情包已保存！正在刷新应用...', '.widget-info\x20>\x20div', 'Creating\x20object\x20store:\x20music_library', '-\x20**对话状态提示**:\x20你们已经有\x20', 'clientY', 'mlIHl', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', '吃薯条', 'post_user_', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'calendar-screen', 'back-to-home-from-settings', 'error', 'hxJGg', 'igdHL', 'fHYXc', 'wallpaper_main', 'sort', 'JheUB', 'copy-summary-button', '群聊“', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', '点击选择\x20info.txt', 'AbortError', '干劲满满', '批量生成动态失败:\x20', 'home', 'char-avatar-frame-url', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'kUgJa', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'block', '--primary-hue', 'music-post', '兼容模式成功，已将\x20', 'api-provider', '错误：找不到签署契约的地方。', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'xXGNb', 'undefined', 'QieZL', '救援头像时出错:', 'clear-feed-button', 'medium', 'VTjOR', 'PBxIY', 'gXjzY', 'TAUvq', '-\x20**状态提示**:\x20你已经有\x20', 'concat', 'widget_card_2', '<div\x20class=\x22snoop-avatar\x22>', '[sticker:', '在你那乱七八糟的文本里没找到“歌名”！', 'store_name', 'MJHLt', 'sprite-slider-y', 'noir_migration_music_v1_complete', 'IzUVT', '大家好像不知道该怎么回复...', '哼，这不是图片，你想让我压缩什么？', 'parts', 'eVqae', 'default', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'recipientId', 'musicLibrary', 'ADaYO', '错误：第一个好友圈\x20\x22', 'contactName', 'UJlMi', 'read', '<div\x20class=\x22post-likes\x22>', 'span', 'delete-expense-btn', 'authorType', 'toDataURL', 'postContent', '确定要删除角色“', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'gemini', 'MCzvZ', 'music-widget', 'BUmBm', 'Creating\x20object\x20store:\x20', 'test_post_', '成功向好友圈\x20\x22', 'cSkoa', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', '编辑条目', 'cGaqy', 'OXoEK', 'galgame-sprite-controls', '谁啊我吗', 'card-input', 'area', 'TpRxE', '#bubble-preview-ai', '[AI分享了音乐：', 'accepted', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'api-endpoint', 'pGzcq', 'listen-together-song-list', 'apiSettings', 'jNnuJ', 'displayUrl', '回复\x20', 'horizontal', 'yenML', 'white', 'noir_data_migration_v1_complete', 'has', '解析存档失败，正在重置:', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'stretch', 'zJfab', 'toLocaleDateString', '>>\x20', 'rGSLC', 'TspxU', 'eeczo', 'themeLightness', '”，里面有\x20', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'cPKpG', '交通出行', 'lUNPG', 'char-edit-wallpaper-preview', 'jrsyg', 'jtnJn', 'back-to-diary-list', 'rWkpC', 'shift', 'diary-write-button', ']\x20[', 'Ayyou', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', '\x0a-\x20**当前时间**:\x20', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'filled', 'confirm-altar-upload-button', 'app-settings', ';\x22>', 'important-day-item', '群聊名称不能为空！', '错误：找不到此好友圈绑定的用户！', 'UiyEy', '\x22\x20id=\x22', 'happy', '导入失败了，笨蛋:\x20', '\x20说：“', '\x22\x20已删除。', 'SWHtp', 'outerHTML', 'songName', 'pop', 'cancel', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', '10pHmuhG', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', 'CpWvt', 'GmtDr', 'image', '委屈那我歇了', 'oEAUz', 'ayWgp', '正在准备音乐数据...', '无语但是随便吧', 'lMCEW', 'from', 'today-btn', 'is-today', 'ZlpUW', 'character-edit-title', 'music_cover_migrated_', 'coverUrl', 'wsvnG', 'gHYFA', 'style', 'event-type-todo', '哼，正在净化你那些被污染的好友圈动态...', 'preview_', '\x0a##\x20条目:\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'chat-image-button', 'back-to-home-from-music-library', 'shy', 'upload-font-button', 'iHtPX', 'url(\x27', '总结失败:', 'margin', 'put', 'T00:00:00', 'olIWA', 'chatHistory_', '\x22\x20src=\x22', 'BkKrV', 'removeEventListener', 'ROOew', 'zKQNC', 'znRZZ', '6262736CMmUeJ', 'KnhMQ', 'blob', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'Detected\x20API\x20provider:\x20', 'quotedMessage', 'participantIds', 'theme-lightness-slider', '.load-more-btn', 'transfer-recipient-group', 'spUXy', 'lFJGm', '-\x20**你与', 'uzTsX', 'padding', 'XMDTr', '.todo-item,\x20.important-day-item', 'KngCx', 'world-book-editor-title', 'canplaythrough', 'marginTop', '正在解析备份文件...', 'IcwYP', 'snoop-char-name-header', 'eZhBi', 'AI返回的原始文本:', 'group-settings-bind-user', '#\x20总结失败了，可能是记录太长或太复杂。', 'addTestPost', 'VajHy', 'uwDhh', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', '”聊过天，关于：“', 'lCXFw', 'review', 'nuVJt', 'dCFFc', 'content', 'mmufL', 'codFp', 'characterLastScripts', 'show-chat-view', 'is-playing', 'chat-image-input', 'exec', 'Jojtk', '生成动态失败:', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'card-input-2', 'EuRpF', 'removeItem', '--primary-lightness', 'HygOJ', 'qkdmH', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'api-key', '.snoop-clear-btn', 'group-chat-create-screen', 'save-edit-button', 'choices', 'abyss', 'eventType', 'RPBQS', '\x20条动态...', 'forEach', '-input', 'currentTime', '加载徽章图片失败', 'galgame-text', 'Unknown', 'screenX', 'audio-file-input', 'Tpzuc', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'gallery', '别这样嘛我哭哭', '”。\x0a', 'zkTiH', '净化音乐封面时出错，真是的。', 'Onpqh', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', 'readwrite', '\x20张旧图片。', 'create-group-chat-button', 'tuNAQ', 'closest', '&quot;', 'Qcibo', '欢迎！请先创建一个角色开始聊天。', 'pvhyt', 'GlDfU', 'api-model', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'amount', 'eventContent', 'appIconPosition_app-settings', '</pre>', 'XRHxv', 'NSTDK', 'YnoMg', 'GwEAC', '我是女仆', 'model-dropdown', 'memberCharacterIds', 'THVcO', '编辑角色', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'editing-char-id', 'addEventListener', '正在生成中，请稍候...', '\x0a\x20\x20近期记忆:\x0a', '1358315npvuOP', 'INcRq', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'GZtqe', 'char-edit-bind-user', 'MwedI', 'upload-card-button', 'summary', 'html-module-container', 'Urxzt', ']\x20[sticker:', '点击选择\x20.mp3\x20或\x20.flac', '成功救援并备份了\x20', 'netease', '59%', 'gjpKn', '50%', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', '切，加载播放器状态的时候出错了。', 'wrRtw', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'musicPlaylist', 'edit-delete-char-button', '发现角色\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'galgame-time', 'json_object', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', 'innerHTML', '字体保存失败了，哼:\x20', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', '---\x20救援任务完成\x20---', 'files', 'PERMp', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'character-list', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', '净化完成！总共迁移了\x20', 'textShadow', 'angry', 'split', '歌曲“', '歌名和歌手都不能为空！', '\x20张旧封面。应用即将刷新。', 'borderRadius', 'vXEji', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'EMrCO', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', 'main', 'jnfPm', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '未知联系人', 'GELkA', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'floor', 'chat-get-reply-button', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'modal-text', 'StHHm', 'status', '保存播放器状态失败，真是没用。', 'getAll', 'music-screen', 'linkedWorldBookIds', 'QJttT', 'transaction', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'lt-ui-song-artist', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '哼，正在净化你那些超重的音乐分享记录...', 'PLQYv', '检测到已保存的字体，正在应用...', 'listen-together-modal', 'smooth', '最近的足迹', 'hpGsm', 'CRdGG', 'add-friend-circle-button', 'input_', 'tag', 'snoop-summary-textarea', 'user-post-avatar', '未找到可用模型。', 'sprite-slider-x', 'eoBTf', 'cover', 'huhyx', '\x22\x20的聊天记录已清空。', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'xOptr', 'wXWmG', 'twVqj', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', '#char-edit-avatar-preview\x20+\x20.avatar-frame', '已设为当前用户！', 'images', 'LPNZL', 'global-player-play-pause-btn', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'yCZyf', '这不是一张有效的Noir角色卡。', '\x20时出错，跳过。', '切换聊天时发生异步错误:', 'ceil', 'bubbleCss', 'tBBdi', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '确定要删除这个安排吗？此操作不可撤销。', 'RIyqy', '保存角色失败:', '餐饮美食', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'pre-line', 'save-friend-circle-button', 'path', 'jtZAg', 'user-name', 'center', 'font-input', '.choice-modal-backdrop', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'badge-image', 'jVISu', 'parse', 'xEVQr', 'gbrUS', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', 'settings-screen', '-\x20**你最后一次活动是在**:\x20', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'log', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', 'spriteTransform', 'className', 'QukQB', '好友圈净化完成，正在重新存档...', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', 'FIAeT', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', 'meeting-scene-view', 'csgke', 'jfbzi', 'group-settings-name', 'transfer-modal', 'getMonth', 'style-', 'onmouseout', 'meeting-send-button', 'buvVb', 'musicId', 'backgroundSize', 'img', 'appIconPosition_app-snoop', '(想转账给“', 'result', 'aMuSK', 'cancel-music-input', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'sxePf', '.app-icon', 'AI似乎没有想出任何新动态。', '请求AI更新:\x20', 'EijpM', '.music-post-song-card', 'readAsText', '导入失败:\x20', 'WDkXI', 'OXSiY', 'rFFsI', 'isFromLibrary', '正在写入新数据...', '-\x20你的备忘录里有一条叫“', '获取AI响应失败:', '动态中的音乐搜索失败:', 'world-book-editor-screen', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'customWallpaper', 'calendar', 'upload-wallpaper-button', 'ResBC', '15px', 'editing-friend-circle-id', 'user-post-music-button', 'Qbdth', 'user', '未知歌曲', 'lastIndexOf', '字体更换成功！', 'AI整理失败了，哼:\x20', '</label>\x0a\x20\x20\x20\x20', '还没有我的回应可以重新生成哦。', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', 'ifvcs', 'pWHWU', 'OgNsL', '0.7rem', 'authorId', 'trim', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', '图片处理失败:\x20', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'items', 'aEVHy', 'customStickers', '\x0a##\x20', '歌曲ID', 'CMeiJ', 'dialogue', '-\x20你在“', 'todo-item', '》吗？', ')\x20恢复头像失败:', 'getDate', 'AI返回了无法识别的数据格式。', '好友圈数据升级完成，迁移了\x20', 'indexedDBMusicData', 'postType', '星期二', 'back-to-home-from-world-book', 'var(--text-color-light)', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '徽章已移除。', 'Pljyd', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'today-todo-list', 'entries', 'is-selected', 'DDbuV', 'tXxzP', 'kwcnu', 'yMvLY', '我是垃圾', 'back-to-snoop-list-from-phone', 'PSqPu', 'NoirCustomFont', 'groupChatCreate', 'right', 'end', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', 'padStart', 'gKIEr', '未命名角色', 'meeting-view-screen', 'EsHYp', 'senderId', 'add-event-modal-title', 'APEDb', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'none', 'back-to-chat-list', '1832348iekWSN', 'feed-loader', 'mqYMZ', 'veaTl', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'HYwbi', 'BPylk', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', 'YpoaH', 'option', '1em', '#\x20任务:\x20生成\x20', '</span>:\x20', '.custom-multiselect\x20.select-box', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'JUTwl', 'world-book-edit-name', 'lyrics-file-input', 'wallpaper-input', 'next-month-btn', 'DvWST', 'OCHnV', 'transform', 'editing-user-id', '创建新用户', '创建新角色', 'calendarEvents', 'GLGJg', 'oncomplete', 'YXoxt', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'artist', 'goaJe', '<div\x20class=\x22loader-spinner\x22></div><span>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', '壁纸已更换！', 'sticker', 'ZeMHi', '你好，世界\x20(Hello,\x20World)', '为你骄傲', 'summary-textarea', 'VBetB', '徽章已更换！', 'NrOzr', 'important', 'generativelace.googleapis.com', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'bmHEg', '\x0a#\x20关于你\x20(', 'choice-cancel', 'checked', '</span><span\x20class=\x22unit\x22>天</span>', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'character-edit-screen', 'TfKgx', 'zh-CN', '---\x20开始AI回复流程\x20---', '所有头像已恢复到运行时状态。', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'JMezb', 'bubble-', 'Nvecx', 'parentElement', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'NvMEN', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'loading', '错误：找不到这首作为“信物”的歌。', 'world-book-edit-content', 'GMzDM', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'diary-entry\x20', 'choice-import-character', 'localeCompare', 'appIconPosition_app-music-library', '”的补充信息\x0a', 'char_avatar_', 'home-time', 'world-book-item', 'paused', 'page', '-\x20**状态提示**:\x20这是你和', 'snoop-app-refresh-btn', 'LdgFz', 'sprite-confirm-button', 'display', 'dxloo', 'drawImage', '等你消息', 'meeting-reroll-button', 'sticker-item', '勉强但是好吧', 'qVYzw', 'euINT', 'Ljjwn', 'setDate', 'toDateString', 'sin', 'currentAbortController', 'CrgjU', '”的笔记，内容是：“', 'WHZwO', 'HpzoW', 'back-to-chat-from-group-settings', 'YYqYT', 'group-clear-history', '设置已保存！', 'delete', 'NSgYt', '获取中…', '还没有我的回复可以重新生成哦。', '加载更多聊天记录', 'playableUrl', 'setItem', '.listen-together-song', 'activity_description', 'widget_card', 'IEgNX', 'userProfileList', 'WSWhI', 'ZtivP', 'zCsQN', 'worldBookEditor', 'removeProperty', 'Fetch\x20request\x20was\x20aborted.', 'AQBnu', 'activeFriendCircleId', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', 'diary-entry-input', 'socng', 'pointer', 'jqdzB', 'activeChatId', 'image_url', 'perChatContextLines', 'reset-badge-button', 'keydown', '确定要清空好友圈“', '-\x20你拍过一张照片，内容是：“', 'NoirCharacterCard', '”已存入圣殿。', 'WcNfQ', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'jIBEU', '[用户发送了表情：', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'mousedown', 'calendar-grid', 'MXTli', '交给我吧', 'song_', 'SonbU', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'accountingLedger', 'cCrIg', 'data:', 'scrollHeight', 'HOmka', 'YmQlu', 'header-actions', 'lBXPk', '用户资料已保存！', '已删除。', '）最新写下的日记内容。Ta写的是：\x0a\x20“', 'flex', 'warn', 'sCyVa', 'flvnq', 'quote-message-button', ']\x0a\x0a#\x20角色资料库\x0a', '_blank', '星期六', 'mgiLO', '视奸内容解析失败:', 'transfer-amount-input', 'uoXrX', '（对话结束）', '正在打包数据，请稍候...', '音乐数据升级完成，迁移了\x20', 'tRPtd', 'quoted-message-in-bubble', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'ZWeqY', '至少要选择一个圈内成员！', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', 'comments', '书记官正在奋笔疾书...', 'claude', 'MWEDN', 'bugYD', 'UMAvl', '买新衣服', '群名称已更改为\x22', 'message-bubble-row', '你是一个乐于助人的助手。', '在“一起听”邀请中，净化封面失败:', 'hhXex', 'last_edited', '我很脆弱', '净化好友圈时出错，真是的。', 'user-post-textarea', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', '.char-info-wrapper', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'writeText', 'QPnNR', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '未命名', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'join', 'toLowerCase', 'QIEvr', '群聊至少需要2名成员。', 'endpoint', 'uKVfw', 'friendCircleEdit', 'absFO', 'application/json', 'WEZtQ', 'EhyUv', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'remove-font-button', '<img\x20src=\x22', 'listen-together-backdrop', 'circle_', 'HMSXX', 'badgeState', '未分类', 'sriME', 'readAsDataURL', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'char-name-header', 'noir_migration_fc_v1_complete', 'widget-prev-btn', '无法保存聊天记录。', '默认米白', 'round', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', '出去玩', '已选择\x20', 'WWVcz', '\x22\x20的聊天记录吗？此操作不可撤销。', 'insertBefore', '原始文本:', 'musicWidgetPosition', 'uvDpQ', 'naqpA', 'adWZl', '人情红包', '无标题笔记', 'pKNdR', '总得说点什么吧？', '正在解析音乐灵魂...', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'novel', 'eNFHC', '正在搜索音乐...', '好了，请基于以上所有信息，开始写今天的日记吧。', 'QLAoT', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'JOsqC', 'lxHFj', 'accountingData', 'Bearer\x20', 'indexOf', 'activeMeetingCharId', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', 'getElementById', 'transfer-recipient-select', 'keys', 'gUtmF', 'now', '图片预览失败:\x20', 'PgFkO', 'WUSTZ', 'eowFj', 'QGvYI', '.json', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'rawResponse', 'chat_', 'appendChild', 'beforeend', 'is-exiting-right', '确定要清空群聊\x22', 'DOMContentLoaded', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'alt', '977168VlGsnO', 'LbFSO', 'tBEOE', 'label', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'BbDTw', 'opVyk', 'category', '服务器错误:\x20', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'export-all-data-button', '0.5', 'conversationHistory', 'assistant', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'fragments', 'ANcxf', '--feed-bg-image', 'borderBottom', '正在铭刻字体...', '角色“', 'uYrSI', '薄荷水色', 'live-preview-style', 'iOmwp', 'mFnNA', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'characters', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'userId', 'aBIfw', 'text', 'svg', 'objectStoreNames', 'nXVEg', 'MzpiZ', '\x22\x20data-id=\x22', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'wiZqu', '.diary-entry', 'EGrPc', 'hHqkg', 'ofRoL', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', '无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。', '正在搬运旧卡片...', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.remove-attachment-btn', 'WnIfn', 'ytQtY', '超激动我来了', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '恢复失败了:\x20', 'WUZVE', '\x22\x20class=\x22music-share-cover\x22>', 'elWqU', 'yyefL', 'settings', 'findIndex', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', 'cpwNB', '<div\x20class=\x22post-body\x22>', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'find', '\x20\x0a#\x20当前情景\x0a', 'New\x20request\x20started', 'accounting-content-area', 'eventDate', '保存失败，你的表情包是不是太多了？', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', '加载自定义表情包失败，真是没用。', '\x20//\x20<--\x20哼，加在这里\x0a', 'import-char-input', 'CUSRP', 'LWbjn', 'back-to-home-from-snoop-list', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', 'translateX(-', '】的手机已被重置。', '#group-world-book-checkboxes\x20input:checked', '\x20张旧图片。应用即将刷新。', 'diaries', 'bffMM', 'KiAUF', '-\x20**当前精确时间**:\x20', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', 'expanded', 'EARNZ', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'QXQeY', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'clockPosition', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', '哼，你这字体文件有问题，用不了。', 'HklGR', 'USStS', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'lt-ui-cover-art', 'date', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', '世界书条目已保存！', 'anthropic.com', 'YnKuJ', 'add-event-modal', '动态页背景已移除。', 'target', 'todo-item-small', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'JXYoX', '\x20\x20-\x20角色ID:\x20', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'laLNm', '34%', 'member-selection-item', 'characterId', 'top', 'music-input-modal', 'chat-listen-together-button', 'RQNHM', 'marginBottom', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'insertAdjacentHTML', 'characterName', 'add-world-book-button', 'haQZA', 'show', 'vVHsk', 'min', 'result_page_content', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'music-library-container', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'zizqc', 'kMaae', 'upload-badge-button', 'sad', 'gOLDg', 'back-to-library-from-altar', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'createObjectURL', 'usHLg', 'apply', ']:\x20', '\x20/\x20', 'CvbSc', '.message.user', 'LgtaT', '我正在说话呢，别打岔！', 'sprite-slider-scale', 'touchcancel', 'global-player-next-btn', 'WynRe', 'noir_migration_avatar_v1_complete', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '\x20转账\x20', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'hSxgg', 'Mljqz', '\x0a\x20\x20\x20\x20人设:\x20', 'image/jpeg', '来源：', 'character', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', 'isFinite', ':</span>\x20', 'KxggU', 'firstChild', 'KoPYE', 'QbXjM', '\x20[并分享了歌曲:\x20', 'delete-message-button', '\x0a```', 'remove', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', 'KKvkr', '\x20记录)\x0a', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'uniOl', 'uORwP', 'BWcOX', '\x20个成员', '.selected-options-text', 'save-user-profile-button', '全量导出失败:', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '编辑好友圈', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'appIconPosition_app-diary', 'column', 'wPXjD', 'custom_font_ttf', 'lt-ui-song-title', 'href', 'char-edit-sprite-', 'remark', 'vDdTH', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', '20px', 'character-item', 'QoSSl', '#group-settings-screen\x20.selected-options-text', 'PSKfZ', '缓存命中:\x20', '[AI返回了无法解析的剧本:\x20', 'kFWHD', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', '\x0a#\x20交换日记摘要\x20(你和\x20', ',\x20resetting.', 'EzBOw', 'user-profile-list-screen', '准备群聊API数据时，读取图片失败:', 'add', 'yEELk', 'backgroundImage', 'createElementNS', 'background', 'post_image_', 'UFRaJ', '错误:\x20', '加载卡片图片失败', '记一笔', 'transparent', 'xpAEk', 'DowMo', 'lqZTI', 'AGLqo', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'get', '为角色\x20', 'QnRXQ', 'cos', '1DkYLqO', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'dNKTo', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'classList', 'gap', 'QANpN', 'KxGIq', '净化完成！应用即将重启。', 'ALgUS', '#meeting-view-screen\x20.chat-input-area', 'wvMBS', 'tfenZ', 'MVbiU', 'json', 'sticker-content', '-\x20你记得曾和“', '|||CMD|||', 'scrollIntoView', 'import-all-data-button', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'audio', '-\x20**你们最后一次互动是在**:\x20', 'GwAKK', 'diary-action-modal-', 'accounting-screen', 'appIconPosition_', 'reset-feed-bg-button', 'KlKxV', '[用户发起了听歌邀请:\x20', 'sJKWF', 'aoxAN', '\x20账单', 'stringify', 'message', '</span>', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', '\x0a\x0a#\x20今日消费流水\x0a', 'XAUuS', 'UcCbx', 'uZTOA', 'user-post-attachment-preview', 'LLMkz', 'UmRBj', 'xvkwV', 'chat-screen', 'select', '星期四', 'setMonth', 'group_bg_', 'back-to-home-from-accounting', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', 'play', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'zsQXY', 'NGtaS', 'aySOg', 'kRemw', '说了是摆设啦，笨蛋。', 'galgame-textbox-container', 'touches', 'wb_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', '内容不能为空！', 'getSelection', 'ASYRh', '图标处理失败:\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'npZMV', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '事情好多', 'ssVOL', 'cMjxn', '#world-book-checkboxes-container\x20input:checked', 'auto', '#\x20记录是空的，没什么好总结的。', 'galgame-speaker', 'ceuit', 'close-summary-button', 'backgroundColor', 'toBlob', '\x0a\x0a#\x20用户的动态\x0a', 'generationConfig', '群聊已解散。', '</div></div></div>', 'hEliU', 'xitsP', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'jSWcI', '#ffcc66', 'p[data-history-index]', 'IHYSr', 'cursor', 'user-profile-edit-title', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'snoop-character-list-container', 'home-clock-container', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'app-user-profiles', '的转账', 'avatar-frame', 'values', 'nNjAG', 'TxBDI', 'music-input-song', 'EWRvh', '未知地点', '--custom-font-family', 'smyQn', 'ZDOHO', 'meeting-list-container', 'PsFxu', '已复制到剪贴板！', '\x20张旧的音乐封面。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', '绝对不想', 'ablpG', '正在检查好友圈数据...', 'alignItems', ':\x22\x20或\x22[', 'max', 'JLOay', '2023-06-01', '{charName}', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', 'customFeedWallpaper', 'vRQgP', 'charSelect', 'dUXXF', 'diary-page', 'input:checked', 'boundUserProfileId', 'catch', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', '最后一次确认，真的要清空所有数据吗？', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', '\x0a\x20\x20\x20\x20-\x20世界书[', 'meetingViewMode', 'jCmnH', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'group-bg-input', 'diary-modal-save', '\x20到\x20', 'VLFdd', 'OvpvN', '编辑用户', 'ZPzAy', 'FEoGX', 'charId', 'YkDUh', 'input[type=\x22checkbox\x22]', 'avatar', 'type', 'mgnCZ', 'world-book-checkboxes-container', 'QsTtO', 'badge-input', 'feed', 'music-input-artist', 'snoop-app-view-container', 'save-world-book-button', '#friend-circle-member-selection\x20input:checked', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', 'xiJCy', 'touchend', '\x20.app-icon-img', '生成动态时发生错误:\x20', 'TJrki', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'name', 'widget-play-pause-btn', '好像有动态了...', 'char-edit-avatar-preview', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '啥意思捏', 'xRtXj', 'KZOCA', 'back-to-char-select-from-edit', 'provider', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'editing-world-book-id', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'user-post-image-input', '8px', 'filter', 'onload', 'timeupdate', 'GfTdS', '15px\x2020px', '?word=', '.listen-together-card', 'AXGxm', 'description', '</span><span\x20class=\x22amount\x22>总计:\x20', 'PBOCw', 'user-send-post-button', 'ymomW', 'zqnkL', 'RHMXa', 'TxfiC', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'isPlaying', 'JTHir', 'image/', 'QIBfk', 'lyric-line-', 'friend-circle-list-container', 'tUiMx', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', '确定要恢复这个角色的默认立绘位置吗？', 'FyucD', 'unified-audio-player', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', '备忘录', 'typing-indicator', 'getMinutes', 'group-delete-button', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', 'head', '我来搞定', '新用户\x20', 'query', 'cancel-event-button', 'message-action-backdrop', 'widget_badge', 'BNDDC', 'KRImM', 'YvIKK', 'absolute', 'HdrWK', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'DSZYi', '群聊\x20(', 'char-edit-wallpaper-input', 'EcUQA', 'lOSyH', 'meeting-main-content', 'ketbo', '选择聊天', 'querySelectorAll', 'onerror', 'openai', '#member-select-', '\x0a你只扮演【', 'anthropic', 'JxcaH', '转给\x20', 'bANfu', '29%', 'Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。', '\x0a\x0a#\x20关于群聊参与者“', 'shiftKey', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', 'JKDTI', 'NxbWH', '正在翻阅所有档案...', 'events', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', '上传失败了，笨蛋！\x20', '\x20[并附上了一张图片]', 'meeting-char-name-header', 'event-content-input', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'KIUPh', 'DnDKy', 'reset-card-button-2', 'title', 'objectStore', 'group-bg-preview', 'listen-together-invite', 'toString', 'TqzWC', 'DttIe', 'Wzwzs', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', 'activeUserProfileId', 'YrdUe', 'music-share-card', 'RkQWh', 'pending-post-image-preview', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.bubble-', 'QUQYa', '卡片\x202\x20已更换！', 'add-event-fab', 'custom-stickers-input', 'app-pages-slider', 'clock-color-toggle', 'countdown-timer', 'tCDsr', 'edit-current-circle-button', 'NSjIS', 'disabled', 'width', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'music', 'transfer', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'group-edit-name', '#diary-action-reroll', 'LnXBy', '未知商品', 'save-char-button', '吃你的饭', '\x20|\x20', 'CgNyR', 'group_avatar_', 'signal', 'custom-icon-list-container', 'diaryPressTimer', 'jtfOy', 'modal-mask', 'Ljruw', 'QDOKU', '暂无音乐', 'createElement', 'footprints', 'random', '星期日', 'translate(-50%,\x20-100%)', '导入角色卡失败:', '正在处理图片...', 'chat_group_', '新建好友圈', 'widget-bg-input', 'BNlSZ', 'group-avatar-preview', 'cfnIw', 'TA正在提笔写日记...', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'app-calendar', 'duWHb', 'GIwDQ', '一个人可怜吃饭', '条目名称和内容都不能为空！', '#group-settings-screen\x20.select-box', '角色已保存！', '\x20(ID:\x20', '这个也是摆设，别点了。', 'import-data-input', 'tkfaZ', 'TdUoB', 'high', '\x0a\x20\x20\x20\x20姓名:\x20', 'lwbtD', 'sModY', '<span\x20class=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-send-button', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '分钟前聊过，请注意衔接。', '图片加载失败', 'RZgfF', 'adzWQ', 'activeQuote', '未知艺术家', '纪念日', 'app-wallpaper', 'role', 'history', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'ZJDrI', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '\x22\x20吗？所有聊天记录将被永久删除。', '无法从\x20IndexedDB\x20加载聊天图片:', 'BrjWH', 'code', '<p>格式错误</p>', '近期没有特别安排', 'load-more-btn', 'RaBXr', 'ZdbAz', '&apos;', 'Cfiwz', 'iAQJG', 'eISbe', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '确定要永久清空【', 'UShKY', 'nckFM', 'flatMap', 'bites', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'Gemini\x20stream\x20reading\x20aborted.', 'PXDMJ', 'wants', 'worldBooks', 'listen-together-ui', 'char-edit-css', 'categorized-expenses-list', 'User', '天没动静了。你的角色们应该发起新的问候或话题。', 'FkAml', 'qqNGo', 'RMoej', ',\x20ID:\x20', 'clear', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'xOMbw', 'AMaFD', 'map', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'isAnimatingDiary', '哼，就按你说的办好了。', 'OtsaJ', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', '#a7c7e7', 'koHGf', 'http', 'qHWfx', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'JOpNV', '字体已应用！(Font\x20Applied!)', 'NzMIH', 'snoop-dock', 'bToyq', 'character-settings-button', 'edit-message-button', 'hlFYy', 'Rszwe', 'NFyCG', '未知角色', 'utterance', 'currentDate', 'xKvar', 'thought', 'oImpy', 'widgetBgImage', 'execCommand', '档案已复制到剪贴板！', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'historyIndex', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'setAttribute', 'JSON解析失败\x20(', 'YCOQm', '正在打包“', 'FuaGK', 'Pivfa', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'ryGOs', 'WifJP', '#f2b7c6', 'user-avatar-preview', 'XLHsx', '5px', 'card-image', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'cancel-transfer-button', '.message.ai', '购物消费', 'ICdEr', '.app-icon-img', '.typing-indicator', 'ELocv', 'Failed\x20to\x20plan\x20group\x20replies:', '不高兴撒娇', 'emoji', 'IJMxM', '你的任务是【首次生成】这个应用的内容。', 'meetingView', 'VdAKN', ')，已跳过。这不应该发生，数据库可能已损坏。', 'touchstart', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', '刷新了\x20', 'Vnisf', '这本日记本来就是空的，你还想清空什么？', '喝多了', 'IMgEO', 'visible', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'card-image-2', 'data:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'jUHYq', 'WCXoG', '用户操作中断了\x20AI\x20响应。', '收到的原始、有问题的文本:', 'reduce', 'https://api.vkeys.cn/v2/music/', '<span\x20class=\x22description\x22>', 'time', '.music-post-play-icon,\x20.music-share-play-icon', 'xnKQW', 'AMqBH', '未知用户', 'BBPgi', 'group-world-book-checkboxes', '该角色', 'XMRFh', 'AYoWx', 'yixjp', 'KuPHj', 'back-to-settings-from-user-profile', 'input[name=\x22event-type\x22]:checked', '正在为你切换新的歌曲...', '加载角色\x20', 'isGenerating', 'hpglB', 'bcVJj', '需要至少2个角色才能创建群聊。', 'opacity', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'QNorV', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'chat_image_migrated_', 'diaryList', 'scale', 'ATxBr', 'musicUploadAltar', 'endsWith', '正在连接同步频道...', 'chat-summarize-button', 'calendar-header-title', 'PSMDN', 'pIUFf', '#66b3ff', 'cardState', 'cover_placeholder_', 'chat-message-input', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', '[表情]', 'model', '<span>', 'Enter', '正在解析角色卡...', 'yOZYa', '#\x20发生错误：\x0a', 'cPeZr', 'tiUWJ', 'xnEta', 'Error\x20fetching\x20from\x20', 'no-action-modal', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', 'EjYQi', '”买过：“', 'music-feed-container', 'assign', 'selectedDate', 'font-preview-text', '”已成功导入！', '28%', '请根据以上所有信息，开始分析并返回JSON。', '用户已删除。', 'Aasxb', 'app-diary', 'noir-author-mark', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'HsaXh', 'vEVnL', 'snoop-home-clock', 'vVRcW', '（开始一段新的对话...）', 'version', 'SMEZU', 'EOIhl', 'CXrzC', '加载立绘失败:', '未知餐厅', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'SonRj', 'widget-title', 'friendCircles', 'clvfN', '6386436SbErAt', 'ElJge', 'DVZVb', 'match', 'userProfiles', 'vEjfY', '正在构思中，请稍候...', 'gTBzV', '\x20的私聊', 'gcCPr', 'szhfe', '##\x20', 'group-options-cancel', 'pjgVO', 'rgba(255,255,255,0.2)', 'diary-page-', '\x20个模型。', 'true', '#bubble-preview-user', 'todo-date-title', '全量导入失败:', 'WrkdL', 'char-edit-offline-bg-preview', 'XCbhy', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'gdoem', 'group-chat-member-list', '<input\x20type=\x22checkbox\x22\x20value=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'Gfkhq', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'prev-month-btn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'msg_', '-\x20你曾经搜索过：“', 'todo', 'TqzWb', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'speaker-user', 'group-chat-name', '\x20的遗失头像，正在救援...', '处理\x20', '\x20的图片失败:', 'diary-entries-container', 'LDkOw', 'RmOpJ', 'user-post-image-button', 'friend-circle-edit-screen', 'RXvDG', 'lYCeL', 'item_name', 'mLtCm', 'avatarFrameUrl', '71%', 'widget-cover-art', '.snoop-app-content', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'chatWallpaper', 'DPPHU', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', '卡片已更换！', '---\x20音乐净化仪式完成\x20---', 'UADbK', 'NDytS', 'url', 'summarize-backdrop', 'ddsis', 'eWYsu', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', '\x20的《', 'RoyIk', '一起听歌', 'OVGeO', 'ypPYz', 'NcfTs', 'voeQK', 'cover-file-input', 'isArray', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'app-accounting', 'indexedDBData', 'UhYCU', 'appState', '其他杂项', 'children', 'gpSrH', 'lastTimestamp', 'touchmove', '未知搜索', 'dock', 'uzIAw', 'ended', 'snoop-temp-style', '被萌到', 'gAxRJ', 'phCwV', '保存徽章状态失败', '对不起', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', 'chats', '歌曲名称', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'YXXVL', 'sender', '群聊\x22', '名字不能为空！', 'reload', '#ff9999', 'vQIlO', 'fNLkk', 'yiVNg', '\x0a\x0a#\x20用户资料库\x0a', 'gmTVE', 'getReader', 'TAVgK', '的日记本', 'kFANy', 'aCULQ', 'music-input-backdrop', 'tUpnn', '刚刚发布了一条动态，内容是：“', 'IeyKj', '.no-action-modal', 'MGLZK', 'div', 'yTixJ', 'vjoBL', 'rAawt', 'MqhDU', 'HWwlP', 'pendingPostAttachments', '\x0a\x0a#\x20', '\x20的旧格式数据翻译。', 'preventDefault', 'DkOWS', 'toFixed', 'back-to-home-from-wallpaper', 'nhVIz', 'cjHed', 'ItkOt', '\x0a-\x20**对话状态**:\x20群里在', 'oqnMR', 'CHQBC', 'char_offline_bg_', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'decode', 'charAt', 'AfjdP', '<div', 'timestamp', 'body', 'narrator', '1.4', '浏览器', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', '加载已保存字体失败:', 'SmTvz', 'Qcyyn', 'eqVvY', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'coverId', 'DZqLN', 'bottom', 'isActive', 'altar-slot-info', 'RPjEU', '#c299ff', 'slice', 'hard-reset-button', ']\x20[image]', '\x20时出错:', 'abort', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', 'EJtDC', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'NPcHf', 'char-edit-avatar-input', 'lqULn', 'cmKJY', 'ovChA', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', 'button', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', '\x0a\x20\x20人设:\x20', 'dCnaa', '”吗？此操作不可撤销。', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'click', 'toast', 'pZAAz', 'includes', '\x20添加了新的纪念日：', 'xCCON', 'FilzM', 'lUlNy', '星期三', '.avatar', '真是的，必需的祭品都还没准备好！', '/v1/chat/completions', 'Escape', 'diary-char-name-header', 'kMbWM', 'galgame-sprite', '净化失败了，哼:\x20', 'revokeObjectURL', 'OPAfh', 'system', 'Noir_Backup_', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'user-profile-list-container', '逗你开心', 'key', 'forceWhiteClock', 'fill', 'FWIDQ', 'VZECL', 'friend-circle-member-selection', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', 'url(', '委屈哭', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'appIconPosition_app-wallpaper', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'GZWKD', 'groupSettings', 'getFullYear', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', '#message-anchor', '条目已删除。', '已送达', '[DONE]', 'fqaJF', 'save-custom-stickers-button', '.snoop-chat-item', 'defaultPrevented', 'reply', '</span><div><div\x20class=\x22description\x22>', 'rEpUa', 'dPwwH', 'BoTtj', 'qNYuv', '点击选择\x20.lrc', 'pdTQv', 'uXDUI', 'char_sprite_', 'wgQES', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'some', 'BywOH', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'bzYro', '\x0a\x0a##\x20世界书条目:\x20', 'drvAO', 'OpVEi', '16584363iQvzhz', 'tab-record-expense', 'IATbl', 'likes', '\x0a##\x20世界书条目:\x20', 'dInRa', '<div\x20class=\x22post-comments-container\x22>', '执行好友圈数据净化...', '-preview', '正在清空旧数据...', 'removeChild', '”，在那里“', 'rgba(0,\x200,\x200,\x200.4)', 'info', '请看是我', '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'char-edit-name', 'displayedMessageCount', 'NptPS', 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg', 'Iqekt', 'zOoXy', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', 'sprite-cancel-button', 'PLqNK', 'onclick', 'sUwHt', 'day-number', '休闲娱乐', 'DXwgW', 'getDay', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'hFhyF', '.message-container', 'cardWidgetState', 'mSNPZ', 'ZSgyY', 'HXcUJ', 'music_library', 'btBNu', '</svg>', '\x20之间的私密内容)\x0a', 'candidates', 'home-screen', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'wallpaper', 'mouseup', 'llLED', 'OpenAI\x20API\x20错误:\x20', 'object', '星期五', 'snoop-log-back-btn', 'GTFOd', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', '文件格式不正确，不是一个有效的备份文件。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'SiNKY', 'snoopList', 'user-avatar-frame-url-in-chat', 'DJzmO', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'NeXVR', '确定要从圣殿中永久删除《', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'kXKFf', '确定要删除群聊“', '\x20(分享了歌曲:\x20', 'categorizedExpenses', 'change', 'HSZLT', '-\x20你最近去过：“', 'nUMBX', 'JSON\x20解析失败!\x20错误原因:', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', 'translateX(-50%)', 'message-container', 'tFdVF', 'post-img-', 'newAvatar', 'currentlyPlayingIndex', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'CuCaz', 'nPRpY', 'Ihmwb', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '未知商店', '说了要\x20.ttf\x20文件，你是听不懂吗？', '#ffb366', 'var(--text-color)', 'card-widget', 'QNLhu', 'VcDzg', '--\x20点击选择\x20--', '一拳打爆', 'delete-friend-circle-button', 'short', 'isOffline', 'replaceAll', 'OwZlR', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '好友圈已保存！', '昨天\x20', 'MNhsa', 'stopPropagation', 'MCViN', 'set-active-user-button', 'yuKuW', '复制失败了，哼。', 'music-player-bar', 'quote-preview-text', 'gWuPS', 'quoted-sender', 'all', '好友圈名称不能为空！', 'position', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'iDEfs', '\x20\x20\x20\x20-\x20', 'UONSg', 'getItem', 'qOYUV', 'data:image', 'todo-list', '字体应用失败:', 'AtvXh', 'xMxzc', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'IRtXA', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'onloadend', 'YZCfy', 'wallpaper-screen', 'back-to-meeting-list', 'substring', 'abs', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', '正在执行净化程序...', '正在检查是否有需要救援的旧头像...', '[发送了表情]', 'CthjD', '.page-dot', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'reset-widget-bg-button', 'copy', 'splice', 'char_', 'italic', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'border', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'diaryCurrentPage', 'createObjectStore', 'WbLiP', '在准备API数据时，从IndexedDB读取图片失败:', '有点生气', 'listenTogetherSession', '解析音乐文件失败:', 'char_wallpaper_', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', 'sprite-reset-button', 'setProperty', 'create_event', '至少要保留一个用户。', 'mpdyx', '新角色\x20', 'contains', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'CDati', '/v1beta/models/', '桌面已重置，即将刷新...', '同步已断开。', 'diary-prev-button', 'oDIYU', 'group-avatar-input', 'setHours', 'PHAmG', '的个人专属世界观设定\x0a', 'add-choice-modal', 'documentElement', 'reset-widgets-position-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '保存失败:\x20', 'clientX', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'NGuLx', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', 'toggle', 'home-dock', '今天\x20', 'worldBook', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'oYBCm', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'lgxoG', 'imageId', 'YAML翻译机也无法理解这段梦话。', 'localStorageData', 'listen-together-card', 'jnONh', '测试动态已添加！', 'sender_id', '\x22\x20中发现一张需要净化的图片...', '在好友圈\x20\x22', '\x0a-\x20人设:\x20', '加载壁纸失败:', 'ftDQg', 'oUNhf', 'line', 'backgroundPosition', 'themeHue', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'snoop-phone-header', '.ttf', 'fQFWx', 'context-lines-per-chat', '加载见面背景失败\x20for\x20', 'lUFfV', 'Claude\x20API\x20错误:\x20', '解析AI剧本JSON失败:', 'originalExpenses', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', '2px\x20dashed\x20var(--border-color)', 'galgame-sprite-adjust-ui', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '小时前），可以简单问候一下对方现在的状态。\x0a', 'AqoHA', 'Onpjg', 'hecxF', '\x22\x20class=\x22char-name\x22>', '[AI发送了表情：', 'vertical', 'init', '正在升级聊天数据结构...', '来源：[最活跃]', 'theme-hue-slider', 'zfeQu', '】的日记本已被清空。', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', '小组件背景已更换！', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'fontStyle', 'GGsPv', '请输入新的群名称：', 'diary-input-wrapper', 'startsWith', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'delete-user-profile-button', '找不到角色信息。', 'mIzws', '找不到要清空的聊天记录。', 'ywoKn', 'focus', 'hEfeZ', '</div>\x0a\x20\x20\x20\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '请先在\x22设置\x22中配置你的\x20API\x20信息。', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'dfsQR', 'whispers', 'GneyA', 'xseeJ', 'vofZK', 'app-world-book', 'music-library-screen', 'lCgcC', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', '分钟前', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'NFTyT', '赞同！渲染效果一级棒！', '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'lkcFe', 'restaurant_name', 'onsuccess', 'meetingList', 'nvhLj', 'kLlyX', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'daily-expenses-list', 'author', 'mjZSw', 'galgame-sprite-container', 'choice-create-group', '生成失败:\x20', 'aAYNm', '\x0a\x20\x20相关记忆:\x0a', 'sLHHl', 'galgame-date', 'edit-message-modal', 'friend-circle-title', 'googleapis.com', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'group', 'UuYbR', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'SgdDS', 'KzsqN', 'stcnq', 'export-char-button', 'CHSJz', '生成动态回复失败:', 'activeMeetingScriptQueue', '星期一', '已经生成了今日账单！想看就去“看账本”标签页。', '确定要删除这个条目吗？此操作不可撤销。', 'SvMcr', 'tnquy', '”，但没找到人)', '距离「', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'userProfile', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'persona', 'MKTNC', '\x22>&times;</button></div>', '正在处理...', 'vreYa', 'gAdkt', 'save-event-button', '-\x20你点过一份外卖：“', 'FageF', '\x22>\x20', 'music-widget-card', 'snoop_', 'add-expense-button', 'preferences', 'zcrRM', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'aborted', 'customIcon_', 'QxnGH', 'userAvatarFrameUrl', 'HrRLq', '</span></div>', 'music_cover_', 'appIconPosition_app-accounting', 'eLifn', 'music-library-item', '刷我的卡', 'app-chat', '\x20写道:\x20', 'group-settings-screen', 'chat', 'NiXCl', '猫猫撒娇', 'sprites', 'number', 'is-entering-from-left', 'is-entering-from-right', 'IHuWY', 'songId', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'GBRZv', '{userName}', 'PQhPh', 'back-to-circle-list-from-feed', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '成功净化并迁移了\x20', 'length', 'Noir_FileSystem', '在准备动态回复时，读取图片失败:', 'back-to-world-book-list', 'qOkIl', 'llWfz', '2-digit', 'long', 'taqsC', 'TVUdQ', 'lyrics', 'emotion', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'expense-item', 'galgame', '已经删掉了。', 'activeDiaryCharacterId', '.slot-filename', 'WQyVl', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', '你还没保存这个角色呢，导什么导？', 'then', 'chat_image_', '-\x20[', 'rwamr', 'tftXV', 'sJROx', 'phone-container', '确定要恢复默认字体吗？', '-\x20[动态]\x20', 'onupgradeneeded', 'aJCyo', '\x20个旧头像。', '乐于助人的助手', 'confirm-music-input', 'snoop-app-container', 'OPnhg', 'xgZAm', 'snoop-phone-top-nav', 'chat-send-button', 'alxxy', '<br>', '”...', 'cancel-edit-button', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'rknVp', 'Assistant', 'app-music-library', 'snoop-home-time', '\x20添加...', 'wXNhh', 'FZudV', 'qeaPR', 'back-to-home-from-diary-list', '2627139Ghnvui', '数据结构升级：成功救援了\x20', 'save-group-settings-button', 'wYEke', 'widget-next-btn', 'posts', 'characterEdit', 'IAjvn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '</p>', '清空聊天记录失败。', 'Bhnvb', 'XPqvM', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', 'User\x20cancelled', 'replace', 'normal', 'kLkaP', 'card-widget-2', 'https://xhslink.com/m/5IgC1rniI2I', '动态已清空。', 'yRUhZ', '用户分享音乐失败:', 'VzdrN', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'HXZeV', '20%', 'cardState2', '&alt=sse', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', '群聊「', 'snoop-app-icon', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'kzgNt', 'Kcjao', '今天一笔账都没有，我整理什么？', 'musicPlayerState', '已自动断开与其他人的听歌同步。', 'textContent', 'toLocaleTimeString', '_NoirCard.json', 'group-options-modal', 'GXZZc', '\x0a\x0aINPUT:\x0a', 'app-meeting', 'XsRGv', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'active', '无法解析旧的视奸内容来获取时间戳。', 'add-event-backdrop', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'summarize-modal', 'dIJJz', 'BNVrG', 'snoopPhone', '\x20-\x20', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'value', 'XFnDz', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'lFwFt', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', '60%', 'test', '点击选择\x20.jpg\x20或\x20.png', 'LoKmZ', '正在准备图片数据...', 'toLocaleString', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'dQhVF', 'char-edit-persona', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', '...', '搜索失败:\x20', 'audio-player', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'back-to-home-from-circle-list', 'diaryView', '加载聊天失败:\x20', '购物记录', '确定要删除群聊\x22', 'jYRnH', 'nsIzv', 'beFQF', 'friendCircleList', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'friend-circle-edit-bind-user', 'Gemini\x20API\x20Error:\x20', 'is-exiting-left', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x20\x20具体对话如下：\x0a', 'ZQVce', 'appIconPosition_app-user-profiles', 'is-visible', '.lt-end-session-btn', 'zmiIV', 'home-date', '日记已删除。', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', 'qyqVX', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', '\x20(当前)', '好的，我记住了这些人设和历史。现在我们开始对话。', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', '</div>', 'keHLQ', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'modal-root', '我错了', '?id=', 'location_name', 'sAPqo', '<div\x20class=\x22snoop-main-grid\x22></div>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'app-pages-container', 'fWMSp', '聊天档案柜是空的，无需净化。', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'full', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', 'contact_name', 'confirm-transfer-button', 'Lheuq', 'ZeYVQ', '新建条目', 'JnYag', '在所有地方的最后一次互动是在**:\x20', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'VatWy', 'vLqRD', 'speaker', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '有点无语', 'cancel-listen-together', 'dgtmP', 'widget-artist', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', 'jxmvi', 'calendar-day', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'CDtSJ', 'VpzbC', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'hPIHf', 'onmouseover', 'data', 'dataset', 'input', 'owWjF', '好委屈但是不能哭', 'getHours', 'input[type=\x22checkbox\x22]:checked', 'statusText', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', 'opacity\x200.2s\x20ease-in-out', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'snoop_cache', 'zByrU', 'total_cost', 'POST', '#app-dock-bottom-left\x20#', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '樱花薄粉', '数据导入成功！应用即将刷新...', 'Owtak', 'countdown-title', 'ARILt', 'prepend', '未知表情', 'inline-block', 'IFZJh', '\x20行格式不对，被我无视了。', 'quote-preview-area', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', '#d1d5db', 'diary-get-reply-button', 'pause', 'choice-create-character', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'readonly', 'cost', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'XtIth', 'user_', 'TzhiC', 'snoop-phone-screen', 'SmtmV', 'bkYil', '无描述', 'KMGke', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'group-edit-members', 'chat-view-pane', '很好哦', ')，启动兼容模式...', 'VouAj', 'image/png', '被你撩到', 'TJRmW', '#\x20固定分类列表\x0a[', 'tCWDd', 'Upgrading\x20database\x20to\x20version\x20', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '--widget-cover-image', '位置已重置，正在刷新...', 'string', 'Fbndh', 'tab-view-ledger', 'vGHZP', 'left', '外卖订单', 'kucgR', 'BeYqU', 'upload-feed-bg-button', 'kpCLz', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', 'preview-item', 'feed-bg-input', '.listen-together-accept-btn', 'diary-write-modal', 'flexDirection', 'mjwbS', '.screen.active', '好友圈\x20', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', '10px\x200', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', '”已删除。', 'altar-slot-cover', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', 'scrollTop', 'decorative-badge', 'accounting', 'xRSej', 'querySelector', 'accounting-title', '\x0a-\x20**对话状态**:\x20群里已经有', 'NSwbU', 'Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', '\x0a-\x20你正在为一个名为“', 'user-persona', 'ZUqXt', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'quote-preview-sender', 'kind', 'private', 'qPoae', 'KqEgl', 'pmoqz', 'diary-modal-cancel', 'last_message_preview', 'chat-sticker-panel', 'activeListenSession', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', '我不想工作', 'iWzyf', 'wYZhK', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'OlTpf', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'KAYTm', '当前聊天', '最近没有动态记录。', 'paddingBottom', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'push', 'sprite-adjust-button']; _0x60eb = function () { return _0x235140; }; return _0x60eb(); } async function _0x40fb81() { const _0x49e1c2 = _0x2427d6; console[_0x49e1c2(0x172)](_0x49e1c2(0x422)), console['log'](_0x49e1c2(0x7c9)); let _0x2424f2 = 0x0; try { const _0x86add3 = localStorage[_0x49e1c2(0x7b7)]('appState'); if (!_0x86add3) return console[_0x49e1c2(0x172)]('找不到旧的存档，无需救援。'), 0x0; const _0x3376da = JSON['parse'](_0x86add3); if (!_0x3376da['characters'] || !Array[_0x49e1c2(0x684)](_0x3376da[_0x49e1c2(0x32d)])) return 0x0; for (const _0xc749d0 of _0x3376da['characters']) { if (_0x49e1c2(0x6b8) === 'mWOYh') _0x59c4e9(); else { if (_0xc749d0 && _0xc749d0[_0x49e1c2(0x496)] && _0xc749d0[_0x49e1c2(0x496)]['startsWith'](_0x49e1c2(0x7b9))) { const _0x2d4cc3 = await _0x3bbeae(_0x49e1c2(0x23a) + _0xc749d0['id']); if (!_0x2d4cc3) { console[_0x49e1c2(0x172)](_0x49e1c2(0x103) + _0xc749d0[_0x49e1c2(0x4a8)] + _0x49e1c2(0x65f)); const _0x2d4b10 = await _0x32101d(_0xc749d0[_0x49e1c2(0x496)]); await _0x24ce6b(_0x49e1c2(0x23a) + _0xc749d0['id'], _0x2d4b10), _0x2424f2++; } } } } } catch (_0x5b8457) { console[_0x49e1c2(0xa12)](_0x49e1c2(0xa2f), _0x5b8457); } return console[_0x49e1c2(0x172)](_0x49e1c2(0x10c)), console[_0x49e1c2(0x172)](_0x49e1c2(0xf8) + _0x2424f2 + _0x49e1c2(0x8cb)), _0x2424f2; } function _0x26533f() { const _0x5b9302 = _0x2427d6; if (!_0x21e37d['activeDiaryCharacterId']) { if (_0x5b9302(0x63e) !== _0x5b9302(0x40b)) return _0x21e37d[_0x5b9302(0x63b)][_0x5b9302(0x354)](_0x1975d1 => _0x1975d1['id'] === _0x21e37d[_0x5b9302(0x514)]) || _0x21e37d['userProfiles'][0x0]; else { const _0x2ed04c = (_0x4c1e98[_0x5b9302(0x210)] ?? _0x1ad780[_0x5b9302(0x5cb)] ?? _0x402b19['emote'] ?? _0x110e98[_0x5b9302(0x13f)])?.[_0x5b9302(0x1b5)](); if (_0x2ed04c && _0x1730dc[_0x5b9302(0xa76)](_0x2ed04c)) _0x54d7f8[_0x5b9302(0x4ff)]['push']({ 'senderId': _0x4b519b['id'], 'kind': _0x5b9302(0x210), 'sticker': _0x2ed04c }); else { const _0x332242 = _0x2fc2bc(_0x602a18[_0x5b9302(0xaf8)] ?? _0x597deb[_0x5b9302(0x331)] ?? '')[_0x5b9302(0x1b5)]() || _0x5b9302(0xa3a) + (_0x2ed04c || '未知表情') + ']'; if (_0x332242) _0x208c17[_0x5b9302(0x4ff)][_0x5b9302(0x9f2)]({ 'senderId': _0x319c37['id'], 'kind': 'text', 'content': _0x332242 }); } } } const _0x219b30 = _0x21e37d[_0x5b9302(0x69a)][_0x5b9302(0x354)](_0x5e9437 => _0x5e9437[_0x5b9302(0x497)] === _0x5b9302(0x9de) && _0x5e9437['participantIds'][_0x5b9302(0x6f7)](_0x21e37d[_0x5b9302(0x8bb)])), _0x469db3 = _0x219b30?.[_0x5b9302(0x482)] || _0x21e37d[_0x5b9302(0x514)]; return _0x21e37d['userProfiles'][_0x5b9302(0x354)](_0x3707c4 => _0x3707c4['id'] === _0x469db3) || _0x21e37d[_0x5b9302(0x63b)][0x0]; } function _0x2d7f7e(_0x20011c) { const _0x31ab17 = _0x2427d6, _0x44b358 = new Date(), _0xe776ce = _0x44b358 - _0x20011c, _0x2286ba = Math[_0x31ab17(0x2dd)](_0xe776ce / 0x3e8), _0x125387 = Math[_0x31ab17(0x2dd)](_0x2286ba / 0x3c), _0x735907 = Math[_0x31ab17(0x2dd)](_0x125387 / 0x3c), _0x538d57 = Math[_0x31ab17(0x2dd)](_0x735907 / 0x18), _0x23ac56 = _0x20011c[_0x31ab17(0x909)]('zh-CN', { 'hour': _0x31ab17(0x8b1), 'minute': _0x31ab17(0x8b1) }); if (_0x2286ba < 0x3c) return '刚才'; if (_0x125387 < 0x3c) return _0x125387 + _0x31ab17(0x84b); const _0x23efd5 = _0x44b358['toDateString']() === _0x20011c[_0x31ab17(0x24e)](); if (_0x23efd5) return _0x31ab17(0x7fd) + _0x23ac56; const _0x16c681 = new Date(); _0x16c681['setDate'](_0x44b358[_0x31ab17(0x1c4)]() - 0x1); const _0xfab5cc = _0x16c681[_0x31ab17(0x24e)]() === _0x20011c[_0x31ab17(0x24e)](); if (_0xfab5cc) { if (_0x31ab17(0x59f) !== _0x31ab17(0x59f)) { const _0x513c8a = _0x2c99cc[_0x31ab17(0x2fc)](_0x42d68c); if (_0x513c8a) _0x513c8a['src'] = _0x373a8e['coverUrl']; } else return _0x31ab17(0x7a5) + _0x23ac56; } if (_0x538d57 <= 0x7) { const _0x42af5d = [_0x31ab17(0x540), '星期一', _0x31ab17(0x1c9), _0x31ab17(0x6fc), _0x31ab17(0x42d), _0x31ab17(0x76f), _0x31ab17(0x29a)]; return _0x42af5d[_0x20011c[_0x31ab17(0x759)]()] + '\x20' + _0x23ac56; } return _0x20011c['getFullYear']() + '年' + (_0x20011c[_0x31ab17(0x180)]() + 0x1) + '月' + _0x20011c[_0x31ab17(0x1c4)]() + '日'; } function _0x2210f6(_0x415062, _0x10eeef = 0x320, _0x30c3c8 = 0.8, _0x3f2223 = ![]) { return new Promise((_0x32d755, _0x7fd683) => { const _0x581263 = _0x1826; if (_0x581263(0x636) !== _0x581263(0xb20)) { if (!_0x415062 || !_0x415062[_0x581263(0x497)]['startsWith'](_0x581263(0x4ca))) return _0x7fd683(new Error(_0x581263(0xa42))); const _0x34c275 = new FileReader(); _0x34c275[_0x581263(0x2d6)](_0x415062), _0x34c275['onload'] = _0x300a4b => { const _0x24c44f = _0x581263; if (_0x24c44f(0xaf0) !== _0x24c44f(0x3ad)) { const _0x4d8f3c = new Image(); _0x4d8f3c['src'] = _0x300a4b['target']['result'], _0x4d8f3c[_0x24c44f(0x4b8)] = () => { const _0x5e2aba = _0x24c44f, _0x461803 = document[_0x5e2aba(0x53d)]('canvas'); let _0x2ff750 = _0x4d8f3c[_0x5e2aba(0x526)], _0x1a407a = _0x4d8f3c['height']; if (_0x2ff750 > _0x1a407a) _0x2ff750 > _0x10eeef && (_0x1a407a *= _0x10eeef / _0x2ff750, _0x2ff750 = _0x10eeef); else { if ('AckUA' === _0x5e2aba(0x688)) { _0x310002('已经生成了今日账单！想看就去“看账本”标签页。'); return; } else _0x1a407a > _0x10eeef && (_0x5e2aba(0x4a2) === _0x5e2aba(0x86a) ? _0x5444a0[_0x5e2aba(0x9d2)](_0x5e2aba(0x52d))[_0x5e2aba(0x754)] = () => { _0x43a17d(_0x53571d), _0x1f63e1(); } : (_0x2ff750 *= _0x10eeef / _0x1a407a, _0x1a407a = _0x10eeef)); } _0x461803[_0x5e2aba(0x526)] = _0x2ff750, _0x461803[_0x5e2aba(0xa04)] = _0x1a407a; const _0x43131f = _0x461803['getContext']('2d'); _0x43131f[_0x5e2aba(0x245)](_0x4d8f3c, 0x0, 0x0, _0x2ff750, _0x1a407a); const _0x5da022 = _0x415062['type'] === _0x5e2aba(0x9ac) ? _0x5e2aba(0x9ac) : _0x5e2aba(0x3b5); _0x3f2223 ? _0x461803[_0x5e2aba(0x44f)](_0x3f5402 => { const _0x486c5e = _0x5e2aba; if (_0x3f5402) _0x32d755(_0x3f5402); else { if (_0x486c5e(0x8b4) === _0x486c5e(0x8b4)) _0x7fd683(new Error(_0x486c5e(0x4e5))); else { const _0x488bd8 = _0x4008db[_0x486c5e(0x2fc)](_0x486c5e(0x17b)), _0x82847a = _0x3ec0ee['getElementById']('galgame-view-container'), _0x28fb6a = _0x24b382[_0x486c5e(0x9d2)](_0x486c5e(0x408)); _0x5d5540[_0x486c5e(0x488)] === _0x486c5e(0x8b9) ? (_0x488bd8[_0x486c5e(0xab9)][_0x486c5e(0x243)] = _0x486c5e(0x1ea), _0x82847a[_0x486c5e(0xab9)][_0x486c5e(0x243)] = 'block') : (_0x488bd8['style'][_0x486c5e(0x243)] = _0x486c5e(0xa25), _0x82847a[_0x486c5e(0xab9)][_0x486c5e(0x243)] = 'none'), _0x28fb6a[_0x486c5e(0xab9)][_0x486c5e(0x243)] = _0x486c5e(0xa25); } } }, _0x5da022, _0x30c3c8) : _0x32d755(_0x461803[_0x5e2aba(0xa52)](_0x5da022, _0x30c3c8)); }, _0x4d8f3c[_0x24c44f(0x4ef)] = _0x19d5d5 => _0x7fd683(_0x19d5d5); } else { const _0x5ce364 = _0x2020c8[_0x24c44f(0x32d)]['find'](_0x2789aa => _0x43fd37['participantIds'][_0x24c44f(0x6f7)](_0x2789aa['id']) && _0x2789aa[_0x24c44f(0x4a8)] === _0x4f982f); if (_0x5ce364) _0x7fedea = _0x5ce364['id']; } }, _0x34c275[_0x581263(0x4ef)] = _0x51b558 => _0x7fd683(_0x51b558); } else _0x5e852c[_0x581263(0x175)] = _0x581263(0x6ce), _0x3cd9fc[_0x581263(0xab9)][_0x581263(0x831)] = _0x581263(0x7d3), _0x57177e[_0x581263(0xab9)][_0x581263(0x9fd)] = _0x581263(0x996), _0x1bdbcd[_0x581263(0x109)] = _0x35b6d8; }); } function _0x425503(_0xd00d54) { return new Promise((_0x9b6d83, _0x52a105) => { const _0x4972a7 = _0x1826, _0x45f6af = new FileReader(); _0x45f6af[_0x4972a7(0x7c1)] = () => _0x9b6d83(_0x45f6af[_0x4972a7(0x18a)]), _0x45f6af['onerror'] = _0x52a105, _0x45f6af['readAsDataURL'](_0xd00d54); }); } function _0x425503(_0xbbfa02) { return new Promise((_0x5f5105, _0x1fd3be) => { const _0x2f8d3d = _0x1826, _0x572eb1 = new FileReader(); _0x572eb1[_0x2f8d3d(0x7c1)] = () => _0x5f5105(_0x572eb1['result']), _0x572eb1[_0x2f8d3d(0x4ef)] = _0x1fd3be, _0x572eb1['readAsDataURL'](_0xbbfa02); }); } function _0x26f77f(_0x5edb4d, _0x3bb909, _0x2e7d06) { const _0x27aef1 = _0x2427d6, _0x11a19b = _0x5676f9 => { const _0x52af7b = _0x1826; if (_0x52af7b(0xac4) === _0x52af7b(0xac4)) { if (_0x5676f9['role'] === 'user') return _0x21e37d['userProfile']?.['name'] || 'User'; if (_0x5edb4d[_0x52af7b(0x497)] === 'group') { const _0x50a4ed = _0x5676f9[_0x52af7b(0x1e4)] ? _0x134f5a(_0x5676f9[_0x52af7b(0x1e4)]) : null; return _0x50a4ed?.[_0x52af7b(0x4a8)] || _0x52af7b(0xb18); } else { const _0x3aff8e = _0x134f5a(_0x5edb4d['participantIds'][0x0]); return _0x3aff8e?.['name'] || 'AI'; } } else _0x54a079['error'](_0x52af7b(0x3fb) + _0x3f22eb[_0x52af7b(0x4a8)] + '\x20(' + _0x10c8e5['id'] + ')\x20恢复头像失败:', _0x3bff31); }, _0xad6cac = _0x3bb909[_0x27aef1(0x6de)](-_0x2e7d06), _0x5dab5a = []; for (const _0x500042 of _0xad6cac) { const _0x797dbd = new Date(_0x500042[_0x27aef1(0x6cc)])[_0x27aef1(0x909)](_0x27aef1(0x223), { 'hour': '2-digit', 'minute': _0x27aef1(0x8b1) }); if (_0x500042['content']) { if (_0x27aef1(0x65b) !== 'mkRAZ') _0x5dab5a['push']('[' + _0x797dbd + _0x27aef1(0xa8d) + _0x11a19b(_0x500042) + ']\x20' + String(_0x500042[_0x27aef1(0xaf8)])[_0x27aef1(0x1b5)]()); else { const _0x5e3251 = _0x40b9d5(); if (!_0x5e3251) { _0x3eb792[_0x27aef1(0x908)] = _0x27aef1(0x4ed); return; } if (_0x5e3251[_0x27aef1(0x497)] === 'private') { const _0x886fbe = _0x340510(_0x5e3251[_0x27aef1(0xad8)][0x0]); _0x5ebb76[_0x27aef1(0x908)] = _0x886fbe ? _0x886fbe[_0x27aef1(0x4a8)] : '未知角色'; } else _0x302c9c[_0x27aef1(0x908)] = _0x5e3251['name'] || _0x27aef1(0x4e7) + _0x5e3251[_0x27aef1(0xad8)][_0x27aef1(0x8ab)] + ')'; } } } return _0x5dab5a; } function _0x5e46d2(_0x211f56) { const _0x3208c6 = _0x2427d6; if (_0x211f56[_0x3208c6(0x497)] === _0x3208c6(0x869)) return _0x3208c6(0x8ff) + (_0x211f56[_0x3208c6(0x4a8)] || _0x3208c6(0x2c0)) + '」'; const _0x425d28 = _0x134f5a(_0x211f56[_0x3208c6(0xad8)][0x0]); return '与\x20' + (_0x425d28?.[_0x3208c6(0x4a8)] || _0x3208c6(0x5a7)) + '\x20的私聊'; } function _0x1826(_0x59095e, _0x48f911) { const _0x60eb37 = _0x60eb(); return _0x1826 = function (_0x1826f6, _0x3e4607) { _0x1826f6 = _0x1826f6 - 0xe4; let _0x35a355 = _0x60eb37[_0x1826f6]; return _0x35a355; }, _0x1826(_0x59095e, _0x48f911); } function _0x427c2d(_0x54d19a) { const _0x52e091 = _0x2427d6; try { const _0x43dd22 = localStorage[_0x52e091(0x7b7)](_0x52e091(0xacb) + _0x54d19a), _0x5652d3 = JSON['parse'](_0x43dd22 || '[]'); return Array[_0x52e091(0x684)](_0x5652d3) ? _0x5652d3 : []; } catch { return []; } } function _0x434953(_0x370c80) { const _0x4879c7 = _0x2427d6, _0x207280 = Math['max'](0x1, Number(_0x21e37d[_0x4879c7(0x88a)]?.[_0x4879c7(0x274)] ?? 0x64)), _0x1b908d = _0x21e37d[_0x4879c7(0x69a)][_0x4879c7(0x4b7)](_0x3800f7 => _0x3800f7[_0x4879c7(0xad8)][_0x4879c7(0x6f7)](_0x370c80)), _0x19da18 = _0x1b908d[_0x4879c7(0x592)](_0x27acbc => { const _0x60a64b = _0x4879c7, _0x2a6a37 = _0x427c2d(_0x27acbc['id']), _0x171471 = _0x2a6a37['length'] > 0x0 ? _0x2a6a37[_0x2a6a37[_0x60a64b(0x8ab)] - 0x1] : null; return { 'chat': _0x27acbc, 'history': _0x2a6a37, 'lastTimestamp': _0x171471 ? _0x171471[_0x60a64b(0x6cc)] : 0x0 }; })[_0x4879c7(0x4b7)](_0x4dc5bd => _0x4dc5bd[_0x4879c7(0x569)][_0x4879c7(0x8ab)] > 0x0); _0x19da18[_0x4879c7(0xa17)]((_0x2b0d03, _0x34c78e) => _0x34c78e[_0x4879c7(0x68d)] - _0x2b0d03[_0x4879c7(0x68d)]); const _0x4b620b = [], _0x103c1b = {}; return _0x19da18[_0x4879c7(0xb13)]((_0x734cd, _0x3fe8e1) => { const _0x15f212 = _0x4879c7, _0x3a0c86 = _0x26f77f(_0x734cd['chat'], _0x734cd[_0x15f212(0x569)], _0x207280); if (_0x3a0c86['length'] === 0x0) return; const _0x36bfd2 = _0x3fe8e1 === 0x0 ? _0x15f212(0x82a) : _0x15f212(0x3b6); _0x4b620b[_0x15f212(0x9f2)](_0x15f212(0x642) + _0x36bfd2 + _0x5e46d2(_0x734cd[_0x15f212(0x89b)]) + '\x0a' + _0x3a0c86['join']('\x0a')), _0x103c1b[_0x734cd[_0x15f212(0x89b)]['id']] = _0x3a0c86[_0x15f212(0x8ab)]; }), { 'omniText': _0x4b620b[_0x4879c7(0x2c2)]('\x0a\x0a'), 'usedCounts': _0x103c1b }; } function _0x218a8c(_0x27fbf6) { const _0x4472b6 = _0x2427d6; let _0x2cd285 = null; const _0x3fbb10 = _0x21e37d[_0x4472b6(0x69a)][_0x4472b6(0x4b7)](_0x490cb7 => _0x490cb7[_0x4472b6(0xad8)][_0x4472b6(0x6f7)](_0x27fbf6)); for (const _0x12ca11 of _0x3fbb10) { if (_0x4472b6(0x24b) !== _0x4472b6(0x24b)) _0x2f0fc0(_0x19cde1), _0x772a95 = null; else { const _0x5490fd = _0x427c2d(_0x12ca11['id']); if (_0x5490fd && _0x5490fd['length'] > 0x0) { const _0x153206 = _0x5490fd[_0x5490fd[_0x4472b6(0x8ab)] - 0x1]; (!_0x2cd285 || _0x153206[_0x4472b6(0x6cc)] > _0x2cd285['timestamp']) && (_0x2cd285 = _0x153206); } } } return _0x2cd285; } function _0x179ecd(_0x58038f) { const _0x54c673 = _0x2427d6; if (!_0x58038f || !_0x58038f[_0x54c673(0x6f7)](',')) return _0x58038f; const _0x10912d = _0x58038f[_0x54c673(0x115)](',')[_0x54c673(0x592)](_0xa15922 => _0xa15922['trim']()); return _0x10912d[Math[_0x54c673(0x124)](Math['random']() * _0x10912d[_0x54c673(0x8ab)])]; } function _0x46bf1c(_0x316555) { return new Promise(_0x30cd4a => { const _0xa2a132 = _0x1826; if (_0xa2a132(0x304) !== _0xa2a132(0x304)) _0x57de63[_0xa2a132(0x172)]('好友圈净化完成，正在重新存档...'), _0x2b4d48[_0xa2a132(0x25f)]('appState', _0x3a9250['stringify'](_0xf73792)); else { const _0x15b1fc = document[_0xa2a132(0x2fc)](_0xa2a132(0x94e)), _0x2b60cf = document[_0xa2a132(0x2fc)](_0xa2a132(0x128)), _0x319333 = document[_0xa2a132(0x2fc)](_0xa2a132(0x9fc)), _0x17e0d3 = document[_0xa2a132(0x2fc)]('modal-cancel'), _0x532c5b = document[_0xa2a132(0x2fc)](_0xa2a132(0x539)); _0x2b60cf[_0xa2a132(0x908)] = _0x316555, _0x15b1fc[_0xa2a132(0xab9)][_0xa2a132(0x243)] = _0xa2a132(0x293); const _0x18e0ba = _0x349791 => { const _0x46a524 = _0xa2a132; if ('skvgc' !== _0x46a524(0x613)) _0x15b1fc[_0x46a524(0xab9)][_0x46a524(0x243)] = 'none', _0x319333[_0x46a524(0x754)] = _0x17e0d3[_0x46a524(0x754)] = _0x532c5b[_0x46a524(0x754)] = null, document[_0x46a524(0xace)](_0x46a524(0x276), _0x18d376), _0x30cd4a(_0x349791); else { const _0x561eef = _0x12d5d7[_0x46a524(0x53d)](_0x46a524(0x6b3)); _0x561eef[_0x46a524(0x175)] = _0x46a524(0x96f); const _0x4f845b = _0x4cb4cb + '-' + _0x176ed6(_0x2de426 + 0x1)['padStart'](0x2, '0') + '-' + _0xee3c8d(_0x4a2137)[_0x46a524(0x1df)](0x2, '0'); if (_0x4f845b === _0x58e99d) _0x561eef['classList'][_0x46a524(0x3ea)](_0x46a524(0xab2)); if (_0x4f845b === _0x229deb[_0x46a524(0x61d)]) _0x561eef[_0x46a524(0x402)][_0x46a524(0x3ea)](_0x46a524(0x1d2)); const _0x3bd938 = _0x117e21[_0x46a524(0x53d)](_0x46a524(0xa4f)); _0x3bd938[_0x46a524(0x175)] = 'day-number', _0x3bd938[_0x46a524(0x908)] = _0xffb41d, _0x561eef[_0x46a524(0x30a)](_0x3bd938); const _0x53ca03 = _0x38b51c['calendarEvents'][_0x46a524(0x4b7)](_0x35c3f1 => _0x35c3f1[_0x46a524(0x377)] === _0x4f845b); if (_0x53ca03[_0x46a524(0x8ab)] > 0x0) { const _0x5d5502 = _0x954f9a['createElement']('div'); _0x5d5502[_0x46a524(0x175)] = 'day-dot', _0x561eef[_0x46a524(0x30a)](_0x5d5502); } _0x561eef['addEventListener']('click', () => { const _0x329811 = _0x46a524; _0x556e6b[_0x329811(0x61d)] = _0x4f845b, _0x50442c(); }), _0x3449c8[_0x46a524(0x30a)](_0x561eef); } }, _0x18d376 = _0x36c8ba => { const _0x2ae477 = _0xa2a132; if (_0x36c8ba[_0x2ae477(0x70c)] === _0x2ae477(0x700)) _0x18e0ba(![]); if (_0x36c8ba[_0x2ae477(0x70c)] === _0x2ae477(0x60f)) _0x18e0ba(!![]); }; _0x319333[_0xa2a132(0x754)] = () => _0x18e0ba(!![]), _0x17e0d3[_0xa2a132(0x754)] = () => _0x18e0ba(![]), _0x532c5b[_0xa2a132(0x754)] = () => _0x18e0ba(![]), document[_0xa2a132(0xe9)](_0xa2a132(0x276), _0x18d376); } }); } function _0x2d1f89(_0x34528c) { const _0x38820e = _0x2427d6, _0x4eeb3a = document[_0x38820e(0x2fc)](_0x38820e(0x6f5)); _0x4eeb3a[_0x38820e(0x908)] = _0x34528c, _0x4eeb3a[_0x38820e(0xab9)][_0x38820e(0x243)] = _0x38820e(0xa25); if (_0x2d1f89['_t']) clearTimeout(_0x2d1f89['_t']); _0x2d1f89['_t'] = setTimeout(() => { const _0x4a8959 = _0x38820e; if (_0x4a8959(0x885) !== _0x4a8959(0x885)) { const _0x2c8c96 = _0x50652a[_0x4a8959(0x53d)](_0x4a8959(0x1f5)); _0x2c8c96['value'] = _0x3d13f2['id'], _0x2c8c96[_0x4a8959(0x908)] = _0x174051[_0x4a8959(0x4a8)], _0x14ec9e['appendChild'](_0x2c8c96); } else _0x4eeb3a['style']['display'] = _0x4a8959(0x1ea); }, 0x640); } function _0x2f9821() { const _0x4e7cc3 = _0x2427d6, _0x785184 = document[_0x4e7cc3(0x2fc)](_0x4e7cc3(0x955)), _0x149889 = document[_0x4e7cc3(0x2fc)](_0x4e7cc3(0x51f)), _0x1e8ef6 = document[_0x4e7cc3(0x4ee)](_0x4e7cc3(0x7cc)), _0x5828d8 = document[_0x4e7cc3(0x2fc)](_0x4e7cc3(0x7fc)); let _0x1d2a85 = 0x0; _0x149889[_0x4e7cc3(0xab9)]['width'] = '300%'; const _0x2cad76 = 0x3; function _0x3a7dbf(_0x2f6bab) { const _0x2136c6 = _0x4e7cc3; if (_0x2136c6(0xa33) !== _0x2136c6(0xa33)) return { 'type': _0x2136c6(0x210), 'name': _0x51d479[0x1][_0x2136c6(0x1b5)]() }; else { if (_0x2f6bab < 0x0 || _0x2f6bab >= _0x2cad76) return; _0x149889[_0x2136c6(0xab9)]['transform'] = 'translateX(-' + _0x2f6bab * (0x64 / _0x2cad76) + '%)', _0x1e8ef6[_0x2136c6(0xb13)](_0x3aaac8 => _0x3aaac8[_0x2136c6(0x402)][_0x2136c6(0x3c2)]('active')), _0x1e8ef6[_0x2f6bab][_0x2136c6(0x402)]['add'](_0x2136c6(0x911)), _0x1d2a85 = _0x2f6bab; if (_0x2f6bab === 0x0) _0x5828d8[_0x2136c6(0xab9)][_0x2136c6(0x243)] = _0x2136c6(0x1ea); else { if (_0x2136c6(0x384) !== _0x2136c6(0x891)) _0x5828d8[_0x2136c6(0xab9)][_0x2136c6(0x243)] = _0x2136c6(0x293); else return _0x57577f + _0x2136c6(0x84b); } } } _0x3a7dbf(0x0), _0x1e8ef6[_0x4e7cc3(0xb13)](_0x1c7802 => { const _0x4e2707 = _0x4e7cc3; _0x1c7802[_0x4e2707(0xe9)](_0x4e2707(0x6f4), () => { const _0x59b94b = _0x4e2707; if (_0x59b94b(0x676) !== _0x59b94b(0x5f5)) { const _0x2bc9fc = parseInt(_0x1c7802[_0x59b94b(0x977)]['page'], 0xa); _0x3a7dbf(_0x2bc9fc); } else { const _0x307285 = _0x50120d[_0x59b94b(0x2fc)]('global-player-play-pause-btn'); if (_0x307285) _0x307285[_0x59b94b(0x908)] = '▶'; } }); }); let _0x1a4c55 = 0x0, _0x5c8b6a = 0x0, _0x49c052 = 0x0, _0x4dc010 = ![], _0x4a3c22 = ''; _0x785184[_0x4e7cc3(0xe9)]('touchstart', _0x4b54ce => { const _0x26d5ce = _0x4e7cc3; if (_0x26d5ce(0x465) !== 'YdeZF') _0x1a4c55 = _0x4b54ce[_0x26d5ce(0x43a)][0x0][_0x26d5ce(0x7f7)], _0x5c8b6a = _0x4b54ce['touches'][0x0][_0x26d5ce(0xa0a)], _0x4dc010 = !![], _0x4a3c22 = ''; else { _0x794f4e[_0x26d5ce(0x109)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', _0x3b78ff['innerHTML'] = _0x26d5ce(0x7f5), _0x31219b['getElementById'](_0x26d5ce(0xa8c))[_0x26d5ce(0xe9)]('click', _0x151634), _0x2b1d58['getElementById'](_0x26d5ce(0x997))[_0x26d5ce(0xe9)]('click', _0x4f83de); return; } }, { 'passive': !![] }), _0x785184[_0x4e7cc3(0xe9)](_0x4e7cc3(0x68e), _0xa8706d => { const _0x54f0ef = _0x4e7cc3; if (!_0x4dc010) return; if (_0x4a3c22 === '') { const _0x439951 = _0xa8706d[_0x54f0ef(0x43a)][0x0]['clientX'] - _0x1a4c55, _0x3bbed3 = _0xa8706d[_0x54f0ef(0x43a)][0x0][_0x54f0ef(0xa0a)] - _0x5c8b6a; Math[_0x54f0ef(0x7c6)](_0x439951) > Math[_0x54f0ef(0x7c6)](_0x3bbed3) ? _0x4a3c22 = 'horizontal' : _0x54f0ef(0x11c) === 'EKSVq' ? _0x75a69d(_0x54f0ef(0x3f1) + _0x35564b[_0x54f0ef(0x420)]) : _0x4a3c22 = 'vertical'; } _0x4a3c22 === _0x54f0ef(0xa72) && _0xa8706d[_0x54f0ef(0x6bc)](); }, { 'passive': ![] }), _0x785184[_0x4e7cc3(0xe9)](_0x4e7cc3(0x4a3), _0x46cf4c => { const _0x5d4b00 = _0x4e7cc3; if (!_0x4dc010) return; _0x49c052 = _0x46cf4c['changedTouches'][0x0][_0x5d4b00(0xb19)], _0x4a3c22 === _0x5d4b00(0xa72) && _0x3f9730(), _0x4dc010 = ![]; }); function _0x3f9730() { const _0x52c77f = _0x4e7cc3; if (_0x52c77f(0x4af) !== _0x52c77f(0x7f9)) { const _0x2a7eaa = 0x32; if (_0x49c052 < _0x1a4c55 - _0x2a7eaa) _0x3a7dbf(_0x1d2a85 + 0x1); else _0x49c052 > _0x1a4c55 + _0x2a7eaa && (_0x52c77f(0x2b3) !== _0x52c77f(0x2b3) ? _0x96f288('错误:\x20' + _0x3d6e24['message']) : _0x3a7dbf(_0x1d2a85 - 0x1)); } else _0x599285[_0x52c77f(0x61c)](_0x314021, _0x543718); } } function _0x137320() { return new Promise(_0x4853bb => { const _0x39458c = _0x1826; if (_0x39458c(0xaf4) === _0x39458c(0xaf4)) { const _0x1946ca = document['getElementById'](_0x39458c(0x389)), _0xf3fdf3 = document['getElementById'](_0x39458c(0x467)), _0x539f35 = document[_0x39458c(0x2fc)](_0x39458c(0x49d)), _0x4ddc8e = document[_0x39458c(0x2fc)](_0x39458c(0x8cd)), _0x11cd33 = document[_0x39458c(0x2fc)](_0x39458c(0x18c)), _0x5bd6f9 = document[_0x39458c(0x2fc)](_0x39458c(0x6ad)); _0xf3fdf3[_0x39458c(0x91b)] = '', _0x539f35[_0x39458c(0x91b)] = '', _0x1946ca['classList'][_0x39458c(0x3ea)](_0x39458c(0x393)), _0xf3fdf3[_0x39458c(0x83c)](); const _0x25ddc6 = _0x182e67 => { const _0x1d629e = _0x39458c; _0x1946ca['classList'][_0x1d629e(0x3c2)](_0x1d629e(0x393)), _0x4ddc8e['onclick'] = null, _0x11cd33['onclick'] = null, _0x5bd6f9[_0x1d629e(0x754)] = null, document[_0x1d629e(0xace)](_0x1d629e(0x276), _0xf65019), _0x4853bb(_0x182e67); }, _0x2997a9 = () => { const _0xe5c744 = _0x39458c; if (_0xe5c744(0x7ed) === 'oDIYU') { const _0x25372b = _0xf3fdf3[_0xe5c744(0x91b)][_0xe5c744(0x1b5)](), _0x5e2986 = _0x539f35[_0xe5c744(0x91b)]['trim'](); if (!_0x25372b || !_0x5e2986) { if (_0xe5c744(0x5d7) === _0xe5c744(0x5d7)) { _0x2d1f89(_0xe5c744(0x117)); return; } else _0x4ec4b7[_0xe5c744(0x9ce)] = _0x4c3079['scrollHeight']; } _0x25ddc6({ 'songName': _0x25372b, 'artist': _0x5e2986 }); } else throw new _0x51d3f2(_0xe5c744(0x773)); }, _0xf65019 = _0x38510d => { const _0x17986b = _0x39458c; if (_0x17986b(0x434) !== _0x17986b(0x434)) { _0x2bfc88(_0x17986b(0x2a6)); return; } else { if (_0x38510d[_0x17986b(0x70c)] === _0x17986b(0x700)) _0x25ddc6(null); _0x38510d[_0x17986b(0x70c)] === _0x17986b(0x60f) && (_0x38510d[_0x17986b(0x6bc)](), _0x2997a9()); } }; _0x4ddc8e[_0x39458c(0x754)] = _0x2997a9, _0x11cd33[_0x39458c(0x754)] = () => _0x25ddc6(null), _0x5bd6f9[_0x39458c(0x754)] = () => _0x25ddc6(null), document[_0x39458c(0xe9)](_0x39458c(0x276), _0xf65019); } else _0x1e5dfc['querySelectorAll']('input[type=\x22checkbox\x22]')[_0x39458c(0xb13)](_0x5f4632 => { const _0x299cdb = _0x39458c; if (_0x5107b0['linkedWorldBookIds']['includes'](_0x5f4632[_0x299cdb(0x91b)])) _0x5f4632[_0x299cdb(0x21e)] = !![]; }); }); } function _0x55bc13(_0x18d55a) { const _0xe4e133 = _0x2427d6; if (!_0x18d55a) return []; const _0xdceeb2 = _0x18d55a[_0xe4e133(0x1b5)](); if (_0xdceeb2[_0xe4e133(0x835)](_0xe4e133(0x6cb)) && _0xdceeb2[_0xe4e133(0x601)]('</div>')) return [_0xdceeb2]; const _0x250eaf = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x3319cc = _0xe4e133(0x40f), _0x2f526c = [], _0x3c3a4a = _0x18d55a[_0xe4e133(0x8f0)](_0x250eaf, _0x4d652f => { const _0x5dd886 = _0xe4e133; return _0x2f526c[_0x5dd886(0x9f2)](_0x4d652f), _0x3319cc; }), _0x34e370 = _0x3c3a4a[_0xe4e133(0x115)](_0x3319cc), _0x1dc6c9 = []; let _0x449ffc = 0x0; return _0x34e370[_0xe4e133(0xb13)]((_0x52c9dd, _0x329500) => { const _0x5d5ba4 = _0xe4e133; if (_0x5d5ba4(0x785) === _0x5d5ba4(0x785)) { const _0x3c2f21 = _0x52c9dd[_0x5d5ba4(0x1b5)](); _0x3c2f21 && _0x1dc6c9[_0x5d5ba4(0x9f2)](..._0x2878ad(_0x3c2f21)), _0x449ffc < _0x2f526c[_0x5d5ba4(0x8ab)] && (_0x1dc6c9[_0x5d5ba4(0x9f2)](_0x2f526c[_0x449ffc][_0x5d5ba4(0x1b5)]()), _0x449ffc++); } else _0x54ba9a['currentDate'][_0x5d5ba4(0x42e)](_0x300e78[_0x5d5ba4(0x5a9)][_0x5d5ba4(0x180)]() - 0x1), _0x37c0e6(); }), _0x1dc6c9; } function _0x2c4c8a(_0x57f276, _0x820efb, _0x418e5e = '') { const _0x27726e = _0x2427d6, _0x3c847a = document[_0x27726e(0x53d)]('div'); _0x3c847a[_0x27726e(0x175)] = 'avatar-wrapper\x20' + _0x418e5e; const _0x4d9ef9 = document['createElement']('img'); _0x4d9ef9[_0x27726e(0x9fb)] = _0x57f276, _0x4d9ef9[_0x27726e(0x175)] = _0x27726e(0x496); const _0x218ad2 = document['createElement'](_0x27726e(0x6b3)); _0x218ad2['className'] = _0x27726e(0x463); if (_0x820efb) { if (_0x27726e(0xb36) !== 'fJyRC') _0x218ad2[_0x27726e(0xab9)][_0x27726e(0x3ec)] = _0x27726e(0xac5) + _0x820efb + '\x27)'; else { const _0x4564ea = _0x13b4b1[_0x27726e(0x2fc)](_0x2335d6); if (_0x4564ea && _0x4e4a27) _0x4564ea[_0x27726e(0x9fb)] = _0x34e90e[_0x27726e(0x3a1)](_0x4fef67); } } return _0x3c847a[_0x27726e(0x30a)](_0x4d9ef9), _0x3c847a[_0x27726e(0x30a)](_0x218ad2), _0x3c847a; } function _0x81257f(_0x597977) { const _0x5a92ae = _0x2427d6; if (!_0x597977) return []; let _0xed8ed8 = String(_0x597977)[_0x5a92ae(0x1b5)](); const _0x1c550e = _0xed8ed8[_0x5a92ae(0x63a)](/```(?:json)?([\s\S]*?)```/i); if (_0x1c550e) _0xed8ed8 = _0x1c550e[0x1][_0x5a92ae(0x1b5)](); try { const _0x3d242b = JSON['parse'](_0xed8ed8); if (_0x3d242b && Array['isArray'](_0x3d242b['reply'])) return _0x3d242b[_0x5a92ae(0x724)][_0x5a92ae(0x592)](_0x5dc103 => typeof _0x5dc103 === _0x5a92ae(0x9b5) ? _0x5dc103 : _0x5dc103?.[_0x5a92ae(0xaf8)])[_0x5a92ae(0x4b7)](Boolean)[_0x5a92ae(0x57e)](_0x2878ad); const _0x1f899c = ['response', _0x5a92ae(0x1bf), _0x5a92ae(0x420), _0x5a92ae(0x331), _0x5a92ae(0xaf8), 'line', _0x5a92ae(0x5a8)]; if (_0x3d242b && typeof _0x3d242b === 'object') { if (_0x5a92ae(0x494) !== _0x5a92ae(0x494)) { const _0xb0dd38 = _0x118ec5[_0x5a92ae(0x635)][_0x5a92ae(0x354)](_0xaea28b => _0xaea28b['id'] === _0x529669); if (!_0xb0dd38) return; _0x3b37d4['textContent'] = '编辑好友圈', _0x5c7178['value'] = _0xb0dd38['id'], _0x336833[_0x5a92ae(0x91b)] = _0xb0dd38[_0x5a92ae(0x4a8)], _0x5e0f53[_0x5a92ae(0x91b)] = _0xb0dd38['boundUserProfileId'], _0x23893f[_0x5a92ae(0xab9)][_0x5a92ae(0x243)] = _0x5a92ae(0xa25), _0xb0dd38['memberCharacterIds'][_0x5a92ae(0xb13)](_0x2d3970 => { const _0x4b855a = _0x5a92ae, _0x120f09 = _0x334da9[_0x4b855a(0x9d2)](_0x4b855a(0x4f1) + _0x2d3970); if (_0x120f09) _0x120f09['checked'] = !![]; }); } else { const _0x379875 = []; for (const _0xd93f0d of Object[_0x5a92ae(0x2fe)](_0x3d242b)) { if (_0x5a92ae(0x8a2) === _0x5a92ae(0x47f)) { const _0x2cd455 = _0x130380[_0x5a92ae(0x12e)][_0x5a92ae(0x592)](_0x483b99 => _0x220712[_0x5a92ae(0x584)][_0x5a92ae(0x354)](_0xa35b76 => _0xa35b76['id'] === _0x483b99))[_0x5a92ae(0x4b7)](_0x50fb44)[_0x5a92ae(0x592)](_0x2b8ad9 => _0x5a92ae(0x737) + _0x2b8ad9[_0x5a92ae(0x4a8)] + '\x0a' + _0x2b8ad9[_0x5a92ae(0xaf8)])[_0x5a92ae(0x2c2)](''); if (_0x2cd455) _0x26d524 = _0x5a92ae(0x22c) + _0x2cd455; } else { const _0x1fb817 = _0xd93f0d[_0x5a92ae(0x2c3)](); if (_0x1f899c[_0x5a92ae(0x732)](_0x329f5e => _0x1fb817[_0x5a92ae(0x835)](_0x329f5e))) { const _0x776e05 = _0x3d242b[_0xd93f0d]; if (typeof _0x776e05 === _0x5a92ae(0x9b5)) _0x379875['push'](_0x776e05); if (Array[_0x5a92ae(0x684)](_0x776e05)) _0x776e05[_0x5a92ae(0xb13)](_0x5c2d24 => { const _0x4bd271 = _0x5a92ae; if (_0x4bd271(0x3fc) === 'JLAzE') { if (_0x4801f0[_0x4bd271(0x537)]) _0x3f456d(_0x5c5ffd['diaryPressTimer']); } else { if (typeof _0x5c2d24 === _0x4bd271(0x9b5)) _0x379875[_0x4bd271(0x9f2)](_0x5c2d24); } }); } } } if (_0x379875[_0x5a92ae(0x8ab)]) return _0x379875['flatMap'](_0x2878ad)[_0x5a92ae(0x6de)](0x0, 0x9); } } } catch { } if (/[{\[]/[_0x5a92ae(0x922)](_0xed8ed8) && /":/[_0x5a92ae(0x922)](_0xed8ed8)) { if (_0x5a92ae(0x1f1) !== _0x5a92ae(0x394)) { const _0x560c09 = [], _0x521ff4 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x1d508c; while ((_0x1d508c = _0x521ff4[_0x5a92ae(0xaff)](_0xed8ed8)) !== null) { if (_0x5a92ae(0x3bb) === 'KxggU') { const _0x36c922 = _0x1d508c[0x1]['replace'](/\\"/g, '\x22')[_0x5a92ae(0x8f0)](/\\n/g, '\x0a')[_0x5a92ae(0x1b5)](); if (_0x36c922) _0x560c09[_0x5a92ae(0x9f2)](_0x36c922); } else _0x41d291['pause'](); } if (_0x560c09[_0x5a92ae(0x8ab)]) return _0x560c09[_0x5a92ae(0x57e)](_0x2878ad)[_0x5a92ae(0x6de)](0x0, 0x9); } else { _0x2a3da8[_0x5a92ae(0x109)] = _0x5a92ae(0x699); return; } } return _0x2878ad(_0xed8ed8); } function _0x2878ad(_0x4be1ba) { const _0x43269f = _0x2427d6; if (!_0x4be1ba) return []; const _0xa29754 = String(_0x4be1ba)['trim'](), _0xca7b47 = _0xa29754[_0x43269f(0x115)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x43269f(0x592)](_0x5173c8 => _0x5173c8[_0x43269f(0x1b5)]())['filter'](Boolean); if (_0xca7b47[_0x43269f(0x8ab)] > 0x0) return _0xca7b47['slice'](0x0, 0x9); return [_0xa29754][_0x43269f(0x4b7)](Boolean); } const _0x5e9bb5 = new Promise((_0x7e7dcd, _0x37e5a3) => { const _0x4ec861 = _0x2427d6, _0xd581da = indexedDB['open'](_0x399914, 0x3); _0xd581da[_0x4ec861(0x4ef)] = () => _0x37e5a3('IndexedDB\x20failed\x20to\x20open'), _0xd581da['onsuccess'] = () => _0x7e7dcd(_0xd581da[_0x4ec861(0x18a)]), _0xd581da[_0x4ec861(0x8c9)] = _0x229360 => { const _0x33701f = _0x4ec861, _0x3be980 = _0x229360[_0x33701f(0x37e)]['result']; console['log'](_0x33701f(0x9b1) + _0x3be980[_0x33701f(0x62c)] + _0x33701f(0x92b)), !_0x3be980[_0x33701f(0x333)][_0x33701f(0x7e6)](_0x4f35d5) && (console['log']('Creating\x20object\x20store:\x20' + _0x4f35d5), _0x3be980[_0x33701f(0x7d8)](_0x4f35d5, { 'keyPath': 'id' })), !_0x3be980[_0x33701f(0x333)][_0x33701f(0x7e6)](_0x33701f(0x761)) && (console['log']('Creating\x20object\x20store:\x20music_library'), _0x3be980['createObjectStore'](_0x33701f(0x761), { 'keyPath': 'id' })), !_0x3be980[_0x33701f(0x333)][_0x33701f(0x7e6)](_0x150da7) && (console[_0x33701f(0x172)](_0x33701f(0xa5a) + _0x150da7), _0x3be980[_0x33701f(0x7d8)](_0x150da7, { 'keyPath': 'id' })); }; }); async function _0x3bbeae(_0x56b2da) { const _0x33d938 = await _0x5e9bb5; return new Promise((_0x4e7ae9, _0xd4d254) => { const _0x513d1a = _0x1826, _0x43467d = _0x33d938[_0x513d1a(0x130)](_0x4f35d5, _0x513d1a(0x99b)), _0x5c7158 = _0x43467d[_0x513d1a(0x50c)](_0x4f35d5), _0x15f1e4 = _0x5c7158['get'](_0x56b2da); _0x15f1e4['onsuccess'] = () => _0x4e7ae9(_0x15f1e4[_0x513d1a(0x18a)] ? _0x15f1e4['result']['blob'] : null), _0x15f1e4[_0x513d1a(0x4ef)] = () => _0xd4d254(_0x15f1e4[_0x513d1a(0xa12)]); }); } async function _0x157f8d(_0x4a4fb0) { const _0x3befb5 = await _0x5e9bb5; return new Promise((_0x3cb4b3, _0x59284f) => { const _0xe5757a = _0x1826; if (_0xe5757a(0x9a5) !== _0xe5757a(0x316)) { const _0x2a36a3 = _0x3befb5[_0xe5757a(0x130)](_0x150da7, _0xe5757a(0x99b)), _0x5845b6 = _0x2a36a3['objectStore'](_0x150da7), _0x499d65 = _0x5845b6[_0xe5757a(0x3fa)](_0x4a4fb0); _0x499d65[_0xe5757a(0x854)] = () => _0x3cb4b3(_0x499d65[_0xe5757a(0x18a)] ? _0x499d65[_0xe5757a(0x18a)][_0xe5757a(0x976)] : null), _0x499d65[_0xe5757a(0x4ef)] = () => _0x59284f(_0x499d65[_0xe5757a(0xa12)]); } else { const _0x5d11ea = new _0x5cc7b6(), _0x147f40 = _0x2bd2c4[_0xe5757a(0x2fc)]('home-time'), _0x4e86b9 = _0x1a292f[_0xe5757a(0x2fc)]('home-date'); if (_0x147f40 && _0x4e86b9) { const _0x528fa1 = _0x4521cd(_0x5d11ea[_0xe5757a(0x97b)]())[_0xe5757a(0x1df)](0x2, '0'), _0x2db5c9 = _0x4e3b75(_0x5d11ea['getMinutes']())['padStart'](0x2, '0'); _0x147f40[_0xe5757a(0x908)] = _0x528fa1 + ':' + _0x2db5c9; const _0x2bc609 = _0x5d11ea[_0xe5757a(0x180)]() + 0x1, _0x52cbc8 = _0x5d11ea[_0xe5757a(0x1c4)](), _0x4ffdff = [_0xe5757a(0x540), '星期一', _0xe5757a(0x1c9), _0xe5757a(0x6fc), '星期四', '星期五', _0xe5757a(0x29a)][_0x5d11ea[_0xe5757a(0x759)]()]; _0x4e86b9['textContent'] = _0x2bc609 + '月' + _0x52cbc8 + '日\x20' + _0x4ffdff; } } }); } async function _0x5757cd(_0x29919e, _0x314ccf) { const _0x37fe1d = await _0x5e9bb5; return new Promise((_0x8c6001, _0x39e3f9) => { const _0x57261f = _0x1826, _0x22a637 = _0x37fe1d[_0x57261f(0x130)](_0x150da7, _0x57261f(0xb24)), _0x53b86f = _0x22a637[_0x57261f(0x50c)](_0x150da7), _0x50ecec = _0x53b86f[_0x57261f(0xac8)]({ 'id': _0x29919e, 'data': _0x314ccf }); _0x50ecec[_0x57261f(0x854)] = () => _0x8c6001(), _0x50ecec[_0x57261f(0x4ef)] = () => _0x39e3f9(_0x50ecec[_0x57261f(0xa12)]); }); } async function _0x526300(_0x1a8b04) { const _0x5046d3 = await _0x5e9bb5; return new Promise((_0x292a6b, _0x220c82) => { const _0x2325a2 = _0x1826; if (_0x2325a2(0xa83) !== _0x2325a2(0xa83)) { const _0x14d6ae = _0x28efe1[_0x2325a2(0x53d)](_0x2325a2(0x6b3)); _0x14d6ae['className'] = _0x2325a2(0x9ff), _0xf80f37['appendChild'](_0x14d6ae); } else { const _0x1af020 = _0x5046d3['transaction'](_0x150da7, 'readwrite'), _0x59dae8 = _0x1af020[_0x2325a2(0x50c)](_0x150da7), _0x3d5f79 = _0x59dae8['delete'](_0x1a8b04); _0x3d5f79['onsuccess'] = () => _0x292a6b(), _0x3d5f79['onerror'] = () => _0x220c82(_0x3d5f79['error']); } }); } async function _0x24ce6b(_0x45db3e, _0x50937a) { const _0x1f0f05 = await _0x5e9bb5; return new Promise((_0xde5559, _0x58545c) => { const _0x528ebf = _0x1826, _0x34d3aa = _0x1f0f05['transaction'](_0x4f35d5, 'readwrite'), _0x2ecb84 = _0x34d3aa[_0x528ebf(0x50c)](_0x4f35d5), _0x2158fd = _0x2ecb84[_0x528ebf(0xac8)]({ 'id': _0x45db3e, 'blob': _0x50937a }); _0x2158fd[_0x528ebf(0x854)] = () => _0xde5559(_0x2158fd[_0x528ebf(0x18a)]), _0x2158fd[_0x528ebf(0x4ef)] = () => _0x58545c(_0x2158fd[_0x528ebf(0xa12)]); }); } async function _0xf90f34(_0x5393f9) { const _0x1c9a34 = await _0x5e9bb5; return new Promise((_0x3925e9, _0x110624) => { const _0x12ebed = _0x1826; if (_0x12ebed(0x3de) === 'pGztv') _0x5cf4d3(![]); else { const _0x391f2d = _0x1c9a34[_0x12ebed(0x130)](_0x4f35d5, _0x12ebed(0xb24)), _0x40437e = _0x391f2d[_0x12ebed(0x50c)](_0x4f35d5), _0x5f4d0f = _0x40437e['delete'](_0x5393f9); _0x5f4d0f[_0x12ebed(0x854)] = () => _0x3925e9(), _0x5f4d0f[_0x12ebed(0x4ef)] = () => _0x110624(_0x5f4d0f[_0x12ebed(0xa12)]); } }); } function _0x32101d(_0x18d8a9) { const _0xa15fe5 = _0x2427d6; return fetch(_0x18d8a9)['then'](_0x3e1e90 => _0x3e1e90[_0xa15fe5(0xad4)]()); }
</script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
