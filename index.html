<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>

  const _0x481b43 = _0xe792; (function (_0x3cebab, _0x2f2d3f) { const _0x23fc46 = _0xe792, _0x38a743 = _0x3cebab(); while (!![]) { try { const _0x27720a = parseInt(_0x23fc46(0x175)) / 0x1 * (parseInt(_0x23fc46(0x643)) / 0x2) + -parseInt(_0x23fc46(0x6ab)) / 0x3 * (-parseInt(_0x23fc46(0x1a9)) / 0x4) + -parseInt(_0x23fc46(0xa8c)) / 0x5 * (parseInt(_0x23fc46(0x530)) / 0x6) + parseInt(_0x23fc46(0x781)) / 0x7 * (-parseInt(_0x23fc46(0x5ff)) / 0x8) + parseInt(_0x23fc46(0x66d)) / 0x9 * (-parseInt(_0x23fc46(0x5aa)) / 0xa) + parseInt(_0x23fc46(0x434)) / 0xb + parseInt(_0x23fc46(0xa61)) / 0xc * (parseInt(_0x23fc46(0x592)) / 0xd); if (_0x27720a === _0x2f2d3f) break; else _0x38a743['push'](_0x38a743['shift']()); } catch (_0x13dceb) { _0x38a743['push'](_0x38a743['shift']()); } } }(_0x7dde, 0x5dca7)); const _0xeca076 = _0x481b43(0x870), _0x4b1f4a = _0x481b43(0xa9d), _0x1988c4 = _0x481b43(0x6ee), _0x4ede9b = document[_0x481b43(0x95f)](_0x481b43(0x2d6)); _0x4ede9b['id'] = _0x481b43(0x677), document[_0x481b43(0x665)][_0x481b43(0x962)](_0x4ede9b); var _0x5f49a9, _0xafdd87 = null; let _0xf3cd55 = [], _0x4e848c = ![], _0x3e7d94 = { 'x': 0x0, 'y': 0x0 }; function _0xe792(_0x2c9583, _0x4f1988) { const _0x7dde66 = _0x7dde(); return _0xe792 = function (_0xe79239, _0x3ffe9a) { _0xe79239 = _0xe79239 - 0x124; let _0x458f83 = _0x7dde66[_0xe79239]; return _0x458f83; }, _0xe792(_0x2c9583, _0x4f1988); } function _0x348d0d(_0x3eb3e0) { const _0x5209a0 = _0x481b43; return (_0x5f49a9?.[_0x5209a0(0x6b0)] || [])[_0x5209a0(0x7ed)](_0x2821ab => _0x2821ab['id'] === _0x3eb3e0); } const _0x3c8ecb = _0x481b43(0x1a2), _0x42c494 = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', _0x28cae8 = _0x481b43(0x671), _0x57623a = [{ 'name': _0x481b43(0x611), 'url': 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg' }, { 'name': '崩溃', 'url': _0x481b43(0x7db) }, { 'name': '生病', 'url': _0x481b43(0x851) }, { 'name': '工作', 'url': _0x481b43(0x484) }, { 'name': _0x481b43(0x25f), 'url': _0x481b43(0xaf2) }, { 'name': _0x481b43(0x3e3), 'url': _0x481b43(0xb24) }, { 'name': '吃薯条', 'url': _0x481b43(0x3d1) }, { 'name': '期待', 'url': _0x481b43(0xb50) }, { 'name': '喜欢', 'url': 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg' }, { 'name': _0x481b43(0x944), 'url': _0x481b43(0x987) }, { 'name': _0x481b43(0x812), 'url': _0x481b43(0x850) }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif' }, { 'name': '加油', 'url': _0x481b43(0x2f9) }, { 'name': '对的', 'url': _0x481b43(0x2fd) }, { 'name': '不满', 'url': _0x481b43(0x51b) }, { 'name': _0x481b43(0xaef), 'url': _0x481b43(0x83b) }, { 'name': _0x481b43(0x9d4), 'url': _0x481b43(0x1cc) }, { 'name': '委屈', 'url': _0x481b43(0x419) }, { 'name': '平静', 'url': _0x481b43(0x1ef) }, { 'name': '咬你', 'url': _0x481b43(0x975) }, { 'name': '咱俩天下第一好', 'url': _0x481b43(0x32f) }, { 'name': '好困', 'url': _0x481b43(0x7a1) }, { 'name': '摸鱼', 'url': _0x481b43(0xa53) }, { 'name': '委屈那我歇了', 'url': 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg' }, { 'name': _0x481b43(0x761), 'url': _0x481b43(0x597) }, { 'name': '被你撩到', 'url': _0x481b43(0x963) }, { 'name': _0x481b43(0x6bf), 'url': _0x481b43(0x2f3) }, { 'name': _0x481b43(0xacb), 'url': _0x481b43(0x2a5) }, { 'name': _0x481b43(0x817), 'url': _0x481b43(0x31a) }, { 'name': _0x481b43(0x4e9), 'url': 'https://sharkpan.xyz/f/djyi8/1en214.jpg' }, { 'name': _0x481b43(0x5d0), 'url': _0x481b43(0x7f1) }, { 'name': _0x481b43(0x593), 'url': _0x481b43(0x8c7) }, { 'name': _0x481b43(0x598), 'url': _0x481b43(0x66a) }, { 'name': _0x481b43(0x72d), 'url': 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg' }, { 'name': _0x481b43(0x86d), 'url': 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg' }, { 'name': _0x481b43(0x425), 'url': 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg' }, { 'name': _0x481b43(0x1a3), 'url': _0x481b43(0x8b9) }, { 'name': _0x481b43(0x9ed), 'url': _0x481b43(0x572) }, { 'name': _0x481b43(0x166), 'url': _0x481b43(0x4f8) }, { 'name': _0x481b43(0x5c8), 'url': _0x481b43(0x225) }, { 'name': _0x481b43(0x57d), 'url': 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg' }, { 'name': _0x481b43(0x652), 'url': _0x481b43(0x4ce) }, { 'name': '一拳打爆', 'url': _0x481b43(0x3dc) }, { 'name': _0x481b43(0x29e), 'url': _0x481b43(0x8d6) }, { 'name': _0x481b43(0x367), 'url': _0x481b43(0x5f3) }, { 'name': _0x481b43(0xabf), 'url': _0x481b43(0x154) }, { 'name': _0x481b43(0x432), 'url': _0x481b43(0x713) }, { 'name': _0x481b43(0x841), 'url': _0x481b43(0x5b8) }, { 'name': _0x481b43(0x689), 'url': _0x481b43(0x6a8) }, { 'name': '我不想工作', 'url': _0x481b43(0x5a2) }, { 'name': _0x481b43(0x5ee), 'url': _0x481b43(0x79c) }, { 'name': _0x481b43(0x60a), 'url': _0x481b43(0x905) }, { 'name': _0x481b43(0x2ab), 'url': _0x481b43(0x6a2) }, { 'name': '等你', 'url': _0x481b43(0x12e) }, { 'name': _0x481b43(0x78d), 'url': _0x481b43(0xadd) }, { 'name': _0x481b43(0xb20), 'url': _0x481b43(0x50e) }, { 'name': '喝酒', 'url': _0x481b43(0x6b7) }, { 'name': _0x481b43(0xb4f), 'url': 'https://sharkpan.xyz/f/Ganul/78iwli.jpg' }, { 'name': '呜呜', 'url': _0x481b43(0x922) }, { 'name': _0x481b43(0x95b), 'url': _0x481b43(0x28f) }, { 'name': _0x481b43(0x90f), 'url': 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg' }, { 'name': _0x481b43(0xaee), 'url': 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg' }, { 'name': _0x481b43(0x3ae), 'url': _0x481b43(0x455) }, { 'name': '别这样嘛我哭哭', 'url': _0x481b43(0xb21) }], _0x8e101a = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x481b43(0x4e1), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x481b43(0x4b5), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x481b43(0x8a7), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x481b43(0x458)](_0x481b43(0x7c3), () => { const _0x4d95ce = _0x481b43, _0x563faf = document[_0x4d95ce(0x374)](_0x4d95ce(0x2eb)), _0x9ee2cd = document[_0x4d95ce(0x374)](_0x4d95ce(0x7ef)), _0x43e621 = document['getElementById']('transfer-modal'), _0x4015b2 = document[_0x4d95ce(0x374)](_0x4d95ce(0x372)), _0x3ee084 = document[_0x4d95ce(0x374)](_0x4d95ce(0x673)), _0x15ec65 = document[_0x4d95ce(0x374)](_0x4d95ce(0xb47)), _0x329492 = document['getElementById'](_0x4d95ce(0x20f)), _0x38f212 = document[_0x4d95ce(0x374)](_0x4d95ce(0x50d)), _0x2e931e = document[_0x4d95ce(0x374)](_0x4d95ce(0x94a)), _0x1f10b1 = document[_0x4d95ce(0x374)](_0x4d95ce(0x496)), _0x2f20ab = document[_0x4d95ce(0x374)](_0x4d95ce(0x533)), _0x588661 = document[_0x4d95ce(0x374)](_0x4d95ce(0x35d)), _0x3a26ff = document[_0x4d95ce(0x374)]('summarize-backdrop'), _0x82ff1a = document[_0x4d95ce(0x374)](_0x4d95ce(0x1a8)), _0x1af8b0 = document[_0x4d95ce(0x374)](_0x4d95ce(0x702)), _0x533674 = document[_0x4d95ce(0x374)](_0x4d95ce(0x482)), _0x39b97d = document[_0x4d95ce(0x374)](_0x4d95ce(0x5fa)), _0x7c3a26 = document[_0x4d95ce(0x374)](_0x4d95ce(0x711)), _0x5d2f7e = document[_0x4d95ce(0x374)](_0x4d95ce(0x6f5)), _0x2b6a2b = document[_0x4d95ce(0x374)](_0x4d95ce(0xa23)), _0x8760db = document['getElementById'](_0x4d95ce(0x9a2)), _0x45a050 = document[_0x4d95ce(0x374)](_0x4d95ce(0x442)), _0x5d6f62 = document['getElementById']('export-char-button'), _0x3cf303 = document['getElementById'](_0x4d95ce(0x9cc)), _0x1af005 = document[_0x4d95ce(0x374)](_0x4d95ce(0xb1b)), _0x5a4715 = document[_0x4d95ce(0x374)](_0x4d95ce(0x37f)), _0x2cb6be = document['getElementById'](_0x4d95ce(0x1b0)); async function _0x2b4ee6(_0x1c882a) { const _0x24c27e = _0x4d95ce; try { const _0x223bd3 = URL[_0x24c27e(0x7dc)](_0x1c882a), _0x104527 = 'NoirCustomFont', _0x470e67 = _0x24c27e(0xade) + _0x104527 + _0x24c27e(0x890) + _0x223bd3 + _0x24c27e(0xb23); _0x4ede9b[_0x24c27e(0x279)] = _0x470e67, document[_0x24c27e(0x376)][_0x24c27e(0x2d6)][_0x24c27e(0x4c2)]('--custom-font-family', '\x27' + _0x104527 + '\x27'), _0x2cb6be[_0x24c27e(0x8e3)] = '字体已应用！(Font\x20Applied!)'; } catch (_0x26522e) { console[_0x24c27e(0x7a4)](_0x24c27e(0x884), _0x26522e), _0xd5e395(_0x24c27e(0x490)); } } async function _0x1ab0af() { const _0x3e649c = _0x4d95ce; if ('nDoms' === 'RDWwc') throw new _0x304700(_0x3e649c(0x935)); else try { if (_0x3e649c(0x32e) === _0x3e649c(0x912)) _0x5eb2f2[_0x3e649c(0x8e3)] = _0x3e649c(0x4c0), _0x2dd65e[_0x3e649c(0x8e3)] = '请在动态或聊天中播放', _0x49f733['classList'][_0x3e649c(0x31f)](_0x3e649c(0x4de)), _0x40d3ff[_0x3e649c(0x2d6)]['setProperty'](_0x3e649c(0x36b), _0x3e649c(0x8b4)); else { const _0x37628c = await _0x15e0c2('custom_font_ttf'); _0x37628c && (console[_0x3e649c(0x6e2)](_0x3e649c(0x469)), await _0x2b4ee6(_0x37628c)); } } catch (_0x53268c) { console['error'](_0x3e649c(0x13f), _0x53268c); } } async function _0xe7e4aa(_0x129c3d) { const _0x1389c4 = _0x4d95ce, _0x41f9bc = _0x129c3d[_0x1389c4(0x89a)][_0x1389c4(0x760)][0x0]; if (!_0x41f9bc || !_0x41f9bc[_0x1389c4(0x7d9)]['toLowerCase']()['endsWith'](_0x1389c4(0x82e))) { if (_0x1389c4(0x8c0) !== 'JNxwy') { _0xd5e395(_0x1389c4(0x94d)); return; } else _0x5e63e4[_0x1389c4(0x866)](_0x2bcb8, { 'songName': _0x2310ef, 'artist': _0xe4ba76, 'coverId': null, 'playableUrl': null }); } _0x5a1a9e(!![], _0x1389c4(0x849)); try { await _0x5a0c6c(_0x1389c4(0x1fb), _0x41f9bc), await _0x2b4ee6(_0x41f9bc), _0xd5e395(_0x1389c4(0x1cd)); } catch (_0x3ff85a) { _0xd5e395(_0x1389c4(0x6aa) + _0x3ff85a[_0x1389c4(0xb58)]); } finally { _0x5a1a9e(![]), _0x5a4715[_0x1389c4(0x330)] = ''; } } async function _0xf33d1e() { const _0x1f8655 = _0x4d95ce; if (_0x1f8655(0x7ff) === 'rdaGj') { const _0x3c9bb1 = await _0xd56340('确定要恢复默认字体吗？'); if (_0x3c9bb1) try { if ('SOqCo' === _0x1f8655(0x30a)) await _0xbc8e1e(_0x1f8655(0x1fb)), _0x4ede9b[_0x1f8655(0x279)] = '', document[_0x1f8655(0x376)][_0x1f8655(0x2d6)][_0x1f8655(0x4fa)](_0x1f8655(0x994)), _0x2cb6be['textContent'] = _0x1f8655(0x832), _0xd5e395(_0x1f8655(0x829)); else { const _0x1fd39c = _0x315c85[_0x1f8655(0x179)](_0x1f8655(0x19c)); if (_0x1fd39c && (_0x1fd39c['id'] === _0x1f8655(0x979) || _0x1fd39c['id'] === 'chat-screen')) _0x1d5d5e(); else { const _0x2a8d27 = _0xacc106[_0x1f8655(0x410)](_0x1f8655(0x297)); _0x2a8d27[_0x1f8655(0x170)](_0x56790b => _0x56790b[_0x1f8655(0x31f)]()); } } } catch (_0x1eb7ab) { _0xd5e395(_0x1f8655(0x204) + _0x1eb7ab[_0x1f8655(0xb58)]); } } else { _0x349946 && (_0x32cd60(_0x1c7287), _0x233791 = null); _0x596449[_0x1f8655(0x374)]('snoop-app-view-container')[_0x1f8655(0x2d6)][_0x1f8655(0x416)] = 'none'; const _0x255143 = _0x5139c9['getElementById'](_0x1f8655(0x413)); if (_0x255143) _0x255143[_0x1f8655(0x31f)](); const _0x34d3f7 = _0x3dac9c['getElementById'](_0x1f8655(0x269)); if (_0x34d3f7) _0x34d3f7['remove'](); _0x188e8d(_0x1f8655(0x7f2), 'snoopPhone'); } } function _0x23e679() { const _0x56e82c = _0x4d95ce, _0x1eef2d = document[_0x56e82c(0x374)](_0x56e82c(0x8ef)); if (!_0x1eef2d) return; const _0x44a658 = localStorage[_0x56e82c(0x6ba)](_0x56e82c(0x771)) || '35'; document[_0x56e82c(0x376)]['style']['setProperty'](_0x56e82c(0x7b6), _0x44a658), _0x1eef2d['value'] = _0x44a658, _0x1eef2d[_0x56e82c(0x458)](_0x56e82c(0x1bc), () => { const _0x421432 = _0x56e82c, _0x3f9465 = _0x1eef2d[_0x421432(0x330)]; document[_0x421432(0x376)]['style'][_0x421432(0x4c2)](_0x421432(0x7b6), _0x3f9465), localStorage['setItem'](_0x421432(0x771), _0x3f9465), _0x5cc105(); }); } function _0x3de7d2() { const _0x5dff58 = _0x4d95ce, _0x584f8d = document[_0x5dff58(0x374)](_0x5dff58(0x3e5)); if (!_0x584f8d) return; const _0x19f1c9 = localStorage['getItem']('themeLightness') || '80'; document[_0x5dff58(0x376)][_0x5dff58(0x2d6)]['setProperty'](_0x5dff58(0x35f), _0x19f1c9 + '%'), _0x584f8d[_0x5dff58(0x330)] = _0x19f1c9, _0x584f8d[_0x5dff58(0x458)](_0x5dff58(0x1bc), () => { const _0x3568d7 = _0x5dff58; if (_0x3568d7(0x79d) === _0x3568d7(0x8e5)) { const _0x523be2 = _0x3568d7(0x41f); _0x3c3007[_0x3568d7(0xb2c)][_0x3568d7(0x651)](_0x3568d7(0x34d), _0x523be2); const _0x165be8 = _0x1fbbbf[_0x3568d7(0x374)](_0x3568d7(0x4db)), _0x315b37 = _0x46debe[_0x3568d7(0x374)](_0x3568d7(0xa1c)), _0x511775 = _0x588885[_0x3568d7(0x374)](_0x3568d7(0x4a3)), _0x14e664 = _0x23b9f7[_0x3568d7(0x374)](_0x3568d7(0x644)), _0x546c50 = _0x165be8[_0x3568d7(0x179)](_0x3568d7(0x4b3)), _0x22f77a = () => { const _0x5f39e1 = _0x3568d7; _0x165be8[_0x5f39e1(0x31f)](), _0x9789ca(); }; _0x511775['onclick'] = () => { const _0x1e41c5 = _0x3568d7; _0x5c5e6a(_0x315b37[_0x1e41c5(0x330)]), _0x22f77a(); }, _0x14e664[_0x3568d7(0x509)] = _0x22f77a, _0x546c50['onclick'] = _0x22f77a; } else { const _0x237920 = _0x584f8d[_0x3568d7(0x330)]; document[_0x3568d7(0x376)][_0x3568d7(0x2d6)][_0x3568d7(0x4c2)]('--primary-lightness', _0x237920 + '%'), localStorage[_0x3568d7(0x421)](_0x3568d7(0xb41), _0x237920), _0x5cc105(); } }); } function _0x5cc105() { const _0x43378f = _0x4d95ce; if (_0x43378f(0x666) !== _0x43378f(0xb14)) { const _0x1e339a = document[_0x43378f(0x374)]('home-clock-container'); if (!_0x1e339a) return; if (_0x5f49a9[_0x43378f(0x407)][_0x43378f(0x70f)]) _0x1e339a[_0x43378f(0x2d6)][_0x43378f(0x95e)] = _0x43378f(0x4dd), _0x1e339a[_0x43378f(0x2d6)][_0x43378f(0x614)] = _0x43378f(0x64e); else { if (_0x43378f(0x63c) === _0x43378f(0x6f2)) { const _0x55b82c = _0x5d6965['target'][_0x43378f(0x760)][0x0]; if (!_0x55b82c) return; const _0x407aeb = _0x8f2d30[_0x43378f(0x7dc)](_0x55b82c); _0x2f3c05[_0x43378f(0x2d6)][_0x43378f(0x486)] = 'url(\x27' + _0x407aeb + '\x27)'; } else _0x1e339a['style'][_0x43378f(0x95e)] = _0x43378f(0x7a9), _0x1e339a['style'][_0x43378f(0x614)] = 'none'; } } else _0x3ce3cd[_0x43378f(0x458)](_0x43378f(0x173), () => { const _0x4394b3 = _0x43378f, _0x2edde2 = _0x413aea[_0x4394b3(0x468)](_0x427398['dataset'][_0x4394b3(0x6e2)][_0x4394b3(0xa38)](/&quot;/g, '\x22')), _0x302025 = _0x3c0ac1[_0x4394b3(0x814)]['contactName'], _0xf03f63 = _0x194f4e['dataset'][_0x4394b3(0xa57)]; _0x283103(_0x302025, _0xf03f63, _0x2edde2); }); } function _0x5d751b() { const _0x4df2ae = _0x4d95ce; if (_0x4df2ae(0xa4f) === _0x4df2ae(0x6a7)) { const _0x4ef25b = _0x3b285e[_0x4df2ae(0x95f)](_0x4df2ae(0x754)); _0x4ef25b[_0x4df2ae(0x290)] = _0x4df2ae(0x12f), _0x4ef25b['style'][_0x4df2ae(0x4e7)] = _0x4df2ae(0x17f); const _0x29d50b = _0x1071f8[_0x4df2ae(0x6a1)][_0x4c87c8], _0x54b4e0 = _0x29d50b[_0x4df2ae(0x583)]['reduce']((_0x1e0a8b, _0x4c6aa1) => _0x1e0a8b + (_0x4c6aa1[_0x4df2ae(0xaac)] || 0x0), 0x0); _0x4ef25b['innerHTML'] = _0x4df2ae(0x5c7) + _0x5d52b3 + _0x4df2ae(0x915) + _0x54b4e0[_0x4df2ae(0x539)](0x2) + '</span>', _0x4ef25b['addEventListener']('click', () => { const _0x4449b5 = _0x4df2ae; _0x24865c[_0x4449b5(0x8f0)][_0x4449b5(0x31f)](_0x4449b5(0xa54)), _0x22b263[_0x4449b5(0x8f0)]['add']('active'), _0x4db68d(_0x29d50b, _0x419b26); }), _0xfa9bf0[_0x4df2ae(0x962)](_0x4ef25b); } else { const _0x1d626e = document[_0x4df2ae(0x374)](_0x4df2ae(0x64c)); if (!_0x1d626e) return; _0x1d626e['checked'] = _0x5f49a9[_0x4df2ae(0x407)][_0x4df2ae(0x70f)] || ![], _0x1d626e[_0x4df2ae(0x458)](_0x4df2ae(0x563), () => { const _0x1062ef = _0x4df2ae; _0x5f49a9[_0x1062ef(0x407)][_0x1062ef(0x70f)] = _0x1d626e[_0x1062ef(0x809)], _0x39e4f0(), _0x5cc105(); }); } } _0x5d6f62['addEventListener'](_0x4d95ce(0x173), _0x3f10fa), _0x8760db['addEventListener'](_0x4d95ce(0x173), () => { const _0xc567ee = _0x4d95ce; _0x2b9e11(), _0x45a050[_0xc567ee(0x173)](); }), _0x45a050[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x3cf44d); const _0x38c187 = { 'home': document[_0x4d95ce(0x374)](_0x4d95ce(0x222)), 'chat': document[_0x4d95ce(0x374)](_0x4d95ce(0x473)), 'settings': document[_0x4d95ce(0x374)](_0x4d95ce(0x6d1)), 'userProfile': document[_0x4d95ce(0x374)]('user-profile-screen'), 'characterEdit': document[_0x4d95ce(0x374)](_0x4d95ce(0x55c)), 'groupChatCreate': document[_0x4d95ce(0x374)](_0x4d95ce(0x5b5)), 'wallpaper': document[_0x4d95ce(0x374)](_0x4d95ce(0x98b)), 'worldBook': document[_0x4d95ce(0x374)](_0x4d95ce(0x52f)), 'worldBookEditor': document[_0x4d95ce(0x374)](_0x4d95ce(0x355)), 'groupSettings': document[_0x4d95ce(0x374)](_0x4d95ce(0x58e)), 'music': document[_0x4d95ce(0x374)](_0x4d95ce(0x917)), 'friendCircleList': document[_0x4d95ce(0x374)](_0x4d95ce(0x42b)), 'friendCircleEdit': document[_0x4d95ce(0x374)](_0x4d95ce(0x793)), 'meetingList': document[_0x4d95ce(0x374)](_0x4d95ce(0x19d)), 'meetingView': document[_0x4d95ce(0x374)]('meeting-view-screen'), 'userProfileList': document[_0x4d95ce(0x374)](_0x4d95ce(0x8f1)), 'diaryList': document[_0x4d95ce(0x374)](_0x4d95ce(0x7bb)), 'diaryView': document[_0x4d95ce(0x374)](_0x4d95ce(0x415)), 'musicLibrary': document[_0x4d95ce(0x374)](_0x4d95ce(0xa09)), 'musicUploadAltar': document[_0x4d95ce(0x374)](_0x4d95ce(0x5fb)), 'accounting': document[_0x4d95ce(0x374)]('accounting-screen'), 'snoopList': document[_0x4d95ce(0x374)](_0x4d95ce(0x687)), 'snoopPhone': document[_0x4d95ce(0x374)](_0x4d95ce(0x575)), 'calendar': document[_0x4d95ce(0x374)](_0x4d95ce(0xa13)) }, _0x108a27 = document[_0x4d95ce(0x374)](_0x4d95ce(0x82b)), _0x53a254 = document['getElementById']('feed-bg-input'), _0x8ab70c = document[_0x4d95ce(0x374)]('reset-feed-bg-button'), _0x17d1e6 = document[_0x4d95ce(0x374)]('app-wallpaper'), _0x3ee54a = document[_0x4d95ce(0x374)](_0x4d95ce(0x3f2)), _0x25e98a = document[_0x4d95ce(0x374)](_0x4d95ce(0x816)), _0x1e224a = document['getElementById']('wallpaper-input'), _0x30ebfc = document[_0x4d95ce(0x374)](_0x4d95ce(0x5a6)); document[_0x4d95ce(0x374)](_0x4d95ce(0x608))[_0x4d95ce(0x458)]('click', async () => { const _0x129301 = _0x4d95ce; if (_0x129301(0x6d6) === 'EkNsX') _0x15bd52[_0x24aa62][_0x129301(0x458)]('click', () => _0x59d2ec[_0x3290c7][_0x129301(0x173)]()), _0x5e27fa[_0x434478][_0x129301(0x458)](_0x129301(0x563), _0x5acc6e => { const _0x2d6072 = _0x129301; _0xf9349e(_0x7bf3e5, _0x5acc6e[_0x2d6072(0x89a)][_0x2d6072(0x760)][0x0]); }); else { const _0x39ea30 = await _0xd56340(_0x129301(0x24c)); if (_0x39ea30) { localStorage[_0x129301(0x5ed)](_0x129301(0x9c8)), localStorage['removeItem']('cardState'), localStorage[_0x129301(0x5ed)](_0x129301(0x9a7)), localStorage[_0x129301(0x5ed)](_0x129301(0x53e)); const _0x4d66b6 = []; for (let _0x462340 = 0x0; _0x462340 < localStorage['length']; _0x462340++) { if (_0x129301(0x581) === _0x129301(0x581)) { const _0x22b1f2 = localStorage['key'](_0x462340); _0x22b1f2 && _0x22b1f2[_0x129301(0x93c)](_0x129301(0xa15)) && (_0x129301(0xa4b) === _0x129301(0x40c) ? _0x5447d5['innerHTML'] = _0x404004 : _0x4d66b6[_0x129301(0x238)](_0x22b1f2)); } else { _0x58e25b[_0x129301(0x7a4)](_0x129301(0xae4) + _0x2798ad[_0x129301(0x824)] + ',\x20resetting.', _0x55bc70); try { _0xa692a4['removeItem'](_0x129301(0x39b) + _0x50ef33[_0x129301(0x824)]); } catch (_0xcc2c5a) { _0xbb0208['error'](_0x129301(0x49e), _0xcc2c5a); } } } _0x4d66b6[_0x129301(0x170)](_0x5b8352 => localStorage[_0x129301(0x5ed)](_0x5b8352)), await _0x5a0c6c(_0x129301(0x62d), await _0x34bb22(_0x129301(0x406))), _0xd5e395(_0x129301(0x805)), setTimeout(() => location[_0x129301(0x497)](), 0x5dc); } } }); const _0x592f1d = document[_0x4d95ce(0x374)](_0x4d95ce(0x46d)), _0x5aa34d = document[_0x4d95ce(0x374)]('add-choice-backdrop'), _0x37b704 = document[_0x4d95ce(0x374)](_0x4d95ce(0x472)), _0x17f987 = document[_0x4d95ce(0x374)](_0x4d95ce(0xa79)), _0x3ceaf0 = document[_0x4d95ce(0x374)](_0x4d95ce(0x29a)), _0x5939ba = document[_0x4d95ce(0x374)](_0x4d95ce(0x64d)), _0x1f0614 = document[_0x4d95ce(0x374)](_0x4d95ce(0x158)), _0x1fd4b8 = document[_0x4d95ce(0x374)]('group-chat-name'), _0x493ef4 = document['getElementById'](_0x4d95ce(0x387)), _0x14801b = document[_0x4d95ce(0x374)](_0x4d95ce(0x898)), _0x4256cf = document[_0x4d95ce(0x374)](_0x4d95ce(0x13e)), _0x46f146 = document['getElementById'](_0x4d95ce(0xad7)), _0x399f4f = document[_0x4d95ce(0x374)](_0x4d95ce(0x5ba)), _0x1ac70a = document[_0x4d95ce(0x374)](_0x4d95ce(0x2be)), _0x12c5f3 = document[_0x4d95ce(0x374)]('back-to-settings-from-user-profile'), _0x19ed84 = document[_0x4d95ce(0x374)](_0x4d95ce(0x722)), _0x4497e7 = document[_0x4d95ce(0x374)]('character-list'), _0x248041 = document[_0x4d95ce(0x374)]('add-chat-button'), _0x103c03 = document[_0x4d95ce(0x374)](_0x4d95ce(0x473)), _0x4225c7 = document['getElementById'](_0x4d95ce(0x272)), _0x1252fb = document[_0x4d95ce(0x374)](_0x4d95ce(0x2e4)), _0x3d7578 = document[_0x4d95ce(0x374)](_0x4d95ce(0xb10)), _0x2f7af3 = document[_0x4d95ce(0x374)]('chat-get-reply-button'), _0x32b677 = document[_0x4d95ce(0x374)](_0x4d95ce(0x708)), _0x389b9f = document[_0x4d95ce(0x374)]('quote-preview-sender'), _0x2115b6 = document['getElementById'](_0x4d95ce(0x9b1)), _0xb7e049 = document[_0x4d95ce(0x374)](_0x4d95ce(0x3e8)), _0xaad891 = document['getElementById'](_0x4d95ce(0x91d)), _0x3f2887 = document['getElementById'](_0x4d95ce(0x874)), _0x532d9 = document[_0x4d95ce(0x374)](_0x4d95ce(0x9c6)), _0x179ffb = document['getElementById'](_0x4d95ce(0x4cb)), _0x1591a7 = document[_0x4d95ce(0x374)](_0x4d95ce(0x99d)), _0x1373f7 = document[_0x4d95ce(0x374)](_0x4d95ce(0xb45)), _0x39207d = document[_0x4d95ce(0x374)](_0x4d95ce(0x64b)), _0x353779 = document[_0x4d95ce(0x374)](_0x4d95ce(0x7ad)), _0x19b7e7 = document['getElementById'](_0x4d95ce(0x660)), _0x5b2d1c = document['getElementById']('api-model'), _0x16551b = document[_0x4d95ce(0x374)]('save-api-settings-button'), _0x37e126 = document[_0x4d95ce(0x374)](_0x4d95ce(0x544)), _0x3611b9 = document[_0x4d95ce(0x374)](_0x4d95ce(0x8a1)), _0xaf3be3 = document[_0x4d95ce(0x374)](_0x4d95ce(0xb09)), _0x30c61b = document['getElementById'](_0x4d95ce(0x5ce)), _0x9f6d59 = document[_0x4d95ce(0x374)](_0x4d95ce(0x862)), _0x44619e = document['getElementById'](_0x4d95ce(0x573)), _0x4f232c = document[_0x4d95ce(0x374)](_0x4d95ce(0x2ae)), _0x229b29 = document[_0x4d95ce(0x374)](_0x4d95ce(0x727)), _0x5bde35 = document[_0x4d95ce(0x374)](_0x4d95ce(0x65b)), _0x5c731f = document[_0x4d95ce(0x374)](_0x4d95ce(0x90b)), _0x4382ab = document[_0x4d95ce(0x374)](_0x4d95ce(0x882)), _0x3512c5 = document[_0x4d95ce(0x374)](_0x4d95ce(0x55d)), _0x437da2 = document[_0x4d95ce(0x374)](_0x4d95ce(0x8f8)), _0x172161 = document['getElementById'](_0x4d95ce(0x60c)), _0x95cf2a = document[_0x4d95ce(0x374)]('char-edit-persona'), _0x4c247b = document['getElementById'](_0x4d95ce(0x869)), _0x29f319 = document[_0x4d95ce(0x374)](_0x4d95ce(0x77a)), _0x35f19a = document[_0x4d95ce(0x374)](_0x4d95ce(0x26c)); let _0x44d5cb = null; const _0x11690a = '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', _0x1321de = '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a'; _0x5f49a9 = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': _0x4d95ce(0x365), 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x39e4f0() { const _0x745163 = _0x4d95ce; if (_0x745163(0x253) === _0x745163(0x5d8)) _0x42cac2[_0x745163(0x8e3)] = _0x745163(0x5c3), _0x3ba765[_0x745163(0x279)] = _0x745163(0x595); else try { const _0x32d8bd = { 'characters': _0x5f49a9[_0x745163(0x6b0)], 'worldBooks': _0x5f49a9[_0x745163(0x1df)], 'chats': _0x5f49a9['chats'], 'userProfile': _0x5f49a9['userProfile'], 'apiSettings': _0x5f49a9[_0x745163(0x17c)], 'preferences': _0x5f49a9[_0x745163(0x407)], 'activeChatId': _0x5f49a9[_0x745163(0x824)], 'diaries': _0x5f49a9['diaries'], 'friendCircles': _0x5f49a9[_0x745163(0x535)], 'activeFriendCircleId': _0x5f49a9['activeFriendCircleId'], 'userProfiles': _0x5f49a9[_0x745163(0x4d5)], 'activeUserProfileId': _0x5f49a9[_0x745163(0x4f6)], 'accountingData': _0x5f49a9['accountingData'], 'accountingLedger': _0x5f49a9[_0x745163(0x6a1)], 'calendarEvents': _0x5f49a9['calendarEvents'] }; localStorage[_0x745163(0x421)](_0x745163(0x4cd), JSON[_0x745163(0x795)](_0x32d8bd)); } catch (_0x113618) { _0x745163(0x66f) === _0x745163(0x769) ? (_0x5d2e69(), _0x1fa416(![]), _0x1d6320['isGenerating'] = ![]) : (console[_0x745163(0x7a4)](_0x745163(0x27a), _0x113618), _0xd5e395(_0x745163(0x26e))); } } function _0x526e66() { const _0x4c1cb7 = _0x4d95ce; let _0x2336e5 = null; try { _0x2336e5 = localStorage[_0x4c1cb7(0x6ba)](_0x4c1cb7(0x4cd)); } catch (_0x53b5ff) { console[_0x4c1cb7(0x7a4)](_0x4c1cb7(0xa80), _0x53b5ff), _0xd5e395(_0x4c1cb7(0x362)); } if (_0x2336e5) try { if (_0x4c1cb7(0x23d) !== 'hMZoc') { const _0x37e993 = JSON['parse'](_0x2336e5); if (!_0x37e993 || typeof _0x37e993 !== 'object') throw new Error('Invalid\x20saved\x20state\x20format'); Array[_0x4c1cb7(0x552)](_0x37e993[_0x4c1cb7(0x6b0)]) && (_0x4c1cb7(0x49f) === 'QWMlE' ? _0x5f49a9[_0x4c1cb7(0x6b0)] = _0x37e993[_0x4c1cb7(0x6b0)][_0x4c1cb7(0x190)](_0x4eaf6c => ({ 'offlineBackground': '', ..._0x4eaf6c }))['filter'](_0x79e6af => _0x79e6af && typeof _0x79e6af === _0x4c1cb7(0x767) && _0x79e6af['id']) : (_0x21c2dc[_0x4c1cb7(0x2d6)][_0x4c1cb7(0x416)] = _0x4c1cb7(0x8b4), _0x15d457[_0x4c1cb7(0x509)] = _0x5e1887[_0x4c1cb7(0x509)] = _0x404ea1['onclick'] = null, _0x577641[_0x4c1cb7(0x188)](_0x4c1cb7(0xb04), _0x4e8a7f), _0x516579(_0x567b2e))); _0x37e993[_0x4c1cb7(0x4fb)] && (_0x4c1cb7(0x7eb) !== _0x4c1cb7(0x7eb) ? (_0x1e1fe7['removeItem'](_0x4c1cb7(0x751)), _0xd69ce4(), _0x5f3891('动态页背景已移除。')) : _0x5f49a9[_0x4c1cb7(0x4fb)] = _0x37e993[_0x4c1cb7(0x4fb)]); _0x37e993[_0x4c1cb7(0x6a1)] && (_0x5f49a9[_0x4c1cb7(0x6a1)] = _0x37e993[_0x4c1cb7(0x6a1)]); Array[_0x4c1cb7(0x552)](_0x37e993['worldBooks']) && (_0x5f49a9[_0x4c1cb7(0x1df)] = _0x37e993[_0x4c1cb7(0x1df)]); Array['isArray'](_0x37e993['diaries']) && (_0x4c1cb7(0x549) === _0x4c1cb7(0x732) ? (_0x1286fc['error'](_0x4c1cb7(0x640), _0x3061a2), _0x221fca['type'] = _0x4c1cb7(0x3c5)) : _0x5f49a9['diaries'] = _0x37e993['diaries']); Array[_0x4c1cb7(0x552)](_0x37e993['calendarEvents']) && (_0x5f49a9['calendarEvents'] = _0x37e993[_0x4c1cb7(0x5fe)]); if (Array[_0x4c1cb7(0x552)](_0x37e993['friendCircles'])) _0x4c1cb7(0x834) === _0x4c1cb7(0x834) ? (_0x5f49a9[_0x4c1cb7(0x535)] = _0x37e993[_0x4c1cb7(0x535)], _0x5f49a9[_0x4c1cb7(0x662)] = _0x37e993[_0x4c1cb7(0x662)]) : (_0x4fa80c['stopPropagation'](), _0x59e9df[_0x4c1cb7(0x8f0)][_0x4c1cb7(0x411)](_0x4c1cb7(0x8d9)), _0x3a2929[_0x4c1cb7(0x8f0)]['toggle'](_0x4c1cb7(0xb1f))); else { if (Array[_0x4c1cb7(0x552)](_0x37e993['musicFeed']) && _0x37e993[_0x4c1cb7(0x73a)][_0x4c1cb7(0x2ed)] > 0x0) { if ('yLERx' !== _0x4c1cb7(0xa82)) { console['log']('正在迁移旧的动态数据到新的好友圈系统...'); const _0xf92123 = { 'id': 'circle_' + Date['now'](), 'name': '我的动态', 'boundUserProfileId': _0x37e993[_0x4c1cb7(0x4f6)], 'memberCharacterIds': _0x37e993['characters'][_0x4c1cb7(0x190)](_0x3b5f67 => _0x3b5f67['id']), 'posts': _0x37e993['musicFeed'] }; _0x5f49a9['friendCircles'] = [_0xf92123], _0x5f49a9['activeFriendCircleId'] = _0xf92123['id']; } else { _0x5abfe1['value'] = '', _0x3e4c89[_0x4c1cb7(0x330)] = ''; if (_0x3b7d2b) _0x26d8e9[_0x4c1cb7(0x2d6)]['backgroundImage'] = ''; } } } if (Array[_0x4c1cb7(0x552)](_0x37e993[_0x4c1cb7(0x4d5)])) _0x5f49a9[_0x4c1cb7(0x4d5)] = _0x37e993[_0x4c1cb7(0x4d5)], _0x5f49a9['activeUserProfileId'] = _0x37e993[_0x4c1cb7(0x4f6)]; else { if (_0x37e993[_0x4c1cb7(0xb5d)]) { if (_0x4c1cb7(0x8ca) !== _0x4c1cb7(0x476)) { console['log'](_0x4c1cb7(0x60f)); const _0x4e94d7 = { 'id': _0x4c1cb7(0xace) + Date[_0x4c1cb7(0x780)](), 'name': _0x37e993[_0x4c1cb7(0xb5d)]['name'] || '我', 'avatar': _0x37e993[_0x4c1cb7(0xb5d)][_0x4c1cb7(0x7d6)] || _0x42c494, 'persona': _0x37e993['userProfile'][_0x4c1cb7(0x8eb)] || '' }; _0x5f49a9[_0x4c1cb7(0x4d5)] = [_0x4e94d7], _0x5f49a9[_0x4c1cb7(0x4f6)] = _0x4e94d7['id']; } else { const _0x449be5 = { 'id': _0x4c1cb7(0xace) + _0x146790[_0x4c1cb7(0x780)](), ..._0x3829ee }; _0x5c03d2[_0x4c1cb7(0x4d5)][_0x4c1cb7(0x238)](_0x449be5), !_0x1d3606[_0x4c1cb7(0x4f6)] && (_0x532258[_0x4c1cb7(0x4f6)] = _0x449be5['id']); } } } _0x37e993[_0x4c1cb7(0x17c)] && typeof _0x37e993['apiSettings'] === _0x4c1cb7(0x767) && (_0x5f49a9[_0x4c1cb7(0x17c)] = { ..._0x5f49a9['apiSettings'], ..._0x37e993[_0x4c1cb7(0x17c)] }); _0x37e993[_0x4c1cb7(0x407)] && typeof _0x37e993[_0x4c1cb7(0x407)] === 'object' ? _0x4c1cb7(0x2e6) === _0x4c1cb7(0x2e6) ? _0x5f49a9[_0x4c1cb7(0x407)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null, ..._0x37e993['preferences'] } : _0x59e65e(_0x4c1cb7(0x9dd) + _0x25ebc4[_0x4c1cb7(0x7d9)] + _0x4c1cb7(0x47a) + _0x393346[_0x4c1cb7(0x82d)]) : _0x4c1cb7(0x4f9) !== _0x4c1cb7(0x4f9) ? (_0x2cf4fe['name'] = _0x1830bc, _0x1ed40a[_0x4c1cb7(0x3fc)] = _0x294780, _0x1ec094[_0x4c1cb7(0x87c)] = _0x105fb6) : _0x5f49a9[_0x4c1cb7(0x407)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null }; if (Array[_0x4c1cb7(0x552)](_0x37e993[_0x4c1cb7(0x42d)])) { if ('HsjcG' === _0x4c1cb7(0x5fc)) _0x5f49a9[_0x4c1cb7(0x42d)] = _0x37e993[_0x4c1cb7(0x42d)], _0x5f49a9[_0x4c1cb7(0x824)] = _0x37e993['activeChatId'] || null; else { _0x2c0e70 = _0x2aa791(_0x5d317b); if (!_0x2e6c1a) throw new _0x5a0338(_0x4c1cb7(0x2c7)); } } else Array[_0x4c1cb7(0x552)](_0x37e993[_0x4c1cb7(0x6b0)]) && (_0x4c1cb7(0x478) === _0x4c1cb7(0x478) ? (console[_0x4c1cb7(0x6e2)](_0x4c1cb7(0x9c2)), _0x5f49a9['chats'] = _0x37e993[_0x4c1cb7(0x6b0)][_0x4c1cb7(0x190)](_0xa32df3 => ({ 'id': _0x4c1cb7(0x645) + _0xa32df3['id'], 'type': 'private', 'participantIds': [_0xa32df3['id']] })), _0x37e993[_0x4c1cb7(0x8af)] && (_0x5f49a9[_0x4c1cb7(0x824)] = 'chat_' + _0x37e993[_0x4c1cb7(0x8af)]), _0x37e993['characters'][_0x4c1cb7(0x170)](_0x18e600 => { const _0x322b76 = _0x4c1cb7; if (_0x322b76(0x2cf) === _0x322b76(0x2b2)) _0x126206[_0x322b76(0x4fb)][_0x322b76(0x69d)](_0x5a1c8c, 0x1), _0x10c8c7(), _0x4e1a3a(); else { const _0x4fea26 = _0x322b76(0x39b) + _0x18e600['id'], _0x183c0a = _0x322b76(0x5b2) + _0x18e600['id'], _0x1fda4e = localStorage[_0x322b76(0x6ba)](_0x4fea26); _0x1fda4e && (_0x322b76(0x408) !== _0x322b76(0x408) ? (_0x3dc2fd = _0x42254a[_0x322b76(0x95f)](_0x322b76(0x2d6)), _0x564d72['id'] = _0x322b76(0x90a) + _0x246907['id'], _0x1c1f6e[_0x322b76(0x665)][_0x322b76(0x962)](_0x301967)) : (localStorage[_0x322b76(0x421)](_0x183c0a, _0x1fda4e), localStorage[_0x322b76(0x5ed)](_0x4fea26))); } })) : _0xca112c('生成日记失败:\x20' + _0x294e4e[_0x4c1cb7(0xb58)])); } else _0x2818bf['src'] = _0x21b0f5[_0x4c1cb7(0x7dc)](_0x3320d6), _0xa8e8ec['style']['display'] = _0x4c1cb7(0x888), _0x5854a3['style']['border'] = 'none'; } catch (_0x38799b) { console[_0x4c1cb7(0x7a4)](_0x4c1cb7(0x4fe), _0x38799b), _0x5f49a9[_0x4c1cb7(0x6b0)] = [], _0x5f49a9[_0x4c1cb7(0x42d)] = [], _0x5f49a9[_0x4c1cb7(0x824)] = null; try { _0x4c1cb7(0xab2) === _0x4c1cb7(0xab2) ? localStorage['removeItem'](_0x4c1cb7(0x4cd)) : _0x511262['setItem'](_0x15946f, _0x579f5a[_0x4c1cb7(0x795)](_0x587a6d)); } catch (_0x717605) { 'SQLXw' === 'SQLXw' ? console[_0x4c1cb7(0x7a4)](_0x4c1cb7(0x810), _0x717605) : _0x24a964[_0x4c1cb7(0x2d6)][_0x4c1cb7(0x416)] = _0x4c1cb7(0x8b4); } } let _0xf96da6 = ![]; if (_0x5f49a9[_0x4c1cb7(0x6b0)][_0x4c1cb7(0x2ed)] === 0x0) { if (_0x4c1cb7(0x706) === 'LJWRo') _0xf96da6 = !![], _0x5f49a9[_0x4c1cb7(0x824)] = null; else return; } else !_0x5f49a9['chats'][_0x4c1cb7(0x7ed)](_0x5eecff => _0x5eecff['id'] === _0x5f49a9[_0x4c1cb7(0x824)]) && (_0x5f49a9['activeChatId'] = _0x5f49a9[_0x4c1cb7(0x42d)][0x0]?.['id'] || null); return _0x39e4f0(), _0xf96da6; } function _0x3c4da6() { const _0x62c423 = _0x4d95ce; if (_0x62c423(0x3b9) === _0x62c423(0x3b9)) { if (!_0x5f49a9[_0x62c423(0x824)]) return; try { localStorage[_0x62c423(0x421)](_0x62c423(0x39b) + _0x5f49a9[_0x62c423(0x824)], JSON['stringify'](_0x5f49a9[_0x62c423(0xb06)])); } catch (_0x3d5ed3) { console[_0x62c423(0x7a4)](_0x62c423(0x7e9), _0x3d5ed3), _0xd5e395(_0x62c423(0x8e6)); } } else _0x3ec318[_0x62c423(0x911)] === 'Enter' && !_0x30a1d6[_0x62c423(0x8d8)] && (_0x3ff464[_0x62c423(0x6ce)](), _0xc27fa7()); } function _0x2e1725() { const _0x1238df = _0x4d95ce; if ('NvdFM' !== 'mzgHj') { if (!_0x5f49a9[_0x1238df(0x824)]) { if (_0x1238df(0x9a8) !== _0x1238df(0x9a8)) _0xd542c2[_0x1238df(0x7a4)](_0x1238df(0x639), _0x314bf7); else { _0x5f49a9[_0x1238df(0xb06)] = [], _0x56911c(); return; } } let _0x18c6e5 = null; try { _0x1238df(0x487) === _0x1238df(0x487) ? _0x18c6e5 = localStorage[_0x1238df(0x6ba)](_0x1238df(0x39b) + _0x5f49a9['activeChatId']) : _0x25e8d8['getElementById'](_0x1238df(0x917))['style']['setProperty'](_0x1238df(0x777), _0x1238df(0x7aa) + _0x290d1a + ')'); } catch (_0x12f4ca) { _0x1238df(0x990) === _0x1238df(0x990) ? console[_0x1238df(0x7a4)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x5f49a9[_0x1238df(0x824)], _0x12f4ca) : (_0x2c4c07[_0x1238df(0x2d6)][_0x1238df(0x486)] = _0x1238df(0x7aa) + _0x5b8e8a[_0x1238df(0x7dc)](_0x51eb00) + ')', _0x5eb3d9[_0x1238df(0x2d6)][_0x1238df(0x59a)] = _0x1238df(0x6ac), _0x24ad83['style'][_0x1238df(0xa2e)] = _0x1238df(0x634)); } let _0x4c748e = []; if (_0x18c6e5) { if ('NNLja' === 'mBfUS') { const _0x3f0d0f = _0x27e2ce[_0x1238df(0x374)](_0x1238df(0x22f)); _0x3f0d0f && _0x12fc95 && (_0x3f0d0f[_0x1238df(0x984)] = _0x592233[_0x1238df(0x7dc)](_0x20476f)); } else try { const _0x2c6f43 = JSON[_0x1238df(0x468)](_0x18c6e5); Array[_0x1238df(0x552)](_0x2c6f43) && (_0x4c748e = _0x2c6f43[_0x1238df(0x8be)](_0x1110a1 => _0x1110a1 && typeof _0x1110a1 === _0x1238df(0x767) && typeof _0x1110a1['role'] === _0x1238df(0x267) && typeof _0x1110a1[_0x1238df(0x47e)] !== _0x1238df(0x378))); } catch (_0x18d916) { if (_0x1238df(0x765) !== _0x1238df(0x765)) { const _0x338372 = _0x3ea236[_0x1238df(0x95f)]('div'); _0x338372[_0x1238df(0x290)] = _0x1238df(0x12f), _0x338372[_0x1238df(0x279)] = _0x1238df(0x5c7) + _0x2cf4f9[_0x1238df(0x551)] + _0x1238df(0x8ce) + _0x3fbe7d[_0x1238df(0xaac)]['toFixed'](0x2) + _0x1238df(0x986) + _0x5cba62['id'] + '\x22>&times;</button></div>', _0x27ddf6[_0x1238df(0x962)](_0x338372); } else { console[_0x1238df(0x7a4)](_0x1238df(0xae4) + _0x5f49a9['activeChatId'] + _0x1238df(0x7ee), _0x18d916); try { localStorage[_0x1238df(0x5ed)](_0x1238df(0x39b) + _0x5f49a9[_0x1238df(0x824)]); } catch (_0x66b26) { console['error'](_0x1238df(0x49e), _0x66b26); } } } } _0x5f49a9[_0x1238df(0xb06)] = _0x4c748e, _0x4225c7['innerHTML'] = '', _0x5f49a9[_0x1238df(0xb06)] && _0x5f49a9[_0x1238df(0xb06)][_0x1238df(0x170)]((_0x140806, _0x30feda) => _0x4b6e3c(_0x140806, _0x30feda)), setTimeout(() => { const _0x38a82f = _0x1238df; _0x4225c7[_0x38a82f(0x3c6)] = _0x4225c7[_0x38a82f(0xa65)]; }, 0x0); } else _0x577873(), _0x364ee8(_0x1238df(0x134), 'home'); } async function _0x3a71db() { const _0x4678c5 = _0x4d95ce, _0x463ffd = document['getElementById']('home-screen'); if (!_0x463ffd) { if (_0x4678c5(0x9bc) !== _0x4678c5(0x9bc)) delete _0x5297e0[_0x4678c5(0x32d)], _0x1f9397(), _0x1e3648(_0x2dc24c['id'], _0x4678c5(0x48b)), _0xf30332('已恢复默认。'), _0x31381a(!![]); else { console[_0x4678c5(0x7a4)]('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!'); return; } } try { let _0x36ada0 = await _0x15e0c2(_0x4678c5(0x62d)); if (!_0x36ada0) { const _0x5cf737 = localStorage['getItem'](_0x4678c5(0x5b6)); _0x5cf737 && (console['log']('正在为你搬运旧壁纸到新仓库...'), _0x36ada0 = await _0x34bb22(_0x5cf737), await _0x5a0c6c(_0x4678c5(0x62d), _0x36ada0), localStorage[_0x4678c5(0x5ed)](_0x4678c5(0x5b6))); } _0x36ada0 ? (_0x463ffd[_0x4678c5(0x2d6)][_0x4678c5(0x486)] = _0x4678c5(0x7aa) + URL['createObjectURL'](_0x36ada0) + ')', _0x463ffd[_0x4678c5(0x2d6)][_0x4678c5(0x59a)] = _0x4678c5(0x6ac), _0x463ffd['style'][_0x4678c5(0xa2e)] = _0x4678c5(0x634)) : _0x4678c5(0x82c) === _0x4678c5(0x82c) ? _0x463ffd[_0x4678c5(0x2d6)]['backgroundImage'] = '' : _0x4ab45d['image'] = _0x436e1d; } catch (_0x5ac02f) { console[_0x4678c5(0x7a4)](_0x4678c5(0x899), _0x5ac02f), _0x463ffd && (_0x463ffd[_0x4678c5(0x2d6)][_0x4678c5(0x486)] = ''); } } function _0x1f43cd() { const _0x1c167c = _0x4d95ce, _0x851023 = localStorage['getItem'](_0x1c167c(0x751)); _0x851023 ? document[_0x1c167c(0x374)](_0x1c167c(0x917))['style'][_0x1c167c(0x4c2)]('--feed-bg-image', _0x1c167c(0x7aa) + _0x851023 + ')') : document[_0x1c167c(0x374)](_0x1c167c(0x917))[_0x1c167c(0x2d6)][_0x1c167c(0x4c2)](_0x1c167c(0x777), 'none'); } async function _0x463ec5(_0xf66cba) { const _0x3d3246 = _0x4d95ce; try { if (_0x3d3246(0x489) !== _0x3d3246(0x180)) await _0x5a0c6c(_0x3d3246(0x62d), _0xf66cba), await _0x3a71db(), _0xd5e395(_0x3d3246(0x7c8)); else { _0x3acfa1(_0x3d3246(0x5ad)); return; } } catch (_0xef1fa2) { if ('JZXtn' !== 'JZXtn') { const _0x2ef5cf = _0x2c7301[_0x3d3246(0x7dc)](_0x12bd7f); _0x4f1633['style'][_0x3d3246(0x486)] = _0x3d3246(0x730) + _0x2ef5cf + '\x27)'; } else console[_0x3d3246(0x7a4)]('保存壁纸失败:', _0xef1fa2), _0xd5e395(_0x3d3246(0x914) + _0xef1fa2[_0x3d3246(0xb58)]); } } function _0x4c51ca(_0x365a9) { const _0x21a8b4 = _0x4d95ce; if (_0x21a8b4(0x674) === _0x21a8b4(0x977)) { const _0x3be081 = _0x391dbb[_0x21a8b4(0x468)](_0x5ef53a); _0x3be081[_0x21a8b4(0x6a1)] && (_0x353ec9[_0x21a8b4(0x6a1)] = _0x3be081[_0x21a8b4(0x6a1)], _0x3aa4ce[_0x21a8b4(0x6e2)](_0x21a8b4(0x900))); } else { const _0x384465 = { 'quotedMessage': null, 'content': _0x365a9 }, _0x371ccb = _0x365a9[_0x21a8b4(0xa55)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x371ccb && ('fYzkJ' === _0x21a8b4(0x303) ? (_0x384465[_0x21a8b4(0x3a2)] = { 'sender': _0x371ccb[0x1]['trim'](), 'content': _0x371ccb[0x2][_0x21a8b4(0x1c8)]() }, _0x384465[_0x21a8b4(0x47e)] = _0x365a9[_0x21a8b4(0x80c)](_0x371ccb[0x0]['length'])[_0x21a8b4(0x1c8)]()) : _0x96d8d0(_0x21a8b4(0x24a))), _0x384465; } } const _0x13a6cc = document[_0x4d95ce(0x374)](_0x4d95ce(0x5c4)), _0x5f14ab = document['getElementById'](_0x4d95ce(0x9aa)), _0x113300 = document[_0x4d95ce(0x374)](_0x4d95ce(0x93f)), _0xc5a83 = document[_0x4d95ce(0x374)]('delete-message-button'), _0x300acc = document[_0x4d95ce(0x374)](_0x4d95ce(0x23c)), _0x9e3f70 = document[_0x4d95ce(0x374)](_0x4d95ce(0x5e2)), _0x335f2f = document[_0x4d95ce(0x374)]('edit-message-modal'), _0x25ccae = document['getElementById']('edit-message-backdrop'), _0x360fcd = document[_0x4d95ce(0x374)](_0x4d95ce(0x7ec)), _0x43bd7b = document[_0x4d95ce(0x374)](_0x4d95ce(0x316)), _0x5d2c49 = document[_0x4d95ce(0x374)](_0x4d95ce(0x91e)); let _0x28e02a = null; function _0x3506ed(_0x4de1d0) { const _0x2ca509 = _0x4d95ce; _0x28e02a = _0x4de1d0, _0x13a6cc[_0x2ca509(0x8f0)][_0x2ca509(0x132)]('show'); } function _0x3ec91a() { const _0x309b4d = _0x4d95ce; _0x309b4d(0x86a) !== _0x309b4d(0x463) ? _0x13a6cc[_0x309b4d(0x8f0)][_0x309b4d(0x31f)](_0x309b4d(0x18c)) : _0x2f03cd['click'](); } function _0x1874b0() { _0x3ec91a(), _0x28e02a = null; } function _0x9f0bbb() { const _0x219109 = _0x4d95ce; if (_0x28e02a === null) return; _0x5f49a9[_0x219109(0xb06)][_0x219109(0x69d)](_0x28e02a, 0x1), _0x3c4da6(), _0x2515ef(), _0x1874b0(); } function _0x43463b() { const _0x395eeb = _0x4d95ce; if (_0x28e02a === null) return; const _0x52bb28 = _0x5f49a9[_0x395eeb(0xb06)][_0x28e02a]; if (!_0x52bb28) return; _0x360fcd[_0x395eeb(0x330)] = _0x52bb28[_0x395eeb(0x47e)], _0x3ec91a(), _0x335f2f[_0x395eeb(0x8f0)][_0x395eeb(0x132)](_0x395eeb(0x18c)), _0x360fcd['focus'](); } function _0x3dd856() { const _0x4f1e4c = _0x4d95ce; if (_0x28e02a === null) return; const _0x1b1c75 = _0x360fcd[_0x4f1e4c(0x330)]['trim'](); if (_0x1b1c75 === '') { if (_0x4f1e4c(0x334) === _0x4f1e4c(0x334)) { _0x467e16(); return; } else { _0x253145[_0x4f1e4c(0x279)] = _0x4f1e4c(0x728); return; } } const _0x492274 = _0x5f49a9[_0x4f1e4c(0xb06)][_0x28e02a]; _0x492274 && (_0x492274[_0x4f1e4c(0x47e)] = _0x1b1c75, _0x3c4da6(), _0x2515ef()), _0x335f2f[_0x4f1e4c(0x8f0)][_0x4f1e4c(0x31f)](_0x4f1e4c(0x18c)), _0x28e02a = null; } function _0x467e16() { const _0x4f040c = _0x4d95ce; _0x335f2f[_0x4f040c(0x8f0)]['remove'](_0x4f040c(0x18c)), _0x28e02a = null; } _0x5f14ab['addEventListener'](_0x4d95ce(0x173), _0x1874b0), _0x300acc[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x1874b0), _0xc5a83[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x9f0bbb), _0x113300[_0x4d95ce(0x458)]('click', _0x43463b), _0x9e3f70[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x5538ab), _0xb7e049[_0x4d95ce(0x458)]('click', _0x174b23), _0x43bd7b[_0x4d95ce(0x458)]('click', _0x3dd856), _0x5d2c49['addEventListener'](_0x4d95ce(0x173), _0x467e16), _0x25ccae[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x467e16); function _0x5538ab() { const _0x58bbd4 = _0x4d95ce; if (_0x28e02a === null) return; const _0x1f3749 = _0x5f49a9[_0x58bbd4(0xb06)][_0x28e02a]; if (!_0x1f3749) return; const _0x166f1c = _0x39d291(); let _0x5c413e = '未知'; if (_0x1f3749[_0x58bbd4(0x664)] === _0x58bbd4(0x384)) _0x5c413e = _0x5f49a9[_0x58bbd4(0xb5d)][_0x58bbd4(0x7d9)] || '我'; else { if (_0x58bbd4(0x4ac) !== 'zVTXx') _0x147362[_0x58bbd4(0x6b0)] = _0x5d128c['characters'][_0x58bbd4(0x190)](_0x1a7bfb => ({ 'offlineBackground': '', ..._0x1a7bfb }))[_0x58bbd4(0x8be)](_0x2a798f => _0x2a798f && typeof _0x2a798f === _0x58bbd4(0x767) && _0x2a798f['id']); else { const _0xe1856a = _0x1f3749[_0x58bbd4(0x699)] || _0x166f1c?.[_0x58bbd4(0x258)][0x0], _0x404a19 = _0x590c99(_0xe1856a); _0x5c413e = _0x404a19 ? _0x404a19[_0x58bbd4(0x7d9)] : '角色'; } } let _0x2635f4 = _0x1f3749[_0x58bbd4(0x47e)] || ''; if (_0x1f3749[_0x58bbd4(0x8cd)]) _0x2635f4 = '[表情]'; if (_0x1f3749['image']) _0x2635f4 = _0x58bbd4(0x3ef); if (_0x2635f4[_0x58bbd4(0x2ed)] > 0x32) _0x2635f4 = _0x2635f4[_0x58bbd4(0x80c)](0x0, 0x32) + _0x58bbd4(0x5bd); _0x5f49a9[_0x58bbd4(0x81e)] = { 'sender': _0x5c413e, 'content': _0x2635f4 }, _0x56a533(), _0x1874b0(), _0x1252fb[_0x58bbd4(0x347)](); } function _0x56a533() { const _0x1f71f8 = _0x4d95ce; if (!_0x5f49a9['activeQuote']) return; _0x389b9f['textContent'] = '回复\x20' + _0x5f49a9[_0x1f71f8(0x81e)][_0x1f71f8(0x31d)], _0x2115b6[_0x1f71f8(0x8e3)] = _0x5f49a9[_0x1f71f8(0x81e)][_0x1f71f8(0x47e)], _0x32b677[_0x1f71f8(0x2d6)][_0x1f71f8(0x416)] = 'block'; } function _0x174b23() { const _0x594526 = _0x4d95ce; _0x594526(0x925) !== _0x594526(0x5ec) ? (_0x5f49a9[_0x594526(0x81e)] = null, _0x32b677[_0x594526(0x2d6)][_0x594526(0x416)] = _0x594526(0x8b4)) : _0x2ea7ed[_0x594526(0x7a4)](_0x594526(0x98a), _0x37c4b4); } function _0x53a558(_0xea1b36, _0x382a94) { const _0x2dce46 = _0x4d95ce, _0x1d5581 = document[_0x2dce46(0x374)]('music-widget'); if (_0x1d5581) { if (_0x2dce46(0x156) !== _0x2dce46(0x19f)) _0xea1b36 === _0x2dce46(0x529) ? _0x2dce46(0x937) !== _0x2dce46(0x610) ? _0x1d5581[_0x2dce46(0x2d6)][_0x2dce46(0x416)] = 'inline-block' : _0x3c94f4 += _0x2dce46(0x2bd) + _0x425a52[_0x2dce46(0x76d)] + _0x2dce46(0xa43) + _0x44339c[_0x2dce46(0x1e1)] + ')' : 'QhGEd' === _0x2dce46(0x25d) ? (_0x36a115[_0x2dce46(0x8e3)] = _0x4f3634[_0x2dce46(0x91f)](_0x2dce46(0x983), { 'hour': _0x2dce46(0x75b), 'minute': _0x2dce46(0x75b), 'hour12': ![] }), _0x4ec300[_0x2dce46(0x8e3)] = _0x433057['toLocaleDateString'](_0x2dce46(0x983), { 'month': _0x2dce46(0x366), 'day': _0x2dce46(0x618), 'weekday': _0x2dce46(0x366) })) : _0x1d5581['style'][_0x2dce46(0x416)] = 'none'; else { const _0x513bdb = _0x5f73a0[_0x2dce46(0x796)](_0x2dce46(0x1f6)), _0x4d4192 = _0x47d9f7[_0x2dce46(0x814)]['songId'], _0xfe58ae = _0x80942b(_0x513bdb[_0x2dce46(0x814)][_0x2dce46(0x740)], 0xa); _0x11c655(_0x4d4192, _0xfe58ae, _0x10c50d); } } _0x44d5cb = _0x382a94 || null, Object[_0x2dce46(0x9b3)](_0x38c187)['forEach'](_0x4e4c8 => _0x4e4c8[_0x2dce46(0x8f0)][_0x2dce46(0x31f)](_0x2dce46(0xa54))), _0x38c187[_0xea1b36] && _0x38c187[_0xea1b36]['classList'][_0x2dce46(0x132)](_0x2dce46(0xa54)), _0xea1b36 !== _0x2dce46(0x134) && _0x103c03[_0x2dce46(0x8f0)][_0x2dce46(0x31f)](_0x2dce46(0x5af)); } function _0x2c63a6(_0x4b5222) { const _0x16d158 = _0x4d95ce; _0x4b5222 ? _0x103c03[_0x16d158(0x8f0)][_0x16d158(0x132)]('show-chat-view') : _0x103c03[_0x16d158(0x8f0)][_0x16d158(0x31f)](_0x16d158(0x5af)); } async function _0x223f24() { const _0x26d8ed = _0x4d95ce; _0x4497e7[_0x26d8ed(0x279)] = ''; for (const _0x6ce2b1 of _0x5f49a9[_0x26d8ed(0x42d)]) { const _0x4c8ec7 = document['createElement']('li'); _0x4c8ec7[_0x26d8ed(0x290)] = 'character-item', _0x4c8ec7[_0x26d8ed(0x814)]['id'] = _0x6ce2b1['id']; let _0x27966f = _0x28cae8, _0x8addbe = '群聊', _0x1da0fe = ''; if (_0x6ce2b1[_0x26d8ed(0x433)] === _0x26d8ed(0x838)) { const _0x3da767 = _0x590c99(_0x6ce2b1['participantIds'][0x0]); _0x3da767 ? (_0x27966f = _0x3da767[_0x26d8ed(0x7d6)] || _0x28cae8, _0x8addbe = _0x3da767['name'] || '未命名角色', _0x1da0fe = _0x3da767[_0x26d8ed(0xad9)] || '私聊') : (_0x8addbe = _0x26d8ed(0x968), _0x1da0fe = _0x26d8ed(0x265)); } else { _0x8addbe = _0x6ce2b1[_0x26d8ed(0x7d9)] || '未命名群聊', _0x1da0fe = _0x6ce2b1[_0x26d8ed(0x258)][_0x26d8ed(0x2ed)] + _0x26d8ed(0x398); const _0xb5bb70 = await _0x15e0c2(_0x26d8ed(0x1c0) + _0x6ce2b1['id']); if (_0xb5bb70) _0x27966f = URL['createObjectURL'](_0xb5bb70); } _0x4c8ec7[_0x26d8ed(0x279)] = _0x26d8ed(0x354) + _0x27966f + _0x26d8ed(0x943) + _0x8addbe + _0x26d8ed(0x3ed) + _0x1da0fe + _0x26d8ed(0x48c), _0x4c8ec7[_0x26d8ed(0x179)](_0x26d8ed(0x641))[_0x26d8ed(0x458)]('click', () => { const _0x25023e = _0x26d8ed; _0x25023e(0xae7) === _0x25023e(0xae7) ? (_0xc0e03b(_0x6ce2b1['id']), _0x2c63a6(!![])) : _0x159582['conversationHistory'][_0x25023e(0x170)]((_0x1011be, _0x5ecff6) => _0x5d5b7e(_0x1011be, _0x5ecff6)); }), _0x4497e7[_0x26d8ed(0x962)](_0x4c8ec7); } } function _0x46c9c2() { const _0x42b5a1 = _0x4d95ce, _0x4a4983 = document[_0x42b5a1(0x374)](_0x42b5a1(0x670)); _0x4a4983[_0x42b5a1(0x279)] = ''; const _0x4aba68 = _0x5f49a9[_0x42b5a1(0x6b0)][_0x42b5a1(0x8be)](_0x30ea07 => _0x5f49a9[_0x42b5a1(0x42d)][_0x42b5a1(0x70d)](_0x491561 => _0x491561[_0x42b5a1(0x433)] === _0x42b5a1(0x838) && _0x491561['participantIds'][_0x42b5a1(0x454)](_0x30ea07['id']))); if (_0x4aba68[_0x42b5a1(0x2ed)] === 0x0) { _0x4a4983[_0x42b5a1(0x279)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } _0x4aba68[_0x42b5a1(0x170)](_0x281d3d => { const _0x465a83 = _0x42b5a1; if (_0x465a83(0xa37) !== _0x465a83(0x7fd)) { const _0x3bb3ca = document['createElement']('li'); _0x3bb3ca[_0x465a83(0x290)] = _0x465a83(0x8f5), _0x3bb3ca['dataset'][_0x465a83(0x723)] = _0x281d3d['id'], _0x3bb3ca['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x281d3d[_0x465a83(0x7d6)] || _0x28cae8) + _0x465a83(0x189) + _0x281d3d['name'] + _0x465a83(0xb34) + (_0x281d3d[_0x465a83(0xad9)] || '私聊') + _0x465a83(0x50a), _0x3bb3ca[_0x465a83(0x458)](_0x465a83(0x173), () => { _0x4a9db6(_0x281d3d['id']); }), _0x4a4983[_0x465a83(0x962)](_0x3bb3ca); } else { if (_0x3f8b0b[_0x465a83(0x664)] === 'user') return _0x2c0b54[_0x465a83(0xb5d)]?.['name'] || _0x465a83(0x51d); if (_0x3ba476[_0x465a83(0x699)]) { const _0x529f25 = _0x519543(_0x821a56['senderId']); return _0x529f25?.['name'] || _0x465a83(0x1e9); } if (_0x50f0e0?.['type'] === _0x465a83(0x838)) { const _0x114160 = _0x1fbd87(_0xf62f5[_0x465a83(0x258)][0x0]); return _0x114160?.['name'] || 'AI'; } return 'Assistant'; } }); } async function _0x4a9db6(_0x1a7240) { const _0x3272cf = _0x4d95ce; if (_0x3272cf(0x9fd) === _0x3272cf(0x9fd)) { const _0x33d3c2 = _0x590c99(_0x1a7240); if (!_0x33d3c2) return; document[_0x3272cf(0x374)]('galgame-sprite')['src'] = '', _0x5f49a9[_0x3272cf(0x5b0)] = _0x1a7240; const _0xeacdbe = _0x5f49a9[_0x3272cf(0x42d)]['find'](_0xd9276e => _0xd9276e[_0x3272cf(0x433)] === _0x3272cf(0x838) && _0xd9276e[_0x3272cf(0x258)]['includes'](_0x1a7240)); _0xeacdbe ? (_0x5f49a9[_0x3272cf(0x824)] = _0xeacdbe['id'], _0x39e4f0(), _0x2e1725(), _0x412801(_0x1a7240)) : _0x5f49a9[_0x3272cf(0xb06)] = []; document[_0x3272cf(0x374)](_0x3272cf(0x3ca))[_0x3272cf(0x8e3)] = _0x33d3c2[_0x3272cf(0x7d9)]; const _0x1bd89c = document['getElementById'](_0x3272cf(0xaa7)); try { const _0x3e3d17 = await _0x15e0c2('char_offline_bg_' + _0x1a7240); _0x3e3d17 ? (_0x1bd89c[_0x3272cf(0x2d6)][_0x3272cf(0x486)] = _0x3272cf(0x730) + URL[_0x3272cf(0x7dc)](_0x3e3d17) + '\x27)', _0x1bd89c[_0x3272cf(0x2d6)][_0x3272cf(0x59a)] = _0x3272cf(0x6ac), _0x1bd89c[_0x3272cf(0x2d6)]['backgroundPosition'] = 'center') : _0x1bd89c['style'][_0x3272cf(0x486)] = _0x3272cf(0x8b4); } catch (_0x3ef11a) { if (_0x3272cf(0x38b) !== 'qiodW') console[_0x3272cf(0x7a4)]('加载见面背景失败\x20for\x20' + _0x1a7240 + ':', _0x3ef11a), _0x1bd89c[_0x3272cf(0x2d6)][_0x3272cf(0x486)] = _0x3272cf(0x8b4); else { _0x537e8b[_0x3272cf(0x279)] = _0x3272cf(0x7bf); return; } } _0x41ddb6(), _0x1ba401(); if (_0x508474) clearInterval(_0x508474); _0x4020ad(), _0x508474 = setInterval(_0x4020ad, 0x2710), document['getElementById'](_0x3272cf(0x85f))[_0x3272cf(0x2d6)][_0x3272cf(0x416)] = _0x3272cf(0x888), _0x53a558(_0x3272cf(0x6a3), _0x3272cf(0x9da)); } else { const _0x107f8f = { 'id': _0x5d15de['id'], 'url': _0xc23f1a[_0x3272cf(0x4ca)] }; _0x3e164d(this, _0x107f8f); } } function _0x1ba401() { const _0x1c28df = _0x4d95ce; if (_0x1c28df(0x483) === _0x1c28df(0x483)) { const _0x3347d8 = document[_0x1c28df(0x374)](_0x1c28df(0x286)); _0x3347d8[_0x1c28df(0x279)] = ''; const _0x1e159a = _0x3347d8['querySelector'](_0x1c28df(0x1f3)); if (_0x1e159a) _0x1e159a[_0x1c28df(0x31f)](); _0x5f49a9[_0x1c28df(0xb06)] && _0x5f49a9[_0x1c28df(0xb06)][_0x1c28df(0x170)]((_0xafd487, _0x779d1c) => { const _0x440aa6 = _0x1c28df; if (!_0xafd487[_0x440aa6(0x9d1)] || _0xafd487[_0x440aa6(0x664)] === 'system') return; const _0x1ca704 = document[_0x440aa6(0x95f)]('p'); _0x1ca704[_0x440aa6(0x814)][_0x440aa6(0x740)] = _0x779d1c; const _0x54d3ec = _0xafd487[_0x440aa6(0x47e)][_0x440aa6(0xa38)](/\n/g, '<br>'); let _0x270820 = '', _0x513342 = ''; const _0x22305c = _0x30ad29(_0x5f49a9[_0x440aa6(0x824)]); if (_0xafd487['role'] === _0x440aa6(0x384)) { if ('wShFh' !== 'wShFh') return _0x4d52bf['userProfiles'][_0x440aa6(0x7ed)](_0x540d95 => _0x540d95['id'] === _0x15090b[_0x440aa6(0x4f6)]) || _0x4caa2e[_0x440aa6(0x4d5)][0x0]; else _0x270820 = _0x22305c[_0x440aa6(0x7d9)] || '我', _0x513342 = 'speaker-user'; } else { if (_0xafd487[_0x440aa6(0x664)] === _0x440aa6(0x913)) { if (_0x440aa6(0x239) !== _0x440aa6(0x239)) { const { omniText: _0x516feb } = _0x12dc3d(_0x1b968e['id'], null), _0x2b2af9 = _0x29465c(_0x304eaa['id']), _0x18e59e = _0x82c992[_0x440aa6(0x128)] && _0x32d1b8[_0x440aa6(0x128)]['length'] > 0x0 ? _0x440aa6(0xa49) + _0x13d72e['name'] + _0x440aa6(0x599) + _0x4fff7a[_0x440aa6(0x128)]['map'](_0x3bb0d5 => _0x4e5188[_0x440aa6(0x1df)]['find'](_0x4e0207 => _0x4e0207['id'] === _0x3bb0d5))[_0x440aa6(0x8be)](_0x11ce46)[_0x440aa6(0x190)](_0x285580 => '\x0a##\x20条目:\x20' + _0x285580[_0x440aa6(0x7d9)] + '\x0a' + _0x285580[_0x440aa6(0x47e)])[_0x440aa6(0x414)]('') : ''; return '-\x20姓名:\x20' + _0x5b1324[_0x440aa6(0x7d9)] + _0x440aa6(0xa6e) + _0x32c36a['id'] + _0x440aa6(0x88a) + _0x47e7e0[_0x440aa6(0x8eb)] + '\x0a\x20\x20近期记忆:\x0a' + _0x516feb + '\x0a' + _0x2b2af9 + '\x0a' + _0x18e59e; } else { const _0x24d811 = _0x590c99(_0xafd487[_0x440aa6(0x699)] || _0x5f49a9[_0x440aa6(0x5b0)]); _0x270820 = _0x24d811?.[_0x440aa6(0x7d9)] || '角色', _0x513342 = _0x440aa6(0xa2c); } } } _0x1ca704[_0x440aa6(0x2d6)][_0x440aa6(0xb5c)] = _0x440aa6(0x6e5), _0x1ca704[_0x440aa6(0x2d6)][_0x440aa6(0x21c)] = _0x440aa6(0xa98), _0x1ca704[_0x440aa6(0x2d6)][_0x440aa6(0x6c1)] = '8px', _0x1ca704[_0x440aa6(0x2d6)][_0x440aa6(0x504)] = '1em', _0x270820 ? _0x1ca704['innerHTML'] = _0x440aa6(0x45b) + _0x513342 + '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20' + (_0x513342 === _0x440aa6(0x385) ? _0x440aa6(0x89f) : _0x440aa6(0x456)) + ';\x22>' + _0x270820 + _0x440aa6(0x25e) + _0x54d3ec : _0x440aa6(0x308) !== 'SYdJq' ? (_0x1ca704[_0x440aa6(0x290)] = 'narrator', _0x1ca704['style'][_0x440aa6(0x395)] = _0x440aa6(0x7c6), _0x1ca704['style']['color'] = _0x440aa6(0x3cf), _0x1ca704[_0x440aa6(0x279)] = _0x54d3ec) : _0x443fa6(_0x440aa6(0x55f)), _0x3347d8[_0x440aa6(0x962)](_0x1ca704); }); if (_0x5f49a9[_0x1c28df(0x263)]) { let _0x13233e = _0x3347d8['querySelector'](_0x1c28df(0x297)); !_0x13233e && (_0x13233e = document[_0x1c28df(0x95f)](_0x1c28df(0x754)), _0x13233e[_0x1c28df(0x290)] = _0x1c28df(0x15e), _0x13233e[_0x1c28df(0x8e3)] = _0x1c28df(0x7fe), _0x13233e[_0x1c28df(0x2d6)][_0x1c28df(0xb5c)] = _0x1c28df(0x6e5), _0x13233e[_0x1c28df(0x2d6)][_0x1c28df(0x21c)] = _0x1c28df(0xa98), _0x13233e[_0x1c28df(0x2d6)][_0x1c28df(0x6c1)] = _0x1c28df(0x207), _0x3347d8[_0x1c28df(0x962)](_0x13233e)); } const _0x4e6c23 = document[_0x1c28df(0x95f)]('div'); _0x4e6c23['id'] = _0x1c28df(0x205), _0x3347d8[_0x1c28df(0x962)](_0x4e6c23), setTimeout(() => { const _0x4cbaea = _0x1c28df; if ('mQDvH' === _0x4cbaea(0x886)) _0x4e6c23[_0x4cbaea(0x948)]({ 'behavior': _0x4cbaea(0x34b), 'block': _0x4cbaea(0x329) }); else { const _0x209360 = { 'role': _0x4cbaea(0x913), 'content': _0x4cbaea(0x96a) + _0x57cef2[_0x4cbaea(0x7d9)] + ']', 'displayUrl': _0x4f3b6b[_0x4cbaea(0x93b)], 'senderId': _0x437f78[_0x4cbaea(0x699)], 'timestamp': _0x265eee[_0x4cbaea(0x780)](), 'isOffline': _0x5b589c }; _0x26e0c4['conversationHistory']['push'](_0x209360); } }, 0x32); } else _0x258889 += _0x1c28df(0x264); } function _0x2515ef() { const _0x56f8c2 = _0x4d95ce, _0x1d9866 = document[_0x56f8c2(0x179)](_0x56f8c2(0x19c)); if (!_0x1d9866) return; if (_0x1d9866['id'] === _0x56f8c2(0x979)) _0x56f8c2(0xa31) === _0x56f8c2(0xa1d) ? (_0x4266a7[_0x56f8c2(0x6e2)](_0x56f8c2(0x7cf) + _0x1c0fb8), _0x277363[_0x56f8c2(0x966)](_0x4302b0, { 'keyPath': 'id' })) : _0x1ba401(); else { if (_0x56f8c2(0x326) !== _0x56f8c2(0x326)) { const _0x3442c2 = []; if (_0x1693a1['content']) _0x3442c2['push']({ 'text': _0x57bfad[_0x56f8c2(0x47e)] }); if (_0x336ddb[_0x56f8c2(0xad0)]) { const _0x1c449b = _0x433420['image'][_0x56f8c2(0x77e)](',')[0x1], _0x583fa0 = _0x4f3f22['image'][_0x56f8c2(0x80c)](_0x3dc61f[_0x56f8c2(0xad0)][_0x56f8c2(0x656)](':') + 0x1, _0x52d50c['image'][_0x56f8c2(0x656)](';')) || _0x56f8c2(0x182); _0x3442c2[_0x56f8c2(0x238)]({ 'inline_data': { 'mime_type': _0x583fa0, 'data': _0x1c449b } }); } return _0x3442c2; } else _0x56911c(); } } function _0x56911c() { const _0x337603 = _0x4d95ce; if (_0x337603(0x127) !== _0x337603(0x3d6)) { const _0x213d81 = _0x5f49a9[_0x337603(0xb06)][_0x337603(0x8be)](_0x5eed87 => !_0x5eed87[_0x337603(0x9d1)] && _0x5eed87[_0x337603(0x664)] !== _0x337603(0x1ce)); if (_0x213d81[_0x337603(0x2ed)] > _0x5f49a9[_0x337603(0x460)]) { let _0x3e3955 = _0x4225c7[_0x337603(0x179)](_0x337603(0x66b)); !_0x3e3955 && (_0x3e3955 = document[_0x337603(0x95f)]('button'), _0x3e3955['textContent'] = _0x337603(0x41a), _0x3e3955[_0x337603(0x290)] = _0x337603(0x393), _0x3e3955[_0x337603(0x2d6)][_0x337603(0x6c8)] = 'auto', _0x3e3955[_0x337603(0x2d6)]['margin'] = _0x337603(0x992), _0x3e3955['style'][_0x337603(0x21c)] = _0x337603(0x756), _0x3e3955[_0x337603(0x509)] = () => { const _0x267467 = _0x337603, _0x1cad9a = _0x4225c7, _0xa65f7e = _0x1cad9a['scrollHeight'], _0x3be045 = _0x1cad9a['scrollTop']; _0x5f49a9[_0x267467(0x460)] += 0x64, _0x56911c(), requestAnimationFrame(() => { const _0x4c5383 = _0x267467, _0x233edc = _0x1cad9a['scrollHeight']; _0x1cad9a[_0x4c5383(0x3c6)] = _0x3be045 + (_0x233edc - _0xa65f7e); }); }, _0x4225c7[_0x337603(0x519)] ? _0x337603(0x67c) !== 'XdAXm' ? _0x5f05a0 = _0x337603(0x54e) + _0x3e1eac['id'] + _0x337603(0x81f) + (_0x5166a1[_0x337603(0x461)] || _0x265d9b) + _0x337603(0x143) + _0x3bb2a6[_0x337603(0x76d)] + _0x337603(0x41b) + _0x4bd099['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>' + (_0x13bda4['playableUrl'] ? '▶' : '⚠') + _0x337603(0x7bc) : _0x4225c7[_0x337603(0x147)](_0x3e3955, _0x4225c7[_0x337603(0x519)]) : _0x4225c7['appendChild'](_0x3e3955)); } else { const _0x31c2fa = _0x4225c7[_0x337603(0x179)](_0x337603(0x66b)); if (_0x31c2fa) _0x31c2fa[_0x337603(0x31f)](); } Array['from'](_0x4225c7[_0x337603(0x2bb)])['forEach'](_0xc364d1 => { const _0x49bb5c = _0x337603; if (!_0xc364d1[_0x49bb5c(0x8f0)]['contains'](_0x49bb5c(0x846))) { if (_0x49bb5c(0x1ab) === _0x49bb5c(0x39e)) { const _0x30bb0a = { 'id': 'msg_' + _0x1855f2[_0x49bb5c(0x75a)], 'url': _0x204348[_0x49bb5c(0x4ca)] }; _0x3cea67(this, _0x30bb0a); } else _0xc364d1[_0x49bb5c(0x31f)](); } }); const _0xf04c8e = _0x213d81[_0x337603(0xa24)](-_0x5f49a9[_0x337603(0x460)]); _0xf04c8e[_0x337603(0x170)](_0xeb915b => { const _0x2da622 = _0x337603; if (_0x2da622(0x62e) !== 'jojtt') { const _0x53ae0a = _0x5f49a9['conversationHistory'][_0x2da622(0x656)](_0xeb915b); _0x53ae0a > -0x1 && _0x4b6e3c(_0xeb915b, _0x53ae0a); } else _0x266b24(![]), _0x5e7715[_0x2da622(0x330)] = ''; }); if (_0x5f49a9[_0x337603(0x263)]) { if (_0x337603(0xaeb) === _0x337603(0xa7e)) { const _0x2116a4 = _0x3a394d(_0x146432[_0x337603(0x57a)]())[_0x337603(0x159)](0x2, '0'), _0x5750e8 = _0x5dcb4c(_0x4b45ef[_0x337603(0xaaa)]())[_0x337603(0x159)](0x2, '0'); _0xfa44b1['textContent'] = _0x2116a4 + ':' + _0x5750e8; const _0x2cb171 = _0x194628[_0x337603(0xa47)]() + 0x1, _0x5db575 = _0x33978e[_0x337603(0x465)](), _0x535f2 = [_0x337603(0x3bc), '星期一', _0x337603(0xabe), _0x337603(0x6f3), '星期四', '星期五', _0x337603(0x1e8)][_0x164411[_0x337603(0x76e)]()]; _0x5b9007['textContent'] = _0x2cb171 + '月' + _0x5db575 + '日\x20' + _0x535f2; } else { let _0x2ce3e1 = _0x4225c7['querySelector'](_0x337603(0x297)); !_0x2ce3e1 && (_0x337603(0xad4) !== _0x337603(0x7cc) ? (_0x2ce3e1 = document[_0x337603(0x95f)]('div'), _0x2ce3e1[_0x337603(0x290)] = _0x337603(0x15e), _0x2ce3e1[_0x337603(0x8e3)] = '对方正在输入...', _0x4225c7['appendChild'](_0x2ce3e1)) : _0x40050d[_0x337603(0x962)](_0x13ef8b)); } } _0xf04c8e['length'] <= _0x5f49a9['displayedMessageCount'] && setTimeout(() => { const _0x205862 = _0x337603; if (_0x205862(0x30e) !== _0x205862(0xb33)) _0x4225c7[_0x205862(0x3c6)] = _0x4225c7[_0x205862(0xa65)]; else { const _0x5c822e = _0x31caba[_0x16b21c]; _0x4d551f(_0x5c822e); } }, 0x0); } else _0x2b1d09[_0x337603(0x2d6)][_0x337603(0x486)] = _0x337603(0x730) + _0x317ea1[_0x337603(0x7dc)](_0x349fde) + '\x27)', _0x309167[_0x337603(0x2d6)]['backgroundSize'] = _0x337603(0x6ac), _0x19deed[_0x337603(0x2d6)]['backgroundPosition'] = 'center'; } function _0x4b6e3c(_0xe66ba0, _0x39b3bb) { const _0x22b283 = _0x4d95ce, { role: _0x26bfc8, content: _0x332dd9, displayUrl: _0x48b96d, image: _0x26b5fd, senderId: _0x1140c1 } = _0xe66ba0, _0x1ee58d = _0x26bfc8 === 'assistant' ? 'ai' : _0x26bfc8, _0x453c9f = _0x39d291(), _0x3a711f = document['createElement']('div'); _0x3a711f[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0x38d), _0x1ee58d), _0x3a711f[_0x22b283(0x814)]['historyIndex'] = _0x39b3bb; const _0x45b85d = document['createElement'](_0x22b283(0x754)); _0x45b85d[_0x22b283(0x290)] = 'message-bubble-row'; let _0x25a790 = ''; if (_0x26bfc8 === _0x22b283(0x384)) { if ('ceRpv' !== _0x22b283(0x187)) { const _0xd80d75 = _0x30ad29(_0x5f49a9[_0x22b283(0x824)]); _0x25a790 = _0xd80d75[_0x22b283(0x7d6)] || _0x42c494; } else _0x261999['scrollIntoView']({ 'behavior': _0x22b283(0x34b), 'block': _0x22b283(0x329) }); } else { if (_0x22b283(0x8da) === _0x22b283(0x8da)) { _0x25a790 = _0x28cae8; let _0x3ef1a4 = null; if (_0x453c9f?.[_0x22b283(0x433)] === _0x22b283(0x838)) _0x22b283(0x2ec) !== 'ScBFG' ? _0x3ef1a4 = _0x590c99(_0x453c9f[_0x22b283(0x258)][0x0]) : _0x248063[_0x22b283(0x2d6)]['display'] = _0x22b283(0x350); else _0x453c9f?.[_0x22b283(0x433)] === _0x22b283(0x24e) && _0x1140c1 && (_0x3ef1a4 = _0x590c99(_0x1140c1)); _0x3ef1a4?.[_0x22b283(0x7d6)] && (_0x25a790 = _0x3ef1a4['avatar']); } else { _0xcae3ac[_0x22b283(0x390)](_0x22b283(0x961)); const _0x2e5cfd = _0x31351f[_0x22b283(0x258)][_0x22b283(0x190)](_0x232a21)[_0x22b283(0x8be)](_0x338c24); if (!_0x2e5cfd[_0x22b283(0x2ed)]) return; let _0x206eff = 0x0; for (const _0x32a245 of _0x2e5cfd) { _0x1677f3(_0x32a245, { 'force': !![], 'delayMs': _0x206eff }), _0x206eff += 0x1f4; } } } let _0x310b02 = ''; const _0x1cfbde = _0x590c99(_0x453c9f?.[_0x22b283(0x258)][0x0]); if (_0x26bfc8 === 'user') _0x22b283(0x6f6) === _0x22b283(0x6f6) ? _0x1cfbde && (_0x310b02 = _0x1cfbde[_0x22b283(0x1d9)] || '') : (_0x35a080[_0x22b283(0x8f0)][_0x22b283(0x132)]('active'), _0x145496[_0x22b283(0x948)]({ 'behavior': _0x22b283(0x163), 'block': _0x22b283(0x634) })); else { if (_0x22b283(0x81b) === _0x22b283(0x137)) { const _0x5d794e = _0x43d336[_0x22b283(0x258)][0x0]; _0x5cea79[_0x22b283(0x8f0)]['add']('bubble-' + _0x5d794e); } else { let _0x5cda74 = null; if (_0x453c9f?.[_0x22b283(0x433)] === _0x22b283(0x838)) { if (_0x22b283(0x945) === _0x22b283(0x217)) { const _0x2530be = _0x10cddd[_0x22b283(0x89a)][_0x22b283(0x814)]['id']; _0x2bc15e(_0x22b283(0xa2b))[_0x22b283(0x8a2)](_0x20c733 => { _0x20c733 && _0x42d515(_0x2530be); }); } else _0x5cda74 = _0x1cfbde; } else _0x453c9f?.[_0x22b283(0x433)] === _0x22b283(0x24e) && _0x1140c1 && (_0x5cda74 = _0x590c99(_0x1140c1)); _0x5cda74 && (_0x310b02 = _0x5cda74[_0x22b283(0x59f)] || ''); } } const _0x44fe5d = _0x3f079e(_0x25a790, _0x310b02), _0x13df36 = _0x332dd9 && _0x332dd9[_0x22b283(0x1c8)]()[_0x22b283(0x93c)](_0x22b283(0x16e)) && _0x332dd9[_0x22b283(0x1c8)]()[_0x22b283(0x538)](_0x22b283(0x9e0)); if (_0x13df36) { const _0x2e19ea = document[_0x22b283(0x95f)]('div'); _0x2e19ea['className'] = _0x22b283(0xa05), _0x2e19ea[_0x22b283(0x279)] = _0x332dd9, _0x1ee58d === _0x22b283(0x384) ? (_0x45b85d[_0x22b283(0x962)](_0x2e19ea), _0x45b85d[_0x22b283(0x962)](_0x44fe5d)) : _0x22b283(0x97d) === _0x22b283(0x8c8) ? _0x204cd3 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>' : (_0x45b85d[_0x22b283(0x962)](_0x44fe5d), _0x45b85d[_0x22b283(0x962)](_0x2e19ea)); } else { const _0x3be8f4 = document[_0x22b283(0x95f)]('div'); _0x3be8f4['classList'][_0x22b283(0x132)]('message', _0x1ee58d); if (_0x453c9f?.[_0x22b283(0x433)] === _0x22b283(0x838)) { const _0x4a3ca0 = _0x453c9f[_0x22b283(0x258)][0x0]; _0x3be8f4[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0x211) + _0x4a3ca0); } if (_0xe66ba0[_0x22b283(0x3a2)]) { const _0x346dce = document[_0x22b283(0x95f)]('div'); _0x346dce[_0x22b283(0x290)] = _0x22b283(0x9d7); const _0x3227cb = document['createElement'](_0x22b283(0x754)); _0x3227cb[_0x22b283(0x290)] = _0x22b283(0x212), _0x3227cb[_0x22b283(0x8e3)] = _0xe66ba0['quotedMessage'][_0x22b283(0x31d)]; const _0x315b8b = document[_0x22b283(0x95f)](_0x22b283(0x754)); _0x315b8b[_0x22b283(0x290)] = 'quoted-content', _0x315b8b[_0x22b283(0x8e3)] = _0xe66ba0[_0x22b283(0x3a2)]['content'], _0x346dce[_0x22b283(0x962)](_0x3227cb), _0x346dce[_0x22b283(0x962)](_0x315b8b), _0x3be8f4[_0x22b283(0x962)](_0x346dce); } if (_0x48b96d) { if (_0x22b283(0x157) !== _0x22b283(0x157)) { const _0xdb9dd2 = _0x23a869(_0x3b57a0[_0x22b283(0x258)][0x0]); _0xdb9dd2 ? (_0x5cf01e = _0xdb9dd2[_0x22b283(0x7d6)] || _0x1ead00, _0x2d0134 = _0xdb9dd2[_0x22b283(0x7d9)] || _0x22b283(0x606), _0x16ba2a = _0xdb9dd2[_0x22b283(0xad9)] || '私聊') : (_0x56310e = '未知角色', _0x56da9a = _0x22b283(0x265)); } else { _0x3be8f4[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0x6e6)); const _0x199d9c = document[_0x22b283(0x95f)]('img'); _0x199d9c[_0x22b283(0x984)] = _0x48b96d, _0x199d9c[_0x22b283(0x8f0)]['add']('sticker-content'), _0x3be8f4['appendChild'](_0x199d9c); } } else { if (_0xe66ba0['image'] || _0xe66ba0[_0x22b283(0x3a7)]) { if (_0x22b283(0x402) === _0x22b283(0x402)) { _0x3be8f4[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0xad0)); const _0x513db1 = document[_0x22b283(0x95f)](_0x22b283(0x94f)); _0x513db1[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0x445)), _0x3be8f4[_0x22b283(0x962)](_0x513db1); _0xe66ba0['image'] ? _0x513db1[_0x22b283(0x984)] = _0xe66ba0[_0x22b283(0xad0)] : (_0x513db1[_0x22b283(0x984)] = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', _0x15e0c2(_0xe66ba0['imageId'])[_0x22b283(0x8a2)](_0x5d41ce => { const _0x8716d3 = _0x22b283; if (_0x5d41ce) { const _0x3d1487 = URL['createObjectURL'](_0x5d41ce); _0x513db1[_0x8716d3(0x984)] = _0x3d1487, _0x513db1[_0x8716d3(0xaa0)] = () => { const _0x4f13ec = _0x8716d3; URL[_0x4f13ec(0x7b9)](_0x3d1487); }; } else _0x513db1[_0x8716d3(0x183)] = _0x8716d3(0x523); })['catch'](_0x50f331 => { const _0x8e3d86 = _0x22b283; console[_0x8e3d86(0x7a4)](_0x8e3d86(0x18b), _0x50f331), _0x513db1[_0x8e3d86(0x183)] = _0x8e3d86(0x523); })); if (_0x332dd9) { if (_0x22b283(0x467) === 'uIpMm') _0x46f931(), _0x2ed83d(); else { const _0x49fd5f = document[_0x22b283(0x95f)]('p'); _0x49fd5f['style'][_0x22b283(0x60e)] = _0x22b283(0x13d), _0x49fd5f[_0x22b283(0x8e3)] = _0x332dd9, _0x3be8f4[_0x22b283(0x962)](_0x49fd5f); } } } else _0x319e19(), _0x160e90(_0x22b283(0x778), _0x22b283(0x529)); } else { if (_0xe66ba0[_0x22b283(0x433)] === _0x22b283(0xa86)) { if ('PKlDi' !== _0x22b283(0x38e)) { _0x3be8f4[_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0xa86)); const _0x57f0b3 = _0xe66ba0['role'] === 'user' ? _0x30ad29(_0x5f49a9[_0x22b283(0x824)]) : _0x590c99(_0xe66ba0[_0x22b283(0x699)]), _0x1bf097 = _0xe66ba0[_0x22b283(0x790)] === _0x30ad29(_0x5f49a9[_0x22b283(0x824)])['id'] ? _0x30ad29(_0x5f49a9[_0x22b283(0x824)]) : _0x590c99(_0xe66ba0['recipientId']), _0x1d1d2a = _0x57f0b3?.[_0x22b283(0x7d9)] ? _0x57f0b3['name'] + _0x22b283(0x3ec) : '转账', _0x5b6735 = _0x1bf097?.[_0x22b283(0x7d9)] ? _0x22b283(0x55a) + _0x1bf097[_0x22b283(0x7d9)] : '转账', _0x1c57f6 = _0x22b283(0x296) + _0x1d1d2a + _0x22b283(0x6b4) + _0xe66ba0[_0x22b283(0xaac)][_0x22b283(0x539)](0x2) + _0x22b283(0x2f8) + _0x5b6735 + _0x22b283(0x230); _0x3be8f4[_0x22b283(0x279)] = _0x1c57f6; } else _0x416e46[_0x22b283(0x1df)] = _0x5b685e[_0x22b283(0x1df)]; } else { if (_0xe66ba0[_0x22b283(0x433)] === _0x22b283(0x2c1)) { if (_0x22b283(0x37d) === _0x22b283(0x307)) _0x59bebc > _0x278855 && (_0x4968ba *= _0x11d1df / _0x51bb80, _0x5acfea = _0x36f940); else { _0x3be8f4['classList']['add'](_0x22b283(0xb60)); const _0x52f9ea = document[_0x22b283(0x95f)](_0x22b283(0x754)); _0x52f9ea[_0x22b283(0x290)] = _0x22b283(0x136), _0x52f9ea[_0x22b283(0x8f0)][_0x22b283(0x132)]('no-action-modal'); const _0x3a05d2 = _0xe66ba0[_0x22b283(0x664)] === _0x22b283(0x384) ? _0x30ad29(_0x5f49a9['activeChatId'])[_0x22b283(0x7d9)] || '你' : _0x590c99(_0xe66ba0[_0x22b283(0x699)])?.[_0x22b283(0x7d9)] || 'TA', _0x2b0804 = _0x22b283(0xb5b) + _0xe66ba0['timestamp'], _0x19a2c1 = _0x22b283(0x491) + _0x2b0804 + _0x22b283(0x701) + _0x28cae8 + '\x22>'; if (_0xe66ba0['coverId']) { if ('EYyiS' === _0x22b283(0x763)) { const _0x4be3b2 = _0x2b9bf1(_0x2fa5c8); if (!_0x4be3b2) return; _0x291335[_0x22b283(0x9ab)] = _0x1d730e; const _0x42ab8b = _0xa8c1d6['diaries']['find'](_0x216aac => _0x216aac['characterId'] === _0x36c285), _0x3ea6c2 = _0x42ab8b ? _0x42ab8b['entries'][_0x22b283(0x2ed)] : 0x0, _0x2835f8 = 0x2; _0x4c970e[_0x22b283(0x55e)] = _0x264cff['max'](0x0, _0x1d20ae[_0x22b283(0x8bd)](_0x3ea6c2 / _0x2835f8) - 0x1), _0xa67b2d[_0x22b283(0x374)]('diary-char-name-header')[_0x22b283(0x8e3)] = _0x4be3b2['name'] + _0x22b283(0xb22), _0x44b4ea(), _0x133ffb(_0x22b283(0x6be), _0x22b283(0x8ee)); } else _0x15e0c2(_0xe66ba0['coverId'])[_0x22b283(0x8a2)](_0x5e911c => { const _0x4e8548 = _0x22b283; if (_0x4e8548(0x96b) !== _0x4e8548(0x5bf)) { const _0x1b4435 = document[_0x4e8548(0x374)](_0x2b0804); if (_0x1b4435 && _0x5e911c) _0x1b4435[_0x4e8548(0x984)] = URL[_0x4e8548(0x7dc)](_0x5e911c); } else { const _0x270bf0 = { 'id': _0x4e8548(0x2df) + _0x320bac[_0x4e8548(0x780)]() + '_' + _0x5c9b23[_0x4e8548(0x512)](), 'name': _0x5623e0[_0x4e8548(0x7d9)], 'content': _0x5e4286['content'] }; _0x3213cb['worldBooks'][_0x4e8548(0x238)](_0x270bf0), _0x50b1f0['push'](_0x270bf0['id']); } }); } _0xe66ba0[_0x22b283(0x589)] ? _0x52f9ea[_0x22b283(0x279)] = _0x22b283(0x3c0) + _0x19a2c1 + _0x22b283(0x3dd) + _0xe66ba0[_0x22b283(0x76d)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0xe66ba0['artist'] + _0x22b283(0x23a) : _0x52f9ea[_0x22b283(0x279)] = _0x22b283(0x80b) + _0x3a05d2 + _0x22b283(0x4a9) + _0x19a2c1 + _0x22b283(0x3dd) + _0xe66ba0[_0x22b283(0x76d)] + _0x22b283(0x1d1) + _0xe66ba0[_0x22b283(0x1e1)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0xe66ba0['songId'] + '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', _0x3be8f4[_0x22b283(0x962)](_0x52f9ea); } } else { if (_0xe66ba0[_0x22b283(0x433)] === _0x22b283(0xb60) && _0xe66ba0['songName']) { if (_0x22b283(0x7e0) === _0x22b283(0x9e3)) _0x208081(_0x22b283(0x529), _0x22b283(0x9da)); else { _0x3be8f4['classList'][_0x22b283(0x132)](_0x22b283(0xb60)); const _0x3b34fd = document[_0x22b283(0x95f)](_0x22b283(0x754)); _0x3b34fd[_0x22b283(0x290)] = _0x22b283(0xa92), _0x3b34fd[_0x22b283(0x814)]['musicId'] = _0x22b283(0x27c) + _0xe66ba0[_0x22b283(0x75a)]; const _0x39acf7 = _0x22b283(0xb5b) + _0xe66ba0[_0x22b283(0x75a)], _0x1f64e6 = _0x22b283(0xb01) + _0x28cae8 + _0x22b283(0x2b5) + _0x39acf7 + _0x22b283(0x927); if (_0xe66ba0['coverId']) { if ('INsQF' === 'INsQF') _0x15e0c2(_0xe66ba0[_0x22b283(0xa01)])[_0x22b283(0x8a2)](_0x59080f => { const _0x5cd8d1 = _0x22b283, _0x4c7907 = document[_0x5cd8d1(0x374)](_0x39acf7); if (_0x4c7907 && _0x59080f) _0x4c7907[_0x5cd8d1(0x984)] = URL[_0x5cd8d1(0x7dc)](_0x59080f); }); else { if (!_0xd05058) return; _0x2d63f6[_0x46c150] = _0x3bcf40, _0x21924c[_0x68cb6b][_0x22b283(0x179)](_0x22b283(0xa18))[_0x22b283(0x8e3)] = _0x1412dd['name'], _0x5cd583[_0x5a368a][_0x22b283(0x8f0)][_0x22b283(0x132)](_0x22b283(0x74b)), _0x8594bc(); } } else { if (_0xe66ba0[_0x22b283(0x461)]) { if (_0x22b283(0x630) !== _0x22b283(0x630)) { const _0x5a7b37 = [], _0x3a4244 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x446d7f; while ((_0x446d7f = _0x3a4244['exec'](_0x49249f)) !== null) { const _0x509821 = _0x446d7f[0x1][_0x22b283(0xa38)](/\\"/g, '\x22')[_0x22b283(0xa38)](/\\n/g, '\x0a')[_0x22b283(0x1c8)](); if (_0x509821) _0x5a7b37['push'](_0x509821); } if (_0x5a7b37['length']) return _0x5a7b37['flatMap'](_0x414c5c)[_0x22b283(0xa24)](0x0, 0x9); } else setTimeout(() => { const _0x393a97 = _0x22b283, _0x52cacf = document['getElementById'](_0x39acf7); if (_0x52cacf) _0x52cacf[_0x393a97(0x984)] = _0xe66ba0[_0x393a97(0x461)]; }, 0x0); } } _0x3b34fd['innerHTML'] = _0x22b283(0xa9e) + _0x1f64e6 + _0x22b283(0x609) + _0xe66ba0[_0x22b283(0x76d)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0xe66ba0[_0x22b283(0x1e1)] + _0x22b283(0x7d0) + (_0xe66ba0['playableUrl'] ? '▶' : '⚠') + '</div>', _0xe66ba0[_0x22b283(0x4ca)] && _0x3b34fd[_0x22b283(0x458)](_0x22b283(0x173), function () { const _0xd328ca = _0x22b283; if (_0xd328ca(0x7ab) === 'uWnZK') _0x2841ac[_0xd328ca(0x4d5)] = _0x58c8b0[_0xd328ca(0x4d5)], _0x1886cf[_0xd328ca(0x4f6)] = _0x883acb[_0xd328ca(0x4f6)]; else { const _0x20a3c2 = { 'id': _0xd328ca(0x27c) + _0xe66ba0[_0xd328ca(0x75a)], 'url': _0xe66ba0[_0xd328ca(0x4ca)] }; _0x48fadd(this, _0x20a3c2); } }), _0x3be8f4[_0x22b283(0x962)](_0x3b34fd); } } else { if ('kAEdu' === _0x22b283(0xa42)) _0x1b7e32['error'](_0x22b283(0x895), _0x36aedb); else { if (_0x332dd9) { if (_0x22b283(0x430) !== _0x22b283(0x430)) { const _0x3304a7 = _0x577198['getElementById'](_0x22b283(0x327)); if (!_0x3304a7) return; _0x48d549[_0x22b283(0x407)][_0x22b283(0x70f)] ? (_0x3304a7['style'][_0x22b283(0x95e)] = _0x22b283(0x4dd), _0x3304a7[_0x22b283(0x2d6)][_0x22b283(0x614)] = _0x22b283(0x64e)) : (_0x3304a7[_0x22b283(0x2d6)][_0x22b283(0x95e)] = 'var(--text-color)', _0x3304a7[_0x22b283(0x2d6)][_0x22b283(0x614)] = _0x22b283(0x8b4)); } else { const _0x3f8419 = document[_0x22b283(0x95f)]('p'); _0x3f8419['innerHTML'] = _0x332dd9, _0x3f8419[_0x22b283(0x2d6)][_0x22b283(0x4a8)] = '0', _0x3be8f4['appendChild'](_0x3f8419); } } } } } } } } _0x1ee58d === _0x22b283(0x384) ? (_0x45b85d[_0x22b283(0x962)](_0x3be8f4), _0x45b85d[_0x22b283(0x962)](_0x44fe5d)) : (_0x45b85d[_0x22b283(0x962)](_0x44fe5d), _0x45b85d[_0x22b283(0x962)](_0x3be8f4)); } _0x3a711f[_0x22b283(0x962)](_0x45b85d); const _0x51f7aa = document[_0x22b283(0x95f)](_0x22b283(0x754)); return _0x51f7aa[_0x22b283(0x290)] = _0x22b283(0x75a), _0x51f7aa[_0x22b283(0x8e3)] = _0x2299ef(_0xe66ba0[_0x22b283(0x75a)]), _0x3a711f[_0x22b283(0x962)](_0x51f7aa), _0x4225c7['appendChild'](_0x3a711f), _0x3a711f; } document[_0x4d95ce(0x374)]('chat-messages')[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x5edac0); let _0x7938fc = null, _0x508474 = null; function _0x5edac0(_0x231a50) { const _0x51537b = _0x4d95ce; if (window[_0x51537b(0x58b)]()[_0x51537b(0x679)]()) return; const _0x58a971 = _0x231a50[_0x51537b(0x89a)][_0x51537b(0x796)](_0x51537b(0x1f6)), _0x15c0bd = _0x231a50[_0x51537b(0x89a)][_0x51537b(0x796)](_0x51537b(0x1ec)); if (!_0x58a971 || _0x15c0bd) return; const _0x1214d6 = parseInt(_0x58a971[_0x51537b(0x814)]['historyIndex'], 0xa); if (isNaN(_0x1214d6)) return; _0x3506ed(_0x1214d6); } function _0x208cd3() { const _0x52ca75 = _0x4d95ce; if ('tevRG' === _0x52ca75(0x392)) _0x472406[_0x52ca75(0x87f)][_0x52ca75(0x5a3)](_0x52ca75(0xaba)); else { const _0xbab3a5 = _0x39d291(); if (!_0xbab3a5) { _0xaad891['textContent'] = '选择聊天'; return; } if (_0xbab3a5[_0x52ca75(0x433)] === _0x52ca75(0x838)) { const _0x4ac766 = _0x590c99(_0xbab3a5['participantIds'][0x0]); _0xaad891[_0x52ca75(0x8e3)] = _0x4ac766 ? _0x4ac766[_0x52ca75(0x7d9)] : _0x52ca75(0x968); } else { if ('uLSNO' === 'uLSNO') _0xaad891[_0x52ca75(0x8e3)] = _0xbab3a5['name'] || _0x52ca75(0x356) + _0xbab3a5[_0x52ca75(0x258)][_0x52ca75(0x2ed)] + ')'; else { const _0x95f935 = _0x52ca75(0x39b) + _0x476441['id'], _0x17ee6d = _0x52ca75(0x5b2) + _0x3f425d['id'], _0x86d65c = _0x3e7e5d['getItem'](_0x95f935); _0x86d65c && (_0x38e8f7[_0x52ca75(0x421)](_0x17ee6d, _0x86d65c), _0x333921[_0x52ca75(0x5ed)](_0x95f935)); } } } } function _0x410023(_0x28a5df) { const _0x41957f = _0x4d95ce, _0x102e6c = document[_0x41957f(0x179)](_0x41957f(0x19c)); if (_0x102e6c && (_0x102e6c['id'] === _0x41957f(0x979) || _0x102e6c['id'] === _0x41957f(0x473))) _0x41957f(0x435) === _0x41957f(0x435) ? _0x2515ef() : _0x293c64 = _0xbc9a49[_0x41957f(0x128)][_0x41957f(0x190)](_0x1e2aa9 => _0x1e5224[_0x41957f(0x1df)][_0x41957f(0x7ed)](_0x157737 => _0x157737['id'] === _0x1e2aa9))[_0x41957f(0x8be)](_0x213623)['map'](_0x5ac04a => _0x41957f(0x151) + _0x5ac04a[_0x41957f(0x7d9)] + _0x41957f(0x8f6) + _0x5ac04a[_0x41957f(0x47e)])[_0x41957f(0x414)](''); else { const _0x36fceb = document[_0x41957f(0x410)](_0x41957f(0x297)); _0x36fceb[_0x41957f(0x170)](_0x5232f7 => _0x5232f7[_0x41957f(0x31f)]()); } } function _0x2e6121() { const _0x18e108 = _0x4d95ce; _0x5f49a9[_0x18e108(0x263)] && _0x5f49a9[_0x18e108(0x87f)] && (_0x18e108(0x9b4) === _0x18e108(0x9b4) ? (console[_0x18e108(0x6e2)](_0x18e108(0x9c7)), _0x5f49a9[_0x18e108(0x87f)][_0x18e108(0x5a3)](_0x18e108(0x348)), _0x5f49a9[_0x18e108(0x87f)] = null) : _0x460f15['addEventListener']('click', function () { const _0x293642 = _0x18e108, _0x31e802 = { 'id': 'msg_' + _0x4ebffd[_0x293642(0x75a)], 'url': _0x3ebfee[_0x293642(0x4ca)] }; _0x307e83(this, _0x31e802); })), _0x5f49a9['isGenerating'] = ![], _0x410023(![]); } function _0x39d291() { const _0x1db3dd = _0x4d95ce; if ('StAkB' !== _0x1db3dd(0xaed)) return _0x5f49a9[_0x1db3dd(0x42d)][_0x1db3dd(0x7ed)](_0xd7ee4f => _0xd7ee4f['id'] === _0x5f49a9[_0x1db3dd(0x824)]); else _0x1fed60[_0x1db3dd(0x81e)] = null, _0x1ed312[_0x1db3dd(0x2d6)][_0x1db3dd(0x416)] = _0x1db3dd(0x8b4); } function _0x590c99(_0x395c62) { const _0x2f8bb0 = _0x4d95ce; if (_0x2f8bb0(0x845) === _0x2f8bb0(0x845)) return _0x5f49a9['characters'][_0x2f8bb0(0x7ed)](_0x103ab0 => _0x103ab0['id'] === _0x395c62); else _0x5eedee += '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a'; } function _0x39050f(_0x471075) { const _0x386e62 = _0x4d95ce; _0x5f49a9[_0x386e62(0x6b0)] = _0x5f49a9[_0x386e62(0x6b0)][_0x386e62(0x8be)](_0x560de5 => _0x560de5['id'] !== _0x471075), _0x5f49a9[_0x386e62(0x42d)][_0x386e62(0x170)](_0x353ea4 => { const _0x5ec510 = _0x386e62; if (_0x5ec510(0x77f) === _0x5ec510(0x77f)) _0x353ea4['type'] === 'group' && (_0x353ea4[_0x5ec510(0x258)] = _0x353ea4[_0x5ec510(0x258)][_0x5ec510(0x8be)](_0x548b04 => _0x548b04 !== _0x471075)); else { const _0x567d46 = _0x31f6ac[_0x5ec510(0xad0)][_0x5ec510(0x77e)](',')[0x1], _0x12c164 = _0x4c4c39[_0x5ec510(0xad0)][_0x5ec510(0x80c)](_0x3f8ce9[_0x5ec510(0xad0)][_0x5ec510(0x656)](':') + 0x1, _0x16f99a['image'][_0x5ec510(0x656)](';')) || 'image/jpeg'; _0x2c0ab9[_0x5ec510(0x238)]({ 'inline_data': { 'mime_type': _0x12c164, 'data': _0x567d46 } }); } }); const _0x547234 = _0x5f49a9[_0x386e62(0x42d)][_0x386e62(0x7ed)](_0x4787b9 => _0x4787b9[_0x386e62(0x433)] === 'private' && _0x4787b9[_0x386e62(0x258)][_0x386e62(0x454)](_0x471075)); _0x547234 && _0x19cca2(_0x547234['id']), _0x5f49a9[_0x386e62(0x42d)] = _0x5f49a9[_0x386e62(0x42d)][_0x386e62(0x8be)](_0x1b0d85 => _0x1b0d85[_0x386e62(0x433)] !== 'group' || _0x1b0d85[_0x386e62(0x258)][_0x386e62(0x2ed)] > 0x1), _0x39e4f0(), _0x223f24(); } function _0x19cca2(_0x407093) { const _0x4fcf74 = _0x4d95ce; if ('OcLVV' !== 'QliEx') { _0x5f49a9[_0x4fcf74(0x42d)] = _0x5f49a9[_0x4fcf74(0x42d)][_0x4fcf74(0x8be)](_0x2491ed => _0x2491ed['id'] !== _0x407093); try { if (_0x4fcf74(0xae8) !== _0x4fcf74(0xae8)) { const _0x31737b = _0x1912e0[_0x4fcf74(0x374)](_0x35ab2d); _0x31737b[_0x4fcf74(0x279)] = '', _0x26ec10['userProfiles'][_0x4fcf74(0x170)](_0x4140da => { const _0x373751 = _0x4fcf74, _0x13a8b6 = _0x385ed5['createElement']('option'); _0x13a8b6[_0x373751(0x330)] = _0x4140da['id'], _0x13a8b6[_0x373751(0x8e3)] = _0x4140da[_0x373751(0x7d9)], _0x31737b[_0x373751(0x962)](_0x13a8b6); }); } else localStorage[_0x4fcf74(0x5ed)](_0x4fcf74(0x39b) + _0x407093); } catch (_0x5349b8) { _0x4fcf74(0x724) !== _0x4fcf74(0x16c) ? console['error']('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x407093, _0x5349b8) : (_0x464b59['likes'] = _0x4c2c58[_0x4fcf74(0x9de)] || [], _0x36b8e4[_0x4fcf74(0x427)] = (_0x551f40[_0x4fcf74(0x427)] || [])[_0x4fcf74(0x190)]((_0x3808c3, _0x5c30eb) => ({ ..._0x3808c3, 'commentId': 'c_' + _0x355d23['timestamp'] + '_' + _0x5c30eb })), _0x297da1(), _0xcfb23b()); } _0x5f49a9['activeChatId'] === _0x407093 && (_0x4fcf74(0xb42) === _0x4fcf74(0xb42) ? (_0x5f49a9[_0x4fcf74(0x824)] = _0x5f49a9[_0x4fcf74(0x42d)][0x0]?.['id'] || null, _0xc0e03b(_0x5f49a9[_0x4fcf74(0x824)])) : (_0x5d196e(_0x10b1dd['value']), _0xf234b7())), _0x39e4f0(), _0x223f24(); } else _0x549fb8 *= _0x43150f / _0x59e2a5, _0x1370b0 = _0x22fb79; } async function _0xc0e03b(_0x3d980d) { const _0xdb0b8f = _0x4d95ce; _0x5f49a9[_0xdb0b8f(0x824)] !== _0x3d980d && (_0x2e6121(), _0x5f49a9[_0xdb0b8f(0x460)] = 0x64); if (!_0x3d980d) { _0x5f49a9[_0xdb0b8f(0x824)] = null, _0x39e4f0(), _0x2c63a6(![]), document[_0xdb0b8f(0x374)](_0xdb0b8f(0x9bf))[_0xdb0b8f(0x2d6)][_0xdb0b8f(0x486)] = ''; return; } _0x5f49a9[_0xdb0b8f(0x824)] = _0x3d980d, _0x39e4f0(), _0x208cd3(), _0x4225c7[_0xdb0b8f(0x279)] = '', _0x5a1a9e(!![], _0xdb0b8f(0x83f)), setTimeout(async () => { const _0x35335a = _0xdb0b8f; try { _0x2e1725(); const _0x486fc6 = _0x39d291(), _0x173256 = document[_0x35335a(0x374)](_0x35335a(0x9bf)); let _0x2cd4b0 = null; if (_0x486fc6) { if (_0x486fc6[_0x35335a(0x433)] === _0x35335a(0x838)) { const _0x41515f = _0x486fc6[_0x35335a(0x258)][0x0]; _0x52cc2b(_0x41515f), _0x2cd4b0 = await _0x15e0c2(_0x35335a(0x716) + _0x41515f); } else _0x2cd4b0 = await _0x15e0c2(_0x35335a(0x6dd) + _0x486fc6['id']); _0x2cd4b0 ? (_0x173256[_0x35335a(0x2d6)][_0x35335a(0x486)] = _0x35335a(0x730) + URL[_0x35335a(0x7dc)](_0x2cd4b0) + '\x27)', _0x173256['style'][_0x35335a(0x59a)] = 'cover', _0x173256[_0x35335a(0x2d6)][_0x35335a(0xa2e)] = 'center') : _0x173256[_0x35335a(0x2d6)]['backgroundImage'] = ''; } _0x56911c(); } catch (_0x36c778) { if ('fhqTy' !== 'fhqTy') return _0x44c9e6['push'](_0x9737a), _0x38c711; else console[_0x35335a(0x7a4)](_0x35335a(0xac9), _0x36c778), _0xd5e395(_0x35335a(0x219) + _0x36c778[_0x35335a(0xb58)]); } finally { _0x5a1a9e(![]); } }, 0x32); } async function _0x290bb8() { const _0x952697 = _0x4d95ce; if (_0x952697(0x1c4) !== _0x952697(0x1ca)) { if (_0x5f49a9[_0x952697(0x263)]) { if (_0x952697(0x3e1) === 'xpWKI') { _0xd5e395(_0x952697(0x514)); return; } else _0x1fd431(_0x952697(0x7c9)); } const _0x5714fd = _0x5f49a9[_0x952697(0xb06)]; if (_0x5714fd[_0x952697(0x2ed)] === 0x0) return; let _0x265f60 = -0x1; for (let _0xcfa810 = _0x5714fd['length'] - 0x1; _0xcfa810 >= 0x0; _0xcfa810--) { if (_0x5714fd[_0xcfa810][_0x952697(0x664)] === _0x952697(0x384)) { if (_0x952697(0x64f) !== _0x952697(0x64f)) _0x24446f(_0x952697(0x554) + _0x24bcd5[_0x952697(0xb58)]); else { _0x265f60 = _0xcfa810; break; } } } if (_0x265f60 === -0x1 || _0x265f60 === _0x5714fd[_0x952697(0x2ed)] - 0x1) { _0xd5e395('还没有我的回应可以重新生成哦。'); return; } _0x5714fd[_0x952697(0x69d)](_0x265f60 + 0x1), _0x5f49a9[_0x952697(0x766)] = [], _0x3c4da6(), _0x1ba401(), _0x412801(_0x5f49a9[_0x952697(0x5b0)]), setTimeout(() => { const _0x3436c0 = _0x952697; if (_0x3436c0(0x99c) === _0x3436c0(0x99c)) _0x4f2db6(); else { const _0x415af6 = new _0x499848(), _0x383885 = _0x2f3dbe[_0x3436c0(0x374)](_0x3436c0(0x25c)), _0x1c0118 = _0x5a9224[_0x3436c0(0x374)]('snoop-home-date'), _0x2ec1a9 = _0x35e5e2[_0x3436c0(0x374)](_0x3436c0(0xa5c)); _0x383885 && _0x1c0118 && (_0x383885['textContent'] = _0x415af6[_0x3436c0(0x91f)](_0x3436c0(0x983), { 'hour': _0x3436c0(0x75b), 'minute': _0x3436c0(0x75b), 'hour12': ![] }), _0x1c0118[_0x3436c0(0x8e3)] = _0x415af6[_0x3436c0(0x8c4)](_0x3436c0(0x983), { 'month': _0x3436c0(0x366), 'day': 'numeric', 'weekday': 'long' })), _0x2ec1a9 && (_0x2ec1a9['innerHTML'] = _0x3436c0(0x844) + _0x415af6[_0x3436c0(0x91f)]('zh-CN', { 'hour': _0x3436c0(0x75b), 'minute': '2-digit', 'hour12': ![] }) + _0x3436c0(0x744)); } }, 0x64); } else _0x5c3bee(_0x3c4b6a, _0xb12123, !![]); } async function _0xa26d34() { const _0xe91865 = _0x4d95ce; if (_0x5f49a9[_0xe91865(0x263)]) { _0xd5e395(_0xe91865(0xa1a)); return; } const _0x267f7b = _0x5f49a9[_0xe91865(0xb06)]; if (_0x267f7b[_0xe91865(0x2ed)] === 0x0) return; let _0x17fce2 = -0x1; for (let _0x51adb6 = _0x267f7b[_0xe91865(0x2ed)] - 0x1; _0x51adb6 >= 0x0; _0x51adb6--) { if ('nlHxE' === _0xe91865(0x1e3)) { if (_0x267f7b[_0x51adb6][_0xe91865(0x664)] === _0xe91865(0x384)) { if (_0xe91865(0x20b) !== _0xe91865(0x20b)) { _0x3f2264(![]), _0x323612(_0xe91865(0x4e4)); return; } else { _0x17fce2 = _0x51adb6; break; } } } else _0x2e1dfa[_0xe91865(0x2d6)]['display'] = _0xe91865(0x350), _0x14cc93(() => _0x3ec49f[_0xe91865(0x8f0)][_0xe91865(0x132)](_0xe91865(0x18c)), 0xa); } if (_0x17fce2 === -0x1 || _0x17fce2 === _0x267f7b[_0xe91865(0x2ed)] - 0x1) { if (_0xe91865(0x1f2) === _0xe91865(0x1f2)) { _0xd5e395(_0xe91865(0x83c)); return; } else _0x6eeed9[_0xe91865(0x8f0)][_0xe91865(0x31f)](_0xe91865(0x18c)); } _0x267f7b[_0xe91865(0x69d)](_0x17fce2 + 0x1), _0x3c4da6(), _0x2515ef(), setTimeout(() => { _0x4f2db6(); }, 0x64); } function _0x474139(_0x276336 = null) { const _0x47b31c = _0x4d95ce, _0x1e4981 = _0x276336 ?? _0x1252fb[_0x47b31c(0x330)][_0x47b31c(0x1c8)](); if (_0x1e4981 === '' || !_0x5f49a9['activeChatId']) return; const _0x2969cc = document[_0x47b31c(0x179)](_0x47b31c(0x19c)), _0xd7ed8c = _0x2969cc['id'] === 'meeting-view-screen', _0x1ecafc = { 'role': 'user', 'content': _0x1e4981, 'timestamp': Date[_0x47b31c(0x780)](), 'isOffline': _0xd7ed8c }; _0x5f49a9[_0x47b31c(0x81e)] && (_0x1ecafc['quotedMessage'] = { ..._0x5f49a9[_0x47b31c(0x81e)] }), _0x5f49a9[_0x47b31c(0xb06)][_0x47b31c(0x238)](_0x1ecafc), _0x3c4da6(), _0x2515ef(), !_0x276336 && ('asMPQ' === _0x47b31c(0x8fd) ? _0x28d7a6('AI整理失败了，哼:\x20' + _0x14ec7e[_0x47b31c(0xb58)]) : _0x1252fb[_0x47b31c(0x330)] = ''), _0x174b23(); } function _0x1c43cf(_0x154e3e) { const _0x48c9b0 = _0x4d95ce; if (!_0x154e3e || !_0x5f49a9[_0x48c9b0(0x824)]) return; const _0x23d775 = { 'role': 'user', 'content': _0x48c9b0(0xab4) + _0x154e3e['name'] + ']', 'displayUrl': _0x154e3e[_0x48c9b0(0x93b)], 'timestamp': Date[_0x48c9b0(0x780)]() }; _0x5f49a9[_0x48c9b0(0xb06)][_0x48c9b0(0x238)](_0x23d775), _0x4b6e3c(_0x23d775, _0x5f49a9[_0x48c9b0(0xb06)][_0x48c9b0(0x2ed)] - 0x1), _0x3c4da6(), _0x532d9['classList'][_0x48c9b0(0x31f)](_0x48c9b0(0x18c)); } async function _0x9202f3(_0x8f351b) { const _0x15e5fb = _0x4d95ce, _0x6a9f39 = _0x8f351b[_0x15e5fb(0x89a)][_0x15e5fb(0x760)][0x0]; if (!_0x6a9f39 || !_0x5f49a9['activeChatId']) return; _0x5a1a9e(!![], '正在处理图片...'); try { const _0x7b1eda = await _0x779604(_0x6a9f39, 0x320, 0.8, !![]), _0x4f7a8a = _0x15e5fb(0x800) + Date[_0x15e5fb(0x780)](); await _0x5a0c6c(_0x4f7a8a, _0x7b1eda); const _0xb7817f = _0x1252fb[_0x15e5fb(0x330)][_0x15e5fb(0x1c8)](); _0x1252fb[_0x15e5fb(0x330)] = ''; const _0x2f0bfb = { 'role': 'user', 'content': _0xb7817f, 'imageId': _0x4f7a8a, 'timestamp': Date[_0x15e5fb(0x780)]() }; _0x5f49a9[_0x15e5fb(0xb06)]['push'](_0x2f0bfb), _0x4b6e3c(_0x2f0bfb, _0x5f49a9[_0x15e5fb(0xb06)][_0x15e5fb(0x2ed)] - 0x1), _0x3c4da6(); } catch (_0x2dce6b) { _0xd5e395(_0x15e5fb(0x3b6) + _0x2dce6b['message']); } finally { _0x15e5fb(0x1c1) !== _0x15e5fb(0x6dc) ? (_0x5a1a9e(![]), _0x8f351b[_0x15e5fb(0x89a)][_0x15e5fb(0x330)] = '') : _0x540fb6(_0x15e5fb(0x629)); } } async function _0x4b34d2() { const _0x140393 = _0x4d95ce; if (_0x140393(0x76f) !== _0x140393(0x76f)) _0x22922b[_0x140393(0x421)](_0x4ea0a6, _0x10770f), _0x565f3b[_0x140393(0x5ed)](_0x324f82); else { if (!_0x5f49a9[_0x140393(0x824)]) return; const _0x1d109f = await _0x4fe1a1(); if (!_0x1d109f) return; _0xd5e395('正在搜索音乐...'); try { if (_0x140393(0x507) !== 'hsPhA') { const _0x2ba895 = await _0x1899f9(_0x1d109f[_0x140393(0x76d)], _0x1d109f['artist']); let _0x5c4478 = _0x2ba895[_0x140393(0x6ac)]; if (_0x2ba895['cover'] && _0x2ba895[_0x140393(0x6ac)][_0x140393(0x93c)](_0x140393(0x34f))) try { if ('PIzzb' !== 'YpKOb') { const _0x309688 = await fetch(_0x2ba895[_0x140393(0x6ac)]), _0x4fbc0a = await _0x309688[_0x140393(0xb57)](); _0x5c4478 = await _0xa47e47(_0x4fbc0a); } else _0xb8da20(_0x140393(0x488)); } catch (_0x984ccd) { _0x140393(0x500) !== _0x140393(0x500) ? _0x64fe35[_0x140393(0x170)](_0x2d50d7 => { const _0x40ee23 = _0x140393, _0xbaff86 = _0x2d50d7[_0x40ee23(0x31d)] === 'character', _0xbb9bf9 = _0xbaff86 ? _0x5c6bff ? _0x3d7edc[0x0] : '?' : _0x1c4a22 ? _0x45c4c9[0x0] : '?'; _0x19e29b += _0x40ee23(0x556) + (_0xbaff86 ? _0x40ee23(0x384) : 'ai') + _0x40ee23(0x3b1) + (!_0xbaff86 ? _0x40ee23(0x825) + _0xbb9bf9 + _0x40ee23(0x9e0) : '') + _0x40ee23(0x84d) + (_0xbaff86 ? _0x40ee23(0x384) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x2d50d7['content'] + _0x40ee23(0x45f) + (_0xbaff86 ? '<div\x20class=\x22snoop-avatar\x22>' + _0xbb9bf9 + _0x40ee23(0x9e0) : '') + _0x40ee23(0x54c); }) : (console[_0x140393(0x7a4)](_0x140393(0x749), _0x984ccd), _0x5c4478 = _0x28cae8); } const _0xf19751 = { 'role': _0x140393(0x384), 'type': 'music', 'content': _0x140393(0x3c8) + _0x1d109f[_0x140393(0x76d)] + _0x140393(0xa43) + _0x1d109f[_0x140393(0x1e1)] + ']', 'songName': _0x1d109f[_0x140393(0x76d)], 'artist': _0x1d109f['artist'], 'coverUrl': _0x5c4478, 'playableUrl': _0x2ba895['url'], 'timestamp': Date[_0x140393(0x780)]() }; _0x5f49a9[_0x140393(0xb06)][_0x140393(0x238)](_0xf19751), _0x4b6e3c(_0xf19751, _0x5f49a9[_0x140393(0xb06)][_0x140393(0x2ed)] - 0x1), _0x3c4da6(); } else _0x46ef24[_0x140393(0x458)](_0x140393(0x173), () => { const _0x4b63b2 = _0x140393; if (_0x286208['length'] === 0x0) return; _0x3f5e2a = (_0xf74cc0 + 0x1) % _0x54619f[_0x4b63b2(0x2ed)], _0x1db2b6(_0x2295c0[_0x20fdcf], _0x5bc03b); }); } catch (_0x1bfb2b) { console[_0x140393(0x7a4)]('用户分享音乐失败:', _0x1bfb2b), _0xd5e395('搜索失败:\x20' + _0x1bfb2b[_0x140393(0xb58)]); } } } function _0x55b90f(_0x416b26, _0x5885fb = 0x78) { const _0x3eb258 = _0x4d95ce, _0x1207de = _0x25d8cf => { const _0x599c86 = _0xe792; if (_0x25d8cf[_0x599c86(0x664)] === 'user') return _0x5f49a9[_0x599c86(0xb5d)]?.[_0x599c86(0x7d9)] || _0x599c86(0x51d); if (_0x25d8cf[_0x599c86(0x699)]) { const _0x1668a2 = _0x590c99(_0x25d8cf[_0x599c86(0x699)]); return _0x1668a2?.['name'] || _0x599c86(0x1e9); } if (_0x416b26?.[_0x599c86(0x433)] === _0x599c86(0x838)) { const _0x3381e0 = _0x590c99(_0x416b26['participantIds'][0x0]); return _0x3381e0?.[_0x599c86(0x7d9)] || 'AI'; } return _0x599c86(0x3af); }, _0x580af3 = _0x5f49a9[_0x3eb258(0xb06)]['slice'](-_0x5885fb), _0x1beeb6 = []; for (const _0x23864a of _0x580af3) { if (_0x23864a[_0x3eb258(0x8cd)]) { if (_0x3eb258(0x375) === _0x3eb258(0x375)) _0x1beeb6[_0x3eb258(0x238)]('[' + _0x1207de(_0x23864a) + ']\x20[sticker:' + (_0x23864a[_0x3eb258(0x47e)]?.[_0x3eb258(0xa55)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { _0x3d2b03('歌名和歌手都不能为空！'); return; } } else { if (_0x23864a['image']) { const _0x5e6d69 = _0x23864a[_0x3eb258(0x47e)] ? '\x20' + _0x23864a[_0x3eb258(0x47e)] : ''; _0x1beeb6[_0x3eb258(0x238)]('[' + _0x1207de(_0x23864a) + _0x3eb258(0x4ba) + _0x5e6d69); } else _0x23864a['content'] && _0x1beeb6[_0x3eb258(0x238)]('[' + _0x1207de(_0x23864a) + ']\x20' + _0x23864a[_0x3eb258(0x47e)]); } } return _0x1beeb6[_0x3eb258(0x414)]('\x0a'); } function _0x53bae2(_0x483a83, _0x263ab9) { const _0x12aa91 = _0x4d95ce; if (_0x12aa91(0x2b1) === _0x12aa91(0x2b1)) { if (!_0x483a83 || !_0x263ab9) return null; const _0x3a2e7c = _0x263ab9[_0x12aa91(0xa55)](/@([^\s:：,，。!?]+)/); if (!_0x3a2e7c) return null; const _0xae2296 = _0x3a2e7c[0x1][_0x12aa91(0x831)](); for (const _0xa522fd of _0x483a83[_0x12aa91(0x258)]) { const _0x59360f = _0x590c99(_0xa522fd); if (!_0x59360f?.['name']) continue; if (_0x59360f[_0x12aa91(0x7d9)]['toLowerCase']() === _0xae2296) return _0x59360f; if (_0x59360f['name'][_0x12aa91(0x831)]()[_0x12aa91(0x93c)](_0xae2296)) return _0x59360f; } return null; } else { _0x1340eb(); const _0x64f111 = (_0x158905[_0x12aa91(0x17c)][_0x12aa91(0x404)] || '')['includes'](_0x22aa15); _0x5e4df1[_0x12aa91(0x815)] = _0x64f111, _0x406f16('settings', _0x12aa91(0x529)); } } function _0x5f0489(_0x1f07ba) { const _0x55da0f = _0x4d95ce, _0x409029 = _0x1f07ba['indexOf']('{'), _0x194f98 = _0x1f07ba[_0x55da0f(0xa40)]('}'); if (_0x409029 >= 0x0 && _0x194f98 > _0x409029) return _0x1f07ba[_0x55da0f(0xa24)](_0x409029, _0x194f98 + 0x1); return _0x1f07ba; } function _0x1a69eb(_0x5959ee, _0xefad4b, _0x3baa09) { const _0x49cd6a = _0x4d95ce, _0x83efac = new Map(_0xefad4b[_0x49cd6a(0x190)](_0x525a85 => [String(_0x525a85['id']), _0x525a85])), _0x2b2b56 = _0x3a6c1c => String(_0x3a6c1c || '')[_0x49cd6a(0x831)]()[_0x49cd6a(0xa38)](/\s+/g, ''), _0xbbf7da = new Map(_0xefad4b[_0x49cd6a(0x190)](_0x375bc2 => [_0x2b2b56(_0x375bc2[_0x49cd6a(0x7d9)]), _0x375bc2])), _0x24645b = new Set(_0x3baa09), _0x6542e2 = { 'events': [] }; for (const _0x593c17 of _0x5959ee?.[_0x49cd6a(0x3d7)] || []) { const _0x184992 = _0x593c17[_0x49cd6a(0x699)] ?? _0x593c17['sender'] ?? _0x593c17[_0x49cd6a(0xa10)] ?? _0x593c17[_0x49cd6a(0x88e)] ?? _0x593c17[_0x49cd6a(0x664)] ?? _0x593c17[_0x49cd6a(0x7d9)]; if (!_0x184992) continue; let _0x282a4e = _0x83efac[_0x49cd6a(0xb3d)](String(_0x184992)) || _0xbbf7da[_0x49cd6a(0xb3d)](_0x2b2b56(_0x184992)); if (!_0x282a4e) continue; const _0x163127 = (_0x593c17[_0x49cd6a(0x897)] || _0x593c17[_0x49cd6a(0x433)] || _0x49cd6a(0x3c5))['toLowerCase'](); if (_0x163127 === _0x49cd6a(0x6e6)) { const _0x1ebb4d = (_0x593c17['sticker'] ?? _0x593c17['emoji'] ?? _0x593c17['emote'] ?? _0x593c17[_0x49cd6a(0x221)])?.[_0x49cd6a(0x1c8)](); if (_0x1ebb4d && _0x24645b['has'](_0x1ebb4d)) _0x6542e2[_0x49cd6a(0x3d7)][_0x49cd6a(0x238)]({ 'senderId': _0x282a4e['id'], 'kind': 'sticker', 'sticker': _0x1ebb4d }); else { const _0x58058a = String(_0x593c17[_0x49cd6a(0x47e)] ?? _0x593c17['text'] ?? '')[_0x49cd6a(0x1c8)]() || '[sticker:' + (_0x1ebb4d || '未知表情') + ']'; if (_0x58058a) _0x6542e2[_0x49cd6a(0x3d7)]['push']({ 'senderId': _0x282a4e['id'], 'kind': _0x49cd6a(0x3c5), 'content': _0x58058a }); } } else { const _0x4b4eb5 = String(_0x593c17[_0x49cd6a(0x47e)] ?? _0x593c17[_0x49cd6a(0x3c5)] ?? _0x593c17[_0x49cd6a(0xb58)] ?? '')[_0x49cd6a(0x1c8)](); if (_0x4b4eb5) _0x6542e2[_0x49cd6a(0x3d7)][_0x49cd6a(0x238)]({ 'senderId': _0x282a4e['id'], 'kind': _0x49cd6a(0x3c5), 'content': _0x4b4eb5 }); } } return _0x6542e2; } async function _0x3c990f(_0x3d9b30) { const _0x4e2dc6 = _0x4d95ce; if (_0x4e2dc6(0x46a) !== _0x4e2dc6(0x46a)) _0x4a33c7(![]); else { if (!_0x3d9b30 || !Array[_0x4e2dc6(0x552)](_0x3d9b30['events']) || _0x3d9b30[_0x4e2dc6(0x3d7)][_0x4e2dc6(0x2ed)] === 0x0) return; const _0x495883 = _0x2ef5f8 => _0x2ef5f8 + Math[_0x4e2dc6(0x516)](Math[_0x4e2dc6(0x512)]() * 0x190); let _0x34b6e0 = 0x1f4; for (const _0x582339 of _0x3d9b30[_0x4e2dc6(0x3d7)]) { if (_0x4e2dc6(0x858) !== _0x4e2dc6(0x31b)) { await new Promise(_0x276994 => setTimeout(_0x276994, _0x495883(_0x34b6e0))), _0x34b6e0 += 0x2bc; const _0x3a98f2 = _0x5f49a9[_0x4e2dc6(0xb06)]['at'](-0x1)?.['isOffline'] ?? ![]; if (_0x582339[_0x4e2dc6(0x897)] === 'sticker') { const _0x26651e = _0xf3cd55[_0x4e2dc6(0x7ed)](_0x280e8b => _0x280e8b[_0x4e2dc6(0x7d9)] === _0x582339[_0x4e2dc6(0x6e6)]); if (_0x26651e) { const _0x4e76bb = { 'role': 'assistant', 'content': _0x4e2dc6(0x96a) + _0x26651e[_0x4e2dc6(0x7d9)] + ']', 'displayUrl': _0x26651e['url'], 'senderId': _0x582339['senderId'], 'timestamp': Date[_0x4e2dc6(0x780)](), 'isOffline': _0x3a98f2 }; _0x5f49a9[_0x4e2dc6(0xb06)][_0x4e2dc6(0x238)](_0x4e76bb); } } else { if (_0x582339['kind'] === _0x4e2dc6(0xb60) && _0x582339[_0x4e2dc6(0x76d)] && _0x582339[_0x4e2dc6(0x1e1)]) { const { songName: _0x14b836, artist: _0x2180c6 } = _0x582339, _0x3e9cc4 = { 'role': 'assistant', 'type': _0x4e2dc6(0xb60), 'content': _0x4e2dc6(0x1a1) + _0x14b836 + _0x4e2dc6(0xa43) + _0x2180c6 + ']', 'songName': _0x14b836, 'artist': _0x2180c6, 'senderId': _0x582339[_0x4e2dc6(0x699)], 'timestamp': Date[_0x4e2dc6(0x780)](), 'isOffline': _0x3a98f2 }; try { const _0x4df337 = await _0x1899f9(_0x14b836, _0x2180c6); _0x3e9cc4[_0x4e2dc6(0x461)] = _0x4df337[_0x4e2dc6(0x6ac)], _0x3e9cc4['playableUrl'] = _0x4df337['url']; } catch (_0x392734) { _0x4e2dc6(0x3b5) === _0x4e2dc6(0x3b5) ? (console[_0x4e2dc6(0x7a4)](_0x4e2dc6(0x311) + _0x14b836 + _0x4e2dc6(0xa43) + _0x2180c6 + '):', _0x392734), _0x3e9cc4['coverUrl'] = null, _0x3e9cc4['playableUrl'] = null) : (_0x2b95de['error'](_0x4e2dc6(0xb59), _0x2f1993), _0x4987c1({ 'role': _0x4e2dc6(0x913), 'content': _0x4e2dc6(0x554) + _0x4603df[_0x4e2dc6(0xb58)] }, _0x2cff08['conversationHistory'][_0x4e2dc6(0x2ed)] - 0x1)); } _0x5f49a9[_0x4e2dc6(0xb06)]['push'](_0x3e9cc4); } else { if (_0x582339[_0x4e2dc6(0x897)] === 'text') { if ('sgwQL' !== 'sgwQL') _0x15644c['style'][_0x4e2dc6(0x486)] = _0x4e2dc6(0x730) + _0x4d2f86[_0x4e2dc6(0x7dc)](_0x116dbc) + '\x27)', _0x2634e3[_0x4e2dc6(0x2d6)][_0x4e2dc6(0x59a)] = _0x4e2dc6(0x6ac), _0x5b3ef3[_0x4e2dc6(0x2d6)]['backgroundPosition'] = _0x4e2dc6(0x634); else { const _0x317395 = _0x384e19(_0x582339[_0x4e2dc6(0x47e)])['slice'](0x0, 0x3); for (let _0x1a27da = 0x0; _0x1a27da < _0x317395[_0x4e2dc6(0x2ed)]; _0x1a27da++) { if (_0x4e2dc6(0x971) === _0x4e2dc6(0x971)) { if (_0x1a27da > 0x0) await new Promise(_0x5ef4c3 => setTimeout(_0x5ef4c3, _0x495883(0x190))); const _0x209cf2 = { 'role': _0x4e2dc6(0x913), 'content': _0x317395[_0x1a27da], 'senderId': _0x582339['senderId'], 'timestamp': Date[_0x4e2dc6(0x780)](), 'isOffline': _0x3a98f2 }; _0x5f49a9[_0x4e2dc6(0xb06)][_0x4e2dc6(0x238)](_0x209cf2); } else _0x44e5f7[_0x4e2dc6(0x8e3)] = '▶'; } } } } } } else _0x59410f[_0x4e2dc6(0x407)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null, ..._0x25eeaf[_0x4e2dc6(0x407)] }; } _0x3c4da6(), _0x2515ef(); } } async function _0x5a51f2(_0x16324a, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x4aeed3 = _0x4d95ce; if (_0x4aeed3(0xa63) !== 'tGbCG') { const _0x270700 = _0x595178[0x0], _0x4e17bf = new _0x15f37c(_0x270700[_0x4aeed3(0x256)] + 'T00:00:00'), _0x11ea98 = _0x4e17bf - _0x135fbe, _0x21a02b = _0x43c767[_0x4aeed3(0x8bd)](_0x11ea98 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x410648[_0x4aeed3(0x8e3)] = _0x4aeed3(0x835) + _0x270700[_0x4aeed3(0x47e)] + '」', _0x178f86['innerHTML'] = _0x4aeed3(0x2a3) + _0x21a02b + _0x4aeed3(0x98f); } else { await new Promise(_0x21ae57 => setTimeout(_0x21ae57, 0xa)); if (!_0x5f49a9[_0x4aeed3(0x17c)][_0x4aeed3(0x404)] || !_0x5f49a9[_0x4aeed3(0x17c)][_0x4aeed3(0x911)] || !_0x5f49a9['apiSettings']['model']) return _0xd5e395('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; const _0x23e0f2 = _0x39d291(); if (!_0x23e0f2 || !_0x16324a) return ![]; const _0x4c7384 = _0x30ad29(_0x23e0f2['id']), _0x5d21d3 = _0x5f49a9[_0x4aeed3(0xb06)]['at'](-0x1)?.[_0x4aeed3(0x664)] === _0x4aeed3(0x384); if (!force && !_0x5d21d3) return ![]; const _0x45173f = _0x5f49a9['conversationHistory']['at'](-0x1)?.['isOffline'] ?? ![]; if (delayMs) await new Promise(_0x307986 => setTimeout(_0x307986, delayMs)); _0x45173f ? document[_0x4aeed3(0x374)](_0x4aeed3(0xaa5))['textContent'] = _0x4aeed3(0x43d) : _0x410023(!![]); let _0x543756 = ''; const _0x27747b = _0x39d291(); if (_0x27747b?.[_0x4aeed3(0xa3f)]?.[_0x4aeed3(0x74e)]) { if (_0x4aeed3(0xaf1) === 'xTmCz') { const _0x53b589 = _0x27747b['activeListenSession'], _0xc7ba60 = await _0x17dbaf(_0x53b589['songId']); if (_0xc7ba60 && _0xc7ba60[_0x4aeed3(0x6f0)]) { if (_0x4aeed3(0x633) === 'kZqjh') _0x15c68c['appendChild'](_0x4b2134), _0x105c41[_0x4aeed3(0x962)](_0x38cbd7); else { const _0x19226b = _0x2b130e(_0xc7ba60[_0x4aeed3(0x6f0)]); if (_0x19226b[_0x4aeed3(0x2ed)] > 0x0) { const _0x236319 = _0x96f20d[_0x4aeed3(0xaa6)]; let _0x5821e6 = -0x1; for (let _0x59c101 = 0x0; _0x59c101 < _0x19226b['length']; _0x59c101++) { if (_0x236319 >= _0x19226b[_0x59c101][_0x4aeed3(0x9b7)]) _0x5821e6 = _0x59c101; else break; } const _0x5d74d7 = _0x19226b[_0x4aeed3(0x190)]((_0x43963c, _0x3f339b) => { const _0x5cf57d = _0x4aeed3, _0x3bb8b = _0x3f339b === _0x5821e6 ? _0x5cf57d(0x7b5) : ''; return '' + _0x3bb8b + _0x43963c[_0x5cf57d(0x3c5)]; })[_0x4aeed3(0x414)]('\x0a'); _0x543756 = (_0x4aeed3(0xa88) + _0x53b589[_0x4aeed3(0x1e1)] + _0x4aeed3(0xada) + _0x53b589[_0x4aeed3(0x76d)] + _0x4aeed3(0x955) + _0x5d74d7 + _0x4aeed3(0x4b0))[_0x4aeed3(0x1c8)](); } } } } else { const _0x22d139 = _0x2f5a9e['friendCircles']['find'](_0x5bcd6b => _0x5bcd6b['id'] === _0x45f6f3); if (!_0x22d139) return; _0x15d52b[_0x4aeed3(0x8e3)] = _0x4aeed3(0x818), _0x324ec7[_0x4aeed3(0x330)] = _0x22d139['id'], _0x5d2f0f[_0x4aeed3(0x330)] = _0x22d139[_0x4aeed3(0x7d9)], _0x4f9320['value'] = _0x22d139['boundUserProfileId'], _0x19f415[_0x4aeed3(0x2d6)][_0x4aeed3(0x416)] = _0x4aeed3(0x888), _0x22d139['memberCharacterIds'][_0x4aeed3(0x170)](_0x17ab83 => { const _0x1acb70 = _0x4aeed3, _0xea60ea = _0x344c0d['querySelector'](_0x1acb70(0x1b2) + _0x17ab83); if (_0xea60ea) _0xea60ea['checked'] = !![]; }); } } let _0x122a6d = '', _0x530fcd = ''; const _0xd9f767 = _0x5f49a9[_0x4aeed3(0xb06)][_0x4aeed3(0x2ed)]; if (_0xd9f767 > 0x1) { const _0x51146a = _0x5f49a9['conversationHistory'][_0xd9f767 - 0x2], _0x381ef2 = _0x5f49a9[_0x4aeed3(0xb06)][_0xd9f767 - 0x1]; if (_0x51146a['isOffline'] === ![] && _0x381ef2[_0x4aeed3(0x9d1)] === !![]) { if (_0x4aeed3(0x5be) !== 'qYQFt') try { _0x9b2937[_0x4f5cac] = _0x18cb83[_0x4aeed3(0x468)](_0x50cf57); } catch (_0x3272fd) { } else _0x530fcd = _0x4aeed3(0x43e) + _0x4c7384[_0x4aeed3(0x7d9)] + _0x4aeed3(0x537); } else _0x51146a['isOffline'] === !![] && _0x381ef2[_0x4aeed3(0x9d1)] === ![] && (_0x530fcd = _0x4aeed3(0x32c) + _0x4c7384[_0x4aeed3(0x7d9)] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); } if (_0x45173f) { if ('jYjJv' !== _0x4aeed3(0xa78)) { const _0x574e04 = _0x5c8663[_0x4aeed3(0x330)][_0x4aeed3(0x1c8)](); _0x574e04 && (_0x41c8fc(_0x574e04), _0x4d6ad9['value'] = '', _0x44acd9(_0x57415b, 0x64)); } else { const _0x434a34 = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x122a6d = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x4c7384[_0x4aeed3(0x7d9)] + _0x4aeed3(0x9c1) + _0x434a34 + _0x4aeed3(0x6e8) + _0x16324a[_0x4aeed3(0x7d9)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x434a34 + ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[' + _0x434a34 + _0x4aeed3(0x974); } } else '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a'; const { omniText: _0x590463 } = _0x2719e3(_0x16324a['id'], _0x23e0f2['id']), _0xf6782d = _0x2c2a8e(), _0x59c85d = _0x20b2d5(_0x16324a['id']), _0x299cf1 = _0x2337fc(_0x16324a['id']), _0x547be7 = await _0xab8d82(_0x16324a['id']), _0x329c1f = typeof _0x11690a === _0x4aeed3(0x267) ? _0x11690a[_0x4aeed3(0x4d7)](_0x4aeed3(0x68b), _0x16324a[_0x4aeed3(0x7d9)])[_0x4aeed3(0x4d7)](_0x4aeed3(0x536), _0x4c7384[_0x4aeed3(0x7d9)] || '用户') : '', _0x52ae53 = _0xf3cd55['map'](_0x462449 => _0x462449[_0x4aeed3(0x7d9)])['join'](',\x20'); let _0x551bf5 = ''; if (_0x16324a[_0x4aeed3(0x128)] && _0x16324a[_0x4aeed3(0x128)][_0x4aeed3(0x2ed)] > 0x0) { const _0x4b4c57 = _0x16324a[_0x4aeed3(0x128)][_0x4aeed3(0x190)](_0x1d5fba => _0x5f49a9['worldBooks']['find'](_0x2f46ee => _0x2f46ee['id'] === _0x1d5fba))[_0x4aeed3(0x8be)](Boolean)['map'](_0x23182b => _0x4aeed3(0x8c6) + _0x23182b[_0x4aeed3(0x7d9)] + '\x0a' + _0x23182b[_0x4aeed3(0x47e)])[_0x4aeed3(0x414)](''); if (_0x4b4c57) _0x551bf5 = _0x4aeed3(0x9e2) + _0x4b4c57; } const _0x588649 = _0x4c7384[_0x4aeed3(0x8eb)] ? '\x0a\x0a#\x20关于对话者“' + _0x4c7384[_0x4aeed3(0x7d9)] + _0x4aeed3(0xb0c) + _0x4c7384['persona'] : ''; let _0x327b34 = ''; const _0x5dfb97 = new Date(), _0x5f2124 = _0x97843f(_0x16324a['id']); _0x327b34 = _0x4aeed3(0x97e), _0x327b34 += _0x4aeed3(0x1b4) + _0x5dfb97[_0x4aeed3(0x591)](_0x4aeed3(0x983), { 'dateStyle': 'full', 'timeStyle': 'short' }) + '\x0a'; if (_0x5f2124) { if ('YsZIq' === _0x4aeed3(0x1c9)) _0xb1bc3b ? _0x3c73ac['classList'][_0x4aeed3(0x132)](_0x4aeed3(0x5af)) : _0x128401[_0x4aeed3(0x8f0)][_0x4aeed3(0x31f)](_0x4aeed3(0x5af)); else { const _0x325c31 = new Date(_0x5f2124[_0x4aeed3(0x75a)]), _0x144c78 = _0x34dad7(_0x325c31); _0x327b34 += _0x4aeed3(0x1d3) + _0x144c78 + '\x0a'; const _0x1c925b = _0x5dfb97[_0x4aeed3(0x4b4)](), _0x200adf = _0x325c31[_0x4aeed3(0x4b4)](), _0x1e2929 = new Date(); _0x1e2929[_0x4aeed3(0x162)](_0x5dfb97[_0x4aeed3(0x465)]() - 0x1); const _0x3cd25f = _0x1e2929[_0x4aeed3(0x4b4)](); if (_0x1c925b === _0x200adf) { if (_0x4aeed3(0x77d) !== 'AvQRs') { const _0x33cd79 = (_0x5dfb97 - _0x325c31) / (0x3e8 * 0x3c); if (_0x33cd79 < 0x3c) { if (_0x4aeed3(0x75c) !== _0x4aeed3(0x58f)) _0x327b34 += _0x4aeed3(0x171); else { if (_0x455b52 === null) return; const _0xa506b4 = _0x2747b2[_0x4aeed3(0x330)][_0x4aeed3(0x1c8)](); if (_0xa506b4 === '') { _0x38c9ac(); return; } const _0x19a584 = _0x3bc329[_0x4aeed3(0xb06)][_0x5b727e]; _0x19a584 && (_0x19a584[_0x4aeed3(0x47e)] = _0xa506b4, _0x35bb46(), _0x3d2c08()), _0x4caf3f[_0x4aeed3(0x8f0)]['remove'](_0x4aeed3(0x18c)), _0x4b6882 = null; } } else _0x327b34 += _0x4aeed3(0x560) + Math['round'](_0x33cd79 / 0x3c) + _0x4aeed3(0x29f); } else { const _0x5a5eb0 = _0x563971[_0x4aeed3(0x831)](), _0xf87226 = _0x33696c[_0x4aeed3(0x831)](); if (_0x5a5eb0[_0x4aeed3(0x93c)](_0x4aeed3(0x6cb))) return _0x4aeed3(0x1d0); if (_0xf87226[_0x4aeed3(0x454)](_0x4aeed3(0x42c))) return _0x4aeed3(0x1d0); if (_0xf87226[_0x4aeed3(0x454)](_0x4aeed3(0x312))) return _0x4aeed3(0xa20); if (_0x5a5eb0[_0x4aeed3(0x93c)](_0x4aeed3(0xa20))) return 'gemini'; return _0x4aeed3(0x397); } } else { if (_0x3cd25f === _0x200adf) _0x327b34 += '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a'; else { const _0x2bfc62 = Math['round']((_0x5dfb97 - _0x325c31) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x327b34 += _0x4aeed3(0x429) + _0x2bfc62 + _0x4aeed3(0x129); } } } } else _0x327b34 += _0x4aeed3(0x830); const _0x40c24f = ('\x0a' + _0x122a6d + _0x4aeed3(0x75d) + _0x16324a[_0x4aeed3(0x7d9)] + '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22' + _0x16324a['name'] + ':\x22\x20或\x22[' + _0x16324a[_0x4aeed3(0x7d9)] + ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[' + _0x52ae53 + _0x4aeed3(0x9d2) + _0x329c1f + '\x0a')[_0x4aeed3(0x1c8)](), _0x484784 = [{ 'role': _0x4aeed3(0x1ce), 'content': _0x40c24f }], _0x5e88e6 = (_0x4aeed3(0xa7a) + (_0x16324a[_0x4aeed3(0x8eb)] || _0x4aeed3(0x44f)) + '\x0a' + _0x588649 + '\x20\x0a' + _0x590463 + '\x0a' + _0xf6782d + '\x0a' + _0x59c85d + '\x0a' + _0x299cf1 + _0x4aeed3(0xa64) + _0x547be7 + _0x4aeed3(0x8b8) + _0x543756 + '\x0a' + _0x327b34 + '\x0a' + _0x551bf5 + '\x0a')['trim'](); _0x5e88e6[_0x4aeed3(0xa38)](/#.*|\s/g, '') && (_0x484784[_0x4aeed3(0x238)]({ 'role': _0x4aeed3(0x384), 'content': _0x5e88e6 }), _0x484784[_0x4aeed3(0x238)]({ 'role': _0x4aeed3(0x913), 'content': _0x4aeed3(0x1f0) })); const _0x4f6d92 = _0x5f49a9['preferences']?.[_0x4aeed3(0x5e8)] ?? 0x64, _0x124748 = _0x5f49a9[_0x4aeed3(0xb06)][_0x4aeed3(0xa24)](-_0x4f6d92); for (const _0x43fcba of _0x124748) { const _0x4bb2e7 = _0x43fcba['role'] === 'ai' || _0x43fcba['role'] === _0x4aeed3(0x913) ? 'assistant' : _0x4aeed3(0x384); let _0x41ed54 = { 'role': _0x4bb2e7, 'content': _0x43fcba[_0x4aeed3(0x47e)] }, _0x3573b9 = !!_0x43fcba[_0x4aeed3(0x47e)]; if (_0x43fcba[_0x4aeed3(0x8cd)] && _0x43fcba[_0x4aeed3(0x47e)]['includes']('表情')) { const _0x464892 = _0x43fcba[_0x4aeed3(0x47e)]['match'](/：(.*?)]$/); _0x41ed54[_0x4aeed3(0x47e)] = _0x4aeed3(0x19b) + (_0x464892 ? _0x464892[0x1] : _0x4aeed3(0x70c)) + ']', _0x484784[_0x4aeed3(0x238)](_0x41ed54); } else { let _0x49bd4a = null; if (_0x43fcba[_0x4aeed3(0xad0)]) _0x4aeed3(0x7c0) === _0x4aeed3(0x7c0) ? _0x49bd4a = _0x43fcba[_0x4aeed3(0xad0)] : _0xfe6112[_0x4aeed3(0x128)] = _0x1e941a[_0x4aeed3(0x128)][_0x4aeed3(0x8be)](_0x38595b => _0x38595b !== _0x40a247); else { if (_0x43fcba['imageId']) try { const _0x1284ba = await _0x15e0c2(_0x43fcba[_0x4aeed3(0x3a7)]); _0x1284ba && (_0x49bd4a = await _0xa47e47(_0x1284ba)); } catch (_0x351a73) { console[_0x4aeed3(0x7a4)]('在准备API数据时，从IndexedDB读取图片失败:', _0x351a73); } } _0x49bd4a && (_0x4aeed3(0x7de) === _0x4aeed3(0x920) ? _0x28d008[_0x4aeed3(0x7a4)](_0x4aeed3(0x49e), _0x5cce66) : (_0x41ed54[_0x4aeed3(0xad0)] = _0x49bd4a, _0x3573b9 = !![])), _0x3573b9 && (_0x4aeed3(0x71d) !== _0x4aeed3(0x71d) ? (_0x48605c(), _0x1d5be1[_0x4aeed3(0x173)]()) : _0x484784[_0x4aeed3(0x238)](_0x41ed54)); } } try { if (_0x4aeed3(0x89d) === _0x4aeed3(0x6e3)) { const _0xe25f12 = _0x30759e(_0x51be52[_0x4aeed3(0x134)], _0x1e0dd7[_0x4aeed3(0x1c6)], _0x42fa1e); if (_0xe25f12[_0x4aeed3(0x2ed)] === 0x0) return; const _0x2d8ea9 = _0x4286e1 === 0x0 ? _0x4aeed3(0x84b) : _0x4aeed3(0x72a); _0x2cd61b[_0x4aeed3(0x238)](_0x4aeed3(0x196) + _0x2d8ea9 + _0x39cdee(_0x57c77a[_0x4aeed3(0x134)]) + '\x0a' + _0xe25f12[_0x4aeed3(0x414)]('\x0a')), _0xebbcf6[_0x46f863['chat']['id']] = _0xe25f12[_0x4aeed3(0x2ed)]; } else { const _0x2a7447 = await _0x4d0897(_0x484784); if (!_0x2a7447) return ![]; if (_0x45173f) try { if (_0x4aeed3(0x7f7) !== _0x4aeed3(0xaa3)) { let _0x128960 = _0x2a7447['trim'](); const _0x32e694 = _0x128960['match'](/(\[[\s\S]*\])/); _0x32e694 && (_0x4aeed3(0x262) === _0x4aeed3(0x262) ? _0x128960 = _0x32e694[0x1] : (_0x253b22[_0x4aeed3(0x7a4)]('Failed\x20to\x20save\x20history\x20to\x20localStorage:', _0x25e42f), _0x407be4('无法保存聊天记录。'))); const _0x3c424d = JSON[_0x4aeed3(0x468)](_0x128960); if (Array[_0x4aeed3(0x552)](_0x3c424d)) { _0x5f49a9[_0x4aeed3(0x766)] = [..._0x3c424d], _0x5f49a9['characterLastScripts'][_0x16324a['id']] = [..._0x3c424d], _0x5ecdc7(); const _0x248d84 = _0x3c424d[_0x4aeed3(0x190)](_0x4f858c => _0x4f858c['speaker'] === _0x4aeed3(0x96f) ? _0x4f858c[_0x4aeed3(0xaa4)] : _0x4f858c[_0x4aeed3(0x88e)] + ':\x20' + _0x4f858c[_0x4aeed3(0xaa4)])[_0x4aeed3(0x414)]('\x0a\x0a'); _0x5f49a9[_0x4aeed3(0xb06)][_0x4aeed3(0x238)]({ 'role': 'assistant', 'senderId': _0x16324a['id'], 'timestamp': Date['now'](), 'isOffline': !![], 'content': _0x248d84 }); } } else { if (_0x19c60e) _0x4da296['click'](); } } catch (_0x272530) { if (_0x4aeed3(0x532) === 'bxMIq') console[_0x4aeed3(0x7a4)]('解析AI剧本JSON失败:', _0x272530, '原始文本:', _0x2a7447), _0x5f49a9[_0x4aeed3(0xb06)]['push']({ 'role': _0x4aeed3(0x913), 'senderId': _0x16324a['id'], 'timestamp': Date['now'](), 'isOffline': !![], 'content': _0x4aeed3(0x343) + _0x2a7447 + ']' }); else { if (!_0x5ee72e) return; _0x26b5a7 = _0x45ab2d[_0x4aeed3(0x386)][0x0][_0x4aeed3(0x88d)], _0x14ae62 === _0x4aeed3(0x525) && _0x2f9653(), _0x4644c6 = ![]; } } else { if (_0x4aeed3(0x7a7) === 'NxrhR') { _0x37b327 && _0x4f387b[_0x4aeed3(0x238)](_0x2bc962); _0x3044de = {}; const _0x5f6cea = _0x5a9f22[_0x4aeed3(0x80c)](0x2), _0x343d2a = _0x5f6cea[_0x4aeed3(0x77e)](/:\s(.+)/); if (_0x343d2a[_0x4aeed3(0x2ed)] > 0x1) { const _0x34e9ce = _0x343d2a[0x0][_0x4aeed3(0x1c8)](), _0x4e6821 = _0x343d2a[0x1][_0x4aeed3(0x1c8)]()[_0x4aeed3(0xa38)](/^"|"$/g, ''); _0x439975[_0x34e9ce] = _0x4e6821; } } else { const _0x486e4c = _0x2f9ee4(_0x2a7447), _0x10c3e6 = _0x486e4c[_0x4aeed3(0x190)](_0x556e2b => { const _0x12cb66 = _0x4aeed3; if ('IMoFF' === _0x12cb66(0x33f)) { const _0x43bd12 = _0x556e2b[_0x12cb66(0x1c8)](), _0x4dee06 = _0x43bd12[_0x12cb66(0xa55)](/^\[sticker:(.*?)\]$/), _0x54e507 = _0x43bd12[_0x12cb66(0xa55)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x16bcdf = _0x43bd12[_0x12cb66(0xa55)](/^\[music:(.*?)\|(.*?)\]$/), _0xfd9cde = _0x43bd12['match'](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x16bcdf) return { 'type': _0x12cb66(0xb60), 'songName': _0x16bcdf[0x1]['trim'](), 'artist': _0x16bcdf[0x2][_0x12cb66(0x1c8)]() }; else { if (_0x4dee06) return { 'type': 'sticker', 'name': _0x4dee06[0x1][_0x12cb66(0x1c8)]() }; else { if (_0xfd9cde) { if (_0x12cb66(0x5d3) === _0x12cb66(0x63a)) { const _0x5571fc = _0x5250d4['author'] === _0x12cb66(0x384) ? 'user' : 'ai', _0x5edc99 = _0x4226ec[_0x12cb66(0x17b)] === 'user' ? _0x117f1a[_0x12cb66(0x7d9)] : _0x227c49(_0xdf5e01[_0x12cb66(0x17b)])[_0x12cb66(0x7d9)], _0xfb62cb = _0x4f7e88[_0x12cb66(0x95f)](_0x12cb66(0x754)); _0xfb62cb[_0x12cb66(0x290)] = _0x12cb66(0x85c) + _0x5571fc, _0xfb62cb['dataset'][_0x12cb66(0x75a)] = _0x36c6ca[_0x12cb66(0x75a)], _0xfb62cb[_0x12cb66(0x2d6)]['borderBottom'] = 'none', _0xfb62cb[_0x12cb66(0x2d6)][_0x12cb66(0x787)] = '0', _0xfb62cb[_0x12cb66(0x279)] = _0x12cb66(0x8ae) + _0x5edc99 + _0x12cb66(0xa5b) + new _0x4a838a(_0x4ee70a[_0x12cb66(0x75a)])['toLocaleString']('zh-CN') + _0x12cb66(0xa33) + _0x48dd2a[_0x12cb66(0x47e)][_0x12cb66(0xa38)](/\n/g, '<br>') + _0x12cb66(0x66c), _0x578917['appendChild'](_0xfb62cb); } else return { 'type': _0x12cb66(0x318), 'eventType': _0xfd9cde[0x1]['trim'](), 'eventDate': _0xfd9cde[0x2]['trim'](), 'eventContent': _0xfd9cde[0x3][_0x12cb66(0x1c8)]() }; } else { if (_0x54e507) { const _0x52948b = parseFloat(_0x54e507[0x1]), _0x5e49d4 = _0x54e507[0x2][_0x12cb66(0x1c8)](), _0x40cd49 = _0x30ad29(_0x5f49a9[_0x12cb66(0x824)]); let _0x313b02 = null; if (_0x5e49d4 === _0x40cd49[_0x12cb66(0x7d9)]) _0x12cb66(0x27f) === _0x12cb66(0x70b) ? (_0x124081 = { 'characterId': _0x9e4b40, 'entries': [] }, _0x90be9a[_0x12cb66(0x788)][_0x12cb66(0x238)](_0x5a3e98)) : _0x313b02 = _0x40cd49['id']; else { if (_0x12cb66(0xb11) === _0x12cb66(0xb11)) { const _0x301242 = _0x39d291(); if (_0x301242[_0x12cb66(0x433)] === _0x12cb66(0x24e)) { const _0x3ac84b = _0x5f49a9[_0x12cb66(0x6b0)][_0x12cb66(0x7ed)](_0x6a3ac6 => _0x301242['participantIds'][_0x12cb66(0x454)](_0x6a3ac6['id']) && _0x6a3ac6[_0x12cb66(0x7d9)] === _0x5e49d4); if (_0x3ac84b) _0x313b02 = _0x3ac84b['id']; } } else { _0x11e401('找不到要清空的聊天记录。'); return; } } if (_0x313b02) return { 'type': _0x12cb66(0xa86), 'amount': _0x52948b, 'recipientId': _0x313b02, 'senderId': _0x16324a['id'] }; else return { 'type': _0x12cb66(0x3c5), 'content': _0x12cb66(0x474) + _0x5e49d4 + _0x12cb66(0x5e3) }; } else { if (_0x43bd12) return { 'type': _0x12cb66(0x3c5), 'content': _0x43bd12 }; } } } } return null; } else { _0x5829c0(_0x12cb66(0x5d1)); return; } })[_0x4aeed3(0x8be)](Boolean), _0x47363e = async _0x28a206 => { const _0x503d5f = _0x4aeed3, _0xdbe751 = { 'role': _0x503d5f(0x913), 'senderId': _0x16324a['id'], 'timestamp': Date[_0x503d5f(0x780)](), 'isOffline': _0x45173f }; if (_0x28a206[_0x503d5f(0x433)] === _0x503d5f(0xb60)) { const { songName: _0x58d4d4, artist: _0x1c04a1 } = _0x28a206; _0xdbe751['type'] = 'music', _0xdbe751[_0x503d5f(0x47e)] = _0x503d5f(0x1a1) + _0x58d4d4 + _0x503d5f(0xa43) + _0x1c04a1 + ']'; try { const _0x522c9d = await _0x1899f9(_0x58d4d4, _0x1c04a1); let _0x432451 = null; if (_0x522c9d[_0x503d5f(0x6ac)]) { if ('oFzJX' === _0x503d5f(0x5cd)) { _0x4b12b7[_0x503d5f(0x330)] = _0x503d5f(0x827); return; } else { const _0xf872b9 = await _0x34bb22(_0x522c9d[_0x503d5f(0x6ac)]); _0x432451 = _0x503d5f(0x8bb) + Date[_0x503d5f(0x780)]() + '_' + Math[_0x503d5f(0x512)](), await _0x5a0c6c(_0x432451, _0xf872b9); } } Object[_0x503d5f(0x866)](_0xdbe751, { 'songName': _0x58d4d4, 'artist': _0x1c04a1, 'coverId': _0x432451, 'playableUrl': _0x522c9d[_0x503d5f(0x93b)] }); } catch (_0x15ff43) { Object[_0x503d5f(0x866)](_0xdbe751, { 'songName': _0x58d4d4, 'artist': _0x1c04a1, 'coverId': null, 'playableUrl': null }); } } else { if (_0x28a206['type'] === _0x503d5f(0x6e6)) { const _0x3a0882 = _0xf3cd55['find'](_0x5f3782 => _0x5f3782[_0x503d5f(0x7d9)] === _0x28a206['name']); if (_0x3a0882) Object[_0x503d5f(0x866)](_0xdbe751, { 'content': _0x503d5f(0x96a) + _0x3a0882[_0x503d5f(0x7d9)] + ']', 'displayUrl': _0x3a0882[_0x503d5f(0x93b)] }); else _0xdbe751[_0x503d5f(0x47e)] = _0x503d5f(0x19b) + _0x28a206[_0x503d5f(0x7d9)] + ']'; } else { if (_0x28a206[_0x503d5f(0x433)] === _0x503d5f(0xa86)) { const _0x5cd5ad = _0x28a206[_0x503d5f(0x790)] === _0x30ad29(_0x5f49a9[_0x503d5f(0x824)])['id'] ? _0x30ad29(_0x5f49a9['activeChatId']) : _0x590c99(_0x28a206[_0x503d5f(0x790)]); Object[_0x503d5f(0x866)](_0xdbe751, { 'type': _0x503d5f(0xa86), 'amount': _0x28a206[_0x503d5f(0xaac)], 'recipientId': _0x28a206[_0x503d5f(0x790)], 'content': _0x503d5f(0x4d8) + (_0x5cd5ad?.[_0x503d5f(0x7d9)] || '未知') + _0x503d5f(0x20c) + _0x28a206[_0x503d5f(0xaac)] + ']' }); } else { if (_0x28a206[_0x503d5f(0x433)] === 'create_event') { if (_0x503d5f(0x6ff) === _0x503d5f(0xa3b)) { const _0x1f134c = _0x9d0c8[_0x503d5f(0x374)](_0x503d5f(0x286)), _0x4785de = _0x206563[_0x503d5f(0x374)](_0x503d5f(0x4c8)), _0x572251 = _0x157832[_0x503d5f(0x179)](_0x503d5f(0xa83)); _0x40b050[_0x503d5f(0x768)] === _0x503d5f(0x3ac) ? (_0x1f134c[_0x503d5f(0x2d6)][_0x503d5f(0x416)] = _0x503d5f(0x8b4), _0x4785de[_0x503d5f(0x2d6)]['display'] = _0x503d5f(0x888)) : (_0x1f134c[_0x503d5f(0x2d6)][_0x503d5f(0x416)] = _0x503d5f(0x888), _0x4785de[_0x503d5f(0x2d6)][_0x503d5f(0x416)] = _0x503d5f(0x8b4)), _0x572251[_0x503d5f(0x2d6)][_0x503d5f(0x416)] = _0x503d5f(0x888); } else { const _0x5dcf4a = _0x30ad29(_0x23e0f2['id']); _0x5f49a9[_0x503d5f(0x5fe)][_0x503d5f(0x238)]({ 'id': 'event_ai_' + Date['now'](), 'date': _0x28a206['eventDate'], 'type': _0x28a206['eventType'], 'content': _0x28a206[_0x503d5f(0x82d)], 'userId': _0x5dcf4a['id'], 'createdBy': 'ai' }), _0x39e4f0(), _0x7f53d5(); const _0xcff3e = _0x590c99(_0x16324a['id']); return _0xcff3e && _0x28a206[_0x503d5f(0x69e)] === _0x503d5f(0xae9) && _0xd5e395('💜\x20' + _0xcff3e['name'] + _0x503d5f(0x47a) + _0x28a206[_0x503d5f(0x82d)]), { 'role': _0x503d5f(0x913), 'senderId': _0x16324a['id'], 'timestamp': Date[_0x503d5f(0x780)](), 'isOffline': _0x45173f, 'content': null }; } } else { if (_0x503d5f(0xa5f) === _0x503d5f(0x6d2)) _0x218f77['error'](_0x503d5f(0x27a), _0xb6ce36), _0x2f183d(_0x503d5f(0x26e)); else { const _0x5cbf96 = _0x4c51ca(_0x28a206[_0x503d5f(0x47e)]); Object[_0x503d5f(0x866)](_0xdbe751, { 'content': _0x5cbf96[_0x503d5f(0x47e)], 'quotedMessage': _0x5cbf96[_0x503d5f(0x3a2)] }); } } } } } return _0xdbe751; }, _0x422802 = await Promise[_0x4aeed3(0x377)](_0x10c3e6['map'](_0x47363e)); for (const _0x3c9bfb of _0x422802) { (_0x3c9bfb[_0x4aeed3(0x47e)] || _0x3c9bfb['displayUrl'] || _0x3c9bfb['type'] === _0x4aeed3(0xb60)) && (await new Promise(_0xdedf95 => setTimeout(_0xdedf95, 0x12c + Math[_0x4aeed3(0x512)]() * 0x190)), _0x5f49a9[_0x4aeed3(0xb06)]['push'](_0x3c9bfb), _0x2515ef()); } } } return _0x3c4da6(), _0x2515ef(), !![]; } } catch (_0x45d9d7) { if (_0x45d9d7[_0x4aeed3(0x7d9)] !== 'AbortError') { console[_0x4aeed3(0x7a4)](_0x4aeed3(0x2f6), _0x45d9d7); const _0x3152a9 = { 'role': _0x4aeed3(0x913), 'content': _0x4aeed3(0x554) + _0x45d9d7['message'], 'senderId': _0x16324a['id'], 'isOffline': _0x45173f }; _0x5f49a9[_0x4aeed3(0xb06)][_0x4aeed3(0x238)](_0x3152a9), _0x2515ef(); } return ![]; } finally { 'BEAjB' === _0x4aeed3(0x2b4) ? _0x3380a9(_0x444e79[_0x4aeed3(0x258)][0x0]) : _0x410023(![]); } } } async function _0x1ce6f2() { const _0x58331f = _0x4d95ce, _0x52f6e9 = _0x39d291(); if (!_0x52f6e9 || _0x52f6e9[_0x58331f(0x433)] !== _0x58331f(0x838)) { _0xd5e395(_0x58331f(0xa1b)); return; } if (_0x5f49a9[_0x58331f(0x263)]) { _0xd5e395('我正在说话呢，别打岔！'); return; } const _0x2a848a = await _0xd56340(_0x58331f(0x7e7)); if (!_0x2a848a) return; _0x5a1a9e(!![], _0x58331f(0xb49)), _0x82ff1a[_0x58331f(0x330)] = '', _0x588661[_0x58331f(0x8f0)]['add']('show'), _0x5f49a9[_0x58331f(0x263)] = !![]; try { const _0x3d22e2 = _0x590c99(_0x52f6e9['participantIds'][0x0]), _0x402947 = _0x30ad29(_0x52f6e9['id']), _0x343687 = _0x9cd5f3(_0x52f6e9['id']); if (_0x343687[_0x58331f(0x2ed)] === 0x0) { _0x82ff1a[_0x58331f(0x330)] = _0x58331f(0x827); return; } const _0x366398 = _0x343687[_0x58331f(0x190)](_0x8def1c => { const _0xd43b38 = _0x58331f, _0x43c329 = new Date(_0x8def1c[_0xd43b38(0x75a)]), _0x446c6a = _0x43c329[_0xd43b38(0x192)]() + '-' + String(_0x43c329['getMonth']() + 0x1)[_0xd43b38(0x159)](0x2, '0') + '-' + String(_0x43c329[_0xd43b38(0x465)]())[_0xd43b38(0x159)](0x2, '0'), _0x144df8 = String(_0x43c329[_0xd43b38(0x57a)]())[_0xd43b38(0x159)](0x2, '0') + ':' + String(_0x43c329[_0xd43b38(0xaaa)]())['padStart'](0x2, '0'); let _0x58cec0 = '未知'; _0x8def1c[_0xd43b38(0x664)] === _0xd43b38(0x384) ? _0x58cec0 = _0x402947[_0xd43b38(0x7d9)] : _0x58cec0 = _0x3d22e2[_0xd43b38(0x7d9)]; let _0x2cfaa5 = _0x8def1c[_0xd43b38(0x47e)]; if (_0x8def1c['displayUrl']) _0x2cfaa5 = _0xd43b38(0x2a8); if (_0x8def1c['imageId']) _0x2cfaa5 = _0xd43b38(0x451); return '[' + _0x446c6a + '\x20' + _0x144df8 + ']\x20[' + _0x58cec0 + _0xd43b38(0x8f6) + _0x2cfaa5; })[_0x58331f(0x414)]('\x0a'), _0x388809 = _0x1321de[_0x58331f(0xa38)](/{charName}/g, _0x3d22e2[_0x58331f(0x7d9)])['replace'](/{userName}/g, _0x402947['name']), _0x282c83 = [{ 'role': _0x58331f(0x1ce), 'content': _0x388809 }, { 'role': _0x58331f(0x384), 'content': _0x366398 }], _0x13918e = await _0x4d0897(_0x282c83); _0x82ff1a[_0x58331f(0x330)] = _0x13918e || '#\x20总结失败了，可能是记录太长或太复杂。', _0x82ff1a[_0x58331f(0x3c6)] = 0x0; } catch (_0x1a966d) { _0x58331f(0x2d7) === 'QIvvl' ? _0x1eec8b[_0x58331f(0x2d6)]['backgroundImage'] = '' : (console[_0x58331f(0x7a4)]('总结失败:', _0x1a966d), _0x82ff1a['value'] = '#\x20发生错误：\x0a' + _0x1a966d[_0x58331f(0xb58)]); } finally { if (_0x58331f(0x498) === _0x58331f(0x5fd)) { const _0x260be6 = _0xe3e269['createElement']('p'); _0x260be6[_0x58331f(0x279)] = _0x4ffc93, _0x260be6['style'][_0x58331f(0x4a8)] = '0', _0x46977e[_0x58331f(0x962)](_0x260be6); } else _0x5a1a9e(![]), _0x5f49a9[_0x58331f(0x263)] = ![]; } } async function _0x4f2db6() { const _0x1e2247 = _0x4d95ce; if ('CVuXz' !== 'BJjCb') { console['log'](_0x1e2247(0x980)); if (!_0x5f49a9['apiSettings'][_0x1e2247(0x404)] || !_0x5f49a9['apiSettings'][_0x1e2247(0x911)] || !_0x5f49a9[_0x1e2247(0x17c)][_0x1e2247(0x5db)]) { if (_0x1e2247(0x7f9) === _0x1e2247(0x299)) { _0x26eb04['innerHTML'] = _0x1e2247(0x95c); return; } else { _0xd5e395(_0x1e2247(0x14e)); return; } } const _0x4d6b1f = _0x5f49a9[_0x1e2247(0xb06)]['at'](-0x1)?.[_0x1e2247(0x664)] === _0x1e2247(0x384); if (!_0x4d6b1f || _0x5f49a9['isGenerating']) return; const _0xff44fa = _0x39d291(); if (!_0xff44fa) return; _0x5f49a9[_0x1e2247(0x263)] = !![], _0x410023(!![]); try { if (_0xff44fa[_0x1e2247(0x433)] === _0x1e2247(0x838)) { const _0xa42240 = _0x590c99(_0xff44fa['participantIds'][0x0]); console[_0x1e2247(0x6e2)]('准备调用\x20generateAs...'); if (_0xa42240) await _0x5a51f2(_0xa42240, { 'force': !![] }); } else { const _0x577d72 = await _0x40a584(); if (_0x577d72 && _0x577d72['events']?.[_0x1e2247(0x2ed)]) await _0x3c990f(_0x577d72); else { console[_0x1e2247(0x390)](_0x1e2247(0x961)); const _0x47ce4e = _0xff44fa['participantIds'][_0x1e2247(0x190)](_0x590c99)['filter'](Boolean); if (!_0x47ce4e['length']) return; let _0x284059 = 0x0; for (const _0x125a30 of _0x47ce4e) { _0x5a51f2(_0x125a30, { 'force': !![], 'delayMs': _0x284059 }), _0x284059 += 0x1f4; } } } } catch (_0x4805b2) { _0x4805b2[_0x1e2247(0x7d9)] !== _0x1e2247(0x28c) && (_0x1e2247(0x1a6) !== _0x1e2247(0x4eb) ? (console[_0x1e2247(0x7a4)](_0x1e2247(0xb59), _0x4805b2), _0x4b6e3c({ 'role': _0x1e2247(0x913), 'content': _0x1e2247(0x554) + _0x4805b2['message'] }, _0x5f49a9['conversationHistory'][_0x1e2247(0x2ed)] - 0x1)) : _0x564437[_0x1e2247(0x2d6)][_0x1e2247(0x416)] = _0x1e2247(0x8b4)); } finally { _0x1e2247(0x9b9) === _0x1e2247(0x1b7) ? _0xd1877f[_0x1e2247(0x4f6)] = _0x51a537[_0x1e2247(0x4d5)][0x0]['id'] : (_0x5f49a9[_0x1e2247(0x263)] = ![], _0x410023(![])); } } else _0x14b7e4[_0x1e2247(0x8f0)][_0x1e2247(0x132)](_0x1e2247(0x985)); } function _0x7dd346(_0x178290, _0x188c19) { const _0x11d1ff = _0x4d95ce; if (_0x11d1ff(0x521) === _0x11d1ff(0x513)) { if (_0x4a6908) { const _0x4675af = _0x45ddbe['createObjectURL'](_0x55ad6e); _0x31b760[_0x11d1ff(0x984)] = _0x4675af, _0x5675cf[_0x11d1ff(0xaa0)] = () => _0x71763b[_0x11d1ff(0x7b9)](_0x4675af); } } else { const _0x323c46 = _0x188c19[_0x11d1ff(0x831)](), _0x307bf7 = _0x178290['toLowerCase'](); if (_0x323c46[_0x11d1ff(0x93c)](_0x11d1ff(0x6cb))) return _0x11d1ff(0x1d0); if (_0x307bf7[_0x11d1ff(0x454)](_0x11d1ff(0x42c))) return _0x11d1ff(0x1d0); if (_0x307bf7[_0x11d1ff(0x454)](_0x11d1ff(0x312))) return _0x11d1ff(0xa20); if (_0x323c46[_0x11d1ff(0x93c)](_0x11d1ff(0xa20))) return 'gemini'; return _0x11d1ff(0x397); } } async function _0x4d0897(_0x460b38, _0xe256da = {}) { const _0x31b43a = _0x4d95ce; _0x5f49a9[_0x31b43a(0x87f)] && _0x5f49a9[_0x31b43a(0x87f)][_0x31b43a(0x5a3)](_0x31b43a(0xaba)); _0x5f49a9['currentAbortController'] = new AbortController(); const _0x2b71c0 = _0x5f49a9[_0x31b43a(0x87f)][_0x31b43a(0x2c8)], { endpoint: _0x44dcc1, key: _0x3f9a51, model: _0x29bc8a } = _0x5f49a9[_0x31b43a(0x17c)], _0x33bee4 = !!_0xe256da[_0x31b43a(0x9e4)], _0xe8633e = _0x7dd346(_0x44dcc1, _0x29bc8a); console[_0x31b43a(0x6e2)](_0x31b43a(0x92a) + _0xe8633e); let _0x3261a1 = ''; try { if (_0x31b43a(0x1a5) === 'MFqiU') { switch (_0xe8633e) { case _0x31b43a(0x1d0): { const _0x198b40 = _0x56e5cf(_0x3f9a51), _0x628ea2 = _0x460b38[_0x31b43a(0x7ed)](_0x48f371 => _0x48f371[_0x31b43a(0x664)] === _0x31b43a(0x1ce))?.['content'] || '', _0x1024a8 = _0x460b38['filter'](_0x3eb256 => _0x3eb256[_0x31b43a(0x664)] !== _0x31b43a(0x1ce)), _0x5e3fd6 = { 'model': _0x29bc8a, 'system': _0x628ea2, 'messages': _0x1024a8[_0x31b43a(0x190)](_0xa4dfc => ({ 'role': _0xa4dfc[_0x31b43a(0x664)], 'content': [{ 'type': _0x31b43a(0x3c5), 'text': _0xa4dfc[_0x31b43a(0x47e)] }] })), 'max_tokens': 0x1000 }, _0x51d953 = await fetch(_0x44dcc1, { 'method': _0x31b43a(0xb2a), 'headers': { 'Content-Type': _0x31b43a(0x18a), 'x-api-key': _0x198b40, 'anthropic-version': _0x31b43a(0x7c2) }, 'body': JSON[_0x31b43a(0x795)](_0x5e3fd6), 'signal': _0x2b71c0 }); if (!_0x51d953['ok']) { if (_0x31b43a(0xb64) === _0x31b43a(0x3df)) _0x284edc = _0x5831e4['parse'](_0x239b5a); else { const _0x315a2d = await _0x51d953['json']()['catch'](() => ({})); throw new Error(_0x31b43a(0x9b2) + _0x51d953[_0x31b43a(0x405)] + _0x31b43a(0xa43) + (_0x315a2d[_0x31b43a(0x7a4)]?.['message'] || _0x51d953['statusText'])); } } const _0x1c3d1c = await _0x51d953[_0x31b43a(0x9e4)](); _0x3261a1 = _0x1c3d1c[_0x31b43a(0x47e)]?.[0x0]?.['text'] || ''; break; } case 'gemini': { if ('RUfvl' !== _0x31b43a(0x44e)) { const _0xa69380 = _0x56e5cf(_0x3f9a51), _0x1ee2a3 = _0x44dcc1[_0x31b43a(0x454)](_0x31b43a(0x7f0)), _0x124230 = _0x525896 => { const _0x29e864 = _0x31b43a, _0x424a15 = []; if (_0x525896[_0x29e864(0x47e)]) _0x424a15[_0x29e864(0x238)]({ 'text': _0x525896[_0x29e864(0x47e)] }); if (_0x525896[_0x29e864(0xad0)]) { const _0x41f2e7 = _0x525896[_0x29e864(0xad0)][_0x29e864(0x77e)](',')[0x1], _0x19a46b = _0x525896[_0x29e864(0xad0)][_0x29e864(0x80c)](_0x525896[_0x29e864(0xad0)][_0x29e864(0x656)](':') + 0x1, _0x525896[_0x29e864(0xad0)][_0x29e864(0x656)](';')) || 'image/jpeg'; _0x424a15[_0x29e864(0x238)]({ 'inline_data': { 'mime_type': _0x19a46b, 'data': _0x41f2e7 } }); } return _0x424a15; }, _0x2a357f = _0x460b38['map'](_0x5a27d2 => ({ 'role': _0x5a27d2[_0x31b43a(0x664)] === 'assistant' ? 'model' : _0x5a27d2[_0x31b43a(0x664)] === 'system' ? _0x31b43a(0x384) : _0x5a27d2[_0x31b43a(0x664)], 'parts': _0x124230(_0x5a27d2) }))[_0x31b43a(0x8be)](_0x33975b => _0x33975b[_0x31b43a(0x1f1)]['length'] > 0x0), _0x50f6d1 = { 'contents': _0x2a357f }; _0x33bee4 && _0x1ee2a3 && (_0x50f6d1[_0x31b43a(0x965)] = { 'response_mime_type': _0x31b43a(0x18a) }); const _0x3c2155 = _0x44dcc1 + _0x31b43a(0xb51) + _0x29bc8a + _0x31b43a(0x5b4) + _0xa69380 + _0x31b43a(0x12d), _0x5f343d = await fetch(_0x3c2155, { 'method': _0x31b43a(0xb2a), 'headers': { 'Content-Type': _0x31b43a(0x18a) }, 'body': JSON[_0x31b43a(0x795)](_0x50f6d1), 'signal': _0x2b71c0 }); if (!_0x5f343d['ok']) throw new Error('Gemini\x20API\x20Error:\x20' + _0x5f343d[_0x31b43a(0x405)]); const _0x2804d5 = _0x5f343d[_0x31b43a(0xb2c)][_0x31b43a(0x81c)](), _0x19830d = new TextDecoder(); let _0x1819e1 = ''; while (!![]) { if (_0x2b71c0[_0x31b43a(0xaff)]) { console['log'](_0x31b43a(0xb4b)), _0x2804d5[_0x31b43a(0x98c)](); break; } const { done: _0x4467b9, value: _0x110ef9 } = await _0x2804d5[_0x31b43a(0x369)](); if (_0x4467b9) break; const _0x11ff89 = _0x19830d['decode'](_0x110ef9, { 'stream': !![] }), _0x11d3a2 = _0x11ff89['split']('\x0a')[_0x31b43a(0x8be)](_0x513017 => _0x513017[_0x31b43a(0x1c8)]()[_0x31b43a(0x93c)](_0x31b43a(0xa0c))); for (const _0x5b87ce of _0x11d3a2) { const _0x1bc847 = _0x5b87ce['replace'](_0x31b43a(0x949), ''); if (_0x1bc847 === '[DONE]') break; try { _0x1819e1 += JSON[_0x31b43a(0x468)](_0x1bc847)[_0x31b43a(0x7fc)][0x0][_0x31b43a(0x47e)][_0x31b43a(0x1f1)][0x0][_0x31b43a(0x3c5)]; } catch { } } } _0x3261a1 = _0x1819e1; break; } else _0x333ff0(![]), _0x46756c[_0x31b43a(0x7a4)](_0x31b43a(0x508), _0xd0c5c5), _0x2f8780(_0x31b43a(0x735) + _0x41f1d5['message']); } case _0x31b43a(0x397): default: { if ('wUAkV' === _0x31b43a(0x292)) { const _0x34d87a = _0x56e5cf(_0x3f9a51), _0x3bc4ef = _0x44dcc1[_0x31b43a(0xa38)](/\/+$/, '') + _0x31b43a(0x586), _0x5c9cfd = _0x460b38[_0x31b43a(0x190)](_0x5344f5 => { const _0x247680 = _0x31b43a; if (_0x247680(0x873) === _0x247680(0xa6a)) _0xf61b23 = _0x9ca76c['createElement'](_0x247680(0x2d6)), _0x48bb5a['id'] = _0x247680(0x283), _0x5d628d[_0x247680(0x665)][_0x247680(0x962)](_0x4be897); else { if (_0x5344f5['role'] === _0x247680(0x384) && _0x5344f5['image']) { if (_0x247680(0xb5a) !== 'ftRJR') return { 'role': _0x247680(0x384), 'content': [{ 'type': _0x247680(0x3c5), 'text': _0x5344f5[_0x247680(0x47e)] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x5344f5[_0x247680(0xad0)], 'detail': _0x247680(0xab8) } }] }; else { const _0x3d45ff = _0x49a9f8[_0x247680(0x7ed)](_0x18adc8 => _0x18adc8['name'] === _0xaa7bc9[_0x247680(0x7d9)]); if (_0x3d45ff) _0x1bde2b['assign'](_0x5410e3, { 'content': _0x247680(0x96a) + _0x3d45ff[_0x247680(0x7d9)] + ']', 'displayUrl': _0x3d45ff[_0x247680(0x93b)] }); else _0xb3054c['content'] = '[sticker:' + _0x31f473[_0x247680(0x7d9)] + ']'; } } return { 'role': _0x5344f5[_0x247680(0x664)], 'content': _0x5344f5[_0x247680(0x47e)] }; } })[_0x31b43a(0x8be)](_0xe05321 => _0xe05321[_0x31b43a(0x47e)]), _0x43cde7 = { 'model': _0x29bc8a, 'messages': _0x5c9cfd, 'max_tokens': 0x1000, ..._0x33bee4 ? { 'response_format': { 'type': 'json_object' } } : {} }, _0x2ebf4c = await fetch(_0x3bc4ef, { 'method': _0x31b43a(0xb2a), 'headers': { 'Content-Type': _0x31b43a(0x18a), 'Authorization': _0x31b43a(0x1fc) + _0x34d87a }, 'body': JSON[_0x31b43a(0x795)](_0x43cde7), 'signal': _0x2b71c0 }); if (!_0x2ebf4c['ok']) { const _0x4288b6 = await _0x2ebf4c[_0x31b43a(0x9e4)]()[_0x31b43a(0x501)](() => ({})); throw new Error('OpenAI\x20API\x20错误:\x20' + _0x2ebf4c[_0x31b43a(0x405)] + '\x20-\x20' + (_0x4288b6[_0x31b43a(0x7a4)]?.[_0x31b43a(0xb58)] || _0x2ebf4c[_0x31b43a(0x2de)])); } const _0x4c87ef = await _0x2ebf4c[_0x31b43a(0x9e4)](); _0x3261a1 = _0x4c87ef[_0x31b43a(0xab0)]?.[0x0]?.[_0x31b43a(0xb58)]?.[_0x31b43a(0x47e)] || ''; break; } else _0xe7d44c(_0x31b43a(0x9fe) + _0x20d0d6[_0x31b43a(0xb58)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); } }return _0x3261a1; } else { if (!_0x156c04 || !_0x3a81c5[_0x31b43a(0x454)](',')) return _0x414733; const _0x10537f = _0x5c63dd[_0x31b43a(0x77e)](',')[_0x31b43a(0x190)](_0x265956 => _0x265956[_0x31b43a(0x1c8)]()); return _0x10537f[_0x149825['floor'](_0xb15510[_0x31b43a(0x512)]() * _0x10537f[_0x31b43a(0x2ed)])]; } } catch (_0xdac6d2) { if (_0xdac6d2['name'] === _0x31b43a(0x28c)) return console[_0x31b43a(0x6e2)](_0x31b43a(0x553)), ''; throw _0xdac6d2; } finally { _0x5f49a9[_0x31b43a(0x87f)] && _0x5f49a9[_0x31b43a(0x87f)][_0x31b43a(0x2c8)] === _0x2b71c0 && (_0x5f49a9[_0x31b43a(0x87f)] = null); } } async function _0x2495ae() { const _0x373812 = _0x4d95ce; if (_0x373812(0x510) !== 'DtBus') { const _0x24fe4c = _0x38c187[_0x373812(0x82f)][_0x373812(0x8f0)]['contains']('active'), _0x1c750f = _0x24fe4c ? _0x5bde35[_0x373812(0x330)] : null; let _0xfbcf86 = null, _0x592970 = ''; if (_0x24fe4c && _0x1c750f) { _0xfbcf86 = _0x5f49a9[_0x373812(0x42d)]['find'](_0xc07512 => _0xc07512[_0x373812(0x433)] === _0x373812(0x838) && _0xc07512['participantIds'][_0x373812(0x454)](_0x1c750f)); const _0x1c6c60 = _0x590c99(_0x1c750f); _0x592970 = _0x1c6c60 ? _0x1c6c60[_0x373812(0x7d9)] : _0x373812(0x5b9); } else { if (_0x5f49a9[_0x373812(0x824)]) { if ('cQGfc' === _0x373812(0xa04)) { _0xfbcf86 = _0x39d291(); const _0x2f14dd = document['getElementById'](_0x373812(0x91d))['textContent']; _0x592970 = _0x2f14dd || _0x373812(0xae0); } else _0x24d25f[_0x373812(0x6e2)]('Creating\x20object\x20store:\x20' + _0x3b3d8f), _0x51a5c5['createObjectStore'](_0x281016, { 'keyPath': 'id' }); } } if (!_0xfbcf86) { _0xd5e395(_0x373812(0x8e7)); return; } const _0x18e85d = await _0xd56340(_0x373812(0x5d4) + _0x592970 + '\x22\x20的聊天记录吗？此操作不可撤销。'); if (!_0x18e85d) return; _0xfbcf86['id'] === _0x5f49a9[_0x373812(0x824)] && (_0x2e6121(), _0x5f49a9[_0x373812(0xb06)] = [], _0x56911c()); try { localStorage[_0x373812(0x5ed)](_0x373812(0x39b) + _0xfbcf86['id']); } catch (_0x108647) { console['error'](_0x373812(0x631) + _0xfbcf86['id'], _0x108647); } _0xd5e395('\x22' + _0x592970 + _0x373812(0x346)); } else _0x434ffd(_0xc707ef), _0x2226f4(); } const _0x4c20dc = document[_0x4d95ce(0x374)](_0x4d95ce(0x738)), _0x2b6053 = document[_0x4d95ce(0x374)]('import-all-data-button'), _0x1bfe8a = document[_0x4d95ce(0x374)](_0x4d95ce(0x359)); _0x4c20dc[_0x4d95ce(0x458)](_0x4d95ce(0x173), async () => { const _0x130f6b = _0x4d95ce; if (_0x130f6b(0x47b) === 'ctSXB') { _0x5a1a9e(!![], _0x130f6b(0x68c)); const _0x43513c = []; try { const _0xea82f5 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x2a295f = 0x0; _0x2a295f < localStorage[_0x130f6b(0x2ed)]; _0x2a295f++) { if (_0x130f6b(0x59b) === _0x130f6b(0x59b)) { const _0xa9f463 = localStorage[_0x130f6b(0x911)](_0x2a295f); if (_0xa9f463) _0xea82f5[_0x130f6b(0x1d5)][_0xa9f463] = localStorage[_0x130f6b(0x6ba)](_0xa9f463); } else { const _0x3eba93 = _0x7e2755[_0x130f6b(0x7dc)](_0x4d0712); _0x26e936[_0x130f6b(0x984)] = _0x3eba93, _0x28683d['onload'] = () => _0x33eb39[_0x130f6b(0x7b9)](_0x3eba93); } } const _0x31b242 = await _0x1b5ec1, _0x187f88 = _0x31b242[_0x130f6b(0xa28)](_0x4b1f4a, _0x130f6b(0x9a1)), _0x52e3b9 = _0x187f88['objectStore'](_0x4b1f4a), _0x1c3942 = await new Promise((_0x5b7d97, _0x388330) => { const _0x43e118 = _0x130f6b, _0x1b5dd7 = _0x52e3b9[_0x43e118(0x2d0)](); _0x1b5dd7[_0x43e118(0x731)] = () => _0x5b7d97(_0x1b5dd7[_0x43e118(0x78a)]), _0x1b5dd7[_0x43e118(0x33c)] = () => _0x388330(_0x1b5dd7[_0x43e118(0x7a4)]); }); for (const _0x693eb4 of _0x1c3942) { if ('NbVkV' !== _0x130f6b(0x240)) _0x427de0(_0x130f6b(0xac0)); else { if (_0x693eb4['blob'] instanceof Blob) { if (_0x130f6b(0x130) !== 'bKYNn') { const _0x126855 = _0x13ea9b[_0x130f6b(0x516)](_0x33bb92 / 0x3c); if (_0x126855 < 0x30) _0x52b72f += _0x130f6b(0x619) + _0x126855 + _0x130f6b(0x840); else _0x3e91bd += _0x130f6b(0x4c3) + _0x2efab4[_0x130f6b(0x516)](_0x126855 / 0x18) + _0x130f6b(0x1bd); } else try { _0xea82f5['indexedDBData'][_0x693eb4['id']] = await _0xa47e47(_0x693eb4[_0x130f6b(0xb57)]); } catch (_0x4b2c77) { _0x43513c[_0x130f6b(0x238)](_0x693eb4['id']); } } } } const _0x147ed8 = _0x31b242['transaction'](_0x5330bd, _0x130f6b(0x9a1)), _0xdbccc4 = _0x147ed8[_0x130f6b(0x7f3)](_0x5330bd), _0x1933dc = await new Promise((_0x3f27b9, _0x59aa33) => { const _0x5a40e5 = _0x130f6b, _0x2ea9be = _0xdbccc4[_0x5a40e5(0x2d0)](); _0x2ea9be['onsuccess'] = () => _0x3f27b9(_0x2ea9be[_0x5a40e5(0x78a)]), _0x2ea9be['onerror'] = () => _0x59aa33(_0x2ea9be[_0x5a40e5(0x7a4)]); }); for (const _0x5a7bb2 of _0x1933dc) { const _0x35b8cb = { ..._0x5a7bb2 }; if (_0x5a7bb2['audio'] instanceof Blob) { if ('wemeY' !== _0x130f6b(0xa0f)) _0x35b8cb['audio'] = await _0xa47e47(_0x5a7bb2['audio']); else { const _0x4caec7 = _0x55c4bb[_0x130f6b(0xa28)](_0x2fe811, 'readonly'), _0x45a8c5 = _0x4caec7[_0x130f6b(0x7f3)](_0x105753), _0x2d3543 = _0x45a8c5[_0x130f6b(0xb3d)](_0x19d1ee); _0x2d3543[_0x130f6b(0x731)] = () => _0x251343(_0x2d3543[_0x130f6b(0x78a)]), _0x2d3543[_0x130f6b(0x33c)] = () => _0x8aab9b(_0x2d3543[_0x130f6b(0x7a4)]); } } if (_0x5a7bb2['cover'] instanceof Blob) { if ('wOxEs' !== _0x130f6b(0xacc)) _0x35b8cb[_0x130f6b(0x6ac)] = await _0xa47e47(_0x5a7bb2[_0x130f6b(0x6ac)]); else { const _0x2d059f = _0x3ac135[_0x130f6b(0x47e)]['match'](/：(.*?)]$/); _0x15faf3[_0x130f6b(0x47e)] = _0x130f6b(0x19b) + (_0x2d059f ? _0x2d059f[0x1] : _0x130f6b(0x70c)) + ']', _0x3241a2[_0x130f6b(0x238)](_0x4d5a14); } } _0xea82f5[_0x130f6b(0x5dd)]['push'](_0x35b8cb); } const _0x2f11aa = new Blob([JSON[_0x130f6b(0x795)](_0xea82f5, null, 0x2)], { 'type': 'application/json' }), _0x11c0a8 = URL[_0x130f6b(0x7dc)](_0x2f11aa), _0x2bdc69 = document['createElement']('a'), _0x520934 = new Date(), _0x4614e6 = _0x520934[_0x130f6b(0x192)]() + '-' + String(_0x520934[_0x130f6b(0xa47)]() + 0x1)[_0x130f6b(0x159)](0x2, '0') + '-' + String(_0x520934['getDate']())[_0x130f6b(0x159)](0x2, '0'); _0x2bdc69['href'] = _0x11c0a8, _0x2bdc69[_0x130f6b(0x3d3)] = _0x130f6b(0xa6c) + _0x4614e6 + _0x130f6b(0x28b), document[_0x130f6b(0xb2c)][_0x130f6b(0x962)](_0x2bdc69), _0x2bdc69[_0x130f6b(0x173)](), document[_0x130f6b(0xb2c)][_0x130f6b(0x6fb)](_0x2bdc69), URL[_0x130f6b(0x7b9)](_0x11c0a8), _0x5a1a9e(![]), _0x43513c[_0x130f6b(0x2ed)] > 0x0 ? _0xd5e395(_0x130f6b(0x8d7) + _0x43513c[_0x130f6b(0x414)]('\x0a')) : _0xd5e395(_0x130f6b(0x72f)); } catch (_0x3ea77a) { _0x130f6b(0xaf8) !== _0x130f6b(0x13a) ? (_0x5a1a9e(![]), console[_0x130f6b(0x7a4)](_0x130f6b(0xad1), _0x3ea77a), _0xd5e395(_0x130f6b(0x7b2) + _0x3ea77a[_0x130f6b(0xb58)])) : _0x4f337e[_0x130f6b(0x421)](_0x3cc9af, _0x3a9f80[_0x130f6b(0x1d5)][_0x13c806]); } } else _0x337733[_0x130f6b(0x7a4)](_0x130f6b(0x904), _0x3df814), _0x43ed23(_0x130f6b(0x91a) + _0x2239f6['message']); }), _0x2b6053[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x44b4df = _0x4d95ce; if (_0x44b4df(0x46b) === _0x44b4df(0x46b)) _0x1bfe8a['click'](); else { const _0x5128f9 = _0x1050cf(_0x371eba['authorId'])?.['name'] || '未知'; return _0x44b4df(0xa77) + _0x5128f9 + _0x44b4df(0x9f2) + _0x499f92[_0x44b4df(0x47e)] + '</div>'; } }), _0x1f10b1[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0xa26d34), _0x1bfe8a[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x559944 => { const _0x5dc32e = _0x4d95ce, _0xb6036d = _0x559944['target'][_0x5dc32e(0x760)][0x0]; if (!_0xb6036d) return; _0xd56340(_0x5dc32e(0x186))[_0x5dc32e(0x8a2)](_0xb2728f => { const _0x4d89af = _0x5dc32e; if (_0x4d89af(0x2dc) !== _0x4d89af(0x2e5)) { if (!_0xb2728f) { _0x1bfe8a[_0x4d89af(0x330)] = ''; return; } _0x5a1a9e(!![], _0x4d89af(0x83d)); const _0x55d760 = new FileReader(); _0x55d760[_0x4d89af(0xaa0)] = async _0x323f9e => { const _0x3e3c58 = _0x4d89af; try { const _0x1acdab = JSON[_0x3e3c58(0x468)](_0x323f9e[_0x3e3c58(0x89a)][_0x3e3c58(0x78a)]); if (!_0x1acdab[_0x3e3c58(0x1d5)] || !_0x1acdab[_0x3e3c58(0x957)]) throw new Error('文件格式不正确，不是一个有效的备份文件。'); _0x5a1a9e(!![], '正在准备图片数据...'); const _0x33cbe8 = await Promise[_0x3e3c58(0x377)](Object['keys'](_0x1acdab[_0x3e3c58(0x957)])[_0x3e3c58(0x190)](async _0x24dbb9 => { const _0x2d8602 = _0x3e3c58, _0x1c74f7 = _0x1acdab[_0x2d8602(0x957)][_0x24dbb9]; if (typeof _0x1c74f7 === _0x2d8602(0x267) && _0x1c74f7[_0x2d8602(0x93c)](_0x2d8602(0xa0c))) { const _0x4137e1 = await _0x34bb22(_0x1c74f7); return { 'id': _0x24dbb9, 'blob': _0x4137e1 }; } return null; }))[_0x3e3c58(0x8a2)](_0x2c8987 => _0x2c8987['filter'](Boolean)), _0x52ab15 = []; if (_0x1acdab[_0x3e3c58(0x5dd)]) { if (_0x3e3c58(0x7e3) !== _0x3e3c58(0x721)) { _0x5a1a9e(!![], _0x3e3c58(0xb2b)); const _0x4bf9d1 = _0x1acdab[_0x3e3c58(0x5dd)]['map'](async _0x6465e1 => { const _0x499443 = _0x3e3c58; if (_0x499443(0x89b) !== _0x499443(0x678)) { const _0x454300 = { ..._0x6465e1 }; if (_0x6465e1[_0x499443(0x9f6)]) _0x454300[_0x499443(0x9f6)] = await _0x34bb22(_0x6465e1[_0x499443(0x9f6)]); if (_0x6465e1[_0x499443(0x6ac)]) _0x454300[_0x499443(0x6ac)] = await _0x34bb22(_0x6465e1[_0x499443(0x6ac)]); return _0x454300; } else _0x5cb862 = _0x34704f['value']; }); _0x52ab15[_0x3e3c58(0x238)](...await Promise['all'](_0x4bf9d1)); } else _0x32693b += _0x3e3c58(0x782); } _0x5a1a9e(!![], _0x3e3c58(0x9c3)), localStorage[_0x3e3c58(0x993)](); for (const _0x310b79 in _0x1acdab['localStorageData']) { if (_0x3e3c58(0x9e5) === _0x3e3c58(0x9e5)) localStorage[_0x3e3c58(0x421)](_0x310b79, _0x1acdab['localStorageData'][_0x310b79]); else return _0x588257(_0x205427)[_0x3e3c58(0x8a2)](_0x3f7380 => _0x3f7380[_0x3e3c58(0xb57)]()); } _0x5a1a9e(!![], _0x3e3c58(0x3d2)); const _0x485406 = await _0x1b5ec1, _0x2ffa52 = _0x485406[_0x3e3c58(0xa28)]([_0x4b1f4a, _0x5330bd, _0x1988c4], _0x3e3c58(0x4bc)), _0x3feef3 = _0x2ffa52[_0x3e3c58(0x7f3)](_0x4b1f4a), _0x555e7d = _0x2ffa52[_0x3e3c58(0x7f3)](_0x5330bd), _0x32d1d = _0x2ffa52[_0x3e3c58(0x7f3)](_0x1988c4); _0x3feef3['clear'](), _0x555e7d[_0x3e3c58(0x993)](), _0x32d1d[_0x3e3c58(0x993)](), _0x33cbe8[_0x3e3c58(0x170)](_0x133a67 => _0x3feef3[_0x3e3c58(0x52a)](_0x133a67)), _0x52ab15[_0x3e3c58(0x170)](_0x5a7dac => _0x555e7d[_0x3e3c58(0x52a)](_0x5a7dac)), await new Promise((_0x186e3a, _0x5338f0) => { const _0x554e08 = _0x3e3c58; _0x2ffa52['oncomplete'] = _0x186e3a, _0x2ffa52['onerror'] = _0x4a3167 => _0x5338f0(_0x4a3167[_0x554e08(0x89a)][_0x554e08(0x7a4)]); }), _0x5a1a9e(![]), _0xd5e395(_0x3e3c58(0x9a3)), setTimeout(() => location[_0x3e3c58(0x497)](), 0x640); } catch (_0x530ea4) { _0x5a1a9e(![]), console[_0x3e3c58(0x7a4)](_0x3e3c58(0x848), _0x530ea4), _0xd5e395(_0x3e3c58(0x989) + _0x530ea4[_0x3e3c58(0xb58)]); } finally { if (_0x3e3c58(0x546) === _0x3e3c58(0x73c)) { const _0x256414 = _0x9efd4c[_0x3e3c58(0x17b)] === _0x3e3c58(0x384) ? _0x30ba11[_0x3e3c58(0x7d9)] : _0x35b809(_0x2c2659[_0x3e3c58(0x17b)])[_0x3e3c58(0x7d9)]; return _0x3e3c58(0x260) + new _0x32a18b(_0x373387[_0x3e3c58(0x75a)])[_0x3e3c58(0x8c4)]() + ']\x20' + _0x256414 + '\x20写道:\x20' + _0x467f0a['content']; } else _0x1bfe8a[_0x3e3c58(0x330)] = ''; } }, _0x55d760[_0x4d89af(0x2d4)](_0xb6036d); } else _0x2f63fa && (_0x57724b = _0x2a5024['userAvatarFrameUrl'] || ''); }); }); function _0x39a8bc() { const _0x1f270d = _0x4d95ce; if ('sygfZ' === 'pzPZq') { const _0x37263b = _0x4d2e9d[0x0][_0x1f270d(0x1c8)](), _0x13ab68 = _0x7f3527[0x1][_0x1f270d(0x1c8)]()[_0x1f270d(0xa38)](/^"|"$/g, ''); _0x5516fe[_0x37263b] = _0x13ab68; } else _0x353779[_0x1f270d(0x330)] = _0x5f49a9[_0x1f270d(0x17c)][_0x1f270d(0x404)] || '', _0x19b7e7[_0x1f270d(0x330)] = _0x5f49a9[_0x1f270d(0x17c)][_0x1f270d(0x911)] || '', _0x5b2d1c[_0x1f270d(0x330)] = _0x5f49a9[_0x1f270d(0x17c)][_0x1f270d(0x5db)] || '', _0xaf3be3[_0x1f270d(0x330)] = String(_0x5f49a9[_0x1f270d(0x407)]?.[_0x1f270d(0x5e8)] ?? 0x64), document[_0x1f270d(0x374)](_0x1f270d(0x2ca))[_0x1f270d(0x330)] = _0x5f49a9[_0x1f270d(0x17c)][_0x1f270d(0x80d)] || 'openai'; } function _0x1d1c8e() { const _0x31a955 = _0x4d95ce; _0x5f49a9['apiSettings'][_0x31a955(0x404)] = _0x353779['value']['trim'](), _0x5f49a9[_0x31a955(0x17c)][_0x31a955(0x911)] = _0x19b7e7[_0x31a955(0x330)][_0x31a955(0x1c8)](), _0x5f49a9[_0x31a955(0x17c)]['model'] = _0x5b2d1c[_0x31a955(0x330)][_0x31a955(0x1c8)](), _0x5f49a9[_0x31a955(0x17c)][_0x31a955(0x80d)] = document['getElementById'](_0x31a955(0x2ca))[_0x31a955(0x330)]; const _0x4a5f02 = parseInt(_0xaf3be3[_0x31a955(0x330)], 0xa); _0x5f49a9['preferences']['perChatContextLines'] = Number['isFinite'](_0x4a5f02) && _0x4a5f02 > 0x0 ? _0x4a5f02 : 0x64, _0x39e4f0(), _0xd5e395('设置已保存！'); } function _0x2ad0f5() { const _0x3f255e = _0x4d95ce; 'HYTlO' === _0x3f255e(0x823) ? (_0x30c61b[_0x3f255e(0x330)] = _0x5f49a9[_0x3f255e(0xb5d)]['name'] || '', _0x9f6d59[_0x3f255e(0x984)] = _0x5f49a9[_0x3f255e(0xb5d)]['avatar'] || _0x42c494, _0x4f232c[_0x3f255e(0x330)] = _0x5f49a9[_0x3f255e(0xb5d)][_0x3f255e(0x8eb)] || '') : _0x3649ee[_0x3f255e(0x2d6)][_0x3f255e(0x486)] = _0x3f255e(0x730) + _0x29d5bc[_0x3f255e(0x7d6)] + '\x27)'; } function _0x1cfe47() { const _0x24b680 = _0x4d95ce; _0x5f49a9['userProfile'][_0x24b680(0x7d9)] = _0x30c61b[_0x24b680(0x330)][_0x24b680(0x1c8)](), _0x5f49a9['userProfile'][_0x24b680(0x8eb)] = _0x4f232c[_0x24b680(0x330)][_0x24b680(0x1c8)](), _0x39e4f0(), _0x56911c(), _0xd5e395(_0x24b680(0x4a0)), _0x53a558(_0x24b680(0x93d), _0x24b680(0xb5d)); } async function _0x52ad3d(_0x155f3b = null) { const _0x492a21 = _0x4d95ce; _0x53a558(_0x492a21(0x82f), _0x44d5cb); const _0x188c5a = document[_0x492a21(0x374)](_0x492a21(0x223)), _0x56f64e = document[_0x492a21(0x374)]('user-avatar-frame-url-in-chat'), _0x1cf624 = document[_0x492a21(0x179)](_0x492a21(0x6c5)); if (_0x155f3b) { const _0x2d20e8 = _0x5f49a9[_0x492a21(0x6b0)][_0x492a21(0x7ed)](_0x4abadb => _0x4abadb['id'] === _0x155f3b); _0x188c5a[_0x492a21(0x330)] = _0x2d20e8[_0x492a21(0x59f)] || '', _0x56f64e['value'] = _0x2d20e8['userAvatarFrameUrl'] || ''; if (_0x1cf624) _0x1cf624[_0x492a21(0x2d6)]['backgroundImage'] = _0x2d20e8[_0x492a21(0x59f)] ? _0x492a21(0x730) + _0x2d20e8[_0x492a21(0x59f)] + '\x27)' : ''; } else { if (_0x492a21(0x3e0) === _0x492a21(0x1c3)) { const _0x1b6d63 = _0x3fbb06[_0x492a21(0x790)] === _0x43df55(_0x8a5d8b[_0x492a21(0x824)])['id'] ? _0x4bd1f5(_0x4f3c92[_0x492a21(0x824)]) : _0x38bb93(_0x398b27[_0x492a21(0x790)]); _0x5835bb['assign'](_0x2a6b1b, { 'type': _0x492a21(0xa86), 'amount': _0x2d5422['amount'], 'recipientId': _0x4ef4da[_0x492a21(0x790)], 'content': _0x492a21(0x4d8) + (_0x1b6d63?.['name'] || '未知') + '\x20转账\x20' + _0x1d7ea8[_0x492a21(0xaac)] + ']' }); } else { _0x188c5a[_0x492a21(0x330)] = '', _0x56f64e[_0x492a21(0x330)] = ''; if (_0x1cf624) _0x1cf624[_0x492a21(0x2d6)][_0x492a21(0x486)] = ''; } } _0x188c5a[_0x492a21(0x458)](_0x492a21(0x1bc), () => { const _0x22833c = _0x492a21; if ('buoDq' === _0x22833c(0x44d)) _0x1c3812(_0x2cf467); else { if (_0x1cf624) _0x1cf624[_0x22833c(0x2d6)][_0x22833c(0x486)] = _0x188c5a[_0x22833c(0x330)] ? _0x22833c(0x730) + _0x188c5a[_0x22833c(0x330)] + '\x27)' : ''; } }); const _0x560636 = document[_0x492a21(0x374)](_0x492a21(0x7c7)); _0x560636[_0x492a21(0x279)] = '', _0x5f49a9['worldBooks']['forEach'](_0x4098b1 => { const _0x2d5595 = _0x492a21, _0x2394b9 = document[_0x2d5595(0x95f)](_0x2d5595(0x3de)); _0x2394b9[_0x2d5595(0x279)] = _0x2d5595(0xb07) + _0x4098b1['id'] + _0x2d5595(0x9d8) + _0x4098b1[_0x2d5595(0x7d9)], _0x560636[_0x2d5595(0x962)](_0x2394b9); }), _0x5b3b64('char-edit-bind-user'), _0x437da2[_0x492a21(0x984)] = _0x28cae8, _0x172161[_0x492a21(0x330)] = '', _0x39b97d[_0x492a21(0x2d6)]['backgroundImage'] = '', _0x7c3a26[_0x492a21(0x330)] = '', _0x5d2f7e[_0x492a21(0x2d6)][_0x492a21(0x486)] = '', _0x2b6a2b['value'] = ''; const _0x221738 = ['normal', _0x492a21(0x275), _0x492a21(0x84a), 'sad', _0x492a21(0xa2a)]; _0x221738[_0x492a21(0x170)](_0x3ab883 => { const _0x237e61 = _0x492a21; if (_0x237e61(0xaa2) !== _0x237e61(0xaa2)) { _0x19f9b9(_0x237e61(0x784) + _0x26938d + _0x237e61(0x63f)), _0x12e895(() => _0x5333dc[_0x237e61(0x497)](), 0x5dc); return; } else document[_0x237e61(0x374)]('char-edit-sprite-' + _0x3ab883 + _0x237e61(0xa39))[_0x237e61(0x2d6)][_0x237e61(0x486)] = '', document[_0x237e61(0x374)](_0x237e61(0x4c5) + _0x3ab883 + _0x237e61(0x729))[_0x237e61(0x330)] = ''; }); if (_0x155f3b) { if (_0x492a21(0x785) !== 'MQDiz') { const _0x40de70 = _0x5f49a9[_0x492a21(0x6b0)][_0x492a21(0x7ed)](_0x279fe2 => _0x279fe2['id'] === _0x155f3b); if (!_0x40de70) return; _0x5bde35[_0x492a21(0x330)] = _0x40de70['id'], _0x5c731f[_0x492a21(0x8e3)] = _0x492a21(0x807), _0x4382ab[_0x492a21(0x330)] = _0x40de70['name'], _0x3512c5[_0x492a21(0x330)] = _0x40de70['remark'], _0x95cf2a[_0x492a21(0x330)] = _0x40de70['persona'], document[_0x492a21(0x374)](_0x492a21(0x690))[_0x492a21(0x330)] = _0x40de70[_0x492a21(0x495)] || ''; const _0x469016 = _0x5f49a9[_0x492a21(0x42d)][_0x492a21(0x7ed)](_0xcf09e5 => _0xcf09e5[_0x492a21(0x433)] === 'private' && _0xcf09e5[_0x492a21(0x258)][_0x492a21(0x454)](_0x155f3b)); document[_0x492a21(0x374)]('char-edit-bind-user')[_0x492a21(0x330)] = _0x469016?.[_0x492a21(0x3fc)] || _0x5f49a9['activeUserProfileId']; try { const _0x2b794f = await _0x15e0c2('char_avatar_' + _0x40de70['id']), _0x643345 = await _0x15e0c2(_0x492a21(0x716) + _0x40de70['id']), _0x1a744f = await _0x15e0c2('char_offline_bg_' + _0x40de70['id']); _0x437da2['src'] = _0x2b794f ? URL[_0x492a21(0x7dc)](_0x2b794f) : _0x40de70[_0x492a21(0x7d6)] || _0x28cae8; if (_0x643345) _0x39b97d['style']['backgroundImage'] = _0x492a21(0x730) + URL[_0x492a21(0x7dc)](_0x643345) + '\x27)'; if (_0x1a744f) _0x5d2f7e[_0x492a21(0x2d6)][_0x492a21(0x486)] = 'url(\x27' + URL[_0x492a21(0x7dc)](_0x1a744f) + '\x27)'; for (const _0x227e8d of _0x221738) { const _0x5c8b06 = await _0x15e0c2(_0x492a21(0x1f5) + _0x227e8d + '_' + _0x40de70['id']); _0x5c8b06 && (document[_0x492a21(0x374)](_0x492a21(0x4c5) + _0x227e8d + _0x492a21(0xa39))[_0x492a21(0x2d6)][_0x492a21(0x486)] = 'url(\x27' + URL[_0x492a21(0x7dc)](_0x5c8b06) + '\x27)'); } } catch (_0x1fe306) { console[_0x492a21(0x7a4)](_0x492a21(0x443) + _0x40de70['id'] + _0x492a21(0x4dc), _0x1fe306), _0x437da2['src'] = _0x40de70[_0x492a21(0x7d6)] || _0x28cae8; } if (_0x40de70[_0x492a21(0x128)]) { if (_0x492a21(0x84f) !== _0x492a21(0x84f)) { _0x2157ef[_0x492a21(0x766)] = [..._0x1e29e4], _0x14d7ce[_0x492a21(0xac4)][_0x13f736['id']] = [..._0x44b2bd], _0x4006c3(); const _0x24523c = _0xbf8f88[_0x492a21(0x190)](_0x3a332c => _0x3a332c[_0x492a21(0x88e)] === 'narrator' ? _0x3a332c[_0x492a21(0xaa4)] : _0x3a332c[_0x492a21(0x88e)] + ':\x20' + _0x3a332c[_0x492a21(0xaa4)])[_0x492a21(0x414)]('\x0a\x0a'); _0x43a719['conversationHistory']['push']({ 'role': _0x492a21(0x913), 'senderId': _0xc00f08['id'], 'timestamp': _0x38492b[_0x492a21(0x780)](), 'isOffline': !![], 'content': _0x24523c }); } else _0x560636[_0x492a21(0x410)](_0x492a21(0x647))['forEach'](_0x46ef79 => { const _0x5becf = _0x492a21; if ('txzfS' === _0x5becf(0x6c3)) { if (_0x40de70['linkedWorldBookIds'][_0x5becf(0x454)](_0x46ef79[_0x5becf(0x330)])) _0x46ef79[_0x5becf(0x809)] = !![]; } else _0x1d76de('包含所有图片和音乐的全量数据已成功导出！'); }); } _0x17ff62(); } else _0x363b25['worldBooks'] = _0x43b1ca[_0x492a21(0x1df)][_0x492a21(0x8be)](_0x233fb4 => _0x233fb4['id'] !== _0x377671), _0x536a7d[_0x492a21(0x6b0)]['forEach'](_0x234648 => { const _0x120350 = _0x492a21; _0x234648['linkedWorldBookIds'] && (_0x234648['linkedWorldBookIds'] = _0x234648[_0x120350(0x128)][_0x120350(0x8be)](_0x2b0c13 => _0x2b0c13 !== _0x29a7a0)); }), _0x31a66e(), _0x4155b0('条目已删除。'), _0x483eab(), _0x1bad64(_0x492a21(0x2c9), 'worldBookEditor'); } else { if ('vWwlU' !== 'ALrcW') _0x5bde35['value'] = '', _0x5c731f[_0x492a21(0x8e3)] = _0x492a21(0x8ac), _0x4382ab[_0x492a21(0x330)] = _0x492a21(0x6b8) + (_0x5f49a9['characters']['length'] + 0x1), _0x3512c5[_0x492a21(0x330)] = '', _0x95cf2a[_0x492a21(0x330)] = _0x492a21(0xb43), document[_0x492a21(0x374)]('char-edit-css')[_0x492a21(0x330)] = '', _0x17ff62(); else { const _0x4e53dc = _0x42572c[_0x492a21(0x330)]; _0x470839[_0x492a21(0x376)][_0x492a21(0x2d6)][_0x492a21(0x4c2)]('--primary-hue', _0x4e53dc), _0x4bff4b[_0x492a21(0x421)]('themeHue', _0x4e53dc), _0x8c37a(); } } const _0x41ad9f = document[_0x492a21(0x374)]('char-edit-css'); let _0x4eca5f = document[_0x492a21(0x374)](_0x492a21(0x283)); if (!_0x4eca5f) { if ('CUmKO' !== _0x492a21(0x46f)) { _0x23765e[_0x492a21(0x330)] = _0x41fe92['avatarFrameUrl'] || ''; if (_0x32f629) _0x20a47a[_0x492a21(0x2d6)][_0x492a21(0x486)] = _0x425a19['avatarFrameUrl'] ? _0x492a21(0x730) + _0x2b1407['avatarFrameUrl'] + '\x27)' : ''; } else _0x4eca5f = document['createElement'](_0x492a21(0x2d6)), _0x4eca5f['id'] = _0x492a21(0x283), document['head'][_0x492a21(0x962)](_0x4eca5f); } const _0x498e9a = () => { const _0x399b19 = _0x492a21; if (_0x399b19(0x8d4) !== _0x399b19(0x8d4)) _0x234957 = _0x102c92[_0x399b19(0x795)](_0xecc27b); else { const _0x5205fc = _0x41ad9f[_0x399b19(0x330)]; let _0x29959d = _0x5205fc[_0x399b19(0xa38)](/\.bubble\.sent/g, _0x399b19(0x273))[_0x399b19(0xa38)](/\.bubble\.received/g, _0x399b19(0x1f4)); _0x4eca5f[_0x399b19(0x279)] = _0x29959d; } }; _0x41ad9f['removeEventListener']('input', _0x498e9a), _0x41ad9f[_0x492a21(0x458)](_0x492a21(0x1bc), _0x498e9a), _0x498e9a(); } async function _0x3f10fa() { const _0x21d6af = _0x4d95ce; if (_0x21d6af(0x21e) !== 'XUrOM') { const _0x580ba5 = _0x52c0c7[_0x21d6af(0xb06)]['indexOf'](_0x4c865a); _0x580ba5 > -0x1 && _0x20a688(_0x2f1928, _0x580ba5); } else { const _0x2deec0 = _0x5bde35[_0x21d6af(0x330)]; if (!_0x2deec0) { _0xd5e395(_0x21d6af(0x511)); return; } const _0x2fcabb = _0x590c99(_0x2deec0); if (!_0x2fcabb) return; _0x5a1a9e(!![], '正在打包“' + _0x2fcabb[_0x21d6af(0x7d9)] + _0x21d6af(0x1d2)); try { if (_0x21d6af(0x8e1) === _0x21d6af(0x8e1)) { const _0x346cc6 = { 'type': _0x21d6af(0x7b4), 'version': 0x1, 'name': _0x2fcabb[_0x21d6af(0x7d9)], 'remark': _0x2fcabb[_0x21d6af(0xad9)], 'persona': _0x2fcabb[_0x21d6af(0x8eb)], 'bubbleCss': _0x2fcabb[_0x21d6af(0x495)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x16f41a = await _0x15e0c2(_0x21d6af(0x1e0) + _0x2fcabb['id']); if (_0x16f41a) _0x346cc6[_0x21d6af(0x7d6)] = await _0xa47e47(_0x16f41a); const _0xf3c7d = [_0x21d6af(0x48b), 'happy', _0x21d6af(0x84a), _0x21d6af(0x1d6), _0x21d6af(0xa2a)]; for (const _0x3cecca of _0xf3c7d) { if (_0x21d6af(0x4d2) === 'lTeen') { const _0x15a457 = _0x359c12[_0x21d6af(0x179)](_0x21d6af(0x40a) + _0x2cd4da + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x584f9c + _0x21d6af(0x96e))?.[_0x21d6af(0x279)]; _0x15a457 && (_0x405080[_0x21d6af(0x279)] = _0x15a457); } else { const _0x2430ed = await _0x15e0c2(_0x21d6af(0x1f5) + _0x3cecca + '_' + _0x2fcabb['id']); _0x2430ed && (_0x346cc6[_0x21d6af(0x6c6)][_0x3cecca] = await _0xa47e47(_0x2430ed)); } } _0x2fcabb[_0x21d6af(0x128)] && _0x2fcabb[_0x21d6af(0x128)][_0x21d6af(0x2ed)] > 0x0 && (_0x346cc6[_0x21d6af(0x1df)] = _0x2fcabb['linkedWorldBookIds'][_0x21d6af(0x190)](_0x2d9213 => _0x5f49a9[_0x21d6af(0x1df)][_0x21d6af(0x7ed)](_0x1fb657 => _0x1fb657['id'] === _0x2d9213))['filter'](Boolean)[_0x21d6af(0x190)](_0x3c7dd8 => ({ 'name': _0x3c7dd8['name'], 'content': _0x3c7dd8[_0x21d6af(0x47e)] }))); const _0x4067f2 = new Blob([JSON[_0x21d6af(0x795)](_0x346cc6, null, 0x2)], { 'type': _0x21d6af(0x18a) }), _0x493919 = URL['createObjectURL'](_0x4067f2), _0x27b316 = document[_0x21d6af(0x95f)]('a'); _0x27b316[_0x21d6af(0x61f)] = _0x493919, _0x27b316[_0x21d6af(0x3d3)] = _0x2fcabb[_0x21d6af(0x7d9)] + _0x21d6af(0x1e2), document[_0x21d6af(0xb2c)][_0x21d6af(0x962)](_0x27b316), _0x27b316[_0x21d6af(0x173)](), document['body'][_0x21d6af(0x6fb)](_0x27b316), URL[_0x21d6af(0x7b9)](_0x493919); } else _0x5d3676[_0x21d6af(0x3a2)] = { ..._0x32552c[_0x21d6af(0x81e)] }; } catch (_0x46dff3) { console[_0x21d6af(0x7a4)]('导出角色卡失败:', _0x46dff3), _0xd5e395('导出失败了，哼:\x20' + _0x46dff3['message']); } finally { _0x5a1a9e(![]); } } } async function _0x3cf44d(_0x4eab5b) { const _0xdb9775 = _0x4d95ce, _0x4a7158 = _0x4eab5b[_0xdb9775(0x89a)][_0xdb9775(0x760)][0x0]; if (!_0x4a7158) return; _0x5a1a9e(!![], _0xdb9775(0x534)); const _0x6971f2 = new FileReader(); _0x6971f2[_0xdb9775(0xaa0)] = async _0x316087 => { const _0x557cec = _0xdb9775; try { if (_0x557cec(0x9fa) !== _0x557cec(0x61b)) { const _0xd3b821 = JSON[_0x557cec(0x468)](_0x316087[_0x557cec(0x89a)]['result']); if (_0xd3b821[_0x557cec(0x433)] !== _0x557cec(0x7b4)) { if (_0x557cec(0x5dc) === 'QKVsN') throw new Error('这不是一张有效的Noir角色卡。'); else _0x2bad4c(_0x541ec4), _0x2db168['removeEventListener'](_0x557cec(0x2ff), _0x18d59e), _0x55dd4d[_0x557cec(0x188)](_0x557cec(0x7a4), _0x4fffbc), _0x20d324['src'] = '', _0x22bff9['remove'](); } const _0x24481e = []; if (_0xd3b821[_0x557cec(0x1df)] && _0xd3b821[_0x557cec(0x1df)][_0x557cec(0x2ed)] > 0x0) for (const _0x277f4 of _0xd3b821['worldBooks']) { let _0x59b98f = _0x5f49a9[_0x557cec(0x1df)]['find'](_0x2c9943 => _0x2c9943[_0x557cec(0x7d9)] === _0x277f4[_0x557cec(0x7d9)]); if (_0x59b98f) _0x24481e[_0x557cec(0x238)](_0x59b98f['id']); else { if (_0x557cec(0x1ad) === _0x557cec(0x1ad)) { const _0x546db4 = { 'id': 'wb_' + Date[_0x557cec(0x780)]() + '_' + Math[_0x557cec(0x512)](), 'name': _0x277f4[_0x557cec(0x7d9)], 'content': _0x277f4[_0x557cec(0x47e)] }; _0x5f49a9[_0x557cec(0x1df)]['push'](_0x546db4), _0x24481e[_0x557cec(0x238)](_0x546db4['id']); } else _0x33fd1b[_0x557cec(0x7a4)](_0x557cec(0x692), _0x2715f2), _0x4fb143(_0x557cec(0xa66) + _0x1a896c[_0x557cec(0xb58)]); } } const _0x28b761 = _0x557cec(0xb65) + Date[_0x557cec(0x780)](), _0x59f5c4 = { 'id': _0x28b761, 'name': _0xd3b821[_0x557cec(0x7d9)], 'remark': _0xd3b821[_0x557cec(0xad9)] || '', 'persona': _0xd3b821[_0x557cec(0x8eb)], 'avatar': _0xd3b821['avatar'] || _0x28cae8, 'linkedWorldBookIds': _0x24481e, 'bubbleCss': _0xd3b821[_0x557cec(0x495)] || '' }; if (_0xd3b821[_0x557cec(0x7d6)]) { if (_0x557cec(0x39d) !== _0x557cec(0x39d)) { const _0x4c4d06 = _0x3bf01e[_0x557cec(0x6ba)]('chatHistory_' + _0x2a944c), _0x165bb5 = _0x5a66b8['parse'](_0x4c4d06 || '[]'); return _0x5030f4[_0x557cec(0x552)](_0x165bb5) ? _0x165bb5 : []; } else { const _0x1ee6eb = await _0x34bb22(_0xd3b821[_0x557cec(0x7d6)]); await _0x5a0c6c(_0x557cec(0x1e0) + _0x28b761, _0x1ee6eb); } } if (_0xd3b821[_0x557cec(0x6c6)]) for (const _0x566dc9 in _0xd3b821['sprites']) { if ('JjWvL' === 'JjWvL') { const _0x13c2bc = _0xd3b821['sprites'][_0x566dc9], _0x5ed4fe = await _0x34bb22(_0x13c2bc); await _0x5a0c6c(_0x557cec(0x1f5) + _0x566dc9 + '_' + _0x28b761, _0x5ed4fe); } else { const _0x2b9ce2 = _0xf956df[_0x557cec(0x42d)][_0x557cec(0x7ed)](_0x7ff56e => _0x7ff56e[_0x557cec(0x258)]['includes'](_0x257a45)); if (!_0x2b9ce2) return ''; const _0x575032 = _0x531b9c(_0x2b9ce2['id']), _0x3d410d = _0x112280[_0x557cec(0x5fe)][_0x557cec(0x8be)](_0x52627f => _0x52627f[_0x557cec(0xaf9)] === _0x575032['id'] || !_0x52627f[_0x557cec(0xaf9)]); if (_0x3d410d[_0x557cec(0x2ed)] === 0x0) return ''; const _0x2b4353 = _0x3d410d[_0x557cec(0x190)](_0x4f6e2f => { const _0x255f11 = _0x557cec, _0x344a0c = _0x4f6e2f[_0x255f11(0x433)] === _0x255f11(0xae9) ? _0x255f11(0x524) : '待办'; return _0x255f11(0x260) + _0x344a0c + ']\x20' + _0x4f6e2f['date'] + ':\x20' + _0x4f6e2f[_0x255f11(0x47e)]; })['join']('\x0a'); return _0x557cec(0x50f) + _0x575032[_0x557cec(0x7d9)] + '\x20记录)\x0a' + _0x2b4353; } } _0x5f49a9[_0x557cec(0x6b0)][_0x557cec(0x238)](_0x59f5c4); const _0x6acfd6 = { 'id': 'chat_' + _0x28b761, 'type': _0x557cec(0x838), 'participantIds': [_0x28b761], 'boundUserProfileId': _0x5f49a9['activeUserProfileId'] }; _0x5f49a9[_0x557cec(0x42d)]['push'](_0x6acfd6), _0x39e4f0(), _0x223f24(), _0xd5e395('“' + _0x59f5c4[_0x557cec(0x7d9)] + '”已成功导入！'); } else { if (_0x3ccac0) _0x158c12(_0x172b18); if (_0x1f1a21['defaultPrevented']) return; _0x4c1ad2(() => { const _0x29d34a = _0x557cec; _0x164601 && _0x32c541(_0x10c0f3['id'], _0x45ee5f[_0x29d34a(0x190)](_0xa6488c => _0xa6488c['id'])); }, 0x32); } } catch (_0x2df171) { console[_0x557cec(0x7a4)](_0x557cec(0x692), _0x2df171), _0xd5e395(_0x557cec(0xa66) + _0x2df171[_0x557cec(0xb58)]); } finally { _0x5a1a9e(![]), _0x4eab5b[_0x557cec(0x89a)][_0x557cec(0x330)] = ''; } }, _0x6971f2['readAsText'](_0x4a7158); } async function _0x287080() { const _0x2ed0fa = _0x4d95ce, _0x3baef4 = _0x5bde35[_0x2ed0fa(0x330)]; let _0x4385a2 = null; const _0x717d2f = _0x172161['files'][0x0], _0x10ea12 = _0x7c3a26[_0x2ed0fa(0x760)][0x0], _0x2409a7 = _0x2b6a2b[_0x2ed0fa(0x760)][0x0], _0x2f18b0 = document[_0x2ed0fa(0x410)](_0x2ed0fa(0x68f)), _0x10ab5e = Array['from'](_0x2f18b0)[_0x2ed0fa(0x190)](_0x10b09c => _0x10b09c[_0x2ed0fa(0x330)]), _0x1dbb73 = { 'name': _0x4382ab[_0x2ed0fa(0x330)][_0x2ed0fa(0x1c8)](), 'remark': _0x3512c5['value'][_0x2ed0fa(0x1c8)](), 'persona': _0x95cf2a[_0x2ed0fa(0x330)][_0x2ed0fa(0x1c8)](), 'linkedWorldBookIds': _0x10ab5e, 'boundUserProfileId': document[_0x2ed0fa(0x374)](_0x2ed0fa(0x56f))[_0x2ed0fa(0x330)], 'bubbleCss': document['getElementById'](_0x2ed0fa(0x690))[_0x2ed0fa(0x330)][_0x2ed0fa(0x1c8)](), 'avatarFrameUrl': document[_0x2ed0fa(0x374)](_0x2ed0fa(0x223))[_0x2ed0fa(0x330)]['trim'](), 'userAvatarFrameUrl': document[_0x2ed0fa(0x374)](_0x2ed0fa(0x691))[_0x2ed0fa(0x330)]['trim']() }; if (!_0x1dbb73[_0x2ed0fa(0x7d9)]) { _0xd5e395(_0x2ed0fa(0xa8a)); return; } try { const _0x33edfd = [_0x2ed0fa(0x48b), _0x2ed0fa(0x275), _0x2ed0fa(0x84a), 'sad', _0x2ed0fa(0xa2a)]; if (_0x3baef4) { const _0x1a09bc = _0x5f49a9[_0x2ed0fa(0x6b0)][_0x2ed0fa(0x7ed)](_0x530608 => _0x530608['id'] === _0x3baef4); if (_0x1a09bc) { Object[_0x2ed0fa(0x866)](_0x1a09bc, _0x1dbb73); if (_0x717d2f) _0x1a09bc[_0x2ed0fa(0x7d6)] = await _0x454e76(_0x717d2f); } if (_0x717d2f) await _0x5a0c6c(_0x2ed0fa(0x1e0) + _0x3baef4, _0x717d2f); if (_0x10ea12) await _0x5a0c6c(_0x2ed0fa(0x716) + _0x3baef4, _0x10ea12); if (_0x2409a7) await _0x5a0c6c('char_offline_bg_' + _0x3baef4, _0x2409a7); for (const _0x3bd458 of _0x33edfd) { const _0x255cf6 = document[_0x2ed0fa(0x374)](_0x2ed0fa(0x4c5) + _0x3bd458 + '-input')['files'][0x0]; if (_0x255cf6) await _0x5a0c6c(_0x2ed0fa(0x1f5) + _0x3bd458 + '_' + _0x3baef4, _0x255cf6); } } else { if ('ohnVV' === _0x2ed0fa(0xa08)) _0x588829 = _0xd82aeb[_0x2ed0fa(0x7d6)] || _0x3b5153, _0x5ed073 = _0x3853c0[_0x2ed0fa(0x7d9)] || _0x2ed0fa(0x606), _0x24b968 = _0x4c7c22[_0x2ed0fa(0xad9)] || '私聊'; else { _0x4385a2 = _0x2ed0fa(0xb65) + Date[_0x2ed0fa(0x780)](); const _0x520b09 = { 'id': _0x4385a2, ..._0x1dbb73 }; _0x520b09[_0x2ed0fa(0x7d6)] = _0x717d2f ? await _0x454e76(_0x717d2f) : _0x28cae8, _0x5f49a9['characters']['push'](_0x520b09); const _0x458708 = { 'id': _0x2ed0fa(0x645) + _0x4385a2, 'type': _0x2ed0fa(0x838), 'participantIds': [_0x4385a2], 'boundUserProfileId': _0x1dbb73[_0x2ed0fa(0x3fc)], 'listenTogetherSession': null }; _0x5f49a9[_0x2ed0fa(0x42d)][_0x2ed0fa(0x238)](_0x458708); if (_0x717d2f) await _0x5a0c6c('char_avatar_' + _0x4385a2, _0x717d2f); if (_0x10ea12) await _0x5a0c6c(_0x2ed0fa(0x716) + _0x4385a2, _0x10ea12); if (_0x2409a7) await _0x5a0c6c('char_offline_bg_' + _0x4385a2, _0x2409a7); for (const _0x22dd6c of _0x33edfd) { const _0x577d57 = document[_0x2ed0fa(0x374)]('char-edit-sprite-' + _0x22dd6c + _0x2ed0fa(0x729))[_0x2ed0fa(0x760)][0x0]; if (_0x577d57) await _0x5a0c6c(_0x2ed0fa(0x1f5) + _0x22dd6c + '_' + _0x4385a2, _0x577d57); } } } _0x39e4f0(), _0x223f24(), _0xd5e395(_0x2ed0fa(0x282)), _0x53a558('chat', _0x2ed0fa(0x82f)); if (!_0x3baef4) { const _0x4d6db5 = _0x2ed0fa(0x645) + _0x4385a2; _0xc0e03b(_0x4d6db5), _0x2c63a6(!![]); } } catch (_0x43db4e) { if (_0x2ed0fa(0x836) !== _0x2ed0fa(0x836)) { const _0x2e79cd = _0x4e8536[_0x2ed0fa(0x374)]('friend-circle-list-container'); _0x2e79cd[_0x2ed0fa(0x279)] = ''; if (_0x3cfbc3[_0x2ed0fa(0x535)]['length'] === 0x0) { _0x2e79cd[_0x2ed0fa(0x279)] = _0x2ed0fa(0x417); return; } _0x56242e[_0x2ed0fa(0x535)]['forEach'](_0x5d9eff => { const _0x4968c8 = _0x2ed0fa, _0x4ee0a8 = _0x360ddf[_0x4968c8(0x4d5)][_0x4968c8(0x7ed)](_0xfd45df => _0xfd45df['id'] === _0x5d9eff[_0x4968c8(0x3fc)]) || { 'name': _0x4968c8(0xaa1) }, _0x2df6c5 = _0x21f6a4[_0x4968c8(0x95f)](_0x4968c8(0x754)); _0x2df6c5[_0x4968c8(0x290)] = 'world-book-item', _0x2df6c5['dataset']['id'] = _0x5d9eff['id'], _0x2df6c5['innerHTML'] = _0x4968c8(0xad5) + _0x5d9eff[_0x4968c8(0x7d9)] + _0x4968c8(0x9f4) + _0x4ee0a8[_0x4968c8(0x7d9)] + _0x4968c8(0x1ae) + _0x5d9eff['memberCharacterIds'][_0x4968c8(0x2ed)] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x2df6c5['addEventListener'](_0x4968c8(0x173), () => _0x4e5fcf(_0x5d9eff['id'])), _0x2e79cd[_0x4968c8(0x962)](_0x2df6c5); }); } else console[_0x2ed0fa(0x7a4)](_0x2ed0fa(0x904), _0x43db4e), _0xd5e395(_0x2ed0fa(0x91a) + _0x43db4e[_0x2ed0fa(0xb58)]); } } function _0x3e2c2d() { const _0x1114c0 = _0x4d95ce; _0x1fd4b8['value'] = '', _0x493ef4['innerHTML'] = ''; if (_0x5f49a9[_0x1114c0(0x6b0)][_0x1114c0(0x2ed)] < 0x2) { if (_0x1114c0(0x663) !== _0x1114c0(0x3ba)) { _0xd5e395(_0x1114c0(0x752)); return; } else { _0x175ab5[_0x1114c0(0x7a4)]('生成失败:\x20', _0x2e88b8); const _0x171dc8 = { 'role': _0x1114c0(0x913), 'content': '错误:\x20' + _0x488150[_0x1114c0(0xb58)], 'senderId': _0x26c089['id'], 'isOffline': _0x3ac449 }; _0x2f73a1['conversationHistory'][_0x1114c0(0x238)](_0x171dc8), _0x5eeb34(); } } _0x5f49a9['characters'][_0x1114c0(0x170)](_0x4e1181 => { const _0x5cdd78 = _0x1114c0; if (_0x5cdd78(0x65a) === _0x5cdd78(0x178)) _0x226239[_0x5cdd78(0xb0b)](), _0x1b510f[_0x5cdd78(0x710)][_0x5cdd78(0x145)](_0x32e227[_0x5cdd78(0x330)])[_0x5cdd78(0x8a2)](() => { const _0x581ea1 = _0x5cdd78; _0x3e9061(_0x581ea1(0x24a)); })['catch'](_0x69d3b6 => { const _0x1c87e5 = _0x5cdd78; _0x212349(_0x1c87e5(0x55f)); }); else { const _0x220f3d = document[_0x5cdd78(0x95f)]('li'); _0x220f3d[_0x5cdd78(0x290)] = _0x5cdd78(0x3d0), _0x220f3d[_0x5cdd78(0x279)] = _0x5cdd78(0x401) + _0x4e1181['id'] + _0x5cdd78(0xab3) + _0x4e1181['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x4e1181[_0x5cdd78(0x7d6)] || _0x28cae8) + _0x5cdd78(0x8fa) + _0x4e1181['id'] + _0x5cdd78(0x51e) + _0x4e1181['name'] + _0x5cdd78(0x99b), _0x493ef4['appendChild'](_0x220f3d); } }), _0x53a558(_0x1114c0(0xaf0), 'charSelect'); } function _0x2ceff7() { const _0x2a3ffa = _0x4d95ce; if (_0x2a3ffa(0x995) !== _0x2a3ffa(0x1ea)) { const _0x243fba = _0x1fd4b8[_0x2a3ffa(0x330)]['trim'](); if (!_0x243fba) { _0xd5e395(_0x2a3ffa(0x35a)); return; } const _0x37361e = Array[_0x2a3ffa(0x423)](_0x493ef4[_0x2a3ffa(0x410)]('input[type=\x22checkbox\x22]:checked'))[_0x2a3ffa(0x190)](_0x482708 => _0x482708['dataset']['id']); if (_0x37361e['length'] < 0x2) { _0xd5e395(_0x2a3ffa(0x5ad)); return; } const _0x3a35c7 = { 'id': _0x2a3ffa(0x9d5) + Date[_0x2a3ffa(0x780)](), 'type': 'group', 'name': _0x243fba, 'participantIds': _0x37361e }; _0x5f49a9[_0x2a3ffa(0x42d)][_0x2a3ffa(0x238)](_0x3a35c7), _0x5f49a9['activeChatId'] = _0x3a35c7['id'], _0x39e4f0(), _0x223f24(), _0x208cd3(), _0x2e1725(), _0xd5e395('群聊“' + _0x243fba + _0x2a3ffa(0x90d)), _0x53a558(_0x2a3ffa(0x134), 'groupChatCreate'); } else _0x136eb9[_0x2a3ffa(0x7a4)](_0x2a3ffa(0xa80), _0x5980a1), _0x17b769(_0x2a3ffa(0x362)); } _0x3cf303[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x5a4715['click']()), _0x1af005[_0x4d95ce(0x458)]('click', _0xf33d1e), _0x5a4715['addEventListener'](_0x4d95ce(0x563), _0xe7e4aa), _0x2f20ab[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x1ce6f2), _0x533674['addEventListener'](_0x4d95ce(0x173), () => _0x588661[_0x4d95ce(0x8f0)][_0x4d95ce(0x31f)]('show')), _0x3a26ff[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x588661[_0x4d95ce(0x8f0)]['remove']('show')), _0x1af8b0[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x29bbe1 = _0x4d95ce; _0x82ff1a['select'](), navigator['clipboard'][_0x29bbe1(0x145)](_0x82ff1a[_0x29bbe1(0x330)])[_0x29bbe1(0x8a2)](() => { _0xd5e395('已复制到剪贴板！'); })[_0x29bbe1(0x501)](_0x2e6900 => { const _0x3c622b = _0x29bbe1; _0xd5e395(_0x3c622b(0x55f)); }); }), _0x9ee2cd[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0xedf744), _0x3ee084[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x57def4), _0x15ec65[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x43e621[_0x4d95ce(0x8f0)][_0x4d95ce(0x31f)](_0x4d95ce(0x18c))), _0x4015b2['addEventListener']('click', () => _0x43e621[_0x4d95ce(0x8f0)][_0x4d95ce(0x31f)](_0x4d95ce(0x18c))), _0x39b97d['addEventListener']('click', () => _0x7c3a26[_0x4d95ce(0x173)]()), _0x5d2f7e[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x2b6a2b[_0x4d95ce(0x173)]()), _0x7c3a26['addEventListener'](_0x4d95ce(0x563), _0x144e77 => { const _0x3f46e6 = _0x4d95ce; if (_0x3f46e6(0x548) !== _0x3f46e6(0x2ac)) { const _0x4f5f60 = _0x144e77[_0x3f46e6(0x89a)]['files'][0x0]; if (!_0x4f5f60) return; const _0x4ab7e7 = URL['createObjectURL'](_0x4f5f60); _0x39b97d[_0x3f46e6(0x2d6)][_0x3f46e6(0x486)] = _0x3f46e6(0x730) + _0x4ab7e7 + '\x27)'; } else { if (!_0x3bbc66[_0x3f46e6(0x9ab)]) return _0xa126e9[_0x3f46e6(0x4d5)][_0x3f46e6(0x7ed)](_0x450176 => _0x450176['id'] === _0xb14040['activeUserProfileId']) || _0x313886[_0x3f46e6(0x4d5)][0x0]; const _0x3d83d8 = _0xe0267f[_0x3f46e6(0x42d)][_0x3f46e6(0x7ed)](_0x463fa5 => _0x463fa5[_0x3f46e6(0x433)] === _0x3f46e6(0x838) && _0x463fa5[_0x3f46e6(0x258)][_0x3f46e6(0x454)](_0x986a8a[_0x3f46e6(0x9ab)])), _0x1c9dd2 = _0x3d83d8?.[_0x3f46e6(0x3fc)] || _0x2e1570[_0x3f46e6(0x4f6)]; return _0x6ab08b[_0x3f46e6(0x4d5)][_0x3f46e6(0x7ed)](_0x374696 => _0x374696['id'] === _0x1c9dd2) || _0x599914[_0x3f46e6(0x4d5)][0x0]; } }), _0x2b6a2b[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x5f3684 => { const _0x5f4b0 = _0x4d95ce, _0x4f5361 = _0x5f3684[_0x5f4b0(0x89a)][_0x5f4b0(0x760)][0x0]; if (!_0x4f5361) return; const _0x1650a8 = URL['createObjectURL'](_0x4f5361); _0x5d2f7e['style'][_0x5f4b0(0x486)] = 'url(\x27' + _0x1650a8 + '\x27)'; }), _0x108a27['addEventListener'](_0x4d95ce(0x173), () => _0x53a254['click']()), _0x8ab70c[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x5b7928 = _0x4d95ce; localStorage[_0x5b7928(0x5ed)](_0x5b7928(0x751)), _0x1f43cd(), _0xd5e395(_0x5b7928(0x8b3)); }), _0x53a254['addEventListener']('change', async _0x33141a => { const _0x423abc = _0x4d95ce, _0x2a4311 = _0x33141a[_0x423abc(0x89a)][_0x423abc(0x760)][0x0]; if (!_0x2a4311) return; try { const _0x3e776e = await _0x454e76(_0x2a4311); localStorage[_0x423abc(0x421)](_0x423abc(0x751), _0x3e776e), _0x1f43cd(), _0xd5e395(_0x423abc(0x208)); } catch (_0xafd149) { _0xd5e395(_0x423abc(0x554) + _0xafd149[_0x423abc(0xb58)]); } }), document[_0x4d95ce(0x374)]('back-to-chat-from-group-settings')['addEventListener']('click', () => _0x53a558(_0x4d95ce(0x134), _0x4d95ce(0x9dc))), document[_0x4d95ce(0x374)]('save-group-settings-button')[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x295794); const _0x214135 = document[_0x4d95ce(0x374)](_0x4d95ce(0xa4e)), _0x1615dd = document[_0x4d95ce(0x374)](_0x4d95ce(0x570)); _0x214135[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x1615dd[_0x4d95ce(0x173)]()), _0x1615dd[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x1d105b => { const _0x436d1c = _0x4d95ce; if (_0x436d1c(0x464) !== _0x436d1c(0x464)) _0x1c9f3b['style'][_0x436d1c(0x177)] = _0x436d1c(0x257), _0x4aa922[_0x436d1c(0x2d6)]['top'] = _0x436d1c(0x6a0), _0x54efe4[_0x436d1c(0x2d6)][_0x436d1c(0x373)] = '50%', _0x9e9098[_0x436d1c(0x2d6)][_0x436d1c(0x3a6)] = _0x436d1c(0x4d0), _0x27519b['style'][_0x436d1c(0x416)] = _0x436d1c(0x888); else { const _0xd911b0 = _0x1d105b[_0x436d1c(0x89a)][_0x436d1c(0x760)][0x0]; if (!_0xd911b0) return; const _0x3d856f = URL['createObjectURL'](_0xd911b0); _0x214135['src'] = _0x3d856f, _0x214135[_0x436d1c(0xaa0)] = () => { URL['revokeObjectURL'](_0x3d856f); }; } }); const _0x47adda = document[_0x4d95ce(0x374)]('group-bg-preview')[_0x4d95ce(0x62b)], _0x17c544 = document[_0x4d95ce(0x374)](_0x4d95ce(0x3a1)), _0x19c4ff = document['getElementById']('group-bg-preview'); _0x47adda[_0x4d95ce(0x458)]('click', () => _0x17c544[_0x4d95ce(0x173)]()), _0x17c544[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x31f29e => { const _0x5bcf28 = _0x4d95ce; if (_0x5bcf28(0x438) === 'UyBTg') _0xa7c2b4(![]); else { const _0x30d790 = _0x31f29e[_0x5bcf28(0x89a)]['files'][0x0]; if (!_0x30d790) return; const _0x32d8bf = URL[_0x5bcf28(0x7dc)](_0x30d790); document[_0x5bcf28(0x374)](_0x5bcf28(0x615))[_0x5bcf28(0x2d6)][_0x5bcf28(0x486)] = 'url(\x27' + _0x32d8bf + '\x27)'; } }); const _0x38c955 = document[_0x4d95ce(0x179)](_0x4d95ce(0x37c)), _0x36424f = document['getElementById'](_0x4d95ce(0xa95)); _0x38c955[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x4b9fdc => { const _0x3c9dd1 = _0x4d95ce; if ('kvoWa' === _0x3c9dd1(0x99a)) { _0x4418dd(_0x3c9dd1(0x14e)); return; } else _0x4b9fdc['stopPropagation'](), _0x36424f[_0x3c9dd1(0x8f0)][_0x3c9dd1(0x411)](_0x3c9dd1(0x8d9)), _0x38c955['classList'][_0x3c9dd1(0x411)](_0x3c9dd1(0xb1f)); }), _0x36424f[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x4715e4), document[_0x4d95ce(0x374)](_0x4d95ce(0x1f8))[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x2495ae), document['getElementById'](_0x4d95ce(0x86c))[_0x4d95ce(0x458)](_0x4d95ce(0x173), async () => { const _0x5331f4 = _0x4d95ce, _0x366840 = _0x39d291(); if (!_0x366840 || _0x366840[_0x5331f4(0x433)] !== _0x5331f4(0x24e)) return; const _0x4331dc = await _0xd56340('确定要删除群聊“' + _0x366840[_0x5331f4(0x7d9)] + _0x5331f4(0x5e9)); _0x4331dc && (_0x19cca2(_0x366840['id']), _0xd5e395(_0x5331f4(0x16b)), _0x53a558(_0x5331f4(0x134)), _0x2c63a6(![])); }); const _0x286746 = document[_0x4d95ce(0x179)]('.custom-multiselect\x20.select-box'), _0xbff225 = document['getElementById'](_0x4d95ce(0x7c7)); _0x286746[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x42dd35 => { const _0x199e81 = _0x4d95ce; _0x42dd35[_0x199e81(0x1dd)](), _0xbff225['classList'][_0x199e81(0x411)](_0x199e81(0x8d9)), _0x286746['classList'][_0x199e81(0x411)]('expanded'); }), _0xbff225[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x17ff62), document[_0x4d95ce(0x458)]('click', _0x4b7d2d => { const _0x37eacc = _0x4d95ce; !document[_0x37eacc(0x179)](_0x37eacc(0x6d3))[_0x37eacc(0x998)](_0x4b7d2d[_0x37eacc(0x89a)]) && (_0xbff225[_0x37eacc(0x8f0)][_0x37eacc(0x31f)](_0x37eacc(0x8d9)), _0x286746[_0x37eacc(0x8f0)]['remove'](_0x37eacc(0xb1f))); }), _0x3ee54a[_0x4d95ce(0x458)]('click', () => { const _0x412296 = _0x4d95ce; _0x10337d(), _0x53a558(_0x412296(0x2c9), _0x412296(0x529)); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x988))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), _0x4d95ce(0x2c9))), document['getElementById']('add-world-book-button')[_0x4d95ce(0x458)]('click', () => _0x25f1da()), document[_0x4d95ce(0x374)](_0x4d95ce(0x241))['addEventListener'](_0x4d95ce(0x173), () => { const _0x75a0a = _0x4d95ce; _0x10337d(), _0x53a558('worldBook', _0x75a0a(0xb02)); }), document[_0x4d95ce(0x374)]('save-world-book-button')[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0xc88fb5), document[_0x4d95ce(0x374)](_0x4d95ce(0x73e))['addEventListener'](_0x4d95ce(0x173), _0xde2af3), _0x17d1e6[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0xa6d), _0x4d95ce(0x529))), _0x25e98a[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), 'wallpaper')), _0x30ebfc[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x1e224a[_0x4d95ce(0x173)]()), _0x1e224a[_0x4d95ce(0x458)](_0x4d95ce(0x563), async _0x41884d => { const _0x440f55 = _0x4d95ce; if ('qRYPI' === _0x440f55(0xb2e)) { const _0x239962 = _0x41884d[_0x440f55(0x89a)][_0x440f55(0x760)][0x0]; if (!_0x239962) return; await _0x463ec5(_0x239962); } else { if (_0x134d97) { const _0x38e2b6 = _0x5ae91e[_0x440f55(0x7dc)](_0x3185ed); _0x5d5f74[_0x440f55(0x984)] = _0x38e2b6, _0x1c4a4c[_0x440f55(0xaa0)] = () => { const _0x14cdac = _0x440f55; _0x27dfd2[_0x14cdac(0x7b9)](_0x38e2b6); }; } else _0xbaf675['alt'] = _0x440f55(0x523); } }), _0x14801b[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x2d5da0 = _0x4d95ce; if (_0x2d5da0(0x515) !== _0x2d5da0(0x4f4)) _0x223f24(), _0x53a558(_0x2d5da0(0x134), _0x2d5da0(0x529)); else { let _0x197bc3 = null; const _0x5659e0 = _0x58a660[_0x2d5da0(0x42d)][_0x2d5da0(0x8be)](_0xda6afe => _0xda6afe[_0x2d5da0(0x258)][_0x2d5da0(0x454)](_0x152c69)); for (const _0x16f282 of _0x5659e0) { const _0x1bb26b = _0x1b2eac(_0x16f282['id']); if (_0x1bb26b && _0x1bb26b[_0x2d5da0(0x2ed)] > 0x0) { const _0xd586a = _0x1bb26b[_0x1bb26b[_0x2d5da0(0x2ed)] - 0x1]; (!_0x197bc3 || _0xd586a[_0x2d5da0(0x75a)] > _0x197bc3[_0x2d5da0(0x75a)]) && (_0x197bc3 = _0xd586a); } } return _0x197bc3; } }), _0x4256cf[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0xf15bb2 = _0x4d95ce; _0x39a8bc(); const _0x3ca4d1 = (_0x5f49a9['apiSettings'][_0xf15bb2(0x404)] || '')[_0xf15bb2(0x454)](_0x3c8ecb); _0x37e126[_0xf15bb2(0x815)] = _0x3ca4d1, _0x53a558(_0xf15bb2(0x93d), 'home'); }), _0x46f146[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), _0x4d95ce(0x93d))), _0x399f4f[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x53eb22 = _0x4d95ce; if (_0x53eb22(0x2b8) !== 'YqkZC') _0x2e6121(), _0x53a558(_0x53eb22(0x529), _0x53eb22(0x134)); else { const _0x70537 = _0x355ed0['transaction'](_0x5a1123, _0x53eb22(0x4bc)), _0x55e658 = _0x70537['objectStore'](_0x37c175), _0x5052ad = _0x55e658[_0x53eb22(0x485)](_0xa5ebf6); _0x5052ad[_0x53eb22(0x731)] = () => _0x4d3b5e(), _0x5052ad[_0x53eb22(0x33c)] = () => _0x34f40b(_0x5052ad['error']); } }), _0x1ac70a['addEventListener']('click', () => { const _0x402d3f = _0x4d95ce; if (_0x402d3f(0x78f) === _0x402d3f(0x78f)) _0x2e6121(), _0x2c63a6(![]); else { _0x3c0ee6(_0x402d3f(0x648)); return; } }), _0x19ed84[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x3507c6 = _0x4d95ce; _0x53a558(_0x3507c6(0x134), 'characterEdit'); }), _0x248041[_0x4d95ce(0x458)]('click', () => { const _0x117508 = _0x4d95ce; _0x592f1d['classList']['add'](_0x117508(0x18c)); }), _0x3d7578[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x474139()), _0x2f7af3[_0x4d95ce(0x458)]('click', _0x4f2db6); function _0x2a5480(_0x4077ea) { const _0x34cb1a = _0x4d95ce; if (_0x34cb1a(0x9d0) === _0x34cb1a(0x9d0)) { if (!_0x4077ea || _0x4077ea['type'] !== _0x34cb1a(0x24e)) return; const _0x5e95a7 = _0x34cb1a(0x18f); document[_0x34cb1a(0xb2c)]['insertAdjacentHTML'](_0x34cb1a(0x34d), _0x5e95a7); const _0x3250eb = document[_0x34cb1a(0x374)](_0x34cb1a(0x813)), _0x52320c = _0x3250eb[_0x34cb1a(0x179)](_0x34cb1a(0x4b3)), _0x76096c = document['getElementById'](_0x34cb1a(0x6b3)), _0x5cfa89 = document['getElementById'](_0x34cb1a(0x1b1)), _0x45a9b1 = document[_0x34cb1a(0x374)](_0x34cb1a(0xb0e)), _0x40b71a = document[_0x34cb1a(0x374)](_0x34cb1a(0xb3c)), _0x8295b0 = document[_0x34cb1a(0x374)](_0x34cb1a(0x7a5)), _0x4ba52e = () => _0x3250eb[_0x34cb1a(0x31f)](); _0x76096c[_0x34cb1a(0x458)](_0x34cb1a(0x173), async () => { const _0x28d807 = _0x34cb1a; _0x4ba52e(); const _0x305312 = await _0xd56340(_0x28d807(0xb36) + _0x4077ea[_0x28d807(0x7d9)] + _0x28d807(0x517)); if (_0x305312) { _0x4077ea['id'] === _0x5f49a9[_0x28d807(0x824)] && ('TNcmj' === _0x28d807(0x344) ? (_0x2e6121(), _0x5f49a9['conversationHistory'] = [], _0x56911c()) : _0x16f8d2()); try { _0x28d807(0x353) === _0x28d807(0x68a) ? (_0x3495d3[_0x28d807(0x7a4)](_0x28d807(0xac9), _0x1c58a9), _0x4ed03c(_0x28d807(0x219) + _0x3ccc94[_0x28d807(0xb58)])) : (localStorage['removeItem'](_0x28d807(0x39b) + _0x4077ea['id']), _0xd5e395(_0x28d807(0x632) + _0x4077ea[_0x28d807(0x7d9)] + _0x28d807(0x346))); } catch (_0x2a7d06) { if (_0x28d807(0x453) === _0x28d807(0x453)) console['error'](_0x28d807(0x3ad) + _0x4077ea['id'], _0x2a7d06), _0xd5e395('清空聊天记录失败。'); else { const _0x239fdd = _0x1b0ff0[_0x28d807(0x4d5)][_0x28d807(0x7ed)](_0x468702 => _0x468702['id'] === _0x1f68b2); if (!_0x239fdd) return; _0x4900ae[_0x28d807(0x374)](_0x28d807(0x364))[_0x28d807(0x330)] = _0x239fdd['id'], _0x2b743b[_0x28d807(0x374)](_0x28d807(0xaad))[_0x28d807(0x8e3)] = _0x28d807(0x246), _0x1d709b[_0x28d807(0x374)]('user-name')['value'] = _0x239fdd[_0x28d807(0x7d9)], _0x239fdd[_0x28d807(0x7d6)] && (_0x1a141d[_0x28d807(0x2d6)]['backgroundImage'] = _0x28d807(0x730) + _0x239fdd[_0x28d807(0x7d6)] + '\x27)'), _0x4c6ab5[_0x28d807(0x374)](_0x28d807(0x2ae))[_0x28d807(0x330)] = _0x239fdd[_0x28d807(0x8eb)], _0x121b7b[_0x28d807(0x2d6)][_0x28d807(0x416)] = _0x239fdd['id'] === _0x27f518['activeUserProfileId'] ? _0x28d807(0x8b4) : _0x28d807(0x888); } } } }), _0x5cfa89['addEventListener']('click', () => { const _0x4cb26c = _0x34cb1a; if ('EIhTD' === _0x4cb26c(0xa26)) _0x4ba52e(), _0xd5e395('编辑群成员功能正在开发中...'); else { const _0x23de7c = { 'quotedMessage': null, 'content': _0x1857ee }, _0x4001eb = _0x398535['match'](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x4001eb && (_0x23de7c[_0x4cb26c(0x3a2)] = { 'sender': _0x4001eb[0x1][_0x4cb26c(0x1c8)](), 'content': _0x4001eb[0x2]['trim']() }, _0x23de7c[_0x4cb26c(0x47e)] = _0xa0055[_0x4cb26c(0x80c)](_0x4001eb[0x0]['length'])['trim']()), _0x23de7c; } }), _0x45a9b1[_0x34cb1a(0x458)]('click', async () => { const _0x52ba0f = _0x34cb1a; if (_0x52ba0f(0x4c4) !== _0x52ba0f(0x764)) { _0x4ba52e(); const _0x185955 = prompt(_0x52ba0f(0x9a6), _0x4077ea['name']); _0x185955 && _0x185955[_0x52ba0f(0x1c8)]() && _0x185955 !== _0x4077ea[_0x52ba0f(0x7d9)] && (_0x4077ea[_0x52ba0f(0x7d9)] = _0x185955[_0x52ba0f(0x1c8)](), _0x39e4f0(), _0x223f24(), _0x208cd3(), _0xd5e395(_0x52ba0f(0x75f) + _0x4077ea['name'] + '\x22。')); } else _0x95d1d6 = _0x145779, _0x163aae[_0x52ba0f(0x8f0)][_0x52ba0f(0x132)](_0x52ba0f(0x18c)); }), _0x40b71a[_0x34cb1a(0x458)]('click', async () => { const _0x550503 = _0x34cb1a; if (_0x550503(0x216) !== _0x550503(0x216)) { const _0x578646 = _0xe3c6fa['transaction'](_0x3028a2, 'readonly'), _0x11e7e2 = _0x578646[_0x550503(0x7f3)](_0x8bdeed), _0x43a26a = _0x11e7e2[_0x550503(0xb3d)](_0x3167ce); _0x43a26a[_0x550503(0x731)] = () => _0x3195a5(_0x43a26a['result'] ? _0x43a26a[_0x550503(0x78a)]['data'] : null), _0x43a26a[_0x550503(0x33c)] = () => _0x8f2085(_0x43a26a[_0x550503(0x7a4)]); } else { _0x4ba52e(); const _0x1ba37f = await _0xd56340(_0x550503(0x2cc) + _0x4077ea[_0x550503(0x7d9)] + _0x550503(0x2cb)); if (_0x1ba37f) { if (_0x550503(0x218) === _0x550503(0x1fa)) { const _0x3d4ad1 = _0x1f2287(_0x53d310); if (_0x3d4ad1) { const _0x11ea85 = _0x405dec[_0x550503(0x95f)](_0x550503(0x314)); _0x11ea85['value'] = _0x3d4ad1['id'], _0x11ea85['textContent'] = _0x3d4ad1['name'], _0x1720a7[_0x550503(0x962)](_0x11ea85); } } else _0x19cca2(_0x4077ea['id']), _0xd5e395(_0x550503(0x632) + _0x4077ea['name'] + '\x22\x20已删除。'), _0x2c63a6(![]); } } }), _0x52320c[_0x34cb1a(0x458)]('click', _0x4ba52e), _0x8295b0['addEventListener'](_0x34cb1a(0x173), _0x4ba52e); } else { const _0x579888 = _0x1c0e9b[_0x34cb1a(0x190)](_0x5ee0b6 => new _0x12dd8a(_0x5ee0b6['timestamp'] || _0x5ee0b6[_0x34cb1a(0x576)]))[_0x34cb1a(0x8be)](_0x45b994 => !_0x24298f(_0x45b994)); _0x579888[_0x34cb1a(0x2ed)] > 0x0 && (_0x45d3b1 = new _0x24f231(_0x27a1d5['max'][_0x34cb1a(0x8b5)](null, _0x579888)), _0xa4c5d6 = _0x4a994d['toLocaleString']('zh-CN', { 'dateStyle': 'medium', 'timeStyle': _0x34cb1a(0x54d) })); } } _0x1373f7['addEventListener']('click', () => { const _0xf701b8 = _0x4d95ce; if (_0xf701b8(0x6bc) !== _0xf701b8(0x6bc)) { const _0x3c2ff2 = _0x27db62[_0xf701b8(0x374)](_0x4368a5); if (_0x3c2ff2 && _0x3c0864) _0x3c2ff2['src'] = _0x5182b7[_0xf701b8(0x7dc)](_0x374ba6); } else { const _0x4d76eb = _0x39d291(); if (_0x4d76eb && _0x4d76eb[_0xf701b8(0x433)] === _0xf701b8(0x838)) _0x52ad3d(_0x4d76eb[_0xf701b8(0x258)][0x0]); else _0x4d76eb && _0x4d76eb[_0xf701b8(0x433)] === _0xf701b8(0x24e) && _0x4d0d53(_0x4d76eb['id']); } }), _0x1252fb[_0x4d95ce(0x458)](_0x4d95ce(0xb04), _0x2b8370 => { const _0x3c6dd4 = _0x4d95ce; _0x2b8370[_0x3c6dd4(0x911)] === 'Enter' && !_0x2b8370[_0x3c6dd4(0x8d8)] && (_0x2b8370[_0x3c6dd4(0x6ce)](), _0x474139()); }); const _0x2b9e11 = () => _0x592f1d[_0x4d95ce(0x8f0)]['remove']('show'); _0x5aa34d[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x2b9e11), _0x3ceaf0[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x2b9e11), _0x37b704[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { _0x2b9e11(), _0x52ad3d(); }), _0x17f987[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0xb35891 = _0x4d95ce; if (_0xb35891(0x7ba) === _0xb35891(0x4fc)) { const _0x4a8dc9 = _0x27f194[_0xb35891(0x374)]('modal-root'), _0x1c4dee = _0x2c0e30['getElementById'](_0xb35891(0x70a)), _0x230962 = _0x3b5dc2[_0xb35891(0x374)](_0xb35891(0x3c9)), _0x2a6855 = _0x5e96de[_0xb35891(0x374)](_0xb35891(0x3e2)), _0xcda89 = _0x83f6a[_0xb35891(0x374)](_0xb35891(0x736)); _0x1c4dee[_0xb35891(0x8e3)] = _0x4f2670, _0x4a8dc9[_0xb35891(0x2d6)]['display'] = _0xb35891(0x350); const _0x1c824c = _0x55741d => { const _0x152ee1 = _0xb35891; _0x4a8dc9[_0x152ee1(0x2d6)][_0x152ee1(0x416)] = _0x152ee1(0x8b4), _0x230962[_0x152ee1(0x509)] = _0x2a6855['onclick'] = _0xcda89[_0x152ee1(0x509)] = null, _0x5a4d51[_0x152ee1(0x188)](_0x152ee1(0xb04), _0x4621e9), _0x26abe4(_0x55741d); }, _0x4621e9 = _0x34c445 => { const _0x2e32e4 = _0xb35891; if (_0x34c445[_0x2e32e4(0x911)] === _0x2e32e4(0x304)) _0x1c824c(![]); if (_0x34c445[_0x2e32e4(0x911)] === _0x2e32e4(0x86f)) _0x1c824c(!![]); }; _0x230962[_0xb35891(0x509)] = () => _0x1c824c(!![]), _0x2a6855[_0xb35891(0x509)] = () => _0x1c824c(![]), _0xcda89['onclick'] = () => _0x1c824c(![]), _0x342b0b[_0xb35891(0x458)](_0xb35891(0xb04), _0x4621e9); } else _0x2b9e11(), _0x3e2c2d(); }), _0x5939ba['addEventListener'](_0x4d95ce(0x173), () => { const _0x1fc734 = _0x4d95ce; _0x1fc734(0xa76) === 'KpysT' ? _0x55a54b['pause']() : (_0x53a558(_0x1fc734(0x134), _0x1fc734(0xaf0)), _0x2c63a6(![])); }), _0x1f0614[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x2ceff7), _0x3f2887[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x1d3ac0 = _0x4d95ce; _0x532d9[_0x1d3ac0(0x8f0)]['toggle'](_0x1d3ac0(0x18c)); if (_0x532d9[_0x1d3ac0(0x8f0)][_0x1d3ac0(0x998)]('show')) { if (_0x1d3ac0(0xa71) === _0x1d3ac0(0xa71)) _0x4225c7[_0x1d3ac0(0x3c6)] = _0x4225c7[_0x1d3ac0(0xa65)]; else return _0x369b87[_0x1d3ac0(0x7a4)](_0x1d3ac0(0x295), _0x20b4ff), _0x51faeb[_0x1d3ac0(0x7a4)](_0x1d3ac0(0x4bd), _0x2516f7[_0x1d3ac0(0x16f)] || _0x1d3ac0(0xb2f)), null; } }), _0x179ffb[_0x4d95ce(0x458)]('click', () => _0x1591a7[_0x4d95ce(0x173)]()); const _0x5917de = document[_0x4d95ce(0x374)]('chat-music-button'); _0x1591a7[_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x9202f3), _0x5917de['addEventListener'](_0x4d95ce(0x173), _0x4b34d2), _0x16551b[_0x4d95ce(0x458)]('click', _0x1d1c8e), _0x229b29[_0x4d95ce(0x458)]('click', _0x1cfe47), _0x4c247b[_0x4d95ce(0x458)]('click', _0x287080), _0x29f319['addEventListener'](_0x4d95ce(0x173), _0x2495ae), _0x35f19a[_0x4d95ce(0x458)](_0x4d95ce(0x173), async () => { const _0x52063e = _0x4d95ce, _0x4e8cab = _0x5bde35[_0x52063e(0x330)]; if (!_0x4e8cab) return; const _0x5e55ed = _0x590c99(_0x4e8cab); if (!_0x5e55ed) return; const _0x4fef9c = await _0xd56340(_0x52063e(0x6d0) + _0x5e55ed[_0x52063e(0x7d9)] + '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。'); _0x4fef9c && (_0x39050f(_0x4e8cab), _0xd5e395('角色“' + _0x5e55ed[_0x52063e(0x7d9)] + _0x52063e(0x235)), _0x53a558(_0x52063e(0x134), _0x52063e(0x82f)), _0x2c63a6(![])); }), _0x353779[_0x4d95ce(0x458)](_0x4d95ce(0x1bc), () => { const _0x1a5d13 = _0x4d95ce; if (_0x1a5d13(0x53d) !== _0x1a5d13(0x3b3)) { const _0x2b0810 = _0x353779['value'][_0x1a5d13(0x1c8)]()[_0x1a5d13(0x454)](_0x3c8ecb); _0x37e126['disabled'] = _0x2b0810; } else _0x3b24a9[_0x1a5d13(0x238)]({ 'name': _0x2149d6[0x0]['trim'](), 'url': _0x4f2d8e[0x1]['trim']() }); }); async function _0x5934be() { const _0x30f9fb = _0x4d95ce; if (_0x30f9fb(0x19e) !== 'FMUWS') _0x360124[_0x30f9fb(0x7d6)] = _0x32fef4['dataset'][_0x30f9fb(0x7ae)], delete _0x83db13[_0x30f9fb(0x814)][_0x30f9fb(0x7ae)]; else { const _0x11d616 = _0x353779['value'][_0x30f9fb(0x1c8)](), _0x59939c = _0x19b7e7[_0x30f9fb(0x330)][_0x30f9fb(0x1c8)](); if (!_0x11d616 || !_0x59939c) { if ('XhagN' !== 'XhagN') for (const _0x37702e in _0x5c8a11) { _0x81bb08[_0x30f9fb(0x2d6)][_0x37702e] = _0x11f754[_0x37702e]; } else { _0xd5e395(_0x30f9fb(0x2f2)); return; } } const _0x31e03a = _0x11d616[_0x30f9fb(0xa38)](/\/+$/, ''), _0x2e77a6 = _0x31e03a + '/v1/models'; _0x37e126[_0x30f9fb(0x815)] = !![], _0x37e126[_0x30f9fb(0x8e3)] = _0x30f9fb(0x3ea), _0x3611b9[_0x30f9fb(0x8f0)]['remove'](_0x30f9fb(0x18c)); try { if (_0x30f9fb(0x150) === 'IvFXS') { const _0x239f99 = await fetch(_0x2e77a6, { 'headers': { 'Authorization': 'Bearer\x20' + _0x56e5cf(_0x59939c) } }); if (!_0x239f99['ok']) throw new Error('服务器错误:\x20' + _0x239f99[_0x30f9fb(0x405)]); const _0x500502 = await _0x239f99['json'](), _0x5707b2 = (_0x500502[_0x30f9fb(0x58a)] || _0x500502)[_0x30f9fb(0x190)](_0x3993c6 => _0x3993c6['id'])[_0x30f9fb(0x43a)](); if (_0x5707b2[_0x30f9fb(0x2ed)] > 0x0) _0x3611b9['innerHTML'] = '', _0x5707b2[_0x30f9fb(0x170)](_0x3e28d5 => { const _0x9fa982 = _0x30f9fb, _0x52fb76 = document[_0x9fa982(0x95f)](_0x9fa982(0x754)); _0x52fb76[_0x9fa982(0x8e3)] = _0x3e28d5, _0x52fb76[_0x9fa982(0x458)](_0x9fa982(0x173), () => { const _0x3616e9 = _0x9fa982; _0x5b2d1c[_0x3616e9(0x330)] = _0x3e28d5, _0x3611b9[_0x3616e9(0x8f0)][_0x3616e9(0x31f)]('show'); }), _0x3611b9[_0x9fa982(0x962)](_0x52fb76); }), _0x3611b9[_0x30f9fb(0x8f0)][_0x30f9fb(0x132)]('show'), _0xd5e395(_0x30f9fb(0x90e) + _0x5707b2[_0x30f9fb(0x2ed)] + '\x20个模型。'); else { if ('bsJbL' !== _0x30f9fb(0x66e)) { const _0x4a296d = new _0x4e7287(_0x33bf5b[_0x30f9fb(0x75a)]), _0x29fc55 = _0x4a296d['getFullYear']() + '-' + _0x27ae4c(_0x4a296d[_0x30f9fb(0xa47)]() + 0x1)[_0x30f9fb(0x159)](0x2, '0') + '-' + _0x5bcdf9(_0x4a296d[_0x30f9fb(0x465)]())['padStart'](0x2, '0'), _0x21080c = _0x4a6651(_0x4a296d[_0x30f9fb(0x57a)]())['padStart'](0x2, '0') + ':' + _0x55908c(_0x4a296d[_0x30f9fb(0xaaa)]())[_0x30f9fb(0x159)](0x2, '0'); let _0x194ae7 = '未知'; _0x2d674e[_0x30f9fb(0x664)] === 'user' ? _0x194ae7 = _0x921f4f[_0x30f9fb(0x7d9)] : _0x194ae7 = _0x566e91[_0x30f9fb(0x7d9)]; let _0x327b81 = _0x5dc0ff['content']; if (_0x2506e9['displayUrl']) _0x327b81 = _0x30f9fb(0x2a8); if (_0x4e34f8[_0x30f9fb(0x3a7)]) _0x327b81 = _0x30f9fb(0x451); return '[' + _0x29fc55 + '\x20' + _0x21080c + _0x30f9fb(0x4be) + _0x194ae7 + _0x30f9fb(0x8f6) + _0x327b81; } else _0xd5e395(_0x30f9fb(0xac0)); } } else _0x25b86d += _0x30f9fb(0x40f) + _0x50fdc0[_0x30f9fb(0x528)] + _0x30f9fb(0x1b9) + _0x312fa1['activity_description'] + _0x30f9fb(0x6ef); } catch (_0x2b87a2) { if (_0x30f9fb(0x8fe) !== 'PHPEc') { const _0x2ca496 = _0x4a748c[_0x30f9fb(0x374)](_0x30f9fb(0xa2d)); _0x2ca496[_0x30f9fb(0x279)] = ''; if (_0x154dbc['userProfiles'][_0x30f9fb(0x2ed)] === 0x0) { _0x2ca496[_0x30f9fb(0x279)] = _0x30f9fb(0x89c); return; } _0xf02616[_0x30f9fb(0x4d5)]['forEach'](_0x2a5e88 => { const _0x280c81 = _0x30f9fb, _0x526ffb = _0x13b1a8[_0x280c81(0x95f)](_0x280c81(0x754)); _0x526ffb[_0x280c81(0x290)] = _0x280c81(0xacf), _0x526ffb[_0x280c81(0x814)]['id'] = _0x2a5e88['id']; const _0x54ccae = _0x2a5e88['id'] === _0x28b507[_0x280c81(0x4f6)] ? _0x280c81(0x185) : ''; _0x526ffb['innerHTML'] = _0x280c81(0x585) + (_0x2a5e88['avatar'] || _0x5485ac) + _0x280c81(0x76b) + _0x2a5e88[_0x280c81(0x7d9)] + _0x54ccae + _0x280c81(0x7df) + _0x2a5e88[_0x280c81(0x8eb)]['substring'](0x0, 0x64) + _0x280c81(0x12a), _0x526ffb[_0x280c81(0x458)](_0x280c81(0x173), () => _0x168eb1(_0x2a5e88['id'])), _0x2ca496[_0x280c81(0x962)](_0x526ffb); }); } else _0xd5e395(_0x30f9fb(0x9fe) + _0x2b87a2[_0x30f9fb(0xb58)] + _0x30f9fb(0x2d1)); } finally { _0x37e126['disabled'] = ![], _0x37e126[_0x30f9fb(0x8e3)] = '获取'; } } } _0x37e126[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x1f8123 => { const _0x54ae9b = _0x4d95ce; if (_0x54ae9b(0x503) !== 'WluuN') { const _0x37ff9e = _0x35155d['chats'][_0x54ae9b(0x7ed)](_0x4e3244 => _0x4e3244['id'] === _0x27e551); if (!_0x37ff9e || _0x37ff9e['type'] !== _0x54ae9b(0x24e)) return; _0x1b7189[_0x54ae9b(0x374)](_0x54ae9b(0x1fd))['value'] = _0x37ff9e[_0x54ae9b(0x7d9)] || '', _0x38a2fc(_0x54ae9b(0x4ad)), _0x13d5ad[_0x54ae9b(0x374)](_0x54ae9b(0x4ad))['value'] = _0x37ff9e[_0x54ae9b(0x3fc)] || _0x2a2263[_0x54ae9b(0x4f6)]; const _0x4d047b = _0x39f890[_0x54ae9b(0x374)]('group-world-book-checkboxes'); _0x4d047b['innerHTML'] = '', _0x1f93bb[_0x54ae9b(0x1df)][_0x54ae9b(0x170)](_0x460388 => { const _0x37a0eb = _0x54ae9b, _0x4fc629 = _0x37ff9e[_0x37a0eb(0x128)]?.[_0x37a0eb(0x454)](_0x460388['id']), _0xf000d9 = _0xa3419d[_0x37a0eb(0x95f)](_0x37a0eb(0x3de)); _0xf000d9[_0x37a0eb(0x279)] = _0x37a0eb(0xb07) + _0x460388['id'] + '\x22\x20' + (_0x4fc629 ? _0x37a0eb(0x809) : '') + '>\x20' + _0x460388[_0x37a0eb(0x7d9)], _0x4d047b['appendChild'](_0xf000d9); }), _0x8ae3cd(); const _0x2b07f0 = _0x1d266c[_0x54ae9b(0x374)](_0x54ae9b(0xa4e)), _0x1b1329 = _0x7ef09b[_0x54ae9b(0x374)]('group-bg-preview'); _0x1b1329[_0x54ae9b(0x2d6)][_0x54ae9b(0x486)] = '', _0x306473('group_avatar_' + _0x415033)[_0x54ae9b(0x8a2)](_0x34b96c => { const _0xc92be6 = _0x54ae9b; _0x2b07f0[_0xc92be6(0x984)] = _0x34b96c ? _0xa938fc[_0xc92be6(0x7dc)](_0x34b96c) : _0x1af16a; }), _0xd23a08('group_bg_' + _0x5a5220)[_0x54ae9b(0x8a2)](_0x88488e => { const _0x22bbaf = _0x54ae9b; if (_0x88488e) _0x1b1329[_0x22bbaf(0x2d6)]['backgroundImage'] = _0x22bbaf(0x730) + _0x3b976d[_0x22bbaf(0x7dc)](_0x88488e) + '\x27)'; }), _0x12ad14(_0x54ae9b(0x9dc), _0x54ae9b(0x134)); } else _0x1f8123[_0x54ae9b(0x1dd)](), _0x5934be(); }), document[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x41fc9a => { const _0xe58a7b = _0x4d95ce; !_0x3611b9[_0xe58a7b(0x998)](_0x41fc9a['target']) && _0x41fc9a[_0xe58a7b(0x89a)] !== _0x5b2d1c && _0x41fc9a[_0xe58a7b(0x89a)] !== _0x37e126 && _0x3611b9[_0xe58a7b(0x8f0)][_0xe58a7b(0x31f)]('show'); }); async function _0x454e76(_0x103a55) { const _0x3f763e = _0x4d95ce; if (_0x3f763e(0x5f9) === _0x3f763e(0x245)) _0x30aad1[_0x3f763e(0x2d6)][_0x3f763e(0x416)] = _0x3f763e(0x8b4); else return await _0x779604(_0x103a55, 0x190, 0.85); } _0x9f6d59[_0x4d95ce(0x458)]('click', () => _0x44619e['click']()), _0x44619e[_0x4d95ce(0x458)]('change', async _0x29c3a7 => { const _0x137293 = _0x4d95ce; if (_0x137293(0x854) !== 'hGQKw') { const _0x483c8b = _0x29c3a7[_0x137293(0x89a)][_0x137293(0x760)][0x0]; if (!_0x483c8b) return; try { const _0x412f4d = await _0x454e76(_0x483c8b), _0x30ea94 = document[_0x137293(0x374)](_0x137293(0x862)); _0x30ea94[_0x137293(0x2d6)]['backgroundImage'] = _0x137293(0x730) + _0x412f4d + '\x27)', _0x30ea94[_0x137293(0x814)]['newAvatar'] = _0x412f4d; } catch (_0x3cd894) { _0xd5e395(_0x137293(0x554) + _0x3cd894[_0x137293(0xb58)]); } } else _0x3a0a49[_0x137293(0xb06)] = []; }), _0x437da2['addEventListener']('click', () => _0x172161['click']()), _0x172161[_0x4d95ce(0x458)](_0x4d95ce(0x563), async _0x4f5638 => { const _0x311e25 = _0x4d95ce, _0x53aec6 = _0x4f5638['target']['files'][0x0]; if (!_0x53aec6) return; try { _0x437da2[_0x311e25(0x984)] = await _0x454e76(_0x53aec6); } catch (_0x58181b) { _0x311e25(0x1bb) !== 'PTccJ' ? _0x12a74c = _0x1af9a1[_0x311e25(0x59f)] || '' : _0xd5e395('错误:\x20' + _0x58181b[_0x311e25(0xb58)]); } }); function _0x481344() { const _0xa3551a = _0x4d95ce; _0x532d9[_0xa3551a(0x279)] = '', _0xf3cd55[_0xa3551a(0x170)](_0xf9e39b => { const _0x1c5df0 = _0xa3551a; if (_0x1c5df0(0x1fe) === 'ejjgI') _0x30e3d6[_0x1c5df0(0x263)] = ![], _0x5ef044(![]); else { const _0x227acf = document['createElement'](_0x1c5df0(0x94f)); _0x227acf[_0x1c5df0(0x984)] = _0xf9e39b[_0x1c5df0(0x93b)], _0x227acf[_0x1c5df0(0x847)] = _0x1c5df0(0x77b), _0x227acf['title'] = _0xf9e39b[_0x1c5df0(0x7d9)], _0x227acf[_0x1c5df0(0x8f0)]['add'](_0x1c5df0(0xb1c)), _0x227acf[_0x1c5df0(0x458)](_0x1c5df0(0x173), () => _0x1c43cf(_0xf9e39b)), _0x532d9[_0x1c5df0(0x962)](_0x227acf); } }); } async function _0x51aa71(_0x4e380c) { const _0x1f29c6 = _0x4d95ce, _0x40376b = await _0xd56340(_0x1f29c6(0x2d3)); if (!_0x40376b) return; const _0x412e7f = _0x5f49a9[_0x1f29c6(0x5fe)][_0x1f29c6(0x4f2)](_0x4b8af7 => _0x4b8af7['id'] === _0x4e380c); _0x412e7f > -0x1 && (_0x5f49a9[_0x1f29c6(0x5fe)][_0x1f29c6(0x69d)](_0x412e7f, 0x1), _0x39e4f0(), _0x29b79d(), _0x7f53d5(), _0x539b8c(), _0xd5e395('已经删掉了。')); } let _0x46f91b = null; function _0x110198(_0x3e0c8d) { const _0x31c942 = _0x4d95ce; if (_0x46f91b) clearTimeout(_0x46f91b); const _0x313367 = _0x3e0c8d[_0x31c942(0x89a)][_0x31c942(0x796)]('.todo-item,\x20.important-day-item'); if (!_0x313367) return; const _0x4c32ce = _0x313367[_0x31c942(0x814)]['id']; if (!_0x4c32ce) return; const _0x4ac7d8 = () => { const _0x28100a = _0x31c942; if (_0x28100a(0x249) !== _0x28100a(0x8bc)) _0x46f91b = setTimeout(() => { const _0x47de92 = _0x28100a; if (_0x47de92(0xadc) === _0x47de92(0xb1d)) _0x41d9fe = _0x285304[_0x47de92(0x4d5)][0x0]; else { if (_0x3e0c8d[_0x47de92(0x433)] === _0x47de92(0x2ba)) _0x3e0c8d['preventDefault'](); _0x51aa71(_0x4c32ce); } }, 0x320); else { const _0x3f4c5c = _0x4ff6cc['getElementById']('snoop-summary-textarea'); _0x3f4c5c[_0x28100a(0xb0b)](), _0x3fd276[_0x28100a(0x6f7)]('copy'), _0x7fbc4d(_0x28100a(0xafd)); } }, _0x4da4f8 = () => { if (_0x46f91b) clearTimeout(_0x46f91b); }; document[_0x31c942(0x458)](_0x31c942(0x34e), _0x4da4f8, { 'once': !![] }), document[_0x31c942(0x458)]('touchend', _0x4da4f8, { 'once': !![] }), document[_0x31c942(0x458)](_0x31c942(0x6b5), _0x4da4f8, { 'once': !![] }), document['addEventListener'](_0x31c942(0x27e), _0x4da4f8, { 'once': !![] }), _0x4ac7d8(); } function _0x2337fc(_0x2dec12) { const _0x506d54 = _0x4d95ce; if (_0x506d54(0x293) !== _0x506d54(0x36c)) { const _0x36da89 = _0x5f49a9[_0x506d54(0x42d)][_0x506d54(0x7ed)](_0x394eb8 => _0x394eb8[_0x506d54(0x258)]['includes'](_0x2dec12)); if (!_0x36da89) return ''; const _0x21e385 = _0x30ad29(_0x36da89['id']), _0x5703ed = _0x5f49a9['calendarEvents'][_0x506d54(0x8be)](_0x3a6364 => _0x3a6364['userId'] === _0x21e385['id'] || !_0x3a6364[_0x506d54(0xaf9)]); if (_0x5703ed[_0x506d54(0x2ed)] === 0x0) { if (_0x506d54(0x969) === _0x506d54(0x969)) return ''; else { _0x1ac6ff[_0x506d54(0x8f0)][_0x506d54(0x132)](_0x506d54(0x6e6)); const _0x299414 = _0x204e39[_0x506d54(0x95f)]('img'); _0x299414[_0x506d54(0x984)] = _0x5ad8b0, _0x299414[_0x506d54(0x8f0)][_0x506d54(0x132)]('sticker-content'), _0x3c0e0e[_0x506d54(0x962)](_0x299414); } } const _0x98bda0 = _0x5703ed[_0x506d54(0x190)](_0x1394ad => { const _0xfea0a7 = _0x506d54, _0xbbcdae = _0x1394ad['type'] === 'important' ? _0xfea0a7(0x524) : '待办'; return _0xfea0a7(0x260) + _0xbbcdae + ']\x20' + _0x1394ad[_0xfea0a7(0x256)] + ':\x20' + _0x1394ad[_0xfea0a7(0x47e)]; })[_0x506d54(0x414)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x21e385[_0x506d54(0x7d9)] + _0x506d54(0x996) + _0x98bda0; } else { const _0x3b5320 = _0x47ff14[_0x506d54(0x89a)][_0x506d54(0x760)][0x0]; if (!_0x3b5320) return; const _0xc303fb = _0x5ed49b[_0x506d54(0x7dc)](_0x3b5320); _0x1da539[_0x506d54(0x2d6)][_0x506d54(0x486)] = 'url(\x27' + _0xc303fb + '\x27)'; } } let _0x373631 = { 'currentDate': new Date(), 'selectedDate': new Date()[_0x4d95ce(0x6cf)]()[_0x4d95ce(0x77e)]('T')[0x0] }; function _0x5af83c() { const _0x12626b = _0x4d95ce; document['getElementById'](_0x12626b(0x669))[_0x12626b(0x458)](_0x12626b(0x173), () => { const _0x3086e0 = _0x12626b; if (_0x3086e0(0x680) === 'lpjzt') { const _0x91de6e = _0x228a3a[_0x3086e0(0x911)](_0x395c19); if (_0x91de6e) _0x15e68c[_0x3086e0(0x1d5)][_0x91de6e] = _0x4837ae[_0x3086e0(0x6ba)](_0x91de6e); } else _0x29b79d(), _0x53a558(_0x3086e0(0x685), 'home'); }), document[_0x12626b(0x374)](_0x12626b(0x5cf))[_0x12626b(0x458)](_0x12626b(0x173), () => _0x53a558(_0x12626b(0x529), _0x12626b(0x685))), document[_0x12626b(0x374)](_0x12626b(0x72e))['addEventListener'](_0x12626b(0x173), () => { const _0x4bee4a = _0x12626b; if (_0x4bee4a(0x686) === 'rewDp') { const _0x2a9047 = _0x34fc31[_0x4bee4a(0x374)](_0x4bee4a(0x481)); _0x1965fe['getElementById'](_0x4bee4a(0xa45))[_0x4bee4a(0x8e3)] = '账本', _0x509cf1[_0x4bee4a(0x374)]('header-actions')[_0x4bee4a(0x279)] = ''; const _0x140600 = _0x15d373[_0x4bee4a(0x9ec)](_0x425339[_0x4bee4a(0x6a1)])[_0x4bee4a(0x43a)]((_0x195f73, _0x3be35c) => new _0x1a9907(_0x3be35c) - new _0x521fa6(_0x195f73)); if (_0x140600['length'] === 0x0) { _0x2a9047[_0x4bee4a(0x279)] = _0x4bee4a(0x582); return; } _0x2a9047[_0x4bee4a(0x279)] = '', _0x140600[_0x4bee4a(0x170)](_0x3886ba => { const _0x48aa1c = _0x4bee4a, _0x1bba38 = _0x1227ca[_0x48aa1c(0x95f)](_0x48aa1c(0x754)); _0x1bba38[_0x48aa1c(0x290)] = 'expense-item', _0x1bba38[_0x48aa1c(0x2d6)][_0x48aa1c(0x4e7)] = _0x48aa1c(0x17f); const _0x217713 = _0x4ec2c0[_0x48aa1c(0x6a1)][_0x3886ba], _0x20fb63 = _0x217713[_0x48aa1c(0x583)][_0x48aa1c(0x64a)]((_0x394d37, _0x5361ba) => _0x394d37 + (_0x5361ba[_0x48aa1c(0xaac)] || 0x0), 0x0); _0x1bba38['innerHTML'] = _0x48aa1c(0x5c7) + _0x3886ba + _0x48aa1c(0x915) + _0x20fb63[_0x48aa1c(0x539)](0x2) + '</span>', _0x1bba38[_0x48aa1c(0x458)](_0x48aa1c(0x173), () => { const _0x418228 = _0x48aa1c; _0x2338c5[_0x418228(0x8f0)][_0x418228(0x31f)](_0x418228(0xa54)), _0xcbf4e4[_0x418228(0x8f0)][_0x418228(0x132)](_0x418228(0xa54)), _0x1901f4(_0x217713, _0x3886ba); }), _0x2a9047[_0x48aa1c(0x962)](_0x1bba38); }); } else _0x373631[_0x4bee4a(0xa50)]['setMonth'](_0x373631['currentDate'][_0x4bee4a(0xa47)]() - 0x1), _0x29b79d(); }), document[_0x12626b(0x374)]('next-month-btn')['addEventListener']('click', () => { const _0x786f0b = _0x12626b; _0x373631[_0x786f0b(0xa50)]['setMonth'](_0x373631[_0x786f0b(0xa50)][_0x786f0b(0xa47)]() + 0x1), _0x29b79d(); }), document[_0x12626b(0x374)](_0x12626b(0xa7b))[_0x12626b(0x458)](_0x12626b(0x173), () => { const _0x14899c = _0x12626b; _0x373631[_0x14899c(0xa50)] = new Date(), _0x373631[_0x14899c(0x839)] = new Date()[_0x14899c(0x6cf)]()[_0x14899c(0x77e)]('T')[0x0], _0x29b79d(); }), document[_0x12626b(0x374)](_0x12626b(0x776))[_0x12626b(0x458)]('click', () => { const _0x3a2e57 = _0x12626b; if (_0x3a2e57(0x15c) === _0x3a2e57(0x15c)) _0x1c7036(_0x373631[_0x3a2e57(0x839)]); else { if (_0x4e73f6) _0xf7f372['textContent'] = '▶'; } }), document[_0x12626b(0x374)](_0x12626b(0x233))[_0x12626b(0x458)](_0x12626b(0x173), _0x48d8f3), document['getElementById'](_0x12626b(0x683))[_0x12626b(0x458)](_0x12626b(0x173), () => document[_0x12626b(0x374)](_0x12626b(0xa89))[_0x12626b(0x8f0)][_0x12626b(0x31f)](_0x12626b(0x18c))), document[_0x12626b(0x374)](_0x12626b(0xa6b))[_0x12626b(0x458)](_0x12626b(0x173), () => document[_0x12626b(0x374)](_0x12626b(0xa89))[_0x12626b(0x8f0)][_0x12626b(0x31f)](_0x12626b(0x18c))); const _0x21e7ef = document[_0x12626b(0x374)](_0x12626b(0x69b)); _0x21e7ef[_0x12626b(0x458)](_0x12626b(0x428), _0x110198), _0x21e7ef[_0x12626b(0x458)](_0x12626b(0x2ba), _0x110198, { 'passive': ![] }); } function _0x29b79d() { const _0x3ea194 = _0x4d95ce; if (_0x3ea194(0xb12) !== _0x3ea194(0xb12)) { const _0x20773a = _0x1cdeb7['createElement']('li'); _0x20773a['className'] = _0x3ea194(0x8f5), _0x20773a['dataset']['charId'] = _0x4092e8['id'], _0x20773a[_0x3ea194(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2f7dec[_0x3ea194(0x7d6)] || _0x4d0bdd) + _0x3ea194(0x189) + _0x414cc9[_0x3ea194(0x7d9)] + _0x3ea194(0xb34) + (_0x12d707['remark'] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x20773a[_0x3ea194(0x458)](_0x3ea194(0x173), () => { _0x5a2cc9(_0x17c3d7['id']); }), _0x2a8f4f[_0x3ea194(0x962)](_0x20773a); } else { const _0x59aeb9 = _0x373631[_0x3ea194(0xa50)][_0x3ea194(0x192)](), _0x555efa = _0x373631[_0x3ea194(0xa50)]['getMonth'](); document[_0x3ea194(0x374)]('calendar-header-title')[_0x3ea194(0x8e3)] = _0x59aeb9 + '年\x20' + (_0x555efa + 0x1) + '月', _0x3b518a(_0x59aeb9, _0x555efa), _0x2d1ac0(_0x373631['selectedDate']); } } function _0x539b8c() { const _0x1e6286 = _0x4d95ce, _0x56035f = document[_0x1e6286(0x374)](_0x1e6286(0x5ab)); if (!_0x56035f) return; const _0x59bdfe = new Date()[_0x1e6286(0x6cf)]()[_0x1e6286(0x77e)]('T')[0x0], _0x4dcea3 = _0x5f49a9[_0x1e6286(0x5fe)][_0x1e6286(0x8be)](_0x445bff => _0x445bff['date'] === _0x59bdfe && _0x445bff[_0x1e6286(0x433)] === _0x1e6286(0x622)); _0x56035f[_0x1e6286(0x279)] = ''; if (_0x4dcea3[_0x1e6286(0x2ed)] > 0x0) { if (_0x1e6286(0x750) !== _0x1e6286(0x244)) _0x4dcea3['forEach'](_0x186621 => { const _0x5b9ea5 = _0x1e6286, _0x7e04eb = document['createElement']('div'); _0x7e04eb[_0x5b9ea5(0x290)] = _0x5b9ea5(0x49c), _0x7e04eb[_0x5b9ea5(0x8e3)] = _0x186621[_0x5b9ea5(0x47e)], _0x56035f['appendChild'](_0x7e04eb); }); else { const _0x450e6a = 0x32; if (_0xc6ecc4 < _0x4ada48 - _0x450e6a) _0x1837e0(_0x71e46d + 0x1); else _0x241520 > _0x315e92 + _0x450e6a && _0x10887c(_0x3b5ab0 - 0x1); } } else { if (_0x1e6286(0xa69) !== 'cPveV') _0x56035f['innerHTML'] = _0x1e6286(0x4ab); else { if (_0x52caa9[_0x1e6286(0x2ed)] === 0x0) return; _0x59bf41 = (_0x105582 + 0x1) % _0x2cd98a[_0x1e6286(0x2ed)], _0x2761b6(_0x1ba390[_0x4ba9ac], _0x13d84c); } } } function _0x3b518a(_0x495ff4, _0x377d56) { const _0x14dece = _0x4d95ce, _0x1082f2 = document[_0x14dece(0x374)](_0x14dece(0x2a4)); _0x1082f2[_0x14dece(0x279)] = ''; const _0xaea5bf = new Date(_0x495ff4, _0x377d56, 0x1)[_0x14dece(0x76e)](), _0x49f79d = new Date(_0x495ff4, _0x377d56 + 0x1, 0x0)[_0x14dece(0x465)](), _0x687f24 = new Date()[_0x14dece(0x6cf)]()[_0x14dece(0x77e)]('T')[0x0]; for (let _0x3a18b0 = 0x0; _0x3a18b0 < _0xaea5bf; _0x3a18b0++) { _0x14dece(0x584) !== _0x14dece(0x584) ? _0x3ddd7f['style']['backgroundImage'] = '' : _0x1082f2[_0x14dece(0x962)](document[_0x14dece(0x95f)]('div')); } for (let _0x68c5de = 0x1; _0x68c5de <= _0x49f79d; _0x68c5de++) { const _0x3dc4b3 = document[_0x14dece(0x95f)]('div'); _0x3dc4b3[_0x14dece(0x290)] = _0x14dece(0x923); const _0x170df2 = _0x495ff4 + '-' + String(_0x377d56 + 0x1)[_0x14dece(0x159)](0x2, '0') + '-' + String(_0x68c5de)[_0x14dece(0x159)](0x2, '0'); if (_0x170df2 === _0x687f24) _0x3dc4b3[_0x14dece(0x8f0)]['add'](_0x14dece(0x773)); if (_0x170df2 === _0x373631[_0x14dece(0x839)]) _0x3dc4b3[_0x14dece(0x8f0)][_0x14dece(0x132)](_0x14dece(0x199)); const _0x22c61c = document[_0x14dece(0x95f)](_0x14dece(0x14c)); _0x22c61c[_0x14dece(0x290)] = 'day-number', _0x22c61c[_0x14dece(0x8e3)] = _0x68c5de, _0x3dc4b3[_0x14dece(0x962)](_0x22c61c); const _0x316572 = _0x5f49a9[_0x14dece(0x5fe)][_0x14dece(0x8be)](_0x51544e => _0x51544e[_0x14dece(0x256)] === _0x170df2); if (_0x316572[_0x14dece(0x2ed)] > 0x0) { if (_0x14dece(0x4aa) !== _0x14dece(0x4aa)) _0x2996b8 = _0x14dece(0x26b) + _0x356689; else { const _0x391e6c = document[_0x14dece(0x95f)](_0x14dece(0x754)); _0x391e6c[_0x14dece(0x290)] = _0x14dece(0x959), _0x3dc4b3[_0x14dece(0x962)](_0x391e6c); } } _0x3dc4b3[_0x14dece(0x458)]('click', () => { const _0x57210f = _0x14dece; if (_0x57210f(0xac6) === _0x57210f(0xb29)) return ''; else _0x373631[_0x57210f(0x839)] = _0x170df2, _0x29b79d(); }), _0x1082f2[_0x14dece(0x962)](_0x3dc4b3); } } function _0x2d1ac0(_0x1be2c2) { const _0x2cd608 = _0x4d95ce, _0x168044 = document[_0x2cd608(0x374)](_0x2cd608(0x69b)), _0x397bea = document[_0x2cd608(0x374)](_0x2cd608(0x56c)); _0x168044[_0x2cd608(0x279)] = ''; const _0x2f4e7c = new Date(_0x1be2c2 + _0x2cd608(0x1eb)); _0x397bea['textContent'] = _0x2f4e7c['getMonth']() + 0x1 + '月' + _0x2f4e7c[_0x2cd608(0x465)]() + '日'; const _0xa0a9b2 = _0x5f49a9[_0x2cd608(0x5fe)][_0x2cd608(0x8be)](_0x3717a6 => _0x3717a6[_0x2cd608(0x256)] === _0x1be2c2); if (_0xa0a9b2['length'] === 0x0) { if (_0x2cd608(0x887) !== _0x2cd608(0x887)) { let _0x312480 = _0x1b2d6b[_0x2cd608(0x179)](_0x2cd608(0x297)); !_0x312480 && (_0x312480 = _0x4ad8dd[_0x2cd608(0x95f)](_0x2cd608(0x754)), _0x312480['className'] = _0x2cd608(0x15e), _0x312480['textContent'] = _0x2cd608(0x7fe), _0x312480['style'][_0x2cd608(0xb5c)] = _0x2cd608(0x6e5), _0x312480[_0x2cd608(0x2d6)][_0x2cd608(0x21c)] = _0x2cd608(0xa98), _0x312480[_0x2cd608(0x2d6)]['borderRadius'] = _0x2cd608(0x207), _0x170721['appendChild'](_0x312480)); } else { _0x168044[_0x2cd608(0x279)] = _0x2cd608(0x999); return; } } _0xa0a9b2[_0x2cd608(0x170)](_0x63a8c3 => { const _0x3b6614 = _0x2cd608, _0x11d3f7 = document['createElement']('div'); _0x11d3f7[_0x3b6614(0x290)] = _0x63a8c3[_0x3b6614(0x433)] === _0x3b6614(0xae9) ? _0x3b6614(0x1db) : _0x3b6614(0xae6), _0x11d3f7[_0x3b6614(0x8e3)] = _0x63a8c3['content'], _0x11d3f7[_0x3b6614(0x814)]['id'] = _0x63a8c3['id'], _0x168044[_0x3b6614(0x962)](_0x11d3f7); }); } function _0x1c7036(_0x36365f) { const _0x3e37f6 = _0x4d95ce; document[_0x3e37f6(0x374)](_0x3e37f6(0x8a4))[_0x3e37f6(0x8e3)] = '为\x20' + _0x36365f + _0x3e37f6(0x5a0), document['getElementById']('event-content-input')[_0x3e37f6(0x330)] = '', document[_0x3e37f6(0x374)](_0x3e37f6(0x52e))[_0x3e37f6(0x809)] = !![], document['getElementById'](_0x3e37f6(0xa89))[_0x3e37f6(0x8f0)]['add'](_0x3e37f6(0x18c)), document[_0x3e37f6(0x374)](_0x3e37f6(0x92b))[_0x3e37f6(0x347)](); } function _0x48d8f3() { const _0x38c371 = _0x4d95ce; if ('ONCYg' !== _0x38c371(0x30d)) _0x22a64a += _0x38c371(0x3f9); else { const _0x399c44 = document[_0x38c371(0x374)](_0x38c371(0x92b))[_0x38c371(0x330)]['trim'](), _0x7a6597 = document['querySelector'](_0x38c371(0x4e0))[_0x38c371(0x330)]; if (!_0x399c44) { if (_0x38c371(0xa90) === _0x38c371(0xa90)) { _0xd5e395('内容不能为空！'); return; } else _0x361cf9(![]), _0xedf4b5[_0x38c371(0x89a)][_0x38c371(0x330)] = ''; } const _0x552e31 = _0x5f49a9['userProfiles'][_0x38c371(0x7ed)](_0x22510c => _0x22510c['id'] === _0x5f49a9[_0x38c371(0x4f6)]); _0x5f49a9[_0x38c371(0x5fe)]['push']({ 'id': 'event_' + Date[_0x38c371(0x780)](), 'date': _0x373631[_0x38c371(0x839)], 'type': _0x7a6597, 'content': _0x399c44, 'userId': _0x552e31['id'] }), _0x39e4f0(), _0x29b79d(), _0x7f53d5(), _0x539b8c(), document[_0x38c371(0x374)]('add-event-modal')[_0x38c371(0x8f0)]['remove'](_0x38c371(0x18c)); } } function _0x7f53d5() { const _0x2c1ece = _0x4d95ce, _0x28d649 = document['getElementById'](_0x2c1ece(0x2c2)), _0x184cd0 = document['getElementById'](_0x2c1ece(0x2b7)), _0x21ab39 = new Date(); _0x21ab39[_0x2c1ece(0x73d)](0x0, 0x0, 0x0, 0x0); const _0x5e6545 = _0x5f49a9['calendarEvents'][_0x2c1ece(0x8be)](_0x345c63 => _0x345c63['type'] === _0x2c1ece(0xae9) && new Date(_0x345c63[_0x2c1ece(0x256)] + 'T00:00:00') >= _0x21ab39)[_0x2c1ece(0x43a)]((_0x33acbc, _0x31e45e) => new Date(_0x33acbc[_0x2c1ece(0x256)]) - new Date(_0x31e45e[_0x2c1ece(0x256)])); if (_0x5e6545[_0x2c1ece(0x2ed)] > 0x0) { if (_0x2c1ece(0x382) === _0x2c1ece(0x382)) { const _0x36b6af = _0x5e6545[0x0], _0x246252 = new Date(_0x36b6af[_0x2c1ece(0x256)] + _0x2c1ece(0x1eb)), _0x3852ec = _0x246252 - _0x21ab39, _0x5ae696 = Math[_0x2c1ece(0x8bd)](_0x3852ec / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x28d649[_0x2c1ece(0x8e3)] = _0x2c1ece(0x835) + _0x36b6af[_0x2c1ece(0x47e)] + '」', _0x184cd0[_0x2c1ece(0x279)] = _0x2c1ece(0x2a3) + _0x5ae696 + _0x2c1ece(0x98f); } else _0x3d4fcf += _0x2c1ece(0x821) + _0x108188[_0x2c1ece(0x696)] + _0x2c1ece(0x2c4) + _0x599199['last_message_preview'] + '”。\x0a', _0x53b43c['log'] && _0x186974[_0x2c1ece(0x552)](_0x2acf21[_0x2c1ece(0x6e2)]) && (_0x1f6a4a += _0x2c1ece(0x24b), _0x2ab09e[_0x2c1ece(0x6e2)]['forEach'](_0xb900f1 => { const _0x2a9b44 = _0x2c1ece, _0x538eed = _0xb900f1[_0x2a9b44(0x31d)] === _0x2a9b44(0x14b) ? '你' : _0x1cfd2b[_0x2a9b44(0x696)]; _0x2b3bb5 += _0x2a9b44(0x58d) + _0x538eed + ':\x20' + _0xb900f1[_0x2a9b44(0x47e)] + '\x0a'; })); } else _0x28d649[_0x2c1ece(0x8e3)] = _0x2c1ece(0x5c3), _0x184cd0['innerHTML'] = _0x2c1ece(0x595); } function _0x3f582c() { const _0xa5eaff = _0x4d95ce; if (_0xa5eaff(0x753) === _0xa5eaff(0x28e)) _0x2e0e6c['setItem'](_0x1ae041, _0xaf2e0[_0xa5eaff(0x795)](_0x20d5c9)); else { const _0x16c7a5 = document[_0xa5eaff(0x374)](_0xa5eaff(0xa2d)); _0x16c7a5[_0xa5eaff(0x279)] = ''; if (_0x5f49a9['userProfiles'][_0xa5eaff(0x2ed)] === 0x0) { _0x16c7a5[_0xa5eaff(0x279)] = _0xa5eaff(0x89c); return; } _0x5f49a9[_0xa5eaff(0x4d5)][_0xa5eaff(0x170)](_0x3b9480 => { const _0xe1cf7 = _0xa5eaff; if ('lKdSL' === _0xe1cf7(0x193)) { const _0x28ebb4 = document['createElement'](_0xe1cf7(0x754)); _0x28ebb4[_0xe1cf7(0x290)] = 'world-book-item', _0x28ebb4['dataset']['id'] = _0x3b9480['id']; const _0x3aa9d3 = _0x3b9480['id'] === _0x5f49a9[_0xe1cf7(0x4f6)] ? '\x20(当前)' : ''; _0x28ebb4[_0xe1cf7(0x279)] = _0xe1cf7(0x585) + (_0x3b9480[_0xe1cf7(0x7d6)] || _0x42c494) + _0xe1cf7(0x76b) + _0x3b9480[_0xe1cf7(0x7d9)] + _0x3aa9d3 + _0xe1cf7(0x7df) + _0x3b9480[_0xe1cf7(0x8eb)]['substring'](0x0, 0x64) + _0xe1cf7(0x12a), _0x28ebb4[_0xe1cf7(0x458)](_0xe1cf7(0x173), () => _0x38e2bc(_0x3b9480['id'])), _0x16c7a5[_0xe1cf7(0x962)](_0x28ebb4); } else _0x5c1013('chat', 'home'), _0x3fb214(() => _0x24abd7(), 0x64); }); } } function _0x38e2bc(_0x1171bf = null) { const _0x3a86e1 = _0x4d95ce; if (_0x3a86e1(0xa3d) === _0x3a86e1(0x92f)) _0x8c25b4[_0x3a86e1(0x2d6)]['color'] = 'var(--text-color)', _0x86cc4a[_0x3a86e1(0x2d6)]['textShadow'] = _0x3a86e1(0x8b4); else { _0x53a558(_0x3a86e1(0xb5d), _0x3a86e1(0x928)); const _0x1a3f9a = document[_0x3a86e1(0x374)](_0x3a86e1(0x3c2)), _0x23fa79 = document[_0x3a86e1(0x374)](_0x3a86e1(0x862)), _0x15950f = document[_0x3a86e1(0x374)]('user-avatar-frame-url'), _0x579179 = document[_0x3a86e1(0x179)](_0x3a86e1(0xa1e)); if (user) { _0x15950f[_0x3a86e1(0x330)] = user['avatarFrameUrl'] || ''; if (_0x579179) _0x579179[_0x3a86e1(0x2d6)][_0x3a86e1(0x486)] = user[_0x3a86e1(0x59f)] ? _0x3a86e1(0x730) + user['avatarFrameUrl'] + '\x27)' : ''; } else { _0x15950f[_0x3a86e1(0x330)] = ''; if (_0x579179) _0x579179[_0x3a86e1(0x2d6)][_0x3a86e1(0x486)] = ''; } _0x15950f[_0x3a86e1(0x458)](_0x3a86e1(0x1bc), () => { const _0x4c8b1c = _0x3a86e1; if (_0x4c8b1c(0x612) === _0x4c8b1c(0x9b8)) { const _0x4ea84f = _0x32e9eb[_0x4c8b1c(0x95f)](_0x4c8b1c(0x754)); _0x4ea84f[_0x4c8b1c(0x290)] = 'expense-item', _0x4ea84f['style']['flexDirection'] = _0x4c8b1c(0x7f8), _0x4ea84f['style']['alignItems'] = 'stretch', _0x4ea84f[_0x4c8b1c(0x2d6)]['padding'] = _0x4c8b1c(0x6c4), _0x4ea84f['style'][_0x4c8b1c(0x2f5)] = '0'; const _0x5c98ab = _0x2f68da[_0xb23f3d[_0x4c8b1c(0x3b4)]] || _0x27b852['默认'], _0x33bf5c = _0x4c8b1c(0x65d) + _0x5c98ab + _0x4c8b1c(0x254), _0x26164c = '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>' + _0x33bf5c + _0x4c8b1c(0x31c) + _0x48bb0c[_0x4c8b1c(0x551)] + _0x4c8b1c(0x9a5) + (_0x52388c[_0x4c8b1c(0x3b4)] || _0x4c8b1c(0x3f0)) + '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20' + (_0x520e0c[_0x4c8b1c(0xaac)] || 0x0)['toFixed'](0x2) + '</span></div>'; let _0x92cfcb = ''; if (_0x37e3db[_0x4c8b1c(0x41d)] && _0x528432[_0x4c8b1c(0x41d)][_0x4c8b1c(0x723)]) { const _0x180676 = _0x2153c3(_0x2af424[_0x4c8b1c(0x41d)][_0x4c8b1c(0x723)]); _0x180676 && (_0x92cfcb = _0x4c8b1c(0x3bd) + _0x180676[_0x4c8b1c(0x7d6)] + _0x4c8b1c(0x7a3) + _0x180676[_0x4c8b1c(0x7d9)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x5b1a31[_0x4c8b1c(0x41d)][_0x4c8b1c(0x3c5)] + _0x4c8b1c(0xa44)); } _0x4ea84f[_0x4c8b1c(0x279)] = _0x26164c + _0x92cfcb, _0x3f86d7[_0x4c8b1c(0x962)](_0x4ea84f); } else { if (_0x579179) _0x579179['style'][_0x4c8b1c(0x486)] = _0x15950f['value'] ? 'url(\x27' + _0x15950f['value'] + '\x27)' : ''; } }), _0x23fa79[_0x3a86e1(0x2d6)][_0x3a86e1(0x486)] = ''; if (_0x1171bf) { const _0x36052d = _0x5f49a9[_0x3a86e1(0x4d5)][_0x3a86e1(0x7ed)](_0x5ef2b9 => _0x5ef2b9['id'] === _0x1171bf); if (!_0x36052d) return; document[_0x3a86e1(0x374)]('editing-user-id')[_0x3a86e1(0x330)] = _0x36052d['id'], document['getElementById'](_0x3a86e1(0xaad))['textContent'] = _0x3a86e1(0x246), document[_0x3a86e1(0x374)]('user-name')[_0x3a86e1(0x330)] = _0x36052d[_0x3a86e1(0x7d9)]; if (_0x36052d[_0x3a86e1(0x7d6)]) { if (_0x3a86e1(0x9a9) !== 'NYdRv') { _0x4294cc = ![], _0x38166c['style'][_0x3a86e1(0x416)] = _0x3a86e1(0x8b4), _0x4231c9[_0x3a86e1(0x374)](_0x3a86e1(0x783))['style'][_0x3a86e1(0x416)] = _0x3a86e1(0x888), _0x26686e[_0x3a86e1(0x374)](_0x3a86e1(0x85f))[_0x3a86e1(0x2d6)][_0x3a86e1(0x416)] = _0x3a86e1(0x888); if (!_0x25d300) { const _0x12373e = _0x536199(_0xe65a3e[_0x3a86e1(0x5b0)]); _0x12373e && (_0x12373e[_0x3a86e1(0x32d)] = _0x244640, _0x55117a(_0x5f1d6b[_0x3a86e1(0x5b0)], _0x3a86e1(0x48b))); } } else _0x23fa79[_0x3a86e1(0x2d6)][_0x3a86e1(0x486)] = _0x3a86e1(0x730) + _0x36052d['avatar'] + '\x27)'; } document[_0x3a86e1(0x374)]('user-persona')['value'] = _0x36052d[_0x3a86e1(0x8eb)], _0x1a3f9a[_0x3a86e1(0x2d6)][_0x3a86e1(0x416)] = _0x36052d['id'] === _0x5f49a9[_0x3a86e1(0x4f6)] ? _0x3a86e1(0x8b4) : 'block'; } else document[_0x3a86e1(0x374)](_0x3a86e1(0x364))[_0x3a86e1(0x330)] = '', document['getElementById'](_0x3a86e1(0xaad))[_0x3a86e1(0x8e3)] = _0x3a86e1(0x991), document[_0x3a86e1(0x374)](_0x3a86e1(0x5ce))[_0x3a86e1(0x330)] = _0x3a86e1(0x87a) + (_0x5f49a9['userProfiles']['length'] + 0x1), _0x23fa79[_0x3a86e1(0x2d6)][_0x3a86e1(0x486)] = _0x3a86e1(0x730) + _0x42c494 + '\x27)', document[_0x3a86e1(0x374)](_0x3a86e1(0x2ae))[_0x3a86e1(0x330)] = '', _0x1a3f9a[_0x3a86e1(0x2d6)][_0x3a86e1(0x416)] = _0x3a86e1(0x8b4); } } function _0x1cfe47() { const _0x222cc4 = _0x4d95ce; if (_0x222cc4(0x725) !== 'wIpId') { const _0x4af7a2 = document[_0x222cc4(0x374)]('editing-user-id')['value'], _0xc3ab5c = document[_0x222cc4(0x374)]('user-avatar-preview'), _0x228ddf = { 'name': document[_0x222cc4(0x374)]('user-name')[_0x222cc4(0x330)][_0x222cc4(0x1c8)](), 'persona': document[_0x222cc4(0x374)](_0x222cc4(0x2ae))[_0x222cc4(0x330)][_0x222cc4(0x1c8)](), 'avatar': _0x5f49a9[_0x222cc4(0x4d5)][_0x222cc4(0x7ed)](_0x3b8df5 => _0x3b8df5['id'] === _0x4af7a2)?.[_0x222cc4(0x7d6)] || _0xc3ab5c[_0x222cc4(0x2d6)][_0x222cc4(0x486)][_0x222cc4(0xa24)](0x5, -0x2) || _0x42c494, 'avatarFrameUrl': document[_0x222cc4(0x374)](_0x222cc4(0xa72))[_0x222cc4(0x330)][_0x222cc4(0x1c8)]() }; _0xc3ab5c[_0x222cc4(0x814)][_0x222cc4(0x7ae)] && (_0x228ddf['avatar'] = _0xc3ab5c[_0x222cc4(0x814)]['newAvatar'], delete _0xc3ab5c[_0x222cc4(0x814)][_0x222cc4(0x7ae)]); if (!_0x228ddf[_0x222cc4(0x7d9)]) { _0xd5e395(_0x222cc4(0xa8a)); return; } if (_0x4af7a2) { if (_0x222cc4(0x8cf) === _0x222cc4(0x8bf)) _0x48e544[_0x222cc4(0x7a4)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x2cd3dc['id'], _0x3261f8), _0x56de99(_0x222cc4(0x38a)); else { const _0x242c89 = _0x5f49a9[_0x222cc4(0x4d5)]['find'](_0x2b2d54 => _0x2b2d54['id'] === _0x4af7a2); if (_0x242c89) Object[_0x222cc4(0x866)](_0x242c89, _0x228ddf); } } else { const _0x26f21e = { 'id': _0x222cc4(0xace) + Date[_0x222cc4(0x780)](), ..._0x228ddf }; _0x5f49a9[_0x222cc4(0x4d5)][_0x222cc4(0x238)](_0x26f21e), !_0x5f49a9[_0x222cc4(0x4f6)] && (_0x5f49a9[_0x222cc4(0x4f6)] = _0x26f21e['id']); } _0x39e4f0(), _0xd5e395(_0x222cc4(0x939)), _0x3f582c(), _0x53a558(_0x222cc4(0x928), 'userProfile'); } else _0x524a52[_0x222cc4(0x7a4)]('加载第二个卡片图片失败', _0x164aab); } async function _0x2f77dd() { const _0xf71664 = _0x4d95ce; if ('JAmyQ' !== 'JAmyQ') { const _0x2ce1ec = _0x407fb5[_0xf71664(0x6ba)](_0xf71664(0x1f9)); if (_0x2ce1ec) { const { playlist: _0x495067, currentIndex: _0x2c420c } = _0x189e38[_0xf71664(0x468)](_0x2ce1ec); _0x59b436[_0xf71664(0x552)](_0x495067) && _0x495067[_0xf71664(0x2ed)] > 0x0 && _0x2c420c > -0x1 && (_0x3ea69f[_0xf71664(0x520)] = _0x495067, _0x40605d['currentlyPlayingIndex'] = _0x2c420c, _0x37672c[_0xf71664(0x48d)] = ![], _0x5071ed()); } } else { const _0xdf0d89 = document[_0xf71664(0x374)](_0xf71664(0x364))[_0xf71664(0x330)]; if (!_0xdf0d89) return; if (_0x5f49a9[_0xf71664(0x4d5)][_0xf71664(0x2ed)] <= 0x1) { _0xd5e395(_0xf71664(0x6d8)); return; } const _0x511f44 = await _0xd56340(_0xf71664(0x24d)); _0x511f44 && (_0x5f49a9[_0xf71664(0x4d5)] = _0x5f49a9[_0xf71664(0x4d5)][_0xf71664(0x8be)](_0x2cf991 => _0x2cf991['id'] !== _0xdf0d89), _0x5f49a9[_0xf71664(0x4f6)] === _0xdf0d89 && (_0x5f49a9[_0xf71664(0x4f6)] = _0x5f49a9['userProfiles'][0x0]['id']), _0x5f49a9[_0xf71664(0x42d)][_0xf71664(0x170)](_0x3839b4 => { const _0x552262 = _0xf71664; if (_0x552262(0x9f0) === _0x552262(0x9f0)) _0x3839b4[_0x552262(0x3fc)] === _0xdf0d89 && (_0x3839b4[_0x552262(0x3fc)] = _0x5f49a9['activeUserProfileId']); else { const _0x52855b = _0xfa662b[_0x552262(0x47e)] ? '\x20' + _0x469015[_0x552262(0x47e)] : ''; _0x17a654['push']('[' + _0x12b00d(_0x20438b) + _0x552262(0x4ba) + _0x52855b); } }), _0x39e4f0(), _0xd5e395('用户已删除。'), _0x3f582c(), _0x53a558(_0xf71664(0x928), 'userProfile')); } } function _0x10337d() { const _0x13305d = _0x4d95ce, _0x262f4c = document[_0x13305d(0x374)](_0x13305d(0x6b2)); _0x262f4c[_0x13305d(0x279)] = ''; if (_0x5f49a9['worldBooks']['length'] === 0x0) { _0x262f4c['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>'; return; } _0x5f49a9['worldBooks'][_0x13305d(0x170)](_0x56cb49 => { const _0x151857 = _0x13305d, _0x4858f0 = document['createElement'](_0x151857(0x754)); _0x4858f0['className'] = _0x151857(0xacf), _0x4858f0[_0x151857(0x814)]['id'] = _0x56cb49['id'], _0x4858f0[_0x151857(0x279)] = _0x151857(0xad5) + _0x56cb49[_0x151857(0x7d9)] + _0x151857(0x9f5) + _0x56cb49[_0x151857(0x47e)][_0x151857(0x80c)](0x0, 0x64) + _0x151857(0x602), _0x4858f0[_0x151857(0x458)](_0x151857(0x173), () => _0x25f1da(_0x56cb49['id'])), _0x262f4c[_0x151857(0x962)](_0x4858f0); }); } function _0x25f1da(_0x2fe73e = null) { const _0x2d4a86 = _0x4d95ce; _0x53a558(_0x2d4a86(0xb02), 'worldBook'); if (_0x2fe73e) { const _0xe9e2f4 = _0x5f49a9['worldBooks'][_0x2d4a86(0x7ed)](_0x5a6838 => _0x5a6838['id'] === _0x2fe73e); if (!_0xe9e2f4) return; document['getElementById']('editing-world-book-id')[_0x2d4a86(0x330)] = _0xe9e2f4['id'], document['getElementById'](_0x2d4a86(0x466))[_0x2d4a86(0x8e3)] = _0x2d4a86(0x705), document['getElementById'](_0x2d4a86(0x880))['value'] = _0xe9e2f4[_0x2d4a86(0x7d9)], document[_0x2d4a86(0x374)](_0x2d4a86(0x349))[_0x2d4a86(0x330)] = _0xe9e2f4['content']; } else document[_0x2d4a86(0x374)]('editing-world-book-id')['value'] = '', document[_0x2d4a86(0x374)]('world-book-editor-title')[_0x2d4a86(0x8e3)] = _0x2d4a86(0xafb), document[_0x2d4a86(0x374)](_0x2d4a86(0x880))[_0x2d4a86(0x330)] = '', document[_0x2d4a86(0x374)](_0x2d4a86(0x349))[_0x2d4a86(0x330)] = ''; } function _0xc88fb5() { const _0x5e0e9b = _0x4d95ce; if (_0x5e0e9b(0x3a0) === _0x5e0e9b(0x3c3)) _0x505d9a = _0x3f3305; else { const _0x241909 = document[_0x5e0e9b(0x374)](_0x5e0e9b(0x555))[_0x5e0e9b(0x330)], _0x5e044b = document[_0x5e0e9b(0x374)](_0x5e0e9b(0x880))['value'][_0x5e0e9b(0x1c8)](), _0x459b6f = document[_0x5e0e9b(0x374)](_0x5e0e9b(0x349))[_0x5e0e9b(0x330)][_0x5e0e9b(0x1c8)](); if (!_0x5e044b || !_0x459b6f) { _0xd5e395('条目名称和内容都不能为空！'); return; } if (_0x241909) { const _0x450f1c = _0x5f49a9['worldBooks'][_0x5e0e9b(0x7ed)](_0x2e42b5 => _0x2e42b5['id'] === _0x241909); if (_0x450f1c) { if (_0x5e0e9b(0x6d7) !== _0x5e0e9b(0x6d7)) { const _0x356f9d = _0x547725[_0x5e0e9b(0x42d)]['find'](_0x2743f1 => _0x2743f1[_0x5e0e9b(0xa3f)] && _0x2743f1[_0x5e0e9b(0xa3f)][_0x5e0e9b(0x74e)]); _0x356f9d && (_0x356f9d['activeListenSession'] = null, _0x31adbb(), _0x16efce(_0x5e0e9b(0x7e8)), _0x4ecb9d(), _0x56f36e['classList'][_0x5e0e9b(0x31f)](_0x5e0e9b(0x18c)), _0x38c31d(() => _0x54498a[_0x5e0e9b(0x2d6)][_0x5e0e9b(0x416)] = _0x5e0e9b(0x8b4), 0x12c)); } else _0x450f1c[_0x5e0e9b(0x7d9)] = _0x5e044b, _0x450f1c[_0x5e0e9b(0x47e)] = _0x459b6f; } } else { if ('RMhIV' === _0x5e0e9b(0x6fd)) { const _0x6fc1e7 = { 'id': 'wb_' + Date[_0x5e0e9b(0x780)](), 'name': _0x5e044b, 'content': _0x459b6f }; _0x5f49a9['worldBooks'][_0x5e0e9b(0x238)](_0x6fc1e7); } else { _0x15fe35[_0x5e0e9b(0x330)] = ''; return; } } _0x39e4f0(), _0xd5e395(_0x5e0e9b(0x52c)), _0x10337d(), _0x53a558(_0x5e0e9b(0x2c9), _0x5e0e9b(0xb02)); } } async function _0xde2af3() { const _0x2aaf9d = _0x4d95ce, _0x372803 = document['getElementById'](_0x2aaf9d(0x555))['value']; if (!_0x372803) return; const _0x1befbb = await _0xd56340(_0x2aaf9d(0x20e)); _0x1befbb && (_0x5f49a9['worldBooks'] = _0x5f49a9[_0x2aaf9d(0x1df)][_0x2aaf9d(0x8be)](_0x339bd2 => _0x339bd2['id'] !== _0x372803), _0x5f49a9[_0x2aaf9d(0x6b0)][_0x2aaf9d(0x170)](_0x3ec2c6 => { const _0x4bc85b = _0x2aaf9d; _0x4bc85b(0x9be) !== _0x4bc85b(0x317) ? _0x3ec2c6[_0x4bc85b(0x128)] && (_0x3ec2c6[_0x4bc85b(0x128)] = _0x3ec2c6[_0x4bc85b(0x128)]['filter'](_0x269044 => _0x269044 !== _0x372803)) : _0x4a8514[_0x4bc85b(0x662)] = null; }), _0x39e4f0(), _0xd5e395('条目已删除。'), _0x10337d(), _0x53a558('worldBook', _0x2aaf9d(0xb02))); } function _0x17ff62() { const _0x586cba = _0x4d95ce, _0xc26ff = document[_0x586cba(0x374)](_0x586cba(0x7c7)), _0x260c12 = _0xc26ff[_0x586cba(0x410)](_0x586cba(0x1f7)), _0x30817e = document[_0x586cba(0x179)]('.selected-options-text'); if (_0x260c12[_0x586cba(0x2ed)] === 0x0) _0x30817e['textContent'] = _0x586cba(0x446); else _0x260c12['length'] > 0x2 ? 'hDKEL' === _0x586cba(0xb4d) ? (_0x1e3d7d(), _0x3f506c(_0x586cba(0x685), _0x586cba(0x529))) : _0x30817e[_0x586cba(0x8e3)] = '已选择\x20' + _0x260c12[_0x586cba(0x2ed)] + '\x20项' : _0x30817e[_0x586cba(0x8e3)] = Array[_0x586cba(0x423)](_0x260c12)[_0x586cba(0x190)](_0x2e5d36 => _0x2e5d36[_0x586cba(0x62b)][_0x586cba(0x8e3)]['trim']())[_0x586cba(0x414)]('、'); } async function _0x4d0d53(_0x1dd106) { const _0x478713 = _0x4d95ce, _0x101182 = _0x5f49a9[_0x478713(0x42d)][_0x478713(0x7ed)](_0x27e445 => _0x27e445['id'] === _0x1dd106); if (!_0x101182 || _0x101182[_0x478713(0x433)] !== _0x478713(0x24e)) return; document['getElementById'](_0x478713(0x1fd))[_0x478713(0x330)] = _0x101182[_0x478713(0x7d9)] || '', _0x5b3b64(_0x478713(0x4ad)), document[_0x478713(0x374)](_0x478713(0x4ad))[_0x478713(0x330)] = _0x101182[_0x478713(0x3fc)] || _0x5f49a9[_0x478713(0x4f6)]; const _0x374e54 = document[_0x478713(0x374)](_0x478713(0xa95)); _0x374e54[_0x478713(0x279)] = '', _0x5f49a9[_0x478713(0x1df)][_0x478713(0x170)](_0x1ba861 => { const _0x38bc57 = _0x478713, _0xcb6891 = _0x101182['linkedWorldBookIds']?.['includes'](_0x1ba861['id']), _0x42b536 = document[_0x38bc57(0x95f)](_0x38bc57(0x3de)); _0x42b536[_0x38bc57(0x279)] = _0x38bc57(0xb07) + _0x1ba861['id'] + '\x22\x20' + (_0xcb6891 ? 'checked' : '') + '>\x20' + _0x1ba861[_0x38bc57(0x7d9)], _0x374e54[_0x38bc57(0x962)](_0x42b536); }), _0x4715e4(); const _0x56733d = document[_0x478713(0x374)]('group-avatar-preview'), _0x1f003d = document['getElementById']('group-bg-preview'); _0x1f003d[_0x478713(0x2d6)][_0x478713(0x486)] = '', _0x15e0c2('group_avatar_' + _0x1dd106)[_0x478713(0x8a2)](_0x581435 => { const _0x59e74e = _0x478713; _0x59e74e(0x3d9) === _0x59e74e(0x8c9) ? _0xa2aabe[_0x59e74e(0x179)]('#diary-action-reroll')[_0x59e74e(0x509)] = () => { _0x5e54f2(_0x189bf9), _0x187927(); } : _0x56733d['src'] = _0x581435 ? URL[_0x59e74e(0x7dc)](_0x581435) : _0x28cae8; }), _0x15e0c2(_0x478713(0x6dd) + _0x1dd106)[_0x478713(0x8a2)](_0x4d7d9b => { const _0xb99d78 = _0x478713; if (_0x4d7d9b) _0x1f003d[_0xb99d78(0x2d6)][_0xb99d78(0x486)] = 'url(\x27' + URL[_0xb99d78(0x7dc)](_0x4d7d9b) + '\x27)'; }), _0x53a558(_0x478713(0x9dc), _0x478713(0x134)); } async function _0x295794() { const _0x59046b = _0x4d95ce; if (_0x59046b(0x169) !== _0x59046b(0x169)) { const _0x53106c = _0x246d1d[_0x59046b(0x95f)](_0x59046b(0x314)); _0x53106c[_0x59046b(0x330)] = _0x5840ff['id'], _0x53106c['textContent'] = _0x4a6b36[_0x59046b(0x7d9)], _0x432bcb[_0x59046b(0x962)](_0x53106c); } else { const _0x523869 = _0x39d291(); if (!_0x523869 || _0x523869[_0x59046b(0x433)] !== 'group') return; const _0x455b6c = document[_0x59046b(0x374)](_0x59046b(0x1fd))[_0x59046b(0x330)][_0x59046b(0x1c8)](); if (!_0x455b6c) { _0xd5e395(_0x59046b(0x8aa)); return; } _0x523869[_0x59046b(0x7d9)] = _0x455b6c; const _0x1bfe91 = document[_0x59046b(0x410)](_0x59046b(0x71a)); _0x523869[_0x59046b(0x128)] = Array[_0x59046b(0x423)](_0x1bfe91)[_0x59046b(0x190)](_0x2fa6a7 => _0x2fa6a7[_0x59046b(0x330)]), _0x523869['boundUserProfileId'] = document[_0x59046b(0x374)](_0x59046b(0x4ad))[_0x59046b(0x330)]; const _0x3d85c0 = document[_0x59046b(0x374)](_0x59046b(0x570))[_0x59046b(0x760)][0x0], _0x550d3d = document['getElementById']('group-bg-input')[_0x59046b(0x760)][0x0]; if (_0x3d85c0) await _0x5a0c6c(_0x59046b(0x1c0) + _0x523869['id'], _0x3d85c0); if (_0x550d3d) await _0x5a0c6c('group_bg_' + _0x523869['id'], _0x550d3d); _0x39e4f0(), _0x208cd3(), await _0x223f24(), _0xd5e395(_0x59046b(0x540)), _0x53a558(_0x59046b(0x134), _0x59046b(0x9dc)); } } function _0x4715e4() { const _0x118123 = _0x4d95ce; if ('gLjNK' !== 'gLjNK') try { const _0x4700d3 = { 'characters': _0x359c0f['characters'], 'worldBooks': _0x1f9698[_0x118123(0x1df)], 'chats': _0x487a6c['chats'], 'userProfile': _0x144573[_0x118123(0xb5d)], 'apiSettings': _0x2ea61d[_0x118123(0x17c)], 'preferences': _0x472aab[_0x118123(0x407)], 'activeChatId': _0x330f83['activeChatId'], 'diaries': _0x2a693e['diaries'], 'friendCircles': _0x422dc8['friendCircles'], 'activeFriendCircleId': _0x570793[_0x118123(0x662)], 'userProfiles': _0x36f014['userProfiles'], 'activeUserProfileId': _0x33bbd2['activeUserProfileId'], 'accountingData': _0x585ae3['accountingData'], 'accountingLedger': _0x2c084c[_0x118123(0x6a1)], 'calendarEvents': _0x379a64[_0x118123(0x5fe)] }; _0x1d929c[_0x118123(0x421)](_0x118123(0x4cd), _0xe97580[_0x118123(0x795)](_0x4700d3)); } catch (_0x732056) { _0x540d1c[_0x118123(0x7a4)](_0x118123(0x27a), _0x732056), _0x2f4ac0(_0x118123(0x26e)); } else { const _0x1fcdeb = document['getElementById']('group-world-book-checkboxes'), _0x16af6a = _0x1fcdeb[_0x118123(0x410)]('input:checked'), _0x2e273a = document['querySelector'](_0x118123(0x2d2)); if (_0x16af6a['length'] === 0x0) _0x2e273a[_0x118123(0x8e3)] = _0x118123(0x446); else _0x16af6a[_0x118123(0x2ed)] > 0x2 ? _0x2e273a[_0x118123(0x8e3)] = _0x118123(0x9ea) + _0x16af6a[_0x118123(0x2ed)] + '\x20项' : _0x2e273a[_0x118123(0x8e3)] = Array[_0x118123(0x423)](_0x16af6a)[_0x118123(0x190)](_0x5b6765 => _0x5b6765[_0x118123(0x62b)]['textContent'][_0x118123(0x1c8)]())['join']('、'); } } async function _0x40a584() { const _0x188de2 = _0x4d95ce; if (_0x188de2(0xb40) === _0x188de2(0xb40)) { const _0x36d59c = _0x39d291(), _0xb6fda5 = (_0x36d59c?.[_0x188de2(0x258)] || [])[_0x188de2(0x190)](_0x590c99)[_0x188de2(0x8be)](Boolean), _0x424138 = _0x30ad29(_0x36d59c['id']); if (!_0x36d59c || _0x36d59c[_0x188de2(0x433)] !== _0x188de2(0x24e) || _0xb6fda5[_0x188de2(0x2ed)] < 0x2) return null; const _0x48adbf = _0x36d59c['linkedWorldBookIds'] && _0x36d59c['linkedWorldBookIds'][_0x188de2(0x2ed)] > 0x0 ? _0x188de2(0x174) + _0x36d59c[_0x188de2(0x128)][_0x188de2(0x190)](_0x12b829 => _0x5f49a9[_0x188de2(0x1df)][_0x188de2(0x7ed)](_0x353819 => _0x353819['id'] === _0x12b829))[_0x188de2(0x8be)](Boolean)[_0x188de2(0x190)](_0x3ffb41 => _0x188de2(0xb3f) + _0x3ffb41[_0x188de2(0x7d9)] + '\x0a' + _0x3ffb41['content'])[_0x188de2(0x414)]('') : '', _0x3bc2a2 = _0x424138[_0x188de2(0x8eb)] ? _0x188de2(0x700) + _0x424138['name'] + _0x188de2(0xb0c) + _0x424138[_0x188de2(0x8eb)] : ''; let _0xa42779 = ''; const _0x580f63 = new Date(), _0x2125bf = _0x5f49a9[_0x188de2(0xb06)]['at'](-0x1); _0xa42779 += _0x188de2(0x23f) + _0x580f63['toLocaleString'](_0x188de2(0x983), { 'dateStyle': _0x188de2(0x5d7), 'timeStyle': _0x188de2(0x54d) }); if (_0x2125bf) { if (_0x188de2(0xb56) !== _0x188de2(0xb56)) { if (_0x423fcc[_0x188de2(0x8cd)]) _0x5a4657[_0x188de2(0x238)]('[' + _0x59e494(_0xeddf05) + ']\x20[sticker:' + (_0x4236dd[_0x188de2(0x47e)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x2e1622[_0x188de2(0xad0)]) { const _0xed43aa = _0x1beb38[_0x188de2(0x47e)] ? '\x20' + _0x445e70[_0x188de2(0x47e)] : ''; _0x318a95[_0x188de2(0x238)]('[' + _0xd6bf03(_0x11c11b) + _0x188de2(0x4ba) + _0xed43aa); } else _0x300f77[_0x188de2(0x47e)] && _0x5b16ec[_0x188de2(0x238)]('[' + _0x5e9d12(_0x1e529b) + ']\x20' + _0xc5c2a0[_0x188de2(0x47e)]); } } else { const _0x555360 = new Date(_0x2125bf['timestamp']), _0x58124a = Math[_0x188de2(0x516)]((_0x580f63 - _0x555360) / (0x3e8 * 0x3c)); if (_0x58124a < 0x5) _0xa42779 += _0x188de2(0x2aa); else { if (_0x58124a < 0x78) _0xa42779 += _0x188de2(0x619) + _0x58124a + _0x188de2(0x3c7); else { if (_0x188de2(0x328) === _0x188de2(0x2a0)) _0x2dc803 = _0xd22d4b; else { const _0x1c59d0 = Math['floor'](_0x58124a / 0x3c); if (_0x1c59d0 < 0x30) _0xa42779 += '\x0a-\x20**对话状态**:\x20群里在' + _0x1c59d0 + _0x188de2(0x840); else _0xa42779 += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x188de2(0x516)](_0x1c59d0 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } } } else _0xa42779 += _0x188de2(0x264); const _0x464b09 = [..._0x5f49a9[_0x188de2(0xb06)]][_0x188de2(0x1de)]()[_0x188de2(0x7ed)](_0x236995 => _0x236995['role'] === _0x188de2(0x384))?.[_0x188de2(0x47e)] || '', _0x43c9f7 = _0x53bae2(_0x36d59c, _0x464b09), _0x3b64c5 = _0x5f49a9['conversationHistory']['slice'](-0x78), _0x936d55 = _0xf3cd55[_0x188de2(0x190)](_0x22282d => _0x22282d['name']), _0x4094a5 = _0x2c2a8e(), _0x34fa7c = _0xb6fda5[_0x188de2(0x190)](_0x58e159 => { const _0x1c3b02 = _0x188de2; if (_0x1c3b02(0x214) === _0x1c3b02(0x165)) _0x5f1a19 += _0x1c3b02(0x24b), _0x714472[_0x1c3b02(0x6e2)][_0x1c3b02(0x170)](_0x5d2d3c => { const _0xc2e29e = _0x1c3b02, _0x2517bf = _0x5d2d3c[_0xc2e29e(0x31d)] === _0xc2e29e(0x14b) ? '你' : _0x114173['contact_name']; _0x55e6da += _0xc2e29e(0x58d) + _0x2517bf + ':\x20' + _0x5d2d3c[_0xc2e29e(0x47e)] + '\x0a'; }); else { const { omniText: _0x3e5542 } = _0x2719e3(_0x58e159['id'], _0x36d59c['id']), _0x54f6e5 = _0x20b2d5(_0x58e159['id']), _0x573087 = _0x58e159[_0x1c3b02(0x128)] && _0x58e159[_0x1c3b02(0x128)]['length'] > 0x0 ? '\x0a\x0a#\x20' + _0x58e159[_0x1c3b02(0x7d9)] + _0x1c3b02(0x599) + _0x58e159[_0x1c3b02(0x128)][_0x1c3b02(0x190)](_0x38fbc8 => _0x5f49a9['worldBooks'][_0x1c3b02(0x7ed)](_0x1c877b => _0x1c877b['id'] === _0x38fbc8))['filter'](Boolean)[_0x1c3b02(0x190)](_0x475ba2 => _0x1c3b02(0x6f8) + _0x475ba2[_0x1c3b02(0x7d9)] + '\x0a' + _0x475ba2[_0x1c3b02(0x47e)])['join']('') : ''; let _0x3bb9ff = _0x1c3b02(0xaca) + _0x58e159[_0x1c3b02(0x7d9)] + _0x1c3b02(0x9db); const _0x1bd3ab = _0x97843f(_0x58e159['id']), _0x22d3c8 = new Date(); if (_0x1bd3ab) { const _0x2b35e9 = new Date(_0x1bd3ab[_0x1c3b02(0x75a)]); _0x3bb9ff += _0x1c3b02(0x906) + _0x424138[_0x1c3b02(0x7d9)] + _0x1c3b02(0x852) + _0x34dad7(_0x2b35e9) + '\x0a'; const _0x5ea20f = _0x22d3c8[_0x1c3b02(0x4b4)]() === _0x2b35e9[_0x1c3b02(0x4b4)](), _0x2ab774 = new Date(); _0x2ab774['setDate'](_0x22d3c8['getDate']() - 0x1); const _0x5df84b = _0x2ab774[_0x1c3b02(0x4b4)]() === _0x2b35e9[_0x1c3b02(0x4b4)](); if (_0x5ea20f) _0x3bb9ff += _0x1c3b02(0x333); else _0x5df84b ? _0x3bb9ff += _0x1c3b02(0x63e) : 'RVMNH' !== _0x1c3b02(0x8c1) ? _0x3bb9ff += '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a' : (_0x2bf66f['textContent'] = _0x2989f5[_0x1c3b02(0x7d9)], _0x20afd0[_0x1c3b02(0x8e3)] = _0x1c3b02(0x63b), _0x58506b(_0x299f1d, _0x1c3b02(0x48b))); } else _0x3bb9ff += _0x1c3b02(0x36e) + _0x424138[_0x1c3b02(0x7d9)] + _0x1c3b02(0x306); return { 'id': _0x58e159['id'], 'name': _0x58e159[_0x1c3b02(0x7d9)], 'persona': _0x58e159[_0x1c3b02(0x8eb)] || '乐于助人的助手', 'memory': _0x3e5542 + _0x54f6e5 + _0x573087 + _0x3bb9ff }; } }), _0x26cfdf = 0x5, _0x289d83 = 0xc, _0x140bb9 = _0x188de2(0xb35)[_0x188de2(0x1c8)](), _0x54e7e0 = { 'instruction': ('\x0a-\x20你正在为一个名为“' + (_0x424138[_0x188de2(0x7d9)] || '用户') + _0x188de2(0x271) + (_0x424138[_0x188de2(0x7d9)] || '用户') + _0x188de2(0xb05) + _0x26cfdf + _0x188de2(0x5b1) + _0x289d83 + _0x188de2(0x98e) + (_0x424138['name'] || '用户') + _0x188de2(0x2ce) + _0xa42779 + '\x20\x0a' + _0x3bc2a2 + '\x0a' + _0x48adbf + _0x188de2(0x5f8) + _0x4094a5 + '\x0a')[_0x188de2(0x1c8)](), 'personas': _0x34fa7c, 'mentioned': _0x43c9f7 ? { 'id': _0x43c9f7['id'], 'name': _0x43c9f7[_0x188de2(0x7d9)] } : null, 'stickerList': _0x936d55 }, _0x163984 = { 'type': _0x188de2(0x767), 'properties': { 'events': { 'type': _0x188de2(0x545), 'items': { 'type': _0x188de2(0x767), 'required': [_0x188de2(0x699), _0x188de2(0x897)], 'properties': { 'senderId': { 'type': _0x188de2(0x267) }, 'kind': { 'type': _0x188de2(0x267), 'enum': ['text', _0x188de2(0x6e6), _0x188de2(0xb60)] }, 'content': { 'type': _0x188de2(0x267) }, 'sticker': { 'type': _0x188de2(0x267) }, 'songName': { 'type': _0x188de2(0x267) }, 'artist': { 'type': _0x188de2(0x267) } } } } }, 'required': [_0x188de2(0x3d7)] }, _0x2f7a4d = []; _0x2f7a4d[_0x188de2(0x238)]({ 'role': _0x188de2(0x1ce), 'content': _0x140bb9 }); for (const _0x2acc37 of _0x3b64c5) { const _0x195ace = _0x2acc37[_0x188de2(0x664)] === 'ai' || _0x2acc37[_0x188de2(0x664)] === _0x188de2(0x913) ? _0x188de2(0x913) : _0x188de2(0x384); let _0xfec41a = { 'role': _0x195ace, 'content': _0x2acc37[_0x188de2(0x47e)] }, _0x14f151 = !!_0x2acc37[_0x188de2(0x47e)], _0x50d043 = null; if (_0x2acc37[_0x188de2(0xad0)]) { if (_0x188de2(0x69f) !== _0x188de2(0x69f)) { const _0x470abb = _0x1b7ba5['createElement']('option'); _0x470abb['value'] = _0x4b5881['id'], _0x470abb[_0x188de2(0x8e3)] = _0x5ed7a6[_0x188de2(0x7d9)], _0x5d57a7['appendChild'](_0x470abb); } else _0x50d043 = _0x2acc37['image']; } else { if (_0x2acc37[_0x188de2(0x3a7)]) { if (_0x188de2(0x4ff) !== 'YWKcu') try { if ('msNHV' === _0x188de2(0x93e)) { const _0x263a41 = await _0x15e0c2(_0x2acc37[_0x188de2(0x3a7)]); _0x263a41 && (_0x50d043 = await _0xa47e47(_0x263a41)); } else { const _0x4d8eec = (_0xacbc7c[_0x188de2(0x2d9)] || [])[_0x188de2(0x190)](_0x2f0d06 => '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x2f0d06 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0x188de2(0x414)](''); return '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x46e6ae['restaurant_name'] || _0x188de2(0x93a)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x5301d0['timestamp'] || '') + _0x188de2(0x9b0) + (_0x4638b6[_0x188de2(0x405)] || _0x188de2(0x1d4)) + _0x188de2(0x826) + _0x4d8eec + _0x188de2(0x48a) + (_0x44d621[_0x188de2(0x322)] || 0x0)[_0x188de2(0x539)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } } catch (_0x112596) { console[_0x188de2(0x7a4)](_0x188de2(0x9b6), _0x112596); } else { _0xd885e5['innerHTML'] = _0x188de2(0x582); return; } } } if (_0x50d043) { if ('srWKN' === _0x188de2(0x4f0)) _0xfec41a['image'] = _0x50d043, _0x14f151 = !![]; else { const _0x10b198 = _0x549942['trim'](); _0x10b198 && _0x42c729[_0x188de2(0x238)](..._0x362ee9(_0x10b198)), _0x479507 < _0x332cc2[_0x188de2(0x2ed)] && (_0x2cb2d8[_0x188de2(0x238)](_0x3cf4d4[_0x90daf1]['trim']()), _0x2cb039++); } } if (_0x14f151) { if (_0x188de2(0xb63) === _0x188de2(0xb63)) _0x2f7a4d[_0x188de2(0x238)](_0xfec41a); else { if (_0x43090e) _0x570466(_0x4d4d61); const _0x183169 = _0x477435[_0x188de2(0x89a)][_0x188de2(0x796)](_0x188de2(0x285)); if (!_0x183169) return; const _0x1d4d92 = _0x183169[_0x188de2(0x814)]['id']; if (!_0x1d4d92) return; const _0xbb3ab7 = () => { _0x494104 = _0x5e7be3(() => { const _0x3da5e1 = _0xe792; if (_0xaa4e6f['type'] === _0x3da5e1(0x2ba)) _0x3e561d[_0x3da5e1(0x6ce)](); _0x1cd023(_0x1d4d92); }, 0x320); }, _0x5e7e26 = () => { if (_0xff63a2) _0x2c0214(_0xa2a9ee); }; _0x2b5f50[_0x188de2(0x458)](_0x188de2(0x34e), _0x5e7e26, { 'once': !![] }), _0x434ca7[_0x188de2(0x458)](_0x188de2(0x50c), _0x5e7e26, { 'once': !![] }), _0x210c8e[_0x188de2(0x458)]('touchcancel', _0x5e7e26, { 'once': !![] }), _0x3211a7['addEventListener'](_0x188de2(0x27e), _0x5e7e26, { 'once': !![] }), _0xbb3ab7(); } } } _0x2f7a4d[_0x188de2(0x238)]({ 'role': _0x188de2(0x384), 'content': _0x188de2(0x580) + JSON['stringify'](_0x163984) + '\x0a\x0aINPUT:\x0a' + JSON[_0x188de2(0x795)](_0x54e7e0) }); try { const _0x257f84 = await _0x4d0897(_0x2f7a4d, { 'json': !![] }); if (!_0x257f84) return null; let _0x262e76 = _0x257f84['trim'](); const _0x505f3b = _0x262e76[_0x188de2(0xa55)](/```json([\s\S]*?)```/i); if (_0x505f3b) _0x262e76 = _0x505f3b[0x1][_0x188de2(0x1c8)](); _0x262e76 = _0x5f0489(_0x262e76); let _0x1d95ec = null; try { _0x1d95ec = JSON[_0x188de2(0x468)](_0x262e76); } catch (_0x531b11) { console[_0x188de2(0x7a4)](_0x188de2(0x907), _0x531b11), console[_0x188de2(0x7a4)](_0x188de2(0x54b), _0x262e76); } if (!_0x1d95ec || !Array[_0x188de2(0x552)](_0x1d95ec[_0x188de2(0x3d7)])) return null; return _0x1d95ec = _0x1a69eb(_0x1d95ec, _0xb6fda5, _0x936d55), _0x1d95ec[_0x188de2(0x3d7)] = _0x1d95ec[_0x188de2(0x3d7)][_0x188de2(0xa24)](0x0, _0x289d83), _0x1d95ec[_0x188de2(0x3d7)][_0x188de2(0x2ed)] ? _0x1d95ec : null; } catch (_0x9c385) { return _0x9c385[_0x188de2(0x7d9)] !== _0x188de2(0x28c) && console[_0x188de2(0x7a4)](_0x188de2(0x16d), _0x9c385), null; } } else { _0x556213('好友圈名称不能为空！'); return; } } function _0xd11a9() { const _0x40e2dc = _0x4d95ce; if (_0x40e2dc(0x30b) === 'vFTpk') _0x151c54(); else { const _0x232d58 = document['getElementById'](_0x40e2dc(0x15a)); _0x232d58['innerHTML'] = ''; if (_0x5f49a9[_0x40e2dc(0x535)][_0x40e2dc(0x2ed)] === 0x0) { _0x232d58[_0x40e2dc(0x279)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>'; return; } _0x5f49a9['friendCircles'][_0x40e2dc(0x170)](_0x6b312f => { const _0xb5ff54 = _0x40e2dc, _0x1124fe = _0x5f49a9['userProfiles'][_0xb5ff54(0x7ed)](_0x42a70f => _0x42a70f['id'] === _0x6b312f['boundUserProfileId']) || { 'name': _0xb5ff54(0xaa1) }, _0x4abd96 = document[_0xb5ff54(0x95f)](_0xb5ff54(0x754)); _0x4abd96[_0xb5ff54(0x290)] = 'world-book-item', _0x4abd96[_0xb5ff54(0x814)]['id'] = _0x6b312f['id'], _0x4abd96[_0xb5ff54(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x6b312f[_0xb5ff54(0x7d9)] + _0xb5ff54(0x9f4) + _0x1124fe[_0xb5ff54(0x7d9)] + _0xb5ff54(0x1ae) + _0x6b312f[_0xb5ff54(0x87c)][_0xb5ff54(0x2ed)] + _0xb5ff54(0x441), _0x4abd96[_0xb5ff54(0x458)]('click', () => _0x2f0786(_0x6b312f['id'])), _0x232d58['appendChild'](_0x4abd96); }); } } function _0x419290(_0x234e82 = null) { const _0xa05580 = _0x4d95ce; if ('UHMUU' === _0xa05580(0x71e)) { const _0x15bf93 = document['getElementById'](_0xa05580(0x6bd)), _0x4b7453 = document[_0xa05580(0x374)](_0xa05580(0x184)), _0x36a3cd = document[_0xa05580(0x374)](_0xa05580(0x25b)), _0x5ca74b = document[_0xa05580(0x374)](_0xa05580(0x7b1)), _0x4763b0 = document[_0xa05580(0x374)](_0xa05580(0x6a4)), _0x2a70a7 = document[_0xa05580(0x374)](_0xa05580(0x48e)); _0x5b3b64('friend-circle-edit-bind-user'), _0x36a3cd['innerHTML'] = '', _0x5f49a9[_0xa05580(0x6b0)][_0xa05580(0x170)](_0x1ab21b => { const _0x221958 = _0xa05580, _0x412273 = document[_0x221958(0x95f)](_0x221958(0x754)); _0x412273[_0x221958(0x290)] = _0x221958(0x3d0), _0x412273[_0x221958(0x279)] = _0x221958(0xae3) + _0x1ab21b['id'] + _0x221958(0xab3) + _0x1ab21b['id'] + _0x221958(0x78e) + (_0x1ab21b['avatar'] || _0x28cae8) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x1ab21b['id'] + _0x221958(0x51e) + _0x1ab21b[_0x221958(0x7d9)] + _0x221958(0x138), _0x36a3cd['appendChild'](_0x412273); }); if (_0x234e82) { if (_0xa05580(0x8d3) !== _0xa05580(0x146)) { const _0x33b28c = _0x5f49a9[_0xa05580(0x535)][_0xa05580(0x7ed)](_0x128119 => _0x128119['id'] === _0x234e82); if (!_0x33b28c) return; _0x5ca74b['textContent'] = '编辑好友圈', _0x4763b0[_0xa05580(0x330)] = _0x33b28c['id'], _0x15bf93[_0xa05580(0x330)] = _0x33b28c['name'], _0x4b7453['value'] = _0x33b28c['boundUserProfileId'], _0x2a70a7[_0xa05580(0x2d6)][_0xa05580(0x416)] = _0xa05580(0x888), _0x33b28c[_0xa05580(0x87c)]['forEach'](_0x1fd136 => { const _0x58e7ef = _0xa05580, _0x213eea = _0x36a3cd[_0x58e7ef(0x179)](_0x58e7ef(0x1b2) + _0x1fd136); if (_0x213eea) _0x213eea[_0x58e7ef(0x809)] = !![]; }); } else { const _0x2b17e4 = _0x27d86f[_0xa05580(0x911)](_0x955fd0); _0x2b17e4 && _0x2b17e4['startsWith'](_0xa05580(0xa15)) && _0x49feeb['push'](_0x2b17e4); } } else _0x5ca74b[_0xa05580(0x8e3)] = _0xa05580(0x967), _0x4763b0[_0xa05580(0x330)] = '', _0x15bf93[_0xa05580(0x330)] = '好友圈\x20' + (_0x5f49a9[_0xa05580(0x535)][_0xa05580(0x2ed)] + 0x1), _0x4b7453[_0xa05580(0x330)] = _0x5f49a9['activeUserProfileId'], _0x2a70a7[_0xa05580(0x2d6)][_0xa05580(0x416)] = _0xa05580(0x8b4); _0x53a558('friendCircleEdit', 'friendCircleList'); } else { const _0x4ff496 = (_0x3eb0ba - _0x50b3b5) / (0x3e8 * 0x3c); _0x4ff496 < 0x3c ? _0x2b0774 += _0xa05580(0x642) : _0x1cd48c += _0xa05580(0x770) + _0x174262[_0xa05580(0x261)](_0x4ff496 / 0x3c) + '小时前，生成的内容应该符合这段时间的空白。\x0a'; } } function _0x1d1223() { const _0x367ef1 = _0x4d95ce, _0x21bad2 = document[_0x367ef1(0x374)](_0x367ef1(0x6a4))[_0x367ef1(0x330)], _0x8ee468 = document[_0x367ef1(0x374)](_0x367ef1(0x6bd))['value'][_0x367ef1(0x1c8)](), _0x28dac5 = document[_0x367ef1(0x374)](_0x367ef1(0x184))[_0x367ef1(0x330)], _0x1e9d59 = Array[_0x367ef1(0x423)](document[_0x367ef1(0x410)]('#friend-circle-member-selection\x20input:checked'))['map'](_0x441732 => _0x441732['dataset']['id']); if (!_0x8ee468) { if (_0x367ef1(0x9cd) !== _0x367ef1(0x5ea)) { _0xd5e395('好友圈名称不能为空！'); return; } else throw _0x1c17b9; } if (_0x1e9d59[_0x367ef1(0x2ed)] === 0x0) { if (_0x367ef1(0x24f) === _0x367ef1(0x41e)) _0x5bf107['getElementById'](_0x367ef1(0x4c5) + _0x1e834e + _0x367ef1(0xa39))['style'][_0x367ef1(0x486)] = '', _0x5c9b28[_0x367ef1(0x374)]('char-edit-sprite-' + _0x4a1653 + _0x367ef1(0x729))[_0x367ef1(0x330)] = ''; else { _0xd5e395(_0x367ef1(0x745)); return; } } if (_0x21bad2) { if (_0x367ef1(0x601) === _0x367ef1(0x550)) _0x3af08d += _0x367ef1(0x36e) + _0x26b204['name'] + _0x367ef1(0x306); else { const _0x1a823e = _0x5f49a9[_0x367ef1(0x535)]['find'](_0x183c95 => _0x183c95['id'] === _0x21bad2); _0x1a823e && (_0x367ef1(0xa51) !== _0x367ef1(0x3b2) ? (_0x1a823e['name'] = _0x8ee468, _0x1a823e['boundUserProfileId'] = _0x28dac5, _0x1a823e[_0x367ef1(0x87c)] = _0x1e9d59) : (_0x121837['error'](_0x367ef1(0x907), _0x5c8b47), _0x2a8be8[_0x367ef1(0x7a4)](_0x367ef1(0x54b), _0x8eeba9))); } } else { const _0x55e5fe = { 'id': _0x367ef1(0x7d4) + Date[_0x367ef1(0x780)](), 'name': _0x8ee468, 'boundUserProfileId': _0x28dac5, 'memberCharacterIds': _0x1e9d59, 'posts': [] }; _0x5f49a9[_0x367ef1(0x535)]['push'](_0x55e5fe); } _0x39e4f0(), _0xd5e395(_0x367ef1(0x46e)), _0xd11a9(), _0x53a558(_0x367ef1(0x12b), _0x367ef1(0x26a)); } async function _0x5afbae() { const _0x21000e = _0x4d95ce; if (_0x21000e(0x659) === _0x21000e(0x650)) { _0x333723 = _0x55e54c; let _0x4d9406 = null; if (_0x2ae2be?.[_0x21000e(0x433)] === _0x21000e(0x838)) _0x4d9406 = _0x5513d5(_0x19267e['participantIds'][0x0]); else _0x36d109?.['type'] === _0x21000e(0x24e) && _0x4cb60c && (_0x4d9406 = _0x139641(_0x2d941a)); _0x4d9406?.[_0x21000e(0x7d6)] && (_0x1fef27 = _0x4d9406[_0x21000e(0x7d6)]); } else { const _0x317358 = document['getElementById'](_0x21000e(0x6a4))[_0x21000e(0x330)]; if (!_0x317358) return; const _0x62e1fd = await _0xd56340(_0x21000e(0xae5)); _0x62e1fd && (_0x5f49a9[_0x21000e(0x535)] = _0x5f49a9['friendCircles']['filter'](_0x4f5b99 => _0x4f5b99['id'] !== _0x317358), _0x5f49a9['activeFriendCircleId'] === _0x317358 && (_0x5f49a9[_0x21000e(0x662)] = null), _0x39e4f0(), _0xd5e395('好友圈已删除。'), _0xd11a9(), _0x53a558(_0x21000e(0x12b), _0x21000e(0x26a))); } } function _0x2f0786(_0x13d78f) { const _0x558603 = _0x4d95ce; _0x42254e(); const _0x10dd15 = _0x5f49a9['friendCircles']['find'](_0xf28b95 => _0xf28b95['id'] === _0x13d78f); if (!_0x10dd15) return; _0x5f49a9[_0x558603(0x662)] = _0x13d78f, _0x39e4f0(), document[_0x558603(0x374)](_0x558603(0xac8))[_0x558603(0x8e3)] = _0x10dd15[_0x558603(0x7d9)], _0x4c80e3(), _0x53a558(_0x558603(0xb60), _0x558603(0x12b)), _0x3b48ca(); } function _0x554aff() { const _0x4c173c = _0x4d95ce; if (!_0x5f49a9[_0x4c173c(0x535)] || _0x5f49a9[_0x4c173c(0x535)][_0x4c173c(0x2ed)] === 0x0) { console[_0x4c173c(0x7a4)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x136f63 = _0x5f49a9[_0x4c173c(0x535)][0x0]; if (_0x136f63[_0x4c173c(0x87c)][_0x4c173c(0x2ed)] < 0x2) { if (_0x4c173c(0xa8f) !== _0x4c173c(0xa8f)) _0x2db94b[_0x4c173c(0x984)] = _0x1a229e['createObjectURL'](_0x54efed), _0x17d64d[_0x4c173c(0x2d6)][_0x4c173c(0x164)] = 0x1; else { console[_0x4c173c(0x7a4)](_0x4c173c(0x661) + _0x136f63['name'] + _0x4c173c(0x4b2)); return; } } const _0x5c090f = { 'id': _0x4c173c(0x5f1) + Date[_0x4c173c(0x780)](), 'authorType': _0x4c173c(0x14b), 'authorId': _0x136f63[_0x4c173c(0x87c)][0x0], 'content': _0x4c173c(0x56b), 'timestamp': Date['now'](), 'likes': [_0x136f63['memberCharacterIds'][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x4c173c(0x780)](), 'authorId': _0x136f63['memberCharacterIds'][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x136f63[_0x4c173c(0x251)][_0x4c173c(0x238)](_0x5c090f), _0x39e4f0(), console['log'](_0x4c173c(0x819) + _0x136f63[_0x4c173c(0x7d9)] + _0x4c173c(0x76c)), _0xd5e395(_0x4c173c(0x259)); } window[_0x4d95ce(0xb53)] = _0x554aff; function _0x290139(_0x401068) { const _0x4c7b81 = _0x4d95ce; if (_0x4c7b81(0x67d) !== _0x4c7b81(0x1b6)) return _0x5f49a9[_0x4c7b81(0x4d5)][_0x4c7b81(0x7ed)](_0xa4bbbf => _0xa4bbbf['id'] === _0x401068); else _0x347942 += _0x4c7b81(0x2c0) + _0x27119b[_0x4c7b81(0x551)] + '”。\x0a'; } function _0x5a1a9e(_0x2f8b8b, _0xce8ceb = _0x4d95ce(0x23e)) { const _0x25814e = _0x4d95ce, _0x397c5a = document[_0x25814e(0x374)](_0x25814e(0x6b1)); let _0x3c31c6 = document[_0x25814e(0x374)](_0x25814e(0x380)); _0x2f8b8b ? _0x25814e(0xb25) !== 'PLeEK' ? _0x19201f[_0x25814e(0x4fb)][_0x25814e(0x238)](..._0x2f8d71['originalExpenses']) : (!_0x3c31c6 && (_0x3c31c6 = document['createElement'](_0x25814e(0x754)), _0x3c31c6['id'] = 'feed-loader', _0x397c5a['appendChild'](_0x3c31c6)), _0x3c31c6[_0x25814e(0x279)] = _0x25814e(0x605) + _0xce8ceb + '</span>', _0x3c31c6[_0x25814e(0x2d6)]['display'] = _0x25814e(0x350)) : 'btOpR' === _0x25814e(0x319) ? _0x3c31c6 && (_0x3c31c6[_0x25814e(0x2d6)][_0x25814e(0x416)] = _0x25814e(0x8b4)) : (_0x3c74dc(), _0x48b5b9(![])); } async function _0x5a4704() { const _0x3eb950 = _0x4d95ce, _0x328c1f = _0x5f49a9[_0x3eb950(0x535)]['find'](_0x35cd92 => _0x35cd92['id'] === _0x5f49a9[_0x3eb950(0x662)]); if (!_0x328c1f || _0x5f49a9[_0x3eb950(0x263)]) return; _0x5a1a9e(!![], '好像有动态了...'), _0x5f49a9[_0x3eb950(0x263)] = !![]; try { let _0x241fe3 = Date[_0x3eb950(0x780)](); if (_0x328c1f[_0x3eb950(0x251)] && _0x328c1f['posts'][_0x3eb950(0x2ed)] > 0x0) { if (_0x3eb950(0x1bf) === _0x3eb950(0x1bf)) _0x241fe3 = Math[_0x3eb950(0xacd)](..._0x328c1f[_0x3eb950(0x251)][_0x3eb950(0x190)](_0x67f7bb => _0x67f7bb[_0x3eb950(0x75a)])); else { if (!_0x370489['isArray'](_0xb71eec) || _0x205232['length'] === 0x0) return _0x3eb950(0x3db); return _0x3eb950(0x8f7) + _0x6713f5[_0x3eb950(0x190)]((_0x178685, _0x143b75) => { const _0x54f6fd = _0x3eb950, _0x2ddbe4 = _0x1cfcb5['stringify'](_0x178685[_0x54f6fd(0x6e2)] || [])[_0x54f6fd(0xa38)](/'/g, _0x54f6fd(0x924))[_0x54f6fd(0xa38)](/"/g, _0x54f6fd(0x2fe)), _0x360d0f = _0x178685['contact_name'] || _0x54f6fd(0xb39); return _0x54f6fd(0x8f9) + (_0x143b75 < _0x2d348b[_0x54f6fd(0x2ed)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x54f6fd(0x294) + _0x2ddbe4 + _0x54f6fd(0x7f4) + _0x360d0f + _0x54f6fd(0x3f3) + _0x526cd0 + _0x54f6fd(0x7ac) + _0x360d0f['charAt'](0x0) + _0x54f6fd(0x3e9) + _0x360d0f + _0x54f6fd(0x144) + (_0x178685[_0x54f6fd(0x63d)] || '') + _0x54f6fd(0x313); })[_0x3eb950(0x414)]('') + _0x3eb950(0x9e0); } } const _0x405896 = await _0x48ae17(_0x328c1f); if (!_0x405896 || _0x405896[_0x3eb950(0x2ed)] === 0x0) { _0xd5e395(_0x3eb950(0x396)); return; } const _0x18f7b4 = _0x405896['map'](async (_0x41c10a, _0x4472aa) => { const _0x3365cb = _0x3eb950; _0x5a1a9e(!![], _0x3365cb(0x5da) + (_0x4472aa + 0x1) + _0x3365cb(0x336) + _0x405896['length'] + '\x20条动态...'); const _0x5d7da4 = _0x241fe3 + (_0x4472aa + 0x1) * 0x3c * 0x3e8, _0x39d139 = { 'id': _0x3365cb(0x8f3) + _0x41c10a['authorId'] + '_' + _0x5d7da4, 'authorType': _0x3365cb(0x14b), 'authorId': _0x41c10a['authorId'], 'content': _0x41c10a[_0x3365cb(0x978)], 'timestamp': _0x5d7da4, 'likes': _0x41c10a[_0x3365cb(0x9de)] || [], 'comments': (_0x41c10a[_0x3365cb(0x427)] || [])[_0x3365cb(0x190)]((_0x476b84, _0x3a3b7e) => ({ 'commentId': 'c_' + _0x5d7da4 + '_' + _0x3a3b7e, 'authorId': _0x476b84[_0x3365cb(0x79e)], 'content': _0x476b84[_0x3365cb(0x47e)] })) }; if (_0x41c10a[_0x3365cb(0x758)] === 'music' && _0x41c10a[_0x3365cb(0x76d)] && _0x41c10a['artist']) { if ('RHFnB' !== 'jOcQP') try { const _0x35a60e = await _0x1899f9(_0x41c10a[_0x3365cb(0x76d)], _0x41c10a[_0x3365cb(0x1e1)]); _0x39d139[_0x3365cb(0x433)] = _0x3365cb(0xb60), _0x39d139[_0x3365cb(0x76d)] = _0x41c10a['songName'], _0x39d139['artist'] = _0x41c10a['artist'], _0x39d139['coverUrl'] = _0x35a60e[_0x3365cb(0x6ac)], _0x39d139[_0x3365cb(0x4ca)] = _0x35a60e[_0x3365cb(0x93b)]; } catch (_0x1a5a00) { _0x3365cb(0x7c1) === _0x3365cb(0x7c1) ? (console[_0x3365cb(0x7a4)]('动态中的音乐搜索失败:', _0x1a5a00), _0x39d139[_0x3365cb(0x433)] = _0x3365cb(0x3c5)) : (_0x377713[_0x3365cb(0x7a4)](_0x3365cb(0x443) + _0xcf550c['id'] + '\x20的图片失败:', _0x1d6302), _0x464c9d[_0x3365cb(0x984)] = _0x4749c4[_0x3365cb(0x7d6)] || _0x13ba5e); } else _0x4e4b2b['error']('生成动态回复失败:', _0xe85363), _0x44c152(_0x3365cb(0x688)); } else { if (_0x3365cb(0x33b) !== _0x3365cb(0x33b)) { if (!_0x3e4d26) return []; const _0xc10fa8 = _0x1d2fa0[_0x3365cb(0x77e)]('\x0a'), _0x27ba87 = [], _0x2bd060 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x5aad7c of _0xc10fa8) { const _0xf850a0 = _0x5aad7c[_0x3365cb(0xa55)](_0x2bd060); if (_0xf850a0) { const _0x2d8be4 = _0x590f9d(_0xf850a0[0x1], 0xa), _0x4ca666 = _0x5bddba(_0xf850a0[0x2], 0xa), _0x507c2a = _0x2470cb(_0xf850a0[0x3], 0xa) * (_0xf850a0[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x47f7e7 = _0x2d8be4 * 0x3c + _0x4ca666 + _0x507c2a / 0x3e8, _0x4f8872 = _0x5aad7c[_0x3365cb(0xa38)](_0x2bd060, '')[_0x3365cb(0x1c8)](); _0x4f8872 && _0x27ba87['push']({ 'time': _0x47f7e7, 'text': _0x4f8872 }); } } return _0x27ba87; } else _0x39d139[_0x3365cb(0x433)] = _0x3365cb(0x3c5); } return _0x39d139; }), _0x5ba17a = await Promise[_0x3eb950(0x377)](_0x18f7b4); _0x328c1f[_0x3eb950(0x251)]['push'](..._0x5ba17a), _0x39e4f0(); } catch (_0x1fe033) { console[_0x3eb950(0x7a4)](_0x3eb950(0x668), _0x1fe033), _0xd5e395('生成动态时发生错误:\x20' + _0x1fe033[_0x3eb950(0xb58)]); } finally { _0x4c80e3(), _0x5a1a9e(![]), _0x5f49a9['isGenerating'] = ![]; } } async function _0x48ae17(_0x1a827d) { const _0x313bc9 = _0x4d95ce, _0x4c374d = _0x1a827d['memberCharacterIds'][_0x313bc9(0x190)](_0x44b951 => _0x590c99(_0x44b951))[_0x313bc9(0x8be)](Boolean); if (_0x4c374d[_0x313bc9(0x2ed)] === 0x0) return null; const _0x4f340c = _0x2c2a8e(), _0x1c92f7 = _0x290139(_0x1a827d[_0x313bc9(0x3fc)]) || _0x5f49a9['userProfiles'][0x0], _0x71fc0c = _0x1c92f7 ? _0x313bc9(0x21b) + _0x1c92f7[_0x313bc9(0x7d9)] + _0x313bc9(0x73b) + (_0x1c92f7[_0x313bc9(0x8eb)] || '无') + '\x0a' : '', _0x2b6a3e = _0x4c374d[_0x313bc9(0x190)](_0x49356e => { const _0x5604d9 = _0x313bc9, { omniText: _0x324b61 } = _0x2719e3(_0x49356e['id'], null), _0x51b73b = _0x20b2d5(_0x49356e['id']), _0x6af9bc = _0x49356e[_0x5604d9(0x128)] && _0x49356e[_0x5604d9(0x128)][_0x5604d9(0x2ed)] > 0x0 ? _0x5604d9(0xa49) + _0x49356e[_0x5604d9(0x7d9)] + '的个人专属世界观设定\x0a' + _0x49356e['linkedWorldBookIds'][_0x5604d9(0x190)](_0x4b32bd => _0x5f49a9[_0x5604d9(0x1df)][_0x5604d9(0x7ed)](_0x2de071 => _0x2de071['id'] === _0x4b32bd))['filter'](Boolean)['map'](_0x5488a4 => _0x5604d9(0x6f8) + _0x5488a4[_0x5604d9(0x7d9)] + '\x0a' + _0x5488a4['content'])[_0x5604d9(0x414)]('') : ''; return _0x5604d9(0x409) + _0x49356e[_0x5604d9(0x7d9)] + ',\x20ID:\x20' + _0x49356e['id'] + '\x0a\x20\x20人设:\x20' + _0x49356e[_0x5604d9(0x8eb)] + '\x0a\x20\x20近期记忆:\x0a' + _0x324b61 + '\x0a' + _0x51b73b + '\x0a' + _0x6af9bc; })[_0x313bc9(0x414)]('\x0a\x0a'), _0x3cd359 = Math['floor'](Math[_0x313bc9(0x512)]() * 0x3) + 0x2, _0x3f15d1 = _0x313bc9(0x3b0) + _0x3cd359 + '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a' + _0x2b6a3e + '\x0a' + _0x71fc0c + _0x313bc9(0x53b) + _0x4f340c + _0x313bc9(0xaae) + _0x3cd359 + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0x3cd359 + _0x313bc9(0x49d), _0x391450 = [{ 'role': 'system', 'content': _0x3f15d1 }, { 'role': _0x313bc9(0x384), 'content': _0x313bc9(0x527) }]; _0x391450[_0x313bc9(0x238)]({ 'role': _0x313bc9(0x384), 'content': _0x313bc9(0x9a4) + _0x3cd359 + _0x313bc9(0x8f4) }); try { if ('QKCWW' !== _0x313bc9(0x21f)) { const _0x2f8a1e = _0x1b27b0[_0x313bc9(0x1df)][_0x313bc9(0x7ed)](_0x58877f => _0x58877f['id'] === _0x2cd4c5); if (!_0x2f8a1e) return; _0x308d4b[_0x313bc9(0x374)]('editing-world-book-id')[_0x313bc9(0x330)] = _0x2f8a1e['id'], _0x19e6da[_0x313bc9(0x374)]('world-book-editor-title')[_0x313bc9(0x8e3)] = _0x313bc9(0x705), _0x2f5acf[_0x313bc9(0x374)]('world-book-edit-name')[_0x313bc9(0x330)] = _0x2f8a1e[_0x313bc9(0x7d9)], _0x4981cc[_0x313bc9(0x374)](_0x313bc9(0x349))['value'] = _0x2f8a1e[_0x313bc9(0x47e)]; } else { const _0x23cec2 = await _0x4d0897(_0x391450, { 'json': !![] }), _0x4954b1 = _0x23cec2['match'](/(\[[\s\S]*\])/); if (!_0x4954b1) throw new Error(_0x313bc9(0x4cc)); const _0x198bdf = _0x4954b1[0x1], _0x256599 = JSON[_0x313bc9(0x468)](_0x198bdf); if (!Array['isArray'](_0x256599)) throw new Error(_0x313bc9(0x8e2)); return _0x256599; } } catch (_0x188e73) { return console[_0x313bc9(0x7a4)](_0x313bc9(0x295), _0x188e73), console[_0x313bc9(0x7a4)]('AI返回的原始文本:', _0x188e73[_0x313bc9(0x16f)] || _0x313bc9(0xb2f)), null; } } async function _0x5c761d() { const _0x26a8e4 = _0x4d95ce; if (_0x26a8e4(0x142) === _0x26a8e4(0x142)) { const _0x15c67a = _0x5f49a9[_0x26a8e4(0x535)][_0x26a8e4(0x7ed)](_0x14baba => _0x14baba['id'] === _0x5f49a9[_0x26a8e4(0x662)]); if (!_0x15c67a) return; const _0x31ebab = await _0xd56340(_0x26a8e4(0x4f7) + _0x15c67a['name'] + _0x26a8e4(0x97a)); _0x31ebab && (_0x15c67a[_0x26a8e4(0x251)] = [], _0x39e4f0(), _0x4c80e3(), _0xd5e395(_0x26a8e4(0x916))); } else _0x4d091a(![]); } function _0x4c80e3() { const _0x24db75 = _0x4d95ce, _0x3377ae = document[_0x24db75(0x374)](_0x24db75(0x7bd)), _0x53f7bb = _0x5f49a9[_0x24db75(0x535)][_0x24db75(0x7ed)](_0x4aa8ee => _0x4aa8ee['id'] === _0x5f49a9[_0x24db75(0x662)]); if (!_0x53f7bb) { if ('WWoVh' === _0x24db75(0x194)) _0x5937e5(); else { _0x3377ae[_0x24db75(0x279)] = _0x24db75(0x7bf); return; } } if (!_0x53f7bb[_0x24db75(0x251)] || _0x53f7bb[_0x24db75(0x251)][_0x24db75(0x2ed)] === 0x0) { _0x3377ae[_0x24db75(0x279)] = _0x24db75(0x2c5); return; } _0x3377ae[_0x24db75(0x279)] = ''; const _0x6549cd = [..._0x53f7bb['posts']][_0x24db75(0x43a)]((_0x35742b, _0x58d93e) => _0x58d93e[_0x24db75(0x75a)] - _0x35742b[_0x24db75(0x75a)]); _0x6549cd[_0x24db75(0x170)](_0x1d157b => { const _0x4e5fa1 = _0x24db75, _0x220b47 = document[_0x4e5fa1(0x95f)]('div'); _0x220b47['className'] = 'music-post'; let _0x30c47e = '未知', _0x1e4455 = _0x28cae8; if (_0x1d157b[_0x4e5fa1(0x75e)] === 'user') { const _0x7cf059 = _0x290139(_0x1d157b[_0x4e5fa1(0x79e)]); if (_0x7cf059) { if ('UCZtK' !== 'LuSoy') _0x30c47e = _0x7cf059[_0x4e5fa1(0x7d9)], _0x1e4455 = _0x7cf059[_0x4e5fa1(0x7d6)]; else { const _0x2c7e90 = _0x10188e[_0x4e5fa1(0x128)]?.[_0x4e5fa1(0x454)](_0x2f9b55['id']), _0x4d86dd = _0xfea8b6[_0x4e5fa1(0x95f)]('label'); _0x4d86dd[_0x4e5fa1(0x279)] = _0x4e5fa1(0xb07) + _0x38881d['id'] + '\x22\x20' + (_0x2c7e90 ? _0x4e5fa1(0x809) : '') + '>\x20' + _0x3358f4[_0x4e5fa1(0x7d9)], _0x490ef2['appendChild'](_0x4d86dd); } } } else { const _0x5f25a6 = _0x590c99(_0x1d157b[_0x4e5fa1(0x79e)]); _0x5f25a6 && (_0x4e5fa1(0x6e7) !== _0x4e5fa1(0x775) ? (_0x30c47e = _0x5f25a6[_0x4e5fa1(0x7d9)], _0x1e4455 = _0x5f25a6[_0x4e5fa1(0x7d6)]) : _0x5c5c8e !== _0x3493b8['querySelector'](_0x4e5fa1(0x6f4)) && (_0x51c13b['textContent'] = '▶')); } const _0x3d91c = _0x4e5fa1(0x1be) + _0x1e4455 + _0x4e5fa1(0x325) + _0x30c47e + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x423d9c = _0x4e5fa1(0x2fb) + _0x1d157b[_0x4e5fa1(0x47e)] + '</p>'; let _0x21244b = ''; if (_0x1d157b[_0x4e5fa1(0xad0)] || _0x1d157b['imageId']) { const _0x54df4b = 'post-img-' + _0x1d157b['id']; _0x21244b = _0x4e5fa1(0x57b) + _0x54df4b + _0x4e5fa1(0x59c), setTimeout(() => { const _0x259a94 = _0x4e5fa1, _0x31bfae = document['getElementById'](_0x54df4b); if (!_0x31bfae) return; if (_0x1d157b[_0x259a94(0xad0)]) 'czvNc' === 'SiKkc' ? (_0x38ce71[_0x259a94(0x2d6)][_0x259a94(0x6ea)] = _0x157520[_0x259a94(0x6ea)] + '%', _0x84d804['style']['left'] = _0x30f1ac['left'] + '%') : _0x31bfae[_0x259a94(0x984)] = _0x1d157b[_0x259a94(0xad0)]; else _0x1d157b[_0x259a94(0x3a7)] && ('WtNKg' === 'WtNKg' ? _0x15e0c2(_0x1d157b[_0x259a94(0x3a7)])[_0x259a94(0x8a2)](_0x37364b => { const _0x46a397 = _0x259a94; if (_0x37364b) { const _0x59aadc = URL[_0x46a397(0x7dc)](_0x37364b); _0x31bfae[_0x46a397(0x984)] = _0x59aadc, _0x31bfae['onload'] = () => URL['revokeObjectURL'](_0x59aadc); } }) : _0x337843 = _0x3e2a3e[_0x259a94(0xad0)]); }, 0x0); } let _0x43e25b = ''; _0x1d157b['type'] === 'music' && _0x1d157b[_0x4e5fa1(0x76d)] && (_0x43e25b = '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22' + _0x1d157b['id'] + _0x4e5fa1(0x81f) + (_0x1d157b['coverUrl'] || _0x28cae8) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x1d157b[_0x4e5fa1(0x76d)] + _0x4e5fa1(0x41b) + _0x1d157b['artist'] + _0x4e5fa1(0xadf) + (_0x1d157b['playableUrl'] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'); const _0x5d7ef0 = '<div\x20class=\x22post-timestamp\x22>' + new Date(_0x1d157b[_0x4e5fa1(0x75a)])[_0x4e5fa1(0x591)]('zh-CN') + _0x4e5fa1(0x9e0); let _0x36f402 = ''; if (_0x1d157b[_0x4e5fa1(0x9de)] && _0x1d157b[_0x4e5fa1(0x9de)][_0x4e5fa1(0x2ed)] > 0x0 || _0x1d157b[_0x4e5fa1(0x427)] && _0x1d157b[_0x4e5fa1(0x427)][_0x4e5fa1(0x2ed)] > 0x0) { let _0xcf027f = ''; if (_0x1d157b['likes'] && _0x1d157b['likes'][_0x4e5fa1(0x2ed)] > 0x0) { const _0x21c155 = _0x1d157b[_0x4e5fa1(0x9de)]['map'](_0x2892f8 => _0x590c99(_0x2892f8)?.['name'] || '未知')[_0x4e5fa1(0x414)]('、'), _0x415ecd = _0x4e5fa1(0x587); _0xcf027f = _0x4e5fa1(0x8d5) + _0x415ecd + '\x20' + _0x21c155 + _0x4e5fa1(0x9e0); } let _0x105451 = ''; if (_0x1d157b[_0x4e5fa1(0x427)] && _0x1d157b[_0x4e5fa1(0x427)][_0x4e5fa1(0x2ed)] > 0x0) { if (_0x4e5fa1(0x479) !== _0x4e5fa1(0x2e1)) { const _0x38a344 = _0x1d157b[_0x4e5fa1(0x427)][_0x4e5fa1(0x190)](_0x3afc45 => { const _0x3a4285 = _0x4e5fa1, _0x370c6a = _0x590c99(_0x3afc45[_0x3a4285(0x79e)])?.[_0x3a4285(0x7d9)] || '未知'; return '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>' + _0x370c6a + _0x3a4285(0x9f2) + _0x3afc45[_0x3a4285(0x47e)] + _0x3a4285(0x9e0); })[_0x4e5fa1(0x414)](''); _0x105451 = _0x4e5fa1(0xa3e) + _0x38a344 + _0x4e5fa1(0x9e0); } else _0x468ffc[_0x4e5fa1(0x2d6)][_0x4e5fa1(0x416)] = _0x4e5fa1(0x8b4), _0x4a7324['style'][_0x4e5fa1(0x416)] = _0x4e5fa1(0x888); } _0x36f402 = _0x4e5fa1(0x88c) + _0xcf027f + _0x4e5fa1(0x6fc) + _0x105451 + _0x4e5fa1(0x13c); } const _0x1e8bef = '<div\x20class=\x22post-body\x22>' + _0x423d9c + _0x21244b + _0x43e25b + '</div>'; _0x220b47[_0x4e5fa1(0x279)] = _0x3d91c + _0x1e8bef + _0x5d7ef0 + _0x36f402; if (_0x1d157b['type'] === _0x4e5fa1(0xb60) && _0x1d157b['playableUrl']) { if ('UaIVs' === _0x4e5fa1(0x877)) { const _0x3c5ba6 = _0x1a394f['value']; let _0x153f9b = _0x3c5ba6[_0x4e5fa1(0xa38)](/\.bubble\.sent/g, _0x4e5fa1(0x273))[_0x4e5fa1(0xa38)](/\.bubble\.received/g, '#bubble-preview-ai'); _0x343a7e[_0x4e5fa1(0x279)] = _0x153f9b; } else { const _0x5d8ca2 = _0x220b47[_0x4e5fa1(0x179)]('.music-post-song-card'); _0x5d8ca2 && _0x5d8ca2[_0x4e5fa1(0x458)](_0x4e5fa1(0x173), function () { const _0x1c8e04 = _0x4e5fa1; if (_0x1c8e04(0xb27) === 'uctTU') { if (!_0x1d5a1d[_0x1c8e04(0x535)] || _0x3641ab[_0x1c8e04(0x535)][_0x1c8e04(0x2ed)] === 0x0) { _0x2cabed[_0x1c8e04(0x7a4)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x486391 = _0x46cdc6['friendCircles'][0x0]; if (_0x486391['memberCharacterIds'][_0x1c8e04(0x2ed)] < 0x2) { _0x4cf6da[_0x1c8e04(0x7a4)](_0x1c8e04(0x661) + _0x486391['name'] + _0x1c8e04(0x4b2)); return; } const _0x5aeb86 = { 'id': 'test_post_' + _0x58e462['now'](), 'authorType': 'character', 'authorId': _0x486391['memberCharacterIds'][0x0], 'content': _0x1c8e04(0x56b), 'timestamp': _0x5ac589['now'](), 'likes': [_0x486391[_0x1c8e04(0x87c)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x567b13[_0x1c8e04(0x780)](), 'authorId': _0x486391[_0x1c8e04(0x87c)][0x1], 'content': _0x1c8e04(0x7f6) }] }; _0x486391[_0x1c8e04(0x251)][_0x1c8e04(0x238)](_0x5aeb86), _0x17443a(), _0xaf33ba[_0x1c8e04(0x6e2)](_0x1c8e04(0x819) + _0x486391[_0x1c8e04(0x7d9)] + _0x1c8e04(0x76c)), _0x516a6a(_0x1c8e04(0x259)); } else { const _0x55141a = { 'id': _0x1d157b['id'], 'url': _0x1d157b[_0x1c8e04(0x4ca)] }; _0x48fadd(this, _0x55141a); } }); } } _0x3377ae['appendChild'](_0x220b47); }); } document[_0x4d95ce(0x374)](_0x4d95ce(0x4b8))['addEventListener']('click', _0x5c761d), document['getElementById']('refresh-feed-button')['addEventListener'](_0x4d95ce(0x173), _0x5a4704), document[_0x4d95ce(0x374)](_0x4d95ce(0x237))['addEventListener'](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), 'friendCircleList')), document[_0x4d95ce(0x374)](_0x4d95ce(0xabd))['addEventListener'](_0x4d95ce(0x173), () => _0x419290()), document[_0x4d95ce(0x374)](_0x4d95ce(0x5a5))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x12b), _0x4d95ce(0x26a))), document[_0x4d95ce(0x374)](_0x4d95ce(0x2dd))[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x1d1223), document[_0x4d95ce(0x374)](_0x4d95ce(0x48e))[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x5afbae), document[_0x4d95ce(0x374)](_0x4d95ce(0x1c7))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { _0xd11a9(), _0x53a558('friendCircleList', 'music'); }), document[_0x4d95ce(0x374)](_0x4d95ce(0xb61))[_0x4d95ce(0x458)]('click', () => { const _0x2d1b1c = _0x4d95ce; if ('bZEaM' === _0x2d1b1c(0x7b8)) _0x5f49a9[_0x2d1b1c(0x662)] && _0x419290(_0x5f49a9[_0x2d1b1c(0x662)]); else { _0xefee49[_0x2d1b1c(0x330)] = ''; if (_0x42c4ae) _0x1059f8[_0x2d1b1c(0x2d6)][_0x2d1b1c(0x486)] = ''; } }), document[_0x4d95ce(0x374)](_0x4d95ce(0x9bd))[_0x4d95ce(0x458)](_0x4d95ce(0x173), async () => { const _0x38e5bd = _0x4d95ce, _0x1be699 = _0x5f49a9[_0x38e5bd(0x535)]['find'](_0x39a4a7 => _0x39a4a7['id'] === _0x5f49a9[_0x38e5bd(0x662)]); if (!_0x1be699 || _0x5f49a9[_0x38e5bd(0x263)]) return; const _0x64d615 = _0x1be699[_0x38e5bd(0x3fc)], _0x18dad6 = _0x5f49a9[_0x38e5bd(0x4d5)][_0x38e5bd(0x7ed)](_0x3b58ef => _0x3b58ef['id'] === _0x64d615); if (!_0x18dad6) { _0xd5e395('错误：找不到此好友圈绑定的用户！'); return; } const _0x217217 = document['getElementById'](_0x38e5bd(0x4d3))[_0x38e5bd(0x330)][_0x38e5bd(0x1c8)](), _0x34ac42 = _0x5f49a9['pendingPostAttachments'][_0x38e5bd(0xad0)], _0x27ace6 = _0x5f49a9[_0x38e5bd(0x80a)][_0x38e5bd(0xb60)], _0xd284e2 = _0x5f49a9[_0x38e5bd(0x80a)][_0x38e5bd(0x3a7)]; if (!_0x217217 && !_0x34ac42 && !_0x27ace6) { if ('CZzgg' === 'CZzgg') { _0xd5e395('总得说点什么吧？'); return; } else _0x139272[_0x38e5bd(0x984)] && (_0x281f9d[_0x38e5bd(0xab7)] ? _0x220477[_0x38e5bd(0x792)]() : _0xd4eb4a[_0x38e5bd(0x51a)]()); } const _0x5642b4 = { 'id': _0x38e5bd(0x892) + Date['now'](), 'authorType': 'user', 'authorId': _0x18dad6['id'], 'content': _0x217217, 'timestamp': Date['now'](), 'likes': [], 'comments': [] }; if (_0xd284e2) { if (_0x38e5bd(0x9e7) === _0x38e5bd(0x9e7)) _0x5642b4['imageId'] = _0xd284e2; else { const _0xfae5f1 = _0x36fb0d[_0x38e5bd(0x95f)](_0x38e5bd(0x754)); _0xfae5f1['className'] = _0x38e5bd(0xa52); const _0x41a4a1 = _0x531d11[_0x38e5bd(0x6ac)] ? _0x3652d7[_0x38e5bd(0x7dc)](_0x4e0e3['cover']) : _0x214b52; _0xfae5f1[_0x38e5bd(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x41a4a1 + _0x38e5bd(0x786) + (_0x4c910b[_0x38e5bd(0x1cf)][_0x38e5bd(0x746)] || _0x38e5bd(0x8a9)) + _0x38e5bd(0x2ef) + (_0x5bc925[_0x38e5bd(0x1cf)]['歌手'] || _0x38e5bd(0x6c0)) + _0x38e5bd(0x2e7), _0xfae5f1[_0x38e5bd(0x458)]('click', () => { _0x46b210(_0x445e76); }), _0x175ee2[_0x38e5bd(0x962)](_0xfae5f1); } } else _0x34ac42 && (_0x5642b4['image'] = _0x34ac42); if (_0x27ace6) { if (_0x38e5bd(0x4ef) !== 'WnbKe') { const _0x34c90f = _0x1fb87e(_0x14e023[_0x38e5bd(0x699)] || _0x559365[_0x38e5bd(0x5b0)]); _0x5ddc0d = _0x34c90f?.['name'] || '角色', _0x4d5370 = _0x38e5bd(0xa2c); } else _0x5642b4[_0x38e5bd(0x433)] = _0x38e5bd(0xb60), Object[_0x38e5bd(0x866)](_0x5642b4, _0x27ace6); } else _0x5642b4[_0x38e5bd(0x433)] = _0x38e5bd(0x3c5); _0x1be699['posts'][_0x38e5bd(0x238)](_0x5642b4), _0x39e4f0(), _0x4c80e3(), document[_0x38e5bd(0x374)](_0x38e5bd(0x4d3))[_0x38e5bd(0x330)] = '', _0x5f49a9['pendingPostAttachments'][_0x38e5bd(0xad0)] = null, _0x5f49a9[_0x38e5bd(0x80a)][_0x38e5bd(0xb60)] = null, _0x5f49a9['pendingPostAttachments'][_0x38e5bd(0x3a7)] = null, _0x1ce687(), _0x1007a0(_0x5642b4); }), document['getElementById'](_0x4d95ce(0x867))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x1b1924 = _0x4d95ce; document[_0x1b1924(0x374)](_0x1b1924(0x8b1))['click'](); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x8b1))['addEventListener'](_0x4d95ce(0x563), async _0x480fd9 => { const _0x429da7 = _0x4d95ce; if (_0x429da7(0x6e4) !== _0x429da7(0x6e4)) _0x1d9d71(![]); else { const _0x35059b = _0x480fd9['target'][_0x429da7(0x760)][0x0]; if (!_0x35059b) return; try { const _0x23ce00 = await _0x779604(_0x35059b, 0x320, 0.8, !![]), _0x1cfea5 = _0x429da7(0x8ad) + Date[_0x429da7(0x780)](); await _0x5a0c6c(_0x1cfea5, _0x23ce00), _0x5f49a9[_0x429da7(0x80a)][_0x429da7(0x3a7)] = _0x1cfea5, _0x5f49a9['pendingPostAttachments'][_0x429da7(0xad0)] = null, _0x5f49a9['pendingPostAttachments'][_0x429da7(0xb60)] = null, _0x1ce687(); } catch (_0x5f0451) { _0xd5e395(_0x429da7(0x3b6) + _0x5f0451[_0x429da7(0xb58)]); } _0x480fd9[_0x429da7(0x89a)][_0x429da7(0x330)] = ''; } }), document[_0x4d95ce(0x374)]('user-post-music-button')[_0x4d95ce(0x458)](_0x4d95ce(0x173), async () => { const _0x245575 = _0x4d95ce; if (_0x245575(0x865) === 'wpTfJ') { const _0x4fbfdd = await _0x4fe1a1(); if (!_0x4fbfdd) return; _0xd5e395(_0x245575(0xb38)); try { const _0x21fe54 = await _0x1899f9(_0x4fbfdd[_0x245575(0x76d)], _0x4fbfdd['artist']); _0x5f49a9['pendingPostAttachments'][_0x245575(0xb60)] = { 'songName': _0x4fbfdd[_0x245575(0x76d)], 'artist': _0x4fbfdd[_0x245575(0x1e1)], 'coverUrl': _0x21fe54[_0x245575(0x6ac)], 'playableUrl': _0x21fe54[_0x245575(0x93b)] }, _0x5f49a9[_0x245575(0x80a)][_0x245575(0xad0)] = null, _0x1ce687(); } catch (_0x5dd2e9) { _0xd5e395(_0x245575(0x45a) + _0x5dd2e9[_0x245575(0xb58)]); } } else _0x9e8eff[_0x245575(0x984)] = _0x8f658d[_0x245575(0x7dc)](_0x1209b1), _0x63b38c[_0x245575(0x2d6)][_0x245575(0x416)] = 'block'; }); function _0x5e82aa() { const _0xb8e84a = _0x4d95ce, _0x142ddb = new Date(), _0x5ed471 = document[_0xb8e84a(0x374)](_0xb8e84a(0x4e8)), _0x1abb08 = document[_0xb8e84a(0x374)](_0xb8e84a(0x712)); if (_0x5ed471 && _0x1abb08) { if ('qROuv' !== 'pThcV') { const _0x567a13 = String(_0x142ddb[_0xb8e84a(0x57a)]())[_0xb8e84a(0x159)](0x2, '0'), _0x3a74ff = String(_0x142ddb['getMinutes']())[_0xb8e84a(0x159)](0x2, '0'); _0x5ed471[_0xb8e84a(0x8e3)] = _0x567a13 + ':' + _0x3a74ff; const _0x52c29c = _0x142ddb[_0xb8e84a(0xa47)]() + 0x1, _0xa48f0e = _0x142ddb['getDate'](), _0x46ee4a = [_0xb8e84a(0x3bc), _0xb8e84a(0xa03), _0xb8e84a(0xabe), _0xb8e84a(0x6f3), _0xb8e84a(0x345), _0xb8e84a(0x3f8), _0xb8e84a(0x1e8)][_0x142ddb[_0xb8e84a(0x76e)]()]; _0x1abb08['textContent'] = _0x52c29c + '月' + _0xa48f0e + '日\x20' + _0x46ee4a; } else _0x32eb8c[_0xb8e84a(0x6a1)] = _0x954ab7[_0xb8e84a(0x6a1)], _0x18ee80[_0xb8e84a(0x6e2)](_0xb8e84a(0x900)); } } function _0x2299ef(_0x597ae4) { const _0x4ff81a = _0x4d95ce; if (_0x4ff81a(0x140) !== 'rTRXe') { const _0x61d5bf = _0xe4aad0 === _0xda9a2e ? '>>\x20' : ''; return '' + _0x61d5bf + _0x5b1d00[_0x4ff81a(0x3c5)]; } else { if (!_0x597ae4) return ''; const _0x34de67 = new Date(_0x597ae4), _0x39df05 = String(_0x34de67['getHours']())['padStart'](0x2, '0'), _0x22a2ac = String(_0x34de67[_0x4ff81a(0xaaa)]())['padStart'](0x2, '0'); return _0x39df05 + ':' + _0x22a2ac; } } function _0x2c2a8e() { const _0x5e7782 = _0x4d95ce, _0x1e148c = _0x5f49a9[_0x5e7782(0x535)][_0x5e7782(0x7ed)](_0x3e9bfe => _0x3e9bfe['id'] === _0x5f49a9['activeFriendCircleId']), _0x3fca23 = _0x1e148c ? _0x1e148c['posts'] : []; if (!_0x3fca23 || _0x3fca23[_0x5e7782(0x2ed)] === 0x0) return ''; const _0xb792a7 = _0x3fca23['slice'](0x0, 0x5), _0x599d21 = _0xb792a7[_0x5e7782(0x190)](_0xd35e7c => { const _0x2bcdc8 = _0x5e7782; if (_0x2bcdc8(0x695) !== _0x2bcdc8(0x695)) { const _0x4507db = new _0x35ca27(); _0x4507db['onloadend'] = () => _0xec10ee(_0x4507db[_0x2bcdc8(0x78a)]), _0x4507db['onerror'] = _0x9e5357, _0x4507db['readAsDataURL'](_0x43702e); } else { const _0xb39d31 = _0x590c99(_0xd35e7c['authorId']) || { 'name': '未知' }; let _0x415ff0 = _0x2bcdc8(0x739) + _0xb39d31[_0x2bcdc8(0x7d9)] + _0x2bcdc8(0x933) + (_0xd35e7c[_0x2bcdc8(0xaaf)] || _0xd35e7c[_0x2bcdc8(0x47e)]) + '”'; return _0xd35e7c['type'] === _0x2bcdc8(0xb60) && (_0x2bcdc8(0x872) !== 'vwapL' ? _0x1a4bfc(_0x4a121d['id']) : _0x415ff0 += _0x2bcdc8(0x2bd) + _0xd35e7c[_0x2bcdc8(0x76d)] + _0x2bcdc8(0xa43) + _0xd35e7c['artist'] + ')'), _0x415ff0; } }); return _0x5e7782(0x981) + _0x599d21[_0x5e7782(0x414)]('\x0a'); } function _0x20b2d5(_0x2bea07) { const _0x17074c = _0x4d95ce, _0xdb6359 = _0x5f49a9['userProfiles'][_0x17074c(0x7ed)](_0xbfc489 => _0xbfc489['id'] === _0x5f49a9['activeUserProfileId']) || { 'name': '你' }, _0x400f38 = _0x5f49a9[_0x17074c(0x788)][_0x17074c(0x7ed)](_0x2b7b25 => _0x2b7b25[_0x17074c(0x148)] === _0x2bea07); if (!_0x400f38 || !_0x400f38['entries'] || _0x400f38[_0x17074c(0x4f1)][_0x17074c(0x2ed)] === 0x0) return ''; const _0x142cbf = _0x400f38[_0x17074c(0x4f1)]['slice'](-0x8), _0x1e8a76 = _0x142cbf[_0x17074c(0x190)](_0x3def73 => { const _0x470060 = _0x17074c, _0x45b24d = _0x3def73[_0x470060(0x17b)] === 'user' ? _0xdb6359[_0x470060(0x7d9)] : _0x590c99(_0x3def73['author'])['name']; return _0x470060(0x260) + new Date(_0x3def73[_0x470060(0x75a)])[_0x470060(0x8c4)]() + ']\x20' + _0x45b24d + _0x470060(0x59d) + _0x3def73[_0x470060(0x47e)]; })[_0x17074c(0x414)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0xdb6359['name'] + _0x17074c(0xb2d) + _0x1e8a76; } function _0x395fb3() { const _0x1d3fcb = _0x4d95ce, _0x2731f9 = document['getElementById'](_0x1d3fcb(0x8ab)), _0x2bffdb = _0x5f49a9['preferences'][_0x1d3fcb(0x172)]; _0x2bffdb ? (_0x2731f9[_0x1d3fcb(0x2d6)]['backgroundImage'] = _0x1d3fcb(0x7aa) + _0x2bffdb + ')', _0x2731f9[_0x1d3fcb(0x2d6)][_0x1d3fcb(0x59a)] = _0x1d3fcb(0x6ac), _0x2731f9[_0x1d3fcb(0x2d6)][_0x1d3fcb(0xa2e)] = _0x1d3fcb(0x634), _0x2731f9[_0x1d3fcb(0x2d6)][_0x1d3fcb(0x95e)] = 'white', _0x2731f9['querySelectorAll']('.widget-info\x20>\x20div')['forEach'](_0x4e0851 => { const _0x1a11c8 = _0x1d3fcb; _0x4e0851[_0x1a11c8(0x2d6)]['textShadow'] = _0x1a11c8(0x637); })) : _0x1d3fcb(0x1d7) === _0x1d3fcb(0x1d7) ? (_0x2731f9['style'][_0x1d3fcb(0x486)] = '', _0x2731f9[_0x1d3fcb(0x2d6)]['color'] = '', _0x2731f9[_0x1d3fcb(0x410)](_0x1d3fcb(0xae1))[_0x1d3fcb(0x170)](_0x1d86b4 => { const _0x244783 = _0x1d3fcb; _0x244783(0x92d) !== _0x244783(0x941) ? _0x1d86b4['style'][_0x244783(0x614)] = '' : _0x3f17f7 = _0x244783(0x842) + _0x47bc2d + _0x244783(0x569); })) : (_0x21f143[_0x1d3fcb(0x815)] = ![], _0x2b1e5f[_0x1d3fcb(0x8e3)] = '获取'); } const _0x3f943d = document[_0x4d95ce(0x374)](_0x4d95ce(0x97f)), _0x263cf9 = document['getElementById'](_0x4d95ce(0x693)); _0x3f943d[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x1aa2c1 = _0x4d95ce; _0xd11a9(), _0x53a558(_0x1aa2c1(0x12b), _0x1aa2c1(0x529)); }), _0x263cf9[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x4d4343 = _0x4d95ce; if (_0x4d4343(0x6e9) === _0x4d4343(0x6e9)) _0x46c9c2(), _0x53a558(_0x4d4343(0x9da), _0x4d4343(0x529)); else { if (!_0x202336[_0x4d4343(0x552)](_0x3d4f20)) return '<p>格式错误</p>'; if (_0x5e2fa6['length'] === 0x0) return _0x4d4343(0x80e); return _0x46d1c1[_0x4d4343(0x43a)]((_0x4aeb6c, _0x49b026) => new _0x165b58(_0x49b026[_0x4d4343(0x75a)]) - new _0x5e51ef(_0x4aeb6c[_0x4d4343(0x75a)])), _0x4d4343(0xa6f) + _0xcf6f12['map'](_0x1ecadf => _0x4d4343(0x2e3) + (_0x1ecadf[_0x4d4343(0x528)] || '未知地点') + _0x4d4343(0x8fb) + (_0x1ecadf[_0x4d4343(0x2b0)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>' + (_0x1ecadf[_0x4d4343(0x75a)] || '') + _0x4d4343(0x2b9))[_0x4d4343(0x414)]('') + '</div>'; } }), document[_0x4d95ce(0x374)](_0x4d95ce(0x7d5))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x4c98af = _0x4d95ce; _0x53a558(_0x4c98af(0x529), 'meetingList'); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x203))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x104414 = _0x4d95ce; if (_0x104414(0x85e) !== _0x104414(0x85e)) { const _0x539d95 = _0x1a3339[_0x104414(0x410)]('.typing-indicator'); _0x539d95[_0x104414(0x170)](_0x1b12b5 => _0x1b12b5[_0x104414(0x31f)]()); } else { if (_0x508474) clearInterval(_0x508474); _0x508474 = null, _0x5f49a9[_0x104414(0x766)] = [], _0x5f49a9[_0x104414(0x5b0)] = null, document[_0x104414(0x374)]('galgame-sprite-adjust-ui')['style'][_0x104414(0x416)] = _0x104414(0x8b4), _0x5f49a9[_0x104414(0x824)] = null, _0x39e4f0(), _0x53a558(_0x104414(0x9da), _0x104414(0x6a3)); } }); const _0x261f73 = document[_0x4d95ce(0x374)](_0x4d95ce(0x561)), _0x2df3b2 = document[_0x4d95ce(0x374)](_0x4d95ce(0x400)); _0x2df3b2[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x4b0ddc = _0x4d95ce, _0x444455 = _0x261f73['value'][_0x4b0ddc(0x1c8)](); _0x444455 && (_0x474139(_0x444455), _0x261f73[_0x4b0ddc(0x330)] = '', setTimeout(_0x4f2db6, 0x64)); }); function _0x48fadd(_0xe27052, _0x4ff047) { const _0x35cbb5 = _0x4d95ce; if (_0x35cbb5(0x462) !== _0x35cbb5(0x462)) { if (_0x39299c[_0x35cbb5(0x552)](_0x26d112) && _0x1cfa39[_0x35cbb5(0x552)](_0x36f85d)) { const _0x56ab9c = _0x4bb31e[_0x35cbb5(0x932)](_0x931a69); _0x280398 = _0x1e5d5a[_0x35cbb5(0x795)](_0x56ab9c), _0x23f163['log'](_0x35cbb5(0x28a)); } else _0x2e3f36 = _0x5cb840['stringify'](_0x25c40a); } else { const _0x276d19 = document[_0x35cbb5(0x374)]('audio-player'), _0x26964a = document[_0x35cbb5(0x410)]('.music-post-play-icon,\x20.music-share-play-icon'); _0x26964a['forEach'](_0x13ad06 => { const _0x2023d8 = _0x35cbb5; if (_0x2023d8(0x747) === _0x2023d8(0x747)) _0x13ad06 !== _0xe27052[_0x2023d8(0x179)]('.music-post-play-icon,\x20.music-share-play-icon') && (_0x13ad06[_0x2023d8(0x8e3)] = '▶'); else { _0x391a26[_0x2023d8(0x7a4)](_0x2023d8(0x791)); return; } }); if (_0x276d19[_0x35cbb5(0x984)] === _0x4ff047['url'] && !_0x276d19[_0x35cbb5(0xab7)]) { if (_0x35cbb5(0x45e) !== _0x35cbb5(0xa7f)) _0x276d19[_0x35cbb5(0x51a)](), _0xe27052[_0x35cbb5(0x179)](_0x35cbb5(0x6f4))[_0x35cbb5(0x8e3)] = '▶'; else { const _0x35dc49 = _0x1eec0f[_0x35cbb5(0x468)](_0x44a707); if (_0x4d0e33['isArray'](_0x35dc49) && _0x35dc49[_0x35cbb5(0x2ed)] > 0x0) { const _0x4cbf9a = _0x35dc49['map'](_0xe146c8 => new _0x9e334c(_0xe146c8[_0x35cbb5(0x75a)] || _0xe146c8[_0x35cbb5(0x576)]))[_0x35cbb5(0x8be)](_0x50dd34 => !_0x1ae747(_0x50dd34)); _0x4cbf9a[_0x35cbb5(0x2ed)] > 0x0 && (_0x40e88 = new _0x5e3d66(_0x43bf54[_0x35cbb5(0xacd)][_0x35cbb5(0x8b5)](null, _0x4cbf9a)), _0x2d269b = _0x33451e[_0x35cbb5(0x591)](_0x35cbb5(0x983), { 'dateStyle': _0x35cbb5(0x95a), 'timeStyle': 'short' })); } } } else _0x276d19[_0x35cbb5(0x984)] = _0x4ff047[_0x35cbb5(0x93b)], _0x276d19[_0x35cbb5(0x792)](), _0xe27052[_0x35cbb5(0x179)](_0x35cbb5(0x6f4))[_0x35cbb5(0x8e3)] = '❚❚'; } } const _0x2d64f9 = document['getElementById']('music-player-bar'); async function _0x35ef67(_0x119ddb) { const _0x3c0ded = _0x4d95ce; if (!_0x119ddb || !_0x119ddb[_0x3c0ded(0x93c)]('http')) return ![]; return new Promise(_0x2f71a8 => { const _0x20a9ee = _0x3c0ded, _0x517c0d = document[_0x20a9ee(0x95f)](_0x20a9ee(0x9f6)); _0x517c0d['src'] = _0x119ddb; const _0x432ff4 = setTimeout(() => { _0x23ce48(), _0x2f71a8(![]); }, 0xbb8), _0x23ce48 = () => { const _0x259ba2 = _0x20a9ee; if ('UestX' !== 'UestX') { _0x3fd769['id'] === _0x200ea8['activeChatId'] && (_0x4f95a(), _0x3ce7b9['conversationHistory'] = [], _0x2375cf()); try { _0x159498[_0x259ba2(0x5ed)](_0x259ba2(0x39b) + _0x493fc0['id']), _0x2165c4(_0x259ba2(0x632) + _0x59906f['name'] + '\x22\x20的聊天记录已清空。'); } catch (_0x596508) { _0x389df4[_0x259ba2(0x7a4)](_0x259ba2(0x3ad) + _0x365e40['id'], _0x596508), _0x2d6f74(_0x259ba2(0x38a)); } } else clearTimeout(_0x432ff4), _0x517c0d['removeEventListener'](_0x259ba2(0x2ff), _0x25b369), _0x517c0d[_0x259ba2(0x188)](_0x259ba2(0x7a4), _0x1d1784), _0x517c0d[_0x259ba2(0x984)] = '', _0x517c0d['remove'](); }, _0x25b369 = () => { const _0x33ae97 = _0x20a9ee; _0x33ae97(0x3f1) === 'YbPtR' ? (_0x23ce48(), _0x2f71a8(!![])) : _0x40293b = _0x451ce0['getItem'](_0x33ae97(0x4cd)); }, _0x1d1784 = () => { const _0x1bbc3e = _0x20a9ee; if ('jgnkY' === 'FMUdb') { const _0x16c424 = _0x295a42[_0x1bbc3e(0x330)][_0x1bbc3e(0x1c8)](), _0x49e1d6 = _0x4a7e32[_0x1bbc3e(0x330)][_0x1bbc3e(0x1c8)](); if (!_0x16c424 || !_0x49e1d6) { _0x44596a(_0x1bbc3e(0x5d9)); return; } _0x2bee2b({ 'songName': _0x16c424, 'artist': _0x49e1d6 }); } else _0x23ce48(), _0x2f71a8(![]); }; _0x517c0d[_0x20a9ee(0x458)](_0x20a9ee(0x2ff), _0x25b369), _0x517c0d[_0x20a9ee(0x458)](_0x20a9ee(0x7a4), _0x1d1784); }); } async function _0x1899f9(_0x21628d, _0x22f669) { const _0x66c566 = _0x4d95ce; if (_0x66c566(0x87e) === _0x66c566(0x87e)) { const _0xc7e674 = [_0x66c566(0x951), _0x66c566(0x628)]; for (const _0x36349a of _0xc7e674) { if (_0x66c566(0x9a0) !== _0x66c566(0x579)) try { if (_0x66c566(0x60b) === _0x66c566(0x60b)) { const _0x136a15 = _0x66c566(0x9e6) + _0x36349a + _0x66c566(0x655) + encodeURIComponent(_0x21628d) + '-' + encodeURIComponent(_0x22f669), _0x4c5d08 = await fetch(_0x136a15), _0x369d73 = await _0x4c5d08[_0x66c566(0x9e4)](); if (_0x369d73[_0x66c566(0x8ec)] !== 0xc8 || !_0x369d73['data'] || _0x369d73[_0x66c566(0x58a)][_0x66c566(0x2ed)] === 0x0) continue; const _0x416167 = _0x369d73[_0x66c566(0x58a)][_0x66c566(0xa24)](0x0, 0x5); for (const _0x794784 of _0x416167) { const _0x386f83 = _0x66c566(0x9e6) + _0x36349a + '?id=' + _0x794784['id'], _0xa49e96 = await fetch(_0x386f83), _0x5b3af5 = await _0xa49e96[_0x66c566(0x9e4)](), _0x58bcda = _0x5b3af5[_0x66c566(0x58a)]?.[_0x66c566(0x93b)]; if (await _0x35ef67(_0x58bcda)) { if (_0x66c566(0x22a) !== _0x66c566(0x12c)) return { 'url': _0x58bcda, 'cover': _0x794784['cover'], 'source': _0x36349a }; else _0x30ceb0[_0x66c566(0x330)] = ''; } } } else _0xd652f3['value'] = _0x31df12[_0x66c566(0x17c)]['endpoint'] || '', _0x575905[_0x66c566(0x330)] = _0x17c6bc[_0x66c566(0x17c)][_0x66c566(0x911)] || '', _0x133a70[_0x66c566(0x330)] = _0x58fcbf[_0x66c566(0x17c)]['model'] || '', _0x3697a9[_0x66c566(0x330)] = _0x16ad64(_0x40d91d[_0x66c566(0x407)]?.[_0x66c566(0x5e8)] ?? 0x64), _0x10e8f6[_0x66c566(0x374)](_0x66c566(0x2ca))[_0x66c566(0x330)] = _0x468924[_0x66c566(0x17c)][_0x66c566(0x80d)] || 'openai'; } catch (_0xeb15fa) { console['error'](_0x66c566(0x562) + _0x36349a + ':', _0xeb15fa); } else _0x4a2e3c = _0x454111['parse'](_0x1577b8[_0x66c566(0x6ba)](_0x8ca78e) || '{}'); } return { 'url': null, 'cover': null, 'source': null }; } else _0x21668e = _0x3daead(() => { const _0x11677a = _0x66c566; if (_0x566a21[_0x11677a(0x433)] === 'touchstart') _0x2cc176['preventDefault'](); _0x17796a(_0x5dceb5); }, 0x320); } function _0x2992cd(_0x515ff1) { const _0x1ef1ce = _0x4d95ce; try { const _0x499fb2 = JSON[_0x1ef1ce(0x468)](localStorage[_0x1ef1ce(0x6ba)](_0x1ef1ce(0x9c8)) || '{}'), _0x378145 = { ..._0x499fb2, ..._0x515ff1 }; localStorage[_0x1ef1ce(0x421)](_0x1ef1ce(0x9c8), JSON[_0x1ef1ce(0x795)](_0x378145)); } catch (_0x2e5106) { console['error']('保存徽章状态失败', _0x2e5106); } } async function _0x395a33() { const _0x58ddd9 = _0x4d95ce, _0x28ba95 = document[_0x58ddd9(0x374)]('decorative-badge'), _0x2789b4 = document[_0x58ddd9(0x374)](_0x58ddd9(0x762)); try { let _0x437718 = await _0x15e0c2(_0x58ddd9(0x4d9)); if (!_0x437718) { const _0x3b4eec = JSON[_0x58ddd9(0x468)](localStorage[_0x58ddd9(0x6ba)](_0x58ddd9(0x9c8)) || '{}'); if (_0x3b4eec[_0x58ddd9(0xad0)]) { if ('rTXUC' !== 'rTXUC') { const _0x152257 = _0x2ab585[_0x58ddd9(0x1c8)](); if (!_0x152257 || !_0x27ae35[_0x58ddd9(0x9ab)]) return; let _0x267fee = _0x4648d1[_0x58ddd9(0x788)][_0x58ddd9(0x7ed)](_0x195673 => _0x195673[_0x58ddd9(0x148)] === _0x371228['activeDiaryCharacterId']); !_0x267fee && (_0x267fee = { 'characterId': _0x59084f['activeDiaryCharacterId'], 'entries': [] }, _0x5a212b[_0x58ddd9(0x788)][_0x58ddd9(0x238)](_0x267fee)); _0x267fee[_0x58ddd9(0x4f1)][_0x58ddd9(0x238)]({ 'timestamp': _0x5ed09f[_0x58ddd9(0x780)](), 'author': 'user', 'content': _0x152257 }), _0x2a5fd0(); const _0x94db03 = _0x267fee['entries'][_0x58ddd9(0x2ed)]; _0x109d1e[_0x58ddd9(0x55e)] = _0x2f68d6[_0x58ddd9(0x8bd)](_0x94db03 / 0x2) - 0x1, _0x509e4a(); } else _0x437718 = await _0x34bb22(_0x3b4eec[_0x58ddd9(0xad0)]), await _0x5a0c6c('widget_badge', _0x437718); } } _0x437718 ? (_0x2789b4['src'] = URL[_0x58ddd9(0x7dc)](_0x437718), _0x2789b4[_0x58ddd9(0x2d6)]['display'] = _0x58ddd9(0x888), _0x28ba95[_0x58ddd9(0x2d6)][_0x58ddd9(0x9f3)] = 'none') : (_0x2789b4['style'][_0x58ddd9(0x416)] = 'none', _0x28ba95['style']['border'] = _0x58ddd9(0x934)), _0x28ba95['style'][_0x58ddd9(0x416)] = 'block'; } catch (_0x29e139) { console[_0x58ddd9(0x7a4)](_0x58ddd9(0x4e6), _0x29e139); } } async function _0xec65e() { const _0x318127 = _0x4d95ce, _0x403719 = document[_0x318127(0x374)]('card-widget'), _0x288fc8 = document[_0x318127(0x374)]('card-image'), _0x314dbb = document['getElementById'](_0x318127(0x820)), _0x28bc16 = document[_0x318127(0x374)](_0x318127(0x83e)); try { if ('HUyqp' === _0x318127(0x4f3)) { let _0x15aa70 = await _0x15e0c2('widget_card'); _0x15aa70 ? (_0x288fc8[_0x318127(0x984)] = URL[_0x318127(0x7dc)](_0x15aa70), _0x288fc8[_0x318127(0x2d6)][_0x318127(0x416)] = _0x318127(0x888), _0x403719['style'][_0x318127(0x9f3)] = _0x318127(0x8b4), _0x403719[_0x318127(0x2d6)][_0x318127(0x62a)] = _0x318127(0x42a)) : (_0x288fc8['style'][_0x318127(0x416)] = _0x318127(0x8b4), _0x403719[_0x318127(0x2d6)][_0x318127(0x9f3)] = _0x318127(0x934), _0x403719[_0x318127(0x2d6)]['background'] = 'rgba(255,255,255,0.2)'); _0x403719['style']['display'] = 'block'; let _0x3af1f5 = await _0x15e0c2(_0x318127(0x135)); if (_0x3af1f5) { if (_0x318127(0x153) !== _0x318127(0x153)) { _0xa93492('内容不能为空！'); return; } else _0x28bc16[_0x318127(0x984)] = URL[_0x318127(0x7dc)](_0x3af1f5), _0x28bc16[_0x318127(0x2d6)][_0x318127(0x416)] = 'block', _0x314dbb['style']['border'] = _0x318127(0x8b4), _0x314dbb[_0x318127(0x2d6)][_0x318127(0x62a)] = 'transparent'; } else _0x28bc16['style']['display'] = _0x318127(0x8b4), _0x314dbb[_0x318127(0x2d6)][_0x318127(0x9f3)] = _0x318127(0x934), _0x314dbb[_0x318127(0x2d6)][_0x318127(0x62a)] = 'rgba(255,255,255,0.2)'; _0x314dbb[_0x318127(0x2d6)][_0x318127(0x416)] = _0x318127(0x888); } else _0x27d107[_0x318127(0x238)](_0x1723e8); } catch (_0x298bef) { _0x318127(0x73f) === _0x318127(0xb16) ? _0x56a077 = _0x178d37[_0x318127(0x1d9)] || '' : console['error'](_0x318127(0x875), _0x298bef); } } async function _0xec65e() { const _0x449c33 = _0x4d95ce; if ('sfZwV' !== 'sfZwV') return _0x346e71[_0x449c33(0x80c)](_0x1e4286, _0x5040c4 + 0x1); else { const _0x46b010 = document['getElementById'](_0x449c33(0xa85)), _0x5cd719 = document[_0x449c33(0x374)](_0x449c33(0x284)); try { let _0x505a4c = await _0x15e0c2('widget_card'); if (!_0x505a4c) { const _0xffdd56 = JSON[_0x449c33(0x468)](localStorage[_0x449c33(0x6ba)]('cardWidgetState') || '{}'); _0xffdd56['image'] && (console[_0x449c33(0x6e2)]('正在搬运旧卡片...'), _0x505a4c = await _0x34bb22(_0xffdd56[_0x449c33(0xad0)]), await _0x5a0c6c(_0x449c33(0x2c3), _0x505a4c)); } if (_0x505a4c) { if (_0x449c33(0x8de) === _0x449c33(0x8de)) _0x5cd719[_0x449c33(0x984)] = URL['createObjectURL'](_0x505a4c), _0x46b010[_0x449c33(0x2d6)][_0x449c33(0x416)] = 'block'; else { const _0x35e2c5 = _0x159bd6['getElementById'](_0x3e64c0); if (_0x35e2c5 && _0x176a0f) _0x35e2c5[_0x449c33(0x984)] = _0x4ef2ac[_0x449c33(0x7dc)](_0x329eb4); } } else { if (_0x449c33(0x8ff) === 'wdDuW') _0x46b010['style'][_0x449c33(0x416)] = _0x449c33(0x8b4); else { _0x4f4aa1['error'](_0x449c33(0x4fe), _0x509b03), _0x29ed1b[_0x449c33(0x6b0)] = [], _0x20bfbc[_0x449c33(0x42d)] = [], _0x3f865d['activeChatId'] = null; try { _0x483318[_0x449c33(0x5ed)]('appState'); } catch (_0x5462b9) { _0x48b3f0[_0x449c33(0x7a4)](_0x449c33(0x810), _0x5462b9); } } } } catch (_0x236900) { _0x449c33(0x789) !== _0x449c33(0x27b) ? console[_0x449c33(0x7a4)]('加载卡片图片失败', _0x236900) : _0x478a37[_0x449c33(0x390)]('无法解析旧的视奸内容来获取时间戳。', _0x442194); } try { let _0x20ef21 = await _0x15e0c2('widget_card_2'); const _0x5d0a04 = document[_0x449c33(0x374)](_0x449c33(0x83e)), _0x2d026c = document[_0x449c33(0x374)]('card-widget-2'); _0x20ef21 ? (_0x5d0a04['src'] = URL[_0x449c33(0x7dc)](_0x20ef21), _0x2d026c['style'][_0x449c33(0x416)] = 'block') : _0x449c33(0x902) !== _0x449c33(0x902) ? _0x13ae62[_0x449c33(0x3d7)][_0x449c33(0x238)]({ 'senderId': _0x3deade['id'], 'kind': _0x449c33(0x6e6), 'sticker': _0x5a18fe }) : _0x2d026c[_0x449c33(0x2d6)][_0x449c33(0x416)] = _0x449c33(0x8b4); } catch (_0x1894eb) { if (_0x449c33(0x5ae) === _0x449c33(0x270)) return [_0xf90e28]; else console['error'](_0x449c33(0x16a), _0x1894eb); } } } _0x563faf[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x1d0464 = _0x4d95ce; if (_0x1d0464(0x340) !== _0x1d0464(0xa93)) _0x3f582c(), _0x53a558(_0x1d0464(0x928), _0x1d0464(0x529)); else { const _0x35a4d2 = _0x4b7acf[_0x1d0464(0xa28)](_0x27cdc7, 'readwrite'), _0x4f9f15 = _0x35a4d2[_0x1d0464(0x7f3)](_0x29dc15), _0x3943da = _0x4f9f15['put']({ 'id': _0x44b7cd, 'data': _0x415e52 }); _0x3943da[_0x1d0464(0x731)] = () => _0x75f769(), _0x3943da['onerror'] = () => _0x391009(_0x3943da[_0x1d0464(0x7a4)]); } }), document['getElementById']('back-to-home-from-user-list')['addEventListener'](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), _0x4d95ce(0x928))), document[_0x4d95ce(0x374)](_0x4d95ce(0x69a))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x38e2bc()), document[_0x4d95ce(0x374)](_0x4d95ce(0x742))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x5c1561 = _0x4d95ce; _0x5c1561(0x5ca) !== 'libyM' ? _0x1b9481[_0x5c1561(0x458)]('click', function () { const _0x597b1f = _0x5c1561, _0x30ef4a = { 'id': _0x5b1927['id'], 'url': _0x124a6c[_0x597b1f(0x4ca)] }; _0x41473d(this, _0x30ef4a); }) : (_0x3f582c(), _0x53a558(_0x5c1561(0x928), _0x5c1561(0xb5d))); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x727))[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x1cfe47), document['getElementById'](_0x4d95ce(0x65f))['addEventListener'](_0x4d95ce(0x173), _0x2f77dd), document['getElementById'](_0x4d95ce(0x3c2))[_0x4d95ce(0x458)]('click', () => { const _0x574ce3 = _0x4d95ce; if (_0x574ce3(0x4bb) === _0x574ce3(0x568)) _0x5161bf += _0x574ce3(0x571) + _0x24ce11[_0x574ce3(0x5de)] + _0x574ce3(0x357) + _0xe71b35[_0x574ce3(0x40d)] + _0x574ce3(0x6ef); else { const _0x170845 = document[_0x574ce3(0x374)](_0x574ce3(0x364))[_0x574ce3(0x330)]; if (_0x170845) { if (_0x574ce3(0x99e) === _0x574ce3(0x99e)) _0x5f49a9[_0x574ce3(0x4f6)] = _0x170845, _0x39e4f0(), _0xd5e395(_0x574ce3(0x305)), _0x3f582c(), document[_0x574ce3(0x374)](_0x574ce3(0x3c2))[_0x574ce3(0x2d6)][_0x574ce3(0x416)] = _0x574ce3(0x8b4); else { const _0x1f1150 = _0x5d0446[_0x574ce3(0x2d0)](); _0x1f1150[_0x574ce3(0x731)] = () => _0x19863a(_0x1f1150[_0x574ce3(0x78a)]), _0x1f1150[_0x574ce3(0x33c)] = () => _0x339bfc(_0x1f1150[_0x574ce3(0x7a4)]); } } } }); function _0x30ad29(_0x31c5c8) { const _0x1b5572 = _0x4d95ce, _0x1031a3 = _0x5f49a9['chats'][_0x1b5572(0x7ed)](_0x5c3e8d => _0x5c3e8d['id'] === _0x31c5c8), _0xc8bd35 = _0x1031a3?.[_0x1b5572(0x3fc)]; let _0x33278e = _0x5f49a9[_0x1b5572(0x4d5)]['find'](_0x24864d => _0x24864d['id'] === _0xc8bd35); return !_0x33278e && (_0x33278e = _0x5f49a9['userProfiles'][_0x1b5572(0x7ed)](_0x542661 => _0x542661['id'] === _0x5f49a9['activeUserProfileId']) || _0x5f49a9[_0x1b5572(0x4d5)][0x0]), _0x33278e || { 'name': '用户', 'avatar': _0x42c494, 'persona': '' }; } function _0x5b3b64(_0x48ddaf) { const _0xdb4f54 = _0x4d95ce; if (_0xdb4f54(0x973) !== _0xdb4f54(0x3e6)) { const _0x5c0941 = document[_0xdb4f54(0x374)](_0x48ddaf); _0x5c0941['innerHTML'] = '', _0x5f49a9[_0xdb4f54(0x4d5)][_0xdb4f54(0x170)](_0x7059fd => { const _0x5a1bac = _0xdb4f54, _0x1ff5c1 = document[_0x5a1bac(0x95f)]('option'); _0x1ff5c1['value'] = _0x7059fd['id'], _0x1ff5c1[_0x5a1bac(0x8e3)] = _0x7059fd[_0x5a1bac(0x7d9)], _0x5c0941[_0x5a1bac(0x962)](_0x1ff5c1); }); } else _0x547cb9[_0xdb4f54(0x2d6)][_0xdb4f54(0x21c)] = '0'; } function _0x52cc2b(_0x31a13c) { const _0x3ddbd6 = _0x4d95ce, _0x1eaa27 = _0x590c99(_0x31a13c), _0x5a7be7 = document[_0x3ddbd6(0x374)]('chat-view-pane'); _0x5a7be7['style']['backgroundImage'] = ''; let _0x2f2315 = document[_0x3ddbd6(0x374)](_0x3ddbd6(0x90a) + _0x31a13c); if (_0x2f2315) _0x2f2315[_0x3ddbd6(0x279)] = ''; if (!_0x1eaa27) return; _0x1eaa27['chatWallpaper'] && (_0x5a7be7['style']['backgroundImage'] = _0x3ddbd6(0x730) + _0x1eaa27[_0x3ddbd6(0x2bf)] + '\x27)', _0x5a7be7[_0x3ddbd6(0x2d6)]['backgroundSize'] = _0x3ddbd6(0x6ac), _0x5a7be7[_0x3ddbd6(0x2d6)][_0x3ddbd6(0xa2e)] = _0x3ddbd6(0x634)); if (_0x1eaa27[_0x3ddbd6(0x495)]) { if ('zaQrN' !== _0x3ddbd6(0x22d)) { let _0x51110e = document[_0x3ddbd6(0x374)](_0x3ddbd6(0x90a) + _0x1eaa27['id']); !_0x51110e && (_0x51110e = document[_0x3ddbd6(0x95f)]('style'), _0x51110e['id'] = _0x3ddbd6(0x90a) + _0x1eaa27['id'], document[_0x3ddbd6(0x665)][_0x3ddbd6(0x962)](_0x51110e)); const _0xb57e39 = _0x1eaa27[_0x3ddbd6(0x495)], _0x5f7d02 = _0xb57e39[_0x3ddbd6(0xa38)](/\.bubble\.sent/g, _0x3ddbd6(0x30c) + _0x1eaa27['id'] + '.message.user')[_0x3ddbd6(0xa38)](/\.bubble\.received/g, _0x3ddbd6(0x30c) + _0x1eaa27['id'] + _0x3ddbd6(0x557)); _0x51110e['innerHTML'] = _0x5f7d02; } else { _0x29ed87(![]), _0x373a42(_0x3ddbd6(0x1b5)); return; } } } function _0x1ce687() { const _0x37bc1a = _0x4d95ce, _0x2713a0 = document[_0x37bc1a(0x374)](_0x37bc1a(0x444)); _0x2713a0['innerHTML'] = ''; const _0x4a35db = _0x5d2d12 => { const _0xc8111b = _0x37bc1a; _0x5f49a9[_0xc8111b(0x80a)][_0x5d2d12] = null; if (_0x5d2d12 === _0xc8111b(0xad0)) _0x5f49a9[_0xc8111b(0x80a)][_0xc8111b(0x3a7)] = null; _0x1ce687(); }, _0xe1d673 = _0x5f49a9[_0x37bc1a(0x80a)][_0x37bc1a(0x3a7)], _0xd07f83 = _0x5f49a9[_0x37bc1a(0x80a)]['music']; if (_0xe1d673) { const _0x437ec6 = document[_0x37bc1a(0x95f)]('div'); _0x437ec6[_0x37bc1a(0x290)] = _0x37bc1a(0xab1), _0x437ec6[_0x37bc1a(0x279)] = _0x37bc1a(0x126), _0x437ec6['querySelector'](_0x37bc1a(0xa5d))[_0x37bc1a(0x509)] = () => _0x4a35db(_0x37bc1a(0xad0)), _0x2713a0['appendChild'](_0x437ec6), _0x15e0c2(_0xe1d673)[_0x37bc1a(0x8a2)](_0xb8440 => { const _0x5762da = _0x37bc1a; if (_0x5762da(0x2af) === _0x5762da(0x2af)) { const _0xf9eb34 = document['getElementById'](_0x5762da(0x22f)); if (_0xf9eb34 && _0xb8440) { if (_0x5762da(0x21a) !== _0x5762da(0xab9)) _0xf9eb34[_0x5762da(0x984)] = URL[_0x5762da(0x7dc)](_0xb8440); else { _0x26f419(_0x5762da(0x7e1)); return; } } } else { const _0x18ffc8 = _0x1030ae ?? _0x4f120a[_0x5762da(0x330)][_0x5762da(0x1c8)](); if (_0x18ffc8 === '' || !_0x4eadcd[_0x5762da(0x824)]) return; const _0x2f480a = _0x41c902[_0x5762da(0x179)](_0x5762da(0x19c)), _0x44acc6 = _0x2f480a['id'] === _0x5762da(0x979), _0x49c820 = { 'role': 'user', 'content': _0x18ffc8, 'timestamp': _0x85507[_0x5762da(0x780)](), 'isOffline': _0x44acc6 }; _0x48c762['activeQuote'] && (_0x49c820['quotedMessage'] = { ..._0x91bb6['activeQuote'] }), _0x266a7a[_0x5762da(0xb06)][_0x5762da(0x238)](_0x49c820), _0x5abcfc(), _0x33fe84(), !_0x5edc36 && (_0x10892a['value'] = ''), _0x5eba80(); } }); } if (_0xd07f83) { const _0x10103 = document[_0x37bc1a(0x95f)](_0x37bc1a(0x754)); _0x10103['className'] = _0x37bc1a(0xab1), _0x10103['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0xd07f83['coverUrl'] || _0x28cae8) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0xd07f83[_0x37bc1a(0x76d)] + _0x37bc1a(0x4da) + _0xd07f83['artist'] + _0x37bc1a(0x893), _0x10103[_0x37bc1a(0x179)](_0x37bc1a(0xa5d))[_0x37bc1a(0x509)] = () => _0x4a35db(_0x37bc1a(0xb60)), _0x2713a0[_0x37bc1a(0x962)](_0x10103); } } async function _0x1007a0(_0x522137) { const _0x19054d = _0x4d95ce, _0x4e1705 = _0x5f49a9[_0x19054d(0x535)][_0x19054d(0x7ed)](_0x530a5d => _0x530a5d['id'] === _0x5f49a9[_0x19054d(0x662)]); if (!_0x4e1705) return; _0x5a1a9e(!![], _0x19054d(0x88f)), _0x5f49a9[_0x19054d(0x263)] = !![]; try { const _0x2ad55e = _0x4e1705['memberCharacterIds']['map'](_0x79105f => _0x590c99(_0x79105f))[_0x19054d(0x8be)](Boolean), _0x3e89ec = _0x2c2a8e(), _0x287841 = _0x2ad55e['map'](_0x306c93 => { const _0x13a1ec = _0x19054d, { omniText: _0x396924 } = _0x2719e3(_0x306c93['id'], null), _0xbc2dc7 = _0x20b2d5(_0x306c93['id']), _0x50b549 = _0x306c93[_0x13a1ec(0x128)] && _0x306c93[_0x13a1ec(0x128)][_0x13a1ec(0x2ed)] > 0x0 ? _0x13a1ec(0xa49) + _0x306c93[_0x13a1ec(0x7d9)] + '的个人专属世界观设定\x0a' + _0x306c93[_0x13a1ec(0x128)]['map'](_0xd3876d => _0x5f49a9['worldBooks'][_0x13a1ec(0x7ed)](_0x378427 => _0x378427['id'] === _0xd3876d))['filter'](Boolean)[_0x13a1ec(0x190)](_0x1863df => _0x13a1ec(0x6f8) + _0x1863df[_0x13a1ec(0x7d9)] + '\x0a' + _0x1863df[_0x13a1ec(0x47e)])['join']('') : ''; return _0x13a1ec(0x409) + _0x306c93[_0x13a1ec(0x7d9)] + ',\x20ID:\x20' + _0x306c93['id'] + '\x0a\x20\x20人设:\x20' + _0x306c93[_0x13a1ec(0x8eb)] + _0x13a1ec(0x694) + _0x396924 + '\x0a' + _0xbc2dc7 + '\x0a' + _0x50b549; })[_0x19054d(0x414)]('\x0a\x0a'), _0x34ec7d = _0x290139(_0x522137[_0x19054d(0x79e)]) || { 'name': '用户' }, _0x2488dd = _0x34ec7d[_0x19054d(0x8eb)] ? _0x19054d(0xb08) + _0x34ec7d[_0x19054d(0x7d9)] + '\x0a-\x20人设:\x20' + _0x34ec7d[_0x19054d(0x8eb)] + '\x0a' : ''; let _0x122675 = null; if (_0x522137[_0x19054d(0xad0)]) _0x19054d(0xb0d) === _0x19054d(0xad6) ? (_0x350473(![]), _0x21dac0[_0x19054d(0x263)] = ![]) : _0x122675 = _0x522137['image']; else { if (_0x522137[_0x19054d(0x3a7)]) try { if (_0x19054d(0x3a3) === 'UriRM') { const _0x515707 = _0x175cd8(_0xae6365[0x1], 0xa), _0x4df190 = _0xefc5d0(_0x405321[0x2], 0xa), _0x423ebb = _0x2b1d79(_0x3cde65[0x3], 0xa) * (_0x3d12ca[0x3][_0x19054d(0x2ed)] === 0x2 ? 0xa : 0x1), _0x3bf252 = _0x515707 * 0x3c + _0x4df190 + _0x423ebb / 0x3e8, _0x45de60 = _0x12e611[_0x19054d(0xa38)](_0x2112a3, '')['trim'](); _0x45de60 && _0x58df19[_0x19054d(0x238)]({ 'time': _0x3bf252, 'text': _0x45de60 }); } else { const _0x57a02e = await _0x15e0c2(_0x522137[_0x19054d(0x3a7)]); _0x57a02e && (_0x122675 = await _0xa47e47(_0x57a02e)); } } catch (_0x549e62) { _0x19054d(0xaf7) === 'otPJR' ? console[_0x19054d(0x7a4)](_0x19054d(0x2b6), _0x549e62) : (_0x542958(), _0x1bdd56(_0x19054d(0x654), _0x19054d(0x778))); } } let _0x11ebbe = _0x34ec7d['name'] + _0x19054d(0x942) + _0x522137[_0x19054d(0x47e)] + '”'; if (_0x122675) { if (_0x19054d(0x2a9) !== 'HzWGv') _0x11ebbe += '\x20[并附上了一张图片]'; else return new _0x50e7d0((_0x34bd31, _0x57c86e) => { const _0x53a988 = _0x19054d, _0x4caa91 = new _0x280d11(); _0x4caa91['onloadend'] = () => _0x34bd31(_0x4caa91[_0x53a988(0x78a)]), _0x4caa91[_0x53a988(0x33c)] = _0x57c86e, _0x4caa91['readAsDataURL'](_0x35efc7); }); } _0x522137[_0x19054d(0x433)] === 'music' && (_0x11ebbe += '\x20[并分享了歌曲:\x20' + _0x522137[_0x19054d(0x76d)] + '\x20-\x20' + _0x522137[_0x19054d(0x1e1)] + ']'); const _0x2550ee = _0x19054d(0x624) + _0x287841 + '\x0a\x0a' + _0x2488dd + _0x19054d(0x41c) + _0x3e89ec + _0x19054d(0x1ff) + _0x11ebbe + _0x19054d(0x960), _0x5e710d = [{ 'role': _0x19054d(0x1ce), 'content': _0x2550ee }], _0xa13e1b = { 'role': 'user', 'content': _0x19054d(0x4d4) }; _0x122675 && (_0xa13e1b[_0x19054d(0xad0)] = _0x122675); _0x5e710d['push'](_0xa13e1b); const _0x248369 = await _0x4d0897(_0x5e710d, { 'json': !![] }), _0xd252f5 = _0x248369[_0x19054d(0xa55)](/({[\s\S]*})/); if (!_0xd252f5) throw new Error('AI未能返回有效的JSON对象。'); const _0x3dc44e = JSON[_0x19054d(0x468)](_0xd252f5[0x1]), _0x8e4665 = _0x4e1705[_0x19054d(0x251)]['find'](_0x52e24f => _0x52e24f['id'] === _0x522137['id']); _0x8e4665 && (_0x19054d(0x363) === _0x19054d(0x363) ? (_0x8e4665[_0x19054d(0x9de)] = _0x3dc44e[_0x19054d(0x9de)] || [], _0x8e4665[_0x19054d(0x427)] = (_0x3dc44e[_0x19054d(0x427)] || [])[_0x19054d(0x190)]((_0x5e6cdd, _0x35b23f) => ({ ..._0x5e6cdd, 'commentId': 'c_' + _0x522137[_0x19054d(0x75a)] + '_' + _0x35b23f })), _0x39e4f0(), _0x4c80e3()) : (_0x2a91cf = _0x30f452['stringify'](_0x8d400b), _0xe0f987[_0x19054d(0x6e2)](_0x19054d(0x36a)))); } catch (_0x48d599) { if (_0x19054d(0x803) !== 'qxopu') throw new _0x681e3b(_0x19054d(0x7d3)); else console[_0x19054d(0x7a4)]('生成动态回复失败:', _0x48d599), _0xd5e395('大家好像不知道该怎么回复...'); } finally { _0x5a1a9e(![]), _0x5f49a9[_0x19054d(0x263)] = ![]; } } function _0x3b48ca() { const _0xf8750d = _0x4d95ce; if (_0xf8750d(0xb15) !== _0xf8750d(0xb15)) _0x4e82ec(![]), _0x5c2c32['error'](_0xf8750d(0x848), _0xe01c58), _0xdf144d(_0xf8750d(0x989) + _0x1cec86[_0xf8750d(0xb58)]); else { const _0x5704b9 = _0x5f49a9['friendCircles'][_0xf8750d(0x7ed)](_0x3a6dfa => _0x3a6dfa['id'] === _0x5f49a9[_0xf8750d(0x662)]), _0x1c9861 = _0x5704b9?.[_0xf8750d(0x3fc)]; let _0x367a6e = _0x5f49a9[_0xf8750d(0x4d5)][_0xf8750d(0x7ed)](_0x511a70 => _0x511a70['id'] === _0x1c9861); !_0x367a6e && ('PmKny' !== _0xf8750d(0x394) ? (_0x39395b[_0xf8750d(0x8f0)][_0xf8750d(0x31f)](_0xf8750d(0x18c)), _0x3b792d[_0xf8750d(0x509)] = null, _0x18d1cb['onclick'] = null, _0x1a481d[_0xf8750d(0x509)] = null, _0x4b7eb4[_0xf8750d(0x188)](_0xf8750d(0xb04), _0x3f07e8), _0x31d025(_0x386179)) : _0x367a6e = _0x5f49a9[_0xf8750d(0x4d5)][_0xf8750d(0x7ed)](_0x4761ee => _0x4761ee['id'] === _0x5f49a9[_0xf8750d(0x4f6)])); !_0x367a6e && (_0x367a6e = _0x5f49a9['userProfiles'][0x0]); if (_0x367a6e) { if ('ZMTYp' !== _0xf8750d(0xa4a)) { _0x2f3ee7[_0xf8750d(0x279)] = _0xf8750d(0x6da); return; } else document[_0xf8750d(0x374)](_0xf8750d(0x4d6))[_0xf8750d(0x984)] = _0x367a6e[_0xf8750d(0x7d6)] || _0x42c494; } } } function _0x2294f3(_0x4ea6a7) { const _0x830b2c = _0x4d95ce; let _0x149ad9 = 0x0, _0x28c93b = 0x0, _0x22a8e4 = 0x0; if (_0x4ea6a7['length'] == 0x4) _0x149ad9 = '0x' + _0x4ea6a7[0x1] + _0x4ea6a7[0x1], _0x28c93b = '0x' + _0x4ea6a7[0x2] + _0x4ea6a7[0x2], _0x22a8e4 = '0x' + _0x4ea6a7[0x3] + _0x4ea6a7[0x3]; else _0x4ea6a7['length'] == 0x7 && (_0x149ad9 = '0x' + _0x4ea6a7[0x1] + _0x4ea6a7[0x2], _0x28c93b = '0x' + _0x4ea6a7[0x3] + _0x4ea6a7[0x4], _0x22a8e4 = '0x' + _0x4ea6a7[0x5] + _0x4ea6a7[0x6]); _0x149ad9 /= 0xff, _0x28c93b /= 0xff, _0x22a8e4 /= 0xff; let _0x268c6d = Math[_0x830b2c(0x3e4)](_0x149ad9, _0x28c93b, _0x22a8e4), _0x47bfbb = Math[_0x830b2c(0xacd)](_0x149ad9, _0x28c93b, _0x22a8e4), _0x3fed64 = _0x47bfbb - _0x268c6d, _0x2c88b4 = 0x0, _0x5a0cc6 = 0x0, _0x45553e = 0x0; if (_0x3fed64 == 0x0) _0x2c88b4 = 0x0; else { if (_0x47bfbb == _0x149ad9) _0x2c88b4 = (_0x28c93b - _0x22a8e4) / _0x3fed64 % 0x6; else { if (_0x47bfbb == _0x28c93b) _0x2c88b4 = (_0x22a8e4 - _0x149ad9) / _0x3fed64 + 0x2; else _0x2c88b4 = (_0x149ad9 - _0x28c93b) / _0x3fed64 + 0x4; } } _0x2c88b4 = Math[_0x830b2c(0x261)](_0x2c88b4 * 0x3c); if (_0x2c88b4 < 0x0) _0x2c88b4 += 0x168; return _0x45553e = (_0x47bfbb + _0x268c6d) / 0x2, _0x5a0cc6 = _0x3fed64 == 0x0 ? 0x0 : _0x3fed64 / (0x1 - Math[_0x830b2c(0x341)](0x2 * _0x45553e - 0x1)), _0x5a0cc6 = +(_0x5a0cc6 * 0x64)['toFixed'](0x1), _0x45553e = +(_0x45553e * 0x64)[_0x830b2c(0x539)](0x1), { 'h': _0x2c88b4, 's': _0x5a0cc6, 'l': _0x45553e }; } function _0x5d6805() { const _0x7b6944 = _0x4d95ce, _0x2bbad9 = (_0x48c0c2, _0x1e251b, _0x51661b) => { const _0x423092 = _0xe792, _0x129dac = document[_0x423092(0x374)](_0x48c0c2); if (!_0x129dac) return; let _0x786df3 = null; try { _0x423092(0x682) === _0x423092(0x682) ? _0x786df3 = JSON[_0x423092(0x468)](localStorage[_0x423092(0x6ba)](_0x1e251b) || '{}') : (_0x2ffe86 = new _0x22acff(_0x17b8d7[_0x423092(0xacd)][_0x423092(0x8b5)](null, _0x257fcf)), _0x2a3df1 = _0x1892c4[_0x423092(0x591)]('zh-CN', { 'dateStyle': _0x423092(0x95a), 'timeStyle': 'short' })); } catch { _0x423092(0x96d) === _0x423092(0x96d) ? _0x786df3 = {} : (_0x24b2f8[_0x423092(0x238)](_0x5de5d3[_0x2d0422][_0x423092(0x1c8)]()), _0x3a970a++); } _0x129dac['style']['position'] = _0x423092(0x257), _0x129dac[_0x423092(0x2d6)][_0x423092(0x6ea)] = '', _0x129dac[_0x423092(0x2d6)][_0x423092(0x373)] = '', _0x129dac[_0x423092(0x2d6)]['right'] = '', _0x129dac[_0x423092(0x2d6)]['bottom'] = '', _0x129dac[_0x423092(0x2d6)][_0x423092(0x3a6)] = ''; if (typeof _0x786df3[_0x423092(0x6ea)] === 'number' && typeof _0x786df3[_0x423092(0x373)] === _0x423092(0x23b)) _0x423092(0xa56) === _0x423092(0xa56) ? (_0x129dac[_0x423092(0x2d6)][_0x423092(0x6ea)] = _0x786df3[_0x423092(0x6ea)] + '%', _0x129dac[_0x423092(0x2d6)][_0x423092(0x373)] = _0x786df3[_0x423092(0x373)] + '%') : _0x27ce54(!![]); else for (const _0x5c01d2 in _0x51661b) { _0x129dac[_0x423092(0x2d6)][_0x5c01d2] = _0x51661b[_0x5c01d2]; } }; _0x2bbad9(_0x7b6944(0x327), 'clockPosition', { 'top': _0x7b6944(0xa48), 'left': '50%', 'transform': _0x7b6944(0x4d0) }), _0x2bbad9(_0x7b6944(0xa94), _0x7b6944(0xa0b), { 'top': _0x7b6944(0x5e6), 'right': '4%' }), _0x2bbad9('app-user-profiles', 'appIconPosition_app-user-profiles', { 'top': '20%', 'right': _0x7b6944(0x5b3) }), _0x2bbad9('app-settings', 'appIconPosition_app-settings', { 'top': '8%', 'right': _0x7b6944(0x5b3) }), _0x2bbad9(_0x7b6944(0x3f2), _0x7b6944(0x6ad), { 'top': '8%', 'right': '4%' }), _0x2bbad9(_0x7b6944(0x40e), _0x7b6944(0x7d2), { 'top': _0x7b6944(0x4a5), 'left': '5%' }), _0x2bbad9(_0x7b6944(0xa12), _0x7b6944(0x339), { 'top': '71%', 'left': _0x7b6944(0x802) }), _0x2bbad9(_0x7b6944(0x541), _0x7b6944(0x6a6), { 'top': _0x7b6944(0x391), 'left': '5%' }), _0x2bbad9(_0x7b6944(0x596), _0x7b6944(0x231), { 'top': '59%', 'left': '29%' }), _0x2bbad9(_0x7b6944(0x40b), _0x7b6944(0x9c8), { 'top': _0x7b6944(0x6c7), 'right': '5%' }), _0x2bbad9(_0x7b6944(0x820), _0x7b6944(0x85a), { 'top': '8%', 'left': '5%' }); const _0x509efe = document['getElementById'](_0x7b6944(0xa85)); if (_0x509efe) { if ('lkIPG' !== 'lkIPG') { if (_0x219bb8['length'] === 0x0) return; _0x56dc94 = (_0x5f1ea6 + 0x1) % _0x34ab79['length'], _0x111aa0(_0x2e874a[_0x2fd82c], _0x1482df); } else _0x509efe[_0x7b6944(0x2d6)][_0x7b6944(0x177)] = _0x7b6944(0x257), _0x509efe['style'][_0x7b6944(0x6ea)] = _0x7b6944(0x6a0), _0x509efe[_0x7b6944(0x2d6)][_0x7b6944(0x373)] = '50%', _0x509efe[_0x7b6944(0x2d6)]['transform'] = _0x7b6944(0x4d0), _0x509efe['style']['display'] = _0x7b6944(0x888); } const _0x1754b6 = document['getElementById'](_0x7b6944(0x797)); _0x1754b6 && (_0x1754b6[_0x7b6944(0x2d6)][_0x7b6944(0x177)] = _0x7b6944(0x257), _0x1754b6['style']['top'] = '35%', _0x1754b6[_0x7b6944(0x2d6)][_0x7b6944(0x373)] = _0x7b6944(0x2a1), _0x1754b6[_0x7b6944(0x2d6)][_0x7b6944(0x3a6)] = _0x7b6944(0x4d0), _0x1754b6[_0x7b6944(0x2d6)]['display'] = _0x7b6944(0xa0a)); } function _0x41d1cb() { const _0x20a955 = _0x4d95ce, _0x972a0d = document['getElementById'](_0x20a955(0x794)); _0x972a0d[_0x20a955(0x279)] = ''; const _0x297219 = document['querySelectorAll'](_0x20a955(0x22b)); _0x297219[_0x20a955(0x170)](_0x778bdc => { const _0x11645e = _0x20a955, _0x32e75 = _0x778bdc['id'], _0x13ef5d = _0x778bdc['querySelector'](_0x11645e(0x14c))[_0x11645e(0x8e3)], _0x2882b2 = _0x11645e(0x27d) + _0x32e75, _0x1cd06c = localStorage[_0x11645e(0x6ba)](_0x2882b2), _0x104f06 = document['createElement'](_0x11645e(0x754)); _0x104f06['className'] = 'member-selection-item', _0x104f06[_0x11645e(0x2d6)][_0x11645e(0x21c)] = '10px\x200', _0x104f06[_0x11645e(0x279)] = _0x11645e(0x863) + _0x32e75 + '\x22\x20src=\x22' + (_0x1cd06c || _0x11645e(0x15d)) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>' + _0x13ef5d + _0x11645e(0xb52) + _0x32e75 + _0x11645e(0x2e9) + _0x32e75 + _0x11645e(0x737) + _0x2882b2 + _0x11645e(0xa73), _0x972a0d[_0x11645e(0x962)](_0x104f06); const _0x16538b = document['getElementById'](_0x11645e(0x2f1) + _0x32e75); _0x16538b[_0x11645e(0x458)](_0x11645e(0x563), async _0x428d19 => { const _0xca0e18 = _0x11645e, _0x24abd5 = _0x428d19[_0xca0e18(0x89a)]['files'][0x0]; if (!_0x24abd5) return; try { const _0x4409e2 = await _0x454e76(_0x24abd5); localStorage[_0xca0e18(0x421)](_0x2882b2, _0x4409e2), document['getElementById'](_0xca0e18(0x855) + _0x32e75)[_0xca0e18(0x984)] = _0x4409e2, _0x2d5802(); } catch (_0x305da7) { _0xd5e395('图标处理失败:\x20' + _0x305da7[_0xca0e18(0xb58)]); } }); }); } function _0x2d5802() { const _0xb4692 = _0x4d95ce; if (_0xb4692(0x1af) === _0xb4692(0xa9a)) { const _0x4d738e = _0x4b23db[_0xb4692(0x374)](_0xb4692(0x720)), _0x591b = _0x3bd8bc[_0xb4692(0x374)](_0xb4692(0xaa8)), _0x21679a = _0x4d738e[_0xb4692(0x330)]['trim'](), _0x26dd36 = _0xf2e958(_0x591b[_0xb4692(0x330)]); if (!_0x21679a || _0x44ea74(_0x26dd36) || _0x26dd36 <= 0x0) { _0x3bb658(_0xb4692(0x5d1)); return; } _0x4f987c[_0xb4692(0x4fb)][_0xb4692(0x238)]({ 'id': _0xb4692(0x403) + _0x553869[_0xb4692(0x780)](), 'description': _0x21679a, 'amount': _0x26dd36, 'timestamp': _0x48f2a9[_0xb4692(0x780)]() }), _0x46501f(), _0x5b26f1(), _0x4d738e[_0xb4692(0x330)] = '', _0x591b[_0xb4692(0x330)] = '', _0x4d738e[_0xb4692(0x347)](); } else { const _0x1252bb = document[_0xb4692(0x410)](_0xb4692(0x22b)); _0x1252bb[_0xb4692(0x170)](_0x38788f => { const _0x156b7a = _0xb4692, _0xcb14c8 = _0x38788f['id'], _0x431dad = 'customIcon_' + _0xcb14c8, _0x18371b = localStorage[_0x156b7a(0x6ba)](_0x431dad), _0x19cde5 = _0x38788f[_0x156b7a(0x179)](_0x156b7a(0x70e)); if (_0x18371b) _0x19cde5[_0x156b7a(0x279)] = '<img\x20src=\x22' + _0x18371b + _0x156b7a(0x7a6); else { if (_0x156b7a(0x8c3) === _0x156b7a(0x8c3)) { const _0x1dba48 = document[_0x156b7a(0x179)](_0x156b7a(0x40a) + _0xcb14c8 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0xcb14c8 + _0x156b7a(0x96e))?.[_0x156b7a(0x279)]; _0x1dba48 && (_0x156b7a(0x97c) !== 'BdSfx' ? (_0x406911[_0x156b7a(0x8f0)][_0x156b7a(0x132)](_0x156b7a(0x459)), _0x28a761['classList'][_0x156b7a(0x132)](_0x156b7a(0x864)), _0x3a5ea8['classList'][_0x156b7a(0x132)](_0x156b7a(0x985)), _0x22a06c(() => { const _0x2ec512 = _0x156b7a; _0x460138[_0x2ec512(0x8f0)][_0x2ec512(0x31f)](_0x2ec512(0x985), _0x2ec512(0x864)), _0x1f3d04[_0x2ec512(0x8f0)][_0x2ec512(0x31f)](_0x2ec512(0x459)), _0x324508[_0x2ec512(0x55e)] = _0x195085, _0xf570c0(), _0x154dbf[_0x2ec512(0x8ed)] = ![]; }, 0x2bc)) : _0x19cde5[_0x156b7a(0x279)] = _0x1dba48); } else _0xaed42f += _0x156b7a(0x642); } }); } } function _0x42254e() { const _0x329688 = _0x4d95ce, _0x56bd19 = _0x5f49a9[_0x329688(0x535)]['find'](_0x4922c0 => _0x4922c0['id'] === _0x5f49a9[_0x329688(0x662)]), _0x3f51ad = _0x39d291(); let _0x1290bf = []; if (_0x56bd19 && _0x56bd19[_0x329688(0x251)]) { const _0x306cb2 = _0x56bd19[_0x329688(0x251)][_0x329688(0x8be)](_0x5ed523 => _0x5ed523[_0x329688(0x433)] === _0x329688(0xb60) && _0x5ed523[_0x329688(0x4ca)])[_0x329688(0x190)](_0x1b8279 => ({ ..._0x1b8279, 'source': _0x329688(0x958) })); _0x1290bf[_0x329688(0x238)](..._0x306cb2); } if (_0x3f51ad && _0x5f49a9[_0x329688(0xb06)]) { const _0x3dd219 = _0x5f49a9[_0x329688(0xb06)][_0x329688(0x8be)](_0x53054e => _0x53054e[_0x329688(0x433)] === _0x329688(0xb60) && _0x53054e[_0x329688(0x4ca)])[_0x329688(0x190)](_0x638a20 => ({ ..._0x638a20, 'source': _0x329688(0x134) })); _0x1290bf[_0x329688(0x238)](..._0x3dd219); } const _0x1850b1 = Array[_0x329688(0x423)](new Map(_0x1290bf['map'](_0x9f9a32 => [_0x9f9a32[_0x329688(0x4ca)], _0x9f9a32]))[_0x329688(0x9b3)]()); _0x5f49a9[_0x329688(0x520)] = _0x1850b1[_0x329688(0x43a)]((_0x35e613, _0x2933d3) => _0x2933d3[_0x329688(0x75a)] - _0x35e613['timestamp']); } function _0x3f0f61(_0x4ac9ea) { const _0x57bb79 = _0x4d95ce; if (_0x4ac9ea < 0x0 || _0x4ac9ea >= _0x34f517[_0x57bb79(0x2ed)]) return; _0x163a93 = _0x4ac9ea; const _0x408f37 = _0x34f517[_0x4ac9ea]; _0x96f20d[_0x57bb79(0x984)] = _0x408f37['playableUrl'] || _0x408f37[_0x57bb79(0x93b)], _0x96f20d[_0x57bb79(0x792)](), _0x4c55a8(), _0x1d1550(); } function _0x4c55a8() { const _0x545e31 = _0x4d95ce; if (_0x545e31(0x3e7) !== _0x545e31(0x3e7)) return _0x47f8f5[_0x545e31(0x3a9)][_0x545e31(0x190)](_0x298cd3 => typeof _0x298cd3 === _0x545e31(0x267) ? _0x298cd3 : _0x298cd3?.[_0x545e31(0x47e)])['filter'](_0x260002)[_0x545e31(0x71f)](_0x143170); else { const _0x43cafb = _0x34f517[_0x163a93]; _0x16a5a4(_0x43cafb); } } function _0x1d1550() { const _0x45611b = _0x4d95ce; try { _0x45611b(0x167) === _0x45611b(0x167) ? localStorage[_0x45611b(0x421)]('musicPlayerState', JSON[_0x45611b(0x795)]({ 'playlist': _0x5f49a9['musicPlaylist'], 'currentIndex': _0x5f49a9['currentlyPlayingIndex'] })) : (_0x3d6860(![]), _0x18fd4c[_0x45611b(0x89a)]['value'] = ''); } catch (_0x17816e) { console[_0x45611b(0x7a4)]('保存播放器状态失败，真是没用。', _0x17816e); } } function _0x5a1829() { const _0x27dc1b = _0x4d95ce; try { const _0x469b4f = localStorage[_0x27dc1b(0x6ba)](_0x27dc1b(0x1f9)); if (_0x469b4f) { const { playlist: _0x10f97b, currentIndex: _0x2009f4 } = JSON['parse'](_0x469b4f); Array[_0x27dc1b(0x552)](_0x10f97b) && _0x10f97b['length'] > 0x0 && _0x2009f4 > -0x1 && (_0x5f49a9[_0x27dc1b(0x520)] = _0x10f97b, _0x5f49a9[_0x27dc1b(0xb48)] = _0x2009f4, _0x5f49a9['isPlaying'] = ![], _0x4c55a8()); } } catch (_0x5112e0) { console['error']('切，加载播放器状态的时候出错了。', _0x5112e0); } } function _0x3129f4(_0x15205f) { const _0x4b480e = _0x4d95ce; if (_0x4b480e(0x20d) === _0x4b480e(0x5d2)) _0xcb28bd = _0x2f3bbd[_0x4b480e(0x8be)](_0x180be8 => _0x180be8 && typeof _0x180be8 === 'object' && typeof _0x180be8[_0x4b480e(0x664)] === _0x4b480e(0x267) && typeof _0x180be8[_0x4b480e(0x47e)] !== 'undefined'); else { if (window[_0x4b480e(0x3f5)]) clearTimeout(window[_0x4b480e(0x3f5)]); const _0x56d24c = _0x15205f['target'][_0x4b480e(0x796)](_0x4b480e(0x288)); if (!_0x56d24c) return; const _0x4e43ee = _0x56d24c[_0x4b480e(0x814)][_0x4b480e(0x75a)], _0x244b93 = _0x56d24c[_0x4b480e(0x8f0)]['contains']('user') ? _0x4b480e(0x384) : 'ai'; if (!_0x4e43ee) return; const _0x126052 = () => { const _0x587608 = _0x4b480e; _0x587608(0x52d) === 'CfPrM' ? window[_0x587608(0x3f5)] = setTimeout(() => { const _0x192edf = _0x587608; if (_0x192edf(0x5f5) === _0x192edf(0x5f5)) { if (_0x15205f[_0x192edf(0x433)] === _0x192edf(0x2ba)) _0x15205f[_0x192edf(0x6ce)](); _0x500adf(parseInt(_0x4e43ee, 0xa), _0x244b93); } else _0x5c6548['removeItem'](_0x192edf(0x39b) + _0x33feb6['activeChatId']); }, 0x320) : _0x1accf9['getElementById'](_0x587608(0x917))['style'][_0x587608(0x4c2)](_0x587608(0x777), _0x587608(0x8b4)); }, _0x4f1f9e = () => { const _0x336c5f = _0x4b480e; if (window[_0x336c5f(0x3f5)]) clearTimeout(window[_0x336c5f(0x3f5)]); }; document[_0x4b480e(0x458)](_0x4b480e(0x34e), _0x4f1f9e, { 'once': !![] }), document[_0x4b480e(0x458)]('touchend', _0x4f1f9e, { 'once': !![] }), document[_0x4b480e(0x458)](_0x4b480e(0x6b5), _0x4f1f9e, { 'once': !![] }), _0x126052(); } } function _0x500adf(_0x202486, _0x4043d1) { const _0x552c8e = _0x4d95ce; if (_0x552c8e(0x5e7) === _0x552c8e(0x424)) _0x49991a[_0x552c8e(0x8f0)]['remove']('active'), _0xee9301[_0x552c8e(0x8f0)][_0x552c8e(0x132)](_0x552c8e(0xa54)), _0x3fedff(); else { const _0xdd3b84 = _0x552c8e(0x48f) + _0x202486; let _0x1c42af = document['getElementById'](_0xdd3b84); if (_0x1c42af) return; const _0x1601e8 = _0x552c8e(0x78c) + _0xdd3b84 + _0x552c8e(0x3be) + (_0x4043d1 === 'ai' ? _0x552c8e(0x65e) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20'; document['body'][_0x552c8e(0x651)]('beforeend', _0x1601e8); const _0x2476ed = document['getElementById'](_0xdd3b84), _0x3939b1 = () => _0x2476ed[_0x552c8e(0x31f)](); _0x2476ed[_0x552c8e(0x179)](_0x552c8e(0x4b3))[_0x552c8e(0x509)] = _0x3939b1, _0x2476ed['querySelector'](_0x552c8e(0x452))[_0x552c8e(0x509)] = _0x3939b1, _0x2476ed['querySelector'](_0x552c8e(0x14f))[_0x552c8e(0x509)] = () => { const _0x4990b7 = _0x552c8e; if ('PLvvt' === _0x4990b7(0x3d8)) _0x3bee1c(_0x202486), _0x3939b1(); else { const _0x28ef4d = (_0x324497 - 0x5a) * _0x5abbdb['PI'] / 0xb4; return { 'x': _0x2d89d8 + _0xa22d1b * _0x25729d['cos'](_0x28ef4d), 'y': _0x446d71 + _0x2ef765 * _0x5dbea9['sin'](_0x28ef4d) }; } }, _0x4043d1 === 'ai' && (_0x2476ed[_0x552c8e(0x179)](_0x552c8e(0xb46))[_0x552c8e(0x509)] = () => { _0x3eeece(_0x202486), _0x3939b1(); }); } } async function _0x3bee1c(_0x19d759) { const _0x4c3419 = _0x4d95ce, _0x464a03 = await _0xd56340('确定要删除这篇日记吗？此操作不可撤销。'); if (!_0x464a03) return; const _0xef6c77 = _0x5f49a9[_0x4c3419(0x788)][_0x4c3419(0x7ed)](_0x2b9187 => _0x2b9187[_0x4c3419(0x148)] === _0x5f49a9[_0x4c3419(0x9ab)]); if (!_0xef6c77) return; const _0x1f76aa = _0xef6c77[_0x4c3419(0x4f1)][_0x4c3419(0x4f2)](_0x307fcd => _0x307fcd[_0x4c3419(0x75a)] === _0x19d759); _0x1f76aa > -0x1 && (_0xef6c77[_0x4c3419(0x4f1)][_0x4c3419(0x69d)](_0x1f76aa, 0x1), _0x39e4f0(), _0x549a1c(), _0xd5e395('日记已删除。')); } async function _0x3eeece(_0x3f1b72) { const _0x597717 = _0x4d95ce; if (_0x597717(0x60d) !== _0x597717(0x60d)) { const _0x3367b0 = (_0x897ca8[_0x597717(0x6e6)] ?? _0x20be35[_0x597717(0x2b3)] ?? _0x7094d2[_0x597717(0x953)] ?? _0x37e48c[_0x597717(0x221)])?.[_0x597717(0x1c8)](); if (_0x3367b0 && _0x3d6f36['has'](_0x3367b0)) _0x329b9a[_0x597717(0x3d7)][_0x597717(0x238)]({ 'senderId': _0x3eaa14['id'], 'kind': _0x597717(0x6e6), 'sticker': _0x3367b0 }); else { const _0x420e17 = _0x138edd(_0x585ed7['content'] ?? _0x1ac009['text'] ?? '')['trim']() || _0x597717(0x19b) + (_0x3367b0 || _0x597717(0x70c)) + ']'; if (_0x420e17) _0x32ce49[_0x597717(0x3d7)][_0x597717(0x238)]({ 'senderId': _0x2f80a1['id'], 'kind': 'text', 'content': _0x420e17 }); } } else { const _0x121def = _0x5f49a9[_0x597717(0x788)][_0x597717(0x7ed)](_0x4f0621 => _0x4f0621[_0x597717(0x148)] === _0x5f49a9[_0x597717(0x9ab)]); if (!_0x121def) return; const _0x5810f6 = _0x121def[_0x597717(0x4f1)][_0x597717(0x4f2)](_0x2e8fbc => _0x2e8fbc['timestamp'] === _0x3f1b72); _0x5810f6 > -0x1 && (_0x121def['entries'][_0x597717(0x69d)](_0x5810f6, 0x1), _0x39e4f0(), _0x549a1c(), await _0x3157fa()); } } function _0x3aeac1() { const _0x14135b = _0x4d95ce, _0x32a9db = document['getElementById'](_0x14135b(0xb4a)); _0x32a9db[_0x14135b(0x279)] = ''; const _0xb1b405 = _0x5f49a9[_0x14135b(0x6b0)]['filter'](_0x3f8393 => _0x5f49a9[_0x14135b(0x42d)][_0x14135b(0x70d)](_0x189467 => _0x189467[_0x14135b(0x433)] === _0x14135b(0x838) && _0x189467[_0x14135b(0x258)][_0x14135b(0x454)](_0x3f8393['id']))); if (_0xb1b405[_0x14135b(0x2ed)] === 0x0) { if (_0x14135b(0x9c0) === _0x14135b(0x734)) _0x5b9203[_0x14135b(0x6a1)] = _0x346c1c['accountingLedger']; else { _0x32a9db[_0x14135b(0x279)] = _0x14135b(0x337); return; } } _0xb1b405[_0x14135b(0x170)](_0x3438d2 => { const _0x4a9786 = _0x14135b, _0x57dd44 = document[_0x4a9786(0x95f)]('li'); _0x57dd44[_0x4a9786(0x290)] = _0x4a9786(0x8f5), _0x57dd44[_0x4a9786(0x814)][_0x4a9786(0x723)] = _0x3438d2['id'], _0x57dd44[_0x4a9786(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x3438d2[_0x4a9786(0x7d6)] || _0x28cae8) + _0x4a9786(0x189) + _0x3438d2[_0x4a9786(0x7d9)] + _0x4a9786(0x891), _0x57dd44['addEventListener'](_0x4a9786(0x173), () => { const _0x379ce7 = _0x4a9786; _0x379ce7(0x97b) !== _0x379ce7(0x97b) ? _0x1721da[_0x379ce7(0x2d6)][_0x379ce7(0x416)] = _0x379ce7(0xa0a) : _0xe6fad0(_0x3438d2['id']); }), _0x57dd44[_0x4a9786(0x179)]('.char-info-wrapper')['addEventListener'](_0x4a9786(0x173), () => { _0xe6fad0(_0x3438d2['id']); }), _0x57dd44['querySelector']('.diary-delete-btn')[_0x4a9786(0x458)](_0x4a9786(0x173), _0x2d0796 => { const _0x62f828 = _0x4a9786; if (_0x62f828(0xaea) === 'vmCDK') { const _0x42eca3 = _0x19283d['getElementById']('group-world-book-checkboxes'), _0x395755 = _0x42eca3[_0x62f828(0x410)](_0x62f828(0x1f7)), _0x2e1c66 = _0x2350c6[_0x62f828(0x179)]('#group-settings-screen\x20.selected-options-text'); if (_0x395755[_0x62f828(0x2ed)] === 0x0) _0x2e1c66[_0x62f828(0x8e3)] = _0x62f828(0x446); else _0x395755['length'] > 0x2 ? _0x2e1c66[_0x62f828(0x8e3)] = _0x62f828(0x9ea) + _0x395755['length'] + '\x20项' : _0x2e1c66[_0x62f828(0x8e3)] = _0x52c4fe[_0x62f828(0x423)](_0x395755)[_0x62f828(0x190)](_0x2ef978 => _0x2ef978[_0x62f828(0x62b)][_0x62f828(0x8e3)][_0x62f828(0x1c8)]())[_0x62f828(0x414)]('、'); } else _0x2d0796['stopPropagation'](), _0x2c4970(_0x3438d2['id']); }), _0x32a9db[_0x4a9786(0x962)](_0x57dd44); }); } function _0xe6fad0(_0x68ecc2) { const _0x270427 = _0x4d95ce, _0x48fb8d = _0x590c99(_0x68ecc2); if (!_0x48fb8d) return; _0x5f49a9[_0x270427(0x9ab)] = _0x68ecc2; const _0x7f0d44 = _0x5f49a9[_0x270427(0x788)][_0x270427(0x7ed)](_0x5a242f => _0x5a242f[_0x270427(0x148)] === _0x68ecc2), _0x4be2e5 = _0x7f0d44 ? _0x7f0d44['entries'][_0x270427(0x2ed)] : 0x0, _0x30101c = 0x2; _0x5f49a9['diaryCurrentPage'] = Math[_0x270427(0xacd)](0x0, Math['ceil'](_0x4be2e5 / _0x30101c) - 0x1), document['getElementById'](_0x270427(0x3eb))[_0x270427(0x8e3)] = _0x48fb8d[_0x270427(0x7d9)] + '的日记本', _0x549a1c(), _0x53a558(_0x270427(0x6be), _0x270427(0x8ee)); } function _0x549a1c() { const _0x304055 = _0x4d95ce; if (_0x304055(0x9f1) !== _0x304055(0x9cb)) { const _0x16b535 = document[_0x304055(0x374)](_0x304055(0x439)), _0x4c86a7 = document[_0x304055(0x374)](_0x304055(0x51f)); _0x16b535[_0x304055(0x279)] = '', _0x4c86a7[_0x304055(0x279)] = ''; const _0x169de1 = _0x30663a() || { 'name': '我' }, _0x3ee016 = _0x5f49a9[_0x304055(0x788)][_0x304055(0x7ed)](_0x20a964 => _0x20a964[_0x304055(0x148)] === _0x5f49a9['activeDiaryCharacterId']); if (!_0x3ee016 || !_0x3ee016['entries'] || _0x3ee016[_0x304055(0x4f1)][_0x304055(0x2ed)] === 0x0) { if (_0x304055(0x3d4) === _0x304055(0x3d4)) { _0x16b535[_0x304055(0x279)] = _0x304055(0x3ab), _0x4c86a7['innerHTML'] = _0x304055(0x9d9), document['getElementById'](_0x304055(0x197))[_0x304055(0x458)](_0x304055(0x173), _0x49ac7a), document[_0x304055(0x374)](_0x304055(0x9ee))[_0x304055(0x458)]('click', _0x3157fa); return; } else _0x41672d[_0x304055(0x2d6)][_0x304055(0x614)] = _0x304055(0x637); } const _0x5ce647 = 0x2, _0x470aa9 = [..._0x3ee016[_0x304055(0x4f1)]]['sort']((_0x5a90e9, _0x153f3a) => _0x5a90e9[_0x304055(0x75a)] - _0x153f3a[_0x304055(0x75a)]), _0x30b901 = []; for (let _0x2a557e = 0x0; _0x2a557e < _0x470aa9[_0x304055(0x2ed)]; _0x2a557e += _0x5ce647) { if (_0x304055(0x772) !== _0x304055(0xa21)) _0x30b901[_0x304055(0x238)](_0x470aa9[_0x304055(0xa24)](_0x2a557e, _0x2a557e + _0x5ce647)); else return new _0x1ab633((_0x1ee3c5, _0x58bad0) => { const _0xd71005 = _0x304055, _0x3c2e79 = new _0x72d9e2(); _0x3c2e79['onloadend'] = () => _0x1ee3c5(_0x3c2e79['result']), _0x3c2e79[_0xd71005(0x33c)] = _0x58bad0, _0x3c2e79[_0xd71005(0x352)](_0x49548f); }); } const _0x4f3728 = _0x30b901[_0x304055(0x2ed)]; _0x30b901[_0x304055(0x170)]((_0x3d0636, _0x1dcba3) => { const _0x3b4172 = _0x304055, _0x54c7d0 = document[_0x3b4172(0x95f)](_0x3b4172(0x754)); _0x54c7d0[_0x3b4172(0x290)] = _0x3b4172(0x3ce), _0x54c7d0['id'] = _0x3b4172(0x56d) + _0x1dcba3, _0x1dcba3 === _0x5f49a9[_0x3b4172(0x55e)] && ('yFXxO' === _0x3b4172(0xa41) ? _0x54c7d0[_0x3b4172(0x8f0)][_0x3b4172(0x132)](_0x3b4172(0x985)) : (_0x154a2b['stopPropagation'](), _0x5f45f7(_0x102ca0['id']))), _0x3d0636[_0x3b4172(0x170)](_0x6ba35c => { const _0x46cb34 = _0x3b4172, _0xf5923e = _0x6ba35c[_0x46cb34(0x17b)] === 'user' ? _0x46cb34(0x384) : 'ai', _0xd53a70 = _0x6ba35c[_0x46cb34(0x17b)] === _0x46cb34(0x384) ? _0x169de1[_0x46cb34(0x7d9)] : _0x590c99(_0x6ba35c[_0x46cb34(0x17b)])[_0x46cb34(0x7d9)], _0x11bb98 = document[_0x46cb34(0x95f)]('div'); _0x11bb98[_0x46cb34(0x290)] = _0x46cb34(0x85c) + _0xf5923e, _0x11bb98[_0x46cb34(0x814)][_0x46cb34(0x75a)] = _0x6ba35c[_0x46cb34(0x75a)], _0x11bb98[_0x46cb34(0x2d6)]['borderBottom'] = _0x46cb34(0x8b4), _0x11bb98[_0x46cb34(0x2d6)][_0x46cb34(0x787)] = '0', _0x11bb98[_0x46cb34(0x279)] = _0x46cb34(0x8ae) + _0xd53a70 + _0x46cb34(0xa5b) + new Date(_0x6ba35c[_0x46cb34(0x75a)])[_0x46cb34(0x591)](_0x46cb34(0x983)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>' + _0x6ba35c['content'][_0x46cb34(0xa38)](/\n/g, _0x46cb34(0xa7d)) + _0x46cb34(0x66c), _0x54c7d0[_0x46cb34(0x962)](_0x11bb98); }), _0x16b535['appendChild'](_0x54c7d0); }), _0x4c86a7['innerHTML'] = _0x304055(0x2d5) + (_0x5f49a9['diaryCurrentPage'] + 0x1) + _0x304055(0x336) + _0x4f3728 + _0x304055(0x85b), document['getElementById'](_0x304055(0x952))[_0x304055(0x815)] = _0x5f49a9[_0x304055(0x55e)] === 0x0, document[_0x304055(0x374)](_0x304055(0xafc))[_0x304055(0x815)] = _0x5f49a9[_0x304055(0x55e)] === _0x4f3728 - 0x1, document[_0x304055(0x374)](_0x304055(0x952))['addEventListener'](_0x304055(0x173), _0x72c59e), document['getElementById']('diary-next-button')[_0x304055(0x458)]('click', _0x5090c8), document[_0x304055(0x374)](_0x304055(0x197))[_0x304055(0x458)](_0x304055(0x173), _0x49ac7a), document[_0x304055(0x374)]('diary-get-reply-button')[_0x304055(0x458)](_0x304055(0x173), _0x3157fa); } else _0x549d53[_0x304055(0x374)](_0x304055(0xac5))[_0x304055(0x2d6)][_0x304055(0x416)] = _0x304055(0x8b4), _0x397f8e('snoopList', _0x304055(0x6df)); } function _0x5090c8() { const _0x1ffc80 = _0x4d95ce; if (_0x5f49a9[_0x1ffc80(0x8ed)]) return; const _0x2485cd = _0x5f49a9[_0x1ffc80(0x55e)], _0x40603b = Math[_0x1ffc80(0x8bd)](_0x5f49a9[_0x1ffc80(0x788)][_0x1ffc80(0x7ed)](_0x218fdd => _0x218fdd['characterId'] === _0x5f49a9[_0x1ffc80(0x9ab)])[_0x1ffc80(0x4f1)][_0x1ffc80(0x2ed)] / 0x2); if (_0x2485cd >= _0x40603b - 0x1) return; _0x5f49a9[_0x1ffc80(0x8ed)] = !![]; const _0x28183f = _0x2485cd + 0x1, _0x2c15e6 = document[_0x1ffc80(0x374)](_0x1ffc80(0x56d) + _0x2485cd), _0xfd9ba3 = document['getElementById'](_0x1ffc80(0x56d) + _0x28183f); if (_0x2c15e6 && _0xfd9ba3) _0x1ffc80(0x342) !== _0x1ffc80(0x828) ? (_0xfd9ba3['classList'][_0x1ffc80(0x132)](_0x1ffc80(0x459)), _0x2c15e6[_0x1ffc80(0x8f0)][_0x1ffc80(0x132)](_0x1ffc80(0x864)), _0xfd9ba3['classList']['add'](_0x1ffc80(0x985)), setTimeout(() => { const _0x209cdc = _0x1ffc80; _0x2c15e6[_0x209cdc(0x8f0)][_0x209cdc(0x31f)]('is-visible', 'is-exiting-left'), _0xfd9ba3[_0x209cdc(0x8f0)][_0x209cdc(0x31f)]('is-entering-from-right'), _0x5f49a9[_0x209cdc(0x55e)] = _0x28183f, _0x549a1c(), _0x5f49a9[_0x209cdc(0x8ed)] = ![]; }, 0x2bc)) : _0xb29ddc = _0x59a302[0x1]; else { if ('bRxKA' !== _0x1ffc80(0x42e)) _0x5f49a9['isAnimatingDiary'] = ![]; else { _0x456c2b['value'] = '', _0x1ab675[_0x1ffc80(0x279)] = ''; if (_0x5c0314[_0x1ffc80(0x6b0)][_0x1ffc80(0x2ed)] < 0x2) { _0x410dab(_0x1ffc80(0x752)); return; } _0x458ec0[_0x1ffc80(0x6b0)][_0x1ffc80(0x170)](_0x3cf142 => { const _0x3a792a = _0x1ffc80, _0x25579a = _0xb5f6db[_0x3a792a(0x95f)]('li'); _0x25579a[_0x3a792a(0x290)] = 'member-selection-item', _0x25579a[_0x3a792a(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x3cf142['id'] + _0x3a792a(0xab3) + _0x3cf142['id'] + _0x3a792a(0x5f2) + (_0x3cf142[_0x3a792a(0x7d6)] || _0x90837e) + _0x3a792a(0x8fa) + _0x3cf142['id'] + '\x22\x20class=\x22char-name\x22>' + _0x3cf142[_0x3a792a(0x7d9)] + _0x3a792a(0x99b), _0x3a09c0[_0x3a792a(0x962)](_0x25579a); }), _0x5872d5(_0x1ffc80(0xaf0), 'charSelect'); } } } function _0x72c59e() { const _0x5db473 = _0x4d95ce; if (_0x5db473(0x697) === _0x5db473(0x4d1)) { _0x38fec9 = _0x5b334b(_0x3e6bcc[_0x5db473(0x6f0)]), _0x341a0d[_0x5db473(0x279)] = ''; if (_0x3ec56b[_0x5db473(0x2ed)] === 0x0) { _0x36d5c6[_0x5db473(0x279)] = _0x5db473(0x94c); return; } _0xd9f908[_0x5db473(0x170)]((_0x580463, _0x1df4b3) => { const _0x89b1f = _0x5db473, _0x244d85 = _0x19e336[_0x89b1f(0x95f)]('p'); _0x244d85[_0x89b1f(0x8e3)] = _0x580463[_0x89b1f(0x3c5)], _0x244d85['id'] = _0x89b1f(0xa19) + _0x1df4b3, _0x56f6dd[_0x89b1f(0x962)](_0x244d85); }); } else { if (_0x5f49a9['isAnimatingDiary']) return; const _0x5b4f63 = _0x5f49a9[_0x5db473(0x55e)]; if (_0x5b4f63 <= 0x0) return; _0x5f49a9[_0x5db473(0x8ed)] = !![]; const _0x339abb = _0x5b4f63 - 0x1, _0x45897a = document[_0x5db473(0x374)](_0x5db473(0x56d) + _0x5b4f63), _0x2e7a0d = document['getElementById'](_0x5db473(0x56d) + _0x339abb); _0x45897a && _0x2e7a0d ? (_0x2e7a0d[_0x5db473(0x8f0)]['add']('is-entering-from-left'), _0x45897a['classList'][_0x5db473(0x132)](_0x5db473(0x806)), _0x2e7a0d[_0x5db473(0x8f0)][_0x5db473(0x132)](_0x5db473(0x985)), setTimeout(() => { const _0x2de732 = _0x5db473; _0x2de732(0x2da) !== _0x2de732(0x2da) ? _0x15a056(_0x2de732(0x8f2)) : (_0x45897a[_0x2de732(0x8f0)][_0x2de732(0x31f)](_0x2de732(0x985), _0x2de732(0x806)), _0x2e7a0d[_0x2de732(0x8f0)][_0x2de732(0x31f)]('is-entering-from-left'), _0x5f49a9[_0x2de732(0x55e)] = _0x339abb, _0x549a1c(), _0x5f49a9[_0x2de732(0x8ed)] = ![]); }, 0x2bc)) : _0x5f49a9['isAnimatingDiary'] = ![]; } } function _0x49ac7a() { return new Promise(_0x3ce3af => { const _0x625deb = _0xe792, _0x3617dd = _0x625deb(0x41f); document[_0x625deb(0xb2c)][_0x625deb(0x651)](_0x625deb(0x34d), _0x3617dd); const _0x33e6b6 = document[_0x625deb(0x374)]('diary-write-modal'), _0x33478f = document[_0x625deb(0x374)](_0x625deb(0xa1c)), _0x1947e5 = document['getElementById']('diary-modal-save'), _0x21f178 = document[_0x625deb(0x374)]('diary-modal-cancel'), _0x315571 = _0x33e6b6[_0x625deb(0x179)](_0x625deb(0x4b3)), _0x1cf347 = () => { _0x33e6b6['remove'](), _0x3ce3af(); }; _0x1947e5[_0x625deb(0x509)] = () => { const _0x214c8c = _0x625deb; _0x3d5a98(_0x33478f[_0x214c8c(0x330)]), _0x1cf347(); }, _0x21f178[_0x625deb(0x509)] = _0x1cf347, _0x315571[_0x625deb(0x509)] = _0x1cf347; }); } function _0x3d5a98(_0xf3cf48) { const _0x299784 = _0x4d95ce; if ('tbLeo' !== _0x299784(0x29c)) { const _0x54d164 = _0xf3cf48[_0x299784(0x1c8)](); if (!_0x54d164 || !_0x5f49a9[_0x299784(0x9ab)]) return; let _0x28767f = _0x5f49a9[_0x299784(0x788)]['find'](_0x1d8377 => _0x1d8377[_0x299784(0x148)] === _0x5f49a9[_0x299784(0x9ab)]); if (!_0x28767f) { if (_0x299784(0x276) !== 'HoQmj') _0x28767f = { 'characterId': _0x5f49a9[_0x299784(0x9ab)], 'entries': [] }, _0x5f49a9[_0x299784(0x788)]['push'](_0x28767f); else { _0x5dc79a(_0x299784(0x396)); return; } } _0x28767f['entries'][_0x299784(0x238)]({ 'timestamp': Date['now'](), 'author': _0x299784(0x384), 'content': _0x54d164 }), _0x39e4f0(); const _0xc61311 = _0x28767f[_0x299784(0x4f1)][_0x299784(0x2ed)]; _0x5f49a9[_0x299784(0x55e)] = Math[_0x299784(0x8bd)](_0xc61311 / 0x2) - 0x1, _0x549a1c(); } else _0x43c7e2 = {}; } async function _0x3157fa() { const _0x358693 = _0x4d95ce, _0x55fb0e = _0x5f49a9[_0x358693(0x788)][_0x358693(0x7ed)](_0x82c98e => _0x82c98e[_0x358693(0x148)] === _0x5f49a9[_0x358693(0x9ab)]), _0x3d61f3 = _0x5f49a9[_0x358693(0x9ab)], _0x1e77e9 = _0x590c99(_0x3d61f3); if (!_0x1e77e9 || _0x5f49a9['isGenerating']) return; _0x5a1a9e(!![], _0x358693(0x324)), _0x5f49a9[_0x358693(0x263)] = !![]; let _0x57b9f4 = []; try { if (_0x358693(0x80f) !== _0x358693(0x80f)) _0x610c9e(![]), _0x50cff9[_0x358693(0x7a4)](_0x358693(0xad1), _0x92095b), _0x2a8b0('导出过程中发生严重错误:\x20' + _0x492ad7['message']); else { const _0xf9b8f6 = _0x30663a() || { 'name': '你' }, _0x17f00d = _0x20b2d5(_0x3d61f3), { omniText: _0x4de053 } = _0x2719e3(_0x3d61f3, _0x5f49a9[_0x358693(0x824)]); let _0x3c6724 = ''; if (_0x1e77e9[_0x358693(0x128)] && _0x1e77e9[_0x358693(0x128)][_0x358693(0x2ed)] > 0x0) { const _0x522707 = _0x1e77e9[_0x358693(0x128)][_0x358693(0x190)](_0x52bfbb => _0x5f49a9[_0x358693(0x1df)][_0x358693(0x7ed)](_0x423a98 => _0x423a98['id'] === _0x52bfbb))[_0x358693(0x8be)](Boolean)[_0x358693(0x190)](_0x2e31ab => _0x358693(0x8c6) + _0x2e31ab['name'] + '\x0a' + _0x2e31ab[_0x358693(0x47e)])[_0x358693(0x414)](''); if (_0x522707) _0x3c6724 = _0x358693(0x9e2) + _0x522707; } const _0x58e68c = _0xf9b8f6[_0x358693(0x8eb)] ? _0x358693(0xa16) + _0xf9b8f6[_0x358693(0x7d9)] + _0x358693(0xb0c) + _0xf9b8f6[_0x358693(0x8eb)] : '', _0x116ec7 = _0x2c2a8e(); let _0x1c1ccb = '你还没有写日记。'; if (_0x55fb0e && _0x55fb0e['entries']) { if ('cgXMn' === 'nGQwR') _0x1c365f[_0x358693(0x251)] = [], _0xcfd6a9(), _0x1e6663(), _0x1009d3(_0x358693(0x916)); else { const _0x695fe7 = _0x55fb0e[_0x358693(0x4f1)][_0x358693(0x8be)](_0x5d5417 => _0x5d5417[_0x358693(0x17b)] === _0x358693(0x384))[_0x358693(0x7d8)](); _0x695fe7 && (_0x1c1ccb = _0x695fe7['content']); } } const _0xc0d90c = _0x358693(0x91c) + _0x1e77e9[_0x358693(0x7d9)] + _0x358693(0x543) + _0xf9b8f6[_0x358693(0x7d9)] + _0x358693(0xa75) + _0xf9b8f6[_0x358693(0x7d9)] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x1c1ccb + '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a' + _0x1e77e9[_0x358693(0x8eb)] + '\x0a' + _0x58e68c + '\x0a' + _0x3c6724 + '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20' + new Date()[_0x358693(0x591)](_0x358693(0x983), { 'dateStyle': _0x358693(0x5d7), 'timeStyle': _0x358693(0x54d) }) + _0x358693(0xa02) + _0x34dad7(new Date(_0x55fb0e?.[_0x358693(0x4f1)]?.['at'](-0x1)?.[_0x358693(0x75a)] || Date[_0x358693(0x780)]())) + _0x358693(0x86b) + (_0x4de053 || _0x358693(0x71c)) + _0x358693(0xaf5) + (_0x116ec7 || _0x358693(0xa22)) + _0x358693(0x3fd); _0x57b9f4 = [{ 'role': _0x358693(0x1ce), 'content': _0xc0d90c }, { 'role': _0x358693(0x384), 'content': _0x358693(0x420) }]; const _0x550f4c = await _0x4d0897(_0x57b9f4); if (_0x550f4c) { if ('KGDgK' === 'KGDgK') { let _0x44137d = _0x5f49a9[_0x358693(0x788)][_0x358693(0x7ed)](_0x2bf09a => _0x2bf09a[_0x358693(0x148)] === _0x3d61f3); !_0x44137d && (_0x44137d = { 'characterId': _0x3d61f3, 'entries': [] }, _0x5f49a9['diaries'][_0x358693(0x238)](_0x44137d)); _0x44137d[_0x358693(0x4f1)][_0x358693(0x238)]({ 'timestamp': Date['now'](), 'author': _0x3d61f3, 'content': _0x550f4c }), _0x39e4f0(); const _0x559c9b = _0x44137d[_0x358693(0x4f1)]['length']; _0x5f49a9[_0x358693(0x55e)] = Math[_0x358693(0x8bd)](_0x559c9b / 0x2) - 0x1, _0x549a1c(); } else { _0x234d9e[_0x358693(0x279)] = _0x358693(0x89c); return; } } } } catch (_0x23bc95) { _0xd5e395(_0x358693(0xb1a) + _0x23bc95[_0x358693(0xb58)]); } finally { if (_0x358693(0x617) !== _0x358693(0x617)) { const _0x1e3402 = _0xe9f13f['characters']['find'](_0x1574d0 => _0x64f90b[_0x358693(0x258)]['includes'](_0x1574d0['id']) && _0x1574d0[_0x358693(0x7d9)] === _0x4900f5); if (_0x1e3402) _0xda93ae = _0x1e3402['id']; } else _0x5a1a9e(![]), _0x5f49a9[_0x358693(0x263)] = ![]; } } function _0x41ddb6() { const _0x272044 = _0x4d95ce, _0xa1ab7 = document['getElementById'](_0x272044(0x286)), _0x22dfd6 = document[_0x272044(0x374)](_0x272044(0x4c8)), _0x17c424 = document['querySelector'](_0x272044(0xa83)); if (_0x5f49a9['meetingViewMode'] === 'galgame') _0xa1ab7[_0x272044(0x2d6)][_0x272044(0x416)] = _0x272044(0x8b4), _0x22dfd6[_0x272044(0x2d6)][_0x272044(0x416)] = _0x272044(0x888); else { if ('Cbuge' === _0x272044(0xb3a)) { if (_0x16b05e) _0x181854[_0x272044(0x2d6)]['backgroundImage'] = _0x272044(0x730) + _0x5db462['createObjectURL'](_0x8c756c) + '\x27)'; } else _0xa1ab7[_0x272044(0x2d6)][_0x272044(0x416)] = _0x272044(0x888), _0x22dfd6[_0x272044(0x2d6)][_0x272044(0x416)] = 'none'; } _0x17c424[_0x272044(0x2d6)]['display'] = 'block'; } function _0x5ecdc7() { const _0x3a8e49 = _0x4d95ce, _0x26f9d0 = document[_0x3a8e49(0x374)]('galgame-speaker'), _0x244a47 = document[_0x3a8e49(0x374)](_0x3a8e49(0xaa5)); if (_0x5f49a9[_0x3a8e49(0x766)][_0x3a8e49(0x2ed)] > 0x0) { const _0x3f4cb1 = _0x5f49a9[_0x3a8e49(0x766)][_0x3a8e49(0x255)](); _0x26f9d0[_0x3a8e49(0x8e3)] = _0x3f4cb1[_0x3a8e49(0x88e)] === _0x3a8e49(0x96f) ? '旁白' : _0x3f4cb1['speaker'], _0x244a47[_0x3a8e49(0x8e3)] = _0x3f4cb1['line'], _0x3f4cb1[_0x3a8e49(0x88e)] !== 'narrator' && _0xd74edd(_0x5f49a9[_0x3a8e49(0x5b0)], _0x3f4cb1[_0x3a8e49(0x42f)]); } else { const _0x2540c1 = _0x5f49a9['characterLastScripts'][_0x5f49a9['activeMeetingCharId']]; if (_0x2540c1 && _0x2540c1[_0x3a8e49(0x2ed)] > 0x0) { if (_0x3a8e49(0x976) === _0x3a8e49(0x976)) { _0x5f49a9[_0x3a8e49(0x766)] = [..._0x2540c1]; const _0xf250d2 = _0x5f49a9[_0x3a8e49(0x766)][_0x3a8e49(0x255)](); _0x26f9d0[_0x3a8e49(0x8e3)] = _0xf250d2[_0x3a8e49(0x88e)] === _0x3a8e49(0x96f) ? '旁白' : _0xf250d2[_0x3a8e49(0x88e)], _0x244a47[_0x3a8e49(0x8e3)] = _0xf250d2[_0x3a8e49(0xaa4)], _0xf250d2[_0x3a8e49(0x88e)] !== _0x3a8e49(0x96f) && _0xd74edd(_0x5f49a9['activeMeetingCharId'], _0xf250d2[_0x3a8e49(0x42f)]); } else _0x28dfe1[_0x3a8e49(0x2d6)][_0x3a8e49(0x416)] = 'none', _0x1b05b7[_0x3a8e49(0x2d6)][_0x3a8e49(0x9f3)] = _0x3a8e49(0x934), _0x1c089a[_0x3a8e49(0x2d6)][_0x3a8e49(0x62a)] = _0x3a8e49(0x15b); } else _0x26f9d0[_0x3a8e49(0x8e3)] = '旁白', _0x244a47[_0x3a8e49(0x8e3)] = _0x3a8e49(0x9ac); } } async function _0xd74edd(_0x508f3f, _0x3da9e2) { const _0x1c6545 = _0x4d95ce; if ('aiuAn' !== _0x1c6545(0x600)) { const _0x46634c = _0x24a323[_0x1c6545(0x795)](_0x241be6['log'] || [])['replace'](/'/g, _0x1c6545(0x924))[_0x1c6545(0xa38)](/"/g, _0x1c6545(0x2fe)), _0xdce3f = _0x3ca751['contact_name'] || _0x1c6545(0xb39); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x5e2b28 < _0x358ab1[_0x1c6545(0x2ed)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x1c6545(0x294) + _0x46634c + _0x1c6545(0x7f4) + _0xdce3f + _0x1c6545(0x3f3) + _0x42f6a9 + _0x1c6545(0x7ac) + _0xdce3f[_0x1c6545(0x1e5)](0x0) + _0x1c6545(0x3e9) + _0xdce3f + _0x1c6545(0x144) + (_0x429d42['last_message_preview'] || '') + _0x1c6545(0x313); } else { const _0x1aeb41 = document[_0x1c6545(0x374)]('galgame-sprite'), _0xc262e1 = document[_0x1c6545(0x374)](_0x1c6545(0x8b2)), _0x5085b4 = _0x590c99(_0x508f3f), _0x38d830 = _0x5085b4?.[_0x1c6545(0x32d)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x5e439d = 0x50 * _0x38d830[_0x1c6545(0x6f9)]; _0xc262e1[_0x1c6545(0x2d6)]['height'] = _0x5e439d + '%', _0xc262e1[_0x1c6545(0x2d6)][_0x1c6545(0x6c8)] = _0x5e439d + '%', _0xc262e1[_0x1c6545(0x2d6)][_0x1c6545(0x373)] = _0x38d830['x'] + '%', _0xc262e1[_0x1c6545(0x2d6)]['top'] = _0x38d830['y'] + '%', _0xc262e1['style']['transform'] = _0x1c6545(0x908), _0xc262e1[_0x1c6545(0x2d6)][_0x1c6545(0x3a8)] = 'auto'; const _0x547d8d = ['normal', _0x1c6545(0x275), _0x1c6545(0x84a), 'sad', 'shy'], _0x22ffb9 = _0x547d8d[_0x1c6545(0x454)](_0x3da9e2) ? _0x3da9e2 : 'normal'; try { const _0x460dea = await _0x15e0c2('char_sprite_' + _0x22ffb9 + '_' + _0x508f3f); if (_0x460dea) _0x1c6545(0x919) !== _0x1c6545(0x919) ? (_0x33e1a5(_0x7eb6), _0x5213ae[_0x1c6545(0x330)] = '', _0x26b498(_0x43fa7f, 0x64)) : _0x1aeb41['src'] && _0x1aeb41['style'][_0x1c6545(0x164)] !== '0' ? (_0x1aeb41[_0x1c6545(0x2d6)]['opacity'] = 0x0, setTimeout(() => { const _0x26674e = _0x1c6545; _0x1aeb41[_0x26674e(0x984)] = URL[_0x26674e(0x7dc)](_0x460dea), _0x1aeb41[_0x26674e(0x2d6)][_0x26674e(0x164)] = 0x1; }, 0x96)) : (_0x1aeb41['src'] = URL[_0x1c6545(0x7dc)](_0x460dea), _0x1aeb41['style'][_0x1c6545(0x164)] = 0x1); else { if ('fjubj' === _0x1c6545(0x876)) { const _0xc81919 = await _0x15e0c2(_0x1c6545(0xa68) + _0x508f3f); _0x1aeb41[_0x1c6545(0x984)] = _0xc81919 ? URL['createObjectURL'](_0xc81919) : ''; } else _0x667e54[_0x1c6545(0x7a4)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x550626[_0x1c6545(0x824)], _0x12270f); } } catch (_0x44652f) { if (_0x1c6545(0xad3) === 'uMMfz') { const _0x577cc4 = _0xc45d75[_0x1c6545(0x535)][_0x1c6545(0x7ed)](_0x44321d => _0x44321d['id'] === _0x2b2162[_0x1c6545(0x662)]), _0x543364 = _0x48935d(); let _0x32ebf0 = []; if (_0x577cc4 && _0x577cc4[_0x1c6545(0x251)]) { const _0x297cfa = _0x577cc4[_0x1c6545(0x251)][_0x1c6545(0x8be)](_0x9f02dc => _0x9f02dc[_0x1c6545(0x433)] === _0x1c6545(0xb60) && _0x9f02dc[_0x1c6545(0x4ca)])[_0x1c6545(0x190)](_0x433d72 => ({ ..._0x433d72, 'source': _0x1c6545(0x958) })); _0x32ebf0['push'](..._0x297cfa); } if (_0x543364 && _0x14ecc8[_0x1c6545(0xb06)]) { const _0x57b80b = _0x4abb48[_0x1c6545(0xb06)][_0x1c6545(0x8be)](_0x4c6db5 => _0x4c6db5[_0x1c6545(0x433)] === _0x1c6545(0xb60) && _0x4c6db5[_0x1c6545(0x4ca)])[_0x1c6545(0x190)](_0x31718e => ({ ..._0x31718e, 'source': _0x1c6545(0x134) })); _0x32ebf0[_0x1c6545(0x238)](..._0x57b80b); } const _0x556631 = _0x349c61[_0x1c6545(0x423)](new _0x27ce7c(_0x32ebf0['map'](_0x4db2b5 => [_0x4db2b5[_0x1c6545(0x4ca)], _0x4db2b5]))[_0x1c6545(0x9b3)]()); _0x49135f['musicPlaylist'] = _0x556631[_0x1c6545(0x43a)]((_0x13a5bc, _0x3733d4) => _0x3733d4[_0x1c6545(0x75a)] - _0x13a5bc[_0x1c6545(0x75a)]); } else console['error'](_0x1c6545(0x972), _0x44652f), _0x1aeb41[_0x1c6545(0x984)] = ''; } } } let _0x2eabba = ![], _0x2543ed = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x106be5 = document[_0x4d95ce(0x374)](_0x4d95ce(0xa3c)), _0x2efc0f = document[_0x4d95ce(0x374)](_0x4d95ce(0x7ea)), _0x44f041 = document[_0x4d95ce(0x374)](_0x4d95ce(0x33a)), _0xc54275 = document[_0x4d95ce(0x374)](_0x4d95ce(0x6ca)), _0x8e0178 = document['getElementById'](_0x4d95ce(0x437)), _0x41517e = document['getElementById'](_0x4d95ce(0x8b2)), _0x29c2ca = document['getElementById'](_0x4d95ce(0x96c)), _0x4963f5 = document[_0x4d95ce(0x374)](_0x4d95ce(0xaa7)); let _0x39e225 = {}; function _0x94c9c() { const _0x306398 = _0x4d95ce, _0x43e086 = _0x590c99(_0x5f49a9[_0x306398(0x5b0)]); if (!_0x43e086) return; _0x2eabba = !![], _0x8e0178[_0x306398(0x2d6)][_0x306398(0x416)] = _0x306398(0x888); const _0x1a830f = _0x43e086[_0x306398(0x32d)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x306398(0x374)](_0x306398(0xaf4))['value'] = _0x1a830f['x'], document['getElementById']('sprite-slider-y')[_0x306398(0x330)] = _0x1a830f['y'], document['getElementById'](_0x306398(0x506))[_0x306398(0x330)] = _0x1a830f[_0x306398(0x6f9)] * 0x64, _0x39e225 = { ..._0x1a830f }, document[_0x306398(0x374)](_0x306398(0x783))[_0x306398(0x2d6)][_0x306398(0x416)] = _0x306398(0x8b4), document[_0x306398(0x374)](_0x306398(0x85f))['style'][_0x306398(0x416)] = 'none'; } function _0x55931e(_0x53a57c = ![]) { const _0x2a37d3 = _0x4d95ce; if (_0x2a37d3(0x280) === 'DRoeJ') { _0x2eabba = ![], _0x8e0178[_0x2a37d3(0x2d6)][_0x2a37d3(0x416)] = _0x2a37d3(0x8b4), document[_0x2a37d3(0x374)](_0x2a37d3(0x783))[_0x2a37d3(0x2d6)]['display'] = 'block', document['getElementById'](_0x2a37d3(0x85f))['style']['display'] = 'block'; if (!_0x53a57c) { const _0x5361ac = _0x590c99(_0x5f49a9[_0x2a37d3(0x5b0)]); _0x5361ac && (_0x5361ac[_0x2a37d3(0x32d)] = _0x39e225, _0xd74edd(_0x5f49a9[_0x2a37d3(0x5b0)], _0x2a37d3(0x48b))); } } else { _0x5a7fe8(_0x2a37d3(0x198)); return; } } function _0x77ea64() { const _0x100a53 = _0x4d95ce, _0x5b0ed9 = _0x590c99(_0x5f49a9[_0x100a53(0x5b0)]); if (!_0x5b0ed9) return; const _0x38034c = parseFloat(document['getElementById'](_0x100a53(0xaf4))[_0x100a53(0x330)]), _0x3a43ef = parseFloat(document[_0x100a53(0x374)](_0x100a53(0xb28))[_0x100a53(0x330)]), _0x1b9e10 = parseFloat(document['getElementById'](_0x100a53(0x506))[_0x100a53(0x330)]) / 0x64; _0x5b0ed9['spriteTransform'] = { 'x': _0x38034c, 'y': _0x3a43ef, 'scale': _0x1b9e10 }, _0x39e4f0(), _0xd5e395(_0x100a53(0x9ce)), _0x55931e(!![]); } function _0x5b26ee() { const _0x223fa9 = _0x4d95ce; _0xd56340(_0x223fa9(0xb19))[_0x223fa9(0x8a2)](_0x2a63b9 => { const _0x3bc83a = _0x223fa9; if (_0x2a63b9) { if (_0x3bc83a(0x3fa) === _0x3bc83a(0x3fa)) { const _0x261500 = _0x590c99(_0x5f49a9[_0x3bc83a(0x5b0)]); if (_0x261500) { if (_0x3bc83a(0x7b7) === _0x3bc83a(0x7b7)) delete _0x261500['spriteTransform'], _0x39e4f0(), _0xd74edd(_0x261500['id'], 'normal'), _0xd5e395(_0x3bc83a(0x8db)), _0x55931e(!![]); else return _0x316038(_0x3f6686)[_0x3bc83a(0x8a2)](_0x2a9aa9 => _0x2a9aa9[_0x3bc83a(0xb57)]()); } } else _0x4f67c0[_0x3bc83a(0x8f0)][_0x3bc83a(0x31f)](_0x3bc83a(0xa54)), _0x17aeca['classList']['add']('active'), _0x5918e2(); } }); } function _0x1212b4() { const _0x100209 = _0x4d95ce; if (_0x100209(0xa00) !== _0x100209(0xa00)) { const { playlist: _0x4e719f, currentIndex: _0x3d6af8 } = _0x21e0c1[_0x100209(0x468)](_0x487084); _0x2bb7bb['isArray'](_0x4e719f) && _0x4e719f[_0x100209(0x2ed)] > 0x0 && _0x3d6af8 > -0x1 && (_0x54fda6['musicPlaylist'] = _0x4e719f, _0x9423f0[_0x100209(0xb48)] = _0x3d6af8, _0x517479[_0x100209(0x48d)] = ![], _0x33be42()); } else { if (!_0x2eabba) return; const _0x251f1f = _0x5f49a9['activeMeetingCharId'], _0x34a3c7 = _0x590c99(_0x251f1f); if (!_0x34a3c7) return; const _0x40edee = parseFloat(document[_0x100209(0x374)](_0x100209(0xaf4))['value']), _0x43033a = parseFloat(document[_0x100209(0x374)](_0x100209(0xb28))[_0x100209(0x330)]), _0x1ee902 = parseFloat(document[_0x100209(0x374)](_0x100209(0x506))[_0x100209(0x330)]) / 0x64; _0x34a3c7['spriteTransform'] = { 'x': _0x40edee, 'y': _0x43033a, 'scale': _0x1ee902 }; const _0x24f8cc = document[_0x100209(0x374)](_0x100209(0x8b2)), _0x3a9bf0 = 0x50 * _0x1ee902; _0x24f8cc[_0x100209(0x2d6)][_0x100209(0x5f7)] = _0x3a9bf0 + '%', _0x24f8cc[_0x100209(0x2d6)][_0x100209(0x6c8)] = _0x3a9bf0 + '%', _0x24f8cc[_0x100209(0x2d6)][_0x100209(0x373)] = _0x40edee + '%', _0x24f8cc['style'][_0x100209(0x6ea)] = _0x43033a + '%', _0x24f8cc[_0x100209(0x2d6)][_0x100209(0x3a6)] = _0x100209(0x908); } } document[_0x4d95ce(0x374)](_0x4d95ce(0xaf4))[_0x4d95ce(0x458)](_0x4d95ce(0x1bc), _0x1212b4), document['getElementById'](_0x4d95ce(0xb28))[_0x4d95ce(0x458)]('input', _0x1212b4), document[_0x4d95ce(0x374)](_0x4d95ce(0x506))[_0x4d95ce(0x458)]('input', _0x1212b4), _0x106be5[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x94c9c), _0x2efc0f[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x77ea64), _0x44f041['addEventListener'](_0x4d95ce(0x173), () => _0x55931e(![])), _0xc54275[_0x4d95ce(0x458)]('click', _0x5b26ee); function _0x412801(_0x5c5636) { const _0x271c42 = _0x4d95ce; if (_0x271c42(0x67b) === 'qcoJn') { const _0x43e502 = _0x590c99(_0x5c5636); if (!_0x43e502) return; const _0x440e64 = _0x5f49a9[_0x271c42(0x42d)][_0x271c42(0x7ed)](_0xdceed => _0xdceed[_0x271c42(0x433)] === 'private' && _0xdceed['participantIds'][_0x271c42(0x454)](_0x5c5636)), _0x2f475c = _0x30ad29(_0x440e64['id']), _0x3e0a89 = _0x5f49a9[_0x271c42(0xb06)][_0x271c42(0x8be)](_0x5a3e12 => _0x5a3e12['isOffline'])['pop'](), _0x53fad0 = document[_0x271c42(0x374)](_0x271c42(0x3f6)), _0x317c0b = document['getElementById']('galgame-text'); let _0xf0fe37 = null; if (_0x3e0a89) { if (_0x3e0a89['role'] === _0x271c42(0x913)) { const _0x4efb90 = _0x5f49a9[_0x271c42(0xac4)][_0x5c5636]; _0x4efb90 && _0x4efb90[_0x271c42(0x2ed)] > 0x0 && (_0xf0fe37 = _0x4efb90['at'](-0x1)); } else _0xf0fe37 = { 'speaker': _0x2f475c['name'], 'line': _0x3e0a89['content'], 'emotion': _0x271c42(0x48b) }; } _0xf0fe37 ? (_0x53fad0[_0x271c42(0x8e3)] = _0xf0fe37['speaker'] === 'narrator' ? '旁白' : _0xf0fe37[_0x271c42(0x88e)], _0x317c0b[_0x271c42(0x8e3)] = _0xf0fe37[_0x271c42(0xaa4)], _0xf0fe37[_0x271c42(0x88e)] === _0x43e502[_0x271c42(0x7d9)] ? _0xd74edd(_0x5c5636, _0xf0fe37['emotion']) : _0xd74edd(_0x5c5636, _0x271c42(0x48b))) : 'bnQUC' !== _0x271c42(0x77c) ? _0x1f3280(_0x271c42(0x3b6) + _0x2186e1['message']) : (_0x53fad0['textContent'] = _0x43e502[_0x271c42(0x7d9)], _0x317c0b[_0x271c42(0x8e3)] = _0x271c42(0x63b), _0xd74edd(_0x5c5636, _0x271c42(0x48b))); } else { const _0x144aba = _0x1255ac[_0x271c42(0x95f)]('li'); _0x144aba[_0x271c42(0x290)] = _0x271c42(0x8f5), _0x144aba[_0x271c42(0x814)][_0x271c42(0x723)] = _0x4cad0d['id'], _0x144aba[_0x271c42(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x372f91[_0x271c42(0x7d6)] || _0x1dadb0) + _0x271c42(0x189) + _0x57e79f[_0x271c42(0x7d9)] + _0x271c42(0x891), _0x144aba[_0x271c42(0x458)]('click', () => { _0xa52e81(_0x5e8869['id']); }), _0x144aba[_0x271c42(0x179)]('.char-info-wrapper')['addEventListener']('click', () => { _0x13ad49(_0x25c5ca['id']); }), _0x144aba[_0x271c42(0x179)](_0x271c42(0x2f7))['addEventListener'](_0x271c42(0x173), _0x5172a2 => { _0x5172a2['stopPropagation'](), _0x11523c(_0x432059['id']); }), _0x176e77[_0x271c42(0x962)](_0x144aba); } } function _0x4020ad() { const _0x593926 = _0x4d95ce, _0x5ad063 = new Date(), _0x529c27 = document[_0x593926(0x374)](_0x593926(0x901)), _0xae0e95 = document[_0x593926(0x374)](_0x593926(0x31e)); if (_0x529c27 && _0xae0e95) { const _0x286d8c = String(_0x5ad063['getHours']())[_0x593926(0x159)](0x2, '0'), _0x32b122 = String(_0x5ad063[_0x593926(0xaaa)]())['padStart'](0x2, '0'); _0x529c27[_0x593926(0x8e3)] = _0x286d8c + ':' + _0x32b122; const _0x3c2543 = _0x5ad063[_0x593926(0xa47)]() + 0x1, _0x5e0f70 = _0x5ad063[_0x593926(0x465)](), _0x334938 = [_0x593926(0x3bc), _0x593926(0xa03), _0x593926(0xabe), _0x593926(0x6f3), _0x593926(0x345), '星期五', _0x593926(0x1e8)][_0x5ad063['getDay']()]; _0xae0e95['textContent'] = _0x3c2543 + '月' + _0x5e0f70 + '日\x20' + _0x334938; } } const _0x3e6cf8 = document[_0x4d95ce(0x374)]('listen-together-modal'), _0xfd25ab = document[_0x4d95ce(0x374)](_0x4d95ce(0x956)), _0x3dda8a = document['getElementById']('cancel-listen-together'), _0x1f7c97 = document['getElementById']('listen-together-backdrop'), _0x2082f9 = document[_0x4d95ce(0x374)](_0x4d95ce(0x250)), _0x96f20d = document[_0x4d95ce(0x374)]('unified-audio-player'), _0x2a77f5 = document[_0x4d95ce(0x374)](_0x4d95ce(0x3cc)), _0x3c9203 = document[_0x4d95ce(0x374)]('lt-ui-close-btn'), _0x4c8adb = document[_0x4d95ce(0x374)]('lt-ui-lyrics-container'); let _0x2f945d = []; async function _0x3172c7() { const _0x50d9f2 = _0x4d95ce; if (_0x50d9f2(0x8d2) === 'aAigN') !_0x32d094 && (_0x627451 = _0x275240['createElement'](_0x50d9f2(0x754)), _0x34e7d5['id'] = _0x50d9f2(0x380), _0x397124[_0x50d9f2(0x962)](_0x355612)), _0x56e583[_0x50d9f2(0x279)] = _0x50d9f2(0x605) + _0x43dd5e + '</span>', _0x9b83ba[_0x50d9f2(0x2d6)][_0x50d9f2(0x416)] = _0x50d9f2(0x350); else { if (!_0x5f49a9[_0x50d9f2(0x824)]) return; _0x2082f9['innerHTML'] = _0x50d9f2(0x9d6), _0x3e6cf8[_0x50d9f2(0x8f0)]['add'](_0x50d9f2(0x18c)); const _0x5eb6d0 = await _0x5d0baf(); if (_0x5eb6d0[_0x50d9f2(0x2ed)] === 0x0) { if ('ymiIN' !== _0x50d9f2(0x36f)) { _0x2082f9[_0x50d9f2(0x279)] = _0x50d9f2(0x8a8); return; } else { const _0x400e3b = _0x596687[_0x50d9f2(0xa28)](_0x3c4233, _0x50d9f2(0x9a1)), _0x3e0585 = _0x400e3b[_0x50d9f2(0x7f3)](_0x217477), _0x8b1277 = _0x3e0585[_0x50d9f2(0xb3d)](_0x396cd4); _0x8b1277['onsuccess'] = () => _0x5773af(_0x8b1277['result'] ? _0x8b1277[_0x50d9f2(0x78a)][_0x50d9f2(0xb57)] : null), _0x8b1277['onerror'] = () => _0x332d22(_0x8b1277[_0x50d9f2(0x7a4)]); } } _0x2082f9[_0x50d9f2(0x279)] = '', _0x5eb6d0[_0x50d9f2(0x170)](_0x4620cf => { const _0x52890a = _0x50d9f2, _0x25e6fe = document[_0x52890a(0x95f)](_0x52890a(0x754)); _0x25e6fe[_0x52890a(0x290)] = _0x52890a(0xa52); const _0x4c0aa8 = _0x4620cf[_0x52890a(0x6ac)] ? URL[_0x52890a(0x7dc)](_0x4620cf['cover']) : _0x28cae8; _0x25e6fe[_0x52890a(0x279)] = _0x52890a(0x7cd) + _0x4c0aa8 + _0x52890a(0x786) + (_0x4620cf['info'][_0x52890a(0x746)] || '未知歌曲') + _0x52890a(0x2ef) + (_0x4620cf[_0x52890a(0x1cf)]['歌手'] || _0x52890a(0x6c0)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x25e6fe[_0x52890a(0x458)](_0x52890a(0x173), () => { _0x441e0c(_0x4620cf); }), _0x2082f9['appendChild'](_0x25e6fe); }); } } function _0x5aeb24() { const _0x3a9dda = _0x4d95ce; _0x3e6cf8[_0x3a9dda(0x8f0)][_0x3a9dda(0x31f)](_0x3a9dda(0x18c)); } async function _0x441e0c(_0x27b69d) { const _0x176643 = _0x4d95ce; if (_0x176643(0xb37) === _0x176643(0x5f0)) _0x32da38(_0x176643(0xb19))[_0x176643(0x8a2)](_0x39c896 => { const _0x2fa842 = _0x176643; if (_0x39c896) { const _0x361ab0 = _0xec89a2(_0x436444[_0x2fa842(0x5b0)]); _0x361ab0 && (delete _0x361ab0['spriteTransform'], _0x4705bd(), _0x10bd09(_0x361ab0['id'], _0x2fa842(0x48b)), _0x155181(_0x2fa842(0x8db)), _0x253e8f(!![])); } }); else { if (!_0x5f49a9[_0x176643(0x824)] || !_0x27b69d) return; let _0x1773c9 = null; if (_0x27b69d[_0x176643(0x6ac)]) try { _0x1773c9 = 'music_cover_' + Date[_0x176643(0x780)]() + '_' + Math[_0x176643(0x512)](), await _0x5a0c6c(_0x1773c9, _0x27b69d[_0x176643(0x6ac)]); } catch (_0x3911de) { console['error'](_0x176643(0x8cb), _0x3911de); } const _0x3816ae = { 'role': _0x176643(0x384), 'type': _0x176643(0x2c1), 'content': '[用户发起了听歌邀请:\x20' + _0x27b69d[_0x176643(0x1cf)][_0x176643(0x746)] + ']', 'songId': _0x27b69d['id'], 'songName': _0x27b69d[_0x176643(0x1cf)]['歌曲名称'], 'artist': _0x27b69d['info']['歌手'], 'coverId': _0x1773c9, 'timestamp': Date[_0x176643(0x780)]() }; _0x5f49a9['conversationHistory']['push'](_0x3816ae), _0x3c4da6(), _0x56911c(), _0x5aeb24(), setTimeout(_0x4f2db6, 0x64); } } _0xfd25ab['addEventListener'](_0x4d95ce(0x173), _0x3172c7), _0x3dda8a['addEventListener']('click', _0x5aeb24), _0x1f7c97[_0x4d95ce(0x458)](_0x4d95ce(0x173), _0x5aeb24); async function _0x11a061(_0x3d9b41, _0x4960e8, _0x42ca63) { const _0x5a467b = _0x4d95ce, _0x1b18f0 = _0x5f49a9['chats'][_0x5a467b(0x7ed)](_0x43263d => _0x43263d[_0x5a467b(0xa3f)] && _0x43263d[_0x5a467b(0xa3f)]['isActive']), _0x3f3f83 = _0x39d291(); if (_0x1b18f0 && _0x1b18f0['id'] !== _0x3f3f83['id']) { if (_0x5a467b(0x9c9) === _0x5a467b(0x757)) { const _0x54981a = _0x176879[_0x5a467b(0x7dc)](_0x217148); _0x4f19eb[_0x5a467b(0x984)] = _0x54981a, _0x7404d2[_0x5a467b(0xaa0)] = () => { const _0xf6a499 = _0x5a467b; _0x37404f[_0xf6a499(0x7b9)](_0x54981a); }; } else _0x1b18f0[_0x5a467b(0xa3f)] = null, _0xd5e395(_0x5a467b(0x505)), _0x39e4f0(); } else _0x1b18f0 && _0x1b18f0['id'] === _0x3f3f83['id'] && _0xd5e395('正在为你切换新的歌曲...'); _0x5a1a9e(!![], _0x5a467b(0x719)); if (!_0x3f3f83) { _0x5a1a9e(![]), _0xd5e395(_0x5a467b(0x1b5)); return; } const _0x58d934 = await _0x17dbaf(_0x3d9b41); if (!_0x58d934) { if (_0x5a467b(0x68d) === 'nVtIU') { _0x5a1a9e(![]), _0xd5e395('错误：找不到这首作为“信物”的歌。'); return; } else return; } _0x3f3f83[_0x5a467b(0xa3f)] = { 'isActive': !![], 'songId': _0x3d9b41, 'leaderId': _0x5a467b(0x384), 'songName': _0x58d934[_0x5a467b(0x1cf)][_0x5a467b(0x746)], 'artist': _0x58d934['info']['歌手'], 'cover': _0x58d934[_0x5a467b(0x6ac)] }, _0x39e4f0(), document[_0x5a467b(0x374)](_0x5a467b(0xa07))[_0x5a467b(0x984)] = _0x58d934[_0x5a467b(0x6ac)] ? URL[_0x5a467b(0x7dc)](_0x58d934[_0x5a467b(0x6ac)]) : _0x28cae8, document[_0x5a467b(0x374)](_0x5a467b(0xab5))[_0x5a467b(0x8e3)] = _0x58d934[_0x5a467b(0x1cf)][_0x5a467b(0x746)], document['getElementById'](_0x5a467b(0x6cc))[_0x5a467b(0x8e3)] = _0x58d934['info']['歌手'], _0x521c5d(_0x58d934), _0x2a77f5['style']['display'] = 'flex', setTimeout(() => _0x2a77f5['classList']['add'](_0x5a467b(0x18c)), 0xa), _0x42ca63[_0x5a467b(0x279)] = _0x5a467b(0x964) + _0x42ca63[_0x5a467b(0x179)](_0x5a467b(0x4c6))[_0x5a467b(0x18d)]; if (_0x5f49a9[_0x5a467b(0xb06)][_0x4960e8]) { if (_0x5a467b(0x35b) !== 'qlUly') for (const _0x2ed6ae of _0x32b1df[_0x5a467b(0x1df)]) { let _0x588365 = _0x50215a[_0x5a467b(0x1df)][_0x5a467b(0x7ed)](_0x235ce1 => _0x235ce1[_0x5a467b(0x7d9)] === _0x2ed6ae[_0x5a467b(0x7d9)]); if (_0x588365) _0x5acfce[_0x5a467b(0x238)](_0x588365['id']); else { const _0x3202f8 = { 'id': _0x5a467b(0x2df) + _0x9cad07[_0x5a467b(0x780)]() + '_' + _0x5954c9[_0x5a467b(0x512)](), 'name': _0x2ed6ae[_0x5a467b(0x7d9)], 'content': _0x2ed6ae[_0x5a467b(0x47e)] }; _0x452190[_0x5a467b(0x1df)]['push'](_0x3202f8), _0x43aec6[_0x5a467b(0x238)](_0x3202f8['id']); } } else _0x5f49a9[_0x5a467b(0xb06)][_0x4960e8][_0x5a467b(0x589)] = !![], _0x3c4da6(); } _0x5a1a9e(![]), _0x50c1fa(_0x3d9b41, [_0x3d9b41]), _0x16a5a4(_0x58d934, !![]); } function _0x4ee34c() { const _0x3e7bf2 = _0x4d95ce, _0x1c75f0 = _0x5f49a9[_0x3e7bf2(0x42d)][_0x3e7bf2(0x7ed)](_0x32b79c => _0x32b79c[_0x3e7bf2(0xa3f)] && _0x32b79c[_0x3e7bf2(0xa3f)][_0x3e7bf2(0x74e)]); _0x1c75f0 && (_0x1c75f0[_0x3e7bf2(0xa3f)] = null, _0x39e4f0(), _0xd5e395(_0x3e7bf2(0x7e8)), _0x16a5a4(), _0x2a77f5[_0x3e7bf2(0x8f0)][_0x3e7bf2(0x31f)](_0x3e7bf2(0x18c)), setTimeout(() => _0x2a77f5[_0x3e7bf2(0x2d6)]['display'] = 'none', 0x12c)); } function _0x2b130e(_0x188a3d) { const _0x1453c7 = _0x4d95ce; if ('HtyQY' !== _0x1453c7(0xac1)) { if (!_0x188a3d) return []; const _0x587352 = _0x188a3d['split']('\x0a'), _0xbca5a3 = [], _0x28b176 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x22d67e of _0x587352) { if (_0x1453c7(0x2ee) !== _0x1453c7(0xaec)) { const _0xed47b5 = _0x22d67e[_0x1453c7(0xa55)](_0x28b176); if (_0xed47b5) { const _0x38c32e = parseInt(_0xed47b5[0x1], 0xa), _0x33152d = parseInt(_0xed47b5[0x2], 0xa), _0x2354bc = parseInt(_0xed47b5[0x3], 0xa) * (_0xed47b5[0x3][_0x1453c7(0x2ed)] === 0x2 ? 0xa : 0x1), _0xf5250e = _0x38c32e * 0x3c + _0x33152d + _0x2354bc / 0x3e8, _0x4c4e08 = _0x22d67e[_0x1453c7(0xa38)](_0x28b176, '')[_0x1453c7(0x1c8)](); _0x4c4e08 && _0xbca5a3['push']({ 'time': _0xf5250e, 'text': _0x4c4e08 }); } } else { const _0x43aa17 = _0x505402[_0x1453c7(0xa28)](_0x2cdb58, _0x1453c7(0x4bc)), _0x42796e = _0x43aa17['objectStore'](_0x27117a), _0x3e9b5e = _0x42796e['delete'](_0x2a48bd); _0x3e9b5e[_0x1453c7(0x731)] = () => _0x182bee(), _0x3e9b5e['onerror'] = () => _0x3ba00b(_0x3e9b5e[_0x1453c7(0x7a4)]); } } return _0xbca5a3; } else throw new _0x2836f2(_0x1453c7(0x68e)); } function _0x521c5d(_0x5adfe1) { const _0x2bc3f1 = _0x4d95ce; _0x2f945d = _0x2b130e(_0x5adfe1[_0x2bc3f1(0x6f0)]), _0x4c8adb[_0x2bc3f1(0x279)] = ''; if (_0x2f945d['length'] === 0x0) { _0x4c8adb[_0x2bc3f1(0x279)] = _0x2bc3f1(0x94c); return; } _0x2f945d['forEach']((_0x286def, _0x2a2266) => { const _0x55c9cc = _0x2bc3f1, _0x5cecdb = document[_0x55c9cc(0x95f)]('p'); _0x5cecdb[_0x55c9cc(0x8e3)] = _0x286def[_0x55c9cc(0x3c5)], _0x5cecdb['id'] = _0x55c9cc(0xa19) + _0x2a2266, _0x4c8adb[_0x55c9cc(0x962)](_0x5cecdb); }); } function _0x47a036(_0x548f2b, _0x4902f4, _0x67d7d5, _0x1f6dc9) { const _0x592b73 = _0x4d95ce, _0x20da43 = (_0x1f6dc9 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x548f2b + _0x67d7d5 * Math[_0x592b73(0xaf3)](_0x20da43), 'y': _0x4902f4 + _0x67d7d5 * Math[_0x592b73(0x522)](_0x20da43) }; } function _0x5bdefe(_0x380df9) { const _0x59f550 = _0x4d95ce; if (_0x59f550(0x3c1) !== _0x59f550(0x3c1)) _0x50d2ec[_0x59f550(0x458)](_0x59f550(0x173), () => { const _0x15f3c1 = _0x59f550; _0x2e5ee4(_0x15f3c1(0x206)); }); else { const _0x267a92 = 'http://www.w3.org/2000/svg', _0x449b45 = document[_0x59f550(0x1b3)](_0x267a92, _0x59f550(0x8ba)), _0x2ef61a = 0xfa, _0x149569 = _0x2ef61a / 0x2, _0x3562ef = _0x2ef61a / 0x2, _0x883f1d = _0x2ef61a / 0x2 - 0x14; _0x449b45[_0x59f550(0x883)]('width', '100%'), _0x449b45[_0x59f550(0x883)]('height', _0x59f550(0x1ba)), _0x449b45[_0x59f550(0x883)](_0x59f550(0x37b), _0x59f550(0x53f) + _0x2ef61a + '\x20' + _0x2ef61a); const _0x33981c = Object['values'](_0x380df9)[_0x59f550(0x64a)]((_0x3d5008, _0x2c736d) => _0x3d5008 + _0x2c736d, 0x0); if (_0x33981c === 0x0) return _0x449b45; let _0x62f49 = -0x5a; const _0xf06894 = [_0x59f550(0x3b7), _0x59f550(0x389), '#99ff99', _0x59f550(0x56a), _0x59f550(0x53c), _0x59f550(0x310), _0x59f550(0x9d3), _0x59f550(0x149)]; let _0x26bffe = 0x0; for (const _0x2b2723 in _0x380df9) { const _0x41fc6c = _0x380df9[_0x2b2723]; if (_0x41fc6c <= 0x0) continue; const _0x548bab = _0x41fc6c / _0x33981c * 0x168, _0x2449b5 = _0x62f49 + _0x548bab, _0x1c52c4 = _0x47a036(_0x149569, _0x3562ef, _0x883f1d, _0x2449b5), _0x228e14 = _0x47a036(_0x149569, _0x3562ef, _0x883f1d, _0x62f49), _0x38e2cc = _0x548bab > 0xb4 ? '1' : '0', _0x6fe6ac = ['M', _0x1c52c4['x'], _0x1c52c4['y'], 'A', _0x883f1d, _0x883f1d, 0x0, _0x38e2cc, 0x1, _0x228e14['x'], _0x228e14['y'], 'L', _0x149569, _0x3562ef, 'Z'][_0x59f550(0x414)]('\x20'), _0x374d2c = document[_0x59f550(0x1b3)](_0x267a92, _0x59f550(0x152)); _0x374d2c[_0x59f550(0x883)]('d', _0x6fe6ac), _0x374d2c[_0x59f550(0x883)](_0x59f550(0x321), _0xf06894[_0x26bffe % _0xf06894[_0x59f550(0x2ed)]]), _0x26bffe++; const _0x4a7941 = document[_0x59f550(0x1b3)](_0x267a92, _0x59f550(0x638)); _0x4a7941[_0x59f550(0x8e3)] = _0x2b2723 + ':\x20' + _0x41fc6c[_0x59f550(0x539)](0x2) + '\x20(' + (_0x41fc6c / _0x33981c * 0x64)[_0x59f550(0x539)](0x1) + '%)', _0x374d2c[_0x59f550(0x962)](_0x4a7941), _0x449b45['appendChild'](_0x374d2c), _0x62f49 = _0x2449b5; } return _0x449b45; } } function _0x27638f() { const _0x16566b = _0x4d95ce; if (_0x16566b(0xa97) !== _0x16566b(0x81d)) { if (_0x2f945d['length'] === 0x0) return; const _0x4d79eb = _0x96f20d[_0x16566b(0xaa6)]; let _0x56b567 = -0x1; for (let _0x454ee4 = 0x0; _0x454ee4 < _0x2f945d[_0x16566b(0x2ed)]; _0x454ee4++) { if (_0x4d79eb >= _0x2f945d[_0x454ee4]['time']) _0x16566b(0x7ca) === _0x16566b(0x470) ? _0x4811ea(_0x16566b(0x554) + _0x2d4598[_0x16566b(0xb58)]) : _0x56b567 = _0x454ee4; else break; } if (_0x56b567 !== -0x1) { const _0x256210 = _0x4c8adb['querySelectorAll']('p'); _0x256210['forEach'](_0x5ea9eb => _0x5ea9eb[_0x16566b(0x8f0)]['remove']('active')); const _0x26a534 = document['getElementById'](_0x16566b(0xa19) + _0x56b567); _0x26a534 && (_0x16566b(0x5a7) !== _0x16566b(0x7f5) ? (_0x26a534[_0x16566b(0x8f0)][_0x16566b(0x132)](_0x16566b(0xa54)), _0x26a534['scrollIntoView']({ 'behavior': 'smooth', 'block': _0x16566b(0x634) })) : _0x4efc5b['click']()); } } else return _0x3a34d8[_0x16566b(0x4d5)]['find'](_0x5c7842 => _0x5c7842['id'] === _0x86b8f7); } _0x3c9203['addEventListener'](_0x4d95ce(0x173), () => { const _0xae5b1b = _0x4d95ce; if (_0xae5b1b(0x94e) === _0xae5b1b(0x885)) { const _0x907516 = _0x1493a9[_0xae5b1b(0x77e)](/:\s(.+)/); if (_0x907516[_0xae5b1b(0x2ed)] > 0x1) { const _0x58c5d9 = _0x907516[0x0][_0xae5b1b(0x1c8)](), _0x299b06 = _0x907516[0x1]['trim']()[_0xae5b1b(0xa38)](/^"|"$/g, ''); _0x8c6af6[_0x58c5d9] = _0x299b06; } } else _0x2a77f5[_0xae5b1b(0x8f0)][_0xae5b1b(0x31f)](_0xae5b1b(0x18c)), setTimeout(() => _0x2a77f5[_0xae5b1b(0x2d6)][_0xae5b1b(0x416)] = _0xae5b1b(0x8b4), 0x12c); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x8ab))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x12a9e0 = _0x4d95ce; 'ZBtMq' === 'QVSnA' ? (_0x13278c[_0x12a9e0(0x2d6)]['backgroundImage'] = 'url(' + _0x30bc89 + ')', _0x98af74[_0x12a9e0(0x2d6)][_0x12a9e0(0x59a)] = _0x12a9e0(0x6ac), _0x257a28[_0x12a9e0(0x2d6)]['backgroundPosition'] = _0x12a9e0(0x634), _0x5eb9ea[_0x12a9e0(0x2d6)]['color'] = 'white', _0x560d75['querySelectorAll']('.widget-info\x20>\x20div')[_0x12a9e0(0x170)](_0x4faaa6 => { const _0x2a870a = _0x12a9e0; _0x4faaa6[_0x2a870a(0x2d6)][_0x2a870a(0x614)] = _0x2a870a(0x637); })) : _0x5f49a9['listenTogetherSession'] && _0x5f49a9['listenTogetherSession'][_0x12a9e0(0x74e)] && (_0x2a77f5['style']['display'] = 'flex', setTimeout(() => _0x2a77f5[_0x12a9e0(0x8f0)][_0x12a9e0(0x132)]('show'), 0xa)); }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x931), _0x27638f); const _0x120f2 = document[_0x4d95ce(0x374)]('widget-play-pause-btn'), _0x10950e = document[_0x4d95ce(0x374)](_0x4d95ce(0x6eb)), _0x12f396 = document[_0x4d95ce(0x374)]('widget-prev-btn'); _0x120f2[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x3374aa = _0x4d95ce; if (_0x3374aa(0xac7) !== _0x3374aa(0xac7)) { const _0x257360 = _0x4eda2e['createElement']('p'); _0x257360[_0x3374aa(0x2d6)][_0x3374aa(0x60e)] = _0x3374aa(0x13d), _0x257360[_0x3374aa(0x8e3)] = _0x5f4a67, _0x512d66['appendChild'](_0x257360); } else _0x96f20d['src'] && ('PfSwA' === _0x3374aa(0x558) ? _0x273981[_0x3374aa(0x433)] = _0x3374aa(0x3c5) : _0x96f20d[_0x3374aa(0xab7)] ? _0x96f20d[_0x3374aa(0x792)]() : _0x96f20d[_0x3374aa(0x51a)]()); }), _0x10950e['addEventListener'](_0x4d95ce(0x173), () => { const _0x2aa1f2 = _0x4d95ce; if (_0x2aa1f2(0x65c) !== _0x2aa1f2(0x65c)) _0x5772b0[_0x2aa1f2(0x8ed)] = ![]; else { if (_0x34f517[_0x2aa1f2(0x2ed)] === 0x0) return; _0x163a93 = (_0x163a93 + 0x1) % _0x34f517[_0x2aa1f2(0x2ed)], _0x50c1fa(_0x34f517[_0x163a93], _0x34f517); } }), _0x12f396[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x3b11b0 = _0x4d95ce; if (_0x34f517[_0x3b11b0(0x2ed)] === 0x0) return; _0x163a93 = (_0x163a93 - 0x1 + _0x34f517['length']) % _0x34f517[_0x3b11b0(0x2ed)], _0x50c1fa(_0x34f517[_0x163a93], _0x34f517); }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x792), () => { const _0x41ffb6 = _0x4d95ce; 'nZwvP' !== _0x41ffb6(0x4a2) ? _0x776243[_0x41ffb6(0x238)](_0x4fa422['id']) : _0x120f2[_0x41ffb6(0x8e3)] = '❚❚'; }), _0x96f20d[_0x4d95ce(0x458)]('pause', () => { _0x120f2['textContent'] = '▶'; }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x9eb), () => { const _0x3c8a76 = _0x4d95ce; _0x10950e[_0x3c8a76(0x173)](); }), _0x96f20d[_0x4d95ce(0x458)]('play', () => { const _0x4ad07a = _0x4d95ce; if (_0x4ad07a(0x360) === _0x4ad07a(0x360)) { const _0x20694c = document[_0x4ad07a(0x374)](_0x4ad07a(0x47f)); if (_0x20694c) _0x20694c['textContent'] = '❚❚'; } else _0x950cf7['error'](_0x4ad07a(0x6a9), _0x398f7b), _0xd8ca50 = _0x1748b8; }), _0x96f20d['addEventListener'](_0x4d95ce(0x51a), () => { const _0x59b7ba = _0x4d95ce, _0x23176b = document[_0x59b7ba(0x374)](_0x59b7ba(0x47f)); if (_0x23176b) _0x23176b[_0x59b7ba(0x8e3)] = '▶'; }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x9eb), () => { const _0x1b48e0 = _0x4d95ce, _0x1cbee1 = document[_0x1b48e0(0x374)](_0x1b48e0(0x243)); _0x1cbee1 && ('nlfWV' === _0x1b48e0(0x6b9) ? _0x1cbee1[_0x1b48e0(0x173)]() : (_0x480f78(), _0x57fb7e(_0x1b48e0(0x2c9), 'home'))); }); function _0xcca778(_0x543b53) { const _0x10e2aa = _0x4d95ce; if (_0x10e2aa(0x4b7) !== 'zPAZG') { const _0x28a16f = (_0x22c2cd - _0x222d3b) / (0x3e8 * 0x3c); _0x28a16f < 0x3c ? _0x169523 += _0x10e2aa(0x171) : _0x2831fb += _0x10e2aa(0x560) + _0x18327f['round'](_0x28a16f / 0x3c) + _0x10e2aa(0x29f); } else { if (!_0x543b53 || typeof _0x543b53 !== _0x10e2aa(0x267)) return null; const _0x588b2f = _0x543b53[_0x10e2aa(0x656)]('['), _0x3ab08c = _0x543b53[_0x10e2aa(0xa40)](']'); if (_0x588b2f > -0x1 && _0x3ab08c > _0x588b2f) return _0x543b53['substring'](_0x588b2f, _0x3ab08c + 0x1); return null; } } document[_0x4d95ce(0x374)](_0x4d95ce(0x596))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x55a8fc = _0x4d95ce; _0x55a8fc(0x675) !== 'FwgaS' ? _0x4993f3[_0x55a8fc(0x433)] === _0x55a8fc(0x24e) && (_0x3f4b69['participantIds'] = _0x417a2c[_0x55a8fc(0x258)]['filter'](_0x513a81 => _0x513a81 !== _0x16a6bc)) : (_0x5d9b89(), _0x53a558(_0x55a8fc(0xa81), _0x55a8fc(0x529))); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x61c))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x53a558(_0x4d95ce(0x529), 'accounting')); const _0x4c0817 = document[_0x4d95ce(0x374)]('tab-record-expense'), _0x3aabe8 = document[_0x4d95ce(0x374)](_0x4d95ce(0x351)); _0x4c0817['addEventListener'](_0x4d95ce(0x173), _0x5d9b89), _0x3aabe8[_0x4d95ce(0x458)]('click', () => { const _0x5eb10e = _0x4d95ce; if (_0x5eb10e(0x6d9) === 'bXXod') { const _0xa49879 = _0x4cb63e[_0x5eb10e(0xa28)](_0x3639a9, _0x5eb10e(0x4bc)), _0x2b3917 = _0xa49879[_0x5eb10e(0x7f3)](_0x33230d), _0x4726a0 = _0x2b3917['put'](_0x5a9744); _0x4726a0[_0x5eb10e(0x731)] = () => _0x33096b(_0x4726a0[_0x5eb10e(0x78a)]), _0x4726a0[_0x5eb10e(0x33c)] = () => _0x1e8982(_0x4726a0[_0x5eb10e(0x7a4)]); } else _0x4c0817[_0x5eb10e(0x8f0)][_0x5eb10e(0x31f)](_0x5eb10e(0xa54)), _0x3aabe8[_0x5eb10e(0x8f0)]['add'](_0x5eb10e(0xa54)), _0xd18f7f(); }); function _0x5d9b89() { const _0x1efab5 = _0x4d95ce; if (_0x1efab5(0xb4e) === _0x1efab5(0x33d)) { let _0x9b098a = _0x384e52[_0x1efab5(0x788)][_0x1efab5(0x7ed)](_0x3366e9 => _0x3366e9['characterId'] === _0x585e9b); !_0x9b098a && (_0x9b098a = { 'characterId': _0x496c08, 'entries': [] }, _0x3e9613[_0x1efab5(0x788)][_0x1efab5(0x238)](_0x9b098a)); _0x9b098a[_0x1efab5(0x4f1)][_0x1efab5(0x238)]({ 'timestamp': _0x785f50[_0x1efab5(0x780)](), 'author': _0x3e167b, 'content': _0x2e810f }), _0x462560(); const _0x4d52a5 = _0x9b098a['entries'][_0x1efab5(0x2ed)]; _0x5e473f[_0x1efab5(0x55e)] = _0x5c86e1[_0x1efab5(0x8bd)](_0x4d52a5 / 0x2) - 0x1, _0x50f494(); } else _0x3aabe8['classList']['remove'](_0x1efab5(0xa54)), _0x4c0817['classList']['add']('active'), _0x71e9a2(); } function _0x71e9a2() { const _0x213e6b = _0x4d95ce, _0x5b779e = document[_0x213e6b(0x374)](_0x213e6b(0x481)); document[_0x213e6b(0x374)](_0x213e6b(0xa45))[_0x213e6b(0x8e3)] = _0x213e6b(0x17e), document['getElementById']('header-actions')[_0x213e6b(0x279)] = '', _0x5b779e[_0x213e6b(0x279)] = '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', _0x3b1639(), document[_0x213e6b(0x374)](_0x213e6b(0x49a))[_0x213e6b(0x458)](_0x213e6b(0x173), _0x261652), document[_0x213e6b(0x374)](_0x213e6b(0x1dc))[_0x213e6b(0x458)](_0x213e6b(0x173), _0x42a5b3 => { const _0x1ff241 = _0x213e6b; if (_0x42a5b3[_0x1ff241(0x89a)][_0x1ff241(0x8f0)][_0x1ff241(0x998)]('delete-expense-btn')) { if (_0x1ff241(0xac2) !== _0x1ff241(0xac2)) _0x260448['preferences'][_0x1ff241(0x172)] = null, _0x488cc8(), _0x1b1499(), _0x1fc2fd(_0x1ff241(0x8c5)); else { const _0x217b69 = _0x42a5b3['target'][_0x1ff241(0x814)]['id']; _0xd56340('确定要删除这笔记录吗？')[_0x1ff241(0x8a2)](_0x2b3755 => { _0x2b3755 && _0x2a2cf3(_0x217b69); }); } } }), document[_0x213e6b(0x374)]('expense-description')[_0x213e6b(0x347)](); } function _0xea88b6(_0x4db73a, _0x5be723) { const _0x52a74d = _0x4d95ce, _0x2ca8e8 = document[_0x52a74d(0x374)](_0x52a74d(0x481)), _0x467c4b = document['getElementById'](_0x52a74d(0x320)); document['getElementById'](_0x52a74d(0xa45))[_0x52a74d(0x8e3)] = _0x5be723 + _0x52a74d(0x268); const _0x327810 = _0x4db73a[_0x52a74d(0x583)][_0x52a74d(0x64a)]((_0x544798, _0x122128) => _0x544798 + (_0x122128[_0x52a74d(0xaac)] || 0x0), 0x0); let _0x5dcd5b = _0x52a74d(0x131) + _0x327810[_0x52a74d(0x539)](0x2) + '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>'; _0x2ca8e8[_0x52a74d(0x279)] = _0x5dcd5b; const _0x5abe79 = document[_0x52a74d(0x374)]('categorized-expenses-list'), _0x5e1b8e = { '餐饮美食': _0x52a74d(0x412), '交通出行': _0x52a74d(0xa84), '购物消费': _0x52a74d(0x62f), '生活服务': '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '休闲娱乐': _0x52a74d(0x302), '医疗健康': _0x52a74d(0x7fb), '人情红包': _0x52a74d(0x45d), '其他杂项': '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '默认': _0x52a74d(0x594) }; _0x4db73a[_0x52a74d(0x583)][_0x52a74d(0x170)](_0x1660a5 => { const _0x100dcc = _0x52a74d, _0x2f22e2 = document['createElement'](_0x100dcc(0x754)); _0x2f22e2[_0x100dcc(0x290)] = _0x100dcc(0x12f), _0x2f22e2[_0x100dcc(0x2d6)][_0x100dcc(0x431)] = _0x100dcc(0x7f8), _0x2f22e2['style'][_0x100dcc(0x248)] = _0x100dcc(0x99f), _0x2f22e2[_0x100dcc(0x2d6)]['padding'] = _0x100dcc(0x6c4), _0x2f22e2['style'][_0x100dcc(0x2f5)] = '0'; const _0x2b3a0a = _0x5e1b8e[_0x1660a5[_0x100dcc(0x3b4)]] || _0x5e1b8e['默认'], _0x2c27ee = _0x100dcc(0x65d) + _0x2b3a0a + _0x100dcc(0x254), _0x57fb69 = _0x100dcc(0x623) + _0x2c27ee + _0x100dcc(0x31c) + _0x1660a5[_0x100dcc(0x551)] + _0x100dcc(0x9a5) + (_0x1660a5[_0x100dcc(0x3b4)] || _0x100dcc(0x3f0)) + _0x100dcc(0x726) + (_0x1660a5['amount'] || 0x0)[_0x100dcc(0x539)](0x2) + _0x100dcc(0x213); let _0x2de11e = ''; if (_0x1660a5[_0x100dcc(0x41d)] && _0x1660a5[_0x100dcc(0x41d)][_0x100dcc(0x723)]) { if (_0x100dcc(0x833) === _0x100dcc(0xafe)) { _0x10c9b8['innerHTML'] = _0x100dcc(0x74a); return; } else { const _0x46296a = _0x590c99(_0x1660a5[_0x100dcc(0x41d)][_0x100dcc(0x723)]); _0x46296a && (_0x100dcc(0x8cc) === 'tUVzE' ? _0x3951ce[_0x100dcc(0x6e2)](_0x100dcc(0x38f) + _0x12fc00) : _0x2de11e = _0x100dcc(0x3bd) + _0x46296a[_0x100dcc(0x7d6)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x46296a[_0x100dcc(0x7d9)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x1660a5[_0x100dcc(0x41d)][_0x100dcc(0x3c5)] + _0x100dcc(0xa44)); } } _0x2f22e2[_0x100dcc(0x279)] = _0x57fb69 + _0x2de11e, _0x5abe79[_0x100dcc(0x962)](_0x2f22e2); }), _0x467c4b[_0x52a74d(0x279)] = _0x52a74d(0x88b), document[_0x52a74d(0x374)]('re-record-button')[_0x52a74d(0x458)](_0x52a74d(0x173), async () => { const _0x34df52 = _0x52a74d, _0x5be10b = await _0xd56340(_0x34df52(0xa3a)); if (_0x5be10b) { if ('jQVAZ' === _0x34df52(0x323)) _0x100698['boundUserProfileId'] = _0x33e32a[_0x34df52(0x4f6)]; else { const _0x596608 = _0x5f49a9[_0x34df52(0x6a1)][_0x5be723]; _0x596608 && _0x596608[_0x34df52(0x4b9)] && _0x5f49a9[_0x34df52(0x4fb)][_0x34df52(0x238)](..._0x596608[_0x34df52(0x4b9)]), delete _0x5f49a9[_0x34df52(0x6a1)][_0x5be723], _0x39e4f0(), _0x71e9a2(); } } }); } function _0xd18f7f() { const _0x370b98 = _0x4d95ce, _0x8950b4 = document[_0x370b98(0x374)](_0x370b98(0x481)); document[_0x370b98(0x374)](_0x370b98(0xa45))[_0x370b98(0x8e3)] = '账本', document[_0x370b98(0x374)](_0x370b98(0x320))[_0x370b98(0x279)] = ''; const _0x2376d7 = Object[_0x370b98(0x9ec)](_0x5f49a9[_0x370b98(0x6a1)])['sort']((_0x5705ee, _0x31b68a) => new Date(_0x31b68a) - new Date(_0x5705ee)); if (_0x2376d7[_0x370b98(0x2ed)] === 0x0) { if (_0x370b98(0xa17) === _0x370b98(0x5e1)) { const _0x325444 = _0xb687ff['userProfiles'][_0x370b98(0x7ed)](_0x7ba675 => _0x7ba675['id'] === _0x3b4f14['activeUserProfileId']) || { 'name': '你' }, _0x36916c = _0x42b060[_0x370b98(0x788)]['find'](_0xd4420b => _0xd4420b['characterId'] === _0x47ebbe); if (!_0x36916c || !_0x36916c[_0x370b98(0x4f1)] || _0x36916c[_0x370b98(0x4f1)][_0x370b98(0x2ed)] === 0x0) return ''; const _0x225d43 = _0x36916c[_0x370b98(0x4f1)][_0x370b98(0xa24)](-0x8), _0x22568b = _0x225d43[_0x370b98(0x190)](_0x30c221 => { const _0x24c449 = _0x370b98, _0xc4a60d = _0x30c221['author'] === _0x24c449(0x384) ? _0x325444[_0x24c449(0x7d9)] : _0xa89b98(_0x30c221['author'])['name']; return _0x24c449(0x260) + new _0x25c623(_0x30c221[_0x24c449(0x75a)])[_0x24c449(0x8c4)]() + ']\x20' + _0xc4a60d + _0x24c449(0x59d) + _0x30c221['content']; })[_0x370b98(0x414)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0x325444[_0x370b98(0x7d9)] + '\x20之间的私密内容)\x0a' + _0x22568b; } else { _0x8950b4[_0x370b98(0x279)] = _0x370b98(0x582); return; } } _0x8950b4['innerHTML'] = '', _0x2376d7[_0x370b98(0x170)](_0x4af0dd => { const _0x1a7b24 = _0x370b98, _0x38052b = document[_0x1a7b24(0x95f)](_0x1a7b24(0x754)); _0x38052b[_0x1a7b24(0x290)] = _0x1a7b24(0x12f), _0x38052b[_0x1a7b24(0x2d6)][_0x1a7b24(0x4e7)] = _0x1a7b24(0x17f); const _0x2aaa8c = _0x5f49a9[_0x1a7b24(0x6a1)][_0x4af0dd], _0xff6493 = _0x2aaa8c[_0x1a7b24(0x583)][_0x1a7b24(0x64a)]((_0x494ed, _0x34e485) => _0x494ed + (_0x34e485[_0x1a7b24(0xaac)] || 0x0), 0x0); _0x38052b[_0x1a7b24(0x279)] = _0x1a7b24(0x5c7) + _0x4af0dd + _0x1a7b24(0x915) + _0xff6493[_0x1a7b24(0x539)](0x2) + _0x1a7b24(0x2ea), _0x38052b[_0x1a7b24(0x458)]('click', () => { const _0x47b116 = _0x1a7b24; _0x4c0817[_0x47b116(0x8f0)][_0x47b116(0x31f)](_0x47b116(0xa54)), _0x3aabe8['classList']['add']('active'), _0xea88b6(_0x2aaa8c, _0x4af0dd); }), _0x8950b4[_0x1a7b24(0x962)](_0x38052b); }); } function _0x261652() { const _0x3c3ac0 = _0x4d95ce, _0x97f723 = document[_0x3c3ac0(0x374)](_0x3c3ac0(0x720)), _0x459a43 = document[_0x3c3ac0(0x374)](_0x3c3ac0(0xaa8)), _0xe84d98 = _0x97f723[_0x3c3ac0(0x330)][_0x3c3ac0(0x1c8)](), _0xc8387f = parseFloat(_0x459a43[_0x3c3ac0(0x330)]); if (!_0xe84d98 || isNaN(_0xc8387f) || _0xc8387f <= 0x0) { if (_0x3c3ac0(0x37a) === _0x3c3ac0(0x37a)) { _0xd5e395(_0x3c3ac0(0x5d1)); return; } else _0xe65848[_0x3c3ac0(0x7a4)](_0x3c3ac0(0x6ed), _0x2295d1, _0x3c3ac0(0x234), _0x9bb478), _0x3b36e6[_0x3c3ac0(0xb06)][_0x3c3ac0(0x238)]({ 'role': _0x3c3ac0(0x913), 'senderId': _0x4c4a3b['id'], 'timestamp': _0x36210f[_0x3c3ac0(0x780)](), 'isOffline': !![], 'content': _0x3c3ac0(0x343) + _0x553f54 + ']' }); } _0x5f49a9['accountingData'][_0x3c3ac0(0x238)]({ 'id': _0x3c3ac0(0x403) + Date['now'](), 'description': _0xe84d98, 'amount': _0xc8387f, 'timestamp': Date[_0x3c3ac0(0x780)]() }), _0x39e4f0(), _0x3b1639(), _0x97f723[_0x3c3ac0(0x330)] = '', _0x459a43['value'] = '', _0x97f723[_0x3c3ac0(0x347)](); } function _0x2a2cf3(_0x57c3fc) { const _0x1f64d4 = _0x4d95ce; if (_0x1f64d4(0xa1f) !== _0x1f64d4(0xa1f)) { const _0x447e2f = _0x4ffaf5['userProfiles'][_0x1f64d4(0x7ed)](_0x10daef => _0x10daef['id'] === _0x102c6f); if (_0x447e2f) _0x1e29ff['assign'](_0x447e2f, _0x5cb219); } else { const _0x147388 = _0x5f49a9[_0x1f64d4(0x4fb)]['findIndex'](_0x1983d1 => _0x1983d1['id'] === _0x57c3fc); _0x147388 > -0x1 && (_0x5f49a9['accountingData'][_0x1f64d4(0x69d)](_0x147388, 0x1), _0x39e4f0(), _0x3b1639()); } } function _0x3b1639() { const _0x570467 = _0x4d95ce; if (_0x570467(0x859) !== 'DkVKt') { _0x119d22(_0x570467(0xb02), 'worldBook'); if (_0x5ab139) { const _0x24234f = _0x5b7c4b[_0x570467(0x1df)][_0x570467(0x7ed)](_0x194525 => _0x194525['id'] === _0x1e5280); if (!_0x24234f) return; _0x269732[_0x570467(0x374)](_0x570467(0x555))['value'] = _0x24234f['id'], _0x444289['getElementById'](_0x570467(0x466))['textContent'] = '编辑条目', _0x501668['getElementById'](_0x570467(0x880))[_0x570467(0x330)] = _0x24234f[_0x570467(0x7d9)], _0x1405b2[_0x570467(0x374)]('world-book-edit-content')[_0x570467(0x330)] = _0x24234f['content']; } else _0x400e09[_0x570467(0x374)](_0x570467(0x555))['value'] = '', _0xf8cfe6['getElementById'](_0x570467(0x466))[_0x570467(0x8e3)] = _0x570467(0xafb), _0x5e3cd1[_0x570467(0x374)](_0x570467(0x880))[_0x570467(0x330)] = '', _0x4ff7f2[_0x570467(0x374)](_0x570467(0x349))[_0x570467(0x330)] = ''; } else { const _0x12785f = document[_0x570467(0x374)](_0x570467(0x1dc)), _0x577a8a = document['getElementById'](_0x570467(0xb5e)), _0x3c38a6 = new Date(), _0x5edb42 = _0x5f49a9[_0x570467(0x4fb)][_0x570467(0x8be)](_0xf4fd44 => new Date(_0xf4fd44[_0x570467(0x75a)])[_0x570467(0x4b4)]() === _0x3c38a6[_0x570467(0x4b4)]()); if (_0x5edb42[_0x570467(0x2ed)] === 0x0) { if ('hMuug' === _0x570467(0x7ce)) { _0x12785f[_0x570467(0x279)] = _0x570467(0xa25), _0x577a8a[_0x570467(0x279)] = ''; return; } else _0x3211b1(_0x536784, { 'force': !![], 'delayMs': _0x7bbed8 }), _0x346ef5 += 0x1f4; } _0x12785f['innerHTML'] = '', _0x5edb42[_0x570467(0x43a)]((_0x3123a5, _0x423eee) => _0x423eee['timestamp'] - _0x3123a5[_0x570467(0x75a)])[_0x570467(0x170)](_0x541895 => { const _0x23c3b6 = _0x570467, _0x2808f5 = document[_0x23c3b6(0x95f)]('div'); _0x2808f5[_0x23c3b6(0x290)] = _0x23c3b6(0x12f), _0x2808f5[_0x23c3b6(0x279)] = _0x23c3b6(0x5c7) + _0x541895[_0x23c3b6(0x551)] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x541895[_0x23c3b6(0xaac)][_0x23c3b6(0x539)](0x2) + _0x23c3b6(0x986) + _0x541895['id'] + _0x23c3b6(0x811), _0x12785f[_0x23c3b6(0x962)](_0x2808f5); }), _0x577a8a && (_0x570467(0x5cc) === _0x570467(0x37e) ? (_0x968b07[_0x570467(0x7a4)]('加载\x20' + _0x11324b + _0x570467(0x4a7), _0xddafbf), _0x2ffd0d['innerHTML'] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x3c0f09[_0x570467(0xb58)] + _0x570467(0xb1e)) : (_0x577a8a[_0x570467(0x279)] = _0x570467(0xa14), document[_0x570467(0x374)](_0x570467(0xad2))[_0x570467(0x458)](_0x570467(0x173), _0xee4b51))); } } async function _0xee4b51() { const _0x94deb4 = _0x4d95ce; if (_0x94deb4(0x5d6) === _0x94deb4(0x5d6)) { const _0xdcf9db = new Date(), _0x3125e1 = _0xdcf9db[_0x94deb4(0x192)]() + '-' + String(_0xdcf9db['getMonth']() + 0x1)['padStart'](0x2, '0') + '-' + String(_0xdcf9db[_0x94deb4(0x465)]())[_0x94deb4(0x159)](0x2, '0'); if (_0x5f49a9[_0x94deb4(0x6a1)][_0x3125e1]) { if (_0x94deb4(0x4c1) !== _0x94deb4(0x4c1)) _0x531059 = _0x1a8fde['userProfile'][_0x94deb4(0x7d9)] || '我'; else { _0xd5e395(_0x94deb4(0xafa)); return; } } const _0xdc9941 = _0x5f49a9[_0x94deb4(0x4fb)][_0x94deb4(0x8be)](_0x2f8f81 => new Date(_0x2f8f81['timestamp'])[_0x94deb4(0x4b4)]() === _0xdcf9db[_0x94deb4(0x4b4)]()); if (_0xdc9941[_0x94deb4(0x2ed)] === 0x0) { _0xd5e395(_0x94deb4(0x379)); return; } _0x5a1a9e(!![], _0x94deb4(0xb30)); try { const _0xe09c80 = [_0x94deb4(0x39c), _0x94deb4(0xa0d), '购物消费', _0x94deb4(0x4ec), _0x94deb4(0xa8b), '医疗健康', '人情红包', _0x94deb4(0x46c)], _0xc87409 = _0xdc9941[_0x94deb4(0x190)](_0x537274 => '-\x20' + _0x537274[_0x94deb4(0x551)] + ':\x20' + _0x537274['amount'])[_0x94deb4(0x414)]('\x0a'), _0x162a5b = _0x5f49a9['characters'][_0x94deb4(0x190)](_0x20949b => { const _0x4a79d8 = _0x94deb4, _0x47a4e7 = _0x5f49a9[_0x4a79d8(0x42d)]['find'](_0x1fd5d9 => _0x1fd5d9[_0x4a79d8(0x433)] === 'private' && _0x1fd5d9['participantIds'][_0x4a79d8(0x454)](_0x20949b['id'])), _0x46b2d5 = _0x5f49a9[_0x4a79d8(0x4d5)][_0x4a79d8(0x7ed)](_0x6a096f => _0x6a096f['id'] === (_0x47a4e7?.['boundUserProfileId'] || _0x5f49a9[_0x4a79d8(0x4f6)])) || { 'id': _0x4a79d8(0x4ea), 'name': '你' }; let _0x955133 = ''; return _0x20949b[_0x4a79d8(0x128)] && _0x20949b[_0x4a79d8(0x128)][_0x4a79d8(0x2ed)] > 0x0 && ('PmLav' === _0x4a79d8(0x921) ? _0x4c165a(_0x4a79d8(0x3b6) + _0x381a20[_0x4a79d8(0xb58)]) : _0x955133 = _0x20949b[_0x4a79d8(0x128)][_0x4a79d8(0x190)](_0x5f3bdf => _0x5f49a9[_0x4a79d8(0x1df)][_0x4a79d8(0x7ed)](_0x4f9354 => _0x4f9354['id'] === _0x5f3bdf))[_0x4a79d8(0x8be)](Boolean)[_0x4a79d8(0x190)](_0x297922 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x297922[_0x4a79d8(0x7d9)] + _0x4a79d8(0x8f6) + _0x297922[_0x4a79d8(0x47e)])[_0x4a79d8(0x414)]('')), '\x20\x20-\x20角色ID:\x20' + _0x20949b['id'] + _0x4a79d8(0x25a) + _0x20949b[_0x4a79d8(0x7d9)] + '\x0a\x20\x20\x20\x20人设:\x20' + _0x20949b['persona'] + _0x4a79d8(0x7cb) + _0x46b2d5[_0x4a79d8(0x7d9)] + '\x20(ID:\x20' + _0x46b2d5['id'] + ')\x0a' + _0x955133; })['join']('\x0a'), _0x202018 = _0x5f49a9[_0x94deb4(0x4d5)][_0x94deb4(0x190)](_0x32aed2 => _0x94deb4(0x938) + _0x32aed2['id'] + _0x94deb4(0x25a) + _0x32aed2[_0x94deb4(0x7d9)] + _0x94deb4(0x242) + (_0x32aed2[_0x94deb4(0x8eb)] || '无'))[_0x94deb4(0x414)]('\x0a'), _0x136482 = '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', _0x47feee = _0x94deb4(0x1e6) + _0xe09c80[_0x94deb4(0x414)](',\x20') + _0x94deb4(0x714) + _0x162a5b + _0x94deb4(0xa91) + _0x202018 + _0x94deb4(0x798) + _0xc87409, _0x19fecb = [{ 'role': 'system', 'content': _0x136482 }, { 'role': _0x94deb4(0x384), 'content': _0x47feee }], _0x4bba67 = await _0x4d0897(_0x19fecb, { 'json': !![] }), _0x44e1ce = _0xcca778(_0x4bba67); if (!_0x44e1ce) throw new Error(_0x94deb4(0x422) + _0x4bba67); const _0x2d326 = JSON[_0x94deb4(0x468)](_0x44e1ce); _0x5f49a9[_0x94deb4(0x6a1)][_0x3125e1] = { 'categorizedExpenses': _0x2d326, 'timestamp': Date[_0x94deb4(0x780)](), 'originalExpenses': _0xdc9941 }, _0x5f49a9[_0x94deb4(0x4fb)] = _0x5f49a9[_0x94deb4(0x4fb)][_0x94deb4(0x8be)](_0x2179fa => new Date(_0x2179fa['timestamp'])[_0x94deb4(0x4b4)]() !== _0xdcf9db[_0x94deb4(0x4b4)]()), _0x39e4f0(), _0xea88b6(_0x5f49a9['accountingLedger'][_0x3125e1], _0x3125e1); } catch (_0x19028c) { _0xd5e395(_0x94deb4(0x7a2) + _0x19028c[_0x94deb4(0xb58)]); } finally { if (_0x94deb4(0x45c) === 'cavzR') return _0x3dfa57[_0x94deb4(0x7d9)] !== _0x94deb4(0x28c) && _0x27c78b[_0x94deb4(0x7a4)]('Failed\x20to\x20plan\x20group\x20replies:', _0x36fac6), null; else _0x5a1a9e(![]); } } else _0x22c9fc = _0x48f033[_0x94deb4(0x7d6)]; } async function _0x5ec59a() { const _0x2358ab = _0x4d95ce, _0x4b13bc = [..._0x57623a]; try { const _0x62cf03 = localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x8c2)); if (_0x62cf03) { if (_0x2358ab(0x5a1) === _0x2358ab(0x5a1)) { const _0xc3d088 = JSON['parse'](_0x62cf03); Array[_0x2358ab(0x552)](_0xc3d088) ? _0xf3cd55 = [..._0x4b13bc, ..._0xc3d088] : _0xf3cd55 = _0x4b13bc; } else _0x497cd0 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“' + _0x18ee2f[_0x2358ab(0x7d9)] + _0x2358ab(0x6b6); } else _0x2358ab(0x95d) === _0x2358ab(0x8d0) ? _0x3bfeef[_0x2358ab(0x279)] = _0x2358ab(0x45b) + _0xb19205 + _0x2358ab(0xa06) + (_0x3eff06 === _0x2358ab(0x385) ? _0x2358ab(0x89f) : _0x2358ab(0x456)) + _0x2358ab(0x125) + _0x119707 + _0x2358ab(0x25e) + _0x19133a : _0xf3cd55 = _0x4b13bc; } catch (_0x15872b) { console[_0x2358ab(0x7a4)](_0x2358ab(0x6a9), _0x15872b), _0xf3cd55 = _0x4b13bc; } if (!localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x684))) { if ('tbekj' === 'NtrlS') { _0x334911('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else { _0xd56340(_0x2358ab(0x17a))[_0x2358ab(0x8a2)](async _0xea4891 => { const _0x53bdd9 = _0x2358ab; _0xea4891 ? (_0x5a1a9e(!![], _0x53bdd9(0x896)), await _0x435fa1(), localStorage[_0x53bdd9(0x421)](_0x53bdd9(0x684), _0x53bdd9(0x2f0)), _0x5a1a9e(![]), _0xd5e395(_0x53bdd9(0x209)), setTimeout(() => location[_0x53bdd9(0x497)](), 0x5dc)) : _0xd5e395(_0x53bdd9(0x621)); }); return; } } if (!localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x930))) { console[_0x2358ab(0x6e2)](_0x2358ab(0x14d)), _0x5a1a9e(!![], _0x2358ab(0x86e)); const _0x29e249 = await _0x45fc3b(); localStorage[_0x2358ab(0x421)](_0x2358ab(0x930), _0x2358ab(0x2f0)), _0x5a1a9e(![]); if (_0x29e249 > 0x0) { if (_0x2358ab(0xa7c) === _0x2358ab(0x79a)) { const _0x2ac9c3 = _0x4f89d5(_0x8d965['activeMeetingCharId']); _0x2ac9c3 && (_0x2ac9c3[_0x2358ab(0x32d)] = _0x4cc2ae, _0x23487b(_0x2d8697[_0x2358ab(0x5b0)], 'normal')); } else { _0xd5e395('好友圈数据升级完成，迁移了\x20' + _0x29e249 + '\x20张旧图片。应用即将刷新。'), setTimeout(() => location[_0x2358ab(0x497)](), 0x5dc); return; } } } if (!localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x930))) { } if (!localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x3bb))) { console['log'](_0x2358ab(0x565)), _0x5a1a9e(!![], _0x2358ab(0x578)); const _0x520c47 = await _0x11dda8(); localStorage['setItem']('noir_migration_music_v1_complete', 'true'), _0x5a1a9e(![]); if (_0x520c47 > 0x0) { _0xd5e395(_0x2358ab(0x9ad) + _0x520c47 + _0x2358ab(0xa9f)), setTimeout(() => location[_0x2358ab(0x497)](), 0x5dc); return; } } const _0x6e59ad = document[_0x2358ab(0x374)](_0x2358ab(0x541)); _0x6e59ad['addEventListener']('click', () => { const _0xf24522 = _0x2358ab; _0x1496d3(), _0x53a558(_0xf24522(0x7f2), 'home'); }); const _0x14ca9d = _0x526e66(); try { const _0x1efe3e = localStorage[_0x2358ab(0x6ba)](_0x2358ab(0x4cd)); if (_0x1efe3e) { const _0x13c269 = JSON[_0x2358ab(0x468)](_0x1efe3e); _0x13c269[_0x2358ab(0x6a1)] && (_0x5f49a9[_0x2358ab(0x6a1)] = _0x13c269[_0x2358ab(0x6a1)], console[_0x2358ab(0x6e2)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.')); } } catch (_0x469cec) { if (_0x2358ab(0x3d5) === 'Mbpeh') { _0x104458[_0x2358ab(0x279)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', _0x40e6c6['innerHTML'] = ''; return; } else console[_0x2358ab(0x7a4)](_0x2358ab(0x98a), _0x469cec); } _0x1ab0af(), _0x5d751b(), _0x23e679(), _0x5cc105(), _0x3de7d2(), _0x41d1cb(), _0x2d5802(), _0x3a71db(), _0x5a1829(), _0x1f43cd(), _0x5d6805(), _0x16a5a4(), _0x5e82aa(), setInterval(_0x5e82aa, 0x7530), _0x395fb3(), _0x223f24(), _0x481344(); const _0x28b166 = document[_0x2358ab(0x374)](_0x2358ab(0x755)); document[_0x2358ab(0x374)]('music-widget-card')['addEventListener']('click', function (_0x48dade) { const _0x12e1e9 = _0x2358ab; if (_0x12e1e9(0x426) !== _0x12e1e9(0x6e0)) { if (_0x48dade['target']['closest'](_0x12e1e9(0x87d))) { if (_0x12e1e9(0x8a5) !== 'OfUsB') _0x39ab58 = _0x476848(_0xf2b898[_0x12e1e9(0x258)][0x0]); else return; } const _0x2ba6d0 = document['getElementById'](_0x12e1e9(0x860)); _0x2ba6d0 && ('hYMPE' !== 'CCWvp' ? _0x2ba6d0['click']() : _0x3a8189[_0x12e1e9(0x238)](_0x419fa0['id'])); } else _0x567c10 = _0x54fb67['stringify'](_0x4c8284); }), _0x53a558(_0x2358ab(0x529), _0x2358ab(0x59e)); (_0x14ca9d || _0x5f49a9[_0x2358ab(0x6b0)][_0x2358ab(0x2ed)] === 0x0) && (_0xd5e395('欢迎！请先创建一个角色开始聊天。'), setTimeout(() => { const _0x23b69a = _0x2358ab; _0x53a558(_0x23b69a(0x134), _0x23b69a(0x529)), setTimeout(() => _0x52ad3d(), 0x64); }, 0x6a4)); document[_0x2358ab(0x374)](_0x2358ab(0x4a4))[_0x2358ab(0x458)](_0x2358ab(0x173), _0x290bb8); const _0x5268cd = document['getElementById'](_0x2358ab(0x232)); document[_0x2358ab(0x374)](_0x2358ab(0x2fc))[_0x2358ab(0x458)]('click', () => _0x5268cd['click']()), document[_0x2358ab(0x374)](_0x2358ab(0x604))[_0x2358ab(0x458)]('click', () => { const _0x3eb31e = _0x2358ab; _0x5f49a9[_0x3eb31e(0x407)][_0x3eb31e(0x172)] = null, _0x39e4f0(), _0x395fb3(), _0xd5e395('小组件背景已恢复默认。'); }), _0x5268cd[_0x2358ab(0x458)]('change', async _0x517b0a => { const _0x465f48 = _0x2358ab, _0x49651e = _0x517b0a[_0x465f48(0x89a)][_0x465f48(0x760)][0x0]; if (!_0x49651e) return; try { if (_0x465f48(0x291) === _0x465f48(0x83a)) _0x56d5c9(_0x1003c2, _0x112fe4[_0x465f48(0x89a)][_0x465f48(0x760)][0x0]); else { const _0x122c3e = await _0x454e76(_0x49651e); _0x5f49a9['preferences'][_0x465f48(0x172)] = _0x122c3e, _0x39e4f0(), _0x395fb3(), _0xd5e395('小组件背景已更换！'); } } catch (_0x29c259) { _0xd5e395(_0x465f48(0x554) + _0x29c259['message']); } }), _0x395a33(), document[_0x2358ab(0x374)](_0x2358ab(0x252))[_0x2358ab(0x458)](_0x2358ab(0x173), () => document['getElementById'](_0x2358ab(0x1da))['click']()), document[_0x2358ab(0x374)](_0x2358ab(0x289))[_0x2358ab(0x458)](_0x2358ab(0x173), async () => { const _0x36a801 = _0x2358ab; await _0xbc8e1e('widget_badge'), localStorage[_0x36a801(0x5ed)](_0x36a801(0x9c8)), _0x395a33(), _0xd5e395(_0x36a801(0x822)); }), document['getElementById'](_0x2358ab(0x1da))[_0x2358ab(0x458)]('change', async _0x3d61c8 => { const _0x34e867 = _0x2358ab, _0x33adea = _0x3d61c8['target'][_0x34e867(0x760)][0x0]; if (!_0x33adea) return; try { if (_0x34e867(0x32b) === 'bvBPU') await _0x5a0c6c(_0x34e867(0x4d9), _0x33adea), await _0x395a33(), _0xd5e395(_0x34e867(0x7a8)); else { _0x3bc1d2 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x198b31 in _0x488e6b) { _0x5436ee[_0x198b31][_0x34e867(0x8f0)][_0x34e867(0x31f)](_0x34e867(0x74b)), _0xe887b6[_0x198b31][_0x34e867(0x330)] = ''; } _0x3dd300[_0x34e867(0x9f6)]['querySelector'](_0x34e867(0xa18))[_0x34e867(0x8e3)] = _0x34e867(0x4c7), _0x2d737e[_0x34e867(0x6ac)][_0x34e867(0x179)](_0x34e867(0xa18))['textContent'] = '点击选择\x20.jpg\x20或\x20.png', _0xfab58e['info'][_0x34e867(0x179)](_0x34e867(0xa18))[_0x34e867(0x8e3)] = _0x34e867(0x9bb), _0x5ecfd9[_0x34e867(0x6f0)][_0x34e867(0x179)](_0x34e867(0xa18))[_0x34e867(0x8e3)] = '点击选择\x20.lrc', _0x126321(); } } catch (_0x1fadda) { _0x34e867(0x717) !== 'tpKAD' ? _0xd5e395(_0x34e867(0x554) + _0x1fadda[_0x34e867(0xb58)]) : _0x95a8e5 = _0x22e8dd(_0x379b2e); } }), _0xec65e(), document[_0x2358ab(0x374)]('diary-entries-container')[_0x2358ab(0x458)](_0x2358ab(0x428), _0x3129f4), document['getElementById'](_0x2358ab(0x439))[_0x2358ab(0x458)](_0x2358ab(0x2ba), _0x3129f4, { 'passive': ![] }), document[_0x2358ab(0x374)](_0x2358ab(0x4b6))['addEventListener']('click', () => document[_0x2358ab(0x374)](_0x2358ab(0x1aa))[_0x2358ab(0x173)]()), document[_0x2358ab(0x374)](_0x2358ab(0x26f))[_0x2358ab(0x458)]('click', async () => { const _0x14309c = _0x2358ab; if (_0x14309c(0x477) === 'rDlZQ') { const _0x1ed926 = _0x7f1371[_0x14309c(0x468)](_0x164d59); _0x41873f[_0x14309c(0x552)](_0x1ed926) ? _0x3fb279 = [..._0x450cdb, ..._0x1ed926] : _0x22f2bb = _0x581387; } else await _0xbc8e1e('widget_card'), localStorage[_0x14309c(0x5ed)](_0x14309c(0xb5f)), _0xec65e(), _0xd5e395(_0x14309c(0x9ff)); }), document[_0x2358ab(0x374)](_0x2358ab(0x1aa))['addEventListener']('change', async _0x5e01a6 => { const _0x21d4a8 = _0x2358ab, _0x27f2b5 = _0x5e01a6[_0x21d4a8(0x89a)][_0x21d4a8(0x760)][0x0]; if (!_0x27f2b5) return; try { await _0x5a0c6c(_0x21d4a8(0x2c3), _0x27f2b5), await _0xec65e(), _0xd5e395(_0x21d4a8(0x58c)); } catch (_0x21b8ed) { if (_0x21d4a8(0x18e) !== _0x21d4a8(0x18e)) { const _0x1a656e = _0x4b63f4['characterLastScripts'][_0x1178e6]; _0x1a656e && _0x1a656e[_0x21d4a8(0x2ed)] > 0x0 && (_0x41ff55 = _0x1a656e['at'](-0x1)); } else _0xd5e395('错误:\x20' + _0x21b8ed['message']); } }), document[_0x2358ab(0x374)](_0x2358ab(0xaab))['addEventListener']('click', async () => { const _0x46a60e = _0x2358ab; if ('GQpNm' !== _0x46a60e(0x7d1)) _0x269c7a[_0x46a60e(0x2d6)][_0x46a60e(0x486)] = 'url(\x27' + _0x4aa874['chatWallpaper'] + '\x27)', _0x11449f[_0x46a60e(0x2d6)][_0x46a60e(0x59a)] = _0x46a60e(0x6ac), _0x38b41b[_0x46a60e(0x2d6)][_0x46a60e(0xa2e)] = _0x46a60e(0x634); else { const _0x3ba51b = await _0xd56340(_0x46a60e(0x447)); _0x3ba51b && (localStorage[_0x46a60e(0x5ed)]('badgeState'), localStorage[_0x46a60e(0x5ed)](_0x46a60e(0x492)), _0xd5e395(_0x46a60e(0x7e2)), setTimeout(() => location['reload'](), 0x3e8)); } }); const _0x30fc3d = document['getElementById'](_0x2358ab(0xa12)); _0x30fc3d[_0x2358ab(0x458)](_0x2358ab(0x173), () => { const _0x1b5331 = _0x2358ab; _0x1b5331(0x14a) === _0x1b5331(0x14a) ? (_0x3aeac1(), _0x53a558(_0x1b5331(0x8ee), 'home')) : _0x36ee68(_0x1b5331(0x778), _0x1b5331(0x654)); }); const _0x16853a = document['getElementById'](_0x2358ab(0x40e)); _0x16853a[_0x2358ab(0x458)](_0x2358ab(0x173), () => { const _0x553d97 = _0x2358ab; _0x44f897(), _0x53a558(_0x553d97(0x778), 'home'); }), document[_0x2358ab(0x374)](_0x2358ab(0x9f9))[_0x2358ab(0x458)](_0x2358ab(0x173), () => _0x53a558(_0x2358ab(0x529), _0x2358ab(0x778))), document[_0x2358ab(0x374)]('back-to-home-from-diary-list')[_0x2358ab(0x458)]('click', () => _0x53a558(_0x2358ab(0x529), _0x2358ab(0x8ee))), document[_0x2358ab(0x374)](_0x2358ab(0x200))[_0x2358ab(0x458)]('click', () => { const _0x4ba291 = _0x2358ab; 'fyRwP' === _0x4ba291(0x30f) ? (_0x5f49a9[_0x4ba291(0x9ab)] = null, _0x53a558('diaryList', _0x4ba291(0x6be))) : _0x12e2ce = _0x325d7a(_0x106f07); }), document['getElementById'](_0x2358ab(0x4e2))[_0x2358ab(0x458)](_0x2358ab(0x173), _0x3d5a98), document[_0x2358ab(0x374)](_0x2358ab(0x9ee))['addEventListener'](_0x2358ab(0x173), _0x3157fa), document[_0x2358ab(0x374)]('diary-entry-input')['addEventListener'](_0x2358ab(0xb04), _0x4c2012 => { const _0x55d7b3 = _0x2358ab; _0x55d7b3(0xab6) !== _0x55d7b3(0xab6) ? (_0x5df8e6(), _0x516e78(![])) : _0x4c2012[_0x55d7b3(0x911)] === _0x55d7b3(0x86f) && !_0x4c2012[_0x55d7b3(0x8d8)] && (_0x4c2012[_0x55d7b3(0x6ce)](), _0x3d5a98()); }); const _0x202554 = [_0x2358ab(0x48b), _0x2358ab(0x275), 'angry', _0x2358ab(0x1d6), _0x2358ab(0xa2a)]; _0x202554[_0x2358ab(0x170)](_0x4ceb26 => { const _0x1e8c61 = _0x2358ab, _0x192137 = document['getElementById'](_0x1e8c61(0x4c5) + _0x4ceb26 + _0x1e8c61(0xa39)), _0x4593f2 = document[_0x1e8c61(0x374)]('char-edit-sprite-' + _0x4ceb26 + _0x1e8c61(0x729)); _0x192137 && _0x4593f2 && (_0x192137['addEventListener'](_0x1e8c61(0x173), () => _0x4593f2[_0x1e8c61(0x173)]()), _0x4593f2['addEventListener'](_0x1e8c61(0x563), _0x5e59d1 => { const _0x27bf21 = _0x1e8c61; if (_0x27bf21(0x53a) !== 'cmLTS') { const _0x3d1284 = _0x5e59d1['target'][_0x27bf21(0x760)][0x0]; if (!_0x3d1284) return; try { if (_0x27bf21(0xaf6) !== _0x27bf21(0xaf6)) _0x152d53[_0x27bf21(0x2d6)]['display'] = _0x27bf21(0x888), _0x54c966[_0x27bf21(0x2d6)]['display'] = _0x27bf21(0x8b4); else { const _0x578d7d = URL[_0x27bf21(0x7dc)](_0x3d1284); _0x192137[_0x27bf21(0x2d6)][_0x27bf21(0x486)] = _0x27bf21(0x730) + _0x578d7d + '\x27)'; } } catch (_0x3b488b) { _0xd5e395(_0x27bf21(0x8b6) + _0x3b488b[_0x27bf21(0xb58)]); } } else _0x572bed[_0x27bf21(0x4d5)] = _0x479f77[_0x27bf21(0x4d5)]['filter'](_0x5c3a00 => _0x5c3a00['id'] !== _0x3ec93e), _0x2c3852['activeUserProfileId'] === _0x1de0a0 && (_0x52e7fd['activeUserProfileId'] = _0x1a7512[_0x27bf21(0x4d5)][0x0]['id']), _0x31b17[_0x27bf21(0x42d)][_0x27bf21(0x170)](_0xbfedbd => { const _0x4d156c = _0x27bf21; _0xbfedbd['boundUserProfileId'] === _0x20794e && (_0xbfedbd[_0x4d156c(0x3fc)] = _0x43a1bc[_0x4d156c(0x4f6)]); }), _0x251598(), _0x224f70(_0x27bf21(0xb55)), _0x2fe11c(), _0x158e1f(_0x27bf21(0x928), _0x27bf21(0xb5d)); })); }), document[_0x2358ab(0x374)]('galgame-textbox-container')[_0x2358ab(0x458)]('click', _0x5ecdc7), document[_0x2358ab(0x374)]('toggle-meeting-view-button')[_0x2358ab(0x458)](_0x2358ab(0x173), () => { const _0x38d353 = _0x2358ab; if (_0x38d353(0x646) === _0x38d353(0xa8d)) { _0x54db10(_0x38d353(0x8aa)); return; } else _0x5f49a9['meetingViewMode'] = _0x5f49a9[_0x38d353(0x768)] === _0x38d353(0x365) ? _0x38d353(0x3ac) : 'novel', _0x41ddb6(); }), document[_0x2358ab(0x374)]('meeting-scene-view')[_0x2358ab(0x458)]('mousedown', _0x59f748), document[_0x2358ab(0x374)](_0x2358ab(0x286))[_0x2358ab(0x458)](_0x2358ab(0x2ba), _0x59f748, { 'passive': ![] }); let _0xa3486d = null; function _0x59f748(_0x364d10) { const _0x3849ec = _0x2358ab; if (_0xa3486d) clearTimeout(_0xa3486d); const _0x4e301f = _0x364d10['target']['closest'](_0x3849ec(0x658)); if (!_0x4e301f) return; const _0x3f69e6 = parseInt(_0x4e301f[_0x3849ec(0x814)][_0x3849ec(0x740)], 0xa); if (isNaN(_0x3f69e6)) return; const _0x1659df = () => { _0xa3486d = setTimeout(() => { const _0xb73dfc = _0xe792; if (_0x364d10[_0xb73dfc(0x433)] === 'touchstart') _0x364d10['preventDefault'](); _0x3506ed(_0x3f69e6); }, 0x320); }, _0x3d8af1 = () => { if (_0xa3486d) clearTimeout(_0xa3486d); }; document[_0x3849ec(0x458)](_0x3849ec(0x34e), _0x3d8af1, { 'once': !![] }), document[_0x3849ec(0x458)](_0x3849ec(0x7b0), _0x3d8af1, { 'once': !![] }), document[_0x3849ec(0x458)]('touchend', _0x3d8af1, { 'once': !![] }), document[_0x3849ec(0x458)](_0x3849ec(0x6b5), _0x3d8af1, { 'once': !![] }), _0x1659df(); } document[_0x2358ab(0xb2c)][_0x2358ab(0x458)](_0x2358ab(0x173), _0xa0c81d => { const _0x56cb67 = _0x2358ab, _0x3034ad = _0xa0c81d[_0x56cb67(0x89a)][_0x56cb67(0x796)]('.listen-together-card'); if (_0x3034ad) { const _0x39eca2 = _0xa0c81d[_0x56cb67(0x89a)][_0x56cb67(0x796)](_0x56cb67(0xa9b)), _0xd0abe5 = _0xa0c81d[_0x56cb67(0x89a)][_0x56cb67(0x796)](_0x56cb67(0x9cf)); if (_0x39eca2) { if ('hsZWq' !== _0x56cb67(0x61a)) _0x4ee34c(); else { const _0x38520a = _0x4d62f5(_0x2d13e6[_0x56cb67(0x699)]); return _0x38520a?.[_0x56cb67(0x7d9)] || 'Unknown'; } } else { if (_0xd0abe5) { const _0x216b3b = _0xd0abe5[_0x56cb67(0x796)](_0x56cb67(0x1f6)), _0x1beff9 = _0xd0abe5[_0x56cb67(0x814)][_0x56cb67(0x6ae)], _0x4b2036 = parseInt(_0x216b3b[_0x56cb67(0x814)]['historyIndex'], 0xa); _0x11a061(_0x1beff9, _0x4b2036, _0x3034ad); } else { if (_0x56cb67(0xb62) !== _0x56cb67(0xb62)) { const _0x41b7c4 = _0x8b925b[_0x56cb67(0x7dc)](_0x3704cc), _0x56a22b = _0x56cb67(0x947), _0x570fa1 = _0x56cb67(0xade) + _0x56a22b + _0x56cb67(0x890) + _0x41b7c4 + _0x56cb67(0xb23); _0x54008d[_0x56cb67(0x279)] = _0x570fa1, _0x2ae507[_0x56cb67(0x376)]['style'][_0x56cb67(0x4c2)]('--custom-font-family', '\x27' + _0x56a22b + '\x27'), _0x29e4d7[_0x56cb67(0x8e3)] = _0x56cb67(0x5b7); } else { const _0x217a69 = _0x39d291(); _0x217a69 && _0x217a69['activeListenSession'] && _0x217a69['activeListenSession']['isActive'] && (_0x2a77f5[_0x56cb67(0x2d6)][_0x56cb67(0x416)] = _0x56cb67(0x350), setTimeout(() => _0x2a77f5[_0x56cb67(0x8f0)]['add'](_0x56cb67(0x18c)), 0xa)); } } } return; } if (window['getSelection']()[_0x56cb67(0x679)]()) return; const _0x38f6ae = _0xa0c81d['target'][_0x56cb67(0x796)](_0x56cb67(0x1f6)); if (_0x38f6ae && !_0xa0c81d['target'][_0x56cb67(0x796)](_0x56cb67(0x1ec))) { if (_0x56cb67(0x449) !== _0x56cb67(0x449)) _0x2637e4['isAnimatingDiary'] = ![]; else { const _0x5d5042 = parseInt(_0x38f6ae['dataset'][_0x56cb67(0x740)], 0xa); !isNaN(_0x5d5042) && _0x3506ed(_0x5d5042); } } }); const _0x2334a9 = document[_0x2358ab(0x374)](_0x2358ab(0x801)); _0x2334a9 && _0x2334a9[_0x2358ab(0x458)](_0x2358ab(0x173), () => { const _0x39ef13 = _0x2358ab; _0xd5e395(_0x39ef13(0x206)); }); const _0x1a05fb = document[_0x2358ab(0x374)]('custom-stickers-input'), _0x4beab3 = localStorage[_0x2358ab(0x6ba)]('customStickers'); if (_0x4beab3) { if (_0x2358ab(0x3a4) === _0x2358ab(0x62c)) _0x3b75e6[_0x2358ab(0x984)] = _0x45fd0f['createObjectURL'](_0x4acb9b), _0x3ca785[_0x2358ab(0x2d6)]['display'] = 'block', _0x4f4fad[_0x2358ab(0x2d6)][_0x2358ab(0x9f3)] = _0x2358ab(0x8b4), _0x5c464d[_0x2358ab(0x2d6)][_0x2358ab(0x62a)] = _0x2358ab(0x42a); else try { const _0x38729c = JSON[_0x2358ab(0x468)](_0x4beab3); if (Array['isArray'](_0x38729c)) { if (_0x2358ab(0x277) === _0x2358ab(0x277)) _0x1a05fb[_0x2358ab(0x330)] = _0x38729c['map'](_0x1e5b17 => _0x1e5b17[_0x2358ab(0x7d9)] + '--' + _0x1e5b17[_0x2358ab(0x93b)])[_0x2358ab(0x414)]('\x0a'); else { if (_0x554211['diaryPressTimer']) _0xe50ec3(_0x58c0b2[_0x2358ab(0x3f5)]); const _0x472de4 = _0x31bb78['target']['closest'](_0x2358ab(0x288)); if (!_0x472de4) return; const _0x3b4c1a = _0x472de4['dataset']['timestamp'], _0x474114 = _0x472de4[_0x2358ab(0x8f0)][_0x2358ab(0x998)](_0x2358ab(0x384)) ? _0x2358ab(0x384) : 'ai'; if (!_0x3b4c1a) return; const _0x5ac62e = () => { const _0x1c0899 = _0x2358ab; _0x35128b[_0x1c0899(0x3f5)] = _0x265b14(() => { const _0x474008 = _0x1c0899; if (_0x5d4f0e[_0x474008(0x433)] === _0x474008(0x2ba)) _0x5253e2[_0x474008(0x6ce)](); _0x2a2255(_0x45b862(_0x3b4c1a, 0xa), _0x474114); }, 0x320); }, _0x27f17c = () => { const _0x27dfaa = _0x2358ab; if (_0x1f5939['diaryPressTimer']) _0x30ce0b(_0x5793[_0x27dfaa(0x3f5)]); }; _0x40e267[_0x2358ab(0x458)]('mouseup', _0x27f17c, { 'once': !![] }), _0x16bf52[_0x2358ab(0x458)](_0x2358ab(0x50c), _0x27f17c, { 'once': !![] }), _0x37f72c['addEventListener'](_0x2358ab(0x6b5), _0x27f17c, { 'once': !![] }), _0x5ac62e(); } } } catch (_0x41baa0) { } } document['getElementById']('save-custom-stickers-button')[_0x2358ab(0x458)]('click', () => { const _0x76ba26 = _0x2358ab, _0x54c836 = _0x1a05fb[_0x76ba26(0x330)], _0x4e71dc = _0x54c836[_0x76ba26(0x77e)]('\x0a')[_0x76ba26(0x8be)](_0x5da76a => _0x5da76a[_0x76ba26(0x1c8)]() !== ''), _0x284851 = []; let _0x19cf19 = 0x0; for (const _0x2fb81d of _0x4e71dc) { if (_0x76ba26(0x450) !== 'uCIIE') { const _0x1618e4 = _0x2fb81d[_0x76ba26(0x77e)]('--'); if (_0x1618e4['length'] === 0x2 && _0x1618e4[0x0]['trim']() && _0x1618e4[0x1][_0x76ba26(0x1c8)]()['startsWith'](_0x76ba26(0x34f))) { if (_0x76ba26(0xabc) === 'pKALh') _0x284851[_0x76ba26(0x238)]({ 'name': _0x1618e4[0x0][_0x76ba26(0x1c8)](), 'url': _0x1618e4[0x1][_0x76ba26(0x1c8)]() }); else { const _0x1a8dc3 = _0x447822[_0x76ba26(0x374)]('world-book-list-container'); _0x1a8dc3[_0x76ba26(0x279)] = ''; if (_0x52a731[_0x76ba26(0x1df)][_0x76ba26(0x2ed)] === 0x0) { _0x1a8dc3['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>'; return; } _0x5edd66[_0x76ba26(0x1df)][_0x76ba26(0x170)](_0x4b3305 => { const _0x1a2502 = _0x76ba26, _0x50e6fe = _0xa43e0e[_0x1a2502(0x95f)](_0x1a2502(0x754)); _0x50e6fe['className'] = _0x1a2502(0xacf), _0x50e6fe['dataset']['id'] = _0x4b3305['id'], _0x50e6fe[_0x1a2502(0x279)] = _0x1a2502(0xad5) + _0x4b3305[_0x1a2502(0x7d9)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x4b3305[_0x1a2502(0x47e)][_0x1a2502(0x80c)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20', _0x50e6fe['addEventListener']('click', () => _0x3c3115(_0x4b3305['id'])), _0x1a8dc3[_0x1a2502(0x962)](_0x50e6fe); }); } } else _0x19cf19++; } else { _0x3a444c[_0x76ba26(0x766)] = [..._0x4c003f]; const _0x3fa144 = _0x524f5f[_0x76ba26(0x766)][_0x76ba26(0x255)](); _0x560f22[_0x76ba26(0x8e3)] = _0x3fa144[_0x76ba26(0x88e)] === _0x76ba26(0x96f) ? '旁白' : _0x3fa144[_0x76ba26(0x88e)], _0x4c2b98['textContent'] = _0x3fa144[_0x76ba26(0xaa4)], _0x3fa144[_0x76ba26(0x88e)] !== 'narrator' && _0x4a7656(_0x21b13f['activeMeetingCharId'], _0x3fa144[_0x76ba26(0x42f)]); } } _0x19cf19 > 0x0 && _0xd5e395('有\x20' + _0x19cf19 + _0x76ba26(0x743)); try { localStorage[_0x76ba26(0x421)](_0x76ba26(0x8c2), JSON[_0x76ba26(0x795)](_0x284851)), _0xd5e395(_0x76ba26(0x20a)), setTimeout(() => location[_0x76ba26(0x497)](), 0x5dc); } catch (_0x20c752) { 'xSjmf' !== _0x76ba26(0x9df) ? (_0x499167 = _0x5cdd59[_0x76ba26(0x7d9)], _0x4268d8 = _0x15090c[_0x76ba26(0x7d6)]) : _0xd5e395(_0x76ba26(0x4af)); } }), _0x4997ae(), document[_0x2358ab(0x374)](_0x2358ab(0x388))[_0x2358ab(0x458)](_0x2358ab(0x173), () => { const _0xc55eab = _0x2358ab; _0xc55eab(0x3ee) !== _0xc55eab(0x3ee) ? !_0x309b1e[_0xc55eab(0x998)](_0xff537d[_0xc55eab(0x89a)]) && _0x44719c[_0xc55eab(0x89a)] !== _0x4140d3 && _0x3b5d51[_0xc55eab(0x89a)] !== _0x336f89 && _0x48dd78[_0xc55eab(0x8f0)]['remove'](_0xc55eab(0x18c)) : document[_0xc55eab(0x374)]('card-input-2')[_0xc55eab(0x173)](); }), document[_0x2358ab(0x374)]('reset-card-button-2')['addEventListener'](_0x2358ab(0x173), async () => { const _0x282c20 = _0x2358ab; await _0xbc8e1e(_0x282c20(0x135)), localStorage[_0x282c20(0x5ed)](_0x282c20(0x85a)), _0xec65e(), _0xd5e395(_0x282c20(0x590)); }), document[_0x2358ab(0x374)](_0x2358ab(0x44c))['addEventListener']('change', async _0x1a886d => { const _0x2b13d8 = _0x2358ab, _0x3f0854 = _0x1a886d['target']['files'][0x0]; if (!_0x3f0854) return; try { 'WYxCn' === _0x2b13d8(0xa74) ? _0x23a93d[_0x2b13d8(0x374)]('card-input-2')['click']() : (await _0x5a0c6c('widget_card_2', _0x3f0854), await _0xec65e(), _0xd5e395('卡片\x202\x20已更换！')); } catch (_0x4f3506) { _0xd5e395(_0x2b13d8(0x554) + _0x4f3506[_0x2b13d8(0xb58)]); } }), _0x5af83c(), _0x7f53d5(), _0x539b8c(); } const _0x5330bd = _0x4d95ce(0x567); async function _0x17dbaf(_0x8dd5fb) { const _0x5500d4 = await _0x1b5ec1; return new Promise((_0x25035f, _0x32fa3d) => { const _0x5de499 = _0xe792, _0x48d25e = _0x5500d4[_0x5de499(0xa28)](_0x5330bd, _0x5de499(0x9a1)), _0x2a58d7 = _0x48d25e[_0x5de499(0x7f3)](_0x5330bd), _0x1d53c6 = _0x2a58d7[_0x5de499(0xb3d)](_0x8dd5fb); _0x1d53c6[_0x5de499(0x731)] = () => _0x25035f(_0x1d53c6[_0x5de499(0x78a)]), _0x1d53c6[_0x5de499(0x33c)] = () => _0x32fa3d(_0x1d53c6[_0x5de499(0x7a4)]); }); } async function _0x5d0baf() { const _0x53a821 = await _0x1b5ec1; return new Promise((_0x47fde1, _0x434637) => { const _0x3d4714 = _0xe792; if (_0x3d4714(0x6ec) !== _0x3d4714(0x371)) { const _0x592247 = _0x53a821[_0x3d4714(0xa28)](_0x5330bd, _0x3d4714(0x9a1)), _0x525636 = _0x592247['objectStore'](_0x5330bd), _0xf03e2c = _0x525636[_0x3d4714(0x2d0)](); _0xf03e2c[_0x3d4714(0x731)] = () => _0x47fde1(_0xf03e2c['result']), _0xf03e2c[_0x3d4714(0x33c)] = () => _0x434637(_0xf03e2c[_0x3d4714(0x7a4)]); } else { const _0x403a79 = _0x30c6f8, _0x1e1b80 = _0x403a79['scrollHeight'], _0x38cff7 = _0x403a79[_0x3d4714(0x3c6)]; _0x41bc7b[_0x3d4714(0x460)] += 0x64, _0x3c50a1(), _0x16e09c(() => { const _0x35447d = _0x3d4714, _0x5d3437 = _0x403a79['scrollHeight']; _0x403a79[_0x35447d(0x3c6)] = _0x38cff7 + (_0x5d3437 - _0x1e1b80); }); } }); } async function _0x5ef9c4(_0xb78300) { const _0x5b7f9a = _0x4d95ce; if (_0x5b7f9a(0x808) === _0x5b7f9a(0x808)) { const _0x168431 = await _0x1b5ec1; return new Promise((_0x37ce3e, _0x4d4b0a) => { const _0x5d22af = _0x5b7f9a, _0x1a4e92 = _0x168431[_0x5d22af(0xa28)](_0x5330bd, _0x5d22af(0x4bc)), _0x1a26fd = _0x1a4e92[_0x5d22af(0x7f3)](_0x5330bd), _0x443791 = _0x1a26fd[_0x5d22af(0x52a)](_0xb78300); _0x443791[_0x5d22af(0x731)] = () => _0x37ce3e(_0x443791[_0x5d22af(0x78a)]), _0x443791[_0x5d22af(0x33c)] = () => _0x4d4b0a(_0x443791[_0x5d22af(0x7a4)]); }); } else _0x1a686f['push']({ 'time': _0x554945, 'text': _0x589abc }); } async function _0x409b9f(_0x5e961e) { const _0x309503 = await _0x1b5ec1; return new Promise((_0x5ce94f, _0x343d99) => { const _0x418c7 = _0xe792, _0x5b8610 = _0x309503[_0x418c7(0xa28)](_0x5330bd, 'readwrite'), _0x2af143 = _0x5b8610[_0x418c7(0x7f3)](_0x5330bd), _0x46ed80 = _0x2af143[_0x418c7(0x485)](_0x5e961e); _0x46ed80[_0x418c7(0x731)] = () => _0x5ce94f(), _0x46ed80['onerror'] = () => _0x343d99(_0x46ed80[_0x418c7(0x7a4)]); }); } let _0x5462fc = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x763bf6 = { 'audio': document[_0x4d95ce(0x374)](_0x4d95ce(0xb26)), 'cover': document[_0x4d95ce(0x374)]('altar-slot-cover'), 'info': document[_0x4d95ce(0x374)]('altar-slot-info'), 'lyrics': document[_0x4d95ce(0x374)](_0x4d95ce(0x210)) }, _0x15558c = { 'audio': document[_0x4d95ce(0x374)](_0x4d95ce(0x564)), 'cover': document['getElementById'](_0x4d95ce(0x228)), 'info': document[_0x4d95ce(0x374)]('info-file-input'), 'lyrics': document['getElementById'](_0x4d95ce(0x625)) }; for (const _0x527721 in _0x763bf6) { if (_0x4d95ce(0x2cd) !== _0x4d95ce(0x2cd)) { const _0x12d314 = _0x560a07(_0x320392['activeMeetingCharId']); if (!_0x12d314) return; _0x182761 = !![], _0x3b754c[_0x4d95ce(0x2d6)][_0x4d95ce(0x416)] = _0x4d95ce(0x888); const _0x357d05 = _0x12d314[_0x4d95ce(0x32d)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0x3c1d2a[_0x4d95ce(0x374)](_0x4d95ce(0xaf4))[_0x4d95ce(0x330)] = _0x357d05['x'], _0x242e8c[_0x4d95ce(0x374)]('sprite-slider-y')[_0x4d95ce(0x330)] = _0x357d05['y'], _0x6c2962[_0x4d95ce(0x374)](_0x4d95ce(0x506))[_0x4d95ce(0x330)] = _0x357d05[_0x4d95ce(0x6f9)] * 0x64, _0x5b3b75 = { ..._0x357d05 }, _0x39c7c4[_0x4d95ce(0x374)]('galgame-textbox-container')[_0x4d95ce(0x2d6)][_0x4d95ce(0x416)] = 'none', _0x520380[_0x4d95ce(0x374)]('galgame-sprite-adjust-ui')[_0x4d95ce(0x2d6)][_0x4d95ce(0x416)] = _0x4d95ce(0x8b4); } else _0x763bf6[_0x527721][_0x4d95ce(0x458)](_0x4d95ce(0x173), () => _0x15558c[_0x527721][_0x4d95ce(0x173)]()), _0x15558c[_0x527721][_0x4d95ce(0x458)](_0x4d95ce(0x563), _0x3d0b8b => { const _0x1d1e22 = _0x4d95ce; if ('DgYzW' !== _0x1d1e22(0xa67)) { const _0x587158 = _0x4e1a88['createElement'](_0x1d1e22(0x754)); _0x587158[_0x1d1e22(0x290)] = _0x1d1e22(0xab1), _0x587158['innerHTML'] = _0x1d1e22(0x126), _0x587158[_0x1d1e22(0x179)](_0x1d1e22(0xa5d))['onclick'] = () => _0x3daa52('image'), _0x5d580b[_0x1d1e22(0x962)](_0x587158), _0x561155(_0x587515)[_0x1d1e22(0x8a2)](_0x31770c => { const _0x427b3 = _0x1d1e22, _0x387a14 = _0x14c134['getElementById'](_0x427b3(0x22f)); _0x387a14 && _0x31770c && (_0x387a14[_0x427b3(0x984)] = _0x48bb62['createObjectURL'](_0x31770c)); }); } else _0x587bb2(_0x527721, _0x3d0b8b[_0x1d1e22(0x89a)]['files'][0x0]); }); } function _0x587bb2(_0x39b0c4, _0x48e2e1) { const _0x5d4392 = _0x4d95ce; if (_0x5d4392(0x9ef) === _0x5d4392(0x9ef)) { if (!_0x48e2e1) return; _0x5462fc[_0x39b0c4] = _0x48e2e1, _0x763bf6[_0x39b0c4][_0x5d4392(0x179)](_0x5d4392(0xa18))[_0x5d4392(0x8e3)] = _0x48e2e1[_0x5d4392(0x7d9)], _0x763bf6[_0x39b0c4][_0x5d4392(0x8f0)][_0x5d4392(0x132)](_0x5d4392(0x74b)), _0x4ebc2b(); } else return { 'type': _0x5d4392(0x318), 'eventType': _0x20ac56[0x1][_0x5d4392(0x1c8)](), 'eventDate': _0x448885[0x2][_0x5d4392(0x1c8)](), 'eventContent': _0x1b9eab[0x3]['trim']() }; } function _0x4ebc2b() { const _0x4f0c93 = _0x4d95ce, _0x5c22c9 = document[_0x4f0c93(0x374)](_0x4f0c93(0x76a)); _0x5462fc[_0x4f0c93(0x9f6)] && _0x5462fc['info'] ? _0x5c22c9[_0x4f0c93(0x815)] = ![] : 'KhDcn' === _0x4f0c93(0x5cb) ? _0x5c22c9[_0x4f0c93(0x815)] = !![] : _0x4b9d6e['querySelectorAll'](_0x4f0c93(0x21d))[_0x4f0c93(0x170)](_0x5bb793 => { const _0x34066a = _0x4f0c93; _0x5bb793[_0x34066a(0x458)](_0x34066a(0x173), () => { const _0x439938 = _0x34066a, _0x17baf5 = _0x122a58[_0x439938(0x468)](_0x5bb793[_0x439938(0x814)][_0x439938(0x6e2)][_0x439938(0xa38)](/&quot;/g, '\x22')), _0x3e57ff = _0x5bb793['dataset'][_0x439938(0x9ae)], _0xae43c9 = _0x5bb793[_0x439938(0x814)]['characterName']; _0x94938a(_0x3e57ff, _0xae43c9, _0x17baf5); }); }); } function _0x443c2c() { const _0xdf279d = _0x4d95ce; _0x5462fc = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x3fdb26 in _0x763bf6) { _0x763bf6[_0x3fdb26][_0xdf279d(0x8f0)]['remove'](_0xdf279d(0x74b)), _0x15558c[_0x3fdb26][_0xdf279d(0x330)] = ''; } _0x763bf6[_0xdf279d(0x9f6)]['querySelector']('.slot-filename')[_0xdf279d(0x8e3)] = _0xdf279d(0x4c7), _0x763bf6['cover'][_0xdf279d(0x179)](_0xdf279d(0xa18))[_0xdf279d(0x8e3)] = _0xdf279d(0x5eb), _0x763bf6['info'][_0xdf279d(0x179)](_0xdf279d(0xa18))[_0xdf279d(0x8e3)] = _0xdf279d(0x9bb), _0x763bf6[_0xdf279d(0x6f0)][_0xdf279d(0x179)]('.slot-filename')[_0xdf279d(0x8e3)] = _0xdf279d(0x4e3), _0x4ebc2b(); } document['getElementById'](_0x4d95ce(0x76a))['addEventListener'](_0x4d95ce(0x173), async () => { const _0x37c23b = _0x4d95ce; if (!_0x5462fc['audio'] || !_0x5462fc['info']) { if (_0x37c23b(0x4cf) === _0x37c23b(0x4cf)) { _0xd5e395(_0x37c23b(0x648)); return; } else _0x185878(![]), _0x4abc1f[_0x37c23b(0x263)] = ![]; } await _0x19dac3(); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x287))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0xad9be4 = _0x4d95ce; if (_0xad9be4(0x381) !== _0xad9be4(0x381)) { const _0x404b3c = _0x3e0b47[_0xad9be4(0x374)](_0xad9be4(0x92b))['value'][_0xad9be4(0x1c8)](), _0x1f52fc = _0x34346c['querySelector'](_0xad9be4(0x4e0))['value']; if (!_0x404b3c) { _0x18a789(_0xad9be4(0x607)); return; } const _0x45ac91 = _0x518a3a[_0xad9be4(0x4d5)][_0xad9be4(0x7ed)](_0x511e26 => _0x511e26['id'] === _0x2b0549[_0xad9be4(0x4f6)]); _0x3f7f34['calendarEvents'][_0xad9be4(0x238)]({ 'id': _0xad9be4(0x1ac) + _0x2647e0['now'](), 'date': _0x518fd2[_0xad9be4(0x839)], 'type': _0x1f52fc, 'content': _0x404b3c, 'userId': _0x45ac91['id'] }), _0x5e372b(), _0x41de50(), _0x1062b0(), _0x21144f(), _0x2cd081['getElementById']('add-event-modal')[_0xad9be4(0x8f0)][_0xad9be4(0x31f)](_0xad9be4(0x18c)); } else _0x443c2c(), _0x53a558(_0xad9be4(0x654), _0xad9be4(0x778)); }), document[_0x4d95ce(0x374)](_0x4d95ce(0x853))['addEventListener']('click', () => { const _0x58521d = _0x4d95ce; _0x53a558(_0x58521d(0x778), _0x58521d(0x654)); }); async function _0x19dac3() { const _0x145235 = _0x4d95ce; _0x5a1a9e(!![], _0x145235(0x9f7)); try { if (_0x145235(0x7c4) === _0x145235(0x6e1)) { const _0x54165e = _0x29f35c[_0x145235(0xa28)](_0x1e38f4, _0x145235(0x4bc)), _0x5036ce = _0x54165e[_0x145235(0x7f3)](_0x125bc8), _0x15f912 = _0x5036ce[_0x145235(0x52a)]({ 'id': _0xc383b4, 'blob': _0x2ef49a }); _0x15f912[_0x145235(0x731)] = () => _0x1da1f(_0x15f912[_0x145235(0x78a)]), _0x15f912['onerror'] = () => _0x2538b7(_0x15f912[_0x145235(0x7a4)]); } else { const _0xf70ea6 = await _0x5462fc[_0x145235(0x1cf)]['text'](); let _0x1b4aa2; if (_0xf70ea6[_0x145235(0x1c8)]()['startsWith']('{')) _0x1b4aa2 = JSON[_0x145235(0x468)](_0xf70ea6); else { if (_0x145235(0xa5e) !== _0x145235(0x1a7)) { _0x1b4aa2 = {}; const _0xf6b6ba = _0xf70ea6[_0x145235(0x77e)]('\x0a'); _0xf6b6ba['forEach'](_0x2df147 => { const _0x3784eb = _0x145235; if (_0x3784eb(0xa8e) !== _0x3784eb(0x84e)) { const _0x1ae15a = _0x2df147[_0x3784eb(0x77e)](/:\s|：\s/); if (_0x1ae15a[_0x3784eb(0x2ed)] === 0x2) { if ('AXtaN' !== _0x3784eb(0x8b0)) { const _0x3ac634 = _0x118766[_0x3784eb(0x95f)](_0x3784eb(0x754)); _0x3ac634[_0x3784eb(0x290)] = _0x3784eb(0xacf), _0x3ac634['dataset']['id'] = _0x389580['id']; const _0x5404f7 = _0x45c927['id'] === _0x1a24d6[_0x3784eb(0x4f6)] ? '\x20(当前)' : ''; _0x3ac634[_0x3784eb(0x279)] = _0x3784eb(0x585) + (_0x5215d9[_0x3784eb(0x7d6)] || _0x2cb188) + _0x3784eb(0x76b) + _0xcd5498[_0x3784eb(0x7d9)] + _0x5404f7 + _0x3784eb(0x7df) + _0x79b020[_0x3784eb(0x8eb)]['substring'](0x0, 0x64) + _0x3784eb(0x12a), _0x3ac634[_0x3784eb(0x458)](_0x3784eb(0x173), () => _0x5a1e0f(_0x3c20b0['id'])), _0x5bd61f[_0x3784eb(0x962)](_0x3ac634); } else { const _0x13947f = _0x1ae15a[0x0][_0x3784eb(0x1c8)](), _0x32ebfe = _0x1ae15a[0x1][_0x3784eb(0x1c8)](), _0x2e4098 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x2e4098[_0x13947f] && (_0x1b4aa2[_0x2e4098[_0x13947f]] = _0x32ebfe); } } } else { const _0x11b98c = _0x3ca658[_0x3784eb(0x179)]('.screen.active'); if (!_0x11b98c) return; _0x11b98c['id'] === _0x3784eb(0x979) ? _0x10f685() : _0x35c810(); } }); if (!_0x1b4aa2[_0x145235(0x746)]) { if ('RMqrp' !== _0x145235(0x44b)) _0x14c3e1[_0x145235(0x2d6)][_0x145235(0x486)] = '', _0x2635a2[_0x145235(0x2d6)]['color'] = '', _0x4ea1c2['querySelectorAll'](_0x145235(0xae1))[_0x145235(0x170)](_0x2feb2b => { const _0xd44983 = _0x145235; _0x2feb2b[_0xd44983(0x2d6)][_0xd44983(0x614)] = ''; }); else throw new Error(_0x145235(0xa27)); } _0x1b4aa2[_0x145235(0x5c1)] = _0x145235(0xa9c) + Date[_0x145235(0x780)](); } else _0x4776c0(_0x397d07['activeMeetingCharId'], _0x302ac3[_0x145235(0x42f)]); } const _0x213afc = _0x145235(0xa9c) + (_0x1b4aa2['歌曲ID'] || Date[_0x145235(0x780)]()), _0x9b5d3c = { 'id': _0x213afc, 'info': _0x1b4aa2, 'audio': _0x5462fc[_0x145235(0x9f6)], 'cover': _0x5462fc[_0x145235(0x6ac)], 'lyrics': _0x5462fc[_0x145235(0x6f0)] ? await _0x5462fc[_0x145235(0x6f0)][_0x145235(0x3c5)]() : '' }; await _0x5ef9c4(_0x9b5d3c), await _0x44f897(), _0x5a1a9e(![]), _0xd5e395(_0x145235(0x399) + _0x1b4aa2[_0x145235(0x746)] + _0x145235(0x9b5)), _0x53a558('musicLibrary', 'musicUploadAltar'); } } catch (_0x9d0459) { _0x5a1a9e(![]), console[_0x145235(0x7a4)](_0x145235(0x508), _0x9d0459), _0xd5e395(_0x145235(0x735) + _0x9d0459[_0x145235(0xb58)]); } } async function _0x44f897() { const _0x1de284 = _0x4d95ce, _0x40a7b3 = document[_0x1de284(0x374)](_0x1de284(0x3f7)); _0x40a7b3['innerHTML'] = ''; const _0x3a254d = await _0x5d0baf(); if (_0x3a254d['length'] === 0x0) { _0x40a7b3[_0x1de284(0x279)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } _0x3a254d[_0x1de284(0x43a)]((_0x55415b, _0x5c0b49) => (_0x55415b[_0x1de284(0x1cf)][_0x1de284(0x746)] || '')[_0x1de284(0x91b)](_0x5c0b49['info'][_0x1de284(0x746)] || '')); for (const _0x50bf33 of _0x3a254d) { const _0x39a5d6 = document['createElement'](_0x1de284(0x754)); _0x39a5d6[_0x1de284(0x290)] = _0x1de284(0xa52), _0x39a5d6[_0x1de284(0x814)]['songId'] = _0x50bf33['id']; const _0x241fd8 = _0x50bf33['cover'] ? URL[_0x1de284(0x7dc)](_0x50bf33['cover']) : _0x28cae8; _0x39a5d6[_0x1de284(0x279)] = _0x1de284(0x7cd) + _0x241fd8 + _0x1de284(0x786) + (_0x50bf33['info'][_0x1de284(0x746)] || '未知歌曲') + _0x1de284(0x2ef) + (_0x50bf33['info']['歌手'] || _0x1de284(0x6c0)) + _0x1de284(0x2e7); let _0x2dfdd6 = null; const _0x52db89 = _0x456eb3 => { const _0x4deaa3 = _0x1de284; if (_0x4deaa3(0x5e0) === _0x4deaa3(0x5e0)) { if (_0x456eb3['button'] === 0x2) return; _0x2dfdd6 = setTimeout(async () => { const _0x244cc2 = _0x4deaa3; if (_0x456eb3[_0x244cc2(0x433)] === 'touchstart') _0x456eb3[_0x244cc2(0x6ce)](); const _0x3fe66f = await _0xd56340(_0x244cc2(0x168) + _0x50bf33[_0x244cc2(0x1cf)][_0x244cc2(0x746)] + _0x244cc2(0x7d7)); if (_0x3fe66f) { if (_0x244cc2(0x6f1) === 'gUlRO') { if (_0x16fd8b < 0x0 || _0x337365 >= _0x1b7a04[_0x244cc2(0x2ed)]) return; _0x447831 = _0x1ce28; const _0x431c30 = _0xa473d0[_0x2556b2]; _0x1e13b0['src'] = _0x431c30['playableUrl'] || _0x431c30[_0x244cc2(0x93b)], _0x1a5540[_0x244cc2(0x792)](), _0x284a0e(), _0x58b0b2(); } else await _0x409b9f(_0x50bf33['id']), await _0x44f897(), _0xd5e395(_0x244cc2(0x620)); } }, 0x320); } else { const _0x12d519 = _0x181b53['characterLastScripts'][_0x17497d[_0x4deaa3(0x5b0)]]; if (_0x12d519 && _0x12d519['length'] > 0x0) { _0x2da0ca[_0x4deaa3(0x766)] = [..._0x12d519]; const _0x140a6c = _0x857bc3['activeMeetingScriptQueue'][_0x4deaa3(0x255)](); _0x19d842[_0x4deaa3(0x8e3)] = _0x140a6c['speaker'] === 'narrator' ? '旁白' : _0x140a6c['speaker'], _0x3a339f[_0x4deaa3(0x8e3)] = _0x140a6c['line'], _0x140a6c[_0x4deaa3(0x88e)] !== 'narrator' && _0x43ad15(_0x384613[_0x4deaa3(0x5b0)], _0x140a6c['emotion']); } else _0x49bb78[_0x4deaa3(0x8e3)] = '旁白', _0x1411b1['textContent'] = _0x4deaa3(0x9ac); } }, _0x3eb81b = () => { clearTimeout(_0x2dfdd6); }; _0x39a5d6[_0x1de284(0x458)](_0x1de284(0x428), _0x52db89), _0x39a5d6[_0x1de284(0x458)](_0x1de284(0x34e), _0x3eb81b), _0x39a5d6['addEventListener']('mouseleave', _0x3eb81b), _0x39a5d6[_0x1de284(0x458)](_0x1de284(0x2ba), _0x52db89, { 'passive': ![] }), _0x39a5d6[_0x1de284(0x458)](_0x1de284(0x50c), _0x3eb81b), _0x39a5d6[_0x1de284(0x458)]('touchcancel', _0x3eb81b), _0x39a5d6['addEventListener']('click', _0x5a6394 => { const _0x170a2b = _0x1de284; if (_0x2dfdd6) clearTimeout(_0x2dfdd6); if (_0x5a6394[_0x170a2b(0x616)]) return; setTimeout(() => { const _0x465bbf = _0x170a2b; if (_0x2dfdd6) { if (_0x465bbf(0x22e) !== _0x465bbf(0x22e)) { const _0x1e0f37 = _0x5015e6[_0x465bbf(0x932)](_0xf7328b); _0x5a3c90 = _0x234090[_0x465bbf(0x795)](_0x1e0f37), _0xb4dd71[_0x465bbf(0x6e2)](_0x465bbf(0x28a)); } else _0x50c1fa(_0x50bf33['id'], _0x3a254d[_0x465bbf(0x190)](_0x3494fb => _0x3494fb['id'])); } }, 0x32); }), _0x40a7b3[_0x1de284(0x962)](_0x39a5d6); } } _0x10950e[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { _0xd5e395('说了是摆设啦，笨蛋。'); }), _0x12f396['addEventListener']('click', () => { const _0x2e0662 = _0x4d95ce; _0xd5e395(_0x2e0662(0x7c9)); }); let _0x34f517 = [], _0x163a93 = -0x1; async function _0x50c1fa(_0x3c0d9c, _0x3314db) { const _0x387290 = _0x4d95ce, _0x1382b0 = await _0x17dbaf(_0x3c0d9c); if (!_0x1382b0) return; _0xafdd87 = { 'title': _0x1382b0[_0x387290(0x1cf)][_0x387290(0x746)] || _0x387290(0x8a9), 'artist': _0x1382b0['info']['歌手'] || _0x387290(0x6c0), 'cover': _0x1382b0[_0x387290(0x6ac)] ? URL[_0x387290(0x7dc)](_0x1382b0[_0x387290(0x6ac)]) : _0x28cae8, 'isFromLibrary': !![] }; const _0x35d8e0 = URL[_0x387290(0x7dc)](_0x1382b0[_0x387290(0x9f6)]); _0x96f20d[_0x387290(0x984)] = _0x35d8e0, _0x96f20d[_0x387290(0x792)](), _0x16a5a4(); } async function _0x16a5a4() { const _0x275350 = _0x4d95ce, _0x201e09 = document['getElementById']('music-widget-card'), _0x135dcf = document[_0x275350(0x374)](_0x275350(0x72b)), _0x162846 = document[_0x275350(0x374)](_0x275350(0x448)), _0x2d64fe = document[_0x275350(0x374)](_0x275350(0x61e)), _0x2df3f7 = _0xafdd87; if (_0x2df3f7 && _0x2df3f7[_0x275350(0x879)]) { if ('BzzXl' !== _0x275350(0x33e)) _0x135dcf[_0x275350(0x8e3)] = _0x2df3f7[_0x275350(0x638)], _0x162846[_0x275350(0x8e3)] = _0x2df3f7[_0x275350(0x1e1)], _0x201e09[_0x275350(0x8f0)][_0x275350(0x132)](_0x275350(0x4de)), _0x201e09[_0x275350(0x2d6)][_0x275350(0x4c2)](_0x275350(0x36b), 'url(' + _0x2df3f7[_0x275350(0x6ac)] + ')'); else return { 'type': _0x275350(0x3c5), 'content': _0x2abcb6 }; } else 'emTCU' !== _0x275350(0x7e4) ? (_0x135dcf['textContent'] = _0x275350(0x4c0), _0x162846[_0x275350(0x8e3)] = '请在动态或聊天中播放', _0x201e09[_0x275350(0x8f0)][_0x275350(0x31f)](_0x275350(0x4de)), _0x2d64fe[_0x275350(0x2d6)][_0x275350(0x4c2)](_0x275350(0x36b), _0x275350(0x8b4))) : _0x219dc8 && _0x58504d(_0x1a5198['id'], _0x519731[_0x275350(0x190)](_0x475fc7 => _0x475fc7['id'])); } _0x10950e && _0x10950e[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x4c0858 = _0x4d95ce; if (_0x34f517[_0x4c0858(0x2ed)] === 0x0) return; _0x163a93 = (_0x163a93 + 0x1) % _0x34f517[_0x4c0858(0x2ed)], _0x50c1fa(_0x34f517[_0x163a93], _0x34f517); }); _0x12f396 && _0x12f396[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x3811ab = _0x4d95ce; if (_0x3811ab(0x493) !== _0x3811ab(0x493)) _0xb0928a[_0x3811ab(0x433)] = _0x3811ab(0xb60), _0x1fd0f8[_0x3811ab(0x866)](_0x553daa, _0x3c60ff); else { if (_0x34f517[_0x3811ab(0x2ed)] === 0x0) return; _0x163a93 = (_0x163a93 - 0x1 + _0x34f517['length']) % _0x34f517['length'], _0x50c1fa(_0x34f517[_0x163a93], _0x34f517); } }); _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x792), () => { const _0xb6a75 = _0x4d95ce; if (_0x120f2) _0x120f2[_0xb6a75(0x8e3)] = '❚❚'; }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x51a), () => { const _0x85277d = _0x4d95ce; if (_0x120f2) _0x120f2[_0x85277d(0x8e3)] = '▶'; }), _0x96f20d[_0x4d95ce(0x458)](_0x4d95ce(0x9eb), () => { const _0x3c5bc3 = _0x4d95ce; if (_0x3c5bc3(0x5d5) !== 'bAkoR') { if (_0x10950e) _0x10950e[_0x3c5bc3(0x173)](); } else _0x218d05 *= _0x2520bc / _0x24ffb9, _0x20586e = _0x2ce091; }); function _0xedf744() { const _0x2fff7b = _0x4d95ce; if (_0x2fff7b(0x653) === _0x2fff7b(0x653)) { const _0x7c7536 = _0x39d291(); if (!_0x7c7536) return; _0x38f212[_0x2fff7b(0x279)] = '', _0x2e931e['value'] = ''; if (_0x7c7536[_0x2fff7b(0x433)] === 'group') _0x7c7536[_0x2fff7b(0x258)][_0x2fff7b(0x170)](_0x432a6c => { const _0x51f225 = _0x2fff7b; if (_0x51f225(0x733) !== _0x51f225(0x43b)) { const _0x292c78 = _0x590c99(_0x432a6c); if (_0x292c78) { if (_0x51f225(0x1a4) === 'Fgjij') { const _0x8c3fe1 = document[_0x51f225(0x95f)](_0x51f225(0x314)); _0x8c3fe1[_0x51f225(0x330)] = _0x292c78['id'], _0x8c3fe1[_0x51f225(0x8e3)] = _0x292c78[_0x51f225(0x7d9)], _0x38f212['appendChild'](_0x8c3fe1); } else _0x58f12a['textContent'] = _0x51f225(0x446); } } else _0x4e78c0(), _0x1b2b54(![]); }), _0x329492[_0x2fff7b(0x2d6)][_0x2fff7b(0x416)] = _0x2fff7b(0x888); else { if (_0x2fff7b(0x8a6) !== _0x2fff7b(0x8a6)) { _0x1c77cd[_0x2fff7b(0x8e3)] = _0x2fff7b(0x970); return; } else _0x329492['style'][_0x2fff7b(0x416)] = _0x2fff7b(0x8b4); } _0x43e621[_0x2fff7b(0x8f0)][_0x2fff7b(0x132)]('show'), _0x2e931e[_0x2fff7b(0x347)](); } else { _0x55cbc5(_0x2fff7b(0xb0a)); return; } } function _0x57def4() { const _0x58cd37 = _0x4d95ce; if (_0x58cd37(0x774) === _0x58cd37(0x774)) { const _0x1e81b9 = parseFloat(_0x2e931e['value']); if (isNaN(_0x1e81b9) || _0x1e81b9 <= 0x0) { if ('JqJMr' !== _0x58cd37(0x779)) _0x778bad[_0x58cd37(0x984)] = _0x30301e[_0x58cd37(0x7dc)](_0x5e52b0), _0x401c89[_0x58cd37(0x2d6)][_0x58cd37(0x164)] = 0x1; else { _0xd5e395(_0x58cd37(0xb0a)); return; } } const _0x1f0373 = _0x39d291(); let _0x4cc604 = null; if (_0x1f0373[_0x58cd37(0x433)] === _0x58cd37(0x24e)) { if (_0x58cd37(0x226) !== _0x58cd37(0x81a)) _0x4cc604 = _0x38f212['value']; else return '昨天\x20' + _0xce58ea; } else _0x4cc604 = _0x1f0373[_0x58cd37(0x258)][0x0]; const _0x173275 = _0x30ad29(_0x1f0373['id']), _0xf872aa = { 'role': _0x58cd37(0x384), 'type': 'transfer', 'content': _0x58cd37(0xa70) + (_0x590c99(_0x4cc604)?.[_0x58cd37(0x7d9)] || '未知') + _0x58cd37(0x20c) + _0x1e81b9 + ']', 'amount': _0x1e81b9, 'recipientId': _0x4cc604, 'senderId': _0x173275['id'], 'timestamp': Date[_0x58cd37(0x780)]() }; _0x5f49a9[_0x58cd37(0xb06)][_0x58cd37(0x238)](_0xf872aa), _0x3c4da6(), _0x56911c(), _0x43e621[_0x58cd37(0x8f0)][_0x58cd37(0x31f)](_0x58cd37(0x18c)); } else _0x3a3011['classList'][_0x58cd37(0x31f)](_0x58cd37(0x985), 'is-exiting-left'), _0x23dd38['classList']['remove'](_0x58cd37(0x459)), _0x22720f[_0x58cd37(0x55e)] = _0x1fb3bd, _0x165ba2(), _0x2eb98e[_0x58cd37(0x8ed)] = ![]; } async function _0x2c4970(_0x5e0887) { const _0x1ed612 = _0x4d95ce; if (_0x1ed612(0x4a1) !== _0x1ed612(0x6af)) { const _0x4429b0 = _0x590c99(_0x5e0887); if (!_0x4429b0) return; const _0x350f0b = await _0xd56340('确定要永久清空【' + _0x4429b0[_0x1ed612(0x7d9)] + '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。'); if (!_0x350f0b) return; const _0xa7c16b = _0x5f49a9[_0x1ed612(0x788)][_0x1ed612(0x4f2)](_0x57d10e => _0x57d10e[_0x1ed612(0x148)] === _0x5e0887); _0xa7c16b > -0x1 ? (_0x5f49a9['diaries'][_0x1ed612(0x69d)](_0xa7c16b, 0x1), _0x39e4f0(), _0x3aeac1(), _0xd5e395('【' + _0x4429b0[_0x1ed612(0x7d9)] + '】的日记本已被清空。')) : _0xd5e395(_0x1ed612(0x488)); } else _0x2fa9f(), _0x2ea14c(_0x1ed612(0xa81), 'home'); } function _0x1496d3() { const _0x593c93 = _0x4d95ce, _0x1449ae = document[_0x593c93(0x374)]('snoop-character-list-container'); _0x1449ae[_0x593c93(0x279)] = ''; const _0x21bef3 = _0x5f49a9[_0x593c93(0x6b0)][_0x593c93(0x8be)](_0x526048 => _0x5f49a9[_0x593c93(0x42d)]['some'](_0x54bc15 => _0x54bc15[_0x593c93(0x433)] === 'private' && _0x54bc15[_0x593c93(0x258)][_0x593c93(0x454)](_0x526048['id']))); if (_0x21bef3[_0x593c93(0x2ed)] === 0x0) { _0x1449ae[_0x593c93(0x279)] = _0x593c93(0x95c); return; } _0x21bef3['forEach'](_0x173d69 => { const _0x559307 = _0x593c93, _0x29cc12 = document['createElement']('li'); _0x29cc12[_0x559307(0x290)] = _0x559307(0x8f5), _0x29cc12[_0x559307(0x814)][_0x559307(0x723)] = _0x173d69['id'], _0x29cc12[_0x559307(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x173d69[_0x559307(0x7d6)] || _0x28cae8) + _0x559307(0x189) + _0x173d69[_0x559307(0x7d9)] + _0x559307(0xa34) + _0x173d69[_0x559307(0x7d9)] + _0x559307(0xa0e), _0x29cc12[_0x559307(0x179)](_0x559307(0x641))[_0x559307(0x458)](_0x559307(0x173), () => _0xe20c93(_0x173d69['id'])), _0x29cc12[_0x559307(0x179)]('.snoop-clear-btn')[_0x559307(0x458)](_0x559307(0x173), async _0x150e50 => { const _0x15decf = _0x559307; _0x150e50[_0x15decf(0x1dd)](); const _0x38cd58 = _0x590c99(_0x173d69['id']); if (!_0x38cd58) return; const _0x3eab06 = await _0xd56340(_0x15decf(0x71b) + _0x38cd58[_0x15decf(0x7d9)] + _0x15decf(0x331)); if (_0x3eab06) { _0x5a1a9e(!![], '正在焚烧【' + _0x38cd58[_0x15decf(0x7d9)] + '】的旧数据...'); const _0x1e8899 = [_0x15decf(0x3cb), _0x15decf(0x49b), _0x15decf(0xa62), _0x15decf(0x2db), _0x15decf(0x8d1), _0x15decf(0x278), _0x15decf(0x588), _0x15decf(0xb44)]; for (const _0x3f58ce of _0x1e8899) { if (_0x15decf(0x92c) !== 'iUgrb') { const _0x458173 = _0x15decf(0xb03) + _0x38cd58['id'] + '_' + _0x3f58ce; await _0x1fa3ca(_0x458173); } else return _0x7529a3[_0x15decf(0x6e2)]('聊天档案柜是空的，无需净化。'), 0x0; } _0x5a1a9e(![]), _0xd5e395('【' + _0x38cd58[_0x15decf(0x7d9)] + '】的手机已被重置。'); } }), _0x1449ae[_0x559307(0x962)](_0x29cc12); }); } let _0x46d9be = null, _0x338b9e = null; function _0x151e92() { const _0x681ec5 = _0x4d95ce; if (_0x681ec5(0x8b7) !== _0x681ec5(0x8b7)) { const _0x120e77 = _0x5730b2['querySelector'](_0x681ec5(0x66b)); if (_0x120e77) _0x120e77[_0x681ec5(0x31f)](); } else { const _0x13a638 = new Date(), _0x2395a4 = document['getElementById'](_0x681ec5(0x25c)), _0x4617fd = document[_0x681ec5(0x374)](_0x681ec5(0x139)), _0x41a82f = document[_0x681ec5(0x374)](_0x681ec5(0xa5c)); _0x2395a4 && _0x4617fd && (_0x681ec5(0x94b) === _0x681ec5(0x5c9) ? (_0x58980d['image'] = _0x4fcba1, _0x3f3678 = !![]) : (_0x2395a4[_0x681ec5(0x8e3)] = _0x13a638[_0x681ec5(0x91f)](_0x681ec5(0x983), { 'hour': _0x681ec5(0x75b), 'minute': _0x681ec5(0x75b), 'hour12': ![] }), _0x4617fd['textContent'] = _0x13a638['toLocaleDateString'](_0x681ec5(0x983), { 'month': _0x681ec5(0x366), 'day': _0x681ec5(0x618), 'weekday': _0x681ec5(0x366) }))), _0x41a82f && (_0x681ec5(0x703) !== _0x681ec5(0xa32) ? _0x41a82f[_0x681ec5(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x13a638[_0x681ec5(0x91f)](_0x681ec5(0x983), { 'hour': _0x681ec5(0x75b), 'minute': _0x681ec5(0x75b), 'hour12': ![] }) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' : _0x70b6fe['appendChild'](_0x5193e5)); } } function _0xe20c93(_0x389303) { const _0x2d3f8a = _0x4d95ce; _0x46d9be = _0x389303; const _0x595132 = _0x590c99(_0x389303); if (!_0x595132) return; const _0x1cd066 = document[_0x2d3f8a(0x374)](_0x2d3f8a(0x575)), _0x3b3656 = document[_0x2d3f8a(0x374)](_0x2d3f8a(0x269)); if (_0x3b3656) _0x3b3656[_0x2d3f8a(0x31f)](); const _0x21cdcd = document[_0x2d3f8a(0x374)](_0x2d3f8a(0x413)); if (_0x21cdcd) _0x21cdcd['remove'](); _0x1cd066[_0x2d3f8a(0x651)](_0x2d3f8a(0x34d), _0x2d3f8a(0x6c2)), _0x1cd066[_0x2d3f8a(0x651)](_0x2d3f8a(0x34d), '<div\x20id=\x22snoop-dock\x22></div>'), document[_0x2d3f8a(0x374)](_0x2d3f8a(0x201))[_0x2d3f8a(0x8e3)] = '', _0x138887(); if (_0x338b9e) clearInterval(_0x338b9e); _0x151e92(), _0x338b9e = setInterval(_0x151e92, 0x2710), _0x53a558(_0x2d3f8a(0x6df), _0x2d3f8a(0x7f2)); } function _0x138887() { const _0x1a4992 = _0x4d95ce, _0x334946 = document['getElementById'](_0x1a4992(0x3b8)), _0x103e7a = document[_0x1a4992(0x374)](_0x1a4992(0x413)); _0x334946[_0x1a4992(0x279)] = _0x1a4992(0x676), _0x103e7a[_0x1a4992(0x279)] = ''; const _0x4310f3 = _0x334946['querySelector']('.snoop-main-grid'), _0x2767d5 = [{ 'id': _0x1a4992(0x49b), 'name': '聊天', 'svg': _0x1a4992(0x5a4), 'area': _0x1a4992(0x89e) }, { 'id': _0x1a4992(0xa62), 'name': _0x1a4992(0x43f), 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': _0x1a4992(0x89e) }, { 'id': _0x1a4992(0x3cb), 'name': '相册', 'svg': _0x1a4992(0x74f), 'area': 'dock' }, { 'id': _0x1a4992(0xb44), 'name': '总结', 'svg': _0x1a4992(0x368), 'area': _0x1a4992(0x89e) }, { 'id': 'fragments', 'name': '备忘录', 'svg': _0x1a4992(0x141), 'area': _0x1a4992(0x518) }, { 'id': 'bites', 'name': '外卖', 'svg': _0x1a4992(0x229), 'area': _0x1a4992(0x518) }, { 'id': _0x1a4992(0x278), 'name': '购物', 'svg': _0x1a4992(0x62f), 'area': _0x1a4992(0x518) }, { 'id': _0x1a4992(0x588), 'name': '足迹', 'svg': _0x1a4992(0x338), 'area': _0x1a4992(0x518) }]; _0x2767d5[_0x1a4992(0x170)](_0x3aa2e2 => { const _0x5b73b0 = _0x1a4992; if ('bgrRX' === 'imGWU') _0x179c1a['error'](_0x5b73b0(0xa30), _0x296199), _0x4da652(_0x5b73b0(0x6a5) + _0x3eab8a['message']); else { const _0x41c867 = document[_0x5b73b0(0x95f)]('div'); _0x41c867[_0x5b73b0(0x290)] = _0x5b73b0(0x2e8), _0x41c867[_0x5b73b0(0x279)] = _0x5b73b0(0xb54) + _0x3aa2e2[_0x5b73b0(0x8ba)] + _0x5b73b0(0x480) + _0x3aa2e2[_0x5b73b0(0x7d9)] + _0x5b73b0(0x72c), _0x41c867[_0x5b73b0(0x458)]('click', () => _0x2abc40(_0x3aa2e2['id'], _0x3aa2e2[_0x5b73b0(0x7d9)])); if (_0x3aa2e2[_0x5b73b0(0xb31)] === _0x5b73b0(0x89e)) 'lGbrg' === 'lGbrg' ? _0x103e7a[_0x5b73b0(0x962)](_0x41c867) : _0x4c8358(_0xf86ed[_0x5b73b0(0x662)]); else { if ('hsFRg' !== _0x5b73b0(0x2d8)) _0x4310f3[_0x5b73b0(0x962)](_0x41c867); else { const _0x842526 = _0x37a577(_0x561984[_0x5b73b0(0x47e)]); _0x5aa776[_0x5b73b0(0x866)](_0x48020d, { 'content': _0x842526[_0x5b73b0(0x47e)], 'quotedMessage': _0x842526[_0x5b73b0(0x3a2)] }); } } } }); } document[_0x4d95ce(0x374)](_0x4d95ce(0x6de))['addEventListener'](_0x4d95ce(0x173), () => { const _0x31f81d = _0x4d95ce; _0x338b9e && (clearInterval(_0x338b9e), _0x338b9e = null); document[_0x31f81d(0x374)](_0x31f81d(0xac5))[_0x31f81d(0x2d6)][_0x31f81d(0x416)] = _0x31f81d(0x8b4); const _0x1b7701 = document[_0x31f81d(0x374)](_0x31f81d(0x413)); if (_0x1b7701) _0x1b7701[_0x31f81d(0x31f)](); const _0x62a612 = document[_0x31f81d(0x374)](_0x31f81d(0x269)); if (_0x62a612) _0x62a612[_0x31f81d(0x31f)](); _0x53a558(_0x31f81d(0x7f2), _0x31f81d(0x6df)); }); async function _0x2abc40(_0x3e4fa3, _0x302b74, _0xcc8dea = ![]) { const _0xe114bd = _0x4d95ce; document[_0xe114bd(0x374)](_0xe114bd(0x227))[_0xe114bd(0x2d6)][_0xe114bd(0x416)] = 'none'; const _0x2930bb = document[_0xe114bd(0x374)](_0xe114bd(0xac5)); _0x2930bb[_0xe114bd(0x279)] = _0xe114bd(0x5f6), _0x2930bb[_0xe114bd(0x2d6)][_0xe114bd(0x416)] = _0xe114bd(0x350); const _0x34d5a2 = 'snoop_' + _0x46d9be + '_' + _0x3e4fa3; try { if (_0x3e4fa3 === 'summary') { const _0x1d442a = await _0x16e028(_0x46d9be); _0x148384(_0x3e4fa3, _0x302b74, _0x1d442a); return; } let _0x382abe = await _0xfb4785(_0x34d5a2); if (_0xcc8dea || !_0x382abe) { if ('mYLHR' !== 'alTZk') { console[_0xe114bd(0x6e2)](_0xe114bd(0x982) + _0x34d5a2 + _0xe114bd(0x5bd)); let _0x955c47 = await _0x583b03(_0x3e4fa3, _0x46d9be, _0x382abe); if (_0x955c47) { const _0x2a00db = _0x955c47[_0xe114bd(0xa55)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x1dc922 = _0x2a00db ? _0x2a00db[0x1][_0xe114bd(0x1c8)]() : _0x955c47[_0xe114bd(0x1c8)](); let _0x4eade7; try { _0x4eade7 = JSON['parse'](_0x1dc922); } catch (_0x2a362b) { _0x4eade7 = _0x5c1894(_0x1dc922); if (!_0x4eade7) throw new Error(_0xe114bd(0x2c7)); } let _0x35cb9f; if (_0xcc8dea && _0x382abe) { if (_0xe114bd(0x19a) === _0xe114bd(0x300)) _0x226ffe[_0xe114bd(0x788)][_0xe114bd(0x69d)](_0x2c6879, 0x1), _0x513d83(), _0x380a45(), _0x58d512('【' + _0x11e33e[_0xe114bd(0x7d9)] + _0xe114bd(0x38c)); else try { const _0x22277b = JSON[_0xe114bd(0x468)](_0x382abe); if (_0x3e4fa3 === _0xe114bd(0x49b)) _0x35cb9f = JSON['stringify'](_0x4eade7), console[_0xe114bd(0x6e2)](_0xe114bd(0x36a)); else { if (_0xe114bd(0x5e5) !== _0xe114bd(0x4df)) { if (Array[_0xe114bd(0x552)](_0x22277b) && Array[_0xe114bd(0x552)](_0x4eade7)) { const _0x355c23 = _0x22277b[_0xe114bd(0x932)](_0x4eade7); _0x35cb9f = JSON[_0xe114bd(0x795)](_0x355c23), console[_0xe114bd(0x6e2)](_0xe114bd(0x28a)); } else _0x35cb9f = JSON[_0xe114bd(0x795)](_0x4eade7); } else { const _0x1c74e6 = _0x5b41a8(_0x344a2e[_0xe114bd(0x57a)]())[_0xe114bd(0x159)](0x2, '0'), _0xf1235a = _0x527100(_0x5a751f[_0xe114bd(0xaaa)]())['padStart'](0x2, '0'); _0x4b9d69[_0xe114bd(0x8e3)] = _0x1c74e6 + ':' + _0xf1235a; const _0xe06be9 = _0x26cb66[_0xe114bd(0xa47)]() + 0x1, _0x1a2cc1 = _0x2674b6[_0xe114bd(0x465)](), _0x485271 = ['星期日', _0xe114bd(0xa03), _0xe114bd(0xabe), _0xe114bd(0x6f3), _0xe114bd(0x345), '星期五', _0xe114bd(0x1e8)][_0x3d666c['getDay']()]; _0x4f18a9[_0xe114bd(0x8e3)] = _0xe06be9 + '月' + _0x1a2cc1 + '日\x20' + _0x485271; } } } catch (_0x3f5cd4) { _0x35cb9f = JSON[_0xe114bd(0x795)](_0x4eade7); } } else _0x35cb9f = JSON[_0xe114bd(0x795)](_0x4eade7); await _0x5c1bef(_0x34d5a2, _0x35cb9f), _0x382abe = _0x35cb9f; } } else _0x69826b += '\x20[并附上了一张图片]'; } else console['log']('缓存命中:\x20' + _0x34d5a2); _0x148384(_0x3e4fa3, _0x302b74, _0x382abe); } catch (_0xed7679) { if (_0xe114bd(0x2a2) === _0xe114bd(0x2a2)) console[_0xe114bd(0x7a4)](_0xe114bd(0x5df) + _0x302b74 + '\x20内容失败:', _0xed7679), _0x2930bb[_0xe114bd(0x279)] = _0xe114bd(0xaa9) + _0xed7679[_0xe114bd(0xb58)] + _0xe114bd(0xb1e); else { if (!_0x5ead7e || typeof _0x55b687 !== _0xe114bd(0x267)) return null; const _0x2dec59 = _0x21a754[_0xe114bd(0x656)]('['), _0x2e3d31 = _0x48c132['lastIndexOf'](']'); if (_0x2dec59 > -0x1 && _0x2e3d31 > _0x2dec59) return _0x15f8b2[_0xe114bd(0x80c)](_0x2dec59, _0x2e3d31 + 0x1); return null; } } } function _0x148384(_0x5bcf1a, _0x1bdd32, _0x1ef609) { const _0x15d092 = _0x4d95ce, _0x4d40fa = _0x590c99(_0x46d9be), _0x7f2c29 = document['getElementById'](_0x15d092(0xac5)); let _0x104a43 = ''; if (!_0x1ef609) _0x104a43 = _0x15d092(0x4f5); else { if (_0x5bcf1a === _0x15d092(0xb44)) _0x104a43 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x1ef609 + _0x15d092(0x569); else try { let _0x3227ce = null; const _0x3b1562 = _0x1ef609[_0x15d092(0xa55)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x56e3e3 = _0x3b1562 ? _0x3b1562[0x1] : _0x1ef609; _0x3227ce = JSON[_0x15d092(0x468)](_0x56e3e3); const _0x459ae7 = _0x590c99(_0x46d9be); switch (_0x5bcf1a) { case 'gallery': _0x104a43 = _0x36a525(_0x3227ce); break; case _0x15d092(0x49b): _0x104a43 = _0x3a35b6(_0x3227ce, _0x459ae7['name']); break; case _0x15d092(0xa62): _0x104a43 = _0x53706c(_0x3227ce); break; case _0x15d092(0x2db): _0x104a43 = _0x42a05c(_0x3227ce); break; case _0x15d092(0x8d1): _0x104a43 = _0x2e4f63(_0x3227ce); break; case 'wants': _0x104a43 = _0x4523ee(_0x3227ce); break; case 'footprints': _0x104a43 = _0x145273(_0x3227ce); break; case _0x15d092(0xb44): _0x104a43 = _0x15d092(0x6c9) + _0x1ef609 + _0x15d092(0x843); break; default: _0x104a43 = _0x15d092(0x3c4) + JSON[_0x15d092(0x795)](_0x3227ce, null, 0x2) + _0x15d092(0xb00); } } catch (_0x376596) { console[_0x15d092(0x7a4)](_0x15d092(0x8a3), _0x376596), _0x104a43 = '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>' + _0x1ef609 + _0x15d092(0xb00); } } _0x7f2c29[_0x15d092(0x279)] = _0x15d092(0x78b) + _0x1bdd32 + _0x15d092(0x837) + _0x4d40fa['name'] + _0x15d092(0x857) + (_0x5bcf1a === _0x15d092(0xb44) ? '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>' : '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x104a43 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; const _0x27a2db = _0x7f2c29[_0x15d092(0x179)]('.snoop-app-content'); _0x5bcf1a === _0x15d092(0xb44) && ('fHSNX' !== 'fHSNX' ? (_0x42d27c['classList'][_0x15d092(0x31f)](_0x15d092(0x18c)), _0x3771cf = null) : _0x27a2db[_0x15d092(0x2d6)][_0x15d092(0x21c)] = '0'), document[_0x15d092(0x374)](_0x15d092(0x1ee))[_0x15d092(0x458)](_0x15d092(0x173), () => { const _0x134cd6 = _0x15d092; if ('tYKDm' === _0x134cd6(0x34c)) _0x7f2c29['style'][_0x134cd6(0x416)] = 'none', document[_0x134cd6(0x374)](_0x134cd6(0x227))[_0x134cd6(0x2d6)][_0x134cd6(0x416)] = 'flex'; else { if (_0x34f775['key'] === 'Escape') _0xe68acf(null); _0x22e1f0['key'] === _0x134cd6(0x86f) && (_0xe3a7f1[_0x134cd6(0x6ce)](), _0x2383bf()); } }), _0x5bcf1a === _0x15d092(0xb44) ? document[_0x15d092(0x374)](_0x15d092(0x1c2))[_0x15d092(0x458)](_0x15d092(0x173), () => { const _0x40c5c3 = _0x15d092, _0x1ad1ea = document[_0x40c5c3(0x374)](_0x40c5c3(0x26d)); _0x1ad1ea['select'](), document['execCommand'](_0x40c5c3(0xa11)), _0xd5e395(_0x40c5c3(0xafd)); }) : _0x15d092(0x9fc) === _0x15d092(0x82a) ? (_0x1511dd(), _0x1605e4['conversationHistory'] = [], _0x20b011()) : document[_0x15d092(0x374)](_0x15d092(0x5c0))[_0x15d092(0x458)](_0x15d092(0x173), async () => { _0x2abc40(_0x5bcf1a, _0x1bdd32, !![]); }), _0x5bcf1a === _0x15d092(0x49b) && _0x7f2c29[_0x15d092(0x410)]('.snoop-chat-item')['forEach'](_0x262243 => { const _0xe90647 = _0x15d092; _0x262243[_0xe90647(0x458)](_0xe90647(0x173), () => { const _0xb00169 = _0xe90647; if (_0xb00169(0x67f) === _0xb00169(0x67f)) { const _0x37a6a9 = JSON['parse'](_0x262243['dataset'][_0xb00169(0x6e2)][_0xb00169(0xa38)](/&quot;/g, '\x22')), _0x2aa8e9 = _0x262243['dataset'][_0xb00169(0x9ae)], _0x1e1083 = _0x262243[_0xb00169(0x814)][_0xb00169(0xa57)]; _0x58f7d7(_0x2aa8e9, _0x1e1083, _0x37a6a9); } else _0x25eccc[_0xb00169(0x6e2)](_0xb00169(0x5c6)), _0x433b18[_0xb00169(0x966)](_0xb00169(0x567), { 'keyPath': 'id' }); }); }); } function _0x58f7d7(_0x3fa87c, _0x11dd3e, _0x52453c) { const _0x489c2b = _0x4d95ce; if (_0x489c2b(0x90c) === 'mFpsX') { let _0x166838 = null; if (_0x38dd4f?.[_0x489c2b(0x433)] === 'private') _0x166838 = _0x3a8534; else _0x573eba?.['type'] === 'group' && _0x56b5c5 && (_0x166838 = _0x5989ad(_0x52b7f0)); _0x166838 && (_0x15b076 = _0x166838[_0x489c2b(0x59f)] || ''); } else { const _0x328125 = document['querySelector'](_0x489c2b(0x57f)), _0x68d6ac = document[_0x489c2b(0x179)](_0x489c2b(0x635)); let _0xac946e = _0x489c2b(0x9e9); if (!_0x52453c || _0x52453c['length'] === 0x0) _0xac946e += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>'; else { if (_0x489c2b(0xb17) === 'EKaHQ') _0x52453c[_0x489c2b(0x170)](_0xc80657 => { const _0x541108 = _0x489c2b, _0x463665 = _0xc80657['sender'] === _0x541108(0x14b), _0x13fc5d = _0x463665 ? _0x11dd3e ? _0x11dd3e[0x0] : '?' : _0x3fa87c ? _0x3fa87c[0x0] : '?'; _0xac946e += _0x541108(0x556) + (_0x463665 ? 'user' : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x463665 ? _0x541108(0x825) + _0x13fc5d + _0x541108(0x9e0) : '') + _0x541108(0x84d) + (_0x463665 ? _0x541108(0x384) : 'ai') + _0x541108(0x799) + _0xc80657['content'] + _0x541108(0x45f) + (_0x463665 ? _0x541108(0x825) + _0x13fc5d + _0x541108(0x9e0) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; }); else { const _0xf5c1b8 = _0x2194b1[_0x489c2b(0x468)](_0x3b144a); _0x435ea3[_0x489c2b(0x552)](_0xf5c1b8) && (_0x5b6ad4[_0x489c2b(0x330)] = _0xf5c1b8[_0x489c2b(0x190)](_0xe0de1 => _0xe0de1[_0x489c2b(0x7d9)] + '--' + _0xe0de1['url'])[_0x489c2b(0x414)]('\x0a')); } } _0xac946e += '</div>', _0x328125[_0x489c2b(0x279)] = _0xac946e, _0x328125['scrollTop'] = _0x328125[_0x489c2b(0xa65)], _0x68d6ac[_0x489c2b(0x279)] = _0x489c2b(0x9c5) + _0x3fa87c + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document[_0x489c2b(0x374)](_0x489c2b(0x6bb))[_0x489c2b(0x458)]('click', () => { _0x2abc40('whispers', '聊天'); }), !document['getElementById']('snoop-temp-style') && document[_0x489c2b(0x665)][_0x489c2b(0x651)]('beforeend', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>'); } } function _0x5c1894(_0x235917) { const _0x5e600d = _0x4d95ce; if (!_0x235917 || typeof _0x235917 !== _0x5e600d(0x267)) return null; const _0x5e1743 = _0x235917[_0x5e600d(0x1c8)]()[_0x5e600d(0x77e)]('\x0a'), _0x27632a = []; let _0x23a8ac = null; for (const _0x4d7678 of _0x5e1743) { if (_0x5e600d(0x5ac) === _0x5e600d(0x224)) { const _0x5eb252 = _0x4b4c5c['getElementById'](_0x5e600d(0x364))['value']; _0x5eb252 && (_0x142661[_0x5e600d(0x4f6)] = _0x5eb252, _0x464a8f(), _0x1dee92(_0x5e600d(0x305)), _0x3ae74c(), _0x23434d['getElementById'](_0x5e600d(0x3c2))['style'][_0x5e600d(0x416)] = _0x5e600d(0x8b4)); } else { const _0x28638c = _0x4d7678['trim'](); if (_0x28638c[_0x5e600d(0x93c)]('-\x20')) { if (_0x23a8ac) { if (_0x5e600d(0x1c5) !== _0x5e600d(0x7a0)) _0x27632a['push'](_0x23a8ac); else { const _0x411210 = _0x9bbb00(_0xfc68e[_0x5e600d(0x258)][0x0]); _0x5161e[_0x5e600d(0x8e3)] = _0x411210 ? _0x411210[_0x5e600d(0x7d9)] : _0x5e600d(0x968); } } _0x23a8ac = {}; const _0x159166 = _0x28638c[_0x5e600d(0x80c)](0x2), _0x3d0929 = _0x159166[_0x5e600d(0x77e)](/:\s(.+)/); if (_0x3d0929[_0x5e600d(0x2ed)] > 0x1) { const _0x24b455 = _0x3d0929[0x0][_0x5e600d(0x1c8)](), _0x5b1f93 = _0x3d0929[0x1][_0x5e600d(0x1c8)]()[_0x5e600d(0xa38)](/^"|"$/g, ''); _0x23a8ac[_0x24b455] = _0x5b1f93; } } else { if (_0x23a8ac && _0x28638c) { const _0x581701 = _0x28638c[_0x5e600d(0x77e)](/:\s(.+)/); if (_0x581701[_0x5e600d(0x2ed)] > 0x1) { if (_0x5e600d(0x926) === 'XIEPP') { const _0x181b93 = _0x581701[0x0][_0x5e600d(0x1c8)](), _0x75658c = _0x581701[0x1][_0x5e600d(0x1c8)]()['replace'](/^"|"$/g, ''); _0x23a8ac[_0x181b93] = _0x75658c; } else _0x3081e8[_0x5e600d(0x627)] = _0x577bbc, _0x506a2c[_0x5e600d(0x33c)] = _0x441770 => _0x439102(_0x441770[_0x5e600d(0x89a)][_0x5e600d(0x7a4)]); } } } } } return _0x23a8ac && (_0x5e600d(0x672) === 'WSfwD' ? _0x306674(_0x58ada3, _0x30084d[_0x5e600d(0x42f)]) : _0x27632a[_0x5e600d(0x238)](_0x23a8ac)), _0x27632a[_0x5e600d(0x2ed)] > 0x0 ? _0x27632a : null; } async function _0xab8d82(_0x3330ae) { const _0xa270f7 = _0x4d95ce; if (!_0x3330ae) return ''; const _0x19c755 = [{ 'id': _0xa270f7(0x3cb), 'name': '相册' }, { 'id': _0xa270f7(0x49b), 'name': _0xa270f7(0x7dd) }, { 'id': _0xa270f7(0xa62), 'name': '浏览器历史' }, { 'id': _0xa270f7(0x2db), 'name': _0xa270f7(0x7fa) }, { 'id': 'bites', 'name': _0xa270f7(0x9f8) }, { 'id': _0xa270f7(0x278), 'name': _0xa270f7(0x5bc) }, { 'id': 'footprints', 'name': _0xa270f7(0x29b) }]; let _0xa08afa = ''; for (const _0x1db3b8 of _0x19c755) { try { const _0x1dcdcb = _0xa270f7(0xb03) + _0x3330ae + '_' + _0x1db3b8['id'], _0x4dcb58 = await _0xfb4785(_0x1dcdcb); if (_0x4dcb58) { if ('SKSeX' === _0xa270f7(0xa5a)) { const _0x3d2bd8 = _0x4dcb58[_0xa270f7(0xa55)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x39aa4f = _0x3d2bd8 ? _0x3d2bd8[0x1][_0xa270f7(0x1c8)]() : _0x4dcb58[_0xa270f7(0x1c8)](); if (!_0x39aa4f) continue; let _0x364969 = null; try { if (_0xa270f7(0x358) === 'ZTomB') _0x364969 = JSON[_0xa270f7(0x468)](_0x39aa4f); else { _0x44a89a(_0xa270f7(0x35a)); return; } } catch (_0x39bbad) { if (_0xa270f7(0x3cd) === _0xa270f7(0x871)) !_0x464c67[_0xa270f7(0x8f0)]['contains'](_0xa270f7(0x846)) && _0x2db394[_0xa270f7(0x31f)](); else { console['warn']('JSON解析失败\x20(' + _0x1db3b8['id'] + _0xa270f7(0x418), _0x39bbad[_0xa270f7(0xb58)]); try { if (_0xa270f7(0x55b) !== _0xa270f7(0x4ed)) { _0x364969 = _0x5c1894(_0x39aa4f); if (!_0x364969) { if ('vJfqe' === _0xa270f7(0x9af)) throw new Error(_0xa270f7(0x935)); else _0x402f03(_0xa270f7(0x6aa) + _0x5081bc[_0xa270f7(0xb58)]); } console[_0xa270f7(0x6e2)]('兼容模式成功，已将\x20' + _0x1db3b8['id'] + _0xa270f7(0x3aa)); } else try { const _0x39eab6 = _0x2f3701[_0xa270f7(0x7dc)](_0x321505), _0x57bc55 = _0xa270f7(0x947), _0x4a8bd9 = _0xa270f7(0xade) + _0x57bc55 + _0xa270f7(0x890) + _0x39eab6 + _0xa270f7(0xb23); _0x205a7e['innerHTML'] = _0x4a8bd9, _0xcc0516['documentElement']['style'][_0xa270f7(0x4c2)](_0xa270f7(0x994), '\x27' + _0x57bc55 + '\x27'), _0x3f9922[_0xa270f7(0x8e3)] = _0xa270f7(0x5b7); } catch (_0x1edd9c) { _0x3b48d9[_0xa270f7(0x7a4)](_0xa270f7(0x884), _0x1edd9c), _0x524bb8('哼，你这字体文件有问题，用不了。'); } } catch (_0x4ad5b6) { if (_0xa270f7(0x909) === 'mNfOy') _0x21e3ae(_0x497ed3[_0xa270f7(0x5b0)], _0x1d41c2['emotion']); else throw _0x39bbad; } } } if (Array[_0xa270f7(0x552)](_0x364969) && _0x364969[_0xa270f7(0x2ed)] > 0x0) { if ('ReUBh' !== _0xa270f7(0x191)) { _0xa08afa === '' && (_0xa270f7(0x499) !== 'wTfwj' ? _0xa08afa += '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a' : _0xe49e03['value'] = ''); _0xa08afa += _0xa270f7(0x881) + _0x1db3b8[_0xa270f7(0x7d9)] + '\x0a'; switch (_0x1db3b8['id']) { case _0xa270f7(0x3cb): _0x364969['forEach'](_0x50da68 => { const _0x303ef8 = _0xa270f7; _0x303ef8(0xa58) === _0x303ef8(0xa58) ? _0xa08afa += _0x303ef8(0x2c0) + _0x50da68['description'] + _0x303ef8(0x6ef) : (_0xc5c1ed[_0x303ef8(0x7a4)](_0x303ef8(0x1a0), _0x541fe6), _0x353c4a('保存壁纸失败:\x20' + _0x2080d1[_0x303ef8(0xb58)])); }); break; case _0xa270f7(0x49b): _0x364969['forEach'](_0x1b5b23 => { const _0x4fac2e = _0xa270f7; if (_0x4fac2e(0x9e8) === _0x4fac2e(0x9e8)) _0xa08afa += _0x4fac2e(0x821) + _0x1b5b23['contact_name'] + '”聊过天，关于：“' + _0x1b5b23['last_message_preview'] + '”。\x0a', _0x1b5b23['log'] && Array[_0x4fac2e(0x552)](_0x1b5b23['log']) && (_0xa08afa += _0x4fac2e(0x24b), _0x1b5b23[_0x4fac2e(0x6e2)]['forEach'](_0x2f6040 => { const _0x468b93 = _0x4fac2e, _0x7f188f = _0x2f6040[_0x468b93(0x31d)] === _0x468b93(0x14b) ? '你' : _0x1b5b23['contact_name']; _0xa08afa += '\x20\x20\x20\x20-\x20' + _0x7f188f + ':\x20' + _0x2f6040['content'] + '\x0a'; })); else { const _0x420df0 = _0x590d13[_0x4fac2e(0x95f)]('div'); _0x420df0['className'] = _0x4fac2e(0x3d0), _0x420df0[_0x4fac2e(0x279)] = '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-' + _0x367d51['id'] + _0x4fac2e(0xab3) + _0x25cde7['id'] + _0x4fac2e(0x78e) + (_0x5bbce5[_0x4fac2e(0x7d6)] || _0x2fa3aa) + _0x4fac2e(0xa96) + _0x578567['id'] + _0x4fac2e(0x51e) + _0x35790f[_0x4fac2e(0x7d9)] + _0x4fac2e(0x138), _0x35cf9a[_0x4fac2e(0x962)](_0x420df0); } }); break; case _0xa270f7(0xa62): _0x364969[_0xa270f7(0x170)](_0x22d218 => { const _0x521531 = _0xa270f7; _0xa08afa += '-\x20你曾经搜索过：“' + _0x22d218[_0x521531(0xa2f)] + '”。\x0a'; }); break; case _0xa270f7(0x2db): _0x364969[_0xa270f7(0x170)](_0x13f282 => { const _0x40ea02 = _0xa270f7; _0xa08afa += _0x40ea02(0x667) + _0x13f282[_0x40ea02(0x638)] + '”的笔记，内容是：“' + _0x13f282[_0x40ea02(0x47e)][_0x40ea02(0xa38)](/\n/g, '\x20') + _0x40ea02(0x6ef); }); break; case 'bites': _0x364969[_0xa270f7(0x170)](_0x2fe096 => { const _0x3b5f85 = _0xa270f7; if (_0x3b5f85(0x6cd) !== _0x3b5f85(0x6cd)) { _0x1207e6[_0x3b5f85(0x6b0)] = _0x7d5fbf[_0x3b5f85(0x6b0)]['filter'](_0x4a4191 => _0x4a4191['id'] !== _0x3ebda7), _0x5e7179[_0x3b5f85(0x42d)][_0x3b5f85(0x170)](_0x4d8a5d => { const _0x4911e6 = _0x3b5f85; _0x4d8a5d[_0x4911e6(0x433)] === _0x4911e6(0x24e) && (_0x4d8a5d['participantIds'] = _0x4d8a5d[_0x4911e6(0x258)][_0x4911e6(0x8be)](_0x390b18 => _0x390b18 !== _0x40201c)); }); const _0x476a59 = _0x4d4677['chats'][_0x3b5f85(0x7ed)](_0x2ea4e7 => _0x2ea4e7[_0x3b5f85(0x433)] === 'private' && _0x2ea4e7[_0x3b5f85(0x258)][_0x3b5f85(0x454)](_0x3f8116)); _0x476a59 && _0x32cbba(_0x476a59['id']), _0x7e4d0e[_0x3b5f85(0x42d)] = _0x25654c[_0x3b5f85(0x42d)][_0x3b5f85(0x8be)](_0x3a6388 => _0x3a6388[_0x3b5f85(0x433)] !== _0x3b5f85(0x24e) || _0x3a6388[_0x3b5f85(0x258)]['length'] > 0x1), _0x357515(), _0x1643ea(); } else _0xa08afa += _0x3b5f85(0x69c) + _0x2fe096[_0x3b5f85(0xb18)] + _0x3b5f85(0x6fa) + _0x2fe096[_0x3b5f85(0x2d9)][_0x3b5f85(0x414)]('、') + '。\x0a'; }); break; case _0xa270f7(0x278): _0x364969['forEach'](_0x55cdf7 => { const _0x1e1843 = _0xa270f7; _0xa08afa += _0x1e1843(0x571) + _0x55cdf7['store_name'] + _0x1e1843(0x357) + _0x55cdf7['item_name'] + '”。\x0a'; }); break; case _0xa270f7(0x588): _0x364969[_0xa270f7(0x170)](_0x5326b8 => { const _0x238a78 = _0xa270f7; _0xa08afa += _0x238a78(0x40f) + _0x5326b8[_0x238a78(0x528)] + _0x238a78(0x1b9) + _0x5326b8[_0x238a78(0x2b0)] + _0x238a78(0x6ef); }); break; default: _0x364969[_0xa270f7(0x170)](_0x2534ae => { const _0x4452d3 = _0xa270f7; _0xa08afa += '-\x20' + JSON[_0x4452d3(0x795)](_0x2534ae) + '\x0a'; }); break; } } else _0x2b7c1e['error'](_0xa270f7(0x668), _0x1ab946), _0x44b560(_0xa270f7(0x471) + _0x564145['message']); } } else _0x418818['appendChild'](_0x555498), _0x4c4085[_0xa270f7(0x962)](_0x524d1f); } } catch (_0xc7dd18) { if (_0xa270f7(0x4b1) === _0xa270f7(0x9ca)) { _0x4e0d95[_0xa270f7(0x80a)][_0x55ebfb] = null; if (_0x513849 === _0xa270f7(0xad0)) _0x2920ce[_0xa270f7(0x80a)][_0xa270f7(0x3a7)] = null; _0x2dd240(); } else console[_0xa270f7(0x7a4)](_0xa270f7(0x878) + _0x1db3b8['id'] + ')，已跳过。这不应该发生，数据库可能已损坏。', _0xc7dd18); } } return _0xa08afa; } function _0x36a525(_0x118dff) { const _0x3029c0 = _0x4d95ce; if (!Array['isArray'](_0x118dff)) return _0x3029c0(0x2a7); if (_0x118dff[_0x3029c0(0x2ed)] === 0x0) return _0x3029c0(0x3fb); return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x118dff[_0x3029c0(0x190)]((_0x52313e, _0x1d55d0) => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20' + (_0x1d55d0 < _0x118dff[_0x3029c0(0x2ed)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x3029c0(0x950) + (_0x52313e[_0x3029c0(0x551)] || _0x3029c0(0x39a)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x52313e['timestamp'] || '') + _0x3029c0(0x50a))['join']('') + _0x3029c0(0x9e0); } function _0x3a35b6(_0x4b2323, _0x212d22) { const _0x47ee5d = _0x4d95ce; if (!Array[_0x47ee5d(0x552)](_0x4b2323) || _0x4b2323['length'] === 0x0) return _0x47ee5d(0x3db); return _0x47ee5d(0x8f7) + _0x4b2323['map']((_0x5cb5fe, _0x223eb6) => { const _0x488f2a = _0x47ee5d; if (_0x488f2a(0x4ee) !== _0x488f2a(0x266)) { const _0xf266f2 = JSON['stringify'](_0x5cb5fe[_0x488f2a(0x6e2)] || [])['replace'](/'/g, '&apos;')['replace'](/"/g, _0x488f2a(0x2fe)), _0x4525e9 = _0x5cb5fe[_0x488f2a(0x696)] || _0x488f2a(0xb39); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x223eb6 < _0x4b2323[_0x488f2a(0x2ed)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x488f2a(0x294) + _0xf266f2 + _0x488f2a(0x7f4) + _0x4525e9 + _0x488f2a(0x3f3) + _0x212d22 + _0x488f2a(0x7ac) + _0x4525e9[_0x488f2a(0x1e5)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x4525e9 + _0x488f2a(0x144) + (_0x5cb5fe[_0x488f2a(0x63d)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } else _0x2d5333[_0x488f2a(0x7a4)](_0x488f2a(0x311) + _0x123651 + _0x488f2a(0xa43) + _0x216b73 + '):', _0x3226d5), _0x4330ed['coverUrl'] = null, _0x420215[_0x488f2a(0x4ca)] = null; })[_0x47ee5d(0x414)]('') + _0x47ee5d(0x9e0); } function _0x53706c(_0x4ba793) { const _0x6f9931 = _0x4d95ce; if (_0x6f9931(0x7af) !== _0x6f9931(0x7af)) _0x35d1d3[_0x6f9931(0x962)](_0x5f4d60[_0x6f9931(0x95f)]('div')); else { if (!Array[_0x6f9931(0x552)](_0x4ba793)) return '<p>格式错误</p>'; if (_0x4ba793['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x4ba793[_0x6f9931(0x43a)]((_0xa326ce, _0x462a01) => new Date(_0x462a01['timestamp']) - new Date(_0xa326ce[_0x6f9931(0x75a)])), _0x6f9931(0x8f7) + _0x4ba793[_0x6f9931(0x190)]((_0xecc670, _0x378e3e) => _0x6f9931(0x894) + (_0x378e3e < _0x4ba793['length'] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x6f9931(0x748) + (_0xecc670[_0x6f9931(0xa2f)] || '未知搜索') + _0x6f9931(0x155) + (_0xecc670[_0x6f9931(0x160)] || _0x6f9931(0x92e)) + _0x6f9931(0x9c4) + (_0xecc670['timestamp'] || '') + _0x6f9931(0x79f))[_0x6f9931(0x414)]('') + _0x6f9931(0x9e0); } } function _0x42a05c(_0x1c5307) { const _0x84c53c = _0x4d95ce; if (_0x84c53c(0x856) === 'TmjqK') { if (!Array[_0x84c53c(0x552)](_0x1c5307)) return _0x84c53c(0x2a7); if (_0x1c5307['length'] === 0x0) return _0x84c53c(0x7b3); return _0x1c5307[_0x84c53c(0x43a)]((_0x4cb35a, _0xacd2a2) => new Date(_0xacd2a2['last_edited']) - new Date(_0x4cb35a[_0x84c53c(0x576)])), _0x1c5307[_0x84c53c(0x190)](_0x2ab55f => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + (_0x2ab55f[_0x84c53c(0x638)] || _0x84c53c(0x57e)) + _0x84c53c(0x5ef) + (_0x2ab55f['content'] || '') + _0x84c53c(0x85d) + (_0x2ab55f[_0x84c53c(0x576)] || '') + _0x84c53c(0x2e7))[_0x84c53c(0x414)](''); } else _0x3daad9[_0x84c53c(0x2d6)][_0x84c53c(0x614)] = ''; } function _0x2e4f63(_0x5b1110) { const _0x1fb3ad = _0x4d95ce; if (!Array[_0x1fb3ad(0x552)](_0x5b1110)) return _0x1fb3ad(0x2a7); if (_0x5b1110[_0x1fb3ad(0x2ed)] === 0x0) return _0x1fb3ad(0x547); return _0x5b1110[_0x1fb3ad(0x43a)]((_0x1e4fbb, _0x36b53b) => new Date(_0x36b53b[_0x1fb3ad(0x75a)]) - new Date(_0x1e4fbb[_0x1fb3ad(0x75a)])), _0x5b1110[_0x1fb3ad(0x190)](_0x1c6684 => { const _0x107dd6 = _0x1fb3ad; if ('hRkXB' !== _0x107dd6(0x7c5)) _0x5c6b6a[_0x107dd6(0x8f0)]['toggle'](_0x107dd6(0x18c)), _0x5a9144[_0x107dd6(0x8f0)][_0x107dd6(0x998)]('show') && (_0x3109a1['scrollTop'] = _0x3b14c3[_0x107dd6(0xa65)]); else { const _0x226a37 = (_0x1c6684['items'] || [])[_0x107dd6(0x190)](_0x214dcb => _0x107dd6(0x8e8) + _0x214dcb + _0x107dd6(0x17d))[_0x107dd6(0x414)](''); return _0x107dd6(0x3a5) + (_0x1c6684[_0x107dd6(0xb18)] || _0x107dd6(0x93a)) + _0x107dd6(0x531) + (_0x1c6684['timestamp'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0x1c6684[_0x107dd6(0x405)] || _0x107dd6(0x1d4)) + _0x107dd6(0x826) + _0x226a37 + _0x107dd6(0x48a) + (_0x1c6684['total_cost'] || 0x0)[_0x107dd6(0x539)](0x2) + _0x107dd6(0xb3e); } })[_0x1fb3ad(0x414)](''); } function _0x4523ee(_0x4c2639) { const _0x1a66e8 = _0x4d95ce; if (!Array['isArray'](_0x4c2639)) return _0x1a66e8(0x2a7); if (_0x4c2639[_0x1a66e8(0x2ed)] === 0x0) return _0x1a66e8(0x79b); return _0x4c2639[_0x1a66e8(0x43a)]((_0x1abcbb, _0x13e6fd) => new Date(_0x13e6fd[_0x1a66e8(0x75a)]) - new Date(_0x1abcbb[_0x1a66e8(0x75a)])), _0x4c2639[_0x1a66e8(0x190)](_0x4e14dd => _0x1a66e8(0x236) + (_0x4e14dd['store_name'] || _0x1a66e8(0xa99)) + _0x1a66e8(0x8e0) + (_0x4e14dd[_0x1a66e8(0x75a)] || '') + _0x1a66e8(0x43c) + (_0x4e14dd[_0x1a66e8(0x40d)] || _0x1a66e8(0x1cb)) + _0x1a66e8(0x8a0) + (_0x4e14dd[_0x1a66e8(0x5f4)] || 0x0)[_0x1a66e8(0x539)](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x1a66e8(0x414)](''); } function _0x145273(_0x4746a3) { const _0x13b0e8 = _0x4d95ce; if (!Array[_0x13b0e8(0x552)](_0x4746a3)) return '<p>格式错误</p>'; if (_0x4746a3[_0x13b0e8(0x2ed)] === 0x0) return _0x13b0e8(0x80e); return _0x4746a3[_0x13b0e8(0x43a)]((_0xab5b56, _0x478c05) => new Date(_0x478c05[_0x13b0e8(0x75a)]) - new Date(_0xab5b56['timestamp'])), _0x13b0e8(0xa6f) + _0x4746a3[_0x13b0e8(0x190)](_0x4cd514 => _0x13b0e8(0x2e3) + (_0x4cd514[_0x13b0e8(0x528)] || '未知地点') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>' + (_0x4cd514[_0x13b0e8(0x2b0)] || '') + _0x13b0e8(0x5a8) + (_0x4cd514[_0x13b0e8(0x75a)] || '') + _0x13b0e8(0x2b9))[_0x13b0e8(0x414)]('') + _0x13b0e8(0x9e0); } async function _0x583b03(_0x42c58d, _0x10ccc1, _0x45bd7f = null) { const _0x109741 = _0x4d95ce; if ('lOtYs' === 'CyGVB') _0x53f912[_0x109741(0x1dd)](), _0x3aa56c[_0x109741(0x8f0)][_0x109741(0x411)](_0x109741(0x8d9)), _0x9010ee['classList']['toggle'](_0x109741(0xb1f)); else { const _0x19cf49 = _0x590c99(_0x10ccc1), _0x312337 = _0x5f49a9[_0x109741(0x42d)]['find'](_0x44c36f => _0x44c36f[_0x109741(0x433)] === 'private' && _0x44c36f['participantIds'][_0x109741(0x454)](_0x10ccc1)), _0x284afc = _0x30ad29(_0x312337?.['id'] || _0x5f49a9[_0x109741(0x824)]); if (!_0x19cf49) throw new Error(_0x109741(0x577)); const { omniText: _0xe57c9f } = _0x2719e3(_0x10ccc1); let _0x2b7ed5 = ''; const _0x5a9414 = new Date(); let _0x4888ce = null, _0x2ac01f = '无'; if (_0x45bd7f) { if (_0x109741(0xae2) !== _0x109741(0xae2)) { _0x59a285 = _0x2a9a7c(_0x5e5519); if (!_0x4b9557) throw new _0x2ba305('YAML翻译机也无法理解这段梦话。'); _0x58a0d4[_0x109741(0x6e2)](_0x109741(0xa4c) + _0x3bb2e0['id'] + _0x109741(0x3aa)); } else try { const _0x118440 = JSON[_0x109741(0x468)](_0x45bd7f); if (Array['isArray'](_0x118440) && _0x118440['length'] > 0x0) { const _0x4b8dfd = _0x118440[_0x109741(0x190)](_0xe3cf8c => new Date(_0xe3cf8c['timestamp'] || _0xe3cf8c[_0x109741(0x576)]))[_0x109741(0x8be)](_0x560743 => !isNaN(_0x560743)); _0x4b8dfd[_0x109741(0x2ed)] > 0x0 && (_0x109741(0x954) !== 'jnABo' ? _0x3310af['textContent'] = _0x10db63['name'] || '群聊\x20(' + _0x21d774[_0x109741(0x258)][_0x109741(0x2ed)] + ')' : (_0x4888ce = new Date(Math[_0x109741(0xacd)]['apply'](null, _0x4b8dfd)), _0x2ac01f = _0x4888ce[_0x109741(0x591)](_0x109741(0x983), { 'dateStyle': _0x109741(0x95a), 'timeStyle': 'short' }))); } } catch (_0x22b1ac) { console[_0x109741(0x390)]('无法解析旧的视奸内容来获取时间戳。', _0x22b1ac); } } const _0x594555 = _0x97843f(_0x10ccc1); _0x2b7ed5 = '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', _0x2b7ed5 += _0x109741(0x1b4) + _0x5a9414[_0x109741(0x591)](_0x109741(0x983), { 'dateStyle': _0x109741(0x5d7), 'timeStyle': _0x109741(0x54d) }) + '\x0a'; if (_0x594555) { const _0x2c54d8 = new Date(_0x594555['timestamp']), _0x18b446 = _0x34dad7(_0x2c54d8); _0x2b7ed5 += _0x109741(0xa4d) + _0x18b446 + '\x0a'; const _0x298653 = _0x5a9414['toDateString'](), _0x554c63 = _0x2c54d8[_0x109741(0x4b4)](), _0x4581a1 = new Date(); _0x4581a1[_0x109741(0x162)](_0x5a9414[_0x109741(0x465)]() - 0x1); const _0x55fef7 = _0x4581a1[_0x109741(0x4b4)](); if (_0x298653 === _0x554c63) { const _0x5730cd = (_0x5a9414 - _0x2c54d8) / (0x3e8 * 0x3c); if (_0x5730cd < 0x3c) _0x2b7ed5 += _0x109741(0x642); else { if (_0x109741(0x436) !== 'tRJuP') _0x2b7ed5 += '-\x20**状态提示**:\x20你上一次活动是在' + Math[_0x109741(0x261)](_0x5730cd / 0x3c) + _0x109741(0x759); else return new _0x2333c6(_0x96d0d8 => { const _0x36d659 = _0x109741, _0x4e76a6 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x57a1c1[_0x36d659(0xb2c)]['insertAdjacentHTML']('beforeend', _0x4e76a6); const _0x4e3560 = _0x319dd6['getElementById'](_0x36d659(0x4db)), _0x32bed9 = _0x3a773f[_0x36d659(0x374)](_0x36d659(0xa1c)), _0x52c2ad = _0x448b81[_0x36d659(0x374)](_0x36d659(0x4a3)), _0x1fd418 = _0x3b6e80[_0x36d659(0x374)](_0x36d659(0x644)), _0x32cc99 = _0x4e3560[_0x36d659(0x179)](_0x36d659(0x4b3)), _0x426cb8 = () => { const _0x15a6c9 = _0x36d659; _0x4e3560[_0x15a6c9(0x31f)](), _0x96d0d8(); }; _0x52c2ad[_0x36d659(0x509)] = () => { const _0x5e0f27 = _0x36d659; _0x320146(_0x32bed9[_0x5e0f27(0x330)]), _0x426cb8(); }, _0x1fd418[_0x36d659(0x509)] = _0x426cb8, _0x32cc99[_0x36d659(0x509)] = _0x426cb8; }); } } else { if (_0x55fef7 === _0x554c63) _0x2b7ed5 += _0x109741(0x1e7); else { const _0x4cc569 = Math['round']((_0x5a9414 - _0x2c54d8) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2b7ed5 += '-\x20**状态提示**:\x20你已经有\x20' + _0x4cc569 + _0x109741(0x15f); } } } else _0x109741(0x98d) === _0x109741(0x98d) ? _0x2b7ed5 += _0x109741(0x281) : _0x3cfe56 += _0x3d5937['parse'](_0x4fef37)[_0x109741(0x7fc)][0x0][_0x109741(0x47e)][_0x109741(0x1f1)][0x0][_0x109741(0x3c5)]; let _0x4e640c = '', _0x475645 = ''; _0x45bd7f ? (_0x4e640c = _0x109741(0x1d8), _0x475645 = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```json\x0a' + _0x45bd7f + _0x109741(0xb0f)) : 'lbevO' !== 'lbevO' ? (_0x4e4cb5(), _0xde08d2(_0x109741(0x928), _0x109741(0xb5d))) : _0x4e640c = '你的任务是【首次生成】这个应用的内容。'; const _0x87d60c = { 'gallery': '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'whispers': _0x109741(0x51c), 'abyss': _0x109741(0x39f), 'fragments': _0x109741(0x274), 'bites': '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'wants': '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'footprints': _0x109741(0x202) }, _0x14cf55 = _0x87d60c[_0x42c58d] || '#\x20任务:\x20生成\x20' + _0x42c58d + '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。'; let _0x317279 = ''; if (_0x19cf49[_0x109741(0x128)] && _0x19cf49[_0x109741(0x128)][_0x109741(0x2ed)] > 0x0) { const _0x172472 = _0x19cf49[_0x109741(0x128)]['map'](_0x4630a7 => _0x5f49a9[_0x109741(0x1df)][_0x109741(0x7ed)](_0x7a83b7 => _0x7a83b7['id'] === _0x4630a7))['filter'](Boolean)[_0x109741(0x190)](_0xc76ea4 => '\x0a##\x20世界书条目:\x20' + _0xc76ea4[_0x109741(0x7d9)] + '\x0a' + _0xc76ea4[_0x109741(0x47e)])[_0x109741(0x414)](''); _0x172472 && (_0x317279 = _0x109741(0x26b) + _0x172472); } const _0x391c7b = '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“' + _0x19cf49['name'] + _0x109741(0xa29) + _0x19cf49[_0x109741(0x7d9)] + _0x109741(0x52b) + _0x284afc[_0x109741(0x7d9)] + '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20' + _0x2ac01f + _0x109741(0x4a6) + _0x5a9414[_0x109741(0x591)](_0x109741(0x983), { 'dateStyle': _0x109741(0x5d7), 'timeStyle': _0x109741(0x54d) }) + _0x109741(0x2ad) + _0x19cf49[_0x109741(0x7d9)] + _0x109741(0x73b) + _0x19cf49['persona'] + '\x0a' + _0x317279 + _0x109741(0x3f4) + _0x284afc[_0x109741(0x7d9)] + '\x0a-\x20人设:\x20' + _0x284afc[_0x109741(0x8eb)] + _0x109741(0x5c5) + _0xe57c9f + '\x0a' + _0x475645 + _0x109741(0x559) + _0x4e640c + '\x0a' + _0x14cf55 + _0x109741(0x8e4), _0x9f42f4 = [{ 'role': 'system', 'content': _0x391c7b }], _0x7d75ce = await _0x4d0897(_0x9f42f4, { 'json': !![] }); return _0x7d75ce; } } async function _0x16e028(_0x3ac4f4) { const _0x42a425 = _0x4d95ce; if (_0x42a425(0x718) !== 'ZkuTI') { const _0x3b2aec = _0x590c99(_0x3ac4f4); if (!_0x3b2aec) throw new Error(_0x42a425(0xa59)); _0x5a1a9e(!![], _0x42a425(0x124)); const _0x2c3833 = [_0x42a425(0x3cb), _0x42a425(0x49b), _0x42a425(0xa62), _0x42a425(0x2db), 'bites', 'wants', _0x42a425(0x588)]; let _0x16978b = {}; await Promise[_0x42a425(0x377)](_0x2c3833[_0x42a425(0x190)](async _0x435c41 => { const _0x11a1d3 = _0x42a425; if (_0x11a1d3(0x3bf) === 'IGJjf') { const _0x47ef6d = _0x11a1d3(0xb03) + _0x3ac4f4 + '_' + _0x435c41, _0x38027c = await _0xfb4785(_0x47ef6d); if (_0x38027c) try { 'SIUxf' === _0x11a1d3(0x1b8) ? _0x16978b[_0x435c41] = JSON[_0x11a1d3(0x468)](_0x38027c) : (_0x485d66[_0x11a1d3(0x7a4)](_0x11a1d3(0x18b), _0x207ed2), _0x268397[_0x11a1d3(0x183)] = _0x11a1d3(0x523)); } catch (_0x488d91) { } } else _0x55dd3a[_0x11a1d3(0x279)] = _0x11a1d3(0xa14), _0x5e735c['getElementById'](_0x11a1d3(0xad2))['addEventListener'](_0x11a1d3(0x173), _0x52dd41); })); if (Object['keys'](_0x16978b)[_0x42a425(0x2ed)] === 0x0) return _0x42a425(0x5c2); const _0x325633 = _0x42a425(0x67e) + _0x3b2aec[_0x42a425(0x7d9)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x3bce14 = [{ 'role': 'system', 'content': _0x325633 }, { 'role': _0x42a425(0x384), 'content': JSON[_0x42a425(0x795)](_0x16978b, null, 0x2) }]; _0x5a1a9e(!![], _0x42a425(0x56e)); const _0x2f3939 = await _0x4d0897(_0x3bce14); return _0x2f3939 || 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。'; } else { const _0x35fb7a = _0x3d1502['querySelectorAll']('p'); _0x35fb7a['forEach'](_0x2f5b4a => _0x2f5b4a[_0x42a425(0x8f0)][_0x42a425(0x31f)](_0x42a425(0xa54))); const _0x2ad098 = _0xe66bd9[_0x42a425(0x374)]('lyric-line-' + _0x534f1b); _0x2ad098 && (_0x2ad098[_0x42a425(0x8f0)][_0x42a425(0x132)]('active'), _0x2ad098[_0x42a425(0x948)]({ 'behavior': _0x42a425(0x163), 'block': _0x42a425(0x634) })); } } async function _0x16e028(_0x442834) { const _0xa7846b = _0x4d95ce, _0x2131cc = _0x590c99(_0x442834); if (!_0x2131cc) throw new Error(_0xa7846b(0xa59)); try { _0x5a1a9e(!![], _0xa7846b(0x124)); const _0x22ec9c = ['gallery', _0xa7846b(0x49b), 'abyss', 'fragments', 'bites', _0xa7846b(0x278), 'footprints']; let _0x2eb550 = {}; await Promise[_0xa7846b(0x377)](_0x22ec9c['map'](async _0x202e90 => { const _0x2a12fa = _0xa7846b; if (_0x2a12fa(0x35e) === _0x2a12fa(0x35e)) { const _0x24b52f = _0x2a12fa(0xb03) + _0x442834 + '_' + _0x202e90, _0x6a4975 = await _0xfb4785(_0x24b52f); if (_0x6a4975) { if ('zFjYW' !== 'zFjYW') _0x30bbc0['push']('[' + _0x51b826(_0x31e8fc) + _0x2a12fa(0x176) + (_0xb9c74c['content']?.[_0x2a12fa(0xa55)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else try { _0x2a12fa(0x2bc) !== _0x2a12fa(0x2bc) ? _0x4e87fc() : _0x2eb550[_0x202e90] = JSON[_0x2a12fa(0x468)](_0x6a4975); } catch (_0x598336) { } } } else _0x9a608f[_0x2a12fa(0x7a4)]('Failed\x20to\x20plan\x20group\x20replies:', _0x4edd80); })); if (Object[_0xa7846b(0x9ec)](_0x2eb550)[_0xa7846b(0x2ed)] === 0x0) return _0xa7846b(0x5c2); const _0x597734 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x2131cc[_0xa7846b(0x7d9)] + _0xa7846b(0x707), _0x17c999 = [{ 'role': _0xa7846b(0x1ce), 'content': _0x597734 }, { 'role': 'user', 'content': JSON[_0xa7846b(0x795)](_0x2eb550, null, 0x2) }]; _0x5a1a9e(!![], '书记官正在奋笔疾书...'); const _0x5be94f = await _0x4d0897(_0x17c999); return _0x5be94f || _0xa7846b(0x613); } finally { _0x5a1a9e(![]); } } document[_0x4d95ce(0x374)]('back-to-home-from-snoop-list')[_0x4d95ce(0x458)]('click', () => _0x53a558(_0x4d95ce(0x529), _0x4d95ce(0x7f2))), document[_0x4d95ce(0x374)](_0x4d95ce(0x6de))[_0x4d95ce(0x458)](_0x4d95ce(0x173), () => { const _0x438ab7 = _0x4d95ce; document[_0x438ab7(0x374)](_0x438ab7(0xac5))[_0x438ab7(0x2d6)][_0x438ab7(0x416)] = _0x438ab7(0x8b4), _0x53a558(_0x438ab7(0x7f2), _0x438ab7(0x6df)); }), _0x5ec59a(); }); async function _0x435fa1() { const _0x2ad924 = _0x481b43; console[_0x2ad924(0x6e2)]('---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---'), console[_0x2ad924(0x6e2)](_0x2ad924(0x35c)); async function _0x4bb41a(_0x325eea, _0x3238e3) { const _0x558245 = _0x2ad924; if ('FHDUC' === _0x558245(0x5a9)) { const _0x233474 = await _0x1b5ec1; return new Promise((_0x57aa93, _0x418fd1) => { const _0x38b9a5 = _0x558245, _0x33c71c = _0x233474[_0x38b9a5(0xa28)](_0x4b1f4a, 'readwrite'), _0x346a7f = _0x33c71c[_0x38b9a5(0x7f3)](_0x4b1f4a), _0x3c40eb = _0x346a7f['put']({ 'id': _0x325eea, 'blob': _0x3238e3 }); _0x3c40eb[_0x38b9a5(0x731)] = () => _0x57aa93(_0x3c40eb[_0x38b9a5(0x78a)]), _0x3c40eb[_0x38b9a5(0x33c)] = () => _0x418fd1(_0x3c40eb['error']); }); } else { _0xb1da2(_0x558245(0x2f2)); return; } } async function _0x4387e5(_0x559dc9) { const _0x3199c5 = _0x2ad924; if (_0x3199c5(0xad8) !== _0x3199c5(0x7e5)) { const _0x1334cc = await _0x1b5ec1; return new Promise((_0x1b9efc, _0x319b84) => { const _0x5cf549 = _0x3199c5, _0x45a6ae = _0x1334cc[_0x5cf549(0xa28)](_0x1988c4, 'readonly'), _0x17f0b5 = _0x45a6ae[_0x5cf549(0x7f3)](_0x1988c4), _0x1ed099 = _0x17f0b5[_0x5cf549(0xb3d)](_0x559dc9); _0x1ed099[_0x5cf549(0x731)] = () => _0x1b9efc(_0x1ed099[_0x5cf549(0x78a)] ? _0x1ed099['result']['data'] : null), _0x1ed099[_0x5cf549(0x33c)] = () => _0x319b84(_0x1ed099[_0x5cf549(0x7a4)]); }); } else _0x3a86e8(), _0x1954e2(_0x3199c5(0x12b), _0x3199c5(0xb60)); } async function _0x252a77(_0x5406ca, _0x217701) { const _0x446eaf = await _0x1b5ec1; return new Promise((_0x4ed3ae, _0x3db5dc) => { const _0x45b87e = _0xe792, _0x4fe661 = _0x446eaf[_0x45b87e(0xa28)](_0x1988c4, _0x45b87e(0x4bc)), _0x91061c = _0x4fe661[_0x45b87e(0x7f3)](_0x1988c4), _0x348ee2 = _0x91061c[_0x45b87e(0x52a)]({ 'id': _0x5406ca, 'data': _0x217701 }); _0x348ee2[_0x45b87e(0x731)] = () => _0x4ed3ae(), _0x348ee2['onerror'] = () => _0x3db5dc(_0x348ee2[_0x45b87e(0x7a4)]); }); } function _0x31a93f(_0x82a2e1) { const _0x6c658d = _0x2ad924; if ('ARvKB' !== _0x6c658d(0x2f4)) _0x1726d2('保存失败，你的表情包是不是太多了？'); else return fetch(_0x82a2e1)['then'](_0x1fd7c0 => _0x1fd7c0[_0x6c658d(0xb57)]()); } let _0x1d157d = 0x0; for (let _0x3d9c7f = 0x0; _0x3d9c7f < localStorage[_0x2ad924(0x2ed)]; _0x3d9c7f++) { const _0x2c3395 = localStorage['key'](_0x3d9c7f); if (_0x2c3395 && _0x2c3395['startsWith'](_0x2ad924(0x39b))) { if (_0x2ad924(0x440) === _0x2ad924(0x440)) { let _0x231d67, _0x57df57 = ![]; try { if (_0x2ad924(0x910) !== _0x2ad924(0x6fe)) { _0x231d67 = JSON['parse'](localStorage[_0x2ad924(0x6ba)](_0x2c3395)); if (!Array['isArray'](_0x231d67)) continue; for (const _0x3cc4ed of _0x231d67) { if (_0x3cc4ed && _0x3cc4ed[_0x2ad924(0xad0)] && _0x3cc4ed[_0x2ad924(0xad0)][_0x2ad924(0x93c)](_0x2ad924(0x940))) { if ('xeRXu' !== 'hcbmB') { const _0x3ef123 = await _0x31a93f(_0x3cc4ed[_0x2ad924(0xad0)]), _0x1f5f0d = _0x2ad924(0x247) + Date[_0x2ad924(0x780)]() + '_' + Math[_0x2ad924(0x512)](); await _0x4bb41a(_0x1f5f0d, _0x3ef123), _0x3cc4ed[_0x2ad924(0x3a7)] = _0x1f5f0d, delete _0x3cc4ed['image'], _0x57df57 = !![], _0x1d157d++; } else _0x4e1a64(_0x1384e7['id']), _0x311601(_0x2ad924(0x16b)), _0x261f8f(_0x2ad924(0x134)), _0x25a99a(![]); } } if (_0x57df57) { if (_0x2ad924(0x2e2) === _0x2ad924(0x2c6)) { const _0x5d3978 = _0x5c2cbf['value']['trim'](); if (!_0x5d3978) { _0x1dbe76(_0x2ad924(0x35a)); return; } const _0x1fee17 = _0x4aaab8['from'](_0x35fdb8[_0x2ad924(0x410)]('input[type=\x22checkbox\x22]:checked'))['map'](_0x3aabbe => _0x3aabbe[_0x2ad924(0x814)]['id']); if (_0x1fee17[_0x2ad924(0x2ed)] < 0x2) { _0x701c26('群聊至少需要2名成员。'); return; } const _0x467ea3 = { 'id': _0x2ad924(0x9d5) + _0x18c43a[_0x2ad924(0x780)](), 'type': _0x2ad924(0x24e), 'name': _0x5d3978, 'participantIds': _0x1fee17 }; _0x5a84ba[_0x2ad924(0x42d)][_0x2ad924(0x238)](_0x467ea3), _0x39992b['activeChatId'] = _0x467ea3['id'], _0x2b985d(), _0x1bd561(), _0x3cf7ae(), _0x120bd1(), _0x5709ac(_0x2ad924(0x6d5) + _0x5d3978 + _0x2ad924(0x90d)), _0x26df16(_0x2ad924(0x134), _0x2ad924(0xaf0)); } else localStorage['setItem'](_0x2c3395, JSON[_0x2ad924(0x795)](_0x231d67)); } } else { let _0x2480fb = _0x4afed4['worldBooks'][_0x2ad924(0x7ed)](_0x5d9915 => _0x5d9915[_0x2ad924(0x7d9)] === _0x49caf2[_0x2ad924(0x7d9)]); if (_0x2480fb) _0x1b04ab['push'](_0x2480fb['id']); else { const _0x4aa244 = { 'id': _0x2ad924(0x2df) + _0x401e59[_0x2ad924(0x780)]() + '_' + _0x483e8c[_0x2ad924(0x512)](), 'name': _0x2974e2[_0x2ad924(0x7d9)], 'content': _0x1457ae[_0x2ad924(0x47e)] }; _0x398fae[_0x2ad924(0x1df)][_0x2ad924(0x238)](_0x4aa244), _0x3eaf40[_0x2ad924(0x238)](_0x4aa244['id']); } } } catch (_0x6aaf90) { console[_0x2ad924(0x7a4)](_0x2ad924(0x1ed) + _0x2c3395 + _0x2ad924(0x54a), _0x6aaf90); continue; } } else { _0x2140eb['innerHTML'] = _0x2ad924(0x3ab), _0x269431[_0x2ad924(0x279)] = _0x2ad924(0x9d9), _0x517c08['getElementById'](_0x2ad924(0x197))[_0x2ad924(0x458)](_0x2ad924(0x173), _0x2ff241), _0xc24a3e[_0x2ad924(0x374)](_0x2ad924(0x9ee))['addEventListener'](_0x2ad924(0x173), _0x432a3d); return; } } } console[_0x2ad924(0x6e2)]('净化完成！总共迁移了\x20' + _0x1d157d + '\x20张旧图片。'); } async function _0x45fc3b() { const _0x3beb9b = _0x481b43; console['log']('---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---'), console[_0x3beb9b(0x6e2)](_0x3beb9b(0x7da)); async function _0x16d69f(_0x43dfb6, _0x602e31) { const _0x383895 = _0x3beb9b; if (_0x383895(0x936) === _0x383895(0x936)) { const _0x152372 = await _0x1b5ec1; return new Promise((_0x1a534, _0x2b5506) => { const _0x147bf4 = _0x383895; if (_0x147bf4(0x195) === 'IZNyW') { const _0x4980c9 = _0xcca6f7[_0x4c0aa7[_0x147bf4(0x2ed)] - 0x1]; (!_0x26f679 || _0x4980c9[_0x147bf4(0x75a)] > _0x2c0cf3[_0x147bf4(0x75a)]) && (_0x473611 = _0x4980c9); } else { const _0x2cca93 = _0x152372[_0x147bf4(0xa28)](_0x147bf4(0xa9d), _0x147bf4(0x4bc)), _0x33dae1 = _0x2cca93[_0x147bf4(0x7f3)]('images'), _0x57f9db = _0x33dae1['put']({ 'id': _0x43dfb6, 'blob': _0x602e31 }); _0x57f9db[_0x147bf4(0x731)] = () => _0x1a534(_0x57f9db[_0x147bf4(0x78a)]), _0x57f9db[_0x147bf4(0x33c)] = () => _0x2b5506(_0x57f9db[_0x147bf4(0x7a4)]); } }); } else { if (_0x3e0cb1['diaryPressTimer']) _0x1f1289(_0x35b1bc[_0x383895(0x3f5)]); } } function _0x37a78d(_0xd3eb9e) { const _0x23966c = _0x3beb9b; return fetch(_0xd3eb9e)[_0x23966c(0x8a2)](_0x57d6d8 => _0x57d6d8[_0x23966c(0xb57)]()); } let _0x1f39e1 = 0x0, _0x2a5a8b = ![]; try { if (_0x3beb9b(0x7be) === _0x3beb9b(0x7be)) { const _0x237013 = localStorage[_0x3beb9b(0x6ba)](_0x3beb9b(0x4cd)); if (!_0x237013) { if (_0x3beb9b(0x8fc) === _0x3beb9b(0x220)) _0x51b051[_0x3beb9b(0xa50)] = new _0x140195(), _0x1da99c['selectedDate'] = new _0x4bab42()['toISOString']()[_0x3beb9b(0x77e)]('T')[0x0], _0x11e8d2(); else { console['log']('好友圈档案柜是空的，无需净化。'); return; } } const _0x1b87f3 = JSON['parse'](_0x237013); if (!_0x1b87f3[_0x3beb9b(0x535)] || !Array['isArray'](_0x1b87f3[_0x3beb9b(0x535)])) return; for (const _0x8c3a23 of _0x1b87f3[_0x3beb9b(0x535)]) { if (_0x3beb9b(0x2fa) === 'SKIgF') { if (_0x8c3a23[_0x3beb9b(0x251)] && Array[_0x3beb9b(0x552)](_0x8c3a23[_0x3beb9b(0x251)])) for (const _0x34db0b of _0x8c3a23[_0x3beb9b(0x251)]) { if (_0x34db0b && _0x34db0b[_0x3beb9b(0xad0)] && _0x34db0b[_0x3beb9b(0xad0)][_0x3beb9b(0x93c)](_0x3beb9b(0x940))) { console['log'](_0x3beb9b(0x8e9) + _0x8c3a23[_0x3beb9b(0x7d9)] + _0x3beb9b(0x215)); const _0x4a8f6d = await _0x37a78d(_0x34db0b[_0x3beb9b(0xad0)]), _0x2f4463 = _0x3beb9b(0x4fd) + Date[_0x3beb9b(0x780)]() + '_' + Math[_0x3beb9b(0x512)](); await _0x16d69f(_0x2f4463, _0x4a8f6d), _0x34db0b[_0x3beb9b(0x3a7)] = _0x2f4463, delete _0x34db0b[_0x3beb9b(0xad0)], _0x2a5a8b = !![], _0x1f39e1++; } } } else return; } _0x2a5a8b && (console[_0x3beb9b(0x6e2)](_0x3beb9b(0x29d)), localStorage[_0x3beb9b(0x421)](_0x3beb9b(0x4cd), JSON[_0x3beb9b(0x795)](_0x1b87f3))); } else _0x313998[_0x3beb9b(0x962)](_0xe5656d); } catch (_0x3c31bd) { console[_0x3beb9b(0x7a4)](_0x3beb9b(0x895), _0x3c31bd); } return console['log'](_0x3beb9b(0x997)), console[_0x3beb9b(0x6e2)](_0x3beb9b(0x84c) + _0x1f39e1 + _0x3beb9b(0x8ea)), _0x1f39e1; } async function _0x11dda8() { const _0x3d73e2 = _0x481b43; console[_0x3d73e2(0x6e2)]('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'), console[_0x3d73e2(0x6e2)](_0x3d73e2(0x74d)); let _0x1f1ee3 = 0x0, _0xc3c9e = ![]; try { const _0x1903d3 = localStorage[_0x3d73e2(0x6ba)](_0x3d73e2(0x4cd)); if (!_0x1903d3) return console[_0x3d73e2(0x6e2)]('聊天档案柜是空的，无需净化。'), 0x0; for (let _0x250acb = 0x0; _0x250acb < localStorage[_0x3d73e2(0x2ed)]; _0x250acb++) { const _0x39ca4a = localStorage[_0x3d73e2(0x911)](_0x250acb); if (_0x39ca4a && _0x39ca4a['startsWith']('chatHistory_')) { let _0x5e1ab6, _0xa00154 = ![]; try { _0x5e1ab6 = JSON[_0x3d73e2(0x468)](localStorage[_0x3d73e2(0x6ba)](_0x39ca4a)); if (!Array['isArray'](_0x5e1ab6)) continue; for (const _0x7e3acb of _0x5e1ab6) { if (_0x3d73e2(0xac3) !== 'psXGc') _0x24b2b8('whispers', '聊天'); else { if (_0x7e3acb && (_0x7e3acb[_0x3d73e2(0x433)] === 'music' || _0x7e3acb[_0x3d73e2(0x433)] === _0x3d73e2(0x2c1)) && _0x7e3acb[_0x3d73e2(0x461)] && _0x7e3acb[_0x3d73e2(0x461)][_0x3d73e2(0x93c)](_0x3d73e2(0x940))) { if (_0x3d73e2(0x298) !== _0x3d73e2(0x298)) _0x5a5474(), _0x247ff5(_0x3d73e2(0x526)); else { const _0x12639b = await _0x34bb22(_0x7e3acb[_0x3d73e2(0x461)]), _0x12e860 = _0x3d73e2(0x649) + Date[_0x3d73e2(0x780)]() + '_' + Math[_0x3d73e2(0x512)](); await _0x5a0c6c(_0x12e860, _0x12639b), _0x7e3acb[_0x3d73e2(0xa01)] = _0x12e860, delete _0x7e3acb[_0x3d73e2(0x461)], _0xa00154 = !![], _0x1f1ee3++; } } } } if (_0xa00154) { if ('CEYXJ' !== _0x3d73e2(0x50b)) { const _0x3dddde = _0x4af0b5(_0x1e27e7), _0x485f8b = _0x5ef21a[_0x3d73e2(0x374)](_0x3d73e2(0x9bf)); _0x485f8b[_0x3d73e2(0x2d6)]['backgroundImage'] = ''; let _0x5e4737 = _0x5e6e3b[_0x3d73e2(0x374)](_0x3d73e2(0x90a) + _0x16a87c); if (_0x5e4737) _0x5e4737[_0x3d73e2(0x279)] = ''; if (!_0x3dddde) return; _0x3dddde[_0x3d73e2(0x2bf)] && (_0x485f8b[_0x3d73e2(0x2d6)][_0x3d73e2(0x486)] = _0x3d73e2(0x730) + _0x3dddde[_0x3d73e2(0x2bf)] + '\x27)', _0x485f8b['style'][_0x3d73e2(0x59a)] = _0x3d73e2(0x6ac), _0x485f8b[_0x3d73e2(0x2d6)][_0x3d73e2(0xa2e)] = _0x3d73e2(0x634)); if (_0x3dddde[_0x3d73e2(0x495)]) { let _0x477c8f = _0x8e7d53[_0x3d73e2(0x374)](_0x3d73e2(0x90a) + _0x3dddde['id']); !_0x477c8f && (_0x477c8f = _0x2cc805[_0x3d73e2(0x95f)]('style'), _0x477c8f['id'] = _0x3d73e2(0x90a) + _0x3dddde['id'], _0x7bccd0[_0x3d73e2(0x665)][_0x3d73e2(0x962)](_0x477c8f)); const _0x245e99 = _0x3dddde[_0x3d73e2(0x495)], _0x31861e = _0x245e99[_0x3d73e2(0xa38)](/\.bubble\.sent/g, _0x3d73e2(0x30c) + _0x3dddde['id'] + _0x3d73e2(0x57c))[_0x3d73e2(0xa38)](/\.bubble\.received/g, _0x3d73e2(0x30c) + _0x3dddde['id'] + _0x3d73e2(0x557)); _0x477c8f['innerHTML'] = _0x31861e; } } else localStorage['setItem'](_0x39ca4a, JSON[_0x3d73e2(0x795)](_0x5e1ab6)); } } catch (_0x166a76) { console[_0x3d73e2(0x7a4)](_0x3d73e2(0x1ed) + _0x39ca4a + _0x3d73e2(0xb4c), _0x166a76); continue; } } } } catch (_0x2290a3) { _0x3d73e2(0xa36) !== 'ljwiA' ? console[_0x3d73e2(0x7a4)](_0x3d73e2(0x636), _0x2290a3) : _0x4d53b2[_0x3d73e2(0x2d6)][_0x3274f8] = _0x53daed[_0x19488e]; } return console[_0x3d73e2(0x6e2)](_0x3d73e2(0xabb)), console[_0x3d73e2(0x6e2)]('成功净化并迁移了\x20' + _0x1f1ee3 + _0x3d73e2(0x36d)), _0x1f1ee3; } function _0x30663a() { const _0x2d504c = _0x481b43; if (!_0x5f49a9[_0x2d504c(0x9ab)]) { if (_0x2d504c(0x542) === _0x2d504c(0x804)) _0x2734db['innerHTML'] = _0x2d504c(0xb01) + _0x501029 + _0x2d504c(0x7a6); else return _0x5f49a9[_0x2d504c(0x4d5)]['find'](_0x3afaaa => _0x3afaaa['id'] === _0x5f49a9[_0x2d504c(0x4f6)]) || _0x5f49a9[_0x2d504c(0x4d5)][0x0]; } const _0x22ba75 = _0x5f49a9[_0x2d504c(0x42d)][_0x2d504c(0x7ed)](_0x51249f => _0x51249f[_0x2d504c(0x433)] === _0x2d504c(0x838) && _0x51249f['participantIds'][_0x2d504c(0x454)](_0x5f49a9['activeDiaryCharacterId'])), _0x50dd8e = _0x22ba75?.[_0x2d504c(0x3fc)] || _0x5f49a9[_0x2d504c(0x4f6)]; return _0x5f49a9[_0x2d504c(0x4d5)][_0x2d504c(0x7ed)](_0x3dcfb7 => _0x3dcfb7['id'] === _0x50dd8e) || _0x5f49a9[_0x2d504c(0x4d5)][0x0]; } function _0x34dad7(_0x2ad2c2) { const _0x3af280 = _0x481b43, _0x30065d = new Date(), _0x25d58b = _0x30065d - _0x2ad2c2, _0x8e5cf1 = Math['round'](_0x25d58b / 0x3e8), _0x405689 = Math[_0x3af280(0x261)](_0x8e5cf1 / 0x3c), _0x5f1aa2 = Math[_0x3af280(0x261)](_0x405689 / 0x3c), _0x1303fa = Math['round'](_0x5f1aa2 / 0x18), _0x269907 = _0x2ad2c2['toLocaleTimeString'](_0x3af280(0x983), { 'hour': _0x3af280(0x75b), 'minute': _0x3af280(0x75b) }); if (_0x8e5cf1 < 0x3c) return '刚才'; if (_0x405689 < 0x3c) return _0x405689 + '分钟前'; const _0x6d722a = _0x30065d[_0x3af280(0x4b4)]() === _0x2ad2c2[_0x3af280(0x4b4)](); if (_0x6d722a) { if (_0x3af280(0x4bf) === _0x3af280(0x4bf)) return _0x3af280(0x34a) + _0x269907; else { const _0x5634ef = _0x394ae3[_0x3af280(0xa28)](_0x32581a, _0x3af280(0x9a1)), _0x3dc11f = _0x5634ef[_0x3af280(0x7f3)](_0x490de3), _0x1c9b03 = _0x3dc11f[_0x3af280(0x2d0)](); _0x1c9b03[_0x3af280(0x731)] = () => _0x317084(_0x1c9b03[_0x3af280(0x78a)]), _0x1c9b03[_0x3af280(0x33c)] = () => _0x4d60ec(_0x1c9b03[_0x3af280(0x7a4)]); } } const _0x409599 = new Date(); _0x409599[_0x3af280(0x162)](_0x30065d[_0x3af280(0x465)]() - 0x1); const _0x393c99 = _0x409599[_0x3af280(0x4b4)]() === _0x2ad2c2[_0x3af280(0x4b4)](); if (_0x393c99) return '昨天\x20' + _0x269907; if (_0x1303fa <= 0x7) { if (_0x3af280(0x5e4) !== _0x3af280(0x5e4)) _0x2c2ccd['musicPlaylist'] = _0x1ac4f5, _0x44af61[_0x3af280(0xb48)] = _0x1fc406, _0x4d537e[_0x3af280(0x48d)] = ![], _0x552744(); else { const _0x4a79e6 = ['星期日', _0x3af280(0xa03), _0x3af280(0xabe), '星期三', _0x3af280(0x345), _0x3af280(0x3f8), _0x3af280(0x1e8)]; return _0x4a79e6[_0x2ad2c2[_0x3af280(0x76e)]()] + '\x20' + _0x269907; } } return _0x2ad2c2[_0x3af280(0x192)]() + '年' + (_0x2ad2c2[_0x3af280(0xa47)]() + 0x1) + '月' + _0x2ad2c2[_0x3af280(0x465)]() + '日'; } function _0x779604(_0x40b2db, _0x1f0950 = 0x320, _0x3bb8a8 = 0.8, _0x30a653 = ![]) { return new Promise((_0x367a5a, _0x5c10fa) => { const _0x111299 = _0xe792; if (!_0x40b2db || !_0x40b2db[_0x111299(0x433)][_0x111299(0x93c)](_0x111299(0xb13))) { if ('DMdQF' !== _0x111299(0x494)) { const _0x30b482 = _0x34e60d(_0x475b54[_0x111299(0x79e)]) || { 'name': '未知' }; let _0xc0f8f5 = _0x111299(0x739) + _0x30b482[_0x111299(0x7d9)] + _0x111299(0x933) + (_0x213de0['thought'] || _0x4e5795[_0x111299(0x47e)]) + '”'; return _0x1aa6e9[_0x111299(0x433)] === _0x111299(0xb60) && (_0xc0f8f5 += _0x111299(0x2bd) + _0x190164[_0x111299(0x76d)] + _0x111299(0xa43) + _0x52ae95['artist'] + ')'), _0xc0f8f5; } else return _0x5c10fa(new Error(_0x111299(0x332))); } const _0x1231e1 = new FileReader(); _0x1231e1[_0x111299(0x352)](_0x40b2db), _0x1231e1['onload'] = _0x26f732 => { const _0xcec55c = _0x111299, _0x1b32f3 = new Image(); _0x1b32f3[_0xcec55c(0x984)] = _0x26f732[_0xcec55c(0x89a)][_0xcec55c(0x78a)], _0x1b32f3[_0xcec55c(0xaa0)] = () => { const _0x58af3b = _0xcec55c, _0x42c0de = document[_0x58af3b(0x95f)]('canvas'); let _0x474437 = _0x1b32f3['width'], _0x56a0a5 = _0x1b32f3[_0x58af3b(0x5f7)]; if (_0x474437 > _0x56a0a5) { if (_0x58af3b(0x13b) === _0x58af3b(0x13b)) { if (_0x474437 > _0x1f0950) { if ('IokPy' === 'IokPy') _0x56a0a5 *= _0x1f0950 / _0x474437, _0x474437 = _0x1f0950; else { const _0x39e5f5 = _0x4ebbd1[_0x58af3b(0x95f)](_0x58af3b(0x754)); _0x39e5f5[_0x58af3b(0x290)] = _0x58af3b(0x959), _0x1fa070[_0x58af3b(0x962)](_0x39e5f5); } } } else _0x3fcf95 = { 'speaker': _0x8e57cd[_0x58af3b(0x7d9)], 'line': _0x3462dc[_0x58af3b(0x47e)], 'emotion': _0x58af3b(0x48b) }; } else 'GarZd' !== _0x58af3b(0x475) ? _0x56a0a5 > _0x1f0950 && ('BCzGR' !== _0x58af3b(0xa60) ? (_0x474437 *= _0x1f0950 / _0x56a0a5, _0x56a0a5 = _0x1f0950) : _0x348c19[_0x58af3b(0x421)](_0x58af3b(0x39b) + _0x562af3[_0x58af3b(0x824)], _0x2ec6cd[_0x58af3b(0x795)](_0x485e5b[_0x58af3b(0xb06)]))) : _0x2f2580['revokeObjectURL'](_0x4adbab); _0x42c0de[_0x58af3b(0x6c8)] = _0x474437, _0x42c0de[_0x58af3b(0x5f7)] = _0x56a0a5; const _0x4cf978 = _0x42c0de[_0x58af3b(0x61d)]('2d'); _0x4cf978[_0x58af3b(0x47d)](_0x1b32f3, 0x0, 0x0, _0x474437, _0x56a0a5); const _0x147213 = _0x40b2db[_0x58af3b(0x433)] === _0x58af3b(0x28d) ? _0x58af3b(0x28d) : 'image/jpeg'; _0x30a653 ? _0x58af3b(0x704) === _0x58af3b(0x4e5) ? _0x600c8d() : _0x42c0de[_0x58af3b(0x502)](_0x3115c8 => { const _0x46754d = _0x58af3b; _0x3115c8 ? _0x367a5a(_0x3115c8) : _0x5c10fa(new Error(_0x46754d(0x54f))); }, _0x147213, _0x3bb8a8) : _0x367a5a(_0x42c0de[_0x58af3b(0x361)](_0x147213, _0x3bb8a8)); }, _0x1b32f3[_0xcec55c(0x33c)] = _0x1d4c4e => _0x5c10fa(_0x1d4c4e); }, _0x1231e1[_0x111299(0x33c)] = _0x51b23e => _0x5c10fa(_0x51b23e); }); } function _0xa47e47(_0x2a1608) { return new Promise((_0x1a69c5, _0x31bdee) => { const _0x4b5cda = _0xe792; if (_0x4b5cda(0x47c) === _0x4b5cda(0x44a)) _0x418d9d = !![], _0x167b57[_0x4b5cda(0x824)] = null; else { const _0x4a76d9 = new FileReader(); _0x4a76d9[_0x4b5cda(0x566)] = () => _0x1a69c5(_0x4a76d9[_0x4b5cda(0x78a)]), _0x4a76d9['onerror'] = _0x31bdee, _0x4a76d9[_0x4b5cda(0x352)](_0x2a1608); } }); } function _0xa47e47(_0x4921f7) { return new Promise((_0x2de159, _0x519673) => { const _0x130ff3 = _0xe792; if (_0x130ff3(0xadb) !== _0x130ff3(0xadb)) _0xb9bcfc[_0x130ff3(0xb5d)][_0x130ff3(0x7d9)] = _0x54533c[_0x130ff3(0x330)][_0x130ff3(0x1c8)](), _0x18d4eb[_0x130ff3(0xb5d)][_0x130ff3(0x8eb)] = _0x42d8a9['value']['trim'](), _0x35902c(), _0xe143c4(), _0x4b3f27(_0x130ff3(0x4a0)), _0x1b8632('settings', _0x130ff3(0xb5d)); else { const _0x2ad21b = new FileReader(); _0x2ad21b[_0x130ff3(0x566)] = () => _0x2de159(_0x2ad21b[_0x130ff3(0x78a)]), _0x2ad21b[_0x130ff3(0x33c)] = _0x519673, _0x2ad21b[_0x130ff3(0x352)](_0x4921f7); } }); } function _0x620f63(_0x59f3cc, _0x221a5b, _0x3c1a61) { const _0x3aa1e7 = _0x481b43, _0x1cbcf1 = _0x4e4ed7 => { const _0x28af32 = _0xe792; if (_0x4e4ed7[_0x28af32(0x664)] === _0x28af32(0x384)) return _0x5f49a9[_0x28af32(0xb5d)]?.[_0x28af32(0x7d9)] || _0x28af32(0x51d); if (_0x59f3cc['type'] === _0x28af32(0x24e)) { const _0x40b8ad = _0x4e4ed7[_0x28af32(0x699)] ? _0x348d0d(_0x4e4ed7[_0x28af32(0x699)]) : null; return _0x40b8ad?.['name'] || 'Unknown'; } else { const _0x2006c5 = _0x348d0d(_0x59f3cc[_0x28af32(0x258)][0x0]); return _0x2006c5?.[_0x28af32(0x7d9)] || 'AI'; } }, _0x42d732 = _0x221a5b[_0x3aa1e7(0xa24)](-_0x3c1a61), _0x56101e = []; for (const _0x3f9b8f of _0x42d732) { const _0x408cc8 = new Date(_0x3f9b8f['timestamp'])[_0x3aa1e7(0x91f)](_0x3aa1e7(0x983), { 'hour': '2-digit', 'minute': _0x3aa1e7(0x75b) }); _0x3f9b8f['content'] && _0x56101e[_0x3aa1e7(0x238)]('[' + _0x408cc8 + _0x3aa1e7(0x4be) + _0x1cbcf1(_0x3f9b8f) + ']\x20' + String(_0x3f9b8f[_0x3aa1e7(0x47e)])['trim']()); } return _0x56101e; } function _0x4b63a8(_0x3fd270) { const _0x4176f6 = _0x481b43; if (_0x3fd270[_0x4176f6(0x433)] === _0x4176f6(0x24e)) return _0x4176f6(0x9e1) + (_0x3fd270[_0x4176f6(0x7d9)] || _0x4176f6(0x309)) + '」'; const _0x40cb0b = _0x348d0d(_0x3fd270[_0x4176f6(0x258)][0x0]); return '与\x20' + (_0x40cb0b?.[_0x4176f6(0x7d9)] || _0x4176f6(0x968)) + _0x4176f6(0x32a); } function _0x9cd5f3(_0x3e0eca) { const _0x216ca9 = _0x481b43; try { const _0x534c8b = localStorage[_0x216ca9(0x6ba)](_0x216ca9(0x39b) + _0x3e0eca), _0x192231 = JSON['parse'](_0x534c8b || '[]'); return Array[_0x216ca9(0x552)](_0x192231) ? _0x192231 : []; } catch { if ('WOlzt' === _0x216ca9(0x87b)) return []; else _0x1cad5a(_0x3028d0), _0x4f9f83(_0x216ca9(0x4ae) + _0xe4c561[_0x216ca9(0x7d9)] + _0x216ca9(0x235)), _0x556c06('chat', 'characterEdit'), _0x714522(![]); } } function _0x2719e3(_0x3618e0) { const _0x1250d7 = _0x481b43, _0x412e31 = Math[_0x1250d7(0xacd)](0x1, Number(_0x5f49a9[_0x1250d7(0x407)]?.[_0x1250d7(0x5e8)] ?? 0x64)), _0x2764bf = _0x5f49a9['chats'][_0x1250d7(0x8be)](_0x108d03 => _0x108d03[_0x1250d7(0x258)]['includes'](_0x3618e0)), _0x53c110 = _0x2764bf[_0x1250d7(0x190)](_0x1f3a16 => { const _0x385bf3 = _0x1250d7, _0x498d36 = _0x9cd5f3(_0x1f3a16['id']), _0x560f6e = _0x498d36[_0x385bf3(0x2ed)] > 0x0 ? _0x498d36[_0x498d36[_0x385bf3(0x2ed)] - 0x1] : null; return { 'chat': _0x1f3a16, 'history': _0x498d36, 'lastTimestamp': _0x560f6e ? _0x560f6e[_0x385bf3(0x75a)] : 0x0 }; })[_0x1250d7(0x8be)](_0x2cbabd => _0x2cbabd[_0x1250d7(0x1c6)]['length'] > 0x0); _0x53c110[_0x1250d7(0x43a)]((_0xa9f98b, _0x2dbebe) => _0x2dbebe[_0x1250d7(0x709)] - _0xa9f98b[_0x1250d7(0x709)]); const _0x59d9ca = [], _0x36a414 = {}; return _0x53c110[_0x1250d7(0x170)]((_0x205dcf, _0x56d741) => { const _0x36cb94 = _0x1250d7, _0x1d2208 = _0x620f63(_0x205dcf['chat'], _0x205dcf[_0x36cb94(0x1c6)], _0x412e31); if (_0x1d2208[_0x36cb94(0x2ed)] === 0x0) return; const _0x3b4cae = _0x56d741 === 0x0 ? '来源：[最活跃]' : _0x36cb94(0x72a); _0x59d9ca[_0x36cb94(0x238)](_0x36cb94(0x196) + _0x3b4cae + _0x4b63a8(_0x205dcf['chat']) + '\x0a' + _0x1d2208['join']('\x0a')), _0x36a414[_0x205dcf[_0x36cb94(0x134)]['id']] = _0x1d2208[_0x36cb94(0x2ed)]; }), { 'omniText': _0x59d9ca[_0x1250d7(0x414)]('\x0a\x0a'), 'usedCounts': _0x36a414 }; } function _0x97843f(_0x1fecde) { const _0x50c147 = _0x481b43; let _0x21349d = null; const _0x21b010 = _0x5f49a9['chats'][_0x50c147(0x8be)](_0x3cbbcb => _0x3cbbcb[_0x50c147(0x258)]['includes'](_0x1fecde)); for (const _0x178f99 of _0x21b010) { if ('QUhTY' === 'QUhTY') { const _0x347360 = _0x9cd5f3(_0x178f99['id']); if (_0x347360 && _0x347360[_0x50c147(0x2ed)] > 0x0) { const _0x1f7340 = _0x347360[_0x347360['length'] - 0x1]; (!_0x21349d || _0x1f7340['timestamp'] > _0x21349d[_0x50c147(0x75a)]) && (_0x21349d = _0x1f7340); } } else { const _0x45cba5 = _0x1ca93d(); if (_0x45cba5[_0x50c147(0x433)] === _0x50c147(0x24e)) { const _0x5019b6 = _0x4d7040['characters']['find'](_0x4bc02c => _0x45cba5[_0x50c147(0x258)]['includes'](_0x4bc02c['id']) && _0x4bc02c['name'] === _0x452075); if (_0x5019b6) _0x28ea1f = _0x5019b6['id']; } } } return _0x21349d; } function _0x56e5cf(_0x1af507) { const _0x4d348a = _0x481b43; if (!_0x1af507 || !_0x1af507[_0x4d348a(0x454)](',')) return _0x1af507; const _0x1c8d64 = _0x1af507[_0x4d348a(0x77e)](',')[_0x4d348a(0x190)](_0x5ad731 => _0x5ad731['trim']()); return _0x1c8d64[Math[_0x4d348a(0x516)](Math[_0x4d348a(0x512)]() * _0x1c8d64[_0x4d348a(0x2ed)])]; } function _0xd56340(_0x504c8d) { return new Promise(_0x2c8ab7 => { const _0x37595a = _0xe792, _0x518f3a = document[_0x37595a(0x374)](_0x37595a(0x889)), _0x116fca = document['getElementById']('modal-text'), _0x41257a = document[_0x37595a(0x374)](_0x37595a(0x3c9)), _0x528642 = document[_0x37595a(0x374)](_0x37595a(0x3e2)), _0x36c1f7 = document[_0x37595a(0x374)](_0x37595a(0x736)); _0x116fca[_0x37595a(0x8e3)] = _0x504c8d, _0x518f3a[_0x37595a(0x2d6)][_0x37595a(0x416)] = _0x37595a(0x350); const _0x1a43a2 = _0x166b3d => { const _0x3edddd = _0x37595a; _0x518f3a['style']['display'] = _0x3edddd(0x8b4), _0x41257a[_0x3edddd(0x509)] = _0x528642[_0x3edddd(0x509)] = _0x36c1f7[_0x3edddd(0x509)] = null, document[_0x3edddd(0x188)](_0x3edddd(0xb04), _0x3d667c), _0x2c8ab7(_0x166b3d); }, _0x3d667c = _0x3e2864 => { const _0x8900fe = _0x37595a; if (_0x3e2864['key'] === 'Escape') _0x1a43a2(![]); if (_0x3e2864[_0x8900fe(0x911)] === _0x8900fe(0x86f)) _0x1a43a2(!![]); }; _0x41257a['onclick'] = () => _0x1a43a2(!![]), _0x528642['onclick'] = () => _0x1a43a2(![]), _0x36c1f7['onclick'] = () => _0x1a43a2(![]), document[_0x37595a(0x458)](_0x37595a(0xb04), _0x3d667c); }); } function _0xd5e395(_0x370d14) { const _0x23c9a6 = _0x481b43, _0x81939c = document['getElementById'](_0x23c9a6(0x6db)); _0x81939c[_0x23c9a6(0x8e3)] = _0x370d14, _0x81939c[_0x23c9a6(0x2d6)]['display'] = _0x23c9a6(0x888); if (_0xd5e395['_t']) clearTimeout(_0xd5e395['_t']); _0xd5e395['_t'] = setTimeout(() => { const _0x2fe7bf = _0x23c9a6; _0x2fe7bf(0x8dd) !== 'DlHoU' ? _0x7527da = _0x4f68fd : _0x81939c['style'][_0x2fe7bf(0x416)] = _0x2fe7bf(0x8b4); }, 0x640); } function _0x4997ae() { const _0x57e1d9 = _0x481b43, _0x9e9238 = document[_0x57e1d9(0x374)](_0x57e1d9(0x315)), _0x5d4f97 = document[_0x57e1d9(0x374)](_0x57e1d9(0x161)), _0x264a36 = document['querySelectorAll']('.page-dot'), _0x1173c7 = document[_0x57e1d9(0x374)](_0x57e1d9(0x7e6)); let _0x53b9ad = 0x0; _0x5d4f97[_0x57e1d9(0x2d6)][_0x57e1d9(0x6c8)] = '300%'; const _0x1a5ed8 = 0x3; function _0x5727d3(_0x1911f8) { const _0x3a3331 = _0x57e1d9; if (_0x3a3331(0x698) === _0x3a3331(0x698)) { if (_0x1911f8 < 0x0 || _0x1911f8 >= _0x1a5ed8) return; _0x5d4f97[_0x3a3331(0x2d6)][_0x3a3331(0x3a6)] = _0x3a3331(0xa46) + _0x1911f8 * (0x64 / _0x1a5ed8) + '%)', _0x264a36[_0x3a3331(0x170)](_0x1d1a21 => _0x1d1a21[_0x3a3331(0x8f0)][_0x3a3331(0x31f)](_0x3a3331(0xa54))), _0x264a36[_0x1911f8][_0x3a3331(0x8f0)][_0x3a3331(0x132)](_0x3a3331(0xa54)), _0x53b9ad = _0x1911f8, _0x1911f8 === 0x0 ? _0x3a3331(0x8df) !== 'qPHfx' ? _0x15fedb[_0x3a3331(0x7a4)](_0x3a3331(0x875), _0x99532b) : _0x1173c7[_0x3a3331(0x2d6)][_0x3a3331(0x416)] = _0x3a3331(0x8b4) : _0x1173c7[_0x3a3331(0x2d6)][_0x3a3331(0x416)] = _0x3a3331(0x350); } else _0x216087('chat', _0x3a3331(0x82f)); } _0x5727d3(0x0), _0x264a36[_0x57e1d9(0x170)](_0x594d46 => { const _0xce43b6 = _0x57e1d9; _0xce43b6(0x370) !== _0xce43b6(0xb3b) ? _0x594d46[_0xce43b6(0x458)]('click', () => { const _0x5999b7 = _0xce43b6, _0x4179c7 = parseInt(_0x594d46[_0x5999b7(0x814)]['page'], 0xa); _0x5727d3(_0x4179c7); }) : _0x57b83b += _0xce43b6(0x281); }); let _0x3975e7 = 0x0, _0x5dc05b = 0x0, _0x1938ea = 0x0, _0x3b0b8e = ![], _0x1cc5e6 = ''; _0x9e9238[_0x57e1d9(0x458)](_0x57e1d9(0x2ba), _0x2f96cc => { const _0x44c628 = _0x57e1d9; _0x3975e7 = _0x2f96cc[_0x44c628(0x626)][0x0]['clientX'], _0x5dc05b = _0x2f96cc[_0x44c628(0x626)][0x0]['clientY'], _0x3b0b8e = !![], _0x1cc5e6 = ''; }, { 'passive': !![] }), _0x9e9238[_0x57e1d9(0x458)]('touchmove', _0x491594 => { const _0x22cf1f = _0x57e1d9; if (!_0x3b0b8e) return; if (_0x1cc5e6 === '') { const _0x3d007b = _0x491594[_0x22cf1f(0x626)][0x0][_0x22cf1f(0x3ff)] - _0x3975e7, _0x5843e3 = _0x491594[_0x22cf1f(0x626)][0x0]['clientY'] - _0x5dc05b; Math[_0x22cf1f(0x341)](_0x3d007b) > Math[_0x22cf1f(0x341)](_0x5843e3) ? _0x1cc5e6 = 'horizontal' : _0x22cf1f(0xa87) !== _0x22cf1f(0xa87) ? (_0x54e94e[_0x22cf1f(0xa50)][_0x22cf1f(0x22c)](_0x2af2e5[_0x22cf1f(0xa50)]['getMonth']() + 0x1), _0x36c98b()) : _0x1cc5e6 = _0x22cf1f(0x67a); } _0x1cc5e6 === _0x22cf1f(0x525) && _0x491594['preventDefault'](); }, { 'passive': ![] }), _0x9e9238[_0x57e1d9(0x458)](_0x57e1d9(0x50c), _0xe72659 => { const _0x230b79 = _0x57e1d9; if ('crwEE' === _0x230b79(0x8dc)) _0x5d4680('错误:\x20' + _0x44cb20[_0x230b79(0xb58)]); else { if (!_0x3b0b8e) return; _0x1938ea = _0xe72659[_0x230b79(0x386)][0x0][_0x230b79(0x88d)], _0x1cc5e6 === 'horizontal' && _0x281bf8(), _0x3b0b8e = ![]; } }); function _0x281bf8() { const _0x3db582 = _0x57e1d9, _0x32a161 = 0x32; if (_0x1938ea < _0x3975e7 - _0x32a161) _0x5727d3(_0x53b9ad + 0x1); else _0x1938ea > _0x3975e7 + _0x32a161 && (_0x3db582(0x335) === 'leCDc' ? _0x5ac472 += _0x3db582(0x946) + _0xa6b6f5['query'] + _0x3db582(0x6ef) : _0x5727d3(_0x53b9ad - 0x1)); } } function _0x4fe1a1() { return new Promise(_0x23abda => { const _0x338b42 = _0xe792, _0x568e74 = document[_0x338b42(0x374)](_0x338b42(0x9ba)), _0x40697b = document[_0x338b42(0x374)](_0x338b42(0x681)), _0x2356bd = document[_0x338b42(0x374)](_0x338b42(0x868)), _0x1fbda8 = document[_0x338b42(0x374)](_0x338b42(0x383)), _0x3639cc = document[_0x338b42(0x374)]('cancel-music-input'), _0x15b56b = document[_0x338b42(0x374)](_0x338b42(0x5bb)); _0x40697b[_0x338b42(0x330)] = '', _0x2356bd[_0x338b42(0x330)] = '', _0x568e74[_0x338b42(0x8f0)][_0x338b42(0x132)](_0x338b42(0x18c)), _0x40697b['focus'](); const _0x193ee2 = _0x4835f3 => { const _0x2d3df6 = _0x338b42; _0x2d3df6(0x741) === _0x2d3df6(0x741) ? (_0x568e74[_0x2d3df6(0x8f0)][_0x2d3df6(0x31f)]('show'), _0x1fbda8[_0x2d3df6(0x509)] = null, _0x3639cc['onclick'] = null, _0x15b56b['onclick'] = null, document[_0x2d3df6(0x188)](_0x2d3df6(0xb04), _0x11d9a6), _0x23abda(_0x4835f3)) : _0x4382c3 += _0x2d3df6(0x69c) + _0x5c3143[_0x2d3df6(0xb18)] + _0x2d3df6(0x6fa) + _0x1d5522[_0x2d3df6(0x2d9)][_0x2d3df6(0x414)]('、') + '。\x0a'; }, _0x188cb2 = () => { const _0x66ccdb = _0x338b42, _0x34bbf6 = _0x40697b[_0x66ccdb(0x330)][_0x66ccdb(0x1c8)](), _0xa07454 = _0x2356bd[_0x66ccdb(0x330)][_0x66ccdb(0x1c8)](); if (!_0x34bbf6 || !_0xa07454) { if ('Umcxb' !== _0x66ccdb(0x1e4)) _0x1b667b[_0x66ccdb(0x421)](_0x66ccdb(0x8c2), _0x6d1c4f[_0x66ccdb(0x795)](_0x39c487)), _0x481bac(_0x66ccdb(0x20a)), _0x21f1a0(() => _0x186d0e[_0x66ccdb(0x497)](), 0x5dc); else { _0xd5e395('歌名和歌手都不能为空！'); return; } } _0x193ee2({ 'songName': _0x34bbf6, 'artist': _0xa07454 }); }, _0x11d9a6 = _0x4b5d40 => { const _0x29f4e3 = _0x338b42; if (_0x29f4e3(0x133) !== 'mRHic') { const _0x1b23c1 = _0x273b1d[_0x29f4e3(0x699)] || _0x5d52b9?.[_0x29f4e3(0x258)][0x0], _0x552204 = _0x4315e2(_0x1b23c1); _0x2f0974 = _0x552204 ? _0x552204[_0x29f4e3(0x7d9)] : '角色'; } else { if (_0x4b5d40['key'] === _0x29f4e3(0x304)) _0x193ee2(null); _0x4b5d40['key'] === 'Enter' && (_0x4b5d40[_0x29f4e3(0x6ce)](), _0x188cb2()); } }; _0x1fbda8['onclick'] = _0x188cb2, _0x3639cc[_0x338b42(0x509)] = () => _0x193ee2(null), _0x15b56b[_0x338b42(0x509)] = () => _0x193ee2(null), document['addEventListener'](_0x338b42(0xb04), _0x11d9a6); }); } function _0x2f9ee4(_0x144990) { const _0x19e61d = _0x481b43; if (!_0x144990) return []; const _0x2feba8 = _0x144990[_0x19e61d(0x1c8)](); if (_0x2feba8[_0x19e61d(0x93c)](_0x19e61d(0x16e)) && _0x2feba8['endsWith'](_0x19e61d(0x9e0))) return [_0x2feba8]; const _0x199124 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x2e3955 = _0x19e61d(0x861), _0x46759d = [], _0x257777 = _0x144990['replace'](_0x199124, _0x4d2182 => { const _0x429069 = _0x19e61d; if (_0x429069(0x3fe) === 'yrpYL') return _0x46759d[_0x429069(0x238)](_0x4d2182), _0x2e3955; else { const _0xf64d89 = _0x18ec94[_0x429069(0xa28)](_0x429069(0xa9d), _0x429069(0x4bc)), _0x46581a = _0xf64d89['objectStore'](_0x429069(0xa9d)), _0x32f6ba = _0x46581a['put']({ 'id': _0x4bb0ed, 'blob': _0x849c9e }); _0x32f6ba[_0x429069(0x731)] = () => _0x2d03eb(_0x32f6ba['result']), _0x32f6ba[_0x429069(0x33c)] = () => _0x44279f(_0x32f6ba[_0x429069(0x7a4)]); } }), _0x3b0e17 = _0x257777['split'](_0x2e3955), _0x515f77 = []; let _0x1fab07 = 0x0; return _0x3b0e17[_0x19e61d(0x170)]((_0x10935b, _0x593ada) => { const _0x5e5309 = _0x19e61d, _0x31222b = _0x10935b[_0x5e5309(0x1c8)](); if (_0x31222b) { if (_0x5e5309(0xa35) === 'VUGxt') _0x515f77['push'](..._0x384e19(_0x31222b)); else { if (!_0x281929[_0x5e5309(0x552)](_0x390f3c)) return _0x5e5309(0x2a7); if (_0x22db45['length'] === 0x0) return _0x5e5309(0x547); return _0x392789['sort']((_0x3922e3, _0x168d05) => new _0x3b05db(_0x168d05[_0x5e5309(0x75a)]) - new _0x4d5567(_0x3922e3[_0x5e5309(0x75a)])), _0x46a0d9[_0x5e5309(0x190)](_0x2631c8 => { const _0x3fe47a = _0x5e5309, _0x328105 = (_0x2631c8['items'] || [])[_0x3fe47a(0x190)](_0x27c338 => '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x27c338 + _0x3fe47a(0x17d))[_0x3fe47a(0x414)](''); return _0x3fe47a(0x3a5) + (_0x2631c8[_0x3fe47a(0xb18)] || _0x3fe47a(0x93a)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x2631c8[_0x3fe47a(0x75a)] || '') + _0x3fe47a(0x9b0) + (_0x2631c8[_0x3fe47a(0x405)] || _0x3fe47a(0x1d4)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x328105 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x2631c8[_0x3fe47a(0x322)] || 0x0)[_0x3fe47a(0x539)](0x2) + _0x3fe47a(0xb3e); })[_0x5e5309(0x414)](''); } } _0x1fab07 < _0x46759d['length'] && (_0x5e5309(0x929) !== _0x5e5309(0x903) ? (_0x515f77['push'](_0x46759d[_0x1fab07][_0x5e5309(0x1c8)]()), _0x1fab07++) : _0x2888bc[_0x5e5309(0x7a4)]('加载徽章图片失败', _0xa7766f)); }), _0x515f77; } function _0x3f079e(_0x100a3d, _0x434f25, _0x51f8a0 = '') { const _0x5f0954 = _0x481b43, _0x169b2f = document[_0x5f0954(0x95f)](_0x5f0954(0x754)); _0x169b2f[_0x5f0954(0x290)] = 'avatar-wrapper\x20' + _0x51f8a0; const _0x33d713 = document[_0x5f0954(0x95f)](_0x5f0954(0x94f)); _0x33d713[_0x5f0954(0x984)] = _0x100a3d, _0x33d713[_0x5f0954(0x290)] = _0x5f0954(0x7d6); const _0x48504d = document[_0x5f0954(0x95f)](_0x5f0954(0x754)); _0x48504d[_0x5f0954(0x290)] = _0x5f0954(0x74c); if (_0x434f25) { if (_0x5f0954(0x657) === 'diqPA') try { const _0xa918a0 = _0xea3eda[_0x5f0954(0x468)](_0x338c1f); _0x14b5ce[_0x5f0954(0x552)](_0xa918a0) && (_0x221154[_0x5f0954(0x330)] = _0xa918a0['map'](_0x5b7d31 => _0x5b7d31[_0x5f0954(0x7d9)] + '--' + _0x5b7d31[_0x5f0954(0x93b)])[_0x5f0954(0x414)]('\x0a')); } catch (_0xc6eb2f) { } else _0x48504d['style'][_0x5f0954(0x486)] = 'url(\x27' + _0x434f25 + '\x27)'; } return _0x169b2f['appendChild'](_0x33d713), _0x169b2f['appendChild'](_0x48504d), _0x169b2f; } function _0x5a8a13(_0x29b576) { const _0x4477d1 = _0x481b43; if (!_0x29b576) return []; let _0x35a0bd = String(_0x29b576)[_0x4477d1(0x1c8)](); const _0x1eca87 = _0x35a0bd['match'](/```(?:json)?([\s\S]*?)```/i); if (_0x1eca87) _0x35a0bd = _0x1eca87[0x1][_0x4477d1(0x1c8)](); try { const _0x2fa670 = JSON[_0x4477d1(0x468)](_0x35a0bd); if (_0x2fa670 && Array[_0x4477d1(0x552)](_0x2fa670[_0x4477d1(0x3a9)])) return _0x2fa670[_0x4477d1(0x3a9)][_0x4477d1(0x190)](_0x5dd58d => typeof _0x5dd58d === _0x4477d1(0x267) ? _0x5dd58d : _0x5dd58d?.[_0x4477d1(0x47e)])[_0x4477d1(0x8be)](Boolean)['flatMap'](_0x384e19); const _0x2729a1 = [_0x4477d1(0x301), 'dialogue', _0x4477d1(0xb58), 'text', _0x4477d1(0x47e), 'line', _0x4477d1(0x574)]; if (_0x2fa670 && typeof _0x2fa670 === _0x4477d1(0x767)) { const _0x150d60 = []; for (const _0xb9b0b7 of Object['keys'](_0x2fa670)) { const _0x3f64d7 = _0xb9b0b7['toLowerCase'](); if (_0x2729a1[_0x4477d1(0x70d)](_0xedc7a2 => _0x3f64d7[_0x4477d1(0x93c)](_0xedc7a2))) { const _0x4ac735 = _0x2fa670[_0xb9b0b7]; if (typeof _0x4ac735 === _0x4477d1(0x267)) _0x150d60[_0x4477d1(0x238)](_0x4ac735); if (Array[_0x4477d1(0x552)](_0x4ac735)) _0x4ac735['forEach'](_0x1b8306 => { const _0x474bd4 = _0x4477d1; if (typeof _0x1b8306 === _0x474bd4(0x267)) _0x150d60['push'](_0x1b8306); }); } } if (_0x150d60[_0x4477d1(0x2ed)]) return _0x150d60[_0x4477d1(0x71f)](_0x384e19)['slice'](0x0, 0x9); } } catch { } if (/[{\[]/[_0x4477d1(0x603)](_0x35a0bd) && /":/['test'](_0x35a0bd)) { const _0x1069a3 = [], _0x25c34d = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x51f9bf; while ((_0x51f9bf = _0x25c34d['exec'](_0x35a0bd)) !== null) { if (_0x4477d1(0x3da) === 'QPoix') return '刚才'; else { const _0x10d838 = _0x51f9bf[0x1]['replace'](/\\"/g, '\x22')[_0x4477d1(0xa38)](/\\n/g, '\x0a')[_0x4477d1(0x1c8)](); if (_0x10d838) _0x1069a3[_0x4477d1(0x238)](_0x10d838); } } if (_0x1069a3[_0x4477d1(0x2ed)]) return _0x1069a3[_0x4477d1(0x71f)](_0x384e19)['slice'](0x0, 0x9); } return _0x384e19(_0x35a0bd); } function _0x384e19(_0x201f01) { const _0x312020 = _0x481b43; if (!_0x201f01) return []; const _0x5b10a8 = String(_0x201f01)[_0x312020(0x1c8)](), _0x174ff6 = _0x5b10a8['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x312020(0x190)](_0x418fcf => _0x418fcf[_0x312020(0x1c8)]())[_0x312020(0x8be)](Boolean); if (_0x174ff6['length'] > 0x0) return _0x174ff6[_0x312020(0xa24)](0x0, 0x9); return [_0x5b10a8][_0x312020(0x8be)](Boolean); } const _0x1b5ec1 = new Promise((_0x1cd86a, _0x13e4fa) => { const _0x18c503 = _0x481b43, _0x1c296d = indexedDB['open'](_0xeca076, 0x3); _0x1c296d['onerror'] = () => _0x13e4fa(_0x18c503(0x6d4)), _0x1c296d[_0x18c503(0x731)] = () => _0x1cd86a(_0x1c296d[_0x18c503(0x78a)]), _0x1c296d['onupgradeneeded'] = _0x2c8212 => { const _0x48a9c6 = _0x18c503, _0x52ef36 = _0x2c8212['target'][_0x48a9c6(0x78a)]; console['log'](_0x48a9c6(0x715) + _0x52ef36[_0x48a9c6(0x2e0)] + '...'); if (!_0x52ef36[_0x48a9c6(0x181)][_0x48a9c6(0x998)](_0x4b1f4a)) { if (_0x48a9c6(0x2a6) !== 'ZEdJS') { if (!_0x32d115[_0x48a9c6(0x824)]) return; try { _0x4112f8[_0x48a9c6(0x421)](_0x48a9c6(0x39b) + _0x5d556c['activeChatId'], _0x38d820['stringify'](_0x5b962e['conversationHistory'])); } catch (_0x9a067e) { _0xec1e25[_0x48a9c6(0x7a4)](_0x48a9c6(0x7e9), _0x9a067e), _0x307279('无法保存聊天记录。'); } } else console['log'](_0x48a9c6(0x7cf) + _0x4b1f4a), _0x52ef36[_0x48a9c6(0x966)](_0x4b1f4a, { 'keyPath': 'id' }); } !_0x52ef36[_0x48a9c6(0x181)][_0x48a9c6(0x998)](_0x48a9c6(0x567)) && (_0x48a9c6(0x457) !== _0x48a9c6(0x9fb) ? (console[_0x48a9c6(0x6e2)](_0x48a9c6(0x5c6)), _0x52ef36[_0x48a9c6(0x966)](_0x48a9c6(0x567), { 'keyPath': 'id' })) : _0x429a0a(_0x5484a6)), !_0x52ef36[_0x48a9c6(0x181)][_0x48a9c6(0x998)](_0x1988c4) && (console[_0x48a9c6(0x6e2)](_0x48a9c6(0x7cf) + _0x1988c4), _0x52ef36['createObjectStore'](_0x1988c4, { 'keyPath': 'id' })); }; }); function _0x7dde() { const _0x416929 = ['back-to-home-from-settings', 'McXGp', 'remark', '\x20的《', 'TmJjS', 'oWGEm', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', '当前聊天', '.widget-info\x20>\x20div', 'FFtos', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', '确定要删除这个好友圈吗？此操作不可撤销。', 'todo-item', 'vwvui', 'gLKkc', 'important', 'NCPAS', 'HBsyF', 'eKGnN', 'NFWYS', '出去玩', '很期待', 'groupChatCreate', 'xTmCz', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'cos', 'sprite-slider-x', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'PCXdR', 'otPJR', 'BfpMg', 'userId', '已经生成了今日账单！想看就去“看账本”标签页。', '新建条目', 'diary-next-button', '档案已复制到剪贴板！', 'sZSrD', 'aborted', '</pre>', '<img\x20src=\x22', 'worldBookEditor', 'snoop_', 'keydown', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'conversationHistory', '<input\x20type=\x22checkbox\x22\x20value=\x22', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', 'context-lines-per-chat', '请输入有效的转账金额！', 'select', '”的补充信息\x0a', 'yCHoa', 'group-edit-name', '\x0a```', 'chat-send-button', 'XPNtL', 'Ckkmm', 'image/', 'BzyFT', 'omGCZ', 'QFbVH', 'EKaHQ', 'restaurant_name', '确定要恢复这个角色的默认立绘位置吗？', '生成日记失败:\x20', 'remove-font-button', 'sticker-item', 'JxKUx', '</p>', 'expanded', '等你消息', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', '的日记本', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'PLeEK', 'altar-slot-audio', 'TITDa', 'sprite-slider-y', 'hqKHi', 'POST', '正在准备音乐数据...', 'body', '\x20之间的私密内容)\x0a', 'qRYPI', 'AI返回了无法解析的文本', '正在整理…', 'area', 'CSUmc', 'kjaAr', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', '确定要清空群聊\x22', 'XDHLR', '正在搜索音乐...', '未知联系人', 'BrgRo', 'QjKTi', 'group-delete', 'get', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '\x0a##\x20世界书条目:\x20', 'PXPAf', 'themeLightness', 'hLzID', '你是一个乐于助人的AI助手。', 'summary', 'character-settings-button', '#diary-action-reroll', 'cancel-transfer-button', 'currentlyPlayingIndex', '正在翻阅全部历史记录...', 'diary-list-container', 'Gemini\x20stream\x20reading\x20aborted.', '\x20时出错，跳过。', 'AahHg', 'HTuZO', '喝多了', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', '/v1beta/models/', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'addTestPost', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '用户已删除。', 'viaec', 'blob', 'message', '获取AI响应失败:', 'wYSIf', 'cover_placeholder_', 'backgroundColor', 'userProfile', 'organize-button-container', 'cardState', 'music', 'edit-current-circle-button', 'UCLza', 'EdaBg', 'FMgJK', 'char_', '正在翻阅所有档案...', ';\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'Eqvwg', 'linkedWorldBookIds', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'friendCircleList', 'SkVDH', '&alt=sse', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'expense-item', 'bKYNn', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'add', 'mRHic', 'chat', 'widget_card_2', 'listen-together-card', 'fCHdb', '</label>\x0a\x20\x20\x20\x20', 'snoop-home-date', 'BMjAb', 'YpqsZ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', '5px', 'app-settings', '加载已保存字体失败:', 'rTRXe', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'neCNe', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'writeText', 'xWfdJ', 'insertBefore', 'characterId', '#ff8c66', 'whDqN', 'character', 'span', '执行好友圈数据净化...', '请先在\x22设置\x22中配置你的\x20API\x20信息。', '#diary-action-delete', 'IvFXS', '\x0a\x20\x20\x20\x20-\x20世界书[', 'path', 'DfTKH', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'IMLMe', 'HwZpj', 'create-group-chat-button', 'padStart', 'friend-circle-list-container', 'rgba(255,255,255,0.2)', 'VJvno', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'typing-indicator', '\x20天没活动了。你生成的内容必须是全新的、符合这几天空白时间的事件，不能再纠结于几天前的事情。\x0a', 'result_page_content', 'app-pages-slider', 'setDate', 'smooth', 'opacity', 'qwKkX', '无语但是随便吧', 'bwreY', '确定要从圣殿中永久删除《', 'DEDJo', '加载第二个卡片图片失败', '群聊已解散。', 'QcAzz', 'Failed\x20to\x20plan\x20group\x20replies:', '<div', 'rawResponse', 'forEach', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'widgetBgImage', 'click', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', '1657imipPJ', ']\x20[sticker:', 'position', 'dWsSr', 'querySelector', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'author', 'apiSettings', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', '记一笔', 'pointer', 'FAnOp', 'objectStoreNames', 'image/jpeg', 'alt', 'friend-circle-edit-bind-user', '\x20(当前)', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', 'YdfqV', 'removeEventListener', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'application/json', '无法从\x20IndexedDB\x20加载聊天图片:', 'show', 'outerHTML', 'yBjVi', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'map', 'epkVG', 'getFullYear', 'lKdSL', 'qfpsP', 'AYHYy', '##\x20', 'diary-write-button', '错误：找不到此好友圈绑定的用户！', 'is-selected', 'WazIK', '[sticker:', '.screen.active', 'meeting-list-screen', 'FMUWS', 'GfpZG', '保存壁纸失败:', '[AI分享了音乐：', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '对不起', 'Fgjij', 'MFqiU', 'jsvov', 'Hmwti', 'summary-textarea', '2340IjDKxv', 'card-input', 'bzREw', 'event_', 'JuFbM', '\x20|\x20', 'dgOFX', 'font-preview-text', 'group-edit-members', '#member-select-', 'createElementNS', '-\x20**当前精确时间**:\x20', '错误：找不到签署契约的地方。', 'WnPuF', 'dOWZZ', 'SIUxf', '”，在那里“', '100%', 'PTccJ', 'input', '天没动静了。你的角色们应该发起新的问候或话题。', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'TWTau', 'group_avatar_', 'IHZCM', 'snoop-copy-summary-btn', 'dBMAL', 'gupdw', 'fivmd', 'history', 'back-to-circle-list-from-feed', 'trim', 'KjnkK', 'kGEcG', '未知商品', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', '字体更换成功！', 'system', 'info', 'anthropic', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '”...', '-\x20**你们最后一次互动是在**:\x20', '已送达', 'localStorageData', 'sad', 'tDFly', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'userAvatarFrameUrl', 'badge-input', 'important-day-item', 'daily-expenses-list', 'stopPropagation', 'reverse', 'worldBooks', 'char_avatar_', 'artist', '_NoirCard.json', 'nlHxE', 'Umcxb', 'charAt', '#\x20固定分类列表\x0a[', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情，可以是对昨天事情的回应，但时间点必须是“今天”。\x0a', '星期六', 'Unknown', 'pBYaN', 'T00:00:00', '.no-action-modal', '处理\x20', 'snoop-app-back-btn', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '好的，我记住了这些人设和历史。现在我们开始对话。', 'parts', 'AAKXj', '#message-anchor', '#bubble-preview-ai', 'char_sprite_', '.message-container', 'input:checked', 'group-clear-history-button', 'musicPlayerState', 'hoSIU', 'custom_font_ttf', 'Bearer\x20', 'group-settings-name', 'JwHbJ', '\x0a\x0a#\x20用户的动态\x0a', 'back-to-diary-list', 'snoop-char-name-header', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'back-to-meeting-list', '恢复失败了:\x20', 'message-anchor', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', '8px', '动态页背景已更换！', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', '表情包已保存！正在刷新应用...', 'OnseR', '\x20转账\x20', 'FCbIj', '确定要删除这个条目吗？此操作不可撤销。', 'transfer-recipient-group', 'altar-slot-lyrics', 'bubble-', 'quoted-sender', '</span></div>', 'vCBcJ', '\x22\x20中发现一张需要净化的图片...', 'njyfU', 'ulpAI', 'eQqUM', '加载聊天失败:\x20', 'xGjzr', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'padding', '.snoop-chat-item', 'XUrOM', 'QKCWW', 'uBcpS', 'tag', 'home-screen', 'char-avatar-frame-url', 'uFKcq', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'CfVFs', 'snoop-phone-top-nav', 'cover-file-input', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'riddW', '.app-icon', 'setMonth', 'ElUUU', 'GyVRE', 'pending-post-image-preview', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'appIconPosition_app-accounting', 'widget-bg-input', 'save-event-button', '原始文本:', '”已删除。', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'back-to-home-from-circle-list', 'push', 'cCSZn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'number', 'cancel-action-button', 'TFQiK', '正在处理...', '\x0a-\x20**当前时间**:\x20', 'NbVkV', 'back-to-world-book-list', '\x0a\x20\x20\x20\x20人设:\x20', 'global-player-next-btn', 'NPiCl', 'VdXMr', '编辑用户', 'chat_image_migrated_', 'alignItems', 'JldrN', '已复制到剪贴板！', '\x20\x20具体对话如下：\x0a', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'group', 'yeobF', 'listen-together-song-list', 'posts', 'upload-badge-button', 'KUdkV', '</svg>', 'shift', 'date', 'absolute', 'participantIds', '测试动态已添加！', '\x0a\x20\x20\x20\x20姓名:\x20', 'friend-circle-member-selection', 'snoop-home-time', 'OKGQi', ':</span>\x20', '我很脆弱', '-\x20[', 'round', 'uPlYY', 'isGenerating', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', '错误：找不到角色', 'nDHnR', 'string', '\x20账单', 'snoop-home-clock', 'friendCircleEdit', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'edit-delete-char-button', 'snoop-summary-textarea', '无法保存状态，浏览器可能禁用了存储功能。', 'reset-card-button', 'RiuIg', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'chat-messages', '#bubble-preview-user', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'happy', 'oodqd', 'iQMUK', 'wants', 'innerHTML', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'dqnAs', 'msg_', 'customIcon_', 'touchmove', 'wizJT', 'DRoeJ', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', '角色已保存！', 'live-preview-style', 'card-image', '.todo-item,\x20.important-day-item', 'meeting-scene-view', 'upload-music-button', '.diary-entry', 'reset-badge-button', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', '.json', 'AbortError', 'image/png', 'qVKHY', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', 'className', 'zUpYH', 'wUAkV', 'WUwdP', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', '批量生成动态失败:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', '.typing-indicator', 'BXlAR', 'BGOcx', 'choice-cancel', '最近的足迹', 'AvKjZ', '好友圈净化完成，正在重新存档...', '绝对不想', '小时前），可以简单问候一下对方现在的状态。\x0a', 'HdFuG', '50%', 'OBDcZ', '<span>', 'calendar-grid', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'ZEdJS', '<p>格式错误</p>', '[发送了表情]', 'MnnvI', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', '我是女仆', 'QgfUM', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', 'user-persona', 'USOqO', 'activity_description', 'TRNor', 'ctwny', 'emoji', 'RCASI', '\x22\x20id=\x22', '在准备动态回复时，读取图片失败:', 'countdown-timer', 'htUAJ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'touchstart', 'children', 'wXJlb', '\x20(分享了歌曲:\x20', 'back-to-chat-list', 'chatWallpaper', '-\x20你拍过一张照片，内容是：“', 'listen-together-invite', 'countdown-title', 'widget_card', '”聊过天，关于：“', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'hbxzj', 'AI返回了无法识别的数据格式。', 'signal', 'worldBook', 'api-provider', '\x22\x20吗？所有聊天记录将被永久删除。', '确定要删除群聊\x22', 'dNcyN', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', 'yIhLQ', 'getAll', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', '#group-settings-screen\x20.selected-options-text', '确定要删除这个安排吗？此操作不可撤销。', 'readAsText', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'style', 'REniD', 'TEBtt', 'items', 'OKtpi', 'fragments', 'jjgmv', 'save-friend-circle-button', 'statusText', 'wb_', 'version', 'Dgstk', 'WBcXQ', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'chat-message-input', 'qLNYT', 'BYgdQ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'snoop-app-icon', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', '</span>', 'app-user-profiles', 'dNoEz', 'length', 'mqEYG', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'true', 'input_', '请先输入\x20API\x20接口地址和密钥。', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', 'ARvKB', 'gap', '生成失败:\x20', '.diary-delete-btn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'SKIgF', '<p\x20class=\x22music-post-thought\x22>', 'upload-widget-bg-button', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', '&quot;', 'canplaythrough', 'deiJc', 'response', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'fYzkJ', 'Escape', '已设为当前用户！', '的第一次互动。\x0a', 'QnLvS', 'EsHVA', '未命名', 'SOqCo', 'QBevv', '.bubble-', 'ONCYg', 'IYlaR', 'fyRwP', '#ffb366', '群聊音乐搜索失败\x20(', 'googleapis.com', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'option', 'app-pages-container', 'save-edit-button', 'qgsCn', 'create_event', 'btOpR', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', 'jcdrP', '</span><div><div\x20class=\x22description\x22>', 'sender', 'galgame-date', 'remove', 'header-actions', 'fill', 'total_cost', 'HBhfJ', 'TA正在提笔写日记...', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'IUtam', 'home-clock-container', 'maPlh', 'end', '\x20的私聊', 'bvBPU', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', 'spriteTransform', 'JxitK', 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg', 'value', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', '哼，这不是图片，你想让我压缩什么？', '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a', 'vzLEg', 'SAKtV', '\x20/\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'appIconPosition_app-diary', 'sprite-cancel-button', 'kqJld', 'onerror', 'RLulZ', 'hjfTZ', 'IMoFF', 'dEsIH', 'abs', 'PHdZl', '[AI返回了无法解析的剧本:\x20', 'TNcmj', '星期四', '\x22\x20的聊天记录已清空。', 'focus', 'User\x20cancelled', 'world-book-edit-content', '今天\x20', 'auto', 'tYKDm', 'beforeend', 'mouseup', 'http', 'flex', 'tab-view-ledger', 'readAsDataURL', 'nztBE', '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'world-book-editor-screen', '群聊\x20(', '”买过：“', 'ZTomB', 'import-data-input', '请输入群聊名称。', 'qlUly', '哼，正在开始净化你那被污染的聊天记录...', 'summarize-modal', 'QMFVy', '--primary-lightness', 'RxjMl', 'toDataURL', '无法读取状态，浏览器可能禁用了存储功能。', 'cGYBw', 'editing-user-id', 'novel', 'long', '谁啊我吗', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'read', 'Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。', '--widget-cover-image', 'JmOUe', '\x20张旧的音乐封面。', '-\x20**状态提示**:\x20这是你和', 'OoRTp', 'QxbHx', 'jWqzt', 'transfer-backdrop', 'left', 'getElementById', 'pAcfP', 'documentElement', 'all', 'undefined', '今天一笔账都没有，我整理什么？', 'oOhpJ', 'viewBox', '#group-settings-screen\x20.select-box', 'UzgWY', 'EeMMM', 'font-input', 'feed-loader', 'kynkt', 'dJInQ', 'confirm-music-input', 'user', 'speaker-user', 'changedTouches', 'group-chat-member-list', 'upload-card-button-2', '#ffcc66', '清空聊天记录失败。', 'aGBhj', '】的日记本已被清空。', 'message-container', 'BzNrO', '缓存命中:\x20', 'warn', '71%', 'SUAki', 'form-button\x20load-more-btn', 'PmKny', 'fontStyle', 'AI似乎没有想出任何新动态。', 'openai', '\x20个成员', '歌曲“', '无描述', 'chatHistory_', '餐饮美食', 'SwdVr', 'PsKbW', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'TfTrm', 'group-bg-input', 'quotedMessage', 'rnPaD', 'qIznp', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', 'transform', 'imageId', 'bottom', 'reply', '\x20的旧格式数据翻译。', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'galgame', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', '请看是我', 'Assistant', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'cRlsS', 'zGwGu', 'category', 'pwAWj', '图片处理失败:\x20', '#66b3ff', 'snoop-app-container', 'uSXrC', 'Bcyzp', 'noir_migration_music_v1_complete', '星期日', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'IGJjf', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'ySdQs', 'set-active-user-button', 'xlgvB', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'text', 'scrollTop', '分钟前聊过，请注意衔接。', '[用户分享了音乐：', 'modal-ok', 'meeting-char-name-header', 'gallery', 'listen-together-ui', 'nRlkt', 'diary-page', '#d1d5db', 'member-selection-item', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', '正在写入新数据...', 'download', 'HdXaV', 'SqiAa', 'iicxB', 'events', 'PLvvt', 'jvmNj', 'ifNCl', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'label', 'QApnl', 'TZhvU', 'xpWKI', 'modal-cancel', '弱小委屈但凶恶', 'min', 'theme-lightness-slider', 'sqGQT', 'xtjug', 'cancel-quote-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '获取中…', 'diary-char-name-header', '的转账', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'QgvHm', '[图片]', '未分类', 'YbPtR', 'app-world-book', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'diaryPressTimer', 'galgame-speaker', 'music-library-container', '星期五', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'dmRBA', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', 'boundUserProfileId', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'yrpYL', 'clientX', 'meeting-send-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'OrdXH', 'exp_', 'endpoint', 'status', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'preferences', 'ddAmE', '-\x20姓名:\x20', '#app-dock-bottom-left\x20#', 'decorative-badge', 'eNjRs', 'item_name', 'app-music-library', '-\x20你最近去过：“', 'querySelectorAll', 'toggle', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'snoop-dock', 'join', 'diary-view-screen', 'display', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', ')，启动兼容模式...', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', '加载更多聊天记录', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'review', 'kZvPT', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '好了，请基于以上所有信息，开始写今天的日记吧。', 'setItem', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'from', 'FkyJz', '干劲满满', 'WOtcB', 'comments', 'mousedown', '-\x20**对话状态提示**:\x20你们已经有\x20', 'transparent', 'friend-circle-list-screen', 'anthropic.com', 'chats', 'Jtrnp', 'emotion', 'dmqdh', 'flexDirection', '甜蜜地和你聊天', 'type', '3506096frjiFG', 'YgRAL', 'MFLJZ', 'galgame-sprite-controls', 'gVrAi', 'diary-entries-container', 'sort', 'yLnWZ', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '（正在构思中...）', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', '浏览器', 'xrTfq', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'import-char-input', '加载角色\x20', 'user-post-attachment-preview', 'message-image-content', '--\x20点击选择\x20--', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'widget-artist', 'JKGUQ', 'kHrLv', 'RMqrp', 'card-input-2', 'ptMwH', 'HDhYa', '你是一个乐于助人的助手。', 'nQBQa', '[发送了图片]', '#diary-action-cancel', 'MNRoD', 'includes', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', '#f2b7c6', 'RKzdd', 'addEventListener', 'is-entering-from-right', '音乐搜索失败:\x20', '<span\x20class=\x22', 'ihHIz', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', 'WFnBp', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'displayedMessageCount', 'coverUrl', 'OEPoM', 'GbSvs', 'apDNx', 'getDate', 'world-book-editor-title', 'gsaQn', 'parse', '检测到已保存的字体，正在应用...', 'zkJZk', 'llAQt', '其他杂项', 'add-choice-modal', '好友圈已保存！', 'CUmKO', 'WwoDb', '生成动态时发生错误:\x20', 'choice-create-character', 'chat-screen', '(想转账给“', 'IKRuj', 'EaNce', 'JSlxU', 'uzERR', 'pNjwp', '\x20添加了新的纪念日：', 'ctSXB', 'UtPmF', 'drawImage', 'content', 'global-player-play-pause-btn', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'accounting-content-area', 'close-summary-button', 'iHeiZ', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'delete', 'backgroundImage', 'Dvghk', '这本日记本来就是空的，你还想清空什么？', 'NtuFC', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'normal', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', 'isPlaying', 'delete-friend-circle-button', 'diary-action-modal-', '哼，你这字体文件有问题，用不了。', '<img\x20id=\x22', 'cardWidgetState', 'iHHJx', 'DMdQF', 'bubbleCss', 'chat-reroll-button', 'reload', 'VCDAl', 'lsKma', 'add-expense-button', 'whispers', 'todo-item-small', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'QWMlE', '个人资料已保存！', 'tMAWF', 'nZwvP', 'diary-modal-save', 'meeting-reroll-button', '59%', '\x0a-\x20当前精确时间:\x20', '\x20内容失败:', 'margin', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'OeNxY', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'zVTXx', 'group-settings-bind-user', '角色“', '保存失败，你的表情包是不是太多了？', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'LKqaq', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', '.choice-modal-backdrop', 'toDateString', '樱花薄粉', 'upload-card-button', 'zPAZG', 'clear-feed-button', 'originalExpenses', ']\x20[image]', 'DdHjR', 'readwrite', 'AI返回的原始文本:', ']\x20[', 'qnzko', '暂无音乐', 'eTbcA', 'setProperty', '\x0a-\x20**对话状态**:\x20群里已经有', 'FLXru', 'char-edit-sprite-', '.listen-together-song', '点击选择\x20.mp3\x20或\x20.flac', 'galgame-view-container', 'IDtCU', 'playableUrl', 'chat-image-button', 'AI未能返回有效的JSON数组格式。', 'appState', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'DBdPi', 'translateX(-50%)', 'BCcJX', 'NvopR', 'user-post-textarea', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'userProfiles', 'user-post-avatar', 'replaceAll', '[AI向\x20', 'widget_badge', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'diary-write-modal', '\x20的图片失败:', '#FFFFFF', 'is-playing', 'HfXaj', 'input[name=\x22event-type\x22]:checked', '薄荷水色', 'diary-send-button', '点击选择\x20.lrc', '错误：找不到这首作为“信物”的歌。', 'ZLMvx', '加载徽章图片失败', 'cursor', 'home-time', '好委屈但是不能哭', 'default', 'WCcHr', '生活服务', 'Ctiio', 'LeKVP', 'WnbKe', 'srWKN', 'entries', 'findIndex', 'HUyqp', 'VieQF', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', 'activeUserProfileId', '确定要清空好友圈“', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', 'FCXrC', 'removeProperty', 'accountingData', 'GxikR', 'post_image_migrated_', 'Failed\x20to\x20parse\x20state\x20from\x20localStorage,\x20resetting.', 'zADqf', 'lEQYu', 'catch', 'toBlob', 'WluuN', 'marginBottom', '已自动断开与其他人的听歌同步。', 'sprite-slider-scale', 'Wmtke', '解析音乐文件失败:', 'onclick', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'CEYXJ', 'touchend', 'transfer-recipient-select', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'OvHSe', '你还没保存这个角色呢，导什么导？', 'random', 'xBAHO', '正在构思中，请稍候...', 'ZHzqc', 'floor', '\x22\x20的聊天记录吗？此操作不可撤销。', 'main', 'firstChild', 'pause', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'User', '\x22\x20class=\x22char-name\x22>', 'diary-input-wrapper', 'musicPlaylist', 'RqcKD', 'sin', '图片加载失败', '纪念日', 'horizontal', '编辑群成员功能正在开发中...', '请根据以上所有信息，开始分析并返回JSON。', 'location_name', 'home', 'put', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', '世界书条目已保存！', 'CfPrM', 'event-type-todo', 'world-book-screen', '12SxTrNg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'bxMIq', 'chat-summarize-button', '正在解析角色卡...', 'friendCircles', '{userName}', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'endsWith', 'toFixed', 'mGOMc', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', '#c299ff', 'RfeFr', 'musicWidgetPosition', '0\x200\x20', '群聊设置已保存！', 'app-snoop', 'OKQcO', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'fetch-models-button', 'array', 'nnqao', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', 'ORGaM', 'bHsFx', '\x20时出错:', '收到的原始、有问题的文本:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'short', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'CoaVz', 'description', 'isArray', 'Fetch\x20request\x20was\x20aborted.', '错误:\x20', 'editing-world-book-id', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', '.message.ai', 'TfiQS', '\x0a\x0a#\x20当前任务指令\x0a', '转给\x20', 'nMgFx', 'character-edit-screen', 'char-edit-remark', 'diaryCurrentPage', '复制失败了，哼。', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'meeting-message-input', 'Error\x20fetching\x20from\x20', 'change', 'audio-file-input', '执行音乐封面数据净化...', 'onloadend', 'music_library', 'RnRvh', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '#ff9999', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'todo-date-title', 'diary-page-', '书记官正在奋笔疾书...', 'char-edit-bind-user', 'group-avatar-input', '-\x20你在“', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', 'user-avatar-input', 'utterance', 'snoop-phone-screen', 'last_edited', '找不到角色信息。', '正在升级音乐卡片数据...', 'VQclX', 'getHours', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', '.message.user', '快点哄我', '无标题笔记', '#snoop-app-view-container\x20.snoop-app-content', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'CaJws', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'categorizedExpenses', 'jeoWw', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '/v1/chat/completions', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'footprints', 'accepted', 'data', 'getSelection', '卡片已更换！', '\x20\x20\x20\x20-\x20', 'group-settings-screen', 'UMwFb', '卡片\x202\x20已移除。', 'toLocaleString', '13PZOZYj', '我是垃圾', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'app-accounting', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', '勉强但是好吧', '的个人专属世界观设定\x0a', 'backgroundSize', 'jusxn', '\x22\x20class=\x22post-image\x22></div>', '\x20写道:\x20', 'init', 'avatarFrameUrl', '\x20添加...', 'szdEs', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'abort', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'back-to-circle-list-from-edit', 'upload-wallpaper-button', 'fSXJQ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'FHDUC', '15940rTbrEy', 'today-todo-list', 'wUTYL', '群聊至少需要2名成员。', 'YlCTQ', 'show-chat-view', 'activeMeetingCharId', '\x20到\x20', 'chatHistory_chat_', '28%', ':streamGenerateContent?key=', 'group-chat-create-screen', 'customWallpaper', '字体已应用！(Font\x20Applied!)', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', '该角色', 'back-to-home-from-chat', 'music-input-backdrop', '购物记录', '...', 'qYQFt', 'EZMNs', 'snoop-app-refresh-btn', '歌曲ID', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '近期没有特别安排', 'message-action-modal', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'Creating\x20object\x20store:\x20music_library', '<span\x20class=\x22description\x22>', '有点破防', 'NxVZQ', 'libyM', 'KhDcn', 'XWvTQ', 'vPCTL', 'user-name', 'back-to-home-from-calendar', '事情好多', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'NcExP', 'chUQL', '确定要清空\x22', 'SGdgQ', 'LZhgT', 'full', 'nDDjp', '歌名和歌手都不能为空！', '刷新了\x20', 'model', 'QKVsN', 'indexedDBMusicData', 'store_name', '加载\x20', 'FGaDz', 'bpsWv', 'quote-message-button', '”，但没找到人)', 'lZrAm', 'gIDyI', '20%', 'SgnKo', 'perChatContextLines', '”吗？此操作不可撤销。', 'WrcSl', '点击选择\x20.jpg\x20或\x20.png', 'tyFil', 'removeItem', '吃你的饭', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'TOxbW', 'test_post_', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', 'cost', 'ZYlTo', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', 'height', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'pIGeU', 'char-edit-wallpaper-preview', 'music-upload-altar-screen', 'HsjcG', 'KKyoU', 'calendarEvents', '1125584rFMleP', 'aiuAn', 'tZVkt', '</div>\x0a\x20\x20\x20\x20', 'test', 'reset-widget-bg-button', '<div\x20class=\x22loader-spinner\x22></div><span>', '未命名角色', '内容不能为空！', 'reset-desktop-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '我来搞定', 'PuenT', 'char-edit-avatar-input', 'AmUiY', 'marginTop', '正在迁移旧的用户数据...', 'WYMQY', '委屈哭', 'rBNKB', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'textShadow', 'group-bg-preview', 'defaultPrevented', 'ASyBq', 'numeric', '\x0a-\x20**对话状态**:\x20群里在', 'ygepF', 'GtuVG', 'back-to-home-from-accounting', 'getContext', 'widget-cover-art', 'href', '已删除。', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'todo', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', 'lyrics-file-input', 'touches', 'oncomplete', 'tencent', '正在为你切换新的歌曲...', 'background', 'parentElement', 'dpfmW', 'wallpaper_main', 'zDCBp', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'dyEDk', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '群聊\x22', 'OBdbI', 'center', '#snoop-app-view-container\x20.snoop-app-header', '净化音乐封面时出错，真是的。', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'title', '切，加载播放器状态的时候出错了。', 'IkeCs', '（开始一段新的对话...）', 'BeTSf', 'last_message_preview', '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a', '\x20张旧图片。应用即将刷新。', '动态中的音乐搜索失败:', '.char-info-wrapper', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', '6fITGMy', 'diary-modal-cancel', 'chat_', 'MUCPB', 'input[type=\x22checkbox\x22]', '真是的，必需的祭品都还没准备好！', 'music_cover_migrated_', 'reduce', 'offline-scene-view', 'clock-color-toggle', 'back-to-char-select-from-group-create', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'jAiLy', 'ADSdK', 'insertAdjacentHTML', '有点无语', 'usfVZ', 'musicUploadAltar', '?word=', 'indexOf', 'NpzLl', 'p[data-history-index]', 'lEDBq', 'htRmI', 'editing-char-id', 'TkDIm', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'delete-user-profile-button', 'api-key', '错误：第一个好友圈\x20\x22', 'activeFriendCircleId', 'vBUGz', 'role', 'head', 'xzKXm', '-\x20你的备忘录里有一条叫“', '生成动态失败:', 'app-calendar', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', '.load-more-btn', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '1899vrQVkj', 'bsJbL', 'Psxxw', 'meeting-list-container', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', 'vtJQO', 'confirm-transfer-button', 'ByTQF', 'FwgaS', '<div\x20class=\x22snoop-main-grid\x22></div>', 'noir-custom-font-style', 'VqaSe', 'toString', 'vertical', 'qcoJn', 'XdAXm', 'SIaZU', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'DtBTw', 'DQkTR', 'music-input-song', 'OXXER', 'cancel-event-button', 'noir_data_migration_v1_complete', 'calendar', 'itTNs', 'snoop-list-screen', '大家好像不知道该怎么回复...', '我是小丑呜呜', 'rWjOr', '{charName}', '正在打包数据，请稍候...', 'nVtIU', '文件格式不正确，不是一个有效的备份文件。', '#world-book-checkboxes-container\x20input:checked', 'char-edit-css', 'user-avatar-frame-url-in-chat', '导入角色卡失败:', 'app-meeting', '\x0a\x20\x20相关记忆:\x0a', 'VjxTt', 'contact_name', 'UePcm', 'vExhI', 'senderId', 'add-user-profile-button', 'todo-list', '-\x20你点过一份外卖：“', 'splice', 'eventType', 'RAuxc', '34%', 'accountingLedger', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', 'meetingView', 'editing-friend-circle-id', '导出失败了，哼:\x20', 'appIconPosition_app-snoop', 'kUGYL', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', '加载自定义表情包失败，真是没用。', '字体保存失败了，哼:\x20', '2085vGNloM', 'cover', 'appIconPosition_app-world-book', 'songId', 'fTQAy', 'characters', 'phone-container', 'world-book-list-container', 'group-clear-history', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'touchcancel', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', '新角色\x20', 'nlfWV', 'getItem', 'snoop-log-back-btn', 'svDYI', 'friend-circle-edit-name', 'diaryView', '一起听歌', '未知艺术家', 'borderRadius', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'txzfS', '15px', '#char-edit-avatar-preview\x20+\x20.avatar-frame', 'sprites', '60%', 'width', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'sprite-reset-button', 'claude', 'lt-ui-song-artist', 'MRZbm', 'preventDefault', 'toISOString', '确定要删除角色“', 'settings-screen', 'lXUUS', '.custom-multiselect', 'IndexedDB\x20failed\x20to\x20open', '群聊“', 'nvWBL', 'gryOz', '至少要保留一个用户。', 'kEMoX', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'toast', 'ilocJ', 'group_bg_', 'back-to-snoop-list-from-phone', 'snoopPhone', 'JvGFF', 'ofhBE', 'log', 'hsSYL', 'ALWSL', 'rgba(0,\x200,\x200,\x200.4)', 'sticker', 'AXDmG', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'XNdof', 'top', 'widget-next-btn', 'JZBZN', '解析AI剧本JSON失败:', 'snoop_cache', '”。\x0a', 'lyrics', 'EhhGc', 'sfNWP', '星期三', '.music-post-play-icon,\x20.music-share-play-icon', 'char-edit-offline-bg-preview', 'RafgL', 'execCommand', '\x0a##\x20条目:\x20', 'scale', '”，里面有\x20', 'removeChild', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'RMhIV', 'wTyao', 'JERSv', '\x0a\x0a#\x20关于群聊参与者“', '\x22\x20src=\x22', 'copy-summary-button', 'vSPea', 'OsDQv', '编辑条目', 'LJWRo', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'quote-preview-area', 'lastTimestamp', 'modal-text', 'aIUle', '未知表情', 'some', '.app-icon-img', 'forceWhiteClock', 'clipboard', 'char-edit-wallpaper-input', 'home-date', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', ']\x0a\x0a#\x20角色资料库\x0a', 'Upgrading\x20database\x20to\x20version\x20', 'char_wallpaper_', 'DiVIr', 'aQFvk', '正在连接同步频道...', '#group-world-book-checkboxes\x20input:checked', '确定要彻底清空【', '最近没有互动记录。', 'mlxFo', 'UHMUU', 'flatMap', 'expense-description', 'hDdfj', 'back-to-char-select-from-edit', 'charId', 'VGxYL', 'zORnd', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'save-user-profile-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', '-input', '来源：', 'widget-title', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '逗你开心', 'prev-month-btn', '包含所有图片和音乐的全量数据已成功导出！', 'url(\x27', 'onsuccess', 'VyRRm', 'HgBCw', 'xZEcx', '上传失败了，笨蛋！\x20', 'modal-mask', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', 'export-all-data-button', '-\x20[动态]\x20', 'musicFeed', '\x0a-\x20人设:\x20', 'PqPSn', 'setHours', 'delete-world-book-button', 'VeUtI', 'historyIndex', 'ffbYs', 'back-to-user-list-from-edit', '\x20行格式不对，被我无视了。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '至少要选择一个圈内成员！', '歌曲名称', 'tjScf', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', '下载并转换网络封面失败:', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'filled', 'avatar-frame', '哼，正在净化你那些超重的音乐分享记录...', 'isActive', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'PKWjh', 'customFeedWallpaper', '需要至少2个角色才能创建群聊。', 'sFGue', 'div', 'audio-player', '8px\x2016px', 'gPDaT', 'postType', '小时前，生成的内容应该符合这段时间的空白。\x0a', 'timestamp', '2-digit', 'qUrRz', '\x0a你只扮演【', 'authorType', '群名称已更改为\x22', 'files', '超激动我来了', 'badge-image', 'aFWZR', 'xcXpm', 'szlZi', 'activeMeetingScriptQueue', 'object', 'meetingViewMode', 'xHBrE', 'confirm-altar-upload-button', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'songName', 'getDay', 'eRmes', '-\x20**状态提示**:\x20你上一次活动是在', 'themeHue', 'XeRdO', 'is-today', 'TPeTG', 'XhLMT', 'add-event-fab', '--feed-bg-image', 'musicLibrary', 'JqJMr', 'edit-clear-history-button', 'lazy', 'bnQUC', 'CsXJl', 'split', 'GMhTX', 'now', '7HLSzRo', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'galgame-textbox-container', '好友圈数据升级完成，迁移了\x20', 'qbaZo', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'paddingBottom', 'diaries', 'qKjhW', 'result', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', '\x0a\x20\x20\x20\x20<div\x20id=\x22', '一个人可怜吃饭', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'xTuFY', 'recipientId', '错误：你还没有创建任何好友圈。请先在App内创建一个。', 'play', 'friend-circle-edit-screen', 'custom-icon-list-container', 'stringify', 'closest', 'music-widget', '\x0a\x0a#\x20今日消费流水\x0a', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'ZshxL', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'VvCaC', 'authorId', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'chhsi', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'AI整理失败了，哼:\x20', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'error', 'group-options-cancel', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'LcBZw', '徽章已更换！', 'var(--text-color)', 'url(', 'brMnO', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'api-endpoint', 'newAvatar', 'GRyEd', 'mouseleave', 'friend-circle-edit-title', '导出过程中发生严重错误:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'NoirCharacterCard', '>>\x20', '--primary-hue', 'ivsKP', 'bZEaM', 'revokeObjectURL', 'pHPtl', 'diary-list-screen', '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'music-feed-container', 'QFCvk', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'Eokic', 'pAeRN', '2023-06-01', 'DOMContentLoaded', 'KLMVZ', 'hRkXB', 'italic', 'world-book-checkboxes-container', '壁纸已更换！', '这个也是摆设，别点了。', 'acjHF', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'rtsmj', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'hMuug', 'Creating\x20object\x20store:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'GQpNm', 'appIconPosition_app-music-library', '这不是一张有效的Noir角色卡。', 'circle_', 'back-to-home-from-meeting-list', 'avatar', '》吗？', 'pop', 'name', '哼，正在净化你那些被污染的好友圈动态...', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'createObjectURL', '和其他人的聊天', 'rZqWo', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'ZRqLW', '总得说点什么吧？', '位置已重置，正在刷新...', 'nrVPt', 'YwwVp', 'UjeFn', 'home-dock', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', '同步已断开。', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'sprite-confirm-button', 'LtkIh', 'edit-message-textarea', 'find', ',\x20resetting.', 'chat-transfer-button', 'generativelace.googleapis.com', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'snoopList', 'objectStore', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'phhkz', '赞同！渲染效果一级棒！', 'XyvQC', 'column', 'gixxV', '备忘录', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'candidates', 'YkpkO', '对方正在行动中...', 'rdaGj', 'chat_image_', 'noir-author-mark', '29%', 'qxopu', 'QvhMg', '桌面已重置，即将刷新...', 'is-exiting-right', '编辑角色', 'rZtOt', 'checked', 'pendingPostAttachments', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'substring', 'provider', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'KqKTG', 'Failed\x20to\x20remove\x20corrupted\x20state\x20from\x20localStorage:', '\x22>&times;</button></div>', '有点生气', 'group-options-modal', 'dataset', 'disabled', 'back-to-home-from-wallpaper', '啥意思捏', '编辑好友圈', '成功向好友圈\x20\x22', 'zrsUr', 'BKWNk', 'getReader', 'rRGYd', 'activeQuote', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'card-widget-2', '-\x20你记得曾和“', '徽章已移除。', 'HYTlO', 'activeChatId', '<div\x20class=\x22snoop-avatar\x22>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '#\x20记录是空的，没什么好总结的。', 'DULtM', '已恢复默认字体。', 'IIzud', 'upload-feed-bg-button', 'kKvJX', 'eventContent', '.ttf', 'characterEdit', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'toLowerCase', '你好，世界\x20(Hello,\x20World)', 'zZYhv', 'ATuEO', '距离「', 'PxDfM', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', 'private', 'selectedDate', 'SfceY', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', '还没有我的回复可以重新生成哦。', '正在解析备份文件...', 'card-image-2', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', '小时前聊过，可以适当问候，不要直接继续之前的话题。', '不高兴撒娇', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'LJibi', 'load-more-btn', 'loading', '全量导入失败:', '正在铭刻字体...', 'angry', '来源：[最活跃]', '成功净化并迁移了\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'nPbia', 'aWTDS', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', '在所有地方的最后一次互动是在**:\x20', 'back-to-library-from-altar', 'hgkDP', 'preview_', 'TmjqK', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'KcxUY', 'DkVKt', 'cardState2', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'diary-entry\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'Bzdii', 'galgame-sprite-adjust-ui', 'widget-play-pause-btn', '|||CMD|||', 'user-avatar-preview', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'is-exiting-left', 'wpTfJ', 'assign', 'user-post-image-button', 'music-input-artist', 'save-char-button', 'rfdnW', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'group-delete-button', '买新衣服', '正在检查好友圈数据...', 'Enter', 'Noir_FileSystem', 'kwDTS', 'vwapL', 'BDENh', 'chat-sticker-button', '加载卡片图片失败', 'fjubj', 'IcdiL', '加载视奸记忆失败\x20(', 'isFromLibrary', '新用户\x20', 'WOlzt', 'memberCharacterIds', 'button', 'RHOsW', 'currentAbortController', 'world-book-edit-name', '\x0a##\x20', 'char-edit-name', 'setAttribute', '字体应用失败:', 'ynZCM', 'mQDvH', 'XiYnA', 'block', 'modal-root', '\x0a\x20\x20人设:\x20', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'screenX', 'speaker', '大家正在赶来回复...', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'post_user_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', '净化好友圈时出错，真是的。', '正在升级聊天数据结构...', 'kind', 'app-chat', '加载壁纸失败:', 'target', 'HXaMS', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'OXGZi', 'dock', '#a7c7e7', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'model-dropdown', 'then', '视奸内容解析失败:', 'add-event-modal-title', 'OfUsB', 'YeoFS', '暗夜紫晶', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', '未知歌曲', '群聊名称不能为空！', 'music-widget-card', '创建新角色', 'post_image_', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'activeCharacterId', 'AXtaN', 'user-post-image-input', 'galgame-sprite-container', '动态页背景已移除。', 'none', 'apply', '图片预览失败:\x20', 'pFuyd', '\x20\x0a#\x20当前情景\x0a', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'svg', 'music_cover_', 'RtVbo', 'ceil', 'filter', 'iuixe', 'uEWkL', 'eMETC', 'customStickers', 'BxIxB', 'toLocaleDateString', '小组件背景已恢复默认。', '\x0a\x0a##\x20世界书条目:\x20', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'JFwou', 'ENjIZ', 'ivSWK', '在“一起听”邀请中，净化封面失败:', 'jyXqj', 'displayUrl', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'DBEre', 'lJUaw', 'bites', 'fJjZb', 'NJPPu', 'HevTv', '<div\x20class=\x22post-likes\x22>', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'shiftKey', 'visible', 'qCVTS', '已恢复默认。', 'RBSye', 'DlHoU', 'bmKkd', 'qPHfx', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'KpviN', 'AI返回的不是一个数组。', 'textContent', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'Kklha', '无法保存聊天记录。', '找不到要清空的聊天记录。', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', '在好友圈\x20\x22', '\x20张旧的动态图片。', 'persona', 'code', 'isAnimatingDiary', 'diaryList', 'theme-hue-slider', 'classList', 'user-profile-list-screen', '说了是摆设啦，笨蛋。', 'post_', '\x20条新动态。', 'character-item', ']:\x20', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'char-edit-avatar-preview', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'dFdhn', 'AJDDD', 'PHPEc', 'wdDuW', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', 'galgame-time', 'ocgyN', 'dpSaD', '保存角色失败:', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', '-\x20**你与', 'JSON\x20解析失败!\x20错误原因:', 'translate(-50%,\x20-100%)', 'LOjvq', 'style-', 'character-edit-title', 'fvaZV', '”已创建！', '成功获取\x20', '我错了', 'DSVsh', 'key', 'LHRwI', 'assistant', '保存壁纸失败:\x20', '</span><span\x20class=\x22amount\x22>总计:\x20', '动态已清空。', 'music-screen', 'cQsbK', 'rcoZe', '保存失败:\x20', 'localeCompare', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'char-name-header', 'cancel-edit-button', 'toLocaleTimeString', 'PnWUG', 'kfPMR', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'calendar-day', '&apos;', 'nORSZ', 'XIEPP', '\x22\x20class=\x22music-share-cover\x22>', 'userProfileList', 'iIZdS', 'Detected\x20API\x20provider:\x20', 'event-content-input', 'ZAorF', 'ynZqL', '没有找到相关结果。', 'vvOdM', 'noir_migration_fc_v1_complete', 'timeupdate', 'concat', '\x20说：“', '2px\x20dashed\x20var(--border-color)', 'YAML翻译机也无法理解这段梦话。', 'PBOlu', 'fkgqA', '\x20\x20-\x20用户ID:\x20', '用户资料已保存！', '未知餐厅', 'url', 'startsWith', 'settings', 'msNHV', 'edit-message-button', 'data:image', 'ibRsT', '刚刚发布了一条动态，内容是：“', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '被萌到', 'hGHsS', '-\x20你曾经搜索过：“', 'NoirCustomFont', 'scrollIntoView', 'data:\x20', 'transfer-amount-input', 'TUPXO', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'OcHnm', 'img', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'netease', 'diary-prev-button', 'emote', 'jnABo', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', 'chat-listen-together-button', 'indexedDBData', 'feed', 'day-dot', 'medium', '为你骄傲', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'NdlTN', 'color', 'createElement', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'appendChild', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'generationConfig', 'createObjectStore', '新建好友圈', '未知角色', 'fqSZm', '[AI发送了表情：', 'zsXtl', 'sprite-resize-handle', 'mAPcj', '\x20.app-icon-img', 'narrator', '选择聊天', 'cSxhC', '加载立绘失败:', 'iYOcD', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'awysW', 'KukZT', 'postContent', 'meeting-view-screen', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'nxwuN', 'BdSfx', 'aJxjx', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'app-music', '---\x20开始AI回复流程\x20---', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', '请求AI更新:\x20', 'zh-CN', 'src', 'is-visible', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', 'back-to-home-from-world-book', '导入失败:\x20', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'wallpaper-screen', 'cancel', 'gFykb', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', '</span><span\x20class=\x22unit\x22>天</span>', 'vFUbo', '创建新用户', '10px\x20auto', 'clear', '--custom-font-family', 'yoXXB', '\x20记录)\x0a', '---\x20好友圈净化仪式完成\x20---', 'contains', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'bgUBa', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'EwFDi', 'chat-image-input', 'gdGvd', 'stretch', 'eHDRZ', 'readonly', 'choice-import-character', '数据导入成功！应用即将刷新...', '请根据以上所有规则，生成\x20', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', '请输入新的群名称：', 'clockPosition', 'DmSHJ', 'NYdRv', 'message-action-backdrop', 'activeDiaryCharacterId', '（对话结束）', '音乐数据升级完成，迁移了\x20', 'contactName', 'vJfqe', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'quote-preview-text', 'Claude\x20API\x20错误:\x20', 'values', 'Bnscc', '”已存入圣殿。', '在准备群聊API数据时，读取图片失败:', 'time', 'uHJUM', 'mFvXF', 'music-input-modal', '点击选择\x20info.txt', 'tnsAK', 'user-send-post-button', 'YJszN', 'chat-view-pane', 'ChRRb', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'Migrating\x20old\x20data\x20structure\x20to\x20new\x20chat-based\x20structure.', '正在清空旧数据...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'chat-sticker-panel', '用户操作中断了\x20AI\x20响应。', 'badgeState', 'pzWpY', 'uZixz', 'LTZLh', 'upload-font-button', 'PdTMg', '哼，就按你说的办好了。', '.listen-together-accept-btn', 'QaRrG', 'isOffline', ']。严禁使用列表之外的任何表情名。\x0a', '#a4c2f4', '猫猫撒娇', 'chat_group_', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'quoted-message-in-bubble', '\x22>\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'meetingList', ')\x20的专属时间锚点\x0a', 'groupSettings', '💜\x20', 'likes', 'xSjmf', '</div>', '群聊「', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'cpcLo', 'json', 'QoRvu', 'https://api.vkeys.cn/v2/music/', 'MjaOA', 'AYQJW', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', '已选择\x20', 'ended', 'keys', '交给我吧', 'diary-get-reply-button', 'oHdPj', 'Jnmci', 'zBaeL', '</span>:\x20', 'border', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'audio', '正在解析音乐灵魂...', '外卖订单', 'back-to-home-from-music-library', 'RcMrh', 'JuKtk', 'tqUuw', 'heVja', '获取模型失败:\x20', '卡片已移除。', 'HoVYM', 'coverId', '\x0a-\x20**日记本的上一笔记录是在**:\x20', '星期一', 'cQGfc', 'html-module-container', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'lt-ui-cover-art', 'pOjNs', 'music-library-screen', 'inline-block', 'appIconPosition_app-wallpaper', 'data:', '交通出行', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'vWXcj', 'sender_id', 'copy', 'app-diary', 'calendar-screen', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'appIconPosition_', '\x0a\x0a#\x20关于读者“', 'vkYch', '.slot-filename', 'lyric-line-', '正在生成中，请稍候...', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'diary-modal-textarea', 'GrTXG', '#user-avatar-preview\x20+\x20.avatar-frame', 'fQPjZ', 'gemini', 'ZPfTO', '最近没有动态记录。', 'char-edit-offline-bg-input', 'slice', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'EIhTD', '在你那乱七八糟的文本里没找到“歌名”！', 'transaction', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', 'shy', '确定要删除这笔记录吗？', 'speaker-ai', 'user-profile-list-container', 'backgroundPosition', 'query', '导出角色卡失败:', 'wOXaD', 'vWIUi', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'VUGxt', 'Zwmda', 'rqiGe', 'replace', '-preview', '确定要重新记录吗？当前的账单会被删除。', 'rbwtZ', 'sprite-adjust-button', 'tEMbT', '<div\x20class=\x22post-comments-container\x22>', 'activeListenSession', 'lastIndexOf', 'yFXxO', 'NjaiA', '\x20-\x20', '</div></div></div>', 'accounting-title', 'translateX(-', 'getMonth', '15%', '\x0a\x0a#\x20', 'ZMTYp', 'ltcPj', '兼容模式成功，已将\x20', '-\x20**你最后一次活动是在**:\x20', 'group-avatar-preview', 'loOVh', 'currentDate', 'lVkYO', 'music-library-item', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', 'active', 'match', 'JiBid', 'characterName', 'iJLTh', '找不到角色。', 'SKSeX', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'snoop-phone-header', '.remove-attachment-btn', 'Dduuk', 'hHXUQ', 'QXAVi', '4171092FbQMlw', 'abyss', 'tGbCG', '\x20//\x20<--\x20哼，加在这里\x0a', 'scrollHeight', '导入失败了，笨蛋:\x20', 'DgYzW', 'char_sprite_normal_', 'YVVeH', 'TnNOH', 'add-event-backdrop', 'Noir_Backup_', 'wallpaper', ',\x20ID:\x20', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', '[用户向\x20', 'LmdPc', 'user-avatar-frame-url', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'YDujX', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', 'hwJsS', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'jYjJv', 'choice-create-group', '\x0a#\x20你的个性（节选）\x0a', 'today-btn', 'odPlT', '<br>', 'osJng', 'lSCco', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'accounting', 'FFldT', '#meeting-view-screen\x20.chat-input-area', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', 'card-widget', 'transfer', 'UZbtT', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'add-event-modal', '名字不能为空！', '休闲娱乐', '541685fUGaZH', 'UZbFm', 'ePyNU', 'jxDQf', 'fOGWa', '\x0a\x0a#\x20用户资料库\x0a', 'music-share-card', 'dNNWF', 'app-wallpaper', 'group-world-book-checkboxes', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'yRZxg', '15px\x2020px', '未知商店', 'Zlltm', '.lt-end-session-btn', 'song_', 'images', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x20张旧封面。应用即将刷新。', 'onload', '未知用户', 'jGtHc', 'TuLAM', 'line', 'galgame-text', 'currentTime', 'meeting-main-content', 'expense-amount', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', 'getMinutes', 'reset-widgets-position-button', 'amount', 'user-profile-edit-title', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', 'thought', 'choices', 'preview-item', 'RrTtO', '\x22\x20data-id=\x22', '[用户发送了表情：', 'lt-ui-song-title', 'QNmwc', 'paused', 'high', 'KLQvk', 'New\x20request\x20started', '---\x20音乐净化仪式完成\x20---', 'pKALh', 'add-friend-circle-button', '星期二', '很好哦', '未找到可用模型。', 'nZMEO', 'IDYNV', 'psXGc', 'characterLastScripts', 'snoop-app-view-container', 'eSCMw', 'ZINFH', 'friend-circle-title', '切换聊天时发生异步错误:', '\x0a#\x20关于你\x20(', '刷我的卡', 'IrnDJ', 'max', 'user_', 'world-book-item', 'image', '全量导出失败:', 'organize-bill-button', 'XdDsX', 'hCkzt', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'wVwFr']; _0x7dde = function () { return _0x416929; }; return _0x7dde(); } async function _0x15e0c2(_0x5e01c0) { const _0x1bb9fb = await _0x1b5ec1; return new Promise((_0x45dac4, _0xbd1d12) => { const _0x225ae1 = _0xe792; if ('Eigjw' !== _0x225ae1(0xb32)) { const _0xd1341c = _0x1bb9fb[_0x225ae1(0xa28)](_0x4b1f4a, _0x225ae1(0x9a1)), _0x494123 = _0xd1341c['objectStore'](_0x4b1f4a), _0x3e2958 = _0x494123['get'](_0x5e01c0); _0x3e2958['onsuccess'] = () => _0x45dac4(_0x3e2958[_0x225ae1(0x78a)] ? _0x3e2958[_0x225ae1(0x78a)][_0x225ae1(0xb57)] : null), _0x3e2958[_0x225ae1(0x33c)] = () => _0xbd1d12(_0x3e2958[_0x225ae1(0x7a4)]); } else { const _0x252dde = _0x310013(_0x135c1[_0x225ae1(0x47e)] ?? _0x5d73e8[_0x225ae1(0x3c5)] ?? '')[_0x225ae1(0x1c8)]() || '[sticker:' + (_0x462aec || _0x225ae1(0x70c)) + ']'; if (_0x252dde) _0x3ccf00[_0x225ae1(0x3d7)][_0x225ae1(0x238)]({ 'senderId': _0x421048['id'], 'kind': _0x225ae1(0x3c5), 'content': _0x252dde }); } }); } async function _0xfb4785(_0x4fc3d1) { const _0x4bb897 = await _0x1b5ec1; return new Promise((_0x136112, _0x32352c) => { const _0x19e30a = _0xe792, _0x4f755f = _0x4bb897[_0x19e30a(0xa28)](_0x1988c4, _0x19e30a(0x9a1)), _0x3cf9e6 = _0x4f755f['objectStore'](_0x1988c4), _0x7beaca = _0x3cf9e6[_0x19e30a(0xb3d)](_0x4fc3d1); _0x7beaca[_0x19e30a(0x731)] = () => _0x136112(_0x7beaca[_0x19e30a(0x78a)] ? _0x7beaca[_0x19e30a(0x78a)][_0x19e30a(0x58a)] : null), _0x7beaca[_0x19e30a(0x33c)] = () => _0x32352c(_0x7beaca['error']); }); } async function _0x5c1bef(_0x4182a9, _0x59fab6) { const _0x506987 = await _0x1b5ec1; return new Promise((_0x4b6e73, _0x3d0345) => { const _0xa2ef7e = _0xe792; if ('wPyZu' !== 'wPyZu') _0x437479 = _0x1ed9f4[_0xa2ef7e(0x468)](_0x1b29a5); else { const _0x256023 = _0x506987[_0xa2ef7e(0xa28)](_0x1988c4, _0xa2ef7e(0x4bc)), _0x1a7cd7 = _0x256023[_0xa2ef7e(0x7f3)](_0x1988c4), _0x47df55 = _0x1a7cd7[_0xa2ef7e(0x52a)]({ 'id': _0x4182a9, 'data': _0x59fab6 }); _0x47df55[_0xa2ef7e(0x731)] = () => _0x4b6e73(), _0x47df55[_0xa2ef7e(0x33c)] = () => _0x3d0345(_0x47df55[_0xa2ef7e(0x7a4)]); } }); } async function _0x1fa3ca(_0xc231ae) { const _0x38bf9b = await _0x1b5ec1; return new Promise((_0xd434e4, _0x1a6137) => { const _0x17bb7d = _0xe792; if (_0x17bb7d(0x4c9) !== _0x17bb7d(0x4c9)) { const _0x3b383d = _0x455741['parse'](_0x2ca437); _0x558fd1['isArray'](_0x3b383d) && (_0xf41a0d = _0x3b383d[_0x17bb7d(0x8be)](_0x224a1f => _0x224a1f && typeof _0x224a1f === _0x17bb7d(0x767) && typeof _0x224a1f[_0x17bb7d(0x664)] === _0x17bb7d(0x267) && typeof _0x224a1f[_0x17bb7d(0x47e)] !== _0x17bb7d(0x378))); } else { const _0x1815c7 = _0x38bf9b[_0x17bb7d(0xa28)](_0x1988c4, _0x17bb7d(0x4bc)), _0x4439a8 = _0x1815c7[_0x17bb7d(0x7f3)](_0x1988c4), _0x13beee = _0x4439a8['delete'](_0xc231ae); _0x13beee[_0x17bb7d(0x731)] = () => _0xd434e4(), _0x13beee[_0x17bb7d(0x33c)] = () => _0x1a6137(_0x13beee[_0x17bb7d(0x7a4)]); } }); } async function _0x5a0c6c(_0xba9862, _0x5c9db4) { const _0x2d05bc = await _0x1b5ec1; return new Promise((_0x3537ec, _0x5a8040) => { const _0x10a541 = _0xe792, _0x3c9a07 = _0x2d05bc['transaction'](_0x4b1f4a, _0x10a541(0x4bc)), _0x4b2796 = _0x3c9a07[_0x10a541(0x7f3)](_0x4b1f4a), _0x1a68fd = _0x4b2796[_0x10a541(0x52a)]({ 'id': _0xba9862, 'blob': _0x5c9db4 }); _0x1a68fd[_0x10a541(0x731)] = () => _0x3537ec(_0x1a68fd['result']), _0x1a68fd[_0x10a541(0x33c)] = () => _0x5a8040(_0x1a68fd[_0x10a541(0x7a4)]); }); } async function _0xbc8e1e(_0x1019f5) { const _0x44f55d = await _0x1b5ec1; return new Promise((_0x226374, _0x1d42b4) => { const _0x27db45 = _0xe792; if (_0x27db45(0x918) !== 'cQsbK') _0x501e0f[_0x27db45(0x170)](_0x5602be => { const _0x1b6a8a = _0x27db45, _0x29084d = _0x4d8f68[_0x1b6a8a(0x95f)](_0x1b6a8a(0x754)); _0x29084d['className'] = _0x1b6a8a(0x49c), _0x29084d[_0x1b6a8a(0x8e3)] = _0x5602be['content'], _0x341810[_0x1b6a8a(0x962)](_0x29084d); }); else { const _0x2ef8b2 = _0x44f55d['transaction'](_0x4b1f4a, 'readwrite'), _0x4a0a8a = _0x2ef8b2[_0x27db45(0x7f3)](_0x4b1f4a), _0x40ae2e = _0x4a0a8a[_0x27db45(0x485)](_0x1019f5); _0x40ae2e['onsuccess'] = () => _0x226374(), _0x40ae2e['onerror'] = () => _0x1d42b4(_0x40ae2e['error']); } }); } function _0x34bb22(_0x1296df) { const _0x2897e8 = _0x481b43; return fetch(_0x1296df)['then'](_0x15127b => _0x15127b[_0x2897e8(0xb57)]()); }

  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
