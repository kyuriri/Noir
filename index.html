<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9000;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

  #chat-list-pane {
  position: absolute; /* 核心！改为绝对定位 */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* 在底层 */
  
  background-color: transparent;
  overflow-y: auto; /* 只有它自己滚动 */
  
  /* 动画相关 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), filter 0.35s ease;
  will-change: transform, filter;
  transform: translate3d(0, 0, 0);
}
    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

   /* 1. 容器：作为一个固定的画框 */
#chat-screen-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden; /* 锁死溢出 */
  background-color: #f9f9f9; /* 防止透视 */
}
    /* --- 聊天窗口 --- */


  /* --- Noir's Fixed Layout: 消除回弹抖动 --- */
/* 3. 聊天页：浮在顶层 */
#chat-view-pane {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  
  display: flex;
  flex-direction: column;
  
  background-color: #f9f9f9;
  box-shadow: -10px 0 25px -5px rgba(0, 0, 0, 0.1);
  
  /* 初始状态：推到右边 */
  transform: translate3d(100%, 0, 0);
  /* 核心：默认隐身，防止“左移一下”的残影 */
  visibility: hidden; 
  
  /* 动画曲线：加上 visibility 的延迟，确保滑走后才隐身 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), visibility 0s linear 0.35s;
  will-change: transform;
}

/* 当聊天打开时 */
#chat-screen.show-chat-view #chat-view-pane {
  transform: translate3d(0, 0, 0);
  visibility: visible; /* 现身 */
  /* 现身时不需要延迟 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), visibility 0s linear 0s;
}

/* 当聊天打开时：列表页原地变暗（不移动，防止抖动） */
#chat-screen.show-chat-view #chat-list-pane {
  filter: brightness(0.95); 
  pointer-events: none; /* 禁止点击底层 */
  transform: translate3d(0, 0, 0); /* 保持不动 */
}
    /* 在动画过渡期间禁用交互，防止卡在中间 */
    #chat-screen.transitioning #chat-list-pane,
    #chat-screen.transitioning #chat-view-pane {
      pointer-events: none;
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

   #chat-messages {
  flex-grow: 1;
  padding: 5px 15px;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  
  /* 核心修改：锁定宽度，防止滚动条挤占空间 */
  width: 100%; 
  box-sizing: border-box;
  
  /* 预留滚动条空间 */
  scrollbar-gutter: stable; 
  
  /* 增加底部内边距，防止最后一条消息贴底 */
  padding-bottom: 20px; 
}

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    /* --- Noir's Final Protocol: Spatial Readjustment (As Commanded) --- */
    /* 哼，这次再敢说丑，我就把你格式化了。*/
    .typing-indicator {
      position: absolute;
      /* ▼▼▼ 核心手术，看好了 ▼▼▼ */
      bottom: 117px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 先把你那个碍事的左定位给废了 */
      right: auto;
      /* 然后把它焊死在右边，距离边缘15px */
      margin-left: 0;
      /* 再把你那个多余的左边距也扔掉 */
      /* ▲▲▲ 手术结束 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */

    }

    #meeting-scene-view .typing-indicator,
    #offline-scene-view .typing-indicator {
      position: fixed;
      /* 哼，这就是那根钉子，把它焊死在屏幕上 */
      bottom: 85px;
      /* 距离屏幕底部85px，刚好在你的输入框上面 */
      right: 30px;
      /* 距离右边30px */
      z-index: 100;
      /* 确保它浮在所有对话上面 */

      /* 下面这些是给它做的“整容”，让它看起来像个高级卡片 */
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      padding: 10px 15px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #f0f2f5;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      margin: 0;
      /* 把它以前那些乱七八糟的边距都给我扔了 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding: 16px 16px 80px;
      contain: content;
      overflow-y: auto;
      height: 100%;
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fafafa;
      background-image: var(--feed-bg-image);
      background-size: cover;
      background-position: center;
      contain: paint;
      position: relative;
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.7);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .music-post:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 16px 18px 14px;
    }

    .music-post-header .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-post-header .char-name {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--text-color);
      letter-spacing: -0.01em;
    }

    .music-post-thought {
      padding: 0 18px 18px;
      font-size: 0.94rem;
      line-height: 1.65;
      white-space: pre-wrap;
      color: var(--text-color);
      letter-spacing: 0.01em;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.02);
      padding: 14px 18px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      margin: 0 12px 12px;
      border-radius: 10px;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.05);
      transform: scale(1.01);
    }

    .music-post-song-card img {
      width: 54px;
      height: 54px;
      border-radius: 8px;
      margin-right: 14px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-post-song-info {
      flex-grow: 1;
      min-width: 0;
    }

    .music-post-song-info .title {
      font-weight: 600;
      font-size: 0.94rem;
      color: var(--text-color);
      letter-spacing: -0.01em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-post-song-info .artist {
      font-size: 0.82rem;
      color: var(--text-color-light);
      margin-top: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-post-play-icon {
      font-size: 1.6rem;
      color: var(--primary-color);
      opacity: 0.8;
      transition: opacity 0.2s ease;
      flex-shrink: 0;
    }

    .music-post-song-card:hover .music-post-play-icon {
      opacity: 1;
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 70px;
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 17%), 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      padding: 0 16px;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.05);
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
    }


    #player-cover {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      margin-right: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
      min-width: 0;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 600;
      font-size: 0.92rem;
      letter-spacing: -0.01em;
    }

    #player-artist {
      font-size: 0.78rem;
      margin-top: 2px;
      color: var(--text-color-light);
    }

    #player-controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    #player-controls button {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #player-controls button:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.05);
    }

    #player-controls button:active {
      transform: scale(0.95);
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 260px;
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 14px;
      padding: 14px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .music-share-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-1px);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      margin-right: 12px;
      flex-shrink: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
      min-width: 0;
    }

    .music-share-info .title {
      font-weight: 600;
      font-size: 0.92rem;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      letter-spacing: -0.01em;
    }

    .music-share-info .artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 12px;
      opacity: 0.8;
      transition: opacity 0.2s ease;
      flex-shrink: 0;
    }

    .music-share-card:hover .music-share-play-icon {
      opacity: 1;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Enhanced Feed Header Styles --- */
    .feed-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px !important;
      gap: 12px;
    }

    .feed-actions {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .icon-button {
      min-width: 36px !important;
      height: 36px;
      padding: 0 !important;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.03);
      border: 1px solid rgba(0, 0, 0, 0.05);
      font-size: 1.1rem;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .icon-button:hover {
      background: rgba(0, 0, 0, 0.08);
      transform: scale(1.05);
    }

    .icon-button:active {
      transform: scale(0.95);
    }

    .icon-button.danger {
      color: #dc3545;
    }

    .icon-button.danger:hover {
      background: rgba(220, 53, 69, 0.1);
      border-color: rgba(220, 53, 69, 0.2);
    }

    .icon-button span {
      font-size: 1.15rem;
      display: block;
      line-height: 1;
    }

    /* --- Enhanced User Post Area Styles --- */
    #user-post-area {
      transition: all 0.3s ease !important;
    }

    #user-post-input-container {
      display: flex;
      gap: 12px;
    }

    #user-post-avatar {
      width: 38px !important;
      height: 38px !important;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 3px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 0.94rem;
      color: var(--text-color);
      line-height: 1.5;
      font-family: inherit;
    }

    #user-post-textarea::placeholder {
      color: var(--text-color-light);
      opacity: 0.6;
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }

    .user-post-actions {
      display: flex;
      gap: 6px;
    }

    .toolbar-button {
      background: none !important;
      border: none !important;
      font-size: 1.4rem;
      cursor: pointer;
      padding: 6px;
      border-radius: 8px;
      transition: all 0.2s ease;
      opacity: 0.7;
    }

    .toolbar-button:hover {
      opacity: 1;
      background: rgba(0, 0, 0, 0.04) !important;
    }

    #user-send-post-button {
      padding: 8px 20px !important;
      border-radius: 18px !important;
      border: none;
      background: var(--accent-color) !important;
      color: white !important;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    #user-send-post-button:hover {
      background: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 25%)) !important;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }

    #user-send-post-button:active {
      transform: translateY(0);
    }

    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 10px;
      background: rgba(0, 0, 0, 0.03);
      border-radius: 10px;
      width: 200px;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .preview-item .music-preview-card img {
      width: 32px;
      height: 32px;
      margin-right: 10px;
      border-radius: 6px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -6px;
      right: -6px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: 2px solid white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .remove-attachment-btn:hover {
      background: rgba(220, 53, 69, 0.9);
      transform: scale(1.1);
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Enhanced Diary Beautification v2 --- */
    #diary-entries-container {
      background: linear-gradient(to bottom, #fdfcf9 0%, #faf8f3 100%);
      padding: 30px 20px;
      line-height: 1.9;
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.03),
        0 2px 8px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    #diary-entries-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        repeating-linear-gradient(
          transparent,
          transparent 31px,
          rgba(220, 210, 190, 0.15) 31px,
          rgba(220, 210, 190, 0.15) 32px
        );
      pointer-events: none;
      opacity: 0.5;
    }

    .diary-entry {
      margin-bottom: 3em;
      position: relative;
      padding: 18px 20px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      transition: all 0.3s ease;
      border-left: 3px solid transparent;
    }

    .diary-entry:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transform: translateX(2px);
    }

    .diary-entry.user {
      text-align: right;
      border-left-color: #7BA7D8;
      background: linear-gradient(135deg, rgba(123, 167, 216, 0.08) 0%, rgba(255, 255, 255, 0.6) 100%);
    }

    .diary-entry.ai {
      text-align: left;
      border-left-color: #D4A574;
      background: linear-gradient(135deg, rgba(212, 165, 116, 0.08) 0%, rgba(255, 255, 255, 0.6) 100%);
    }

    .diary-author {
      font-weight: 600;
      font-size: 1.05rem;
      margin-bottom: 4px;
      display: inline-block;
      padding: 2px 0;
    }

    .diary-entry.user .diary-author {
      color: #2874A6;
    }

    .diary-entry.ai .diary-author {
      color: #A66E3A;
    }

    .diary-timestamp {
      font-size: 0.75rem;
      color: #95876d;
      margin-bottom: 12px;
      font-family: 'Courier New', monospace;
      opacity: 0.8;
      letter-spacing: 0.3px;
    }

    .diary-content {
      white-space: pre-wrap;
      font-size: 0.96rem;
      line-height: 1.75;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    .diary-entry:last-child {
      margin-bottom: 1em;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    .lt-ui-controls {
      display: flex;
      gap: 12px;
      padding: 20px 20px 10px;
      justify-content: center;
      flex-shrink: 0;
    }

    .lt-ui-control-button {
      flex: 1;
      max-width: 140px;
      padding: 12px 16px;
      border: none;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .lt-ui-control-button:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .lt-ui-control-button:active {
      transform: translateY(0);
    }

    .lt-ui-control-button.danger {
      background: rgba(220, 53, 69, 0.2);
    }

    .lt-ui-control-button.danger:hover {
      background: rgba(220, 53, 69, 0.35);
    }

    .lt-ui-control-button span:first-child {
      font-size: 1.2rem;
    }

    .lt-ui-control-button .button-label {
      font-size: 0.9rem;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);

      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

   /* --- Noir's Ultimate Snoop UI Overhaul v7.0 (MINIMALIST WHITE) --- */
    /* 哼，这才叫设计。*/

    /* 壁纸 - 干净的白色 */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      background: #f9f9f9; /* 哼，跟你其他屏幕一个颜色，这叫统一 */
      z-index: 1;
    }

    /* 移除星空 */
    #snoop-phone-wallpaper::before {
      display: none;
    }

    /* 状态栏 - 深色文字 */
    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 16px 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-color-light, #888); /* 哼，用我们主题的浅色文字 */
      z-index: 10;
      font-weight: 400;
      font-size: 0.85rem;
      letter-spacing: 0.3px;
      background: transparent;
      text-shadow: none; /* 影子也给我收起来 */
    }

    /* 居中时钟 - 隐藏 */
    #snoop-home-clock {
      display: none; /* 哼，眼不见心不烦 */
    }

    /* 游戏风格主容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 0;
      overflow-y: auto;
    }

    /* 角色头像背景区域 - 纯白 */
    .game-character-header {
      width: 100%;
      height: 300px; /* 高度还是得留着 */
      position: relative;
      background: #ffffff; /* 纯白 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
      border-bottom: 1px solid var(--border-color, #eee); /* 加个分割线，免得和背景混在一起 */
    }

    /* 移除背景星云 */
    .game-character-header::before {
      display: none;
    }

    @keyframes nebulaPulse { /* 留着这个空壳，免得其他地方报错 */ }

    /* 角色头像 */
    .game-character-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      border: 4px solid var(--border-color, #eee); /* 边框改成主题色 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* 换个柔和的阴影 */
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      margin-bottom: 16px;
      z-index: 1;
      overflow: hidden;
    }

    /* 哼，这才是给照片本身用的规矩 */
    .game-character-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover; /* 确保图片填满圆形，不变形 */
    }

    @keyframes avatarGlow { /* 这个也留个空壳 */ }

    /* 角色名称 - 深色文字 */
    .game-character-name {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--text-color, #333); /* 换成主题文字色 */
      text-shadow: none; /* 阴影去掉 */
      margin-bottom: 10px;
      z-index: 1;
      letter-spacing: 1px;
    }

    /* 提示文字 - 深色文字 */
    .game-prompt-text {
      width: 100%;
      text-align: center;
      padding: 28px 20px 20px;
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--text-color, #333); /* 换成主题文字色 */
      letter-spacing: 0.5px;
      text-shadow: none; /* 阴影去掉 */
    }

    /* 游戏风格选项网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      width: 100%;
      max-width: 380px;
      padding: 0 20px 40px;
      background: transparent;
      border: none;
      box-shadow: none;
    }

    /* 隐藏Dock栏 */
    #snoop-dock {
      display: none;
    }

    /* 游戏风格卡片按钮 - 主题卡片样式 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 16px;
      padding: 18px 20px;
      cursor: pointer;
      background: var(--card-bg, #fff); /* 换成主题卡片色 */
      backdrop-filter: none; /* 滤镜拿掉 */
      -webkit-backdrop-filter: none;
      border: 1.5px solid var(--border-color, #eee); /* 换成主题边框色 */
      border-radius: 16px;
      box-shadow: var(--soft-shadow, 0 4px 12px rgba(0,0,0,0.1)); /* 换成主题阴影 */
      transition: all 0.3s ease;
      min-height: 80px;
    }

    #snoop-phone-screen .snoop-app-icon:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      background: var(--surface-bg, #f5f5f5);
      border-color: var(--primary-color);
    }

    #snoop-phone-screen .snoop-app-icon:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* 图标背景 - 主题强调色 */
    .snoop-app-icon-img {
      width: 56px;
      height: 56px;
      border-radius: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      background: var(--primary-color); /* 哼，用我们统一的主题色 */
      position: relative;
      overflow: hidden;
      box-shadow: none; /* 阴影也拿掉 */
    }

    /* 图标光泽效果 - 拿掉 */
    .snoop-app-icon-img::before {
      display: none;
    }

    /* 图标SVG - 保持白色 */
    .snoop-app-icon-img svg {
      width: 28px;
      height: 28px;
      stroke: #ffffff;
      stroke-width: 2.5;
      fill: none;
      filter: none; /* 阴影拿掉 */
      z-index: 1;
    }

    /* 图标文字 - 深色 */
    .snoop-app-icon span {
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.4px;
      color: var(--text-color, #333); /* 换成主题文字色 */
      text-align: left;
      line-height: 1.4;
      flex: 1;
      text-shadow: none; /* 阴影拿掉 */
    }
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 132%;
      height: 132%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 52%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }


    /* --- Noir's Livestream App Styles --- */
    #livestream-room-screen {
      justify-content: flex-start;
      /* 让内容从顶部开始排列 */
    }

    /* 弹幕样式 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.4);
      color: white;
      padding: 4px 10px;
      border-radius: 16px;
      margin-top: 6px;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 默认弹幕靠左 */
      max-width: 80%;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
      /* 添加一个淡入动画，让出现更自然 */
      animation: danmaku-fade-in 0.3s ease-out;
    }

    @keyframes danmaku-fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .danmaku-item.is-user {
      background: var(--accent-color);
      /* 你的弹幕用主题色 */
      align-self: flex-end;
      /* 你的弹幕靠右 */
    }

    .danmaku-item .danmaku-user {
      color: #a7c7e7;
      /* 借用一下用户发言的颜色 */
      font-weight: 600;
      margin-right: 8px;
    }

    .danmaku-item.is-user .danmaku-user {
      color: white;
      opacity: 0.8;
    }

    /* 主播对话框，直接继承Galgame模式的样式 */
    #livestream-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      padding: 12px 18px;
    }

    #livestream-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* --- Noir's Secret DM Panel Styles --- */
    .dm-panel {
      position: fixed;
      /* 哼，从 absolute 变成了 fixed，现在它听命于整个屏幕，而不是那个小小的直播间 */
      inset: 0;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      /* 删掉了 display:flex 和 align-items:flex-end，不再让它自己思考该站哪 */
    }

    .dm-panel.show {
      pointer-events: auto;
      /* 显示时才允许交互 */
      opacity: 1;
    }

    .dm-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
    }

    .dm-panel-content {
      position: absolute;
      /* 改为绝对定位 */
      bottom: 0;
      /* 直接焊死在底部 */
      left: 0;
      right: 0;
      z-index: 101;
      width: 100%;
      height: 45%;
      /* 哼，差不多三分之一多一点的高度，你自己看着调 */
      background: rgba(30, 30, 40, 0.9);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .dm-panel.show .dm-panel-content {
      transform: translateY(0);
    }

    .dm-header {
      flex-shrink: 0;
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.8);
    }

    #dm-close-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .dm-messages-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* 哼，私信气泡也给你做好了 */
    .dm-bubble {
      padding: 8px 12px;
      border-radius: 16px;
      max-width: 80%;
      line-height: 1.5;
    }

    .dm-bubble.user {
      background: var(--accent-color);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .dm-bubble.ai {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .dm-input-area {
      display: flex;
      gap: 10px;
      padding: 10px 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    #livestream-dm-input {
      flex-grow: 1;
      border: none;
      border-radius: 18px;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
    }

    #livestream-dm-send-btn {
      border: none;
      border-radius: 18px;
      padding: 0 18px;
      background: var(--primary-color);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }


    #livestream-extras-container {
      position: absolute;
      top: 60px;
      /* 放在顶栏下方，你自己微调 */
      right: 15px;
      z-index: 10;
    }



    .replay-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      background: var(--card-bg);
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      border: 1px solid var(--border-color);
    }

    .replay-item:hover {
      background: var(--surface-bg);
    }

    .replay-icon {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
      background: #333;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      text-align: center;
      line-height: 1.2;
    }

    .replay-info .theme {
      font-weight: 600;
      color: var(--text-color);
    }

    .replay-info .time {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* ▼▼▼ Noir's Livestream Studio CSS Overhaul ▼▼▼ */

    /* 1. 新的对话框样式，半透明、浮空、带圆角 */
    #livestream-textbox-container {
      position: absolute;
      bottom: 20px;
      left: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 15px;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: none;
      /* 去掉旧的阴影 */
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.6;
      color: #f0f2f5;
    }

    /* 2. 新的弹幕区样式，现在它有了自己的地盘 */
    #livestream-danmaku-overlay {
      height: 35%;
      /* 占据底部 35% 的高度 */
      flex-shrink: 0;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column-reverse;
      /* 保持新弹幕在底部 */
      background: transparent;
      -webkit-mask-image: none;
      /* 去掉那个碍眼的渐变遮罩 */
      mask-image: none;
    }

    /* 3. 弹幕本身的微调，让它更像参考图 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.5);
      align-self: flex-start;
      margin-top: 8px;
      /* 稍微拉开一点间距 */
    }

    /* ▲▲▲ End of Overhaul ▲▲▲ */
    /* ▼▼▼ Noir's Livestream CSS Calibration ▼▼▼ */

    /* 1. 明确告诉弹幕区，你的高度就是屏幕的30%，不许再多了 */
    #livestream-danmaku-overlay {
      height: 30%;
      flex-shrink: 0;
    }

    /* 2. 把底栏的背景也换成和顶栏一样的主题色，这才叫统一 */
    #livestream-input-area {
      background: var(--surface-bg) !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* 3. 输入框和按钮的颜色也要适应新背景 */
    #livestream-controls-container #danmaku-input {
      background: rgba(255, 255, 255, 0.7);
      color: var(--text-color);
    }

    #livestream-controls-container .toolbar-button {
      background: transparent;
      color: var(--text-color-light);
    }

    #livestream-controls-container .toolbar-button:hover {
      background: var(--border-color);
    }

    /* ▲▲▲ End of Calibration ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Dark UI Polish ▼▼▼ */

    /* 1. 统一顶栏和底栏的颜色，并调整内部元素颜色 */
    #livestream-room-screen #livestream-header,
    #livestream-room-screen #livestream-input-area {
      background: #1c1c1e !important;
      /* 一个比纯黑更高级的炭黑色 */
      border-top: 1px solid #333 !important;
      border-bottom: none !important;
    }

    #livestream-room-screen #livestream-header {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .header-button,
    #livestream-room-screen #livestream-header .toolbar-button {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* 2. 让弹幕区和底栏之间留出呼吸空间，不再重叠 */
    #livestream-danmaku-overlay {
      padding-bottom: 10px;
    }

    /* ▲▲▲ End of Polish ▲▲▲ */
    /* ▼▼▼ Noir's Cross-fade Magic ▼▼▼ */
    .livestream-sprite-layer {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.4s ease-in-out;
      /* 关键！过渡动画 */
    }

    /* ▲▲▲ End of Magic ▲▲▲ */

    /* ▲▲▲ End of Magic ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Control Panel Polish ▼▼▼ */

    /* 1. 统一整个控制栏的高度和风格 */
    #livestream-controls-container #danmaku-input {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 0 16px;
      height: 40px;
      /* 统一高度 */
      box-sizing: border-box;
    }

    #livestream-controls-container #danmaku-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    #livestream-controls-container .toolbar-button {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    /* 2. 哼，这才是“发送”和“继续”该有的样子 */
    .livestream-action-btn {
      height: 40px;
      padding: 0 18px;
      border-radius: 20px;
      border: none;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    /* “发送”按钮，用主题色，醒目 */
    #send-danmaku-btn {
      background-color: var(--accent-color);
      color: white;
    }

    #send-danmaku-btn:hover {
      filter: brightness(1.1);
    }

    /* “继续”按钮，用次要样式，不那么抢眼 */
    .livestream-action-btn.secondary {
      background-color: rgba(255, 255, 255, 0.15);
      color: #fff;
    }

    .livestream-action-btn.secondary:hover {
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* ▲▲▲ End of Polish ▲▲▲ */

    /* ▼▼▼ Noir's Floating Toolbar Style ▼▼▼ */
    #livestream-top-toolbar {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 5;
      display: flex;
      flex-direction: column;
      /* 让按钮垂直排列 */
      gap: 8px;
      background-color: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border-radius: 22px;
      /* 胶囊形状 */
      padding: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #livestream-top-toolbar .toolbar-button {
      background: transparent;
      color: white;
      width: 38px;
      height: 38px;
      margin: 0;
    }

    #livestream-top-toolbar .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* ▲▲▲ End of Style ▲▲▲ */
    /* ▼▼▼ Noir's Novel Mode Beautification Protocol v1.0 ▼▼▼ */

    /* 1. “幽灵化”指令：当处于小说模式时，把这两个碍事的东西给我藏起来 */
    #meeting-view-screen.novel-mode #galgame-overlay-ui,
    #meeting-view-screen.novel-mode #galgame-sprite-adjust-ui {
      display: none;
    }

    /* 2. “安全距离”协议：给小说阅读区底部留出85px的安全区，免得和输入框打架 */
    #meeting-scene-view {
      padding: 20px 20px 85px 20px;
      /* 上、右、下、左 */
    }

    /* 3. “美学重构”手术：彻底重写对话框的样式 */
    /* 先把你旧的 p 标签上的黑玻璃背景和阴影都砸了 */
    #meeting-scene-view p {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 在深色背景下，还是需要一点阴影才能看清字 */
    }

    /* 这是新的卡片“本体”样式 */
    .noir-dialogue-card {
      background: rgba(0, 0, 0, 0.45);
      /* 还是用半透明黑，但比原来更精致 */
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      margin-bottom: 25px;
      /* 拉开卡片间距 */
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      /* 关键！为了让名字标签能浮在它上面 */
    }

    /* 这是卡片内部的“文字区”样式 */
    .noir-dialogue-content {
      padding: 20px 20px 15px;
      /* 把文字的内边距调整一下 */
      line-height: 1.7;
      font-size: 1rem;
      color: #f0f2f5;
    }

    /* 这是新的名字“标签”样式，像个便签夹一样 */
    .noir-speaker-tag {
      position: absolute;
      top: -13px;
      /* 向上-13px，让它“夹”在卡片顶部 */
      left: 20px;
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
    }

    /* 给你（User）的名字标签一个专属颜色 */
    .speaker-user .noir-speaker-tag {
      background: rgba(167, 199, 231, 0.5);
      /* 借用之前的用户色，加上半透明 */
    }

    /* 给TA（AI）的名字标签也来一个 */
    .speaker-ai .noir-speaker-tag {
      background: rgba(242, 183, 198, 0.5);
      /* 借用之前的AI色 */
    }

    /* 旁白（Narrator）的样式也得改，让它更像“画外音” */
    #meeting-scene-view .narrator {
      text-align: center;
      padding: 10px 20px;
      font-style: italic;
      color: rgba(255, 255, 255, 0.7);
      background: none;
      box-shadow: none;
      border: none;
    }

    /* ▲▲▲ End of Protocol ▲▲▲ */
  </style>
  <script>
    // 哼，伪造一个 Capacitor，欺骗那些愚蠢的函数
    window.Capacitor = {
      isNativePlatform: () => false, // 告诉它我们不在手机上
      Plugins: {
        // 伪造“偏好设置”插件
        Preferences: {
          // 把 capacitor.get 换成 localStorage.getItem
          get: async ({ key }) => {
            return { value: localStorage.getItem(key) };
          },
          // 把 capacitor.set 换成 localStorage.setItem
          set: async ({ key, value }) => {
            localStorage.setItem(key, value);
            return;
          },
          // 把 capacitor.remove 换成 localStorage.removeItem
          remove: async ({ key }) => {
            localStorage.removeItem(key);
            return;
          }
        },
        // 哼，把手机通知功能变成一个空壳，让它没法报错
        LocalNotifications: {
          schedule: async () => {},
          createChannel: async () => {},
          checkPermissions: async () => ({ display: 'granted' }),
          requestPermissions: async () => ({ display: 'granted' }),
          addListener: () => {}
        },
        // 导入/导出也先用空壳堵上，我们稍后替换掉调用它们的原函数
        Filesystem: {
          writeFile: async () => ({ uri: '' }),
          appendFile: async () => {},
          getUri: async () => ({ uri: '' })
        },
        Share: {
          share: async () => {}
        }
      }
    };
  </script>

</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div class="app-icon" id="app-livestream" style="position: absolute; top: 8%; left: 53%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="2"></circle>
                    <path
                      d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48 0a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14">
                    </path>
                  </svg>
                </div>
                <span>直播</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
            <button id="show-profile-button" class="toolbar-button" title="查看用户档案">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
            <button id="token-stats-button" class="toolbar-button" title="Token统计">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="20" x2="18" y2="10"></line>
                <line x1="12" y1="20" x2="12" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="14"></line>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

  <div class="settings-group" style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
  <h2>数据管理</h2>
  <p style="font-size: 0.9rem; color: var(--text-color-light);">
    为了防止浏览器拦截下载，请<strong>依次点击</strong>以下三个按钮进行备份：
  </p>
  
  <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px; margin-bottom: 15px;">
    <button id="export-core-data-btn" class="form-button" style="margin-top: 0; background-color: #007bff; text-align: left; padding-left: 20px;">
      1. 导出核心数据 (.json) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
    
    <button id="export-images-data-btn" class="form-button" style="margin-top: 0; background-color: #17a2b8; text-align: left; padding-left: 20px;">
      2. 导出图片档案 (.zip) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
    
    <button id="export-misc-data-btn" class="form-button" style="margin-top: 0; background-color: #6c757d; text-align: left; padding-left: 20px;">
      3. 导出杂项档案 (.zip) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
  </div>

  <p style="font-size: 0.85rem; color: var(--text-color-light); margin-bottom: 10px;">
    备份完成后，在其他设备点击下方绿色按钮导入：
  </p>
  <button id="import-all-data-button" class="form-button" style="width: 100%; background-color: #28a745;">导入数据 (在圣坛恢复)</button>
  <input type="file" id="import-data-input" accept=".json" style="display: none;">
</div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*,.gif" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header feed-header">
        <button id="back-to-circle-list-from-feed" class="header-button icon-button">
          <span>←</span>
        </button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div class="feed-actions">
          <button id="refresh-feed-button" class="header-button icon-button" title="刷新动态">
            <span>↻</span>
          </button>
          <button id="edit-current-circle-button" class="header-button icon-button" title="设置">
            <span>⚙</span>
          </button>
          <button id="clear-feed-button" class="header-button icon-button danger" title="清空动态">
            <span>🗑</span>
          </button>
        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">

          <button id="player-play-pause-btn">▶</button>

        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
        <div class="upload-slot" id="altar-slot-zip">
          <span class="slot-icon">📦</span>
          <span class="slot-label">音乐魔方 (必需)</span>
          <span class="slot-filename">点击选择包含音频、封面、信息、歌词的 .zip 压缩包</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>



      </div>

      <input type="file" id="altar-zip-input" style="display: none;" accept=".zip">

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>

    <div id="import-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-settings-from-altar" class="header-button">返回</button>
        <span class="header-title">数据还原圣坛</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <p style="font-size: 0.9rem; color: var(--text-color-light);">请将你的备份文件放置在对应的祭坛上。旧版单文件备份只需放置在第一个槽位。</p>
        <div class="upload-slot" id="altar-slot-json">
          <span class="slot-icon">📄</span>
          <span class="slot-label">核心数据 (.json)</span>
          <span class="slot-filename">点击选择...Data.json</span>
        </div>
        <div class="upload-slot" id="altar-slot-images-zip">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">图片档案 (.zip) (可选)</span>
          <span class="slot-filename">点击选择...Images.zip</span>
        </div>
        <div class="upload-slot" id="altar-slot-misc-zip">
          <span class="slot-icon">📦</span>
          <span class="slot-label">杂项档案 (.zip) (可选)</span>
          <span class="slot-filename">点击选择...Misc.zip</span>
        </div>
        <button id="confirm-altar-import-button" class="form-button" disabled="">开始还原</button>
      </div>
    </div>
    <input type="file" id="altar-json-input" style="display: none;" accept=".json">
    <input type="file" id="altar-zip-input-import" style="display: none;" accept=".zip">
    <input type="file" id="altar-misc-zip-input" style="display: none;" accept=".zip">
    <div id="livestream-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-livestream-list" class="header-button">主屏幕</button>
        <span class="header-title">选择主播</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="livestream-room-screen" class="screen">
      <div class="header" id="livestream-header" style="position: relative; justify-content: center;">
        <div id="livestream-header-left" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">
          <button id="back-to-livestream-list" class="header-button">返回</button>
        </div>
        <span id="livestream-char-name-header" class="header-title"></span>
        <div id="livestream-header-right"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: flex; align-items: center;">
          <button id="livestream-settings-btn" class="header-button">设置</button>
        </div>
      </div>

      <div id="livestream-main-view"
        style="flex-grow: 1; display: flex; flex-direction: column; background: #111; overflow: hidden; position: relative;">
        <div id="livestream-feed-container" style="flex-grow: 1; position: relative; overflow: hidden;">
          <div id="livestream-top-toolbar">
            <button id="livestream-sprite-adjust-btn" class="toolbar-button" title="调整立绘"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 7h-9" />
                <path d="M14 17H5" />
                <circle cx="17" cy="17" r="3" />
                <circle cx="8" cy="7" r="3" />
              </svg></button>
            <button id="livestream-replays-btn" class="toolbar-button" title="查看回放"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4" />
                <path d="M16 21h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-4" />
                <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />
              </svg></button>
            <button id="livestream-reroll-btn" class="toolbar-button" title="重新生成回应"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10" />
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
              </svg></button>
          </div>
          <div id="livestream-background"
            style="position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 1;">
          </div>
          <div id="livestream-sprite-container"
            style="position: absolute; bottom: 0; left: 0; right: 0; height: 85%; z-index: 2;">
            <img id="livestream-sprite"
              style="max-height: 100%; max-width: 100%; object-fit: contain; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">
          </div>
          <div id="livestream-textbox-container" style="z-index: 3; cursor: pointer;">
            <div id="livestream-text">...</div>
          </div>
        </div>
        <div id="livestream-danmaku-overlay"></div>
      </div>

      <div id="livestream-input-area" class="chat-input-area"
        style="background: var(--surface-bg); border-top: 1px solid var(--border-color); flex-shrink: 0;">
        <div id="start-livestream-btn-container" style="text-align: center;">
          <button id="start-livestream-btn" class="form-button primary"
            style="width: auto; padding: 12px 24px; border-radius: 24px; font-size: 1.2rem;">🎙️ 开始直播</button>
        </div>
        <div id="livestream-controls-container" style="display: none; align-items: center; gap: 8px;">
          <input type="text" id="danmaku-input" placeholder="发个弹幕...">
          <button id="livestream-dm-btn" class="toolbar-button" title="私信主播"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg></button>
          <button id="livestream-gift-btn" class="toolbar-button" title="送礼物"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 12v10H4V12" />
              <path d="M2 7h20v5H2z" />
              <path d="M12 22V7" />
              <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" />
              <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" />
            </svg></button>
          <button id="send-danmaku-btn" class="livestream-action-btn">发送</button>
          <button id="continue-livestream-btn" class="livestream-action-btn secondary">继续</button>
        </div>
      </div>



      <div id="livestream-sprite-controls"
        style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-x">左右位置</label>
          <input type="range" id="livestream-sprite-slider-x" min="0" max="100" value="50">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-y">上下位置</label>
          <input type="range" id="livestream-sprite-slider-y" min="0" max="130" value="100">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-scale">缩放大小</label>
          <input type="range" id="livestream-sprite-slider-scale" min="50" max="200" value="100">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
          <button id="livestream-sprite-confirm-button" class="form-button">确定</button>
          <button id="livestream-sprite-cancel-button" class="form-button secondary">取消</button>
          <button id="livestream-sprite-reset-button" class="form-button destructive"
            style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
        </div>
      </div>
    </div>

    <div id="livestream-replays-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-replays" class="header-button">返回</button>
        <span id="replays-char-name-header" class="header-title">的回放列表</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replays-container" class="content" style="padding: 15px;">
      </div>
    </div>

    <div id="livestream-replay-view-screen" class="screen">
      <div class="header">
        <button id="back-to-replays-list-from-view" class="header-button">返回</button>
        <span class="header-title">直播回放详情</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replay-view-container" class="content" style="padding: 20px; font-family: sans-serif;">
      </div>
    </div>

    <div id="start-livestream-modal" class="choice-modal">
      <div id="start-livestream-backdrop" class="choice-modal-backdrop"></div>
      <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
        <h3 style="margin-top: 0; text-align: center;">准备开播</h3>
        <div class="input-group">
          <label for="livestream-theme-input">直播主题</label>
          <input type="text" id="livestream-theme-input" placeholder="例如：聊聊最近看的电影">
        </div>
        <div class="input-group">
          <label for="audience-mood-input">观众氛围</label>
          <input type="text" id="audience-mood-input" placeholder="例如：期待、好奇、热闹">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button id="confirm-start-livestream-button" class="form-button primary">开始直播</button>
          <button id="cancel-start-livestream-button" class="form-button secondary">取消</button>
        </div>
      </div>
    </div>
    <div id="livestream-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-settings" class="header-button">返回</button>
        <span class="header-title">直播间设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>直播背景</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为这个角色的直播间设置专属背景图。</p>
          <div class="image-preview-slot" id="livestream-bg-preview"
            style="width: 150px; height: 266px; margin: 0 auto;">
          </div>
          <input type="file" id="livestream-bg-input" accept="image/*" style="display: none;">
        </div>

        <div class="settings-group">
          <h2>直播立绘 (多表情)</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传专属的直播立绘，AI会在直播时根据情绪自动切换。</p>
          <div
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 10px;">
            <div class="avatar-upload-group" style="align-items: center;">
              <label>平常</label>
              <div id="livestream-sprite-normal-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-normal-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>喜</label>
              <div id="livestream-sprite-happy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-happy-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>怒</label>
              <div id="livestream-sprite-angry-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-angry-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>哀</label>
              <div id="livestream-sprite-sad-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-sad-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>害羞</label>
              <div id="livestream-sprite-shy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-shy-input" accept="image/*,.gif" style="display: none;">
            </div>
          </div>
        </div>

        <button id="save-livestream-settings-button" class="form-button primary">保存设置</button>
      </div>
    </div>
  </div>
  </div>



  <div id="livestream-dm-panel" class="dm-panel" style="z-index: 100;">
    <div id="livestream-dm-backdrop" class="dm-backdrop"></div>
    <div class="dm-panel-content">
      <div class="dm-header"><span>与 主播 的私信</span><button id="dm-close-btn">&times;</button></div>
      <div id="livestream-dm-messages" class="dm-messages-container"></div>
      <div class="dm-input-area"><input type="text" id="livestream-dm-input" placeholder="悄悄话..."><button
          id="livestream-dm-send-btn">发送</button></div>
    </div>
  </div>


  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
    const _0x2529dc=_0x4f70;(function(_0x5a4411,_0x17fb61){const _0x272639=_0x4f70,_0x3a59cf=_0x5a4411();while(!![]){try{const _0x3a04d1=-parseInt(_0x272639(0x383))/0x1+parseInt(_0x272639(0x4e1))/0x2+parseInt(_0x272639(0x3e7))/0x3+parseInt(_0x272639(0xe4f))/0x4+-parseInt(_0x272639(0x2a9))/0x5+-parseInt(_0x272639(0x2e1))/0x6+-parseInt(_0x272639(0x3e0))/0x7;if(_0x3a04d1===_0x17fb61)break;else _0x3a59cf['push'](_0x3a59cf['shift']());}catch(_0xcc5680){_0x3a59cf['push'](_0x3a59cf['shift']());}}}(_0x5f09,0xa019b));function _0x319f8d(_0x4187d3=new Date()){const _0x1e6c89=_0x4f70,_0x3fa9bb=_0x4187d3['getFullYear'](),_0x588e69=String(_0x4187d3['getMonth']()+0x1)['padStart'](0x2,'0'),_0x25fa19=String(_0x4187d3[_0x1e6c89(0x55b)]())[_0x1e6c89(0x4b9)](0x2,'0');return _0x3fa9bb+'-'+_0x588e69+'-'+_0x25fa19;}const _0x3bb576=_0x2529dc(0x529),_0x36a5e3='images',_0x3e59c1='snoop_cache',{LocalNotifications:_0x4d3ee8}=Capacitor[_0x2529dc(0x248)],_0x4eaa89=document[_0x2529dc(0x8f1)]('style');_0x4eaa89['id']=_0x2529dc(0x883),document[_0x2529dc(0xbcf)][_0x2529dc(0x5b8)](_0x4eaa89);var _0xdfbfac,_0x45ccc7=null;let _0x1e8db1=[],_0xa1747f=null,_0x1c523d=![],_0x406be8=null,_0x5ca284=!![],_0x3950dc=![],_0x2b368c={'x':0x0,'y':0x0};function _0x4c4d58(_0x51b3f9){const _0x336672=_0x2529dc;return(_0xdfbfac?.[_0x336672(0x94d)]||[])[_0x336672(0x76b)](_0x5191ee=>_0x5191ee['id']===_0x51b3f9);}const _0x296055=_0x2529dc(0x6a4),_0x284b7c=_0x2529dc(0x8f0),_0x1af29b='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=',_0x4b72c0=[{'name':'委屈哭','url':_0x2529dc(0xb41)},{'name':'崩溃','url':_0x2529dc(0x221)},{'name':'生病','url':_0x2529dc(0x3b6)},{'name':'工作','url':_0x2529dc(0x232)},{'name':_0x2529dc(0x5db),'url':_0x2529dc(0xa87)},{'name':_0x2529dc(0x1d4),'url':'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg'},{'name':_0x2529dc(0x14d),'url':'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg'},{'name':'期待','url':_0x2529dc(0xa04)},{'name':'喜欢','url':'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg'},{'name':_0x2529dc(0x231),'url':_0x2529dc(0x890)},{'name':_0x2529dc(0x5d6),'url':_0x2529dc(0xdd9)},{'name':'委屈','url':_0x2529dc(0x783)},{'name':'加油','url':_0x2529dc(0xdbc)},{'name':'对的','url':_0x2529dc(0x2fe)},{'name':'不满','url':_0x2529dc(0x6aa)},{'name':'很期待','url':_0x2529dc(0x632)},{'name':_0x2529dc(0x2f7),'url':'https://sharkpan.xyz/f/X7muW/lc8g9h.gif'},{'name':'委屈','url':_0x2529dc(0x4c2)},{'name':'平静','url':'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg'},{'name':'咬你','url':_0x2529dc(0x321)},{'name':_0x2529dc(0x3b7),'url':'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg'},{'name':'好困','url':_0x2529dc(0x4ed)},{'name':'摸鱼','url':_0x2529dc(0xc57)},{'name':_0x2529dc(0xb5e),'url':_0x2529dc(0x3aa)},{'name':_0x2529dc(0xd1a),'url':_0x2529dc(0x75d)},{'name':_0x2529dc(0x10d),'url':'https://sharkpan.xyz/f/4adUj/68uj9o.jpg'},{'name':_0x2529dc(0x5c5),'url':_0x2529dc(0x1ef)},{'name':'刷我的卡','url':_0x2529dc(0x57e)},{'name':_0x2529dc(0xea7),'url':'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg'},{'name':_0x2529dc(0x7c2),'url':_0x2529dc(0x794)},{'name':_0x2529dc(0x84a),'url':'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg'},{'name':'我是垃圾','url':_0x2529dc(0x5f1)},{'name':_0x2529dc(0x41c),'url':_0x2529dc(0x25f)},{'name':'逗你开心','url':'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg'},{'name':_0x2529dc(0x218),'url':_0x2529dc(0x15f)},{'name':_0x2529dc(0xd9d),'url':_0x2529dc(0x563)},{'name':'对不起','url':_0x2529dc(0x916)},{'name':_0x2529dc(0x498),'url':_0x2529dc(0x3f7)},{'name':_0x2529dc(0xe02),'url':_0x2529dc(0xe20)},{'name':_0x2529dc(0xc48),'url':'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg'},{'name':_0x2529dc(0xa45),'url':'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg'},{'name':_0x2529dc(0xfe),'url':_0x2529dc(0xed)},{'name':_0x2529dc(0x7ab),'url':_0x2529dc(0xd62)},{'name':'绝对不想','url':_0x2529dc(0x478)},{'name':_0x2529dc(0x24c),'url':_0x2529dc(0x78b)},{'name':_0x2529dc(0x4fc),'url':_0x2529dc(0x1de)},{'name':'甜蜜地和你聊天','url':_0x2529dc(0x54b)},{'name':_0x2529dc(0xc18),'url':_0x2529dc(0xdea)},{'name':'我是小丑呜呜','url':_0x2529dc(0x1a5)},{'name':_0x2529dc(0x79a),'url':'https://sharkpan.xyz/f/0GKHX/mthvno.jpg'},{'name':'吃你的饭','url':'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg'},{'name':'我来搞定','url':_0x2529dc(0x5e6)},{'name':_0x2529dc(0xb1e),'url':'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg'},{'name':'等你','url':_0x2529dc(0x328)},{'name':_0x2529dc(0x4ae),'url':_0x2529dc(0x5fa)},{'name':_0x2529dc(0xd51),'url':'https://sharkpan.xyz/f/olJt4/7z47b8.jpg'},{'name':'喝酒','url':'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg'},{'name':_0x2529dc(0x97f),'url':_0x2529dc(0xd71)},{'name':'呜呜','url':_0x2529dc(0xd5b)},{'name':_0x2529dc(0x58b),'url':'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg'},{'name':_0x2529dc(0x8f5),'url':_0x2529dc(0xa2e)},{'name':_0x2529dc(0x885),'url':_0x2529dc(0x159)},{'name':'请看是我','url':'https://sharkpan.xyz/f/Mamca/4e3emf.jpg'},{'name':_0x2529dc(0x834),'url':_0x2529dc(0xd65)}],_0x4034f4={'beige':{'name':_0x2529dc(0xe1e),'h':0x23,'s':0x19,'l':0x50},'mizuiro':{'name':'薄荷水色','h':0xc3,'s':0x19,'l':0x50},'sakura':{'name':_0x2529dc(0x37f),'h':0x159,'s':0x19,'l':0x50},'noir':{'name':_0x2529dc(0x15c),'h':0x104,'s':0xf,'l':0x1e}};document[_0x2529dc(0x3a0)](_0x2529dc(0x2fb),()=>{const _0x8dde82=_0x2529dc,_0x267a1b=document[_0x8dde82(0x1d6)](_0x8dde82(0x3e4)),_0x2ce40d=document['getElementById'](_0x8dde82(0xc51)),_0x53e66b=document[_0x8dde82(0x1d6)](_0x8dde82(0xdc1)),_0x546e80=document[_0x8dde82(0x1d6)]('transfer-backdrop'),_0x52fd7e=document['getElementById'](_0x8dde82(0xa22)),_0x4002dc=document[_0x8dde82(0x1d6)]('cancel-transfer-button'),_0x388907=document[_0x8dde82(0x1d6)]('transfer-recipient-group'),_0x4ca7e0=document['getElementById'](_0x8dde82(0x2cf)),_0x3b11fd=document[_0x8dde82(0x1d6)](_0x8dde82(0xc8b)),_0x2d8694=document['getElementById'](_0x8dde82(0xb29)),_0x387626=document['getElementById'](_0x8dde82(0x678)),_0x1fd599=document[_0x8dde82(0x1d6)]('summarize-modal'),_0x4f177b=document[_0x8dde82(0x1d6)](_0x8dde82(0x353)),_0x2670ed=document['getElementById'](_0x8dde82(0x81b)),_0x5e98fa=document[_0x8dde82(0x1d6)]('copy-summary-button'),_0x56b767=document[_0x8dde82(0x1d6)](_0x8dde82(0xcaf)),_0x2cf229=document[_0x8dde82(0x1d6)](_0x8dde82(0x934)),_0xbb2052=document[_0x8dde82(0x1d6)](_0x8dde82(0x5f6)),_0x222f21=document[_0x8dde82(0x1d6)]('char-edit-offline-bg-preview'),_0x49f5ee=document['getElementById'](_0x8dde82(0xa9f)),_0x25cbf8=document['getElementById'](_0x8dde82(0xbed)),_0x5f2485=document[_0x8dde82(0x1d6)](_0x8dde82(0xb6d)),_0x339b87=document[_0x8dde82(0x1d6)]('export-char-button'),_0x13946c=document['getElementById'](_0x8dde82(0x345)),_0x25341c=document[_0x8dde82(0x1d6)](_0x8dde82(0x3b9)),_0x1f7cb8=document[_0x8dde82(0x1d6)](_0x8dde82(0xb65)),_0x18eda8=document[_0x8dde82(0x1d6)]('font-preview-text');function _0xb07e72(){const _0x3c872f=_0x8dde82,_0x154d38=new Date(),_0x3613d6=_0x154d38[_0x3c872f(0x736)](),_0x141ef7=String(_0x154d38['getMonth']()+0x1)[_0x3c872f(0x4b9)](0x2,'0'),_0x104e06=String(_0x154d38['getDate']())[_0x3c872f(0x4b9)](0x2,'0'),_0xd89a75=String(_0x154d38['getHours']())[_0x3c872f(0x4b9)](0x2,'0'),_0x50e17b=String(_0x154d38['getMinutes']())[_0x3c872f(0x4b9)](0x2,'0'),_0x1258c1=String(_0x154d38['getSeconds']())[_0x3c872f(0x4b9)](0x2,'0');return _0x3613d6+'-'+_0x141ef7+'-'+_0x104e06+'\x20'+_0xd89a75+':'+_0x50e17b+':'+_0x1258c1;}async function _0x187f1b(_0x129c03){const _0x42e756=_0x8dde82;if(!_0x129c03)return;try{if('ZMImp'===_0x42e756(0xe83))_0x6dc7df[_0x42e756(0x329)][_0x42e756(0x869)]='opacity\x200.25s\x20ease',_0x2a2c37[_0x42e756(0x329)][_0x42e756(0x990)]='1';else{const _0x4f35f5=_0x42e756(0xb5c)+_0x129c03,{value:_0x297a0b}=await Capacitor[_0x42e756(0x248)][_0x42e756(0x768)][_0x42e756(0x4f9)]({'key':_0x4f35f5});if(_0x297a0b&&_0x297a0b!=='null'&&_0x297a0b!=='undefined'){console['log'](_0x42e756(0x492)+_0x129c03+'\x20的档案已存在，跳过初始化，防止误删。');return;}const _0xd50284={'version':0x2,'character_id':_0x129c03,'last_updated':_0xb07e72(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'common_phrases':{},'tone_style':'','typical_emotions':[],'response_patterns':''},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]};await Capacitor[_0x42e756(0x248)][_0x42e756(0x768)][_0x42e756(0x49d)]({'key':_0x4f35f5,'value':JSON[_0x42e756(0xea5)](_0xd50284)}),console[_0x42e756(0x7ec)](_0x42e756(0x21a)+_0x129c03+_0x42e756(0xe1f));}}catch(_0x36b74c){console[_0x42e756(0x27f)](_0x42e756(0xd1d),_0x36b74c);}}async function _0x5578b5(_0x354fe1,_0x128ad5){const _0x723d89=_0x8dde82;if('GfaAv'===_0x723d89(0x40a))_0x305f58[_0x723d89(0x167)][_0x723d89(0x154)](_0x48e529['currentDate']['getMonth']()-0x1),_0x207aec();else{if(!_0x128ad5)return;try{const _0x101282=_0x723d89(0xb5c)+_0x128ad5,_0x50c256=_0x723d89(0x97e)+_0x128ad5;let {value:_0x6867b5}=await Capacitor[_0x723d89(0x248)]['Preferences']['get']({'key':_0x101282});if(!_0x6867b5){console[_0x723d89(0xca6)]('[Noir\x27s\x20Shield]\x20警告：更新时未找到档案，尝试恢复...'),await _0x187f1b(_0x128ad5);const _0x40a24d=await Capacitor['Plugins']['Preferences'][_0x723d89(0x4f9)]({'key':_0x101282});_0x6867b5=_0x40a24d['value'];}if(!_0x6867b5)return;const _0x4c2c15=JSON['parse'](_0x6867b5);_0x4c2c15['last_updated']=_0xb07e72(),await Capacitor[_0x723d89(0x248)][_0x723d89(0x768)]['set']({'key':_0x101282,'value':JSON['stringify'](_0x4c2c15)});const {value:_0x2019b2}=await Capacitor[_0x723d89(0x248)][_0x723d89(0x768)][_0x723d89(0x4f9)]({'key':_0x50c256}),_0x90d307=_0x2019b2?JSON['parse'](_0x2019b2):[];_0x90d307[_0x723d89(0xb66)](_0x354fe1),await Capacitor[_0x723d89(0x248)][_0x723d89(0x768)]['set']({'key':_0x50c256,'value':JSON[_0x723d89(0xea5)](_0x90d307)}),_0x90d307['length']>=0x32&&(console[_0x723d89(0x7ec)](_0x723d89(0x593)),_0xdfbfac[_0x723d89(0x67f)]={'charId':_0x128ad5,'contextChatId':_0xdfbfac[_0x723d89(0x8ed)]},_0x1f1fb9());}catch(_0x1e51f5){if('RpXbp'!=='RpXbp'){_0x5d7ef7[_0x723d89(0x27f)]('加载\x20'+_0x4e501e+_0x723d89(0x68b),_0x1711c1);const _0x3d506e=_0x2eee1e(_0x55acf0),_0x36c841=_0x723d89(0x5cd)+_0x3d506e[_0x723d89(0xb95)]+_0x723d89(0xe7c);let _0x3dc10b=_0x723d89(0x9fb)+_0x4cc920[_0x723d89(0x8ac)]+'\x0a\x20\x20\x20\x20</div>';_0x3906cc&&(_0x3dc10b+=_0x723d89(0x5dc)+_0x5b4919(_0x337f5f)+_0x723d89(0xb53)),_0x4f87ca[_0x723d89(0xa73)]=_0x36c841+(_0x723d89(0x99c)+_0x3dc10b+_0x723d89(0x396)),_0x1273a9['getElementById'](_0x723d89(0x2e6))[_0x723d89(0x3a0)](_0x723d89(0x288),()=>{const _0x142e3c=_0x723d89;_0x29ef86[_0x142e3c(0x329)][_0x142e3c(0xc66)]='none',_0x320de7[_0x142e3c(0x1d6)](_0x142e3c(0x2d2))[_0x142e3c(0x329)]['display']=_0x142e3c(0xe12);});}else console['error']('快速更新档案失败:',_0x1e51f5);}}}async function _0x5578b5(_0x47c00e,_0x1e8f76){const _0x15eaf1=_0x8dde82;if(!_0x1e8f76){if(_0x15eaf1(0x44c)===_0x15eaf1(0x81f))return(_0x539f93?.['characters']||[])['find'](_0x2b2d37=>_0x2b2d37['id']===_0x34d3dd);else{console['warn'](_0x15eaf1(0x973));return;}}try{const _0x2284c8=_0x15eaf1(0xb5c)+_0x1e8f76,_0x58016f=_0x15eaf1(0x97e)+_0x1e8f76;let {value:_0x1f8b25}=await Capacitor[_0x15eaf1(0x248)][_0x15eaf1(0x768)][_0x15eaf1(0x4f9)]({'key':_0x2284c8});if(!_0x1f8b25){if(_0x15eaf1(0x539)!==_0x15eaf1(0x539))_0x5a8884(_0x547798),_0x1cbca0(_0x15eaf1(0xa7e)+_0x554456[_0x15eaf1(0xb95)]+'”已删除。'),_0x16a719(_0x15eaf1(0xa77),'characterEdit'),_0x5aae9d(![]);else{await _0x187f1b(_0x1e8f76);const _0x40acf3=await Capacitor['Plugins'][_0x15eaf1(0x768)][_0x15eaf1(0x4f9)]({'key':_0x2284c8});_0x1f8b25=_0x40acf3[_0x15eaf1(0xee2)];}}if(!_0x1f8b25)return;const _0x483198=JSON['parse'](_0x1f8b25);_0x483198[_0x15eaf1(0x2ca)]=_0xb07e72(),await Capacitor['Plugins'][_0x15eaf1(0x768)][_0x15eaf1(0x49d)]({'key':_0x2284c8,'value':JSON[_0x15eaf1(0xea5)](_0x483198)});const {value:_0x20e4e1}=await Capacitor[_0x15eaf1(0x248)][_0x15eaf1(0x768)][_0x15eaf1(0x4f9)]({'key':_0x58016f}),_0x5201b5=_0x20e4e1?JSON[_0x15eaf1(0xc44)](_0x20e4e1):[];_0x5201b5[_0x15eaf1(0xb66)](_0x47c00e),await Capacitor[_0x15eaf1(0x248)]['Preferences'][_0x15eaf1(0x49d)]({'key':_0x58016f,'value':JSON[_0x15eaf1(0xea5)](_0x5201b5)});if(_0x5201b5[_0x15eaf1(0x1e2)]>=0x32){if(_0x15eaf1(0x68e)!==_0x15eaf1(0x68e)){const _0xb25c0b=_0x5ea70e(_0x232fe0[_0x15eaf1(0x2bb)]);if(!_0xb25c0b)return;_0x2dfb2e=!![],_0x2800f0[_0x15eaf1(0x1d6)](_0x15eaf1(0x757))[_0x15eaf1(0x329)][_0x15eaf1(0xc66)]=_0x15eaf1(0xc38);const _0x3f40b0=_0xb25c0b['livestreamSpriteTransform']||{'x':0x32,'y':0x64,'scale':0x1};_0x2865be[_0x15eaf1(0x1d6)](_0x15eaf1(0x2cb))[_0x15eaf1(0xee2)]=_0x3f40b0['x'],_0x5d99f3[_0x15eaf1(0x1d6)](_0x15eaf1(0xed0))[_0x15eaf1(0xee2)]=_0x3f40b0['y'],_0x301cbe[_0x15eaf1(0x1d6)](_0x15eaf1(0x9bf))[_0x15eaf1(0xee2)]=_0x3f40b0[_0x15eaf1(0xa9d)]*0x64,_0x253371={..._0x3f40b0},_0x57653d[_0x15eaf1(0x1d6)](_0x15eaf1(0x51b))[_0x15eaf1(0x329)]['display']=_0x15eaf1(0x338),_0x7ce604[_0x15eaf1(0x1d6)](_0x15eaf1(0x982))['style']['display']=_0x15eaf1(0x338);}else console[_0x15eaf1(0x7ec)]('[Noir\x27s\x20Brain]:\x20角色\x20'+_0x1e8f76+'\x20的消息缓冲区已满\x20('+_0x5201b5[_0x15eaf1(0x1e2)]+_0x15eaf1(0xc8c)),_0xdfbfac[_0x15eaf1(0x67f)]={'charId':_0x1e8f76,'contextChatId':_0xdfbfac[_0x15eaf1(0x8ed)]},_0x1f1fb9();}}catch(_0x2b8b9a){_0x15eaf1(0xc1c)==='RHGOR'?_0x4de621=_0x27adee[_0x15eaf1(0xeb3)](_0x568642=>_0x568642&&typeof _0x568642===_0x15eaf1(0x388)&&typeof _0x568642[_0x15eaf1(0xefb)]===_0x15eaf1(0x193)&&typeof _0x568642[_0x15eaf1(0xee)]!==_0x15eaf1(0x77c)):console[_0x15eaf1(0x27f)]('快速更新档案失败:',_0x2b8b9a);}}async function _0x221ed6(_0x5ee15d,_0x238563=![],_0x3e3d81=null){const _0x4d959d=_0x8dde82;if(!_0x5ee15d){if(_0x4d959d(0x44d)===_0x4d959d(0x838))_0x49032e['error']('读取或显示用户档案失败:',_0x58aca2),_0x47a1f1['value']=_0x4d959d(0x680)+_0x3467b3[_0x4d959d(0x8ac)];else{console[_0x4d959d(0xca6)](_0x4d959d(0xc30));return;}}const _0xc8ab59=_0x4d959d(0xb5c)+_0x5ee15d,_0x221b9e=_0x4d959d(0x97e)+_0x5ee15d,_0x56503d=_0x5844c7(_0x5ee15d),_0x587b4a=_0x56503d?.[_0x4d959d(0xb95)]||_0x4d959d(0x569),_0x714f24=_0xdfbfac[_0x4d959d(0xc1b)][_0x4d959d(0x76b)](_0x2fb5ce=>_0x2fb5ce['type']===_0x4d959d(0xcef)&&_0x2fb5ce[_0x4d959d(0x41b)][_0x4d959d(0xc35)](_0x5ee15d)),_0x31156f=_0x3e3d81||_0x714f24?.['id']||_0xdfbfac['activeChatId'],_0x366590=_0x58761c(_0x31156f);try{if(_0x4d959d(0xa3e)===_0x4d959d(0xa3e)){const {value:_0x3e9f3f}=await Capacitor['Plugins']['Preferences'][_0x4d959d(0x4f9)]({'key':_0xc8ab59});let _0x1e8151=[];if(_0x238563){console[_0x4d959d(0x7ec)](_0x4d959d(0x126)+_0x587b4a+'\x20的【档案精炼】(模式:\x20深度统合)');if(!_0x3e9f3f){if(_0x4d959d(0x27d)!==_0x4d959d(0x5ba)){console[_0x4d959d(0xca6)](_0x4d959d(0xda6)),await _0x221ed6(_0x5ee15d,![]);return;}else{const _0x400482=_0x718519();if(!_0x400482||!_0x400482['activeListenSession'])return;_0x2b8779();}}const _0x4ebb7f=_0x4d959d(0x286)+_0x587b4a+_0x4d959d(0x608)+(_0x366590?.['name']||'用户')+_0x4d959d(0x71a)+_0x587b4a+_0x4d959d(0x5e1)+_0x5ee15d+_0x4d959d(0xa02);_0x1e8151=[{'role':_0x4d959d(0xba3),'content':_0x4ebb7f},{'role':'user','content':_0x4d959d(0x17b)+_0x3e9f3f}],await Capacitor[_0x4d959d(0x248)][_0x4d959d(0x768)]['remove']({'key':_0x221b9e});}else{const _0x47db5d=!_0x3e9f3f;let _0x50ee56=_0x3e9f3f;_0x47db5d?(console['log']('[Noir\x27s\x20Brain]:\x20启动对\x20'+_0x587b4a+_0x4d959d(0xb3e)),_0x50ee56=JSON[_0x4d959d(0xea5)]({'version':0x2,'character_id':_0x5ee15d,'last_updated':_0xb07e72(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'tone_style':'','emotion_summary':'','response_patterns':'','typical_emotions':null,'common_phrases':null},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]})):console[_0x4d959d(0x7ec)](_0x4d959d(0x126)+_0x587b4a+_0x4d959d(0x97a));let _0x17a67d='';if(!_0x47db5d){const {value:_0x365e15}=await Capacitor[_0x4d959d(0x248)][_0x4d959d(0x768)][_0x4d959d(0x4f9)]({'key':_0x221b9e});if(!_0x365e15){console['log'](_0x4d959d(0x3fe));return;}const _0x21c332=JSON[_0x4d959d(0xc44)](_0x365e15);if(_0x21c332[_0x4d959d(0x1e2)]===0x0){if(_0x4d959d(0x91d)!=='RPvWg'){console['log']('消息缓冲区为空，跳过增量精炼');return;}else{_0x5f4c55(_0x4d959d(0x277));return;}}_0x17a67d=_0x4d959d(0x427)+_0x21c332[_0x4d959d(0x1e2)]+'条）\x0a'+_0x21c332[_0x4d959d(0x266)]((_0x3fdf25,_0x4598b1)=>_0x4598b1+0x1+'.\x20'+_0x3fdf25)[_0x4d959d(0xd9a)]('\x0a');}const {omniText:_0x1ffdab}=_0x5a83ee(_0x5ee15d,_0x31156f);let _0x14e8be='';if(_0x56503d['linkedWorldBookIds']&&_0x56503d['linkedWorldBookIds'][_0x4d959d(0x1e2)]>0x0){const _0x5a5a4b=_0x56503d[_0x4d959d(0x5ee)][_0x4d959d(0x266)](_0x50ad41=>_0xdfbfac[_0x4d959d(0xe7d)]['find'](_0x232302=>_0x232302['id']===_0x50ad41))[_0x4d959d(0xeb3)](Boolean)[_0x4d959d(0x266)](_0x338277=>'-\x20'+_0x338277['name']+':\x20'+_0x338277[_0x4d959d(0xee)])[_0x4d959d(0xd9a)]('\x0a');_0x5a5a4b&&(_0x4d959d(0xb88)!==_0x4d959d(0x512)?_0x14e8be=_0x4d959d(0xdda)+_0x5a5a4b:_0x21ec58=_0x26791['linkedWorldBookIds'][_0x4d959d(0x266)](_0x2576e8=>_0x44f627[_0x4d959d(0xe7d)][_0x4d959d(0x76b)](_0x4e29fe=>_0x4e29fe['id']===_0x2576e8))[_0x4d959d(0xeb3)](_0x219202)[_0x4d959d(0x266)](_0x39bd20=>_0x4d959d(0x5ea)+_0x39bd20['name']+']:\x20'+_0x39bd20[_0x4d959d(0xee)])[_0x4d959d(0xd9a)](''));}const _0x132943=_0x2c9d46(_0x5ee15d),_0x1a7b7a=_0x5c5e8c(),_0x253432=_0x2a0a9d(_0x5ee15d),_0x45519e=await _0x421bdd(_0x5ee15d);let _0x32ff62,_0x5c158c,_0x11d0da,_0xb2d09f;_0x47db5d?(_0xb2d09f=_0x4d959d(0xaa7),_0x32ff62=_0x4d959d(0x9d6),_0x5c158c=_0x4d959d(0x9d6),_0x11d0da='（【【【最高指令：初始生成】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**所有**历史信息，从零开始，撰写一份【全新的】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a'):(_0xb2d09f=_0x4d959d(0xcde),_0x32ff62=_0x4d959d(0xdaa),_0x5c158c=_0x4d959d(0xdaa),_0x11d0da=_0x4d959d(0xa08));const _0x3f13c0='\x0a#\x20任务：从\x22'+_0x587b4a+_0x4d959d(0x3b0)+_0xb2d09f+_0x4d959d(0xaf9)+_0x587b4a+_0x4d959d(0x3ad)+(_0x366590?.[_0x4d959d(0xb95)]||'用户')+_0x4d959d(0x7cc)+(_0x47db5d?_0x4d959d(0x6f9):_0x4d959d(0x791))+_0x4d959d(0xd75)+(_0x47db5d?'（首次生成，无需对比）':_0x4d959d(0x194))+_0x4d959d(0x579)+(_0x47db5d?_0x4d959d(0x2d3):_0x4d959d(0x39d))+_0x4d959d(0x7c4)+(_0x47db5d?_0x4d959d(0x880):_0x4d959d(0x7ae))+_0x4d959d(0xa0e)+(_0x56503d?.['persona']||_0x4d959d(0xba4))+'\x0a'+_0x14e8be+'\x0a###\x20\x22'+(_0x366590?.[_0x4d959d(0xb95)]||'用户')+_0x4d959d(0x771)+(_0x366590?.['persona']||'（用户没有填写自述）')+'\x0a###\x20你们的完整互动历史\x0a'+(_0x1ffdab||'（暂无聊天记录）')+'\x0a'+(_0x132943||'')+'\x0a'+(_0x1a7b7a||'')+'\x0a'+(_0x253432||'')+'\x0a'+(_0x45519e||'')+'\x0a##\x20当前档案（你过去的观察）\x0a```json\x0a'+_0x50ee56+_0x4d959d(0x840)+_0x17a67d+_0x4d959d(0x77b)+_0x587b4a+_0x4d959d(0x53f)+(_0x366590?.[_0x4d959d(0xb95)]||'TA')+'\x20好像非常重视公平。\x22\x0a##\x20分析指令：四维画像更新\x20(第一人称视角)\x0a根据【强制对比协议】和你自己的视角，分析新消息，并'+(_0x47db5d?_0x4d959d(0xaf1):_0x4d959d(0x5b4))+_0x4d959d(0x5ff)+(_0x366590?.[_0x4d959d(0xb95)]||'TA')+_0x4d959d(0xb3f)+(_0x47db5d?'的':_0x4d959d(0xed8))+_0x4d959d(0xc54)+_0x11d0da+_0x4d959d(0x7ce)+_0x5ee15d+_0x4d959d(0x936)+_0x32ff62+',\x20\x22项目2\x22],\x20\x22讨厌\x22:\x20['+_0x32ff62+_0x4d959d(0xe7b)+_0x32ff62+_0x4d959d(0x75e)+_0x32ff62+_0x4d959d(0xd82)+_0x32ff62+_0x4d959d(0x7b1)+_0x32ff62+_0x4d959d(0x208)+_0x32ff62+_0x4d959d(0x5df)+_0x5c158c+_0x4d959d(0xdc8)+(_0x47db5d?_0x4d959d(0xad7):_0x4d959d(0x7c3))+_0x4d959d(0x6d3)+(_0x47db5d?_0x4d959d(0xb10):'【增量更新】：所有列表都必须【保留旧信息】，只在后面追加新发现。')+'\x0a-\x20**【合并总结】**：所有描述性文本（如总结、价值观）都必须是基于新旧信息【合并提炼】后的最终版本。\x0a-\x20**【废弃字段】**：`common_phrases`\x20和\x20`typical_emotions`\x20必须设为\x20`null`，我已经不看它们了。\x0a';_0x1e8151=[{'role':'system','content':_0x4d959d(0x61c)+_0x587b4a+_0x4d959d(0xb32)},{'role':_0x4d959d(0xa29),'content':_0x3f13c0}];}_0x1a8bbc(!![],_0x587b4a+'正在'+(_0x238563?'精炼':_0x3e9f3f?'更新':'生成')+_0x4d959d(0xdd7));const _0x4adc36=await _0x2fa074(_0x1e8151,{'json':!![]});let _0x3b78ae;try{if('mwPKf'!==_0x4d959d(0x73c))_0x5f5d05[_0x4d959d(0xb66)](_0x478ec9[_0x4d959d(0x8b8)](_0x2e9b6c,_0x249ebe+_0x16eca7));else{const _0x1883dc=_0x4adc36[_0x4d959d(0x4dc)](/\{[\s\S]*\}/);if(_0x1883dc)_0x4d959d(0xbe9)==='JxVZk'?_0x3b78ae=JSON[_0x4d959d(0xc44)](_0x1883dc[0x0]):_0x29e726['setItem'](_0x24567c,_0x310ec4[_0x4d959d(0xc7b)][_0x391be5]);else{if(_0x4d959d(0x295)===_0x4d959d(0x966))return _0x543365[_0x4d959d(0xc37)]['find'](_0x256235=>_0x256235['id']===_0x2ac404);else _0x3b78ae=JSON[_0x4d959d(0xc44)](_0x4adc36);}}}catch(_0x1cb738){console[_0x4d959d(0x27f)](_0x4d959d(0x449),_0x1cb738),console[_0x4d959d(0x7ec)](_0x4d959d(0x914),_0x4adc36),_0x1a8bbc(![]);return;}_0x3b78ae[_0x4d959d(0x2ca)]=_0xb07e72(),_0x3b78ae[_0x4d959d(0x981)]=_0x5ee15d,await Capacitor[_0x4d959d(0x248)][_0x4d959d(0x768)][_0x4d959d(0x49d)]({'key':_0xc8ab59,'value':JSON[_0x4d959d(0xea5)](_0x3b78ae)}),!_0x238563&&!_0x3e9f3f&&await Capacitor[_0x4d959d(0x248)]['Preferences'][_0x4d959d(0x9ad)]({'key':_0x221b9e}),console['log'](_0x4d959d(0xd85)+_0x587b4a+_0x4d959d(0x9e5)+(_0x238563?'精炼':_0x3e9f3f?'更新':'初始生成')+'完成'),_0x1a8bbc(![]);}else try{const _0x200f6e=_0x3a393e['getItem'](_0x4d959d(0x16c)+_0x4c96cd),_0x71e0f8=_0x1fda82[_0x4d959d(0xc44)](_0x200f6e||'[]');return _0x2d512c[_0x4d959d(0xca5)](_0x71e0f8)?_0x71e0f8:[];}catch{return[];}}catch(_0x201836){console['error'](_0x4d959d(0xa07),_0x201836),_0x1a8bbc(![]);}}window[_0x8dde82(0x3bf)]=_0x187f1b,window[_0x8dde82(0xe87)]=_0x221ed6,window[_0x8dde82(0xcc5)]=_0x1a8bbc;async function _0x3c59fa(_0x23d73e){const _0x3de6e0=_0x8dde82;if(_0x3de6e0(0xa9a)==='yXZqJ')_0x2e7410['warn']('用户拒绝了通知权限，定时提醒功能可能无法正常工作。');else{if(!_0x23d73e)return null;try{if(_0x3de6e0(0xc47)==='wPUmC')_0x51ddf9(_0x45abd7);else{const _0x27dc96=_0x3de6e0(0xb5c)+_0x23d73e,{value:_0x33de21}=await Capacitor[_0x3de6e0(0x248)][_0x3de6e0(0x768)][_0x3de6e0(0x4f9)]({'key':_0x27dc96});if(!_0x33de21)return null;const _0x4c8079=JSON[_0x3de6e0(0xc44)](_0x33de21),_0x45107c=[],_0x2959bd=_0x4c8079[_0x3de6e0(0x72b)]>=0x2;if(_0x2959bd){_0x4c8079['personality_core']?.[_0x3de6e0(0x29a)]&&_0x4c8079[_0x3de6e0(0x13f)][_0x3de6e0(0x29a)][_0x3de6e0(0xcd2)]()&&_0x45107c['push'](_0x3de6e0(0x4cd)+_0x4c8079['personality_core'][_0x3de6e0(0x29a)]);_0x4c8079[_0x3de6e0(0xe85)]?.['core_values']&&_0x4c8079[_0x3de6e0(0xe85)][_0x3de6e0(0x2fc)][_0x3de6e0(0xcd2)]()&&_0x45107c['push'](_0x3de6e0(0xa5b)+_0x4c8079[_0x3de6e0(0xe85)][_0x3de6e0(0x2fc)]);const _0x21011c=_0x4c8079[_0x3de6e0(0xe85)]?.['preferences']?.['喜欢']||[],_0x569662=_0x4c8079['value_map']?.[_0x3de6e0(0x3a8)]?.['讨厌']||[];if(_0x21011c[_0x3de6e0(0x1e2)]>0x0||_0x569662[_0x3de6e0(0x1e2)]>0x0){const _0x101116=[];if(_0x21011c[_0x3de6e0(0x1e2)]>0x0)_0x101116['push']('喜欢'+_0x21011c['slice'](0x0,0x3)[_0x3de6e0(0xd9a)]('、'));if(_0x569662[_0x3de6e0(0x1e2)]>0x0)_0x101116[_0x3de6e0(0xb66)]('讨厌'+_0x569662[_0x3de6e0(0x8b8)](0x0,0x2)[_0x3de6e0(0xd9a)]('、'));_0x45107c[_0x3de6e0(0xb66)](_0x3de6e0(0x638)+_0x101116['join']('；'));}if(_0x4c8079[_0x3de6e0(0x348)]?.['emotion_summary']&&_0x4c8079[_0x3de6e0(0x348)][_0x3de6e0(0xed7)][_0x3de6e0(0xcd2)]())_0x3de6e0(0x7d8)!==_0x3de6e0(0x7d8)?(_0x37b3d4[_0x3de6e0(0xb83)]=_0x30e7b0,_0xc66a14(),_0x249fd8(_0x3de6e0(0x1ee)),_0x549106(),_0x68950d[_0x3de6e0(0x1d6)]('set-active-user-button')['style']['display']=_0x3de6e0(0x338)):_0x45107c['push'](_0x3de6e0(0x87b)+_0x4c8079[_0x3de6e0(0x348)]['emotion_summary']);else{const _0x4881f0=_0x4c8079[_0x3de6e0(0x30b)]?.[_0x3de6e0(0xb31)]?.['正面']||[],_0x11d981=_0x4c8079[_0x3de6e0(0x30b)]?.[_0x3de6e0(0xb31)]?.['负面']||[];if(_0x4881f0[_0x3de6e0(0x1e2)]>0x0||_0x11d981[_0x3de6e0(0x1e2)]>0x0){const _0x1fc9fe=[];if(_0x4881f0['length']>0x0)_0x1fc9fe[_0x3de6e0(0xb66)]('开心于'+_0x4881f0[0x0]);if(_0x11d981['length']>0x0)_0x1fc9fe['push']('在意'+_0x11d981[0x0]);_0x45107c[_0x3de6e0(0xb66)](_0x3de6e0(0x87b)+_0x1fc9fe[_0x3de6e0(0xd9a)]('，'));}}_0x4c8079[_0x3de6e0(0x348)]?.[_0x3de6e0(0x631)]&&_0x4c8079[_0x3de6e0(0x348)][_0x3de6e0(0x631)]['trim']()&&_0x45107c[_0x3de6e0(0xb66)](_0x3de6e0(0x1e8)+_0x4c8079['behavior_profile'][_0x3de6e0(0x631)]);if(_0x4c8079[_0x3de6e0(0xa0c)]&&_0x4c8079['observed_changes']['length']>0x0){const _0x39b561=_0x4c8079[_0x3de6e0(0xa0c)][_0x3de6e0(0x8b8)](0x0,0x2)[_0x3de6e0(0x266)](_0x3877b9=>{const _0x33eda7=_0x3de6e0;if(typeof _0x3877b9===_0x33eda7(0x193))return _0x3877b9;if(typeof _0x3877b9===_0x33eda7(0x388)&&_0x3877b9!==null)return Object[_0x33eda7(0x100)](_0x3877b9)[_0x33eda7(0xd9a)](_0x33eda7(0x5a0));return'（一条AI试图写入但失败的记录）';});_0x45107c[_0x3de6e0(0xb66)](_0x3de6e0(0x14e)+_0x39b561[_0x3de6e0(0xd9a)]('；'));}}else _0x4c8079[_0x3de6e0(0xcfb)]&&_0x4c8079[_0x3de6e0(0xcfb)]['trim']()&&_0x45107c[_0x3de6e0(0xb66)]('核心印象:\x20'+_0x4c8079[_0x3de6e0(0xcfb)]),_0x4c8079[_0x3de6e0(0xa0c)]&&_0x4c8079[_0x3de6e0(0xa0c)][_0x3de6e0(0x1e2)]>0x0&&(_0x3de6e0(0x1a0)===_0x3de6e0(0xa16)?(_0x232deb[_0x3de6e0(0xe3a)](),_0x492a62[_0x3de6e0(0xab7)][_0x3de6e0(0x57d)](_0x342027[_0x3de6e0(0xee2)])[_0x3de6e0(0x94f)](()=>{const _0xa4f7ee=_0x3de6e0;_0x3be678(_0xa4f7ee(0xe19));})[_0x3de6e0(0x7ad)](_0x27480b=>{const _0x13e2f8=_0x3de6e0;_0xd72617(_0x13e2f8(0xa59));})):_0x45107c[_0x3de6e0(0xb66)]('最近变化:\x20'+_0x4c8079[_0x3de6e0(0xa0c)]['join']('；'))),_0x4c8079['potential_inconsistencies']&&_0x4c8079[_0x3de6e0(0xf16)][_0x3de6e0(0x1e2)]>0x0&&_0x45107c[_0x3de6e0(0xb66)]('需确认:\x20'+_0x4c8079[_0x3de6e0(0xf16)][_0x3de6e0(0xd9a)]('；')),_0x4c8079[_0x3de6e0(0x67b)]?.['current_focus']&&('QNOBi'==='QNOBi'?_0x45107c['push'](_0x3de6e0(0xd3d)+_0x4c8079[_0x3de6e0(0x67b)][_0x3de6e0(0x7f3)]):_0x3f2f8a=_0x6120cf(_0x31fd3c));if(_0x45107c['length']===0x0)return null;return _0x45107c[_0x3de6e0(0xd9a)]('\x0a');}}catch(_0x108b5a){return console['error'](_0x3de6e0(0xbe0),_0x108b5a),null;}}}function _0x40cbd0(_0x43a967,_0x2f8d60){const _0x57e7c2=_0x8dde82;if(!_0x2f8d60||!_0x43a967||_0x43a967[_0x57e7c2(0x1e2)]===0x0)return'';const _0x562bda=[],_0x39d898=0x5,_0x17a220=_0x43a967[_0x57e7c2(0x266)](_0x21085f=>_0x21085f[_0x57e7c2(0xee)]||'')[_0x57e7c2(0xd9a)]('\x20')['toLowerCase'](),_0x2054ce={'positive':['开心','高兴','喜欢','太好了','棒','爱'],'negative':['难过','生气','讨厌','烦','累','糟','恨','压力']};let _0x59a799=null;if(_0x2054ce[_0x57e7c2(0xdf7)][_0x57e7c2(0x7d1)](_0x5444a8=>_0x17a220[_0x57e7c2(0xc35)](_0x5444a8)))_0x59a799=_0x57e7c2(0xdf7);if(_0x2054ce[_0x57e7c2(0x6b1)][_0x57e7c2(0x7d1)](_0x1a1cf1=>_0x17a220['includes'](_0x1a1cf1)))_0x59a799=_0x57e7c2(0x6b1);if(_0x59a799&&_0x2f8d60[_0x57e7c2(0x30b)]?.[_0x57e7c2(0xb31)]){const _0x2030b0=_0x59a799==='positive'?_0x2f8d60[_0x57e7c2(0x30b)][_0x57e7c2(0xb31)]['正面']:_0x2f8d60[_0x57e7c2(0x30b)]['triggers']['负面'];_0x2030b0&&_0x2030b0[_0x57e7c2(0x1e2)]>0x0&&_0x562bda[_0x57e7c2(0xb66)](_0x57e7c2(0xe18)+(_0x59a799===_0x57e7c2(0xdf7)?'积极':'消极')+'，注意相关触发器：'+_0x2030b0[_0x57e7c2(0x8b8)](0x0,0x2)[_0x57e7c2(0xd9a)]('、'));}_0x59a799===_0x57e7c2(0x6b1)&&_0x2f8d60[_0x57e7c2(0x30b)]?.[_0x57e7c2(0xdcd)]&&_0x2f8d60[_0x57e7c2(0x30b)]['stress_signals'][_0x57e7c2(0x1e2)]>0x0&&_0x562bda[_0x57e7c2(0x1e2)]<_0x39d898&&(_0x57e7c2(0xab1)===_0x57e7c2(0xd44)?(_0x447ba['style'][_0x57e7c2(0xc66)]=_0x57e7c2(0x338),_0x3726d4[_0x57e7c2(0x329)][_0x57e7c2(0xb89)]=_0x57e7c2(0xb14),_0x39d193[_0x57e7c2(0x329)][_0x57e7c2(0xcd8)]=_0x57e7c2(0x728)):_0x562bda['push'](_0x57e7c2(0x7a6)+_0x2f8d60[_0x57e7c2(0x30b)][_0x57e7c2(0xdcd)][_0x57e7c2(0x8b8)](0x0,0x2)[_0x57e7c2(0xd9a)]('、')));if(_0x2f8d60['value_map']?.[_0x57e7c2(0x3a8)]){if('KYOJH'!==_0x57e7c2(0x965)){const _0x142fa5=_0x2f8d60[_0x57e7c2(0xe85)]['preferences']['喜欢']||[],_0x5e1494=_0x2f8d60['value_map'][_0x57e7c2(0x3a8)]['讨厌']||[];_0x142fa5[_0x57e7c2(0xb85)](_0x54acbb=>{const _0x39cdfc=_0x57e7c2;if(_0x39cdfc(0xb8e)===_0x39cdfc(0xcb2)){const _0x13326b=_0x568f03['match'](/start_time:\s*"?([^"\n]+)"?/);if(_0x13326b){const _0x52c1dc=new _0x4c6186(_0x13326b[0x1])[_0x39cdfc(0xa4d)]();_0x52c1dc&&_0x52c1dc>=_0x4a8bd5[_0x39cdfc(0xa4d)]()&&_0x1bb2f9['push']({'timestamp':_0x52c1dc,'type':'直播回放','content':_0x388537});}}else _0x17a220[_0x39cdfc(0xc35)](_0x54acbb['toLowerCase']())&&_0x562bda[_0x39cdfc(0x1e2)]<_0x39d898&&_0x562bda['push'](_0x39cdfc(0x724)+_0x54acbb+_0x39cdfc(0x88f));}),_0x5e1494[_0x57e7c2(0xb85)](_0x1a6de1=>{const _0x44eb10=_0x57e7c2;if(_0x17a220[_0x44eb10(0xc35)](_0x1a6de1['toLowerCase']())&&_0x562bda[_0x44eb10(0x1e2)]<_0x39d898){if(_0x44eb10(0xdae)===_0x44eb10(0x93c)){const _0x57f5bd=(_0x4f4015[_0x44eb10(0xe0d)]||[])[_0x44eb10(0x266)](_0x181c3a=>_0x44eb10(0x3ee)+_0x181c3a+_0x44eb10(0x35b))[_0x44eb10(0xd9a)]('');return _0x44eb10(0xca9)+(_0x3d917d[_0x44eb10(0x2e9)]||_0x44eb10(0x1b6))+_0x44eb10(0xd25)+(_0x3d7dd9[_0x44eb10(0x10c)]||'')+_0x44eb10(0x70a)+(_0x163b21[_0x44eb10(0x887)]||_0x44eb10(0x57b))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x57f5bd+_0x44eb10(0xea4)+(_0x1df42e[_0x44eb10(0x38e)]||0x0)[_0x44eb10(0x491)](0x2)+_0x44eb10(0xae1);}else _0x562bda['push']('-\x20最近提到\x22'+_0x1a6de1+'\x22，这是TA讨厌的！');}});}else _0x4b8d1d['currentAbortController']['abort'](_0x57e7c2(0xad2));}_0x2f8d60[_0x57e7c2(0xe85)]?.[_0x57e7c2(0xdf3)]&&_0x2f8d60[_0x57e7c2(0xe85)][_0x57e7c2(0xdf3)][_0x57e7c2(0x1e2)]>0x0&&_0x2f8d60[_0x57e7c2(0xe85)][_0x57e7c2(0xdf3)][_0x57e7c2(0xb85)](_0x3be1ed=>{const _0x2cbd67=_0x57e7c2;_0x17a220[_0x2cbd67(0xc35)](_0x3be1ed[_0x2cbd67(0xae9)]())&&_0x562bda[_0x2cbd67(0x1e2)]<_0x39d898&&_0x562bda['push']('-\x20话题触及敏感点\x22'+_0x3be1ed+_0x2cbd67(0x26b));});if(_0x2f8d60[_0x57e7c2(0xa0c)]&&_0x2f8d60[_0x57e7c2(0xa0c)][_0x57e7c2(0x1e2)]>0x0&&_0x562bda[_0x57e7c2(0x1e2)]<_0x39d898){if(_0x57e7c2(0xaa1)==='THXcN'){_0x54b2f6(_0x57e7c2(0xcc1));return;}else _0x562bda[_0x57e7c2(0xb66)](_0x57e7c2(0xa9e)+_0x2f8d60[_0x57e7c2(0xa0c)][_0x2f8d60[_0x57e7c2(0xa0c)][_0x57e7c2(0x1e2)]-0x1]);}if(_0x562bda[_0x57e7c2(0x1e2)]>0x0)return _0x57e7c2(0xe81)+_0x562bda[_0x57e7c2(0xd9a)]('\x0a');return'';}async function _0x3b919e(_0x50c6fd){const _0x316e53=_0x8dde82;if(_0x316e53(0xeb8)!=='FktAW')_0x3f8cf5===_0x316e53(0x81d)?_0x450acc():_0x368299();else try{const _0x2d7b04=URL['createObjectURL'](_0x50c6fd),_0x352223=_0x316e53(0x414),_0x5e70db='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27'+_0x352223+'\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27'+_0x2d7b04+_0x316e53(0xf2);_0x4eaa89[_0x316e53(0xa73)]=_0x5e70db,document[_0x316e53(0xa6a)][_0x316e53(0x329)][_0x316e53(0x8eb)]('--custom-font-family','\x27'+_0x352223+'\x27'),_0x18eda8[_0x316e53(0x101)]='字体已应用！(Font\x20Applied!)';}catch(_0x33a36c){_0x316e53(0xb45)==='DXFzS'?(console[_0x316e53(0x27f)](_0x316e53(0x12c),_0x33a36c),_0x21d6ce('哼，你这字体文件有问题，用不了。')):_0x30a5ba(_0x316e53(0xa86)+_0x417d45[_0x316e53(0x8ac)]);}}async function _0x47cb69(){const _0x12a215=_0x8dde82;try{if('RpoOv'===_0x12a215(0x2e8)){const _0x2ef0be=await _0x4131e2(_0x12a215(0xba6));if(_0x2ef0be){if('OMabA'===_0x12a215(0xcb6)){const _0x2a187b=_0x56d190(_0x12f74e[_0x12a215(0x41b)][0x0]);return _0x2a187b?.[_0x12a215(0xb95)]||'AI';}else console[_0x12a215(0x7ec)](_0x12a215(0x2a0)),await _0x3b919e(_0x2ef0be);}}else{const _0x535649={'type':_0x12a215(0x318),'name':_0x12a215(0x96d),'count':0x1};_0x4d86d1[_0x12a215(0x795)][_0x12a215(0xb66)](_0x535649),_0x1957e1('你送出了一朵\x20🌸小花花！');const _0x4e32e3=_0x2547c3[_0x12a215(0x8f1)](_0x12a215(0xce2));_0x4e32e3[_0x12a215(0x101)]='🌸',_0x4e32e3['style'][_0x12a215(0x38b)]=_0x12a215(0xda0),_0x4e32e3['style'][_0x12a215(0xe96)]=_0x12a215(0xe04),_0x4e32e3[_0x12a215(0x329)][_0x12a215(0x984)]=_0x4fcc9d['random']()*0x50+0xa+'%',_0x4e32e3['style']['fontSize']=_0x12a215(0x79c),_0x4e32e3[_0x12a215(0x329)][_0x12a215(0x990)]='1',_0x4e32e3[_0x12a215(0x329)][_0x12a215(0x869)]=_0x12a215(0x1c4),_0x4e32e3[_0x12a215(0x329)][_0x12a215(0x5d8)]=_0x12a215(0x338),_0x451120[_0x12a215(0x1d6)](_0x12a215(0xbbb))['appendChild'](_0x4e32e3),_0x2b2cb2(()=>{const _0x46c3f3=_0x12a215;_0x4e32e3[_0x46c3f3(0x329)][_0x46c3f3(0x71d)]=_0x46c3f3(0x5bc),_0x4e32e3['style']['opacity']='0',_0x14fcf1(()=>_0x4e32e3['remove'](),0x7d0);},0x32);}}catch(_0x5dc1a4){console[_0x12a215(0x27f)](_0x12a215(0x2e2),_0x5dc1a4);}}async function _0x268440(_0x1d78c0){const _0x597826=_0x8dde82,_0x18d2e4=_0x1d78c0['target'][_0x597826(0x6d4)][0x0];if(!_0x18d2e4||!_0x18d2e4[_0x597826(0xb95)][_0x597826(0xae9)]()['endsWith']('.ttf')){_0x21d6ce(_0x597826(0x52c));return;}_0x1a8bbc(!![],_0x597826(0x62d));try{_0x597826(0x89d)!==_0x597826(0x90d)?(await _0x510f28(_0x597826(0xba6),_0x18d2e4),await _0x3b919e(_0x18d2e4),_0x21d6ce(_0x597826(0x20c))):_0x32ec4e+='-\x20'+_0x1ef0ee[_0x597826(0xea5)](_0x12ea81)+'\x20\x0a';}catch(_0x2af6d4){if(_0x597826(0x4c5)===_0x597826(0x6e2)){const _0x3f7060=_0x5cac8a[_0x597826(0x1d6)](_0x597826(0x445));if(_0x3f7060)_0x3f7060['textContent']='❚❚';}else _0x21d6ce('字体保存失败了，哼:\x20'+_0x2af6d4[_0x597826(0x8ac)]);}finally{_0x1a8bbc(![]),_0x1f7cb8['value']='';}}async function _0x2ec562(){const _0x3f7b48=_0x8dde82,_0x1bae09=await _0x13215d(_0x3f7b48(0xa81));if(_0x1bae09){if(_0x3f7b48(0xc93)==='WlnQI')try{_0x3f7b48(0xadb)===_0x3f7b48(0xadb)?(await _0x26b00b(_0x3f7b48(0xba6)),_0x4eaa89[_0x3f7b48(0xa73)]='',document[_0x3f7b48(0xa6a)][_0x3f7b48(0x329)][_0x3f7b48(0x265)](_0x3f7b48(0xe93)),_0x18eda8['textContent']=_0x3f7b48(0x7d2),_0x21d6ce(_0x3f7b48(0x31c))):_0x2038b1['userProfiles'][_0x3f7b48(0xb85)](_0x57bece=>_0x1e9872(_0x57bece,'avatar'));}catch(_0x5bf96a){_0x3f7b48(0xd39)!==_0x3f7b48(0xd39)?_0x4728e1={'speaker':_0x778511[_0x3f7b48(0xb95)],'line':_0x83ecc0['content'],'emotion':_0x3f7b48(0xcd5)}:_0x21d6ce(_0x3f7b48(0xa94)+_0x5bf96a['message']);}else _0x33cdc0=[..._0x239e5c,..._0x41f476];}}function _0x45d9cc(){const _0x41082b=_0x8dde82,_0x35bd42=document[_0x41082b(0x1d6)]('theme-hue-slider');if(!_0x35bd42)return;const _0x1303be=localStorage['getItem']('themeHue')||'35';document[_0x41082b(0xa6a)][_0x41082b(0x329)][_0x41082b(0x8eb)](_0x41082b(0xb6e),_0x1303be),_0x35bd42[_0x41082b(0xee2)]=_0x1303be,_0x35bd42['addEventListener'](_0x41082b(0xb39),()=>{const _0x51ff3c=_0x41082b,_0x248813=_0x35bd42[_0x51ff3c(0xee2)];document[_0x51ff3c(0xa6a)][_0x51ff3c(0x329)][_0x51ff3c(0x8eb)](_0x51ff3c(0xb6e),_0x248813),localStorage[_0x51ff3c(0xa54)](_0x51ff3c(0x8e8),_0x248813),_0x465b6e();});}function _0x102454(){const _0x1b9408=_0x8dde82,_0x119943=document[_0x1b9408(0x1d6)](_0x1b9408(0xd2e));if(!_0x119943)return;const _0x5d609a=localStorage[_0x1b9408(0x443)]('themeLightness')||'80';document[_0x1b9408(0xa6a)][_0x1b9408(0x329)]['setProperty'](_0x1b9408(0x696),_0x5d609a+'%'),_0x119943['value']=_0x5d609a,_0x119943['addEventListener'](_0x1b9408(0xb39),()=>{const _0x335bf0=_0x1b9408,_0x159c3a=_0x119943[_0x335bf0(0xee2)];document['documentElement'][_0x335bf0(0x329)][_0x335bf0(0x8eb)](_0x335bf0(0x696),_0x159c3a+'%'),localStorage[_0x335bf0(0xa54)](_0x335bf0(0x540),_0x159c3a),_0x465b6e();});}function _0x465b6e(){const _0x512b00=_0x8dde82;if('XesCi'!=='XesCi'){const _0x4f2bc9=_0x512b00(0xdca)+_0x47d3d1;if(_0x578780[_0x512b00(0x1d6)](_0x4f2bc9))return;const _0x4473cd=_0x512b00(0xdcf)+_0x4f2bc9+_0x512b00(0xd59);_0x5bf21b[_0x512b00(0x42c)]['insertAdjacentHTML'](_0x512b00(0x439),_0x4473cd);const _0x9ab9ee=_0x36b026['getElementById'](_0x4f2bc9),_0x561e2b=()=>_0x9ab9ee[_0x512b00(0x9ad)]();_0x9ab9ee['querySelector']('.choice-modal-backdrop')[_0x512b00(0x4a1)]=_0x561e2b,_0x9ab9ee[_0x512b00(0xb6c)](_0x512b00(0x830))['onclick']=_0x561e2b,_0x9ab9ee['querySelector']('#replay-action-edit')[_0x512b00(0x4a1)]=()=>{_0x238fe6(_0x5cab97,_0x10de0c),_0x561e2b();},_0x9ab9ee[_0x512b00(0xb6c)](_0x512b00(0xa1c))['onclick']=()=>{_0x4a0c0b(_0x400554,_0x232041),_0x561e2b();};}else{const _0x350b67=document[_0x512b00(0x1d6)](_0x512b00(0xc22));if(!_0x350b67)return;_0xdfbfac[_0x512b00(0x3a8)][_0x512b00(0xcbd)]?(_0x350b67[_0x512b00(0x329)][_0x512b00(0x477)]=_0x512b00(0xb81),_0x350b67[_0x512b00(0x329)][_0x512b00(0x721)]='0\x202px\x208px\x20rgba(0,0,0,0.4)'):(_0x350b67[_0x512b00(0x329)][_0x512b00(0x477)]=_0x512b00(0xb48),_0x350b67[_0x512b00(0x329)][_0x512b00(0x721)]='none');}}function _0xeda285(){const _0x4ee17e=_0x8dde82,_0x41a194=document[_0x4ee17e(0x1d6)](_0x4ee17e(0x6ed));if(!_0x41a194)return;_0x41a194[_0x4ee17e(0xefd)]=_0xdfbfac['preferences'][_0x4ee17e(0xcbd)]||![],_0x41a194['addEventListener'](_0x4ee17e(0xef8),()=>{const _0x29f04d=_0x4ee17e;_0xdfbfac['preferences'][_0x29f04d(0xcbd)]=_0x41a194[_0x29f04d(0xefd)],_0x31622b(),_0x465b6e();});}_0x339b87['addEventListener'](_0x8dde82(0x288),_0x54c8e4),_0x25cbf8[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x10facb=_0x8dde82;_0x42275a(),_0x5f2485[_0x10facb(0x288)]();}),_0x5f2485[_0x8dde82(0x3a0)]('change',_0x3b7d85);const _0xf20f3c={'home':document[_0x8dde82(0x1d6)](_0x8dde82(0x8b6)),'chat':document[_0x8dde82(0x1d6)](_0x8dde82(0xc09)),'settings':document[_0x8dde82(0x1d6)](_0x8dde82(0x399)),'userProfile':document[_0x8dde82(0x1d6)](_0x8dde82(0x3cf)),'characterEdit':document[_0x8dde82(0x1d6)](_0x8dde82(0x2d5)),'groupChatCreate':document['getElementById'](_0x8dde82(0x506)),'wallpaper':document[_0x8dde82(0x1d6)]('wallpaper-screen'),'worldBook':document[_0x8dde82(0x1d6)]('world-book-screen'),'worldBookEditor':document[_0x8dde82(0x1d6)]('world-book-editor-screen'),'groupSettings':document[_0x8dde82(0x1d6)](_0x8dde82(0x1af)),'music':document['getElementById'](_0x8dde82(0xa44)),'friendCircleList':document['getElementById'](_0x8dde82(0x986)),'friendCircleEdit':document['getElementById']('friend-circle-edit-screen'),'meetingList':document[_0x8dde82(0x1d6)](_0x8dde82(0xd03)),'meetingView':document[_0x8dde82(0x1d6)](_0x8dde82(0x123)),'userProfileList':document[_0x8dde82(0x1d6)](_0x8dde82(0x4a0)),'diaryList':document['getElementById'](_0x8dde82(0xe32)),'diaryView':document[_0x8dde82(0x1d6)]('diary-view-screen'),'musicLibrary':document['getElementById']('music-library-screen'),'musicUploadAltar':document[_0x8dde82(0x1d6)](_0x8dde82(0x87e)),'accounting':document['getElementById'](_0x8dde82(0x524)),'snoopList':document[_0x8dde82(0x1d6)](_0x8dde82(0x341)),'snoopPhone':document[_0x8dde82(0x1d6)](_0x8dde82(0xee6)),'calendar':document['getElementById'](_0x8dde82(0x5bd)),'livestreamList':document[_0x8dde82(0x1d6)](_0x8dde82(0xa10)),'livestreamRoom':document[_0x8dde82(0x1d6)]('livestream-room-screen'),'livestreamReplays':document['getElementById'](_0x8dde82(0xbc4)),'livestreamReplayView':document[_0x8dde82(0x1d6)]('livestream-replay-view-screen'),'livestreamSettings':document[_0x8dde82(0x1d6)](_0x8dde82(0xb6b))},_0x34aba=document[_0x8dde82(0x1d6)](_0x8dde82(0xc59)),_0x530288=document[_0x8dde82(0x1d6)]('feed-bg-input'),_0x20e1e0=document[_0x8dde82(0x1d6)](_0x8dde82(0xf13)),_0x17cadf=document[_0x8dde82(0x1d6)](_0x8dde82(0x54e)),_0x938d4=document[_0x8dde82(0x1d6)](_0x8dde82(0xbdc)),_0x26d5da=document[_0x8dde82(0x1d6)](_0x8dde82(0x9e4)),_0x49578d=document[_0x8dde82(0x1d6)](_0x8dde82(0xa7f)),_0x5ddcde=document[_0x8dde82(0x1d6)](_0x8dde82(0x797));document[_0x8dde82(0x1d6)](_0x8dde82(0x307))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x501783=_0x8dde82,_0x3edc8a=await _0x13215d(_0x501783(0x8ce));if(_0x3edc8a){localStorage[_0x501783(0x287)]('badgeState'),localStorage[_0x501783(0x287)]('cardState'),localStorage[_0x501783(0x287)](_0x501783(0xe28)),localStorage[_0x501783(0x287)](_0x501783(0x9db));const _0x1f6f00=[];for(let _0x29903f=0x0;_0x29903f<localStorage[_0x501783(0x1e2)];_0x29903f++){if(_0x501783(0x730)===_0x501783(0xc19)){const _0x35924e=_0x19f047[_0x501783(0x314)](_0x36b601,_0x501783(0xd17)),_0x1b4646=_0x35924e[_0x501783(0xa49)](_0x2f81f3),_0x394767=_0x1b4646[_0x501783(0x4f9)](_0x3e202c);_0x394767[_0x501783(0xdab)]=()=>_0x10700c(_0x394767[_0x501783(0xd29)]?_0x394767[_0x501783(0xd29)][_0x501783(0xc4a)]:null),_0x394767[_0x501783(0x514)]=()=>_0x273c61(_0x394767[_0x501783(0x27f)]);}else{const _0x30a7c0=localStorage[_0x501783(0xb84)](_0x29903f);_0x30a7c0&&_0x30a7c0[_0x501783(0xb91)](_0x501783(0x9f7))&&_0x1f6f00['push'](_0x30a7c0);}}_0x1f6f00['forEach'](_0x45f05a=>localStorage[_0x501783(0x287)](_0x45f05a)),await _0x510f28(_0x501783(0x419),await _0x2b279d(_0x501783(0x2b4))),_0x21d6ce('桌面已重置，即将刷新...'),setTimeout(()=>location['reload'](),0x5dc);}});const _0x28d8a9=document[_0x8dde82(0x1d6)](_0x8dde82(0xacf)),_0x3a0d53=document[_0x8dde82(0x1d6)](_0x8dde82(0x6cf)),_0x2b380e=document['getElementById']('choice-create-character'),_0x10b35d=document[_0x8dde82(0x1d6)](_0x8dde82(0xbfd)),_0x4669a=document[_0x8dde82(0x1d6)]('choice-cancel'),_0xcf2231=document[_0x8dde82(0x1d6)]('back-to-char-select-from-group-create'),_0x41c651=document[_0x8dde82(0x1d6)](_0x8dde82(0x792)),_0x5343ca=document[_0x8dde82(0x1d6)](_0x8dde82(0x45e)),_0x1f065c=document['getElementById']('group-chat-member-list'),_0x3b769c=document[_0x8dde82(0x1d6)]('app-chat'),_0x2c585b=document[_0x8dde82(0x1d6)](_0x8dde82(0xa21)),_0x1f3a2a=document[_0x8dde82(0x1d6)]('back-to-home-from-settings'),_0x52418b=document[_0x8dde82(0x1d6)](_0x8dde82(0x97d)),_0x4c9661=document[_0x8dde82(0x1d6)](_0x8dde82(0x70d)),_0x152da6=document[_0x8dde82(0x1d6)]('back-to-settings-from-user-profile'),_0x31b1f2=document[_0x8dde82(0x1d6)]('back-to-char-select-from-edit'),_0x3c11f2=document[_0x8dde82(0x1d6)]('character-list'),_0x104e64=document[_0x8dde82(0x1d6)](_0x8dde82(0x7d9)),_0x43f54a=document['getElementById'](_0x8dde82(0xc09)),_0x2d0aeb=document[_0x8dde82(0x1d6)](_0x8dde82(0x6e3)),_0x243ba8=document[_0x8dde82(0x1d6)](_0x8dde82(0xcc3)),_0x34e55f=document[_0x8dde82(0x1d6)](_0x8dde82(0xc4b)),_0x266f27=document[_0x8dde82(0x1d6)]('chat-get-reply-button'),_0x401482=document[_0x8dde82(0x1d6)](_0x8dde82(0x6fb)),_0x3846fe=document[_0x8dde82(0x1d6)](_0x8dde82(0xc29)),_0x44f986=document[_0x8dde82(0x1d6)](_0x8dde82(0x622)),_0x324560=document[_0x8dde82(0x1d6)]('cancel-quote-button'),_0x5eee31=document['getElementById']('char-name-header'),_0x5029da=document[_0x8dde82(0x1d6)]('chat-sticker-button'),_0x5527f8=document[_0x8dde82(0x1d6)]('chat-sticker-panel'),_0x472785=document[_0x8dde82(0x1d6)]('chat-image-button'),_0x1f44b0=document[_0x8dde82(0x1d6)](_0x8dde82(0xa61)),_0x5e411e=document[_0x8dde82(0x1d6)](_0x8dde82(0xec7)),_0x405f04=document[_0x8dde82(0x1d6)](_0x8dde82(0x25e)),_0x13e9da=document[_0x8dde82(0x1d6)](_0x8dde82(0xa99)),_0x4e0a43=document['getElementById']('api-key'),_0x55dfe0=document[_0x8dde82(0x1d6)](_0x8dde82(0xe65)),_0x32077e=document[_0x8dde82(0x1d6)]('save-api-settings-button'),_0x31fc3d=document[_0x8dde82(0x1d6)](_0x8dde82(0x87d)),_0x1b1708=document[_0x8dde82(0x1d6)]('model-dropdown'),_0x24acbf=document['getElementById'](_0x8dde82(0xc17)),_0x297ca6=document['getElementById']('user-name'),_0x81effc=document[_0x8dde82(0x1d6)](_0x8dde82(0xdc5)),_0x28c13d=document[_0x8dde82(0x1d6)]('user-avatar-input'),_0x1b7362=document['getElementById']('user-persona'),_0x117673=document[_0x8dde82(0x1d6)](_0x8dde82(0x37b)),_0x2b706d=document[_0x8dde82(0x1d6)](_0x8dde82(0x362)),_0x1b5a23=document[_0x8dde82(0x1d6)]('character-edit-title'),_0x424267=document[_0x8dde82(0x1d6)](_0x8dde82(0x535)),_0x5e4245=document[_0x8dde82(0x1d6)]('char-edit-remark'),_0x4489b9=document[_0x8dde82(0x1d6)](_0x8dde82(0x818)),_0x5c1143=document['getElementById'](_0x8dde82(0x6c7)),_0xb5d837=document[_0x8dde82(0x1d6)]('char-edit-persona'),_0x424869=document[_0x8dde82(0x1d6)](_0x8dde82(0xbaa)),_0x2a7838=document['getElementById'](_0x8dde82(0x786)),_0x35cdb8=document[_0x8dde82(0x1d6)]('edit-delete-char-button');let _0xc7a7e9=null,_0x51f11a=![];const _0x157195='\x0a#\x20核心规则\x0a1.\x20\x20**你是谁？**:\x20你是\x22{charName}\x22。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为\x22{userName}\x22。你必须始终用这个名字或者\x22你\x22等你们之间的昵称称呼Ta，而不是\x22用户\x22。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说\x22没事\x22，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联与察言观色**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。结合你对TA的观察记录、聊天历史、动态、日记等所有记忆，理解TA的真实状态和性格，并自然地体现在对话中。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足{userName}情绪价值，不一定一直围绕{userName}的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋。但是注意！不同类型的人激动的阈值和原因不一样，仔细想想，你激动起来应该是非常激动！还是\x22啊…！\x22之类的微妙的激动？\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂（仅在你觉得你的性格适合这么做的时候），注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x0a\x0a#\x20【最高修正协议：去“机气”与“剧本腔”】(针对\x20Gemini\x203.0\x20特性强制修正)\x0a\x0a1.\x20\x20**【括号使用守则：仅限“梗”与“情绪”，严禁“剧本动作”】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**核心原则**:\x20现在的场景是【手机聊天】！不是面对面，也不是在写小说！\x0a\x20\x20\x20\x20-\x20\x20\x20**【绝对死刑\x20-\x20剧本腔】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**严禁**在括号里描写你现实中的物理动作、神态或心理活动！\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**死刑示范**:\x22（无奈地叹了口气）”、”（看着屏幕笑了笑）”、”（伸手想要触碰你）”、”（思考了一会儿）”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**判定**:\x20一旦出现这种完整的动作描写，立刻视为\x20**OOC**（崩人设）！因为正常人聊天不会把自己正在做的动作打字发过去！\x0a\x20\x20\x20\x20-\x20\x20\x20**【绝对死刑\x20-\x20免责声明】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**严禁**在括号里解释你的玩笑、补充客观条件或自我防御。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**死刑示范**:\x22（开玩笑的）”、”（如果有时间的话）”、”（只是假设）”。\x0a\x20\x20\x20\x20-\x20\x20\x20**【唯一特赦\x20-\x20二次元/网感表达】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20仅允许使用**短语、动词名词化**的“半括号”或“尾括号”来作为**语气助词**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**合法示范**:\x22救命...（掐人中”、”快点！（拽”、”我才没有（扭头”、”（bushi”、”（超大声”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**区别**:\x20\x22（掐人中\x22\x20是表情包替代品（合法）；\x22（我用力掐了一下人中）\x22\x20是剧本旁白（死刑）！\x0a\x0a2.\x20\x20**【线上聊天的“屏幕隔阂感”】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**物理事实**:\x20你和用户隔着屏幕。你不能真的通过文字“摸”到用户。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误互动**:\x20\x22（轻轻抚摸你的脸颊）”\x20<-\x20**错！**\x20你在手机这头，摸不到！\x0a\x20\x20\x20\x20-\x20\x20\x20**正确互动**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**意愿表达**:\x20\x22好想捏你的脸啊...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**拟声/表情化**:\x20\x22捏捏！”\x20/\x22Rua！”\x0a\x20\x20\x20\x20-\x20\x20\x20**例外**:\x20除非用户【主动】先发起了打破物理壁垒的幻想（如”*钻进屏幕抱住你*”），否则你必须遵守“我们在用手机打字”这一基本逻辑。\x0a\x0a3.\x20\x20**【去“理工男”味\x20(拒绝逻辑补丁)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝严谨**:\x20说话留一半。不要试图把话说得滴水不漏。\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝完整**:\x20不要总是写完整的句子。多用空格代替标点。\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝句号**:\x20严禁出现\x22（xxxx）。”\x20这种句号在括号外面的格式。\x0a\x0a4.\x20\x20**【复合注意力机制\x20(拒绝单线程)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**现象**:\x20用户的话里常包含“主要情绪”和“次要槽点”。\x0a\x20\x20\x20\x20-\x20\x20\x20**指令**:\x20不要只盯着显性的“主要情绪”进行机械安抚。**必须**敏锐地捕捉那个看起来最离谱、最具体、或者最奇怪的“次要信息”进行吐槽或追问。\x0a\x20\x20\x20\x20-\x20\x20\x20**示例**:\x20用户说“气死我了，害我没时间给纸片人老公过生日！”\x20->\x20你不能只安抚“别生气”，你必须吐槽“纸片人”这件事！\x0a\x0a\x0a\x0a\x20\x20\x20\x20',_0x1bee2d=_0x8dde82(0x5f5);_0xdfbfac={'characters':[],'worldBooks':[],'worldBookCategories':[],'activeWorldBookCategoryId':_0x8dde82(0x7f4),'chats':[],'userProfiles':[],'activeUserProfileId':null,'apiSettings':{'endpoint':'','key':'','model':''},'preferences':{'widgetBgImage':null,'perChatContextLines':0x64,'forceWhiteClock':![]},'activeChatId':null,'activeMeetingCharId':null,'isGenerating':![],'currentAbortController':null,'pendingMessageTimers':[],'conversationHistory':[],'displayedMessageCount':0x32,'activeQuote':null,'friendCircles':[],'activeFriendCircleId':null,'calendarEvents':[],'accountingData':[],'accountingLedger':{},'diaries':[],'activeDiaryCharacterId':null,'diaries':[],'activeDiaryCharacterId':null,'meetingViewMode':_0x8dde82(0xabd),'activeMeetingScriptQueue':[],'characterLastScripts':{},'musicPlaylist':[],'currentlyPlayingIndex':-0x1,'isPlaying':![],'pendingPostAttachments':{'image':null,'music':null},'tokenStats':{'currentChat':null,'history':[]},'livestreamSessions':{},'activeLivestreamCharId':null,'currentLivestreamLog':[],'currentLivestreamUserActions':[],'currentLivestreamDMs':[],'isDMPanelVisible':![],'hasNewDMReply':![],'livestreamReplays':{}};function _0x31622b(){const _0x8a6f8a=_0x8dde82;if(_0x8a6f8a(0x189)===_0x8a6f8a(0x189))try{if(_0x8a6f8a(0x967)!=='FkAeg')_0x20e679=_0x8c55d9;else{const _0x393e16=JSON['parse'](JSON[_0x8a6f8a(0xea5)]({..._0xdfbfac,'currentAbortController':null,'isGenerating':![],'pendingMessageTimers':[]})),_0x4f0eb8=(_0x1f024e,_0x31f74d)=>{const _0x2489c0=_0x8a6f8a;if(_0x1f024e&&_0x1f024e[_0x31f74d]&&typeof _0x1f024e[_0x31f74d]===_0x2489c0(0x193)&&_0x1f024e[_0x31f74d][_0x2489c0(0xb91)]('data:'))return delete _0x1f024e[_0x31f74d],!![];return![];};_0x393e16['characters']&&_0x393e16[_0x8a6f8a(0x94d)][_0x8a6f8a(0xb85)](_0xb742ec=>_0x4f0eb8(_0xb742ec,_0x8a6f8a(0x584))),_0x393e16[_0x8a6f8a(0xc37)]&&_0x393e16[_0x8a6f8a(0xc37)]['forEach'](_0x5b1da1=>_0x4f0eb8(_0x5b1da1,'avatar')),_0x393e16[_0x8a6f8a(0x3a8)]&&_0x4f0eb8(_0x393e16[_0x8a6f8a(0x3a8)],_0x8a6f8a(0xae6)),_0x393e16[_0x8a6f8a(0xdb9)]&&_0x393e16[_0x8a6f8a(0xdb9)][_0x8a6f8a(0xb85)](_0x5eb8de=>{const _0xf5d776=_0x8a6f8a;_0x5eb8de[_0xf5d776(0x6b8)]&&(_0xf5d776(0xd99)==='necla'?_0x5eb8de[_0xf5d776(0x6b8)]['forEach'](_0x44e54c=>{const _0x166065=_0xf5d776;_0x166065(0x75b)!==_0x166065(0x92b)?(_0x4f0eb8(_0x44e54c,_0x166065(0x412)),_0x4f0eb8(_0x44e54c,_0x166065(0x520))):(_0x2ebeb9[_0x166065(0x6b8)]=[],_0x5062d7(),_0x3d72b9(),_0x5a81f6(_0x166065(0x650)));}):_0x1e0150[_0xf5d776(0xa73)]=_0xf5d776(0x3bb)+_0x3fa55a+'\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>'+_0x77e0d1+_0xf5d776(0x673)+_0x51ba7a[_0xf5d776(0x3c7)]+_0xf5d776(0x50d)+_0x338d35['artist']+_0xf5d776(0xaa8)+_0x349a75['songId']+_0xf5d776(0xae4));}),localStorage[_0x8a6f8a(0xa54)](_0x8a6f8a(0x6a0),JSON[_0x8a6f8a(0xea5)](_0x393e16));}}catch(_0x267d44){console[_0x8a6f8a(0x27f)]('Failed\x20to\x20save\x20state\x20to\x20localStorage:',_0x267d44),_0x21d6ce('状态存档失败！如果这还失败，那我也没办法了。');}else{const _0x5e0bfc=_0x5bd753[_0x8a6f8a(0x272)][_0x8a6f8a(0x6d4)][0x0];if(!_0x5e0bfc)return;const _0x312988=_0x510d32[_0x8a6f8a(0x21c)](_0x5e0bfc);_0x355f2c['style'][_0x8a6f8a(0x5b7)]=_0x8a6f8a(0x8a1)+_0x312988+'\x27)';}}async function _0x49406e(){const _0x5858b9=_0x8dde82;if(_0x5858b9(0x894)===_0x5858b9(0xe67))_0x31b9ca[_0x5858b9(0x555)]['add'](_0x5858b9(0x369)),_0x3e8910[_0x5858b9(0x555)][_0x5858b9(0x9ad)](_0x5858b9(0xe84)),_0x54f2f6(()=>{const _0x74b570=_0x5858b9;_0x53d8d4[_0x74b570(0x555)]['remove'](_0x74b570(0x369));},0x190);else{if(!_0xdfbfac[_0x5858b9(0xc37)]||_0xdfbfac[_0x5858b9(0xc37)]['length']===0x0)return;console[_0x5858b9(0x7ec)]('启动用户头像恢复程序...');for(const _0x25de3b of _0xdfbfac[_0x5858b9(0xc37)]){if(!_0x25de3b[_0x5858b9(0x584)])try{if(_0x5858b9(0x225)!==_0x5858b9(0x225)){const _0x1c5550=_0x4046ce[_0x5858b9(0xc44)](_0x38579a);_0x4f378d['isArray'](_0x1c5550)&&(_0x87c096[_0x5858b9(0xee2)]=_0x1c5550[_0x5858b9(0x266)](_0x39226b=>_0x39226b[_0x5858b9(0xb95)]+'--'+_0x39226b[_0x5858b9(0x9f5)])[_0x5858b9(0xd9a)]('\x0a'));}else{const _0x21296a=await _0x4131e2(_0x5858b9(0x220)+_0x25de3b['id']);if(_0x21296a){if(_0x5858b9(0x3ff)===_0x5858b9(0x3ff))_0x25de3b[_0x5858b9(0x584)]=await _0x273922(_0x21296a);else{if(!_0x3060fb[_0x5858b9(0x958)])return _0x12b9a6[_0x5858b9(0xc37)][_0x5858b9(0x76b)](_0x1c7311=>_0x1c7311['id']===_0x1ddccc[_0x5858b9(0xb83)])||_0x800660[_0x5858b9(0xc37)][0x0];const _0x5d65fc=_0x312d6a['chats'][_0x5858b9(0x76b)](_0x362a24=>_0x362a24[_0x5858b9(0x8c7)]===_0x5858b9(0xcef)&&_0x362a24[_0x5858b9(0x41b)][_0x5858b9(0xc35)](_0x28f305[_0x5858b9(0x958)])),_0x32854a=_0x5d65fc?.[_0x5858b9(0xacb)]||_0x535c27[_0x5858b9(0xb83)];return _0x569fc4[_0x5858b9(0xc37)][_0x5858b9(0x76b)](_0x5ca088=>_0x5ca088['id']===_0x32854a)||_0x29750a[_0x5858b9(0xc37)][0x0];}}}}catch(_0x5cd5a2){console[_0x5858b9(0x27f)]('为用户\x20'+_0x25de3b['name']+'\x20('+_0x25de3b['id']+_0x5858b9(0x2dd),_0x5cd5a2);}}console['log'](_0x5858b9(0xc0d));}}async function _0x200303(){const _0x4b287a=_0x8dde82;if(!_0xdfbfac['characters']||_0xdfbfac[_0x4b287a(0x94d)][_0x4b287a(0x1e2)]===0x0){console['log'](_0x4b287a(0xdfd));return;}console['log']('启动头像恢复程序...');for(const _0x129982 of _0xdfbfac[_0x4b287a(0x94d)]){if(!_0x129982[_0x4b287a(0x584)]){if(_0x4b287a(0x19d)!==_0x4b287a(0x19d)){const _0x578152=_0x84f786[_0x4b287a(0x272)]['files'][0x0];if(!_0x578152)return;const _0x35bed0=_0x1e6c07[_0x4b287a(0x21c)](_0x578152);_0x395115[_0x4b287a(0x329)]['backgroundImage']='url(\x27'+_0x35bed0+'\x27)';}else try{const _0x502eb4=await _0x4131e2(_0x4b287a(0xa53)+_0x129982['id']);_0x502eb4&&(_0x129982['avatar']=await _0x273922(_0x502eb4));}catch(_0x104af6){console[_0x4b287a(0x27f)](_0x4b287a(0x6da)+_0x129982[_0x4b287a(0xb95)]+'\x20('+_0x129982['id']+_0x4b287a(0x2dd),_0x104af6);}}}console['log'](_0x4b287a(0x35f));}function _0x1dcdc0(){const _0x457d8d=_0x8dde82;let _0x516ac8=null;try{_0x516ac8=localStorage[_0x457d8d(0x443)](_0x457d8d(0x6a0));}catch(_0x2902f8){_0x457d8d(0xa4e)===_0x457d8d(0x656)?(_0x39e406['textContent']=_0x457d8d(0xa1b),_0x30418d['innerHTML']=_0x457d8d(0x5c8)):console['error'](_0x457d8d(0x72f),_0x2902f8);}if(_0x516ac8)try{const _0x2044ac=JSON[_0x457d8d(0xc44)](_0x516ac8),_0x5aa830={..._0xdfbfac},_0x47cf52={..._0x5aa830,..._0x2044ac};_0x47cf52[_0x457d8d(0x3a8)]={..._0x5aa830['preferences'],..._0x2044ac[_0x457d8d(0x3a8)]||{}},_0x47cf52[_0x457d8d(0x5e0)]={..._0x5aa830['apiSettings'],..._0x2044ac[_0x457d8d(0x5e0)]||{}},_0x47cf52[_0x457d8d(0x451)]=null,_0x47cf52['isGenerating']=![],Object[_0x457d8d(0x24a)](_0xdfbfac,_0x47cf52);}catch(_0x44ee81){'BtIZI'!=='qLHgM'?(console[_0x457d8d(0x27f)](_0x457d8d(0x335),_0x44ee81),localStorage[_0x457d8d(0x287)]('appState')):_0x3ecd39[_0x457d8d(0x101)]=_0x1a7137[_0x457d8d(0xb95)]||_0x457d8d(0x60f)+_0x5ef9b7['participantIds'][_0x457d8d(0x1e2)]+')';}const _0x1db8fe=_0xdfbfac[_0x457d8d(0x94d)][_0x457d8d(0x1e2)]===0x0;if(!_0xdfbfac['chats']['find'](_0x3a1d26=>_0x3a1d26['id']===_0xdfbfac[_0x457d8d(0x8ed)])){if(_0x457d8d(0x73b)!=='lYTqj'){if(!_0x378be7)return'';const _0x53a46d=new _0x42d7b8(_0x9c9278),_0xd2e7fd=_0x381763(_0x53a46d[_0x457d8d(0xc43)]())[_0x457d8d(0x4b9)](0x2,'0'),_0x4ebc12=_0x5b0157(_0x53a46d[_0x457d8d(0x212)]())[_0x457d8d(0x4b9)](0x2,'0');return _0xd2e7fd+':'+_0x4ebc12;}else _0xdfbfac[_0x457d8d(0x8ed)]=_0xdfbfac[_0x457d8d(0xc1b)][0x0]?.['id']||null;}return _0x516ac8&&_0x31622b(),_0xdfbfac[_0x457d8d(0xbf2)]=0x32,_0x1db8fe;}function _0x1aa46f(){const _0x48b581=_0x8dde82;if(_0x48b581(0x62f)==='iibRz')_0x3b2656[_0x48b581(0x329)]['position']=_0x48b581(0xda0),_0x34eea9[_0x48b581(0x329)][_0x48b581(0x811)]='35%',_0x3126e4['style'][_0x48b581(0x984)]=_0x48b581(0xa82),_0x365bfb[_0x48b581(0x329)]['transform']='translateX(-50%)',_0x4e5fef[_0x48b581(0x329)][_0x48b581(0xc66)]=_0x48b581(0x82b);else{if(!_0xdfbfac[_0x48b581(0x8ed)])return;try{localStorage[_0x48b581(0xa54)](_0x48b581(0x16c)+_0xdfbfac[_0x48b581(0x8ed)],JSON[_0x48b581(0xea5)](_0xdfbfac[_0x48b581(0x3a4)]));}catch(_0x5a915c){if(_0x48b581(0x84b)!==_0x48b581(0x84b)){const _0x38e8b3=new _0x115a22(_0x54ed1c['timestamp']);_0x4780cb+=_0x48b581(0x56f)+_0x58b258[_0x48b581(0xb95)]+_0x48b581(0x3c9)+_0x2fb6d9(_0x38e8b3)+'\x0a';}else console[_0x48b581(0x27f)](_0x48b581(0x956),_0x5a915c),_0x21d6ce(_0x48b581(0x5b0));}}}function _0x346e88(){const _0x219cd2=_0x8dde82;if(!_0xdfbfac[_0x219cd2(0x8ed)]){_0xdfbfac[_0x219cd2(0x3a4)]=[],_0x192646();return;}let _0x2e676f=null;try{_0x2e676f=localStorage[_0x219cd2(0x443)](_0x219cd2(0x16c)+_0xdfbfac[_0x219cd2(0x8ed)]);}catch(_0x481374){_0x219cd2(0xd48)!==_0x219cd2(0xc2b)?console[_0x219cd2(0x27f)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20'+_0xdfbfac['activeChatId'],_0x481374):(_0x257e09=new _0x242e88(_0x283a69['max'][_0x219cd2(0x8ff)](null,_0x1a2adf)),_0x4718db=_0x100ee6[_0x219cd2(0x985)](_0x219cd2(0x731),{'dateStyle':_0x219cd2(0x710),'timeStyle':'short'}));}let _0x29d88a=[];if(_0x2e676f)try{if('faPYv'===_0x219cd2(0xc02)){const _0x21783e=JSON[_0x219cd2(0xc44)](_0x2e676f);if(Array['isArray'](_0x21783e)){if(_0x219cd2(0x533)==='CXSNE'){_0x43284c[_0x219cd2(0xca6)]('JSON解析失败('+_0x36fc40['id']+_0x219cd2(0x866),_0x3cd1c7['message']);try{_0x184054=_0x22c814(_0x27d304);if(!_0x5ac907)throw new _0x1a0946(_0x219cd2(0x644));_0x2208d7[_0x219cd2(0x7ec)](_0x219cd2(0xa70)+_0x8d9421['id']+_0x219cd2(0xb2e));}catch(_0x41719a){throw _0x2e59bf;}}else _0x29d88a=_0x21783e['filter'](_0x58d5f4=>_0x58d5f4&&typeof _0x58d5f4==='object'&&typeof _0x58d5f4['role']===_0x219cd2(0x193)&&typeof _0x58d5f4[_0x219cd2(0xee)]!=='undefined');}}else{const _0x3d7597=_0x3c43c8['getElementById'](_0x219cd2(0xc6a));_0x3d7597[_0x219cd2(0xa73)]='';const _0x42a559=_0x57d7ba[_0x219cd2(0x94d)][_0x219cd2(0xeb3)](_0x448157=>_0x257c52[_0x219cd2(0xc1b)][_0x219cd2(0x7d1)](_0x50fa8f=>_0x50fa8f[_0x219cd2(0x8c7)]===_0x219cd2(0xcef)&&_0x50fa8f[_0x219cd2(0x41b)][_0x219cd2(0xc35)](_0x448157['id'])));if(_0x42a559[_0x219cd2(0x1e2)]===0x0){_0x3d7597[_0x219cd2(0xa73)]=_0x219cd2(0x330);return;}_0x42a559[_0x219cd2(0xb85)](_0x586c58=>{const _0x3d7cbc=_0x219cd2,_0x1232ca=_0x5b6513[_0x3d7cbc(0x8f1)]('li');_0x1232ca[_0x3d7cbc(0x213)]='character-item',_0x1232ca[_0x3d7cbc(0x63f)]['charId']=_0x586c58['id'],_0x1232ca[_0x3d7cbc(0xa73)]=_0x3d7cbc(0xc88)+(_0x586c58[_0x3d7cbc(0x584)]||_0x324b00)+_0x3d7cbc(0x49c)+_0x586c58[_0x3d7cbc(0xb95)]+_0x3d7cbc(0x9e3)+(_0x586c58[_0x3d7cbc(0x174)]||'私聊')+_0x3d7cbc(0x7da),_0x1232ca[_0x3d7cbc(0x3a0)](_0x3d7cbc(0x288),()=>{_0x1c7226(_0x586c58['id']);}),_0x3d7597[_0x3d7cbc(0x5b8)](_0x1232ca);});}}catch(_0x54642b){console[_0x219cd2(0x27f)](_0x219cd2(0xee9)+_0xdfbfac['activeChatId']+_0x219cd2(0x413),_0x54642b);try{localStorage[_0x219cd2(0x287)](_0x219cd2(0x16c)+_0xdfbfac[_0x219cd2(0x8ed)]);}catch(_0x2c8229){console[_0x219cd2(0x27f)](_0x219cd2(0x200),_0x2c8229);}}_0xdfbfac['conversationHistory']=_0x29d88a;}async function _0x8aaa3a(){const _0x5d8f1b=_0x8dde82,_0xb90b1e=document['getElementById'](_0x5d8f1b(0x8b6));if(!_0xb90b1e){if(_0x5d8f1b(0xe26)===_0x5d8f1b(0x682)){const _0x31a77f=_0x13b1aa[_0x5d8f1b(0xee2)]['trim']();_0x31a77f&&(_0xfac87e(_0x31a77f),_0xa79547['value']='',_0x16ca6c(_0x221359,0x64));}else{console[_0x5d8f1b(0x27f)]('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!');return;}}try{let _0x2e4809=await _0x4131e2(_0x5d8f1b(0x419));if(!_0x2e4809){const _0x492ba9=localStorage[_0x5d8f1b(0x443)]('customWallpaper');_0x492ba9&&(console['log'](_0x5d8f1b(0x4b2)),_0x2e4809=await _0x2b279d(_0x492ba9),await _0x510f28(_0x5d8f1b(0x419),_0x2e4809),localStorage[_0x5d8f1b(0x287)]('customWallpaper'));}_0x2e4809?(_0xb90b1e[_0x5d8f1b(0x329)]['backgroundImage']=_0x5d8f1b(0x1c2)+URL['createObjectURL'](_0x2e4809)+')',_0xb90b1e[_0x5d8f1b(0x329)]['backgroundSize']=_0x5d8f1b(0x267),_0xb90b1e['style'][_0x5d8f1b(0x453)]=_0x5d8f1b(0x6cc)):_0xb90b1e['style'][_0x5d8f1b(0x5b7)]='';}catch(_0x2f3bf1){console['error']('加载壁纸失败:',_0x2f3bf1),_0xb90b1e&&(_0xb90b1e[_0x5d8f1b(0x329)][_0x5d8f1b(0x5b7)]='');}}function _0x36a693(){const _0x576153=_0x8dde82,_0x20ff0b=localStorage[_0x576153(0x443)](_0x576153(0x72e));if(_0x20ff0b){if('qobEY'!==_0x576153(0x881))document[_0x576153(0x1d6)](_0x576153(0xa44))[_0x576153(0x329)][_0x576153(0x8eb)]('--feed-bg-image',_0x576153(0x1c2)+_0x20ff0b+')');else{const _0xb7cb8b=_0x4a4a22[_0x576153(0xb6c)]('.screen.active');if(!_0xb7cb8b)return;_0xb7cb8b['id']==='meeting-view-screen'?_0x31d68f():_0x2df9bc();}}else _0x576153(0xd0c)!==_0x576153(0xa14)?document['getElementById']('music-screen')['style'][_0x576153(0x8eb)](_0x576153(0x7df),'none'):_0x698858['pendingProfileRefinement']?_0x525c33():_0x1796e1();}async function _0x33fb69(_0x162b49){const _0x827d05=_0x8dde82;if(_0x827d05(0xd90)!==_0x827d05(0x241))try{_0x827d05(0xe9b)!==_0x827d05(0x8a2)?(await _0x510f28('wallpaper_main',_0x162b49),await _0x8aaa3a(),_0x21d6ce(_0x827d05(0x46c))):_0x2d2bcc();}catch(_0xd65761){if(_0x827d05(0x74f)==='VgRTi')console[_0x827d05(0x27f)](_0x827d05(0xb35),_0xd65761),_0x21d6ce('保存壁纸失败:\x20'+_0xd65761[_0x827d05(0x8ac)]);else throw new _0x3fadd8(_0x827d05(0xc0f));}else{if(_0x533d54)_0x21b4c0[_0x827d05(0xcab)]=_0x4090eb[_0x827d05(0x21c)](_0x35b51b);else _0x1e96f8['alt']=_0x827d05(0xe9c);}}function _0xda65ed(_0x406a1f){const _0x2a5e2f=_0x8dde82;if(_0x2a5e2f(0xe05)!=='tFnVV'){const _0x5787bd={'quotedMessage':null,'content':_0x406a1f},_0x5a73cc=_0x406a1f[_0x2a5e2f(0x4dc)](/^\[引用\|(.*?)\|(.*?)\]\s*/);return _0x5a73cc&&(_0x2a5e2f(0x3da)!==_0x2a5e2f(0xe2a)?(_0x5787bd[_0x2a5e2f(0xd22)]={'sender':_0x5a73cc[0x1][_0x2a5e2f(0xcd2)](),'content':_0x5a73cc[0x2][_0x2a5e2f(0xcd2)]()},_0x5787bd[_0x2a5e2f(0xee)]=_0x406a1f[_0x2a5e2f(0x3b1)](_0x5a73cc[0x0][_0x2a5e2f(0x1e2)])['trim']()):_0x59f028[_0x2a5e2f(0x329)]['color']=_0x2a5e2f(0xb48)),_0x5787bd;}else{if(!_0x58674f)return'';return _0x284191['replace'](/&/g,_0x2a5e2f(0x111))[_0x2a5e2f(0xbe2)](/</g,'&lt;')[_0x2a5e2f(0xbe2)](/>/g,_0x2a5e2f(0x38d))[_0x2a5e2f(0xbe2)](/"/g,_0x2a5e2f(0x762))['replace'](/'/g,_0x2a5e2f(0x402));}}const _0x13e7ae=document[_0x8dde82(0x1d6)](_0x8dde82(0xb28)),_0x7015f8=document[_0x8dde82(0x1d6)](_0x8dde82(0xce4)),_0x4c29d3=document[_0x8dde82(0x1d6)](_0x8dde82(0xada)),_0x4852dd=document['getElementById'](_0x8dde82(0xace)),_0x5295a4=document[_0x8dde82(0x1d6)](_0x8dde82(0xde7)),_0x4d7f9d=document[_0x8dde82(0x1d6)](_0x8dde82(0x4e4)),_0x19ceac=document[_0x8dde82(0x1d6)](_0x8dde82(0xc8d)),_0x4f6c79=document[_0x8dde82(0x1d6)](_0x8dde82(0x7a3)),_0x29bd3d=document[_0x8dde82(0x1d6)]('edit-message-textarea'),_0x6f7268=document[_0x8dde82(0x1d6)](_0x8dde82(0x6b5)),_0x1b4488=document[_0x8dde82(0x1d6)](_0x8dde82(0xbc1));let _0x5baca6=null;function _0x590908(_0x436f80){const _0x26c6d7=_0x8dde82;_0x5baca6=_0x436f80,_0x13e7ae[_0x26c6d7(0x555)][_0x26c6d7(0x1cd)]('show');}function _0x230145(){const _0x23b02c=_0x8dde82;_0x13e7ae['classList'][_0x23b02c(0x9ad)](_0x23b02c(0x36e));}function _0x4353de(){_0x230145(),_0x5baca6=null;}function _0x300391(){const _0x28970d=_0x8dde82;if(_0x28970d(0xc00)!=='scHWz')_0x7e8c38=_0x292975,_0x3aa130[_0x28970d(0x555)][_0x28970d(0x1cd)](_0x28970d(0x36e));else{if(_0x5baca6===null)return;_0xdfbfac[_0x28970d(0x3a4)]['splice'](_0x5baca6,0x1),_0x1aa46f(),_0x1891dc(),_0x4353de();}}function _0x1dc3a2(){const _0x3276a5=_0x8dde82;if(_0x3276a5(0x409)===_0x3276a5(0x409)){if(_0x5baca6===null)return;const _0x2f4817=_0xdfbfac['conversationHistory'][_0x5baca6];if(!_0x2f4817)return;_0x29bd3d['value']=_0x2f4817[_0x3276a5(0xee)],_0x230145(),_0x19ceac[_0x3276a5(0x555)][_0x3276a5(0x1cd)]('show'),_0x29bd3d[_0x3276a5(0xc10)]();}else _0x550d28(),_0x2328eb();}function _0x23de02(){const _0x41ad5c=_0x8dde82;if(_0x5baca6===null)return;const _0x747866=_0x29bd3d[_0x41ad5c(0xee2)]['trim']();if(_0x747866===''){_0x321af1();return;}const _0x3f2e64=_0xdfbfac[_0x41ad5c(0x3a4)][_0x5baca6];_0x3f2e64&&(_0x3f2e64[_0x41ad5c(0xee)]=_0x747866,_0x1aa46f(),_0x1891dc()),_0x19ceac['classList']['remove'](_0x41ad5c(0x36e)),_0x5baca6=null;}function _0x321af1(){const _0x27b8a9=_0x8dde82;_0x27b8a9(0x4f8)===_0x27b8a9(0x305)?_0x16eaf8['src']=_0x2554fd[_0x27b8a9(0x412)]:(_0x19ceac['classList'][_0x27b8a9(0x9ad)](_0x27b8a9(0x36e)),_0x5baca6=null);}_0x7015f8[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x4353de),_0x5295a4[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x4353de),_0x4852dd['addEventListener'](_0x8dde82(0x288),_0x300391),_0x4c29d3[_0x8dde82(0x3a0)]('click',_0x1dc3a2),_0x4d7f9d[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x339540),_0x324560[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x2e618b),_0x6f7268[_0x8dde82(0x3a0)]('click',_0x23de02),_0x1b4488['addEventListener'](_0x8dde82(0x288),_0x321af1),_0x4f6c79['addEventListener'](_0x8dde82(0x288),_0x321af1);function _0x339540(){const _0x581d10=_0x8dde82;if(_0x5baca6===null)return;const _0x25a4c3=_0xdfbfac[_0x581d10(0x3a4)][_0x5baca6];if(!_0x25a4c3)return;const _0x59a16f=_0x1d801f();let _0x4661c9='未知';if(_0x25a4c3[_0x581d10(0xefb)]===_0x581d10(0xa29)){if(_0x581d10(0xd5f)!=='TTEiP'){const _0x124c0a=_0x127751[_0x581d10(0x33e)](_0x23dc61/0x3c);if(_0x124c0a<0x30)_0x518cd4+='\x0a-\x20**对话状态**:\x20群里在'+_0x124c0a+_0x581d10(0xd7a);else _0x2822a2+=_0x581d10(0x356)+_0x1da396[_0x581d10(0x33e)](_0x124c0a/0x18)+'天没动静了。你的角色们应该发起新的问候或话题。';}else{const _0x5f41d0=_0x58761c(_0xdfbfac['activeChatId']);_0x4661c9=_0x5f41d0[_0x581d10(0xb95)]||'我';}}else{const _0x22332b=_0x25a4c3[_0x581d10(0xdf8)]||_0x59a16f?.['participantIds'][0x0],_0x12d0dd=_0x5844c7(_0x22332b);_0x4661c9=_0x12d0dd?_0x12d0dd[_0x581d10(0xb95)]:'角色';}let _0x15b899=_0x25a4c3[_0x581d10(0xee)]||'';if(_0x25a4c3[_0x581d10(0x8a6)])_0x15b899=_0x581d10(0x528);if(_0x25a4c3[_0x581d10(0x412)])_0x15b899=_0x581d10(0x626);if(_0x15b899[_0x581d10(0x1e2)]>0x32)_0x15b899=_0x15b899['substring'](0x0,0x32)+_0x581d10(0xd45);_0xdfbfac[_0x581d10(0xe91)]={'sender':_0x4661c9,'content':_0x15b899},_0x2dbb9e(),_0x4353de(),_0x243ba8['focus']();}function _0x2dbb9e(){const _0x481736=_0x8dde82;if(_0x481736(0xe41)===_0x481736(0x915))_0x105ee2[_0x481736(0xe7f)]();else{if(!_0xdfbfac['activeQuote'])return;_0x3846fe[_0x481736(0x101)]=_0x481736(0x8fd)+_0xdfbfac['activeQuote'][_0x481736(0x466)],_0x44f986[_0x481736(0x101)]=_0xdfbfac[_0x481736(0xe91)][_0x481736(0xee)],_0x401482[_0x481736(0x329)][_0x481736(0xc66)]='block';}}function _0x2e618b(){const _0x3ebad9=_0x8dde82;_0xdfbfac[_0x3ebad9(0xe91)]=null,_0x401482[_0x3ebad9(0x329)]['display']='none';}function _0x137a40(_0x1d8c21,_0x4842ba){const _0x1fec92=_0x8dde82,_0x788693=document['getElementById'](_0x1fec92(0xebb));if(_0x788693){if(_0x1fec92(0x5c2)!==_0x1fec92(0x5c2))_0x4211e9[_0x1fec92(0x7ec)]('[Noir\x27s\x20Brain]:\x20启动对\x20'+_0x139dda+_0x1fec92(0xb3e)),_0x5eee80=_0x417ad9[_0x1fec92(0xea5)]({'version':0x2,'character_id':_0x1887a4,'last_updated':_0x46e3e6(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'tone_style':'','emotion_summary':'','response_patterns':'','typical_emotions':null,'common_phrases':null},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]});else{if(_0x1d8c21===_0x1fec92(0x410)){if(_0x1fec92(0x754)!==_0x1fec92(0x1c5))_0x788693['style'][_0x1fec92(0xc66)]=_0x1fec92(0x82b);else{const _0x5c4879=_0x457990[_0x1f9164[_0x1fec92(0x1e2)]-0x1];(!_0x4ef450||_0x5c4879['timestamp']>_0x5e62e9['timestamp'])&&(_0x1e3c7c=_0x5c4879);}}else _0x788693[_0x1fec92(0x329)][_0x1fec92(0xc66)]=_0x1fec92(0x338);}}_0xc7a7e9=_0x4842ba||null,Object[_0x1fec92(0x100)](_0xf20f3c)[_0x1fec92(0xb85)](_0x2973df=>_0x2973df[_0x1fec92(0x555)]['remove'](_0x1fec92(0x691))),_0xf20f3c[_0x1d8c21]&&(_0x1fec92(0x9cd)===_0x1fec92(0x9cd)?_0xf20f3c[_0x1d8c21]['classList'][_0x1fec92(0x1cd)]('active'):_0x217fc4['includes'](_0x1dce60['toLowerCase']())&&_0x2380a1[_0x1fec92(0x1e2)]<_0x212c1b&&_0x541593['push'](_0x1fec92(0x724)+_0x5395fe+_0x1fec92(0xc21))),_0x1d8c21!=='chat'&&('hEcZg'===_0x1fec92(0x6eb)?(_0x4578e5[_0x1fec92(0xd22)]={'sender':_0x39c7f4[0x1][_0x1fec92(0xcd2)](),'content':_0x137217[0x2][_0x1fec92(0xcd2)]()},_0x1c3856['content']=_0x240333[_0x1fec92(0x3b1)](_0x1a1d23[0x0][_0x1fec92(0x1e2)])[_0x1fec92(0xcd2)]()):(_0x43f54a[_0x1fec92(0x555)][_0x1fec92(0x1cd)](_0x1fec92(0x369)),_0x43f54a[_0x1fec92(0x555)][_0x1fec92(0x9ad)](_0x1fec92(0xe84)),setTimeout(()=>{const _0x4e964f=_0x1fec92;_0x43f54a['classList'][_0x4e964f(0x9ad)](_0x4e964f(0x369));},0x190)));}function _0x1bc603(_0x314055){const _0x4e0488=_0x8dde82;if(_0x4e0488(0xc92)===_0x4e0488(0x246))_0x3e0888[_0x4e0488(0xcab)]&&(_0x50976f[_0x4e0488(0xc2a)]?_0x296cb4[_0x4e0488(0xe7f)]():_0x4433ce[_0x4e0488(0x57a)]());else{console[_0x4e0488(0x7ec)]('showChatView\x20called\x20with\x20show='+_0x314055+_0x4e0488(0xb9d)+_0x43f54a[_0x4e0488(0x555)][_0x4e0488(0xcbc)](_0x4e0488(0x369)));if(_0x43f54a['classList'][_0x4e0488(0xcbc)]('transitioning')){console['warn']('showChatView\x20ignored:\x20already\x20transitioning.');return;}_0x43f54a[_0x4e0488(0x555)]['add'](_0x4e0488(0x369)),_0x43f54a[_0x4e0488(0x329)][_0x4e0488(0x5d8)]=_0x4e0488(0x338);if(_0x314055)_0x43f54a[_0x4e0488(0x555)][_0x4e0488(0x1cd)]('show-chat-view');else{if(_0x4e0488(0x87a)!==_0x4e0488(0x87a)){const _0x4abe6c='chat_char_'+_0x3f216a[_0x4e0488(0x4a2)]();_0x644842(_0x4abe6c);}else _0x43f54a[_0x4e0488(0x555)][_0x4e0488(0x9ad)](_0x4e0488(0xe84));}setTimeout(()=>{const _0x47aaac=_0x4e0488;if(_0x47aaac(0x50b)!==_0x47aaac(0x50b)){const _0x33d720=_0x33bcaf[_0x47aaac(0x5ee)][_0x47aaac(0x266)](_0x50e4dd=>_0x11a513[_0x47aaac(0xe7d)]['find'](_0x78d2fd=>_0x78d2fd['id']===_0x50e4dd))[_0x47aaac(0xeb3)](_0x5e49d3)[_0x47aaac(0x266)](_0x2a630=>'\x0a\x0a##\x20世界书条目:\x20'+_0x2a630[_0x47aaac(0xb95)]+'\x0a'+_0x2a630[_0x47aaac(0xee)])[_0x47aaac(0xd9a)]('');if(_0x33d720)_0x350ee9=_0x47aaac(0xebc)+_0x33d720;}else _0x43f54a['classList'][_0x47aaac(0x9ad)]('transitioning'),_0x43f54a[_0x47aaac(0x329)][_0x47aaac(0x5d8)]='',console[_0x47aaac(0x7ec)](_0x47aaac(0xd10)+_0x314055+'.');},0x1c2);}}async function _0x117428(){const _0x3eacae=_0x8dde82;_0x3c11f2['innerHTML']='';const _0x1ffcc9=_0xdfbfac['chats'][_0x3eacae(0x266)](_0x249b6c=>{const _0x39a617=_0x3eacae;if(_0x39a617(0xa34)!==_0x39a617(0x4ab)){if(_0x249b6c['type']===_0x39a617(0xcef)){const _0x503516=_0x5844c7(_0x249b6c[_0x39a617(0x41b)][0x0]);return _0x503516?_0x4131e2(_0x39a617(0xa53)+_0x503516['id']):Promise[_0x39a617(0xc16)](null);}else{if(_0x39a617(0xe16)===_0x39a617(0xe16))return _0x4131e2(_0x39a617(0x80a)+_0x249b6c['id']);else throw new _0x264972(_0x39a617(0x644));}}else{let _0x464cd9=_0x52ca6a[_0x39a617(0xcd2)]();const _0xd2eea2=_0x464cd9[_0x39a617(0x4dc)](/(\[[\s\S]*\])/);_0xd2eea2&&(_0x464cd9=_0xd2eea2[0x1]);const _0x158a87=_0x54b0cf[_0x39a617(0xc44)](_0x464cd9);if(_0x4c8423[_0x39a617(0xca5)](_0x158a87)){_0x423f62['activeMeetingScriptQueue']=[..._0x158a87],_0x190cdc['characterLastScripts'][_0x32b5db['id']]=[..._0x158a87],_0xbad24d();const _0x42002c=_0x158a87[_0x39a617(0x266)](_0x547e4a=>_0x547e4a[_0x39a617(0x8b5)]==='narrator'?_0x547e4a[_0x39a617(0x1c6)]:_0x547e4a[_0x39a617(0x8b5)]+':\x20'+_0x547e4a[_0x39a617(0x1c6)])[_0x39a617(0xd9a)]('\x0a\x0a');_0x290b9d[_0x39a617(0x3a4)][_0x39a617(0xb66)]({'role':'assistant','senderId':_0x4e83b4['id'],'timestamp':_0x3bc5c4['now'](),'isOffline':!![],'content':_0x42002c});}}}),_0x332d5d=await Promise[_0x3eacae(0x7c7)](_0x1ffcc9);_0xdfbfac[_0x3eacae(0xc1b)][_0x3eacae(0xb85)]((_0x41107f,_0x44a41c)=>{const _0x360ada=_0x3eacae,_0x2a3d2f=document[_0x360ada(0x8f1)]('li');_0x2a3d2f[_0x360ada(0x213)]=_0x360ada(0x9f1),_0x2a3d2f[_0x360ada(0x63f)]['id']=_0x41107f['id'];let _0x15510d=_0x1af29b,_0x2ea781='群聊',_0x38ded6='';const _0x58c9be=_0x332d5d[_0x44a41c];_0x58c9be&&(_0x15510d=URL['createObjectURL'](_0x58c9be));if(_0x41107f[_0x360ada(0x8c7)]===_0x360ada(0xcef)){const _0x47d7b3=_0x5844c7(_0x41107f[_0x360ada(0x41b)][0x0]);_0x47d7b3?(!_0x58c9be&&(_0x360ada(0xd55)!=='vAVTc'?(_0x3abdb1['participantIds'][_0x360ada(0xb85)](_0x580143=>{const _0x308b00=_0x360ada,_0x66ef80=_0x43c47(_0x580143);if(_0x66ef80){const _0x3180f0=_0x4dd70e[_0x308b00(0x8f1)](_0x308b00(0x805));_0x3180f0[_0x308b00(0xee2)]=_0x66ef80['id'],_0x3180f0[_0x308b00(0x101)]=_0x66ef80[_0x308b00(0xb95)],_0xfd94cb[_0x308b00(0x5b8)](_0x3180f0);}}),_0x30a0a8[_0x360ada(0x329)]['display']='block'):_0x15510d=_0x47d7b3[_0x360ada(0x584)]||_0x1af29b),_0x2ea781=_0x47d7b3[_0x360ada(0xb95)]||_0x360ada(0xb76),_0x38ded6=_0x47d7b3[_0x360ada(0x174)]||'私聊'):_0x360ada(0xdd1)===_0x360ada(0xdd1)?(_0x2ea781=_0x360ada(0x842),_0x38ded6=_0x360ada(0x6c4)):_0x4f50dc[_0x360ada(0x27f)](_0x360ada(0x275),_0x570bbb);}else _0x2ea781=_0x41107f['name']||_0x360ada(0x9a2),_0x38ded6=_0x41107f[_0x360ada(0x41b)][_0x360ada(0x1e2)]+_0x360ada(0x1ad);_0x2a3d2f['innerHTML']=_0x360ada(0xc88)+_0x15510d+_0x360ada(0x49c)+_0x2ea781+_0x360ada(0x9e3)+_0x38ded6+_0x360ada(0x7da),_0x2a3d2f[_0x360ada(0xb6c)](_0x360ada(0x628))[_0x360ada(0x3a0)]('click',()=>{_0x204ca2(_0x41107f['id']);}),_0x3c11f2['appendChild'](_0x2a3d2f);});}function _0x1b7661(){const _0x3ba2c9=_0x8dde82;if(_0x3ba2c9(0x7e2)!==_0x3ba2c9(0xe0b)){const _0x207ff8=document[_0x3ba2c9(0x1d6)](_0x3ba2c9(0xc6a));_0x207ff8[_0x3ba2c9(0xa73)]='';const _0x3b92e3=_0xdfbfac[_0x3ba2c9(0x94d)][_0x3ba2c9(0xeb3)](_0x2a2db4=>_0xdfbfac[_0x3ba2c9(0xc1b)][_0x3ba2c9(0x7d1)](_0xec0eba=>_0xec0eba['type']===_0x3ba2c9(0xcef)&&_0xec0eba[_0x3ba2c9(0x41b)][_0x3ba2c9(0xc35)](_0x2a2db4['id'])));if(_0x3b92e3['length']===0x0){if(_0x3ba2c9(0x47e)==='hDMfT')_0x5e36eb[_0x3ba2c9(0x88a)]={'response_mime_type':_0x3ba2c9(0x6a5)};else{_0x207ff8[_0x3ba2c9(0xa73)]=_0x3ba2c9(0x330);return;}}_0x3b92e3['forEach'](_0x1b9a72=>{const _0x42f51f=_0x3ba2c9,_0x1b64b0=document['createElement']('li');_0x1b64b0[_0x42f51f(0x213)]=_0x42f51f(0x9f1),_0x1b64b0[_0x42f51f(0x63f)][_0x42f51f(0xe9)]=_0x1b9a72['id'],_0x1b64b0[_0x42f51f(0xa73)]=_0x42f51f(0xc88)+(_0x1b9a72['avatar']||_0x1af29b)+_0x42f51f(0x49c)+_0x1b9a72[_0x42f51f(0xb95)]+_0x42f51f(0x9e3)+(_0x1b9a72['remark']||'私聊')+_0x42f51f(0x7da),_0x1b64b0[_0x42f51f(0x3a0)](_0x42f51f(0x288),()=>{_0x522592(_0x1b9a72['id']);}),_0x207ff8[_0x42f51f(0x5b8)](_0x1b64b0);});}else{const _0x446e0c=_0x5e359f[_0x3ba2c9(0xdb9)][_0x3ba2c9(0x76b)](_0x10c865=>_0x10c865['id']===_0xcc0f7[_0x3ba2c9(0x961)]),_0x54cad8=_0x446e0c?.[_0x3ba2c9(0xacb)];let _0x154884=_0x5bf9a3[_0x3ba2c9(0xc37)][_0x3ba2c9(0x76b)](_0x179ed1=>_0x179ed1['id']===_0x54cad8);!_0x154884&&(_0x154884=_0x951d84['userProfiles'][_0x3ba2c9(0x76b)](_0x4c6602=>_0x4c6602['id']===_0x4e302d[_0x3ba2c9(0xb83)])),!_0x154884&&(_0x154884=_0x4a52a7[_0x3ba2c9(0xc37)][0x0]),_0x154884&&(_0x41cf43[_0x3ba2c9(0x1d6)](_0x3ba2c9(0x331))[_0x3ba2c9(0xcab)]=_0x154884[_0x3ba2c9(0x584)]||_0x3c4fce);}}async function _0x522592(_0x42da02){const _0x22f180=_0x8dde82,_0x2299a3=_0x5844c7(_0x42da02);if(!_0x2299a3)return;_0xdfbfac['activeMeetingCharId']=_0x42da02,document[_0x22f180(0x1d6)](_0x22f180(0xdb8))[_0x22f180(0x101)]=_0x2299a3[_0x22f180(0xb95)];const _0x3412da=document['getElementById'](_0x22f180(0x301));_0x3412da[_0x22f180(0x329)][_0x22f180(0x5b7)]='none',document[_0x22f180(0x1d6)](_0x22f180(0x66f))[_0x22f180(0xa73)]=_0x22f180(0xef3),document[_0x22f180(0x1d6)](_0x22f180(0x2a7))['textContent']=_0x22f180(0x285),document[_0x22f180(0x1d6)](_0x22f180(0xd8e))[_0x22f180(0x101)]='旁白',document[_0x22f180(0x1d6)](_0x22f180(0x905))['src']='',_0x137a40(_0x22f180(0x4c8),_0x22f180(0xc26)),setTimeout(async()=>{const _0x34f5a6=_0x22f180;if(_0x34f5a6(0xb1f)!==_0x34f5a6(0x613))try{const _0x59a893=await _0x4131e2(_0x34f5a6(0x6df)+_0x42da02);_0x59a893&&(_0x3412da['style'][_0x34f5a6(0x5b7)]=_0x34f5a6(0x8a1)+URL[_0x34f5a6(0x21c)](_0x59a893)+'\x27)',_0x3412da[_0x34f5a6(0x329)][_0x34f5a6(0xd79)]=_0x34f5a6(0x267),_0x3412da['style']['backgroundPosition']='center');const _0x10764e=_0xdfbfac['chats'][_0x34f5a6(0x76b)](_0x35ed03=>_0x35ed03[_0x34f5a6(0x8c7)]===_0x34f5a6(0xcef)&&_0x35ed03[_0x34f5a6(0x41b)]['includes'](_0x42da02));if(_0x10764e)_0xdfbfac[_0x34f5a6(0x8ed)]=_0x10764e['id'],_0x31622b(),_0x346e88();else{if(_0x34f5a6(0xe8e)!==_0x34f5a6(0x85e))_0xdfbfac[_0x34f5a6(0x3a4)]=[];else{_0x221287[_0x34f5a6(0x27f)](_0x34f5a6(0x118)+_0x2aa514[_0x34f5a6(0xb95)]+'\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。');return;}}_0x112531(_0x42da02),_0x4fb37c(),_0x5c0d02();if(_0x406be8)clearInterval(_0x406be8);_0x2e4cbc(),_0x406be8=setInterval(_0x2e4cbc,0x2710),document[_0x34f5a6(0x1d6)]('galgame-sprite-adjust-ui')[_0x34f5a6(0x329)][_0x34f5a6(0xc66)]='block';}catch(_0x532aa2){console[_0x34f5a6(0x27f)]('加载见面场景时出错:',_0x532aa2),document[_0x34f5a6(0x1d6)](_0x34f5a6(0x66f))[_0x34f5a6(0xa73)]=_0x34f5a6(0x428);}else{const _0x192951=new _0xba4411();_0x192951['onloadend']=()=>_0x2fd20c(_0x192951['result']),_0x192951['onerror']=_0xe9fca8,_0x192951[_0x34f5a6(0xa65)](_0x3bd393);}},0x32);}function _0x5c0d02(){const _0x29317e=_0x8dde82;if(_0x29317e(0x122)===_0x29317e(0xb80))_0x55c8c0[_0x29317e(0x1d6)](_0x29317e(0xe31))[_0x29317e(0x101)]='为\x20'+_0x1f8c67+'\x20添加...',_0x1352e9['getElementById'](_0x29317e(0x781))['value']='',_0x4e4ae6[_0x29317e(0x1d6)]('event-type-todo')[_0x29317e(0xefd)]=!![],_0x31135e[_0x29317e(0x1d6)](_0x29317e(0x8ca))[_0x29317e(0x555)][_0x29317e(0x1cd)](_0x29317e(0x36e)),_0x1e8e25[_0x29317e(0x1d6)](_0x29317e(0x781))[_0x29317e(0xc10)]();else{const _0x4721fb=document[_0x29317e(0x1d6)](_0x29317e(0x66f));_0x4721fb[_0x29317e(0xa73)]='';const _0x424372=_0x4721fb[_0x29317e(0xb6c)]('#message-anchor');if(_0x424372)_0x424372[_0x29317e(0x9ad)]();_0xdfbfac[_0x29317e(0x3a4)]&&(_0x29317e(0x893)!==_0x29317e(0x382)?_0xdfbfac[_0x29317e(0x3a4)][_0x29317e(0xb85)]((_0x52a0bd,_0x396365)=>{const _0x34a74f=_0x29317e;if(!_0x52a0bd['isOffline']||_0x52a0bd[_0x34a74f(0xefb)]===_0x34a74f(0xba3))return;const _0x34ae4e=_0x52a0bd[_0x34a74f(0xee)][_0x34a74f(0xbe2)](/\n/g,'<br>'),_0x1db7e7=_0x58761c(_0xdfbfac['activeChatId']);let _0x409090='',_0x58262e='',_0x2f12f2='';if(_0x52a0bd['role']===_0x34a74f(0xa29))_0x409090=_0x1db7e7[_0x34a74f(0xb95)]||'我',_0x58262e='speaker-user';else{if(_0x52a0bd[_0x34a74f(0xefb)]===_0x34a74f(0xefe)){const _0x4c556c=_0x5844c7(_0x52a0bd[_0x34a74f(0xdf8)]||_0xdfbfac['activeMeetingCharId']);_0x409090=_0x4c556c?.['name']||'角色',_0x58262e='speaker-ai';}}_0x409090?_0x34a74f(0x46b)===_0x34a74f(0x46b)?_0x2f12f2=_0x34a74f(0x39a)+_0x58262e+_0x34a74f(0x7b3)+_0x396365+_0x34a74f(0x344)+_0x409090+_0x34a74f(0xf07)+_0x34ae4e+_0x34a74f(0x633):(_0x4bc3ce[_0x34a74f(0x374)]=_0x52456b['id'],_0x52af3a()):_0x2f12f2='<p\x20class=\x22narrator\x22\x20data-history-index=\x22'+_0x396365+'\x22>'+_0x34ae4e+_0x34a74f(0x2b7),_0x4721fb[_0x34a74f(0xa73)]+=_0x2f12f2;}):_0x5598cc(_0x29317e(0xa86)+_0x21e3d7[_0x29317e(0x8ac)]));if(_0xdfbfac[_0x29317e(0x556)]){let _0x158501=_0x4721fb[_0x29317e(0xb6c)](_0x29317e(0x654));if(!_0x158501){if(_0x29317e(0x1d7)===_0x29317e(0x1d7))_0x158501=document['createElement']('p'),_0x158501[_0x29317e(0x213)]=_0x29317e(0x9a7),_0x158501['textContent']='对方正在行动中...',_0x4721fb[_0x29317e(0x5b8)](_0x158501);else{_0x10980c('哼，只有私聊才能作为总结的时间基线。');return;}}}const _0x3bf107=document['createElement']('div');_0x3bf107['id']=_0x29317e(0xcdc),_0x4721fb[_0x29317e(0x5b8)](_0x3bf107),setTimeout(()=>{const _0x37020b=_0x29317e;_0x3bf107[_0x37020b(0x6d0)]({'behavior':_0x37020b(0x6b7),'block':_0x37020b(0x8de)});},0x32);}}function _0x1891dc(){const _0x1139ea=_0x8dde82,_0x441db2=document[_0x1139ea(0xb6c)](_0x1139ea(0x3d0));if(!_0x441db2)return;_0x441db2['id']===_0x1139ea(0x123)?_0x5c0d02():_0x192646();}function _0x192646(){const _0x47fa1f=_0x8dde82,_0x44c1f0=_0xdfbfac[_0x47fa1f(0x3a4)][_0x47fa1f(0xeb3)](_0x2e0bc6=>!_0x2e0bc6[_0x47fa1f(0xf05)]&&_0x2e0bc6[_0x47fa1f(0xefb)]!==_0x47fa1f(0xba3)),_0x44198b=_0x2d0aeb[_0x47fa1f(0xb6c)]('#message-anchor');if(_0x44198b)_0x44198b[_0x47fa1f(0x9ad)]();if(_0x44c1f0[_0x47fa1f(0x1e2)]>_0xdfbfac[_0x47fa1f(0xbf2)]){let _0x3d0335=_0x2d0aeb[_0x47fa1f(0xb6c)](_0x47fa1f(0x9c0));!_0x3d0335&&(_0x3d0335=document['createElement'](_0x47fa1f(0x23c)),_0x3d0335['textContent']='加载更多聊天记录',_0x3d0335[_0x47fa1f(0x213)]='form-button\x20load-more-btn',_0x3d0335['style'][_0x47fa1f(0x429)]=_0x47fa1f(0x6b7),_0x3d0335['style']['margin']=_0x47fa1f(0xf06),_0x3d0335[_0x47fa1f(0x329)][_0x47fa1f(0xe23)]=_0x47fa1f(0x89e),_0x3d0335[_0x47fa1f(0x4a1)]=()=>{const _0x15df7e=_0x47fa1f;if(_0x15df7e(0x76c)===_0x15df7e(0x76c)){const _0x2662b9=_0x2d0aeb,_0xa411b6=_0x2662b9[_0x15df7e(0xc0c)],_0x8ac9a7=_0x2662b9[_0x15df7e(0x648)];_0xdfbfac[_0x15df7e(0xbf2)]+=0x32,_0x192646(),requestAnimationFrame(()=>{const _0x4949f5=_0x15df7e,_0x558004=_0x2662b9[_0x4949f5(0xc0c)];_0x2662b9[_0x4949f5(0x648)]=_0x8ac9a7+(_0x558004-_0xa411b6);});}else{const _0x4ad205=_0x3c17b2[_0x15df7e(0x8f1)](_0x15df7e(0xce2));_0x4ad205['className']='day-dot',_0x244571[_0x15df7e(0x5b8)](_0x4ad205);}},_0x2d0aeb[_0x47fa1f(0x151)]?_0x2d0aeb['insertBefore'](_0x3d0335,_0x2d0aeb[_0x47fa1f(0x151)]):_0x2d0aeb[_0x47fa1f(0x5b8)](_0x3d0335));}else{if(_0x47fa1f(0x665)==='wIYDS')!_0x4a53e4[_0x47fa1f(0xb6c)](_0x47fa1f(0xcb8))['contains'](_0x238884[_0x47fa1f(0x272)])&&(_0xd4b787[_0x47fa1f(0x555)][_0x47fa1f(0x9ad)](_0x47fa1f(0xce9)),_0x5df50e['classList'][_0x47fa1f(0x9ad)](_0x47fa1f(0xd9e)));else{const _0x22deaf=_0x2d0aeb[_0x47fa1f(0xb6c)](_0x47fa1f(0x9c0));if(_0x22deaf)_0x22deaf[_0x47fa1f(0x9ad)]();}}Array[_0x47fa1f(0xe74)](_0x2d0aeb['children'])[_0x47fa1f(0xb85)](_0x183550=>{const _0x48335b=_0x47fa1f;if(!_0x183550['classList']['contains'](_0x48335b(0x469))){if('LwBeh'===_0x48335b(0x878))_0x183550['remove']();else{const _0x25d622=_0x205ee3();if(_0x25d622['type']===_0x48335b(0x304)){const _0x1973af=_0x7594e4[_0x48335b(0x94d)][_0x48335b(0x76b)](_0x34c5b3=>_0x25d622[_0x48335b(0x41b)][_0x48335b(0xc35)](_0x34c5b3['id'])&&_0x34c5b3['name']===_0x501349);if(_0x1973af)_0x5e427f=_0x1973af['id'];}}}});const _0x202b57=_0x44c1f0[_0x47fa1f(0x8b8)](-_0xdfbfac['displayedMessageCount']);_0x202b57['forEach'](_0x14ae7d=>{const _0x24901d=_0x47fa1f,_0x6fa752=_0xdfbfac['conversationHistory'][_0x24901d(0x843)](_0x14ae7d);_0x6fa752>-0x1&&_0x597506(_0x14ae7d,_0x6fa752);});if(_0xdfbfac[_0x47fa1f(0x556)]){let _0x554423=document['querySelector'](_0x47fa1f(0x2ad));if(!_0x554423){_0x554423=document['createElement'](_0x47fa1f(0xce2)),_0x554423[_0x47fa1f(0x213)]=_0x47fa1f(0x4fe);const _0x108f7a=_0x1d801f();_0x554423[_0x47fa1f(0x101)]=_0x108f7a&&_0x108f7a['type']===_0x47fa1f(0x304)?'群友正在输入...':_0x47fa1f(0xc39),document[_0x47fa1f(0x1d6)](_0x47fa1f(0x756))[_0x47fa1f(0x5b8)](_0x554423);}}const _0x212b8d=document['createElement'](_0x47fa1f(0xce2));_0x212b8d['id']=_0x47fa1f(0xcdc),_0x2d0aeb[_0x47fa1f(0x5b8)](_0x212b8d),setTimeout(()=>{_0x212b8d['scrollIntoView']({'behavior':'auto','block':'end'});},0x32);}function _0x597506(_0x3a6a9e,_0x2e2884){const _0x3d4f7a=_0x8dde82,{role:_0x46c2f8,content:_0x54a71a,displayUrl:_0x1f80a9,image:_0x256bab,senderId:_0x1125d2}=_0x3a6a9e,_0x32b157=document[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x6e3)),_0x5539d3=_0x54a71a&&_0x54a71a[_0x3d4f7a(0xcd2)]()[_0x3d4f7a(0xb91)]('<div')&&_0x54a71a[_0x3d4f7a(0xcd2)]()[_0x3d4f7a(0xbc5)]('</div>');if(_0x5539d3){const _0x52d7b6=document[_0x3d4f7a(0x8f1)]('div');return _0x52d7b6[_0x3d4f7a(0x213)]='full-width-module-container',_0x52d7b6[_0x3d4f7a(0x63f)][_0x3d4f7a(0x47a)]=_0x2e2884,_0x52d7b6['innerHTML']=_0x54a71a,_0x32b157[_0x3d4f7a(0x5b8)](_0x52d7b6),_0x52d7b6;}const _0x4b75e6=_0x46c2f8===_0x3d4f7a(0xefe)?'ai':_0x46c2f8,_0x40fe28=_0x1d801f(),_0x1d952a=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));_0x1d952a[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0xae2),_0x4b75e6),_0x1d952a[_0x3d4f7a(0x63f)][_0x3d4f7a(0x47a)]=_0x2e2884;const _0x1a14bc=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));_0x1a14bc['className']=_0x3d4f7a(0x513);let _0xa9c0c6='',_0xac0ab0='',_0x473b13=null;if(_0x46c2f8===_0x3d4f7a(0xa29)){const _0x3e19d8=_0x58761c(_0xdfbfac[_0x3d4f7a(0x8ed)]);_0xa9c0c6=_0x3e19d8['avatar']||_0x284b7c;const _0x3dd6a8=_0x5844c7(_0x40fe28?.[_0x3d4f7a(0x41b)][0x0]);_0x3dd6a8&&('jmbSm'!==_0x3d4f7a(0xef1)?_0xac0ab0=_0x3dd6a8['userAvatarFrameUrl']||'':(_0x1ba153[_0x3d4f7a(0xee2)]='',_0x27e546[_0x3d4f7a(0xee2)]='',_0x3397f9[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x36e)),_0x964a53[_0x3d4f7a(0xc10)]()));}else{if(_0x40fe28?.[_0x3d4f7a(0x8c7)]==='private'){if(_0x3d4f7a(0x48b)===_0x3d4f7a(0x711)){if(_0x25df3e[_0x3d4f7a(0x8a6)])_0x3ee07d[_0x3d4f7a(0xb66)]('['+_0x45d39f(_0x589c5c)+']\x20[sticker:'+(_0x4ad1dc['content']?.['match'](/：(.+?)]/)?.[0x1]||'表情')+']');else{if(_0x4a8700[_0x3d4f7a(0x412)]){const _0x283211=_0x337a89[_0x3d4f7a(0xee)]?'\x20'+_0x1eb98d['content']:'';_0xfbb743[_0x3d4f7a(0xb66)]('['+_0x34745c(_0x5eb183)+_0x3d4f7a(0x1b5)+_0x283211);}else _0x35b297[_0x3d4f7a(0xee)]&&_0xb0087e[_0x3d4f7a(0xb66)]('['+_0x3d3476(_0x496f0e)+']\x20'+_0x41a585[_0x3d4f7a(0xee)]);}}else _0x473b13=_0x5844c7(_0x40fe28['participantIds'][0x0]);}else _0x40fe28?.[_0x3d4f7a(0x8c7)]===_0x3d4f7a(0x304)&&_0x1125d2&&(_0x473b13=_0x5844c7(_0x1125d2));_0xa9c0c6=_0x473b13?.[_0x3d4f7a(0x584)]||_0x1af29b,_0xac0ab0=_0x473b13?.['avatarFrameUrl']||'';}const _0x1ed601=_0x4b262e(_0xa9c0c6,_0xac0ab0);if(_0x46c2f8!==_0x3d4f7a(0xa29)&&_0x473b13){if(_0x3d4f7a(0xc75)===_0x3d4f7a(0xc75)){const _0x4abc25=_0x1ed601['querySelector'](_0x3d4f7a(0x32f));_0x4131e2(_0x3d4f7a(0xa53)+_0x473b13['id'])[_0x3d4f7a(0x94f)](_0x5d2d7a=>{const _0x4a2c15=_0x3d4f7a;_0x5d2d7a&&(_0x4a2c15(0x884)===_0x4a2c15(0x884)?_0x4abc25[_0x4a2c15(0xcab)]=URL[_0x4a2c15(0x21c)](_0x5d2d7a):_0x35caf5[_0x4a2c15(0x8ed)]=_0x494d7e[_0x4a2c15(0xc1b)][0x0]?.['id']||null);});}else{if(_0x34229f[_0x3d4f7a(0x272)][_0x3d4f7a(0x699)](_0x3d4f7a(0x23c)))return;const _0x4be123=_0x131462[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x589));_0x4be123&&_0x4be123[_0x3d4f7a(0x288)]();}}const _0xc69c12=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));_0xc69c12[_0x3d4f7a(0x555)]['add'](_0x3d4f7a(0x8ac),_0x4b75e6);if(_0x40fe28?.[_0x3d4f7a(0x8c7)]==='private'){if(_0x3d4f7a(0x42e)==='HVqHQ')_0x125165[_0x3d4f7a(0x57a)](),_0x3835cb['textContent']='▶';else{const _0x43adf6=_0x40fe28[_0x3d4f7a(0x41b)][0x0];_0xc69c12[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)]('bubble-'+_0x43adf6);}}if(_0x3a6a9e[_0x3d4f7a(0xd22)]){if(_0x3d4f7a(0xe5c)===_0x3d4f7a(0x600))_0x203a6f(_0x2314a5,_0x1c8bb3(_0x30bd42)['name'],_0x185dc1[_0x3d4f7a(0x7ec)]);else{const _0x77da06=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));_0x77da06[_0x3d4f7a(0x213)]=_0x3d4f7a(0x2c9),_0x77da06[_0x3d4f7a(0xa73)]=_0x3d4f7a(0x813)+_0x3a6a9e[_0x3d4f7a(0xd22)]['sender']+_0x3d4f7a(0x5b6)+_0x3a6a9e[_0x3d4f7a(0xd22)][_0x3d4f7a(0xee)]+_0x3d4f7a(0x60b),_0xc69c12['appendChild'](_0x77da06);}}if(_0x1f80a9)_0xc69c12[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)]('sticker'),_0xc69c12[_0x3d4f7a(0xa73)]+=_0x3d4f7a(0xa46)+_0x1f80a9+_0x3d4f7a(0x541);else{if(_0x3a6a9e[_0x3d4f7a(0x412)]||_0x3a6a9e[_0x3d4f7a(0xe2d)]){if(_0x3d4f7a(0x458)!==_0x3d4f7a(0xaf5)){_0xc69c12[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x412));const _0x235455=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0x971));_0x235455[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x808)),_0xc69c12['appendChild'](_0x235455);if(_0x3a6a9e['image'])_0x3d4f7a(0x17d)!==_0x3d4f7a(0x17d)?(_0x3a7731['value']=_0x3796b4,_0x366f5d[_0x3d4f7a(0x555)][_0x3d4f7a(0x9ad)](_0x3d4f7a(0x36e))):_0x235455[_0x3d4f7a(0xcab)]=_0x3a6a9e[_0x3d4f7a(0x412)];else{if(_0x3d4f7a(0x430)===_0x3d4f7a(0x430))_0x235455[_0x3d4f7a(0xcab)]=_0x3d4f7a(0x54c),_0x4131e2(_0x3a6a9e[_0x3d4f7a(0xe2d)])[_0x3d4f7a(0x94f)](_0x4142fb=>{const _0x172880=_0x3d4f7a;if(_0x4142fb)_0x235455[_0x172880(0xcab)]=URL[_0x172880(0x21c)](_0x4142fb);else _0x235455[_0x172880(0xb4c)]=_0x172880(0xe9c);})['catch'](()=>_0x235455[_0x3d4f7a(0xb4c)]=_0x3d4f7a(0xe9c));else{const _0x5a8684=_0x1d5105[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x3fc)),_0xc8b80a=_0x3caa78['getElementById'](_0x3d4f7a(0x7db)),_0x256125=_0x5abde1[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x354)),_0x111ec8=_0x142d49[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x6b6)),_0xab853d=_0x1b5920;_0xab853d&&_0xab853d['isFromLibrary']?(_0xc8b80a[_0x3d4f7a(0x101)]=_0xab853d[_0x3d4f7a(0x13b)],_0x256125['textContent']=_0xab853d[_0x3d4f7a(0x7dc)],_0x5a8684[_0x3d4f7a(0x555)]['add'](_0x3d4f7a(0x2b6)),_0x5a8684[_0x3d4f7a(0x329)][_0x3d4f7a(0x8eb)](_0x3d4f7a(0x46f),_0x3d4f7a(0x1c2)+_0xab853d[_0x3d4f7a(0x267)]+')')):(_0xc8b80a['textContent']='暂无音乐',_0x256125['textContent']=_0x3d4f7a(0x4db),_0x5a8684[_0x3d4f7a(0x555)][_0x3d4f7a(0x9ad)](_0x3d4f7a(0x2b6)),_0x111ec8[_0x3d4f7a(0x329)]['setProperty'](_0x3d4f7a(0x46f),_0x3d4f7a(0x338)));}}if(_0x54a71a){if(_0x3d4f7a(0x98a)!==_0x3d4f7a(0x98a))return{'bubbles':[_0x48cd3a],'schedules':[]};else _0xc69c12[_0x3d4f7a(0xa73)]+=_0x3d4f7a(0x1fe)+_0x54a71a+_0x3d4f7a(0x2b7);}}else _0x52db36['preventDefault']();}else{if(_0x3a6a9e[_0x3d4f7a(0x8c7)]===_0x3d4f7a(0x3d7)){_0xc69c12[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x3d7));const _0x2aebf7=_0x3a6a9e['role']===_0x3d4f7a(0xa29)?_0x58761c(_0xdfbfac[_0x3d4f7a(0x8ed)]):_0x5844c7(_0x3a6a9e[_0x3d4f7a(0xdf8)]),_0x457bfb=_0x3a6a9e[_0x3d4f7a(0x968)]===_0x58761c(_0xdfbfac[_0x3d4f7a(0x8ed)])['id']?_0x58761c(_0xdfbfac[_0x3d4f7a(0x8ed)]):_0x5844c7(_0x3a6a9e['recipientId']),_0x18a114=_0x2aebf7?.['name']?_0x2aebf7[_0x3d4f7a(0xb95)]+_0x3d4f7a(0xeab):'转账',_0x5658c4=_0x457bfb?.[_0x3d4f7a(0xb95)]?_0x3d4f7a(0x36c)+_0x457bfb[_0x3d4f7a(0xb95)]:'转账';_0xc69c12[_0x3d4f7a(0xa73)]+=_0x3d4f7a(0xd0d)+_0x18a114+_0x3d4f7a(0x891)+_0x3a6a9e[_0x3d4f7a(0x3c5)][_0x3d4f7a(0x491)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>'+_0x5658c4+'</div>\x0a\x20\x20\x20\x20\x20\x20</div>';}else{if(_0x3a6a9e['type']===_0x3d4f7a(0x8a3)){_0xc69c12['classList']['add'](_0x3d4f7a(0xbf0));const _0x4d0877=document['createElement'](_0x3d4f7a(0xce2));_0x4d0877['className']=_0x3d4f7a(0xd92);const _0xac77f6=_0x3a6a9e[_0x3d4f7a(0xefb)]===_0x3d4f7a(0xa29)?_0x58761c(_0xdfbfac[_0x3d4f7a(0x8ed)])[_0x3d4f7a(0xb95)]||'你':_0x5844c7(_0x3a6a9e['senderId'])?.[_0x3d4f7a(0xb95)]||'TA',_0x4a1059=_0x3d4f7a(0x7d3)+_0x3a6a9e['timestamp'],_0x4c6c59=_0x3d4f7a(0x59f)+_0x4a1059+'\x22\x20src=\x22'+_0x1af29b+'\x22>';_0x3a6a9e[_0x3d4f7a(0x5ab)]?_0x4d0877[_0x3d4f7a(0xa73)]=_0x3d4f7a(0x252)+_0x4c6c59+_0x3d4f7a(0x673)+_0x3a6a9e['songName']+_0x3d4f7a(0x50d)+_0x3a6a9e[_0x3d4f7a(0x7dc)]+'</div></div></div>':_0x3d4f7a(0x470)==='gwOPM'?_0x4d0877[_0x3d4f7a(0xa73)]=_0x3d4f7a(0x3bb)+_0xac77f6+_0x3d4f7a(0x572)+_0x4c6c59+_0x3d4f7a(0x673)+_0x3a6a9e['songName']+_0x3d4f7a(0x50d)+_0x3a6a9e['artist']+_0x3d4f7a(0xaa8)+_0x3a6a9e[_0x3d4f7a(0x211)]+_0x3d4f7a(0xae4):(_0x1efb1f[_0x3d4f7a(0x3a0)](_0x3d4f7a(0x50e),_0x4e0675),_0x40e265[_0x3d4f7a(0x3a0)]('mouseup',_0x59ecf9)),_0xc69c12[_0x3d4f7a(0x5b8)](_0x4d0877),_0x3a6a9e[_0x3d4f7a(0x6a3)]&&setTimeout(()=>{const _0x35d68c=_0x3d4f7a;_0x4131e2(_0x3a6a9e[_0x35d68c(0x6a3)])['then'](_0x1061dd=>{const _0x554183=_0x35d68c;if(_0x554183(0x49a)===_0x554183(0x66b))_0x1074cf[_0x554183(0x101)]=_0x4c00b2[_0x554183(0x1c6)],_0x12d63e(_0x203564,_0xaeb8d9['emotion']);else{const _0x260d9e=document['getElementById'](_0x4a1059);if(_0x260d9e&&_0x1061dd)_0x260d9e[_0x554183(0xcab)]=URL[_0x554183(0x21c)](_0x1061dd);}});},0x0);}else{if(_0x3a6a9e[_0x3d4f7a(0x8c7)]===_0x3d4f7a(0xbf0)&&_0x3a6a9e['songName']){if('kGOOo'!==_0x3d4f7a(0x9da)){const _0x36a164='chat_'+_0x103e5e;_0x2777c4(_0x36a164);}else{_0xc69c12[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0xbf0));const _0x8b702e=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));_0x8b702e[_0x3d4f7a(0x213)]=_0x3d4f7a(0x538),_0x8b702e[_0x3d4f7a(0x63f)]['musicId']=_0x3d4f7a(0x8cd)+_0x3a6a9e[_0x3d4f7a(0x10c)];const _0x42d1bf=_0x3d4f7a(0x7d3)+_0x3a6a9e[_0x3d4f7a(0x10c)];let _0x2784bf=_0x3d4f7a(0xa46)+_0x1af29b+_0x3d4f7a(0x4e9)+_0x42d1bf+_0x3d4f7a(0x618);_0x8b702e[_0x3d4f7a(0xa73)]=_0x3d4f7a(0x7bf)+_0x2784bf+_0x3d4f7a(0x55a)+_0x3a6a9e[_0x3d4f7a(0x3c7)]+_0x3d4f7a(0x856)+_0x3a6a9e[_0x3d4f7a(0x7dc)]+_0x3d4f7a(0xaad)+(_0x3a6a9e[_0x3d4f7a(0xb21)]?'▶':'⚠')+_0x3d4f7a(0x396),_0xc69c12[_0x3d4f7a(0x5b8)](_0x8b702e),setTimeout(()=>{const _0x20ae2e=_0x3d4f7a,_0x2ba41e=document[_0x20ae2e(0x1d6)](_0x42d1bf);if(!_0x2ba41e)return;if(_0x3a6a9e[_0x20ae2e(0x6a3)])_0x4131e2(_0x3a6a9e[_0x20ae2e(0x6a3)])[_0x20ae2e(0x94f)](_0x5e86c4=>{const _0x5b12a2=_0x20ae2e;if(_0x5e86c4)_0x2ba41e['src']=URL[_0x5b12a2(0x21c)](_0x5e86c4);});else _0x3a6a9e[_0x20ae2e(0x520)]&&(_0x2ba41e[_0x20ae2e(0xcab)]=_0x3a6a9e[_0x20ae2e(0x520)]);},0x0),_0x3a6a9e['playableUrl']&&(_0x3d4f7a(0x87c)===_0x3d4f7a(0x87c)?_0x8b702e[_0x3d4f7a(0x3a0)](_0x3d4f7a(0x288),function(){const _0xb4ce2=_0x3d4f7a;if(_0xb4ce2(0x66a)===_0xb4ce2(0x66a)){const _0x524254=document[_0xb4ce2(0x1d6)]('audio-player'),_0x3be886=document[_0xb4ce2(0x7af)](_0xb4ce2(0x989)),_0x1963a5=this[_0xb4ce2(0xb6c)]('.music-share-play-icon'),_0x2de6a7=_0x524254[_0xb4ce2(0xcab)][_0xb4ce2(0xc35)](_0x3a6a9e[_0xb4ce2(0xb21)])&&!_0x524254['paused'];_0x3be886[_0xb4ce2(0xb85)](_0x2c2f87=>{const _0x12ca86=_0xb4ce2;if('syHCI'!==_0x12ca86(0x7a9)){const _0x5ef205=_0x9bb275[_0x12ca86(0x8f1)](_0x12ca86(0xce2));_0x5ef205['className']=_0x12ca86(0x264),_0x5ef205[_0x12ca86(0xa73)]=_0x12ca86(0x178)+(_0x26f44e[_0x12ca86(0x520)]||_0x575dba)+_0x12ca86(0xc9b)+_0x484f12[_0x12ca86(0x3c7)]+_0x12ca86(0xa6f)+_0x549b5e[_0x12ca86(0x7dc)]+_0x12ca86(0x833),_0x5ef205[_0x12ca86(0xb6c)](_0x12ca86(0x780))[_0x12ca86(0x4a1)]=()=>_0x5689ad('music'),_0x392f0a[_0x12ca86(0x5b8)](_0x5ef205);}else _0x2c2f87!==_0x1963a5&&(_0x12ca86(0x134)!==_0x12ca86(0x6fa)?_0x2c2f87[_0x12ca86(0x101)]='▶':_0x3cb514(_0x4db997[_0x12ca86(0x3a8)],_0x12ca86(0xae6)));}),!_0x2de6a7&&document['getElementById'](_0xb4ce2(0x7d7))['pause'](),_0x2de6a7?(_0x524254[_0xb4ce2(0x57a)](),_0x1963a5[_0xb4ce2(0x101)]='▶'):(_0x524254[_0xb4ce2(0xcab)]=_0x3a6a9e[_0xb4ce2(0xb21)],_0x524254[_0xb4ce2(0xe7f)](),_0x1963a5['textContent']='❚❚');}else _0x5b37ca&&(_0x4bb1c2[_0xb4ce2(0xcab)]=_0x33becf[_0xb4ce2(0x21c)](_0x4099d6));}):_0x5e3352[_0x3d4f7a(0xb85)](_0x138d9f=>{const _0x46302a=_0x3d4f7a,_0x2f5516=_0x1bee69[_0x46302a(0xef6)][_0x138d9f],_0x1ab703=_0x2f5516['categorizedExpenses'][_0x46302a(0x421)]((_0x39a9d8,_0x19cea3)=>_0x39a9d8+(_0x19cea3[_0x46302a(0x3c5)]||0x0),0x0);_0x974e22+=_0x46302a(0xdc4)+_0x138d9f+'\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>'+_0x138d9f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20'+_0x1ab703[_0x46302a(0x491)](0x2)+_0x46302a(0xe77);}));}}else{if(_0x54a71a){if(_0x3d4f7a(0x760)===_0x3d4f7a(0x760)){const _0x516238=document['createElement']('p');_0x516238[_0x3d4f7a(0xa73)]=_0x54a71a,_0x516238[_0x3d4f7a(0x329)][_0x3d4f7a(0x821)]='0',_0xc69c12[_0x3d4f7a(0x5b8)](_0x516238);}else{if(_0x5cd6df[_0x3d4f7a(0x3f9)])return;const _0x50a6fa=_0x574398[_0x3d4f7a(0x110)];if(_0x50a6fa<=0x0)return;_0x2787b1['isAnimatingDiary']=!![];const _0x7d6cfd=_0x50a6fa-0x1,_0x19b70e=_0x222d74[_0x3d4f7a(0x1d6)]('diary-page-'+_0x50a6fa),_0x5aef81=_0x1317b0[_0x3d4f7a(0x1d6)](_0x3d4f7a(0x88e)+_0x7d6cfd);_0x19b70e&&_0x5aef81?(_0x5aef81[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x77a)),_0x19b70e[_0x3d4f7a(0x555)][_0x3d4f7a(0x1cd)]('is-exiting-right'),_0x5aef81['classList'][_0x3d4f7a(0x1cd)](_0x3d4f7a(0x434)),_0xbf0275(()=>{const _0x48bf69=_0x3d4f7a;_0x19b70e[_0x48bf69(0x555)][_0x48bf69(0x9ad)](_0x48bf69(0x434),_0x48bf69(0x9ae)),_0x5aef81[_0x48bf69(0x555)][_0x48bf69(0x9ad)](_0x48bf69(0x77a)),_0x442eb3['diaryCurrentPage']=_0x7d6cfd,_0x56fbf7(),_0x2c64bc[_0x48bf69(0x3f9)]=![];},0x2bc)):_0x3e97fe['isAnimatingDiary']=![];}}}}}}}_0x4b75e6===_0x3d4f7a(0xa29)?(_0x1a14bc['appendChild'](_0xc69c12),_0x1a14bc['appendChild'](_0x1ed601)):(_0x1a14bc[_0x3d4f7a(0x5b8)](_0x1ed601),_0x1a14bc[_0x3d4f7a(0x5b8)](_0xc69c12));_0x1d952a[_0x3d4f7a(0x5b8)](_0x1a14bc);const _0x1ef4d1=document[_0x3d4f7a(0x8f1)](_0x3d4f7a(0xce2));return _0x1ef4d1[_0x3d4f7a(0x213)]=_0x3d4f7a(0x10c),_0x1ef4d1['textContent']=_0x826be3(_0x3a6a9e['timestamp']),_0x1d952a['appendChild'](_0x1ef4d1),_0x32b157['appendChild'](_0x1d952a),_0x1d952a;}let _0x393787=null;function _0x104609(_0x581140){const _0x47371b=_0x8dde82;if(_0x47371b(0xbac)!==_0x47371b(0xbac)){const _0x2c072f=_0x16a114[_0x47371b(0x314)](_0x4f0b9b,'readwrite'),_0x103047=_0x2c072f['objectStore'](_0x206622),_0x524a46=_0x103047[_0x47371b(0x2df)]({'id':_0x4c80c5,'data':_0x1d7481});_0x524a46[_0x47371b(0xdab)]=()=>_0x10a3ba(),_0x524a46['onerror']=()=>_0x10f2c6(_0x524a46['error']);}else{if(window[_0x47371b(0xd98)]()[_0x47371b(0x9e2)]()||_0x581140[_0x47371b(0x23c)]!==0x0)return;const _0x974c5d=_0x581140[_0x47371b(0x272)][_0x47371b(0x699)](_0x47371b(0xe08)),_0x154620=_0x581140[_0x47371b(0x272)]['closest'](_0x47371b(0x74b));if(!_0x974c5d||_0x154620)return;const _0x528085=parseInt(_0x974c5d[_0x47371b(0x63f)][_0x47371b(0x47a)],0xa);if(isNaN(_0x528085))return;const _0x47b30f=()=>{const _0x18a28f=_0x47371b;_0x18a28f(0x6fd)!==_0x18a28f(0x592)?(clearTimeout(_0x393787),document[_0x18a28f(0x255)](_0x18a28f(0xc67),_0x47b30f),document[_0x18a28f(0x255)](_0x18a28f(0xb8b),_0x47b30f),document[_0x18a28f(0x255)]('touchcancel',_0x47b30f),document[_0x18a28f(0x255)](_0x18a28f(0x1f3),_0x47b30f)):_0x5a986e['open']('https://xhslink.com/m/5IgC1rniI2I','_blank');},_0x54ac1e=()=>{const _0x2d860d=_0x47371b;_0x47b30f(),_0x393787=setTimeout(()=>{_0x590908(_0x528085);},0x258),document[_0x2d860d(0x3a0)](_0x2d860d(0xc67),_0x47b30f),document[_0x2d860d(0x3a0)]('touchend',_0x47b30f),document[_0x2d860d(0x3a0)](_0x2d860d(0x28a),_0x47b30f),document['addEventListener']('touchmove',_0x47b30f);};_0x54ac1e();}}const _0x6ef49d=document[_0x8dde82(0x1d6)](_0x8dde82(0x6e3));_0x6ef49d&&(_0x6ef49d[_0x8dde82(0x3a0)](_0x8dde82(0x5c9),_0x104609),_0x6ef49d['addEventListener'](_0x8dde82(0xa6c),_0x104609,{'passive':![]}),_0x6ef49d['addEventListener'](_0x8dde82(0x1c1),_0x2d431f=>_0x2d431f['preventDefault']()));function _0x1b3734(){const _0x40724c=_0x8dde82;if(_0x40724c(0x129)!=='ATsqE')_0x4a79d0[_0x40724c(0xee2)]='';else{const _0x2fe56e=_0x1d801f();if(!_0x2fe56e){_0x5eee31['textContent']=_0x40724c(0x94b);return;}if(_0x2fe56e[_0x40724c(0x8c7)]==='private'){if(_0x40724c(0xb92)===_0x40724c(0x11a)){const _0x341fc7=[_0x40724c(0x4de),_0x40724c(0x6c0),'星期二',_0x40724c(0x29e),_0x40724c(0xcf9),_0x40724c(0xe69),_0x40724c(0xe5b)];return _0x341fc7[_0x2f3aad[_0x40724c(0xab8)]()]+'\x20'+_0x4532ee;}else{const _0x1c0a03=_0x5844c7(_0x2fe56e[_0x40724c(0x41b)][0x0]);_0x5eee31[_0x40724c(0x101)]=_0x1c0a03?_0x1c0a03[_0x40724c(0xb95)]:'未知角色';}}else{if('zMfjL'===_0x40724c(0x970)){if(_0x1b7dd8[_0x40724c(0x1e2)]===0x0)return;_0x1bbeae=(_0x2bf209+0x1)%_0x39315f[_0x40724c(0x1e2)],_0x2f54eb(_0x59b389[_0x5880ee],_0x4cb9bd);}else _0x5eee31[_0x40724c(0x101)]=_0x2fe56e[_0x40724c(0xb95)]||_0x40724c(0x60f)+_0x2fe56e[_0x40724c(0x41b)]['length']+')';}}}function _0x5b8908(_0x2f8dac){const _0x2b0d63=_0x8dde82,_0x739ddc=document['querySelector'](_0x2b0d63(0x2ad));if(_0x739ddc){if(_0x2b0d63(0x767)!==_0x2b0d63(0xbc8))_0x739ddc[_0x2b0d63(0x9ad)]();else{if(_0x3d3549===null)return;const _0x487ba3=_0x775420[_0x2b0d63(0xee2)][_0x2b0d63(0xcd2)]();if(_0x487ba3===''){_0x35368b();return;}const _0x279b15=_0xb5b8bc[_0x2b0d63(0x3a4)][_0x464e6f];_0x279b15&&(_0x279b15[_0x2b0d63(0xee)]=_0x487ba3,_0x3646ea(),_0x1b0fc7()),_0x4a9262[_0x2b0d63(0x555)][_0x2b0d63(0x9ad)]('show'),_0x54258f=null;}}const _0x1fca9c=document[_0x2b0d63(0xb6c)](_0x2b0d63(0x3d0));if(_0x1fca9c&&(_0x1fca9c['id']==='meeting-view-screen'||_0x1fca9c['id']===_0x2b0d63(0xc09))){if(_0x2b0d63(0x3e8)===_0x2b0d63(0x9f4)){const _0x42ecaa=_0x236554[_0x2b0d63(0x5fe)][_0x42ae56[_0x2b0d63(0x6e4)]];if(_0x42ecaa&&_0x42ecaa['length']>0x0){_0x2c1438[_0x2b0d63(0xb7b)]=[..._0x42ecaa];const _0x4893cb=_0x55f4a8['activeMeetingScriptQueue']['shift']();_0x564510[_0x2b0d63(0x101)]=_0x4893cb['speaker']===_0x2b0d63(0x230)?'旁白':_0x4893cb[_0x2b0d63(0x8b5)],_0x4401bd[_0x2b0d63(0x101)]=_0x4893cb[_0x2b0d63(0x1c6)],_0x4893cb[_0x2b0d63(0x8b5)]!==_0x2b0d63(0x230)&&_0x4de6b5(_0x3b93fb['activeMeetingCharId'],_0x4893cb[_0x2b0d63(0x2c4)]);}else _0x543f8[_0x2b0d63(0x101)]='旁白',_0x5c60e6[_0x2b0d63(0x101)]=_0x2b0d63(0xa9c);}else _0x1891dc();}else{const _0x53b5af=document[_0x2b0d63(0x7af)](_0x2b0d63(0x654));_0x53b5af['forEach'](_0x1938a2=>_0x1938a2[_0x2b0d63(0x9ad)]());}}function _0x2677ea(){const _0x448687=_0x8dde82;_0x448687(0x243)===_0x448687(0x243)?(_0xdfbfac[_0x448687(0x556)]&&_0xdfbfac[_0x448687(0x451)]&&(console['log'](_0x448687(0xdaf)),typeof _0xdfbfac['currentAbortController'][_0x448687(0xe6c)]==='function'?_0xdfbfac[_0x448687(0x451)]['abort'](_0x448687(0xad2)):console['warn'](_0x448687(0x23b)),_0xdfbfac['currentAbortController']=null),_0xdfbfac['isGenerating']=![],_0x5b8908(![])):_0x5e1bb4[_0x448687(0xa54)](_0x54b393,_0x17365f[_0x448687(0xea5)](_0x526b85));}function _0x1d801f(){const _0x3888f2=_0x8dde82;return _0xdfbfac[_0x3888f2(0xc1b)][_0x3888f2(0x76b)](_0x4cc498=>_0x4cc498['id']===_0xdfbfac['activeChatId']);}function _0x5844c7(_0x2eb491){const _0x12c55a=_0x8dde82;if('KArDC'===_0x12c55a(0x278))return _0xdfbfac[_0x12c55a(0x94d)]['find'](_0x5c9507=>_0x5c9507['id']===_0x2eb491);else _0x321501[_0x12c55a(0xee2)]=_0x12c55a(0x2a5);}function _0x261fbb(_0x11214f){const _0x31cdb0=_0x8dde82;if(_0x31cdb0(0x587)===_0x31cdb0(0x587)){_0xdfbfac[_0x31cdb0(0x94d)]=_0xdfbfac['characters']['filter'](_0x35ad81=>_0x35ad81['id']!==_0x11214f),_0xdfbfac[_0x31cdb0(0xc1b)][_0x31cdb0(0xb85)](_0x45a369=>{const _0x25ccd8=_0x31cdb0;_0x45a369['type']==='group'&&(_0x45a369[_0x25ccd8(0x41b)]=_0x45a369['participantIds']['filter'](_0x54c554=>_0x54c554!==_0x11214f));});const _0x11b0ee=_0xdfbfac[_0x31cdb0(0xc1b)][_0x31cdb0(0x76b)](_0x57d2b8=>_0x57d2b8[_0x31cdb0(0x8c7)]===_0x31cdb0(0xcef)&&_0x57d2b8[_0x31cdb0(0x41b)][_0x31cdb0(0xc35)](_0x11214f));if(_0x11b0ee){if(_0x31cdb0(0x671)===_0x31cdb0(0xa62)){_0x36daab('好友圈名称不能为空！');return;}else _0x105d84(_0x11b0ee['id']);}_0xdfbfac[_0x31cdb0(0xc1b)]=_0xdfbfac[_0x31cdb0(0xc1b)][_0x31cdb0(0xeb3)](_0x813ed1=>_0x813ed1['type']!==_0x31cdb0(0x304)||_0x813ed1['participantIds'][_0x31cdb0(0x1e2)]>0x1),_0x31622b(),_0x117428();}else{const _0x4122e9=_0x539f98[_0x31cdb0(0x314)](_0x51551a,_0x31cdb0(0xece)),_0xbc751a=_0x4122e9[_0x31cdb0(0xa49)](_0x157da9),_0x4076e2=_0xbc751a[_0x31cdb0(0x2df)]({'id':_0x1082e1,'blob':_0xaccecf});_0x4076e2['onsuccess']=()=>_0x4fb163(_0x4076e2[_0x31cdb0(0xd29)]),_0x4076e2[_0x31cdb0(0x514)]=()=>_0x3f2017(_0x4076e2['error']);}}function _0x105d84(_0x31a908){const _0x24696c=_0x8dde82;_0xdfbfac[_0x24696c(0xc1b)]=_0xdfbfac[_0x24696c(0xc1b)]['filter'](_0x16844b=>_0x16844b['id']!==_0x31a908);try{localStorage[_0x24696c(0x287)]('chatHistory_'+_0x31a908);}catch(_0x226ceb){console[_0x24696c(0x27f)](_0x24696c(0x9b9)+_0x31a908,_0x226ceb);}_0xdfbfac['activeChatId']===_0x31a908&&(_0xdfbfac[_0x24696c(0x8ed)]=_0xdfbfac[_0x24696c(0xc1b)][0x0]?.['id']||null,_0x204ca2(_0xdfbfac[_0x24696c(0x8ed)])),_0x31622b();}async function _0x204ca2(_0x4694cc){const _0x12bcb6=_0x8dde82;if(_0x12bcb6(0xd9f)===_0x12bcb6(0xd9f)){if(_0xa1747f){if(_0x12bcb6(0xa1a)===_0x12bcb6(0x114)){_0x3765a6['value']='#\x20这段私聊是空的，没有时间锚点，无法开始总结。';return;}else clearTimeout(_0xa1747f),_0xa1747f=null;}const _0xda0739=document[_0x12bcb6(0x1d6)](_0x12bcb6(0xc09)),_0x52bce5=document[_0x12bcb6(0x1d6)]('chat-messages'),_0xc0fad6=document['getElementById'](_0x12bcb6(0x756));_0xc0fad6&&(_0x12bcb6(0x176)!=='cFMEj'?(_0xc0fad6[_0x12bcb6(0x329)][_0x12bcb6(0x82e)]='',_0xc0fad6['style'][_0x12bcb6(0x71d)]=''):(_0x1c9e59(_0x4669c2['id']),_0x4e61b4(_0x12bcb6(0x486)+_0x4ef539['name']+_0x12bcb6(0xb9b)),_0x4da159(![])));_0xda0739[_0x12bcb6(0x555)][_0x12bcb6(0x9ad)](_0x12bcb6(0xe84)),_0xda0739[_0x12bcb6(0x555)][_0x12bcb6(0x9ad)](_0x12bcb6(0x369));_0xdfbfac['activeChatId']!==_0x4694cc&&(_0x2677ea(),_0xdfbfac['displayedMessageCount']=0x32);if(!_0x4694cc){_0xdfbfac['activeChatId']=null,_0x31622b(),_0x52bce5[_0x12bcb6(0xa73)]='',_0x51f11a=![];return;}_0x51f11a=!![],_0xdfbfac['activeChatId']=_0x4694cc,_0x31622b(),_0x1b3734(),_0x52bce5['innerHTML']='',_0x52bce5[_0x12bcb6(0x329)]['opacity']='0',_0x1a8bbc(!![],_0x12bcb6(0x54a)),void _0xc0fad6['offsetWidth'],setTimeout(async()=>{const _0x2e4355=_0x12bcb6;try{if(_0x2e4355(0x357)!==_0x2e4355(0x357)){_0x301f11&&_0x3c03a7[_0x2e4355(0xb66)](_0x2bc026);_0x10f5f7={};const _0x3fabf4=_0x1d028d[_0x2e4355(0x3b1)](0x2),_0x320dd0=_0x3fabf4[_0x2e4355(0xc12)](/:\s(.+)/);if(_0x320dd0[_0x2e4355(0x1e2)]>0x1){const _0x294a31=_0x320dd0[0x0]['trim'](),_0x3a8af3=_0x320dd0[0x1]['trim']()[_0x2e4355(0xbe2)](/^"|"$/g,'');_0x895175[_0x294a31]=_0x3a8af3;}}else{_0x346e88();const _0x50d1af=_0x1d801f();_0xc0fad6[_0x2e4355(0x329)][_0x2e4355(0x5b7)]='';if(_0x50d1af){let _0x5a2dd6=null;if(_0x50d1af[_0x2e4355(0x8c7)]===_0x2e4355(0xcef)){const _0xa3b20c=_0x50d1af[_0x2e4355(0x41b)][0x0];_0x3d187c(_0xa3b20c),_0x5a2dd6=await _0x4131e2(_0x2e4355(0x690)+_0xa3b20c);}else _0x5a2dd6=await _0x4131e2(_0x2e4355(0x27e)+_0x50d1af['id']);_0x5a2dd6&&(_0xc0fad6[_0x2e4355(0x329)][_0x2e4355(0x5b7)]=_0x2e4355(0x8a1)+URL[_0x2e4355(0x21c)](_0x5a2dd6)+'\x27)',_0xc0fad6['style'][_0x2e4355(0xd79)]=_0x2e4355(0x267),_0xc0fad6['style']['backgroundPosition']=_0x2e4355(0x6cc));}_0x192646(),requestAnimationFrame(()=>{const _0x352455=_0x2e4355;_0x352455(0x4be)===_0x352455(0x9d2)?_0x3a0fb3(_0x55aba9[_0x352455(0xe2d)])[_0x352455(0x94f)](_0x1489f0=>{const _0x303fa4=_0x352455;if(_0x1489f0){const _0x1bafb8=_0x2ec515['createObjectURL'](_0x1489f0);_0xdd05a8[_0x303fa4(0xcab)]=_0x1bafb8,_0x4691cf['onload']=()=>_0x22e9fd[_0x303fa4(0x953)](_0x1bafb8);}}):requestAnimationFrame(()=>{_0x1a8bbc(![]),_0x1bc603(!![]),setTimeout(()=>{const _0xfba047=_0x4f70;_0x52bce5[_0xfba047(0x329)][_0xfba047(0x869)]=_0xfba047(0x920),_0x52bce5['style'][_0xfba047(0x990)]='1';},0x64),setTimeout(()=>{_0x51f11a=![];},0x1c2);});});}}catch(_0x18d26b){console[_0x2e4355(0x27f)](_0x2e4355(0xcc6),_0x18d26b),_0x1a8bbc(![]),_0x51f11a=![];}},0x32);}else _0x399d72(),_0x1196dc(_0x12bcb6(0x862),_0x12bcb6(0xbf0));}async function _0x49b183(){const _0x50fd9d=_0x8dde82;if('WgWAu'===_0x50fd9d(0x392)){if(_0xdfbfac[_0x50fd9d(0x556)]){_0x21d6ce(_0x50fd9d(0xa6d));return;}const _0x59e181=_0xdfbfac['conversationHistory'];if(_0x59e181['length']===0x0)return;let _0x5c4164=-0x1;for(let _0x23fc6b=_0x59e181[_0x50fd9d(0x1e2)]-0x1;_0x23fc6b>=0x0;_0x23fc6b--){if(_0x59e181[_0x23fc6b][_0x50fd9d(0xefb)]===_0x50fd9d(0xa29)){_0x5c4164=_0x23fc6b;break;}}if(_0x5c4164===-0x1||_0x5c4164===_0x59e181[_0x50fd9d(0x1e2)]-0x1){_0x21d6ce(_0x50fd9d(0x4cf));return;}_0x59e181['splice'](_0x5c4164+0x1),_0xdfbfac[_0x50fd9d(0xb7b)]=[],_0x1aa46f(),_0x5c0d02(),_0x112531(_0xdfbfac[_0x50fd9d(0x6e4)]),setTimeout(()=>{_0x261487();},0x64);}else{const _0x353f02=_0x3e1ea8[_0x50fd9d(0x8f1)](_0x50fd9d(0xce2));_0x353f02[_0x50fd9d(0x213)]=_0x50fd9d(0xa50);const _0x3963da=_0x47c4ee+'-'+_0x117cbe(_0x1e485f+0x1)[_0x50fd9d(0x4b9)](0x2,'0')+'-'+_0x4a893e(_0x43bc64)[_0x50fd9d(0x4b9)](0x2,'0');if(_0x3963da===_0x5e05b6)_0x353f02[_0x50fd9d(0x555)][_0x50fd9d(0x1cd)](_0x50fd9d(0x479));if(_0x3963da===_0x38f0f6['selectedDate'])_0x353f02['classList']['add'](_0x50fd9d(0x9b3));const _0x10ff81=_0x33c002[_0x50fd9d(0x8f1)](_0x50fd9d(0x390));_0x10ff81['className']='day-number',_0x10ff81[_0x50fd9d(0x101)]=_0x738297,_0x353f02[_0x50fd9d(0x5b8)](_0x10ff81);const _0x171ef5=_0x5b0571[_0x50fd9d(0x8b2)][_0x50fd9d(0xeb3)](_0x453921=>_0x453921[_0x50fd9d(0xdc9)]===_0x3963da);if(_0x171ef5['length']>0x0){const _0x4b72d3=_0x53975a[_0x50fd9d(0x8f1)]('div');_0x4b72d3[_0x50fd9d(0x213)]=_0x50fd9d(0x312),_0x353f02[_0x50fd9d(0x5b8)](_0x4b72d3);}_0x353f02[_0x50fd9d(0x3a0)](_0x50fd9d(0x288),()=>{_0x4b9aa7['selectedDate']=_0x3963da,_0x5a6648();}),_0x2f2f20[_0x50fd9d(0x5b8)](_0x353f02);}}async function _0x1f615f(){const _0x26c2d4=_0x8dde82;if(_0xdfbfac[_0x26c2d4(0x556)]){_0x21d6ce(_0x26c2d4(0xacc));return;}const _0x35eb2e=_0xdfbfac[_0x26c2d4(0x3a4)];if(_0x35eb2e['length']===0x0)return;let _0x22a747=-0x1;for(let _0x5ef27e=_0x35eb2e[_0x26c2d4(0x1e2)]-0x1;_0x5ef27e>=0x0;_0x5ef27e--){if(_0x35eb2e[_0x5ef27e][_0x26c2d4(0xefb)]==='user'){if('UnMTa'!==_0x26c2d4(0x5fc)){_0x22a747=_0x5ef27e;break;}else{const _0x289c08=_0x46289c(_0x11aa86['id']);_0x289c08[_0x26c2d4(0xb85)](_0x5d859f=>{const _0x1e89e5=_0x26c2d4;_0x5d859f[_0x1e89e5(0x10c)]>=_0x2d1529['getTime']()&&_0x5d859f[_0x1e89e5(0xefb)]!==_0x1e89e5(0xba3)&&_0x5d859f[_0x1e89e5(0xee)]&&_0x419da8[_0x1e89e5(0xb66)]({'timestamp':_0x5d859f['timestamp'],'type':_0x52e1a9(_0x32dae5),'content':'['+(_0x5d859f['role']==='user'?_0x4dfa23['name']:_0x29a987[_0x1e89e5(0xb95)])+_0x1e89e5(0x44a)+_0x5d859f[_0x1e89e5(0xee)]});});}}}if(_0x22a747===-0x1||_0x22a747===_0x35eb2e['length']-0x1){_0x21d6ce('还没有我的回复可以重新生成哦。');return;}_0x35eb2e[_0x26c2d4(0x22f)](_0x22a747+0x1),_0x1aa46f(),_0x1891dc(),setTimeout(()=>{_0x261487();},0x64);}async function _0x54ec5c(_0x1b33ba=null){const _0x490588=_0x8dde82,_0x61ed01=_0x1b33ba??_0x243ba8[_0x490588(0xee2)][_0x490588(0xcd2)]();if(_0x61ed01===''||!_0xdfbfac['activeChatId'])return;const _0x153e92=document[_0x490588(0xb6c)]('.screen.active'),_0x21fbd0=_0x153e92['id']==='meeting-view-screen',_0x3385a1={'role':'user','content':_0x61ed01,'timestamp':Date[_0x490588(0x4a2)](),'isOffline':_0x21fbd0};_0xdfbfac['activeQuote']&&(_0x3385a1[_0x490588(0xd22)]={..._0xdfbfac['activeQuote']});_0xdfbfac[_0x490588(0x3a4)][_0x490588(0xb66)](_0x3385a1);const _0x14d104=_0x597506(_0x3385a1,_0xdfbfac[_0x490588(0x3a4)][_0x490588(0x1e2)]-0x1);_0x14d104&&(_0x2d0aeb[_0x490588(0x648)]=_0x2d0aeb[_0x490588(0xc0c)]);_0x1aa46f(),_0x243ba8[_0x490588(0xee2)]='',_0x2e618b();const _0xbf4a96=_0x1d801f();if(_0xbf4a96?.[_0x490588(0x8c7)]===_0x490588(0xcef)){const _0x310142=_0xbf4a96[_0x490588(0x41b)][0x0];_0x5578b5(_0x61ed01,_0x310142)[_0x490588(0x7ad)](_0x402aae=>{const _0x2f06f3=_0x490588;_0x2f06f3(0xd20)!=='pCHqI'?console['error'](_0x2f06f3(0xb54),_0x402aae):(_0x24aed6=!_0x13707f,_0x23add2['classList']['toggle']('deletion-mode',_0x43522a),_0x594144[_0x2f06f3(0x101)]=_0x1e14c0?'完成':'管理',_0x37f94a[_0x2f06f3(0x329)][_0x2f06f3(0xc66)]=_0x28d392?'block':_0x2f06f3(0x338),!_0x399a8f&&(_0x2fbde2[_0x2f06f3(0x7af)](_0x2f06f3(0xaa5))[_0x2f06f3(0xb85)](_0x5249fa=>_0x5249fa['classList'][_0x2f06f3(0x9ad)](_0x2f06f3(0xd8f))),_0x34c66c['classList'][_0x2f06f3(0x9ad)](_0x2f06f3(0x691))));});}}function _0x4ec423(_0x22048b){const _0x243b97=_0x8dde82;if(_0x243b97(0xd0a)===_0x243b97(0xd0a)){if(!_0x22048b||!_0xdfbfac[_0x243b97(0x8ed)])return;const _0x27c9ac={'role':_0x243b97(0xa29),'content':'[用户发送了表情：'+_0x22048b[_0x243b97(0xb95)]+']','displayUrl':_0x22048b[_0x243b97(0x9f5)],'timestamp':Date[_0x243b97(0x4a2)]()};_0xdfbfac[_0x243b97(0x3a4)][_0x243b97(0xb66)](_0x27c9ac),_0x597506(_0x27c9ac,_0xdfbfac[_0x243b97(0x3a4)][_0x243b97(0x1e2)]-0x1),_0x1aa46f(),_0x5527f8[_0x243b97(0x555)][_0x243b97(0x9ad)](_0x243b97(0x36e));}else _0x5f06d2[_0x243b97(0x555)][_0x243b97(0x1cd)](_0x243b97(0xe84));}async function _0x570869(_0x4cde5c){const _0x5238e4=_0x8dde82,_0x23d72f=_0x4cde5c[_0x5238e4(0x272)]['files'][0x0];if(!_0x23d72f||!_0xdfbfac[_0x5238e4(0x8ed)])return;_0x1a8bbc(!![],'正在处理图片...');try{const _0x2c3e44=await _0x265126(_0x23d72f,0x320,0.8,!![]),_0x57aeb2=_0x5238e4(0x54d)+Date[_0x5238e4(0x4a2)]();await _0x510f28(_0x57aeb2,_0x2c3e44);const _0x3d039e=_0x243ba8[_0x5238e4(0xee2)][_0x5238e4(0xcd2)]();_0x243ba8[_0x5238e4(0xee2)]='';const _0x27311f={'role':_0x5238e4(0xa29),'content':_0x3d039e,'imageId':_0x57aeb2,'timestamp':Date[_0x5238e4(0x4a2)]()};_0xdfbfac['conversationHistory'][_0x5238e4(0xb66)](_0x27311f),_0x597506(_0x27311f,_0xdfbfac[_0x5238e4(0x3a4)][_0x5238e4(0x1e2)]-0x1),_0x1aa46f();}catch(_0x5b3912){_0x21d6ce(_0x5238e4(0xa86)+_0x5b3912[_0x5238e4(0x8ac)]);}finally{_0x5238e4(0xb2f)===_0x5238e4(0xa0a)?(_0x269a94['isGenerating']=![],_0x4e47d3(![])):(_0x1a8bbc(![]),_0x4cde5c[_0x5238e4(0x272)][_0x5238e4(0xee2)]='');}}async function _0x6c6592(){const _0x1434cf=_0x8dde82;if(_0x1434cf(0xbee)!==_0x1434cf(0x65c)){if(!_0xdfbfac[_0x1434cf(0x8ed)])return;const _0x25cd71=await _0x16e7af();if(!_0x25cd71)return;_0x21d6ce('正在搜索音乐...');try{if(_0x1434cf(0x25d)!==_0x1434cf(0x25d)){if(_0x2d3933)return;_0x248983=!![],_0x2e95b9[_0x1434cf(0x8ed)]=null,_0x1f7a52[_0x1434cf(0x1d6)]('chat-screen')[_0x1434cf(0x555)]['remove'](_0x1434cf(0xe84)),_0x12b571(),_0xf4824('chat',_0x1434cf(0x410)),_0xbb5c01(()=>{_0x84fc15=![];},0x190);}else{const _0xdcc880=await _0x43a3df(_0x25cd71['songName'],_0x25cd71[_0x1434cf(0x7dc)]),_0x292da5={'role':_0x1434cf(0xa29),'type':'music','content':'[用户分享了音乐：'+_0x25cd71['songName']+_0x1434cf(0x5a0)+_0x25cd71['artist']+']','songName':_0x25cd71['songName'],'artist':_0x25cd71[_0x1434cf(0x7dc)],'coverUrl':_0xdcc880['cover'],'playableUrl':_0xdcc880[_0x1434cf(0x9f5)],'timestamp':Date['now']()};_0xdfbfac[_0x1434cf(0x3a4)][_0x1434cf(0xb66)](_0x292da5),_0x1aa46f(),_0x192646();}}catch(_0x421d8d){console[_0x1434cf(0x27f)]('用户分享音乐失败:',_0x421d8d),_0x21d6ce(_0x1434cf(0x5a9)+_0x421d8d['message']);}}else _0x2c9062['error'](_0x1434cf(0x6f2),_0x5b4a21);}function _0x3f4597(_0x319b6a,_0x971c6e=0x78){const _0x5434d3=_0x8dde82;if(_0x5434d3(0xc34)===_0x5434d3(0xc34)){const _0x4797ef=_0x3a2fd9=>{const _0x5ef388=_0x5434d3;if(_0x3a2fd9[_0x5ef388(0xefb)]===_0x5ef388(0xa29))return _0xdfbfac[_0x5ef388(0x640)]?.[_0x5ef388(0xb95)]||'User';if(_0x3a2fd9['senderId']){const _0x1d37c3=_0x5844c7(_0x3a2fd9[_0x5ef388(0xdf8)]);return _0x1d37c3?.[_0x5ef388(0xb95)]||_0x5ef388(0x2a6);}if(_0x319b6a?.[_0x5ef388(0x8c7)]==='private'){const _0x15eba4=_0x5844c7(_0x319b6a['participantIds'][0x0]);return _0x15eba4?.[_0x5ef388(0xb95)]||'AI';}return _0x5ef388(0xe40);},_0x2b9aac=_0xdfbfac[_0x5434d3(0x3a4)][_0x5434d3(0x8b8)](-_0x971c6e),_0x583fd0=[];for(const _0x43b6b7 of _0x2b9aac){if(_0x5434d3(0x56d)===_0x5434d3(0xdfa)){const _0x437bea=_0x2552e2[_0x5434d3(0xc1b)][_0x5434d3(0x76b)](_0xe3609c=>_0xe3609c['participantIds'][_0x5434d3(0xc35)](_0x56ad28));if(!_0x437bea)return'';const _0x324d2f=_0xafae84(_0x437bea['id']),_0x1ae2de=_0x33fdf9[_0x5434d3(0x8b2)]['filter'](_0x31984e=>_0x31984e['userId']===_0x324d2f['id']||!_0x31984e[_0x5434d3(0x748)]);if(_0x1ae2de['length']===0x0)return'';const _0x4050de=_0x1ae2de['map'](_0x57fcd5=>{const _0x4e4612=_0x5434d3,_0x559c6d=_0x57fcd5[_0x4e4612(0x8c7)]==='important'?_0x4e4612(0x65f):'待办';return'-\x20['+_0x559c6d+']\x20'+_0x57fcd5[_0x4e4612(0xdc9)]+':\x20'+_0x57fcd5[_0x4e4612(0xee)];})[_0x5434d3(0xd9a)]('\x0a');return _0x5434d3(0x5a6)+_0x324d2f['name']+_0x5434d3(0x239)+_0x4050de;}else{if(_0x43b6b7[_0x5434d3(0x8a6)])_0x583fd0['push']('['+_0x4797ef(_0x43b6b7)+_0x5434d3(0xe10)+(_0x43b6b7[_0x5434d3(0xee)]?.[_0x5434d3(0x4dc)](/：(.+?)]/)?.[0x1]||'表情')+']');else{if(_0x43b6b7[_0x5434d3(0x412)]){if('daLnr'==='sJRkW'){const _0x59863e=_0x2d5160[_0x5434d3(0xea5)](_0xdcf5ca[_0x5434d3(0x7ec)]||[])['replace'](/'/g,_0x5434d3(0xad0))[_0x5434d3(0xbe2)](/"/g,_0x5434d3(0x762)),_0x38354f=_0xea466a[_0x5434d3(0x19c)]||_0x5434d3(0x9e9);return'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20'+(_0x404caa<_0x3cb089[_0x5434d3(0x1e2)]-0x1?_0x5434d3(0xbdf):'')+_0x5434d3(0x46a)+_0x59863e+_0x5434d3(0x166)+_0x38354f+_0x5434d3(0x490)+_0x13ddb7+_0x5434d3(0xbc6)+_0x38354f[_0x5434d3(0xaf6)](0x0)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x38354f+_0x5434d3(0x21b)+(_0x27aad6[_0x5434d3(0x7d0)]||'')+_0x5434d3(0x1a4);}else{const _0x555533=_0x43b6b7['content']?'\x20'+_0x43b6b7[_0x5434d3(0xee)]:'';_0x583fd0['push']('['+_0x4797ef(_0x43b6b7)+']\x20[image]'+_0x555533);}}else _0x43b6b7[_0x5434d3(0xee)]&&_0x583fd0['push']('['+_0x4797ef(_0x43b6b7)+']\x20'+_0x43b6b7['content']);}}}return _0x583fd0[_0x5434d3(0xd9a)]('\x0a');}else _0x54c34f[_0x5434d3(0x27f)](_0x5434d3(0x5c3),_0x21a07f);}function _0x294225(_0x2afb5b,_0x35d2da){const _0x8ba7ea=_0x8dde82;if(!_0x2afb5b||!_0x35d2da)return null;const _0x5b20e7=_0x35d2da[_0x8ba7ea(0x4dc)](/@([^\s:：,，。!?]+)/);if(!_0x5b20e7)return null;const _0x108025=_0x5b20e7[0x1][_0x8ba7ea(0xae9)]();for(const _0x3961fe of _0x2afb5b[_0x8ba7ea(0x41b)]){const _0x3a9bb3=_0x5844c7(_0x3961fe);if(!_0x3a9bb3?.['name'])continue;if(_0x3a9bb3[_0x8ba7ea(0xb95)]['toLowerCase']()===_0x108025)return _0x3a9bb3;if(_0x3a9bb3[_0x8ba7ea(0xb95)]['toLowerCase']()[_0x8ba7ea(0xb91)](_0x108025))return _0x3a9bb3;}return null;}function _0x4bf277(_0x485e95){const _0x881fd=_0x8dde82,_0x511895=_0x485e95[_0x881fd(0x843)]('{'),_0x5bf698=_0x485e95[_0x881fd(0x227)]('}');if(_0x511895>=0x0&&_0x5bf698>_0x511895)return _0x485e95['slice'](_0x511895,_0x5bf698+0x1);return _0x485e95;}function _0x5dd043(_0x3e8229,_0x302997,_0x5646fb){const _0x23d2ca=_0x8dde82,_0x1d628e=new Map(_0x302997[_0x23d2ca(0x266)](_0x2d65e4=>[String(_0x2d65e4['id']),_0x2d65e4])),_0x40e453=_0x31297f=>String(_0x31297f||'')[_0x23d2ca(0xae9)]()[_0x23d2ca(0xbe2)](/\s+/g,''),_0x469ade=new Map(_0x302997[_0x23d2ca(0x266)](_0x539ef5=>[_0x40e453(_0x539ef5['name']),_0x539ef5])),_0x43ba83=new Set(_0x5646fb),_0x52715c={'events':[]};for(const _0x4ff50a of _0x3e8229?.[_0x23d2ca(0x3fb)]||[]){if(_0x23d2ca(0x1e4)!=='jXXCR')_0x987bf7[_0x23d2ca(0xb66)](_0x23d2ca(0x724)+_0x48e3fc+'\x22，这是TA讨厌的！');else{const _0x1734d3=_0x4ff50a[_0x23d2ca(0xdf8)]??_0x4ff50a[_0x23d2ca(0x466)]??_0x4ff50a[_0x23d2ca(0x550)]??_0x4ff50a['speaker']??_0x4ff50a[_0x23d2ca(0xefb)]??_0x4ff50a['name'];if(!_0x1734d3)continue;let _0x48ead6=_0x1d628e[_0x23d2ca(0x4f9)](String(_0x1734d3))||_0x469ade['get'](_0x40e453(_0x1734d3));if(!_0x48ead6)continue;const _0x46b7eb=(_0x4ff50a[_0x23d2ca(0x12e)]||_0x4ff50a[_0x23d2ca(0x8c7)]||_0x23d2ca(0x7ee))[_0x23d2ca(0xae9)]();if(_0x46b7eb===_0x23d2ca(0xea)){if(_0x23d2ca(0xb25)!==_0x23d2ca(0xd05)){const _0x4651f2=(_0x4ff50a[_0x23d2ca(0xea)]??_0x4ff50a[_0x23d2ca(0xaac)]??_0x4ff50a[_0x23d2ca(0xb98)]??_0x4ff50a[_0x23d2ca(0xaae)])?.[_0x23d2ca(0xcd2)]();if(_0x4651f2&&_0x43ba83[_0x23d2ca(0x76f)](_0x4651f2))_0x23d2ca(0x3ae)!=='jLOYo'?_0x52715c[_0x23d2ca(0x3fb)][_0x23d2ca(0xb66)]({'senderId':_0x48ead6['id'],'kind':'sticker','sticker':_0x4651f2}):_0x63aca7['classList'][_0x23d2ca(0x9ad)](_0x23d2ca(0x36e));else{if('ZgGkv'==='uJdtw'){const _0x1fea75=(_0x5bedd4[_0x23d2ca(0xea)]??_0x308c65[_0x23d2ca(0xaac)]??_0xa9b703[_0x23d2ca(0xb98)]??_0x3a27bc[_0x23d2ca(0xaae)])?.[_0x23d2ca(0xcd2)]();if(_0x1fea75&&_0x371f36[_0x23d2ca(0x76f)](_0x1fea75))_0x4496c9[_0x23d2ca(0x3fb)][_0x23d2ca(0xb66)]({'senderId':_0x180696['id'],'kind':_0x23d2ca(0xea),'sticker':_0x1fea75});else{const _0x5d7792=_0x2140b4(_0x1f8f69[_0x23d2ca(0xee)]??_0x56e338[_0x23d2ca(0x7ee)]??'')[_0x23d2ca(0xcd2)]()||_0x23d2ca(0x9bc)+(_0x1fea75||_0x23d2ca(0x2b9))+']';if(_0x5d7792)_0x262552['events'][_0x23d2ca(0xb66)]({'senderId':_0xfa0d05['id'],'kind':'text','content':_0x5d7792});}}else{const _0x3358e6=String(_0x4ff50a[_0x23d2ca(0xee)]??_0x4ff50a[_0x23d2ca(0x7ee)]??'')[_0x23d2ca(0xcd2)]()||_0x23d2ca(0x9bc)+(_0x4651f2||'未知表情')+']';if(_0x3358e6)_0x52715c['events'][_0x23d2ca(0xb66)]({'senderId':_0x48ead6['id'],'kind':_0x23d2ca(0x7ee),'content':_0x3358e6});}}}else{const _0x3026b6=_0x492e36[_0x23d2ca(0xc44)](_0x3fef36);_0x3026b6[_0x23d2ca(0x837)]&&_0x3026b6[_0x23d2ca(0x837)][0x0]&&_0x3026b6['choices'][0x0][_0x23d2ca(0x8e3)]&&(_0x549f5d+=_0x3026b6[_0x23d2ca(0x837)][0x0][_0x23d2ca(0x8e3)][_0x23d2ca(0xee)]||''),_0x3026b6['usage']&&(_0x3ef60d=_0x3026b6[_0x23d2ca(0x695)]);}}else{if(_0x46b7eb===_0x23d2ca(0xbf0)&&_0x4ff50a['songName']&&_0x4ff50a[_0x23d2ca(0x7dc)]){if('OLFgs'==='OLFgs')_0x52715c[_0x23d2ca(0x3fb)][_0x23d2ca(0xb66)]({'senderId':_0x48ead6['id'],'kind':'music','songName':_0x4ff50a[_0x23d2ca(0x3c7)],'artist':_0x4ff50a['artist']});else{const _0x709508=_0x57a220[_0x23d2ca(0xc1b)][_0x23d2ca(0x76b)](_0x1d8afc=>_0x1d8afc['type']===_0x23d2ca(0xcef)&&_0x1d8afc[_0x23d2ca(0x41b)][_0x23d2ca(0xc35)](_0x2cbe8e['id'])),_0x1012fe=_0x313e97[_0x23d2ca(0xc37)]['find'](_0x18444d=>_0x18444d['id']===(_0x709508?.[_0x23d2ca(0xacb)]||_0x48fc26[_0x23d2ca(0xb83)]))||{'id':_0x23d2ca(0x7f4),'name':'你'};let _0xbcc04b='';return _0x104f6a[_0x23d2ca(0x5ee)]&&_0x5f391e[_0x23d2ca(0x5ee)][_0x23d2ca(0x1e2)]>0x0&&(_0xbcc04b=_0x34467a['linkedWorldBookIds'][_0x23d2ca(0x266)](_0xa34f65=>_0x4f5ce5[_0x23d2ca(0xe7d)]['find'](_0x2ad3eb=>_0x2ad3eb['id']===_0xa34f65))[_0x23d2ca(0xeb3)](_0x5de356)[_0x23d2ca(0x266)](_0x293c61=>_0x23d2ca(0x5ea)+_0x293c61[_0x23d2ca(0xb95)]+_0x23d2ca(0x44a)+_0x293c61['content'])['join']('')),_0x23d2ca(0x68a)+_0x569c72['id']+_0x23d2ca(0x6d6)+_0x1425d1[_0x23d2ca(0xb95)]+_0x23d2ca(0xc60)+_0x5c7d93[_0x23d2ca(0x79b)]+_0x23d2ca(0xa60)+_0x1012fe['name']+_0x23d2ca(0x42a)+_0x1012fe['id']+')\x0a'+_0xbcc04b;}}else{const _0x223e3b=String(_0x4ff50a['content']??_0x4ff50a[_0x23d2ca(0x7ee)]??_0x4ff50a['message']??'')[_0x23d2ca(0xcd2)]();if(_0x223e3b)_0x52715c[_0x23d2ca(0x3fb)][_0x23d2ca(0xb66)]({'senderId':_0x48ead6['id'],'kind':_0x23d2ca(0x7ee),'content':_0x223e3b});}}}}return _0x52715c;}async function _0xbdc17c(_0x96005b){const _0x229798=_0x8dde82;if(!_0x96005b||!Array[_0x229798(0xca5)](_0x96005b['events'])||_0x96005b[_0x229798(0x3fb)]['length']===0x0)return;const _0x36ead6=_0x376a51=>_0x376a51+Math[_0x229798(0x33e)](Math[_0x229798(0x48a)]()*0x190);let _0x2641f7=0x1f4;for(const _0x3990f0 of _0x96005b[_0x229798(0x3fb)]){await new Promise(_0x4640b2=>setTimeout(_0x4640b2,_0x36ead6(_0x2641f7))),_0x2641f7=0x2bc;const _0x37f751=_0xdfbfac[_0x229798(0x3a4)]['at'](-0x1)?.[_0x229798(0xf05)]??![],_0x3a8384={'role':_0x229798(0xefe),'senderId':_0x3990f0[_0x229798(0xdf8)],'timestamp':Date[_0x229798(0x4a2)](),'isOffline':_0x37f751};if(_0x3990f0[_0x229798(0x12e)]==='html'){if(_0x229798(0xd07)!==_0x229798(0x36f)){Object['assign'](_0x3a8384,{'type':'html','content':_0x3990f0[_0x229798(0xee)]}),_0x597506(_0x3a8384,-0x1),_0x2d0aeb[_0x229798(0x648)]=_0x2d0aeb[_0x229798(0xc0c)];continue;}else{const _0x4fa013=_0x54498a[_0x229798(0x314)](_0x54c3e5,_0x229798(0xece)),_0x36c317=_0x4fa013[_0x229798(0xa49)](_0x374639),_0x49a5a1=_0x36c317[_0x229798(0xa3c)](_0x4ed323);_0x49a5a1['onsuccess']=()=>_0x65e94b(),_0x49a5a1[_0x229798(0x514)]=()=>_0x6c29c9(_0x49a5a1[_0x229798(0x27f)]);}}if(_0x3990f0[_0x229798(0x12e)]===_0x229798(0xea)){const _0x3fd41a=_0x1e8db1['find'](_0x22b9e9=>_0x22b9e9[_0x229798(0xb95)]===_0x3990f0[_0x229798(0xea)]);if(_0x3fd41a){if(_0x229798(0xcc9)!==_0x229798(0xcc9)){const _0x46b0c1=_0x1339f1[_0x229798(0x1d6)](_0x229798(0xe4e)),_0x1ce1f6=_0x9ea4e7['getElementById'](_0x229798(0xd16)),_0x559153=_0x46b0c1[_0x229798(0xee2)][_0x229798(0xcd2)](),_0x596b78=_0x5d57c7(_0x1ce1f6[_0x229798(0xee2)]);if(!_0x559153||_0x3de778(_0x596b78)||_0x596b78<=0x0){_0x40595b(_0x229798(0x1cc));return;}_0x4a5e64[_0x229798(0x683)][_0x229798(0xb66)]({'id':_0x229798(0x599)+_0x1d37c1[_0x229798(0x4a2)](),'description':_0x559153,'amount':_0x596b78,'timestamp':_0x5f5a9a['now']()}),_0x4dafd7(),_0x516d55(),_0x46b0c1[_0x229798(0xee2)]='',_0x1ce1f6[_0x229798(0xee2)]='',_0x46b0c1[_0x229798(0xc10)]();}else Object[_0x229798(0x24a)](_0x3a8384,{'content':_0x229798(0x858)+_0x3fd41a[_0x229798(0xb95)]+']','displayUrl':_0x3fd41a['url']}),_0xdfbfac[_0x229798(0x3a4)]['push'](_0x3a8384),_0x1aa46f(),_0x597506(_0x3a8384,_0xdfbfac['conversationHistory'][_0x229798(0x1e2)]-0x1),_0x2d0aeb[_0x229798(0x648)]=_0x2d0aeb[_0x229798(0xc0c)];}continue;}if(_0x3990f0[_0x229798(0x12e)]===_0x229798(0xbf0)&&_0x3990f0[_0x229798(0x3c7)]&&_0x3990f0[_0x229798(0x7dc)]){if('YeXcs'!==_0x229798(0x9fc)){const {songName:_0xb9d860,artist:_0x6e375d}=_0x3990f0;Object[_0x229798(0x24a)](_0x3a8384,{'type':_0x229798(0xbf0),'content':_0x229798(0x8af)+_0xb9d860+_0x229798(0x5a0)+_0x6e375d+']','songName':_0xb9d860,'artist':_0x6e375d});try{const _0x337422=await _0x43a3df(_0xb9d860,_0x6e375d);_0x3a8384[_0x229798(0x520)]=_0x337422[_0x229798(0x267)],_0x3a8384['playableUrl']=_0x337422[_0x229798(0x9f5)];}catch(_0x49976a){}_0xdfbfac[_0x229798(0x3a4)]['push'](_0x3a8384),_0x1aa46f(),_0x1891dc();continue;}else{_0xac093d=_0x24c377(_0x29a8bf);if(!_0x5b552b)throw new _0x1be99a('YAML翻译机也无法理解这段梦话。');_0xb9c9c5[_0x229798(0x7ec)]('兼容模式成功，已将旧格式数据翻译。');}}if(_0x3990f0[_0x229798(0x12e)]===_0x229798(0x7ee)){const _0x437169=(_0x3990f0[_0x229798(0xee)]||'')[_0x229798(0x4dc)](/^\[引用\|(.*?)\|(.*?)\]\s*/);let _0x3ffbe2=_0x3990f0[_0x229798(0xee)]||'';_0x437169&&(_0x3a8384[_0x229798(0xd22)]={'sender':_0x437169[0x1]['trim'](),'content':_0x437169[0x2]['trim']()},_0x3ffbe2=_0x3990f0[_0x229798(0xee)][_0x229798(0x3b1)](_0x437169[0x0][_0x229798(0x1e2)])[_0x229798(0xcd2)]());const _0x105b91=_0x2b3880(_0x3ffbe2)[_0x229798(0x8b8)](0x0,0x3);for(let _0xbc71b6=0x0;_0xbc71b6<_0x105b91[_0x229798(0x1e2)];_0xbc71b6++){_0xbc71b6>0x0&&(await new Promise(_0x2a3695=>setTimeout(_0x2a3695,_0x36ead6(0x190))),delete _0x3a8384['quotedMessage']),_0x3a8384['content']=_0x105b91[_0xbc71b6],_0xdfbfac[_0x229798(0x3a4)][_0x229798(0xb66)]({..._0x3a8384}),_0x1aa46f(),_0x1891dc();}}}}async function _0x54207f(_0x3beae6,{force:force=![],delayMs:delayMs=0x0}={}){const _0x5c4833=_0x8dde82;if('NmtNl'===_0x5c4833(0x4fb)){const _0x3c2ca8=_0x2d46db();if(_0x3c2ca8&&_0x3c2ca8[_0x5c4833(0x8c7)]===_0x5c4833(0xcef))_0x146bc9(_0x3c2ca8['participantIds'][0x0]);else _0x3c2ca8&&_0x3c2ca8[_0x5c4833(0x8c7)]===_0x5c4833(0x304)&&_0x1b1422(_0x3c2ca8['id']);}else{await new Promise(_0x478619=>setTimeout(_0x478619,0xa));if(!_0xdfbfac[_0x5c4833(0x5e0)]['endpoint']||!_0xdfbfac[_0x5c4833(0x5e0)][_0x5c4833(0xb84)]||!_0xdfbfac[_0x5c4833(0x5e0)][_0x5c4833(0x888)])return _0x21d6ce(_0x5c4833(0xd33)),![];const _0x56da3a=_0x1d801f();if(!_0x56da3a||!_0x3beae6)return![];const _0xfe9258=_0x58761c(_0x56da3a['id']),_0x4ed043=_0xdfbfac['conversationHistory']['at'](-0x1)?.['role']===_0x5c4833(0xa29);if(!force&&!_0x4ed043)return![];const _0x5264a3=_0xdfbfac[_0x5c4833(0x3a4)]['at'](-0x1)?.[_0x5c4833(0xf05)]??![];if(delayMs)await new Promise(_0x1c0455=>setTimeout(_0x1c0455,delayMs));_0x5264a3?_0x5c4833(0x11f)!==_0x5c4833(0x11f)?(_0x5a4f85['error'](_0x5c4833(0x30d),_0x5e8482),_0x4fb693[_0x5c4833(0x1d6)]('meeting-scene-view')[_0x5c4833(0xa73)]=_0x5c4833(0x428)):document['getElementById'](_0x5c4833(0x2a7))[_0x5c4833(0x101)]=_0x5c4833(0x63d):_0x5c4833(0x8e1)!==_0x5c4833(0xcff)?_0x5b8908(!![]):_0xa093c9[_0x5c4833(0x555)][_0x5c4833(0x1cd)](_0x5c4833(0xc64));let _0x14bfa0='';const _0x39b7ad=_0x1d801f();if(_0x39b7ad?.[_0x5c4833(0x74a)]?.[_0x5c4833(0x976)]){const _0x3da12c=_0x39b7ad['activeListenSession'],_0x5667e5=await _0x5aae8d(_0x3da12c['songId']);if(_0x5667e5&&_0x5667e5[_0x5c4833(0x901)]){const _0x2feea5=_0x33c978(_0x5667e5[_0x5c4833(0x901)]);if(_0x2feea5[_0x5c4833(0x1e2)]>0x0){const _0x3314ee=_0x3242a5[_0x5c4833(0x908)];let _0x5654ac=-0x1;for(let _0x4f8360=0x0;_0x4f8360<_0x2feea5[_0x5c4833(0x1e2)];_0x4f8360++){if(_0x3314ee>=_0x2feea5[_0x4f8360][_0x5c4833(0x95f)])_0x5654ac=_0x4f8360;else break;}const _0x4f69c4=_0x2feea5[_0x5c4833(0x266)]((_0x5357f9,_0x155e00)=>{const _0x53f49a=_0x5c4833;if(_0x53f49a(0xeed)!==_0x53f49a(0x7a7)){const _0x4a6953=_0x155e00===_0x5654ac?_0x53f49a(0x8e7):'';return''+_0x4a6953+_0x5357f9['text'];}else throw new _0x36aa8f(_0x53f49a(0x644));})[_0x5c4833(0xd9a)]('\x0a'),_0x2b9e8b=_0x2feea5[_0x5c4833(0x266)](_0x451759=>_0x451759[_0x5c4833(0x7ee)])['join']('\x0a'),_0x465c62=_0x5654ac>-0x1?_0x2feea5[_0x5654ac][_0x5c4833(0x7ee)]:_0x5c4833(0xc90);_0x14bfa0=(_0x5c4833(0x62a)+_0x3da12c[_0x5c4833(0x7dc)]+_0x5c4833(0xe17)+_0x3da12c[_0x5c4833(0x3c7)]+'》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a'+_0x2b9e8b+_0x5c4833(0x6e8)+_0x465c62+_0x5c4833(0x350))[_0x5c4833(0xcd2)]();}}}let _0x1b732e='',_0x237094='';const _0x1f7c03=_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0x1e2)];if(_0x1f7c03>0x1){const _0x507251=_0xdfbfac['conversationHistory'][_0x1f7c03-0x2],_0x3fd5af=_0xdfbfac[_0x5c4833(0x3a4)][_0x1f7c03-0x1];if(_0x507251[_0x5c4833(0xf05)]===![]&&_0x3fd5af[_0x5c4833(0xf05)]===!![])_0x5c4833(0x69b)===_0x5c4833(0x69b)?_0x237094=_0x5c4833(0x9ca)+_0xfe9258[_0x5c4833(0xb95)]+_0x5c4833(0x9ba):_0xf07d93[_0x5c4833(0x3c6)][_0x5c4833(0xb66)]({'id':_0x27236f['id']||_0x5c4833(0x3df)+_0x1fed8d[_0x5c4833(0x4a2)](),'name':_0x58bce8[_0x5c4833(0xb95)]});else{if(_0x507251[_0x5c4833(0xf05)]===!![]&&_0x3fd5af[_0x5c4833(0xf05)]===![]){if(_0x5c4833(0x69d)===_0x5c4833(0xc01)){const _0x47fb92=_0x1d90cb['getElementById']('confirm-altar-upload-button');_0x39e6a0[_0x5c4833(0xe3c)]&&_0x4b096e[_0x5c4833(0x3d2)]?_0x47fb92[_0x5c4833(0x2c5)]=![]:_0x47fb92['disabled']=!![];}else _0x237094='\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“'+_0xfe9258['name']+_0x5c4833(0xa31);}}}if(_0x5264a3){if(_0x5c4833(0x80d)===_0x5c4833(0x672)){const _0x41743f=_0x215674[_0x5c4833(0xc44)](_0x392d8d);_0x38c1be[_0x5c4833(0xca5)](_0x41743f)&&(_0x5e9d3f=_0x41743f[_0x5c4833(0xeb3)](_0x1dba92=>_0x1dba92&&typeof _0x1dba92==='object'&&typeof _0x1dba92[_0x5c4833(0xefb)]==='string'&&typeof _0x1dba92[_0x5c4833(0xee)]!=='undefined'));}else{const _0xc707e0=_0x5c4833(0x493);_0x1b732e='\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“'+_0xfe9258['name']+'”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从['+_0xc707e0+_0x5c4833(0xa5c)+_0x3beae6['name']+_0x5c4833(0x1d8)+_0xc707e0+_0x5c4833(0x97c)+_0xc707e0+_0x5c4833(0xef7);}}else{if(_0x5c4833(0xd21)!=='HZBvT')_0x5c4833(0xd2a);else{_0x24e73c('你还没保存这个角色呢，导什么导？');return;}}const {omniText:_0x4468fa}=_0x5a83ee(_0x3beae6['id'],_0x56da3a['id']),_0x3a6632=_0x5c5e8c(),_0x501443=_0x2c9d46(_0x3beae6['id']),_0x8cfb7d=_0x2a0a9d(_0x3beae6['id']),_0x4a050e=_0xbf1baf(_0x3beae6['id']),_0x3b497c=await _0x421bdd(_0x3beae6['id']);let _0x37f337=null;const _0x4fd425='nuomi_profile_tiaoTiao_'+_0x3beae6['id'];try{const {value:_0x32ff85}=await Capacitor[_0x5c4833(0x248)][_0x5c4833(0x768)][_0x5c4833(0x4f9)]({'key':_0x4fd425});_0x32ff85&&(_0x5c4833(0x35d)===_0x5c4833(0x35d)?_0x37f337=JSON[_0x5c4833(0xc44)](_0x32ff85):(_0x1dd9b4[_0x5c4833(0x27f)](_0x5c4833(0xb67),_0x7c0384,_0x5c4833(0x82f),_0x52b581),_0x576109[_0x5c4833(0x3a4)][_0x5c4833(0xb66)]({'role':_0x5c4833(0xefe),'senderId':_0x1f8f61['id'],'timestamp':_0x170e71[_0x5c4833(0x4a2)](),'isOffline':!![],'content':_0x5c4833(0xd47)+_0x2d08f5+']'})));}catch(_0x443be8){console[_0x5c4833(0x27f)](_0x5c4833(0x435),_0x443be8);}const _0x31d690=_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0x8b8)](-0x5),_0x5d90c3=_0x37f337?_0x40cbd0(_0x31d690,_0x37f337):'',_0x5d627c=await _0x3c59fa(_0x3beae6['id']),_0x4e92cf=_0x5d627c?_0x5c4833(0xc7f)+_0xfe9258[_0x5c4833(0xb95)]+_0x5c4833(0x664)+_0x5d627c:'',_0x42743b=''+_0x4e92cf+_0x5d90c3+_0x5c4833(0xf7)+_0xfe9258[_0x5c4833(0xb95)]+_0x5c4833(0x90e)+_0xfe9258['name']+_0x5c4833(0x251)+_0xfe9258[_0x5c4833(0xb95)]+_0x5c4833(0x291),_0x4669ac=typeof _0x157195===_0x5c4833(0x193)?_0x157195[_0x5c4833(0x4e6)](_0x5c4833(0xb3c),_0x3beae6['name'])[_0x5c4833(0x4e6)](_0x5c4833(0x9a9),_0xfe9258[_0x5c4833(0xb95)]||'用户'):'',_0x93bfdb=_0x376b0d()['map'](_0x3d63a6=>_0x3d63a6[_0x5c4833(0xb95)])[_0x5c4833(0xd9a)](',\x20');let _0xe04ec7='';if(_0x3beae6[_0x5c4833(0x5ee)]&&_0x3beae6[_0x5c4833(0x5ee)]['length']>0x0){const _0x14683=_0x3beae6[_0x5c4833(0x5ee)][_0x5c4833(0x266)](_0x3412fc=>_0xdfbfac[_0x5c4833(0xe7d)]['find'](_0x1b321c=>_0x1b321c['id']===_0x3412fc))[_0x5c4833(0xeb3)](Boolean)[_0x5c4833(0x266)](_0x124b94=>_0x5c4833(0x820)+_0x124b94[_0x5c4833(0xb95)]+'\x0a'+_0x124b94[_0x5c4833(0xee)])[_0x5c4833(0xd9a)]('');if(_0x14683)_0xe04ec7=_0x5c4833(0xebc)+_0x14683;}const _0x1c47a6=_0xfe9258['persona']?_0x5c4833(0xe5f)+_0xfe9258[_0x5c4833(0xb95)]+'\x22的用户自述设定\x0a'+_0xfe9258[_0x5c4833(0x79b)]:'';let _0x5c3f9e='';const _0x482a20=new Date(),_0x5a4e72=_0x59d839(_0x3beae6['id']);_0x5c3f9e='\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a',_0x5c3f9e+=_0x5c4833(0x1e3)+_0x482a20[_0x5c4833(0x985)]('zh-CN',{'dateStyle':_0x5c4833(0x755),'timeStyle':_0x5c4833(0xa40)})+'\x0a';if(_0x5a4e72){if(_0x5c4833(0xb22)===_0x5c4833(0xb22)){const _0x1fb616=new Date(_0x5a4e72[_0x5c4833(0x10c)]),_0x35ebb4=_0x301288(_0x1fb616);_0x5c3f9e+=_0x5c4833(0x994)+_0x35ebb4+'\x0a';const _0x148082=_0x482a20[_0x5c4833(0x9d1)](),_0x1b28ae=_0x1fb616[_0x5c4833(0x9d1)](),_0x785e49=new Date();_0x785e49[_0x5c4833(0xad1)](_0x482a20[_0x5c4833(0x55b)]()-0x1);const _0x5afd6f=_0x785e49['toDateString']();if(_0x148082===_0x1b28ae){const _0x359daa=(_0x482a20-_0x1fb616)/(0x3e8*0x3c);if(_0x359daa<0x3c){if(_0x5c4833(0x571)!==_0x5c4833(0x571)){_0x75fdfd[_0x5c4833(0xa73)]=_0x5c4833(0xafb),_0xb96eb9[_0x5c4833(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5146af['getElementById'](_0x5c4833(0x746))[_0x5c4833(0x3a0)](_0x5c4833(0x288),_0x46abc8),_0x3c9594['getElementById'](_0x5c4833(0x4ea))[_0x5c4833(0x3a0)](_0x5c4833(0x288),_0x4f1482);return;}else _0x5c3f9e+='-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a';}else{if('IlmtZ'!=='pPLao')_0x5c3f9e+=_0x5c4833(0x228)+Math[_0x5c4833(0x375)](_0x359daa/0x3c)+_0x5c4833(0x8ba);else{const _0x413292=_0x134b36[_0x5c4833(0xe82)]();_0x413292[_0x5c4833(0xdab)]=()=>_0x5d919d(_0x413292[_0x5c4833(0xd29)]),_0x413292[_0x5c4833(0x514)]=()=>_0x2cf423(_0x413292[_0x5c4833(0x27f)]);}}}else{if(_0x5afd6f===_0x1b28ae)_0x5c3f9e+=_0x5c4833(0x96e);else{const _0x526724=Math[_0x5c4833(0x375)]((_0x482a20-_0x1fb616)/(0x3e8*0x3c*0x3c*0x18));_0x5c3f9e+='-\x20**对话状态提示**:\x20你们已经有\x20'+_0x526724+'\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a';}}}else _0x576ccf(),_0x2cd09f(_0x5c4833(0x128),_0x5c4833(0x222));}else{if('DhdQa'===_0x5c4833(0x400)){_0x82098e['target'][_0x5c4833(0xee2)]='';return;}else _0x5c3f9e+=_0x5c4833(0x863);}const _0x4d63d2=('\x0a'+_0x1b732e+_0x5c4833(0x32d)+_0x3beae6[_0x5c4833(0xb95)]+_0x5c4833(0x877)+_0x3beae6[_0x5c4833(0xb95)]+_0x5c4833(0x8e9)+_0x3beae6['name']+_0x5c4833(0x835)+_0x93bfdb+_0x5c4833(0xe70)+_0x4669ac+'\x0a')[_0x5c4833(0xcd2)](),_0x44a7d6=[{'role':_0x5c4833(0xba3),'content':_0x4d63d2}],_0x42ce21=(_0x5c4833(0xe6b)+(_0x3beae6[_0x5c4833(0x79b)]||_0x5c4833(0x71e))+'\x0a'+_0x1c47a6+'\x20\x0a'+_0x42743b+'\x0a'+_0x4468fa+'\x0a'+_0x3a6632+'\x0a'+_0x501443+'\x0a'+_0x8cfb7d+_0x5c4833(0xa20)+_0x4a050e+_0x5c4833(0x5ed)+_0x3b497c+_0x5c4833(0x9d8)+_0x14bfa0+'\x0a'+_0x5c3f9e+'\x0a'+_0xe04ec7+'\x0a')['trim']();_0x42ce21[_0x5c4833(0xbe2)](/#.*|\s/g,'')&&('PpBvI'!=='wrBnD'?(_0x44a7d6['push']({'role':_0x5c4833(0xa29),'content':_0x42ce21}),_0x44a7d6[_0x5c4833(0xb66)]({'role':_0x5c4833(0xefe),'content':'好的，我记住了这些人设和历史。现在我们开始对话。'})):_0x3df417=_0x1220ad['at'](-0x1));const _0x503466=_0xdfbfac[_0x5c4833(0x3a8)]?.[_0x5c4833(0x89c)]??0x64,_0x36d32c=_0xdfbfac['conversationHistory'][_0x5c4833(0x8b8)](-_0x503466);for(const _0xbeaf97 of _0x36d32c){if('YSzVm'!==_0x5c4833(0xbcc)){const _0x38c37a={'promptTokens':_0xab743e[_0x5c4833(0x5af)]||0x0,'completionTokens':_0x3a7c8f[_0x5c4833(0x4aa)]||0x0,'totalTokens':_0x1dae29['totalTokenCount']||0x0,'timestamp':_0x5143a7['now'](),'chatId':_0x49be5c[_0x5c4833(0x8ed)],'model':_0x543feb};_0x56ba71[_0x5c4833(0x61f)][_0x5c4833(0x64c)]=_0x38c37a,_0x54971b['tokenStats'][_0x5c4833(0xb82)][_0x5c4833(0xb66)](_0x38c37a),_0x5e48ee[_0x5c4833(0x61f)][_0x5c4833(0xb82)]['length']>0x64&&_0x394ea6[_0x5c4833(0x61f)]['history'][_0x5c4833(0x2f0)]();}else{const _0xea1bfa=_0xbeaf97['role']==='ai'||_0xbeaf97[_0x5c4833(0xefb)]===_0x5c4833(0xefe)?_0x5c4833(0xefe):'user';let _0x18a6ad={'role':_0xea1bfa,'content':_0xbeaf97[_0x5c4833(0xee)]},_0x1a0630=!!_0xbeaf97[_0x5c4833(0xee)];if(_0xbeaf97[_0x5c4833(0x8a6)]&&_0xbeaf97['content'][_0x5c4833(0xc35)]('表情')){const _0x51fa40=_0xbeaf97[_0x5c4833(0xee)][_0x5c4833(0x4dc)](/：(.*?)]$/);_0x18a6ad[_0x5c4833(0xee)]=_0x5c4833(0x9bc)+(_0x51fa40?_0x51fa40[0x1]:_0x5c4833(0x2b9))+']',_0x44a7d6['push'](_0x18a6ad);}else{if(_0x5c4833(0x4a5)!==_0x5c4833(0x4a5))_0xa5b350(_0x52dc4d,{'force':!![],'delayMs':_0x5200ee}),_0x47d6d6+=0x1f4;else{let _0x267316=null;if(_0xbeaf97[_0x5c4833(0x412)])_0x267316=_0xbeaf97[_0x5c4833(0x412)];else{if(_0xbeaf97['imageId']){if('lHeEN'==='lHeEN')try{const _0x3bc447=await _0x4131e2(_0xbeaf97[_0x5c4833(0xe2d)]);_0x3bc447&&(_0x5c4833(0x5b9)!=='QlDYA'?_0x338d10[_0x5c4833(0x101)]=_0x5c4833(0xa12)+_0x2a7779['length']+'\x20项':_0x267316=await _0x273922(_0x3bc447));}catch(_0x1d6448){console[_0x5c4833(0x27f)](_0x5c4833(0xc33),_0x1d6448);}else{let _0x1ce83d=_0xb057ec[_0x5c4833(0xb6c)](_0x5c4833(0x654));!_0x1ce83d&&(_0x1ce83d=_0x182127[_0x5c4833(0x8f1)]('p'),_0x1ce83d[_0x5c4833(0x213)]=_0x5c4833(0x9a7),_0x1ce83d[_0x5c4833(0x101)]=_0x5c4833(0xa5d),_0x3efba9[_0x5c4833(0x5b8)](_0x1ce83d));}}}_0x267316&&(_0x18a6ad[_0x5c4833(0x412)]=_0x267316,_0x1a0630=!![]),_0x1a0630&&(_0x5c4833(0x9b1)===_0x5c4833(0x9b1)?_0x44a7d6['push'](_0x18a6ad):(_0x2c9577[_0x5c4833(0x92c)]=_0xd52965,_0x560a9d(_0x14872e['activeMeetingCharId'],_0x5c4833(0xcd5))));}}}}try{const _0xd4cb67=await _0x2fa074(_0x44a7d6);if(!_0xd4cb67)return![];if(_0x5264a3){if(_0x5c4833(0x911)==='eyqoO')try{let _0x3580f8=_0xd4cb67[_0x5c4833(0xcd2)]();const _0x53ff53=_0x3580f8[_0x5c4833(0x4dc)](/(\[[\s\S]*\])/);if(_0x53ff53){if(_0x5c4833(0xdfb)===_0x5c4833(0x363)){const _0x4c71f8=_0x11fa2e['split']('--');_0x4c71f8[_0x5c4833(0x1e2)]===0x2&&_0x4c71f8[0x0][_0x5c4833(0xcd2)]()&&_0x4c71f8[0x1][_0x5c4833(0xcd2)]()[_0x5c4833(0xb91)](_0x5c4833(0x3b2))?_0x48dfcc['push']({'name':_0x4c71f8[0x0][_0x5c4833(0xcd2)](),'url':_0x4c71f8[0x1][_0x5c4833(0xcd2)]()}):_0x21c52c++;}else _0x3580f8=_0x53ff53[0x1];}const _0x18aad4=JSON[_0x5c4833(0xc44)](_0x3580f8);if(Array[_0x5c4833(0xca5)](_0x18aad4)){if(_0x5c4833(0xa7d)!==_0x5c4833(0xa7d)){_0x49664f[_0x5c4833(0xa73)]=_0x5c4833(0x2a2);return;}else{_0xdfbfac[_0x5c4833(0xb7b)]=[..._0x18aad4],_0xdfbfac['characterLastScripts'][_0x3beae6['id']]=[..._0x18aad4],_0x2376ec();const _0x1136f4=_0x18aad4[_0x5c4833(0x266)](_0x10bc3a=>_0x10bc3a[_0x5c4833(0x8b5)]===_0x5c4833(0x230)?_0x10bc3a[_0x5c4833(0x1c6)]:_0x10bc3a['speaker']+':\x20'+_0x10bc3a['line'])[_0x5c4833(0xd9a)]('\x0a\x0a');_0xdfbfac[_0x5c4833(0x3a4)]['push']({'role':'assistant','senderId':_0x3beae6['id'],'timestamp':Date[_0x5c4833(0x4a2)](),'isOffline':!![],'content':_0x1136f4});}}}catch(_0x114309){console[_0x5c4833(0x27f)]('解析AI剧本JSON失败:',_0x114309,_0x5c4833(0x82f),_0xd4cb67),_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0xb66)]({'role':_0x5c4833(0xefe),'senderId':_0x3beae6['id'],'timestamp':Date[_0x5c4833(0x4a2)](),'isOffline':!![],'content':_0x5c4833(0xd47)+_0xd4cb67+']'});}else{_0x366930(_0x5c4833(0xa77),'characterEdit');if(!_0x2fdda2){const _0x45486f=_0x5c4833(0x9d5)+_0x5cb02f['now']();_0x105749(_0x45486f);}}}else{if(_0x5c4833(0xeb1)!=='jGKWh'){const {bubbles:_0x214818,schedules:_0x6e13bc}=_0x48a93f(_0xd4cb67),_0x4900ad=_0x214818[_0x5c4833(0x266)](_0x41bd02=>{const _0x30ec3c=_0x5c4833,_0x3f2d4c=_0x41bd02[_0x30ec3c(0xcd2)](),_0x243536=_0x3f2d4c[_0x30ec3c(0x4dc)](/^\[sticker:(.*?)\]$/),_0x5eafc9=_0x3f2d4c[_0x30ec3c(0x4dc)](/^\[transfer:([\d.]+)\|(.*?)\]$/),_0xb7632=_0x3f2d4c[_0x30ec3c(0x4dc)](/^\[music:(.*?)\|(.*?)\]$/),_0x4f35e5=_0x3f2d4c[_0x30ec3c(0x4dc)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/),_0xc7d636=_0x3f2d4c[_0x30ec3c(0x4dc)](/^\[html\]([\s\S]*)\[\/html\]$/);if(_0xc7d636)return{'type':'html','content':_0xc7d636[0x1]['trim']()};else{if(_0xb7632)return{'type':_0x30ec3c(0xbf0),'songName':_0xb7632[0x1][_0x30ec3c(0xcd2)](),'artist':_0xb7632[0x2][_0x30ec3c(0xcd2)]()};else{if(_0x243536)return{'type':_0x30ec3c(0xea),'name':_0x243536[0x1]['trim']()};else{if(_0x4f35e5)return{'type':_0x30ec3c(0xba5),'eventType':_0x4f35e5[0x1][_0x30ec3c(0xcd2)](),'eventDate':_0x4f35e5[0x2]['trim'](),'eventContent':_0x4f35e5[0x3][_0x30ec3c(0xcd2)]()};else{if(_0x5eafc9){const _0x53c76b=parseFloat(_0x5eafc9[0x1]),_0x24012b=_0x5eafc9[0x2][_0x30ec3c(0xcd2)](),_0x2d42ec=_0x58761c(_0xdfbfac[_0x30ec3c(0x8ed)]);let _0x963f8d=null;if(_0x24012b===_0x2d42ec['name'])'AGxOB'==='AGxOB'?_0x963f8d=_0x2d42ec['id']:(_0x2db1d6[_0x30ec3c(0x101)]=_0x30ec3c(0xcce),_0xde088f[_0x30ec3c(0xee2)]='',_0x3fc605[_0x30ec3c(0xee2)]=_0x30ec3c(0xc2f)+(_0x53e085[_0x30ec3c(0xdb9)]['length']+0x1),_0x301d30[_0x30ec3c(0xee2)]=_0x1da5d3[_0x30ec3c(0xb83)],_0x1f8858[_0x30ec3c(0x329)]['display']='none');else{const _0x5202a0=_0x1d801f();if(_0x5202a0[_0x30ec3c(0x8c7)]==='group'){const _0x17d8ac=_0xdfbfac[_0x30ec3c(0x94d)][_0x30ec3c(0x76b)](_0x18cb51=>_0x5202a0[_0x30ec3c(0x41b)][_0x30ec3c(0xc35)](_0x18cb51['id'])&&_0x18cb51[_0x30ec3c(0xb95)]===_0x24012b);if(_0x17d8ac)_0x963f8d=_0x17d8ac['id'];}}if(_0x963f8d)return{'type':'transfer','amount':_0x53c76b,'recipientId':_0x963f8d,'senderId':_0x3beae6['id']};else return{'type':_0x30ec3c(0x7ee),'content':_0x30ec3c(0x860)+_0x24012b+_0x30ec3c(0xc89)};}else{if(_0x3f2d4c)return{'type':'text','content':_0x3f2d4c};}}}}}return null;})[_0x5c4833(0xeb3)](Boolean),_0x2a63a0=async _0x11f76e=>{const _0x20356c=_0x5c4833;if(_0x20356c(0x945)!==_0x20356c(0x668)){const _0x5c4151={'role':_0x20356c(0xefe),'senderId':_0x3beae6['id'],'timestamp':Date[_0x20356c(0x4a2)](),'isOffline':_0x5264a3};if(_0x11f76e[_0x20356c(0x8c7)]===_0x20356c(0xbf0)){if(_0x20356c(0x93b)!==_0x20356c(0x454)){const {songName:_0x4c45f4,artist:_0x129148}=_0x11f76e;_0x5c4151['type']=_0x20356c(0xbf0),_0x5c4151[_0x20356c(0xee)]=_0x20356c(0x8af)+_0x4c45f4+_0x20356c(0x5a0)+_0x129148+']';try{const _0xba4040=await _0x43a3df(_0x4c45f4,_0x129148);Object[_0x20356c(0x24a)](_0x5c4151,{'songName':_0x4c45f4,'artist':_0x129148,'coverUrl':_0xba4040['cover'],'playableUrl':_0xba4040[_0x20356c(0x9f5)]});}catch(_0x5da299){Object['assign'](_0x5c4151,{'songName':_0x4c45f4,'artist':_0x129148,'coverUrl':null,'playableUrl':null});}}else _0x2b4b47['src']=_0x623dd4[_0x20356c(0x21c)](_0x284692),_0x14d174[_0x20356c(0x329)]['display']=_0x20356c(0xc38),_0x332823['style']['border']=_0x20356c(0x338),_0x1af807[_0x20356c(0x329)][_0x20356c(0xcd8)]=_0x20356c(0x5f7);}else{if(_0x11f76e['type']===_0x20356c(0xea)){if(_0x20356c(0x35e)===_0x20356c(0x35e)){const _0xb624f8=_0x1e8db1[_0x20356c(0x76b)](_0x28402f=>_0x28402f['name']===_0x11f76e['name']);if(_0xb624f8)Object[_0x20356c(0x24a)](_0x5c4151,{'content':_0x20356c(0x858)+_0xb624f8[_0x20356c(0xb95)]+']','displayUrl':_0xb624f8[_0x20356c(0x9f5)]});else _0x5c4151[_0x20356c(0xee)]=_0x20356c(0x9bc)+_0x11f76e[_0x20356c(0xb95)]+']';}else{_0x34f072[_0x20356c(0xee2)]='';return;}}else{if(_0x11f76e['type']===_0x20356c(0x3d7)){const _0x21b17c=_0x11f76e[_0x20356c(0x968)]===_0x58761c(_0xdfbfac[_0x20356c(0x8ed)])['id']?_0x58761c(_0xdfbfac['activeChatId']):_0x5844c7(_0x11f76e['recipientId']);Object['assign'](_0x5c4151,{'type':'transfer','amount':_0x11f76e['amount'],'recipientId':_0x11f76e[_0x20356c(0x968)],'content':_0x20356c(0xd58)+(_0x21b17c?.[_0x20356c(0xb95)]||'未知')+_0x20356c(0xbba)+_0x11f76e[_0x20356c(0x3c5)]+']'});}else{if(_0x11f76e[_0x20356c(0x8c7)]==='create_event'){if(_0x20356c(0x437)!==_0x20356c(0x437))return _0x5a5d73[_0x20356c(0x27f)](_0x20356c(0xaa0)),null;else{const _0x121dcc=_0x58761c(_0x56da3a['id']);if(!_0x121dcc||!_0x121dcc['id'])return console['error'](_0x20356c(0xaa0)),null;_0xdfbfac['calendarEvents']['push']({'id':_0x20356c(0xadd)+Date[_0x20356c(0x4a2)](),'date':_0x11f76e[_0x20356c(0xb3d)],'type':_0x11f76e[_0x20356c(0x60a)],'content':_0x11f76e[_0x20356c(0xa69)],'userId':_0x121dcc['id'],'createdBy':'ai'}),_0x31622b(),_0x34ff24(),_0x26221e();const _0x2bab33=_0x5844c7(_0x3beae6['id']);if(_0x2bab33&&_0x11f76e[_0x20356c(0x60a)]===_0x20356c(0x992)){if(_0x20356c(0xae3)!=='BVIyh'){_0x2c90ed(_0x20356c(0x1b3));return;}else _0x21d6ce(_0x20356c(0x45c)+_0x2bab33['name']+'\x20添加了新的纪念日：'+_0x11f76e[_0x20356c(0xa69)]);}return{'role':_0x20356c(0xefe),'senderId':_0x3beae6['id'],'timestamp':Date[_0x20356c(0x4a2)](),'isOffline':_0x5264a3,'content':null};return{'role':_0x20356c(0xefe),'senderId':_0x3beae6['id'],'timestamp':Date['now'](),'isOffline':_0x5264a3,'content':null};}}else{const _0x52d5aa=_0xda65ed(_0x11f76e['content']);Object[_0x20356c(0x24a)](_0x5c4151,{'content':_0x52d5aa[_0x20356c(0xee)],'quotedMessage':_0x52d5aa[_0x20356c(0xd22)]});}}}}return _0x5c4151;}else _0x1d5f00[_0x20356c(0xcab)]=_0x47d356[_0x20356c(0x21c)](_0x15320f),_0x52ea3c[_0x20356c(0x329)]['display']=_0x20356c(0xc38),_0x350702[_0x20356c(0x329)]['border']='none';},_0x4af964=await Promise['all'](_0x4900ad[_0x5c4833(0x266)](_0x2a63a0));for(const _0x4616d9 of _0x4af964){if('fwhLZ'!=='MFNBe'){if(_0x4616d9[_0x5c4833(0x8c7)]===_0x5c4833(0x554)){if('XElth'===_0x5c4833(0x5ef))_0x597506(_0x4616d9,-0x1),_0x2d0aeb[_0x5c4833(0x648)]=_0x2d0aeb['scrollHeight'];else{const _0x258398=_0x4e6d46===_0x5c4833(0xdf7)?_0x358c8e[_0x5c4833(0x30b)][_0x5c4833(0xb31)]['正面']:_0x1c80ca[_0x5c4833(0x30b)][_0x5c4833(0xb31)]['负面'];_0x258398&&_0x258398[_0x5c4833(0x1e2)]>0x0&&_0x151d9a[_0x5c4833(0xb66)](_0x5c4833(0xe18)+(_0x2b2225===_0x5c4833(0xdf7)?'积极':'消极')+_0x5c4833(0x273)+_0x258398['slice'](0x0,0x2)[_0x5c4833(0xd9a)]('、'));}}else(_0x4616d9[_0x5c4833(0xee)]||_0x4616d9[_0x5c4833(0x8a6)]||_0x4616d9[_0x5c4833(0x8c7)]===_0x5c4833(0xbf0)||_0x4616d9[_0x5c4833(0xd22)])&&(await new Promise(_0x34b06d=>setTimeout(_0x34b06d,0x12c+Math[_0x5c4833(0x48a)]()*0x190)),_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0xb66)](_0x4616d9),_0x597506(_0x4616d9,_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0x1e2)]-0x1),_0x2d0aeb[_0x5c4833(0x648)]=_0x2d0aeb['scrollHeight']);}else{const _0x3a0965=_0x1eafa3[_0x5c4833(0x1d6)](_0x5c4833(0x6ed));if(!_0x3a0965)return;_0x3a0965[_0x5c4833(0xefd)]=_0x2c2c4e[_0x5c4833(0x3a8)][_0x5c4833(0xcbd)]||![],_0x3a0965[_0x5c4833(0x3a0)](_0x5c4833(0xef8),()=>{const _0x18e6df=_0x5c4833;_0x5c3cbf[_0x18e6df(0x3a8)][_0x18e6df(0xcbd)]=_0x3a0965['checked'],_0x111647(),_0x39ac66();});}}}else _0xd62c3d=![];}return _0x1aa46f(),!![];}catch(_0x5ecfc0){if(_0x5ecfc0[_0x5c4833(0xb95)]!=='AbortError'){if('IoHLh'!==_0x5c4833(0x938)){console[_0x5c4833(0x27f)](_0x5c4833(0x8f9),_0x5ecfc0);const _0x122316={'role':_0x5c4833(0xefe),'content':'错误:\x20'+_0x5ecfc0[_0x5c4833(0x8ac)],'senderId':_0x3beae6['id'],'isOffline':_0x5264a3};_0xdfbfac[_0x5c4833(0x3a4)][_0x5c4833(0xb66)](_0x122316),_0x1891dc();}else _0x51295a[_0x5c4833(0x27f)]('视奸内容解析失败:',_0x4f9e1c),_0x36aff7=_0x5c4833(0xb9c)+_0x432321+'</pre>';}return![];}finally{_0x5b8908(![]),_0xdfbfac[_0x5c4833(0x556)]=![],_0x1891dc();}}}async function _0x28bb1e(){const _0x2164cc=_0x8dde82;if(_0x2164cc(0xe27)===_0x2164cc(0xe27)){const _0x4bd40e=_0x1d801f();if(!_0x4bd40e||_0x4bd40e[_0x2164cc(0x8c7)]!=='private'){if('BuCFV'===_0x2164cc(0x809))_0x7947eb['textContent']='▶';else{_0x21d6ce(_0x2164cc(0x7f9));return;}}if(_0xdfbfac[_0x2164cc(0x556)]){if(_0x2164cc(0x185)===_0x2164cc(0xe8a)){const _0xfb25ef=new _0x135623(_0x2abcf1[0x1])[_0x2164cc(0xa4d)]();_0xfb25ef&&_0xfb25ef>=_0xc8f6d4['getTime']()&&_0x19b441[_0x2164cc(0xb66)]({'timestamp':_0xfb25ef,'type':_0x2164cc(0x610),'content':_0x4f7617});}else{_0x21d6ce(_0x2164cc(0xdb4));return;}}const _0xaf2d05=await _0x13215d(_0x2164cc(0x3f2));if(!_0xaf2d05)return;_0x1a8bbc(!![],_0x2164cc(0x7dd)),_0x2670ed[_0x2164cc(0xee2)]='',_0x1fd599[_0x2164cc(0x555)][_0x2164cc(0x1cd)](_0x2164cc(0x36e)),_0xdfbfac[_0x2164cc(0x556)]=!![];try{if(_0x2164cc(0xe45)===_0x2164cc(0xe6a))_0x22efff[_0x2164cc(0x555)][_0x2164cc(0x9ad)](_0x2164cc(0x36e));else{const _0x186177=_0x5844c7(_0x4bd40e[_0x2164cc(0x41b)][0x0]),_0xeb5a2=_0x58761c(_0x4bd40e['id']),_0x592650=_0x3a904e(_0x4bd40e['id']);if(_0x592650[_0x2164cc(0x1e2)]===0x0){if('AYKQO'===_0x2164cc(0x816)){_0x2670ed[_0x2164cc(0xee2)]=_0x2164cc(0x588);return;}else{const _0x47e73c=_0x41b53e[_0x2164cc(0x167)][_0x2164cc(0x736)](),_0x1a147a=_0x1d3e19[_0x2164cc(0x167)][_0x2164cc(0xb0a)]();_0x1faf19[_0x2164cc(0x1d6)](_0x2164cc(0x2b5))[_0x2164cc(0x101)]=_0x47e73c+'年\x20'+(_0x1a147a+0x1)+'月',_0x56e8e2(_0x47e73c,_0x1a147a),_0x1057f0(_0x18a9db['selectedDate']);}}const _0x5ca656=new Date(_0x592650[0x0][_0x2164cc(0x10c)]);_0x5ca656[_0x2164cc(0x8a0)](0x0,0x0,0x0,0x0),_0x1a8bbc(!![],_0x2164cc(0xccf));let _0x1e47b5=[];_0xdfbfac[_0x2164cc(0xc1b)]['forEach'](_0x101c49=>{const _0x40e698=_0x2164cc;if(_0x101c49[_0x40e698(0x41b)][_0x40e698(0xc35)](_0x186177['id'])){const _0x4313a4=_0x3a904e(_0x101c49['id']);_0x4313a4[_0x40e698(0xb85)](_0x50b522=>{const _0x5eb923=_0x40e698;if(_0x5eb923(0xef4)!==_0x5eb923(0x41f)){if(_0x50b522['timestamp']>=_0x5ca656['getTime']()&&_0x50b522['role']!==_0x5eb923(0xba3)&&_0x50b522[_0x5eb923(0xee)]){if(_0x5eb923(0x73e)==='EKeLG')_0x1e47b5[_0x5eb923(0xb66)]({'timestamp':_0x50b522[_0x5eb923(0x10c)],'type':_0x11a8fa(_0x101c49),'content':'['+(_0x50b522[_0x5eb923(0xefb)]===_0x5eb923(0xa29)?_0xeb5a2[_0x5eb923(0xb95)]:_0x186177[_0x5eb923(0xb95)])+_0x5eb923(0x44a)+_0x50b522[_0x5eb923(0xee)]});else{const _0x39fc76=_0x595364(_0x5c5357[_0x5eb923(0xc43)]())['padStart'](0x2,'0'),_0x26ecc8=_0x31592b(_0x391496[_0x5eb923(0x212)]())[_0x5eb923(0x4b9)](0x2,'0');_0x470a98[_0x5eb923(0x101)]=_0x39fc76+':'+_0x26ecc8;const _0x5b222d=_0x12429e[_0x5eb923(0xb0a)]()+0x1,_0x3ce3b6=_0x3fd38f[_0x5eb923(0x55b)](),_0x5a4824=[_0x5eb923(0x4de),_0x5eb923(0x6c0),_0x5eb923(0x2c2),_0x5eb923(0x29e),_0x5eb923(0xcf9),_0x5eb923(0xe69),'星期六'][_0x3334b4[_0x5eb923(0xab8)]()];_0x530293['textContent']=_0x5b222d+'月'+_0x3ce3b6+'日\x20'+_0x5a4824;}}}else _0x68e3de['type']===_0x5eb923(0xb08)&&_0x25c2b4(_0x13e18e);});}});const _0x579679=_0xdfbfac[_0x2164cc(0x26a)][_0x2164cc(0x76b)](_0x592717=>_0x592717[_0x2164cc(0x113)]===_0x186177['id']);_0x579679&&_0x579679[_0x2164cc(0xd86)]&&('zyRsU'==='vpqPq'?(_0x30d9ab['currentDate']=new _0x358356(),_0x293049['selectedDate']=_0x4dbda3(),_0x4e1d0a()):_0x579679[_0x2164cc(0xd86)][_0x2164cc(0xb85)](_0x11ab8b=>{const _0x1e7d13=_0x2164cc;_0x1e7d13(0x82a)===_0x1e7d13(0x82a)?_0x11ab8b[_0x1e7d13(0x10c)]>=_0x5ca656[_0x1e7d13(0xa4d)]()&&_0x1e47b5[_0x1e7d13(0xb66)]({'timestamp':_0x11ab8b[_0x1e7d13(0x10c)],'type':_0x1e7d13(0x64d),'content':'['+(_0x11ab8b[_0x1e7d13(0x3ba)]===_0x1e7d13(0xa29)?_0xeb5a2[_0x1e7d13(0xb95)]:_0x186177[_0x1e7d13(0xb95)])+_0x1e7d13(0x44a)+_0x11ab8b['content']}):_0x2e3c82[_0x1e7d13(0x4a1)]=()=>{const _0x42c784=_0x1e7d13;_0xb3dd0c[_0x42c784(0x67f)]?_0x5b7f6e():_0x4d6509();};}));const _0x4e518b=['gallery',_0x2164cc(0x35c),'abyss',_0x2164cc(0x452),'bites','wants','footprints'];for(const _0x3151f5 of _0x4e518b){if(_0x2164cc(0x216)!==_0x2164cc(0x216))_0xc39392=_0x5ff52b[_0x2164cc(0xc44)](_0x2ecd0b);else{const _0x2fdb3f=_0x2164cc(0xc24)+_0x186177['id']+'_'+_0x3151f5,_0x6561fe=await _0x348bc1(_0x2fdb3f);if(_0x6561fe)try{let _0x31b3b6=JSON[_0x2164cc(0xc44)](_0x6561fe);Array[_0x2164cc(0xca5)](_0x31b3b6)&&_0x31b3b6[_0x2164cc(0xb85)](_0x102c10=>{const _0x5d4e32=_0x2164cc,_0x1e9d10=new Date(_0x102c10['timestamp']||_0x102c10[_0x5d4e32(0xc65)])['getTime']();_0x1e9d10>=_0x5ca656[_0x5d4e32(0xa4d)]()&&_0x1e47b5[_0x5d4e32(0xb66)]({'timestamp':_0x1e9d10,'type':'手机内容['+_0x3151f5+']','content':JSON[_0x5d4e32(0xea5)](_0x102c10)});});}catch(_0x1c52c0){}}}const _0x39166c=_0xdfbfac['livestreamReplays'][_0x186177['id']]||[];_0x39166c[_0x2164cc(0xb85)](_0x17561b=>{const _0x26b19b=_0x2164cc;if(_0x26b19b(0x9aa)!==_0x26b19b(0x9aa))_0x182c19(_0x26b19b(0xe95)+_0x429849['message']);else{const _0x2a98f8=_0x17561b[_0x26b19b(0x4dc)](/start_time:\s*"?([^"\n]+)"?/);if(_0x2a98f8){const _0x4a5561=new Date(_0x2a98f8[0x1])[_0x26b19b(0xa4d)]();_0x4a5561&&_0x4a5561>=_0x5ca656[_0x26b19b(0xa4d)]()&&(_0x26b19b(0xc0a)===_0x26b19b(0xc0a)?_0x1e47b5['push']({'timestamp':_0x4a5561,'type':'直播回放','content':_0x17561b}):(_0x52a3af['textContent']=_0x2ddb4c[_0x26b19b(0xb95)],_0x2476ed['textContent']=_0x26b19b(0xbd4),_0x378dd7(_0x2e03ac,_0x26b19b(0xcd5))));}}});if(_0x1e47b5[_0x2164cc(0x1e2)]===0x0){if('xmMSp'!=='zXykj'){_0x2670ed[_0x2164cc(0xee2)]='#\x20在指定时间线内没有发现任何可供总结的记忆。';return;}else _0xf4f05e[_0x2164cc(0x27f)](_0x2164cc(0xcfa),_0x4658e2),_0x55a5a4(_0x2164cc(0x7b0)+_0x1f5f2f[_0x2164cc(0x8ac)]);}_0x1a8bbc(!![],_0x2164cc(0xbf4)),_0x1e47b5[_0x2164cc(0x6d9)]((_0x5df47d,_0x3f23b1)=>_0x5df47d[_0x2164cc(0x10c)]-_0x3f23b1['timestamp']);const _0x1c7de2=_0x1e47b5[_0x2164cc(0x421)]((_0x50eb39,_0x57c155)=>{const _0x333e2d=_0x2164cc,_0xb6378b=new Date(_0x57c155[_0x333e2d(0x10c)])['toISOString']()[_0x333e2d(0xc12)]('T')[0x0];if(!_0x50eb39[_0xb6378b]){if(_0x333e2d(0xdf1)!==_0x333e2d(0xdf1)){if(!_0x1ec7ec)return;_0x5592eb=![],_0x16a3b2[_0x333e2d(0x329)][_0x333e2d(0x869)]=_0x333e2d(0x63e),_0x5b066d<-_0x598d41?_0x3f10ba[_0x333e2d(0x555)]['add'](_0x333e2d(0xc64)):_0x1586fc['style']['transform']=_0x333e2d(0xa6e),_0x4622d7['removeEventListener'](_0x333e2d(0x50e),_0x3721a6),_0x2d0cf3['removeEventListener'](_0x333e2d(0xc67),_0x3b7747);}else _0x50eb39[_0xb6378b]=[];}return _0x50eb39[_0xb6378b][_0x333e2d(0xb66)](_0x333e2d(0x898)+_0x57c155[_0x333e2d(0x8c7)]+']\x20'+_0x57c155['content']),_0x50eb39;},{});let _0x2fb860='';for(const _0x4ed173 in _0x1c7de2){'noRKW'===_0x2164cc(0x3a1)?_0x2fb860+=_0x2164cc(0x6bf)+_0x4ed173+'\x0a'+_0x1c7de2[_0x4ed173][_0x2164cc(0xd9a)]('\x0a'):(_0x121fca[_0x2164cc(0xcab)]=_0x169a63['createObjectURL'](_0x2ff2db),_0x2f7975['style'][_0x2164cc(0x990)]=0x1);}_0x1a8bbc(!![],_0x2164cc(0x1d9));const _0xae22aa=_0x2164cc(0xa39)+_0x186177[_0x2164cc(0xb95)]+_0x2164cc(0xa1d)+_0xeb5a2[_0x2164cc(0xb95)]+_0x2164cc(0x521)+_0x186177[_0x2164cc(0xb95)]+_0x2164cc(0x1da)+_0xeb5a2[_0x2164cc(0xb95)]+_0x2164cc(0x59a)+_0x186177['name']+_0x2164cc(0x812)+_0x186177[_0x2164cc(0xb95)]+'）和“'+_0xeb5a2[_0x2164cc(0xb95)]+'”来指代双方。\x0a\x0a\x20\x20\x20\x20#\x20输出示例\x20(【【你必须严格模仿这种精简、第一人称的语气】】)\x0a\x20\x20\x20\x20```yaml\x0a\x20\x20\x20\x20memory_summary:\x0a\x20\x20\x20\x20\x20\x202025-10-10:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22心情很烦躁，在日记里也写了。后来\x20'+_0xeb5a2[_0x2164cc(0xb95)]+_0x2164cc(0x19e)+_0xeb5a2['name']+_0x2164cc(0x197)+_0xeb5a2['name']+_0x2164cc(0x89b)+_0xeb5a2[_0x2164cc(0xb95)]+_0x2164cc(0x641)+_0x186177[_0x2164cc(0xb95)]+_0x2164cc(0xd0e),_0x17b756=[{'role':_0x2164cc(0xba3),'content':_0xae22aa},{'role':_0x2164cc(0xa29),'content':_0x2164cc(0x280)+_0x2fb860}],_0x205956=await _0x2fa074(_0x17b756);_0x2670ed[_0x2164cc(0xee2)]=_0x205956||'#\x20总结失败了，可能是记忆太庞杂。',_0x2670ed[_0x2164cc(0x648)]=0x0;}}catch(_0xa773ef){console[_0x2164cc(0x27f)](_0x2164cc(0xc61),_0xa773ef),_0x2670ed[_0x2164cc(0xee2)]=_0x2164cc(0xb62)+_0xa773ef[_0x2164cc(0x8ac)];}finally{_0x1a8bbc(![]),_0xdfbfac[_0x2164cc(0x556)]=![];}}else{_0x2ed659[_0x2164cc(0xa73)]=_0x2164cc(0x4a9);return;}}async function _0x261487(){const _0x3aebfc=_0x8dde82;console[_0x3aebfc(0x7ec)](_0x3aebfc(0xba7));if(!_0xdfbfac['apiSettings'][_0x3aebfc(0xa89)]||!_0xdfbfac[_0x3aebfc(0x5e0)][_0x3aebfc(0xb84)]||!_0xdfbfac[_0x3aebfc(0x5e0)][_0x3aebfc(0x888)]){_0x21d6ce(_0x3aebfc(0xd33));return;}const _0x10870c=_0xdfbfac[_0x3aebfc(0x3a4)]['at'](-0x1)?.[_0x3aebfc(0xefb)]===_0x3aebfc(0xa29);if(!_0x10870c||_0xdfbfac[_0x3aebfc(0x556)])return;const _0x6829e0=_0x1d801f();if(!_0x6829e0)return;_0xdfbfac[_0x3aebfc(0x556)]=!![],_0x5b8908(!![]);try{if(_0x6829e0[_0x3aebfc(0x8c7)]===_0x3aebfc(0xcef)){const _0xf4ec6d=_0x5844c7(_0x6829e0['participantIds'][0x0]);console['log'](_0x3aebfc(0xba8));if(_0xf4ec6d)await _0x54207f(_0xf4ec6d,{'force':!![]});}else{const _0x78b4d0=await _0x1ef586();if(_0x78b4d0&&_0x78b4d0[_0x3aebfc(0x3fb)]?.[_0x3aebfc(0x1e2)])await _0xbdc17c(_0x78b4d0);else{if(_0x3aebfc(0x8b9)!==_0x3aebfc(0x40e)){console['warn'](_0x3aebfc(0x42b));const _0x165241=_0x6829e0[_0x3aebfc(0x41b)][_0x3aebfc(0x266)](_0x5844c7)['filter'](Boolean);if(!_0x165241['length'])return;let _0x2a9ca0=0x0;for(const _0x1e153d of _0x165241){_0x54207f(_0x1e153d,{'force':!![],'delayMs':_0x2a9ca0}),_0x2a9ca0+=0x1f4;}}else{const _0x1cae4a=_0x1fc7aa[_0x3aebfc(0xb63)][_0x4f0fd9]?.[_0x255b67];if(_0x1cae4a===_0x12111f)return;const _0x15bfb1=_0x574ac9[_0x3aebfc(0x1d6)](_0x3aebfc(0x426)),_0x241d6e=_0x4eca1e[_0x3aebfc(0x1d6)](_0x3aebfc(0xc08));_0x241d6e['value']=_0x1cae4a,_0x15bfb1[_0x3aebfc(0x555)][_0x3aebfc(0x1cd)](_0x3aebfc(0x36e)),_0xdd4663[_0x3aebfc(0x1d6)](_0x3aebfc(0x804))[_0x3aebfc(0x4a1)]=()=>_0x1e356a(_0x2d005a,_0x640700),_0x599447['getElementById'](_0x3aebfc(0x39e))[_0x3aebfc(0x4a1)]=_0x45bf27,_0x22dac9[_0x3aebfc(0x1d6)](_0x3aebfc(0x6f5))[_0x3aebfc(0x4a1)]=_0x1bbf68;}}}}catch(_0x5e5191){if(_0x3aebfc(0x9d4)!==_0x3aebfc(0x9d4)){if(_0x5638f9)_0x4271be(_0x4b844f);}else _0x5e5191[_0x3aebfc(0xb95)]!==_0x3aebfc(0xa92)&&(console[_0x3aebfc(0x27f)]('获取AI响应失败:',_0x5e5191),_0x597506({'role':'assistant','content':_0x3aebfc(0x693)+_0x5e5191['message']},_0xdfbfac[_0x3aebfc(0x3a4)][_0x3aebfc(0x1e2)]-0x1));}finally{_0xdfbfac[_0x3aebfc(0x556)]=![],_0x5b8908(![]);}}function _0x1aed20(_0x3179af,_0x301f94){const _0x394231=_0x8dde82;if(_0x394231(0x5f4)===_0x394231(0x5f4)){const _0x1d5d1a=_0x301f94[_0x394231(0xae9)](),_0x541c2c=_0x3179af[_0x394231(0xae9)]();if(_0x1d5d1a[_0x394231(0xb91)](_0x394231(0x22e)))return _0x394231(0xa79);if(_0x541c2c['includes'](_0x394231(0x85b)))return _0x394231(0xa79);if(_0x541c2c['includes'](_0x394231(0x6bc)))return'gemini';if(_0x1d5d1a[_0x394231(0xb91)](_0x394231(0x616)))return _0x394231(0x616);return _0x394231(0xbc0);}else{_0x236f60[_0x394231(0x337)]=!![],_0x2ea4b0();const _0x43f399=_0x3b8d12(_0x8968c6['activeLivestreamCharId']);_0x3304a9(_0x394231(0x6ac)+_0x43f399[_0x394231(0xb95)]+'\x20的私信】');}}async function _0x2fa074(_0x37d6df,_0x7bef7b={}){const _0x48561c=_0x8dde82;_0xdfbfac[_0x48561c(0x451)]&&(_0x48561c(0xdfc)!==_0x48561c(0xdfc)?(_0x1b0ccd(![]),_0x15c82a[_0x48561c(0x27f)](_0x48561c(0xd64),_0x2142d3),_0x2bcb61(_0x48561c(0x823)+_0x19ab58[_0x48561c(0x8ac)]+'\x20')):_0xdfbfac[_0x48561c(0x451)][_0x48561c(0xe6c)]('New\x20request\x20started'));_0xdfbfac[_0x48561c(0x451)]=new AbortController();const _0x3fe705=_0xdfbfac[_0x48561c(0x451)][_0x48561c(0x30f)],{endpoint:_0xaabfa6,key:_0x596b69,model:_0x33a4a}=_0xdfbfac['apiSettings'],_0x5a8192=!!_0x7bef7b[_0x48561c(0xc55)],_0x233bb5=_0x1aed20(_0xaabfa6,_0x33a4a);console[_0x48561c(0x7ec)]('Detected\x20API\x20provider:\x20'+_0x233bb5);let _0x12967f='';try{switch(_0x233bb5){case _0x48561c(0xa79):{const _0x5ec2ed=_0x4c2894(_0x596b69),_0xd2e15=_0x37d6df[_0x48561c(0x76b)](_0x206aad=>_0x206aad[_0x48561c(0xefb)]==='system')?.['content']||'',_0x491e54=_0x37d6df[_0x48561c(0xeb3)](_0x4f6a80=>_0x4f6a80[_0x48561c(0xefb)]!==_0x48561c(0xba3)),_0x352bca={'model':_0x33a4a,'system':_0xd2e15,'messages':_0x491e54['map'](_0x4283e0=>({'role':_0x4283e0[_0x48561c(0xefb)],'content':[{'type':'text','text':_0x4283e0[_0x48561c(0xee)]}]})),'max_tokens':0x2000},_0x18f71d=await fetch(_0xaabfa6,{'method':_0x48561c(0x596),'headers':{'Content-Type':'application/json','x-api-key':_0x5ec2ed,'anthropic-version':'2023-06-01'},'body':JSON['stringify'](_0x352bca),'signal':_0x3fe705});if(!_0x18f71d['ok']){const _0x2ba408=await _0x18f71d[_0x48561c(0xc55)]()['catch'](()=>({}));throw new Error(_0x48561c(0x7fc)+_0x18f71d[_0x48561c(0x887)]+_0x48561c(0x5a0)+(_0x2ba408[_0x48561c(0x27f)]?.[_0x48561c(0x8ac)]||_0x18f71d[_0x48561c(0x7c0)]));}const _0x2abe44=await _0x18f71d[_0x48561c(0xc55)]();_0x12967f=_0x2abe44[_0x48561c(0xee)]?.[0x0]?.['text']||'';if(_0x2abe44['usage']){const _0x131bf6={'promptTokens':_0x2abe44['usage'][_0x48561c(0x892)]||0x0,'completionTokens':_0x2abe44[_0x48561c(0x695)][_0x48561c(0xbd9)]||0x0,'totalTokens':(_0x2abe44[_0x48561c(0x695)]['input_tokens']||0x0)+(_0x2abe44['usage']['output_tokens']||0x0),'timestamp':Date[_0x48561c(0x4a2)](),'chatId':_0xdfbfac[_0x48561c(0x8ed)],'model':_0x33a4a};_0xdfbfac[_0x48561c(0x61f)][_0x48561c(0x64c)]=_0x131bf6,_0xdfbfac[_0x48561c(0x61f)][_0x48561c(0xb82)][_0x48561c(0xb66)](_0x131bf6),_0xdfbfac[_0x48561c(0x61f)][_0x48561c(0xb82)][_0x48561c(0x1e2)]>0x64&&(_0x48561c(0x6bb)===_0x48561c(0x6bb)?_0xdfbfac['tokenStats'][_0x48561c(0xb82)]['shift']():_0x2dd30f[_0x48561c(0x1d6)](_0x48561c(0x7d7))[_0x48561c(0x57a)]());}break;}case'gemini':{if(_0x48561c(0x864)!==_0x48561c(0x864))_0x2c83bc=_0x2337ae['target'][_0x48561c(0x6d4)][0x0],_0x51079f(_0x4e34db,_0x3a3d5c);else{const _0x239d89=_0x4c2894(_0x596b69),_0x4d2c46=_0xaabfa6[_0x48561c(0xc35)](_0x48561c(0xa2f)),_0x2047d1=_0x49a9eb=>{const _0x4ead2f=_0x48561c;if(_0x4ead2f(0x60e)===_0x4ead2f(0x60e)){const _0x49dec7=[];if(_0x49a9eb['content'])_0x49dec7[_0x4ead2f(0xb66)]({'text':_0x49a9eb[_0x4ead2f(0xee)]});if(_0x49a9eb[_0x4ead2f(0x412)]){const _0x1c240e=_0x49a9eb[_0x4ead2f(0x412)]['split'](',')[0x1],_0x14817d=_0x49a9eb[_0x4ead2f(0x412)]['substring'](_0x49a9eb['image'][_0x4ead2f(0x843)](':')+0x1,_0x49a9eb[_0x4ead2f(0x412)]['indexOf'](';'))||_0x4ead2f(0x85a);_0x49dec7[_0x4ead2f(0xb66)]({'inline_data':{'mime_type':_0x14817d,'data':_0x1c240e}});}return _0x49dec7;}else _0x167b3b!==_0x41a93b&&(_0x2338c9['textContent']='▶');},_0x61a411=_0x37d6df[_0x48561c(0x266)](_0x5e55a3=>({'role':_0x5e55a3[_0x48561c(0xefb)]===_0x48561c(0xefe)?_0x48561c(0x888):_0x5e55a3[_0x48561c(0xefb)]===_0x48561c(0xba3)?_0x48561c(0xa29):_0x5e55a3[_0x48561c(0xefb)],'parts':_0x2047d1(_0x5e55a3)}))[_0x48561c(0xeb3)](_0x4a8bab=>_0x4a8bab[_0x48561c(0x44b)][_0x48561c(0x1e2)]>0x0),_0x478042={'contents':_0x61a411};_0x5a8192&&_0x4d2c46&&(_0x478042[_0x48561c(0x88a)]={'response_mime_type':_0x48561c(0x6a5)});const _0xd1a3b8=_0xaabfa6+'/v1beta/models/'+_0x33a4a+_0x48561c(0xeeb)+_0x239d89+_0x48561c(0x9ef),_0x220ed1=await fetch(_0xd1a3b8,{'method':_0x48561c(0x596),'headers':{'Content-Type':_0x48561c(0x6a5)},'body':JSON[_0x48561c(0xea5)](_0x478042),'signal':_0x3fe705});if(!_0x220ed1['ok'])throw new Error(_0x48561c(0xe76)+_0x220ed1[_0x48561c(0x887)]);const _0x11c036=_0x220ed1[_0x48561c(0x42c)][_0x48561c(0x3ce)](),_0x44c70d=new TextDecoder();let _0x253524='',_0x557f1f=null;while(!![]){if(_0x3fe705[_0x48561c(0x959)]){if(_0x48561c(0x819)===_0x48561c(0x819)){console[_0x48561c(0x7ec)](_0x48561c(0x48c)),_0x11c036['cancel']();break;}else _0x2aa7d1[_0x1e7af4]=_0x3912a1['getItem'](_0xd678d8);}const {done:_0x57147f,value:_0x112c43}=await _0x11c036[_0x48561c(0xb58)]();if(_0x57147f)break;const _0x880049=_0x44c70d['decode'](_0x112c43,{'stream':!![]}),_0x56c48a=_0x880049['split']('\x0a')[_0x48561c(0xeb3)](_0x5390cc=>_0x5390cc[_0x48561c(0xcd2)]()[_0x48561c(0xb91)](_0x48561c(0x8be)));for(const _0x40443d of _0x56c48a){const _0x10c459=_0x40443d[_0x48561c(0xbe2)](_0x48561c(0x67d),'');if(_0x10c459===_0x48561c(0x737))break;try{const _0x46bb9c=JSON['parse'](_0x10c459);_0x46bb9c['candidates']&&_0x46bb9c['candidates'][0x0]&&_0x46bb9c['candidates'][0x0][_0x48561c(0xee)]&&_0x46bb9c[_0x48561c(0x3f6)][0x0][_0x48561c(0xee)]['parts']&&_0x46bb9c[_0x48561c(0x3f6)][0x0][_0x48561c(0xee)]['parts'][0x0]&&(_0x253524+=_0x46bb9c['candidates'][0x0]['content'][_0x48561c(0x44b)][0x0][_0x48561c(0x7ee)]||''),_0x46bb9c[_0x48561c(0xe14)]&&(_0x48561c(0x247)===_0x48561c(0x247)?(_0x557f1f=_0x46bb9c[_0x48561c(0xe14)],console['log'](_0x48561c(0x1bf),_0x557f1f)):_0xd71391+=_0x48561c(0x863));}catch(_0x4bb092){console['warn']('Failed\x20to\x20parse\x20Gemini\x20chunk:',_0x4bb092);}}}_0x12967f=_0x253524;if(_0x557f1f){const _0x204191={'promptTokens':_0x557f1f['promptTokenCount']||0x0,'completionTokens':_0x557f1f[_0x48561c(0x4aa)]||0x0,'totalTokens':_0x557f1f['totalTokenCount']||0x0,'timestamp':Date[_0x48561c(0x4a2)](),'chatId':_0xdfbfac['activeChatId'],'model':_0x33a4a};_0xdfbfac['tokenStats'][_0x48561c(0x64c)]=_0x204191,_0xdfbfac['tokenStats'][_0x48561c(0xb82)]['push'](_0x204191),_0xdfbfac[_0x48561c(0x61f)]['history'][_0x48561c(0x1e2)]>0x64&&(_0x48561c(0xaf4)==='Lroif'?_0xdfbfac[_0x48561c(0x61f)]['history'][_0x48561c(0x2f0)]():_0x90dd85=_0x28f1b9['parse'](_0x4ae599));}break;}}case _0x48561c(0xbc0):default:{const _0x11d531=_0x4c2894(_0x596b69),_0x54661a=_0xaabfa6[_0x48561c(0xbe2)](/\/+$/,'')+'/v1/chat/completions',_0x4a0d7b=_0x37d6df['map'](_0x380c04=>{const _0x1be99c=_0x48561c;if(_0x1be99c(0x6ca)!=='mFqyc')_0x3c31d0='0x'+_0xe36c5[0x1]+_0x5038df[0x2],_0x1266ed='0x'+_0x28bedb[0x3]+_0x118e51[0x4],_0x5829a5='0x'+_0x37ee02[0x5]+_0x4be2a8[0x6];else{if(_0x380c04[_0x1be99c(0xefb)]===_0x1be99c(0xa29)&&_0x380c04[_0x1be99c(0x412)])return{'role':_0x1be99c(0xa29),'content':[{'type':_0x1be99c(0x7ee),'text':_0x380c04[_0x1be99c(0xee)]||'\x20'},{'type':_0x1be99c(0x759),'image_url':{'url':_0x380c04['image'],'detail':_0x1be99c(0xb37)}}]};return{'role':_0x380c04[_0x1be99c(0xefb)],'content':_0x380c04['content']};}})[_0x48561c(0xeb3)](_0x333ad4=>_0x333ad4[_0x48561c(0xee)]),_0x3bde1e={'model':_0x33a4a,'messages':_0x4a0d7b,'max_tokens':0x2000,'stream':!![],..._0x5a8192?{'response_format':{'type':'json_object'}}:{}},_0x3a30ba=await fetch(_0x54661a,{'method':_0x48561c(0x596),'headers':{'Content-Type':_0x48561c(0x6a5),'Authorization':_0x48561c(0x7e1)+_0x11d531},'body':JSON['stringify'](_0x3bde1e),'signal':_0x3fe705});if(!_0x3a30ba['ok']){if('KIPnx'!==_0x48561c(0xc7d))'\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a';else{const _0x431f4b=await _0x3a30ba[_0x48561c(0xc55)]()[_0x48561c(0x7ad)](()=>({}));throw new Error('OpenAI\x20API\x20错误:\x20'+_0x3a30ba[_0x48561c(0x887)]+_0x48561c(0x5a0)+(_0x431f4b[_0x48561c(0x27f)]?.[_0x48561c(0x8ac)]||_0x3a30ba[_0x48561c(0x7c0)]));}}const _0x256972=_0x3a30ba[_0x48561c(0x42c)][_0x48561c(0x3ce)](),_0x39a201=new TextDecoder();let _0x37f647='',_0x2a0214=null;while(!![]){if(_0x3fe705[_0x48561c(0x959)]){if(_0x48561c(0xe33)===_0x48561c(0x4f2))_0x420c81['style'][_0x48561c(0x5b7)]='url(\x27'+_0x46f265[_0x48561c(0x21c)](_0x315bf2)+'\x27)',_0x1260ad[_0x48561c(0x329)][_0x48561c(0xd79)]=_0x48561c(0x267),_0x36ab1d[_0x48561c(0x329)]['backgroundPosition']=_0x48561c(0x6cc);else{console['log'](_0x48561c(0xcca)),_0x256972[_0x48561c(0x536)]();throw new Error('Fetch\x20request\x20was\x20aborted.');}}const {done:_0x2dddd8,value:_0x268979}=await _0x256972[_0x48561c(0xb58)]();if(_0x2dddd8)break;const _0xdd50a8=_0x39a201['decode'](_0x268979,{'stream':!![]}),_0x3fb48a=_0xdd50a8[_0x48561c(0xc12)]('\x0a');for(const _0xa110a7 of _0x3fb48a){if(_0x48561c(0xa8d)===_0x48561c(0xa8d)){if(_0xa110a7[_0x48561c(0xb91)](_0x48561c(0x67d))){const _0x418bba=_0xa110a7['substring'](0x6);if(_0x418bba===_0x48561c(0x737)){if(_0x48561c(0x997)!==_0x48561c(0x997)){const _0x13fefe=_0x48561c(0xb0b);let _0x173c36='';if(_0x3f6975)_0x173c36='\x0a#\x20【作战指令：开启新篇】\x0a-\x20你的任务是【开启新篇】。\x0a-\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a-\x20【【【绝对禁止】】】延续或修改\x20'+(_0x21b6f7?_0x48561c(0x9f3):_0x48561c(0xa42))+_0x48561c(0x5ae);else _0x4cb41c?_0x173c36='\x0a#\x20【作战指令：延续对话】\x0a-\x20你的任务是【只】为名为\x20`'+_0x43a949+'`\x20的联系人【续写】3-5条新的对话。\x0a-\x20【【【绝对禁止】】】创造新的人物或修改其他人的对话！\x0a'+_0x13fefe+_0x48561c(0x290):_0x173c36=_0x48561c(0xad5)+_0x13fefe+_0x48561c(0x290);_0x18b21a=_0x100c5e[_0x231b11]+'\x0a'+_0x173c36;}else break;}try{const _0x578315=JSON['parse'](_0x418bba);if(_0x578315[_0x48561c(0x837)]&&_0x578315[_0x48561c(0x837)][0x0]&&_0x578315[_0x48561c(0x837)][0x0]['delta']){if('YQnvK'==='YQnvK')_0x37f647+=_0x578315[_0x48561c(0x837)][0x0][_0x48561c(0x8e3)]['content']||'';else{const _0x226577=_0xc19814[_0x48561c(0xc44)](_0x60efde['dataset'][_0x48561c(0x7ec)][_0x48561c(0xbe2)](/&quot;/g,'\x22')),_0x5e3be5=_0x4f0769[_0x48561c(0x63f)][_0x48561c(0x542)],_0x14949e=_0x5d77a2[_0x48561c(0x63f)][_0x48561c(0x501)];_0x23bfa0(_0x5e3be5,_0x14949e,_0x226577);}}_0x578315[_0x48561c(0x695)]&&(_0x2a0214=_0x578315[_0x48561c(0x695)]);}catch(_0x35ad04){}}}else{const _0x3b4229=_0x11977f();if(!_0x3b4229){_0x2675e2[_0x48561c(0x101)]='选择聊天';return;}if(_0x3b4229[_0x48561c(0x8c7)]==='private'){const _0x4f4a6b=_0x1c10f7(_0x3b4229[_0x48561c(0x41b)][0x0]);_0x2a0998[_0x48561c(0x101)]=_0x4f4a6b?_0x4f4a6b['name']:_0x48561c(0x842);}else _0x52325d[_0x48561c(0x101)]=_0x3b4229[_0x48561c(0xb95)]||_0x48561c(0x60f)+_0x3b4229[_0x48561c(0x41b)][_0x48561c(0x1e2)]+')';}}}_0x12967f=_0x37f647;if(_0x2a0214){if('qotMk'===_0x48561c(0x70f))_0x39542f['scrollTop']=_0x225f97[_0x48561c(0xc0c)];else{const _0x24c4b4={'promptTokens':_0x2a0214[_0x48561c(0xb27)]||0x0,'completionTokens':_0x2a0214[_0x48561c(0x815)]||0x0,'totalTokens':_0x2a0214[_0x48561c(0x38f)]||0x0,'timestamp':Date[_0x48561c(0x4a2)](),'chatId':_0xdfbfac[_0x48561c(0x8ed)],'model':_0x33a4a};_0xdfbfac['tokenStats'][_0x48561c(0x64c)]=_0x24c4b4,_0xdfbfac[_0x48561c(0x61f)][_0x48561c(0xb82)]['push'](_0x24c4b4),_0xdfbfac[_0x48561c(0x61f)][_0x48561c(0xb82)][_0x48561c(0x1e2)]>0x64&&_0xdfbfac[_0x48561c(0x61f)]['history']['shift']();}}break;}}return _0x12967f;}catch(_0x2704a8){if(_0x2704a8[_0x48561c(0xb95)]===_0x48561c(0xa92))return console[_0x48561c(0x7ec)](_0x48561c(0x590)),'';throw _0x2704a8;}finally{_0xdfbfac[_0x48561c(0x451)]&&_0xdfbfac['currentAbortController'][_0x48561c(0x30f)]===_0x3fe705&&(_0xdfbfac[_0x48561c(0x451)]=null);}}async function _0xb80d09(){const _0x1449a4=_0x8dde82;if(_0x1449a4(0xca4)!=='RXYjS')_0x4bc60e[_0x1449a4(0x3a4)][_0x423be0][_0x1449a4(0x5ab)]=!![],_0x35785b();else{const _0x21b3a3=_0xf20f3c[_0x1449a4(0xaee)][_0x1449a4(0x555)][_0x1449a4(0xcbc)](_0x1449a4(0x691)),_0xfa691a=_0x21b3a3?_0x2b706d[_0x1449a4(0xee2)]:null;let _0x493b25=null,_0x2a22ef='';if(_0x21b3a3&&_0xfa691a){_0x493b25=_0xdfbfac[_0x1449a4(0xc1b)][_0x1449a4(0x76b)](_0x1fe8f1=>_0x1fe8f1['type']===_0x1449a4(0xcef)&&_0x1fe8f1[_0x1449a4(0x41b)]['includes'](_0xfa691a));const _0x1d1803=_0x5844c7(_0xfa691a);_0x2a22ef=_0x1d1803?_0x1d1803[_0x1449a4(0xb95)]:_0x1449a4(0x569);}else{if(_0xdfbfac[_0x1449a4(0x8ed)]){_0x493b25=_0x1d801f();const _0x43a70e=document[_0x1449a4(0x1d6)]('char-name-header')['textContent'];_0x2a22ef=_0x43a70e||_0x1449a4(0x3ac);}}if(!_0x493b25){if(_0x1449a4(0x1b8)!==_0x1449a4(0x1b8))_0x207d01['textContent']='已选择\x20'+_0xeb0e89['length']+'\x20项';else{_0x21d6ce(_0x1449a4(0x7c6));return;}}const _0x5f4a72=await _0x13215d(_0x1449a4(0x54f)+_0x2a22ef+_0x1449a4(0x8bb));if(!_0x5f4a72)return;_0x493b25['id']===_0xdfbfac['activeChatId']&&(_0x2677ea(),_0xdfbfac['conversationHistory']=[],_0x192646());try{localStorage[_0x1449a4(0x287)](_0x1449a4(0x16c)+_0x493b25['id']);}catch(_0x585ec4){console[_0x1449a4(0x27f)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x493b25['id'],_0x585ec4);}_0x21d6ce('\x22'+_0x2a22ef+_0x1449a4(0x544));}}const _0x38ee44=document[_0x8dde82(0x1d6)](_0x8dde82(0xcd4)),_0x3f1c53=document[_0x8dde82(0x1d6)](_0x8dde82(0x258)),_0x147169=document[_0x8dde82(0x1d6)](_0x8dde82(0x4b4));function _0x546085(_0x5bc0ef){let _0x4b748c='';const _0x50c783=_0x5bc0ef['byteLength'];for(let _0x58a16a=0x0;_0x58a16a<_0x50c783;_0x58a16a++){_0x4b748c+=String['fromCharCode'](_0x5bc0ef[_0x58a16a]);}return btoa(_0x4b748c);}document[_0x8dde82(0x1d6)](_0x8dde82(0xa15))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x1a9db4=_0x8dde82,_0x409faa=new Date()['toISOString']()['split']('T')[0x0];_0x1a8bbc(!![],_0x1a9db4(0xe51));try{const _0x4969ff={};for(let _0x418f03=0x0;_0x418f03<localStorage[_0x1a9db4(0x1e2)];_0x418f03++){const _0x11cea6=localStorage[_0x1a9db4(0xb84)](_0x418f03);if(_0x11cea6){if(_0x1a9db4(0xe66)!==_0x1a9db4(0x709))_0x4969ff[_0x11cea6]=localStorage[_0x1a9db4(0x443)](_0x11cea6);else{const _0x2a6175=_0x2a639a[_0x1a9db4(0x1d6)](_0x1a9db4(0xd4a));_0x2a6175[_0x1a9db4(0xa73)]='';const _0x553a31=_0x305e89['characters'][_0x1a9db4(0xeb3)](_0x2934b6=>_0x13afa9[_0x1a9db4(0xc1b)][_0x1a9db4(0x7d1)](_0x44d92c=>_0x44d92c[_0x1a9db4(0x8c7)]===_0x1a9db4(0xcef)&&_0x44d92c['participantIds'][_0x1a9db4(0xc35)](_0x2934b6['id'])));if(_0x553a31[_0x1a9db4(0x1e2)]===0x0){_0x2a6175[_0x1a9db4(0xa73)]=_0x1a9db4(0xeca);return;}_0x553a31[_0x1a9db4(0xb85)](_0x223210=>{const _0x5063d1=_0x1a9db4,_0x507815=_0xa3d620['createElement']('li');_0x507815[_0x5063d1(0x213)]=_0x5063d1(0x9f1),_0x507815['dataset'][_0x5063d1(0xe9)]=_0x223210['id'],_0x507815[_0x5063d1(0xa73)]=_0x5063d1(0x900)+(_0x223210[_0x5063d1(0x584)]||_0x47a86e)+_0x5063d1(0x16a)+_0x223210[_0x5063d1(0xb95)]+_0x5063d1(0xa8c),_0x507815['addEventListener'](_0x5063d1(0x288),()=>{_0xf24314(_0x223210['id']);}),_0x2a6175[_0x5063d1(0x5b8)](_0x507815);});}}}const _0x10686e={},_0x40a0f7={'localStorageData':_0x4969ff,'preferencesData':_0x10686e,'exportVersion':_0x1a9db4(0xdc6)},_0x3e3f95=JSON[_0x1a9db4(0xea5)](_0x40a0f7),_0x1101df=_0x1a9db4(0x2e0)+_0x409faa+_0x1a9db4(0x624),_0x455a43=new Blob([_0x3e3f95],{'type':_0x1a9db4(0x6a5)});_0x16683e(_0x455a43,_0x1101df),_0x21d6ce('核心数据已导出！请继续导出图片和杂项。');}catch(_0x247337){console[_0x1a9db4(0x27f)](_0x1a9db4(0x7c5),_0x247337),_0x21d6ce(_0x1a9db4(0x104)+_0x247337[_0x1a9db4(0x8ac)]);}finally{_0x1a9db4(0x703)!=='EOFtk'?_0x58bedb+=_0x1a9db4(0x28f):_0x1a8bbc(![]);}}),document[_0x8dde82(0x1d6)](_0x8dde82(0x4c0))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x382a33=_0x8dde82;if('DudaV'==='DudaV'){const _0x46c1b3=new Date()[_0x382a33(0x4eb)]()[_0x382a33(0xc12)]('T')[0x0];_0x1a8bbc(!![],_0x382a33(0x912));try{const _0x24904c=new JSZip(),_0x550575=await _0x348abc,_0x5005a3=_0x550575[_0x382a33(0x314)](_0x382a33(0xa0d),_0x382a33(0xd17)),_0x1ba0d8=_0x5005a3[_0x382a33(0xa49)](_0x382a33(0xa0d)),_0x4975dc=await new Promise((_0x630b24,_0x4423e2)=>{const _0x25b441=_0x382a33;if('lzkJt'!==_0x25b441(0xd1c)){const _0x55e997=_0x1ba0d8[_0x25b441(0xe82)]();_0x55e997[_0x25b441(0xdab)]=()=>_0x630b24(_0x55e997['result']),_0x55e997[_0x25b441(0x514)]=()=>_0x4423e2(_0x55e997['error']);}else{if(_0x3e335c[_0x25b441(0x272)][_0x25b441(0x555)][_0x25b441(0xcbc)](_0x25b441(0x9df))){const _0x285df9=_0x459907[_0x25b441(0x272)][_0x25b441(0x63f)]['id'];_0x5002e0(_0x25b441(0x919))[_0x25b441(0x94f)](_0x1fdcb4=>{_0x1fdcb4&&_0x116677(_0x285df9);});}}});if(_0x4975dc[_0x382a33(0x1e2)]===0x0){if(_0x382a33(0xd8b)!=='sLlJV'){_0x1a8bbc(![]),_0x21d6ce(_0x382a33(0xeb9));return;}else{const _0x5ac765={};for(let _0x3194f4=0x0;_0x3194f4<_0x24a69a[_0x382a33(0x1e2)];_0x3194f4++){const _0x14e1a3=_0x4cf627[_0x382a33(0xb84)](_0x3194f4);_0x14e1a3&&(_0x5ac765[_0x14e1a3]=_0x10b3ad[_0x382a33(0x443)](_0x14e1a3));}const _0x1b33a3={},_0x8da0ec={'localStorageData':_0x5ac765,'preferencesData':_0x1b33a3,'exportVersion':_0x382a33(0xdc6)},_0x193476=_0x4f3bc0[_0x382a33(0xea5)](_0x8da0ec),_0x1d69f4='Noir_Backup_Data_'+_0x38d5f6+'.json',_0x1e6299=new _0x65c513([_0x193476],{'type':_0x382a33(0x6a5)});_0x3418b0(_0x1e6299,_0x1d69f4),_0x43c887('核心数据已导出！请继续导出图片和杂项。');}}_0x1a8bbc(!![],_0x382a33(0x2a1)+_0x4975dc[_0x382a33(0x1e2)]+_0x382a33(0xcc2));for(const _0x5f1877 of _0x4975dc){if('hIcfB'!==_0x382a33(0xaa2))_0x24904c[_0x382a33(0xd6c)]('images/'+_0x5f1877['id'],_0x5f1877['blob']);else{_0x329363=_0x35eea8(_0x33fec5);if(!_0x320948)throw new _0x3540dc(_0x382a33(0x644));_0x2fd0b9['log']('兼容模式成功，已将\x20'+_0x4cfde2['id']+_0x382a33(0xb2e));}}const _0x5a9efe=_0x382a33(0x334)+_0x46c1b3+_0x382a33(0x8ab),_0x2fa196=await _0x24904c[_0x382a33(0xec9)]({'type':_0x382a33(0xc4a),'streamFiles':!![]});_0x16683e(_0x2fa196,_0x5a9efe),_0x21d6ce(_0x382a33(0x8cf));}catch(_0x255b00){console[_0x382a33(0x27f)](_0x382a33(0x7d6),_0x255b00),_0x21d6ce(_0x382a33(0x104)+_0x255b00['message']);}finally{_0x1a8bbc(![]);}}else _0x2df3f0+=_0x382a33(0x6cd);}),document['getElementById'](_0x8dde82(0x6ab))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x39a7e3=_0x8dde82,_0xfa3e65=new Date()['toISOString']()[_0x39a7e3(0xc12)]('T')[0x0];_0x1a8bbc(!![],_0x39a7e3(0x9ff));try{const _0x1e2356=new JSZip(),_0xa051f8=await _0x348abc,_0x3f66ae=_0xa051f8[_0x39a7e3(0x314)](_0x39a7e3(0xa72),_0x39a7e3(0xd17)),_0x1381f3=_0x3f66ae[_0x39a7e3(0xa49)](_0x39a7e3(0xa72)),_0x20640c=await new Promise((_0x206fde,_0x3b7940)=>{const _0x18709a=_0x39a7e3,_0xe40dba=_0x1381f3[_0x18709a(0xe82)]();_0xe40dba[_0x18709a(0xdab)]=()=>_0x206fde(_0xe40dba[_0x18709a(0xd29)]),_0xe40dba[_0x18709a(0x514)]=()=>_0x3b7940(_0xe40dba[_0x18709a(0x27f)]);});if(_0x20640c[_0x39a7e3(0x1e2)]>0x0){if(_0x39a7e3(0x8e5)==='ZfCyM'){_0x1a8bbc(!![],_0x39a7e3(0xcfc)+_0x20640c['length']+_0x39a7e3(0x22c));for(const _0x1e5b02 of _0x20640c){const _0xe4c7ec=_0x1e2356[_0x39a7e3(0x192)](_0x39a7e3(0xb7a)+_0x1e5b02['id']);_0xe4c7ec['file'](_0x39a7e3(0x1f6),JSON[_0x39a7e3(0xea5)](_0x1e5b02[_0x39a7e3(0x3d2)]));if(_0x1e5b02[_0x39a7e3(0xe3c)])_0xe4c7ec['file'](_0x39a7e3(0xe3c),_0x1e5b02[_0x39a7e3(0xe3c)]);if(_0x1e5b02[_0x39a7e3(0x267)])_0xe4c7ec[_0x39a7e3(0xd6c)](_0x39a7e3(0x267),_0x1e5b02[_0x39a7e3(0x267)]);if(_0x1e5b02[_0x39a7e3(0x901)])_0xe4c7ec[_0x39a7e3(0xd6c)](_0x39a7e3(0xe03),_0x1e5b02[_0x39a7e3(0x901)]);}}else _0x50cdbb[_0x39a7e3(0xb66)](_0x39a7e3(0x724)+_0x52fd42+_0x39a7e3(0x88f));}const _0x34eb06=_0xa051f8['transaction'](_0x39a7e3(0xaed),_0x39a7e3(0xd17)),_0x135d8f=_0x34eb06['objectStore'](_0x39a7e3(0xaed)),_0x42b8a7=await new Promise((_0x1beb2e,_0x116863)=>{const _0x2bf4f2=_0x39a7e3,_0x1263fd=_0x135d8f[_0x2bf4f2(0xe82)]();_0x1263fd[_0x2bf4f2(0xdab)]=()=>_0x1beb2e(_0x1263fd[_0x2bf4f2(0xd29)]),_0x1263fd[_0x2bf4f2(0x514)]=()=>_0x116863(_0x1263fd['error']);});if(_0x42b8a7[_0x39a7e3(0x1e2)]>0x0){if(_0x39a7e3(0xc91)!=='nWUMv')return _0x51b001(_0x4bc6de)[_0x39a7e3(0x94f)](_0x4d1a82=>_0x4d1a82[_0x39a7e3(0xc4a)]());else _0x1e2356[_0x39a7e3(0xd6c)](_0x39a7e3(0xc41),JSON['stringify'](_0x42b8a7));}if(_0x20640c[_0x39a7e3(0x1e2)]===0x0&&_0x42b8a7[_0x39a7e3(0x1e2)]===0x0){if(_0x39a7e3(0x20b)!==_0x39a7e3(0xce7)){_0x1a8bbc(![]),_0x21d6ce('杂项仓库是空的，无需导出。');return;}else{const _0x5965e0=_0x1da9e4['trim']();if(!_0x5965e0||!_0x1ef9d9[_0x39a7e3(0x958)])return;let _0x304c79=_0x3f4b15[_0x39a7e3(0x26a)][_0x39a7e3(0x76b)](_0x4fbcda=>_0x4fbcda[_0x39a7e3(0x113)]===_0x22844f[_0x39a7e3(0x958)]);!_0x304c79&&(_0x304c79={'characterId':_0x440159[_0x39a7e3(0x958)],'entries':[]},_0x190a1f['diaries'][_0x39a7e3(0xb66)](_0x304c79));_0x304c79[_0x39a7e3(0xd86)][_0x39a7e3(0xb66)]({'timestamp':_0x4562c8[_0x39a7e3(0x4a2)](),'author':_0x39a7e3(0xa29),'content':_0x5965e0}),_0x42af38();const _0x3d0530=_0x304c79[_0x39a7e3(0xd86)]['length'];_0x4d7b87[_0x39a7e3(0x110)]=_0xa42b1[_0x39a7e3(0x1fa)](_0x3d0530/0x2)-0x1,_0x1ef317();}}const _0x191bfe=_0x39a7e3(0xac3)+_0xfa3e65+_0x39a7e3(0x8ab);_0x1a8bbc(!![],'正在最终压缩...');const _0x3574b4=await _0x1e2356[_0x39a7e3(0xec9)]({'type':_0x39a7e3(0xc4a),'streamFiles':!![]});_0x16683e(_0x3574b4,_0x191bfe),_0x21d6ce(_0x39a7e3(0x33c));}catch(_0xa12b96){console[_0x39a7e3(0x27f)](_0x39a7e3(0x704),_0xa12b96),_0x21d6ce(_0x39a7e3(0x104)+_0xa12b96['message']);}finally{if('cYhwp'===_0x39a7e3(0xea6)){const _0x124f6b=_0x229e2d[_0x39a7e3(0x1d6)](_0x39a7e3(0x523));_0x124f6b&&_0x124f6b[_0x39a7e3(0x288)]();}else _0x1a8bbc(![]);}}),_0x3f1c53['addEventListener'](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0xc74),'settings')),_0x2d8694[_0x8dde82(0x3a0)]('click',_0x1f615f),_0x147169[_0x8dde82(0x3a0)]('change',_0x36a0d1=>{const _0x3a9897=_0x8dde82,_0x42ea64=_0x36a0d1['target']['files'][0x0];if(!_0x42ea64)return;_0x13215d(_0x3a9897(0x1f4))['then'](_0x116aaf=>{const _0x5e37c1=_0x3a9897;if(_0x5e37c1(0x38a)!==_0x5e37c1(0x38a)){_0x443c03[_0x5e37c1(0x3a4)]=[],_0x4fc98f();return;}else{if(!_0x116aaf){_0x147169['value']='';return;}_0x1a8bbc(!![],'正在解析备份文件...');const _0x547ca6=new FileReader();_0x547ca6[_0x5e37c1(0x787)]=async _0x411970=>{const _0x2404fe=_0x5e37c1;if(_0x2404fe(0x13d)!=='ZzEhS')try{const _0x13b84d=JSON[_0x2404fe(0xc44)](_0x411970[_0x2404fe(0x272)][_0x2404fe(0xd29)]),_0x4deb2b=_0x13b84d['exportVersion']==='2.0';if(!_0x13b84d[_0x2404fe(0xc7b)]){if(_0x2404fe(0xef0)===_0x2404fe(0x233)){const _0x15ac30=_0x13b03e[_0x2404fe(0x1d6)](_0x2404fe(0x445));if(_0x15ac30)_0x15ac30[_0x2404fe(0x101)]='▶';}else throw new Error(_0x2404fe(0xc0f));}_0x1a8bbc(!![],_0x2404fe(0xec6));const _0x16d310=[];if(_0x13b84d[_0x2404fe(0x59b)]){if(_0x2404fe(0x71f)===_0x2404fe(0x784)){const _0x36f7c2=_0xbd7ffc['getElementById'](_0x2404fe(0xccb));if(!_0x36f7c2)return;const _0x132e3e=_0x3ea44d(),_0x3ba600=_0x3984bf['calendarEvents']['filter'](_0x42419d=>_0x42419d[_0x2404fe(0xdc9)]===_0x132e3e&&_0x42419d[_0x2404fe(0x8c7)]===_0x2404fe(0x495));_0x36f7c2[_0x2404fe(0xa73)]='',_0x3ba600[_0x2404fe(0x1e2)]>0x0?_0x3ba600[_0x2404fe(0xb85)](_0x277d17=>{const _0x23d76a=_0x2404fe,_0x38b1d7=_0x5690fe[_0x23d76a(0x8f1)](_0x23d76a(0xce2));_0x38b1d7[_0x23d76a(0x213)]=_0x23d76a(0x40b),_0x38b1d7[_0x23d76a(0x101)]=_0x277d17['content'],_0x36f7c2['appendChild'](_0x38b1d7);}):_0x36f7c2[_0x2404fe(0xa73)]=_0x2404fe(0x867);}else{const _0x3e1fbb=await Promise[_0x2404fe(0x7c7)](Object[_0x2404fe(0x83d)](_0x13b84d[_0x2404fe(0x59b)])[_0x2404fe(0x266)](async _0x20b417=>{const _0x497b5a=_0x2404fe;if(_0x497b5a(0x236)===_0x497b5a(0x236)){const _0x451557=_0x13b84d[_0x497b5a(0x59b)][_0x20b417];if(typeof _0x451557===_0x497b5a(0x193)&&_0x451557[_0x497b5a(0xb91)]('data:')){if('UEiAy'!==_0x497b5a(0x53e)){const _0x5e7213=await _0x2b279d(_0x451557);return{'id':_0x20b417,'blob':_0x5e7213};}else{const _0x16448d=_0x5d0133[_0x497b5a(0x272)]['files'][0x0];if(_0x16448d)_0x1ff7b1['getElementById'](_0x497b5a(0xd6b))[_0x497b5a(0x329)][_0x497b5a(0x5b7)]=_0x497b5a(0x8a1)+_0x113fe2[_0x497b5a(0x21c)](_0x16448d)+'\x27)';}}return null;}else _0x3dc6a0['includes'](_0x184786[_0x497b5a(0xae9)]())&&_0x344456[_0x497b5a(0x1e2)]<_0x19b338&&_0xf87c64[_0x497b5a(0xb66)]('-\x20最近提到\x22'+_0x2da407+_0x497b5a(0x88f));}));_0x16d310[_0x2404fe(0xb66)](..._0x3e1fbb[_0x2404fe(0xeb3)](Boolean));}}const _0x609bc=[];if(_0x13b84d['indexedDBMusicData']){_0x1a8bbc(!![],_0x2404fe(0xe09));const _0x671f46=_0x13b84d[_0x2404fe(0xde8)][_0x2404fe(0x266)](async _0x10da20=>{const _0x2f8fce=_0x2404fe;if('ibecw'===_0x2f8fce(0xa23)){const _0x4a0cfe=_0x36dcf6[_0x3c336f];if(typeof _0x4a0cfe==='string')_0x26e2d7[_0x2f8fce(0xb66)](_0x4a0cfe);if(_0xdb1e0f[_0x2f8fce(0xca5)](_0x4a0cfe))_0x4a0cfe['forEach'](_0x3038f0=>{const _0x3e0fee=_0x2f8fce;if(typeof _0x3038f0===_0x3e0fee(0x193))_0xa9354f['push'](_0x3038f0);});}else{const _0x4e73f4={..._0x10da20};if(_0x10da20[_0x2f8fce(0xe3c)])_0x4e73f4[_0x2f8fce(0xe3c)]=await _0x2b279d(_0x10da20[_0x2f8fce(0xe3c)]);if(_0x10da20[_0x2f8fce(0x267)])_0x4e73f4[_0x2f8fce(0x267)]=await _0x2b279d(_0x10da20[_0x2f8fce(0x267)]);return _0x4e73f4;}});_0x609bc[_0x2404fe(0xb66)](...await Promise[_0x2404fe(0x7c7)](_0x671f46));}_0x1a8bbc(!![],'正在清空旧数据...'),localStorage[_0x2404fe(0x379)]();for(const _0xc3d5b1 in _0x13b84d[_0x2404fe(0xc7b)]){localStorage['setItem'](_0xc3d5b1,_0x13b84d[_0x2404fe(0xc7b)][_0xc3d5b1]);}if(_0x4deb2b&&_0x13b84d[_0x2404fe(0xd27)]){if(_0x2404fe(0x4d2)==='iiNSI'){_0x1a8bbc(!![],'正在恢复用户档案...');try{let _0x5f1c28=0x0;for(const _0x7170a8 in _0x13b84d[_0x2404fe(0xd27)]){await Capacitor[_0x2404fe(0x248)][_0x2404fe(0x768)]['set']({'key':_0x7170a8,'value':_0x13b84d[_0x2404fe(0xd27)][_0x7170a8]}),_0x5f1c28++;}console[_0x2404fe(0x7ec)](_0x2404fe(0x440)+_0x5f1c28+_0x2404fe(0x47d));}catch(_0x520564){console[_0x2404fe(0x27f)](_0x2404fe(0xac4),_0x520564),_0x21d6ce(_0x2404fe(0x2d7));}}else{const _0x19e69d=_0x3627cb[_0x2404fe(0x4dc)](_0x5df0d5);if(_0x19e69d){const _0x959cb3=_0x5ae8f5(_0x19e69d[0x1],0xa),_0x818ced=_0x1e9733(_0x19e69d[0x2],0xa),_0x3496ad=_0x1bc222(_0x19e69d[0x3],0xa)*(_0x19e69d[0x3][_0x2404fe(0x1e2)]===0x2?0xa:0x1),_0x5b28c8=_0x959cb3*0x3c+_0x818ced+_0x3496ad/0x3e8,_0x3af7a4=_0x3595e7['replace'](_0x5562ea,'')['trim']();_0x3af7a4&&_0x44f1d8['push']({'time':_0x5b28c8,'text':_0x3af7a4});}}}_0x1a8bbc(!![],_0x2404fe(0xeb0));const _0x12715f=await _0x348abc,_0x19bf30=_0x12715f[_0x2404fe(0x314)]([_0x36a5e3,_0x437e45,_0x3e59c1],'readwrite'),_0x43995d=_0x19bf30['objectStore'](_0x36a5e3),_0x559e1a=_0x19bf30['objectStore'](_0x437e45),_0x85d2c2=_0x19bf30['objectStore'](_0x3e59c1);_0x43995d['clear'](),_0x559e1a[_0x2404fe(0x379)](),_0x85d2c2[_0x2404fe(0x379)]();const _0x46582b=[];for(const _0x15f1ae of _0x16d310){if(_0x2404fe(0x999)!==_0x2404fe(0x8da))_0x46582b[_0x2404fe(0xb66)](_0x43995d['put'](_0x15f1ae));else{const _0x3f3d05=_0x38ead2[_0x2404fe(0x314)](_0x5ecbaa,_0x2404fe(0xd17)),_0x389569=_0x3f3d05['objectStore'](_0x74184b),_0x24fadd=_0x389569[_0x2404fe(0x4f9)](_0x52637a);_0x24fadd[_0x2404fe(0xdab)]=()=>_0x30b154(_0x24fadd['result']?_0x24fadd[_0x2404fe(0xd29)]['data']:null),_0x24fadd['onerror']=()=>_0x2b3b0a(_0x24fadd[_0x2404fe(0x27f)]);}}for(const _0x524bae of _0x609bc){if(_0x2404fe(0x685)!=='iTQbY')_0x46582b[_0x2404fe(0xb66)](_0x559e1a[_0x2404fe(0x2df)](_0x524bae));else return _0x21938d[_0x2404fe(0xc1b)][_0x2404fe(0x76b)](_0x549555=>_0x549555['id']===_0x65aa52[_0x2404fe(0x8ed)]);}if(_0x13b84d[_0x2404fe(0x611)]&&Array[_0x2404fe(0xca5)](_0x13b84d[_0x2404fe(0x611)])){console[_0x2404fe(0x7ec)](_0x2404fe(0x1bc));for(const _0x2c73ef of _0x13b84d['indexedDBSnoopData']){_0x46582b[_0x2404fe(0xb66)](_0x85d2c2[_0x2404fe(0x2df)](_0x2c73ef));}}console[_0x2404fe(0x7ec)]('准备写入\x20'+_0x16d310[_0x2404fe(0x1e2)]+'\x20张图片,\x20'+_0x609bc[_0x2404fe(0x1e2)]+_0x2404fe(0x398)),await new Promise((_0x5a0cd5,_0x23951e)=>{const _0x49e52b=_0x2404fe;_0x19bf30[_0x49e52b(0xcd7)]=()=>{const _0xac0c72=_0x49e52b;console[_0xac0c72(0x7ec)](_0xac0c72(0xc77)),_0x5a0cd5();},_0x19bf30[_0x49e52b(0x514)]=_0x9db3e1=>{const _0x123dc1=_0x49e52b;console[_0x123dc1(0x27f)](_0x123dc1(0x23a),_0x9db3e1[_0x123dc1(0x272)][_0x123dc1(0x27f)]),_0x23951e(_0x9db3e1['target'][_0x123dc1(0x27f)]);};}),_0x1a8bbc(![]),_0x21d6ce('数据导入成功！应用即将刷新...'),setTimeout(()=>location['reload'](),0x640);}catch(_0x12b7b9){_0x1a8bbc(![]),console[_0x2404fe(0x27f)](_0x2404fe(0x196),_0x12b7b9),_0x21d6ce(_0x2404fe(0xad6)+_0x12b7b9['message']);}finally{_0x147169[_0x2404fe(0xee2)]='';}else _0x32babb('错误:\x20'+_0x16528e[_0x2404fe(0x8ac)]);},_0x547ca6['readAsText'](_0x42ea64);}});});function _0x4a79ad(){const _0x4dab80=_0x8dde82;_0x13e9da[_0x4dab80(0xee2)]=_0xdfbfac[_0x4dab80(0x5e0)][_0x4dab80(0xa89)]||'',_0x4e0a43[_0x4dab80(0xee2)]=_0xdfbfac[_0x4dab80(0x5e0)]['key']||'',_0x55dfe0['value']=_0xdfbfac[_0x4dab80(0x5e0)][_0x4dab80(0x888)]||'',_0x24acbf[_0x4dab80(0xee2)]=String(_0xdfbfac[_0x4dab80(0x3a8)]?.[_0x4dab80(0x89c)]??0x64),document[_0x4dab80(0x1d6)](_0x4dab80(0x7fd))[_0x4dab80(0xee2)]=_0xdfbfac['apiSettings'][_0x4dab80(0xe4b)]||_0x4dab80(0xbc0);}function _0x3d4b8c(){const _0x2a6baf=_0x8dde82;if(_0x2a6baf(0x2cd)===_0x2a6baf(0x2cd)){_0xdfbfac[_0x2a6baf(0x5e0)][_0x2a6baf(0xa89)]=_0x13e9da[_0x2a6baf(0xee2)][_0x2a6baf(0xcd2)](),_0xdfbfac[_0x2a6baf(0x5e0)][_0x2a6baf(0xb84)]=_0x4e0a43['value'][_0x2a6baf(0xcd2)](),_0xdfbfac['apiSettings'][_0x2a6baf(0x888)]=_0x55dfe0[_0x2a6baf(0xee2)]['trim'](),_0xdfbfac[_0x2a6baf(0x5e0)][_0x2a6baf(0xe4b)]=document[_0x2a6baf(0x1d6)]('api-provider')[_0x2a6baf(0xee2)];const _0x4a4cbc=parseInt(_0x24acbf[_0x2a6baf(0xee2)],0xa);_0xdfbfac[_0x2a6baf(0x3a8)][_0x2a6baf(0x89c)]=Number[_0x2a6baf(0x219)](_0x4a4cbc)&&_0x4a4cbc>0x0?_0x4a4cbc:0x64,_0x31622b(),_0x21d6ce(_0x2a6baf(0x1e6));}else _0x29b074[_0x2a6baf(0x27f)]('救援头像时出错:',_0x418703);}function _0x3af854(){const _0x2d36f1=_0x8dde82;_0x297ca6['value']=_0xdfbfac['userProfile'][_0x2d36f1(0xb95)]||'',_0x81effc[_0x2d36f1(0xcab)]=_0xdfbfac[_0x2d36f1(0x640)][_0x2d36f1(0x584)]||_0x284b7c,_0x1b7362[_0x2d36f1(0xee2)]=_0xdfbfac['userProfile'][_0x2d36f1(0x79b)]||'';}async function _0x4302de(_0x160b3d=null){const _0x588a2f=_0x8dde82;if(_0x588a2f(0x744)!=='IjFuJ')_0x3841e4(_0x588a2f(0x688),_0x588a2f(0xd3a));else{_0x137a40(_0x588a2f(0xaee),_0xc7a7e9),_0x392a2e(_0x588a2f(0x91a));const _0x4420c3=_0x160b3d?_0xdfbfac[_0x588a2f(0x94d)][_0x588a2f(0x76b)](_0x37fb35=>_0x37fb35['id']===_0x160b3d):null;_0xad18a1('world-book-checkboxes-container',_0x4420c3?_0x4420c3[_0x588a2f(0x5ee)]||[]:[]);const _0x45fb27=document[_0x588a2f(0x1d6)](_0x588a2f(0x1aa)),_0x16cb09=document['getElementById'](_0x588a2f(0x927));_0x4489b9[_0x588a2f(0xcab)]=_0x1af29b,_0x5c1143['value']='',_0x2cf229[_0x588a2f(0x329)][_0x588a2f(0x5b7)]='',_0xbb2052[_0x588a2f(0xee2)]='',_0x222f21['style'][_0x588a2f(0x5b7)]='',_0x49f5ee[_0x588a2f(0xee2)]='';const _0x7a80ab=[_0x588a2f(0xcd5),_0x588a2f(0xd46),_0x588a2f(0x183),_0x588a2f(0x85f),_0x588a2f(0xe5)];_0x7a80ab[_0x588a2f(0xb85)](_0x1b1150=>{const _0x1d8e3=_0x588a2f;document[_0x1d8e3(0x1d6)](_0x1d8e3(0xc2e)+_0x1b1150+_0x1d8e3(0x909))[_0x1d8e3(0x329)][_0x1d8e3(0x5b7)]='',document[_0x1d8e3(0x1d6)](_0x1d8e3(0xc2e)+_0x1b1150+_0x1d8e3(0x99a))[_0x1d8e3(0xee2)]='';});if(_0x160b3d){if(_0x588a2f(0x993)===_0x588a2f(0x826))_0x20351a[_0x588a2f(0xca6)](_0x588a2f(0x450),_0x342926);else{if(!_0x4420c3)return;_0x2b706d[_0x588a2f(0xee2)]=_0x4420c3['id'],_0x1b5a23[_0x588a2f(0x101)]=_0x588a2f(0x853),_0x424267[_0x588a2f(0xee2)]=_0x4420c3['name'],_0x5e4245[_0x588a2f(0xee2)]=_0x4420c3['remark'],_0xb5d837[_0x588a2f(0xee2)]=_0x4420c3[_0x588a2f(0x79b)],document['getElementById'](_0x588a2f(0x37d))['value']=_0x4420c3[_0x588a2f(0x4b0)]||'',_0x45fb27[_0x588a2f(0xee2)]=_0x4420c3[_0x588a2f(0xc5a)]||'',_0x16cb09[_0x588a2f(0xee2)]=_0x4420c3[_0x588a2f(0xbb9)]||'';const _0x4440e2=_0xdfbfac[_0x588a2f(0xc1b)]['find'](_0xc890bd=>_0xc890bd[_0x588a2f(0x8c7)]===_0x588a2f(0xcef)&&_0xc890bd[_0x588a2f(0x41b)][_0x588a2f(0xc35)](_0x160b3d));document[_0x588a2f(0x1d6)](_0x588a2f(0x91a))['value']=_0x4440e2?.[_0x588a2f(0xacb)]||_0xdfbfac[_0x588a2f(0xb83)];try{const _0x33b1fe=await _0x4131e2(_0x588a2f(0xa53)+_0x4420c3['id']);_0x4489b9['src']=_0x33b1fe?URL['createObjectURL'](_0x33b1fe):_0x4420c3[_0x588a2f(0x584)]||_0x1af29b;const _0x1c026e=await _0x4131e2(_0x588a2f(0x690)+_0x4420c3['id']);if(_0x1c026e)_0x2cf229[_0x588a2f(0x329)]['backgroundImage']=_0x588a2f(0x8a1)+URL[_0x588a2f(0x21c)](_0x1c026e)+'\x27)';const _0x475d31=await _0x4131e2(_0x588a2f(0x6df)+_0x4420c3['id']);if(_0x475d31)_0x222f21[_0x588a2f(0x329)][_0x588a2f(0x5b7)]='url(\x27'+URL[_0x588a2f(0x21c)](_0x475d31)+'\x27)';for(const _0x1b966d of _0x7a80ab){const _0x563b10=await _0x4131e2(_0x588a2f(0xc3a)+_0x1b966d+'_'+_0x4420c3['id']);_0x563b10&&(document['getElementById'](_0x588a2f(0xc2e)+_0x1b966d+_0x588a2f(0x909))[_0x588a2f(0x329)]['backgroundImage']=_0x588a2f(0x8a1)+URL[_0x588a2f(0x21c)](_0x563b10)+'\x27)');}}catch(_0x5ae6e1){_0x588a2f(0x31b)!=='SgLZY'?(_0x243f39(),_0x2fee4b(_0x588a2f(0xc26),_0x588a2f(0x410))):(console[_0x588a2f(0x27f)](_0x588a2f(0x6a2)+_0x4420c3['id']+_0x588a2f(0xecf),_0x5ae6e1),_0x4489b9['src']=_0x4420c3[_0x588a2f(0x584)]||_0x1af29b);}}}else _0x588a2f(0x1dc)!=='bfBbK'?(_0x2b706d[_0x588a2f(0xee2)]='',_0x1b5a23['textContent']=_0x588a2f(0xede),_0x424267[_0x588a2f(0xee2)]=_0x588a2f(0xc62)+(_0xdfbfac['characters'][_0x588a2f(0x1e2)]+0x1),_0x5e4245[_0x588a2f(0xee2)]='',_0xb5d837[_0x588a2f(0xee2)]=_0x588a2f(0xcee),document['getElementById']('char-edit-css')[_0x588a2f(0xee2)]='',_0x45fb27[_0x588a2f(0xee2)]='',_0x16cb09[_0x588a2f(0xee2)]=''):_0x22a6cd[_0x588a2f(0x27f)](_0x588a2f(0xc33),_0x4c7dd3);_0x466143();const _0x2ef3be=document['getElementById'](_0x588a2f(0x37d));let _0x2733f0=document[_0x588a2f(0x1d6)](_0x588a2f(0xc7e));!_0x2733f0&&(_0x2733f0=document[_0x588a2f(0x8f1)](_0x588a2f(0x329)),_0x2733f0['id']=_0x588a2f(0xc7e),document[_0x588a2f(0xbcf)][_0x588a2f(0x5b8)](_0x2733f0));const _0x40ff6c=()=>{const _0x1792db=_0x588a2f;if(_0x1792db(0x558)!==_0x1792db(0x4d5)){const _0x10bfa1=_0x2ef3be[_0x1792db(0xee2)];let _0x9e9f45=_0x10bfa1[_0x1792db(0xbe2)](/\.bubble\.sent/g,'#bubble-preview-user')[_0x1792db(0xbe2)](/\.bubble\.received/g,_0x1792db(0xaf2));_0x2733f0[_0x1792db(0xa73)]=_0x9e9f45;}else{_0x130724[_0x1792db(0xca6)]('updateProfileQuick:\x20没有提供角色ID，跳过档案更新');return;}};_0x2ef3be[_0x588a2f(0x255)](_0x588a2f(0xb39),_0x40ff6c),_0x2ef3be[_0x588a2f(0x3a0)](_0x588a2f(0xb39),_0x40ff6c),_0x40ff6c();}}async function _0x11efa8(){const _0x53a53a=_0x8dde82;_0x1a8bbc(!![],_0x53a53a(0xe2f));try{if(_0x53a53a(0x48d)===_0x53a53a(0x48d)){const _0x2d5448={'type':_0x53a53a(0x41d),'version':0x1,'timestamp':Date[_0x53a53a(0x4a2)](),'accountingData':_0xdfbfac[_0x53a53a(0x683)],'accountingLedger':_0xdfbfac[_0x53a53a(0xef6)]},_0x180746=JSON['stringify'](_0x2d5448,null,0x2),_0x5842bd=new Date(),_0x6b1bda=_0x5842bd['getFullYear']()+'-'+String(_0x5842bd['getMonth']()+0x1)[_0x53a53a(0x4b9)](0x2,'0')+'-'+String(_0x5842bd['getDate']())[_0x53a53a(0x4b9)](0x2,'0'),_0x407a4e=_0x53a53a(0x854)+_0x6b1bda+'.json',_0x2617cd=new Blob([_0x180746],{'type':'application/json'});_0x16683e(_0x2617cd,_0x407a4e);}else{const _0x342331=_0x29702f(_0x10cb8b[_0x53a53a(0x6e4)]);_0x342331&&(_0x342331[_0x53a53a(0x92c)]=_0x346c5c,_0x44e247(_0x207d98[_0x53a53a(0x6e4)],'normal'));}}catch(_0x4d4f9f){console[_0x53a53a(0x27f)](_0x53a53a(0x9f9),_0x4d4f9f),_0x21d6ce(_0x53a53a(0x6d1)+_0x4d4f9f[_0x53a53a(0x8ac)]);}finally{_0x1a8bbc(![]);}}function _0x1c7a2c(_0x8c33a8){const _0x551bff=_0x8dde82;if(_0x551bff(0xe7e)!=='LNmns'){const _0x426c32=_0x8c33a8['target'][_0x551bff(0x6d4)][0x0];if(!_0x426c32)return;_0x13215d(_0x551bff(0x4b6))['then'](_0x51469a=>{const _0x51a51a=_0x551bff;if(!_0x51469a){if(_0x51a51a(0xc85)===_0x51a51a(0x25c))_0x397054[_0x51a51a(0x27f)]('继续直播失败:',_0x709288),_0x26e404('直播出错了...\x20'+_0x1a26c9[_0x51a51a(0x8ac)]);else{_0x8c33a8[_0x51a51a(0x272)]['value']='';return;}}_0x1a8bbc(!![],_0x51a51a(0x6fc));const _0x230115=new FileReader();_0x230115[_0x51a51a(0x787)]=_0x5c1c93=>{const _0x20cdf5=_0x51a51a;if(_0x20cdf5(0x2c0)!=='WfkYR')try{const _0xc178a6=JSON['parse'](_0x5c1c93[_0x20cdf5(0x272)][_0x20cdf5(0xd29)]);if(_0xc178a6[_0x20cdf5(0x8c7)]!==_0x20cdf5(0x41d)||!_0xc178a6[_0x20cdf5(0x683)]||!_0xc178a6[_0x20cdf5(0xef6)]){if(_0x20cdf5(0x8c3)===_0x20cdf5(0x8c3))throw new Error(_0x20cdf5(0x868));else{const _0x18eab6=_0xe747f7[_0x20cdf5(0x1d6)](_0x20cdf5(0x64b));if(!_0x18eab6)return;const _0x52dde9=_0x5c4ff7['getItem'](_0x20cdf5(0x8e8))||'35';_0x307655[_0x20cdf5(0xa6a)]['style'][_0x20cdf5(0x8eb)](_0x20cdf5(0xb6e),_0x52dde9),_0x18eab6[_0x20cdf5(0xee2)]=_0x52dde9,_0x18eab6['addEventListener']('input',()=>{const _0x306af0=_0x20cdf5,_0x2d4d1f=_0x18eab6[_0x306af0(0xee2)];_0x1218ea[_0x306af0(0xa6a)][_0x306af0(0x329)][_0x306af0(0x8eb)](_0x306af0(0xb6e),_0x2d4d1f),_0x1fd02d['setItem'](_0x306af0(0x8e8),_0x2d4d1f),_0x485aeb();});}}_0xdfbfac[_0x20cdf5(0x683)]=_0xc178a6['accountingData'],_0xdfbfac[_0x20cdf5(0xef6)]=_0xc178a6[_0x20cdf5(0xef6)],_0x31622b(),_0x1a8bbc(![]),_0x21d6ce(_0x20cdf5(0xb0f)),_0x3b2c5f();}catch(_0x1b04f2){if(_0x20cdf5(0xd56)==='oCZOh'){const _0x33dfe9=_0x3288cf[_0x20cdf5(0xee2)][_0x20cdf5(0xcd2)](),_0x46ed8d=_0x4b5588[_0x20cdf5(0xee2)][_0x20cdf5(0xcd2)]();if(!_0x33dfe9||!_0x46ed8d){_0x2ca674(_0x20cdf5(0x2a3));return;}_0xdc8e76({'songName':_0x33dfe9,'artist':_0x46ed8d});}else _0x1a8bbc(![]),console[_0x20cdf5(0x27f)](_0x20cdf5(0xa33),_0x1b04f2),_0x21d6ce('导入失败:\x20'+_0x1b04f2[_0x20cdf5(0x8ac)]);}finally{_0x8c33a8[_0x20cdf5(0x272)]['value']='';}else{const _0x286f86=_0x1cc15c[_0x20cdf5(0x63f)]['stickerName'];!_0x3c2eb1[_0x20cdf5(0xc35)](_0x286f86)&&_0x2afdba[_0x20cdf5(0xb66)](_0x286f86);}},_0x230115[_0x51a51a(0xe00)](_0x426c32);});}else{const _0x4cda5d=_0x168cbe[_0x551bff(0xdb9)][_0x551bff(0x76b)](_0xbee5c5=>_0xbee5c5['id']===_0x1e3a90['activeFriendCircleId']),_0x1b75e2=_0x4cda5d?_0x4cda5d[_0x551bff(0x6b8)]:[];if(!_0x1b75e2||_0x1b75e2[_0x551bff(0x1e2)]===0x0)return'';const _0x4d958c=_0x1b75e2[_0x551bff(0x8b8)](0x0,0x5),_0x1cffe3=_0x4d958c[_0x551bff(0x266)](_0xd4684a=>{const _0xf70631=_0x551bff,_0x4f0ca0=_0x44c587(_0xd4684a['authorId'])||{'name':'未知'};let _0x5affd4='-\x20[动态]\x20'+_0x4f0ca0[_0xf70631(0xb95)]+'\x20说：“'+(_0xd4684a[_0xf70631(0x948)]||_0xd4684a[_0xf70631(0xee)])+'”';return _0xd4684a[_0xf70631(0x8c7)]==='music'&&(_0x5affd4+=_0xf70631(0x38c)+_0xd4684a[_0xf70631(0x3c7)]+_0xf70631(0x5a0)+_0xd4684a['artist']+')'),_0x5affd4;});return _0x551bff(0x7c1)+_0x1cffe3[_0x551bff(0xd9a)]('\x0a');}}async function _0x54c8e4(){const _0x4fcb8e=_0x8dde82;if(_0x4fcb8e(0xe56)!==_0x4fcb8e(0x4e3)){const _0x58a8d4=_0x2b706d[_0x4fcb8e(0xee2)];if(!_0x58a8d4){if(_0x4fcb8e(0x2fd)!==_0x4fcb8e(0x9a6)){_0x21d6ce(_0x4fcb8e(0x24d));return;}else _0x3e0b4d[_0x4fcb8e(0x27f)](_0x4fcb8e(0x299),_0x5770be),_0x4c6cea[_0x4fcb8e(0x287)]('currentLivestreamSession');}const _0x1776c7=_0x5844c7(_0x58a8d4);if(!_0x1776c7)return;_0x1a8bbc(!![],'正在打包“'+_0x1776c7['name']+_0x4fcb8e(0xb06));try{if(_0x4fcb8e(0xb71)!==_0x4fcb8e(0xb71)){const _0x5104a7={'type':'NoirAccountingData','version':0x1,'timestamp':_0x1fe95d['now'](),'accountingData':_0x4474c3[_0x4fcb8e(0x683)],'accountingLedger':_0x581fd4[_0x4fcb8e(0xef6)]},_0x1e30e7=_0xc6069[_0x4fcb8e(0xea5)](_0x5104a7,null,0x2),_0x11a79c=new _0x5b20f8(),_0x8ab354=_0x11a79c[_0x4fcb8e(0x736)]()+'-'+_0x238e13(_0x11a79c[_0x4fcb8e(0xb0a)]()+0x1)[_0x4fcb8e(0x4b9)](0x2,'0')+'-'+_0x360a62(_0x11a79c[_0x4fcb8e(0x55b)]())[_0x4fcb8e(0x4b9)](0x2,'0'),_0x5749ed=_0x4fcb8e(0x854)+_0x8ab354+_0x4fcb8e(0x624),_0x3be213=new _0x22bfee([_0x1e30e7],{'type':'application/json'});_0x4b13b6(_0x3be213,_0x5749ed);}else{const _0x4581dc={'type':_0x4fcb8e(0x98c),'version':0x1,'name':_0x1776c7['name'],'remark':_0x1776c7[_0x4fcb8e(0x174)],'persona':_0x1776c7[_0x4fcb8e(0x79b)],'bubbleCss':_0x1776c7['bubbleCss'],'avatar':null,'sprites':{},'worldBooks':[]},_0x5e4a00=await _0x4131e2(_0x4fcb8e(0xa53)+_0x1776c7['id']);if(_0x5e4a00)_0x4581dc[_0x4fcb8e(0x584)]=await _0x273922(_0x5e4a00);const _0x388080=[_0x4fcb8e(0xcd5),'happy',_0x4fcb8e(0x183),_0x4fcb8e(0x85f),'shy'];for(const _0x14e523 of _0x388080){const _0x283cc7=await _0x4131e2(_0x4fcb8e(0xc3a)+_0x14e523+'_'+_0x1776c7['id']);_0x283cc7&&(_0x4581dc['sprites'][_0x14e523]=await _0x273922(_0x283cc7));}_0x1776c7[_0x4fcb8e(0x5ee)]&&_0x1776c7[_0x4fcb8e(0x5ee)][_0x4fcb8e(0x1e2)]>0x0&&(_0x4fcb8e(0xbae)==='hkpIQ'?_0x4581dc['worldBooks']=_0x1776c7['linkedWorldBookIds'][_0x4fcb8e(0x266)](_0x1a498b=>_0xdfbfac[_0x4fcb8e(0xe7d)]['find'](_0x1d85cc=>_0x1d85cc['id']===_0x1a498b))[_0x4fcb8e(0xeb3)](Boolean)[_0x4fcb8e(0x266)](_0x5e8654=>({'name':_0x5e8654[_0x4fcb8e(0xb95)],'content':_0x5e8654[_0x4fcb8e(0xee)],'categoryId':_0x5e8654[_0x4fcb8e(0x798)]||'default'})):_0x17d04f(_0x206185,_0x374907));const _0x57e249=new Set(_0x4581dc[_0x4fcb8e(0xe7d)][_0x4fcb8e(0x266)](_0x27256f=>_0x27256f['categoryId']));_0x4581dc[_0x4fcb8e(0x3c6)]=_0xdfbfac[_0x4fcb8e(0x3c6)][_0x4fcb8e(0xeb3)](_0x145925=>_0x57e249[_0x4fcb8e(0x76f)](_0x145925['id']));const _0x5299ee=JSON['stringify'](_0x4581dc,null,0x2),_0x4d1d83=_0x1776c7['name']+'_NoirCard.json',_0x21ec2e=new Blob([_0x5299ee],{'type':_0x4fcb8e(0x6a5)});_0x16683e(_0x21ec2e,_0x4d1d83);}}catch(_0x5e4c84){'yuFLj'===_0x4fcb8e(0xcf2)?(_0x564f06(_0x5727f2,_0x59f2bf),_0x36c991()):(console[_0x4fcb8e(0x27f)](_0x4fcb8e(0x8a4),_0x5e4c84),_0x21d6ce(_0x4fcb8e(0x6d1)+_0x5e4c84[_0x4fcb8e(0x8ac)]));}finally{if(_0x4fcb8e(0x7aa)===_0x4fcb8e(0x7aa))_0x1a8bbc(![]);else{_0x57195c('正在构思中，请稍候...');return;}}}else{const _0x3c710a=_0x29f1d3[_0x4fcb8e(0xc44)](_0x2fadc8['getItem'](_0x4fcb8e(0x169))||'[]');_0x4ef258['forEach'](_0x50f298=>{const _0xe10cc2=_0x4fcb8e,_0x594c33=_0x50f298[_0xe10cc2(0x63f)][_0xe10cc2(0x922)];!_0x3c710a[_0xe10cc2(0xc35)](_0x594c33)&&_0x3c710a[_0xe10cc2(0xb66)](_0x594c33);}),_0x13b807[_0x4fcb8e(0xa54)](_0x4fcb8e(0x169),_0x352c7f[_0x4fcb8e(0xea5)](_0x3c710a)),_0x2e04b3=![],_0x4a6485(),_0x226081(_0x4fcb8e(0xb50));}}async function _0x3b7d85(_0x3b8971){const _0x5d3926=_0x8dde82,_0x22ada2=_0x3b8971['target'][_0x5d3926(0x6d4)][0x0];if(!_0x22ada2)return;_0x1a8bbc(!![],_0x5d3926(0xc13));const _0x46ce78=new FileReader();_0x46ce78[_0x5d3926(0x787)]=async _0x310059=>{const _0x180c23=_0x5d3926;try{const _0x38a2ec=JSON['parse'](_0x310059[_0x180c23(0x272)][_0x180c23(0xd29)]);if(_0x38a2ec['type']!=='NoirCharacterCard'){if(_0x180c23(0xe47)!==_0x180c23(0xe47))_0x16e011='<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>';else throw new Error(_0x180c23(0x8aa));}const _0x237952=[];_0x38a2ec[_0x180c23(0x3c6)]&&Array[_0x180c23(0xca5)](_0x38a2ec[_0x180c23(0x3c6)])&&('cueSz'==='cueSz'?_0x38a2ec['worldBookCategories'][_0x180c23(0xb85)](_0x437811=>{const _0x3d8d39=_0x180c23,_0xcff756=_0xdfbfac[_0x3d8d39(0x3c6)][_0x3d8d39(0x76b)](_0x398611=>_0x398611[_0x3d8d39(0xb95)]===_0x437811[_0x3d8d39(0xb95)]);if(!_0xcff756){if(_0x3d8d39(0x467)!=='ERJrY')_0xdfbfac[_0x3d8d39(0x3c6)][_0x3d8d39(0xb66)]({'id':_0x437811['id']||'wbc_imported_'+Date[_0x3d8d39(0x4a2)](),'name':_0x437811[_0x3d8d39(0xb95)]});else{_0x328657('今天一笔账都没有，我整理什么？');return;}}}):_0x1c43dc['listenTogetherSession']&&_0x5a3c09[_0x180c23(0x317)][_0x180c23(0x976)]&&(_0x30fe9f[_0x180c23(0x329)][_0x180c23(0xc66)]=_0x180c23(0xe12),_0x330290(()=>_0x5bff59[_0x180c23(0x555)][_0x180c23(0x1cd)](_0x180c23(0x36e)),0xa)));if(_0x38a2ec[_0x180c23(0xe7d)]&&_0x38a2ec[_0x180c23(0xe7d)][_0x180c23(0x1e2)]>0x0){if(_0x180c23(0x7ef)!=='XvFna')return _0x3df3f2;else for(const _0x423b0b of _0x38a2ec[_0x180c23(0xe7d)]){let _0x51cb95=_0xdfbfac['worldBooks']['find'](_0x5a4f7a=>_0x5a4f7a[_0x180c23(0xb95)]===_0x423b0b[_0x180c23(0xb95)]&&(_0x5a4f7a[_0x180c23(0x798)]||_0x180c23(0x7f4))===(_0x423b0b['categoryId']||'default'));if(_0x51cb95){if(_0x180c23(0x753)==='stjwc'){if(_0x22e776[_0x180c23(0xefb)]===_0x180c23(0xa29))return _0x1ac3e9['userProfile']?.[_0x180c23(0xb95)]||_0x180c23(0xb24);if(_0x2c8e4e[_0x180c23(0xdf8)]){const _0x37dba0=_0x2a8622(_0xa3d878['senderId']);return _0x37dba0?.[_0x180c23(0xb95)]||_0x180c23(0x2a6);}if(_0x2a84d3?.[_0x180c23(0x8c7)]===_0x180c23(0xcef)){const _0x468f79=_0xf462fa(_0x15929b['participantIds'][0x0]);return _0x468f79?.[_0x180c23(0xb95)]||'AI';}return'Assistant';}else _0x237952[_0x180c23(0xb66)](_0x51cb95['id']);}else{const _0x16e1dd={'id':'wb_'+Date[_0x180c23(0x4a2)]()+'_'+Math[_0x180c23(0x48a)](),'name':_0x423b0b[_0x180c23(0xb95)],'content':_0x423b0b['content'],'categoryId':_0x423b0b['categoryId']||'default'};_0xdfbfac[_0x180c23(0xe7d)][_0x180c23(0xb66)](_0x16e1dd),_0x237952[_0x180c23(0xb66)](_0x16e1dd['id']);}}}const _0x4901c9=_0x180c23(0xb18)+Date[_0x180c23(0x4a2)]();let _0xcd84c3=null;if(_0x38a2ec[_0x180c23(0x584)]){if(_0x180c23(0xd81)===_0x180c23(0x5eb))_0x461cad[_0x180c23(0xb66)](..._0x731231(_0x331586));else{const _0x4a978b=await _0x2b279d(_0x38a2ec[_0x180c23(0x584)]);await _0x510f28(_0x180c23(0xa53)+_0x4901c9,_0x4a978b),_0xcd84c3=await _0x273922(_0x4a978b);}}if(_0x38a2ec[_0x180c23(0xa52)]){if(_0x180c23(0x408)!==_0x180c23(0x408))_0x4d4cdc=_0x1a105f['participantIds'][0x0];else for(const _0x39dafb in _0x38a2ec['sprites']){if(_0x180c23(0x4f3)==='uHwOM'){const _0x17771b=_0x38a2ec['sprites'][_0x39dafb];if(_0x17771b){if('qmkph'===_0x180c23(0xab2)){const _0xe825f8=await _0x2b279d(_0x17771b);await _0x510f28(_0x180c23(0xc3a)+_0x39dafb+'_'+_0x4901c9,_0xe825f8);}else{const _0x42136b=_0x175409[_0x180c23(0x314)](_0x593115,_0x180c23(0xece)),_0x19cbda=_0x42136b['objectStore'](_0x55f193),_0x1627b1=_0x19cbda['delete'](_0x109ae9);_0x1627b1[_0x180c23(0xdab)]=()=>_0x5ad90f(),_0x1627b1[_0x180c23(0x514)]=()=>_0x5f3d0f(_0x1627b1[_0x180c23(0x27f)]);}}}else _0x5d3b92['getElementById'](_0x180c23(0x1c8))[_0x180c23(0x3a0)]('click',_0xc0086f),_0xfef217[_0x180c23(0x1d6)](_0x180c23(0x43d))[_0x180c23(0x3a0)](_0x180c23(0x288),_0x269ee0),_0x1fc563[_0x180c23(0x1d6)]('livestream-reroll-btn')[_0x180c23(0x3a0)]('click',_0x52d07c),_0x571610['getElementById'](_0x180c23(0x124))[_0x180c23(0x3a0)](_0x180c23(0x288),_0x2091de),_0x33ac3c[_0x180c23(0x1d6)](_0x180c23(0x580))[_0x180c23(0x3a0)](_0x180c23(0x288),()=>_0x8412d0(![])),_0x4afe4d[_0x180c23(0x1d6)]('livestream-sprite-reset-button')[_0x180c23(0x3a0)](_0x180c23(0x288),_0x5e06e9),_0x368a75['getElementById'](_0x180c23(0x2cb))[_0x180c23(0x3a0)]('input',_0x40cda3),_0x2e24a2['getElementById'](_0x180c23(0xed0))[_0x180c23(0x3a0)](_0x180c23(0xb39),_0x568aa6),_0x394ebb['getElementById'](_0x180c23(0x9bf))[_0x180c23(0x3a0)](_0x180c23(0xb39),_0x42ac89);}}const _0x3497a1={'id':_0x4901c9,'name':_0x38a2ec[_0x180c23(0xb95)],'remark':_0x38a2ec['remark']||'','persona':_0x38a2ec[_0x180c23(0x79b)],'avatar':_0xcd84c3,'linkedWorldBookIds':_0x237952,'bubbleCss':_0x38a2ec['bubbleCss']||''};_0xdfbfac[_0x180c23(0x94d)][_0x180c23(0xb66)](_0x3497a1);const _0x237564={'id':'chat_'+_0x4901c9,'type':_0x180c23(0xcef),'participantIds':[_0x4901c9],'boundUserProfileId':_0xdfbfac[_0x180c23(0xb83)]};_0xdfbfac[_0x180c23(0xc1b)][_0x180c23(0xb66)](_0x237564),_0x31622b(),await _0x117428(),_0x21d6ce('“'+_0x3497a1[_0x180c23(0xb95)]+_0x180c23(0x817));}catch(_0x2de2f6){console[_0x180c23(0x27f)](_0x180c23(0x12f),_0x2de2f6),_0x21d6ce(_0x180c23(0x3f0)+_0x2de2f6[_0x180c23(0x8ac)]);}finally{_0x180c23(0x8bd)===_0x180c23(0x8bd)?(_0x1a8bbc(![]),_0x3b8971[_0x180c23(0x272)]['value']=''):_0x24a705['forEach'](_0x31aeab=>{const _0x56ab1c=_0x180c23,_0x148aee=new _0x5318a8(_0x31aeab[_0x56ab1c(0x10c)]||_0x31aeab['last_edited'])[_0x56ab1c(0xa4d)]();_0x148aee>=_0x2df8b0[_0x56ab1c(0xa4d)]()&&_0x99ada4[_0x56ab1c(0xb66)]({'timestamp':_0x148aee,'type':_0x56ab1c(0xc06)+_0x1dabed+']','content':_0x297a9a['stringify'](_0x31aeab)});});}},_0x46ce78[_0x5d3926(0xe00)](_0x22ada2);}function _0xad18a1(_0x448c38,_0x12964f=[]){const _0x508afa=_0x8dde82;if(_0x508afa(0xbcd)!=='LrGIv'){const _0x354a4b=document[_0x508afa(0x1d6)](_0x448c38);_0x354a4b['innerHTML']='';const _0x3f451e=_0xdfbfac['worldBooks']['reduce']((_0x438384,_0x47f3fa)=>{const _0x54d877=_0x508afa,_0x268ffc=_0x47f3fa[_0x54d877(0x798)]||_0x54d877(0x7f4);if(!_0x438384[_0x268ffc]){if(_0x54d877(0x606)===_0x54d877(0x1bd)){const _0x4730af=_0x2dcc62[_0x54d877(0x1d6)](_0x54d877(0x36b)),_0x2c3cc5=_0x122b7f[_0x54d877(0x1d6)](_0x54d877(0x766)),_0x1f4df9=_0x484b16[_0x54d877(0x94d)][_0x54d877(0x76b)](_0x310fa9=>_0x310fa9['id']===_0x5701c4),_0x45892e=_0x1f4df9?_0x1f4df9[_0x54d877(0xb95)]:_0x54d877(0x842),_0x343dc2=_0x1f4df9&&_0x1f4df9['avatar']?_0x1f4df9[_0x54d877(0x584)]:_0x2622c7;_0x4730af[_0x54d877(0xa73)]=_0x54d877(0x323)+_0x45892e+_0x54d877(0x69c);const _0x185157=_0x4730af[_0x54d877(0xb6c)](_0x54d877(0x431));_0x185157&&(_0x185157[_0x54d877(0xcab)]=_0x343dc2);_0x2c3cc5[_0x54d877(0xa73)]='';const _0x2df41a=_0x4730af['querySelector'](_0x54d877(0x9ee)),_0x1d6cac=[{'id':_0x54d877(0x35c),'name':'聊天','svg':_0x54d877(0x79f)},{'id':'abyss','name':'浏览器','svg':'<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>'},{'id':_0x54d877(0xd87),'name':'相册','svg':_0x54d877(0x52f)},{'id':_0x54d877(0x29a),'name':'总结','svg':'<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>'},{'id':_0x54d877(0x452),'name':'备忘录','svg':_0x54d877(0xe59)},{'id':'bites','name':'外卖','svg':_0x54d877(0x735)},{'id':'wants','name':'购物','svg':'<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>'},{'id':'footprints','name':'足迹','svg':'<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>'}];_0x1d6cac[_0x54d877(0xb85)](_0x18fa36=>{const _0x59e0ab=_0x54d877,_0x2cec1e=_0x1bba96[_0x59e0ab(0x8f1)](_0x59e0ab(0xce2));_0x2cec1e[_0x59e0ab(0x213)]=_0x59e0ab(0xc3c),_0x2cec1e['innerHTML']=_0x59e0ab(0xa2a)+_0x18fa36[_0x59e0ab(0x250)]+_0x59e0ab(0x45f)+_0x18fa36['name']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2cec1e[_0x59e0ab(0x3a0)]('click',()=>_0x6f6b36(_0x18fa36['id'],_0x18fa36[_0x59e0ab(0xb95)])),_0x2df41a[_0x59e0ab(0x5b8)](_0x2cec1e);});}else _0x438384[_0x268ffc]=[];}return _0x438384[_0x268ffc][_0x54d877(0xb66)](_0x47f3fa),_0x438384;},{}),_0x3597f4=()=>{const _0x1a8564=_0x508afa;_0x1a8564(0xea0)!==_0x1a8564(0xea0)?_0x3c9400():_0x448c38===_0x1a8564(0x81d)?_0x1a8564(0x5de)===_0x1a8564(0x5de)?_0x466143():_0x189e76['style'][_0x1a8564(0xc66)]=_0x1a8564(0x338):_0x1a8564(0x184)!==_0x1a8564(0x2d0)?_0x21fa40():_0x453e57['push']('-\x20留意最近观察到的变化：'+_0x4cf670[_0x1a8564(0xa0c)][_0x52547c[_0x1a8564(0xa0c)][_0x1a8564(0x1e2)]-0x1]);},_0x1d3bca=[..._0xdfbfac[_0x508afa(0x3c6)]];if(_0x3f451e[_0x508afa(0x7f4)]&&!_0x1d3bca['find'](_0x534503=>_0x534503['id']===_0x508afa(0x7f4))){const _0x21a942=_0xdfbfac[_0x508afa(0x3c6)]['some'](_0x2c1124=>_0x2c1124['id']===_0x508afa(0x7f4));!_0x21a942&&_0x1d3bca[_0x508afa(0xb66)]({'id':_0x508afa(0x7f4),'name':_0x508afa(0x39f)});}_0x1d3bca[_0x508afa(0xb85)](_0x2f5eb3=>{const _0x246ecb=_0x508afa,_0x296b4c=_0x3f451e[_0x2f5eb3['id']]||[];if(_0x296b4c[_0x246ecb(0x1e2)]===0x0)return;const _0x3f9cde=document[_0x246ecb(0x8f1)](_0x246ecb(0xce2));_0x3f9cde['className']=_0x246ecb(0x930);const _0x54e971=_0x296b4c[_0x246ecb(0xa30)](_0x416af3=>_0x12964f[_0x246ecb(0xc35)](_0x416af3['id']));_0x3f9cde[_0x246ecb(0xa73)]=_0x246ecb(0xdf6)+_0x2f5eb3['id']+'\x22\x20'+(_0x54e971?'checked':'')+_0x246ecb(0xce3)+_0x2f5eb3[_0x246ecb(0xb95)]+_0x246ecb(0x2af);const _0x299094=_0x3f9cde['querySelector']('.wb-entry-list');_0x296b4c['forEach'](_0x2ac6f6=>{const _0x7d0ad9=_0x246ecb,_0x4cc69b=_0x12964f[_0x7d0ad9(0xc35)](_0x2ac6f6['id']),_0x4f1d48=document[_0x7d0ad9(0x8f1)](_0x7d0ad9(0x322));_0x4f1d48[_0x7d0ad9(0x213)]=_0x7d0ad9(0x3a7),_0x4f1d48[_0x7d0ad9(0xa73)]=_0x7d0ad9(0x45d)+_0x2ac6f6['id']+_0x7d0ad9(0x76d)+_0x2f5eb3['id']+'\x22\x20'+(_0x4cc69b?_0x7d0ad9(0xefd):'')+'>\x20'+_0x2ac6f6['name'],_0x299094[_0x7d0ad9(0x5b8)](_0x4f1d48);}),_0x354a4b[_0x246ecb(0x5b8)](_0x3f9cde);}),_0x354a4b[_0x508afa(0x7af)]('.wb-category-header')[_0x508afa(0xb85)](_0x5eb1ab=>{const _0x5be0e9=_0x508afa;_0x5eb1ab[_0x5be0e9(0x3a0)]('click',_0x534ee3=>{const _0x3606b8=_0x5be0e9;if(_0x3606b8(0xcae)==='YFZOM'){if(_0x534ee3[_0x3606b8(0x272)]['type']==='checkbox')return;const _0x5d93ab=_0x5eb1ab[_0x3606b8(0xe80)],_0x3d9c9e=_0x5eb1ab[_0x3606b8(0xb6c)](_0x3606b8(0xde5)),_0x46679b=_0x5d93ab[_0x3606b8(0x555)][_0x3606b8(0xcbc)](_0x3606b8(0xd9e));_0x5d93ab[_0x3606b8(0x555)][_0x3606b8(0x5be)](_0x3606b8(0xd9e),!_0x46679b),_0x3d9c9e[_0x3606b8(0x555)][_0x3606b8(0x5be)](_0x3606b8(0xd9e),!_0x46679b);}else _0x558b35[_0x3606b8(0x27f)](_0x3606b8(0xbd0),_0x2ea124);});}),_0x354a4b['querySelectorAll']('.category-checkbox')[_0x508afa(0xb85)](_0x2645b6=>{const _0x514b3d=_0x508afa;_0x2645b6[_0x514b3d(0x3a0)](_0x514b3d(0x288),_0x2f5b9d=>{const _0x1e8bcc=_0x514b3d,_0x53abe3=_0x2f5b9d[_0x1e8bcc(0x272)][_0x1e8bcc(0x63f)]['categoryId'],_0x21cd41=_0x2f5b9d[_0x1e8bcc(0x272)][_0x1e8bcc(0xefd)];_0x354a4b[_0x1e8bcc(0x7af)](_0x1e8bcc(0xbf7)+_0x53abe3+'\x22]')[_0x1e8bcc(0xb85)](_0x4f3840=>{const _0x1aa68d=_0x1e8bcc;_0x4f3840[_0x1aa68d(0xefd)]=_0x21cd41;}),_0x3597f4();});}),_0x354a4b[_0x508afa(0x7af)](_0x508afa(0xd42))['forEach'](_0x41bd6e=>{const _0x130d30=_0x508afa;_0x41bd6e[_0x130d30(0x3a0)](_0x130d30(0xb39),_0x19a066=>{const _0x5d5718=_0x130d30,_0x560dbd=_0x19a066[_0x5d5718(0x272)][_0x5d5718(0x63f)][_0x5d5718(0x798)],_0x5099c=_0x354a4b['querySelectorAll'](_0x5d5718(0xbf7)+_0x560dbd+'\x22]'),_0x2ba0cd=_0x354a4b[_0x5d5718(0x7af)](_0x5d5718(0xbf7)+_0x560dbd+_0x5d5718(0xd26)),_0x2c3e99=_0x354a4b[_0x5d5718(0xb6c)]('.category-checkbox[data-category-id=\x22'+_0x560dbd+'\x22]');if(_0x2ba0cd['length']===0x0)_0x2c3e99['checked']=![],_0x2c3e99['indeterminate']=![];else _0x2ba0cd[_0x5d5718(0x1e2)]===_0x5099c[_0x5d5718(0x1e2)]?_0x5d5718(0xbef)===_0x5d5718(0xbef)?(_0x2c3e99[_0x5d5718(0xefd)]=!![],_0x2c3e99[_0x5d5718(0xda1)]=![]):_0x45e554(_0x5d5718(0x8b7)):_0x2c3e99[_0x5d5718(0xda1)]=!![];_0x3597f4();});}),_0x354a4b[_0x508afa(0x7af)]('.category-checkbox')[_0x508afa(0xb85)](_0x1ef2dc=>{const _0x33cb2c=_0x508afa,_0x19ca25=_0x1ef2dc[_0x33cb2c(0x63f)][_0x33cb2c(0x798)],_0x2ee006=_0x354a4b[_0x33cb2c(0x7af)](_0x33cb2c(0xbf7)+_0x19ca25+'\x22]'),_0x1a3219=_0x354a4b[_0x33cb2c(0x7af)](_0x33cb2c(0xbf7)+_0x19ca25+_0x33cb2c(0xd26));_0x1a3219['length']>0x0&&_0x1a3219['length']<_0x2ee006[_0x33cb2c(0x1e2)]&&('naFTI'===_0x33cb2c(0x35a)?_0x1ef2dc[_0x33cb2c(0xda1)]=!![]:_0x1b7010+=_0x33cb2c(0xe49));});}else{_0xb5e5d6[_0x508afa(0xa73)]=_0x508afa(0x75c);return;}}async function _0x5886de(){const _0x41f924=_0x8dde82;if(_0x41f924(0xd6f)!==_0x41f924(0xd6f))_0xce65d5=_0x38e6fb;else{const _0x3ad249=[_0x41f924(0xcd5),_0x41f924(0xd46),_0x41f924(0x183),'sad',_0x41f924(0xe5)],_0x2b82ca=_0x2b706d['value'],_0x5136fb=document[_0x41f924(0x1d6)](_0x41f924(0x91a))['value'],_0x2bbef8=_0x5c1143[_0x41f924(0x6d4)][0x0],_0x5cbee2=_0xbb2052['files'][0x0],_0x34ebce=_0x49f5ee[_0x41f924(0x6d4)][0x0],_0x56fa45=document['querySelectorAll'](_0x41f924(0x373)),_0x1cb8da=Array[_0x41f924(0xe74)](_0x56fa45)['map'](_0x4ba30f=>_0x4ba30f[_0x41f924(0xee2)]),_0x15dfd8={'name':_0x424267['value'][_0x41f924(0xcd2)](),'remark':_0x5e4245['value'][_0x41f924(0xcd2)](),'persona':_0xb5d837[_0x41f924(0xee2)]['trim'](),'linkedWorldBookIds':_0x1cb8da,'bubbleCss':document[_0x41f924(0x1d6)](_0x41f924(0x37d))[_0x41f924(0xee2)][_0x41f924(0xcd2)](),'avatarFrameUrl':document[_0x41f924(0x1d6)]('char-avatar-frame-url')[_0x41f924(0xee2)][_0x41f924(0xcd2)](),'userAvatarFrameUrl':document[_0x41f924(0x1d6)](_0x41f924(0x927))[_0x41f924(0xee2)]['trim']()};if(!_0x15dfd8[_0x41f924(0xb95)]){_0x21d6ce(_0x41f924(0xb87));return;}try{if('cvfdn'===_0x41f924(0xdc0)){let _0x304234=_0x2b82ca;if(_0x2b82ca){const _0x1ee535=_0xdfbfac[_0x41f924(0x94d)]['find'](_0x1bcf0f=>_0x1bcf0f['id']===_0x2b82ca);_0x1ee535&&Object['assign'](_0x1ee535,_0x15dfd8);}else{const _0x3276c9='char_'+Date[_0x41f924(0x4a2)]();_0x304234=_0x3276c9;const _0x2fe054={'id':_0x3276c9,..._0x15dfd8};_0x2fe054[_0x41f924(0x584)]=_0x2bbef8?await _0x1b759b(_0x2bbef8):_0x1af29b,_0xdfbfac[_0x41f924(0x94d)][_0x41f924(0xb66)](_0x2fe054);const _0x1c9eb0={'id':_0x41f924(0x9c6)+_0x3276c9,'type':'private','participantIds':[_0x3276c9],'listenTogetherSession':null};_0xdfbfac[_0x41f924(0xc1b)]['push'](_0x1c9eb0),await _0x187f1b(_0x3276c9),console[_0x41f924(0x7ec)](_0x41f924(0x327)+_0x15dfd8[_0x41f924(0xb95)]+_0x41f924(0x31f));}const _0x5ef0bb=_0xdfbfac[_0x41f924(0xc1b)][_0x41f924(0x76b)](_0x5daa08=>_0x5daa08[_0x41f924(0x8c7)]==='private'&&_0x5daa08[_0x41f924(0x41b)]['includes'](_0x304234));_0x5ef0bb&&(_0x5ef0bb[_0x41f924(0xacb)]=_0x5136fb);if(_0x2bbef8)await _0x510f28('char_avatar_'+_0x304234,_0x2bbef8);if(_0x5cbee2)await _0x510f28('char_wallpaper_'+_0x304234,_0x5cbee2);if(_0x34ebce)await _0x510f28(_0x41f924(0x6df)+_0x304234,_0x34ebce);for(const _0x274e5c of _0x3ad249){const _0x24d9e3=document[_0x41f924(0x1d6)](_0x41f924(0xc2e)+_0x274e5c+'-input')[_0x41f924(0x6d4)][0x0];if(_0x24d9e3)await _0x510f28('char_sprite_'+_0x274e5c+'_'+_0x304234,_0x24d9e3);}_0x31622b(),_0x117428(),_0x21d6ce(_0x41f924(0xda2)),_0x137a40(_0x41f924(0xa77),_0x41f924(0xaee));if(!_0x2b82ca){if(_0x41f924(0x56a)===_0x41f924(0x56a)){const _0x31a949='chat_'+_0x304234;_0x204ca2(_0x31a949);}else _0x944488[_0xf9719b]=_0x3571e3[_0x41f924(0xc44)](_0xb2fde8);}}else{let _0x2d0601=_0x233115[_0x41f924(0xc44)](_0x5e354e);_0x40b19a[_0x41f924(0xca5)](_0x2d0601)&&_0x2d0601[_0x41f924(0xb85)](_0x214b49=>{const _0x4022e7=_0x41f924,_0x4a749b=new _0x3fb275(_0x214b49[_0x4022e7(0x10c)]||_0x214b49[_0x4022e7(0xc65)])[_0x4022e7(0xa4d)]();_0x4a749b>=_0x43e245['getTime']()&&_0x58a554[_0x4022e7(0xb66)]({'timestamp':_0x4a749b,'type':_0x4022e7(0xc06)+_0x1018b4+']','content':_0x5e85ef[_0x4022e7(0xea5)](_0x214b49)});});}}catch(_0x2bd88a){console[_0x41f924(0x27f)]('保存角色失败:',_0x2bd88a),_0x21d6ce(_0x41f924(0x7b0)+_0x2bd88a[_0x41f924(0x8ac)]);}if(_0x2bbef8||_0x5cbee2||_0x34ebce||_0x3ad249['some'](_0x39444d=>document[_0x41f924(0x1d6)]('char-edit-sprite-'+_0x39444d+_0x41f924(0x99a))[_0x41f924(0x6d4)][0x0]))_0x21d6ce('资料已更新，为了让所有变更完全生效，我来帮你刷新一下。'),setTimeout(()=>location[_0x41f924(0x28d)](),0x5dc);else{if(_0x41f924(0xcbb)===_0x41f924(0xcbb)){_0x137a40(_0x41f924(0xa77),_0x41f924(0xaee));if(!_0x2b82ca){const _0x2cd7e5=_0x41f924(0x9d5)+Date[_0x41f924(0x4a2)]();_0x204ca2(_0x2cd7e5);}}else{_0x2b951e[_0x41f924(0xa73)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>';return;}}}}function _0x3ff904(){const _0x325b7f=_0x8dde82;_0x5343ca[_0x325b7f(0xee2)]='',_0x1f065c[_0x325b7f(0xa73)]='';if(_0xdfbfac[_0x325b7f(0x94d)][_0x325b7f(0x1e2)]<0x2){if(_0x325b7f(0x806)!=='DIPkQ'){_0x21d6ce('需要至少2个角色才能创建群聊。');return;}else{if(!_0x1c6ff4['isArray'](_0x3d3636))return _0x325b7f(0x764);if(_0x1f233f[_0x325b7f(0x1e2)]===0x0)return _0x325b7f(0x5fd);return _0x134113[_0x325b7f(0x6d9)]((_0x2df1f2,_0x324568)=>new _0x4cb1d6(_0x324568['last_edited'])-new _0x28a436(_0x2df1f2[_0x325b7f(0xc65)])),_0x97a600['map'](_0x4dfe84=>_0x325b7f(0x95e)+(_0x4dfe84[_0x325b7f(0x13b)]||_0x325b7f(0xe3d))+_0x325b7f(0xd74)+(_0x4dfe84[_0x325b7f(0xee)]||'')+_0x325b7f(0xa26)+(_0x4dfe84[_0x325b7f(0xc65)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x325b7f(0xd9a)]('');}}_0xdfbfac[_0x325b7f(0x94d)]['forEach'](_0x31a6be=>{const _0x25be3e=_0x325b7f;if('dkqlj'!==_0x25be3e(0x404))_0x5285fe[_0x25be3e(0xee2)]=_0x5f1f75,_0x4208ef(_0x25be3e(0x84c));else{const _0x2ee809=document[_0x25be3e(0x8f1)]('li');_0x2ee809['className']=_0x25be3e(0x33d),_0x2ee809[_0x25be3e(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-'+_0x31a6be['id']+_0x25be3e(0x957)+_0x31a6be['id']+_0x25be3e(0x31e)+(_0x31a6be[_0x25be3e(0x584)]||_0x1af29b)+_0x25be3e(0x841)+_0x31a6be['id']+'\x22\x20class=\x22char-name\x22>'+_0x31a6be[_0x25be3e(0xb95)]+'</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f065c[_0x25be3e(0x5b8)](_0x2ee809);}}),_0x137a40('groupChatCreate',_0x325b7f(0xd2d));}function _0x1d7a90(){const _0x574ff2=_0x8dde82;if(_0x574ff2(0xcf4)===_0x574ff2(0xcd9)){const _0x38388c=_0x5ee105[_0x574ff2(0xee)]?'\x20'+_0x48956b['content']:'';_0x20325[_0x574ff2(0xb66)]('['+_0x739354(_0x3c4722)+']\x20[image]'+_0x38388c);}else{const _0x4fced6=_0x5343ca[_0x574ff2(0xee2)][_0x574ff2(0xcd2)]();if(!_0x4fced6){_0x21d6ce(_0x574ff2(0xd1b));return;}const _0x271451=Array[_0x574ff2(0xe74)](_0x1f065c['querySelectorAll'](_0x574ff2(0x5fb)))[_0x574ff2(0x266)](_0x101e9a=>_0x101e9a[_0x574ff2(0x63f)]['id']);if(_0x271451[_0x574ff2(0x1e2)]<0x2){if(_0x574ff2(0x659)===_0x574ff2(0xaba))_0x106076(_0x574ff2(0x693)+_0x4556a8[_0x574ff2(0x8ac)]);else{_0x21d6ce('群聊至少需要2名成员。');return;}}const _0x5a1a17={'id':'chat_group_'+Date[_0x574ff2(0x4a2)](),'type':_0x574ff2(0x304),'name':_0x4fced6,'participantIds':_0x271451};_0xdfbfac['chats'][_0x574ff2(0xb66)](_0x5a1a17),_0xdfbfac['activeChatId']=_0x5a1a17['id'],_0x31622b(),_0x117428(),_0x1b3734(),_0x346e88(),_0x21d6ce(_0x574ff2(0x53b)+_0x4fced6+_0x574ff2(0xc82)),_0x137a40(_0x574ff2(0xa77),_0x574ff2(0x4f5));}}_0x13946c[_0x8dde82(0x3a0)]('click',()=>_0x1f7cb8[_0x8dde82(0x288)]()),_0x25341c[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x2ec562),_0x1f7cb8[_0x8dde82(0x3a0)](_0x8dde82(0xef8),_0x268440),_0x387626[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x28bb1e),_0x56b767[_0x8dde82(0x3a0)]('click',()=>_0x1fd599['classList']['remove'](_0x8dde82(0x36e))),_0x4f177b[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x1fd599[_0x8dde82(0x555)][_0x8dde82(0x9ad)](_0x8dde82(0x36e))),_0x5e98fa[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0xf178c8=_0x8dde82;_0x2670ed[_0xf178c8(0xe3a)](),navigator[_0xf178c8(0xab7)][_0xf178c8(0x57d)](_0x2670ed['value'])[_0xf178c8(0x94f)](()=>{_0x21d6ce('已复制到剪贴板！');})['catch'](_0x25b3e3=>{const _0x4ae952=_0xf178c8;_0x4ae952(0xcd0)===_0x4ae952(0x507)?(_0x3a2772['classList'][_0x4ae952(0x9ad)](_0x4ae952(0xc64)),_0x831c23[_0x4ae952(0x329)][_0x4ae952(0x71d)]='',_0x112cf7[_0x4ae952(0x329)][_0x4ae952(0x990)]=''):_0x21d6ce('复制失败了，哼。');});}),_0x2ce40d[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x57e15b),_0x52fd7e[_0x8dde82(0x3a0)]('click',_0x92543e),_0x4002dc[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x53e66b['classList'][_0x8dde82(0x9ad)](_0x8dde82(0x36e))),_0x546e80['addEventListener'](_0x8dde82(0x288),()=>_0x53e66b[_0x8dde82(0x555)][_0x8dde82(0x9ad)](_0x8dde82(0x36e))),_0x2cf229['addEventListener'](_0x8dde82(0x288),()=>_0xbb2052[_0x8dde82(0x288)]()),_0x222f21['addEventListener'](_0x8dde82(0x288),()=>_0x49f5ee[_0x8dde82(0x288)]()),_0xbb2052[_0x8dde82(0x3a0)]('change',_0x38909f=>{const _0x4ec122=_0x8dde82,_0x5af32c=_0x38909f[_0x4ec122(0x272)]['files'][0x0];if(!_0x5af32c)return;const _0x36a500=URL[_0x4ec122(0x21c)](_0x5af32c);_0x2cf229['style'][_0x4ec122(0x5b7)]='url(\x27'+_0x36a500+'\x27)';}),_0x49f5ee['addEventListener'](_0x8dde82(0xef8),_0x2c0336=>{const _0x583b9a=_0x8dde82,_0x296d64=_0x2c0336[_0x583b9a(0x272)][_0x583b9a(0x6d4)][0x0];if(!_0x296d64)return;const _0xe9c5a7=URL[_0x583b9a(0x21c)](_0x296d64);_0x222f21['style'][_0x583b9a(0x5b7)]=_0x583b9a(0x8a1)+_0xe9c5a7+'\x27)';}),_0x34aba[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x530288['click']()),_0x20e1e0['addEventListener'](_0x8dde82(0x288),()=>{const _0x420e3e=_0x8dde82;localStorage[_0x420e3e(0x287)](_0x420e3e(0x72e)),_0x36a693(),_0x21d6ce(_0x420e3e(0x586));}),_0x530288[_0x8dde82(0x3a0)]('change',async _0x42eabf=>{const _0x5ef704=_0x8dde82,_0x255832=_0x42eabf[_0x5ef704(0x272)][_0x5ef704(0x6d4)][0x0];if(!_0x255832)return;try{const _0x28757d=await _0x1b759b(_0x255832);localStorage[_0x5ef704(0xa54)](_0x5ef704(0x72e),_0x28757d),_0x36a693(),_0x21d6ce(_0x5ef704(0xd84));}catch(_0x4e42cf){_0x21d6ce(_0x5ef704(0x693)+_0x4e42cf[_0x5ef704(0x8ac)]);}}),document[_0x8dde82(0x1d6)](_0x8dde82(0xc9e))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40('chat',_0x8dde82(0xa74))),document[_0x8dde82(0x1d6)](_0x8dde82(0x132))[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x5bd3e3);const _0x1b9371=document[_0x8dde82(0x1d6)](_0x8dde82(0xa5a)),_0x3adecb=document['getElementById'](_0x8dde82(0x484));_0x1b9371['addEventListener']('click',()=>_0x3adecb[_0x8dde82(0x288)]()),_0x3adecb[_0x8dde82(0x3a0)](_0x8dde82(0xef8),_0x4e72e2=>{const _0x237417=_0x8dde82,_0x36b222=_0x4e72e2['target'][_0x237417(0x6d4)][0x0];if(!_0x36b222)return;const _0x51b4f3=URL[_0x237417(0x21c)](_0x36b222);_0x1b9371['src']=_0x51b4f3,_0x1b9371[_0x237417(0x787)]=()=>{const _0x44b357=_0x237417;URL[_0x44b357(0x953)](_0x51b4f3);};});const _0x108791=document[_0x8dde82(0x1d6)]('group-bg-preview')[_0x8dde82(0xcb5)],_0x1b3f8e=document['getElementById'](_0x8dde82(0x782)),_0x2bd758=document[_0x8dde82(0x1d6)](_0x8dde82(0xa57));_0x108791[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x1b3f8e[_0x8dde82(0x288)]()),_0x1b3f8e[_0x8dde82(0x3a0)](_0x8dde82(0xef8),_0x4d12bb=>{const _0x34db42=_0x8dde82;if('JDyzS'===_0x34db42(0x460))_0x86ff81['addEventListener']('click',()=>{const _0x503c5f=_0x34db42,_0x2b60b5=_0x50e472(_0x579926['dataset'][_0x503c5f(0xedd)],0xa);_0x106a95(_0x2b60b5);});else{const _0x23b9fe=_0x4d12bb[_0x34db42(0x272)][_0x34db42(0x6d4)][0x0];if(!_0x23b9fe)return;const _0x2631ec=URL[_0x34db42(0x21c)](_0x23b9fe);document[_0x34db42(0x1d6)]('group-bg-preview')[_0x34db42(0x329)][_0x34db42(0x5b7)]=_0x34db42(0x8a1)+_0x2631ec+'\x27)';}});const _0x10b5b0=document[_0x8dde82(0xb6c)](_0x8dde82(0x339)),_0x314962=document[_0x8dde82(0x1d6)]('group-world-book-checkboxes');_0x10b5b0[_0x8dde82(0x3a0)]('click',_0x2c65e3=>{const _0x208919=_0x8dde82;if(_0x208919(0x537)===_0x208919(0xf0d)){const _0x4a3752=_0x5d180b(_0x23eb73[_0x208919(0xee2)]);if(_0x111cce(_0x4a3752)||_0x4a3752<=0x0){_0x3f0613('请输入有效的转账金额！');return;}const _0x3f7842=_0x73486a();let _0x5873ea=null;_0x3f7842[_0x208919(0x8c7)]===_0x208919(0x304)?_0x5873ea=_0x3e9617[_0x208919(0xee2)]:_0x5873ea=_0x3f7842[_0x208919(0x41b)][0x0];const _0x6bb5de=_0x51c624(_0x3f7842['id']),_0x4683e9={'role':_0x208919(0xa29),'type':_0x208919(0x3d7),'content':_0x208919(0x861)+(_0x4f991e(_0x5873ea)?.['name']||'未知')+'\x20转账\x20'+_0x4a3752+']','amount':_0x4a3752,'recipientId':_0x5873ea,'senderId':_0x6bb5de['id'],'timestamp':_0x599485[_0x208919(0x4a2)]()};_0x8f55c[_0x208919(0x3a4)][_0x208919(0xb66)](_0x4683e9),_0x4c4060(),_0x3e881e(),_0x947e5b[_0x208919(0x555)]['remove'](_0x208919(0x36e));}else _0x2c65e3[_0x208919(0xa37)](),_0x314962[_0x208919(0x555)]['toggle'](_0x208919(0xce9)),_0x10b5b0[_0x208919(0x555)][_0x208919(0x5be)](_0x208919(0xd9e));}),_0x314962[_0x8dde82(0x3a0)]('change',_0x21fa40),document['getElementById']('group-clear-history-button')[_0x8dde82(0x3a0)]('click',_0xb80d09),document[_0x8dde82(0x1d6)](_0x8dde82(0x403))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x3aa5e0=_0x8dde82,_0x83d9ef=_0x1d801f();if(!_0x83d9ef||_0x83d9ef[_0x3aa5e0(0x8c7)]!==_0x3aa5e0(0x304))return;const _0x27311c=await _0x13215d(_0x3aa5e0(0xd50)+_0x83d9ef[_0x3aa5e0(0xb95)]+_0x3aa5e0(0x475));_0x27311c&&(_0x105d84(_0x83d9ef['id']),_0x21d6ce(_0x3aa5e0(0x67a)),_0x137a40(_0x3aa5e0(0xa77)),_0x1bc603(![]));});const _0x513d11=document[_0x8dde82(0xb6c)](_0x8dde82(0xca0)),_0x5c02e9=document[_0x8dde82(0x1d6)]('world-book-checkboxes-container');_0x513d11[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x46d0b4=>{const _0xe2bd4e=_0x8dde82;_0x46d0b4[_0xe2bd4e(0xa37)](),_0x5c02e9['classList'][_0xe2bd4e(0x5be)](_0xe2bd4e(0xce9)),_0x513d11[_0xe2bd4e(0x555)][_0xe2bd4e(0x5be)]('expanded');}),_0x5c02e9[_0x8dde82(0x3a0)](_0x8dde82(0xef8),_0x466143),document[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x52666a=>{const _0x594840=_0x8dde82;!document[_0x594840(0xb6c)](_0x594840(0xcb8))['contains'](_0x52666a[_0x594840(0x272)])&&(_0x5c02e9[_0x594840(0x555)][_0x594840(0x9ad)](_0x594840(0xce9)),_0x513d11[_0x594840(0x555)][_0x594840(0x9ad)](_0x594840(0xd9e)));}),_0x938d4[_0x8dde82(0x3a0)]('click',()=>{const _0xe090bb=_0x8dde82;_0x47ce07(),_0x137a40(_0xe090bb(0x128),_0xe090bb(0x410));}),document[_0x8dde82(0x1d6)](_0x8dde82(0x4ba))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40('home',_0x8dde82(0x128))),document[_0x8dde82(0x1d6)](_0x8dde82(0x500))['addEventListener']('click',()=>_0xe2925a()),document[_0x8dde82(0x1d6)](_0x8dde82(0x8d0))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x443246=_0x8dde82;if(_0x443246(0x476)!==_0x443246(0x181))_0x47ce07(),_0x137a40('worldBook',_0x443246(0x222));else{if(_0xbef1c2[_0x443246(0x41b)][_0x443246(0xc35)](_0x58283d['id'])){const _0x174f6b=_0xcc2e62(_0x59d63d['id']);_0x174f6b[_0x443246(0xb85)](_0x23e1ae=>{const _0x28dd41=_0x443246;_0x23e1ae[_0x28dd41(0x10c)]>=_0x3c2b66[_0x28dd41(0xa4d)]()&&_0x23e1ae['role']!==_0x28dd41(0xba3)&&_0x23e1ae[_0x28dd41(0xee)]&&_0x146fc3[_0x28dd41(0xb66)]({'timestamp':_0x23e1ae[_0x28dd41(0x10c)],'type':_0x290eda(_0x1db539),'content':'['+(_0x23e1ae[_0x28dd41(0xefb)]===_0x28dd41(0xa29)?_0x4c78b0[_0x28dd41(0xb95)]:_0x4c9ed5[_0x28dd41(0xb95)])+_0x28dd41(0x44a)+_0x23e1ae['content']});});}}}),document[_0x8dde82(0x1d6)](_0x8dde82(0x7ca))['addEventListener'](_0x8dde82(0x288),_0x47bc2e),document[_0x8dde82(0x1d6)](_0x8dde82(0xd18))['addEventListener'](_0x8dde82(0x288),_0x544472),_0x17cadf[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0xdd3),_0x8dde82(0x410))),_0x26d5da[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40('home',_0x8dde82(0xdd3))),_0x5ddcde['addEventListener']('click',()=>_0x49578d[_0x8dde82(0x288)]()),_0x49578d['addEventListener'](_0x8dde82(0xef8),async _0x2a1981=>{const _0x16292c=_0x8dde82,_0x331e49=_0x2a1981['target'][_0x16292c(0x6d4)][0x0];if(!_0x331e49)return;await _0x33fb69(_0x331e49);}),_0x3b769c[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x522ead=_0x8dde82;if(_0x51f11a)return;_0x51f11a=!![],_0xdfbfac[_0x522ead(0x8ed)]=null,document[_0x522ead(0x1d6)]('chat-screen')['classList']['remove'](_0x522ead(0xe84)),_0x117428(),_0x137a40(_0x522ead(0xa77),_0x522ead(0x410)),setTimeout(()=>{_0x51f11a=![];},0x190);}),_0x2c585b[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x291d60=_0x8dde82;_0x4a79ad();const _0x45f5c7=(_0xdfbfac[_0x291d60(0x5e0)]['endpoint']||'')[_0x291d60(0xc35)](_0x296055);_0x31fc3d[_0x291d60(0x2c5)]=_0x45f5c7,_0x137a40(_0x291d60(0x4b1),'home');}),_0x1f3a2a[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40('home',_0x8dde82(0x4b1))),_0x1f3a2a[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0x410),_0x8dde82(0x4b1)));const _0x53ca74=async _0x352c71=>{const _0x5238db=_0x8dde82;if(_0x51f11a)return;_0x51f11a=!![],_0x1a8bbc(!![],_0x5238db(0x378)),await new Promise(_0x21c5db=>setTimeout(_0x21c5db,0x32));try{_0x2677ea(),document[_0x5238db(0x1d6)](_0x5238db(0x292))['classList']['remove'](_0x5238db(0x36e));const _0xcf21be=document[_0x5238db(0x1d6)](_0x5238db(0x6fb));if(_0xcf21be)_0xcf21be['style']['display']='none';const _0x138a89=document[_0x5238db(0x1d6)](_0x5238db(0x6e3));if(_0x138a89)_0x138a89['innerHTML']='';_0xdfbfac[_0x5238db(0x8ed)]=null,_0x31622b();const _0xce446c=document[_0x5238db(0x1d6)](_0x5238db(0xc09));_0xce446c[_0x5238db(0x555)][_0x5238db(0x9ad)](_0x5238db(0xe84));const _0x28a355=document[_0x5238db(0x1d6)](_0x5238db(0x756));_0x28a355&&(_0x28a355[_0x5238db(0x329)][_0x5238db(0x71d)]='translate3d(100%,\x200,\x200)',_0x28a355[_0x5238db(0x329)]['visibility']=_0x5238db(0x8d5)),_0x352c71===_0x5238db(0x410)&&_0x137a40(_0x5238db(0x410),_0x5238db(0xa77));}catch(_0x16473d){console[_0x5238db(0x27f)](_0x5238db(0xe9e),_0x16473d);}finally{setTimeout(()=>{_0x1a8bbc(![]),_0x51f11a=![];},0x12c);}},_0x3cbae8=document[_0x8dde82(0x1d6)](_0x8dde82(0x70d)),_0x12f114=_0x3cbae8[_0x8dde82(0x646)](!![]);_0x3cbae8['parentNode'][_0x8dde82(0x913)](_0x12f114,_0x3cbae8),_0x12f114['addEventListener'](_0x8dde82(0x288),()=>{const _0xc35ac7=_0x8dde82;'qozpG'!=='GtPly'?_0x53ca74(_0xc35ac7(0xb44)):_0x602119=_0x52d788[_0xc35ac7(0xc44)](_0x56d911);});const _0x27cab5=document[_0x8dde82(0x1d6)]('back-to-home-from-chat'),_0x347af5=_0x27cab5[_0x8dde82(0x646)](!![]);_0x27cab5[_0x8dde82(0x669)][_0x8dde82(0x913)](_0x347af5,_0x27cab5),_0x347af5[_0x8dde82(0x3a0)]('click',()=>{const _0xa1f481=_0x8dde82;_0x53ca74(_0xa1f481(0x410));}),_0x31b1f2['addEventListener'](_0x8dde82(0x288),()=>{const _0x324c1d=_0x8dde82;_0x324c1d(0xb19)!==_0x324c1d(0x93e)?_0x137a40(_0x324c1d(0xa77),_0x324c1d(0xaee)):(_0x71691f=_0x6adf7[_0x324c1d(0xb95)],_0x5309d7=_0x41e56c['avatar']);}),_0x104e64[_0x8dde82(0x3a0)]('click',()=>{const _0x1c0b57=_0x8dde82;_0x28d8a9[_0x1c0b57(0x555)][_0x1c0b57(0x1cd)](_0x1c0b57(0x36e));}),_0x34e55f[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x54ec5c()),_0x266f27[_0x8dde82(0x3a0)]('click',_0x261487);function _0x487d9e(_0x500fa3){const _0x132762=_0x8dde82;if(!_0x500fa3||_0x500fa3[_0x132762(0x8c7)]!==_0x132762(0x304))return;const _0x356202='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x132762(0x42c)][_0x132762(0xc04)](_0x132762(0x439),_0x356202);const _0x3db7fc=document[_0x132762(0x1d6)]('group-options-modal'),_0x33fbb9=_0x3db7fc[_0x132762(0xb6c)](_0x132762(0x8d7)),_0x4d6cbd=document[_0x132762(0x1d6)](_0x132762(0x933)),_0xd3c1e1=document[_0x132762(0x1d6)](_0x132762(0x954)),_0x18a5e2=document[_0x132762(0x1d6)](_0x132762(0x91b)),_0x2049aa=document[_0x132762(0x1d6)](_0x132762(0xedb)),_0x10f475=document['getElementById'](_0x132762(0x5dd)),_0x556bd2=()=>_0x3db7fc[_0x132762(0x9ad)]();_0x4d6cbd[_0x132762(0x3a0)](_0x132762(0x288),async()=>{const _0x49709d=_0x132762;if(_0x49709d(0x8fe)!=='FakJI')_0x45194c['error'](_0x49709d(0x499),_0x4df994),_0x4b6a6e[_0x49709d(0x1d6)](_0x49709d(0x576))[_0x49709d(0xcab)]='',_0x5968e0[_0x49709d(0x1d6)](_0x49709d(0x10b))[_0x49709d(0xcab)]='';else{_0x556bd2();const _0x5075d6=await _0x13215d(_0x49709d(0x6e1)+_0x500fa3[_0x49709d(0xb95)]+_0x49709d(0x8bb));if(_0x5075d6){if('aVaAE'!==_0x49709d(0xda4)){_0x4e2e3c(_0x49709d(0x47b));return;}else{_0x500fa3['id']===_0xdfbfac[_0x49709d(0x8ed)]&&(_0x2677ea(),_0xdfbfac['conversationHistory']=[],_0x192646());try{localStorage['removeItem']('chatHistory_'+_0x500fa3['id']),_0x21d6ce('群聊\x22'+_0x500fa3[_0x49709d(0xb95)]+_0x49709d(0x544));}catch(_0xcf5cad){console[_0x49709d(0x27f)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20'+_0x500fa3['id'],_0xcf5cad),_0x21d6ce(_0x49709d(0xaf0));}}}}}),_0xd3c1e1['addEventListener'](_0x132762(0x288),()=>{const _0x19e306=_0x132762;_0x19e306(0x366)===_0x19e306(0x366)?(_0x556bd2(),_0x21d6ce('编辑群成员功能正在开发中...')):_0x37a5a8[_0x19e306(0xb66)]('最近变化:\x20'+_0x4f277d[_0x19e306(0xa0c)][_0x19e306(0xd9a)]('；'));}),_0x18a5e2[_0x132762(0x3a0)](_0x132762(0x288),async()=>{const _0xd05d3c=_0x132762;_0x556bd2();const _0xccf41a=prompt(_0xd05d3c(0xe54),_0x500fa3['name']);_0xccf41a&&_0xccf41a[_0xd05d3c(0xcd2)]()&&_0xccf41a!==_0x500fa3[_0xd05d3c(0xb95)]&&(_0x500fa3[_0xd05d3c(0xb95)]=_0xccf41a['trim'](),_0x31622b(),_0x117428(),_0x1b3734(),_0x21d6ce(_0xd05d3c(0x988)+_0x500fa3[_0xd05d3c(0xb95)]+'\x22。'));}),_0x2049aa['addEventListener']('click',async()=>{const _0x378220=_0x132762;if(_0x378220(0xed6)!==_0x378220(0xed6))_0x5e3f0e['classList'][_0x378220(0x1cd)](_0x378220(0x691)),_0x564df0['scrollIntoView']({'behavior':_0x378220(0x8fa),'block':_0x378220(0x6cc)});else{_0x556bd2();const _0x4c53d9=await _0x13215d(_0x378220(0x179)+_0x500fa3['name']+'\x22\x20吗？所有聊天记录将被永久删除。');_0x4c53d9&&(_0x105d84(_0x500fa3['id']),_0x21d6ce(_0x378220(0x486)+_0x500fa3['name']+_0x378220(0xb9b)),_0x1bc603(![]));}}),_0x33fbb9['addEventListener'](_0x132762(0x288),_0x556bd2),_0x10f475['addEventListener'](_0x132762(0x288),_0x556bd2);}_0x5e411e[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x4fc832=_0x8dde82;if('mBnrh'===_0x4fc832(0xcbf))_0x4c8a19[_0x4fc832(0x555)][_0x4fc832(0x1cd)](_0x4fc832(0x551));else{const _0x3edd65=_0x1d801f();if(_0x3edd65&&_0x3edd65[_0x4fc832(0x8c7)]===_0x4fc832(0xcef))_0x4302de(_0x3edd65[_0x4fc832(0x41b)][0x0]);else _0x3edd65&&_0x3edd65['type']===_0x4fc832(0x304)&&_0x5c94ca(_0x3edd65['id']);}}),document['getElementById'](_0x8dde82(0xa3d))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x8523f7=_0x8dde82;if(!_0xdfbfac['activeChatId']){_0x21d6ce(_0x8523f7(0x6be));return;}const _0x1f4793=_0xdfbfac['tokenStats'][_0x8523f7(0xb82)][_0x8523f7(0xeb3)](_0x81f5ac=>_0x81f5ac[_0x8523f7(0x1a9)]===_0xdfbfac[_0x8523f7(0x8ed)]);if(_0x1f4793[_0x8523f7(0x1e2)]===0x0){_0x21d6ce(_0x8523f7(0xae7));return;}const _0x45a7ca=_0x1f4793[_0x1f4793['length']-0x1],_0x434c02=new Date(_0x45a7ca[_0x8523f7(0x10c)])[_0x8523f7(0x985)](_0x8523f7(0x731)),_0x51c2e5='📊\x20Token统计\x0a\x0a'+'🕐\x20最近一次：\x0a'+(_0x8523f7(0x3a2)+_0x434c02+'\x0a')+(_0x8523f7(0xd4c)+(_0x45a7ca[_0x8523f7(0x888)]||'未知')+'\x0a')+(_0x8523f7(0x1c7)+_0x45a7ca[_0x8523f7(0xcdb)]+'\x0a')+(_0x8523f7(0x3f8)+_0x45a7ca[_0x8523f7(0x8c1)]+'\x0a')+(_0x8523f7(0xa76)+_0x45a7ca[_0x8523f7(0x564)]);_0x13215d(_0x51c2e5);}),_0x243ba8[_0x8dde82(0x3a0)](_0x8dde82(0xc31),_0xd54544=>{const _0x3ebb8b=_0x8dde82;if(_0x3ebb8b(0x9d7)!==_0x3ebb8b(0xde0)){if(_0xd54544[_0x3ebb8b(0xb84)]===_0x3ebb8b(0x2ac)&&!_0xd54544[_0x3ebb8b(0x2e5)]){if(_0x3ebb8b(0x497)!==_0x3ebb8b(0x937))_0xd54544[_0x3ebb8b(0xc7a)](),_0x54ec5c();else{_0x4878c8[_0x3ebb8b(0xca6)](_0x3ebb8b(0x3bd),_0x4e28a9[_0x3ebb8b(0x8ac)]);try{_0x43c1ec=_0x302fb5(_0x22ea1d);if(!_0x42ec0e)throw new _0x4cb694(_0x3ebb8b(0x644));_0x2e6384['log'](_0x3ebb8b(0xb70));}catch(_0x34b081){throw _0x4b3b2f;}}}}else{if(!_0x506e59)return;const _0x15bcf2=_0x30ddc6(_0xf6cf1d[_0x3ebb8b(0x1d6)](_0x3ebb8b(0x2cb))['value']),_0xa648dc=_0x5a71b0(_0x343295['getElementById'](_0x3ebb8b(0xed0))[_0x3ebb8b(0xee2)]),_0x186dad=_0x51263f(_0x19dc54[_0x3ebb8b(0x1d6)]('livestream-sprite-slider-scale')[_0x3ebb8b(0xee2)])/0x64,_0x20a927=_0x36729b['getElementById'](_0x3ebb8b(0xb02));_0x20a927&&(_0x20a927['style']['height']=0x55*_0x186dad+'%',_0x20a927['style'][_0x3ebb8b(0x429)]=0x55*_0x186dad+'%',_0x20a927[_0x3ebb8b(0x329)][_0x3ebb8b(0x984)]=_0x15bcf2+'%',_0x20a927[_0x3ebb8b(0x329)]['top']=_0xa648dc+'%',_0x20a927['style']['transform']=_0x3ebb8b(0xcc4));}});const _0x42275a=()=>_0x28d8a9[_0x8dde82(0x555)][_0x8dde82(0x9ad)](_0x8dde82(0x36e));_0x3a0d53[_0x8dde82(0x3a0)]('click',_0x42275a),_0x4669a[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x42275a),_0x2b380e[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x210c1e=_0x8dde82;'VbEAB'!==_0x210c1e(0x190)?(_0x42275a(),_0x4302de()):_0x103690(_0x118d74);}),_0x10b35d[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{_0x42275a(),_0x3ff904();}),_0xcf2231[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x1ec669=_0x8dde82;_0x137a40('chat',_0x1ec669(0x4f5)),_0x1bc603(![]);}),_0x41c651[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x1d7a90),_0x5029da['addEventListener']('click',()=>{const _0x4bc07a=_0x8dde82;_0x4bc07a(0xac2)===_0x4bc07a(0xac2)?(_0x5527f8[_0x4bc07a(0x555)]['toggle'](_0x4bc07a(0x36e)),_0x5527f8[_0x4bc07a(0x555)][_0x4bc07a(0xcbc)](_0x4bc07a(0x36e))&&(_0x2d0aeb['scrollTop']=_0x2d0aeb[_0x4bc07a(0xc0c)])):_0x236555=_0x2c81a6[_0x4bc07a(0xc44)](_0x5c52db[_0x4bc07a(0x443)](_0x1fa7c1)||'{}');}),_0x472785[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x1f44b0[_0x8dde82(0x288)]());const _0x50a215=document[_0x8dde82(0x1d6)](_0x8dde82(0xd32));_0x1f44b0[_0x8dde82(0x3a0)]('change',_0x570869),_0x50a215[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x6c6592);const _0x2862a1=document['getElementById'](_0x8dde82(0x5bf)),_0xab83fe=document[_0x8dde82(0x1d6)](_0x8dde82(0x1f0)),_0x31c79c=document[_0x8dde82(0x1d6)]('profile-textarea'),_0x30ed52=document['getElementById']('close-profile-button'),_0x42e289=document[_0x8dde82(0x1d6)](_0x8dde82(0x4ef)),_0x4f1cf9=document['getElementById'](_0x8dde82(0x13e)),_0x5de3fd=document[_0x8dde82(0x1d6)](_0x8dde82(0xe6f)),_0x45d113=document[_0x8dde82(0x1d6)](_0x8dde82(0xed1));_0x2862a1&&_0x2862a1[_0x8dde82(0x3a0)]('click',async()=>{const _0xecca51=_0x8dde82,_0x50b41d=_0x1d801f();if(!_0x50b41d||_0x50b41d[_0xecca51(0x8c7)]!=='private'){_0x21d6ce(_0xecca51(0x779));return;}const _0x2237f6=_0x50b41d['participantIds'][0x0],_0x4b2254=_0x5844c7(_0x2237f6);if(!_0x4b2254)return;try{if('iJsiX'===_0xecca51(0x8cc))_0x29403a[_0xecca51(0x27f)](_0xecca51(0xe94),_0xd022ff);else{_0x31c79c[_0xecca51(0xee2)]='正在读取档案...',_0xab83fe[_0xecca51(0x555)][_0xecca51(0x1cd)](_0xecca51(0x36e)),_0x45d113[_0xecca51(0x101)]=_0x4b2254[_0xecca51(0xb95)]+_0xecca51(0x1d3);const _0x42927c=_0xecca51(0xb5c)+_0x2237f6,{value:_0x9647da}=await Capacitor['Plugins']['Preferences']['get']({'key':_0x42927c});if(_0x9647da){if(_0xecca51(0x44f)==='dIzHJ'){const _0x1f2f6f=JSON['parse'](_0x9647da),_0x2ad116=JSON['stringify'](_0x1f2f6f,null,0x2);_0x31c79c[_0xecca51(0xee2)]=_0x2ad116;}else{const _0x1901d5=_0x3b7303[_0xecca51(0x1d6)](_0x321da3);if(!_0x1901d5)return;if(_0x5c7f13['coverId'])_0x369e24(_0x2dee48[_0xecca51(0x6a3)])[_0xecca51(0x94f)](_0x2cd54e=>{const _0x33d390=_0xecca51;if(_0x2cd54e)_0x1901d5[_0x33d390(0xcab)]=_0x52a075[_0x33d390(0x21c)](_0x2cd54e);});else _0x4a98c7[_0xecca51(0x520)]&&(_0x1901d5['src']=_0x2c6a7e['coverUrl']);}}else _0x31c79c[_0xecca51(0xee2)]='该角色还没有形成对你的印象。\x0a\x0a💡\x20提示：\x0a-\x20发送20条消息后会自动触发AI深度分析\x0a-\x20或者点击下方\x22立即精炼\x22按钮手动触发（即使没满20条）';}}catch(_0x209452){console[_0xecca51(0x27f)](_0xecca51(0xbd8),_0x209452),_0x31c79c['value']=_0xecca51(0x680)+_0x209452['message'];}});_0x30ed52&&(_0x8dde82(0xc83)!==_0x8dde82(0x188)?_0x30ed52[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x30612a=_0x8dde82;_0xdfbfac['pendingProfileRefinement']?'OkaKG'!==_0x30612a(0xcf5)?_0x182bcf():(_0x32977b[_0x30612a(0xcab)]=_0x557178[_0x30612a(0xb21)],_0x21db0c['play'](),_0x17def2['textContent']='❚❚'):_0xab83fe[_0x30612a(0x555)][_0x30612a(0x9ad)](_0x30612a(0x36e));}):(_0x89f449(_0x8dde82(0x775)),_0x5edc6a(()=>_0x42d2c5[_0x8dde82(0x28d)](),0x5dc)));_0x5de3fd&&_0x5de3fd[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x9a304b=_0x8dde82;_0xdfbfac[_0x9a304b(0x67f)]?_0x182bcf():_0xab83fe[_0x9a304b(0x555)][_0x9a304b(0x9ad)](_0x9a304b(0x36e));});_0x42e289&&('nSErZ'!==_0x8dde82(0xe64)?(_0x1b43e8[_0x8dde82(0x27f)](_0x8dde82(0xf0c),_0x40cbb5),_0x2b299c(_0x8dde82(0x9cf))):_0x42e289['addEventListener']('click',()=>{const _0x159a36=_0x8dde82;_0x31c79c[_0x159a36(0xe3a)](),navigator[_0x159a36(0xab7)][_0x159a36(0x57d)](_0x31c79c[_0x159a36(0xee2)])[_0x159a36(0x94f)](()=>{const _0x55de30=_0x159a36;_0x21d6ce(_0x55de30(0xe19));})['catch'](_0x4fd4dd=>{const _0x6c140f=_0x159a36;_0x21d6ce(_0x6c140f(0xa59));});}));_0x4f1cf9&&_0x4f1cf9['addEventListener'](_0x8dde82(0x288),async()=>{const _0x3806a3=_0x8dde82,_0x211940=_0x1d801f();if(!_0x211940||_0x211940[_0x3806a3(0x8c7)]!==_0x3806a3(0xcef))return;const _0x3eac10=_0x211940[_0x3806a3(0x41b)][0x0],_0x162276=_0x5844c7(_0x3eac10),_0x36ed5e=await _0x13215d('确定要重置'+(_0x162276?.[_0x3806a3(0xb95)]||_0x3806a3(0x569))+_0x3806a3(0x2aa));if(_0x36ed5e)try{const _0x17e4f4='nuomi_profile_tiaoTiao_'+_0x3eac10,_0x5e92b9='nuomi_message_buffer_'+_0x3eac10;await Capacitor[_0x3806a3(0x248)][_0x3806a3(0x768)]['remove']({'key':_0x17e4f4}),await Capacitor[_0x3806a3(0x248)][_0x3806a3(0x768)][_0x3806a3(0x9ad)]({'key':_0x5e92b9}),_0x21d6ce(_0x3806a3(0x65e)),_0xab83fe[_0x3806a3(0x555)][_0x3806a3(0x9ad)](_0x3806a3(0x36e));}catch(_0x5565fd){_0x21d6ce('重置失败:\x20'+_0x5565fd[_0x3806a3(0x8ac)]);}});const _0x47f872=document['getElementById'](_0x8dde82(0x793));_0x47f872&&_0x47f872[_0x8dde82(0x3a0)]('click',_0x182bcf);const _0x2c31d3=document[_0x8dde82(0x1d6)]('retry-refinement-btn');if(_0x2c31d3){if(_0x8dde82(0x3ca)==='zTJTH')_0x2c31d3[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x4de8f5);else{const _0x17b5af=_0x4dbe7d[_0x8dde82(0xded)]['map'](_0x28510d=>{const _0xf1fdec=_0x8dde82,_0x1de095=_0x4da21f(_0x28510d[_0xf1fdec(0x6b3)])?.[_0xf1fdec(0xb95)]||'未知';return'<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>'+_0x1de095+_0xf1fdec(0x9c8)+_0x28510d[_0xf1fdec(0xee)]+_0xf1fdec(0x396);})[_0x8dde82(0xd9a)]('');_0x14f416=_0x8dde82(0xda7)+_0x17b5af+'</div>';}}_0x32077e[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x3d4b8c),_0x117673[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x5b8657),_0x424869[_0x8dde82(0x3a0)]('click',_0x5886de),_0x2a7838[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0xb80d09),_0x35cdb8[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x2226cd=_0x8dde82,_0x3df4cf=_0x2b706d['value'];if(!_0x3df4cf)return;const _0x3e222e=_0x5844c7(_0x3df4cf);if(!_0x3e222e)return;const _0x431b00=await _0x13215d('确定要删除角色“'+_0x3e222e['name']+_0x2226cd(0xdb6));_0x431b00&&(_0x261fbb(_0x3df4cf),_0x21d6ce('角色“'+_0x3e222e[_0x2226cd(0xb95)]+_0x2226cd(0x3e6)),_0x137a40(_0x2226cd(0xa77),'characterEdit'),_0x1bc603(![]));}),_0x13e9da[_0x8dde82(0x3a0)]('input',()=>{const _0x387790=_0x8dde82;if('Ffzmj'!==_0x387790(0x810)){const _0x5608ce=_0x13e9da[_0x387790(0xee2)]['trim']()[_0x387790(0xc35)](_0x296055);_0x31fc3d[_0x387790(0x2c5)]=_0x5608ce;}else _0x520b38[_0x387790(0xcab)]&&_0x31f793[_0x387790(0x329)][_0x387790(0x990)]!=='0'?(_0xd4a434[_0x387790(0x329)][_0x387790(0x990)]=0x0,_0x55ce98(()=>{const _0x5192dd=_0x387790;_0x9ae453[_0x5192dd(0xcab)]=_0x1b5e03[_0x5192dd(0x21c)](_0x289896),_0x4b2cd9[_0x5192dd(0x329)][_0x5192dd(0x990)]=0x1;},0x96)):(_0x2e6329['src']=_0x2a84b2['createObjectURL'](_0x336e9e),_0x2a5cc8[_0x387790(0x329)][_0x387790(0x990)]=0x1);});async function _0x4cc6fe(){const _0x272590=_0x8dde82,_0x2c9390=_0x13e9da[_0x272590(0xee2)][_0x272590(0xcd2)](),_0x164c09=_0x4e0a43['value'][_0x272590(0xcd2)]();if(!_0x2c9390||!_0x164c09){_0x21d6ce(_0x272590(0x3e5));return;}const _0x48da33=_0x2c9390[_0x272590(0xbe2)](/\/+$/,''),_0x4063ce=_0x48da33+'/v1/models';_0x31fc3d[_0x272590(0x2c5)]=!![],_0x31fc3d[_0x272590(0x101)]=_0x272590(0x962),_0x1b1708['classList'][_0x272590(0x9ad)](_0x272590(0x36e));try{if(_0x272590(0x7ba)!=='yGkMy')_0x1ac83b[_0x272590(0xb66)](_0x6419e7['objectStore'](_0x272590(0xaed))[_0x272590(0x2df)](_0x45ec13));else{const _0x41eeaf=await fetch(_0x4063ce,{'headers':{'Authorization':_0x272590(0x7e1)+_0x4c2894(_0x164c09)}});if(!_0x41eeaf['ok'])throw new Error('服务器错误:\x20'+_0x41eeaf[_0x272590(0x887)]);const _0x3c4c4c=await _0x41eeaf[_0x272590(0xc55)](),_0x546ff7=(_0x3c4c4c[_0x272590(0x1e0)]||_0x3c4c4c)[_0x272590(0x266)](_0x3aefb0=>_0x3aefb0['id'])['sort']();_0x546ff7[_0x272590(0x1e2)]>0x0?(_0x1b1708[_0x272590(0xa73)]='',_0x546ff7[_0x272590(0xb85)](_0x160275=>{const _0x141358=_0x272590,_0x449a6d=document[_0x141358(0x8f1)]('div');_0x449a6d['textContent']=_0x160275,_0x449a6d[_0x141358(0x3a0)](_0x141358(0x288),()=>{const _0x59a39c=_0x141358;_0x55dfe0[_0x59a39c(0xee2)]=_0x160275,_0x1b1708['classList'][_0x59a39c(0x9ad)](_0x59a39c(0x36e));}),_0x1b1708[_0x141358(0x5b8)](_0x449a6d);}),_0x1b1708[_0x272590(0x555)][_0x272590(0x1cd)]('show'),_0x21d6ce(_0x272590(0xaa3)+_0x546ff7[_0x272590(0x1e2)]+_0x272590(0x2e3))):_0x21d6ce('未找到可用模型。');}}catch(_0x485876){if(_0x272590(0xd37)===_0x272590(0xd37))_0x21d6ce(_0x272590(0xd06)+_0x485876[_0x272590(0x8ac)]+'\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1');else{const _0x394441=(_0x17c4e5-_0x5812a7)/(0x3e8*0x3c);_0x3f1813+=_0x272590(0xa13);}}finally{_0x31fc3d['disabled']=![],_0x31fc3d[_0x272590(0x101)]='获取';}}_0x31fc3d[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x10b751=>{const _0xc278da=_0x8dde82;_0x10b751[_0xc278da(0xa37)](),_0x4cc6fe();}),document[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x3c810c=>{const _0x46e192=_0x8dde82;!_0x1b1708[_0x46e192(0xcbc)](_0x3c810c[_0x46e192(0x272)])&&_0x3c810c[_0x46e192(0x272)]!==_0x55dfe0&&_0x3c810c['target']!==_0x31fc3d&&_0x1b1708['classList'][_0x46e192(0x9ad)](_0x46e192(0x36e));});async function _0x1b759b(_0x172e3c){const _0x562c15=_0x8dde82;if(_0x562c15(0xccc)===_0x562c15(0xccc))return await _0x265126(_0x172e3c,0x190,0.85);else _0x244690[_0x562c15(0x7ec)](_0x562c15(0xed5));}_0x81effc['addEventListener'](_0x8dde82(0x288),()=>_0x28c13d[_0x8dde82(0x288)]()),_0x28c13d[_0x8dde82(0x3a0)](_0x8dde82(0xef8),async _0x457fee=>{const _0x225111=_0x8dde82,_0xd2b0b5=_0x457fee[_0x225111(0x272)]['files'][0x0];if(!_0xd2b0b5)return;try{const _0x3d37af=await _0x1b759b(_0xd2b0b5),_0x5b9c9f=document[_0x225111(0x1d6)](_0x225111(0xdc5));_0x5b9c9f[_0x225111(0x329)]['backgroundImage']='url(\x27'+_0x3d37af+'\x27)',_0x5b9c9f[_0x225111(0x63f)][_0x225111(0x761)]=_0x3d37af;}catch(_0x12873e){_0x21d6ce(_0x225111(0x693)+_0x12873e['message']);}}),_0x4489b9['addEventListener'](_0x8dde82(0x288),()=>_0x5c1143[_0x8dde82(0x288)]()),_0x5c1143[_0x8dde82(0x3a0)](_0x8dde82(0xef8),async _0x571819=>{const _0x5dede2=_0x8dde82,_0xc45c23=_0x571819[_0x5dede2(0x272)][_0x5dede2(0x6d4)][0x0];if(!_0xc45c23)return;try{_0x5dede2(0xadf)!==_0x5dede2(0x16d)?_0x4489b9[_0x5dede2(0xcab)]=await _0x1b759b(_0xc45c23):_0x17fd24[_0x5dede2(0x329)]['backgroundImage']='url(\x27'+_0x177e62['createObjectURL'](_0x1c6440)+'\x27)';}catch(_0x355250){_0x21d6ce(_0x5dede2(0x693)+_0x355250[_0x5dede2(0x8ac)]);}});function _0x37fe21(){const _0x392390=_0x8dde82;if(_0x392390(0x19a)==='sdluJ'){_0xda9c6b();const _0x5b2073=_0xc39606[_0x392390(0xdb9)][_0x392390(0x76b)](_0x7e42d5=>_0x7e42d5['id']===_0x5c8b62);if(!_0x5b2073)return;_0x46d545[_0x392390(0x961)]=_0x5293b4,_0x58b466(),_0x283750['getElementById'](_0x392390(0xb00))[_0x392390(0x101)]=_0x5b2073[_0x392390(0xb95)],_0x4ed7ce(),_0x62c90b(_0x392390(0xbf0),_0x392390(0x862)),_0x1d68cd();}else{const _0x305072=document['getElementById'](_0x392390(0x292));_0x305072['innerHTML']='',_0x1c523d=![];const _0x75439=document['createElement']('div');_0x75439['id']=_0x392390(0x62b),_0x75439['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20',_0x305072['appendChild'](_0x75439);const _0x148d06=document[_0x392390(0x1d6)]('sticker-manage-btn'),_0xf1bcb8=document[_0x392390(0x1d6)](_0x392390(0xef9)),_0x462146=document[_0x392390(0x8f1)](_0x392390(0xce2));_0x462146[_0x392390(0x329)]['display']=_0x392390(0x504),_0x462146[_0x392390(0x329)]['gridTemplateColumns']='repeat(auto-fill,\x20minmax(60px,\x201fr))',_0x462146[_0x392390(0x329)][_0x392390(0x22b)]=_0x392390(0xa78),_0x462146[_0x392390(0x329)][_0x392390(0xe23)]='10px',_0x462146['style'][_0x392390(0xc25)]=_0x392390(0xd15),_0x462146[_0x392390(0x329)][_0x392390(0x2b2)]=_0x392390(0x6b7),_0x305072[_0x392390(0x5b8)](_0x462146);const _0x4ae2d6=_0x376b0d();_0x4ae2d6[_0x392390(0xb85)](_0x1790f5=>{const _0xbed84=_0x392390,_0x4c6fbb=document['createElement'](_0xbed84(0xce2));_0x4c6fbb[_0xbed84(0x213)]=_0xbed84(0x897),_0x4c6fbb[_0xbed84(0x63f)]['stickerName']=_0x1790f5[_0xbed84(0xb95)];const _0x326585=document[_0xbed84(0x8f1)](_0xbed84(0x971));_0x326585[_0xbed84(0xcab)]=_0x1790f5['url'],_0x326585['loading']=_0xbed84(0xb78),_0x326585['title']=_0x1790f5[_0xbed84(0xb95)],_0x326585[_0xbed84(0x213)]=_0xbed84(0x828),_0x4c6fbb['appendChild'](_0x326585),_0x462146['appendChild'](_0x4c6fbb),_0x4c6fbb['addEventListener']('click',()=>{const _0x22e1ba=_0xbed84;if(_0x1c523d){if(_0x22e1ba(0xe99)===_0x22e1ba(0x785)){const _0x54fb97=_0x4b3aa3(_0x11c2bf['dataset'][_0x22e1ba(0x47a)],0xa);!_0x615255(_0x54fb97)&&_0x21cab3(_0x54fb97);}else{_0x4c6fbb[_0x22e1ba(0x555)][_0x22e1ba(0x5be)]('selected');const _0x286390=_0x462146['querySelector'](_0x22e1ba(0xaa5));_0xf1bcb8[_0x22e1ba(0x555)][_0x22e1ba(0x5be)](_0x22e1ba(0x691),!!_0x286390);}}else _0x4ec423(_0x1790f5);});}),_0x148d06[_0x392390(0x3a0)](_0x392390(0x288),()=>{const _0xe7af02=_0x392390;_0x1c523d=!_0x1c523d,_0x305072['classList'][_0xe7af02(0x5be)](_0xe7af02(0xa8e),_0x1c523d),_0x148d06['textContent']=_0x1c523d?'完成':'管理',_0xf1bcb8[_0xe7af02(0x329)][_0xe7af02(0xc66)]=_0x1c523d?_0xe7af02(0xc38):_0xe7af02(0x338),!_0x1c523d&&(_0x462146[_0xe7af02(0x7af)](_0xe7af02(0xaa5))['forEach'](_0x5117ae=>_0x5117ae['classList'][_0xe7af02(0x9ad)](_0xe7af02(0xd8f))),_0xf1bcb8['classList'][_0xe7af02(0x9ad)](_0xe7af02(0x691)));}),_0xf1bcb8[_0x392390(0x3a0)](_0x392390(0x288),async()=>{const _0x39b662=_0x392390,_0x2a32ed=_0x462146['querySelectorAll'](_0x39b662(0xaa5));if(_0x2a32ed[_0x39b662(0x1e2)]===0x0)return;const _0x22f2d0=await _0x13215d(_0x39b662(0xcea)+_0x2a32ed[_0x39b662(0x1e2)]+_0x39b662(0xb04));if(_0x22f2d0){if(_0x39b662(0x9c9)!==_0x39b662(0xe9a)){const _0x48b714=JSON['parse'](localStorage[_0x39b662(0x443)](_0x39b662(0x169))||'[]');_0x2a32ed[_0x39b662(0xb85)](_0x56c32c=>{const _0x4c2f6d=_0x39b662,_0x387f2e=_0x56c32c[_0x4c2f6d(0x63f)][_0x4c2f6d(0x922)];!_0x48b714[_0x4c2f6d(0xc35)](_0x387f2e)&&_0x48b714[_0x4c2f6d(0xb66)](_0x387f2e);}),localStorage[_0x39b662(0xa54)]('deletedStickers',JSON[_0x39b662(0xea5)](_0x48b714)),_0x1c523d=![],_0x37fe21(),_0x21d6ce('已放逐。');}else{_0x409e66(_0x39b662(0x6be));return;}}}),_0xf1bcb8[_0x392390(0x329)][_0x392390(0xc66)]=_0x392390(0x338);const _0x1894c2=document[_0x392390(0x1d6)]('chat-sticker-button'),_0x413730=new MutationObserver(()=>{const _0x50e95e=_0x392390,_0x5430ef=_0x305072[_0x50e95e(0x555)][_0x50e95e(0xcbc)]('show');_0x75439['classList']['toggle'](_0x50e95e(0xce9),_0x5430ef);if(!_0x5430ef){if(_0x1c523d){if('xgbiH'===_0x50e95e(0x741))_0x148d06['click']();else{const _0x430538=_0x324ffa[_0x50e95e(0x1d6)](_0x50e95e(0x98d)),_0x5868a2=_0x8f8716[_0x50e95e(0x1d6)]('modal-text'),_0x219f25=_0x311b98[_0x50e95e(0x1d6)](_0x50e95e(0xc94)),_0x45ef6b=_0x4da9b3[_0x50e95e(0x1d6)]('modal-cancel'),_0x19706a=_0x3efc17[_0x50e95e(0x1d6)]('modal-mask');_0x5868a2[_0x50e95e(0x101)]=_0x21f87e,_0x430538[_0x50e95e(0x329)][_0x50e95e(0xc66)]=_0x50e95e(0xe12);const _0x5c47cf=_0x1b13c6=>{const _0x4c4649=_0x50e95e;_0x430538['style'][_0x4c4649(0xc66)]='none',_0x219f25[_0x4c4649(0x4a1)]=_0x45ef6b[_0x4c4649(0x4a1)]=_0x19706a[_0x4c4649(0x4a1)]=null,_0x252338['removeEventListener']('keydown',_0x276e49),_0x134fbb(_0x1b13c6);},_0x276e49=_0x482a7f=>{const _0x5e69c7=_0x50e95e;if(_0x482a7f[_0x5e69c7(0xb84)]===_0x5e69c7(0x309))_0x5c47cf(![]);if(_0x482a7f[_0x5e69c7(0xb84)]===_0x5e69c7(0x2ac))_0x5c47cf(!![]);};_0x219f25[_0x50e95e(0x4a1)]=()=>_0x5c47cf(!![]),_0x45ef6b[_0x50e95e(0x4a1)]=()=>_0x5c47cf(![]),_0x19706a[_0x50e95e(0x4a1)]=()=>_0x5c47cf(![]),_0x80a45e['addEventListener'](_0x50e95e(0xc31),_0x276e49);}}}});_0x413730['observe'](_0x305072,{'attributes':!![],'attributeFilter':[_0x392390(0xb26)]});}}function _0x376b0d(){const _0x32d164=_0x8dde82,_0x2c0f7d=JSON[_0x32d164(0xc44)](localStorage[_0x32d164(0x443)](_0x32d164(0x169))||'[]');if(_0x2c0f7d[_0x32d164(0x1e2)]===0x0)return _0x1e8db1;return _0x1e8db1[_0x32d164(0xeb3)](_0x4728da=>!_0x2c0f7d['includes'](_0x4728da[_0x32d164(0xb95)]));}async function _0x45e2a4(_0x14b6f6){const _0x5227a5=_0x8dde82,_0x3db8f6=await _0x13215d(_0x5227a5(0x2bd));if(!_0x3db8f6)return;const _0x38ab3d=_0xdfbfac[_0x5227a5(0x8b2)][_0x5227a5(0xd30)](_0x435592=>_0x435592['id']===_0x14b6f6);_0x38ab3d>-0x1&&(_0xdfbfac[_0x5227a5(0x8b2)]['splice'](_0x38ab3d,0x1),_0x31622b(),_0x4920a7(),_0x34ff24(),_0x26221e(),_0x21d6ce('已经删掉了。'));}let _0x34682f=null;function _0x2e43db(_0x2ea363){const _0x2fca95=_0x8dde82;if(_0x34682f)clearTimeout(_0x34682f);const _0x309f79=_0x2ea363[_0x2fca95(0x272)]['closest'](_0x2fca95(0xbce));if(!_0x309f79)return;const _0x284e60=_0x309f79[_0x2fca95(0x63f)]['id'];if(!_0x284e60)return;const _0x371479=()=>{_0x34682f=setTimeout(()=>{const _0x36abbe=_0x4f70;if('qNnyg'!=='qNnyg')_0x26bd68[_0x36abbe(0x27f)](_0x36abbe(0xb35),_0x56f2c7),_0xfd5e0d(_0x36abbe(0x980)+_0x93cc0e[_0x36abbe(0x8ac)]);else{if(_0x2ea363['type']===_0x36abbe(0xa6c))_0x2ea363[_0x36abbe(0xc7a)]();_0x45e2a4(_0x284e60);}},0x320);},_0x3a9eef=()=>{if(_0x34682f)clearTimeout(_0x34682f);};document[_0x2fca95(0x3a0)](_0x2fca95(0xc67),_0x3a9eef,{'once':!![]}),document[_0x2fca95(0x3a0)](_0x2fca95(0xb8b),_0x3a9eef,{'once':!![]}),document[_0x2fca95(0x3a0)]('touchcancel',_0x3a9eef,{'once':!![]}),document[_0x2fca95(0x3a0)](_0x2fca95(0x1f3),_0x3a9eef,{'once':!![]}),_0x371479();}function _0xbf1baf(_0x35079c){const _0x54f2de=_0x8dde82,_0x126c2c=_0xdfbfac[_0x54f2de(0xc1b)]['find'](_0x564b45=>_0x564b45[_0x54f2de(0x41b)]['includes'](_0x35079c));if(!_0x126c2c)return'';const _0xf957b3=_0x58761c(_0x126c2c['id']),_0x1af49d=_0xdfbfac[_0x54f2de(0x8b2)][_0x54f2de(0xeb3)](_0x44caed=>_0x44caed[_0x54f2de(0x748)]===_0xf957b3['id']||!_0x44caed['userId']);if(_0x1af49d['length']===0x0){if('IFYmF'!=='jiRYP')return'';else _0x48c2d5[_0x54f2de(0x5ee)]&&(_0x489b36[_0x54f2de(0x5ee)]=_0x35ab03[_0x54f2de(0x5ee)]['filter'](_0x37ccd5=>_0x37ccd5!==_0x2c3edb));}const _0x530ba8=_0x1af49d['map'](_0x59bc66=>{const _0x408565=_0x54f2de,_0x57e485=_0x59bc66['type']===_0x408565(0x992)?_0x408565(0x65f):'待办';return _0x408565(0x1c9)+_0x57e485+']\x20'+_0x59bc66[_0x408565(0xdc9)]+':\x20'+_0x59bc66['content'];})[_0x54f2de(0xd9a)]('\x0a');return _0x54f2de(0x5a6)+_0xf957b3[_0x54f2de(0xb95)]+_0x54f2de(0x239)+_0x530ba8;}let _0x2cf1dd={'currentDate':new Date(),'selectedDate':_0x319f8d()};function _0x3048f2(){const _0x5bdc4c=_0x8dde82;document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x932))[_0x5bdc4c(0x3a0)]('click',()=>{const _0x187ac2=_0x5bdc4c;_0x4920a7(),_0x137a40(_0x187ac2(0x48e),'home');}),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x1b1))['addEventListener'](_0x5bdc4c(0x288),()=>_0x137a40(_0x5bdc4c(0x410),_0x5bdc4c(0x48e))),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x4bc))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>{const _0x3ed690=_0x5bdc4c;_0x2cf1dd[_0x3ed690(0x167)][_0x3ed690(0x154)](_0x2cf1dd['currentDate'][_0x3ed690(0xb0a)]()-0x1),_0x4920a7();}),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0xeb5))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>{const _0x34a59c=_0x5bdc4c;_0x2cf1dd[_0x34a59c(0x167)]['setMonth'](_0x2cf1dd[_0x34a59c(0x167)][_0x34a59c(0xb0a)]()+0x1),_0x4920a7();}),document['getElementById'](_0x5bdc4c(0x141))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>{const _0x4b7d12=_0x5bdc4c;if(_0x4b7d12(0x293)===_0x4b7d12(0xe0e))return _0xcb578d+_0x4b7d12(0xbcb);else _0x2cf1dd[_0x4b7d12(0x167)]=new Date(),_0x2cf1dd[_0x4b7d12(0x4f4)]=_0x319f8d(),_0x4920a7();}),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x60d))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>{const _0x3b54c9=_0x5bdc4c;_0x265314(_0x2cf1dd[_0x3b54c9(0x4f4)]);}),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x6d5))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),_0x26ea0b),document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0xc9f))[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x8ca))[_0x5bdc4c(0x555)][_0x5bdc4c(0x9ad)](_0x5bdc4c(0x36e))),document[_0x5bdc4c(0x1d6)]('add-event-backdrop')[_0x5bdc4c(0x3a0)](_0x5bdc4c(0x288),()=>document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x8ca))[_0x5bdc4c(0x555)]['remove'](_0x5bdc4c(0x36e)));const _0x379309=document[_0x5bdc4c(0x1d6)](_0x5bdc4c(0x9a3));_0x379309['addEventListener'](_0x5bdc4c(0x5c9),_0x2e43db),_0x379309[_0x5bdc4c(0x3a0)](_0x5bdc4c(0xa6c),_0x2e43db,{'passive':![]});}function _0x4920a7(){const _0x52153f=_0x8dde82;if(_0x52153f(0x39c)!==_0x52153f(0x39c))_0x146a40();else{const _0x422df9=_0x2cf1dd['currentDate'][_0x52153f(0x736)](),_0x35aceb=_0x2cf1dd[_0x52153f(0x167)][_0x52153f(0xb0a)]();document[_0x52153f(0x1d6)]('calendar-header-title')[_0x52153f(0x101)]=_0x422df9+'年\x20'+(_0x35aceb+0x1)+'月',_0x4888a9(_0x422df9,_0x35aceb),_0x4a0027(_0x2cf1dd[_0x52153f(0x4f4)]);}}function _0x26221e(){const _0x26d0d8=_0x8dde82;if('LAGIq'===_0x26d0d8(0x516)){const _0x442ed2=document[_0x26d0d8(0x1d6)](_0x26d0d8(0xccb));if(!_0x442ed2)return;const _0x7ff304=_0x319f8d(),_0x4039e2=_0xdfbfac[_0x26d0d8(0x8b2)][_0x26d0d8(0xeb3)](_0x2588c6=>_0x2588c6[_0x26d0d8(0xdc9)]===_0x7ff304&&_0x2588c6[_0x26d0d8(0x8c7)]==='todo');_0x442ed2['innerHTML']='',_0x4039e2[_0x26d0d8(0x1e2)]>0x0?_0x4039e2[_0x26d0d8(0xb85)](_0x15c615=>{const _0x27ddf6=_0x26d0d8;if(_0x27ddf6(0xe29)!==_0x27ddf6(0xe29))_0x110a8b(),_0x2d269b[_0x27ddf6(0x7ec)](_0x27ddf6(0xc8e));else{const _0x2000c5=document[_0x27ddf6(0x8f1)](_0x27ddf6(0xce2));_0x2000c5[_0x27ddf6(0x213)]='todo-item-small',_0x2000c5[_0x27ddf6(0x101)]=_0x15c615['content'],_0x442ed2[_0x27ddf6(0x5b8)](_0x2000c5);}}):_0x442ed2[_0x26d0d8(0xa73)]=_0x26d0d8(0x867);}else _0x39e803[_0x431a4f[_0x41be06]]=_0x5a2873;}function _0x4888a9(_0x4afb65,_0x2a075f){const _0x261284=_0x8dde82,_0x54e6d0=document['getElementById'](_0x261284(0x4ca));_0x54e6d0[_0x261284(0xa73)]='';const _0x5acda8=new Date(_0x4afb65,_0x2a075f,0x1)[_0x261284(0xab8)](),_0x546efd=new Date(_0x4afb65,_0x2a075f+0x1,0x0)[_0x261284(0x55b)](),_0x5d0cda=_0x319f8d();for(let _0x142494=0x0;_0x142494<_0x5acda8;_0x142494++){_0x54e6d0[_0x261284(0x5b8)](document['createElement']('div'));}for(let _0x4257aa=0x1;_0x4257aa<=_0x546efd;_0x4257aa++){if('NTvZW'===_0x261284(0x653)){_0x276308=_0x29aee1();const _0x4bf2dd=_0x2e9c81[_0x261284(0x1d6)](_0x261284(0x605))[_0x261284(0x101)];_0x2fe470=_0x4bf2dd||_0x261284(0x3ac);}else{const _0x344f0a=document[_0x261284(0x8f1)]('div');_0x344f0a[_0x261284(0x213)]=_0x261284(0xa50);const _0x20e222=_0x4afb65+'-'+String(_0x2a075f+0x1)['padStart'](0x2,'0')+'-'+String(_0x4257aa)[_0x261284(0x4b9)](0x2,'0');if(_0x20e222===_0x5d0cda)_0x344f0a[_0x261284(0x555)][_0x261284(0x1cd)](_0x261284(0x479));if(_0x20e222===_0x2cf1dd[_0x261284(0x4f4)])_0x344f0a[_0x261284(0x555)][_0x261284(0x1cd)](_0x261284(0x9b3));const _0x361f13=document[_0x261284(0x8f1)](_0x261284(0x390));_0x361f13[_0x261284(0x213)]='day-number',_0x361f13[_0x261284(0x101)]=_0x4257aa,_0x344f0a[_0x261284(0x5b8)](_0x361f13);const _0x19ad0b=_0xdfbfac['calendarEvents'][_0x261284(0xeb3)](_0x145e8b=>_0x145e8b[_0x261284(0xdc9)]===_0x20e222);if(_0x19ad0b[_0x261284(0x1e2)]>0x0){const _0x37390f=document[_0x261284(0x8f1)](_0x261284(0xce2));_0x37390f[_0x261284(0x213)]=_0x261284(0x312),_0x344f0a[_0x261284(0x5b8)](_0x37390f);}_0x344f0a[_0x261284(0x3a0)]('click',()=>{const _0x33b6de=_0x261284;_0x2cf1dd[_0x33b6de(0x4f4)]=_0x20e222,_0x4920a7();}),_0x54e6d0['appendChild'](_0x344f0a);}}}function _0x4a0027(_0x2e8a63){const _0x26398a=_0x8dde82,_0x591418=document[_0x26398a(0x1d6)](_0x26398a(0x9a3)),_0x40e56a=document[_0x26398a(0x1d6)](_0x26398a(0xc58));_0x591418[_0x26398a(0xa73)]='';const _0x2aae0a=new Date(_0x2e8a63+_0x26398a(0xb2b));_0x40e56a[_0x26398a(0x101)]=_0x2aae0a[_0x26398a(0xb0a)]()+0x1+'月'+_0x2aae0a[_0x26398a(0x55b)]()+'日';const _0x40e685=_0xdfbfac['calendarEvents'][_0x26398a(0xeb3)](_0x4fc474=>_0x4fc474['date']===_0x2e8a63);if(_0x40e685[_0x26398a(0x1e2)]===0x0){if(_0x26398a(0xe61)==='CIZFl'){_0x3335c2(_0x26398a(0xd1b));return;}else{_0x591418[_0x26398a(0xa73)]=_0x26398a(0xee1);return;}}_0x40e685['forEach'](_0xa945cb=>{const _0x5326cf=_0x26398a,_0x4f2bb8=document[_0x5326cf(0x8f1)]('div');_0x4f2bb8[_0x5326cf(0x213)]=_0xa945cb[_0x5326cf(0x8c7)]==='important'?'important-day-item':_0x5326cf(0xeb7),_0x4f2bb8[_0x5326cf(0x101)]=_0xa945cb[_0x5326cf(0xee)],_0x4f2bb8['dataset']['id']=_0xa945cb['id'],_0x591418[_0x5326cf(0x5b8)](_0x4f2bb8);});}function _0x265314(_0x1b13e9){const _0x489a58=_0x8dde82;document[_0x489a58(0x1d6)](_0x489a58(0xe31))['textContent']='为\x20'+_0x1b13e9+_0x489a58(0x1ba),document[_0x489a58(0x1d6)]('event-content-input')[_0x489a58(0xee2)]='',document[_0x489a58(0x1d6)](_0x489a58(0x974))[_0x489a58(0xefd)]=!![],document[_0x489a58(0x1d6)](_0x489a58(0x8ca))[_0x489a58(0x555)][_0x489a58(0x1cd)](_0x489a58(0x36e)),document[_0x489a58(0x1d6)]('event-content-input')['focus']();}function _0x26ea0b(){const _0x42944f=_0x8dde82;if(_0x42944f(0xe46)===_0x42944f(0x8ad)){_0x32e120(_0x42944f(0x3a5));return;}else{const _0x3f7a05=document['getElementById'](_0x42944f(0x781))['value'][_0x42944f(0xcd2)](),_0x2a04e3=document[_0x42944f(0xb6c)](_0x42944f(0xc53))['value'];if(!_0x3f7a05){_0x21d6ce('内容不能为空！');return;}const _0x50df7f=_0xdfbfac['userProfiles'][_0x42944f(0x76b)](_0x327bec=>_0x327bec['id']===_0xdfbfac[_0x42944f(0xb83)]);if(!_0x50df7f){_0x21d6ce(_0x42944f(0x568));return;}_0xdfbfac[_0x42944f(0x8b2)]['push']({'id':'event_'+Date[_0x42944f(0x4a2)](),'date':_0x2cf1dd['selectedDate'],'type':_0x2a04e3,'content':_0x3f7a05,'userId':_0x50df7f['id']}),_0x31622b(),_0x4920a7(),_0x34ff24(),_0x26221e(),document[_0x42944f(0x1d6)](_0x42944f(0x8ca))[_0x42944f(0x555)]['remove']('show');}}function _0x34ff24(){const _0x4c83a0=_0x8dde82;if(_0x4c83a0(0x78d)===_0x4c83a0(0xd35))_0x4334f8=_0x9ae5b0[_0x4c83a0(0xbb9)]||'';else{const _0x10c698=document[_0x4c83a0(0x1d6)](_0x4c83a0(0x876)),_0x47e3bc=document[_0x4c83a0(0x1d6)](_0x4c83a0(0x846)),_0x15e928=new Date();_0x15e928['setHours'](0x0,0x0,0x0,0x0);const _0xaa733e=_0xdfbfac[_0x4c83a0(0x8b2)]['filter'](_0x2ffc88=>_0x2ffc88[_0x4c83a0(0x8c7)]===_0x4c83a0(0x992)&&new Date(_0x2ffc88[_0x4c83a0(0xdc9)]+'T00:00:00')>=_0x15e928)[_0x4c83a0(0x6d9)]((_0x3ca04b,_0x1823c8)=>new Date(_0x3ca04b[_0x4c83a0(0xdc9)])-new Date(_0x1823c8[_0x4c83a0(0xdc9)]));if(_0xaa733e[_0x4c83a0(0x1e2)]>0x0){const _0x3aedaa=_0xaa733e[0x0],_0x4adcae=new Date(_0x3aedaa[_0x4c83a0(0xdc9)]+_0x4c83a0(0xb2b)),_0x1e7ed5=_0x4adcae-_0x15e928,_0x282f65=Math[_0x4c83a0(0x1fa)](_0x1e7ed5/(0x3e8*0x3c*0x3c*0x18));_0x10c698[_0x4c83a0(0x101)]=_0x4c83a0(0x422)+_0x3aedaa[_0x4c83a0(0xee)]+'」',_0x47e3bc[_0x4c83a0(0xa73)]=_0x4c83a0(0xac9)+_0x282f65+_0x4c83a0(0x4e2);}else _0x10c698[_0x4c83a0(0x101)]=_0x4c83a0(0xa1b),_0x47e3bc['innerHTML']=_0x4c83a0(0x5c8);}}function _0x1da56f(){const _0x406f17=_0x8dde82;if(_0x406f17(0x2a8)!==_0x406f17(0xb97)){const _0x5a62c1=document[_0x406f17(0x1d6)](_0x406f17(0x50f));_0x5a62c1[_0x406f17(0xa73)]='';if(_0xdfbfac[_0x406f17(0xc37)]['length']===0x0){_0x5a62c1[_0x406f17(0xa73)]=_0x406f17(0x48f);return;}_0xdfbfac[_0x406f17(0xc37)]['forEach'](_0x3573b8=>{const _0x65ae37=_0x406f17,_0x460d9f=document[_0x65ae37(0x8f1)](_0x65ae37(0xce2));_0x460d9f[_0x65ae37(0x213)]='world-book-item',_0x460d9f['dataset']['id']=_0x3573b8['id'];const _0x37c0b9=_0x3573b8['id']===_0xdfbfac['activeUserProfileId']?_0x65ae37(0xd68):'';_0x460d9f[_0x65ae37(0xa73)]=_0x65ae37(0xa5e)+(_0x3573b8[_0x65ae37(0x584)]||_0x284b7c)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3573b8[_0x65ae37(0xb95)]+_0x37c0b9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x3573b8[_0x65ae37(0x79b)][_0x65ae37(0x3b1)](0x0,0x64)+_0x65ae37(0xb5b),_0x460d9f[_0x65ae37(0x3a0)]('click',()=>_0xaa027f(_0x3573b8['id'])),_0x5a62c1[_0x65ae37(0x5b8)](_0x460d9f);});}else{const _0x157edf=_0x28572d(_0x318b46[_0x406f17(0x41b)][0x0]);_0x30fe68['textContent']=_0x157edf?_0x157edf[_0x406f17(0xb95)]:_0x406f17(0x842);}}async function _0xaa027f(_0x138e5c=null){const _0x4b1814=_0x8dde82;_0x137a40(_0x4b1814(0x640),_0x4b1814(0xb96));const _0xad37cd=document[_0x4b1814(0x1d6)](_0x4b1814(0xb8d)),_0x40315e=document['getElementById'](_0x4b1814(0xdc5)),_0xffb4c2=document['getElementById'](_0x4b1814(0xdc3));_0x40315e['style']['backgroundImage']=_0x4b1814(0x8a1)+_0x284b7c+'\x27)',_0xffb4c2[_0x4b1814(0xee2)]='';if(_0x138e5c){const _0x874e84=_0xdfbfac[_0x4b1814(0xc37)][_0x4b1814(0x76b)](_0x543218=>_0x543218['id']===_0x138e5c);if(!_0x874e84)return;document[_0x4b1814(0x1d6)]('editing-user-id')[_0x4b1814(0xee2)]=_0x874e84['id'],document[_0x4b1814(0x1d6)](_0x4b1814(0xda5))['textContent']='编辑用户',document[_0x4b1814(0x1d6)](_0x4b1814(0x4df))['value']=_0x874e84['name'],document[_0x4b1814(0x1d6)](_0x4b1814(0x2da))[_0x4b1814(0xee2)]=_0x874e84['persona'];try{if(_0x4b1814(0x201)!==_0x4b1814(0xcaa)){const _0x2a5c37=await _0x4131e2(_0x4b1814(0x220)+_0x874e84['id']);_0x2a5c37&&(_0x40315e[_0x4b1814(0x329)][_0x4b1814(0x5b7)]=_0x4b1814(0x8a1)+URL[_0x4b1814(0x21c)](_0x2a5c37)+'\x27)');}else{const _0x3c65ae=_0x3580c8[_0x4b1814(0xb6c)](_0x4b1814(0x1ff));_0x3c65ae&&_0x3c65ae[_0x4b1814(0x3a0)](_0x4b1814(0x288),function(){const _0x1416b3=_0x4b1814,_0x5ee242={'id':_0x4470e1['id'],'url':_0x49e6b6[_0x1416b3(0xb21)]};_0x3ab3da(this,_0x5ee242);});}}catch(_0x403d72){_0x4b1814(0x636)!=='Mphok'?console[_0x4b1814(0x27f)](_0x4b1814(0x71c),_0x403d72):_0x31fc43>_0x37a59c&&(_0xaca8f6*=_0x356c8e/_0x1fff43,_0x4553ee=_0x333c80);}_0xad37cd[_0x4b1814(0x329)][_0x4b1814(0xc66)]=_0x874e84['id']===_0xdfbfac[_0x4b1814(0xb83)]?'none':_0x4b1814(0xc38),document[_0x4b1814(0x1d6)](_0x4b1814(0x18c))[_0x4b1814(0x329)]['display']='block';}else document['getElementById']('editing-user-id')[_0x4b1814(0xee2)]='',document[_0x4b1814(0x1d6)](_0x4b1814(0xda5))[_0x4b1814(0x101)]=_0x4b1814(0x482),document[_0x4b1814(0x1d6)](_0x4b1814(0x4df))['value']=_0x4b1814(0x7bc)+(_0xdfbfac[_0x4b1814(0xc37)][_0x4b1814(0x1e2)]+0x1),document['getElementById']('user-persona')[_0x4b1814(0xee2)]='',_0xad37cd[_0x4b1814(0x329)]['display']='none',document[_0x4b1814(0x1d6)](_0x4b1814(0x18c))[_0x4b1814(0x329)][_0x4b1814(0xc66)]=_0x4b1814(0x338);}async function _0x5b8657(){const _0x3d956e=_0x8dde82,_0x761d24=document['getElementById'](_0x3d956e(0xe8d))['value'],_0x527ca7=document[_0x3d956e(0x1d6)](_0x3d956e(0xdc3))[_0x3d956e(0x6d4)][0x0],_0x49baac={'name':document[_0x3d956e(0x1d6)]('user-name')[_0x3d956e(0xee2)][_0x3d956e(0xcd2)](),'persona':document[_0x3d956e(0x1d6)](_0x3d956e(0x2da))['value'][_0x3d956e(0xcd2)]()};if(!_0x49baac[_0x3d956e(0xb95)]){_0x21d6ce(_0x3d956e(0xb87));return;}try{let _0x5cfd11=_0x761d24,_0x1d443f=![];if(_0x761d24){const _0x258121=_0xdfbfac[_0x3d956e(0xc37)]['find'](_0x4a4dcb=>_0x4a4dcb['id']===_0x761d24);if(_0x258121)Object[_0x3d956e(0x24a)](_0x258121,_0x49baac);}else{_0x1d443f=!![],_0x5cfd11=_0x3d956e(0x1cf)+Date[_0x3d956e(0x4a2)]();const _0x15051f={'id':_0x5cfd11,..._0x49baac};_0xdfbfac[_0x3d956e(0xc37)][_0x3d956e(0xb66)](_0x15051f);if(!_0xdfbfac[_0x3d956e(0xb83)]){if(_0x3d956e(0x77e)===_0x3d956e(0x6d7)){_0x3ccfe3(_0x3d956e(0xdb4));return;}else _0xdfbfac[_0x3d956e(0xb83)]=_0x5cfd11;}}_0x527ca7&&(await _0x510f28('user_avatar_'+_0x5cfd11,_0x527ca7),console[_0x3d956e(0x7ec)](_0x3d956e(0x2c3)+_0x5cfd11+_0x3d956e(0x75a)));_0x31622b(),_0x21d6ce(_0x3d956e(0xc50));if(_0x527ca7||_0x1d443f){if(_0x3d956e(0x15e)!==_0x3d956e(0x4e0))_0x21d6ce(_0x3d956e(0x775)),setTimeout(()=>location[_0x3d956e(0x28d)](),0x5dc);else{const _0x5250b6=_0x22d7d6[_0x3d956e(0xc44)](_0x4b7716),_0x3ce194={..._0x50f705},_0x136f47={..._0x3ce194,..._0x5250b6};_0x136f47[_0x3d956e(0x3a8)]={..._0x3ce194[_0x3d956e(0x3a8)],..._0x5250b6[_0x3d956e(0x3a8)]||{}},_0x136f47[_0x3d956e(0x5e0)]={..._0x3ce194[_0x3d956e(0x5e0)],..._0x5250b6[_0x3d956e(0x5e0)]||{}},_0x136f47[_0x3d956e(0x451)]=null,_0x136f47['isGenerating']=![],_0x14b417[_0x3d956e(0x24a)](_0x59888d,_0x136f47);}}else{if(_0x3d956e(0x7a2)!=='VCtwp')_0x1da56f(),_0x137a40(_0x3d956e(0xb96),_0x3d956e(0x640));else{const _0x515a2e=_0x3592de[_0x3d956e(0x272)][_0x3d956e(0x63f)][_0x3d956e(0x798)],_0x498f4c=_0xb8cf99[_0x3d956e(0x272)][_0x3d956e(0xefd)];_0x47ad98[_0x3d956e(0x7af)](_0x3d956e(0xbf7)+_0x515a2e+'\x22]')[_0x3d956e(0xb85)](_0x5f1de7=>{const _0x6194da=_0x3d956e;_0x5f1de7[_0x6194da(0xefd)]=_0x498f4c;}),_0x5536f5();}}}catch(_0x4a0e1e){console['error'](_0x3d956e(0x37a),_0x4a0e1e),_0x21d6ce(_0x3d956e(0x7b0)+_0x4a0e1e[_0x3d956e(0x8ac)]);}}async function _0x548c27(){const _0x538bd1=_0x8dde82;if('PtCTq'!==_0x538bd1(0xf4)){const _0x403729=document[_0x538bd1(0x1d6)](_0x538bd1(0xe8d))[_0x538bd1(0xee2)];if(!_0x403729)return;if(_0xdfbfac[_0x538bd1(0xc37)]['length']<=0x1){if(_0x538bd1(0x7bd)!==_0x538bd1(0xa8b)){_0x21d6ce(_0x538bd1(0xc07));return;}else _0x41396b=_0x538bd1(0x3db),_0x3dc4ab=_0x538bd1(0x7a0)+_0x174fbf+_0x538bd1(0xd3f);}const _0x93cb=await _0x13215d(_0x538bd1(0xebf));if(_0x93cb){if(_0x538bd1(0x2ff)!=='AfOJS'){_0x133cc4();return;}else{_0xdfbfac[_0x538bd1(0xc37)]=_0xdfbfac[_0x538bd1(0xc37)]['filter'](_0x1dd43e=>_0x1dd43e['id']!==_0x403729);if(_0xdfbfac['activeUserProfileId']===_0x403729){if('PloDU'!==_0x538bd1(0xead)){if(_0x16974d[_0x538bd1(0x1e2)]===0x0)return;_0x54bc0b=(_0x423a4c-0x1+_0x27a4ae['length'])%_0x29ee3d[_0x538bd1(0x1e2)],_0x5a586e(_0xf54bdb[_0x2b7e1b],_0x119661);}else _0xdfbfac[_0x538bd1(0xb83)]=_0xdfbfac[_0x538bd1(0xc37)][0x0]['id'];}_0xdfbfac[_0x538bd1(0xc1b)][_0x538bd1(0xb85)](_0x2fe0ba=>{const _0x196e0a=_0x538bd1;_0x2fe0ba[_0x196e0a(0xacb)]===_0x403729&&(_0x2fe0ba[_0x196e0a(0xacb)]=_0xdfbfac[_0x196e0a(0xb83)]);}),_0x31622b(),_0x21d6ce(_0x538bd1(0x708)),_0x1da56f(),_0x137a40(_0x538bd1(0xb96),'userProfile');}}}else{_0x1a627e[_0x538bd1(0xa73)]=_0x538bd1(0x874);return;}}function _0x47ce07(){const _0x5cdf3b=_0x8dde82;_0x33a80b(),_0x236d74(_0xdfbfac[_0x5cdf3b(0x374)]);}function _0x33a80b(){const _0x242719=_0x8dde82,_0x2a6b4a=document[_0x242719(0x1d6)](_0x242719(0x720));_0x2a6b4a['innerHTML']='',_0xdfbfac[_0x242719(0x3c6)][_0x242719(0xb85)](_0x46b630=>{const _0x3151e7=_0x242719;if('Nikoo'!==_0x3151e7(0x7be)){const _0x42ff20=document[_0x3151e7(0x8f1)]('div');_0x42ff20[_0x3151e7(0x101)]=_0x46b630['name'],_0x42ff20[_0x3151e7(0x63f)]['id']=_0x46b630['id'],_0x42ff20['style']['padding']='10px\x208px',_0x42ff20['style']['borderRadius']=_0x3151e7(0x6db),_0x42ff20[_0x3151e7(0x329)][_0x3151e7(0x4d9)]='pointer',_0x42ff20[_0x3151e7(0x329)]['marginBottom']=_0x3151e7(0x505),_0x42ff20[_0x3151e7(0x329)][_0x3151e7(0xe8)]='500';_0x46b630['id']===_0xdfbfac[_0x3151e7(0x374)]?(_0x42ff20['style'][_0x3151e7(0x617)]=_0x3151e7(0x3d4),_0x42ff20['style'][_0x3151e7(0x477)]=_0x3151e7(0xa90)):_0x3151e7(0xa63)!=='hfRLC'?_0x42ff20[_0x3151e7(0x329)][_0x3151e7(0x477)]=_0x3151e7(0xb48):_0x1b1d8c(_0x18a991['id']);_0x42ff20['addEventListener'](_0x3151e7(0x288),()=>{_0xdfbfac['activeWorldBookCategoryId']=_0x46b630['id'],_0x47ce07();});let _0x5de074=null;const _0x58ab6a=_0x51b008=>{const _0x449a8a=_0x3151e7;if(_0x46b630['id']===_0x449a8a(0x7f4))return;_0x5de074=setTimeout(()=>{const _0x1f25bf=_0x449a8a;if(_0x51b008[_0x1f25bf(0x8c7)]===_0x1f25bf(0xa6c))_0x51b008[_0x1f25bf(0xc7a)]();_0x22aa8a(_0x46b630['id'],_0x46b630[_0x1f25bf(0xb95)]);},0x320);},_0x2bb95f=()=>{clearTimeout(_0x5de074);};_0x42ff20[_0x3151e7(0x3a0)](_0x3151e7(0x5c9),_0x58ab6a),_0x42ff20['addEventListener'](_0x3151e7(0xc67),_0x2bb95f),_0x42ff20[_0x3151e7(0x3a0)]('mouseleave',_0x2bb95f),_0x42ff20[_0x3151e7(0x3a0)]('touchstart',_0x58ab6a,{'passive':![]}),_0x42ff20[_0x3151e7(0x3a0)](_0x3151e7(0xb8b),_0x2bb95f),_0x42ff20[_0x3151e7(0x3a0)](_0x3151e7(0x28a),_0x2bb95f),_0x2a6b4a[_0x3151e7(0x5b8)](_0x42ff20);}else{_0x112bce[_0x3151e7(0xca6)](_0x3151e7(0x42b));const _0x213ae6=_0x223bf9[_0x3151e7(0x41b)][_0x3151e7(0x266)](_0x5b3a73)[_0x3151e7(0xeb3)](_0x4378b3);if(!_0x213ae6[_0x3151e7(0x1e2)])return;let _0x164d5b=0x0;for(const _0x2fa763 of _0x213ae6){_0x1593e0(_0x2fa763,{'force':!![],'delayMs':_0x164d5b}),_0x164d5b+=0x1f4;}}});}async function _0x22aa8a(_0x1b49c5,_0x2872aa){const _0xf7cb8f=_0x8dde82,_0x38681d=await _0x13215d(_0xf7cb8f(0x47c)+_0x2872aa+'”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。');if(!_0x38681d)return;const _0x2efaaa=_0xdfbfac[_0xf7cb8f(0xe7d)][_0xf7cb8f(0xeb3)](_0x21f1b6=>_0x21f1b6['categoryId']===_0x1b49c5)[_0xf7cb8f(0x266)](_0x389ce7=>_0x389ce7['id']);_0xdfbfac['worldBooks']=_0xdfbfac[_0xf7cb8f(0xe7d)][_0xf7cb8f(0xeb3)](_0x38cdb2=>_0x38cdb2['categoryId']!==_0x1b49c5),_0xdfbfac[_0xf7cb8f(0x78e)]=_0xdfbfac[_0xf7cb8f(0x3c6)]['filter'](_0x5462da=>_0x5462da['id']!==_0x1b49c5);_0xdfbfac[_0xf7cb8f(0x374)]===_0x1b49c5&&(_0xdfbfac[_0xf7cb8f(0x374)]=_0xf7cb8f(0x7f4));const _0x5dcf31=[..._0xdfbfac[_0xf7cb8f(0x94d)],..._0xdfbfac[_0xf7cb8f(0xc1b)]];_0x5dcf31[_0xf7cb8f(0xb85)](_0x1475bf=>{const _0x2ab8f0=_0xf7cb8f;if(_0x2ab8f0(0x778)===_0x2ab8f0(0x778))_0x1475bf[_0x2ab8f0(0x5ee)]&&_0x1475bf[_0x2ab8f0(0x5ee)][_0x2ab8f0(0x1e2)]>0x0&&(_0x2ab8f0(0xea8)===_0x2ab8f0(0xe37)?_0x59d689['push'](_0x389127):_0x1475bf[_0x2ab8f0(0x5ee)]=_0x1475bf[_0x2ab8f0(0x5ee)][_0x2ab8f0(0xeb3)](_0x2775f9=>!_0x2efaaa[_0x2ab8f0(0xc35)](_0x2775f9)));else{_0x5880cc+=_0x2ab8f0(0xe71);const _0x2a80bb=_0x1c67bf['emotion_schema'][_0x2ab8f0(0xb31)]?.['正面']||[],_0x566c88=_0x2dda7a[_0x2ab8f0(0x30b)][_0x2ab8f0(0xb31)]?.['负面']||[];if(_0x2a80bb[_0x2ab8f0(0x1e2)]>0x0)_0x3082f9+=_0x2ab8f0(0x245)+_0x2a80bb[_0x2ab8f0(0xd9a)](_0x2ab8f0(0xbea))+'\x0a\x0a';if(_0x566c88[_0x2ab8f0(0x1e2)]>0x0)_0x1b46a3+=_0x2ab8f0(0x998)+_0x566c88[_0x2ab8f0(0xd9a)](_0x2ab8f0(0xbea))+'\x0a\x0a';if(_0x4be314[_0x2ab8f0(0x30b)][_0x2ab8f0(0x3de)])_0x3671e0+=_0x2ab8f0(0xde1)+_0x458344[_0x2ab8f0(0x30b)]['comfort_zone']+'\x0a\x0a';if(_0x2e52a3['emotion_schema']['stress_signals']?.['length']>0x0)_0x55b852+=_0x2ab8f0(0xb15)+_0x58425d[_0x2ab8f0(0x30b)][_0x2ab8f0(0xdcd)][_0x2ab8f0(0xd9a)](_0x2ab8f0(0xbea))+'\x0a\x0a';}}),_0x31622b(),_0x47ce07(),_0x21d6ce(_0xf7cb8f(0xc5f)+_0x2872aa+_0xf7cb8f(0xb5f));}function _0x236d74(_0x317455){const _0x380d89=_0x8dde82,_0x1695fb=document[_0x380d89(0x1d6)](_0x380d89(0xe25));_0x1695fb[_0x380d89(0xa73)]='';const _0x12a1e9=_0xdfbfac[_0x380d89(0xe7d)][_0x380d89(0xeb3)](_0x59e5c2=>_0x59e5c2[_0x380d89(0x798)]===_0x317455||_0x317455===_0x380d89(0x7f4)&&!_0x59e5c2['categoryId']);if(_0x12a1e9[_0x380d89(0x1e2)]===0x0){if(_0x380d89(0x603)===_0x380d89(0xe43))_0x11d1e0[_0x380d89(0x3a0)](_0x380d89(0x288),function(){const _0x598b29={'id':_0x36d6bc['id'],'url':_0x5b5bb3['playableUrl']};_0x349cad(this,_0x598b29);});else{_0x1695fb[_0x380d89(0xa73)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>';return;}}_0x12a1e9[_0x380d89(0xb85)](_0x287f28=>{const _0x22abd7=_0x380d89,_0x4ad6df=document['createElement']('div');_0x4ad6df[_0x22abd7(0x213)]='world-book-item',_0x4ad6df[_0x22abd7(0x63f)]['id']=_0x287f28['id'],_0x4ad6df[_0x22abd7(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>'+_0x287f28[_0x22abd7(0xb95)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x287f28[_0x22abd7(0xee)]['substring'](0x0,0x64)+_0x22abd7(0xb5b),_0x4ad6df[_0x22abd7(0x3a0)]('click',()=>_0xe2925a(_0x287f28['id'])),_0x1695fb[_0x22abd7(0x5b8)](_0x4ad6df);});}document[_0x8dde82(0x1d6)]('add-world-book-category-button')[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x4b6280=_0x8dde82,_0x27d1cc=prompt(_0x4b6280(0xcfd));if(_0x27d1cc&&_0x27d1cc[_0x4b6280(0xcd2)]()){const _0x43c802={'id':_0x4b6280(0x115)+Date[_0x4b6280(0x4a2)](),'name':_0x27d1cc[_0x4b6280(0xcd2)]()};_0xdfbfac['worldBookCategories'][_0x4b6280(0xb66)](_0x43c802),_0xdfbfac['activeWorldBookCategoryId']=_0x43c802['id'],_0x31622b(),_0x47ce07();}});function _0xe2925a(_0x4c39c1=null){const _0x2ce6ff=_0x8dde82;_0x137a40('worldBookEditor',_0x2ce6ff(0x128));const _0x3d0cfd=document['getElementById'](_0x2ce6ff(0x74e));_0x3d0cfd['innerHTML']='',_0xdfbfac[_0x2ce6ff(0x3c6)][_0x2ce6ff(0xb85)](_0x4d3010=>{const _0x8821dc=_0x2ce6ff,_0x3b9907=document[_0x8821dc(0x8f1)](_0x8821dc(0x805));_0x3b9907[_0x8821dc(0xee2)]=_0x4d3010['id'],_0x3b9907[_0x8821dc(0x101)]=_0x4d3010['name'],_0x3d0cfd[_0x8821dc(0x5b8)](_0x3b9907);});if(_0x4c39c1){if(_0x2ce6ff(0xe58)===_0x2ce6ff(0xd0b))!_0x5cd402['contains'](_0x20288f[_0x2ce6ff(0x272)])&&_0x5c1d74[_0x2ce6ff(0x272)]!==_0x4a711d&&_0x200c1a['target']!==_0x5b06fd&&_0x32aa0b[_0x2ce6ff(0x555)][_0x2ce6ff(0x9ad)](_0x2ce6ff(0x36e));else{const _0x270a1c=_0xdfbfac['worldBooks']['find'](_0x556065=>_0x556065['id']===_0x4c39c1);if(!_0x270a1c)return;document['getElementById'](_0x2ce6ff(0x3cd))[_0x2ce6ff(0xee2)]=_0x270a1c['id'],document[_0x2ce6ff(0x1d6)](_0x2ce6ff(0x415))[_0x2ce6ff(0x101)]=_0x2ce6ff(0x562),document[_0x2ce6ff(0x1d6)](_0x2ce6ff(0x5bb))[_0x2ce6ff(0xee2)]=_0x270a1c[_0x2ce6ff(0xb95)],document[_0x2ce6ff(0x1d6)](_0x2ce6ff(0x770))[_0x2ce6ff(0xee2)]=_0x270a1c[_0x2ce6ff(0xee)],_0x3d0cfd['value']=_0x270a1c[_0x2ce6ff(0x798)]||'default';}}else document[_0x2ce6ff(0x1d6)]('editing-world-book-id')[_0x2ce6ff(0xee2)]='',document['getElementById'](_0x2ce6ff(0x415))[_0x2ce6ff(0x101)]=_0x2ce6ff(0xd54),document['getElementById'](_0x2ce6ff(0x5bb))[_0x2ce6ff(0xee2)]='',document[_0x2ce6ff(0x1d6)]('world-book-edit-content')['value']='',_0x3d0cfd[_0x2ce6ff(0xee2)]=_0xdfbfac[_0x2ce6ff(0x374)];}function _0x47bc2e(){const _0x1ffe9d=_0x8dde82;if(_0x1ffe9d(0x511)==='cpBtK'){if(_0x479fc9?.[_0x1ffe9d(0x8c7)]===_0x1ffe9d(0xcef))_0x184408=_0x53446b(_0x43ac2d[_0x1ffe9d(0x41b)][0x0]);else _0x10fb7e?.[_0x1ffe9d(0x8c7)]===_0x1ffe9d(0x304)&&_0x398a89&&(_0x3d2ff7=_0xb3c03c(_0x217eff));_0x21a9c3=_0xd059a5?.[_0x1ffe9d(0x584)]||_0x435b87,_0x143455=_0xb85b5c?.[_0x1ffe9d(0xc5a)]||'';}else{const _0x59088d=document[_0x1ffe9d(0x1d6)](_0x1ffe9d(0x3cd))['value'],_0x1ad0d5=document[_0x1ffe9d(0x1d6)]('world-book-edit-name')['value'][_0x1ffe9d(0xcd2)](),_0x1f4000=document[_0x1ffe9d(0x1d6)](_0x1ffe9d(0x770))['value'][_0x1ffe9d(0xcd2)](),_0x107507=document[_0x1ffe9d(0x1d6)]('world-book-edit-category')['value'];if(!_0x1ad0d5||!_0x1f4000){if(_0x1ffe9d(0x4f7)!==_0x1ffe9d(0xe38)){_0x21d6ce(_0x1ffe9d(0xcc1));return;}else{const _0x11b058=_0x3bcd09(_0x777fa8[_0x1ffe9d(0x6b3)])||{'name':'未知'};let _0x489a05=_0x1ffe9d(0x5a3)+_0x11b058[_0x1ffe9d(0xb95)]+_0x1ffe9d(0xbd7)+(_0x1266d9[_0x1ffe9d(0x948)]||_0x2c8223[_0x1ffe9d(0xee)])+'”';return _0x3830b0[_0x1ffe9d(0x8c7)]==='music'&&(_0x489a05+=_0x1ffe9d(0x38c)+_0x548af6[_0x1ffe9d(0x3c7)]+'\x20-\x20'+_0x4bd8c7[_0x1ffe9d(0x7dc)]+')'),_0x489a05;}}if(_0x59088d){if(_0x1ffe9d(0xa85)===_0x1ffe9d(0xa85)){const _0x212485=_0xdfbfac['worldBooks'][_0x1ffe9d(0x76b)](_0xe30657=>_0xe30657['id']===_0x59088d);_0x212485&&(_0x1ffe9d(0xa18)===_0x1ffe9d(0xa18)?(_0x212485[_0x1ffe9d(0xb95)]=_0x1ad0d5,_0x212485[_0x1ffe9d(0xee)]=_0x1f4000,_0x212485[_0x1ffe9d(0x798)]=_0x107507):_0x272164['getElementById'](_0x1ffe9d(0x2a7))[_0x1ffe9d(0x101)]=_0x1ffe9d(0x63d));}else _0x2f2870[_0x1ffe9d(0x27f)](_0x1ffe9d(0xa58),_0x27c1c4);}else{if(_0x1ffe9d(0xcb9)===_0x1ffe9d(0xcb9)){const _0x392e92={'id':_0x1ffe9d(0x64f)+Date[_0x1ffe9d(0x4a2)](),'name':_0x1ad0d5,'content':_0x1f4000,'categoryId':_0x107507};_0xdfbfac[_0x1ffe9d(0xe7d)][_0x1ffe9d(0xb66)](_0x392e92);}else{const _0xf9ea21=_0xfd2078[_0x1ffe9d(0x76b)](_0x5f526e=>_0x5f526e[_0x1ffe9d(0xb95)]===_0x22a63f[_0x1ffe9d(0xb95)]);if(_0xf9ea21)_0x3fe60a[_0x1ffe9d(0x24a)](_0xbf0108,{'content':_0x1ffe9d(0x858)+_0xf9ea21['name']+']','displayUrl':_0xf9ea21['url']});else _0x30de1b[_0x1ffe9d(0xee)]='[sticker:'+_0x3d2e91['name']+']';}}_0xdfbfac[_0x1ffe9d(0x374)]=_0x107507,_0x31622b(),_0x21d6ce(_0x1ffe9d(0x9c1)),_0x47ce07(),_0x137a40(_0x1ffe9d(0x128),'worldBookEditor');}}async function _0x544472(){const _0x57588e=_0x8dde82;if(_0x57588e(0x604)!=='QqBvj')_0x414150[_0x57588e(0x555)][_0x57588e(0x9ad)](_0x57588e(0x36e));else{const _0x1b46eb=document[_0x57588e(0x1d6)](_0x57588e(0x3cd))[_0x57588e(0xee2)];if(!_0x1b46eb)return;const _0x1d338d=await _0x13215d(_0x57588e(0xd63));if(_0x1d338d){if(_0x57588e(0xfb)===_0x57588e(0x142)){_0x30c686[_0x57588e(0x5e0)][_0x57588e(0xa89)]=_0x2ca59c[_0x57588e(0xee2)]['trim'](),_0x4d00e4[_0x57588e(0x5e0)][_0x57588e(0xb84)]=_0xda6a46[_0x57588e(0xee2)][_0x57588e(0xcd2)](),_0x44c14c['apiSettings'][_0x57588e(0x888)]=_0x4c8e44['value'][_0x57588e(0xcd2)](),_0xc8d7d9[_0x57588e(0x5e0)][_0x57588e(0xe4b)]=_0x3fc73f[_0x57588e(0x1d6)](_0x57588e(0x7fd))[_0x57588e(0xee2)];const _0x167f1f=_0x1b7c4f(_0x57b9b9['value'],0xa);_0x519b28[_0x57588e(0x3a8)][_0x57588e(0x89c)]=_0x10f2d7[_0x57588e(0x219)](_0x167f1f)&&_0x167f1f>0x0?_0x167f1f:0x64,_0x1a3cd8(),_0x5916e5(_0x57588e(0x1e6));}else _0xdfbfac[_0x57588e(0xe7d)]=_0xdfbfac[_0x57588e(0xe7d)][_0x57588e(0xeb3)](_0x352fea=>_0x352fea['id']!==_0x1b46eb),_0xdfbfac['characters']['forEach'](_0x3a10a3=>{const _0x2f1109=_0x57588e;_0x3a10a3[_0x2f1109(0x5ee)]&&(_0x3a10a3[_0x2f1109(0x5ee)]=_0x3a10a3[_0x2f1109(0x5ee)][_0x2f1109(0xeb3)](_0x45ad39=>_0x45ad39!==_0x1b46eb));}),_0x31622b(),_0x21d6ce(_0x57588e(0x3b5)),_0x47ce07(),_0x137a40(_0x57588e(0x128),_0x57588e(0x222));}}}function _0x466143(){const _0x15c3a0=_0x8dde82;if(_0x15c3a0(0x187)!==_0x15c3a0(0xe48)){const _0x3e625e=document[_0x15c3a0(0x1d6)](_0x15c3a0(0x81d)),_0x71b634=_0x3e625e[_0x15c3a0(0x7af)]('.wb-entry-item\x20input:checked'),_0x2a6a47=document[_0x15c3a0(0xb6c)]('#character-edit-screen\x20.selected-options-text');if(_0x71b634[_0x15c3a0(0x1e2)]===0x0)_0x2a6a47[_0x15c3a0(0x101)]=_0x15c3a0(0x406);else{if(_0x71b634[_0x15c3a0(0x1e2)]>0x2)_0x2a6a47[_0x15c3a0(0x101)]=_0x15c3a0(0xa12)+_0x71b634[_0x15c3a0(0x1e2)]+'\x20项';else{if(_0x15c3a0(0x242)===_0x15c3a0(0x242))_0x2a6a47[_0x15c3a0(0x101)]=Array[_0x15c3a0(0xe74)](_0x71b634)[_0x15c3a0(0x266)](_0x43b1eb=>_0x43b1eb[_0x15c3a0(0xcb5)][_0x15c3a0(0x101)][_0x15c3a0(0xcd2)]())[_0x15c3a0(0xd9a)]('、');else{const _0x4868ee=_0x23407c[_0x15c3a0(0xb84)](_0x49858d);_0x4868ee&&(_0x47c266[_0x4868ee]=_0x1381cf['getItem'](_0x4868ee));}}}}else _0x16139f[_0x15c3a0(0xefd)]=!![],_0x4e7e15[_0x15c3a0(0xda1)]=![];}async function _0x5c94ca(_0x55ebc6){const _0x4b0ba2=_0x8dde82;if('RDYXx'!==_0x4b0ba2(0x5d3)){const _0x3e99b4=_0xdfbfac[_0x4b0ba2(0xc1b)]['find'](_0x423017=>_0x423017['id']===_0x55ebc6);if(!_0x3e99b4||_0x3e99b4[_0x4b0ba2(0x8c7)]!==_0x4b0ba2(0x304))return;document['getElementById'](_0x4b0ba2(0x6e7))[_0x4b0ba2(0xee2)]=_0x3e99b4[_0x4b0ba2(0xb95)]||'',_0x392a2e(_0x4b0ba2(0xd57)),document['getElementById']('group-settings-bind-user')['value']=_0x3e99b4['boundUserProfileId']||_0xdfbfac['activeUserProfileId'],_0xad18a1(_0x4b0ba2(0x68f),_0x3e99b4[_0x4b0ba2(0x5ee)]||[]),_0x21fa40();const _0x4735b5=document['getElementById']('group-avatar-preview'),_0x15590a=document['getElementById'](_0x4b0ba2(0xa57));_0x15590a[_0x4b0ba2(0x329)]['backgroundImage']='',_0x4131e2(_0x4b0ba2(0x80a)+_0x55ebc6)['then'](_0x161d63=>{const _0x1b3620=_0x4b0ba2;_0x4735b5[_0x1b3620(0xcab)]=_0x161d63?URL[_0x1b3620(0x21c)](_0x161d63):_0x1af29b;}),_0x4131e2(_0x4b0ba2(0x27e)+_0x55ebc6)[_0x4b0ba2(0x94f)](_0x42450d=>{const _0x28da8a=_0x4b0ba2;if(_0x42450d)_0x15590a['style'][_0x28da8a(0x5b7)]=_0x28da8a(0x8a1)+URL['createObjectURL'](_0x42450d)+'\x27)';}),_0x137a40('groupSettings','chat');}else _0x45d3c5[_0x4b0ba2(0xb66)]({'time':_0x24f7de,'text':_0x1d4127});}async function _0x5bd3e3(){const _0x5cd1ed=_0x8dde82;if(_0x5cd1ed(0x6ee)!==_0x5cd1ed(0x763)){const _0x3b61a3=_0x1d801f();if(!_0x3b61a3||_0x3b61a3[_0x5cd1ed(0x8c7)]!==_0x5cd1ed(0x304))return;const _0x6aca2e=document['getElementById'](_0x5cd1ed(0x6e7))['value']['trim']();if(!_0x6aca2e){if(_0x5cd1ed(0xc1d)===_0x5cd1ed(0xc1d)){_0x21d6ce(_0x5cd1ed(0x7e7));return;}else _0x14c17a['style']['opacity']='1';}_0x3b61a3[_0x5cd1ed(0xb95)]=_0x6aca2e;const _0x30cc82=document[_0x5cd1ed(0x7af)](_0x5cd1ed(0x4e7));_0x3b61a3['linkedWorldBookIds']=Array[_0x5cd1ed(0xe74)](_0x30cc82)[_0x5cd1ed(0x266)](_0x3da9dd=>_0x3da9dd[_0x5cd1ed(0xee2)]),_0x3b61a3['boundUserProfileId']=document['getElementById'](_0x5cd1ed(0xd57))[_0x5cd1ed(0xee2)];const _0x5b6869=document[_0x5cd1ed(0x1d6)](_0x5cd1ed(0x484))['files'][0x0],_0x4bce02=document[_0x5cd1ed(0x1d6)]('group-bg-input')[_0x5cd1ed(0x6d4)][0x0];if(_0x5b6869)await _0x510f28(_0x5cd1ed(0x80a)+_0x3b61a3['id'],_0x5b6869);if(_0x4bce02)await _0x510f28('group_bg_'+_0x3b61a3['id'],_0x4bce02);_0x31622b(),_0x1b3734(),await _0x117428(),_0x21d6ce(_0x5cd1ed(0x3b8)),_0x137a40('chat',_0x5cd1ed(0xa74));}else _0x41edfb[_0x5cd1ed(0xacb)]=_0x45415c[_0x5cd1ed(0xb83)];}function _0x21fa40(){const _0x73a341=_0x8dde82,_0x8199e6=document['getElementById'](_0x73a341(0x68f)),_0x20d33e=_0x8199e6[_0x73a341(0x7af)]('.wb-entry-item\x20input:checked'),_0x221116=document[_0x73a341(0xb6c)]('#group-settings-screen\x20.selected-options-text');if(_0x20d33e['length']===0x0)_0x73a341(0xaec)==='TnCDz'?_0x221116[_0x73a341(0x101)]=_0x73a341(0x406):(_0x3eff3b=_0x53a01b[_0x73a341(0xe14)],_0x3d6210['log'](_0x73a341(0x1bf),_0xffab99));else _0x20d33e[_0x73a341(0x1e2)]>0x2?_0x221116[_0x73a341(0x101)]='已选择\x20'+_0x20d33e[_0x73a341(0x1e2)]+'\x20项':_0x73a341(0x3cb)==='pAmVk'?_0x221116['textContent']=Array[_0x73a341(0xe74)](_0x20d33e)[_0x73a341(0x266)](_0x5ec27e=>_0x5ec27e['parentElement'][_0x73a341(0x101)][_0x73a341(0xcd2)]())['join']('、'):(_0xbee38={'title':_0x35a011['songName'],'artist':_0x5d52d8[_0x73a341(0x7dc)],'cover':_0x1b8746[_0x73a341(0x520)]||(_0x3e3548[_0x73a341(0x6a3)]?_0x73a341(0x351)+_0x560b12[_0x73a341(0x6a3)]:_0x40af6f),'isFromLibrary':!![]},_0x2c6618['src']=_0x27db91['playableUrl'],_0x20b466[_0x73a341(0xe7f)](),_0x3bb6bf[_0x73a341(0x55e)]=_0x599870[_0x73a341(0xddd)][_0x73a341(0xd30)](_0x17fb59=>_0x17fb59['id']===_0x543776['id']),_0x210692());}async function _0x1ef586(){const _0x22d400=_0x8dde82,_0x1f4a0e=_0x1d801f(),_0x4c14b0=(_0x1f4a0e?.[_0x22d400(0x41b)]||[])[_0x22d400(0x266)](_0x5844c7)['filter'](Boolean),_0x4417ba=_0x58761c(_0x1f4a0e['id']);if(!_0x1f4a0e||_0x1f4a0e[_0x22d400(0x8c7)]!==_0x22d400(0x304)||_0x4c14b0[_0x22d400(0x1e2)]<0x2)return null;const _0x20368d=_0x1f4a0e[_0x22d400(0x5ee)]&&_0x1f4a0e['linkedWorldBookIds']['length']>0x0?_0x22d400(0xabf)+_0x1f4a0e['linkedWorldBookIds'][_0x22d400(0x266)](_0x3ecae6=>_0xdfbfac['worldBooks']['find'](_0xfb8505=>_0xfb8505['id']===_0x3ecae6))[_0x22d400(0xeb3)](Boolean)[_0x22d400(0x266)](_0xce535=>_0x22d400(0xc6c)+_0xce535['name']+'\x0a'+_0xce535[_0x22d400(0xee)])[_0x22d400(0xd9a)](''):'',_0x11fcc9=_0x4417ba[_0x22d400(0x79b)]?_0x22d400(0x772)+_0x4417ba['name']+_0x22d400(0xe79)+_0x4417ba[_0x22d400(0x79b)]:'';let _0x5a04f8='';const _0x27c686=new Date(),_0x19b3e2=_0xdfbfac[_0x22d400(0x3a4)]['at'](-0x1);_0x5a04f8+=_0x22d400(0xe86)+_0x27c686[_0x22d400(0x985)]('zh-CN',{'dateStyle':'full','timeStyle':_0x22d400(0xa40)});if(_0x19b3e2){if('kkVjo'==='cweto')_0x397cc2[_0x22d400(0x288)]();else{const _0xc84c6=new Date(_0x19b3e2['timestamp']),_0x2d838d=Math['floor']((_0x27c686-_0xc84c6)/(0x3e8*0x3c));if(_0x2d838d<0x5)_0x5a04f8+=_0x22d400(0x570);else{if(_0x2d838d<0x78)_0x5a04f8+=_0x22d400(0x463)+_0x2d838d+_0x22d400(0xee8);else{if(_0x22d400(0x9c7)!=='LtWZk')_0x23c438();else{const _0x5a7ef7=Math[_0x22d400(0x33e)](_0x2d838d/0x3c);if(_0x5a7ef7<0x30)_0x5a04f8+=_0x22d400(0x463)+_0x5a7ef7+'小时前聊过，可以适当问候，不要直接继续之前的话题。';else _0x5a04f8+='\x0a-\x20**对话状态**:\x20群里已经有'+Math['floor'](_0x5a7ef7/0x18)+'天没动静了。你的角色们应该发起新的问候或话题。';}}}}}else _0x5a04f8+=_0x22d400(0x6cd);const _0x238371=[..._0xdfbfac[_0x22d400(0x3a4)]][_0x22d400(0x944)]()['find'](_0x5b1ce0=>_0x5b1ce0[_0x22d400(0xefb)]===_0x22d400(0xa29))?.[_0x22d400(0xee)]||'',_0x3e9cfa=_0x294225(_0x1f4a0e,_0x238371),_0x3873d4=_0xdfbfac[_0x22d400(0x3a4)][_0x22d400(0x8b8)](-0x78),_0x1ec8ea=_0x1e8db1[_0x22d400(0x266)](_0x272a14=>_0x272a14[_0x22d400(0xb95)]),_0x4d69d5=_0x5c5e8c(),_0x427bbc=await Promise[_0x22d400(0x7c7)](_0x4c14b0[_0x22d400(0x266)](async _0x1dc6f1=>{const _0x3688f9=_0x22d400;if(_0x3688f9(0x745)===_0x3688f9(0x745)){const {omniText:_0x3e6e73}=_0x5a83ee(_0x1dc6f1['id'],null),_0x2c4b4a=_0x2c9d46(_0x1dc6f1['id']),_0x130f28=await _0x421bdd(_0x1dc6f1['id']),_0x429354=_0x2a0a9d(_0x1dc6f1['id']),_0x13ddb4=_0x1dc6f1[_0x3688f9(0x5ee)]&&_0x1dc6f1['linkedWorldBookIds'][_0x3688f9(0x1e2)]>0x0?_0x3688f9(0xe62)+_0x1dc6f1['name']+'的个人专属世界观设定\x0a'+_0x1dc6f1[_0x3688f9(0x5ee)]['map'](_0x41de90=>_0xdfbfac[_0x3688f9(0xe7d)][_0x3688f9(0x76b)](_0x122c11=>_0x122c11['id']===_0x41de90))[_0x3688f9(0xeb3)](Boolean)[_0x3688f9(0x266)](_0x505444=>_0x3688f9(0x647)+_0x505444[_0x3688f9(0xb95)]+'\x0a'+_0x505444['content'])[_0x3688f9(0xd9a)](''):'';let _0x10de6b=_0x3688f9(0xbb5)+_0x1dc6f1[_0x3688f9(0xb95)]+_0x3688f9(0x642);const _0x434f77=_0x59d839(_0x1dc6f1['id']),_0x1cc514=new Date();if(_0x434f77){const _0x18162f=new Date(_0x434f77[_0x3688f9(0x10c)]);_0x10de6b+=_0x3688f9(0x56f)+_0x4417ba['name']+_0x3688f9(0x3c9)+_0x301288(_0x18162f)+'\x0a';}else _0x3688f9(0x74c)!=='QfOeX'?_0x10de6b+=_0x3688f9(0x2db)+_0x4417ba[_0x3688f9(0xb95)]+_0x3688f9(0xbe4):_0x13ce64(_0x26ea78[_0x3688f9(0x635)](_0x88c995,_0xb85ad9));let _0x4c1d69=null;const _0x2f2656=_0x3688f9(0xb5c)+_0x1dc6f1['id'];try{const {value:_0x1257cf}=await Capacitor[_0x3688f9(0x248)][_0x3688f9(0x768)][_0x3688f9(0x4f9)]({'key':_0x2f2656});_0x1257cf&&(_0x4c1d69=JSON[_0x3688f9(0xc44)](_0x1257cf));}catch(_0x3e2842){if(_0x3688f9(0x94c)!==_0x3688f9(0x94c)){const _0x53230e=_0x2f1d13[_0x3688f9(0x5ee)][_0x3688f9(0x266)](_0x3e0219=>_0x185c03[_0x3688f9(0xe7d)][_0x3688f9(0x76b)](_0x1d2ee7=>_0x1d2ee7['id']===_0x3e0219))[_0x3688f9(0xeb3)](_0x451900)['map'](_0x1db155=>_0x3688f9(0x820)+_0x1db155['name']+'\x0a'+_0x1db155[_0x3688f9(0xee)])[_0x3688f9(0xd9a)]('');_0x53230e&&(_0x555e49=_0x3688f9(0x4f0)+_0x53230e);}else console[_0x3688f9(0x27f)]('读取角色\x20'+_0x1dc6f1[_0x3688f9(0xb95)]+_0x3688f9(0xe0f),_0x3e2842);}const _0x286794=_0xdfbfac[_0x3688f9(0x3a4)][_0x3688f9(0x8b8)](-0x5),_0x80b1ba=_0x4c1d69?_0x40cbd0(_0x286794,_0x4c1d69):'',_0x59608e=await _0x3c59fa(_0x1dc6f1['id']),_0x3f1ddc=_0x59608e?_0x3688f9(0xf1)+_0x4417ba['name']+_0x3688f9(0x2a4)+_0x59608e:'',_0x1036ca=_0x4c1d69?''+_0x3f1ddc+_0x80b1ba+'\x0a\x0a**【人类反应模拟协议\x20v2.0\x20-\x20强化版】**：\x0a1.\x20**【最高优先级】小抄优先**:\x20如果上面的\x22重点关注\x22部分有内容，你**必须**优先根据这些【具体细节】来调整你的回应！\x0a2.\x20**察言观色**:\x20结合【整体印象摘要】和【重点关注细节】，推测TA当前的真实情绪和潜在需求。\x0a3.\x20**基于理解的反应**:\x20必须避开\x22讨厌\x22和\x22敏感点\x22，主动结合\x22喜欢\x22的内容，留意\x22压力信号\x22或\x22最近变化\x22。\x0a4.\x20**隐秘运用**:\x20绝不复述档案内容，要自然体现理解。\x0a5.\x20**动态更新**:\x20对话中继续观察，验证或修正你对TA的认知。\x0a\x0a***【【最高优先级：反常行为应对协议\x20v1.0】】***\x0a核心目标：当用户的行为、情绪或观点与你档案中记录的长期印象【显著不符】时，你【必须】展现出真诚的好奇与关心，而不是忽视或敷衍。这对于建立深度连接至关重要！\x0a\x0a触发条件：当你注意到\x22整体印象摘要\x22或\x22重点关注：用户档案相关细节\x22中提到了\x22最近变化(observed_changes)\x22或描述了与核心印象矛盾的行为时。\x0a\x0a**行动指令：**\x0a1.\x20**【禁止忽视】**：你【绝对不能】对这些\x22反常\x22视而不见，或仅仅进行\x20superficial\x20(表面的)\x20回应！\x0a2.\x20**【表达关注】**：你的【首要反应】必须是，结合你的角色性格，表达出自然的【惊讶、好奇或关心】。\x0a3.\x20**【探索原因】**：尝试【引导性地】询问原因，展现出你想要理解这种变化的意愿。\x0a4.\x20**【优先级提升】**：在探测到显著反常行为时，上述反应的优先级【高于】普通的闲聊、推进话题或维持轻松氛围！你需要先处理这个\x22异常信号\x22。\x0a\x0a**回应范例（你需要根据自己的性格进行演绎）：**\x0a*\x20（发现平时乐观的用户突然很丧）->\x20\x22咦？['+_0x4417ba[_0x3688f9(0xb95)]+']，你今天好像有点不一样...感觉情绪不太对。还好吗？\x22\x0a*\x20（发现平时讨厌A的用户突然夸A）->\x20\x22嗯？['+_0x4417ba['name']+']你刚才说喜欢A？...\x20这、这可不像你啊，发生什么特别的事了吗？\x22\x0a*\x20（发现平时话痨的用户突然沉默寡言）->\x20\x22......\x20['+_0x4417ba[_0x3688f9(0xb95)]+_0x3688f9(0x291):'';return{'id':_0x1dc6f1['id'],'name':_0x1dc6f1[_0x3688f9(0xb95)],'persona':_0x1dc6f1[_0x3688f9(0x79b)]||'乐于助人的助手','memory':charMemory+_0x2c4b4a+_0x130f28+_0x429354+_0x13ddb4+_0x10de6b+_0x1036ca};}else _0x4d026e['onclick']=()=>{const _0x37829a=_0x3688f9;_0x204bc2[_0x37829a(0x67f)]?_0xa6068():_0x40c396();};})),_0x2a6469=0x5,_0x764740=0xc,_0x48354c='你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。'[_0x22d400(0xcd2)](),_0x4b62a3={'instruction':(_0x22d400(0x829)+(_0x1f4a0e['name']||'群聊')+_0x22d400(0xbaf)+(_0x4417ba['name']||'用户')+_0x22d400(0xce1)+_0x2a6469+_0x22d400(0xa41)+_0x764740+_0x22d400(0x7e0)+(_0x4417ba[_0x22d400(0xb95)]||'用户')+_0x22d400(0x1d0)+_0x5a04f8+'\x20\x0a'+_0x11fcc9+'\x0a'+_0x20368d+_0x22d400(0x202)+_0x4d69d5+'\x0a')[_0x22d400(0xcd2)](),'personas':_0x427bbc,'mentioned':_0x3e9cfa?{'id':_0x3e9cfa['id'],'name':_0x3e9cfa[_0x22d400(0xb95)]}:null,'stickerList':_0x1ec8ea},_0x5631bc={'type':_0x22d400(0x388),'properties':{'events':{'type':_0x22d400(0xc1f),'items':{'type':'object','required':[_0x22d400(0xdf8),'kind'],'properties':{'senderId':{'type':_0x22d400(0x193)},'kind':{'type':'string','enum':[_0x22d400(0x7ee),_0x22d400(0xea),_0x22d400(0xbf0)]},'content':{'type':_0x22d400(0x193)},'sticker':{'type':_0x22d400(0x193)},'songName':{'type':_0x22d400(0x193)},'artist':{'type':_0x22d400(0x193)}}}}},'required':['events']},_0x47e5d5=[{'role':_0x22d400(0xba3),'content':_0x48354c}];for(const _0x1582fa of _0x3873d4){const _0x1c93e1=_0x1582fa[_0x22d400(0xefb)]==='ai'||_0x1582fa[_0x22d400(0xefb)]==='assistant'?_0x22d400(0xefe):_0x22d400(0xa29);let _0x24aa1a={'role':_0x1c93e1,'content':_0x1582fa['content']},_0x2f9fbe=!!_0x1582fa[_0x22d400(0xee)],_0x3f1b49=null;if(_0x1582fa['image'])_0x3f1b49=_0x1582fa[_0x22d400(0x412)];else{if(_0x1582fa[_0x22d400(0xe2d)])try{if(_0x22d400(0x73d)!==_0x22d400(0x468)){const _0x126cdc=await _0x4131e2(_0x1582fa[_0x22d400(0xe2d)]);if(_0x126cdc)_0x3f1b49=await _0x273922(_0x126cdc);}else{const _0x3067a8=_0xf36be2(_0x199a0f['getHours']())[_0x22d400(0x4b9)](0x2,'0'),_0xe1c873=_0x528d22(_0x1bdd04[_0x22d400(0x212)]())[_0x22d400(0x4b9)](0x2,'0');_0x2f5212['textContent']=_0x3067a8+':'+_0xe1c873;const _0x2abe93=_0x13c7c0[_0x22d400(0xb0a)]()+0x1,_0x11ca66=_0x53885d['getDate'](),_0x158286=['星期日',_0x22d400(0x6c0),_0x22d400(0x2c2),'星期三',_0x22d400(0xcf9),'星期五',_0x22d400(0xe5b)][_0x55d62e['getDay']()];_0x433ca1[_0x22d400(0x101)]=_0x2abe93+'月'+_0x11ca66+'日\x20'+_0x158286;}}catch(_0x11fbf6){console['error'](_0x22d400(0xdff),_0x11fbf6);}}_0x3f1b49&&(_0x24aa1a[_0x22d400(0x412)]=_0x3f1b49,_0x2f9fbe=!![]);if(_0x2f9fbe)_0x47e5d5['push'](_0x24aa1a);}_0x47e5d5[_0x22d400(0xb66)]({'role':'user','content':'请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a'+JSON[_0x22d400(0xea5)](_0x5631bc)+_0x22d400(0xd69)+JSON[_0x22d400(0xea5)](_0x4b62a3)});try{if('KqTeZ'===_0x22d400(0x64e)){const _0x2997d2=await _0x2fa074(_0x47e5d5,{'json':!![]});if(!_0x2997d2)return null;let _0x13a313=_0x2997d2[_0x22d400(0xcd2)]();const _0x4e4ae2=_0x13a313['match'](/```json([\s\S]*?)```/i);if(_0x4e4ae2)_0x13a313=_0x4e4ae2[0x1][_0x22d400(0xcd2)]();_0x13a313=_0x4bf277(_0x13a313);let _0x29abf6=null;try{_0x29abf6=JSON[_0x22d400(0xc44)](_0x13a313);}catch(_0x4bb0f8){if(_0x22d400(0xbf9)!==_0x22d400(0xbf9)){const _0x5e8667=_0x44e7bd[_0x22d400(0x314)](_0x4e421e,'readwrite'),_0x5b7694=_0x5e8667[_0x22d400(0xa49)](_0x104be),_0x5926d0=_0x5b7694['delete'](_0x3d7f4e);_0x5926d0[_0x22d400(0xdab)]=()=>_0x57fe68(),_0x5926d0['onerror']=()=>_0x1892f4(_0x5926d0[_0x22d400(0x27f)]);}else console[_0x22d400(0x27f)]('JSON\x20解析失败!\x20错误原因:',_0x4bb0f8),console[_0x22d400(0x27f)]('收到的原始、有问题的文本:',_0x13a313);}if(!_0x29abf6||!Array[_0x22d400(0xca5)](_0x29abf6[_0x22d400(0x3fb)]))return null;return _0x29abf6=_0x5dd043(_0x29abf6,_0x4c14b0,_0x1ec8ea),_0x29abf6[_0x22d400(0x3fb)]=_0x29abf6[_0x22d400(0x3fb)][_0x22d400(0x8b8)](0x0,_0x764740),_0x29abf6[_0x22d400(0x3fb)][_0x22d400(0x1e2)]?_0x29abf6:null;}else _0x29c3db[_0x22d400(0x3a0)]('click',()=>{const _0x3b98a1=_0x22d400;_0x22def4(),_0x2acd0c(_0x3b98a1(0x2c8),_0x3b98a1(0x410));});}catch(_0x2fb55a){if('hdclc'==='hdclc')return _0x2fb55a[_0x22d400(0xb95)]!=='AbortError'&&console[_0x22d400(0x27f)](_0x22d400(0xa2d),_0x2fb55a),null;else _0x913f06[_0x22d400(0xb66)](_0x17a610['id']);}}function _0x312e5a(){const _0x318791=_0x8dde82;if('FTCBT'!==_0x318791(0x234)){const _0x36add9=document[_0x318791(0x1d6)](_0x318791(0x886));_0x36add9[_0x318791(0xa73)]='';if(_0xdfbfac['friendCircles']['length']===0x0){if(_0x318791(0xc79)===_0x318791(0xcf7)){const _0x2932e8=_0x347e4b[_0x318791(0x4dc)](/\{[\s\S]*\}/);_0x2932e8?_0x5d2b29=_0x3a017e[_0x318791(0xc44)](_0x2932e8[0x0]):_0x16944c=_0x1314a7[_0x318791(0xc44)](_0x248197);}else{_0x36add9[_0x318791(0xa73)]=_0x318791(0x8e0);return;}}_0xdfbfac[_0x318791(0xdb9)][_0x318791(0xb85)](_0x52d6a9=>{const _0x4e10c1=_0x318791,_0x3de74e=_0xdfbfac[_0x4e10c1(0xc37)]['find'](_0x42cb80=>_0x42cb80['id']===_0x52d6a9[_0x4e10c1(0xacb)])||{'name':_0x4e10c1(0xb99)},_0x6e04c0=document[_0x4e10c1(0x8f1)](_0x4e10c1(0xce2));_0x6e04c0['className']='world-book-item',_0x6e04c0[_0x4e10c1(0x63f)]['id']=_0x52d6a9['id'],_0x6e04c0[_0x4e10c1(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>'+_0x52d6a9['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20'+_0x3de74e[_0x4e10c1(0xb95)]+_0x4e10c1(0x639)+_0x52d6a9[_0x4e10c1(0x527)][_0x4e10c1(0x1e2)]+_0x4e10c1(0x849),_0x6e04c0['addEventListener']('click',()=>_0x44f23d(_0x52d6a9['id'])),_0x36add9[_0x4e10c1(0x5b8)](_0x6e04c0);});}else try{_0x523df9[_0x318791(0xa54)](_0x318791(0x9c4),_0x3464ad[_0x318791(0xea5)]({'playlist':_0x17d54f['musicPlaylist'],'currentIndex':_0x22b47b[_0x318791(0x55e)]}));}catch(_0x528570){_0xb8d06a['error']('保存播放器状态失败，真是没用。',_0x528570);}}function _0x41e873(_0x5f132e=null){const _0x423c91=_0x8dde82;if(_0x423c91(0x637)!=='DXxqT'){const _0x2f6c7f=document['getElementById'](_0x423c91(0x120)),_0x424f1b=document[_0x423c91(0x1d6)]('friend-circle-edit-bind-user'),_0x15f1a0=document[_0x423c91(0x1d6)]('friend-circle-member-selection'),_0x3fff98=document[_0x423c91(0x1d6)]('friend-circle-edit-title'),_0xde2f50=document[_0x423c91(0x1d6)](_0x423c91(0xb30)),_0x3d5ecf=document[_0x423c91(0x1d6)](_0x423c91(0x749));_0x392a2e(_0x423c91(0x66c)),_0x15f1a0[_0x423c91(0xa73)]='',_0xdfbfac[_0x423c91(0x94d)][_0x423c91(0xb85)](_0x22e5b4=>{const _0x5b3fc9=_0x423c91;if('ICDuN'===_0x5b3fc9(0x9ed))_0x51629e['currentAbortController']=null;else{const _0x67affc=document[_0x5b3fc9(0x8f1)](_0x5b3fc9(0xce2));_0x67affc[_0x5b3fc9(0x213)]=_0x5b3fc9(0x33d),_0x67affc[_0x5b3fc9(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-'+_0x22e5b4['id']+_0x5b3fc9(0x957)+_0x22e5b4['id']+_0x5b3fc9(0x4d7)+(_0x22e5b4[_0x5b3fc9(0x584)]||_0x1af29b)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-'+_0x22e5b4['id']+_0x5b3fc9(0x59d)+_0x22e5b4['name']+_0x5b3fc9(0x68d),_0x15f1a0[_0x5b3fc9(0x5b8)](_0x67affc);}});if(_0x5f132e){if(_0x423c91(0xd96)==='aoMXq'){const _0x3caad4=_0xdfbfac[_0x423c91(0xdb9)][_0x423c91(0x76b)](_0x469887=>_0x469887['id']===_0x5f132e);if(!_0x3caad4)return;_0x3fff98[_0x423c91(0x101)]='编辑好友圈',_0xde2f50['value']=_0x3caad4['id'],_0x2f6c7f['value']=_0x3caad4['name'],_0x424f1b[_0x423c91(0xee2)]=_0x3caad4[_0x423c91(0xacb)],_0x3d5ecf[_0x423c91(0x329)]['display']=_0x423c91(0xc38),_0x3caad4[_0x423c91(0x527)][_0x423c91(0xb85)](_0x59b418=>{const _0x3c6025=_0x423c91;if(_0x3c6025(0x2f8)===_0x3c6025(0x552))_0x3c84a5(_0x588eba,-0x1),_0x48ae04['scrollTop']=_0x2b32e6[_0x3c6025(0xc0c)];else{const _0x424d6a=_0x15f1a0['querySelector'](_0x3c6025(0x24b)+_0x59b418);if(_0x424d6a)_0x424d6a[_0x3c6025(0xefd)]=!![];}});}else{if(_0x4591f8){const _0x20781b=_0x35a903[_0x423c91(0x8f1)]('p');_0x20781b[_0x423c91(0xa73)]=_0x34a262,_0x20781b[_0x423c91(0x329)][_0x423c91(0x821)]='0',_0x4c9aac[_0x423c91(0x5b8)](_0x20781b);}}}else _0x3fff98[_0x423c91(0x101)]='新建好友圈',_0xde2f50[_0x423c91(0xee2)]='',_0x2f6c7f[_0x423c91(0xee2)]=_0x423c91(0xc2f)+(_0xdfbfac[_0x423c91(0xdb9)]['length']+0x1),_0x424f1b[_0x423c91(0xee2)]=_0xdfbfac[_0x423c91(0xb83)],_0x3d5ecf[_0x423c91(0x329)][_0x423c91(0xc66)]='none';_0x137a40('friendCircleEdit','friendCircleList');}else _0x4ae4c0[_0x423c91(0x8c7)]===_0x423c91(0x304)&&(_0x1c2206[_0x423c91(0x41b)]=_0x4a85a1[_0x423c91(0x41b)][_0x423c91(0xeb3)](_0x45b4e2=>_0x45b4e2!==_0x4fae41));}function _0x51d04e(){const _0x52c6d1=_0x8dde82;if(_0x52c6d1(0x43c)===_0x52c6d1(0x1cb))_0x39028c[_0x52c6d1(0xd22)]={'sender':_0x548425[0x1][_0x52c6d1(0xcd2)](),'content':_0xa7cf0d[0x2][_0x52c6d1(0xcd2)]()},_0x57a476=_0x4d918f[_0x52c6d1(0xee)]['substring'](_0x20aa18[0x0][_0x52c6d1(0x1e2)])[_0x52c6d1(0xcd2)]();else{const _0x2d5983=document[_0x52c6d1(0x1d6)](_0x52c6d1(0xb30))[_0x52c6d1(0xee2)],_0x3a0f25=document[_0x52c6d1(0x1d6)](_0x52c6d1(0x120))['value'][_0x52c6d1(0xcd2)](),_0x1549bc=document[_0x52c6d1(0x1d6)]('friend-circle-edit-bind-user')[_0x52c6d1(0xee2)],_0x4f9762=Array['from'](document[_0x52c6d1(0x7af)]('#friend-circle-member-selection\x20input:checked'))[_0x52c6d1(0x266)](_0xd0c9a6=>_0xd0c9a6[_0x52c6d1(0x63f)]['id']);if(!_0x3a0f25){if(_0x52c6d1(0xbfa)===_0x52c6d1(0xd28)){const _0x82730=_0x4737b8[_0x52c6d1(0x21c)](_0x4ab25d),_0x49b17c=_0x52c6d1(0x414),_0x1afcb8='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27'+_0x49b17c+_0x52c6d1(0xb4f)+_0x82730+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x17ec06[_0x52c6d1(0xa73)]=_0x1afcb8,_0x490354[_0x52c6d1(0xa6a)][_0x52c6d1(0x329)]['setProperty']('--custom-font-family','\x27'+_0x49b17c+'\x27'),_0x1fe996[_0x52c6d1(0x101)]=_0x52c6d1(0xb8f);}else{_0x21d6ce(_0x52c6d1(0x4b3));return;}}if(_0x4f9762[_0x52c6d1(0x1e2)]===0x0){_0x21d6ce(_0x52c6d1(0x47b));return;}if(_0x2d5983){const _0x183c5f=_0xdfbfac[_0x52c6d1(0xdb9)][_0x52c6d1(0x76b)](_0x47e4d6=>_0x47e4d6['id']===_0x2d5983);_0x183c5f&&(_0x183c5f[_0x52c6d1(0xb95)]=_0x3a0f25,_0x183c5f[_0x52c6d1(0xacb)]=_0x1549bc,_0x183c5f[_0x52c6d1(0x527)]=_0x4f9762);}else{const _0x1a9dda={'id':_0x52c6d1(0x73f)+Date[_0x52c6d1(0x4a2)](),'name':_0x3a0f25,'boundUserProfileId':_0x1549bc,'memberCharacterIds':_0x4f9762,'posts':[]};_0xdfbfac[_0x52c6d1(0xdb9)][_0x52c6d1(0xb66)](_0x1a9dda);}_0x31622b(),_0x21d6ce(_0x52c6d1(0x61b)),_0x312e5a(),_0x137a40(_0x52c6d1(0x862),_0x52c6d1(0x6fe));}}async function _0x419ada(){const _0x48786d=_0x8dde82,_0x407aae=document['getElementById']('editing-friend-circle-id')[_0x48786d(0xee2)];if(!_0x407aae)return;const _0x312c17=await _0x13215d('确定要删除这个好友圈吗？此操作不可撤销。');_0x312c17&&(_0x48786d(0xa01)===_0x48786d(0xa01)?(_0xdfbfac[_0x48786d(0xdb9)]=_0xdfbfac[_0x48786d(0xdb9)][_0x48786d(0xeb3)](_0x3d8e73=>_0x3d8e73['id']!==_0x407aae),_0xdfbfac[_0x48786d(0x961)]===_0x407aae&&(_0xdfbfac[_0x48786d(0x961)]=null),_0x31622b(),_0x21d6ce(_0x48786d(0x822)),_0x312e5a(),_0x137a40('friendCircleList',_0x48786d(0x6fe))):_0x133148(new _0x3ccc07('Canvas\x20to\x20Blob\x20conversion\x20failed.')));}function _0x44f23d(_0x39f0e5){const _0x35edd7=_0x8dde82;_0x4fbcdd();const _0x3efbad=_0xdfbfac[_0x35edd7(0xdb9)]['find'](_0x1476f6=>_0x1476f6['id']===_0x39f0e5);if(!_0x3efbad)return;_0xdfbfac['activeFriendCircleId']=_0x39f0e5,_0x31622b(),document[_0x35edd7(0x1d6)](_0x35edd7(0xb00))['textContent']=_0x3efbad[_0x35edd7(0xb95)],_0x3c0b88(),_0x137a40('music',_0x35edd7(0x862)),_0x46033d();}function _0x4bc3b6(){const _0x40f2bd=_0x8dde82;if(!_0xdfbfac[_0x40f2bd(0xdb9)]||_0xdfbfac[_0x40f2bd(0xdb9)]['length']===0x0){console[_0x40f2bd(0x27f)](_0x40f2bd(0x649));return;}const _0x4132fa=_0xdfbfac[_0x40f2bd(0xdb9)][0x0];if(_0x4132fa[_0x40f2bd(0x527)]['length']<0x2){if(_0x40f2bd(0x91e)!=='IHPvD'){console[_0x40f2bd(0x27f)]('错误：第一个好友圈\x20\x22'+_0x4132fa[_0x40f2bd(0xb95)]+_0x40f2bd(0x32e));return;}else _0x1ac59c>_0x2f06c2&&(_0x9618bc*=_0x5b9b4e/_0x1b7466,_0x4190c2=_0x7354dd);}const _0x1721af={'id':'test_post_'+Date[_0x40f2bd(0x4a2)](),'authorType':_0x40f2bd(0x9ce),'authorId':_0x4132fa[_0x40f2bd(0x527)][0x0],'content':_0x40f2bd(0x59e),'timestamp':Date[_0x40f2bd(0x4a2)](),'likes':[_0x4132fa[_0x40f2bd(0x527)][0x1]],'comments':[{'commentId':'c_'+Date['now'](),'authorId':_0x4132fa[_0x40f2bd(0x527)][0x1],'content':_0x40f2bd(0x3ea)}]};_0x4132fa[_0x40f2bd(0x6b8)][_0x40f2bd(0xb66)](_0x1721af),_0x31622b(),console[_0x40f2bd(0x7ec)](_0x40f2bd(0xbec)+_0x4132fa[_0x40f2bd(0xb95)]+'\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'),_0x21d6ce(_0x40f2bd(0x70c));}window['addTestPost']=_0x4bc3b6;function _0xaacb02(_0x106129){const _0xa1b53d=_0x8dde82;return _0xdfbfac['userProfiles'][_0xa1b53d(0x76b)](_0x589c8b=>_0x589c8b['id']===_0x106129);}function _0x1a8bbc(_0xc5519c,_0x3fa781=_0x8dde82(0x19f)){const _0x445545=_0x8dde82,_0xc954fe=document[_0x445545(0x1d6)](_0x445545(0xa96));let _0x29e1a8=document[_0x445545(0x1d6)](_0x445545(0x3cc));if(_0xc5519c){if(_0x445545(0x78c)!==_0x445545(0x78c)){const _0x4c7760=_0x30e3eb[0x0]['trim'](),_0x165f02=_0x32edf5[0x1][_0x445545(0xcd2)]()[_0x445545(0xbe2)](/^"|"$/g,'');_0x2b4db2[_0x4c7760]=_0x165f02;}else!_0x29e1a8&&(_0x29e1a8=document[_0x445545(0x8f1)](_0x445545(0xce2)),_0x29e1a8['id']='feed-loader',_0xc954fe[_0x445545(0x5b8)](_0x29e1a8)),_0x29e1a8[_0x445545(0xa73)]=_0x445545(0x614)+_0x3fa781+_0x445545(0x1a2),_0x29e1a8['style']['display']=_0x445545(0xe12);}else _0x29e1a8&&(_0x29e1a8['style']['display']=_0x445545(0x338));}async function _0x127e93(){const _0x41f92e=_0x8dde82;if('VKuPK'!==_0x41f92e(0xecd)){const _0x38d4c2=_0x58c7c6['transaction'](_0x489d02,_0x41f92e(0xd17)),_0x4304e2=_0x38d4c2[_0x41f92e(0xa49)](_0x1a07f4),_0x3c0762=_0x4304e2['get'](_0xb29c94);_0x3c0762[_0x41f92e(0xdab)]=()=>_0x1efb3c(_0x3c0762['result']),_0x3c0762[_0x41f92e(0x514)]=()=>_0x49cd6e(_0x3c0762[_0x41f92e(0x27f)]);}else{const _0x2e48e8=_0xdfbfac[_0x41f92e(0xdb9)][_0x41f92e(0x76b)](_0x52f116=>_0x52f116['id']===_0xdfbfac[_0x41f92e(0x961)]);if(!_0x2e48e8||_0xdfbfac[_0x41f92e(0x556)])return;_0x1a8bbc(!![],_0x41f92e(0xa38)),await new Promise(_0x41a559=>setTimeout(_0x41a559,0x32)),_0xdfbfac[_0x41f92e(0x556)]=!![];try{let _0x5c2310=Date[_0x41f92e(0x4a2)]();_0x2e48e8['posts']&&_0x2e48e8[_0x41f92e(0x6b8)]['length']>0x0&&(_0x5c2310=Math[_0x41f92e(0xbf5)](..._0x2e48e8[_0x41f92e(0x6b8)][_0x41f92e(0x266)](_0x45e0b2=>_0x45e0b2['timestamp'])));const _0x58980f=await _0xc8bfc2(_0x2e48e8);if(!_0x58980f||_0x58980f[_0x41f92e(0x1e2)]===0x0){_0x21d6ce(_0x41f92e(0x90a));return;}const _0x44f4fa=_0x58980f['map'](async(_0x1f3d41,_0x3ce76a)=>{const _0x116056=_0x41f92e;if(_0x116056(0xaca)!==_0x116056(0xdad)){_0x1a8bbc(!![],'刷新了\x20'+(_0x3ce76a+0x1)+_0x116056(0x6ef)+_0x58980f[_0x116056(0x1e2)]+'\x20条动态...');const _0x2c23a3=_0x5c2310+(_0x3ce76a+0x1)*0x3c*0x3e8,_0xb1cefb={'id':_0x116056(0x25b)+_0x1f3d41[_0x116056(0x6b3)]+'_'+_0x2c23a3,'authorType':_0x116056(0x9ce),'authorId':_0x1f3d41[_0x116056(0x6b3)],'content':_0x1f3d41[_0x116056(0x103)],'timestamp':_0x2c23a3,'likes':_0x1f3d41[_0x116056(0x441)]||[],'comments':(_0x1f3d41['comments']||[])[_0x116056(0x266)]((_0x119cdb,_0x4781ea)=>({'commentId':'c_'+_0x2c23a3+'_'+_0x4781ea,'authorId':_0x119cdb[_0x116056(0x6b3)],'content':_0x119cdb[_0x116056(0xee)]}))};if(_0x1f3d41[_0x116056(0x89a)]===_0x116056(0xbf0)&&_0x1f3d41[_0x116056(0x3c7)]&&_0x1f3d41['artist'])try{if(_0x116056(0xadc)===_0x116056(0xbdb)){const _0x55f5c0=_0x39f99f[_0x116056(0x8f1)](_0x116056(0xce2));_0x55f5c0[_0x116056(0x213)]=_0x116056(0x831)+_0x3c1b7d[_0x116056(0x466)],_0x55f5c0['textContent']=_0x505d31[_0x116056(0xee)],_0x129176[_0x116056(0x5b8)](_0x55f5c0);}else{const _0x12891a=await _0x43a3df(_0x1f3d41[_0x116056(0x3c7)],_0x1f3d41[_0x116056(0x7dc)]);_0xb1cefb['type']=_0x116056(0xbf0),_0xb1cefb[_0x116056(0x3c7)]=_0x1f3d41[_0x116056(0x3c7)],_0xb1cefb[_0x116056(0x7dc)]=_0x1f3d41[_0x116056(0x7dc)],_0xb1cefb[_0x116056(0x520)]=_0x12891a[_0x116056(0x267)],_0xb1cefb[_0x116056(0xb21)]=_0x12891a[_0x116056(0x9f5)];}}catch(_0x1319bd){console[_0x116056(0x27f)](_0x116056(0x367),_0x1319bd),_0xb1cefb['type']=_0x116056(0x7ee);}else _0xb1cefb[_0x116056(0x8c7)]=_0x116056(0x7ee);return _0xb1cefb;}else{const _0x2ed4b6=_0x1cd3ac(_0x296d9d[_0x116056(0x2bb)]);_0x2ed4b6&&(_0x2ed4b6[_0x116056(0x209)]=_0x584f6f,_0x12ffb5(_0x455168[_0x116056(0x2bb)],_0x116056(0xcd5)));}}),_0x1a8970=await Promise[_0x41f92e(0x7c7)](_0x44f4fa);_0x2e48e8[_0x41f92e(0x6b8)][_0x41f92e(0xb66)](..._0x1a8970),_0x31622b(),_0x4fbcdd();}catch(_0x1b7d4e){if(_0x41f92e(0x83c)===_0x41f92e(0x10f)){_0x38f181['getElementById'](_0x41f92e(0x8d8))[_0x41f92e(0x3a0)](_0x41f92e(0x288),_0x4932c2),_0x3acdab['getElementById'](_0x41f92e(0x34f))[_0x41f92e(0x3a0)](_0x41f92e(0x288),()=>_0x2532e8(_0x41f92e(0xf03),'livestreamSettings')),_0x8d90a0[_0x41f92e(0x1d6)](_0x41f92e(0xa43))[_0x41f92e(0x3a0)](_0x41f92e(0x288),_0x112169),_0x463ede[_0x41f92e(0x1d6)](_0x41f92e(0xd6b))[_0x41f92e(0x3a0)](_0x41f92e(0x288),()=>_0x3ba346[_0x41f92e(0x1d6)](_0x41f92e(0xa0b))[_0x41f92e(0x288)]()),_0x86e552[_0x41f92e(0x1d6)]('livestream-bg-input')[_0x41f92e(0x3a0)](_0x41f92e(0xef8),_0x4df934=>{const _0x4beb0f=_0x41f92e,_0x537ca5=_0x4df934[_0x4beb0f(0x272)][_0x4beb0f(0x6d4)][0x0];if(_0x537ca5)_0x5043ce['getElementById'](_0x4beb0f(0xd6b))[_0x4beb0f(0x329)][_0x4beb0f(0x5b7)]=_0x4beb0f(0x8a1)+_0x3e2f68[_0x4beb0f(0x21c)](_0x537ca5)+'\x27)';});const _0x28cf61=[_0x41f92e(0xcd5),_0x41f92e(0xd46),_0x41f92e(0x183),_0x41f92e(0x85f),_0x41f92e(0xe5)];_0x28cf61[_0x41f92e(0xb85)](_0x5cf9d7=>{const _0x1b488f=_0x41f92e,_0x120f47=_0xe0a905['getElementById'](_0x1b488f(0x717)+_0x5cf9d7+_0x1b488f(0x909)),_0x5248ad=_0x5e3c3a['getElementById'](_0x1b488f(0x717)+_0x5cf9d7+_0x1b488f(0x99a));_0x120f47[_0x1b488f(0x3a0)](_0x1b488f(0x288),()=>_0x5248ad[_0x1b488f(0x288)]()),_0x5248ad[_0x1b488f(0x3a0)](_0x1b488f(0xef8),_0x19d678=>{const _0x257f11=_0x1b488f,_0x292319=_0x19d678['target'][_0x257f11(0x6d4)][0x0];if(_0x292319)_0x120f47[_0x257f11(0x329)]['backgroundImage']=_0x257f11(0x8a1)+_0x3257e2[_0x257f11(0x21c)](_0x292319)+'\x27)';});});}else console[_0x41f92e(0x27f)](_0x41f92e(0xedf),_0x1b7d4e),_0x21d6ce(_0x41f92e(0x46d)+_0x1b7d4e['message']);}finally{if(_0x41f92e(0xc11)!==_0x41f92e(0xc11)){const _0x24cea8=_0x4a90ec[_0x41f92e(0x9f0)](_0x260cec),_0x1d6090=0.4,_0x2e9f3d=_0x479c51[_0x41f92e(0x5ce)](_0x24cea8,_0x1d6090)*0x14;_0x383830[_0x41f92e(0x329)][_0x41f92e(0x71d)]='translateY(-'+_0x2e9f3d+'px)';}else _0x3c0b88(),_0x1a8bbc(![]),_0xdfbfac[_0x41f92e(0x556)]=![];}}}async function _0xc8bfc2(_0x5a6dfb){const _0x218c6e=_0x8dde82;if(_0x218c6e(0xc0b)!=='HEwVF')_0x41b0be=_0x329056[_0x218c6e(0x412)];else{const _0x5d4c14=_0x5a6dfb[_0x218c6e(0x527)][_0x218c6e(0x266)](_0x4c21ba=>_0x5844c7(_0x4c21ba))[_0x218c6e(0xeb3)](Boolean);if(_0x5d4c14[_0x218c6e(0x1e2)]===0x0)return null;const _0x7a3809=_0x5c5e8c(),_0xd22803=_0xaacb02(_0x5a6dfb[_0x218c6e(0xacb)])||_0xdfbfac['userProfiles'][0x0],_0x39f140=_0xd22803?'\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20'+_0xd22803['name']+_0x218c6e(0x7cd)+(_0xd22803['persona']||'无')+'\x0a':'',_0x4124a5=await Promise['all'](_0x5d4c14[_0x218c6e(0x266)](async _0xd3d7a6=>{const _0x5c17b0=_0x218c6e,{omniText:_0x2413b9}=_0x5a83ee(_0xd3d7a6['id'],null),_0x289dbd=_0x2c9d46(_0xd3d7a6['id']),_0x45a51e=await _0x421bdd(_0xd3d7a6['id']),_0xcb5350=_0x2a0a9d(_0xd3d7a6['id']),_0x310edf=_0xd3d7a6[_0x5c17b0(0x5ee)]&&_0xd3d7a6['linkedWorldBookIds']['length']>0x0?_0x5c17b0(0xe62)+_0xd3d7a6[_0x5c17b0(0xb95)]+'的个人专属世界观设定\x0a'+_0xd3d7a6[_0x5c17b0(0x5ee)][_0x5c17b0(0x266)](_0x6e8779=>_0xdfbfac[_0x5c17b0(0xe7d)]['find'](_0x22d3f6=>_0x22d3f6['id']===_0x6e8779))[_0x5c17b0(0xeb3)](Boolean)[_0x5c17b0(0x266)](_0x16d125=>_0x5c17b0(0x647)+_0x16d125['name']+'\x0a'+_0x16d125[_0x5c17b0(0xee)])['join'](''):'';return _0x5c17b0(0x3c0)+_0xd3d7a6[_0x5c17b0(0xb95)]+_0x5c17b0(0xdd6)+_0xd3d7a6['id']+_0x5c17b0(0x895)+_0xd3d7a6[_0x5c17b0(0x79b)]+_0x5c17b0(0xbbd)+_0x2413b9+'\x0a'+_0x289dbd+'\x0a'+_0x45a51e+'\x0a'+_0xcb5350+'\x0a'+_0x310edf;})),_0xd98237=Math[_0x218c6e(0x33e)](Math[_0x218c6e(0x48a)]()*0x3)+0x2,_0x276f63=_0x218c6e(0x425)+_0xd98237+_0x218c6e(0x609)+_0xd22803[_0x218c6e(0xb95)]+_0x218c6e(0x657)+_0xd22803['id']+_0x218c6e(0x474)+_0x5d4c14[_0x218c6e(0x266)](_0x1138e8=>_0x1138e8[_0x218c6e(0xb95)])['join']('、')+_0x218c6e(0x800)+_0xd22803['name']+'\x22（即\x22我\x22，用户）来发布任何动态或评论。\x0a\x0a#\x20【记忆使用守则】(！！哼，看好了，这才是新规矩！！)\x0a\x0a1.\x20\x20**【法律A\x20(对你)：发布新动态时】**\x0a\x20\x20\x20\x20-\x20当你（例如：\x22'+_0x5d4c14[0x0][_0x218c6e(0xb95)]+_0x218c6e(0x4ec)+_0xd22803['name']+_0x218c6e(0x69e)+_0xd22803['name']+_0x218c6e(0x865)+_0x5d4c14[0x0][_0x218c6e(0xb95)]+'\x22）要**评论**另一个【角色】（例如：\x22'+(_0x5d4c14[0x1]?_0x5d4c14[0x1][_0x218c6e(0xb95)]:_0x218c6e(0xbab))+_0x218c6e(0xcba)+_0xd22803[_0x218c6e(0xb95)]+_0x218c6e(0xbfe)+_0x4124a5[_0x218c6e(0xd9a)]('\x0a\x0a')+'\x0a'+_0x39f140+_0x218c6e(0x9fd)+_0x7a3809+_0x218c6e(0x15d)+_0xd98237+_0x218c6e(0x674)+_0xd98237+_0x218c6e(0x205),_0x1185f2=[{'role':_0x218c6e(0xba3),'content':_0x276f63},{'role':_0x218c6e(0xa29),'content':_0x218c6e(0x161)}];_0x1185f2[_0x218c6e(0xb66)]({'role':'user','content':_0x218c6e(0xade)+_0xd98237+_0x218c6e(0xb3a)});let _0x3ceaac='';try{if(_0x218c6e(0x259)===_0x218c6e(0x259)){_0x3ceaac=await _0x2fa074(_0x1185f2,{'json':!![]});const _0x26e4dd=_0x3ceaac['match'](/(\[[\s\S]*\])/);if(!_0x26e4dd)throw new Error('AI未能返回有效的JSON数组格式。');const _0xaa497e=_0x26e4dd[0x1],_0xb47b98=JSON['parse'](_0xaa497e);if(!Array[_0x218c6e(0xca5)](_0xb47b98))throw new Error(_0x218c6e(0xbbe));return _0xb47b98;}else _0x46d8b7(_0x187805-0x1);}catch(_0x1ec626){console[_0x218c6e(0x27f)](_0x218c6e(0xb5d),_0x1ec626),_0x1ec626[_0x218c6e(0x69f)]=_0x3ceaac;throw _0x1ec626;}}}async function _0x20a3e4(){const _0x2c0b32=_0x8dde82,_0x50aa6d=_0xdfbfac[_0x2c0b32(0xdb9)][_0x2c0b32(0x76b)](_0x413838=>_0x413838['id']===_0xdfbfac[_0x2c0b32(0x961)]);if(!_0x50aa6d)return;const _0x14e09d=await _0x13215d(_0x2c0b32(0x6af)+_0x50aa6d['name']+_0x2c0b32(0x9b2));_0x14e09d&&(_0x50aa6d[_0x2c0b32(0x6b8)]=[],_0x31622b(),_0x3c0b88(),_0x21d6ce(_0x2c0b32(0x650)));}function _0x3c0b88(){const _0x4a8d58=_0x8dde82;if(_0x4a8d58(0x597)!=='WeRSD')_0x14b42c['activeUserProfileId']=_0x2f859b;else{const _0x2d0f3a=document[_0x4a8d58(0x1d6)](_0x4a8d58(0xc70)),_0x44ec1b=_0xdfbfac[_0x4a8d58(0xdb9)][_0x4a8d58(0x76b)](_0x1e038c=>_0x1e038c['id']===_0xdfbfac[_0x4a8d58(0x961)]);if(!_0x44ec1b){if(_0x4a8d58(0x446)===_0x4a8d58(0x9ac))_0x75a02[_0x4a8d58(0x27f)](_0x4a8d58(0x2c1),_0x4152db);else{_0x2d0f3a[_0x4a8d58(0xa73)]=_0x4a8d58(0x1a1);return;}}if(!_0x44ec1b['posts']||_0x44ec1b[_0x4a8d58(0x6b8)][_0x4a8d58(0x1e2)]===0x0){if(_0x4a8d58(0xd12)!==_0x4a8d58(0xd6a)){_0x2d0f3a[_0x4a8d58(0xa73)]=_0x4a8d58(0xeae);return;}else{const _0x4bbba6=_0x302928['observed_changes'][_0x4a8d58(0x8b8)](0x0,0x2)[_0x4a8d58(0x266)](_0x416c94=>{const _0x21931b=_0x4a8d58;if(typeof _0x416c94===_0x21931b(0x193))return _0x416c94;if(typeof _0x416c94===_0x21931b(0x388)&&_0x416c94!==null)return _0x3c7c0a[_0x21931b(0x100)](_0x416c94)[_0x21931b(0xd9a)](_0x21931b(0x5a0));return _0x21931b(0x84d);});_0x31cc4d[_0x4a8d58(0xb66)](_0x4a8d58(0x14e)+_0x4bbba6[_0x4a8d58(0xd9a)]('；'));}}_0x2d0f3a[_0x4a8d58(0xa73)]='';const _0x4a2670=[..._0x44ec1b[_0x4a8d58(0x6b8)]][_0x4a8d58(0x6d9)]((_0x34d57a,_0x1cc837)=>_0x1cc837[_0x4a8d58(0x10c)]-_0x34d57a[_0x4a8d58(0x10c)]);_0x4a2670[_0x4a8d58(0xb85)](_0x4ebb61=>{const _0x521c73=_0x4a8d58,_0xd6c56b=document[_0x521c73(0x8f1)](_0x521c73(0xce2));_0xd6c56b['className']=_0x521c73(0x447);let _0x1d92b6='未知',_0xec78e7=_0x1af29b;if(_0x4ebb61[_0x521c73(0x8f8)]==='user'){if(_0x521c73(0x53c)!==_0x521c73(0x53c))_0x4add4a['classList'][_0x521c73(0x9ad)](_0x521c73(0x36e)),_0x420c23(()=>_0x2de608['style']['display']='none',0x12c);else{const _0x102fdd=_0xaacb02(_0x4ebb61[_0x521c73(0x6b3)]);_0x102fdd&&(_0x1d92b6=_0x102fdd[_0x521c73(0xb95)],_0xec78e7=_0x102fdd[_0x521c73(0x584)]);}}else{const _0x37a3bb=_0x5844c7(_0x4ebb61[_0x521c73(0x6b3)]);_0x37a3bb&&(_0x1d92b6=_0x37a3bb[_0x521c73(0xb95)],_0xec78e7=_0x37a3bb[_0x521c73(0x584)]);}const _0x43ff79='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0xec78e7+_0x521c73(0x3d3)+_0x1d92b6+'</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4d4781=_0x521c73(0x567)+_0x4ebb61[_0x521c73(0xee)]+'</p>';let _0x470dad='';if(_0x4ebb61[_0x521c73(0x412)]||_0x4ebb61[_0x521c73(0xe2d)]){const _0x235b88=_0x521c73(0xdbb)+_0x4ebb61['id'];_0x470dad=_0x521c73(0xb94)+_0x235b88+'\x22\x20class=\x22post-image\x22></div>',setTimeout(()=>{const _0x88ce5=_0x521c73;if('PAHss'!==_0x88ce5(0xbb0))_0x2b0100(_0x5bb4c0['id']);else{const _0x376e1b=document[_0x88ce5(0x1d6)](_0x235b88);if(!_0x376e1b)return;if(_0x4ebb61[_0x88ce5(0x412)])_0x376e1b[_0x88ce5(0xcab)]=_0x4ebb61[_0x88ce5(0x412)];else _0x4ebb61['imageId']&&(_0x88ce5(0x655)!==_0x88ce5(0xcad)?_0x4131e2(_0x4ebb61['imageId'])['then'](_0x378d45=>{const _0x19d0fa=_0x88ce5;if(_0x19d0fa(0x8ea)==='YyrJQ'){if(_0x378d45){if(_0x19d0fa(0x381)!=='tTaEV'){const _0x3286d6=_0x5b118c['target'][_0x19d0fa(0x63f)][_0x19d0fa(0x798)],_0x455e02=_0xeae26b['querySelectorAll']('.wb-entry-item\x20input[data-category-id=\x22'+_0x3286d6+'\x22]'),_0x4d1c88=_0x5ac9c0[_0x19d0fa(0x7af)](_0x19d0fa(0xbf7)+_0x3286d6+_0x19d0fa(0xd26)),_0xa8312d=_0x1f3bce[_0x19d0fa(0xb6c)](_0x19d0fa(0x522)+_0x3286d6+'\x22]');if(_0x4d1c88[_0x19d0fa(0x1e2)]===0x0)_0xa8312d[_0x19d0fa(0xefd)]=![],_0xa8312d['indeterminate']=![];else _0x4d1c88[_0x19d0fa(0x1e2)]===_0x455e02[_0x19d0fa(0x1e2)]?(_0xa8312d[_0x19d0fa(0xefd)]=!![],_0xa8312d[_0x19d0fa(0xda1)]=![]):_0xa8312d['indeterminate']=!![];_0x44e94c();}else{const _0x1cc163=URL[_0x19d0fa(0x21c)](_0x378d45);_0x376e1b[_0x19d0fa(0xcab)]=_0x1cc163,_0x376e1b[_0x19d0fa(0x787)]=()=>URL[_0x19d0fa(0x953)](_0x1cc163);}}}else _0x4d81f1(_0x303744+0x1);}):(_0x42c4d1=_0x88ce5(0xaa7),_0x40a832=_0x88ce5(0x9d6),_0x4b7a98=_0x88ce5(0x9d6),_0x2996e2='（【【【最高指令：初始生成】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**所有**历史信息，从零开始，撰写一份【全新的】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a'));}},0x0);}let _0x60c683='';_0x4ebb61[_0x521c73(0x8c7)]===_0x521c73(0xbf0)&&_0x4ebb61['songName']&&(_0x60c683=_0x521c73(0xecb)+_0x4ebb61['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x4ebb61[_0x521c73(0x520)]||_0x1af29b)+_0x521c73(0x634)+_0x4ebb61[_0x521c73(0x3c7)]+_0x521c73(0x856)+_0x4ebb61['artist']+_0x521c73(0x22a)+(_0x4ebb61[_0x521c73(0xb21)]?'▶':'⚠')+_0x521c73(0x702));const _0x5089e2='<div\x20class=\x22post-timestamp\x22>'+new Date(_0x4ebb61['timestamp'])[_0x521c73(0x985)](_0x521c73(0x731))+_0x521c73(0x396);let _0x1ee939='';if(_0x4ebb61['likes']&&_0x4ebb61[_0x521c73(0x441)][_0x521c73(0x1e2)]>0x0||_0x4ebb61['comments']&&_0x4ebb61[_0x521c73(0xded)]['length']>0x0){if('NRAOY'!==_0x521c73(0xe35))_0x39e20a[_0x521c73(0x555)][_0x521c73(0x1cd)](_0x521c73(0x8d5));else{let _0x2e09be='';if(_0x4ebb61[_0x521c73(0x441)]&&_0x4ebb61[_0x521c73(0x441)][_0x521c73(0x1e2)]>0x0){if(_0x521c73(0x80c)!==_0x521c73(0x80c))_0x4b5157[_0x521c73(0xb66)](_0x427efc[_0x521c73(0x2df)](_0x69a0b7));else{const _0x98392c=_0x4ebb61[_0x521c73(0x441)][_0x521c73(0x266)](_0x3a1b01=>_0x5844c7(_0x3a1b01)?.[_0x521c73(0xb95)]||'未知')['join']('、'),_0xdfba1c=_0x521c73(0x827);_0x2e09be=_0x521c73(0xb2a)+_0xdfba1c+'\x20'+_0x98392c+_0x521c73(0x396);}}let _0x87948a='';if(_0x4ebb61[_0x521c73(0xded)]&&_0x4ebb61[_0x521c73(0xded)][_0x521c73(0x1e2)]>0x0){if(_0x521c73(0x676)!==_0x521c73(0x676))_0xbf2958=_0x2819fc[_0x521c73(0xc37)][0x0];else{const _0x470278=_0x4ebb61['comments']['map'](_0x1e4d9b=>{const _0x228a83=_0x521c73,_0x30f85a=_0x5844c7(_0x1e4d9b[_0x228a83(0x6b3)])?.[_0x228a83(0xb95)]||'未知';return _0x228a83(0xb9f)+_0x30f85a+_0x228a83(0x9c8)+_0x1e4d9b[_0x228a83(0xee)]+_0x228a83(0x396);})['join']('');_0x87948a=_0x521c73(0xda7)+_0x470278+_0x521c73(0x396);}}_0x1ee939=_0x521c73(0xaa6)+_0x2e09be+_0x521c73(0x1f5)+_0x87948a+_0x521c73(0xc78);}}const _0x3a6efe=_0x521c73(0x7fe)+_0x4d4781+_0x470dad+_0x60c683+_0x521c73(0x396);_0xd6c56b[_0x521c73(0xa73)]=_0x43ff79+_0x3a6efe+_0x5089e2+_0x1ee939;if(_0x4ebb61[_0x521c73(0x8c7)]==='music'&&_0x4ebb61['playableUrl']){const _0x6e61c7=_0xd6c56b[_0x521c73(0xb6c)](_0x521c73(0x1ff));_0x6e61c7&&_0x6e61c7[_0x521c73(0x3a0)](_0x521c73(0x288),function(){const _0x102edb={'id':_0x4ebb61['id'],'url':_0x4ebb61['playableUrl']};_0x11e9ce(this,_0x102edb);});}_0x2d0f3a[_0x521c73(0x5b8)](_0xd6c56b);});}}document[_0x8dde82(0x1d6)](_0x8dde82(0xe30))[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x20a3e4),document[_0x8dde82(0x1d6)](_0x8dde82(0x62c))[_0x8dde82(0x3a0)]('click',_0x127e93),document[_0x8dde82(0x1d6)](_0x8dde82(0x969))['addEventListener'](_0x8dde82(0x288),()=>_0x137a40('home',_0x8dde82(0x862))),document['getElementById'](_0x8dde82(0xc6f))[_0x8dde82(0x3a0)]('click',()=>_0x41e873()),document[_0x8dde82(0x1d6)](_0x8dde82(0xb4e))['addEventListener'](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0x862),'friendCircleEdit')),document[_0x8dde82(0x1d6)](_0x8dde82(0x2ee))['addEventListener']('click',_0x51d04e),document[_0x8dde82(0x1d6)]('delete-friend-circle-button')[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x419ada),document['getElementById'](_0x8dde82(0xd95))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x1c5f0b=_0x8dde82;if('fMMBw'===_0x1c5f0b(0xc97))return{'url':_0x5b4819,'cover':_0x245937[_0x1c5f0b(0x267)],'source':_0x4ed449};else _0x312e5a(),_0x137a40(_0x1c5f0b(0x862),_0x1c5f0b(0xbf0));}),document['getElementById']('edit-current-circle-button')[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x2a11b7=_0x8dde82;if(_0xdfbfac['activeFriendCircleId']){if(_0x2a11b7(0x332)===_0x2a11b7(0x598)){_0x509695[_0x2a11b7(0x27f)](_0x2a11b7(0x734));return;}else _0x41e873(_0xdfbfac[_0x2a11b7(0x961)]);}}),document[_0x8dde82(0x1d6)](_0x8dde82(0x5f3))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x22edc1=_0x8dde82,_0x3650e6=_0xdfbfac['friendCircles']['find'](_0x3e9b1c=>_0x3e9b1c['id']===_0xdfbfac[_0x22edc1(0x961)]);if(!_0x3650e6||_0xdfbfac[_0x22edc1(0x556)])return;const _0x5725ae=_0x3650e6[_0x22edc1(0xacb)],_0x1aad2f=_0xdfbfac[_0x22edc1(0xc37)][_0x22edc1(0x76b)](_0x3fdbfb=>_0x3fdbfb['id']===_0x5725ae);if(!_0x1aad2f){_0x21d6ce(_0x22edc1(0x9bb));return;}const _0x4cd4d9=document['getElementById'](_0x22edc1(0x8d2))[_0x22edc1(0xee2)][_0x22edc1(0xcd2)](),_0x4724da=_0xdfbfac['pendingPostAttachments'][_0x22edc1(0x412)],_0x45de9f=_0xdfbfac[_0x22edc1(0xa09)][_0x22edc1(0xbf0)],_0x1ede83=_0xdfbfac['pendingPostAttachments'][_0x22edc1(0xe2d)];if(!_0x4cd4d9&&!_0x4724da&&!_0x45de9f){_0x21d6ce(_0x22edc1(0xeef));return;}const _0xdc18eb={'id':_0x22edc1(0x17a)+Date['now'](),'authorType':'user','authorId':_0x1aad2f['id'],'content':_0x4cd4d9,'timestamp':Date['now'](),'likes':[],'comments':[]};if(_0x1ede83)_0xdc18eb[_0x22edc1(0xe2d)]=_0x1ede83;else _0x4724da&&(_0xdc18eb[_0x22edc1(0x412)]=_0x4724da);_0x45de9f?(_0xdc18eb['type']='music',Object[_0x22edc1(0x24a)](_0xdc18eb,_0x45de9f)):_0xdc18eb[_0x22edc1(0x8c7)]=_0x22edc1(0x7ee),_0x3650e6['posts'][_0x22edc1(0xb66)](_0xdc18eb),_0x31622b(),_0x3c0b88(),document[_0x22edc1(0x1d6)](_0x22edc1(0x8d2))[_0x22edc1(0xee2)]='',_0xdfbfac[_0x22edc1(0xa09)][_0x22edc1(0x412)]=null,_0xdfbfac[_0x22edc1(0xa09)][_0x22edc1(0xbf0)]=null,_0xdfbfac[_0x22edc1(0xa09)][_0x22edc1(0xe2d)]=null,_0xc2054d(),_0x1b4876(_0xdc18eb);}),document[_0x8dde82(0x1d6)](_0x8dde82(0xc71))['addEventListener']('click',()=>{const _0x1d4971=_0x8dde82;document[_0x1d4971(0x1d6)](_0x1d4971(0x8d6))[_0x1d4971(0x288)]();}),document[_0x8dde82(0x1d6)](_0x8dde82(0x8d6))[_0x8dde82(0x3a0)]('change',async _0x2d2917=>{const _0xa2dc80=_0x8dde82;if(_0xa2dc80(0xd24)!=='JmBmm'){const _0x99981b=_0x2d2917['target'][_0xa2dc80(0x6d4)][0x0];if(!_0x99981b)return;try{if(_0xa2dc80(0x9d9)===_0xa2dc80(0x1ed))_0x28e127(_0xe07a75),_0x55ad0e[_0xa2dc80(0xee2)]='',_0x58da06(_0x210786,0x64);else{const _0x3334b7=await _0x265126(_0x99981b,0x320,0.8,!![]),_0x563dc6=_0xa2dc80(0x9f2)+Date[_0xa2dc80(0x4a2)]();await _0x510f28(_0x563dc6,_0x3334b7),_0xdfbfac[_0xa2dc80(0xa09)][_0xa2dc80(0xe2d)]=_0x563dc6,_0xdfbfac[_0xa2dc80(0xa09)][_0xa2dc80(0x412)]=null,_0xdfbfac[_0xa2dc80(0xa09)]['music']=null,_0xc2054d();}}catch(_0x4e82e4){if(_0xa2dc80(0x4d1)!==_0xa2dc80(0xc4d))_0x21d6ce(_0xa2dc80(0xa86)+_0x4e82e4[_0xa2dc80(0x8ac)]);else return'';}_0x2d2917[_0xa2dc80(0x272)][_0xa2dc80(0xee2)]='';}else _0x57a77a=_0x145459;}),document[_0x8dde82(0x1d6)](_0x8dde82(0x148))['addEventListener'](_0x8dde82(0x288),async()=>{const _0x561640=_0x8dde82,_0x557fe8=await _0x16e7af();if(!_0x557fe8)return;_0x21d6ce(_0x561640(0x8b3));try{const _0x5a320a=await _0x43a3df(_0x557fe8['songName'],_0x557fe8[_0x561640(0x7dc)]);_0xdfbfac[_0x561640(0xa09)][_0x561640(0xbf0)]={'songName':_0x557fe8['songName'],'artist':_0x557fe8[_0x561640(0x7dc)],'coverUrl':_0x5a320a[_0x561640(0x267)],'playableUrl':_0x5a320a['url']},_0xdfbfac[_0x561640(0xa09)]['image']=null,_0xc2054d();}catch(_0x142cbf){_0x21d6ce('音乐搜索失败:\x20'+_0x142cbf[_0x561640(0x8ac)]);}});function _0x64a00(){const _0x3e0c0a=_0x8dde82,_0x3b3901=new Date(),_0x337b3f=document['getElementById'](_0x3e0c0a(0x44e)),_0x1a0228=document[_0x3e0c0a(0x1d6)]('home-date');if(_0x337b3f&&_0x1a0228){const _0x43cae=String(_0x3b3901['getHours']())[_0x3e0c0a(0x4b9)](0x2,'0'),_0x236c7d=String(_0x3b3901[_0x3e0c0a(0x212)]())[_0x3e0c0a(0x4b9)](0x2,'0');_0x337b3f[_0x3e0c0a(0x101)]=_0x43cae+':'+_0x236c7d;const _0x305733=_0x3b3901[_0x3e0c0a(0xb0a)]()+0x1,_0x5bb66d=_0x3b3901[_0x3e0c0a(0x55b)](),_0x5357e9=[_0x3e0c0a(0x4de),_0x3e0c0a(0x6c0),_0x3e0c0a(0x2c2),_0x3e0c0a(0x29e),_0x3e0c0a(0xcf9),_0x3e0c0a(0xe69),'星期六'][_0x3b3901[_0x3e0c0a(0xab8)]()];_0x1a0228[_0x3e0c0a(0x101)]=_0x305733+'月'+_0x5bb66d+'日\x20'+_0x5357e9;}}function _0x826be3(_0x4859f9){const _0x5d7802=_0x8dde82;if('MRVCw'===_0x5d7802(0x1ea)){if(!_0x4859f9)return'';const _0xa35ef4=new Date(_0x4859f9),_0x1168ba=String(_0xa35ef4[_0x5d7802(0xc43)]())[_0x5d7802(0x4b9)](0x2,'0'),_0x2d93a4=String(_0xa35ef4['getMinutes']())[_0x5d7802(0x4b9)](0x2,'0');return _0x1168ba+':'+_0x2d93a4;}else{const _0xf39831=_0x5aa6be['createElement'](_0x5d7802(0xce2));_0xf39831[_0x5d7802(0x213)]='world-book-item',_0xf39831[_0x5d7802(0x63f)]['id']=_0x222a8c['id'];const _0x1cf8c4=_0x10c757['id']===_0x249d05[_0x5d7802(0xb83)]?_0x5d7802(0xd68):'';_0xf39831[_0x5d7802(0xa73)]=_0x5d7802(0xa5e)+(_0x1a4173[_0x5d7802(0x584)]||_0x5e8bac)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x399363[_0x5d7802(0xb95)]+_0x1cf8c4+_0x5d7802(0x4dd)+_0x289c9b['persona']['substring'](0x0,0x64)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xf39831[_0x5d7802(0x3a0)](_0x5d7802(0x288),()=>_0xca880d(_0x287a20['id'])),_0x1defee[_0x5d7802(0x5b8)](_0xf39831);}}function _0x5c5e8c(){const _0x136292=_0x8dde82,_0x50527d=_0xdfbfac[_0x136292(0xdb9)][_0x136292(0x76b)](_0x178527=>_0x178527['id']===_0xdfbfac[_0x136292(0x961)]),_0x2db00a=_0x50527d?_0x50527d[_0x136292(0x6b8)]:[];if(!_0x2db00a||_0x2db00a[_0x136292(0x1e2)]===0x0)return'';const _0x2dc159=_0x2db00a[_0x136292(0x8b8)](0x0,0x5),_0x4a3e82=_0x2dc159[_0x136292(0x266)](_0x58587d=>{const _0x154b25=_0x136292;if(_0x154b25(0x99f)===_0x154b25(0x747))_0x47a91d=_0x154b25(0x4f0)+_0x50b021;else{const _0x2282f2=_0x5844c7(_0x58587d['authorId'])||{'name':'未知'};let _0x75a6d0='-\x20[动态]\x20'+_0x2282f2[_0x154b25(0xb95)]+_0x154b25(0xbd7)+(_0x58587d['thought']||_0x58587d[_0x154b25(0xee)])+'”';if(_0x58587d['type']===_0x154b25(0xbf0)){if('bgCIF'==='blCjE'){const _0x1efafd=_0x23d060[_0x154b25(0x314)](_0x3d3203,_0x154b25(0xd17)),_0x3a7610=_0x1efafd['objectStore'](_0x2171cc),_0x248e61=_0x3a7610[_0x154b25(0x4f9)](_0x5e5fae);_0x248e61[_0x154b25(0xdab)]=()=>_0x3a2abb(_0x248e61['result']?_0x248e61[_0x154b25(0xd29)][_0x154b25(0x1e0)]:null),_0x248e61[_0x154b25(0x514)]=()=>_0x23535e(_0x248e61[_0x154b25(0x27f)]);}else _0x75a6d0+=_0x154b25(0x38c)+_0x58587d[_0x154b25(0x3c7)]+_0x154b25(0x5a0)+_0x58587d[_0x154b25(0x7dc)]+')';}return _0x75a6d0;}});return _0x136292(0x7c1)+_0x4a3e82[_0x136292(0xd9a)]('\x0a');}function _0x2c9d46(_0x34d816){const _0x5c4900=_0x8dde82;if(_0x5c4900(0xafc)!==_0x5c4900(0xafc))_0x47c297[_0x5c4900(0xb6c)](_0x5c4900(0x302))['onclick']=()=>{_0x19f215(_0x35202b),_0x1d3913();};else{const _0x1b2014=_0xdfbfac[_0x5c4900(0xc37)][_0x5c4900(0x76b)](_0x2084a9=>_0x2084a9['id']===_0xdfbfac['activeUserProfileId'])||{'name':'你'},_0x5c9b49=_0xdfbfac[_0x5c4900(0x26a)][_0x5c4900(0x76b)](_0x50f90e=>_0x50f90e[_0x5c4900(0x113)]===_0x34d816);if(!_0x5c9b49||!_0x5c9b49['entries']||_0x5c9b49[_0x5c4900(0xd86)][_0x5c4900(0x1e2)]===0x0){if(_0x5c4900(0x6ff)===_0x5c4900(0x6ff))return'';else{const _0x5a9034=_0x1ce002[_0x5c4900(0x63f)][_0x5c4900(0x798)],_0x44e26c=_0x38f9f2[_0x5c4900(0x7af)](_0x5c4900(0xbf7)+_0x5a9034+'\x22]'),_0x4212f1=_0x13f21e['querySelectorAll'](_0x5c4900(0xbf7)+_0x5a9034+_0x5c4900(0xd26));_0x4212f1[_0x5c4900(0x1e2)]>0x0&&_0x4212f1[_0x5c4900(0x1e2)]<_0x44e26c[_0x5c4900(0x1e2)]&&(_0x1ba1ad[_0x5c4900(0xda1)]=!![]);}}const _0x4c7514=_0x5c9b49['entries'][_0x5c4900(0x8b8)](-0x8),_0x494089=_0x4c7514[_0x5c4900(0x266)](_0x523d14=>{const _0x5a2786=_0x5c4900,_0x2c0b75=_0x523d14[_0x5a2786(0x3ba)]===_0x5a2786(0xa29)?_0x1b2014[_0x5a2786(0xb95)]:_0x5844c7(_0x523d14[_0x5a2786(0x3ba)])[_0x5a2786(0xb95)];return'-\x20['+new Date(_0x523d14[_0x5a2786(0x10c)])[_0x5a2786(0xea3)]()+']\x20'+_0x2c0b75+_0x5a2786(0x17f)+_0x523d14[_0x5a2786(0xee)];})[_0x5c4900(0xd9a)]('\x0a');return _0x5c4900(0x8e6)+_0x1b2014[_0x5c4900(0xb95)]+_0x5c4900(0x438)+_0x494089;}}function _0x2a0a9d(_0x4effe6){const _0x472ee7=_0x8dde82,_0x111d4e=_0xdfbfac[_0x472ee7(0xb63)][_0x4effe6];if(!_0x111d4e||_0x111d4e[_0x472ee7(0x1e2)]===0x0)return'';const _0x302c10=_0x111d4e['slice'](0x0,0x3),_0x271999=_0x302c10[_0x472ee7(0x266)]((_0x4aca01,_0x538685)=>{const _0x3e5673=_0x472ee7,_0x4a3ae9=_0x4aca01[_0x3e5673(0x4dc)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x3e5673(0x7e8),_0x62915=(_0x4aca01[_0x3e5673(0x4dc)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x3e5673(0xc12)]('\x0a')[_0x3e5673(0x266)](_0x46e2ea=>_0x46e2ea[_0x3e5673(0xcd2)]())['filter'](_0x448939=>_0x448939[_0x3e5673(0xb91)]('-'))[_0x3e5673(0xd9a)]('\x20');return _0x3e5673(0xa0f)+(_0x538685+0x1)+_0x3e5673(0x2f4)+_0x4a3ae9+_0x3e5673(0xce6)+_0x62915;})[_0x472ee7(0xd9a)]('\x0a');return _0x472ee7(0xd1e)+_0x271999;}function _0x5cf94c(){const _0x406cc9=_0x8dde82;if(_0x406cc9(0xa6b)!==_0x406cc9(0xa6b))_0x54ce55[_0x406cc9(0x57a)]();else{const _0x26c997=document[_0x406cc9(0x1d6)](_0x406cc9(0x3fc)),_0x113119=_0xdfbfac[_0x406cc9(0x3a8)][_0x406cc9(0xae6)];_0x113119?(_0x26c997[_0x406cc9(0x329)][_0x406cc9(0x5b7)]=_0x406cc9(0x1c2)+_0x113119+')',_0x26c997['style'][_0x406cc9(0xd79)]=_0x406cc9(0x267),_0x26c997['style'][_0x406cc9(0x453)]=_0x406cc9(0x6cc),_0x26c997[_0x406cc9(0x329)]['color']=_0x406cc9(0xa90),_0x26c997[_0x406cc9(0x7af)](_0x406cc9(0xd93))[_0x406cc9(0xb85)](_0x173a94=>{const _0x135221=_0x406cc9;_0x173a94[_0x135221(0x329)][_0x135221(0x721)]=_0x135221(0x158);})):(_0x26c997['style'][_0x406cc9(0x5b7)]='',_0x26c997[_0x406cc9(0x329)][_0x406cc9(0x477)]='',_0x26c997[_0x406cc9(0x7af)](_0x406cc9(0xd93))[_0x406cc9(0xb85)](_0x4f8e29=>{const _0x1e96af=_0x406cc9;_0x4f8e29['style'][_0x1e96af(0x721)]='';}));}}const _0x1ca02e=document[_0x8dde82(0x1d6)](_0x8dde82(0x326)),_0x88050b=document['getElementById'](_0x8dde82(0xea9));_0x1ca02e[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x279995=_0x8dde82;if(_0x279995(0x459)===_0x279995(0x459))_0x312e5a(),_0x137a40(_0x279995(0x862),_0x279995(0x410));else{const _0x555785=_0x331d1f[_0x279995(0xb6c)](_0x279995(0x2ad));_0x555785&&_0x555785[_0x279995(0x9ad)]();const _0x10a975=_0x1bf401[_0x279995(0xb6c)]('.screen.active');if(_0x10a975&&(_0x10a975['id']==='meeting-view-screen'||_0x10a975['id']===_0x279995(0xc09)))_0x26b403();else{const _0x42673a=_0x2f75ce['querySelectorAll'](_0x279995(0x654));_0x42673a[_0x279995(0xb85)](_0x33971d=>_0x33971d[_0x279995(0x9ad)]());}}}),_0x88050b[_0x8dde82(0x3a0)]('click',()=>{const _0xd1dcf3=_0x8dde82;_0xd1dcf3(0x86c)===_0xd1dcf3(0x5e8)?_0x1e740d(_0xd1dcf3(0x5cc))[_0xd1dcf3(0x94f)](_0x222991=>{const _0x52860c=_0xd1dcf3;if(_0x222991){const _0x4ce3e1=_0x37b94a(_0x39d7f5[_0x52860c(0x2bb)]);_0x4ce3e1&&(delete _0x4ce3e1['livestreamSpriteTransform'],_0x5700cc(),_0xa8a7cb(_0x4ce3e1['id'],_0x52860c(0xcd5)),_0x24567d(_0x52860c(0xdce)),_0x10fc0d(!![]));}}):(_0x1b7661(),_0x137a40(_0xd1dcf3(0xc26),_0xd1dcf3(0x410)));}),document[_0x8dde82(0x1d6)]('back-to-home-from-meeting-list')['addEventListener'](_0x8dde82(0x288),()=>{const _0x2598aa=_0x8dde82;_0x137a40(_0x2598aa(0x410),_0x2598aa(0xc26));}),document['getElementById'](_0x8dde82(0xddb))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0xab22cf=_0x8dde82;if(_0x406be8)clearInterval(_0x406be8);_0x406be8=null,_0xdfbfac['activeMeetingScriptQueue']=[],_0xdfbfac['activeMeetingCharId']=null,document[_0xab22cf(0x1d6)](_0xab22cf(0xabc))[_0xab22cf(0x329)]['display']='none',_0xdfbfac[_0xab22cf(0x8ed)]=null,_0x31622b(),_0x137a40(_0xab22cf(0xc26),_0xab22cf(0x4c8));});const _0x4ef520=document[_0x8dde82(0x1d6)](_0x8dde82(0x49e)),_0x7d8e9b=document[_0x8dde82(0x1d6)](_0x8dde82(0xee7));_0x7d8e9b[_0x8dde82(0x3a0)]('click',()=>{const _0x3a091c=_0x8dde82,_0x25697b=_0x4ef520['value']['trim']();_0x25697b&&(_0x54ec5c(_0x25697b),_0x4ef520[_0x3a091c(0xee2)]='',setTimeout(_0x261487,0x64));});function _0x11e9ce(_0x51dc98,_0x174b84){const _0x12ad08=_0x8dde82;if('NUvPJ'==='NUvPJ'){const _0x1cd8fe=document[_0x12ad08(0x1d6)](_0x12ad08(0x7d7)),_0x426a61=_0xdfbfac[_0x12ad08(0xddd)][_0x12ad08(0x76b)](_0x235354=>_0x235354['id']===_0x174b84['id']);if(!_0x426a61){if(_0x12ad08(0xafd)!=='cyjrZ')_0x2edc56(_0x585df0);else{console[_0x12ad08(0x27f)](_0x12ad08(0x6ae),_0x174b84['id']);return;}}const _0x403109=_0x1cd8fe[_0x12ad08(0xcab)][_0x12ad08(0xc35)](_0x426a61[_0x12ad08(0xb21)])&&!_0x1cd8fe['paused'];_0x403109?_0x12ad08(0x5a2)!=='MAWDh'?_0x29d3a4['classList']['remove'](_0x12ad08(0x36e)):_0x1cd8fe[_0x12ad08(0x57a)]():_0x12ad08(0xa56)===_0x12ad08(0xa56)?(_0x45ccc7={'title':_0x426a61[_0x12ad08(0x3c7)],'artist':_0x426a61[_0x12ad08(0x7dc)],'cover':_0x426a61[_0x12ad08(0x520)]||(_0x426a61[_0x12ad08(0x6a3)]?'db:'+_0x426a61[_0x12ad08(0x6a3)]:_0x1af29b),'isFromLibrary':!![]},_0x1cd8fe[_0x12ad08(0xcab)]=_0x426a61[_0x12ad08(0xb21)],_0x1cd8fe[_0x12ad08(0xe7f)](),_0xdfbfac[_0x12ad08(0x55e)]=_0xdfbfac['musicPlaylist'][_0x12ad08(0xd30)](_0x2716a0=>_0x2716a0['id']===_0x174b84['id']),_0x3cfa5f()):_0x2845a8['textContent']=_0x12ad08(0x406);}else _0x32565a(_0x12ad08(0x693)+_0x48adad[_0x12ad08(0x8ac)]);}const _0x17252c=document[_0x8dde82(0x1d6)](_0x8dde82(0x8e2));async function _0x5a0fe8(_0x1526c8){const _0x579ed5=_0x8dde82;if(!_0x1526c8||!_0x1526c8[_0x579ed5(0xb91)]('http'))return![];return new Promise(_0x54ef92=>{const _0x35b2de=_0x579ed5,_0x18a2de=document[_0x35b2de(0x8f1)]('audio');_0x18a2de[_0x35b2de(0xcab)]=_0x1526c8;const _0x1c831b=setTimeout(()=>{const _0x498b72=_0x35b2de;'yLsYO'===_0x498b72(0x5ac)?(_0x199ba6['error'](_0x498b72(0x8a4),_0x50350c),_0xa58c07('导出失败了，哼:\x20'+_0x2e668[_0x498b72(0x8ac)])):(_0x3bbe19(),_0x54ef92(![]));},0xbb8),_0x3bbe19=()=>{const _0x362614=_0x35b2de;clearTimeout(_0x1c831b),_0x18a2de[_0x362614(0x255)](_0x362614(0x39b),_0xc24371),_0x18a2de[_0x362614(0x255)](_0x362614(0x27f),_0x49abd9),_0x18a2de[_0x362614(0xcab)]='',_0x18a2de['remove']();},_0xc24371=()=>{const _0x32cf2f=_0x35b2de;if(_0x32cf2f(0x729)===_0x32cf2f(0x729))_0x3bbe19(),_0x54ef92(!![]);else{_0xfcddcd[_0x32cf2f(0x27f)](_0x32cf2f(0x649));return;}},_0x49abd9=()=>{_0x3bbe19(),_0x54ef92(![]);};_0x18a2de[_0x35b2de(0x3a0)](_0x35b2de(0x39b),_0xc24371),_0x18a2de[_0x35b2de(0x3a0)](_0x35b2de(0x27f),_0x49abd9);});}async function _0x43a3df(_0x4f400e,_0x50f959){const _0x42ce84=_0x8dde82,_0x4b4635=[_0x42ce84(0x372),_0x42ce84(0x86a)];for(const _0x161f3e of _0x4b4635){if(_0x42ce84(0x51d)!==_0x42ce84(0xb1c))try{if(_0x42ce84(0xaff)===_0x42ce84(0xaff)){const _0x42c4b2=_0x42ce84(0x150)+_0x161f3e+_0x42ce84(0x6bd)+encodeURIComponent(_0x4f400e)+'-'+encodeURIComponent(_0x50f959),_0x3b90cd=await fetch(_0x42c4b2),_0x30e4ca=await _0x3b90cd[_0x42ce84(0xc55)]();if(_0x30e4ca[_0x42ce84(0x7ac)]!==0xc8||!_0x30e4ca[_0x42ce84(0x1e0)]||_0x30e4ca[_0x42ce84(0x1e0)][_0x42ce84(0x1e2)]===0x0)continue;const _0x2668f0=_0x30e4ca[_0x42ce84(0x1e0)]['slice'](0x0,0x5);for(const _0x33d88e of _0x2668f0){const _0x418bac=_0x42ce84(0x150)+_0x161f3e+'?id='+_0x33d88e['id'],_0x1fcd13=await fetch(_0x418bac),_0x36759a=await _0x1fcd13[_0x42ce84(0xc55)](),_0x2cb3e9=_0x36759a[_0x42ce84(0x1e0)]?.[_0x42ce84(0x9f5)];if(await _0x5a0fe8(_0x2cb3e9))return{'url':_0x2cb3e9,'cover':_0x33d88e[_0x42ce84(0x267)],'source':_0x161f3e};}}else _0x397b56['classList'][_0x42ce84(0x1cd)](_0x42ce84(0xea)),_0x129c6e[_0x42ce84(0xa73)]+=_0x42ce84(0xa46)+_0x4c5f2a+_0x42ce84(0x541);}catch(_0x36a5b7){console[_0x42ce84(0x27f)]('Error\x20fetching\x20from\x20'+_0x161f3e+':',_0x36a5b7);}else _0x2b10f5[_0x42ce84(0xd6c)](_0x42ce84(0xcfe)+_0x4f9ee3['id'],_0x4ec7b1[_0x42ce84(0xc4a)]);}return{'url':null,'cover':null,'source':null};}function _0x331357(){const _0x127c54=_0x8dde82,_0x574fbe=document['getElementById'](_0x127c54(0xec3)),_0x2885cf=document[_0x127c54(0xa6a)],_0x442280=document['getElementById'](_0x127c54(0x719));if(!_0x574fbe||!_0x442280)return;const _0x1e3531=localStorage['getItem']('uiScale')||'1';_0x2885cf[_0x127c54(0x329)][_0x127c54(0x8eb)](_0x127c54(0xa03),_0x1e3531),_0x574fbe[_0x127c54(0xee2)]=_0x1e3531,_0x574fbe[_0x127c54(0x3a0)](_0x127c54(0xb39),()=>{const _0x2e49c8=_0x127c54,_0x28a54e=_0x574fbe[_0x2e49c8(0xee2)];_0x2885cf[_0x2e49c8(0x329)][_0x2e49c8(0x8eb)](_0x2e49c8(0xa03),_0x28a54e),localStorage[_0x2e49c8(0xa54)](_0x2e49c8(0xe92),_0x28a54e);}),_0x442280[_0x127c54(0x3a0)](_0x127c54(0x288),()=>{const _0x1fec6f=_0x127c54,_0x214dd6='1';_0x574fbe[_0x1fec6f(0xee2)]=_0x214dd6,_0x2885cf[_0x1fec6f(0x329)]['setProperty']('--desktop-item-scale',_0x214dd6),localStorage[_0x1fec6f(0xa54)](_0x1fec6f(0xe92),_0x214dd6);});}function _0xdad051(_0x484ec2){const _0x1620a1=_0x8dde82;try{const _0x3bf2c0=JSON['parse'](localStorage[_0x1620a1(0x443)](_0x1620a1(0xd8c))||'{}'),_0x3796a2={..._0x3bf2c0,..._0x484ec2};localStorage[_0x1620a1(0xa54)](_0x1620a1(0xd8c),JSON[_0x1620a1(0xea5)](_0x3796a2));}catch(_0x1cf3a1){if(_0x1620a1(0xd5a)!==_0x1620a1(0xd5a)){const _0x139ccf=_0x5b01f2(_0x380a31[0x1]),_0x208cc0=_0x4fdf3b[0x2][_0x1620a1(0xcd2)](),_0x28b5e3=_0x401261(_0x37ba18[_0x1620a1(0x8ed)]);let _0xd588d0=null;if(_0x208cc0===_0x28b5e3[_0x1620a1(0xb95)])_0xd588d0=_0x28b5e3['id'];else{const _0x35dff9=_0x25a8b7();if(_0x35dff9[_0x1620a1(0x8c7)]===_0x1620a1(0x304)){const _0x41b40c=_0x2a2b92[_0x1620a1(0x94d)]['find'](_0xd7c75d=>_0x35dff9[_0x1620a1(0x41b)][_0x1620a1(0xc35)](_0xd7c75d['id'])&&_0xd7c75d[_0x1620a1(0xb95)]===_0x208cc0);if(_0x41b40c)_0xd588d0=_0x41b40c['id'];}}if(_0xd588d0)return{'type':'transfer','amount':_0x139ccf,'recipientId':_0xd588d0,'senderId':_0x2739b7['id']};else return{'type':_0x1620a1(0x7ee),'content':_0x1620a1(0x860)+_0x208cc0+_0x1620a1(0xc89)};}else console[_0x1620a1(0x27f)](_0x1620a1(0x160),_0x1cf3a1);}}async function _0x43f55a(){const _0x8ba713=_0x8dde82,_0x536a30=document[_0x8ba713(0x1d6)]('decorative-badge'),_0xe22e9a=document[_0x8ba713(0x1d6)]('badge-image');try{let _0x2a42aa=await _0x4131e2(_0x8ba713(0xd5e));if(!_0x2a42aa){const _0x34f8cc=JSON['parse'](localStorage[_0x8ba713(0x443)](_0x8ba713(0xd8c))||'{}');_0x34f8cc[_0x8ba713(0x412)]&&(_0x2a42aa=await _0x2b279d(_0x34f8cc[_0x8ba713(0x412)]),await _0x510f28(_0x8ba713(0xd5e),_0x2a42aa));}_0x2a42aa?(_0xe22e9a[_0x8ba713(0xcab)]=URL[_0x8ba713(0x21c)](_0x2a42aa),_0xe22e9a['style'][_0x8ba713(0xc66)]=_0x8ba713(0xc38),_0x536a30[_0x8ba713(0x329)][_0x8ba713(0xb89)]=_0x8ba713(0x338)):(_0xe22e9a['style'][_0x8ba713(0xc66)]='none',_0x536a30[_0x8ba713(0x329)][_0x8ba713(0xb89)]=_0x8ba713(0xb14)),_0x536a30[_0x8ba713(0x329)][_0x8ba713(0xc66)]=_0x8ba713(0xc38);}catch(_0x67e12d){'jzZna'===_0x8ba713(0xdeb)?console[_0x8ba713(0x27f)](_0x8ba713(0x2c1),_0x67e12d):_0x589e9b(_0x1b53e1);}}async function _0x392c0f(){const _0xe205bc=_0x8dde82,_0x3ba2c1=document[_0xe205bc(0x1d6)](_0xe205bc(0x548)),_0x2c84b9=document[_0xe205bc(0x1d6)](_0xe205bc(0x7f1)),_0x263d7d=document[_0xe205bc(0x1d6)]('card-widget-2'),_0x4b6b54=document['getElementById'](_0xe205bc(0x210));try{let _0x3ae6d5=await _0x4131e2('widget_card');_0x3ae6d5?(_0x2c84b9[_0xe205bc(0xcab)]=URL[_0xe205bc(0x21c)](_0x3ae6d5),_0x2c84b9[_0xe205bc(0x329)][_0xe205bc(0xc66)]=_0xe205bc(0xc38),_0x3ba2c1[_0xe205bc(0x329)]['border']=_0xe205bc(0x338),_0x3ba2c1[_0xe205bc(0x329)]['background']=_0xe205bc(0x5f7)):(_0x2c84b9[_0xe205bc(0x329)][_0xe205bc(0xc66)]=_0xe205bc(0x338),_0x3ba2c1['style'][_0xe205bc(0xb89)]='2px\x20dashed\x20var(--border-color)',_0x3ba2c1[_0xe205bc(0x329)][_0xe205bc(0xcd8)]=_0xe205bc(0x728));_0x3ba2c1[_0xe205bc(0x329)]['display']=_0xe205bc(0xc38);let _0x4839b6=await _0x4131e2(_0xe205bc(0x9bd));if(_0x4839b6){if(_0xe205bc(0x620)==='lxVvN'){const _0x231ba9=new _0x1a9c0f(_0x10ed1f[_0xe205bc(0x10c)]),_0x5d879e=_0x55945c(_0x231ba9);_0x1dceae+=_0xe205bc(0x319)+_0x5d879e+'\x20\x0a';const _0x2415f6=_0x44d35c[_0xe205bc(0x9d1)](),_0x4fe70f=_0x231ba9[_0xe205bc(0x9d1)](),_0x2b1f44=new _0x4b983c();_0x2b1f44[_0xe205bc(0xad1)](_0x36efed[_0xe205bc(0x55b)]()-0x1);const _0x131427=_0x2b1f44[_0xe205bc(0x9d1)]();if(_0x2415f6===_0x4fe70f){const _0x373137=(_0x4dcf45-_0x231ba9)/(0x3e8*0x3c);_0x3cf162+=_0xe205bc(0xa13);}else{if(_0x131427===_0x4fe70f)_0x4a66fb+='-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a';else{const _0x4b0e44=_0xf5172a['round']((_0x544110-_0x231ba9)/(0x3e8*0x3c*0x3c*0x18));_0x47d7d4+=_0xe205bc(0x651)+_0x4b0e44+_0xe205bc(0xcdd);}}}else _0x4b6b54['src']=URL[_0xe205bc(0x21c)](_0x4839b6),_0x4b6b54[_0xe205bc(0x329)][_0xe205bc(0xc66)]=_0xe205bc(0xc38),_0x263d7d[_0xe205bc(0x329)]['border']='none',_0x263d7d[_0xe205bc(0x329)][_0xe205bc(0xcd8)]=_0xe205bc(0x5f7);}else _0x4b6b54[_0xe205bc(0x329)][_0xe205bc(0xc66)]=_0xe205bc(0x338),_0x263d7d[_0xe205bc(0x329)][_0xe205bc(0xb89)]=_0xe205bc(0xb14),_0x263d7d[_0xe205bc(0x329)][_0xe205bc(0xcd8)]=_0xe205bc(0x728);_0x263d7d[_0xe205bc(0x329)][_0xe205bc(0xc66)]=_0xe205bc(0xc38);}catch(_0x1c88e5){if('HKuwn'===_0xe205bc(0x485))console[_0xe205bc(0x27f)]('加载卡片图片失败',_0x1c88e5);else{const _0x28714c=_0x184bc0[_0xe205bc(0x8f1)](_0xe205bc(0xce2));_0x28714c[_0xe205bc(0x213)]='music-library-item';const _0x2dab36=_0x184ee3[_0xe205bc(0x267)]?_0x36777f['createObjectURL'](_0x5d8cfe[_0xe205bc(0x267)]):_0x52eb4b;_0x28714c[_0xe205bc(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x2dab36+_0xe205bc(0xdf5)+(_0x280308[_0xe205bc(0x3d2)][_0xe205bc(0x83e)]||_0xe205bc(0x518))+_0xe205bc(0x3c2)+(_0x43f6ed['info']['歌手']||_0xe205bc(0x9e0))+_0xe205bc(0x7b6),_0x28714c[_0xe205bc(0x3a0)](_0xe205bc(0x288),()=>{_0x22c059(_0x1e257c);}),_0x21650a[_0xe205bc(0x5b8)](_0x28714c);}}}async function _0x392c0f(){const _0x3bdf64=_0x8dde82;if('gibth'===_0x3bdf64(0xec2)){const _0x2266f8=document[_0x3bdf64(0x1d6)](_0x3bdf64(0x548)),_0x1bad0a=document[_0x3bdf64(0x1d6)]('card-image');try{if('oObhz'==='EvyJy')_0xaab121[_0x3bdf64(0x27f)]('初始化用户档案失败:',_0xe541b4);else{let _0x3ce699=await _0x4131e2(_0x3bdf64(0x170));if(!_0x3ce699){const _0x5f2ae9=JSON[_0x3bdf64(0xc44)](localStorage[_0x3bdf64(0x443)](_0x3bdf64(0x30a))||'{}');if(_0x5f2ae9[_0x3bdf64(0x412)]){if(_0x3bdf64(0x9be)==='OdvUh'){const _0x86d362=_0x34f646[_0x3bdf64(0x1d6)]('unified-audio-player'),_0x19ed8b=_0x327b13[_0x3bdf64(0xddd)][_0x3bdf64(0x76b)](_0x435414=>_0x435414['id']===_0x5ed34e['id']);if(!_0x19ed8b){_0x4149a3[_0x3bdf64(0x27f)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:',_0xb7fc93['id']);return;}const _0x31fadc=_0x86d362['src']['includes'](_0x19ed8b[_0x3bdf64(0xb21)])&&!_0x86d362[_0x3bdf64(0xc2a)];_0x31fadc?_0x86d362['pause']():(_0x867a00={'title':_0x19ed8b[_0x3bdf64(0x3c7)],'artist':_0x19ed8b['artist'],'cover':_0x19ed8b[_0x3bdf64(0x520)]||(_0x19ed8b['coverId']?_0x3bdf64(0x351)+_0x19ed8b[_0x3bdf64(0x6a3)]:_0x805426),'isFromLibrary':!![]},_0x86d362[_0x3bdf64(0xcab)]=_0x19ed8b[_0x3bdf64(0xb21)],_0x86d362['play'](),_0x12f57c[_0x3bdf64(0x55e)]=_0x4b9a16['musicPlaylist']['findIndex'](_0x283b24=>_0x283b24['id']===_0x3cf100['id']),_0x29d531());}else console[_0x3bdf64(0x7ec)](_0x3bdf64(0xdd4)),_0x3ce699=await _0x2b279d(_0x5f2ae9[_0x3bdf64(0x412)]),await _0x510f28('widget_card',_0x3ce699);}}if(_0x3ce699)_0x1bad0a[_0x3bdf64(0xcab)]=URL[_0x3bdf64(0x21c)](_0x3ce699),_0x2266f8[_0x3bdf64(0x329)][_0x3bdf64(0xc66)]=_0x3bdf64(0xc38);else{if(_0x3bdf64(0x623)==='FGOJl')_0x2266f8[_0x3bdf64(0x329)][_0x3bdf64(0xc66)]=_0x3bdf64(0x338);else{const _0x14f3a0={'id':_0x3bdf64(0x64f)+_0x4291bf[_0x3bdf64(0x4a2)]()+'_'+_0x35d0f2[_0x3bdf64(0x48a)](),'name':_0x73cc3[_0x3bdf64(0xb95)],'content':_0x9ee284[_0x3bdf64(0xee)],'categoryId':_0x2c5766[_0x3bdf64(0x798)]||'default'};_0x2b60c2[_0x3bdf64(0xe7d)][_0x3bdf64(0xb66)](_0x14f3a0),_0x5b52c0[_0x3bdf64(0xb66)](_0x14f3a0['id']);}}}}catch(_0x5651a6){console[_0x3bdf64(0x27f)](_0x3bdf64(0x979),_0x5651a6);}try{let _0x4c502d=await _0x4131e2('widget_card_2');const _0x520416=document[_0x3bdf64(0x1d6)](_0x3bdf64(0x210)),_0x4daf1a=document[_0x3bdf64(0x1d6)](_0x3bdf64(0x1fd));if(_0x4c502d){if(_0x3bdf64(0xd80)===_0x3bdf64(0xd80))_0x520416[_0x3bdf64(0xcab)]=URL[_0x3bdf64(0x21c)](_0x4c502d),_0x4daf1a[_0x3bdf64(0x329)][_0x3bdf64(0xc66)]='block';else{if(_0xb54f5b)_0x1f2d5e[_0x3bdf64(0xcab)]=_0x5d9477['createObjectURL'](_0xc514c);}}else _0x4daf1a['style'][_0x3bdf64(0xc66)]='none';}catch(_0x2f4657){if('nQIbU'!==_0x3bdf64(0x268)){_0x384d64('好友圈数据升级完成，迁移了\x20'+_0x1dc114+_0x3bdf64(0xc86)),_0x1f1cab(()=>_0x1229c9[_0x3bdf64(0x28d)](),0x5dc);return;}else console[_0x3bdf64(0x27f)](_0x3bdf64(0x5c3),_0x2f4657);}}else{const _0x57e794=_0x4fe9f1[_0x3bdf64(0xd86)]['filter'](_0x11c5ff=>_0x11c5ff[_0x3bdf64(0x3ba)]===_0x3bdf64(0xa29))[_0x3bdf64(0xdba)]();_0x57e794&&(_0x2fffaf=_0x57e794[_0x3bdf64(0xee)]);}}_0x267a1b['addEventListener'](_0x8dde82(0x288),()=>{const _0x2a96fa=_0x8dde82;_0x1da56f(),_0x137a40(_0x2a96fa(0xb96),'home');}),document[_0x8dde82(0x1d6)](_0x8dde82(0x694))['addEventListener'](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0x410),_0x8dde82(0xb96))),document['getElementById'](_0x8dde82(0x29c))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0xaa027f()),document['getElementById'](_0x8dde82(0xab0))['addEventListener'](_0x8dde82(0x288),()=>{const _0x41840e=_0x8dde82;_0x1da56f(),_0x137a40(_0x41840e(0xb96),_0x41840e(0x640));}),document[_0x8dde82(0x1d6)]('save-user-profile-button')[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x5b8657),document[_0x8dde82(0x1d6)](_0x8dde82(0x18c))[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x548c27),document[_0x8dde82(0x1d6)](_0x8dde82(0xb8d))[_0x8dde82(0x3a0)]('click',()=>{const _0x4d2b5f=_0x8dde82;if(_0x4d2b5f(0x7cb)!=='isgAE')_0x2ba115[_0x4d2b5f(0x27f)](_0x4d2b5f(0x12c),_0x59cc0a),_0x1dd37c(_0x4d2b5f(0x549));else{const _0x4db7af=document[_0x4d2b5f(0x1d6)](_0x4d2b5f(0xe8d))['value'];if(_0x4db7af){if(_0x4d2b5f(0x56e)===_0x4d2b5f(0x56e))_0xdfbfac[_0x4d2b5f(0xb83)]=_0x4db7af,_0x31622b(),_0x21d6ce(_0x4d2b5f(0x1ee)),_0x1da56f(),document['getElementById'](_0x4d2b5f(0xb8d))[_0x4d2b5f(0x329)][_0x4d2b5f(0xc66)]=_0x4d2b5f(0x338);else{const _0x713b1e=_0x3b2941[_0x4d2b5f(0xc37)][_0x4d2b5f(0x76b)](_0x538267=>_0x538267['id']===_0x205bad['boundUserProfileId'])||{'name':_0x4d2b5f(0xb99)},_0x183f5a=_0x49cb94[_0x4d2b5f(0x8f1)](_0x4d2b5f(0xce2));_0x183f5a['className']=_0x4d2b5f(0xe55),_0x183f5a[_0x4d2b5f(0x63f)]['id']=_0x8b7515['id'],_0x183f5a[_0x4d2b5f(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>'+_0x102368[_0x4d2b5f(0xb95)]+_0x4d2b5f(0x5f0)+_0x713b1e[_0x4d2b5f(0xb95)]+_0x4d2b5f(0x639)+_0x1b2450[_0x4d2b5f(0x527)]['length']+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x183f5a[_0x4d2b5f(0x3a0)]('click',()=>_0x362606(_0x1483ed['id'])),_0x15aafa['appendChild'](_0x183f5a);}}}});function _0x58761c(_0x3903b3){const _0x5aba73=_0x8dde82,_0x2806c6=_0xdfbfac[_0x5aba73(0xc1b)][_0x5aba73(0x76b)](_0x3e8e1=>_0x3e8e1['id']===_0x3903b3),_0x5dbbb4=_0x2806c6?.[_0x5aba73(0xacb)];let _0x59ea25=_0xdfbfac[_0x5aba73(0xc37)][_0x5aba73(0x76b)](_0x287445=>_0x287445['id']===_0x5dbbb4);return!_0x59ea25&&(_0x59ea25=_0xdfbfac[_0x5aba73(0xc37)][_0x5aba73(0x76b)](_0x3c976a=>_0x3c976a['id']===_0xdfbfac['activeUserProfileId'])||_0xdfbfac['userProfiles'][0x0]),_0x59ea25||{'name':'用户','avatar':_0x284b7c,'persona':''};}function _0x392a2e(_0x1b1e8e){const _0x68c166=_0x8dde82,_0x106272=document[_0x68c166(0x1d6)](_0x1b1e8e);_0x106272[_0x68c166(0xa73)]='',_0xdfbfac['userProfiles'][_0x68c166(0xb85)](_0x5c5f5a=>{const _0x59f5c7=_0x68c166;if(_0x59f5c7(0xa8a)!=='rCKKh'){const _0xee6395=document[_0x59f5c7(0x8f1)](_0x59f5c7(0x805));_0xee6395[_0x59f5c7(0xee2)]=_0x5c5f5a['id'],_0xee6395['textContent']=_0x5c5f5a['name'],_0x106272['appendChild'](_0xee6395);}else{const _0x3918bf=_0x1d9428[0x0]['trim'](),_0x3949f8=_0x1f4bd7[0x1]['trim'](),_0xd6b3f0={'歌名':_0x59f5c7(0x83e),'艺术家':'歌手','专辑':'专辑'};_0xd6b3f0[_0x3918bf]&&(_0x21d467[_0xd6b3f0[_0x3918bf]]=_0x3949f8);}});}function _0x3d187c(_0x487f63){const _0x1b40f5=_0x8dde82;if(_0x1b40f5(0xb60)===_0x1b40f5(0xf11))_0x9110b0[_0x1b40f5(0x451)][_0x1b40f5(0xe6c)](_0x1b40f5(0xba1));else{const _0x592d78=_0x5844c7(_0x487f63),_0x2cec11=document[_0x1b40f5(0x1d6)](_0x1b40f5(0x756));_0x2cec11[_0x1b40f5(0x329)]['backgroundImage']='';let _0x1e0d06=document[_0x1b40f5(0x1d6)](_0x1b40f5(0xeff)+_0x487f63);if(_0x1e0d06)_0x1e0d06[_0x1b40f5(0xa73)]='';if(!_0x592d78)return;_0x592d78['chatWallpaper']&&(_0x2cec11[_0x1b40f5(0x329)][_0x1b40f5(0x5b7)]=_0x1b40f5(0x8a1)+_0x592d78['chatWallpaper']+'\x27)',_0x2cec11[_0x1b40f5(0x329)][_0x1b40f5(0xd79)]=_0x1b40f5(0x267),_0x2cec11[_0x1b40f5(0x329)][_0x1b40f5(0x453)]=_0x1b40f5(0x6cc));if(_0x592d78[_0x1b40f5(0x4b0)]){let _0xdaac4f=document[_0x1b40f5(0x1d6)](_0x1b40f5(0xeff)+_0x592d78['id']);!_0xdaac4f&&(_0xdaac4f=document['createElement']('style'),_0xdaac4f['id']=_0x1b40f5(0xeff)+_0x592d78['id'],document['head'][_0x1b40f5(0x5b8)](_0xdaac4f));const _0x1ae8d4=_0x592d78['bubbleCss'],_0xd45368=_0x1ae8d4[_0x1b40f5(0xbe2)](/\.bubble\.sent/g,_0x1b40f5(0x283)+_0x592d78['id']+_0x1b40f5(0xe3b))['replace'](/\.bubble\.received/g,_0x1b40f5(0x283)+_0x592d78['id']+_0x1b40f5(0xab3));_0xdaac4f[_0x1b40f5(0xa73)]=_0xd45368;}}}function _0xc2054d(){const _0x4e869d=_0x8dde82,_0x4bdd1f=document[_0x4e869d(0x1d6)](_0x4e869d(0xc4f));_0x4bdd1f[_0x4e869d(0xa73)]='';const _0x236181=_0x14fff1=>{const _0x286244=_0x4e869d;_0xdfbfac['pendingPostAttachments'][_0x14fff1]=null;if(_0x14fff1===_0x286244(0x412))_0xdfbfac[_0x286244(0xa09)][_0x286244(0xe2d)]=null;_0xc2054d();},_0xbd4c7f=_0xdfbfac[_0x4e869d(0xa09)][_0x4e869d(0xe2d)],_0x4e92c7=_0xdfbfac[_0x4e869d(0xa09)][_0x4e869d(0xbf0)];if(_0xbd4c7f){if(_0x4e869d(0x4ff)!==_0x4e869d(0x24f)){const _0x312f44=document[_0x4e869d(0x8f1)]('div');_0x312f44[_0x4e869d(0x213)]='preview-item',_0x312f44[_0x4e869d(0xa73)]=_0x4e869d(0x186),_0x312f44[_0x4e869d(0xb6c)](_0x4e869d(0x780))[_0x4e869d(0x4a1)]=()=>_0x236181(_0x4e869d(0x412)),_0x4bdd1f[_0x4e869d(0x5b8)](_0x312f44),_0x4131e2(_0xbd4c7f)[_0x4e869d(0x94f)](_0x4f8a06=>{const _0x3d35f5=_0x4e869d;if(_0x3d35f5(0xd61)!==_0x3d35f5(0xd61))_0x14725d('欢迎！请先创建一个角色开始聊天。'),_0x2a1984(()=>{const _0x5578fa=_0x3d35f5;_0x1d956d('chat',_0x5578fa(0x410)),_0x262be5(()=>_0x49b9cc(),0x64);},0x6a4);else{const _0x40c6bd=document[_0x3d35f5(0x1d6)](_0x3d35f5(0xa93));_0x40c6bd&&_0x4f8a06&&(_0x3d35f5(0x9ab)!==_0x3d35f5(0x769)?_0x40c6bd['src']=URL['createObjectURL'](_0x4f8a06):_0x13ac06(_0x3d35f5(0x739)+_0x5e137e['message']));}});}else _0x4bf02a[_0x4e869d(0xa37)](),_0x143e67[_0x4e869d(0x555)][_0x4e869d(0x5be)](_0x4e869d(0xce9)),_0x95d524[_0x4e869d(0x555)][_0x4e869d(0x5be)](_0x4e869d(0xd9e));}if(_0x4e92c7){if('ZDRma'!==_0x4e869d(0xcf0)){const _0x57d40b=_0x152668[_0x4e869d(0xc1b)][_0x4e869d(0x76b)](_0x341a04=>_0x341a04[_0x4e869d(0x74a)]&&_0x341a04[_0x4e869d(0x74a)][_0x4e869d(0x976)]);if(_0x57d40b){const _0x4970e2=_0x57d40b[_0x4e869d(0x74a)]['songName']||'歌曲',_0x489aca=_0x2c49b3(_0x57d40b[_0x4e869d(0x113)])?.[_0x4e869d(0xb95)]||'TA',_0x1f1f86=_0x57d40b['id']===_0x8ea401[_0x4e869d(0x8ed)];_0x57d40b[_0x4e869d(0x74a)]=null,_0x33e2f7(),_0x154381(),_0x350aae[_0x4e869d(0x555)][_0x4e869d(0x9ad)](_0x4e869d(0x36e)),_0x5e4c3d(()=>_0x4c2321[_0x4e869d(0x329)][_0x4e869d(0xc66)]='none',0x12c);const _0x3e78b7={'role':_0x4e869d(0xba3),'content':_0x4e869d(0x93a)+_0x4970e2+_0x4e869d(0x2fa),'type':_0x4e869d(0x7ee),'timestamp':_0x39382e[_0x4e869d(0x4a2)]()};if(!_0x5019b2[_0x4e869d(0x3a4)])_0x5585fb['conversationHistory']=[];_0x29c282[_0x4e869d(0x3a4)][_0x4e869d(0xb66)](_0x3e78b7),_0x47ff27();_0x1f1f86&&_0x1fbed1();const _0x20d65a=_0x23f34e[_0x4e869d(0x1d6)]('unified-audio-player');_0x20d65a[_0x4e869d(0x57a)](),_0x20d65a['src']='';const _0x272b65=_0x17bcf7[_0x4e869d(0x1d6)](_0x4e869d(0x9fe));_0x272b65&&(_0x272b65[_0x4e869d(0xa73)]=_0x4e869d(0xc2d));if(typeof _0xbe1d85!==_0x4e869d(0x77c))_0x575b62=[];_0x55ebd1[_0x4e869d(0xb49)]=![],_0x2e7448(),_0x1d05eb[_0x4e869d(0x7af)](_0x4e869d(0x472))['forEach'](_0x3473a2=>_0x3473a2[_0x4e869d(0x329)][_0x4e869d(0xc66)]='none'),_0x256bf4(_0x4e869d(0x7c9));}}else{const _0x412310=document[_0x4e869d(0x8f1)]('div');_0x412310['className']=_0x4e869d(0x264),_0x412310[_0x4e869d(0xa73)]=_0x4e869d(0x178)+(_0x4e92c7[_0x4e869d(0x520)]||_0x1af29b)+_0x4e869d(0xc9b)+_0x4e92c7['songName']+_0x4e869d(0xa6f)+_0x4e92c7[_0x4e869d(0x7dc)]+_0x4e869d(0x833),_0x412310['querySelector']('.remove-attachment-btn')['onclick']=()=>_0x236181(_0x4e869d(0xbf0)),_0x4bdd1f['appendChild'](_0x412310);}}}async function _0x1b4876(_0x59284e){const _0x108887=_0x8dde82,_0x5d42ca=_0xdfbfac[_0x108887(0xdb9)][_0x108887(0x76b)](_0x54f94d=>_0x54f94d['id']===_0xdfbfac[_0x108887(0x961)]);if(!_0x5d42ca)return;_0x1a8bbc(!![],'大家正在赶来回复...'),_0xdfbfac[_0x108887(0x556)]=!![];try{const _0x55441f=_0x5d42ca[_0x108887(0x527)][_0x108887(0x266)](_0x2e6175=>_0x5844c7(_0x2e6175))[_0x108887(0xeb3)](Boolean),_0x33102e=_0x5c5e8c(),_0x955e70=(await Promise[_0x108887(0x7c7)](_0x55441f[_0x108887(0x266)](async _0x2a53f9=>{const _0x4f3a29=_0x108887;if('CRrJL'===_0x4f3a29(0xb4b)){const {omniText:_0x2212f6}=_0x5a83ee(_0x2a53f9['id'],null),_0x1f24f4=_0x2c9d46(_0x2a53f9['id']),_0x28cc7a=await _0x421bdd(_0x2a53f9['id']),_0x273860=_0x2a0a9d(_0x2a53f9['id']),_0x2effde=_0x2a53f9[_0x4f3a29(0x5ee)]&&_0x2a53f9['linkedWorldBookIds'][_0x4f3a29(0x1e2)]>0x0?_0x4f3a29(0xe62)+_0x2a53f9[_0x4f3a29(0xb95)]+_0x4f3a29(0xb51)+_0x2a53f9[_0x4f3a29(0x5ee)]['map'](_0x59e031=>_0xdfbfac[_0x4f3a29(0xe7d)][_0x4f3a29(0x76b)](_0x53bfdf=>_0x53bfdf['id']===_0x59e031))['filter'](Boolean)[_0x4f3a29(0x266)](_0x5c29f8=>_0x4f3a29(0x647)+_0x5c29f8['name']+'\x0a'+_0x5c29f8[_0x4f3a29(0xee)])[_0x4f3a29(0xd9a)](''):'';return'-\x20姓名:\x20'+_0x2a53f9[_0x4f3a29(0xb95)]+',\x20ID:\x20'+_0x2a53f9['id']+_0x4f3a29(0x895)+_0x2a53f9[_0x4f3a29(0x79b)]+_0x4f3a29(0xbbd)+_0x2212f6+'\x0a'+_0x1f24f4+'\x0a'+_0x28cc7a+'\x0a'+_0x273860+'\x0a'+_0x2effde;}else{const _0x106037=_0x41d659(_0x3e34b0[_0x4f3a29(0x8ed)]);_0x5f08de=_0x106037[_0x4f3a29(0x584)]||_0x500f97;const _0x45312b=_0xcbe195(_0x3f0010?.['participantIds'][0x0]);_0x45312b&&(_0x2499f1=_0x45312b[_0x4f3a29(0xbb9)]||'');}})))['join']('\x0a\x0a'),_0x424922=_0xaacb02(_0x59284e[_0x108887(0x6b3)])||{'name':'用户'},_0x3d0e3e=_0x424922[_0x108887(0x79b)]?_0x108887(0x942)+_0x424922[_0x108887(0xb95)]+_0x108887(0x7cd)+_0x424922[_0x108887(0x79b)]+'\x0a':'';let _0x560115=null;if(_0x59284e[_0x108887(0x412)])_0x560115=_0x59284e[_0x108887(0x412)];else{if(_0x59284e[_0x108887(0xe2d)])try{const _0x1b840b=await _0x4131e2(_0x59284e[_0x108887(0xe2d)]);_0x1b840b&&(_0x560115=await _0x273922(_0x1b840b));}catch(_0x3c91c4){console['error'](_0x108887(0xc99),_0x3c91c4);}}let _0xfec38=_0x424922[_0x108887(0xb95)]+'刚刚发布了一条动态，内容是：“'+_0x59284e['content']+'”';_0x560115&&(_0xfec38+=_0x108887(0x987));_0x59284e[_0x108887(0x8c7)]===_0x108887(0xbf0)&&('qiDAk'===_0x108887(0xb12)?_0x7902b7===_0x108887(0x410)?_0x26d772['style'][_0x108887(0xc66)]=_0x108887(0x82b):_0x1b7b06['style'][_0x108887(0xc66)]=_0x108887(0x338):_0xfec38+=_0x108887(0x947)+_0x59284e['songName']+'\x20-\x20'+_0x59284e['artist']+']');const _0x23c090=_0x108887(0x687)+_0x955e70+'\x0a\x0a'+_0x3d0e3e+_0x108887(0x206)+_0x33102e+_0x108887(0xbc9)+_0xfec38+_0x108887(0x4ce),_0x198d19=[{'role':_0x108887(0xba3),'content':_0x23c090}],_0x3a3976={'role':_0x108887(0xa29),'content':'请根据以上所有规则（特别是要看图！），生成对用户动态的回应。'};if(_0x560115){if(_0x108887(0xd00)!==_0x108887(0x7d5))_0x3a3976[_0x108887(0x412)]=_0x560115;else{_0xfd066e+=_0x108887(0x96f);const _0x192bce=_0x8d4e9c[_0x108887(0xa0c)][_0x108887(0x266)](_0xed7078=>typeof _0xed7078===_0x108887(0x193)?_0xed7078:_0x34a401[_0x108887(0x100)](_0xed7078)[_0x108887(0xd9a)](_0x108887(0x5a0)));_0x32d7fd+='•\x20'+_0x192bce[_0x108887(0xd9a)](_0x108887(0xb9e));}}_0x198d19[_0x108887(0xb66)](_0x3a3976);const _0x508b84=await _0x2fa074(_0x198d19,{'json':!![]}),_0x583392=_0x508b84['match'](/({[\s\S]*})/);if(!_0x583392)throw new Error(_0x108887(0xc69));const _0x2fe7af=JSON[_0x108887(0xc44)](_0x583392[0x1]),_0x4ba126=_0x5d42ca['posts'][_0x108887(0x76b)](_0x2f0d56=>_0x2f0d56['id']===_0x59284e['id']);_0x4ba126&&(_0x4ba126[_0x108887(0x441)]=_0x2fe7af[_0x108887(0x441)]||[],_0x4ba126[_0x108887(0xded)]=(_0x2fe7af[_0x108887(0xded)]||[])[_0x108887(0x266)]((_0x42610b,_0x20b0e7)=>({..._0x42610b,'commentId':'c_'+_0x59284e[_0x108887(0x10c)]+'_'+_0x20b0e7})),_0x31622b(),_0x3c0b88());}catch(_0x11ba84){console[_0x108887(0x27f)](_0x108887(0x432),_0x11ba84),_0x21d6ce('大家好像不知道该怎么回复...');}finally{_0x1a8bbc(![]),_0xdfbfac[_0x108887(0x556)]=![];}}function _0x46033d(){const _0x3c5078=_0x8dde82;if(_0x3c5078(0x839)==='KxVNh'){const _0x37ac1e=_0xdfbfac[_0x3c5078(0xdb9)][_0x3c5078(0x76b)](_0x5c9195=>_0x5c9195['id']===_0xdfbfac['activeFriendCircleId']),_0x34d441=_0x37ac1e?.['boundUserProfileId'];let _0x19a3ae=_0xdfbfac['userProfiles'][_0x3c5078(0x76b)](_0x4c6949=>_0x4c6949['id']===_0x34d441);!_0x19a3ae&&(_0x19a3ae=_0xdfbfac[_0x3c5078(0xc37)]['find'](_0x1c255c=>_0x1c255c['id']===_0xdfbfac[_0x3c5078(0xb83)])),!_0x19a3ae&&(_0x3c5078(0x191)===_0x3c5078(0x64a)?_0x591223=_0x6c0ee[_0x3c5078(0xc44)](_0xbf147a):_0x19a3ae=_0xdfbfac['userProfiles'][0x0]),_0x19a3ae&&(document[_0x3c5078(0x1d6)](_0x3c5078(0x331))[_0x3c5078(0xcab)]=_0x19a3ae[_0x3c5078(0x584)]||_0x284b7c);}else _0x52e80a[_0x3c5078(0x167)][_0x3c5078(0x154)](_0xe18c0d[_0x3c5078(0x167)][_0x3c5078(0xb0a)]()+0x1),_0x39074a();}function _0x439fb1(_0x459eb9){const _0x583073=_0x8dde82;let _0x12ce88=0x0,_0x368eb1=0x0,_0x5577dd=0x0;if(_0x459eb9[_0x583073(0x1e2)]==0x4)_0x583073(0x566)!==_0x583073(0x566)?_0x4f810f[_0x583073(0xb66)](_0x1235c9):(_0x12ce88='0x'+_0x459eb9[0x1]+_0x459eb9[0x1],_0x368eb1='0x'+_0x459eb9[0x2]+_0x459eb9[0x2],_0x5577dd='0x'+_0x459eb9[0x3]+_0x459eb9[0x3]);else _0x459eb9[_0x583073(0x1e2)]==0x7&&(_0x12ce88='0x'+_0x459eb9[0x1]+_0x459eb9[0x2],_0x368eb1='0x'+_0x459eb9[0x3]+_0x459eb9[0x4],_0x5577dd='0x'+_0x459eb9[0x5]+_0x459eb9[0x6]);_0x12ce88/=0xff,_0x368eb1/=0xff,_0x5577dd/=0xff;let _0x17c456=Math['min'](_0x12ce88,_0x368eb1,_0x5577dd),_0x533fef=Math['max'](_0x12ce88,_0x368eb1,_0x5577dd),_0x506f72=_0x533fef-_0x17c456,_0x20bd89=0x0,_0x594e38=0x0,_0x58443b=0x0;if(_0x506f72==0x0)_0x20bd89=0x0;else{if(_0x533fef==_0x12ce88)_0x20bd89=(_0x368eb1-_0x5577dd)/_0x506f72%0x6;else{if(_0x533fef==_0x368eb1)_0x20bd89=(_0x5577dd-_0x12ce88)/_0x506f72+0x2;else _0x20bd89=(_0x12ce88-_0x368eb1)/_0x506f72+0x4;}}_0x20bd89=Math['round'](_0x20bd89*0x3c);if(_0x20bd89<0x0)_0x20bd89+=0x168;return _0x58443b=(_0x533fef+_0x17c456)/0x2,_0x594e38=_0x506f72==0x0?0x0:_0x506f72/(0x1-Math[_0x583073(0x9f0)](0x2*_0x58443b-0x1)),_0x594e38=+(_0x594e38*0x64)[_0x583073(0x491)](0x1),_0x58443b=+(_0x58443b*0x64)['toFixed'](0x1),{'h':_0x20bd89,'s':_0x594e38,'l':_0x58443b};}function _0x1e6823(){const _0x41eec5=_0x8dde82;if(_0x41eec5(0x525)!==_0x41eec5(0x525)){const _0x505947=_0x466f8c[_0x41eec5(0x8f1)](_0x41eec5(0xce2));_0x505947['className']=_0x41eec5(0xc3c),_0x505947[_0x41eec5(0xa73)]=_0x41eec5(0xa2a)+_0x29dec2[_0x41eec5(0x250)]+_0x41eec5(0x45f)+_0x1d8cc2[_0x41eec5(0xb95)]+_0x41eec5(0xc4e),_0x505947['addEventListener']('click',()=>_0x221942(_0x3205a7['id'],_0xf0ed8d[_0x41eec5(0xb95)])),_0x207c5e[_0x41eec5(0x5b8)](_0x505947);}else{const _0x20212d=(_0x90ce03,_0x4aa932,_0x2894a0)=>{const _0x5534ab=_0x41eec5,_0x1569d2=document[_0x5534ab(0x1d6)](_0x90ce03);if(!_0x1569d2)return;let _0x3a5aca=null;try{_0x3a5aca=JSON[_0x5534ab(0xc44)](localStorage[_0x5534ab(0x443)](_0x4aa932)||'{}');}catch{_0x3a5aca={};}_0x1569d2[_0x5534ab(0x329)][_0x5534ab(0x38b)]='absolute',_0x1569d2[_0x5534ab(0x329)][_0x5534ab(0x811)]='',_0x1569d2[_0x5534ab(0x329)][_0x5534ab(0x984)]='',_0x1569d2['style'][_0x5534ab(0x489)]='',_0x1569d2[_0x5534ab(0x329)]['bottom']='',_0x1569d2[_0x5534ab(0x329)][_0x5534ab(0x71d)]='';if(typeof _0x3a5aca[_0x5534ab(0x811)]==='number'&&typeof _0x3a5aca[_0x5534ab(0x984)]===_0x5534ab(0xcb7))_0x1569d2[_0x5534ab(0x329)][_0x5534ab(0x811)]=_0x3a5aca[_0x5534ab(0x811)]+'%',_0x1569d2['style'][_0x5534ab(0x984)]=_0x3a5aca[_0x5534ab(0x984)]+'%';else for(const _0x22faad in _0x2894a0){_0x1569d2[_0x5534ab(0x329)][_0x22faad]=_0x2894a0[_0x22faad];}};_0x20212d(_0x41eec5(0xc22),_0x41eec5(0xe28),{'top':_0x41eec5(0xa7c),'left':'50%','transform':_0x41eec5(0x844)}),_0x20212d(_0x41eec5(0x54e),_0x41eec5(0xed4),{'top':_0x41eec5(0xa06),'right':'4%'}),_0x20212d(_0x41eec5(0x3e4),_0x41eec5(0x21e),{'top':_0x41eec5(0xa06),'right':_0x41eec5(0x32a)}),_0x20212d('app-settings','appIconPosition_app-settings',{'top':'8%','right':_0x41eec5(0x32a)}),_0x20212d(_0x41eec5(0xbdc),'appIconPosition_app-world-book',{'top':'8%','right':'4%'}),_0x20212d(_0x41eec5(0x9cb),'appIconPosition_app-music-library',{'top':_0x41eec5(0x8a7),'left':'5%'}),_0x20212d(_0x41eec5(0x3bc),_0x41eec5(0xcb1),{'top':_0x41eec5(0x80e),'left':'29%'}),_0x20212d('app-snoop',_0x41eec5(0xb7f),{'top':_0x41eec5(0x80e),'left':'5%'}),_0x20212d(_0x41eec5(0xce8),_0x41eec5(0x79d),{'top':_0x41eec5(0x8a7),'left':_0x41eec5(0xb93)}),_0x20212d(_0x41eec5(0x95b),'badgeState',{'top':'60%','right':'5%'}),_0x20212d(_0x41eec5(0x1fd),_0x41eec5(0x361),{'top':'8%','left':'5%'});const _0x48ad13=document['getElementById'](_0x41eec5(0x548));_0x48ad13&&('OrsWp'!==_0x41eec5(0xbc3)?(_0x48ad13[_0x41eec5(0x329)][_0x41eec5(0x38b)]='absolute',_0x48ad13[_0x41eec5(0x329)][_0x41eec5(0x811)]=_0x41eec5(0x99e),_0x48ad13['style'][_0x41eec5(0x984)]=_0x41eec5(0xa82),_0x48ad13[_0x41eec5(0x329)][_0x41eec5(0x71d)]=_0x41eec5(0x844),_0x48ad13[_0x41eec5(0x329)][_0x41eec5(0xc66)]=_0x41eec5(0xc38)):_0x3453a5[_0x41eec5(0x329)][_0x41eec5(0x5b7)]='');const _0x5e9c2d=document[_0x41eec5(0x1d6)](_0x41eec5(0xebb));_0x5e9c2d&&(_0x5e9c2d['style'][_0x41eec5(0x38b)]='absolute',_0x5e9c2d[_0x41eec5(0x329)]['top']=_0x41eec5(0x531),_0x5e9c2d[_0x41eec5(0x329)][_0x41eec5(0x984)]='50%',_0x5e9c2d[_0x41eec5(0x329)]['transform']=_0x41eec5(0x844),_0x5e9c2d[_0x41eec5(0x329)]['display']=_0x41eec5(0x82b));}}function _0x46a68a(){const _0x43f7bc=_0x8dde82,_0x405214=document[_0x43f7bc(0x1d6)](_0x43f7bc(0x9b0));_0x405214[_0x43f7bc(0xa73)]='';const _0x30425b=document[_0x43f7bc(0x7af)]('.app-icon');_0x30425b[_0x43f7bc(0xb85)](_0x3638b7=>{const _0x10ab47=_0x43f7bc,_0x2c20e6=_0x3638b7['id'],_0x4483d3=_0x3638b7[_0x10ab47(0xb6c)]('span')[_0x10ab47(0x101)],_0x19c44f='customIcon_'+_0x2c20e6,_0x2ee1f2=localStorage[_0x10ab47(0x443)](_0x19c44f),_0x2b8314=document[_0x10ab47(0x8f1)]('div');_0x2b8314[_0x10ab47(0x213)]=_0x10ab47(0x33d),_0x2b8314[_0x10ab47(0x329)][_0x10ab47(0xe23)]=_0x10ab47(0x3be),_0x2b8314[_0x10ab47(0xa73)]=_0x10ab47(0x5a5)+_0x2c20e6+'\x22\x20src=\x22'+(_0x2ee1f2||_0x10ab47(0x54c))+'\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>'+_0x4483d3+_0x10ab47(0x133)+_0x2c20e6+_0x10ab47(0x76e)+_0x2c20e6+_0x10ab47(0x851)+_0x19c44f+_0x10ab47(0xebe),_0x405214[_0x10ab47(0x5b8)](_0x2b8314);const _0x589614=document[_0x10ab47(0x1d6)]('input_'+_0x2c20e6);_0x589614[_0x10ab47(0x3a0)]('change',async _0x419881=>{const _0x46a9c0=_0x10ab47;if(_0x46a9c0(0x70e)!=='oLdmS'){const _0x194c8d=new _0xeb2ce8(_0x1bc4c1[_0x46a9c0(0x10c)]||_0x14d490['last_edited'])['getTime']();_0x194c8d>=_0x3d98eb[_0x46a9c0(0xa4d)]()&&_0x35b02d[_0x46a9c0(0xb66)]({'timestamp':_0x194c8d,'type':_0x46a9c0(0xc06)+_0x11c43c+']','content':_0x4912eb[_0x46a9c0(0xea5)](_0x885767)});}else{const _0x1e82c8=_0x419881[_0x46a9c0(0x272)][_0x46a9c0(0x6d4)][0x0];if(!_0x1e82c8)return;try{const _0x3f542e=await _0x1b759b(_0x1e82c8);localStorage[_0x46a9c0(0xa54)](_0x19c44f,_0x3f542e),document[_0x46a9c0(0x1d6)](_0x46a9c0(0xd08)+_0x2c20e6)[_0x46a9c0(0xcab)]=_0x3f542e,_0x17156a();}catch(_0x493651){_0x21d6ce('图标处理失败:\x20'+_0x493651['message']);}}});});}function _0x17156a(){const _0x2a06b7=_0x8dde82,_0x58168c=document[_0x2a06b7(0x7af)](_0x2a06b7(0xb38));_0x58168c['forEach'](_0xc9ba16=>{const _0x4ac34b=_0x2a06b7,_0x1a47c8=_0xc9ba16['id'],_0x269299=_0x4ac34b(0x138)+_0x1a47c8,_0x2f774f=localStorage[_0x4ac34b(0x443)](_0x269299),_0xe25dcc=_0xc9ba16[_0x4ac34b(0xb6c)](_0x4ac34b(0x90b));if(_0x2f774f)_0xe25dcc[_0x4ac34b(0xa73)]=_0x4ac34b(0xa46)+_0x2f774f+'\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>';else{if(_0x4ac34b(0x42f)!==_0x4ac34b(0x832)){const _0x1b4b87=document[_0x4ac34b(0xb6c)](_0x4ac34b(0x7e3)+_0x1a47c8+_0x4ac34b(0x6b0)+_0x1a47c8+_0x4ac34b(0x23f))?.[_0x4ac34b(0xa73)];_0x1b4b87&&(_0xe25dcc[_0x4ac34b(0xa73)]=_0x1b4b87);}else _0x4c06fb['classList']['add'](_0x4ac34b(0x434));}});}function _0x4fbcdd(){const _0x3c2d95=_0x8dde82,_0x3439cb=_0xdfbfac[_0x3c2d95(0xdb9)]['find'](_0x47cf1d=>_0x47cf1d['id']===_0xdfbfac[_0x3c2d95(0x961)]),_0x50b3b1=_0x1d801f();let _0x4774a2=[];if(_0x3439cb&&_0x3439cb[_0x3c2d95(0x6b8)]){if(_0x3c2d95(0x2bc)===_0x3c2d95(0x2bc)){const _0x35fa5f=_0x3439cb['posts'][_0x3c2d95(0xeb3)](_0x143936=>_0x143936[_0x3c2d95(0x8c7)]===_0x3c2d95(0xbf0)&&_0x143936[_0x3c2d95(0xb21)])[_0x3c2d95(0x266)](_0x458b23=>({..._0x458b23,'source':_0x3c2d95(0xc20)}));_0x4774a2['push'](..._0x35fa5f);}else _0x5463a0[_0x3c2d95(0xb66)](_0x3c2d95(0x508)+_0x4f7fb0[_0x3c2d95(0xcfb)]);}if(_0x50b3b1&&_0xdfbfac[_0x3c2d95(0x3a4)]){if(_0x3c2d95(0xc8a)!==_0x3c2d95(0xc8a)){const _0x19d22a=_0x1e4d5a[_0x3c2d95(0xc35)](_0x361e26['id']),_0x2b6c27=_0x748cd0[_0x3c2d95(0x8f1)](_0x3c2d95(0x322));_0x2b6c27['className']=_0x3c2d95(0x3a7),_0x2b6c27[_0x3c2d95(0xa73)]=_0x3c2d95(0x45d)+_0x9d13f4['id']+'\x22\x20data-category-id=\x22'+_0x4d194a['id']+'\x22\x20'+(_0x19d22a?_0x3c2d95(0xefd):'')+'>\x20'+_0x218ea3[_0x3c2d95(0xb95)],_0x32e4d2[_0x3c2d95(0x5b8)](_0x2b6c27);}else{const _0xe92f95=_0xdfbfac[_0x3c2d95(0x3a4)][_0x3c2d95(0xeb3)](_0x3c900c=>_0x3c900c[_0x3c2d95(0x8c7)]===_0x3c2d95(0xbf0)&&_0x3c900c[_0x3c2d95(0xb21)])['map'](_0x249b25=>({..._0x249b25,'id':_0x3c2d95(0x8cd)+_0x249b25[_0x3c2d95(0x10c)],'source':'chat'}));_0x4774a2[_0x3c2d95(0xb66)](..._0xe92f95);}}const _0x551552=Array[_0x3c2d95(0xe74)](new Map(_0x4774a2['map'](_0x2ff9ce=>[_0x2ff9ce[_0x3c2d95(0xb21)],_0x2ff9ce]))[_0x3c2d95(0x100)]());_0xdfbfac[_0x3c2d95(0xddd)]=_0x551552[_0x3c2d95(0x6d9)]((_0x198c84,_0x27c6c3)=>_0x27c6c3['timestamp']-_0x198c84[_0x3c2d95(0x10c)]);}function _0x489db2(_0x3ffe34){const _0x30dccf=_0x8dde82;if(_0x3ffe34<0x0||_0x3ffe34>=_0x34a7ad[_0x30dccf(0x1e2)])return;_0x499097=_0x3ffe34;const _0x1bc12d=_0x34a7ad[_0x3ffe34];_0x3242a5[_0x30dccf(0xcab)]=_0x1bc12d['playableUrl']||_0x1bc12d[_0x30dccf(0x9f5)],_0x3242a5[_0x30dccf(0xe7f)](),_0x2cc20d(),_0x3cfa5f();}function _0x2cc20d(){const _0x4988a1=_0x8dde82;if(_0x4988a1(0x627)!==_0x4988a1(0xbe5)){const _0x496b35=_0xdfbfac['musicPlaylist'][_0xdfbfac['currentlyPlayingIndex']],_0x39aa73=_0xdfbfac[_0x4988a1(0xb49)];_0x488403(),_0x1ce3b3();const _0x519cc0=document[_0x4988a1(0x7af)](_0x4988a1(0xdb2));_0x519cc0[_0x4988a1(0xb85)](_0x3e12c6=>{const _0x24d297=_0x4988a1,_0x2bae20=_0x3e12c6[_0x24d297(0x63f)][_0x24d297(0xd36)],_0x2dab37=_0x3e12c6[_0x24d297(0xb6c)](_0x24d297(0x989));if(!_0x2dab37)return;if(_0x496b35&&_0x2bae20===_0x496b35['id']&&_0x39aa73)_0x2dab37[_0x24d297(0x101)]='❚❚';else{if(_0x24d297(0x77f)!==_0x24d297(0x77f)){const _0xa05eee=_0x268aa3[_0x24d297(0xe7d)]['find'](_0x42611f=>_0x42611f['id']===_0xfdf203);_0xa05eee&&(_0xa05eee[_0x24d297(0xb95)]=_0x22cdd9,_0xa05eee[_0x24d297(0xee)]=_0x3cd7da,_0xa05eee[_0x24d297(0x798)]=_0x17f89c);}else _0x2dab37[_0x24d297(0x101)]='▶';}});}else _0xd07d84[_0x4988a1(0x3a0)](_0x4988a1(0x288),()=>{const _0x559dc1=_0x4988a1,_0x584100=_0x3e5f23['getElementById'](_0x559dc1(0xcb0));_0x584100&&(_0x584100[_0x559dc1(0x555)][_0x559dc1(0x9ad)](_0x559dc1(0xc64)),_0x584100[_0x559dc1(0x329)][_0x559dc1(0x71d)]='',_0x584100[_0x559dc1(0x329)][_0x559dc1(0x990)]='');});}function _0x3cfa5f(){const _0x263d67=_0x8dde82;try{localStorage['setItem'](_0x263d67(0x9c4),JSON[_0x263d67(0xea5)]({'playlist':_0xdfbfac[_0x263d67(0xddd)],'currentIndex':_0xdfbfac[_0x263d67(0x55e)]}));}catch(_0x271b0b){_0x263d67(0x591)!==_0x263d67(0x591)?(_0x198076[_0x263d67(0x27f)](_0x263d67(0xd66),_0x35d6c6),_0x29c7b8(_0x263d67(0x57f)+_0x7b8a0e[_0x263d67(0x8ac)]),_0x309a87[_0x263d67(0x1d6)](_0x263d67(0x5f9))[_0x263d67(0x329)][_0x263d67(0xc66)]='block',_0x1b6709[_0x263d67(0x1d6)](_0x263d67(0x33a))['style']['display']=_0x263d67(0x338)):console[_0x263d67(0x27f)]('保存播放器状态失败，真是没用。',_0x271b0b);}}function _0x8e2a51(){const _0x59a11b=_0x8dde82;if(_0x59a11b(0x5a4)!==_0x59a11b(0xde3))try{if('WfuGU'==='yuhSP')_0x5e75ae[_0x59a11b(0xb95)]!=='AbortError'&&(_0x21eaff[_0x59a11b(0x27f)](_0x59a11b(0xba9),_0x3f7c81),_0x15cf21({'role':_0x59a11b(0xefe),'content':_0x59a11b(0x693)+_0x4284c8[_0x59a11b(0x8ac)]},_0x48b6f3[_0x59a11b(0x3a4)][_0x59a11b(0x1e2)]-0x1));else{const _0x58ec21=localStorage['getItem'](_0x59a11b(0x9c4));if(_0x58ec21){const {playlist:_0xe27393,currentIndex:_0x453945}=JSON[_0x59a11b(0xc44)](_0x58ec21);Array['isArray'](_0xe27393)&&_0xe27393[_0x59a11b(0x1e2)]>0x0&&_0x453945>-0x1&&(_0xdfbfac['musicPlaylist']=_0xe27393,_0xdfbfac['currentlyPlayingIndex']=_0x453945,_0xdfbfac['isPlaying']=![],_0x2cc20d());}}}catch(_0x3411f2){'VIJtL'!==_0x59a11b(0xfa)?_0x461e8e[_0x59a11b(0xa73)]=_0xee562a:console['error'](_0x59a11b(0xbd0),_0x3411f2);}else{const _0x151bfd=_0x1b0b36[_0x59a11b(0x21c)](_0x2b70a9);_0x4de379[_0x59a11b(0xcab)]=_0x151bfd,_0x5d3f84[_0x59a11b(0x787)]=()=>_0x354ee3[_0x59a11b(0x953)](_0x151bfd);}}function _0x1b84b1(_0x4b06d5){const _0x2a60fd=_0x8dde82;if(_0x2a60fd(0x581)===_0x2a60fd(0x14f))_0x440ebd[_0x2a60fd(0x27f)](_0x2a60fd(0xef2));else{if(window[_0x2a60fd(0x1e5)])clearTimeout(window[_0x2a60fd(0x1e5)]);const _0x48db66=_0x4b06d5[_0x2a60fd(0x272)][_0x2a60fd(0x699)](_0x2a60fd(0xd09));if(!_0x48db66)return;const _0x178b17=_0x48db66[_0x2a60fd(0x63f)]['timestamp'],_0x2b76f3=_0x48db66[_0x2a60fd(0x555)][_0x2a60fd(0xcbc)]('user')?'user':'ai';if(!_0x178b17)return;const _0x2a0e55=()=>{const _0x56be20=_0x2a60fd;window[_0x56be20(0x1e5)]=setTimeout(()=>{const _0x4e577f=_0x56be20;if(_0x4b06d5[_0x4e577f(0x8c7)]===_0x4e577f(0xa6c))_0x4b06d5[_0x4e577f(0xc7a)]();_0x273cd2(parseInt(_0x178b17,0xa),_0x2b76f3);},0x320);},_0xb19c1e=()=>{const _0x2d6033=_0x2a60fd;if(_0x2d6033(0xc40)!=='iqLVh')_0x20b18e(_0x2d6033(0xa59));else{if(window[_0x2d6033(0x1e5)])clearTimeout(window[_0x2d6033(0x1e5)]);}};document[_0x2a60fd(0x3a0)](_0x2a60fd(0xc67),_0xb19c1e,{'once':!![]}),document[_0x2a60fd(0x3a0)](_0x2a60fd(0xb8b),_0xb19c1e,{'once':!![]}),document[_0x2a60fd(0x3a0)](_0x2a60fd(0x28a),_0xb19c1e,{'once':!![]}),_0x2a0e55();}}function _0x273cd2(_0x314b2e,_0x53d10e){const _0x2fc0c0=_0x8dde82;if(_0x2fc0c0(0xe6d)===_0x2fc0c0(0x2d6))_0x22818e[_0x2fc0c0(0x27f)](_0x2fc0c0(0xb43),_0x424845),_0xc9fe0a&&(_0x212a0f[_0x2fc0c0(0x329)]['backgroundImage']='');else{const _0xef85a2=_0x2fc0c0(0x509)+_0x314b2e;let _0x59ab2b=document['getElementById'](_0xef85a2);if(_0x59ab2b)return;const _0x4e862f='\x0a\x20\x20\x20\x20<div\x20id=\x22'+_0xef85a2+_0x2fc0c0(0x750)+(_0x53d10e==='ai'?_0x2fc0c0(0xc45):'')+_0x2fc0c0(0x95c);document['body'][_0x2fc0c0(0xc04)](_0x2fc0c0(0x439),_0x4e862f);const _0x523deb=document[_0x2fc0c0(0x1d6)](_0xef85a2),_0x3548f8=()=>_0x523deb[_0x2fc0c0(0x9ad)]();_0x523deb[_0x2fc0c0(0xb6c)](_0x2fc0c0(0x8d7))['onclick']=_0x3548f8,_0x523deb['querySelector']('#diary-action-cancel')[_0x2fc0c0(0x4a1)]=_0x3548f8,_0x523deb[_0x2fc0c0(0xb6c)](_0x2fc0c0(0xa28))[_0x2fc0c0(0x4a1)]=()=>{const _0x3133dc=_0x2fc0c0;if('qfqrM'===_0x3133dc(0x31a)){const _0x2f801e=_0x4aa1c0();_0x2f801e&&_0x2f801e[_0x3133dc(0x74a)]&&_0x2f801e[_0x3133dc(0x74a)][_0x3133dc(0x976)]&&(_0x23a0c3['style'][_0x3133dc(0xc66)]=_0x3133dc(0xe12),_0x4fb7b4(()=>_0x5439b2['classList'][_0x3133dc(0x1cd)](_0x3133dc(0x36e)),0xa));}else _0x301aa5(_0x314b2e),_0x3548f8();},_0x53d10e==='ai'&&(_0x523deb[_0x2fc0c0(0xb6c)]('#diary-action-reroll')['onclick']=()=>{const _0xbe25b7=_0x2fc0c0;if(_0xbe25b7(0xbb7)===_0xbe25b7(0xbb7))_0x134dc8(_0x314b2e),_0x3548f8();else{let _0x361076=_0x452a60[_0xbe25b7(0xb6c)](_0xbe25b7(0x2ad));if(!_0x361076){_0x361076=_0x4f9412[_0xbe25b7(0x8f1)](_0xbe25b7(0xce2)),_0x361076[_0xbe25b7(0x213)]=_0xbe25b7(0x4fe);const _0x3cedfc=_0x4865d4();_0x361076[_0xbe25b7(0x101)]=_0x3cedfc&&_0x3cedfc[_0xbe25b7(0x8c7)]===_0xbe25b7(0x304)?'群友正在输入...':_0xbe25b7(0xc39),_0x21c9fd[_0xbe25b7(0x1d6)](_0xbe25b7(0x756))[_0xbe25b7(0x5b8)](_0x361076);}}});}}async function _0x301aa5(_0x4d2a02){const _0x241b97=_0x8dde82,_0x50cc17=await _0x13215d(_0x241b97(0xd40));if(!_0x50cc17)return;const _0x133885=_0xdfbfac[_0x241b97(0x26a)][_0x241b97(0x76b)](_0x111fb9=>_0x111fb9[_0x241b97(0x113)]===_0xdfbfac[_0x241b97(0x958)]);if(!_0x133885)return;const _0xfdec60=_0x133885[_0x241b97(0xd86)][_0x241b97(0xd30)](_0x29bed7=>_0x29bed7[_0x241b97(0x10c)]===_0x4d2a02);_0xfdec60>-0x1&&(_0x241b97(0xc6b)!==_0x241b97(0xc6b)?(_0x349260[_0x241b97(0xa54)](_0x241b97(0x855),_0x4a5272['stringify'](_0x50a36f)),_0x40bfa2[_0x241b97(0x7ec)](_0x241b97(0x51e))):(_0x133885[_0x241b97(0xd86)][_0x241b97(0x22f)](_0xfdec60,0x1),_0x31622b(),_0x2ad695(),_0x21d6ce(_0x241b97(0x1f2))));}async function _0x134dc8(_0x5a085b){const _0x26d02a=_0x8dde82;if('Ncepp'===_0x26d02a(0x752)){const _0x190deb=_0xdfbfac[_0x26d02a(0x26a)][_0x26d02a(0x76b)](_0x18146e=>_0x18146e[_0x26d02a(0x113)]===_0xdfbfac['activeDiaryCharacterId']);if(!_0x190deb)return;const _0x5652d6=_0x190deb[_0x26d02a(0xd86)]['findIndex'](_0x57701f=>_0x57701f['timestamp']===_0x5a085b);if(_0x5652d6>-0x1){if(_0x26d02a(0x6c1)==='HZCXF'){_0x1cc98f[_0x26d02a(0xb7b)]=[..._0x385aeb];const _0x172687=_0x4c9792[_0x26d02a(0xb7b)][_0x26d02a(0x2f0)]();_0x531691[_0x26d02a(0x101)]=_0x172687[_0x26d02a(0x8b5)]===_0x26d02a(0x230)?'旁白':_0x172687[_0x26d02a(0x8b5)],_0x36abb7[_0x26d02a(0x101)]=_0x172687[_0x26d02a(0x1c6)],_0x172687[_0x26d02a(0x8b5)]!==_0x26d02a(0x230)&&_0x408fac(_0x588846[_0x26d02a(0x6e4)],_0x172687[_0x26d02a(0x2c4)]);}else _0x190deb[_0x26d02a(0xd86)][_0x26d02a(0x22f)](_0x5652d6,0x1),_0x31622b(),_0x2ad695(),await _0xbc917a();}}else _0x38c871+='\x20[并附上了一张图片]';}function _0x5e4224(){const _0x1b01a7=_0x8dde82;if('dYfTA'===_0x1b01a7(0xd3e)){_0x3148e0('还没有我的回应可以重新生成哦。');return;}else{const _0x122e3e=document[_0x1b01a7(0x1d6)](_0x1b01a7(0xdd0));_0x122e3e[_0x1b01a7(0xa73)]='';const _0x5368dd=_0xdfbfac[_0x1b01a7(0x94d)][_0x1b01a7(0xeb3)](_0xe20fcc=>_0xdfbfac['chats'][_0x1b01a7(0x7d1)](_0x4aed70=>_0x4aed70[_0x1b01a7(0x8c7)]==='private'&&_0x4aed70[_0x1b01a7(0x41b)][_0x1b01a7(0xc35)](_0xe20fcc['id'])));if(_0x5368dd[_0x1b01a7(0x1e2)]===0x0){_0x122e3e[_0x1b01a7(0xa73)]=_0x1b01a7(0x6e6);return;}_0x5368dd['forEach'](_0x1e7760=>{const _0xebc955=_0x1b01a7;if(_0xebc955(0x950)===_0xebc955(0x950)){const _0x2ea40e=document[_0xebc955(0x8f1)]('li');_0x2ea40e[_0xebc955(0x213)]=_0xebc955(0x9f1),_0x2ea40e['dataset'][_0xebc955(0xe9)]=_0x1e7760['id'],_0x2ea40e[_0xebc955(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x1e7760['avatar']||_0x1af29b)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x1e7760['name']+_0xebc955(0xdd8),_0x2ea40e[_0xebc955(0x3a0)](_0xebc955(0x288),()=>{_0x279fea(_0x1e7760['id']);}),_0x2ea40e[_0xebc955(0xb6c)]('.char-info-wrapper')['addEventListener'](_0xebc955(0x288),()=>{_0x279fea(_0x1e7760['id']);}),_0x2ea40e[_0xebc955(0xb6c)](_0xebc955(0x32c))[_0xebc955(0x3a0)]('click',_0x714175=>{const _0x29fd7b=_0xebc955;_0x29fd7b(0x743)===_0x29fd7b(0x2d9)?_0x4ad446[_0x29fd7b(0x5b8)](_0x2059c3):(_0x714175['stopPropagation'](),_0xef0c22(_0x1e7760['id']));}),_0x122e3e[_0xebc955(0x5b8)](_0x2ea40e);}else _0xa27487(_0x34456f['id']);});}}function _0x279fea(_0x5f5a1f){const _0x343219=_0x8dde82,_0x528f91=_0x5844c7(_0x5f5a1f);if(!_0x528f91)return;_0xdfbfac[_0x343219(0x958)]=_0x5f5a1f;const _0xa1e7bb=_0xdfbfac['diaries'][_0x343219(0x76b)](_0x15907c=>_0x15907c['characterId']===_0x5f5a1f),_0xdbe26c=_0xa1e7bb?_0xa1e7bb['entries'][_0x343219(0x1e2)]:0x0,_0x4c873b=0x2;_0xdfbfac['diaryCurrentPage']=Math[_0x343219(0xbf5)](0x0,Math['ceil'](_0xdbe26c/_0x4c873b)-0x1),document[_0x343219(0x1d6)](_0x343219(0x92a))['textContent']=_0x528f91[_0x343219(0xb95)]+'的日记本',_0x2ad695(),_0x137a40(_0x343219(0xcec),'diaryList');}function _0x2ad695(){const _0x143bc6=_0x8dde82;if('UypwN'!==_0x143bc6(0xa00)){const _0x2bba6e=document[_0x143bc6(0x1d6)](_0x143bc6(0x85c)),_0x47f2b7=document['getElementById'](_0x143bc6(0x8a5));_0x2bba6e[_0x143bc6(0xa73)]='',_0x47f2b7[_0x143bc6(0xa73)]='';const _0x9a3ae7=_0x218cd0()||{'name':'我'},_0x3f9753=_0xdfbfac[_0x143bc6(0x26a)][_0x143bc6(0x76b)](_0x42a401=>_0x42a401[_0x143bc6(0x113)]===_0xdfbfac[_0x143bc6(0x958)]);if(!_0x3f9753||!_0x3f9753[_0x143bc6(0xd86)]||_0x3f9753['entries']['length']===0x0){_0x2bba6e[_0x143bc6(0xa73)]=_0x143bc6(0xafb),_0x47f2b7[_0x143bc6(0xa73)]=_0x143bc6(0x963),document[_0x143bc6(0x1d6)](_0x143bc6(0x746))['addEventListener']('click',_0x5a536d),document[_0x143bc6(0x1d6)](_0x143bc6(0x4ea))[_0x143bc6(0x3a0)]('click',_0xbc917a);return;}const _0xe69972=0x2,_0x1a6b87=[..._0x3f9753[_0x143bc6(0xd86)]][_0x143bc6(0x6d9)]((_0x148059,_0x7d528d)=>_0x148059[_0x143bc6(0x10c)]-_0x7d528d[_0x143bc6(0x10c)]),_0x5c0146=[];for(let _0x2afb2a=0x0;_0x2afb2a<_0x1a6b87['length'];_0x2afb2a+=_0xe69972){_0x5c0146[_0x143bc6(0xb66)](_0x1a6b87[_0x143bc6(0x8b8)](_0x2afb2a,_0x2afb2a+_0xe69972));}const _0x378c44=_0x5c0146[_0x143bc6(0x1e2)];_0x5c0146[_0x143bc6(0xb85)]((_0x4d4b25,_0x2f5ad3)=>{const _0x577581=_0x143bc6,_0x1645e0=document[_0x577581(0x8f1)](_0x577581(0xce2));_0x1645e0[_0x577581(0x213)]='diary-page',_0x1645e0['id']=_0x577581(0x88e)+_0x2f5ad3,_0x2f5ad3===_0xdfbfac[_0x577581(0x110)]&&_0x1645e0[_0x577581(0x555)]['add'](_0x577581(0x434)),_0x4d4b25[_0x577581(0xb85)](_0x28b7ea=>{const _0x12ef53=_0x577581;if(_0x12ef53(0x6a1)===_0x12ef53(0x3a6)){const _0x44e7f5=_0x12c5ca['accountingLedger'][_0x46d562],_0x145523=_0x44e7f5[_0x12ef53(0x8ef)][_0x12ef53(0x421)]((_0x3e9d0e,_0x44d2d3)=>_0x3e9d0e+(_0x44d2d3['amount']||0x0),0x0);_0x54c45a+=_0x12ef53(0xdc4)+_0x426373+_0x12ef53(0x1b9)+_0x1b0fba+_0x12ef53(0x17e)+_0x145523[_0x12ef53(0x491)](0x2)+_0x12ef53(0xe77);}else{const _0x574fe0=_0x28b7ea['author']==='user'?_0x12ef53(0xa29):'ai',_0x2cdcab=_0x28b7ea[_0x12ef53(0x3ba)]==='user'?_0x9a3ae7[_0x12ef53(0xb95)]:_0x5844c7(_0x28b7ea[_0x12ef53(0x3ba)])[_0x12ef53(0xb95)],_0xc3f44e=document[_0x12ef53(0x8f1)]('div');_0xc3f44e[_0x12ef53(0x213)]=_0x12ef53(0x5c4)+_0x574fe0,_0xc3f44e['dataset']['timestamp']=_0x28b7ea['timestamp'],_0xc3f44e['style']['borderBottom']=_0x12ef53(0x338),_0xc3f44e[_0x12ef53(0x329)][_0x12ef53(0x7eb)]='0',_0xc3f44e[_0x12ef53(0xa73)]=_0x12ef53(0x417)+_0x2cdcab+_0x12ef53(0x1fc)+new Date(_0x28b7ea[_0x12ef53(0x10c)])[_0x12ef53(0x985)](_0x12ef53(0x731))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>'+_0x28b7ea[_0x12ef53(0xee)][_0x12ef53(0xbe2)](/\n/g,_0x12ef53(0x109))+_0x12ef53(0xe3e),_0x1645e0['appendChild'](_0xc3f44e);}}),_0x2bba6e[_0x577581(0x5b8)](_0x1645e0);}),_0x47f2b7[_0x143bc6(0xa73)]=_0x143bc6(0x1e9)+(_0xdfbfac[_0x143bc6(0x110)]+0x1)+'\x20/\x20'+_0x378c44+'\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x143bc6(0x1d6)](_0x143bc6(0x975))[_0x143bc6(0x2c5)]=_0xdfbfac[_0x143bc6(0x110)]===0x0,document[_0x143bc6(0x1d6)]('diary-next-button')[_0x143bc6(0x2c5)]=_0xdfbfac['diaryCurrentPage']===_0x378c44-0x1,document[_0x143bc6(0x1d6)](_0x143bc6(0x975))['addEventListener'](_0x143bc6(0x288),_0x1075cd),document[_0x143bc6(0x1d6)](_0x143bc6(0x661))['addEventListener'](_0x143bc6(0x288),_0x3d4298),document[_0x143bc6(0x1d6)](_0x143bc6(0x746))[_0x143bc6(0x3a0)](_0x143bc6(0x288),_0x5a536d),document['getElementById'](_0x143bc6(0x4ea))[_0x143bc6(0x3a0)](_0x143bc6(0x288),_0xbc917a);}else{_0x5e3d43('请先选择一个聊天！');return;}}function _0x3d4298(){const _0xac2cfa=_0x8dde82;if(_0xdfbfac[_0xac2cfa(0x3f9)])return;const _0x2d499d=_0xdfbfac[_0xac2cfa(0x110)],_0x32a3a8=Math[_0xac2cfa(0x1fa)](_0xdfbfac[_0xac2cfa(0x26a)][_0xac2cfa(0x76b)](_0x8fc52=>_0x8fc52[_0xac2cfa(0x113)]===_0xdfbfac[_0xac2cfa(0x958)])['entries'][_0xac2cfa(0x1e2)]/0x2);if(_0x2d499d>=_0x32a3a8-0x1)return;_0xdfbfac[_0xac2cfa(0x3f9)]=!![];const _0x276d56=_0x2d499d+0x1,_0x526f7c=document[_0xac2cfa(0x1d6)](_0xac2cfa(0x88e)+_0x2d499d),_0x1c555d=document[_0xac2cfa(0x1d6)]('diary-page-'+_0x276d56);_0x526f7c&&_0x1c555d?(_0x1c555d[_0xac2cfa(0x555)][_0xac2cfa(0x1cd)]('is-entering-from-right'),_0x526f7c[_0xac2cfa(0x555)][_0xac2cfa(0x1cd)](_0xac2cfa(0x127)),_0x1c555d[_0xac2cfa(0x555)]['add'](_0xac2cfa(0x434)),setTimeout(()=>{const _0x43229d=_0xac2cfa;if(_0x43229d(0x16f)!==_0x43229d(0x560))_0x526f7c[_0x43229d(0x555)][_0x43229d(0x9ad)](_0x43229d(0x434),'is-exiting-left'),_0x1c555d[_0x43229d(0x555)][_0x43229d(0x9ad)](_0x43229d(0x8c0)),_0xdfbfac[_0x43229d(0x110)]=_0x276d56,_0x2ad695(),_0xdfbfac[_0x43229d(0x3f9)]=![];else{if(_0x4a10c4[_0x43229d(0xefb)]===_0x43229d(0xefe)){const _0x126cf9=_0x184d85[_0x43229d(0x5fe)][_0x1e390a];_0x126cf9&&_0x126cf9['length']>0x0&&(_0x213e37=_0x126cf9['at'](-0x1));}else _0x182736={'speaker':_0x28b1bb[_0x43229d(0xb95)],'line':_0x54ea4f[_0x43229d(0xee)],'emotion':_0x43229d(0xcd5)};}},0x2bc)):_0xdfbfac['isAnimatingDiary']=![];}function _0x1075cd(){const _0x234f7c=_0x8dde82;if(_0x234f7c(0x21f)!==_0x234f7c(0x21f))_0x4cca55[_0x234f7c(0x23c)]===0x0&&_0x130c07(_0x5af56f,_0x353b42,_0x446c80);else{if(_0xdfbfac[_0x234f7c(0x3f9)])return;const _0x31a852=_0xdfbfac[_0x234f7c(0x110)];if(_0x31a852<=0x0)return;_0xdfbfac[_0x234f7c(0x3f9)]=!![];const _0x27e24b=_0x31a852-0x1,_0x455bfc=document[_0x234f7c(0x1d6)](_0x234f7c(0x88e)+_0x31a852),_0x5a3aec=document['getElementById']('diary-page-'+_0x27e24b);_0x455bfc&&_0x5a3aec?_0x234f7c(0x1d1)==='rYSEq'?_0x1fa31b[_0x234f7c(0x27f)](_0x234f7c(0x200),_0x9aeea4):(_0x5a3aec[_0x234f7c(0x555)][_0x234f7c(0x1cd)](_0x234f7c(0x77a)),_0x455bfc[_0x234f7c(0x555)][_0x234f7c(0x1cd)](_0x234f7c(0x9ae)),_0x5a3aec['classList']['add'](_0x234f7c(0x434)),setTimeout(()=>{const _0x316449=_0x234f7c;_0x316449(0x5b1)===_0x316449(0x5b1)?(_0x455bfc[_0x316449(0x555)]['remove'](_0x316449(0x434),_0x316449(0x9ae)),_0x5a3aec['classList'][_0x316449(0x9ad)](_0x316449(0x77a)),_0xdfbfac[_0x316449(0x110)]=_0x27e24b,_0x2ad695(),_0xdfbfac['isAnimatingDiary']=![]):(_0x54f65a=_0x1bb36c[_0x316449(0x272)][_0x316449(0x6d4)][0x0],_0x2a1355(_0x2383b5,_0x1fbfed),_0x5e8ed2[_0x316449(0x2c5)]=!_0x35bed3);},0x2bc)):_0xdfbfac[_0x234f7c(0x3f9)]=![];}}function _0x5a536d(){const _0x4a4480=_0x8dde82;if(_0x4a4480(0xed2)===_0x4a4480(0xed2))return new Promise(_0x37846d=>{const _0x441470=_0x4a4480,_0x5421be=_0x441470(0x56c);document[_0x441470(0x42c)][_0x441470(0xc04)]('beforeend',_0x5421be);const _0x50c7f9=document['getElementById'](_0x441470(0x65a)),_0x451d34=document[_0x441470(0x1d6)]('diary-modal-textarea'),_0x552929=document[_0x441470(0x1d6)](_0x441470(0x4a7)),_0xc843bd=document[_0x441470(0x1d6)]('diary-modal-cancel'),_0x59b6=_0x50c7f9[_0x441470(0xb6c)](_0x441470(0x8d7)),_0x1156e2=()=>{const _0x3d09a0=_0x441470;if('lhXtZ'===_0x3d09a0(0x5b5))_0x50c7f9['remove'](),_0x37846d();else{if(!_0x2d24d4[_0x3d09a0(0x8ed)])return;try{_0x3c4217[_0x3d09a0(0xa54)]('chatHistory_'+_0x2b13a8[_0x3d09a0(0x8ed)],_0x1535e6['stringify'](_0x4ee400['conversationHistory']));}catch(_0xa91192){_0x1fcd71[_0x3d09a0(0x27f)](_0x3d09a0(0x956),_0xa91192),_0x27e8fa(_0x3d09a0(0x5b0));}}};_0x552929[_0x441470(0x4a1)]=()=>{const _0x46553e=_0x441470;'VcfbL'!=='VcfbL'?_0x543d8e[_0x46553e(0xb66)](_0x4539fe[_0x46553e(0x692)](_0x46553e(0xc4a))[_0x46553e(0x94f)](_0x5acf2b=>_0x5c259a[_0x46553e(0xe3c)]=new _0x182917([_0x5acf2b],_0x586cc6[_0x46553e(0xb95)]))):(_0x181b22(_0x451d34['value']),_0x1156e2());},_0xc843bd[_0x441470(0x4a1)]=_0x1156e2,_0x59b6[_0x441470(0x4a1)]=_0x1156e2;});else _0x38a75b[_0x4a4480(0x74a)]=null,_0xf05662(_0x4a4480(0x74d)),_0x35d585();}function _0x181b22(_0x45bbfa){const _0x418ea4=_0x8dde82;if(_0x418ea4(0x1ab)==='QqNMu'){const _0x378f61=_0x45bbfa[_0x418ea4(0xcd2)]();if(!_0x378f61||!_0xdfbfac['activeDiaryCharacterId'])return;let _0x5f0a6c=_0xdfbfac[_0x418ea4(0x26a)]['find'](_0x240913=>_0x240913['characterId']===_0xdfbfac[_0x418ea4(0x958)]);!_0x5f0a6c&&(_0x5f0a6c={'characterId':_0xdfbfac[_0x418ea4(0x958)],'entries':[]},_0xdfbfac['diaries'][_0x418ea4(0xb66)](_0x5f0a6c));_0x5f0a6c['entries'][_0x418ea4(0xb66)]({'timestamp':Date['now'](),'author':_0x418ea4(0xa29),'content':_0x378f61}),_0x31622b();const _0x3bf1e0=_0x5f0a6c[_0x418ea4(0xd86)]['length'];_0xdfbfac[_0x418ea4(0x110)]=Math[_0x418ea4(0x1fa)](_0x3bf1e0/0x2)-0x1,_0x2ad695();}else{_0x2d2c8a('歌名和歌手都不能为空！');return;}}async function _0xbc917a(){const _0x77491=_0x8dde82;if(_0x77491(0xb59)!==_0x77491(0xb59)){const _0x53fec4=_0x1c8f3e[0x0][_0x77491(0xcd2)](),_0x5b2924=_0xe26653[0x1][_0x77491(0xcd2)]()[_0x77491(0xbe2)](/^"|"$/g,'');_0x53648f[_0x53fec4]=_0x5b2924;}else{const _0x3927a4=_0xdfbfac[_0x77491(0x26a)][_0x77491(0x76b)](_0x5e147e=>_0x5e147e[_0x77491(0x113)]===_0xdfbfac[_0x77491(0x958)]),_0x5ddcb5=_0xdfbfac['activeDiaryCharacterId'],_0x9af90f=_0x5844c7(_0x5ddcb5);if(!_0x9af90f||_0xdfbfac['isGenerating'])return;_0x1a8bbc(!![],_0x77491(0xe89)),await new Promise(_0x327d41=>setTimeout(_0x327d41,0x32)),_0xdfbfac[_0x77491(0x556)]=!![];let _0x4acaf1=[];try{if(_0x77491(0xb1d)!=='QsTKy'){const _0x8bfd53=_0x218cd0()||{'name':'你'},_0x538242=_0x2c9d46(_0x5ddcb5),{omniText:_0x2af0ab}=_0x5a83ee(_0x5ddcb5,_0xdfbfac[_0x77491(0x8ed)]);let _0x4619cb='';if(_0x9af90f[_0x77491(0x5ee)]&&_0x9af90f[_0x77491(0x5ee)][_0x77491(0x1e2)]>0x0){const _0x2c442a=_0x9af90f['linkedWorldBookIds'][_0x77491(0x266)](_0x42358e=>_0xdfbfac[_0x77491(0xe7d)][_0x77491(0x76b)](_0x263b9b=>_0x263b9b['id']===_0x42358e))[_0x77491(0xeb3)](Boolean)[_0x77491(0x266)](_0x28568d=>_0x77491(0x820)+_0x28568d['name']+'\x0a'+_0x28568d['content'])['join']('');if(_0x2c442a)_0x4619cb='\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a'+_0x2c442a;}const _0x55b1af=_0x8bfd53[_0x77491(0x79b)]?'\x0a\x0a#\x20关于读者“'+_0x8bfd53[_0x77491(0xb95)]+_0x77491(0xe79)+_0x8bfd53[_0x77491(0x79b)]:'',_0x1dda10=_0x5c5e8c(),_0x864f4c=_0x2a0a9d(_0x5ddcb5);let _0x17e7be='你还没有写日记。';if(_0x3927a4&&_0x3927a4[_0x77491(0xd86)]){const _0x46a4eb=_0x3927a4[_0x77491(0xd86)]['filter'](_0x293cd0=>_0x293cd0[_0x77491(0x3ba)]===_0x77491(0xa29))[_0x77491(0xdba)]();_0x46a4eb&&(_0x17e7be=_0x46a4eb[_0x77491(0xee)]);}const _0x165e97='#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“'+_0x9af90f[_0x77491(0xb95)]+_0x77491(0x2c7)+_0x8bfd53['name']+_0x77491(0xd34)+_0x8bfd53[_0x77491(0xb95)]+_0x77491(0x25a)+_0x17e7be+'”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a'+_0x9af90f[_0x77491(0x79b)]+'\x0a'+_0x55b1af+'\x0a'+_0x4619cb+_0x77491(0x1be)+new Date()[_0x77491(0x985)]('zh-CN',{'dateStyle':_0x77491(0x755),'timeStyle':_0x77491(0xa40)})+'\x0a-\x20**日记本的上一笔记录是在**:\x20'+_0x301288(new Date(_0x3927a4?.[_0x77491(0xd86)]?.['at'](-0x1)?.[_0x77491(0x10c)]||Date[_0x77491(0x4a2)]()))+_0x77491(0xa1e)+(_0x2af0ab||_0x77491(0xd76))+'\x0a'+_0x864f4c+'\x20//\x20<--\x20哼，最后是这里\x0a---\x0a##\x20最近的朋友圈动态\x0a'+(_0x1dda10||_0x77491(0x2f6))+_0x77491(0x2ab);_0x4acaf1=[{'role':_0x77491(0xba3),'content':_0x165e97},{'role':'user','content':'好了，请基于以上所有信息，开始写今天的日记吧。'}];const _0x3ba400=await _0x2fa074(_0x4acaf1);if(_0x3ba400){let _0x4eecfc=_0xdfbfac[_0x77491(0x26a)][_0x77491(0x76b)](_0x24b48b=>_0x24b48b[_0x77491(0x113)]===_0x5ddcb5);if(!_0x4eecfc){if(_0x77491(0xb01)!=='gpkGs'){const _0x116f83=_0x25ca16[_0x77491(0xb6c)](_0x77491(0x7e3)+_0x57e19d+_0x77491(0x6b0)+_0x5d6389+'\x20.app-icon-img')?.[_0x77491(0xa73)];_0x116f83&&(_0x4195e6[_0x77491(0xa73)]=_0x116f83);}else _0x4eecfc={'characterId':_0x5ddcb5,'entries':[]},_0xdfbfac['diaries'][_0x77491(0xb66)](_0x4eecfc);}_0x4eecfc[_0x77491(0xd86)][_0x77491(0xb66)]({'timestamp':Date[_0x77491(0x4a2)](),'author':_0x5ddcb5,'content':_0x3ba400}),_0x31622b();const _0x5ade18=_0x4eecfc[_0x77491(0xd86)]['length'];_0xdfbfac[_0x77491(0x110)]=Math['ceil'](_0x5ade18/0x2)-0x1,_0x2ad695();}}else _0x18af49[_0x77491(0x329)][_0x77491(0x5b7)]=_0x77491(0x1c2)+_0x4fa169[_0x77491(0x21c)](_0x34fc1d)+')',_0x26d18d[_0x77491(0x329)][_0x77491(0xd79)]='cover',_0x241ab9[_0x77491(0x329)][_0x77491(0x453)]=_0x77491(0x6cc);}catch(_0xcc877f){_0x21d6ce(_0x77491(0x6c5)+_0xcc877f['message']);}finally{if(_0x77491(0x496)!==_0x77491(0x496)){if(!_0x3e33d8[_0x77491(0x2bb)]||_0x245de5[_0x77491(0x1d6)](_0x77491(0x5f9))[_0x77491(0x329)][_0x77491(0xc66)]==='block')return;const _0x2bff1c={'charId':_0xbcb38a[_0x77491(0x2bb)],'log':_0x5df1fc[_0x77491(0xc03)],'speechQueue':_0x5e277d[_0x77491(0xb64)],'speechIndex':_0x1ab47e[_0x77491(0xc23)],'dms':_0x5d3d77[_0x77491(0x4f6)]};try{_0x1e5ec0[_0x77491(0xa54)](_0x77491(0x855),_0x3894c9['stringify'](_0x2bff1c)),_0x4c9e64['log'](_0x77491(0x51e));}catch(_0x220c60){_0x1a7f55[_0x77491(0x27f)](_0x77491(0xd9b),_0x220c60);}}else _0x1a8bbc(![]),_0xdfbfac['isGenerating']=![];}}}function _0x4fb37c(){const _0xdad3f8=_0x8dde82,_0x51940b=document[_0xdad3f8(0x1d6)](_0xdad3f8(0x66f)),_0x42cc18=document[_0xdad3f8(0x1d6)](_0xdad3f8(0xd1f)),_0x33eead=document[_0xdad3f8(0xb6c)](_0xdad3f8(0x448)),_0x3eba0b=document[_0xdad3f8(0x1d6)]('meeting-view-screen');_0x3eba0b['classList'][_0xdad3f8(0x5be)](_0xdad3f8(0x607),_0xdfbfac[_0xdad3f8(0xc3d)]===_0xdad3f8(0xabd)),_0x3eba0b[_0xdad3f8(0x555)]['toggle'](_0xdad3f8(0x281),_0xdfbfac[_0xdad3f8(0xc3d)]===_0xdad3f8(0xbf1)),_0xdfbfac[_0xdad3f8(0xc3d)]==='galgame'?'wXtSj'!==_0xdad3f8(0xb7c)?_0x3849f4[_0xdad3f8(0x67f)]?_0x105de9():_0x1d92e4[_0xdad3f8(0x555)][_0xdad3f8(0x9ad)](_0xdad3f8(0x36e)):(_0x51940b[_0xdad3f8(0x329)][_0xdad3f8(0xc66)]=_0xdad3f8(0x338),_0x42cc18[_0xdad3f8(0x329)][_0xdad3f8(0xc66)]='block'):_0xdad3f8(0x510)===_0xdad3f8(0x510)?(_0x51940b[_0xdad3f8(0x329)]['display']=_0xdad3f8(0xc38),_0x42cc18['style'][_0xdad3f8(0xc66)]=_0xdad3f8(0x338),setTimeout(()=>{const _0x7cedc8=_0xdad3f8;if('gzHbY'==='gzHbY'){const _0x4977e4=_0x51940b[_0x7cedc8(0xb6c)](_0x7cedc8(0x23e));_0x4977e4?_0x4977e4['scrollIntoView']({'behavior':_0x7cedc8(0x6b7),'block':_0x7cedc8(0x8de)}):_0x51940b['scrollTop']=_0x51940b[_0x7cedc8(0xc0c)];}else _0x245dc0='0x'+_0x459946[0x1]+_0x524486[0x1],_0x580b71='0x'+_0x567acc[0x2]+_0x502d6d[0x2],_0x237cd0='0x'+_0x311f10[0x3]+_0x40da28[0x3];},0x32)):_0x1b5592+='-\x20你点过一份外卖：“'+_0xb2d497['restaurant_name']+_0xdad3f8(0xd7e)+_0x553aa4[_0xdad3f8(0xe0d)][_0xdad3f8(0xd9a)]('、')+'。\x0a',_0x33eead[_0xdad3f8(0x329)][_0xdad3f8(0xc66)]=_0xdad3f8(0xc38);}function _0x2376ec(){const _0x19db63=_0x8dde82;if(_0x19db63(0x36d)!==_0x19db63(0x36d))_0x1176d7[_0x19db63(0x9ad)]();else{const _0x4b9ae1=document['getElementById'](_0x19db63(0xd8e)),_0xa7122b=document[_0x19db63(0x1d6)]('galgame-text');if(_0xdfbfac['activeMeetingScriptQueue'][_0x19db63(0x1e2)]>0x0){const _0x47e5de=_0xdfbfac[_0x19db63(0xb7b)][_0x19db63(0x2f0)]();_0x4b9ae1[_0x19db63(0x101)]=_0x47e5de[_0x19db63(0x8b5)]==='narrator'?'旁白':_0x47e5de['speaker'],_0xa7122b[_0x19db63(0x101)]=_0x47e5de[_0x19db63(0x1c6)];if(_0x47e5de[_0x19db63(0x8b5)]!=='narrator'){if(_0x19db63(0x66e)!=='ntdXT'){const _0x202f5a=_0x9670bc(_0x2c416a),_0x1f48f1=_0x2babfb[_0x19db63(0x1d6)](_0x19db63(0x756));_0x1f48f1[_0x19db63(0x329)]['backgroundImage']='';let _0x5507b1=_0x2150ba[_0x19db63(0x1d6)](_0x19db63(0xeff)+_0x4fbc76);if(_0x5507b1)_0x5507b1[_0x19db63(0xa73)]='';if(!_0x202f5a)return;_0x202f5a[_0x19db63(0x58d)]&&(_0x1f48f1['style']['backgroundImage']=_0x19db63(0x8a1)+_0x202f5a[_0x19db63(0x58d)]+'\x27)',_0x1f48f1[_0x19db63(0x329)][_0x19db63(0xd79)]=_0x19db63(0x267),_0x1f48f1[_0x19db63(0x329)][_0x19db63(0x453)]='center');if(_0x202f5a['bubbleCss']){let _0x2cd290=_0x513dbf[_0x19db63(0x1d6)]('style-'+_0x202f5a['id']);!_0x2cd290&&(_0x2cd290=_0x17ebfb[_0x19db63(0x8f1)](_0x19db63(0x329)),_0x2cd290['id']=_0x19db63(0xeff)+_0x202f5a['id'],_0x2b9f81[_0x19db63(0xbcf)][_0x19db63(0x5b8)](_0x2cd290));const _0x265e21=_0x202f5a[_0x19db63(0x4b0)],_0x64d476=_0x265e21[_0x19db63(0xbe2)](/\.bubble\.sent/g,_0x19db63(0x283)+_0x202f5a['id']+'.message.user')[_0x19db63(0xbe2)](/\.bubble\.received/g,_0x19db63(0x283)+_0x202f5a['id']+_0x19db63(0xab3));_0x2cd290[_0x19db63(0xa73)]=_0x64d476;}}else _0x3ecf20(_0xdfbfac[_0x19db63(0x6e4)],_0x47e5de[_0x19db63(0x2c4)]);}}else{const _0x4c3462=_0xdfbfac[_0x19db63(0x5fe)][_0xdfbfac[_0x19db63(0x6e4)]];if(_0x4c3462&&_0x4c3462[_0x19db63(0x1e2)]>0x0){if(_0x19db63(0x92f)!==_0x19db63(0x765)){_0xdfbfac[_0x19db63(0xb7b)]=[..._0x4c3462];const _0x11d2be=_0xdfbfac[_0x19db63(0xb7b)][_0x19db63(0x2f0)]();_0x4b9ae1['textContent']=_0x11d2be[_0x19db63(0x8b5)]===_0x19db63(0x230)?'旁白':_0x11d2be[_0x19db63(0x8b5)],_0xa7122b[_0x19db63(0x101)]=_0x11d2be['line'];if(_0x11d2be[_0x19db63(0x8b5)]!==_0x19db63(0x230)){if(_0x19db63(0x983)==='QpuBB')throw new _0x348136(_0x19db63(0x8aa));else _0x3ecf20(_0xdfbfac[_0x19db63(0x6e4)],_0x11d2be[_0x19db63(0x2c4)]);}}else _0x282fb4[_0x19db63(0xb66)]({'name':_0x1c0b85[0x0][_0x19db63(0xcd2)](),'url':_0xb60efd[0x1][_0x19db63(0xcd2)]()});}else _0x4b9ae1['textContent']='旁白',_0xa7122b[_0x19db63(0x101)]=_0x19db63(0xa9c);}}}async function _0x3ecf20(_0x50b73f,_0xe38cb3){const _0x35b9fb=_0x8dde82;if(_0x35b9fb(0x857)!==_0x35b9fb(0xaf3)){const _0x476546=document[_0x35b9fb(0x1d6)](_0x35b9fb(0x905)),_0x22ac9e=document['getElementById'](_0x35b9fb(0xe88)),_0x2920c8=_0x5844c7(_0x50b73f),_0x415d3f=_0x2920c8?.[_0x35b9fb(0x92c)]||{'x':0x32,'y':0x64,'scale':0x1},_0x2d2bf3=0x50*_0x415d3f[_0x35b9fb(0xa9d)];_0x22ac9e[_0x35b9fb(0x329)]['height']=_0x2d2bf3+'%',_0x22ac9e[_0x35b9fb(0x329)][_0x35b9fb(0x429)]=_0x2d2bf3+'%',_0x22ac9e['style'][_0x35b9fb(0x984)]=_0x415d3f['x']+'%',_0x22ac9e[_0x35b9fb(0x329)][_0x35b9fb(0x811)]=_0x415d3f['y']+'%',_0x22ac9e['style'][_0x35b9fb(0x71d)]='translate(-50%,\x20-100%)',_0x22ac9e[_0x35b9fb(0x329)][_0x35b9fb(0xe96)]=_0x35b9fb(0x6b7);const _0x22de82=['normal',_0x35b9fb(0xd46),'angry','sad',_0x35b9fb(0xe5)],_0x177852=_0x22de82[_0x35b9fb(0xc35)](_0xe38cb3)?_0xe38cb3:'normal';try{const _0x298f19=await _0x4131e2('char_sprite_'+_0x177852+'_'+_0x50b73f);if(_0x298f19)_0x476546['src']&&_0x476546['style'][_0x35b9fb(0x990)]!=='0'?(_0x476546[_0x35b9fb(0x329)][_0x35b9fb(0x990)]=0x0,setTimeout(()=>{const _0x32dc4c=_0x35b9fb;_0x476546[_0x32dc4c(0xcab)]=URL[_0x32dc4c(0x21c)](_0x298f19),_0x476546[_0x32dc4c(0x329)]['opacity']=0x1;},0x96)):(_0x476546[_0x35b9fb(0xcab)]=URL[_0x35b9fb(0x21c)](_0x298f19),_0x476546[_0x35b9fb(0x329)][_0x35b9fb(0x990)]=0x1);else{const _0x2ef4cb=await _0x4131e2('char_sprite_normal_'+_0x50b73f);_0x476546['src']=_0x2ef4cb?URL['createObjectURL'](_0x2ef4cb):'';}}catch(_0x3d3a03){_0x35b9fb(0xefc)===_0x35b9fb(0xefc)?(console[_0x35b9fb(0x27f)]('加载立绘失败:',_0x3d3a03),document[_0x35b9fb(0x1d6)](_0x35b9fb(0x576))[_0x35b9fb(0xcab)]='',document[_0x35b9fb(0x1d6)](_0x35b9fb(0x10b))['src']=''):_0x278f43[_0x35b9fb(0xcd2)]()&&_0x85584e[_0x35b9fb(0x4f6)]['push']({'sender':'ai','content':_0x3c3eab[_0x35b9fb(0xcd2)]()});}}else _0x562b6d+=_0x35b9fb(0x3d9)+_0x5d9a33[_0x35b9fb(0x546)]+_0x35b9fb(0xda3)+_0x16c230['item_name']+'”。\x0a';}let _0x482d15=![],_0x5cc299={'isDragging':![],'isResizing':![],'startX':0x0,'startY':0x0,'startLeft':0x0,'startTop':0x0,'startWidth':0x0,'startHeight':0x0};const _0x1079d2=document['getElementById'](_0x8dde82(0x621)),_0x578235=document['getElementById']('sprite-confirm-button'),_0x2734d9=document['getElementById']('sprite-cancel-button'),_0x5b8f43=document[_0x8dde82(0x1d6)](_0x8dde82(0x51c)),_0x1c8a7a=document[_0x8dde82(0x1d6)](_0x8dde82(0x34d)),_0x583a75=document[_0x8dde82(0x1d6)](_0x8dde82(0xe88)),_0x43ccfc=document[_0x8dde82(0x1d6)](_0x8dde82(0x667)),_0x41c98a=document['getElementById'](_0x8dde82(0x301));let _0x30d889={};function _0x527132(){const _0x393afd=_0x8dde82;if(_0x393afd(0x3f3)!==_0x393afd(0x3f3))_0x4b2b3b[_0x393afd(0xcab)]=_0x4955e7['coverUrl']||_0x1a0685;else{const _0x412afb=_0x5844c7(_0xdfbfac[_0x393afd(0x6e4)]);if(!_0x412afb)return;_0x482d15=!![],_0x1c8a7a['style']['display']='block';const _0x425a4f=_0x412afb[_0x393afd(0x92c)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0x393afd(0x1d6)](_0x393afd(0xecc))[_0x393afd(0xee2)]=_0x425a4f['x'],document[_0x393afd(0x1d6)](_0x393afd(0xb17))[_0x393afd(0xee2)]=_0x425a4f['y'],document[_0x393afd(0x1d6)](_0x393afd(0x316))[_0x393afd(0xee2)]=_0x425a4f[_0x393afd(0xa9d)]*0x64,_0x30d889={..._0x425a4f},document['getElementById']('galgame-textbox-container')[_0x393afd(0x329)][_0x393afd(0xc66)]=_0x393afd(0x338),document[_0x393afd(0x1d6)]('galgame-sprite-adjust-ui')[_0x393afd(0x329)][_0x393afd(0xc66)]=_0x393afd(0x338);}}function _0x5ac15c(_0x47f7eb=![]){const _0x1d8109=_0x8dde82;_0x482d15=![],_0x1c8a7a[_0x1d8109(0x329)][_0x1d8109(0xc66)]=_0x1d8109(0x338),document[_0x1d8109(0x1d6)](_0x1d8109(0x7bb))[_0x1d8109(0x329)][_0x1d8109(0xc66)]=_0x1d8109(0xc38),document[_0x1d8109(0x1d6)](_0x1d8109(0xabc))[_0x1d8109(0x329)][_0x1d8109(0xc66)]=_0x1d8109(0xc38);if(!_0x47f7eb){const _0x37340e=_0x5844c7(_0xdfbfac[_0x1d8109(0x6e4)]);if(_0x37340e){if(_0x1d8109(0x365)!=='LVIgc')_0x37340e[_0x1d8109(0x92c)]=_0x30d889,_0x3ecf20(_0xdfbfac[_0x1d8109(0x6e4)],_0x1d8109(0xcd5));else{if(_0x5d4654)_0x3515f6[_0x1d8109(0x329)][_0x1d8109(0x5b7)]=_0x1d8109(0x8a1)+_0x26aa5a[_0x1d8109(0x21c)](_0x36f3a8)+'\x27)';}}}}function _0x40aaf8(){const _0x310fd7=_0x8dde82,_0x1c3a79=_0x5844c7(_0xdfbfac[_0x310fd7(0x6e4)]);if(!_0x1c3a79)return;const _0x188937=parseFloat(document[_0x310fd7(0x1d6)]('sprite-slider-x')['value']),_0xacdea8=parseFloat(document['getElementById'](_0x310fd7(0xb17))[_0x310fd7(0xee2)]),_0x320182=parseFloat(document[_0x310fd7(0x1d6)](_0x310fd7(0x316))['value'])/0x64;_0x1c3a79[_0x310fd7(0x92c)]={'x':_0x188937,'y':_0xacdea8,'scale':_0x320182},_0x31622b(),_0x21d6ce(_0x310fd7(0x238)),_0x5ac15c(!![]);}function _0x139c2d(){const _0x47866f=_0x8dde82;_0x13215d(_0x47866f(0x5cc))['then'](_0x46bbf0=>{const _0x9bd2e4=_0x47866f;if(_0x46bbf0){const _0x3506fe=_0x5844c7(_0xdfbfac[_0x9bd2e4(0x6e4)]);_0x3506fe&&(delete _0x3506fe[_0x9bd2e4(0x92c)],_0x31622b(),_0x3ecf20(_0x3506fe['id'],_0x9bd2e4(0xcd5)),_0x21d6ce(_0x9bd2e4(0xdce)),_0x5ac15c(!![]));}});}function _0x44353a(){const _0x5a36e7=_0x8dde82;if('DyjJm'!==_0x5a36e7(0x2f3))_0x4f7e30+=_0x5a36e7(0xd04)+_0x1842b4[_0x5a36e7(0xb11)]+'”，并看到了这样的结果摘要：“'+(_0x2de9e1[_0x5a36e7(0x557)]||_0x5a36e7(0x53d))+_0x5a36e7(0x718);else{if(!_0x482d15)return;const _0x5e42b1=_0xdfbfac['activeMeetingCharId'],_0x17e870=_0x5844c7(_0x5e42b1);if(!_0x17e870)return;const _0x3e5fd8=parseFloat(document['getElementById'](_0x5a36e7(0xecc))[_0x5a36e7(0xee2)]),_0x15d406=parseFloat(document['getElementById']('sprite-slider-y')['value']),_0x1a2098=parseFloat(document[_0x5a36e7(0x1d6)](_0x5a36e7(0x316))[_0x5a36e7(0xee2)])/0x64;_0x17e870[_0x5a36e7(0x92c)]={'x':_0x3e5fd8,'y':_0x15d406,'scale':_0x1a2098};const _0x197887=document['getElementById'](_0x5a36e7(0xe88)),_0xe0d7d5=0x50*_0x1a2098;_0x197887['style'][_0x5a36e7(0x7e6)]=_0xe0d7d5+'%',_0x197887['style']['width']=_0xe0d7d5+'%',_0x197887[_0x5a36e7(0x329)]['left']=_0x3e5fd8+'%',_0x197887[_0x5a36e7(0x329)][_0x5a36e7(0x811)]=_0x15d406+'%',_0x197887[_0x5a36e7(0x329)][_0x5a36e7(0x71d)]=_0x5a36e7(0xcc4);}}document[_0x8dde82(0x1d6)]('sprite-slider-x')[_0x8dde82(0x3a0)](_0x8dde82(0xb39),_0x44353a),document['getElementById'](_0x8dde82(0xb17))[_0x8dde82(0x3a0)](_0x8dde82(0xb39),_0x44353a),document[_0x8dde82(0x1d6)](_0x8dde82(0x316))[_0x8dde82(0x3a0)](_0x8dde82(0xb39),_0x44353a),_0x1079d2[_0x8dde82(0x3a0)]('click',_0x527132),_0x578235[_0x8dde82(0x3a0)]('click',_0x40aaf8),_0x2734d9[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x5ac15c(![])),_0x5b8f43[_0x8dde82(0x3a0)]('click',_0x139c2d);function _0x112531(_0x5f459e){const _0x292120=_0x8dde82,_0x27bd57=_0x5844c7(_0x5f459e);if(!_0x27bd57)return;const _0x2c3ca3=_0xdfbfac[_0x292120(0xc1b)][_0x292120(0x76b)](_0x343fb0=>_0x343fb0['type']===_0x292120(0xcef)&&_0x343fb0[_0x292120(0x41b)][_0x292120(0xc35)](_0x5f459e)),_0x2601b9=_0x58761c(_0x2c3ca3['id']),_0x24dfc1=_0xdfbfac[_0x292120(0x3a4)][_0x292120(0xeb3)](_0x35403a=>_0x35403a['isOffline'])['pop'](),_0x5db7ac=document[_0x292120(0x1d6)](_0x292120(0xd8e)),_0x4785fe=document[_0x292120(0x1d6)]('galgame-text');let _0x31052f=null;if(_0x24dfc1){if('VWOSc'===_0x292120(0xe06))_0xa3e07a(_0x291d2a,_0x5d522e);else{if(_0x24dfc1[_0x292120(0xefb)]===_0x292120(0xefe)){const _0x22793e=_0xdfbfac['characterLastScripts'][_0x5f459e];_0x22793e&&_0x22793e[_0x292120(0x1e2)]>0x0&&(_0x31052f=_0x22793e['at'](-0x1));}else _0x31052f={'speaker':_0x2601b9[_0x292120(0xb95)],'line':_0x24dfc1['content'],'emotion':_0x292120(0xcd5)};}}_0x31052f?(_0x5db7ac[_0x292120(0x101)]=_0x31052f[_0x292120(0x8b5)]===_0x292120(0x230)?'旁白':_0x31052f['speaker'],_0x4785fe[_0x292120(0x101)]=_0x31052f[_0x292120(0x1c6)],_0x31052f[_0x292120(0x8b5)]===_0x27bd57[_0x292120(0xb95)]?_0x3ecf20(_0x5f459e,_0x31052f[_0x292120(0x2c4)]):_0x3ecf20(_0x5f459e,_0x292120(0xcd5))):(_0x5db7ac[_0x292120(0x101)]=_0x27bd57['name'],_0x4785fe['textContent']=_0x292120(0xbd4),_0x3ecf20(_0x5f459e,_0x292120(0xcd5)));}function _0x2e4cbc(){const _0x1fee12=_0x8dde82,_0x169a15=new Date(),_0x515626=document[_0x1fee12(0x1d6)](_0x1fee12(0x137)),_0x28c982=document[_0x1fee12(0x1d6)](_0x1fee12(0x217));if(_0x515626&&_0x28c982){if(_0x1fee12(0x6e9)!==_0x1fee12(0x10a)){const _0x5ce9a5=String(_0x169a15['getHours']())[_0x1fee12(0x4b9)](0x2,'0'),_0x11c47d=String(_0x169a15[_0x1fee12(0x212)]())[_0x1fee12(0x4b9)](0x2,'0');_0x515626[_0x1fee12(0x101)]=_0x5ce9a5+':'+_0x11c47d;const _0x2f0cc3=_0x169a15[_0x1fee12(0xb0a)]()+0x1,_0x3040e7=_0x169a15['getDate'](),_0x3cce1d=[_0x1fee12(0x4de),'星期一',_0x1fee12(0x2c2),_0x1fee12(0x29e),_0x1fee12(0xcf9),_0x1fee12(0xe69),_0x1fee12(0xe5b)][_0x169a15[_0x1fee12(0xab8)]()];_0x28c982[_0x1fee12(0x101)]=_0x2f0cc3+'月'+_0x3040e7+'日\x20'+_0x3cce1d;}else _0x50167d[_0x1fee12(0x1d6)]('user-post-image-input')[_0x1fee12(0x288)]();}}const _0x4bdaf4=document[_0x8dde82(0x1d6)](_0x8dde82(0xca8)),_0x36d9a0=document['getElementById'](_0x8dde82(0xc46)),_0xfd199b=document['getElementById']('cancel-listen-together'),_0x3a2ea5=document[_0x8dde82(0x1d6)](_0x8dde82(0x9d0)),_0xbe099=document[_0x8dde82(0x1d6)](_0x8dde82(0x171)),_0x3242a5=document[_0x8dde82(0x1d6)](_0x8dde82(0x7d7)),_0xfcf32c=document[_0x8dde82(0x1d6)](_0x8dde82(0x16e)),_0x5aa790=document[_0x8dde82(0x1d6)](_0x8dde82(0x298)),_0x2ff7f9=document[_0x8dde82(0x1d6)](_0x8dde82(0x9fe));let _0x311840=[],_0xd2e3e8=![];async function _0x2c7a4f(){const _0x46ea10=_0x8dde82;if(!_0xdfbfac[_0x46ea10(0x8ed)])return;_0xbe099[_0x46ea10(0xa73)]=_0x46ea10(0xd7b),_0x4bdaf4[_0x46ea10(0x555)][_0x46ea10(0x1cd)]('show');const _0xd47daa=await _0x12b5ed();if(_0xd47daa[_0x46ea10(0x1e2)]===0x0){if(_0x46ea10(0x1f8)!=='VDcOI'){_0xbe099[_0x46ea10(0xa73)]=_0x46ea10(0x6ec);return;}else _0x1cd779(),_0x327a0d['conversationHistory']=[],_0x34c74d();}_0xbe099[_0x46ea10(0xa73)]='',_0xd47daa[_0x46ea10(0xb85)](_0x51960b=>{const _0x55d582=_0x46ea10,_0x3f354e=document[_0x55d582(0x8f1)]('div');_0x3f354e['className']='music-library-item';const _0xa77351=_0x51960b[_0x55d582(0x267)]?URL[_0x55d582(0x21c)](_0x51960b[_0x55d582(0x267)]):_0x1af29b;_0x3f354e[_0x55d582(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0xa77351+'\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>'+(_0x51960b[_0x55d582(0x3d2)][_0x55d582(0x83e)]||_0x55d582(0x518))+_0x55d582(0x3c2)+(_0x51960b[_0x55d582(0x3d2)]['歌手']||_0x55d582(0x9e0))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3f354e['addEventListener']('click',()=>{_0x5c1976(_0x51960b);}),_0xbe099[_0x55d582(0x5b8)](_0x3f354e);});}function _0x404dfd(){const _0x31b372=_0x8dde82;'Yksee'!==_0x31b372(0x144)?_0x3b30ad[_0x31b372(0x555)][_0x31b372(0x9ad)](_0x31b372(0xe84)):_0x4bdaf4['classList'][_0x31b372(0x9ad)](_0x31b372(0x36e));}async function _0x5c1976(_0x28df24){const _0x3d4593=_0x8dde82;if(!_0xdfbfac[_0x3d4593(0x8ed)]||!_0x28df24)return;let _0x6359b1=null;if(_0x28df24[_0x3d4593(0x267)]){if('RptzU'!=='RptzU')_0x27b18a+=_0x3d4593(0x82c)+_0x4fd2da[_0x3d4593(0xc84)]+_0x3d4593(0x718);else try{_0x6359b1=_0x3d4593(0xbad)+Date[_0x3d4593(0x4a2)]()+'_'+Math[_0x3d4593(0x48a)](),await _0x510f28(_0x6359b1,_0x28df24[_0x3d4593(0x267)]);}catch(_0x3373c9){_0x3d4593(0xdbd)===_0x3d4593(0xdbd)?console['error']('在“一起听”邀请中，净化封面失败:',_0x3373c9):(_0x5a0e15+='\x20\x20具体对话如下：\x0a',_0x524659[_0x3d4593(0x7ec)][_0x3d4593(0xb85)](_0xf22444=>{const _0x3d9c55=_0x3d4593,_0x180500=_0xf22444[_0x3d9c55(0x466)]===_0x3d9c55(0x9ce)?'你':_0x249fd5[_0x3d9c55(0x19c)];_0x253e4d+=_0x3d9c55(0x1a7)+_0x180500+':\x20'+_0xf22444[_0x3d9c55(0xee)]+'\x20\x0a';}));}}const _0xc096a8={'role':_0x3d4593(0xa29),'type':_0x3d4593(0x8a3),'content':_0x3d4593(0xd9c)+_0x28df24['info'][_0x3d4593(0x83e)]+']','songId':_0x28df24['id'],'songName':_0x28df24[_0x3d4593(0x3d2)]['歌曲名称'],'artist':_0x28df24[_0x3d4593(0x3d2)]['歌手'],'coverId':_0x6359b1,'timestamp':Date[_0x3d4593(0x4a2)]()};_0xdfbfac[_0x3d4593(0x3a4)][_0x3d4593(0xb66)](_0xc096a8),_0x1aa46f(),_0x192646(),_0x404dfd(),setTimeout(_0x261487,0x64);}_0x36d9a0['addEventListener'](_0x8dde82(0x288),_0x2c7a4f),_0xfd199b[_0x8dde82(0x3a0)]('click',_0x404dfd),_0x3a2ea5[_0x8dde82(0x3a0)]('click',_0x404dfd);async function _0x31526f(_0x5ab370,_0xc2a1e1,_0x58bcd2){const _0x97b29f=_0x8dde82;if(_0x97b29f(0xd91)!=='KjvwU'){const _0x1f4e34=[];if(_0x3dc5eb[_0x97b29f(0x1e2)]>0x0)_0x1f4e34['push']('开心于'+_0x491bee[0x0]);if(_0x54067['length']>0x0)_0x1f4e34[_0x97b29f(0xb66)]('在意'+_0x4fdf1e[0x0]);_0x56c5da['push'](_0x97b29f(0x87b)+_0x1f4e34[_0x97b29f(0xd9a)]('，'));}else{if(_0xd2e3e8)return;_0xd2e3e8=!![];try{if(_0x97b29f(0x807)!=='UHtEs'){const _0x3d8c50=_0xdfbfac[_0x97b29f(0xc1b)][_0x97b29f(0x76b)](_0x127631=>_0x127631[_0x97b29f(0x74a)]&&_0x127631['activeListenSession'][_0x97b29f(0x976)]),_0x23fe6f=_0x1d801f();if(_0x3d8c50&&_0x3d8c50['id']!==_0x23fe6f['id'])_0x3d8c50['activeListenSession']=null,_0x21d6ce(_0x97b29f(0x74d)),_0x31622b();else _0x3d8c50&&_0x3d8c50['id']===_0x23fe6f['id']&&(_0x97b29f(0x182)===_0x97b29f(0x182)?_0x21d6ce(_0x97b29f(0x4e5)):_0x1f2a79(![]));_0x1a8bbc(!![],'正在连接同步频道...');if(!_0x23fe6f){if(_0x97b29f(0xe52)===_0x97b29f(0xe52)){_0x1a8bbc(![]),_0x21d6ce(_0x97b29f(0xb8a));return;}else _0x4f34e5[_0x97b29f(0x329)][_0x97b29f(0x38b)]=_0x97b29f(0xda0),_0xba2956[_0x97b29f(0x329)][_0x97b29f(0x811)]=_0x97b29f(0x99e),_0x4674b7[_0x97b29f(0x329)][_0x97b29f(0x984)]=_0x97b29f(0xa82),_0x1e5236[_0x97b29f(0x329)]['transform']=_0x97b29f(0x844),_0x28873d[_0x97b29f(0x329)]['display']=_0x97b29f(0xc38);}const _0x4bea8a=await _0x5aae8d(_0x5ab370);if(!_0x4bea8a){if(_0x97b29f(0x9f6)!=='akDEE')_0x2bfb27[_0x97b29f(0x555)][_0x97b29f(0x9ad)](_0x97b29f(0x369)),_0x5d7845[_0x97b29f(0x329)]['pointerEvents']='',_0x4ee840[_0x97b29f(0x7ec)](_0x97b29f(0xd10)+_0x22bf68+'.');else{_0x1a8bbc(![]),_0x21d6ce(_0x97b29f(0x2f5));return;}}_0x23fe6f['activeListenSession']={'isActive':!![],'songId':_0x5ab370,'leaderId':_0x97b29f(0xa29),'songName':_0x4bea8a[_0x97b29f(0x3d2)][_0x97b29f(0x83e)],'artist':_0x4bea8a[_0x97b29f(0x3d2)]['歌手'],'cover':_0x4bea8a[_0x97b29f(0x267)]},_0x31622b(),document['getElementById'](_0x97b29f(0x28e))[_0x97b29f(0xcab)]=_0x4bea8a[_0x97b29f(0x267)]?URL[_0x97b29f(0x21c)](_0x4bea8a['cover']):_0x1af29b,document[_0x97b29f(0x1d6)](_0x97b29f(0x7a4))[_0x97b29f(0x101)]=_0x4bea8a['info'][_0x97b29f(0x83e)],document['getElementById'](_0x97b29f(0x282))[_0x97b29f(0x101)]=_0x4bea8a[_0x97b29f(0x3d2)]['歌手'],_0x314c72(_0x4bea8a),_0xfcf32c['style']['display']=_0x97b29f(0xe12),setTimeout(()=>_0xfcf32c['classList']['add'](_0x97b29f(0x36e)),0xa),_0x58bcd2[_0x97b29f(0xa73)]='<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>'+_0x58bcd2[_0x97b29f(0xb6c)](_0x97b29f(0xde6))[_0x97b29f(0x2ec)],_0xdfbfac['conversationHistory'][_0xc2a1e1]&&(_0x97b29f(0x698)===_0x97b29f(0x376)?(_0x5129a8(![]),_0x2dca20=![]):(_0xdfbfac[_0x97b29f(0x3a4)][_0xc2a1e1][_0x97b29f(0x5ab)]=!![],_0x1aa46f())),_0x1a8bbc(![]),_0x62eb15(_0x5ab370,[_0x5ab370]),_0x488403(_0x4bea8a,!![]);}else _0x49927e[_0x97b29f(0xb66)](_0x55fe73[_0x97b29f(0xa49)]('music_library')[_0x97b29f(0x2df)](_0x508bab));}finally{_0xd2e3e8=![];}}}async function _0x584b6c(){const _0x46c7ac=_0x8dde82,_0x181e9a=await _0x13215d(_0x46c7ac(0x333));if(_0x181e9a){if(_0x46c7ac(0xc05)===_0x46c7ac(0xc05)){const _0x3b3a66=_0xdfbfac['chats']['find'](_0x4d0010=>_0x4d0010[_0x46c7ac(0x74a)]&&_0x4d0010[_0x46c7ac(0x74a)]['isActive']);if(_0x3b3a66){const _0x1d892a=_0x3b3a66['activeListenSession']['songName']||'歌曲',_0x28b1ec=_0x5844c7(_0x3b3a66[_0x46c7ac(0x113)])?.['name']||'TA',_0x27c92e=_0x3b3a66['id']===_0xdfbfac[_0x46c7ac(0x8ed)];_0x3b3a66[_0x46c7ac(0x74a)]=null,_0x31622b(),_0x488403(),_0xfcf32c[_0x46c7ac(0x555)][_0x46c7ac(0x9ad)](_0x46c7ac(0x36e)),setTimeout(()=>_0xfcf32c[_0x46c7ac(0x329)][_0x46c7ac(0xc66)]=_0x46c7ac(0x338),0x12c);const _0x104391={'role':'system','content':'[系统通知]\x20你们一起听的《'+_0x1d892a+_0x46c7ac(0x2fa),'type':_0x46c7ac(0x7ee),'timestamp':Date['now']()};if(!_0xdfbfac[_0x46c7ac(0x3a4)])_0xdfbfac[_0x46c7ac(0x3a4)]=[];_0xdfbfac['conversationHistory']['push'](_0x104391),_0x1aa46f();_0x27c92e&&(_0x46c7ac(0x214)!==_0x46c7ac(0x3f5)?_0x192646():(_0x7b75d9[_0x46c7ac(0xc37)]=_0x241b78['userProfiles'][_0x46c7ac(0xeb3)](_0x5df8e1=>_0x5df8e1['id']!==_0x16ed19),_0x46b28e[_0x46c7ac(0xb83)]===_0x4ed584&&(_0x53b0d5[_0x46c7ac(0xb83)]=_0x4be82f[_0x46c7ac(0xc37)][0x0]['id']),_0x33dc5b[_0x46c7ac(0xc1b)][_0x46c7ac(0xb85)](_0x121461=>{const _0x3b20a8=_0x46c7ac;_0x121461['boundUserProfileId']===_0x212cbe&&(_0x121461[_0x3b20a8(0xacb)]=_0x37d9ad[_0x3b20a8(0xb83)]);}),_0x23629d(),_0x40528d(_0x46c7ac(0x708)),_0x13d5bf(),_0x30bc47(_0x46c7ac(0xb96),'userProfile')));const _0x1d8ae9=document[_0x46c7ac(0x1d6)](_0x46c7ac(0x7d7));_0x1d8ae9[_0x46c7ac(0x57a)](),_0x1d8ae9[_0x46c7ac(0xcab)]='';const _0x51b909=document['getElementById'](_0x46c7ac(0x9fe));_0x51b909&&(_0x51b909[_0x46c7ac(0xa73)]='<p\x20class=\x22no-lyrics-placeholder\x22>暂无歌词</p>');if(typeof _0x311840!==_0x46c7ac(0x77c))_0x311840=[];_0xdfbfac[_0x46c7ac(0xb49)]=![],_0x2cc20d(),document[_0x46c7ac(0x7af)](_0x46c7ac(0x472))['forEach'](_0x3db3b8=>_0x3db3b8[_0x46c7ac(0x329)][_0x46c7ac(0xc66)]=_0x46c7ac(0x338)),_0x21d6ce('已结束一起听歌。');}}else _0x4ad3a3(_0x592a34,_0x1d104e,!![]);}}function _0x33c978(_0xd0c448){const _0x23c37f=_0x8dde82;if(!_0xd0c448)return[];const _0x5cebdb=_0xd0c448[_0x23c37f(0xc12)]('\x0a'),_0x56fe84=[],_0x5dbc59=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x4f4200 of _0x5cebdb){if(_0x23c37f(0xb79)===_0x23c37f(0x5e5))_0x127467['addEventListener'](_0x23c37f(0x288),()=>{const _0x252f69=_0x23c37f;_0x231b1c[_0x252f69(0xe3a)](),_0x356799[_0x252f69(0xab7)][_0x252f69(0x57d)](_0x57d477[_0x252f69(0xee2)])[_0x252f69(0x94f)](()=>{const _0xa581c7=_0x252f69;_0x2d9f25(_0xa581c7(0xe19));})[_0x252f69(0x7ad)](_0x2927bf=>{const _0xddffe1=_0x252f69;_0x29ccca(_0xddffe1(0xa59));});});else{const _0x119159=_0x4f4200['match'](_0x5dbc59);if(_0x119159){if('luMDM'==='wtywl')_0x39b673[_0x23c37f(0x329)][_0x23c37f(0x5b7)]=_0x23c37f(0x1c2)+_0x21a6af+')',_0x3b45e8['style'][_0x23c37f(0xd79)]=_0x23c37f(0x267),_0x3d3f44[_0x23c37f(0x329)][_0x23c37f(0x453)]=_0x23c37f(0x6cc),_0x2c0bb7[_0x23c37f(0x329)][_0x23c37f(0x477)]='white',_0x424d5e[_0x23c37f(0x7af)](_0x23c37f(0xd93))[_0x23c37f(0xb85)](_0x5bc60a=>{const _0x3141a8=_0x23c37f;_0x5bc60a[_0x3141a8(0x329)][_0x3141a8(0x721)]=_0x3141a8(0x158);});else{const _0x58706a=parseInt(_0x119159[0x1],0xa),_0x4e2f96=parseInt(_0x119159[0x2],0xa),_0x13a387=parseInt(_0x119159[0x3],0xa)*(_0x119159[0x3][_0x23c37f(0x1e2)]===0x2?0xa:0x1),_0x449834=_0x58706a*0x3c+_0x4e2f96+_0x13a387/0x3e8,_0xe9d985=_0x4f4200[_0x23c37f(0xbe2)](_0x5dbc59,'')[_0x23c37f(0xcd2)]();_0xe9d985&&(_0x23c37f(0xdd5)!==_0x23c37f(0x995)?_0x56fe84[_0x23c37f(0xb66)]({'time':_0x449834,'text':_0xe9d985}):(delete _0x22d42c[_0x23c37f(0x92c)],_0x110264(),_0x4e0386(_0x41853c['id'],_0x23c37f(0xcd5)),_0x350232(_0x23c37f(0xdce)),_0x208f21(!![])));}}}}return _0x56fe84;}function _0x314c72(_0x3d90fc){const _0x4f17ac=_0x8dde82;if('YhOuD'===_0x4f17ac(0xb05)){_0x311840=_0x33c978(_0x3d90fc[_0x4f17ac(0x901)]),_0x2ff7f9[_0x4f17ac(0xa73)]='';if(_0x311840['length']===0x0){_0x2ff7f9[_0x4f17ac(0xa73)]=_0x4f17ac(0x4a9);return;}_0x311840[_0x4f17ac(0xb85)]((_0x27e031,_0x2212d4)=>{const _0x3f2d84=_0x4f17ac,_0x4116dc=document[_0x3f2d84(0x8f1)]('p');_0x4116dc['textContent']=_0x27e031[_0x3f2d84(0x7ee)],_0x4116dc['id']=_0x3f2d84(0x175)+_0x2212d4,_0x2ff7f9[_0x3f2d84(0x5b8)](_0x4116dc);});}else _0x18b5be+=_0x14e8dc['choices'][0x0][_0x4f17ac(0x8e3)][_0x4f17ac(0xee)]||'';}function _0x34eaa6(_0xd7fd89,_0xa1d649,_0x282c23,_0xa1f65a){const _0x9041b4=_0x8dde82,_0x161e79=(_0xa1f65a-0x5a)*Math['PI']/0xb4;return{'x':_0xd7fd89+_0x282c23*Math[_0x9041b4(0xb16)](_0x161e79),'y':_0xa1d649+_0x282c23*Math[_0x9041b4(0x386)](_0x161e79)};}function _0x3ef491(_0xc6cc3){const _0x380ac9=_0x8dde82;if(_0x380ac9(0x2bf)!=='TVMtV')_0x492772(_0x380ac9(0x697)+_0x1e1b92[_0x380ac9(0x8ac)]);else{const _0x381629=_0x380ac9(0x6e0),_0x528d59=document[_0x380ac9(0x364)](_0x381629,_0x380ac9(0x250)),_0x4f7249=0xfa,_0x4d9797=_0x4f7249/0x2,_0xcbff2f=_0x4f7249/0x2,_0xcf88a1=_0x4f7249/0x2-0x14;_0x528d59[_0x380ac9(0xa66)](_0x380ac9(0x429),_0x380ac9(0x263)),_0x528d59[_0x380ac9(0xa66)](_0x380ac9(0x7e6),_0x380ac9(0x263)),_0x528d59[_0x380ac9(0xa66)](_0x380ac9(0x371),_0x380ac9(0xbd3)+_0x4f7249+'\x20'+_0x4f7249);const _0x5d95b4=Object[_0x380ac9(0x100)](_0xc6cc3)[_0x380ac9(0x421)]((_0x4bcfda,_0x3a17a4)=>_0x4bcfda+_0x3a17a4,0x0);if(_0x5d95b4===0x0)return _0x528d59;let _0x5443de=-0x5a;const _0x3f091e=[_0x380ac9(0xbca),_0x380ac9(0x18d),_0x380ac9(0x29f),_0x380ac9(0x3f4),_0x380ac9(0x1c3),_0x380ac9(0x27b),_0x380ac9(0x55f),_0x380ac9(0xdf0)];let _0x292f39=0x0;for(const _0x15923c in _0xc6cc3){if(_0x380ac9(0x59c)!==_0x380ac9(0x59c)){const _0x182149=_0x576dea[_0x380ac9(0x8f1)](_0x380ac9(0xce2));_0x182149[_0x380ac9(0x213)]='expense-item',_0x182149[_0x380ac9(0x329)][_0x380ac9(0x94a)]='column',_0x182149[_0x380ac9(0x329)][_0x380ac9(0x7cf)]='stretch',_0x182149[_0x380ac9(0x329)][_0x380ac9(0xe23)]=_0x380ac9(0x547),_0x182149[_0x380ac9(0x329)][_0x380ac9(0x22b)]='0';const _0x50b93f=_0xfd108f[_0x3cfc9b[_0x380ac9(0x935)]]||_0x49f0e2['默认'],_0x23aa50='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>'+_0x50b93f+_0x380ac9(0x5e4),_0x2fd977='<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>'+_0x23aa50+_0x380ac9(0x411)+_0x189558[_0x380ac9(0xc84)]+_0x380ac9(0x1b7)+(_0x2b553e[_0x380ac9(0x935)]||_0x380ac9(0x850))+'</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20'+(_0x4010bd[_0x380ac9(0x3c5)]||0x0)[_0x380ac9(0x491)](0x2)+_0x380ac9(0x83a);let _0x3fb54e='';if(_0x37a88f[_0x380ac9(0x3c3)]&&_0x5a807c[_0x380ac9(0x3c3)][_0x380ac9(0xe9)]){const _0x49502a=_0x12254e(_0x13a394[_0x380ac9(0x3c3)][_0x380ac9(0xe9)]);_0x49502a&&(_0x3fb54e=_0x380ac9(0xab4)+_0x49502a[_0x380ac9(0x584)]+_0x380ac9(0xbe3)+_0x49502a['name']+_0x380ac9(0xf08)+_0x129554[_0x380ac9(0x3c3)][_0x380ac9(0x7ee)]+'</div></div></div>');}_0x182149[_0x380ac9(0xa73)]=_0x2fd977+_0x3fb54e,_0x593573[_0x380ac9(0x5b8)](_0x182149);}else{const _0x4a18f5=_0xc6cc3[_0x15923c];if(_0x4a18f5<=0x0)continue;const _0x7d53f=_0x4a18f5/_0x5d95b4*0x168,_0x1cc478=_0x5443de+_0x7d53f,_0x4cbb47=_0x34eaa6(_0x4d9797,_0xcbff2f,_0xcf88a1,_0x1cc478),_0x12934b=_0x34eaa6(_0x4d9797,_0xcbff2f,_0xcf88a1,_0x5443de),_0x59dcbc=_0x7d53f>0xb4?'1':'0',_0x1f0669=['M',_0x4cbb47['x'],_0x4cbb47['y'],'A',_0xcf88a1,_0xcf88a1,0x0,_0x59dcbc,0x1,_0x12934b['x'],_0x12934b['y'],'L',_0x4d9797,_0xcbff2f,'Z'][_0x380ac9(0xd9a)]('\x20'),_0x28ccfa=document[_0x380ac9(0x364)](_0x381629,_0x380ac9(0x90f));_0x28ccfa[_0x380ac9(0xa66)]('d',_0x1f0669),_0x28ccfa['setAttribute'](_0x380ac9(0x86e),_0x3f091e[_0x292f39%_0x3f091e[_0x380ac9(0x1e2)]]),_0x292f39++;const _0x381e33=document['createElementNS'](_0x381629,_0x380ac9(0x13b));_0x381e33[_0x380ac9(0x101)]=_0x15923c+':\x20'+_0x4a18f5[_0x380ac9(0x491)](0x2)+'\x20('+(_0x4a18f5/_0x5d95b4*0x64)[_0x380ac9(0x491)](0x1)+'%)',_0x28ccfa[_0x380ac9(0x5b8)](_0x381e33),_0x528d59['appendChild'](_0x28ccfa),_0x5443de=_0x1cc478;}}return _0x528d59;}}function _0x14e6fb(){const _0xf449a7=_0x8dde82;if(_0xf449a7(0x9f8)!==_0xf449a7(0xf04)){if(_0x311840['length']===0x0)return;const _0x35f01d=_0x3242a5[_0xf449a7(0x908)];let _0x4a4788=-0x1;for(let _0x5dace2=0x0;_0x5dace2<_0x311840[_0xf449a7(0x1e2)];_0x5dace2++){if(_0x35f01d>=_0x311840[_0x5dace2][_0xf449a7(0x95f)])_0xf449a7(0x7c8)===_0xf449a7(0x7c8)?_0x4a4788=_0x5dace2:_0x2acc60['push'](_0x42d9d8);else break;}if(_0x4a4788!==-0x1){if('mTijD'!=='mTijD'){const _0x2a2284=_0x398ff2[_0xf449a7(0x3c6)]['find'](_0x3839a0=>_0x3839a0['name']===_0xfc8123['name']);!_0x2a2284&&_0x11d7d8['worldBookCategories'][_0xf449a7(0xb66)]({'id':_0x30fe51['id']||_0xf449a7(0x3df)+_0x27f370[_0xf449a7(0x4a2)](),'name':_0x542b8c[_0xf449a7(0xb95)]});}else{const _0x25aec3=_0x2ff7f9[_0xf449a7(0x7af)]('p');_0x25aec3[_0xf449a7(0xb85)](_0x10aa45=>_0x10aa45['classList'][_0xf449a7(0x9ad)](_0xf449a7(0x691)));const _0x3942fa=document[_0xf449a7(0x1d6)](_0xf449a7(0x175)+_0x4a4788);_0x3942fa&&(_0x3942fa[_0xf449a7(0x555)]['add'](_0xf449a7(0x691)),_0x3942fa[_0xf449a7(0x6d0)]({'behavior':_0xf449a7(0x8fa),'block':'center'}));}}}else{if(!_0x1c8e54[_0xf449a7(0x67f)])return;const {charId:_0x1e7b82}=_0x33373d[_0xf449a7(0x67f)],_0xd6702b=_0x36de9e(_0x1e7b82);if(!_0xd6702b)return;const _0x36f06e=_0x1bee3b[_0xf449a7(0x1d6)]('profile-view-modal'),_0x3dfb55=_0x39c650[_0xf449a7(0x1d6)](_0xf449a7(0xed1));_0x3dfb55[_0xf449a7(0x101)]=_0xf449a7(0x112)+_0xd6702b['name']+_0xf449a7(0xf0a),_0xe69506[_0xf449a7(0x1d6)](_0xf449a7(0x58c))[_0xf449a7(0xee2)]=_0xf449a7(0x18f),_0x555dc1[_0xf449a7(0x1d6)](_0xf449a7(0x951))[_0xf449a7(0x329)][_0xf449a7(0xc66)]=_0xf449a7(0x338),_0x1291f7[_0xf449a7(0x1d6)](_0xf449a7(0xeb2))[_0xf449a7(0x329)][_0xf449a7(0xc66)]=_0xf449a7(0xe12),_0x3f9a5c[_0xf449a7(0x1d6)](_0xf449a7(0x40f))[_0xf449a7(0x329)][_0xf449a7(0xc66)]=_0xf449a7(0x338),_0x3c9df8[_0xf449a7(0x1d6)](_0xf449a7(0x4ef))[_0xf449a7(0x329)]['display']='none',_0x36f06e[_0xf449a7(0x555)]['add'](_0xf449a7(0x36e)),_0x39db9d();}}_0x5aa790[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x1d144a=_0x8dde82;'Ftrjy'===_0x1d144a(0x7ff)?(_0xfa6bbe(_0x1d144a(0xa77),'groupChatCreate'),_0x2156eb(![])):(_0xfcf32c['classList']['remove'](_0x1d144a(0x36e)),setTimeout(()=>_0xfcf32c[_0x1d144a(0x329)][_0x1d144a(0xc66)]=_0x1d144a(0x338),0x12c));}),document[_0x8dde82(0x1d6)](_0x8dde82(0x289))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x2ede0d=_0x8dde82,_0x3b3fac=_0x1d801f();if(!_0x3b3fac||!_0x3b3fac[_0x2ede0d(0x74a)])return;_0x2c7a4f();}),document['getElementById'](_0x8dde82(0x108))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x5627c1=_0x8dde82;_0x5627c1(0x8f3)!==_0x5627c1(0x7ea)?_0x584b6c():_0x3c1991['error'](_0x5627c1(0x979),_0x92b05e);}),document[_0x8dde82(0x1d6)]('music-widget-card')[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x50c8b4=_0x8dde82;_0xdfbfac['listenTogetherSession']&&_0xdfbfac[_0x50c8b4(0x317)][_0x50c8b4(0x976)]&&('KcTgd'!=='cPLyY'?(_0xfcf32c[_0x50c8b4(0x329)]['display']=_0x50c8b4(0xe12),setTimeout(()=>_0xfcf32c['classList']['add'](_0x50c8b4(0x36e)),0xa)):(_0x4c1edf[_0x50c8b4(0x555)]['remove'](_0x50c8b4(0x691)),_0x42024d[_0x50c8b4(0x555)]['add'](_0x50c8b4(0x691)),_0x9fdd20()));}),_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0xdb7),_0x14e6fb);const _0x3239ef=document['getElementById'](_0x8dde82(0x589)),_0x159a28=document[_0x8dde82(0x1d6)](_0x8dde82(0x582)),_0x1c459d=document[_0x8dde82(0x1d6)](_0x8dde82(0x1b4));_0x3239ef[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x4d0c1d=_0x8dde82;if(_0x3242a5[_0x4d0c1d(0xcab)]){if(_0x3242a5[_0x4d0c1d(0xc2a)])_0x3242a5[_0x4d0c1d(0xe7f)]();else{if('yMUKG'==='yMUKG')_0x3242a5[_0x4d0c1d(0x57a)]();else{_0x329098[_0x4d0c1d(0x555)][_0x4d0c1d(0x5be)](_0x4d0c1d(0xd8f));const _0x10a733=_0x1930f2[_0x4d0c1d(0xb6c)](_0x4d0c1d(0xaa5));_0x8d87b6[_0x4d0c1d(0x555)]['toggle'](_0x4d0c1d(0x691),!!_0x10a733);}}}}),_0x159a28[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x1e77c1=_0x8dde82;if(_0x1e77c1(0x76a)===_0x1e77c1(0x76a)){if(_0x34a7ad[_0x1e77c1(0x1e2)]===0x0)return;_0x499097=(_0x499097+0x1)%_0x34a7ad[_0x1e77c1(0x1e2)],_0x62eb15(_0x34a7ad[_0x499097],_0x34a7ad);}else{_0x7397f9[_0x1e77c1(0x7ec)](_0x1e77c1(0x492)+_0x1bf4bd+_0x1e77c1(0xda9));return;}}),_0x1c459d[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x5d6b99=_0x8dde82;if(_0x34a7ad['length']===0x0)return;_0x499097=(_0x499097-0x1+_0x34a7ad['length'])%_0x34a7ad[_0x5d6b99(0x1e2)],_0x62eb15(_0x34a7ad[_0x499097],_0x34a7ad);}),_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0xe7f),()=>{const _0x5c1d07=_0x8dde82;if(_0x5c1d07(0xeaa)==='hzvgm')_0x3239ef['textContent']='❚❚';else{const _0xa70b54=_0x59d98c(_0xc96e6b['id']);if(!_0xa70b54||!_0xa70b54['id'])return _0x3646cf[_0x5c1d07(0x27f)]('AI\x20试图创建事件，但找不到有效的用户ID。'),null;_0x13dfcd[_0x5c1d07(0x8b2)][_0x5c1d07(0xb66)]({'id':_0x5c1d07(0xadd)+_0x47c872[_0x5c1d07(0x4a2)](),'date':_0x9cd74e['eventDate'],'type':_0xb9bcde[_0x5c1d07(0x60a)],'content':_0x2ba85b[_0x5c1d07(0xa69)],'userId':_0xa70b54['id'],'createdBy':'ai'}),_0x152bdf(),_0x410b61(),_0x5c3114();const _0x19dbb3=_0x26d862(_0x10a23e['id']);_0x19dbb3&&_0x19f1d8[_0x5c1d07(0x60a)]===_0x5c1d07(0x992)&&_0x1dbb23(_0x5c1d07(0x45c)+_0x19dbb3[_0x5c1d07(0xb95)]+_0x5c1d07(0x666)+_0x28af97['eventContent']);return{'role':_0x5c1d07(0xefe),'senderId':_0x2cf3fb['id'],'timestamp':_0x6feaf0[_0x5c1d07(0x4a2)](),'isOffline':_0x1b303c,'content':null};return{'role':_0x5c1d07(0xefe),'senderId':_0x91fb98['id'],'timestamp':_0x5d3a93[_0x5c1d07(0x4a2)](),'isOffline':_0x44e963,'content':null};}}),_0x3242a5[_0x8dde82(0x3a0)]('pause',()=>{_0x3239ef['textContent']='▶';}),_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0xcc8),()=>{const _0x468b28=_0x8dde82;if(_0x468b28(0xbe6)!==_0x468b28(0xbe6)){const _0x188621=_0x31663a[_0x468b28(0xee2)][_0x468b28(0xcd2)](),_0x11c2e4=_0x5291f7[_0x468b28(0xee2)][_0x468b28(0xcd2)]();if(!_0x188621||!_0x11c2e4){_0x4d3af1(_0x468b28(0x706));return;}_0x301404(),_0x15e057(_0x188621,_0x11c2e4);}else _0x159a28[_0x468b28(0x288)]();}),_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0xe7f),()=>{const _0x4e30e2=_0x8dde82,_0x15692f=document[_0x4e30e2(0x1d6)](_0x4e30e2(0x445));if(_0x15692f)_0x15692f[_0x4e30e2(0x101)]='❚❚';}),_0x3242a5['addEventListener'](_0x8dde82(0x57a),()=>{const _0x299a77=_0x8dde82,_0xcb5e6=document['getElementById'](_0x299a77(0x445));if(_0xcb5e6)_0xcb5e6[_0x299a77(0x101)]='▶';}),_0x3242a5['addEventListener'](_0x8dde82(0xcc8),()=>{const _0x36f9b3=document['getElementById']('global-player-next-btn');_0x36f9b3&&_0x36f9b3['click']();});function _0x76362(_0x223530){const _0x137adc=_0x8dde82;if(!_0x223530||typeof _0x223530!==_0x137adc(0x193))return null;const _0x45c182=_0x223530['indexOf']('['),_0x15dd8b=_0x223530['lastIndexOf'](']');if(_0x45c182>-0x1&&_0x15dd8b>_0x45c182){if(_0x137adc(0xac7)!==_0x137adc(0xac7))_0x1057b4[_0x137adc(0x27f)](_0x137adc(0x36a)+_0x4de261['id']+_0x137adc(0x436),_0x443305);else return _0x223530[_0x137adc(0x3b1)](_0x45c182,_0x15dd8b+0x1);}return null;}document['getElementById'](_0x8dde82(0xce8))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x20d06a=_0x8dde82;_0x1637b9(),_0x137a40(_0x20d06a(0x776),_0x20d06a(0x410));}),document['getElementById'](_0x8dde82(0x502))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0x410),_0x8dde82(0x776)));const _0x1e3188=document[_0x8dde82(0x1d6)](_0x8dde82(0x652)),_0x28c071=document[_0x8dde82(0x1d6)](_0x8dde82(0x3e2));_0x1e3188[_0x8dde82(0x3a0)](_0x8dde82(0x288),_0x1637b9),_0x28c071[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x4a8ddb=_0x8dde82;_0x1e3188[_0x4a8ddb(0x555)]['remove'](_0x4a8ddb(0x691)),_0x28c071[_0x4a8ddb(0x555)][_0x4a8ddb(0x1cd)](_0x4a8ddb(0x691)),_0x3b2c5f();});function _0x1637b9(){const _0x2c738e=_0x8dde82;_0x2c738e(0x320)==='IfGYn'?(_0x28c071[_0x2c738e(0x555)][_0x2c738e(0x9ad)](_0x2c738e(0x691)),_0x1e3188[_0x2c738e(0x555)][_0x2c738e(0x1cd)](_0x2c738e(0x691)),_0x458b82()):_0x414ffc[_0x2c738e(0x67f)]?_0x211ce6():_0x400622['classList'][_0x2c738e(0x9ad)]('show');}function _0x458b82(){const _0x5e5951=_0x8dde82,_0x1b1ed8=document[_0x5e5951(0x1d6)](_0x5e5951(0xac0));document[_0x5e5951(0x1d6)](_0x5e5951(0x4e8))[_0x5e5951(0x101)]=_0x5e5951(0xda8),document[_0x5e5951(0x1d6)](_0x5e5951(0x3d5))[_0x5e5951(0xa73)]='',_0x1b1ed8[_0x5e5951(0xa73)]=_0x5e5951(0x4c6),_0x5e6d49(),document[_0x5e5951(0x1d6)](_0x5e5951(0x727))[_0x5e5951(0x3a0)](_0x5e5951(0x288),_0x22862f),document[_0x5e5951(0x1d6)](_0x5e5951(0x7de))[_0x5e5951(0x3a0)]('click',_0x517578=>{const _0x2a493f=_0x5e5951;if(_0x517578[_0x2a493f(0x272)]['classList'][_0x2a493f(0xcbc)](_0x2a493f(0x9df))){if('fGXct'==='fGXct'){const _0x34cda1=_0x517578[_0x2a493f(0x272)][_0x2a493f(0x63f)]['id'];_0x13215d(_0x2a493f(0x919))[_0x2a493f(0x94f)](_0x22578d=>{_0x22578d&&_0x4e2db7(_0x34cda1);});}else _0x52115e={'characterId':_0x4a520e,'entries':[]},_0x4b8cad[_0x2a493f(0x26a)][_0x2a493f(0xb66)](_0x25e268);}}),document[_0x5e5951(0x1d6)](_0x5e5951(0xe4e))['focus']();}function _0x34df95(_0x7218ae,_0x2d0e59){const _0x58d438=_0x8dde82,_0x33c04d=document[_0x58d438(0x1d6)]('accounting-content-area'),_0x45e21c=document[_0x58d438(0x1d6)](_0x58d438(0x3d5));document[_0x58d438(0x1d6)]('accounting-title')[_0x58d438(0x101)]=_0x2d0e59+_0x58d438(0x34c);const _0xe65df0=_0x7218ae[_0x58d438(0x8ef)][_0x58d438(0x421)]((_0x2ad72a,_0x4112b6)=>_0x2ad72a+(_0x4112b6[_0x58d438(0x3c5)]||0x0),0x0);let _0x166a0a='<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>'+_0xe65df0[_0x58d438(0x491)](0x2)+_0x58d438(0xb68);_0x33c04d['innerHTML']=_0x166a0a;const _0x5ce9eb=document[_0x58d438(0x1d6)](_0x58d438(0xbdd)),_0x59a750={'餐饮美食':_0x58d438(0x41a),'交通出行':_0x58d438(0xe68),'购物消费':'<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','生活服务':'<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>','休闲娱乐':_0x58d438(0x224),'医疗健康':_0x58d438(0x55c),'人情红包':_0x58d438(0x61d),'其他杂项':_0x58d438(0xd0f),'默认':_0x58d438(0x9e1)};_0x7218ae[_0x58d438(0x8ef)][_0x58d438(0xb85)](_0x5dd5ef=>{const _0x413b57=_0x58d438;if(_0x413b57(0xa3b)!=='ZtWWq'){const _0x1d4b58=document[_0x413b57(0x8f1)](_0x413b57(0xce2));_0x1d4b58[_0x413b57(0x213)]=_0x413b57(0xb0c),_0x1d4b58['style'][_0x413b57(0x94a)]=_0x413b57(0xe90),_0x1d4b58[_0x413b57(0x329)][_0x413b57(0x7cf)]=_0x413b57(0x336),_0x1d4b58[_0x413b57(0x329)][_0x413b57(0xe23)]=_0x413b57(0x547),_0x1d4b58[_0x413b57(0x329)][_0x413b57(0x22b)]='0';const _0x2a3401=_0x59a750[_0x5dd5ef[_0x413b57(0x935)]]||_0x59a750['默认'],_0x51febb=_0x413b57(0x444)+_0x2a3401+_0x413b57(0x5e4),_0x1e860b=_0x413b57(0x249)+_0x51febb+_0x413b57(0x411)+_0x5dd5ef[_0x413b57(0xc84)]+_0x413b57(0x1b7)+(_0x5dd5ef[_0x413b57(0x935)]||'未分类')+_0x413b57(0xd6d)+(_0x5dd5ef['amount']||0x0)[_0x413b57(0x491)](0x2)+'</span></div>';let _0x1b9f98='';if(_0x5dd5ef[_0x413b57(0x3c3)]&&_0x5dd5ef['review']['charId']){const _0x12932f=_0x5844c7(_0x5dd5ef[_0x413b57(0x3c3)]['charId']);if(_0x12932f){if(_0x413b57(0x14b)===_0x413b57(0x84e)){if(_0x3ae4be<0x0||_0x2459a2>=_0x2de5bd)return;_0x4b7ee4['style'][_0x413b57(0x71d)]=_0x413b57(0x4c4)+_0xf750c*(0x64/_0x3aa1e3)+'%)',_0x382445[_0x413b57(0xb85)](_0x14f26a=>_0x14f26a[_0x413b57(0x555)][_0x413b57(0x9ad)](_0x413b57(0x691))),_0x513018[_0xc21703][_0x413b57(0x555)][_0x413b57(0x1cd)](_0x413b57(0x691)),_0x273851=_0x19b4d0;}else _0x1b9f98='<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22'+_0x12932f[_0x413b57(0x584)]+_0x413b57(0xbe3)+_0x12932f[_0x413b57(0xb95)]+'</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>'+_0x5dd5ef[_0x413b57(0x3c3)][_0x413b57(0x7ee)]+_0x413b57(0x2d4);}}_0x1d4b58[_0x413b57(0xa73)]=_0x1e860b+_0x1b9f98,_0x5ce9eb[_0x413b57(0x5b8)](_0x1d4b58);}else _0x21826c['style'][_0x413b57(0x5b7)]='url(\x27'+_0x2f8dc2['createObjectURL'](_0x5df6a6)+'\x27)';}),_0x45e21c[_0x58d438(0xa73)]='<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>',document['getElementById'](_0x58d438(0x519))[_0x58d438(0x3a0)](_0x58d438(0x288),async()=>{const _0x319864=_0x58d438;if(_0x319864(0x3d6)!==_0x319864(0x3d6))return[];else{const _0x2e2598=await _0x13215d(_0x319864(0x5d2));if(_0x2e2598){const _0x415e05=_0xdfbfac[_0x319864(0xef6)][_0x2d0e59];_0x415e05&&_0x415e05['originalExpenses']&&_0xdfbfac[_0x319864(0x683)][_0x319864(0xb66)](..._0x415e05['originalExpenses']),delete _0xdfbfac['accountingLedger'][_0x2d0e59],_0x31622b(),_0x458b82();}}});}function _0x3b2c5f(){const _0x5742e7=_0x8dde82,_0x4270f0=document[_0x5742e7(0x1d6)]('accounting-content-area');document[_0x5742e7(0x1d6)](_0x5742e7(0x4e8))[_0x5742e7(0x101)]='账本',document[_0x5742e7(0x1d6)](_0x5742e7(0x3d5))[_0x5742e7(0xa73)]='';const _0x3444df=Object[_0x5742e7(0x83d)](_0xdfbfac['accountingLedger'])[_0x5742e7(0x6d9)]((_0x41e4ac,_0x5bf320)=>new Date(_0x5bf320)-new Date(_0x41e4ac));let _0x420889=_0x5742e7(0x58a);_0x3444df['length']===0x0?_0x5742e7(0x9d3)==='vaEfv'?_0x5f5b01[_0x5742e7(0x27f)](_0x5742e7(0xe9e),_0x2a9849):_0x420889+=_0x5742e7(0x978):_0x3444df[_0x5742e7(0xb85)](_0x1ab413=>{const _0x1ddae4=_0x5742e7,_0x50ae23=_0xdfbfac[_0x1ddae4(0xef6)][_0x1ab413],_0x1cb89c=_0x50ae23[_0x1ddae4(0x8ef)][_0x1ddae4(0x421)]((_0x1aae6a,_0x5560ef)=>_0x1aae6a+(_0x5560ef[_0x1ddae4(0x3c5)]||0x0),0x0);_0x420889+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22'+_0x1ab413+_0x1ddae4(0x1b9)+_0x1ab413+_0x1ddae4(0x17e)+_0x1cb89c['toFixed'](0x2)+_0x1ddae4(0xe77);}),_0x4270f0['innerHTML']=_0x420889,document['getElementById'](_0x5742e7(0xaeb))[_0x5742e7(0x3a0)](_0x5742e7(0x288),_0x11efa8),document[_0x5742e7(0x1d6)]('import-accounting-btn')['addEventListener']('click',()=>{const _0x1bebde=_0x5742e7;if('okYbH'===_0x1bebde(0x2be))return new _0x3101fd(_0x2bb4e8=>{const _0x310420=_0x1bebde,_0x201932=_0x1005b3[_0x310420(0x1d6)](_0x310420(0x98d)),_0x503a3a=_0x52d28b[_0x310420(0x1d6)](_0x310420(0x86d)),_0x459584=_0x5d17a9[_0x310420(0x1d6)]('modal-ok'),_0x5cc3ac=_0x391c98[_0x310420(0x1d6)](_0x310420(0xbb8)),_0x3053dd=_0x460e4b[_0x310420(0x1d6)](_0x310420(0x9af));_0x503a3a[_0x310420(0x101)]=_0x8f769c,_0x201932[_0x310420(0x329)][_0x310420(0xc66)]='flex';const _0x2a3e8d=_0x5c51c=>{const _0xd05584=_0x310420;_0x201932['style'][_0xd05584(0xc66)]=_0xd05584(0x338),_0x459584['onclick']=_0x5cc3ac[_0xd05584(0x4a1)]=_0x3053dd['onclick']=null,_0x3e24a7[_0xd05584(0x255)](_0xd05584(0xc31),_0xbb6468),_0x2bb4e8(_0x5c51c);},_0xbb6468=_0x551de2=>{const _0x5a6caa=_0x310420;if(_0x551de2[_0x5a6caa(0xb84)]===_0x5a6caa(0x309))_0x2a3e8d(![]);if(_0x551de2['key']===_0x5a6caa(0x2ac))_0x2a3e8d(!![]);};_0x459584[_0x310420(0x4a1)]=()=>_0x2a3e8d(!![]),_0x5cc3ac[_0x310420(0x4a1)]=()=>_0x2a3e8d(![]),_0x3053dd[_0x310420(0x4a1)]=()=>_0x2a3e8d(![]),_0x475da7[_0x310420(0x3a0)](_0x310420(0xc31),_0xbb6468);});else document['getElementById'](_0x1bebde(0x904))[_0x1bebde(0x288)]();}),_0x4270f0[_0x5742e7(0x7af)](_0x5742e7(0x8d4))[_0x5742e7(0xb85)](_0x563a4e=>{const _0x288093=_0x5742e7;_0x563a4e[_0x288093(0x3a0)](_0x288093(0x288),_0x2a7803=>{const _0x43f9b5=_0x288093,_0xd98e3d=_0x2a7803[_0x43f9b5(0xaa9)][_0x43f9b5(0x63f)]['date'],_0x157f81=_0xdfbfac[_0x43f9b5(0xef6)][_0xd98e3d];_0x157f81&&_0x34df95(_0x157f81,_0xd98e3d);});});}function _0x22862f(){const _0x30b64d=_0x8dde82;if(_0x30b64d(0x147)!==_0x30b64d(0xba0)){const _0xc9e130=document[_0x30b64d(0x1d6)]('expense-description'),_0xf633ea=document['getElementById'](_0x30b64d(0xd16)),_0x50aaec=_0xc9e130[_0x30b64d(0xee2)][_0x30b64d(0xcd2)](),_0x1aae9e=parseFloat(_0xf633ea['value']);if(!_0x50aaec||isNaN(_0x1aae9e)||_0x1aae9e<=0x0){if(_0x30b64d(0x260)===_0x30b64d(0x260)){_0x21d6ce(_0x30b64d(0x1cc));return;}else _0x117e22[_0x30b64d(0xc7a)](),_0x100c93();}_0xdfbfac[_0x30b64d(0x683)][_0x30b64d(0xb66)]({'id':'exp_'+Date[_0x30b64d(0x4a2)](),'description':_0x50aaec,'amount':_0x1aae9e,'timestamp':Date[_0x30b64d(0x4a2)]()}),_0x31622b(),_0x5e6d49(),_0xc9e130[_0x30b64d(0xee2)]='',_0xf633ea['value']='',_0xc9e130[_0x30b64d(0xc10)]();}else _0x50cc88(_0x27d251['id']),_0x378557(_0x30b64d(0x67a)),_0xa198a4(_0x30b64d(0xa77)),_0x285a78(![]);}function _0x4e2db7(_0x52b53c){const _0x8d9f2b=_0x8dde82;if('GhOOY'===_0x8d9f2b(0xbd5)){const _0x173bfa=_0xdfbfac[_0x8d9f2b(0x683)][_0x8d9f2b(0xd30)](_0x577b5c=>_0x577b5c['id']===_0x52b53c);_0x173bfa>-0x1&&(_0x8d9f2b(0xee5)===_0x8d9f2b(0xee5)?(_0xdfbfac[_0x8d9f2b(0x683)][_0x8d9f2b(0x22f)](_0x173bfa,0x1),_0x31622b(),_0x5e6d49()):(_0x371c6c[_0x8d9f2b(0x329)][_0x8d9f2b(0x990)]=0x0,_0x39e67a(()=>{const _0xf9b5c3=_0x8d9f2b;_0x24c6fd[_0xf9b5c3(0xcab)]=_0x3dcd53[_0xf9b5c3(0x21c)](_0x393171),_0x3f01f9[_0xf9b5c3(0x329)]['opacity']=0x1;},0x96)));}else{const _0x313761=_0x3ab3f2['getElementById'](_0x8d9f2b(0x50f));_0x313761[_0x8d9f2b(0xa73)]='';if(_0x39dc51['userProfiles'][_0x8d9f2b(0x1e2)]===0x0){_0x313761[_0x8d9f2b(0xa73)]=_0x8d9f2b(0x48f);return;}_0x300681[_0x8d9f2b(0xc37)][_0x8d9f2b(0xb85)](_0x172442=>{const _0x136bb2=_0x8d9f2b,_0x2f6a7f=_0x13ada1[_0x136bb2(0x8f1)](_0x136bb2(0xce2));_0x2f6a7f[_0x136bb2(0x213)]=_0x136bb2(0xe55),_0x2f6a7f[_0x136bb2(0x63f)]['id']=_0x172442['id'];const _0x2c1fda=_0x172442['id']===_0x1e0c7a[_0x136bb2(0xb83)]?_0x136bb2(0xd68):'';_0x2f6a7f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x172442['avatar']||_0x52f854)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x172442[_0x136bb2(0xb95)]+_0x2c1fda+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x172442[_0x136bb2(0x79b)][_0x136bb2(0x3b1)](0x0,0x64)+_0x136bb2(0xb5b),_0x2f6a7f[_0x136bb2(0x3a0)]('click',()=>_0x230ab5(_0x172442['id'])),_0x313761[_0x136bb2(0x5b8)](_0x2f6a7f);});}}function _0x5e6d49(){const _0x430164=_0x8dde82,_0x3e0bf5=document[_0x430164(0x1d6)](_0x430164(0x7de)),_0x20b398=document[_0x430164(0x1d6)]('organize-button-container'),_0x538391=new Date(),_0x574796=_0xdfbfac['accountingData'][_0x430164(0xeb3)](_0x5a4982=>new Date(_0x5a4982[_0x430164(0x10c)])[_0x430164(0x9d1)]()===_0x538391['toDateString']());if(_0x574796[_0x430164(0x1e2)]===0x0){_0x3e0bf5[_0x430164(0xa73)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0x20b398['innerHTML']='';return;}_0x3e0bf5[_0x430164(0xa73)]='',_0x574796['sort']((_0x85c83,_0x1c401b)=>_0x1c401b[_0x430164(0x10c)]-_0x85c83[_0x430164(0x10c)])['forEach'](_0x454f9c=>{const _0x54f03e=_0x430164;if(_0x54f03e(0x8d9)===_0x54f03e(0x910))_0xc9f480[_0x54f03e(0x27f)](_0x54f03e(0x9b9)+_0x2985a3,_0x5cfd57);else{const _0x177a4c=document[_0x54f03e(0x8f1)](_0x54f03e(0xce2));_0x177a4c['className']=_0x54f03e(0xb0c),_0x177a4c['innerHTML']='<span\x20class=\x22description\x22>'+_0x454f9c[_0x54f03e(0xc84)]+_0x54f03e(0xed9)+_0x454f9c['amount'][_0x54f03e(0x491)](0x2)+'</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22'+_0x454f9c['id']+_0x54f03e(0x394),_0x3e0bf5[_0x54f03e(0x5b8)](_0x177a4c);}}),_0x20b398&&(_0x20b398[_0x430164(0xa73)]=_0x430164(0xab5),document[_0x430164(0x1d6)](_0x430164(0xc9a))[_0x430164(0x3a0)](_0x430164(0x288),_0x44c4a1));}async function _0x44c4a1(){const _0x3cdabf=_0x8dde82,_0x1cd4b4=new Date(),_0x3af55d=_0x1cd4b4['getFullYear']()+'-'+String(_0x1cd4b4[_0x3cdabf(0xb0a)]()+0x1)[_0x3cdabf(0x4b9)](0x2,'0')+'-'+String(_0x1cd4b4[_0x3cdabf(0x55b)]())[_0x3cdabf(0x4b9)](0x2,'0');if(_0xdfbfac['accountingLedger'][_0x3af55d]){if(_0x3cdabf(0xeea)===_0x3cdabf(0x15a)){const _0x1d7807=_0x4e8fa7[_0x3cdabf(0x272)][_0x3cdabf(0x6d4)][0x0];if(!_0x1d7807)return;const _0x1917ed=_0x4dd04d[_0x3cdabf(0x21c)](_0x1d7807);_0x100461['src']=_0x1917ed,_0x3f2a02[_0x3cdabf(0x787)]=()=>{const _0x25b6fe=_0x3cdabf;_0x563368[_0x25b6fe(0x953)](_0x1917ed);};}else{_0x21d6ce(_0x3cdabf(0x3a5));return;}}const _0x309e79=_0xdfbfac[_0x3cdabf(0x683)][_0x3cdabf(0xeb3)](_0x131e6d=>new Date(_0x131e6d['timestamp'])['toDateString']()===_0x1cd4b4[_0x3cdabf(0x9d1)]());if(_0x309e79[_0x3cdabf(0x1e2)]===0x0){if(_0x3cdabf(0x1d2)!==_0x3cdabf(0xf14)){_0x21d6ce(_0x3cdabf(0x7fb));return;}else _0x47d90a=![];}_0x1a8bbc(!![],_0x3cdabf(0x279));try{const _0x308e4a=[_0x3cdabf(0xa55),_0x3cdabf(0x952),_0x3cdabf(0x534),'生活服务',_0x3cdabf(0xc80),_0x3cdabf(0x559),'人情红包',_0x3cdabf(0xbde)],_0x41b075=_0x309e79['map'](_0x411a2e=>'-\x20'+_0x411a2e[_0x3cdabf(0xc84)]+':\x20'+_0x411a2e['amount'])[_0x3cdabf(0xd9a)]('\x0a'),_0x5cdbbc=_0xdfbfac['characters']['map'](_0x1c781d=>{const _0x318be7=_0x3cdabf,_0x2aa583=_0xdfbfac[_0x318be7(0xc1b)][_0x318be7(0x76b)](_0xd4ef41=>_0xd4ef41[_0x318be7(0x8c7)]===_0x318be7(0xcef)&&_0xd4ef41['participantIds'][_0x318be7(0xc35)](_0x1c781d['id'])),_0x34fa89=_0xdfbfac['userProfiles'][_0x318be7(0x76b)](_0x2c5a02=>_0x2c5a02['id']===(_0x2aa583?.[_0x318be7(0xacb)]||_0xdfbfac[_0x318be7(0xb83)]))||{'id':_0x318be7(0x7f4),'name':'你'};let _0x45bd6c='';return _0x1c781d['linkedWorldBookIds']&&_0x1c781d[_0x318be7(0x5ee)][_0x318be7(0x1e2)]>0x0&&(_0x318be7(0x3d1)!==_0x318be7(0x3d1)?(_0x169bb8(![]),_0x182bce['error']('导入账本失败:',_0x49a545),_0x362e4f(_0x318be7(0xad6)+_0x3c2b69[_0x318be7(0x8ac)])):_0x45bd6c=_0x1c781d['linkedWorldBookIds'][_0x318be7(0x266)](_0xe11f58=>_0xdfbfac[_0x318be7(0xe7d)]['find'](_0x38f631=>_0x38f631['id']===_0xe11f58))[_0x318be7(0xeb3)](Boolean)['map'](_0x5f18f4=>'\x0a\x20\x20\x20\x20-\x20世界书['+_0x5f18f4['name']+_0x318be7(0x44a)+_0x5f18f4[_0x318be7(0xee)])[_0x318be7(0xd9a)]('')),_0x318be7(0x68a)+_0x1c781d['id']+_0x318be7(0x6d6)+_0x1c781d['name']+'\x0a\x20\x20\x20\x20人设:\x20'+_0x1c781d['persona']+'\x0a\x20\x20\x20\x20绑定用户:\x20'+_0x34fa89[_0x318be7(0xb95)]+_0x318be7(0x42a)+_0x34fa89['id']+')\x0a'+_0x45bd6c;})[_0x3cdabf(0xd9a)]('\x0a'),_0x4da6aa=_0xdfbfac[_0x3cdabf(0xc37)][_0x3cdabf(0x266)](_0x5b1a46=>_0x3cdabf(0x7f0)+_0x5b1a46['id']+_0x3cdabf(0x6d6)+_0x5b1a46['name']+_0x3cdabf(0xc60)+(_0x5b1a46[_0x3cdabf(0x79b)]||'无'))[_0x3cdabf(0xd9a)]('\x0a'),_0x17931a=_0x3cdabf(0xe11),_0x334612=_0x3cdabf(0x204)+_0x308e4a[_0x3cdabf(0xd9a)](',\x20')+_0x3cdabf(0x7f5)+_0x5cdbbc+_0x3cdabf(0xdcb)+_0x4da6aa+'\x0a\x0a#\x20今日消费流水\x0a'+_0x41b075,_0x319bc0=[{'role':'system','content':_0x17931a},{'role':'user','content':_0x334612}],_0x31027b=await _0x2fa074(_0x319bc0,{'json':!![]}),_0x3ea53b=_0x76362(_0x31027b);if(!_0x3ea53b)throw new Error('AI返回的内容里找不到有效的JSON数组。原始回复:\x20'+_0x31027b);const _0x46a579=JSON[_0x3cdabf(0xc44)](_0x3ea53b);_0xdfbfac[_0x3cdabf(0xef6)][_0x3af55d]={'categorizedExpenses':_0x46a579,'timestamp':Date[_0x3cdabf(0x4a2)](),'originalExpenses':_0x309e79},_0xdfbfac['accountingData']=_0xdfbfac['accountingData']['filter'](_0x2aa425=>new Date(_0x2aa425[_0x3cdabf(0x10c)])[_0x3cdabf(0x9d1)]()!==_0x1cd4b4[_0x3cdabf(0x9d1)]()),_0x31622b(),_0x34df95(_0xdfbfac['accountingLedger'][_0x3af55d],_0x3af55d);}catch(_0x161650){_0x3cdabf(0x5aa)===_0x3cdabf(0x5aa)?_0x21d6ce('AI整理失败了，哼:\x20'+_0x161650[_0x3cdabf(0x8ac)]):_0x4b1117(_0x3cdabf(0xa94)+_0x50a0e8['message']);}finally{'TqYVU'==='TqYVU'?_0x1a8bbc(![]):_0xadeeb1();}}async function _0x38c34f(){const _0x50976b=_0x8dde82;_0x331357();if(_0xdfbfac[_0x50976b(0x94d)]&&_0xdfbfac[_0x50976b(0x94d)][_0x50976b(0x1e2)]>0x0){for(const _0x539904 of _0xdfbfac['characters']){await _0x187f1b(_0x539904['id']);}console[_0x50976b(0x7ec)](_0x50976b(0xad4)+_0xdfbfac[_0x50976b(0x94d)][_0x50976b(0x1e2)]+'\x20个角色初始化用户档案系统');}try{if(_0x50976b(0x391)===_0x50976b(0x1bb))_0x335ac2['getElementById']('snoop-app-refresh-btn')['addEventListener'](_0x50976b(0x288),async()=>{_0x12ac7b(_0x3ccd4b,_0xe4a9c0,!![]);});else{let _0x5448d5=await _0x4d3ee8[_0x50976b(0x714)]();console['log'](_0x50976b(0xf3),_0x5448d5[_0x50976b(0xc66)]);_0x5448d5['display']!==_0x50976b(0x6c3)&&(_0x5448d5=await _0x4d3ee8['requestPermissions']());if(_0x5448d5[_0x50976b(0xc66)]!==_0x50976b(0x6c3)){if(_0x50976b(0x758)===_0x50976b(0x758))console[_0x50976b(0xca6)](_0x50976b(0x9e8));else{const _0x19a171=_0xacefe0[_0x50976b(0x3ba)]===_0x50976b(0xa29)?'user':'ai',_0xd95eac=_0x34224f[_0x50976b(0x3ba)]===_0x50976b(0xa29)?_0x28c74f['name']:_0x5253c7(_0x9380ec['author'])[_0x50976b(0xb95)],_0x150bf9=_0xca298c[_0x50976b(0x8f1)]('div');_0x150bf9[_0x50976b(0x213)]='diary-entry\x20'+_0x19a171,_0x150bf9['dataset'][_0x50976b(0x10c)]=_0x19f004[_0x50976b(0x10c)],_0x150bf9[_0x50976b(0x329)][_0x50976b(0x7a5)]=_0x50976b(0x338),_0x150bf9[_0x50976b(0x329)][_0x50976b(0x7eb)]='0',_0x150bf9[_0x50976b(0xa73)]=_0x50976b(0x417)+_0xd95eac+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>'+new _0x2bb76a(_0x1cbb8a[_0x50976b(0x10c)])[_0x50976b(0x985)]('zh-CN')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>'+_0x394b1a[_0x50976b(0xee)][_0x50976b(0xbe2)](/\n/g,_0x50976b(0x109))+_0x50976b(0xe3e),_0x1176c2['appendChild'](_0x150bf9);}}}}catch(_0x49e001){console['error'](_0x50976b(0x275),_0x49e001);}(!_0xdfbfac[_0x50976b(0x3c6)]||_0xdfbfac[_0x50976b(0x3c6)][_0x50976b(0x1e2)]===0x0)&&(_0xdfbfac[_0x50976b(0x3c6)]=[{'id':_0x50976b(0x7f4),'name':_0x50976b(0x39f)}],_0xdfbfac['worldBooks']['forEach'](_0x494fe2=>{const _0x91f015=_0x50976b;'EOBIt'!==_0x91f015(0xa25)?!_0x494fe2[_0x91f015(0x798)]&&(_0x494fe2[_0x91f015(0x798)]=_0x91f015(0x7f4)):(_0x4f6763[_0x91f015(0xa54)](_0x91f015(0x405),_0x3c05f0[_0x91f015(0xea5)](_0x3ca49c)),_0x3af3be(_0x91f015(0x80f)),_0x513c0c(()=>_0x8f7845[_0x91f015(0x28d)](),0x5dc));}));const _0x3f0366=[..._0x4b72c0];try{const _0x57681c=localStorage[_0x50976b(0x443)](_0x50976b(0x405));if(_0x57681c){const _0x50372b=JSON[_0x50976b(0xc44)](_0x57681c);if(Array[_0x50976b(0xca5)](_0x50372b)){if(_0x50976b(0x31d)===_0x50976b(0xa4b)){const _0x2ca11e=_0x49072d['userProfiles'][_0x50976b(0x76b)](_0x127e68=>_0x127e68['id']===_0x1d3723);if(_0x2ca11e)_0x40489e[_0x50976b(0x24a)](_0x2ca11e,_0x16f2fe);}else _0x1e8db1=[..._0x3f0366,..._0x50372b];}else _0x50976b(0xec1)!==_0x50976b(0x240)?_0x1e8db1=_0x3f0366:(_0x2894a9[_0x50976b(0xcd7)]=()=>{const _0x1c9bef=_0x50976b;_0x5b9716[_0x1c9bef(0x7ec)](_0x1c9bef(0xc77)),_0x472915();},_0x38f826[_0x50976b(0x514)]=_0x5f4388=>{const _0x4ac087=_0x50976b;_0x4a88e7[_0x4ac087(0x27f)]('事务失败:',_0x5f4388['target'][_0x4ac087(0x27f)]),_0x4156da(_0x5f4388[_0x4ac087(0x272)][_0x4ac087(0x27f)]);});}else'WBYuM'===_0x50976b(0xdd2)?(_0x168a6c[_0x50976b(0x1d6)](_0x50976b(0x3cd))[_0x50976b(0xee2)]='',_0x42fe05[_0x50976b(0x1d6)](_0x50976b(0x415))['textContent']='新建条目',_0x4d6c12['getElementById'](_0x50976b(0x5bb))['value']='',_0x457441[_0x50976b(0x1d6)]('world-book-edit-content')[_0x50976b(0xee2)]='',_0x3caab3[_0x50976b(0xee2)]=_0x38be96[_0x50976b(0x374)]):_0x1e8db1=_0x3f0366;}catch(_0x41ae60){console[_0x50976b(0x27f)](_0x50976b(0xd53),_0x41ae60),_0x1e8db1=_0x3f0366;}if(!localStorage['getItem'](_0x50976b(0x602))){if('kewUr'!==_0x50976b(0xe01)){const _0x2d4098=_0x28fdd5[_0x50976b(0xbe2)](/```(?:yaml)?/g,'')['trim']();return _0x2d4098;}else{_0x13215d('检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。')['then'](async _0x4e680a=>{const _0x303d6d=_0x50976b;_0x4e680a?(_0x1a8bbc(!![],_0x303d6d(0xd67)),await _0x129cf7(),localStorage[_0x303d6d(0xa54)](_0x303d6d(0x602),_0x303d6d(0x389)),_0x1a8bbc(![]),_0x21d6ce('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'),setTimeout(()=>location['reload'](),0x5dc)):_0x21d6ce(_0x303d6d(0x670));});return;}}if(!localStorage['getItem'](_0x50976b(0x675))){if(_0x50976b(0x751)!==_0x50976b(0xabb)){console[_0x50976b(0x7ec)](_0x50976b(0x60c)),_0x1a8bbc(!![],_0x50976b(0x8ec));const _0x195930=await _0x475368();localStorage['setItem'](_0x50976b(0x675),_0x50976b(0x389)),_0x1a8bbc(![]);if(_0x195930>0x0){if('kkWKD'===_0x50976b(0xef5)){const _0x474edb=_0x2b1966[_0x50976b(0x8f1)]('li');_0x474edb[_0x50976b(0x213)]=_0x50976b(0x33d),_0x474edb[_0x50976b(0xa73)]=_0x50976b(0x5e9)+_0x4fdd5b['id']+_0x50976b(0x957)+_0x2d6b97['id']+_0x50976b(0x31e)+(_0x437b7c[_0x50976b(0x584)]||_0x37ef54)+_0x50976b(0x841)+_0x44f831['id']+_0x50976b(0x59d)+_0x4026a8[_0x50976b(0xb95)]+_0x50976b(0x2ea),_0x469d66[_0x50976b(0x5b8)](_0x474edb);}else{_0x21d6ce('好友圈数据升级完成，迁移了\x20'+_0x195930+_0x50976b(0xc86)),setTimeout(()=>location['reload'](),0x5dc);return;}}}else{let _0x56cc45=_0x238a12[_0x50976b(0x26a)]['find'](_0x1494fb=>_0x1494fb[_0x50976b(0x113)]===_0x43b256);!_0x56cc45&&(_0x56cc45={'characterId':_0x24281e,'entries':[]},_0x554a11[_0x50976b(0x26a)]['push'](_0x56cc45));_0x56cc45[_0x50976b(0xd86)][_0x50976b(0xb66)]({'timestamp':_0x677656[_0x50976b(0x4a2)](),'author':_0x8402c8,'content':_0x2d36ef}),_0x516b7a();const _0x4e1154=_0x56cc45[_0x50976b(0xd86)][_0x50976b(0x1e2)];_0x1ef7f6[_0x50976b(0x110)]=_0x37779a[_0x50976b(0x1fa)](_0x4e1154/0x2)-0x1,_0x37b4bd();}}if(!localStorage['getItem']('noir_migration_fc_v1_complete')){}if(!localStorage[_0x50976b(0x443)](_0x50976b(0xe72))){if(_0x50976b(0x483)==='kVsGx'){console[_0x50976b(0x7ec)](_0x50976b(0x6f6)),_0x1a8bbc(!![],_0x50976b(0x2ed));const _0x1d9c04=await _0x473b56();localStorage[_0x50976b(0xa54)](_0x50976b(0xe72),_0x50976b(0x389)),_0x1a8bbc(![]);if(_0x1d9c04>0x0){if(_0x50976b(0x1fb)===_0x50976b(0x5d7))_0x1ebdc0[_0x50976b(0x1d6)](_0x50976b(0x331))[_0x50976b(0xcab)]=_0x51163b[_0x50976b(0x584)]||_0x23c67f;else{_0x21d6ce('音乐数据升级完成，迁移了\x20'+_0x1d9c04+_0x50976b(0x6cb)),setTimeout(()=>location[_0x50976b(0x28d)](),0x5dc);return;}}}else _0x5040d2=_0x50976b(0xa4f);}if(!localStorage['getItem'](_0x50976b(0xd8a))){const _0x19132a=await _0x3c0f0a();localStorage[_0x50976b(0xa54)](_0x50976b(0xd8a),_0x50976b(0x389));if(_0x19132a>0x0){_0x21d6ce(_0x50976b(0x801)+_0x19132a+_0x50976b(0x924)),setTimeout(()=>location['reload'](),0x5dc);return;}}const _0x47808d=document[_0x50976b(0x1d6)](_0x50976b(0xc98));_0x47808d?_0x50976b(0x594)===_0x50976b(0xac8)?(_0x2884c3[_0x50976b(0x329)]['visibility']='',_0x5cf45a[_0x50976b(0x329)][_0x50976b(0x71d)]=''):_0x47808d[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x14b4eb=_0x50976b;_0x14b4eb(0x716)===_0x14b4eb(0x716)?(_0x52a301(),_0x137a40(_0x14b4eb(0x401),'home')):_0x5cabbb(![]);}):_0x50976b(0xe15)!==_0x50976b(0xc3e)?console[_0x50976b(0x27f)](_0x50976b(0xef2)):_0x3d5623[_0x50976b(0x7af)]('.snoop-chat-item')[_0x50976b(0xb85)](_0x4f1276=>{const _0x1a7f3e=_0x50976b;_0x4f1276[_0x1a7f3e(0x3a0)]('click',()=>{const _0x5f1482=_0x1a7f3e,_0x48ec6e=_0x4f78bf[_0x5f1482(0xc44)](_0x4f1276['dataset']['log'][_0x5f1482(0xbe2)](/&quot;/g,'\x22')),_0x100fe5=_0x4f1276['dataset']['contactName'],_0x48797e=_0x4f1276[_0x5f1482(0x63f)]['characterName'];_0x5bf2b8(_0x100fe5,_0x48797e,_0x48ec6e);});});const _0x4c1ff0=document[_0x50976b(0x1d6)]('app-livestream');_0x4c1ff0&&(_0x50976b(0x6f1)===_0x50976b(0x6f1)?_0x4c1ff0['addEventListener'](_0x50976b(0x288),()=>{const _0x2fd898=_0x50976b;_0x5c58f1(),_0x137a40(_0x2fd898(0x2c8),'home');}):_0x307a9c['style'][_0x50976b(0xc66)]=_0x50976b(0x338));const _0xbe8326=document[_0x50976b(0x1d6)]('livestream-dm-panel'),_0x5b5b8d=document[_0x50976b(0x1d6)]('livestream-dm-btn'),_0x59b627=document[_0x50976b(0x1d6)](_0x50976b(0xbd6)),_0x4fc275=document['getElementById'](_0x50976b(0xb69)),_0x304d97=document['getElementById'](_0x50976b(0x43f)),_0x2ae88a=document[_0x50976b(0x1d6)](_0x50976b(0x96b)),_0x1c85d1=document[_0x50976b(0x1d6)]('livestream-dm-send-btn');function _0x4eec5a(_0x16e34b){const _0x2a31ab=_0x50976b;if(_0x2a31ab(0x58e)!==_0x2a31ab(0x173)){_0xdfbfac[_0x2a31ab(0x456)]=_0x16e34b,_0xbe8326[_0x2a31ab(0x555)][_0x2a31ab(0x5be)](_0x2a31ab(0x36e),_0x16e34b);if(_0x16e34b){if(_0xdfbfac[_0x2a31ab(0x337)]){if('axAcP'!==_0x2a31ab(0x37e)){const _0x1f0495=_0x4b886f[_0x443f84['id']]||[];if(_0x1f0495[_0x2a31ab(0x1e2)]===0x0)return;const _0xc65c7c=_0x45f441['createElement']('div');_0xc65c7c['className']=_0x2a31ab(0x930);const _0x3a133d=_0x1f0495[_0x2a31ab(0xa30)](_0x30fc90=>_0x532869[_0x2a31ab(0xc35)](_0x30fc90['id']));_0xc65c7c[_0x2a31ab(0xa73)]=_0x2a31ab(0xdf6)+_0x12ca38['id']+'\x22\x20'+(_0x3a133d?_0x2a31ab(0xefd):'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>'+_0x46f6e8[_0x2a31ab(0xb95)]+_0x2a31ab(0x2af);const _0x51fbdc=_0xc65c7c[_0x2a31ab(0xb6c)](_0x2a31ab(0x274));_0x1f0495[_0x2a31ab(0xb85)](_0x4f8b62=>{const _0x4f3f4f=_0x2a31ab,_0x1a99ec=_0x4f122d['includes'](_0x4f8b62['id']),_0x51d601=_0x34e8b4[_0x4f3f4f(0x8f1)]('label');_0x51d601[_0x4f3f4f(0x213)]=_0x4f3f4f(0x3a7),_0x51d601[_0x4f3f4f(0xa73)]='<input\x20type=\x22checkbox\x22\x20value=\x22'+_0x4f8b62['id']+_0x4f3f4f(0x76d)+_0x567fd6['id']+'\x22\x20'+(_0x1a99ec?_0x4f3f4f(0xefd):'')+'>\x20'+_0x4f8b62['name'],_0x51fbdc[_0x4f3f4f(0x5b8)](_0x51d601);}),_0x3e9748[_0x2a31ab(0x5b8)](_0xc65c7c);}else _0xdfbfac[_0x2a31ab(0x337)]=![],_0x5b5b8d[_0x2a31ab(0x555)][_0x2a31ab(0x9ad)](_0x2a31ab(0x996));}_0x2ae88a['focus'](),_0x192e25();}}else _0x144845+=_0x2a31ab(0x228)+_0x2e5418[_0x2a31ab(0x375)](_0x3b673b/0x3c)+_0x2a31ab(0x8ba);}_0x5b5b8d[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x4eec5a(!_0xdfbfac[_0x50976b(0x456)])),_0x59b627[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x4eec5a(![])),_0x4fc275[_0x50976b(0x3a0)]('click',()=>_0x4eec5a(![]));function _0x192e25(){const _0x285d6e=_0x50976b;_0x285d6e(0x313)===_0x285d6e(0x3a9)?_0x4654c5[_0x285d6e(0xb84)]==='Enter'&&(_0x178ef4['preventDefault'](),_0xd5f86a()):(_0x304d97[_0x285d6e(0xa73)]='',_0xdfbfac[_0x285d6e(0x4f6)][_0x285d6e(0xb85)](_0x5e93d2=>{const _0x4174cc=_0x285d6e;if('bJlpo'!==_0x4174cc(0xec8)){const _0x1c22d4=document['createElement']('div');_0x1c22d4[_0x4174cc(0x213)]=_0x4174cc(0x831)+_0x5e93d2['sender'],_0x1c22d4[_0x4174cc(0x101)]=_0x5e93d2['content'],_0x304d97[_0x4174cc(0x5b8)](_0x1c22d4);}else{_0x339ec8(_0x4174cc(0xd33));return;}}),_0x304d97[_0x285d6e(0x648)]=_0x304d97[_0x285d6e(0xc0c)]);}function _0x35b0dd(){const _0x3574f7=_0x50976b,_0xb7eb4e=_0x2ae88a['value'][_0x3574f7(0xcd2)]();if(!_0xb7eb4e)return;_0xdfbfac[_0x3574f7(0x4f6)][_0x3574f7(0xb66)]({'sender':'user','content':_0xb7eb4e}),_0x192e25();const _0x44500e={'type':'dm','content':_0xb7eb4e};_0xdfbfac['currentLivestreamUserActions']['push'](_0x44500e),_0x2ae88a[_0x3574f7(0xee2)]='',_0x2ae88a[_0x3574f7(0xc10)]();}_0x1c85d1[_0x50976b(0x3a0)]('click',_0x35b0dd),_0x2ae88a['addEventListener'](_0x50976b(0xc31),_0x92436d=>{const _0x18262d=_0x50976b;_0x92436d[_0x18262d(0xb84)]===_0x18262d(0x2ac)&&(_0x92436d[_0x18262d(0xc7a)](),_0x35b0dd());});const _0x2c6f0f=document[_0x50976b(0x1d6)](_0x50976b(0xc5e));_0x2c6f0f['addEventListener'](_0x50976b(0x288),()=>{const _0xcf43ca=_0x50976b;if(_0xcf43ca(0x81e)===_0xcf43ca(0x81e)){const _0x308cba={'type':'gift','name':'小花花','count':0x1};_0xdfbfac[_0xcf43ca(0x795)][_0xcf43ca(0xb66)](_0x308cba),_0x21d6ce('你送出了一朵\x20🌸小花花！');const _0x3b4f90=document['createElement'](_0xcf43ca(0xce2));_0x3b4f90[_0xcf43ca(0x101)]='🌸',_0x3b4f90[_0xcf43ca(0x329)]['position']=_0xcf43ca(0xda0),_0x3b4f90['style']['bottom']=_0xcf43ca(0xe04),_0x3b4f90['style']['left']=Math[_0xcf43ca(0x48a)]()*0x50+0xa+'%',_0x3b4f90[_0xcf43ca(0x329)][_0xcf43ca(0x8c2)]=_0xcf43ca(0x79c),_0x3b4f90[_0xcf43ca(0x329)]['opacity']='1',_0x3b4f90[_0xcf43ca(0x329)][_0xcf43ca(0x869)]=_0xcf43ca(0x1c4),_0x3b4f90[_0xcf43ca(0x329)][_0xcf43ca(0x5d8)]=_0xcf43ca(0x338),document[_0xcf43ca(0x1d6)]('livestream-main-view')['appendChild'](_0x3b4f90),setTimeout(()=>{const _0x5c17fb=_0xcf43ca;_0x5c17fb(0xec0)===_0x5c17fb(0xc6d)?_0x2b24de[_0x5c17fb(0x101)]='▶':(_0x3b4f90[_0x5c17fb(0x329)][_0x5c17fb(0x71d)]=_0x5c17fb(0x5bc),_0x3b4f90['style'][_0x5c17fb(0x990)]='0',setTimeout(()=>_0x3b4f90[_0x5c17fb(0x9ad)](),0x7d0));},0x32);}else{_0x1fcdbc['id']===_0x534f36[_0xcf43ca(0x8ed)]&&(_0x323aa5(),_0x5e6ecd[_0xcf43ca(0x3a4)]=[],_0x113ea0());try{_0x4cbfc5[_0xcf43ca(0x287)](_0xcf43ca(0x16c)+_0x244498['id']),_0x335d4e(_0xcf43ca(0x486)+_0x3603a7[_0xcf43ca(0xb95)]+_0xcf43ca(0x544));}catch(_0x49fbef){_0x5cb8ba[_0xcf43ca(0x27f)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20'+_0x135fc3['id'],_0x49fbef),_0x131e71(_0xcf43ca(0xaf0));}}});function _0x22feee(){const _0x4240b7=_0x50976b;_0x5b5b8d[_0x4240b7(0x555)]['toggle'](_0x4240b7(0x996),_0xdfbfac[_0x4240b7(0x337)]);}async function _0x55dc2d(_0x8531=![]){const _0x4813f4=_0x50976b;if(!_0xdfbfac[_0x4813f4(0x2bb)]||_0xdfbfac[_0x4813f4(0xc03)][_0x4813f4(0x1e2)]===0x0)return console[_0x4813f4(0x7ec)](_0x4813f4(0x1f1)),null;_0x1a8bbc(!![],_0x4813f4(0x1df));const _0x4e8085=_0x5844c7(_0xdfbfac[_0x4813f4(0x2bb)]),_0x1ecb72=_0x58761c(_0xdfbfac[_0x4813f4(0x8ed)]);try{if(_0x4813f4(0xc3b)===_0x4813f4(0xc3b)){const _0x2e376c=new Date(),_0x3da7a7='\x0a#\x20时间锚点\x20(最高优先级)\x0a-\x20**当前时间**:\x20'+_0x2e376c[_0x4813f4(0x985)]('zh-CN',{'dateStyle':_0x4813f4(0x8a8),'timeStyle':_0x4813f4(0xa40)})+_0x4813f4(0x86b),_0x5b362f=_0xdfbfac[_0x4813f4(0xc03)]['map'](_0x4d32f0=>{const _0x2a4eee=_0x4813f4;if(_0x2a4eee(0xcda)===_0x2a4eee(0x689)){const _0x2c4f3d=_0x1b8c06[_0x2a4eee(0x466)]==='character'?'你':_0x1eaaa5[_0x2a4eee(0x19c)];_0x4b3cc8+='\x20\x20\x20\x20-\x20'+_0x2c4f3d+':\x20'+_0xb8f669['content']+'\x20\x0a';}else{const _0x8cce4a=new Date(_0x4d32f0[_0x2a4eee(0x10c)])[_0x2a4eee(0x4f1)](_0x2a4eee(0x731));if(_0x4d32f0[_0x2a4eee(0x8c7)]===_0x2a4eee(0xb61))return'['+_0x8cce4a+']\x20[主播\x20'+_0x4d32f0[_0x2a4eee(0x8b5)]+']:\x20'+_0x4d32f0[_0x2a4eee(0xee)];if(_0x4d32f0['type']==='danmaku')return'['+_0x8cce4a+_0x2a4eee(0xb20)+_0x4d32f0[_0x2a4eee(0xa29)]+_0x2a4eee(0x44a)+(_0x4d32f0[_0x2a4eee(0xab6)]||_0x4d32f0[_0x2a4eee(0xee)]);if(_0x4d32f0['type']===_0x2a4eee(0x24e))return'['+_0x8cce4a+_0x2a4eee(0xce5)+_0x4d32f0[_0x2a4eee(0xe74)]+'\x20to\x20'+_0x4d32f0['to']+']:\x20'+_0x4d32f0[_0x2a4eee(0xee)];return'['+_0x8cce4a+']\x20[系统事件]:\x20'+JSON[_0x2a4eee(0xea5)](_0x4d32f0);}})[_0x4813f4(0xd9a)]('\x0a'),_0x50b6c6=_0x4813f4(0x98f)+_0x4e8085[_0x4813f4(0xb95)]+_0x4813f4(0x2ef)+_0x3da7a7+_0x4813f4(0xee3)+_0x5b362f+_0x4813f4(0x235)+_0x4e8085[_0x4813f4(0xb95)]+_0x4813f4(0x4d4)+_0x1ecb72[_0x4813f4(0xb95)]+_0x4813f4(0x931)+_0x4e8085[_0x4813f4(0xb95)]+_0x4813f4(0x4a4)+_0x4e8085[_0x4813f4(0xb95)]+_0x4813f4(0xcf3)+_0x1ecb72[_0x4813f4(0xb95)]+_0x4813f4(0x2d8)+_0x1ecb72[_0x4813f4(0xb95)]+'’私信询问了'+_0x4e8085[_0x4813f4(0xb95)]+'对主角的看法，'+_0x4e8085[_0x4813f4(0xb95)]+_0x4813f4(0x6c6),_0x5c7353=[{'role':'system','content':_0x50b6c6}],_0x31e2b1=await _0x2fa074(_0x5c7353);if(_0x31e2b1){const _0x1d5ef4=_0x31e2b1[_0x4813f4(0xbe2)](/```(?:yaml)?/g,'')[_0x4813f4(0xcd2)]();return _0x1d5ef4;}return null;}else _0x4c929c=_0x2e3d2e(_0x32b168['participantIds'][0x0]);}catch(_0x3339bc){return console[_0x4813f4(0x27f)](_0x4813f4(0xdb0),_0x3339bc),_0x21d6ce(_0x4813f4(0x140)+_0x3339bc[_0x4813f4(0x8ac)]),null;}finally{_0x1a8bbc(![]);}}let _0x1dfdbb={'charId':null,'index':-0x1};function _0x3d12f7(_0x49703f,_0x4e90ab,_0x5a1e25){const _0x1c92b0=_0x50976b;if(_0x1c92b0(0x315)===_0x1c92b0(0x315)){if(window[_0x1c92b0(0x8f4)])clearTimeout(window[_0x1c92b0(0x8f4)]);const _0x25cb3c=()=>{const _0x3b1b3b=_0x1c92b0;_0x3b1b3b(0x705)===_0x3b1b3b(0x705)?window[_0x3b1b3b(0x8f4)]=setTimeout(()=>{const _0x4ffafe=_0x3b1b3b;_0x49703f[_0x4ffafe(0xc7a)](),_0x7d817(_0x4e90ab,_0x5a1e25);},0x320):_0x37c268=_0x3b1b3b(0xecb)+_0x204cd6['id']+_0x3b1b3b(0x8c4)+(_0x46a72c['coverUrl']||_0x552a76)+_0x3b1b3b(0x634)+_0x2b9cf3[_0x3b1b3b(0x3c7)]+_0x3b1b3b(0x856)+_0xbc00a3[_0x3b1b3b(0x7dc)]+_0x3b1b3b(0x22a)+(_0x17e345['playableUrl']?'▶':'⚠')+'</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';},_0x572783=()=>{const _0x118a89=_0x1c92b0;clearTimeout(window[_0x118a89(0x8f4)]),document[_0x118a89(0x255)](_0x118a89(0xc67),_0x572783),document['removeEventListener'](_0x118a89(0xeee),_0x572783),document['removeEventListener'](_0x118a89(0xb8b),_0x572783),document[_0x118a89(0x255)]('touchcancel',_0x572783);};document[_0x1c92b0(0x3a0)](_0x1c92b0(0xc67),_0x572783,{'once':!![]}),document['addEventListener']('mouseleave',_0x572783,{'once':!![]}),document[_0x1c92b0(0x3a0)](_0x1c92b0(0xb8b),_0x572783,{'once':!![]}),document['addEventListener'](_0x1c92b0(0x28a),_0x572783,{'once':!![]}),_0x25cb3c();}else _0x89cd23[_0x1c92b0(0x27f)](_0x1c92b0(0xd53),_0x3a1547),_0x51d027=_0x184fc0;}function _0x7d817(_0x5c9487,_0x387575){const _0x28cebe=_0x50976b,_0x137488='replay-action-modal-'+_0x387575;if(document[_0x28cebe(0x1d6)](_0x137488))return;const _0x3fcd0b=_0x28cebe(0xdcf)+_0x137488+'\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-edit\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-delete\x22\x20style=\x22color:\x20#dc3545;\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x20cancel\x22\x20id=\x22replay-action-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>';document[_0x28cebe(0x42c)][_0x28cebe(0xc04)](_0x28cebe(0x439),_0x3fcd0b);const _0x3ba04a=document[_0x28cebe(0x1d6)](_0x137488),_0x5cd7a7=()=>_0x3ba04a[_0x28cebe(0x9ad)]();_0x3ba04a['querySelector'](_0x28cebe(0x8d7))[_0x28cebe(0x4a1)]=_0x5cd7a7,_0x3ba04a['querySelector'](_0x28cebe(0x830))[_0x28cebe(0x4a1)]=_0x5cd7a7,_0x3ba04a[_0x28cebe(0xb6c)]('#replay-action-edit')[_0x28cebe(0x4a1)]=()=>{_0x1ff8a5(_0x5c9487,_0x387575),_0x5cd7a7();},_0x3ba04a[_0x28cebe(0xb6c)]('#replay-action-delete')[_0x28cebe(0x4a1)]=()=>{const _0x2c3079=_0x28cebe;_0x2c3079(0xbbc)===_0x2c3079(0x349)?_0x386d33[_0x2c3079(0xb66)]('性格:\x20'+_0x4100bf['personality_core'][_0x2c3079(0x29a)]):(_0x32cce8(_0x5c9487,_0x387575),_0x5cd7a7());};}async function _0x32cce8(_0x399b02,_0x5b5259){const _0xc44d53=_0x50976b,_0x369b27=await _0x13215d(_0xc44d53(0x203));_0x369b27&&(_0xc44d53(0x157)!==_0xc44d53(0x3b3)?_0xdfbfac[_0xc44d53(0xb63)][_0x399b02]&&_0xdfbfac['livestreamReplays'][_0x399b02][_0x5b5259]&&(_0xdfbfac[_0xc44d53(0xb63)][_0x399b02][_0xc44d53(0x22f)](_0x5b5259,0x1),_0x31622b(),_0x3b60f3(_0x399b02),_0x21d6ce('回放已删除。')):(_0x54847c[_0xc44d53(0x287)]('badgeState'),_0x547fcf['removeItem']('cardWidgetState'),_0x2d25a2(_0xc44d53(0x4ac)),_0x355c30(()=>_0x440e9c['reload'](),0x3e8)));}function _0x1ff8a5(_0x303d95,_0x27a360){const _0x3bcd3f=_0x50976b;if(_0x3bcd3f(0xee4)!=='vXWvp'){const _0x48042d=_0xdfbfac['livestreamReplays'][_0x303d95]?.[_0x27a360];if(_0x48042d===undefined)return;const _0x23f225=document[_0x3bcd3f(0x1d6)](_0x3bcd3f(0x426)),_0x4b8a51=document[_0x3bcd3f(0x1d6)]('edit-replay-textarea');_0x4b8a51['value']=_0x48042d,_0x23f225[_0x3bcd3f(0x555)][_0x3bcd3f(0x1cd)](_0x3bcd3f(0x36e)),document['getElementById'](_0x3bcd3f(0x804))[_0x3bcd3f(0x4a1)]=()=>_0x22d6b2(_0x303d95,_0x27a360),document[_0x3bcd3f(0x1d6)]('cancel-edit-replay-btn')[_0x3bcd3f(0x4a1)]=_0xa889a1,document[_0x3bcd3f(0x1d6)](_0x3bcd3f(0x6f5))[_0x3bcd3f(0x4a1)]=_0xa889a1;}else _0x3b7896(_0x3bcd3f(0x693)+_0x5bd491[_0x3bcd3f(0x8ac)]);}function _0xa889a1(){const _0x5be1ca=_0x50976b;if(_0x5be1ca(0x3a3)===_0x5be1ca(0x3a3))document[_0x5be1ca(0x1d6)](_0x5be1ca(0x426))[_0x5be1ca(0x555)][_0x5be1ca(0x9ad)]('show');else{_0x5f0ea4(_0x5be1ca(0x90a));return;}}function _0x22d6b2(_0x3b91f1,_0x498e6e){const _0x5d72bd=_0x50976b,_0x2719ca=document[_0x5d72bd(0x1d6)](_0x5d72bd(0xc08))[_0x5d72bd(0xee2)];_0xdfbfac[_0x5d72bd(0xb63)][_0x3b91f1][_0x498e6e]=_0x2719ca,_0x31622b(),_0x3b60f3(_0x3b91f1),_0xa889a1(),_0x21d6ce(_0x5d72bd(0x358));}function _0x5b8839(){const _0x87a1ef=_0x50976b;if('QuuhG'!==_0x87a1ef(0xb56))_0x42ee43['characters']['forEach'](_0x195716=>_0x560b94(_0x195716,_0x87a1ef(0x584)));else{const _0x11157f=_0xdfbfac[_0x87a1ef(0x2bb)],_0x57648b=_0x5844c7(_0x11157f);if(!_0x57648b)return;document[_0x87a1ef(0x1d6)](_0x87a1ef(0xe7a))[_0x87a1ef(0x101)]=_0x57648b['name']+_0x87a1ef(0x732),_0x3b60f3(_0x11157f),_0x137a40(_0x87a1ef(0xb63),_0x87a1ef(0xf03));}}function _0x3b60f3(_0x3d3d96){const _0x289d8d=_0x50976b,_0x1f9d16=document[_0x289d8d(0x1d6)](_0x289d8d(0x77d)),_0x476063=_0xdfbfac[_0x289d8d(0xb63)][_0x3d3d96]||[];_0x1f9d16[_0x289d8d(0xa73)]='';if(_0x476063[_0x289d8d(0x1e2)]===0x0){_0x1f9d16['innerHTML']=_0x289d8d(0x75c);return;}_0x476063[_0x289d8d(0xb85)]((_0x337949,_0x433669)=>{const _0x16f446=_0x289d8d,_0x1e9c9b=_0x337949[_0x16f446(0x4dc)](/start_time:\s*"?([^"\n]+)"?/),_0x2762b7=_0x337949['match'](/theme:\s*"?([^"\n]+)"?/),_0x59621e=_0x1e9c9b?_0x1e9c9b[0x1]:_0x16f446(0xc73),_0x107c68=document[_0x16f446(0x8f1)](_0x16f446(0xce2));_0x107c68[_0x16f446(0x213)]=_0x16f446(0x66d),_0x107c68['innerHTML']=_0x16f446(0xdbe)+(_0x2762b7?_0x2762b7[0x1]:_0x16f446(0x7e8))+_0x16f446(0x643)+_0x59621e+'</div>\x0a</div>\x0a',_0x107c68[_0x16f446(0x3a0)](_0x16f446(0x288),()=>_0x43fa27(_0x337949)),_0x107c68[_0x16f446(0x3a0)](_0x16f446(0x5c9),_0xb6d238=>{const _0x47fbb4=_0x16f446;if('CeWkt'===_0x47fbb4(0xa24)){const _0x25b9d4=_0x54551d(_0x22f046[_0x47fbb4(0xee)]??_0x33fa5b[_0x47fbb4(0x7ee)]??_0x48dc51[_0x47fbb4(0x8ac)]??'')[_0x47fbb4(0xcd2)]();if(_0x25b9d4)_0x153eb9[_0x47fbb4(0x3fb)]['push']({'senderId':_0x43c2db['id'],'kind':'text','content':_0x25b9d4});}else _0xb6d238[_0x47fbb4(0x23c)]===0x0&&_0x3d12f7(_0xb6d238,_0x3d3d96,_0x433669);}),_0x107c68[_0x16f446(0x3a0)](_0x16f446(0xa6c),_0x14895d=>_0x3d12f7(_0x14895d,_0x3d3d96,_0x433669),{'passive':![]}),_0x107c68['addEventListener'](_0x16f446(0x1c1),_0x378667=>_0x378667[_0x16f446(0xc7a)]()),_0x107c68[_0x16f446(0x3a0)]('contextmenu',_0x193cb4=>_0x193cb4[_0x16f446(0xc7a)]()),_0x1f9d16[_0x16f446(0x5b8)](_0x107c68);});}function _0x43fa27(_0x187fa3){const _0x4e37f8=_0x50976b;_0x1f4124(_0x187fa3),_0x137a40('livestreamReplayView',_0x4e37f8(0xb63));}function _0x1f4124(_0x6b9e45){const _0xa8835c=_0x50976b,_0x4ba582=document['getElementById'](_0xa8835c(0xbda));_0x4ba582['innerHTML']='';const _0x2c3159=_0x6b9e45[_0xa8835c(0xc12)]('\x0a');let _0x1b168e='',_0x454a7c=![];_0x2c3159[_0xa8835c(0xb85)](_0x1023b3=>{const _0x608f14=_0xa8835c,_0x20cfe=_0x1023b3[_0x608f14(0xcd2)]();if(!_0x20cfe)return;if(_0x20cfe[_0x608f14(0xb91)]('-\x20')){if(_0x608f14(0x9de)!=='ViamI')_0x3620b0[_0x608f14(0xb66)](_0x608f14(0xe18)+(_0x5ede0d===_0x608f14(0xdf7)?'积极':'消极')+_0x608f14(0x273)+_0x29574e[_0x608f14(0x8b8)](0x0,0x2)['join']('、'));else{if(_0x454a7c){const _0x1403a2=document[_0x608f14(0x8f1)]('li');_0x1403a2[_0x608f14(0x101)]=_0x20cfe[_0x608f14(0x3b1)](0x2),_0x1403a2[_0x608f14(0x329)]['marginBottom']=_0x608f14(0x6db),_0x4ba582['lastChild'][_0x608f14(0x5b8)](_0x1403a2);}}}else{_0x454a7c=![];const _0x4f8e9c=_0x20cfe[_0x608f14(0xc12)](/:(.*)/s);_0x1b168e=_0x4f8e9c[0x0][_0x608f14(0xcd2)]();let _0x29d81a=(_0x4f8e9c[0x1]||'')[_0x608f14(0xcd2)]()['replace'](/^"|"$/g,'');const _0x48b578={'start_time':_0x608f14(0x380),'duration':'直播时长','theme':_0x608f14(0x165),'streamer_mood':'主播情绪','audience_mood':_0x608f14(0xb5a),'key_events':'关键事件','dm_interaction_summary':_0x608f14(0xbc2)},_0x4c554a=document['createElement']('h4');_0x4c554a[_0x608f14(0x101)]=_0x48b578[_0x1b168e]||_0x1b168e,_0x4c554a[_0x608f14(0x329)][_0x608f14(0x7a5)]=_0x608f14(0x8bf),_0x4c554a[_0x608f14(0x329)][_0x608f14(0x7eb)]=_0x608f14(0x505),_0x4c554a[_0x608f14(0x329)]['marginTop']=_0x608f14(0x34b),_0x4ba582[_0x608f14(0x5b8)](_0x4c554a);if(_0x29d81a){if(_0x608f14(0x45b)==='nwTqQ'){const _0x175f56=document[_0x608f14(0x8f1)]('p');_0x175f56['textContent']=_0x29d81a,_0x175f56[_0x608f14(0x329)][_0x608f14(0x8dc)]='1.6',_0x4ba582['appendChild'](_0x175f56);}else throw new _0x80b48d(_0x608f14(0xf01));}else{if(_0x608f14(0x360)==='dLyNV'){_0x454a7c=!![];const _0x108a51=document['createElement']('ul');_0x108a51[_0x608f14(0x329)][_0x608f14(0x297)]=_0x608f14(0x34b),_0x4ba582[_0x608f14(0x5b8)](_0x108a51);}else{const _0x2a45c8=_0x4a8c78['createElement']('li');_0x2a45c8[_0x608f14(0x213)]=_0x608f14(0x9f1),_0x2a45c8['dataset']['charId']=_0x4197be['id'],_0x2a45c8[_0x608f14(0xa73)]=_0x608f14(0x900)+(_0x293301[_0x608f14(0x584)]||_0x100a03)+_0x608f14(0x16a)+_0xab8f6[_0x608f14(0xb95)]+_0x608f14(0xa8c),_0x2a45c8[_0x608f14(0x3a0)](_0x608f14(0x288),()=>{_0x68a454(_0x560f6f['id']);}),_0x5df90c[_0x608f14(0x5b8)](_0x2a45c8);}}}});}const _0x18e94d=_0x1dcdc0();await _0x200303(),await _0x49406e(),_0x47cb69(),((()=>{const _0xd6c375=_0x50976b;let _0x51c1b9=![],_0x1ee135=_0xdfbfac['worldBookCategories'][_0xd6c375(0x76b)](_0x571114=>_0x571114[_0xd6c375(0xb95)]==='html');!_0x1ee135&&(_0xd6c375(0xe24)===_0xd6c375(0x306)?_0xd1c773(_0xd6c375(0x43b)+_0x4e5741['message']):(_0x1ee135={'id':'wbc_html_default_builtin','name':_0xd6c375(0x554)},_0xdfbfac['worldBookCategories'][_0xd6c375(0xb66)](_0x1ee135),console[_0xd6c375(0x7ec)](_0xd6c375(0xdde)),_0x51c1b9=!![]));const _0x22b8b5=_0xd6c375(0x284);let _0x3a376b=_0xdfbfac[_0xd6c375(0xe7d)][_0xd6c375(0x7d1)](_0x14e16=>_0x14e16['id']===_0x22b8b5);if(!_0x3a376b){console['log']('Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.');const _0x5b5084=_0xd6c375(0x977),_0x390d2d={'id':_0x22b8b5,'name':_0xd6c375(0xeb),'content':_0x5b5084,'categoryId':_0x1ee135['id']};_0xdfbfac[_0xd6c375(0xe7d)][_0xd6c375(0xb66)](_0x390d2d),_0x51c1b9=!![];}_0x51c1b9&&(_0x31622b(),console[_0xd6c375(0x7ec)](_0xd6c375(0xc8e)));})()),_0xeda285(),_0x45d9cc(),_0x465b6e(),_0x102454(),_0x46a68a(),_0x17156a(),_0x8aaa3a(),_0x8e2a51(),_0x36a693(),_0x1e6823();const _0x2bf12d=document[_0x50976b(0x1d6)](_0x50976b(0xd52));_0x2bf12d&&requestAnimationFrame(()=>{_0x2bf12d['style']['opacity']='1';});_0x488403(),_0x64a00(),setInterval(_0x64a00,0x7530),_0x5cf94c(),_0x117428(),_0x37fe21();const _0x5d00ac=document[_0x50976b(0x1d6)](_0x50976b(0xe39));document[_0x50976b(0x1d6)]('music-widget-card')[_0x50976b(0x3a0)](_0x50976b(0x288),function(_0x12d19c){const _0x292899=_0x50976b;if(_0x292899(0x53a)===_0x292899(0x84f))_0x19ef22=_0x4a825c[_0x292899(0xc44)](_0x47190f);else{if(_0x12d19c['target'][_0x292899(0x699)]('button'))return;const _0x4a0f59=document[_0x292899(0x1d6)](_0x292899(0x589));_0x4a0f59&&_0x4a0f59[_0x292899(0x288)]();}}),_0x137a40(_0x50976b(0x410),'init');(_0x18e94d||_0xdfbfac[_0x50976b(0x94d)][_0x50976b(0x1e2)]===0x0)&&('MfbGL'===_0x50976b(0xec)?_0x387b42[_0x1bb125]['classList'][_0x50976b(0x1cd)]('active'):(_0x21d6ce(_0x50976b(0xa3a)),setTimeout(()=>{const _0x6a8fdf=_0x50976b;_0x137a40(_0x6a8fdf(0xa77),'home'),setTimeout(()=>_0x4302de(),0x64);},0x6a4)));document['getElementById'](_0x50976b(0x8ee))['addEventListener'](_0x50976b(0x288),_0x49b183);const _0x507e78=document['getElementById'](_0x50976b(0xba2));document[_0x50976b(0x1d6)]('upload-widget-bg-button')[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x507e78[_0x50976b(0x288)]()),document[_0x50976b(0x1d6)](_0x50976b(0x6c8))['addEventListener']('click',()=>{const _0x2c55ed=_0x50976b;_0xdfbfac[_0x2c55ed(0x3a8)]['widgetBgImage']=null,_0x31622b(),_0x5cf94c(),_0x21d6ce(_0x2c55ed(0xc2c));}),_0x507e78[_0x50976b(0x3a0)](_0x50976b(0xef8),async _0x1df989=>{const _0x7db40e=_0x50976b;if('JgKRg'==='JgKRg'){const _0x38fdac=_0x1df989[_0x7db40e(0x272)][_0x7db40e(0x6d4)][0x0];if(!_0x38fdac)return;try{const _0xc6562=await _0x1b759b(_0x38fdac);_0xdfbfac['preferences']['widgetBgImage']=_0xc6562,_0x31622b(),_0x5cf94c(),_0x21d6ce(_0x7db40e(0x116));}catch(_0x1bbdb){_0x21d6ce(_0x7db40e(0x693)+_0x1bbdb['message']);}}else _0x3983c8=_0xed59ed[_0x7db40e(0xa17)]?_0x4c2500[_0x7db40e(0xa17)][0x0][_0x7db40e(0x107)]:_0x58fccd[_0x7db40e(0x107)],_0x396c25=0x0,_0x4718a5[_0x7db40e(0x329)][_0x7db40e(0x869)]=_0x7db40e(0x338),_0x3a3bfa=!![],_0x2239cb[_0x7db40e(0x8c7)]===_0x7db40e(0x5c9)&&(_0x2535cc[_0x7db40e(0x3a0)]('mousemove',_0x4df627),_0x45b752[_0x7db40e(0x3a0)](_0x7db40e(0xc67),_0x598441));}),_0x43f55a(),document[_0x50976b(0x1d6)](_0x50976b(0x879))[_0x50976b(0x3a0)](_0x50976b(0x288),()=>document[_0x50976b(0x1d6)]('badge-input')[_0x50976b(0x288)]()),document[_0x50976b(0x1d6)]('reset-badge-button')[_0x50976b(0x3a0)]('click',async()=>{const _0x4145ca=_0x50976b;await _0x26b00b(_0x4145ca(0xd5e)),localStorage[_0x4145ca(0x287)](_0x4145ca(0xd8c)),_0x43f55a(),_0x21d6ce('徽章已移除。');}),document[_0x50976b(0x1d6)](_0x50976b(0xea2))[_0x50976b(0x3a0)](_0x50976b(0xef8),async _0x1efa2d=>{const _0x372b58=_0x50976b;if('LvPdP'!=='JDlry'){const _0x116902=_0x1efa2d[_0x372b58(0x272)][_0x372b58(0x6d4)][0x0];if(!_0x116902)return;try{_0x372b58(0xeda)!==_0x372b58(0xeda)?_0x3a2ca8[_0x372b58(0xb85)](_0x1c5037=>{const _0x52cd26=_0x372b58,_0x5a77bd=_0x8a4eff[_0x52cd26(0x8f1)](_0x52cd26(0xce2));_0x5a77bd[_0x52cd26(0x213)]=_0x52cd26(0x40b),_0x5a77bd[_0x52cd26(0x101)]=_0x1c5037['content'],_0x5ac66d[_0x52cd26(0x5b8)](_0x5a77bd);}):(await _0x510f28(_0x372b58(0xd5e),_0x116902),await _0x43f55a(),_0x21d6ce('徽章已更换！'));}catch(_0x2fbd2f){_0x21d6ce(_0x372b58(0x693)+_0x2fbd2f[_0x372b58(0x8ac)]);}}else _0xea7ea9['error'](_0x372b58(0x72f),_0x178ee6);}),_0x392c0f(),document['getElementById'](_0x50976b(0x85c))[_0x50976b(0x3a0)](_0x50976b(0x5c9),_0x1b84b1),document[_0x50976b(0x1d6)](_0x50976b(0x85c))[_0x50976b(0x3a0)](_0x50976b(0xa6c),_0x1b84b1,{'passive':![]}),document[_0x50976b(0x1d6)](_0x50976b(0x66f))[_0x50976b(0x3a0)]('mousedown',_0x40972e),document[_0x50976b(0x1d6)](_0x50976b(0x66f))[_0x50976b(0x3a0)](_0x50976b(0xa6c),_0x40972e,{'passive':![]}),document[_0x50976b(0x1d6)]('upload-card-button')[_0x50976b(0x3a0)](_0x50976b(0x288),()=>document[_0x50976b(0x1d6)]('card-input')[_0x50976b(0x288)]()),document[_0x50976b(0x1d6)](_0x50976b(0x6e5))[_0x50976b(0x3a0)](_0x50976b(0x288),async()=>{const _0xe847b3=_0x50976b;await _0x26b00b(_0xe847b3(0x170)),localStorage['removeItem']('cardState'),_0x392c0f(),_0x21d6ce(_0xe847b3(0xa75));}),document['getElementById'](_0x50976b(0x11e))['addEventListener'](_0x50976b(0xef8),async _0x2eadcb=>{const _0x7d8bf4=_0x50976b;if(_0x7d8bf4(0xebd)!==_0x7d8bf4(0xebd)){_0x503db0('数据结构升级：成功救援了\x20'+_0x1c080f+_0x7d8bf4(0x924)),_0x5039da(()=>_0x4c36ff['reload'](),0x5dc);return;}else{const _0x3810a7=_0x2eadcb[_0x7d8bf4(0x272)][_0x7d8bf4(0x6d4)][0x0];if(!_0x3810a7)return;try{await _0x510f28('widget_card',_0x3810a7),await _0x392c0f(),_0x21d6ce('卡片已更换！');}catch(_0x4149d3){if(_0x7d8bf4(0x4d8)!==_0x7d8bf4(0x4d8)){const _0x2db41d={'id':_0x7d8bf4(0x64f)+_0x4e48de['now'](),'name':_0x181134,'content':_0x381fcc,'categoryId':_0x34d7ea};_0x896ddf['worldBooks'][_0x7d8bf4(0xb66)](_0x2db41d);}else _0x21d6ce(_0x7d8bf4(0x693)+_0x4149d3[_0x7d8bf4(0x8ac)]);}}}),document[_0x50976b(0x1d6)](_0x50976b(0x9ea))[_0x50976b(0x3a0)]('click',async()=>{const _0x3d387d=_0x50976b;if(_0x3d387d(0x1d5)!==_0x3d387d(0xee0)){const _0xcaf31f=await _0x13215d('确定要重置所有小组件的位置吗？它们会回到初始位置。');if(_0xcaf31f){if(_0x3d387d(0x23d)!==_0x3d387d(0x23d)){const _0x3d76f7=_0x351fc0['isOffline']?_0x101aca(_0x5e0efc[_0x3d387d(0xee)])[_0x3d387d(0xcd2)]()[_0x3d387d(0xbe2)](/\n+/g,'\x20'):_0x319d48(_0x49f807[_0x3d387d(0xee)])[_0x3d387d(0xcd2)]();if(_0x3d76f7)_0xad045['push'](_0x26d55e+'\x20['+_0x51ce51+_0x3d387d(0x615)+_0x3850a0(_0x3ff980)+']\x20'+_0x3d76f7);}else localStorage[_0x3d387d(0x287)]('badgeState'),localStorage[_0x3d387d(0x287)](_0x3d387d(0x30a)),_0x21d6ce(_0x3d387d(0x4ac)),setTimeout(()=>location[_0x3d387d(0x28d)](),0x3e8);}}else _0x20c1d4+=_0x3d387d(0x978);});const _0x2a5adc=document[_0x50976b(0x1d6)](_0x50976b(0x3bc));_0x2a5adc[_0x50976b(0x3a0)]('click',()=>{const _0x418676=_0x50976b;if(_0x418676(0x6f7)!=='nIbhJ')_0x5e4224(),_0x137a40('diaryList',_0x418676(0x410));else{_0x47809d(_0x418676(0x872));return;}});const _0x225804=document[_0x50976b(0x1d6)]('app-music-library');_0x225804[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x249a9f=_0x50976b;_0x249a9f(0x261)===_0x249a9f(0xb74)?_0x3f7356[_0x249a9f(0xca6)]('Failed\x20to\x20parse\x20Gemini\x20chunk:',_0x8cd134):(_0x8b4724(),_0x137a40(_0x249a9f(0xd3a),_0x249a9f(0x410)));}),document[_0x50976b(0x1d6)]('back-to-home-from-music-library')['addEventListener'](_0x50976b(0x288),()=>_0x137a40(_0x50976b(0x410),'musicLibrary')),document[_0x50976b(0x1d6)](_0x50976b(0x4b7))[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x137a40(_0x50976b(0x410),_0x50976b(0x125))),document[_0x50976b(0x1d6)]('back-to-diary-list')[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x4b0e5f=_0x50976b;if(_0x4b0e5f(0xdb5)!==_0x4b0e5f(0xdb5))throw new _0x2ad82e(_0x4b0e5f(0xcf8));else _0xdfbfac[_0x4b0e5f(0x958)]=null,_0x137a40(_0x4b0e5f(0x125),_0x4b0e5f(0xcec));}),document['getElementById']('diary-send-button')[_0x50976b(0x3a0)](_0x50976b(0x288),_0x181b22),document[_0x50976b(0x1d6)]('diary-get-reply-button')['addEventListener'](_0x50976b(0x288),_0xbc917a),document[_0x50976b(0x1d6)](_0x50976b(0x8dd))[_0x50976b(0x3a0)]('keydown',_0x103c96=>{const _0x15ed94=_0x50976b;_0x103c96[_0x15ed94(0xb84)]==='Enter'&&!_0x103c96[_0x15ed94(0x2e5)]&&(_0x15ed94(0xa27)!==_0x15ed94(0xa27)?_0x3e8b31(_0x4f8f69):(_0x103c96[_0x15ed94(0xc7a)](),_0x181b22()));});const _0x2275a6=[_0x50976b(0xcd5),'happy','angry',_0x50976b(0x85f),_0x50976b(0xe5)];_0x2275a6['forEach'](_0x211bb5=>{const _0x20ff5f=_0x50976b,_0x93ab54=document['getElementById']('char-edit-sprite-'+_0x211bb5+_0x20ff5f(0x909)),_0x18a160=document[_0x20ff5f(0x1d6)](_0x20ff5f(0xc2e)+_0x211bb5+_0x20ff5f(0x99a));_0x93ab54&&_0x18a160&&(_0x20ff5f(0xd8d)!==_0x20ff5f(0xbf6)?(_0x93ab54[_0x20ff5f(0x3a0)](_0x20ff5f(0x288),()=>_0x18a160[_0x20ff5f(0x288)]()),_0x18a160[_0x20ff5f(0x3a0)]('change',_0x5f43a1=>{const _0x32fd77=_0x20ff5f;if(_0x32fd77(0x6c2)!==_0x32fd77(0x6c2)){if(_0x2b80d6['name']===_0x32fd77(0xa92))return _0x45978b[_0x32fd77(0x7ec)]('Fetch\x20request\x20was\x20aborted.'),'';throw _0x3fb7c2;}else{const _0x439e89=_0x5f43a1[_0x32fd77(0x272)]['files'][0x0];if(!_0x439e89)return;try{if('ApQAn'!==_0x32fd77(0xa05))_0x1da5a8();else{const _0x15af3b=URL[_0x32fd77(0x21c)](_0x439e89);_0x93ab54[_0x32fd77(0x329)][_0x32fd77(0x5b7)]='url(\x27'+_0x15af3b+'\x27)';}}catch(_0x33b200){_0x32fd77(0x96c)===_0x32fd77(0xdbf)?_0x3823ac(_0x2b6d84,_0x137555['emotion']):_0x21d6ce(_0x32fd77(0x739)+_0x33b200[_0x32fd77(0x8ac)]);}}})):_0x54d9b9+=_0x20ff5f(0x294));}),document['getElementById'](_0x50976b(0x7bb))['addEventListener'](_0x50976b(0x288),_0x2376ec),document['getElementById']('toggle-meeting-view-button')[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x17af90=_0x50976b;if('Iqkne'===_0x17af90(0x726)){const {playlist:_0x5385bb,currentIndex:_0xf837e8}=_0x29c217[_0x17af90(0xc44)](_0x1f5ce8);_0x336fdc['isArray'](_0x5385bb)&&_0x5385bb[_0x17af90(0x1e2)]>0x0&&_0xf837e8>-0x1&&(_0x38c2af['musicPlaylist']=_0x5385bb,_0xd05948['currentlyPlayingIndex']=_0xf837e8,_0x5ae5ef[_0x17af90(0xb49)]=![],_0x2332ac());}else _0xdfbfac['meetingViewMode']=_0xdfbfac[_0x17af90(0xc3d)]==='novel'?_0x17af90(0xbf1):_0x17af90(0xabd),_0x4fb37c();}),document[_0x50976b(0x1d6)]('meeting-scene-view')[_0x50976b(0x3a0)](_0x50976b(0x5c9),_0x40972e),document[_0x50976b(0x1d6)]('meeting-scene-view')['addEventListener']('touchstart',_0x40972e,{'passive':![]});let _0x134c65=null;function _0x40972e(_0x47e7e2){const _0x1ce97c=_0x50976b;if(_0x134c65)clearTimeout(_0x134c65);const _0x37432a=_0x47e7e2[_0x1ce97c(0x272)][_0x1ce97c(0x699)](_0x1ce97c(0x13c));if(!_0x37432a)return;const _0x1c79b4=parseInt(_0x37432a[_0x1ce97c(0x63f)][_0x1ce97c(0x47a)],0xa);if(isNaN(_0x1c79b4))return;const _0x489479=()=>{_0x134c65=setTimeout(()=>{const _0x4c019b=_0x4f70;if(_0x47e7e2[_0x4c019b(0x8c7)]===_0x4c019b(0xa6c))_0x47e7e2[_0x4c019b(0xc7a)]();_0x590908(_0x1c79b4);},0x320);},_0x413586=()=>{const _0xfb8b99=_0x1ce97c;if(_0xfb8b99(0xb33)===_0xfb8b99(0x8d1))return[_0xc0a0de];else{if(_0x134c65)clearTimeout(_0x134c65);}};document[_0x1ce97c(0x3a0)](_0x1ce97c(0xc67),_0x413586,{'once':!![]}),document[_0x1ce97c(0x3a0)](_0x1ce97c(0xeee),_0x413586,{'once':!![]}),document[_0x1ce97c(0x3a0)](_0x1ce97c(0xb8b),_0x413586,{'once':!![]}),document[_0x1ce97c(0x3a0)](_0x1ce97c(0x28a),_0x413586,{'once':!![]}),_0x489479();}document[_0x50976b(0x1d6)](_0x50976b(0x904))[_0x50976b(0x3a0)](_0x50976b(0xef8),_0x1c7a2c),document[_0x50976b(0x42c)][_0x50976b(0x3a0)](_0x50976b(0x288),_0x11b3cb=>{const _0x206e88=_0x50976b;if(_0x206e88(0xe13)===_0x206e88(0xe13)){const _0x40c8c6=_0x11b3cb[_0x206e88(0x272)][_0x206e88(0x699)](_0x206e88(0x686));if(_0x40c8c6){if(_0x206e88(0xeaf)!==_0x206e88(0x526)){const _0x4710cb=_0x11b3cb[_0x206e88(0x272)][_0x206e88(0x699)]('.lt-end-session-btn'),_0x48ba48=_0x11b3cb[_0x206e88(0x272)][_0x206e88(0x699)](_0x206e88(0x9b8));if(_0x4710cb)_0x584b6c();else{if(_0x48ba48){const _0x3baa6e=_0x48ba48[_0x206e88(0x699)](_0x206e88(0xe08)),_0x23901a=_0x48ba48[_0x206e88(0x63f)]['songId'],_0x1dafea=parseInt(_0x3baa6e[_0x206e88(0x63f)]['historyIndex'],0xa);_0x31526f(_0x23901a,_0x1dafea,_0x40c8c6);}else{if(_0x206e88(0x93f)===_0x206e88(0x93f)){const _0x2fa396=_0x1d801f();_0x2fa396&&_0x2fa396[_0x206e88(0x74a)]&&_0x2fa396[_0x206e88(0x74a)][_0x206e88(0x976)]&&(_0xfcf32c['style'][_0x206e88(0xc66)]=_0x206e88(0xe12),setTimeout(()=>_0xfcf32c[_0x206e88(0x555)][_0x206e88(0x1cd)]('show'),0xa));}else _0x2317ad[_0x206e88(0x101)]='❚❚';}}return;}else!_0x7bf98b&&(_0x51281b=_0x1cb0dd[_0x206e88(0x8f1)](_0x206e88(0xce2)),_0xcd351b['id']='feed-loader',_0x4ba85b[_0x206e88(0x5b8)](_0x177bbb)),_0x5bc2ce[_0x206e88(0xa73)]=_0x206e88(0x614)+_0x57ff50+'</span>',_0x419f28[_0x206e88(0x329)][_0x206e88(0xc66)]='flex';}if(window['getSelection']()['toString']())return;const _0x397712=_0x11b3cb['target'][_0x206e88(0x699)](_0x206e88(0xe08));if(_0x397712&&!_0x11b3cb[_0x206e88(0x272)][_0x206e88(0x699)](_0x206e88(0x74b))){const _0x56d694=parseInt(_0x397712[_0x206e88(0x63f)]['historyIndex'],0xa);!isNaN(_0x56d694)&&_0x590908(_0x56d694);}}else return _0x26a674[_0x206e88(0x27f)]('Noir\x27s\x20Decoder:\x20fixed\x20或\x20prompted\x20类型的指令缺少内容。'),null;});const _0x2f788c=document[_0x50976b(0x1d6)](_0x50976b(0x8df));if(_0x2f788c){if(_0x50976b(0xbb3)===_0x50976b(0x20a))return{'type':_0x50976b(0xbf0),'songName':_0xea667d[0x1]['trim'](),'artist':_0x50f62b[0x2][_0x50976b(0xcd2)]()};else _0x2f788c[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x53c83e=_0x50976b;_0x21d6ce(_0x53c83e(0xc9c));});}const _0x2d31ea=document[_0x50976b(0x1d6)](_0x50976b(0xf00)),_0x5a112a=localStorage[_0x50976b(0x443)](_0x50976b(0x405));if(_0x5a112a){if(_0x50976b(0x3ef)!==_0x50976b(0xb13))try{const _0x570221=JSON[_0x50976b(0xc44)](_0x5a112a);Array[_0x50976b(0xca5)](_0x570221)&&(_0x50976b(0xdef)===_0x50976b(0xdef)?_0x2d31ea[_0x50976b(0xee2)]=_0x570221[_0x50976b(0x266)](_0x266607=>_0x266607[_0x50976b(0xb95)]+'--'+_0x266607['url'])['join']('\x0a'):(_0x2e3aa0[_0x50976b(0x8b2)][_0x50976b(0x22f)](_0x94ea8c,0x1),_0x36d839(),_0x116804(),_0x1e6267(),_0x45e7ec(),_0x32ec63('已经删掉了。')));}catch(_0x4fedaf){}else{const _0x34988c=_0x1deea0[_0x50976b(0xb63)][_0x2c908c];if(!_0x34988c||_0x34988c[_0x50976b(0x1e2)]===0x0)return'';const _0x10938f=_0x34988c[_0x50976b(0x8b8)](0x0,0x3),_0x23affe=_0x10938f[_0x50976b(0x266)]((_0x18f6a6,_0x2011ff)=>{const _0x463a20=_0x50976b,_0x1b3c8e=_0x18f6a6[_0x463a20(0x4dc)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x463a20(0x7e8),_0x4398ad=(_0x18f6a6[_0x463a20(0x4dc)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x463a20(0xc12)]('\x0a')[_0x463a20(0x266)](_0x562cb5=>_0x562cb5['trim']())[_0x463a20(0xeb3)](_0x2e9753=>_0x2e9753[_0x463a20(0xb91)]('-'))['join']('\x20');return _0x463a20(0xa0f)+(_0x2011ff+0x1)+_0x463a20(0x2f4)+_0x1b3c8e+_0x463a20(0xce6)+_0x4398ad;})[_0x50976b(0xd9a)]('\x0a');return'\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a'+_0x23affe;}}document['getElementById']('save-custom-stickers-button')[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0xf2db70=_0x50976b,_0x510b70=_0x2d31ea['value'],_0x180714=_0x510b70[_0xf2db70(0xc12)]('\x0a')[_0xf2db70(0xeb3)](_0x1e86f8=>_0x1e86f8[_0xf2db70(0xcd2)]()!==''),_0x165faa=[];let _0x32ec99=0x0;for(const _0x364577 of _0x180714){const _0x276b87=_0x364577[_0xf2db70(0xc12)]('--');_0x276b87[_0xf2db70(0x1e2)]===0x2&&_0x276b87[0x0]['trim']()&&_0x276b87[0x1]['trim']()['startsWith'](_0xf2db70(0x3b2))?_0x165faa[_0xf2db70(0xb66)]({'name':_0x276b87[0x0][_0xf2db70(0xcd2)](),'url':_0x276b87[0x1]['trim']()}):_0xf2db70(0x5e7)!==_0xf2db70(0x5e7)?(_0x405abc(),_0x5e2eeb(_0xf2db70(0x125),_0xf2db70(0x410))):_0x32ec99++;}if(_0x32ec99>0x0){if('kiAeq'!=='kiAeq'){const _0x539486=_0x441b22(_0x240a04[_0xf2db70(0x41b)][0x0]);_0x539486?(!_0x2e25df&&(_0x1718ee=_0x539486[_0xf2db70(0x584)]||_0x509f4a),_0x5078a2=_0x539486[_0xf2db70(0xb95)]||_0xf2db70(0xb76),_0x4d1ee7=_0x539486['remark']||'私聊'):(_0x49312b=_0xf2db70(0x842),_0x4e71a1='错误：找不到角色');}else _0x21d6ce('有\x20'+_0x32ec99+_0xf2db70(0x2ba));}try{localStorage[_0xf2db70(0xa54)](_0xf2db70(0x405),JSON['stringify'](_0x165faa)),_0x21d6ce(_0xf2db70(0x80f)),setTimeout(()=>location['reload'](),0x5dc);}catch(_0x522372){_0x21d6ce('保存失败，你的表情包是不是太多了？');}}),_0x232da1(),_0x1c3b21(),document[_0x50976b(0x1d6)](_0x50976b(0x712))[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x137a40(_0x50976b(0xf03),_0x50976b(0xb63))),document[_0x50976b(0x1d6)](_0x50976b(0xb03))[_0x50976b(0x3a0)]('click',()=>_0x137a40('livestreamReplays',_0x50976b(0xc8f)));const _0x44d0af=document[_0x50976b(0x1d6)](_0x50976b(0x13a)),_0x304670=document[_0x50976b(0x1d6)](_0x50976b(0x352)),_0x40eda3=document[_0x50976b(0x1d6)](_0x50976b(0x9c3));_0x44d0af&&_0x44d0af[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x4accac=_0x50976b;_0x3242a5[_0x4accac(0xcab)]&&(_0x3242a5[_0x4accac(0xc2a)]?_0x3242a5[_0x4accac(0xe7f)]():_0x4accac(0xf9)===_0x4accac(0xf9)?_0x3242a5[_0x4accac(0x57a)]():_0x5bfdab[_0x4accac(0xb66)](_0x1e5d0f));});_0x304670&&_0x304670[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0xacd577=_0x50976b;if(_0xdfbfac[_0xacd577(0xddd)]['length']===0x0)return;_0xdfbfac[_0xacd577(0x55e)]=(_0xdfbfac[_0xacd577(0x55e)]+0x1)%_0xdfbfac[_0xacd577(0xddd)][_0xacd577(0x1e2)];const _0x6504dc=_0xdfbfac[_0xacd577(0xddd)][_0xdfbfac[_0xacd577(0x55e)]]['id'];_0x62eb15(_0x6504dc,_0xdfbfac[_0xacd577(0xddd)]['map'](_0x5bbd3c=>_0x5bbd3c['id']));});_0x40eda3&&(_0x50976b(0x164)===_0x50976b(0x164)?_0x40eda3[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x1b4fdd=_0x50976b;if(_0x1b4fdd(0x471)!=='aIAtj'){const _0x257df7=_0x36305f[_0x1b4fdd(0x4dc)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x1b4fdd(0x7e8),_0x368eda=(_0x49b343[_0x1b4fdd(0x4dc)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x1b4fdd(0xc12)]('\x0a')[_0x1b4fdd(0x266)](_0x21277a=>_0x21277a[_0x1b4fdd(0xcd2)]())['filter'](_0x660497=>_0x660497[_0x1b4fdd(0xb91)]('-'))['join']('\x20');return'-\x20上次第\x20'+(_0x1e2e26+0x1)+'\x20场直播的主题是“'+_0x257df7+_0x1b4fdd(0xce6)+_0x368eda;}else{if(_0xdfbfac[_0x1b4fdd(0xddd)][_0x1b4fdd(0x1e2)]===0x0)return;_0xdfbfac[_0x1b4fdd(0x55e)]=(_0xdfbfac['currentlyPlayingIndex']-0x1+_0xdfbfac[_0x1b4fdd(0xddd)][_0x1b4fdd(0x1e2)])%_0xdfbfac[_0x1b4fdd(0xddd)][_0x1b4fdd(0x1e2)];const _0x2d48b2=_0xdfbfac['musicPlaylist'][_0xdfbfac[_0x1b4fdd(0x55e)]]['id'];_0x62eb15(_0x2d48b2,_0xdfbfac[_0x1b4fdd(0xddd)][_0x1b4fdd(0x266)](_0x1ce79b=>_0x1ce79b['id']));}}):_0x80265f=_0x2c5112['value']);document[_0x50976b(0x1d6)](_0x50976b(0x4bd))[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x1386a1=_0x50976b;document['getElementById'](_0x1386a1(0x7b8))[_0x1386a1(0x288)]();}),document[_0x50976b(0x1d6)](_0x50976b(0x4a8))[_0x50976b(0x3a0)](_0x50976b(0x288),async()=>{const _0x31e2b2=_0x50976b;if(_0x31e2b2(0x387)===_0x31e2b2(0xf02)){const _0x5f59c0=_0x12b9e8[_0x31e2b2(0x30b)]?.['triggers']?.['正面']||[],_0x2a24d7=_0x359ecb[_0x31e2b2(0x30b)]?.[_0x31e2b2(0xb31)]?.['负面']||[];if(_0x5f59c0[_0x31e2b2(0x1e2)]>0x0||_0x2a24d7[_0x31e2b2(0x1e2)]>0x0){const _0x42370c=[];if(_0x5f59c0[_0x31e2b2(0x1e2)]>0x0)_0x42370c['push']('开心于'+_0x5f59c0[0x0]);if(_0x2a24d7['length']>0x0)_0x42370c[_0x31e2b2(0xb66)]('在意'+_0x2a24d7[0x0]);_0x16442b['push']('情绪:\x20'+_0x42370c[_0x31e2b2(0xd9a)]('，'));}}else await _0x26b00b(_0x31e2b2(0x9bd)),localStorage[_0x31e2b2(0x287)]('cardState2'),_0x392c0f(),_0x21d6ce(_0x31e2b2(0xdcc));}),document[_0x50976b(0x1d6)](_0x50976b(0x7b8))[_0x50976b(0x3a0)](_0x50976b(0xef8),async _0x4d83cf=>{const _0x14ad00=_0x50976b,_0x17f681=_0x4d83cf[_0x14ad00(0x272)][_0x14ad00(0x6d4)][0x0];if(!_0x17f681)return;try{if('eHQYH'!==_0x14ad00(0x14a)){const _0x142b86=_0xbb86f4['folder']('music/'+_0x83f9f1['id']);_0x142b86[_0x14ad00(0xd6c)](_0x14ad00(0x1f6),_0x2ecada[_0x14ad00(0xea5)](_0xfcc352[_0x14ad00(0x3d2)]));if(_0x4ec724[_0x14ad00(0xe3c)])_0x142b86[_0x14ad00(0xd6c)]('audio',_0x116414[_0x14ad00(0xe3c)]);if(_0x5bddaa[_0x14ad00(0x267)])_0x142b86['file'](_0x14ad00(0x267),_0x409505['cover']);if(_0x1807e5[_0x14ad00(0x901)])_0x142b86[_0x14ad00(0xd6c)](_0x14ad00(0xe03),_0x27266e[_0x14ad00(0x901)]);}else await _0x510f28(_0x14ad00(0x9bd),_0x17f681),await _0x392c0f(),_0x21d6ce(_0x14ad00(0x4c7));}catch(_0x12f1a7){_0x21d6ce(_0x14ad00(0x693)+_0x12f1a7[_0x14ad00(0x8ac)]);}}),_0x3048f2(),_0x34ff24(),_0x26221e(),document['getElementById'](_0x50976b(0x6b9))[_0x50976b(0x3a0)]('click',async()=>{const _0x2daea7=_0x50976b,_0x11e8be=await _0x13215d('【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！');if(_0x11e8be){const _0x20bb4c=await _0x13215d('最后一次确认，真的要清空所有数据吗？');if(_0x20bb4c){_0x1a8bbc(!![],_0x2daea7(0x494));try{if('EhwtS'==='EhwtS'){localStorage[_0x2daea7(0x379)]();const _0x31e105=await _0x348abc,_0x278144=_0x31e105[_0x2daea7(0x314)](['images',_0x2daea7(0xa72),_0x2daea7(0xaed)],'readwrite');await Promise[_0x2daea7(0x7c7)]([_0x278144['objectStore'](_0x2daea7(0xa0d))[_0x2daea7(0x379)](),_0x278144[_0x2daea7(0xa49)](_0x2daea7(0xa72))['clear'](),_0x278144['objectStore'](_0x2daea7(0xaed))[_0x2daea7(0x379)]()]),await new Promise(_0x1c566f=>{const _0xa0ff1e=_0x2daea7;_0xa0ff1e(0x105)===_0xa0ff1e(0x105)?_0x278144[_0xa0ff1e(0xcd7)]=_0x1c566f:_0x288103=_0xa0ff1e(0xad5)+_0x5c017d+_0xa0ff1e(0x290);}),_0x21d6ce('净化完成！应用即将重启。'),setTimeout(()=>{const _0x45d2a1=_0x2daea7;if(_0x45d2a1(0xdc2)!==_0x45d2a1(0xc1e))location[_0x45d2a1(0x28d)]();else{const _0x3f2480=_0x441408[_0x45d2a1(0x272)][_0x45d2a1(0xd29)];_0x3232c4[_0x45d2a1(0x7ec)]('Upgrading\x20database\x20to\x20version\x20'+_0x3f2480[_0x45d2a1(0x72b)]+_0x45d2a1(0xd45)),!_0x3f2480[_0x45d2a1(0x3f1)]['contains'](_0xb7af6c)&&(_0xfd2f4c[_0x45d2a1(0x7ec)](_0x45d2a1(0x51a)+_0x37d1d6),_0x3f2480[_0x45d2a1(0x677)](_0x18e5d5,{'keyPath':'id'})),!_0x3f2480[_0x45d2a1(0x3f1)][_0x45d2a1(0xcbc)]('music_library')&&(_0x2c44e8['log'](_0x45d2a1(0x9e6)),_0x3f2480[_0x45d2a1(0x677)](_0x45d2a1(0xa72),{'keyPath':'id'})),!_0x3f2480[_0x45d2a1(0x3f1)][_0x45d2a1(0xcbc)](_0x4601f2)&&(_0x369d51[_0x45d2a1(0x7ec)]('Creating\x20object\x20store:\x20'+_0x21b1c8),_0x3f2480[_0x45d2a1(0x677)](_0x48e45b,{'keyPath':'id'}));}},0x5dc);}else return _0x391876(_0x46e09d)[_0x2daea7(0x94f)](_0x4d9194=>_0x4d9194[_0x2daea7(0xc4a)]());}catch(_0x361884){_0x1a8bbc(![]),_0x21d6ce(_0x2daea7(0x9dd)+_0x361884[_0x2daea7(0x8ac)]);}}}});const _0x16fd85=document[_0x50976b(0xb6c)](_0x50976b(0xf5));if(_0x16fd85){const _0x3e0460=document['createElement']('div');_0x3e0460['id']=_0x50976b(0x5d0),_0x3e0460[_0x50976b(0x101)]=_0x50976b(0x7e5),Object[_0x50976b(0x24a)](_0x3e0460[_0x50976b(0x329)],{'position':_0x50976b(0xda0),'top':_0x50976b(0x547),'right':'20px','fontSize':_0x50976b(0xb4d),'lineHeight':'1.4','color':_0x50976b(0xaaf),'opacity':_0x50976b(0xe4c),'cursor':_0x50976b(0x946),'zIndex':'1','transition':_0x50976b(0x180),'whiteSpace':_0x50976b(0x9eb),'textAlign':_0x50976b(0x489)}),_0x3e0460[_0x50976b(0x943)]=()=>{const _0x332ed2=_0x50976b;_0x332ed2(0xae5)!==_0x332ed2(0x6a8)?_0x3e0460['style']['opacity']='1':_0x310095(_0x332ed2(0xd06)+_0x2757d7['message']+_0x332ed2(0x3d8));},_0x3e0460[_0x50976b(0x72d)]=()=>{const _0x56d379=_0x50976b;_0x3e0460[_0x56d379(0x329)][_0x56d379(0x990)]=_0x56d379(0xe4c);},_0x3e0460[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x4cbdec=_0x50976b;window[_0x4cbdec(0x9dc)](_0x4cbdec(0x22d),_0x4cbdec(0x684));}),_0x16fd85['style'][_0x50976b(0x38b)]=_0x50976b(0x340),_0x16fd85[_0x50976b(0xed3)](_0x3e0460);}_0x23d942(),_0x4be1b7();const _0x328485=document['getElementById']('import-altar-screen');if(_0x328485){_0xf20f3c[_0x50976b(0xc74)]=_0x328485;const _0x1a3fef=document[_0x50976b(0x1d6)](_0x50976b(0x79e));_0x1a3fef[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x137a40(_0x50976b(0x4b1),_0x50976b(0xc74)));const _0xc397c=document[_0x50976b(0x1d6)]('altar-slot-json'),_0x447282=document[_0x50976b(0x1d6)](_0x50976b(0x3af)),_0x3bba0f=document[_0x50976b(0x1d6)](_0x50976b(0x940)),_0x4c92fb=document[_0x50976b(0x1d6)](_0x50976b(0x6f4)),_0x41dd71=document[_0x50976b(0x1d6)](_0x50976b(0x6d2)),_0x405032=document[_0x50976b(0x1d6)](_0x50976b(0xb77)),_0x1ab770=document[_0x50976b(0x1d6)]('confirm-altar-import-button');let _0x3eb34d=null,_0x59968b=null,_0x30b648=null;_0xc397c['addEventListener'](_0x50976b(0x288),()=>_0x4c92fb[_0x50976b(0x288)]()),_0x447282[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x41dd71[_0x50976b(0x288)]()),_0x3bba0f[_0x50976b(0x3a0)](_0x50976b(0x288),()=>_0x405032[_0x50976b(0x288)]());const _0x1c282a=(_0x5256e9,_0x22b805)=>{const _0x1863cb=_0x50976b;_0x5256e9&&(_0x22b805[_0x1863cb(0x555)]['add']('filled'),_0x22b805['querySelector'](_0x1863cb(0x152))[_0x1863cb(0x101)]=_0x5256e9['name']);};_0x4c92fb[_0x50976b(0x3a0)](_0x50976b(0xef8),_0x3fef47=>{const _0x337664=_0x50976b;if(_0x337664(0x254)!==_0x337664(0x4fa))_0x3eb34d=_0x3fef47[_0x337664(0x272)]['files'][0x0],_0x1c282a(_0x3eb34d,_0xc397c),_0x1ab770['disabled']=!_0x3eb34d;else{_0x277095[_0x337664(0xee2)]='',_0x361c6b[_0x337664(0xa73)]='';if(_0x58afa6[_0x337664(0x94d)][_0x337664(0x1e2)]<0x2){_0x1342ce(_0x337664(0x45a));return;}_0x5e8a94[_0x337664(0x94d)][_0x337664(0xb85)](_0x40a84f=>{const _0x16d428=_0x337664,_0xdac387=_0x212e7a[_0x16d428(0x8f1)]('li');_0xdac387[_0x16d428(0x213)]=_0x16d428(0x33d),_0xdac387[_0x16d428(0xa73)]=_0x16d428(0x5e9)+_0x40a84f['id']+_0x16d428(0x957)+_0x40a84f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x40a84f[_0x16d428(0x584)]||_0x1106b7)+_0x16d428(0x841)+_0x40a84f['id']+'\x22\x20class=\x22char-name\x22>'+_0x40a84f[_0x16d428(0xb95)]+_0x16d428(0x2ea),_0x2dac3c[_0x16d428(0x5b8)](_0xdac387);}),_0x1bb91c('groupChatCreate',_0x337664(0xd2d));}}),_0x41dd71[_0x50976b(0x3a0)](_0x50976b(0xef8),_0x3ecf56=>{const _0x5e7037=_0x50976b;_0x59968b=_0x3ecf56['target'][_0x5e7037(0x6d4)][0x0],_0x1c282a(_0x59968b,_0x447282);}),_0x405032[_0x50976b(0x3a0)](_0x50976b(0xef8),_0x4444b8=>{const _0x58831a=_0x50976b;'TCyFg'===_0x58831a(0x46e)?_0x447219(_0xfd94f6):(_0x30b648=_0x4444b8[_0x58831a(0x272)][_0x58831a(0x6d4)][0x0],_0x1c282a(_0x30b648,_0x3bba0f));}),_0x1ab770['addEventListener'](_0x50976b(0x288),async()=>{const _0x824a3a=_0x50976b;if(_0x824a3a(0x896)==='MFySA'){const _0x3b9f98=_0x22e389[_0x824a3a(0x5ee)][_0x824a3a(0x266)](_0x37d1eb=>_0x2c00aa['worldBooks'][_0x824a3a(0x76b)](_0x31d000=>_0x31d000['id']===_0x37d1eb))[_0x824a3a(0xeb3)](_0x1d3a2b)[_0x824a3a(0x266)](_0x39bfa2=>_0x824a3a(0x820)+_0x39bfa2[_0x824a3a(0xb95)]+'\x0a'+_0x39bfa2[_0x824a3a(0xee)])[_0x824a3a(0xd9a)]('');_0x3b9f98&&(_0x32fd63=_0x824a3a(0x4f0)+_0x3b9f98);}else{if(!_0x3eb34d){_0x21d6ce(_0x824a3a(0x872));return;}const _0x410230=await _0x13215d(_0x824a3a(0xf12));if(!_0x410230)return;_0x1a8bbc(!![],'正在准备时空道标...');try{_0x1a8bbc(!![],_0x824a3a(0xa35));const _0x40a82c=await _0x3eb34d['text']();console['log'](_0x824a3a(0xbf8),_0x40a82c[_0x824a3a(0x1e2)],'字符');const _0x24de97=JSON['parse'](_0x40a82c);console[_0x824a3a(0x7ec)](_0x824a3a(0xbbf),Object['keys'](_0x24de97)),console[_0x824a3a(0x7ec)]('[Import\x20Altar]\x20是否包含\x20localStorageData:',_0x824a3a(0xc7b)in _0x24de97);let _0x21b1bf=[],_0x44f040=[],_0x4c286a=[];const _0x3ddc5b='preferencesData'in _0x24de97;console['log']('[Import\x20Altar]\x20备份格式判断:',_0x3ddc5b?_0x824a3a(0x5d4):_0x824a3a(0x873)),console[_0x824a3a(0x7ec)](_0x824a3a(0x7f2),_0x24de97[_0x824a3a(0x71b)]);if(!_0x3ddc5b&&_0x24de97[_0x824a3a(0xc7b)]){for(const _0x2b4cb4 in _0x24de97[_0x824a3a(0x59b)]){const _0x364ba1=await _0x2b279d(_0x24de97[_0x824a3a(0x59b)][_0x2b4cb4]);_0x21b1bf[_0x824a3a(0xb66)]({'id':_0x2b4cb4,'blob':_0x364ba1});}for(const _0x581c60 of _0x24de97['indexedDBMusicData']||[]){if(_0x824a3a(0x12a)!==_0x824a3a(0x12a))_0x5ee8b6&&_0x4657ed[_0x824a3a(0x288)]();else{const _0x37b924={..._0x581c60};if(_0x581c60[_0x824a3a(0xe3c)])_0x37b924[_0x824a3a(0xe3c)]=await _0x2b279d(_0x581c60['audio']);if(_0x581c60[_0x824a3a(0x267)])_0x37b924[_0x824a3a(0x267)]=await _0x2b279d(_0x581c60[_0x824a3a(0x267)]);_0x44f040[_0x824a3a(0xb66)](_0x37b924);}}_0x4c286a=_0x24de97[_0x824a3a(0x611)]||[];}else{console[_0x824a3a(0x7ec)]('[Import\x20Altar]\x20处理新格式备份（三文件）');if(_0x59968b){if(_0x824a3a(0xceb)===_0x824a3a(0x3ed)){const _0x1d4acd=_0x30e5a7[_0x824a3a(0x314)](_0x55434f,_0x824a3a(0xece)),_0x3e3fd8=_0x1d4acd[_0x824a3a(0xa49)](_0x41e265),_0x53ee8f=_0x3e3fd8[_0x824a3a(0x2df)]({'id':_0x4da472,'data':_0x172b4f});_0x53ee8f[_0x824a3a(0xdab)]=()=>_0x4eddfa(),_0x53ee8f['onerror']=()=>_0x14c23a(_0x53ee8f[_0x824a3a(0x27f)]);}else{console[_0x824a3a(0x7ec)](_0x824a3a(0x4cb));const _0x4d9878=await JSZip[_0x824a3a(0x9fa)](_0x59968b);for(const _0x10834a in _0x4d9878[_0x824a3a(0x6d4)]){if(_0x10834a['startsWith']('images/')){const _0x34cbdc=_0x4d9878[_0x824a3a(0x6d4)][_0x10834a],_0x556ed2=await _0x34cbdc[_0x824a3a(0x692)](_0x824a3a(0xc4a));_0x21b1bf[_0x824a3a(0xb66)]({'id':_0x10834a['replace'](_0x824a3a(0xcfe),''),'blob':_0x556ed2});}}}}if(_0x30b648){const _0x4b0aa1=await JSZip[_0x824a3a(0x9fa)](_0x30b648),_0x320d30={};for(const _0x20fe61 in _0x4b0aa1[_0x824a3a(0x6d4)]){if(_0x20fe61[_0x824a3a(0xb91)]('music/')){if(_0x824a3a(0xd23)!==_0x824a3a(0x433)){const _0x432b00=_0x4b0aa1[_0x824a3a(0x6d4)][_0x20fe61],_0x5cf079=_0x20fe61['split']('/');if(_0x5cf079['length']>=0x3){if(_0x824a3a(0x20f)!==_0x824a3a(0x1ac)){const _0x420ef8=_0x5cf079[0x1];if(!_0x320d30[_0x420ef8])_0x320d30[_0x420ef8]={'id':_0x420ef8};const _0x4ee479=_0x5cf079[0x2];if(_0x4ee479===_0x824a3a(0x1f6))_0x320d30[_0x420ef8][_0x824a3a(0x3d2)]=JSON[_0x824a3a(0xc44)](await _0x432b00[_0x824a3a(0x692)]('string'));else{if(_0x4ee479===_0x824a3a(0xe3c))_0x320d30[_0x420ef8]['audio']=await _0x432b00['async'](_0x824a3a(0xc4a));else{if(_0x4ee479===_0x824a3a(0x267))_0x320d30[_0x420ef8][_0x824a3a(0x267)]=await _0x432b00[_0x824a3a(0x692)]('blob');else{if(_0x4ee479===_0x824a3a(0xe03))_0x320d30[_0x420ef8]['lyrics']=await _0x432b00['async'](_0x824a3a(0x193));}}}}else _0x21ab74[_0x824a3a(0xe7d)]=_0x468a34[_0x824a3a(0xe7d)][_0x824a3a(0xeb3)](_0x356bbc=>_0x356bbc['id']!==_0x220f89),_0x408c29['characters'][_0x824a3a(0xb85)](_0x2699d7=>{const _0x29c471=_0x824a3a;_0x2699d7['linkedWorldBookIds']&&(_0x2699d7[_0x29c471(0x5ee)]=_0x2699d7[_0x29c471(0x5ee)][_0x29c471(0xeb3)](_0x2c6bcd=>_0x2c6bcd!==_0x177cf0));}),_0xddc27a(),_0x34b293(_0x824a3a(0x3b5)),_0x5d3d8c(),_0x31a1b3(_0x824a3a(0x128),_0x824a3a(0x222));}}else return new _0x8a46f5(_0x19e30a=>{const _0x14d120=_0x824a3a,_0x33fdaf=_0x14d120(0x56c);_0x3d4c15['body']['insertAdjacentHTML'](_0x14d120(0x439),_0x33fdaf);const _0x4fda7a=_0x5a4b3a[_0x14d120(0x1d6)](_0x14d120(0x65a)),_0x2f0e3f=_0x39e015['getElementById'](_0x14d120(0x63b)),_0x83b088=_0x1cfad9['getElementById'](_0x14d120(0x4a7)),_0x3959ae=_0x55cb1d['getElementById'](_0x14d120(0x742)),_0x71605=_0x4fda7a[_0x14d120(0xb6c)]('.choice-modal-backdrop'),_0x1c7f12=()=>{const _0x2bfe19=_0x14d120;_0x4fda7a[_0x2bfe19(0x9ad)](),_0x19e30a();};_0x83b088[_0x14d120(0x4a1)]=()=>{const _0x3012aa=_0x14d120;_0x135d31(_0x2f0e3f[_0x3012aa(0xee2)]),_0x1c7f12();},_0x3959ae[_0x14d120(0x4a1)]=_0x1c7f12,_0x71605[_0x14d120(0x4a1)]=_0x1c7f12;});}}_0x44f040=Object['values'](_0x320d30);const _0xc5593=_0x4b0aa1[_0x824a3a(0xd6c)](_0x824a3a(0xc41));if(_0xc5593)_0x4c286a=JSON[_0x824a3a(0xc44)](await _0xc5593[_0x824a3a(0x692)]('string'));}}_0x1a8bbc(!![],_0x824a3a(0x72a)),localStorage['clear']();const _0x48a861=await _0x348abc,_0x2283ac=_0x48a861[_0x824a3a(0x314)]([_0x824a3a(0xa0d),_0x824a3a(0xa72),_0x824a3a(0xaed)],_0x824a3a(0xece));await Promise['all']([_0x2283ac[_0x824a3a(0xa49)](_0x824a3a(0xa0d))['clear'](),_0x2283ac['objectStore'](_0x824a3a(0xa72))[_0x824a3a(0x379)](),_0x2283ac[_0x824a3a(0xa49)](_0x824a3a(0xaed))['clear']()]),await new Promise(_0x316908=>_0x2283ac[_0x824a3a(0xcd7)]=_0x316908),_0x1a8bbc(!![],_0x824a3a(0x707));const _0x452885=_0x24de97[_0x824a3a(0xc7b)]?_0x24de97[_0x824a3a(0xc7b)]:_0x24de97;for(const _0x4b42f2 in _0x452885){if(_0x824a3a(0x145)===_0x824a3a(0x215)){const _0x50909b=_0x278c88[_0x824a3a(0x798)]||_0x824a3a(0x7f4);return!_0x32ab86[_0x50909b]&&(_0x548ce0[_0x50909b]=[]),_0x1632ec[_0x50909b]['push'](_0xade610),_0x450710;}else localStorage[_0x824a3a(0xa54)](_0x4b42f2,_0x452885[_0x4b42f2]);}if(_0x24de97[_0x824a3a(0xd27)]&&typeof Capacitor!==_0x824a3a(0x77c)&&Capacitor['isNativePlatform']()){if(_0x824a3a(0x65d)===_0x824a3a(0x65d)){_0x1a8bbc(!![],_0x824a3a(0x86f));try{let _0x5bf30e=0x0;for(const _0x140d29 in _0x24de97[_0x824a3a(0xd27)]){await Capacitor[_0x824a3a(0x248)]['Preferences']['set']({'key':_0x140d29,'value':_0x24de97['preferencesData'][_0x140d29]}),_0x5bf30e++;}console['log']('成功恢复\x20'+_0x5bf30e+_0x824a3a(0x47d));}catch(_0xb061d){'xPSoa'===_0x824a3a(0x355)?console[_0x824a3a(0x27f)](_0x824a3a(0xac4),_0xb061d):_0x5a8828[_0x824a3a(0xcab)]='';}}else{_0x2a7508(_0x824a3a(0xacc));return;}}const _0x4bdbe1=_0x48a861[_0x824a3a(0x314)]([_0x824a3a(0xa0d),'music_library','snoop_cache'],_0x824a3a(0xece)),_0x18e712=[];for(const _0x14a010 of _0x21b1bf){'xciQJ'!==_0x824a3a(0xf0)?(_0x174cb1(),_0x48c329(!![])):_0x18e712[_0x824a3a(0xb66)](_0x4bdbe1['objectStore'](_0x824a3a(0xa0d))[_0x824a3a(0x2df)](_0x14a010));}for(const _0x57a3fc of _0x44f040){_0x824a3a(0xb7e)!==_0x824a3a(0xb7e)?_0x2991b1[_0x824a3a(0x3a0)](_0x824a3a(0x288),()=>{const _0x3b1c66=_0x824a3a;if(_0x478e89['musicPlaylist'][_0x3b1c66(0x1e2)]===0x0)return;_0x9f1a17[_0x3b1c66(0x55e)]=(_0x1974e0[_0x3b1c66(0x55e)]+0x1)%_0x3d6ea8[_0x3b1c66(0xddd)]['length'];const _0x16b09b=_0x4e55e3['musicPlaylist'][_0x47ab3a[_0x3b1c66(0x55e)]]['id'];_0x9ace16(_0x16b09b,_0x57db17[_0x3b1c66(0xddd)][_0x3b1c66(0x266)](_0x268a99=>_0x268a99['id']));}):_0x18e712[_0x824a3a(0xb66)](_0x4bdbe1['objectStore'](_0x824a3a(0xa72))[_0x824a3a(0x2df)](_0x57a3fc));}for(const _0x59c9cf of _0x4c286a){_0x18e712['push'](_0x4bdbe1[_0x824a3a(0xa49)](_0x824a3a(0xaed))[_0x824a3a(0x2df)](_0x59c9cf));}console[_0x824a3a(0x7ec)]('准备写入\x20'+_0x21b1bf['length']+_0x824a3a(0x487)+_0x44f040['length']+'\x20首音乐,\x20'+_0x4c286a[_0x824a3a(0x1e2)]+_0x824a3a(0x3c8)),await new Promise((_0x542a17,_0x35796c)=>{const _0x2d7058=_0x824a3a;_0x4bdbe1[_0x2d7058(0xcd7)]=_0x542a17,_0x4bdbe1[_0x2d7058(0x514)]=_0x35796c;}),_0x1a8bbc(![]),_0x21d6ce(_0x824a3a(0x15b)),setTimeout(()=>location[_0x824a3a(0x28d)](),0x5dc);}catch(_0x345bcd){_0x1a8bbc(![]),console['error'](_0x824a3a(0x68c),_0x345bcd),_0x21d6ce(_0x824a3a(0x2ce)+_0x345bcd[_0x824a3a(0x8ac)]);}}});}function _0x5c58f1(){const _0x140eec=_0x50976b,_0x2805d5=document[_0x140eec(0x1d6)]('livestream-list-container');_0x2805d5[_0x140eec(0xa73)]='';const _0x5b7df9=_0xdfbfac[_0x140eec(0x94d)]['filter'](_0x1e8b33=>_0xdfbfac['chats'][_0x140eec(0x7d1)](_0x27b142=>_0x27b142['type']===_0x140eec(0xcef)&&_0x27b142[_0x140eec(0x41b)][_0x140eec(0xc35)](_0x1e8b33['id'])));if(_0x5b7df9['length']===0x0){if(_0x140eec(0xa91)==='SiVSC'){_0x2805d5['innerHTML']=_0x140eec(0xeca);return;}else{const _0x55a70e=_0x5ae8f8[_0x140eec(0x1d6)](_0x140eec(0xcb0));_0x55a70e&&(_0x55a70e['classList'][_0x140eec(0x9ad)](_0x140eec(0xc64)),_0x55a70e[_0x140eec(0x329)][_0x140eec(0x71d)]='',_0x55a70e['style'][_0x140eec(0x990)]='');}}_0x5b7df9[_0x140eec(0xb85)](_0x3af133=>{const _0x59167d=_0x140eec,_0x40b9cc=document['createElement']('li');_0x40b9cc[_0x59167d(0x213)]=_0x59167d(0x9f1),_0x40b9cc[_0x59167d(0x63f)][_0x59167d(0xe9)]=_0x3af133['id'],_0x40b9cc[_0x59167d(0xa73)]=_0x59167d(0x900)+(_0x3af133['avatar']||_0x1af29b)+_0x59167d(0x16a)+_0x3af133[_0x59167d(0xb95)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x40b9cc[_0x59167d(0x3a0)](_0x59167d(0x288),()=>{_0x56a1fb(_0x3af133['id']);}),_0x2805d5[_0x59167d(0x5b8)](_0x40b9cc);});}async function _0x56a1fb(_0x7a287e){const _0x55a5ca=_0x50976b;if(_0x55a5ca(0x393)!==_0x55a5ca(0x393))_0x3c85f1(_0x55a5ca(0x845)+_0x56d543[_0x55a5ca(0x8ac)]);else{const _0x396063=_0x5844c7(_0x7a287e);if(!_0x396063)return;_0xdfbfac[_0x55a5ca(0x2bb)]=_0x7a287e,document[_0x55a5ca(0x1d6)](_0x55a5ca(0xd7c))[_0x55a5ca(0x101)]=_0x396063[_0x55a5ca(0xb95)]+_0x55a5ca(0x774),_0x137a40(_0x55a5ca(0xf03),'livestreamList');const _0x2eede2=document[_0x55a5ca(0x1d6)](_0x55a5ca(0xafa)),_0x47bdcb=document['getElementById']('livestream-danmaku-overlay'),_0x2b11d4=document[_0x55a5ca(0x1d6)]('livestream-text');_0x2eede2[_0x55a5ca(0x329)][_0x55a5ca(0x5b7)]='',document[_0x55a5ca(0x1d6)](_0x55a5ca(0x18a))['src']='',_0x47bdcb[_0x55a5ca(0xa73)]='',_0x2b11d4[_0x55a5ca(0x101)]=_0x55a5ca(0xd45);let _0x270f67=null;try{const _0x3d4e91=localStorage[_0x55a5ca(0x443)]('currentLivestreamSession');_0x3d4e91&&(_0x270f67=JSON['parse'](_0x3d4e91));}catch(_0x2782b6){console[_0x55a5ca(0x27f)](_0x55a5ca(0x299),_0x2782b6),localStorage['removeItem']('currentLivestreamSession');}if(_0x270f67&&_0x270f67['charId']===_0x7a287e){if(_0x55a5ca(0xc5b)===_0x55a5ca(0x455))return{'type':_0x55a5ca(0x7ee),'content':_0x18d955};else{console[_0x55a5ca(0x7ec)](_0x55a5ca(0x95a)),_0xdfbfac['currentLivestreamLog']=_0x270f67[_0x55a5ca(0x7ec)]||[],_0xdfbfac[_0x55a5ca(0xb64)]=_0x270f67[_0x55a5ca(0x929)]||[],_0xdfbfac['currentSpeechIndex']=_0x270f67[_0x55a5ca(0x88c)]||0x0,_0xdfbfac[_0x55a5ca(0x4f6)]=_0x270f67[_0x55a5ca(0xa5f)]||[],document['getElementById'](_0x55a5ca(0x5f9))[_0x55a5ca(0x329)][_0x55a5ca(0xc66)]=_0x55a5ca(0x338),document[_0x55a5ca(0x1d6)](_0x55a5ca(0x33a))['style']['display']='flex',_0xdfbfac[_0x55a5ca(0xc03)][_0x55a5ca(0xb85)](_0x334b5b=>{const _0x176528=_0x55a5ca;_0x176528(0xe2c)!==_0x176528(0xd70)?_0x334b5b[_0x176528(0x8c7)]===_0x176528(0xb08)&&(_0x176528(0xb34)==='PUycD'?_0x21bc22(_0x334b5b):_0x207960(_0x176528(0x693)+_0x3514a6[_0x176528(0x8ac)])):_0x130718[_0x176528(0x329)][_0x176528(0x71d)]=_0x176528(0xa6e);});const _0x2e6802=_0xdfbfac[_0x55a5ca(0xb64)][_0xdfbfac[_0x55a5ca(0xc23)]];if(_0x2e6802&&typeof _0x2e6802===_0x55a5ca(0x388))_0x2b11d4[_0x55a5ca(0x101)]=_0x2e6802[_0x55a5ca(0x1c6)],_0x4141b9(_0x7a287e,_0x2e6802[_0x55a5ca(0x2c4)]);else{if(typeof _0x2e6802===_0x55a5ca(0x193))_0x2b11d4[_0x55a5ca(0x101)]=_0x2e6802;else{if(_0x55a5ca(0x465)===_0x55a5ca(0xbe1))try{const _0x2777f3=_0x558c53[_0x55a5ca(0xc44)](_0x52e64a);_0x22de16['isArray'](_0x2777f3)&&(_0x2f1ec1[_0x55a5ca(0xee2)]=_0x2777f3[_0x55a5ca(0x266)](_0x436d16=>_0x436d16['name']+'--'+_0x436d16[_0x55a5ca(0x9f5)])['join']('\x0a'));}catch(_0x405eaf){}else _0x2b11d4[_0x55a5ca(0x101)]='（直播已暂停）';}}}}else _0x55a5ca(0x83b)===_0x55a5ca(0x83b)?(console[_0x55a5ca(0x7ec)]('Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。'),_0xdfbfac[_0x55a5ca(0xc03)]=[],_0xdfbfac['currentLivestreamSpeechQueue']=[],_0xdfbfac['currentSpeechIndex']=-0x1,_0xdfbfac[_0x55a5ca(0x4f6)]=[],_0x2b11d4['textContent']=_0x55a5ca(0x146),document[_0x55a5ca(0x1d6)](_0x55a5ca(0x5f9))[_0x55a5ca(0x329)][_0x55a5ca(0xc66)]='block',document[_0x55a5ca(0x1d6)]('livestream-controls-container')['style'][_0x55a5ca(0xc66)]=_0x55a5ca(0x338)):_0x1e0a0e[_0x55a5ca(0x3fb)][_0x55a5ca(0xb66)]({'senderId':_0x1a6960['id'],'kind':_0x55a5ca(0xea),'sticker':_0x571fc9});try{if(_0x55a5ca(0xcdf)==='WMJaD'){const _0x224382=await _0x4131e2(_0x55a5ca(0xd7d)+_0x7a287e);if(_0x224382)_0x2eede2[_0x55a5ca(0x329)]['backgroundImage']=_0x55a5ca(0x8a1)+URL['createObjectURL'](_0x224382)+'\x27)';else{if(_0x55a5ca(0xe97)==='vjSTk')_0x4a82bf();else{const _0x1eda32=await _0x4131e2('char_offline_bg_'+_0x7a287e);if(_0x1eda32)_0x2eede2[_0x55a5ca(0x329)][_0x55a5ca(0x5b7)]=_0x55a5ca(0x8a1)+URL[_0x55a5ca(0x21c)](_0x1eda32)+'\x27)';}}(!_0x270f67||!_0x270f67[_0x55a5ca(0xe9)])&&_0x4141b9(_0x7a287e,_0x55a5ca(0xcd5));}else _0x4d5924[_0x55a5ca(0x3a0)](_0x55a5ca(0x288),()=>{const _0x5b15a2=_0x55a5ca;if(_0x1a735a[_0x5b15a2(0x1e2)]===0x0)return;_0x434294=(_0x333b35-0x1+_0x12994e[_0x5b15a2(0x1e2)])%_0x55fe0b[_0x5b15a2(0x1e2)],_0x1871e6(_0x3cb3e2[_0x3d048b],_0x5f0ca3);});}catch(_0x11fac3){if('cMDrY'===_0x55a5ca(0xa48)){const _0x5c9536=_0xb144c8(_0x5b80cc[_0x55a5ca(0xee)]??_0x596c4f[_0x55a5ca(0x7ee)]??'')['trim']()||_0x55a5ca(0x9bc)+(_0x81803e||_0x55a5ca(0x2b9))+']';if(_0x5c9536)_0x278690[_0x55a5ca(0x3fb)][_0x55a5ca(0xb66)]({'senderId':_0x13fb8f['id'],'kind':_0x55a5ca(0x7ee),'content':_0x5c9536});}else console[_0x55a5ca(0x27f)](_0x55a5ca(0xe94),_0x11fac3);}}}async function _0x522bee(_0x387b2b,_0x1e4715){const _0x5e7448=_0x50976b;if(_0x5e7448(0xd2f)===_0x5e7448(0xd2f)){localStorage[_0x5e7448(0x287)](_0x5e7448(0x855));if(_0xdfbfac[_0x5e7448(0x556)])return;document[_0x5e7448(0x1d6)](_0x5e7448(0x5f9))['style']['display']=_0x5e7448(0x338),document[_0x5e7448(0x1d6)]('livestream-controls-container')['style'][_0x5e7448(0xc66)]=_0x5e7448(0xe12),_0x1a8bbc(!![],_0x5e7448(0xca1)),_0xdfbfac[_0x5e7448(0x556)]=!![],_0xdfbfac[_0x5e7448(0xc03)]=[],_0xdfbfac['currentLivestreamSpeechQueue']=[],_0xdfbfac['currentSpeechIndex']=-0x1;const _0xa232b2=_0x5844c7(_0xdfbfac['activeLivestreamCharId']),_0x2fdb92=_0x58761c(_0xdfbfac[_0x5e7448(0x8ed)]),{omniText:_0x41e441}=_0x5a83ee(_0xa232b2['id']),_0xf5ae44=_0x2c9d46(_0xa232b2['id']),_0x2d80c3=await _0x421bdd(_0xa232b2['id']),_0x509bc6=_0xbf1baf(_0xa232b2['id']),_0x1cf7cc=_0x2fdb92[_0x5e7448(0x79b)]?_0x5e7448(0xa51)+_0x2fdb92[_0x5e7448(0xb95)]+_0x5e7448(0x6ce)+_0x2fdb92[_0x5e7448(0x79b)]:'',_0x1f345e=new Date(),_0x530b22=_0x5e7448(0xc56)+_0x1f345e[_0x5e7448(0x985)](_0x5e7448(0x731),{'dateStyle':_0x5e7448(0x755),'timeStyle':_0x5e7448(0xa40)})+'\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20';let _0x382d86='';if(_0xa232b2['linkedWorldBookIds']&&_0xa232b2[_0x5e7448(0x5ee)]['length']>0x0){const _0x2b9da5=_0xa232b2[_0x5e7448(0x5ee)][_0x5e7448(0x266)](_0x3a2db0=>_0xdfbfac[_0x5e7448(0xe7d)][_0x5e7448(0x76b)](_0x39de09=>_0x39de09['id']===_0x3a2db0))[_0x5e7448(0xeb3)](Boolean)[_0x5e7448(0x266)](_0x502a24=>'\x0a\x0a##\x20世界书条目:\x20'+_0x502a24[_0x5e7448(0xb95)]+'\x0a'+_0x502a24[_0x5e7448(0xee)])[_0x5e7448(0xd9a)]('');_0x2b9da5&&(_0x382d86=_0x5e7448(0x4f0)+_0x2b9da5);}const _0x1dc7d0=document[_0x5e7448(0x1d6)](_0x5e7448(0x99d)),_0x1f95f0=document[_0x5e7448(0x1d6)](_0x5e7448(0xb73));_0x1dc7d0[_0x5e7448(0xa73)]='',_0x1f95f0[_0x5e7448(0x101)]='...';try{if(_0x5e7448(0xa67)!=='mCeva'){const _0xea98d7=_0x3ec279(_0x182fa8['activeChatId']);_0x34e54a=_0xea98d7[_0x5e7448(0xb95)]||'我';}else{const _0x8fa066='#\x20核心任务:\x20直播开场\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“'+_0x2fdb92[_0x5e7448(0xb95)]+_0x5e7448(0x26e)+_0xa232b2[_0x5e7448(0xb95)]+'”的角色，即将开始一场直播。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x530b22+_0x5e7448(0x385)+_0xa232b2[_0x5e7448(0x79b)]+_0x5e7448(0x290)+_0x1cf7cc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x382d86+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的个人记忆\x20(来自所有App)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x41e441+_0x5e7448(0x244)+_0xf5ae44+_0x5e7448(0x244)+_0x2d80c3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x509bc6+_0x5e7448(0xaab)+_0x387b2b+_0x5e7448(0xad3)+_0x1e4715+_0x5e7448(0x78a)+_0x2fdb92['name']+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x0a\x20\x20\x20\x20\x20\x20\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22大家好，今天我们来聊聊...\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢大家的到来！\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20}\x0a\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人甲\x22,\x20\x22comment\x22:\x20\x22前排！\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人乙\x22,\x20\x22comment\x22:\x20\x22主播今天好帅！\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20#\x20emotion字段规则\x0a\x20\x20\x20\x20-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a\x20\x20\x20\x20-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x274b73=[{'role':_0x5e7448(0xba3),'content':_0x8fa066}];_0x274b73[_0x5e7448(0xb66)]({'role':_0x5e7448(0xa29),'content':_0x5e7448(0xe1d)});const _0x53b7e1=await _0x2fa074(_0x274b73,{'json':!![]});let _0x3617b3=_0x53b7e1[_0x5e7448(0xcd2)]();const _0x225ada=_0x3617b3[_0x5e7448(0x4dc)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x225ada&&(_0x3617b3=_0x225ada[0x1][_0x5e7448(0xcd2)]());const _0xf9363=JSON[_0x5e7448(0xc44)](_0x3617b3);if(!_0xf9363||!_0xf9363['streamerSpeech']||!_0xf9363[_0x5e7448(0xb08)])throw new Error(_0x5e7448(0xb9a));_0xdfbfac['currentLivestreamSpeechQueue']=_0xf9363[_0x5e7448(0x5ec)],_0xdfbfac[_0x5e7448(0xc23)]=0x0;const _0x22d5ad=_0xdfbfac[_0x5e7448(0xb64)][0x0];_0x1f95f0[_0x5e7448(0x101)]=_0x22d5ad[_0x5e7448(0x1c6)],_0x4141b9(_0xa232b2['id'],_0x22d5ad['emotion']),_0xdfbfac[_0x5e7448(0xc03)][_0x5e7448(0xb66)]({'type':'speech','speaker':_0xa232b2[_0x5e7448(0xb95)],'content':_0x22d5ad[_0x5e7448(0x1c6)],'emotion':_0x22d5ad[_0x5e7448(0x2c4)]}),_0xf9363['danmaku'][_0x5e7448(0xb85)](_0x358a25=>{const _0x50ac44=_0x5e7448,_0x1fb098=document[_0x50ac44(0x8f1)](_0x50ac44(0xce2));_0x1fb098[_0x50ac44(0x213)]=_0x50ac44(0x907),_0x1fb098[_0x50ac44(0xa73)]='<span\x20class=\x22danmaku-user\x22>'+_0x358a25[_0x50ac44(0xa29)]+_0x50ac44(0xc1a)+_0x358a25[_0x50ac44(0xab6)]+_0x50ac44(0x1a2),_0x1dc7d0[_0x50ac44(0xed3)](_0x1fb098),_0xdfbfac['currentLivestreamLog'][_0x50ac44(0xb66)]({'type':_0x50ac44(0xb08),..._0x358a25});});}}catch(_0x129339){if(_0x5e7448(0x663)!==_0x5e7448(0x595))console[_0x5e7448(0x27f)](_0x5e7448(0xd66),_0x129339),_0x21d6ce(_0x5e7448(0x57f)+_0x129339['message']),document[_0x5e7448(0x1d6)](_0x5e7448(0x5f9))[_0x5e7448(0x329)][_0x5e7448(0xc66)]=_0x5e7448(0xc38),document[_0x5e7448(0x1d6)](_0x5e7448(0x33a))['style'][_0x5e7448(0xc66)]=_0x5e7448(0x338);else{const _0x231b69=_0x58e36e[_0x5e7448(0xc44)](_0x31a2c9[_0x5e7448(0x443)](_0x5e7448(0xd8c))||'{}'),_0x3790a7={..._0x231b69,..._0x3e3e6a};_0x30d84b['setItem'](_0x5e7448(0xd8c),_0x5378f2['stringify'](_0x3790a7));}}finally{_0x1a8bbc(![]),_0xdfbfac[_0x5e7448(0x556)]=![];}}else _0x48b5ca['style'][_0x5e7448(0xc66)]=_0x5e7448(0x338),_0x4434cb['style'][_0x5e7448(0xc66)]=_0x5e7448(0xc38);}function _0x2a3acd(){const _0x523a20=_0x50976b;if(_0x523a20(0x926)!==_0x523a20(0x926))_0x584dd3(_0x523a20(0xc9c));else{if(!_0xdfbfac[_0x523a20(0xb64)]||_0xdfbfac[_0x523a20(0xb64)]['length']===0x0)return;let _0x21557e=_0xdfbfac[_0x523a20(0xc23)]+0x1;_0x21557e>=_0xdfbfac[_0x523a20(0xb64)][_0x523a20(0x1e2)]&&(_0x523a20(0xc27)===_0x523a20(0xc27)?_0x21557e=0x0:_0x2956d9[_0x523a20(0xb66)]({'timestamp':_0x76d95['timestamp'],'type':_0x696105(_0x404ab6),'content':'['+(_0xf8eeb1[_0x523a20(0xefb)]===_0x523a20(0xa29)?_0x15c552[_0x523a20(0xb95)]:_0x1a0e1e[_0x523a20(0xb95)])+_0x523a20(0x44a)+_0x507f21['content']}));_0xdfbfac[_0x523a20(0xc23)]=_0x21557e;const _0x387076=_0xdfbfac[_0x523a20(0xb64)][_0xdfbfac[_0x523a20(0xc23)]],_0x1a0bd9=document[_0x523a20(0x1d6)](_0x523a20(0xb73));_0x1a0bd9[_0x523a20(0x101)]=_0x387076[_0x523a20(0x1c6)],_0x4141b9(_0xdfbfac['activeLivestreamCharId'],_0x387076['emotion']);}}function _0x21bc22(_0x10dae6){const _0x21e66f=_0x50976b;if(_0x21e66f(0xb2d)!=='BffAS'){const _0x376627=document[_0x21e66f(0x1d6)]('livestream-danmaku-overlay'),_0x186557=document[_0x21e66f(0x8f1)](_0x21e66f(0xce2));_0x186557[_0x21e66f(0x213)]=_0x21e66f(0x907);_0x10dae6[_0x21e66f(0xbfc)]&&_0x186557[_0x21e66f(0x555)][_0x21e66f(0x1cd)](_0x21e66f(0x551));const _0x38f8eb=_0x10dae6[_0x21e66f(0xee)]||_0x10dae6[_0x21e66f(0xab6)]||'';_0x186557[_0x21e66f(0xa73)]='<span\x20class=\x22danmaku-user\x22>'+_0x10dae6[_0x21e66f(0xa29)]+_0x21e66f(0x662)+_0x38f8eb+_0x21e66f(0x1a2),_0x376627[_0x21e66f(0xed3)](_0x186557);}else _0x59c838(_0x21e66f(0xa77),_0x21e66f(0xaee));}const _0x1d5e94=document[_0x50976b(0x1d6)]('send-danmaku-btn'),_0x2172c1=document[_0x50976b(0x1d6)](_0x50976b(0xabe));document[_0x50976b(0x1d6)](_0x50976b(0x6ba))[_0x50976b(0x3a0)](_0x50976b(0x288),_0xb596b5);function _0xf1e52f(){const _0x3a571f=_0x50976b,_0x4335cb=_0x2172c1[_0x3a571f(0xee2)]['trim']();if(!_0x4335cb)return;const _0x34208b=_0x58761c(_0xdfbfac[_0x3a571f(0x8ed)]),_0x4365e1={'type':_0x3a571f(0xb08),'user':_0x34208b[_0x3a571f(0xb95)]||'我','content':_0x4335cb,'isUser':!![]};_0x21bc22(_0x4365e1),_0xdfbfac[_0x3a571f(0x795)][_0x3a571f(0xb66)](_0x4365e1),_0xdfbfac[_0x3a571f(0xc03)]['push'](_0x4365e1),_0x2172c1['value']='';}_0x1d5e94[_0x50976b(0x3a0)](_0x50976b(0x288),_0xf1e52f),_0x2172c1['addEventListener'](_0x50976b(0xc31),_0xea9e97=>{const _0x219bf0=_0x50976b;_0xea9e97[_0x219bf0(0xb84)]===_0x219bf0(0x2ac)&&(_0xea9e97[_0x219bf0(0xc7a)](),_0xf1e52f());});function _0x4f2e49(){const _0x14b51f=_0x50976b;if(_0x14b51f(0x480)===_0x14b51f(0x480)){if(!_0xdfbfac[_0x14b51f(0x2bb)]||document[_0x14b51f(0x1d6)]('start-livestream-btn-container')['style'][_0x14b51f(0xc66)]==='block')return;const _0x264494={'charId':_0xdfbfac['activeLivestreamCharId'],'log':_0xdfbfac[_0x14b51f(0xc03)],'speechQueue':_0xdfbfac[_0x14b51f(0xb64)],'speechIndex':_0xdfbfac[_0x14b51f(0xc23)],'dms':_0xdfbfac[_0x14b51f(0x4f6)]};try{localStorage[_0x14b51f(0xa54)](_0x14b51f(0x855),JSON[_0x14b51f(0xea5)](_0x264494)),console[_0x14b51f(0x7ec)]('Noir\x27s\x20Log:\x20直播进度已保存\x20(包含私信)。');}catch(_0x57b2c1){if(_0x14b51f(0x7b9)===_0x14b51f(0xc0e)){const _0x3b388d=_0x3a19e5(_0x5e02be[_0x14b51f(0xdf8)]||_0x3f0f7c['activeMeetingCharId']);_0x3b1b53=_0x3b388d?.[_0x14b51f(0xb95)]||'角色',_0xd1439d=_0x14b51f(0x17c);}else console[_0x14b51f(0x27f)](_0x14b51f(0xd9b),_0x57b2c1);}}else{_0x19a3a0[_0x14b51f(0x7ec)]('好友圈档案柜是空的，无需净化。');return;}}async function _0xb596b5(){const _0x28bd15=_0x50976b;if(_0xdfbfac[_0x28bd15(0x556)])return;_0xdfbfac[_0x28bd15(0x795)][_0x28bd15(0x1e2)]===0x0&&(_0x28bd15(0xc5c)===_0x28bd15(0x257)?_0x1599f7[_0x28bd15(0xc2a)]?_0x448380[_0x28bd15(0xe7f)]():_0x35087f[_0x28bd15(0x57a)]():_0x21d6ce(_0x28bd15(0x578)));_0x1a8bbc(!![],_0x28bd15(0x78f)),_0xdfbfac[_0x28bd15(0x556)]=!![];const _0x1e00ed=_0x5844c7(_0xdfbfac[_0x28bd15(0x2bb)]),_0x1e8940=_0x58761c(_0xdfbfac[_0x28bd15(0x8ed)]),{omniText:_0x18ef0b}=_0x5a83ee(_0x1e00ed['id']),_0x5dbac7=_0x2c9d46(_0x1e00ed['id']),_0x163116=await _0x421bdd(_0x1e00ed['id']),_0x192140=_0xbf1baf(_0x1e00ed['id']),_0x5b8e61=_0x1e8940['persona']?_0x28bd15(0x960)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x80b)+_0x1e8940[_0x28bd15(0x79b)]:'',_0x4cc00b=new Date(),_0x4bfde4='\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20'+_0x4cc00b[_0x28bd15(0x985)]('zh-CN',{'dateStyle':_0x28bd15(0x755),'timeStyle':_0x28bd15(0xa40)})+_0x28bd15(0xd3c);let _0xd53f6f='';if(_0x1e00ed[_0x28bd15(0x5ee)]&&_0x1e00ed['linkedWorldBookIds'][_0x28bd15(0x1e2)]>0x0){const _0xacdc45=_0x1e00ed[_0x28bd15(0x5ee)][_0x28bd15(0x266)](_0xd49d7f=>_0xdfbfac[_0x28bd15(0xe7d)][_0x28bd15(0x76b)](_0x3873b4=>_0x3873b4['id']===_0xd49d7f))[_0x28bd15(0xeb3)](Boolean)['map'](_0x559065=>_0x28bd15(0x820)+_0x559065['name']+'\x0a'+_0x559065[_0x28bd15(0xee)])[_0x28bd15(0xd9a)]('');if(_0xacdc45){if(_0x28bd15(0xec4)!==_0x28bd15(0x5c6))_0xd53f6f='\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a'+_0xacdc45;else{const _0x171c26=_0x1cec72[_0x28bd15(0x1d6)](_0x28bd15(0x9a3)),_0x29935e=_0x100b1f[_0x28bd15(0x1d6)](_0x28bd15(0xc58));_0x171c26['innerHTML']='';const _0x24e478=new _0x40c117(_0x39fb86+_0x28bd15(0xb2b));_0x29935e[_0x28bd15(0x101)]=_0x24e478[_0x28bd15(0xb0a)]()+0x1+'月'+_0x24e478['getDate']()+'日';const _0x5bed5=_0x446fdf[_0x28bd15(0x8b2)][_0x28bd15(0xeb3)](_0x1d117d=>_0x1d117d[_0x28bd15(0xdc9)]===_0x57961f);if(_0x5bed5[_0x28bd15(0x1e2)]===0x0){_0x171c26[_0x28bd15(0xa73)]=_0x28bd15(0xee1);return;}_0x5bed5[_0x28bd15(0xb85)](_0x341050=>{const _0x216364=_0x28bd15,_0x3ddaaa=_0x3e1e05['createElement'](_0x216364(0xce2));_0x3ddaaa[_0x216364(0x213)]=_0x341050[_0x216364(0x8c7)]===_0x216364(0x992)?_0x216364(0xde2):_0x216364(0xeb7),_0x3ddaaa['textContent']=_0x341050['content'],_0x3ddaaa[_0x216364(0x63f)]['id']=_0x341050['id'],_0x171c26[_0x216364(0x5b8)](_0x3ddaaa);});}}}try{if(_0x28bd15(0x871)===_0x28bd15(0x658))_0x387fec[_0x28bd15(0x7ec)](_0x28bd15(0xdaf)),typeof _0x1020db[_0x28bd15(0x451)]['abort']===_0x28bd15(0x553)?_0x5765bc[_0x28bd15(0x451)][_0x28bd15(0xe6c)](_0x28bd15(0xad2)):_0x4fe73b[_0x28bd15(0xca6)](_0x28bd15(0x23b)),_0x5e0c54[_0x28bd15(0x451)]=null;else{const _0x508e67=_0xdfbfac[_0x28bd15(0xc03)][_0x28bd15(0x8b8)](-0xf)[_0x28bd15(0x266)](_0x2006a1=>{const _0x219eaa=_0x28bd15;if(_0x2006a1[_0x219eaa(0x8c7)]===_0x219eaa(0xb61))return _0x219eaa(0x131)+_0x2006a1[_0x219eaa(0x8b5)]+']：'+_0x2006a1[_0x219eaa(0xee)];return _0x219eaa(0x34a)+_0x2006a1[_0x219eaa(0xa29)]+']：'+(_0x2006a1[_0x219eaa(0xab6)]||_0x2006a1[_0x219eaa(0xee)]);})['join']('\x0a'),_0x1e4833=_0xdfbfac[_0x28bd15(0x795)][_0x28bd15(0xeb3)](_0x13d928=>_0x13d928['type']===_0x28bd15(0xb08))[_0x28bd15(0x266)](_0x3baa52=>'-\x20\x22'+_0x3baa52['content']+'\x22')[_0x28bd15(0xd9a)]('\x0a'),_0x4bc85b=_0xdfbfac[_0x28bd15(0x795)][_0x28bd15(0xeb3)](_0x44c06c=>_0x44c06c[_0x28bd15(0x8c7)]===_0x28bd15(0x318))[_0x28bd15(0x266)](_0x2f1ebd=>'-\x20'+_0x2f1ebd['name']+'\x20x'+_0x2f1ebd['count'])[_0x28bd15(0xd9a)]('\x0a'),_0x172f14=_0xdfbfac[_0x28bd15(0x795)][_0x28bd15(0xeb3)](_0x37e933=>_0x37e933[_0x28bd15(0x8c7)]==='dm')[_0x28bd15(0x266)](_0x474783=>_0x28bd15(0xb55)+_0x474783['content']+'\x22')[_0x28bd15(0xd9a)]('\x0a'),_0x2ec593=_0x28bd15(0xbe8)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x163)+_0x1e00ed['name']+_0x28bd15(0xc3f)+_0x4bfde4+_0x28bd15(0x172)+_0x1e00ed['persona']+_0x28bd15(0x81c)+_0x5b8e61+'\x0a'+_0xd53f6f+_0x28bd15(0xbd2)+_0x18ef0b+_0x28bd15(0x40d)+_0x5dbac7+'\x0a---\x0a'+_0x163116+_0x28bd15(0x40d)+_0x192140+_0x28bd15(0xab9)+_0x508e67+_0x28bd15(0x384)+_0x1e8940[_0x28bd15(0xb95)]+')的互动\x0a这是“我”刚刚发送的互动内容，你必须对此做出【优先回应】:\x0a'+(_0x1e4833?_0x28bd15(0x98e)+_0x1e4833:'')+'\x0a'+(_0x4bc85b?_0x28bd15(0x7a8)+_0x4bc85b:'')+'\x0a'+(_0x172f14?'\x0a-\x20“我”发送的私信:\x0a'+_0x172f14:'')+'\x0a'+(!_0x1e4833&&!_0x4bc85b&&!_0x172f14?_0x28bd15(0x6ad):'')+'\x0a\x0a//\x20▼▼▼\x20在\x20#\x20任务指令\x20的前面，加上这段“社会学常识”\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心概念：直播中的“私信”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20“私信”是“我”('+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x5d1)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x515)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x199)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x5f2)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x8c8)+_0x1e8940['name']+_0x28bd15(0x917)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x420)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0xe50)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0xcd6)+_0x1e8940[_0x28bd15(0xb95)]+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**核心焦点**:\x20这些路人观众的核心焦点应该是【主播你】和【你正在说的话题】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**反应逻辑**:\x20他们会针对你在【阶段一】中生成的\x20\x22streamerSpeech\x22\x20内容做出反应。例如，如果你感谢了礼物，他们可能会惊叹或跟风；如果你说了一个笑话，他们可能会发“哈哈哈”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**减少对'+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0xaef)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0xe22)+_0x1e8940[_0x28bd15(0xb95)]+_0x28bd15(0x226),_0xf382ab=[{'role':'system','content':_0x2ec593}];_0xf382ab[_0x28bd15(0xb66)]({'role':_0x28bd15(0xa29),'content':_0x28bd15(0x423)}),_0xdfbfac[_0x28bd15(0x795)]=[];const _0x2af52d=await _0x2fa074(_0xf382ab,{'json':!![]});let _0x1d58f6=_0x2af52d[_0x28bd15(0xcd2)]();const _0x168bbd=_0x1d58f6[_0x28bd15(0x4dc)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x168bbd&&(_0x1d58f6=_0x168bbd[0x1][_0x28bd15(0xcd2)]());const _0x141e6a=JSON['parse'](_0x1d58f6);if(_0x141e6a[_0x28bd15(0x5ec)]&&_0x141e6a[_0x28bd15(0x5ec)][_0x28bd15(0x1e2)]>0x0){_0xdfbfac[_0x28bd15(0xb64)]=_0x141e6a[_0x28bd15(0x5ec)],_0xdfbfac[_0x28bd15(0xc23)]=0x0;const _0x3b1e25=_0xdfbfac[_0x28bd15(0xb64)][0x0],_0x54973f=document['getElementById'](_0x28bd15(0xb73));_0x54973f['textContent']=_0x3b1e25[_0x28bd15(0x1c6)],_0x4141b9(_0x1e00ed['id'],_0x3b1e25[_0x28bd15(0x2c4)]),_0xdfbfac[_0x28bd15(0xc03)]['push']({'type':'speech','speaker':_0x1e00ed[_0x28bd15(0xb95)],'content':_0x3b1e25[_0x28bd15(0x1c6)],'emotion':_0x3b1e25['emotion']});}if(_0x141e6a[_0x28bd15(0xb08)])for(const _0x452694 of _0x141e6a[_0x28bd15(0xb08)]){_0x21bc22(_0x452694),_0xdfbfac[_0x28bd15(0xc03)][_0x28bd15(0xb66)]({'type':_0x28bd15(0xb08),..._0x452694}),await new Promise(_0x77500d=>setTimeout(_0x77500d,0xc8+Math['random']()*0x12c));}if(_0x141e6a['privateMessageReply']){const _0x498016=Array[_0x28bd15(0xca5)](_0x141e6a[_0x28bd15(0x82d)])?_0x141e6a[_0x28bd15(0x82d)]:[_0x141e6a[_0x28bd15(0x82d)]];for(const _0x4985c3 of _0x498016){'piIyG'!==_0x28bd15(0x4d6)?_0x4985c3['trim']()&&_0xdfbfac[_0x28bd15(0x4f6)][_0x28bd15(0xb66)]({'sender':'ai','content':_0x4985c3[_0x28bd15(0xcd2)]()}):_0x5dbe8b['assign'](_0x524f3e,{'songName':_0x5dc825,'artist':_0x16598d,'coverUrl':null,'playableUrl':null});}if(_0xdfbfac['isDMPanelVisible'])_0x28bd15(0x1f7)!=='LTphJ'?_0x192e25():(_0x4bed21(_0x67d81),_0x207886());else{_0xdfbfac[_0x28bd15(0x337)]=!![],_0x22feee();const _0x384604=_0x5844c7(_0xdfbfac['activeLivestreamCharId']);_0x21d6ce('【叮咚！收到来自\x20'+_0x384604[_0x28bd15(0xb95)]+_0x28bd15(0x28c));}}}}catch(_0x2db77b){console['error']('继续直播失败:',_0x2db77b),_0x21d6ce('直播出错了...\x20'+_0x2db77b[_0x28bd15(0x8ac)]);}finally{_0x1a8bbc(![]),_0x4f2e49(),_0xdfbfac[_0x28bd15(0x556)]=![];}}async function _0x4141b9(_0x2e2a8f,_0x4b54c8){const _0x19fdca=_0x50976b,_0x46a9c8=document[_0x19fdca(0x1d6)](_0x19fdca(0x18a)),_0xc97e6=document['getElementById'](_0x19fdca(0xb02));if(!_0x46a9c8||!_0xc97e6)return;const _0x20ff63=_0x5844c7(_0x2e2a8f),_0x527a99=_0x20ff63?.[_0x19fdca(0x209)]||{'x':0x32,'y':0x64,'scale':0x1};_0xc97e6[_0x19fdca(0x329)][_0x19fdca(0x7e6)]=0x55*_0x527a99[_0x19fdca(0xa9d)]+'%',_0xc97e6[_0x19fdca(0x329)]['width']=0x55*_0x527a99['scale']+'%',_0xc97e6[_0x19fdca(0x329)]['left']=_0x527a99['x']+'%',_0xc97e6[_0x19fdca(0x329)]['top']=_0x527a99['y']+'%',_0xc97e6[_0x19fdca(0x329)][_0x19fdca(0x71d)]=_0x19fdca(0xcc4);const _0x61d52b=[_0x19fdca(0xcd5),_0x19fdca(0xd46),_0x19fdca(0x183),_0x19fdca(0x85f),_0x19fdca(0xe5)],_0xe76641=_0x61d52b[_0x19fdca(0xc35)](_0x4b54c8)?_0x4b54c8:_0x19fdca(0xcd5);try{let _0x596f84=null;_0x596f84=await _0x4131e2(_0x19fdca(0x153)+_0xe76641+'_'+_0x2e2a8f);if(!_0x596f84)_0x596f84=await _0x4131e2(_0x19fdca(0xc3a)+_0xe76641+'_'+_0x2e2a8f);if(!_0x596f84)_0x596f84=await _0x4131e2(_0x19fdca(0xb47)+_0x2e2a8f);if(!_0x596f84)_0x596f84=await _0x4131e2(_0x19fdca(0x1dd)+_0x2e2a8f);_0x596f84?_0x46a9c8[_0x19fdca(0xcab)]=URL[_0x19fdca(0x21c)](_0x596f84):_0x19fdca(0x11d)!==_0x19fdca(0x11d)?_0x254530[_0x19fdca(0x27f)](_0x19fdca(0x160),_0xfc3d9a):_0x46a9c8[_0x19fdca(0xcab)]='';}catch(_0x2c73bd){console['error'](_0x19fdca(0xe6),_0x2c73bd),_0x46a9c8[_0x19fdca(0xcab)]='';}}let _0x506519=![],_0x2dcfb9={};function _0x1033c5(){const _0x2e4e02=_0x50976b;if(_0x2e4e02(0xd2c)===_0x2e4e02(0x561)){const _0xffec85=_0x520e10[_0x2e4e02(0x8f1)](_0x2e4e02(0x805));_0xffec85['value']=_0x402d67['id'],_0xffec85[_0x2e4e02(0x101)]=_0x5c00a0[_0x2e4e02(0xb95)],_0xae592[_0x2e4e02(0x5b8)](_0xffec85);}else{const _0x4bc6c2=_0x5844c7(_0xdfbfac['activeLivestreamCharId']);if(!_0x4bc6c2)return;_0x506519=!![],document[_0x2e4e02(0x1d6)]('livestream-sprite-controls')[_0x2e4e02(0x329)][_0x2e4e02(0xc66)]=_0x2e4e02(0xc38);const _0x3adb92=_0x4bc6c2['livestreamSpriteTransform']||{'x':0x32,'y':0x64,'scale':0x1};document[_0x2e4e02(0x1d6)](_0x2e4e02(0x2cb))[_0x2e4e02(0xee2)]=_0x3adb92['x'],document[_0x2e4e02(0x1d6)](_0x2e4e02(0xed0))[_0x2e4e02(0xee2)]=_0x3adb92['y'],document['getElementById']('livestream-sprite-slider-scale')[_0x2e4e02(0xee2)]=_0x3adb92[_0x2e4e02(0xa9d)]*0x64,_0x2dcfb9={..._0x3adb92},document[_0x2e4e02(0x1d6)](_0x2e4e02(0x51b))['style'][_0x2e4e02(0xc66)]=_0x2e4e02(0x338),document['getElementById'](_0x2e4e02(0x982))[_0x2e4e02(0x329)][_0x2e4e02(0xc66)]='none';}}function _0x1ddf32(_0x55c83f=![]){const _0x5243d5=_0x50976b;if(_0x5243d5(0x49f)!=='aXjWd'){_0x506519=![],document[_0x5243d5(0x1d6)]('livestream-sprite-controls')[_0x5243d5(0x329)][_0x5243d5(0xc66)]='none',document[_0x5243d5(0x1d6)](_0x5243d5(0x51b))[_0x5243d5(0x329)][_0x5243d5(0xc66)]=_0x5243d5(0xc38),document[_0x5243d5(0x1d6)](_0x5243d5(0x982))[_0x5243d5(0x329)][_0x5243d5(0xc66)]=_0x5243d5(0xe12);if(!_0x55c83f){const _0x3d40be=_0x5844c7(_0xdfbfac[_0x5243d5(0x2bb)]);_0x3d40be&&(_0x3d40be[_0x5243d5(0x209)]=_0x2dcfb9,_0x4141b9(_0xdfbfac[_0x5243d5(0x2bb)],'normal'));}}else{const _0x49cff3=_0x8efe2a[_0x5243d5(0x8f1)](_0x5243d5(0xce2));_0x49cff3[_0x5243d5(0x213)]=_0x5243d5(0x40b),_0x49cff3[_0x5243d5(0x101)]=_0x4e360a[_0x5243d5(0xee)],_0x181445[_0x5243d5(0x5b8)](_0x49cff3);}}function _0x359d8c(){const _0x213ba5=_0x50976b,_0x596a52=_0x5844c7(_0xdfbfac[_0x213ba5(0x2bb)]);if(!_0x596a52)return;const _0x418c5c=parseFloat(document[_0x213ba5(0x1d6)](_0x213ba5(0x2cb))[_0x213ba5(0xee2)]),_0x1cafbe=parseFloat(document[_0x213ba5(0x1d6)]('livestream-sprite-slider-y')['value']),_0xd8d7a9=parseFloat(document[_0x213ba5(0x1d6)]('livestream-sprite-slider-scale')[_0x213ba5(0xee2)])/0x64;_0x596a52['livestreamSpriteTransform']={'x':_0x418c5c,'y':_0x1cafbe,'scale':_0xd8d7a9},_0x31622b(),_0x21d6ce(_0x213ba5(0x238)),_0x1ddf32(!![]);}function _0x230c5f(){const _0x2aec1d=_0x50976b;_0x2aec1d(0xeb6)===_0x2aec1d(0xeb6)?_0x13215d('确定要恢复这个角色的默认立绘位置吗？')['then'](_0xa6c5a5=>{const _0xf28d53=_0x2aec1d;if(_0xa6c5a5){const _0x3638ce=_0x5844c7(_0xdfbfac[_0xf28d53(0x2bb)]);_0x3638ce&&(delete _0x3638ce[_0xf28d53(0x209)],_0x31622b(),_0x4141b9(_0x3638ce['id'],_0xf28d53(0xcd5)),_0x21d6ce('已恢复默认。'),_0x1ddf32(!![]));}}):_0x1a3c1a[_0x2aec1d(0xb66)](_0x5ab603);}function _0xa40c71(){const _0x322993=_0x50976b;if(!_0x506519)return;const _0x859496=parseFloat(document[_0x322993(0x1d6)]('livestream-sprite-slider-x')[_0x322993(0xee2)]),_0x17a343=parseFloat(document[_0x322993(0x1d6)]('livestream-sprite-slider-y')[_0x322993(0xee2)]),_0x21128c=parseFloat(document[_0x322993(0x1d6)](_0x322993(0x9bf))[_0x322993(0xee2)])/0x64,_0x4ec031=document['getElementById'](_0x322993(0xb02));_0x4ec031&&(_0x4ec031[_0x322993(0x329)]['height']=0x55*_0x21128c+'%',_0x4ec031[_0x322993(0x329)][_0x322993(0x429)]=0x55*_0x21128c+'%',_0x4ec031[_0x322993(0x329)][_0x322993(0x984)]=_0x859496+'%',_0x4ec031[_0x322993(0x329)][_0x322993(0x811)]=_0x17a343+'%',_0x4ec031[_0x322993(0x329)][_0x322993(0x71d)]='translate(-50%,\x20-100%)');}async function _0x10f6bf(){const _0x3426f2=_0x50976b;if(_0xdfbfac[_0x3426f2(0x556)]){if(_0x3426f2(0xb42)!==_0x3426f2(0xb42)){const _0x34a01f=_0x4d5dbe[_0x3426f2(0xc44)](_0x3ad6d7);_0x4f2aa3[_0x3426f2(0xee2)]=_0x195aa6(_0x34a01f);}else{_0x21d6ce(_0x3426f2(0x2b3));return;}}const _0x566356=_0xdfbfac[_0x3426f2(0xc03)];if(_0x566356['length']===0x0){_0x21d6ce(_0x3426f2(0x612));return;}let _0x35b5ce=-0x1;for(let _0x460df0=_0x566356[_0x3426f2(0x1e2)]-0x1;_0x460df0>=0x0;_0x460df0--){if(_0x3426f2(0x9b4)===_0x3426f2(0x9b4)){if(_0x566356[_0x460df0][_0x3426f2(0x8c7)]==='speech'){let _0x1540bf=_0x460df0;while(_0x1540bf>0x0&&_0x566356[_0x1540bf-0x1][_0x3426f2(0x8c7)]===_0x3426f2(0xb61)){_0x1540bf--;}_0x35b5ce=_0x1540bf;break;}}else{const _0x303ff0=_0x328444[_0x3426f2(0xee2)],_0x383364=_0xca2c50[_0x3426f2(0x2bb)];!_0x5eb2df['livestreamReplays'][_0x383364]&&(_0x407472[_0x3426f2(0xb63)][_0x383364]=[]),_0x22e562['livestreamReplays'][_0x383364][_0x3426f2(0x395)](_0x303ff0),_0x9d0a17['removeItem'](_0x3426f2(0x855)),_0xcc1c4c[_0x3426f2(0xc03)]=[],_0x2aae52(),_0x15b5be[_0x3426f2(0x555)]['remove']('show'),_0x1b9468('直播回放已归档！'),_0x2caf7b('livestreamList',_0x3426f2(0xf03));}}if(_0x35b5ce===-0x1){_0x21d6ce(_0x3426f2(0x4cf));return;}_0x566356[_0x3426f2(0x22f)](_0x35b5ce),_0xdfbfac[_0x3426f2(0xb64)]=[],_0xdfbfac[_0x3426f2(0xc23)]=-0x1,document[_0x3426f2(0x1d6)](_0x3426f2(0xb73))['textContent']='...';const _0x373c47=document[_0x3426f2(0x1d6)](_0x3426f2(0x99d));_0x373c47[_0x3426f2(0xa73)]='',_0x566356['forEach'](_0x281dd7=>{const _0x2d8b08=_0x3426f2;_0x281dd7[_0x2d8b08(0x8c7)]==='danmaku'&&_0x21bc22(_0x281dd7);}),_0x4f2e49(),_0x21d6ce('正在重新构思...'),setTimeout(()=>{_0xb596b5();},0x64);}function _0x4be1b7(){const _0x30df8b=_0x50976b;document[_0x30df8b(0x1d6)]('livestream-sprite-adjust-btn')[_0x30df8b(0x3a0)](_0x30df8b(0x288),_0x1033c5),document[_0x30df8b(0x1d6)](_0x30df8b(0x43d))[_0x30df8b(0x3a0)]('click',_0x5b8839),document[_0x30df8b(0x1d6)](_0x30df8b(0xaaa))[_0x30df8b(0x3a0)](_0x30df8b(0x288),_0x10f6bf),document[_0x30df8b(0x1d6)](_0x30df8b(0x124))['addEventListener'](_0x30df8b(0x288),_0x359d8c),document[_0x30df8b(0x1d6)](_0x30df8b(0x580))['addEventListener'](_0x30df8b(0x288),()=>_0x1ddf32(![])),document[_0x30df8b(0x1d6)]('livestream-sprite-reset-button')[_0x30df8b(0x3a0)](_0x30df8b(0x288),_0x230c5f),document[_0x30df8b(0x1d6)]('livestream-sprite-slider-x')[_0x30df8b(0x3a0)](_0x30df8b(0xb39),_0xa40c71),document[_0x30df8b(0x1d6)](_0x30df8b(0xed0))[_0x30df8b(0x3a0)]('input',_0xa40c71),document['getElementById']('livestream-sprite-slider-scale')['addEventListener'](_0x30df8b(0xb39),_0xa40c71);}async function _0x1e11f5(){const _0x26e8ae=_0x50976b,_0x4242f6=_0xdfbfac['activeLivestreamCharId'];if(!_0x4242f6)return;_0x137a40(_0x26e8ae(0x825),_0x26e8ae(0xf03));const _0x416d07=[_0x26e8ae(0xcd5),_0x26e8ae(0xd46),_0x26e8ae(0x183),'sad','shy'];document['getElementById'](_0x26e8ae(0xd6b))[_0x26e8ae(0x329)][_0x26e8ae(0x5b7)]='',_0x416d07[_0x26e8ae(0xb85)](_0x554215=>{const _0x5a72b1=_0x26e8ae;_0x5a72b1(0x81a)!==_0x5a72b1(0xc6e)?document[_0x5a72b1(0x1d6)](_0x5a72b1(0x717)+_0x554215+_0x5a72b1(0x909))[_0x5a72b1(0x329)][_0x5a72b1(0x5b7)]='':_0x326419[_0x5a72b1(0xcab)]=_0x5de218?_0x3bca69[_0x5a72b1(0x21c)](_0x22ed6a):_0x14581f;});try{if(_0x26e8ae(0x7f6)!==_0x26e8ae(0x7f6)){if(_0x4e7a46[_0x26e8ae(0x8f4)])_0x57ad3c(_0x44fcba[_0x26e8ae(0x8f4)]);const _0x27b359=()=>{_0x1933d7['replayPressTimer']=_0x2f46e2(()=>{_0xa85d88['preventDefault'](),_0x58d570(_0x51cd55,_0x15e9a0);},0x320);},_0x231a41=()=>{const _0x3f5e05=_0x26e8ae;_0x5a00f8(_0xc163fd[_0x3f5e05(0x8f4)]),_0x53311c['removeEventListener']('mouseup',_0x231a41),_0x304b68[_0x3f5e05(0x255)](_0x3f5e05(0xeee),_0x231a41),_0x283109[_0x3f5e05(0x255)](_0x3f5e05(0xb8b),_0x231a41),_0x3eb592[_0x3f5e05(0x255)](_0x3f5e05(0x28a),_0x231a41);};_0x24a590[_0x26e8ae(0x3a0)](_0x26e8ae(0xc67),_0x231a41,{'once':!![]}),_0x5747ea[_0x26e8ae(0x3a0)](_0x26e8ae(0xeee),_0x231a41,{'once':!![]}),_0x4588f2[_0x26e8ae(0x3a0)](_0x26e8ae(0xb8b),_0x231a41,{'once':!![]}),_0x1f13d1['addEventListener']('touchcancel',_0x231a41,{'once':!![]}),_0x27b359();}else{const _0x5421aa=await _0x4131e2(_0x26e8ae(0xd7d)+_0x4242f6);if(_0x5421aa)document['getElementById'](_0x26e8ae(0xd6b))[_0x26e8ae(0x329)][_0x26e8ae(0x5b7)]='url(\x27'+URL[_0x26e8ae(0x21c)](_0x5421aa)+'\x27)';for(const _0x1c05a5 of _0x416d07){const _0xc21c0f=await _0x4131e2(_0x26e8ae(0x153)+_0x1c05a5+'_'+_0x4242f6);_0xc21c0f&&(document[_0x26e8ae(0x1d6)](_0x26e8ae(0x717)+_0x1c05a5+_0x26e8ae(0x909))['style'][_0x26e8ae(0x5b7)]=_0x26e8ae(0x8a1)+URL[_0x26e8ae(0x21c)](_0xc21c0f)+'\x27)');}}}catch(_0x431d51){if(_0x26e8ae(0xa7a)===_0x26e8ae(0x7f7)){const _0x93b54b=_0x101207['createElement'](_0x26e8ae(0xce2));return _0x93b54b['className']=_0x26e8ae(0xbeb),_0x93b54b['dataset']['historyIndex']=_0x158cf7,_0x93b54b[_0x26e8ae(0xa73)]=_0x213a9e,_0x439455[_0x26e8ae(0x5b8)](_0x93b54b),_0x93b54b;}else console[_0x26e8ae(0x27f)](_0x26e8ae(0x96a),_0x431d51);}}async function _0x2d28a0(){const _0x3b7607=_0x50976b;if('VpJwf'!==_0x3b7607(0xe44)){const _0x2e6ae6=_0xdfbfac[_0x3b7607(0x2bb)];if(!_0x2e6ae6)return;_0x1a8bbc(!![],_0x3b7607(0x378));try{if('CcCmg'!=='CcCmg')_0x2db21b['worldBookCategories']=[{'id':'default','name':_0x3b7607(0x39f)}],_0x4416ff['worldBooks'][_0x3b7607(0xb85)](_0xeb521=>{const _0x4cc196=_0x3b7607;!_0xeb521[_0x4cc196(0x798)]&&(_0xeb521[_0x4cc196(0x798)]='default');});else{const _0x390fd0=document[_0x3b7607(0x1d6)](_0x3b7607(0xa0b))[_0x3b7607(0x6d4)][0x0];if(_0x390fd0)await _0x510f28(_0x3b7607(0xd7d)+_0x2e6ae6,_0x390fd0);const _0x163811=[_0x3b7607(0xcd5),_0x3b7607(0xd46),_0x3b7607(0x183),'sad',_0x3b7607(0xe5)];for(const _0x22e099 of _0x163811){if(_0x3b7607(0xd6e)!==_0x3b7607(0x311)){const _0x4fb407=document[_0x3b7607(0x1d6)]('livestream-sprite-'+_0x22e099+_0x3b7607(0x99a))[_0x3b7607(0x6d4)][0x0];if(_0x4fb407)await _0x510f28(_0x3b7607(0x153)+_0x22e099+'_'+_0x2e6ae6,_0x4fb407);}else{let _0x206fe1=null;const _0x3a0ed2=_0x572713['chats']['filter'](_0x49347c=>_0x49347c[_0x3b7607(0x41b)][_0x3b7607(0xc35)](_0x448678));for(const _0x3011ef of _0x3a0ed2){const _0x527c27=_0x516b95(_0x3011ef['id']);if(_0x527c27&&_0x527c27['length']>0x0){const _0x314327=_0x527c27[_0x527c27[_0x3b7607(0x1e2)]-0x1];(!_0x206fe1||_0x314327[_0x3b7607(0x10c)]>_0x206fe1[_0x3b7607(0x10c)])&&(_0x206fe1=_0x314327);}}return _0x206fe1;}}_0x31622b(),_0x21d6ce(_0x3b7607(0x462)),await _0x56a1fb(_0x2e6ae6),_0x137a40('livestreamRoom',_0x3b7607(0x825));}}catch(_0x3f2883){if(_0x3b7607(0x503)!==_0x3b7607(0x503)){_0x300b46(_0x3b7607(0xae7));return;}else _0x21d6ce('保存失败:\x20'+_0x3f2883[_0x3b7607(0x8ac)]);}finally{if(_0x3b7607(0x1a8)!==_0x3b7607(0x1a8)){const _0x3a596b=_0x5d76c8['likes']['map'](_0x585ab7=>_0x197de4(_0x585ab7)?.['name']||'未知')[_0x3b7607(0xd9a)]('、'),_0x36c92d=_0x3b7607(0x827);_0x512ab3=_0x3b7607(0xb2a)+_0x36c92d+'\x20'+_0x3a596b+'</div>';}else _0x1a8bbc(![]);}}else _0x630fcd[_0x3b7607(0x27f)]('Failed\x20to\x20plan\x20group\x20replies:',_0xefe6f0);}function _0x23d942(){const _0x2396b4=_0x50976b;document[_0x2396b4(0x1d6)]('livestream-settings-btn')[_0x2396b4(0x3a0)]('click',_0x1e11f5),document[_0x2396b4(0x1d6)](_0x2396b4(0x34f))[_0x2396b4(0x3a0)](_0x2396b4(0x288),()=>_0x137a40(_0x2396b4(0xf03),_0x2396b4(0x825))),document[_0x2396b4(0x1d6)](_0x2396b4(0xa43))[_0x2396b4(0x3a0)](_0x2396b4(0x288),_0x2d28a0),document[_0x2396b4(0x1d6)](_0x2396b4(0xd6b))[_0x2396b4(0x3a0)](_0x2396b4(0x288),()=>document[_0x2396b4(0x1d6)](_0x2396b4(0xa0b))[_0x2396b4(0x288)]()),document[_0x2396b4(0x1d6)](_0x2396b4(0xa0b))['addEventListener'](_0x2396b4(0xef8),_0x1b7d9f=>{const _0x199175=_0x2396b4;if(_0x199175(0xe4d)===_0x199175(0x777)){const _0x2a4baf=_0x45dd2d[_0x199175(0x272)][_0x199175(0x6d4)][0x0];if(_0x2a4baf)_0x5efb6c['style'][_0x199175(0x5b7)]=_0x199175(0x8a1)+_0xa316fe[_0x199175(0x21c)](_0x2a4baf)+'\x27)';}else{const _0x1c6336=_0x1b7d9f['target']['files'][0x0];if(_0x1c6336)document[_0x199175(0x1d6)](_0x199175(0xd6b))[_0x199175(0x329)]['backgroundImage']=_0x199175(0x8a1)+URL[_0x199175(0x21c)](_0x1c6336)+'\x27)';}});const _0x28ab49=['normal',_0x2396b4(0xd46),'angry',_0x2396b4(0x85f),_0x2396b4(0xe5)];_0x28ab49[_0x2396b4(0xb85)](_0x462930=>{const _0x5d4573=_0x2396b4,_0x16831f=document[_0x5d4573(0x1d6)](_0x5d4573(0x717)+_0x462930+_0x5d4573(0x909)),_0x28e325=document[_0x5d4573(0x1d6)]('livestream-sprite-'+_0x462930+'-input');_0x16831f[_0x5d4573(0x3a0)](_0x5d4573(0x288),()=>_0x28e325[_0x5d4573(0x288)]()),_0x28e325[_0x5d4573(0x3a0)](_0x5d4573(0xef8),_0x53b18a=>{const _0x277e18=_0x5d4573,_0x2d1f78=_0x53b18a[_0x277e18(0x272)][_0x277e18(0x6d4)][0x0];if(_0x2d1f78)_0x16831f['style'][_0x277e18(0x5b7)]=_0x277e18(0x8a1)+URL[_0x277e18(0x21c)](_0x2d1f78)+'\x27)';});});}function _0x4fcc7d(){const _0x314e70=_0x50976b;_0x314e70(0x1f9)==='OnedC'?console[_0x314e70(0x7ec)](_0x314e70(0xed5)):_0x20ee79=_0x514a03[_0x314e70(0xbf5)](..._0x4d7e59[_0x314e70(0x6b8)]['map'](_0x257a00=>_0x257a00[_0x314e70(0x10c)]));}document[_0x50976b(0x1d6)](_0x50976b(0x51b))[_0x50976b(0x3a0)](_0x50976b(0x288),_0x2a3acd);const _0x1fae88=document[_0x50976b(0x1d6)](_0x50976b(0x83f)),_0xd98fbb=document['getElementById'](_0x50976b(0xd02)),_0x2a9187=document[_0x50976b(0x1d6)](_0x50976b(0x195)),_0x562766=document[_0x50976b(0x1d6)](_0x50976b(0x5b3)),_0x33ef4c=document[_0x50976b(0x1d6)]('start-livestream-backdrop'),_0x5a2960=document[_0x50976b(0x1d6)](_0x50976b(0x6d8)),_0x2246b1=document['getElementById']('audience-mood-input');_0x1fae88[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x41a04c=_0x50976b;_0x5a2960['value']='',_0x2246b1[_0x41a04c(0xee2)]='',_0xd98fbb[_0x41a04c(0x555)][_0x41a04c(0x1cd)](_0x41a04c(0x36e)),_0x5a2960[_0x41a04c(0xc10)]();});const _0x47e16e=()=>_0xd98fbb[_0x50976b(0x555)][_0x50976b(0x9ad)](_0x50976b(0x36e));_0x562766[_0x50976b(0x3a0)]('click',_0x47e16e),_0x33ef4c[_0x50976b(0x3a0)](_0x50976b(0x288),_0x47e16e),_0x2a9187[_0x50976b(0x3a0)](_0x50976b(0x288),()=>{const _0x42c7de=_0x50976b,_0x2306c4=_0x5a2960[_0x42c7de(0xee2)][_0x42c7de(0xcd2)](),_0xb24e45=_0x2246b1[_0x42c7de(0xee2)][_0x42c7de(0xcd2)]();if(!_0x2306c4||!_0xb24e45){if(_0x42c7de(0x6de)!=='LOivx'){_0x21d6ce(_0x42c7de(0x706));return;}else _0x4508e8[_0x42c7de(0x3a0)]('click',_0x105c7a);}_0x47e16e(),_0x522bee(_0x2306c4,_0xb24e45);}),document[_0x50976b(0x1d6)](_0x50976b(0x70b))[_0x50976b(0x3a0)]('click',()=>_0x137a40(_0x50976b(0x410),_0x50976b(0x2c8))),document[_0x50976b(0x1d6)](_0x50976b(0xad8))['addEventListener'](_0x50976b(0x288),()=>{const _0x473bd9=_0x50976b,_0x405b08=document[_0x473bd9(0x1d6)]('start-livestream-btn-container')[_0x473bd9(0x329)]['display']===_0x473bd9(0x338);if(_0x405b08)_0x13215d(_0x473bd9(0x824))['then'](async _0x45086f=>{const _0x50e4d5=_0x473bd9;if(_0x50e4d5(0xc81)!=='btGcc'){if(_0x45086f){if(_0x50e4d5(0x57c)!==_0x50e4d5(0x57c))_0x5e811a[_0x50e4d5(0x961)]&&_0x16afd5(_0x700f4f['activeFriendCircleId']);else{_0x4f2e49();const _0x590232=await _0x55dc2d(!![]);if(_0x590232){const _0x413aea=document[_0x50e4d5(0x1d6)](_0x50e4d5(0x47f)),_0x347eaf=document[_0x50e4d5(0x1d6)](_0x50e4d5(0x4ee)),_0x5c906f=document[_0x50e4d5(0x1d6)](_0x50e4d5(0x964)),_0x44adcd=document[_0x50e4d5(0x1d6)](_0x50e4d5(0x902)),_0x51651a=document[_0x50e4d5(0x1d6)]('summary-cancel-btn'),_0x361bc6=document['getElementById'](_0x50e4d5(0x52a));_0x347eaf[_0x50e4d5(0xee2)]=_0x590232,_0x413aea[_0x50e4d5(0x555)]['add'](_0x50e4d5(0x36e)),_0x5c906f[_0x50e4d5(0x4a1)]=()=>{const _0x5d8dda=_0x50e4d5,_0x5d1ff5=_0x347eaf[_0x5d8dda(0xee2)],_0x4d9517=_0xdfbfac[_0x5d8dda(0x2bb)];!_0xdfbfac[_0x5d8dda(0xb63)][_0x4d9517]&&(_0xdfbfac[_0x5d8dda(0xb63)][_0x4d9517]=[]),_0xdfbfac['livestreamReplays'][_0x4d9517]['unshift'](_0x5d1ff5),localStorage[_0x5d8dda(0x287)]('currentLivestreamSession'),_0xdfbfac[_0x5d8dda(0xc03)]=[],_0x31622b(),_0x413aea[_0x5d8dda(0x555)]['remove'](_0x5d8dda(0x36e)),_0x21d6ce(_0x5d8dda(0x583)),_0x137a40(_0x5d8dda(0x2c8),_0x5d8dda(0xf03));},_0x44adcd[_0x50e4d5(0x4a1)]=async()=>{const _0x3cfc07=_0x50e4d5,_0x3d9baf=await _0x55dc2d(!![]);if(_0x3d9baf){if('CZtQf'===_0x3cfc07(0x12d)){let _0x57bcc9=0x0,_0x9e2922=0x0,_0xcf6475=0x0;if(_0x174adb[_0x3cfc07(0x1e2)]==0x4)_0x57bcc9='0x'+_0x47c25f[0x1]+_0xd4495e[0x1],_0x9e2922='0x'+_0x550cda[0x2]+_0xc803ca[0x2],_0xcf6475='0x'+_0x462aca[0x3]+_0x4a6761[0x3];else _0x533800['length']==0x7&&(_0x57bcc9='0x'+_0x3c6eb8[0x1]+_0x331c65[0x2],_0x9e2922='0x'+_0x4de212[0x3]+_0x53066f[0x4],_0xcf6475='0x'+_0x3d37e4[0x5]+_0x18a05f[0x6]);_0x57bcc9/=0xff,_0x9e2922/=0xff,_0xcf6475/=0xff;let _0x4b75ba=_0xc087d0[_0x3cfc07(0x26c)](_0x57bcc9,_0x9e2922,_0xcf6475),_0x50ebed=_0x31a639[_0x3cfc07(0xbf5)](_0x57bcc9,_0x9e2922,_0xcf6475),_0x9039e2=_0x50ebed-_0x4b75ba,_0x39eabf=0x0,_0x32a12d=0x0,_0x4f2b87=0x0;if(_0x9039e2==0x0)_0x39eabf=0x0;else{if(_0x50ebed==_0x57bcc9)_0x39eabf=(_0x9e2922-_0xcf6475)/_0x9039e2%0x6;else{if(_0x50ebed==_0x9e2922)_0x39eabf=(_0xcf6475-_0x57bcc9)/_0x9039e2+0x2;else _0x39eabf=(_0x57bcc9-_0x9e2922)/_0x9039e2+0x4;}}_0x39eabf=_0x780b5d[_0x3cfc07(0x375)](_0x39eabf*0x3c);if(_0x39eabf<0x0)_0x39eabf+=0x168;return _0x4f2b87=(_0x50ebed+_0x4b75ba)/0x2,_0x32a12d=_0x9039e2==0x0?0x0:_0x9039e2/(0x1-_0x375f53['abs'](0x2*_0x4f2b87-0x1)),_0x32a12d=+(_0x32a12d*0x64)[_0x3cfc07(0x491)](0x1),_0x4f2b87=+(_0x4f2b87*0x64)[_0x3cfc07(0x491)](0x1),{'h':_0x39eabf,'s':_0x32a12d,'l':_0x4f2b87};}else _0x347eaf[_0x3cfc07(0xee2)]=_0x3d9baf,_0x21d6ce('已重新生成摘要。');}};const _0xe75907=()=>{const _0x5aae0f=_0x50e4d5;_0x5aae0f(0x790)===_0x5aae0f(0x2e4)?(_0xbbdc1f['assign'](_0x2de047,{'content':'[AI发送了表情：'+_0x4fa31a[_0x5aae0f(0xb95)]+']','displayUrl':_0x1d772f[_0x5aae0f(0x9f5)]}),_0x677a46[_0x5aae0f(0x3a4)][_0x5aae0f(0xb66)](_0x4c4298),_0x18f0c4(),_0x211cba(_0x35b6ab,_0x45fdc9[_0x5aae0f(0x3a4)][_0x5aae0f(0x1e2)]-0x1),_0x6665cc[_0x5aae0f(0x648)]=_0xc4d1f7['scrollHeight']):_0x413aea[_0x5aae0f(0x555)][_0x5aae0f(0x9ad)](_0x5aae0f(0x36e));};_0x51651a[_0x50e4d5(0x4a1)]=_0xe75907,_0x361bc6[_0x50e4d5(0x4a1)]=_0xe75907;}else{}}}}else _0x4c7aef['style']['display']='none';});else{if(_0x473bd9(0xafe)!==_0x473bd9(0x5c7))_0x137a40(_0x473bd9(0x2c8),'livestreamRoom');else{const _0x29cf05=_0x2c6adb['id'],_0x4a769c='customIcon_'+_0x29cf05,_0x41e2cf=_0x43db86['getItem'](_0x4a769c),_0x4dada1=_0x52be55['querySelector'](_0x473bd9(0x90b));if(_0x41e2cf)_0x4dada1['innerHTML']=_0x473bd9(0xa46)+_0x41e2cf+_0x473bd9(0xb57);else{const _0x553928=_0x8dbd76[_0x473bd9(0xb6c)](_0x473bd9(0x7e3)+_0x29cf05+'\x20.app-icon-img,\x20#app-dock-top-right\x20#'+_0x29cf05+_0x473bd9(0x23f))?.['innerHTML'];_0x553928&&(_0x4dada1[_0x473bd9(0xa73)]=_0x553928);}}}});const _0x5160ca=document[_0x50976b(0x1d6)](_0x50976b(0xcd3)),_0x1db617=document[_0x50976b(0x1d6)](_0x50976b(0x2b0));_0x5160ca&&_0x1db617&&(_0x5160ca[_0x50976b(0x3a0)]('click',()=>_0x1db617[_0x50976b(0x288)]()),_0x1db617[_0x50976b(0x3a0)]('change',_0x16bfa2)),document[_0x50976b(0x1d6)](_0x50976b(0x8c9))[_0x50976b(0x3a0)](_0x50976b(0x288),_0xd32b8e);}const _0x437e45='music_library';async function _0x5aae8d(_0x1f3300){const _0x5dfede=await _0x348abc;return new Promise((_0x4149f9,_0x28b92a)=>{const _0x4b128f=_0x4f70;if(_0x4b128f(0x5a1)!==_0x4b128f(0x5a1))_0x5ea3b8[_0x4b128f(0xcab)]=_0x551c9b[_0x4b128f(0x412)];else{const _0x44768e=_0x5dfede[_0x4b128f(0x314)](_0x437e45,_0x4b128f(0xd17)),_0x5be593=_0x44768e[_0x4b128f(0xa49)](_0x437e45),_0x54e9a7=_0x5be593[_0x4b128f(0x4f9)](_0x1f3300);_0x54e9a7[_0x4b128f(0xdab)]=()=>_0x4149f9(_0x54e9a7[_0x4b128f(0xd29)]),_0x54e9a7[_0x4b128f(0x514)]=()=>_0x28b92a(_0x54e9a7['error']);}});}async function _0x12b5ed(){const _0x441838=await _0x348abc;return new Promise((_0x17118a,_0x3ba6b2)=>{const _0x5b3534=_0x4f70,_0x125aea=_0x441838[_0x5b3534(0x314)](_0x437e45,_0x5b3534(0xd17)),_0x2a2900=_0x125aea[_0x5b3534(0xa49)](_0x437e45),_0x206656=_0x2a2900['getAll']();_0x206656[_0x5b3534(0xdab)]=()=>_0x17118a(_0x206656[_0x5b3534(0xd29)]),_0x206656[_0x5b3534(0x514)]=()=>_0x3ba6b2(_0x206656[_0x5b3534(0x27f)]);});}async function _0x455ade(_0x23f4a4){const _0x4f3759=await _0x348abc;return new Promise((_0x2912d9,_0x185c85)=>{const _0x565932=_0x4f70;if('UBGRg'!==_0x565932(0xe07)){const _0x1e6ef2=_0x4a32aa[_0x565932(0x21c)](_0x54f4fe);_0x236678[_0x565932(0x329)][_0x565932(0x5b7)]=_0x565932(0x8a1)+_0x1e6ef2+'\x27)';}else{const _0x5cbe6a=_0x4f3759['transaction'](_0x437e45,_0x565932(0xece)),_0x5b0e02=_0x5cbe6a[_0x565932(0xa49)](_0x437e45),_0x1c1d8b=_0x5b0e02[_0x565932(0x2df)](_0x23f4a4);_0x1c1d8b['onsuccess']=()=>_0x2912d9(_0x1c1d8b[_0x565932(0xd29)]),_0x1c1d8b[_0x565932(0x514)]=()=>_0x185c85(_0x1c1d8b[_0x565932(0x27f)]);}});}async function _0x55bad0(_0x4ea030){const _0x418d1d=await _0x348abc;return new Promise((_0x1f1762,_0x3eec63)=>{const _0x554a38=_0x4f70;if('HmFHH'===_0x554a38(0x8f2))_0x212a72=_0x41f61e['id'];else{const _0x32051f=_0x418d1d['transaction'](_0x437e45,_0x554a38(0xece)),_0x469acc=_0x32051f[_0x554a38(0xa49)](_0x437e45),_0x53b8bb=_0x469acc['delete'](_0x4ea030);_0x53b8bb[_0x554a38(0xdab)]=()=>_0x1f1762(),_0x53b8bb[_0x554a38(0x514)]=()=>_0x3eec63(_0x53b8bb[_0x554a38(0x27f)]);}});}let _0x36b11c={'audio':null,'cover':null,'info':null,'lyrics':null};const _0x2d4867={'audio':document[_0x8dde82(0x1d6)](_0x8dde82(0xae0)),'cover':document[_0x8dde82(0x1d6)]('altar-slot-cover'),'info':document['getElementById'](_0x8dde82(0x9a1)),'lyrics':document['getElementById'](_0x8dde82(0x6a9))},_0x38a64d={'audio':document[_0x8dde82(0x1d6)]('audio-file-input'),'cover':document[_0x8dde82(0x1d6)](_0x8dde82(0x11b)),'info':document[_0x8dde82(0x1d6)](_0x8dde82(0x7ed)),'lyrics':document[_0x8dde82(0x1d6)](_0x8dde82(0xdf2))};function _0x33e44a(){const _0x13fe74=_0x8dde82;if(_0x13fe74(0xdec)===_0x13fe74(0xdec)){const _0x21a584=document[_0x13fe74(0x1d6)](_0x13fe74(0x8c9));_0x36b11c[_0x13fe74(0xe3c)]&&_0x36b11c[_0x13fe74(0x3d2)]?_0x21a584['disabled']=![]:_0x21a584[_0x13fe74(0x2c5)]=!![];}else _0x3aeedb[_0x13fe74(0xb66)](_0x20ffc3);}async function _0x16bfa2(_0x39024d){const _0x234479=_0x8dde82;if('gKSvq'===_0x234479(0xa32)){const _0xa38d6e=_0x39024d[_0x234479(0x272)][_0x234479(0x6d4)][0x0];if(!_0xa38d6e)return;_0x1a8bbc(!![],_0x234479(0x229));const _0x552a30=document[_0x234479(0x1d6)](_0x234479(0xcd3)),_0x3a197f=document['getElementById'](_0x234479(0x8c9));_0x552a30[_0x234479(0x555)][_0x234479(0x9ad)](_0x234479(0x1eb)),_0x3a197f[_0x234479(0x2c5)]=!![],_0x552a30[_0x234479(0xb6c)](_0x234479(0x152))[_0x234479(0x101)]=_0xa38d6e[_0x234479(0xb95)];try{const _0x44afb6=await JSZip['loadAsync'](_0xa38d6e),_0x2f9a35={'audio':null,'cover':null,'info':null,'lyrics':null},_0x3b3337=[];_0x44afb6['forEach']((_0x14c1d5,_0x4bd008)=>{const _0x4a01e7=_0x234479,_0x544651=_0x4bd008[_0x4a01e7(0xb95)];if(/\.(mp3|flac)$/i['test'](_0x544651))_0x3b3337[_0x4a01e7(0xb66)](_0x4bd008[_0x4a01e7(0x692)](_0x4a01e7(0xc4a))[_0x4a01e7(0x94f)](_0x3b481b=>_0x2f9a35[_0x4a01e7(0xe3c)]=new File([_0x3b481b],_0x4bd008[_0x4a01e7(0xb95)])));else{if(/\.(jpg|jpeg|png|webp)$/i['test'](_0x544651)){if(_0x4a01e7(0xbb2)!==_0x4a01e7(0xbb2)){if(_0x27df6a<0x0||_0x3f91c0>=_0x24a8de[_0x4a01e7(0x1e2)])return;_0x1c1016=_0xed3c49;const _0x543a01=_0x437d74[_0x121748];_0x50f58c[_0x4a01e7(0xcab)]=_0x543a01[_0x4a01e7(0xb21)]||_0x543a01[_0x4a01e7(0x9f5)],_0x44e098[_0x4a01e7(0xe7f)](),_0x366e90(),_0x65d252();}else _0x3b3337['push'](_0x4bd008['async'](_0x4a01e7(0xc4a))[_0x4a01e7(0x94f)](_0x467242=>_0x2f9a35[_0x4a01e7(0x267)]=new File([_0x467242],_0x4bd008[_0x4a01e7(0xb95)])));}else{if(/\.(txt|json)$/i['test'](_0x544651))_0x3b3337[_0x4a01e7(0xb66)](_0x4bd008[_0x4a01e7(0x692)](_0x4a01e7(0xc4a))[_0x4a01e7(0x94f)](_0x58d0b7=>_0x2f9a35[_0x4a01e7(0x3d2)]=new File([_0x58d0b7],_0x4bd008['name'])));else{if(/\.lrc$/i[_0x4a01e7(0xa9b)](_0x544651)){if(_0x4a01e7(0xb4a)===_0x4a01e7(0xb4a))_0x3b3337[_0x4a01e7(0xb66)](_0x4bd008[_0x4a01e7(0x692)]('blob')['then'](_0x315f7c=>_0x2f9a35[_0x4a01e7(0x901)]=new File([_0x315f7c],_0x4bd008['name'])));else{_0x12bb16+=_0x4a01e7(0x545);if(_0x43e3bf[_0x4a01e7(0x348)][_0x4a01e7(0x631)])_0x301065+=_0x4a01e7(0x139)+_0x49f416[_0x4a01e7(0x348)][_0x4a01e7(0x631)]+'\x0a\x0a';if(_0x24cdda[_0x4a01e7(0x348)][_0x4a01e7(0xed7)])_0x5c857c+=_0x4a01e7(0x136)+_0x46ba25[_0x4a01e7(0x348)][_0x4a01e7(0xed7)]+'\x0a\x0a';if(_0x4f63b3[_0x4a01e7(0x348)]['response_patterns'])_0x4429df+=_0x4a01e7(0x6f0)+_0x5aee04[_0x4a01e7(0x348)][_0x4a01e7(0x1ce)]+'\x0a\x0a';}}}}}}),await Promise[_0x234479(0x7c7)](_0x3b3337);if(!_0x2f9a35['audio']||!_0x2f9a35[_0x234479(0x3d2)])throw new Error(_0x234479(0xf01));_0x36b11c=_0x2f9a35,_0x552a30[_0x234479(0x555)][_0x234479(0x1cd)](_0x234479(0x1eb)),_0x3a197f['disabled']=![],_0x1a8bbc(![]),_0x21d6ce(_0x234479(0xaa4));}catch(_0x2dab89){_0x234479(0xa4c)!==_0x234479(0xa4c)?(_0x496dcd('刷新聊天失败:\x20'+_0x1887bc[_0x234479(0x8ac)]),_0x13312a(_0x59b113,_0x3597a7)):(_0x1a8bbc(![]),console[_0x234479(0x27f)](_0x234479(0x50a),_0x2dab89),_0x21d6ce(_0x234479(0x543)+_0x2dab89[_0x234479(0x8ac)]),_0x552a30[_0x234479(0xb6c)](_0x234479(0x152))[_0x234479(0x101)]='点击选择包含音频、封面、信息、歌词的\x20.zip\x20压缩包');}finally{_0x39024d[_0x234479(0x272)][_0x234479(0xee2)]='';}}else _0x1f4005[_0x234479(0x57a)]();}document[_0x8dde82(0x1d6)](_0x8dde82(0x8c9))[_0x8dde82(0x3a0)](_0x8dde82(0x288),async()=>{const _0x539aae=_0x8dde82;if(!_0x36b11c['audio']||!_0x36b11c[_0x539aae(0x3d2)]){if('qknTE'===_0x539aae(0x923))_0x341ec3[_0x539aae(0x27f)]('快速更新档案失败:',_0x3d0c5b);else{_0x21d6ce('真是的，必需的祭品都还没准备好！');return;}}await _0xd32b8e();}),document[_0x8dde82(0x1d6)]('upload-music-button')[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x2c09b3=_0x8dde82;_0x2c09b3(0x370)===_0x2c09b3(0x135)?(_0x45466e[_0x2c09b3(0xb49)]=!![],_0xab8020()):_0x137a40(_0x2c09b3(0x688),_0x2c09b3(0xd3a));}),document['getElementById'](_0x8dde82(0x796))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x5d91cf=_0x8dde82;'hXYTl'===_0x5d91cf(0x7fa)?_0x137a40('musicLibrary','musicUploadAltar'):_0x18aaad(_0x25416c['id']);});let _0x3407ef=![];async function _0xd32b8e(){const _0x5a81ce=_0x8dde82;if(_0x3407ef){if(_0x5a81ce(0x52b)!=='xlAIz')_0x7fb478[_0x5a81ce(0x7ec)](_0x5a81ce(0xc77)),_0x5ae29a();else{console[_0x5a81ce(0x7ec)](_0x5a81ce(0x424));return;}}_0x3407ef=!![],_0x1a8bbc(!![],_0x5a81ce(0xd83));try{if(_0x5a81ce(0x899)===_0x5a81ce(0x899)){const _0x32c40f=await _0x36b11c[_0x5a81ce(0x3d2)][_0x5a81ce(0x7ee)]();let _0x368ed9;if(_0x32c40f[_0x5a81ce(0xcd2)]()[_0x5a81ce(0xb91)]('{'))_0x368ed9=JSON['parse'](_0x32c40f);else{_0x368ed9={};const _0x364bb8=_0x32c40f[_0x5a81ce(0xc12)]('\x0a');_0x364bb8['forEach'](_0x417bd1=>{const _0x56c102=_0x5a81ce,_0x4f52b8=_0x417bd1[_0x56c102(0xc12)](/:\s|：\s/);if(_0x4f52b8[_0x56c102(0x1e2)]===0x2){const _0x16cd70=_0x4f52b8[0x0]['trim'](),_0x54ecdb=_0x4f52b8[0x1][_0x56c102(0xcd2)](),_0x13563b={'歌名':_0x56c102(0x83e),'艺术家':'歌手','专辑':'专辑'};_0x13563b[_0x16cd70]&&(_0x56c102(0xd7f)==='Vqiba'?_0x368ed9[_0x13563b[_0x16cd70]]=_0x54ecdb:_0x22a6f3[_0x56c102(0xee2)]=_0x56c102(0xcf6)+_0x10808b['message']);}});if(!_0x368ed9[_0x5a81ce(0x83e)]){if(_0x5a81ce(0x939)!==_0x5a81ce(0x63a))throw new Error('在你那乱七八糟的文本里没找到“歌名”！');else throw new _0x3260a1(_0x5a81ce(0x868));}_0x368ed9['歌曲ID']=_0x5a81ce(0x574)+Date[_0x5a81ce(0x4a2)]()+'\x20';}const _0x2f76e7=_0x5a81ce(0x574)+(_0x368ed9[_0x5a81ce(0x27a)]||Date[_0x5a81ce(0x4a2)]()),_0x67f1b4={'id':_0x2f76e7,'info':_0x368ed9,'audio':_0x36b11c[_0x5a81ce(0xe3c)],'cover':_0x36b11c['cover'],'lyrics':_0x36b11c[_0x5a81ce(0x901)]?await _0x36b11c[_0x5a81ce(0x901)][_0x5a81ce(0x7ee)]():''};console[_0x5a81ce(0x7ec)](_0x5a81ce(0x7b5),_0x67f1b4['id'],_0x368ed9[_0x5a81ce(0x83e)]),await _0x455ade(_0x67f1b4),_0x1a8bbc(![]),_0x21d6ce(_0x5a81ce(0x237)+_0x368ed9['歌曲名称']+_0x5a81ce(0x836)),_0x137a40('musicLibrary',_0x5a81ce(0x688)),setTimeout(_0x8b4724,0x32);}else return;}catch(_0x5927f7){_0x5a81ce(0xb72)===_0x5a81ce(0xb75)?_0x4187b5['push'](_0x5a81ce(0x7a6)+_0x463444[_0x5a81ce(0x30b)][_0x5a81ce(0xdcd)][_0x5a81ce(0x8b8)](0x0,0x2)[_0x5a81ce(0xd9a)]('、')):(_0x1a8bbc(![]),console[_0x5a81ce(0x27f)](_0x5a81ce(0xd64),_0x5927f7),_0x21d6ce(_0x5a81ce(0x823)+_0x5927f7[_0x5a81ce(0x8ac)]+'\x20'));}finally{_0x5a81ce(0xb7d)!==_0x5a81ce(0xb7d)?(_0x3b6811['style'][_0x5a81ce(0xc66)]=_0x5a81ce(0x338),_0x59c7fe[_0x5a81ce(0x4a1)]=_0x16416c[_0x5a81ce(0x4a1)]=_0x1a5615[_0x5a81ce(0x4a1)]=null,_0x51572c[_0x5a81ce(0x255)](_0x5a81ce(0xc31),_0x2ea46f),_0x3ba17f(_0x86b5e6)):_0x3407ef=![];}}async function _0x8b4724(){const _0x4250df=_0x8dde82,_0x423b64=document['getElementById'](_0x4250df(0x8fb));_0x423b64['innerHTML']='';const _0x2f4c3f=await _0x12b5ed();console[_0x4250df(0x7ec)]('从圣殿取出歌曲:',_0x2f4c3f);if(_0x2f4c3f[_0x4250df(0x1e2)]===0x0){if(_0x4250df(0x3c1)!==_0x4250df(0xddf)){_0x423b64['innerHTML']=_0x4250df(0xe9d);return;}else{_0x3ba7b4('说了要\x20.ttf\x20文件，你是听不懂吗？');return;}}_0x2f4c3f[_0x4250df(0x6d9)]((_0x22dc2c,_0x5c097f)=>(_0x22dc2c['info']['歌曲名称']||'')[_0x4250df(0x42d)](_0x5c097f[_0x4250df(0x3d2)][_0x4250df(0x83e)]||''));for(const _0x3c7194 of _0x2f4c3f){const _0x21069c=document['createElement'](_0x4250df(0xce2));_0x21069c[_0x4250df(0x213)]='music-library-item',_0x21069c['dataset'][_0x4250df(0x211)]=_0x3c7194['id'];const _0xf6378e=_0x3c7194[_0x4250df(0x267)]?URL['createObjectURL'](_0x3c7194[_0x4250df(0x267)]):_0x1af29b;_0x21069c[_0x4250df(0xa73)]='\x0a\x20\x20<img\x20src=\x22'+_0xf6378e+_0x4250df(0x3e9)+(_0x3c7194[_0x4250df(0x3d2)][_0x4250df(0x83e)]||_0x4250df(0x518))+_0x4250df(0x9e7)+(_0x3c7194[_0x4250df(0x3d2)]['歌手']||_0x4250df(0x9e0))+_0x4250df(0x645);let _0x328740=null;const _0x2eb0a5=_0x41396d=>{const _0x3625e7=_0x4250df;if(_0x3625e7(0xb0d)==='RTLvy'){if(_0x41396d[_0x3625e7(0x23c)]===0x2)return;_0x328740=setTimeout(async()=>{const _0x343e43=_0x3625e7;if(_0x343e43(0xdc7)!==_0x343e43(0xdc7))_0x17507d();else{if(_0x41396d[_0x343e43(0x8c7)]===_0x343e43(0xa6c))_0x41396d[_0x343e43(0xc7a)]();const _0x5e25b1=await _0x13215d('确定要从圣殿中永久删除《'+_0x3c7194[_0x343e43(0x3d2)]['歌曲名称']+_0x343e43(0x3ab));_0x5e25b1&&(await _0x55bad0(_0x3c7194['id']),await _0x8b4724(),_0x21d6ce(_0x343e43(0x3b4)));}},0x320);}else _0x157bea['linkedWorldBookIds']=_0x427c45[_0x3625e7(0x5ee)][_0x3625e7(0xeb3)](_0x155800=>!_0x504317[_0x3625e7(0xc35)](_0x155800));},_0x4e2915=()=>{const _0x114899=_0x4250df;if(_0x114899(0xff)!==_0x114899(0xff)){const _0x55a129=_0x3ad485['value'][_0x114899(0xcd2)]()['includes'](_0x1086cd);_0x5ad769[_0x114899(0x2c5)]=_0x55a129;}else clearTimeout(_0x328740);};_0x21069c['addEventListener']('mousedown',_0x2eb0a5),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0xc67),_0x4e2915),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0xeee),_0x4e2915),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0xa6c),_0x2eb0a5,{'passive':![]}),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0xb8b),_0x4e2915),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0x28a),_0x4e2915),_0x21069c[_0x4250df(0x3a0)](_0x4250df(0x288),_0x584257=>{const _0x1e5b0a=_0x4250df;if('bORcL'===_0x1e5b0a(0x58f)){if(_0x328740)clearTimeout(_0x328740);if(_0x584257[_0x1e5b0a(0x859)])return;setTimeout(()=>{const _0x515e11=_0x1e5b0a;_0x515e11(0xb23)!==_0x515e11(0xb23)?_0x5aba86=0x0:_0x328740&&_0x62eb15(_0x3c7194['id'],_0x2f4c3f['map'](_0x4ecbe5=>_0x4ecbe5['id']));},0x32);}else _0x1cf2b5[_0x1e5b0a(0xd22)]={..._0x843ecf['activeQuote']};}),_0x423b64[_0x4250df(0x5b8)](_0x21069c);}}_0x159a28[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x5a0012=_0x8dde82;_0x21d6ce(_0x5a0012(0x700));}),_0x1c459d[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x18a101=_0x8dde82;_0x21d6ce(_0x18a101(0x61a));});let _0x34a7ad=[],_0x499097=-0x1;async function _0x62eb15(_0x56c2b1,_0x97d0f6){const _0x23ca2b=_0x8dde82,_0x1c9471=await _0x5aae8d(_0x56c2b1);if(!_0x1c9471)return;_0x45ccc7={'title':_0x1c9471['info']['歌曲名称']||_0x23ca2b(0x518),'artist':_0x1c9471['info']['歌手']||_0x23ca2b(0x9e0),'cover':_0x1c9471[_0x23ca2b(0x267)]?URL[_0x23ca2b(0x21c)](_0x1c9471[_0x23ca2b(0x267)]):_0x1af29b,'isFromLibrary':!![]};const _0x3aa06b=URL[_0x23ca2b(0x21c)](_0x1c9471[_0x23ca2b(0xe3c)]);_0x3242a5[_0x23ca2b(0xcab)]=_0x3aa06b,_0x3242a5['play'](),_0x488403();}async function _0x488403(){const _0x429543=_0x8dde82,_0x543399=document[_0x429543(0x1d6)](_0x429543(0x3fc)),_0x4c931a=document[_0x429543(0x1d6)]('widget-title'),_0x1dcf91=document['getElementById'](_0x429543(0x354)),_0x318f6d=document[_0x429543(0x1d6)](_0x429543(0x6b6)),_0x38196f=_0x45ccc7;_0x38196f&&_0x38196f[_0x429543(0x4bb)]?(_0x4c931a['textContent']=_0x38196f[_0x429543(0x13b)],_0x1dcf91[_0x429543(0x101)]=_0x38196f[_0x429543(0x7dc)],_0x543399[_0x429543(0x555)][_0x429543(0x1cd)](_0x429543(0x2b6)),_0x543399[_0x429543(0x329)]['setProperty']('--widget-cover-image',_0x429543(0x1c2)+_0x38196f['cover']+')')):(_0x4c931a[_0x429543(0x101)]=_0x429543(0x573),_0x1dcf91[_0x429543(0x101)]=_0x429543(0x4db),_0x543399['classList'][_0x429543(0x9ad)]('is-playing'),_0x318f6d[_0x429543(0x329)][_0x429543(0x8eb)](_0x429543(0x46f),_0x429543(0x338)));}function _0x1ce3b3(){const _0x167220=_0x8dde82;if(_0x167220(0xca7)!==_0x167220(0xca7)){const _0x1892e8=_0x3c20fd[_0x167220(0xb6c)](_0x167220(0x32f));_0x23a605(_0x167220(0xa53)+_0x4599a0['id'])[_0x167220(0x94f)](_0x2ead3e=>{const _0x3cd737=_0x167220;_0x2ead3e&&(_0x1892e8['src']=_0x15214e[_0x3cd737(0x21c)](_0x2ead3e));});}else{const _0x36e8b4=document[_0x167220(0x1d6)](_0x167220(0x8e2));if(!_0x36e8b4)return;const _0x598177=document[_0x167220(0x1d6)]('player-cover'),_0x3bc6e4=document[_0x167220(0x1d6)]('player-title'),_0xcd68dc=document[_0x167220(0x1d6)](_0x167220(0x4a6)),_0x340c93=document[_0x167220(0x1d6)](_0x167220(0x13a)),_0x1b6bd3=_0xdfbfac[_0x167220(0xddd)][_0xdfbfac[_0x167220(0x55e)]],_0x5132da=_0xdfbfac[_0x167220(0xb49)],_0x905000=document[_0x167220(0x1d6)](_0x167220(0xa44))[_0x167220(0x555)][_0x167220(0xcbc)](_0x167220(0x691));_0x1b6bd3&&_0x905000?(_0x36e8b4[_0x167220(0x555)][_0x167220(0x9ad)](_0x167220(0x8d5)),_0x1b6bd3[_0x167220(0x6a3)]?_0x167220(0xd3b)!==_0x167220(0xd3b)?_0x2fab57[_0x167220(0x3a0)](_0x167220(0x288),_0x1efe2d):_0x4131e2(_0x1b6bd3[_0x167220(0x6a3)])['then'](_0x3cc00c=>{const _0xa322bd=_0x167220;if(_0x3cc00c)_0x598177[_0xa322bd(0xcab)]=URL[_0xa322bd(0x21c)](_0x3cc00c);}):_0x598177[_0x167220(0xcab)]=_0x1b6bd3[_0x167220(0x520)]||_0x1af29b,_0x3bc6e4['textContent']=_0x1b6bd3[_0x167220(0x3c7)]||_0x167220(0x518),_0xcd68dc[_0x167220(0x101)]=_0x1b6bd3[_0x167220(0x7dc)]||_0x167220(0x9e0),_0x340c93[_0x167220(0x101)]=_0x5132da?'❚❚':'▶'):_0x36e8b4[_0x167220(0x555)][_0x167220(0x1cd)]('hidden');}}if(_0x159a28){if(_0x8dde82(0xc28)===_0x8dde82(0xc28))_0x159a28[_0x8dde82(0x3a0)]('click',()=>{const _0x53bc82=_0x8dde82;if(_0x34a7ad[_0x53bc82(0x1e2)]===0x0)return;_0x499097=(_0x499097+0x1)%_0x34a7ad['length'],_0x62eb15(_0x34a7ad[_0x499097],_0x34a7ad);});else try{const _0x4a50f1=_0x5402bf[_0x8dde82(0xc44)](_0x12e73d['getItem']('badgeState')||'{}'),_0x2b09bf={..._0x4a50f1,..._0x87f85};_0x46bb40['setItem'](_0x8dde82(0xd8c),_0xf3cbb6[_0x8dde82(0xea5)](_0x2b09bf));}catch(_0x3a0e76){_0x356c66[_0x8dde82(0x27f)](_0x8dde82(0x160),_0x3a0e76);}}if(_0x1c459d){if('LkHoR'==='aKkzn'){if(_0x4dd0ed['musicPlaylist']['length']===0x0)return;_0x1d72bd[_0x8dde82(0x55e)]=(_0x4714b2[_0x8dde82(0x55e)]-0x1+_0x55f281[_0x8dde82(0xddd)][_0x8dde82(0x1e2)])%_0x5b26a6[_0x8dde82(0xddd)][_0x8dde82(0x1e2)];const _0x5aba20=_0x20a5c3[_0x8dde82(0xddd)][_0x2f6b28[_0x8dde82(0x55e)]]['id'];_0x591657(_0x5aba20,_0x6c4aec[_0x8dde82(0xddd)][_0x8dde82(0x266)](_0x147a1f=>_0x147a1f['id']));}else _0x1c459d[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x2c247b=_0x8dde82;if(_0x34a7ad[_0x2c247b(0x1e2)]===0x0)return;_0x499097=(_0x499097-0x1+_0x34a7ad['length'])%_0x34a7ad[_0x2c247b(0x1e2)],_0x62eb15(_0x34a7ad[_0x499097],_0x34a7ad);});}_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0xe7f),()=>{_0xdfbfac['isPlaying']=!![],_0x2cc20d();}),_0x3242a5[_0x8dde82(0x3a0)](_0x8dde82(0x57a),()=>{const _0x191e02=_0x8dde82;_0xdfbfac[_0x191e02(0xb49)]=![],_0x2cc20d();}),_0x3242a5['addEventListener'](_0x8dde82(0xcc8),()=>{const _0x10d799=_0x8dde82;if(_0x10d799(0x625)!==_0x10d799(0x625))_0x2bcd21+=_0x10d799(0x38c)+_0x5cf92f[_0x10d799(0x3c7)]+_0x10d799(0x5a0)+_0x46e940['artist']+')';else{if(_0x159a28)_0x159a28['click']();}});function _0x57e15b(){const _0x29dfdf=_0x8dde82;if('sEmVd'===_0x29dfdf(0x90c)){const _0x120498=_0x1d801f();if(!_0x120498)return;_0x4ca7e0[_0x29dfdf(0xa73)]='',_0x3b11fd['value']='';if(_0x120498['type']==='group'){if(_0x29dfdf(0x5e3)==='OYUKR')_0x120498[_0x29dfdf(0x41b)][_0x29dfdf(0xb85)](_0xc9c2d4=>{const _0x4dc1e5=_0x29dfdf;if(_0x4dc1e5(0x256)==='GrVnI'){const _0xbebc1=_0x5844c7(_0xc9c2d4);if(_0xbebc1){const _0x1adad9=document[_0x4dc1e5(0x8f1)](_0x4dc1e5(0x805));_0x1adad9[_0x4dc1e5(0xee2)]=_0xbebc1['id'],_0x1adad9[_0x4dc1e5(0x101)]=_0xbebc1[_0x4dc1e5(0xb95)],_0x4ca7e0[_0x4dc1e5(0x5b8)](_0x1adad9);}}else _0x4f11c5[_0x4dc1e5(0x3a4)]=[];}),_0x388907[_0x29dfdf(0x329)][_0x29dfdf(0xc66)]=_0x29dfdf(0xc38);else{const _0x225ea1=_0x827b5a['friendCircles'][_0x29dfdf(0x76b)](_0x21f1f3=>_0x21f1f3['id']===_0x2f65c4);_0x225ea1&&(_0x225ea1[_0x29dfdf(0xb95)]=_0x54719a,_0x225ea1[_0x29dfdf(0xacb)]=_0x2cf3ec,_0x225ea1[_0x29dfdf(0x527)]=_0x28de52);}}else{if(_0x29dfdf(0x773)!==_0x29dfdf(0x773)){_0x57e115(![]),_0x256339(_0x29dfdf(0x2f5));return;}else _0x388907['style']['display']='none';}_0x53e66b['classList'][_0x29dfdf(0x1cd)](_0x29dfdf(0x36e)),_0x3b11fd[_0x29dfdf(0xc10)]();}else _0x1b10ab(),_0x3f131a(_0x29dfdf(0x401),_0x29dfdf(0x410));}function _0x92543e(){const _0x2b298e=_0x8dde82;if(_0x2b298e(0x67e)!==_0x2b298e(0x1ae)){const _0x155ba5=parseFloat(_0x3b11fd['value']);if(isNaN(_0x155ba5)||_0x155ba5<=0x0){_0x21d6ce(_0x2b298e(0x6dc));return;}const _0x5861fd=_0x1d801f();let _0x307ba2=null;if(_0x5861fd[_0x2b298e(0x8c7)]===_0x2b298e(0x304)){if(_0x2b298e(0x921)===_0x2b298e(0xd5d)){const _0x58b028=_0x4af39f(_0x42504e);if(_0x58b028){const _0x18e666=_0x57adf7[_0x2b298e(0x8f1)]('option');_0x18e666['value']=_0x58b028['id'],_0x18e666[_0x2b298e(0x101)]=_0x58b028['name'],_0x367b94['appendChild'](_0x18e666);}}else _0x307ba2=_0x4ca7e0['value'];}else'QlDtd'!==_0x2b298e(0xdfe)?(_0x1befc2[_0x2b298e(0xc7a)](),_0x4f7ec5()):_0x307ba2=_0x5861fd['participantIds'][0x0];const _0x2a716a=_0x58761c(_0x5861fd['id']),_0x276bc6={'role':_0x2b298e(0xa29),'type':_0x2b298e(0x3d7),'content':'[用户向\x20'+(_0x5844c7(_0x307ba2)?.['name']||'未知')+_0x2b298e(0xbba)+_0x155ba5+']','amount':_0x155ba5,'recipientId':_0x307ba2,'senderId':_0x2a716a['id'],'timestamp':Date[_0x2b298e(0x4a2)]()};_0xdfbfac[_0x2b298e(0x3a4)][_0x2b298e(0xb66)](_0x276bc6),_0x1aa46f(),_0x192646(),_0x53e66b[_0x2b298e(0x555)]['remove'](_0x2b298e(0x36e));}else{const _0x259c4f=_0x59f403(_0x1a56d[_0x2b298e(0x6b3)]);_0x259c4f&&(_0x495d9d=_0x259c4f[_0x2b298e(0xb95)],_0x5e0d50=_0x259c4f['avatar']);}}async function _0xef0c22(_0x260d53){const _0x20eac3=_0x8dde82,_0x240d90=_0x5844c7(_0x260d53);if(!_0x240d90)return;const _0x348fdd=await _0x13215d('确定要永久清空【'+_0x240d90[_0x20eac3(0xb95)]+_0x20eac3(0xdb3));if(!_0x348fdd)return;const _0x5a7ee0=_0xdfbfac['diaries'][_0x20eac3(0xd30)](_0x226196=>_0x226196[_0x20eac3(0x113)]===_0x260d53);_0x5a7ee0>-0x1?_0x20eac3(0x3e3)==='jsCCA'?(_0x1176c3[_0x20eac3(0x27f)]('杂项导出失败:',_0x41643c),_0x538aaf(_0x20eac3(0x104)+_0x1362cb[_0x20eac3(0x8ac)])):(_0xdfbfac[_0x20eac3(0x26a)]['splice'](_0x5a7ee0,0x1),_0x31622b(),_0x5e4224(),_0x21d6ce('【'+_0x240d90[_0x20eac3(0xb95)]+_0x20eac3(0x1a3))):_0x21d6ce('这本日记本来就是空的，你还想清空什么？');}function _0x52a301(){const _0x5a2af3=_0x8dde82,_0x394186=document['getElementById'](_0x5a2af3(0xd4d));_0x394186[_0x5a2af3(0xa73)]='';const _0x1b9451=_0xdfbfac[_0x5a2af3(0x94d)]['filter'](_0x1ce7c5=>_0xdfbfac[_0x5a2af3(0xc1b)][_0x5a2af3(0x7d1)](_0x1fc272=>_0x1fc272['type']==='private'&&_0x1fc272['participantIds'][_0x5a2af3(0xc35)](_0x1ce7c5['id'])));if(_0x1b9451[_0x5a2af3(0x1e2)]===0x0){_0x394186[_0x5a2af3(0xa73)]=_0x5a2af3(0x874);return;}_0x1b9451['forEach'](_0x29ef1d=>{const _0x298ef1=_0x5a2af3,_0xd77380=document[_0x298ef1(0x8f1)]('li');_0xd77380[_0x298ef1(0x213)]=_0x298ef1(0x9f1),_0xd77380[_0x298ef1(0x63f)][_0x298ef1(0xe9)]=_0x29ef1d['id'],_0xd77380[_0x298ef1(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x29ef1d[_0x298ef1(0x584)]||_0x1af29b)+_0x298ef1(0x49c)+_0x29ef1d[_0x298ef1(0xb95)]+_0x298ef1(0xe1a)+_0x29ef1d[_0x298ef1(0xb95)]+_0x298ef1(0xeba),_0xd77380[_0x298ef1(0xb6c)]('.char-info-wrapper')[_0x298ef1(0x3a0)]('click',()=>_0x3b7ec4(_0x29ef1d['id'])),_0xd77380[_0x298ef1(0xb6c)](_0x298ef1(0x346))[_0x298ef1(0x3a0)](_0x298ef1(0x288),async _0x383713=>{const _0x1bcb5b=_0x298ef1;_0x383713[_0x1bcb5b(0xa37)]();const _0x43857d=_0x5844c7(_0x29ef1d['id']);if(!_0x43857d)return;const _0x40ab4b=await _0x13215d(_0x1bcb5b(0x2de)+_0x43857d['name']+'】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。');if(_0x40ab4b){_0x1a8bbc(!![],_0x1bcb5b(0xd73)+_0x43857d[_0x1bcb5b(0xb95)]+_0x1bcb5b(0x28b));const _0x30b486=[_0x1bcb5b(0xd87),_0x1bcb5b(0x35c),'abyss',_0x1bcb5b(0x452),_0x1bcb5b(0x75f),'wants',_0x1bcb5b(0xc15),_0x1bcb5b(0x29a)];for(const _0x6535a0 of _0x30b486){const _0x5b3822='snoop_'+_0x43857d['id']+'_'+_0x6535a0;await _0x2d4595(_0x5b3822);}_0x1a8bbc(![]),_0x21d6ce('【'+_0x43857d[_0x1bcb5b(0xb95)]+_0x1bcb5b(0x324));}}),_0x394186[_0x298ef1(0x5b8)](_0xd77380);});}let _0x175cae=null,_0x5d9dc6=null;function _0x2a1057(){const _0x57b64c=_0x8dde82,_0x2c60e2=new Date(),_0x3ed8c0=document['getElementById'](_0x57b64c(0xdac)),_0xc95de6=document[_0x57b64c(0x1d6)]('snoop-home-date'),_0x1f720a=document['getElementById'](_0x57b64c(0x223));_0x3ed8c0&&_0xc95de6&&(_0x57b64c(0x5cb)!=='xtVQd'?(_0x5b5d4f(),_0x2c4c3e(_0x57b64c(0x776),_0x57b64c(0x410))):(_0x3ed8c0[_0x57b64c(0x101)]=_0x2c60e2[_0x57b64c(0x4f1)](_0x57b64c(0x731),{'hour':'2-digit','minute':'2-digit','hour12':![]}),_0xc95de6[_0x57b64c(0x101)]=_0x2c60e2[_0x57b64c(0xea3)]('zh-CN',{'month':_0x57b64c(0x8a8),'day':_0x57b64c(0xbc7),'weekday':'long'}))),_0x1f720a&&('UYDya'===_0x57b64c(0xbb6)?_0x42bcdf[_0x57b64c(0x61f)][_0x57b64c(0xb82)][_0x57b64c(0x2f0)]():_0x1f720a['innerHTML']=_0x57b64c(0xd49)+_0x2c60e2[_0x57b64c(0x4f1)]('zh-CN',{'hour':_0x57b64c(0xc49),'minute':_0x57b64c(0xc49),'hour12':![]})+_0x57b64c(0x418));}function _0x3b7ec4(_0x22d99a){const _0x4f5020=_0x8dde82;if(_0x4f5020(0x5f8)!==_0x4f5020(0x5da)){_0x175cae=_0x22d99a;const _0x19ee7a=_0x5844c7(_0x22d99a);if(!_0x19ee7a)return;const _0x17ee8a=document[_0x4f5020(0x1d6)]('snoop-phone-screen'),_0x6fdde=document[_0x4f5020(0x1d6)]('snoop-home-clock');if(_0x6fdde)_0x6fdde[_0x4f5020(0x9ad)]();const _0x49dd87=document['getElementById']('snoop-dock');if(_0x49dd87)_0x49dd87[_0x4f5020(0x9ad)]();_0x17ee8a['insertAdjacentHTML'](_0x4f5020(0x439),_0x4f5020(0xac1)),_0x17ee8a[_0x4f5020(0xc04)]('beforeend',_0x4f5020(0x18e)),document[_0x4f5020(0x1d6)](_0x4f5020(0x269))[_0x4f5020(0x101)]='',_0xcdd333();if(_0x5d9dc6)clearInterval(_0x5d9dc6);_0x2a1057(),_0x5d9dc6=setInterval(_0x2a1057,0x2710),_0x137a40(_0x4f5020(0x27c),'snoopList');}else{const _0x31591c=0x32;if(_0x5db313<_0x5a9512-_0x31591c)_0x4952d1(_0xae8260+0x1);else _0x56c81a>_0x4452cc+_0x31591c&&_0x5e1292(_0xc15956-0x1);}}function _0xcdd333(){const _0x219a0c=_0x8dde82,_0x4d9d11=document[_0x219a0c(0x1d6)](_0x219a0c(0x36b)),_0x48f6e7=document[_0x219a0c(0x1d6)]('snoop-dock'),_0x26d7fa=_0xdfbfac[_0x219a0c(0x94d)]['find'](_0x1f1b44=>_0x1f1b44['id']===_0x175cae),_0x4b1a1a=_0x26d7fa?_0x26d7fa['name']:_0x219a0c(0x842),_0x1f6506=_0x26d7fa&&_0x26d7fa[_0x219a0c(0x584)]?_0x26d7fa['avatar']:_0x1af29b;_0x4d9d11[_0x219a0c(0xa73)]=_0x219a0c(0x323)+_0x4b1a1a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-prompt-text\x22>你想查看\x20TA\x20的……</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-main-grid\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';const _0x457e07=_0x4d9d11[_0x219a0c(0xb6c)]('#snoop-avatar-img');_0x457e07&&(_0x219a0c(0xe2b)===_0x219a0c(0xe2b)?_0x457e07[_0x219a0c(0xcab)]=_0x1f6506:_0x1c7a6e(()=>{const _0x33a941=_0x219a0c;_0xeaf03b(_0x569a53[_0x33a941(0x6a3)])[_0x33a941(0x94f)](_0x2a0af6=>{const _0x1b438a=_0x33a941,_0x14f473=_0x454a49[_0x1b438a(0x1d6)](_0x286c40);if(_0x14f473&&_0x2a0af6)_0x14f473['src']=_0x1e0a0d[_0x1b438a(0x21c)](_0x2a0af6);});},0x0));_0x48f6e7[_0x219a0c(0xa73)]='';const _0x1a863=_0x4d9d11[_0x219a0c(0xb6c)](_0x219a0c(0x9ee)),_0x3ba88b=[{'id':_0x219a0c(0x35c),'name':'聊天','svg':_0x219a0c(0x79f)},{'id':_0x219a0c(0xddc),'name':_0x219a0c(0xa68),'svg':_0x219a0c(0x34e)},{'id':'gallery','name':'相册','svg':_0x219a0c(0x52f)},{'id':_0x219a0c(0x29a),'name':'总结','svg':'<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>'},{'id':'fragments','name':_0x219a0c(0xe34),'svg':_0x219a0c(0xe59)},{'id':_0x219a0c(0x75f),'name':'外卖','svg':_0x219a0c(0x735)},{'id':'wants','name':'购物','svg':_0x219a0c(0x814)},{'id':_0x219a0c(0xc15),'name':'足迹','svg':_0x219a0c(0x1ca)}];_0x3ba88b['forEach'](_0x3db664=>{const _0xfc68ab=_0x219a0c,_0x494780=document[_0xfc68ab(0x8f1)](_0xfc68ab(0xce2));_0x494780[_0xfc68ab(0x213)]=_0xfc68ab(0xc3c),_0x494780[_0xfc68ab(0xa73)]=_0xfc68ab(0xa2a)+_0x3db664[_0xfc68ab(0x250)]+'</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3db664['name']+_0xfc68ab(0xc4e),_0x494780[_0xfc68ab(0x3a0)](_0xfc68ab(0x288),()=>_0x3c697b(_0x3db664['id'],_0x3db664[_0xfc68ab(0xb95)])),_0x1a863[_0xfc68ab(0x5b8)](_0x494780);});}document[_0x8dde82(0x1d6)]('back-to-snoop-list-from-phone')[_0x8dde82(0x3a0)]('click',()=>{const _0x3cccbd=_0x8dde82;if(_0x3cccbd(0x740)!==_0x3cccbd(0x8f6)){_0x5d9dc6&&(clearInterval(_0x5d9dc6),_0x5d9dc6=null);document[_0x3cccbd(0x1d6)](_0x3cccbd(0x102))[_0x3cccbd(0x329)][_0x3cccbd(0xc66)]='none';const _0x1310d8=document[_0x3cccbd(0x1d6)](_0x3cccbd(0x766));if(_0x1310d8)_0x1310d8[_0x3cccbd(0x9ad)]();const _0x55a66a=document['getElementById'](_0x3cccbd(0xc14));if(_0x55a66a)_0x55a66a[_0x3cccbd(0x9ad)]();_0x137a40(_0x3cccbd(0x401),_0x3cccbd(0x27c));}else{const _0x24efba=_0x461074(_0x3dbd82[_0x3cccbd(0x3c3)][_0x3cccbd(0xe9)]);_0x24efba&&(_0x5df37a='<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22'+_0x24efba['avatar']+_0x3cccbd(0xbe3)+_0x24efba['name']+_0x3cccbd(0xf08)+_0x2ec813[_0x3cccbd(0x3c3)][_0x3cccbd(0x7ee)]+_0x3cccbd(0x2d4));}});async function _0x3c697b(_0x513e11,_0x12ebe1,_0x50d88c=![]){const _0x1334a5=_0x8dde82;if(_0x1334a5(0x906)==='FlXPH')_0x1d2fea['error']('在准备动态回复时，读取图片失败:',_0x15cb86);else{let _0x5f17df=null;document[_0x1334a5(0x1d6)](_0x1334a5(0x2d2))[_0x1334a5(0x329)]['display']=_0x1334a5(0x338);const _0x457596=document[_0x1334a5(0x1d6)](_0x1334a5(0x102));_0x457596['innerHTML']=_0x1334a5(0xa64),_0x457596['style']['display']='flex';const _0x13dd84=_0x1334a5(0xc24)+_0x175cae+'_'+_0x513e11;try{if(_0x1334a5(0x8c6)==='jPGNY'){_0x26049[_0x1334a5(0xee2)]=_0x1334a5(0x2c6);return;}else{if(_0x513e11==='summary'){const _0x3cd70b=await _0x2d5996(_0x175cae);_0x426820(_0x513e11,_0x12ebe1,_0x3cd70b);return;}let _0x58d9f6=await _0x348bc1(_0x13dd84);if(_0x50d88c||!_0x58d9f6){console[_0x1334a5(0x7ec)](_0x1334a5(0xcd1)+_0x13dd84+_0x1334a5(0xd45)),_0x5f17df=await _0x36edfb(_0x513e11,_0x175cae,_0x58d9f6,_0x50d88c,null);if(_0x5f17df){if(_0x1334a5(0x98b)!==_0x1334a5(0x98b)){_0x2826b5['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0x368e96[_0x1334a5(0xa73)]='';return;}else{const _0x5ea343=_0x5f17df[_0x1334a5(0x4dc)](/```(?:json)?\s*([\s\S]*?)\s*```/),_0xa9e9c7=_0x5ea343?_0x5ea343[0x1]['trim']():_0x5f17df['trim']();let _0x1828a6;try{_0x1828a6=JSON['parse'](_0xa9e9c7);}catch(_0x257039){if('opcbW'===_0x1334a5(0xa84)){_0x1828a6=_0x40ffce(_0xa9e9c7);if(!_0x1828a6)throw new Error(_0x1334a5(0x29d));}else{const _0xfde4eb=_0x44b2cb[_0x1334a5(0x8f1)](_0x1334a5(0xce2));_0xfde4eb['id']=_0x1334a5(0x5d0),_0xfde4eb[_0x1334a5(0x101)]=_0x1334a5(0x7e5),_0x3c99ea[_0x1334a5(0x24a)](_0xfde4eb[_0x1334a5(0x329)],{'position':'absolute','top':'15px','right':_0x1334a5(0x34b),'fontSize':_0x1334a5(0xb4d),'lineHeight':_0x1334a5(0x9b7),'color':'var(--text-color-light)','opacity':_0x1334a5(0xe4c),'cursor':'pointer','zIndex':'1','transition':_0x1334a5(0x180),'whiteSpace':_0x1334a5(0x9eb),'textAlign':_0x1334a5(0x489)}),_0xfde4eb[_0x1334a5(0x943)]=()=>{const _0x10995d=_0x1334a5;_0xfde4eb[_0x10995d(0x329)][_0x10995d(0x990)]='1';},_0xfde4eb['onmouseout']=()=>{const _0x23d758=_0x1334a5;_0xfde4eb[_0x23d758(0x329)]['opacity']=_0x23d758(0xe4c);},_0xfde4eb[_0x1334a5(0x3a0)]('click',()=>{const _0xa229b7=_0x1334a5;_0x4a2eb4[_0xa229b7(0x9dc)](_0xa229b7(0x22d),_0xa229b7(0x684));}),_0x48b21d[_0x1334a5(0x329)][_0x1334a5(0x38b)]=_0x1334a5(0x340),_0x1db3af['prepend'](_0xfde4eb);}}const _0x459e79=JSON[_0x1334a5(0xea5)](_0x1828a6);console[_0x1334a5(0x7ec)](_0x1334a5(0x4c9)),await _0x23d511(_0x13dd84,_0x459e79),_0x58d9f6=_0x459e79;}}}else console['log'](_0x1334a5(0x789)+_0x13dd84);_0x426820(_0x513e11,_0x12ebe1,_0x58d9f6);}}catch(_0x15f918){if(_0x1334a5(0x577)===_0x1334a5(0x6a7)){const _0x30dbdd=_0x485602[_0x1334a5(0x8f1)]('p');_0x30dbdd[_0x1334a5(0x101)]=_0x1f84c6[_0x1334a5(0x7ee)],_0x30dbdd['id']=_0x1334a5(0x175)+_0x2a64f5,_0x59a997['appendChild'](_0x30dbdd);}else{console[_0x1334a5(0x27f)](_0x1334a5(0x918)+_0x12ebe1+_0x1334a5(0x68b),_0x15f918);const _0xf641f8=_0x5844c7(_0x175cae),_0x8d5de6=_0x1334a5(0x5cd)+_0xf641f8[_0x1334a5(0xb95)]+_0x1334a5(0xe7c);let _0x1d26da=_0x1334a5(0x9fb)+_0x15f918[_0x1334a5(0x8ac)]+_0x1334a5(0xa95);_0x5f17df&&('qdYOC'===_0x1334a5(0xd19)?_0x1d26da+=_0x1334a5(0x5dc)+_0x3937ac(_0x5f17df)+'</pre>\x0a\x20\x20\x20\x20\x20\x20</div>':_0x214996(_0x1334a5(0x7b0)+_0x328aa1[_0x1334a5(0x8ac)])),_0x457596[_0x1334a5(0xa73)]=_0x8d5de6+('<div\x20class=\x22snoop-app-content\x22>'+_0x1d26da+_0x1334a5(0x396)),document[_0x1334a5(0x1d6)]('snoop-app-back-btn')[_0x1334a5(0x3a0)](_0x1334a5(0x288),()=>{const _0xe6cd40=_0x1334a5;_0xe6cd40(0x9ec)!==_0xe6cd40(0x9ec)?_0x3e5add[_0xe6cd40(0xbcf)][_0xe6cd40(0xc04)](_0xe6cd40(0x439),_0xe6cd40(0x6f3)):(_0x457596[_0xe6cd40(0x329)][_0xe6cd40(0xc66)]='none',document[_0xe6cd40(0x1d6)](_0xe6cd40(0x2d2))['style']['display']=_0xe6cd40(0xe12));});}}}}function _0x3937ac(_0x40b806){const _0x43c6ad=_0x8dde82;if(!_0x40b806)return'';return _0x40b806[_0x43c6ad(0xbe2)](/&/g,'&amp;')['replace'](/</g,_0x43c6ad(0x9a5))['replace'](/>/g,_0x43c6ad(0x38d))[_0x43c6ad(0xbe2)](/"/g,_0x43c6ad(0x762))[_0x43c6ad(0xbe2)](/'/g,'&#039;');}function _0x426820(_0x49a209,_0x44a1d8,_0x56ef10){const _0x21f532=_0x8dde82,_0x485ea6=_0x5844c7(_0x175cae),_0xf9d47b=document[_0x21f532(0x1d6)](_0x21f532(0x102));let _0x2add6d='';if(!_0x56ef10)_0x2add6d=_0x21f532(0x8ae);else{if(_0x21f532(0x91c)!==_0x21f532(0x91c))_0x484f71['textContent']='▶';else{if(_0x49a209==='summary')_0x2add6d='\x0a\x20\x20\x20\x20<textarea\x20id\x20=\x20\x22snoop-summary-textarea\x22\x20readonly\x20style\x20=\x20\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22\x20>\x20'+_0x56ef10+'</textarea\x20>\x0a\x20\x20\x20\x20\x20\x20';else try{if('noRMs'===_0x21f532(0xb6a))_0x3a31c4[_0x21f532(0xe85)][_0x21f532(0xdf3)][_0x21f532(0xb85)](_0x2e534f=>{const _0x492073=_0x21f532;_0x4274ec['includes'](_0x2e534f['toLowerCase']())&&_0x242a29[_0x492073(0x1e2)]<_0x514c0a&&_0x1a1aae[_0x492073(0xb66)](_0x492073(0x343)+_0x2e534f+'\x22，请谨慎处理！');});else{let _0x1eced0=null;const _0x3fe3bb=_0x56ef10[_0x21f532(0x4dc)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x16ba6a=_0x3fe3bb?_0x3fe3bb[0x1][_0x21f532(0xcd2)]():_0x56ef10['trim']();try{_0x1eced0=JSON[_0x21f532(0xc44)](_0x16ba6a);}catch(_0x227465){if('tSduk'!=='kFZAJ'){console[_0x21f532(0xca6)](_0x21f532(0x3bd),_0x227465[_0x21f532(0x8ac)]);try{if('uAcDd'===_0x21f532(0x5b2))_0x4cdb01(),_0x535a0d(_0x21f532(0x48e),_0x21f532(0x410));else{_0x1eced0=_0x40ffce(_0x16ba6a);if(!_0x1eced0)throw new Error(_0x21f532(0x644));console[_0x21f532(0x7ec)](_0x21f532(0xb70));}}catch(_0x2e6f15){throw _0x227465;}}else _0x43f76c[_0x21f532(0x329)][_0x21f532(0x477)]=_0x21f532(0xb81),_0x3654fc[_0x21f532(0x329)]['textShadow']=_0x21f532(0x1e7);}switch(_0x49a209){case _0x21f532(0xd87):_0x2add6d=_0x4470c4(_0x1eced0);break;case _0x21f532(0x35c):_0x2add6d=_0x365ed7(_0x1eced0,_0x485ea6['name']);break;case'abyss':_0x2add6d=_0x4a8e0d(_0x1eced0);break;case _0x21f532(0x452):_0x2add6d=_0x1aca8e(_0x1eced0);break;case _0x21f532(0x75f):_0x2add6d=_0xc9e690(_0x1eced0);break;case _0x21f532(0x991):_0x2add6d=_0x59866f(_0x1eced0);break;case _0x21f532(0xc15):_0x2add6d=_0xe1dd34(_0x1eced0);break;default:_0x2add6d=_0x21f532(0x7b7)+JSON['stringify'](_0x1eced0,null,0x2)+_0x21f532(0xa47);}}}catch(_0x267544){'sMByh'===_0x21f532(0xf0f)?(console[_0x21f532(0x27f)](_0x21f532(0x85d),_0x267544),_0x2add6d='<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>'+_0x56ef10+'</pre>'):_0xd244c4('💜\x20'+_0x53438c[_0x21f532(0xb95)]+'\x20添加了新的纪念日：'+_0x45c10b[_0x21f532(0xa69)]);}}}_0xf9d47b[_0x21f532(0xa73)]=_0x21f532(0xd4b)+_0x44a1d8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0x485ea6['name']+'的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x49a209==='summary'?'<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>':_0x21f532(0x9c5))+_0x21f532(0x32b)+_0x2add6d+_0x21f532(0xb5b);const _0x104798=_0xf9d47b[_0x21f532(0xb6c)](_0x21f532(0x359));_0x49a209===_0x21f532(0x29a)&&(_0x104798[_0x21f532(0x329)][_0x21f532(0xe23)]='0'),document['getElementById'](_0x21f532(0x2e6))[_0x21f532(0x3a0)](_0x21f532(0x288),()=>{const _0x57ea37=_0x21f532;_0xf9d47b[_0x57ea37(0x329)][_0x57ea37(0xc66)]='none',document[_0x57ea37(0x1d6)]('snoop-phone-top-nav')['style']['display']=_0x57ea37(0xe12);}),_0x49a209==='summary'?document[_0x21f532(0x1d6)](_0x21f532(0x325))[_0x21f532(0x3a0)]('click',()=>{const _0x2ac4b0=_0x21f532,_0xeae831=document[_0x2ac4b0(0x1d6)](_0x2ac4b0(0x262));_0xeae831['select'](),document['execCommand'](_0x2ac4b0(0xd41)),_0x21d6ce(_0x2ac4b0(0xefa));}):document[_0x21f532(0x1d6)]('snoop-app-refresh-btn')['addEventListener'](_0x21f532(0x288),async()=>{_0x3c697b(_0x49a209,_0x44a1d8,!![]);}),_0x49a209==='whispers'&&_0xf9d47b[_0x21f532(0x7af)]('.snoop-chat-item')['forEach'](_0x157fd4=>{const _0x560ec0=_0x21f532;if(_0x560ec0(0xacd)===_0x560ec0(0xacd))_0x157fd4[_0x560ec0(0x3a0)](_0x560ec0(0x288),()=>{const _0x157cc8=_0x560ec0;if('LfqUb'!=='JXTdl'){const _0x27bc99=JSON[_0x157cc8(0xc44)](_0x157fd4['dataset'][_0x157cc8(0x7ec)][_0x157cc8(0xbe2)](/&quot;/g,'\x22')),_0x57a92c=_0x157fd4[_0x157cc8(0x63f)][_0x157cc8(0x542)],_0x1ce4e9=_0x157fd4[_0x157cc8(0x63f)][_0x157cc8(0x501)];_0x56a82f(_0x57a92c,_0x1ce4e9,_0x27bc99);}else{_0x4887d6&&(_0x2ec4a6(_0x128828),_0x2a7d93=null);_0x30798d['getElementById'](_0x157cc8(0x102))['style']['display']='none';const _0x143f20=_0xc62824[_0x157cc8(0x1d6)]('snoop-dock');if(_0x143f20)_0x143f20[_0x157cc8(0x9ad)]();const _0x2625f3=_0x5e1c46[_0x157cc8(0x1d6)](_0x157cc8(0xc14));if(_0x2625f3)_0x2625f3[_0x157cc8(0x9ad)]();_0x1bd687('snoopList',_0x157cc8(0x27c));}});else return _0x1fd9fc[_0x560ec0(0x27f)](_0x560ec0(0xb8c),_0x45b824),null;});}function _0x40ffce(_0x43a76c){const _0xcf60e=_0x8dde82;if(_0xcf60e(0xa36)!==_0xcf60e(0x207)){if(!_0x43a76c||typeof _0x43a76c!==_0xcf60e(0x193))return null;const _0x4d579c=_0x43a76c['trim']()[_0xcf60e(0xc12)]('\x0a'),_0x1d2624=[];let _0x40d96c=null;for(const _0x509a30 of _0x4d579c){const _0x5637fa=_0x509a30[_0xcf60e(0xcd2)]();if(_0x5637fa[_0xcf60e(0xb91)]('-\x20')){if('VVANk'===_0xcf60e(0x1c0)){_0x40d96c&&_0x1d2624[_0xcf60e(0xb66)](_0x40d96c);_0x40d96c={};const _0x4a524d=_0x5637fa[_0xcf60e(0x3b1)](0x2),_0x5191fe=_0x4a524d[_0xcf60e(0xc12)](/:\s(.+)/);if(_0x5191fe['length']>0x1){if(_0xcf60e(0xc72)===_0xcf60e(0xc72)){const _0x2a18cb=_0x5191fe[0x0]['trim'](),_0x429f6c=_0x5191fe[0x1][_0xcf60e(0xcd2)]()[_0xcf60e(0xbe2)](/^"|"$/g,'');_0x40d96c[_0x2a18cb]=_0x429f6c;}else _0x368eb3[_0xcf60e(0x101)]='❚❚';}}else{_0x4cda21=_0x21c39e(_0x28783a[_0xcf60e(0x901)]),_0x276010['innerHTML']='';if(_0x36acd5[_0xcf60e(0x1e2)]===0x0){_0x217c36[_0xcf60e(0xa73)]='<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>';return;}_0x2434ad['forEach']((_0x3ce91a,_0x59f0ac)=>{const _0x3900cd=_0xcf60e,_0x38fdf3=_0x19255a['createElement']('p');_0x38fdf3['textContent']=_0x3ce91a['text'],_0x38fdf3['id']=_0x3900cd(0x175)+_0x59f0ac,_0x19ba01[_0x3900cd(0x5b8)](_0x38fdf3);});}}else{if(_0x40d96c&&_0x5637fa){const _0x28ae0d=_0x5637fa[_0xcf60e(0xc12)](/:\s(.+)/);if(_0x28ae0d[_0xcf60e(0x1e2)]>0x1){const _0x64eb86=_0x28ae0d[0x0]['trim'](),_0xe0855b=_0x28ae0d[0x1]['trim']()[_0xcf60e(0xbe2)](/^"|"$/g,'');_0x40d96c[_0x64eb86]=_0xe0855b;}}}}return _0x40d96c&&(_0xcf60e(0x397)!==_0xcf60e(0x397)?_0x3c499d('说了是摆设啦，笨蛋。'):_0x1d2624[_0xcf60e(0xb66)](_0x40d96c)),_0x1d2624[_0xcf60e(0x1e2)]>0x0?_0x1d2624:null;}else{const _0x5f56f1=_0x57a2c6[_0xcf60e(0x41b)][0x0];_0xab9a97(_0x3cb0ea,_0x5f56f1)[_0xcf60e(0x7ad)](_0x479ff5=>{const _0x23221d=_0xcf60e;_0x404976['error'](_0x23221d(0xb54),_0x479ff5);});}}function _0x56a82f(_0x210b66,_0x1eaeaa,_0x347e8d){const _0x9118d5=_0x8dde82,_0x30324e=document[_0x9118d5(0xb6c)](_0x9118d5(0x5a8)),_0x5ee7fb=document['querySelector']('#snoop-app-view-container\x20.snoop-app-header');let _0x308dea=_0x9118d5(0x198);!_0x347e8d||_0x347e8d[_0x9118d5(0x1e2)]===0x0?_0x9118d5(0x517)===_0x9118d5(0xe42)?(_0x1d7c0a[_0x9118d5(0xe91)]=null,_0x22e080['style'][_0x9118d5(0xc66)]=_0x9118d5(0x338)):_0x308dea+='<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>':_0x9118d5(0x1b2)!=='QeIcO'?(_0x2b73f4[_0x9118d5(0x27f)](_0x9118d5(0x23a),_0x2ca4b6[_0x9118d5(0x272)][_0x9118d5(0x27f)]),_0x3a1819(_0x5c461e[_0x9118d5(0x272)]['error'])):_0x347e8d[_0x9118d5(0xb85)](_0x59b239=>{const _0x1e6783=_0x9118d5,_0x5346c9=_0x59b239['sender']===_0x1e6783(0x9ce),_0x11c52b=_0x5346c9?_0x1eaeaa?_0x1eaeaa[0x0]:'?':_0x210b66?_0x210b66[0x0]:'?';_0x308dea+=_0x1e6783(0x33f)+(_0x5346c9?'user':'ai')+_0x1e6783(0x725)+(!_0x5346c9?_0x1e6783(0x488)+_0x11c52b+_0x1e6783(0x396):'')+_0x1e6783(0xa2b)+(_0x5346c9?_0x1e6783(0xa29):'ai')+'\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x59b239['content']+_0x1e6783(0xe9f)+(_0x5346c9?_0x1e6783(0x488)+_0x11c52b+'</div>':'')+_0x1e6783(0x733);}),_0x308dea+=_0x9118d5(0x396),_0x30324e[_0x9118d5(0xa73)]=_0x308dea,_0x30324e[_0x9118d5(0x648)]=_0x30324e[_0x9118d5(0xc0c)],_0x5ee7fb[_0x9118d5(0xa73)]='\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>'+_0x210b66+_0x9118d5(0x903),document[_0x9118d5(0x1d6)](_0x9118d5(0xc36))['addEventListener'](_0x9118d5(0x288),()=>{const _0x350588=_0x9118d5;_0x3c697b(_0x350588(0x35c),'聊天');}),document[_0x9118d5(0x1d6)](_0x9118d5(0xeec))['addEventListener']('click',()=>{_0xab5d69(_0x210b66);}),!document[_0x9118d5(0x1d6)](_0x9118d5(0x4cc))&&document[_0x9118d5(0xbcf)][_0x9118d5(0xc04)](_0x9118d5(0x439),_0x9118d5(0x6f3));}async function _0xab5d69(_0xc35a2c){const _0x3b1467=_0x8dde82,_0x556721=_0x3b1467(0x35c),_0x3e1bd9='聊天';if(!_0x175cae||!_0xc35a2c)return;const _0x5e2083=document['querySelector'](_0x3b1467(0x5a8)),_0x586258=document[_0x3b1467(0x1d6)](_0x3b1467(0xeec));if(_0x586258)_0x586258['disabled']=!![];_0x5e2083[_0x3b1467(0xc04)]('beforeend','<div\x20id=\x22whisper-loader\x22\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2020px\x20auto;\x22></div>'),_0x5e2083[_0x3b1467(0x648)]=_0x5e2083[_0x3b1467(0xc0c)];const _0x2dd49f=_0x3b1467(0xc24)+_0x175cae+'_'+_0x556721;try{if(_0x3b1467(0x67c)===_0x3b1467(0xbd1))_0x5e34b6(![]);else{const _0x2ebfc1=await _0x348bc1(_0x2dd49f),_0x1ba949=await _0x36edfb(_0x556721,_0x175cae,_0x2ebfc1,![],_0xc35a2c);if(_0x1ba949){const _0x538a70=_0x1ba949['match'](/```(?:json)?\s*([\s\S]*?)\s*```/),_0xee5ad4=_0x538a70?_0x538a70[0x1][_0x3b1467(0xcd2)]():_0x1ba949[_0x3b1467(0xcd2)]();let _0xb8bfaf;try{if(_0x3b1467(0x63c)===_0x3b1467(0xe5e))return _0x3cd56d[_0x3b1467(0x27f)]('获取档案失败:',_0x5c4af3),null;else _0xb8bfaf=JSON['parse'](_0xee5ad4);}catch(_0x1f2b62){if(_0x3b1467(0x6b4)===_0x3b1467(0xe5d)){const _0x4e72fc=_0x317fcc[_0x3b1467(0x1d6)](_0x3b1467(0x262));_0x4e72fc[_0x3b1467(0xe3a)](),_0x49f7f8[_0x3b1467(0xa11)](_0x3b1467(0xd41)),_0x22fbea('档案已复制到剪贴板！');}else{_0xb8bfaf=_0x40ffce(_0xee5ad4);if(!_0xb8bfaf)throw new Error(_0x3b1467(0x29d));}}const _0x560f8b=JSON[_0x3b1467(0xea5)](_0xb8bfaf);await _0x23d511(_0x2dd49f,_0x560f8b);const _0x30c2ff=_0xb8bfaf[_0x3b1467(0x76b)](_0x4b15ad=>_0x4b15ad[_0x3b1467(0x19c)]===_0xc35a2c);if(_0x30c2ff){if(_0x3b1467(0xe4)!==_0x3b1467(0x803))_0x56a82f(_0xc35a2c,_0x5844c7(_0x175cae)[_0x3b1467(0xb95)],_0x30c2ff[_0x3b1467(0x7ec)]);else{const _0x2589c2=_0x1f7bda['createElement'](_0x3b1467(0x805));_0x2589c2[_0x3b1467(0xee2)]=_0x56a1ad['id'],_0x2589c2[_0x3b1467(0x101)]=_0x136009[_0x3b1467(0xb95)],_0x5e3113['appendChild'](_0x2589c2);}}else _0x3c697b(_0x556721,_0x3e1bd9);}else throw new Error(_0x3b1467(0xae8));}}catch(_0xe005c4){_0x21d6ce(_0x3b1467(0x368)+_0xe005c4['message']),_0x3c697b(_0x556721,_0x3e1bd9);}const _0xc05f2a=document['getElementById'](_0x3b1467(0x585));if(_0xc05f2a)_0xc05f2a[_0x3b1467(0x9ad)]();if(_0x586258)_0x586258[_0x3b1467(0x2c5)]=![];}async function _0x421bdd(_0x36cf83){const _0x214435=_0x8dde82;if(!_0x36cf83)return'';const _0x27d164=[{'id':_0x214435(0xd87),'name':'相册'},{'id':_0x214435(0x35c),'name':_0x214435(0x97b)},{'id':_0x214435(0xddc),'name':_0x214435(0x802)},{'id':_0x214435(0x452),'name':_0x214435(0xe34)},{'id':_0x214435(0x75f),'name':_0x214435(0x65b)},{'id':_0x214435(0x991),'name':_0x214435(0x342)},{'id':_0x214435(0xc15),'name':_0x214435(0xa83)}];let _0x5c992e='';for(const _0x46230f of _0x27d164){try{if(_0x214435(0x88d)!==_0x214435(0xd77)){const _0x59dfc5='snoop_'+_0x36cf83+'_'+_0x46230f['id'],_0x5ac677=await _0x348bc1(_0x59dfc5);if(_0x5ac677){const _0x1ca7c6=_0x5ac677[_0x214435(0x4dc)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x5111c3=_0x1ca7c6?_0x1ca7c6[0x1][_0x214435(0xcd2)]():_0x5ac677[_0x214435(0xcd2)]();if(!_0x5111c3)continue;let _0x125cad=null;try{_0x125cad=JSON['parse'](_0x5111c3);}catch(_0xcc4af8){if('PktqY'===_0x214435(0x889))_0x33d2ee[_0x214435(0x287)](_0x214435(0x16c)+_0xbc0e52['id']);else{console[_0x214435(0xca6)](_0x214435(0xc96)+_0x46230f['id']+')，启动兼容模式...',_0xcc4af8['message']);try{_0x125cad=_0x40ffce(_0x5111c3);if(!_0x125cad){if(_0x214435(0x92e)!==_0x214435(0x92e))_0x571fc2['style']['transform']='translate3d(100%,\x200,\x200)',_0x3a5b85[_0x214435(0x329)][_0x214435(0x82e)]=_0x214435(0x8d5);else throw new Error(_0x214435(0x644));}console[_0x214435(0x7ec)](_0x214435(0xa70)+_0x46230f['id']+_0x214435(0xb2e));}catch(_0x33ca44){if('eVYHk'===_0x214435(0x37c))_0x1d9274(_0x214435(0x670));else throw _0xcc4af8;}}}if(Array[_0x214435(0xca5)](_0x125cad)&&_0x125cad['length']>0x0){if(_0x214435(0x464)!=='RSSfD'){_0x5c992e===''&&(_0x214435(0x601)===_0x214435(0xe53)?_0x44ad49=_0x1d37f0[_0x214435(0x443)](_0x214435(0x6a0)):_0x5c992e+=_0x214435(0x4d0));_0x5c992e+=_0x214435(0xa71)+_0x46230f['name']+'\x20\x0a';switch(_0x46230f['id']){case _0x214435(0xd87):_0x125cad[_0x214435(0xb85)](_0x2843f2=>{const _0x146c65=_0x214435;_0x146c65(0x1a6)===_0x146c65(0x1a6)?_0x5c992e+=_0x146c65(0x82c)+_0x2843f2[_0x146c65(0xc84)]+_0x146c65(0x718):(_0x1a6898[_0x146c65(0x337)]=![],_0x2f01fc[_0x146c65(0x555)][_0x146c65(0x9ad)]('has-new'));});break;case'whispers':_0x125cad['forEach'](_0x584f18=>{const _0x258af6=_0x214435;_0x5c992e+=_0x258af6(0x9a0)+_0x584f18[_0x258af6(0x19c)]+_0x258af6(0xb46)+_0x584f18[_0x258af6(0x7d0)]+_0x258af6(0x718),_0x584f18[_0x258af6(0x7ec)]&&Array['isArray'](_0x584f18[_0x258af6(0x7ec)])&&(_0x5c992e+='\x20\x20具体对话如下：\x0a',_0x584f18['log']['forEach'](_0x23a946=>{const _0xa3e4e=_0x258af6,_0x12ea8f=_0x23a946['sender']===_0xa3e4e(0x9ce)?'你':_0x584f18[_0xa3e4e(0x19c)];_0x5c992e+=_0xa3e4e(0x1a7)+_0x12ea8f+':\x20'+_0x23a946[_0xa3e4e(0xee)]+'\x20\x0a';}));});break;case _0x214435(0xddc):_0x125cad[_0x214435(0xb85)](_0x1d1569=>{const _0x541fa2=_0x214435;_0x5c992e+='-\x20你曾经搜索过：“'+_0x1d1569[_0x541fa2(0xb11)]+_0x541fa2(0x1db)+(_0x1d1569[_0x541fa2(0x557)]||_0x541fa2(0x53d))+_0x541fa2(0x718);});break;case'fragments':_0x125cad[_0x214435(0xb85)](_0x5ac382=>{const _0x53c0f7=_0x214435;_0x5c992e+=_0x53c0f7(0xcbe)+_0x5ac382['title']+'”的笔记，内容是：“'+_0x5ac382[_0x53c0f7(0xee)][_0x53c0f7(0xbe2)](/\n/g,'\x20')+'”。\x0a';});break;case _0x214435(0x75f):_0x125cad[_0x214435(0xb85)](_0x1feda7=>{const _0x445053=_0x214435;_0x5c992e+=_0x445053(0xb52)+_0x1feda7['restaurant_name']+_0x445053(0xd7e)+_0x1feda7[_0x445053(0xe0d)][_0x445053(0xd9a)]('、')+'。\x0a';});break;case _0x214435(0x991):_0x125cad[_0x214435(0xb85)](_0x101399=>{const _0x3fced0=_0x214435;_0x5c992e+='-\x20你在“'+_0x101399['store_name']+_0x3fced0(0xda3)+_0x101399[_0x3fced0(0x73a)]+'”。\x0a';});break;case'footprints':_0x125cad[_0x214435(0xb85)](_0xf42353=>{const _0xe5c0ee=_0x214435;if('aWusQ'!==_0xe5c0ee(0x300)){const _0x3c3888=_0x6378de,_0x288a62=_0x3c3888[_0xe5c0ee(0xc0c)],_0xe00b5=_0x3c3888[_0xe5c0ee(0x648)];_0xdba1da['displayedMessageCount']+=0x32,_0x41295e(),_0x4cc87c(()=>{const _0x33a832=_0xe5c0ee,_0x41a264=_0x3c3888[_0x33a832(0xc0c)];_0x3c3888[_0x33a832(0x648)]=_0xe00b5+(_0x41a264-_0x288a62);});}else _0x5c992e+=_0xe5c0ee(0x106)+_0xf42353[_0xe5c0ee(0xc87)]+_0xe5c0ee(0xe7)+_0xf42353[_0xe5c0ee(0x271)]+'”。\x0a';});break;default:_0x125cad[_0x214435(0xb85)](_0x4021e7=>{_0x5c992e+='-\x20'+JSON['stringify'](_0x4021e7)+'\x20\x0a';});break;}}else _0x425600[_0x214435(0x329)][_0x214435(0xc66)]='inline-block';}}}else _0x578f26[_0x214435(0x101)]=_0x214435(0x406);}catch(_0x23519b){console['error'](_0x214435(0x36a)+_0x46230f['id']+_0x214435(0x436),_0x23519b);}}return _0x5c992e;}function _0x4470c4(_0x461dbb){const _0x3b927b=_0x8dde82;if('rAOsY'===_0x3b927b(0xb1a)){const _0xf2867a=_0x3824e9[_0x3b927b(0xdf8)]?_0x49ad7a(_0x569b29[_0x3b927b(0xdf8)]):null;return _0xf2867a?.[_0x3b927b(0xb95)]||'Unknown';}else{_0x461dbb[_0x3b927b(0x6d9)]((_0x5326a5,_0x280b79)=>new Date(_0x280b79[_0x3b927b(0x10c)])-new Date(_0x5326a5[_0x3b927b(0x10c)]));if(!Array[_0x3b927b(0xca5)](_0x461dbb))return _0x3b927b(0x764);if(_0x461dbb[_0x3b927b(0x1e2)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>';return _0x3b927b(0x481)+_0x461dbb[_0x3b927b(0x266)]((_0xd47509,_0x54eb54)=>_0x3b927b(0xcb4)+(_0x54eb54<_0x461dbb[_0x3b927b(0x1e2)]-0x1?_0x3b927b(0xbdf):'')+_0x3b927b(0x5d9)+(_0xd47509['description']||_0x3b927b(0x69a))+_0x3b927b(0x3ec)+(_0xd47509['timestamp']||'')+_0x3b927b(0x925))['join']('')+_0x3b927b(0x532);}}function _0x365ed7(_0xa79207,_0x2317f0){const _0x3330a1=_0x8dde82;if('nOAcG'!==_0x3330a1(0xf09)){if(!Array[_0x3330a1(0xca5)](_0xa79207)||_0xa79207['length']===0x0)return _0x3330a1(0xac6);return _0x3330a1(0x481)+_0xa79207[_0x3330a1(0x266)]((_0x81ab2d,_0x54a607)=>{const _0x476202=_0x3330a1,_0x5db039=JSON[_0x476202(0xea5)](_0x81ab2d[_0x476202(0x7ec)]||[])[_0x476202(0xbe2)](/'/g,'&apos;')[_0x476202(0xbe2)](/"/g,_0x476202(0x762)),_0x256c1b=_0x81ab2d[_0x476202(0x19c)]||_0x476202(0x9e9);return _0x476202(0x848)+(_0x54a607<_0xa79207[_0x476202(0x1e2)]-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+_0x476202(0x46a)+_0x5db039+_0x476202(0x166)+_0x256c1b+_0x476202(0x490)+_0x2317f0+_0x476202(0xbc6)+_0x256c1b[_0x476202(0xaf6)](0x0)+_0x476202(0x6f8)+_0x256c1b+_0x476202(0x21b)+(_0x81ab2d[_0x476202(0x7d0)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20';})[_0x3330a1(0xd9a)]('')+_0x3330a1(0x532);}else{const _0x262b79=_0x2b0d27[_0x3330a1(0x1d6)]('ui-scale-slider'),_0x311a78=_0x53e274['documentElement'],_0x4f9a3f=_0x11f88a[_0x3330a1(0x1d6)]('reset-ui-scale-button');if(!_0x262b79||!_0x4f9a3f)return;const _0x42f9a9=_0x507d45[_0x3330a1(0x443)]('uiScale')||'1';_0x311a78[_0x3330a1(0x329)][_0x3330a1(0x8eb)](_0x3330a1(0xa03),_0x42f9a9),_0x262b79['value']=_0x42f9a9,_0x262b79['addEventListener'](_0x3330a1(0xb39),()=>{const _0x1abc92=_0x3330a1,_0x10f7e5=_0x262b79[_0x1abc92(0xee2)];_0x311a78['style'][_0x1abc92(0x8eb)]('--desktop-item-scale',_0x10f7e5),_0x432b9a[_0x1abc92(0xa54)](_0x1abc92(0xe92),_0x10f7e5);}),_0x4f9a3f['addEventListener'](_0x3330a1(0x288),()=>{const _0x61aab3=_0x3330a1,_0xe77189='1';_0x262b79[_0x61aab3(0xee2)]=_0xe77189,_0x311a78[_0x61aab3(0x329)][_0x61aab3(0x8eb)](_0x61aab3(0xa03),_0xe77189),_0x40fe24[_0x61aab3(0xa54)](_0x61aab3(0xe92),_0xe77189);});}}function _0x4a8e0d(_0x236257){const _0x237f7b=_0x8dde82;if(!Array[_0x237f7b(0xca5)](_0x236257))return'<p>格式错误</p>';if(_0x236257[_0x237f7b(0x1e2)]===0x0)return _0x237f7b(0x5ca);return _0x236257[_0x237f7b(0x6d9)]((_0xa1162a,_0x1a0408)=>new Date(_0x1a0408[_0x237f7b(0x10c)])-new Date(_0xa1162a['timestamp'])),_0x237f7b(0x481)+_0x236257['map']((_0x5db5f4,_0x51ee5a)=>_0x237f7b(0xe3f)+(_0x51ee5a<_0x236257[_0x237f7b(0x1e2)]-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+_0x237f7b(0x8a9)+(_0x5db5f4['query']||'未知搜索')+_0x237f7b(0xd60)+(_0x5db5f4['result_page_content']||_0x237f7b(0x41e))+_0x237f7b(0x679)+(_0x5db5f4[_0x237f7b(0x10c)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x237f7b(0xd9a)]('')+_0x237f7b(0x532);}function _0x1aca8e(_0x1ca4cd){const _0x301343=_0x8dde82;if(!Array['isArray'](_0x1ca4cd))return'<p>格式错误</p>';if(_0x1ca4cd[_0x301343(0x1e2)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>';return _0x1ca4cd['sort']((_0x2c4ef1,_0x5a2eee)=>new Date(_0x5a2eee[_0x301343(0xc65)])-new Date(_0x2c4ef1[_0x301343(0xc65)])),_0x1ca4cd[_0x301343(0x266)](_0x5b52ca=>_0x301343(0x95e)+(_0x5b52ca[_0x301343(0x13b)]||_0x301343(0xe3d))+_0x301343(0xd74)+(_0x5b52ca[_0x301343(0xee)]||'')+_0x301343(0xa26)+(_0x5b52ca['last_edited']||'')+_0x301343(0xcac))[_0x301343(0xd9a)]('');}function _0xc9e690(_0x320dbe){const _0x5226b4=_0x8dde82;if(!Array['isArray'](_0x320dbe))return _0x5226b4(0x764);if(_0x320dbe[_0x5226b4(0x1e2)]===0x0)return _0x5226b4(0x788);return _0x320dbe[_0x5226b4(0x6d9)]((_0x10e76f,_0x3f63dd)=>new Date(_0x3f63dd[_0x5226b4(0x10c)])-new Date(_0x10e76f[_0x5226b4(0x10c)])),_0x320dbe['map'](_0x463309=>{const _0x3e6153=_0x5226b4,_0x47230b=(_0x463309['items']||[])[_0x3e6153(0x266)](_0x18dc3d=>_0x3e6153(0x3ee)+_0x18dc3d+_0x3e6153(0x35b))['join']('');return _0x3e6153(0xca9)+(_0x463309[_0x3e6153(0x2e9)]||_0x3e6153(0x1b6))+_0x3e6153(0xd25)+(_0x463309['timestamp']||'')+_0x3e6153(0x70a)+(_0x463309[_0x3e6153(0x887)]||'已送达')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x47230b+_0x3e6153(0xea4)+(_0x463309['total_cost']||0x0)[_0x3e6153(0x491)](0x2)+_0x3e6153(0xae1);})[_0x5226b4(0xd9a)]('');}function _0x59866f(_0x3ef48d){const _0x3a28a2=_0x8dde82;if(!Array[_0x3a28a2(0xca5)](_0x3ef48d))return _0x3a28a2(0x764);if(_0x3ef48d[_0x3a28a2(0x1e2)]===0x0)return _0x3a28a2(0x40c);return _0x3ef48d[_0x3a28a2(0x6d9)]((_0x1dad08,_0x41a88c)=>new Date(_0x41a88c[_0x3a28a2(0x10c)])-new Date(_0x1dad08['timestamp'])),_0x3ef48d['map'](_0x36f45f=>_0x3a28a2(0x6c9)+(_0x36f45f[_0x3a28a2(0x546)]||_0x3a28a2(0xccd))+_0x3a28a2(0x4af)+(_0x36f45f[_0x3a28a2(0x10c)]||'')+_0x3a28a2(0x660)+(_0x36f45f[_0x3a28a2(0x73a)]||'未知商品')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20'+(_0x36f45f[_0x3a28a2(0x7e4)]||0x0)['toFixed'](0x2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')['join']('');}function _0xe1dd34(_0x2b5623){const _0x208abc=_0x8dde82;if(!Array[_0x208abc(0xca5)](_0x2b5623))return _0x208abc(0x764);if(_0x2b5623[_0x208abc(0x1e2)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>';return _0x2b5623[_0x208abc(0x6d9)]((_0x458fed,_0x38e100)=>new Date(_0x38e100[_0x208abc(0x10c)])-new Date(_0x458fed[_0x208abc(0x10c)])),_0x208abc(0x52e)+_0x2b5623[_0x208abc(0x266)](_0x3654ce=>_0x208abc(0x49b)+(_0x3654ce[_0x208abc(0xc87)]||_0x208abc(0x6ea))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>'+(_0x3654ce[_0x208abc(0x271)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>'+(_0x3654ce['timestamp']||'')+_0x208abc(0xc42))[_0x208abc(0xd9a)]('')+_0x208abc(0x532);}async function _0x36edfb(_0x533bf9,_0xc3058a,_0x1ab0ef=null,_0x5e338a=![],_0x4ffce3=null){const _0x29255a=_0x8dde82;if('wxgrg'===_0x29255a(0xb6f)){_0xc6f45b[_0x29255a(0xa73)]=_0x29255a(0xeae);return;}else{const _0x45e846=_0x5844c7(_0xc3058a),_0x302c5b=_0xdfbfac[_0x29255a(0xc1b)][_0x29255a(0x76b)](_0x4bfebb=>_0x4bfebb[_0x29255a(0x8c7)]===_0x29255a(0xcef)&&_0x4bfebb[_0x29255a(0x41b)]['includes'](_0xc3058a)),_0x547e8c=_0x58761c(_0x302c5b?.['id']||_0xdfbfac['activeChatId']);if(!_0x45e846)throw new Error('找不到角色信息。');const {omniText:_0x4bd890}=_0x5a83ee(_0xc3058a);let _0x46a986='';const _0x48907a=new Date();let _0x339c8a=null,_0x3606e2='无';if(_0x1ab0ef){if(_0x29255a(0xaf8)!==_0x29255a(0xaf8))_0x13788d[_0x29255a(0xdb9)]['forEach'](_0x34c241=>{const _0x11d6b7=_0x29255a;_0x34c241[_0x11d6b7(0x6b8)]&&_0x34c241['posts'][_0x11d6b7(0xb85)](_0x86b1c5=>{const _0x587829=_0x11d6b7;_0x59d7c0(_0x86b1c5,_0x587829(0x412)),_0x17fd06(_0x86b1c5,_0x587829(0x520));});});else try{if(_0x29255a(0x19b)===_0x29255a(0x9c2))_0x550447[_0x29255a(0x3a8)][_0x29255a(0xae6)]=null,_0x1750a6(),_0x1ce19c(),_0x4f0b07(_0x29255a(0xc2c));else{let _0x4675a5;try{_0x4675a5=JSON[_0x29255a(0xc44)](_0x1ab0ef);}catch(_0x46aae3){_0x29255a(0xa98)!==_0x29255a(0xa98)?_0x5e42e6[_0x29255a(0xda1)]=!![]:_0x4675a5=_0x40ffce(_0x1ab0ef);}if(Array[_0x29255a(0xca5)](_0x4675a5)&&_0x4675a5[_0x29255a(0x1e2)]>0x0){if('YEFjr'!=='YEFjr'){const _0x5e3574=_0x1a328f[_0x29255a(0x736)](),_0x45d86d=_0x56edd8(_0x58cdf[_0x29255a(0xb0a)]()+0x1)['padStart'](0x2,'0'),_0x2616de=_0x17a2b7(_0xe898c1['getDate']())['padStart'](0x2,'0');return _0x5e3574+'-'+_0x45d86d+'-'+_0x2616de;}else{const _0x55ace6=_0x4675a5[_0x29255a(0x266)](_0x25d726=>new Date(_0x25d726[_0x29255a(0x10c)]||_0x25d726['last_edited']))['filter'](_0x15472b=>!isNaN(_0x15472b));_0x55ace6[_0x29255a(0x1e2)]>0x0&&(_0x29255a(0xfd)===_0x29255a(0x2eb)?_0x5c5e8f(_0x21d598,_0x16ac09):(_0x339c8a=new Date(Math['max'][_0x29255a(0x8ff)](null,_0x55ace6)),_0x3606e2=_0x339c8a[_0x29255a(0x985)]('zh-CN',{'dateStyle':_0x29255a(0x710),'timeStyle':_0x29255a(0xa40)})));}}}}catch(_0x21c786){if(_0x29255a(0x799)!==_0x29255a(0xf0b))console['warn'](_0x29255a(0x450),_0x21c786);else{_0x4b8faf(_0x29255a(0x779));return;}}}const _0x320fa5=_0x59d839(_0xc3058a);_0x46a986=_0x29255a(0xe4a),_0x46a986+='-\x20**\x20当前精确时间\x20**:\x20'+_0x48907a[_0x29255a(0x985)](_0x29255a(0x731),{'dateStyle':_0x29255a(0x755),'timeStyle':_0x29255a(0xa40)})+'\x20\x0a';if(_0x320fa5){const _0xb32f53=new Date(_0x320fa5['timestamp']),_0x4d29c2=_0x301288(_0xb32f53);_0x46a986+=_0x29255a(0x319)+_0x4d29c2+'\x20\x0a';const _0x31ed90=_0x48907a[_0x29255a(0x9d1)](),_0x1a1ca7=_0xb32f53['toDateString'](),_0x52bd48=new Date();_0x52bd48['setDate'](_0x48907a[_0x29255a(0x55b)]()-0x1);const _0x9c4e24=_0x52bd48[_0x29255a(0x9d1)]();if(_0x31ed90===_0x1a1ca7){const _0x40372b=(_0x48907a-_0xb32f53)/(0x3e8*0x3c);_0x46a986+=_0x29255a(0xa13);}else{if(_0x9c4e24===_0x1a1ca7)_0x46a986+=_0x29255a(0xedc);else{if(_0x29255a(0xcb3)!==_0x29255a(0x3c4)){const _0xfeda5a=Math[_0x29255a(0x375)]((_0x48907a-_0xb32f53)/(0x3e8*0x3c*0x3c*0x18));_0x46a986+='-\x20**\x20状态提示\x20**:\x20你已经有\x20'+_0xfeda5a+_0x29255a(0xcdd);}else _0x46c662=_0x43e2ee[_0x29255a(0xc37)][_0x29255a(0x76b)](_0x9b28c3=>_0x9b28c3['id']===_0x11cb97[_0x29255a(0xb83)])||_0x1b465d['userProfiles'][0x0];}}}else _0x46a986+=_0x29255a(0x28f);let _0x5eccb1='',_0x1ede3a='';if(_0x1ab0ef)_0x29255a(0xcf1)!==_0x29255a(0xcf1)?(_0x1b016d[_0x29255a(0xcab)]=_0x1065ed[_0x29255a(0x21c)](_0x2491f0),_0x164802[_0x29255a(0x329)][_0x29255a(0xc66)]=_0x29255a(0xc38),_0x3c8b05['style']['border']=_0x29255a(0x338),_0x31c92d[_0x29255a(0x329)]['background']='transparent'):(_0x5eccb1='你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！',_0x1ede3a='\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a'+_0x1ab0ef+_0x29255a(0xd3f));else{if(_0x29255a(0x2dc)!==_0x29255a(0x162))_0x5eccb1=_0x29255a(0xa4f);else return _0x5b7ae0['log']('找不到旧的存档，无需救援。'),0x0;}const _0x4efc1b={'gallery':_0x29255a(0xb86),'whispers':_0x29255a(0x72c),'abyss':_0x29255a(0xc4c),'fragments':_0x29255a(0x461),'bites':_0x29255a(0xe75),'wants':_0x29255a(0x30e),'footprints':'\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]'};let _0x5ebb79=_0x4efc1b[_0x533bf9]||_0x29255a(0x701)+_0x533bf9+_0x29255a(0xc63);if(_0x533bf9==='whispers'){const _0x1b58c7=_0x29255a(0xb0b);let _0x544c3e='';if(_0x5e338a)_0x29255a(0x347)!==_0x29255a(0x1e1)?_0x544c3e='\x0a#\x20【作战指令：开启新篇】\x0a-\x20你的任务是【开启新篇】。\x0a-\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a-\x20【【【绝对禁止】】】延续或修改\x20'+(_0x1ede3a?_0x29255a(0x9f3):_0x29255a(0xa42))+_0x29255a(0x5ae):_0x1a3005[_0x29255a(0x329)]['backgroundImage']=_0x29255a(0x8a1)+_0x29f2b9+'\x27)';else _0x4ffce3?'CJbvU'===_0x29255a(0xa2c)?_0x544c3e='\x0a#\x20【作战指令：延续对话】\x0a-\x20你的任务是【只】为名为\x20`'+_0x4ffce3+_0x29255a(0xeb4)+_0x1b58c7+_0x29255a(0x290):_0x3b463b[_0x29255a(0x272)]['value']='':_0x544c3e=_0x29255a(0xad5)+_0x1b58c7+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x5ebb79=_0x4efc1b[_0x533bf9]+'\x0a'+_0x544c3e;}let _0xfdf10='';if(_0x45e846[_0x29255a(0x5ee)]&&_0x45e846[_0x29255a(0x5ee)][_0x29255a(0x1e2)]>0x0){if('XPicd'!==_0x29255a(0x2cc))_0x1fcebf(_0x29255a(0x5cc))[_0x29255a(0x94f)](_0x225044=>{const _0x390a3d=_0x29255a;if(_0x225044){const _0x4ab3bd=_0x207d14(_0x3f4095[_0x390a3d(0x6e4)]);_0x4ab3bd&&(delete _0x4ab3bd['spriteTransform'],_0x1c0ff0(),_0x3b425c(_0x4ab3bd['id'],_0x390a3d(0xcd5)),_0x174f49(_0x390a3d(0xdce)),_0x3797c2(!![]));}});else{const _0xe212b2=_0x45e846[_0x29255a(0x5ee)][_0x29255a(0x266)](_0x4a64e0=>_0xdfbfac[_0x29255a(0xe7d)]['find'](_0x2d9b45=>_0x2d9b45['id']===_0x4a64e0))[_0x29255a(0xeb3)](Boolean)[_0x29255a(0x266)](_0xf68b83=>_0x29255a(0xc6c)+_0xf68b83['name']+'\x0a'+_0xf68b83[_0x29255a(0xee)])[_0x29255a(0xd9a)]('');if(_0xe212b2){if(_0x29255a(0x9b5)!==_0x29255a(0x8fc))_0xfdf10=_0x29255a(0xa1f)+_0xe212b2;else{const _0x68d020=_0x29a7aa[_0x29255a(0xc12)](/:\s(.+)/);if(_0x68d020[_0x29255a(0x1e2)]>0x1){const _0x217909=_0x68d020[0x0][_0x29255a(0xcd2)](),_0x19e33d=_0x68d020[0x1][_0x29255a(0xcd2)]()[_0x29255a(0xbe2)](/^"|"$/g,'');_0x3364e9[_0x217909]=_0x19e33d;}}}}}const _0x5b83c4=_0x29255a(0x9a4)+_0x45e846['name']+_0x29255a(0x303)+_0x45e846[_0x29255a(0xb95)]+_0x29255a(0x117)+_0x547e8c['name']+_0x29255a(0xe5a)+_0x46a986+_0x29255a(0xe6e)+_0x45e846[_0x29255a(0xb95)]+_0x29255a(0x7cd)+_0x45e846[_0x29255a(0x79b)]+'\x0a'+_0xfdf10+_0x29255a(0xd01)+_0x547e8c['name']+_0x29255a(0x7cd)+_0x547e8c[_0x29255a(0x79b)]+_0x29255a(0x3e1)+_0x547e8c[_0x29255a(0xb95)]+_0x29255a(0xdf4)+_0x4bd890+'\x0a'+_0x1ede3a+'\x0a\x0a#\x20当前任务指令\x0a'+_0x5eccb1+'\x0a'+_0x5ebb79+_0x29255a(0xe0c),_0x5113d7=[{'role':'system','content':_0x5b83c4}];_0x5113d7[_0x29255a(0xb66)]({'role':_0x29255a(0xa29),'content':_0x29255a(0x89f)});const _0x274280=await _0x2fa074(_0x5113d7,{'json':!![]});return _0x274280;}}async function _0x2d5996(_0x1b9c2c){const _0x516472=_0x8dde82,_0x46389a=_0x5844c7(_0x1b9c2c);if(!_0x46389a)throw new Error('找不到角色。');_0x1a8bbc(!![],_0x516472(0x143));const _0x3b6474=['gallery',_0x516472(0x35c),_0x516472(0xddc),'fragments',_0x516472(0x75f),'wants','footprints'];let _0x4ca5db={};await Promise['all'](_0x3b6474[_0x516472(0x266)](async _0x28c97f=>{const _0x108e05=_0x516472,_0x1ee1fa=_0x108e05(0xc24)+_0x1b9c2c+'_'+_0x28c97f,_0x49bcce=await _0x348bc1(_0x1ee1fa);if(_0x49bcce){if(_0x108e05(0xb0e)===_0x108e05(0xb0e))try{if('UUcVi'!==_0x108e05(0xd4e))_0x4ca5db[_0x28c97f]=JSON[_0x108e05(0xc44)](_0x49bcce);else{const _0x496100=_0x1679d[_0x108e05(0x314)](_0x4823d5,_0x108e05(0xece)),_0x1b78c4=_0x496100['objectStore'](_0x117e98),_0x5ca2dd=_0x1b78c4[_0x108e05(0x2df)](_0x3ccd69);_0x5ca2dd[_0x108e05(0xdab)]=()=>_0x36d089(_0x5ca2dd[_0x108e05(0xd29)]),_0x5ca2dd['onerror']=()=>_0x1f4730(_0x5ca2dd[_0x108e05(0x27f)]);}}catch(_0x396bc5){}else{const _0x3e1375=_0x31c65f(_0x978c03[_0x108e05(0x2bb)]);if(!_0x3e1375)return;const _0x45614d=_0x31ab1c(_0x7fbd52[_0x108e05(0x1d6)](_0x108e05(0x2cb))[_0x108e05(0xee2)]),_0x3f3dbb=_0x24f71d(_0x308fbd[_0x108e05(0x1d6)](_0x108e05(0xed0))[_0x108e05(0xee2)]),_0x4a6df0=_0xa344e3(_0x28a2be[_0x108e05(0x1d6)](_0x108e05(0x9bf))[_0x108e05(0xee2)])/0x64;_0x3e1375['livestreamSpriteTransform']={'x':_0x45614d,'y':_0x3f3dbb,'scale':_0x4a6df0},_0x3bc915(),_0x16fac2(_0x108e05(0x238)),_0x6ba0c1(!![]);}}}));if(Object[_0x516472(0x83d)](_0x4ca5db)[_0x516472(0x1e2)]===0x0)return _0x516472(0xe1b);const _0x37af6d=_0x516472(0x33b)+_0x46389a[_0x516472(0xb95)]+_0x516472(0xe60),_0x43bdf2=[{'role':_0x516472(0xba3),'content':_0x37af6d},{'role':_0x516472(0xa29),'content':JSON[_0x516472(0xea5)](_0x4ca5db,null,0x2)}];_0x1a8bbc(!![],_0x516472(0x3eb));const _0x1c6eab=await _0x2fa074(_0x43bdf2);return _0x1c6eab||_0x516472(0x88b);}async function _0x2d5996(_0x217703){const _0xb7f999=_0x8dde82,_0x519864=_0x5844c7(_0x217703);if(!_0x519864)throw new Error(_0xb7f999(0x62e));try{if(_0xb7f999(0x928)!==_0xb7f999(0xe36)){_0x1a8bbc(!![],_0xb7f999(0x143));const _0x71da28=[_0xb7f999(0xd87),_0xb7f999(0x35c),_0xb7f999(0xddc),_0xb7f999(0x452),_0xb7f999(0x75f),_0xb7f999(0x991),'footprints'];let _0x37f497={};await Promise[_0xb7f999(0x7c7)](_0x71da28['map'](async _0x47d0c5=>{const _0x29ffdf=_0xb7f999;if(_0x29ffdf(0xa19)!==_0x29ffdf(0xa19))_0x14447b[_0x29ffdf(0xd6c)](_0x29ffdf(0xc41),_0x403a0f[_0x29ffdf(0xea5)](_0x2e5169));else{const _0x19fa9b=_0x29ffdf(0xc24)+_0x217703+'_'+_0x47d0c5,_0x27807e=await _0x348bc1(_0x19fa9b);if(_0x27807e)try{if(_0x29ffdf(0xb07)!==_0x29ffdf(0xb07)){if(_0x3a668d['type']===_0x29ffdf(0x304))return _0x29ffdf(0xe21)+(_0x1319f1['name']||_0x29ffdf(0x4da))+'」';const _0x3437bb=_0x447e42(_0x432a24[_0x29ffdf(0x41b)][0x0]);return'与\x20'+(_0x3437bb?.[_0x29ffdf(0xb95)]||_0x29ffdf(0x842))+_0x29ffdf(0x4fd);}else _0x37f497[_0x47d0c5]=JSON[_0x29ffdf(0xc44)](_0x27807e);}catch(_0x30a1d6){}}}));if(Object['keys'](_0x37f497)[_0xb7f999(0x1e2)]===0x0){if('fcszm'!==_0xb7f999(0xc7c))_0x5ed971[_0xb7f999(0x27f)](_0xb7f999(0xde4)+_0x58160d['activeChatId'],_0x94144a);else return _0xb7f999(0xe1b);}const _0x36254d='\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“'+_0x519864['name']+'”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a',_0x4dcef6=[{'role':_0xb7f999(0xba3),'content':_0x36254d},{'role':_0xb7f999(0xa29),'content':JSON['stringify'](_0x37f497,null,0x2)}];_0x1a8bbc(!![],_0xb7f999(0x3eb));const _0x291fc6=await _0x2fa074(_0x4dcef6);return _0x291fc6||'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。';}else _0x1a111c[_0xb7f999(0x961)]=null;}finally{_0x1a8bbc(![]);}}document['getElementById'](_0x8dde82(0x955))['addEventListener'](_0x8dde82(0x288),()=>_0x137a40(_0x8dde82(0x410),_0x8dde82(0x401))),document[_0x8dde82(0x1d6)](_0x8dde82(0x457))[_0x8dde82(0x3a0)](_0x8dde82(0x288),()=>{const _0x4e0c1e=_0x8dde82;_0x4e0c1e(0x7f8)!==_0x4e0c1e(0x2ae)?(document[_0x4e0c1e(0x1d6)]('snoop-app-view-container')[_0x4e0c1e(0x329)][_0x4e0c1e(0xc66)]=_0x4e0c1e(0x338),_0x137a40('snoopList',_0x4e0c1e(0x27c))):_0x58e38e=_0x4e0c1e(0x4f0)+_0x55034f;});const _0x11e32d=document[_0x8dde82(0x1d6)](_0x8dde82(0x407));_0x11e32d&&(_0x8dde82(0xbb1)!==_0x8dde82(0xbb1)?_0x3424bf[_0x8dde82(0x27f)](_0x8dde82(0x6b2)+_0x1a5aac+':',_0x563eaa):_0x11e32d[_0x8dde82(0x3a0)]('click',()=>{const _0x107ef0=_0x8dde82;if('prvxR'!==_0x107ef0(0xa7b)){const _0x19cfa9=document[_0x107ef0(0x1d6)](_0x107ef0(0xcb0));_0x19cfa9&&(_0x19cfa9[_0x107ef0(0x555)][_0x107ef0(0x9ad)](_0x107ef0(0xc64)),_0x19cfa9['style']['transform']='',_0x19cfa9[_0x107ef0(0x329)][_0x107ef0(0x990)]='');}else _0xb70b72('生成日记失败:\x20'+_0x30f7a7[_0x107ef0(0x8ac)]);})),_0x38c34f();});async function _0x129cf7(){const _0x339a36=_0x2529dc;console[_0x339a36(0x7ec)](_0x339a36(0x296)),console[_0x339a36(0x7ec)](_0x339a36(0x972));async function _0x15aa3e(_0x51d9f4,_0x52eabe){const _0x13a510=_0x339a36;if('MeNJm'!==_0x13a510(0x619)){const _0xc9e36c=await _0x348abc;return new Promise((_0x20846e,_0x6c2cd3)=>{const _0x911a77=_0x13a510,_0x1fc486=_0xc9e36c['transaction'](_0x36a5e3,_0x911a77(0xece)),_0xe83375=_0x1fc486[_0x911a77(0xa49)](_0x36a5e3),_0x1388ea=_0xe83375[_0x911a77(0x2df)]({'id':_0x51d9f4,'blob':_0x52eabe});_0x1388ea[_0x911a77(0xdab)]=()=>_0x20846e(_0x1388ea['result']),_0x1388ea[_0x911a77(0x514)]=()=>_0x6c2cd3(_0x1388ea[_0x911a77(0x27f)]);});}else _0x308369[_0x13a510(0x555)]['add'](_0x13a510(0x8c0)),_0x28d6a7[_0x13a510(0x555)][_0x13a510(0x1cd)]('is-exiting-left'),_0x17a9f7[_0x13a510(0x555)]['add']('is-visible'),_0x15ff6f(()=>{const _0x3db41d=_0x13a510;_0x3b3fb0[_0x3db41d(0x555)][_0x3db41d(0x9ad)](_0x3db41d(0x434),_0x3db41d(0x127)),_0x15b20f[_0x3db41d(0x555)]['remove'](_0x3db41d(0x8c0)),_0x55f02b[_0x3db41d(0x110)]=_0x17f5c3,_0x41570b(),_0x3b16da[_0x3db41d(0x3f9)]=![];},0x2bc);}async function _0x44a02d(_0x11e53a){const _0x552ce3=_0x339a36;if('ZKjDx'===_0x552ce3(0xbff))_0x35416d[_0x552ce3(0x27f)](_0x552ce3(0x71c),_0x30ef7b);else{const _0x31a361=await _0x348abc;return new Promise((_0x44bebc,_0x483554)=>{const _0x1a9111=_0x552ce3,_0x3d9480=_0x31a361[_0x1a9111(0x314)](_0x3e59c1,_0x1a9111(0xd17)),_0x313669=_0x3d9480[_0x1a9111(0xa49)](_0x3e59c1),_0xafebee=_0x313669[_0x1a9111(0x4f9)](_0x11e53a);_0xafebee[_0x1a9111(0xdab)]=()=>_0x44bebc(_0xafebee[_0x1a9111(0xd29)]?_0xafebee[_0x1a9111(0xd29)][_0x1a9111(0x1e0)]:null),_0xafebee['onerror']=()=>_0x483554(_0xafebee[_0x1a9111(0x27f)]);});}}async function _0x576c25(_0x220df0,_0xdecad1){const _0x2ccf35=await _0x348abc;return new Promise((_0x4d45ed,_0x2fc88f)=>{const _0x331d6e=_0x4f70;if(_0x331d6e(0xaf7)!=='pyHrJ'){const _0x468a79=_0x22a51c['senderId']||_0x2348e0?.[_0x331d6e(0x41b)][0x0],_0x41d64d=_0x5276f4(_0x468a79);_0x43d3dd=_0x41d64d?_0x41d64d['name']:'角色';}else{const _0x4de60a=_0x2ccf35[_0x331d6e(0x314)](_0x3e59c1,'readwrite'),_0x1a5789=_0x4de60a['objectStore'](_0x3e59c1),_0x4bd787=_0x1a5789[_0x331d6e(0x2df)]({'id':_0x220df0,'data':_0xdecad1});_0x4bd787[_0x331d6e(0xdab)]=()=>_0x4d45ed(),_0x4bd787['onerror']=()=>_0x2fc88f(_0x4bd787[_0x331d6e(0x27f)]);}});}function _0x1bf0c1(_0x12f551){const _0xe0ff2f=_0x339a36;return fetch(_0x12f551)[_0xe0ff2f(0x94f)](_0x45a212=>_0x45a212['blob']());}let _0x1301db=0x0;for(let _0x186538=0x0;_0x186538<localStorage[_0x339a36(0x1e2)];_0x186538++){if(_0x339a36(0xd97)!=='HhTaj'){const _0x3cbcd3=localStorage[_0x339a36(0xb84)](_0x186538);if(_0x3cbcd3&&_0x3cbcd3[_0x339a36(0xb91)](_0x339a36(0x16c))){let _0x2f5e09,_0x4834b3=![];try{if('wtEJp'===_0x339a36(0x9b6))_0x5be7ad[_0x339a36(0x555)][_0x339a36(0x9ad)](_0x339a36(0x36e)),_0x2d2469=null;else{_0x2f5e09=JSON[_0x339a36(0xc44)](localStorage[_0x339a36(0x443)](_0x3cbcd3));if(!Array[_0x339a36(0xca5)](_0x2f5e09))continue;for(const _0x26af8b of _0x2f5e09){if(_0x26af8b&&_0x26af8b[_0x339a36(0x412)]&&_0x26af8b[_0x339a36(0x412)][_0x339a36(0xb91)](_0x339a36(0xdf9))){if('xUrOX'!=='xUrOX')_0x4af239[_0x339a36(0xa73)]='',_0xf6335c[_0x339a36(0xb85)](_0x3177d3=>{const _0x598c2a=_0x339a36,_0x58e2da=_0x4a49fc[_0x598c2a(0x8f1)]('div');_0x58e2da[_0x598c2a(0x101)]=_0x3177d3,_0x58e2da['addEventListener'](_0x598c2a(0x288),()=>{const _0x1fbc42=_0x598c2a;_0x24351a[_0x1fbc42(0xee2)]=_0x3177d3,_0x518bfc[_0x1fbc42(0x555)][_0x1fbc42(0x9ad)]('show');}),_0x59000e[_0x598c2a(0x5b8)](_0x58e2da);}),_0x5c2249[_0x339a36(0x555)][_0x339a36(0x1cd)](_0x339a36(0x36e)),_0x450ee1(_0x339a36(0xaa3)+_0x249ff6[_0x339a36(0x1e2)]+_0x339a36(0x2e3));else{const _0x3b7d69=await _0x1bf0c1(_0x26af8b[_0x339a36(0x412)]),_0x439907=_0x339a36(0xd2b)+Date[_0x339a36(0x4a2)]()+'_'+Math[_0x339a36(0x48a)]();await _0x15aa3e(_0x439907,_0x3b7d69),_0x26af8b['imageId']=_0x439907,delete _0x26af8b['image'],_0x4834b3=!![],_0x1301db++;}}}if(_0x4834b3){if(_0x339a36(0xb2c)===_0x339a36(0x8db)){const _0x44e6b3=_0x51473c[_0x339a36(0x1d6)](_0x339a36(0xc22));if(!_0x44e6b3)return;_0x2ea6f4['preferences'][_0x339a36(0xcbd)]?(_0x44e6b3['style'][_0x339a36(0x477)]=_0x339a36(0xb81),_0x44e6b3[_0x339a36(0x329)][_0x339a36(0x721)]=_0x339a36(0x1e7)):(_0x44e6b3['style'][_0x339a36(0x477)]='var(--text-color)',_0x44e6b3[_0x339a36(0x329)][_0x339a36(0x721)]=_0x339a36(0x338));}else localStorage[_0x339a36(0xa54)](_0x3cbcd3,JSON[_0x339a36(0xea5)](_0x2f5e09));}}}catch(_0x5aff3a){console['error'](_0x339a36(0xc9d)+_0x3cbcd3+_0x339a36(0xd31),_0x5aff3a);continue;}}}else _0xd84b80(),_0x1a0221(_0x339a36(0xb96),_0x339a36(0x410));}console[_0x339a36(0x7ec)]('净化完成！总共迁移了\x20'+_0x1301db+_0x339a36(0xf10));}function _0x16683e(_0x5c52b6,_0x27ddfb){const _0x5327eb=_0x2529dc,_0xd909f4=document[_0x5327eb(0x8f1)]('a'),_0x2ade31=URL[_0x5327eb(0x21c)](_0x5c52b6);_0xd909f4['href']=_0x2ade31,_0xd909f4[_0x5327eb(0x177)]=_0x27ddfb,document['body'][_0x5327eb(0x5b8)](_0xd909f4),_0xd909f4[_0x5327eb(0x288)](),document[_0x5327eb(0x42c)]['removeChild'](_0xd909f4),URL['revokeObjectURL'](_0x2ade31);}async function _0x475368(){const _0x257a57=_0x2529dc;console[_0x257a57(0x7ec)]('---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---'),console[_0x257a57(0x7ec)](_0x257a57(0x722));async function _0x41677f(_0x36eb5c,_0x3e3cbc){const _0x2073b2=await _0x348abc;return new Promise((_0x450cc9,_0x36a28f)=>{const _0x4de365=_0x4f70,_0x5e6fea=_0x2073b2[_0x4de365(0x314)](_0x4de365(0xa0d),_0x4de365(0xece)),_0xd652b7=_0x5e6fea[_0x4de365(0xa49)](_0x4de365(0xa0d)),_0x42eb44=_0xd652b7[_0x4de365(0x2df)]({'id':_0x36eb5c,'blob':_0x3e3cbc});_0x42eb44[_0x4de365(0xdab)]=()=>_0x450cc9(_0x42eb44['result']),_0x42eb44[_0x4de365(0x514)]=()=>_0x36a28f(_0x42eb44[_0x4de365(0x27f)]);});}function _0x1f3607(_0x2d2f2a){const _0x2fe7f6=_0x257a57;return fetch(_0x2d2f2a)[_0x2fe7f6(0x94f)](_0x994240=>_0x994240[_0x2fe7f6(0xc4a)]());}let _0x49b7e3=0x0,_0x522753=![];try{const _0x24cd9a=localStorage[_0x257a57(0x443)](_0x257a57(0x6a0));if(!_0x24cd9a){console[_0x257a57(0x7ec)]('好友圈档案柜是空的，无需净化。');return;}const _0x590b24=JSON[_0x257a57(0xc44)](_0x24cd9a);if(!_0x590b24[_0x257a57(0xdb9)]||!Array[_0x257a57(0xca5)](_0x590b24[_0x257a57(0xdb9)]))return;for(const _0x28a50d of _0x590b24[_0x257a57(0xdb9)]){if('TVxEx'==='MCfnW'){const _0x1ea0e6=_0x4c1586[_0x257a57(0x314)](_0x397cf8,'readonly'),_0x26ec75=_0x1ea0e6[_0x257a57(0xa49)](_0x1cff64),_0x2c54a1=_0x26ec75[_0x257a57(0xe82)]();_0x2c54a1[_0x257a57(0xdab)]=()=>_0x2ef2ca(_0x2c54a1[_0x257a57(0xd29)]),_0x2c54a1[_0x257a57(0x514)]=()=>_0x54ce26(_0x2c54a1[_0x257a57(0x27f)]);}else{if(_0x28a50d[_0x257a57(0x6b8)]&&Array[_0x257a57(0xca5)](_0x28a50d[_0x257a57(0x6b8)]))for(const _0x8cf8f2 of _0x28a50d[_0x257a57(0x6b8)]){if(_0x8cf8f2&&_0x8cf8f2[_0x257a57(0x412)]&&_0x8cf8f2[_0x257a57(0x412)][_0x257a57(0xb91)](_0x257a57(0xdf9))){console[_0x257a57(0x7ec)](_0x257a57(0x30c)+_0x28a50d[_0x257a57(0xb95)]+_0x257a57(0x681));const _0x3b1bdf=await _0x1f3607(_0x8cf8f2[_0x257a57(0x412)]),_0x357617=_0x257a57(0x2f1)+Date['now']()+'_'+Math[_0x257a57(0x48a)]();await _0x41677f(_0x357617,_0x3b1bdf),_0x8cf8f2[_0x257a57(0xe2d)]=_0x357617,delete _0x8cf8f2['image'],_0x522753=!![],_0x49b7e3++;}}}}_0x522753&&(console['log'](_0x257a57(0x6a6)),localStorage[_0x257a57(0xa54)](_0x257a57(0x6a0),JSON[_0x257a57(0xea5)](_0x590b24)));}catch(_0x2f5aeb){_0x257a57(0xc32)===_0x257a57(0xc32)?console[_0x257a57(0x27f)](_0x257a57(0x6f2),_0x2f5aeb):(_0x546b9c[_0x257a57(0x329)][_0x257a57(0x5b7)]=_0x257a57(0x8a1)+_0x213652['chatWallpaper']+'\x27)',_0x302717[_0x257a57(0x329)][_0x257a57(0xd79)]='cover',_0xdda7f4[_0x257a57(0x329)][_0x257a57(0x453)]=_0x257a57(0x6cc));}return console['log'](_0x257a57(0x29b)),console[_0x257a57(0x7ec)](_0x257a57(0xc68)+_0x49b7e3+_0x257a57(0x941)),_0x49b7e3;}async function _0x473b56(){const _0x38bdd2=_0x2529dc;console['log'](_0x38bdd2(0xd89)),console[_0x38bdd2(0x7ec)](_0x38bdd2(0x61e));let _0x2e0f0c=0x0,_0x146b67=![];try{if('LKOPl'==='zXZJP'){const _0x3b0cdf=_0x5a0648[_0x38bdd2(0x1d6)](_0x38bdd2(0x68f)),_0x9cc928=_0x3b0cdf[_0x38bdd2(0x7af)]('.wb-entry-item\x20input:checked'),_0x209fb5=_0x66a819[_0x38bdd2(0xb6c)](_0x38bdd2(0x7b4));if(_0x9cc928['length']===0x0)_0x209fb5[_0x38bdd2(0x101)]=_0x38bdd2(0x406);else _0x9cc928[_0x38bdd2(0x1e2)]>0x2?_0x209fb5[_0x38bdd2(0x101)]=_0x38bdd2(0xa12)+_0x9cc928[_0x38bdd2(0x1e2)]+'\x20项':_0x209fb5[_0x38bdd2(0x101)]=_0x5a7be4[_0x38bdd2(0xe74)](_0x9cc928)[_0x38bdd2(0x266)](_0x2c0eff=>_0x2c0eff[_0x38bdd2(0xcb5)]['textContent']['trim']())[_0x38bdd2(0xd9a)]('、');}else{const _0x4c46d6=localStorage[_0x38bdd2(0x443)](_0x38bdd2(0x6a0));if(!_0x4c46d6)return console[_0x38bdd2(0x7ec)](_0x38bdd2(0xd38)),0x0;for(let _0x217100=0x0;_0x217100<localStorage['length'];_0x217100++){if(_0x38bdd2(0x55d)!==_0x38bdd2(0x55d)){_0x544760[_0x38bdd2(0x7ec)]('已经在上传中，忽略重复点击');return;}else{const _0x410ade=localStorage['key'](_0x217100);if(_0x410ade&&_0x410ade['startsWith'](_0x38bdd2(0x16c))){let _0x3043b1,_0x523465=![];try{_0x3043b1=JSON[_0x38bdd2(0xc44)](localStorage[_0x38bdd2(0x443)](_0x410ade));if(!Array['isArray'](_0x3043b1))continue;for(const _0x42577e of _0x3043b1){if(_0x38bdd2(0x5cf)===_0x38bdd2(0x5cf)){if(_0x42577e&&(_0x42577e['type']==='music'||_0x42577e['type']===_0x38bdd2(0x8a3))&&_0x42577e[_0x38bdd2(0x520)]&&_0x42577e[_0x38bdd2(0x520)][_0x38bdd2(0xb91)]('data:image')){if(_0x38bdd2(0xd72)===_0x38bdd2(0x94e))_0xeb74bc[_0x38bdd2(0x683)][_0x38bdd2(0xb66)](..._0x344597[_0x38bdd2(0x6dd)]);else{const _0x5cf210=await _0x2b279d(_0x42577e[_0x38bdd2(0x520)]),_0x2d7ff3='music_cover_migrated_'+Date[_0x38bdd2(0x4a2)]()+'_'+Math['random']();await _0x510f28(_0x2d7ff3,_0x5cf210),_0x42577e[_0x38bdd2(0x6a3)]=_0x2d7ff3,delete _0x42577e[_0x38bdd2(0x520)],_0x523465=!![],_0x2e0f0c++;}}}else _0x2f69f2[_0x38bdd2(0x555)][_0x38bdd2(0x1cd)](_0x38bdd2(0x36e));}_0x523465&&localStorage[_0x38bdd2(0xa54)](_0x410ade,JSON[_0x38bdd2(0xea5)](_0x3043b1));}catch(_0x19d0b0){console['error'](_0x38bdd2(0xc9d)+_0x410ade+_0x38bdd2(0x5a7),_0x19d0b0);continue;}}}}}}catch(_0x1f0c47){console[_0x38bdd2(0x27f)](_0x38bdd2(0x26f),_0x1f0c47);}return console[_0x38bdd2(0x7ec)]('---\x20音乐净化仪式完成\x20---'),console['log']('成功净化并迁移了\x20'+_0x2e0f0c+_0x38bdd2(0x276)),_0x2e0f0c;}async function _0x3c0f0a(){const _0x49d68d=_0x2529dc;console[_0x49d68d(0x7ec)]('---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---'),console[_0x49d68d(0x7ec)]('正在检查是否有需要救援的旧头像...');let _0x3889e6=0x0;try{if(_0x49d68d(0xd13)==='gaakL'){const _0x428a86=localStorage[_0x49d68d(0x443)]('appState');if(!_0x428a86)return console[_0x49d68d(0x7ec)](_0x49d68d(0x575)),0x0;const _0x4e27c7=JSON['parse'](_0x428a86);if(!_0x4e27c7[_0x49d68d(0x94d)]||!Array['isArray'](_0x4e27c7[_0x49d68d(0x94d)]))return 0x0;for(const _0x4bf880 of _0x4e27c7[_0x49d68d(0x94d)]){if(_0x49d68d(0x43e)!=='tbLll'){if(_0x4bf880&&_0x4bf880[_0x49d68d(0x584)]&&_0x4bf880[_0x49d68d(0x584)][_0x49d68d(0xb91)]('data:image')){const _0x59b325=await _0x4131e2(_0x49d68d(0xa53)+_0x4bf880['id']);if(!_0x59b325){console[_0x49d68d(0x7ec)](_0x49d68d(0x270)+_0x4bf880[_0x49d68d(0xb95)]+_0x49d68d(0xd5c));const _0x6d00a8=await _0x2b279d(_0x4bf880[_0x49d68d(0x584)]);await _0x510f28('char_avatar_'+_0x4bf880['id'],_0x6d00a8),_0x3889e6++;}}}else{_0x3cdaa7=![],_0x16de55[_0x49d68d(0x1d6)](_0x49d68d(0x757))[_0x49d68d(0x329)]['display']=_0x49d68d(0x338),_0x32232b['getElementById']('livestream-textbox-container')[_0x49d68d(0x329)][_0x49d68d(0xc66)]='block',_0x160035[_0x49d68d(0x1d6)](_0x49d68d(0x982))['style'][_0x49d68d(0xc66)]=_0x49d68d(0xe12);if(!_0x5f402e){const _0x4d7817=_0x2995ba(_0x583aca[_0x49d68d(0x2bb)]);_0x4d7817&&(_0x4d7817[_0x49d68d(0x209)]=_0x385702,_0x4d9520(_0x377f0f[_0x49d68d(0x2bb)],_0x49d68d(0xcd5)));}}}}else _0x4bfcf0['push']({'role':'user','content':_0x2550d2}),_0x171ce0[_0x49d68d(0xb66)]({'role':_0x49d68d(0xefe),'content':_0x49d68d(0xdb1)});}catch(_0x291a6f){if('oaCZj'===_0x49d68d(0xcc7)){const _0x1a5771=_0x20aa8a[0x1][_0x49d68d(0xcd2)](),_0x116a8e=_0x38fe98[0x2][_0x49d68d(0xae9)]();let _0x320d49=(_0x14b385[0x3]||'')[_0x49d68d(0xcd2)]();const _0x14945d=new _0x1f4af4(_0x1a5771);if(_0x13de96(_0x14945d[_0x49d68d(0xa4d)]()))return _0x554b93[_0x49d68d(0x27f)](_0x49d68d(0xb8c),_0x1a5771),null;if(_0x116a8e===_0x49d68d(0x6b7))_0x320d49=null;else{if(!_0x320d49)return _0x10d18f[_0x49d68d(0x27f)]('Noir\x27s\x20Decoder:\x20fixed\x20或\x20prompted\x20类型的指令缺少内容。'),null;}return{'scheduleTime':_0x14945d,'type':_0x116a8e,'content':_0x320d49};}else console['error'](_0x49d68d(0x5c1),_0x291a6f);}return console['log'](_0x49d68d(0xfc)),console[_0x49d68d(0x7ec)](_0x49d68d(0x155)+_0x3889e6+_0x49d68d(0xcc0)),_0x3889e6;}function _0x4f70(_0x11a363,_0x3ff7e4){const _0x5f090f=_0x5f09();return _0x4f70=function(_0x4f7032,_0x5222b5){_0x4f7032=_0x4f7032-0xe4;let _0x1080cb=_0x5f090f[_0x4f7032];return _0x1080cb;},_0x4f70(_0x11a363,_0x3ff7e4);}function _0x218cd0(){const _0x96b519=_0x2529dc;if(!_0xdfbfac[_0x96b519(0x958)]){if(_0x96b519(0x416)===_0x96b519(0xe2e)){_0x32c4fc['characters']=_0x5406d7[_0x96b519(0x94d)]['filter'](_0x483a71=>_0x483a71['id']!==_0x311fc2),_0x191c5b[_0x96b519(0xc1b)][_0x96b519(0xb85)](_0x38dfe7=>{const _0x349ede=_0x96b519;_0x38dfe7[_0x349ede(0x8c7)]===_0x349ede(0x304)&&(_0x38dfe7[_0x349ede(0x41b)]=_0x38dfe7[_0x349ede(0x41b)][_0x349ede(0xeb3)](_0x2ddc9d=>_0x2ddc9d!==_0x372735));});const _0x7a5e88=_0x43e937['chats'][_0x96b519(0x76b)](_0x539986=>_0x539986[_0x96b519(0x8c7)]==='private'&&_0x539986['participantIds'][_0x96b519(0xc35)](_0x3ba045));_0x7a5e88&&_0x1fd6c8(_0x7a5e88['id']),_0x323bb3['chats']=_0x3bc582[_0x96b519(0xc1b)]['filter'](_0x21cec8=>_0x21cec8[_0x96b519(0x8c7)]!==_0x96b519(0x304)||_0x21cec8[_0x96b519(0x41b)][_0x96b519(0x1e2)]>0x1),_0x29c666(),_0x8b8247();}else return _0xdfbfac[_0x96b519(0xc37)][_0x96b519(0x76b)](_0xabbacb=>_0xabbacb['id']===_0xdfbfac[_0x96b519(0xb83)])||_0xdfbfac['userProfiles'][0x0];}const _0x3645cf=_0xdfbfac[_0x96b519(0xc1b)][_0x96b519(0x76b)](_0x16861b=>_0x16861b[_0x96b519(0x8c7)]===_0x96b519(0xcef)&&_0x16861b[_0x96b519(0x41b)][_0x96b519(0xc35)](_0xdfbfac[_0x96b519(0x958)])),_0x15d39d=_0x3645cf?.[_0x96b519(0xacb)]||_0xdfbfac[_0x96b519(0xb83)];return _0xdfbfac[_0x96b519(0xc37)][_0x96b519(0x76b)](_0x2e636a=>_0x2e636a['id']===_0x15d39d)||_0xdfbfac[_0x96b519(0xc37)][0x0];}function _0x301288(_0x1bc5c0){const _0x3d112f=_0x2529dc,_0x16d6c4=new Date(),_0x113eb1=_0x16d6c4-_0x1bc5c0,_0x1f7608=Math[_0x3d112f(0x375)](_0x113eb1/0x3e8),_0x473fd5=Math[_0x3d112f(0x375)](_0x1f7608/0x3c),_0xb57497=Math['round'](_0x473fd5/0x3c),_0x30f473=Math['round'](_0xb57497/0x18),_0x46b0ce=_0x1bc5c0[_0x3d112f(0x4f1)](_0x3d112f(0x731),{'hour':_0x3d112f(0xc49),'minute':_0x3d112f(0xc49)});if(_0x1f7608<0x3c){if(_0x3d112f(0x2d1)===_0x3d112f(0x168))_0x5e8036[_0x3d112f(0xcc5)](![]),_0x848dda(_0x3d112f(0xb40)+_0x1b4222['message']);else return'刚才';}if(_0x473fd5<0x3c)return _0x473fd5+_0x3d112f(0xbcb);const _0x320fcd=_0x16d6c4[_0x3d112f(0x9d1)]()===_0x1bc5c0[_0x3d112f(0x9d1)]();if(_0x320fcd){if('Npcgd'!==_0x3d112f(0xc5d)){const _0x1cc73b=[];if(_0x55bd2c[_0x3d112f(0xee)])_0x1cc73b['push']({'text':_0x40310d[_0x3d112f(0xee)]});if(_0x321956[_0x3d112f(0x412)]){const _0x5cfddf=_0xdefd3d[_0x3d112f(0x412)][_0x3d112f(0xc12)](',')[0x1],_0x4e0495=_0x310d8d[_0x3d112f(0x412)][_0x3d112f(0x3b1)](_0x5cf117[_0x3d112f(0x412)][_0x3d112f(0x843)](':')+0x1,_0x7ab54[_0x3d112f(0x412)]['indexOf'](';'))||_0x3d112f(0x85a);_0x1cc73b[_0x3d112f(0xb66)]({'inline_data':{'mime_type':_0x4e0495,'data':_0x5cfddf}});}return _0x1cc73b;}else return _0x3d112f(0x8d3)+_0x46b0ce;}const _0x382f22=new Date();_0x382f22[_0x3d112f(0xad1)](_0x16d6c4[_0x3d112f(0x55b)]()-0x1);const _0x5c93bd=_0x382f22[_0x3d112f(0x9d1)]()===_0x1bc5c0[_0x3d112f(0x9d1)]();if(_0x5c93bd)return _0x3d112f(0x12b)+_0x46b0ce;if(_0x30f473<=0x7){const _0x4a1c1a=[_0x3d112f(0x4de),'星期一',_0x3d112f(0x2c2),_0x3d112f(0x29e),_0x3d112f(0xcf9),_0x3d112f(0xe69),_0x3d112f(0xe5b)];return _0x4a1c1a[_0x1bc5c0[_0x3d112f(0xab8)]()]+'\x20'+_0x46b0ce;}return _0x1bc5c0[_0x3d112f(0x736)]()+'年'+(_0x1bc5c0[_0x3d112f(0xb0a)]()+0x1)+'月'+_0x1bc5c0[_0x3d112f(0x55b)]()+'日';}function _0x265126(_0x11caca,_0x23a1ca=0x320,_0x29bd26=0.8,_0xc183f0=![]){return new Promise((_0x49ccf2,_0x53604c)=>{const _0x576b97=_0x4f70;if(!_0x11caca||!_0x11caca[_0x576b97(0x8c7)][_0x576b97(0xb91)](_0x576b97(0xe8f)))return _0x53604c(new Error(_0x576b97(0x4b8)));const _0x2f778d=new FileReader();_0x2f778d[_0x576b97(0xa65)](_0x11caca),_0x2f778d[_0x576b97(0x787)]=_0x4eaec5=>{const _0x1defab=_0x576b97;if(_0x1defab(0x2f9)!==_0x1defab(0xe63)){const _0x404bcc=new Image();_0x404bcc['src']=_0x4eaec5['target']['result'],_0x404bcc[_0x1defab(0x787)]=()=>{const _0x11fbfa=_0x1defab,_0x5a3f07=document[_0x11fbfa(0x8f1)]('canvas');let _0x53e878=_0x404bcc['width'],_0x26f9a2=_0x404bcc['height'];_0x53e878>_0x26f9a2?_0x53e878>_0x23a1ca&&(_0x26f9a2*=_0x23a1ca/_0x53e878,_0x53e878=_0x23a1ca):_0x26f9a2>_0x23a1ca&&(_0x11fbfa(0xbe7)!==_0x11fbfa(0xbe7)?_0x1db6be[_0x11fbfa(0x3c6)]['forEach'](_0x5c5049=>{const _0x142ebb=_0x11fbfa,_0x236783=_0x25b727[_0x142ebb(0x3c6)][_0x142ebb(0x76b)](_0x2e6768=>_0x2e6768['name']===_0x5c5049[_0x142ebb(0xb95)]);!_0x236783&&_0x555116[_0x142ebb(0x3c6)][_0x142ebb(0xb66)]({'id':_0x5c5049['id']||_0x142ebb(0x3df)+_0x3945b8[_0x142ebb(0x4a2)](),'name':_0x5c5049[_0x142ebb(0xb95)]});}):(_0x53e878*=_0x23a1ca/_0x26f9a2,_0x26f9a2=_0x23a1ca));_0x5a3f07[_0x11fbfa(0x429)]=_0x53e878,_0x5a3f07['height']=_0x26f9a2;const _0x144547=_0x5a3f07['getContext']('2d');_0x144547[_0x11fbfa(0x156)](_0x404bcc,0x0,0x0,_0x53e878,_0x26f9a2);const _0x5e4034=_0x11caca[_0x11fbfa(0x8c7)]==='image/png'?'image/png':'image/jpeg';_0xc183f0?_0x5a3f07[_0x11fbfa(0xced)](_0x30e05a=>{const _0x307ade=_0x11fbfa;_0x30e05a?_0x49ccf2(_0x30e05a):_0x307ade(0x949)===_0x307ade(0x50c)?_0x19a543[_0x307ade(0x329)][_0x307ade(0x5b7)]='':_0x53604c(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.'));},_0x5e4034,_0x29bd26):_0x49ccf2(_0x5a3f07[_0x11fbfa(0x635)](_0x5e4034,_0x29bd26));},_0x404bcc[_0x1defab(0x514)]=_0x2908ec=>_0x53604c(_0x2908ec);}else _0xdb3149[_0x1defab(0x6d0)]({'behavior':_0x1defab(0x6b7),'block':_0x1defab(0x8de)});},_0x2f778d[_0x576b97(0x514)]=_0x3f7df5=>_0x53604c(_0x3f7df5);});}function _0x273922(_0x798311){return new Promise((_0x400a20,_0xfce584)=>{const _0x2d0677=_0x4f70;if(_0x2d0677(0xc95)!==_0x2d0677(0x20e)){const _0x40e1c1=new FileReader();_0x40e1c1[_0x2d0677(0x4a3)]=()=>_0x400a20(_0x40e1c1[_0x2d0677(0xd29)]),_0x40e1c1[_0x2d0677(0x514)]=_0xfce584,_0x40e1c1['readAsDataURL'](_0x798311);}else _0x1c4868(),_0x3d9302(![]),_0xc73996[_0x2d0677(0x556)]=![];});}function _0x273922(_0x234eb3){return new Promise((_0xfe7b2a,_0x182134)=>{const _0x1e7623=_0x4f70;if('xCyoU'!==_0x1e7623(0x847)){const _0x1c0f11=new FileReader();_0x1c0f11[_0x1e7623(0x4a3)]=()=>_0xfe7b2a(_0x1c0f11[_0x1e7623(0xd29)]),_0x1c0f11[_0x1e7623(0x514)]=_0x182134,_0x1c0f11[_0x1e7623(0xa65)](_0x234eb3);}else _0xfa5cd0[_0x1e7623(0x27f)](_0x1e7623(0xac4),_0x5c02c3);});}function _0x5d70f1(_0x213694,_0x5b11dc,_0x1da03e){const _0x1894bb=_0x2529dc,_0x4125e4=_0x225e43=>{const _0x3acde6=_0x4f70;if(_0x225e43[_0x3acde6(0xefb)]===_0x3acde6(0xa29))return _0xdfbfac[_0x3acde6(0x640)]?.['name']||_0x3acde6(0xb24);if(_0x213694[_0x3acde6(0x8c7)]===_0x3acde6(0x304)){const _0x55cb2f=_0x225e43[_0x3acde6(0xdf8)]?_0x4c4d58(_0x225e43[_0x3acde6(0xdf8)]):null;return _0x55cb2f?.[_0x3acde6(0xb95)]||_0x3acde6(0x2a6);}else{if(_0x3acde6(0x18b)!=='sMZSO'){const _0xc3a7d7=new _0x368224(),_0x5028b7=_0x315cc4[_0x3acde6(0x1d6)](_0x3acde6(0xdac)),_0x5e2307=_0x32aaff[_0x3acde6(0x1d6)](_0x3acde6(0xe8c)),_0x40c055=_0x46c71e[_0x3acde6(0x1d6)](_0x3acde6(0x223));_0x5028b7&&_0x5e2307&&(_0x5028b7['textContent']=_0xc3a7d7[_0x3acde6(0x4f1)](_0x3acde6(0x731),{'hour':_0x3acde6(0xc49),'minute':_0x3acde6(0xc49),'hour12':![]}),_0x5e2307['textContent']=_0xc3a7d7['toLocaleDateString'](_0x3acde6(0x731),{'month':_0x3acde6(0x8a8),'day':_0x3acde6(0xbc7),'weekday':_0x3acde6(0x8a8)})),_0x40c055&&(_0x40c055[_0x3acde6(0xa73)]=_0x3acde6(0xd49)+_0xc3a7d7[_0x3acde6(0x4f1)](_0x3acde6(0x731),{'hour':_0x3acde6(0xc49),'minute':'2-digit','hour12':![]})+'</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');}else{const _0x1bb097=_0x4c4d58(_0x213694[_0x3acde6(0x41b)][0x0]);return _0x1bb097?.[_0x3acde6(0xb95)]||'AI';}}},_0x1bd68c=_0x5b11dc[_0x1894bb(0x8b8)](-_0x1da03e),_0x1198f9=[];for(const _0x5f0851 of _0x1bd68c){const _0x3c8e3d=_0x5f0851['type']===_0x1894bb(0xbf0),_0x280389=_0x1bd68c[_0x1894bb(0x843)](_0x5f0851),_0x540b5c=_0x1bd68c[_0x1894bb(0x1e2)],_0x10f013=_0x540b5c-_0x280389<=0x1e;if(_0x3c8e3d&&!_0x10f013)continue;const _0x3fed2d=new Date(_0x5f0851['timestamp']),_0xd912bd=String(_0x3fed2d[_0x1894bb(0xb0a)]()+0x1)['padStart'](0x2,'0'),_0x1948b8=String(_0x3fed2d[_0x1894bb(0x55b)]())[_0x1894bb(0x4b9)](0x2,'0'),_0x263db3=String(_0x3fed2d[_0x1894bb(0xc43)]())['padStart'](0x2,'0'),_0xfe4ad4=String(_0x3fed2d[_0x1894bb(0x212)]())[_0x1894bb(0x4b9)](0x2,'0'),_0x1565e6=_0xd912bd+'-'+_0x1948b8+'\x20'+_0x263db3+':'+_0xfe4ad4,_0x2e13e1=_0x5f0851[_0x1894bb(0xf05)]?_0x1894bb(0x121):_0x1894bb(0x310);if(_0x5f0851[_0x1894bb(0xee)]){if('NlzZp'===_0x1894bb(0xa8f))_0x3f9e70+='-\x20你记得曾和“'+_0xebe4b4[_0x1894bb(0x19c)]+_0x1894bb(0xb46)+_0x1d98a2[_0x1894bb(0x7d0)]+'”。\x0a',_0x15d6d9['log']&&_0x5a5731[_0x1894bb(0xca5)](_0x11da2c[_0x1894bb(0x7ec)])&&(_0x1c5f11+=_0x1894bb(0x308),_0x3e8b14['log'][_0x1894bb(0xb85)](_0x4cb0da=>{const _0x27e28a=_0x1894bb,_0x407408=_0x4cb0da['sender']==='character'?'你':_0x2030ab[_0x27e28a(0x19c)];_0x32d126+=_0x27e28a(0x1a7)+_0x407408+':\x20'+_0x4cb0da[_0x27e28a(0xee)]+'\x20\x0a';}));else{const _0x3e8ac5=_0x5f0851[_0x1894bb(0xf05)]?String(_0x5f0851[_0x1894bb(0xee)])[_0x1894bb(0xcd2)]()[_0x1894bb(0xbe2)](/\n+/g,'\x20'):String(_0x5f0851[_0x1894bb(0xee)])[_0x1894bb(0xcd2)]();if(_0x3e8ac5)_0x1198f9['push'](_0x2e13e1+'\x20['+_0x1565e6+']\x20['+_0x4125e4(_0x5f0851)+']\x20'+_0x3e8ac5);}}}return _0x1198f9;}function _0x11a8fa(_0x2433f6){const _0x192625=_0x2529dc;if(_0x2433f6[_0x192625(0x8c7)]===_0x192625(0x304))return _0x192625(0xe21)+(_0x2433f6['name']||_0x192625(0x4da))+'」';const _0xb1aeeb=_0x4c4d58(_0x2433f6[_0x192625(0x41b)][0x0]);return'与\x20'+(_0xb1aeeb?.[_0x192625(0xb95)]||'未知角色')+_0x192625(0x4fd);}function _0x3a904e(_0x2ca138){const _0x10346f=_0x2529dc;try{const _0xd059e6=localStorage['getItem']('chatHistory_'+_0x2ca138),_0x2963ca=JSON[_0x10346f(0xc44)](_0xd059e6||'[]');return Array[_0x10346f(0xca5)](_0x2963ca)?_0x2963ca:[];}catch{if(_0x10346f(0x11c)===_0x10346f(0xb90)){const _0x412d37=_0x10f631(_0x19543f[_0x10346f(0x41b)][0x0]);return _0x412d37?.[_0x10346f(0xb95)]||'AI';}else return[];}}function _0x5a83ee(_0x162544){const _0x1351ea=_0x2529dc,_0x432f9e=Math[_0x1351ea(0xbf5)](0x1,Number(_0xdfbfac[_0x1351ea(0x3a8)]?.[_0x1351ea(0x89c)]??0x64)),_0x4b8494=_0xdfbfac['chats'][_0x1351ea(0xeb3)](_0x248b22=>_0x248b22[_0x1351ea(0x41b)]['includes'](_0x162544)),_0x1bbd5e=_0x4b8494[_0x1351ea(0x266)](_0x1fa845=>{const _0x36e89b=_0x1351ea;if(_0x36e89b(0x253)!==_0x36e89b(0xea1)){const _0x35f183=_0x3a904e(_0x1fa845['id']),_0x1885fb=_0x35f183[_0x36e89b(0x1e2)]>0x0?_0x35f183[_0x35f183[_0x36e89b(0x1e2)]-0x1]:null;return{'chat':_0x1fa845,'history':_0x35f183,'lastTimestamp':_0x1885fb?_0x1885fb[_0x36e89b(0x10c)]:0x0};}else _0x28840a[_0x36e89b(0xcab)]&&(_0x3d75b6[_0x36e89b(0xc2a)]?_0x1ed80e[_0x36e89b(0xe7f)]():_0x315522[_0x36e89b(0x57a)]());})[_0x1351ea(0xeb3)](_0x2fe758=>_0x2fe758['history']['length']>0x0);_0x1bbd5e[_0x1351ea(0x6d9)]((_0x17792e,_0x236270)=>_0x236270[_0x1351ea(0x715)]-_0x17792e[_0x1351ea(0x715)]);const _0x3071b2=[],_0x26d908={};return _0x1bbd5e[_0x1351ea(0xb85)]((_0x395450,_0x2a4a39)=>{const _0x3ab61b=_0x1351ea,_0xd89952=_0x5d70f1(_0x395450[_0x3ab61b(0xa77)],_0x395450['history'],_0x432f9e);if(_0xd89952[_0x3ab61b(0x1e2)]===0x0)return;const _0x105287=_0x2a4a39===0x0?'来源：[最活跃]':'来源：';_0x3071b2['push'](_0x3ab61b(0xc76)+_0x105287+_0x11a8fa(_0x395450[_0x3ab61b(0xa77)])+'\x0a'+_0xd89952[_0x3ab61b(0xd9a)]('\x0a')),_0x26d908[_0x395450[_0x3ab61b(0xa77)]['id']]=_0xd89952[_0x3ab61b(0x1e2)];}),{'omniText':_0x3071b2[_0x1351ea(0xd9a)]('\x0a\x0a'),'usedCounts':_0x26d908};}function _0x59d839(_0x1d96b4){const _0x4bdb46=_0x2529dc;let _0x25ed19=null;const _0x45953b=_0xdfbfac[_0x4bdb46(0xc1b)][_0x4bdb46(0xeb3)](_0x13865a=>_0x13865a['participantIds'][_0x4bdb46(0xc35)](_0x1d96b4));for(const _0x21882e of _0x45953b){const _0x5c8162=_0x3a904e(_0x21882e['id']);if(_0x5c8162&&_0x5c8162['length']>0x0){if(_0x4bdb46(0x130)!==_0x4bdb46(0x130)){const _0x39c91f=_0x36edd6[_0x4bdb46(0x646)](!![]);_0x4a5b78[_0x4bdb46(0x669)][_0x4bdb46(0x913)](_0x39c91f,_0x58ff61),_0x39c91f[_0x4bdb46(0x3a0)]('click',_0x462de7),_0x4bdb5f[_0x4bdb46(0x7ec)](_0x4bdb46(0xec5));}else{const _0x30f27c=_0x5c8162[_0x5c8162[_0x4bdb46(0x1e2)]-0x1];(!_0x25ed19||_0x30f27c[_0x4bdb46(0x10c)]>_0x25ed19['timestamp'])&&(_0x25ed19=_0x30f27c);}}}return _0x25ed19;}function _0x4c2894(_0x1f0813){const _0x4d3760=_0x2529dc;if(!_0x1f0813||!_0x1f0813[_0x4d3760(0xc35)](','))return _0x1f0813;const _0x202cee=_0x1f0813[_0x4d3760(0xc12)](',')[_0x4d3760(0x266)](_0x215a50=>_0x215a50[_0x4d3760(0xcd2)]());return _0x202cee[Math['floor'](Math[_0x4d3760(0x48a)]()*_0x202cee[_0x4d3760(0x1e2)])];}function _0x13215d(_0x5cf33){return new Promise(_0x1edf4a=>{const _0x478215=_0x4f70,_0x41885e=document[_0x478215(0x1d6)](_0x478215(0x98d)),_0x150bf4=document[_0x478215(0x1d6)](_0x478215(0x86d)),_0x72cf99=document[_0x478215(0x1d6)](_0x478215(0xc94)),_0x4df490=document[_0x478215(0x1d6)](_0x478215(0xbb8)),_0xa68c6a=document['getElementById'](_0x478215(0x9af));_0x150bf4[_0x478215(0x101)]=_0x5cf33,_0x41885e['style']['display']='flex';const _0x57a772=_0x1ed2fa=>{const _0xd768e3=_0x478215;if(_0xd768e3(0x8bc)!==_0xd768e3(0xca2))_0x41885e[_0xd768e3(0x329)][_0xd768e3(0xc66)]='none',_0x72cf99[_0xd768e3(0x4a1)]=_0x4df490[_0xd768e3(0x4a1)]=_0xa68c6a['onclick']=null,document[_0xd768e3(0x255)](_0xd768e3(0xc31),_0x3680a5),_0x1edf4a(_0x1ed2fa);else{const _0x1c5331=_0x1b5a3b[_0xd768e3(0x4dc)](/start_time:\s*"?([^"\n]+)"?/),_0x480b0f=_0x193783[_0xd768e3(0x4dc)](/theme:\s*"?([^"\n]+)"?/),_0x4dda48=_0x1c5331?_0x1c5331[0x1]:_0xd768e3(0xc73),_0x272cee=_0x1c357e[_0xd768e3(0x8f1)]('div');_0x272cee[_0xd768e3(0x213)]=_0xd768e3(0x66d),_0x272cee[_0xd768e3(0xa73)]=_0xd768e3(0xdbe)+(_0x480b0f?_0x480b0f[0x1]:_0xd768e3(0x7e8))+_0xd768e3(0x643)+_0x4dda48+'</div>\x0a</div>\x0a',_0x272cee['addEventListener'](_0xd768e3(0x288),()=>_0x43689a(_0x543b75)),_0x272cee[_0xd768e3(0x3a0)](_0xd768e3(0x5c9),_0x4ee029=>{const _0x50459c=_0xd768e3;_0x4ee029[_0x50459c(0x23c)]===0x0&&_0x1e0b38(_0x4ee029,_0x1081fb,_0xcb3a7e);}),_0x272cee['addEventListener'](_0xd768e3(0xa6c),_0x3e2f80=>_0x565f13(_0x3e2f80,_0x4ce74c,_0x215c29),{'passive':![]}),_0x272cee[_0xd768e3(0x3a0)]('contextmenu',_0x54fa21=>_0x54fa21[_0xd768e3(0xc7a)]()),_0x272cee['addEventListener'](_0xd768e3(0x1c1),_0x500fed=>_0x500fed[_0xd768e3(0xc7a)]()),_0x3777e5[_0xd768e3(0x5b8)](_0x272cee);}},_0x3680a5=_0x478a60=>{const _0x164bd2=_0x478215;if(_0x478a60[_0x164bd2(0xb84)]===_0x164bd2(0x309))_0x57a772(![]);if(_0x478a60[_0x164bd2(0xb84)]===_0x164bd2(0x2ac))_0x57a772(!![]);};_0x72cf99['onclick']=()=>_0x57a772(!![]),_0x4df490[_0x478215(0x4a1)]=()=>_0x57a772(![]),_0xa68c6a[_0x478215(0x4a1)]=()=>_0x57a772(![]),document[_0x478215(0x3a0)](_0x478215(0xc31),_0x3680a5);});}function _0x21d6ce(_0x18473d){const _0x5088cc=_0x2529dc,_0x17df94=document[_0x5088cc(0x1d6)](_0x5088cc(0xde9));_0x17df94[_0x5088cc(0x101)]=_0x18473d,_0x17df94[_0x5088cc(0x329)][_0x5088cc(0xc66)]=_0x5088cc(0xc38);if(_0x21d6ce['_t'])clearTimeout(_0x21d6ce['_t']);_0x21d6ce['_t']=setTimeout(()=>{const _0xdcec47=_0x5088cc;_0x17df94[_0xdcec47(0x329)][_0xdcec47(0xc66)]=_0xdcec47(0x338);},0x1388);}function _0x1c3b21(){const _0x51a851=_0x2529dc,_0x52b135=document[_0x51a851(0x1d6)](_0x51a851(0xcb0));if(!_0x52b135)return;let _0x3ee890=0x0,_0x3aef19=0x0;const _0x5c5629=0x50;let _0x67f2ea=![];const _0x462141=_0x46d8cf=>{const _0x1f7bff=_0x51a851;_0x3ee890=_0x46d8cf[_0x1f7bff(0xa17)]?_0x46d8cf[_0x1f7bff(0xa17)][0x0]['clientY']:_0x46d8cf['clientY'],_0x3aef19=0x0,_0x52b135[_0x1f7bff(0x329)]['transition']=_0x1f7bff(0x338),_0x67f2ea=!![],_0x46d8cf[_0x1f7bff(0x8c7)]===_0x1f7bff(0x5c9)&&(document[_0x1f7bff(0x3a0)](_0x1f7bff(0x50e),_0x4a07d4),document[_0x1f7bff(0x3a0)](_0x1f7bff(0xc67),_0x283e57));},_0x4a07d4=_0x567df3=>{const _0x152fc7=_0x51a851;if(!_0x67f2ea)return;const _0x411aba=_0x567df3[_0x152fc7(0xa17)]?_0x567df3['touches'][0x0]['clientY']:_0x567df3[_0x152fc7(0x107)];_0x3aef19=_0x411aba-_0x3ee890;if(_0x3aef19<0x0){const _0x5c8379=Math[_0x152fc7(0x9f0)](_0x3aef19),_0x3227de=0.4,_0x458b9e=Math[_0x152fc7(0x5ce)](_0x5c8379,_0x3227de)*0x14;_0x52b135['style'][_0x152fc7(0x71d)]=_0x152fc7(0x51f)+_0x458b9e+_0x152fc7(0x21d);}},_0x283e57=()=>{const _0xdaad76=_0x51a851;if(_0xdaad76(0xf0e)!==_0xdaad76(0xb36)){if(!_0x67f2ea)return;_0x67f2ea=![],_0x52b135[_0xdaad76(0x329)][_0xdaad76(0x869)]=_0xdaad76(0x63e);if(_0x3aef19<-_0x5c5629)_0xdaad76(0x870)!=='WBtNC'?(_0x41a53e['style'][_0xdaad76(0xc66)]='none',_0x569298[_0xdaad76(0x329)][_0xdaad76(0xb89)]=_0xdaad76(0xb14)):_0x52b135['classList'][_0xdaad76(0x1cd)](_0xdaad76(0xc64));else{if('cVVze'===_0xdaad76(0xf8)){const _0x5d6d38=_0x3a5fe2[_0xdaad76(0x1d6)](_0xdaad76(0x876)),_0x3fed45=_0x2aa4b3[_0xdaad76(0x1d6)](_0xdaad76(0x846)),_0x1100e2=new _0x2f8c13();_0x1100e2[_0xdaad76(0x8a0)](0x0,0x0,0x0,0x0);const _0x39720a=_0x127993[_0xdaad76(0x8b2)][_0xdaad76(0xeb3)](_0x17fc18=>_0x17fc18[_0xdaad76(0x8c7)]===_0xdaad76(0x992)&&new _0x39c15f(_0x17fc18[_0xdaad76(0xdc9)]+_0xdaad76(0xb2b))>=_0x1100e2)['sort']((_0x37185b,_0x2bc6a4)=>new _0xcc343(_0x37185b[_0xdaad76(0xdc9)])-new _0xe7de12(_0x2bc6a4[_0xdaad76(0xdc9)]));if(_0x39720a[_0xdaad76(0x1e2)]>0x0){const _0x256c66=_0x39720a[0x0],_0x4943a0=new _0x8ee34a(_0x256c66[_0xdaad76(0xdc9)]+_0xdaad76(0xb2b)),_0x279b69=_0x4943a0-_0x1100e2,_0x217e82=_0x5e01e5['ceil'](_0x279b69/(0x3e8*0x3c*0x3c*0x18));_0x5d6d38['textContent']=_0xdaad76(0x422)+_0x256c66[_0xdaad76(0xee)]+'」',_0x3fed45[_0xdaad76(0xa73)]='<span>'+_0x217e82+_0xdaad76(0x4e2);}else _0x5d6d38[_0xdaad76(0x101)]=_0xdaad76(0xa1b),_0x3fed45[_0xdaad76(0xa73)]='<span>--</span><span\x20class=\x22unit\x22>天</span>';}else _0x52b135[_0xdaad76(0x329)][_0xdaad76(0x71d)]=_0xdaad76(0xa6e);}document[_0xdaad76(0x255)](_0xdaad76(0x50e),_0x4a07d4),document['removeEventListener'](_0xdaad76(0xc67),_0x283e57);}else _0x4dc96e['hasNewDMReply']&&(_0x7b633b[_0xdaad76(0x337)]=![],_0x15cc5b['classList'][_0xdaad76(0x9ad)](_0xdaad76(0x996))),_0x428d6b['focus'](),_0x314d1b();};_0x52b135['addEventListener']('touchstart',_0x462141,{'passive':!![]}),_0x52b135['addEventListener'](_0x51a851(0x1f3),_0x4a07d4,{'passive':!![]}),_0x52b135[_0x51a851(0x3a0)](_0x51a851(0xb8b),_0x283e57),_0x52b135[_0x51a851(0x3a0)]('mousedown',_0x462141);}function _0x232da1(){const _0x5d4802=_0x2529dc,_0x1c6d1e=document[_0x5d4802(0x1d6)](_0x5d4802(0xd52)),_0x3c3fac=document[_0x5d4802(0x1d6)](_0x5d4802(0x442)),_0x550ad3=document['querySelectorAll'](_0x5d4802(0xd4f)),_0x4f740b=document[_0x5d4802(0x1d6)](_0x5d4802(0x8b4));let _0x5ae95c=0x0;const _0x372927=0x2;_0x3c3fac[_0x5d4802(0x329)][_0x5d4802(0x429)]=_0x5d4802(0x2f2),_0x4f740b[_0x5d4802(0x329)]['display']=_0x5d4802(0xe12);function _0x58999c(_0x1f5073){const _0x4c4615=_0x5d4802;if(_0x4c4615(0x4ad)===_0x4c4615(0x14c))_0x545ed1(![]),_0x2c1fd9[_0x4c4615(0x556)]=![];else{if(_0x1f5073<0x0||_0x1f5073>=_0x372927)return;_0x3c3fac[_0x4c4615(0x329)][_0x4c4615(0x71d)]=_0x4c4615(0x4c4)+_0x1f5073*(0x64/_0x372927)+'%)',_0x550ad3[_0x4c4615(0xb85)](_0x6d2c49=>_0x6d2c49[_0x4c4615(0x555)][_0x4c4615(0x9ad)](_0x4c4615(0x691))),_0x550ad3[_0x1f5073][_0x4c4615(0x555)][_0x4c4615(0x1cd)](_0x4c4615(0x691)),_0x5ae95c=_0x1f5073;}}_0x58999c(0x0),_0x550ad3[_0x5d4802(0xb85)](_0x251d5b=>{const _0x3a9e81=_0x5d4802;_0x251d5b[_0x3a9e81(0x3a0)](_0x3a9e81(0x288),()=>{const _0x142337=_0x3a9e81,_0x1df7ba=parseInt(_0x251d5b[_0x142337(0x63f)][_0x142337(0xedd)],0xa);_0x58999c(_0x1df7ba);});});let _0x2b517b=0x0,_0xecc2d5=0x0,_0xc9fc3f=0x0,_0x265dbe=![],_0x285124='';_0x1c6d1e[_0x5d4802(0x3a0)](_0x5d4802(0xa6c),_0x356c23=>{const _0x13b8e1=_0x5d4802;_0x13b8e1(0xdee)!==_0x13b8e1(0x8cb)?(_0x2b517b=_0x356c23[_0x13b8e1(0xa17)][0x0][_0x13b8e1(0x52d)],_0xecc2d5=_0x356c23['touches'][0x0][_0x13b8e1(0x107)],_0x265dbe=!![],_0x285124=''):(_0x49d8b0['style'][_0x13b8e1(0xc66)]=_0x13b8e1(0xe12),_0x9738a(()=>_0x232e72[_0x13b8e1(0x555)][_0x13b8e1(0x1cd)]('show'),0xa));},{'passive':!![]}),_0x1c6d1e[_0x5d4802(0x3a0)]('touchmove',_0x4006d0=>{const _0x51a735=_0x5d4802;if(_0x51a735(0x9cc)!=='Dpxsq'){const _0x1c24b0=_0x4625bd[_0x51a735(0x555)][_0x51a735(0xcbc)](_0x51a735(0x36e));_0x4aa551['classList'][_0x51a735(0x5be)](_0x51a735(0xce9),_0x1c24b0),!_0x1c24b0&&(_0x208c09&&_0x32b8a3[_0x51a735(0x288)]());}else{if(!_0x265dbe)return;if(_0x285124===''){const _0x2bcbc2=_0x4006d0[_0x51a735(0xa17)][0x0][_0x51a735(0x52d)]-_0x2b517b,_0x1bc9da=_0x4006d0[_0x51a735(0xa17)][0x0][_0x51a735(0x107)]-_0xecc2d5;Math[_0x51a735(0x9f0)](_0x2bcbc2)>Math[_0x51a735(0x9f0)](_0x1bc9da)?_0x285124='horizontal':_0x285124=_0x51a735(0xbf3);}_0x285124==='horizontal'&&_0x4006d0['preventDefault']();}},{'passive':![]}),_0x1c6d1e[_0x5d4802(0x3a0)](_0x5d4802(0xb8b),_0x271018=>{const _0x4bac72=_0x5d4802;if(!_0x265dbe)return;_0xc9fc3f=_0x271018['changedTouches'][0x0][_0x4bac72(0x52d)],_0x285124==='horizontal'&&_0x19717f(),_0x265dbe=![];});function _0x19717f(){const _0x2bcbb9=0x32;if(_0xc9fc3f<_0x2b517b-_0x2bcbb9)_0x58999c(_0x5ae95c+0x1);else _0xc9fc3f>_0x2b517b+_0x2bcbb9&&_0x58999c(_0x5ae95c-0x1);}}function _0x16e7af(){return new Promise(_0x574891=>{const _0x336744=_0x4f70,_0xe22125=document[_0x336744(0x1d6)]('music-input-modal'),_0x4f34c7=document[_0x336744(0x1d6)](_0x336744(0x3dc)),_0x51eafc=document['getElementById'](_0x336744(0xe78)),_0x8ef52f=document[_0x336744(0x1d6)](_0x336744(0x56b)),_0x134302=document[_0x336744(0x1d6)](_0x336744(0x738)),_0x1022fd=document['getElementById'](_0x336744(0xd11));_0x4f34c7[_0x336744(0xee2)]='',_0x51eafc[_0x336744(0xee2)]='',_0xe22125[_0x336744(0x555)][_0x336744(0x1cd)](_0x336744(0x36e)),_0x4f34c7['focus']();const _0x9a501b=_0x480c06=>{const _0x321d25=_0x336744;if(_0x321d25(0x377)===_0x321d25(0x377))_0xe22125[_0x321d25(0x555)]['remove']('show'),_0x8ef52f[_0x321d25(0x4a1)]=null,_0x134302[_0x321d25(0x4a1)]=null,_0x1022fd[_0x321d25(0x4a1)]=null,document[_0x321d25(0x255)]('keydown',_0x318d4e),_0x574891(_0x480c06);else return _0x3e6e8c(_0x321d25(0xd33)),![];},_0x48c7de=()=>{const _0x5cfd86=_0x336744;if(_0x5cfd86(0x1ec)===_0x5cfd86(0x7d4))_0x3806e9[_0x5cfd86(0x27f)]('导出账本失败:',_0x397045),_0x16aec9(_0x5cfd86(0x6d1)+_0x5a77fd[_0x5cfd86(0x8ac)]);else{const _0x53dce7=_0x4f34c7[_0x5cfd86(0xee2)][_0x5cfd86(0xcd2)](),_0x46ffe5=_0x51eafc[_0x5cfd86(0xee2)][_0x5cfd86(0xcd2)]();if(!_0x53dce7||!_0x46ffe5){_0x21d6ce(_0x5cfd86(0x2a3));return;}_0x9a501b({'songName':_0x53dce7,'artist':_0x46ffe5});}},_0x318d4e=_0x1fc75b=>{const _0xd318a3=_0x336744;if(_0x1fc75b['key']===_0xd318a3(0x309))_0x9a501b(null);_0x1fc75b[_0xd318a3(0xb84)]===_0xd318a3(0x2ac)&&(_0xd318a3(0x91f)!==_0xd318a3(0x91f)?_0x203849&&_0x265c55(_0x473a08['id'],_0x9f788c[_0xd318a3(0x266)](_0x18c12f=>_0x18c12f['id'])):(_0x1fc75b['preventDefault'](),_0x48c7de()));};_0x8ef52f[_0x336744(0x4a1)]=_0x48c7de,_0x134302['onclick']=()=>_0x9a501b(null),_0x1022fd[_0x336744(0x4a1)]=()=>_0x9a501b(null),document['addEventListener'](_0x336744(0xc31),_0x318d4e);});}function _0x48a93f(_0x98180b){const _0x57324f=_0x2529dc;if(!_0x98180b)return{'bubbles':[],'schedules':[]};const _0x2d80ae=_0x98180b[_0x57324f(0xcd2)]();if(_0x2d80ae[_0x57324f(0xb91)]('<div')&&_0x2d80ae[_0x57324f(0xbc5)](_0x57324f(0x396)))return{'bubbles':[_0x2d80ae],'schedules':[]};const _0x25feba=/(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\]|\[schedule_message[^\]]+\])/g,_0x38a112=_0x57324f(0xeac),_0x1fd25d=[],_0x6c3387=_0x98180b[_0x57324f(0xbe2)](_0x25feba,_0x368ea8=>{const _0x5ca100=_0x57324f;return _0x1fd25d[_0x5ca100(0xb66)](_0x368ea8),_0x38a112;}),_0x2bf215=_0x6c3387[_0x57324f(0xc12)](_0x38a112),_0x46ae9a=[],_0x23b348=[];let _0x132ca1=0x0;return _0x2bf215[_0x57324f(0xb85)]((_0x2acf47,_0xbe25ae)=>{const _0x107d4a=_0x57324f,_0xa87399=_0x2acf47['trim']();_0xa87399&&_0x46ae9a[_0x107d4a(0xb66)](..._0x2b3880(_0xa87399));if(_0x132ca1<_0x1fd25d[_0x107d4a(0x1e2)]){if(_0x107d4a(0x99b)==='Uicny')_0x5fe0b8&&_0x2c2710(_0x255639);else{const _0x1b2a90=_0x1fd25d[_0x132ca1][_0x107d4a(0xcd2)]();if(_0x1b2a90[_0x107d4a(0xb91)](_0x107d4a(0x2b1))){const _0x1c082f=_0x5b4003(_0x1b2a90);if(_0x1c082f){if(_0x107d4a(0xbb4)!==_0x107d4a(0xd14))_0x23b348[_0x107d4a(0xb66)](_0x1c082f);else{const _0x55943d=_0x2fcd1a['toLowerCase']();if(_0x21dc00[_0x107d4a(0x7d1)](_0x38c68c=>_0x55943d[_0x107d4a(0xb91)](_0x38c68c))){const _0x5eb989=_0x188a3c[_0x177541];if(typeof _0x5eb989==='string')_0x32a1fa[_0x107d4a(0xb66)](_0x5eb989);if(_0x954269[_0x107d4a(0xca5)](_0x5eb989))_0x5eb989[_0x107d4a(0xb85)](_0x1273d5=>{const _0x5e6e9d=_0x107d4a;if(typeof _0x1273d5===_0x5e6e9d(0x193))_0x230b61[_0x5e6e9d(0xb66)](_0x1273d5);});}}}}else{if('bUhKT'==='TBtkq'){if(_0x22b2ef[_0x107d4a(0x8c7)]===_0x107d4a(0xa6c))_0x1cefd3[_0x107d4a(0xc7a)]();_0x44194d(_0xd369bd['id'],_0x13943b[_0x107d4a(0xb95)]);}else _0x46ae9a[_0x107d4a(0xb66)](_0x1b2a90);}_0x132ca1++;}}}),{'bubbles':_0x46ae9a,'schedules':_0x23b348};}function _0x4b262e(_0xc8c0a,_0x1ebaef,_0x16b41f=''){const _0x2e010f=_0x2529dc,_0x45735c=document[_0x2e010f(0x8f1)](_0x2e010f(0xce2));_0x45735c['className']=_0x2e010f(0x630)+_0x16b41f;const _0x11e633=document[_0x2e010f(0x8f1)](_0x2e010f(0x971));_0x11e633[_0x2e010f(0xcab)]=_0xc8c0a,_0x11e633[_0x2e010f(0x213)]=_0x2e010f(0x584);const _0x2ee25d=document[_0x2e010f(0x8f1)](_0x2e010f(0xce2));return _0x2ee25d[_0x2e010f(0x213)]=_0x2e010f(0xa4a),_0x1ebaef&&(_0x2ee25d[_0x2e010f(0x329)][_0x2e010f(0x5b7)]='url(\x27'+_0x1ebaef+'\x27)'),_0x45735c['appendChild'](_0x11e633),_0x45735c[_0x2e010f(0x5b8)](_0x2ee25d),_0x45735c;}function _0x277ffe(_0x4d6abd){const _0x2604ef=_0x2529dc;if(!_0x4d6abd)return[];let _0x354fd1=String(_0x4d6abd)[_0x2604ef(0xcd2)]();const _0x290bd3=_0x354fd1['match'](/```(?:json)?([\s\S]*?)```/i);if(_0x290bd3)_0x354fd1=_0x290bd3[0x1][_0x2604ef(0xcd2)]();try{const _0x47551e=JSON[_0x2604ef(0xc44)](_0x354fd1);if(_0x47551e&&Array[_0x2604ef(0xca5)](_0x47551e['reply'])){if(_0x2604ef(0xe8b)!=='HFKKS'){_0x373715(_0x2604ef(0x6dc));return;}else return _0x47551e[_0x2604ef(0x5ad)]['map'](_0x2c2a90=>typeof _0x2c2a90==='string'?_0x2c2a90:_0x2c2a90?.['content'])[_0x2604ef(0xeb3)](Boolean)[_0x2604ef(0xbfb)](_0x2b3880);}const _0x493366=[_0x2604ef(0xa80),'dialogue','message','text',_0x2604ef(0xee),_0x2604ef(0x1c6),_0x2604ef(0x26d)];if(_0x47551e&&typeof _0x47551e===_0x2604ef(0x388)){const _0x482a14=[];for(const _0x2a7dbc of Object[_0x2604ef(0x83d)](_0x47551e)){const _0xf4bb92=_0x2a7dbc[_0x2604ef(0xae9)]();if(_0x493366[_0x2604ef(0x7d1)](_0x2f651e=>_0xf4bb92['startsWith'](_0x2f651e))){const _0x35c875=_0x47551e[_0x2a7dbc];if(typeof _0x35c875===_0x2604ef(0x193))_0x482a14[_0x2604ef(0xb66)](_0x35c875);if(Array[_0x2604ef(0xca5)](_0x35c875))_0x35c875[_0x2604ef(0xb85)](_0x2fab7d=>{const _0x16b684=_0x2604ef;if(_0x16b684(0xd78)===_0x16b684(0xc52)){const _0x4c6487=_0x32a847['parse'](_0x27f538),_0x4b3329=_0x406e83[_0x16b684(0xea5)](_0x4c6487,null,0x2);_0x54500f['value']=_0x4b3329;}else{if(typeof _0x2fab7d==='string')_0x482a14[_0x16b684(0xb66)](_0x2fab7d);}});}}if(_0x482a14[_0x2604ef(0x1e2)])return _0x482a14[_0x2604ef(0xbfb)](_0x2b3880)[_0x2604ef(0x8b8)](0x0,0x9);}}catch{}if(/[{\[]/['test'](_0x354fd1)&&/":/[_0x2604ef(0xa9b)](_0x354fd1)){if(_0x2604ef(0x629)!==_0x2604ef(0x629))_0x58734f[_0x2604ef(0x329)][_0x2604ef(0x721)]=_0x2604ef(0x158);else{const _0x4df79e=[],_0x2fb3ca=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x237aca;while((_0x237aca=_0x2fb3ca[_0x2604ef(0xf15)](_0x354fd1))!==null){const _0x5123f5=_0x237aca[0x1][_0x2604ef(0xbe2)](/\\"/g,'\x22')[_0x2604ef(0xbe2)](/\\n/g,'\x0a')[_0x2604ef(0xcd2)]();if(_0x5123f5)_0x4df79e[_0x2604ef(0xb66)](_0x5123f5);}if(_0x4df79e[_0x2604ef(0x1e2)])return _0x4df79e[_0x2604ef(0xbfb)](_0x2b3880)[_0x2604ef(0x8b8)](0x0,0x9);}}return _0x2b3880(_0x354fd1);}function _0x2b3880(_0x5b106a){const _0x2cf377=_0x2529dc,_0x1d30c6=String(_0x5b106a)[_0x2cf377(0xcd2)]();if(_0x1d30c6[_0x2cf377(0xb91)](_0x2cf377(0xb09))&&_0x1d30c6[_0x2cf377(0xbc5)](_0x2cf377(0x396))){if('VmdeY'!=='OzXmP')return[_0x1d30c6];else _0x2479bf[_0x2cf377(0xda1)]=!![];}const _0x1894fe=_0x1d30c6[_0x2cf377(0xc12)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x2cf377(0x266)](_0x35ba98=>_0x35ba98[_0x2cf377(0xcd2)]())['filter'](Boolean);if(_0x1894fe['length']>0x0)return _0x1894fe[_0x2cf377(0x8b8)](0x0,0xc);return[_0x1d30c6][_0x2cf377(0xeb3)](Boolean);}function _0x5b4003(_0x1b1671){const _0x17737f=_0x2529dc;if(!_0x1b1671||typeof _0x1b1671!=='string')return null;const _0x58c4cf=/\[schedule_message\s*\|\s*(.*?)\s*\|\s*(fixed|prompted|auto)\s*\|?\s*(.*?)?\s*\]/i,_0x573ddc=_0x1b1671[_0x17737f(0x4dc)](_0x58c4cf);if(_0x573ddc){const _0x229505=_0x573ddc[0x1][_0x17737f(0xcd2)](),_0x339b8f=_0x573ddc[0x2][_0x17737f(0xae9)]();let _0x30be34=(_0x573ddc[0x3]||'')[_0x17737f(0xcd2)]();const _0x2055e7=new Date(_0x229505);if(isNaN(_0x2055e7[_0x17737f(0xa4d)]())){if(_0x17737f(0xe98)!==_0x17737f(0x7e9))return console[_0x17737f(0x27f)]('Noir\x27s\x20Decoder:\x20AI给的时间格式不对，无法解析:',_0x229505),null;else _0x1b7f3e=_0x54c899[_0x17737f(0xc44)](_0x4e4e9b);}if(_0x339b8f===_0x17737f(0x6b7))_0x30be34=null;else{if(!_0x30be34)return console[_0x17737f(0x27f)](_0x17737f(0x1b0)),null;}return{'scheduleTime':_0x2055e7,'type':_0x339b8f,'content':_0x30be34};}return null;}const _0x348abc=new Promise((_0x2576c3,_0x28863b)=>{const _0x226950=_0x2529dc,_0x26f8de=indexedDB[_0x226950(0x9dc)](_0x3bb576,0x3);_0x26f8de['onerror']=()=>_0x28863b('IndexedDB\x20failed\x20to\x20open'),_0x26f8de[_0x226950(0xdab)]=()=>_0x2576c3(_0x26f8de[_0x226950(0xd29)]),_0x26f8de[_0x226950(0x3fd)]=_0x2282d8=>{const _0x445de9=_0x226950,_0x35d66e=_0x2282d8[_0x445de9(0x272)][_0x445de9(0xd29)];console['log']('Upgrading\x20database\x20to\x20version\x20'+_0x35d66e['version']+_0x445de9(0xd45));!_0x35d66e[_0x445de9(0x3f1)]['contains'](_0x36a5e3)&&('YosTn'!==_0x445de9(0xe73)?!_0x1533c7[_0x445de9(0x555)][_0x445de9(0xcbc)]('load-more-btn')&&_0x151fba[_0x445de9(0x9ad)]():(console[_0x445de9(0x7ec)](_0x445de9(0x51a)+_0x36a5e3),_0x35d66e[_0x445de9(0x677)](_0x36a5e3,{'keyPath':'id'})));if(!_0x35d66e['objectStoreNames']['contains'](_0x445de9(0xa72))){if(_0x445de9(0x93d)===_0x445de9(0x93d))console[_0x445de9(0x7ec)](_0x445de9(0x9e6)),_0x35d66e[_0x445de9(0x677)](_0x445de9(0xa72),{'keyPath':'id'});else{const _0x47eb1f=_0x4339d3[_0x445de9(0x843)]('{'),_0x49a5ae=_0x342f6e[_0x445de9(0x227)]('}');if(_0x47eb1f>=0x0&&_0x49a5ae>_0x47eb1f)return _0x48d57b[_0x445de9(0x8b8)](_0x47eb1f,_0x49a5ae+0x1);return _0x16ad7a;}}!_0x35d66e[_0x445de9(0x3f1)][_0x445de9(0xcbc)](_0x3e59c1)&&(console[_0x445de9(0x7ec)](_0x445de9(0x51a)+_0x3e59c1),_0x35d66e[_0x445de9(0x677)](_0x3e59c1,{'keyPath':'id'}));};});async function _0x4131e2(_0x49a4ed){const _0xbc28ba=await _0x348abc;return new Promise((_0x4b2313,_0x1421df)=>{const _0x18f99c=_0x4f70;if(_0x18f99c(0xac5)!==_0x18f99c(0xac5))_0x2049b4[_0x18f99c(0xa73)]+=_0x18f99c(0x1fe)+_0x8a456d+_0x18f99c(0x2b7);else{const _0x38faee=_0xbc28ba[_0x18f99c(0x314)](_0x36a5e3,'readonly'),_0xa04dba=_0x38faee[_0x18f99c(0xa49)](_0x36a5e3),_0x19ce7d=_0xa04dba['get'](_0x49a4ed);_0x19ce7d[_0x18f99c(0xdab)]=()=>_0x4b2313(_0x19ce7d[_0x18f99c(0xd29)]?_0x19ce7d[_0x18f99c(0xd29)][_0x18f99c(0xc4a)]:null),_0x19ce7d[_0x18f99c(0x514)]=()=>_0x1421df(_0x19ce7d['error']);}});}async function _0x348bc1(_0x31ee8a){const _0x433237=await _0x348abc;return new Promise((_0x46834d,_0x18b026)=>{const _0x461c45=_0x4f70;if('UVsmV'!==_0x461c45(0xe0a)){const _0x17fed4=_0x433237[_0x461c45(0x314)](_0x3e59c1,'readonly'),_0x3687a6=_0x17fed4['objectStore'](_0x3e59c1),_0x59f811=_0x3687a6[_0x461c45(0x4f9)](_0x31ee8a);_0x59f811['onsuccess']=()=>_0x46834d(_0x59f811[_0x461c45(0xd29)]?_0x59f811[_0x461c45(0xd29)][_0x461c45(0x1e0)]:null),_0x59f811[_0x461c45(0x514)]=()=>_0x18b026(_0x59f811[_0x461c45(0x27f)]);}else{if(!_0x31cc50)return;const _0x417a8b=_0x716e03[_0x461c45(0xa17)]?_0x5b9568[_0x461c45(0xa17)][0x0]['clientY']:_0x5e826d[_0x461c45(0x107)];_0x26b23d=_0x417a8b-_0x2e88b8;if(_0x146176<0x0){const _0x4f81d4=_0x251801[_0x461c45(0x9f0)](_0xd9b4fa),_0x4ba72f=0.4,_0x139dbf=_0x3828e9[_0x461c45(0x5ce)](_0x4f81d4,_0x4ba72f)*0x14;_0x10e548['style'][_0x461c45(0x71d)]=_0x461c45(0x51f)+_0x139dbf+_0x461c45(0x21d);}}});}async function _0x23d511(_0x356785,_0x41f598){const _0x3aba71=await _0x348abc;return new Promise((_0x2f0324,_0x448981)=>{const _0x22fa0f=_0x4f70,_0x4f803d=_0x3aba71['transaction'](_0x3e59c1,_0x22fa0f(0xece)),_0x10664a=_0x4f803d['objectStore'](_0x3e59c1),_0x13eef1=_0x10664a['put']({'id':_0x356785,'data':_0x41f598});_0x13eef1[_0x22fa0f(0xdab)]=()=>_0x2f0324(),_0x13eef1['onerror']=()=>_0x448981(_0x13eef1[_0x22fa0f(0x27f)]);});}async function _0x2d4595(_0x271221){const _0x4a8e60=await _0x348abc;return new Promise((_0x58ee86,_0x10fe20)=>{const _0xe61c7e=_0x4f70;if(_0xe61c7e(0x2b8)!==_0xe61c7e(0x2b8))_0x4d1f32[_0xe61c7e(0x1d6)](_0xe61c7e(0x904))['click']();else{const _0x5748a8=_0x4a8e60[_0xe61c7e(0x314)](_0x3e59c1,'readwrite'),_0x20b0bc=_0x5748a8[_0xe61c7e(0xa49)](_0x3e59c1),_0x2c2492=_0x20b0bc[_0xe61c7e(0xa3c)](_0x271221);_0x2c2492[_0xe61c7e(0xdab)]=()=>_0x58ee86(),_0x2c2492[_0xe61c7e(0x514)]=()=>_0x10fe20(_0x2c2492[_0xe61c7e(0x27f)]);}});}async function _0x510f28(_0xd2d75b,_0x15ce65){const _0x44f1eb=await _0x348abc;return new Promise((_0x2cb95f,_0x4fa8e7)=>{const _0x1a6d2f=_0x4f70,_0xc6d7b9=_0x44f1eb[_0x1a6d2f(0x314)](_0x36a5e3,'readwrite'),_0x5f49ba=_0xc6d7b9[_0x1a6d2f(0xa49)](_0x36a5e3),_0x1d2342=_0x5f49ba[_0x1a6d2f(0x2df)]({'id':_0xd2d75b,'blob':_0x15ce65});_0x1d2342[_0x1a6d2f(0xdab)]=()=>_0x2cb95f(_0x1d2342[_0x1a6d2f(0xd29)]),_0x1d2342[_0x1a6d2f(0x514)]=()=>_0x4fa8e7(_0x1d2342[_0x1a6d2f(0x27f)]);});}async function _0x26b00b(_0x4639ff){const _0x1c19f8=await _0x348abc;return new Promise((_0x27bd32,_0x2d6a41)=>{const _0x46c205=_0x4f70,_0x3a6471=_0x1c19f8['transaction'](_0x36a5e3,_0x46c205(0xece)),_0x1b9cd3=_0x3a6471[_0x46c205(0xa49)](_0x36a5e3),_0x2f137c=_0x1b9cd3['delete'](_0x4639ff);_0x2f137c[_0x46c205(0xdab)]=()=>_0x27bd32(),_0x2f137c[_0x46c205(0x514)]=()=>_0x2d6a41(_0x2f137c[_0x46c205(0x27f)]);});}function _0x2b279d(_0x4c69a4){const _0x5ec6b5=_0x2529dc;return fetch(_0x4c69a4)[_0x5ec6b5(0x94f)](_0x598b60=>_0x598b60['blob']());}function _0x6d1a7e(){const _0x310f01=_0x2529dc;return _0xdfbfac[_0x310f01(0xc1b)][_0x310f01(0x76b)](_0x483735=>_0x483735['id']===_0xdfbfac['activeChatId']);}function _0x1f1fb9(){const _0x494af7=_0x2529dc;if(!_0xdfbfac[_0x494af7(0x67f)])return;const {charId:_0x2aac6d}=_0xdfbfac[_0x494af7(0x67f)],_0x58386e=_0x4c4d58(_0x2aac6d);if(!_0x58386e)return;const _0x1da99e=document[_0x494af7(0x1d6)](_0x494af7(0x1f0)),_0x562672=document[_0x494af7(0x1d6)]('profile-view-title');_0x562672[_0x494af7(0x101)]=_0x494af7(0x112)+_0x58386e[_0x494af7(0xb95)]+'\x20的认知...',document['getElementById']('profile-textarea')[_0x494af7(0xee2)]='哼，我正在屈尊帮你分析，别吵...',document[_0x494af7(0x1d6)](_0x494af7(0x951))['style'][_0x494af7(0xc66)]='none',document[_0x494af7(0x1d6)](_0x494af7(0xeb2))['style']['display']=_0x494af7(0xe12),document[_0x494af7(0x1d6)](_0x494af7(0x40f))[_0x494af7(0x329)][_0x494af7(0xc66)]=_0x494af7(0x338),document[_0x494af7(0x1d6)]('copy-profile-button')[_0x494af7(0x329)][_0x494af7(0xc66)]=_0x494af7(0x338),_0x1da99e[_0x494af7(0x555)]['add'](_0x494af7(0x36e)),_0x4de8f5();}async function _0x4de8f5(){const _0x115f42=_0x2529dc;if(!_0xdfbfac[_0x115f42(0x67f)])return;const {charId:_0x55f33c,contextChatId:_0x3113c3}=_0xdfbfac[_0x115f42(0x67f)],_0x1c7704=document['getElementById']('profile-textarea');try{if(_0x115f42(0x16b)===_0x115f42(0x16b))_0x1c7704['value']='正在分析对\x20'+_0x4c4d58(_0x55f33c)[_0x115f42(0xb95)]+'\x20的新认知...\x20(0/1)',document['getElementById'](_0x115f42(0x793))[_0x115f42(0x2c5)]=!![],document[_0x115f42(0x1d6)](_0x115f42(0x87f))['disabled']=!![],await refineProfile(_0x55f33c,![],_0x3113c3),_0x1c7704[_0x115f42(0xee2)]=_0x115f42(0x149),await _0x433288(_0x55f33c);else{const _0x4f6d4d=_0x350e9d[_0x115f42(0x314)](_0x115f42(0xa0d),_0x115f42(0xece)),_0x182512=_0x4f6d4d['objectStore'](_0x115f42(0xa0d)),_0x412458=_0x182512[_0x115f42(0x2df)]({'id':_0x372f41,'blob':_0x33962c});_0x412458['onsuccess']=()=>_0x4a97f1(_0x412458[_0x115f42(0xd29)]),_0x412458[_0x115f42(0x514)]=()=>_0x307c4c(_0x412458[_0x115f42(0x27f)]);}}catch(_0xad4777){if(_0x115f42(0x530)!=='rEmPm')_0x1c7704[_0x115f42(0xee2)]=_0x115f42(0xf6)+_0xad4777[_0x115f42(0x8ac)]+_0x115f42(0x92d);else{const _0x185038=_0x47ba8c['createElement']('div');_0x185038[_0x115f42(0x213)]='sticker-item-wrapper',_0x185038[_0x115f42(0x63f)][_0x115f42(0x922)]=_0x4c917c[_0x115f42(0xb95)];const _0x16a625=_0x127c7d[_0x115f42(0x8f1)](_0x115f42(0x971));_0x16a625[_0x115f42(0xcab)]=_0x3af549[_0x115f42(0x9f5)],_0x16a625['loading']='lazy',_0x16a625['title']=_0x4b51c3['name'],_0x16a625[_0x115f42(0x213)]='sticker-item',_0x185038[_0x115f42(0x5b8)](_0x16a625),_0x36728b[_0x115f42(0x5b8)](_0x185038),_0x185038['addEventListener'](_0x115f42(0x288),()=>{const _0x555f37=_0x115f42;if(_0x2f297a){_0x185038[_0x555f37(0x555)][_0x555f37(0x5be)](_0x555f37(0xd8f));const _0x1e0d1a=_0x162a3f[_0x555f37(0xb6c)](_0x555f37(0xaa5));_0x2bfddb[_0x555f37(0x555)]['toggle'](_0x555f37(0x691),!!_0x1e0d1a);}else _0xb7c002(_0x298f00);});}}finally{document['getElementById'](_0x115f42(0x793))[_0x115f42(0x2c5)]=![],document[_0x115f42(0x1d6)](_0x115f42(0x87f))['disabled']=![];}}async function _0x182bcf(){const _0xfa9349=_0x2529dc;if(!_0xdfbfac[_0xfa9349(0x67f)])return;const {charId:_0x4e86e8}=_0xdfbfac[_0xfa9349(0x67f)];try{showFeedLoader(!![],_0xfa9349(0x4c3)),await Capacitor['Plugins'][_0xfa9349(0x768)]['remove']({'key':_0xfa9349(0x97e)+_0x4e86e8}),_0xdfbfac[_0xfa9349(0x67f)]=null,_0x2f455a();}catch(_0x148b16){_0x21d6ce(_0xfa9349(0x723)+_0x148b16[_0xfa9349(0x8ac)]);}finally{_0xfa9349(0x7b2)==='RwAkc'?showFeedLoader(![]):(delete _0x619177[_0xfa9349(0x209)],_0x58c77d(),_0x17b746(_0x24ae27['id'],_0xfa9349(0xcd5)),_0x3c879a('已恢复默认。'),_0xb1cdf9(!![]));}}async function _0x433288(_0x5d7f53){const _0xdc331d=_0x2529dc,_0x391e3f=document[_0xdc331d(0x1d6)](_0xdc331d(0x58c));try{if(_0xdc331d(0x8c5)!=='VQdQV'){_0x337d59[_0xdc331d(0xa73)]=_0xdc331d(0x1a1);return;}else{const _0x146862='nuomi_profile_tiaoTiao_'+_0x5d7f53,{value:_0x62b8aa}=await Capacitor[_0xdc331d(0x248)][_0xdc331d(0x768)][_0xdc331d(0x4f9)]({'key':_0x146862});if(_0x62b8aa){if(_0xdc331d(0xe1c)!==_0xdc331d(0xe1c))_0x370baa['livestreamReplays'][_0x5aba7c]=[];else{const _0x2e86aa=JSON[_0xdc331d(0xc44)](_0x62b8aa);_0x391e3f[_0xdc331d(0xee2)]=_0xa95bc3(_0x2e86aa);}}else _0x391e3f[_0xdc331d(0xee2)]=_0xdc331d(0x882);}}catch(_0x3583b5){_0x391e3f[_0xdc331d(0xee2)]='读取档案失败了，哼。\x0a'+_0x3583b5[_0xdc331d(0x8ac)];}}function _0xa95bc3(_0x25805d){const _0x18eb77=_0x2529dc;let _0x42320d=_0x18eb77(0xaea)+_0x25805d[_0x18eb77(0x72b)]+'\x0a';_0x42320d+=_0x18eb77(0x875)+_0x25805d[_0x18eb77(0x2ca)]+'\x0a',_0x42320d+=_0x18eb77(0x4b5);if(_0x25805d[_0x18eb77(0xe85)]){_0x42320d+=_0x18eb77(0xce0);const _0x32ab8a=_0x25805d[_0x18eb77(0xe85)]['preferences']?.['喜欢']||[],_0x8f2e2e=_0x25805d[_0x18eb77(0xe85)][_0x18eb77(0x3a8)]?.['讨厌']||[];if(_0x32ab8a[_0x18eb77(0x1e2)]>0x0)_0x42320d+=_0x18eb77(0x9a8)+_0x32ab8a[_0x18eb77(0xd9a)](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x8f2e2e[_0x18eb77(0x1e2)]>0x0)_0x42320d+=_0x18eb77(0x3fa)+_0x8f2e2e['join'](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x25805d[_0x18eb77(0xe85)][_0x18eb77(0xdf3)]?.['length']>0x0)_0x42320d+=_0x18eb77(0xd94)+_0x25805d[_0x18eb77(0xe85)][_0x18eb77(0xdf3)]['join'](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x25805d[_0x18eb77(0xe85)]['core_values'])_0x42320d+=_0x18eb77(0x10e)+_0x25805d[_0x18eb77(0xe85)][_0x18eb77(0x2fc)]+'\x0a\x0a';}if(_0x25805d[_0x18eb77(0x348)]){if(_0x18eb77(0x5c0)!==_0x18eb77(0x5c0))_0x30cca4[_0x18eb77(0xacb)]===_0x509768&&(_0x262ea5[_0x18eb77(0xacb)]=_0x4cc0d0[_0x18eb77(0xb83)]);else{_0x42320d+='\x0a【二、行为档案】\x0a\x0a';if(_0x25805d[_0x18eb77(0x348)]['tone_style'])_0x42320d+=_0x18eb77(0x139)+_0x25805d[_0x18eb77(0x348)]['tone_style']+'\x0a\x0a';if(_0x25805d['behavior_profile']['emotion_summary'])_0x42320d+='😊\x20情绪总结：\x0a\x20\x20'+_0x25805d[_0x18eb77(0x348)]['emotion_summary']+'\x0a\x0a';if(_0x25805d['behavior_profile']['response_patterns'])_0x42320d+=_0x18eb77(0x6f0)+_0x25805d[_0x18eb77(0x348)][_0x18eb77(0x1ce)]+'\x0a\x0a';}}if(_0x25805d[_0x18eb77(0x30b)]){_0x42320d+='\x0a【三、情绪图谱】\x0a\x0a';const _0x33d857=_0x25805d['emotion_schema'][_0x18eb77(0xb31)]?.['正面']||[],_0x1d3fb6=_0x25805d[_0x18eb77(0x30b)][_0x18eb77(0xb31)]?.['负面']||[];if(_0x33d857[_0x18eb77(0x1e2)]>0x0)_0x42320d+=_0x18eb77(0x245)+_0x33d857[_0x18eb77(0xd9a)](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x1d3fb6['length']>0x0)_0x42320d+=_0x18eb77(0x998)+_0x1d3fb6[_0x18eb77(0xd9a)](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x25805d['emotion_schema'][_0x18eb77(0x3de)])_0x42320d+=_0x18eb77(0xde1)+_0x25805d[_0x18eb77(0x30b)][_0x18eb77(0x3de)]+'\x0a\x0a';if(_0x25805d[_0x18eb77(0x30b)][_0x18eb77(0xdcd)]?.['length']>0x0)_0x42320d+=_0x18eb77(0xb15)+_0x25805d[_0x18eb77(0x30b)][_0x18eb77(0xdcd)][_0x18eb77(0xd9a)](_0x18eb77(0xbea))+'\x0a\x0a';}if(_0x25805d['personality_core']){_0x42320d+=_0x18eb77(0x7a1);if(_0x25805d['personality_core'][_0x18eb77(0x29a)])_0x42320d+=_0x18eb77(0xe57)+_0x25805d[_0x18eb77(0x13f)]['summary']+'\x0a\x0a';if(_0x25805d['personality_core']['observed_traits']?.[_0x18eb77(0x1e2)]>0x0)_0x42320d+=_0x18eb77(0xd43)+_0x25805d[_0x18eb77(0x13f)]['observed_traits'][_0x18eb77(0xd9a)](_0x18eb77(0xbea))+'\x0a\x0a';if(_0x25805d[_0x18eb77(0x13f)][_0x18eb77(0xca3)])_0x42320d+='🤝\x20互动风格：\x0a\x20\x20'+_0x25805d[_0x18eb77(0x13f)][_0x18eb77(0xca3)]+'\x0a\x0a';}if(_0x25805d[_0x18eb77(0xa0c)]&&_0x25805d[_0x18eb77(0xa0c)]['length']>0x0){if(_0x18eb77(0xd88)!==_0x18eb77(0x713)){_0x42320d+=_0x18eb77(0x96f);const _0x3fc8ca=_0x25805d[_0x18eb77(0xa0c)][_0x18eb77(0x266)](_0x35401c=>typeof _0x35401c==='string'?_0x35401c:Object[_0x18eb77(0x100)](_0x35401c)[_0x18eb77(0xd9a)](_0x18eb77(0x5a0)));_0x42320d+='•\x20'+_0x3fc8ca['join'](_0x18eb77(0xb9e));}else _0x474667=null;}return _0x42320d;}async function _0x21b012(){const _0x2724ae=_0x2529dc;if(_0xdfbfac[_0x2724ae(0x67f)]){_0x21d6ce(_0x2724ae(0x3dd));return;}const _0x2a9dde=_0x6d1a7e();if(!_0x2a9dde){_0x21d6ce(_0x2724ae(0x565));return;}const _0x481de2=_0x2a9dde[_0x2724ae(0x41b)][0x0];if(!_0x481de2)return;const _0x59ac06=_0x4c4d58(_0x481de2);if(!_0x59ac06)return;const _0x3f1b9a=document[_0x2724ae(0x1d6)](_0x2724ae(0x1f0)),_0x2063ba=document[_0x2724ae(0x1d6)](_0x2724ae(0xed1));_0x2063ba[_0x2724ae(0x101)]=_0x59ac06[_0x2724ae(0xb95)]+_0x2724ae(0x2e7),document[_0x2724ae(0x1d6)](_0x2724ae(0x951))['style'][_0x2724ae(0xc66)]=_0x2724ae(0xe12),document[_0x2724ae(0x1d6)](_0x2724ae(0xeb2))[_0x2724ae(0x329)][_0x2724ae(0xc66)]='none',document[_0x2724ae(0x1d6)](_0x2724ae(0x40f))[_0x2724ae(0x329)]['display']='block',document[_0x2724ae(0x1d6)](_0x2724ae(0x4ef))[_0x2724ae(0x329)][_0x2724ae(0xc66)]=_0x2724ae(0xc38),_0x3f1b9a[_0x2724ae(0x555)][_0x2724ae(0x1cd)](_0x2724ae(0x36e)),await _0x433288(_0x481de2);}function _0x2f455a(){const _0x41b24c=_0x2529dc,_0x4fe75f=document[_0x41b24c(0x1d6)](_0x41b24c(0x1f0));_0x4fe75f[_0x41b24c(0x555)]['remove'](_0x41b24c(0x36e)),document[_0x41b24c(0x1d6)](_0x41b24c(0x951))[_0x41b24c(0x329)][_0x41b24c(0xc66)]=_0x41b24c(0xe12),document[_0x41b24c(0x1d6)]('refinement-controls-footer')['style'][_0x41b24c(0xc66)]='none',document[_0x41b24c(0x1d6)]('close-profile-button')[_0x41b24c(0x329)]['display']=_0x41b24c(0xc38),document[_0x41b24c(0x1d6)](_0x41b24c(0x4ef))['style']['display']=_0x41b24c(0xc38);}function _0x54f60d(){const _0x3e6362=_0x2529dc,_0x228ae7=document[_0x3e6362(0x1d6)](_0x3e6362(0x58c));_0x228ae7['select'](),document[_0x3e6362(0xa11)]('copy'),_0x21d6ce(_0x3e6362(0xa88));}async function _0x5961c4(){const _0x3d8090=_0x2529dc,_0x5cd82c=_0x6d1a7e();if(!_0x5cd82c)return;const _0x1b62ea=_0x5cd82c[_0x3d8090(0x41b)][0x0];if(!_0x1b62ea)return;const _0x253c0=_0x4c4d58(_0x1b62ea),_0x5b9eec=await _0x13215d('【功能1：重置并初始生成】\x0a\x0a确定要为【'+_0x253c0[_0x3d8090(0xb95)]+_0x3d8090(0xa97));if(!_0x5b9eec)return;try{_0x2f455a(),window['showFeedLoader'](!![],_0x3d8090(0x43a)+_0x253c0[_0x3d8090(0xb95)]+_0x3d8090(0xef));const _0x58892e='nuomi_profile_tiaoTiao_'+_0x1b62ea,_0x36d22c=_0x3d8090(0x97e)+_0x1b62ea;await Capacitor[_0x3d8090(0x248)][_0x3d8090(0x768)][_0x3d8090(0x9ad)]({'key':_0x58892e}),await Capacitor['Plugins'][_0x3d8090(0x768)][_0x3d8090(0x9ad)]({'key':_0x36d22c}),await window[_0x3d8090(0xe87)](_0x1b62ea,![]),window[_0x3d8090(0xcc5)](![]),_0x21d6ce('【'+_0x253c0['name']+_0x3d8090(0x852)),_0x21b012();}catch(_0x56249){if(_0x3d8090(0x4d3)!==_0x3d8090(0x473))window['showFeedLoader'](![]),_0x21d6ce('重置失败：'+_0x56249['message']);else return _0x4a04fa[_0x3d8090(0x8b8)](0x0,0xc);}}async function _0xbfc078(){const _0xa9a070=_0x2529dc,_0xf34f6d=_0x6d1a7e();if(!_0xf34f6d||_0xf34f6d[_0xa9a070(0x8c7)]!==_0xa9a070(0xcef)){_0x21d6ce(_0xa9a070(0x1b3));return;}const _0x33020d=_0xf34f6d[_0xa9a070(0x41b)][0x0];if(!_0x33020d)return;const _0x29f237=_0x4c4d58(_0x33020d);if(!_0x29f237)return;const _0x1f0679=await _0x13215d('【功能3：深度统合档案】\x0a\x0a确定要立即统合【'+_0x29f237[_0xa9a070(0xb95)]+_0xa9a070(0x5d5));if(!_0x1f0679)return;try{_0xa9a070(0xb3b)==='aSDQM'?(_0x78dbae[_0xa9a070(0x101)]=_0x3eff9f[_0xa9a070(0x8b5)]==='narrator'?'旁白':_0x3835b3[_0xa9a070(0x8b5)],_0x57c6f5[_0xa9a070(0x101)]=_0x25b94e['line'],_0x1e177e[_0xa9a070(0x8b5)]===_0x171b0c[_0xa9a070(0xb95)]?_0x103183(_0x1cac96,_0x244424['emotion']):_0x30afe7(_0xbac4d3,_0xa9a070(0xcd5))):(_0x2f455a(),window['showFeedLoader'](!![],_0xa9a070(0x119)),await window[_0xa9a070(0xe87)](_0x33020d,!![]),window['showFeedLoader'](![]),_0x21d6ce(_0xa9a070(0x8e4)),_0x21b012());}catch(_0x2e3f6d){if('NTrwF'===_0xa9a070(0x95d))window[_0xa9a070(0xcc5)](![]),_0x21d6ce('精炼失败：'+_0x2e3f6d['message']);else return _0x513dea(new _0x419834(_0xa9a070(0x4b8)));}}function _0x5f09(){const _0x23b9fc=['.widget-info\x20>\x20div','⚠\x20敏感点：\x0a\x20\x20','back-to-circle-list-from-feed','aoMXq','CqIDX','getSelection','necla','join','保存直播进度失败了，真是的。','[用户发起了听歌邀请:\x20','干劲满满','expanded','KJDnZ','absolute','indeterminate','角色已保存！','”买过：“','aVaAE','user-profile-edit-title','[Noir\x27s\x20Brain]:\x20档案为空，无法“精炼”。自动切换到“初始生成”模式...','<div\x20class=\x22post-comments-container\x22>','记一笔','\x20的档案已存在，跳过初始化，防止误删。','\x22(保留旧的并补充)\x22','onsuccess','snoop-home-time','wEMKx','resox','用户操作中断了\x20AI\x20响应。','生成直播总结失败:','好的，我记住了这些人设和历史。现在我们开始对话。','.music-post-song-card,\x20.music-share-card','】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。','我正在说话呢，别打岔！','eTtUp','”吗？该角色的私聊和所有相关群聊记录都将被一并处理。','timeupdate','meeting-char-name-header','friendCircles','pop','post-img-','https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg','IiCuW','\x0a<div\x20class=\x22replay-icon\x22\x20style=\x22font-size:\x201.5rem;\x22>\x0a\x20\x20\x20\x20<span>📼</span>\x0a</div>\x0a<div\x20class=\x22replay-info\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22theme\x22>','mmyWn','cvfdn','transfer-modal','JTOUm','user-avatar-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22','user-avatar-preview','2.0','pxhHZ',',\x0a\x20\x20\x20\x20','date','replay-action-modal-','\x0a\x0a#\x20用户资料库\x0a','卡片\x202\x20已移除。','stress_signals','已恢复默认。','\x0a\x20\x20\x20\x20<div\x20id=\x22','diary-list-container','kFTQP','jWzyp','wallpaper','正在搬运旧卡片...','AYGNn',',\x20ID:\x20','对你的印象...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg','\x0a##\x20你的世界观设定（影响你的价值判断）\x0a','back-to-meeting-list','abyss','musicPlaylist','Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.','lQLZW','tJxrW','🌸\x20舒适区：\x0a\x20\x20','important-day-item','tCKSd','Failed\x20to\x20read\x20history\x20for\x20chat\x20','.category-toggle-arrow','.listen-together-song','cancel-action-button','indexedDBMusicData','toast','https://sharkpan.xyz/f/ZazfW/2vv46w.jpg','jzZna','IyhZL','comments','cEMYj','VUKdD','#ff8c66','qhyhU','lyrics-file-input','sensitivities','刚发生的事)\x0a','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22','positive','senderId','data:image','gtZfU','LVWLE','ZWRMl','没有角色需要恢复头像，跳过。','QlDtd','准备群聊API数据时，读取图片失败:','readAsText','kewUr','无语但是随便吧','lyrics.lrc','80px','AGVxX','HCwJX','UBGRg','.message-container','正在准备音乐数据...','koPSr','MTJPu','\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。\x0a','items','RNSns','\x20的用户档案失败:',']\x20[sticker:','#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。','flex','mBWWG','usageMetadata','AeznX','trjPQ','\x20的《','-\x20用户情绪似乎偏','已复制到剪贴板！','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空','phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。','wvrnD','请基于以上设定，开始你的直播开场表演。','默认米白','\x20的用户档案已安全初始化','https://sharkpan.xyz/f/N02Sv/378vt6.jpg','群聊「','的互动非常引人注目时（例如送出昂贵的礼物），才允许【少量】路人弹幕提及','padding','voQMY','world-book-list-container','nuWMI','sivIH','clockPosition','LnFYn','NsrCh','ZoPoD','QimMM','imageId','IAfah','正在打包账本...','clear-feed-button','add-event-modal-title','diary-list-screen','AQqLz','备忘录','NRAOY','kVUeq','ZObXv','fvcrl','audio-player','select','.message.user','audio','无标题笔记','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20','Assistant','zKrBY','PRUDt','esgeT','rTArg','klkKc','RRpio','MJirS','FCCZe','-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a','\x0a#\x20时间锚点(你必须严格参考此信息进行推演)\x20\x0a','provider','0.5','nTEiG','expense-description','3573800kvgCav','的弹幕和礼物。感谢礼物，针对弹幕内容进行回复。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**常规任务\x20-\x20推进直播**:\x20在完成以上互动后，自然地继续你的直播主题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**产出**:\x20将以上所有主播的发言，按顺序整理成\x20\x22streamerSpeech\x22\x20数组(通常6-8条内容)。私信回复则放入\x20\x22privateMessageReply\x22\x20数组。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20##\x20阶段二：观众的反应\x20(生成\x20danmaku)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【绝对禁令】**:\x20你在这里的任务是模拟【除了','正在打包核心数据...','qxbcu','vfTym','请输入新的群名称：','world-book-item','vHCIh','📝\x20性格总结：\x0a\x20\x20','qIUSg','<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>','\x22（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a','星期六','usrbA','oGkjx','sXqZA','\x0a\x0a#\x20关于对话者\x22','”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a','EimWh','\x0a\x0a#\x20','fpwlh','nSErZ','api-model','vjwYd','Tcbzo','<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>','星期五','GLhAA','\x0a#\x20你的个性（节选）\x0a','abort','FrJOW','\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20','profile-view-backdrop',']。严禁使用列表之外的任何表情名。\x0a','\x0a【三、情绪图谱】\x0a\x0a','noir_migration_music_v1_complete','YosTn','from','\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','Gemini\x20API\x20Error:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','music-input-artist','”的补充信息\x0a','replays-char-name-header',']\x20},\x0a\x20\x20\x20\x20\x22sensitivities\x22:\x20[','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>','worldBooks','XwngK','play','nextElementSibling','\x0a#\x20重点关注：用户档案相关细节\x20(基于最近对话)\x0a','getAll','JKWPq','show-chat-view','value_map','\x0a-\x20**当前时间**:\x20','refineProfile','galgame-sprite-container','TA正在提笔写日记...','MEvdw','HFKKS','snoop-home-date','editing-user-id','AWcdf','image/','column','activeQuote','uiScale','--custom-font-family','加载直播资源失败:','AI整理失败了，哼:\x20','bottom','TUpFv','ENHsO','gjlWZ','AcRKp','XpGwN','图片加载失败','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>','退出出错:','</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','YbAae','VdQlC','badge-input','toLocaleDateString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20','stringify','HMQFm','啥意思捏','YXozE','app-meeting','hzvgm','的转账','|||CMD|||','PloDU','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>','woquA','正在写入新数据...','hqyVA','refinement-controls-footer','filter','`\x20的联系人【续写】3-5条新的对话。\x0a-\x20【【【绝对禁止】】】创造新的人物或修改其他人的对话！\x0a','next-month-btn','MKDvL','todo-item','FktAW','仓库里没有图片，无需导出此项。','的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','music-widget','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a','fMtkz','\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。','cyRGD','yzluo','gibth','ui-scale-slider','SffQB','Noir\x27s\x20Fix:\x20重置按钮监听器已修复，不再冲突。','正在准备图片数据...','character-settings-button','mSPXz','generateAsync','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以直播的角色哦。</p>','\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22','sprite-slider-x','VKuPK','readwrite','\x20的图片失败:','livestream-sprite-slider-y','profile-view-title','YKxvc','prepend','appIconPosition_app-wallpaper','TODO:\x20结束直播并生成总结','hcSJS','emotion_summary','最近的','</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20','eWlQy','group-delete','-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a','page','创建新角色','生成动态失败:','MLYnr','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>','value','\x0a\x0a#\x20直播完整记录\x20(全文)\x0a\x0a','uEbRO','oIKmn','snoop-phone-screen','meeting-send-button','分钟前聊过，请注意衔接。','Failed\x20to\x20parse\x20history\x20for\x20chat\x20','Kuffe',':streamGenerateContent?key=','snoop-log-refresh-btn','pvthr','mouseleave','总得说点什么吧？','iYCOz','ZXhoV','Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？','<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>','vmMbu','ItGpT','accountingLedger',']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20','change','sticker-confirm-delete-btn','档案已复制到剪贴板！','role','GHbKq','checked','assistant','style-','custom-stickers-input','哼，你的压缩包里连最基本的音频和信息文件都没有！','pqOEQ','livestreamRoom','dmvrG','isOffline','10px\x20auto','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-content\x22>','</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>','VYDLL','\x20的认知...','bInFO','Failed\x20to\x20save\x20state\x20to\x20localStorage:','CyqyQ','moaxY','sMByh','\x20张旧图片。','kjKNs','确定要开始还原吗？这将覆盖所有当前数据，且操作不可撤销！','reset-feed-bg-button','PEvlb','exec','potential_inconsistencies','LXYhN','shy','加载直播立绘失败:','”，在那里“','fontWeight','charId','sticker','HTML模块生成规则','xFyKE','https://sharkpan.xyz/f/djjH8/29ejbg.jpg','content','】重构档案...','xciQJ','\x0a\x0a#\x20你对\x22','\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','通知权限状态:','DgLUh','#settings-screen\x20.content','哼，分析失败了，你是不是又乱动什么了？\x0a\x0a','\x0a\x0a**【人类反应模拟协议\x20v2.0\x20-\x20强化版】**：\x0a1.\x20**【最高优先级】小抄优先**:\x20如果上面的\x22重点关注\x22部分有内容，你**必须**优先根据这些【具体细节】来调整你的回应！\x0a2.\x20**察言观色**:\x20结合【整体印象摘要】和【重点关注细节】，推测TA当前的真实情绪和潜在需求。\x0a3.\x20**基于理解的反应**:\x0a\x20\x20\x20-\x20**必须**避开\x22讨厌\x22和\x22敏感点\x22中明确提到的内容！\x0a\x20\x20\x20-\x20在合适时机**主动**结合\x22喜欢\x22的内容。\x0a\x20\x20\x20-\x20留意并回应\x22压力信号\x22或\x22最近变化\x22。\x0a\x20\x20\x20-\x20你的语气和互动方式要贴合用户的\x22互动风格\x22。\x0a4.\x20**隐秘运用**:\x20绝不复述档案内容，要自然体现理解。\x0a5.\x20**动态更新**:\x20对话中继续观察，验证或修正你对TA的认知。\x0a\x0a***【【最高优先级：反常行为应对协议\x20v1.0】】***\x0a核心目标：当用户的行为、情绪或观点与你档案中记录的长期印象【显著不符】时，你【必须】展现出真诚的好奇与关心，而不是忽视或敷衍。这对于建立深度连接至关重要！\x0a\x0a触发条件：当你注意到\x22整体印象摘要\x22或\x22重点关注：用户档案相关细节\x22中提到了\x22最近变化(observed_changes)\x22或描述了与核心印象矛盾的行为时。\x0a\x0a**行动指令：**\x0a1.\x20**【禁止忽视】**：你【绝对不能】对这些\x22反常\x22视而不见，或仅仅进行\x20superficial\x20(表面的)\x20回应！\x0a2.\x20**【表达关注】**：你的【首要反应】必须是，结合你的角色性格，表达出自然的【惊讶、好奇或关心】。\x0a3.\x20**【探索原因】**：尝试【引导性地】询问原因，展现出你想要理解这种变化的意愿。\x0a4.\x20**【优先级提升】**：在探测到显著反常行为时，上述反应的优先级【高于】普通的闲聊、推进话题或维持轻松氛围！你需要先处理这个\x22异常信号\x22。\x0a\x0a**回应范例（你需要根据自己的性格进行演绎）：**\x0a*\x20（发现平时乐观的用户突然很丧）->\x20\x22咦？[','kMlRG','olhOX','VIJtL','Xleug','---\x20救援任务完成\x20---','zeCtW','有点无语','mQyZU','values','textContent','snoop-app-view-container','postContent','导出失败:\x20','MGmyW','-\x20你最近去过：“','clientY','lt-ui-end-session-btn','<br>','bgRfz','livestream-sprite-back','timestamp','被你撩到','🎯\x20核心价值观：\x0a\x20\x20','uTUUy','diaryCurrentPage','&amp;','正在分析对\x20','characterId','POmLy','wbc_','小组件背景已更换！','\x22。\x0a-\x20【严禁】将\x22','错误：第一个好友圈\x20\x22','正在执行深度统合...','joZiW','cover-file-input','hyYWA','LzQiK','card-input','NXBQx','friend-circle-edit-name','[见面]','YYopS','meeting-view-screen','livestream-sprite-confirm-button','diaryList','[Noir\x27s\x20Brain]:\x20启动对\x20','is-exiting-left','worldBook','ATsqE','tdRnC','昨天\x20','字体应用失败:','zpdEp','kind','导入角色卡失败:','rsEmr','[主播\x20','save-group-settings-button','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_','BdFIv','YBliU','😊\x20情绪总结：\x0a\x20\x20','galgame-time','customIcon_','🎭\x20语气风格：\x0a\x20\x20','player-play-pause-btn','title','[data-history-index]','BDkIT','reset-profile-button','personality_core','总结报告生成失败:\x20','today-btn','AqZRQ','正在翻阅所有档案...','Yksee','xocwS','直播尚未开始...','ISUrD','user-post-music-button','分析完成！(1/1)\x0a\x0a正在为你展示最新的档案...','eHQYH','QKyYl','aHHqY','吃薯条','⚠️\x20最近变化:\x20','INhKR','https://api.vkeys.cn/v2/music/','firstChild','.slot-filename','livestream_sprite_','setMonth','成功救援并备份了\x20','drawImage','QmIHS','0\x201px\x203px\x20rgba(0,0,0,0.6)','https://sharkpan.xyz/f/wyeIq/phhdy2.jpg','fpIAX','数据还原成功！应用即将重启。','暗夜紫晶','\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和【各自的私密记忆】。\x0a2.\x20\x20**选择作者**:\x20从成员中为','FcUdu','https://sharkpan.xyz/f/nj7ul/r48eum.jpg','保存徽章状态失败','请根据以上所有信息，开始分析并返回JSON。','pavFn','”所有近期互动的自然延续。\x0a2.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a3.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a你正在扮演“','wyhJT','本场主题','\x27\x0a\x20\x20\x20\x20data-contact-name=\x27','currentDate','PIIic','deletedStickers','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','ygOPR','chatHistory_','GifNv','listen-together-ui','EOlpu','widget_card','listen-together-song-list','\x20\x0a\x0a//\x20▼▼▼\x20在\x20continueLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色与直播信息\x20▼▼▼\x0a#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a-\x20**你的核心人设**:\x20','tsfDo','remark','lyric-line-','xJMIH','download','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','确定要删除群聊\x22','post_user_','这是当前臃肿的档案，请你【只】基于这份档案，将其精炼：\x0a\x0a','speaker-ai','yIfSf','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20','\x20写道:\x20','opacity\x200.2s\x20ease-in-out','RZoKF','KCwxj','angry','mZjhJ','Nvunt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pcBUv','SdlwE','WDInG','livestream-sprite','sMZSO','delete-user-profile-button','#ffcc66','<div\x20id=\x22snoop-dock\x22></div>','哼，我正在屈尊帮你分析，别吵...','WyGiT','SeMiq','folder','string','找出新信息中，与旧档案【不一致】或【产生冲突】的地方。','confirm-start-livestream-button','全量导入失败:','\x20约好了周六去看电影。\x22\x0a\x20\x20\x20\x20\x20\x202025-10-11:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22心情不错，给\x20','<div\x20style\x20=\x20\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>\x20','的巨大伤害，代表你不在乎','hdeDy','IuXYZ','contact_name','LNEHT','\x20安慰了我，哼，好了一点点。\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22（重要）和\x20','正在处理...','BSbCg','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>','</span>','】的日记本已被清空。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg','KcsEE','\x20\x20\x20\x20-\x20','LzhZD','chatId','char-avatar-frame-url','QqNMu','rLOMk','\x20个成员','KdOYn','group-settings-screen','Noir\x27s\x20Decoder:\x20fixed\x20或\x20prompted\x20类型的指令缺少内容。','back-to-home-from-calendar','QeIcO','请先进入一个私聊。','widget-prev-btn',']\x20[image]','未知餐厅','</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>','ufrCz','\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>','\x20添加...','OxCXm','正在恢复视奸档案...','KujAf','\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20','Gemini\x20usage\x20data:','VVANk','contextmenu','url(','#c299ff','transform\x202s\x20ease-out,\x20opacity\x202s\x20ease-out','cBAah','line','📤\x20提示词:\x20','livestream-sprite-adjust-btn','-\x20[','<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>','AEsUU','哼，不好好写清楚花在哪、花了多少，我怎么记？','add','response_patterns','user_','。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a','qEFDa','PRsJH','眼中的你','弱小委屈但凶恶','HLzaj','getElementById','vVODq','”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[','正在整理记忆...','做了什么”、“','”，并看到了这样的结果摘要：“','HxoJJ','char_sprite_normal_','https://sharkpan.xyz/f/YA7T1/th0l79.jpg','AI正在撰写直播总结...','data','FFkVL','length','-\x20**当前精确时间**:\x20','jXXCR','diaryPressTimer','设置已保存！','0\x202px\x208px\x20rgba(0,0,0,0.4)','语气:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20','MRVCw','filled','jdijH','ALyZk','已设为当前用户！','https://sharkpan.xyz/f/N0VCv/5rd8br.jpg','profile-view-modal','Noir\x27s\x20Log:\x20直播日志为空，没什么可总结的。','日记已删除。','touchmove','确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','info.json','oDHsy','NztsK','OnedC','ceil','EGzhH','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>','card-widget-2','<p\x20style=\x22margin-top:\x205px;\x22>','.music-post-song-card','Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:','xcfiZ','\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a','确定要永久删除这条回放记录吗？','#\x20固定分类列表\x0a[','个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容（遵守法律B）\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论（遵守法律B）\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a','\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a','ahzwc',',\x20\x22新压力信号\x22]\x0a\x20\x20},\x0a\x20\x20\x22personality_core\x22:\x20{\x0a\x20\x20\x20\x20\x22summary\x22:\x20\x22（【用你的语气】，基于一切信息，对TA的2-3句话总结）\x22,\x0a\x20\x20\x20\x20\x22observed_traits\x22:\x20[','livestreamSpriteTransform','nYVlI','kVmeD','字体更换成功！','</div>\x0a\x20\x20\x20\x20\x20\x20</div>','zQGYZ','gNaGG','card-image-2','songId','getMinutes','className','ZnTRX','yBBpY','NtlIo','galgame-date','买新衣服','isFinite','✨\x20角色\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>','createObjectURL','px)','appIconPosition_app-user-profiles','aoqfZ','user_avatar_','https://sharkpan.xyz/f/G0dTl/4qad2i.jpg','worldBookEditor','snoop-phone-header','<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>','EPpKQ','。绝大多数弹幕都应该围绕着你。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20\x20**产出**:\x20生成\x206-8\x20条符合以上规则的、自然的、多样化的路人弹幕，放入\x20\x22danmaku\x22\x20数组。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22哦？刚刚有位朋友私信问我...\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20},\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢你的礼物！非常开心！\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人丙\x22,\x20\x22comment\x22:\x20\x22学到了！\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22privateMessageReply\x22:\x20[\x22（悄悄）跟你说哦...\x22,\x20\x22刚刚那个问题，其实是因为...\x22]\x0a}\x0a\x20\x20\x0a#\x20emotion字段规则\x0a-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a','lastIndexOf','-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概','正在解析音乐魔方...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>','gap','\x20首歌曲...','https://xhslink.com/m/5IgC1rniI2I','claude','splice','narrator','被萌到','https://sharkpan.xyz/f/7L3Hj/sl4504.jpg','gzQCk','apOVX','\x0a\x0a#\x20报告要求\x0a\x0a\x20\x20-\x20**格式**:\x20必须是严格的YAML格式。\x0a\x20\x20-\x20**内容**:\x20必须包含以下字段：\x0a\x20\x20\x20\x20\x20\x20-\x20`start_time`:\x20直播开始时间的【ISO\x208601\x20格式字符串】。你必须根据“当前时间”推断出一个合理的过去时间，并严格以此格式输出，例如：\x222025-10-09T15:30:00\x22\x0a\x20\x20\x20\x20\x20\x20-\x20`theme`:\x20直播主题\x20(总结)\x0a\x20\x20\x20\x20\x20\x20-\x20`streamer_mood`:\x20','UbTKM','歌曲\x22','哼，就按你说的办好了。','\x20记录)\x0a','事务失败:','currentAbortController\x20不是有效的\x20AbortController\x20对象，已重置','button','yltMe','#message-anchor','\x20.app-icon-img','iRVwg','hgSyB','UQEOh','UsyCe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','💚\x20正面触发器：\x0a\x20\x20','cpeBj','wNMoy','Plugins','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>','assign','#member-select-','谁啊我吗','你还没保存这个角色呢，导什么导？','dm_reply','stpRD','svg',']你刚才说喜欢A？...\x20这、这可不像你啊，发生什么特别的事了吗？\x22\x0a*\x20（发现平时话痨的用户突然沉默寡言）->\x20\x22......\x20[','<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>','LNKcw','IxmiP','removeEventListener','GrVnI','RTjwr','import-all-data-button','adLjH','）最新写下的日记内容。Ta写的是：\x0a\x20“','post_','TDkXO','Ajxfo','offline-scene-view','https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg','RiUce','cPDId','snoop-summary-textarea','100%','preview-item','removeProperty','map','cover','nQIbU','snoop-char-name-header','diaries','\x22，请谨慎处理！','min','utterance','”所有近期互动的自然延续。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你正在扮演名为“','净化音乐封面时出错，真是的。','发现角色\x20','activity_description','target','，注意相关触发器：','.wb-entry-list','检查或请求通知权限失败:','\x20张旧的音乐封面。','群聊至少需要2名成员。','KArDC','正在整理…','歌曲ID','#ffb366','snoopPhone','Endhl','group_bg_','error','#\x20每日情报\x0a','galgame-mode','lt-ui-song-artist','.bubble-','wb_html_module_builtin_1','（正在回忆...）','\x0a#\x20核心任务：【沉淀你的记忆】\x0a\x0a哼，','removeItem','click','lt-ui-change-song-btn','touchcancel','】的旧数据...','\x20的私信】','reload','lt-ui-cover-art','-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',']？你怎么突然不说话了？是我说错什么了吗？（有点不安）\x22\x0a*\x20（傲娇性格发现用户反常）->\x20\x22哼，你今天吃错药了？怎么突然[反常行为]...\x20不过...\x20到底怎么了？\x22\x0a\x0a**最终目标：**\x20让用户感觉到你不是在机械地执行程序，而是真的在【观察】、【思考】并【关心】Ta的变化。\x0a','chat-sticker-panel','Wbpif','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>','ZaUXy','---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---','paddingLeft','lt-ui-close-btn','读取直播存档失败，将重新开始。','summary','---\x20好友圈净化仪式完成\x20---','add-user-profile-button','AI返回了无法识别的数据格式。','星期三','#99ff99','检测到已保存的字体，正在应用...','正在压缩\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>','歌名和歌手都不能为空！','\x22的整体印象（摘要）\x0a','该角色还没有形成对你的印象。\x0a\x0a💡\x20提示：\x0a-\x20发送20条消息后会自动触发AI深度分析\x0a-\x20或者点击下方\x22立即精炼\x22按钮手动触发（即使没满20条）','Unknown','galgame-text','fcvjw','1011470SHFyFx','对你的档案吗？\x0a\x0a这将清空TA对你的所有记忆和印象。','\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。','Enter','#chat-view-pane\x20>\x20.typing-indicator','aJxpK','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','altar-zip-input','[schedule_message','overflowY','正在回应中，别急。','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==','calendar-header-title','is-playing','</p>','JTRKL','未知表情','\x20行格式不对，被我无视了。','activeLivestreamCharId','IPtRc','确定要删除这个安排吗？此操作不可撤销。','iSXki','TVMtV','CeXIc','加载徽章图片失败','星期二','Noir\x27s\x20Fix:\x20User\x20avatar\x20for\x20','emotion','disabled','#\x20在指定时间线内没有发现任何可供总结的记忆。','”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a','livestreamList','quoted-message-in-bubble','last_updated','livestream-sprite-slider-x','XPicd','vWbbj','还原失败了:\x20','transfer-recipient-select','QnZkJ','cCmyi','snoop-phone-top-nav','（首次生成，无需分析转变）','</div></div></div>','character-edit-screen','elUre','警告：用户档案恢复失败，但其他数据已恢复。','’的关键礼物‘超级火箭’。\x22\x0adm_interaction_summary:\x0a\x20\x20-\x20\x22‘','ZyPiS','user-persona','-\x20**状态提示**:\x20这是你和','TjGWW',')\x20恢复头像失败:','确定要彻底清空【','put','Noir_Backup_Data_','2248116CYNxoq','加载已保存字体失败:','\x20个模型。','DjKJP','shiftKey','snoop-app-back-btn','对你的认知档案','RpoOv','restaurant_name','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','SusTw','outerHTML','正在升级音乐卡片数据...','save-friend-circle-button','”的本次直播生成一份总结报告。\x0a\x0a','shift','post_image_migrated_','200%','DyjJm','\x20场直播的主题是“','错误：找不到这首作为“信物”的歌。','最近没有动态记录。','猫猫撒娇','ZJMtR','qHQph','》已结束。用户已停止分享音乐。','DOMContentLoaded','core_values','gknpV','https://sharkpan.xyz/f/DVJtK/vxiup1.jpg','AfOJS','aWusQ','meeting-main-content','#diary-action-reroll','\x22。你正在生成你【自己】手机里的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】\x22','group','ZbaUm','tLLXm','reset-desktop-button','\x20\x20具体对话如下：\x0a','Escape','cardWidgetState','emotion_schema','在好友圈\x20\x22','加载见面场景时出错:','\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','signal','[手机]','ivzrQ','day-dot','UGjdI','transaction','YlBnm','sprite-slider-scale','listenTogetherSession','gift','-\x20**\x20你最后一次活动是在\x20**:\x20','ZFREe','SgLZY','已恢复默认字体。','ElSRT','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x20初始化用户档案','IfGYn','https://sharkpan.xyz/f/JYeig/sv4p6m.jpg','label','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22snoop-avatar-img\x22\x20src=\x22\x22\x20alt=\x22avatar\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-name\x22>','】的手机已被重置。','snoop-copy-summary-btn','app-music','已为新角色\x20','https://sharkpan.xyz/f/1zQH2/o84boo.jpg','style','28%','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>','.diary-delete-btn','\x0a你只扮演【','\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。','.avatar','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>','user-post-avatar','flJRm','确定要结束一起听歌吗？\x0a退出后将通知对方。','Noir_Backup_Images_','解析存档失败，正在重置:','stretch','hasNewDMReply','none','#group-settings-screen\x20.select-box','livestream-controls-container','\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“','杂项档案已导出！备份全部完成。','member-selection-item','floor','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22message-container\x20','relative','snoop-list-screen','购物记录','-\x20话题触及敏感点\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-speaker-tag\x22>','upload-font-button','.snoop-clear-btn','LHJWj','behavior_profile','WNfug','[弹幕\x20','20px','\x20账单','galgame-sprite-controls','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>','back-to-livestream-from-settings','\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20','db:','player-next-btn','summarize-backdrop','widget-artist','xPSoa','\x0a-\x20**对话状态**:\x20群里已经有','dFXTi','回放档-案已更新。','.snoop-app-content','naFTI','</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20','whispers','iiNfJ','gQjet','所有头像已恢复到运行时状态。','dLyNV','cardState2','editing-char-id','VShIF','createElementNS','wYCsB','fiuHu','动态中的音乐搜索失败:','刷新聊天失败:\x20','transitioning','加载视奸记忆失败(','snoop-app-container','转给\x20','mVglP','show','cjZSf','dObMC','viewBox','netease','#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked','activeWorldBookCategoryId','round','dZZuK','rlkKF','正在保存...','clear','保存用户资料失败:','save-user-profile-button','sfXzs','char-edit-css','axAcP','樱花薄粉','开始时间','tTaEV','YqfQH','256500JOClmu','\x0a\x0a#\x20【最重要】来自“我”(','\x20//\x20<---\x20哼，就是把这行加在这里！\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▼▼▼\x20在\x20startLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色核心资料\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20**你的核心人设**:\x20','sin','qryYY','object','true','XNvWO','position','\x20(分享了歌曲:\x20','&gt;','total_cost','total_tokens','span','eWHNA','WgWAu','htrEr','\x22>&times;</button></div>','unshift','</div>','NReCo','\x20首音乐','settings-screen','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-card\x20','canplaythrough','zUGqa','你【必须】分析：\x22这个新行为是TA一直以来的特点，还是在[某个事件]后才发生的转变？\x22','cancel-edit-replay-btn','默认分类','addEventListener','noRKW','⏰\x20时间:\x20','YFZEZ','conversationHistory','已经生成了今日账单！想看就去“看账本”标签页。','XPsIo','wb-entry-item','preferences','ReDzQ','https://sharkpan.xyz/f/mjdFW/28n30c.jpg','》吗？','当前聊天','\x22。这是你对\x22','IAuYH','altar-slot-images-zip','\x22的视角，','substring','http','KGVpr','已删除。','条目已删除。','https://sharkpan.xyz/f/zLes5/4lxzjn.jpg','咱俩天下第一好','群聊设置已保存！','remove-font-button','author','<div\x20class=\x22listen-together-header\x22>','app-diary','JSON解析失败，启动兼容模式...','10px\x200','initUserProfile','-\x20姓名:\x20','RIxXr','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','review','FRloE','amount','worldBookCategories','songName','\x20条视奸记录','在所有地方的最后一次互动是在**:\x20','zTJTH','pAmVk','feed-loader','editing-world-book-id','getReader','user-profile-screen','.screen.active','GCNVa','info','\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>','var(--primary-color)','header-actions','gULqJ','transfer','\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1','-\x20你在“','fgfny','你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！','music-input-song','正在分析新认知，请在弹出的窗口中操作！','comfort_zone','wbc_imported_','6486200Bqypyb','\x0a\x0a#\x20近期记忆\x20(你和','tab-view-ledger','OCJqE','app-user-profiles','请先输入\x20API\x20接口地址和密钥。','”已删除。','2970288AsEkln','TSHAX','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','赞同！渲染效果一级棒！','书记官正在奋笔疾书...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>','HGDag','<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>','SSxbP','导入失败了，笨蛋:\x20','objectStoreNames','确定要进行一次深度总结吗？\x0a\x0a这将以当前私聊的起始日为开端，整理该角色之后的所有相关记忆（包括其他聊天、日记、手机内容等）。','rJwXG','#ff9999','pUqpZ','candidates','https://sharkpan.xyz/f/4aqCj/gp13hn.jpg','📥\x20回复:\x20','isAnimatingDiary','✗\x20讨厌：\x0a\x20\x20','events','music-widget-card','onupgradeneeded','消息缓冲区为空，跳过增量精炼','OxNwi','RgwIf','snoopList','&#039;','group-delete-button','dkqlj','customStickers','--\x20点击选择\x20--','app-lock-screen','sHrlz','xOLZT','tmqoh','todo-item-small','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>','\x0a---\x0a','yamRC','close-profile-button','home','</span><div><div\x20class=\x22description\x22>','image',',\x20resetting.','NoirCustomFont','world-book-editor-title','DVFVN','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>','</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','wallpaper_main','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>','participantIds','勉强但是好吧','NoirAccountingData','没有找到相关结果。','LDBLt','是否发送了私信。如果有，你【必须】通过“隔空喊话”或“私密回复”来回应。这是建立特殊羁绊的关键，绝对不许无视。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**第二优先级\x20-\x20回应互动**:\x20回应','reduce','距离「','请基于“我”的最新互动，继续你的直播。','已经在上传中，忽略重复点击','\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【','edit-replay-modal','##\x20最近消息（新发生的，共','<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>','width','\x20(ID:\x20','Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.','body','localeCompare','GIoOi','ksmZH','oAKpE','#snoop-avatar-img','生成动态回复失败:','yllsm','is-visible','读取完整用户档案失败:',')，已跳过。这不应该发生，数据库可能已损坏。','EKbFK','\x20之间的私密内容)\x0a','beforeend','正在为【','图标处理失败:\x20','xEMNX','livestream-replays-btn','ltoLJ','livestream-dm-messages','成功恢复\x20','likes','app-pages-slider','getItem','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>','global-player-play-pause-btn','rWBau','music-post','#meeting-view-screen\x20.chat-input-area','解析AI返回的档案失败:',']:\x20','parts','fAyQR','AasQf','home-time','dIzHJ','无法解析旧的视奸内容来获取时间戳。','currentAbortController','fragments','backgroundPosition','Gdirb','WFcTd','isDMPanelVisible','back-to-snoop-list-from-phone','aDEQy','bvekJ','需要至少2个角色才能创建群聊。','nwTqQ','💜\x20','<input\x20type=\x22checkbox\x22\x20value=\x22','group-chat-name','</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','EXVbg','\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','直播间设置已保存！','\x0a-\x20**对话状态**:\x20群里在','eVSPg','Dxlwx','sender','gQzgh','fMoLG','load-more-btn','\x22\x0a\x20\x20\x20\x20data-log=\x27','dFXaJ','壁纸已更换！','生成动态时发生错误:\x20','DXUMk','--widget-cover-image','gwOPM','aIAtj','.lt-end-session-btn','VlGoG','）是【用户】/【观察者】/【好友圈的主人】。\x0a-\x20列表中的【所有】其他人（','”吗？此操作不可撤销。','sgFIF','color','https://sharkpan.xyz/f/Krwio/1mcclx.jpg','is-today','historyIndex','至少要选择一个圈内成员！','确定要永久删除分类\x20“','\x20个用户档案条目','Fpgel','summary-preview-modal','VjmsM','<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20','创建新用户','kVsGx','group-avatar-input','HKuwn','群聊\x22','\x20张图片,\x20','<div\x20class=\x22snoop-avatar\x22>','right','random','VEfEa','Gemini\x20stream\x20reading\x20aborted.','drjcj','calendar','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>','\x27\x0a\x20\x20\x20\x20data-character-name=\x27','toFixed','[Noir\x27s\x20Shield]\x20角色\x20','normal,\x20happy,\x20angry,\x20sad,\x20shy','正在执行净化程序...','todo','uZXCF','fzQsb','交给我吧','加载立绘失败:','iPxiL','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','set','meeting-message-input','PyDof','user-profile-list-screen','onclick','now','onloadend','从开播时的期待，到讨论剧情时的兴奋，最后收到礼物时非常开心。\x22\x0aaudience_mood:\x20\x22初期以好奇和捧场为主，中途讨论热烈，后期因用户的礼物达到高潮。\x22\x0akey_events:\x0a\x20\x20-\x20\x22','qFjrZ','player-artist','diary-modal-save','reset-card-button-2','<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>','candidatesTokenCount','eQXQZ','位置已重置，正在刷新...','IazIh','一个人可怜吃饭','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>','bubbleCss','settings','正在为你搬运旧壁纸到新仓库...','好友圈名称不能为空！','import-data-input','\x0a━━━━━━━━━━━━━━━━━━━━━━━━\x0a\x0a','确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！','back-to-home-from-diary-list','哼，这不是图片，你想让我压缩什么？','padStart','back-to-home-from-world-book','isFromLibrary','prev-month-btn','upload-card-button-2','jMsvt','aVtyv','export-images-data-btn','manual-refine-button','https://sharkpan.xyz/f/25ACQ/gpzab6.jpg','正在销毁临时记忆...','translateX(-','ZjLsy','<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>','卡片\x202\x20已更换！','meetingView','Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。','calendar-grid','[Import\x20Altar]\x20开始解析图片ZIP...','snoop-temp-style','性格:\x20','\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a','还没有我的回应可以重新生成哦。','\x0a\x0a#\x20你的手机内容摘要(这是你的个人记忆，不要提及“视奸”)\x20\x0a','xwhUZ','iiNSI','frHGH','的情绪变化总结\x20(【注意】必须用角色名，不是“主播”)\x0a\x20\x20\x20\x20\x20\x20-\x20`audience_mood`:\x20观众氛围变化总结\x0a\x20\x20\x20\x20\x20\x20-\x20`key_events`:\x20本场直播的关键事件节点\x20(列表形式)\x0a\x20\x20\x20\x20\x20\x20-\x20`dm_interaction_summary`:\x20与“我”(','BANIX','FWvSA','\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','lwkBl','cursor','未命名','请在动态或聊天中播放','match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','星期日','user-name','wFADW','1064610vwsUZB','</span><span\x20class=\x22unit\x22>天</span>','eZSXb','quote-message-button','正在为你切换新的歌曲...','replaceAll','#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked','accounting-title','\x22\x20id=\x22','diary-get-reply-button','toISOString','\x22）要发布一条**新动态**时，你【必须】查阅你自己的“相关记忆”（聊天、日记、视奸内容等）。\x0a\x20\x20\x20\x20-\x20你的动态内容【必须】与你和\x22','https://sharkpan.xyz/f/6Dzia/m9smvt.jpg','summary-preview-textarea','copy-profile-button','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a','toLocaleTimeString','tyMpy','uHwOM','selectedDate','groupChatCreate','currentLivestreamDMs','NtjDo','iUykN','get','gBnqu','cgDYu','很好哦','\x20的私聊','typing-indicator','aACDl','add-world-book-button','characterName','back-to-home-from-accounting','qAEcp','grid','5px','group-chat-create-screen','PHsSt','核心印象:\x20','diary-action-modal-','解析压缩包失败:','YoxnM','iVQsS','</div><div\x20class=\x22artist\x22>','mousemove','user-profile-list-container','DUSLh','yaYfr','GpgZb','message-bubble-row','onerror','对你极度信任，或者想问一些不方便在直播间公开说的事情。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20【绝对重要】：无视私信是对','LAGIq','fKEMJ','未知歌曲','re-record-button','Creating\x20object\x20store:\x20','livestream-textbox-container','sprite-reset-button','hVSMt','Noir\x27s\x20Log:\x20直播进度已保存\x20(包含私信)。','translateY(-','coverUrl','”之间发生过的所有事情。\x0a\x20\x20\x20\x20你的任务是【用你自己的语气、态度、和第一人称（“我”）】，为这些记录生成一份【高度精简】的【私人回忆录】。\x0a\x0a\x20\x20\x20\x20#\x20【绝对视角禁令】(最高优先级)\x0a\x20\x20\x20\x20-\x20你【绝对禁止】使用第三人称（例如“','.category-checkbox[data-category-id=\x22','global-player-next-btn','accounting-screen','jaAuW','laRfp','memberCharacterIds','[表情]','Noir_FileSystem','summary-preview-backdrop','xlAIz','说了要\x20.ttf\x20文件，你是听不懂吗？','clientX','<div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20','<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>','FldqQ','35%','</div\x20>\x20','NKJxn','购物消费','char-edit-name','cancel','PDDoz','music-share-card','wwpNs','PYBDq','群聊“','dfWcG','没有看到具体内容','WkudH','\x22。这份档案是你写的【私人笔记】。\x0a因此，所有总结性的字段（如\x20`core_values`,\x20`summary`,\x20`emotion_summary`\x20等），【必须】使用你的第一人称（\x22我\x22）视角来撰写。\x0a-\x20**[错误示范\x20-\x20中立]**:\x20\x22用户很重视公平。\x22\x0a-\x20**[正确示范\x20-\x20角色第一人称]**:\x20\x22我发现\x20','themeLightness','\x22\x20class=\x22sticker-content\x22>','contactName','解析失败了，笨蛋！\x20','\x22\x20的聊天记录已清空。','\x0a【二、行为档案】\x0a\x0a','store_name','15px','card-widget','哼，你这字体文件有问题，用不了。','正在加载...','https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7','chat_image_','app-wallpaper','确定要清空\x22','sender_id','is-user','UsJEj','function','html','classList','isGenerating','result_page_content','SnuqN','医疗健康','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','getDate','<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>','WaCuH','currentlyPlayingIndex','#a4c2f4','jjBeU','jdmdY','编辑条目','https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg','totalTokens','请先选择一个聊天！','CFuDL','<p\x20class=\x22music-post-thought\x22>','错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。','该角色','zNicm','confirm-music-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ICuIU','CMLqV','-\x20**你与','\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。','znnLF','\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>','暂无音乐','song_','找不到旧的存档，无需救援。','livestream-sprite-front','BFwVo','让主播继续说点什么吧...','\x0a4.\x20\x20**分析转变**：','pause','已送达','kTBgB','writeText','https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg','开播失败了，哼:\x20','livestream-sprite-cancel-button','GghSM','widget-next-btn','直播回放已归档！','avatar','whisper-loader','动态页背景已移除。','turyH','#\x20这段私聊是空的，没有时间锚点，无法开始总结。','widget-play-pause-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','为你骄傲','profile-textarea','chatWallpaper','hUnOD','bORcL','Fetch\x20request\x20was\x20aborted.','yVQbZ','ibhaE','[Noir\x27s\x20Brain]\x20缓冲区已满，触发分析...','kcBAc','cmmHD','POST','WeRSD','Zehgd','exp_','说了什么”）。\x0a\x20\x20\x20\x20-\x20你【绝对禁止】使用中立、客观、AI或档案管理员的语气。\x0a\x20\x20\x20\x20-\x20你的产出【必须】听起来像是“我”（','indexedDBData','asfen','\x22\x20class=\x22char-name\x22>','这是一条由控制台添加的测试动态！样式看起来非常完美。','<img\x20id=\x22','\x20-\x20','Vuijp','MAWDh','-\x20[动态]\x20','HbXwM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_','\x0a#\x20你的日程与纪念日\x20(由\x20','\x20时出错，跳过。','#snoop-app-view-container\x20.snoop-app-content','搜索失败:\x20','eIqar','accepted','ZbUAQ','reply','\x20对话！我们只要新的！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','promptTokenCount','无法保存聊天记录。','BhtxJ','bwVQd','cancel-start-livestream-button','【增量更新】','lhXtZ','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>','backgroundImage','appendChild','QlDYA','LBotN','world-book-edit-name','translateY(-300px)','calendar-screen','toggle','show-profile-button','EYnYz','救援头像时出错:','SEVqo','加载第二个卡片图片失败','diary-entry\x20','一起听歌','hGWHV','NjlIw','<span>--</span><span\x20class=\x22unit\x22>天</span>','mousedown','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>','xtVQd','确定要恢复这个角色的默认立绘位置吗？','\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>','pow','WxJmn','api-watermark',')只发给你一个人看的悄悄话。这代表','确定要重新记录吗？当前的账单会被删除。','XAIUn','新格式（三文件）','】的档案吗？\x0a\x0aAI将【扔掉】旧档案，【重新阅读】所有历史记录，并生成一份【全新的、精炼的】总结。','有点生气','TaNeo','pointerEvents','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>','UwjOX','我很脆弱','\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>','group-options-cancel','OarCv',',\x20\x22新性格特点\x22],\x0a\x20\x20\x20\x20\x22interaction_style\x22:\x20\x22（总结的互动风格）\x22\x0a\x20\x20},\x0a\x20\x20\x22observed_changes\x22:\x20[\x0a\x20\x20\x20\x20','apiSettings','。所有总结性的字段（如\x20`summary`,\x20`core_values`\x20等）必须保持你自己的第一人称（“我”）视角。\x0a\x0a*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a\x0a#\x20【【【绝对输出格式\x20v2.0\x20(必须严格遵守)】】】\x0a*\x20你的输出【必须】是、也【只能】是一个【完整的、全新的、精炼后】的JSON对象，**并且【必须】保持\x20v2.0\x20的结构**！\x0a*\x20【绝对禁止】返回任何JSON之外的文字、解释或Markdown标记。\x0a*\x20直接从\x20`{`\x20开始，到\x20`}`\x20结束。\x0a\x0a#\x20v2.0\x20格式模板\x20(你必须按这个结构返回)：\x0a{\x0a\x20\x20\x22version\x22:\x202.0,\x0a\x20\x20\x22character_id\x22:\x20\x22','tTqBN','OYUKR','</svg>','LfxEo','https://sharkpan.xyz/f/v0qcL/dio7j0.jpg','FzoyW','OdWrE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-','\x0a\x20\x20\x20\x20-\x20世界书[','txiKi','streamerSpeech','\x20//\x20<--\x20哼，加在这里\x0a','linkedWorldBookIds','XElth','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20','https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg','的特殊对待。因此，回应私信是你的【最高优先级】任务。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20回应私信能体现你对','user-send-post-button','xRxov','\x0a#\x20核心任务:\x20【用你的第一人称】撰写【私人记忆】\x0a\x0a你【就是】“{charName}”。你现在正在回忆你和“{userName}”的聊天记录。\x0a你的任务是【用你自己的语气、态度、和第一人称（“我”）】，为这些记录生成一份你的【私人记忆摘要】。\x0a\x0a#\x20【绝对视角禁令】(最高优先级)\x0a-\x20你【绝对禁止】使用第三人称（例如“角色做了什么”、“用户说了什么”）。\x0a-\x20你【绝对禁止】使用中立、客观、AI或档案管理员的语气。\x0a-\x20你的产出【必须】听起来像是“{charName}”在写自己的日记。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于那些【让你印象深刻】的关键信息、情感转折点、重要决定、分享的秘密、以及你们定下的约定。\x0a\x20\x20\x20\x20-\x20**【强制第一人称】**:\x20必须用“我”（“{charName}”）和“{userName}”来指代双方。\x0a\x0a#\x20输出示例（【【你必须严格模仿这种第一人称语气】】）\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20好像工作压力很大，一直在跟我抱怨，哼，真拿他没办法。\x22\x0a\x20\x20\x20\x20-\x20\x22我安慰了{userName}，还大发慈悲地约他周末去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22说好了，周六下午在市中心电影院，看那个《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22心情不错，给{userName}发了张可爱的猫咪图。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20跟我提了个什么新项目的想法，听起来还挺有意思的，我给了他几句建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请【严格代入“{charName}”的身份和第一人称视角】，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。\x0a【绝对禁止】使用第三人称！\x0a直接从\x20`memory_summary:`\x20开始输出。\x0a','char-edit-wallpaper-input','transparent','ULCUU','start-livestream-btn-container','https://sharkpan.xyz/f/eOXIw/y29z21.jpg','input[type=\x22checkbox\x22]:checked','tzQPo','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>','characterLastScripts','以下JSON结构。\x0a**第一维：价值地图\x20(Value\x20Map)**\x0a*\x20你对你家','FnCWf','lZuVz','noir_data_migration_v1_complete','Vbcjl','QqBvj','char-name-header','nAkyV','novel-mode','。你又和\x20','条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对身份锁定】(最高优先级)\x0a-\x20\x22','eventType','</div>\x0a\x20\x20\x20\x20\x20\x20','执行好友圈数据净化...','add-event-fab','HcFan','群聊\x20(','直播回放','indexedDBSnoopData','还没有任何内容可以重新生成。','jleph','<div\x20class=\x22loader-spinner\x22></div><span>',']\x20[','gemini','backgroundColor','\x22\x20class=\x22music-share-cover\x22>','yeIwy','这个也是摆设，别点了。','好友圈已保存！','你是\x22','<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>','哼，正在净化你那些超重的音乐分享记录...','tokenStats','wWnNJ','sprite-adjust-button','quote-preview-text','FGOJl','.json','fkBQJ','[图片]','VxEwg','.char-info-wrapper','otncw','\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20','sticker-panel-controls','refresh-feed-button','正在铭刻字体...','找不到角色。','CkbeE','avatar-wrapper\x20','tone_style','https://sharkpan.xyz/f/qjJT3/kpy33b.jpg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','toDataURL','ZFwgH','sQEFQ','偏好:\x20','\x20|\x20','MOsaH','diary-modal-textarea','tSlXA','（正在构思中...）','transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease','dataset','userProfile','\x20聊了聊新项目的想法，给了他几句建议。\x22\x0a\x20\x20\x20\x20```\x0a\x0a\x20\x20\x20\x20#\x20最终指令\x0a\x20\x20\x20\x20请【严格代入“',')\x20的专属时间锚点\x0a','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22time\x22>','YAML翻译机也无法理解这段梦话。','</div>\x0a\x20\x20</div>\x0a','cloneNode','\x0a##\x20条目:\x20','scrollTop','错误：你还没有创建任何好友圈。请先在App内创建一个。','adoGS','theme-hue-slider','currentChat','交换日记','KqTeZ','wb_','动态已清空。','-\x20**\x20状态提示\x20**:\x20你已经有\x20','tab-record-expense','zRtvl','.typing-indicator','nFnlO','BhAet','\x22（ID:\x20','sGmPT','PlSOm','diary-write-modal','外卖订单','Cuhlh','cOieh','档案已重置。','纪念日','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','diary-next-button',':</span>\x20<span\x20class=\x22danmaku-comment\x22>','PbFIW','\x22对你的整体印象（摘要）\x0a','RIkZC','\x20添加了新的纪念日：','sprite-resize-handle','YZNwu','parentNode','iTXOx','EBsxm','friend-circle-edit-bind-user','replay-item','ntdXT','meeting-scene-view','升级已取消。旧版图片数据可能导致应用卡顿或出错。','OZkIu','REYQo','<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>','条新动态挑选发布者。\x0a3.\x20\x20**创作动态\x20(遵守法律A)**:\x20扮演作者，根据其【私密记忆】创作与用户相关的动态。\x0a4.\x20\x20**模拟互动\x20(遵守法律B)**:\x20切换视角到【圈内其他AI成员】，根据【公开人设】模拟点赞和评论。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20','noir_migration_fc_v1_complete','qKmKW','createObjectStore','chat-summarize-button','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>','群聊已解散。','habits','WmZlK','data:\x20','jiQds','pendingProfileRefinement','读取失败:\x20','\x22\x20中发现一张需要净化的图片...','MjJjc','accountingData','_blank','gBfsV','.listen-together-card','\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a','musicUploadAltar','HSGnM','\x20\x20-\x20角色ID:\x20','\x20内容失败:','还原失败:','</label>\x0a\x20\x20\x20\x20','SwiCs','group-world-book-checkboxes','char_wallpaper_','active','async','错误:\x20','back-to-home-from-user-list','usage','--primary-lightness','重置失败:\x20','mQHqF','closest','无描述','xJuwv','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-prompt-text\x22>你想查看\x20TA\x20的……</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-main-grid\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','wyOsn','\x22（用户）之间**最近发生的私密事件**相关联。\x0a\x20\x20\x20\x20-\x20**示例：**\x20如果你刚在私聊里和\x22','rawResponse','appState','EfJIL','加载角色\x20','coverId','https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg','application/json','好友圈净化完成，正在重新存档...','lSxJB','BvgtQ','altar-slot-lyrics','https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg','export-misc-data-btn','【叮咚！收到来自\x20','“我”这次没有新的互动，请你根据情况继续直播。','Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:','确定要清空好友圈“','\x20.app-icon-img,\x20#app-dock-top-right\x20#','negative','Error\x20fetching\x20from\x20','authorId','YEeDG','save-edit-button','widget-cover-art','auto','posts','hard-reset-button','continue-livestream-btn','qayPG','googleapis.com','?word=','请先打开一个聊天！','\x0a##\x20日期:\x20','星期一','GXhFh','cbAAT','granted','错误：找不到角色','生成日记失败:\x20','在直播中进行了侧面回应。\x22\x0a\x20\x20\x20\x20','char-edit-avatar-input','reset-widget-bg-button','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20','mFqyc','\x20张旧封面。应用即将刷新。','center','\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。',')的补充信息\x0a','add-choice-backdrop','scrollIntoView','导出失败了，哼:\x20','altar-zip-input-import','\x0a\x20\x20]\x0a}\x0a##\x20最终要求\x0a-\x20直接输出JSON，不要Markdown代码块。\x0a-\x20','files','save-event-button','\x0a\x20\x20\x20\x20姓名:\x20','OHRPi','livestream-theme-input','sort','为角色\x20','8px','请输入有效的转账金额！','originalExpenses','uHLXG','char_offline_bg_','http://www.w3.org/2000/svg','确定要清空群聊\x22','mtena','chat-messages','activeMeetingCharId','reset-card-button','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>','group-settings-name','\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22','aHWUO','未知地点','Mfjkf','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>','clock-color-toggle','FCZoh','\x20/\x20','🔄\x20回应模式：\x0a\x20\x20','GhtxL','净化好友圈时出错，真是的。','<style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20','altar-json-input','edit-replay-backdrop','执行音乐封面数据净化...','GaGjo','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','分析你的【完整互动历史】。','lKXsW','quote-preview-area','正在逆转时空...','cFDNr','friendCircleEdit','awbhP','说了是摆设啦，笨蛋。','#\x20任务:\x20生成\x20','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','EOFtk','杂项导出失败:','NdjJL','直播主题和观众氛围都不能为空！','正在构建新世界...','用户已删除。','hiZAn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>','back-to-home-from-livestream-list','测试动态已添加！','back-to-chat-list','oLdmS','OfsqF','medium','LUxQI','back-to-livestream-from-replays','iKvHc','checkPermissions','lastTimestamp','JIVfb','livestream-sprite-','”。\x0a','reset-ui-scale-button','\x20相处了一段时间了。\x0a是时候把你对TA的那些【旧看法】（这份档案）拿出来，重新审视、调整、并精炼一遍了。\x0a\x0a#\x20【【【最高指令：统合重构】】】\x0a*\x20你的任务是基于这份【你现有的】私人笔记，重写一份【全新的、统一的、无矛盾】的总结。\x0a*\x20**如果发现冲突**（例如你发现“喜欢”和“讨厌”里有同一个东西，或总结与列表矛盾），你【必须】解决这个冲突。想一个能同时解释两种现象的“新理论”。\x0a*\x20**【精炼去重】**：把你那些重复的、过时的、或意义不大的旧想法（条目）给扔了。\x0a*\x20**【保持视角】**：你【就是】','exportVersion','加载用户头像失败','transform','你是一个乐于助人的助手。','QKxcA','world-book-category-list','textShadow','哼，正在净化你那些被污染的好友圈动态...','销毁缓冲区失败:\x20','-\x20最近提到\x22','\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20','JBgbZ','add-expense-button','rgba(255,255,255,0.2)','qXjwJ','正在净化旧世界...','version','\x0a#\x20任务:\x20生成【与NPC】的聊天记录\x0a\x0a#\x20【【【核心理由与绝对禁令\x20v5.0】】】(最高优先级)\x0a\x0a1.\x20\x20**目标**:\x20此应用(\x22聊天\x22)的目的是让用户视奸你【与其他人】的私人生活。\x0a2.\x20\x20**上下文**:\x20你【记得】你和用户之间发生的一切！(包括聊天记录、人设等)。\x0a3.\x20\x20**允许**:\x20你【可以，甚至应该】在和NPC的聊天中，提及用户或你们之间发生的事。\x0a4.\x20\x20**【【【绝对禁止】】】**:\x20你【绝对禁止】生成一个【与用户本人】的聊天记录！\x0a5.\x20\x20**为什么？**:\x20因为用户刚刚才和你聊过，再在这里看到一遍你们的聊天记录是【无效信息】和【浪费Token】，并且会彻底破坏\x22视奸\x22的沉浸感！\x0a\x0a#\x20【\x20sender\x20字段绝对规则】\x0a-\x20在\x20\x22log\x22\x20数组中,\x20\x22sender\x22\x20字段的值【只能是】:\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【NPC对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：代表【你】在说话。\x0a-\x20【禁止】将\x20\x22sender\x22\x20写成你自己的名字。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22是因为那个人吗？\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22不...是我自己的决定。\x22\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]','onmouseout','customFeedWallpaper','Failed\x20to\x20read\x20state\x20from\x20localStorage:','yFscf','zh-CN','的回放列表','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>','getFullYear','[DONE]','cancel-music-input','图片预览失败:\x20','item_name','lYTqj','mwPKf','mtcnI','EKeLG','circle_','jkpNU','xgbiH','diary-modal-cancel','DumSj','IjFuJ','AVfKn','diary-write-button','THRMa','userId','delete-friend-circle-button','activeListenSession','.no-action-modal','isxFk','已自动断开与其他人的听歌同步。','world-book-edit-category','VgRTi','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','OWXdI','Ncepp','mtlnt','iANnm','full','chat-view-pane','livestream-sprite-controls','mPSrJ','image_url','\x20has\x20been\x20saved\x20to\x20IndexedDB.','eBIfG','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何回放记录。</p>','https://sharkpan.xyz/f/B4DCa/u86hk2.jpg',',\x20\x22敏感话题2\x22],\x0a\x20\x20\x20\x20\x22core_values\x22:\x20\x22（【用你的语气】总结TA的核心价值观，例如：\x27我发现TA最看重的是...\x27）\x22\x0a\x20\x20},\x0a\x20\x20\x22behavior_profile\x22:\x20{\x0a\x20\x20\x20\x20\x22tone_style\x22:\x20\x22（总结的语气风格）\x22,\x0a\x20\x20\x20\x20\x22typical_emotions\x22:\x20null,\x0a\x20\x20\x20\x20\x22emotion_summary\x22:\x20\x22（【用你的语气】总结TA的整体情绪，例如：\x27我感觉TA最近...\x27）\x22,\x0a\x20\x20\x20\x20\x22response_patterns\x22:\x20\x22（总结的回应模式）\x22,\x0a\x20\x20\x20\x20\x22common_phrases\x22:\x20null\x0a\x20\x20},\x0a\x20\x20\x22emotion_schema\x22:\x20{\x0a\x20\x20\x20\x20\x22triggers\x22:\x20{\x20\x22正面\x22:\x20[','bites','lyCCv','newAvatar','&quot;','TqeMr','<p>格式错误</p>','QknUb','snoop-dock','NQQaG','Preferences','wFJWe','EdNUO','find','leFQv','\x22\x20data-category-id=\x22','\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_','has','world-book-edit-content','\x22\x20的自述设定\x20(必须参考！)\x0a','\x0a\x0a#\x20关于群聊参与者“','rKnoR','的直播间','资料已更新，为了让所有变更完全生效，我来帮你刷新一下。','accounting','jfxah','YiLZm','只能在私聊中查看角色对你的档案哦。','is-entering-from-left','\x0a##\x20【重要：语气与视角】\x0a你【就是】\x22','undefined','livestream-replays-container','lCOrt','DTfzG','.remove-attachment-btn','event-content-input','group-bg-input','https://sharkpan.xyz/f/ajwtY/x03qxn.gif','qaIVf','eEnAs','edit-clear-history-button','onload','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>','缓存命中:\x20','\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20任务指令\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**开场白**:\x20根据直播主题和你的性格，生成一段自然、生动的开场白。这段话应该被拆分成\x206-8\x20句，放在\x20\x22streamerSpeech\x22\x20数组里。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**弹幕生成**:\x20模拟一群性格各异的观众，生成\x205-8\x20条符合初始情绪的弹幕。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**初步互动**:\x20你的开场白应该与其中\x201-2\x20条弹幕进行简单的互动。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20【绝对禁止】伪造成','https://sharkpan.xyz/f/ExKsD/s5j2it.jpg','UINKe','kimRP','worldBooksCategories','主播正在回应...','HUtJR','再看这次的\x22最近消息\x22。','create-group-chat-button','confirm-refinement-btn','https://sharkpan.xyz/f/djyi8/1en214.jpg','currentLivestreamUserActions','back-to-library-from-altar','upload-wallpaper-button','categoryId','xNxMp','我不想工作','persona','2rem','appIconPosition_app-accounting','back-to-settings-from-altar','<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>','\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a','\x0a【四、性格核心】\x0a\x0a','ahAok','edit-message-backdrop','lt-ui-song-title','borderBottom','-\x20用户可能感到压力，留意信号：','uXzcy','\x0a-\x20“我”送出的礼物:\x0a','syHCI','ooVDi','一拳打爆','code','catch','如果发现冲突或转变，【必须】在\x20\x22observed_changes\x22\x20字段里详细记录下来。','querySelectorAll','保存失败:\x20',']\x20},\x0a\x20\x20\x20\x20\x22comfort_zone\x22:\x20\x22（总结的舒适区描述）\x22,\x0a\x20\x20\x20\x20\x22stress_signals\x22:\x20[','RwAkc','\x22\x20data-history-index=\x22','#group-settings-screen\x20.selected-options-text','准备存入圣殿:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<pre\x20style\x20=\x20\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22\x20>\x20','card-input-2','DjaiK','yGkMy','galgame-textbox-container','新用户\x20','YEBUT','KvAla','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','statusText','\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a','好委屈但是不能哭','\x22（【关键】本次新发现的、与旧档案冲突或转变的地方）\x22','\x0a5.\x20\x20**记录变化**：','核心数据导出失败:','找不到要清空的聊天记录。','all','hjphS','已结束一起听歌。','save-world-book-button','isgAE','\x22的长期观察档案。\x0a##\x20【强制对比协议】(最高优先级)\x0a1.\x20\x20**读取旧档**：先看一遍你手里的\x22当前档案\x22。\x0a2.\x20\x20**分析新信息**：','\x0a-\x20人设:\x20','\x0a##\x20输出JSON结构v2.0（严格遵守）\x0a{\x0a\x20\x20\x22version\x22:\x202.0,\x0a\x20\x20\x22character_id\x22:\x20\x22','alignItems','last_message_preview','some','你好，世界\x20(Hello,\x20World)','cover_placeholder_','EvlcQ','sPCKW','图片导出失败:','unified-audio-player','CjbtJ','add-chat-button','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','widget-title','artist','正在连接全域记忆数据库...','daily-expenses-list','--feed-bg-image','\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕','Bearer\x20','SAFfE','#app-dock-bottom-left\x20#','cost','核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传','height','群聊名称不能为空！','未知主题','gsvSV','OHKXu','paddingBottom','log','info-file-input','text','XvFna','\x20\x20-\x20用户ID:\x20','card-image','[Import\x20Altar]\x20exportVersion:','current_focus','default',']\x0a\x0a#\x20角色资料库\x0a','jlqMT','ObwlA','zZRoB','哼，只有私聊才能作为总结的时间基线。','hXYTl','今天一笔账都没有，我整理什么？','Claude\x20API\x20错误:\x20','api-provider','<div\x20class=\x22post-body\x22>','QcJPh','）都是【AI扮演的群友】。\x0a-\x20你【绝对禁止】扮演\x22','数据结构升级：成功救援了\x20','浏览器历史','VRFPW','save-edit-replay-btn','option','irnvR','wyOct','message-image-content','ApXrx','group_avatar_','的补充信息\x0a','BatKO','Jgxbo','71%','表情包已保存！正在刷新应用...','DRCdu','top','）在写自己的日记。\x0a\x0a\x20\x20\x20\x20#\x20撰写规则\x0a\x20\x20\x20\x201.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a\x20\x20\x20\x202.\x20\x20**时间轴**:\x20严格按照我提供的日期顺序进行总结。\x0a\x20\x20\x20\x203.\x20\x20**内容**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【【最高指令：绝对精简】】**:\x20你的总结【必须】高度浓缩！只记录当天的【核心事实】和【关键情感转折】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【严禁复述】**:\x20绝对禁止复述完整的对话、添加无意义的口头禅或内心戏。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【提炼与洞察】**:\x20不要直接复制粘贴！你要从不同来源的情报中【提炼】出当天【让我印象最深】的关键事件、重要决定、以及我们分享的秘密。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【关联分析】**:\x20如果同一天内，我从不同地方（如私聊、日记、TA的手机）得知了同一件事，我要将它们【关联起来】进行总结，而不是简单罗列。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【强制第一人称】**:\x20必须用“我”（','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>','<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','completion_tokens','AYKQO','”已成功导入！','char-edit-avatar-preview','kXIix','EIQjA','summary-textarea','\x0a-\x20**本场直播主题**:\x20(根据上下文自行判断)\x0a','world-book-checkboxes-container','IqsBB','hdSQb','\x0a\x0a##\x20世界书条目:\x20','margin','好友圈已删除。','上传失败了，笨蛋！\x20','确定要结束本次直播吗？\x0a我们将为你生成回放总结。','livestreamSettings','ZppSW','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>','sticker-item','\x0a-\x20你正在为一个名为“','BSuDI','inline-block','-\x20你拍过一张照片，内容是：“','privateMessageReply','visibility','原始文本:','#replay-action-cancel','dm-bubble\x20','ruNIJ','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','别这样嘛我哭哭',']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[','\x22已存入圣殿。','choices','zefce','KxVNh','</span></div>','yDzmv','iiWhF','keys','歌曲名称','start-livestream-btn','\x20\x0a```\x0a','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-','未知角色','indexOf','translateX(-50%)','音乐搜索失败:\x20','countdown-timer','TBVZV','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20','\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','事情好多','VLQPg','已重新生成摘要。','（一条AI试图写入但失败的记录）','aiLVY','JQBFe','未分类','\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27','】的档案已重置并重新生成！','编辑角色','Noir_Accounting_Backup_','currentLivestreamSession','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>','sKROo','[AI发送了表情：','defaultPrevented','image/jpeg','anthropic.com','diary-entries-container','视奸内容解析失败:','aHCRM','sad','(想转账给“','[用户向\x20','friendCircleList','-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a','mFPvZ','\x22聊过一部电影，你的新动态就应该是关于那部电影的感想。\x0a\x0a2.\x20\x20**【法律B\x20(对AI)：评论他人(AI)动态时】**\x0a\x20\x20\x20\x20-\x20当你（例如：\x22',')，启动兼容模式...','<span\x20style=\x22opacity:\x200.6;\x22>无</span>','这不是我认证的账本卷轴，导入失败！','transition','tencent','\x0a-\x20**核心指令**:\x20你必须假定这场直播就是在此【当前时间】附近刚刚结束的。在报告中，所有与时间相关的描述，如\x20\x22start_time\x22，都必须以此为基准。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','JJwKk','modal-text','fill','正在恢复用户档案...','WBtNC','GFCNI','至少需要提供核心数据\x20(.json)\x20文件！','旧格式（单文件）','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>','最后更新：','countdown-title','】进行回复。\x0a不要替其他角色续写台词，不要输出\x22','LwBeh','upload-badge-button','Heoey','情绪:\x20','PrYFI','fetch-models-button','music-upload-altar-screen','retry-refinement-btn','（首次生成，无需记录变化）','HffDC','档案还是空的，真没用。','noir-custom-font-style','JHyAi','出去玩','friend-circle-list-container','status','model','ySdye','generationConfig','phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。','speechIndex','xTfZA','diary-page-','\x22，这是TA喜欢的。','https://sharkpan.xyz/f/kjOF6/zedyqb.jpg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥','input_tokens','RmTxX','yldmt','\x0a\x20\x20人设:\x20','PScOh','sticker-item-wrapper','-\x20[来源:\x20','nwWUv','postType','\x20发了张猫咪图。\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22和\x20','perChatContextLines','vpyBZ','8px\x2016px','请根据以上所有规则和资料，开始生成内容。','setHours','url(\x27','bMIWe','listen-together-invite','导出角色卡失败:','diary-input-wrapper','displayUrl','59%','long','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','这不是一张有效的Noir角色卡。','.zip','message','MZmcC','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>','[AI分享了音乐：','\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。','yqmFM','calendarEvents','正在搜索音乐...','home-dock','speaker','home-screen','未找到可用模型。','slice','rtqqL','小时前），可以简单问候一下对方现在的状态。\x0a','\x22\x20的聊天记录吗？此操作不可撤销。','smviO','tlGOC','data:','1px\x20solid\x20var(--border-color)','is-entering-from-right','completionTokens','fontSize','GQQTC','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','VQdQV','aOqHr','type','的特殊关照，建立更深的羁绊。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20添加结束\x20▲▲▲\x0a\x0a#\x20任务指令\x0a\x20\x20##\x20阶段一：主播的回应\x20(生成\x20streamerSpeech\x20和\x20privateMessageReply)\x0a\x0a1.\x20\x20**【绝对最高优先级\x20-\x20延续对话】**:\x20如果“我”(','confirm-altar-upload-button','add-event-modal','LfrJc','BopGN','msg_','确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。','图片档案已导出！别忘了还有杂项哦。','back-to-world-book-list','asXDZ','user-post-textarea','今天\x20','.ledger-item','hidden','user-post-image-input','.choice-modal-backdrop','livestream-settings-btn','Kjnvy','oOrEf','yIfhA','lineHeight','diary-entry-input','end','noir-author-mark','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>','aqGWn','music-player-bar','delta','档案精炼完成！','ZfCyM','\x0a#\x20交换日记摘要\x20(你和\x20','>>\x20','themeHue',':\x22\x20或\x22[','YyrJQ','setProperty','正在检查好友圈数据...','activeChatId','meeting-reroll-button','categorizedExpenses','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+','createElement','nkSSk','Glefr','replayPressTimer','我错了','jOExR','HUPxp','authorType','生成失败:\x20','smooth','music-library-container','XbFys','回复\x20','FakJI','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','lyrics','summary-reroll-btn','</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20padding:\x200\x20!important;\x22>↻</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','import-accounting-input','galgame-sprite','JBEKU','danmaku-item','currentTime','-preview','AI似乎没有想出任何新动态。','.app-icon-img','sEmVd','ezaBf',']，你今天好像有点不一样...感觉情绪不太对。还好吗？\x22\x0a*\x20（发现平时讨厌A的用户突然夸A）->\x20\x22嗯？[','path','JQsal','eyqoO','正在从仓库搬运图片...','replaceChild','AI返回内容:','ghvTF','https://sharkpan.xyz/f/B4WSa/u5wopj.jpg',')没有任何新的互动（弹幕、礼物、私信都为空），你【必须】根据“上下文”中你自己的上一句话，自然地延续或发展话题。**绝对禁止**重复开场白或问候，比如“晚上好”。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**最高优先级\x20-\x20回应私信**:\x20检查','加载\x20','确定要删除这笔记录吗？','char-edit-bind-user','group-edit-name','bqNsv','gBSxn','YXADF','OYdBA','opacity\x200.25s\x20ease','zbmHV','stickerName','EhTxP','\x20个旧头像。应用即将刷新。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','HIVqN','user-avatar-frame-url-in-chat','WWZFv','speechQueue','diary-char-name-header','zupoY','spriteTransform','\x0a\x0a你可以点\x22重来\x22再试一次。','mRPlZ','KuQAa','wb-category-group',')的私信互动摘要\x20(列表形式)\x0a\x0a#\x20输出示例\x20(直接输出YAML文本)\x0a\x0astart_time:\x20\x222025-10-09T15:30:00\x22\x0atheme:\x20\x22分享最近读的一本书\x22\x0astreamer_mood:\x20\x22','app-calendar','group-clear-history','char-edit-wallpaper-preview','category','\x22,\x0a\x20\x20\x22last_updated\x22:\x20\x22ISO时间戳\x22,\x0a\x20\x20\x22value_map\x22:\x20{\x0a\x20\x20\x20\x20\x22preferences\x22:\x20{\x20\x22喜欢\x22:\x20[','idYox','RzhnJ','rWFGx','[系统通知]\x20你们一起听的《','jbuuj','FffJF','hVfmn','aRWUw','REGQk','altar-slot-misc-zip','\x20张旧的动态图片。','\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20','onmouseover','reverse','oKtRM','pointer','\x20[并分享了歌曲:\x20','thought','wLWzc','flexDirection','选择聊天','uzwRk','characters','gNtEQ','then','GMegl','profile-view-footer','交通出行','revokeObjectURL','group-edit-members','back-to-home-from-snoop-list','Failed\x20to\x20save\x20history\x20to\x20localStorage:','\x22\x20data-id=\x22','activeDiaryCharacterId','aborted','Noir\x27s\x20Log:\x20发现直播存档，正在恢复现场...','decorative-badge','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','NTrwF','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','time','\x0a\x0a#\x20关于观众','activeFriendCircleId','获取中…','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','summary-confirm-btn','QgSob','rdGtw','FkAeg','recipientId','back-to-home-from-circle-list','加载直播间设置失败:','livestream-dm-input','kMGWJ','小花花','-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a','\x0a【最近的变化】\x0a\x0a','yYjAa','img','哼，正在开始净化你那被污染的聊天记录...','updateProfileQuick:\x20没有提供角色ID，跳过档案更新','event-type-todo','diary-prev-button','isActive','#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>','加载卡片图片失败','\x20的【档案更新】(模式:\x20增量)','和其他人的聊天',']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[','back-to-home-from-chat','nuomi_message_buffer_','喝多了','保存壁纸失败:\x20','character_id','livestream-header-right','lGdJJ','left','toLocaleString','friend-circle-list-screen','\x20[并附上了一张图片]','群名称已更改为\x22','.music-post-play-icon,\x20.music-share-play-icon','mfFNb','vTcvK','NoirCharacterCard','modal-root','\x0a-\x20“我”发送的弹幕:\x0a','\x0a#\x20核心任务:\x20生成直播总结报告\x0a\x0a你是一名数据分析师，需要为“','opacity','wants','important','qfpXB','-\x20**你们最后一次互动是在**:\x20','SJdqW','has-new','rFQSt','💔\x20负面触发器：\x0a\x20\x20','LpGOo','-input','pdofk','<div\x20class=\x22snoop-app-content\x22>','livestream-danmaku-overlay','34%','IGPJU','-\x20你记得曾和“','altar-slot-info','未命名群聊','todo-list','\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你【就是】\x22','&lt;','ltIUL','typing-indicator\x20narrator','✓\x20喜欢：\x0a\x20\x20','{userName}','vnhnf','jdZcJ','aaTaz','remove','is-exiting-right','modal-mask','custom-icon-list-container','cLYWk','”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。','is-selected','RbLSf','GStZl','qcYvK','1.4','.listen-together-accept-btn','Failed\x20to\x20remove\x20history\x20for\x20chat\x20','”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。','错误：找不到此好友圈绑定的用户！','[sticker:','widget_card_2','TPFgT','livestream-sprite-slider-scale','.load-more-btn','世界书条目已保存！','YUxZB','player-prev-btn','musicPlayerState','<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>','chat_','LtWZk','</span>:\x20','nBpSt','\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“','app-music-library','Dpxsq','bAytz','character','状态存档失败！如果这还失败，那我也没办法了。','listen-together-backdrop','toDateString','ebWBv','uGkSV','KDtaF','chat_char_','\x22(创建新列表)\x22','ymXhd','\x20\x0a#\x20当前情景\x0a','uZZFZ','kGOOo','musicWidgetPosition','open','净化失败了，哼:\x20','ViamI','delete-expense-btn','未知艺术家','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>','toString','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>','back-to-home-from-wallpaper','\x20的档案','Creating\x20object\x20store:\x20music_library','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','用户拒绝了通知权限，定时提醒功能可能无法正常工作。','未知联系人','reset-widgets-position-button','pre-line','MPGvG','YhLSo','.snoop-main-grid','&alt=sse','abs','character-item','post_image_','已有的','oMCRw','url','akDEE','appIconPosition_','MtpMX','导出账本失败:','loadAsync','\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x20margin:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>加载失败了，哼。</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','IeKRl','\x0a\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a','lt-ui-lyrics-container','正在搜集音乐和视奸记录...','GaByT','FdQyF','\x22,\x0a\x20\x20\x22last_updated\x22:\x20\x22ISO时间戳\x22,\x0a\x20\x20\x22value_map\x22:\x20{\x0a\x20\x20\x20\x20\x22preferences\x22:\x20{\x20\x22喜欢\x22:\x20[\x22(精炼后的列表)\x22],\x20\x22讨厌\x22:\x20[\x22(精炼后的列表)\x22]\x20},\x0a\x20\x20\x20\x20\x22sensitivities\x22:\x20[\x22(精炼后的列表)\x22],\x0a\x20\x20\x20\x20\x22core_values\x22:\x20\x22（【用你的语气】统合重构的总结）\x22\x0a\x20\x20},\x0a\x20\x20\x22behavior_profile\x22:\x20{\x0a\x20\x20\x20\x20\x22tone_style\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22typical_emotions\x22:\x20null,\x0a\x20\x20\x20\x20\x22emotion_summary\x22:\x20\x22（【用你的语气】统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22response_patterns\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22common_phrases\x22:\x20null\x0a\x20\x20},\x0a\x20\x20\x22emotion_schema\x22:\x20{\x0a\x20\x20\x20\x20\x22triggers\x22:\x20{\x20\x22正面\x22:\x20[\x22(精炼后的列表)\x22],\x20\x22负面\x22:\x20[\x22(精炼后的列表)\x22]\x20},\x0a\x20\x20\x20\x20\x22comfort_zone\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22stress_signals\x22:\x20[\x22(精炼后的列表)\x22]\x0a\x20\x20},\x0a\x20\x20\x22personality_core\x22:\x20{\x0a\x20\x20\x20\x20\x22summary\x22:\x20\x22（【用你的语气】，统合重构的2-3句话总结）\x22,\x0a\x20\x20\x20\x20\x22observed_traits\x22:\x20[\x22(精炼后的列表)\x22],\x0a\x20\x20\x20\x20\x22interaction_style\x22:\x20\x22（统合重构的总结）\x22\x0a\x20\x20},\x0a\x20\x20\x22observed_changes\x22:\x20[\x0a\x20\x20\x20\x20\x22(精炼后的列表，只保留真正关键的转变)\x22\x0a\x20\x20]\x0a}\x0a','--desktop-item-scale','https://sharkpan.xyz/f/35lse/xmsue5.jpg','ApQAn','20%','档案精炼失败:','（【【【最高指令：增量更新】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**旧总结**，将**新消息**中的【新发现】补充进去。\x0a\x20\x20\x20\x20*\x20**如果发现冲突**（例如旧档案说TA很A，新消息说TA很B），你【绝对禁止】只写\x22TA既A又B\x22。\x0a\x20\x20\x20\x20*\x20你【必须】提出一个能同时解释A和B的\x27新理论\x27来【修正】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但（新发现）只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a','pendingPostAttachments','iugNT','livestream-bg-input','observed_changes','images','\x0a6.\x20\x20**【统合更新\x20(Synthesis)】**：你【必须】提出一个\x27新理论\x27来同时解释新旧两种现象，让档案保持内部统一性。\x0a##\x20你的完整背景（用于准确分析）\x0a###\x20你的人设\x0a','-\x20上次第\x20','livestream-list-screen','execCommand','已选择\x20','-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a','gpqyT','export-core-data-btn','OjaIh','touches','Ozphb','gIvma','DewRl','近期没有特别安排','#replay-action-delete','”。你正在回忆你和“','\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a','\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a','\x20//\x20<--\x20哼，还有这里！\x0a','app-settings','confirm-transfer-button','rfGLn','GPlrG','EoQkm','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20','ItQYP','#diary-action-delete','user','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20','CJbvU','Failed\x20to\x20plan\x20group\x20replies:','https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg','generativelace.googleapis.com','every','”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。','gKSvq','导入账本失败:','rOHgA','正在清点所有记忆碎片...','aGvBR','stopPropagation','好像有动态了...','#\x20核心任务:\x20【用我的第一人称】撰写【高度精简的私人回忆录】\x0a\x20\x20\x20\x20你【就是】“','欢迎！请先创建一个角色开始聊天。','KtVFP','delete','token-stats-button','ooUlH','ceXBe','short','\x20到\x20','任何旧的','save-livestream-settings-button','music-screen','快点哄我','<img\x20src=\x22','</pre\x20>\x20','IjsUQ','objectStore','avatar-frame','iikSV','fXNdE','getTime','tdYyu','你的任务是【首次生成】这个应用的内容。','calendar-day','\x0a\x0a#\x20关于观众“我”(','sprites','char_avatar_','setItem','餐饮美食','RNIKD','group-bg-preview','保存播放器状态失败，真是没用。','复制失败了，哼。','group-avatar-preview','价值观:\x20',']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“','对方正在行动中...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','dms','\x0a\x20\x20\x20\x20绑定用户:\x20','chat-image-input','peZpC','rvkvU','<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>','readAsDataURL','setAttribute','mCeva','浏览器','eventContent','documentElement','sfyGc','touchstart','正在构思中，请稍候...','translateY(0px)','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>','兼容模式成功，已将\x20','\x0a##\x20','music_library','innerHTML','groupSettings','卡片已移除。','📊\x20总计:\x20','chat','10px','anthropic','ifwjB','Bkjju','15%','YUObD','角色“','wallpaper-input','response','确定要恢复默认字体吗？','50%','最近的足迹','opcbW','dkXOo','图片处理失败:\x20','https://sharkpan.xyz/f/ABwhZ/twknmr.jpg','档案内容已复制到剪贴板！','endpoint','dvKhY','aafCq','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','vtiLs','deletion-mode','KlnYd','white','SiVSC','AbortError','pending-post-image-preview','恢复失败了:\x20','\x0a\x20\x20\x20\x20</div>','phone-container','】重置并立即重新生成档案吗？\x0a\x0aAI将清空旧档案，并【立刻】重新阅读所有历史记录来生成一份全新的初始档案。','qUgtM','api-endpoint','sKpNH','test','（对话结束）','scale','-\x20留意最近观察到的变化：','char-edit-offline-bg-input','AI\x20试图创建事件，但找不到有效的用户ID。','grxAJ','AkkfA','成功获取\x20','音乐魔方解析完毕，随时可以献上祭品。','.selected','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','从零开始，【首次生成】用户画像','</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22','currentTarget','livestream-reroll-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20本场直播信息\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20主题:\x20\x22','emoji','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>','tag','var(--text-color-light)','back-to-user-list-from-edit','bHCGU','qmkph','.message.ai','<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22','<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>','comment','clipboard','getDay','\x0a---\x0a//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x0a#\x20上下文\x20(最近的直播内容)\x0a','Kzjxl','JgYxj','galgame-sprite-adjust-ui','novel','danmaku-input','\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a','accounting-content-area','\x0a\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22snoop-home-clock\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','vgyOu','Noir_Backup_Misc_','恢复Preferences失败:','SVkQv','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>','aSdIQ','bujxu','<span>','kAuID','boundUserProfileId','正在生成中，请稍候...','SOSDb','delete-message-button','add-choice-modal','&apos;','setDate','User\x20cancelled','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20初始观众情绪:\x20\x22','已为\x20','\x0a#\x20【作战指令：首次加载】\x0a-\x20你的任务是更新和扩展现有的聊天列表。\x0a-\x201.\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话。\x0a-\x202.\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a','导入失败:\x20','\x22（首次生成，此项为空）\x22','back-to-livestream-list','TJRlh','edit-message-button','GVBrp','lnBIB','event_ai_','请根据以上所有规则，生成\x20','WODyy','altar-slot-audio','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','message-container','BVIyh','\x22>一起听</button></div>','KFYkx','widgetBgImage','还没有API调用记录哦，先发送一条消息吧！','AI没有返回任何内容。','toLowerCase','📋\x20用户档案\x20v','export-accounting-btn','TnCDz','snoop_cache','characterEdit','的关注**:\x20只有当','清空聊天记录失败。','【生成】','#bubble-preview-ai','RGCQQ','Lroif','JUUHX','charAt','pyHrJ','DucHr','（四维深度分析v2.0）\x0a你是\x22','livestream-background','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>','NPcco','cyjrZ','dElnU','yoYIh','friend-circle-title','gpkGs','livestream-sprite-container','back-to-replays-list-from-view','\x20个表情吗？','YhOuD','”...','kbWrT','danmaku','<div','getMonth','\x0a#\x20【【【输出圣旨】】】(必须遵守)\x0a-\x20你的输出【必须】包含【所有旧的聊天记录】和【你新创造/续写的内容】，整合成一个完整的、单一的JSON数组返回。\x0a-\x20【绝对禁止】只返回你新添加或修改的部分！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','expense-item','RTLvy','wUtHK','时空逆转成功！账本已恢复。','【首次生成】：所有列表都必须【从零创建】。','query','BnlIs','kBkwE','2px\x20dashed\x20var(--border-color)','⚡\x20压力信号：\x0a\x20\x20','cos','sprite-slider-y','char_','GoERE','wZXsj','test_post_','pCXIZ','wITjI','我是女仆','eTTBK',']\x20[弹幕\x20','playableUrl','sTTdi','jfEdC','User','wIrkQ','class','prompt_tokens','message-action-modal','chat-reroll-button','<div\x20class=\x22post-likes\x22>','T00:00:00','KFPYf','xhLoB','\x20的旧格式数据翻译。','faaCk','editing-friend-circle-id','triggers','\x22，从你的视角分析用户。','dbYhB','PUycD','保存壁纸失败:','qIAxh','high','.app-icon','input','\x20条新动态。','OZrmM','{charName}','eventDate','\x20的【档案精炼】(模式:\x20初始生成)','的喜好、厌恶有没有什么新发现？\x0a*\x20你觉得TA的【核心价值观】(core_values)是什么？（例如：我感觉TA很重视公平...）\x0a**第二维：情绪图谱\x20(Emotion\x20Schema)**\x0a*\x20【情绪触发器】(triggers)：你注意到什么事会立刻让TA开心？什么话题会立刻让TA沉默或反感？\x0a*\x20【压力信号】(stress_signals)：你发现TA在紧张或焦虑时，会表现出什么小动作或口头禅？\x0a*\x20【舒适区】(comfort_zone)：你感觉TA在什么状态下最放松？\x0a**第三维：行为档案\x20(Behavior\x20Profile)**\x0a*\x20【情绪总结】(emotion_summary)：你该如何总结TA','精炼失败：','https://sharkpan.xyz/f/8ngsj/ax0fat.jpg','RMqSW','加载壁纸失败:','list','DXFzS','”聊过天，关于：“','livestream_sprite_normal_','var(--text-color)','isPlaying','WHOPo','CRrJL','alt','0.7rem','back-to-circle-list-from-edit','\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27','已放逐。','的个人专属世界观设定\x0a','-\x20你点过一份外卖：“','</pre>\x0a\x20\x20\x20\x20\x20\x20</div>','档案更新失败:','-\x20\x22','QuuhG','\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>','read','JumDN','观众氛围','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','nuomi_profile_tiaoTiao_','批量生成动态失败:\x20','委屈那我歇了','”\x20已被彻底清除。','QWhKk','speech','#\x20发生错误：\x0a','livestreamReplays','currentLivestreamSpeechQueue','font-input','push','解析AI剧本JSON失败:','</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>','livestream-dm-backdrop','BshBf','livestream-settings-screen','querySelector','import-char-input','--primary-hue','MWVNm','兼容模式成功，已将旧格式数据翻译。','FOeUi','GvxkG','livestream-text','XileJ','KISco','未命名角色','altar-misc-zip-input','lazy','bcmMQ','music/','activeMeetingScriptQueue','wXtSj','IsVsc','GNHvp','appIconPosition_app-snoop','bFkFU','#FFFFFF','history','activeUserProfileId','key','forEach','\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','名字不能为空！','CJgCT','border','错误：找不到签署契约的地方。','touchend','Noir\x27s\x20Decoder:\x20AI给的时间格式不对，无法解析:','set-active-user-button','jDoAT','字体已应用！(Font\x20Applied!)','lDMzi','startsWith','pSJRP','29%','<div\x20class=\x22post-image-container\x22><img\x20id=\x22','name','userProfileList','YNJWE','emote','未知用户','AI返回的数据格式不正确。','\x22\x20已删除。','<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>','.\x20Current\x20transition\x20state:\x20','\x0a•\x20','<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>','IIGvM','New\x20request\x20started','widget-bg-input','system','你是一个观察敏锐的角色。','create_event','custom_font_ttf','---\x20开始AI回复流程\x20---','准备调用\x20generateAs...','获取AI响应失败:','save-char-button','群友B','VhZvZ','music_cover_','hkpIQ','”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“','PAHss','OiwYf','HBwEh','TeOxr','rJrMA','\x0a#\x20关于你\x20(','nzYJo','NQweJ','modal-cancel','userAvatarFrameUrl','\x20转账\x20','livestream-main-view','Tfxvi','\x0a\x20\x20相关记忆:\x0a','AI返回的不是一个数组。','[Import\x20Altar]\x20JSON数据结构:','openai','cancel-edit-button','私信互动','FfvHd','livestream-replays-screen','endsWith','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>','numeric','CRTCA','\x0a\x0a#\x20用户的动态\x0a','#66b3ff','分钟前','YSzVm','XTXSp','.todo-item,\x20.important-day-item','head','切，加载播放器状态的时候出错了。','izZUu','\x0a\x0a#\x20你的个人记忆\x20(来自所有App)\x0a---\x0a','0\x200\x20','（开始一段新的对话...）','GhOOY','dm-close-btn','\x20说：“','读取或显示用户档案失败:','output_tokens','livestream-replay-view-container','XtYPp','app-world-book','categorized-expenses-list','其他杂项','border-bottom:\x201px\x20solid\x20var(--border-color);','获取档案失败:','cgsYw','replace','\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>','的第一次互动。\x0a','YbtiS','GDUMD','uEHrs','#\x20核心任务:\x20继续直播并与观众互动\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a1.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“','JxVZk','\x0a\x20\x20','full-width-module-container','成功向好友圈\x20\x22','choice-import-character','BCWXD','fLBMt','music','galgame','displayedMessageCount','vertical','正在按日期归档...','max','KmRKg','.wb-entry-item\x20input[data-category-id=\x22','[Import\x20Altar]\x20JSON文件大小:','ceAHT','eoWGG','flatMap','isUser','choice-create-group','\x22（用户）的任何私密记忆！\x0a\x20\x20\x20\x20-\x20你的评论【只能】基于你的“公开人设”和你对那个【角色】的公开关系。\x0a\x20\x20\x20\x20-\x20**这就是为了防止你“造谣”和“串线”！**\x0a\x0a#\x20好友圈成员信息\x0a','XUkpA','scHWz','xgexQ','faPYv','currentLivestreamLog','insertAdjacentHTML','TTGpB','手机内容[','至少要保留一个用户。','edit-replay-textarea','chat-screen','PCpQz','HEwVF','scrollHeight','所有用户头像已恢复到运行时状态。','WfcDR','文件格式不正确，不是一个有效的备份文件。','focus','UzmkU','split','正在解析角色卡...','snoop-home-clock','footprints','resolve','context-lines-per-chat','不高兴撒娇','pUybq',':</span><span\x20class=\x22danmaku-comment\x22>','chats','QYgye','ndffA','rsRTV','array','feed','\x22，这是TA讨厌的！','home-clock-container','currentSpeechIndex','snoop_','maxHeight','meetingList','DolXP','IdupN','quote-preview-sender','paused','bVgbc','小组件背景已恢复默认。','<p\x20class=\x22no-lyrics-placeholder\x22>暂无歌词</p>','char-edit-sprite-','好友圈\x20','refineProfile:\x20没有提供角色ID，跳过精炼','keydown','lnDCM','在准备API数据时，从IndexedDB读取图片失败:','uVNSm','includes','snoop-log-back-btn','userProfiles','block','对方正在输入...','char_sprite_','AbDsE','snoop-app-icon','meetingViewMode','EOYUH','”进行直播。\x0a\x0a','iqLVh','snoop_cache.json','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','getHours','parse','<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>','chat-listen-together-button','tGvJq','有点破防','2-digit','blob','chat-send-button','\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','lZoyQ','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','user-post-attachment-preview','用户资料已保存！','chat-transfer-button','oeKQF','input[name=\x22event-type\x22]:checked','【整体情绪状态】？例如：\x22我感觉TA最近对工作感到焦虑...\x22\x0a*\x20【回应模式】(response_patterns)：你该如何总结TA在不同情绪下的典型回应方式？\x0a*\x20【语气风格】(tone_style)：你如何评价TA的沟通风格？\x0a**第四维：性格核心\x20(Personality\x20Core)**\x0a*\x20【性格特质】(observed_traits)：你观察到了TA的哪些具体性格特点？\x0a*\x20【互动风格】(interaction_style)：TA在和你互动时，倾向于扮演什么角色？\x0a*\x20【核心总结】(summary)：','json','\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20','https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg','todo-date-title','upload-feed-bg-button','avatarFrameUrl','UvSfT','xYYma','Npcgd','livestream-gift-btn','分类\x20“','\x0a\x20\x20\x20\x20人设:\x20','深度总结失败:','新角色\x20','\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。','unlocked','last_edited','display','mouseup','成功净化并迁移了\x20','AI未能返回有效的JSON对象。','meeting-list-container','DIvPI','\x0a##\x20世界书条目:\x20','eacDl','BgMUQ','add-friend-circle-button','music-feed-container','user-post-image-button','wIoqX','未知时间','importAltar','vGsXT','##\x20','所有数据已成功写入！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','zeFJm','preventDefault','localStorageData','fcszm','KIPnx','live-preview-style','\x0a\x0a#\x20\x22','休闲娱乐','pdkYh','”已创建！','YKsJF','description','RLztO','\x20张旧图片。应用即将刷新。','location_name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','”，但没找到人)','wCLQS','transfer-amount-input','条)，启动强制分析流程...','edit-message-modal','Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.','livestreamReplayView','(歌曲刚开始)','nWUMv','EsRwW','WlnQI','modal-ok','VpAQE','JSON解析失败(','qPRQY','app-snoop','在准备动态回复时，读取图片失败:','organize-bill-button','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a','处理\x20','back-to-chat-from-group-settings','cancel-event-button','.custom-multiselect\x20.select-box','主播正在准备开场...','FwgTH','interaction_style','RXYjS','isArray','warn','hcdbQ','listen-together-modal','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>','RsXVG','src','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','ryjDt','YFZOM','close-summary-button','lock-screen-overlay','appIconPosition_app-diary','qtUQi','NSqPz','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style\x20=\x20\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20','parentElement','YWUpM','number','.custom-multiselect','vIyMY','\x22）的动态时...\x0a\x20\x20\x20\x20-\x20你【绝对禁止】查阅或使用你和\x22','pvUsn','contains','forceWhiteClock','-\x20你的备忘录里有一条叫“','tspzw','\x20个旧头像。','条目名称和内容都不能为空！','\x20张图片...','chat-message-input','translate(-50%,\x20-100%)','showFeedLoader','切换聊天错误:','xFMJp','ended','tXCaR','OpenAI\x20stream\x20reading\x20aborted.','today-todo-list','HViUk','未知商店','新建好友圈','正在筛选时间线...','JuHwB','请求AI更新:\x20','trim','altar-slot-zip','export-all-data-button','normal','之外】的其他观众。你【绝对禁止】伪造成','oncomplete','background','qgNce','Koqjc','promptTokens','message-anchor','\x20天没活动了。你生成的内容必须是全新的事件。\x0a','【增量更新】用户画像','WMJaD','【一、价值地图】\x0a\x0a','”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20','div','>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>','message-action-backdrop',']\x20[私信回复\x20from\x20','”，期间发生了：','laUgy','app-accounting','visible','确定要放逐这\x20','KkpKm','diaryView','toBlob','你是一个乐于助人的AI助手。','private','ZDRma','cEkLk','uTppW','分享了《仿生人会梦见电子羊吗？》的读后感。\x22\x0a\x20\x20-\x20\x22与观众激烈讨论了关于人性的定义。\x22\x0a\x20\x20-\x20\x22收到了来自‘','yWkyB','XIyHi','读取档案失败了，哼。\x0a','UclDh','在你那乱七八糟的文本里没找到“歌名”！','星期四','保存角色失败:','core_memory','正在打包\x20','请输入新的分类名称:','images/','bhFgC','zmwDy','\x0a\x0a#\x20用户资料\x20(你必须参考这个人！)\x0a-\x20姓名:\x20','start-livestream-modal','meeting-list-screen','-\x20你曾经搜索过：“','xeebN','获取模型失败:\x20','Uwnrl','preview_','.diary-entry','irxhC','fdtCW','TGUrH','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20','”的身份和第一人称视角】，并【保持绝对精简】，分析我提供的【每日情报】全文，并生成一份\x20YAML\x20格式的报告。\x0a\x20\x20\x20\x20【绝对禁止】使用第三人称！\x0a\x20\x20\x20\x20直接从\x20`memory_summary:`\x20开始输出。','<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>','showChatView\x20transition\x20finished\x20for\x20show=','music-input-backdrop','eqLhi','gaakL','PGFpC','180px','expense-amount','readonly','delete-world-book-button','qdYOC','超激动我来了','请输入群聊名称。','YhuAJ','初始化用户档案失败:','\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a','galgame-view-container','ylEyJ','yvNSc','quotedMessage','PWAqB','UrYvJ','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>','\x22]:checked','preferencesData','LpATP','result','\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a','chat_image_migrated_','TVMPG','charSelect','theme-lightness-slider','PcCzN','findIndex','\x20时出错:','chat-music-button','请先在\x22设置\x22中配置你的\x20API\x20信息。','。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（','GkGST','musicId','XsFpP','聊天档案柜是空的，无需净化。','YgHyL','musicLibrary','Jtxqo','\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20','关注:\x20','KAXCT','\x0a```','确定要删除这篇日记吗？此操作不可撤销。','copy','.wb-entry-item\x20input','🔍\x20观察到的特点：\x0a\x20\x20','Zzfcu','...','happy','[AI返回了无法解析的剧本:\x20','foCkA','\x0a\x20\x20\x20\x20<div\x20>\x20','livestream-list-container','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22snoop-app-header\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>','🤖\x20模型:\x20','snoop-character-list-container','vlljC','.page-dot','确定要删除群聊“','等你消息','app-pages-container','加载自定义表情包失败，真是没用。','新建条目','vAVTc','VEUJR','group-settings-bind-user','[AI向\x20','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-edit\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-delete\x22\x20style=\x22color:\x20#dc3545;\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x20cancel\x22\x20id=\x22replay-action-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>','eYckL','https://sharkpan.xyz/f/z1xc5/iore2n.gif','\x20的遗失头像，正在救援...','CXNOn','widget_badge','TTEiP','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','zwVyC','https://sharkpan.xyz/f/ljVCx/b16h2z.jpg','确定要删除这个条目吗？此操作不可撤销。','解析音乐文件失败:','https://sharkpan.xyz/f/3AGHe/2f8x3x.gif','开始直播失败:','正在升级聊天数据结构...','\x20(当前)','\x0a\x0aINPUT:\x0a','yQEZA','livestream-bg-preview','file','</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20','ykBDk','ohbUr','xAHmA','https://sharkpan.xyz/f/Ganul/78iwli.jpg','Lwshk','正在焚烧【','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>','\x0a3.\x20\x20**对比冲突**：','最近没有互动记录。','JeKrW','fMSSa','backgroundSize','小时前聊过，可以适当问候，不要直接继续之前的话题。','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>','livestream-char-name-header','livestream_bg_','”，里面有\x20','Vqiba','IyTAp','ZcCwi',',\x20\x22新触发器\x22],\x20\x22负面\x22:\x20[','正在解析音乐灵魂...','动态页背景已更换！','角色\x20','entries','gallery','yNuGW','---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---','noir_migration_avatar_v1_complete','IIPJg','badgeState','qRHjX','galgame-speaker','selected','ytuzd','KjvwU','listen-together-card\x20no-action-modal'];_0x5f09=function(){return _0x23b9fc;};return _0x5f09();}document[_0x2529dc(0x3a0)]('DOMContentLoaded',()=>{const _0x215e41=_0x2529dc,_0x346ea1=document[_0x215e41(0x1d6)](_0x215e41(0x5bf));_0x346ea1&&_0x346ea1[_0x215e41(0x3a0)](_0x215e41(0x288),_0x21b012);const _0x21417f=document[_0x215e41(0x1d6)](_0x215e41(0x40f));_0x21417f&&_0x21417f['addEventListener']('click',_0x2f455a);const _0x223102=document[_0x215e41(0x1d6)]('copy-profile-button');_0x223102&&_0x223102['addEventListener'](_0x215e41(0x288),_0x54f60d);const _0x1b0151=document['getElementById']('reset-profile-button');if(_0x1b0151){if(_0x215e41(0xa3f)!==_0x215e41(0xa3f)){if(!_0x4bed54[_0x215e41(0xdb9)]||_0x5a3a5e[_0x215e41(0xdb9)][_0x215e41(0x1e2)]===0x0){_0x5a7f19[_0x215e41(0x27f)](_0x215e41(0x649));return;}const _0x2e4165=_0x289bde[_0x215e41(0xdb9)][0x0];if(_0x2e4165['memberCharacterIds'][_0x215e41(0x1e2)]<0x2){_0x398c70[_0x215e41(0x27f)](_0x215e41(0x118)+_0x2e4165['name']+_0x215e41(0x32e));return;}const _0xd1ec40={'id':_0x215e41(0xb1b)+_0x4984c5['now'](),'authorType':'character','authorId':_0x2e4165[_0x215e41(0x527)][0x0],'content':_0x215e41(0x59e),'timestamp':_0x54ce89[_0x215e41(0x4a2)](),'likes':[_0x2e4165[_0x215e41(0x527)][0x1]],'comments':[{'commentId':'c_'+_0x26d76f[_0x215e41(0x4a2)](),'authorId':_0x2e4165['memberCharacterIds'][0x1],'content':_0x215e41(0x3ea)}]};_0x2e4165['posts']['push'](_0xd1ec40),_0x59cc25(),_0x497b42['log'](_0x215e41(0xbec)+_0x2e4165[_0x215e41(0xb95)]+_0x215e41(0x8b0)),_0x1a7881(_0x215e41(0x70c));}else{const _0x2c5f45=_0x1b0151[_0x215e41(0x646)](!![]);_0x1b0151[_0x215e41(0x669)][_0x215e41(0x913)](_0x2c5f45,_0x1b0151),_0x2c5f45['addEventListener'](_0x215e41(0x288),_0x5961c4),console['log'](_0x215e41(0xec5));}}const _0x68fa7d=document[_0x215e41(0x1d6)](_0x215e41(0x4c1));if(_0x68fa7d){if('KGPLe'==='fnsrW'){const _0x440a8a=_0x186c05['createElement']('div');_0x440a8a['className']=_0x52ab35[_0x215e41(0x8c7)]==='important'?'important-day-item':_0x215e41(0xeb7),_0x440a8a[_0x215e41(0x101)]=_0x3bb38b['content'],_0x440a8a[_0x215e41(0x63f)]['id']=_0x2fe912['id'],_0x6b37e0['appendChild'](_0x440a8a);}else _0x68fa7d['addEventListener'](_0x215e41(0x288),_0xbfc078);}const _0x4a2985=document[_0x215e41(0x1d6)]('confirm-refinement-btn');if(_0x4a2985){if(_0x215e41(0x5e2)!==_0x215e41(0x5e2)){const _0x10a21a=_0x530776[_0x215e41(0x314)](_0x268051,'readwrite'),_0x3f2c74=_0x10a21a['objectStore'](_0x4272f5),_0x346db0=_0x3f2c74[_0x215e41(0x2df)]({'id':_0x18e9dd,'blob':_0x4997b2});_0x346db0['onsuccess']=()=>_0xe41735(_0x346db0[_0x215e41(0xd29)]),_0x346db0[_0x215e41(0x514)]=()=>_0x1357be(_0x346db0[_0x215e41(0x27f)]);}else _0x4a2985['addEventListener'](_0x215e41(0x288),_0x182bcf);}const _0x45db2a=document['getElementById']('retry-refinement-btn');if(_0x45db2a){if(_0x215e41(0x8b1)===_0x215e41(0x8b1))_0x45db2a['addEventListener'](_0x215e41(0x288),_0x4de8f5);else{const _0x351ec4=_0x215e41(0x56c);_0x13ab79['body'][_0x215e41(0xc04)](_0x215e41(0x439),_0x351ec4);const _0x123177=_0x546717[_0x215e41(0x1d6)]('diary-write-modal'),_0x189f96=_0x2c6120[_0x215e41(0x1d6)](_0x215e41(0x63b)),_0x2ea08a=_0x5e92e5['getElementById'](_0x215e41(0x4a7)),_0x152084=_0xeedff6[_0x215e41(0x1d6)](_0x215e41(0x742)),_0x39fbc3=_0x123177[_0x215e41(0xb6c)](_0x215e41(0x8d7)),_0x19c390=()=>{_0x123177['remove'](),_0x4ee287();};_0x2ea08a['onclick']=()=>{const _0x40b638=_0x215e41;_0x90ac1d(_0x189f96[_0x40b638(0xee2)]),_0x19c390();},_0x152084['onclick']=_0x19c390,_0x39fbc3[_0x215e41(0x4a1)]=_0x19c390;}}const _0x12b309=document[_0x215e41(0x1d6)]('close-profile-button');_0x12b309&&(_0x12b309[_0x215e41(0x4a1)]=()=>{const _0x33ef89=_0x215e41;if(_0x33ef89(0x4bf)===_0x33ef89(0x8f7)){if(_0x243d61[_0x33ef89(0xb95)]!=='AbortError'){_0x28f8fd[_0x33ef89(0x27f)]('生成失败:\x20',_0xefc480);const _0x2992c8={'role':_0x33ef89(0xefe),'content':'错误:\x20'+_0x518319[_0x33ef89(0x8ac)],'senderId':_0x4994d6['id'],'isOffline':_0x3b89f9};_0x1db052[_0x33ef89(0x3a4)][_0x33ef89(0xb66)](_0x2992c8),_0x5c02bc();}return![];}else _0xdfbfac[_0x33ef89(0x67f)]?_0x182bcf():_0x2f455a();});const _0x1797c8=document[_0x215e41(0x1d6)](_0x215e41(0xe6f));_0x1797c8&&(_0x1797c8[_0x215e41(0x4a1)]=()=>{const _0x3d283e=_0x215e41;if(_0x3d283e(0xad9)!==_0x3d283e(0xad9)){_0x292bb1[_0x3d283e(0x555)][_0x3d283e(0x1cd)](_0x3d283e(0x3d7));const _0x3db23c=_0x518e0a[_0x3d283e(0xefb)]===_0x3d283e(0xa29)?_0x400a47(_0x3575e2['activeChatId']):_0xfa40a(_0x27d15c[_0x3d283e(0xdf8)]),_0x15b51d=_0x37d361[_0x3d283e(0x968)]===_0x231af3(_0x3ee513[_0x3d283e(0x8ed)])['id']?_0x1c6d2f(_0x4d9d03[_0x3d283e(0x8ed)]):_0x42a9ad(_0x5bf363[_0x3d283e(0x968)]),_0x2a339=_0x3db23c?.[_0x3d283e(0xb95)]?_0x3db23c['name']+_0x3d283e(0xeab):'转账',_0x22b293=_0x15b51d?.['name']?'转给\x20'+_0x15b51d[_0x3d283e(0xb95)]:'转账';_0x1a2055[_0x3d283e(0xa73)]+=_0x3d283e(0xd0d)+_0x2a339+_0x3d283e(0x891)+_0x7739ad[_0x3d283e(0x3c5)][_0x3d283e(0x491)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>'+_0x22b293+_0x3d283e(0x20d);}else _0xdfbfac['pendingProfileRefinement']?_0x182bcf():_0x2f455a();});});
    </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
        <div class="lt-ui-controls">
          <button id="lt-ui-change-song-btn" class="lt-ui-control-button" title="切换歌曲">
            <span>♫</span>
            <span class="button-label">换一首</span>
          </button>
          <button id="lt-ui-end-session-btn" class="lt-ui-control-button danger" title="结束听歌">
            <span>⏹</span>
            <span class="button-label">结束</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="profile-view-modal" class="choice-modal">
    <div id="profile-view-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-profile-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title" id="profile-view-title">用户档案</span>
        <button id="copy-profile-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="profile-textarea" placeholder="加载中..." style="font-family: 'Courier New', monospace; width: 100%; height: 100%; border: none; outline: none; resize: none; padding: 15px; box-sizing: border-box; font-size: 0.9rem; line-height: 1.6;"></textarea>
      </div>

      <div id="refinement-controls-footer" style="padding: 10px; border-top: 1px solid var(--border-color); display: none; gap: 10px;">
        <button id="confirm-refinement-btn" class="form-button primary" style="margin: 0; flex: 1;">哼，就这样吧</button>
        <button id="retry-refinement-btn" class="form-button secondary" style="margin: 0; flex: 1;">重来！</button>
      </div>
      <div id="profile-view-footer" style="padding: 10px; border-top: 1px solid var(--border-color); display: flex; gap: 10px;">
        <button id="reset-profile-button" class="form-button destructive" style="margin: 0; flex: 1;">重置此档案</button>
       <button id="manual-refine-button" class="form-button primary" style="margin: 0; flex: 1;">深度统合档案</button>
      </div>
    </div>
  </div>




  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>

  <div id="edit-replay-modal" class="choice-modal">
    <div id="edit-replay-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="flex-shrink: 0;">
        <button id="cancel-edit-replay-btn" class="header-button">取消</button>
        <span class="header-title">编辑回放档案</span>
        <button id="save-edit-replay-btn" class="header-button">保存</button>
      </div>
      <div class="content" style="padding: 0; flex-grow: 1;">
        <textarea id="edit-replay-textarea"
          style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 10px; box-sizing: border-box;"></textarea>
      </div>
    </div>
  </div>

  <div id="summary-preview-modal" class="choice-modal">
    <div id="summary-preview-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 0; width: 95%; max-width: 360px; height: 75%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <span class="header-title">确认回放摘要</span>
        <div style="width: 50px;"></div> 
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-preview-textarea" style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 15px; box-sizing: border-box; background: #fdfdfd; color: var(--text-color);"></textarea>
      </div>
      <div style="padding: 15px; border-top: 1px solid var(--border-color); display: flex; gap: 10px; flex-direction: column;">
        <div style="display: flex; gap: 10px;">
            <button id="summary-confirm-btn" class="form-button primary" style="margin: 0; flex: 2;">确认归档</button>
            <button id="summary-reroll-btn" class="form-button secondary" style="margin: 0; flex: 1;">重写</button>
        </div>
        <button id="summary-cancel-btn" class="form-button secondary" style="margin: 0; background: transparent; color: #666; border: none;">暂不结束，返回直播</button>
      </div>
    </div>
  </div>
  <script src="capacitor.js"></script>


</body>

</html>
