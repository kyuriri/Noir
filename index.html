<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>

    const _0x3011a4 = _0x5910; (function (_0x15daae, _0x4e0a07) { const _0x1ed749 = _0x5910, _0x40ccd5 = _0x15daae(); while (!![]) { try { const _0xd96418 = parseInt(_0x1ed749(0x62c)) / 0x1 + -parseInt(_0x1ed749(0x7b3)) / 0x2 + -parseInt(_0x1ed749(0xb88)) / 0x3 + -parseInt(_0x1ed749(0x49e)) / 0x4 + parseInt(_0x1ed749(0xb50)) / 0x5 + parseInt(_0x1ed749(0x26a)) / 0x6 * (parseInt(_0x1ed749(0xb94)) / 0x7) + parseInt(_0x1ed749(0x560)) / 0x8; if (_0xd96418 === _0x4e0a07) break; else _0x40ccd5['push'](_0x40ccd5['shift']()); } catch (_0x4bd50f) { _0x40ccd5['push'](_0x40ccd5['shift']()); } } }(_0xce54, 0x895b2)); function _0x9862f5(_0x5d0f6f = new Date()) { const _0x23c5bb = _0x5910, _0x565c66 = _0x5d0f6f[_0x23c5bb(0x25d)](), _0x1920e4 = String(_0x5d0f6f[_0x23c5bb(0x567)]() + 0x1)[_0x23c5bb(0x690)](0x2, '0'), _0x4f8811 = String(_0x5d0f6f['getDate']())[_0x23c5bb(0x690)](0x2, '0'); return _0x565c66 + '-' + _0x1920e4 + '-' + _0x4f8811; } const _0x47dca3 = _0x3011a4(0x7f6), _0x39e0d1 = 'images', _0x44bd71 = _0x3011a4(0xb04), _0x2d365c = document[_0x3011a4(0x58b)](_0x3011a4(0x80c)); _0x2d365c['id'] = 'noir-custom-font-style', document[_0x3011a4(0x2cc)][_0x3011a4(0xa59)](_0x2d365c); function _0xce54() { const _0x32c208 = ['AI整理失败了，哼:\x20', 'llCOV', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'gvFAP', '-input', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', 'AxqjF', 'widget-play-pause-btn', 'app-chat', 'senderId', '书记官正在奋笔疾书...', 'now', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'is-visible', 'music-input-artist', 'input', 'tPaED', 'group-delete-button', 'lirFU', 'day-dot', 'hEUNQ', 'historyIndex', 'ngoXY', '\x20(ID:\x20', 'editing-world-book-id', '正在构思中，请稍候...', 'button', ']\x20[', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', 'lHdsC', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '我是小丑呜呜', 'GiKUU', '2443671gJOgth', 'eventType', '发现角色\x20', 'NNbna', 'Eonoc', 'readonly', 'sad', 'hHLJQ', 'removeChild', '恢复失败了:\x20', 'music-widget-card', '确定要清空好友圈“', '398503iIoYdB', '”...', 'readAsText', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'kuHvH', '-\x20**你们最后一次互动是在**:\x20', '买新衣服', 'ulfNc', '-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'body', 'accountingData', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', 'characterId', 'snoop-char-name-header', '\x0a\x0aINPUT:\x0a', 'hGAHM', '?id=', 'tVMQB', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '昨天\x20', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', '在好友圈\x20\x22', '\x20[并附上了一张图片]', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'AI返回的原始文本:', 'concat', 'PcPAo', 'preview_', 'xIKiL', '搜索失败:\x20', 'authorId', '#char-edit-avatar-preview\x20+\x20.avatar-frame', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'activeUserProfileId', 'PdqNn', 'is-exiting-left', '[发送了图片]', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', 'group-options-cancel', '</svg></div\x20>\x0a\x20\x20\x20\x20<span>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '卡片\x202\x20已更换！', 'sprite-confirm-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'rFZjw', 'dPkJf', 'string', 'SPMNy', 'http://www.w3.org/2000/svg', '（对话结束）', '35%', '超激动我来了', 'conversationHistory', '-\x20你记得曾和“', '.remove-attachment-btn', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'fill', 'items', 'imageId', 'reset-card-button-2', '\x22\x20的聊天记录已清空。', 'global-player-next-btn', '和其他人的聊天', 'localStorageData', 'cknls', 'group-clear-history-button', '未命名角色', 'aXwND', 'LWHtQ', 'save-world-book-button', 'image/jpeg', '_blank', 'post_', 'UEExh', '购物消费', 'div', '\x0a\x20\x20\x20\x20<\x20div\x20class=\x20\x22message-container\x20', '星期六', '&apos;', 'copy-summary-button', 'forEach', 'save-event-button', 'undefined', '2-digit', '你好，世界\x20(Hello,\x20World)', 'NDnVO', 'Claude\x20API\x20错误:\x20', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'sticker', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'eventDate', 'post-img-', '备忘录', '净化好友圈时出错，真是的。', 'world-book-edit-name', 'upload-card-button', 'group-settings-name', 'oXqpO', 'emote', 'aldwc', 'VOApc', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', '图标处理失败:\x20', 'ccYvH', 'qAwqj', 'bclRQ', 'zMVCe', 'chat-messages', 'altar-slot-info', 'diary-send-button', 'type', 'DOMContentLoaded', 'lt-ui-song-artist', 'snoop-app-view-container', 'meeting-list-container', 'musicUploadAltar', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '净化完成！总共迁移了\x20', 'copy', 'iXoVb', 'gkCOe', 'coverUrl', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', 'input:checked', 'getHours', 'editing-char-id', 'YIQXh', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', '委屈哭', '来源：[最活跃]', 'activeListenSession', 'fontStyle', 'abs', '选择聊天', 'TGnFI', 'https://xhslink.com/m/5IgC1rniI2I', 'bNPce', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'back-to-snoop-list-from-phone', 'sSdhI', 'rOOwr', 'VcqAE', '加载更多聊天记录', 'dnelf', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'last_edited', 'snoop-copy-summary-btn', '加载壁纸失败:', '准备调用\x20generateAs...', '群聊设置已保存！', '正在准备音乐数据...', 'category', '徽章已更换！', 'hgzzX', 'IFwZw', 'Error\x20fetching\x20from\x20', 'IZxZW', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'sprite-reset-button', 'Gfnez', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'fNVjX', ';\x22>', '”买过：“', 'spriteTransform', '导入失败了，笨蛋:\x20', '在“一起听”邀请中，净化封面失败:', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '<div\x20class=\x22snoop-avatar\x22>', '点击选择\x20.mp3\x20或\x20.flac', '来源：', '60%', 'meeting-list-screen', 'true', 'AI返回了无法解析的文本', 'Sbsrn', 'entries', 'wQBIW', 'tPaHw', '/v1beta/models/', 'pkvVm', 'upload-wallpaper-button', 'iVoqW', '\x20记录)\x0a', 'flex', 'quoted-content', 'activeChatId', 'tkrMm', 'azpST', '\x0a\x0a#\x20关于读者“', '</span>:\x20', 'push', 'snoopPhone', 'mNrBI', 'trim', 'wlwRL', 'qrOrW', 'PTTNz', 'store_name', 'JypsP', 'toBlob', 'speaker-ai', '#member-select-', 'bmImv', 'listen-together-card', 'BhOrs', '\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20', 'cancel-music-input', 'tIICl', 'cNduu', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', 'userAvatarFrameUrl', 'ZiOVP', '.message-container', 'app-meeting', 'sin', 'friend-circle-list-container', 'customWallpaper', 'diary-action-modal-', 'value', '-\x20姓名:\x20', 'exec', 'url(\x27', 'NwCfM', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', 'kaaht', 'info-file-input', 'daily-expenses-list', '</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'reset-feed-bg-button', 'live-preview-style', '.json', 'qwxnA', 'userProfileList', '.music-post-play-icon,\x20.music-share-play-icon', 'gallery', 'SfELs', 'bsiGE', 'filter', 'feLuJ', 'YZhqO', 'replace', 'DvKIQ', '准备群聊API数据时，读取图片失败:', 'mzVtI', 'meetingList', 'textShadow', 'hsnwH', 'CjbZK', 'NHUvp', 'User', 'happy', '.typing-indicator', '浏览器历史', 'azbJh', 'FbHMT', 'touchcancel', '<br>', 'KbisK', 'char_avatar_', ']:\x20', '0.5', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'card-input', 'dXkeT', 'music-library-screen', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', '新建条目', 'change', 'EKktU', '已送达', 'GyIuj', 'world-book-list-container', 'closest', 'circle_', '你是一个乐于助人的AI助手。', '加载徽章图片失败', 'world-book-editor-title', '哼，就按你说的办好了。', 'onsuccess', '正在翻阅全部历史记录...', 'YAML翻译机也无法理解这段梦话。', 'sprite-slider-y', 'music-player-bar', 'setItem', 'zTpRU', 'avatar-frame', '#group-world-book-checkboxes\x20input:checked', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', 'wallpaper_main', 'musicPlayerState', 'XoIfn', '</div>\x0a\x20\x20\x20\x20', 'mrVgQ', 'KKLwt', 'close-summary-button', 'GmlQF', '\x0a-\x20当前精确时间:\x20', 'GObQj', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'zVNDH', 'snoop-summary-textarea', 'mDnpt', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.snoop-app-content', 'RlltM', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'getFullYear', 'prev-month-btn', 'app-calendar', '数据结构升级：成功救援了\x20', ']\x0a\x0a#\x20角色资料库\x0a', 'chat-view-pane', 'Gemini\x20stream\x20reading\x20aborted.', 'back-to-char-select-from-group-create', 'AmsfH', '动态页背景已更换！', 'friend-circle-edit-bind-user', 'values', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '6qqFWpE', '</div\x20>\x20', '正在升级聊天数据结构...', '10px\x20auto', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'ixEip', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'jcCyt', 'user-profile-list-container', 'zxUhG', '成功救援并备份了\x20', '-\x20**对话状态提示**:\x20你们已经有\x20', 'form-button\x20load-more-btn', 'cos', 'split', 'group-chat-member-list', 'IeEsD', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'BFWyL', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '”的补充信息\x0a', 'musicPlaylist', '日记已删除。', '档案已复制到剪贴板！', 'delete-friend-circle-button', '已设为当前用户！', 'SVABo', 'VkjQz', '记一笔', 'data:image', 'home-time', 'home', 'sprite-cancel-button', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '2px\x20dashed\x20var(--border-color)', 'cvYNC', 'ssmgB', 'offline-scene-view', 'group-world-book-checkboxes', 'match', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', 'home-clock-container', '已经生成了今日账单！想看就去“看账本”标签页。', '请根据以上所有规则，生成\x20', 'GDDXO', 'wWCin', 'Bearer\x20', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'postContent', '群聊音乐搜索失败\x20(', '[用户发送了表情：', 'char_wallpaper_', 'OvnCH', 'DJQtT', '\x20张旧的动态图片。', 'QqEXz', 'appIconPosition_app-diary', 'cINPa', '编辑条目', 'yPcsQ', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '群聊\x22', 'smooth', '29%', '[AI发送了表情：', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'currentAbortController', '欢迎！请先创建一个角色开始聊天。', 'diary-modal-save', 'char-name-header', 'LMHrq', '加载卡片图片失败', '清空聊天记录失败。', 'api-provider', 'audio-player', 'sticker-content', 'marginTop', '正在处理图片...', 'italic', 'LsgHQ', 'worldBook', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'anthropic.com', 'getDay', 'alt', 'toFixed', 'wDojk', 'app-accounting', ']\x20[sticker:', 'pop', 'aSDKD', 'ehUDE', '小组件背景已恢复默认。', 'head', '错误：找不到角色', 'diaryList', '编辑用户', 'lastIndexOf', 'artist', 'transfer-modal', '分钟前', 'sprite-adjust-button', 'app-pages-slider', '加载\x20', 'ePKnA', '[AI返回了无法解析的剧本:\x20', 'add-choice-backdrop', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'music_library', 'edit-delete-char-button', 'choice-cancel', 'accepted', ',\x20ID:\x20', 'sWmMA', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'FCmpj', 'option', 'character-edit-title', '\x22\x20data-id=\x22', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', 'bNcIW', 'scrollHeight', 'QntMU', '\x20\x20具体对话如下：\x0a', 'zh-CN', 'WfWHN', 'STRyh', '\x20写道:\x20', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', 'decorative-badge', 'QSMTt', '#friend-circle-member-selection\x20input:checked', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'NJtGC', 'jbRAu', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', 'OCNZP', 'KrHWL', 'is-entering-from-left', 'AI未能返回有效的JSON数组格式。', 'BeMEp', 'gtrDR', 'isOffline', '\x0a\x20\x20相关记忆:\x0a', '50%', '我是垃圾', '新角色\x20', 'nBfcj', 'LUlfT', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'editing-user-id', 'jzQea', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'char-edit-persona', '别这样嘛我哭哭', 'sticker-item', '生成动态时发生错误:\x20', 'span', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', '请输入群聊名称。', 'diary-modal-cancel', 'galgame-speaker', 'KPJWa', 'nBYKr', 'hkmJV', 'EEAXU', 'GxJLD', 'objectStoreNames', 'msg_', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'generationConfig', 'UOujM', 'widget-cover-art', '交通出行', 'cardState', '_NoirCard.json', '\x0a\x20\x20\x20\x20人设:\x20', 'important', 'snoop-phone-header', 'hard-reset-button', 'CjtPu', 'IaIln', 'IuWcS', '\x20之间的私密内容)\x0a', 'chat-sticker-panel', 'gZjTt', 'widget_card_2', '确定要彻底清空【', 'isPlaying', 'cancel-quote-button', '10px\x200', '\x20-\x20', 'none', 'context-lines-per-chat', 'home-screen', '未知表情', 'veZDK', 'VuvPY', 'fBkRE', '\x0a#\x20已有内容(这是历史记录，你必须接着写，不许动它！)\x20\x0a```\x0a', 'CnsSW', '执行好友圈数据净化...', 'label', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'paused', 'object', '\x22\x20已删除。', 'transparent', 'ecsZG', 'TdPQN', 'HOqHs', 'char_offline_bg_', '成功净化并迁移了\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'DXDfN', 'dUpAt', 'KhYAc', 'wallpaper', 'vNNMx', '纪念日', 'cAhTc', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'iyJzU', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'whispers', 'rEhAt', 'textContent', 'gSgJy', 'Jywyh', 'LgLjZ', '---\x20救援任务完成\x20---', 'quoted-message-in-bubble', 'NKUWM', 'iWtmS', 'mxjtz', 'Escape', '勉强但是好吧', 'LfBCM', '<img\x20src=\x22', 'back-to-chat-from-group-settings', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'modal-cancel', 'settings-screen', '无描述', 'expense-item', 'message-container', '请根据以上所有信息，开始分析并返回JSON。', 'quote-preview-text', 'left', 'statusText', 'BFizj', 'YXjUX', 'utterance', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', 'hLVzo', 'uetlo', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', '[用户发起了听歌邀请:\x20', '歌曲ID', 'stopPropagation', '没有找到相关结果。', 'edit-current-circle-button', 'clientY', 'SaHxD', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'expense-description', 'summarize-backdrop', '#world-book-checkboxes-container\x20input:checked', 'ITKVQ', 'top', 'shy', '\x20|\x20', '确定要清空\x22', 'TQgcW', 'SDRNp', 'AxYXc', 'height', 'jprqY', 'wqgwX', 'init', 'VQMPn', '错误：找不到此好友圈绑定的用户！', 'stringify', 'slWPm', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '图片加载失败', 'song_', 'szCPM', 'char_sprite_', 'lazy', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'HMHCw', 'PFxHL', '\x20张旧图片。应用即将刷新。', 'user-avatar-frame-url-in-chat', 'toLocaleTimeString', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '（开始一段新的对话...）', 'iMQIx', 'text', '\x20\x20\x20\x20-\x20', '批量生成动态失败:\x20', 'qyKHN', '<span\x20class=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', 'translateX(-', 'KrOZg', 'VdOoU', '--custom-font-family', 'char_', 'New\x20request\x20started', '\x0a##\x20世界书条目:\x20', 'toLowerCase', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'kCCAy', 'http', 'name', 'BFSeU', 'customFeedWallpaper', 'meeting-view-screen', '的转账', 'clientX', 'join', 'nLHMx', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', '事情好多', 'back-to-user-list-from-edit', 'find', 'click', 'galgame-view-container', 'aborted', '位置已重置，正在刷新...', 'chatHistory_', 'emoji', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'system', '\x22\x20class=\x22music-share-cover\x22>', 'displayedMessageCount', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'cancel-event-button', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'MERaW', 'charId', 'group-options-modal', '保存徽章状态失败', 'flatMap', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'warn', 'participantIds', 'hhVZK', 'PqRON', ')，启动兼容模式...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '好了，请基于以上所有信息，开始写今天的日记吧。', 'zJikZ', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'calendarEvents', 'XtCyZ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', '未知歌曲', '字体保存失败了，哼:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'ueZLs', '好友圈已保存！', 'uBJLC', 'KdQyf', 'sprite-slider-x', '\x0a#\x20关于你\x20(', '加载第二个卡片图片失败', 'transform', 'group-bg-input', 'save-custom-stickers-button', 'themeLightness', '--feed-bg-image', '角色已保存！', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', '处理\x20', 'IOnEV', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'sBDoO', ':streamGenerateContent?key=', 'tyENJ', '#c299ff', 'USxjJ', '\x20内容失败:\x20', 'narrator', 'rawResponse', 'message-action-modal', 'AMHyC', 'endsWith', '</div>', 'keydown', 'WcSeT', '\x0a\x20\x20\x20\x20姓名:\x20', '#snoop-app-view-container\x20.snoop-app-content', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'userProfile', 'NvNMN', 'yyriJ', '同步已断开。', 'cursor', 'column', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'FPUCB', 'isActive', 'mfnLh', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'spEJl', 'yQeGZ', '图片处理失败:\x20', 'juhoP', '聊天档案柜是空的，无需净化。', 'color', '未知联系人', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'iQCxi', '\x20的旧格式数据翻译。', '#99ff99', 'RtQBh', 'back-to-library-from-altar', 'assistant', 'dhcZJ', '-\x20**\x20你最后一次活动是在\x20**:\x20', '等你消息', 'borderRadius', 'preventDefault', '#diary-action-cancel', 'no-action-modal', 'musicLibrary', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', '34%', 'diary-write-button', 'VIXoT', 'djayh', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'QEDhE', 'worldBookEditor', 'scale', '分钟前聊过，请注意衔接。', '\x22\x20class=\x22char-name\x22>', 'add-event-modal-title', 'appIconPosition_app-wallpaper', 'parse', '-\x20**状态提示**:\x20这是你和', 'TkBZA', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', 'UaWKE', 'group_avatar_', '加载自定义表情包失败，真是没用。', 'high', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'input[type=\x22checkbox\x22]', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'friend-circle-list-screen', 'galgame-date', '\x0a-\x20**当前时间**:\x20', '<\x20div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', 'readAsDataURL', 'ZaRPC', 'cNfbS', 'GgnYA', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'Unknown', 'reverse', 'LFRss', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'default', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'padding', 'margin', 'naMhk', 'bubbleCss', 'VjLkN', '\x22\x20吗？所有聊天记录将被永久删除。', 'lSLry', '未知艺术家', 'short', 'status', 'translate(-50%,\x20-100%)', 'bites', '服务器错误:\x20', 'vTvry', 'CHuOB', '正在解析音乐灵魂...', '干劲满满', 'rgxVM', 'NGLqa', 'speaker', 'findIndex', 'todo-list', 'getElementById', '0.7rem', 'import-all-data-button', '外卖订单', 'ZIeds', 'PiQxz', 'user-profile-edit-title', 'openai', '切，加载播放器状态的时候出错了。', '</span><span\x20class=\x22amount\x22>总计:\x20', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'jqonR', '导入失败:\x20', '绝对不想', 'ZuCXr', 'user-post-avatar', 'BIhOn', '.selected-options-text', 'Fetch\x20request\x20was\x20aborted.', '在你那乱七八糟的文本里没找到“歌名”！', 'ZngsD', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'accounting-title', '无语但是随便吧', 'character-item', 'cQFUr', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', '\x0a\x20\x20\x20\x20<\x20div\x20class=\x20\x22snoop-app-header\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', '.snoop-chat-item', '字体已应用！(Font\x20Applied!)', 'ApntF', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', '星期二', 'hbiqk', 'aKZRC', 'KpTUL', 'transfer-recipient-group', '有点无语', '未分类', 'friendCircleList', 'NlrzT', 'songName', 'groupSettings', '<input\x20type=\x22checkbox\x22\x20value=\x22', '很期待', 'zXrAM', 'mmKoI', 'Creating\x20object\x20store:\x20', 'fZxxn', 'amLHr', 'ogYok', 'JxSnS', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'data:', 'char-edit-name', '用户分享音乐失败:', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', 'open', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', '3075064IPQhXL', '群聊已解散。', '点击选择\x20info.txt', 'sjJkZ', 'QcDlv', 'cardWidgetState', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'getSelection', 'PUJuz', 'splice', '\x22\x20中发现一张需要净化的图片...', 'wmgMt', '#ffb366', '#ff9999', '#\x20发生错误：\x0a', 'claude', 'XzPFR', 'user-avatar-preview', 'backgroundSize', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'backgroundImage', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'restaurant_name', 'hxVZO', 'files', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '生成动态回复失败:', 'CQAvj', 'NCIAC', 'sDuFg', 'toLocaleDateString', 'RRNbG', '/v1/models', 'removeEventListener', '音乐搜索失败:\x20', 'custom-icon-list-container', 'sprites', 'dxDSs', '吃你的饭', '哼，你这字体文件有问题，用不了。', 'meeting-send-button', 'reset-desktop-button', 'yJWKS', 'user-post-textarea', 'galgame-textbox-container', '你还没有写日记。', 'model', '#settings-screen\x20.content', 'HgrAQ', 'XCuVS', 'date', 'onerror', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'back-to-home-from-diary-list', '<\x20pre\x20style\x20=\x20\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22\x20>\x20', '其他杂项', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'shift', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '解析AI剧本JSON失败:', 'refresh-feed-button', 'app-music-library', '</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'thought', 'reload', 'char-edit-sprite-', 'background', '动态中的音乐搜索失败:', 'diary-char-name-header', 'YoStL', 'fJrpJ', '还没有我的回复可以重新生成哦。', 'XfmJG', 'UCYBT', 'edit-message-modal', 'galgame-sprite', 'mouseup', 'touchend', '.custom-multiselect', 'upload-badge-button', 'characterLastScripts', '编辑好友圈', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', 'CoANA', 'widget-bg-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'recipientId', 'mSovy', 'cwyuw', 'newAvatar', '导出角色卡失败:', 'mxxnO', '”已存入圣殿。', 'user-send-post-button', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'prYAD', 'TxsdC', 'feed-loader', 'FDzcL', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'normal', 'activeDiaryCharacterId', 'yjTAA', 'hxkoo', 'hQVKz', 'appState', '\x0a\x0a#\x20', '\x0a\x20\x20人设:\x20', 'rinHU', 'badgeState', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'input_', 'xnxzD', 'SHwkp', 'snoop-app-container', 'replaceAll', '.diary-entry', 'activity_description', 'diary-get-reply-button', 'zOnBp', 'scDmt', 'dyZKM', 'clockPosition', 'delete', '71%', 'tHUkz', 'IfifU', 'createObjectURL', 'chat-music-button', 'ftsLX', 'eEqrz', '星期四', 'friend-circle-member-selection', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'diary-list-container', 'OcEwQ', 'EvKoO', '好友圈名称不能为空！', 'zycBW', 'cmNlx', 'lt-ui-close-btn', 'BZFxQ', 'IndexedDB\x20failed\x20to\x20open', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'IlPVl', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', '\x0a\x20\x20\x20\x20<\x20div\x20>\x20', '已经删掉了。', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'WRJRg', 'WfAoP', '】的手机已被重置。', '有点破防', 'OTney', '-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'gmPLG', 'SLHaM', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', '</pre\x20>\x20', 'authorType', 'bYAiH', '正在解析备份文件...', 'area', 'mTEKD', 'friend-circle-edit-screen', 'center', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', 'enFIy', 'Failed\x20to\x20plan\x20group\x20replies:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '导出过程中发生严重错误:\x20', 'gWMNN', 'fjajc', '\x0a\x0a#\x20你的手机内容摘要(这是你的个人记忆，不要提及“视奸”)\x20\x0a', 'key', 'tab-record-expense', 'HxrPF', 'charSelect', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', '\x0a```', 'remove', 'test', '今天\x20', '.bubble-', 'history', 'bJYyw', 'bbUeI', 'length', 'music-upload-altar-screen', '生成失败:\x20', '群聊至少需要2名成员。', 'TLsXd', '10412544vghXDP', '#diary-action-reroll', '\x20\x0a#\x20当前情景\x0a', 'import-char-input', 'GVpXf', 'horizontal', 'galgame-sprite-container', 'getMonth', 'back-to-home-from-chat', 'user-name', 'tmiJK', '字体应用失败:', 'visible', 'edit-message-backdrop', 'XzkXP', 'aIhzt', '歌名和歌手都不能为空！', '角色“', 'ended', '”聊过天，关于：“', 'isFinite', 'map', 'Ejyeg', 'IHNWn', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'role', '\x20添加...', '保存播放器状态失败，真是没用。', 'todo', 'mjwph', 'hMDEC', '全量导入失败:', 'NBSyo', 'char-edit-css', 'addEventListener', 'tpfnj', 'SWGMN', 'oXWva', 'vgcUn', '卡片已移除。', 'input[name=\x22event-type\x22]:checked', 'LFDtL', 'firstChild', 'createElement', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'ZSTQz', 'delete-world-book-button', 'VbeXd', 'image/', 'activeMeetingScriptQueue', 'MScZD', 'user-profile-screen', '.widget-info\x20>\x20div', 'startsWith', 'round', 'input[type=\x22checkbox\x22]:checked', 'summary', 'settings', 'delete-message-button', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20style\x20=\x20\x22padding:\x2015px;\x20', 'lFyvr', ')，已跳过。这不应该发生，数据库可能已损坏。', '”，在那里“', '300%', 'IJKTK', 'chat-reroll-button', 'querySelectorAll', 'CYxuP', '新用户\x20', 'currentlyPlayingIndex', 'add-event-modal', 'image/png', 'onmouseout', 'posts', 'XwlEF', 'Dracm', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'FXrEm', 'meeting-reroll-button', 'width', 'diaryPressTimer', 'log', '\x0a#\x20你的个性（节选）\x0a', '”。\x0a', 'SAABi', 'group-settings-bind-user', '#\x20固定分类列表\x0a[', 'chat-image-button', 'GszEo', 'cardState2', 'diary-prev-button', 'add-world-book-button', 'upload-widget-bg-button', '确定要从圣殿中永久删除《', 'ZbpyH', 'screenX', 'appIconPosition_app-snoop', 'coverId', 'user', 'activeMeetingCharId', 'shiftKey', 'focus', 'QxDHk', '#meeting-view-screen\x20.chat-input-area', '<div\x20class=\x22post-body\x22>', 'snoop-app-back-btn', 'ENkAT', '谁啊我吗', 'ASngs', 'custom_font_ttf', ')\x20的专属时间锚点\x0a', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'ALEZj', 'oBOpw', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'quotedMessage', 'ayDtV', '获取模型失败:\x20', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', '[DONE]', 'SrTge', 'AI\x20试图创建事件，但找不到有效的用户ID。', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'test_post_', 'JfHUR', 'FoYpR', 'gTWRL', '未知搜索', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'event_', 'vertical', '已自动断开与其他人的听歌同步。', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'dZcpx', 'WVwez', '正在执行净化程序...', 'likes', 'pCtuh', 'veuFk', 'NaAKh', 'html-module-container', 'documentElement', 'alignItems', 'CbtRO', 'LrBTU', 'ZrLDK', 'meFPU', '没有角色需要恢复头像，跳过。', '在所有地方的最后一次互动是在**:\x20', '\x20的《', '<\x20div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>', 'gYSxb', 'isGenerating', 'comments', 'FOzlS', 'WAdoG', '.no-action-modal', 'save-friend-circle-button', 'pqsDb', '\x20.app-icon-img', 'REkmn', 'kLZVA', 'var(--text-color)', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'IdpiS', 'HRXdN', 'target', 'dataset', 'ycNCv', '点击选择\x20.lrc', '--primary-hue', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diaries', 'getDate', '\x0a\x0a##\x20世界书条目:\x20', 'pCaeT', 'ASUnY', 'tencent', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'snoop-temp-style', '\x20个成员', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'LVocU', 'character', 'galgame', '图片预览失败:\x20', 'sort', 'mTmOH', 'chat_group_', 'JDXHc', 'ovWrH', 'fhMnV', 'JMRMU', 'back-to-home-from-settings', '”吗？此操作不可撤销。', 'TA正在提笔写日记...', '好友圈数据升级完成，迁移了\x20', 'music-library-item', 'LxhVv', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'MonvN', 'block', 'group-edit-name', 'fNiMS', '742065CWQBQk', 'vpLsb', '\x22\x20的聊天记录吗？此操作不可撤销。', 'confirm-altar-upload-button', 'time', 'FsBPr', 'fwefA', 'indexedDBData', '我来搞定', 'hsMPJ', '\x0a你只扮演【', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', '<\x20div\x20style\x20=\x20\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20', 'pause', '2023-06-01', 'scrollIntoView', 'sprite-slider-scale', '<img\x20id=\x22', 'upload-feed-bg-button', 'abort', 'card-widget', '暂无音乐', 'random', 'diary-input-wrapper', 'iWcrQ', '.slot-filename', 'rgba(0,\x200,\x200,\x200.4)', 'XajrV', 'generativelace.googleapis.com', 'cover_placeholder_', '[发送了表情]', 'activeFriendCircleId', '”，但没找到人)', '-\x20你拍过一张照片，内容是：“', 'mHxna', 'p[data-history-index]', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'JDTkW', 'world-book-checkboxes-container', '加载视奸记忆失败(', '请根据以上所有规则和资料，开始生成内容。', 'SGdmP', '</span><div><div\x20class=\x22description\x22>', '”已创建！', '该角色', 'OTGqI', 'relative', '这本日记本来就是空的，你还想清空什么？', '正在写入新数据...', 'author', 'AMcgX', 'mouseleave', 'toLocaleString', 'BfHYC', 'widget-next-btn', 'fFfzF', '\x0a\x0a#\x20今日消费流水\x0a', 'appIconPosition_', 'expanded', 'galgame-sprite-controls', 'AKSED', 'OTEmV', 'PzxAW', 'raYeY', '已复制到剪贴板！', '-preview', 'max', 'lZoAO', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', 'BurDA', 'isFromLibrary', 'dock', 'tCZYU', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'position', '回复\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'getReader', 'qAAbK', 'event-type-todo', 'content', 'badge-input', 'RSoRK', 'noir_data_migration_v1_complete', 'Eltus', 'xbxIZ', ']。严禁使用列表之外的任何表情名。\x0a', 'style-', '未知商店', '星期一', 'jdkMO', 'smaGO', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', '[AI分享了音乐：', '视奸内容解析失败:', 'categorizedExpenses', 'is-playing', 'widget_card', 'IISLd', 'padStart', 'chat-sticker-button', 'ZwiPX', 'fetch-models-button', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '\x0a-\x20**日记本的上一笔记录是在**:\x20', '净化失败了，哼:\x20', 'nKzCr', '{userName}', '5px', '-\x20**当前精确时间**:\x20', '\x20(当前)', 'KEzpT', '\x22\x20src=\x22', 'ttshc', '哼，这不是图片，你想让我压缩什么？', 'oYwbb', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'qnRLQ', '暗夜紫晶', '生成动态失败:', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 're-record-button', 'wBOMJ', 'FHwNG', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', '的第一次互动。\x0a', 'vndmF', '<\x20p\x20style\x20=\x20\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22\x20>\x20加载失败了，哼。<br>', '在准备API数据时，从IndexedDB读取图片失败:', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', '请先输入\x20API\x20接口地址和密钥。', 'rgba(255,255,255,0.2)', 'eVwwQ', 'AFhtW', 'choice-create-group', 'getItem', 'biuwp', 'avatar', 'accounting-content-area', 'fKfWN', '-\x20你点过一份外卖：“', 'lbgmq', 'app-user-profiles', 'cmSvr', '\x0a\x20\x20\x20\x20<\x20textarea\x20id\x20=\x20\x22snoop-summary-textarea\x22\x20readonly\x20style\x20=\x20\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22\x20>\x20', 'XNqEM', 'svg', '我错了', 'cuUZN', '保存角色失败:', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', '59%', 'backgroundColor', '\x0a-\x20**对话状态**:\x20群里已经有', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'Upgrading\x20database\x20to\x20version\x20', '赞同！渲染效果一级棒！', 'TyWHY', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'drawImage', 'VPuUX', 'sjUMo', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'group-settings-screen', '.avatar', 'FxsJF', 'kngpo', 'IWKsp', 'SMoEu', 'message-bubble-row', 'uJbtI', '20px', 'lt-ui-cover-art', 'eDkvf', 'tmaPY', 'lastTimestamp', 'DxgTn', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'display', 'add-event-backdrop', '大家好像不知道该怎么回复...', 'delete-user-profile-button', '无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'fRUup', 'removeProperty', '##\x20', 'app-diary', '<\x20div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20', 'userId', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', '确定要恢复这个角色的默认立绘位置吗？', 'pEviB', 'keys', 'ctnuh', '兼容模式成功，已将\x20', 'listen-together-ui', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', '用户已删除。', 'OLfrM', 'diary-write-modal', '\x22\x20class=\x22music-library-item-cover\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', '.app-icon-img', '交给我吧', 'backgroundPosition', 'TWtcF', 'eventContent', '小组件背景已更换！', 'lBOPt', 'ftmTh', 'XCPet', '解析存档失败，正在重置:', 'wallpaper-screen', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'modal-mask', '(想转账给“', 'FpyNm', 'ktjIO', '\x0a\x0a#\x20用户的动态\x0a', 'modal-text', '需要至少2个角色才能创建群聊。', 'NVlti', 'pHIEX', 'GAwiS', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'OXJAM', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'SqJxu', 'diary-list-screen', '群聊\x20(', 'altar-slot-audio', 'Creating\x20object\x20store:\x20music_library', 'number', '创建新角色', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'delete-expense-btn', '薄荷水色', 'event-content-input', 'fyXFw', 'put', 'card-input-2', 'apiSettings', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'KibFM', 'characters', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'Assistant', 'group-edit-members', 'snoop-home-clock', 'wb_', 'calendar-day', 'aploW', 'meeting-scene-view', 'query', 'Eegkt', '错误:\x20', 'footprints', 'uGFQw', '找不到角色。', '数据导入成功！应用即将刷新...', '星期五', 'select', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'xcBZX', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'WPQWJ', 'Xcozk', 'sFejo', '用户资料已保存！', 'sprite-resize-handle', 'chat_image_migrated_', '请输入新的群名称：', 'IoOKW', 'lNCTt', '--\x20点击选择\x20--', '最近没有互动记录。', '加载角色\x20', 'kjHCm', 'back-to-home-from-music-library', 'displayUrl', 'DKIUA', '在准备动态回复时，读取图片失败:', 'muKTp', 'group', '\x20个旧头像。', '正在搜索音乐...', 'angry', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '<div\x20id=\x22snoop-dock\x22></div>', 'noir_migration_avatar_v1_complete', 'pointer', 'onclick', 'wUPAE', 'confirm-music-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'ylXaZ', 'gLRpX', 'AtCJE', '这个也是摆设，别点了。', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', 'SogdP', '-\x20**\x20当前精确时间\x20**:\x20', 'var(--text-color-light)', 'BhwdQ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22char-info-wrapper\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'app-world-book', 'ESYzi', 'DxqTR', 'boundUserProfileId', 'cancel-listen-together', 'IwCfG', 'jDAvB', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', 'revokeObjectURL', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x20\x22snoop-app-icon-img\x22\x20>\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'chat-image-input', '最后一次确认，真的要清空所有数据吗？', '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'reset-widgets-position-button', '正在生成中，请稍候...', 'jptcT', '至少要保留一个用户。', 'yvFsC', 'chat_image_', 'readwrite', 'classList', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'ZracM', 'forceWhiteClock', 'play', 'dAUHT', 'result', 'day-number', 'RhJdm', 'signal', '\x20(分享了歌曲:\x20', 'className', '</pre>', 'altar-slot-lyrics', 'kZBmO', 'jhPKd', 'widget_badge', 'fCFyq', 'LyIVW', '\x20添加了新的纪念日：', '\x22\x0a\x20\x20\x20\x20data\x20-\x20log=\x27', 'elbCI', 'HubXY', 'diaryView', 'LwUQT', 'vgtUh', 'DHctP', 'sender', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'insertAdjacentHTML', 'then', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'diary-entries-container', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', 'TVscX', '.listen-together-card', 'countdown-title', '正在翻阅所有档案...', 'novel', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'onload', 'lsyMC', '...', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', '未知角色', 'FUAfH', 'xBZpx', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'get', 'theme-lightness-slider', 'charAt', '<div\x20class=\x22loader-spinner\x22></div><span>', '\x20个旧头像。应用即将刷新。', 'NoirCharacterCard', '确定要删除这个条目吗？此操作不可撤销。', 'worldBooks', 'userProfiles', 'Szxlg', '\x20说：“', '\x20的私聊', '购物记录', '96092aSBHSp', 'Gueji', 'QTYBI', 'AI返回的不是一个数组。', 'lDKLw', 'apply', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'qXGGm', '#FFFFFF', 'toDateString', 'snoop_', 'cancel-transfer-button', '正在为你搬运旧壁纸到新仓库...', 'umaUr', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '歌曲名称', '保存失败:\x20', 'audio', 'nYnya', 'description', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'transfer-backdrop', '错误：找不到签署契约的地方。', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'eITit', 'setMonth', 'accountingLedger', '正在整理…', 'todo-date-title', 'Fctkv', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'transfer-recipient-select', 'XSeRY', 'CuZnl', 'char-edit-avatar-input', 'wSUQI', 'emotion', 'add-user-profile-button', 'catch', 'world-book-edit-content', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', 'KpRck', 'querySelector', 'wrMkw', '\x20条新动态。', 'absolute', 'BYJDU', '用户操作中断了\x20AI\x20响应。', 'review', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'FlTHg', '[用户向\x20', '\x22\x20id=\x22', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'PODvk', 'indexedDBMusicData', '#a4c2f4', 'item_name', 'YkEDW', '切换聊天时发生异步错误:', 'create_event', 'feed', 'listen-together-invite', 'character-settings-button', 'dtDYU', 'currentTime', '</label>\x0a\x20\x20\x20\x20', 'Noir_FileSystem', 'RhqiL', '#a7c7e7', 'post_image_', 'PlwDV', 'group-avatar-preview', 'iRLNS', '确定要删除这个安排吗？此操作不可撤销。', 'ssNmH', 'nbnXg', 'JwVoR', 'opacity', '大家正在赶来回复...', 'sLcVx', 'location_name', 'removeItem', 'QbPEi', 'HqiEl', 'numeric', 'is-exiting-right', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'style', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'OxuZP', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'isAnimatingDiary', 'world-book-screen', 'widgetBgImage', '\x20个模型。', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', '缓存命中:\x20', '解析音乐文件失败:', 'reduce', 'changedTouches', '<p>格式错误</p>', 'vuyNS', 'BlLcw', 'line', '.load-more-btn', ')\x20恢复头像失败:', 'medium', '正在准备图片数据...', '[用户分享了音乐：', 'QkVsQ', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'songId', 'reset-widget-bg-button', 'listen-together-backdrop', 'Gdvaj', 'warki', 'global-player-play-pause-btn', 'DrEJB', '<\x20div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20', 'QosLN', '</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20', 'vuPrK', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', '\x0a\x20\x20\x20\x20绑定用户:\x20', '\x20的遗失头像，正在救援...', 'jrnMf', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'card-image', 'liOKv', 'card-image-2', 'qxDdN', 'timestamp', '---\x20好友圈净化仪式完成\x20---', 'bottom', '8px', 'chat', 'LWGaE', 'lJzTw', '音乐数据升级完成，迁移了\x20', 'SjwYC', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'oItTj', 'AbortError', 'show-chat-view', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', 'pjItJ', '[sticker:', 'JwVLt', 'idnXn', 'gMpON', '-\x20你最近去过：“', 'onupgradeneeded', 'json_object', 'AI似乎没有想出任何新动态。', '\x20时出错，跳过。', '正在打包数据，请稍候...', 'application/json', 'wGxqr', 'upload-music-button', 'back-to-world-book-list', 'quote-message-button', 'rDoBA', 'fCuPZ', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'widget-title', 'cZfjW', 'info', '.screen.active', '最近的足迹', '至少要选择一个圈内成员！', 'app-snoop', 'GWtxM', 'bPWFk', 'fBywK', '28%', 'provider', '\x20到\x20', 'cdZNJ', 'endpoint', 'hcnzt', 'lyrics', '一起听歌', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'frggA', 'rhNzL', '为你骄傲', 'eTgyL', 'full', 'JfCsS', '\x22\x20class=\x22post-image\x22></div>', '15px', 'auto', 'toast', '#group-settings-screen\x20.select-box', 'title', '\x20张旧的音乐封面。', 'clear', 'friend-circle-edit-name', 'rQlCO', 'music-input-song', 'world-book-item', 'diary-modal-textarea', 'PGrgS', 'snoop-dock', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'pEtaW', 'export-all-data-button', '---\x20音乐净化仪式完成\x20---', 'CCedR', 'BFbsn', 'customIcon_', 'getMinutes', 'setAttribute', 'audio-file-input', 'altar-slot-cover', 'gdHbr', 'import-data-input', 'Xmmal', 'BLgoD', 'vykrD', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'friend-circle-title', 'bubble-', '#\x20任务:\x20生成\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'PYCfL', 'oncomplete', '&quot;', 'getContext', 'stretch', '距离「', 'ABZbJ', 'avWQL', 'api-endpoint', 'MEFBM', '全量导出失败:', 'LYPoU', 'json', 'checked', '星期三', 'images', 'googleapis.com', 'YNqtJ', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'xblqK', 'user_', 'jHxkb', 'yhjme', '动态页背景已移除。', 'back-to-home-from-world-book', 'idiUM', 'RgisU', 'from', '\x0a##\x20条目:\x20', 'meeting-message-input', '转给\x20', 'characterName', '-\x20[', 'back-to-circle-list-from-feed', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'galgame-sprite-adjust-ui', 'hxmBL', 'amount', '逗你开心', '#bubble-preview-user', 'back-to-home-from-wallpaper', 'meeting-char-name-header', 'aPMDT', '加载立绘失败:', '正在检查好友圈数据...', 'CDUNJ', '我很脆弱', 'Noir_Backup_', 'mQZcc', 'jOUKS', 'jxGPW', 'OpVxm', 'lt-ui-song-title', 'ytkTz', 'calendar', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'EmBAu', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'reset-card-button', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'chat-transfer-button', 'KLupv', 'error', '\x20账单', 'YawWW', 'image', 'bdTFa', 'eOmuV', 'hIqzQ', 'currentDate', '确定要删除角色“', 'snoop-phone-screen', 'KsIUD', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', 'diary-page-', 'xnKHZ', 'KoBoi', 'XhppW', 'perChatContextLines', '--primary-lightness', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'editing-friend-circle-id', '<div\x20class=\x22post-likes\x22>', 'active', 'xRUzm', '你还没保存这个角色呢，导什么导？', 'clock-color-toggle', 'LhXTS', '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'sBTET', 'PYArl', '喝多了', 'touchstart', '\x0a\x0a#\x20用户资料库\x0a', '正在解析角色卡...', 'ayVsf', 'UxPyO', 'DTdSP', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'meetingView', 'svQVL', 'typing-indicator', '无法解析旧的视奸内容来获取时间戳。', 'canvas', 'gOTCy', 'chat-screen', 'touches', 'chatWallpaper', 'min', 'ncAvz', 'sdLWe', 'home-date', 'CxGMV', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'oOzsf', '确定要删除这笔记录吗？', 'filled', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', '成功向好友圈\x20\x22', 'NtHtC', 'important-day-item', 'post_image_migrated_', 'MlHBN', 'avatarFrameUrl', 'IUbzm', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '对方正在行动中...', 'music-share-card', 'cancel', 'persona', 'yFsJZ', 'rQRip', '<p\x20class=\x22music-post-thought\x22>', 'anleu', 'CvpJg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'YECrF', '<\x20style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20', '.ttf', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'appIconPosition_app-accounting', 'slice', '导出失败了，哼:\x20', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'pLSrH', 'TJBNj', ':\x22\x20或\x22[', '为角色\x20', 'summary-textarea', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'group_bg_', '<span\x20class=\x22description\x22>', 'iBLFN', 'Bgqvl', 'JSON解析失败(', 'OPhGr', 'img', 'ppOIy', '好像有动态了...', 'reply', 'modal-ok', '--widget-cover-image', 'choice-import-character', '未找到可用模型。', 'show', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', 'kmxzg', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '100%', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'lxhgr', 'MFdBC', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', 'YQJQI', '樱花薄粉', 'parentElement', '#snoop-app-view-container\x20.snoop-app-header', 'selectedDate', '.listen-together-song', '好友圈已删除。', 'toString', 'setHours', 'meeting-main-content', 'avatar-wrapper\x20', 'snoop-phone-top-nav', 'hydGl', '[AI向\x20', '星期日', 'opacity\x200.2s\x20ease-in-out', 'setDate', '.todo-item,\x20.important-day-item', 'image_url', 'rELKH', 'https://api.vkeys.cn/v2/music/', 'XUclY', '保存壁纸失败:\x20', 'organize-bill-button', '\x0a#\x20交换日记摘要\x20(你和\x20', '今天一笔账都没有，我整理什么？', 'private', 'JqlPB', 'toggle', 'save-edit-button', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'edit-message-button', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', 'NHagi', 'lyrics-file-input', 'XpFAB', 'JSON\x20解析失败!\x20错误原因:', 'User\x20cancelled', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'jYObO', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'nijZp', 'Ycgnl', 'RsEjw', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', 'snoop-list-screen', 'some', '快点哄我', 'themeHue', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'preview-item', 'transfer', '-\x20你曾经搜索过：“', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'add-friend-circle-button', 'setProperty', 'tHTXn', '内容不能为空！', '.music-post-song-card', 'NqVqN', '\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'accounting-screen', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'NoirCustomFont', '我不想工作', 'mLCHl', '\x27\x0a\x20\x20\x20\x20data\x20-\x20character\x20-\x20name=\x27', '#diary-action-delete', 'transaction', 'reset-badge-button', 'oMHMW', 'remark', 'wyASQ', 'noir_migration_music_v1_complete', 'noir_migration_fc_v1_complete', 'is-entering-from-right', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'diary-entry\x20', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20id\x20=\x20\x22snoop-home-clock\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'contains', 'LolXe', 'border', 'efnNA', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'WFoPo', 'xLuUT', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'MjfSB', 'aBraj', 'url(', 'SHwLh', 'listenTogetherSession', 'ZlnDT', '\x27\x0a\x20\x20\x20\x20data\x20-\x20contact\x20-\x20name=\x27', '\x20转账\x20', '新建好友圈', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', '.char-info-wrapper', 'group-clear-history', 'user-persona', 'ZiweY', 'nPmZF', 'JvuBy', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'KXNpB', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'memberCharacterIds', '已删除。', '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22character-item\x22\x20style\x20=\x20\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'YjUSc', 'XAUeM', '已选择\x20', '桌面已重置，即将刷新...', '”，里面有\x20', 'pending-post-image-preview', 'Zdhwl', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'gqDdc', 'quote-preview-area', '加载聊天失败:\x20', 'PCQKC', '生活服务', '确定要清空群聊\x22', '>>\x20', 'dlAWG', 'OpenAI\x20API\x20错误:\x20', 'KxUZl', 'char-edit-bind-user', '正在检查是否有需要救援的旧头像...', '.choice-modal-backdrop', '\x20\x20-\x20角色ID:\x20', 'createObjectStore', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '#d1d5db', 'AiCrp', 'touchmove', '测试动态已添加！', 'galgame-text', 'isArray', '请输入有效的转账金额！', 'inline-block', 'character-list', 'OyyBv', '获取AI响应失败:', 'DzOaY', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'lQbJE', 'YbBsT', '未知地点', '<div', 'riBlZ', 'pHWFk', '对方正在输入...', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'pWHuM', 'theme-hue-slider', 'back-to-circle-list-from-edit', 'iWjAq', '错误：找不到这首作为“信物”的歌。', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<\x20img\x20src\x20=\x20\x22', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'chat-get-reply-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'cUjoO', 'candidates', 'last_message_preview', 'wfvZS', 'DUIGF', 'QAZmT', 'meetingViewMode', '原始文本:', 'message', 'ylWOE', '近期没有特别安排', 'POST', '\x0a\x20\x20\x20\x20-\x20世界书[', 'substring', 'todo-item-small', 'kCfiC', 'localeCompare', 'set-active-user-button', '-\x20你在“', 'tab-view-ledger', '已恢复默认。', 'post_user_', 'YqxVo', 'UtpRI', 'wMFPa', '动态已清空。', 'events', '包含所有图片和音乐的全量数据已成功导出！', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', 'KvRNR', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'gmOpM', '你的任务是【首次生成】这个应用的内容。', '一拳打爆', '.message.ai', '#bubble-preview-ai', 'gemini', 'oHVwi', 'playableUrl', '真是的，必需的祭品都还没准备好！', '）最新写下的日记内容。Ta写的是：\x0a\x20“', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'includes', 'music', 'nkDny', '<div\x20class=\x22post-timestamp\x22>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20', 'back-to-meeting-list', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'char_sprite_normal_', 'jZzvo', 'abyss', 'NonHF', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'activeQuote', 'snoop-app-icon', 'member-selection-item', 'nZRnv', 'snoop-home-time', 'oqsDO', 'parts', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', '.snoop-main-grid', 'wzqJd', '刚刚发布了一条动态，内容是：“', 'galgame-time', 'user-profile-list-screen', 'XwSec', 'white', 'floor', '好友圈\x20', '\x0a\x0a#\x20关于群聊参与者“', 'postType', 'pre-line', 'NdUdJ', '.listen-together-accept-btn', 'chat_', 'read', '#66b3ff', 'data', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'fragments', 'DCRlP', 'XoZej', 'KkFHe', '\x22>&times;</button></div>', 'FeshQ', '好委屈但是不能哭', 'xeUgd', 'T00:00:00', 'feed-bg-input', 'ZmVzt', 'pqzPj', 'oTVkn', 'getAll', 'MBLtN', 'sender_id', 'cover', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', '名字不能为空！', 'uJSYc', 'music_cover_migrated_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'appendChild', 'sEPDY', '出去玩', 'clipboard', '</span>', 'appIconPosition_app-music-library', 'tag', 'psubj', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'save-user-profile-button', 'char-avatar-frame-url', 'qxidb', '点击选择\x20.jpg\x20或\x20.png', 'fxEnH', '未知用户', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', 'widget-artist', 'groupChatCreate', 'MtaaW', 'card-widget-2', 'VUBja', '正在为你切换新的歌曲...', 'jKnrx', 'Dnbbd', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'Flfvv', 'vtrny', '.diary-delete-btn', 'VecWp', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', '乐于助人的助手', 'SvPTt', '人情红包', 'scrollTop', 'TXObj', 'AI返回了无法识别的数据格式。', 'HnOfo', 'disabled', '</div></div></div>', 'indexOf', 'OhrNX', '#group-settings-screen\x20.selected-options-text', '#\x20总结失败了，可能是记录太长或太复杂。', 'hvYiM', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', ']\x20[image]', '-\x20**\x20状态提示\x20**:\x20你已经有\x20', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'diaryCurrentPage', 'wKrmb', 'all', 'quoted-sender', 'KfPAl', '\x20的图片失败:', '救援头像时出错:', 'preferences', 'RTKqY', 'remove-font-button', 'AybsQ', 'group-chat-name', 'YTIEv', 'event_ai_', '哼，正在开始净化你那被污染的聊天记录...', '正在搬运旧卡片...', '.page-dot', 'app-pages-container', '\x27\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', '已恢复默认字体。', 'PYPqQ', 'FjyxR', 'Mfhjm', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '0\x201px\x203px\x20rgba(0,0,0,0.6)', '成功获取\x20', 'characterEdit', '还没有我的回应可以重新生成哦。', 'sAWDY', 'main', 'execCommand', 'pendingPostAttachments', '加载见面背景失败\x20for\x20', 'right', 'taAYk', 'pHmxU', 'SYjNv', '\x0a-\x20**对话状态**:\x20群里在', '-\x20**你与', 'contact_name', 'tPErE', 'CmZsi', 'NIIBI', 'XSahq', 'aecjN', 'chats', '】的日记本已被清空。', 'listen-together-song-list', 'snoop-log-back-btn', 'app-settings', 'kind', 'onloadend', 'wants', 'ZwnwN', 'assign', 'cost', 'createElementNS', 'YEjvo', 'dAYYB', 'ZiXxa', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'toggle-meeting-view-button', 'nmOES', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'ZjbiR', '确定要删除群聊“', 'edit-message-textarea', '无法从\x20IndexedDB\x20加载聊天图片:', 'xHTYQ', 'prepend', 'LHnbL', '</span><span\x20class=\x22unit\x22>天</span>', 'is-today', 'appIconPosition_app-settings', '\x0a##\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', 'ddUXA', 'music-screen', 'group-delete', '群聊「', 'back-to-chat-list', 'header-actions', 'modal-root', 'api-key', 'originalExpenses', '收到的原始、有问题的文本:', 'group-bg-preview', '一个人可怜吃饭', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'QuoQd', 'qoJnd', '.app-icon', 'ydfPH', 'FjChY', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', '净化音乐封面时出错，真是的。', '.custom-multiselect\x20.select-box', 'ZEqkT', 'lKutD', '小时前），可以简单问候一下对方现在的状态。\x0a', 'back-to-home-from-calendar', 'speaker-user', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', '找不到角色信息。', 'jLUHp', 'odgrs', 'YOudo', '复制失败了，哼。', '\x20条动态...', 'app-wallpaper', 'tkhBi', 'timeupdate', '.message.user', 'cXQSw', 'KwJig', 'contactName', 'Enter', 'innerHTML', 'src', ',\x20resetting.', 'AI未能返回有效的JSON对象。', 'snoop_cache', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'end', 'iuhVZ', 'objectStore', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', '\x0a\x20\x20近期记忆:\x0a', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'url', 'BpHlf', 'flexDirection', 'translateX(-50%)', '说了是摆设啦，笨蛋。', 'KrajS', 'RQmIr', 'back-to-home-from-meeting-list', '好友圈净化完成，正在重新存档...', 'mousedown', '[表情]', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'version', '.snoop-clear-btn', 'INSOK', '创建新用户', '条目名称和内容都不能为空！', 'href', 'URZmw', '<div\x20class=\x22post-comments-container\x22>', '\x0a-\x20人设:\x20', '无标题笔记', 'amXzX', 'tmAvD', '的个人专属世界观设定\x0a', '群聊名称不能为空！', 'defaultPrevented', 'diary-page', 'choice-create-character', 'blob', 'linkedWorldBookIds', 'add', 'LNuKy', 'WKTEY', '的日记本', '哼，正在净化你那些超重的音乐分享记录...', '被萌到', 'friendCircles', 'WNyjJ', 'snoop-home-date', 'code', 'long', 'rhJrg', 'gyvme', 'music-input-modal', '确定要恢复默认字体吗？', 'customStickers', 'edJtt', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', '</p>', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'mXnsc', '正在清空旧数据...', 'next-month-btn', 'anthropic', 'friendCircleEdit', 'ceil', 'NvgFQ', 'pDhGN', '被你撩到', '1.4', 'fcZXq', 'LNBLW', 'confirm-transfer-button', 'gtOdi', 'canplaythrough', '保存壁纸失败:', '467085aIyGiU', 'Gemini\x20API\x20Error:\x20', '浏览器', 'save-char-button', 'gyxue', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'snoopList', '#\x20记录是空的，没什么好总结的。', 'AQMtq', 'wwruQ', 'today-todo-list', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '加载已保存字体失败:', '15px\x2020px', 'DfmRa', 'font-input', '未命名', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', '群聊“', 'loading', 'beforeend']; _0xce54 = function () { return _0x32c208; }; return _0xce54(); } var _0x5f0a6c, _0x1720bd = null; let _0x47fa25 = [], _0x143ddb = ![], _0x111a3a = { 'x': 0x0, 'y': 0x0 }; function _0x15f95d(_0xf675ec) { const _0x26039e = _0x3011a4; return (_0x5f0a6c?.[_0x26039e(0x723)] || [])[_0x26039e(0x3be)](_0x25170d => _0x25170d['id'] === _0xf675ec); } const _0x596c9f = 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', _0x6ca07b = _0x3011a4(0x769), _0x25d84a = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', _0x1621d0 = [{ 'name': _0x3011a4(0xc14), 'url': _0x3011a4(0x295) }, { 'name': '崩溃', 'url': _0x3011a4(0x3cc) }, { 'name': '生病', 'url': _0x3011a4(0x2bf) }, { 'name': '工作', 'url': _0x3011a4(0x724) }, { 'name': _0x3011a4(0x8c8), 'url': 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg' }, { 'name': '弱小委屈但凶恶', 'url': _0x3011a4(0x843) }, { 'name': '吃薯条', 'url': _0x3011a4(0x524) }, { 'name': '期待', 'url': _0x3011a4(0xa2f) }, { 'name': '喜欢', 'url': _0x3011a4(0x24a) }, { 'name': _0x3011a4(0xb31), 'url': _0x3011a4(0x47d) }, { 'name': '有点生气', 'url': 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg' }, { 'name': '委屈', 'url': _0x3011a4(0x1f9) }, { 'name': '加油', 'url': 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg' }, { 'name': '对的', 'url': 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg' }, { 'name': '不满', 'url': _0x3011a4(0x92b) }, { 'name': _0x3011a4(0x48f), 'url': 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg' }, { 'name': '猫猫撒娇', 'url': _0x3011a4(0x364) }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg' }, { 'name': '平静', 'url': _0x3011a4(0x280) }, { 'name': '咬你', 'url': _0x3011a4(0xb68) }, { 'name': '咱俩天下第一好', 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg' }, { 'name': '摸鱼', 'url': _0x3011a4(0x7db) }, { 'name': '委屈那我歇了', 'url': 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg' }, { 'name': _0x3011a4(0xbc7), 'url': _0x3011a4(0x2af) }, { 'name': _0x3011a4(0xb48), 'url': _0x3011a4(0xa69) }, { 'name': _0x3011a4(0x86c), 'url': _0x3011a4(0x311) }, { 'name': '刷我的卡', 'url': _0x3011a4(0xae3) }, { 'name': '啥意思捏', 'url': _0x3011a4(0xaf1) }, { 'name': _0x3011a4(0xa49), 'url': 'https://sharkpan.xyz/f/djyi8/1en214.jpg' }, { 'name': _0x3011a4(0x3bc), 'url': _0x3011a4(0x5cf) }, { 'name': _0x3011a4(0x303), 'url': _0x3011a4(0x5d2) }, { 'name': _0x3011a4(0x360), 'url': _0x3011a4(0x2c0) }, { 'name': _0x3011a4(0x8c0), 'url': _0x3011a4(0xc34) }, { 'name': _0x3011a4(0xb9a), 'url': _0x3011a4(0xb82) }, { 'name': _0x3011a4(0x45d), 'url': _0x3011a4(0xb56) }, { 'name': '对不起', 'url': _0x3011a4(0xb05) }, { 'name': _0x3011a4(0x6f8), 'url': _0x3011a4(0x847) }, { 'name': _0x3011a4(0x47a), 'url': 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg' }, { 'name': _0x3011a4(0x538), 'url': _0x3011a4(0xb3d) }, { 'name': _0x3011a4(0x978), 'url': _0x3011a4(0x9ee) }, { 'name': _0x3011a4(0x488), 'url': _0x3011a4(0xb97) }, { 'name': _0x3011a4(0xa13), 'url': 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg' }, { 'name': _0x3011a4(0x470), 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': _0x3011a4(0x5cb), 'url': 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg' }, { 'name': '很好哦', 'url': _0x3011a4(0x85a) }, { 'name': '甜蜜地和你聊天', 'url': _0x3011a4(0x4b3) }, { 'name': '不高兴撒娇', 'url': _0x3011a4(0x6f2) }, { 'name': _0x3011a4(0xb86), 'url': _0x3011a4(0x689) }, { 'name': _0x3011a4(0x98a), 'url': _0x3011a4(0x8bc) }, { 'name': _0x3011a4(0x4c4), 'url': _0x3011a4(0x835) }, { 'name': _0x3011a4(0x634), 'url': 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg' }, { 'name': '我是女仆', 'url': 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg' }, { 'name': '等你', 'url': 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg' }, { 'name': _0x3011a4(0xae2), 'url': _0x3011a4(0x75a) }, { 'name': _0x3011a4(0x420), 'url': _0x3011a4(0x80f) }, { 'name': '喝酒', 'url': _0x3011a4(0x6ae) }, { 'name': _0x3011a4(0x8f7), 'url': 'https://sharkpan.xyz/f/Ganul/78iwli.jpg' }, { 'name': '呜呜', 'url': _0x3011a4(0xbab) }, { 'name': _0x3011a4(0x870), 'url': 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg' }, { 'name': _0x3011a4(0x6c0), 'url': _0x3011a4(0x46d) }, { 'name': _0x3011a4(0xa5b), 'url': 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg' }, { 'name': '请看是我', 'url': 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg' }, { 'name': _0x3011a4(0x30d), 'url': _0x3011a4(0x37c) }], _0x2568dc = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x3011a4(0x71b), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x3011a4(0x94a), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x3011a4(0x6a3), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x3011a4(0x582)](_0x3011a4(0xc03), () => { const _0x2481c4 = _0x3011a4, _0x161c02 = document[_0x2481c4(0x463)](_0x2481c4(0x6bb)), _0x53f0bf = document[_0x2481c4(0x463)](_0x2481c4(0x8d7)), _0x1b1e35 = document[_0x2481c4(0x463)](_0x2481c4(0x2d2)), _0x465408 = document['getElementById'](_0x2481c4(0x7c8)), _0x24e893 = document[_0x2481c4(0x463)](_0x2481c4(0xb4c)), _0x29b128 = document[_0x2481c4(0x463)](_0x2481c4(0x7be)), _0x20d699 = document[_0x2481c4(0x463)](_0x2481c4(0x487)), _0x39a4cc = document[_0x2481c4(0x463)](_0x2481c4(0x7d2)), _0x49d51f = document[_0x2481c4(0x463)]('transfer-amount-input'), _0x1d09c4 = document[_0x2481c4(0x463)](_0x2481c4(0x5a1)), _0x1141af = document[_0x2481c4(0x463)]('chat-summarize-button'), _0x1f8cc1 = document['getElementById']('summarize-modal'), _0x25eb83 = document[_0x2481c4(0x463)](_0x2481c4(0x37f)), _0xfab423 = document['getElementById'](_0x2481c4(0x930)), _0x52ce38 = document['getElementById'](_0x2481c4(0xbe3)), _0x62473f = document[_0x2481c4(0x463)](_0x2481c4(0x251)), _0x5ac9e7 = document[_0x2481c4(0x463)]('char-edit-wallpaper-preview'), _0x1db2f3 = document[_0x2481c4(0x463)]('char-edit-wallpaper-input'), _0x575e79 = document[_0x2481c4(0x463)]('char-edit-offline-bg-preview'), _0x41f051 = document[_0x2481c4(0x463)]('char-edit-offline-bg-input'), _0x841eb8 = document[_0x2481c4(0x463)](_0x2481c4(0x93e)), _0x2cba09 = document[_0x2481c4(0x463)](_0x2481c4(0x563)), _0x377d9e = document['getElementById']('export-char-button'), _0x478961 = document[_0x2481c4(0x463)]('upload-font-button'), _0x1b0979 = document[_0x2481c4(0x463)](_0x2481c4(0xa93)), _0x5d6f03 = document['getElementById'](_0x2481c4(0xb60)), _0x4777e1 = document[_0x2481c4(0x463)]('font-preview-text'); async function _0x57bad1(_0x3b38d3) { const _0x167cb4 = _0x2481c4; if (_0x167cb4(0x4a9) !== _0x167cb4(0x4a9)) { if (_0x49d495[_0x167cb4(0x606)][_0x167cb4(0x776)][_0x167cb4(0x999)]('delete-expense-btn')) { const _0x2c5fe0 = _0x16ed93[_0x167cb4(0x606)]['dataset']['id']; _0x1f85b0(_0x167cb4(0x90f))['then'](_0x3f0b9d => { _0x3f0b9d && _0x566703(_0x2c5fe0); }); } } else try { if ('sjJkZ' !== _0x167cb4(0x4a1)) { if (_0x57a08d[_0x167cb4(0x606)][_0x167cb4(0x23b)](_0x167cb4(0xb80))) return; const _0x4b5296 = _0x33fce7[_0x167cb4(0x463)]('widget-play-pause-btn'); _0x4b5296 && _0x4b5296['click'](); } else { const _0x50ba55 = URL[_0x167cb4(0x51e)](_0x3b38d3), _0x1578f1 = _0x167cb4(0x989), _0x2bd28b = _0x167cb4(0x497) + _0x1578f1 + _0x167cb4(0x269) + _0x50ba55 + _0x167cb4(0x74e); _0x2d365c[_0x167cb4(0xb00)] = _0x2bd28b, document[_0x167cb4(0x5ed)]['style']['setProperty'](_0x167cb4(0x3aa), '\x27' + _0x1578f1 + '\x27'), _0x4777e1[_0x167cb4(0x356)] = _0x167cb4(0x480); } } catch (_0x587e58) { console[_0x167cb4(0x8d9)](_0x167cb4(0x56b), _0x587e58), _0x24537c(_0x167cb4(0x4c5)); } } async function _0x1c62a2() { const _0x4ef0a2 = _0x2481c4; if (_0x4ef0a2(0x521) === _0x4ef0a2(0x521)) try { const _0x56e2ee = await _0x393cae(_0x4ef0a2(0x5cd)); _0x56e2ee && ('TupEv' === 'TupEv' ? (console[_0x4ef0a2(0x5b1)]('检测到已保存的字体，正在应用...'), await _0x57bad1(_0x56e2ee)) : _0x491384[_0x4ef0a2(0x5b1)](_0x4ef0a2(0x816) + _0xcea928)); } catch (_0x35846f) { console[_0x4ef0a2(0x8d9)](_0x4ef0a2(0xb5d), _0x35846f); } else _0x128d3b = _0xfc37ca['touches'][0x0][_0x4ef0a2(0x3b8)], _0x47d6d9 = _0x51c2d0[_0x4ef0a2(0x906)][0x0][_0x4ef0a2(0x37a)], _0x30cd11 = !![], _0xefc9fa = ''; } async function _0x4d8800(_0x5d8fe2) { const _0x3cfd8b = _0x2481c4; if (_0x3cfd8b(0x893) === _0x3cfd8b(0x893)) { const _0x24be66 = _0x5d8fe2['target'][_0x3cfd8b(0x4b6)][0x0]; if (!_0x24be66 || !_0x24be66[_0x3cfd8b(0x3b3)][_0x3cfd8b(0x3ae)]()[_0x3cfd8b(0x3fd)](_0x3cfd8b(0x926))) { if ('xcKCj' !== 'FUNhP') { _0x24537c('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else return ''; } _0x2aa27a(!![], '正在铭刻字体...'); try { _0x3cfd8b(0x80e) === 'SkrTl' ? _0x2d515d[_0x3cfd8b(0x1e6)](_0x1d9ae5['id']) : (await _0x4d5a5e(_0x3cfd8b(0x5cd), _0x24be66), await _0x57bad1(_0x24be66), _0x24537c('字体更换成功！')); } catch (_0x13a0e7) { _0x3cfd8b(0xbfd) !== _0x3cfd8b(0x6bc) ? _0x24537c(_0x3cfd8b(0x3e0) + _0x13a0e7[_0x3cfd8b(0x9fa)]) : _0x436f68[_0x3cfd8b(0x8dc)] = _0x9648f3; } finally { if (_0x3cfd8b(0x306) !== _0x3cfd8b(0x306)) { const _0x42c48a = _0x10d3fa[_0x3cfd8b(0x463)]('today-todo-list'); if (!_0x42c48a) return; const _0x36d112 = _0x157cdf(), _0x503573 = _0x6ee662[_0x3cfd8b(0x3dc)][_0x3cfd8b(0x216)](_0x1c6ae5 => _0x1c6ae5[_0x3cfd8b(0x4d0)] === _0x36d112 && _0x1c6ae5[_0x3cfd8b(0xc02)] === _0x3cfd8b(0x57c)); _0x42c48a['innerHTML'] = '', _0x503573[_0x3cfd8b(0x55b)] > 0x0 ? _0x503573[_0x3cfd8b(0xbe4)](_0x208c2b => { const _0x5b6cb9 = _0x3cfd8b, _0x58048e = _0x19e062[_0x5b6cb9(0x58b)](_0x5b6cb9(0xbdf)); _0x58048e[_0x5b6cb9(0x781)] = 'todo-item-small', _0x58048e[_0x5b6cb9(0x356)] = _0x208c2b['content'], _0x42c48a['appendChild'](_0x58048e); }) : _0x42c48a['innerHTML'] = _0x3cfd8b(0xac7); } else _0x2aa27a(![]), _0x5d6f03[_0x3cfd8b(0x202)] = ''; } } else { const _0x39ad94 = _0x5d52a6['trim'](); if (!_0x39ad94 || !_0x5a963e[_0x3cfd8b(0x504)]) return; let _0x210cdc = _0x2e8c9f[_0x3cfd8b(0x60c)]['find'](_0x461da1 => _0x461da1[_0x3cfd8b(0xba0)] === _0x486503[_0x3cfd8b(0x504)]); !_0x210cdc && (_0x210cdc = { 'characterId': _0x1766e7[_0x3cfd8b(0x504)], 'entries': [] }, _0x1b4fdf[_0x3cfd8b(0x60c)][_0x3cfd8b(0x1e6)](_0x210cdc)); _0x210cdc[_0x3cfd8b(0x1d7)][_0x3cfd8b(0x1e6)]({ 'timestamp': _0x442f6d[_0x3cfd8b(0xb71)](), 'author': _0x3cfd8b(0x5c2), 'content': _0x39ad94 }), _0x394f4e(); const _0xce3160 = _0x210cdc[_0x3cfd8b(0x1d7)][_0x3cfd8b(0x55b)]; _0x52c5ae[_0x3cfd8b(0xa8a)] = _0x356ea3[_0x3cfd8b(0xb45)](_0xce3160 / 0x2) - 0x1, _0x62870b(); } } async function _0x5b63cf() { const _0x37f9e = _0x2481c4; if (_0x37f9e(0x4e7) !== 'lRbKG') { const _0x796182 = await _0x1ec207(_0x37f9e(0xb3a)); if (_0x796182) try { await _0x15bd83(_0x37f9e(0x5cd)), _0x2d365c[_0x37f9e(0xb00)] = '', document[_0x37f9e(0x5ed)][_0x37f9e(0x80c)][_0x37f9e(0x6e6)](_0x37f9e(0x3aa)), _0x4777e1['textContent'] = _0x37f9e(0xbe8), _0x24537c(_0x37f9e(0xa9d)); } catch (_0x3e000a) { _0x24537c(_0x37f9e(0xb91) + _0x3e000a[_0x37f9e(0x9fa)]); } } else { const _0x166ad2 = _0x55e283(_0x4e0a9f['id']), _0x2ce494 = _0x166ad2[_0x37f9e(0x55b)] > 0x0 ? _0x166ad2[_0x166ad2[_0x37f9e(0x55b)] - 0x1] : null; return { 'chat': _0x44c1a6, 'history': _0x166ad2, 'lastTimestamp': _0x2ce494 ? _0x2ce494[_0x37f9e(0x83a)] : 0x0 }; } } function _0x2ad4cb() { const _0x4d2289 = _0x2481c4, _0x14cf87 = document[_0x4d2289(0x463)](_0x4d2289(0x9e8)); if (!_0x14cf87) return; const _0x26b1f2 = localStorage[_0x4d2289(0x6b4)](_0x4d2289(0x979)) || '35'; document['documentElement'][_0x4d2289(0x80c)][_0x4d2289(0x981)](_0x4d2289(0x60a), _0x26b1f2), _0x14cf87[_0x4d2289(0x202)] = _0x26b1f2, _0x14cf87['addEventListener']('input', () => { const _0x25d66a = _0x4d2289, _0x5ccb33 = _0x14cf87[_0x25d66a(0x202)]; document['documentElement'][_0x25d66a(0x80c)]['setProperty'](_0x25d66a(0x60a), _0x5ccb33), localStorage['setItem']('themeHue', _0x5ccb33), _0x116570(); }); } function _0x59367f() { const _0x5e3b7b = _0x2481c4; if (_0x5e3b7b(0xba5) === _0x5e3b7b(0xba5)) { const _0x5c869e = document['getElementById'](_0x5e3b7b(0x7a7)); if (!_0x5c869e) return; const _0x4aa5e8 = localStorage[_0x5e3b7b(0x6b4)](_0x5e3b7b(0x3ec)) || '80'; document[_0x5e3b7b(0x5ed)][_0x5e3b7b(0x80c)]['setProperty'](_0x5e3b7b(0x8ea), _0x4aa5e8 + '%'), _0x5c869e[_0x5e3b7b(0x202)] = _0x4aa5e8, _0x5c869e[_0x5e3b7b(0x582)]('input', () => { const _0x51bb08 = _0x5e3b7b; if (_0x51bb08(0x217) !== _0x51bb08(0x217)) _0x548b62[_0x51bb08(0x31d)] = { 'response_mime_type': _0x51bb08(0x853) }; else { const _0x20285d = _0x5c869e[_0x51bb08(0x202)]; document[_0x51bb08(0x5ed)][_0x51bb08(0x80c)][_0x51bb08(0x981)](_0x51bb08(0x8ea), _0x20285d + '%'), localStorage[_0x51bb08(0x246)](_0x51bb08(0x3ec), _0x20285d), _0x116570(); } }); } else _0x472d20(_0x2f3ec5), _0x4bd982(); } function _0x116570() { const _0x17e02d = _0x2481c4, _0x57de06 = document[_0x17e02d(0x463)](_0x17e02d(0x296)); if (!_0x57de06) return; if (_0x5f0a6c[_0x17e02d(0xa91)][_0x17e02d(0x779)]) _0x57de06[_0x17e02d(0x80c)]['color'] = _0x17e02d(0x7bb), _0x57de06['style']['textShadow'] = '0\x202px\x208px\x20rgba(0,0,0,0.4)'; else { if (_0x17e02d(0x4cf) === _0x17e02d(0x4cf)) _0x57de06[_0x17e02d(0x80c)][_0x17e02d(0x414)] = _0x17e02d(0x602), _0x57de06[_0x17e02d(0x80c)][_0x17e02d(0x21e)] = 'none'; else { const _0x446bcf = _0x120b2a[_0x17e02d(0x51e)](_0x2cd867); _0x5dae91[_0x17e02d(0x80c)][_0x17e02d(0x4b2)] = _0x17e02d(0x205) + _0x446bcf + '\x27)'; } } } function _0x1d366f() { const _0x312d44 = _0x2481c4, _0x553e0b = document['getElementById'](_0x312d44(0x8f2)); if (!_0x553e0b) return; _0x553e0b['checked'] = _0x5f0a6c[_0x312d44(0xa91)][_0x312d44(0x779)] || ![], _0x553e0b[_0x312d44(0x582)](_0x312d44(0x236), () => { const _0x211634 = _0x312d44; _0x5f0a6c['preferences'][_0x211634(0x779)] = _0x553e0b['checked'], _0x5c772f(), _0x116570(); }); } _0x377d9e['addEventListener'](_0x2481c4(0x3bf), _0x43741d), _0x841eb8[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x3b63aa = _0x2481c4; _0xb82e77(), _0x2cba09[_0x3b63aa(0x3bf)](); }), _0x2cba09[_0x2481c4(0x582)]('change', _0x1a634c); const _0x533005 = { 'home': document['getElementById'](_0x2481c4(0x335)), 'chat': document[_0x2481c4(0x463)](_0x2481c4(0x905)), 'settings': document[_0x2481c4(0x463)](_0x2481c4(0x366)), 'userProfile': document['getElementById'](_0x2481c4(0x593)), 'characterEdit': document[_0x2481c4(0x463)]('character-edit-screen'), 'groupChatCreate': document['getElementById']('group-chat-create-screen'), 'wallpaper': document[_0x2481c4(0x463)](_0x2481c4(0x701)), 'worldBook': document['getElementById'](_0x2481c4(0x812)), 'worldBookEditor': document[_0x2481c4(0x463)]('world-book-editor-screen'), 'groupSettings': document['getElementById'](_0x2481c4(0x6d0)), 'music': document['getElementById'](_0x2481c4(0xad8)), 'friendCircleList': document[_0x2481c4(0x463)](_0x2481c4(0x43e)), 'friendCircleEdit': document[_0x2481c4(0x463)](_0x2481c4(0x544)), 'meetingList': document[_0x2481c4(0x463)](_0x2481c4(0x1d3)), 'meetingView': document[_0x2481c4(0x463)](_0x2481c4(0x3b6)), 'userProfileList': document[_0x2481c4(0x463)](_0x2481c4(0xa34)), 'diaryList': document['getElementById'](_0x2481c4(0x712)), 'diaryView': document['getElementById']('diary-view-screen'), 'musicLibrary': document[_0x2481c4(0x463)](_0x2481c4(0x233)), 'musicUploadAltar': document[_0x2481c4(0x463)](_0x2481c4(0x55c)), 'accounting': document[_0x2481c4(0x463)](_0x2481c4(0x987)), 'snoopList': document[_0x2481c4(0x463)](_0x2481c4(0x976)), 'snoopPhone': document[_0x2481c4(0x463)](_0x2481c4(0x8e2)), 'calendar': document['getElementById']('calendar-screen') }, _0x4ee5aa = document[_0x2481c4(0x463)](_0x2481c4(0x63e)), _0x2125ea = document[_0x2481c4(0x463)](_0x2481c4(0xa4c)), _0x50297c = document['getElementById'](_0x2481c4(0x20d)), _0x1873a8 = document[_0x2481c4(0x463)](_0x2481c4(0xaf8)), _0x14b6b6 = document[_0x2481c4(0x463)](_0x2481c4(0x760)), _0x151c2d = document['getElementById'](_0x2481c4(0x8c2)), _0x3ddd20 = document[_0x2481c4(0x463)]('wallpaper-input'), _0x507f19 = document[_0x2481c4(0x463)](_0x2481c4(0x1dc)); document[_0x2481c4(0x463)](_0x2481c4(0x4c7))[_0x2481c4(0x582)](_0x2481c4(0x3bf), async () => { const _0x446f54 = _0x2481c4, _0x4902b4 = await _0x1ec207(_0x446f54(0x53d)); if (_0x4902b4) { localStorage['removeItem'](_0x446f54(0x50c)), localStorage[_0x446f54(0x805)](_0x446f54(0x321)), localStorage[_0x446f54(0x805)]('clockPosition'), localStorage[_0x446f54(0x805)]('musicWidgetPosition'); const _0x42c632 = []; for (let _0x195a1a = 0x0; _0x195a1a < localStorage['length']; _0x195a1a++) { const _0x1e5c59 = localStorage['key'](_0x195a1a); _0x1e5c59 && _0x1e5c59[_0x446f54(0x595)](_0x446f54(0x665)) && _0x42c632[_0x446f54(0x1e6)](_0x1e5c59); } _0x42c632[_0x446f54(0xbe4)](_0x557ddc => localStorage['removeItem'](_0x557ddc)), await _0x4d5a5e('wallpaper_main', await _0x32e14c(_0x446f54(0x9a0))), _0x24537c(_0x446f54(0x9bc)), setTimeout(() => location[_0x446f54(0x4df)](), 0x5dc); } }); const _0x1afa1b = document[_0x2481c4(0x463)]('add-choice-modal'), _0x33cff2 = document[_0x2481c4(0x463)](_0x2481c4(0x2d9)), _0x4c565b = document[_0x2481c4(0x463)](_0x2481c4(0xb29)), _0x9abd70 = document[_0x2481c4(0x463)](_0x2481c4(0x6b3)), _0x164348 = document[_0x2481c4(0x463)](_0x2481c4(0x2dd)), _0x1d1a08 = document[_0x2481c4(0x463)](_0x2481c4(0x264)), _0x1cf8f3 = document[_0x2481c4(0x463)]('create-group-chat-button'), _0x9caf26 = document[_0x2481c4(0x463)](_0x2481c4(0xa95)), _0x242a0e = document[_0x2481c4(0x463)](_0x2481c4(0x279)), _0x198ba4 = document[_0x2481c4(0x463)](_0x2481c4(0xb6e)), _0x2599b1 = document[_0x2481c4(0x463)](_0x2481c4(0xabc)), _0x331b05 = document[_0x2481c4(0x463)](_0x2481c4(0x621)), _0x2cfc44 = document['getElementById'](_0x2481c4(0x568)), _0x1b4a5b = document[_0x2481c4(0x463)](_0x2481c4(0xadb)), _0x589af9 = document[_0x2481c4(0x463)]('back-to-settings-from-user-profile'), _0x5534c8 = document[_0x2481c4(0x463)]('back-to-char-select-from-edit'), _0x287213 = document[_0x2481c4(0x463)](_0x2481c4(0x9da)), _0x5022ce = document[_0x2481c4(0x463)]('add-chat-button'), _0x299857 = document[_0x2481c4(0x463)](_0x2481c4(0x905)), _0x5ea706 = document[_0x2481c4(0x463)](_0x2481c4(0xbff)), _0x44e53d = document[_0x2481c4(0x463)]('chat-message-input'), _0x53e0e3 = document[_0x2481c4(0x463)]('chat-send-button'), _0x41cba0 = document[_0x2481c4(0x463)](_0x2481c4(0x9ef)), _0x1a0828 = document[_0x2481c4(0x463)](_0x2481c4(0x9c3)), _0xb60571 = document[_0x2481c4(0x463)]('quote-preview-sender'), _0x47185f = document['getElementById'](_0x2481c4(0x36b)), _0x8deae3 = document[_0x2481c4(0x463)](_0x2481c4(0x330)), _0xae8f92 = document[_0x2481c4(0x463)](_0x2481c4(0x2b3)), _0x220b5a = document['getElementById'](_0x2481c4(0x691)), _0x23099c = document['getElementById'](_0x2481c4(0x32b)), _0x2f962c = document[_0x2481c4(0x463)](_0x2481c4(0x5b7)), _0x4a19c2 = document['getElementById'](_0x2481c4(0x76b)), _0x204738 = document[_0x2481c4(0x463)](_0x2481c4(0x7f2)), _0x4ffd7b = document['getElementById'](_0x2481c4(0x292)), _0x4b7ddc = document[_0x2481c4(0x463)](_0x2481c4(0x8a1)), _0x4529a5 = document['getElementById'](_0x2481c4(0xade)), _0x469a0f = document['getElementById']('api-model'), _0x360a89 = document[_0x2481c4(0x463)]('save-api-settings-button'), _0xbecd1d = document[_0x2481c4(0x463)](_0x2481c4(0x693)), _0x4d41e3 = document[_0x2481c4(0x463)]('model-dropdown'), _0x24a16e = document[_0x2481c4(0x463)](_0x2481c4(0x334)), _0x5c642c = document[_0x2481c4(0x463)]('user-name'), _0x5d06de = document['getElementById'](_0x2481c4(0x4af)), _0x1db3b7 = document[_0x2481c4(0x463)]('user-avatar-input'), _0x77ebac = document[_0x2481c4(0x463)](_0x2481c4(0x9ae)), _0x1610e8 = document[_0x2481c4(0x463)](_0x2481c4(0xa62)), _0xaf7d6b = document[_0x2481c4(0x463)](_0x2481c4(0xc11)), _0x2a7e0d = document[_0x2481c4(0x463)](_0x2481c4(0x2e6)), _0x5e4a70 = document[_0x2481c4(0x463)](_0x2481c4(0x499)), _0x3c0a70 = document[_0x2481c4(0x463)]('char-edit-remark'), _0x9b361e = document[_0x2481c4(0x463)]('char-edit-avatar-preview'), _0x48dc6b = document[_0x2481c4(0x463)](_0x2481c4(0x7d5)), _0x59c216 = document[_0x2481c4(0x463)](_0x2481c4(0x30c)), _0x56fed = document[_0x2481c4(0x463)](_0x2481c4(0xb53)), _0xb0945 = document[_0x2481c4(0x463)]('edit-clear-history-button'), _0x42c553 = document[_0x2481c4(0x463)](_0x2481c4(0x2dc)); let _0x4fe674 = null; const _0xd360ed = _0x2481c4(0x9f1), _0x4cb6e5 = '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a'; _0x5f0a6c = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x5c772f() { const _0x9f809c = _0x2481c4; try { if (_0x9f809c(0x8c4) === 'uSjrw') _0x407b1a[_0x9f809c(0x7ad)] = _0xf8e256[_0x9f809c(0xb2b)]['map'](_0x532bd2 => _0xc0e6b9[_0x9f809c(0x7ad)][_0x9f809c(0x3be)](_0x459fcb => _0x459fcb['id'] === _0x532bd2))['filter'](_0x53a6a1)[_0x9f809c(0x575)](_0x1568d4 => ({ 'name': _0x1568d4[_0x9f809c(0x3b3)], 'content': _0x1568d4[_0x9f809c(0x67c)] })); else { const _0x3b0647 = _0x5f0a6c[_0x9f809c(0x723)][_0x9f809c(0x575)](_0x1aad99 => { const _0x36978a = _0x9f809c, _0x4a34d3 = { ..._0x1aad99 }; return _0x4a34d3[_0x36978a(0x6b6)] && _0x4a34d3['avatar'][_0x36978a(0x595)](_0x36978a(0x28a)) && delete _0x4a34d3[_0x36978a(0x6b6)], _0x4a34d3; }), _0x4202b8 = { 'version': 0x1, 'characters': _0x3b0647, 'worldBooks': _0x5f0a6c[_0x9f809c(0x7ad)], 'chats': _0x5f0a6c['chats'], 'apiSettings': _0x5f0a6c[_0x9f809c(0x720)], 'preferences': _0x5f0a6c[_0x9f809c(0xa91)], 'activeChatId': _0x5f0a6c['activeChatId'], 'diaries': _0x5f0a6c[_0x9f809c(0x60c)], 'friendCircles': _0x5f0a6c['friendCircles'], 'activeFriendCircleId': _0x5f0a6c[_0x9f809c(0x64b)], 'userProfiles': _0x5f0a6c[_0x9f809c(0x7ae)], 'activeUserProfileId': _0x5f0a6c['activeUserProfileId'], 'accountingData': _0x5f0a6c[_0x9f809c(0xb9e)], 'accountingLedger': _0x5f0a6c['accountingLedger'], 'calendarEvents': _0x5f0a6c[_0x9f809c(0x3dc)] }; localStorage['setItem']('appState', JSON[_0x9f809c(0x38f)](_0x4202b8)); } } catch (_0xede63d) { if (_0x9f809c(0x4bd) !== _0x9f809c(0x740)) console[_0x9f809c(0x8d9)](_0x9f809c(0x37d), _0xede63d), _0x24537c(_0x9f809c(0x6e3)); else { const _0x2c1b74 = { 'id': _0x9f809c(0x8ad) + _0x18e5a9[_0x9f809c(0xb71)](), ..._0x46914d }; _0x1d17f3['userProfiles'][_0x9f809c(0x1e6)](_0x2c1b74), !_0x4175d5['activeUserProfileId'] && (_0x546f54['activeUserProfileId'] = _0x2c1b74['id']); } } } async function _0x20a303() { const _0x13a041 = _0x2481c4; if (!_0x5f0a6c[_0x13a041(0x723)] || _0x5f0a6c['characters'][_0x13a041(0x55b)] === 0x0) { console[_0x13a041(0x5b1)](_0x13a041(0x5f3)); return; } console[_0x13a041(0x5b1)]('启动头像恢复程序...'); for (const _0x4ac207 of _0x5f0a6c[_0x13a041(0x723)]) { if (!_0x4ac207['avatar']) try { if ('ssYZM' !== _0x13a041(0xb12)) { const _0x1fb743 = await _0x393cae(_0x13a041(0x22b) + _0x4ac207['id']); _0x1fb743 && (_0x4ac207[_0x13a041(0x6b6)] = await _0x5abd11(_0x1fb743)); } else _0x773f4b['classList']['remove'](_0x13a041(0x940)); } catch (_0x78f02b) { _0x13a041(0xa09) === _0x13a041(0x3a8) ? _0x10ef98(_0x13a041(0x759)) : console[_0x13a041(0x8d9)]('为角色\x20' + _0x4ac207['name'] + '\x20(' + _0x4ac207['id'] + _0x13a041(0x81f), _0x78f02b); } } console[_0x13a041(0x5b1)]('所有头像已恢复到运行时状态。'); } function _0x32e9fb() { const _0x2a6d96 = _0x2481c4; let _0x3dafa7 = null; try { _0x3dafa7 = localStorage[_0x2a6d96(0x6b4)](_0x2a6d96(0x508)); } catch (_0x3aca6e) { console[_0x2a6d96(0x8d9)](_0x2a6d96(0x650), _0x3aca6e); } if (_0x3dafa7) try { const _0x441b10 = JSON['parse'](_0x3dafa7), _0x4834f3 = { ..._0x5f0a6c }, _0x8209cf = { ..._0x4834f3, ..._0x441b10 }; _0x8209cf[_0x2a6d96(0xa91)] = { ..._0x4834f3[_0x2a6d96(0xa91)], ..._0x441b10[_0x2a6d96(0xa91)] || {} }, _0x8209cf[_0x2a6d96(0x720)] = { ..._0x4834f3[_0x2a6d96(0x720)], ..._0x441b10['apiSettings'] || {} }, Object[_0x2a6d96(0xac1)](_0x5f0a6c, _0x8209cf); } catch (_0x4ba29d) { console['error']('解析存档失败，正在重置:', _0x4ba29d), localStorage[_0x2a6d96(0x805)](_0x2a6d96(0x508)); } const _0xfdf25b = _0x5f0a6c[_0x2a6d96(0x723)][_0x2a6d96(0x55b)] === 0x0; !_0x5f0a6c[_0x2a6d96(0xab8)]['find'](_0x23b761 => _0x23b761['id'] === _0x5f0a6c['activeChatId']) && (_0x2a6d96(0x3d5) !== 'Zxmgg' ? _0x5f0a6c[_0x2a6d96(0x1e1)] = _0x5f0a6c[_0x2a6d96(0xab8)][0x0]?.['id'] || null : _0x4ac576 = _0x2a6d96(0x719) + _0x20e25f[_0x2a6d96(0x3b3)] + _0x2a6d96(0x234)); if (_0x3dafa7) { if (_0x2a6d96(0x34a) === _0x2a6d96(0xb87)) { const _0x39acb6 = _0x33515b[_0x2a6d96(0x463)](_0x2a6d96(0x293)), _0x4c73bf = _0x39acb6[_0x2a6d96(0x5a2)](_0x2a6d96(0xc0f)), _0x43acfc = _0x3126f0['querySelector'](_0x2a6d96(0xa83)); if (_0x4c73bf[_0x2a6d96(0x55b)] === 0x0) _0x43acfc[_0x2a6d96(0x356)] = '--\x20点击选择\x20--'; else _0x4c73bf['length'] > 0x2 ? _0x43acfc[_0x2a6d96(0x356)] = _0x2a6d96(0x9bb) + _0x4c73bf[_0x2a6d96(0x55b)] + '\x20项' : _0x43acfc[_0x2a6d96(0x356)] = _0x25b5fa[_0x2a6d96(0x8b4)](_0x4c73bf)['map'](_0x40edae => _0x40edae[_0x2a6d96(0x94b)][_0x2a6d96(0x356)][_0x2a6d96(0x1e9)]())['join']('、'); } else _0x5c772f(); } return _0xfdf25b; } function _0x351209() { const _0xe3e31c = _0x2481c4; if (_0xe3e31c(0x671) === _0xe3e31c(0xc1f)) _0x9dbb98[_0xe3e31c(0x80c)]['display'] = _0xe3e31c(0x333), _0x1ba256[_0xe3e31c(0x463)]('snoop-phone-top-nav')[_0xe3e31c(0x80c)]['display'] = _0xe3e31c(0x1df); else { if (!_0x5f0a6c[_0xe3e31c(0x1e1)]) return; try { localStorage['setItem'](_0xe3e31c(0x3c3) + _0x5f0a6c[_0xe3e31c(0x1e1)], JSON[_0xe3e31c(0x38f)](_0x5f0a6c[_0xe3e31c(0xbc8)])); } catch (_0x1e0154) { console[_0xe3e31c(0x8d9)](_0xe3e31c(0xa89), _0x1e0154), _0x24537c('无法保存聊天记录。'); } } } function _0x9b0609() { const _0x17536a = _0x2481c4; if (!_0x5f0a6c['activeChatId']) { if (_0x17536a(0xa85) !== _0x17536a(0xa85)) _0x254d4c = _0x2e04c4(_0x273a30[_0x17536a(0x3d4)][0x0]); else { _0x5f0a6c[_0x17536a(0xbc8)] = [], _0x1a8cc0(); return; } } let _0x21fd34 = null; try { _0x21fd34 = localStorage[_0x17536a(0x6b4)](_0x17536a(0x3c3) + _0x5f0a6c[_0x17536a(0x1e1)]); } catch (_0x40f0b8) { _0x17536a(0x317) === _0x17536a(0x8cd) ? _0x385b0f[_0x17536a(0x811)] = ![] : console['error']('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x5f0a6c['activeChatId'], _0x40f0b8); } let _0x308de8 = []; if (_0x21fd34) try { const _0x5cefac = JSON[_0x17536a(0x433)](_0x21fd34); Array['isArray'](_0x5cefac) && (_0x17536a(0x484) === _0x17536a(0x8db) ? _0x25b297[_0x17536a(0xb2b)] = _0x2b83a5['linkedWorldBookIds']['filter'](_0x11cb51 => _0x11cb51 !== _0x1b2114) : _0x308de8 = _0x5cefac[_0x17536a(0x216)](_0x4c4b8c => _0x4c4b8c && typeof _0x4c4b8c === _0x17536a(0x340) && typeof _0x4c4b8c[_0x17536a(0x579)] === _0x17536a(0xbc2) && typeof _0x4c4b8c[_0x17536a(0x67c)] !== _0x17536a(0xbe6))); } catch (_0x48e68a) { if (_0x17536a(0xb6c) !== _0x17536a(0xaae)) { console[_0x17536a(0x8d9)](_0x17536a(0x9b5) + _0x5f0a6c[_0x17536a(0x1e1)] + _0x17536a(0xb02), _0x48e68a); try { localStorage[_0x17536a(0x805)](_0x17536a(0x3c3) + _0x5f0a6c[_0x17536a(0x1e1)]); } catch (_0x1c959d) { 'LxhVv' !== _0x17536a(0x626) ? (_0x2a5650['textContent'] = _0xf83df8[_0x17536a(0x39d)]('zh-CN', { 'hour': _0x17536a(0xbe7), 'minute': _0x17536a(0xbe7), 'hour12': ![] }), _0x39311d[_0x17536a(0x356)] = _0xf93d8a[_0x17536a(0x4bc)](_0x17536a(0x2ed), { 'month': _0x17536a(0xb36), 'day': _0x17536a(0x808), 'weekday': _0x17536a(0xb36) })) : console[_0x17536a(0x8d9)]('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', _0x1c959d); } } else { const _0x44d691 = _0xfe33ea[_0x17536a(0x7dd)](_0x17536a(0x984)); _0x44d691 && _0x44d691[_0x17536a(0x582)](_0x17536a(0x3bf), function () { const _0x4a4012 = { 'id': _0x2bd0c3['id'], 'url': _0x590684['playableUrl'] }; _0x4fe9c1(this, _0x4a4012); }); } } _0x5f0a6c[_0x17536a(0xbc8)] = _0x308de8, _0x5ea706['innerHTML'] = '', _0x5f0a6c[_0x17536a(0xbc8)] && _0x5f0a6c[_0x17536a(0xbc8)][_0x17536a(0xbe4)]((_0x47dd59, _0x45176c) => _0xa7043(_0x47dd59, _0x45176c)), setTimeout(() => { const _0x48018f = _0x17536a; _0x48018f(0xb54) === _0x48018f(0xb54) ? _0x5ea706[_0x48018f(0xa7b)] = _0x5ea706[_0x48018f(0x2ea)] : (_0x2f88f2(_0x209057['id']), _0x409d60(!![])); }, 0x0); } async function _0x2743ca() { const _0x30bc9b = _0x2481c4, _0x290478 = document[_0x30bc9b(0x463)]('home-screen'); if (!_0x290478) { console[_0x30bc9b(0x8d9)]('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!'); return; } try { let _0x47eca7 = await _0x393cae(_0x30bc9b(0x24b)); if (!_0x47eca7) { if (_0x30bc9b(0x467) !== _0x30bc9b(0x885)) { const _0x3d33eb = localStorage[_0x30bc9b(0x6b4)](_0x30bc9b(0x200)); _0x3d33eb && (console[_0x30bc9b(0x5b1)](_0x30bc9b(0x7bf)), _0x47eca7 = await _0x32e14c(_0x3d33eb), await _0x4d5a5e(_0x30bc9b(0x24b), _0x47eca7), localStorage['removeItem'](_0x30bc9b(0x200))); } else { const _0x446074 = _0x251349[_0x30bc9b(0x58b)](_0x30bc9b(0xbdf)); _0x446074['className'] = 'world-book-item', _0x446074[_0x30bc9b(0x607)]['id'] = _0x1edc61['id'], _0x446074[_0x30bc9b(0xb00)] = _0x30bc9b(0xb5c) + _0x281fef[_0x30bc9b(0x3b3)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x24f227['content']['substring'](0x0, 0x64) + _0x30bc9b(0x24e), _0x446074['addEventListener'](_0x30bc9b(0x3bf), () => _0x4def3a(_0xf75b32['id'])), _0x7f278f[_0x30bc9b(0xa59)](_0x446074); } } if (_0x47eca7) _0x290478[_0x30bc9b(0x80c)]['backgroundImage'] = _0x30bc9b(0x9a3) + URL[_0x30bc9b(0x51e)](_0x47eca7) + ')', _0x290478['style'][_0x30bc9b(0x4b0)] = _0x30bc9b(0xa53), _0x290478['style'][_0x30bc9b(0x6f9)] = 'center'; else { if ('OLfrM' === _0x30bc9b(0x6f4)) _0x290478[_0x30bc9b(0x80c)][_0x30bc9b(0x4b2)] = ''; else { const { omniText: _0x79e5e7 } = _0x40c2d1(_0x2701d6['id'], null), _0x2d21b2 = _0x31be44(_0x71d828['id']), _0x24a301 = _0x56213c['linkedWorldBookIds'] && _0x3fb24d[_0x30bc9b(0xb2b)][_0x30bc9b(0x55b)] > 0x0 ? _0x30bc9b(0x509) + _0x1de219[_0x30bc9b(0x3b3)] + _0x30bc9b(0xb25) + _0x544daf[_0x30bc9b(0xb2b)][_0x30bc9b(0x575)](_0xb37080 => _0x4091e5[_0x30bc9b(0x7ad)][_0x30bc9b(0x3be)](_0x30ff7f => _0x30ff7f['id'] === _0xb37080))[_0x30bc9b(0x216)](_0x28b96b)['map'](_0x13e3f8 => _0x30bc9b(0x8b5) + _0x13e3f8[_0x30bc9b(0x3b3)] + '\x0a' + _0x13e3f8[_0x30bc9b(0x67c)])[_0x30bc9b(0x3b9)]('') : ''; return _0x30bc9b(0x203) + _0x1ceed9['name'] + _0x30bc9b(0x2df) + _0x360dd0['id'] + _0x30bc9b(0x50a) + _0x288e80[_0x30bc9b(0x91d)] + _0x30bc9b(0xb0b) + _0x79e5e7 + '\x0a' + _0x2d21b2 + '\x0a' + _0x24a301; } } } catch (_0x527b82) { console[_0x30bc9b(0x8d9)](_0x30bc9b(0xc27), _0x527b82), _0x290478 && (_0x30bc9b(0x9cb) !== 'KxUZl' ? _0x36ddf5 += _0x30bc9b(0x434) + _0x44dcd9[_0x30bc9b(0x3b3)] + _0x30bc9b(0x6aa) : _0x290478['style'][_0x30bc9b(0x4b2)] = ''); } } function _0x3acb09() { const _0x493e8e = _0x2481c4, _0x4ccfa3 = localStorage['getItem']('customFeedWallpaper'); if (_0x4ccfa3) document[_0x493e8e(0x463)]('music-screen')[_0x493e8e(0x80c)][_0x493e8e(0x981)](_0x493e8e(0x3ed), _0x493e8e(0x9a3) + _0x4ccfa3 + ')'); else { if (_0x493e8e(0xb7a) === _0x493e8e(0x2ee)) { const _0x32875b = _0x466708['userProfiles'][_0x493e8e(0x3be)](_0x5edfdc => _0x5edfdc['id'] === _0x58e1b0[_0x493e8e(0xbb5)]) || { 'name': '你' }, _0x3c75b6 = _0x6e6571[_0x493e8e(0x60c)]['find'](_0x259a79 => _0x259a79[_0x493e8e(0xba0)] === _0x4f3fc8); if (!_0x3c75b6 || !_0x3c75b6[_0x493e8e(0x1d7)] || _0x3c75b6[_0x493e8e(0x1d7)][_0x493e8e(0x55b)] === 0x0) return ''; const _0x5e76f7 = _0x3c75b6[_0x493e8e(0x1d7)][_0x493e8e(0x929)](-0x8), _0x127f1f = _0x5e76f7[_0x493e8e(0x575)](_0x433910 => { const _0x392407 = _0x493e8e, _0x14ccfb = _0x433910[_0x392407(0x65d)] === _0x392407(0x5c2) ? _0x32875b[_0x392407(0x3b3)] : _0x3d9c16(_0x433910[_0x392407(0x65d)])[_0x392407(0x3b3)]; return _0x392407(0x8b9) + new _0x5b1f36(_0x433910[_0x392407(0x83a)])[_0x392407(0x4bc)]() + ']\x20' + _0x14ccfb + '\x20写道:\x20' + _0x433910[_0x392407(0x67c)]; })[_0x493e8e(0x3b9)]('\x0a'); return _0x493e8e(0x961) + _0x32875b['name'] + _0x493e8e(0x32a) + _0x127f1f; } else document[_0x493e8e(0x463)](_0x493e8e(0xad8))['style'][_0x493e8e(0x981)]('--feed-bg-image', 'none'); } } async function _0x11ba55(_0xa8dc70) { const _0x3efff6 = _0x2481c4; try { await _0x4d5a5e('wallpaper_main', _0xa8dc70), await _0x2743ca(), _0x24537c('壁纸已更换！'); } catch (_0x55c4c9) { console[_0x3efff6(0x8d9)](_0x3efff6(0xb4f), _0x55c4c9), _0x24537c(_0x3efff6(0x95f) + _0x55c4c9[_0x3efff6(0x9fa)]); } } function _0x476de8(_0x5036b1) { const _0x11198c = _0x2481c4, _0x1c8f1c = { 'quotedMessage': null, 'content': _0x5036b1 }, _0x47873a = _0x5036b1[_0x11198c(0x294)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x47873a && (_0x1c8f1c['quotedMessage'] = { 'sender': _0x47873a[0x1][_0x11198c(0x1e9)](), 'content': _0x47873a[0x2][_0x11198c(0x1e9)]() }, _0x1c8f1c[_0x11198c(0x67c)] = _0x5036b1[_0x11198c(0x9ff)](_0x47873a[0x0][_0x11198c(0x55b)])[_0x11198c(0x1e9)]()), _0x1c8f1c; } const _0xdc3249 = document['getElementById'](_0x2481c4(0x3fb)), _0x2b3bae = document[_0x2481c4(0x463)]('message-action-backdrop'), _0x57873f = document['getElementById'](_0x2481c4(0x968)), _0x29b82d = document[_0x2481c4(0x463)](_0x2481c4(0x59a)), _0x2d0ac4 = document[_0x2481c4(0x463)]('cancel-action-button'), _0x27259f = document[_0x2481c4(0x463)](_0x2481c4(0x857)), _0x32ea52 = document[_0x2481c4(0x463)](_0x2481c4(0x4e9)), _0x57cceb = document[_0x2481c4(0x463)](_0x2481c4(0x56d)), _0x4ef082 = document[_0x2481c4(0x463)](_0x2481c4(0xacd)), _0x81b937 = document[_0x2481c4(0x463)](_0x2481c4(0x966)), _0x3f9b9e = document[_0x2481c4(0x463)]('cancel-edit-button'); let _0x5d33d8 = null; function _0x427353(_0x2607a4) { const _0xd4cbf = _0x2481c4; _0x5d33d8 = _0x2607a4, _0xdc3249['classList'][_0xd4cbf(0xb2c)](_0xd4cbf(0x940)); } function _0x58c8f4() { const _0x816f85 = _0x2481c4; if (_0x816f85(0x373) === _0x816f85(0x2c9)) { const _0x161d65 = _0x185163['createElement'](_0x816f85(0x938)); _0x161d65[_0x816f85(0xb01)] = _0x4ec6d4[_0x816f85(0xb0d)], _0x161d65[_0x816f85(0xb64)] = _0x816f85(0x396), _0x161d65[_0x816f85(0x879)] = _0x12b12a[_0x816f85(0x3b3)], _0x161d65[_0x816f85(0x776)][_0x816f85(0xb2c)](_0x816f85(0x30e)), _0x161d65[_0x816f85(0x582)]('click', () => _0x560544(_0x34f02b)), _0x1af3f8['appendChild'](_0x161d65); } else _0xdc3249[_0x816f85(0x776)]['remove'](_0x816f85(0x940)); } function _0x22decb() { _0x58c8f4(), _0x5d33d8 = null; } function _0x5e7d32() { const _0x56cfca = _0x2481c4; if (_0x5d33d8 === null) return; _0x5f0a6c['conversationHistory'][_0x56cfca(0x4a7)](_0x5d33d8, 0x1), _0x351209(), _0x23c996(), _0x22decb(); } function _0x119e83() { const _0x1e3667 = _0x2481c4; if (_0x1e3667(0xb47) !== _0x1e3667(0x947)) { if (_0x5d33d8 === null) return; const _0x2cc957 = _0x5f0a6c['conversationHistory'][_0x5d33d8]; if (!_0x2cc957) return; _0x4ef082[_0x1e3667(0x202)] = _0x2cc957[_0x1e3667(0x67c)], _0x58c8f4(), _0x32ea52[_0x1e3667(0x776)][_0x1e3667(0xb2c)](_0x1e3667(0x940)), _0x4ef082[_0x1e3667(0x5c5)](); } else return _0x2ebc3f[_0x1e3667(0x8d9)](_0x1e3667(0x3a3), _0x1b65b1), _0x189523[_0x1e3667(0x8d9)](_0x1e3667(0xbac), _0x58c6c0[_0x1e3667(0x3fa)] || _0x1e3667(0x1d5)), null; } function _0x22a0c7() { const _0x20fcce = _0x2481c4; if (_0x5d33d8 === null) return; const _0x1f239e = _0x4ef082['value'][_0x20fcce(0x1e9)](); if (_0x1f239e === '') { _0x4c54d1(); return; } const _0x4a1f4b = _0x5f0a6c[_0x20fcce(0xbc8)][_0x5d33d8]; _0x4a1f4b && (_0x4a1f4b[_0x20fcce(0x67c)] = _0x1f239e, _0x351209(), _0x23c996()), _0x32ea52[_0x20fcce(0x776)]['remove'](_0x20fcce(0x940)), _0x5d33d8 = null; } function _0x4c54d1() { const _0x199eb5 = _0x2481c4; if (_0x199eb5(0xb9b) === _0x199eb5(0xb9b)) _0x32ea52['classList'][_0x199eb5(0x554)](_0x199eb5(0x940)), _0x5d33d8 = null; else { _0x43d6e2[_0x199eb5(0x1e1)] = null, _0x581221(), _0x233da7(![]), _0x4ddb9b[_0x199eb5(0x463)](_0x199eb5(0x262))[_0x199eb5(0x80c)][_0x199eb5(0x4b2)] = ''; return; } } _0x2b3bae[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x22decb), _0x2d0ac4[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x22decb), _0x29b82d['addEventListener'](_0x2481c4(0x3bf), _0x5e7d32), _0x57873f[_0x2481c4(0x582)]('click', _0x119e83), _0x27259f[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0xadc4c6), _0x8deae3[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x187793), _0x81b937[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x22a0c7), _0x3f9b9e[_0x2481c4(0x582)]('click', _0x4c54d1), _0x57cceb['addEventListener'](_0x2481c4(0x3bf), _0x4c54d1); function _0xadc4c6() { const _0x2d2aa4 = _0x2481c4; if (_0x5d33d8 === null) return; const _0x5e02a7 = _0x5f0a6c[_0x2d2aa4(0xbc8)][_0x5d33d8]; if (!_0x5e02a7) return; const _0x370a30 = _0x168762(); let _0x5e3284 = '未知'; if (_0x5e02a7[_0x2d2aa4(0x579)] === _0x2d2aa4(0x5c2)) { if ('tkrMm' !== _0x2d2aa4(0x1e2)) { if (_0x1c6d49[_0x2d2aa4(0x55b)] === 0x0) return; _0x52b0bb = (_0x1de409 + 0x1) % _0x405abf[_0x2d2aa4(0x55b)], _0x1c83ff(_0x8c4e[_0x274cea], _0x481719); } else _0x5e3284 = _0x5f0a6c[_0x2d2aa4(0x404)][_0x2d2aa4(0x3b3)] || '我'; } else { if (_0x2d2aa4(0x90c) !== _0x2d2aa4(0x50b)) { const _0x39f2bd = _0x5e02a7[_0x2d2aa4(0xb6f)] || _0x370a30?.['participantIds'][0x0], _0x2a5b3b = _0x543c76(_0x39f2bd); _0x5e3284 = _0x2a5b3b ? _0x2a5b3b[_0x2d2aa4(0x3b3)] : '角色'; } else { const _0x967bb4 = _0x52a1db[_0x2d2aa4(0xb32)]['find'](_0x46dae6 => _0x46dae6['id'] === _0x3ef8bc[_0x2d2aa4(0x64b)]), _0x32d3b9 = _0x967bb4?.[_0x2d2aa4(0x763)]; let _0x43e000 = _0x48ff11[_0x2d2aa4(0x7ae)][_0x2d2aa4(0x3be)](_0x15400f => _0x15400f['id'] === _0x32d3b9); !_0x43e000 && (_0x43e000 = _0x4a16b4[_0x2d2aa4(0x7ae)][_0x2d2aa4(0x3be)](_0x529b07 => _0x529b07['id'] === _0x4fdbfd[_0x2d2aa4(0xbb5)])), !_0x43e000 && (_0x43e000 = _0x16d94d[_0x2d2aa4(0x7ae)][0x0]), _0x43e000 && (_0x271d73[_0x2d2aa4(0x463)](_0x2d2aa4(0x472))[_0x2d2aa4(0xb01)] = _0x43e000[_0x2d2aa4(0x6b6)] || _0x341db9); } } let _0xc4f756 = _0x5e02a7[_0x2d2aa4(0x67c)] || ''; if (_0x5e02a7[_0x2d2aa4(0x746)]) _0xc4f756 = _0x2d2aa4(0xb17); if (_0x5e02a7[_0x2d2aa4(0x8dc)]) _0xc4f756 = '[图片]'; if (_0xc4f756[_0x2d2aa4(0x55b)] > 0x32) _0xc4f756 = _0xc4f756[_0x2d2aa4(0x9ff)](0x0, 0x32) + '...'; _0x5f0a6c['activeQuote'] = { 'sender': _0x5e3284, 'content': _0xc4f756 }, _0x30aba2(), _0x22decb(), _0x44e53d[_0x2d2aa4(0x5c5)](); } function _0x30aba2() { const _0x135c40 = _0x2481c4; if (_0x135c40(0x955) !== _0x135c40(0x955)) { const _0x4864a8 = _0xdadf89['getItem']('appState'); if (_0x4864a8) { const _0x415b91 = _0x181282['parse'](_0x4864a8); _0x415b91[_0x135c40(0x7cd)] && (_0x10c326[_0x135c40(0x7cd)] = _0x415b91['accountingLedger'], _0x2bb604[_0x135c40(0x5b1)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.')); } } else { if (!_0x5f0a6c[_0x135c40(0xa28)]) return; _0xb60571[_0x135c40(0x356)] = _0x135c40(0x677) + _0x5f0a6c['activeQuote'][_0x135c40(0x791)], _0x47185f[_0x135c40(0x356)] = _0x5f0a6c[_0x135c40(0xa28)][_0x135c40(0x67c)], _0x1a0828[_0x135c40(0x80c)][_0x135c40(0x6df)] = _0x135c40(0x629); } } function _0x187793() { const _0x44e4e6 = _0x2481c4; _0x5f0a6c[_0x44e4e6(0xa28)] = null, _0x1a0828[_0x44e4e6(0x80c)][_0x44e4e6(0x6df)] = _0x44e4e6(0x333); } function _0x1922fc(_0x58ffe5, _0xdce150) { const _0xf5f1f8 = _0x2481c4; if (_0xf5f1f8(0x3b1) === _0xf5f1f8(0x399)) _0x57de08['error'](_0xf5f1f8(0xb5d), _0x395543); else { const _0x4a1222 = document[_0xf5f1f8(0x463)]('music-widget'); _0x4a1222 && (_0xf5f1f8(0x491) === 'mmKoI' ? _0x58ffe5 === _0xf5f1f8(0x28c) ? _0x4a1222['style'][_0xf5f1f8(0x6df)] = _0xf5f1f8(0x9d9) : _0x4a1222[_0xf5f1f8(0x80c)][_0xf5f1f8(0x6df)] = _0xf5f1f8(0x333) : (_0x2bbcbb[_0xf5f1f8(0x80c)][_0xf5f1f8(0x414)] = _0xf5f1f8(0x602), _0x2f4303[_0xf5f1f8(0x80c)][_0xf5f1f8(0x21e)] = _0xf5f1f8(0x333))); _0x4fe674 = _0xdce150 || null, Object[_0xf5f1f8(0x268)](_0x533005)[_0xf5f1f8(0xbe4)](_0x84c883 => _0x84c883[_0xf5f1f8(0x776)][_0xf5f1f8(0x554)]('active')); if (_0x533005[_0x58ffe5]) { if (_0xf5f1f8(0x889) === _0xf5f1f8(0x592)) { const _0x438a7b = _0x5dac6b['characters'][_0xf5f1f8(0x3be)](_0x28cc16 => _0x28cc16['id'] === _0x5c3cb6); _0x22bc2e[_0xf5f1f8(0x202)] = _0x438a7b[_0xf5f1f8(0x917)] || '', _0x409cec['value'] = _0x438a7b['userAvatarFrameUrl'] || ''; if (_0x254e2e) _0x83e22e[_0xf5f1f8(0x80c)][_0xf5f1f8(0x4b2)] = _0x438a7b['avatarFrameUrl'] ? _0xf5f1f8(0x205) + _0x438a7b['avatarFrameUrl'] + '\x27)' : ''; } else _0x533005[_0x58ffe5][_0xf5f1f8(0x776)][_0xf5f1f8(0xb2c)](_0xf5f1f8(0x8ef)); } _0x58ffe5 !== _0xf5f1f8(0x83e) && _0x299857[_0xf5f1f8(0x776)]['remove'](_0xf5f1f8(0x846)); } } function _0x42aebf(_0x198bc9) { const _0x537e67 = _0x2481c4; _0x198bc9 ? _0x537e67(0xa71) !== _0x537e67(0x806) ? _0x299857['classList'][_0x537e67(0xb2c)](_0x537e67(0x846)) : (_0x2397be(), _0x1c4c5e[_0x537e67(0xbc8)] = [], _0x4fd3a7()) : _0x299857[_0x537e67(0x776)][_0x537e67(0x554)](_0x537e67(0x846)); } async function _0x30852c() { const _0x10109c = _0x2481c4; if (_0x10109c(0xc1a) === 'IlEsz') { const _0x5b4ad7 = _0x2ffd1b[_0x10109c(0x7dd)]('#app-dock-bottom-left\x20#' + _0x5aeba4 + _0x10109c(0xa72) + _0x42e912 + '\x20.app-icon-img')?.[_0x10109c(0xb00)]; _0x5b4ad7 && (_0x5770ab['innerHTML'] = _0x5b4ad7); } else { _0x287213[_0x10109c(0xb00)] = ''; for (const _0x3f1b59 of _0x5f0a6c[_0x10109c(0xab8)]) { const _0x10547b = document[_0x10109c(0x58b)]('li'); _0x10547b[_0x10109c(0x781)] = _0x10109c(0x47b), _0x10547b[_0x10109c(0x607)]['id'] = _0x3f1b59['id']; let _0x5eded6 = _0x25d84a, _0x46b361 = '群聊', _0x1eeb58 = ''; if (_0x3f1b59[_0x10109c(0xc02)] === _0x10109c(0x963)) { const _0x18d64d = _0x543c76(_0x3f1b59[_0x10109c(0x3d4)][0x0]); if (_0x18d64d) { const _0x2d836e = await _0x393cae(_0x10109c(0x22b) + _0x18d64d['id']); _0x2d836e ? _0x5eded6 = URL[_0x10109c(0x51e)](_0x2d836e) : _0x5eded6 = _0x18d64d[_0x10109c(0x6b6)] || _0x25d84a, _0x46b361 = _0x18d64d[_0x10109c(0x3b3)] || _0x10109c(0xbd6), _0x1eeb58 = _0x18d64d[_0x10109c(0x991)] || '私聊'; } else _0x46b361 = _0x10109c(0x7a2), _0x1eeb58 = _0x10109c(0x2cd); } else { if (_0x10109c(0x543) !== _0x10109c(0x543)) !_0x38fca7[_0x10109c(0x999)](_0x299977[_0x10109c(0x606)]) && _0x5d427a['target'] !== _0x467d58 && _0x1acd6f[_0x10109c(0x606)] !== _0x53ada7 && _0x32df03[_0x10109c(0x776)][_0x10109c(0x554)](_0x10109c(0x940)); else { _0x46b361 = _0x3f1b59[_0x10109c(0x3b3)] || '未命名群聊', _0x1eeb58 = _0x3f1b59['participantIds'][_0x10109c(0x55b)] + _0x10109c(0x614); const _0x2bb924 = await _0x393cae(_0x10109c(0x438) + _0x3f1b59['id']); if (_0x2bb924) _0x5eded6 = URL[_0x10109c(0x51e)](_0x2bb924); } } _0x10547b[_0x10109c(0xb00)] = _0x10109c(0x8f4) + _0x5eded6 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x46b361 + _0x10109c(0x971) + _0x1eeb58 + _0x10109c(0xa0e), _0x10547b[_0x10109c(0x7dd)](_0x10109c(0x9ac))['addEventListener']('click', () => { _0x420138(_0x3f1b59['id']), _0x42aebf(!![]); }), _0x287213[_0x10109c(0xa59)](_0x10547b); } } } function _0x9bd21d() { const _0x3346a4 = _0x2481c4; if (_0x3346a4(0xaa0) === _0x3346a4(0xaa0)) { const _0x108470 = document[_0x3346a4(0x463)](_0x3346a4(0xc06)); _0x108470[_0x3346a4(0xb00)] = ''; const _0x29fdbc = _0x5f0a6c['characters'][_0x3346a4(0x216)](_0x2e19b9 => _0x5f0a6c[_0x3346a4(0xab8)][_0x3346a4(0x977)](_0x5b9241 => _0x5b9241[_0x3346a4(0xc02)] === 'private' && _0x5b9241[_0x3346a4(0x3d4)][_0x3346a4(0xa1c)](_0x2e19b9['id']))); if (_0x29fdbc[_0x3346a4(0x55b)] === 0x0) { if (_0x3346a4(0x4bb) === _0x3346a4(0x4bb)) { _0x108470[_0x3346a4(0xb00)] = _0x3346a4(0x43b); return; } else { const _0x2e7ee1 = _0x1e6ea7[_0x3346a4(0x98e)](_0x97061d, _0x3346a4(0xb8d)), _0xe5d95f = _0x2e7ee1[_0x3346a4(0xb08)](_0x48b2dd), _0x49d8ae = _0xe5d95f[_0x3346a4(0x7a6)](_0x656175); _0x49d8ae[_0x3346a4(0x241)] = () => _0x5ac6cf(_0x49d8ae[_0x3346a4(0x77c)] ? _0x49d8ae[_0x3346a4(0x77c)][_0x3346a4(0xa41)] : null), _0x49d8ae['onerror'] = () => _0x2171d3(_0x49d8ae[_0x3346a4(0x8d9)]); } } _0x29fdbc['forEach'](_0xe8028b => { const _0x2f43ed = _0x3346a4; if (_0x2f43ed(0xb98) === 'CPTtF') { const _0x196e5e = _0x2f43ed(0x201) + _0x17e915; let _0x1340cc = _0x4005f4[_0x2f43ed(0x463)](_0x196e5e); if (_0x1340cc) return; const _0x53dbd2 = _0x2f43ed(0x6de) + _0x196e5e + '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x36aef6 === 'ai' ? '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>' : '') + _0x2f43ed(0xa68); _0x1339fd[_0x2f43ed(0xb9d)][_0x2f43ed(0x793)]('beforeend', _0x53dbd2); const _0x12f412 = _0x7a7d7c[_0x2f43ed(0x463)](_0x196e5e), _0x354aa9 = () => _0x12f412[_0x2f43ed(0x554)](); _0x12f412[_0x2f43ed(0x7dd)]('.choice-modal-backdrop')[_0x2f43ed(0x752)] = _0x354aa9, _0x12f412[_0x2f43ed(0x7dd)]('#diary-action-cancel')[_0x2f43ed(0x752)] = _0x354aa9, _0x12f412[_0x2f43ed(0x7dd)]('#diary-action-delete')[_0x2f43ed(0x752)] = () => { _0x5ddb08(_0x6e6b7b), _0x354aa9(); }, _0x3ee957 === 'ai' && (_0x12f412[_0x2f43ed(0x7dd)](_0x2f43ed(0x561))[_0x2f43ed(0x752)] = () => { _0x4d3c52(_0xeda8af), _0x354aa9(); }); } else { const _0x541ac4 = document[_0x2f43ed(0x58b)]('li'); _0x541ac4[_0x2f43ed(0x781)] = _0x2f43ed(0x47b), _0x541ac4[_0x2f43ed(0x607)][_0x2f43ed(0x3ce)] = _0xe8028b['id'], _0x541ac4['innerHTML'] = _0x2f43ed(0x97b) + (_0xe8028b['avatar'] || _0x25d84a) + _0x2f43ed(0x8d6) + _0xe8028b['name'] + _0x2f43ed(0xaca) + (_0xe8028b[_0x2f43ed(0x991)] || '私聊') + _0x2f43ed(0x9c1), _0x541ac4[_0x2f43ed(0x582)](_0x2f43ed(0x3bf), () => { _0x1b100e(_0xe8028b['id']); }), _0x108470[_0x2f43ed(0xa59)](_0x541ac4); } }); } else _0x209fde(_0x8f4636['imageId'])[_0x3346a4(0x794)](_0x19beb2 => { const _0x268062 = _0x3346a4; if (_0x19beb2) { const _0x29d4ab = _0x58417f[_0x268062(0x51e)](_0x19beb2); _0x3a464b[_0x268062(0xb01)] = _0x29d4ab, _0x526441[_0x268062(0x79e)] = () => _0x4ab654[_0x268062(0x768)](_0x29d4ab); } }); } async function _0x1b100e(_0xb60954) { const _0x531f8c = _0x2481c4, _0x4ea0e9 = _0x543c76(_0xb60954); if (!_0x4ea0e9) return; document['getElementById'](_0x531f8c(0x4ea))[_0x531f8c(0xb01)] = '', _0x5f0a6c[_0x531f8c(0x5c3)] = _0xb60954; const _0x1f4bce = _0x5f0a6c[_0x531f8c(0xab8)][_0x531f8c(0x3be)](_0x3ed913 => _0x3ed913[_0x531f8c(0xc02)] === 'private' && _0x3ed913['participantIds'][_0x531f8c(0xa1c)](_0xb60954)); _0x1f4bce ? (_0x5f0a6c['activeChatId'] = _0x1f4bce['id'], _0x5c772f(), _0x9b0609(), _0x4ba40c(_0xb60954)) : _0x531f8c(0x5e6) === _0x531f8c(0x5e6) ? _0x5f0a6c['conversationHistory'] = [] : _0x5526c4[_0x531f8c(0x2c3)] = _0x531f8c(0x392); document[_0x531f8c(0x463)](_0x531f8c(0x8c3))[_0x531f8c(0x356)] = _0x4ea0e9[_0x531f8c(0x3b3)]; const _0x54a551 = document[_0x531f8c(0x463)](_0x531f8c(0x952)); try { if (_0x531f8c(0xbd8) === _0x531f8c(0xa8e)) return _0x2ca347(_0x3dd790)[_0x531f8c(0x794)](_0x149589 => _0x149589['blob']()); else { const _0x363152 = await _0x393cae('char_offline_bg_' + _0xb60954); _0x363152 ? (_0x54a551[_0x531f8c(0x80c)][_0x531f8c(0x4b2)] = 'url(\x27' + URL['createObjectURL'](_0x363152) + '\x27)', _0x54a551['style'][_0x531f8c(0x4b0)] = 'cover', _0x54a551[_0x531f8c(0x80c)][_0x531f8c(0x6f9)] = _0x531f8c(0x545)) : 'ZGTQs' === 'DVpeP' ? (_0x237027['value'] = _0x238f77[_0x531f8c(0x404)]['name'] || '', _0x448812[_0x531f8c(0xb01)] = _0x2f0877[_0x531f8c(0x404)][_0x531f8c(0x6b6)] || _0x297fb8, _0x51dd51[_0x531f8c(0x202)] = _0x5d4eaf['userProfile']['persona'] || '') : _0x54a551[_0x531f8c(0x80c)][_0x531f8c(0x4b2)] = _0x531f8c(0x333); } } catch (_0x311bab) { console[_0x531f8c(0x8d9)](_0x531f8c(0xaab) + _0xb60954 + ':', _0x311bab), _0x54a551['style'][_0x531f8c(0x4b2)] = _0x531f8c(0x333); } _0x45f251(), _0x706a5c(); if (_0x20a425) clearInterval(_0x20a425); _0x9e0a60(), _0x20a425 = setInterval(_0x9e0a60, 0x2710), document[_0x531f8c(0x463)](_0x531f8c(0x8bd))[_0x531f8c(0x80c)][_0x531f8c(0x6df)] = _0x531f8c(0x629), _0x1922fc(_0x531f8c(0x8ff), 'meetingList'); } function _0x706a5c() { const _0x2858ca = _0x2481c4; if ('MWIPx' !== _0x2858ca(0xaf9)) { const _0x5928da = document[_0x2858ca(0x463)](_0x2858ca(0x72b)); _0x5928da[_0x2858ca(0xb00)] = ''; const _0x205eee = _0x5928da[_0x2858ca(0x7dd)]('#message-anchor'); if (_0x205eee) _0x205eee['remove'](); _0x5f0a6c['conversationHistory'] && _0x5f0a6c['conversationHistory'][_0x2858ca(0xbe4)]((_0x476ced, _0x3add08) => { const _0x4bb6be = _0x2858ca; if (!_0x476ced[_0x4bb6be(0x300)] || _0x476ced[_0x4bb6be(0x579)] === 'system') return; const _0x3d27fa = document['createElement']('p'); _0x3d27fa[_0x4bb6be(0x607)][_0x4bb6be(0xb7b)] = _0x3add08; const _0x25d80b = _0x476ced[_0x4bb6be(0x67c)]['replace'](/\n/g, _0x4bb6be(0x229)); let _0x3307cd = '', _0x55ba29 = ''; const _0x237c92 = _0x1f5ce5(_0x5f0a6c[_0x4bb6be(0x1e1)]); if (_0x476ced[_0x4bb6be(0x579)] === 'user') 'NECRr' === 'NECRr' ? (_0x3307cd = _0x237c92[_0x4bb6be(0x3b3)] || '我', _0x55ba29 = _0x4bb6be(0xaf0)) : (_0x3e2926[_0x4bb6be(0x246)]('customStickers', _0x3c0266['stringify'](_0x310079)), _0x2785b0('表情包已保存！正在刷新应用...'), _0x21db7e(() => _0x4a2ef9[_0x4bb6be(0x4df)](), 0x5dc)); else { if (_0x476ced[_0x4bb6be(0x579)] === _0x4bb6be(0x41d)) { const _0xef7eff = _0x543c76(_0x476ced['senderId'] || _0x5f0a6c[_0x4bb6be(0x5c3)]); _0x3307cd = _0xef7eff?.[_0x4bb6be(0x3b3)] || '角色', _0x55ba29 = 'speaker-ai'; } } _0x3d27fa[_0x4bb6be(0x80c)][_0x4bb6be(0x6c5)] = 'rgba(0,\x200,\x200,\x200.4)', _0x3d27fa[_0x4bb6be(0x80c)][_0x4bb6be(0x44d)] = '15px\x2020px', _0x3d27fa[_0x4bb6be(0x80c)][_0x4bb6be(0x421)] = _0x4bb6be(0x83d), _0x3d27fa['style']['marginBottom'] = '1em'; if (_0x3307cd) 'WWknd' !== _0x4bb6be(0x540) ? _0x3d27fa[_0x4bb6be(0xb00)] = _0x4bb6be(0x3a5) + _0x55ba29 + _0x4bb6be(0x44a) + (_0x55ba29 === _0x4bb6be(0xaf0) ? _0x4bb6be(0x7f8) : '#f2b7c6') + _0x4bb6be(0xc36) + _0x3307cd + ':</span>\x20' + _0x25d80b : _0x208ec3['diaryPressTimer'] = _0x3f04f3(() => { const _0x1aaa38 = _0x4bb6be; if (_0x286a81['type'] === _0x1aaa38(0x8f8)) _0x249992[_0x1aaa38(0x422)](); _0x1c27cd(_0xf2a41f(_0x39ebf0, 0xa), _0x3e51c7); }, 0x320); else { if (_0x4bb6be(0x4f7) === _0x4bb6be(0x4f7)) _0x3d27fa[_0x4bb6be(0x781)] = 'narrator', _0x3d27fa[_0x4bb6be(0x80c)][_0x4bb6be(0xc17)] = _0x4bb6be(0x2bc), _0x3d27fa[_0x4bb6be(0x80c)][_0x4bb6be(0x414)] = _0x4bb6be(0x9d2), _0x3d27fa[_0x4bb6be(0xb00)] = _0x25d80b; else { const _0x487be2 = _0x50eb05['createElement']('div'); _0x487be2[_0x4bb6be(0x781)] = 'day-dot', _0x5255c5[_0x4bb6be(0xa59)](_0x487be2); } } _0x5928da[_0x4bb6be(0xa59)](_0x3d27fa); }); if (_0x5f0a6c[_0x2858ca(0x5f8)]) { if (_0x2858ca(0x34f) === _0x2858ca(0x34f)) { let _0x53e43f = _0x5928da[_0x2858ca(0x7dd)](_0x2858ca(0x224)); !_0x53e43f && (_0x53e43f = document[_0x2858ca(0x58b)](_0x2858ca(0xbdf)), _0x53e43f[_0x2858ca(0x781)] = 'typing-indicator', _0x53e43f['textContent'] = _0x2858ca(0x91a), _0x53e43f[_0x2858ca(0x80c)]['backgroundColor'] = _0x2858ca(0x646), _0x53e43f[_0x2858ca(0x80c)]['padding'] = _0x2858ca(0xb5e), _0x53e43f[_0x2858ca(0x80c)]['borderRadius'] = '8px', _0x5928da[_0x2858ca(0xa59)](_0x53e43f)); } else _0x23f55e[_0x2858ca(0x356)] = '旁白', _0x1bd61f[_0x2858ca(0x356)] = '（对话结束）'; } const _0x1fc8f0 = document['createElement'](_0x2858ca(0xbdf)); _0x1fc8f0['id'] = 'message-anchor', _0x5928da[_0x2858ca(0xa59)](_0x1fc8f0), setTimeout(() => { const _0x2253c6 = _0x2858ca; _0x1fc8f0[_0x2253c6(0x63b)]({ 'behavior': _0x2253c6(0x876), 'block': _0x2253c6(0xb06) }); }, 0x32); } else _0x2d1614['head']['insertAdjacentHTML'](_0x2858ca(0xb65), '<\x20style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20'); } function _0x23c996() { const _0x37019f = _0x2481c4, _0x10c1b9 = document[_0x37019f(0x7dd)]('.screen.active'); if (!_0x10c1b9) return; _0x10c1b9['id'] === _0x37019f(0x3b6) ? _0x37019f(0x84c) !== _0x37019f(0x86f) ? _0x706a5c() : _0x24e47c[_0x37019f(0xb00)] = '<img\x20src=\x22' + _0x47e835 + _0x37019f(0x3af) : _0x1a8cc0(); } function _0x1a8cc0() { const _0x79b750 = _0x2481c4, _0x2619b4 = _0x5f0a6c['conversationHistory']['filter'](_0x26e2bb => !_0x26e2bb[_0x79b750(0x300)] && _0x26e2bb[_0x79b750(0x579)] !== _0x79b750(0x3c6)); if (_0x2619b4[_0x79b750(0x55b)] > _0x5f0a6c['displayedMessageCount']) { if (_0x79b750(0xa31) === _0x79b750(0xa31)) { let _0x517a78 = _0x5ea706[_0x79b750(0x7dd)](_0x79b750(0x81e)); !_0x517a78 && (_0x517a78 = document[_0x79b750(0x58b)](_0x79b750(0xb80)), _0x517a78[_0x79b750(0x356)] = _0x79b750(0xc22), _0x517a78['className'] = _0x79b750(0x276), _0x517a78[_0x79b750(0x80c)]['width'] = _0x79b750(0x876), _0x517a78[_0x79b750(0x80c)][_0x79b750(0x44e)] = _0x79b750(0x26d), _0x517a78[_0x79b750(0x80c)]['padding'] = '8px\x2016px', _0x517a78['onclick'] = () => { const _0x13afc8 = _0x79b750, _0x38bf99 = _0x5ea706, _0x3c364c = _0x38bf99[_0x13afc8(0x2ea)], _0x173b50 = _0x38bf99[_0x13afc8(0xa7b)]; _0x5f0a6c[_0x13afc8(0x3c8)] += 0x64, _0x1a8cc0(), requestAnimationFrame(() => { const _0x12d894 = _0x13afc8, _0x2ff407 = _0x38bf99[_0x12d894(0x2ea)]; _0x38bf99[_0x12d894(0xa7b)] = _0x173b50 + (_0x2ff407 - _0x3c364c); }); }, _0x5ea706[_0x79b750(0x58a)] ? _0x5ea706['insertBefore'](_0x517a78, _0x5ea706[_0x79b750(0x58a)]) : 'jHxkb' !== _0x79b750(0x8ae) ? _0x25afbb = '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22' + _0x931c78['avatar'] + _0x79b750(0x6c7) + _0x344bc2[_0x79b750(0x3b3)] + _0x79b750(0x5ac) + _0x56bd29['review']['text'] + _0x79b750(0xa80) : _0x5ea706[_0x79b750(0xa59)](_0x517a78)); } else { const _0x41f764 = _0x419c3f['getElementById'](_0x79b750(0xadd)), _0xacd501 = _0x6bc55[_0x79b750(0x463)](_0x79b750(0x709)), _0x2e4cd6 = _0x144dce[_0x79b750(0x463)](_0x79b750(0x93c)), _0x4af10a = _0x664c16[_0x79b750(0x463)](_0x79b750(0x365)), _0x43307c = _0x4d8520[_0x79b750(0x463)]('modal-mask'); _0xacd501[_0x79b750(0x356)] = _0x387687, _0x41f764[_0x79b750(0x80c)][_0x79b750(0x6df)] = 'flex'; const _0x20e8ef = _0x5590d3 => { const _0x5604dc = _0x79b750; _0x41f764[_0x5604dc(0x80c)][_0x5604dc(0x6df)] = _0x5604dc(0x333), _0x2e4cd6[_0x5604dc(0x752)] = _0x4af10a[_0x5604dc(0x752)] = _0x43307c[_0x5604dc(0x752)] = null, _0xe91634[_0x5604dc(0x4bf)](_0x5604dc(0x3ff), _0x5168f0), _0x8356b3(_0x5590d3); }, _0x5168f0 = _0x1738cb => { const _0x2d6711 = _0x79b750; if (_0x1738cb[_0x2d6711(0x54e)] === _0x2d6711(0x35f)) _0x20e8ef(![]); if (_0x1738cb[_0x2d6711(0x54e)] === _0x2d6711(0xaff)) _0x20e8ef(!![]); }; _0x2e4cd6['onclick'] = () => _0x20e8ef(!![]), _0x4af10a[_0x79b750(0x752)] = () => _0x20e8ef(![]), _0x43307c[_0x79b750(0x752)] = () => _0x20e8ef(![]), _0x16a4de['addEventListener'](_0x79b750(0x3ff), _0x5168f0); } } else { const _0x5998c3 = _0x5ea706[_0x79b750(0x7dd)]('.load-more-btn'); if (_0x5998c3) _0x5998c3[_0x79b750(0x554)](); } Array[_0x79b750(0x8b4)](_0x5ea706['children'])[_0x79b750(0xbe4)](_0x3fa220 => { const _0x47b823 = _0x79b750; if (!_0x3fa220[_0x47b823(0x776)][_0x47b823(0x999)]('load-more-btn')) { if (_0x47b823(0xbd7) !== _0x47b823(0x66b)) _0x3fa220['remove'](); else { if (_0x5b01ee['displayUrl']) _0x43ff00[_0x47b823(0x1e6)]('[' + _0x152689(_0x1d1e7b) + ']\x20[sticker:' + (_0x8951c[_0x47b823(0x67c)]?.[_0x47b823(0x294)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x17455f[_0x47b823(0x8dc)]) { const _0x186c41 = _0x319969[_0x47b823(0x67c)] ? '\x20' + _0x51169d[_0x47b823(0x67c)] : ''; _0xe68535[_0x47b823(0x1e6)]('[' + _0x80b86c(_0x1d0815) + _0x47b823(0xa87) + _0x186c41); } else _0x179bdf['content'] && _0x536d2a[_0x47b823(0x1e6)]('[' + _0x2e99be(_0x5393ed) + ']\x20' + _0x341019[_0x47b823(0x67c)]); } } } }); const _0x1a52a4 = _0x2619b4[_0x79b750(0x929)](-_0x5f0a6c['displayedMessageCount']); _0x1a52a4[_0x79b750(0xbe4)](_0x17d4fc => { const _0x4e3f3d = _0x79b750; if (_0x4e3f3d(0x24d) !== _0x4e3f3d(0x5de)) { const _0xb87ceb = _0x5f0a6c[_0x4e3f3d(0xbc8)][_0x4e3f3d(0xa81)](_0x17d4fc); _0xb87ceb > -0x1 && _0xa7043(_0x17d4fc, _0xb87ceb); } else { if (_0x41c2ca[_0x4e3f3d(0xc02)] === 'group') return '群聊「' + (_0x4d8db9[_0x4e3f3d(0x3b3)] || '未命名') + '」'; const _0x3031f2 = _0x5651d3(_0x200552[_0x4e3f3d(0x3d4)][0x0]); return '与\x20' + (_0x3031f2?.[_0x4e3f3d(0x3b3)] || _0x4e3f3d(0x7a2)) + '\x20的私聊'; } }); if (_0x5f0a6c['isGenerating']) { let _0x272732 = _0x5ea706[_0x79b750(0x7dd)](_0x79b750(0x224)); !_0x272732 && (_0x272732 = document[_0x79b750(0x58b)](_0x79b750(0xbdf)), _0x272732['className'] = _0x79b750(0x901), _0x272732[_0x79b750(0x356)] = _0x79b750(0x9e5), _0x5ea706[_0x79b750(0xa59)](_0x272732)); } _0x1a52a4['length'] <= _0x5f0a6c['displayedMessageCount'] && setTimeout(() => { const _0x1397af = _0x79b750; if ('JzFWL' !== 'JzFWL') return _0x2ec05f(new _0xf17b34(_0x1397af(0x69f))); else _0x5ea706[_0x1397af(0xa7b)] = _0x5ea706[_0x1397af(0x2ea)]; }, 0x0); } function _0xa7043(_0x1c0ce2, _0x4ef606) { const _0x4211f0 = _0x2481c4; if (_0x4211f0(0x1ec) !== _0x4211f0(0x2a3)) { const { role: _0x2cc06b, content: _0x1c5496, displayUrl: _0x5afe89, image: _0x407220, senderId: _0x1532de } = _0x1c0ce2, _0x28862c = _0x2cc06b === 'assistant' ? 'ai' : _0x2cc06b, _0x496f90 = _0x168762(), _0xa1226 = document[_0x4211f0(0x58b)]('div'); _0xa1226['classList'][_0x4211f0(0xb2c)](_0x4211f0(0x369), _0x28862c), _0xa1226[_0x4211f0(0x607)][_0x4211f0(0xb7b)] = _0x4ef606; const _0x4bffe9 = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); _0x4bffe9['className'] = _0x4211f0(0x6d6); let _0x60dfe1 = '', _0x55fa1a = '', _0x37d030 = null; if (_0x2cc06b === 'user') { const _0x49d8e6 = _0x1f5ce5(_0x5f0a6c[_0x4211f0(0x1e1)]); _0x60dfe1 = _0x49d8e6['avatar'] || _0x6ca07b; const _0x41e058 = _0x543c76(_0x496f90?.['participantIds'][0x0]); _0x41e058 && ('WyYoW' !== 'cUZav' ? _0x55fa1a = _0x41e058['userAvatarFrameUrl'] || '' : _0x1c8679(_0x4211f0(0x4c0) + _0x4e4fb1[_0x4211f0(0x9fa)])); } else { if (_0x496f90?.[_0x4211f0(0xc02)] === _0x4211f0(0x963)) 'ejAHT' !== _0x4211f0(0x90e) ? _0x37d030 = _0x543c76(_0x496f90[_0x4211f0(0x3d4)][0x0]) : _0x288e92[_0x4211f0(0x776)]['add'](_0x4211f0(0x940)); else _0x496f90?.['type'] === 'group' && _0x1532de && (_0x37d030 = _0x543c76(_0x1532de)); _0x60dfe1 = _0x37d030?.[_0x4211f0(0x6b6)] || _0x25d84a, _0x55fa1a = _0x37d030?.[_0x4211f0(0x917)] || ''; } const _0x38bdde = _0x3907e0(_0x60dfe1, _0x55fa1a); if (_0x2cc06b !== _0x4211f0(0x5c2) && _0x37d030) { if (_0x4211f0(0xae5) === _0x4211f0(0x247)) _0x1dd947['click'](); else { const _0x3fceef = _0x38bdde[_0x4211f0(0x7dd)](_0x4211f0(0x6d1)); _0x393cae(_0x4211f0(0x22b) + _0x37d030['id'])['then'](_0x1b9b90 => { const _0x17a580 = _0x4211f0; _0x17a580(0x78c) === 'bwSxn' ? (_0x472cf0[_0x17a580(0x463)](_0x17a580(0x431))['textContent'] = '为\x20' + _0x532a00 + _0x17a580(0x57a), _0x472a3e[_0x17a580(0x463)](_0x17a580(0x71c))[_0x17a580(0x202)] = '', _0x529a62[_0x17a580(0x463)]('event-type-todo')['checked'] = !![], _0x31a496[_0x17a580(0x463)](_0x17a580(0x5a6))[_0x17a580(0x776)][_0x17a580(0xb2c)](_0x17a580(0x940)), _0x12367c[_0x17a580(0x463)](_0x17a580(0x71c))[_0x17a580(0x5c5)]()) : _0x1b9b90 && (_0x3fceef[_0x17a580(0xb01)] = URL[_0x17a580(0x51e)](_0x1b9b90)); }); } } const _0x6e7ac8 = _0x1c5496 && _0x1c5496[_0x4211f0(0x1e9)]()[_0x4211f0(0x595)]('<div') && _0x1c5496[_0x4211f0(0x1e9)]()['endsWith'](_0x4211f0(0x3fe)); if (_0x6e7ac8) { if (_0x4211f0(0x972) === _0x4211f0(0x972)) { const _0x16914d = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); _0x16914d[_0x4211f0(0x781)] = _0x4211f0(0x5ec), _0x16914d[_0x4211f0(0xb00)] = _0x1c5496, _0x28862c === _0x4211f0(0x5c2) ? (_0x4bffe9[_0x4211f0(0xa59)](_0x16914d), _0x4bffe9['appendChild'](_0x38bdde)) : _0x4211f0(0xa26) !== _0x4211f0(0xa26) ? (_0x39bfcd[_0x4211f0(0x80c)]['display'] = 'flex', _0x5bbab8(() => _0x2dcaf6[_0x4211f0(0x776)][_0x4211f0(0xb2c)]('show'), 0xa)) : (_0x4bffe9[_0x4211f0(0xa59)](_0x38bdde), _0x4bffe9['appendChild'](_0x16914d)); } else try { const _0x597974 = _0x1b2330['getItem']('chatHistory_' + _0x1696b1), _0x4af516 = _0x58f900[_0x4211f0(0x433)](_0x597974 || '[]'); return _0x4eb8bb[_0x4211f0(0x9d7)](_0x4af516) ? _0x4af516 : []; } catch { return []; } } else { const _0x3f7695 = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); _0x3f7695[_0x4211f0(0x776)][_0x4211f0(0xb2c)](_0x4211f0(0x9fa), _0x28862c); if (_0x496f90?.[_0x4211f0(0xc02)] === _0x4211f0(0x963)) { if (_0x4211f0(0xb2d) === _0x4211f0(0xb2d)) { const _0x415ed1 = _0x496f90[_0x4211f0(0x3d4)][0x0]; _0x3f7695['classList']['add'](_0x4211f0(0x896) + _0x415ed1); } else _0x10499b['classList'][_0x4211f0(0x554)](_0x4211f0(0xb73), 'is-exiting-right'), _0x22003b[_0x4211f0(0x776)][_0x4211f0(0x554)]('is-entering-from-left'), _0x3642bf[_0x4211f0(0xa8a)] = _0x213381, _0x2cc8e7(), _0x4ccd30['isAnimatingDiary'] = ![]; } if (_0x1c0ce2[_0x4211f0(0x5d3)]) { if (_0x4211f0(0xb67) !== _0x4211f0(0xb67)) _0x1b429c[_0x4211f0(0x80c)][_0x4211f0(0x6df)] = _0x4211f0(0x333); else { const _0xb2acbd = document[_0x4211f0(0x58b)]('div'); _0xb2acbd[_0x4211f0(0x781)] = _0x4211f0(0x35b); const _0x569805 = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); _0x569805[_0x4211f0(0x781)] = _0x4211f0(0xa8d), _0x569805[_0x4211f0(0x356)] = _0x1c0ce2['quotedMessage'][_0x4211f0(0x791)]; const _0x3d7ce1 = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); _0x3d7ce1[_0x4211f0(0x781)] = _0x4211f0(0x1e0), _0x3d7ce1[_0x4211f0(0x356)] = _0x1c0ce2['quotedMessage'][_0x4211f0(0x67c)], _0xb2acbd[_0x4211f0(0xa59)](_0x569805), _0xb2acbd['appendChild'](_0x3d7ce1), _0x3f7695[_0x4211f0(0xa59)](_0xb2acbd); } } if (_0x5afe89) { _0x3f7695[_0x4211f0(0x776)][_0x4211f0(0xb2c)](_0x4211f0(0xbec)); const _0x4a5faf = document[_0x4211f0(0x58b)](_0x4211f0(0x938)); _0x4a5faf['src'] = _0x5afe89, _0x4a5faf['classList'][_0x4211f0(0xb2c)](_0x4211f0(0x2b9)), _0x3f7695[_0x4211f0(0xa59)](_0x4a5faf); } else { if (_0x1c0ce2[_0x4211f0(0x8dc)] || _0x1c0ce2[_0x4211f0(0xbce)]) { _0x3f7695[_0x4211f0(0x776)][_0x4211f0(0xb2c)](_0x4211f0(0x8dc)); const _0x4b2f27 = document[_0x4211f0(0x58b)](_0x4211f0(0x938)); _0x4b2f27[_0x4211f0(0x776)][_0x4211f0(0xb2c)]('message-image-content'), _0x3f7695['appendChild'](_0x4b2f27); if (_0x1c0ce2[_0x4211f0(0x8dc)]) _0x4b2f27[_0x4211f0(0xb01)] = _0x1c0ce2['image']; else { if (_0x4211f0(0xa0a) !== _0x4211f0(0x3e4)) _0x4b2f27[_0x4211f0(0xb01)] = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', _0x393cae(_0x1c0ce2[_0x4211f0(0xbce)])['then'](_0x2d04bd => { const _0x4983f3 = _0x4211f0; if (_0x4983f3(0x970) === 'jYObO') { if (_0x2d04bd) { if (_0x4983f3(0xa11) === 'qUovX') return ''; else { const _0xedb9a1 = URL[_0x4983f3(0x51e)](_0x2d04bd); _0x4b2f27[_0x4983f3(0xb01)] = _0xedb9a1, _0x4b2f27[_0x4983f3(0x79e)] = () => { const _0x5d04e6 = _0x4983f3; if (_0x5d04e6(0x5b4) !== _0x5d04e6(0x2c5)) URL[_0x5d04e6(0x768)](_0xedb9a1); else { const _0x4524aa = new _0x519360(_0x220cbb[_0x5d04e6(0x83a)]), _0x25618c = _0x4524aa['getFullYear']() + '-' + _0x207fe5(_0x4524aa['getMonth']() + 0x1)['padStart'](0x2, '0') + '-' + _0x1187cd(_0x4524aa[_0x5d04e6(0x60d)]())[_0x5d04e6(0x690)](0x2, '0'), _0xcc1bfe = _0x5c71dd(_0x4524aa[_0x5d04e6(0xc10)]())[_0x5d04e6(0x690)](0x2, '0') + ':' + _0x98fbc8(_0x4524aa[_0x5d04e6(0x88b)]())[_0x5d04e6(0x690)](0x2, '0'); let _0x2c76d1 = '未知'; _0x1b43b8[_0x5d04e6(0x579)] === 'user' ? _0x2c76d1 = _0x5e6a0e['name'] : _0x2c76d1 = _0x23f2b1[_0x5d04e6(0x3b3)]; let _0xb66899 = _0x435888['content']; if (_0xc123ac[_0x5d04e6(0x746)]) _0xb66899 = _0x5d04e6(0x64a); if (_0x190835[_0x5d04e6(0xbce)]) _0xb66899 = '[发送了图片]'; return '[' + _0x25618c + '\x20' + _0xcc1bfe + _0x5d04e6(0xb81) + _0x2c76d1 + ']:\x20' + _0xb66899; } }; } } else _0x4983f3(0xaad) === _0x4983f3(0x52f) ? _0xdc8ca8 += _0x4983f3(0x28e) + _0x40ce1b[_0x4983f3(0x596)](_0x162742 / 0x3c) + _0x4983f3(0xaee) : _0x4b2f27[_0x4983f3(0x2c3)] = '图片加载失败'; } else _0xb9352f[_0x4983f3(0x1e6)](_0x1b4ac9['id']); })[_0x4211f0(0x7d9)](_0x3901b7 => { const _0x25fafd = _0x4211f0; _0x25fafd(0x580) === 'NBSyo' ? (console[_0x25fafd(0x8d9)]('无法从\x20IndexedDB\x20加载聊天图片:', _0x3901b7), _0x4b2f27['alt'] = '图片加载失败') : _0x25924a = _0x259084['getItem']('chatHistory_' + _0x2e3bf2[_0x25fafd(0x1e1)]); }); else return _0x87e59b[_0x4211f0(0x7ae)]['find'](_0x221259 => _0x221259['id'] === _0x271f8c); } if (_0x1c5496) { const _0x3a68fe = document[_0x4211f0(0x58b)]('p'); _0x3a68fe[_0x4211f0(0x80c)]['marginTop'] = '5px', _0x3a68fe[_0x4211f0(0x356)] = _0x1c5496, _0x3f7695['appendChild'](_0x3a68fe); } } else { if (_0x1c0ce2[_0x4211f0(0xc02)] === 'transfer') { if (_0x4211f0(0x214) !== _0x4211f0(0x214)) _0x3d0b23[_0x4211f0(0x805)](_0x4211f0(0x50c)), _0x5c1390['removeItem'](_0x4211f0(0x4a3)), _0x4dd758(_0x4211f0(0x3c2)), _0x233aa5(() => _0x4b61cb[_0x4211f0(0x4df)](), 0x3e8); else { _0x3f7695['classList'][_0x4211f0(0xb2c)](_0x4211f0(0x97d)); const _0x2c7af8 = _0x1c0ce2['role'] === _0x4211f0(0x5c2) ? _0x1f5ce5(_0x5f0a6c[_0x4211f0(0x1e1)]) : _0x543c76(_0x1c0ce2['senderId']), _0x25f357 = _0x1c0ce2[_0x4211f0(0x4f5)] === _0x1f5ce5(_0x5f0a6c[_0x4211f0(0x1e1)])['id'] ? _0x1f5ce5(_0x5f0a6c[_0x4211f0(0x1e1)]) : _0x543c76(_0x1c0ce2[_0x4211f0(0x4f5)]), _0x243c70 = _0x2c7af8?.['name'] ? _0x2c7af8['name'] + _0x4211f0(0x3b7) : '转账', _0x1b94f3 = _0x25f357?.[_0x4211f0(0x3b3)] ? _0x4211f0(0x8b7) + _0x25f357['name'] : '转账', _0x5ce571 = _0x4211f0(0x22f) + _0x243c70 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥' + _0x1c0ce2[_0x4211f0(0x8bf)][_0x4211f0(0x2c4)](0x2) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>' + _0x1b94f3 + _0x4211f0(0x943); _0x3f7695[_0x4211f0(0xb00)] = _0x5ce571; } } else { if (_0x1c0ce2[_0x4211f0(0xc02)] === _0x4211f0(0x7f1)) { _0x3f7695[_0x4211f0(0x776)][_0x4211f0(0xb2c)]('music'); const _0x219fcf = document['createElement'](_0x4211f0(0xbdf)); _0x219fcf[_0x4211f0(0x781)] = _0x4211f0(0x1f3), _0x219fcf[_0x4211f0(0x776)][_0x4211f0(0xb2c)](_0x4211f0(0x424)); const _0x508dc4 = _0x1c0ce2[_0x4211f0(0x579)] === 'user' ? _0x1f5ce5(_0x5f0a6c[_0x4211f0(0x1e1)])[_0x4211f0(0x3b3)] || '你' : _0x543c76(_0x1c0ce2['senderId'])?.[_0x4211f0(0x3b3)] || 'TA', _0x32a3cb = _0x4211f0(0x649) + _0x1c0ce2['timestamp'], _0x2361c7 = _0x4211f0(0x63d) + _0x32a3cb + _0x4211f0(0x69d) + _0x25d84a + '\x22>'; _0x1c0ce2[_0x4211f0(0x5c1)] && (_0x4211f0(0x9ea) !== _0x4211f0(0x9ea) ? _0x55f22a(_0x6ec0b2[_0x4211f0(0x94d)]) : _0x393cae(_0x1c0ce2['coverId'])[_0x4211f0(0x794)](_0x353d0a => { const _0x296e0a = _0x4211f0; if ('IwIsQ' !== 'IwIsQ') _0x2e8668[_0x296e0a(0x463)](_0x296e0a(0xad8))[_0x296e0a(0x80c)]['setProperty'](_0x296e0a(0x3ed), _0x296e0a(0x333)); else { const _0x49a988 = document['getElementById'](_0x32a3cb); if (_0x49a988 && _0x353d0a) _0x49a988['src'] = URL[_0x296e0a(0x51e)](_0x353d0a); } })); if (_0x1c0ce2[_0x4211f0(0x2de)]) { if ('ixcJZ' === _0x4211f0(0xaf5)) { const _0x1618d4 = _0x59491d['createElement']('p'); _0x1618d4[_0x4211f0(0x80c)][_0x4211f0(0x2ba)] = _0x4211f0(0x699), _0x1618d4['textContent'] = _0x37c5d2, _0x27f915['appendChild'](_0x1618d4); } else _0x219fcf['innerHTML'] = _0x4211f0(0x259) + _0x2361c7 + _0x4211f0(0x3c5) + _0x1c0ce2['songName'] + _0x4211f0(0x702) + _0x1c0ce2['artist'] + _0x4211f0(0x777); } else _0x4211f0(0x863) !== _0x4211f0(0x505) ? _0x219fcf[_0x4211f0(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>' + _0x508dc4 + _0x4211f0(0x391) + _0x2361c7 + _0x4211f0(0x3c5) + _0x1c0ce2[_0x4211f0(0x48c)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x1c0ce2['artist'] + _0x4211f0(0x7d1) + _0x1c0ce2[_0x4211f0(0x825)] + _0x4211f0(0x2e1) : (_0x2fcd2d[_0x4211f0(0x1e1)] = _0x46f3a1['chats'][0x0]?.['id'] || null, _0x404fb7(_0x3b09f6[_0x4211f0(0x1e1)])); _0x3f7695[_0x4211f0(0xa59)](_0x219fcf); } else { if (_0x1c0ce2[_0x4211f0(0xc02)] === _0x4211f0(0xa1d) && _0x1c0ce2[_0x4211f0(0x48c)]) { if (_0x4211f0(0x405) === _0x4211f0(0x9f6)) { const _0x161905 = _0x923d4e[_0x4211f0(0xb9e)][_0x4211f0(0x461)](_0x18d4ae => _0x18d4ae['id'] === _0x438535); _0x161905 > -0x1 && (_0x1cf705[_0x4211f0(0xb9e)][_0x4211f0(0x4a7)](_0x161905, 0x1), _0xa79537(), _0x2ce310()); } else { _0x3f7695[_0x4211f0(0x776)][_0x4211f0(0xb2c)]('music'); const _0x3378f6 = document['createElement'](_0x4211f0(0xbdf)); _0x3378f6[_0x4211f0(0x781)] = _0x4211f0(0x91b), _0x3378f6[_0x4211f0(0x607)]['musicId'] = _0x4211f0(0x31b) + _0x1c0ce2[_0x4211f0(0x83a)]; const _0x1d6a17 = _0x4211f0(0x649) + _0x1c0ce2[_0x4211f0(0x83a)], _0x34a2d1 = _0x4211f0(0x362) + _0x25d84a + _0x4211f0(0x7e7) + _0x1d6a17 + _0x4211f0(0x3c7); if (_0x1c0ce2['coverId']) _0x393cae(_0x1c0ce2[_0x4211f0(0x5c1)])[_0x4211f0(0x794)](_0x11e6c9 => { const _0x4c55cc = _0x4211f0; if (_0x4c55cc(0x674) !== _0x4c55cc(0x674)) _0x17dcc2[_0x4c55cc(0x7cd)] = _0x4154d5['accountingLedger'], _0x2f26a3['log']('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.'); else { const _0x5f5d63 = document[_0x4c55cc(0x463)](_0x1d6a17); if (_0x5f5d63 && _0x11e6c9) _0x5f5d63[_0x4c55cc(0xb01)] = URL[_0x4c55cc(0x51e)](_0x11e6c9); } }); else { if (_0x1c0ce2[_0x4211f0(0xc0d)]) { if (_0x4211f0(0xc35) === _0x4211f0(0x790)) { const _0x5ce853 = _0x18d42c['createElement'](_0x4211f0(0xbdf)); _0x5ce853['id'] = 'api-watermark', _0x5ce853[_0x4211f0(0x356)] = _0x4211f0(0x637), _0x24d524['assign'](_0x5ce853['style'], { 'position': 'absolute', 'top': _0x4211f0(0x875), 'right': _0x4211f0(0x6d8), 'fontSize': _0x4211f0(0x464), 'lineHeight': _0x4211f0(0xb49), 'color': _0x4211f0(0x75d), 'opacity': _0x4211f0(0x22d), 'cursor': _0x4211f0(0x751), 'zIndex': '1', 'transition': _0x4211f0(0x958), 'whiteSpace': _0x4211f0(0xa3b), 'textAlign': _0x4211f0(0xaac) }), _0x5ce853['onmouseover'] = () => { const _0xf3fafb = _0x4211f0; _0x5ce853[_0xf3fafb(0x80c)][_0xf3fafb(0x801)] = '1'; }, _0x5ce853[_0x4211f0(0x5a8)] = () => { const _0x2bd7ae = _0x4211f0; _0x5ce853['style'][_0x2bd7ae(0x801)] = _0x2bd7ae(0x22d); }, _0x5ce853['addEventListener'](_0x4211f0(0x3bf), () => { const _0xcc87f5 = _0x4211f0; _0x340959['open'](_0xcc87f5(0xc1b), '_blank'); }), _0x34b48b[_0x4211f0(0x80c)][_0x4211f0(0x676)] = _0x4211f0(0x65a), _0xc615b5[_0x4211f0(0xad0)](_0x5ce853); } else setTimeout(() => { const _0x5ecb78 = _0x4211f0, _0x46c328 = document[_0x5ecb78(0x463)](_0x1d6a17); if (_0x46c328) _0x46c328[_0x5ecb78(0xb01)] = _0x1c0ce2['coverUrl']; }, 0x0); } } _0x3378f6[_0x4211f0(0xb00)] = _0x4211f0(0x80d) + _0x34a2d1 + _0x4211f0(0x703) + _0x1c0ce2[_0x4211f0(0x48c)] + _0x4211f0(0x20c) + _0x1c0ce2['artist'] + _0x4211f0(0xb72) + (_0x1c0ce2[_0x4211f0(0xa18)] ? '▶' : '⚠') + _0x4211f0(0x3fe), _0x1c0ce2[_0x4211f0(0xa18)] && _0x3378f6[_0x4211f0(0x582)]('click', function () { const _0x114fcb = _0x4211f0; if (_0x114fcb(0x33b) === _0x114fcb(0x706)) { const _0xd24a7c = _0x46f19f(_0x328af3['authorId']); _0xd24a7c && (_0x55b3ec = _0xd24a7c[_0x114fcb(0x3b3)], _0xcae69b = _0xd24a7c['avatar']); } else { const _0x3c92f6 = { 'id': 'msg_' + _0x1c0ce2[_0x114fcb(0x83a)], 'url': _0x1c0ce2[_0x114fcb(0xa18)] }; _0x39b39f(this, _0x3c92f6); } }), _0x3f7695['appendChild'](_0x3378f6); } } else { if ('CmZsi' !== _0x4211f0(0xab4)) { const { playlist: _0x3d987a, currentIndex: _0x265779 } = _0x37a84a[_0x4211f0(0x433)](_0x2e709e); _0x4e5c23[_0x4211f0(0x9d7)](_0x3d987a) && _0x3d987a['length'] > 0x0 && _0x265779 > -0x1 && (_0x1c8e74['musicPlaylist'] = _0x3d987a, _0x36f22b['currentlyPlayingIndex'] = _0x265779, _0x4b7fcc[_0x4211f0(0x32f)] = ![], _0xa66842()); } else { if (_0x1c5496) { const _0x51d27c = document['createElement']('p'); _0x51d27c[_0x4211f0(0xb00)] = _0x1c5496, _0x51d27c['style']['margin'] = '0', _0x3f7695[_0x4211f0(0xa59)](_0x51d27c); } } } } } } } _0x28862c === 'user' ? _0x4211f0(0x3a0) !== _0x4211f0(0x3a0) ? _0x4eacf6() : (_0x4bffe9[_0x4211f0(0xa59)](_0x3f7695), _0x4bffe9[_0x4211f0(0xa59)](_0x38bdde)) : _0x4211f0(0xb4d) !== _0x4211f0(0x577) ? (_0x4bffe9[_0x4211f0(0xa59)](_0x38bdde), _0x4bffe9[_0x4211f0(0xa59)](_0x3f7695)) : (_0xb430f8[_0x4211f0(0x776)][_0x4211f0(0x965)]('show'), _0x269b2f[_0x4211f0(0x776)][_0x4211f0(0x999)](_0x4211f0(0x940)) && (_0x100e3d['scrollTop'] = _0x1ffa66[_0x4211f0(0x2ea)])); } _0xa1226[_0x4211f0(0xa59)](_0x4bffe9); const _0x85bb29 = document[_0x4211f0(0x58b)](_0x4211f0(0xbdf)); return _0x85bb29[_0x4211f0(0x781)] = _0x4211f0(0x83a), _0x85bb29[_0x4211f0(0x356)] = _0x24a739(_0x1c0ce2[_0x4211f0(0x83a)]), _0xa1226['appendChild'](_0x85bb29), _0x5ea706[_0x4211f0(0xa59)](_0xa1226), _0xa1226; } else _0x54e618['textContent'] = '❚❚'; } document[_0x2481c4(0x463)](_0x2481c4(0xbff))['addEventListener'](_0x2481c4(0x3bf), _0x1daca1); let _0x31253b = null, _0x20a425 = null; function _0x1daca1(_0x95448e) { const _0x3b4d08 = _0x2481c4; if (window['getSelection']()[_0x3b4d08(0x950)]()) return; const _0x2d1eeb = _0x95448e[_0x3b4d08(0x606)][_0x3b4d08(0x23b)]('.message-container'), _0x23e225 = _0x95448e[_0x3b4d08(0x606)][_0x3b4d08(0x23b)](_0x3b4d08(0x5fc)); if (!_0x2d1eeb || _0x23e225) return; const _0x40ae1e = parseInt(_0x2d1eeb[_0x3b4d08(0x607)][_0x3b4d08(0xb7b)], 0xa); if (isNaN(_0x40ae1e)) return; _0x427353(_0x40ae1e); } function _0xfdb8e8() { const _0x2ddbde = _0x2481c4, _0x42e4e1 = _0x168762(); if (!_0x42e4e1) { if (_0x2ddbde(0x616) === 'BJWox') _0x30b7d7 = _0x386487[_0x2ddbde(0x1fa)] || ''; else { _0xae8f92[_0x2ddbde(0x356)] = _0x2ddbde(0xc19); return; } } if (_0x42e4e1[_0x2ddbde(0xc02)] === _0x2ddbde(0x963)) { const _0x20dc85 = _0x543c76(_0x42e4e1[_0x2ddbde(0x3d4)][0x0]); _0xae8f92['textContent'] = _0x20dc85 ? _0x20dc85[_0x2ddbde(0x3b3)] : _0x2ddbde(0x7a2); } else { if ('GsqCS' !== 'GsqCS') { const _0x170263 = []; if (_0xed2555[_0x2ddbde(0x67c)]) _0x170263['push']({ 'text': _0x3051a5[_0x2ddbde(0x67c)] }); if (_0x1cabd9[_0x2ddbde(0x8dc)]) { const _0x243050 = _0x35c207[_0x2ddbde(0x8dc)][_0x2ddbde(0x278)](',')[0x1], _0x51272b = _0x4bf13['image'][_0x2ddbde(0x9ff)](_0x5d3e04[_0x2ddbde(0x8dc)]['indexOf'](':') + 0x1, _0x5d64c8[_0x2ddbde(0x8dc)][_0x2ddbde(0xa81)](';')) || _0x2ddbde(0xbda); _0x170263['push']({ 'inline_data': { 'mime_type': _0x51272b, 'data': _0x243050 } }); } return _0x170263; } else _0xae8f92[_0x2ddbde(0x356)] = _0x42e4e1[_0x2ddbde(0x3b3)] || _0x2ddbde(0x713) + _0x42e4e1[_0x2ddbde(0x3d4)][_0x2ddbde(0x55b)] + ')'; } } function _0x2d5d98(_0xb0c94) { const _0x3ecf8c = _0x2481c4; if (_0x3ecf8c(0x6ab) === _0x3ecf8c(0x6ab)) { const _0x1e26a2 = document[_0x3ecf8c(0x7dd)](_0x3ecf8c(0x85e)); if (_0x1e26a2 && (_0x1e26a2['id'] === _0x3ecf8c(0x3b6) || _0x1e26a2['id'] === _0x3ecf8c(0x905))) _0x3ecf8c(0x386) !== _0x3ecf8c(0x386) ? _0x3cf4de['error']('在准备动态回复时，读取图片失败:', _0x4b2943) : _0x23c996(); else { const _0x549e42 = document['querySelectorAll'](_0x3ecf8c(0x224)); _0x549e42[_0x3ecf8c(0xbe4)](_0x339186 => _0x339186[_0x3ecf8c(0x554)]()); } } else _0x5be472(_0x15ae05, _0x3c880d); } function _0x3dc52f() { const _0x493bf8 = _0x2481c4; if (_0x493bf8(0x5f7) === _0x493bf8(0x5f7)) { if (_0x5f0a6c[_0x493bf8(0x5f8)] && _0x5f0a6c['currentAbortController']) { if (_0x493bf8(0x327) !== 'CjtPu') { _0x282fe1(![]), _0x22e5ab(_0x493bf8(0x9eb)); return; } else console[_0x493bf8(0x5b1)](_0x493bf8(0x7e2)), _0x5f0a6c[_0x493bf8(0x2b0)][_0x493bf8(0x63f)]('User\x20cancelled'), _0x5f0a6c[_0x493bf8(0x2b0)] = null; } _0x5f0a6c[_0x493bf8(0x5f8)] = ![], _0x2d5d98(![]); } else _0x14549a(), _0x12bc65(_0x493bf8(0xb57), _0x493bf8(0x28c)); } function _0x168762() { const _0x57634c = _0x2481c4; return _0x5f0a6c[_0x57634c(0xab8)][_0x57634c(0x3be)](_0x436461 => _0x436461['id'] === _0x5f0a6c['activeChatId']); } function _0x543c76(_0x449acd) { const _0x2caffa = _0x2481c4; if (_0x2caffa(0xbd4) === _0x2caffa(0xb24)) { _0x42a1f8('群聊名称不能为空！'); return; } else return _0x5f0a6c[_0x2caffa(0x723)][_0x2caffa(0x3be)](_0x47cddb => _0x47cddb['id'] === _0x449acd); } function _0x5aefba(_0x41236f) { const _0x699067 = _0x2481c4; if (_0x699067(0x345) !== _0x699067(0x345)) _0x196eeb[_0x699067(0x1e6)]('[' + _0x5f27be + _0x699067(0xb81) + _0x5b65af(_0x31987f) + ']\x20' + _0x586ef8(_0x574081[_0x699067(0x67c)])[_0x699067(0x1e9)]()); else { _0x5f0a6c[_0x699067(0x723)] = _0x5f0a6c[_0x699067(0x723)][_0x699067(0x216)](_0x44dc38 => _0x44dc38['id'] !== _0x41236f), _0x5f0a6c['chats'][_0x699067(0xbe4)](_0x221c6c => { const _0x246684 = _0x699067; _0x221c6c[_0x246684(0xc02)] === _0x246684(0x74a) && (_0x221c6c['participantIds'] = _0x221c6c['participantIds'][_0x246684(0x216)](_0x35f5dd => _0x35f5dd !== _0x41236f)); }); const _0x477076 = _0x5f0a6c['chats'][_0x699067(0x3be)](_0xfd2077 => _0xfd2077[_0x699067(0xc02)] === _0x699067(0x963) && _0xfd2077['participantIds']['includes'](_0x41236f)); _0x477076 && _0x106594(_0x477076['id']), _0x5f0a6c[_0x699067(0xab8)] = _0x5f0a6c['chats'][_0x699067(0x216)](_0x5266b7 => _0x5266b7['type'] !== _0x699067(0x74a) || _0x5266b7[_0x699067(0x3d4)]['length'] > 0x1), _0x5c772f(), _0x30852c(); } } function _0x106594(_0x504ac0) { const _0x5177da = _0x2481c4; _0x5f0a6c[_0x5177da(0xab8)] = _0x5f0a6c[_0x5177da(0xab8)][_0x5177da(0x216)](_0x3bc33a => _0x3bc33a['id'] !== _0x504ac0); try { localStorage[_0x5177da(0x805)](_0x5177da(0x3c3) + _0x504ac0); } catch (_0x317f85) { if ('TQkWr' !== _0x5177da(0x7b4)) console[_0x5177da(0x8d9)](_0x5177da(0x8fe) + _0x504ac0, _0x317f85); else { const _0x5b73d8 = _0x4ae135[_0x5177da(0x202)]; _0x91f7d9['documentElement'][_0x5177da(0x80c)][_0x5177da(0x981)](_0x5177da(0x8ea), _0x5b73d8 + '%'), _0x38b20e['setItem'](_0x5177da(0x3ec), _0x5b73d8), _0x5dedfd(); } } _0x5f0a6c['activeChatId'] === _0x504ac0 && (_0x5177da(0xb46) !== 'RpJjd' ? (_0x5f0a6c[_0x5177da(0x1e1)] = _0x5f0a6c[_0x5177da(0xab8)][0x0]?.['id'] || null, _0x420138(_0x5f0a6c[_0x5177da(0x1e1)])) : _0x3901d1(_0x1f55a0, _0x387a32, !![])), _0x5c772f(); } async function _0x420138(_0x3aec4b) { const _0x363935 = _0x2481c4; _0x5f0a6c[_0x363935(0x1e1)] !== _0x3aec4b && ('WFTnL' !== _0x363935(0xa35) ? (_0x3dc52f(), _0x5f0a6c[_0x363935(0x3c8)] = 0x64) : (_0x257d28(), _0x3d59c0('friendCircleList', _0x363935(0xa1d)))); if (!_0x3aec4b) { _0x5f0a6c[_0x363935(0x1e1)] = null, _0x5c772f(), _0x42aebf(![]), document[_0x363935(0x463)]('chat-view-pane')[_0x363935(0x80c)][_0x363935(0x4b2)] = ''; return; } _0x5f0a6c[_0x363935(0x1e1)] = _0x3aec4b, _0x5c772f(), _0xfdb8e8(), _0x5ea706[_0x363935(0xb00)] = '', _0x2aa27a(!![], _0x363935(0xb6b)), setTimeout(async () => { const _0x49a971 = _0x363935; try { if (_0x49a971(0xbfe) !== _0x49a971(0xbfe)) _0x36f57d[_0x49a971(0x8dc)] = _0x4f039d; else { _0x9b0609(); const _0x1a465e = _0x168762(), _0x4b7dfc = document['getElementById']('chat-view-pane'); let _0x229513 = null; if (_0x1a465e) { if (_0x49a971(0x2b4) !== _0x49a971(0x2b4)) _0x498f9c[_0x49a971(0xa7b)] = _0x4d4ca5[_0x49a971(0x2ea)]; else { if (_0x1a465e[_0x49a971(0xc02)] === _0x49a971(0x963)) { const _0x15c1a6 = _0x1a465e[_0x49a971(0x3d4)][0x0]; _0x15878e(_0x15c1a6), _0x229513 = await _0x393cae('char_wallpaper_' + _0x15c1a6); } else _0x229513 = await _0x393cae(_0x49a971(0x932) + _0x1a465e['id']); _0x229513 ? (_0x4b7dfc[_0x49a971(0x80c)]['backgroundImage'] = _0x49a971(0x205) + URL[_0x49a971(0x51e)](_0x229513) + '\x27)', _0x4b7dfc[_0x49a971(0x80c)][_0x49a971(0x4b0)] = 'cover', _0x4b7dfc[_0x49a971(0x80c)]['backgroundPosition'] = 'center') : _0x4b7dfc[_0x49a971(0x80c)][_0x49a971(0x4b2)] = ''; } } _0x1a8cc0(); } } catch (_0xd20593) { if ('Xcozk' === _0x49a971(0x739)) console[_0x49a971(0x8d9)](_0x49a971(0x7ee), _0xd20593), _0x24537c(_0x49a971(0x9c4) + _0xd20593[_0x49a971(0x9fa)]); else { const _0x599296 = _0x4b5d19[_0x49a971(0x606)][_0x49a971(0x607)]['id']; _0x3da718(_0x49a971(0x90f))[_0x49a971(0x794)](_0x5c0158 => { _0x5c0158 && _0x371ae9(_0x599296); }); } } finally { _0x2aa27a(![]); } }, 0x32); } async function _0x3d3594() { const _0x1fead1 = _0x2481c4; if (_0x5f0a6c[_0x1fead1(0x5f8)]) { if ('fCuBr' !== 'fCuBr') { const _0x48cfa1 = _0x61d678['querySelector'](_0x1fead1(0x81e)); if (_0x48cfa1) _0x48cfa1[_0x1fead1(0x554)](); } else { _0x24537c('正在构思中，请稍候...'); return; } } const _0xfe97db = _0x5f0a6c[_0x1fead1(0xbc8)]; if (_0xfe97db[_0x1fead1(0x55b)] === 0x0) return; let _0x24e417 = -0x1; for (let _0x206057 = _0xfe97db[_0x1fead1(0x55b)] - 0x1; _0x206057 >= 0x0; _0x206057--) { if (_0x1fead1(0x8a0) !== 'avWQL') { _0x20fa4f(_0x1fead1(0x9b2)); return; } else { if (_0xfe97db[_0x206057]['role'] === _0x1fead1(0x5c2)) { _0x24e417 = _0x206057; break; } } } if (_0x24e417 === -0x1 || _0x24e417 === _0xfe97db[_0x1fead1(0x55b)] - 0x1) { if ('NOGkk' !== 'NOGkk') { const _0x165d8d = _0x2799d1(_0x2aa34d[_0x1fead1(0x607)][_0x1fead1(0xb7b)], 0xa); !_0x25d2ff(_0x165d8d) && _0x5235f2(_0x165d8d); } else { _0x24537c(_0x1fead1(0xaa6)); return; } } _0xfe97db['splice'](_0x24e417 + 0x1), _0x5f0a6c[_0x1fead1(0x591)] = [], _0x351209(), _0x706a5c(), _0x4ba40c(_0x5f0a6c['activeMeetingCharId']), setTimeout(() => { _0x4a615f(); }, 0x64); } async function _0x326da6() { const _0x71d858 = _0x2481c4; if (_0x71d858(0x1eb) !== _0x71d858(0x254)) { if (_0x5f0a6c[_0x71d858(0x5f8)]) { if (_0x71d858(0x6e5) === _0x71d858(0x1f7)) _0x3c310c += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; else { _0x24537c(_0x71d858(0x770)); return; } } const _0x11941f = _0x5f0a6c[_0x71d858(0xbc8)]; if (_0x11941f[_0x71d858(0x55b)] === 0x0) return; let _0x4cc7cb = -0x1; for (let _0x1cee12 = _0x11941f['length'] - 0x1; _0x1cee12 >= 0x0; _0x1cee12--) { if (_0x11941f[_0x1cee12][_0x71d858(0x579)] === _0x71d858(0x5c2)) { if (_0x71d858(0xc21) === 'gPlZq') _0x38be12[_0x71d858(0x80c)][_0x71d858(0x6df)] = 'none', _0xfa74[_0x71d858(0x752)] = _0x3390db[_0x71d858(0x752)] = _0xa8fc69[_0x71d858(0x752)] = null, _0x37462a[_0x71d858(0x4bf)]('keydown', _0x5badcd), _0x1e7561(_0x1a0752); else { _0x4cc7cb = _0x1cee12; break; } } } if (_0x4cc7cb === -0x1 || _0x4cc7cb === _0x11941f[_0x71d858(0x55b)] - 0x1) { _0x24537c(_0x71d858(0x4e6)); return; } _0x11941f[_0x71d858(0x4a7)](_0x4cc7cb + 0x1), _0x351209(), _0x23c996(), setTimeout(() => { const _0xce468a = _0x71d858; if (_0xce468a(0x372) !== _0xce468a(0x372)) { _0x579730[_0xce468a(0xb00)] = _0xce468a(0x6a5); return; } else _0x4a615f(); }, 0x64); } else { const _0x2adb29 = _0x2d859c[0x0], _0x1cfbd2 = new _0x13b49c(_0x2adb29[_0x71d858(0x4d0)] + _0x71d858(0xa4b)), _0x37fde9 = _0x1cfbd2 - _0xc65d4b, _0x4db4da = _0x455526[_0x71d858(0xb45)](_0x37fde9 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x338c1a['textContent'] = _0x71d858(0x89e) + _0x2adb29[_0x71d858(0x67c)] + '」', _0x586e70[_0x71d858(0xb00)] = '<span>' + _0x4db4da + '</span><span\x20class=\x22unit\x22>天</span>'; } } function _0x2a339d(_0x4bee4c = null) { const _0x521853 = _0x2481c4, _0x261cc8 = _0x4bee4c ?? _0x44e53d[_0x521853(0x202)][_0x521853(0x1e9)](); if (_0x261cc8 === '' || !_0x5f0a6c[_0x521853(0x1e1)]) return; const _0x2cc304 = document['querySelector'](_0x521853(0x85e)), _0x35149c = _0x2cc304['id'] === _0x521853(0x3b6), _0x5c672a = { 'role': 'user', 'content': _0x261cc8, 'timestamp': Date['now'](), 'isOffline': _0x35149c }; _0x5f0a6c[_0x521853(0xa28)] && ('EEZwx' === 'EEZwx' ? _0x5c672a[_0x521853(0x5d3)] = { ..._0x5f0a6c[_0x521853(0xa28)] } : _0x514d2f = _0x30b4ca[_0x521853(0x7ae)][0x0]), _0x5f0a6c[_0x521853(0xbc8)]['push'](_0x5c672a), _0x351209(), _0x23c996(), !_0x4bee4c && (_0x44e53d[_0x521853(0x202)] = ''), _0x187793(); } function _0x5b1cd3(_0x33e952) { const _0x24d103 = _0x2481c4; if (_0x24d103(0x6ce) === _0x24d103(0xb2e)) _0xd43d9[_0x24d103(0x763)] = _0x1e91d9; else { if (!_0x33e952 || !_0x5f0a6c['activeChatId']) return; const _0x436d5d = { 'role': _0x24d103(0x5c2), 'content': _0x24d103(0x2a0) + _0x33e952[_0x24d103(0x3b3)] + ']', 'displayUrl': _0x33e952['url'], 'timestamp': Date[_0x24d103(0xb71)]() }; _0x5f0a6c['conversationHistory'][_0x24d103(0x1e6)](_0x436d5d), _0xa7043(_0x436d5d, _0x5f0a6c[_0x24d103(0xbc8)][_0x24d103(0x55b)] - 0x1), _0x351209(), _0x23099c[_0x24d103(0x776)][_0x24d103(0x554)](_0x24d103(0x940)); } } async function _0x39692(_0x3f8e00) { const _0x3e5299 = _0x2481c4, _0x1550c4 = _0x3f8e00[_0x3e5299(0x606)][_0x3e5299(0x4b6)][0x0]; if (!_0x1550c4 || !_0x5f0a6c['activeChatId']) return; _0x2aa27a(!![], _0x3e5299(0x2bb)); try { const _0x597e0b = await _0x1f84b9(_0x1550c4, 0x320, 0.8, !![]), _0x3c6a26 = _0x3e5299(0x774) + Date[_0x3e5299(0xb71)](); await _0x4d5a5e(_0x3c6a26, _0x597e0b); const _0x30213e = _0x44e53d['value'][_0x3e5299(0x1e9)](); _0x44e53d['value'] = ''; const _0xc7245a = { 'role': _0x3e5299(0x5c2), 'content': _0x30213e, 'imageId': _0x3c6a26, 'timestamp': Date[_0x3e5299(0xb71)]() }; _0x5f0a6c[_0x3e5299(0xbc8)][_0x3e5299(0x1e6)](_0xc7245a), _0xa7043(_0xc7245a, _0x5f0a6c[_0x3e5299(0xbc8)]['length'] - 0x1), _0x351209(); } catch (_0x5d65e8) { if (_0x3e5299(0x38a) !== 'jprqY') { const _0x15f079 = _0x3b8119[_0x3e5299(0x98e)](_0x3e5299(0x8a8), _0x3e5299(0x775)), _0x136f9c = _0x15f079[_0x3e5299(0xb08)](_0x3e5299(0x8a8)), _0xe63a05 = _0x136f9c[_0x3e5299(0x71e)]({ 'id': _0x1d1535, 'blob': _0x51b8f8 }); _0xe63a05[_0x3e5299(0x241)] = () => _0x5ce74c(_0xe63a05[_0x3e5299(0x77c)]), _0xe63a05[_0x3e5299(0x4d1)] = () => _0x579a8b(_0xe63a05['error']); } else _0x24537c(_0x3e5299(0x411) + _0x5d65e8[_0x3e5299(0x9fa)]); } finally { if (_0x3e5299(0x410) === _0x3e5299(0x5c6)) return { 'type': 'sticker', 'name': _0x297d60[0x1]['trim']() }; else _0x2aa27a(![]), _0x3f8e00['target'][_0x3e5299(0x202)] = ''; } } async function _0x52ef30() { const _0x1bec89 = _0x2481c4; if (!_0x5f0a6c['activeChatId']) return; const _0x6236 = await _0x3e4c16(); if (!_0x6236) return; _0x24537c(_0x1bec89(0x74c)); try { if (_0x1bec89(0x21c) === _0x1bec89(0x2ca)) { const _0x2fddfc = _0x23aaee['getElementById'](_0x1bec89(0x6b7)); _0x4c22fa[_0x1bec89(0x463)]('accounting-title')[_0x1bec89(0x356)] = '账本', _0x1d8d88['getElementById'](_0x1bec89(0xadc))[_0x1bec89(0xb00)] = ''; const _0x2e876c = _0x18e7ff[_0x1bec89(0x6ee)](_0x479717['accountingLedger'])[_0x1bec89(0x61a)]((_0x2edf3d, _0x5731be) => new _0x2c97e1(_0x5731be) - new _0x4f02d4(_0x2edf3d)); if (_0x2e876c[_0x1bec89(0x55b)] === 0x0) { _0x2fddfc[_0x1bec89(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>'; return; } _0x2fddfc[_0x1bec89(0xb00)] = '', _0x2e876c[_0x1bec89(0xbe4)](_0x6794c1 => { const _0x5cfa52 = _0x1bec89, _0x5a0774 = _0x360270['createElement']('div'); _0x5a0774[_0x5cfa52(0x781)] = 'expense-item', _0x5a0774['style'][_0x5cfa52(0x408)] = _0x5cfa52(0x751); const _0x241104 = _0x5a56a5['accountingLedger'][_0x6794c1], _0x34a750 = _0x241104[_0x5cfa52(0x68c)][_0x5cfa52(0x818)]((_0x44e79f, _0x4819af) => _0x44e79f + (_0x4819af[_0x5cfa52(0x8bf)] || 0x0), 0x0); _0x5a0774[_0x5cfa52(0xb00)] = _0x5cfa52(0x933) + _0x6794c1 + _0x5cfa52(0x46c) + _0x34a750[_0x5cfa52(0x2c4)](0x2) + _0x5cfa52(0xa5d), _0x5a0774[_0x5cfa52(0x582)](_0x5cfa52(0x3bf), () => { const _0x192eec = _0x5cfa52; _0x366c73[_0x192eec(0x776)][_0x192eec(0x554)]('active'), _0x50da4a[_0x192eec(0x776)][_0x192eec(0xb2c)](_0x192eec(0x8ef)), _0x376341(_0x241104, _0x6794c1); }), _0x2fddfc[_0x5cfa52(0xa59)](_0x5a0774); }); } else { const _0x205285 = await _0x13dea2(_0x6236['songName'], _0x6236[_0x1bec89(0x2d1)]), _0x187898 = { 'role': _0x1bec89(0x5c2), 'type': 'music', 'content': _0x1bec89(0x822) + _0x6236[_0x1bec89(0x48c)] + _0x1bec89(0x332) + _0x6236[_0x1bec89(0x2d1)] + ']', 'songName': _0x6236[_0x1bec89(0x48c)], 'artist': _0x6236[_0x1bec89(0x2d1)], 'coverUrl': _0x205285[_0x1bec89(0xa53)], 'playableUrl': _0x205285[_0x1bec89(0xb0d)], 'timestamp': Date[_0x1bec89(0xb71)]() }; _0x5f0a6c[_0x1bec89(0xbc8)][_0x1bec89(0x1e6)](_0x187898), _0x351209(), _0x1a8cc0(); } } catch (_0xfde520) { if (_0x1bec89(0x494) === _0x1bec89(0xa4e)) { const _0x5541ae = _0x34f932['createElement']('div'); _0x5541ae[_0x1bec89(0x781)] = _0x1bec89(0xa2a), _0x5541ae[_0x1bec89(0xb00)] = _0x1bec89(0xb09) + _0x212497['id'] + _0x1bec89(0x2e7) + _0x2c4f68['id'] + _0x1bec89(0x7c1) + (_0x799e1d[_0x1bec89(0x6b6)] || _0x8f364f) + _0x1bec89(0x446) + _0xbfb886['id'] + _0x1bec89(0x430) + _0x5b63b7[_0x1bec89(0x3b3)] + _0x1bec89(0x7f5), _0x210005[_0x1bec89(0xa59)](_0x5541ae); } else console['error'](_0x1bec89(0x49a), _0xfde520), _0x24537c('搜索失败:\x20' + _0xfde520[_0x1bec89(0x9fa)]); } } function _0x511e15(_0x5ec7c4, _0x73cfdc = 0x78) { const _0x38f0a0 = _0x2481c4; if (_0x38f0a0(0x738) !== _0x38f0a0(0x738)) _0x5befe4 *= _0x56d820 / _0x529054, _0x1ee5af = _0x20022a; else { const _0x291a41 = _0x36a547 => { const _0x30342e = _0x38f0a0; if (_0x36a547[_0x30342e(0x579)] === _0x30342e(0x5c2)) return _0x5f0a6c[_0x30342e(0x404)]?.[_0x30342e(0x3b3)] || _0x30342e(0x222); if (_0x36a547['senderId']) { const _0x5e188b = _0x543c76(_0x36a547['senderId']); return _0x5e188b?.[_0x30342e(0x3b3)] || _0x30342e(0x447); } if (_0x5ec7c4?.['type'] === 'private') { const _0x356c81 = _0x543c76(_0x5ec7c4[_0x30342e(0x3d4)][0x0]); return _0x356c81?.[_0x30342e(0x3b3)] || 'AI'; } return _0x30342e(0x725); }, _0x260a0e = _0x5f0a6c['conversationHistory'][_0x38f0a0(0x929)](-_0x73cfdc), _0x5b7388 = []; for (const _0x5501b1 of _0x260a0e) { if (_0x38f0a0(0x361) === _0x38f0a0(0x361)) { if (_0x5501b1['displayUrl']) { if ('FjyxR' !== _0x38f0a0(0xa9f)) { const _0x5ea4d4 = new _0x36869a(); _0x5ea4d4['onloadend'] = () => _0x542d7b(_0x5ea4d4[_0x38f0a0(0x77c)]), _0x5ea4d4['onerror'] = _0x1e121d, _0x5ea4d4[_0x38f0a0(0x442)](_0x1d9eab); } else _0x5b7388[_0x38f0a0(0x1e6)]('[' + _0x291a41(_0x5501b1) + _0x38f0a0(0x2c7) + (_0x5501b1[_0x38f0a0(0x67c)]?.[_0x38f0a0(0x294)](/：(.+?)]/)?.[0x1] || '表情') + ']'); } else { if (_0x5501b1[_0x38f0a0(0x8dc)]) { if ('WKhHl' === 'WKhHl') { const _0x8ca2ed = _0x5501b1[_0x38f0a0(0x67c)] ? '\x20' + _0x5501b1[_0x38f0a0(0x67c)] : ''; _0x5b7388[_0x38f0a0(0x1e6)]('[' + _0x291a41(_0x5501b1) + _0x38f0a0(0xa87) + _0x8ca2ed); } else { if (_0x3b4d81 === null) return; const _0x10756d = _0x59e8cd[_0x38f0a0(0x202)]['trim'](); if (_0x10756d === '') { _0x364806(); return; } const _0x189245 = _0x465d88[_0x38f0a0(0xbc8)][_0x1cf744]; _0x189245 && (_0x189245[_0x38f0a0(0x67c)] = _0x10756d, _0x4cbe87(), _0x5af892()), _0x1b3326[_0x38f0a0(0x776)][_0x38f0a0(0x554)](_0x38f0a0(0x940)), _0x42a874 = null; } } else _0x5501b1[_0x38f0a0(0x67c)] && _0x5b7388['push']('[' + _0x291a41(_0x5501b1) + ']\x20' + _0x5501b1[_0x38f0a0(0x67c)]); } } else _0x2f5c1b(_0x3d3e04, { 'force': !![], 'delayMs': _0x508988 }), _0x56a91c += 0x1f4; } return _0x5b7388[_0x38f0a0(0x3b9)]('\x0a'); } } function _0x180995(_0x176d3b, _0x5048a1) { const _0x4785a0 = _0x2481c4; if (!_0x176d3b || !_0x5048a1) return null; const _0x3f76d7 = _0x5048a1[_0x4785a0(0x294)](/@([^\s:：,，。!?]+)/); if (!_0x3f76d7) return null; const _0x26e8a1 = _0x3f76d7[0x1][_0x4785a0(0x3ae)](); for (const _0x39aca3 of _0x176d3b['participantIds']) { const _0x211f1b = _0x543c76(_0x39aca3); if (!_0x211f1b?.[_0x4785a0(0x3b3)]) continue; if (_0x211f1b[_0x4785a0(0x3b3)][_0x4785a0(0x3ae)]() === _0x26e8a1) return _0x211f1b; if (_0x211f1b['name'][_0x4785a0(0x3ae)]()['startsWith'](_0x26e8a1)) return _0x211f1b; } return null; } function _0x220e7c(_0x1ad614) { const _0x2a3749 = _0x2481c4, _0x2a54f9 = _0x1ad614[_0x2a3749(0xa81)]('{'), _0x377026 = _0x1ad614['lastIndexOf']('}'); if (_0x2a54f9 >= 0x0 && _0x377026 > _0x2a54f9) return _0x1ad614['slice'](_0x2a54f9, _0x377026 + 0x1); return _0x1ad614; } function _0x3fb954(_0x150a0a, _0x176103, _0x49a728) { const _0x2a34b7 = _0x2481c4; if (_0x2a34b7(0x387) !== _0x2a34b7(0x6b8)) { const _0xfb96eb = new Map(_0x176103[_0x2a34b7(0x575)](_0x4c7e23 => [String(_0x4c7e23['id']), _0x4c7e23])), _0x397abe = _0x1e5705 => String(_0x1e5705 || '')[_0x2a34b7(0x3ae)]()[_0x2a34b7(0x219)](/\s+/g, ''), _0x56ec57 = new Map(_0x176103[_0x2a34b7(0x575)](_0x5f4bd5 => [_0x397abe(_0x5f4bd5[_0x2a34b7(0x3b3)]), _0x5f4bd5])), _0x71c11b = new Set(_0x49a728), _0x5dae1f = { 'events': [] }; for (const _0x98a5cc of _0x150a0a?.[_0x2a34b7(0xa0c)] || []) { const _0x168042 = _0x98a5cc[_0x2a34b7(0xb6f)] ?? _0x98a5cc[_0x2a34b7(0x791)] ?? _0x98a5cc[_0x2a34b7(0xa52)] ?? _0x98a5cc[_0x2a34b7(0x460)] ?? _0x98a5cc[_0x2a34b7(0x579)] ?? _0x98a5cc['name']; if (!_0x168042) continue; let _0x349244 = _0xfb96eb[_0x2a34b7(0x7a6)](String(_0x168042)) || _0x56ec57[_0x2a34b7(0x7a6)](_0x397abe(_0x168042)); if (!_0x349244) continue; const _0x25eeb6 = (_0x98a5cc[_0x2a34b7(0xabd)] || _0x98a5cc[_0x2a34b7(0xc02)] || _0x2a34b7(0x3a1))['toLowerCase'](); if (_0x25eeb6 === 'sticker') { if (_0x2a34b7(0x9b9) !== _0x2a34b7(0x273)) { const _0x4563d5 = (_0x98a5cc[_0x2a34b7(0xbec)] ?? _0x98a5cc[_0x2a34b7(0x3c4)] ?? _0x98a5cc[_0x2a34b7(0xbf6)] ?? _0x98a5cc[_0x2a34b7(0xa5f)])?.[_0x2a34b7(0x1e9)](); if (_0x4563d5 && _0x71c11b['has'](_0x4563d5)) _0x5dae1f[_0x2a34b7(0xa0c)][_0x2a34b7(0x1e6)]({ 'senderId': _0x349244['id'], 'kind': _0x2a34b7(0xbec), 'sticker': _0x4563d5 }); else { const _0x3cdb7e = String(_0x98a5cc[_0x2a34b7(0x67c)] ?? _0x98a5cc[_0x2a34b7(0x3a1)] ?? '')['trim']() || _0x2a34b7(0x849) + (_0x4563d5 || _0x2a34b7(0x336)) + ']'; if (_0x3cdb7e) _0x5dae1f['events'][_0x2a34b7(0x1e6)]({ 'senderId': _0x349244['id'], 'kind': _0x2a34b7(0x3a1), 'content': _0x3cdb7e }); } } else _0x53b54e = _0x2a5cd4(_0xc260f2); } else { if (_0x25eeb6 === _0x2a34b7(0xa1d) && _0x98a5cc['songName'] && _0x98a5cc[_0x2a34b7(0x2d1)]) _0x5dae1f[_0x2a34b7(0xa0c)]['push']({ 'senderId': _0x349244['id'], 'kind': _0x2a34b7(0xa1d), 'songName': _0x98a5cc[_0x2a34b7(0x48c)], 'artist': _0x98a5cc[_0x2a34b7(0x2d1)] }); else { if ('IHSws' !== _0x2a34b7(0x36f)) { const _0xd3c7c9 = String(_0x98a5cc[_0x2a34b7(0x67c)] ?? _0x98a5cc[_0x2a34b7(0x3a1)] ?? _0x98a5cc[_0x2a34b7(0x9fa)] ?? '')[_0x2a34b7(0x1e9)](); if (_0xd3c7c9) _0x5dae1f[_0x2a34b7(0xa0c)][_0x2a34b7(0x1e6)]({ 'senderId': _0x349244['id'], 'kind': _0x2a34b7(0x3a1), 'content': _0xd3c7c9 }); } else { const _0x22a941 = _0x14aca6[_0x2a34b7(0x433)](_0x132316); _0x235be3[_0x2a34b7(0x9d7)](_0x22a941) && (_0x2d2ff4 = _0x22a941[_0x2a34b7(0x216)](_0x2d5acb => _0x2d5acb && typeof _0x2d5acb === 'object' && typeof _0x2d5acb[_0x2a34b7(0x579)] === _0x2a34b7(0xbc2) && typeof _0x2d5acb['content'] !== 'undefined')); } } } } return _0x5dae1f; } else { const _0x5d5cd2 = _0x36a310[_0x2a34b7(0x5e8)][_0x2a34b7(0x575)](_0x1978d2 => _0xd636b4(_0x1978d2)?.[_0x2a34b7(0x3b3)] || '未知')['join']('、'), _0x8cf5c9 = _0x2a34b7(0x4fd); _0x1a810f = _0x2a34b7(0x8ee) + _0x8cf5c9 + '\x20' + _0x5d5cd2 + '</div>'; } } async function _0x3e8c96(_0x348308) { const _0x3f84f4 = _0x2481c4; if (_0x3f84f4(0x935) === _0x3f84f4(0x3f3)) _0x20bf04[_0x3f84f4(0x2b0)] = null; else { if (!_0x348308 || !Array['isArray'](_0x348308['events']) || _0x348308[_0x3f84f4(0xa0c)][_0x3f84f4(0x55b)] === 0x0) return; const _0x170ac4 = _0x2e57aa => _0x2e57aa + Math[_0x3f84f4(0xa37)](Math[_0x3f84f4(0x642)]() * 0x190); let _0x4e3986 = 0x1f4; for (const _0x351025 of _0x348308[_0x3f84f4(0xa0c)]) { await new Promise(_0x5bdd6e => setTimeout(_0x5bdd6e, _0x170ac4(_0x4e3986))), _0x4e3986 = 0x2bc; const _0x54c190 = _0x5f0a6c['conversationHistory']['at'](-0x1)?.[_0x3f84f4(0x300)] ?? ![]; if (_0x351025[_0x3f84f4(0xabd)] === _0x3f84f4(0xbec)) { if (_0x3f84f4(0x288) === _0x3f84f4(0x288)) { const _0x2cbad5 = _0x47fa25[_0x3f84f4(0x3be)](_0x3f6919 => _0x3f6919[_0x3f84f4(0x3b3)] === _0x351025[_0x3f84f4(0xbec)]); if (_0x2cbad5) { const _0x4308de = { 'role': _0x3f84f4(0x41d), 'content': _0x3f84f4(0x2ae) + _0x2cbad5[_0x3f84f4(0x3b3)] + ']', 'displayUrl': _0x2cbad5['url'], 'senderId': _0x351025[_0x3f84f4(0xb6f)], 'timestamp': Date['now'](), 'isOffline': _0x54c190 }; _0x5f0a6c[_0x3f84f4(0xbc8)][_0x3f84f4(0x1e6)](_0x4308de), _0x351209(), _0x23c996(); } } else _0x441dbf(), _0x2205e8(_0x3f84f4(0x211), _0x3f84f4(0x404)); } else { if (_0x351025[_0x3f84f4(0xabd)] === _0x3f84f4(0xa1d) && _0x351025[_0x3f84f4(0x48c)] && _0x351025[_0x3f84f4(0x2d1)]) { if (_0x3f84f4(0x5a3) === _0x3f84f4(0x5a3)) { const { songName: _0x23bbe0, artist: _0x55ff81 } = _0x351025, _0x4d6f24 = { 'role': _0x3f84f4(0x41d), 'type': _0x3f84f4(0xa1d), 'content': _0x3f84f4(0x68a) + _0x23bbe0 + _0x3f84f4(0x332) + _0x55ff81 + ']', 'songName': _0x23bbe0, 'artist': _0x55ff81, 'senderId': _0x351025['senderId'], 'timestamp': Date['now'](), 'isOffline': _0x54c190 }; try { const _0x5d9990 = await _0x13dea2(_0x23bbe0, _0x55ff81); _0x4d6f24['coverUrl'] = _0x5d9990[_0x3f84f4(0xa53)], _0x4d6f24[_0x3f84f4(0xa18)] = _0x5d9990['url']; } catch (_0x25ce74) { console[_0x3f84f4(0x8d9)](_0x3f84f4(0x29f) + _0x23bbe0 + _0x3f84f4(0x332) + _0x55ff81 + '):', _0x25ce74), _0x4d6f24[_0x3f84f4(0xc0d)] = null, _0x4d6f24['playableUrl'] = null; } _0x5f0a6c[_0x3f84f4(0xbc8)][_0x3f84f4(0x1e6)](_0x4d6f24), _0x351209(), _0x23c996(); } else _0x440704[_0x3f84f4(0x8d9)](_0x3f84f4(0x4e2), _0x1acbae), _0x50ced5[_0x3f84f4(0xc02)] = _0x3f84f4(0x3a1); } else { if (_0x351025[_0x3f84f4(0xabd)] === _0x3f84f4(0x3a1)) { const _0x54947f = _0x2d1715(_0x351025[_0x3f84f4(0x67c)])[_0x3f84f4(0x929)](0x0, 0x3); for (let _0x14d225 = 0x0; _0x14d225 < _0x54947f[_0x3f84f4(0x55b)]; _0x14d225++) { if (_0x14d225 > 0x0) await new Promise(_0x579cd9 => setTimeout(_0x579cd9, _0x170ac4(0x190))); const _0x51ae50 = { 'role': _0x3f84f4(0x41d), 'content': _0x54947f[_0x14d225], 'senderId': _0x351025['senderId'], 'timestamp': Date[_0x3f84f4(0xb71)](), 'isOffline': _0x54c190 }; _0x5f0a6c[_0x3f84f4(0xbc8)]['push'](_0x51ae50), _0x351209(), _0x23c996(); } } } } } } } async function _0x3d5566(_0x3020ce, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x286261 = _0x2481c4; await new Promise(_0x3c9789 => setTimeout(_0x3c9789, 0xa)); if (!_0x5f0a6c[_0x286261(0x720)][_0x286261(0x869)] || !_0x5f0a6c[_0x286261(0x720)]['key'] || !_0x5f0a6c[_0x286261(0x720)][_0x286261(0x4cc)]) return _0x24537c('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; const _0x126a7d = _0x168762(); if (!_0x126a7d || !_0x3020ce) return ![]; const _0x1d91da = _0x1f5ce5(_0x126a7d['id']), _0xfbb330 = _0x5f0a6c[_0x286261(0xbc8)]['at'](-0x1)?.['role'] === _0x286261(0x5c2); if (!force && !_0xfbb330) return ![]; const _0x4a4b53 = _0x5f0a6c['conversationHistory']['at'](-0x1)?.[_0x286261(0x300)] ?? ![]; if (delayMs) await new Promise(_0x471350 => setTimeout(_0x471350, delayMs)); _0x4a4b53 ? _0x286261(0x601) === _0x286261(0x27a) ? (_0x595dec[_0x286261(0xa59)](_0x105a41), _0x15749b['appendChild'](_0x422dae)) : document[_0x286261(0x463)]('galgame-text')[_0x286261(0x356)] = '（正在构思中...）' : 'PzxAW' !== _0x286261(0x66a) ? _0x2953f3[_0x286261(0x80c)]['backgroundImage'] = _0x286261(0x333) : _0x2d5d98(!![]); let _0x22e375 = ''; const _0x2f9cdd = _0x168762(); if (_0x2f9cdd?.[_0x286261(0xc16)]?.[_0x286261(0x40c)]) { if (_0x286261(0x584) !== _0x286261(0x84a)) { const _0x448042 = _0x2f9cdd[_0x286261(0xc16)], _0x5221b2 = await _0x602038(_0x448042[_0x286261(0x825)]); if (_0x5221b2 && _0x5221b2[_0x286261(0x86b)]) { if (_0x286261(0xc12) === _0x286261(0xa76)) { if (_0x191aac[_0x286261(0x3b3)] === _0x286261(0x845)) return _0x75b81d[_0x286261(0x5b1)](_0x286261(0x475)), ''; throw _0x417814; } else { const _0x3f883d = _0x29138d(_0x5221b2[_0x286261(0x86b)]); if (_0x3f883d[_0x286261(0x55b)] > 0x0) { const _0x13e9ef = _0x29fd86['currentTime']; let _0x41b93f = -0x1; for (let _0x2dd5e8 = 0x0; _0x2dd5e8 < _0x3f883d['length']; _0x2dd5e8++) { if (_0x13e9ef >= _0x3f883d[_0x2dd5e8]['time']) _0x41b93f = _0x2dd5e8; else break; } const _0x2d7330 = _0x3f883d[_0x286261(0x575)]((_0x961296, _0x4fba0e) => { const _0x53aa86 = _0x286261, _0x33c2d6 = _0x4fba0e === _0x41b93f ? _0x53aa86(0x9c8) : ''; return '' + _0x33c2d6 + _0x961296[_0x53aa86(0x3a1)]; })['join']('\x0a'); _0x22e375 = (_0x286261(0x3b0) + _0x448042['artist'] + _0x286261(0x5f5) + _0x448042[_0x286261(0x48c)] + '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a' + _0x2d7330 + '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20')[_0x286261(0x1e9)](); } } } } else { const _0x4b5318 = _0x2a98e0[_0x286261(0x463)](_0x286261(0xb92)), _0x362e48 = _0x35e8b0['getElementById'](_0x286261(0x85b)), _0x12dc1a = _0x56dec2['getElementById'](_0x286261(0xa6a)), _0x4851ba = _0x54b123[_0x286261(0x463)](_0x286261(0x31f)), _0x1faa26 = _0x5cc3f4; _0x1faa26 && _0x1faa26[_0x286261(0x672)] ? (_0x362e48[_0x286261(0x356)] = _0x1faa26[_0x286261(0x879)], _0x12dc1a[_0x286261(0x356)] = _0x1faa26['artist'], _0x4b5318[_0x286261(0x776)][_0x286261(0xb2c)](_0x286261(0x68d)), _0x4b5318[_0x286261(0x80c)][_0x286261(0x981)](_0x286261(0x93d), _0x286261(0x9a3) + _0x1faa26[_0x286261(0xa53)] + ')')) : (_0x362e48[_0x286261(0x356)] = _0x286261(0x641), _0x12dc1a[_0x286261(0x356)] = '请在动态或聊天中播放', _0x4b5318[_0x286261(0x776)][_0x286261(0x554)]('is-playing'), _0x4851ba['style'][_0x286261(0x981)]('--widget-cover-image', _0x286261(0x333))); } } let _0xd43371 = '', _0x4fb3b6 = ''; const _0x334315 = _0x5f0a6c[_0x286261(0xbc8)][_0x286261(0x55b)]; if (_0x334315 > 0x1) { const _0x155acc = _0x5f0a6c[_0x286261(0xbc8)][_0x334315 - 0x2], _0xe9e936 = _0x5f0a6c[_0x286261(0xbc8)][_0x334315 - 0x1]; if (_0x155acc['isOffline'] === ![] && _0xe9e936[_0x286261(0x300)] === !![]) _0x4fb3b6 = _0x286261(0x719) + _0x1d91da[_0x286261(0x3b3)] + _0x286261(0x234); else _0x155acc[_0x286261(0x300)] === !![] && _0xe9e936['isOffline'] === ![] && (_0x4fb3b6 = _0x286261(0xba6) + _0x1d91da[_0x286261(0x3b3)] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); } if (_0x4a4b53) { const _0x50be36 = _0x286261(0xc31); _0xd43371 = _0x286261(0x8eb) + _0x1d91da[_0x286261(0x3b3)] + _0x286261(0xb3f) + _0x50be36 + _0x286261(0x615) + _0x3020ce[_0x286261(0x3b3)] + _0x286261(0x7e4) + _0x50be36 + _0x286261(0x8d3) + _0x50be36 + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0x286261(0x207); const { omniText: _0x5a0334 } = _0x27c1ec(_0x3020ce['id'], _0x126a7d['id']), _0x1f09ec = _0x1a340e(), _0x225757 = _0x17f027(_0x3020ce['id']), _0x2b641d = _0x4e67bb(_0x3020ce['id']), _0x3f87de = await _0x212055(_0x3020ce['id']), _0x52b72b = typeof _0xd360ed === _0x286261(0xbc2) ? _0xd360ed[_0x286261(0x512)]('{charName}', _0x3020ce['name'])['replaceAll'](_0x286261(0x698), _0x1d91da[_0x286261(0x3b3)] || '用户') : '', _0x1df2eb = _0x47fa25[_0x286261(0x575)](_0x5bb038 => _0x5bb038[_0x286261(0x3b3)])[_0x286261(0x3b9)](',\x20'); let _0x1da6ae = ''; if (_0x3020ce[_0x286261(0xb2b)] && _0x3020ce['linkedWorldBookIds'][_0x286261(0x55b)] > 0x0) { const _0x3a50ed = _0x3020ce[_0x286261(0xb2b)]['map'](_0x3efe55 => _0x5f0a6c['worldBooks']['find'](_0x3e1982 => _0x3e1982['id'] === _0x3efe55))['filter'](Boolean)[_0x286261(0x575)](_0xb81e35 => _0x286261(0x60e) + _0xb81e35['name'] + '\x0a' + _0xb81e35[_0x286261(0x67c)])['join'](''); if (_0x3a50ed) _0x1da6ae = _0x286261(0x25c) + _0x3a50ed; } const _0x5dc0f0 = _0x1d91da[_0x286261(0x91d)] ? '\x0a\x0a#\x20关于对话者“' + _0x1d91da[_0x286261(0x3b3)] + '”的补充信息\x0a' + _0x1d91da['persona'] : ''; let _0x9263c5 = ''; const _0x30ca37 = new Date(), _0x2c747a = _0xd3ebbc(_0x3020ce['id']); _0x9263c5 = _0x286261(0x7ca), _0x9263c5 += _0x286261(0x69a) + _0x30ca37[_0x286261(0x660)]('zh-CN', { 'dateStyle': _0x286261(0x872), 'timeStyle': 'short' }) + '\x0a'; if (_0x2c747a) { if (_0x286261(0x39a) !== _0x286261(0x449)) { const _0x3ad9c9 = new Date(_0x2c747a[_0x286261(0x83a)]), _0x2e815f = _0x380a73(_0x3ad9c9); _0x9263c5 += _0x286261(0xb99) + _0x2e815f + '\x0a'; const _0x579a36 = _0x30ca37[_0x286261(0x7bc)](), _0x3362ec = _0x3ad9c9[_0x286261(0x7bc)](), _0x582a5b = new Date(); _0x582a5b[_0x286261(0x959)](_0x30ca37['getDate']() - 0x1); const _0x4c68f0 = _0x582a5b[_0x286261(0x7bc)](); if (_0x579a36 === _0x3362ec) { if (_0x286261(0xb8c) !== _0x286261(0x939)) { const _0x2fb229 = (_0x30ca37 - _0x3ad9c9) / (0x3e8 * 0x3c); if (_0x2fb229 < 0x3c) { if ('yLofq' !== 'yLofq') { if (_0x4e2291[_0x286261(0x579)] === _0x286261(0x5c2) && _0x348ab8[_0x286261(0x8dc)]) return { 'role': _0x286261(0x5c2), 'content': [{ 'type': _0x286261(0x3a1), 'text': _0x590e09[_0x286261(0x67c)] || '\x20' }, { 'type': _0x286261(0x95b), 'image_url': { 'url': _0x575115[_0x286261(0x8dc)], 'detail': 'high' } }] }; return { 'role': _0x28dacb[_0x286261(0x579)], 'content': _0x3e78e7[_0x286261(0x67c)] }; } else _0x9263c5 += _0x286261(0x2e2); } else _0x286261(0x1ea) === 'UgRSB' ? (_0x6712ef[_0x286261(0x80c)]['display'] = 'none', _0xe859d[_0x286261(0x80c)]['display'] = _0x286261(0x629)) : _0x9263c5 += _0x286261(0x28e) + Math[_0x286261(0x596)](_0x2fb229 / 0x3c) + _0x286261(0xaee); } else { const _0xcc37b5 = _0x1c2d23[_0x286261(0x58b)](_0x286261(0xbdf)); _0xcc37b5[_0x286261(0x781)] = _0x286261(0xa00), _0xcc37b5[_0x286261(0x356)] = _0x2067d3[_0x286261(0x67c)], _0x405c13[_0x286261(0xa59)](_0xcc37b5); } } else { if (_0x4c68f0 === _0x3362ec) _0x9263c5 += '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a'; else { const _0x80a1f7 = Math[_0x286261(0x596)]((_0x30ca37 - _0x3ad9c9) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x9263c5 += _0x286261(0x275) + _0x80a1f7 + _0x286261(0xb0a); } } } else _0x104bac[_0x286261(0xa7f)] = ![]; } else _0x9263c5 += _0x286261(0xb18); const _0x1d3164 = ('\x0a' + _0xd43371 + _0x286261(0x636) + _0x3020ce[_0x286261(0x3b3)] + _0x286261(0x80b) + _0x3020ce['name'] + _0x286261(0x92e) + _0x3020ce[_0x286261(0x3b3)] + _0x286261(0xb9f) + _0x1df2eb + _0x286261(0x682) + _0x52b72b + '\x0a')['trim'](), _0x5f2662 = [{ 'role': _0x286261(0x3c6), 'content': _0x1d3164 }], _0x51edea = (_0x286261(0x5b2) + (_0x3020ce['persona'] || '你是一个乐于助人的助手。') + '\x0a' + _0x5dc0f0 + '\x20\x0a' + _0x5a0334 + '\x0a' + _0x1f09ec + '\x0a' + _0x225757 + '\x0a' + _0x2b641d + '\x20//\x20<--\x20哼，加在这里\x0a' + _0x3f87de + _0x286261(0x562) + _0x22e375 + '\x0a' + _0x9263c5 + '\x0a' + _0x1da6ae + '\x0a')['trim'](); _0x51edea['replace'](/#.*|\s/g, '') && (_0x286261(0x8e6) === _0x286261(0xad7) ? _0x535546 += _0x27d3dd[_0x286261(0x433)](_0x340202)[_0x286261(0x9f3)][0x0][_0x286261(0x67c)][_0x286261(0xa2e)][0x0][_0x286261(0x3a1)] : (_0x5f2662[_0x286261(0x1e6)]({ 'role': _0x286261(0x5c2), 'content': _0x51edea }), _0x5f2662['push']({ 'role': _0x286261(0x41d), 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' }))); const _0x5092d0 = _0x5f0a6c[_0x286261(0xa91)]?.[_0x286261(0x8e9)] ?? 0x64, _0x1d46df = _0x5f0a6c[_0x286261(0xbc8)][_0x286261(0x929)](-_0x5092d0); for (const _0x12fba5 of _0x1d46df) { const _0xf1e055 = _0x12fba5[_0x286261(0x579)] === 'ai' || _0x12fba5[_0x286261(0x579)] === _0x286261(0x41d) ? 'assistant' : 'user'; let _0x28f55e = { 'role': _0xf1e055, 'content': _0x12fba5[_0x286261(0x67c)] }, _0x143eea = !!_0x12fba5['content']; if (_0x12fba5['displayUrl'] && _0x12fba5['content'][_0x286261(0xa1c)]('表情')) { const _0x2592a0 = _0x12fba5['content'][_0x286261(0x294)](/：(.*?)]$/); _0x28f55e[_0x286261(0x67c)] = '[sticker:' + (_0x2592a0 ? _0x2592a0[0x1] : '未知表情') + ']', _0x5f2662[_0x286261(0x1e6)](_0x28f55e); } else { if (_0x286261(0x848) !== _0x286261(0x6d2)) { let _0x25c0d9 = null; if (_0x12fba5[_0x286261(0x8dc)]) _0x286261(0xa7e) === _0x286261(0x34b) ? (_0x483bd4[_0x286261(0x80c)][_0x286261(0x6df)] = 'none', _0x1caedb[_0x286261(0x80c)][_0x286261(0x99b)] = _0x286261(0x28f), _0x241975['style'][_0x286261(0x4e1)] = 'rgba(255,255,255,0.2)') : _0x25c0d9 = _0x12fba5[_0x286261(0x8dc)]; else { if (_0x12fba5['imageId']) try { const _0x4dbf9d = await _0x393cae(_0x12fba5[_0x286261(0xbce)]); _0x4dbf9d && (_0x25c0d9 = await _0x5abd11(_0x4dbf9d)); } catch (_0xf6bbe6) { console[_0x286261(0x8d9)](_0x286261(0x6ad), _0xf6bbe6); } } _0x25c0d9 && (_0x28f55e['image'] = _0x25c0d9, _0x143eea = !![]), _0x143eea && _0x5f2662['push'](_0x28f55e); } else { if (_0x4d259f['isArray'](_0xc9a1dc) && _0x2d4eaf[_0x286261(0x9d7)](_0x29f4d9)) { const _0x58b117 = _0xc7f056[_0x286261(0xbad)](_0x1fec59); _0xfca188 = _0x4c460f[_0x286261(0x38f)](_0x58b117), _0x1e735a[_0x286261(0x5b1)](_0x286261(0x2f9)); } else _0x4aac10 = _0xe4a7e7[_0x286261(0x38f)](_0x2a7758); } } } try { if (_0x286261(0x686) !== 'EaSmh') { const _0x553454 = await _0x550e3c(_0x5f2662); if (!_0x553454) return ![]; if (_0x4a4b53) { if (_0x286261(0x2bd) === _0x286261(0x913)) _0x431284(![]); else try { if (_0x286261(0x220) === _0x286261(0x220)) { let _0x4202f0 = _0x553454[_0x286261(0x1e9)](); const _0x1ec398 = _0x4202f0[_0x286261(0x294)](/(\[[\s\S]*\])/); _0x1ec398 && (_0x4202f0 = _0x1ec398[0x1]); const _0x11890f = JSON[_0x286261(0x433)](_0x4202f0); if (Array[_0x286261(0x9d7)](_0x11890f)) { _0x5f0a6c[_0x286261(0x591)] = [..._0x11890f], _0x5f0a6c[_0x286261(0x4ef)][_0x3020ce['id']] = [..._0x11890f], _0x35fd2e(); const _0x3bd7a2 = _0x11890f['map'](_0x5080b8 => _0x5080b8[_0x286261(0x460)] === _0x286261(0x3f9) ? _0x5080b8[_0x286261(0x81d)] : _0x5080b8[_0x286261(0x460)] + ':\x20' + _0x5080b8['line'])[_0x286261(0x3b9)]('\x0a\x0a'); _0x5f0a6c['conversationHistory'][_0x286261(0x1e6)]({ 'role': 'assistant', 'senderId': _0x3020ce['id'], 'timestamp': Date[_0x286261(0xb71)](), 'isOffline': !![], 'content': _0x3bd7a2 }); } } else _0x3d1a1d(_0x286261(0x2b1)), _0x22f16f(() => { const _0x220f39 = _0x286261; _0x387dc2(_0x220f39(0x83e), _0x220f39(0x28c)), _0x77a2b3(() => _0x1c02dc(), 0x64); }, 0x6a4); } catch (_0x4ffda0) { console['error'](_0x286261(0x4d9), _0x4ffda0, _0x286261(0x9f9), _0x553454), _0x5f0a6c[_0x286261(0xbc8)]['push']({ 'role': _0x286261(0x41d), 'senderId': _0x3020ce['id'], 'timestamp': Date[_0x286261(0xb71)](), 'isOffline': !![], 'content': _0x286261(0x2d8) + _0x553454 + ']' }); } } else { const _0x30ee61 = _0x4d1b87(_0x553454), _0x4fcb5a = _0x30ee61[_0x286261(0x575)](_0x5f3b09 => { const _0x2b1208 = _0x286261, _0x26bb2f = _0x5f3b09[_0x2b1208(0x1e9)](), _0x20f6db = _0x26bb2f[_0x2b1208(0x294)](/^\[sticker:(.*?)\]$/), _0x4608b0 = _0x26bb2f[_0x2b1208(0x294)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x39b63f = _0x26bb2f[_0x2b1208(0x294)](/^\[music:(.*?)\|(.*?)\]$/), _0x51146e = _0x26bb2f['match'](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x39b63f) return { 'type': _0x2b1208(0xa1d), 'songName': _0x39b63f[0x1][_0x2b1208(0x1e9)](), 'artist': _0x39b63f[0x2][_0x2b1208(0x1e9)]() }; else { if (_0x20f6db) { if (_0x2b1208(0x892) === _0x2b1208(0x892)) return { 'type': _0x2b1208(0xbec), 'name': _0x20f6db[0x1][_0x2b1208(0x1e9)]() }; else _0x46d25a += _0x2b1208(0x6b9) + _0x335203[_0x2b1208(0x4b4)] + '”，里面有\x20' + _0x25431d[_0x2b1208(0xbcd)]['join']('、') + '。\x0a'; } else { if (_0x51146e) { if (_0x2b1208(0x9dd) === _0x2b1208(0x9dd)) return { 'type': _0x2b1208(0x7ef), 'eventType': _0x51146e[0x1][_0x2b1208(0x1e9)](), 'eventDate': _0x51146e[0x2]['trim'](), 'eventContent': _0x51146e[0x3][_0x2b1208(0x1e9)]() }; else _0x1a6eac = _0x5844db[_0x2b1208(0x58b)](_0x2b1208(0xbdf)), _0x171736['id'] = _0x2b1208(0x500), _0x4b30ef[_0x2b1208(0xa59)](_0x5194ee); } else { if (_0x4608b0) { if (_0x2b1208(0x27c) === _0x2b1208(0x27c)) { const _0x559d8f = parseFloat(_0x4608b0[0x1]), _0x30b40a = _0x4608b0[0x2]['trim'](), _0x5c46d4 = _0x1f5ce5(_0x5f0a6c['activeChatId']); let _0x46b20f = null; if (_0x30b40a === _0x5c46d4[_0x2b1208(0x3b3)]) _0x46b20f = _0x5c46d4['id']; else { const _0x2abd8b = _0x168762(); if (_0x2abd8b['type'] === _0x2b1208(0x74a)) { if (_0x2b1208(0x4ae) === _0x2b1208(0x4ae)) { const _0x5c400a = _0x5f0a6c[_0x2b1208(0x723)][_0x2b1208(0x3be)](_0x3deeb2 => _0x2abd8b[_0x2b1208(0x3d4)][_0x2b1208(0xa1c)](_0x3deeb2['id']) && _0x3deeb2[_0x2b1208(0x3b3)] === _0x30b40a); if (_0x5c400a) _0x46b20f = _0x5c400a['id']; } else _0x2682c8['click'](); } } if (_0x46b20f) return { 'type': _0x2b1208(0x97d), 'amount': _0x559d8f, 'recipientId': _0x46b20f, 'senderId': _0x3020ce['id'] }; else return { 'type': _0x2b1208(0x3a1), 'content': _0x2b1208(0x705) + _0x30b40a + _0x2b1208(0x64c) }; } else _0x12d587['click'](); } else { if (_0x26bb2f) return { 'type': _0x2b1208(0x3a1), 'content': _0x26bb2f }; } } } } return null; })[_0x286261(0x216)](Boolean), _0x475421 = async _0x58182d => { const _0x2b04d4 = _0x286261, _0x482016 = { 'role': _0x2b04d4(0x41d), 'senderId': _0x3020ce['id'], 'timestamp': Date['now'](), 'isOffline': _0x4a4b53 }; if (_0x58182d['type'] === _0x2b04d4(0xa1d)) { const { songName: _0xc2ff18, artist: _0x5e7a91 } = _0x58182d; _0x482016['type'] = _0x2b04d4(0xa1d), _0x482016[_0x2b04d4(0x67c)] = _0x2b04d4(0x68a) + _0xc2ff18 + _0x2b04d4(0x332) + _0x5e7a91 + ']'; try { const _0x242c09 = await _0x13dea2(_0xc2ff18, _0x5e7a91); Object[_0x2b04d4(0xac1)](_0x482016, { 'songName': _0xc2ff18, 'artist': _0x5e7a91, 'coverUrl': _0x242c09['cover'], 'playableUrl': _0x242c09[_0x2b04d4(0xb0d)] }); } catch (_0x1d4624) { Object[_0x2b04d4(0xac1)](_0x482016, { 'songName': _0xc2ff18, 'artist': _0x5e7a91, 'coverUrl': null, 'playableUrl': null }); } } else { if (_0x58182d['type'] === _0x2b04d4(0xbec)) { const _0x5adf4b = _0x47fa25['find'](_0x2dceca => _0x2dceca[_0x2b04d4(0x3b3)] === _0x58182d[_0x2b04d4(0x3b3)]); if (_0x5adf4b) Object[_0x2b04d4(0xac1)](_0x482016, { 'content': _0x2b04d4(0x2ae) + _0x5adf4b['name'] + ']', 'displayUrl': _0x5adf4b[_0x2b04d4(0xb0d)] }); else _0x482016[_0x2b04d4(0x67c)] = _0x2b04d4(0x849) + _0x58182d[_0x2b04d4(0x3b3)] + ']'; } else { if (_0x58182d['type'] === _0x2b04d4(0x97d)) { if (_0x2b04d4(0x208) === _0x2b04d4(0x6a8)) _0x11fc3f(_0x2b04d4(0xb11)); else { const _0x39ca9f = _0x58182d[_0x2b04d4(0x4f5)] === _0x1f5ce5(_0x5f0a6c[_0x2b04d4(0x1e1)])['id'] ? _0x1f5ce5(_0x5f0a6c['activeChatId']) : _0x543c76(_0x58182d['recipientId']); Object[_0x2b04d4(0xac1)](_0x482016, { 'type': _0x2b04d4(0x97d), 'amount': _0x58182d[_0x2b04d4(0x8bf)], 'recipientId': _0x58182d[_0x2b04d4(0x4f5)], 'content': '[AI向\x20' + (_0x39ca9f?.[_0x2b04d4(0x3b3)] || '未知') + _0x2b04d4(0x9a8) + _0x58182d[_0x2b04d4(0x8bf)] + ']' }); } } else { if (_0x58182d[_0x2b04d4(0xc02)] === _0x2b04d4(0x7ef)) { const _0x360ced = _0x1f5ce5(_0x126a7d['id']); if (!_0x360ced || !_0x360ced['id']) return console[_0x2b04d4(0x8d9)]('AI\x20试图创建事件，但找不到有效的用户ID。'), null; _0x5f0a6c['calendarEvents']['push']({ 'id': _0x2b04d4(0xa97) + Date[_0x2b04d4(0xb71)](), 'date': _0x58182d[_0x2b04d4(0xbee)], 'type': _0x58182d[_0x2b04d4(0xb89)], 'content': _0x58182d['eventContent'], 'userId': _0x360ced['id'], 'createdBy': 'ai' }), _0x5c772f(), _0x486e7d(), _0x9108c9(); const _0x5e586b = _0x543c76(_0x3020ce['id']); _0x5e586b && _0x58182d['eventType'] === _0x2b04d4(0x324) && ('XoZej' !== _0x2b04d4(0xa45) ? _0x5b05b0(_0x5830c4[_0x2b04d4(0x5c1)])['then'](_0x5e6e79 => { const _0x497f42 = _0x2b04d4, _0x94ac4b = _0x205ca5[_0x497f42(0x463)](_0x53ddf1); if (_0x94ac4b && _0x5e6e79) _0x94ac4b['src'] = _0x6cd12c[_0x497f42(0x51e)](_0x5e6e79); }) : _0x24537c('💜\x20' + _0x5e586b['name'] + _0x2b04d4(0x789) + _0x58182d['eventContent'])); return { 'role': _0x2b04d4(0x41d), 'senderId': _0x3020ce['id'], 'timestamp': Date[_0x2b04d4(0xb71)](), 'isOffline': _0x4a4b53, 'content': null }; return { 'role': _0x2b04d4(0x41d), 'senderId': _0x3020ce['id'], 'timestamp': Date['now'](), 'isOffline': _0x4a4b53, 'content': null }; } else { const _0x4a4cb2 = _0x476de8(_0x58182d[_0x2b04d4(0x67c)]); Object[_0x2b04d4(0xac1)](_0x482016, { 'content': _0x4a4cb2[_0x2b04d4(0x67c)], 'quotedMessage': _0x4a4cb2[_0x2b04d4(0x5d3)] }); } } } } return _0x482016; }, _0x503383 = await Promise['all'](_0x4fcb5a[_0x286261(0x575)](_0x475421)); for (const _0x51cb8b of _0x503383) { (_0x51cb8b['content'] || _0x51cb8b[_0x286261(0x746)] || _0x51cb8b[_0x286261(0xc02)] === _0x286261(0xa1d)) && (await new Promise(_0x140e0b => setTimeout(_0x140e0b, 0x12c + Math[_0x286261(0x642)]() * 0x190)), _0x5f0a6c[_0x286261(0xbc8)]['push'](_0x51cb8b), _0x23c996()); } } return _0x351209(), _0x23c996(), !![]; } else _0x4d29d4(_0x286261(0x72e) + _0x28101a[_0x286261(0x9fa)]); } catch (_0x2e048c) { if (_0x2e048c[_0x286261(0x3b3)] !== 'AbortError') { console[_0x286261(0x8d9)](_0x286261(0x55d), _0x2e048c); const _0x375cbd = { 'role': 'assistant', 'content': _0x286261(0x72e) + _0x2e048c[_0x286261(0x9fa)], 'senderId': _0x3020ce['id'], 'isOffline': _0x4a4b53 }; _0x5f0a6c[_0x286261(0xbc8)][_0x286261(0x1e6)](_0x375cbd), _0x23c996(); } return ![]; } finally { if (_0x286261(0xa0f) === _0x286261(0xb38)) return _0x2f2076[_0x286261(0x5b1)]('Fetch\x20request\x20was\x20aborted.'), ''; else _0x2d5d98(![]); } } async function _0x28eef9() { const _0x1ea297 = _0x2481c4; if (_0x1ea297(0x7cb) === 'eITit') { const _0x479a22 = _0x168762(); if (!_0x479a22 || _0x479a22['type'] !== 'private') { _0x24537c(_0x1ea297(0x79d)); return; } if (_0x5f0a6c[_0x1ea297(0x5f8)]) { _0x24537c('我正在说话呢，别打岔！'); return; } const _0x19b12d = await _0x1ec207('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x19b12d) return; _0x2aa27a(!![], _0x1ea297(0x242)), _0xfab423[_0x1ea297(0x202)] = '', _0x1f8cc1[_0x1ea297(0x776)]['add'](_0x1ea297(0x940)), _0x5f0a6c[_0x1ea297(0x5f8)] = !![]; try { const _0x1eb002 = _0x543c76(_0x479a22['participantIds'][0x0]), _0x2de22a = _0x1f5ce5(_0x479a22['id']), _0x52622c = _0x1c64af(_0x479a22['id']); if (_0x52622c[_0x1ea297(0x55b)] === 0x0) { _0xfab423['value'] = _0x1ea297(0xb58); return; } const _0x341141 = _0x52622c[_0x1ea297(0x575)](_0x328f0c => { const _0x40b6e1 = _0x1ea297, _0xc18b6a = new Date(_0x328f0c[_0x40b6e1(0x83a)]), _0x17042a = _0xc18b6a[_0x40b6e1(0x25d)]() + '-' + String(_0xc18b6a[_0x40b6e1(0x567)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0xc18b6a['getDate']())[_0x40b6e1(0x690)](0x2, '0'), _0x19f06f = String(_0xc18b6a[_0x40b6e1(0xc10)]())['padStart'](0x2, '0') + ':' + String(_0xc18b6a[_0x40b6e1(0x88b)]())[_0x40b6e1(0x690)](0x2, '0'); let _0x1c259a = '未知'; _0x328f0c[_0x40b6e1(0x579)] === _0x40b6e1(0x5c2) ? _0x1c259a = _0x2de22a[_0x40b6e1(0x3b3)] : _0x1c259a = _0x1eb002[_0x40b6e1(0x3b3)]; let _0x2aacf8 = _0x328f0c[_0x40b6e1(0x67c)]; if (_0x328f0c['displayUrl']) _0x2aacf8 = _0x40b6e1(0x64a); if (_0x328f0c[_0x40b6e1(0xbce)]) _0x2aacf8 = _0x40b6e1(0xbb8); return '[' + _0x17042a + '\x20' + _0x19f06f + _0x40b6e1(0xb81) + _0x1c259a + _0x40b6e1(0x22c) + _0x2aacf8; })[_0x1ea297(0x3b9)]('\x0a'), _0x4503a3 = _0x4cb6e5[_0x1ea297(0x219)](/{charName}/g, _0x1eb002['name'])[_0x1ea297(0x219)](/{userName}/g, _0x2de22a['name']), _0x517fac = [{ 'role': 'system', 'content': _0x4503a3 }, { 'role': 'user', 'content': _0x341141 }], _0x3ef1df = await _0x550e3c(_0x517fac); _0xfab423[_0x1ea297(0x202)] = _0x3ef1df || _0x1ea297(0xa84), _0xfab423['scrollTop'] = 0x0; } catch (_0xe7d587) { _0x1ea297(0x1f2) !== _0x1ea297(0x1f2) ? _0x931206[_0x1ea297(0x80c)][_0x1ea297(0x4b2)] = _0x1ea297(0x205) + _0x5cb714 + '\x27)' : (console[_0x1ea297(0x8d9)]('总结失败:', _0xe7d587), _0xfab423['value'] = _0x1ea297(0x4ac) + _0xe7d587[_0x1ea297(0x9fa)]); } finally { if (_0x1ea297(0x418) !== 'iQCxi') { const _0xae7366 = _0xb7bf12[_0x1ea297(0x58b)](_0x1ea297(0xbdf)); _0xae7366[_0x1ea297(0x781)] = _0x1ea297(0x368), _0xae7366[_0x1ea297(0x80c)][_0x1ea297(0x408)] = _0x1ea297(0x751); const _0x5e5abf = _0x1efb7b[_0x1ea297(0x7cd)][_0x4f99ea], _0x4a6ae6 = _0x5e5abf[_0x1ea297(0x68c)][_0x1ea297(0x818)]((_0xe60ac, _0x4a840b) => _0xe60ac + (_0x4a840b[_0x1ea297(0x8bf)] || 0x0), 0x0); _0xae7366[_0x1ea297(0xb00)] = _0x1ea297(0x933) + _0x298f62 + _0x1ea297(0x46c) + _0x4a6ae6['toFixed'](0x2) + '</span>', _0xae7366[_0x1ea297(0x582)](_0x1ea297(0x3bf), () => { const _0x56ca83 = _0x1ea297; _0x10e39e[_0x56ca83(0x776)][_0x56ca83(0x554)]('active'), _0xf90156[_0x56ca83(0x776)][_0x56ca83(0xb2c)](_0x56ca83(0x8ef)), _0x2aeb7e(_0x5e5abf, _0x31c7ee); }), _0x5730ce[_0x1ea297(0xa59)](_0xae7366); } else _0x2aa27a(![]), _0x5f0a6c[_0x1ea297(0x5f8)] = ![]; } } else _0x92b2ea = _0x5c496e['at'](-0x1); } async function _0x4a615f() { const _0x28dc58 = _0x2481c4; if (_0x28dc58(0x749) === _0x28dc58(0x749)) { console[_0x28dc58(0x5b1)]('---\x20开始AI回复流程\x20---'); if (!_0x5f0a6c[_0x28dc58(0x720)]['endpoint'] || !_0x5f0a6c[_0x28dc58(0x720)]['key'] || !_0x5f0a6c[_0x28dc58(0x720)][_0x28dc58(0x4cc)]) { _0x24537c(_0x28dc58(0x9b2)); return; } const _0x3ffbc0 = _0x5f0a6c['conversationHistory']['at'](-0x1)?.[_0x28dc58(0x579)] === _0x28dc58(0x5c2); if (!_0x3ffbc0 || _0x5f0a6c['isGenerating']) return; const _0x54a7ca = _0x168762(); if (!_0x54a7ca) return; _0x5f0a6c[_0x28dc58(0x5f8)] = !![], _0x2d5d98(!![]); try { if (_0x54a7ca[_0x28dc58(0xc02)] === 'private') { const _0xc88ae7 = _0x543c76(_0x54a7ca[_0x28dc58(0x3d4)][0x0]); console[_0x28dc58(0x5b1)](_0x28dc58(0xc28)); if (_0xc88ae7) await _0x3d5566(_0xc88ae7, { 'force': !![] }); } else { const _0x5c99cd = await _0x45d5f1(); if (_0x5c99cd && _0x5c99cd['events']?.[_0x28dc58(0x55b)]) { if (_0x28dc58(0x42c) === _0x28dc58(0x42c)) await _0x3e8c96(_0x5c99cd); else return _0x54138a[_0x28dc58(0x3b3)] !== _0x28dc58(0x845) && _0x5748f8[_0x28dc58(0x8d9)](_0x28dc58(0x548), _0x514b45), null; } else { console[_0x28dc58(0x3d3)](_0x28dc58(0xb0c)); const _0x17a2b5 = _0x54a7ca[_0x28dc58(0x3d4)][_0x28dc58(0x575)](_0x543c76)['filter'](Boolean); if (!_0x17a2b5['length']) return; let _0x21015a = 0x0; for (const _0x940de of _0x17a2b5) { _0x3d5566(_0x940de, { 'force': !![], 'delayMs': _0x21015a }), _0x21015a += 0x1f4; } } } } catch (_0x2cc71e) { if (_0x28dc58(0x6ff) !== 'XCPet') { const _0xb68721 = _0x44ccec[_0x28dc58(0x1d7)]['filter'](_0x306468 => _0x306468[_0x28dc58(0x65d)] === _0x28dc58(0x5c2))[_0x28dc58(0x2c8)](); _0xb68721 && (_0xe84e = _0xb68721['content']); } else _0x2cc71e[_0x28dc58(0x3b3)] !== _0x28dc58(0x845) && (console['error'](_0x28dc58(0x9dc), _0x2cc71e), _0xa7043({ 'role': _0x28dc58(0x41d), 'content': _0x28dc58(0x72e) + _0x2cc71e[_0x28dc58(0x9fa)] }, _0x5f0a6c[_0x28dc58(0xbc8)][_0x28dc58(0x55b)] - 0x1)); } finally { _0x28dc58(0x922) === _0x28dc58(0x444) ? _0x55aac2['src'] = _0x19bc76[_0x28dc58(0x51e)](_0x41265b) : (_0x5f0a6c['isGenerating'] = ![], _0x2d5d98(![])); } } else _0x1f65b1[_0x28dc58(0x8d9)](_0x28dc58(0x23e), _0x1c149b); } function _0x34ebab(_0x465e6a, _0x2e7bb0) { const _0x1f245f = _0x2481c4, _0x3ac3ff = _0x2e7bb0[_0x1f245f(0x3ae)](), _0x5dd815 = _0x465e6a[_0x1f245f(0x3ae)](); if (_0x3ac3ff[_0x1f245f(0x595)](_0x1f245f(0x4ad))) return _0x1f245f(0xb43); if (_0x5dd815[_0x1f245f(0xa1c)](_0x1f245f(0x2c1))) return _0x1f245f(0xb43); if (_0x5dd815['includes'](_0x1f245f(0x8a9))) return _0x1f245f(0xa16); if (_0x3ac3ff[_0x1f245f(0x595)](_0x1f245f(0xa16))) return _0x1f245f(0xa16); return _0x1f245f(0x46a); } async function _0x550e3c(_0x5a70e6, _0x3a3d47 = {}) { const _0x3236d4 = _0x2481c4; _0x5f0a6c[_0x3236d4(0x2b0)] && _0x5f0a6c[_0x3236d4(0x2b0)][_0x3236d4(0x63f)](_0x3236d4(0x3ac)); _0x5f0a6c[_0x3236d4(0x2b0)] = new AbortController(); const _0x2c28ce = _0x5f0a6c[_0x3236d4(0x2b0)]['signal'], { endpoint: _0x1e8020, key: _0x2cff36, model: _0x951faf } = _0x5f0a6c[_0x3236d4(0x720)], _0xbc7068 = !!_0x3a3d47['json'], _0x3243cd = _0x34ebab(_0x1e8020, _0x951faf); console[_0x3236d4(0x5b1)]('Detected\x20API\x20provider:\x20' + _0x3243cd); let _0x260c1b = ''; try { switch (_0x3243cd) { case _0x3236d4(0xb43): { const _0x52b29e = _0x3161ac(_0x2cff36), _0x3beb9f = _0x5a70e6[_0x3236d4(0x3be)](_0x483db2 => _0x483db2[_0x3236d4(0x579)] === _0x3236d4(0x3c6))?.['content'] || '', _0x4a5ed9 = _0x5a70e6[_0x3236d4(0x216)](_0x1b8116 => _0x1b8116['role'] !== _0x3236d4(0x3c6)), _0x1fee69 = { 'model': _0x951faf, 'system': _0x3beb9f, 'messages': _0x4a5ed9[_0x3236d4(0x575)](_0x310efb => ({ 'role': _0x310efb[_0x3236d4(0x579)], 'content': [{ 'type': _0x3236d4(0x3a1), 'text': _0x310efb[_0x3236d4(0x67c)] }] })), 'max_tokens': 0x1000 }, _0x3f091c = await fetch(_0x1e8020, { 'method': _0x3236d4(0x9fd), 'headers': { 'Content-Type': _0x3236d4(0x853), 'x-api-key': _0x52b29e, 'anthropic-version': _0x3236d4(0x63a) }, 'body': JSON[_0x3236d4(0x38f)](_0x1fee69), 'signal': _0x2c28ce }); if (!_0x3f091c['ok']) { const _0x163aea = await _0x3f091c[_0x3236d4(0x8a5)]()[_0x3236d4(0x7d9)](() => ({})); throw new Error(_0x3236d4(0xbea) + _0x3f091c[_0x3236d4(0x456)] + _0x3236d4(0x332) + (_0x163aea[_0x3236d4(0x8d9)]?.['message'] || _0x3f091c[_0x3236d4(0x36d)])); } const _0x453e37 = await _0x3f091c[_0x3236d4(0x8a5)](); _0x260c1b = _0x453e37[_0x3236d4(0x67c)]?.[0x0]?.[_0x3236d4(0x3a1)] || ''; break; } case _0x3236d4(0xa16): { if (_0x3236d4(0xbf7) === _0x3236d4(0x7d3)) { const _0x3d7aa6 = _0xc78e8d[_0x3236d4(0xb32)][_0x3236d4(0x3be)](_0x588875 => _0x588875['id'] === _0x66b9c7); _0x3d7aa6 && (_0x3d7aa6[_0x3236d4(0x3b3)] = _0x424fea, _0x3d7aa6[_0x3236d4(0x763)] = _0x27ea1a, _0x3d7aa6[_0x3236d4(0x9b6)] = _0x246cb2); } else { const _0x2207e6 = _0x3161ac(_0x2cff36), _0x4889a7 = _0x1e8020[_0x3236d4(0xa1c)](_0x3236d4(0x648)), _0x1c5c8f = _0x38a7d5 => { const _0x426b4d = _0x3236d4; if (_0x426b4d(0x21f) === _0x426b4d(0x610)) _0x222f69 += _0x426b4d(0xbaa); else { const _0x36ff1a = []; if (_0x38a7d5['content']) _0x36ff1a[_0x426b4d(0x1e6)]({ 'text': _0x38a7d5[_0x426b4d(0x67c)] }); if (_0x38a7d5[_0x426b4d(0x8dc)]) { const _0x247657 = _0x38a7d5[_0x426b4d(0x8dc)]['split'](',')[0x1], _0x25cf0e = _0x38a7d5[_0x426b4d(0x8dc)][_0x426b4d(0x9ff)](_0x38a7d5[_0x426b4d(0x8dc)]['indexOf'](':') + 0x1, _0x38a7d5['image']['indexOf'](';')) || 'image/jpeg'; _0x36ff1a[_0x426b4d(0x1e6)]({ 'inline_data': { 'mime_type': _0x25cf0e, 'data': _0x247657 } }); } return _0x36ff1a; } }, _0x38d63f = _0x5a70e6[_0x3236d4(0x575)](_0xcde7fd => ({ 'role': _0xcde7fd['role'] === _0x3236d4(0x41d) ? _0x3236d4(0x4cc) : _0xcde7fd[_0x3236d4(0x579)] === _0x3236d4(0x3c6) ? _0x3236d4(0x5c2) : _0xcde7fd[_0x3236d4(0x579)], 'parts': _0x1c5c8f(_0xcde7fd) }))['filter'](_0xa8cda8 => _0xa8cda8[_0x3236d4(0xa2e)][_0x3236d4(0x55b)] > 0x0), _0x2ffb67 = { 'contents': _0x38d63f }; _0xbc7068 && _0x4889a7 && (_0x2ffb67[_0x3236d4(0x31d)] = { 'response_mime_type': _0x3236d4(0x853) }); const _0x258873 = _0x1e8020 + _0x3236d4(0x1da) + _0x951faf + _0x3236d4(0x3f4) + _0x2207e6 + '&alt=sse', _0x1fcbf3 = await fetch(_0x258873, { 'method': 'POST', 'headers': { 'Content-Type': _0x3236d4(0x853) }, 'body': JSON['stringify'](_0x2ffb67), 'signal': _0x2c28ce }); if (!_0x1fcbf3['ok']) throw new Error(_0x3236d4(0xb51) + _0x1fcbf3[_0x3236d4(0x456)]); const _0x20fd1e = _0x1fcbf3[_0x3236d4(0xb9d)][_0x3236d4(0x679)](), _0x528f2d = new TextDecoder(); let _0x215606 = ''; while (!![]) { if (_0x2c28ce[_0x3236d4(0x3c1)]) { console[_0x3236d4(0x5b1)](_0x3236d4(0x263)), _0x20fd1e[_0x3236d4(0x91c)](); break; } const { done: _0xfc97ed, value: _0x2f4c2f } = await _0x20fd1e[_0x3236d4(0xa3f)](); if (_0xfc97ed) break; const _0x381f40 = _0x528f2d['decode'](_0x2f4c2f, { 'stream': !![] }), _0x349f18 = _0x381f40[_0x3236d4(0x278)]('\x0a')[_0x3236d4(0x216)](_0x3d740e => _0x3d740e[_0x3236d4(0x1e9)]()['startsWith'](_0x3236d4(0x498))); for (const _0x331c50 of _0x349f18) { const _0xda1817 = _0x331c50[_0x3236d4(0x219)]('data:\x20', ''); if (_0xda1817 === _0x3236d4(0x5d7)) break; try { _0x215606 += JSON[_0x3236d4(0x433)](_0xda1817)[_0x3236d4(0x9f3)][0x0]['content'][_0x3236d4(0xa2e)][0x0][_0x3236d4(0x3a1)]; } catch { } } } _0x260c1b = _0x215606; break; } } case 'openai': default: { const _0x57c703 = _0x3161ac(_0x2cff36), _0x29942b = _0x1e8020[_0x3236d4(0x219)](/\/+$/, '') + '/v1/chat/completions', _0x5ba68d = _0x5a70e6['map'](_0x544517 => { const _0x27e6ed = _0x3236d4; if (_0x544517['role'] === 'user' && _0x544517[_0x27e6ed(0x8dc)]) { if (_0x27e6ed(0xb7c) === _0x27e6ed(0x2a5)) { const _0x231ea7 = _0x41364c[0x1][_0x27e6ed(0x219)](/\\"/g, '\x22')[_0x27e6ed(0x219)](/\\n/g, '\x0a')[_0x27e6ed(0x1e9)](); if (_0x231ea7) _0x27a49f[_0x27e6ed(0x1e6)](_0x231ea7); } else return { 'role': _0x27e6ed(0x5c2), 'content': [{ 'type': 'text', 'text': _0x544517['content'] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x544517[_0x27e6ed(0x8dc)], 'detail': _0x27e6ed(0x43a) } }] }; } return { 'role': _0x544517[_0x27e6ed(0x579)], 'content': _0x544517['content'] }; })[_0x3236d4(0x216)](_0x334754 => _0x334754[_0x3236d4(0x67c)]), _0x49bac1 = { 'model': _0x951faf, 'messages': _0x5ba68d, 'max_tokens': 0x1000, ..._0xbc7068 ? { 'response_format': { 'type': _0x3236d4(0x84f) } } : {} }, _0x302d58 = await fetch(_0x29942b, { 'method': _0x3236d4(0x9fd), 'headers': { 'Content-Type': 'application/json', 'Authorization': _0x3236d4(0x29b) + _0x57c703 }, 'body': JSON[_0x3236d4(0x38f)](_0x49bac1), 'signal': _0x2c28ce }); if (!_0x302d58['ok']) { if (_0x3236d4(0xb76) === _0x3236d4(0xa44)) { _0x3c968e(_0x3236d4(0x962)); return; } else { const _0x33a1c2 = await _0x302d58[_0x3236d4(0x8a5)]()[_0x3236d4(0x7d9)](() => ({})); throw new Error(_0x3236d4(0x9ca) + _0x302d58['status'] + _0x3236d4(0x332) + (_0x33a1c2['error']?.[_0x3236d4(0x9fa)] || _0x302d58['statusText'])); } } const _0xeeee3a = await _0x302d58['json'](); _0x260c1b = _0xeeee3a['choices']?.[0x0]?.[_0x3236d4(0x9fa)]?.[_0x3236d4(0x67c)] || ''; break; } }return _0x260c1b; } catch (_0x8cd66c) { if (_0x8cd66c['name'] === _0x3236d4(0x845)) return console['log'](_0x3236d4(0x475)), ''; throw _0x8cd66c; } finally { if (_0x3236d4(0x5d0) === _0x3236d4(0x252)) { const _0x2f2b86 = _0x86ed74(_0x4133eb[_0x3236d4(0x5c3)]); if (!_0x2f2b86) return; const _0x404227 = _0x216a9e(_0x8a17f5[_0x3236d4(0x463)](_0x3236d4(0x3e6))['value']), _0x3fc570 = _0x3eaa51(_0x20183e[_0x3236d4(0x463)](_0x3236d4(0x244))['value']), _0x194654 = _0x3f8c92(_0x5db7c2[_0x3236d4(0x463)](_0x3236d4(0x63c))[_0x3236d4(0x202)]) / 0x64; _0x2f2b86['spriteTransform'] = { 'x': _0x404227, 'y': _0x3fc570, 'scale': _0x194654 }, _0x542fd4(), _0x1b81ab(_0x3236d4(0x240)), _0x9e5d96(!![]); } else _0x5f0a6c[_0x3236d4(0x2b0)] && _0x5f0a6c[_0x3236d4(0x2b0)][_0x3236d4(0x77f)] === _0x2c28ce && (_0x3236d4(0x916) !== _0x3236d4(0x916) ? _0x229285[_0x3236d4(0x1e6)]({ 'time': _0x54e957, 'text': _0x1bfa3b }) : _0x5f0a6c[_0x3236d4(0x2b0)] = null); } } async function _0x59b5ce() { const _0x5eedca = _0x2481c4; if ('fLiMU' !== _0x5eedca(0xc2d)) { const _0x215ee8 = _0x533005[_0x5eedca(0xaa5)][_0x5eedca(0x776)][_0x5eedca(0x999)](_0x5eedca(0x8ef)), _0xf160a2 = _0x215ee8 ? _0xaf7d6b['value'] : null; let _0x1c9c96 = null, _0x3a76e5 = ''; if (_0x215ee8 && _0xf160a2) { _0x1c9c96 = _0x5f0a6c[_0x5eedca(0xab8)][_0x5eedca(0x3be)](_0x19af5e => _0x19af5e[_0x5eedca(0xc02)] === _0x5eedca(0x963) && _0x19af5e[_0x5eedca(0x3d4)]['includes'](_0xf160a2)); const _0x77fe77 = _0x543c76(_0xf160a2); _0x3a76e5 = _0x77fe77 ? _0x77fe77[_0x5eedca(0x3b3)] : _0x5eedca(0x658); } else { if (_0x5f0a6c['activeChatId']) { if (_0x5eedca(0x8fd) === _0x5eedca(0x8fd)) { _0x1c9c96 = _0x168762(); const _0x759fa1 = document[_0x5eedca(0x463)](_0x5eedca(0x2b3))[_0x5eedca(0x356)]; _0x3a76e5 = _0x759fa1 || '当前聊天'; } else _0x18085f['error'](_0x5eedca(0x4f9), _0x4be609), _0x2021cb(_0x5eedca(0x92a) + _0x3e4024['message']); } } if (!_0x1c9c96) { if ('TkBZA' === _0x5eedca(0x435)) { _0x24537c('找不到要清空的聊天记录。'); return; } else _0x1df492 = '0x' + _0x49e026[0x1] + _0x11b37e[0x1], _0x209256 = '0x' + _0x32157d[0x2] + _0x4034d8[0x2], _0x3a386f = '0x' + _0x1084ed[0x3] + _0x19f6c4[0x3]; } const _0x4f038a = await _0x1ec207(_0x5eedca(0x385) + _0x3a76e5 + _0x5eedca(0x62e)); if (!_0x4f038a) return; _0x1c9c96['id'] === _0x5f0a6c['activeChatId'] && (_0x3dc52f(), _0x5f0a6c[_0x5eedca(0xbc8)] = [], _0x1a8cc0()); try { localStorage[_0x5eedca(0x805)]('chatHistory_' + _0x1c9c96['id']); } catch (_0x30f144) { console[_0x5eedca(0x8d9)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x1c9c96['id'], _0x30f144); } _0x24537c('\x22' + _0x3a76e5 + _0x5eedca(0xbd0)); } else { const _0xe629a5 = _0x595597(); _0xe629a5 && _0xe629a5[_0x5eedca(0xc16)] && _0xe629a5[_0x5eedca(0xc16)][_0x5eedca(0x40c)] && (_0x1b6cc9[_0x5eedca(0x80c)]['display'] = _0x5eedca(0x1df), _0x587e38(() => _0x1a101e[_0x5eedca(0x776)][_0x5eedca(0xb2c)](_0x5eedca(0x940)), 0xa)); } } const _0x5cadc2 = document[_0x2481c4(0x463)](_0x2481c4(0x886)), _0x476b5d = document['getElementById'](_0x2481c4(0x465)), _0x472183 = document[_0x2481c4(0x463)](_0x2481c4(0x890)); _0x5cadc2['addEventListener'](_0x2481c4(0x3bf), async () => { const _0x3bdf9d = _0x2481c4; _0x2aa27a(!![], _0x3bdf9d(0x852)); const _0x311677 = []; try { const _0x58bbf9 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x1d783e = 0x0; _0x1d783e < localStorage[_0x3bdf9d(0x55b)]; _0x1d783e++) { if ('IISLd' !== _0x3bdf9d(0x68f)) _0x3c0c46(_0x3bdf9d(0xaf6)); else { const _0x11639e = localStorage['key'](_0x1d783e); if (_0x11639e) _0x58bbf9[_0x3bdf9d(0xbd3)][_0x11639e] = localStorage['getItem'](_0x11639e); } } const _0x3e678a = await _0x3a9eb0, _0x5940a4 = _0x3e678a['transaction'](_0x39e0d1, _0x3bdf9d(0xb8d)), _0x360e1b = _0x5940a4[_0x3bdf9d(0xb08)](_0x39e0d1), _0x1a08a4 = await new Promise((_0x1f54b6, _0x4bc527) => { const _0x4a1384 = _0x3bdf9d, _0x17bc9d = _0x360e1b[_0x4a1384(0xa50)](); _0x17bc9d[_0x4a1384(0x241)] = () => _0x1f54b6(_0x17bc9d['result']), _0x17bc9d['onerror'] = () => _0x4bc527(_0x17bc9d[_0x4a1384(0x8d9)]); }); for (const _0x2d9f4d of _0x1a08a4) { if (_0x3bdf9d(0xab3) === _0x3bdf9d(0xa9e)) _0x390c56(_0x3bdf9d(0x6ec))['then'](_0x279639 => { const _0xd933 = _0x3bdf9d; if (_0x279639) { const _0x116ac2 = _0x31afd3(_0x192e35['activeMeetingCharId']); _0x116ac2 && (delete _0x116ac2[_0xd933(0xc38)], _0x3e5320(), _0x9a88a7(_0x116ac2['id'], _0xd933(0x503)), _0x494b1e(_0xd933(0xa06)), _0x47372c(!![])); } }); else { if (_0x2d9f4d[_0x3bdf9d(0xb2a)] instanceof Blob) try { _0x3bdf9d(0x8e8) === 'XhppW' ? _0x58bbf9['indexedDBData'][_0x2d9f4d['id']] = await _0x5abd11(_0x2d9f4d[_0x3bdf9d(0xb2a)]) : _0x7433d[_0x3bdf9d(0x1e6)](_0x4c1966); } catch (_0x538d35) { _0x311677[_0x3bdf9d(0x1e6)](_0x2d9f4d['id']); } } } const _0xb835e = _0x3e678a[_0x3bdf9d(0x98e)](_0x47a7e7, _0x3bdf9d(0xb8d)), _0x1b5d5a = _0xb835e['objectStore'](_0x47a7e7), _0x40f060 = await new Promise((_0x437c1c, _0x2ad6be) => { const _0x75ee = _0x3bdf9d; if ('pLqxi' !== 'pLqxi') _0x2b0ee8(), _0x35acb6(_0x75ee(0x28c), 'chat'); else { const _0x23848c = _0x1b5d5a[_0x75ee(0xa50)](); _0x23848c[_0x75ee(0x241)] = () => _0x437c1c(_0x23848c['result']), _0x23848c[_0x75ee(0x4d1)] = () => _0x2ad6be(_0x23848c['error']); } }); for (const _0x571a79 of _0x40f060) { const _0x2efe74 = { ..._0x571a79 }; _0x571a79['audio'] instanceof Blob && (_0x2efe74[_0x3bdf9d(0x7c4)] = await _0x5abd11(_0x571a79[_0x3bdf9d(0x7c4)])), _0x571a79[_0x3bdf9d(0xa53)] instanceof Blob && (_0x3bdf9d(0x784) === _0x3bdf9d(0x91f) ? _0x5e682c['getElementById'](_0x3bdf9d(0x71f))['click']() : _0x2efe74[_0x3bdf9d(0xa53)] = await _0x5abd11(_0x571a79[_0x3bdf9d(0xa53)])), _0x58bbf9[_0x3bdf9d(0x7ea)][_0x3bdf9d(0x1e6)](_0x2efe74); } const _0x219ded = new Blob([JSON[_0x3bdf9d(0x38f)](_0x58bbf9, null, 0x2)], { 'type': _0x3bdf9d(0x853) }), _0x522f90 = URL['createObjectURL'](_0x219ded), _0x50877a = document[_0x3bdf9d(0x58b)]('a'), _0x47c926 = new Date(), _0x3cdf78 = _0x47c926['getFullYear']() + '-' + String(_0x47c926[_0x3bdf9d(0x567)]() + 0x1)[_0x3bdf9d(0x690)](0x2, '0') + '-' + String(_0x47c926['getDate']())[_0x3bdf9d(0x690)](0x2, '0'); _0x50877a['href'] = _0x522f90, _0x50877a['download'] = _0x3bdf9d(0x8c9) + _0x3cdf78 + _0x3bdf9d(0x20f), document[_0x3bdf9d(0xb9d)][_0x3bdf9d(0xa59)](_0x50877a), _0x50877a['click'](), document[_0x3bdf9d(0xb9d)][_0x3bdf9d(0xb90)](_0x50877a), URL['revokeObjectURL'](_0x522f90), _0x2aa27a(![]), _0x311677[_0x3bdf9d(0x55b)] > 0x0 ? _0x24537c('导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a' + _0x311677[_0x3bdf9d(0x3b9)]('\x0a')) : _0x24537c(_0x3bdf9d(0xa0d)); } catch (_0x4a00ef) { _0x2aa27a(![]), console[_0x3bdf9d(0x8d9)](_0x3bdf9d(0x8a3), _0x4a00ef), _0x24537c(_0x3bdf9d(0x54a) + _0x4a00ef['message']); } }), _0x476b5d[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x3651e1 = _0x2481c4; 'JWmGh' === _0x3651e1(0xa66) ? _0x36a206 && _0x29f3f9(_0x15bc83) : _0x472183['click'](); }), _0x1d09c4['addEventListener'](_0x2481c4(0x3bf), _0x326da6), _0x472183[_0x2481c4(0x582)](_0x2481c4(0x236), _0x1cfeb7 => { const _0x18b250 = _0x2481c4, _0xffd4a8 = _0x1cfeb7[_0x18b250(0x606)][_0x18b250(0x4b6)][0x0]; if (!_0xffd4a8) return; _0x1ec207(_0x18b250(0x22e))[_0x18b250(0x794)](_0x16acae => { const _0x3b091f = _0x18b250; if (_0x3b091f(0x585) !== _0x3b091f(0xb40)) { if (!_0x16acae) { if ('TVscX' !== _0x3b091f(0x798)) _0x564148[_0x3b091f(0x377)](), _0x5595ec[_0x3b091f(0x776)][_0x3b091f(0x965)](_0x3b091f(0x56c)), _0x4dc5d1['classList']['toggle'](_0x3b091f(0x666)); else { _0x472183[_0x3b091f(0x202)] = ''; return; } } _0x2aa27a(!![], _0x3b091f(0x541)); const _0x2c95e9 = new FileReader(); _0x2c95e9[_0x3b091f(0x79e)] = async _0x93ebe5 => { const _0x1c02c7 = _0x3b091f; if ('oqsDO' === _0x1c02c7(0xa2d)) try { const _0x59a503 = JSON[_0x1c02c7(0x433)](_0x93ebe5['target'][_0x1c02c7(0x77c)]); if (!_0x59a503[_0x1c02c7(0xbd3)] || !_0x59a503['indexedDBData']) throw new Error('文件格式不正确，不是一个有效的备份文件。'); _0x2aa27a(!![], _0x1c02c7(0x821)); const _0x672b68 = await Promise[_0x1c02c7(0xa8c)](Object[_0x1c02c7(0x6ee)](_0x59a503[_0x1c02c7(0x633)])['map'](async _0x48f4bf => { const _0x29780e = _0x1c02c7, _0x21c6f6 = _0x59a503[_0x29780e(0x633)][_0x48f4bf]; if (typeof _0x21c6f6 === _0x29780e(0xbc2) && _0x21c6f6[_0x29780e(0x595)](_0x29780e(0x498))) { const _0x6d50a9 = await _0x32e14c(_0x21c6f6); return { 'id': _0x48f4bf, 'blob': _0x6d50a9 }; } return null; }))[_0x1c02c7(0x794)](_0x5a2bdb => _0x5a2bdb['filter'](Boolean)), _0xe3ba95 = []; if (_0x59a503[_0x1c02c7(0x7ea)]) { if ('OGkeo' === _0x1c02c7(0x833)) _0x1cb70b[_0x1c02c7(0x554)](), _0x3b2a89(); else { _0x2aa27a(!![], _0x1c02c7(0xc2a)); const _0x188bef = _0x59a503[_0x1c02c7(0x7ea)][_0x1c02c7(0x575)](async _0x233027 => { const _0x4b9568 = _0x1c02c7, _0x3cc12f = { ..._0x233027 }; if (_0x233027['audio']) _0x3cc12f['audio'] = await _0x32e14c(_0x233027[_0x4b9568(0x7c4)]); if (_0x233027[_0x4b9568(0xa53)]) _0x3cc12f['cover'] = await _0x32e14c(_0x233027['cover']); return _0x3cc12f; }); _0xe3ba95[_0x1c02c7(0x1e6)](...await Promise[_0x1c02c7(0xa8c)](_0x188bef)); } } _0x2aa27a(!![], _0x1c02c7(0xb41)), localStorage[_0x1c02c7(0x87b)](); for (const _0x4e2faf in _0x59a503[_0x1c02c7(0xbd3)]) { localStorage[_0x1c02c7(0x246)](_0x4e2faf, _0x59a503[_0x1c02c7(0xbd3)][_0x4e2faf]); } _0x2aa27a(!![], _0x1c02c7(0x65c)); const _0x1f40f6 = await _0x3a9eb0, _0x4c6a44 = _0x1f40f6[_0x1c02c7(0x98e)]([_0x39e0d1, _0x47a7e7, _0x44bd71], _0x1c02c7(0x775)), _0x19c355 = _0x4c6a44['objectStore'](_0x39e0d1), _0x408ed2 = _0x4c6a44['objectStore'](_0x47a7e7), _0x385bc4 = _0x4c6a44[_0x1c02c7(0xb08)](_0x44bd71); _0x19c355['clear'](), _0x408ed2['clear'](), _0x385bc4[_0x1c02c7(0x87b)](), _0x672b68[_0x1c02c7(0xbe4)](_0x20155a => _0x19c355[_0x1c02c7(0x71e)](_0x20155a)), _0xe3ba95[_0x1c02c7(0xbe4)](_0x277efa => _0x408ed2[_0x1c02c7(0x71e)](_0x277efa)), await new Promise((_0x33e40a, _0x1b6d9d) => { const _0x21dec0 = _0x1c02c7; _0x4c6a44[_0x21dec0(0x89a)] = _0x33e40a, _0x4c6a44['onerror'] = _0x4527a8 => _0x1b6d9d(_0x4527a8[_0x21dec0(0x606)][_0x21dec0(0x8d9)]); }), _0x2aa27a(![]), _0x24537c(_0x1c02c7(0x732)), setTimeout(() => location[_0x1c02c7(0x4df)](), 0x640); } catch (_0x5e8992) { _0x2aa27a(![]), console[_0x1c02c7(0x8d9)](_0x1c02c7(0x57f), _0x5e8992), _0x24537c(_0x1c02c7(0x46f) + _0x5e8992[_0x1c02c7(0x9fa)]); } finally { _0x472183[_0x1c02c7(0x202)] = ''; } else { _0x1de271(_0x1c02c7(0xb7f)); return; } }, _0x2c95e9[_0x3b091f(0xb96)](_0xffd4a8); } else _0x3bedac[_0x3b091f(0x582)](_0x3b091f(0x3bf), () => { const _0x1c0bb8 = _0x3b091f; _0x2a0871(_0x1c0bb8(0x815)); }); }); }); function _0x14f27b() { const _0x232e6c = _0x2481c4; if (_0x232e6c(0xa6c) === _0x232e6c(0xa48)) try { const _0x5b3a75 = _0x108467[_0x232e6c(0x433)](_0x3e9ec7), _0x171b32 = { ..._0x1f6f97 }, _0x324ef2 = { ..._0x171b32, ..._0x5b3a75 }; _0x324ef2[_0x232e6c(0xa91)] = { ..._0x171b32[_0x232e6c(0xa91)], ..._0x5b3a75[_0x232e6c(0xa91)] || {} }, _0x324ef2['apiSettings'] = { ..._0x171b32[_0x232e6c(0x720)], ..._0x5b3a75[_0x232e6c(0x720)] || {} }, _0x1817a3[_0x232e6c(0xac1)](_0x305fab, _0x324ef2); } catch (_0x30e88d) { _0x1d92cb[_0x232e6c(0x8d9)](_0x232e6c(0x700), _0x30e88d), _0xb99474[_0x232e6c(0x805)](_0x232e6c(0x508)); } else _0x4b7ddc[_0x232e6c(0x202)] = _0x5f0a6c[_0x232e6c(0x720)]['endpoint'] || '', _0x4529a5[_0x232e6c(0x202)] = _0x5f0a6c[_0x232e6c(0x720)]['key'] || '', _0x469a0f[_0x232e6c(0x202)] = _0x5f0a6c[_0x232e6c(0x720)][_0x232e6c(0x4cc)] || '', _0x24a16e[_0x232e6c(0x202)] = String(_0x5f0a6c[_0x232e6c(0xa91)]?.[_0x232e6c(0x8e9)] ?? 0x64), document[_0x232e6c(0x463)](_0x232e6c(0x2b7))[_0x232e6c(0x202)] = _0x5f0a6c[_0x232e6c(0x720)][_0x232e6c(0x866)] || _0x232e6c(0x46a); } function _0x19ee5c() { const _0x5ead9b = _0x2481c4; _0x5f0a6c[_0x5ead9b(0x720)][_0x5ead9b(0x869)] = _0x4b7ddc['value']['trim'](), _0x5f0a6c[_0x5ead9b(0x720)][_0x5ead9b(0x54e)] = _0x4529a5[_0x5ead9b(0x202)][_0x5ead9b(0x1e9)](), _0x5f0a6c[_0x5ead9b(0x720)][_0x5ead9b(0x4cc)] = _0x469a0f[_0x5ead9b(0x202)][_0x5ead9b(0x1e9)](), _0x5f0a6c[_0x5ead9b(0x720)]['provider'] = document[_0x5ead9b(0x463)](_0x5ead9b(0x2b7))[_0x5ead9b(0x202)]; const _0x1fd3d9 = parseInt(_0x24a16e[_0x5ead9b(0x202)], 0xa); _0x5f0a6c[_0x5ead9b(0xa91)][_0x5ead9b(0x8e9)] = Number[_0x5ead9b(0x574)](_0x1fd3d9) && _0x1fd3d9 > 0x0 ? _0x1fd3d9 : 0x64, _0x5c772f(), _0x24537c('设置已保存！'); } function _0x5cecf3() { const _0x21600b = _0x2481c4; 'xcBZX' === _0x21600b(0x736) ? (_0x5c642c[_0x21600b(0x202)] = _0x5f0a6c[_0x21600b(0x404)][_0x21600b(0x3b3)] || '', _0x5d06de['src'] = _0x5f0a6c[_0x21600b(0x404)][_0x21600b(0x6b6)] || _0x6ca07b, _0x77ebac[_0x21600b(0x202)] = _0x5f0a6c[_0x21600b(0x404)][_0x21600b(0x91d)] || '') : _0x1a5554[_0x21600b(0x356)] = _0x1fd8a7[_0x21600b(0x8b4)](_0x5c70c7)['map'](_0x26f1a3 => _0x26f1a3[_0x21600b(0x94b)]['textContent'][_0x21600b(0x1e9)]())[_0x21600b(0x3b9)]('、'); } async function _0x1439b1(_0x1a84d8 = null) { const _0x237d7a = _0x2481c4; _0x1922fc('characterEdit', _0x4fe674); const _0x2a8c8e = document['getElementById'](_0x237d7a(0xa63)), _0x144cec = document[_0x237d7a(0x463)](_0x237d7a(0x39c)), _0x4e8650 = document[_0x237d7a(0x7dd)](_0x237d7a(0xbb3)); if (_0x1a84d8) { if (_0x237d7a(0x31e) === _0x237d7a(0x31e)) { const _0x37ed46 = _0x5f0a6c[_0x237d7a(0x723)][_0x237d7a(0x3be)](_0x2b4df6 => _0x2b4df6['id'] === _0x1a84d8); _0x2a8c8e[_0x237d7a(0x202)] = _0x37ed46['avatarFrameUrl'] || '', _0x144cec[_0x237d7a(0x202)] = _0x37ed46[_0x237d7a(0x1fa)] || ''; if (_0x4e8650) _0x4e8650[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = _0x37ed46[_0x237d7a(0x917)] ? _0x237d7a(0x205) + _0x37ed46[_0x237d7a(0x917)] + '\x27)' : ''; } else { const _0x8bf7f4 = _0x13542f[_0x237d7a(0x98e)](_0x3e844a, 'readwrite'), _0x93f48a = _0x8bf7f4[_0x237d7a(0xb08)](_0x15d4d7), _0x2af4cc = _0x93f48a[_0x237d7a(0x51a)](_0x1588a6); _0x2af4cc[_0x237d7a(0x241)] = () => _0x94b049(), _0x2af4cc[_0x237d7a(0x4d1)] = () => _0x29be97(_0x2af4cc[_0x237d7a(0x8d9)]); } } else { _0x2a8c8e[_0x237d7a(0x202)] = '', _0x144cec[_0x237d7a(0x202)] = ''; if (_0x4e8650) _0x4e8650[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = ''; } _0x2a8c8e[_0x237d7a(0x582)]('input', () => { const _0x306d57 = _0x237d7a; if (_0x4e8650) _0x4e8650['style'][_0x306d57(0x4b2)] = _0x2a8c8e['value'] ? _0x306d57(0x205) + _0x2a8c8e['value'] + '\x27)' : ''; }); const _0x51495a = document[_0x237d7a(0x463)](_0x237d7a(0x652)); _0x51495a[_0x237d7a(0xb00)] = '', _0x5f0a6c[_0x237d7a(0x7ad)][_0x237d7a(0xbe4)](_0x27b0b8 => { const _0x9d4d53 = _0x237d7a; if (_0x9d4d53(0x215) === 'kcscb') { if (_0x223795[_0x9d4d53(0x579)] === _0x9d4d53(0x5c2)) return _0x237d5b['userProfile']?.[_0x9d4d53(0x3b3)] || _0x9d4d53(0x222); if (_0x268843['type'] === _0x9d4d53(0x74a)) { const _0x38aef2 = _0x303ac5[_0x9d4d53(0xb6f)] ? _0x21c148(_0x430057[_0x9d4d53(0xb6f)]) : null; return _0x38aef2?.[_0x9d4d53(0x3b3)] || _0x9d4d53(0x447); } else { const _0x51aa56 = _0x322eb4(_0x4405bf[_0x9d4d53(0x3d4)][0x0]); return _0x51aa56?.[_0x9d4d53(0x3b3)] || 'AI'; } } else { const _0x45ab32 = document[_0x9d4d53(0x58b)](_0x9d4d53(0x33d)); _0x45ab32[_0x9d4d53(0xb00)] = _0x9d4d53(0x48e) + _0x27b0b8['id'] + '\x22>\x20' + _0x27b0b8[_0x9d4d53(0x3b3)], _0x51495a[_0x9d4d53(0xa59)](_0x45ab32); } }), _0x133f2c('char-edit-bind-user'), _0x9b361e['src'] = _0x25d84a, _0x48dc6b['value'] = '', _0x5ac9e7[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = '', _0x1db2f3[_0x237d7a(0x202)] = '', _0x575e79[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = '', _0x41f051['value'] = ''; const _0x11611d = [_0x237d7a(0x503), _0x237d7a(0x223), _0x237d7a(0x74d), _0x237d7a(0xb8e), _0x237d7a(0x383)]; _0x11611d[_0x237d7a(0xbe4)](_0x3f0242 => { const _0xad1c97 = _0x237d7a; document[_0xad1c97(0x463)](_0xad1c97(0x4e0) + _0x3f0242 + '-preview')[_0xad1c97(0x80c)][_0xad1c97(0x4b2)] = '', document['getElementById'](_0xad1c97(0x4e0) + _0x3f0242 + _0xad1c97(0xb6a))[_0xad1c97(0x202)] = ''; }); if (_0x1a84d8) { if ('OvnCH' !== _0x237d7a(0x2a2)) _0x3326e3(_0x237d7a(0xb91) + _0x4cfee0[_0x237d7a(0x9fa)]); else { const _0x35c1ee = _0x5f0a6c[_0x237d7a(0x723)][_0x237d7a(0x3be)](_0x38bfa5 => _0x38bfa5['id'] === _0x1a84d8); if (!_0x35c1ee) return; _0xaf7d6b[_0x237d7a(0x202)] = _0x35c1ee['id'], _0x2a7e0d['textContent'] = '编辑角色', _0x5e4a70['value'] = _0x35c1ee[_0x237d7a(0x3b3)], _0x3c0a70['value'] = _0x35c1ee['remark'], _0x59c216['value'] = _0x35c1ee[_0x237d7a(0x91d)], document[_0x237d7a(0x463)](_0x237d7a(0x581))[_0x237d7a(0x202)] = _0x35c1ee['bubbleCss'] || ''; const _0x120944 = _0x5f0a6c[_0x237d7a(0xab8)]['find'](_0x2fed72 => _0x2fed72['type'] === _0x237d7a(0x963) && _0x2fed72['participantIds'][_0x237d7a(0xa1c)](_0x1a84d8)); document[_0x237d7a(0x463)](_0x237d7a(0x9cc))['value'] = _0x120944?.['boundUserProfileId'] || _0x5f0a6c[_0x237d7a(0xbb5)]; try { const _0x2a7cf2 = await _0x393cae(_0x237d7a(0x22b) + _0x35c1ee['id']), _0x27356a = await _0x393cae('char_wallpaper_' + _0x35c1ee['id']), _0x32786c = await _0x393cae(_0x237d7a(0x346) + _0x35c1ee['id']); _0x9b361e[_0x237d7a(0xb01)] = _0x2a7cf2 ? URL[_0x237d7a(0x51e)](_0x2a7cf2) : _0x35c1ee[_0x237d7a(0x6b6)] || _0x25d84a; if (_0x27356a) _0x5ac9e7[_0x237d7a(0x80c)]['backgroundImage'] = _0x237d7a(0x205) + URL[_0x237d7a(0x51e)](_0x27356a) + '\x27)'; if (_0x32786c) _0x575e79[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = _0x237d7a(0x205) + URL[_0x237d7a(0x51e)](_0x32786c) + '\x27)'; for (const _0x3af7e2 of _0x11611d) { const _0x4d51a7 = await _0x393cae(_0x237d7a(0x395) + _0x3af7e2 + '_' + _0x35c1ee['id']); _0x4d51a7 && (_0x237d7a(0x7d6) === 'ophLa' ? (_0x1a01c0[_0x237d7a(0x9f8)] = _0x52edde[_0x237d7a(0x9f8)] === _0x237d7a(0x79c) ? _0x237d7a(0x618) : _0x237d7a(0x79c), _0x20321e()) : document[_0x237d7a(0x463)](_0x237d7a(0x4e0) + _0x3af7e2 + _0x237d7a(0x66d))[_0x237d7a(0x80c)][_0x237d7a(0x4b2)] = _0x237d7a(0x205) + URL['createObjectURL'](_0x4d51a7) + '\x27)'); } } catch (_0x7ca1ac) { _0x237d7a(0xb5f) !== _0x237d7a(0x9b3) ? (console[_0x237d7a(0x8d9)](_0x237d7a(0x743) + _0x35c1ee['id'] + _0x237d7a(0xa8f), _0x7ca1ac), _0x9b361e['src'] = _0x35c1ee['avatar'] || _0x25d84a) : !_0x353c23['querySelector']('.custom-multiselect')[_0x237d7a(0x999)](_0x58e06e['target']) && (_0x53d185[_0x237d7a(0x776)][_0x237d7a(0x554)](_0x237d7a(0x56c)), _0x41b99f[_0x237d7a(0x776)][_0x237d7a(0x554)](_0x237d7a(0x666))); } _0x35c1ee[_0x237d7a(0xb2b)] && _0x51495a[_0x237d7a(0x5a2)](_0x237d7a(0x43c))[_0x237d7a(0xbe4)](_0x3a0add => { const _0x3cf49a = _0x237d7a; if (_0x35c1ee['linkedWorldBookIds'][_0x3cf49a(0xa1c)](_0x3a0add['value'])) _0x3a0add[_0x3cf49a(0x8a6)] = !![]; }), _0x3e5a4c(); } } else _0xaf7d6b[_0x237d7a(0x202)] = '', _0x2a7e0d['textContent'] = _0x237d7a(0x717), _0x5e4a70[_0x237d7a(0x202)] = _0x237d7a(0x304) + (_0x5f0a6c[_0x237d7a(0x723)][_0x237d7a(0x55b)] + 0x1), _0x3c0a70[_0x237d7a(0x202)] = '', _0x59c216[_0x237d7a(0x202)] = _0x237d7a(0x23d), document['getElementById'](_0x237d7a(0x581))[_0x237d7a(0x202)] = '', _0x3e5a4c(); const _0x1608a1 = document['getElementById'](_0x237d7a(0x581)); let _0x105c6a = document[_0x237d7a(0x463)](_0x237d7a(0x20e)); !_0x105c6a && (_0x105c6a = document['createElement']('style'), _0x105c6a['id'] = _0x237d7a(0x20e), document[_0x237d7a(0x2cc)][_0x237d7a(0xa59)](_0x105c6a)); const _0x30cb30 = () => { const _0x1e885d = _0x237d7a, _0x18185e = _0x1608a1[_0x1e885d(0x202)]; let _0x2d2f64 = _0x18185e[_0x1e885d(0x219)](/\.bubble\.sent/g, _0x1e885d(0x8c1))[_0x1e885d(0x219)](/\.bubble\.received/g, _0x1e885d(0xa15)); _0x105c6a['innerHTML'] = _0x2d2f64; }; _0x1608a1[_0x237d7a(0x4bf)](_0x237d7a(0xb75), _0x30cb30), _0x1608a1[_0x237d7a(0x582)]('input', _0x30cb30), _0x30cb30(); } async function _0x43741d() { const _0x166233 = _0x2481c4, _0x431a0e = _0xaf7d6b[_0x166233(0x202)]; if (!_0x431a0e) { _0x24537c(_0x166233(0x8f1)); return; } const _0x2a0066 = _0x543c76(_0x431a0e); if (!_0x2a0066) return; _0x2aa27a(!![], '正在打包“' + _0x2a0066[_0x166233(0x3b3)] + _0x166233(0xb95)); try { if (_0x166233(0x586) !== _0x166233(0x586)) { const _0x35598c = (_0x22df0d - 0x5a) * _0x54282d['PI'] / 0xb4; return { 'x': _0x138564 + _0x5c8d5f * _0x16e9c0[_0x166233(0x277)](_0x35598c), 'y': _0x57a576 + _0x46d8b7 * _0x2ee145[_0x166233(0x1fe)](_0x35598c) }; } else { const _0x3646d6 = { 'type': _0x166233(0x7ab), 'version': 0x1, 'name': _0x2a0066[_0x166233(0x3b3)], 'remark': _0x2a0066[_0x166233(0x991)], 'persona': _0x2a0066[_0x166233(0x91d)], 'bubbleCss': _0x2a0066[_0x166233(0x450)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x5deb5a = await _0x393cae(_0x166233(0x22b) + _0x2a0066['id']); if (_0x5deb5a) _0x3646d6[_0x166233(0x6b6)] = await _0x5abd11(_0x5deb5a); const _0x124187 = [_0x166233(0x503), _0x166233(0x223), _0x166233(0x74d), _0x166233(0xb8e), _0x166233(0x383)]; for (const _0x112bdb of _0x124187) { if ('VTfyT' === _0x166233(0x2fb)) _0x208dc3[_0x166233(0x8d9)](_0x166233(0x8d4), _0x5199d4); else { const _0x5f0694 = await _0x393cae(_0x166233(0x395) + _0x112bdb + '_' + _0x2a0066['id']); _0x5f0694 && (_0x3646d6['sprites'][_0x112bdb] = await _0x5abd11(_0x5f0694)); } } if (_0x2a0066[_0x166233(0xb2b)] && _0x2a0066[_0x166233(0xb2b)][_0x166233(0x55b)] > 0x0) { if (_0x166233(0x82b) === _0x166233(0x3e2)) { const _0x518391 = _0x2d7de7[_0x166233(0x4f5)] === _0x28cf1f(_0x52a15f['activeChatId'])['id'] ? _0x42534a(_0x55fd8c[_0x166233(0x1e1)]) : _0x2128e4(_0x367900['recipientId']); _0x978d00['assign'](_0x4f164b, { 'type': _0x166233(0x97d), 'amount': _0x47a5ae[_0x166233(0x8bf)], 'recipientId': _0x24a8a5[_0x166233(0x4f5)], 'content': _0x166233(0x956) + (_0x518391?.[_0x166233(0x3b3)] || '未知') + _0x166233(0x9a8) + _0x2fd570[_0x166233(0x8bf)] + ']' }); } else _0x3646d6['worldBooks'] = _0x2a0066[_0x166233(0xb2b)]['map'](_0x391ece => _0x5f0a6c[_0x166233(0x7ad)][_0x166233(0x3be)](_0x47d4d0 => _0x47d4d0['id'] === _0x391ece))[_0x166233(0x216)](Boolean)[_0x166233(0x575)](_0x22adb5 => ({ 'name': _0x22adb5[_0x166233(0x3b3)], 'content': _0x22adb5[_0x166233(0x67c)] })); } const _0x5bfade = new Blob([JSON[_0x166233(0x38f)](_0x3646d6, null, 0x2)], { 'type': 'application/json' }), _0x572abe = URL[_0x166233(0x51e)](_0x5bfade), _0x1a522e = document[_0x166233(0x58b)]('a'); _0x1a522e[_0x166233(0xb1e)] = _0x572abe, _0x1a522e['download'] = _0x2a0066[_0x166233(0x3b3)] + _0x166233(0x322), document[_0x166233(0xb9d)][_0x166233(0xa59)](_0x1a522e), _0x1a522e[_0x166233(0x3bf)](), document['body']['removeChild'](_0x1a522e), URL[_0x166233(0x768)](_0x572abe); } } catch (_0x2e180a) { console[_0x166233(0x8d9)](_0x166233(0x4f9), _0x2e180a), _0x24537c(_0x166233(0x92a) + _0x2e180a['message']); } finally { _0x2aa27a(![]); } } async function _0x1a634c(_0x54dd0f) { const _0x152f2b = _0x2481c4; if (_0x152f2b(0x5d8) === _0x152f2b(0x5d8)) { const _0x50f840 = _0x54dd0f[_0x152f2b(0x606)][_0x152f2b(0x4b6)][0x0]; if (!_0x50f840) return; _0x2aa27a(!![], _0x152f2b(0x8fa)); const _0x9d5102 = new FileReader(); _0x9d5102['onload'] = async _0x23c99e => { const _0x5cc4cf = _0x152f2b; try { if ('hWzXO' === _0x5cc4cf(0x9bf)) _0x2a71d0[_0x5cc4cf(0xb01)] = _0x3e20b5['createObjectURL'](_0x182d8e), _0x1c3af4['style'][_0x5cc4cf(0x801)] = 0x1; else { const _0x2c323e = JSON[_0x5cc4cf(0x433)](_0x23c99e[_0x5cc4cf(0x606)][_0x5cc4cf(0x77c)]); if (_0x2c323e[_0x5cc4cf(0xc02)] !== 'NoirCharacterCard') throw new Error('这不是一张有效的Noir角色卡。'); const _0x3601b9 = []; if (_0x2c323e[_0x5cc4cf(0x7ad)] && _0x2c323e[_0x5cc4cf(0x7ad)][_0x5cc4cf(0x55b)] > 0x0) for (const _0x44a0d2 of _0x2c323e['worldBooks']) { if (_0x5cc4cf(0x96c) !== _0x5cc4cf(0x96c)) { const _0x5e6468 = _0x218f21['participantIds'][0x0]; _0x134253['classList'][_0x5cc4cf(0xb2c)]('bubble-' + _0x5e6468); } else { let _0x241b21 = _0x5f0a6c[_0x5cc4cf(0x7ad)][_0x5cc4cf(0x3be)](_0xc6f044 => _0xc6f044[_0x5cc4cf(0x3b3)] === _0x44a0d2['name']); if (_0x241b21) _0x3601b9[_0x5cc4cf(0x1e6)](_0x241b21['id']); else { if (_0x5cc4cf(0xb3c) !== _0x5cc4cf(0xb3c)) _0x13dd07(), _0x41389b(); else { const _0x1ba8e3 = { 'id': 'wb_' + Date[_0x5cc4cf(0xb71)]() + '_' + Math['random'](), 'name': _0x44a0d2[_0x5cc4cf(0x3b3)], 'content': _0x44a0d2[_0x5cc4cf(0x67c)] }; _0x5f0a6c[_0x5cc4cf(0x7ad)][_0x5cc4cf(0x1e6)](_0x1ba8e3), _0x3601b9[_0x5cc4cf(0x1e6)](_0x1ba8e3['id']); } } } } const _0x44c077 = _0x5cc4cf(0x3ab) + Date[_0x5cc4cf(0xb71)](); let _0x27a68b = null; if (_0x2c323e['avatar']) { const _0x153548 = await _0x32e14c(_0x2c323e[_0x5cc4cf(0x6b6)]); await _0x4d5a5e('char_avatar_' + _0x44c077, _0x153548), _0x27a68b = await _0x5abd11(_0x153548); } if (_0x2c323e[_0x5cc4cf(0x4c2)]) for (const _0x53e9f4 in _0x2c323e[_0x5cc4cf(0x4c2)]) { const _0x2d78e6 = _0x2c323e[_0x5cc4cf(0x4c2)][_0x53e9f4]; if (_0x2d78e6) { const _0x45e297 = await _0x32e14c(_0x2d78e6); await _0x4d5a5e(_0x5cc4cf(0x395) + _0x53e9f4 + '_' + _0x44c077, _0x45e297); } } const _0x438673 = { 'id': _0x44c077, 'name': _0x2c323e['name'], 'remark': _0x2c323e[_0x5cc4cf(0x991)] || '', 'persona': _0x2c323e[_0x5cc4cf(0x91d)], 'avatar': _0x27a68b, 'linkedWorldBookIds': _0x3601b9, 'bubbleCss': _0x2c323e[_0x5cc4cf(0x450)] || '' }; _0x5f0a6c['characters'][_0x5cc4cf(0x1e6)](_0x438673); const _0x14862d = { 'id': _0x5cc4cf(0xa3e) + _0x44c077, 'type': 'private', 'participantIds': [_0x44c077], 'boundUserProfileId': _0x5f0a6c[_0x5cc4cf(0xbb5)] }; _0x5f0a6c[_0x5cc4cf(0xab8)][_0x5cc4cf(0x1e6)](_0x14862d), _0x5c772f(), await _0x30852c(), _0x24537c('“' + _0x438673[_0x5cc4cf(0x3b3)] + '”已成功导入！'); } } catch (_0x2b4b40) { console['error']('导入角色卡失败:', _0x2b4b40), _0x24537c(_0x5cc4cf(0xc39) + _0x2b4b40[_0x5cc4cf(0x9fa)]); } finally { _0x2aa27a(![]), _0x54dd0f[_0x5cc4cf(0x606)][_0x5cc4cf(0x202)] = ''; } }, _0x9d5102['readAsText'](_0x50f840); } else { const _0xe59808 = _0x1cad3f[_0x152f2b(0x4ef)][_0x451930]; _0xe59808 && _0xe59808['length'] > 0x0 && (_0x578f42 = _0xe59808['at'](-0x1)); } } async function _0x12841b() { const _0x1c5092 = _0x2481c4, _0x135706 = _0xaf7d6b[_0x1c5092(0x202)], _0x3daef3 = document[_0x1c5092(0x463)](_0x1c5092(0x9cc))[_0x1c5092(0x202)], _0x3ce5b9 = _0x48dc6b[_0x1c5092(0x4b6)][0x0], _0x3c759d = _0x1db2f3[_0x1c5092(0x4b6)][0x0], _0xf14895 = _0x41f051[_0x1c5092(0x4b6)][0x0], _0x3e1bc9 = document[_0x1c5092(0x5a2)](_0x1c5092(0x380)), _0x245591 = Array[_0x1c5092(0x8b4)](_0x3e1bc9)['map'](_0x451c3d => _0x451c3d[_0x1c5092(0x202)]), _0x3591bc = { 'name': _0x5e4a70['value']['trim'](), 'remark': _0x3c0a70['value'][_0x1c5092(0x1e9)](), 'persona': _0x59c216[_0x1c5092(0x202)][_0x1c5092(0x1e9)](), 'linkedWorldBookIds': _0x245591, 'bubbleCss': document[_0x1c5092(0x463)](_0x1c5092(0x581))[_0x1c5092(0x202)][_0x1c5092(0x1e9)](), 'avatarFrameUrl': document[_0x1c5092(0x463)](_0x1c5092(0xa63))[_0x1c5092(0x202)][_0x1c5092(0x1e9)](), 'userAvatarFrameUrl': document['getElementById'](_0x1c5092(0x39c))[_0x1c5092(0x202)][_0x1c5092(0x1e9)]() }; if (!_0x3591bc[_0x1c5092(0x3b3)]) { _0x24537c(_0x1c5092(0xa55)); return; } try { const _0x150ecf = [_0x1c5092(0x503), _0x1c5092(0x223), _0x1c5092(0x74d), _0x1c5092(0xb8e), _0x1c5092(0x383)]; let _0x57a098 = _0x135706; if (_0x135706) { if ('PGrgS' === _0x1c5092(0x881)) { const _0x5c27a9 = _0x5f0a6c[_0x1c5092(0x723)][_0x1c5092(0x3be)](_0xdd6b9b => _0xdd6b9b['id'] === _0x135706); _0x5c27a9 && Object[_0x1c5092(0xac1)](_0x5c27a9, _0x3591bc); } else _0x41fcbd['classList']['add']('is-entering-from-right'), _0x21af67['classList'][_0x1c5092(0xb2c)](_0x1c5092(0xbb7)), _0x4c12d2[_0x1c5092(0x776)][_0x1c5092(0xb2c)](_0x1c5092(0xb73)), _0x3763b4(() => { const _0x66f8b0 = _0x1c5092; _0x39f02d[_0x66f8b0(0x776)]['remove'](_0x66f8b0(0xb73), 'is-exiting-left'), _0x211c39[_0x66f8b0(0x776)][_0x66f8b0(0x554)]('is-entering-from-right'), _0x146cc0[_0x66f8b0(0xa8a)] = _0x2d9ea6, _0x31f1d8(), _0x46a45b['isAnimatingDiary'] = ![]; }, 0x2bc); } else { const _0x44b874 = 'char_' + Date['now'](); _0x57a098 = _0x44b874; const _0x1fe773 = { 'id': _0x44b874, ..._0x3591bc }; _0x1fe773[_0x1c5092(0x6b6)] = _0x3ce5b9 ? await _0x4662c8(_0x3ce5b9) : _0x25d84a, _0x5f0a6c['characters'][_0x1c5092(0x1e6)](_0x1fe773); const _0x5d2cf3 = { 'id': _0x1c5092(0xa3e) + _0x44b874, 'type': _0x1c5092(0x963), 'participantIds': [_0x44b874], 'listenTogetherSession': null }; _0x5f0a6c['chats']['push'](_0x5d2cf3); } const _0x14d72e = _0x5f0a6c[_0x1c5092(0xab8)][_0x1c5092(0x3be)](_0x4f8372 => _0x4f8372['type'] === _0x1c5092(0x963) && _0x4f8372[_0x1c5092(0x3d4)][_0x1c5092(0xa1c)](_0x57a098)); _0x14d72e && (_0x14d72e[_0x1c5092(0x763)] = _0x3daef3); if (_0x3ce5b9) await _0x4d5a5e(_0x1c5092(0x22b) + _0x57a098, _0x3ce5b9); if (_0x3c759d) await _0x4d5a5e(_0x1c5092(0x2a1) + _0x57a098, _0x3c759d); if (_0xf14895) await _0x4d5a5e(_0x1c5092(0x346) + _0x57a098, _0xf14895); for (const _0x3e4560 of _0x150ecf) { if (_0x1c5092(0x756) === _0x1c5092(0x756)) { const _0x4cee76 = document['getElementById']('char-edit-sprite-' + _0x3e4560 + _0x1c5092(0xb6a))[_0x1c5092(0x4b6)][0x0]; if (_0x4cee76) await _0x4d5a5e('char_sprite_' + _0x3e4560 + '_' + _0x57a098, _0x4cee76); } else _0x2a3216(_0x1c5092(0x83e), _0x1c5092(0xa6b)), _0x477ac4(![]); } _0x5c772f(), _0x30852c(), _0x24537c(_0x1c5092(0x3ee)), _0x1922fc('chat', _0x1c5092(0xaa5)); if (!_0x135706) { if (_0x1c5092(0x924) !== _0x1c5092(0x6b5)) { const _0x4d0af1 = _0x1c5092(0xa3e) + _0x57a098; _0x420138(_0x4d0af1), _0x42aebf(!![]); } else { const _0x459718 = _0xc69f98[_0x1c5092(0x906)][0x0][_0x1c5092(0x3b8)] - _0x44b925, _0x3ca48b = _0x3522d7[_0x1c5092(0x906)][0x0][_0x1c5092(0x37a)] - _0x3deb00; _0x29be29[_0x1c5092(0xc18)](_0x459718) > _0x24e07e[_0x1c5092(0xc18)](_0x3ca48b) ? _0xbad7ad = _0x1c5092(0x565) : _0x26ea18 = _0x1c5092(0x5e2); } } } catch (_0x25019c) { console[_0x1c5092(0x8d9)](_0x1c5092(0x6c2), _0x25019c), _0x24537c('保存失败:\x20' + _0x25019c[_0x1c5092(0x9fa)]); } } function _0x1d4831() { const _0x34f449 = _0x2481c4; if (_0x34f449(0x2fe) === 'aKlNY') _0x3d8f59[_0x34f449(0x776)][_0x34f449(0xb2c)]('is-visible'); else { _0x9caf26[_0x34f449(0x202)] = '', _0x242a0e[_0x34f449(0xb00)] = ''; if (_0x5f0a6c[_0x34f449(0x723)]['length'] < 0x2) { if ('kjHCm' !== _0x34f449(0x744)) !_0x11be8f && (_0x22149e = _0x54b1c6[_0x34f449(0x58b)](_0x34f449(0xbdf)), _0x412e5c['id'] = _0x34f449(0x500), _0x33f6b6['appendChild'](_0x40391a)), _0xe882ca[_0x34f449(0xb00)] = '<div\x20class=\x22loader-spinner\x22></div><span>' + _0x10cb0c + '</span>', _0x357440[_0x34f449(0x80c)][_0x34f449(0x6df)] = _0x34f449(0x1df); else { _0x24537c(_0x34f449(0x70a)); return; } } _0x5f0a6c['characters'][_0x34f449(0xbe4)](_0x40a7cd => { const _0x41d8fc = _0x34f449, _0x538800 = document['createElement']('li'); _0x538800[_0x41d8fc(0x781)] = _0x41d8fc(0xa2a), _0x538800[_0x41d8fc(0xb00)] = _0x41d8fc(0x4b1) + _0x40a7cd['id'] + _0x41d8fc(0x2e7) + _0x40a7cd['id'] + _0x41d8fc(0x3d2) + (_0x40a7cd['avatar'] || _0x25d84a) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-' + _0x40a7cd['id'] + _0x41d8fc(0x430) + _0x40a7cd[_0x41d8fc(0x3b3)] + _0x41d8fc(0xaa2), _0x242a0e[_0x41d8fc(0xa59)](_0x538800); }), _0x1922fc(_0x34f449(0xa6b), _0x34f449(0x551)); } } function _0x3eeb8f() { const _0x33eeb = _0x2481c4, _0x951cba = _0x9caf26[_0x33eeb(0x202)]['trim'](); if (!_0x951cba) { if ('jYFWr' === _0x33eeb(0x536)) _0x222237(), _0x25843d(![]); else { _0x24537c(_0x33eeb(0x312)); return; } } const _0x3a3c55 = Array[_0x33eeb(0x8b4)](_0x242a0e[_0x33eeb(0x5a2)](_0x33eeb(0x597)))[_0x33eeb(0x575)](_0x5ba150 => _0x5ba150[_0x33eeb(0x607)]['id']); if (_0x3a3c55['length'] < 0x2) { if (_0x33eeb(0x81c) === _0x33eeb(0xbfc)) _0x543113[_0x33eeb(0x5d3)] = { 'sender': _0x4795b3[0x1][_0x33eeb(0x1e9)](), 'content': _0xf795f4[0x2][_0x33eeb(0x1e9)]() }, _0x2c6d01[_0x33eeb(0x67c)] = _0x1ad3ce[_0x33eeb(0x9ff)](_0x54aeea[0x0][_0x33eeb(0x55b)])['trim'](); else { _0x24537c(_0x33eeb(0x55e)); return; } } const _0x569c99 = { 'id': _0x33eeb(0x61c) + Date[_0x33eeb(0xb71)](), 'type': _0x33eeb(0x74a), 'name': _0x951cba, 'participantIds': _0x3a3c55 }; _0x5f0a6c['chats'][_0x33eeb(0x1e6)](_0x569c99), _0x5f0a6c[_0x33eeb(0x1e1)] = _0x569c99['id'], _0x5c772f(), _0x30852c(), _0xfdb8e8(), _0x9b0609(), _0x24537c(_0x33eeb(0xb63) + _0x951cba + _0x33eeb(0x657)), _0x1922fc(_0x33eeb(0x83e), _0x33eeb(0xa6b)); } _0x478961['addEventListener'](_0x2481c4(0x3bf), () => _0x5d6f03[_0x2481c4(0x3bf)]()), _0x1b0979[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x5b63cf), _0x5d6f03['addEventListener'](_0x2481c4(0x236), _0x4d8800), _0x1141af[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x28eef9), _0x62473f[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1f8cc1[_0x2481c4(0x776)][_0x2481c4(0x554)]('show')), _0x25eb83['addEventListener']('click', () => _0x1f8cc1[_0x2481c4(0x776)][_0x2481c4(0x554)](_0x2481c4(0x940))), _0x52ce38[_0x2481c4(0x582)]('click', () => { const _0x5a504c = _0x2481c4; if (_0x5a504c(0x496) === _0x5a504c(0x58d)) return _0x5a504c(0xba7) + _0x3d71ae; else _0xfab423[_0x5a504c(0x734)](), navigator[_0x5a504c(0xa5c)]['writeText'](_0xfab423[_0x5a504c(0x202)])[_0x5a504c(0x794)](() => { const _0x2d07fe = _0x5a504c; _0x24537c(_0x2d07fe(0x66c)); })['catch'](_0x1f8c6c => { const _0x4247cf = _0x5a504c; if (_0x4247cf(0x651) !== _0x4247cf(0x651)) { const _0x204ef9 = _0x336da4(_0x276892[_0x4247cf(0x3d4)][0x0]); return _0x204ef9?.[_0x4247cf(0x3b3)] || 'AI'; } else _0x24537c(_0x4247cf(0xaf6)); }); }), _0x53f0bf[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x5b547b), _0x24e893[_0x2481c4(0x582)]('click', _0x4e9c65), _0x29b128[_0x2481c4(0x582)]('click', () => _0x1b1e35['classList']['remove'](_0x2481c4(0x940))), _0x465408[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1b1e35[_0x2481c4(0x776)][_0x2481c4(0x554)](_0x2481c4(0x940))), _0x5ac9e7[_0x2481c4(0x582)]('click', () => _0x1db2f3['click']()), _0x575e79[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x41f051['click']()), _0x1db2f3[_0x2481c4(0x582)](_0x2481c4(0x236), _0x41bd64 => { const _0x46a466 = _0x2481c4; if ('uPsfV' !== _0x46a466(0x8f3)) { const _0x43e71c = _0x41bd64[_0x46a466(0x606)][_0x46a466(0x4b6)][0x0]; if (!_0x43e71c) return; const _0x48793b = URL['createObjectURL'](_0x43e71c); _0x5ac9e7[_0x46a466(0x80c)][_0x46a466(0x4b2)] = 'url(\x27' + _0x48793b + '\x27)'; } else _0x17ff28[_0x46a466(0x80c)]['backgroundImage'] = '', _0x445c2c[_0x46a466(0x80c)]['color'] = '', _0x9fbfd7[_0x46a466(0x5a2)]('.widget-info\x20>\x20div')[_0x46a466(0xbe4)](_0x24201b => { const _0x4e7155 = _0x46a466; _0x24201b[_0x4e7155(0x80c)]['textShadow'] = ''; }); }), _0x41f051[_0x2481c4(0x582)]('change', _0x473cf8 => { const _0x25d6a6 = _0x2481c4, _0x2e951c = _0x473cf8[_0x25d6a6(0x606)][_0x25d6a6(0x4b6)][0x0]; if (!_0x2e951c) return; const _0xa19ae1 = URL[_0x25d6a6(0x51e)](_0x2e951c); _0x575e79[_0x25d6a6(0x80c)][_0x25d6a6(0x4b2)] = _0x25d6a6(0x205) + _0xa19ae1 + '\x27)'; }), _0x4ee5aa[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x2125ea[_0x2481c4(0x3bf)]()), _0x50297c[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x2be1e9 = _0x2481c4; _0x2be1e9(0x550) === _0x2be1e9(0x1dd) ? (_0x30362e(![]), _0x5cd91c[_0x2be1e9(0x5f8)] = ![]) : (localStorage['removeItem']('customFeedWallpaper'), _0x3acb09(), _0x24537c(_0x2be1e9(0x8b0))); }), _0x2125ea[_0x2481c4(0x582)]('change', async _0x31f7a4 => { const _0x4bdac4 = _0x2481c4, _0xf2200d = _0x31f7a4[_0x4bdac4(0x606)]['files'][0x0]; if (!_0xf2200d) return; try { if (_0x4bdac4(0x655) !== _0x4bdac4(0x655)) _0x26a5c7[_0x4bdac4(0x202)] = ''; else { const _0x36d4b4 = await _0x4662c8(_0xf2200d); localStorage[_0x4bdac4(0x246)]('customFeedWallpaper', _0x36d4b4), _0x3acb09(), _0x24537c(_0x4bdac4(0x266)); } } catch (_0x4eface) { _0x4bdac4(0x8de) === 'LVcAq' ? _0xa2ce21[_0x4bdac4(0x246)](_0x4bdac4(0x3c3) + _0x46d3bd[_0x4bdac4(0x1e1)], _0x372202[_0x4bdac4(0x38f)](_0x4f9a65[_0x4bdac4(0xbc8)])) : _0x24537c(_0x4bdac4(0x72e) + _0x4eface['message']); } }), document['getElementById'](_0x2481c4(0x363))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1922fc(_0x2481c4(0x83e), _0x2481c4(0x48d))), document['getElementById']('save-group-settings-button')[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x29b067); const _0x11bb6f = document[_0x2481c4(0x463)](_0x2481c4(0x7fb)), _0x1bf6d0 = document[_0x2481c4(0x463)]('group-avatar-input'); _0x11bb6f[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1bf6d0[_0x2481c4(0x3bf)]()), _0x1bf6d0[_0x2481c4(0x582)](_0x2481c4(0x236), _0xf7892e => { const _0x1bc555 = _0x2481c4, _0x39abc4 = _0xf7892e[_0x1bc555(0x606)][_0x1bc555(0x4b6)][0x0]; if (!_0x39abc4) return; const _0x7db326 = URL['createObjectURL'](_0x39abc4); _0x11bb6f[_0x1bc555(0xb01)] = _0x7db326, _0x11bb6f[_0x1bc555(0x79e)] = () => { const _0xe225e7 = _0x1bc555; URL[_0xe225e7(0x768)](_0x7db326); }; }); const _0x511c2e = document[_0x2481c4(0x463)](_0x2481c4(0xae1))[_0x2481c4(0x94b)], _0x546287 = document[_0x2481c4(0x463)](_0x2481c4(0x3ea)), _0x54e9a7 = document[_0x2481c4(0x463)](_0x2481c4(0xae1)); _0x511c2e[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x546287[_0x2481c4(0x3bf)]()), _0x546287[_0x2481c4(0x582)](_0x2481c4(0x236), _0x3c5924 => { const _0x67fc81 = _0x2481c4, _0x4c5456 = _0x3c5924[_0x67fc81(0x606)][_0x67fc81(0x4b6)][0x0]; if (!_0x4c5456) return; const _0xc75502 = URL['createObjectURL'](_0x4c5456); document[_0x67fc81(0x463)]('group-bg-preview')[_0x67fc81(0x80c)][_0x67fc81(0x4b2)] = _0x67fc81(0x205) + _0xc75502 + '\x27)'; }); const _0x58c1b8 = document[_0x2481c4(0x7dd)](_0x2481c4(0x878)), _0x4f7c44 = document[_0x2481c4(0x463)](_0x2481c4(0x293)); _0x58c1b8[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x52a8a8 => { const _0x472442 = _0x2481c4; _0x52a8a8['stopPropagation'](), _0x4f7c44['classList'][_0x472442(0x965)](_0x472442(0x56c)), _0x58c1b8[_0x472442(0x776)][_0x472442(0x965)](_0x472442(0x666)); }), _0x4f7c44[_0x2481c4(0x582)](_0x2481c4(0x236), _0x26edf4), document[_0x2481c4(0x463)](_0x2481c4(0xbd5))[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x59b5ce), document[_0x2481c4(0x463)](_0x2481c4(0xb77))[_0x2481c4(0x582)](_0x2481c4(0x3bf), async () => { const _0x2d254e = _0x2481c4; if (_0x2d254e(0x5eb) === _0x2d254e(0x5eb)) { const _0x39658b = _0x168762(); if (!_0x39658b || _0x39658b[_0x2d254e(0xc02)] !== 'group') return; const _0x237e3a = await _0x1ec207(_0x2d254e(0xacc) + _0x39658b[_0x2d254e(0x3b3)] + _0x2d254e(0x622)); if (_0x237e3a) { if (_0x2d254e(0xc30) !== _0x2d254e(0xc30)) { const _0x1fb371 = _0x2346ac[_0x2d254e(0x5a2)](_0x2d254e(0x224)); _0x1fb371[_0x2d254e(0xbe4)](_0x3eb231 => _0x3eb231[_0x2d254e(0x554)]()); } else _0x106594(_0x39658b['id']), _0x24537c(_0x2d254e(0x49f)), _0x1922fc('chat'), _0x42aebf(![]); } } else _0x4972dd(![]); }); const _0x7c954 = document[_0x2481c4(0x7dd)](_0x2481c4(0xaeb)), _0x178576 = document['getElementById'](_0x2481c4(0x652)); _0x7c954[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x528437 => { const _0x44c34e = _0x2481c4; if (_0x44c34e(0x859) !== _0x44c34e(0xbb0)) _0x528437['stopPropagation'](), _0x178576[_0x44c34e(0x776)][_0x44c34e(0x965)](_0x44c34e(0x56c)), _0x7c954['classList']['toggle'](_0x44c34e(0x666)); else return new _0x140732(_0x1775fd => { const _0x2a1299 = _0x44c34e, _0x2677f1 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x1a727b[_0x2a1299(0xb9d)][_0x2a1299(0x793)](_0x2a1299(0xb65), _0x2677f1); const _0x424362 = _0x3742ea['getElementById'](_0x2a1299(0x6f5)), _0x7af1f9 = _0xdc9967['getElementById'](_0x2a1299(0x880)), _0x4c780e = _0x3bd95d[_0x2a1299(0x463)]('diary-modal-save'), _0x46abe2 = _0x5e2dda[_0x2a1299(0x463)](_0x2a1299(0x313)), _0x33c1d1 = _0x424362[_0x2a1299(0x7dd)](_0x2a1299(0x9ce)), _0x50a0a8 = () => { _0x424362['remove'](), _0x1775fd(); }; _0x4c780e[_0x2a1299(0x752)] = () => { _0x19bd55(_0x7af1f9['value']), _0x50a0a8(); }, _0x46abe2[_0x2a1299(0x752)] = _0x50a0a8, _0x33c1d1[_0x2a1299(0x752)] = _0x50a0a8; }); }), _0x178576[_0x2481c4(0x582)](_0x2481c4(0x236), _0x3e5a4c), document['addEventListener'](_0x2481c4(0x3bf), _0x2aac03 => { const _0xe9f8d1 = _0x2481c4; if (!document[_0xe9f8d1(0x7dd)](_0xe9f8d1(0x4ed))[_0xe9f8d1(0x999)](_0x2aac03['target'])) { if (_0xe9f8d1(0x45e) === 'xXmKU') { _0x29ce0('好友圈名称不能为空！'); return; } else _0x178576[_0xe9f8d1(0x776)]['remove'](_0xe9f8d1(0x56c)), _0x7c954[_0xe9f8d1(0x776)][_0xe9f8d1(0x554)]('expanded'); } }), _0x14b6b6[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x4aa39c = _0x2481c4; _0x4aa39c(0xac6) !== 'UpWvA' ? (_0x5e6a55(), _0x1922fc(_0x4aa39c(0x2be), 'home')) : _0x4c1900 = _0x145b7d(_0x781755); }), document[_0x2481c4(0x463)](_0x2481c4(0x8b1))[_0x2481c4(0x582)]('click', () => _0x1922fc(_0x2481c4(0x28c), _0x2481c4(0x2be))), document[_0x2481c4(0x463)](_0x2481c4(0x5bb))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x46ef23()), document[_0x2481c4(0x463)](_0x2481c4(0x856))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x582d1d = _0x2481c4; _0x5e6a55(), _0x1922fc(_0x582d1d(0x2be), _0x582d1d(0x42d)); }), document[_0x2481c4(0x463)](_0x2481c4(0xbd9))[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x27cc19), document[_0x2481c4(0x463)](_0x2481c4(0x58e))[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x318bd9), _0x1873a8['addEventListener'](_0x2481c4(0x3bf), () => _0x1922fc(_0x2481c4(0x34c), 'home')), _0x151c2d['addEventListener'](_0x2481c4(0x3bf), () => _0x1922fc(_0x2481c4(0x28c), _0x2481c4(0x34c))), _0x507f19[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x3ddd20[_0x2481c4(0x3bf)]()), _0x3ddd20[_0x2481c4(0x582)](_0x2481c4(0x236), async _0x55730b => { const _0x1847c4 = _0x2481c4; if (_0x1847c4(0x99c) === _0x1847c4(0xafc)) { _0x3099c6['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', _0x4398b4[_0x1847c4(0xb00)] = ''; return; } else { const _0x2b2db5 = _0x55730b[_0x1847c4(0x606)][_0x1847c4(0x4b6)][0x0]; if (!_0x2b2db5) return; await _0x11ba55(_0x2b2db5); } }), _0x198ba4['addEventListener'](_0x2481c4(0x3bf), () => { const _0x477784 = _0x2481c4; if (_0x477784(0x858) !== _0x477784(0x9af)) _0x30852c(), _0x1922fc(_0x477784(0x83e), _0x477784(0x28c)); else { const _0x279bdf = _0x3a0d78(_0x5d9252[_0x477784(0x7e3)][_0x477784(0x3ce)]); _0x279bdf && (_0x770613 = _0x477784(0x8ec) + _0x279bdf[_0x477784(0x6b6)] + _0x477784(0x6c7) + _0x279bdf[_0x477784(0x3b3)] + _0x477784(0x5ac) + _0xf1057b[_0x477784(0x7e3)][_0x477784(0x3a1)] + '</div></div></div>'); } }), _0x2599b1[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0xdde596 = _0x2481c4; if ('RsEjw' === _0xdde596(0x974)) { _0x14f27b(); const _0x2af413 = (_0x5f0a6c['apiSettings'][_0xdde596(0x869)] || '')[_0xdde596(0xa1c)](_0x596c9f); _0xbecd1d[_0xdde596(0xa7f)] = _0x2af413, _0x1922fc(_0xdde596(0x599), _0xdde596(0x28c)); } else _0x502765[_0xdde596(0x8d9)]('用户分享音乐失败:', _0x189088), _0x1834ae(_0xdde596(0xbb1) + _0x65125b[_0xdde596(0x9fa)]); }), _0x331b05[_0x2481c4(0x582)]('click', () => _0x1922fc(_0x2481c4(0x28c), _0x2481c4(0x599))), _0x2cfc44[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x50a3b9 = _0x2481c4; _0x3dc52f(), _0x1922fc(_0x50a3b9(0x28c), 'chat'); }), _0x1b4a5b[_0x2481c4(0x582)]('click', () => { _0x3dc52f(), _0x42aebf(![]); }), _0x5534c8[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x2bbbc4 = _0x2481c4; _0x2bbbc4(0x218) !== 'YZhqO' ? (_0x27a5b5[_0x2bbbc4(0xc38)] = _0x35b169, _0x180071(_0x11bce8['activeMeetingCharId'], _0x2bbbc4(0x503))) : _0x1922fc('chat', 'characterEdit'); }), _0x5022ce[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x131d8f = _0x2481c4; if (_0x131d8f(0x765) !== _0x131d8f(0x1f4)) _0x1afa1b[_0x131d8f(0x776)][_0x131d8f(0xb2c)](_0x131d8f(0x940)); else { _0x37115f('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } }), _0x53e0e3[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x2a339d()), _0x41cba0['addEventListener'](_0x2481c4(0x3bf), _0x4a615f); function _0x2d58d8(_0x36558f) { const _0x79019e = _0x2481c4; if (!_0x36558f || _0x36558f[_0x79019e(0xc02)] !== _0x79019e(0x74a)) return; const _0x3df4a4 = _0x79019e(0x4b7); document['body']['insertAdjacentHTML'](_0x79019e(0xb65), _0x3df4a4); const _0x5758b2 = document['getElementById'](_0x79019e(0x3cf)), _0x170b0d = _0x5758b2[_0x79019e(0x7dd)](_0x79019e(0x9ce)), _0x2bed5e = document[_0x79019e(0x463)](_0x79019e(0x9ad)), _0x31a17c = document['getElementById'](_0x79019e(0x726)), _0x5820b9 = document['getElementById'](_0x79019e(0x62a)), _0x49bfc2 = document['getElementById'](_0x79019e(0xad9)), _0x269101 = document[_0x79019e(0x463)](_0x79019e(0xbba)), _0x14dc17 = () => _0x5758b2[_0x79019e(0x554)](); _0x2bed5e['addEventListener'](_0x79019e(0x3bf), async () => { const _0x3b7a57 = _0x79019e; _0x14dc17(); const _0x229e16 = await _0x1ec207(_0x3b7a57(0x9c7) + _0x36558f[_0x3b7a57(0x3b3)] + _0x3b7a57(0x62e)); if (_0x229e16) { _0x36558f['id'] === _0x5f0a6c[_0x3b7a57(0x1e1)] && ('ZLRZc' === _0x3b7a57(0x5fa) ? _0x2d6125[_0x3b7a57(0x1e6)](_0x1060b7) : (_0x3dc52f(), _0x5f0a6c[_0x3b7a57(0xbc8)] = [], _0x1a8cc0())); try { localStorage[_0x3b7a57(0x805)](_0x3b7a57(0x3c3) + _0x36558f['id']), _0x24537c(_0x3b7a57(0x2ab) + _0x36558f[_0x3b7a57(0x3b3)] + _0x3b7a57(0xbd0)); } catch (_0xd6832d) { if ('NrSaA' !== 'YypDC') console[_0x3b7a57(0x8d9)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x36558f['id'], _0xd6832d), _0x24537c(_0x3b7a57(0x2b6)); else { _0x23b154(_0x3b7a57(0x260) + _0x229944 + '\x20个旧头像。应用即将刷新。'), _0x571a7a(() => _0x30abc1[_0x3b7a57(0x4df)](), 0x5dc); return; } } } }), _0x31a17c[_0x79019e(0x582)](_0x79019e(0x3bf), () => { _0x14dc17(), _0x24537c('编辑群成员功能正在开发中...'); }), _0x5820b9[_0x79019e(0x582)](_0x79019e(0x3bf), async () => { const _0x8eb8f0 = _0x79019e; _0x14dc17(); const _0x197d5c = prompt(_0x8eb8f0(0x73e), _0x36558f['name']); if (_0x197d5c && _0x197d5c[_0x8eb8f0(0x1e9)]() && _0x197d5c !== _0x36558f[_0x8eb8f0(0x3b3)]) { if (_0x8eb8f0(0x35e) === 'gxIzm') { const _0x51d12a = _0x4a3707 === _0x2754d0 ? '>>\x20' : ''; return '' + _0x51d12a + _0x38ae27[_0x8eb8f0(0x3a1)]; } else _0x36558f[_0x8eb8f0(0x3b3)] = _0x197d5c[_0x8eb8f0(0x1e9)](), _0x5c772f(), _0x30852c(), _0xfdb8e8(), _0x24537c('群名称已更改为\x22' + _0x36558f[_0x8eb8f0(0x3b3)] + '\x22。'); } }), _0x49bfc2[_0x79019e(0x582)](_0x79019e(0x3bf), async () => { const _0xb3718c = _0x79019e; if (_0xb3718c(0xaa7) !== _0xb3718c(0xaa7)) { if (_0x56038f) _0x4ca54b(_0x3a22c4); const _0x3c1c6e = _0x1b923b[_0xb3718c(0x606)][_0xb3718c(0x23b)](_0xb3718c(0x64f)); if (!_0x3c1c6e) return; const _0x8e65ae = _0x306e39(_0x3c1c6e[_0xb3718c(0x607)][_0xb3718c(0xb7b)], 0xa); if (_0x1de6f7(_0x8e65ae)) return; const _0x4e4d64 = () => { _0x51dee5 = _0x4bdd28(() => { const _0x2bd105 = _0x5910; if (_0x34e9be[_0x2bd105(0xc02)] === _0x2bd105(0x8f8)) _0x4f5526['preventDefault'](); _0x565fe2(_0x8e65ae); }, 0x320); }, _0x37b640 = () => { if (_0x2e02cd) _0x2530a2(_0x12d131); }; _0x156bd5['addEventListener']('mouseup', _0x37b640, { 'once': !![] }), _0x44a53c['addEventListener']('mouseleave', _0x37b640, { 'once': !![] }), _0x4c4056[_0xb3718c(0x582)](_0xb3718c(0x4ec), _0x37b640, { 'once': !![] }), _0x55bdd1['addEventListener']('touchcancel', _0x37b640, { 'once': !![] }), _0x4e4d64(); } else { _0x14dc17(); const _0x541266 = await _0x1ec207('确定要删除群聊\x22' + _0x36558f[_0xb3718c(0x3b3)] + _0xb3718c(0x452)); _0x541266 && ('qBocL' !== _0xb3718c(0x4fe) ? (_0x106594(_0x36558f['id']), _0x24537c('群聊\x22' + _0x36558f['name'] + _0xb3718c(0x341)), _0x42aebf(![])) : (_0x1882a3['innerHTML'] = '', _0x29aade[_0xb3718c(0xbe4)](_0x5bcf0f => { const _0x461e95 = _0xb3718c, _0x1c5b10 = _0x540507[_0x461e95(0x58b)](_0x461e95(0x938)); _0x1c5b10['src'] = _0x5bcf0f[_0x461e95(0xb0d)], _0x1c5b10[_0x461e95(0xb64)] = _0x461e95(0x396), _0x1c5b10[_0x461e95(0x879)] = _0x5bcf0f['name'], _0x1c5b10[_0x461e95(0x776)][_0x461e95(0xb2c)](_0x461e95(0x30e)), _0x1c5b10[_0x461e95(0x582)](_0x461e95(0x3bf), () => _0x421e2a(_0x5bcf0f)), _0x4c87b3['appendChild'](_0x1c5b10); }))); } }), _0x170b0d[_0x79019e(0x582)](_0x79019e(0x3bf), _0x14dc17), _0x269101[_0x79019e(0x582)](_0x79019e(0x3bf), _0x14dc17); } _0x204738[_0x2481c4(0x582)]('click', () => { const _0x4d009f = _0x2481c4, _0x3c19d8 = _0x168762(); if (_0x3c19d8 && _0x3c19d8[_0x4d009f(0xc02)] === _0x4d009f(0x963)) _0x1439b1(_0x3c19d8[_0x4d009f(0x3d4)][0x0]); else _0x3c19d8 && _0x3c19d8[_0x4d009f(0xc02)] === 'group' && _0x516f2b(_0x3c19d8['id']); }), _0x44e53d[_0x2481c4(0x582)](_0x2481c4(0x3ff), _0x287abc => { const _0x559b2b = _0x2481c4; if (_0x287abc[_0x559b2b(0x54e)] === 'Enter' && !_0x287abc['shiftKey']) { if ('NwCfM' === _0x559b2b(0x206)) _0x287abc[_0x559b2b(0x422)](), _0x2a339d(); else { const _0x1bc970 = _0x29d69b[_0x559b2b(0x58b)]('li'); _0x1bc970[_0x559b2b(0x781)] = _0x559b2b(0x47b), _0x1bc970['dataset'][_0x559b2b(0x3ce)] = _0x20582e['id'], _0x1bc970[_0x559b2b(0xb00)] = _0x559b2b(0x97b) + (_0x3482ae['avatar'] || _0x55c67c) + _0x559b2b(0x8d6) + _0x1aa3d1[_0x559b2b(0x3b3)] + _0x559b2b(0xaca) + (_0xeb144a['remark'] || '私聊') + _0x559b2b(0x9c1), _0x1bc970[_0x559b2b(0x582)]('click', () => { _0x4204bc(_0x3bec8c['id']); }), _0x1c6592[_0x559b2b(0xa59)](_0x1bc970); } } }); const _0xb82e77 = () => _0x1afa1b[_0x2481c4(0x776)][_0x2481c4(0x554)](_0x2481c4(0x940)); _0x33cff2[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0xb82e77), _0x164348['addEventListener'](_0x2481c4(0x3bf), _0xb82e77), _0x4c565b[_0x2481c4(0x582)]('click', () => { const _0xc1fe7 = _0x2481c4; _0xc1fe7(0x9e3) === _0xc1fe7(0x888) ? (_0x12da31[_0xc1fe7(0x8d9)](_0xc1fe7(0xc27), _0x54fee7), _0x4de3f6 && (_0x3524a6[_0xc1fe7(0x80c)][_0xc1fe7(0x4b2)] = '')) : (_0xb82e77(), _0x1439b1()); }), _0x9abd70[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x6ff264 = _0x2481c4; _0x6ff264(0x351) !== 'MSfFN' ? (_0xb82e77(), _0x1d4831()) : _0x4ea454(_0x6ff264(0x72e) + _0x16c49b['message']); }), _0x1d1a08['addEventListener']('click', () => { const _0x4828fc = _0x2481c4; _0x4828fc(0x837) !== 'liOKv' ? (_0x2a23dd = _0x4828fc(0x8ab), _0x201fe3 = _0x4828fc(0x33a) + _0x217ea5 + _0x4828fc(0x553)) : (_0x1922fc(_0x4828fc(0x83e), 'groupChatCreate'), _0x42aebf(![])); }), _0x1cf8f3[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x3eeb8f), _0x220b5a[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x1c5824 = _0x2481c4; _0x23099c[_0x1c5824(0x776)]['toggle'](_0x1c5824(0x940)), _0x23099c['classList'][_0x1c5824(0x999)](_0x1c5824(0x940)) && (_0x5ea706[_0x1c5824(0xa7b)] = _0x5ea706[_0x1c5824(0x2ea)]); }), _0x2f962c[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x4a19c2[_0x2481c4(0x3bf)]()); const _0x4c3528 = document[_0x2481c4(0x463)](_0x2481c4(0x51f)); _0x4a19c2[_0x2481c4(0x582)](_0x2481c4(0x236), _0x39692), _0x4c3528[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x52ef30), _0x360a89[_0x2481c4(0x582)]('click', _0x19ee5c), _0x1610e8[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x58bf7e), _0x56fed[_0x2481c4(0x582)]('click', _0x12841b), _0xb0945[_0x2481c4(0x582)]('click', _0x59b5ce), _0x42c553['addEventListener'](_0x2481c4(0x3bf), async () => { const _0x5c85b2 = _0x2481c4; if ('Kzfhg' === _0x5c85b2(0x5fb)) return _0x35a0cb[_0x5c85b2(0xab8)][_0x5c85b2(0x3be)](_0x126c1b => _0x126c1b['id'] === _0xe4ebd1[_0x5c85b2(0x1e1)]); else { const _0x3e390c = _0xaf7d6b['value']; if (!_0x3e390c) return; const _0x47e427 = _0x543c76(_0x3e390c); if (!_0x47e427) return; const _0x583d89 = await _0x1ec207(_0x5c85b2(0x8e1) + _0x47e427[_0x5c85b2(0x3b3)] + '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。'); _0x583d89 && (_0x5aefba(_0x3e390c), _0x24537c(_0x5c85b2(0x571) + _0x47e427[_0x5c85b2(0x3b3)] + '”已删除。'), _0x1922fc(_0x5c85b2(0x83e), _0x5c85b2(0xaa5)), _0x42aebf(![])); } }), _0x4b7ddc[_0x2481c4(0x582)](_0x2481c4(0xb75), () => { const _0x4bf38f = _0x2481c4, _0x2aa77b = _0x4b7ddc[_0x4bf38f(0x202)][_0x4bf38f(0x1e9)]()[_0x4bf38f(0xa1c)](_0x596c9f); _0xbecd1d[_0x4bf38f(0xa7f)] = _0x2aa77b; }); async function _0x2765ac() { const _0x42921b = _0x2481c4; if (_0x42921b(0x57d) !== _0x42921b(0x69c)) { const _0xa79d09 = _0x4b7ddc[_0x42921b(0x202)][_0x42921b(0x1e9)](), _0x2e5ee1 = _0x4529a5['value'][_0x42921b(0x1e9)](); if (!_0xa79d09 || !_0x2e5ee1) { _0x24537c(_0x42921b(0x6af)); return; } const _0x3daee8 = _0xa79d09['replace'](/\/+$/, ''), _0x2c6382 = _0x3daee8 + _0x42921b(0x4be); _0xbecd1d[_0x42921b(0xa7f)] = !![], _0xbecd1d['textContent'] = '获取中…', _0x4d41e3[_0x42921b(0x776)][_0x42921b(0x554)](_0x42921b(0x940)); try { const _0x5e9060 = await fetch(_0x2c6382, { 'headers': { 'Authorization': _0x42921b(0x29b) + _0x3161ac(_0x2e5ee1) } }); if (!_0x5e9060['ok']) throw new Error(_0x42921b(0x459) + _0x5e9060[_0x42921b(0x456)]); const _0x39e6f6 = await _0x5e9060[_0x42921b(0x8a5)](), _0x2c7e0e = (_0x39e6f6[_0x42921b(0xa41)] || _0x39e6f6)[_0x42921b(0x575)](_0x1ea5d3 => _0x1ea5d3['id'])['sort'](); if (_0x2c7e0e['length'] > 0x0) _0x4d41e3['innerHTML'] = '', _0x2c7e0e[_0x42921b(0xbe4)](_0xf23394 => { const _0x3ea1fc = _0x42921b; if (_0x3ea1fc(0x973) === _0x3ea1fc(0x973)) { const _0x50838f = document[_0x3ea1fc(0x58b)](_0x3ea1fc(0xbdf)); _0x50838f[_0x3ea1fc(0x356)] = _0xf23394, _0x50838f['addEventListener'](_0x3ea1fc(0x3bf), () => { const _0x4560de = _0x3ea1fc; if ('abmRA' === _0x4560de(0x631)) return new _0x41efd9(_0x27c9b5 => { const _0x396b25 = _0x4560de, _0x270285 = _0x4f9de3[_0x396b25(0x463)]('modal-root'), _0x1be9fe = _0x1f551[_0x396b25(0x463)](_0x396b25(0x709)), _0x5adbd9 = _0xf7ad46[_0x396b25(0x463)](_0x396b25(0x93c)), _0x58a7fb = _0xad1683[_0x396b25(0x463)](_0x396b25(0x365)), _0x5dc56b = _0x596fae['getElementById'](_0x396b25(0x704)); _0x1be9fe[_0x396b25(0x356)] = _0x120f97, _0x270285[_0x396b25(0x80c)][_0x396b25(0x6df)] = _0x396b25(0x1df); const _0x47184a = _0x500ed8 => { const _0x438db7 = _0x396b25; _0x270285[_0x438db7(0x80c)][_0x438db7(0x6df)] = _0x438db7(0x333), _0x5adbd9['onclick'] = _0x58a7fb[_0x438db7(0x752)] = _0x5dc56b[_0x438db7(0x752)] = null, _0x28d1e6[_0x438db7(0x4bf)](_0x438db7(0x3ff), _0x3a5a7c), _0x27c9b5(_0x500ed8); }, _0x3a5a7c = _0x26de80 => { const _0xec50e9 = _0x396b25; if (_0x26de80[_0xec50e9(0x54e)] === _0xec50e9(0x35f)) _0x47184a(![]); if (_0x26de80[_0xec50e9(0x54e)] === _0xec50e9(0xaff)) _0x47184a(!![]); }; _0x5adbd9[_0x396b25(0x752)] = () => _0x47184a(!![]), _0x58a7fb[_0x396b25(0x752)] = () => _0x47184a(![]), _0x5dc56b[_0x396b25(0x752)] = () => _0x47184a(![]), _0x68b151[_0x396b25(0x582)](_0x396b25(0x3ff), _0x3a5a7c); }); else _0x469a0f[_0x4560de(0x202)] = _0xf23394, _0x4d41e3[_0x4560de(0x776)][_0x4560de(0x554)]('show'); }), _0x4d41e3['appendChild'](_0x50838f); } else { _0x205ac6(_0x3ea1fc(0xa55)); return; } }), _0x4d41e3[_0x42921b(0x776)][_0x42921b(0xb2c)](_0x42921b(0x940)), _0x24537c(_0x42921b(0xaa4) + _0x2c7e0e['length'] + _0x42921b(0x814)); else { if (_0x42921b(0x99f) !== _0x42921b(0x99f)) { if (_0x4ba8f2?.[_0x42921b(0xc02)] === _0x42921b(0x963)) _0x3f9d47 = _0x4fc28a(_0x50ddd1[_0x42921b(0x3d4)][0x0]); else _0x530118?.[_0x42921b(0xc02)] === _0x42921b(0x74a) && _0x3cf036 && (_0x42db2f = _0x172bf5(_0x4a4a64)); _0x5c0b97 = _0x47d76a?.[_0x42921b(0x6b6)] || _0x29ab9c, _0x3aa304 = _0x2394e8?.[_0x42921b(0x917)] || ''; } else _0x24537c(_0x42921b(0x93f)); } } catch (_0x333d76) { _0x24537c(_0x42921b(0x5d5) + _0x333d76[_0x42921b(0x9fa)] + _0x42921b(0x6a1)); } finally { _0xbecd1d[_0x42921b(0xa7f)] = ![], _0xbecd1d['textContent'] = '获取'; } } else { const _0x4da5ee = _0x143f94[_0x42921b(0x58b)]('li'); _0x4da5ee[_0x42921b(0x781)] = _0x42921b(0xa2a), _0x4da5ee[_0x42921b(0xb00)] = _0x42921b(0x4b1) + _0x4290e6['id'] + _0x42921b(0x2e7) + _0x13e548['id'] + _0x42921b(0x3d2) + (_0x54ba81['avatar'] || _0x1fce2b) + _0x42921b(0x737) + _0x421079['id'] + '\x22\x20class=\x22char-name\x22>' + _0x92d126[_0x42921b(0x3b3)] + _0x42921b(0xaa2), _0x4d9a79[_0x42921b(0xa59)](_0x4da5ee); } } _0xbecd1d['addEventListener'](_0x2481c4(0x3bf), _0x66c195 => { const _0x39203a = _0x2481c4; if (_0x39203a(0x942) === _0x39203a(0x355)) { _0x997e4b(_0x39203a(0x70a)); return; } else _0x66c195[_0x39203a(0x377)](), _0x2765ac(); }), document[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x5daa03 => { const _0xb030b2 = _0x2481c4; 'JqlPB' === _0xb030b2(0x964) ? !_0x4d41e3['contains'](_0x5daa03[_0xb030b2(0x606)]) && _0x5daa03[_0xb030b2(0x606)] !== _0x469a0f && _0x5daa03[_0xb030b2(0x606)] !== _0xbecd1d && (_0xb030b2(0x86e) === _0xb030b2(0x5ab) ? _0x49f064[_0xb030b2(0xa0c)][_0xb030b2(0x1e6)]({ 'senderId': _0x28e754['id'], 'kind': _0xb030b2(0xa1d), 'songName': _0x3012db[_0xb030b2(0x48c)], 'artist': _0x20266f[_0xb030b2(0x2d1)] }) : _0x4d41e3[_0xb030b2(0x776)]['remove'](_0xb030b2(0x940))) : _0x56458d['error'](_0xb030b2(0xc3a), _0x15bfe0); }); async function _0x4662c8(_0x5b578a) { return await _0x1f84b9(_0x5b578a, 0x190, 0.85); } _0x5d06de[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1db3b7[_0x2481c4(0x3bf)]()), _0x1db3b7['addEventListener']('change', async _0x2cf489 => { const _0x2a4c9e = _0x2481c4, _0x14f0fc = _0x2cf489[_0x2a4c9e(0x606)][_0x2a4c9e(0x4b6)][0x0]; if (!_0x14f0fc) return; try { const _0x347799 = await _0x4662c8(_0x14f0fc), _0x374dd3 = document['getElementById'](_0x2a4c9e(0x4af)); _0x374dd3['style'][_0x2a4c9e(0x4b2)] = _0x2a4c9e(0x205) + _0x347799 + '\x27)', _0x374dd3[_0x2a4c9e(0x607)][_0x2a4c9e(0x4f8)] = _0x347799; } catch (_0x758ecc) { 'XNqEM' === _0x2a4c9e(0x6be) ? _0x24537c(_0x2a4c9e(0x72e) + _0x758ecc[_0x2a4c9e(0x9fa)]) : _0x515770 = _0x2a4c9e(0x4dd) + _0x588633; } }), _0x9b361e[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x48dc6b[_0x2481c4(0x3bf)]()), _0x48dc6b['addEventListener'](_0x2481c4(0x236), async _0xca4f3c => { const _0x2688b7 = _0x2481c4, _0x2bce35 = _0xca4f3c[_0x2688b7(0x606)][_0x2688b7(0x4b6)][0x0]; if (!_0x2bce35) return; try { _0x2688b7(0xa82) !== _0x2688b7(0x8fc) ? _0x9b361e[_0x2688b7(0xb01)] = await _0x4662c8(_0x2bce35) : (_0x248b12[_0x2688b7(0xa59)](_0x4ee55f), _0x1d8a00[_0x2688b7(0xa59)](_0x4c2a36)); } catch (_0x2e5e8c) { if ('XIRCu' === _0x2688b7(0x51d)) { _0x1a5bf8['error'](_0x2688b7(0x688)); return; } else _0x24537c(_0x2688b7(0x72e) + _0x2e5e8c[_0x2688b7(0x9fa)]); } }); function _0x3017f5() { const _0x2f0901 = _0x2481c4; if (_0x2f0901(0x9c5) === _0x2f0901(0x9c5)) _0x23099c[_0x2f0901(0xb00)] = '', _0x47fa25[_0x2f0901(0xbe4)](_0xcd01d1 => { const _0x5781e9 = _0x2f0901; if (_0x5781e9(0x75e) === 'BhwdQ') { const _0x16ecc0 = document[_0x5781e9(0x58b)](_0x5781e9(0x938)); _0x16ecc0['src'] = _0xcd01d1[_0x5781e9(0xb0d)], _0x16ecc0[_0x5781e9(0xb64)] = _0x5781e9(0x396), _0x16ecc0[_0x5781e9(0x879)] = _0xcd01d1[_0x5781e9(0x3b3)], _0x16ecc0[_0x5781e9(0x776)][_0x5781e9(0xb2c)]('sticker-item'), _0x16ecc0['addEventListener']('click', () => _0x5b1cd3(_0xcd01d1)), _0x23099c[_0x5781e9(0xa59)](_0x16ecc0); } else { const _0x34ec6b = _0x53e52f[_0x5781e9(0xb2b)][_0x5781e9(0x575)](_0x57364f => _0x1a5136[_0x5781e9(0x7ad)][_0x5781e9(0x3be)](_0x54191e => _0x54191e['id'] === _0x57364f))[_0x5781e9(0x216)](_0x27a8cd)[_0x5781e9(0x575)](_0x2e6dd7 => _0x5781e9(0x60e) + _0x2e6dd7[_0x5781e9(0x3b3)] + '\x0a' + _0x2e6dd7[_0x5781e9(0x67c)])['join'](''); if (_0x34ec6b) _0x5c97c2 = _0x5781e9(0x25c) + _0x34ec6b; } }); else { if (_0x51c7a3) { const _0x376ce0 = _0x34861a[_0x2f0901(0x51e)](_0x2f91ad); _0x3beb18[_0x2f0901(0xb01)] = _0x376ce0, _0x48fae6[_0x2f0901(0x79e)] = () => _0x52179c[_0x2f0901(0x768)](_0x376ce0); } } } async function _0x124ab0(_0x5703ec) { const _0x408551 = _0x2481c4; if (_0x408551(0x53c) === 'dMSdK') _0x34181e[_0x408551(0x282)] = _0x200290, _0x38f4ff[_0x408551(0x5a5)] = _0x454970, _0x2575c7[_0x408551(0x32f)] = ![], _0x206be3(); else { const _0x5ba4e5 = await _0x1ec207(_0x408551(0x7fd)); if (!_0x5ba4e5) return; const _0x18efad = _0x5f0a6c[_0x408551(0x3dc)][_0x408551(0x461)](_0x551560 => _0x551560['id'] === _0x5703ec); _0x18efad > -0x1 && (_0x408551(0x9f2) !== _0x408551(0x937) ? (_0x5f0a6c['calendarEvents']['splice'](_0x18efad, 0x1), _0x5c772f(), _0x3ffe65(), _0x486e7d(), _0x9108c9(), _0x24537c(_0x408551(0x533))) : _0x44f7e8['textContent'] = _0x2b84ba[_0x408551(0x3b3)] || _0x408551(0x713) + _0x42f5f1[_0x408551(0x3d4)][_0x408551(0x55b)] + ')'); } } let _0x28fdfc = null; function _0x5c2137(_0x18aa18) { const _0x281400 = _0x2481c4; if (_0x28fdfc) clearTimeout(_0x28fdfc); const _0x28183c = _0x18aa18['target']['closest'](_0x281400(0x95a)); if (!_0x28183c) return; const _0x3ec478 = _0x28183c[_0x281400(0x607)]['id']; if (!_0x3ec478) return; const _0x2f3b38 = () => { const _0x241f36 = _0x281400; _0x241f36(0x8df) === _0x241f36(0x8df) ? _0x28fdfc = setTimeout(() => { const _0x16a3d3 = _0x241f36; if (_0x18aa18[_0x16a3d3(0xc02)] === _0x16a3d3(0x8f8)) _0x18aa18[_0x16a3d3(0x422)](); _0x124ab0(_0x3ec478); }, 0x320) : _0x40394e['toBlob'](_0x203576 => { const _0x34b1d1 = _0x241f36; _0x203576 ? _0x4e238b(_0x203576) : _0x5c050b(new _0xcf6fb(_0x34b1d1(0x26e))); }, _0x2d4459, _0x7395c9); }, _0x42f645 = () => { if (_0x28fdfc) clearTimeout(_0x28fdfc); }; document['addEventListener']('mouseup', _0x42f645, { 'once': !![] }), document[_0x281400(0x582)]('touchend', _0x42f645, { 'once': !![] }), document[_0x281400(0x582)](_0x281400(0x228), _0x42f645, { 'once': !![] }), document[_0x281400(0x582)]('touchmove', _0x42f645, { 'once': !![] }), _0x2f3b38(); } function _0x4e67bb(_0x130f0b) { const _0x371b33 = _0x2481c4, _0x671881 = _0x5f0a6c[_0x371b33(0xab8)][_0x371b33(0x3be)](_0x92ea2f => _0x92ea2f[_0x371b33(0x3d4)]['includes'](_0x130f0b)); if (!_0x671881) return ''; const _0x1a2330 = _0x1f5ce5(_0x671881['id']), _0x39d66d = _0x5f0a6c[_0x371b33(0x3dc)][_0x371b33(0x216)](_0xda4a9 => _0xda4a9[_0x371b33(0x6ea)] === _0x1a2330['id'] || !_0xda4a9[_0x371b33(0x6ea)]); if (_0x39d66d[_0x371b33(0x55b)] === 0x0) return ''; const _0x17c9d4 = _0x39d66d[_0x371b33(0x575)](_0x11c986 => { const _0x2eaec1 = _0x371b33, _0x1e2447 = _0x11c986[_0x2eaec1(0xc02)] === 'important' ? _0x2eaec1(0x34e) : '待办'; return '-\x20[' + _0x1e2447 + ']\x20' + _0x11c986[_0x2eaec1(0x4d0)] + ':\x20' + _0x11c986[_0x2eaec1(0x67c)]; })[_0x371b33(0x3b9)]('\x0a'); return _0x371b33(0x945) + _0x1a2330[_0x371b33(0x3b3)] + _0x371b33(0x1de) + _0x17c9d4; } let _0x590584 = { 'currentDate': new Date(), 'selectedDate': _0x9862f5() }; function _0x34a046() { const _0xfb1ef6 = _0x2481c4; document['getElementById'](_0xfb1ef6(0x25f))[_0xfb1ef6(0x582)](_0xfb1ef6(0x3bf), () => { const _0x2957c6 = _0xfb1ef6; _0x3ffe65(), _0x1922fc('calendar', _0x2957c6(0x28c)); }), document['getElementById'](_0xfb1ef6(0xaef))[_0xfb1ef6(0x582)]('click', () => _0x1922fc(_0xfb1ef6(0x28c), _0xfb1ef6(0x8d0))), document[_0xfb1ef6(0x463)](_0xfb1ef6(0x25e))['addEventListener']('click', () => { const _0x2549d5 = _0xfb1ef6; _0x590584['currentDate'][_0x2549d5(0x7cc)](_0x590584['currentDate'][_0x2549d5(0x567)]() - 0x1), _0x3ffe65(); }), document[_0xfb1ef6(0x463)](_0xfb1ef6(0xb42))['addEventListener'](_0xfb1ef6(0x3bf), () => { const _0x2ac895 = _0xfb1ef6; _0x590584[_0x2ac895(0x8e0)][_0x2ac895(0x7cc)](_0x590584[_0x2ac895(0x8e0)][_0x2ac895(0x567)]() + 0x1), _0x3ffe65(); }), document[_0xfb1ef6(0x463)]('today-btn')['addEventListener'](_0xfb1ef6(0x3bf), () => { const _0x5174ea = _0xfb1ef6; _0x590584[_0x5174ea(0x8e0)] = new Date(), _0x590584[_0x5174ea(0x94d)] = _0x9862f5(), _0x3ffe65(); }), document['getElementById']('add-event-fab')[_0xfb1ef6(0x582)]('click', () => { _0x69488(_0x590584['selectedDate']); }), document[_0xfb1ef6(0x463)](_0xfb1ef6(0xbe5))[_0xfb1ef6(0x582)](_0xfb1ef6(0x3bf), _0x34a881), document[_0xfb1ef6(0x463)](_0xfb1ef6(0x3cb))['addEventListener'](_0xfb1ef6(0x3bf), () => document[_0xfb1ef6(0x463)](_0xfb1ef6(0x5a6))[_0xfb1ef6(0x776)][_0xfb1ef6(0x554)](_0xfb1ef6(0x940))), document[_0xfb1ef6(0x463)](_0xfb1ef6(0x6e0))[_0xfb1ef6(0x582)]('click', () => document['getElementById'](_0xfb1ef6(0x5a6))[_0xfb1ef6(0x776)][_0xfb1ef6(0x554)]('show')); const _0x1a27d8 = document['getElementById'](_0xfb1ef6(0x462)); _0x1a27d8[_0xfb1ef6(0x582)](_0xfb1ef6(0xb16), _0x5c2137), _0x1a27d8[_0xfb1ef6(0x582)](_0xfb1ef6(0x8f8), _0x5c2137, { 'passive': ![] }); } function _0x3ffe65() { const _0x14d122 = _0x2481c4, _0x43c621 = _0x590584[_0x14d122(0x8e0)][_0x14d122(0x25d)](), _0x39e9b4 = _0x590584[_0x14d122(0x8e0)][_0x14d122(0x567)](); document['getElementById']('calendar-header-title')[_0x14d122(0x356)] = _0x43c621 + '年\x20' + (_0x39e9b4 + 0x1) + '月', _0x55990c(_0x43c621, _0x39e9b4), _0x647a81(_0x590584[_0x14d122(0x94d)]); } function _0x9108c9() { const _0x3c0dd0 = _0x2481c4; if (_0x3c0dd0(0x663) !== _0x3c0dd0(0x854)) { const _0x472616 = document[_0x3c0dd0(0x463)](_0x3c0dd0(0xb5b)); if (!_0x472616) return; const _0x2054d3 = _0x9862f5(), _0x3e54d7 = _0x5f0a6c[_0x3c0dd0(0x3dc)][_0x3c0dd0(0x216)](_0x4395fa => _0x4395fa['date'] === _0x2054d3 && _0x4395fa[_0x3c0dd0(0xc02)] === _0x3c0dd0(0x57c)); _0x472616['innerHTML'] = ''; if (_0x3e54d7[_0x3c0dd0(0x55b)] > 0x0) { if (_0x3c0dd0(0x65e) === 'AMcgX') _0x3e54d7['forEach'](_0x4dab7e => { const _0x52da8e = _0x3c0dd0, _0xa28edf = document[_0x52da8e(0x58b)]('div'); _0xa28edf[_0x52da8e(0x781)] = _0x52da8e(0xa00), _0xa28edf[_0x52da8e(0x356)] = _0x4dab7e[_0x52da8e(0x67c)], _0x472616['appendChild'](_0xa28edf); }); else { _0x177092(_0x3c0dd0(0x770)); return; } } else { if (_0x3c0dd0(0x67e) === 'RSoRK') _0x472616[_0x3c0dd0(0xb00)] = _0x3c0dd0(0xac7); else { if (_0x57fc5e) _0x346650(_0x51fe44); _0xa7fc14 = null, _0x30a925[_0x3c0dd0(0x591)] = [], _0x107c9e[_0x3c0dd0(0x5c3)] = null, _0x32b26a[_0x3c0dd0(0x463)](_0x3c0dd0(0x8bd))[_0x3c0dd0(0x80c)][_0x3c0dd0(0x6df)] = _0x3c0dd0(0x333), _0x1b2f6b[_0x3c0dd0(0x1e1)] = null, _0x187de5(), _0x20c01e(_0x3c0dd0(0x21d), 'meetingView'); } } } else _0x501af0[_0x3c0dd0(0x80c)][_0x3c0dd0(0x4b2)] = 'url(\x27' + _0x530961['createObjectURL'](_0x317ba9) + '\x27)', _0x45e060['style'][_0x3c0dd0(0x4b0)] = _0x3c0dd0(0xa53), _0x2ce518[_0x3c0dd0(0x80c)][_0x3c0dd0(0x6f9)] = 'center'; } function _0x55990c(_0x25b421, _0xb31aef) { const _0x5a2f5c = _0x2481c4; if (_0x5a2f5c(0x44f) === _0x5a2f5c(0x44f)) { const _0xcc2c52 = document[_0x5a2f5c(0x463)]('calendar-grid'); _0xcc2c52[_0x5a2f5c(0xb00)] = ''; const _0x4f568b = new Date(_0x25b421, _0xb31aef, 0x1)[_0x5a2f5c(0x2c2)](), _0xf2e3ad = new Date(_0x25b421, _0xb31aef + 0x1, 0x0)[_0x5a2f5c(0x60d)](), _0x125ee6 = _0x9862f5(); for (let _0x208904 = 0x0; _0x208904 < _0x4f568b; _0x208904++) { _0xcc2c52['appendChild'](document[_0x5a2f5c(0x58b)]('div')); } for (let _0x524804 = 0x1; _0x524804 <= _0xf2e3ad; _0x524804++) { if ('XXYgL' !== _0x5a2f5c(0xc20)) { const _0x28d2cd = document[_0x5a2f5c(0x58b)](_0x5a2f5c(0xbdf)); _0x28d2cd[_0x5a2f5c(0x781)] = _0x5a2f5c(0x729); const _0x39739f = _0x25b421 + '-' + String(_0xb31aef + 0x1)[_0x5a2f5c(0x690)](0x2, '0') + '-' + String(_0x524804)[_0x5a2f5c(0x690)](0x2, '0'); if (_0x39739f === _0x125ee6) _0x28d2cd[_0x5a2f5c(0x776)][_0x5a2f5c(0xb2c)](_0x5a2f5c(0xad3)); if (_0x39739f === _0x590584['selectedDate']) _0x28d2cd[_0x5a2f5c(0x776)][_0x5a2f5c(0xb2c)]('is-selected'); const _0x510df2 = document[_0x5a2f5c(0x58b)](_0x5a2f5c(0x310)); _0x510df2[_0x5a2f5c(0x781)] = _0x5a2f5c(0x77d), _0x510df2[_0x5a2f5c(0x356)] = _0x524804, _0x28d2cd[_0x5a2f5c(0xa59)](_0x510df2); const _0x1e549b = _0x5f0a6c[_0x5a2f5c(0x3dc)][_0x5a2f5c(0x216)](_0x4b4cde => _0x4b4cde[_0x5a2f5c(0x4d0)] === _0x39739f); if (_0x1e549b['length'] > 0x0) { if (_0x5a2f5c(0x4ff) !== _0x5a2f5c(0x4ff)) _0x2b7311[_0x5a2f5c(0xb00)] = _0x5a2f5c(0xb62), _0xa20bc3[_0x5a2f5c(0x463)]('organize-bill-button')[_0x5a2f5c(0x582)](_0x5a2f5c(0x3bf), _0x2d2b1c); else { const _0x12b99d = document['createElement'](_0x5a2f5c(0xbdf)); _0x12b99d[_0x5a2f5c(0x781)] = _0x5a2f5c(0xb79), _0x28d2cd[_0x5a2f5c(0xa59)](_0x12b99d); } } _0x28d2cd[_0x5a2f5c(0x582)](_0x5a2f5c(0x3bf), () => { const _0x5ba538 = _0x5a2f5c; _0x590584[_0x5ba538(0x94d)] = _0x39739f, _0x3ffe65(); }), _0xcc2c52[_0x5a2f5c(0xa59)](_0x28d2cd); } else _0x39c174['push'](_0x1bf46b); } } else { const _0x705f40 = (_0x45094f - _0x2f6ad3) / (0x3e8 * 0x3c); _0x365c98 += _0x5a2f5c(0xb9c); } } function _0x647a81(_0x2e15fc) { const _0x5f3cf5 = _0x2481c4, _0x4edff1 = document['getElementById'](_0x5f3cf5(0x462)), _0x46c617 = document[_0x5f3cf5(0x463)](_0x5f3cf5(0x7cf)); _0x4edff1['innerHTML'] = ''; const _0xc17249 = new Date(_0x2e15fc + _0x5f3cf5(0xa4b)); _0x46c617[_0x5f3cf5(0x356)] = _0xc17249['getMonth']() + 0x1 + '月' + _0xc17249['getDate']() + '日'; const _0x1fa1aa = _0x5f0a6c[_0x5f3cf5(0x3dc)][_0x5f3cf5(0x216)](_0x339a31 => _0x339a31['date'] === _0x2e15fc); if (_0x1fa1aa['length'] === 0x0) { if (_0x5f3cf5(0x6d7) !== 'uJbtI') _0x33049d(_0x10739f['id']), _0xf10855(_0x5f3cf5(0x49f)), _0x39dd78('chat'), _0x551317(![]); else { _0x4edff1['innerHTML'] = _0x5f3cf5(0x927); return; } } _0x1fa1aa['forEach'](_0x10f79d => { const _0x3dfe1f = _0x5f3cf5, _0x360fe0 = document[_0x3dfe1f(0x58b)]('div'); _0x360fe0[_0x3dfe1f(0x781)] = _0x10f79d['type'] === _0x3dfe1f(0x324) ? _0x3dfe1f(0x914) : 'todo-item', _0x360fe0[_0x3dfe1f(0x356)] = _0x10f79d['content'], _0x360fe0[_0x3dfe1f(0x607)]['id'] = _0x10f79d['id'], _0x4edff1['appendChild'](_0x360fe0); }); } function _0x69488(_0xfea7ff) { const _0x4f58a5 = _0x2481c4; document['getElementById']('add-event-modal-title')[_0x4f58a5(0x356)] = '为\x20' + _0xfea7ff + _0x4f58a5(0x57a), document[_0x4f58a5(0x463)](_0x4f58a5(0x71c))[_0x4f58a5(0x202)] = '', document[_0x4f58a5(0x463)](_0x4f58a5(0x67b))['checked'] = !![], document[_0x4f58a5(0x463)](_0x4f58a5(0x5a6))['classList'][_0x4f58a5(0xb2c)]('show'), document[_0x4f58a5(0x463)]('event-content-input')['focus'](); } function _0x34a881() { const _0x545810 = _0x2481c4, _0x28c44e = document['getElementById'](_0x545810(0x71c))['value'][_0x545810(0x1e9)](), _0x4c46d3 = document[_0x545810(0x7dd)](_0x545810(0x588))[_0x545810(0x202)]; if (!_0x28c44e) { _0x24537c(_0x545810(0x983)); return; } const _0x54a232 = _0x5f0a6c[_0x545810(0x7ae)][_0x545810(0x3be)](_0x3d316c => _0x3d316c['id'] === _0x5f0a6c[_0x545810(0xbb5)]); if (!_0x54a232) { _0x24537c(_0x545810(0xa22)); return; } _0x5f0a6c[_0x545810(0x3dc)]['push']({ 'id': _0x545810(0x5e1) + Date[_0x545810(0xb71)](), 'date': _0x590584[_0x545810(0x94d)], 'type': _0x4c46d3, 'content': _0x28c44e, 'userId': _0x54a232['id'] }), _0x5c772f(), _0x3ffe65(), _0x486e7d(), _0x9108c9(), document[_0x545810(0x463)]('add-event-modal')[_0x545810(0x776)][_0x545810(0x554)](_0x545810(0x940)); } function _0x486e7d() { const _0x2700ee = _0x2481c4; if (_0x2700ee(0xa5a) !== _0x2700ee(0xa5a)) { _0x16eb9a(_0x2700ee(0xb1d)); return; } else { const _0x5cf5da = document[_0x2700ee(0x463)](_0x2700ee(0x79a)), _0x102eed = document[_0x2700ee(0x463)]('countdown-timer'), _0x43cf08 = new Date(); _0x43cf08[_0x2700ee(0x951)](0x0, 0x0, 0x0, 0x0); const _0x51346a = _0x5f0a6c['calendarEvents'][_0x2700ee(0x216)](_0x4c97aa => _0x4c97aa[_0x2700ee(0xc02)] === 'important' && new Date(_0x4c97aa['date'] + _0x2700ee(0xa4b)) >= _0x43cf08)['sort']((_0x4fe634, _0xa29754) => new Date(_0x4fe634['date']) - new Date(_0xa29754['date'])); if (_0x51346a[_0x2700ee(0x55b)] > 0x0) { const _0x3094b5 = _0x51346a[0x0], _0x37a7a1 = new Date(_0x3094b5[_0x2700ee(0x4d0)] + 'T00:00:00'), _0x398c24 = _0x37a7a1 - _0x43cf08, _0x429d11 = Math[_0x2700ee(0xb45)](_0x398c24 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5cf5da['textContent'] = '距离「' + _0x3094b5[_0x2700ee(0x67c)] + '」', _0x102eed[_0x2700ee(0xb00)] = '<span>' + _0x429d11 + _0x2700ee(0xad2); } else _0x5cf5da[_0x2700ee(0x356)] = _0x2700ee(0x9fc), _0x102eed[_0x2700ee(0xb00)] = _0x2700ee(0x27b); } } function _0x46055f() { const _0x5a0c4d = _0x2481c4, _0x4ed39c = document[_0x5a0c4d(0x463)](_0x5a0c4d(0x272)); _0x4ed39c[_0x5a0c4d(0xb00)] = ''; if (_0x5f0a6c[_0x5a0c4d(0x7ae)][_0x5a0c4d(0x55b)] === 0x0) { if (_0x5a0c4d(0x56a) === 'tmiJK') { _0x4ed39c[_0x5a0c4d(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>'; return; } else { const _0x4d1760 = _0x35f8dd[_0x5a0c4d(0xbad)](_0xcadf87); _0x48efbe = _0x3fb8e1[_0x5a0c4d(0x38f)](_0x4d1760), _0x17e26f[_0x5a0c4d(0x5b1)](_0x5a0c4d(0x2f9)); } } _0x5f0a6c[_0x5a0c4d(0x7ae)][_0x5a0c4d(0xbe4)](_0x19548c => { const _0x3e9d20 = _0x5a0c4d, _0x8f3273 = document['createElement']('div'); _0x8f3273[_0x3e9d20(0x781)] = _0x3e9d20(0x87f), _0x8f3273[_0x3e9d20(0x607)]['id'] = _0x19548c['id']; const _0x5ded1 = _0x19548c['id'] === _0x5f0a6c['activeUserProfileId'] ? _0x3e9d20(0x69b) : ''; _0x8f3273[_0x3e9d20(0xb00)] = _0x3e9d20(0x80a) + (_0x19548c[_0x3e9d20(0x6b6)] || _0x6ca07b) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x19548c['name'] + _0x5ded1 + _0x3e9d20(0x43d) + _0x19548c[_0x3e9d20(0x91d)][_0x3e9d20(0x9ff)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x8f3273[_0x3e9d20(0x582)]('click', () => _0x2c58a9(_0x19548c['id'])), _0x4ed39c['appendChild'](_0x8f3273); }); } function _0x2c58a9(_0x3fb633 = null) { const _0x259f30 = _0x2481c4; _0x1922fc('userProfile', _0x259f30(0x211)); const _0x42efef = document[_0x259f30(0x463)](_0x259f30(0xa03)), _0x55a3d7 = document[_0x259f30(0x463)]('user-avatar-preview'); _0x55a3d7[_0x259f30(0x80c)]['backgroundImage'] = '', delete _0x55a3d7[_0x259f30(0x607)][_0x259f30(0x4f8)]; if (_0x3fb633) { if ('KibFM' !== _0x259f30(0x722)) _0x1c51a9(_0x578db2['activeMeetingCharId'], _0x2ea6c2[_0x259f30(0x7d7)]); else { const _0x3a2e45 = _0x5f0a6c[_0x259f30(0x7ae)][_0x259f30(0x3be)](_0x170762 => _0x170762['id'] === _0x3fb633); if (!_0x3a2e45) return; document[_0x259f30(0x463)]('editing-user-id')[_0x259f30(0x202)] = _0x3a2e45['id'], document[_0x259f30(0x463)]('user-profile-edit-title')[_0x259f30(0x356)] = _0x259f30(0x2cf), document[_0x259f30(0x463)](_0x259f30(0x569))['value'] = _0x3a2e45[_0x259f30(0x3b3)], _0x3a2e45[_0x259f30(0x6b6)] ? _0x259f30(0x95e) === 'vfpnC' ? _0x4c4e39 ? _0x31d151['classList'][_0x259f30(0xb2c)](_0x259f30(0x846)) : _0x3609b6[_0x259f30(0x776)][_0x259f30(0x554)]('show-chat-view') : _0x55a3d7[_0x259f30(0x80c)][_0x259f30(0x4b2)] = _0x259f30(0x205) + _0x3a2e45[_0x259f30(0x6b6)] + '\x27)' : _0x259f30(0x6cd) === 'VPuUX' ? _0x55a3d7[_0x259f30(0x80c)][_0x259f30(0x4b2)] = _0x259f30(0x205) + _0x6ca07b + '\x27)' : _0x3a8627[_0x259f30(0x80c)][_0x259f30(0x4b2)] = '', document[_0x259f30(0x463)](_0x259f30(0x9ae))['value'] = _0x3a2e45['persona'], _0x42efef['style']['display'] = _0x3a2e45['id'] === _0x5f0a6c[_0x259f30(0xbb5)] ? _0x259f30(0x333) : _0x259f30(0x629), document[_0x259f30(0x463)](_0x259f30(0x6e2))[_0x259f30(0x80c)][_0x259f30(0x6df)] = _0x259f30(0x629); } } else document[_0x259f30(0x463)](_0x259f30(0x309))[_0x259f30(0x202)] = '', document[_0x259f30(0x463)](_0x259f30(0x469))[_0x259f30(0x356)] = _0x259f30(0xb1c), document[_0x259f30(0x463)](_0x259f30(0x569))[_0x259f30(0x202)] = _0x259f30(0x5a4) + (_0x5f0a6c[_0x259f30(0x7ae)]['length'] + 0x1), _0x55a3d7[_0x259f30(0x80c)][_0x259f30(0x4b2)] = 'url(\x27' + _0x6ca07b + '\x27)', document[_0x259f30(0x463)](_0x259f30(0x9ae))['value'] = '', _0x42efef['style'][_0x259f30(0x6df)] = _0x259f30(0x333), document[_0x259f30(0x463)](_0x259f30(0x6e2))[_0x259f30(0x80c)][_0x259f30(0x6df)] = _0x259f30(0x333); } function _0x58bf7e() { const _0x4333ff = _0x2481c4; if ('pNBhG' === 'mgZBQ') { const _0x15e0ab = { 'id': _0x4333ff(0x31b) + _0x27447f['timestamp'], 'url': _0x2b2b5f[_0x4333ff(0xa18)] }; _0x198024(this, _0x15e0ab); } else { const _0x2c93f0 = document['getElementById'](_0x4333ff(0x309))[_0x4333ff(0x202)], _0xc6a8e8 = document[_0x4333ff(0x463)](_0x4333ff(0x4af)), _0x9e9402 = { 'name': document[_0x4333ff(0x463)](_0x4333ff(0x569))[_0x4333ff(0x202)][_0x4333ff(0x1e9)](), 'persona': document[_0x4333ff(0x463)](_0x4333ff(0x9ae))[_0x4333ff(0x202)][_0x4333ff(0x1e9)](), 'avatar': _0x5f0a6c[_0x4333ff(0x7ae)]['find'](_0xb8429c => _0xb8429c['id'] === _0x2c93f0)?.[_0x4333ff(0x6b6)] || _0xc6a8e8[_0x4333ff(0x80c)][_0x4333ff(0x4b2)]['slice'](0x5, -0x2)[_0x4333ff(0x219)](/'/g, '') || _0x6ca07b }; if (_0xc6a8e8[_0x4333ff(0x607)][_0x4333ff(0x4f8)]) { if (_0x4333ff(0x358) === _0x4333ff(0x9e4)) { const _0x3a5952 = _0x287266['value'][_0x4333ff(0x1e9)](); _0x3a5952 && (_0x1b6aa7(_0x3a5952), _0x199cfb[_0x4333ff(0x202)] = '', _0x46d3a0(_0x2d7167, 0x64)); } else _0x9e9402[_0x4333ff(0x6b6)] = _0xc6a8e8[_0x4333ff(0x607)]['newAvatar'], delete _0xc6a8e8[_0x4333ff(0x607)][_0x4333ff(0x4f8)]; } if (!_0x9e9402[_0x4333ff(0x3b3)]) { if ('HPTfy' === 'bPzwH') _0x4bccb8(_0x480b28), _0x248fd9[_0x4333ff(0x4bf)]('canplaythrough', _0x4dcfec), _0x34694e[_0x4333ff(0x4bf)](_0x4333ff(0x8d9), _0x4b8eab), _0xc13b2e[_0x4333ff(0xb01)] = '', _0x56d8f1[_0x4333ff(0x554)](); else { _0x24537c(_0x4333ff(0xa55)); return; } } if (_0x2c93f0) { const _0xeb44c3 = _0x5f0a6c[_0x4333ff(0x7ae)][_0x4333ff(0x3be)](_0x582acf => _0x582acf['id'] === _0x2c93f0); if (_0xeb44c3) Object[_0x4333ff(0xac1)](_0xeb44c3, _0x9e9402); } else { const _0x524b0d = { 'id': _0x4333ff(0x8ad) + Date['now'](), ..._0x9e9402 }; _0x5f0a6c[_0x4333ff(0x7ae)]['push'](_0x524b0d), !_0x5f0a6c[_0x4333ff(0xbb5)] && ('kBnun' === 'kBnun' ? _0x5f0a6c[_0x4333ff(0xbb5)] = _0x524b0d['id'] : (_0xf2b3e3['src'] = _0x40b6a0[_0x4333ff(0x51e)](_0x483565), _0x599701[_0x4333ff(0x80c)][_0x4333ff(0x6df)] = _0x4333ff(0x629), _0x16cf88[_0x4333ff(0x80c)][_0x4333ff(0x99b)] = _0x4333ff(0x333))); } _0x5c772f(), _0x24537c(_0x4333ff(0x73b)), _0x46055f(), _0x1922fc('userProfileList', _0x4333ff(0x404)); } } async function _0x535dff() { const _0x32a3dc = _0x2481c4; if (_0x32a3dc(0x77b) !== 'nqPzr') { const _0x2a99c9 = document[_0x32a3dc(0x463)](_0x32a3dc(0x309))[_0x32a3dc(0x202)]; if (!_0x2a99c9) return; if (_0x5f0a6c[_0x32a3dc(0x7ae)][_0x32a3dc(0x55b)] <= 0x1) { if (_0x32a3dc(0x7de) !== _0x32a3dc(0x7de)) return _0x469fce[_0x32a3dc(0x8d9)](_0x32a3dc(0x5d9)), null; else { _0x24537c('至少要保留一个用户。'); return; } } const _0x30fbb9 = await _0x1ec207('确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。'); _0x30fbb9 && (_0x5f0a6c[_0x32a3dc(0x7ae)] = _0x5f0a6c[_0x32a3dc(0x7ae)][_0x32a3dc(0x216)](_0x51ff68 => _0x51ff68['id'] !== _0x2a99c9), _0x5f0a6c[_0x32a3dc(0xbb5)] === _0x2a99c9 && (_0x5f0a6c[_0x32a3dc(0xbb5)] = _0x5f0a6c[_0x32a3dc(0x7ae)][0x0]['id']), _0x5f0a6c['chats'][_0x32a3dc(0xbe4)](_0x2d6779 => { const _0x149035 = _0x32a3dc; _0x2d6779[_0x149035(0x763)] === _0x2a99c9 && (_0x2d6779[_0x149035(0x763)] = _0x5f0a6c[_0x149035(0xbb5)]); }), _0x5c772f(), _0x24537c(_0x32a3dc(0x6f3)), _0x46055f(), _0x1922fc(_0x32a3dc(0x211), _0x32a3dc(0x404))); } else _0x55d947['accountingData'][_0x32a3dc(0x1e6)](..._0x2f4f8e['originalExpenses']); } function _0x5e6a55() { const _0x26eaa3 = _0x2481c4; if (_0x26eaa3(0x8f0) !== _0x26eaa3(0x6b1)) { const _0x20ad65 = document[_0x26eaa3(0x463)](_0x26eaa3(0x23a)); _0x20ad65[_0x26eaa3(0xb00)] = ''; if (_0x5f0a6c['worldBooks'][_0x26eaa3(0x55b)] === 0x0) { _0x20ad65[_0x26eaa3(0xb00)] = _0x26eaa3(0x5da); return; } _0x5f0a6c[_0x26eaa3(0x7ad)][_0x26eaa3(0xbe4)](_0x2cdf44 => { const _0x14071c = _0x26eaa3, _0x1333ff = document[_0x14071c(0x58b)](_0x14071c(0xbdf)); _0x1333ff[_0x14071c(0x781)] = _0x14071c(0x87f), _0x1333ff['dataset']['id'] = _0x2cdf44['id'], _0x1333ff[_0x14071c(0xb00)] = _0x14071c(0xb5c) + _0x2cdf44['name'] + _0x14071c(0x534) + _0x2cdf44['content'][_0x14071c(0x9ff)](0x0, 0x64) + _0x14071c(0x24e), _0x1333ff[_0x14071c(0x582)](_0x14071c(0x3bf), () => _0x46ef23(_0x2cdf44['id'])), _0x20ad65['appendChild'](_0x1333ff); }); } else { _0x3cce6a(); return; } } function _0x46ef23(_0x1ac573 = null) { const _0x57e15a = _0x2481c4; _0x1922fc('worldBookEditor', 'worldBook'); if (_0x1ac573) { const _0x402e59 = _0x5f0a6c['worldBooks'][_0x57e15a(0x3be)](_0x4dd3ec => _0x4dd3ec['id'] === _0x1ac573); if (!_0x402e59) return; document[_0x57e15a(0x463)](_0x57e15a(0xb7e))[_0x57e15a(0x202)] = _0x402e59['id'], document[_0x57e15a(0x463)](_0x57e15a(0x23f))[_0x57e15a(0x356)] = _0x57e15a(0x2a8), document[_0x57e15a(0x463)](_0x57e15a(0xbf2))[_0x57e15a(0x202)] = _0x402e59[_0x57e15a(0x3b3)], document[_0x57e15a(0x463)](_0x57e15a(0x7da))['value'] = _0x402e59[_0x57e15a(0x67c)]; } else { if ('qxidb' !== _0x57e15a(0xa64)) { _0x351f63[_0x57e15a(0x776)][_0x57e15a(0xb2c)](_0x57e15a(0xbec)); const _0x2021c7 = _0x4ea754['createElement'](_0x57e15a(0x938)); _0x2021c7[_0x57e15a(0xb01)] = _0xa9ff4a, _0x2021c7[_0x57e15a(0x776)]['add'](_0x57e15a(0x2b9)), _0x114af2[_0x57e15a(0xa59)](_0x2021c7); } else document[_0x57e15a(0x463)](_0x57e15a(0xb7e))[_0x57e15a(0x202)] = '', document['getElementById'](_0x57e15a(0x23f))['textContent'] = _0x57e15a(0x235), document['getElementById']('world-book-edit-name')['value'] = '', document[_0x57e15a(0x463)](_0x57e15a(0x7da))[_0x57e15a(0x202)] = ''; } } function _0x27cc19() { const _0x538f62 = _0x2481c4, _0xfb3e07 = document[_0x538f62(0x463)](_0x538f62(0xb7e))[_0x538f62(0x202)], _0x2bf235 = document[_0x538f62(0x463)](_0x538f62(0xbf2))['value'][_0x538f62(0x1e9)](), _0x335f7c = document[_0x538f62(0x463)](_0x538f62(0x7da))[_0x538f62(0x202)][_0x538f62(0x1e9)](); if (!_0x2bf235 || !_0x335f7c) { if (_0x538f62(0x30a) !== 'jzQea') return [_0x57ae5e]; else { _0x24537c('条目名称和内容都不能为空！'); return; } } if (_0xfb3e07) { if ('BtRaV' === 'BtRaV') { const _0x3e7208 = _0x5f0a6c[_0x538f62(0x7ad)][_0x538f62(0x3be)](_0x3dd41e => _0x3dd41e['id'] === _0xfb3e07); _0x3e7208 && (_0x3e7208[_0x538f62(0x3b3)] = _0x2bf235, _0x3e7208['content'] = _0x335f7c); } else _0x380683(_0x46dc1a[_0x538f62(0x5c3)], _0x5eb91f['emotion']); } else { const _0xb6d01a = { 'id': _0x538f62(0x728) + Date['now'](), 'name': _0x2bf235, 'content': _0x335f7c }; _0x5f0a6c['worldBooks'][_0x538f62(0x1e6)](_0xb6d01a); } _0x5c772f(), _0x24537c('世界书条目已保存！'), _0x5e6a55(), _0x1922fc(_0x538f62(0x2be), _0x538f62(0x42d)); } async function _0x318bd9() { const _0x2eb1e2 = _0x2481c4; if ('pCaeT' === _0x2eb1e2(0x60f)) { const _0x39d5ac = document['getElementById'](_0x2eb1e2(0xb7e))['value']; if (!_0x39d5ac) return; const _0x53ad9a = await _0x1ec207(_0x2eb1e2(0x7ac)); if (_0x53ad9a) { if (_0x2eb1e2(0x7f3) !== _0x2eb1e2(0x7f3)) { _0x4fabd4['activeMeetingScriptQueue'] = [..._0x5bdb72], _0x475012[_0x2eb1e2(0x4ef)][_0x18f114['id']] = [..._0x5c9063], _0x4b5ab7(); const _0x1a100c = _0x2eaad9['map'](_0x3a011a => _0x3a011a[_0x2eb1e2(0x460)] === _0x2eb1e2(0x3f9) ? _0x3a011a['line'] : _0x3a011a[_0x2eb1e2(0x460)] + ':\x20' + _0x3a011a[_0x2eb1e2(0x81d)])[_0x2eb1e2(0x3b9)]('\x0a\x0a'); _0x307fe2[_0x2eb1e2(0xbc8)][_0x2eb1e2(0x1e6)]({ 'role': _0x2eb1e2(0x41d), 'senderId': _0x42f62e['id'], 'timestamp': _0x206f7e['now'](), 'isOffline': !![], 'content': _0x1a100c }); } else _0x5f0a6c[_0x2eb1e2(0x7ad)] = _0x5f0a6c['worldBooks'][_0x2eb1e2(0x216)](_0x626b8b => _0x626b8b['id'] !== _0x39d5ac), _0x5f0a6c[_0x2eb1e2(0x723)][_0x2eb1e2(0xbe4)](_0x43a64f => { const _0x5cf983 = _0x2eb1e2; _0x43a64f[_0x5cf983(0xb2b)] && (_0x43a64f[_0x5cf983(0xb2b)] = _0x43a64f[_0x5cf983(0xb2b)]['filter'](_0x168d2f => _0x168d2f !== _0x39d5ac)); }), _0x5c772f(), _0x24537c('条目已删除。'), _0x5e6a55(), _0x1922fc('worldBook', _0x2eb1e2(0x42d)); } } else _0x429816[_0x2eb1e2(0x8d9)](_0x2eb1e2(0x92f) + _0x239bcc[_0x2eb1e2(0x3b3)] + '\x20(' + _0xfde783['id'] + ')\x20恢复头像失败:', _0x5380c9); } function _0x3e5a4c() { const _0x2b8a34 = _0x2481c4, _0x3e8108 = document[_0x2b8a34(0x463)](_0x2b8a34(0x652)), _0x43be85 = _0x3e8108[_0x2b8a34(0x5a2)]('input:checked'), _0x4af631 = document['querySelector'](_0x2b8a34(0x474)); if (_0x43be85[_0x2b8a34(0x55b)] === 0x0) _0x4af631[_0x2b8a34(0x356)] = '--\x20点击选择\x20--'; else _0x43be85['length'] > 0x2 ? _0x4af631[_0x2b8a34(0x356)] = _0x2b8a34(0x9bb) + _0x43be85[_0x2b8a34(0x55b)] + '\x20项' : _0x4af631[_0x2b8a34(0x356)] = Array[_0x2b8a34(0x8b4)](_0x43be85)[_0x2b8a34(0x575)](_0x225256 => _0x225256[_0x2b8a34(0x94b)][_0x2b8a34(0x356)][_0x2b8a34(0x1e9)]())[_0x2b8a34(0x3b9)]('、'); } async function _0x516f2b(_0x55fd5d) { const _0x3f15fe = _0x2481c4; if (_0x3f15fe(0x67a) !== 'qAAbK') { const _0x59e766 = _0x9c30f9[_0x3f15fe(0x433)](_0x196980); _0x4c74e9[_0x3f15fe(0x9d7)](_0x59e766) && (_0x459378[_0x3f15fe(0x202)] = _0x59e766['map'](_0x2a8534 => _0x2a8534[_0x3f15fe(0x3b3)] + '--' + _0x2a8534[_0x3f15fe(0xb0d)])[_0x3f15fe(0x3b9)]('\x0a')); } else { const _0x543ef1 = _0x5f0a6c['chats'][_0x3f15fe(0x3be)](_0x546dbf => _0x546dbf['id'] === _0x55fd5d); if (!_0x543ef1 || _0x543ef1['type'] !== _0x3f15fe(0x74a)) return; document[_0x3f15fe(0x463)](_0x3f15fe(0xbf4))[_0x3f15fe(0x202)] = _0x543ef1['name'] || '', _0x133f2c(_0x3f15fe(0x5b5)), document[_0x3f15fe(0x463)](_0x3f15fe(0x5b5))[_0x3f15fe(0x202)] = _0x543ef1[_0x3f15fe(0x763)] || _0x5f0a6c['activeUserProfileId']; const _0x25b9e8 = document['getElementById'](_0x3f15fe(0x293)); _0x25b9e8[_0x3f15fe(0xb00)] = '', _0x5f0a6c[_0x3f15fe(0x7ad)][_0x3f15fe(0xbe4)](_0x1a2e5d => { const _0xd25e75 = _0x3f15fe; if (_0xd25e75(0x70b) === _0xd25e75(0x70b)) { const _0x1f65e4 = _0x543ef1['linkedWorldBookIds']?.[_0xd25e75(0xa1c)](_0x1a2e5d['id']), _0x4b32dc = document[_0xd25e75(0x58b)](_0xd25e75(0x33d)); _0x4b32dc['innerHTML'] = _0xd25e75(0x48e) + _0x1a2e5d['id'] + '\x22\x20' + (_0x1f65e4 ? _0xd25e75(0x8a6) : '') + '>\x20' + _0x1a2e5d[_0xd25e75(0x3b3)], _0x25b9e8[_0xd25e75(0xa59)](_0x4b32dc); } else { const _0x5b2b78 = _0x14929b[_0xd25e75(0xb32)][_0xd25e75(0x3be)](_0x217adb => _0x217adb['id'] === _0x4a6292); if (!_0x5b2b78) return; _0x21fa36[_0xd25e75(0x356)] = _0xd25e75(0x4f0), _0x4f89f3[_0xd25e75(0x202)] = _0x5b2b78['id'], _0x5e4c2c[_0xd25e75(0x202)] = _0x5b2b78['name'], _0x4ea386['value'] = _0x5b2b78[_0xd25e75(0x763)], _0xa0b323[_0xd25e75(0x80c)]['display'] = _0xd25e75(0x629), _0x5b2b78['memberCharacterIds']['forEach'](_0x1c15c7 => { const _0x55ac96 = _0xd25e75, _0x341cd2 = _0x5a206e['querySelector']('#member-select-' + _0x1c15c7); if (_0x341cd2) _0x341cd2[_0x55ac96(0x8a6)] = !![]; }); } }), _0x26edf4(); const _0x56824c = document[_0x3f15fe(0x463)](_0x3f15fe(0x7fb)), _0x57793a = document[_0x3f15fe(0x463)](_0x3f15fe(0xae1)); _0x57793a[_0x3f15fe(0x80c)][_0x3f15fe(0x4b2)] = '', _0x393cae(_0x3f15fe(0x438) + _0x55fd5d)[_0x3f15fe(0x794)](_0x320183 => { const _0x28c6fa = _0x3f15fe; _0x28c6fa(0xa1e) === _0x28c6fa(0x862) ? (_0x2545a5['error']('群聊音乐搜索失败\x20(' + _0x585cfb + _0x28c6fa(0x332) + _0x341008 + '):', _0x379856), _0xa42ed5[_0x28c6fa(0xc0d)] = null, _0x57e430['playableUrl'] = null) : _0x56824c[_0x28c6fa(0xb01)] = _0x320183 ? URL[_0x28c6fa(0x51e)](_0x320183) : _0x25d84a; }), _0x393cae('group_bg_' + _0x55fd5d)[_0x3f15fe(0x794)](_0x5a482f => { const _0x2157e0 = _0x3f15fe; if (_0x5a482f) _0x57793a[_0x2157e0(0x80c)][_0x2157e0(0x4b2)] = _0x2157e0(0x205) + URL[_0x2157e0(0x51e)](_0x5a482f) + '\x27)'; }), _0x1922fc('groupSettings', _0x3f15fe(0x83e)); } } async function _0x29b067() { const _0xc97e61 = _0x2481c4; if (_0xc97e61(0xa60) === _0xc97e61(0x1e3)) _0x4e9941[_0xc97e61(0xc16)] = null, _0xea78b4(_0xc97e61(0x5e3)), _0x5db235(); else { const _0xc38fc3 = _0x168762(); if (!_0xc38fc3 || _0xc38fc3['type'] !== _0xc97e61(0x74a)) return; const _0xa94590 = document[_0xc97e61(0x463)]('group-settings-name')[_0xc97e61(0x202)]['trim'](); if (!_0xa94590) { if (_0xc97e61(0x608) !== _0xc97e61(0x608)) _0x29e3fe(_0xec2329 + 0x1); else { _0x24537c(_0xc97e61(0xb26)); return; } } _0xc38fc3[_0xc97e61(0x3b3)] = _0xa94590; const _0x132c14 = document[_0xc97e61(0x5a2)](_0xc97e61(0x249)); _0xc38fc3[_0xc97e61(0xb2b)] = Array['from'](_0x132c14)[_0xc97e61(0x575)](_0x5d9b43 => _0x5d9b43[_0xc97e61(0x202)]), _0xc38fc3[_0xc97e61(0x763)] = document['getElementById'](_0xc97e61(0x5b5))[_0xc97e61(0x202)]; const _0x106e70 = document['getElementById']('group-avatar-input')['files'][0x0], _0x1c4c12 = document[_0xc97e61(0x463)](_0xc97e61(0x3ea))['files'][0x0]; if (_0x106e70) await _0x4d5a5e(_0xc97e61(0x438) + _0xc38fc3['id'], _0x106e70); if (_0x1c4c12) await _0x4d5a5e('group_bg_' + _0xc38fc3['id'], _0x1c4c12); _0x5c772f(), _0xfdb8e8(), await _0x30852c(), _0x24537c(_0xc97e61(0xc29)), _0x1922fc(_0xc97e61(0x83e), _0xc97e61(0x48d)); } } function _0x26edf4() { const _0x215bd2 = _0x2481c4; if (_0x215bd2(0x8ca) !== 'gqGkl') { const _0x58413e = document[_0x215bd2(0x463)](_0x215bd2(0x293)), _0x5bf6ca = _0x58413e[_0x215bd2(0x5a2)](_0x215bd2(0xc0f)), _0x557947 = document[_0x215bd2(0x7dd)](_0x215bd2(0xa83)); if (_0x5bf6ca[_0x215bd2(0x55b)] === 0x0) 'wPTZc' !== 'wPTZc' ? _0x4f958d(_0x2af656[_0x215bd2(0x3d4)][0x0]) : _0x557947[_0x215bd2(0x356)] = _0x215bd2(0x741); else _0x5bf6ca[_0x215bd2(0x55b)] > 0x2 ? _0x557947[_0x215bd2(0x356)] = _0x215bd2(0x9bb) + _0x5bf6ca[_0x215bd2(0x55b)] + '\x20项' : _0x557947['textContent'] = Array[_0x215bd2(0x8b4)](_0x5bf6ca)[_0x215bd2(0x575)](_0x2295ff => _0x2295ff['parentElement'][_0x215bd2(0x356)][_0x215bd2(0x1e9)]())[_0x215bd2(0x3b9)]('、'); } else _0x2d3cf6[_0x215bd2(0x776)][_0x215bd2(0x554)](_0x215bd2(0x940)); } async function _0x45d5f1() { const _0x5d4482 = _0x2481c4, _0x5d41cf = _0x168762(), _0xa5bb71 = (_0x5d41cf?.[_0x5d4482(0x3d4)] || [])[_0x5d4482(0x575)](_0x543c76)[_0x5d4482(0x216)](Boolean), _0x2a24bb = _0x1f5ce5(_0x5d41cf['id']); if (!_0x5d41cf || _0x5d41cf[_0x5d4482(0xc02)] !== _0x5d4482(0x74a) || _0xa5bb71[_0x5d4482(0x55b)] < 0x2) return null; const _0x32c66b = _0x5d41cf[_0x5d4482(0xb2b)] && _0x5d41cf[_0x5d4482(0xb2b)][_0x5d4482(0x55b)] > 0x0 ? _0x5d4482(0x307) + _0x5d41cf[_0x5d4482(0xb2b)][_0x5d4482(0x575)](_0x5f4783 => _0x5f0a6c[_0x5d4482(0x7ad)][_0x5d4482(0x3be)](_0x13e408 => _0x13e408['id'] === _0x5f4783))[_0x5d4482(0x216)](Boolean)[_0x5d4482(0x575)](_0x38c9d4 => '\x0a##\x20世界书条目:\x20' + _0x38c9d4[_0x5d4482(0x3b3)] + '\x0a' + _0x38c9d4[_0x5d4482(0x67c)])[_0x5d4482(0x3b9)]('') : '', _0x2d2692 = _0x2a24bb[_0x5d4482(0x91d)] ? _0x5d4482(0xa39) + _0x2a24bb[_0x5d4482(0x3b3)] + '”的补充信息\x0a' + _0x2a24bb[_0x5d4482(0x91d)] : ''; let _0xb2485e = ''; const _0x5c80b7 = new Date(), _0x2c5c8c = _0x5f0a6c[_0x5d4482(0xbc8)]['at'](-0x1); _0xb2485e += _0x5d4482(0x440) + _0x5c80b7[_0x5d4482(0x660)](_0x5d4482(0x2ed), { 'dateStyle': 'full', 'timeStyle': 'short' }); if (_0x2c5c8c) { if (_0x5d4482(0xa8b) === _0x5d4482(0xa8b)) { const _0x3562ff = new Date(_0x2c5c8c[_0x5d4482(0x83a)]), _0x549ee4 = Math[_0x5d4482(0xa37)]((_0x5c80b7 - _0x3562ff) / (0x3e8 * 0x3c)); if (_0x549ee4 < 0x5) _0xb2485e += _0x5d4482(0x353); else { if (_0x549ee4 < 0x78) _0xb2485e += _0x5d4482(0xab0) + _0x549ee4 + _0x5d4482(0x42f); else { const _0x20cd64 = Math['floor'](_0x549ee4 / 0x3c); if (_0x20cd64 < 0x30) _0xb2485e += '\x0a-\x20**对话状态**:\x20群里在' + _0x20cd64 + _0x5d4482(0x40e); else _0xb2485e += _0x5d4482(0x6c6) + Math[_0x5d4482(0xa37)](_0x20cd64 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } else delete _0x5a073a['avatar']; } else 'hDzBZ' !== _0x5d4482(0x89f) ? _0xb2485e += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。' : _0x4b3e97['classList'][_0x5d4482(0x554)](_0x5d4482(0x846)); const _0x4ca704 = [..._0x5f0a6c[_0x5d4482(0xbc8)]][_0x5d4482(0x448)]()[_0x5d4482(0x3be)](_0x4b0a75 => _0x4b0a75['role'] === _0x5d4482(0x5c2))?.[_0x5d4482(0x67c)] || '', _0x266431 = _0x180995(_0x5d41cf, _0x4ca704), _0x1053ae = _0x5f0a6c[_0x5d4482(0xbc8)][_0x5d4482(0x929)](-0x78), _0x3c9ae4 = _0x47fa25[_0x5d4482(0x575)](_0x584ce9 => _0x584ce9[_0x5d4482(0x3b3)]), _0x2cf7f8 = _0x1a340e(), _0x43321e = _0xa5bb71[_0x5d4482(0x575)](_0x4c43db => { const _0x286983 = _0x5d4482, { omniText: _0x32e9be } = _0x27c1ec(_0x4c43db['id'], _0x5d41cf['id']), _0x73ffb0 = _0x17f027(_0x4c43db['id']), _0x338b1e = _0x4c43db[_0x286983(0xb2b)] && _0x4c43db[_0x286983(0xb2b)][_0x286983(0x55b)] > 0x0 ? _0x286983(0x509) + _0x4c43db[_0x286983(0x3b3)] + '的个人专属世界观设定\x0a' + _0x4c43db[_0x286983(0xb2b)][_0x286983(0x575)](_0x22e6db => _0x5f0a6c[_0x286983(0x7ad)][_0x286983(0x3be)](_0x18457c => _0x18457c['id'] === _0x22e6db))[_0x286983(0x216)](Boolean)[_0x286983(0x575)](_0x260c91 => _0x286983(0x8b5) + _0x260c91[_0x286983(0x3b3)] + '\x0a' + _0x260c91['content'])[_0x286983(0x3b9)]('') : ''; let _0x1a8e40 = _0x286983(0x3e7) + _0x4c43db[_0x286983(0x3b3)] + _0x286983(0x5ce); const _0x230171 = _0xd3ebbc(_0x4c43db['id']), _0x18272c = new Date(); if (_0x230171) { const _0x5e62c4 = new Date(_0x230171[_0x286983(0x83a)]); _0x1a8e40 += _0x286983(0xab1) + _0x2a24bb[_0x286983(0x3b3)] + _0x286983(0x5f4) + _0x380a73(_0x5e62c4) + '\x0a'; } else _0x1a8e40 += _0x286983(0x434) + _0x2a24bb[_0x286983(0x3b3)] + _0x286983(0x6aa); return { 'id': _0x4c43db['id'], 'name': _0x4c43db[_0x286983(0x3b3)], 'persona': _0x4c43db['persona'] || _0x286983(0xa78), 'memory': _0x32e9be + _0x73ffb0 + _0x338b1e + _0x1a8e40 }; }), _0x1e04e0 = 0x5, _0x3ad5bf = 0xc, _0x536fcc = _0x5d4482(0x76d)['trim'](), _0x6add7a = { 'instruction': ('\x0a-\x20你正在为一个名为“' + (_0x5d41cf[_0x5d4482(0x3b3)] || '群聊') + '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“' + (_0x2a24bb[_0x5d4482(0x3b3)] || '用户') + _0x5d4482(0x86d) + _0x1e04e0 + _0x5d4482(0x867) + _0x3ad5bf + _0x5d4482(0x948) + (_0x2a24bb[_0x5d4482(0x3b3)] || '用户') + _0x5d4482(0x969) + _0xb2485e + '\x20\x0a' + _0x2d2692 + '\x0a' + _0x32c66b + _0x5d4482(0x988) + _0x2cf7f8 + '\x0a')['trim'](), 'personas': _0x43321e, 'mentioned': _0x266431 ? { 'id': _0x266431['id'], 'name': _0x266431[_0x5d4482(0x3b3)] } : null, 'stickerList': _0x3c9ae4 }, _0x4c82ca = { 'type': 'object', 'properties': { 'events': { 'type': 'array', 'items': { 'type': _0x5d4482(0x340), 'required': [_0x5d4482(0xb6f), _0x5d4482(0xabd)], 'properties': { 'senderId': { 'type': _0x5d4482(0xbc2) }, 'kind': { 'type': _0x5d4482(0xbc2), 'enum': [_0x5d4482(0x3a1), _0x5d4482(0xbec), _0x5d4482(0xa1d)] }, 'content': { 'type': _0x5d4482(0xbc2) }, 'sticker': { 'type': _0x5d4482(0xbc2) }, 'songName': { 'type': _0x5d4482(0xbc2) }, 'artist': { 'type': _0x5d4482(0xbc2) } } } } }, 'required': [_0x5d4482(0xa0c)] }, _0x221ca2 = [{ 'role': 'system', 'content': _0x536fcc }]; for (const _0x4d3d6b of _0x1053ae) { const _0x85188b = _0x4d3d6b[_0x5d4482(0x579)] === 'ai' || _0x4d3d6b[_0x5d4482(0x579)] === _0x5d4482(0x41d) ? _0x5d4482(0x41d) : _0x5d4482(0x5c2); let _0x9fdae = { 'role': _0x85188b, 'content': _0x4d3d6b[_0x5d4482(0x67c)] }, _0x385c61 = !!_0x4d3d6b[_0x5d4482(0x67c)], _0x50b8dc = null; if (_0x4d3d6b[_0x5d4482(0x8dc)]) _0x50b8dc = _0x4d3d6b['image']; else { if (_0x4d3d6b[_0x5d4482(0xbce)]) { if (_0x5d4482(0x7f7) === 'RPRby') { _0x449767(_0x5d4482(0x312)); return; } else try { const _0x48c020 = await _0x393cae(_0x4d3d6b[_0x5d4482(0xbce)]); if (_0x48c020) _0x50b8dc = await _0x5abd11(_0x48c020); } catch (_0x4efa2d) { _0x5d4482(0x9fb) === _0x5d4482(0x9fb) ? console[_0x5d4482(0x8d9)](_0x5d4482(0x21b), _0x4efa2d) : _0x19546e(_0x5d4482(0x72e) + _0x44807e['message']); } } } if (_0x50b8dc) { if (_0x5d4482(0x6d5) !== 'PvoVa') _0x9fdae[_0x5d4482(0x8dc)] = _0x50b8dc, _0x385c61 = !![]; else { const _0x2c2366 = _0x1fa92e[_0x5d4482(0x58b)]('p'); _0x2c2366[_0x5d4482(0xb00)] = _0x68dd42, _0x2c2366[_0x5d4482(0x80c)][_0x5d4482(0x44e)] = '0', _0x11c537[_0x5d4482(0xa59)](_0x2c2366); } } if (_0x385c61) _0x221ca2[_0x5d4482(0x1e6)](_0x9fdae); } _0x221ca2[_0x5d4482(0x1e6)]({ 'role': _0x5d4482(0x5c2), 'content': _0x5d4482(0x97a) + JSON[_0x5d4482(0x38f)](_0x4c82ca) + _0x5d4482(0xba2) + JSON[_0x5d4482(0x38f)](_0x6add7a) }); try { if ('sWHKl' === _0x5d4482(0x359)) _0x20fdda += _0x5d4482(0xb18); else { const _0x844f11 = await _0x550e3c(_0x221ca2, { 'json': !![] }); if (!_0x844f11) return null; let _0x266ed7 = _0x844f11[_0x5d4482(0x1e9)](); const _0x37ae66 = _0x266ed7[_0x5d4482(0x294)](/```json([\s\S]*?)```/i); if (_0x37ae66) _0x266ed7 = _0x37ae66[0x1][_0x5d4482(0x1e9)](); _0x266ed7 = _0x220e7c(_0x266ed7); let _0x280178 = null; try { _0x280178 = JSON[_0x5d4482(0x433)](_0x266ed7); } catch (_0x42568b) { console[_0x5d4482(0x8d9)](_0x5d4482(0x96d), _0x42568b), console[_0x5d4482(0x8d9)](_0x5d4482(0xae0), _0x266ed7); } if (!_0x280178 || !Array[_0x5d4482(0x9d7)](_0x280178[_0x5d4482(0xa0c)])) return null; return _0x280178 = _0x3fb954(_0x280178, _0xa5bb71, _0x3c9ae4), _0x280178[_0x5d4482(0xa0c)] = _0x280178['events']['slice'](0x0, _0x3ad5bf), _0x280178[_0x5d4482(0xa0c)][_0x5d4482(0x55b)] ? _0x280178 : null; } } catch (_0x5275e6) { return _0x5275e6[_0x5d4482(0x3b3)] !== _0x5d4482(0x845) && (_0x5d4482(0x773) === _0x5d4482(0x62b) ? (_0x3f7895['addEventListener'](_0x5d4482(0x3bf), () => _0x2e7346[_0x5d4482(0x3bf)]()), _0x259897[_0x5d4482(0x582)](_0x5d4482(0x236), _0x4b92cb => { const _0x4bd3f3 = _0x5d4482, _0x520db1 = _0x4b92cb[_0x4bd3f3(0x606)]['files'][0x0]; if (!_0x520db1) return; try { const _0x4ec1cf = _0x57bc4a[_0x4bd3f3(0x51e)](_0x520db1); _0xb2feb2[_0x4bd3f3(0x80c)][_0x4bd3f3(0x4b2)] = _0x4bd3f3(0x205) + _0x4ec1cf + '\x27)'; } catch (_0x1aefe5) { _0xca009f('图片预览失败:\x20' + _0x1aefe5[_0x4bd3f3(0x9fa)]); } })) : console[_0x5d4482(0x8d9)](_0x5d4482(0x548), _0x5275e6)), null; } } function _0x155fef() { const _0xfc2bdc = _0x2481c4; if (_0xfc2bdc(0x1e8) === 'kyWNk') return { 'type': _0xfc2bdc(0x7ef), 'eventType': _0x5888d6[0x1]['trim'](), 'eventDate': _0x553fa6[0x2]['trim'](), 'eventContent': _0xc0ad40[0x3]['trim']() }; else { const _0x1d5b3f = document[_0xfc2bdc(0x463)](_0xfc2bdc(0x1ff)); _0x1d5b3f[_0xfc2bdc(0xb00)] = ''; if (_0x5f0a6c['friendCircles']['length'] === 0x0) { _0x1d5b3f[_0xfc2bdc(0xb00)] = _0xfc2bdc(0x6a9); return; } _0x5f0a6c[_0xfc2bdc(0xb32)][_0xfc2bdc(0xbe4)](_0x2ca937 => { const _0x10c314 = _0xfc2bdc, _0x38d5b4 = _0x5f0a6c[_0x10c314(0x7ae)]['find'](_0x5697f2 => _0x5697f2['id'] === _0x2ca937[_0x10c314(0x763)]) || { 'name': _0x10c314(0xa67) }, _0x23054d = document['createElement'](_0x10c314(0xbdf)); _0x23054d[_0x10c314(0x781)] = 'world-book-item', _0x23054d[_0x10c314(0x607)]['id'] = _0x2ca937['id'], _0x23054d[_0x10c314(0xb00)] = _0x10c314(0xb5c) + _0x2ca937['name'] + _0x10c314(0x3a6) + _0x38d5b4[_0x10c314(0x3b3)] + _0x10c314(0x384) + _0x2ca937[_0x10c314(0x9b6)]['length'] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x23054d['addEventListener'](_0x10c314(0x3bf), () => _0x382e97(_0x2ca937['id'])), _0x1d5b3f['appendChild'](_0x23054d); }); } } function _0x37c560(_0x50342b = null) { const _0x37aebf = _0x2481c4; if (_0x37aebf(0x9f5) === 'wfvZS') { const _0x1ca14d = document['getElementById']('friend-circle-edit-name'), _0x2aa089 = document[_0x37aebf(0x463)](_0x37aebf(0x267)), _0x464903 = document[_0x37aebf(0x463)](_0x37aebf(0x523)), _0x5dbba7 = document[_0x37aebf(0x463)]('friend-circle-edit-title'), _0x78f7f2 = document['getElementById'](_0x37aebf(0x8ed)), _0x1e7e54 = document[_0x37aebf(0x463)](_0x37aebf(0x285)); _0x133f2c(_0x37aebf(0x267)), _0x464903[_0x37aebf(0xb00)] = '', _0x5f0a6c[_0x37aebf(0x723)][_0x37aebf(0xbe4)](_0x20892b => { const _0x53d560 = _0x37aebf; if (_0x53d560(0x388) === 'AxYXc') { const _0xe886d8 = document['createElement'](_0x53d560(0xbdf)); _0xe886d8[_0x53d560(0x781)] = _0x53d560(0xa2a), _0xe886d8[_0x53d560(0xb00)] = _0x53d560(0xb09) + _0x20892b['id'] + '\x22\x20data-id=\x22' + _0x20892b['id'] + _0x53d560(0x7c1) + (_0x20892b[_0x53d560(0x6b6)] || _0x25d84a) + _0x53d560(0x446) + _0x20892b['id'] + _0x53d560(0x430) + _0x20892b['name'] + '</label>\x0a\x20\x20\x20\x20', _0x464903[_0x53d560(0xa59)](_0xe886d8); } else _0x5af8c2 = '0x' + _0x4c069d[0x1] + _0x5c524d[0x2], _0x715232 = '0x' + _0x31ce97[0x3] + _0x340878[0x4], _0x5e0fa1 = '0x' + _0xc4c596[0x5] + _0xe2bae5[0x6]; }); if (_0x50342b) { const _0x3e3112 = _0x5f0a6c[_0x37aebf(0xb32)][_0x37aebf(0x3be)](_0x3fd9e9 => _0x3fd9e9['id'] === _0x50342b); if (!_0x3e3112) return; _0x5dbba7[_0x37aebf(0x356)] = _0x37aebf(0x4f0), _0x78f7f2[_0x37aebf(0x202)] = _0x3e3112['id'], _0x1ca14d[_0x37aebf(0x202)] = _0x3e3112['name'], _0x2aa089[_0x37aebf(0x202)] = _0x3e3112[_0x37aebf(0x763)], _0x1e7e54[_0x37aebf(0x80c)][_0x37aebf(0x6df)] = 'block', _0x3e3112[_0x37aebf(0x9b6)][_0x37aebf(0xbe4)](_0x239c68 => { const _0x1d6122 = _0x37aebf; if (_0x1d6122(0x344) !== _0x1d6122(0x29a)) { const _0x2ff9d8 = _0x464903[_0x1d6122(0x7dd)](_0x1d6122(0x1f1) + _0x239c68); if (_0x2ff9d8) _0x2ff9d8[_0x1d6122(0x8a6)] = !![]; } else { _0x3205a0[_0x1d6122(0x356)] = _0x1d6122(0xc19); return; } }); } else { if (_0x37aebf(0x75b) === _0x37aebf(0x2ff)) { const _0x2f9508 = _0x45b9af[_0x37aebf(0x67c)] ? '\x20' + _0x2e5672[_0x37aebf(0x67c)] : ''; _0x4c8bbf[_0x37aebf(0x1e6)]('[' + _0x3062f7(_0x1d1dd9) + _0x37aebf(0xa87) + _0x2f9508); } else _0x5dbba7[_0x37aebf(0x356)] = _0x37aebf(0x9a9), _0x78f7f2[_0x37aebf(0x202)] = '', _0x1ca14d['value'] = _0x37aebf(0xa38) + (_0x5f0a6c[_0x37aebf(0xb32)][_0x37aebf(0x55b)] + 0x1), _0x2aa089[_0x37aebf(0x202)] = _0x5f0a6c[_0x37aebf(0xbb5)], _0x1e7e54['style'][_0x37aebf(0x6df)] = 'none'; } _0x1922fc(_0x37aebf(0xb44), _0x37aebf(0x48a)); } else _0x36176b['error']('Failed\x20to\x20save\x20state\x20to\x20localStorage:', _0x5a866d), _0x46cb3c(_0x37aebf(0x6e3)); } function _0x57cec1() { const _0x40f82f = _0x2481c4, _0x3e6b51 = document[_0x40f82f(0x463)](_0x40f82f(0x8ed))['value'], _0x768f00 = document['getElementById'](_0x40f82f(0x87c))[_0x40f82f(0x202)]['trim'](), _0x36fa51 = document[_0x40f82f(0x463)](_0x40f82f(0x267))[_0x40f82f(0x202)], _0x5a7896 = Array['from'](document['querySelectorAll'](_0x40f82f(0x2f5)))[_0x40f82f(0x575)](_0x1e1f95 => _0x1e1f95[_0x40f82f(0x607)]['id']); if (!_0x768f00) { if (_0x40f82f(0x227) !== _0x40f82f(0x3f1)) { _0x24537c(_0x40f82f(0x528)); return; } else { const _0x109d4e = _0x208191(_0x3673fe[_0x40f82f(0x5c3)]); _0x109d4e && (delete _0x109d4e[_0x40f82f(0xc38)], _0x500e47(), _0x23420e(_0x109d4e['id'], 'normal'), _0x2c7ed5(_0x40f82f(0xa06)), _0x22b677(!![])); } } if (_0x5a7896[_0x40f82f(0x55b)] === 0x0) { _0x24537c(_0x40f82f(0x860)); return; } if (_0x3e6b51) { if (_0x40f82f(0x647) === _0x40f82f(0x647)) { const _0x2da3e9 = _0x5f0a6c[_0x40f82f(0xb32)][_0x40f82f(0x3be)](_0xf900d8 => _0xf900d8['id'] === _0x3e6b51); _0x2da3e9 && (_0x2da3e9[_0x40f82f(0x3b3)] = _0x768f00, _0x2da3e9[_0x40f82f(0x763)] = _0x36fa51, _0x2da3e9[_0x40f82f(0x9b6)] = _0x5a7896); } else { const _0x56df7b = { 'role': _0x40f82f(0x41d), 'content': _0x40f82f(0x2ae) + _0x27a2f9[_0x40f82f(0x3b3)] + ']', 'displayUrl': _0x495f63[_0x40f82f(0xb0d)], 'senderId': _0x28d638[_0x40f82f(0xb6f)], 'timestamp': _0x5cdce7[_0x40f82f(0xb71)](), 'isOffline': _0x2f83c5 }; _0x276fbc[_0x40f82f(0xbc8)][_0x40f82f(0x1e6)](_0x56df7b), _0x56d063(), _0x5afd85(); } } else { if (_0x40f82f(0x787) !== _0x40f82f(0xb1f)) { const _0x438ba8 = { 'id': _0x40f82f(0x23c) + Date['now'](), 'name': _0x768f00, 'boundUserProfileId': _0x36fa51, 'memberCharacterIds': _0x5a7896, 'posts': [] }; _0x5f0a6c[_0x40f82f(0xb32)][_0x40f82f(0x1e6)](_0x438ba8); } else _0x160378[_0x40f82f(0x202)] = _0x3a436c[_0x40f82f(0x720)][_0x40f82f(0x869)] || '', _0x2df539['value'] = _0x772494[_0x40f82f(0x720)]['key'] || '', _0x18fd82[_0x40f82f(0x202)] = _0x32dad5[_0x40f82f(0x720)][_0x40f82f(0x4cc)] || '', _0x3ad6ce[_0x40f82f(0x202)] = _0x4091f5(_0x5d7984[_0x40f82f(0xa91)]?.[_0x40f82f(0x8e9)] ?? 0x64), _0x5747a5['getElementById']('api-provider')[_0x40f82f(0x202)] = _0x222708[_0x40f82f(0x720)]['provider'] || _0x40f82f(0x46a); } _0x5c772f(), _0x24537c(_0x40f82f(0x3e3)), _0x155fef(), _0x1922fc(_0x40f82f(0x48a), 'friendCircleEdit'); } async function _0x5809f9() { const _0x556d53 = _0x2481c4, _0x176675 = document[_0x556d53(0x463)](_0x556d53(0x8ed))[_0x556d53(0x202)]; if (!_0x176675) return; const _0x459f99 = await _0x1ec207('确定要删除这个好友圈吗？此操作不可撤销。'); _0x459f99 && (_0x5f0a6c['friendCircles'] = _0x5f0a6c['friendCircles'][_0x556d53(0x216)](_0x46307e => _0x46307e['id'] !== _0x176675), _0x5f0a6c[_0x556d53(0x64b)] === _0x176675 && (_0x5f0a6c['activeFriendCircleId'] = null), _0x5c772f(), _0x24537c(_0x556d53(0x94f)), _0x155fef(), _0x1922fc(_0x556d53(0x48a), _0x556d53(0xb44))); } function _0x382e97(_0x322894) { const _0x7fd528 = _0x2481c4; if (_0x7fd528(0x900) === _0x7fd528(0x5d4)) { const _0x477bae = _0x3d7b0d[_0x7fd528(0x596)]((_0x127c3f - _0x1de7ad) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2713bb += _0x7fd528(0xa88) + _0x477bae + '\x20天没活动了。你生成的内容必须是全新的事件。\x0a'; } else { _0x3fe772(); const _0x3bb480 = _0x5f0a6c[_0x7fd528(0xb32)][_0x7fd528(0x3be)](_0x552816 => _0x552816['id'] === _0x322894); if (!_0x3bb480) return; _0x5f0a6c[_0x7fd528(0x64b)] = _0x322894, _0x5c772f(), document[_0x7fd528(0x463)](_0x7fd528(0x895))[_0x7fd528(0x356)] = _0x3bb480['name'], _0x317f6a(), _0x1922fc(_0x7fd528(0xa1d), _0x7fd528(0x48a)), _0x5a0f4a(); } } function _0x2af212() { const _0x131e16 = _0x2481c4; if (_0x131e16(0x8be) === _0x131e16(0x8be)) { if (!_0x5f0a6c[_0x131e16(0xb32)] || _0x5f0a6c[_0x131e16(0xb32)][_0x131e16(0x55b)] === 0x0) { if ('bZdaY' === 'bZdaY') { console['error'](_0x131e16(0x9c0)); return; } else _0x374fcc += _0x131e16(0x53a); } const _0xf5fb44 = _0x5f0a6c[_0x131e16(0xb32)][0x0]; if (_0xf5fb44[_0x131e16(0x9b6)][_0x131e16(0x55b)] < 0x2) { console['error']('错误：第一个好友圈\x20\x22' + _0xf5fb44[_0x131e16(0x3b3)] + _0x131e16(0x230)); return; } const _0x488ba4 = { 'id': _0x131e16(0x5db) + Date[_0x131e16(0xb71)](), 'authorType': _0x131e16(0x617), 'authorId': _0xf5fb44['memberCharacterIds'][0x0], 'content': _0x131e16(0xbeb), 'timestamp': Date[_0x131e16(0xb71)](), 'likes': [_0xf5fb44[_0x131e16(0x9b6)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x131e16(0xb71)](), 'authorId': _0xf5fb44[_0x131e16(0x9b6)][0x1], 'content': _0x131e16(0x6c9) }] }; _0xf5fb44[_0x131e16(0x5a9)][_0x131e16(0x1e6)](_0x488ba4), _0x5c772f(), console[_0x131e16(0x5b1)](_0x131e16(0x912) + _0xf5fb44[_0x131e16(0x3b3)] + _0x131e16(0x710)), _0x24537c(_0x131e16(0x9d5)); } else _0x3a9a14 = { 'characterId': _0x646561, 'entries': [] }, _0x326dd6['diaries'][_0x131e16(0x1e6)](_0x5a2349); } window['addTestPost'] = _0x2af212; function _0x4f6bd6(_0x518dea) { const _0x53a41c = _0x2481c4; return _0x5f0a6c[_0x53a41c(0x7ae)][_0x53a41c(0x3be)](_0x10a863 => _0x10a863['id'] === _0x518dea); } function _0x2aa27a(_0x4514b0, _0x2e2a0f = '正在处理...') { const _0x21555b = _0x2481c4; if (_0x21555b(0x71d) === 'oiHwb') { const _0x63f2c5 = _0x21555b(0xa3e) + _0x3a0c10; _0x21dac4(_0x63f2c5), _0x3b9b73(!![]); } else { const _0xaf5a73 = document['getElementById']('phone-container'); let _0x4927f4 = document[_0x21555b(0x463)]('feed-loader'); if (_0x4514b0) !_0x4927f4 && (_0x4927f4 = document[_0x21555b(0x58b)](_0x21555b(0xbdf)), _0x4927f4['id'] = 'feed-loader', _0xaf5a73[_0x21555b(0xa59)](_0x4927f4)), _0x4927f4[_0x21555b(0xb00)] = _0x21555b(0x7a9) + _0x2e2a0f + _0x21555b(0xa5d), _0x4927f4[_0x21555b(0x80c)][_0x21555b(0x6df)] = _0x21555b(0x1df); else { if ('exDAK' === 'exDAK') _0x4927f4 && (_0x4927f4[_0x21555b(0x80c)][_0x21555b(0x6df)] = _0x21555b(0x333)); else { const _0x4bda5a = _0x4e2637['stringify'](_0x2b9f22['log'] || [])[_0x21555b(0x219)](/'/g, _0x21555b(0xbe2))[_0x21555b(0x219)](/"/g, _0x21555b(0x89b)), _0x2126e1 = _0x28ee07['contact_name'] || _0x21555b(0x415); return '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x2e2c25 < _0x4defec['length'] - 0x1 ? _0x21555b(0x996) : '') + _0x21555b(0x78a) + _0x4bda5a + _0x21555b(0x9a7) + _0x2126e1 + _0x21555b(0x98c) + _0x90cab0 + _0x21555b(0xa9c) + _0x2126e1['charAt'](0x0) + _0x21555b(0xc1d) + _0x2126e1 + _0x21555b(0x898) + (_0x23ad21[_0x21555b(0x9f4)] || '') + _0x21555b(0x3de); } } } } async function _0x1cf927() { const _0x1c1a9f = _0x2481c4; if (_0x1c1a9f(0x8a2) !== 'EPeev') { const _0x5ef910 = _0x5f0a6c[_0x1c1a9f(0xb32)][_0x1c1a9f(0x3be)](_0x5ac774 => _0x5ac774['id'] === _0x5f0a6c[_0x1c1a9f(0x64b)]); if (!_0x5ef910 || _0x5f0a6c['isGenerating']) return; _0x2aa27a(!![], _0x1c1a9f(0x93a)), _0x5f0a6c[_0x1c1a9f(0x5f8)] = !![]; try { if (_0x1c1a9f(0x78f) === 'vgtUh') { let _0x44862c = Date[_0x1c1a9f(0xb71)](); _0x5ef910[_0x1c1a9f(0x5a9)] && _0x5ef910[_0x1c1a9f(0x5a9)]['length'] > 0x0 && (_0x44862c = Math[_0x1c1a9f(0x66e)](..._0x5ef910[_0x1c1a9f(0x5a9)][_0x1c1a9f(0x575)](_0x5f2442 => _0x5f2442[_0x1c1a9f(0x83a)]))); const _0x1cdabd = await _0xbfcd22(_0x5ef910); if (!_0x1cdabd || _0x1cdabd['length'] === 0x0) { if ('ETlnv' !== 'ETlnv') _0x27bf25[_0x1c1a9f(0x734)](), _0x14bf51[_0x1c1a9f(0xa5c)]['writeText'](_0x36f582['value'])[_0x1c1a9f(0x794)](() => { const _0x492e8b = _0x1c1a9f; _0x58ef62(_0x492e8b(0x66c)); })['catch'](_0x55def7 => { const _0x19f6c9 = _0x1c1a9f; _0xa78f79(_0x19f6c9(0xaf6)); }); else { _0x24537c(_0x1c1a9f(0x850)); return; } } const _0x5be76a = _0x1cdabd[_0x1c1a9f(0x575)](async (_0x109f91, _0x2eeb0f) => { const _0x1d8adf = _0x1c1a9f; _0x2aa27a(!![], '刷新了\x20' + (_0x2eeb0f + 0x1) + '\x20/\x20' + _0x1cdabd[_0x1d8adf(0x55b)] + _0x1d8adf(0xaf7)); const _0x3add7a = _0x44862c + (_0x2eeb0f + 0x1) * 0x3c * 0x3e8, _0x3161c1 = { 'id': _0x1d8adf(0xbdc) + _0x109f91[_0x1d8adf(0xbb2)] + '_' + _0x3add7a, 'authorType': _0x1d8adf(0x617), 'authorId': _0x109f91['authorId'], 'content': _0x109f91[_0x1d8adf(0x29e)], 'timestamp': _0x3add7a, 'likes': _0x109f91[_0x1d8adf(0x5e8)] || [], 'comments': (_0x109f91[_0x1d8adf(0x5f9)] || [])[_0x1d8adf(0x575)]((_0x21104e, _0x582ee7) => ({ 'commentId': 'c_' + _0x3add7a + '_' + _0x582ee7, 'authorId': _0x21104e[_0x1d8adf(0xbb2)], 'content': _0x21104e[_0x1d8adf(0x67c)] })) }; if (_0x109f91[_0x1d8adf(0xa3a)] === 'music' && _0x109f91['songName'] && _0x109f91[_0x1d8adf(0x2d1)]) { if ('QjXSH' !== 'QjXSH') return _0x548d28 + _0x1d8adf(0x2d3); else try { const _0x2e18b5 = await _0x13dea2(_0x109f91[_0x1d8adf(0x48c)], _0x109f91[_0x1d8adf(0x2d1)]); _0x3161c1[_0x1d8adf(0xc02)] = _0x1d8adf(0xa1d), _0x3161c1[_0x1d8adf(0x48c)] = _0x109f91[_0x1d8adf(0x48c)], _0x3161c1[_0x1d8adf(0x2d1)] = _0x109f91['artist'], _0x3161c1[_0x1d8adf(0xc0d)] = _0x2e18b5[_0x1d8adf(0xa53)], _0x3161c1[_0x1d8adf(0xa18)] = _0x2e18b5[_0x1d8adf(0xb0d)]; } catch (_0xd9a05c) { if (_0x1d8adf(0x9f7) !== 'QAZmT') { _0x559d7e[_0x1d8adf(0xb00)] = _0x1d8adf(0x578); return; } else console[_0x1d8adf(0x8d9)](_0x1d8adf(0x4e2), _0xd9a05c), _0x3161c1['type'] = 'text'; } } else _0x3161c1[_0x1d8adf(0xc02)] = 'text'; return _0x3161c1; }), _0x466b0b = await Promise['all'](_0x5be76a); _0x5ef910[_0x1c1a9f(0x5a9)][_0x1c1a9f(0x1e6)](..._0x466b0b), _0x5c772f(); } else { _0x34bcb5 = _0x5cd143[_0x1c1a9f(0xab8)][_0x1c1a9f(0x3be)](_0x5db0b6 => _0x5db0b6[_0x1c1a9f(0xc02)] === _0x1c1a9f(0x963) && _0x5db0b6[_0x1c1a9f(0x3d4)][_0x1c1a9f(0xa1c)](_0x1b041d)); const _0x22acf6 = _0x49e9d1(_0x1474d4); _0x14cbf0 = _0x22acf6 ? _0x22acf6['name'] : '该角色'; } } catch (_0x18f8a8) { 'BklJh' !== _0x1c1a9f(0x909) ? (console[_0x1c1a9f(0x8d9)](_0x1c1a9f(0x6a4), _0x18f8a8), _0x24537c(_0x1c1a9f(0x30f) + _0x18f8a8[_0x1c1a9f(0x9fa)])) : _0x3f99f1[_0x2e06b2] = _0x415a8d['parse'](_0x596a11); } finally { _0x317f6a(), _0x2aa27a(![]), _0x5f0a6c['isGenerating'] = ![]; } } else _0x495dba['getElementById']('editing-world-book-id')[_0x1c1a9f(0x202)] = '', _0x5e00b0[_0x1c1a9f(0x463)](_0x1c1a9f(0x23f))[_0x1c1a9f(0x356)] = _0x1c1a9f(0x235), _0x178872[_0x1c1a9f(0x463)](_0x1c1a9f(0xbf2))[_0x1c1a9f(0x202)] = '', _0x3a518f[_0x1c1a9f(0x463)]('world-book-edit-content')[_0x1c1a9f(0x202)] = ''; } async function _0xbfcd22(_0x5ad5c8) { const _0x419c4a = _0x2481c4, _0x4ae9f7 = _0x5ad5c8[_0x419c4a(0x9b6)][_0x419c4a(0x575)](_0x132add => _0x543c76(_0x132add))[_0x419c4a(0x216)](Boolean); if (_0x4ae9f7['length'] === 0x0) return null; const _0x5b52d9 = _0x1a340e(), _0x47bbb3 = _0x4f6bd6(_0x5ad5c8[_0x419c4a(0x763)]) || _0x5f0a6c[_0x419c4a(0x7ae)][0x0], _0xc49576 = _0x47bbb3 ? _0x419c4a(0x3db) + _0x47bbb3[_0x419c4a(0x3b3)] + _0x419c4a(0xb21) + (_0x47bbb3[_0x419c4a(0x91d)] || '无') + '\x0a' : '', _0x458867 = _0x4ae9f7[_0x419c4a(0x575)](_0x508623 => { const _0x13a866 = _0x419c4a; if (_0x13a866(0x7fe) !== _0x13a866(0x6a2)) { const { omniText: _0x9050f7 } = _0x27c1ec(_0x508623['id'], null), _0x9058ad = _0x17f027(_0x508623['id']), _0x1af22c = _0x508623['linkedWorldBookIds'] && _0x508623['linkedWorldBookIds'][_0x13a866(0x55b)] > 0x0 ? _0x13a866(0x509) + _0x508623['name'] + _0x13a866(0xb25) + _0x508623[_0x13a866(0xb2b)][_0x13a866(0x575)](_0x2cb2ed => _0x5f0a6c['worldBooks'][_0x13a866(0x3be)](_0x4ffc9f => _0x4ffc9f['id'] === _0x2cb2ed))['filter'](Boolean)[_0x13a866(0x575)](_0x10037a => _0x13a866(0x8b5) + _0x10037a[_0x13a866(0x3b3)] + '\x0a' + _0x10037a['content'])[_0x13a866(0x3b9)]('') : ''; return '-\x20姓名:\x20' + _0x508623[_0x13a866(0x3b3)] + _0x13a866(0x2df) + _0x508623['id'] + _0x13a866(0x50a) + _0x508623[_0x13a866(0x91d)] + _0x13a866(0xb0b) + _0x9050f7 + '\x0a' + _0x9058ad + '\x0a' + _0x1af22c; } else { const _0x37dd9f = _0x2f1a1e[_0x13a866(0x202)][_0x13a866(0x1e9)]()['includes'](_0x559c51); _0x521f2b[_0x13a866(0xa7f)] = _0x37dd9f; } })[_0x419c4a(0x3b9)]('\x0a\x0a'), _0x321b59 = Math[_0x419c4a(0xa37)](Math[_0x419c4a(0x642)]() * 0x3) + 0x2, _0x5f1e5b = _0x419c4a(0xbcb) + _0x321b59 + _0x419c4a(0x735) + _0x458867 + '\x0a' + _0xc49576 + '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a' + _0x5b52d9 + _0x419c4a(0x694) + _0x321b59 + _0x419c4a(0x3ef) + _0x321b59 + '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x162358 = [{ 'role': _0x419c4a(0x3c6), 'content': _0x5f1e5b }, { 'role': _0x419c4a(0x5c2), 'content': _0x419c4a(0x36a) }]; _0x162358[_0x419c4a(0x1e6)]({ 'role': _0x419c4a(0x5c2), 'content': _0x419c4a(0x298) + _0x321b59 + _0x419c4a(0x7df) }); try { const _0x4dbac8 = await _0x550e3c(_0x162358, { 'json': !![] }), _0xa4e956 = _0x4dbac8[_0x419c4a(0x294)](/(\[[\s\S]*\])/); if (!_0xa4e956) throw new Error(_0x419c4a(0x2fd)); const _0x2096c9 = _0xa4e956[0x1], _0x537731 = JSON[_0x419c4a(0x433)](_0x2096c9); if (!Array[_0x419c4a(0x9d7)](_0x537731)) throw new Error(_0x419c4a(0x7b6)); return _0x537731; } catch (_0xe57a4f) { return console['error'](_0x419c4a(0x3a3), _0xe57a4f), console[_0x419c4a(0x8d9)]('AI返回的原始文本:', _0xe57a4f[_0x419c4a(0x3fa)] || 'AI返回了无法解析的文本'), null; } } async function _0x64bb4a() { const _0x2028c2 = _0x2481c4; if (_0x2028c2(0x2fa) === _0x2028c2(0x7a4)) { if (typeof _0x32aa98 === _0x2028c2(0xbc2)) _0xd3ef53['push'](_0x160bbb); } else { const _0x3535f3 = _0x5f0a6c['friendCircles'][_0x2028c2(0x3be)](_0x2248b0 => _0x2248b0['id'] === _0x5f0a6c['activeFriendCircleId']); if (!_0x3535f3) return; const _0x3a24df = await _0x1ec207(_0x2028c2(0xb93) + _0x3535f3[_0x2028c2(0x3b3)] + _0x2028c2(0x967)); _0x3a24df && (_0x3535f3[_0x2028c2(0x5a9)] = [], _0x5c772f(), _0x317f6a(), _0x24537c(_0x2028c2(0xa0b))); } } function _0x317f6a() { const _0x27e48d = _0x2481c4, _0x59c826 = document[_0x27e48d(0x463)]('music-feed-container'), _0x59fcf1 = _0x5f0a6c[_0x27e48d(0xb32)][_0x27e48d(0x3be)](_0x41577c => _0x41577c['id'] === _0x5f0a6c[_0x27e48d(0x64b)]); if (!_0x59fcf1) { _0x59c826[_0x27e48d(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>'; return; } if (!_0x59fcf1[_0x27e48d(0x5a9)] || _0x59fcf1[_0x27e48d(0x5a9)][_0x27e48d(0x55b)] === 0x0) { if (_0x27e48d(0x46e) !== _0x27e48d(0x899)) { _0x59c826['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>'; return; } else _0x585172('💜\x20' + _0x1d843c[_0x27e48d(0x3b3)] + '\x20添加了新的纪念日：' + _0x172571[_0x27e48d(0x6fb)]); } _0x59c826[_0x27e48d(0xb00)] = ''; const _0x5799a0 = [..._0x59fcf1[_0x27e48d(0x5a9)]][_0x27e48d(0x61a)]((_0x4f08b9, _0x29a114) => _0x29a114[_0x27e48d(0x83a)] - _0x4f08b9[_0x27e48d(0x83a)]); _0x5799a0[_0x27e48d(0xbe4)](_0x161d11 => { const _0x430df7 = _0x27e48d, _0x4adeea = document[_0x430df7(0x58b)](_0x430df7(0xbdf)); _0x4adeea[_0x430df7(0x781)] = 'music-post'; let _0x5621b4 = '未知', _0x16168c = _0x25d84a; if (_0x161d11[_0x430df7(0x53f)] === _0x430df7(0x5c2)) { if ('QkVsQ' !== _0x430df7(0x823)) { const _0x4d71ee = [], _0x2c492d = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x2cc72d; while ((_0x2cc72d = _0x2c492d[_0x430df7(0x204)](_0x377306)) !== null) { const _0xddb46f = _0x2cc72d[0x1][_0x430df7(0x219)](/\\"/g, '\x22')[_0x430df7(0x219)](/\\n/g, '\x0a')[_0x430df7(0x1e9)](); if (_0xddb46f) _0x4d71ee[_0x430df7(0x1e6)](_0xddb46f); } if (_0x4d71ee['length']) return _0x4d71ee[_0x430df7(0x3d1)](_0x51e06a)[_0x430df7(0x929)](0x0, 0x9); } else { const _0x26f27a = _0x4f6bd6(_0x161d11[_0x430df7(0xbb2)]); _0x26f27a && (_0x5621b4 = _0x26f27a[_0x430df7(0x3b3)], _0x16168c = _0x26f27a[_0x430df7(0x6b6)]); } } else { const _0x5306d8 = _0x543c76(_0x161d11[_0x430df7(0xbb2)]); _0x5306d8 && (_0x5621b4 = _0x5306d8['name'], _0x16168c = _0x5306d8['avatar']); } const _0x2e79a1 = _0x430df7(0x44c) + _0x16168c + _0x430df7(0x76e) + _0x5621b4 + _0x430df7(0x502), _0x755787 = _0x430df7(0x920) + _0x161d11['content'] + _0x430df7(0xb3e); let _0x3c0eb1 = ''; if (_0x161d11[_0x430df7(0x8dc)] || _0x161d11[_0x430df7(0xbce)]) { const _0x4c0a4d = _0x430df7(0xbef) + _0x161d11['id']; _0x3c0eb1 = _0x430df7(0x70e) + _0x4c0a4d + _0x430df7(0x874), setTimeout(() => { const _0x5442c9 = _0x430df7; if (_0x5442c9(0x250) !== _0x5442c9(0x5ca)) { const _0x27e1d7 = document[_0x5442c9(0x463)](_0x4c0a4d); if (!_0x27e1d7) return; if (_0x161d11[_0x5442c9(0x8dc)]) _0x27e1d7[_0x5442c9(0xb01)] = _0x161d11['image']; else _0x161d11[_0x5442c9(0xbce)] && _0x393cae(_0x161d11['imageId'])[_0x5442c9(0x794)](_0xac436e => { const _0x4777e9 = _0x5442c9; if ('ravbw' === _0x4777e9(0x6d4)) { if (_0x16f056) _0x415cdc(_0x2be43f); } else { if (_0xac436e) { const _0x444087 = URL['createObjectURL'](_0xac436e); _0x27e1d7[_0x4777e9(0xb01)] = _0x444087, _0x27e1d7[_0x4777e9(0x79e)] = () => URL[_0x4777e9(0x768)](_0x444087); } } }); } else { const _0x54f53a = _0x2109e6(_0x386c49[0x1], 0xa), _0x1289be = _0x56d743(_0xf9f5c1[0x2], 0xa), _0x3d17f7 = _0x3f2ea7(_0x3c887c[0x3], 0xa) * (_0x3dc83a[0x3][_0x5442c9(0x55b)] === 0x2 ? 0xa : 0x1), _0x59b35e = _0x54f53a * 0x3c + _0x1289be + _0x3d17f7 / 0x3e8, _0x2ef78e = _0x5e730d[_0x5442c9(0x219)](_0x170c10, '')[_0x5442c9(0x1e9)](); _0x2ef78e && _0x1a1926[_0x5442c9(0x1e6)]({ 'time': _0x59b35e, 'text': _0x2ef78e }); } }, 0x0); } let _0x2a92ef = ''; _0x161d11[_0x430df7(0xc02)] === _0x430df7(0xa1d) && _0x161d11['songName'] && (_0x430df7(0xb8b) === 'NNbna' ? _0x2a92ef = '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22' + _0x161d11['id'] + _0x430df7(0x99d) + (_0x161d11['coverUrl'] || _0x25d84a) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x161d11[_0x430df7(0x48c)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x161d11[_0x430df7(0x2d1)] + _0x430df7(0xa77) + (_0x161d11[_0x430df7(0xa18)] ? '▶' : '⚠') + _0x430df7(0x3ca) : _0x13c3e0[_0x430df7(0x80c)][_0x430df7(0x6df)] = _0x430df7(0x333)); const _0x2e774f = _0x430df7(0xa1f) + new Date(_0x161d11[_0x430df7(0x83a)])[_0x430df7(0x660)](_0x430df7(0x2ed)) + _0x430df7(0x3fe); let _0x3bcbc6 = ''; if (_0x161d11[_0x430df7(0x5e8)] && _0x161d11[_0x430df7(0x5e8)]['length'] > 0x0 || _0x161d11[_0x430df7(0x5f9)] && _0x161d11[_0x430df7(0x5f9)][_0x430df7(0x55b)] > 0x0) { if (_0x430df7(0xa2b) === _0x430df7(0x5aa)) _0x574540[_0x4e8815] = _0x53f671[_0x430df7(0x433)](_0x2ac423); else { let _0x156f41 = ''; if (_0x161d11[_0x430df7(0x5e8)] && _0x161d11['likes'][_0x430df7(0x55b)] > 0x0) { const _0x18f61f = _0x161d11[_0x430df7(0x5e8)][_0x430df7(0x575)](_0x5694e1 => _0x543c76(_0x5694e1)?.[_0x430df7(0x3b3)] || '未知')[_0x430df7(0x3b9)]('、'), _0x3f381a = _0x430df7(0x4fd); _0x156f41 = _0x430df7(0x8ee) + _0x3f381a + '\x20' + _0x18f61f + _0x430df7(0x3fe); } let _0x32c1a0 = ''; if (_0x161d11[_0x430df7(0x5f9)] && _0x161d11[_0x430df7(0x5f9)][_0x430df7(0x55b)] > 0x0) { const _0xf11258 = _0x161d11[_0x430df7(0x5f9)][_0x430df7(0x575)](_0x35fe09 => { const _0x5a1ddb = _0x430df7, _0x28ec1b = _0x543c76(_0x35fe09[_0x5a1ddb(0xbb2)])?.['name'] || '未知'; return _0x5a1ddb(0x4d6) + _0x28ec1b + _0x5a1ddb(0x1e5) + _0x35fe09[_0x5a1ddb(0x67c)] + '</div>'; })[_0x430df7(0x3b9)](''); _0x32c1a0 = _0x430df7(0xb20) + _0xf11258 + _0x430df7(0x3fe); } _0x3bcbc6 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x156f41 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x32c1a0 + _0x430df7(0xad6); } } const _0x1c5275 = _0x430df7(0x5c8) + _0x755787 + _0x3c0eb1 + _0x2a92ef + _0x430df7(0x3fe); _0x4adeea[_0x430df7(0xb00)] = _0x2e79a1 + _0x1c5275 + _0x2e774f + _0x3bcbc6; if (_0x161d11[_0x430df7(0xc02)] === _0x430df7(0xa1d) && _0x161d11[_0x430df7(0xa18)]) { if (_0x430df7(0x803) !== _0x430df7(0x803)) { const _0x3c0dc1 = _0x4a4bba[_0x430df7(0x7ae)][_0x430df7(0x3be)](_0x2ca002 => _0x2ca002['id'] === _0x5ed829); if (_0x3c0dc1) _0x402b0a[_0x430df7(0xac1)](_0x3c0dc1, _0xa99b20); } else { const _0x30e123 = _0x4adeea[_0x430df7(0x7dd)](_0x430df7(0x984)); if (_0x30e123) { if (_0x430df7(0x828) === _0x430df7(0x828)) _0x30e123[_0x430df7(0x582)](_0x430df7(0x3bf), function () { const _0x5e3e80 = _0x430df7, _0x4985c4 = { 'id': _0x161d11['id'], 'url': _0x161d11[_0x5e3e80(0xa18)] }; _0x39b39f(this, _0x4985c4); }); else { const _0x36105e = _0x2450de[_0x430df7(0x5f9)][_0x430df7(0x575)](_0x342193 => { const _0x413750 = _0x430df7, _0x4974d1 = _0x57e136(_0x342193['authorId'])?.[_0x413750(0x3b3)] || '未知'; return '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>' + _0x4974d1 + '</span>:\x20' + _0x342193['content'] + '</div>'; })[_0x430df7(0x3b9)](''); _0x3310a7 = _0x430df7(0xb20) + _0x36105e + _0x430df7(0x3fe); } } } } _0x59c826[_0x430df7(0xa59)](_0x4adeea); }); } document[_0x2481c4(0x463)]('clear-feed-button')[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x64bb4a), document[_0x2481c4(0x463)](_0x2481c4(0x4da))['addEventListener']('click', _0x1cf927), document['getElementById']('back-to-home-from-circle-list')[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1922fc('home', _0x2481c4(0x48a))), document['getElementById'](_0x2481c4(0x980))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x37c560()), document[_0x2481c4(0x463)](_0x2481c4(0x9e9))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x1922fc(_0x2481c4(0x48a), _0x2481c4(0xb44))), document[_0x2481c4(0x463)](_0x2481c4(0x5fd))[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x57cec1), document['getElementById']('delete-friend-circle-button')[_0x2481c4(0x582)]('click', _0x5809f9), document[_0x2481c4(0x463)](_0x2481c4(0x8ba))['addEventListener'](_0x2481c4(0x3bf), () => { const _0x1b3e8e = _0x2481c4; _0x155fef(), _0x1922fc(_0x1b3e8e(0x48a), 'music'); }), document[_0x2481c4(0x463)](_0x2481c4(0x379))['addEventListener'](_0x2481c4(0x3bf), () => { const _0x2431f3 = _0x2481c4; if (_0x2431f3(0xb59) === _0x2431f3(0x7a3)) { const _0x20e551 = new _0x2c7a14(), _0xaa0f3 = _0x2b055c[_0x2431f3(0x463)](_0x2431f3(0xa33)), _0x69c52f = _0x25b6ed[_0x2431f3(0x463)](_0x2431f3(0x43f)); if (_0xaa0f3 && _0x69c52f) { const _0x3408c3 = _0x58e6c6(_0x20e551[_0x2431f3(0xc10)]())['padStart'](0x2, '0'), _0x1b1ac2 = _0x2d3e63(_0x20e551[_0x2431f3(0x88b)]())['padStart'](0x2, '0'); _0xaa0f3[_0x2431f3(0x356)] = _0x3408c3 + ':' + _0x1b1ac2; const _0x580057 = _0x20e551[_0x2431f3(0x567)]() + 0x1, _0x2550bc = _0x20e551['getDate'](), _0x16502b = [_0x2431f3(0x957), _0x2431f3(0x685), '星期二', '星期三', _0x2431f3(0x522), _0x2431f3(0x733), '星期六'][_0x20e551[_0x2431f3(0x2c2)]()]; _0x69c52f[_0x2431f3(0x356)] = _0x580057 + '月' + _0x2550bc + '日\x20' + _0x16502b; } } else _0x5f0a6c[_0x2431f3(0x64b)] && _0x37c560(_0x5f0a6c[_0x2431f3(0x64b)]); }), document['getElementById'](_0x2481c4(0x4fc))['addEventListener'](_0x2481c4(0x3bf), async () => { const _0x44cbaf = _0x2481c4; if (_0x44cbaf(0x547) !== _0x44cbaf(0x41b)) { const _0x20cc92 = _0x5f0a6c[_0x44cbaf(0xb32)][_0x44cbaf(0x3be)](_0x34e305 => _0x34e305['id'] === _0x5f0a6c['activeFriendCircleId']); if (!_0x20cc92 || _0x5f0a6c[_0x44cbaf(0x5f8)]) return; const _0x568dbb = _0x20cc92[_0x44cbaf(0x763)], _0x43512f = _0x5f0a6c[_0x44cbaf(0x7ae)][_0x44cbaf(0x3be)](_0x3507b4 => _0x3507b4['id'] === _0x568dbb); if (!_0x43512f) { if (_0x44cbaf(0x628) === 'QLEkR') { _0x3a8020[_0x44cbaf(0xb00)] = _0x44cbaf(0x43b); return; } else { _0x24537c(_0x44cbaf(0x38e)); return; } } const _0x4dc29c = document[_0x44cbaf(0x463)](_0x44cbaf(0x4c9))[_0x44cbaf(0x202)][_0x44cbaf(0x1e9)](), _0x2f173c = _0x5f0a6c['pendingPostAttachments'][_0x44cbaf(0x8dc)], _0x5b125a = _0x5f0a6c[_0x44cbaf(0xaaa)][_0x44cbaf(0xa1d)], _0x5abaf1 = _0x5f0a6c[_0x44cbaf(0xaaa)]['imageId']; if (!_0x4dc29c && !_0x2f173c && !_0x5b125a) { if (_0x44cbaf(0x788) === 'LyIVW') { _0x24537c('总得说点什么吧？'); return; } else { _0x59ac00[_0x44cbaf(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>'; return; } } const _0x174df3 = { 'id': _0x44cbaf(0xa07) + Date[_0x44cbaf(0xb71)](), 'authorType': _0x44cbaf(0x5c2), 'authorId': _0x43512f['id'], 'content': _0x4dc29c, 'timestamp': Date[_0x44cbaf(0xb71)](), 'likes': [], 'comments': [] }; if (_0x5abaf1) _0x44cbaf(0x2a7) !== _0x44cbaf(0x2a7) ? (_0x51d5a0(), _0x68a2b8(_0x44cbaf(0x211), _0x44cbaf(0x28c))) : _0x174df3[_0x44cbaf(0xbce)] = _0x5abaf1; else _0x2f173c && (_0x44cbaf(0x78e) === _0x44cbaf(0x78e) ? _0x174df3[_0x44cbaf(0x8dc)] = _0x2f173c : _0x367eca[_0x44cbaf(0xbb5)] = _0x273c9a['id']); if (_0x5b125a) { if (_0x44cbaf(0x7ff) === 'nbnXg') _0x174df3[_0x44cbaf(0xc02)] = _0x44cbaf(0xa1d), Object[_0x44cbaf(0xac1)](_0x174df3, _0x5b125a); else { const _0x407d20 = _0x2dc96f[_0x4f4811[_0x44cbaf(0x55b)] - 0x1]; (!_0x442f5a || _0x407d20[_0x44cbaf(0x83a)] > _0x22b403[_0x44cbaf(0x83a)]) && (_0x210c46 = _0x407d20); } } else _0x174df3[_0x44cbaf(0xc02)] = _0x44cbaf(0x3a1); _0x20cc92[_0x44cbaf(0x5a9)][_0x44cbaf(0x1e6)](_0x174df3), _0x5c772f(), _0x317f6a(), document[_0x44cbaf(0x463)]('user-post-textarea')[_0x44cbaf(0x202)] = '', _0x5f0a6c[_0x44cbaf(0xaaa)][_0x44cbaf(0x8dc)] = null, _0x5f0a6c[_0x44cbaf(0xaaa)][_0x44cbaf(0xa1d)] = null, _0x5f0a6c['pendingPostAttachments'][_0x44cbaf(0xbce)] = null, _0x539281(), _0x5cc095(_0x174df3); } else _0x4a3227(_0x427a3b[_0x44cbaf(0x5c1)])[_0x44cbaf(0x794)](_0x169448 => { const _0x4e1d8b = _0x44cbaf, _0x1c561e = _0x30b89b[_0x4e1d8b(0x463)](_0x509f01); if (_0x1c561e && _0x169448) _0x1c561e[_0x4e1d8b(0xb01)] = _0x411627[_0x4e1d8b(0x51e)](_0x169448); }); }), document['getElementById']('user-post-image-button')[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x46c6db = _0x2481c4; document[_0x46c6db(0x463)]('user-post-image-input')[_0x46c6db(0x3bf)](); }), document[_0x2481c4(0x463)]('user-post-image-input')[_0x2481c4(0x582)](_0x2481c4(0x236), async _0x378c83 => { const _0x57ee66 = _0x2481c4; if ('IbixB' !== _0x57ee66(0xbb6)) { const _0x17a720 = _0x378c83['target'][_0x57ee66(0x4b6)][0x0]; if (!_0x17a720) return; try { if ('RCrzI' === _0x57ee66(0x5f1)) _0x436c72(![]), _0x15985f[_0x57ee66(0x5f8)] = ![]; else { const _0x551cf0 = await _0x1f84b9(_0x17a720, 0x320, 0.8, !![]), _0x1ec897 = _0x57ee66(0x7f9) + Date[_0x57ee66(0xb71)](); await _0x4d5a5e(_0x1ec897, _0x551cf0), _0x5f0a6c[_0x57ee66(0xaaa)]['imageId'] = _0x1ec897, _0x5f0a6c[_0x57ee66(0xaaa)][_0x57ee66(0x8dc)] = null, _0x5f0a6c[_0x57ee66(0xaaa)][_0x57ee66(0xa1d)] = null, _0x539281(); } } catch (_0x4bbb74) { if ('qwxnA' === _0x57ee66(0x210)) _0x24537c(_0x57ee66(0x411) + _0x4bbb74[_0x57ee66(0x9fa)]); else { const _0x4a1af0 = _0x3b9584[_0x57ee66(0x58b)](_0x57ee66(0xbdf)); _0x4a1af0[_0x57ee66(0x781)] = _0x57ee66(0x5ec), _0x4a1af0[_0x57ee66(0xb00)] = _0x1d95e3, _0x528544 === 'user' ? (_0x34f41e[_0x57ee66(0xa59)](_0x4a1af0), _0x5d5a68[_0x57ee66(0xa59)](_0x48ff12)) : (_0x363d3c['appendChild'](_0xf52d23), _0x336308[_0x57ee66(0xa59)](_0x4a1af0)); } } _0x378c83[_0x57ee66(0x606)]['value'] = ''; } else _0x3d9aab = _0x3f66af[_0x57ee66(0x433)](_0x511a44); }), document[_0x2481c4(0x463)]('user-post-music-button')[_0x2481c4(0x582)](_0x2481c4(0x3bf), async () => { const _0x365484 = _0x2481c4, _0x478d66 = await _0x3e4c16(); if (!_0x478d66) return; _0x24537c('正在搜索音乐...'); try { const _0x2ea6a7 = await _0x13dea2(_0x478d66[_0x365484(0x48c)], _0x478d66[_0x365484(0x2d1)]); _0x5f0a6c[_0x365484(0xaaa)][_0x365484(0xa1d)] = { 'songName': _0x478d66[_0x365484(0x48c)], 'artist': _0x478d66['artist'], 'coverUrl': _0x2ea6a7[_0x365484(0xa53)], 'playableUrl': _0x2ea6a7['url'] }, _0x5f0a6c[_0x365484(0xaaa)][_0x365484(0x8dc)] = null, _0x539281(); } catch (_0x5cb479) { _0x24537c('音乐搜索失败:\x20' + _0x5cb479['message']); } }); function _0x529c87() { const _0x24f385 = _0x2481c4, _0x58f432 = new Date(), _0x150bb3 = document[_0x24f385(0x463)](_0x24f385(0x28b)), _0x5252d1 = document['getElementById']('home-date'); if (_0x150bb3 && _0x5252d1) { const _0x351b01 = String(_0x58f432['getHours']())['padStart'](0x2, '0'), _0x49a98a = String(_0x58f432['getMinutes']())[_0x24f385(0x690)](0x2, '0'); _0x150bb3[_0x24f385(0x356)] = _0x351b01 + ':' + _0x49a98a; const _0x44404d = _0x58f432['getMonth']() + 0x1, _0x6b07b = _0x58f432['getDate'](), _0x4bff53 = [_0x24f385(0x957), _0x24f385(0x685), _0x24f385(0x483), '星期三', '星期四', _0x24f385(0x733), _0x24f385(0xbe1)][_0x58f432['getDay']()]; _0x5252d1[_0x24f385(0x356)] = _0x44404d + '月' + _0x6b07b + '日\x20' + _0x4bff53; } } function _0x24a739(_0x126b1f) { const _0x25ab07 = _0x2481c4; if (!_0x126b1f) return ''; const _0x392ba8 = new Date(_0x126b1f), _0x92b1bc = String(_0x392ba8[_0x25ab07(0xc10)]())[_0x25ab07(0x690)](0x2, '0'), _0x4ba353 = String(_0x392ba8[_0x25ab07(0x88b)]())['padStart'](0x2, '0'); return _0x92b1bc + ':' + _0x4ba353; } function _0x1a340e() { const _0x22713a = _0x2481c4, _0x555368 = _0x5f0a6c['friendCircles'][_0x22713a(0x3be)](_0x34dbb7 => _0x34dbb7['id'] === _0x5f0a6c[_0x22713a(0x64b)]), _0x29cd91 = _0x555368 ? _0x555368[_0x22713a(0x5a9)] : []; if (!_0x29cd91 || _0x29cd91[_0x22713a(0x55b)] === 0x0) return ''; const _0x2e90f5 = _0x29cd91[_0x22713a(0x929)](0x0, 0x5), _0xc68ecb = _0x2e90f5[_0x22713a(0x575)](_0x2b6280 => { const _0x20d69b = _0x22713a, _0x4aff93 = _0x543c76(_0x2b6280[_0x20d69b(0xbb2)]) || { 'name': '未知' }; let _0x23825b = '-\x20[动态]\x20' + _0x4aff93[_0x20d69b(0x3b3)] + _0x20d69b(0x7b0) + (_0x2b6280[_0x20d69b(0x4de)] || _0x2b6280['content']) + '”'; return _0x2b6280['type'] === _0x20d69b(0xa1d) && (_0x23825b += _0x20d69b(0x780) + _0x2b6280[_0x20d69b(0x48c)] + _0x20d69b(0x332) + _0x2b6280[_0x20d69b(0x2d1)] + ')'), _0x23825b; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0xc68ecb[_0x22713a(0x3b9)]('\x0a'); } function _0x17f027(_0x17dd31) { const _0x46b2c0 = _0x2481c4; if ('djayh' !== _0x46b2c0(0x42a)) _0x1599cc[_0x46b2c0(0x246)](_0xce815, _0x517ccc[_0x46b2c0(0x38f)](_0x24dba0)); else { const _0x52f2d9 = _0x5f0a6c['userProfiles'][_0x46b2c0(0x3be)](_0x1b75ad => _0x1b75ad['id'] === _0x5f0a6c['activeUserProfileId']) || { 'name': '你' }, _0x1422b9 = _0x5f0a6c['diaries']['find'](_0x26337c => _0x26337c[_0x46b2c0(0xba0)] === _0x17dd31); if (!_0x1422b9 || !_0x1422b9[_0x46b2c0(0x1d7)] || _0x1422b9[_0x46b2c0(0x1d7)]['length'] === 0x0) { if (_0x46b2c0(0x864) !== _0x46b2c0(0x98b)) return ''; else _0x1371a1[_0x46b2c0(0x8dc)] = _0x476c56, _0x38c57a = !![]; } const _0x2801ac = _0x1422b9[_0x46b2c0(0x1d7)]['slice'](-0x8), _0xd38c9f = _0x2801ac[_0x46b2c0(0x575)](_0x5cffe0 => { const _0x11e124 = _0x46b2c0, _0x139a18 = _0x5cffe0['author'] === _0x11e124(0x5c2) ? _0x52f2d9[_0x11e124(0x3b3)] : _0x543c76(_0x5cffe0['author'])[_0x11e124(0x3b3)]; return _0x11e124(0x8b9) + new Date(_0x5cffe0[_0x11e124(0x83a)])[_0x11e124(0x4bc)]() + ']\x20' + _0x139a18 + _0x11e124(0x2f0) + _0x5cffe0['content']; })[_0x46b2c0(0x3b9)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0x52f2d9[_0x46b2c0(0x3b3)] + _0x46b2c0(0x32a) + _0xd38c9f; } } function _0x223de4() { const _0x56fa18 = _0x2481c4; if ('VbeXd' === _0x56fa18(0x58f)) { const _0x245d78 = document[_0x56fa18(0x463)](_0x56fa18(0xb92)), _0x4c6c42 = _0x5f0a6c[_0x56fa18(0xa91)]['widgetBgImage']; if (_0x4c6c42) { if (_0x56fa18(0xbc0) !== _0x56fa18(0x343)) _0x245d78[_0x56fa18(0x80c)][_0x56fa18(0x4b2)] = 'url(' + _0x4c6c42 + ')', _0x245d78[_0x56fa18(0x80c)][_0x56fa18(0x4b0)] = _0x56fa18(0xa53), _0x245d78[_0x56fa18(0x80c)][_0x56fa18(0x6f9)] = 'center', _0x245d78[_0x56fa18(0x80c)][_0x56fa18(0x414)] = 'white', _0x245d78[_0x56fa18(0x5a2)]('.widget-info\x20>\x20div')[_0x56fa18(0xbe4)](_0x168a92 => { const _0x5ca562 = _0x56fa18; 'ydfPH' === _0x5ca562(0xae7) ? _0x168a92[_0x5ca562(0x80c)][_0x5ca562(0x21e)] = _0x5ca562(0xaa3) : _0x5f4cb5 = _0x139e63; }); else return new _0x398c48((_0x1badf3, _0x16449f) => { const _0x3c3f06 = _0x56fa18, _0x7f64e6 = new _0x251c01(); _0x7f64e6[_0x3c3f06(0xabe)] = () => _0x1badf3(_0x7f64e6['result']), _0x7f64e6[_0x3c3f06(0x4d1)] = _0x16449f, _0x7f64e6[_0x3c3f06(0x442)](_0x541d07); }); } else _0x245d78[_0x56fa18(0x80c)][_0x56fa18(0x4b2)] = '', _0x245d78[_0x56fa18(0x80c)]['color'] = '', _0x245d78[_0x56fa18(0x5a2)](_0x56fa18(0x594))[_0x56fa18(0xbe4)](_0x425502 => { const _0x38964b = _0x56fa18; _0x425502[_0x38964b(0x80c)]['textShadow'] = ''; }); } else _0x506d65(_0x2bccc1 - 0x1); } const _0x56a885 = document[_0x2481c4(0x463)]('app-music'), _0x3bc502 = document[_0x2481c4(0x463)](_0x2481c4(0x1fd)); _0x56a885[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x5874f5 = _0x2481c4; _0x155fef(), _0x1922fc(_0x5874f5(0x48a), _0x5874f5(0x28c)); }), _0x3bc502[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x3dd3db = _0x2481c4; _0x9bd21d(), _0x1922fc(_0x3dd3db(0x21d), _0x3dd3db(0x28c)); }), document[_0x2481c4(0x463)](_0x2481c4(0xb14))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x3bdb9d = _0x2481c4; _0x1922fc('home', _0x3bdb9d(0x21d)); }), document['getElementById'](_0x2481c4(0xa21))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x31980b = _0x2481c4; if (_0x20a425) clearInterval(_0x20a425); _0x20a425 = null, _0x5f0a6c[_0x31980b(0x591)] = [], _0x5f0a6c[_0x31980b(0x5c3)] = null, document[_0x31980b(0x463)](_0x31980b(0x8bd))[_0x31980b(0x80c)][_0x31980b(0x6df)] = 'none', _0x5f0a6c[_0x31980b(0x1e1)] = null, _0x5c772f(), _0x1922fc(_0x31980b(0x21d), _0x31980b(0x8ff)); }); const _0x174528 = document[_0x2481c4(0x463)](_0x2481c4(0x8b6)), _0x35bd51 = document[_0x2481c4(0x463)](_0x2481c4(0x4c6)); _0x35bd51[_0x2481c4(0x582)]('click', () => { const _0xd50666 = _0x2481c4; if ('IMdnP' !== 'IMdnP') _0x37445c = _0x98f25b[_0xd50666(0x433)](_0x14d482['getItem'](_0x2fb2d3) || '{}'); else { const _0x1c75fd = _0x174528[_0xd50666(0x202)][_0xd50666(0x1e9)](); _0x1c75fd && (_0x2a339d(_0x1c75fd), _0x174528[_0xd50666(0x202)] = '', setTimeout(_0x4a615f, 0x64)); } }); function _0x39b39f(_0x4d050b, _0xfa1ee8) { const _0x38efe7 = _0x2481c4, _0x4c72b2 = document['getElementById'](_0x38efe7(0x2b8)), _0x5410d1 = document[_0x38efe7(0x5a2)](_0x38efe7(0x212)); _0x5410d1[_0x38efe7(0xbe4)](_0x3e0730 => { const _0xbfc675 = _0x38efe7; _0x3e0730 !== _0x4d050b['querySelector'](_0xbfc675(0x212)) && ('DPike' !== _0xbfc675(0x891) ? _0x3e0730[_0xbfc675(0x356)] = '▶' : _0xd533db[_0xbfc675(0x64b)] && _0x427ca9(_0x43d305[_0xbfc675(0x64b)])); }), _0x4c72b2[_0x38efe7(0xb01)] === _0xfa1ee8[_0x38efe7(0xb0d)] && !_0x4c72b2[_0x38efe7(0x33f)] ? (_0x4c72b2[_0x38efe7(0x639)](), _0x4d050b[_0x38efe7(0x7dd)](_0x38efe7(0x212))['textContent'] = '▶') : (_0x4c72b2[_0x38efe7(0xb01)] = _0xfa1ee8[_0x38efe7(0xb0d)], _0x4c72b2[_0x38efe7(0x77a)](), _0x4d050b[_0x38efe7(0x7dd)](_0x38efe7(0x212))[_0x38efe7(0x356)] = '❚❚'); } const _0xe1dcb5 = document[_0x2481c4(0x463)](_0x2481c4(0x245)); async function _0x2581f4(_0xc73a33) { const _0x12f7a5 = _0x2481c4; if (!_0xc73a33 || !_0xc73a33[_0x12f7a5(0x595)]('http')) return ![]; return new Promise(_0x1b11ba => { const _0x15482c = _0x12f7a5, _0x566129 = document['createElement']('audio'); _0x566129[_0x15482c(0xb01)] = _0xc73a33; const _0x40b9c = setTimeout(() => { _0x53f333(), _0x1b11ba(![]); }, 0xbb8), _0x53f333 = () => { const _0x3998c0 = _0x15482c; if ('dBPbk' !== 'dBPbk') { _0x29d610(_0x3998c0(0x624) + _0x11e4da + _0x3998c0(0x39b)), _0x24ee37(() => _0x88e8e8[_0x3998c0(0x4df)](), 0x5dc); return; } else clearTimeout(_0x40b9c), _0x566129[_0x3998c0(0x4bf)]('canplaythrough', _0x36b448), _0x566129[_0x3998c0(0x4bf)]('error', _0x285b8c), _0x566129[_0x3998c0(0xb01)] = '', _0x566129[_0x3998c0(0x554)](); }, _0x36b448 = () => { const _0x2835d8 = _0x15482c; _0x2835d8(0x9c9) !== 'dlAWG' ? _0xb9514c += _0x2835d8(0x436) : (_0x53f333(), _0x1b11ba(!![])); }, _0x285b8c = () => { _0x53f333(), _0x1b11ba(![]); }; _0x566129[_0x15482c(0x582)](_0x15482c(0xb4e), _0x36b448), _0x566129[_0x15482c(0x582)](_0x15482c(0x8d9), _0x285b8c); }); } async function _0x13dea2(_0x50603e, _0x4666a2) { const _0x2b2d51 = _0x2481c4; if (_0x2b2d51(0x8f5) !== _0x2b2d51(0x8f5)) _0x448d3a[_0x29f881][_0x2b2d51(0x582)](_0x2b2d51(0x3bf), () => _0x431b80[_0x559ad6][_0x2b2d51(0x3bf)]()), _0x4545ce[_0x9c2cb5][_0x2b2d51(0x582)](_0x2b2d51(0x236), _0x5bfee8 => { _0x43f900(_0x125ac5, _0x5bfee8['target']['files'][0x0]); }); else { const _0x306b2e = ['netease', _0x2b2d51(0x611)]; for (const _0x4c1590 of _0x306b2e) { try { if ('lpzBe' === _0x2b2d51(0x758)) _0x217503[_0x2b2d51(0x356)] = _0x474dde[_0x2b2d51(0x3b3)], _0xfeac[_0x2b2d51(0x356)] = _0x2b2d51(0x39f), _0xd0b214(_0x12ed43, 'normal'); else { const _0x3be596 = _0x2b2d51(0x95d) + _0x4c1590 + '?word=' + encodeURIComponent(_0x50603e) + '-' + encodeURIComponent(_0x4666a2), _0x16d5bc = await fetch(_0x3be596), _0xc13c79 = await _0x16d5bc[_0x2b2d51(0x8a5)](); if (_0xc13c79[_0x2b2d51(0xb35)] !== 0xc8 || !_0xc13c79[_0x2b2d51(0xa41)] || _0xc13c79['data']['length'] === 0x0) continue; const _0x25a02f = _0xc13c79['data']['slice'](0x0, 0x5); for (const _0x20f74b of _0x25a02f) { const _0x223dba = 'https://api.vkeys.cn/v2/music/' + _0x4c1590 + _0x2b2d51(0xba4) + _0x20f74b['id'], _0x408320 = await fetch(_0x223dba), _0x137ac2 = await _0x408320[_0x2b2d51(0x8a5)](), _0x23fd1e = _0x137ac2[_0x2b2d51(0xa41)]?.[_0x2b2d51(0xb0d)]; if (await _0x2581f4(_0x23fd1e)) { if (_0x2b2d51(0x443) === 'TwOod') _0x5114a2 = {}; else return { 'url': _0x23fd1e, 'cover': _0x20f74b['cover'], 'source': _0x4c1590 }; } } } } catch (_0x102297) { _0x2b2d51(0x79f) === _0x2b2d51(0x79f) ? console[_0x2b2d51(0x8d9)](_0x2b2d51(0xc2f) + _0x4c1590 + ':', _0x102297) : _0xc629b6[_0x2b2d51(0x80c)][_0x2b2d51(0x4b2)] = ''; } } return { 'url': null, 'cover': null, 'source': null }; } } function _0x1a9ef0(_0x41336d) { const _0x1d9709 = _0x2481c4; try { const _0x1abe75 = JSON['parse'](localStorage[_0x1d9709(0x6b4)](_0x1d9709(0x50c)) || '{}'), _0x36858a = { ..._0x1abe75, ..._0x41336d }; localStorage['setItem'](_0x1d9709(0x50c), JSON[_0x1d9709(0x38f)](_0x36858a)); } catch (_0x3f0b3b) { console['error']('保存徽章状态失败', _0x3f0b3b); } } async function _0x3a8493() { const _0x35f2d5 = _0x2481c4, _0x44a3d2 = document[_0x35f2d5(0x463)](_0x35f2d5(0x2f3)), _0xad0d26 = document[_0x35f2d5(0x463)]('badge-image'); try { if (_0x35f2d5(0x520) !== _0x35f2d5(0x520)) _0x214d0e = _0x4f217d[_0x35f2d5(0x38f)](_0x7ae7df); else { let _0x1afe52 = await _0x393cae(_0x35f2d5(0x786)); if (!_0x1afe52) { if (_0x35f2d5(0x390) === _0x35f2d5(0x873)) _0x553743(_0x3094d3); else { const _0x53ddc3 = JSON['parse'](localStorage[_0x35f2d5(0x6b4)]('badgeState') || '{}'); if (_0x53ddc3['image']) { if ('UCYBT' !== _0x35f2d5(0x4e8)) return _0x5982d5(_0x35f2d5(0x9b2)), ![]; else _0x1afe52 = await _0x32e14c(_0x53ddc3[_0x35f2d5(0x8dc)]), await _0x4d5a5e('widget_badge', _0x1afe52); } } } _0x1afe52 ? (_0xad0d26[_0x35f2d5(0xb01)] = URL[_0x35f2d5(0x51e)](_0x1afe52), _0xad0d26['style'][_0x35f2d5(0x6df)] = _0x35f2d5(0x629), _0x44a3d2[_0x35f2d5(0x80c)][_0x35f2d5(0x99b)] = _0x35f2d5(0x333)) : (_0xad0d26['style'][_0x35f2d5(0x6df)] = 'none', _0x44a3d2[_0x35f2d5(0x80c)][_0x35f2d5(0x99b)] = _0x35f2d5(0x28f)), _0x44a3d2['style'][_0x35f2d5(0x6df)] = _0x35f2d5(0x629); } } catch (_0x219c41) { console[_0x35f2d5(0x8d9)](_0x35f2d5(0x23e), _0x219c41); } } async function _0xcb24a2() { const _0x552fda = _0x2481c4; if ('JLLeI' === _0x552fda(0x9df)) _0x58e9d0[_0x552fda(0xa7f)] = ![], _0x4a44b7[_0x552fda(0x356)] = '获取'; else { const _0x5b6488 = document[_0x552fda(0x463)](_0x552fda(0x640)), _0x143407 = document[_0x552fda(0x463)]('card-image'), _0x2f2889 = document[_0x552fda(0x463)](_0x552fda(0xa6d)), _0x41b7c9 = document[_0x552fda(0x463)]('card-image-2'); try { if (_0x552fda(0x1fb) !== _0x552fda(0x904)) { let _0x3e1194 = await _0x393cae(_0x552fda(0x68e)); if (_0x3e1194) { if (_0x552fda(0x687) === _0x552fda(0x559)) { const _0x4b6ef5 = _0xea4140[_0x552fda(0x58b)]('div'); _0x4b6ef5[_0x552fda(0x781)] = _0x552fda(0x729); const _0x31bb75 = _0x128ab6 + '-' + _0x834071(_0x34013e + 0x1)[_0x552fda(0x690)](0x2, '0') + '-' + _0x868226(_0x24bbf6)[_0x552fda(0x690)](0x2, '0'); if (_0x31bb75 === _0x318d26) _0x4b6ef5[_0x552fda(0x776)]['add'](_0x552fda(0xad3)); if (_0x31bb75 === _0x389eed[_0x552fda(0x94d)]) _0x4b6ef5['classList']['add']('is-selected'); const _0x4b2196 = _0x4eaf4c['createElement'](_0x552fda(0x310)); _0x4b2196['className'] = 'day-number', _0x4b2196[_0x552fda(0x356)] = _0x27d6f7, _0x4b6ef5[_0x552fda(0xa59)](_0x4b2196); const _0x1d86b4 = _0x128c47[_0x552fda(0x3dc)]['filter'](_0x112bc9 => _0x112bc9[_0x552fda(0x4d0)] === _0x31bb75); if (_0x1d86b4[_0x552fda(0x55b)] > 0x0) { const _0x20d186 = _0x114347['createElement'](_0x552fda(0xbdf)); _0x20d186[_0x552fda(0x781)] = 'day-dot', _0x4b6ef5['appendChild'](_0x20d186); } _0x4b6ef5[_0x552fda(0x582)]('click', () => { const _0x1240e5 = _0x552fda; _0x2c3e28[_0x1240e5(0x94d)] = _0x31bb75, _0x10af04(); }), _0x30ca8b[_0x552fda(0xa59)](_0x4b6ef5); } else _0x143407['src'] = URL['createObjectURL'](_0x3e1194), _0x143407[_0x552fda(0x80c)][_0x552fda(0x6df)] = _0x552fda(0x629), _0x5b6488[_0x552fda(0x80c)][_0x552fda(0x99b)] = _0x552fda(0x333), _0x5b6488[_0x552fda(0x80c)]['background'] = 'transparent'; } else _0x143407[_0x552fda(0x80c)][_0x552fda(0x6df)] = _0x552fda(0x333), _0x5b6488[_0x552fda(0x80c)]['border'] = '2px\x20dashed\x20var(--border-color)', _0x5b6488[_0x552fda(0x80c)][_0x552fda(0x4e1)] = _0x552fda(0x6b0); _0x5b6488[_0x552fda(0x80c)][_0x552fda(0x6df)] = _0x552fda(0x629); let _0x26cc7c = await _0x393cae(_0x552fda(0x32d)); _0x26cc7c ? (_0x41b7c9['src'] = URL['createObjectURL'](_0x26cc7c), _0x41b7c9['style']['display'] = 'block', _0x2f2889[_0x552fda(0x80c)]['border'] = _0x552fda(0x333), _0x2f2889[_0x552fda(0x80c)][_0x552fda(0x4e1)] = _0x552fda(0x342)) : (_0x41b7c9['style'][_0x552fda(0x6df)] = _0x552fda(0x333), _0x2f2889[_0x552fda(0x80c)][_0x552fda(0x99b)] = '2px\x20dashed\x20var(--border-color)', _0x2f2889[_0x552fda(0x80c)][_0x552fda(0x4e1)] = _0x552fda(0x6b0)), _0x2f2889[_0x552fda(0x80c)]['display'] = _0x552fda(0x629); } else { const _0x4c2ced = new _0x160ffe(_0x478052[_0x552fda(0x83a)]); _0x3198ed += _0x552fda(0xab1) + _0x4d15d3['name'] + _0x552fda(0x5f4) + _0x228ae8(_0x4c2ced) + '\x0a'; } } catch (_0x256ffc) { _0x552fda(0x290) !== _0x552fda(0x290) ? (_0x3c34e9[_0x552fda(0x80c)][_0x552fda(0x414)] = _0x552fda(0x7bb), _0x39c1cd[_0x552fda(0x80c)]['textShadow'] = _0x552fda(0xa10)) : console[_0x552fda(0x8d9)](_0x552fda(0x2b5), _0x256ffc); } } } async function _0xcb24a2() { const _0x564a29 = _0x2481c4; if (_0x564a29(0x5ea) === 'veuFk') { const _0x1a7816 = document['getElementById'](_0x564a29(0x640)), _0x72b792 = document[_0x564a29(0x463)](_0x564a29(0x836)); try { let _0x33e8c8 = await _0x393cae(_0x564a29(0x68e)); if (!_0x33e8c8) { const _0xd38259 = JSON[_0x564a29(0x433)](localStorage[_0x564a29(0x6b4)](_0x564a29(0x4a3)) || '{}'); _0xd38259[_0x564a29(0x8dc)] && (console[_0x564a29(0x5b1)](_0x564a29(0xa99)), _0x33e8c8 = await _0x32e14c(_0xd38259['image']), await _0x4d5a5e(_0x564a29(0x68e), _0x33e8c8)); } _0x33e8c8 ? (_0x72b792['src'] = URL[_0x564a29(0x51e)](_0x33e8c8), _0x1a7816[_0x564a29(0x80c)]['display'] = 'block') : _0x1a7816[_0x564a29(0x80c)][_0x564a29(0x6df)] = _0x564a29(0x333); } catch (_0x1d2c83) { if (_0x564a29(0x7c5) === _0x564a29(0x7c5)) console[_0x564a29(0x8d9)]('加载卡片图片失败', _0x1d2c83); else { const _0x35cf6c = _0x4930d4['currentDate'][_0x564a29(0x25d)](), _0x5167db = _0x333a9b[_0x564a29(0x8e0)][_0x564a29(0x567)](); _0x3e6a4c['getElementById']('calendar-header-title')[_0x564a29(0x356)] = _0x35cf6c + '年\x20' + (_0x5167db + 0x1) + '月', _0x4d8129(_0x35cf6c, _0x5167db), _0x1290a3(_0x7c9ec1[_0x564a29(0x94d)]); } } try { if (_0x564a29(0x7d0) !== 'zXCXm') { let _0x2c43c4 = await _0x393cae('widget_card_2'); const _0x49a23b = document[_0x564a29(0x463)](_0x564a29(0x838)), _0x2bc716 = document[_0x564a29(0x463)]('card-widget-2'); _0x2c43c4 ? (_0x49a23b['src'] = URL['createObjectURL'](_0x2c43c4), _0x2bc716[_0x564a29(0x80c)]['display'] = _0x564a29(0x629)) : _0x2bc716['style'][_0x564a29(0x6df)] = _0x564a29(0x333); } else { const _0x534869 = _0x350c8f['senderId'] || _0x53937f?.['participantIds'][0x0], _0xa5f3b4 = _0x26b504(_0x534869); _0x117610 = _0xa5f3b4 ? _0xa5f3b4['name'] : '角色'; } } catch (_0x2ce61e) { console[_0x564a29(0x8d9)](_0x564a29(0x3e8), _0x2ce61e); } } else _0x3fc6b9 = _0x44d27b[_0x564a29(0x58b)](_0x564a29(0x80c)), _0x4bc485['id'] = _0x564a29(0x20e), _0x2c543e['head'][_0x564a29(0xa59)](_0x22d54a); } _0x161c02[_0x2481c4(0x582)]('click', () => { const _0x298d1c = _0x2481c4; _0x298d1c(0xab5) !== 'ndizJ' ? (_0x46055f(), _0x1922fc(_0x298d1c(0x211), _0x298d1c(0x28c))) : _0x2800b0[_0x298d1c(0x356)] = _0x480710[_0x298d1c(0x8b4)](_0x1aac39)[_0x298d1c(0x575)](_0x40a7b8 => _0x40a7b8[_0x298d1c(0x94b)][_0x298d1c(0x356)][_0x298d1c(0x1e9)]())['join']('、'); }), document['getElementById']('back-to-home-from-user-list')['addEventListener']('click', () => _0x1922fc(_0x2481c4(0x28c), _0x2481c4(0x211))), document['getElementById'](_0x2481c4(0x7d8))[_0x2481c4(0x582)]('click', () => _0x2c58a9()), document[_0x2481c4(0x463)](_0x2481c4(0x3bd))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x2d8fb1 = _0x2481c4; _0x46055f(), _0x1922fc(_0x2d8fb1(0x211), 'userProfile'); }), document[_0x2481c4(0x463)](_0x2481c4(0xa62))['addEventListener'](_0x2481c4(0x3bf), _0x58bf7e), document[_0x2481c4(0x463)](_0x2481c4(0x6e2))[_0x2481c4(0x582)]('click', _0x535dff), document[_0x2481c4(0x463)](_0x2481c4(0xa03))[_0x2481c4(0x582)]('click', () => { const _0x259df1 = _0x2481c4, _0x42b9ba = document['getElementById'](_0x259df1(0x309))[_0x259df1(0x202)]; _0x42b9ba && (_0x5f0a6c[_0x259df1(0xbb5)] = _0x42b9ba, _0x5c772f(), _0x24537c(_0x259df1(0x286)), _0x46055f(), document[_0x259df1(0x463)](_0x259df1(0xa03))[_0x259df1(0x80c)]['display'] = _0x259df1(0x333)); }); function _0x1f5ce5(_0x3cde8b) { const _0x5b5736 = _0x2481c4; if (_0x5b5736(0x707) === _0x5b5736(0x707)) { const _0x4cf36b = _0x5f0a6c[_0x5b5736(0xab8)]['find'](_0x243ca7 => _0x243ca7['id'] === _0x3cde8b), _0x2e0d1b = _0x4cf36b?.[_0x5b5736(0x763)]; let _0x30a7f5 = _0x5f0a6c[_0x5b5736(0x7ae)][_0x5b5736(0x3be)](_0x46fc27 => _0x46fc27['id'] === _0x2e0d1b); return !_0x30a7f5 && (_0x30a7f5 = _0x5f0a6c['userProfiles'][_0x5b5736(0x3be)](_0x9270c9 => _0x9270c9['id'] === _0x5f0a6c[_0x5b5736(0xbb5)]) || _0x5f0a6c['userProfiles'][0x0]), _0x30a7f5 || { 'name': '用户', 'avatar': _0x6ca07b, 'persona': '' }; } else _0x3577e9[_0x5b5736(0x776)][_0x5b5736(0x554)](_0x5b5736(0x8ef)), _0x18158f[_0x5b5736(0x776)][_0x5b5736(0xb2c)]('active'), _0x18e611(); } function _0x133f2c(_0x359618) { const _0x2b437a = _0x2481c4; if ('RPSfd' === _0x2b437a(0xc0b)) { const _0x2ad9b0 = _0x1e3d1b(_0x49369a[0x1]), _0x4a5602 = _0x14f065[0x2]['trim'](), _0x3e4ea0 = _0x5cf48c(_0x52162e['activeChatId']); let _0x3ca80d = null; if (_0x4a5602 === _0x3e4ea0[_0x2b437a(0x3b3)]) _0x3ca80d = _0x3e4ea0['id']; else { const _0x5f51fe = _0x549286(); if (_0x5f51fe[_0x2b437a(0xc02)] === _0x2b437a(0x74a)) { const _0x55f442 = _0x1ac3e8['characters']['find'](_0x428ea5 => _0x5f51fe[_0x2b437a(0x3d4)]['includes'](_0x428ea5['id']) && _0x428ea5[_0x2b437a(0x3b3)] === _0x4a5602); if (_0x55f442) _0x3ca80d = _0x55f442['id']; } } if (_0x3ca80d) return { 'type': _0x2b437a(0x97d), 'amount': _0x2ad9b0, 'recipientId': _0x3ca80d, 'senderId': _0x11fd01['id'] }; else return { 'type': _0x2b437a(0x3a1), 'content': _0x2b437a(0x705) + _0x4a5602 + _0x2b437a(0x64c) }; } else { const _0x17b6ce = document[_0x2b437a(0x463)](_0x359618); _0x17b6ce[_0x2b437a(0xb00)] = '', _0x5f0a6c[_0x2b437a(0x7ae)][_0x2b437a(0xbe4)](_0x4e6585 => { const _0x5778d3 = _0x2b437a, _0x597aad = document['createElement'](_0x5778d3(0x2e5)); _0x597aad[_0x5778d3(0x202)] = _0x4e6585['id'], _0x597aad[_0x5778d3(0x356)] = _0x4e6585[_0x5778d3(0x3b3)], _0x17b6ce[_0x5778d3(0xa59)](_0x597aad); }); } } function _0x15878e(_0x5c2b87) { const _0x1fb75c = _0x2481c4; if ('xblqK' === _0x1fb75c(0x8ac)) { const _0x4e0aff = _0x543c76(_0x5c2b87), _0x4f85ea = document[_0x1fb75c(0x463)]('chat-view-pane'); _0x4f85ea[_0x1fb75c(0x80c)][_0x1fb75c(0x4b2)] = ''; let _0x5d7ae7 = document[_0x1fb75c(0x463)](_0x1fb75c(0x683) + _0x5c2b87); if (_0x5d7ae7) _0x5d7ae7[_0x1fb75c(0xb00)] = ''; if (!_0x4e0aff) return; _0x4e0aff['chatWallpaper'] && (_0x4f85ea[_0x1fb75c(0x80c)]['backgroundImage'] = _0x1fb75c(0x205) + _0x4e0aff[_0x1fb75c(0x907)] + '\x27)', _0x4f85ea[_0x1fb75c(0x80c)][_0x1fb75c(0x4b0)] = _0x1fb75c(0xa53), _0x4f85ea['style'][_0x1fb75c(0x6f9)] = 'center'); if (_0x4e0aff[_0x1fb75c(0x450)]) { if (_0x1fb75c(0x84b) === _0x1fb75c(0x9ba)) { const _0x20a945 = _0x46d275(); if (!_0x20a945) { _0xea8c73[_0x1fb75c(0x356)] = _0x1fb75c(0xc19); return; } if (_0x20a945[_0x1fb75c(0xc02)] === _0x1fb75c(0x963)) { const _0x2113ce = _0x41573f(_0x20a945[_0x1fb75c(0x3d4)][0x0]); _0x1a4391['textContent'] = _0x2113ce ? _0x2113ce[_0x1fb75c(0x3b3)] : _0x1fb75c(0x7a2); } else _0x51bc3c['textContent'] = _0x20a945[_0x1fb75c(0x3b3)] || _0x1fb75c(0x713) + _0x20a945[_0x1fb75c(0x3d4)][_0x1fb75c(0x55b)] + ')'; } else { let _0x132a71 = document[_0x1fb75c(0x463)](_0x1fb75c(0x683) + _0x4e0aff['id']); if (!_0x132a71) { if (_0x1fb75c(0x9a4) !== _0x1fb75c(0x5dd)) _0x132a71 = document[_0x1fb75c(0x58b)](_0x1fb75c(0x80c)), _0x132a71['id'] = 'style-' + _0x4e0aff['id'], document[_0x1fb75c(0x2cc)][_0x1fb75c(0xa59)](_0x132a71); else { _0x4f992d('名字不能为空！'); return; } } const _0xbbee53 = _0x4e0aff[_0x1fb75c(0x450)], _0x1f7085 = _0xbbee53[_0x1fb75c(0x219)](/\.bubble\.sent/g, _0x1fb75c(0x557) + _0x4e0aff['id'] + _0x1fb75c(0xafb))[_0x1fb75c(0x219)](/\.bubble\.received/g, _0x1fb75c(0x557) + _0x4e0aff['id'] + _0x1fb75c(0xa14)); _0x132a71[_0x1fb75c(0xb00)] = _0x1f7085; } } } else { const _0x48eddf = _0x2ee051[_0x1fb75c(0x463)](_0x1fb75c(0x257)); _0x48eddf[_0x1fb75c(0x734)](), _0x475d11[_0x1fb75c(0xaa9)]('copy'), _0x27098c(_0x1fb75c(0x284)); } } function _0x539281() { const _0x26f37f = _0x2481c4; if (_0x26f37f(0x40f) === _0x26f37f(0x40f)) { const _0x34b53c = document[_0x26f37f(0x463)]('user-post-attachment-preview'); _0x34b53c[_0x26f37f(0xb00)] = ''; const _0x287ea9 = _0xedab9b => { const _0x1e8684 = _0x26f37f; _0x5f0a6c[_0x1e8684(0xaaa)][_0xedab9b] = null; if (_0xedab9b === _0x1e8684(0x8dc)) _0x5f0a6c[_0x1e8684(0xaaa)][_0x1e8684(0xbce)] = null; _0x539281(); }, _0x436efb = _0x5f0a6c['pendingPostAttachments'][_0x26f37f(0xbce)], _0x2e08b1 = _0x5f0a6c[_0x26f37f(0xaaa)]['music']; if (_0x436efb) { const _0x297bd0 = document[_0x26f37f(0x58b)](_0x26f37f(0xbdf)); _0x297bd0['className'] = _0x26f37f(0x97c), _0x297bd0['innerHTML'] = _0x26f37f(0x923), _0x297bd0[_0x26f37f(0x7dd)]('.remove-attachment-btn')['onclick'] = () => _0x287ea9(_0x26f37f(0x8dc)), _0x34b53c['appendChild'](_0x297bd0), _0x393cae(_0x436efb)['then'](_0x48d151 => { const _0xe1383f = _0x26f37f, _0x2c864e = document[_0xe1383f(0x463)]('pending-post-image-preview'); if (_0x2c864e && _0x48d151) { if ('sFejo' !== _0xe1383f(0x73a)) { const _0x329f7f = _0xcc6bf1['getElementById'](_0xe1383f(0x72b)), _0x40542d = _0x5dfeb6[_0xe1383f(0x463)]('galgame-view-container'), _0x3660df = _0x4f1137[_0xe1383f(0x7dd)]('#meeting-view-screen\x20.chat-input-area'); _0x3fef9e[_0xe1383f(0x9f8)] === _0xe1383f(0x618) ? (_0x329f7f[_0xe1383f(0x80c)][_0xe1383f(0x6df)] = _0xe1383f(0x333), _0x40542d[_0xe1383f(0x80c)][_0xe1383f(0x6df)] = 'block') : (_0x329f7f[_0xe1383f(0x80c)][_0xe1383f(0x6df)] = _0xe1383f(0x629), _0x40542d[_0xe1383f(0x80c)][_0xe1383f(0x6df)] = _0xe1383f(0x333)), _0x3660df['style']['display'] = _0xe1383f(0x629); } else _0x2c864e[_0xe1383f(0xb01)] = URL[_0xe1383f(0x51e)](_0x48d151); } }); } if (_0x2e08b1) { if (_0x26f37f(0x6dd) !== 'DxgTn') return '刚才'; else { const _0x50d3c0 = document['createElement']('div'); _0x50d3c0[_0x26f37f(0x781)] = _0x26f37f(0x97c), _0x50d3c0['innerHTML'] = _0x26f37f(0x4d8) + (_0x2e08b1['coverUrl'] || _0x25d84a) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x2e08b1[_0x26f37f(0x48c)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>' + _0x2e08b1[_0x26f37f(0x2d1)] + _0x26f37f(0x810), _0x50d3c0[_0x26f37f(0x7dd)]('.remove-attachment-btn')[_0x26f37f(0x752)] = () => _0x287ea9(_0x26f37f(0xa1d)), _0x34b53c[_0x26f37f(0xa59)](_0x50d3c0); } } } else _0x41603b(_0x1383f6['id']), _0x33b6bf('群聊\x22' + _0x374061[_0x26f37f(0x3b3)] + _0x26f37f(0x341)), _0x5268cb(![]); } async function _0x5cc095(_0x4ed789) { const _0x17ff31 = _0x2481c4; if (_0x17ff31(0x9a2) === 'aBraj') { const _0x64f2b9 = _0x5f0a6c['friendCircles'][_0x17ff31(0x3be)](_0x378968 => _0x378968['id'] === _0x5f0a6c[_0x17ff31(0x64b)]); if (!_0x64f2b9) return; _0x2aa27a(!![], _0x17ff31(0x802)), _0x5f0a6c['isGenerating'] = !![]; try { const _0x15d5a3 = _0x64f2b9[_0x17ff31(0x9b6)][_0x17ff31(0x575)](_0x578936 => _0x543c76(_0x578936))['filter'](Boolean), _0x52ca4b = _0x1a340e(), _0x3d0372 = _0x15d5a3[_0x17ff31(0x575)](_0x540987 => { const _0x50588b = _0x17ff31; if (_0x50588b(0xbc3) === _0x50588b(0x868)) _0x40643f = _0x50588b(0x565); else { const { omniText: _0xaeef3c } = _0x27c1ec(_0x540987['id'], null), _0x500e39 = _0x17f027(_0x540987['id']), _0x3274b7 = _0x540987[_0x50588b(0xb2b)] && _0x540987[_0x50588b(0xb2b)][_0x50588b(0x55b)] > 0x0 ? '\x0a\x0a#\x20' + _0x540987[_0x50588b(0x3b3)] + '的个人专属世界观设定\x0a' + _0x540987[_0x50588b(0xb2b)][_0x50588b(0x575)](_0x2f1092 => _0x5f0a6c[_0x50588b(0x7ad)][_0x50588b(0x3be)](_0x25dcc0 => _0x25dcc0['id'] === _0x2f1092))['filter'](Boolean)[_0x50588b(0x575)](_0xfce749 => _0x50588b(0x8b5) + _0xfce749[_0x50588b(0x3b3)] + '\x0a' + _0xfce749[_0x50588b(0x67c)])['join']('') : ''; return _0x50588b(0x203) + _0x540987[_0x50588b(0x3b3)] + _0x50588b(0x2df) + _0x540987['id'] + _0x50588b(0x50a) + _0x540987[_0x50588b(0x91d)] + _0x50588b(0x301) + _0xaeef3c + '\x0a' + _0x500e39 + '\x0a' + _0x3274b7; } })[_0x17ff31(0x3b9)]('\x0a\x0a'), _0x1bc3ac = _0x4f6bd6(_0x4ed789[_0x17ff31(0xbb2)]) || { 'name': '用户' }, _0x431405 = _0x1bc3ac[_0x17ff31(0x91d)] ? _0x17ff31(0x546) + _0x1bc3ac[_0x17ff31(0x3b3)] + _0x17ff31(0xb21) + _0x1bc3ac['persona'] + '\x0a' : ''; let _0x51845c = null; if (_0x4ed789[_0x17ff31(0x8dc)]) _0x51845c = _0x4ed789[_0x17ff31(0x8dc)]; else { if (_0x4ed789[_0x17ff31(0xbce)]) try { if (_0x17ff31(0xac9) !== _0x17ff31(0x5e5)) { const _0x59a552 = await _0x393cae(_0x4ed789['imageId']); if (_0x59a552) { if (_0x17ff31(0xac5) === _0x17ff31(0xac5)) _0x51845c = await _0x5abd11(_0x59a552); else { const _0x2b4cf5 = new _0x47c69e(), _0x5a1267 = _0x939615[_0x17ff31(0x463)](_0x17ff31(0xa2c)), _0x4b4bd8 = _0x5b3360['getElementById'](_0x17ff31(0xb34)), _0x5d5b4e = _0x9919bb[_0x17ff31(0x463)](_0x17ff31(0x325)); _0x5a1267 && _0x4b4bd8 && (_0x5a1267[_0x17ff31(0x356)] = _0x2b4cf5[_0x17ff31(0x39d)](_0x17ff31(0x2ed), { 'hour': _0x17ff31(0xbe7), 'minute': _0x17ff31(0xbe7), 'hour12': ![] }), _0x4b4bd8[_0x17ff31(0x356)] = _0x2b4cf5['toLocaleDateString'](_0x17ff31(0x2ed), { 'month': _0x17ff31(0xb36), 'day': _0x17ff31(0x808), 'weekday': _0x17ff31(0xb36) })), _0x5d5b4e && (_0x5d5b4e['innerHTML'] = _0x17ff31(0x532) + _0x2b4cf5[_0x17ff31(0x39d)]('zh-CN', { 'hour': _0x17ff31(0xbe7), 'minute': _0x17ff31(0xbe7), 'hour12': ![] }) + '</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'); } } } else { const _0x548b8d = _0x12d011(_0x564372[_0x17ff31(0xbb2)])?.[_0x17ff31(0x3b3)] || '未知'; return _0x17ff31(0x4d6) + _0x548b8d + _0x17ff31(0x1e5) + _0x3ef3e1['content'] + _0x17ff31(0x3fe); } } catch (_0x5b68ff) { console['error'](_0x17ff31(0x748), _0x5b68ff); } } let _0x25b7e7 = _0x1bc3ac[_0x17ff31(0x3b3)] + _0x17ff31(0xa32) + _0x4ed789[_0x17ff31(0x67c)] + '”'; _0x51845c && (_0x25b7e7 += _0x17ff31(0xbaa)); _0x4ed789[_0x17ff31(0xc02)] === 'music' && (_0x17ff31(0xc23) !== _0x17ff31(0x8aa) ? _0x25b7e7 += '\x20[并分享了歌曲:\x20' + _0x4ed789['songName'] + _0x17ff31(0x332) + _0x4ed789[_0x17ff31(0x2d1)] + ']' : _0xae33b4 = _0x17ff31(0x5d6) + _0x3174bd['id'] + _0x17ff31(0x99d) + (_0x272e3e['coverUrl'] || _0x156c72) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x34c072['songName'] + _0x17ff31(0xbbc) + _0x1f47f3[_0x17ff31(0x2d1)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>' + (_0xb23ea6[_0x17ff31(0xa18)] ? '▶' : '⚠') + _0x17ff31(0x3ca)); const _0x95dbe6 = _0x17ff31(0x426) + _0x3d0372 + '\x0a\x0a' + _0x431405 + _0x17ff31(0x3bb) + _0x52ca4b + _0x17ff31(0x708) + _0x25b7e7 + _0x17ff31(0x478), _0x5e5aeb = [{ 'role': 'system', 'content': _0x95dbe6 }], _0x2ed9ed = { 'role': _0x17ff31(0x5c2), 'content': _0x17ff31(0x33e) }; _0x51845c && (_0x17ff31(0x495) !== 'SXPeK' ? _0x2ed9ed['image'] = _0x51845c : (_0xdaa0c6(![]), _0x14d1d1(_0x17ff31(0x696) + _0x117cc2[_0x17ff31(0x9fa)]))); _0x5e5aeb['push'](_0x2ed9ed); const _0x475c2e = await _0x550e3c(_0x5e5aeb, { 'json': !![] }), _0x42e65f = _0x475c2e[_0x17ff31(0x294)](/({[\s\S]*})/); if (!_0x42e65f) throw new Error(_0x17ff31(0xb03)); const _0x433ad3 = JSON['parse'](_0x42e65f[0x1]), _0x5976a6 = _0x64f2b9['posts'][_0x17ff31(0x3be)](_0x3e93a2 => _0x3e93a2['id'] === _0x4ed789['id']); if (_0x5976a6) { if (_0x17ff31(0xbc1) !== 'ykvFd') _0x5976a6[_0x17ff31(0x5e8)] = _0x433ad3[_0x17ff31(0x5e8)] || [], _0x5976a6[_0x17ff31(0x5f9)] = (_0x433ad3['comments'] || [])['map']((_0x1f563b, _0x585f23) => ({ ..._0x1f563b, 'commentId': 'c_' + _0x4ed789[_0x17ff31(0x83a)] + '_' + _0x585f23 })), _0x5c772f(), _0x317f6a(); else for (const _0x42c964 in _0x94df02) { _0xa21364[_0x17ff31(0x80c)][_0x42c964] = _0x59665a[_0x42c964]; } } } catch (_0x239f3c) { console[_0x17ff31(0x8d9)]('生成动态回复失败:', _0x239f3c), _0x24537c(_0x17ff31(0x6e1)); } finally { _0x2aa27a(![]), _0x5f0a6c['isGenerating'] = ![]; } } else _0x5f589a[_0x17ff31(0x5b1)](_0x17ff31(0x492) + _0x386d77), _0x510455[_0x17ff31(0x9d0)](_0xebcc5a, { 'keyPath': 'id' }); } function _0x5a0f4a() { const _0x7d49c1 = _0x2481c4; if (_0x7d49c1(0x697) !== 'nKzCr') { const _0x24c4d9 = _0x43d4c5[0x0]['trim'](), _0x3c4407 = _0x4c49e7[0x1][_0x7d49c1(0x1e9)]()[_0x7d49c1(0x219)](/^"|"$/g, ''); _0x3718fb[_0x24c4d9] = _0x3c4407; } else { const _0x192540 = _0x5f0a6c[_0x7d49c1(0xb32)][_0x7d49c1(0x3be)](_0x5675ab => _0x5675ab['id'] === _0x5f0a6c[_0x7d49c1(0x64b)]), _0x27b4f4 = _0x192540?.['boundUserProfileId']; let _0x4974d6 = _0x5f0a6c[_0x7d49c1(0x7ae)][_0x7d49c1(0x3be)](_0x14dfc1 => _0x14dfc1['id'] === _0x27b4f4); !_0x4974d6 && (_0x4974d6 = _0x5f0a6c[_0x7d49c1(0x7ae)][_0x7d49c1(0x3be)](_0x1e10c3 => _0x1e10c3['id'] === _0x5f0a6c[_0x7d49c1(0xbb5)])); !_0x4974d6 && (_0x4974d6 = _0x5f0a6c['userProfiles'][0x0]); if (_0x4974d6) { if (_0x7d49c1(0x510) === _0x7d49c1(0x510)) document['getElementById']('user-post-avatar')[_0x7d49c1(0xb01)] = _0x4974d6[_0x7d49c1(0x6b6)] || _0x6ca07b; else { const _0x94b4b9 = _0x42c02c[_0x7d49c1(0x463)](_0x7d49c1(0x309))[_0x7d49c1(0x202)]; _0x94b4b9 && (_0x485bf2[_0x7d49c1(0xbb5)] = _0x94b4b9, _0x25d4ff(), _0x128569(_0x7d49c1(0x286)), _0x49f9fb(), _0x4241bf[_0x7d49c1(0x463)](_0x7d49c1(0xa03))[_0x7d49c1(0x80c)][_0x7d49c1(0x6df)] = 'none'); } } } } function _0x386fe9(_0x529cd8) { const _0x22bc3d = _0x2481c4; let _0x241d8c = 0x0, _0x3beb51 = 0x0, _0x45b76d = 0x0; if (_0x529cd8[_0x22bc3d(0x55b)] == 0x4) _0x241d8c = '0x' + _0x529cd8[0x1] + _0x529cd8[0x1], _0x3beb51 = '0x' + _0x529cd8[0x2] + _0x529cd8[0x2], _0x45b76d = '0x' + _0x529cd8[0x3] + _0x529cd8[0x3]; else _0x529cd8[_0x22bc3d(0x55b)] == 0x7 && (_0x241d8c = '0x' + _0x529cd8[0x1] + _0x529cd8[0x2], _0x3beb51 = '0x' + _0x529cd8[0x3] + _0x529cd8[0x4], _0x45b76d = '0x' + _0x529cd8[0x5] + _0x529cd8[0x6]); _0x241d8c /= 0xff, _0x3beb51 /= 0xff, _0x45b76d /= 0xff; let _0x5703ab = Math[_0x22bc3d(0x908)](_0x241d8c, _0x3beb51, _0x45b76d), _0x1db004 = Math[_0x22bc3d(0x66e)](_0x241d8c, _0x3beb51, _0x45b76d), _0x5f3279 = _0x1db004 - _0x5703ab, _0x21ae42 = 0x0, _0x33ecf3 = 0x0, _0x133362 = 0x0; if (_0x5f3279 == 0x0) _0x21ae42 = 0x0; else { if (_0x1db004 == _0x241d8c) _0x21ae42 = (_0x3beb51 - _0x45b76d) / _0x5f3279 % 0x6; else { if (_0x1db004 == _0x3beb51) _0x21ae42 = (_0x45b76d - _0x241d8c) / _0x5f3279 + 0x2; else _0x21ae42 = (_0x241d8c - _0x3beb51) / _0x5f3279 + 0x4; } } _0x21ae42 = Math['round'](_0x21ae42 * 0x3c); if (_0x21ae42 < 0x0) _0x21ae42 += 0x168; return _0x133362 = (_0x1db004 + _0x5703ab) / 0x2, _0x33ecf3 = _0x5f3279 == 0x0 ? 0x0 : _0x5f3279 / (0x1 - Math[_0x22bc3d(0xc18)](0x2 * _0x133362 - 0x1)), _0x33ecf3 = +(_0x33ecf3 * 0x64)[_0x22bc3d(0x2c4)](0x1), _0x133362 = +(_0x133362 * 0x64)[_0x22bc3d(0x2c4)](0x1), { 'h': _0x21ae42, 's': _0x33ecf3, 'l': _0x133362 }; } function _0x593aeb() { const _0x311f7d = _0x2481c4; if (_0x311f7d(0xad1) === _0x311f7d(0xad1)) { const _0x29bfc2 = (_0x19265d, _0x103d2d, _0x4e5fbc) => { const _0x49985d = _0x311f7d, _0x5aa75b = document[_0x49985d(0x463)](_0x19265d); if (!_0x5aa75b) return; let _0xfd95dc = null; try { _0xfd95dc = JSON[_0x49985d(0x433)](localStorage[_0x49985d(0x6b4)](_0x103d2d) || '{}'); } catch { _0xfd95dc = {}; } _0x5aa75b['style'][_0x49985d(0x676)] = _0x49985d(0x7e0), _0x5aa75b[_0x49985d(0x80c)][_0x49985d(0x382)] = '', _0x5aa75b['style'][_0x49985d(0x36c)] = '', _0x5aa75b[_0x49985d(0x80c)][_0x49985d(0xaac)] = '', _0x5aa75b[_0x49985d(0x80c)][_0x49985d(0x83c)] = '', _0x5aa75b[_0x49985d(0x80c)]['transform'] = ''; if (typeof _0xfd95dc[_0x49985d(0x382)] === 'number' && typeof _0xfd95dc[_0x49985d(0x36c)] === _0x49985d(0x716)) _0x5aa75b[_0x49985d(0x80c)]['top'] = _0xfd95dc[_0x49985d(0x382)] + '%', _0x5aa75b['style']['left'] = _0xfd95dc[_0x49985d(0x36c)] + '%'; else { if ('meFPU' !== _0x49985d(0x5f2)) _0x2ff8ad[_0x49985d(0x356)] = _0x2738ba[_0x49985d(0x460)] === _0x49985d(0x3f9) ? '旁白' : _0x59adb6['speaker'], _0x532e78[_0x49985d(0x356)] = _0xa8fb66[_0x49985d(0x81d)], _0x125dd9[_0x49985d(0x460)] === _0x41a9f0[_0x49985d(0x3b3)] ? _0x527762(_0x39ea78, _0x2b8e9e['emotion']) : _0x1b2c57(_0x276a1f, _0x49985d(0x503)); else for (const _0x3ba525 in _0x4e5fbc) { 'bIcdf' !== 'bIcdf' ? _0x570c99[_0x49985d(0x763)] = _0x3a2b39[_0x49985d(0xbb5)] : _0x5aa75b[_0x49985d(0x80c)][_0x3ba525] = _0x4e5fbc[_0x3ba525]; } } }; _0x29bfc2(_0x311f7d(0x296), _0x311f7d(0x519), { 'top': '15%', 'left': _0x311f7d(0x302), 'transform': _0x311f7d(0xb10) }), _0x29bfc2(_0x311f7d(0xaf8), _0x311f7d(0x432), { 'top': '20%', 'right': '4%' }), _0x29bfc2(_0x311f7d(0x6bb), 'appIconPosition_app-user-profiles', { 'top': '20%', 'right': _0x311f7d(0x865) }), _0x29bfc2('app-settings', _0x311f7d(0xad4), { 'top': '8%', 'right': _0x311f7d(0x865) }), _0x29bfc2('app-world-book', 'appIconPosition_app-world-book', { 'top': '8%', 'right': '4%' }), _0x29bfc2(_0x311f7d(0x4db), _0x311f7d(0xa5e), { 'top': _0x311f7d(0x6c4), 'left': '5%' }), _0x29bfc2(_0x311f7d(0x6e8), _0x311f7d(0x2a6), { 'top': _0x311f7d(0x51b), 'left': '29%' }), _0x29bfc2('app-snoop', _0x311f7d(0x5c0), { 'top': '71%', 'left': '5%' }), _0x29bfc2(_0x311f7d(0x2c6), _0x311f7d(0x928), { 'top': _0x311f7d(0x6c4), 'left': _0x311f7d(0x2ad) }), _0x29bfc2(_0x311f7d(0x2f3), 'badgeState', { 'top': _0x311f7d(0x1d2), 'right': '5%' }), _0x29bfc2(_0x311f7d(0xa6d), _0x311f7d(0x5b9), { 'top': '8%', 'left': '5%' }); const _0x2bf187 = document[_0x311f7d(0x463)](_0x311f7d(0x640)); _0x2bf187 && (_0x2bf187['style'][_0x311f7d(0x676)] = 'absolute', _0x2bf187['style']['top'] = _0x311f7d(0x427), _0x2bf187['style'][_0x311f7d(0x36c)] = _0x311f7d(0x302), _0x2bf187[_0x311f7d(0x80c)][_0x311f7d(0x3e9)] = _0x311f7d(0xb10), _0x2bf187[_0x311f7d(0x80c)]['display'] = _0x311f7d(0x629)); const _0x265d2b = document['getElementById']('music-widget'); _0x265d2b && (_0x265d2b[_0x311f7d(0x80c)][_0x311f7d(0x676)] = _0x311f7d(0x7e0), _0x265d2b[_0x311f7d(0x80c)][_0x311f7d(0x382)] = _0x311f7d(0xbc6), _0x265d2b['style']['left'] = _0x311f7d(0x302), _0x265d2b[_0x311f7d(0x80c)][_0x311f7d(0x3e9)] = 'translateX(-50%)', _0x265d2b[_0x311f7d(0x80c)]['display'] = 'inline-block'); } else { const _0x4f50b6 = _0x3cb06d['createElement'](_0x311f7d(0xbdf)); _0x4f50b6[_0x311f7d(0x781)] = _0x311f7d(0x97c), _0x4f50b6['innerHTML'] = _0x311f7d(0x4d8) + (_0x167081[_0x311f7d(0xc0d)] || _0x52a966) + _0x311f7d(0x834) + _0x2ab3c9[_0x311f7d(0x48c)] + _0x311f7d(0x3e1) + _0x1144e4[_0x311f7d(0x2d1)] + _0x311f7d(0x810), _0x4f50b6[_0x311f7d(0x7dd)](_0x311f7d(0xbca))[_0x311f7d(0x752)] = () => _0x35a921(_0x311f7d(0xa1d)), _0x58bd88['appendChild'](_0x4f50b6); } } function _0x31689e() { const _0x49adf7 = _0x2481c4; if ('KtSzx' !== _0x49adf7(0x4e5)) { const _0x3dd255 = document['getElementById'](_0x49adf7(0x4c1)); _0x3dd255[_0x49adf7(0xb00)] = ''; const _0x16a303 = document[_0x49adf7(0x5a2)](_0x49adf7(0xae6)); _0x16a303[_0x49adf7(0xbe4)](_0x24085a => { const _0x3dfd89 = _0x49adf7; if (_0x3dfd89(0x6ba) === _0x3dfd89(0x6ba)) { const _0x4a9ddd = _0x24085a['id'], _0x3e2153 = _0x24085a['querySelector'](_0x3dfd89(0x310))[_0x3dfd89(0x356)], _0x569d3a = 'customIcon_' + _0x4a9ddd, _0x41dbff = localStorage[_0x3dfd89(0x6b4)](_0x569d3a), _0x278ca5 = document['createElement'](_0x3dfd89(0xbdf)); _0x278ca5[_0x3dfd89(0x781)] = _0x3dfd89(0xa2a), _0x278ca5[_0x3dfd89(0x80c)][_0x3dfd89(0x44d)] = _0x3dfd89(0x331), _0x278ca5['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_' + _0x4a9ddd + '\x22\x20src=\x22' + (_0x41dbff || 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7') + _0x3dfd89(0x2da) + _0x3e2153 + _0x3dfd89(0xbbf) + _0x4a9ddd + _0x3dfd89(0xbb9) + _0x4a9ddd + '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27' + _0x569d3a + _0x3dfd89(0x603), _0x3dd255[_0x3dfd89(0xa59)](_0x278ca5); const _0x80ed57 = document[_0x3dfd89(0x463)](_0x3dfd89(0x50e) + _0x4a9ddd); _0x80ed57[_0x3dfd89(0x582)]('change', async _0x316fb3 => { const _0x2bf23b = _0x3dfd89, _0x493f8a = _0x316fb3['target'][_0x2bf23b(0x4b6)][0x0]; if (!_0x493f8a) return; try { if (_0x2bf23b(0x800) !== _0x2bf23b(0x55a)) { const _0x366897 = await _0x4662c8(_0x493f8a); localStorage[_0x2bf23b(0x246)](_0x569d3a, _0x366897), document['getElementById'](_0x2bf23b(0xbaf) + _0x4a9ddd)[_0x2bf23b(0xb01)] = _0x366897, _0x16b4e1(); } else { _0x5c889c[_0x2bf23b(0x202)] = ''; return; } } catch (_0x3190e3) { _0x24537c(_0x2bf23b(0xbfa) + _0x3190e3[_0x2bf23b(0x9fa)]); } }); } else _0x4f1322[_0x3dfd89(0x6b6)] = _0x5de570[_0x3dfd89(0x607)][_0x3dfd89(0x4f8)], delete _0x1ddf45[_0x3dfd89(0x607)]['newAvatar']; }); } else _0x3262a5[_0x49adf7(0xa7b)] = _0x1ea1e2['scrollHeight']; } function _0x16b4e1() { const _0x2571b1 = _0x2481c4, _0x137967 = document['querySelectorAll'](_0x2571b1(0xae6)); _0x137967['forEach'](_0xd61a62 => { const _0x517779 = _0x2571b1; if (_0x517779(0x589) === 'LFDtL') { const _0x3480e9 = _0xd61a62['id'], _0x1cf6f7 = _0x517779(0x88a) + _0x3480e9, _0x42acc8 = localStorage[_0x517779(0x6b4)](_0x1cf6f7), _0x16d286 = _0xd61a62[_0x517779(0x7dd)](_0x517779(0x6f7)); if (_0x42acc8) _0x16d286[_0x517779(0xb00)] = '<img\x20src=\x22' + _0x42acc8 + _0x517779(0x3af); else { if (_0x517779(0x256) === _0x517779(0xbfb)) _0x40a62a['currentDate'] = new _0x2c4744(), _0x5736a7[_0x517779(0x94d)] = _0xa2a1e2(), _0xc0a64d(); else { const _0x431963 = document[_0x517779(0x7dd)]('#app-dock-bottom-left\x20#' + _0x3480e9 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x3480e9 + _0x517779(0x5ff))?.[_0x517779(0xb00)]; _0x431963 && (_0x16d286[_0x517779(0xb00)] = _0x431963); } } } else { const _0x6f068 = _0x290a97[_0x517779(0x463)]('global-player-play-pause-btn'); if (_0x6f068) _0x6f068[_0x517779(0x356)] = '▶'; } }); } function _0x3fe772() { const _0x72e1b4 = _0x2481c4, _0x23f61d = _0x5f0a6c[_0x72e1b4(0xb32)][_0x72e1b4(0x3be)](_0x10e5bc => _0x10e5bc['id'] === _0x5f0a6c[_0x72e1b4(0x64b)]), _0x384c3f = _0x168762(); let _0x1619b5 = []; if (_0x23f61d && _0x23f61d['posts']) { if (_0x72e1b4(0x329) !== _0x72e1b4(0x329)) { _0x559e14[_0x72e1b4(0xb00)] = _0x72e1b4(0x90d); return; } else { const _0x45cefd = _0x23f61d['posts']['filter'](_0x4c477c => _0x4c477c[_0x72e1b4(0xc02)] === _0x72e1b4(0xa1d) && _0x4c477c[_0x72e1b4(0xa18)])[_0x72e1b4(0x575)](_0x4cc6e5 => ({ ..._0x4cc6e5, 'source': 'feed' })); _0x1619b5[_0x72e1b4(0x1e6)](..._0x45cefd); } } if (_0x384c3f && _0x5f0a6c['conversationHistory']) { if ('WrucP' === _0x72e1b4(0xb23)) _0x203b9d['error']('保存壁纸失败:', _0x77a0c5), _0x4c9d6c(_0x72e1b4(0x95f) + _0x3001fd['message']); else { const _0x4e08d8 = _0x5f0a6c[_0x72e1b4(0xbc8)][_0x72e1b4(0x216)](_0x1e08e9 => _0x1e08e9[_0x72e1b4(0xc02)] === _0x72e1b4(0xa1d) && _0x1e08e9['playableUrl'])['map'](_0x389ba9 => ({ ..._0x389ba9, 'source': 'chat' })); _0x1619b5['push'](..._0x4e08d8); } } const _0x3e0469 = Array['from'](new Map(_0x1619b5[_0x72e1b4(0x575)](_0x4a1e00 => [_0x4a1e00['playableUrl'], _0x4a1e00]))[_0x72e1b4(0x268)]()); _0x5f0a6c[_0x72e1b4(0x282)] = _0x3e0469[_0x72e1b4(0x61a)]((_0x34e4e2, _0x2a2b00) => _0x2a2b00[_0x72e1b4(0x83a)] - _0x34e4e2[_0x72e1b4(0x83a)]); } function _0x22428f(_0xabd5cc) { const _0x1839bf = _0x2481c4; if (_0x1839bf(0x406) === _0x1839bf(0x406)) { if (_0xabd5cc < 0x0 || _0xabd5cc >= _0x1fe05f[_0x1839bf(0x55b)]) return; _0x1814ee = _0xabd5cc; const _0x3b68cd = _0x1fe05f[_0xabd5cc]; _0x29fd86[_0x1839bf(0xb01)] = _0x3b68cd[_0x1839bf(0xa18)] || _0x3b68cd[_0x1839bf(0xb0d)], _0x29fd86[_0x1839bf(0x77a)](), _0x3c9905(), _0xa80b74(); } else _0x310ffa['error']('准备群聊API数据时，读取图片失败:', _0x983890); } function _0x3c9905() { const _0x3114f4 = _0x1fe05f[_0x1814ee]; _0x2c2157(_0x3114f4); } function _0xa80b74() { const _0x406494 = _0x2481c4; try { localStorage[_0x406494(0x246)](_0x406494(0x24c), JSON[_0x406494(0x38f)]({ 'playlist': _0x5f0a6c[_0x406494(0x282)], 'currentIndex': _0x5f0a6c[_0x406494(0x5a5)] })); } catch (_0x5a335e) { if (_0x406494(0x72a) === _0x406494(0x72a)) console['error'](_0x406494(0x57b), _0x5a335e); else { if (_0x44c39f) { const _0x4564a5 = _0x120bc4[_0x406494(0x51e)](_0x549791); _0x382779[_0x406494(0xb01)] = _0x4564a5, _0x5b7f61[_0x406494(0x79e)] = () => { const _0xc2e280 = _0x406494; _0x55a3c8[_0xc2e280(0x768)](_0x4564a5); }; } else _0x1ac2ab[_0x406494(0x2c3)] = _0x406494(0x392); } } } function _0x464b66() { const _0x2e0ad2 = _0x2481c4; try { if ('NCIAC' === _0x2e0ad2(0x4ba)) { const _0x45a705 = localStorage[_0x2e0ad2(0x6b4)](_0x2e0ad2(0x24c)); if (_0x45a705) { const { playlist: _0x332d91, currentIndex: _0x1ee4e8 } = JSON[_0x2e0ad2(0x433)](_0x45a705); Array[_0x2e0ad2(0x9d7)](_0x332d91) && _0x332d91[_0x2e0ad2(0x55b)] > 0x0 && _0x1ee4e8 > -0x1 && (_0x2e0ad2(0x339) !== _0x2e0ad2(0x339) ? _0x1e0112(_0x2e0ad2(0x619) + _0x3d3b4f[_0x2e0ad2(0x9fa)]) : (_0x5f0a6c[_0x2e0ad2(0x282)] = _0x332d91, _0x5f0a6c[_0x2e0ad2(0x5a5)] = _0x1ee4e8, _0x5f0a6c[_0x2e0ad2(0x32f)] = ![], _0x3c9905())); } } else _0x4a9dfe['addEventListener']('click', () => { const _0x50ffc4 = _0x2e0ad2, _0x4f16b = _0x29745c[_0x50ffc4(0x433)](_0x4d9815[_0x50ffc4(0x607)][_0x50ffc4(0x5b1)][_0x50ffc4(0x219)](/&quot;/g, '\x22')), _0x3168bf = _0x503f07[_0x50ffc4(0x607)]['contactName'], _0x3c04d7 = _0x15406b[_0x50ffc4(0x607)][_0x50ffc4(0x8b8)]; _0x5c155a(_0x3168bf, _0x3c04d7, _0x4f16b); }); } catch (_0x2e2fed) { console[_0x2e0ad2(0x8d9)](_0x2e0ad2(0x46b), _0x2e2fed); } } function _0x4f35bc(_0x3b7c8b) { const _0x303aaf = _0x2481c4; if (window[_0x303aaf(0x5b0)]) clearTimeout(window[_0x303aaf(0x5b0)]); const _0x559017 = _0x3b7c8b[_0x303aaf(0x606)]['closest'](_0x303aaf(0x513)); if (!_0x559017) return; const _0x2a2047 = _0x559017[_0x303aaf(0x607)][_0x303aaf(0x83a)], _0x136709 = _0x559017[_0x303aaf(0x776)][_0x303aaf(0x999)](_0x303aaf(0x5c2)) ? 'user' : 'ai'; if (!_0x2a2047) return; const _0x3f292e = () => { window['diaryPressTimer'] = setTimeout(() => { const _0x2c9a2a = _0x5910; if ('uTUHu' !== _0x2c9a2a(0xb4b)) { if (_0x3b7c8b[_0x2c9a2a(0xc02)] === _0x2c9a2a(0x8f8)) _0x3b7c8b[_0x2c9a2a(0x422)](); _0x3690aa(parseInt(_0x2a2047, 0xa), _0x136709); } else _0x331f67[_0x2c9a2a(0xc02)] === 'group' && (_0x3cecc1[_0x2c9a2a(0x3d4)] = _0x36e37d[_0x2c9a2a(0x3d4)][_0x2c9a2a(0x216)](_0x541976 => _0x541976 !== _0xbb20d1)); }, 0x320); }, _0x1861c6 = () => { const _0x402e61 = _0x303aaf; if (window['diaryPressTimer']) clearTimeout(window[_0x402e61(0x5b0)]); }; document[_0x303aaf(0x582)](_0x303aaf(0x4eb), _0x1861c6, { 'once': !![] }), document[_0x303aaf(0x582)](_0x303aaf(0x4ec), _0x1861c6, { 'once': !![] }), document[_0x303aaf(0x582)](_0x303aaf(0x228), _0x1861c6, { 'once': !![] }), _0x3f292e(); } function _0x3690aa(_0x24fcfe, _0x53f93b) { const _0xe3f0bf = _0x2481c4, _0x217c6e = _0xe3f0bf(0x201) + _0x24fcfe; let _0xc8f737 = document[_0xe3f0bf(0x463)](_0x217c6e); if (_0xc8f737) return; const _0x2ad179 = _0xe3f0bf(0x6de) + _0x217c6e + _0xe3f0bf(0x792) + (_0x53f93b === 'ai' ? _0xe3f0bf(0x9b4) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20'; document[_0xe3f0bf(0xb9d)][_0xe3f0bf(0x793)]('beforeend', _0x2ad179); const _0x597220 = document[_0xe3f0bf(0x463)](_0x217c6e), _0x3275cc = () => _0x597220[_0xe3f0bf(0x554)](); _0x597220['querySelector'](_0xe3f0bf(0x9ce))['onclick'] = _0x3275cc, _0x597220[_0xe3f0bf(0x7dd)](_0xe3f0bf(0x423))[_0xe3f0bf(0x752)] = _0x3275cc, _0x597220[_0xe3f0bf(0x7dd)](_0xe3f0bf(0x98d))[_0xe3f0bf(0x752)] = () => { _0x278675(_0x24fcfe), _0x3275cc(); }, _0x53f93b === 'ai' && (_0x597220[_0xe3f0bf(0x7dd)](_0xe3f0bf(0x561))[_0xe3f0bf(0x752)] = () => { const _0x3ef46a = _0xe3f0bf; _0x3ef46a(0x576) === 'pYacn' ? _0x4d8766[_0x3ef46a(0x80c)][_0x3ef46a(0x21e)] = _0x3ef46a(0xaa3) : (_0x4dd092(_0x24fcfe), _0x3275cc()); }); } async function _0x278675(_0x32a122) { const _0xee7a2d = _0x2481c4, _0x2d590a = await _0x1ec207('确定要删除这篇日记吗？此操作不可撤销。'); if (!_0x2d590a) return; const _0x4d040d = _0x5f0a6c[_0xee7a2d(0x60c)][_0xee7a2d(0x3be)](_0x43f5d0 => _0x43f5d0[_0xee7a2d(0xba0)] === _0x5f0a6c[_0xee7a2d(0x504)]); if (!_0x4d040d) return; const _0x792b2e = _0x4d040d['entries']['findIndex'](_0x474f84 => _0x474f84['timestamp'] === _0x32a122); _0x792b2e > -0x1 && (_0x4d040d[_0xee7a2d(0x1d7)][_0xee7a2d(0x4a7)](_0x792b2e, 0x1), _0x5c772f(), _0x471491(), _0x24537c(_0xee7a2d(0x283))); } async function _0x4dd092(_0x568147) { const _0x478a13 = _0x2481c4; if (_0x478a13(0x635) !== 'mcIhL') { const _0x5dfbe7 = _0x5f0a6c['diaries'][_0x478a13(0x3be)](_0x4a6a4f => _0x4a6a4f[_0x478a13(0xba0)] === _0x5f0a6c[_0x478a13(0x504)]); if (!_0x5dfbe7) return; const _0x589310 = _0x5dfbe7[_0x478a13(0x1d7)][_0x478a13(0x461)](_0x2f226f => _0x2f226f[_0x478a13(0x83a)] === _0x568147); _0x589310 > -0x1 && (_0x478a13(0xa08) === _0x478a13(0x99e) ? _0x2ffa80['classList'][_0x478a13(0xb2c)](_0x478a13(0x846)) : (_0x5dfbe7[_0x478a13(0x1d7)][_0x478a13(0x4a7)](_0x589310, 0x1), _0x5c772f(), _0x471491(), await _0x39bab3())); } else _0x6df1e6('未找到可用模型。'); } function _0x4a8bba() { const _0x36ca90 = _0x2481c4, _0x5a7cf5 = document[_0x36ca90(0x463)](_0x36ca90(0x525)); _0x5a7cf5['innerHTML'] = ''; const _0x444081 = _0x5f0a6c[_0x36ca90(0x723)][_0x36ca90(0x216)](_0x511d7d => _0x5f0a6c[_0x36ca90(0xab8)]['some'](_0x16d2e0 => _0x16d2e0[_0x36ca90(0xc02)] === _0x36ca90(0x963) && _0x16d2e0['participantIds']['includes'](_0x511d7d['id']))); if (_0x444081['length'] === 0x0) { if (_0x36ca90(0x5cc) === _0x36ca90(0x47c)) _0x22b06c = [..._0xfd0cc8, ..._0x4306a4]; else { _0x5a7cf5[_0x36ca90(0xb00)] = _0x36ca90(0x6a5); return; } } _0x444081[_0x36ca90(0xbe4)](_0x138bd4 => { const _0x455ffd = _0x36ca90, _0x12cc43 = document['createElement']('li'); _0x12cc43[_0x455ffd(0x781)] = _0x455ffd(0x47b), _0x12cc43[_0x455ffd(0x607)][_0x455ffd(0x3ce)] = _0x138bd4['id'], _0x12cc43[_0x455ffd(0xb00)] = _0x455ffd(0x97b) + (_0x138bd4[_0x455ffd(0x6b6)] || _0x25d84a) + _0x455ffd(0x8d6) + _0x138bd4['name'] + _0x455ffd(0xa58), _0x12cc43[_0x455ffd(0x582)](_0x455ffd(0x3bf), () => { _0x4a019d(_0x138bd4['id']); }), _0x12cc43['querySelector'](_0x455ffd(0x9ac))[_0x455ffd(0x582)](_0x455ffd(0x3bf), () => { const _0x3ac8a8 = _0x455ffd; if (_0x3ac8a8(0x471) !== _0x3ac8a8(0x9c2)) _0x4a019d(_0x138bd4['id']); else { const _0x1eec13 = _0x6c8d13(_0x514886['getHours']())[_0x3ac8a8(0x690)](0x2, '0'), _0x47e58b = _0x50b1f6(_0x10942d['getMinutes']())[_0x3ac8a8(0x690)](0x2, '0'); _0x135c69['textContent'] = _0x1eec13 + ':' + _0x47e58b; const _0x43b9c7 = _0x3ad10e[_0x3ac8a8(0x567)]() + 0x1, _0x1b0c2b = _0x2f490c[_0x3ac8a8(0x60d)](), _0x95ddd1 = [_0x3ac8a8(0x957), _0x3ac8a8(0x685), _0x3ac8a8(0x483), _0x3ac8a8(0x8a7), '星期四', _0x3ac8a8(0x733), '星期六'][_0x958691[_0x3ac8a8(0x2c2)]()]; _0x309a2a[_0x3ac8a8(0x356)] = _0x43b9c7 + '月' + _0x1b0c2b + '日\x20' + _0x95ddd1; } }), _0x12cc43[_0x455ffd(0x7dd)](_0x455ffd(0xa75))['addEventListener'](_0x455ffd(0x3bf), _0x12435c => { const _0x2439a5 = _0x455ffd; _0x12435c[_0x2439a5(0x377)](), _0x3f415e(_0x138bd4['id']); }), _0x5a7cf5[_0x455ffd(0xa59)](_0x12cc43); }); } function _0x4a019d(_0x40842a) { const _0x1717d8 = _0x2481c4; if (_0x1717d8(0x4b9) === _0x1717d8(0x4b9)) { const _0x238a3d = _0x543c76(_0x40842a); if (!_0x238a3d) return; _0x5f0a6c[_0x1717d8(0x504)] = _0x40842a; const _0x32f4ed = _0x5f0a6c[_0x1717d8(0x60c)][_0x1717d8(0x3be)](_0x4650d1 => _0x4650d1[_0x1717d8(0xba0)] === _0x40842a), _0x525ccf = _0x32f4ed ? _0x32f4ed['entries'][_0x1717d8(0x55b)] : 0x0, _0x1cd7f1 = 0x2; _0x5f0a6c[_0x1717d8(0xa8a)] = Math[_0x1717d8(0x66e)](0x0, Math[_0x1717d8(0xb45)](_0x525ccf / _0x1cd7f1) - 0x1), document[_0x1717d8(0x463)]('diary-char-name-header')[_0x1717d8(0x356)] = _0x238a3d[_0x1717d8(0x3b3)] + _0x1717d8(0xb2f), _0x471491(), _0x1922fc(_0x1717d8(0x78d), 'diaryList'); } else { _0x4927dd && _0x3f6834[_0x1717d8(0x1e6)](_0x8df22c); _0x53a9e6 = {}; const _0x28d859 = _0x1ab28f['substring'](0x2), _0x204426 = _0x28d859[_0x1717d8(0x278)](/:\s(.+)/); if (_0x204426['length'] > 0x1) { const _0x119d91 = _0x204426[0x0][_0x1717d8(0x1e9)](), _0x5c4fac = _0x204426[0x1][_0x1717d8(0x1e9)]()['replace'](/^"|"$/g, ''); _0x4f0029[_0x119d91] = _0x5c4fac; } } } function _0x471491() { const _0xf70008 = _0x2481c4, _0x9de1f4 = document['getElementById'](_0xf70008(0x796)), _0x1617cb = document['getElementById'](_0xf70008(0x643)); _0x9de1f4[_0xf70008(0xb00)] = '', _0x1617cb['innerHTML'] = ''; const _0xda6862 = _0x48efd0() || { 'name': '我' }, _0x1e485c = _0x5f0a6c['diaries'][_0xf70008(0x3be)](_0x45a17b => _0x45a17b['characterId'] === _0x5f0a6c[_0xf70008(0x504)]); if (!_0x1e485c || !_0x1e485c[_0xf70008(0x1d7)] || _0x1e485c['entries'][_0xf70008(0x55b)] === 0x0) { _0x9de1f4[_0xf70008(0xb00)] = _0xf70008(0x721), _0x1617cb[_0xf70008(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', document['getElementById'](_0xf70008(0x428))[_0xf70008(0x582)](_0xf70008(0x3bf), _0x231d5b), document[_0xf70008(0x463)](_0xf70008(0x515))[_0xf70008(0x582)](_0xf70008(0x3bf), _0x39bab3); return; } const _0x12ef71 = 0x2, _0x58dce8 = [..._0x1e485c[_0xf70008(0x1d7)]][_0xf70008(0x61a)]((_0xc20729, _0x39c837) => _0xc20729['timestamp'] - _0x39c837['timestamp']), _0x3fdf91 = []; for (let _0x316924 = 0x0; _0x316924 < _0x58dce8[_0xf70008(0x55b)]; _0x316924 += _0x12ef71) { _0x3fdf91[_0xf70008(0x1e6)](_0x58dce8['slice'](_0x316924, _0x316924 + _0x12ef71)); } const _0x6c60f = _0x3fdf91[_0xf70008(0x55b)]; _0x3fdf91['forEach']((_0x3184a7, _0x1c4727) => { const _0x5cfdf9 = _0xf70008; if (_0x5cfdf9(0x5e9) === 'fOSHK') { _0x1add0b[_0x5cfdf9(0x202)] = '#\x20记录是空的，没什么好总结的。'; return; } else { const _0x3728a9 = document[_0x5cfdf9(0x58b)](_0x5cfdf9(0xbdf)); _0x3728a9[_0x5cfdf9(0x781)] = _0x5cfdf9(0xb28), _0x3728a9['id'] = _0x5cfdf9(0x8e5) + _0x1c4727, _0x1c4727 === _0x5f0a6c['diaryCurrentPage'] && _0x3728a9[_0x5cfdf9(0x776)]['add'](_0x5cfdf9(0xb73)), _0x3184a7['forEach'](_0xd54c52 => { const _0x574b3e = _0x5cfdf9, _0x516286 = _0xd54c52[_0x574b3e(0x65d)] === 'user' ? _0x574b3e(0x5c2) : 'ai', _0x36262d = _0xd54c52[_0x574b3e(0x65d)] === _0x574b3e(0x5c2) ? _0xda6862[_0x574b3e(0x3b3)] : _0x543c76(_0xd54c52[_0x574b3e(0x65d)])[_0x574b3e(0x3b3)], _0x112e0a = document[_0x574b3e(0x58b)]('div'); _0x112e0a[_0x574b3e(0x781)] = _0x574b3e(0x997) + _0x516286, _0x112e0a[_0x574b3e(0x607)][_0x574b3e(0x83a)] = _0xd54c52['timestamp'], _0x112e0a[_0x574b3e(0x80c)]['borderBottom'] = _0x574b3e(0x333), _0x112e0a[_0x574b3e(0x80c)]['paddingBottom'] = '0', _0x112e0a[_0x574b3e(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x36262d + _0x574b3e(0xbed) + new Date(_0xd54c52[_0x574b3e(0x83a)])[_0x574b3e(0x660)]('zh-CN') + _0x574b3e(0x911) + _0xd54c52[_0x574b3e(0x67c)]['replace'](/\n/g, _0x574b3e(0x229)) + _0x574b3e(0x52e), _0x3728a9[_0x574b3e(0xa59)](_0x112e0a); }), _0x9de1f4[_0x5cfdf9(0xa59)](_0x3728a9); } }), _0x1617cb[_0xf70008(0xb00)] = _0xf70008(0xa42) + (_0x5f0a6c['diaryCurrentPage'] + 0x1) + '\x20/\x20' + _0x6c60f + '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', document[_0xf70008(0x463)](_0xf70008(0x5ba))['disabled'] = _0x5f0a6c[_0xf70008(0xa8a)] === 0x0, document['getElementById']('diary-next-button')[_0xf70008(0xa7f)] = _0x5f0a6c[_0xf70008(0xa8a)] === _0x6c60f - 0x1, document[_0xf70008(0x463)]('diary-prev-button')[_0xf70008(0x582)]('click', _0x55b711), document[_0xf70008(0x463)]('diary-next-button')['addEventListener'](_0xf70008(0x3bf), _0x47a28c), document['getElementById'](_0xf70008(0x428))[_0xf70008(0x582)](_0xf70008(0x3bf), _0x231d5b), document[_0xf70008(0x463)]('diary-get-reply-button')[_0xf70008(0x582)](_0xf70008(0x3bf), _0x39bab3); } function _0x47a28c() { const _0x1dd6e9 = _0x2481c4; if ('qxDdN' !== _0x1dd6e9(0x839)) _0x4a67b9(); else { if (_0x5f0a6c[_0x1dd6e9(0x811)]) return; const _0x19bebf = _0x5f0a6c[_0x1dd6e9(0xa8a)], _0x2d7a0a = Math['ceil'](_0x5f0a6c[_0x1dd6e9(0x60c)]['find'](_0x38ce48 => _0x38ce48[_0x1dd6e9(0xba0)] === _0x5f0a6c[_0x1dd6e9(0x504)])[_0x1dd6e9(0x1d7)][_0x1dd6e9(0x55b)] / 0x2); if (_0x19bebf >= _0x2d7a0a - 0x1) return; _0x5f0a6c[_0x1dd6e9(0x811)] = !![]; const _0x5ba117 = _0x19bebf + 0x1, _0x50484a = document['getElementById'](_0x1dd6e9(0x8e5) + _0x19bebf), _0x5c139f = document[_0x1dd6e9(0x463)](_0x1dd6e9(0x8e5) + _0x5ba117); _0x50484a && _0x5c139f ? _0x1dd6e9(0xa51) === _0x1dd6e9(0xba3) ? _0x484d8b++ : (_0x5c139f[_0x1dd6e9(0x776)][_0x1dd6e9(0xb2c)](_0x1dd6e9(0x995)), _0x50484a[_0x1dd6e9(0x776)][_0x1dd6e9(0xb2c)](_0x1dd6e9(0xbb7)), _0x5c139f[_0x1dd6e9(0x776)][_0x1dd6e9(0xb2c)]('is-visible'), setTimeout(() => { const _0x1dcb07 = _0x1dd6e9; _0x50484a[_0x1dcb07(0x776)][_0x1dcb07(0x554)]('is-visible', _0x1dcb07(0xbb7)), _0x5c139f[_0x1dcb07(0x776)][_0x1dcb07(0x554)](_0x1dcb07(0x995)), _0x5f0a6c[_0x1dcb07(0xa8a)] = _0x5ba117, _0x471491(), _0x5f0a6c[_0x1dcb07(0x811)] = ![]; }, 0x2bc)) : _0x1dd6e9(0x337) !== _0x1dd6e9(0xb1b) ? _0x5f0a6c[_0x1dd6e9(0x811)] = ![] : _0xc491bd('正在为你切换新的歌曲...'); } } function _0x55b711() { const _0x57c2ad = _0x2481c4; if (_0x57c2ad(0x982) === 'vykoV') _0x10d004(_0x57c2ad(0x3e0) + _0x481c2c['message']); else { if (_0x5f0a6c[_0x57c2ad(0x811)]) return; const _0x23aa3c = _0x5f0a6c['diaryCurrentPage']; if (_0x23aa3c <= 0x0) return; _0x5f0a6c[_0x57c2ad(0x811)] = !![]; const _0x17d683 = _0x23aa3c - 0x1, _0xbff66d = document[_0x57c2ad(0x463)](_0x57c2ad(0x8e5) + _0x23aa3c), _0x42e180 = document['getElementById'](_0x57c2ad(0x8e5) + _0x17d683); _0xbff66d && _0x42e180 ? (_0x42e180['classList'][_0x57c2ad(0xb2c)]('is-entering-from-left'), _0xbff66d[_0x57c2ad(0x776)]['add'](_0x57c2ad(0x809)), _0x42e180[_0x57c2ad(0x776)][_0x57c2ad(0xb2c)](_0x57c2ad(0xb73)), setTimeout(() => { const _0x45a73e = _0x57c2ad; _0x45a73e(0x3da) !== _0x45a73e(0x3da) ? _0x5336f9['innerHTML'] = _0x45a73e(0x308) + _0xcd10d0 + _0x45a73e(0x391) + _0xa859fd + _0x45a73e(0x3c5) + _0x1a0002[_0x45a73e(0x48c)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x1dd7b1[_0x45a73e(0x2d1)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x1eeb8f[_0x45a73e(0x825)] + _0x45a73e(0x2e1) : (_0xbff66d[_0x45a73e(0x776)][_0x45a73e(0x554)](_0x45a73e(0xb73), 'is-exiting-right'), _0x42e180[_0x45a73e(0x776)][_0x45a73e(0x554)]('is-entering-from-left'), _0x5f0a6c[_0x45a73e(0xa8a)] = _0x17d683, _0x471491(), _0x5f0a6c[_0x45a73e(0x811)] = ![]); }, 0x2bc)) : _0x5f0a6c[_0x57c2ad(0x811)] = ![]; } } function _0x231d5b() { return new Promise(_0x422255 => { const _0x4b6ca5 = _0x5910, _0x4e653e = _0x4b6ca5(0x39e); document[_0x4b6ca5(0xb9d)][_0x4b6ca5(0x793)](_0x4b6ca5(0xb65), _0x4e653e); const _0x50af97 = document['getElementById'](_0x4b6ca5(0x6f5)), _0x4e2642 = document['getElementById'](_0x4b6ca5(0x880)), _0x462ee8 = document[_0x4b6ca5(0x463)](_0x4b6ca5(0x2b2)), _0x2ae3b1 = document[_0x4b6ca5(0x463)](_0x4b6ca5(0x313)), _0xc24a1e = _0x50af97['querySelector'](_0x4b6ca5(0x9ce)), _0x1e3e34 = () => { const _0x331eed = _0x4b6ca5; _0x50af97[_0x331eed(0x554)](), _0x422255(); }; _0x462ee8[_0x4b6ca5(0x752)] = () => { const _0x2f6bba = _0x4b6ca5; if ('LkPDg' === 'MHkby') { const _0x257861 = _0x1ac6fb[_0x2f6bba(0x7ae)]['find'](_0x49cbb3 => _0x49cbb3['id'] === _0x39c936); if (!_0x257861) return; _0x4ceac7[_0x2f6bba(0x463)](_0x2f6bba(0x309))['value'] = _0x257861['id'], _0x7b884[_0x2f6bba(0x463)](_0x2f6bba(0x469))[_0x2f6bba(0x356)] = _0x2f6bba(0x2cf), _0x2174ab[_0x2f6bba(0x463)](_0x2f6bba(0x569))['value'] = _0x257861[_0x2f6bba(0x3b3)], _0x257861['avatar'] ? _0x4eeafa[_0x2f6bba(0x80c)][_0x2f6bba(0x4b2)] = _0x2f6bba(0x205) + _0x257861[_0x2f6bba(0x6b6)] + '\x27)' : _0x12414c[_0x2f6bba(0x80c)][_0x2f6bba(0x4b2)] = 'url(\x27' + _0x378eb5 + '\x27)', _0x298dfe[_0x2f6bba(0x463)](_0x2f6bba(0x9ae))[_0x2f6bba(0x202)] = _0x257861[_0x2f6bba(0x91d)], _0x3c58ec['style']['display'] = _0x257861['id'] === _0x29f379[_0x2f6bba(0xbb5)] ? 'none' : 'block', _0x2af8ae[_0x2f6bba(0x463)](_0x2f6bba(0x6e2))[_0x2f6bba(0x80c)]['display'] = _0x2f6bba(0x629); } else _0x3740c5(_0x4e2642[_0x2f6bba(0x202)]), _0x1e3e34(); }, _0x2ae3b1[_0x4b6ca5(0x752)] = _0x1e3e34, _0xc24a1e[_0x4b6ca5(0x752)] = _0x1e3e34; }); } function _0x3740c5(_0x150fb4) { const _0x44239c = _0x2481c4, _0x2ee66f = _0x150fb4[_0x44239c(0x1e9)](); if (!_0x2ee66f || !_0x5f0a6c['activeDiaryCharacterId']) return; let _0x15e127 = _0x5f0a6c[_0x44239c(0x60c)]['find'](_0x45727b => _0x45727b[_0x44239c(0xba0)] === _0x5f0a6c[_0x44239c(0x504)]); !_0x15e127 && (_0x15e127 = { 'characterId': _0x5f0a6c['activeDiaryCharacterId'], 'entries': [] }, _0x5f0a6c[_0x44239c(0x60c)]['push'](_0x15e127)); _0x15e127[_0x44239c(0x1d7)][_0x44239c(0x1e6)]({ 'timestamp': Date[_0x44239c(0xb71)](), 'author': _0x44239c(0x5c2), 'content': _0x2ee66f }), _0x5c772f(); const _0x59b3b0 = _0x15e127[_0x44239c(0x1d7)][_0x44239c(0x55b)]; _0x5f0a6c[_0x44239c(0xa8a)] = Math[_0x44239c(0xb45)](_0x59b3b0 / 0x2) - 0x1, _0x471491(); } async function _0x39bab3() { const _0x20ccf0 = _0x2481c4, _0x588f5f = _0x5f0a6c[_0x20ccf0(0x60c)][_0x20ccf0(0x3be)](_0x54c735 => _0x54c735[_0x20ccf0(0xba0)] === _0x5f0a6c[_0x20ccf0(0x504)]), _0x398746 = _0x5f0a6c[_0x20ccf0(0x504)], _0x3fac6 = _0x543c76(_0x398746); if (!_0x3fac6 || _0x5f0a6c[_0x20ccf0(0x5f8)]) return; _0x2aa27a(!![], _0x20ccf0(0x623)), _0x5f0a6c[_0x20ccf0(0x5f8)] = !![]; let _0x5a44e2 = []; try { if (_0x20ccf0(0xae8) !== _0x20ccf0(0x3a9)) { const _0x3e796 = _0x48efd0() || { 'name': '你' }, _0x5c2163 = _0x17f027(_0x398746), { omniText: _0x8722aa } = _0x27c1ec(_0x398746, _0x5f0a6c[_0x20ccf0(0x1e1)]); let _0x921fe3 = ''; if (_0x3fac6[_0x20ccf0(0xb2b)] && _0x3fac6[_0x20ccf0(0xb2b)]['length'] > 0x0) { const _0x46c190 = _0x3fac6['linkedWorldBookIds'][_0x20ccf0(0x575)](_0x5ec038 => _0x5f0a6c[_0x20ccf0(0x7ad)][_0x20ccf0(0x3be)](_0xafb2ff => _0xafb2ff['id'] === _0x5ec038))['filter'](Boolean)['map'](_0x35e6be => '\x0a\x0a##\x20世界书条目:\x20' + _0x35e6be[_0x20ccf0(0x3b3)] + '\x0a' + _0x35e6be[_0x20ccf0(0x67c)])[_0x20ccf0(0x3b9)](''); if (_0x46c190) _0x921fe3 = _0x20ccf0(0x25c) + _0x46c190; } const _0x22178d = _0x3e796[_0x20ccf0(0x91d)] ? _0x20ccf0(0x1e4) + _0x3e796['name'] + _0x20ccf0(0x281) + _0x3e796[_0x20ccf0(0x91d)] : '', _0x1e16c0 = _0x1a340e(); let _0x5a748e = _0x20ccf0(0x4cb); if (_0x588f5f && _0x588f5f[_0x20ccf0(0x1d7)]) { if ('ixoBm' !== _0x20ccf0(0x501)) { const _0x543239 = _0x588f5f[_0x20ccf0(0x1d7)][_0x20ccf0(0x216)](_0x5c1ccc => _0x5c1ccc['author'] === _0x20ccf0(0x5c2))['pop'](); _0x543239 && (_0x5a748e = _0x543239[_0x20ccf0(0x67c)]); } else _0x315d6c = _0x2b548b['name'] || '我', _0x28060c = _0x20ccf0(0xaf0); } const _0x4c98c6 = _0x20ccf0(0x255) + _0x3fac6[_0x20ccf0(0x3b3)] + _0x20ccf0(0x4d2) + _0x3e796[_0x20ccf0(0x3b3)] + '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（' + _0x3e796[_0x20ccf0(0x3b3)] + _0x20ccf0(0xa1a) + _0x5a748e + _0x20ccf0(0xbf9) + _0x3fac6[_0x20ccf0(0x91d)] + '\x0a' + _0x22178d + '\x0a' + _0x921fe3 + _0x20ccf0(0xa27) + new Date()['toLocaleString'](_0x20ccf0(0x2ed), { 'dateStyle': _0x20ccf0(0x872), 'timeStyle': _0x20ccf0(0x455) }) + _0x20ccf0(0x695) + _0x380a73(new Date(_0x588f5f?.[_0x20ccf0(0x1d7)]?.['at'](-0x1)?.[_0x20ccf0(0x83a)] || Date[_0x20ccf0(0xb71)]())) + _0x20ccf0(0x50d) + (_0x8722aa || _0x20ccf0(0x742)) + _0x20ccf0(0x718) + (_0x1e16c0 || '最近没有动态记录。') + _0x20ccf0(0x97f); _0x5a44e2 = [{ 'role': 'system', 'content': _0x4c98c6 }, { 'role': _0x20ccf0(0x5c2), 'content': _0x20ccf0(0x3d9) }]; const _0x374187 = await _0x550e3c(_0x5a44e2); if (_0x374187) { let _0x919687 = _0x5f0a6c[_0x20ccf0(0x60c)][_0x20ccf0(0x3be)](_0x131972 => _0x131972['characterId'] === _0x398746); !_0x919687 && (_0x919687 = { 'characterId': _0x398746, 'entries': [] }, _0x5f0a6c[_0x20ccf0(0x60c)][_0x20ccf0(0x1e6)](_0x919687)); _0x919687[_0x20ccf0(0x1d7)][_0x20ccf0(0x1e6)]({ 'timestamp': Date[_0x20ccf0(0xb71)](), 'author': _0x398746, 'content': _0x374187 }), _0x5c772f(); const _0x5fdbb0 = _0x919687[_0x20ccf0(0x1d7)][_0x20ccf0(0x55b)]; _0x5f0a6c[_0x20ccf0(0xa8a)] = Math[_0x20ccf0(0xb45)](_0x5fdbb0 / 0x2) - 0x1, _0x471491(); } } else { if (_0x152fe5) _0x46a7ae['style'][_0x20ccf0(0x4b2)] = _0x20ccf0(0x205) + _0x75afa1[_0x20ccf0(0x51e)](_0x34d63b) + '\x27)'; } } catch (_0x2b3b17) { if (_0x20ccf0(0xa74) !== _0x20ccf0(0xa74)) { if (!_0x26fbc5) return; _0x1e7c67[_0x63f497] = _0x5611ca, _0x14429f[_0x51ccb9]['querySelector'](_0x20ccf0(0x645))[_0x20ccf0(0x356)] = _0x2a28de[_0x20ccf0(0x3b3)], _0x4547fb[_0x58c1c0][_0x20ccf0(0x776)][_0x20ccf0(0xb2c)](_0x20ccf0(0x910)), _0x38e703(); } else _0x24537c('生成日记失败:\x20' + _0x2b3b17[_0x20ccf0(0x9fa)]); } finally { if (_0x20ccf0(0x287) !== _0x20ccf0(0x287)) { const _0xb843ac = _0x43aef3[_0x20ccf0(0x278)](/:\s|：\s/); if (_0xb843ac[_0x20ccf0(0x55b)] === 0x2) { const _0x3862b2 = _0xb843ac[0x0][_0x20ccf0(0x1e9)](), _0xa42f38 = _0xb843ac[0x1][_0x20ccf0(0x1e9)](), _0x221a57 = { '歌名': _0x20ccf0(0x7c2), '艺术家': '歌手', '专辑': '专辑' }; _0x221a57[_0x3862b2] && (_0x10da28[_0x221a57[_0x3862b2]] = _0xa42f38); } } else _0x2aa27a(![]), _0x5f0a6c[_0x20ccf0(0x5f8)] = ![]; } } function _0x45f251() { const _0x583013 = _0x2481c4, _0x26113 = document[_0x583013(0x463)](_0x583013(0x72b)), _0x1ec7d2 = document[_0x583013(0x463)](_0x583013(0x3c0)), _0x969127 = document[_0x583013(0x7dd)](_0x583013(0x5c7)); _0x5f0a6c[_0x583013(0x9f8)] === _0x583013(0x618) ? _0x583013(0x5dc) === _0x583013(0x949) ? (_0xa4b3c9['preferences'][_0x583013(0x779)] = _0x282753[_0x583013(0x8a6)], _0x4ac9db(), _0x5c513f()) : (_0x26113['style'][_0x583013(0x6df)] = _0x583013(0x333), _0x1ec7d2['style'][_0x583013(0x6df)] = 'block') : (_0x26113[_0x583013(0x80c)][_0x583013(0x6df)] = 'block', _0x1ec7d2[_0x583013(0x80c)]['display'] = _0x583013(0x333)), _0x969127[_0x583013(0x80c)]['display'] = 'block'; } function _0x35fd2e() { const _0x1343a0 = _0x2481c4, _0x4a502a = document[_0x1343a0(0x463)](_0x1343a0(0x314)), _0x51586c = document[_0x1343a0(0x463)](_0x1343a0(0x9d6)); if (_0x5f0a6c['activeMeetingScriptQueue'][_0x1343a0(0x55b)] > 0x0) { if (_0x1343a0(0x70f) !== _0x1343a0(0x70f)) _0x2bca6d['preventDefault'](); else { const _0x9d94e0 = _0x5f0a6c[_0x1343a0(0x591)][_0x1343a0(0x4d7)](); _0x4a502a[_0x1343a0(0x356)] = _0x9d94e0['speaker'] === _0x1343a0(0x3f9) ? '旁白' : _0x9d94e0['speaker'], _0x51586c[_0x1343a0(0x356)] = _0x9d94e0[_0x1343a0(0x81d)], _0x9d94e0['speaker'] !== 'narrator' && (_0x1343a0(0x78b) === _0x1343a0(0x78b) ? _0x38a0a3(_0x5f0a6c['activeMeetingCharId'], _0x9d94e0[_0x1343a0(0x7d7)]) : _0x3239fd('获取模型失败:\x20' + _0x43b628['message'] + _0x1343a0(0x6a1))); } } else { if (_0x1343a0(0xb69) !== _0x1343a0(0x52a)) { const _0x147170 = _0x5f0a6c[_0x1343a0(0x4ef)][_0x5f0a6c[_0x1343a0(0x5c3)]]; if (_0x147170 && _0x147170['length'] > 0x0) { _0x5f0a6c[_0x1343a0(0x591)] = [..._0x147170]; const _0x2f9d6e = _0x5f0a6c[_0x1343a0(0x591)][_0x1343a0(0x4d7)](); _0x4a502a[_0x1343a0(0x356)] = _0x2f9d6e[_0x1343a0(0x460)] === _0x1343a0(0x3f9) ? '旁白' : _0x2f9d6e[_0x1343a0(0x460)], _0x51586c[_0x1343a0(0x356)] = _0x2f9d6e[_0x1343a0(0x81d)], _0x2f9d6e['speaker'] !== _0x1343a0(0x3f9) && _0x38a0a3(_0x5f0a6c[_0x1343a0(0x5c3)], _0x2f9d6e[_0x1343a0(0x7d7)]); } else { if ('njVxG' === _0x1343a0(0x7b5)) { const _0x3490c3 = _0x20fed6[_0x1343a0(0xab8)][_0x1343a0(0x3be)](_0x12370d => _0x12370d['activeListenSession'] && _0x12370d[_0x1343a0(0xc16)][_0x1343a0(0x40c)]); _0x3490c3 && (_0x3490c3[_0x1343a0(0xc16)] = null, _0x400de4(), _0x194155(_0x1343a0(0x407)), _0x1e21fc(), _0x553560['classList'][_0x1343a0(0x554)]('show'), _0x30b5cd(() => _0x33d466[_0x1343a0(0x80c)][_0x1343a0(0x6df)] = _0x1343a0(0x333), 0x12c)); } else _0x4a502a[_0x1343a0(0x356)] = '旁白', _0x51586c[_0x1343a0(0x356)] = _0x1343a0(0xbc5); } } else _0x4e6e35 = _0x2b83a6[_0x1343a0(0x433)](_0x441e9b); } } async function _0x38a0a3(_0x3c9207, _0x315b45) { const _0x2580ff = _0x2481c4, _0x26d6a6 = document['getElementById'](_0x2580ff(0x4ea)), _0x275171 = document[_0x2580ff(0x463)](_0x2580ff(0x566)), _0x929d51 = _0x543c76(_0x3c9207), _0x3e6e21 = _0x929d51?.[_0x2580ff(0xc38)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0xe7090b = 0x50 * _0x3e6e21[_0x2580ff(0x42e)]; _0x275171['style'][_0x2580ff(0x389)] = _0xe7090b + '%', _0x275171['style'][_0x2580ff(0x5af)] = _0xe7090b + '%', _0x275171['style']['left'] = _0x3e6e21['x'] + '%', _0x275171['style'][_0x2580ff(0x382)] = _0x3e6e21['y'] + '%', _0x275171[_0x2580ff(0x80c)][_0x2580ff(0x3e9)] = _0x2580ff(0x457), _0x275171[_0x2580ff(0x80c)]['bottom'] = _0x2580ff(0x876); const _0x56fa53 = ['normal', _0x2580ff(0x223), _0x2580ff(0x74d), _0x2580ff(0xb8e), _0x2580ff(0x383)], _0x546b20 = _0x56fa53[_0x2580ff(0xa1c)](_0x315b45) ? _0x315b45 : _0x2580ff(0x503); try { if (_0x2580ff(0x921) === _0x2580ff(0x48b)) { if (!_0x88a28e[_0x2580ff(0x9d7)](_0x45837f)) return '<p>格式错误</p>'; if (_0x6edf8f[_0x2580ff(0x55b)] === 0x0) return _0x2580ff(0x8d1); return _0x22a660['sort']((_0x1ee6fa, _0x2a3f18) => new _0x3ef5b1(_0x2a3f18['timestamp']) - new _0x1f541c(_0x1ee6fa['timestamp'])), _0x2580ff(0x82c) + _0x2e3306[_0x2580ff(0x575)](_0x4b239e => _0x2580ff(0x29d) + (_0x4b239e[_0x2580ff(0x804)] || _0x2580ff(0x9e1)) + _0x2580ff(0xb84) + (_0x4b239e[_0x2580ff(0x514)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>' + (_0x4b239e[_0x2580ff(0x83a)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x2580ff(0x3b9)]('') + _0x2580ff(0x26b); } else { const _0x3db470 = await _0x393cae(_0x2580ff(0x395) + _0x546b20 + '_' + _0x3c9207); if (_0x3db470) { if (_0x26d6a6[_0x2580ff(0xb01)] && _0x26d6a6['style']['opacity'] !== '0') _0x26d6a6[_0x2580ff(0x80c)][_0x2580ff(0x801)] = 0x0, setTimeout(() => { const _0x1e625c = _0x2580ff; if (_0x1e625c(0x328) === _0x1e625c(0x328)) _0x26d6a6[_0x1e625c(0xb01)] = URL[_0x1e625c(0x51e)](_0x3db470), _0x26d6a6[_0x1e625c(0x80c)]['opacity'] = 0x1; else { if (_0x2cf285) _0x540dc2(_0xe73c3); const _0x25e1fd = _0x4a3858['target']['closest']('.todo-item,\x20.important-day-item'); if (!_0x25e1fd) return; const _0x47c612 = _0x25e1fd[_0x1e625c(0x607)]['id']; if (!_0x47c612) return; const _0x4c5245 = () => { _0x40d2e1 = _0x230871(() => { const _0x3c25a6 = _0x5910; if (_0x3970bc[_0x3c25a6(0xc02)] === _0x3c25a6(0x8f8)) _0x154569[_0x3c25a6(0x422)](); _0x185f37(_0x47c612); }, 0x320); }, _0x1b58a1 = () => { if (_0x1b53c6) _0x42afe3(_0x4af4af); }; _0x16cbe5[_0x1e625c(0x582)](_0x1e625c(0x4eb), _0x1b58a1, { 'once': !![] }), _0x2452ee[_0x1e625c(0x582)]('touchend', _0x1b58a1, { 'once': !![] }), _0x5a2ec3[_0x1e625c(0x582)]('touchcancel', _0x1b58a1, { 'once': !![] }), _0x5c6bdf[_0x1e625c(0x582)](_0x1e625c(0x9d4), _0x1b58a1, { 'once': !![] }), _0x4c5245(); } }, 0x96); else { if (_0x2580ff(0x66f) !== _0x2580ff(0x66f)) { const _0x49cb96 = new _0x17cf16(), _0x59ccde = _0x16dbb4[_0x2580ff(0x463)](_0x2580ff(0x28b)), _0x3e079d = _0xc5793f[_0x2580ff(0x463)](_0x2580ff(0x90b)); if (_0x59ccde && _0x3e079d) { const _0x53a820 = _0x4f9ff8(_0x49cb96[_0x2580ff(0xc10)]())[_0x2580ff(0x690)](0x2, '0'), _0x4f440c = _0xffbae4(_0x49cb96[_0x2580ff(0x88b)]())[_0x2580ff(0x690)](0x2, '0'); _0x59ccde[_0x2580ff(0x356)] = _0x53a820 + ':' + _0x4f440c; const _0x527904 = _0x49cb96[_0x2580ff(0x567)]() + 0x1, _0x1ce999 = _0x49cb96[_0x2580ff(0x60d)](), _0xb68ac2 = [_0x2580ff(0x957), _0x2580ff(0x685), _0x2580ff(0x483), _0x2580ff(0x8a7), _0x2580ff(0x522), '星期五', '星期六'][_0x49cb96[_0x2580ff(0x2c2)]()]; _0x3e079d[_0x2580ff(0x356)] = _0x527904 + '月' + _0x1ce999 + '日\x20' + _0xb68ac2; } } else _0x26d6a6[_0x2580ff(0xb01)] = URL[_0x2580ff(0x51e)](_0x3db470), _0x26d6a6['style'][_0x2580ff(0x801)] = 0x1; } } else { if ('bjUNC' === 'VNgPL') _0x1ff232 = _0x2580ff(0xba6) + _0xd920b8[_0x2580ff(0x3b3)] + _0x2580ff(0x96f); else { const _0x23d519 = await _0x393cae(_0x2580ff(0xa23) + _0x3c9207); _0x26d6a6[_0x2580ff(0xb01)] = _0x23d519 ? URL['createObjectURL'](_0x23d519) : ''; } } } } catch (_0x2f939a) { if (_0x2580ff(0x349) === 'VRDDM') { if (_0x5ca29c) _0x5adce4(_0x6b6ad4); } else console[_0x2580ff(0x8d9)](_0x2580ff(0x8c5), _0x2f939a), _0x26d6a6[_0x2580ff(0xb01)] = ''; } } let _0x10db46 = ![], _0x40e703 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x39b028 = document[_0x2481c4(0x463)](_0x2481c4(0x2d4)), _0x1242c2 = document[_0x2481c4(0x463)](_0x2481c4(0xbbe)), _0x2ba37c = document['getElementById'](_0x2481c4(0x28d)), _0xc90733 = document['getElementById'](_0x2481c4(0xc32)), _0x18e21d = document['getElementById'](_0x2481c4(0x667)), _0x21b801 = document[_0x2481c4(0x463)](_0x2481c4(0x566)), _0xd55716 = document['getElementById'](_0x2481c4(0x73c)), _0x351e09 = document['getElementById']('meeting-main-content'); let _0x225920 = {}; function _0x4d9ce1() { const _0x6b0e72 = _0x2481c4, _0x12de85 = _0x543c76(_0x5f0a6c[_0x6b0e72(0x5c3)]); if (!_0x12de85) return; _0x10db46 = !![], _0x18e21d['style']['display'] = _0x6b0e72(0x629); const _0xff5569 = _0x12de85[_0x6b0e72(0xc38)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x6b0e72(0x463)](_0x6b0e72(0x3e6))['value'] = _0xff5569['x'], document['getElementById'](_0x6b0e72(0x244))['value'] = _0xff5569['y'], document[_0x6b0e72(0x463)](_0x6b0e72(0x63c))[_0x6b0e72(0x202)] = _0xff5569[_0x6b0e72(0x42e)] * 0x64, _0x225920 = { ..._0xff5569 }, document[_0x6b0e72(0x463)](_0x6b0e72(0x4ca))['style'][_0x6b0e72(0x6df)] = _0x6b0e72(0x333), document[_0x6b0e72(0x463)]('galgame-sprite-adjust-ui')[_0x6b0e72(0x80c)][_0x6b0e72(0x6df)] = _0x6b0e72(0x333); } function _0x42b30d(_0x33dfa1 = ![]) { const _0x4ab6cb = _0x2481c4; _0x10db46 = ![], _0x18e21d['style'][_0x4ab6cb(0x6df)] = _0x4ab6cb(0x333), document[_0x4ab6cb(0x463)]('galgame-textbox-container')['style'][_0x4ab6cb(0x6df)] = _0x4ab6cb(0x629), document[_0x4ab6cb(0x463)]('galgame-sprite-adjust-ui')[_0x4ab6cb(0x80c)]['display'] = _0x4ab6cb(0x629); if (!_0x33dfa1) { const _0x348b23 = _0x543c76(_0x5f0a6c[_0x4ab6cb(0x5c3)]); _0x348b23 && (_0x348b23[_0x4ab6cb(0xc38)] = _0x225920, _0x38a0a3(_0x5f0a6c['activeMeetingCharId'], _0x4ab6cb(0x503))); } } function _0x26de43() { const _0x4739e2 = _0x2481c4, _0x2c7625 = _0x543c76(_0x5f0a6c[_0x4739e2(0x5c3)]); if (!_0x2c7625) return; const _0x567fe1 = parseFloat(document['getElementById'](_0x4739e2(0x3e6))[_0x4739e2(0x202)]), _0x12af9a = parseFloat(document[_0x4739e2(0x463)](_0x4739e2(0x244))[_0x4739e2(0x202)]), _0x397fa7 = parseFloat(document[_0x4739e2(0x463)](_0x4739e2(0x63c))['value']) / 0x64; _0x2c7625['spriteTransform'] = { 'x': _0x567fe1, 'y': _0x12af9a, 'scale': _0x397fa7 }, _0x5c772f(), _0x24537c(_0x4739e2(0x240)), _0x42b30d(!![]); } function _0x53e5c1() { const _0x2e7c5a = _0x2481c4; if (_0x2e7c5a(0x4ce) === _0x2e7c5a(0xb07)) { const _0x2c48f1 = _0x9fef27[_0x2e7c5a(0x58b)]('div'); _0x2c48f1[_0x2e7c5a(0x781)] = _0x2e7c5a(0x953) + _0x427440; const _0x5abf08 = _0x333c56[_0x2e7c5a(0x58b)](_0x2e7c5a(0x938)); _0x5abf08[_0x2e7c5a(0xb01)] = _0x19de3, _0x5abf08[_0x2e7c5a(0x781)] = _0x2e7c5a(0x6b6); const _0x4dee24 = _0x2afbff[_0x2e7c5a(0x58b)](_0x2e7c5a(0xbdf)); return _0x4dee24[_0x2e7c5a(0x781)] = _0x2e7c5a(0x248), _0x1aadc1 && (_0x4dee24[_0x2e7c5a(0x80c)][_0x2e7c5a(0x4b2)] = _0x2e7c5a(0x205) + _0x2ef2b8 + '\x27)'), _0x2c48f1[_0x2e7c5a(0xa59)](_0x5abf08), _0x2c48f1['appendChild'](_0x4dee24), _0x2c48f1; } else _0x1ec207(_0x2e7c5a(0x6ec))[_0x2e7c5a(0x794)](_0x2f574f => { const _0x52c692 = _0x2e7c5a; if ('QInxr' !== 'JnSAi') { if (_0x2f574f) { const _0x4ce930 = _0x543c76(_0x5f0a6c[_0x52c692(0x5c3)]); _0x4ce930 && ('ZEqkT' !== _0x52c692(0xaec) ? _0x326276() : (delete _0x4ce930[_0x52c692(0xc38)], _0x5c772f(), _0x38a0a3(_0x4ce930['id'], 'normal'), _0x24537c(_0x52c692(0xa06)), _0x42b30d(!![]))); } } else _0x1cd22a = _0x101328['filter'](_0xfb988c => _0xfb988c && typeof _0xfb988c === _0x52c692(0x340) && typeof _0xfb988c[_0x52c692(0x579)] === _0x52c692(0xbc2) && typeof _0xfb988c[_0x52c692(0x67c)] !== _0x52c692(0xbe6)); }); } function _0xaf8f43() { const _0x1771ba = _0x2481c4; if (!_0x10db46) return; const _0x18d0cb = _0x5f0a6c['activeMeetingCharId'], _0x154ddb = _0x543c76(_0x18d0cb); if (!_0x154ddb) return; const _0x58e171 = parseFloat(document['getElementById'](_0x1771ba(0x3e6))[_0x1771ba(0x202)]), _0x5f3756 = parseFloat(document[_0x1771ba(0x463)]('sprite-slider-y')[_0x1771ba(0x202)]), _0x22ef5e = parseFloat(document[_0x1771ba(0x463)]('sprite-slider-scale')['value']) / 0x64; _0x154ddb['spriteTransform'] = { 'x': _0x58e171, 'y': _0x5f3756, 'scale': _0x22ef5e }; const _0x2563cf = document[_0x1771ba(0x463)](_0x1771ba(0x566)), _0x2ccafc = 0x50 * _0x22ef5e; _0x2563cf[_0x1771ba(0x80c)][_0x1771ba(0x389)] = _0x2ccafc + '%', _0x2563cf[_0x1771ba(0x80c)]['width'] = _0x2ccafc + '%', _0x2563cf['style'][_0x1771ba(0x36c)] = _0x58e171 + '%', _0x2563cf[_0x1771ba(0x80c)][_0x1771ba(0x382)] = _0x5f3756 + '%', _0x2563cf['style'][_0x1771ba(0x3e9)] = _0x1771ba(0x457); } document[_0x2481c4(0x463)](_0x2481c4(0x3e6))[_0x2481c4(0x582)]('input', _0xaf8f43), document['getElementById'](_0x2481c4(0x244))[_0x2481c4(0x582)](_0x2481c4(0xb75), _0xaf8f43), document['getElementById'](_0x2481c4(0x63c))['addEventListener'](_0x2481c4(0xb75), _0xaf8f43), _0x39b028[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x4d9ce1), _0x1242c2['addEventListener'](_0x2481c4(0x3bf), _0x26de43), _0x2ba37c[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => _0x42b30d(![])), _0xc90733[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x53e5c1); function _0x4ba40c(_0x491c12) { const _0x343a8f = _0x2481c4, _0x36e1ee = _0x543c76(_0x491c12); if (!_0x36e1ee) return; const _0x31dbba = _0x5f0a6c[_0x343a8f(0xab8)]['find'](_0xe4fcca => _0xe4fcca[_0x343a8f(0xc02)] === _0x343a8f(0x963) && _0xe4fcca['participantIds'][_0x343a8f(0xa1c)](_0x491c12)), _0x594c2a = _0x1f5ce5(_0x31dbba['id']), _0x1e236c = _0x5f0a6c[_0x343a8f(0xbc8)][_0x343a8f(0x216)](_0x3760fe => _0x3760fe[_0x343a8f(0x300)])[_0x343a8f(0x2c8)](), _0x1d93a1 = document[_0x343a8f(0x463)](_0x343a8f(0x314)), _0x342510 = document[_0x343a8f(0x463)](_0x343a8f(0x9d6)); let _0x15208f = null; if (_0x1e236c) { if (_0x343a8f(0x3b4) !== _0x343a8f(0x5be)) { if (_0x1e236c[_0x343a8f(0x579)] === _0x343a8f(0x41d)) { if (_0x343a8f(0xbdd) === _0x343a8f(0xbdd)) { const _0x4380b5 = _0x5f0a6c[_0x343a8f(0x4ef)][_0x491c12]; _0x4380b5 && _0x4380b5['length'] > 0x0 && ('IZJtL' === _0x343a8f(0x57e) ? _0x15ceeb[_0x343a8f(0xbc8)] = [] : _0x15208f = _0x4380b5['at'](-0x1)); } else _0x7c0c68['error']('加载见面背景失败\x20for\x20' + _0x4ffd1d + ':', _0x5c98eb), _0x1fb0c6[_0x343a8f(0x80c)]['backgroundImage'] = _0x343a8f(0x333); } else _0x343a8f(0x604) !== _0x343a8f(0x604) ? _0x11e3bf = _0x415297[_0x343a8f(0x7ae)][_0x343a8f(0x3be)](_0x264a2e => _0x264a2e['id'] === _0x58a89f[_0x343a8f(0xbb5)]) : _0x15208f = { 'speaker': _0x594c2a[_0x343a8f(0x3b3)], 'line': _0x1e236c[_0x343a8f(0x67c)], 'emotion': _0x343a8f(0x503) }; } else { _0x491423(); const _0xe529a7 = (_0x39c30f['apiSettings'][_0x343a8f(0x869)] || '')[_0x343a8f(0xa1c)](_0x4c21df); _0x52b0a7[_0x343a8f(0xa7f)] = _0xe529a7, _0x397a34(_0x343a8f(0x599), 'home'); } } _0x15208f ? _0x343a8f(0x468) === _0x343a8f(0x468) ? (_0x1d93a1[_0x343a8f(0x356)] = _0x15208f[_0x343a8f(0x460)] === _0x343a8f(0x3f9) ? '旁白' : _0x15208f[_0x343a8f(0x460)], _0x342510[_0x343a8f(0x356)] = _0x15208f['line'], _0x15208f[_0x343a8f(0x460)] === _0x36e1ee[_0x343a8f(0x3b3)] ? _0x38a0a3(_0x491c12, _0x15208f[_0x343a8f(0x7d7)]) : _0x38a0a3(_0x491c12, _0x343a8f(0x503))) : (_0xe46d96(![]), _0x2d04f8[_0x343a8f(0x202)] = '') : (_0x1d93a1[_0x343a8f(0x356)] = _0x36e1ee[_0x343a8f(0x3b3)], _0x342510[_0x343a8f(0x356)] = _0x343a8f(0x39f), _0x38a0a3(_0x491c12, _0x343a8f(0x503))); } function _0x9e0a60() { const _0x532cdf = _0x2481c4; if (_0x532cdf(0x64e) !== _0x532cdf(0x64e)) { const _0x36c237 = _0x532b30[_0x532cdf(0x58b)]('li'); _0x36c237[_0x532cdf(0x781)] = _0x532cdf(0x47b), _0x36c237[_0x532cdf(0x607)][_0x532cdf(0x3ce)] = _0x2d4f86['id'], _0x36c237[_0x532cdf(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x9815e7[_0x532cdf(0x6b6)] || _0x5d87fd) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x576995[_0x532cdf(0x3b3)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x36c237[_0x532cdf(0x582)]('click', () => { _0x40a2fd(_0x5d17c7['id']); }), _0x36c237['querySelector'](_0x532cdf(0x9ac))[_0x532cdf(0x582)](_0x532cdf(0x3bf), () => { _0x3f949f(_0xf8054['id']); }), _0x36c237[_0x532cdf(0x7dd)](_0x532cdf(0xa75))[_0x532cdf(0x582)]('click', _0xbc61d4 => { const _0x37a026 = _0x532cdf; _0xbc61d4[_0x37a026(0x377)](), _0x35aae0(_0x189f3e['id']); }), _0x18d097['appendChild'](_0x36c237); } else { const _0x58c5ae = new Date(), _0x5268e8 = document['getElementById'](_0x532cdf(0xa33)), _0x73a233 = document[_0x532cdf(0x463)](_0x532cdf(0x43f)); if (_0x5268e8 && _0x73a233) { if (_0x532cdf(0xa70) !== _0x532cdf(0xa70)) { const _0x408761 = _0x512189[_0x532cdf(0x58b)](_0x532cdf(0xbdf)); _0x408761[_0x532cdf(0x781)] = _0x532cdf(0xa29), _0x408761[_0x532cdf(0xb00)] = _0x532cdf(0x76a) + _0x34c65e['svg'] + _0x532cdf(0xbbb) + _0x13670c['name'] + _0x532cdf(0x42b), _0x408761[_0x532cdf(0x582)]('click', () => _0x23b25f(_0x3a5c8b['id'], _0x4de16c[_0x532cdf(0x3b3)])), _0x2270c6[_0x532cdf(0x542)] === 'dock' ? _0x38659e[_0x532cdf(0xa59)](_0x408761) : _0xbaf6ad['appendChild'](_0x408761); } else { const _0x5e6762 = String(_0x58c5ae[_0x532cdf(0xc10)]())[_0x532cdf(0x690)](0x2, '0'), _0x54769c = String(_0x58c5ae[_0x532cdf(0x88b)]())[_0x532cdf(0x690)](0x2, '0'); _0x5268e8['textContent'] = _0x5e6762 + ':' + _0x54769c; const _0x3fd653 = _0x58c5ae[_0x532cdf(0x567)]() + 0x1, _0xb05cf8 = _0x58c5ae[_0x532cdf(0x60d)](), _0x314780 = [_0x532cdf(0x957), '星期一', _0x532cdf(0x483), _0x532cdf(0x8a7), _0x532cdf(0x522), _0x532cdf(0x733), _0x532cdf(0xbe1)][_0x58c5ae[_0x532cdf(0x2c2)]()]; _0x73a233[_0x532cdf(0x356)] = _0x3fd653 + '月' + _0xb05cf8 + '日\x20' + _0x314780; } } } } const _0x27b625 = document[_0x2481c4(0x463)]('listen-together-modal'), _0x85e23d = document[_0x2481c4(0x463)]('chat-listen-together-button'), _0x369cc0 = document[_0x2481c4(0x463)](_0x2481c4(0x764)), _0x20ff32 = document[_0x2481c4(0x463)](_0x2481c4(0x827)), _0x360699 = document[_0x2481c4(0x463)](_0x2481c4(0xaba)), _0x29fd86 = document[_0x2481c4(0x463)]('unified-audio-player'), _0x3f286d = document['getElementById'](_0x2481c4(0x6f1)), _0x580ca4 = document[_0x2481c4(0x463)](_0x2481c4(0x52b)), _0x3b69f4 = document[_0x2481c4(0x463)]('lt-ui-lyrics-container'); let _0x50b204 = []; async function _0x171c39() { const _0x1807c5 = _0x2481c4; if (!_0x5f0a6c[_0x1807c5(0x1e1)]) return; _0x360699[_0x1807c5(0xb00)] = _0x1807c5(0x531), _0x27b625[_0x1807c5(0x776)][_0x1807c5(0xb2c)](_0x1807c5(0x940)); const _0x5cb22f = await _0x3a8ec3(); if (_0x5cb22f[_0x1807c5(0x55b)] === 0x0) { if (_0x1807c5(0xaed) !== 'lKutD') { const _0x8ea031 = _0x20b143[_0x1807c5(0x723)][_0x1807c5(0x3be)](_0x19b171 => _0x19b171['id'] === _0x4de893); _0x8ea031 && _0x56cce8[_0x1807c5(0xac1)](_0x8ea031, _0x388779); } else { _0x360699[_0x1807c5(0xb00)] = _0x1807c5(0x371); return; } } _0x360699[_0x1807c5(0xb00)] = '', _0x5cb22f['forEach'](_0xc44e54 => { const _0x6d823d = _0x1807c5; if ('TFOPd' === _0x6d823d(0x668)) { const _0x302b28 = _0x5e7860[_0x6d823d(0x58b)](_0x6d823d(0xbdf)); _0x302b28[_0x6d823d(0x781)] = _0x6d823d(0x97c), _0x302b28[_0x6d823d(0xb00)] = _0x6d823d(0x923), _0x302b28[_0x6d823d(0x7dd)](_0x6d823d(0xbca))['onclick'] = () => _0x49a15e('image'), _0x207db4['appendChild'](_0x302b28), _0x486075(_0x208cd3)[_0x6d823d(0x794)](_0x52234a => { const _0x2ded86 = _0x6d823d, _0x5c0d51 = _0x2d5767[_0x2ded86(0x463)](_0x2ded86(0x9be)); _0x5c0d51 && _0x52234a && (_0x5c0d51[_0x2ded86(0xb01)] = _0x3bab16[_0x2ded86(0x51e)](_0x52234a)); }); } else { const _0x4b9131 = document[_0x6d823d(0x58b)](_0x6d823d(0xbdf)); _0x4b9131[_0x6d823d(0x781)] = _0x6d823d(0x625); const _0x497a5a = _0xc44e54[_0x6d823d(0xa53)] ? URL[_0x6d823d(0x51e)](_0xc44e54[_0x6d823d(0xa53)]) : _0x25d84a; _0x4b9131[_0x6d823d(0xb00)] = _0x6d823d(0x3d8) + _0x497a5a + _0x6d823d(0x417) + (_0xc44e54[_0x6d823d(0x85d)][_0x6d823d(0x7c2)] || _0x6d823d(0x3df)) + _0x6d823d(0x755) + (_0xc44e54['info']['歌手'] || _0x6d823d(0x454)) + _0x6d823d(0x7c7), _0x4b9131[_0x6d823d(0x582)](_0x6d823d(0x3bf), () => { const _0x5e16d5 = _0x6d823d; _0x5e16d5(0x8d2) !== 'EmBAu' ? (_0x21bc50(_0x5e0374), _0xda4912(_0x5e16d5(0x571) + _0x112787[_0x5e16d5(0x3b3)] + '”已删除。'), _0x3bd9ce(_0x5e16d5(0x83e), _0x5e16d5(0xaa5)), _0xffc274(![])) : _0x543b05(_0xc44e54); }), _0x360699[_0x6d823d(0xa59)](_0x4b9131); } }); } function _0x48a15d() { const _0x1b9515 = _0x2481c4; _0x27b625[_0x1b9515(0x776)][_0x1b9515(0x554)](_0x1b9515(0x940)); } async function _0x543b05(_0x1b5a77) { const _0x2fbbbf = _0x2481c4; if (!_0x5f0a6c[_0x2fbbbf(0x1e1)] || !_0x1b5a77) return; let _0x2b2dac = null; if (_0x1b5a77[_0x2fbbbf(0xa53)]) { if (_0x2fbbbf(0x316) !== _0x2fbbbf(0x316)) _0x356e15[_0x2fbbbf(0x1e6)](_0x1aac9a['slice'](_0x27ba44, _0x24967c + _0x4657cd)); else try { 'TKHcs' !== _0x2fbbbf(0x785) ? (_0x2b2dac = 'music_cover_' + Date[_0x2fbbbf(0xb71)]() + '_' + Math[_0x2fbbbf(0x642)](), await _0x4d5a5e(_0x2b2dac, _0x1b5a77[_0x2fbbbf(0xa53)])) : _0x586109[_0x2fbbbf(0x49c)](_0x2fbbbf(0xc1b), _0x2fbbbf(0xbdb)); } catch (_0x384b81) { console[_0x2fbbbf(0x8d9)]('在“一起听”邀请中，净化封面失败:', _0x384b81); } } const _0x479b33 = { 'role': _0x2fbbbf(0x5c2), 'type': 'listen-together-invite', 'content': _0x2fbbbf(0x375) + _0x1b5a77[_0x2fbbbf(0x85d)][_0x2fbbbf(0x7c2)] + ']', 'songId': _0x1b5a77['id'], 'songName': _0x1b5a77['info']['歌曲名称'], 'artist': _0x1b5a77[_0x2fbbbf(0x85d)]['歌手'], 'coverId': _0x2b2dac, 'timestamp': Date[_0x2fbbbf(0xb71)]() }; _0x5f0a6c[_0x2fbbbf(0xbc8)][_0x2fbbbf(0x1e6)](_0x479b33), _0x351209(), _0x1a8cc0(), _0x48a15d(), setTimeout(_0x4a615f, 0x64); } _0x85e23d[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x171c39), _0x369cc0['addEventListener'](_0x2481c4(0x3bf), _0x48a15d), _0x20ff32[_0x2481c4(0x582)]('click', _0x48a15d); async function _0x883f72(_0x39e43b, _0xd1927c, _0x1608d3) { const _0x796cb3 = _0x2481c4; if (_0x796cb3(0x318) !== 'rNpKg') { const _0x3248c2 = _0x5f0a6c[_0x796cb3(0xab8)][_0x796cb3(0x3be)](_0x27068a => _0x27068a[_0x796cb3(0xc16)] && _0x27068a[_0x796cb3(0xc16)][_0x796cb3(0x40c)]), _0x5a55d6 = _0x168762(); if (_0x3248c2 && _0x3248c2['id'] !== _0x5a55d6['id']) _0x796cb3(0x91e) === _0x796cb3(0x8d8) ? _0x44e550['getElementById'](_0x796cb3(0xad8))['style']['setProperty'](_0x796cb3(0x3ed), _0x796cb3(0x9a3) + _0x23d3d7 + ')') : (_0x3248c2[_0x796cb3(0xc16)] = null, _0x24537c(_0x796cb3(0x5e3)), _0x5c772f()); else _0x3248c2 && _0x3248c2['id'] === _0x5a55d6['id'] && (_0x796cb3(0x539) !== _0x796cb3(0x659) ? _0x24537c(_0x796cb3(0xa6f)) : _0x3dd0d3[_0x796cb3(0xb01)] && (_0x48cb3f[_0x796cb3(0x33f)] ? _0x1872ac[_0x796cb3(0x77a)]() : _0x1e1374[_0x796cb3(0x639)]())); _0x2aa27a(!![], '正在连接同步频道...'); if (!_0x5a55d6) { _0x2aa27a(![]), _0x24537c(_0x796cb3(0x7c9)); return; } const _0x78638d = await _0x602038(_0x39e43b); if (!_0x78638d) { if (_0x796cb3(0xae4) !== _0x796cb3(0xae4)) { const _0x4cf3f6 = _0x5a5d07[_0x796cb3(0x433)](_0x5d91c5[_0x796cb3(0x607)][_0x796cb3(0x5b1)]['replace'](/&quot;/g, '\x22')), _0x40fd54 = _0x41e324[_0x796cb3(0x607)][_0x796cb3(0xafe)], _0x1f88ce = _0x1996cb[_0x796cb3(0x607)][_0x796cb3(0x8b8)]; _0x339c78(_0x40fd54, _0x1f88ce, _0x4cf3f6); } else { _0x2aa27a(![]), _0x24537c(_0x796cb3(0x9eb)); return; } } _0x5a55d6[_0x796cb3(0xc16)] = { 'isActive': !![], 'songId': _0x39e43b, 'leaderId': _0x796cb3(0x5c2), 'songName': _0x78638d[_0x796cb3(0x85d)][_0x796cb3(0x7c2)], 'artist': _0x78638d['info']['歌手'], 'cover': _0x78638d['cover'] }, _0x5c772f(), document['getElementById'](_0x796cb3(0x6d9))[_0x796cb3(0xb01)] = _0x78638d[_0x796cb3(0xa53)] ? URL[_0x796cb3(0x51e)](_0x78638d[_0x796cb3(0xa53)]) : _0x25d84a, document['getElementById'](_0x796cb3(0x8ce))['textContent'] = _0x78638d[_0x796cb3(0x85d)]['歌曲名称'], document[_0x796cb3(0x463)](_0x796cb3(0xc04))[_0x796cb3(0x356)] = _0x78638d['info']['歌手'], _0x2777ff(_0x78638d), _0x3f286d['style'][_0x796cb3(0x6df)] = _0x796cb3(0x1df), setTimeout(() => _0x3f286d[_0x796cb3(0x776)][_0x796cb3(0xb2c)](_0x796cb3(0x940)), 0xa), _0x1608d3[_0x796cb3(0xb00)] = _0x796cb3(0xbb4) + _0x1608d3[_0x796cb3(0x7dd)](_0x796cb3(0x94e))['outerHTML'], _0x5f0a6c['conversationHistory'][_0xd1927c] && (_0x5f0a6c[_0x796cb3(0xbc8)][_0xd1927c][_0x796cb3(0x2de)] = !![], _0x351209()), _0x2aa27a(![]), _0x3d6b4e(_0x39e43b, [_0x39e43b]), _0x2c2157(_0x78638d, !![]); } else { const _0x4bbae9 = _0x145d12[_0x796cb3(0x98e)](_0x440a8, _0x796cb3(0xb8d)), _0x42805c = _0x4bbae9[_0x796cb3(0xb08)](_0x2e23e7), _0x4ad9f1 = _0x42805c[_0x796cb3(0x7a6)](_0x553393); _0x4ad9f1[_0x796cb3(0x241)] = () => _0xbe0d87(_0x4ad9f1[_0x796cb3(0x77c)] ? _0x4ad9f1[_0x796cb3(0x77c)][_0x796cb3(0xb2a)] : null), _0x4ad9f1[_0x796cb3(0x4d1)] = () => _0x491f3b(_0x4ad9f1[_0x796cb3(0x8d9)]); } } function _0x122702() { const _0x34aaf7 = _0x2481c4; if ('ZWTAa' === _0x34aaf7(0x3fc)) _0x4e4e8a(_0x3e29c6['id']); else { const _0x5754ea = _0x5f0a6c['chats'][_0x34aaf7(0x3be)](_0x3de87e => _0x3de87e[_0x34aaf7(0xc16)] && _0x3de87e[_0x34aaf7(0xc16)][_0x34aaf7(0x40c)]); _0x5754ea && (_0x5754ea[_0x34aaf7(0xc16)] = null, _0x5c772f(), _0x24537c(_0x34aaf7(0x407)), _0x2c2157(), _0x3f286d[_0x34aaf7(0x776)]['remove'](_0x34aaf7(0x940)), setTimeout(() => _0x3f286d[_0x34aaf7(0x80c)][_0x34aaf7(0x6df)] = _0x34aaf7(0x333), 0x12c)); } } function _0x29138d(_0x328784) { const _0x2846ad = _0x2481c4; if (_0x2846ad(0xac0) !== _0x2846ad(0x70d)) { if (!_0x328784) return []; const _0x54756b = _0x328784[_0x2846ad(0x278)]('\x0a'), _0x9a8983 = [], _0x4b332d = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x352fad of _0x54756b) { const _0x8406db = _0x352fad['match'](_0x4b332d); if (_0x8406db) { const _0x2a9cc6 = parseInt(_0x8406db[0x1], 0xa), _0x51589d = parseInt(_0x8406db[0x2], 0xa), _0x38b6aa = parseInt(_0x8406db[0x3], 0xa) * (_0x8406db[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x462efa = _0x2a9cc6 * 0x3c + _0x51589d + _0x38b6aa / 0x3e8, _0x3acf68 = _0x352fad['replace'](_0x4b332d, '')[_0x2846ad(0x1e9)](); _0x3acf68 && _0x9a8983[_0x2846ad(0x1e6)]({ 'time': _0x462efa, 'text': _0x3acf68 }); } } return _0x9a8983; } else return _0xa61695['log']('找不到旧的存档，无需救援。'), 0x0; } function _0x2777ff(_0x2c022e) { const _0x350ab8 = _0x2481c4; _0x50b204 = _0x29138d(_0x2c022e[_0x350ab8(0x86b)]), _0x3b69f4[_0x350ab8(0xb00)] = ''; if (_0x50b204['length'] === 0x0) { if ('ntuCE' !== 'ltCPx') { _0x3b69f4[_0x350ab8(0xb00)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } else _0x596c9a[_0x350ab8(0xa0c)]['push']({ 'senderId': _0x9fe9a4['id'], 'kind': _0x350ab8(0xbec), 'sticker': _0x2fed45 }); } _0x50b204[_0x350ab8(0xbe4)]((_0x5204a8, _0x1a4fba) => { const _0x2db5e9 = _0x350ab8, _0x21e25b = document[_0x2db5e9(0x58b)]('p'); _0x21e25b[_0x2db5e9(0x356)] = _0x5204a8[_0x2db5e9(0x3a1)], _0x21e25b['id'] = 'lyric-line-' + _0x1a4fba, _0x3b69f4['appendChild'](_0x21e25b); }); } function _0xea3614(_0xe271f1, _0x2e0141, _0x2b098d, _0x10ef3c) { const _0x2862b4 = _0x2481c4, _0x2274e3 = (_0x10ef3c - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0xe271f1 + _0x2b098d * Math[_0x2862b4(0x277)](_0x2274e3), 'y': _0x2e0141 + _0x2b098d * Math[_0x2862b4(0x1fe)](_0x2274e3) }; } function _0x4c6822(_0x3e5a95) { const _0x36d491 = _0x2481c4, _0xe3c90a = _0x36d491(0xbc4), _0x561614 = document[_0x36d491(0xac3)](_0xe3c90a, 'svg'), _0x45364a = 0xfa, _0x3117fa = _0x45364a / 0x2, _0x4ad75b = _0x45364a / 0x2, _0x197334 = _0x45364a / 0x2 - 0x14; _0x561614[_0x36d491(0x88c)]('width', _0x36d491(0x944)), _0x561614[_0x36d491(0x88c)]('height', _0x36d491(0x944)), _0x561614[_0x36d491(0x88c)]('viewBox', '0\x200\x20' + _0x45364a + '\x20' + _0x45364a); const _0xfa2ecb = Object[_0x36d491(0x268)](_0x3e5a95)[_0x36d491(0x818)]((_0x2135ff, _0x55e924) => _0x2135ff + _0x55e924, 0x0); if (_0xfa2ecb === 0x0) return _0x561614; let _0x1d4d78 = -0x5a; const _0x2649c3 = [_0x36d491(0xa40), '#ffcc66', _0x36d491(0x41a), _0x36d491(0x4ab), _0x36d491(0x3f6), _0x36d491(0x4aa), _0x36d491(0x7eb), '#ff8c66']; let _0x3bb167 = 0x0; for (const _0x220da6 in _0x3e5a95) { const _0x42d70a = _0x3e5a95[_0x220da6]; if (_0x42d70a <= 0x0) continue; const _0xd47ee6 = _0x42d70a / _0xfa2ecb * 0x168, _0x1110b8 = _0x1d4d78 + _0xd47ee6, _0x5d66b1 = _0xea3614(_0x3117fa, _0x4ad75b, _0x197334, _0x1110b8), _0x372a62 = _0xea3614(_0x3117fa, _0x4ad75b, _0x197334, _0x1d4d78), _0x1bba53 = _0xd47ee6 > 0xb4 ? '1' : '0', _0x877f1f = ['M', _0x5d66b1['x'], _0x5d66b1['y'], 'A', _0x197334, _0x197334, 0x0, _0x1bba53, 0x1, _0x372a62['x'], _0x372a62['y'], 'L', _0x3117fa, _0x4ad75b, 'Z'][_0x36d491(0x3b9)]('\x20'), _0x25ad36 = document['createElementNS'](_0xe3c90a, 'path'); _0x25ad36['setAttribute']('d', _0x877f1f), _0x25ad36['setAttribute'](_0x36d491(0xbcc), _0x2649c3[_0x3bb167 % _0x2649c3[_0x36d491(0x55b)]]), _0x3bb167++; const _0x4d7df1 = document[_0x36d491(0xac3)](_0xe3c90a, _0x36d491(0x879)); _0x4d7df1[_0x36d491(0x356)] = _0x220da6 + ':\x20' + _0x42d70a[_0x36d491(0x2c4)](0x2) + '\x20(' + (_0x42d70a / _0xfa2ecb * 0x64)[_0x36d491(0x2c4)](0x1) + '%)', _0x25ad36[_0x36d491(0xa59)](_0x4d7df1), _0x561614['appendChild'](_0x25ad36), _0x1d4d78 = _0x1110b8; } return _0x561614; } function _0x5dbd6b() { const _0x5514f3 = _0x2481c4; if (_0x5514f3(0x842) !== _0x5514f3(0x4c3)) { if (_0x50b204[_0x5514f3(0x55b)] === 0x0) return; const _0x2a8d5b = _0x29fd86[_0x5514f3(0x7f4)]; let _0x5c1a3c = -0x1; for (let _0x4eb1e8 = 0x0; _0x4eb1e8 < _0x50b204[_0x5514f3(0x55b)]; _0x4eb1e8++) { if (_0x2a8d5b >= _0x50b204[_0x4eb1e8][_0x5514f3(0x630)]) _0x5c1a3c = _0x4eb1e8; else { if ('ZIGZH' === _0x5514f3(0x8a4)) { const _0x4fe195 = _0x3b3f5d[0x0][_0x5514f3(0x1e9)](), _0x129a38 = _0x5a29f2[0x1][_0x5514f3(0x1e9)]()['replace'](/^"|"$/g, ''); _0x59f1f0[_0x4fe195] = _0x129a38; } else break; } } if (_0x5c1a3c !== -0x1) { if ('pLSrH' !== _0x5514f3(0x92c)) _0x474e86 = _0x4d0efd[_0x5514f3(0x58b)](_0x5514f3(0x80c)), _0x51a648['id'] = _0x5514f3(0x683) + _0x24bb61['id'], _0x18fcd7[_0x5514f3(0x2cc)]['appendChild'](_0x434a26); else { const _0x255dd3 = _0x3b69f4[_0x5514f3(0x5a2)]('p'); _0x255dd3[_0x5514f3(0xbe4)](_0x61ccd4 => _0x61ccd4[_0x5514f3(0x776)][_0x5514f3(0x554)](_0x5514f3(0x8ef))); const _0x23629f = document['getElementById']('lyric-line-' + _0x5c1a3c); _0x23629f && (_0x23629f[_0x5514f3(0x776)][_0x5514f3(0xb2c)](_0x5514f3(0x8ef)), _0x23629f[_0x5514f3(0x63b)]({ 'behavior': _0x5514f3(0x2ac), 'block': _0x5514f3(0x545) })); } } } else { const _0x461842 = { ..._0x352a86 }; return _0x461842[_0x5514f3(0x6b6)] && _0x461842[_0x5514f3(0x6b6)][_0x5514f3(0x595)](_0x5514f3(0x28a)) && delete _0x461842['avatar'], _0x461842; } } _0x580ca4[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x18200d = _0x2481c4; if (_0x18200d(0x53b) === 'gmPLG') _0x3f286d[_0x18200d(0x776)]['remove']('show'), setTimeout(() => _0x3f286d[_0x18200d(0x80c)][_0x18200d(0x6df)] = _0x18200d(0x333), 0x12c); else { const _0x365a0c = _0x54d0fa[_0x18200d(0x98e)](_0x5c432e, _0x18200d(0x775)), _0x57da63 = _0x365a0c[_0x18200d(0xb08)](_0x14003c), _0x191043 = _0x57da63[_0x18200d(0x71e)]({ 'id': _0x2fcc89, 'blob': _0x2c3757 }); _0x191043[_0x18200d(0x241)] = () => _0x5bcc85(_0x191043['result']), _0x191043[_0x18200d(0x4d1)] = () => _0xa5787c(_0x191043[_0x18200d(0x8d9)]); } }), document[_0x2481c4(0x463)](_0x2481c4(0xb92))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0xf1f8a4 = _0x2481c4; if (_0xf1f8a4(0x4f6) === _0xf1f8a4(0x4f6)) { if (_0x5f0a6c[_0xf1f8a4(0x9a5)] && _0x5f0a6c[_0xf1f8a4(0x9a5)][_0xf1f8a4(0x40c)]) { if ('eUWjJ' !== _0xf1f8a4(0x24f)) _0x3f286d[_0xf1f8a4(0x80c)][_0xf1f8a4(0x6df)] = _0xf1f8a4(0x1df), setTimeout(() => _0x3f286d[_0xf1f8a4(0x776)][_0xf1f8a4(0xb2c)](_0xf1f8a4(0x940)), 0xa); else return '今天\x20' + _0xdb71db; } } else _0x383f3e(_0x11acad, _0x3ab845[_0xf1f8a4(0x606)]['files'][0x0]); }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0xafa), _0x5dbd6b); const _0x46148c = document['getElementById'](_0x2481c4(0xb6d)), _0x37aafb = document[_0x2481c4(0x463)](_0x2481c4(0x662)), _0x3d7bb6 = document['getElementById']('widget-prev-btn'); _0x46148c[_0x2481c4(0x582)]('click', () => { const _0x12f18b = _0x2481c4; _0x12f18b(0x62d) === 'joUQg' ? _0x5ddc8b(_0x12f18b(0x72e) + _0x2dd2a8['message']) : _0x29fd86[_0x12f18b(0xb01)] && (_0x29fd86['paused'] ? _0x12f18b(0xa92) !== _0x12f18b(0x3cd) ? _0x29fd86[_0x12f18b(0x77a)]() : _0x19a310(_0x12f18b(0x72e) + _0x2e7b8d[_0x12f18b(0x9fa)]) : _0x29fd86[_0x12f18b(0x639)]()); }), _0x37aafb[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { if (_0x1fe05f['length'] === 0x0) return; _0x1814ee = (_0x1814ee + 0x1) % _0x1fe05f['length'], _0x3d6b4e(_0x1fe05f[_0x1814ee], _0x1fe05f); }), _0x3d7bb6[_0x2481c4(0x582)]('click', () => { const _0x43704f = _0x2481c4; if (_0x1fe05f[_0x43704f(0x55b)] === 0x0) return; _0x1814ee = (_0x1814ee - 0x1 + _0x1fe05f['length']) % _0x1fe05f['length'], _0x3d6b4e(_0x1fe05f[_0x1814ee], _0x1fe05f); }), _0x29fd86['addEventListener'](_0x2481c4(0x77a), () => { _0x46148c['textContent'] = '❚❚'; }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x639), () => { const _0x5a0b03 = _0x2481c4; if ('YnPEk' !== 'YnPEk') { _0x1716c8(_0x5a0b03(0x2e3)); return; } else _0x46148c[_0x5a0b03(0x356)] = '▶'; }), _0x29fd86[_0x2481c4(0x582)]('ended', () => { const _0x383f6f = _0x2481c4; _0x37aafb[_0x383f6f(0x3bf)](); }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x77a), () => { const _0x2fb63a = _0x2481c4, _0x4e9236 = document[_0x2fb63a(0x463)](_0x2fb63a(0x82a)); if (_0x4e9236) _0x4e9236[_0x2fb63a(0x356)] = '❚❚'; }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x639), () => { const _0x406ab5 = _0x2481c4, _0x69e0cd = document[_0x406ab5(0x463)]('global-player-play-pause-btn'); if (_0x69e0cd) _0x69e0cd[_0x406ab5(0x356)] = '▶'; }), _0x29fd86[_0x2481c4(0x582)]('ended', () => { const _0xc1a39d = _0x2481c4, _0x44e89e = document[_0xc1a39d(0x463)](_0xc1a39d(0xbd1)); _0x44e89e && ('BwoNT' !== _0xc1a39d(0x829) ? _0x44e89e['click']() : (_0xa3e2de[_0x395db9][_0xc1a39d(0x776)][_0xc1a39d(0x554)]('filled'), _0x174f3e[_0x14cb20]['value'] = '')); }); function _0x52ef8b(_0x297365) { const _0x534099 = _0x2481c4; if ('jbTWW' !== _0x534099(0xa4d)) { if (!_0x297365 || typeof _0x297365 !== 'string') return null; const _0x5662f1 = _0x297365[_0x534099(0xa81)]('['), _0x2f0b60 = _0x297365[_0x534099(0x2d0)](']'); if (_0x5662f1 > -0x1 && _0x2f0b60 > _0x5662f1) { if (_0x534099(0x605) === _0x534099(0x605)) return _0x297365[_0x534099(0x9ff)](_0x5662f1, _0x2f0b60 + 0x1); else _0x5eb710[_0x534099(0x5d3)] = { ..._0x5b19f3[_0x534099(0xa28)] }; } return null; } else _0x3f97a5[_0x534099(0xb01)] = _0x24fea8[_0x534099(0x51e)](_0x4154bf); } document['getElementById'](_0x2481c4(0x2c6))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x518466 = _0x2481c4; _0x52849c(), _0x1922fc('accounting', _0x518466(0x28c)); }), document[_0x2481c4(0x463)]('back-to-home-from-accounting')[_0x2481c4(0x582)]('click', () => _0x1922fc(_0x2481c4(0x28c), 'accounting')); const _0x3a67ee = document[_0x2481c4(0x463)](_0x2481c4(0x54f)), _0x4ea8b0 = document['getElementById'](_0x2481c4(0xa05)); _0x3a67ee[_0x2481c4(0x582)](_0x2481c4(0x3bf), _0x52849c), _0x4ea8b0[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x3267ab = _0x2481c4; _0x3267ab(0x221) !== _0x3267ab(0x221) ? _0x3f60ee['activeFriendCircleId'] = null : (_0x3a67ee[_0x3267ab(0x776)][_0x3267ab(0x554)](_0x3267ab(0x8ef)), _0x4ea8b0[_0x3267ab(0x776)][_0x3267ab(0xb2c)](_0x3267ab(0x8ef)), _0x4d9982()); }); function _0x52849c() { const _0x53bc64 = _0x2481c4; _0x4ea8b0[_0x53bc64(0x776)][_0x53bc64(0x554)](_0x53bc64(0x8ef)), _0x3a67ee['classList'][_0x53bc64(0xb2c)](_0x53bc64(0x8ef)), _0x4902cb(); } function _0x4902cb() { const _0x439df0 = _0x2481c4, _0x1a3b11 = document[_0x439df0(0x463)](_0x439df0(0x6b7)); document['getElementById'](_0x439df0(0x479))[_0x439df0(0x356)] = _0x439df0(0x289), document[_0x439df0(0x463)](_0x439df0(0xadc))[_0x439df0(0xb00)] = '', _0x1a3b11[_0x439df0(0xb00)] = _0x439df0(0x374), _0x591b2e(), document[_0x439df0(0x463)]('add-expense-button')[_0x439df0(0x582)]('click', _0xde924c), document[_0x439df0(0x463)](_0x439df0(0x20a))[_0x439df0(0x582)](_0x439df0(0x3bf), _0xd36953 => { const _0xc55b = _0x439df0; if (_0xd36953[_0xc55b(0x606)]['classList'][_0xc55b(0x999)](_0xc55b(0x71a))) { if (_0xc55b(0xa96) !== _0xc55b(0xa96)) { const _0x1bc334 = _0x1e7085(_0xd50707); if (_0x1bc334) { const _0x4a48df = _0x5299ab[_0xc55b(0x58b)](_0xc55b(0x2e5)); _0x4a48df[_0xc55b(0x202)] = _0x1bc334['id'], _0x4a48df[_0xc55b(0x356)] = _0x1bc334[_0xc55b(0x3b3)], _0x4bb2bc[_0xc55b(0xa59)](_0x4a48df); } } else { const _0x546cf4 = _0xd36953[_0xc55b(0x606)][_0xc55b(0x607)]['id']; _0x1ec207(_0xc55b(0x90f))[_0xc55b(0x794)](_0x40c37b => { const _0x4ceda2 = _0xc55b; _0x4ceda2(0x771) === _0x4ceda2(0xb5a) ? _0xb4947a += _0x4ceda2(0x9ec) : _0x40c37b && _0x29b90b(_0x546cf4); }); } } }), document[_0x439df0(0x463)](_0x439df0(0x37e))[_0x439df0(0x5c5)](); } function _0x5b4993(_0x2bee90, _0x1bd4cb) { const _0x1c165c = _0x2481c4, _0x55f846 = document[_0x1c165c(0x463)]('accounting-content-area'), _0x1e85ec = document[_0x1c165c(0x463)](_0x1c165c(0xadc)); document[_0x1c165c(0x463)](_0x1c165c(0x479))['textContent'] = _0x1bd4cb + _0x1c165c(0x8da); const _0x352c8e = _0x2bee90[_0x1c165c(0x68c)][_0x1c165c(0x818)]((_0x23ba76, _0x494fd6) => _0x23ba76 + (_0x494fd6[_0x1c165c(0x8bf)] || 0x0), 0x0); let _0x510c46 = _0x1c165c(0x4a4) + _0x352c8e[_0x1c165c(0x2c4)](0x2) + _0x1c165c(0x397); _0x55f846[_0x1c165c(0xb00)] = _0x510c46; const _0x1ff601 = document[_0x1c165c(0x463)]('categorized-expenses-list'), _0x25b8d8 = { '餐饮美食': _0x1c165c(0x5e0), '交通出行': _0x1c165c(0x4f1), '购物消费': _0x1c165c(0x3c9), '生活服务': _0x1c165c(0x2e8), '休闲娱乐': _0x1c165c(0x8bb), '医疗健康': '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '人情红包': _0x1c165c(0x416), '其他杂项': _0x1c165c(0x49b), '默认': _0x1c165c(0x552) }; _0x2bee90[_0x1c165c(0x68c)][_0x1c165c(0xbe4)](_0x4ed18f => { const _0x4ce999 = _0x1c165c, _0x2375e8 = document[_0x4ce999(0x58b)](_0x4ce999(0xbdf)); _0x2375e8[_0x4ce999(0x781)] = 'expense-item', _0x2375e8[_0x4ce999(0x80c)][_0x4ce999(0xb0f)] = _0x4ce999(0x409), _0x2375e8[_0x4ce999(0x80c)][_0x4ce999(0x5ee)] = _0x4ce999(0x89d), _0x2375e8[_0x4ce999(0x80c)][_0x4ce999(0x44d)] = _0x4ce999(0x875), _0x2375e8['style']['gap'] = '0'; const _0x8c5781 = _0x25b8d8[_0x4ed18f[_0x4ce999(0xc2b)]] || _0x25b8d8['默认'], _0x51ec07 = _0x4ce999(0x30b) + _0x8c5781 + '</svg>', _0x58287e = _0x4ce999(0xc08) + _0x51ec07 + _0x4ce999(0x656) + _0x4ed18f[_0x4ce999(0x7c6)] + _0x4ce999(0x941) + (_0x4ed18f[_0x4ce999(0xc2b)] || _0x4ce999(0x489)) + _0x4ce999(0x7a1) + (_0x4ed18f[_0x4ce999(0x8bf)] || 0x0)[_0x4ce999(0x2c4)](0x2) + '</span></div>'; let _0x40caca = ''; if (_0x4ed18f[_0x4ce999(0x7e3)] && _0x4ed18f[_0x4ce999(0x7e3)][_0x4ce999(0x3ce)]) { const _0x59885b = _0x543c76(_0x4ed18f[_0x4ce999(0x7e3)][_0x4ce999(0x3ce)]); _0x59885b && (_0x40caca = _0x4ce999(0x8ec) + _0x59885b['avatar'] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x59885b['name'] + _0x4ce999(0x5ac) + _0x4ed18f[_0x4ce999(0x7e3)][_0x4ce999(0x3a1)] + '</div></div></div>'); } _0x2375e8[_0x4ce999(0xb00)] = _0x58287e + _0x40caca, _0x1ff601[_0x4ce999(0xa59)](_0x2375e8); }), _0x1e85ec[_0x1c165c(0xb00)] = _0x1c165c(0xc13), document[_0x1c165c(0x463)](_0x1c165c(0x6a6))[_0x1c165c(0x582)](_0x1c165c(0x3bf), async () => { const _0x2c8543 = _0x1c165c; if (_0x2c8543(0xb4a) === 'KxKwy') { if (!_0x3d4c42[_0x2c8543(0x504)]) return _0x399e3e[_0x2c8543(0x7ae)][_0x2c8543(0x3be)](_0xde18f9 => _0xde18f9['id'] === _0x21a577['activeUserProfileId']) || _0x557156[_0x2c8543(0x7ae)][0x0]; const _0x22e6dc = _0x5c8545[_0x2c8543(0xab8)][_0x2c8543(0x3be)](_0x5a57e8 => _0x5a57e8[_0x2c8543(0xc02)] === _0x2c8543(0x963) && _0x5a57e8[_0x2c8543(0x3d4)][_0x2c8543(0xa1c)](_0x2c9f3d['activeDiaryCharacterId'])), _0x2bc210 = _0x22e6dc?.['boundUserProfileId'] || _0x22f4fd[_0x2c8543(0xbb5)]; return _0x525ac8[_0x2c8543(0x7ae)][_0x2c8543(0x3be)](_0x23bdc2 => _0x23bdc2['id'] === _0x2bc210) || _0x49c136[_0x2c8543(0x7ae)][0x0]; } else { const _0xf810e6 = await _0x1ec207('确定要重新记录吗？当前的账单会被删除。'); if (_0xf810e6) { const _0x188498 = _0x5f0a6c[_0x2c8543(0x7cd)][_0x1bd4cb]; _0x188498 && _0x188498[_0x2c8543(0xadf)] && _0x5f0a6c[_0x2c8543(0xb9e)]['push'](..._0x188498['originalExpenses']), delete _0x5f0a6c['accountingLedger'][_0x1bd4cb], _0x5c772f(), _0x4902cb(); } } }); } function _0x4d9982() { const _0x446f57 = _0x2481c4, _0xcdc77f = document[_0x446f57(0x463)](_0x446f57(0x6b7)); document[_0x446f57(0x463)](_0x446f57(0x479))[_0x446f57(0x356)] = '账本', document[_0x446f57(0x463)](_0x446f57(0xadc))[_0x446f57(0xb00)] = ''; const _0x3197e9 = Object[_0x446f57(0x6ee)](_0x5f0a6c[_0x446f57(0x7cd)])[_0x446f57(0x61a)]((_0x329073, _0x4d1a7a) => new Date(_0x4d1a7a) - new Date(_0x329073)); if (_0x3197e9[_0x446f57(0x55b)] === 0x0) { _0xcdc77f[_0x446f57(0xb00)] = _0x446f57(0x578); return; } _0xcdc77f[_0x446f57(0xb00)] = '', _0x3197e9[_0x446f57(0xbe4)](_0x259e72 => { const _0x5897aa = _0x446f57, _0x5a3370 = document[_0x5897aa(0x58b)]('div'); _0x5a3370['className'] = 'expense-item', _0x5a3370[_0x5897aa(0x80c)][_0x5897aa(0x408)] = _0x5897aa(0x751); const _0x2b8223 = _0x5f0a6c[_0x5897aa(0x7cd)][_0x259e72], _0x3e360f = _0x2b8223[_0x5897aa(0x68c)][_0x5897aa(0x818)]((_0x4eef65, _0xef4dc5) => _0x4eef65 + (_0xef4dc5[_0x5897aa(0x8bf)] || 0x0), 0x0); _0x5a3370[_0x5897aa(0xb00)] = _0x5897aa(0x933) + _0x259e72 + '</span><span\x20class=\x22amount\x22>总计:\x20' + _0x3e360f[_0x5897aa(0x2c4)](0x2) + _0x5897aa(0xa5d), _0x5a3370[_0x5897aa(0x582)](_0x5897aa(0x3bf), () => { const _0x167013 = _0x5897aa; if (_0x167013(0x8e3) !== _0x167013(0x8e3)) { const _0x81de20 = _0x5f21b6, _0x2e2531 = _0x81de20[_0x167013(0x2ea)], _0x4252c5 = _0x81de20[_0x167013(0xa7b)]; _0x59dab8[_0x167013(0x3c8)] += 0x64, _0x361ff9(), _0x16448e(() => { const _0x250694 = _0x167013, _0x102a6b = _0x81de20[_0x250694(0x2ea)]; _0x81de20[_0x250694(0xa7b)] = _0x4252c5 + (_0x102a6b - _0x2e2531); }); } else _0x3a67ee[_0x167013(0x776)][_0x167013(0x554)](_0x167013(0x8ef)), _0x4ea8b0[_0x167013(0x776)]['add']('active'), _0x5b4993(_0x2b8223, _0x259e72); }), _0xcdc77f['appendChild'](_0x5a3370); }); } function _0xde924c() { const _0x4f2bba = _0x2481c4, _0x211b95 = document[_0x4f2bba(0x463)]('expense-description'), _0x288d4c = document['getElementById']('expense-amount'), _0x54604b = _0x211b95[_0x4f2bba(0x202)]['trim'](), _0x3bb6f6 = parseFloat(_0x288d4c[_0x4f2bba(0x202)]); if (!_0x54604b || isNaN(_0x3bb6f6) || _0x3bb6f6 <= 0x0) { if (_0x4f2bba(0x45b) !== _0x4f2bba(0x45b)) { const _0x61398e = _0x479bdb(); if (_0x61398e && _0x61398e['type'] === _0x4f2bba(0x963)) _0x9a4a8d(_0x61398e[_0x4f2bba(0x3d4)][0x0]); else _0x61398e && _0x61398e[_0x4f2bba(0xc02)] === _0x4f2bba(0x74a) && _0xc316d5(_0x61398e['id']); } else { _0x24537c(_0x4f2bba(0x2e3)); return; } } _0x5f0a6c[_0x4f2bba(0xb9e)][_0x4f2bba(0x1e6)]({ 'id': 'exp_' + Date['now'](), 'description': _0x54604b, 'amount': _0x3bb6f6, 'timestamp': Date[_0x4f2bba(0xb71)]() }), _0x5c772f(), _0x591b2e(), _0x211b95['value'] = '', _0x288d4c['value'] = '', _0x211b95['focus'](); } function _0x29b90b(_0x54890f) { const _0x36ee98 = _0x2481c4, _0x5cb73e = _0x5f0a6c['accountingData']['findIndex'](_0x563c61 => _0x563c61['id'] === _0x54890f); _0x5cb73e > -0x1 && (_0x5f0a6c['accountingData'][_0x36ee98(0x4a7)](_0x5cb73e, 0x1), _0x5c772f(), _0x591b2e()); } function _0x591b2e() { const _0xc69e4a = _0x2481c4; if (_0xc69e4a(0x429) === 'LYVhz') { const _0x491baf = _0x43e257['indexOf']('{'), _0x45b31c = _0x5f01ab['lastIndexOf']('}'); if (_0x491baf >= 0x0 && _0x45b31c > _0x491baf) return _0x2a62b1[_0xc69e4a(0x929)](_0x491baf, _0x45b31c + 0x1); return _0x2e2056; } else { const _0x402a22 = document[_0xc69e4a(0x463)](_0xc69e4a(0x20a)), _0x5d6d78 = document[_0xc69e4a(0x463)]('organize-button-container'), _0x2fba37 = new Date(), _0x145cad = _0x5f0a6c['accountingData'][_0xc69e4a(0x216)](_0x20b0a9 => new Date(_0x20b0a9[_0xc69e4a(0x83a)])[_0xc69e4a(0x7bc)]() === _0x2fba37[_0xc69e4a(0x7bc)]()); if (_0x145cad['length'] === 0x0) { if (_0xc69e4a(0x3e5) === _0xc69e4a(0x3e5)) { _0x402a22[_0xc69e4a(0xb00)] = _0xc69e4a(0x9de), _0x5d6d78[_0xc69e4a(0xb00)] = ''; return; } else _0x243d8d = _0x3d2303, _0x47f733[_0xc69e4a(0x776)][_0xc69e4a(0xb2c)](_0xc69e4a(0x940)); } _0x402a22[_0xc69e4a(0xb00)] = '', _0x145cad['sort']((_0x30c454, _0x45e9ab) => _0x45e9ab[_0xc69e4a(0x83a)] - _0x30c454[_0xc69e4a(0x83a)])[_0xc69e4a(0xbe4)](_0x56a441 => { const _0x496413 = _0xc69e4a; if (_0x496413(0x77e) === _0x496413(0x7e9)) { _0x24b418(_0x496413(0x9d8)); return; } else { const _0xcdea19 = document['createElement'](_0x496413(0xbdf)); _0xcdea19[_0x496413(0x781)] = _0x496413(0x368), _0xcdea19[_0x496413(0xb00)] = _0x496413(0x933) + _0x56a441[_0x496413(0x7c6)] + _0x496413(0x352) + _0x56a441['amount'][_0x496413(0x2c4)](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0x56a441['id'] + _0x496413(0xa47), _0x402a22[_0x496413(0xa59)](_0xcdea19); } }); if (_0x5d6d78) { if ('uFCzR' === _0xc69e4a(0x946)) { const _0x33145b = { 'id': _0xc69e4a(0x728) + _0x4db15f[_0xc69e4a(0xb71)]() + '_' + _0x47b513[_0xc69e4a(0x642)](), 'name': _0x536c38[_0xc69e4a(0x3b3)], 'content': _0x123a51[_0xc69e4a(0x67c)] }; _0x3923ab[_0xc69e4a(0x7ad)][_0xc69e4a(0x1e6)](_0x33145b), _0x43c422[_0xc69e4a(0x1e6)](_0x33145b['id']); } else _0x5d6d78[_0xc69e4a(0xb00)] = _0xc69e4a(0xb62), document[_0xc69e4a(0x463)](_0xc69e4a(0x960))[_0xc69e4a(0x582)](_0xc69e4a(0x3bf), _0x476da8); } } } async function _0x476da8() { const _0x16ce16 = _0x2481c4, _0x312612 = new Date(), _0x1e89ab = _0x312612['getFullYear']() + '-' + String(_0x312612[_0x16ce16(0x567)]() + 0x1)[_0x16ce16(0x690)](0x2, '0') + '-' + String(_0x312612[_0x16ce16(0x60d)]())[_0x16ce16(0x690)](0x2, '0'); if (_0x5f0a6c[_0x16ce16(0x7cd)][_0x1e89ab]) { if (_0x16ce16(0x8c7) === _0x16ce16(0x2e0)) _0xe1ae3b[_0x16ce16(0x8d9)](_0x16ce16(0x4b8), _0x355948), _0x2b0160(_0x16ce16(0x6e1)); else { _0x24537c(_0x16ce16(0x297)); return; } } const _0x58ef26 = _0x5f0a6c[_0x16ce16(0xb9e)]['filter'](_0x308519 => new Date(_0x308519[_0x16ce16(0x83a)])[_0x16ce16(0x7bc)]() === _0x312612[_0x16ce16(0x7bc)]()); if (_0x58ef26[_0x16ce16(0x55b)] === 0x0) { _0x24537c(_0x16ce16(0x962)); return; } _0x2aa27a(!![], _0x16ce16(0x7ce)); try { const _0x4fd22d = ['餐饮美食', _0x16ce16(0x320), _0x16ce16(0xbde), _0x16ce16(0x9c6), '休闲娱乐', '医疗健康', _0x16ce16(0xa7a), _0x16ce16(0x4d5)], _0x500b33 = _0x58ef26[_0x16ce16(0x575)](_0x4f3fb5 => '-\x20' + _0x4f3fb5[_0x16ce16(0x7c6)] + ':\x20' + _0x4f3fb5[_0x16ce16(0x8bf)])[_0x16ce16(0x3b9)]('\x0a'), _0x32519e = _0x5f0a6c[_0x16ce16(0x723)][_0x16ce16(0x575)](_0x3f4811 => { const _0x5dab47 = _0x16ce16, _0x422e96 = _0x5f0a6c[_0x5dab47(0xab8)][_0x5dab47(0x3be)](_0x80dc14 => _0x80dc14['type'] === _0x5dab47(0x963) && _0x80dc14[_0x5dab47(0x3d4)][_0x5dab47(0xa1c)](_0x3f4811['id'])), _0x2e6d0e = _0x5f0a6c[_0x5dab47(0x7ae)][_0x5dab47(0x3be)](_0x9a3b33 => _0x9a3b33['id'] === (_0x422e96?.[_0x5dab47(0x763)] || _0x5f0a6c[_0x5dab47(0xbb5)])) || { 'id': _0x5dab47(0x44b), 'name': '你' }; let _0x2cd356 = ''; if (_0x3f4811[_0x5dab47(0xb2b)] && _0x3f4811[_0x5dab47(0xb2b)][_0x5dab47(0x55b)] > 0x0) { if ('AksXC' !== _0x5dab47(0x59c)) _0x2cd356 = _0x3f4811[_0x5dab47(0xb2b)]['map'](_0x2b066b => _0x5f0a6c[_0x5dab47(0x7ad)][_0x5dab47(0x3be)](_0x5f3b94 => _0x5f3b94['id'] === _0x2b066b))['filter'](Boolean)[_0x5dab47(0x575)](_0x5a3754 => _0x5dab47(0x9fe) + _0x5a3754[_0x5dab47(0x3b3)] + ']:\x20' + _0x5a3754['content'])[_0x5dab47(0x3b9)](''); else { const _0x4cc112 = _0x3804a0[_0x5dab47(0x463)](_0x5dab47(0x9e8)); if (!_0x4cc112) return; const _0x4458b2 = _0x56d8ae[_0x5dab47(0x6b4)](_0x5dab47(0x979)) || '35'; _0x355d3a[_0x5dab47(0x5ed)][_0x5dab47(0x80c)][_0x5dab47(0x981)](_0x5dab47(0x60a), _0x4458b2), _0x4cc112[_0x5dab47(0x202)] = _0x4458b2, _0x4cc112[_0x5dab47(0x582)](_0x5dab47(0xb75), () => { const _0x2da171 = _0x5dab47, _0x4578b0 = _0x4cc112['value']; _0x3005bb[_0x2da171(0x5ed)][_0x2da171(0x80c)][_0x2da171(0x981)](_0x2da171(0x60a), _0x4578b0), _0x1dc363[_0x2da171(0x246)](_0x2da171(0x979), _0x4578b0), _0x525cf4(); }); } } return _0x5dab47(0x9cf) + _0x3f4811['id'] + _0x5dab47(0x401) + _0x3f4811[_0x5dab47(0x3b3)] + '\x0a\x20\x20\x20\x20人设:\x20' + _0x3f4811[_0x5dab47(0x91d)] + _0x5dab47(0x831) + _0x2e6d0e[_0x5dab47(0x3b3)] + _0x5dab47(0xb7d) + _0x2e6d0e['id'] + ')\x0a' + _0x2cd356; })['join']('\x0a'), _0x5cc9f8 = _0x5f0a6c['userProfiles']['map'](_0x31bfc9 => '\x20\x20-\x20用户ID:\x20' + _0x31bfc9['id'] + _0x16ce16(0x401) + _0x31bfc9['name'] + _0x16ce16(0x323) + (_0x31bfc9['persona'] || '无'))[_0x16ce16(0x3b9)]('\x0a'), _0x1e9a50 = _0x16ce16(0x9ab), _0x2f0140 = _0x16ce16(0x5b6) + _0x4fd22d[_0x16ce16(0x3b9)](',\x20') + _0x16ce16(0x261) + _0x32519e + _0x16ce16(0x8f9) + _0x5cc9f8 + _0x16ce16(0x664) + _0x500b33, _0x3a4afc = [{ 'role': 'system', 'content': _0x1e9a50 }, { 'role': _0x16ce16(0x5c2), 'content': _0x2f0140 }], _0xe62ce0 = await _0x550e3c(_0x3a4afc, { 'json': !![] }), _0x407e63 = _0x52ef8b(_0xe62ce0); if (!_0x407e63) throw new Error(_0x16ce16(0x6e4) + _0xe62ce0); const _0x3fa096 = JSON['parse'](_0x407e63); _0x5f0a6c[_0x16ce16(0x7cd)][_0x1e89ab] = { 'categorizedExpenses': _0x3fa096, 'timestamp': Date[_0x16ce16(0xb71)](), 'originalExpenses': _0x58ef26 }, _0x5f0a6c[_0x16ce16(0xb9e)] = _0x5f0a6c['accountingData'][_0x16ce16(0x216)](_0x4f5064 => new Date(_0x4f5064['timestamp'])[_0x16ce16(0x7bc)]() !== _0x312612[_0x16ce16(0x7bc)]()), _0x5c772f(), _0x5b4993(_0x5f0a6c[_0x16ce16(0x7cd)][_0x1e89ab], _0x1e89ab); } catch (_0x5d1ea8) { _0x16ce16(0xa46) === _0x16ce16(0xa46) ? _0x24537c(_0x16ce16(0xb66) + _0x5d1ea8[_0x16ce16(0x9fa)]) : _0x324a3a[_0x16ce16(0x8d9)](_0x16ce16(0x2b5), _0x2caf81); } finally { _0x2aa27a(![]); } } async function _0x126d05() { const _0x808d0 = _0x2481c4, _0x3a8806 = [..._0x1621d0]; try { const _0x297c74 = localStorage[_0x808d0(0x6b4)](_0x808d0(0xb3b)); if (_0x297c74) { const _0x8ec2b4 = JSON[_0x808d0(0x433)](_0x297c74); Array['isArray'](_0x8ec2b4) ? _0x47fa25 = [..._0x3a8806, ..._0x8ec2b4] : _0x47fa25 = _0x3a8806; } else _0x47fa25 = _0x3a8806; } catch (_0x177fbb) { _0x808d0(0x6d3) === _0x808d0(0x6d3) ? (console[_0x808d0(0x8d9)](_0x808d0(0x439), _0x177fbb), _0x47fa25 = _0x3a8806) : _0x5dc2a7[_0x808d0(0xb00)] = _0x808d0(0x532) + _0x338a55[_0x808d0(0x39d)](_0x808d0(0x2ed), { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }) + _0x808d0(0xb85); } if (!localStorage[_0x808d0(0x6b4)](_0x808d0(0x67f))) { if (_0x808d0(0x8af) !== 'yhjme') _0x24a559 && _0x4d407c(_0x297122['id'], _0xaab37c[_0x808d0(0x575)](_0x4a929d => _0x4a929d['id'])); else { _0x1ec207(_0x808d0(0x58c))[_0x808d0(0x794)](async _0x4e3016 => { const _0x4c7b1a = _0x808d0; if (_0x4e3016) { if ('TWtcF' !== _0x4c7b1a(0x6fa)) return; else _0x2aa27a(!![], _0x4c7b1a(0x26c)), await _0x64aca(), localStorage[_0x4c7b1a(0x246)](_0x4c7b1a(0x67f), _0x4c7b1a(0x1d4)), _0x2aa27a(![]), _0x24537c('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'), setTimeout(() => location[_0x4c7b1a(0x4df)](), 0x5dc); } else _0x24537c('升级已取消。旧版图片数据可能导致应用卡顿或出错。'); }); return; } } if (!localStorage[_0x808d0(0x6b4)](_0x808d0(0x994))) { if (_0x808d0(0x7d4) !== _0x808d0(0x7d4)) { const { omniText: _0x160ad5 } = _0x3fedf4(_0x41602c['id'], null), _0x2434d6 = _0x48032f(_0x4a06b1['id']), _0x5136fa = _0x36ed03['linkedWorldBookIds'] && _0x4c00e0[_0x808d0(0xb2b)]['length'] > 0x0 ? _0x808d0(0x509) + _0x2b7b63[_0x808d0(0x3b3)] + _0x808d0(0xb25) + _0x374453[_0x808d0(0xb2b)]['map'](_0x15f161 => _0x307d97[_0x808d0(0x7ad)]['find'](_0xddfdf4 => _0xddfdf4['id'] === _0x15f161))[_0x808d0(0x216)](_0x3546e3)[_0x808d0(0x575)](_0x3ee960 => _0x808d0(0x8b5) + _0x3ee960[_0x808d0(0x3b3)] + '\x0a' + _0x3ee960[_0x808d0(0x67c)])[_0x808d0(0x3b9)]('') : ''; return _0x808d0(0x203) + _0x538187[_0x808d0(0x3b3)] + _0x808d0(0x2df) + _0x89bbd2['id'] + _0x808d0(0x50a) + _0x286c1c['persona'] + _0x808d0(0x301) + _0x160ad5 + '\x0a' + _0x2434d6 + '\x0a' + _0x5136fa; } else { console[_0x808d0(0x5b1)](_0x808d0(0x33c)), _0x2aa27a(!![], _0x808d0(0x8c6)); const _0x82ce43 = await _0x3765c7(); localStorage[_0x808d0(0x246)](_0x808d0(0x994), 'true'), _0x2aa27a(![]); if (_0x82ce43 > 0x0) { if (_0x808d0(0x5ef) !== _0x808d0(0x5ef)) _0x3b2050[_0x808d0(0xb01)] = _0x551111[_0x808d0(0x51e)](_0x40006d), _0x5e473c[_0x808d0(0x80c)][_0x808d0(0x801)] = 0x1; else { _0x24537c(_0x808d0(0x624) + _0x82ce43 + _0x808d0(0x39b)), setTimeout(() => location['reload'](), 0x5dc); return; } } } } if (!localStorage[_0x808d0(0x6b4)](_0x808d0(0x994))) { } if (!localStorage[_0x808d0(0x6b4)]('noir_migration_music_v1_complete')) { console[_0x808d0(0x5b1)]('执行音乐封面数据净化...'), _0x2aa27a(!![], '正在升级音乐卡片数据...'); const _0x2ba8af = await _0x5e8463(); localStorage[_0x808d0(0x246)](_0x808d0(0x993), _0x808d0(0x1d4)), _0x2aa27a(![]); if (_0x2ba8af > 0x0) { if ('jxGPW' === _0x808d0(0x8cc)) { _0x24537c(_0x808d0(0x841) + _0x2ba8af + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0x808d0(0x4df)](), 0x5dc); return; } else _0x2f6de0[_0x808d0(0x422)](), _0x2a3e95(); } } if (!localStorage['getItem'](_0x808d0(0x750))) { const _0x14f398 = await _0x1f140d(); localStorage[_0x808d0(0x246)](_0x808d0(0x750), _0x808d0(0x1d4)); if (_0x14f398 > 0x0) { _0x24537c(_0x808d0(0x260) + _0x14f398 + _0x808d0(0x7aa)), setTimeout(() => location[_0x808d0(0x4df)](), 0x5dc); return; } } const _0x22fc95 = document[_0x808d0(0x463)](_0x808d0(0x861)); _0x22fc95['addEventListener']('click', () => { const _0x14f059 = _0x808d0; if (_0x14f059(0x490) !== 'lUFkh') _0x330317(), _0x1922fc('snoopList', _0x14f059(0x28c)); else { const _0x5c6893 = _0x4fe8f8[_0x14f059(0x25d)](), _0x363e0b = _0x56fd4d(_0xcec689[_0x14f059(0x567)]() + 0x1)[_0x14f059(0x690)](0x2, '0'), _0x441729 = _0x28c17f(_0x5a8ba3[_0x14f059(0x60d)]())['padStart'](0x2, '0'); return _0x5c6893 + '-' + _0x363e0b + '-' + _0x441729; } }); const _0x4b82f6 = _0x32e9fb(); await _0x20a303(); try { const _0x3418d1 = localStorage[_0x808d0(0x6b4)](_0x808d0(0x508)); if (_0x3418d1) { const _0x7bb370 = JSON[_0x808d0(0x433)](_0x3418d1); _0x7bb370[_0x808d0(0x7cd)] && ('akENT' === _0x808d0(0x5f0) ? _0xc47c1e[_0x808d0(0x763)] === _0x285369 && (_0x1041c9[_0x808d0(0x763)] = _0x4af819[_0x808d0(0xbb5)]) : (_0x5f0a6c['accountingLedger'] = _0x7bb370[_0x808d0(0x7cd)], console['log']('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.'))); } } catch (_0x15d4a1) { console[_0x808d0(0x8d9)](_0x808d0(0x8d4), _0x15d4a1); } _0x1c62a2(), _0x1d366f(), _0x2ad4cb(), _0x116570(), _0x59367f(), _0x31689e(), _0x16b4e1(), _0x2743ca(), _0x464b66(), _0x3acb09(), _0x593aeb(), _0x2c2157(), _0x529c87(), setInterval(_0x529c87, 0x7530), _0x223de4(), _0x30852c(), _0x3017f5(); const _0x20a3d8 = document['getElementById']('audio-player'); document[_0x808d0(0x463)](_0x808d0(0xb92))[_0x808d0(0x582)](_0x808d0(0x3bf), function (_0x1d9e01) { const _0x359665 = _0x808d0; if (_0x1d9e01['target'][_0x359665(0x23b)](_0x359665(0xb80))) return; const _0x459592 = document['getElementById'](_0x359665(0xb6d)); _0x459592 && _0x459592[_0x359665(0x3bf)](); }), _0x1922fc('home', _0x808d0(0x38c)); (_0x4b82f6 || _0x5f0a6c['characters']['length'] === 0x0) && (_0x24537c(_0x808d0(0x2b1)), setTimeout(() => { const _0x115c38 = _0x808d0; _0x1922fc(_0x115c38(0x83e), _0x115c38(0x28c)), setTimeout(() => _0x1439b1(), 0x64); }, 0x6a4)); document[_0x808d0(0x463)](_0x808d0(0x5ae))[_0x808d0(0x582)]('click', _0x3d3594); const _0x45cf2a = document['getElementById'](_0x808d0(0x4f3)); document[_0x808d0(0x463)](_0x808d0(0x5bc))[_0x808d0(0x582)](_0x808d0(0x3bf), () => _0x45cf2a[_0x808d0(0x3bf)]()), document[_0x808d0(0x463)](_0x808d0(0x826))[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0x1d6e3c = _0x808d0; _0x1d6e3c(0x8dd) !== _0x1d6e3c(0x778) ? (_0x5f0a6c[_0x1d6e3c(0xa91)][_0x1d6e3c(0x813)] = null, _0x5c772f(), _0x223de4(), _0x24537c(_0x1d6e3c(0x2cb))) : (_0x4242c9['error'](_0x1d6e3c(0xace), _0x28ae2d), _0x5c5bf9[_0x1d6e3c(0x2c3)] = '图片加载失败'); }), _0x45cf2a['addEventListener'](_0x808d0(0x236), async _0x1eb5de => { const _0x26d398 = _0x808d0; if (_0x26d398(0x5a0) === 'IJKTK') { const _0x4b416c = _0x1eb5de['target'][_0x26d398(0x4b6)][0x0]; if (!_0x4b416c) return; try { const _0x296149 = await _0x4662c8(_0x4b416c); _0x5f0a6c[_0x26d398(0xa91)][_0x26d398(0x813)] = _0x296149, _0x5c772f(), _0x223de4(), _0x24537c(_0x26d398(0x6fc)); } catch (_0x54185a) { if ('EDMwA' !== _0x26d398(0x34d)) _0x24537c(_0x26d398(0x72e) + _0x54185a['message']); else { const _0x4a137c = _0xfcaa5a[_0x26d398(0xab8)]['find'](_0xed39de => _0xed39de[_0x26d398(0x3d4)][_0x26d398(0xa1c)](_0x4b7dc2)); if (!_0x4a137c) return ''; const _0x354f30 = _0xe4efdc(_0x4a137c['id']), _0x1fa54d = _0x30ac4a[_0x26d398(0x3dc)][_0x26d398(0x216)](_0x426159 => _0x426159[_0x26d398(0x6ea)] === _0x354f30['id'] || !_0x426159['userId']); if (_0x1fa54d[_0x26d398(0x55b)] === 0x0) return ''; const _0x8985f1 = _0x1fa54d[_0x26d398(0x575)](_0x5b3d08 => { const _0x3b43e9 = _0x26d398, _0x3c481e = _0x5b3d08[_0x3b43e9(0xc02)] === _0x3b43e9(0x324) ? '纪念日' : '待办'; return _0x3b43e9(0x8b9) + _0x3c481e + ']\x20' + _0x5b3d08['date'] + ':\x20' + _0x5b3d08[_0x3b43e9(0x67c)]; })[_0x26d398(0x3b9)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x354f30[_0x26d398(0x3b3)] + _0x26d398(0x1de) + _0x8985f1; } } } else _0x62503e[_0x26d398(0x80c)][_0x26d398(0x801)] = 0x0, _0x119337(() => { const _0x5a2c41 = _0x26d398; _0x38eacf['src'] = _0x598207[_0x5a2c41(0x51e)](_0x252154), _0x34d9ec['style'][_0x5a2c41(0x801)] = 0x1; }, 0x96); }), _0x3a8493(), document['getElementById'](_0x808d0(0x4ee))['addEventListener'](_0x808d0(0x3bf), () => document[_0x808d0(0x463)](_0x808d0(0x67d))[_0x808d0(0x3bf)]()), document[_0x808d0(0x463)](_0x808d0(0x98f))[_0x808d0(0x582)](_0x808d0(0x3bf), async () => { const _0x2a7801 = _0x808d0; await _0x15bd83('widget_badge'), localStorage[_0x2a7801(0x805)](_0x2a7801(0x50c)), _0x3a8493(), _0x24537c('徽章已移除。'); }), document[_0x808d0(0x463)](_0x808d0(0x67d))[_0x808d0(0x582)]('change', async _0x157517 => { const _0x48888e = _0x808d0, _0x19de8c = _0x157517[_0x48888e(0x606)]['files'][0x0]; if (!_0x19de8c) return; try { await _0x4d5a5e(_0x48888e(0x786), _0x19de8c), await _0x3a8493(), _0x24537c(_0x48888e(0xc2c)); } catch (_0xca4930) { _0x24537c(_0x48888e(0x72e) + _0xca4930['message']); } }), _0xcb24a2(), document[_0x808d0(0x463)](_0x808d0(0x796))[_0x808d0(0x582)](_0x808d0(0xb16), _0x4f35bc), document[_0x808d0(0x463)](_0x808d0(0x796))[_0x808d0(0x582)]('touchstart', _0x4f35bc, { 'passive': ![] }), document[_0x808d0(0x463)](_0x808d0(0xbf3))[_0x808d0(0x582)](_0x808d0(0x3bf), () => document[_0x808d0(0x463)](_0x808d0(0x231))[_0x808d0(0x3bf)]()), document[_0x808d0(0x463)](_0x808d0(0x8d5))[_0x808d0(0x582)](_0x808d0(0x3bf), async () => { const _0x93024f = _0x808d0; _0x93024f(0x32c) !== _0x93024f(0x32c) ? (_0x2c272a(), _0xf6135b[_0x93024f(0x3c8)] = 0x64) : (await _0x15bd83(_0x93024f(0x68e)), localStorage[_0x93024f(0x805)](_0x93024f(0x321)), _0xcb24a2(), _0x24537c(_0x93024f(0x587))); }), document[_0x808d0(0x463)]('card-input')[_0x808d0(0x582)](_0x808d0(0x236), async _0xd53ce1 => { const _0x1d685a = _0x808d0; if (_0x1d685a(0x6ca) === _0x1d685a(0x2f4)) { const _0x2e6908 = _0x2284c4(_0x5b9886[_0x1d685a(0xc10)]())[_0x1d685a(0x690)](0x2, '0'), _0x2dbf4b = _0x1f2149(_0x338753['getMinutes']())[_0x1d685a(0x690)](0x2, '0'); _0x593fbd[_0x1d685a(0x356)] = _0x2e6908 + ':' + _0x2dbf4b; const _0x154ef0 = _0x57f473[_0x1d685a(0x567)]() + 0x1, _0x3256e8 = _0x72e0f5[_0x1d685a(0x60d)](), _0x40b3df = [_0x1d685a(0x957), _0x1d685a(0x685), _0x1d685a(0x483), _0x1d685a(0x8a7), _0x1d685a(0x522), _0x1d685a(0x733), _0x1d685a(0xbe1)][_0x9a0516[_0x1d685a(0x2c2)]()]; _0x424c72[_0x1d685a(0x356)] = _0x154ef0 + '月' + _0x3256e8 + '日\x20' + _0x40b3df; } else { const _0x3ae65f = _0xd53ce1[_0x1d685a(0x606)][_0x1d685a(0x4b6)][0x0]; if (!_0x3ae65f) return; try { _0x1d685a(0x21a) === _0x1d685a(0x54b) ? _0x9d39d7[_0x1d685a(0x1e6)]('[' + _0x53bfde(_0x383302) + _0x1d685a(0x2c7) + (_0x3ba455[_0x1d685a(0x67c)]?.[_0x1d685a(0x294)](/：(.+?)]/)?.[0x1] || '表情') + ']') : (await _0x4d5a5e(_0x1d685a(0x68e), _0x3ae65f), await _0xcb24a2(), _0x24537c('卡片已更换！')); } catch (_0x22062c) { _0x24537c(_0x1d685a(0x72e) + _0x22062c[_0x1d685a(0x9fa)]); } } }), document[_0x808d0(0x463)](_0x808d0(0x76f))['addEventListener']('click', async () => { const _0x4aa417 = _0x808d0, _0x3336a4 = await _0x1ec207(_0x4aa417(0x31c)); if (_0x3336a4) { if ('aGruK' !== _0x4aa417(0x6da)) localStorage[_0x4aa417(0x805)](_0x4aa417(0x50c)), localStorage[_0x4aa417(0x805)](_0x4aa417(0x4a3)), _0x24537c('位置已重置，正在刷新...'), setTimeout(() => location[_0x4aa417(0x4df)](), 0x3e8); else { _0x3d5fca(_0x4aa417(0x6af)); return; } } }); const _0x12ef9e = document[_0x808d0(0x463)](_0x808d0(0x6e8)); _0x12ef9e['addEventListener']('click', () => { const _0x136bef = _0x808d0; _0x136bef(0x711) !== _0x136bef(0x711) ? _0x5657eb['style'][_0x136bef(0x801)] = '1' : (_0x4a8bba(), _0x1922fc(_0x136bef(0x2ce), 'home')); }); const _0x5e88f5 = document[_0x808d0(0x463)](_0x808d0(0x4db)); _0x5e88f5[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0xe01eef = _0x808d0; _0x2be269(), _0x1922fc(_0xe01eef(0x425), _0xe01eef(0x28c)); }), document['getElementById'](_0x808d0(0x745))[_0x808d0(0x582)](_0x808d0(0x3bf), () => _0x1922fc('home', _0x808d0(0x425))), document[_0x808d0(0x463)](_0x808d0(0x4d3))[_0x808d0(0x582)](_0x808d0(0x3bf), () => _0x1922fc('home', _0x808d0(0x2ce))), document['getElementById']('back-to-diary-list')[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0x2c46cc = _0x808d0; _0x5f0a6c[_0x2c46cc(0x504)] = null, _0x1922fc(_0x2c46cc(0x2ce), _0x2c46cc(0x78d)); }), document['getElementById'](_0x808d0(0xc01))[_0x808d0(0x582)](_0x808d0(0x3bf), _0x3740c5), document[_0x808d0(0x463)](_0x808d0(0x515))[_0x808d0(0x582)](_0x808d0(0x3bf), _0x39bab3), document['getElementById']('diary-entry-input')[_0x808d0(0x582)]('keydown', _0x4480e9 => { const _0x7d281b = _0x808d0; if (_0x7d281b(0xa3c) === 'Hxfgj') try { const _0xcfd067 = _0x39b7fc[_0x7d281b(0x433)](_0x5705ce['getItem']('badgeState') || '{}'), _0x5b6ad9 = { ..._0xcfd067, ..._0x1a00eb }; _0x3796c8['setItem'](_0x7d281b(0x50c), _0x59e74e[_0x7d281b(0x38f)](_0x5b6ad9)); } catch (_0x130993) { _0x1f68f4[_0x7d281b(0x8d9)](_0x7d281b(0x3d0), _0x130993); } else _0x4480e9[_0x7d281b(0x54e)] === _0x7d281b(0xaff) && !_0x4480e9[_0x7d281b(0x5c4)] && (_0x7d281b(0x35d) === _0x7d281b(0x55f) ? (_0x3fa489[_0x7d281b(0x356)] = _0x7d281b(0x9fc), _0x2ecd39[_0x7d281b(0xb00)] = _0x7d281b(0x27b)) : (_0x4480e9[_0x7d281b(0x422)](), _0x3740c5())); }); const _0x432263 = [_0x808d0(0x503), _0x808d0(0x223), _0x808d0(0x74d), _0x808d0(0xb8e), _0x808d0(0x383)]; _0x432263['forEach'](_0x29eb38 => { const _0x28bdde = _0x808d0, _0x570938 = document[_0x28bdde(0x463)](_0x28bdde(0x4e0) + _0x29eb38 + _0x28bdde(0x66d)), _0x151884 = document[_0x28bdde(0x463)]('char-edit-sprite-' + _0x29eb38 + _0x28bdde(0xb6a)); _0x570938 && _0x151884 && (_0x570938[_0x28bdde(0x582)](_0x28bdde(0x3bf), () => _0x151884[_0x28bdde(0x3bf)]()), _0x151884[_0x28bdde(0x582)](_0x28bdde(0x236), _0x203b29 => { const _0x26c514 = _0x28bdde, _0x49b85b = _0x203b29['target'][_0x26c514(0x4b6)][0x0]; if (!_0x49b85b) return; try { const _0x48eea5 = URL[_0x26c514(0x51e)](_0x49b85b); _0x570938[_0x26c514(0x80c)][_0x26c514(0x4b2)] = _0x26c514(0x205) + _0x48eea5 + '\x27)'; } catch (_0x449071) { _0x24537c(_0x26c514(0x619) + _0x449071[_0x26c514(0x9fa)]); } })); }), document[_0x808d0(0x463)](_0x808d0(0x4ca))[_0x808d0(0x582)]('click', _0x35fd2e), document[_0x808d0(0x463)](_0x808d0(0xac8))[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0x4b0196 = _0x808d0; _0x4b0196(0x516) !== _0x4b0196(0x45f) ? (_0x5f0a6c['meetingViewMode'] = _0x5f0a6c[_0x4b0196(0x9f8)] === 'novel' ? 'galgame' : _0x4b0196(0x79c), _0x45f251()) : (_0x2eaa54[_0x4b0196(0xb01)] = _0x430ea6[_0x4b0196(0x51e)](_0x1929dd), _0x1d6ebe[_0x4b0196(0x80c)][_0x4b0196(0x6df)] = 'block', _0x3d535a[_0x4b0196(0x80c)][_0x4b0196(0x99b)] = 'none', _0xd4815d[_0x4b0196(0x80c)][_0x4b0196(0x4e1)] = _0x4b0196(0x342)); }), document[_0x808d0(0x463)]('meeting-scene-view')['addEventListener']('mousedown', _0xdb411e), document['getElementById'](_0x808d0(0x72b))[_0x808d0(0x582)](_0x808d0(0x8f8), _0xdb411e, { 'passive': ![] }); let _0x30196b = null; function _0xdb411e(_0x657510) { const _0x5d9821 = _0x808d0; if (_0x30196b) clearTimeout(_0x30196b); const _0x366d6d = _0x657510[_0x5d9821(0x606)][_0x5d9821(0x23b)](_0x5d9821(0x64f)); if (!_0x366d6d) return; const _0x568eb2 = parseInt(_0x366d6d['dataset'][_0x5d9821(0xb7b)], 0xa); if (isNaN(_0x568eb2)) return; const _0x17d508 = () => { const _0xe3ce81 = _0x5d9821; _0xe3ce81(0x7af) === _0xe3ce81(0x69e) ? (_0x9cf24f[_0xe3ce81(0xa59)](_0x4bb5b6), _0x26d640[_0xe3ce81(0xa59)](_0x1b863f)) : _0x30196b = setTimeout(() => { const _0x450381 = _0xe3ce81; if (_0x450381(0x6b2) === 'hVLRy') _0x38bb9a(), _0x539f5a(_0x450381(0x2be), _0x450381(0x42d)); else { if (_0x657510[_0x450381(0xc02)] === _0x450381(0x8f8)) _0x657510['preventDefault'](); _0x427353(_0x568eb2); } }, 0x320); }, _0x4147ef = () => { if (_0x30196b) clearTimeout(_0x30196b); }; document['addEventListener'](_0x5d9821(0x4eb), _0x4147ef, { 'once': !![] }), document[_0x5d9821(0x582)](_0x5d9821(0x65f), _0x4147ef, { 'once': !![] }), document[_0x5d9821(0x582)](_0x5d9821(0x4ec), _0x4147ef, { 'once': !![] }), document[_0x5d9821(0x582)](_0x5d9821(0x228), _0x4147ef, { 'once': !![] }), _0x17d508(); } document[_0x808d0(0xb9d)]['addEventListener'](_0x808d0(0x3bf), _0x51ca6e => { const _0x428bb4 = _0x808d0; if ('pqsDb' === _0x428bb4(0x5fe)) { const _0x21740e = _0x51ca6e['target']['closest'](_0x428bb4(0x799)); if (_0x21740e) { if (_0x428bb4(0x526) !== _0x428bb4(0x762)) { const _0x17ec76 = _0x51ca6e[_0x428bb4(0x606)][_0x428bb4(0x23b)]('.lt-end-session-btn'), _0x4b27ea = _0x51ca6e[_0x428bb4(0x606)][_0x428bb4(0x23b)](_0x428bb4(0xa3d)); if (_0x17ec76) { if (_0x428bb4(0x239) === 'GyIuj') _0x122702(); else { const _0x4c195a = _0x3ad311[_0x428bb4(0x3be)](_0x36eaf9 => _0x36eaf9[_0x428bb4(0x3b3)] === _0x3c2f1f[_0x428bb4(0xbec)]); if (_0x4c195a) { const _0x1b13e8 = { 'role': _0x428bb4(0x41d), 'content': '[AI发送了表情：' + _0x4c195a[_0x428bb4(0x3b3)] + ']', 'displayUrl': _0x4c195a[_0x428bb4(0xb0d)], 'senderId': _0x57c21e['senderId'], 'timestamp': _0x223a6e[_0x428bb4(0xb71)](), 'isOffline': _0x8b697e }; _0x4f11d1[_0x428bb4(0xbc8)][_0x428bb4(0x1e6)](_0x1b13e8), _0x4076f2(), _0x38f965(); } } } else { if (_0x4b27ea) { if (_0x428bb4(0x3f5) !== _0x428bb4(0x3f5)) _0x27d3c0(_0x51d146['id']); else { const _0x5acc19 = _0x4b27ea[_0x428bb4(0x23b)](_0x428bb4(0x1fc)), _0x22ebb6 = _0x4b27ea[_0x428bb4(0x607)][_0x428bb4(0x825)], _0x54d06c = parseInt(_0x5acc19[_0x428bb4(0x607)]['historyIndex'], 0xa); _0x883f72(_0x22ebb6, _0x54d06c, _0x21740e); } } else { if ('oBqGn' === _0x428bb4(0x50f)) { const _0x217758 = _0x749993[_0x428bb4(0x463)](_0x2c96fe); if (_0x217758 && _0x50123f) _0x217758[_0x428bb4(0xb01)] = _0x2ee3b9['createObjectURL'](_0x5c7aa2); } else { const _0x49857e = _0x168762(); _0x49857e && _0x49857e['activeListenSession'] && _0x49857e[_0x428bb4(0xc16)][_0x428bb4(0x40c)] && (_0x3f286d[_0x428bb4(0x80c)][_0x428bb4(0x6df)] = 'flex', setTimeout(() => _0x3f286d[_0x428bb4(0x776)][_0x428bb4(0xb2c)](_0x428bb4(0x940)), 0xa)); } } } return; } else { if (_0x330701[_0x428bb4(0xb2b)][_0x428bb4(0xa1c)](_0xf6ab0f[_0x428bb4(0x202)])) _0x5e47d5[_0x428bb4(0x8a6)] = !![]; } } if (window[_0x428bb4(0x4a5)]()['toString']()) return; const _0x5b6284 = _0x51ca6e[_0x428bb4(0x606)]['closest'](_0x428bb4(0x1fc)); if (_0x5b6284 && !_0x51ca6e[_0x428bb4(0x606)][_0x428bb4(0x23b)](_0x428bb4(0x5fc))) { if ('TVczU' !== _0x428bb4(0x757)) { const _0x147976 = parseInt(_0x5b6284[_0x428bb4(0x607)][_0x428bb4(0xb7b)], 0xa); if (!isNaN(_0x147976)) { if (_0x428bb4(0x8b2) !== _0x428bb4(0x8b2)) { const _0x3af166 = _0x415ab3(_0x343bac[_0x428bb4(0x3d4)][0x0]); _0x1c6803[_0x428bb4(0x356)] = _0x3af166 ? _0x3af166['name'] : '未知角色'; } else _0x427353(_0x147976); } } else _0x5c28ec[_0x428bb4(0x776)][_0x428bb4(0x554)]('visible'), _0xca5cc5[_0x428bb4(0x776)][_0x428bb4(0x554)](_0x428bb4(0x666)); } } else _0x13fc17 *= _0x108d04 / _0x353edb, _0x53fd73 = _0xc06ca8; }); const _0x4800da = document[_0x808d0(0x463)]('noir-author-mark'); if (_0x4800da) { if (_0x808d0(0x529) !== _0x808d0(0x632)) _0x4800da[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0x219236 = _0x808d0; _0x24537c(_0x219236(0x815)); }); else { _0xb89600[_0x808d0(0xb00)] = _0x808d0(0x5da); return; } } const _0x33bb42 = document[_0x808d0(0x463)]('custom-stickers-input'), _0x9ef70 = localStorage[_0x808d0(0x6b4)]('customStickers'); if (_0x9ef70) try { if (_0x808d0(0x36e) === _0x808d0(0x83f)) { const _0x1defa3 = _0x1b3a35(_0x63ace1), _0x59fc91 = _0x2bcdb5[_0x808d0(0x463)](_0x808d0(0x262)); _0x59fc91[_0x808d0(0x80c)][_0x808d0(0x4b2)] = ''; let _0x513e69 = _0x414c99[_0x808d0(0x463)](_0x808d0(0x683) + _0x39f0c1); if (_0x513e69) _0x513e69[_0x808d0(0xb00)] = ''; if (!_0x1defa3) return; _0x1defa3[_0x808d0(0x907)] && (_0x59fc91['style'][_0x808d0(0x4b2)] = _0x808d0(0x205) + _0x1defa3[_0x808d0(0x907)] + '\x27)', _0x59fc91[_0x808d0(0x80c)][_0x808d0(0x4b0)] = 'cover', _0x59fc91[_0x808d0(0x80c)]['backgroundPosition'] = 'center'); if (_0x1defa3[_0x808d0(0x450)]) { let _0x59a8e2 = _0x2f58a1[_0x808d0(0x463)](_0x808d0(0x683) + _0x1defa3['id']); !_0x59a8e2 && (_0x59a8e2 = _0x139672[_0x808d0(0x58b)](_0x808d0(0x80c)), _0x59a8e2['id'] = 'style-' + _0x1defa3['id'], _0x119264['head'][_0x808d0(0xa59)](_0x59a8e2)); const _0xe55e6e = _0x1defa3[_0x808d0(0x450)], _0x4958ec = _0xe55e6e['replace'](/\.bubble\.sent/g, _0x808d0(0x557) + _0x1defa3['id'] + _0x808d0(0xafb))['replace'](/\.bubble\.received/g, _0x808d0(0x557) + _0x1defa3['id'] + _0x808d0(0xa14)); _0x59a8e2[_0x808d0(0xb00)] = _0x4958ec; } } else { const _0x149dc0 = JSON[_0x808d0(0x433)](_0x9ef70); Array['isArray'](_0x149dc0) && (_0x33bb42[_0x808d0(0x202)] = _0x149dc0[_0x808d0(0x575)](_0x39bfc2 => _0x39bfc2[_0x808d0(0x3b3)] + '--' + _0x39bfc2[_0x808d0(0xb0d)])[_0x808d0(0x3b9)]('\x0a')); } } catch (_0x5c0479) { } document['getElementById'](_0x808d0(0x3eb))[_0x808d0(0x582)]('click', () => { const _0x2b9fac = _0x808d0, _0x307f34 = _0x33bb42[_0x2b9fac(0x202)], _0xa2bdc8 = _0x307f34['split']('\x0a')['filter'](_0x10196a => _0x10196a[_0x2b9fac(0x1e9)]() !== ''), _0x4fef71 = []; let _0xa99541 = 0x0; for (const _0x516932 of _0xa2bdc8) { const _0x118e7a = _0x516932[_0x2b9fac(0x278)]('--'); _0x118e7a[_0x2b9fac(0x55b)] === 0x2 && _0x118e7a[0x0]['trim']() && _0x118e7a[0x1]['trim']()[_0x2b9fac(0x595)](_0x2b9fac(0x3b2)) ? _0x4fef71[_0x2b9fac(0x1e6)]({ 'name': _0x118e7a[0x0][_0x2b9fac(0x1e9)](), 'url': _0x118e7a[0x1]['trim']() }) : _0xa99541++; } _0xa99541 > 0x0 && _0x24537c('有\x20' + _0xa99541 + '\x20行格式不对，被我无视了。'); try { if (_0x2b9fac(0x56f) !== _0x2b9fac(0xb37)) localStorage[_0x2b9fac(0x246)](_0x2b9fac(0xb3b), JSON[_0x2b9fac(0x38f)](_0x4fef71)), _0x24537c('表情包已保存！正在刷新应用...'), setTimeout(() => location[_0x2b9fac(0x4df)](), 0x5dc); else { if (_0x30b820 === null) return; _0x53ce11[_0x2b9fac(0xbc8)][_0x2b9fac(0x4a7)](_0x45c591, 0x1), _0x4d462f(), _0x16b016(), _0x2a3c77(); } } catch (_0x21be49) { if ('Nuqfr' === 'wrPHq') { const _0x3cca7f = _0x58762f[_0x2b9fac(0x591)][_0x2b9fac(0x4d7)](); _0x1dbefd[_0x2b9fac(0x356)] = _0x3cca7f[_0x2b9fac(0x460)] === _0x2b9fac(0x3f9) ? '旁白' : _0x3cca7f[_0x2b9fac(0x460)], _0x42345c['textContent'] = _0x3cca7f[_0x2b9fac(0x81d)], _0x3cca7f[_0x2b9fac(0x460)] !== _0x2b9fac(0x3f9) && _0x58863d(_0x49f643[_0x2b9fac(0x5c3)], _0x3cca7f['emotion']); } else _0x24537c('保存失败，你的表情包是不是太多了？'); } }), _0x59a011(), document['getElementById']('upload-card-button-2')[_0x808d0(0x582)](_0x808d0(0x3bf), () => { const _0x4338c5 = _0x808d0; _0x4338c5(0xb8f) !== _0x4338c5(0x4b5) ? document[_0x4338c5(0x463)](_0x4338c5(0x71f))[_0x4338c5(0x3bf)]() : _0x4dc560[_0x4338c5(0x1e6)](_0x7e7048); }), document[_0x808d0(0x463)](_0x808d0(0xbcf))[_0x808d0(0x582)](_0x808d0(0x3bf), async () => { const _0x3693b8 = _0x808d0; _0x3693b8(0x52c) === _0x3693b8(0x52c) ? (await _0x15bd83(_0x3693b8(0x32d)), localStorage[_0x3693b8(0x805)](_0x3693b8(0x5b9)), _0xcb24a2(), _0x24537c('卡片\x202\x20已移除。')) : _0x344a62[_0x3693b8(0x805)](_0x3693b8(0x3c3) + _0x30b9e6[_0x3693b8(0x1e1)]); }), document[_0x808d0(0x463)](_0x808d0(0x71f))[_0x808d0(0x582)]('change', async _0x3b779d => { const _0x3dded7 = _0x808d0, _0x3db9a5 = _0x3b779d[_0x3dded7(0x606)][_0x3dded7(0x4b6)][0x0]; if (!_0x3db9a5) return; try { await _0x4d5a5e(_0x3dded7(0x32d), _0x3db9a5), await _0xcb24a2(), _0x24537c(_0x3dded7(0xbbd)); } catch (_0x11aa25) { _0x24537c(_0x3dded7(0x72e) + _0x11aa25[_0x3dded7(0x9fa)]); } }), _0x34a046(), _0x486e7d(), _0x9108c9(), document[_0x808d0(0x463)](_0x808d0(0x326))[_0x808d0(0x582)](_0x808d0(0x3bf), async () => { const _0x123218 = _0x808d0, _0x3df9e8 = await _0x1ec207(_0x123218(0x3f2)); if (_0x3df9e8) { const _0x10735e = await _0x1ec207(_0x123218(0x76c)); if (_0x10735e) { if (_0x123218(0x87d) !== _0x123218(0x87d)) _0x21e196[_0x123218(0x811)] = ![]; else { _0x2aa27a(!![], _0x123218(0x5e7)); try { localStorage[_0x123218(0x87b)](); const _0x5e0ab1 = await _0x3a9eb0, _0x316e33 = _0x5e0ab1[_0x123218(0x98e)](['images', _0x123218(0x2db), _0x123218(0xb04)], _0x123218(0x775)); await Promise[_0x123218(0xa8c)]([_0x316e33[_0x123218(0xb08)]('images')[_0x123218(0x87b)](), _0x316e33['objectStore'](_0x123218(0x2db))[_0x123218(0x87b)](), _0x316e33[_0x123218(0xb08)](_0x123218(0xb04))[_0x123218(0x87b)]()]), await new Promise(_0x4b5a37 => { const _0x5a74ef = _0x123218; if ('RlltM' !== _0x5a74ef(0x25b)) return _0xddea40['slice'](0x0, 0x9); else _0x316e33['oncomplete'] = _0x4b5a37; }), _0x24537c('净化完成！应用即将重启。'), setTimeout(() => { const _0x235a68 = _0x123218; if (_0x235a68(0xaaf) === _0x235a68(0x82d)) { _0x2768b1[_0x235a68(0x5b1)]('没有角色需要恢复头像，跳过。'); return; } else location[_0x235a68(0x4df)](); }, 0x5dc); } catch (_0x529b5d) { _0x2aa27a(![]), _0x24537c(_0x123218(0x696) + _0x529b5d[_0x123218(0x9fa)]); } } } } }); const _0x3da588 = document['querySelector'](_0x808d0(0x4cd)); if (_0x3da588) { const _0x2e67a0 = document[_0x808d0(0x58b)](_0x808d0(0xbdf)); _0x2e67a0['id'] = 'api-watermark', _0x2e67a0[_0x808d0(0x356)] = _0x808d0(0x637), Object[_0x808d0(0xac1)](_0x2e67a0[_0x808d0(0x80c)], { 'position': _0x808d0(0x7e0), 'top': _0x808d0(0x875), 'right': _0x808d0(0x6d8), 'fontSize': '0.7rem', 'lineHeight': _0x808d0(0xb49), 'color': _0x808d0(0x75d), 'opacity': _0x808d0(0x22d), 'cursor': 'pointer', 'zIndex': '1', 'transition': _0x808d0(0x958), 'whiteSpace': _0x808d0(0xa3b), 'textAlign': _0x808d0(0xaac) }), _0x2e67a0['onmouseover'] = () => { const _0x216f5d = _0x808d0; _0x2e67a0['style'][_0x216f5d(0x801)] = '1'; }, _0x2e67a0[_0x808d0(0x5a8)] = () => { const _0x49fb9a = _0x808d0; _0x49fb9a(0x2eb) === _0x49fb9a(0xaf3) ? (_0x57317a(_0x29a53f['value']), _0x1d0157()) : _0x2e67a0['style'][_0x49fb9a(0x801)] = '0.5'; }, _0x2e67a0['addEventListener'](_0x808d0(0x3bf), () => { const _0x1d3c2f = _0x808d0; window['open'](_0x1d3c2f(0xc1b), _0x1d3c2f(0xbdb)); }), _0x3da588[_0x808d0(0x80c)][_0x808d0(0x676)] = _0x808d0(0x65a), _0x3da588[_0x808d0(0xad0)](_0x2e67a0); } } const _0x47a7e7 = _0x2481c4(0x2db); async function _0x602038(_0x20758e) { const _0x18b9bc = _0x2481c4; if (_0x18b9bc(0x291) === _0x18b9bc(0xc33)) { const _0x4ecdc6 = _0x547cf2(_0x19e7d6['activeChatId']); _0x43136 = _0x4ecdc6['avatar'] || _0x10c027; const _0x4f8a5a = _0xc3ec28(_0x4e374c?.[_0x18b9bc(0x3d4)][0x0]); _0x4f8a5a && (_0x2e5e08 = _0x4f8a5a[_0x18b9bc(0x1fa)] || ''); } else { const _0x4b3bc2 = await _0x3a9eb0; return new Promise((_0x329552, _0x8ed24e) => { const _0x647481 = _0x18b9bc, _0x4adfd5 = _0x4b3bc2[_0x647481(0x98e)](_0x47a7e7, _0x647481(0xb8d)), _0x599baa = _0x4adfd5[_0x647481(0xb08)](_0x47a7e7), _0x5d002e = _0x599baa[_0x647481(0x7a6)](_0x20758e); _0x5d002e['onsuccess'] = () => _0x329552(_0x5d002e['result']), _0x5d002e[_0x647481(0x4d1)] = () => _0x8ed24e(_0x5d002e['error']); }); } } async function _0x3a8ec3() { const _0x26bbcf = _0x2481c4; if ('mfnLh' === _0x26bbcf(0x40d)) { const _0x308a3a = await _0x3a9eb0; return new Promise((_0x3f7ae0, _0x3ca439) => { const _0x56bf8c = _0x26bbcf; if (_0x56bf8c(0x4fa) === 'CXsnf') { const _0x340e5d = _0x5e4261['getElementById'](_0x56bf8c(0x62f)); _0x323a57[_0x56bf8c(0x7c4)] && _0x421fdb[_0x56bf8c(0x85d)] ? _0x340e5d[_0x56bf8c(0xa7f)] = ![] : _0x340e5d[_0x56bf8c(0xa7f)] = !![]; } else { const _0x48b844 = _0x308a3a[_0x56bf8c(0x98e)](_0x47a7e7, _0x56bf8c(0xb8d)), _0x3df9f0 = _0x48b844[_0x56bf8c(0xb08)](_0x47a7e7), _0x2b0823 = _0x3df9f0[_0x56bf8c(0xa50)](); _0x2b0823['onsuccess'] = () => _0x3f7ae0(_0x2b0823[_0x56bf8c(0x77c)]), _0x2b0823['onerror'] = () => _0x3ca439(_0x2b0823[_0x56bf8c(0x8d9)]); } }); } else { const _0x1433db = _0x42e015(_0x395fc3); if (!_0x1433db) return; _0x568a2f[_0x26bbcf(0x504)] = _0x3be8d7; const _0x318ad1 = _0x2d8dd5[_0x26bbcf(0x60c)][_0x26bbcf(0x3be)](_0x5c85ae => _0x5c85ae[_0x26bbcf(0xba0)] === _0x3a4ba7), _0x2a6574 = _0x318ad1 ? _0x318ad1['entries'][_0x26bbcf(0x55b)] : 0x0, _0x281ffa = 0x2; _0x53f60a[_0x26bbcf(0xa8a)] = _0x5322c7[_0x26bbcf(0x66e)](0x0, _0x12bd43['ceil'](_0x2a6574 / _0x281ffa) - 0x1), _0x5d0e88[_0x26bbcf(0x463)](_0x26bbcf(0x4e3))[_0x26bbcf(0x356)] = _0x1433db['name'] + '的日记本', _0x14350a(), _0x36e2e6(_0x26bbcf(0x78d), _0x26bbcf(0x2ce)); } } async function _0x5f45fa(_0x46156e) { const _0xc67a1f = _0x2481c4; if ('VuvPY' !== _0xc67a1f(0x338)) { _0x47a6e7(); const _0x2582a6 = _0x3e5a8d[_0xc67a1f(0xb32)][_0xc67a1f(0x3be)](_0x2eb23b => _0x2eb23b['id'] === _0x66e7c4); if (!_0x2582a6) return; _0x568255[_0xc67a1f(0x64b)] = _0x2dce87, _0xdb5fe9(), _0x99baea['getElementById'](_0xc67a1f(0x895))[_0xc67a1f(0x356)] = _0x2582a6[_0xc67a1f(0x3b3)], _0x11967(), _0x5ccbb0(_0xc67a1f(0xa1d), _0xc67a1f(0x48a)), _0x1bd995(); } else { const _0x1a0f21 = await _0x3a9eb0; return new Promise((_0x40b97e, _0x1755c1) => { const _0x354cb6 = _0xc67a1f, _0x523b58 = _0x1a0f21['transaction'](_0x47a7e7, _0x354cb6(0x775)), _0x19d90b = _0x523b58[_0x354cb6(0xb08)](_0x47a7e7), _0x363dd4 = _0x19d90b[_0x354cb6(0x71e)](_0x46156e); _0x363dd4[_0x354cb6(0x241)] = () => _0x40b97e(_0x363dd4[_0x354cb6(0x77c)]), _0x363dd4[_0x354cb6(0x4d1)] = () => _0x1755c1(_0x363dd4[_0x354cb6(0x8d9)]); }); } } async function _0x3014d4(_0x16da6f) { const _0x35838c = _0x2481c4; if (_0x35838c(0xab7) === _0x35838c(0xab7)) { const _0x337509 = await _0x3a9eb0; return new Promise((_0x532ef9, _0x4a0d77) => { const _0x4315dd = _0x35838c, _0x17eb8e = _0x337509[_0x4315dd(0x98e)](_0x47a7e7, _0x4315dd(0x775)), _0x2b0cde = _0x17eb8e[_0x4315dd(0xb08)](_0x47a7e7), _0x473736 = _0x2b0cde['delete'](_0x16da6f); _0x473736[_0x4315dd(0x241)] = () => _0x532ef9(), _0x473736[_0x4315dd(0x4d1)] = () => _0x4a0d77(_0x473736[_0x4315dd(0x8d9)]); }); } else _0x23f007[_0x35838c(0x582)]('click', () => { const _0x5c13a2 = _0x35838c; if (_0x3a532a[_0x5c13a2(0x55b)] === 0x0) return; _0x1ed7e3 = (_0x3ad9e6 - 0x1 + _0x49db28['length']) % _0x4fe78d['length'], _0x19d93e(_0x27edbe[_0x49d913], _0x49191); }); } let _0x221b08 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x300ea5 = { 'audio': document[_0x2481c4(0x463)](_0x2481c4(0x714)), 'cover': document[_0x2481c4(0x463)](_0x2481c4(0x88e)), 'info': document[_0x2481c4(0x463)](_0x2481c4(0xc00)), 'lyrics': document[_0x2481c4(0x463)](_0x2481c4(0x783)) }, _0x285956 = { 'audio': document[_0x2481c4(0x463)](_0x2481c4(0x88d)), 'cover': document[_0x2481c4(0x463)]('cover-file-input'), 'info': document['getElementById'](_0x2481c4(0x209)), 'lyrics': document[_0x2481c4(0x463)](_0x2481c4(0x96b)) }; for (const _0xdf0ce9 in _0x300ea5) { _0x300ea5[_0xdf0ce9][_0x2481c4(0x582)]('click', () => _0x285956[_0xdf0ce9][_0x2481c4(0x3bf)]()), _0x285956[_0xdf0ce9][_0x2481c4(0x582)](_0x2481c4(0x236), _0x7c369e => { const _0x2bcd1c = _0x2481c4; _0x45ee66(_0xdf0ce9, _0x7c369e[_0x2bcd1c(0x606)][_0x2bcd1c(0x4b6)][0x0]); }); } function _0x45ee66(_0x577f17, _0x28a836) { const _0x4de5e2 = _0x2481c4; if (!_0x28a836) return; _0x221b08[_0x577f17] = _0x28a836, _0x300ea5[_0x577f17][_0x4de5e2(0x7dd)](_0x4de5e2(0x645))[_0x4de5e2(0x356)] = _0x28a836[_0x4de5e2(0x3b3)], _0x300ea5[_0x577f17][_0x4de5e2(0x776)][_0x4de5e2(0xb2c)]('filled'), _0x2d658f(); } function _0x2d658f() { const _0x12bd58 = _0x2481c4, _0x3513b3 = document[_0x12bd58(0x463)](_0x12bd58(0x62f)); _0x221b08[_0x12bd58(0x7c4)] && _0x221b08[_0x12bd58(0x85d)] ? _0x3513b3[_0x12bd58(0xa7f)] = ![] : _0x3513b3[_0x12bd58(0xa7f)] = !![]; } function _0x286986() { const _0x963122 = _0x2481c4; _0x221b08 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x38d5a3 in _0x300ea5) { _0x300ea5[_0x38d5a3][_0x963122(0x776)][_0x963122(0x554)](_0x963122(0x910)), _0x285956[_0x38d5a3][_0x963122(0x202)] = ''; } _0x300ea5['audio']['querySelector']('.slot-filename')[_0x963122(0x356)] = _0x963122(0x1d0), _0x300ea5['cover'][_0x963122(0x7dd)](_0x963122(0x645))['textContent'] = _0x963122(0xa65), _0x300ea5[_0x963122(0x85d)][_0x963122(0x7dd)](_0x963122(0x645))[_0x963122(0x356)] = _0x963122(0x4a0), _0x300ea5[_0x963122(0x86b)]['querySelector']('.slot-filename')[_0x963122(0x356)] = _0x963122(0x609), _0x2d658f(); } document['getElementById'](_0x2481c4(0x62f))[_0x2481c4(0x582)]('click', async () => { const _0x363bea = _0x2481c4; if (!_0x221b08[_0x363bea(0x7c4)] || !_0x221b08[_0x363bea(0x85d)]) { if (_0x363bea(0xb83) === _0x363bea(0xb13)) _0x9d1421[_0x363bea(0x8d9)]('加载卡片图片失败', _0x11200b); else { _0x24537c(_0x363bea(0xa19)); return; } } await _0x521bce(); }), document[_0x2481c4(0x463)](_0x2481c4(0x855))[_0x2481c4(0x582)]('click', () => { const _0x92ebae = _0x2481c4; if (_0x92ebae(0x8e7) !== 'KoBoi') { _0x5709c8(![]), _0xfd96c(_0x92ebae(0x7c9)); return; } else _0x286986(), _0x1922fc(_0x92ebae(0xc07), 'musicLibrary'); }), document[_0x2481c4(0x463)](_0x2481c4(0x41c))[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x131cc4 = _0x2481c4; if (_0x131cc4(0x507) === _0x131cc4(0x258)) return _0x131cc4(0x2aa); else _0x1922fc(_0x131cc4(0x425), _0x131cc4(0xc07)); }); async function _0x521bce() { const _0x3ba6b9 = _0x2481c4; if (_0x3ba6b9(0x3a4) !== _0x3ba6b9(0x7c0)) { _0x2aa27a(!![], _0x3ba6b9(0x45c)); try { if ('NIISS' === _0x3ba6b9(0x6a7)) _0x45d8e6[_0x3ba6b9(0x554)](); else { const _0x1d9f37 = await _0x221b08[_0x3ba6b9(0x85d)][_0x3ba6b9(0x3a1)](); let _0x563086; if (_0x1d9f37['trim']()['startsWith']('{')) _0x563086 = JSON[_0x3ba6b9(0x433)](_0x1d9f37); else { _0x563086 = {}; const _0x455500 = _0x1d9f37[_0x3ba6b9(0x278)]('\x0a'); _0x455500[_0x3ba6b9(0xbe4)](_0x3087d8 => { const _0x550996 = _0x3ba6b9, _0x2e50cb = _0x3087d8[_0x550996(0x278)](/:\s|：\s/); if (_0x2e50cb[_0x550996(0x55b)] === 0x2) { const _0x121b8f = _0x2e50cb[0x0]['trim'](), _0x146c9e = _0x2e50cb[0x1][_0x550996(0x1e9)](), _0x592a03 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x592a03[_0x121b8f] && (_0x563086[_0x592a03[_0x121b8f]] = _0x146c9e); } }); if (!_0x563086[_0x3ba6b9(0x7c2)]) throw new Error(_0x3ba6b9(0x476)); _0x563086[_0x3ba6b9(0x376)] = 'song_' + Date[_0x3ba6b9(0xb71)]() + '\x20'; } const _0x3ca205 = _0x3ba6b9(0x393) + (_0x563086[_0x3ba6b9(0x376)] || Date[_0x3ba6b9(0xb71)]()) + '\x20', _0x5766aa = { 'id': _0x3ca205, 'info': _0x563086, 'audio': _0x221b08['audio'], 'cover': _0x221b08['cover'], 'lyrics': _0x221b08[_0x3ba6b9(0x86b)] ? await _0x221b08[_0x3ba6b9(0x86b)][_0x3ba6b9(0x3a1)]() : '' }; await _0x5f45fa(_0x5766aa), await _0x2be269(), _0x2aa27a(![]), _0x24537c('歌曲“' + _0x563086[_0x3ba6b9(0x7c2)] + _0x3ba6b9(0x4fb)), _0x1922fc(_0x3ba6b9(0x425), _0x3ba6b9(0xc07)); } } catch (_0x24eeb2) { if ('pHIEX' === _0x3ba6b9(0x70c)) _0x2aa27a(![]), console[_0x3ba6b9(0x8d9)](_0x3ba6b9(0x817), _0x24eeb2), _0x24537c('上传失败了，笨蛋！\x20' + _0x24eeb2[_0x3ba6b9(0x9fa)] + '\x20'); else return { 'type': _0x3ba6b9(0xa1d), 'songName': _0x480e15[0x1][_0x3ba6b9(0x1e9)](), 'artist': _0x803dc7[0x2][_0x3ba6b9(0x1e9)]() }; } } else _0x51026a(!![]); } async function _0x2be269() { const _0x61446d = _0x2481c4; if (_0x61446d(0x7dc) === _0x61446d(0x6fe)) _0xbfd9d1[_0x61446d(0x356)] = _0x61446d(0x741); else { const _0xa1fa5b = document['getElementById']('music-library-container'); _0xa1fa5b[_0x61446d(0xb00)] = ''; const _0xd00021 = await _0x3a8ec3(); if (_0xd00021[_0x61446d(0x55b)] === 0x0) { if (_0x61446d(0x985) === 'fMzaX') _0x27c6ce[_0x61446d(0x7ae)] = _0x2b2cfa[_0x61446d(0x7ae)][_0x61446d(0x216)](_0x2d4e6b => _0x2d4e6b['id'] !== _0x5abab1), _0x2d81b3[_0x61446d(0xbb5)] === _0x2eb113 && (_0x3ef613[_0x61446d(0xbb5)] = _0x2b1d8c[_0x61446d(0x7ae)][0x0]['id']), _0x285f30[_0x61446d(0xab8)][_0x61446d(0xbe4)](_0x25ab71 => { const _0x236ac4 = _0x61446d; _0x25ab71['boundUserProfileId'] === _0x1628a7 && (_0x25ab71[_0x236ac4(0x763)] = _0x3ca7b2[_0x236ac4(0xbb5)]); }), _0x4e758a(), _0x47a039(_0x61446d(0x6f3)), _0x2cf389(), _0x1ee294(_0x61446d(0x211), _0x61446d(0x404)); else { _0xa1fa5b[_0x61446d(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } } _0xd00021[_0x61446d(0x61a)]((_0x29badc, _0xb8af19) => (_0x29badc[_0x61446d(0x85d)][_0x61446d(0x7c2)] || '')[_0x61446d(0xa02)](_0xb8af19[_0x61446d(0x85d)][_0x61446d(0x7c2)] || '')); for (const _0x22b8d6 of _0xd00021) { const _0x37dbe2 = document[_0x61446d(0x58b)]('div'); _0x37dbe2[_0x61446d(0x781)] = 'music-library-item', _0x37dbe2[_0x61446d(0x607)][_0x61446d(0x825)] = _0x22b8d6['id']; const _0x499a2f = _0x22b8d6[_0x61446d(0xa53)] ? URL['createObjectURL'](_0x22b8d6[_0x61446d(0xa53)]) : _0x25d84a; _0x37dbe2['innerHTML'] = _0x61446d(0x9ed) + _0x499a2f + _0x61446d(0x6f6) + (_0x22b8d6['info'][_0x61446d(0x7c2)] || _0x61446d(0x3df)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x22b8d6[_0x61446d(0x85d)]['歌手'] || '未知艺术家') + _0x61446d(0x678); let _0x4c673d = null; const _0x1e09b3 = _0x5de5ad => { const _0x227e63 = _0x61446d; if (_0x227e63(0x8cf) !== 'ytkTz') return; else { if (_0x5de5ad[_0x227e63(0xb80)] === 0x2) return; _0x4c673d = setTimeout(async () => { const _0x3ed12a = _0x227e63; if (_0x5de5ad[_0x3ed12a(0xc02)] === _0x3ed12a(0x8f8)) _0x5de5ad[_0x3ed12a(0x422)](); const _0x39fec6 = await _0x1ec207(_0x3ed12a(0x5bd) + _0x22b8d6[_0x3ed12a(0x85d)]['歌曲名称'] + '》吗？'); _0x39fec6 && (_0x3ed12a(0xac4) !== _0x3ed12a(0x38d) ? (await _0x3014d4(_0x22b8d6['id']), await _0x2be269(), _0x24537c(_0x3ed12a(0x9b7))) : (_0xf8bd90[_0x3ed12a(0x8d9)](_0x3ed12a(0x6c2), _0x402127), _0x3f5e5e(_0x3ed12a(0x7c3) + _0x40f466[_0x3ed12a(0x9fa)]))); }, 0x320); } }, _0x28af48 = () => { const _0x183913 = _0x61446d; 'jOUKS' !== _0x183913(0x8cb) ? (_0x580d35['style'][_0x183913(0x4b2)] = 'url(\x27' + _0x2bf83f[_0x183913(0x907)] + '\x27)', _0x6de897[_0x183913(0x80c)][_0x183913(0x4b0)] = _0x183913(0xa53), _0x571b7e[_0x183913(0x80c)]['backgroundPosition'] = _0x183913(0x545)) : clearTimeout(_0x4c673d); }; _0x37dbe2[_0x61446d(0x582)](_0x61446d(0xb16), _0x1e09b3), _0x37dbe2[_0x61446d(0x582)](_0x61446d(0x4eb), _0x28af48), _0x37dbe2[_0x61446d(0x582)]('mouseleave', _0x28af48), _0x37dbe2['addEventListener']('touchstart', _0x1e09b3, { 'passive': ![] }), _0x37dbe2[_0x61446d(0x582)](_0x61446d(0x4ec), _0x28af48), _0x37dbe2[_0x61446d(0x582)](_0x61446d(0x228), _0x28af48), _0x37dbe2[_0x61446d(0x582)](_0x61446d(0x3bf), _0x1ccc62 => { const _0x4e0f9e = _0x61446d; if (_0x4c673d) clearTimeout(_0x4c673d); if (_0x1ccc62[_0x4e0f9e(0xb27)]) return; setTimeout(() => { const _0x4532ea = _0x4e0f9e; _0x4c673d && (_0x4532ea(0x1d9) !== _0x4532ea(0x381) ? _0x3d6b4e(_0x22b8d6['id'], _0xd00021[_0x4532ea(0x575)](_0x58d18a => _0x58d18a['id'])) : _0x776969('错误:\x20' + _0xc7ec3c['message'])); }, 0x32); }), _0xa1fa5b['appendChild'](_0x37dbe2); } } } _0x37aafb[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x44612f = _0x2481c4; _0x24537c(_0x44612f(0xb11)); }), _0x3d7bb6[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x4323dd = _0x2481c4; _0x24537c(_0x4323dd(0x759)); }); let _0x1fe05f = [], _0x1814ee = -0x1; async function _0x3d6b4e(_0x1c57ed, _0x344c4f) { const _0x5531f3 = _0x2481c4, _0x5525fb = await _0x602038(_0x1c57ed); if (!_0x5525fb) return; _0x1720bd = { 'title': _0x5525fb['info'][_0x5531f3(0x7c2)] || _0x5531f3(0x3df), 'artist': _0x5525fb[_0x5531f3(0x85d)]['歌手'] || _0x5531f3(0x454), 'cover': _0x5525fb['cover'] ? URL[_0x5531f3(0x51e)](_0x5525fb['cover']) : _0x25d84a, 'isFromLibrary': !![] }; const _0x18e32f = URL['createObjectURL'](_0x5525fb[_0x5531f3(0x7c4)]); _0x29fd86[_0x5531f3(0xb01)] = _0x18e32f, _0x29fd86[_0x5531f3(0x77a)](), _0x2c2157(); } async function _0x2c2157() { const _0x59ebba = _0x2481c4; if (_0x59ebba(0x1f8) === _0x59ebba(0x1f8)) { const _0x1c1880 = document[_0x59ebba(0x463)](_0x59ebba(0xb92)), _0x5320cd = document[_0x59ebba(0x463)](_0x59ebba(0x85b)), _0x37fd63 = document[_0x59ebba(0x463)](_0x59ebba(0xa6a)), _0x3a17f2 = document[_0x59ebba(0x463)](_0x59ebba(0x31f)), _0x87b147 = _0x1720bd; _0x87b147 && _0x87b147[_0x59ebba(0x672)] ? (_0x5320cd[_0x59ebba(0x356)] = _0x87b147[_0x59ebba(0x879)], _0x37fd63[_0x59ebba(0x356)] = _0x87b147['artist'], _0x1c1880[_0x59ebba(0x776)][_0x59ebba(0xb2c)](_0x59ebba(0x68d)), _0x1c1880[_0x59ebba(0x80c)][_0x59ebba(0x981)](_0x59ebba(0x93d), _0x59ebba(0x9a3) + _0x87b147[_0x59ebba(0xa53)] + ')')) : _0x59ebba(0x88f) === 'QBKFL' ? _0x5d1725(_0x436558['id']) : (_0x5320cd[_0x59ebba(0x356)] = '暂无音乐', _0x37fd63[_0x59ebba(0x356)] = '请在动态或聊天中播放', _0x1c1880['classList'][_0x59ebba(0x554)]('is-playing'), _0x3a17f2['style'][_0x59ebba(0x981)](_0x59ebba(0x93d), _0x59ebba(0x333))); } else _0x3ab55f(); } _0x37aafb && _0x37aafb[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x4e69f2 = _0x2481c4; if (_0x1fe05f[_0x4e69f2(0x55b)] === 0x0) return; _0x1814ee = (_0x1814ee + 0x1) % _0x1fe05f[_0x4e69f2(0x55b)], _0x3d6b4e(_0x1fe05f[_0x1814ee], _0x1fe05f); }); _0x3d7bb6 && _0x3d7bb6[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x1ca065 = _0x2481c4; if (_0x1fe05f[_0x1ca065(0x55b)] === 0x0) return; _0x1814ee = (_0x1814ee - 0x1 + _0x1fe05f['length']) % _0x1fe05f['length'], _0x3d6b4e(_0x1fe05f[_0x1814ee], _0x1fe05f); }); _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x77a), () => { const _0x1d8b7d = _0x2481c4; if (_0x46148c) _0x46148c[_0x1d8b7d(0x356)] = '❚❚'; }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x639), () => { const _0x19f619 = _0x2481c4; if (_0x19f619(0x583) === _0x19f619(0x437)) _0x3a9ad1[_0x19f619(0x80c)]['backgroundImage'] = 'url(\x27' + _0x4cfec7 + '\x27)'; else { if (_0x46148c) _0x46148c[_0x19f619(0x356)] = '▶'; } }), _0x29fd86[_0x2481c4(0x582)](_0x2481c4(0x572), () => { if (_0x37aafb) _0x37aafb['click'](); }); function _0x5b547b() { const _0x54c6af = _0x2481c4, _0x56b983 = _0x168762(); if (!_0x56b983) return; _0x39a4cc['innerHTML'] = '', _0x49d51f[_0x54c6af(0x202)] = '', _0x56b983[_0x54c6af(0xc02)] === _0x54c6af(0x74a) ? _0x54c6af(0x766) !== _0x54c6af(0x766) ? (_0x4c60b2 = _0x11cc4c['createElement'](_0x54c6af(0xbdf)), _0x5db69a[_0x54c6af(0x781)] = _0x54c6af(0x901), _0x4a3b77[_0x54c6af(0x356)] = _0x54c6af(0x91a), _0x4215a9['style'][_0x54c6af(0x6c5)] = _0x54c6af(0x646), _0xa11f4f[_0x54c6af(0x80c)][_0x54c6af(0x44d)] = _0x54c6af(0xb5e), _0x224b02['style'][_0x54c6af(0x421)] = _0x54c6af(0x83d), _0x41bb09['appendChild'](_0x200596)) : (_0x56b983[_0x54c6af(0x3d4)][_0x54c6af(0xbe4)](_0x12cb72 => { const _0x377c0e = _0x54c6af, _0x1f86ea = _0x543c76(_0x12cb72); if (_0x1f86ea) { if (_0x377c0e(0x481) !== 'bBAoK') { const _0x30239f = document[_0x377c0e(0x58b)]('option'); _0x30239f[_0x377c0e(0x202)] = _0x1f86ea['id'], _0x30239f[_0x377c0e(0x356)] = _0x1f86ea[_0x377c0e(0x3b3)], _0x39a4cc[_0x377c0e(0xa59)](_0x30239f); } else { if (_0x51cdc8) _0x3e20f0[_0x377c0e(0x356)] = '▶'; } } }), _0x20d699[_0x54c6af(0x80c)][_0x54c6af(0x6df)] = _0x54c6af(0x629)) : _0x20d699[_0x54c6af(0x80c)][_0x54c6af(0x6df)] = 'none', _0x1b1e35[_0x54c6af(0x776)][_0x54c6af(0xb2c)](_0x54c6af(0x940)), _0x49d51f[_0x54c6af(0x5c5)](); } function _0x4e9c65() { const _0x38aef6 = _0x2481c4; if (_0x38aef6(0x506) === 'VvZnR') { const _0x3de9b0 = _0x3000fc[_0x38aef6(0x606)]['result']; _0x5cee0c[_0x38aef6(0x5b1)](_0x38aef6(0x6c8) + _0x3de9b0[_0x38aef6(0xb19)] + _0x38aef6(0x7a0)), !_0x3de9b0[_0x38aef6(0x31a)][_0x38aef6(0x999)](_0x4a1028) && (_0x4d687c[_0x38aef6(0x5b1)]('Creating\x20object\x20store:\x20' + _0x4f8a10), _0x3de9b0[_0x38aef6(0x9d0)](_0x24f37a, { 'keyPath': 'id' })), !_0x3de9b0[_0x38aef6(0x31a)][_0x38aef6(0x999)](_0x38aef6(0x2db)) && (_0x55e7db['log']('Creating\x20object\x20store:\x20music_library'), _0x3de9b0[_0x38aef6(0x9d0)]('music_library', { 'keyPath': 'id' })), !_0x3de9b0[_0x38aef6(0x31a)][_0x38aef6(0x999)](_0x54d23d) && (_0x34ee7d['log'](_0x38aef6(0x492) + _0x4ef804), _0x3de9b0[_0x38aef6(0x9d0)](_0x30692d, { 'keyPath': 'id' })); } else { const _0x386a5e = parseFloat(_0x49d51f[_0x38aef6(0x202)]); if (isNaN(_0x386a5e) || _0x386a5e <= 0x0) { if ('ciLmk' !== _0x38aef6(0x2e9)) { _0x24537c(_0x38aef6(0x9d8)); return; } else { const _0x3c5e43 = _0x2fc8a7[_0x38aef6(0x463)](_0x38aef6(0x82a)); if (_0x3c5e43) _0x3c5e43[_0x38aef6(0x356)] = '❚❚'; } } const _0x3e32ea = _0x168762(); let _0x35686a = null; _0x3e32ea['type'] === _0x38aef6(0x74a) ? _0x35686a = _0x39a4cc[_0x38aef6(0x202)] : _0x38aef6(0x1ee) === _0x38aef6(0x1ee) ? _0x35686a = _0x3e32ea[_0x38aef6(0x3d4)][0x0] : _0x56dc15 += '-\x20你最近去过：“' + _0x2f29af[_0x38aef6(0x804)] + _0x38aef6(0x59e) + _0x3ff82f[_0x38aef6(0x514)] + _0x38aef6(0x5b3); const _0x4c63ac = _0x1f5ce5(_0x3e32ea['id']), _0x26eee7 = { 'role': 'user', 'type': _0x38aef6(0x97d), 'content': _0x38aef6(0x7e6) + (_0x543c76(_0x35686a)?.[_0x38aef6(0x3b3)] || '未知') + '\x20转账\x20' + _0x386a5e + ']', 'amount': _0x386a5e, 'recipientId': _0x35686a, 'senderId': _0x4c63ac['id'], 'timestamp': Date[_0x38aef6(0xb71)]() }; _0x5f0a6c['conversationHistory']['push'](_0x26eee7), _0x351209(), _0x1a8cc0(), _0x1b1e35[_0x38aef6(0x776)][_0x38aef6(0x554)](_0x38aef6(0x940)); } } async function _0x3f415e(_0x494ea7) { const _0x2df01d = _0x2481c4, _0x2f74de = _0x543c76(_0x494ea7); if (!_0x2f74de) return; const _0x51fbbc = await _0x1ec207('确定要永久清空【' + _0x2f74de[_0x2df01d(0x3b3)] + _0x2df01d(0xae9)); if (!_0x51fbbc) return; const _0x404b14 = _0x5f0a6c[_0x2df01d(0x60c)][_0x2df01d(0x461)](_0x256257 => _0x256257[_0x2df01d(0xba0)] === _0x494ea7); if (_0x404b14 > -0x1) { if (_0x2df01d(0x3f7) !== 'USxjJ') { const _0x4284c4 = _0x50c71b[_0x2df01d(0xb2b)][_0x2df01d(0x575)](_0x97d45b => _0x1224f4[_0x2df01d(0x7ad)]['find'](_0x40acd3 => _0x40acd3['id'] === _0x97d45b))[_0x2df01d(0x216)](_0x5a8127)[_0x2df01d(0x575)](_0xa06ec7 => _0x2df01d(0x3ad) + _0xa06ec7[_0x2df01d(0x3b3)] + '\x0a' + _0xa06ec7['content'])['join'](''); _0x4284c4 && (_0x5676f2 = _0x2df01d(0x4dd) + _0x4284c4); } else _0x5f0a6c['diaries'][_0x2df01d(0x4a7)](_0x404b14, 0x1), _0x5c772f(), _0x4a8bba(), _0x24537c('【' + _0x2f74de[_0x2df01d(0x3b3)] + _0x2df01d(0xab9)); } else { if (_0x2df01d(0xacf) !== _0x2df01d(0xacf)) { let _0xc1f93d = _0x27d5b2['trim'](); const _0x2c0e06 = _0xc1f93d[_0x2df01d(0x294)](/(\[[\s\S]*\])/); _0x2c0e06 && (_0xc1f93d = _0x2c0e06[0x1]); const _0x1dbba0 = _0x4edf60['parse'](_0xc1f93d); if (_0x45936d[_0x2df01d(0x9d7)](_0x1dbba0)) { _0x32abb5[_0x2df01d(0x591)] = [..._0x1dbba0], _0x12c961['characterLastScripts'][_0x41a8a3['id']] = [..._0x1dbba0], _0x28ffc8(); const _0x4d7391 = _0x1dbba0[_0x2df01d(0x575)](_0x332c21 => _0x332c21[_0x2df01d(0x460)] === _0x2df01d(0x3f9) ? _0x332c21[_0x2df01d(0x81d)] : _0x332c21[_0x2df01d(0x460)] + ':\x20' + _0x332c21['line'])[_0x2df01d(0x3b9)]('\x0a\x0a'); _0x148e93[_0x2df01d(0xbc8)]['push']({ 'role': _0x2df01d(0x41d), 'senderId': _0x29837f['id'], 'timestamp': _0x1f4d95['now'](), 'isOffline': !![], 'content': _0x4d7391 }); } } else _0x24537c(_0x2df01d(0x65b)); } } function _0x330317() { const _0x36023f = _0x2481c4; if (_0x36023f(0x620) !== _0x36023f(0x620)) { const _0x379263 = _0x4a0c0c[_0x36023f(0x98e)](_0x5a073f, _0x36023f(0x775)), _0x32494b = _0x379263[_0x36023f(0xb08)](_0x53633d), _0x518cfe = _0x32494b[_0x36023f(0x71e)](_0x49c688); _0x518cfe['onsuccess'] = () => _0x4f7b42(_0x518cfe['result']), _0x518cfe['onerror'] = () => _0x2104a4(_0x518cfe[_0x36023f(0x8d9)]); } else { const _0x1167b3 = document[_0x36023f(0x463)]('snoop-character-list-container'); _0x1167b3[_0x36023f(0xb00)] = ''; const _0x19dc7a = _0x5f0a6c[_0x36023f(0x723)]['filter'](_0xed0385 => _0x5f0a6c[_0x36023f(0xab8)][_0x36023f(0x977)](_0x16c1d7 => _0x16c1d7[_0x36023f(0xc02)] === 'private' && _0x16c1d7[_0x36023f(0x3d4)][_0x36023f(0xa1c)](_0xed0385['id']))); if (_0x19dc7a[_0x36023f(0x55b)] === 0x0) { _0x1167b3[_0x36023f(0xb00)] = _0x36023f(0xa54); return; } _0x19dc7a['forEach'](_0x21db90 => { const _0x59f49e = _0x36023f; if (_0x59f49e(0x95c) !== _0x59f49e(0x2f8)) { const _0x4e48f3 = document[_0x59f49e(0x58b)]('li'); _0x4e48f3[_0x59f49e(0x781)] = 'character-item', _0x4e48f3[_0x59f49e(0x607)]['charId'] = _0x21db90['id'], _0x4e48f3[_0x59f49e(0xb00)] = _0x59f49e(0x75f) + (_0x21db90[_0x59f49e(0x6b6)] || _0x25d84a) + _0x59f49e(0x8d6) + _0x21db90[_0x59f49e(0x3b3)] + _0x59f49e(0x270) + _0x21db90[_0x59f49e(0x3b3)] + _0x59f49e(0x9aa), _0x4e48f3[_0x59f49e(0x7dd)](_0x59f49e(0x9ac))[_0x59f49e(0x582)](_0x59f49e(0x3bf), () => _0x3b6617(_0x21db90['id'])), _0x4e48f3[_0x59f49e(0x7dd)](_0x59f49e(0xb1a))[_0x59f49e(0x582)](_0x59f49e(0x3bf), async _0x2fe25f => { const _0x291997 = _0x59f49e; if (_0x291997(0x871) !== _0x291997(0x871)) { _0x2aaf97[_0x291997(0xb00)] = _0x291997(0x371); return; } else { _0x2fe25f['stopPropagation'](); const _0x50d88e = _0x543c76(_0x21db90['id']); if (!_0x50d88e) return; const _0x1064b5 = await _0x1ec207(_0x291997(0x32e) + _0x50d88e[_0x291997(0x3b3)] + _0x291997(0xa86)); if (_0x1064b5) { _0x2aa27a(!![], '正在焚烧【' + _0x50d88e[_0x291997(0x3b3)] + '】的旧数据...'); const _0x354d15 = [_0x291997(0x213), _0x291997(0x354), _0x291997(0xa25), _0x291997(0xa43), 'bites', _0x291997(0xabf), _0x291997(0x72f), _0x291997(0x598)]; for (const _0x4ddf7d of _0x354d15) { const _0x5cf992 = _0x291997(0x7bd) + _0x50d88e['id'] + '_' + _0x4ddf7d; await _0x21f951(_0x5cf992); } _0x2aa27a(![]), _0x24537c('【' + _0x50d88e['name'] + _0x291997(0x537)); } } }), _0x1167b3['appendChild'](_0x4e48f3); } else _0x1d605d(_0x59f49e(0x72e) + _0x3ad4cd['message']); }); } } let _0x299c39 = null, _0x213b2f = null; function _0x21ba89() { const _0x2938df = _0x2481c4, _0x1f01f8 = new Date(), _0x1d50b6 = document[_0x2938df(0x463)](_0x2938df(0xa2c)), _0x26390d = document[_0x2938df(0x463)]('snoop-home-date'), _0x29233b = document[_0x2938df(0x463)](_0x2938df(0x325)); if (_0x1d50b6 && _0x26390d) { if (_0x2938df(0xaf4) !== 'odgrs') { if (!_0xe1c5b0) return ''; const _0x21da55 = new _0xb048a9(_0x5a1f25), _0x551ceb = _0x2402e5(_0x21da55['getHours']())['padStart'](0x2, '0'), _0x36afe6 = _0x4a1f49(_0x21da55['getMinutes']())[_0x2938df(0x690)](0x2, '0'); return _0x551ceb + ':' + _0x36afe6; } else _0x1d50b6[_0x2938df(0x356)] = _0x1f01f8[_0x2938df(0x39d)](_0x2938df(0x2ed), { 'hour': _0x2938df(0xbe7), 'minute': '2-digit', 'hour12': ![] }), _0x26390d[_0x2938df(0x356)] = _0x1f01f8[_0x2938df(0x4bc)](_0x2938df(0x2ed), { 'month': 'long', 'day': _0x2938df(0x808), 'weekday': 'long' }); } if (_0x29233b) { if ('YWcmM' !== _0x2938df(0xbe9)) _0x29233b['innerHTML'] = _0x2938df(0x532) + _0x1f01f8[_0x2938df(0x39d)](_0x2938df(0x2ed), { 'hour': _0x2938df(0xbe7), 'minute': '2-digit', 'hour12': ![] }) + _0x2938df(0xb85); else { const _0x596afe = _0x236997(_0x7a5633[_0x2938df(0xb6f)] || _0x179f73['activeMeetingCharId']); _0x361596 = _0x596afe?.[_0x2938df(0x3b3)] || '角色', _0x59074c = _0x2938df(0x1f0); } } } function _0x3b6617(_0x167b43) { const _0x10ca08 = _0x2481c4; if (_0x10ca08(0x6a0) !== _0x10ca08(0x6a0)) _0x800500[_0x10ca08(0x80c)][_0x10ca08(0x6df)] = _0x10ca08(0x333); else { _0x299c39 = _0x167b43; const _0x4a53c4 = _0x543c76(_0x167b43); if (!_0x4a53c4) return; const _0xfb285 = document[_0x10ca08(0x463)](_0x10ca08(0x8e2)), _0x385a37 = document[_0x10ca08(0x463)](_0x10ca08(0x727)); if (_0x385a37) _0x385a37[_0x10ca08(0x554)](); const _0x4be5eb = document[_0x10ca08(0x463)](_0x10ca08(0x882)); if (_0x4be5eb) _0x4be5eb[_0x10ca08(0x554)](); _0xfb285[_0x10ca08(0x793)](_0x10ca08(0xb65), _0x10ca08(0x998)), _0xfb285['insertAdjacentHTML']('beforeend', _0x10ca08(0x74f)), document[_0x10ca08(0x463)](_0x10ca08(0xba1))[_0x10ca08(0x356)] = '', _0x363a53(); if (_0x213b2f) clearInterval(_0x213b2f); _0x21ba89(), _0x213b2f = setInterval(_0x21ba89, 0x2710), _0x1922fc(_0x10ca08(0x1e7), _0x10ca08(0xb57)); } } function _0x363a53() { const _0x5ef2e1 = _0x2481c4; if (_0x5ef2e1(0x90a) === 'ZkFSy') _0x453110 === _0x5ef2e1(0x28c) ? _0xcd09f8[_0x5ef2e1(0x80c)]['display'] = _0x5ef2e1(0x9d9) : _0xb10dda['style']['display'] = _0x5ef2e1(0x333); else { const _0x21bc05 = document['getElementById'](_0x5ef2e1(0x511)), _0x344915 = document[_0x5ef2e1(0x463)](_0x5ef2e1(0x882)); _0x21bc05[_0x5ef2e1(0xb00)] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x344915['innerHTML'] = ''; const _0x3d358d = _0x21bc05[_0x5ef2e1(0x7dd)](_0x5ef2e1(0xa30)), _0x4f4db2 = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x5ef2e1(0x824), 'area': _0x5ef2e1(0x673) }, { 'id': _0x5ef2e1(0xa25), 'name': _0x5ef2e1(0xb52), 'svg': _0x5ef2e1(0xa1b), 'area': 'dock' }, { 'id': _0x5ef2e1(0x213), 'name': '相册', 'svg': _0x5ef2e1(0x6cb), 'area': _0x5ef2e1(0x673) }, { 'id': 'summary', 'name': '总结', 'svg': _0x5ef2e1(0xc3b), 'area': _0x5ef2e1(0x673) }, { 'id': 'fragments', 'name': _0x5ef2e1(0xbf0), 'svg': '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'area': _0x5ef2e1(0xaa8) }, { 'id': _0x5ef2e1(0x458), 'name': '外卖', 'svg': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'area': _0x5ef2e1(0xaa8) }, { 'id': _0x5ef2e1(0xabf), 'name': '购物', 'svg': _0x5ef2e1(0x3c9), 'area': _0x5ef2e1(0xaa8) }, { 'id': _0x5ef2e1(0x72f), 'name': '足迹', 'svg': _0x5ef2e1(0x627), 'area': _0x5ef2e1(0xaa8) }]; _0x4f4db2[_0x5ef2e1(0xbe4)](_0x2f64c0 => { const _0x31e214 = _0x5ef2e1, _0x3e5d5b = document['createElement']('div'); _0x3e5d5b[_0x31e214(0x781)] = _0x31e214(0xa29), _0x3e5d5b['innerHTML'] = _0x31e214(0x76a) + _0x2f64c0[_0x31e214(0x6bf)] + _0x31e214(0xbbb) + _0x2f64c0[_0x31e214(0x3b3)] + _0x31e214(0x42b), _0x3e5d5b[_0x31e214(0x582)](_0x31e214(0x3bf), () => _0x4a64b1(_0x2f64c0['id'], _0x2f64c0[_0x31e214(0x3b3)])); if (_0x2f64c0[_0x31e214(0x542)] === _0x31e214(0x673)) { if (_0x31e214(0x477) === _0x31e214(0xa17)) { const _0x2db412 = _0xba0f70[_0x31e214(0x463)](_0x31e214(0xc06)); _0x2db412['innerHTML'] = ''; const _0x5f478a = _0x5b4ed1[_0x31e214(0x723)][_0x31e214(0x216)](_0x970347 => _0x609a46[_0x31e214(0xab8)]['some'](_0x2befc9 => _0x2befc9[_0x31e214(0xc02)] === 'private' && _0x2befc9[_0x31e214(0x3d4)]['includes'](_0x970347['id']))); if (_0x5f478a[_0x31e214(0x55b)] === 0x0) { _0x2db412[_0x31e214(0xb00)] = _0x31e214(0x43b); return; } _0x5f478a[_0x31e214(0xbe4)](_0xdaff6 => { const _0x486590 = _0x31e214, _0x5c736d = _0x4df2fd[_0x486590(0x58b)]('li'); _0x5c736d[_0x486590(0x781)] = _0x486590(0x47b), _0x5c736d[_0x486590(0x607)]['charId'] = _0xdaff6['id'], _0x5c736d[_0x486590(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0xdaff6['avatar'] || _0x2cc801) + _0x486590(0x8d6) + _0xdaff6['name'] + _0x486590(0xaca) + (_0xdaff6['remark'] || '私聊') + _0x486590(0x9c1), _0x5c736d[_0x486590(0x582)]('click', () => { _0x1bd5e4(_0xdaff6['id']); }), _0x2db412['appendChild'](_0x5c736d); }); } else _0x344915[_0x31e214(0xa59)](_0x3e5d5b); } else _0x31e214(0x61f) !== _0x31e214(0x61f) ? (_0x10d621(_0xdbd2c3), _0x12ccfa[_0x31e214(0x202)] = '', _0x5efe78(_0x5d3327, 0x64)) : _0x3d358d[_0x31e214(0xa59)](_0x3e5d5b); }); } } document['getElementById'](_0x2481c4(0xc1e))['addEventListener']('click', () => { const _0x37623d = _0x2481c4; _0x213b2f && (clearInterval(_0x213b2f), _0x213b2f = null); document[_0x37623d(0x463)](_0x37623d(0xc05))[_0x37623d(0x80c)][_0x37623d(0x6df)] = _0x37623d(0x333); const _0x3f8cb8 = document[_0x37623d(0x463)]('snoop-dock'); if (_0x3f8cb8) _0x3f8cb8[_0x37623d(0x554)](); const _0x557258 = document['getElementById']('snoop-home-clock'); if (_0x557258) _0x557258['remove'](); _0x1922fc(_0x37623d(0xb57), 'snoopPhone'); }); async function _0x4a64b1(_0x454b08, _0x4ddf7a, _0x19767d = ![]) { const _0x2f216c = _0x2481c4; if ('gkCOe' !== _0x2f216c(0xc0c)) { const _0x3cb185 = _0x2136b3[_0x2f216c(0x791)] === _0x2f216c(0x617) ? '你' : _0xe6c537[_0x2f216c(0xab2)]; _0x158fe7 += _0x2f216c(0x3a2) + _0x3cb185 + ':\x20' + _0x3ea4f6[_0x2f216c(0x67c)] + '\x20\x0a'; } else { document['getElementById'](_0x2f216c(0x954))['style']['display'] = _0x2f216c(0x333); const _0x3d0490 = document[_0x2f216c(0x463)](_0x2f216c(0xc05)); _0x3d0490[_0x2f216c(0xb00)] = _0x2f216c(0x975), _0x3d0490['style'][_0x2f216c(0x6df)] = 'flex'; const _0x2609c5 = _0x2f216c(0x7bd) + _0x299c39 + '_' + _0x454b08; try { if (_0x2f216c(0xa94) !== _0x2f216c(0xa94)) _0x2bd987 = _0x5ddbb9[_0x2f216c(0x202)]; else { if (_0x454b08 === 'summary') { const _0x44ef53 = await _0x48bb0f(_0x299c39); _0x2d3160(_0x454b08, _0x4ddf7a, _0x44ef53); return; } let _0x2f60c0 = await _0x5e591d(_0x2609c5); if (_0x19767d || !_0x2f60c0) { if (_0x2f216c(0x92d) === _0x2f216c(0x35c)) { const _0x426592 = _0x39b0c5['chats']['find'](_0x19d918 => _0x19d918['id'] === _0x4c9070), _0x329d2f = _0x426592?.['boundUserProfileId']; let _0x216c64 = _0x273577[_0x2f216c(0x7ae)]['find'](_0x1f0a63 => _0x1f0a63['id'] === _0x329d2f); return !_0x216c64 && (_0x216c64 = _0x1d5e70[_0x2f216c(0x7ae)][_0x2f216c(0x3be)](_0x316905 => _0x316905['id'] === _0xce63da[_0x2f216c(0xbb5)]) || _0x38f269[_0x2f216c(0x7ae)][0x0]), _0x216c64 || { 'name': '用户', 'avatar': _0x31d17f, 'persona': '' }; } else { console['log']('请求AI更新:\x20' + _0x2609c5 + _0x2f216c(0x7a0)); let _0x256e44 = await _0x4689a8(_0x454b08, _0x299c39, _0x2f60c0); if (_0x256e44) { if ('yJWKS' !== _0x2f216c(0x4c8)) _0x2e5a61[_0x2f216c(0x80c)][_0x2f216c(0x4b2)] = 'url(' + _0x1178ce + ')', _0x17dce8[_0x2f216c(0x80c)][_0x2f216c(0x4b0)] = _0x2f216c(0xa53), _0x4c32b1[_0x2f216c(0x80c)][_0x2f216c(0x6f9)] = _0x2f216c(0x545), _0x35b3c4[_0x2f216c(0x80c)][_0x2f216c(0x414)] = _0x2f216c(0xa36), _0xa5e93a[_0x2f216c(0x5a2)]('.widget-info\x20>\x20div')[_0x2f216c(0xbe4)](_0x31eb18 => { const _0x331f16 = _0x2f216c; _0x31eb18[_0x331f16(0x80c)][_0x331f16(0x21e)] = _0x331f16(0xaa3); }); else { const _0x3e9afc = _0x256e44[_0x2f216c(0x294)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/), _0x2c13de = _0x3e9afc ? _0x3e9afc[0x1][_0x2f216c(0x1e9)]() : _0x256e44['trim'](); let _0x48c1f0; try { if ('pWHuM' !== _0x2f216c(0x9e7)) { _0x144e5f(_0x2f216c(0x772)); return; } else _0x48c1f0 = JSON['parse'](_0x2c13de); } catch (_0x6b74fa) { _0x48c1f0 = _0x1d862d(_0x2c13de); if (!_0x48c1f0) throw new Error(_0x2f216c(0xa7d)); } let _0x1e80fd; if (_0x19767d && _0x2f60c0) try { const _0x48ef1d = JSON[_0x2f216c(0x433)](_0x2f60c0); if (_0x454b08 === _0x2f216c(0x354)) { if (_0x2f216c(0x2a9) === _0x2f216c(0x2a9)) _0x1e80fd = JSON['stringify'](_0x48c1f0), console[_0x2f216c(0x5b1)]('Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。'); else { const _0x2cbb06 = new _0x5df3a2(_0x4d7da5[_0x2f216c(0x83a)])[_0x2f216c(0x39d)](_0x2f216c(0x2ed), { 'hour': '2-digit', 'minute': _0x2f216c(0xbe7) }); _0x35d027[_0x2f216c(0x67c)] && _0x154742[_0x2f216c(0x1e6)]('[' + _0x2cbb06 + _0x2f216c(0xb81) + _0x54bcdd(_0x31ab5e) + ']\x20' + _0x2aec17(_0x5c0dcf[_0x2f216c(0x67c)])[_0x2f216c(0x1e9)]()); } } else { if (Array['isArray'](_0x48ef1d) && Array['isArray'](_0x48c1f0)) { if (_0x2f216c(0x9a6) === _0x2f216c(0x493)) _0x321e21 = _0x1bf0b4['image']; else { const _0x24f6c2 = _0x48ef1d['concat'](_0x48c1f0); _0x1e80fd = JSON[_0x2f216c(0x38f)](_0x24f6c2), console[_0x2f216c(0x5b1)](_0x2f216c(0x2f9)); } } else _0x1e80fd = JSON[_0x2f216c(0x38f)](_0x48c1f0); } } catch (_0x946c59) { _0x1e80fd = JSON[_0x2f216c(0x38f)](_0x48c1f0); } else { if (_0x2f216c(0xa24) === _0x2f216c(0xa24)) _0x1e80fd = JSON[_0x2f216c(0x38f)](_0x48c1f0); else { const _0x3202da = _0xd03bb4[_0x2f216c(0xc02)] === 'important' ? _0x2f216c(0x34e) : '待办'; return _0x2f216c(0x8b9) + _0x3202da + ']\x20' + _0x487848[_0x2f216c(0x4d0)] + ':\x20' + _0x3dde23[_0x2f216c(0x67c)]; } } await _0x1903c1(_0x2609c5, _0x1e80fd), _0x2f60c0 = _0x1e80fd; } } } } else console[_0x2f216c(0x5b1)](_0x2f216c(0x816) + _0x2609c5); _0x2d3160(_0x454b08, _0x4ddf7a, _0x2f60c0); } } catch (_0x4056b2) { console[_0x2f216c(0x8d9)](_0x2f216c(0x2d6) + _0x4ddf7a + _0x2f216c(0x3f8), _0x4056b2), _0x3d0490[_0x2f216c(0xb00)] = _0x2f216c(0x6ac) + _0x4056b2[_0x2f216c(0x9fa)] + _0x2f216c(0xb3e); } } } function _0x2d3160(_0x2551b4, _0x36ef6a, _0x385a0b) { const _0x506497 = _0x2481c4; if (_0x506497(0x5d1) === _0x506497(0x5d1)) { const _0x382fba = _0x543c76(_0x299c39), _0x3fa33b = document[_0x506497(0x463)]('snoop-app-view-container'); let _0x4e37a1 = ''; if (!_0x385a0b) _0x4e37a1 = _0x506497(0x6c3); else { if (_0x506497(0x681) === _0x506497(0x681)) { if (_0x2551b4 === 'summary') _0x4e37a1 = _0x506497(0x6bd) + _0x385a0b + '</textarea\x20>\x0a\x20\x20\x20\x20\x20\x20'; else try { if ('ZjbiR' === _0x506497(0xacb)) { let _0x2f42cd = null; const _0x55506b = _0x385a0b[_0x506497(0x294)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/), _0x29300f = _0x55506b ? _0x55506b[0x1] : _0x385a0b; _0x2f42cd = JSON[_0x506497(0x433)](_0x29300f); const _0x4dab65 = _0x543c76(_0x299c39); switch (_0x2551b4) { case _0x506497(0x213): _0x4e37a1 = _0x5a4960(_0x2f42cd); break; case _0x506497(0x354): _0x4e37a1 = _0x2ca854(_0x2f42cd, _0x4dab65['name']); break; case _0x506497(0xa25): _0x4e37a1 = _0x38fee8(_0x2f42cd); break; case _0x506497(0xa43): _0x4e37a1 = _0x22d05b(_0x2f42cd); break; case _0x506497(0x458): _0x4e37a1 = _0x54966e(_0x2f42cd); break; case _0x506497(0xabf): _0x4e37a1 = _0x4c1a29(_0x2f42cd); break; case _0x506497(0x72f): _0x4e37a1 = _0x32ec7b(_0x2f42cd); break; case _0x506497(0x598): _0x4e37a1 = _0x506497(0x6bd) + _0x385a0b + '</textarea\x20>\x0a\x20\x20\x20\x20'; break; default: _0x4e37a1 = _0x506497(0x4d4) + JSON['stringify'](_0x2f42cd, null, 0x2) + _0x506497(0x53e); } } else { _0x3f3e3d[_0x506497(0xb00)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } } catch (_0x576150) { _0x506497(0x86a) === 'hcnzt' ? (console[_0x506497(0x8d9)](_0x506497(0x68b), _0x576150), _0x4e37a1 = _0x506497(0x441) + _0x385a0b + _0x506497(0x782)) : _0x5b00f4(_0x39dc07); } } else _0x17558d[_0x506497(0xa7f)] = !![]; } _0x3fa33b[_0x506497(0xb00)] = _0x506497(0x47e) + _0x36ef6a + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>' + _0x382fba[_0x506497(0x3b3)] + _0x506497(0x530) + (_0x2551b4 === _0x506497(0x598) ? _0x506497(0x2f1) : _0x506497(0x6eb)) + _0x506497(0x49d) + _0x4e37a1 + _0x506497(0xa61); const _0x882ac9 = _0x3fa33b[_0x506497(0x7dd)](_0x506497(0x25a)); _0x2551b4 === _0x506497(0x598) && (_0x506497(0x5b8) === _0x506497(0xb0e) ? _0x792e09[_0x506497(0xa59)](_0x2d52f2) : _0x882ac9['style']['padding'] = '0'); document[_0x506497(0x463)](_0x506497(0x5c9))[_0x506497(0x582)](_0x506497(0x3bf), () => { const _0x2d84f0 = _0x506497; _0x2d84f0(0x394) === _0x2d84f0(0x394) ? (_0x3fa33b['style'][_0x2d84f0(0x6df)] = _0x2d84f0(0x333), document[_0x2d84f0(0x463)](_0x2d84f0(0x954))['style'][_0x2d84f0(0x6df)] = 'flex') : _0x4f5d03[_0x2d84f0(0x80c)]['opacity'] = _0x2d84f0(0x22d); }); _0x2551b4 === 'summary' ? document[_0x506497(0x463)](_0x506497(0xc26))[_0x506497(0x582)](_0x506497(0x3bf), () => { const _0x15bd1d = _0x506497; if (_0x15bd1d(0x918) === 'LnwpJ') { const _0x181c0e = _0x5ca011[0x0][_0x15bd1d(0x1e9)](), _0x1141e2 = _0x790b3d[0x1]['trim'](), _0x34b02e = { '歌名': _0x15bd1d(0x7c2), '艺术家': '歌手', '专辑': '专辑' }; _0x34b02e[_0x181c0e] && (_0x1e2853[_0x34b02e[_0x181c0e]] = _0x1141e2); } else { const _0xc9cbe5 = document[_0x15bd1d(0x463)](_0x15bd1d(0x257)); _0xc9cbe5[_0x15bd1d(0x734)](), document['execCommand'](_0x15bd1d(0xc0a)), _0x24537c(_0x15bd1d(0x284)); } }) : document['getElementById']('snoop-app-refresh-btn')[_0x506497(0x582)](_0x506497(0x3bf), async () => { _0x4a64b1(_0x2551b4, _0x36ef6a, !![]); }); if (_0x2551b4 === _0x506497(0x354)) { if (_0x506497(0x38b) !== _0x506497(0x38b)) return ''; else _0x3fa33b[_0x506497(0x5a2)](_0x506497(0x47f))[_0x506497(0xbe4)](_0x4761fb => { const _0x151635 = _0x506497; if (_0x151635(0x7fc) !== _0x151635(0xa6e)) _0x4761fb['addEventListener'](_0x151635(0x3bf), () => { const _0x2a2dbb = _0x151635; if (_0x2a2dbb(0x73f) === 'IoOKW') { const _0x3920a6 = JSON[_0x2a2dbb(0x433)](_0x4761fb[_0x2a2dbb(0x607)][_0x2a2dbb(0x5b1)][_0x2a2dbb(0x219)](/&quot;/g, '\x22')), _0x411b52 = _0x4761fb[_0x2a2dbb(0x607)][_0x2a2dbb(0xafe)], _0x176e4c = _0x4761fb[_0x2a2dbb(0x607)][_0x2a2dbb(0x8b8)]; _0x15d741(_0x411b52, _0x176e4c, _0x3920a6); } else _0xd1a02 += '-\x20你在“' + _0x38a342[_0x2a2dbb(0x1ed)] + '”买过：“' + _0x230a3c[_0x2a2dbb(0x7ec)] + _0x2a2dbb(0x5b3); }); else { if (_0x112233) { const _0x41a357 = _0x556940(_0xc0b654['activeMeetingCharId']); _0x41a357 && (delete _0x41a357[_0x151635(0xc38)], _0x5a89f2(), _0x3088bf(_0x41a357['id'], _0x151635(0x503)), _0x3c940f(_0x151635(0xa06)), _0x4cdb65(!![])); } } }); } } else _0x42ffe1(_0x3e35fd['id'], _0x2f7ba0['map'](_0x1cef56 => _0x1cef56['id'])); } function _0x1d862d(_0x3ddabe) { const _0x4ca28a = _0x2481c4; if (!_0x3ddabe || typeof _0x3ddabe !== 'string') return null; const _0x1c5826 = _0x3ddabe[_0x4ca28a(0x1e9)]()[_0x4ca28a(0x278)]('\x0a'), _0x122cbe = []; let _0x518d9a = null; for (const _0x21bae7 of _0x1c5826) { if (_0x4ca28a(0x934) !== _0x4ca28a(0x4e4)) { const _0x115ebf = _0x21bae7['trim'](); if (_0x115ebf[_0x4ca28a(0x595)]('-\x20')) { _0x518d9a && _0x122cbe[_0x4ca28a(0x1e6)](_0x518d9a); _0x518d9a = {}; const _0x42058e = _0x115ebf['substring'](0x2), _0x36daa2 = _0x42058e[_0x4ca28a(0x278)](/:\s(.+)/); if (_0x36daa2[_0x4ca28a(0x55b)] > 0x1) { const _0x3835b9 = _0x36daa2[0x0]['trim'](), _0x4dc221 = _0x36daa2[0x1][_0x4ca28a(0x1e9)]()['replace'](/^"|"$/g, ''); _0x518d9a[_0x3835b9] = _0x4dc221; } } else { if (_0x518d9a && _0x115ebf) { const _0x508afc = _0x115ebf[_0x4ca28a(0x278)](/:\s(.+)/); if (_0x508afc[_0x4ca28a(0x55b)] > 0x1) { if (_0x4ca28a(0x26f) !== _0x4ca28a(0x26f)) { const _0x121556 = _0x4c903e['split'](/:\s(.+)/); if (_0x121556[_0x4ca28a(0x55b)] > 0x1) { const _0x555b75 = _0x121556[0x0][_0x4ca28a(0x1e9)](), _0x162a88 = _0x121556[0x1][_0x4ca28a(0x1e9)]()[_0x4ca28a(0x219)](/^"|"$/g, ''); _0x404570[_0x555b75] = _0x162a88; } } else { const _0x1557f6 = _0x508afc[0x0][_0x4ca28a(0x1e9)](), _0x26fc96 = _0x508afc[0x1][_0x4ca28a(0x1e9)]()[_0x4ca28a(0x219)](/^"|"$/g, ''); _0x518d9a[_0x1557f6] = _0x26fc96; } } } } } else { const _0x4b48db = _0x294835[_0x4ca28a(0x202)][_0x4ca28a(0x1e9)](); if (!_0x4b48db) { _0x5e9dfc(_0x4ca28a(0x312)); return; } const _0x1843a5 = _0x3263fa[_0x4ca28a(0x8b4)](_0xe53e17[_0x4ca28a(0x5a2)]('input[type=\x22checkbox\x22]:checked'))[_0x4ca28a(0x575)](_0x570963 => _0x570963[_0x4ca28a(0x607)]['id']); if (_0x1843a5[_0x4ca28a(0x55b)] < 0x2) { _0x58a5eb(_0x4ca28a(0x55e)); return; } const _0xb294a7 = { 'id': _0x4ca28a(0x61c) + _0x1e8266[_0x4ca28a(0xb71)](), 'type': 'group', 'name': _0x4b48db, 'participantIds': _0x1843a5 }; _0x529579[_0x4ca28a(0xab8)]['push'](_0xb294a7), _0x29fd73[_0x4ca28a(0x1e1)] = _0xb294a7['id'], _0x1d1e30(), _0x4c41b4(), _0x552e31(), _0x1d7429(), _0xc23646(_0x4ca28a(0xb63) + _0x4b48db + _0x4ca28a(0x657)), _0x1df746(_0x4ca28a(0x83e), _0x4ca28a(0xa6b)); } } return _0x518d9a && _0x122cbe[_0x4ca28a(0x1e6)](_0x518d9a), _0x122cbe[_0x4ca28a(0x55b)] > 0x0 ? _0x122cbe : null; } function _0x15d741(_0x120cab, _0x1d8da, _0x3177c5) { const _0x460b3e = _0x2481c4; if (_0x460b3e(0x692) === _0x460b3e(0x517)) { const _0x551cd8 = _0x2c3cdd['content'][_0x460b3e(0x294)](/：(.*?)]$/); _0x166123[_0x460b3e(0x67c)] = '[sticker:' + (_0x551cd8 ? _0x551cd8[0x1] : _0x460b3e(0x336)) + ']', _0xc1ee03[_0x460b3e(0x1e6)](_0x38e563); } else { const _0xfa2879 = document['querySelector'](_0x460b3e(0x402)), _0x2eccb2 = document[_0x460b3e(0x7dd)](_0x460b3e(0x94c)); let _0x1d5995 = _0x460b3e(0x638); !_0x3177c5 || _0x3177c5[_0x460b3e(0x55b)] === 0x0 ? _0x1d5995 += _0x460b3e(0x436) : _0x3177c5[_0x460b3e(0xbe4)](_0x1fc07f => { const _0x1ca285 = _0x460b3e, _0x536ecd = _0x1fc07f[_0x1ca285(0x791)] === _0x1ca285(0x617), _0x40ad77 = _0x536ecd ? _0x1d8da ? _0x1d8da[0x0] : '?' : _0x120cab ? _0x120cab[0x0] : '?'; _0x1d5995 += _0x1ca285(0xbe0) + (_0x536ecd ? 'user' : 'ai') + _0x1ca285(0x1f5) + (!_0x536ecd ? _0x1ca285(0x1cf) + _0x40ad77 + _0x1ca285(0x3fe) : '') + _0x1ca285(0x883) + (_0x536ecd ? _0x1ca285(0x5c2) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x1fc07f[_0x1ca285(0x67c)] + _0x1ca285(0x4dc) + (_0x536ecd ? '<div\x20class=\x22snoop-avatar\x22>' + _0x40ad77 + _0x1ca285(0x3fe) : '') + _0x1ca285(0x986); }), _0x1d5995 += _0x460b3e(0x3fe), _0xfa2879[_0x460b3e(0xb00)] = _0x1d5995, _0xfa2879[_0x460b3e(0xa7b)] = _0xfa2879['scrollHeight'], _0x2eccb2[_0x460b3e(0xb00)] = '\x0a\x20\x20\x20\x20\x20\x20<\x20button\x20id\x20=\x20\x22snoop-log-back-btn\x22\x20class=\x20\x22snoop-app-header-button\x22\x20style\x20=\x20\x22text-align:\x20left;\x22\x20>‹\x20聊天</button\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>' + _0x120cab + _0x460b3e(0x612), document['getElementById'](_0x460b3e(0xabb))[_0x460b3e(0x582)](_0x460b3e(0x3bf), () => { const _0x57b785 = _0x460b3e; _0x4a64b1(_0x57b785(0x354), '聊天'); }), !document[_0x460b3e(0x463)](_0x460b3e(0x613)) && document[_0x460b3e(0x2cc)]['insertAdjacentHTML'](_0x460b3e(0xb65), _0x460b3e(0x925)); } } function _0x1d862d(_0x2626d3) { const _0x282562 = _0x2481c4; if (!_0x2626d3 || typeof _0x2626d3 !== 'string') return null; const _0x1cbca5 = _0x2626d3['trim']()[_0x282562(0x278)]('\x0a'), _0x497664 = []; let _0x175e9c = null; for (const _0x235b3c of _0x1cbca5) { if (_0x282562(0x9e0) !== _0x282562(0x82f)) { const _0x18ba19 = _0x235b3c[_0x282562(0x1e9)](); if (_0x18ba19[_0x282562(0x595)]('-\x20')) { if (_0x282562(0x2d7) !== 'hbOtz') { _0x175e9c && (_0x282562(0x226) !== _0x282562(0x226) ? (_0xa15ee1[_0x282562(0xb01)] = _0x2f95a9[_0x282562(0x51e)](_0x3e5283), _0x3940fe[_0x282562(0x80c)][_0x282562(0x6df)] = _0x282562(0x629)) : _0x497664['push'](_0x175e9c)); _0x175e9c = {}; const _0x16bf54 = _0x18ba19[_0x282562(0x9ff)](0x2), _0x340355 = _0x16bf54[_0x282562(0x278)](/:\s(.+)/); if (_0x340355[_0x282562(0x55b)] > 0x1) { if ('YCVeo' === _0x282562(0x61d)) { const _0xedbb04 = _0xe0cd3f['id'], _0x383318 = _0x282562(0x88a) + _0xedbb04, _0x2cc172 = _0x511ca7[_0x282562(0x6b4)](_0x383318), _0x44b89b = _0x336437[_0x282562(0x7dd)]('.app-icon-img'); if (_0x2cc172) _0x44b89b[_0x282562(0xb00)] = '<img\x20src=\x22' + _0x2cc172 + '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>'; else { const _0x1d1b4b = _0x104d78[_0x282562(0x7dd)]('#app-dock-bottom-left\x20#' + _0xedbb04 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0xedbb04 + _0x282562(0x5ff))?.['innerHTML']; _0x1d1b4b && (_0x44b89b[_0x282562(0xb00)] = _0x1d1b4b); } } else { const _0x5b757f = _0x340355[0x0][_0x282562(0x1e9)](), _0x20c404 = _0x340355[0x1]['trim']()['replace'](/^"|"$/g, ''); _0x175e9c[_0x5b757f] = _0x20c404; } } } else _0x298bb3[_0x282562(0x246)](_0x282562(0x24c), _0x3b0a02[_0x282562(0x38f)]({ 'playlist': _0x1455e1[_0x282562(0x282)], 'currentIndex': _0x4e7bf4[_0x282562(0x5a5)] })); } else { if (_0x175e9c && _0x18ba19) { if (_0x282562(0x6ef) === _0x282562(0x6ef)) { const _0xe5d04e = _0x18ba19[_0x282562(0x278)](/:\s(.+)/); if (_0xe5d04e[_0x282562(0x55b)] > 0x1) { if (_0x282562(0xa79) === _0x282562(0x7e5)) _0x282562(0x207); else { const _0x127638 = _0xe5d04e[0x0][_0x282562(0x1e9)](), _0x1bc875 = _0xe5d04e[0x1][_0x282562(0x1e9)]()['replace'](/^"|"$/g, ''); _0x175e9c[_0x127638] = _0x1bc875; } } } else { const _0x54e8c6 = _0x28cc60[_0x282562(0x58b)](_0x282562(0x2e5)); _0x54e8c6[_0x282562(0x202)] = _0x1a0d84['id'], _0x54e8c6[_0x282562(0x356)] = _0x67e205[_0x282562(0x3b3)], _0x5042e7[_0x282562(0xa59)](_0x54e8c6); } } } } else _0x198524[_0x282562(0x8d9)](_0x282562(0x653) + _0x15ec42['id'] + ')，已跳过。这不应该发生，数据库可能已损坏。', _0x112bf7); } return _0x175e9c && (_0x282562(0x6ed) === _0x282562(0x1d8) ? _0x39d4e0 = _0x5a6c96[_0x282562(0x8dc)] : _0x497664['push'](_0x175e9c)), _0x497664[_0x282562(0x55b)] > 0x0 ? _0x497664 : null; } async function _0x212055(_0x18c3b5) { const _0x3c7b6c = _0x2481c4; if (!_0x18c3b5) return ''; const _0x5defed = [{ 'id': _0x3c7b6c(0x213), 'name': '相册' }, { 'id': 'whispers', 'name': _0x3c7b6c(0xbd2) }, { 'id': _0x3c7b6c(0xa25), 'name': _0x3c7b6c(0x225) }, { 'id': _0x3c7b6c(0xa43), 'name': _0x3c7b6c(0xbf0) }, { 'id': 'bites', 'name': _0x3c7b6c(0x466) }, { 'id': _0x3c7b6c(0xabf), 'name': _0x3c7b6c(0x7b2) }, { 'id': 'footprints', 'name': _0x3c7b6c(0x85f) }]; let _0x3a2add = ''; for (const _0x549434 of _0x5defed) { try { const _0x1c1078 = 'snoop_' + _0x18c3b5 + '_' + _0x549434['id'] + '\x20', _0x39f5bc = await _0x5e591d(_0x1c1078); if (_0x39f5bc) { const _0x391179 = _0x39f5bc[_0x3c7b6c(0x294)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/), _0x591bc1 = _0x391179 ? _0x391179[0x1][_0x3c7b6c(0x1e9)]() : _0x39f5bc[_0x3c7b6c(0x1e9)](); if (!_0x591bc1) continue; let _0x351b66 = null; try { _0x351b66 = JSON[_0x3c7b6c(0x433)](_0x591bc1); } catch (_0x37fa9d) { console['warn'](_0x3c7b6c(0x936) + _0x549434['id'] + _0x3c7b6c(0x3d7), _0x37fa9d[_0x3c7b6c(0x9fa)]); try { if (_0x3c7b6c(0x600) === _0x3c7b6c(0x9b1)) _0x3c8b04[_0x3c7b6c(0x67c)] = _0xa07f55, _0x2df7af(), _0x101e21(); else { _0x351b66 = _0x1d862d(_0x591bc1); if (!_0x351b66) throw new Error(_0x3c7b6c(0x243)); console[_0x3c7b6c(0x5b1)](_0x3c7b6c(0x6f0) + _0x549434['id'] + _0x3c7b6c(0x419)); } } catch (_0x426f70) { throw _0x37fa9d; } } if (Array[_0x3c7b6c(0x9d7)](_0x351b66) && _0x351b66[_0x3c7b6c(0x55b)] > 0x0) { if ('dhcZJ' !== _0x3c7b6c(0x41e)) _0x463f24 ? _0x26ea50(_0x3f993d) : _0x4d4507(new _0x593527(_0x3c7b6c(0x26e))); else { _0x3a2add === '' && ('LtSLW' !== _0x3c7b6c(0xa4a) ? _0x3a2add += _0x3c7b6c(0x54d) : _0x25cfe4 > _0x3603e5 && (_0x548223 *= _0x2206be / _0x24b799, _0x5954df = _0x5040d6)); _0x3a2add += _0x3c7b6c(0xad5) + _0x549434[_0x3c7b6c(0x3b3)] + '\x20\x0a'; switch (_0x549434['id']) { case _0x3c7b6c(0x213): _0x351b66[_0x3c7b6c(0xbe4)](_0xb3c96c => { const _0x54c591 = _0x3c7b6c; _0x3a2add += _0x54c591(0x64d) + _0xb3c96c[_0x54c591(0x7c6)] + '”。\x0a'; }); break; case _0x3c7b6c(0x354): _0x351b66['forEach'](_0x3e6c2b => { const _0x24ed5e = _0x3c7b6c; if (_0x24ed5e(0x451) !== _0x24ed5e(0x451)) _0x3ee1ee['error'](_0x24ed5e(0xa90), _0x31b453); else { _0x3a2add += _0x24ed5e(0xbc9) + _0x3e6c2b[_0x24ed5e(0xab2)] + _0x24ed5e(0x573) + _0x3e6c2b[_0x24ed5e(0x9f4)] + '”。\x0a'; if (_0x3e6c2b['log'] && Array['isArray'](_0x3e6c2b[_0x24ed5e(0x5b1)])) { if ('VKwvv' === _0x24ed5e(0x485)) { const _0x29f383 = _0x2826c2[_0x24ed5e(0x575)](_0xed1636 => new _0x3bd2ee(_0xed1636[_0x24ed5e(0x83a)] || _0xed1636['last_edited']))['filter'](_0x4aeaeb => !_0x33febb(_0x4aeaeb)); _0x29f383[_0x24ed5e(0x55b)] > 0x0 && (_0x4803f0 = new _0x4ec390(_0x3d1f0f[_0x24ed5e(0x66e)][_0x24ed5e(0x7b8)](null, _0x29f383)), _0x1ecd6a = _0x132b15['toLocaleString'](_0x24ed5e(0x2ed), { 'dateStyle': _0x24ed5e(0x820), 'timeStyle': _0x24ed5e(0x455) })); } else _0x3a2add += _0x24ed5e(0x2ec), _0x3e6c2b[_0x24ed5e(0x5b1)][_0x24ed5e(0xbe4)](_0x23f5ce => { const _0xc233ea = _0x24ed5e, _0x38d270 = _0x23f5ce[_0xc233ea(0x791)] === 'character' ? '你' : _0x3e6c2b[_0xc233ea(0xab2)]; _0x3a2add += '\x20\x20\x20\x20-\x20' + _0x38d270 + ':\x20' + _0x23f5ce[_0xc233ea(0x67c)] + '\x20\x0a'; }); } } }); break; case _0x3c7b6c(0xa25): _0x351b66[_0x3c7b6c(0xbe4)](_0x42e354 => { const _0x5b6817 = _0x3c7b6c; _0x3a2add += _0x5b6817(0x97e) + _0x42e354['query'] + _0x5b6817(0x5b3); }); break; case _0x3c7b6c(0xa43): _0x351b66[_0x3c7b6c(0xbe4)](_0x4a2f89 => { const _0x4cfac3 = _0x3c7b6c; _0x4cfac3(0x232) === 'VBcVV' ? _0x4b3a98(new _0x58f1ed(_0x4cfac3(0x26e))) : _0x3a2add += '-\x20你的备忘录里有一条叫“' + _0x4a2f89[_0x4cfac3(0x879)] + '”的笔记，内容是：“' + _0x4a2f89[_0x4cfac3(0x67c)][_0x4cfac3(0x219)](/\n/g, '\x20') + _0x4cfac3(0x5b3); }); break; case _0x3c7b6c(0x458): _0x351b66[_0x3c7b6c(0xbe4)](_0x7a8f8f => { const _0x53b629 = _0x3c7b6c; _0x53b629(0x7fa) === _0x53b629(0x96a) ? (_0x5943f7['src'] = _0x3edba8['url'], _0x541b65['play'](), _0x4cb36d[_0x53b629(0x7dd)](_0x53b629(0x212))['textContent'] = '❚❚') : _0x3a2add += _0x53b629(0x6b9) + _0x7a8f8f['restaurant_name'] + _0x53b629(0x9bd) + _0x7a8f8f[_0x53b629(0xbcd)][_0x53b629(0x3b9)]('、') + '。\x0a'; }); break; case 'wants': _0x351b66[_0x3c7b6c(0xbe4)](_0x3596de => { const _0x40a5e2 = _0x3c7b6c; _0x3a2add += _0x40a5e2(0xa04) + _0x3596de[_0x40a5e2(0x1ed)] + _0x40a5e2(0xc37) + _0x3596de[_0x40a5e2(0x7ec)] + _0x40a5e2(0x5b3); }); break; case _0x3c7b6c(0x72f): _0x351b66['forEach'](_0x4db944 => { const _0x288ba7 = _0x3c7b6c; _0x3a2add += _0x288ba7(0x84d) + _0x4db944['location_name'] + _0x288ba7(0x59e) + _0x4db944[_0x288ba7(0x514)] + _0x288ba7(0x5b3); }); break; default: _0x351b66[_0x3c7b6c(0xbe4)](_0x59072c => { _0x3a2add += '-\x20' + JSON['stringify'](_0x59072c) + '\x20\x0a'; }); break; } } } } } catch (_0x1bc7fc) { console['error'](_0x3c7b6c(0x653) + _0x549434['id'] + _0x3c7b6c(0x59d), _0x1bc7fc); } } return _0x3a2add; } function _0x5a4960(_0x219a41) { const _0x56f493 = _0x2481c4; if (!Array[_0x56f493(0x9d7)](_0x219a41)) return '<p>格式错误</p>'; if (_0x219a41[_0x56f493(0x55b)] === 0x0) return _0x56f493(0x767); return _0x56f493(0x6e9) + _0x219a41[_0x56f493(0x575)]((_0x33d951, _0x32cb71) => _0x56f493(0x9b8) + (_0x32cb71 < _0x219a41[_0x56f493(0x55b)] - 0x1 ? _0x56f493(0x996) : '') + '\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>' + (_0x33d951[_0x56f493(0x7c6)] || _0x56f493(0x367)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x33d951['timestamp'] || '') + _0x56f493(0x4f4))['join']('') + _0x56f493(0x26b); } function _0x2ca854(_0x47fa2d, _0x5c5579) { const _0x197699 = _0x2481c4; if (!Array['isArray'](_0x47fa2d) || _0x47fa2d[_0x197699(0x55b)] === 0x0) return _0x197699(0x9e6); return '<\x20div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20' + _0x47fa2d[_0x197699(0x575)]((_0x5e4ba0, _0x21fa54) => { const _0x3e03f2 = _0x197699, _0x3afb3 = JSON[_0x3e03f2(0x38f)](_0x5e4ba0['log'] || [])[_0x3e03f2(0x219)](/'/g, _0x3e03f2(0xbe2))[_0x3e03f2(0x219)](/"/g, '&quot;'), _0x2cb2f7 = _0x5e4ba0[_0x3e03f2(0xab2)] || _0x3e03f2(0x415); return _0x3e03f2(0xba8) + (_0x21fa54 < _0x47fa2d[_0x3e03f2(0x55b)] - 0x1 ? _0x3e03f2(0x996) : '') + '\x22\x0a\x20\x20\x20\x20data\x20-\x20log=\x27' + _0x3afb3 + _0x3e03f2(0x9a7) + _0x2cb2f7 + _0x3e03f2(0x98c) + _0x5c5579 + _0x3e03f2(0xa9c) + _0x2cb2f7[_0x3e03f2(0x7a8)](0x0) + _0x3e03f2(0xc1d) + _0x2cb2f7 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x5e4ba0[_0x3e03f2(0x9f4)] || '') + _0x3e03f2(0x3de); })[_0x197699(0x3b9)]('') + '</div\x20>\x20'; } function _0x38fee8(_0x5be838) { const _0x2e6cc4 = _0x2481c4; if (!Array[_0x2e6cc4(0x9d7)](_0x5be838)) return _0x2e6cc4(0x81a); if (_0x5be838[_0x2e6cc4(0x55b)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x5be838[_0x2e6cc4(0x61a)]((_0x23ab28, _0x16fc02) => new Date(_0x16fc02[_0x2e6cc4(0x83a)]) - new Date(_0x23ab28[_0x2e6cc4(0x83a)])), _0x2e6cc4(0x6e9) + _0x5be838[_0x2e6cc4(0x575)]((_0x42b7fb, _0x143dc4) => _0x2e6cc4(0x59b) + (_0x143dc4 < _0x5be838['length'] - 0x1 ? _0x2e6cc4(0x996) : '') + '\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + (_0x42b7fb[_0x2e6cc4(0x72c)] || _0x2e6cc4(0x5df)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x42b7fb['result_page_content'] || _0x2e6cc4(0x378)) + _0x2e6cc4(0x7e8) + (_0x42b7fb[_0x2e6cc4(0x83a)] || '') + _0x2e6cc4(0x20b))['join']('') + _0x2e6cc4(0x26b); } function _0x22d05b(_0x4ae9bb) { const _0xb62737 = _0x2481c4; if (!Array[_0xb62737(0x9d7)](_0x4ae9bb)) return _0xb62737(0x81a); if (_0x4ae9bb[_0xb62737(0x55b)] === 0x0) return _0xb62737(0x348); return _0x4ae9bb['sort']((_0x5a2ed6, _0x32884d) => new Date(_0x32884d[_0xb62737(0xc25)]) - new Date(_0x5a2ed6['last_edited'])), _0x4ae9bb[_0xb62737(0x575)](_0x289216 => _0xb62737(0x549) + (_0x289216[_0xb62737(0x879)] || _0xb62737(0xb22)) + _0xb62737(0x27f) + (_0x289216[_0xb62737(0x67c)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20' + (_0x289216[_0xb62737(0xc25)] || '') + _0xb62737(0x884))[_0xb62737(0x3b9)](''); } function _0x54966e(_0x136395) { const _0x1362cf = _0x2481c4; if (!Array[_0x1362cf(0x9d7)](_0x136395)) return '<p>格式错误</p>'; if (_0x136395[_0x1362cf(0x55b)] === 0x0) return _0x1362cf(0xc0e); return _0x136395[_0x1362cf(0x61a)]((_0x405247, _0x47a5b2) => new Date(_0x47a5b2[_0x1362cf(0x83a)]) - new Date(_0x405247[_0x1362cf(0x83a)])), _0x136395[_0x1362cf(0x575)](_0x4117b4 => { const _0x2ece9d = _0x1362cf; if (_0x2ece9d(0xc1c) === _0x2ece9d(0xc1c)) { const _0x593bed = (_0x4117b4[_0x2ece9d(0xbcd)] || [])['map'](_0x570b15 => _0x2ece9d(0x5f6) + _0x570b15 + _0x2ece9d(0x82e))[_0x2ece9d(0x3b9)](''); return '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x4117b4[_0x2ece9d(0x4b4)] || '未知餐厅') + _0x2ece9d(0x931) + (_0x4117b4['timestamp'] || '') + _0x2ece9d(0x482) + (_0x4117b4[_0x2ece9d(0x456)] || _0x2ece9d(0x238)) + _0x2ece9d(0x894) + _0x593bed + _0x2ece9d(0x2f6) + (_0x4117b4['total_cost'] || 0x0)[_0x2ece9d(0x2c4)](0x2) + _0x2ece9d(0xa20); } else { const _0x7fb75d = _0x1a3bda['createObjectURL'](_0x51c5d6), _0xf5cf46 = _0x2ece9d(0x989), _0x26949c = _0x2ece9d(0x497) + _0xf5cf46 + _0x2ece9d(0x269) + _0x7fb75d + _0x2ece9d(0x74e); _0x3c74b4[_0x2ece9d(0xb00)] = _0x26949c, _0x2e4ef2[_0x2ece9d(0x5ed)][_0x2ece9d(0x80c)][_0x2ece9d(0x981)](_0x2ece9d(0x3aa), '\x27' + _0xf5cf46 + '\x27'), _0x3aa28f[_0x2ece9d(0x356)] = '字体已应用！(Font\x20Applied!)'; } })['join'](''); } function _0x4c1a29(_0xd7ac09) { const _0x2f941b = _0x2481c4; if ('dvBbi' !== 'pkXDA') { if (!Array[_0x2f941b(0x9d7)](_0xd7ac09)) return '<p>格式错误</p>'; if (_0xd7ac09[_0x2f941b(0x55b)] === 0x0) return _0x2f941b(0x350); return _0xd7ac09[_0x2f941b(0x61a)]((_0x103790, _0x5e3e88) => new Date(_0x5e3e88['timestamp']) - new Date(_0x103790['timestamp'])), _0xd7ac09[_0x2f941b(0x575)](_0x29d55b => _0x2f941b(0x398) + (_0x29d55b['store_name'] || _0x2f941b(0x684)) + _0x2f941b(0x6cf) + (_0x29d55b[_0x2f941b(0x83a)] || '') + _0x2f941b(0x675) + (_0x29d55b[_0x2f941b(0x7ec)] || '未知商品') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20' + (_0x29d55b[_0x2f941b(0xac2)] || 0x0)['toFixed'](0x2) + _0x2f941b(0x40a))[_0x2f941b(0x3b9)](''); } else _0x28c682[_0x2f941b(0x8d9)](_0x2f941b(0x9dc), _0x1b1d9c), _0x34a7c8({ 'role': _0x2f941b(0x41d), 'content': _0x2f941b(0x72e) + _0x13baf0[_0x2f941b(0x9fa)] }, _0x54fa46[_0x2f941b(0xbc8)][_0x2f941b(0x55b)] - 0x1); } function _0x32ec7b(_0x634dfd) { const _0x28dddc = _0x2481c4; if (!Array[_0x28dddc(0x9d7)](_0x634dfd)) return '<p>格式错误</p>'; if (_0x634dfd[_0x28dddc(0x55b)] === 0x0) return _0x28dddc(0x8d1); return _0x634dfd[_0x28dddc(0x61a)]((_0x9c0b4a, _0x246005) => new Date(_0x246005[_0x28dddc(0x83a)]) - new Date(_0x9c0b4a[_0x28dddc(0x83a)])), _0x28dddc(0x82c) + _0x634dfd['map'](_0x3475e5 => '\x0a\x20\x20\x20\x20\x20\x20<\x20div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x3475e5[_0x28dddc(0x804)] || _0x28dddc(0x9e1)) + _0x28dddc(0xb84) + (_0x3475e5[_0x28dddc(0x514)] || '') + _0x28dddc(0x9f0) + (_0x3475e5[_0x28dddc(0x83a)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')['join']('') + _0x28dddc(0x26b); } async function _0x4689a8(_0x4668aa, _0x725c41, _0x1bcd32 = null) { const _0x478415 = _0x2481c4, _0x5552f6 = _0x543c76(_0x725c41), _0x137019 = _0x5f0a6c['chats'][_0x478415(0x3be)](_0xdc0aff => _0xdc0aff[_0x478415(0xc02)] === 'private' && _0xdc0aff['participantIds'][_0x478415(0xa1c)](_0x725c41)), _0x2ce68d = _0x1f5ce5(_0x137019?.['id'] || _0x5f0a6c[_0x478415(0x1e1)]); if (!_0x5552f6) throw new Error(_0x478415(0xaf2)); const { omniText: _0x1ac3f9 } = _0x27c1ec(_0x725c41); let _0x2bfc2e = ''; const _0x45c48c = new Date(); let _0x3ff966 = null, _0x2722bb = '无'; if (_0x1bcd32) try { let _0x39ca7e; try { _0x39ca7e = JSON['parse'](_0x1bcd32); } catch (_0x43c2fc) { _0x478415(0x730) !== _0x478415(0x54c) ? _0x39ca7e = _0x1d862d(_0x1bcd32) : _0xbb8cab = _0x45bc56[_0x478415(0x51e)](_0x6a4d80); } if (Array[_0x478415(0x9d7)](_0x39ca7e) && _0x39ca7e[_0x478415(0x55b)] > 0x0) { const _0x2d608d = _0x39ca7e[_0x478415(0x575)](_0x2bd6d3 => new Date(_0x2bd6d3[_0x478415(0x83a)] || _0x2bd6d3[_0x478415(0xc25)]))['filter'](_0x548404 => !isNaN(_0x548404)); if (_0x2d608d[_0x478415(0x55b)] > 0x0) { if ('WcSeT' !== _0x478415(0x400)) { const _0x52f308 = _0x31062d[_0x478415(0x58b)]('div'); _0x52f308[_0x478415(0x781)] = 'quoted-message-in-bubble'; const _0x4ba444 = _0x3ca63d[_0x478415(0x58b)](_0x478415(0xbdf)); _0x4ba444[_0x478415(0x781)] = 'quoted-sender', _0x4ba444['textContent'] = _0x26a46c[_0x478415(0x5d3)]['sender']; const _0x32671e = _0x339d69[_0x478415(0x58b)](_0x478415(0xbdf)); _0x32671e[_0x478415(0x781)] = _0x478415(0x1e0), _0x32671e[_0x478415(0x356)] = _0x54f834[_0x478415(0x5d3)][_0x478415(0x67c)], _0x52f308[_0x478415(0xa59)](_0x4ba444), _0x52f308[_0x478415(0xa59)](_0x32671e), _0x1d43bd[_0x478415(0xa59)](_0x52f308); } else _0x3ff966 = new Date(Math[_0x478415(0x66e)]['apply'](null, _0x2d608d)), _0x2722bb = _0x3ff966[_0x478415(0x660)]('zh-CN', { 'dateStyle': 'medium', 'timeStyle': 'short' }); } } } catch (_0x2b38f7) { if ('IFwZw' === _0x478415(0xc2e)) console[_0x478415(0x3d3)](_0x478415(0x902), _0x2b38f7); else { const _0x3a4cdf = _0x5d50ae['target'][_0x478415(0x4b6)][0x0]; if (!_0x3a4cdf) return; const _0x5213d2 = _0x2c784d[_0x478415(0x51e)](_0x3a4cdf); _0x522fdb[_0x478415(0x463)](_0x478415(0xae1))[_0x478415(0x80c)][_0x478415(0x4b2)] = _0x478415(0x205) + _0x5213d2 + '\x27)'; } } const _0x4f3983 = _0xd3ebbc(_0x725c41); _0x2bfc2e = '\x0a#\x20时间锚点(你必须严格参考此信息进行推演)\x20\x0a', _0x2bfc2e += _0x478415(0x75c) + _0x45c48c[_0x478415(0x660)](_0x478415(0x2ed), { 'dateStyle': _0x478415(0x872), 'timeStyle': 'short' }) + '\x20\x0a'; if (_0x4f3983) { const _0xff16ac = new Date(_0x4f3983[_0x478415(0x83a)]), _0x43e596 = _0x380a73(_0xff16ac); _0x2bfc2e += _0x478415(0x41f) + _0x43e596 + '\x20\x0a'; const _0x25b3c3 = _0x45c48c[_0x478415(0x7bc)](), _0xc305c = _0xff16ac[_0x478415(0x7bc)](), _0x3b9a04 = new Date(); _0x3b9a04['setDate'](_0x45c48c[_0x478415(0x60d)]() - 0x1); const _0x198448 = _0x3b9a04['toDateString'](); if (_0x25b3c3 === _0xc305c) { const _0x2229d8 = (_0x45c48c - _0xff16ac) / (0x3e8 * 0x3c); _0x2bfc2e += '-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; } else { if (_0x198448 === _0xc305c) 'FCmpj' !== _0x478415(0x2e4) ? (_0x34019f['style'][_0x478415(0x6df)] = 'none', _0x1b1a79[_0x478415(0x80c)][_0x478415(0x99b)] = '2px\x20dashed\x20var(--border-color)') : _0x2bfc2e += '-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a'; else { const _0x1dfc59 = Math[_0x478415(0x596)]((_0x45c48c - _0xff16ac) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2bfc2e += _0x478415(0xa88) + _0x1dfc59 + _0x478415(0x7a5); } } } else _0x478415(0xa56) === 'vVFNV' ? _0x5d3aa1(_0x478415(0x425), _0x478415(0xc07)) : _0x2bfc2e += _0x478415(0x9ec); let _0x32b075 = '', _0x7f5ef9 = ''; if (_0x1bcd32) _0x32b075 = _0x478415(0x8ab), _0x7f5ef9 = '\x0a#\x20已有内容(这是历史记录，你必须接着写，不许动它！)\x20\x0a```\x0a' + _0x1bcd32 + _0x478415(0x553); else { if (_0x478415(0x473) !== _0x478415(0x473)) { if (!_0x45e541) return; const _0x14d51b = _0x4ddb7b[_0x478415(0x5c3)], _0x3604ae = _0x25a582(_0x14d51b); if (!_0x3604ae) return; const _0x1576b4 = _0x115184(_0x2129b1[_0x478415(0x463)]('sprite-slider-x')[_0x478415(0x202)]), _0x3d8a2d = _0x59d8f6(_0x19760a['getElementById'](_0x478415(0x244))[_0x478415(0x202)]), _0x55ad75 = _0x227a00(_0x1da76e[_0x478415(0x463)](_0x478415(0x63c))['value']) / 0x64; _0x3604ae['spriteTransform'] = { 'x': _0x1576b4, 'y': _0x3d8a2d, 'scale': _0x55ad75 }; const _0x31cbe5 = _0x4a8714[_0x478415(0x463)](_0x478415(0x566)), _0x19ec5d = 0x50 * _0x55ad75; _0x31cbe5['style']['height'] = _0x19ec5d + '%', _0x31cbe5['style'][_0x478415(0x5af)] = _0x19ec5d + '%', _0x31cbe5[_0x478415(0x80c)]['left'] = _0x1576b4 + '%', _0x31cbe5[_0x478415(0x80c)][_0x478415(0x382)] = _0x3d8a2d + '%', _0x31cbe5['style']['transform'] = _0x478415(0x457); } else _0x32b075 = _0x478415(0xa12); } const _0x1e8b79 = { 'gallery': _0x478415(0x9d1), 'whispers': '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'abyss': _0x478415(0x60b), 'fragments': _0x478415(0x919), 'bites': _0x478415(0x27e), 'wants': _0x478415(0xc24), 'footprints': '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]' }, _0x103d85 = _0x1e8b79[_0x4668aa] || _0x478415(0x897) + _0x4668aa + '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。'; let _0x293660 = ''; if (_0x5552f6['linkedWorldBookIds'] && _0x5552f6[_0x478415(0xb2b)][_0x478415(0x55b)] > 0x0) { const _0x2472e3 = _0x5552f6[_0x478415(0xb2b)][_0x478415(0x575)](_0x18ac4c => _0x5f0a6c[_0x478415(0x7ad)][_0x478415(0x3be)](_0x5f5890 => _0x5f5890['id'] === _0x18ac4c))['filter'](Boolean)['map'](_0x3f0d15 => _0x478415(0x3ad) + _0x3f0d15['name'] + '\x0a' + _0x3f0d15[_0x478415(0x67c)])[_0x478415(0x3b9)](''); _0x2472e3 && (_0x293660 = _0x478415(0x4dd) + _0x2472e3); } const _0x43203f = _0x478415(0x5e4) + _0x5552f6[_0x478415(0x3b3)] + _0x478415(0xb55) + _0x5552f6[_0x478415(0x3b3)] + _0x478415(0x27d) + _0x2ce68d[_0x478415(0x3b3)] + _0x478415(0x2f2) + _0x2722bb + _0x478415(0x253) + _0x45c48c[_0x478415(0x660)](_0x478415(0x2ed), { 'dateStyle': 'full', 'timeStyle': _0x478415(0x455) }) + _0x478415(0x29c) + _0x5552f6[_0x478415(0x3b3)] + _0x478415(0xb21) + _0x5552f6['persona'] + '\x0a' + _0x293660 + _0x478415(0x7b9) + _0x2ce68d[_0x478415(0x3b3)] + _0x478415(0xb21) + _0x2ce68d['persona'] + '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a' + _0x1ac3f9 + '\x0a' + _0x7f5ef9 + '\x0a\x0a#\x20当前任务指令\x0a' + _0x32b075 + '\x0a' + _0x103d85 + '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x310549 = [{ 'role': 'system', 'content': _0x43203f }]; _0x310549[_0x478415(0x1e6)]({ 'role': _0x478415(0x5c2), 'content': _0x478415(0x654) }); const _0x1eed23 = await _0x550e3c(_0x310549, { 'json': !![] }); return _0x1eed23; } async function _0x48bb0f(_0x189528) { const _0xb2a167 = _0x2481c4; if (_0xb2a167(0x2ef) === _0xb2a167(0x412)) _0x1f44a4[_0xb2a167(0xbce)] = _0x489fbe; else { const _0x2d7f51 = _0x543c76(_0x189528); if (!_0x2d7f51) throw new Error(_0xb2a167(0x731)); _0x2aa27a(!![], _0xb2a167(0x79b)); const _0xab7e43 = [_0xb2a167(0x213), _0xb2a167(0x354), 'abyss', _0xb2a167(0xa43), _0xb2a167(0x458), _0xb2a167(0xabf), _0xb2a167(0x72f)]; let _0x338b83 = {}; await Promise['all'](_0xab7e43[_0xb2a167(0x575)](async _0x465824 => { const _0x2a8f8e = _0xb2a167, _0x30c282 = _0x2a8f8e(0x7bd) + _0x189528 + '_' + _0x465824, _0x2b3d5f = await _0x5e591d(_0x30c282); if (_0x2b3d5f) { if (_0x2a8f8e(0x56e) !== _0x2a8f8e(0x56e)) _0x30ee2b = _0x363030[_0x2a8f8e(0x433)](_0x355f73); else try { _0x338b83[_0x465824] = JSON[_0x2a8f8e(0x433)](_0x2b3d5f); } catch (_0x406628) { } } })); if (Object[_0xb2a167(0x6ee)](_0x338b83)[_0xb2a167(0x55b)] === 0x0) return _0xb2a167(0x2aa); const _0x8df78f = _0xb2a167(0x795) + _0x2d7f51[_0xb2a167(0x3b3)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x3dd870 = [{ 'role': 'system', 'content': _0x8df78f }, { 'role': _0xb2a167(0x5c2), 'content': JSON[_0xb2a167(0x38f)](_0x338b83, null, 0x2) }]; _0x2aa27a(!![], '书记官正在奋笔疾书...'); const _0x30f678 = await _0x550e3c(_0x3dd870); return _0x30f678 || _0xb2a167(0x403); } } async function _0x48bb0f(_0x4d1e48) { const _0x36d2a9 = _0x2481c4; if ('PUJuz' === _0x36d2a9(0x4a6)) { const _0x55fdca = _0x543c76(_0x4d1e48); if (!_0x55fdca) throw new Error('找不到角色。'); try { if ('MzMWx' !== _0x36d2a9(0x237)) { _0x2aa27a(!![], _0x36d2a9(0x79b)); const _0x70e14f = [_0x36d2a9(0x213), _0x36d2a9(0x354), _0x36d2a9(0xa25), _0x36d2a9(0xa43), _0x36d2a9(0x458), 'wants', _0x36d2a9(0x72f)]; let _0x31e080 = {}; await Promise['all'](_0x70e14f[_0x36d2a9(0x575)](async _0x4a0c8c => { const _0xf0e218 = _0x36d2a9; if (_0xf0e218(0x7b7) !== _0xf0e218(0x445)) { const _0x58a573 = _0xf0e218(0x7bd) + _0x4d1e48 + '_' + _0x4a0c8c, _0x5228de = await _0x5e591d(_0x58a573); if (_0x5228de) try { if (_0xf0e218(0x61e) !== 'RwdRj') _0x31e080[_0x4a0c8c] = JSON[_0xf0e218(0x433)](_0x5228de); else { const _0x533978 = _0xe3819a[_0xf0e218(0x98e)](_0x3f0858, 'readonly'), _0x5539f0 = _0x533978['objectStore'](_0x4f40b5), _0x590ad7 = _0x5539f0['getAll'](); _0x590ad7[_0xf0e218(0x241)] = () => _0x49cb8b(_0x590ad7[_0xf0e218(0x77c)]), _0x590ad7['onerror'] = () => _0x4d9de5(_0x590ad7['error']); } } catch (_0x294576) { } } else { const _0x39c4cc = _0x209e80[_0xf0e218(0x7dd)](_0xf0e218(0x85e)); if (!_0x39c4cc) return; _0x39c4cc['id'] === _0xf0e218(0x3b6) ? _0x1cbe04() : _0x25fc56(); } })); if (Object[_0x36d2a9(0x6ee)](_0x31e080)['length'] === 0x0) { if (_0x36d2a9(0x22a) !== _0x36d2a9(0x319)) return _0x36d2a9(0x2aa); else { _0x1b34cb = _0x1048a2(_0x2ad51e[_0x36d2a9(0x86b)]), _0x1ae768[_0x36d2a9(0xb00)] = ''; if (_0x318007['length'] === 0x0) { _0x237571[_0x36d2a9(0xb00)] = _0x36d2a9(0x830); return; } _0x37c3b5[_0x36d2a9(0xbe4)]((_0x1b0af5, _0x561df8) => { const _0x324ff7 = _0x36d2a9, _0x58031e = _0x46b903[_0x324ff7(0x58b)]('p'); _0x58031e[_0x324ff7(0x356)] = _0x1b0af5[_0x324ff7(0x3a1)], _0x58031e['id'] = 'lyric-line-' + _0x561df8, _0x2ccfea['appendChild'](_0x58031e); }); } } const _0x4284d7 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x55fdca[_0x36d2a9(0x3b3)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x1a8d95 = [{ 'role': 'system', 'content': _0x4284d7 }, { 'role': _0x36d2a9(0x5c2), 'content': JSON[_0x36d2a9(0x38f)](_0x31e080, null, 0x2) }]; _0x2aa27a(!![], _0x36d2a9(0xb70)); const _0x520bc8 = await _0x550e3c(_0x1a8d95); return _0x520bc8 || _0x36d2a9(0x403); } else _0xf17618(); } finally { _0x2aa27a(![]); } } else { const _0x4370b0 = _0x344141(_0x2b334b['id']); if (!_0x4370b0 || !_0x4370b0['id']) return _0x2cef3a[_0x36d2a9(0x8d9)](_0x36d2a9(0x5d9)), null; _0x358318['calendarEvents'][_0x36d2a9(0x1e6)]({ 'id': 'event_ai_' + _0x54d5bc[_0x36d2a9(0xb71)](), 'date': _0x2fb0b3[_0x36d2a9(0xbee)], 'type': _0x4e6841[_0x36d2a9(0xb89)], 'content': _0x4750d2['eventContent'], 'userId': _0x4370b0['id'], 'createdBy': 'ai' }), _0x44ebd1(), _0x5c90d4(), _0x5bd329(); const _0x3d2df5 = _0x1c6ea9(_0x1533e9['id']); _0x3d2df5 && _0x4d504a[_0x36d2a9(0xb89)] === 'important' && _0x3c1e1e('💜\x20' + _0x3d2df5['name'] + '\x20添加了新的纪念日：' + _0x2729cc[_0x36d2a9(0x6fb)]); return { 'role': _0x36d2a9(0x41d), 'senderId': _0x174357['id'], 'timestamp': _0x141ae5[_0x36d2a9(0xb71)](), 'isOffline': _0x1eda39, 'content': null }; return { 'role': _0x36d2a9(0x41d), 'senderId': _0x5efd62['id'], 'timestamp': _0x4558a1[_0x36d2a9(0xb71)](), 'isOffline': _0x38e11d, 'content': null }; } } document[_0x2481c4(0x463)]('back-to-home-from-snoop-list')['addEventListener'](_0x2481c4(0x3bf), () => _0x1922fc(_0x2481c4(0x28c), _0x2481c4(0xb57))), document[_0x2481c4(0x463)]('back-to-snoop-list-from-phone')[_0x2481c4(0x582)](_0x2481c4(0x3bf), () => { const _0x2c6f46 = _0x2481c4; document[_0x2c6f46(0x463)](_0x2c6f46(0xc05))[_0x2c6f46(0x80c)][_0x2c6f46(0x6df)] = _0x2c6f46(0x333), _0x1922fc('snoopList', _0x2c6f46(0x1e7)); }), _0x126d05(); }); async function _0x64aca() { const _0x4420d8 = _0x3011a4; console[_0x4420d8(0x5b1)]('---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---'), console[_0x4420d8(0x5b1)](_0x4420d8(0xa98)); async function _0x3a2ed2(_0x20aa0c, _0x29f5a1) { const _0x28f3fa = await _0x3a9eb0; return new Promise((_0x42677, _0x512f38) => { const _0x3210a9 = _0x5910; if (_0x3210a9(0x6fd) !== _0x3210a9(0x4a2)) { const _0x3e7296 = _0x28f3fa['transaction'](_0x39e0d1, 'readwrite'), _0x514d08 = _0x3e7296[_0x3210a9(0xb08)](_0x39e0d1), _0x33a5ef = _0x514d08[_0x3210a9(0x71e)]({ 'id': _0x20aa0c, 'blob': _0x29f5a1 }); _0x33a5ef['onsuccess'] = () => _0x42677(_0x33a5ef[_0x3210a9(0x77c)]), _0x33a5ef[_0x3210a9(0x4d1)] = () => _0x512f38(_0x33a5ef[_0x3210a9(0x8d9)]); } else _0x26c368(![]); }); } async function _0x159d36(_0x5f3b54) { const _0x1a3466 = await _0x3a9eb0; return new Promise((_0x90a589, _0x411a5a) => { const _0x597f88 = _0x5910, _0x43a9d4 = _0x1a3466[_0x597f88(0x98e)](_0x44bd71, _0x597f88(0xb8d)), _0x1a5a71 = _0x43a9d4[_0x597f88(0xb08)](_0x44bd71), _0x2f9fa8 = _0x1a5a71[_0x597f88(0x7a6)](_0x5f3b54); _0x2f9fa8[_0x597f88(0x241)] = () => _0x90a589(_0x2f9fa8[_0x597f88(0x77c)] ? _0x2f9fa8[_0x597f88(0x77c)][_0x597f88(0xa41)] : null), _0x2f9fa8[_0x597f88(0x4d1)] = () => _0x411a5a(_0x2f9fa8[_0x597f88(0x8d9)]); }); } async function _0x52bd00(_0x4b5b80, _0x31ec3e) { const _0xb3c448 = await _0x3a9eb0; return new Promise((_0x30886, _0x489619) => { const _0x369080 = _0x5910, _0x44a266 = _0xb3c448[_0x369080(0x98e)](_0x44bd71, _0x369080(0x775)), _0x402fe9 = _0x44a266[_0x369080(0xb08)](_0x44bd71), _0x40794a = _0x402fe9['put']({ 'id': _0x4b5b80, 'data': _0x31ec3e }); _0x40794a[_0x369080(0x241)] = () => _0x30886(), _0x40794a['onerror'] = () => _0x489619(_0x40794a['error']); }); } function _0x2dd08d(_0x29ec05) { const _0x3d7a08 = _0x4420d8; if (_0x3d7a08(0x9a1) !== _0x3d7a08(0x761)) return fetch(_0x29ec05)['then'](_0x24cf94 => _0x24cf94[_0x3d7a08(0xb2a)]()); else _0x44fae1[_0x3d7a08(0x463)](_0x3d7a08(0x4e0) + _0x5d614f + _0x3d7a08(0x66d))['style']['backgroundImage'] = '', _0x18b48f[_0x3d7a08(0x463)]('char-edit-sprite-' + _0x45089a + _0x3d7a08(0xb6a))[_0x3d7a08(0x202)] = ''; } let _0x48fd76 = 0x0; for (let _0x20adf4 = 0x0; _0x20adf4 < localStorage[_0x4420d8(0x55b)]; _0x20adf4++) { if (_0x4420d8(0xa01) === _0x4420d8(0xb33)) _0x41ce1a += _0x4420d8(0x97e) + _0x12f0ae['query'] + _0x4420d8(0x5b3); else { const _0x23a730 = localStorage[_0x4420d8(0x54e)](_0x20adf4); if (_0x23a730 && _0x23a730[_0x4420d8(0x595)](_0x4420d8(0x3c3))) { let _0xf34ddc, _0x568654 = ![]; try { if (_0x4420d8(0x9b0) !== _0x4420d8(0x305)) { _0xf34ddc = JSON['parse'](localStorage['getItem'](_0x23a730)); if (!Array[_0x4420d8(0x9d7)](_0xf34ddc)) continue; for (const _0x220041 of _0xf34ddc) { if (_0x220041 && _0x220041[_0x4420d8(0x8dc)] && _0x220041[_0x4420d8(0x8dc)]['startsWith'](_0x4420d8(0x28a))) { const _0xa9878d = await _0x2dd08d(_0x220041[_0x4420d8(0x8dc)]), _0x519c92 = _0x4420d8(0x73d) + Date['now']() + '_' + Math[_0x4420d8(0x642)](); await _0x3a2ed2(_0x519c92, _0xa9878d), _0x220041['imageId'] = _0x519c92, delete _0x220041[_0x4420d8(0x8dc)], _0x568654 = !![], _0x48fd76++; } } _0x568654 && localStorage['setItem'](_0x23a730, JSON['stringify'](_0xf34ddc)); } else { const _0x5ca89b = _0x4e2f52[_0x4420d8(0x5a9)][_0x4420d8(0x216)](_0x5f35b0 => _0x5f35b0['type'] === _0x4420d8(0xa1d) && _0x5f35b0['playableUrl'])[_0x4420d8(0x575)](_0x54d9b6 => ({ ..._0x54d9b6, 'source': _0x4420d8(0x7f0) })); _0x1177f6['push'](..._0x5ca89b); } } catch (_0x8177f8) { console['error'](_0x4420d8(0x3f0) + _0x23a730 + '\x20时出错:', _0x8177f8); continue; } } } } console[_0x4420d8(0x5b1)](_0x4420d8(0xc09) + _0x48fd76 + '\x20张旧图片。'); } async function _0x3765c7() { const _0x596c2a = _0x3011a4; console[_0x596c2a(0x5b1)](_0x596c2a(0xaa1)), console['log']('哼，正在净化你那些被污染的好友圈动态...'); async function _0x233c9c(_0x2283df, _0xfe0e8a) { const _0x17ffb2 = await _0x3a9eb0; return new Promise((_0x2684c5, _0x1ff350) => { const _0x5c9454 = _0x5910, _0x35cfea = _0x17ffb2['transaction'](_0x5c9454(0x8a8), _0x5c9454(0x775)), _0xb6967 = _0x35cfea[_0x5c9454(0xb08)]('images'), _0x2c2cbf = _0xb6967['put']({ 'id': _0x2283df, 'blob': _0xfe0e8a }); _0x2c2cbf[_0x5c9454(0x241)] = () => _0x2684c5(_0x2c2cbf[_0x5c9454(0x77c)]), _0x2c2cbf[_0x5c9454(0x4d1)] = () => _0x1ff350(_0x2c2cbf[_0x5c9454(0x8d9)]); }); } function _0x2acb65(_0x266dbe) { const _0x26b37b = _0x596c2a; return fetch(_0x266dbe)['then'](_0x163915 => _0x163915[_0x26b37b(0xb2a)]()); } let _0x59fa29 = 0x0, _0xdd0523 = ![]; try { const _0x46e366 = localStorage['getItem'](_0x596c2a(0x508)); if (!_0x46e366) { console[_0x596c2a(0x5b1)]('好友圈档案柜是空的，无需净化。'); return; } const _0x1062e6 = JSON[_0x596c2a(0x433)](_0x46e366); if (!_0x1062e6['friendCircles'] || !Array[_0x596c2a(0x9d7)](_0x1062e6[_0x596c2a(0xb32)])) { if (_0x596c2a(0x9d3) === _0x596c2a(0x6db)) _0x2560b8[_0x596c2a(0x776)]['remove'](_0x596c2a(0x8ef)), _0x58c127[_0x596c2a(0x776)][_0x596c2a(0xb2c)]('active'), _0x12698d(_0x3b6ccc, _0x255173); else return; } for (const _0x332410 of _0x1062e6[_0x596c2a(0xb32)]) { if (_0x332410[_0x596c2a(0x5a9)] && Array[_0x596c2a(0x9d7)](_0x332410[_0x596c2a(0x5a9)])) { if ('GDDXO' !== _0x596c2a(0x299)) _0x10272b += '\x20(分享了歌曲:\x20' + _0x5d5721[_0x596c2a(0x48c)] + '\x20-\x20' + _0x3e3639[_0x596c2a(0x2d1)] + ')'; else for (const _0x4923ec of _0x332410['posts']) { if (_0x4923ec && _0x4923ec[_0x596c2a(0x8dc)] && _0x4923ec[_0x596c2a(0x8dc)][_0x596c2a(0x595)](_0x596c2a(0x28a))) { console[_0x596c2a(0x5b1)](_0x596c2a(0xba9) + _0x332410[_0x596c2a(0x3b3)] + _0x596c2a(0x4a8)); const _0x3cc8ef = await _0x2acb65(_0x4923ec[_0x596c2a(0x8dc)]), _0x55bfee = _0x596c2a(0x915) + Date['now']() + '_' + Math[_0x596c2a(0x642)](); await _0x233c9c(_0x55bfee, _0x3cc8ef), _0x4923ec[_0x596c2a(0xbce)] = _0x55bfee, delete _0x4923ec[_0x596c2a(0x8dc)], _0xdd0523 = !![], _0x59fa29++; } } } } _0xdd0523 && ('xOsNG' === _0x596c2a(0x753) ? _0x135ffb['removeItem'](_0x596c2a(0x3c3) + _0x469409) : (console[_0x596c2a(0x5b1)](_0x596c2a(0xb15)), localStorage[_0x596c2a(0x246)](_0x596c2a(0x508), JSON[_0x596c2a(0x38f)](_0x1062e6)))); } catch (_0x5edfeb) { console[_0x596c2a(0x8d9)](_0x596c2a(0xbf1), _0x5edfeb); } return console[_0x596c2a(0x5b1)](_0x596c2a(0x83b)), console[_0x596c2a(0x5b1)](_0x596c2a(0x347) + _0x59fa29 + _0x596c2a(0x2a4)), _0x59fa29; } async function _0x5e8463() { const _0x20c839 = _0x3011a4; console[_0x20c839(0x5b1)](_0x20c839(0x8e4)), console[_0x20c839(0x5b1)](_0x20c839(0xb30)); let _0x5b7bfb = 0x0, _0x394f4d = ![]; try { const _0x360f06 = localStorage['getItem'](_0x20c839(0x508)); if (!_0x360f06) return console['log'](_0x20c839(0x413)), 0x0; for (let _0x5d9188 = 0x0; _0x5d9188 < localStorage[_0x20c839(0x55b)]; _0x5d9188++) { const _0x5ba0ba = localStorage[_0x20c839(0x54e)](_0x5d9188); if (_0x5ba0ba && _0x5ba0ba[_0x20c839(0x595)](_0x20c839(0x3c3))) { if (_0x20c839(0x357) !== 'WRFSt') { let _0x4dd54d, _0x5eaed0 = ![]; try { if ('XSahq' === _0x20c839(0xab6)) { _0x4dd54d = JSON['parse'](localStorage[_0x20c839(0x6b4)](_0x5ba0ba)); if (!Array[_0x20c839(0x9d7)](_0x4dd54d)) continue; for (const _0x503dbd of _0x4dd54d) { if (_0x20c839(0x72d) !== _0x20c839(0x8b3)) { if (_0x503dbd && (_0x503dbd[_0x20c839(0xc02)] === _0x20c839(0xa1d) || _0x503dbd[_0x20c839(0xc02)] === 'listen-together-invite') && _0x503dbd[_0x20c839(0xc0d)] && _0x503dbd[_0x20c839(0xc0d)]['startsWith']('data:image')) { const _0x3692aa = await _0x32e14c(_0x503dbd['coverUrl']), _0x2e43da = _0x20c839(0xa57) + Date[_0x20c839(0xb71)]() + '_' + Math[_0x20c839(0x642)](); await _0x4d5a5e(_0x2e43da, _0x3692aa), _0x503dbd[_0x20c839(0x5c1)] = _0x2e43da, delete _0x503dbd[_0x20c839(0xc0d)], _0x5eaed0 = !![], _0x5b7bfb++; } } else _0x1625aa(_0x323f1a); } _0x5eaed0 && (_0x20c839(0x99a) === 'LolXe' ? localStorage[_0x20c839(0x246)](_0x5ba0ba, JSON['stringify'](_0x4dd54d)) : (_0x41dbe9['error'](_0x20c839(0x4d9), _0x407d07, _0x20c839(0x9f9), _0x3f56c1), _0x8275f4[_0x20c839(0xbc8)][_0x20c839(0x1e6)]({ 'role': _0x20c839(0x41d), 'senderId': _0x36373d['id'], 'timestamp': _0x3dd849[_0x20c839(0xb71)](), 'isOffline': !![], 'content': _0x20c839(0x2d8) + _0x291cc3 + ']' }))); } else _0x4b3b1e[_0x20c839(0x582)](_0x20c839(0x3bf), function () { const _0x9d3477 = _0x20c839, _0xf71eaa = { 'id': _0x3af4a6['id'], 'url': _0x9ce87[_0x9d3477(0xa18)] }; _0x383f74(this, _0xf71eaa); }); } catch (_0x449b8d) { console[_0x20c839(0x8d9)]('处理\x20' + _0x5ba0ba + _0x20c839(0x851), _0x449b8d); continue; } } else _0x3ad74e = { 'speaker': _0x1bfda1[_0x20c839(0x3b3)], 'line': _0x19ca7c[_0x20c839(0x67c)], 'emotion': _0x20c839(0x503) }; } } } catch (_0x549ff4) { if (_0x20c839(0x992) === _0x20c839(0xbf8)) { const _0x51734b = _0x20c839(0xc31); _0x4663ca = _0x20c839(0x8eb) + _0x4d35ae[_0x20c839(0x3b3)] + _0x20c839(0xb3f) + _0x51734b + ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“' + _0xa0ad1f[_0x20c839(0x3b3)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x51734b + ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[' + _0x51734b + _0x20c839(0x670); } else console[_0x20c839(0x8d9)](_0x20c839(0xaea), _0x549ff4); } return console[_0x20c839(0x5b1)](_0x20c839(0x887)), console[_0x20c839(0x5b1)](_0x20c839(0x347) + _0x5b7bfb + _0x20c839(0x87a)), _0x5b7bfb; } async function _0x1f140d() { const _0x3788ec = _0x3011a4; console[_0x3788ec(0x5b1)](_0x3788ec(0x797)), console['log'](_0x3788ec(0x9cd)); let _0x1ee88c = 0x0; try { const _0x32d57c = localStorage['getItem']('appState'); if (!_0x32d57c) { if (_0x3788ec(0x61b) !== _0x3788ec(0x61b)) { const _0x2090c2 = _0xc14c21[_0x3788ec(0x23b)](_0x3788ec(0x1fc)), _0x164a28 = _0x2b8efa[_0x3788ec(0x607)][_0x3788ec(0x825)], _0x353648 = _0x2f99bc(_0x2090c2['dataset'][_0x3788ec(0xb7b)], 0xa); _0xb1acaa(_0x164a28, _0x353648, _0x4a9df8); } else return console['log']('找不到旧的存档，无需救援。'), 0x0; } const _0x3904c0 = JSON[_0x3788ec(0x433)](_0x32d57c); if (!_0x3904c0[_0x3788ec(0x723)] || !Array['isArray'](_0x3904c0[_0x3788ec(0x723)])) return 0x0; for (const _0x1303eb of _0x3904c0['characters']) { if (_0x3788ec(0x453) === _0x3788ec(0x5ad)) _0xa6dbe7[_0x3788ec(0x5b1)](_0x3788ec(0x7e2)), _0x3009f6['currentAbortController'][_0x3788ec(0x63f)](_0x3788ec(0x96e)), _0x21843a[_0x3788ec(0x2b0)] = null; else { if (_0x1303eb && _0x1303eb[_0x3788ec(0x6b6)] && _0x1303eb[_0x3788ec(0x6b6)][_0x3788ec(0x595)](_0x3788ec(0x28a))) { const _0x3255ee = await _0x393cae('char_avatar_' + _0x1303eb['id']); if (!_0x3255ee) { if (_0x3788ec(0xafd) !== 'QIKmR') { console[_0x3788ec(0x5b1)](_0x3788ec(0xb8a) + _0x1303eb[_0x3788ec(0x3b3)] + _0x3788ec(0x832)); const _0x4e6356 = await _0x32e14c(_0x1303eb[_0x3788ec(0x6b6)]); await _0x4d5a5e('char_avatar_' + _0x1303eb['id'], _0x4e6356), _0x1ee88c++; } else _0x4aa026[_0x105adf][_0x3788ec(0x776)]['add'](_0x3788ec(0x8ef)); } } } } } catch (_0xe33b2a) { console[_0x3788ec(0x8d9)](_0x3788ec(0xa90), _0xe33b2a); } return console[_0x3788ec(0x5b1)](_0x3788ec(0x35a)), console['log'](_0x3788ec(0x274) + _0x1ee88c + _0x3788ec(0x74b)), _0x1ee88c; } function _0x48efd0() { const _0xac545d = _0x3011a4; if (!_0x5f0a6c[_0xac545d(0x504)]) return _0x5f0a6c['userProfiles']['find'](_0x2f6088 => _0x2f6088['id'] === _0x5f0a6c['activeUserProfileId']) || _0x5f0a6c[_0xac545d(0x7ae)][0x0]; const _0x21a2dd = _0x5f0a6c['chats'][_0xac545d(0x3be)](_0x2c0261 => _0x2c0261[_0xac545d(0xc02)] === _0xac545d(0x963) && _0x2c0261[_0xac545d(0x3d4)][_0xac545d(0xa1c)](_0x5f0a6c[_0xac545d(0x504)])), _0x4b359b = _0x21a2dd?.['boundUserProfileId'] || _0x5f0a6c[_0xac545d(0xbb5)]; return _0x5f0a6c[_0xac545d(0x7ae)][_0xac545d(0x3be)](_0x123e92 => _0x123e92['id'] === _0x4b359b) || _0x5f0a6c[_0xac545d(0x7ae)][0x0]; } function _0x380a73(_0x353b04) { const _0x3c0082 = _0x3011a4, _0x3f0eb5 = new Date(), _0x321d97 = _0x3f0eb5 - _0x353b04, _0x38b941 = Math[_0x3c0082(0x596)](_0x321d97 / 0x3e8), _0x5111db = Math[_0x3c0082(0x596)](_0x38b941 / 0x3c), _0x1cc96d = Math['round'](_0x5111db / 0x3c), _0x494a11 = Math['round'](_0x1cc96d / 0x18), _0x34e4ab = _0x353b04[_0x3c0082(0x39d)]('zh-CN', { 'hour': _0x3c0082(0xbe7), 'minute': '2-digit' }); if (_0x38b941 < 0x3c) return '刚才'; if (_0x5111db < 0x3c) return _0x5111db + '分钟前'; const _0x5b36c2 = _0x3f0eb5[_0x3c0082(0x7bc)]() === _0x353b04[_0x3c0082(0x7bc)](); if (_0x5b36c2) return _0x3c0082(0x556) + _0x34e4ab; const _0x394dd6 = new Date(); _0x394dd6[_0x3c0082(0x959)](_0x3f0eb5[_0x3c0082(0x60d)]() - 0x1); const _0x3da7ec = _0x394dd6[_0x3c0082(0x7bc)]() === _0x353b04[_0x3c0082(0x7bc)](); if (_0x3da7ec) return _0x3c0082(0xba7) + _0x34e4ab; if (_0x494a11 <= 0x7) { const _0x186147 = [_0x3c0082(0x957), _0x3c0082(0x685), '星期二', '星期三', '星期四', _0x3c0082(0x733), '星期六']; return _0x186147[_0x353b04[_0x3c0082(0x2c2)]()] + '\x20' + _0x34e4ab; } return _0x353b04[_0x3c0082(0x25d)]() + '年' + (_0x353b04[_0x3c0082(0x567)]() + 0x1) + '月' + _0x353b04[_0x3c0082(0x60d)]() + '日'; } function _0x1f84b9(_0x582bb3, _0x179a1c = 0x320, _0xf939ec = 0.8, _0x455860 = ![]) { return new Promise((_0x26c887, _0x10793a) => { const _0x22255a = _0x5910; if (_0x22255a(0x1db) !== 'cwcnc') { if (!_0x582bb3 || !_0x582bb3['type'][_0x22255a(0x595)](_0x22255a(0x590))) return _0x10793a(new Error(_0x22255a(0x69f))); const _0x24cb6a = new FileReader(); _0x24cb6a[_0x22255a(0x442)](_0x582bb3), _0x24cb6a[_0x22255a(0x79e)] = _0x5570ac => { const _0x271f22 = _0x22255a, _0x4d7163 = new Image(); _0x4d7163['src'] = _0x5570ac['target'][_0x271f22(0x77c)], _0x4d7163[_0x271f22(0x79e)] = () => { const _0x35d86f = _0x271f22, _0x232572 = document[_0x35d86f(0x58b)](_0x35d86f(0x903)); let _0x2d1539 = _0x4d7163[_0x35d86f(0x5af)], _0x5d3784 = _0x4d7163[_0x35d86f(0x389)]; _0x2d1539 > _0x5d3784 ? _0x2d1539 > _0x179a1c && (_0x5d3784 *= _0x179a1c / _0x2d1539, _0x2d1539 = _0x179a1c) : _0x5d3784 > _0x179a1c && (_0x35d86f(0x3dd) !== _0x35d86f(0x3dd) ? _0x25ed60('chat', _0x35d86f(0xaa5)) : (_0x2d1539 *= _0x179a1c / _0x5d3784, _0x5d3784 = _0x179a1c)); _0x232572[_0x35d86f(0x5af)] = _0x2d1539, _0x232572[_0x35d86f(0x389)] = _0x5d3784; const _0x1d5b6b = _0x232572[_0x35d86f(0x89c)]('2d'); _0x1d5b6b[_0x35d86f(0x6cc)](_0x4d7163, 0x0, 0x0, _0x2d1539, _0x5d3784); const _0x3a09a1 = _0x582bb3[_0x35d86f(0xc02)] === _0x35d86f(0x5a7) ? _0x35d86f(0x5a7) : _0x35d86f(0xbda); _0x455860 ? _0x35d86f(0x271) !== _0x35d86f(0x2f7) ? _0x232572[_0x35d86f(0x1ef)](_0x48071a => { const _0x3a46c8 = _0x35d86f; if ('RMXob' === 'Fhqub') _0x3a8217[_0x3a46c8(0x356)] = '新建好友圈', _0x1f07ec[_0x3a46c8(0x202)] = '', _0x4f9f29[_0x3a46c8(0x202)] = '好友圈\x20' + (_0x1ecd2e['friendCircles'][_0x3a46c8(0x55b)] + 0x1), _0x219bcd[_0x3a46c8(0x202)] = _0x152305[_0x3a46c8(0xbb5)], _0x49b83e['style'][_0x3a46c8(0x6df)] = 'none'; else { if (_0x48071a) { if (_0x3a46c8(0x518) === _0x3a46c8(0x1d6)) { const _0x4139dd = _0x1a5f9d[_0x3a46c8(0x58b)]('div'); _0x4139dd[_0x3a46c8(0x356)] = _0x2439b5, _0x4139dd[_0x3a46c8(0x582)](_0x3a46c8(0x3bf), () => { const _0x18b8b3 = _0x3a46c8; _0x574357[_0x18b8b3(0x202)] = _0x2f7e59, _0x396f63['classList'][_0x18b8b3(0x554)](_0x18b8b3(0x940)); }), _0x581dd2[_0x3a46c8(0xa59)](_0x4139dd); } else _0x26c887(_0x48071a); } else _0x10793a(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.')); } }, _0x3a09a1, _0xf939ec) : (_0x27edd8['error'](_0x35d86f(0x56b), _0xc23fc4), _0x2c0b6e(_0x35d86f(0x4c5))) : _0x26c887(_0x232572['toDataURL'](_0x3a09a1, _0xf939ec)); }, _0x4d7163['onerror'] = _0x189d25 => _0x10793a(_0x189d25); }, _0x24cb6a[_0x22255a(0x4d1)] = _0x4b985a => _0x10793a(_0x4b985a); } else { _0x398ab0('群聊至少需要2名成员。'); return; } }); } function _0x5abd11(_0x404cbc) { return new Promise((_0x5529f6, _0xbed26e) => { const _0x46e4d5 = _0x5910; if (_0x46e4d5(0x564) !== 'TBVSe') { const _0x4ad309 = new FileReader(); _0x4ad309['onloadend'] = () => _0x5529f6(_0x4ad309[_0x46e4d5(0x77c)]), _0x4ad309[_0x46e4d5(0x4d1)] = _0xbed26e, _0x4ad309[_0x46e4d5(0x442)](_0x404cbc); } else return { 'role': _0x46e4d5(0x5c2), 'content': [{ 'type': 'text', 'text': _0x3a4e73[_0x46e4d5(0x67c)] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0xd4e13a['image'], 'detail': 'high' } }] }; }); } function _0x5abd11(_0x1187e4) { return new Promise((_0x5bd770, _0x176bbc) => { const _0x2e1829 = _0x5910, _0x2ef91d = new FileReader(); _0x2ef91d[_0x2e1829(0xabe)] = () => _0x5bd770(_0x2ef91d[_0x2e1829(0x77c)]), _0x2ef91d[_0x2e1829(0x4d1)] = _0x176bbc, _0x2ef91d[_0x2e1829(0x442)](_0x1187e4); }); } function _0x397360(_0x3f2f28, _0x20e604, _0xd888e3) { const _0x151297 = _0x3011a4, _0xa2e14 = _0x95557b => { const _0x209acb = _0x5910; if (_0x209acb(0x840) === _0x209acb(0x840)) { if (_0x95557b['role'] === 'user') return _0x5f0a6c[_0x209acb(0x404)]?.[_0x209acb(0x3b3)] || _0x209acb(0x222); if (_0x3f2f28[_0x209acb(0xc02)] === _0x209acb(0x74a)) { const _0x40eded = _0x95557b[_0x209acb(0xb6f)] ? _0x15f95d(_0x95557b[_0x209acb(0xb6f)]) : null; return _0x40eded?.[_0x209acb(0x3b3)] || 'Unknown'; } else { const _0x496ab6 = _0x15f95d(_0x3f2f28[_0x209acb(0x3d4)][0x0]); return _0x496ab6?.[_0x209acb(0x3b3)] || 'AI'; } } else { const _0x2fcb9a = _0x314256[_0x209acb(0x3ae)](); if (_0x3ca1f1[_0x209acb(0x977)](_0x20d8bd => _0x2fcb9a[_0x209acb(0x595)](_0x20d8bd))) { const _0xba062c = _0x952d81[_0x4f327c]; if (typeof _0xba062c === _0x209acb(0xbc2)) _0x43c99f[_0x209acb(0x1e6)](_0xba062c); if (_0x2a0d4b[_0x209acb(0x9d7)](_0xba062c)) _0xba062c['forEach'](_0x10e7ba => { const _0x48d626 = _0x209acb; if (typeof _0x10e7ba === 'string') _0x53ef06[_0x48d626(0x1e6)](_0x10e7ba); }); } } }, _0x1d51d5 = _0x20e604[_0x151297(0x929)](-_0xd888e3), _0x9c666a = []; for (const _0x206b52 of _0x1d51d5) { const _0x433e09 = new Date(_0x206b52['timestamp'])[_0x151297(0x39d)]('zh-CN', { 'hour': _0x151297(0xbe7), 'minute': _0x151297(0xbe7) }); _0x206b52[_0x151297(0x67c)] && _0x9c666a['push']('[' + _0x433e09 + ']\x20[' + _0xa2e14(_0x206b52) + ']\x20' + String(_0x206b52[_0x151297(0x67c)])['trim']()); } return _0x9c666a; } function _0x1629dc(_0x4ff3bc) { const _0x7d3b80 = _0x3011a4; if (_0x4ff3bc[_0x7d3b80(0xc02)] === _0x7d3b80(0x74a)) return _0x7d3b80(0xada) + (_0x4ff3bc[_0x7d3b80(0x3b3)] || _0x7d3b80(0xb61)) + '」'; const _0x31b4dd = _0x15f95d(_0x4ff3bc[_0x7d3b80(0x3d4)][0x0]); return '与\x20' + (_0x31b4dd?.['name'] || _0x7d3b80(0x7a2)) + _0x7d3b80(0x7b1); } function _0x1c64af(_0xaf6b18) { const _0x36b708 = _0x3011a4; try { const _0xfa10a0 = localStorage[_0x36b708(0x6b4)]('chatHistory_' + _0xaf6b18), _0x56972a = JSON[_0x36b708(0x433)](_0xfa10a0 || '[]'); return Array[_0x36b708(0x9d7)](_0x56972a) ? _0x56972a : []; } catch { if (_0x36b708(0x40b) === _0x36b708(0x40b)) return []; else { const _0x21ed44 = { 'id': _0x36b708(0x728) + _0xdec2ee[_0x36b708(0xb71)](), 'name': _0x1b24f2, 'content': _0x39e778 }; _0x483342[_0x36b708(0x7ad)]['push'](_0x21ed44); } } } function _0x27c1ec(_0xa54c8a) { const _0x5c9eb5 = _0x3011a4, _0x222c91 = Math['max'](0x1, Number(_0x5f0a6c[_0x5c9eb5(0xa91)]?.[_0x5c9eb5(0x8e9)] ?? 0x64)), _0x314011 = _0x5f0a6c[_0x5c9eb5(0xab8)][_0x5c9eb5(0x216)](_0x19b5f5 => _0x19b5f5['participantIds']['includes'](_0xa54c8a)), _0xd7e8ab = _0x314011[_0x5c9eb5(0x575)](_0x4bee02 => { const _0x1caea1 = _0x5c9eb5, _0x58c2f8 = _0x1c64af(_0x4bee02['id']), _0x2c84a6 = _0x58c2f8['length'] > 0x0 ? _0x58c2f8[_0x58c2f8[_0x1caea1(0x55b)] - 0x1] : null; return { 'chat': _0x4bee02, 'history': _0x58c2f8, 'lastTimestamp': _0x2c84a6 ? _0x2c84a6[_0x1caea1(0x83a)] : 0x0 }; })[_0x5c9eb5(0x216)](_0x153974 => _0x153974[_0x5c9eb5(0x558)]['length'] > 0x0); _0xd7e8ab[_0x5c9eb5(0x61a)]((_0x30394e, _0x1f6049) => _0x1f6049[_0x5c9eb5(0x6dc)] - _0x30394e[_0x5c9eb5(0x6dc)]); const _0x33560b = [], _0x1319a9 = {}; return _0xd7e8ab['forEach']((_0x46f934, _0x6cd2e) => { const _0x4c0b6a = _0x5c9eb5, _0x56a83b = _0x397360(_0x46f934[_0x4c0b6a(0x83e)], _0x46f934[_0x4c0b6a(0x558)], _0x222c91); if (_0x56a83b[_0x4c0b6a(0x55b)] === 0x0) return; const _0x3e1359 = _0x6cd2e === 0x0 ? _0x4c0b6a(0xc15) : _0x4c0b6a(0x1d1); _0x33560b['push'](_0x4c0b6a(0x6e7) + _0x3e1359 + _0x1629dc(_0x46f934['chat']) + '\x0a' + _0x56a83b[_0x4c0b6a(0x3b9)]('\x0a')), _0x1319a9[_0x46f934[_0x4c0b6a(0x83e)]['id']] = _0x56a83b[_0x4c0b6a(0x55b)]; }), { 'omniText': _0x33560b[_0x5c9eb5(0x3b9)]('\x0a\x0a'), 'usedCounts': _0x1319a9 }; } function _0xd3ebbc(_0xc3db84) { const _0x1cd9df = _0x3011a4; let _0x46b838 = null; const _0x2f9010 = _0x5f0a6c[_0x1cd9df(0xab8)][_0x1cd9df(0x216)](_0x1b3c23 => _0x1b3c23[_0x1cd9df(0x3d4)]['includes'](_0xc3db84)); for (const _0x3e2290 of _0x2f9010) { if (_0x1cd9df(0xa7c) === _0x1cd9df(0xa7c)) { const _0x2ecbcd = _0x1c64af(_0x3e2290['id']); if (_0x2ecbcd && _0x2ecbcd[_0x1cd9df(0x55b)] > 0x0) { const _0x3414fb = _0x2ecbcd[_0x2ecbcd['length'] - 0x1]; (!_0x46b838 || _0x3414fb[_0x1cd9df(0x83a)] > _0x46b838[_0x1cd9df(0x83a)]) && (_0x46b838 = _0x3414fb); } } else _0x225c9b = _0x21f866[_0x1cd9df(0x3b3)], _0x5b6362 = _0x7ebbf[_0x1cd9df(0x6b6)]; } return _0x46b838; } function _0x3161ac(_0x517575) { const _0x57e565 = _0x3011a4; if (!_0x517575 || !_0x517575['includes'](',')) return _0x517575; const _0x2859c8 = _0x517575[_0x57e565(0x278)](',')[_0x57e565(0x575)](_0x29fe17 => _0x29fe17[_0x57e565(0x1e9)]()); return _0x2859c8[Math['floor'](Math[_0x57e565(0x642)]() * _0x2859c8[_0x57e565(0x55b)])]; } function _0x1ec207(_0x36d22b) { return new Promise(_0x16b0a3 => { const _0x573428 = _0x5910, _0x2664eb = document['getElementById']('modal-root'), _0x1c59b0 = document[_0x573428(0x463)](_0x573428(0x709)), _0x12aa1e = document[_0x573428(0x463)](_0x573428(0x93c)), _0xf4c3e0 = document['getElementById'](_0x573428(0x365)), _0x1785dd = document[_0x573428(0x463)](_0x573428(0x704)); _0x1c59b0['textContent'] = _0x36d22b, _0x2664eb[_0x573428(0x80c)][_0x573428(0x6df)] = _0x573428(0x1df); const _0x46b932 = _0x8624f => { const _0x35154f = _0x573428; _0x2664eb[_0x35154f(0x80c)][_0x35154f(0x6df)] = 'none', _0x12aa1e['onclick'] = _0xf4c3e0[_0x35154f(0x752)] = _0x1785dd[_0x35154f(0x752)] = null, document['removeEventListener']('keydown', _0x36dce1), _0x16b0a3(_0x8624f); }, _0x36dce1 = _0xe970d3 => { const _0x39a5f6 = _0x573428; if (_0x39a5f6(0x85c) === _0x39a5f6(0x85c)) { if (_0xe970d3['key'] === _0x39a5f6(0x35f)) _0x46b932(![]); if (_0xe970d3['key'] === _0x39a5f6(0xaff)) _0x46b932(!![]); } else _0x54c9c5(![]), _0x5b6ac4[_0x39a5f6(0x606)][_0x39a5f6(0x202)] = ''; }; _0x12aa1e[_0x573428(0x752)] = () => _0x46b932(!![]), _0xf4c3e0[_0x573428(0x752)] = () => _0x46b932(![]), _0x1785dd['onclick'] = () => _0x46b932(![]), document[_0x573428(0x582)](_0x573428(0x3ff), _0x36dce1); }); } function _0x24537c(_0x5695f8) { const _0x534469 = _0x3011a4, _0x3a07ba = document[_0x534469(0x463)](_0x534469(0x877)); _0x3a07ba[_0x534469(0x356)] = _0x5695f8, _0x3a07ba[_0x534469(0x80c)]['display'] = _0x534469(0x629); if (_0x24537c['_t']) clearTimeout(_0x24537c['_t']); _0x24537c['_t'] = setTimeout(() => { const _0x57429e = _0x534469; _0x57429e(0x990) !== 'oMHMW' ? _0x4ad778[_0x57429e(0x8d9)](_0x57429e(0x6ad), _0x35a30b) : _0x3a07ba[_0x57429e(0x80c)]['display'] = _0x57429e(0x333); }, 0x640); } function _0x59a011() { const _0x80a89e = _0x3011a4, _0x20e635 = document[_0x80a89e(0x463)](_0x80a89e(0xa9b)), _0x3413bf = document[_0x80a89e(0x463)](_0x80a89e(0x2d5)), _0x4b4b28 = document['querySelectorAll'](_0x80a89e(0xa9a)), _0x10b79d = document[_0x80a89e(0x463)]('home-dock'); let _0x3c868f = 0x0; _0x3413bf[_0x80a89e(0x80c)][_0x80a89e(0x5af)] = _0x80a89e(0x59f); const _0x2ba851 = 0x3; function _0x41dae3(_0xb714b4) { const _0x3341e9 = _0x80a89e; if (_0x3341e9(0x844) === _0x3341e9(0x844)) { if (_0xb714b4 < 0x0 || _0xb714b4 >= _0x2ba851) return; _0x3413bf[_0x3341e9(0x80c)][_0x3341e9(0x3e9)] = _0x3341e9(0x3a7) + _0xb714b4 * (0x64 / _0x2ba851) + '%)', _0x4b4b28[_0x3341e9(0xbe4)](_0x1645fa => _0x1645fa[_0x3341e9(0x776)][_0x3341e9(0x554)]('active')), _0x4b4b28[_0xb714b4][_0x3341e9(0x776)][_0x3341e9(0xb2c)](_0x3341e9(0x8ef)), _0x3c868f = _0xb714b4; if (_0xb714b4 === 0x0) _0x10b79d[_0x3341e9(0x80c)]['display'] = _0x3341e9(0x333); else { if (_0x3341e9(0x3d6) === 'QyZeE') { const _0x3b30c4 = _0x235c5e[_0x3341e9(0x6b4)](_0x3341e9(0x3b5)); _0x3b30c4 ? _0xb16e4[_0x3341e9(0x463)](_0x3341e9(0xad8))['style']['setProperty'](_0x3341e9(0x3ed), _0x3341e9(0x9a3) + _0x3b30c4 + ')') : _0x30f3e5[_0x3341e9(0x463)]('music-screen')[_0x3341e9(0x80c)][_0x3341e9(0x981)](_0x3341e9(0x3ed), _0x3341e9(0x333)); } else _0x10b79d[_0x3341e9(0x80c)]['display'] = _0x3341e9(0x1df); } } else _0x2fc48e[_0x3341e9(0x805)](_0x3341e9(0x3c3) + _0xffd8['id']); } _0x41dae3(0x0), _0x4b4b28['forEach'](_0x5abfb1 => { const _0x26ea65 = _0x80a89e; _0x5abfb1[_0x26ea65(0x582)](_0x26ea65(0x3bf), () => { const _0x2ee45c = _0x26ea65; if (_0x2ee45c(0x4f2) === 'CoANA') { const _0x388b2f = parseInt(_0x5abfb1[_0x2ee45c(0x607)]['page'], 0xa); _0x41dae3(_0x388b2f); } else _0x4e9cfb && (_0x1b27a6[_0x2ee45c(0x80c)][_0x2ee45c(0x6df)] = _0x2ee45c(0x333)); }); }); let _0x57ba72 = 0x0, _0x11c0fa = 0x0, _0x480593 = 0x0, _0x407d05 = ![], _0x454836 = ''; _0x20e635['addEventListener'](_0x80a89e(0x8f8), _0x524ea4 => { const _0xf98cf7 = _0x80a89e; _0x57ba72 = _0x524ea4[_0xf98cf7(0x906)][0x0][_0xf98cf7(0x3b8)], _0x11c0fa = _0x524ea4[_0xf98cf7(0x906)][0x0][_0xf98cf7(0x37a)], _0x407d05 = !![], _0x454836 = ''; }, { 'passive': !![] }), _0x20e635[_0x80a89e(0x582)]('touchmove', _0x320a76 => { const _0x33ac50 = _0x80a89e; if (!_0x407d05) return; if (_0x454836 === '') { const _0x2f95d2 = _0x320a76['touches'][0x0]['clientX'] - _0x57ba72, _0x2dcd4a = _0x320a76[_0x33ac50(0x906)][0x0][_0x33ac50(0x37a)] - _0x11c0fa; Math[_0x33ac50(0xc18)](_0x2f95d2) > Math[_0x33ac50(0xc18)](_0x2dcd4a) ? _0x454836 = _0x33ac50(0x565) : _0x33ac50(0x7ed) !== 'DcdHE' ? _0x454836 = 'vertical' : (_0x12180b['stopPropagation'](), _0x126c75()); } if (_0x454836 === 'horizontal') { if (_0x33ac50(0x8f6) === _0x33ac50(0x265)) { const _0x1d7501 = { 'id': _0x651a43['id'], 'url': _0x150b3b[_0x33ac50(0xa18)] }; _0x3d0f3d(this, _0x1d7501); } else _0x320a76[_0x33ac50(0x422)](); } }, { 'passive': ![] }), _0x20e635['addEventListener'](_0x80a89e(0x4ec), _0x308719 => { const _0x4bea1c = _0x80a89e; if ('RXHfE' === _0x4bea1c(0xbae)) { const _0x5c6073 = _0x211b3e[0x0][_0x4bea1c(0x1e9)](), _0x39118e = _0x43109f[0x1][_0x4bea1c(0x1e9)]()['replace'](/^"|"$/g, ''); _0x4cdeab[_0x5c6073] = _0x39118e; } else { if (!_0x407d05) return; _0x480593 = _0x308719[_0x4bea1c(0x819)][0x0][_0x4bea1c(0x5bf)], _0x454836 === 'horizontal' && _0x483506(), _0x407d05 = ![]; } }); function _0x483506() { const _0x2d7a74 = _0x80a89e, _0x530db4 = 0x32; if (_0x480593 < _0x57ba72 - _0x530db4) _0x2d7a74(0xbf5) !== _0x2d7a74(0x807) ? _0x41dae3(_0x3c868f + 0x1) : _0x35cb18 = _0x3046da['name']; else _0x480593 > _0x57ba72 + _0x530db4 && _0x41dae3(_0x3c868f - 0x1); } } function _0x3e4c16() { return new Promise(_0x227350 => { const _0x3a700b = _0x5910, _0x101f8b = document['getElementById'](_0x3a700b(0xb39)), _0x45507b = document[_0x3a700b(0x463)](_0x3a700b(0x87e)), _0x4a8085 = document[_0x3a700b(0x463)](_0x3a700b(0xb74)), _0x325f44 = document['getElementById'](_0x3a700b(0x754)), _0x148e14 = document[_0x3a700b(0x463)](_0x3a700b(0x1f6)), _0x86ce07 = document[_0x3a700b(0x463)]('music-input-backdrop'); _0x45507b[_0x3a700b(0x202)] = '', _0x4a8085[_0x3a700b(0x202)] = '', _0x101f8b[_0x3a700b(0x776)]['add'](_0x3a700b(0x940)), _0x45507b[_0x3a700b(0x5c5)](); const _0x49978b = _0x15b1f1 => { const _0x35a13b = _0x3a700b; if (_0x35a13b(0x747) === _0x35a13b(0x669)) { const _0x1c854a = _0x2b1e70['createElement'](_0x35a13b(0xbdf)); _0x1c854a[_0x35a13b(0x781)] = _0x33095d[_0x35a13b(0xc02)] === _0x35a13b(0x324) ? 'important-day-item' : 'todo-item', _0x1c854a[_0x35a13b(0x356)] = _0x204de5['content'], _0x1c854a[_0x35a13b(0x607)]['id'] = _0x495b06['id'], _0x4ee9e1[_0x35a13b(0xa59)](_0x1c854a); } else _0x101f8b[_0x35a13b(0x776)][_0x35a13b(0x554)](_0x35a13b(0x940)), _0x325f44[_0x35a13b(0x752)] = null, _0x148e14[_0x35a13b(0x752)] = null, _0x86ce07[_0x35a13b(0x752)] = null, document[_0x35a13b(0x4bf)](_0x35a13b(0x3ff), _0x39fe20), _0x227350(_0x15b1f1); }, _0x2edb12 = () => { const _0x215b83 = _0x3a700b, _0x1bb484 = _0x45507b[_0x215b83(0x202)][_0x215b83(0x1e9)](), _0x3b4d4f = _0x4a8085[_0x215b83(0x202)]['trim'](); if (!_0x1bb484 || !_0x3b4d4f) { if (_0x215b83(0x7e1) === _0x215b83(0x81b)) _0x3f9e7f[_0x215b83(0x776)][_0x215b83(0xb2c)](_0x215b83(0x8ef)), _0x389aef['scrollIntoView']({ 'behavior': _0x215b83(0x2ac), 'block': _0x215b83(0x545) }); else { _0x24537c(_0x215b83(0x570)); return; } } _0x49978b({ 'songName': _0x1bb484, 'artist': _0x3b4d4f }); }, _0x39fe20 = _0x338f48 => { const _0x5a9022 = _0x3a700b; if (_0x338f48[_0x5a9022(0x54e)] === 'Escape') _0x49978b(null); _0x338f48[_0x5a9022(0x54e)] === 'Enter' && (_0x338f48['preventDefault'](), _0x2edb12()); }; _0x325f44[_0x3a700b(0x752)] = _0x2edb12, _0x148e14[_0x3a700b(0x752)] = () => _0x49978b(null), _0x86ce07[_0x3a700b(0x752)] = () => _0x49978b(null), document[_0x3a700b(0x582)]('keydown', _0x39fe20); }); } function _0x4d1b87(_0x180553) { const _0x2dba0e = _0x3011a4; if (!_0x180553) return []; const _0x582bac = _0x180553[_0x2dba0e(0x1e9)](); if (_0x582bac[_0x2dba0e(0x595)](_0x2dba0e(0x9e2)) && _0x582bac[_0x2dba0e(0x3fd)](_0x2dba0e(0x3fe))) return [_0x582bac]; const _0xbbed52 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x52f55b = '|||CMD|||', _0x479fbf = [], _0x4ae7e4 = _0x180553[_0x2dba0e(0x219)](_0xbbed52, _0x3b8fd7 => { const _0x1c387a = _0x2dba0e; return _0x479fbf[_0x1c387a(0x1e6)](_0x3b8fd7), _0x52f55b; }), _0x24c704 = _0x4ae7e4['split'](_0x52f55b), _0x3d987d = []; let _0x5d6554 = 0x0; return _0x24c704['forEach']((_0x274d36, _0x61f145) => { const _0x26f919 = _0x2dba0e; if (_0x26f919(0x6c1) !== _0x26f919(0x7ba)) { const _0xe7c57b = _0x274d36[_0x26f919(0x1e9)](); _0xe7c57b && (_0x26f919(0x535) !== _0x26f919(0x535) ? (_0x645cdc['friendCircles'] = _0x5e240f['friendCircles'][_0x26f919(0x216)](_0xe53b62 => _0xe53b62['id'] !== _0x2e4116), _0x474021[_0x26f919(0x64b)] === _0x213337 && (_0x648b93[_0x26f919(0x64b)] = null), _0x5a1071(), _0xecc1a(_0x26f919(0x94f)), _0xdf9a02(), _0x2bfbd4('friendCircleList', _0x26f919(0xb44))) : _0x3d987d['push'](..._0x2d1715(_0xe7c57b))); if (_0x5d6554 < _0x479fbf[_0x26f919(0x55b)]) { if (_0x26f919(0x9db) !== _0x26f919(0x45a)) _0x3d987d['push'](_0x479fbf[_0x5d6554][_0x26f919(0x1e9)]()), _0x5d6554++; else { _0x30a24f['value'] = '', _0x49e053['innerHTML'] = ''; if (_0x3b103d['characters'][_0x26f919(0x55b)] < 0x2) { _0x5ccf45(_0x26f919(0x70a)); return; } _0x5b61b2[_0x26f919(0x723)][_0x26f919(0xbe4)](_0x305ba9 => { const _0xecd83f = _0x26f919, _0x2a6831 = _0x554b34[_0xecd83f(0x58b)]('li'); _0x2a6831['className'] = _0xecd83f(0xa2a), _0x2a6831[_0xecd83f(0xb00)] = _0xecd83f(0x4b1) + _0x305ba9['id'] + '\x22\x20data-id=\x22' + _0x305ba9['id'] + _0xecd83f(0x3d2) + (_0x305ba9[_0xecd83f(0x6b6)] || _0x40f42b) + _0xecd83f(0x737) + _0x305ba9['id'] + _0xecd83f(0x430) + _0x305ba9[_0xecd83f(0x3b3)] + _0xecd83f(0xaa2), _0x44c463['appendChild'](_0x2a6831); }), _0x287c47(_0x26f919(0xa6b), _0x26f919(0x551)); } } } else return _0x247879['push'](_0x1ed4fb), _0x2e9364; }), _0x3d987d; } function _0x3907e0(_0x1415e9, _0xa842af, _0xf85698 = '') { const _0x481149 = _0x3011a4, _0x4411c9 = document[_0x481149(0x58b)]('div'); _0x4411c9[_0x481149(0x781)] = _0x481149(0x953) + _0xf85698; const _0x3b578f = document[_0x481149(0x58b)](_0x481149(0x938)); _0x3b578f[_0x481149(0xb01)] = _0x1415e9, _0x3b578f[_0x481149(0x781)] = _0x481149(0x6b6); const _0x2d599b = document[_0x481149(0x58b)](_0x481149(0xbdf)); _0x2d599b[_0x481149(0x781)] = _0x481149(0x248); if (_0xa842af) { if (_0x481149(0x3ba) === _0x481149(0x486)) { const _0x3241d2 = _0x24acce['author'] === _0x481149(0x5c2) ? _0x2848b6[_0x481149(0x3b3)] : _0x5ec139(_0x54499e[_0x481149(0x65d)])[_0x481149(0x3b3)]; return _0x481149(0x8b9) + new _0x11b9b6(_0x3c3e0a[_0x481149(0x83a)])[_0x481149(0x4bc)]() + ']\x20' + _0x3241d2 + _0x481149(0x2f0) + _0x391628['content']; } else _0x2d599b[_0x481149(0x80c)][_0x481149(0x4b2)] = _0x481149(0x205) + _0xa842af + '\x27)'; } return _0x4411c9[_0x481149(0xa59)](_0x3b578f), _0x4411c9[_0x481149(0xa59)](_0x2d599b), _0x4411c9; } function _0x347503(_0x4e9c1c) { const _0x15c8bc = _0x3011a4; if (!_0x4e9c1c) return []; let _0x52d21c = String(_0x4e9c1c)['trim'](); const _0x1cac2f = _0x52d21c[_0x15c8bc(0x294)](/```(?:json)?([\s\S]*?)```/i); if (_0x1cac2f) _0x52d21c = _0x1cac2f[0x1]['trim'](); try { const _0x5b9513 = JSON['parse'](_0x52d21c); if (_0x5b9513 && Array['isArray'](_0x5b9513[_0x15c8bc(0x93b)])) return _0x5b9513[_0x15c8bc(0x93b)][_0x15c8bc(0x575)](_0x390f7b => typeof _0x390f7b === _0x15c8bc(0xbc2) ? _0x390f7b : _0x390f7b?.[_0x15c8bc(0x67c)])[_0x15c8bc(0x216)](Boolean)[_0x15c8bc(0x3d1)](_0x2d1715); const _0x2ef358 = ['response', 'dialogue', 'message', 'text', _0x15c8bc(0x67c), _0x15c8bc(0x81d), _0x15c8bc(0x370)]; if (_0x5b9513 && typeof _0x5b9513 === _0x15c8bc(0x340)) { if (_0x15c8bc(0xb78) === _0x15c8bc(0x661)) _0x16185b[_0x15c8bc(0x776)][_0x15c8bc(0xb2c)]('is-entering-from-left'), _0x10a6fd[_0x15c8bc(0x776)][_0x15c8bc(0xb2c)]('is-exiting-right'), _0x2c4bc9[_0x15c8bc(0x776)][_0x15c8bc(0xb2c)](_0x15c8bc(0xb73)), _0x1cf728(() => { const _0x240e38 = _0x15c8bc; _0x3bddba['classList']['remove']('is-visible', 'is-exiting-right'), _0x1ce907[_0x240e38(0x776)]['remove'](_0x240e38(0x2fc)), _0x1b4d31[_0x240e38(0xa8a)] = _0x5f316f, _0x1473cf(), _0x5da702['isAnimatingDiary'] = ![]; }, 0x2bc); else { const _0x432a40 = []; for (const _0x362873 of Object[_0x15c8bc(0x6ee)](_0x5b9513)) { if ('SaHxD' === _0x15c8bc(0x37b)) { const _0x558094 = _0x362873['toLowerCase'](); if (_0x2ef358[_0x15c8bc(0x977)](_0x2b878a => _0x558094['startsWith'](_0x2b878a))) { const _0x46dc1e = _0x5b9513[_0x362873]; if (typeof _0x46dc1e === 'string') _0x432a40['push'](_0x46dc1e); if (Array[_0x15c8bc(0x9d7)](_0x46dc1e)) _0x46dc1e[_0x15c8bc(0xbe4)](_0x41d79b => { const _0x10bb9d = _0x15c8bc; if (typeof _0x41d79b === _0x10bb9d(0xbc2)) _0x432a40[_0x10bb9d(0x1e6)](_0x41d79b); }); } } else { const _0x3539fe = _0x594652[_0x470771]; _0x458ba9(_0x3539fe); } } if (_0x432a40[_0x15c8bc(0x55b)]) return _0x432a40['flatMap'](_0x2d1715)[_0x15c8bc(0x929)](0x0, 0x9); } } } catch { } if (/[{\[]/[_0x15c8bc(0x555)](_0x52d21c) && /":/[_0x15c8bc(0x555)](_0x52d21c)) { if (_0x15c8bc(0xa4f) !== _0x15c8bc(0x644)) { const _0x25d664 = [], _0x13bc0f = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x50c3d2; while ((_0x50c3d2 = _0x13bc0f[_0x15c8bc(0x204)](_0x52d21c)) !== null) { if (_0x15c8bc(0xa73) === _0x15c8bc(0xa73)) { const _0x4859f1 = _0x50c3d2[0x1]['replace'](/\\"/g, '\x22')[_0x15c8bc(0x219)](/\\n/g, '\x0a')[_0x15c8bc(0x1e9)](); if (_0x4859f1) _0x25d664[_0x15c8bc(0x1e6)](_0x4859f1); } else { _0x57fc37[_0x15c8bc(0x591)] = [..._0x18fba4]; const _0x45ddcb = _0x57662b[_0x15c8bc(0x591)]['shift'](); _0x46af53['textContent'] = _0x45ddcb[_0x15c8bc(0x460)] === _0x15c8bc(0x3f9) ? '旁白' : _0x45ddcb[_0x15c8bc(0x460)], _0x456f8e[_0x15c8bc(0x356)] = _0x45ddcb[_0x15c8bc(0x81d)], _0x45ddcb[_0x15c8bc(0x460)] !== _0x15c8bc(0x3f9) && _0x277418(_0x2067e3[_0x15c8bc(0x5c3)], _0x45ddcb['emotion']); } } if (_0x25d664[_0x15c8bc(0x55b)]) return _0x25d664['flatMap'](_0x2d1715)[_0x15c8bc(0x929)](0x0, 0x9); } else { const _0x17ba56 = _0x4f1dda['transaction'](_0x586678, _0x15c8bc(0xb8d)), _0xafab0a = _0x17ba56[_0x15c8bc(0xb08)](_0x540228), _0x5f4619 = _0xafab0a[_0x15c8bc(0x7a6)](_0x33951e); _0x5f4619[_0x15c8bc(0x241)] = () => _0x4ed54e(_0x5f4619[_0x15c8bc(0x77c)]), _0x5f4619[_0x15c8bc(0x4d1)] = () => _0x46b280(_0x5f4619['error']); } } return _0x2d1715(_0x52d21c); } function _0x2d1715(_0xb561bf) { const _0x394376 = _0x3011a4; if (!_0xb561bf) return []; const _0x437008 = String(_0xb561bf)[_0x394376(0x1e9)](), _0x1f938d = _0x437008[_0x394376(0x278)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x394376(0x575)](_0x277ac7 => _0x277ac7[_0x394376(0x1e9)]())['filter'](Boolean); if (_0x1f938d[_0x394376(0x55b)] > 0x0) { if (_0x394376(0x527) === _0x394376(0x527)) return _0x1f938d[_0x394376(0x929)](0x0, 0x9); else { const _0x4f9b26 = _0x5fb907[_0x394376(0x202)]; let _0x1a807d = _0x4f9b26['replace'](/\.bubble\.sent/g, _0x394376(0x8c1))['replace'](/\.bubble\.received/g, _0x394376(0xa15)); _0x2a87fc[_0x394376(0xb00)] = _0x1a807d; } } return [_0x437008][_0x394376(0x216)](Boolean); } const _0x3a9eb0 = new Promise((_0x2f4590, _0x29a636) => { const _0x346d31 = _0x3011a4, _0x118cb2 = indexedDB['open'](_0x47dca3, 0x3); _0x118cb2['onerror'] = () => _0x29a636(_0x346d31(0x52d)), _0x118cb2[_0x346d31(0x241)] = () => _0x2f4590(_0x118cb2[_0x346d31(0x77c)]), _0x118cb2[_0x346d31(0x84e)] = _0x7ee8e9 => { const _0x2750c4 = _0x346d31, _0x5862ea = _0x7ee8e9[_0x2750c4(0x606)][_0x2750c4(0x77c)]; console['log']('Upgrading\x20database\x20to\x20version\x20' + _0x5862ea[_0x2750c4(0xb19)] + _0x2750c4(0x7a0)), !_0x5862ea[_0x2750c4(0x31a)][_0x2750c4(0x999)](_0x39e0d1) && (console[_0x2750c4(0x5b1)](_0x2750c4(0x492) + _0x39e0d1), _0x5862ea[_0x2750c4(0x9d0)](_0x39e0d1, { 'keyPath': 'id' })), !_0x5862ea[_0x2750c4(0x31a)][_0x2750c4(0x999)](_0x2750c4(0x2db)) && (console[_0x2750c4(0x5b1)](_0x2750c4(0x715)), _0x5862ea['createObjectStore'](_0x2750c4(0x2db), { 'keyPath': 'id' })), !_0x5862ea[_0x2750c4(0x31a)][_0x2750c4(0x999)](_0x44bd71) && (console[_0x2750c4(0x5b1)](_0x2750c4(0x492) + _0x44bd71), _0x5862ea[_0x2750c4(0x9d0)](_0x44bd71, { 'keyPath': 'id' })); }; }); async function _0x393cae(_0x4add46) { const _0x563282 = await _0x3a9eb0; return new Promise((_0x4f19b7, _0x4030c1) => { const _0x330f67 = _0x5910; if (_0x330f67(0x315) === _0x330f67(0x51c)) _0x3aa852 = _0x251172['createElement'](_0x330f67(0xbdf)), _0x2956f8[_0x330f67(0x781)] = 'typing-indicator', _0x5ac506['textContent'] = _0x330f67(0x9e5), _0x4c83ca[_0x330f67(0xa59)](_0x4d8b43); else { const _0x5c8d7f = _0x563282[_0x330f67(0x98e)](_0x39e0d1, 'readonly'), _0x2cf7c8 = _0x5c8d7f[_0x330f67(0xb08)](_0x39e0d1), _0x478ec2 = _0x2cf7c8[_0x330f67(0x7a6)](_0x4add46); _0x478ec2['onsuccess'] = () => _0x4f19b7(_0x478ec2[_0x330f67(0x77c)] ? _0x478ec2[_0x330f67(0x77c)][_0x330f67(0xb2a)] : null), _0x478ec2['onerror'] = () => _0x4030c1(_0x478ec2[_0x330f67(0x8d9)]); } }); } async function _0x5e591d(_0x48779e) { const _0x59bab3 = await _0x3a9eb0; return new Promise((_0x5868c2, _0xb647d6) => { const _0x55622c = _0x5910; if (_0x55622c(0x680) !== _0x55622c(0x8fb)) { const _0x1bb6a3 = _0x59bab3[_0x55622c(0x98e)](_0x44bd71, 'readonly'), _0x424600 = _0x1bb6a3[_0x55622c(0xb08)](_0x44bd71), _0x426980 = _0x424600[_0x55622c(0x7a6)](_0x48779e); _0x426980['onsuccess'] = () => _0x5868c2(_0x426980[_0x55622c(0x77c)] ? _0x426980[_0x55622c(0x77c)][_0x55622c(0xa41)] : null), _0x426980[_0x55622c(0x4d1)] = () => _0xb647d6(_0x426980[_0x55622c(0x8d9)]); } else _0x53b329['participantIds'][_0x55622c(0xbe4)](_0x278992 => { const _0x2f2389 = _0x55622c, _0x196be6 = _0x374049(_0x278992); if (_0x196be6) { const _0x5798d6 = _0x483711[_0x2f2389(0x58b)](_0x2f2389(0x2e5)); _0x5798d6[_0x2f2389(0x202)] = _0x196be6['id'], _0x5798d6[_0x2f2389(0x356)] = _0x196be6[_0x2f2389(0x3b3)], _0x8c7e59[_0x2f2389(0xa59)](_0x5798d6); } }), _0x100d60['style'][_0x55622c(0x6df)] = _0x55622c(0x629); }); } async function _0x1903c1(_0x3bd5eb, _0xd7dfd9) { const _0x367a80 = await _0x3a9eb0; return new Promise((_0x23337b, _0xdc044a) => { const _0x310210 = _0x5910; if ('Omvgp' === 'xXQmc') _0x22dcd0[_0x310210(0xa91)][_0x310210(0x813)] = null, _0x55bc3d(), _0x52fe08(), _0x4eddb4(_0x310210(0x2cb)); else { const _0x8c5a75 = _0x367a80[_0x310210(0x98e)](_0x44bd71, 'readwrite'), _0x511c7c = _0x8c5a75['objectStore'](_0x44bd71), _0x434383 = _0x511c7c[_0x310210(0x71e)]({ 'id': _0x3bd5eb, 'data': _0xd7dfd9 }); _0x434383[_0x310210(0x241)] = () => _0x23337b(), _0x434383[_0x310210(0x4d1)] = () => _0xdc044a(_0x434383[_0x310210(0x8d9)]); } }); } async function _0x21f951(_0x1c8802) { const _0x10243d = await _0x3a9eb0; return new Promise((_0x4d0bd7, _0x592cc8) => { const _0x44edda = _0x5910, _0x50bbec = _0x10243d['transaction'](_0x44bd71, _0x44edda(0x775)), _0x25b5e3 = _0x50bbec['objectStore'](_0x44bd71), _0x54768a = _0x25b5e3[_0x44edda(0x51a)](_0x1c8802); _0x54768a[_0x44edda(0x241)] = () => _0x4d0bd7(), _0x54768a['onerror'] = () => _0x592cc8(_0x54768a['error']); }); } function _0x5910(_0xa3162b, _0x2e2d84) { const _0xce54f8 = _0xce54(); return _0x5910 = function (_0x591090, _0x81f6ce) { _0x591090 = _0x591090 - 0x1cf; let _0x59062c = _0xce54f8[_0x591090]; return _0x59062c; }, _0x5910(_0xa3162b, _0x2e2d84); } async function _0x4d5a5e(_0x5b3ead, _0x12f7c9) { const _0x3176e4 = await _0x3a9eb0; return new Promise((_0x4f7d12, _0x53642f) => { const _0x2814e2 = _0x5910, _0x45e4c1 = _0x3176e4['transaction'](_0x39e0d1, _0x2814e2(0x775)), _0x4e3361 = _0x45e4c1[_0x2814e2(0xb08)](_0x39e0d1), _0xbd78e9 = _0x4e3361[_0x2814e2(0x71e)]({ 'id': _0x5b3ead, 'blob': _0x12f7c9 }); _0xbd78e9[_0x2814e2(0x241)] = () => _0x4f7d12(_0xbd78e9[_0x2814e2(0x77c)]), _0xbd78e9[_0x2814e2(0x4d1)] = () => _0x53642f(_0xbd78e9[_0x2814e2(0x8d9)]); }); } async function _0x15bd83(_0x53fca7) { const _0x5b54bd = await _0x3a9eb0; return new Promise((_0x42cefa, _0x21e541) => { const _0x28f5c8 = _0x5910, _0x3c6ba5 = _0x5b54bd[_0x28f5c8(0x98e)](_0x39e0d1, _0x28f5c8(0x775)), _0x243b5e = _0x3c6ba5['objectStore'](_0x39e0d1), _0x5177bd = _0x243b5e['delete'](_0x53fca7); _0x5177bd[_0x28f5c8(0x241)] = () => _0x42cefa(), _0x5177bd[_0x28f5c8(0x4d1)] = () => _0x21e541(_0x5177bd[_0x28f5c8(0x8d9)]); }); } function _0x32e14c(_0x21b09a) { const _0x21daf6 = _0x3011a4; return fetch(_0x21b09a)[_0x21daf6(0x794)](_0x2dfee6 => _0x2dfee6[_0x21daf6(0xb2a)]()); }
  </script>


  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
