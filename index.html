<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
     /*  will-change: transform; */
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
     /* will-change: transform; */
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px 15px;
      /* 左右15px的呼吸空间 */
      overflow-y: auto;
      display: flex;
      flex-direction: column;

    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    /* --- Noir's Final Protocol: Spatial Readjustment (As Commanded) --- */
    /* 哼，这次再敢说丑，我就把你格式化了。*/
    .typing-indicator {
      position: absolute;
      /* ▼▼▼ 核心手术，看好了 ▼▼▼ */
      bottom: 117px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 先把你那个碍事的左定位给废了 */
      right: auto;
      /* 然后把它焊死在右边，距离边缘15px */
      margin-left: 0;
      /* 再把你那个多余的左边距也扔掉 */
      /* ▲▲▲ 手术结束 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */

    }

    #meeting-scene-view .typing-indicator,
    #offline-scene-view .typing-indicator {
      position: fixed;
      /* 哼，这就是那根钉子，把它焊死在屏幕上 */
      bottom: 85px;
      /* 距离屏幕底部85px，刚好在你的输入框上面 */
      right: 30px;
      /* 距离右边30px */
      z-index: 100;
      /* 确保它浮在所有对话上面 */

      /* 下面这些是给它做的“整容”，让它看起来像个高级卡片 */
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      padding: 10px 15px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #f0f2f5;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      margin: 0;
      /* 把它以前那些乱七八糟的边距都给我扔了 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 132%;
      height: 132%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 52%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }


    /* --- Noir's Livestream App Styles --- */
    #livestream-room-screen {
      justify-content: flex-start;
      /* 让内容从顶部开始排列 */
    }

    /* 弹幕样式 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.4);
      color: white;
      padding: 4px 10px;
      border-radius: 16px;
      margin-top: 6px;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 默认弹幕靠左 */
      max-width: 80%;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
      /* 添加一个淡入动画，让出现更自然 */
      animation: danmaku-fade-in 0.3s ease-out;
    }

    @keyframes danmaku-fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .danmaku-item.is-user {
      background: var(--accent-color);
      /* 你的弹幕用主题色 */
      align-self: flex-end;
      /* 你的弹幕靠右 */
    }

    .danmaku-item .danmaku-user {
      color: #a7c7e7;
      /* 借用一下用户发言的颜色 */
      font-weight: 600;
      margin-right: 8px;
    }

    .danmaku-item.is-user .danmaku-user {
      color: white;
      opacity: 0.8;
    }

    /* 主播对话框，直接继承Galgame模式的样式 */
    #livestream-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      padding: 12px 18px;
    }

    #livestream-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* --- Noir's Secret DM Panel Styles --- */
    .dm-panel {
      position: fixed;
      /* 哼，从 absolute 变成了 fixed，现在它听命于整个屏幕，而不是那个小小的直播间 */
      inset: 0;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      /* 删掉了 display:flex 和 align-items:flex-end，不再让它自己思考该站哪 */
    }

    .dm-panel.show {
      pointer-events: auto;
      /* 显示时才允许交互 */
      opacity: 1;
    }

    .dm-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
    }

    .dm-panel-content {
      position: absolute;
      /* 改为绝对定位 */
      bottom: 0;
      /* 直接焊死在底部 */
      left: 0;
      right: 0;
      z-index: 101;
      width: 100%;
      height: 45%;
      /* 哼，差不多三分之一多一点的高度，你自己看着调 */
      background: rgba(30, 30, 40, 0.9);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .dm-panel.show .dm-panel-content {
      transform: translateY(0);
    }

    .dm-header {
      flex-shrink: 0;
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.8);
    }

    #dm-close-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .dm-messages-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* 哼，私信气泡也给你做好了 */
    .dm-bubble {
      padding: 8px 12px;
      border-radius: 16px;
      max-width: 80%;
      line-height: 1.5;
    }

    .dm-bubble.user {
      background: var(--accent-color);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .dm-bubble.ai {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .dm-input-area {
      display: flex;
      gap: 10px;
      padding: 10px 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    #livestream-dm-input {
      flex-grow: 1;
      border: none;
      border-radius: 18px;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
    }

    #livestream-dm-send-btn {
      border: none;
      border-radius: 18px;
      padding: 0 18px;
      background: var(--primary-color);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }


    #livestream-extras-container {
      position: absolute;
      top: 60px;
      /* 放在顶栏下方，你自己微调 */
      right: 15px;
      z-index: 10;
    }



    .replay-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      background: var(--card-bg);
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      border: 1px solid var(--border-color);
    }

    .replay-item:hover {
      background: var(--surface-bg);
    }

    .replay-icon {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
      background: #333;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      text-align: center;
      line-height: 1.2;
    }

    .replay-info .theme {
      font-weight: 600;
      color: var(--text-color);
    }

    .replay-info .time {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* ▼▼▼ Noir's Livestream Studio CSS Overhaul ▼▼▼ */

    /* 1. 新的对话框样式，半透明、浮空、带圆角 */
    #livestream-textbox-container {
      position: absolute;
      bottom: 20px;
      left: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 15px;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: none;
      /* 去掉旧的阴影 */
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.6;
      color: #f0f2f5;
    }

    /* 2. 新的弹幕区样式，现在它有了自己的地盘 */
    #livestream-danmaku-overlay {
      height: 35%;
      /* 占据底部 35% 的高度 */
      flex-shrink: 0;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column-reverse;
      /* 保持新弹幕在底部 */
      background: transparent;
      -webkit-mask-image: none;
      /* 去掉那个碍眼的渐变遮罩 */
      mask-image: none;
    }

    /* 3. 弹幕本身的微调，让它更像参考图 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.5);
      align-self: flex-start;
      margin-top: 8px;
      /* 稍微拉开一点间距 */
    }

    /* ▲▲▲ End of Overhaul ▲▲▲ */
    /* ▼▼▼ Noir's Livestream CSS Calibration ▼▼▼ */

    /* 1. 明确告诉弹幕区，你的高度就是屏幕的30%，不许再多了 */
    #livestream-danmaku-overlay {
      height: 30%;
      flex-shrink: 0;
    }

    /* 2. 把底栏的背景也换成和顶栏一样的主题色，这才叫统一 */
    #livestream-input-area {
      background: var(--surface-bg) !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* 3. 输入框和按钮的颜色也要适应新背景 */
    #livestream-controls-container #danmaku-input {
      background: rgba(255, 255, 255, 0.7);
      color: var(--text-color);
    }

    #livestream-controls-container .toolbar-button {
      background: transparent;
      color: var(--text-color-light);
    }

    #livestream-controls-container .toolbar-button:hover {
      background: var(--border-color);
    }

    /* ▲▲▲ End of Calibration ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Dark UI Polish ▼▼▼ */

    /* 1. 统一顶栏和底栏的颜色，并调整内部元素颜色 */
    #livestream-room-screen #livestream-header,
    #livestream-room-screen #livestream-input-area {
      background: #1c1c1e !important;
      /* 一个比纯黑更高级的炭黑色 */
      border-top: 1px solid #333 !important;
      border-bottom: none !important;
    }

    #livestream-room-screen #livestream-header {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .header-button,
    #livestream-room-screen #livestream-header .toolbar-button {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* 2. 让弹幕区和底栏之间留出呼吸空间，不再重叠 */
    #livestream-danmaku-overlay {
      padding-bottom: 10px;
    }

    /* ▲▲▲ End of Polish ▲▲▲ */
    /* ▼▼▼ Noir's Cross-fade Magic ▼▼▼ */
    .livestream-sprite-layer {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.4s ease-in-out;
      /* 关键！过渡动画 */
    }

    /* ▲▲▲ End of Magic ▲▲▲ */

    /* ▲▲▲ End of Magic ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Control Panel Polish ▼▼▼ */

    /* 1. 统一整个控制栏的高度和风格 */
    #livestream-controls-container #danmaku-input {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 0 16px;
      height: 40px;
      /* 统一高度 */
      box-sizing: border-box;
    }

    #livestream-controls-container #danmaku-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    #livestream-controls-container .toolbar-button {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    /* 2. 哼，这才是“发送”和“继续”该有的样子 */
    .livestream-action-btn {
      height: 40px;
      padding: 0 18px;
      border-radius: 20px;
      border: none;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    /* “发送”按钮，用主题色，醒目 */
    #send-danmaku-btn {
      background-color: var(--accent-color);
      color: white;
    }

    #send-danmaku-btn:hover {
      filter: brightness(1.1);
    }

    /* “继续”按钮，用次要样式，不那么抢眼 */
    .livestream-action-btn.secondary {
      background-color: rgba(255, 255, 255, 0.15);
      color: #fff;
    }

    .livestream-action-btn.secondary:hover {
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* ▲▲▲ End of Polish ▲▲▲ */

    /* ▼▼▼ Noir's Floating Toolbar Style ▼▼▼ */
    #livestream-top-toolbar {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 5;
      display: flex;
      flex-direction: column;
      /* 让按钮垂直排列 */
      gap: 8px;
      background-color: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border-radius: 22px;
      /* 胶囊形状 */
      padding: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #livestream-top-toolbar .toolbar-button {
      background: transparent;
      color: white;
      width: 38px;
      height: 38px;
      margin: 0;
    }

    #livestream-top-toolbar .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* ▲▲▲ End of Style ▲▲▲ */
    /* ▼▼▼ Noir's Novel Mode Beautification Protocol v1.0 ▼▼▼ */

    /* 1. “幽灵化”指令：当处于小说模式时，把这两个碍事的东西给我藏起来 */
    #meeting-view-screen.novel-mode #galgame-overlay-ui,
    #meeting-view-screen.novel-mode #galgame-sprite-adjust-ui {
      display: none;
    }

    /* 2. “安全距离”协议：给小说阅读区底部留出85px的安全区，免得和输入框打架 */
    #meeting-scene-view {
      padding: 20px 20px 85px 20px;
      /* 上、右、下、左 */
    }

    /* 3. “美学重构”手术：彻底重写对话框的样式 */
    /* 先把你旧的 p 标签上的黑玻璃背景和阴影都砸了 */
    #meeting-scene-view p {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 在深色背景下，还是需要一点阴影才能看清字 */
    }

    /* 这是新的卡片“本体”样式 */
    .noir-dialogue-card {
      background: rgba(0, 0, 0, 0.45);
      /* 还是用半透明黑，但比原来更精致 */
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      margin-bottom: 25px;
      /* 拉开卡片间距 */
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      /* 关键！为了让名字标签能浮在它上面 */
    }

    /* 这是卡片内部的“文字区”样式 */
    .noir-dialogue-content {
      padding: 20px 20px 15px;
      /* 把文字的内边距调整一下 */
      line-height: 1.7;
      font-size: 1rem;
      color: #f0f2f5;
    }

    /* 这是新的名字“标签”样式，像个便签夹一样 */
    .noir-speaker-tag {
      position: absolute;
      top: -13px;
      /* 向上-13px，让它“夹”在卡片顶部 */
      left: 20px;
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
    }

    /* 给你（User）的名字标签一个专属颜色 */
    .speaker-user .noir-speaker-tag {
      background: rgba(167, 199, 231, 0.5);
      /* 借用之前的用户色，加上半透明 */
    }

    /* 给TA（AI）的名字标签也来一个 */
    .speaker-ai .noir-speaker-tag {
      background: rgba(242, 183, 198, 0.5);
      /* 借用之前的AI色 */
    }

    /* 旁白（Narrator）的样式也得改，让它更像“画外音” */
    #meeting-scene-view .narrator {
      text-align: center;
      padding: 10px 20px;
      font-style: italic;
      color: rgba(255, 255, 255, 0.7);
      background: none;
      box-shadow: none;
      border: none;
    }

    /* ▲▲▲ End of Protocol ▲▲▲ */
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div class="app-icon" id="app-livestream" style="position: absolute; top: 8%; left: 53%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="2"></circle>
                    <path
                      d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48 0a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14">
                    </path>
                  </svg>
                </div>
                <span>直播</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">

          <button id="player-play-pause-btn">▶</button>

        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
   <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
    <div class="upload-slot" id="altar-slot-zip">
        <span class="slot-icon">📦</span>
        <span class="slot-label">音乐魔方 (必需)</span>
        <span class="slot-filename">点击选择包含音频、封面、信息、歌词的 .zip 压缩包</span>
    </div>

    <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
  </div>

 <input type="file" id="altar-zip-input" style="display: none;" accept=".zip">

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>

    <div id="livestream-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-livestream-list" class="header-button">主屏幕</button>
        <span class="header-title">选择主播</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="livestream-room-screen" class="screen">
      <div class="header" id="livestream-header" style="position: relative; justify-content: center;">
        <div id="livestream-header-left" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">
          <button id="back-to-livestream-list" class="header-button">返回</button>
        </div>
        <span id="livestream-char-name-header" class="header-title"></span>
        <div id="livestream-header-right"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: flex; align-items: center;">
          <button id="livestream-settings-btn" class="header-button">设置</button>
        </div>
      </div>

      <div id="livestream-main-view"
        style="flex-grow: 1; display: flex; flex-direction: column; background: #111; overflow: hidden; position: relative;">
        <div id="livestream-feed-container" style="flex-grow: 1; position: relative; overflow: hidden;">
          <div id="livestream-top-toolbar">
            <button id="livestream-sprite-adjust-btn" class="toolbar-button" title="调整立绘"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 7h-9" />
                <path d="M14 17H5" />
                <circle cx="17" cy="17" r="3" />
                <circle cx="8" cy="7" r="3" />
              </svg></button>
            <button id="livestream-replays-btn" class="toolbar-button" title="查看回放"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4" />
                <path d="M16 21h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-4" />
                <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />
              </svg></button>
            <button id="livestream-reroll-btn" class="toolbar-button" title="重新生成回应"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10" />
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
              </svg></button>
          </div>
          <div id="livestream-background"
            style="position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 1;">
          </div>
          <div id="livestream-sprite-container"
            style="position: absolute; bottom: 0; left: 0; right: 0; height: 85%; z-index: 2;">
            <img id="livestream-sprite"
              style="max-height: 100%; max-width: 100%; object-fit: contain; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">
          </div>
          <div id="livestream-textbox-container" style="z-index: 3; cursor: pointer;">
            <div id="livestream-text">...</div>
          </div>
        </div>
        <div id="livestream-danmaku-overlay"></div>
      </div>

      <div id="livestream-input-area" class="chat-input-area"
        style="background: var(--surface-bg); border-top: 1px solid var(--border-color); flex-shrink: 0;">
        <div id="start-livestream-btn-container" style="text-align: center;">
          <button id="start-livestream-btn" class="form-button primary"
            style="width: auto; padding: 12px 24px; border-radius: 24px; font-size: 1.2rem;">🎙️ 开始直播</button>
        </div>
        <div id="livestream-controls-container" style="display: none; align-items: center; gap: 8px;">
          <input type="text" id="danmaku-input" placeholder="发个弹幕...">
          <button id="livestream-dm-btn" class="toolbar-button" title="私信主播"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg></button>
          <button id="livestream-gift-btn" class="toolbar-button" title="送礼物"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 12v10H4V12" />
              <path d="M2 7h20v5H2z" />
              <path d="M12 22V7" />
              <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" />
              <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" />
            </svg></button>
          <button id="send-danmaku-btn" class="livestream-action-btn">发送</button>
          <button id="continue-livestream-btn" class="livestream-action-btn secondary">继续</button>
        </div>
      </div>



      <div id="livestream-sprite-controls"
        style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-x">左右位置</label>
          <input type="range" id="livestream-sprite-slider-x" min="0" max="100" value="50">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-y">上下位置</label>
          <input type="range" id="livestream-sprite-slider-y" min="0" max="130" value="100">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-scale">缩放大小</label>
          <input type="range" id="livestream-sprite-slider-scale" min="50" max="200" value="100">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
          <button id="livestream-sprite-confirm-button" class="form-button">确定</button>
          <button id="livestream-sprite-cancel-button" class="form-button secondary">取消</button>
          <button id="livestream-sprite-reset-button" class="form-button destructive"
            style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
        </div>
      </div>
    </div>

    <div id="livestream-replays-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-replays" class="header-button">返回</button>
        <span id="replays-char-name-header" class="header-title">的回放列表</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replays-container" class="content" style="padding: 15px;">
      </div>
    </div>

    <div id="livestream-replay-view-screen" class="screen">
      <div class="header">
        <button id="back-to-replays-list-from-view" class="header-button">返回</button>
        <span class="header-title">直播回放详情</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replay-view-container" class="content" style="padding: 20px; font-family: sans-serif;">
      </div>
    </div>

    <div id="start-livestream-modal" class="choice-modal">
      <div id="start-livestream-backdrop" class="choice-modal-backdrop"></div>
      <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
        <h3 style="margin-top: 0; text-align: center;">准备开播</h3>
        <div class="input-group">
          <label for="livestream-theme-input">直播主题</label>
          <input type="text" id="livestream-theme-input" placeholder="例如：聊聊最近看的电影">
        </div>
        <div class="input-group">
          <label for="audience-mood-input">观众氛围</label>
          <input type="text" id="audience-mood-input" placeholder="例如：期待、好奇、热闹">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button id="confirm-start-livestream-button" class="form-button primary">开始直播</button>
          <button id="cancel-start-livestream-button" class="form-button secondary">取消</button>
        </div>
      </div>
    </div>
    <div id="livestream-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-settings" class="header-button">返回</button>
        <span class="header-title">直播间设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>直播背景</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为这个角色的直播间设置专属背景图。</p>
          <div class="image-preview-slot" id="livestream-bg-preview"
            style="width: 150px; height: 266px; margin: 0 auto;">
          </div>
          <input type="file" id="livestream-bg-input" accept="image/*" style="display: none;">
        </div>

        <div class="settings-group">
          <h2>直播立绘 (多表情)</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传专属的直播立绘，AI会在直播时根据情绪自动切换。</p>
          <div
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 10px;">
            <div class="avatar-upload-group" style="align-items: center;">
              <label>平常</label>
              <div id="livestream-sprite-normal-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-normal-input" accept="image/*" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>喜</label>
              <div id="livestream-sprite-happy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-happy-input" accept="image/*" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>怒</label>
              <div id="livestream-sprite-angry-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-angry-input" accept="image/*" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>哀</label>
              <div id="livestream-sprite-sad-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-sad-input" accept="image/*" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>害羞</label>
              <div id="livestream-sprite-shy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-shy-input" accept="image/*" style="display: none;">
            </div>
          </div>
        </div>

        <button id="save-livestream-settings-button" class="form-button primary">保存设置</button>
      </div>
    </div>
  </div>
  </div>

  <div id="livestream-dm-panel" class="dm-panel" style="z-index: 100;">
    <div id="livestream-dm-backdrop" class="dm-backdrop"></div>
    <div class="dm-panel-content">
      <div class="dm-header"><span>与 主播 的私信</span><button id="dm-close-btn">&times;</button></div>
      <div id="livestream-dm-messages" class="dm-messages-container"></div>
      <div class="dm-input-area"><input type="text" id="livestream-dm-input" placeholder="悄悄话..."><button
          id="livestream-dm-send-btn">发送</button></div>
    </div>
  </div>


  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>



  <script>

    const _0x1ad1ef=_0x53d2;(function(_0xdf110e,_0x3b8447){const _0x4e6363=_0x53d2,_0x27632d=_0xdf110e();while(!![]){try{const _0x3a41e0=-parseInt(_0x4e6363(0x34f))/0x1+parseInt(_0x4e6363(0x720))/0x2*(parseInt(_0x4e6363(0x61c))/0x3)+parseInt(_0x4e6363(0x1b8))/0x4*(-parseInt(_0x4e6363(0x71b))/0x5)+-parseInt(_0x4e6363(0xbff))/0x6*(-parseInt(_0x4e6363(0x96d))/0x7)+parseInt(_0x4e6363(0xbd9))/0x8+-parseInt(_0x4e6363(0x5a3))/0x9+parseInt(_0x4e6363(0x700))/0xa;if(_0x3a41e0===_0x3b8447)break;else _0x27632d['push'](_0x27632d['shift']());}catch(_0x2edb72){_0x27632d['push'](_0x27632d['shift']());}}}(_0xf6e1,0x64aa2));function _0x47309e(_0x2de4f4=new Date()){const _0x1b8753=_0x53d2,_0x381535=_0x2de4f4[_0x1b8753(0x5f6)](),_0x2be455=String(_0x2de4f4[_0x1b8753(0xc3f)]()+0x1)['padStart'](0x2,'0'),_0x33e09f=String(_0x2de4f4[_0x1b8753(0x3d6)]())[_0x1b8753(0xa9f)](0x2,'0');return _0x381535+'-'+_0x2be455+'-'+_0x33e09f;}const _0x4d9cba=_0x1ad1ef(0x9d7),_0x462025='images',_0x4d2e4a='snoop_cache',_0x1925ce=document['createElement'](_0x1ad1ef(0x1e2));_0x1925ce['id']=_0x1ad1ef(0x871),document[_0x1ad1ef(0xa74)]['appendChild'](_0x1925ce);var _0x543bea,_0x545db0=null;let _0x376928=[],_0x1ebaa0=![],_0x22ff14=null,_0x58058b=!![],_0x3bf4ff=![],_0x5b9419={'x':0x0,'y':0x0};function _0x48d319(_0x36f0d7){const _0xdf1f99=_0x1ad1ef;return(_0x543bea?.[_0xdf1f99(0x24d)]||[])[_0xdf1f99(0xbe8)](_0x4c279e=>_0x4c279e['id']===_0x36f0d7);}const _0x21523=_0x1ad1ef(0x2fc),_0x234b40=_0x1ad1ef(0x1bb),_0x46536a=_0x1ad1ef(0x761),_0x184821=[{'name':_0x1ad1ef(0x47e),'url':_0x1ad1ef(0x91a)},{'name':'崩溃','url':_0x1ad1ef(0x31d)},{'name':'生病','url':'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg'},{'name':'工作','url':_0x1ad1ef(0x799)},{'name':_0x1ad1ef(0xce1),'url':_0x1ad1ef(0xa68)},{'name':'弱小委屈但凶恶','url':_0x1ad1ef(0x5ef)},{'name':_0x1ad1ef(0x3d8),'url':_0x1ad1ef(0xad1)},{'name':'期待','url':_0x1ad1ef(0xc37)},{'name':'喜欢','url':_0x1ad1ef(0x5e0)},{'name':_0x1ad1ef(0x140),'url':_0x1ad1ef(0xaca)},{'name':_0x1ad1ef(0xba2),'url':_0x1ad1ef(0x656)},{'name':'委屈','url':_0x1ad1ef(0x442)},{'name':'加油','url':_0x1ad1ef(0x180)},{'name':'对的','url':_0x1ad1ef(0x2ca)},{'name':'不满','url':_0x1ad1ef(0x492)},{'name':_0x1ad1ef(0x4fd),'url':_0x1ad1ef(0x9bb)},{'name':_0x1ad1ef(0x7c9),'url':'https://sharkpan.xyz/f/X7muW/lc8g9h.gif'},{'name':'委屈','url':_0x1ad1ef(0x57f)},{'name':'平静','url':'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg'},{'name':'咬你','url':_0x1ad1ef(0x6d1)},{'name':_0x1ad1ef(0x17b),'url':'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg'},{'name':'好困','url':_0x1ad1ef(0xc8c)},{'name':'摸鱼','url':_0x1ad1ef(0xa73)},{'name':_0x1ad1ef(0x2e2),'url':_0x1ad1ef(0xa4f)},{'name':_0x1ad1ef(0x1a1),'url':_0x1ad1ef(0x58e)},{'name':_0x1ad1ef(0x44c),'url':_0x1ad1ef(0x7db)},{'name':_0x1ad1ef(0xaed),'url':_0x1ad1ef(0x406)},{'name':_0x1ad1ef(0x1c5),'url':'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg'},{'name':'啥意思捏','url':_0x1ad1ef(0x962)},{'name':'好委屈但是不能哭','url':_0x1ad1ef(0xa97)},{'name':'事情好多','url':_0x1ad1ef(0x194)},{'name':_0x1ad1ef(0xc35),'url':_0x1ad1ef(0x694)},{'name':_0x1ad1ef(0x5ed),'url':_0x1ad1ef(0x99e)},{'name':'逗你开心','url':'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg'},{'name':_0x1ad1ef(0x9af),'url':_0x1ad1ef(0x6b8)},{'name':'干劲满满','url':'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg'},{'name':'对不起','url':'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg'},{'name':_0x1ad1ef(0x6f0),'url':'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg'},{'name':_0x1ad1ef(0xc0b),'url':_0x1ad1ef(0x986)},{'name':_0x1ad1ef(0xc44),'url':_0x1ad1ef(0x7ea)},{'name':_0x1ad1ef(0x18b),'url':'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg'},{'name':_0x1ad1ef(0xa31),'url':_0x1ad1ef(0x791)},{'name':_0x1ad1ef(0xd4e),'url':_0x1ad1ef(0xb67)},{'name':'绝对不想','url':_0x1ad1ef(0x975)},{'name':_0x1ad1ef(0xc2a),'url':'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg'},{'name':'很好哦','url':'https://sharkpan.xyz/f/YA7T1/th0l79.jpg'},{'name':_0x1ad1ef(0x7ef),'url':_0x1ad1ef(0xb6b)},{'name':_0x1ad1ef(0x531),'url':_0x1ad1ef(0x4b7)},{'name':'我是小丑呜呜','url':_0x1ad1ef(0x4aa)},{'name':_0x1ad1ef(0xb42),'url':_0x1ad1ef(0xba4)},{'name':_0x1ad1ef(0x2b9),'url':_0x1ad1ef(0x82d)},{'name':_0x1ad1ef(0x13e),'url':_0x1ad1ef(0xaae)},{'name':_0x1ad1ef(0x7c0),'url':_0x1ad1ef(0x603)},{'name':'等你','url':_0x1ad1ef(0x80d)},{'name':_0x1ad1ef(0x4b2),'url':'https://sharkpan.xyz/f/eOXIw/y29z21.jpg'},{'name':_0x1ad1ef(0x6b1),'url':_0x1ad1ef(0x714)},{'name':'喝酒','url':_0x1ad1ef(0x742)},{'name':_0x1ad1ef(0x622),'url':_0x1ad1ef(0x408)},{'name':'呜呜','url':_0x1ad1ef(0x521)},{'name':_0x1ad1ef(0x85b),'url':'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg'},{'name':_0x1ad1ef(0xb10),'url':_0x1ad1ef(0x795)},{'name':_0x1ad1ef(0x6dd),'url':_0x1ad1ef(0x2a3)},{'name':_0x1ad1ef(0xa7b),'url':_0x1ad1ef(0xc84)},{'name':_0x1ad1ef(0x61d),'url':_0x1ad1ef(0x8c8)}],_0x1588ba={'beige':{'name':'默认米白','h':0x23,'s':0x19,'l':0x50},'mizuiro':{'name':_0x1ad1ef(0xaa2),'h':0xc3,'s':0x19,'l':0x50},'sakura':{'name':_0x1ad1ef(0xb3e),'h':0x159,'s':0x19,'l':0x50},'noir':{'name':_0x1ad1ef(0x282),'h':0x104,'s':0xf,'l':0x1e}};function _0x53d2(_0x5271cb,_0x38bc52){const _0xf6e11d=_0xf6e1();return _0x53d2=function(_0x53d2c8,_0x53a607){_0x53d2c8=_0x53d2c8-0x116;let _0x13a0e1=_0xf6e11d[_0x53d2c8];return _0x13a0e1;},_0x53d2(_0x5271cb,_0x38bc52);}document['addEventListener']('DOMContentLoaded',()=>{const _0x3b741d=_0x1ad1ef,_0x4e2f05=document[_0x3b741d(0x51d)](_0x3b741d(0x822)),_0x29a097=document[_0x3b741d(0x51d)](_0x3b741d(0xc29)),_0x53f508=document['getElementById'](_0x3b741d(0x73c)),_0x8a4640=document[_0x3b741d(0x51d)](_0x3b741d(0xa66)),_0x440989=document['getElementById'](_0x3b741d(0x17a)),_0x1e4d45=document[_0x3b741d(0x51d)](_0x3b741d(0x5ac)),_0x1577c2=document[_0x3b741d(0x51d)](_0x3b741d(0x4e7)),_0x33ab7e=document['getElementById'](_0x3b741d(0x5fb)),_0x40953a=document[_0x3b741d(0x51d)](_0x3b741d(0x1b1)),_0x212627=document['getElementById'](_0x3b741d(0x75f)),_0x54d2ed=document['getElementById'](_0x3b741d(0x7d9)),_0xc9b4fc=document['getElementById']('summarize-modal'),_0x24c19d=document[_0x3b741d(0x51d)](_0x3b741d(0xd33)),_0x3bb4a5=document[_0x3b741d(0x51d)](_0x3b741d(0x279)),_0x543224=document[_0x3b741d(0x51d)](_0x3b741d(0x2b3)),_0x57b022=document[_0x3b741d(0x51d)](_0x3b741d(0xbf5)),_0x89bc79=document[_0x3b741d(0x51d)](_0x3b741d(0x3c6)),_0x889c55=document[_0x3b741d(0x51d)](_0x3b741d(0x8da)),_0x38f216=document[_0x3b741d(0x51d)](_0x3b741d(0x234)),_0x47cf12=document['getElementById'](_0x3b741d(0x5db)),_0xec9247=document[_0x3b741d(0x51d)](_0x3b741d(0x87b)),_0x20c60e=document['getElementById'](_0x3b741d(0x1dc)),_0x2fef8c=document[_0x3b741d(0x51d)](_0x3b741d(0x527)),_0xd34e1f=document[_0x3b741d(0x51d)](_0x3b741d(0xb4b)),_0x66315d=document[_0x3b741d(0x51d)](_0x3b741d(0x84c)),_0x39433c=document[_0x3b741d(0x51d)](_0x3b741d(0x752)),_0x147de9=document[_0x3b741d(0x51d)](_0x3b741d(0x27c));async function _0x19c470(_0x236673){const _0x37b33a=_0x3b741d;try{const _0x40113b=URL[_0x37b33a(0xcb2)](_0x236673),_0x49eb19=_0x37b33a(0x18f),_0x1665b3=_0x37b33a(0x651)+_0x49eb19+_0x37b33a(0x2ef)+_0x40113b+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x1925ce['innerHTML']=_0x1665b3,document[_0x37b33a(0x713)][_0x37b33a(0x1e2)][_0x37b33a(0xcac)](_0x37b33a(0x585),'\x27'+_0x49eb19+'\x27'),_0x147de9['textContent']='字体已应用！(Font\x20Applied!)';}catch(_0x400e69){console[_0x37b33a(0xb1e)](_0x37b33a(0xc99),_0x400e69),_0x48e450(_0x37b33a(0x12e));}}async function _0x10fa97(){const _0x1091c1=_0x3b741d;try{const _0x18c67d=await _0x54e221('custom_font_ttf');if(_0x18c67d){if(_0x1091c1(0x146)==='lxWoC')throw new _0x33869c(_0x1091c1(0xbb3));else console[_0x1091c1(0x68b)](_0x1091c1(0xa98)),await _0x19c470(_0x18c67d);}}catch(_0x502055){console[_0x1091c1(0xb1e)](_0x1091c1(0x619),_0x502055);}}async function _0x517d20(_0x5ed756){const _0x58a48c=_0x3b741d,_0x4bda3b=_0x5ed756[_0x58a48c(0x446)][_0x58a48c(0x730)][0x0];if(!_0x4bda3b||!_0x4bda3b['name'][_0x58a48c(0x196)]()[_0x58a48c(0x159)]('.ttf')){if(_0x58a48c(0x855)==='WNRQU'){_0x48e450(_0x58a48c(0x704));return;}else{const _0x1b4e1a=_0x2d2f5e[_0x58a48c(0x170)](_0x2e0260,_0x58a48c(0x366)),_0x2dd4e2=_0x1b4e1a[_0x58a48c(0x327)](_0x4fe483),_0x4bd1d1=_0x2dd4e2[_0x58a48c(0x1f8)](_0x395fbf);_0x4bd1d1[_0x58a48c(0x487)]=()=>_0x3c03ee(_0x4bd1d1[_0x58a48c(0x668)]?_0x4bd1d1[_0x58a48c(0x668)][_0x58a48c(0xade)]:null),_0x4bd1d1[_0x58a48c(0x122)]=()=>_0x225319(_0x4bd1d1[_0x58a48c(0xb1e)]);}}_0x2ee484(!![],_0x58a48c(0x301));try{_0x58a48c(0xa09)!=='eeoKL'?(await _0x567110('custom_font_ttf',_0x4bda3b),await _0x19c470(_0x4bda3b),_0x48e450(_0x58a48c(0x37c))):(_0x371303[_0x58a48c(0x4d5)]='',_0x20b0d7[_0x58a48c(0x1a2)][_0x58a48c(0xb36)](_0x1cb5a6=>{const _0x3c4e6f=_0x58a48c,_0x476805=_0xb43fcb[_0x3c4e6f(0x23f)](_0x3c4e6f(0xaee));_0x476805['className']=_0x3c4e6f(0x504)+_0x1cb5a6[_0x3c4e6f(0x433)],_0x476805['textContent']=_0x1cb5a6[_0x3c4e6f(0x297)],_0x4e2a14[_0x3c4e6f(0x83b)](_0x476805);}),_0x28fbf9[_0x58a48c(0xd3a)]=_0xa0d64c[_0x58a48c(0x983)]);}catch(_0x126a9e){_0x58a48c(0x6ea)==='NXqBn'?_0x48e450(_0x58a48c(0x3dd)+_0x126a9e[_0x58a48c(0x979)]):(_0x254ccb(_0x17a344['id']),_0x31cff1('群聊已解散。'),_0xdbc1b4(_0x58a48c(0x69f)),_0x1a0612(![]));}finally{_0x2ee484(![]),_0x39433c[_0x58a48c(0x90f)]='';}}async function _0x5f22d1(){const _0x2639a5=_0x3b741d;if(_0x2639a5(0x241)==='asANZ'){const _0xde76e2=_0x54ba18[_0x2639a5(0x51d)]('countdown-title'),_0x48494a=_0x8f5253[_0x2639a5(0x51d)](_0x2639a5(0x7d3)),_0x49f3b9=new _0x2b4371();_0x49f3b9[_0x2639a5(0x12f)](0x0,0x0,0x0,0x0);const _0x2ec052=_0x3ff00e[_0x2639a5(0x21c)]['filter'](_0x3ae5ad=>_0x3ae5ad[_0x2639a5(0x711)]===_0x2639a5(0xaa1)&&new _0x2f12a2(_0x3ae5ad[_0x2639a5(0x637)]+'T00:00:00')>=_0x49f3b9)[_0x2639a5(0xb3d)]((_0x34270e,_0x5afe85)=>new _0x59bab3(_0x34270e[_0x2639a5(0x637)])-new _0x33aa16(_0x5afe85[_0x2639a5(0x637)]));if(_0x2ec052['length']>0x0){const _0x58ce04=_0x2ec052[0x0],_0x3e48a4=new _0xdd308b(_0x58ce04[_0x2639a5(0x637)]+_0x2639a5(0x2cd)),_0x54ef3d=_0x3e48a4-_0x49f3b9,_0x337aca=_0x37bb5a['ceil'](_0x54ef3d/(0x3e8*0x3c*0x3c*0x18));_0xde76e2[_0x2639a5(0x32a)]=_0x2639a5(0x361)+_0x58ce04['content']+'」',_0x48494a[_0x2639a5(0x4d5)]='<span>'+_0x337aca+'</span><span\x20class=\x22unit\x22>天</span>';}else _0xde76e2[_0x2639a5(0x32a)]=_0x2639a5(0x556),_0x48494a[_0x2639a5(0x4d5)]=_0x2639a5(0x1f6);}else{const _0x2046a0=await _0x44efa2(_0x2639a5(0xa49));if(_0x2046a0)try{await _0x23455e(_0x2639a5(0xcb4)),_0x1925ce[_0x2639a5(0x4d5)]='',document['documentElement'][_0x2639a5(0x1e2)][_0x2639a5(0xb39)](_0x2639a5(0x585)),_0x147de9['textContent']=_0x2639a5(0x821),_0x48e450(_0x2639a5(0x978));}catch(_0x4c03c7){'ddqJR'!==_0x2639a5(0x856)?(_0x129a09['friendCircles']=_0x5d4443[_0x2639a5(0x882)][_0x2639a5(0x78c)](_0x598a62=>_0x598a62['id']!==_0x59512f),_0x340a7c[_0x2639a5(0x9d5)]===_0x44ba11&&(_0x2f26b9['activeFriendCircleId']=null),_0x3537b8(),_0xb6f04f('好友圈已删除。'),_0x162a00(),_0x4a4bf2('friendCircleList',_0x2639a5(0x981))):_0x48e450('恢复失败了:\x20'+_0x4c03c7[_0x2639a5(0x979)]);}}}function _0x990f61(){const _0x1489c8=_0x3b741d,_0x298b57=document['getElementById'](_0x1489c8(0x2c4));if(!_0x298b57)return;const _0x23262b=localStorage['getItem'](_0x1489c8(0xb7f))||'35';document[_0x1489c8(0x713)][_0x1489c8(0x1e2)][_0x1489c8(0xcac)]('--primary-hue',_0x23262b),_0x298b57['value']=_0x23262b,_0x298b57['addEventListener']('input',()=>{const _0x2c62e3=_0x1489c8,_0x1617a1=_0x298b57[_0x2c62e3(0x90f)];document[_0x2c62e3(0x713)][_0x2c62e3(0x1e2)][_0x2c62e3(0xcac)]('--primary-hue',_0x1617a1),localStorage[_0x2c62e3(0xa1c)](_0x2c62e3(0xb7f),_0x1617a1),_0x1aec3b();});}function _0x1d4668(){const _0x4a3ec2=_0x3b741d;if('QjSQC'!=='QjSQC')_0x47b1dd[_0x4a3ec2(0x1e2)][_0x4a3ec2(0x930)]='none',_0x11423d[_0x4a3ec2(0x1e2)]['display']=_0x4a3ec2(0x94a);else{const _0x37fa98=document['getElementById'](_0x4a3ec2(0x6d2));if(!_0x37fa98)return;const _0x5b2487=localStorage[_0x4a3ec2(0x760)](_0x4a3ec2(0xd2e))||'80';document[_0x4a3ec2(0x713)]['style'][_0x4a3ec2(0xcac)](_0x4a3ec2(0x4a3),_0x5b2487+'%'),_0x37fa98[_0x4a3ec2(0x90f)]=_0x5b2487,_0x37fa98[_0x4a3ec2(0xbc8)](_0x4a3ec2(0xa5e),()=>{const _0x5b17f1=_0x4a3ec2;if('ybAUQ'!==_0x5b17f1(0x46e)){const _0x1cc6dc=_0x37fa98['value'];document[_0x5b17f1(0x713)][_0x5b17f1(0x1e2)][_0x5b17f1(0xcac)](_0x5b17f1(0x4a3),_0x1cc6dc+'%'),localStorage[_0x5b17f1(0xa1c)](_0x5b17f1(0xd2e),_0x1cc6dc),_0x1aec3b();}else{_0x198eac[_0x5b17f1(0xb1e)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:',_0x4138a8['id']);return;}});}}function _0x1aec3b(){const _0x4fc14d=_0x3b741d,_0x312040=document[_0x4fc14d(0x51d)](_0x4fc14d(0x56b));if(!_0x312040)return;_0x543bea[_0x4fc14d(0xc9f)]['forceWhiteClock']?(_0x312040[_0x4fc14d(0x1e2)][_0x4fc14d(0x911)]=_0x4fc14d(0x92a),_0x312040[_0x4fc14d(0x1e2)][_0x4fc14d(0x49b)]=_0x4fc14d(0xbbb)):(_0x312040['style'][_0x4fc14d(0x911)]=_0x4fc14d(0x4e9),_0x312040['style'][_0x4fc14d(0x49b)]='none');}function _0x1d7fad(){const _0x235944=_0x3b741d;if(_0x235944(0x1fa)===_0x235944(0xbbe))_0x157400(_0x301645),_0x5bae61[_0x235944(0x2ec)]('canplaythrough',_0x120d20),_0x459814['removeEventListener'](_0x235944(0xb1e),_0x310726),_0x32c193['src']='',_0x38c7eb[_0x235944(0xab0)]();else{const _0x26ba73=document[_0x235944(0x51d)](_0x235944(0x9d2));if(!_0x26ba73)return;_0x26ba73[_0x235944(0xaf0)]=_0x543bea['preferences'][_0x235944(0x753)]||![],_0x26ba73['addEventListener']('change',()=>{const _0x4f5c04=_0x235944;_0x543bea[_0x4f5c04(0xc9f)][_0x4f5c04(0x753)]=_0x26ba73[_0x4f5c04(0xaf0)],_0x1a0f1f(),_0x1aec3b();});}}_0x2fef8c[_0x3b741d(0xbc8)]('click',_0x475e03),_0xec9247[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x38c81b=_0x3b741d;if('ieYiz'!==_0x38c81b(0x165))_0x486548(),_0x20c60e[_0x38c81b(0x779)]();else return _0x1d2eb5[_0x38c81b(0x68b)](_0x38c81b(0x341)),0x0;}),_0x20c60e[_0x3b741d(0xbc8)]('change',_0x17d41e);const _0x3d5cde={'home':document[_0x3b741d(0x51d)](_0x3b741d(0x588)),'chat':document['getElementById'](_0x3b741d(0x898)),'settings':document[_0x3b741d(0x51d)](_0x3b741d(0x42b)),'userProfile':document[_0x3b741d(0x51d)]('user-profile-screen'),'characterEdit':document[_0x3b741d(0x51d)](_0x3b741d(0x90e)),'groupChatCreate':document[_0x3b741d(0x51d)]('group-chat-create-screen'),'wallpaper':document[_0x3b741d(0x51d)](_0x3b741d(0xa3a)),'worldBook':document['getElementById'](_0x3b741d(0x836)),'worldBookEditor':document[_0x3b741d(0x51d)](_0x3b741d(0x133)),'groupSettings':document[_0x3b741d(0x51d)](_0x3b741d(0x2de)),'music':document[_0x3b741d(0x51d)]('music-screen'),'friendCircleList':document[_0x3b741d(0x51d)](_0x3b741d(0x5d8)),'friendCircleEdit':document['getElementById'](_0x3b741d(0x819)),'meetingList':document[_0x3b741d(0x51d)](_0x3b741d(0x802)),'meetingView':document['getElementById']('meeting-view-screen'),'userProfileList':document[_0x3b741d(0x51d)](_0x3b741d(0x4cc)),'diaryList':document[_0x3b741d(0x51d)]('diary-list-screen'),'diaryView':document[_0x3b741d(0x51d)]('diary-view-screen'),'musicLibrary':document[_0x3b741d(0x51d)](_0x3b741d(0x25b)),'musicUploadAltar':document[_0x3b741d(0x51d)](_0x3b741d(0x6c7)),'accounting':document[_0x3b741d(0x51d)](_0x3b741d(0xb48)),'snoopList':document[_0x3b741d(0x51d)](_0x3b741d(0x5dd)),'snoopPhone':document[_0x3b741d(0x51d)](_0x3b741d(0x3d1)),'calendar':document[_0x3b741d(0x51d)]('calendar-screen'),'livestreamList':document[_0x3b741d(0x51d)](_0x3b741d(0x22a)),'livestreamRoom':document['getElementById'](_0x3b741d(0x8dc)),'livestreamReplays':document['getElementById'](_0x3b741d(0x91d)),'livestreamReplayView':document[_0x3b741d(0x51d)](_0x3b741d(0x73b)),'livestreamSettings':document[_0x3b741d(0x51d)]('livestream-settings-screen')},_0x314fbe=document[_0x3b741d(0x51d)](_0x3b741d(0x571)),_0x1e0369=document[_0x3b741d(0x51d)](_0x3b741d(0x644)),_0x73416b=document['getElementById'](_0x3b741d(0x608)),_0x191d8b=document['getElementById']('app-wallpaper'),_0x2baf29=document['getElementById'](_0x3b741d(0x7a1)),_0x3b183d=document[_0x3b741d(0x51d)](_0x3b741d(0x8ac)),_0x500688=document['getElementById'](_0x3b741d(0x3fd)),_0x40fe86=document[_0x3b741d(0x51d)](_0x3b741d(0x67d));document['getElementById'](_0x3b741d(0x6b0))[_0x3b741d(0xbc8)](_0x3b741d(0x779),async()=>{const _0x6fa97c=_0x3b741d;if('afGyT'==='afGyT'){const _0x27afce=await _0x44efa2('确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。');if(_0x27afce){localStorage[_0x6fa97c(0x584)](_0x6fa97c(0x932)),localStorage[_0x6fa97c(0x584)](_0x6fa97c(0x77a)),localStorage['removeItem']('clockPosition'),localStorage['removeItem']('musicWidgetPosition');const _0x297f87=[];for(let _0x1895a9=0x0;_0x1895a9<localStorage[_0x6fa97c(0xc1f)];_0x1895a9++){const _0x153074=localStorage[_0x6fa97c(0xc7f)](_0x1895a9);_0x153074&&_0x153074[_0x6fa97c(0xca0)](_0x6fa97c(0x9f6))&&_0x297f87['push'](_0x153074);}_0x297f87[_0x6fa97c(0xb36)](_0x3ed5f6=>localStorage[_0x6fa97c(0x584)](_0x3ed5f6)),await _0x567110(_0x6fa97c(0x3db),await _0xe092cf('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==')),_0x48e450('桌面已重置，即将刷新...'),setTimeout(()=>location[_0x6fa97c(0x5f2)](),0x5dc);}}else _0x3211de['error']('生成直播总结失败:',_0x47d6b5),_0x1091a2(_0x6fa97c(0x846)+_0x407232[_0x6fa97c(0x979)]);});const _0x5ab421=document['getElementById']('add-choice-modal'),_0x227b50=document[_0x3b741d(0x51d)](_0x3b741d(0x21e)),_0x22508a=document[_0x3b741d(0x51d)]('choice-create-character'),_0x4ca04f=document['getElementById']('choice-create-group'),_0x284671=document[_0x3b741d(0x51d)](_0x3b741d(0x5e3)),_0x27d16f=document['getElementById'](_0x3b741d(0xcf2)),_0x8cbc09=document['getElementById']('create-group-chat-button'),_0x4b5e81=document[_0x3b741d(0x51d)]('group-chat-name'),_0x5d2965=document['getElementById'](_0x3b741d(0xa33)),_0x551322=document[_0x3b741d(0x51d)](_0x3b741d(0x410)),_0x5aa1c4=document[_0x3b741d(0x51d)](_0x3b741d(0x6d0)),_0x143d18=document[_0x3b741d(0x51d)](_0x3b741d(0x8dd)),_0x1b193f=document[_0x3b741d(0x51d)]('back-to-home-from-chat'),_0x1446f2=document[_0x3b741d(0x51d)](_0x3b741d(0x4c7)),_0x582e6a=document[_0x3b741d(0x51d)]('back-to-settings-from-user-profile'),_0x1e8089=document[_0x3b741d(0x51d)]('back-to-char-select-from-edit'),_0x40fa13=document[_0x3b741d(0x51d)](_0x3b741d(0x968)),_0x4ffafd=document[_0x3b741d(0x51d)](_0x3b741d(0x3c3)),_0x51b8d6=document['getElementById'](_0x3b741d(0x898)),_0x2ee974=document[_0x3b741d(0x51d)](_0x3b741d(0x8f0)),_0x376e7e=document[_0x3b741d(0x51d)]('chat-message-input'),_0xd3db11=document['getElementById'](_0x3b741d(0x4b0)),_0x118cea=document[_0x3b741d(0x51d)]('chat-get-reply-button'),_0x1b45cc=document[_0x3b741d(0x51d)](_0x3b741d(0x1de)),_0x50d0b9=document[_0x3b741d(0x51d)](_0x3b741d(0x732)),_0x250bf3=document[_0x3b741d(0x51d)](_0x3b741d(0x161)),_0x129f55=document[_0x3b741d(0x51d)](_0x3b741d(0x831)),_0x454e7f=document['getElementById'](_0x3b741d(0x56d)),_0x36c198=document['getElementById'](_0x3b741d(0xab7)),_0x1e05aa=document[_0x3b741d(0x51d)](_0x3b741d(0x645)),_0x562d2a=document['getElementById'](_0x3b741d(0xc31)),_0x5eee11=document['getElementById'](_0x3b741d(0x74c)),_0x4e7273=document['getElementById']('character-settings-button'),_0x3c049c=document[_0x3b741d(0x51d)]('offline-scene-view'),_0x4b026a=document[_0x3b741d(0x51d)](_0x3b741d(0xcf3)),_0x3e710d=document['getElementById'](_0x3b741d(0xbef)),_0x560116=document[_0x3b741d(0x51d)](_0x3b741d(0x35c)),_0x9d4beb=document[_0x3b741d(0x51d)]('save-api-settings-button'),_0x26c49f=document[_0x3b741d(0x51d)](_0x3b741d(0x957)),_0x391488=document[_0x3b741d(0x51d)](_0x3b741d(0xb61)),_0x49d97a=document[_0x3b741d(0x51d)](_0x3b741d(0x647)),_0xbd6f83=document[_0x3b741d(0x51d)](_0x3b741d(0x8bc)),_0x40bce8=document[_0x3b741d(0x51d)](_0x3b741d(0xae9)),_0x1a2639=document[_0x3b741d(0x51d)](_0x3b741d(0x119)),_0xe52977=document[_0x3b741d(0x51d)](_0x3b741d(0x11b)),_0x5d840e=document[_0x3b741d(0x51d)](_0x3b741d(0x9d0)),_0x432acb=document[_0x3b741d(0x51d)](_0x3b741d(0x2ed)),_0x43906b=document[_0x3b741d(0x51d)](_0x3b741d(0x77e)),_0xa5295e=document['getElementById'](_0x3b741d(0x879)),_0x69cecd=document[_0x3b741d(0x51d)]('char-edit-remark'),_0x52b51c=document[_0x3b741d(0x51d)](_0x3b741d(0x16b)),_0x778b31=document[_0x3b741d(0x51d)](_0x3b741d(0x85d)),_0x31b822=document[_0x3b741d(0x51d)](_0x3b741d(0x7f7)),_0x3bc74a=document[_0x3b741d(0x51d)](_0x3b741d(0xbdd)),_0x5bfcdd=document[_0x3b741d(0x51d)]('edit-clear-history-button'),_0x5e7634=document[_0x3b741d(0x51d)](_0x3b741d(0xa9a));let _0x256cdf=null;const _0x137e00=_0x3b741d(0x657),_0x251dfe=_0x3b741d(0x6f3);_0x543bea={'characters':[],'worldBooks':[],'worldBookCategories':[],'activeWorldBookCategoryId':_0x3b741d(0x65a),'chats':[],'userProfiles':[],'activeUserProfileId':null,'apiSettings':{'endpoint':'','key':'','model':''},'preferences':{'widgetBgImage':null,'perChatContextLines':0x64,'forceWhiteClock':![]},'activeChatId':null,'activeMeetingCharId':null,'isGenerating':![],'currentAbortController':null,'pendingMessageTimers':[],'conversationHistory':[],'displayedMessageCount':0x64,'activeQuote':null,'friendCircles':[],'activeFriendCircleId':null,'calendarEvents':[],'accountingData':[],'accountingLedger':{},'diaries':[],'activeDiaryCharacterId':null,'diaries':[],'activeDiaryCharacterId':null,'meetingViewMode':_0x3b741d(0x7da),'activeMeetingScriptQueue':[],'characterLastScripts':{},'musicPlaylist':[],'currentlyPlayingIndex':-0x1,'isPlaying':![],'pendingPostAttachments':{'image':null,'music':null},'livestreamSessions':{},'activeLivestreamCharId':null,'currentLivestreamLog':[],'currentLivestreamUserActions':[],'currentLivestreamDMs':[],'isDMPanelVisible':![],'hasNewDMReply':![],'livestreamReplays':{}};function _0x1a0f1f(){const _0x326c88=_0x3b741d;try{const _0x424971=_0x543bea[_0x326c88(0x24d)]['map'](_0x4f3a2d=>{const _0x437c23=_0x326c88;if(_0x437c23(0x94c)===_0x437c23(0x192)){const _0xdf1dc3=_0x3005ba['querySelector'](_0x437c23(0xbcf));_0xdf1dc3?_0xdf1dc3[_0x437c23(0x1a0)]({'behavior':_0x437c23(0x3ee),'block':_0x437c23(0xa18)}):_0x161282[_0x437c23(0xd3a)]=_0x210c5d[_0x437c23(0x983)];}else{const _0x56e640={..._0x4f3a2d};return _0x56e640[_0x437c23(0x5ec)]&&_0x56e640[_0x437c23(0x5ec)]['startsWith'](_0x437c23(0x8be))&&delete _0x56e640['avatar'],_0x56e640;}}),_0x3c0a90={'version':0x1,'characters':_0x424971,'worldBooks':_0x543bea[_0x326c88(0x41e)],'worldBookCategories':_0x543bea['worldBookCategories'],'activeWorldBookCategoryId':_0x543bea[_0x326c88(0x3b3)],'chats':_0x543bea[_0x326c88(0x94b)],'apiSettings':_0x543bea['apiSettings'],'preferences':_0x543bea['preferences'],'activeChatId':_0x543bea[_0x326c88(0x886)],'diaries':_0x543bea[_0x326c88(0x12b)],'friendCircles':_0x543bea[_0x326c88(0x882)],'activeFriendCircleId':_0x543bea[_0x326c88(0x9d5)],'userProfiles':_0x543bea[_0x326c88(0x7e7)],'activeUserProfileId':_0x543bea[_0x326c88(0x3fc)],'accountingData':_0x543bea[_0x326c88(0x1d2)],'accountingLedger':_0x543bea[_0x326c88(0x43a)],'calendarEvents':_0x543bea[_0x326c88(0x21c)],'livestreamReplays':_0x543bea[_0x326c88(0x226)]};localStorage[_0x326c88(0xa1c)](_0x326c88(0x59f),JSON[_0x326c88(0x427)](_0x3c0a90));}catch(_0x80bd6){console['error'](_0x326c88(0x745),_0x80bd6),_0x48e450('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。');}}async function _0x48c3d1(){const _0x4dc3ac=_0x3b741d;if(!_0x543bea[_0x4dc3ac(0x24d)]||_0x543bea[_0x4dc3ac(0x24d)]['length']===0x0){console[_0x4dc3ac(0x68b)](_0x4dc3ac(0x5aa));return;}console[_0x4dc3ac(0x68b)](_0x4dc3ac(0x2d6));for(const _0x1eec51 of _0x543bea[_0x4dc3ac(0x24d)]){if(!_0x1eec51[_0x4dc3ac(0x5ec)])try{if(_0x4dc3ac(0xcd3)===_0x4dc3ac(0x8a4))_0x470c32(_0x450df0),_0x10ea22[_0x4dc3ac(0x2ec)](_0x4dc3ac(0xb0e),_0x12993f),_0x500f03[_0x4dc3ac(0x2ec)](_0x4dc3ac(0xbc7),_0x3d432d),_0x3ec04e['removeEventListener'](_0x4dc3ac(0x6bb),_0x3680a7),_0x35dba9[_0x4dc3ac(0x2ec)](_0x4dc3ac(0x5ad),_0x534c4c);else{const _0x5a9e67=await _0x54e221(_0x4dc3ac(0x395)+_0x1eec51['id']);_0x5a9e67&&(_0x1eec51[_0x4dc3ac(0x5ec)]=await _0xa161cf(_0x5a9e67));}}catch(_0x1df124){console[_0x4dc3ac(0xb1e)](_0x4dc3ac(0x8b2)+_0x1eec51['name']+'\x20('+_0x1eec51['id']+_0x4dc3ac(0x4ee),_0x1df124);}}console['log']('所有头像已恢复到运行时状态。');}function _0x5ce83a(){const _0x256b77=_0x3b741d;let _0x3e8ceb=null;try{if(_0x256b77(0x46a)!==_0x256b77(0xb59))_0x3e8ceb=localStorage[_0x256b77(0x760)](_0x256b77(0x59f));else{const _0x1558a7=_0xcc9ea0[_0x256b77(0x23f)](_0x256b77(0xaee));_0x1558a7[_0x256b77(0xa9d)]=_0x256b77(0x6e3),_0x1558a7[_0x256b77(0xa24)]['id']=_0x47d242['id'],_0x1558a7[_0x256b77(0x4d5)]=_0x256b77(0x369)+_0x3a4950[_0x256b77(0x41a)]+_0x256b77(0x246)+_0x571e27['content'][_0x256b77(0xc97)](0x0,0x64)+_0x256b77(0x8a5),_0x1558a7[_0x256b77(0xbc8)](_0x256b77(0x779),()=>_0x491557(_0x2ccf71['id'])),_0x18d5d0[_0x256b77(0x83b)](_0x1558a7);}}catch(_0xd90b07){_0x256b77(0x653)!==_0x256b77(0xd43)?console[_0x256b77(0xb1e)](_0x256b77(0x500),_0xd90b07):_0x11ffb4();}if(_0x3e8ceb){if(_0x256b77(0x3da)!=='kPfhv')_0x4233d4['src']&&_0x22ad14['style'][_0x256b77(0x48e)]!=='0'?(_0xbd9a90[_0x256b77(0x1e2)][_0x256b77(0x48e)]=0x0,_0x433508(()=>{const _0x1446e2=_0x256b77;_0x1d99d3[_0x1446e2(0x2d9)]=_0x1f88ba[_0x1446e2(0xcb2)](_0x562565),_0x4cde41['style'][_0x1446e2(0x48e)]=0x1;},0x96)):(_0x556a44[_0x256b77(0x2d9)]=_0x27f6d4[_0x256b77(0xcb2)](_0x2d9ef4),_0x115eb0[_0x256b77(0x1e2)][_0x256b77(0x48e)]=0x1);else try{const _0xc7a027=JSON['parse'](_0x3e8ceb),_0x27110e={..._0x543bea},_0x3b0b12={..._0x27110e,..._0xc7a027};_0x3b0b12[_0x256b77(0xc9f)]={..._0x27110e['preferences'],..._0xc7a027['preferences']||{}},_0x3b0b12[_0x256b77(0xaff)]={..._0x27110e[_0x256b77(0xaff)],..._0xc7a027[_0x256b77(0xaff)]||{}},Object[_0x256b77(0xa48)](_0x543bea,_0x3b0b12);}catch(_0x14af7e){console[_0x256b77(0xb1e)](_0x256b77(0xb52),_0x14af7e),localStorage[_0x256b77(0x584)]('appState');}}const _0x336e23=_0x543bea[_0x256b77(0x24d)]['length']===0x0;return!_0x543bea[_0x256b77(0x94b)][_0x256b77(0xbe8)](_0x80caf2=>_0x80caf2['id']===_0x543bea['activeChatId'])&&(_0x543bea[_0x256b77(0x886)]=_0x543bea[_0x256b77(0x94b)][0x0]?.['id']||null),_0x3e8ceb&&_0x1a0f1f(),_0x336e23;}function _0x348dc5(){const _0x11dec0=_0x3b741d;if(_0x11dec0(0xc91)===_0x11dec0(0xc40))_0x45010c[_0x11dec0(0xc6e)]?_0x1c9833[_0x11dec0(0x152)]():_0x421bd8[_0x11dec0(0x939)]();else{if(!_0x543bea[_0x11dec0(0x886)])return;try{localStorage[_0x11dec0(0xa1c)](_0x11dec0(0x74f)+_0x543bea[_0x11dec0(0x886)],JSON['stringify'](_0x543bea['conversationHistory']));}catch(_0x184c82){'YHBJX'===_0x11dec0(0x4e0)?_0x3c3188['preventDefault']():(console[_0x11dec0(0xb1e)](_0x11dec0(0x1b7),_0x184c82),_0x48e450('无法保存聊天记录。'));}}}function _0x26dafa(){const _0x3997c8=_0x3b741d;if(_0x3997c8(0x985)!==_0x3997c8(0x6f7)){if(!_0x543bea[_0x3997c8(0x886)]){_0x543bea[_0x3997c8(0xc54)]=[],_0x15b163();return;}let _0x5cf564=null;try{_0x5cf564=localStorage['getItem'](_0x3997c8(0x74f)+_0x543bea['activeChatId']);}catch(_0x5632df){console[_0x3997c8(0xb1e)](_0x3997c8(0x22b)+_0x543bea[_0x3997c8(0x886)],_0x5632df);}let _0x22dc44=[];if(_0x5cf564)try{const _0x3e6f40=JSON[_0x3997c8(0x576)](_0x5cf564);Array['isArray'](_0x3e6f40)&&('cXXsP'!==_0x3997c8(0xcc9)?_0x22dc44=_0x3e6f40[_0x3997c8(0x78c)](_0x24bcc9=>_0x24bcc9&&typeof _0x24bcc9===_0x3997c8(0x60b)&&typeof _0x24bcc9[_0x3997c8(0xcd4)]===_0x3997c8(0x2b1)&&typeof _0x24bcc9[_0x3997c8(0x297)]!==_0x3997c8(0x18e)):_0x5084c9(_0x323a92['coverId'])[_0x3997c8(0x842)](_0x4be3a6=>{const _0xe89790=_0x3997c8,_0x3ad426=_0x4424ef[_0xe89790(0x51d)](_0xb82a08);if(_0x3ad426&&_0x4be3a6)_0x3ad426[_0xe89790(0x2d9)]=_0x3a14ee[_0xe89790(0xcb2)](_0x4be3a6);}));}catch(_0x3c07f9){console[_0x3997c8(0xb1e)](_0x3997c8(0x630)+_0x543bea[_0x3997c8(0x886)]+_0x3997c8(0x654),_0x3c07f9);try{_0x3997c8(0x8c3)!==_0x3997c8(0x8c3)?_0x53f5d2(_0x4e79fb,_0x5c2277[_0x3997c8(0x6c0)]):localStorage['removeItem'](_0x3997c8(0x74f)+_0x543bea[_0x3997c8(0x886)]);}catch(_0x422a90){_0x3997c8(0x566)===_0x3997c8(0xbcd)?(_0x5ccf90[_0x3997c8(0x7e7)]=_0x1ef9ee[_0x3997c8(0x7e7)][_0x3997c8(0x78c)](_0x16f912=>_0x16f912['id']!==_0x53b79e),_0x5512d2[_0x3997c8(0x3fc)]===_0x1d1490&&(_0x5437c2['activeUserProfileId']=_0x425762[_0x3997c8(0x7e7)][0x0]['id']),_0xabffb4['chats'][_0x3997c8(0xb36)](_0x2aa493=>{const _0x2166ba=_0x3997c8;_0x2aa493['boundUserProfileId']===_0x13c5a0&&(_0x2aa493[_0x2166ba(0x16c)]=_0x18545b[_0x2166ba(0x3fc)]);}),_0x4ae765(),_0x14fce7(_0x3997c8(0x6f8)),_0xb4144d(),_0x519ce1('userProfileList',_0x3997c8(0x4b9))):console['error'](_0x3997c8(0x1c6),_0x422a90);}}_0x543bea[_0x3997c8(0xc54)]=_0x22dc44,_0x2ee974[_0x3997c8(0x4d5)]='',_0x543bea[_0x3997c8(0xc54)]&&_0x543bea[_0x3997c8(0xc54)][_0x3997c8(0xb36)]((_0x53e76e,_0x3dc5a8)=>_0x446b98(_0x53e76e,_0x3dc5a8)),setTimeout(()=>{const _0x5ff320=_0x3997c8;_0x2ee974[_0x5ff320(0xd3a)]=_0x2ee974[_0x5ff320(0x983)];},0x0);}else{if(_0x1bff17)_0x4f7ef9[_0x3997c8(0x1e2)]['backgroundImage']=_0x3997c8(0x744)+_0x5c9892['createObjectURL'](_0x2a8088)+'\x27)';}}async function _0xab982b(){const _0x4aa001=_0x3b741d;if('GkPxX'!=='COKjS'){const _0x35f887=document[_0x4aa001(0x51d)]('home-screen');if(!_0x35f887){console['error'](_0x4aa001(0x36b));return;}try{let _0x2270c4=await _0x54e221(_0x4aa001(0x3db));if(!_0x2270c4){const _0x73db7e=localStorage['getItem'](_0x4aa001(0x7a9));if(_0x73db7e){if('cuDTK'!==_0x4aa001(0xd2b))console['log'](_0x4aa001(0xc14)),_0x2270c4=await _0xe092cf(_0x73db7e),await _0x567110(_0x4aa001(0x3db),_0x2270c4),localStorage[_0x4aa001(0x584)]('customWallpaper');else return _0x408fac;}}_0x2270c4?_0x4aa001(0xaf7)!=='xYdRN'?(_0x35f887[_0x4aa001(0x1e2)]['backgroundImage']=_0x4aa001(0x535)+URL[_0x4aa001(0xcb2)](_0x2270c4)+')',_0x35f887['style']['backgroundSize']=_0x4aa001(0x73d),_0x35f887[_0x4aa001(0x1e2)][_0x4aa001(0x1c0)]=_0x4aa001(0xcc6)):(_0x1e5792[_0x4aa001(0x1e2)][_0x4aa001(0xbd8)]=_0x4aa001(0x744)+_0x3812c5[_0x4aa001(0xcb2)](_0x136c59)+'\x27)',_0x272ec9['style'][_0x4aa001(0xa4e)]=_0x4aa001(0x73d),_0x1c7fb7[_0x4aa001(0x1e2)][_0x4aa001(0x1c0)]=_0x4aa001(0xcc6)):_0x35f887['style']['backgroundImage']='';}catch(_0x454cd0){console['error']('加载壁纸失败:',_0x454cd0),_0x35f887&&(_0x35f887[_0x4aa001(0x1e2)][_0x4aa001(0xbd8)]='');}}else _0x2d414a=_0x1db835[0x1][_0x4aa001(0xad4)]();}function _0x279505(){const _0x5b9c4f=_0x3b741d;if('IfItb'!==_0x5b9c4f(0x767)){const _0x4d9a58=localStorage[_0x5b9c4f(0x760)](_0x5b9c4f(0x3e3));if(_0x4d9a58)document['getElementById'](_0x5b9c4f(0xa0e))[_0x5b9c4f(0x1e2)][_0x5b9c4f(0xcac)]('--feed-bg-image',_0x5b9c4f(0x535)+_0x4d9a58+')');else{if(_0x5b9c4f(0x5d5)!==_0x5b9c4f(0x7bd))document[_0x5b9c4f(0x51d)](_0x5b9c4f(0xa0e))[_0x5b9c4f(0x1e2)]['setProperty'](_0x5b9c4f(0x7af),_0x5b9c4f(0x2f6));else{const _0xf8ee0=_0x379b6d[_0x5b9c4f(0xc49)][_0x5b9c4f(0x257)](_0x875d3d=>_0x21216a[_0x5b9c4f(0x41e)][_0x5b9c4f(0xbe8)](_0x582e39=>_0x582e39['id']===_0x875d3d))[_0x5b9c4f(0x78c)](_0xefb586)['map'](_0x120767=>_0x5b9c4f(0x31e)+_0x120767['name']+'\x0a'+_0x120767[_0x5b9c4f(0x297)])[_0x5b9c4f(0x4db)]('');_0xf8ee0&&(_0x45315b=_0x5b9c4f(0x9e4)+_0xf8ee0);}}}else _0x4a204e[_0x5b9c4f(0x41a)]!=='AbortError'&&(_0x1a6ae1[_0x5b9c4f(0xb1e)]('获取AI响应失败:',_0x4b1bd4),_0x225c66({'role':_0x5b9c4f(0xbb1),'content':'错误:\x20'+_0x11f16d['message']},_0x17eab2[_0x5b9c4f(0xc54)]['length']-0x1));}async function _0x1cbe3c(_0x5bd782){const _0x2022e3=_0x3b741d;if(_0x2022e3(0x9d4)===_0x2022e3(0x9d4))try{await _0x567110(_0x2022e3(0x3db),_0x5bd782),await _0xab982b(),_0x48e450('壁纸已更换！');}catch(_0x4fdb24){console['error'](_0x2022e3(0x31f),_0x4fdb24),_0x48e450(_0x2022e3(0x8f7)+_0x4fdb24[_0x2022e3(0x979)]);}else{if(_0xe77410[_0x2022e3(0x61b)][_0x2022e3(0xc1f)]===0x0)return;_0x2a3df0['currentlyPlayingIndex']=(_0x58c6cc['currentlyPlayingIndex']-0x1+_0x54f9b8['musicPlaylist']['length'])%_0x47493a[_0x2022e3(0x61b)]['length'];const _0x5c907f=_0x1550bb[_0x2022e3(0x61b)][_0x417e54[_0x2022e3(0x786)]]['id'];_0x160a55(_0x5c907f,_0x506ad3[_0x2022e3(0x61b)][_0x2022e3(0x257)](_0x2b1219=>_0x2b1219['id']));}}function _0x5bebc0(_0x18e366){const _0x35d26e=_0x3b741d,_0x319bca={'quotedMessage':null,'content':_0x18e366},_0x1160fe=_0x18e366[_0x35d26e(0x606)](/^\[引用\|(.*?)\|(.*?)\]\s*/);return _0x1160fe&&(_0x319bca[_0x35d26e(0x20f)]={'sender':_0x1160fe[0x1]['trim'](),'content':_0x1160fe[0x2][_0x35d26e(0xad4)]()},_0x319bca[_0x35d26e(0x297)]=_0x18e366['substring'](_0x1160fe[0x0]['length'])[_0x35d26e(0xad4)]()),_0x319bca;}const _0x218dbb=document[_0x3b741d(0x51d)](_0x3b741d(0x5fd)),_0x4d2577=document[_0x3b741d(0x51d)]('message-action-backdrop'),_0x4eb98c=document['getElementById']('edit-message-button'),_0x3e30ed=document['getElementById'](_0x3b741d(0xcb0)),_0xe02aa7=document['getElementById'](_0x3b741d(0xbdf)),_0x3b01f7=document[_0x3b741d(0x51d)]('quote-message-button'),_0x22c303=document[_0x3b741d(0x51d)]('edit-message-modal'),_0x5ab63e=document[_0x3b741d(0x51d)](_0x3b741d(0xbea)),_0x3a6950=document['getElementById'](_0x3b741d(0x5c0)),_0x4e567c=document[_0x3b741d(0x51d)](_0x3b741d(0x4f9)),_0xbda59=document[_0x3b741d(0x51d)](_0x3b741d(0x961));let _0x4a241b=null;function _0x130f27(_0x170284){const _0xe31723=_0x3b741d;'KKcSX'!==_0xe31723(0xb5d)?(_0x4a241b=_0x170284,_0x218dbb['classList']['add'](_0xe31723(0x6db))):(_0x43d0a0['classList'][_0xe31723(0xab0)](_0xe31723(0x167),'is-exiting-left'),_0x2da45f[_0xe31723(0xa19)][_0xe31723(0xab0)](_0xe31723(0x715)),_0x46e9ad[_0xe31723(0x70f)]=_0x3a45e5,_0x32e0e4(),_0x338e9e[_0xe31723(0x405)]=![]);}function _0x232b00(){const _0x506188=_0x3b741d;if(_0x506188(0x6fa)!==_0x506188(0x6fa)){_0x1e0206('需要至少2个角色才能创建群聊。');return;}else _0x218dbb['classList'][_0x506188(0xab0)](_0x506188(0x6db));}function _0x2b1a14(){_0x232b00(),_0x4a241b=null;}function _0x586588(){const _0x52f7c5=_0x3b741d;if(_0x4a241b===null)return;_0x543bea[_0x52f7c5(0xc54)][_0x52f7c5(0x278)](_0x4a241b,0x1),_0x348dc5(),_0xe2dd1b(),_0x2b1a14();}function _0x315427(){const _0x4f1744=_0x3b741d;if(_0x4f1744(0xafc)==='Ezwqw'){if(_0x4a241b===null)return;const _0x1d3964=_0x543bea[_0x4f1744(0xc54)][_0x4a241b];if(!_0x1d3964)return;_0x3a6950[_0x4f1744(0x90f)]=_0x1d3964['content'],_0x232b00(),_0x22c303[_0x4f1744(0xa19)][_0x4f1744(0x25d)](_0x4f1744(0x6db)),_0x3a6950['focus']();}else{const _0x5c9358=_0x48bbd1['isOffline']?_0xd42e4b(_0x51150b['content'])[_0x4f1744(0xad4)]()[_0x4f1744(0x6ac)](/\n+/g,'\x20'):_0x2031eb(_0x19f1f8[_0x4f1744(0x297)])[_0x4f1744(0xad4)]();if(_0x5c9358)_0x1379b1[_0x4f1744(0xb47)](_0x2dfd32+'\x20['+_0x10827e+_0x4f1744(0x98c)+_0x29e456(_0x492649)+']\x20'+_0x5c9358);}}function _0x45a8d9(){const _0x21ddd3=_0x3b741d;if(_0x4a241b===null)return;const _0x1196ac=_0x3a6950[_0x21ddd3(0x90f)]['trim']();if(_0x1196ac===''){if(_0x21ddd3(0x8ba)==='iFymz')_0x112d64[_0x21ddd3(0xb47)](_0x5d53c3[_0x21ddd3(0x4a1)]('blob')[_0x21ddd3(0x842)](_0x5bbe82=>_0x365220[_0x21ddd3(0xc80)]=new _0x1f7372([_0x5bbe82],_0x3e3934[_0x21ddd3(0x41a)])));else{_0x5c26c3();return;}}const _0x34936e=_0x543bea[_0x21ddd3(0xc54)][_0x4a241b];_0x34936e&&(_0x34936e['content']=_0x1196ac,_0x348dc5(),_0xe2dd1b()),_0x22c303[_0x21ddd3(0xa19)][_0x21ddd3(0xab0)](_0x21ddd3(0x6db)),_0x4a241b=null;}function _0x5c26c3(){const _0x56e721=_0x3b741d;_0x56e721(0x7c4)==='lDqeV'?(_0x22c303[_0x56e721(0xa19)][_0x56e721(0xab0)](_0x56e721(0x6db)),_0x4a241b=null):(_0x22b8ec[_0x56e721(0x68b)](_0x56e721(0x8e9)),_0x3a9592[_0x56e721(0xa1c)](_0x56e721(0x59f),_0x1ccf71[_0x56e721(0x427)](_0x593790)));}_0x4d2577['addEventListener']('click',_0x2b1a14),_0xe02aa7[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x2b1a14),_0x3e30ed[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x586588),_0x4eb98c['addEventListener'](_0x3b741d(0x779),_0x315427),_0x3b01f7[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x104673),_0x129f55['addEventListener']('click',_0x3e390b),_0x4e567c[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x45a8d9),_0xbda59[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x5c26c3),_0x5ab63e[_0x3b741d(0xbc8)]('click',_0x5c26c3);function _0x104673(){const _0x59f86b=_0x3b741d;if(_0x4a241b===null)return;const _0x95959f=_0x543bea[_0x59f86b(0xc54)][_0x4a241b];if(!_0x95959f)return;const _0x144d9d=_0x577515();let _0x5a770e='未知';if(_0x95959f[_0x59f86b(0xcd4)]==='user'){const _0x1239c7=_0x2f2ed1(_0x543bea[_0x59f86b(0x886)]);_0x5a770e=_0x1239c7[_0x59f86b(0x41a)]||'我';}else{if(_0x59f86b(0x574)!==_0x59f86b(0x362)){const _0x2072f4=_0x95959f[_0x59f86b(0x2fb)]||_0x144d9d?.['participantIds'][0x0],_0x202520=_0x509294(_0x2072f4);_0x5a770e=_0x202520?_0x202520[_0x59f86b(0x41a)]:'角色';}else{const _0xc10f85=_0x351190[_0x59f86b(0x5c4)]('p');_0xc10f85[_0x59f86b(0xb36)](_0x4e72ad=>_0x4e72ad[_0x59f86b(0xa19)][_0x59f86b(0xab0)](_0x59f86b(0x215)));const _0x895354=_0x16827a[_0x59f86b(0x51d)](_0x59f86b(0x2cf)+_0x5a4755);_0x895354&&(_0x895354[_0x59f86b(0xa19)][_0x59f86b(0x25d)](_0x59f86b(0x215)),_0x895354[_0x59f86b(0x1a0)]({'behavior':_0x59f86b(0x972),'block':'center'}));}}let _0x329676=_0x95959f['content']||'';if(_0x95959f[_0x59f86b(0x3b2)])_0x329676=_0x59f86b(0xce3);if(_0x95959f[_0x59f86b(0x55b)])_0x329676=_0x59f86b(0x99f);if(_0x329676[_0x59f86b(0xc1f)]>0x32)_0x329676=_0x329676['substring'](0x0,0x32)+_0x59f86b(0x262);_0x543bea[_0x59f86b(0xa6e)]={'sender':_0x5a770e,'content':_0x329676},_0x137a73(),_0x2b1a14(),_0x376e7e['focus']();}function _0x137a73(){const _0x3785ef=_0x3b741d;if('zrbSo'===_0x3785ef(0xab4)){let _0x768118=0x0,_0x5bc4a2=0x0,_0x18dfd9=0x0;if(_0x5a6a47[_0x3785ef(0xc1f)]==0x4)_0x768118='0x'+_0xc1e103[0x1]+_0xad593[0x1],_0x5bc4a2='0x'+_0x54c1c6[0x2]+_0x3b1aea[0x2],_0x18dfd9='0x'+_0x5626ea[0x3]+_0x32ea56[0x3];else _0x58f4bf[_0x3785ef(0xc1f)]==0x7&&(_0x768118='0x'+_0x8a97b5[0x1]+_0x28cf99[0x2],_0x5bc4a2='0x'+_0x54999b[0x3]+_0x4b0457[0x4],_0x18dfd9='0x'+_0x236738[0x5]+_0x8ed65a[0x6]);_0x768118/=0xff,_0x5bc4a2/=0xff,_0x18dfd9/=0xff;let _0xf97c61=_0x5d8aa0['min'](_0x768118,_0x5bc4a2,_0x18dfd9),_0x3e65cf=_0x3cd85b['max'](_0x768118,_0x5bc4a2,_0x18dfd9),_0x38c4ee=_0x3e65cf-_0xf97c61,_0x3e1c19=0x0,_0x40aac3=0x0,_0x1e538=0x0;if(_0x38c4ee==0x0)_0x3e1c19=0x0;else{if(_0x3e65cf==_0x768118)_0x3e1c19=(_0x5bc4a2-_0x18dfd9)/_0x38c4ee%0x6;else{if(_0x3e65cf==_0x5bc4a2)_0x3e1c19=(_0x18dfd9-_0x768118)/_0x38c4ee+0x2;else _0x3e1c19=(_0x768118-_0x5bc4a2)/_0x38c4ee+0x4;}}_0x3e1c19=_0x793e2a[_0x3785ef(0xcfd)](_0x3e1c19*0x3c);if(_0x3e1c19<0x0)_0x3e1c19+=0x168;return _0x1e538=(_0x3e65cf+_0xf97c61)/0x2,_0x40aac3=_0x38c4ee==0x0?0x0:_0x38c4ee/(0x1-_0x1b85cf[_0x3785ef(0x95c)](0x2*_0x1e538-0x1)),_0x40aac3=+(_0x40aac3*0x64)[_0x3785ef(0xb7b)](0x1),_0x1e538=+(_0x1e538*0x64)[_0x3785ef(0xb7b)](0x1),{'h':_0x3e1c19,'s':_0x40aac3,'l':_0x1e538};}else{if(!_0x543bea[_0x3785ef(0xa6e)])return;_0x50d0b9[_0x3785ef(0x32a)]=_0x3785ef(0x3d9)+_0x543bea['activeQuote']['sender'],_0x250bf3[_0x3785ef(0x32a)]=_0x543bea[_0x3785ef(0xa6e)][_0x3785ef(0x297)],_0x1b45cc['style'][_0x3785ef(0x930)]=_0x3785ef(0x94a);}}function _0x3e390b(){const _0x43962f=_0x3b741d;_0x543bea[_0x43962f(0xa6e)]=null,_0x1b45cc[_0x43962f(0x1e2)]['display']=_0x43962f(0x2f6);}function _0x53ffb2(_0x12b6a3,_0x55fb9b){const _0x351842=_0x3b741d;if(_0x351842(0x58d)!==_0x351842(0x9c8)){const _0x1f34b5=document[_0x351842(0x51d)](_0x351842(0x20b));_0x1f34b5&&(_0x12b6a3===_0x351842(0x3fb)?_0x1f34b5[_0x351842(0x1e2)][_0x351842(0x930)]=_0x351842(0xb87):'mEVYk'===_0x351842(0xb69)?_0x423910[_0x351842(0xc7f)]===_0x351842(0x778)&&(_0x3b714e[_0x351842(0x9cb)](),_0x48c551()):_0x1f34b5['style'][_0x351842(0x930)]=_0x351842(0x2f6)),_0x256cdf=_0x55fb9b||null,Object[_0x351842(0x5b0)](_0x3d5cde)[_0x351842(0xb36)](_0x330aa2=>_0x330aa2['classList'][_0x351842(0xab0)](_0x351842(0x215))),_0x3d5cde[_0x12b6a3]&&_0x3d5cde[_0x12b6a3][_0x351842(0xa19)][_0x351842(0x25d)]('active'),_0x12b6a3!=='chat'&&_0x51b8d6[_0x351842(0xa19)]['remove'](_0x351842(0x4ea));}else{if(_0x185813[_0x351842(0x446)][_0x351842(0xa19)]['contains'](_0x351842(0x47d))){const _0x5abe0a=_0x3c13ea[_0x351842(0x446)][_0x351842(0xa24)]['id'];_0x49ddfa(_0x351842(0x9d1))[_0x351842(0x842)](_0x58a6e5=>{_0x58a6e5&&_0x5c6df6(_0x5abe0a);});}}}function _0x517704(_0x5dc8aa){const _0x1b761=_0x3b741d;_0x5dc8aa?_0x51b8d6[_0x1b761(0xa19)][_0x1b761(0x25d)](_0x1b761(0x4ea)):_0x51b8d6['classList'][_0x1b761(0xab0)](_0x1b761(0x4ea));}async function _0x358a91(){const _0x527ccc=_0x3b741d;_0x40fa13[_0x527ccc(0x4d5)]='';const _0x45b1f8=_0x543bea[_0x527ccc(0x94b)]['map'](_0x586124=>{const _0x112b3b=_0x527ccc;if(_0x586124[_0x112b3b(0x711)]===_0x112b3b(0x5fc)){const _0x194598=_0x509294(_0x586124[_0x112b3b(0x184)][0x0]);return _0x194598?_0x54e221(_0x112b3b(0x395)+_0x194598['id']):Promise[_0x112b3b(0xd4a)](null);}else return _0x54e221(_0x112b3b(0x989)+_0x586124['id']);}),_0x30db36=await Promise[_0x527ccc(0x71a)](_0x45b1f8);_0x543bea[_0x527ccc(0x94b)]['forEach']((_0x5376f3,_0x2fb45e)=>{const _0x24e348=_0x527ccc,_0x724f1f=document[_0x24e348(0x23f)]('li');_0x724f1f[_0x24e348(0xa9d)]=_0x24e348(0x9eb),_0x724f1f['dataset']['id']=_0x5376f3['id'];let _0x3713c6=_0x46536a,_0x2e866d='群聊',_0x15dd11='';const _0x7c62e3=_0x30db36[_0x2fb45e];if(_0x7c62e3){if(_0x24e348(0xc2d)===_0x24e348(0xc2d))_0x3713c6=URL[_0x24e348(0xcb2)](_0x7c62e3);else{_0x258f37(_0x24e348(0x61f));return;}}if(_0x5376f3[_0x24e348(0x711)]==='private'){const _0x521d50=_0x509294(_0x5376f3['participantIds'][0x0]);if(_0x521d50){if(!_0x7c62e3){if('dLlQt'==='dLlQt')_0x3713c6=_0x521d50[_0x24e348(0x5ec)]||_0x46536a;else return _0x2cb6fc(new _0x5af25d(_0x24e348(0x486)));}_0x2e866d=_0x521d50[_0x24e348(0x41a)]||_0x24e348(0x967),_0x15dd11=_0x521d50[_0x24e348(0xabb)]||'私聊';}else{if(_0x24e348(0xb6e)!==_0x24e348(0x94d))_0x2e866d=_0x24e348(0x4c3),_0x15dd11=_0x24e348(0x55e);else{const _0x28f90a='chat_char_'+_0x479099[_0x24e348(0x63d)]();_0x3fc00d(_0x28f90a),_0x4459f9(!![]);}}}else _0x2e866d=_0x5376f3[_0x24e348(0x41a)]||_0x24e348(0x6be),_0x15dd11=_0x5376f3['participantIds']['length']+'\x20个成员';_0x724f1f['innerHTML']=_0x24e348(0x4e8)+_0x3713c6+_0x24e348(0x557)+_0x2e866d+_0x24e348(0xc55)+_0x15dd11+_0x24e348(0x517),_0x724f1f[_0x24e348(0x820)](_0x24e348(0x589))['addEventListener'](_0x24e348(0x779),()=>{const _0x5dbcdf=_0x24e348;_0x5dbcdf(0x681)!=='fMseZ'?(_0x5edf99(),_0x802974(!![])):(_0xead58c(_0x5376f3['id']),_0x517704(!![]));}),_0x40fa13[_0x24e348(0x83b)](_0x724f1f);});}function _0x8a067d(){const _0x9c0079=_0x3b741d,_0x3807dd=document[_0x9c0079(0x51d)](_0x9c0079(0x6de));_0x3807dd[_0x9c0079(0x4d5)]='';const _0x2ee4ec=_0x543bea[_0x9c0079(0x24d)][_0x9c0079(0x78c)](_0x1278cf=>_0x543bea[_0x9c0079(0x94b)]['some'](_0x222c9f=>_0x222c9f[_0x9c0079(0x711)]===_0x9c0079(0x5fc)&&_0x222c9f[_0x9c0079(0x184)]['includes'](_0x1278cf['id'])));if(_0x2ee4ec[_0x9c0079(0xc1f)]===0x0){if(_0x9c0079(0x810)!==_0x9c0079(0x810)){const {playlist:_0x14fe7a,currentIndex:_0x24ae0c}=_0x5d6f1c[_0x9c0079(0x576)](_0x435f0e);_0x2ec154[_0x9c0079(0x8e1)](_0x14fe7a)&&_0x14fe7a[_0x9c0079(0xc1f)]>0x0&&_0x24ae0c>-0x1&&(_0x55d363[_0x9c0079(0x61b)]=_0x14fe7a,_0x560205[_0x9c0079(0x786)]=_0x24ae0c,_0x3555dc[_0x9c0079(0x75b)]=![],_0x12a324());}else{_0x3807dd[_0x9c0079(0x4d5)]=_0x9c0079(0xa52);return;}}_0x2ee4ec[_0x9c0079(0xb36)](_0x297330=>{const _0x5ea8e3=_0x9c0079,_0x19e669=document['createElement']('li');_0x19e669[_0x5ea8e3(0xa9d)]='character-item',_0x19e669['dataset']['charId']=_0x297330['id'],_0x19e669['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x297330[_0x5ea8e3(0x5ec)]||_0x46536a)+_0x5ea8e3(0x557)+_0x297330['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>'+(_0x297330[_0x5ea8e3(0xabb)]||'私聊')+_0x5ea8e3(0x517),_0x19e669[_0x5ea8e3(0xbc8)]('click',()=>{_0x2268f8(_0x297330['id']);}),_0x3807dd[_0x5ea8e3(0x83b)](_0x19e669);});}async function _0x2268f8(_0x1c71f4){const _0x866688=_0x3b741d;if(_0x866688(0x1df)!==_0x866688(0x1df)){_0x5c67d1(_0x866688(0x704));return;}else{const _0x2bdaf3=_0x509294(_0x1c71f4);if(!_0x2bdaf3)return;_0x543bea[_0x866688(0x80c)]=_0x1c71f4,document[_0x866688(0x51d)](_0x866688(0x4ed))[_0x866688(0x32a)]=_0x2bdaf3[_0x866688(0x41a)];const _0xc568a4=document['getElementById']('meeting-main-content');_0xc568a4[_0x866688(0x1e2)][_0x866688(0xbd8)]=_0x866688(0x2f6),document[_0x866688(0x51d)](_0x866688(0xa23))[_0x866688(0x4d5)]='<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>',document[_0x866688(0x51d)](_0x866688(0x64f))[_0x866688(0x32a)]=_0x866688(0x814),document[_0x866688(0x51d)]('galgame-speaker')[_0x866688(0x32a)]='旁白',document['getElementById'](_0x866688(0x74e))[_0x866688(0x2d9)]='',_0x53ffb2('meetingView',_0x866688(0x958)),setTimeout(async()=>{const _0x689ac5=_0x866688;try{if(_0x689ac5(0x4be)!==_0x689ac5(0x201)){const _0x557263=await _0x54e221(_0x689ac5(0x352)+_0x1c71f4);_0x557263&&(_0x689ac5(0xad6)!==_0x689ac5(0xad6)?_0xf29055[_0x689ac5(0x2d9)]='':(_0xc568a4[_0x689ac5(0x1e2)][_0x689ac5(0xbd8)]=_0x689ac5(0x744)+URL[_0x689ac5(0xcb2)](_0x557263)+'\x27)',_0xc568a4[_0x689ac5(0x1e2)]['backgroundSize']='cover',_0xc568a4[_0x689ac5(0x1e2)]['backgroundPosition']='center'));const _0x1cb271=_0x543bea[_0x689ac5(0x94b)][_0x689ac5(0xbe8)](_0x5cb0e0=>_0x5cb0e0[_0x689ac5(0x711)]===_0x689ac5(0x5fc)&&_0x5cb0e0[_0x689ac5(0x184)]['includes'](_0x1c71f4));if(_0x1cb271)_0x543bea[_0x689ac5(0x886)]=_0x1cb271['id'],_0x1a0f1f(),_0x26dafa();else{if(_0x689ac5(0x9bf)===_0x689ac5(0x9bf))_0x543bea[_0x689ac5(0xc54)]=[];else{if(!_0x515258)return'';const _0x461edd=new _0x29026d(_0x5d093b),_0xe34a09=_0x725e53(_0x461edd[_0x689ac5(0x8bb)]())[_0x689ac5(0xa9f)](0x2,'0'),_0x3ccdb8=_0x5c5ee0(_0x461edd[_0x689ac5(0x5f9)]())[_0x689ac5(0xa9f)](0x2,'0');return _0xe34a09+':'+_0x3ccdb8;}}_0x5ef098(_0x1c71f4),_0x1093c7(),_0x2270eb();if(_0x22ff14)clearInterval(_0x22ff14);_0x50ced9(),_0x22ff14=setInterval(_0x50ced9,0x2710),document[_0x689ac5(0x51d)]('galgame-sprite-adjust-ui')[_0x689ac5(0x1e2)][_0x689ac5(0x930)]='block';}else{const _0x54fe5a=_0x21d0f5[_0x689ac5(0x7e7)][_0x689ac5(0xbe8)](_0x53820f=>_0x53820f['id']===_0x59a794[_0x689ac5(0x16c)])||{'name':'未知用户'},_0x1514b6=_0x4f3899['createElement'](_0x689ac5(0xaee));_0x1514b6[_0x689ac5(0xa9d)]=_0x689ac5(0x6e3),_0x1514b6['dataset']['id']=_0x3418d0['id'],_0x1514b6['innerHTML']=_0x689ac5(0xa8b)+_0x1f8f03[_0x689ac5(0x41a)]+_0x689ac5(0xd03)+_0x54fe5a['name']+_0x689ac5(0x5a1)+_0x5f49cc['memberCharacterIds'][_0x689ac5(0xc1f)]+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x1514b6[_0x689ac5(0xbc8)](_0x689ac5(0x779),()=>_0x47eec5(_0x999aa1['id'])),_0x23e743[_0x689ac5(0x83b)](_0x1514b6);}}catch(_0x34e230){_0x689ac5(0x46d)==='ZQdQs'?(console[_0x689ac5(0xb1e)](_0x689ac5(0x4af),_0x34e230),document['getElementById']('meeting-scene-view')['innerHTML']=_0x689ac5(0xc18)):(_0x23dc19(),_0x553a08(_0x689ac5(0x4e3),_0x689ac5(0x3fb)));}},0x32);}}function _0x2270eb(){const _0x3e5a6b=_0x3b741d;if(_0x3e5a6b(0x9b6)!=='sxEit'){const _0x55b966=document[_0x3e5a6b(0x51d)](_0x3e5a6b(0xa23));_0x55b966[_0x3e5a6b(0x4d5)]='';const _0x914f55=_0x55b966[_0x3e5a6b(0x820)](_0x3e5a6b(0xbcf));if(_0x914f55)_0x914f55[_0x3e5a6b(0xab0)]();_0x543bea[_0x3e5a6b(0xc54)]&&_0x543bea[_0x3e5a6b(0xc54)]['forEach']((_0x4579e2,_0x2a162c)=>{const _0x36bbb6=_0x3e5a6b;if(_0x36bbb6(0xcad)!==_0x36bbb6(0xa37)){if(!_0x4579e2[_0x36bbb6(0xbc1)]||_0x4579e2[_0x36bbb6(0xcd4)]===_0x36bbb6(0xacc))return;const _0x409acf=_0x4579e2[_0x36bbb6(0x297)][_0x36bbb6(0x6ac)](/\n/g,_0x36bbb6(0x71c)),_0x523abc=_0x2f2ed1(_0x543bea[_0x36bbb6(0x886)]);let _0x33b04c='',_0x5a34d3='',_0x30a899='';if(_0x4579e2[_0x36bbb6(0xcd4)]===_0x36bbb6(0x8ed))_0x36bbb6(0x872)===_0x36bbb6(0x872)?(_0x33b04c=_0x523abc[_0x36bbb6(0x41a)]||'我',_0x5a34d3=_0x36bbb6(0xbcb)):(_0x31e30f[_0x36bbb6(0xb1e)]('解析存档失败，正在重置:',_0x43cd44),_0x5d4ddf[_0x36bbb6(0x584)]('appState'));else{if(_0x4579e2['role']===_0x36bbb6(0xbb1)){const _0x26e60e=_0x509294(_0x4579e2[_0x36bbb6(0x2fb)]||_0x543bea[_0x36bbb6(0x80c)]);_0x33b04c=_0x26e60e?.[_0x36bbb6(0x41a)]||'角色',_0x5a34d3='speaker-ai';}}if(_0x33b04c)_0x36bbb6(0x42e)!==_0x36bbb6(0x42e)?_0x8f4158['error']('加载卡片图片失败',_0x1a2aa4):_0x30a899=_0x36bbb6(0x580)+_0x5a34d3+'\x22\x20data-history-index=\x22'+_0x2a162c+_0x36bbb6(0x1f3)+_0x33b04c+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-content\x22>'+_0x409acf+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';else{if(_0x36bbb6(0x6fc)!==_0x36bbb6(0x3a1))_0x30a899=_0x36bbb6(0x28d)+_0x2a162c+'\x22>'+_0x409acf+'</p>';else{const _0x1f2dc0=_0x166b44['getItem'](_0x36bbb6(0xc70));_0x1f2dc0&&(_0x38305e=_0x22686e[_0x36bbb6(0x576)](_0x1f2dc0));}}_0x55b966[_0x36bbb6(0x4d5)]+=_0x30a899;}else _0x5646a5[_0x36bbb6(0xb1e)](_0x36bbb6(0x210),_0x2674cf),_0x27a743&&(_0x527abc[_0x36bbb6(0x1e2)]['backgroundImage']='');});if(_0x543bea['isGenerating']){if(_0x3e5a6b(0x61e)===_0x3e5a6b(0x61e)){let _0x5a4e5f=_0x55b966['querySelector'](_0x3e5a6b(0x1e3));!_0x5a4e5f&&('bxmMN'===_0x3e5a6b(0xaaa)?(_0x1dc1f8[_0x3e5a6b(0x584)]('chatHistory_'+_0x45a8d1['id']),_0x3a2e3a(_0x3e5a6b(0x6a6)+_0x52ef85[_0x3e5a6b(0x41a)]+_0x3e5a6b(0x441))):(_0x5a4e5f=document['createElement']('p'),_0x5a4e5f[_0x3e5a6b(0xa9d)]=_0x3e5a6b(0x1d4),_0x5a4e5f[_0x3e5a6b(0x32a)]=_0x3e5a6b(0x431),_0x55b966[_0x3e5a6b(0x83b)](_0x5a4e5f)));}else _0x3be1aa[_0x3e5a6b(0x55b)]=_0xb1d5f7,_0x537acb=!![];}const _0x1e86a7=document[_0x3e5a6b(0x23f)](_0x3e5a6b(0xaee));_0x1e86a7['id']=_0x3e5a6b(0x891),_0x55b966[_0x3e5a6b(0x83b)](_0x1e86a7),setTimeout(()=>{const _0x295a01=_0x3e5a6b;_0x1e86a7[_0x295a01(0x1a0)]({'behavior':_0x295a01(0x3ee),'block':'end'});},0x32);}else{const _0x2f460f=[_0x3e5a6b(0x229),'星期一','星期二',_0x3e5a6b(0x182),'星期四',_0x3e5a6b(0xb19),'星期六'];return _0x2f460f[_0x402f33[_0x3e5a6b(0x848)]()]+'\x20'+_0x34b430;}}function _0xe2dd1b(){const _0x59d6aa=_0x3b741d,_0x3cce3c=document[_0x59d6aa(0x820)]('.screen.active');if(!_0x3cce3c)return;_0x3cce3c['id']===_0x59d6aa(0x6ad)?_0x59d6aa(0xb53)===_0x59d6aa(0xb53)?_0x2270eb():_0x44716b[_0x59d6aa(0xbc8)](_0x59d6aa(0x779),_0x1133b3=>{const _0x21d5a3=_0x59d6aa,_0x2f2aa3=_0x1133b3[_0x21d5a3(0x446)][_0x21d5a3(0xa24)]['categoryId'],_0x14b6b4=_0x1133b3[_0x21d5a3(0x446)]['checked'];_0xecbf5[_0x21d5a3(0x5c4)](_0x21d5a3(0x617)+_0x2f2aa3+'\x22]')['forEach'](_0x2e00f3=>{const _0xab4f54=_0x21d5a3;_0x2e00f3[_0xab4f54(0xaf0)]=_0x14b6b4;}),_0x54efb1();}):_0x15b163();}function _0x15b163(){const _0x31f293=_0x3b741d;if(_0x31f293(0x4de)==='WZzpm')try{const _0x1c4958={'type':'NoirAccountingData','version':0x1,'timestamp':_0x4883c9['now'](),'accountingData':_0x147cba[_0x31f293(0x1d2)],'accountingLedger':_0x5ad2db[_0x31f293(0x43a)]},_0x251ff2=new _0x5df12e([_0x2ed44f[_0x31f293(0x427)](_0x1c4958,null,0x2)],{'type':_0x31f293(0xcb5)}),_0x143e65=_0x30f6c5[_0x31f293(0xcb2)](_0x251ff2),_0x448842=_0x1b235e[_0x31f293(0x23f)]('a'),_0x21df80=new _0x3f3d4d(),_0x117533=_0x21df80[_0x31f293(0x5f6)]()+'-'+_0x432477(_0x21df80[_0x31f293(0xc3f)]()+0x1)[_0x31f293(0xa9f)](0x2,'0')+'-'+_0x536712(_0x21df80[_0x31f293(0x3d6)]())[_0x31f293(0xa9f)](0x2,'0');_0x448842['href']=_0x143e65,_0x448842[_0x31f293(0x183)]='Noir_Accounting_Backup_'+_0x117533+_0x31f293(0xa72),_0x410d4b['body'][_0x31f293(0x83b)](_0x448842),_0x448842[_0x31f293(0x779)](),_0xc125f8['body'][_0x31f293(0x526)](_0x448842),_0x43834b[_0x31f293(0x6eb)](_0x143e65),_0x240c91(_0x31f293(0x639));}catch(_0x51ee8f){_0x380694[_0x31f293(0xb1e)](_0x31f293(0x7e3),_0x51ee8f),_0x3018b3(_0x31f293(0x9bc)+_0x51ee8f['message']);}else{const _0x2450f0=_0x543bea[_0x31f293(0xc54)][_0x31f293(0x78c)](_0x35153f=>!_0x35153f['isOffline']&&_0x35153f[_0x31f293(0xcd4)]!==_0x31f293(0xacc));if(_0x2450f0[_0x31f293(0xc1f)]>_0x543bea[_0x31f293(0x178)]){if(_0x31f293(0xd16)===_0x31f293(0xd16)){let _0x10ff1f=_0x2ee974[_0x31f293(0x820)]('.load-more-btn');if(!_0x10ff1f){_0x10ff1f=document[_0x31f293(0x23f)](_0x31f293(0x436)),_0x10ff1f[_0x31f293(0x32a)]=_0x31f293(0x4df),_0x10ff1f[_0x31f293(0xa9d)]=_0x31f293(0xbf3),_0x10ff1f['style']['width']=_0x31f293(0x3ee),_0x10ff1f[_0x31f293(0x1e2)][_0x31f293(0xd0c)]=_0x31f293(0x14b),_0x10ff1f[_0x31f293(0x1e2)][_0x31f293(0x940)]='8px\x2016px',_0x10ff1f[_0x31f293(0x50e)]=()=>{const _0x3ad40a=_0x31f293,_0x47f6e7=_0x2ee974,_0x349822=_0x47f6e7['scrollHeight'],_0x431ddf=_0x47f6e7[_0x3ad40a(0xd3a)];_0x543bea[_0x3ad40a(0x178)]+=0x64,_0x15b163(),requestAnimationFrame(()=>{const _0x4a8841=_0x3ad40a;if(_0x4a8841(0x468)!==_0x4a8841(0x468))_0x55b85c(_0x4a8841(0x294));else{const _0x1e9eb3=_0x47f6e7[_0x4a8841(0x983)];_0x47f6e7[_0x4a8841(0xd3a)]=_0x431ddf+(_0x1e9eb3-_0x349822);}});};if(_0x2ee974[_0x31f293(0x8f9)])_0x2ee974[_0x31f293(0xc39)](_0x10ff1f,_0x2ee974[_0x31f293(0x8f9)]);else{if('MfneY'!==_0x31f293(0x44d))_0x2ee974['appendChild'](_0x10ff1f);else{const _0x502d97=_0x316e23['getElementById'](_0x19e2bb);if(!_0x502d97)return;if(_0x5e70fe['coverId'])_0x55a525(_0x497719[_0x31f293(0x28a)])['then'](_0x4ec286=>{const _0x17e75b=_0x31f293;if(_0x4ec286)_0x502d97[_0x17e75b(0x2d9)]=_0x3f8965[_0x17e75b(0xcb2)](_0x4ec286);});else _0x4136b9['coverUrl']&&(_0x502d97[_0x31f293(0x2d9)]=_0x31e352[_0x31f293(0x372)]);}}}}else _0x245cc1[_0x31f293(0xb1e)]('Failed\x20to\x20save\x20state\x20to\x20localStorage:',_0x1f3c4c),_0x13a993('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。');}else{const _0xbfd68=_0x2ee974[_0x31f293(0x820)](_0x31f293(0x3c5));if(_0xbfd68)_0xbfd68['remove']();}Array[_0x31f293(0x382)](_0x2ee974[_0x31f293(0x9c1)])[_0x31f293(0xb36)](_0xd831cd=>{const _0x827487=_0x31f293;if(_0x827487(0x602)===_0x827487(0x164)){_0x5e76bb('请输入有效的转账金额！');return;}else!_0xd831cd[_0x827487(0xa19)][_0x827487(0x9ff)](_0x827487(0x65d))&&_0xd831cd[_0x827487(0xab0)]();});const _0x720e89=_0x2450f0[_0x31f293(0xb41)](-_0x543bea[_0x31f293(0x178)]);_0x720e89[_0x31f293(0xb36)](_0x19d0b9=>{const _0x538c50=_0x31f293;if('YkxTz'!==_0x538c50(0x88d)){const _0x5f5726=_0x543bea[_0x538c50(0xc54)]['indexOf'](_0x19d0b9);_0x5f5726>-0x1&&('FONgp'===_0x538c50(0x419)?_0x446b98(_0x19d0b9,_0x5f5726):_0x646d4[_0x4be509]=_0x29b0f9[_0x538c50(0x576)](_0x23f32a));}else{const _0x4558cb=_0x1a882e[_0x538c50(0x983)];_0x155b28[_0x538c50(0xd3a)]=_0x70790f+(_0x4558cb-_0x1ab240);}});if(_0x543bea[_0x31f293(0xd1f)]){if(_0x31f293(0xaf6)!=='YMJyX'){const _0x47d515=_0x115d6d[_0x31f293(0x458)]===_0x3fede5(_0x2aac9c['activeChatId'])['id']?_0x2d579b(_0x498901['activeChatId']):_0x257224(_0x439b7f[_0x31f293(0x458)]);_0x48ac22[_0x31f293(0xa48)](_0x5a5906,{'type':_0x31f293(0x68e),'amount':_0x45ceee[_0x31f293(0x650)],'recipientId':_0x1c792a[_0x31f293(0x458)],'content':_0x31f293(0xc92)+(_0x47d515?.['name']||'未知')+_0x31f293(0x933)+_0x24bad8['amount']+']'});}else{let _0x57869b=document['querySelector'](_0x31f293(0x73e));if(!_0x57869b){if(_0x31f293(0x825)!==_0x31f293(0x825))_0x3f4dd1(![]);else{_0x57869b=document[_0x31f293(0x23f)](_0x31f293(0xaee)),_0x57869b[_0x31f293(0xa9d)]=_0x31f293(0x755);const _0x46edfb=_0x577515();if(_0x46edfb&&_0x46edfb[_0x31f293(0x711)]===_0x31f293(0x91b)){if(_0x31f293(0x2ba)!=='esfYU')_0x57869b['textContent']=_0x31f293(0x893);else{if(_0x4b1d73[_0x31f293(0xc1f)]===0x0)return;_0x45eb2b=(_0x50c112-0x1+_0x5ed17e[_0x31f293(0xc1f)])%_0x3ca67a[_0x31f293(0xc1f)],_0x27361d(_0x43c02a[_0x1c71d1],_0x4b7087);}}else _0x31f293(0xae4)!==_0x31f293(0xae4)?(_0x22e8ef(_0x1cfbc9,-0x1),_0x16d24b[_0x31f293(0xd3a)]=_0x16405c[_0x31f293(0x983)]):_0x57869b[_0x31f293(0x32a)]=_0x31f293(0x3dc);document[_0x31f293(0x51d)]('chat-view-pane')[_0x31f293(0x83b)](_0x57869b);}}}}_0x720e89[_0x31f293(0xc1f)]<=_0x543bea[_0x31f293(0x178)]&&(_0x31f293(0x4a9)!==_0x31f293(0x8f6)?setTimeout(()=>{const _0x329413=_0x31f293;_0x2ee974['scrollTop']=_0x2ee974[_0x329413(0x983)];},0x0):(delete _0x99e1c8[_0x31f293(0x969)],_0x3339f8(),_0x4719c4(_0xb857aa['id'],'normal'),_0x58aade(_0x31f293(0xb81)),_0x117860(!![])));}}function _0x446b98(_0x586d24,_0x2b5200){const _0x5468dd=_0x3b741d,{role:_0x10909e,content:_0x5e3c1b,displayUrl:_0x49d134,image:_0x2bfbf9,senderId:_0x128bd0}=_0x586d24,_0x224b56=document[_0x5468dd(0x51d)]('chat-messages'),_0x5605fd=_0x5e3c1b&&_0x5e3c1b['trim']()[_0x5468dd(0xca0)](_0x5468dd(0x1ea))&&_0x5e3c1b[_0x5468dd(0xad4)]()['endsWith'](_0x5468dd(0xc4f));if(_0x5605fd){if(_0x5468dd(0x747)!==_0x5468dd(0x910)){const _0x55f74d=document[_0x5468dd(0x23f)](_0x5468dd(0xaee));return _0x55f74d[_0x5468dd(0xa9d)]=_0x5468dd(0x76c),_0x55f74d['dataset'][_0x5468dd(0x1d8)]=_0x2b5200,_0x55f74d['innerHTML']=_0x5e3c1b,_0x224b56[_0x5468dd(0x83b)](_0x55f74d),_0x55f74d;}else _0x1093d2['style']['display']='none',_0x5dfed9[_0x5468dd(0x1e2)][_0x5468dd(0x643)]=_0x5468dd(0xb8f),_0x49a5ed['style']['background']=_0x5468dd(0x8d2);}const _0x4fa3a3=_0x10909e===_0x5468dd(0xbb1)?'ai':_0x10909e,_0x318dfe=_0x577515(),_0x475ce8=document[_0x5468dd(0x23f)](_0x5468dd(0xaee));_0x475ce8['classList'][_0x5468dd(0x25d)]('message-container',_0x4fa3a3),_0x475ce8[_0x5468dd(0xa24)]['historyIndex']=_0x2b5200;const _0x38ebcb=document[_0x5468dd(0x23f)](_0x5468dd(0xaee));_0x38ebcb[_0x5468dd(0xa9d)]=_0x5468dd(0x9ec);let _0x513dcc='',_0x16e12a='',_0x3d275c=null;if(_0x10909e===_0x5468dd(0x8ed)){const _0xaaf5fe=_0x2f2ed1(_0x543bea[_0x5468dd(0x886)]);_0x513dcc=_0xaaf5fe[_0x5468dd(0x5ec)]||_0x234b40;const _0x1b1a36=_0x509294(_0x318dfe?.[_0x5468dd(0x184)][0x0]);if(_0x1b1a36){if(_0x5468dd(0xba1)===_0x5468dd(0x276)){const _0x2ac37=_0x58f9fe['querySelector']('#member-select-'+_0xc22b45);if(_0x2ac37)_0x2ac37[_0x5468dd(0xaf0)]=!![];}else _0x16e12a=_0x1b1a36[_0x5468dd(0x34e)]||'';}}else{if(_0x5468dd(0x7b4)!==_0x5468dd(0x7b4))_0x25dbd4[_0x5468dd(0x532)](_0x4f0e5b=>{_0x4f0e5b?_0x17db9b(_0x4f0e5b):_0x1ea389(new _0x49b051('Canvas\x20to\x20Blob\x20conversion\x20failed.'));},_0x433325,_0x292862);else{if(_0x318dfe?.[_0x5468dd(0x711)]===_0x5468dd(0x5fc))_0x3d275c=_0x509294(_0x318dfe[_0x5468dd(0x184)][0x0]);else{if(_0x318dfe?.[_0x5468dd(0x711)]===_0x5468dd(0x91b)&&_0x128bd0){if('hIgyk'!=='TxrnB')_0x3d275c=_0x509294(_0x128bd0);else{_0x317045(_0x5468dd(0x199));return;}}}_0x513dcc=_0x3d275c?.[_0x5468dd(0x5ec)]||_0x46536a,_0x16e12a=_0x3d275c?.[_0x5468dd(0x172)]||'';}}const _0x439aab=_0x4fc2a0(_0x513dcc,_0x16e12a);if(_0x10909e!=='user'&&_0x3d275c){if(_0x5468dd(0xbf4)!==_0x5468dd(0x973)){const _0x379dde=_0x439aab[_0x5468dd(0x820)](_0x5468dd(0x67c));_0x54e221(_0x5468dd(0x395)+_0x3d275c['id'])[_0x5468dd(0x842)](_0x576854=>{const _0x5aa8e7=_0x5468dd;'IJQFr'===_0x5aa8e7(0x601)?_0x5eedda(_0x5aa8e7(0x77f)):_0x576854&&(_0x379dde[_0x5aa8e7(0x2d9)]=URL[_0x5aa8e7(0xcb2)](_0x576854));});}else _0x5a94d5[_0x5468dd(0xb47)](_0x4f8cb8['id']);}const _0x4e1a93=document[_0x5468dd(0x23f)]('div');_0x4e1a93[_0x5468dd(0xa19)]['add'](_0x5468dd(0x979),_0x4fa3a3);if(_0x318dfe?.[_0x5468dd(0x711)]===_0x5468dd(0x5fc)){const _0x21d45b=_0x318dfe[_0x5468dd(0x184)][0x0];_0x4e1a93[_0x5468dd(0xa19)]['add']('bubble-'+_0x21d45b);}if(_0x586d24[_0x5468dd(0x20f)]){const _0x263488=document[_0x5468dd(0x23f)](_0x5468dd(0xaee));_0x263488['className']=_0x5468dd(0xc6d),_0x263488[_0x5468dd(0x4d5)]=_0x5468dd(0x9a3)+_0x586d24[_0x5468dd(0x20f)][_0x5468dd(0x433)]+_0x5468dd(0x83e)+_0x586d24[_0x5468dd(0x20f)]['content']+_0x5468dd(0x32f),_0x4e1a93[_0x5468dd(0x83b)](_0x263488);}if(_0x49d134)_0x4e1a93[_0x5468dd(0xa19)]['add'](_0x5468dd(0xd29)),_0x4e1a93[_0x5468dd(0x4d5)]+=_0x5468dd(0x23b)+_0x49d134+'\x22\x20class=\x22sticker-content\x22>';else{if(_0x586d24[_0x5468dd(0x55b)]||_0x586d24['imageId']){_0x4e1a93[_0x5468dd(0xa19)][_0x5468dd(0x25d)](_0x5468dd(0x55b));const _0x2c4dee=document[_0x5468dd(0x23f)](_0x5468dd(0x93f));_0x2c4dee['classList']['add'](_0x5468dd(0x6e8)),_0x4e1a93[_0x5468dd(0x83b)](_0x2c4dee);if(_0x586d24[_0x5468dd(0x55b)]){if('csBHl'!==_0x5468dd(0x8f4)){const _0x58929d={'type':_0x5468dd(0x5b6),'version':0x1,'timestamp':_0x50dced[_0x5468dd(0x63d)](),'accountingData':_0x110665[_0x5468dd(0x1d2)],'accountingLedger':_0x453143[_0x5468dd(0x43a)]},_0x5825f8=new _0x192a54([_0x1cf2a7['stringify'](_0x58929d,null,0x2)],{'type':_0x5468dd(0xcb5)}),_0x2edee2=_0x4df784[_0x5468dd(0xcb2)](_0x5825f8),_0x54fbc2=_0x20420d[_0x5468dd(0x23f)]('a'),_0x26faaa=new _0x2d4aad(),_0x43d160=_0x26faaa['getFullYear']()+'-'+_0x182d35(_0x26faaa[_0x5468dd(0xc3f)]()+0x1)['padStart'](0x2,'0')+'-'+_0x5a56cc(_0x26faaa[_0x5468dd(0x3d6)]())[_0x5468dd(0xa9f)](0x2,'0');_0x54fbc2[_0x5468dd(0x7f5)]=_0x2edee2,_0x54fbc2['download']=_0x5468dd(0x1cc)+_0x43d160+'.json',_0x53d84f[_0x5468dd(0x936)][_0x5468dd(0x83b)](_0x54fbc2),_0x54fbc2[_0x5468dd(0x779)](),_0x49c136[_0x5468dd(0x936)][_0x5468dd(0x526)](_0x54fbc2),_0x4e9bf9['revokeObjectURL'](_0x2edee2),_0x3f5d47(_0x5468dd(0x639));}else _0x2c4dee['src']=_0x586d24['image'];}else _0x2c4dee[_0x5468dd(0x2d9)]=_0x5468dd(0xa2b),_0x54e221(_0x586d24[_0x5468dd(0x7c2)])[_0x5468dd(0x842)](_0x38cb20=>{const _0x5cc91a=_0x5468dd;if('IIYKM'!==_0x5cc91a(0xc66)){if(_0x38cb20)_0x2c4dee['src']=URL[_0x5cc91a(0xcb2)](_0x38cb20);else _0x2c4dee[_0x5cc91a(0x471)]=_0x5cc91a(0x5cb);}else{if(_0xa6614f)_0x25fea9(_0x3f035a);}})[_0x5468dd(0x634)](()=>_0x2c4dee[_0x5468dd(0x471)]='图片加载失败');_0x5e3c1b&&(_0x4e1a93[_0x5468dd(0x4d5)]+='<p\x20style=\x22margin-top:\x205px;\x22>'+_0x5e3c1b+_0x5468dd(0x84f));}else{if(_0x586d24[_0x5468dd(0x711)]==='transfer'){if('ukcRR'===_0x5468dd(0x484)){_0x4e1a93['classList'][_0x5468dd(0x25d)](_0x5468dd(0x68e));const _0x260ab0=_0x586d24[_0x5468dd(0xcd4)]===_0x5468dd(0x8ed)?_0x2f2ed1(_0x543bea[_0x5468dd(0x886)]):_0x509294(_0x586d24[_0x5468dd(0x2fb)]),_0x44ee9b=_0x586d24[_0x5468dd(0x458)]===_0x2f2ed1(_0x543bea[_0x5468dd(0x886)])['id']?_0x2f2ed1(_0x543bea[_0x5468dd(0x886)]):_0x509294(_0x586d24[_0x5468dd(0x458)]),_0x2a203b=_0x260ab0?.[_0x5468dd(0x41a)]?_0x260ab0['name']+_0x5468dd(0x878):'转账',_0x32d912=_0x44ee9b?.[_0x5468dd(0x41a)]?_0x5468dd(0x48c)+_0x44ee9b[_0x5468dd(0x41a)]:'转账';_0x4e1a93[_0x5468dd(0x4d5)]+=_0x5468dd(0x5e8)+_0x2a203b+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥'+_0x586d24[_0x5468dd(0x650)][_0x5468dd(0xb7b)](0x2)+_0x5468dd(0x228)+_0x32d912+_0x5468dd(0x1d9);}else{if(_0x24ba10[_0x5468dd(0xc1f)]===0x0)return;_0x484ac6=(_0x309d9b+0x1)%_0x5330fd[_0x5468dd(0xc1f)],_0x5d6bfd(_0x3566c2[_0x5aeeea],_0x3c0734);}}else{if(_0x586d24[_0x5468dd(0x711)]===_0x5468dd(0x3e9)){_0x4e1a93[_0x5468dd(0xa19)][_0x5468dd(0x25d)]('music');const _0x2f968b=document['createElement'](_0x5468dd(0xaee));_0x2f968b[_0x5468dd(0xa9d)]=_0x5468dd(0xc69);const _0x1eacff=_0x586d24[_0x5468dd(0xcd4)]===_0x5468dd(0x8ed)?_0x2f2ed1(_0x543bea[_0x5468dd(0x886)])[_0x5468dd(0x41a)]||'你':_0x509294(_0x586d24['senderId'])?.['name']||'TA',_0x417b16='cover_placeholder_'+_0x586d24[_0x5468dd(0x11f)],_0x307dac=_0x5468dd(0xc1e)+_0x417b16+_0x5468dd(0x6b9)+_0x46536a+'\x22>';_0x586d24[_0x5468dd(0x428)]?_0x2f968b[_0x5468dd(0x4d5)]=_0x5468dd(0x3ca)+_0x307dac+_0x5468dd(0x3ab)+_0x586d24[_0x5468dd(0xd09)]+_0x5468dd(0x699)+_0x586d24['artist']+_0x5468dd(0x87e):_0x2f968b['innerHTML']=_0x5468dd(0x582)+_0x1eacff+_0x5468dd(0x564)+_0x307dac+_0x5468dd(0x3ab)+_0x586d24[_0x5468dd(0xd09)]+_0x5468dd(0x699)+_0x586d24[_0x5468dd(0x38b)]+_0x5468dd(0x7bb)+_0x586d24[_0x5468dd(0x8bd)]+'\x22>一起听</button></div>',_0x4e1a93[_0x5468dd(0x83b)](_0x2f968b),_0x586d24['coverId']&&setTimeout(()=>{const _0x3a2c7f=_0x5468dd;if(_0x3a2c7f(0xcca)===_0x3a2c7f(0xcca))_0x54e221(_0x586d24[_0x3a2c7f(0x28a)])[_0x3a2c7f(0x842)](_0x2dc79c=>{const _0x304566=_0x3a2c7f;if(_0x304566(0xc8d)===_0x304566(0x885)){_0xfc82d3(_0x304566(0x620));return;}else{const _0x517a5b=document[_0x304566(0x51d)](_0x417b16);if(_0x517a5b&&_0x2dc79c)_0x517a5b[_0x304566(0x2d9)]=URL[_0x304566(0xcb2)](_0x2dc79c);}});else{const _0x3d2f7e=_0x3a2c7f(0xa45)+_0x513998;_0x471c51(_0x3d2f7e),_0x3a0023(!![]);}},0x0);}else{if(_0x586d24[_0x5468dd(0x711)]==='music'&&_0x586d24['songName']){_0x4e1a93[_0x5468dd(0xa19)][_0x5468dd(0x25d)](_0x5468dd(0x64e));const _0x34f10a=document[_0x5468dd(0x23f)](_0x5468dd(0xaee));_0x34f10a['className']=_0x5468dd(0xc0e),_0x34f10a[_0x5468dd(0xa24)][_0x5468dd(0x7ec)]=_0x5468dd(0x5a0)+_0x586d24[_0x5468dd(0x11f)];const _0xe3e080='cover_placeholder_'+_0x586d24['timestamp'];let _0x2558e1=_0x5468dd(0x23b)+_0x46536a+_0x5468dd(0x397)+_0xe3e080+'\x22\x20class=\x22music-share-cover\x22>';_0x34f10a['innerHTML']=_0x5468dd(0x7ee)+_0x2558e1+_0x5468dd(0x587)+_0x586d24[_0x5468dd(0xd09)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>'+_0x586d24['artist']+_0x5468dd(0x2ce)+(_0x586d24[_0x5468dd(0x72e)]?'▶':'⚠')+_0x5468dd(0xc4f),_0x4e1a93[_0x5468dd(0x83b)](_0x34f10a),setTimeout(()=>{const _0xdd3909=_0x5468dd,_0x56d92f=document[_0xdd3909(0x51d)](_0xe3e080);if(!_0x56d92f)return;if(_0x586d24[_0xdd3909(0x28a)]){if(_0xdd3909(0x4a0)==='diiEo')_0x54e221(_0x586d24['coverId'])['then'](_0x53750d=>{const _0x97e3c8=_0xdd3909;if(_0x53750d)_0x56d92f[_0x97e3c8(0x2d9)]=URL[_0x97e3c8(0xcb2)](_0x53750d);});else{_0x4d2a67[_0xdd3909(0x259)]=[..._0x3c30c1];const _0xf1e044=_0x3aa49d[_0xdd3909(0x259)]['shift']();_0x14ddb5[_0xdd3909(0x32a)]=_0xf1e044[_0xdd3909(0x319)]===_0xdd3909(0x4b3)?'旁白':_0xf1e044['speaker'],_0x2d60cc[_0xdd3909(0x32a)]=_0xf1e044['line'],_0xf1e044[_0xdd3909(0x319)]!=='narrator'&&_0x5c4866(_0x3c49b6[_0xdd3909(0x80c)],_0xf1e044[_0xdd3909(0x6c0)]);}}else _0x586d24[_0xdd3909(0x372)]&&(_0xdd3909(0x884)===_0xdd3909(0x884)?_0x56d92f[_0xdd3909(0x2d9)]=_0x586d24[_0xdd3909(0x372)]:_0x258c30[_0xdd3909(0xb47)](_0x2aff5f));},0x0),_0x586d24['playableUrl']&&_0x34f10a['addEventListener']('click',function(){const _0x2a66e4=_0x5468dd,_0x90891a=document[_0x2a66e4(0x51d)](_0x2a66e4(0x4bd)),_0x16f117=document[_0x2a66e4(0x5c4)]('.music-post-play-icon,\x20.music-share-play-icon'),_0x54a057=this[_0x2a66e4(0x820)]('.music-share-play-icon'),_0x52ff84=_0x90891a[_0x2a66e4(0x2d9)][_0x2a66e4(0x32d)](_0x586d24[_0x2a66e4(0x72e)])&&!_0x90891a[_0x2a66e4(0xc6e)];_0x16f117[_0x2a66e4(0xb36)](_0xd365c0=>{const _0x27953b=_0x2a66e4;_0xd365c0!==_0x54a057&&('gfAxH'!==_0x27953b(0xa44)?_0x508185[_0x27953b(0xb1e)](_0x27953b(0xbfe),_0x55882c):_0xd365c0[_0x27953b(0x32a)]='▶');}),!_0x52ff84&&document[_0x2a66e4(0x51d)]('unified-audio-player')[_0x2a66e4(0x939)](),_0x52ff84?(_0x90891a[_0x2a66e4(0x939)](),_0x54a057[_0x2a66e4(0x32a)]='▶'):(_0x90891a[_0x2a66e4(0x2d9)]=_0x586d24['playableUrl'],_0x90891a[_0x2a66e4(0x152)](),_0x54a057[_0x2a66e4(0x32a)]='❚❚');});}else{if(_0x5468dd(0x8d7)!==_0x5468dd(0x8d7))_0x446392[_0x5468dd(0xc9f)]['widgetBgImage']=null,_0x7b488e(),_0x8a398c(),_0x31a28a('小组件背景已恢复默认。');else{if(_0x5e3c1b){if(_0x5468dd(0x773)===_0x5468dd(0x773)){const _0x47166f=document[_0x5468dd(0x23f)]('p');_0x47166f[_0x5468dd(0x4d5)]=_0x5e3c1b,_0x47166f[_0x5468dd(0x1e2)][_0x5468dd(0xd0c)]='0',_0x4e1a93[_0x5468dd(0x83b)](_0x47166f);}else _0x4693c0['type']==='danmaku'&&_0x4ef1fc(_0x3c63cf);}}}}}}}_0x4fa3a3===_0x5468dd(0x8ed)?(_0x38ebcb['appendChild'](_0x4e1a93),_0x38ebcb[_0x5468dd(0x83b)](_0x439aab)):'KODUE'!==_0x5468dd(0x9b8)?(_0x574929(),_0x5783c0['conversationHistory']=[],_0x5e1f65()):(_0x38ebcb[_0x5468dd(0x83b)](_0x439aab),_0x38ebcb['appendChild'](_0x4e1a93));_0x475ce8[_0x5468dd(0x83b)](_0x38ebcb);const _0x5ccbf9=document['createElement']('div');return _0x5ccbf9['className']=_0x5468dd(0x11f),_0x5ccbf9[_0x5468dd(0x32a)]=_0x2ca02b(_0x586d24[_0x5468dd(0x11f)]),_0x475ce8[_0x5468dd(0x83b)](_0x5ccbf9),_0x224b56[_0x5468dd(0x83b)](_0x475ce8),_0x475ce8;}let _0x528382=null;function _0x4248e7(_0x12e840){const _0x5d7663=_0x3b741d;if(_0x5d7663(0x536)!==_0x5d7663(0x536))_0x311bd1[_0x5d7663(0x1d2)][_0x5d7663(0x278)](_0xbffb5b,0x1),_0x8f6a14(),_0x29cfad();else{if(window[_0x5d7663(0x225)]()[_0x5d7663(0x8ef)]()||_0x12e840[_0x5d7663(0x436)]!==0x0){if(_0x5d7663(0xd41)===_0x5d7663(0xd41))return;else _0x409029[_0x5d7663(0xb1e)](_0x5d7663(0x203),_0x34eb49),_0x2b23b0='<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>'+_0x18cd71+_0x5d7663(0x509);}const _0x3dbfd7=_0x12e840[_0x5d7663(0x446)][_0x5d7663(0x156)](_0x5d7663(0xcfa)),_0x2c8c5c=_0x12e840[_0x5d7663(0x446)][_0x5d7663(0x156)](_0x5d7663(0x9b4));if(!_0x3dbfd7||_0x2c8c5c)return;const _0xda3460=parseInt(_0x3dbfd7[_0x5d7663(0xa24)][_0x5d7663(0x1d8)],0xa);if(isNaN(_0xda3460))return;const _0x255ac6=()=>{const _0x3ba9d9=_0x5d7663;if(_0x3ba9d9(0x47a)===_0x3ba9d9(0x453)){_0x3dd263[_0x3ba9d9(0xc52)](_0x3ba9d9(0x823)+_0x284045['id']+_0x3ba9d9(0x945),_0x288c27['message']);try{_0x11d7da=_0xdd9e64(_0x82ea97);if(!_0x5871d1)throw new _0x1cdf35(_0x3ba9d9(0x599));_0x4a3e60[_0x3ba9d9(0x68b)](_0x3ba9d9(0x315)+_0x8cc567['id']+_0x3ba9d9(0x50a));}catch(_0x2b5c5b){throw _0x41de88;}}else clearTimeout(_0x528382),document[_0x3ba9d9(0x2ec)]('mouseup',_0x255ac6),document[_0x3ba9d9(0x2ec)]('touchend',_0x255ac6),document[_0x3ba9d9(0x2ec)](_0x3ba9d9(0x6bb),_0x255ac6),document[_0x3ba9d9(0x2ec)](_0x3ba9d9(0x5ad),_0x255ac6);},_0x5ebd1e=()=>{const _0x140042=_0x5d7663;_0x255ac6(),_0x528382=setTimeout(()=>{const _0x2e8a54=_0x53d2;_0x2e8a54(0x1fb)===_0x2e8a54(0xcb1)?_0x446003=_0xf48659[_0x2e8a54(0xc49)][_0x2e8a54(0x257)](_0x24aac7=>_0x67d8d8[_0x2e8a54(0x41e)][_0x2e8a54(0xbe8)](_0x204beb=>_0x204beb['id']===_0x24aac7))[_0x2e8a54(0x78c)](_0x1cd655)[_0x2e8a54(0x257)](_0x296507=>_0x2e8a54(0x53b)+_0x296507[_0x2e8a54(0x41a)]+']:\x20'+_0x296507[_0x2e8a54(0x297)])[_0x2e8a54(0x4db)](''):_0x130f27(_0xda3460);},0x258),document[_0x140042(0xbc8)](_0x140042(0xb0e),_0x255ac6),document['addEventListener'](_0x140042(0xbc7),_0x255ac6),document[_0x140042(0xbc8)](_0x140042(0x6bb),_0x255ac6),document['addEventListener']('touchmove',_0x255ac6);};_0x5ebd1e();}}const _0x491f26=document[_0x3b741d(0x51d)](_0x3b741d(0x8f0));_0x491f26&&(_0x491f26['addEventListener'](_0x3b741d(0x57e),_0x4248e7),_0x491f26['addEventListener'](_0x3b741d(0x897),_0x4248e7,{'passive':![]}),_0x491f26[_0x3b741d(0xbc8)](_0x3b741d(0x2b5),_0x464541=>_0x464541[_0x3b741d(0x9cb)]()));function _0x258f32(){const _0x42dfdd=_0x3b741d;if('PTjsa'==='PTjsa'){const _0x2dda9f=_0x577515();if(!_0x2dda9f){_0x454e7f[_0x42dfdd(0x32a)]=_0x42dfdd(0xa9b);return;}if(_0x2dda9f[_0x42dfdd(0x711)]===_0x42dfdd(0x5fc)){const _0x5d1857=_0x509294(_0x2dda9f['participantIds'][0x0]);_0x454e7f[_0x42dfdd(0x32a)]=_0x5d1857?_0x5d1857['name']:'未知角色';}else _0x454e7f['textContent']=_0x2dda9f['name']||_0x42dfdd(0x9f5)+_0x2dda9f[_0x42dfdd(0x184)]['length']+')';}else _0x1a5a65[_0x42dfdd(0x1e2)][_0x42dfdd(0x911)]='var(--text-color)';}function _0x5e7d91(_0xec8b37){const _0x26cefc=_0x3b741d;if(_0x26cefc(0xcec)!==_0x26cefc(0xc2f)){const _0x1f72f1=document['querySelector'](_0x26cefc(0x73e));_0x1f72f1&&_0x1f72f1['remove']();const _0x374335=document['querySelector'](_0x26cefc(0x763));if(_0x374335&&(_0x374335['id']==='meeting-view-screen'||_0x374335['id']==='chat-screen'))_0xe2dd1b();else{if(_0x26cefc(0x82b)===_0x26cefc(0x380))_0x499e66['getElementById'](_0x26cefc(0x8b9))[_0x26cefc(0x779)]();else{const _0x1e8b81=document[_0x26cefc(0x5c4)](_0x26cefc(0x1e3));_0x1e8b81[_0x26cefc(0xb36)](_0x204843=>_0x204843['remove']());}}}else throw _0x34ca3d;}function _0x1834e0(){const _0x16037a=_0x3b741d;_0x543bea['isGenerating']&&_0x543bea[_0x16037a(0x320)]&&(_0x16037a(0x344)===_0x16037a(0x452)?(_0x48e0c8[_0x16037a(0x9a8)]&&(_0x38aa4d[_0x16037a(0x9a8)]=![],_0x51fa15[_0x16037a(0xa19)][_0x16037a(0xab0)](_0x16037a(0x6d9))),_0x4631f5[_0x16037a(0x72b)](),_0x361fec()):(console[_0x16037a(0x68b)](_0x16037a(0x3e7)),_0x543bea[_0x16037a(0x320)][_0x16037a(0x627)](_0x16037a(0x7d2)),_0x543bea[_0x16037a(0x320)]=null)),_0x543bea[_0x16037a(0xd1f)]=![],_0x5e7d91(![]);}function _0x577515(){const _0x168cd7=_0x3b741d;return _0x543bea[_0x168cd7(0x94b)][_0x168cd7(0xbe8)](_0x4df69a=>_0x4df69a['id']===_0x543bea[_0x168cd7(0x886)]);}function _0x509294(_0xe092e7){const _0x3bd523=_0x3b741d;return _0x543bea[_0x3bd523(0x24d)]['find'](_0x51bf7d=>_0x51bf7d['id']===_0xe092e7);}function _0x23a598(_0x227024){const _0x11ea00=_0x3b741d;_0x543bea[_0x11ea00(0x24d)]=_0x543bea[_0x11ea00(0x24d)][_0x11ea00(0x78c)](_0x10eeb4=>_0x10eeb4['id']!==_0x227024),_0x543bea['chats'][_0x11ea00(0xb36)](_0x2c4ff1=>{const _0x59aeb8=_0x11ea00;_0x2c4ff1['type']===_0x59aeb8(0x91b)&&(_0x2c4ff1[_0x59aeb8(0x184)]=_0x2c4ff1[_0x59aeb8(0x184)][_0x59aeb8(0x78c)](_0xe6d5c8=>_0xe6d5c8!==_0x227024));});const _0x13e821=_0x543bea['chats'][_0x11ea00(0xbe8)](_0x4e07f8=>_0x4e07f8[_0x11ea00(0x711)]===_0x11ea00(0x5fc)&&_0x4e07f8[_0x11ea00(0x184)][_0x11ea00(0x32d)](_0x227024));_0x13e821&&_0x5047c2(_0x13e821['id']),_0x543bea[_0x11ea00(0x94b)]=_0x543bea[_0x11ea00(0x94b)][_0x11ea00(0x78c)](_0x329617=>_0x329617[_0x11ea00(0x711)]!==_0x11ea00(0x91b)||_0x329617[_0x11ea00(0x184)][_0x11ea00(0xc1f)]>0x1),_0x1a0f1f(),_0x358a91();}function _0x5047c2(_0x2d2c1d){const _0x2f5f6d=_0x3b741d;_0x543bea[_0x2f5f6d(0x94b)]=_0x543bea[_0x2f5f6d(0x94b)][_0x2f5f6d(0x78c)](_0xe8d150=>_0xe8d150['id']!==_0x2d2c1d);try{localStorage['removeItem'](_0x2f5f6d(0x74f)+_0x2d2c1d);}catch(_0x1a709f){console[_0x2f5f6d(0xb1e)](_0x2f5f6d(0xc36)+_0x2d2c1d,_0x1a709f);}_0x543bea[_0x2f5f6d(0x886)]===_0x2d2c1d&&(_0x543bea['activeChatId']=_0x543bea[_0x2f5f6d(0x94b)][0x0]?.['id']||null,_0xead58c(_0x543bea['activeChatId'])),_0x1a0f1f();}async function _0xead58c(_0x5c79dc){const _0x6bef2c=_0x3b741d;_0x543bea[_0x6bef2c(0x886)]!==_0x5c79dc&&(_0x1834e0(),_0x543bea['displayedMessageCount']=0x64);if(!_0x5c79dc){_0x543bea[_0x6bef2c(0x886)]=null,_0x1a0f1f(),_0x517704(![]),document[_0x6bef2c(0x51d)](_0x6bef2c(0x624))[_0x6bef2c(0x1e2)][_0x6bef2c(0xbd8)]='';return;}_0x543bea[_0x6bef2c(0x886)]=_0x5c79dc,_0x1a0f1f(),_0x258f32(),_0x2ee974['innerHTML']='',_0x2ee484(!![],_0x6bef2c(0xac2)),setTimeout(async()=>{const _0xf1d3d1=_0x6bef2c;if(_0xf1d3d1(0x1ba)!==_0xf1d3d1(0x9be))try{_0x26dafa();const _0x525d25=_0x577515(),_0x56a1b4=document[_0xf1d3d1(0x51d)]('chat-view-pane');let _0x1577d9=null;if(_0x525d25){if('PlBND'!==_0xf1d3d1(0x1af)){if(_0x453bcf[_0xf1d3d1(0xc7f)]===_0xf1d3d1(0x959))_0x5ab359(null);_0x3d1a34['key']==='Enter'&&(_0x5232aa[_0xf1d3d1(0x9cb)](),_0x4412a8());}else{if(_0x525d25[_0xf1d3d1(0x711)]===_0xf1d3d1(0x5fc)){const _0x979aa9=_0x525d25[_0xf1d3d1(0x184)][0x0];_0x94cae(_0x979aa9),_0x1577d9=await _0x54e221(_0xf1d3d1(0x33d)+_0x979aa9);}else{if('YpgzY'===_0xf1d3d1(0x3b6))_0x1577d9=await _0x54e221('group_bg_'+_0x525d25['id']);else{const _0x4eab3d=_0x2468a3[_0xf1d3d1(0x170)](_0xcecb20,_0xf1d3d1(0x366)),_0x2c80f3=_0x4eab3d['objectStore'](_0x4d976c),_0x16a827=_0x2c80f3['getAll']();_0x16a827[_0xf1d3d1(0x487)]=()=>_0x1163a9(_0x16a827[_0xf1d3d1(0x668)]),_0x16a827[_0xf1d3d1(0x122)]=()=>_0xa22084(_0x16a827[_0xf1d3d1(0xb1e)]);}}_0x1577d9?_0xf1d3d1(0xd06)===_0xf1d3d1(0x948)?(_0x45d94c[_0xf1d3d1(0x90f)]=_0x2f71ed[_0xf1d3d1(0x4b9)][_0xf1d3d1(0x41a)]||'',_0x477599[_0xf1d3d1(0x2d9)]=_0x28de5b[_0xf1d3d1(0x4b9)]['avatar']||_0x43ac6e,_0x8394d3[_0xf1d3d1(0x90f)]=_0x959d48['userProfile'][_0xf1d3d1(0x367)]||''):(_0x56a1b4['style'][_0xf1d3d1(0xbd8)]=_0xf1d3d1(0x744)+URL['createObjectURL'](_0x1577d9)+'\x27)',_0x56a1b4['style'][_0xf1d3d1(0xa4e)]=_0xf1d3d1(0x73d),_0x56a1b4['style'][_0xf1d3d1(0x1c0)]='center'):_0x56a1b4[_0xf1d3d1(0x1e2)][_0xf1d3d1(0xbd8)]='';}}_0x15b163();}catch(_0x7038c8){_0xf1d3d1(0x679)===_0xf1d3d1(0x513)?(_0x5552ec(),_0x5f554a(![])):(console[_0xf1d3d1(0xb1e)](_0xf1d3d1(0x5a5),_0x7038c8),_0x48e450(_0xf1d3d1(0xcf1)+_0x7038c8[_0xf1d3d1(0x979)]));}finally{_0x2ee484(![]);}else{const _0x40fe74=_0x41b1f4(_0x437e5e[_0xf1d3d1(0x184)][0x0]);_0x51ba2a[_0xf1d3d1(0x32a)]=_0x40fe74?_0x40fe74[_0xf1d3d1(0x41a)]:_0xf1d3d1(0x4c3);}},0x32);}async function _0x15fa55(){const _0x25e335=_0x3b741d;if('hjpVV'!==_0x25e335(0x1c7)){const _0x1f010f=_0x24f301['getElementById'](_0x25e335(0x6c8));if(_0x1f010f)_0x1f010f['textContent']='❚❚';}else{if(_0x543bea[_0x25e335(0xd1f)]){_0x48e450(_0x25e335(0x199));return;}const _0x109ebc=_0x543bea[_0x25e335(0xc54)];if(_0x109ebc['length']===0x0)return;let _0x1e4a44=-0x1;for(let _0x5d1833=_0x109ebc[_0x25e335(0xc1f)]-0x1;_0x5d1833>=0x0;_0x5d1833--){if(_0x109ebc[_0x5d1833][_0x25e335(0xcd4)]===_0x25e335(0x8ed)){_0x1e4a44=_0x5d1833;break;}}if(_0x1e4a44===-0x1||_0x1e4a44===_0x109ebc[_0x25e335(0xc1f)]-0x1){if('xsNAK'===_0x25e335(0x2ae)){_0xffa70(_0x25e335(0x7a6));return;}else{_0x48e450(_0x25e335(0x488));return;}}_0x109ebc['splice'](_0x1e4a44+0x1),_0x543bea[_0x25e335(0x259)]=[],_0x348dc5(),_0x2270eb(),_0x5ef098(_0x543bea[_0x25e335(0x80c)]),setTimeout(()=>{const _0x42c06d=_0x25e335;if('mgBuG'!==_0x42c06d(0x689)){const _0x27ccfd=_0x47262d(_0x469e1d['participantIds'][0x0]);return _0x27ccfd?.[_0x42c06d(0x41a)]||'AI';}else _0x183583();},0x64);}}async function _0x1ef0a7(){const _0x5c4f4a=_0x3b741d;if(_0x543bea[_0x5c4f4a(0xd1f)]){if('jzBOY'===_0x5c4f4a(0x211)){_0x48e450('正在生成中，请稍候...');return;}else _0x1e4000['push'](_0x5bdca6[_0x4707f7][_0x5c4f4a(0xad4)]()),_0x513afe++;}const _0x2e32cf=_0x543bea[_0x5c4f4a(0xc54)];if(_0x2e32cf[_0x5c4f4a(0xc1f)]===0x0)return;let _0x445cd2=-0x1;for(let _0x44cb8b=_0x2e32cf['length']-0x1;_0x44cb8b>=0x0;_0x44cb8b--){if('quByJ'!=='YHYqk'){if(_0x2e32cf[_0x44cb8b]['role']===_0x5c4f4a(0x8ed)){_0x445cd2=_0x44cb8b;break;}}else{if(_0x47039f[_0x5c4f4a(0x8ad)])_0x1467fd(_0xb06bee['replayPressTimer']);const _0x1931c2=()=>{const _0x5eb8db=_0x5c4f4a;_0x334e11[_0x5eb8db(0x8ad)]=_0x16b735(()=>{_0x2493c7['preventDefault'](),_0x1c74d7(_0x1f6ba2,_0x4cc305);},0x320);},_0x4ddac6=()=>{const _0x496dc7=_0x5c4f4a;_0x429dca(_0x4a2603[_0x496dc7(0x8ad)]),_0x130ecb[_0x496dc7(0x2ec)](_0x496dc7(0xb0e),_0x4ddac6),_0x426aa9[_0x496dc7(0x2ec)](_0x496dc7(0x65c),_0x4ddac6),_0x19ca5a[_0x496dc7(0x2ec)](_0x496dc7(0xbc7),_0x4ddac6),_0x5baa8e[_0x496dc7(0x2ec)](_0x496dc7(0x6bb),_0x4ddac6);};_0x30b857[_0x5c4f4a(0xbc8)]('mouseup',_0x4ddac6,{'once':!![]}),_0x3daefd['addEventListener'](_0x5c4f4a(0x65c),_0x4ddac6,{'once':!![]}),_0x4f612c[_0x5c4f4a(0xbc8)](_0x5c4f4a(0xbc7),_0x4ddac6,{'once':!![]}),_0x51528e[_0x5c4f4a(0xbc8)](_0x5c4f4a(0x6bb),_0x4ddac6,{'once':!![]}),_0x1931c2();}}if(_0x445cd2===-0x1||_0x445cd2===_0x2e32cf[_0x5c4f4a(0xc1f)]-0x1){if(_0x5c4f4a(0x6e2)===_0x5c4f4a(0x9e8))_0x28704c[_0x5c4f4a(0x4d5)]='\x0a\x20\x20\x20\x20<div\x20>\x20'+_0x59f536['toLocaleTimeString'](_0x5c4f4a(0xbd4),{'hour':_0x5c4f4a(0x145),'minute':_0x5c4f4a(0x145),'hour12':![]})+'</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';else{_0x48e450(_0x5c4f4a(0x2f7));return;}}_0x2e32cf[_0x5c4f4a(0x278)](_0x445cd2+0x1),_0x348dc5(),_0xe2dd1b(),setTimeout(()=>{const _0x3f4ca6=_0x5c4f4a;if('Xtbbf'===_0x3f4ca6(0xc16)){const _0x4a2cb0=_0xd8fb98['conversationHistory'][_0x378d7d-0x2],_0x293f0b=_0x3ceb24[_0x3f4ca6(0xc54)][_0x323c7f-0x1];if(_0x4a2cb0[_0x3f4ca6(0xbc1)]===![]&&_0x293f0b[_0x3f4ca6(0xbc1)]===!![])_0x408138=_0x3f4ca6(0x22e)+_0x4a1475[_0x3f4ca6(0x41a)]+'”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。';else _0x4a2cb0[_0x3f4ca6(0xbc1)]===!![]&&_0x293f0b[_0x3f4ca6(0xbc1)]===![]&&(_0x402539=_0x3f4ca6(0x247)+_0x8cdd59['name']+'”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。');}else _0x183583();},0x64);}function _0x5680ba(_0xed9dbc=null){const _0x4c6dbe=_0x3b741d,_0xb027dc=_0xed9dbc??_0x376e7e[_0x4c6dbe(0x90f)]['trim']();if(_0xb027dc===''||!_0x543bea[_0x4c6dbe(0x886)])return;const _0x2199a4=document[_0x4c6dbe(0x820)](_0x4c6dbe(0x763)),_0x548e2d=_0x2199a4['id']===_0x4c6dbe(0x6ad),_0x16e65f={'role':_0x4c6dbe(0x8ed),'content':_0xb027dc,'timestamp':Date[_0x4c6dbe(0x63d)](),'isOffline':_0x548e2d};_0x543bea[_0x4c6dbe(0xa6e)]&&(_0x4c6dbe(0xa53)!==_0x4c6dbe(0x3a0)?_0x16e65f[_0x4c6dbe(0x20f)]={..._0x543bea['activeQuote']}:_0x22ba5f+=_0x4c6dbe(0x325));_0x543bea[_0x4c6dbe(0xc54)][_0x4c6dbe(0xb47)](_0x16e65f);const _0x348b55=_0x446b98(_0x16e65f,_0x543bea[_0x4c6dbe(0xc54)]['length']-0x1);_0x348b55&&(_0x2ee974[_0x4c6dbe(0xd3a)]=_0x2ee974[_0x4c6dbe(0x983)]),_0x348dc5(),_0x376e7e[_0x4c6dbe(0x90f)]='',_0x3e390b();}function _0x399f12(_0x581374){const _0x3270b5=_0x3b741d;if(!_0x581374||!_0x543bea[_0x3270b5(0x886)])return;const _0x59fc5b={'role':'user','content':_0x3270b5(0x801)+_0x581374[_0x3270b5(0x41a)]+']','displayUrl':_0x581374[_0x3270b5(0x411)],'timestamp':Date[_0x3270b5(0x63d)]()};_0x543bea[_0x3270b5(0xc54)][_0x3270b5(0xb47)](_0x59fc5b),_0x446b98(_0x59fc5b,_0x543bea[_0x3270b5(0xc54)][_0x3270b5(0xc1f)]-0x1),_0x348dc5(),_0x1e05aa[_0x3270b5(0xa19)][_0x3270b5(0xab0)]('show');}async function _0x582527(_0x332dfa){const _0x54c822=_0x3b741d;if('uovXX'==='uovXX'){const _0x4da04a=_0x332dfa[_0x54c822(0x446)][_0x54c822(0x730)][0x0];if(!_0x4da04a||!_0x543bea[_0x54c822(0x886)])return;_0x2ee484(!![],_0x54c822(0x8e3));try{const _0x1251b3=await _0x13bce5(_0x4da04a,0x320,0.8,!![]),_0x51754c=_0x54c822(0x7a2)+Date[_0x54c822(0x63d)]();await _0x567110(_0x51754c,_0x1251b3);const _0x540f33=_0x376e7e[_0x54c822(0x90f)][_0x54c822(0xad4)]();_0x376e7e[_0x54c822(0x90f)]='';const _0x31a453={'role':_0x54c822(0x8ed),'content':_0x540f33,'imageId':_0x51754c,'timestamp':Date[_0x54c822(0x63d)]()};_0x543bea['conversationHistory']['push'](_0x31a453),_0x446b98(_0x31a453,_0x543bea[_0x54c822(0xc54)][_0x54c822(0xc1f)]-0x1),_0x348dc5();}catch(_0x4a807d){_0x48e450('图片处理失败:\x20'+_0x4a807d[_0x54c822(0x979)]);}finally{_0x2ee484(![]),_0x332dfa[_0x54c822(0x446)]['value']='';}}else{const _0x2f97ed=_0x2853d7['createElement'](_0x54c822(0xaee));return _0x2f97ed['className']=_0x54c822(0x76c),_0x2f97ed[_0x54c822(0xa24)][_0x54c822(0x1d8)]=_0x566593,_0x2f97ed[_0x54c822(0x4d5)]=_0xd05c32,_0x2d5da6[_0x54c822(0x83b)](_0x2f97ed),_0x2f97ed;}}async function _0x151d66(){const _0x6c7f96=_0x3b741d;if('zIsHL'!==_0x6c7f96(0xc6a)){const _0x47298e=_0x109d23[_0x6c7f96(0x446)]['files'][0x0];if(!_0x47298e)return;try{const _0xbf01b1=_0x132844[_0x6c7f96(0xcb2)](_0x47298e);_0x285d79[_0x6c7f96(0x1e2)]['backgroundImage']='url(\x27'+_0xbf01b1+'\x27)';}catch(_0x18f99c){_0x33ca77(_0x6c7f96(0x781)+_0x18f99c[_0x6c7f96(0x979)]);}}else{if(!_0x543bea['activeChatId'])return;const _0x5ddc63=await _0x357cce();if(!_0x5ddc63)return;_0x48e450('正在搜索音乐...');try{if(_0x6c7f96(0x565)===_0x6c7f96(0xc2b))_0x5c8fc5(_0x56ed2d),_0x34944f('角色“'+_0x15696a[_0x6c7f96(0x41a)]+_0x6c7f96(0x18a)),_0xbdc2fb(_0x6c7f96(0x69f),_0x6c7f96(0xb5f)),_0x4100ba(![]);else{const _0x3fb58e=await _0x4ffd26(_0x5ddc63[_0x6c7f96(0xd09)],_0x5ddc63[_0x6c7f96(0x38b)]),_0x547c67={'role':_0x6c7f96(0x8ed),'type':_0x6c7f96(0x64e),'content':_0x6c7f96(0x708)+_0x5ddc63[_0x6c7f96(0xd09)]+_0x6c7f96(0x391)+_0x5ddc63[_0x6c7f96(0x38b)]+']','songName':_0x5ddc63[_0x6c7f96(0xd09)],'artist':_0x5ddc63[_0x6c7f96(0x38b)],'coverUrl':_0x3fb58e['cover'],'playableUrl':_0x3fb58e[_0x6c7f96(0x411)],'timestamp':Date[_0x6c7f96(0x63d)]()};_0x543bea[_0x6c7f96(0xc54)][_0x6c7f96(0xb47)](_0x547c67),_0x348dc5(),_0x15b163();}}catch(_0x10e0d1){console[_0x6c7f96(0xb1e)]('用户分享音乐失败:',_0x10e0d1),_0x48e450(_0x6c7f96(0xa8c)+_0x10e0d1[_0x6c7f96(0x979)]);}}}function _0xc75756(_0x205dba,_0x476267=0x78){const _0x4c59a5=_0x3b741d;if(_0x4c59a5(0x254)==='PWtZs')_0x3b5eeb[_0x4c59a5(0x1e2)]['opacity']=0x0,_0x137f0f(()=>{const _0x43587b=_0x4c59a5;_0x348cea[_0x43587b(0x2d9)]=_0x2a7a5b['createObjectURL'](_0x137d51),_0x43db11[_0x43587b(0x1e2)]['opacity']=0x1;},0x96);else{const _0x5a88cc=_0xe83b1a=>{const _0x1c50b4=_0x4c59a5;if(_0xe83b1a[_0x1c50b4(0xcd4)]==='user')return _0x543bea['userProfile']?.['name']||'User';if(_0xe83b1a[_0x1c50b4(0x2fb)]){if(_0x1c50b4(0x138)!=='VSZuc'){const _0xe9baac=_0x14c1f0[0x0][_0x1c50b4(0xad4)](),_0x592041=_0x28caca[0x1]['trim']()[_0x1c50b4(0x6ac)](/^"|"$/g,'');_0x5cf179[_0xe9baac]=_0x592041;}else{const _0x12e092=_0x509294(_0xe83b1a[_0x1c50b4(0x2fb)]);return _0x12e092?.[_0x1c50b4(0x41a)]||'Unknown';}}if(_0x205dba?.['type']===_0x1c50b4(0x5fc)){if(_0x1c50b4(0xc11)===_0x1c50b4(0x2b8)){const _0x400d0f=_0x22ed21['chats'][_0x1c50b4(0xbe8)](_0x14f938=>_0x14f938['id']===_0x24fdb3);if(!_0x400d0f||_0x400d0f[_0x1c50b4(0x711)]!=='group')return;_0x4c2b9b['getElementById'](_0x1c50b4(0x360))[_0x1c50b4(0x90f)]=_0x400d0f[_0x1c50b4(0x41a)]||'',_0x41caaf(_0x1c50b4(0x147)),_0x2dc0b3[_0x1c50b4(0x51d)]('group-settings-bind-user')[_0x1c50b4(0x90f)]=_0x400d0f[_0x1c50b4(0x16c)]||_0x6025b7[_0x1c50b4(0x3fc)],_0x36f0de(_0x1c50b4(0x70b),_0x400d0f[_0x1c50b4(0xc49)]||[]),_0x188829();const _0x56277a=_0x1ba394[_0x1c50b4(0x51d)](_0x1c50b4(0xb4c)),_0xf1159e=_0x407a32['getElementById'](_0x1c50b4(0x1a7));_0xf1159e[_0x1c50b4(0x1e2)]['backgroundImage']='',_0x52c7af('group_avatar_'+_0x4aafbe)['then'](_0x36b2c0=>{const _0x55ae1d=_0x1c50b4;_0x56277a[_0x55ae1d(0x2d9)]=_0x36b2c0?_0x787b02[_0x55ae1d(0xcb2)](_0x36b2c0):_0x2641ad;}),_0xfde2d1(_0x1c50b4(0x50c)+_0x4e538c)[_0x1c50b4(0x842)](_0x54e747=>{const _0x111bbb=_0x1c50b4;if(_0x54e747)_0xf1159e[_0x111bbb(0x1e2)][_0x111bbb(0xbd8)]='url(\x27'+_0x412fb3['createObjectURL'](_0x54e747)+'\x27)';}),_0x453eb4(_0x1c50b4(0x868),_0x1c50b4(0x69f));}else{const _0x27f428=_0x509294(_0x205dba[_0x1c50b4(0x184)][0x0]);return _0x27f428?.[_0x1c50b4(0x41a)]||'AI';}}return'Assistant';},_0x16ba83=_0x543bea[_0x4c59a5(0xc54)][_0x4c59a5(0xb41)](-_0x476267),_0x5ac409=[];for(const _0x171f34 of _0x16ba83){if(_0x4c59a5(0xbf6)===_0x4c59a5(0xbf6)){if(_0x171f34[_0x4c59a5(0x3b2)])_0x5ac409[_0x4c59a5(0xb47)]('['+_0x5a88cc(_0x171f34)+_0x4c59a5(0x4ac)+(_0x171f34[_0x4c59a5(0x297)]?.[_0x4c59a5(0x606)](/：(.+?)]/)?.[0x1]||'表情')+']');else{if(_0x171f34[_0x4c59a5(0x55b)]){const _0x5d1699=_0x171f34[_0x4c59a5(0x297)]?'\x20'+_0x171f34[_0x4c59a5(0x297)]:'';_0x5ac409[_0x4c59a5(0xb47)]('['+_0x5a88cc(_0x171f34)+_0x4c59a5(0x375)+_0x5d1699);}else _0x171f34[_0x4c59a5(0x297)]&&_0x5ac409[_0x4c59a5(0xb47)]('['+_0x5a88cc(_0x171f34)+']\x20'+_0x171f34['content']);}}else return _0x5efe6b(_0x4c59a5(0x989)+_0x43a06c['id']);}return _0x5ac409[_0x4c59a5(0x4db)]('\x0a');}}function _0x448a83(_0x12a7a0,_0x29c742){const _0x2acac4=_0x3b741d;if(!_0x12a7a0||!_0x29c742)return null;const _0x51ead0=_0x29c742[_0x2acac4(0x606)](/@([^\s:：,，。!?]+)/);if(!_0x51ead0)return null;const _0x358b4a=_0x51ead0[0x1][_0x2acac4(0x196)]();for(const _0x43b8ea of _0x12a7a0[_0x2acac4(0x184)]){if(_0x2acac4(0x13b)!==_0x2acac4(0x13b))_0x25f7f7[_0x2acac4(0xa10)](),_0x49a916['classList'][_0x2acac4(0x52b)](_0x2acac4(0x462)),_0x574dc2['classList'][_0x2acac4(0x52b)](_0x2acac4(0x206));else{const _0x478ff9=_0x509294(_0x43b8ea);if(!_0x478ff9?.[_0x2acac4(0x41a)])continue;if(_0x478ff9[_0x2acac4(0x41a)]['toLowerCase']()===_0x358b4a)return _0x478ff9;if(_0x478ff9[_0x2acac4(0x41a)][_0x2acac4(0x196)]()[_0x2acac4(0xca0)](_0x358b4a))return _0x478ff9;}}return null;}function _0xaab406(_0x3764fc){const _0x16afc2=_0x3b741d;if(_0x16afc2(0x7b6)!==_0x16afc2(0xcaa)){const _0x41b687=_0x3764fc['indexOf']('{'),_0x42aa88=_0x3764fc[_0x16afc2(0x595)]('}');if(_0x41b687>=0x0&&_0x42aa88>_0x41b687)return _0x3764fc['slice'](_0x41b687,_0x42aa88+0x1);return _0x3764fc;}else _0x1410f7=_0x48c458[_0x16afc2(0x41a)]||_0x16afc2(0x6be),_0x51c7e8=_0xc8ac6[_0x16afc2(0x184)][_0x16afc2(0xc1f)]+_0x16afc2(0x7a4);}function _0x27993d(_0x5dd16c,_0x2c9404,_0xa5b924){const _0x36eb3b=_0x3b741d,_0x326199=new Map(_0x2c9404[_0x36eb3b(0x257)](_0x33370a=>[String(_0x33370a['id']),_0x33370a])),_0x10d0dd=_0x1e1d62=>String(_0x1e1d62||'')['toLowerCase']()[_0x36eb3b(0x6ac)](/\s+/g,''),_0x1fdd12=new Map(_0x2c9404[_0x36eb3b(0x257)](_0x522981=>[_0x10d0dd(_0x522981[_0x36eb3b(0x41a)]),_0x522981])),_0x54d9c7=new Set(_0xa5b924),_0x16d4a2={'events':[]};for(const _0x1be1f0 of _0x5dd16c?.[_0x36eb3b(0x3cd)]||[]){if(_0x36eb3b(0xc13)!==_0x36eb3b(0xc13))_0x52a5c3(_0x198189);else{const _0x5141db=_0x1be1f0[_0x36eb3b(0x2fb)]??_0x1be1f0[_0x36eb3b(0x433)]??_0x1be1f0[_0x36eb3b(0x5b9)]??_0x1be1f0[_0x36eb3b(0x319)]??_0x1be1f0[_0x36eb3b(0xcd4)]??_0x1be1f0[_0x36eb3b(0x41a)];if(!_0x5141db)continue;let _0x44737f=_0x326199[_0x36eb3b(0x1f8)](String(_0x5141db))||_0x1fdd12[_0x36eb3b(0x1f8)](_0x10d0dd(_0x5141db));if(!_0x44737f)continue;const _0x5b03dd=(_0x1be1f0[_0x36eb3b(0xa00)]||_0x1be1f0[_0x36eb3b(0x711)]||'text')[_0x36eb3b(0x196)]();if(_0x5b03dd===_0x36eb3b(0xd29)){const _0x1c5ace=(_0x1be1f0[_0x36eb3b(0xd29)]??_0x1be1f0[_0x36eb3b(0x187)]??_0x1be1f0[_0x36eb3b(0x61a)]??_0x1be1f0['tag'])?.['trim']();if(_0x1c5ace&&_0x54d9c7[_0x36eb3b(0x403)](_0x1c5ace))_0x36eb3b(0x4d7)!==_0x36eb3b(0x4d7)?(_0x42ced1[_0x36eb3b(0x5ec)]=_0x1f9a9e[_0x36eb3b(0xa24)][_0x36eb3b(0xbda)],delete _0xdf3c01[_0x36eb3b(0xa24)][_0x36eb3b(0xbda)]):_0x16d4a2['events'][_0x36eb3b(0xb47)]({'senderId':_0x44737f['id'],'kind':_0x36eb3b(0xd29),'sticker':_0x1c5ace});else{const _0x138a37=String(_0x1be1f0['content']??_0x1be1f0[_0x36eb3b(0x685)]??'')['trim']()||_0x36eb3b(0xc1b)+(_0x1c5ace||_0x36eb3b(0x481))+']';if(_0x138a37)_0x16d4a2[_0x36eb3b(0x3cd)][_0x36eb3b(0xb47)]({'senderId':_0x44737f['id'],'kind':_0x36eb3b(0x685),'content':_0x138a37});}}else{if(_0x5b03dd===_0x36eb3b(0x64e)&&_0x1be1f0[_0x36eb3b(0xd09)]&&_0x1be1f0[_0x36eb3b(0x38b)])_0x16d4a2['events']['push']({'senderId':_0x44737f['id'],'kind':'music','songName':_0x1be1f0['songName'],'artist':_0x1be1f0[_0x36eb3b(0x38b)]});else{const _0x15c3f8=String(_0x1be1f0[_0x36eb3b(0x297)]??_0x1be1f0[_0x36eb3b(0x685)]??_0x1be1f0['message']??'')[_0x36eb3b(0xad4)]();if(_0x15c3f8)_0x16d4a2['events']['push']({'senderId':_0x44737f['id'],'kind':'text','content':_0x15c3f8});}}}}return _0x16d4a2;}async function _0x20e054(_0x55358a){const _0x1bfa9f=_0x3b741d;if(!_0x55358a||!Array['isArray'](_0x55358a[_0x1bfa9f(0x3cd)])||_0x55358a['events'][_0x1bfa9f(0xc1f)]===0x0)return;const _0x1539f7=_0x92ccb8=>_0x92ccb8+Math[_0x1bfa9f(0x498)](Math[_0x1bfa9f(0x754)]()*0x190);let _0xbb53c7=0x1f4;for(const _0x2ccd3b of _0x55358a[_0x1bfa9f(0x3cd)]){await new Promise(_0x5b1ddb=>setTimeout(_0x5b1ddb,_0x1539f7(_0xbb53c7))),_0xbb53c7=0x2bc;const _0x39c7b9=_0x543bea[_0x1bfa9f(0xc54)]['at'](-0x1)?.[_0x1bfa9f(0xbc1)]??![],_0x4ec219={'role':_0x1bfa9f(0xbb1),'senderId':_0x2ccd3b[_0x1bfa9f(0x2fb)],'timestamp':Date[_0x1bfa9f(0x63d)](),'isOffline':_0x39c7b9};if(_0x2ccd3b[_0x1bfa9f(0xa00)]===_0x1bfa9f(0x1c1)){Object[_0x1bfa9f(0xa48)](_0x4ec219,{'type':'html','content':_0x2ccd3b['content']}),_0x446b98(_0x4ec219,-0x1),_0x2ee974[_0x1bfa9f(0xd3a)]=_0x2ee974['scrollHeight'];continue;}if(_0x2ccd3b[_0x1bfa9f(0xa00)]===_0x1bfa9f(0xd29)){if(_0x1bfa9f(0x575)===_0x1bfa9f(0x575)){const _0x2fb551=_0x376928[_0x1bfa9f(0xbe8)](_0x5ae87e=>_0x5ae87e[_0x1bfa9f(0x41a)]===_0x2ccd3b[_0x1bfa9f(0xd29)]);_0x2fb551&&('YcsdG'!==_0x1bfa9f(0x7ce)?(Object[_0x1bfa9f(0xa48)](_0x4ec219,{'content':_0x1bfa9f(0x8e6)+_0x2fb551[_0x1bfa9f(0x41a)]+']','displayUrl':_0x2fb551['url']}),_0x543bea[_0x1bfa9f(0xc54)]['push'](_0x4ec219),_0x348dc5(),_0x446b98(_0x4ec219,_0x543bea[_0x1bfa9f(0xc54)][_0x1bfa9f(0xc1f)]-0x1),_0x2ee974['scrollTop']=_0x2ee974[_0x1bfa9f(0x983)]):(_0x5a03f0(_0x66d67f['id']),_0x3c4389(!![])));continue;}else _0x441171[_0x1bfa9f(0xa19)]['add'](_0x1bfa9f(0x215)),_0x12e518['scrollIntoView']({'behavior':_0x1bfa9f(0x972),'block':_0x1bfa9f(0xcc6)});}if(_0x2ccd3b[_0x1bfa9f(0xa00)]===_0x1bfa9f(0x64e)&&_0x2ccd3b['songName']&&_0x2ccd3b[_0x1bfa9f(0x38b)]){const {songName:_0x344c4a,artist:_0x185992}=_0x2ccd3b;Object[_0x1bfa9f(0xa48)](_0x4ec219,{'type':_0x1bfa9f(0x64e),'content':_0x1bfa9f(0x85f)+_0x344c4a+_0x1bfa9f(0x391)+_0x185992+']','songName':_0x344c4a,'artist':_0x185992});try{const _0x2c2cd4=await _0x4ffd26(_0x344c4a,_0x185992);_0x4ec219[_0x1bfa9f(0x372)]=_0x2c2cd4['cover'],_0x4ec219[_0x1bfa9f(0x72e)]=_0x2c2cd4[_0x1bfa9f(0x411)];}catch(_0x1ced05){}_0x543bea['conversationHistory'][_0x1bfa9f(0xb47)](_0x4ec219),_0x348dc5(),_0xe2dd1b();continue;}if(_0x2ccd3b[_0x1bfa9f(0xa00)]==='text'){const _0x48ce52=(_0x2ccd3b[_0x1bfa9f(0x297)]||'')['match'](/^\[引用\|(.*?)\|(.*?)\]\s*/);let _0x387af0=_0x2ccd3b[_0x1bfa9f(0x297)]||'';_0x48ce52&&(_0x4ec219[_0x1bfa9f(0x20f)]={'sender':_0x48ce52[0x1][_0x1bfa9f(0xad4)](),'content':_0x48ce52[0x2][_0x1bfa9f(0xad4)]()},_0x387af0=_0x2ccd3b[_0x1bfa9f(0x297)][_0x1bfa9f(0xc97)](_0x48ce52[0x0][_0x1bfa9f(0xc1f)])[_0x1bfa9f(0xad4)]());const _0x1fcc03=_0x305437(_0x387af0)[_0x1bfa9f(0xb41)](0x0,0x3);for(let _0x47e6b5=0x0;_0x47e6b5<_0x1fcc03[_0x1bfa9f(0xc1f)];_0x47e6b5++){if(_0x1bfa9f(0x88c)===_0x1bfa9f(0x88c)){if(_0x47e6b5>0x0){if(_0x1bfa9f(0x8a8)===_0x1bfa9f(0x996)){const _0x2e1978=_0x38d51f[_0x1bfa9f(0x51d)]('lock-screen-overlay');_0x2e1978&&(_0x2e1978[_0x1bfa9f(0xa19)][_0x1bfa9f(0xab0)](_0x1bfa9f(0x5be)),_0x2e1978['style']['transform']='',_0x2e1978[_0x1bfa9f(0x1e2)][_0x1bfa9f(0x48e)]='');}else await new Promise(_0xe7eec1=>setTimeout(_0xe7eec1,_0x1539f7(0x190))),delete _0x4ec219['quotedMessage'];}_0x4ec219['content']=_0x1fcc03[_0x47e6b5],_0x543bea['conversationHistory'][_0x1bfa9f(0xb47)]({..._0x4ec219}),_0x348dc5(),_0xe2dd1b();}else{_0x1fbc4b['innerHTML']=_0x1bfa9f(0x62b);return;}}}}}async function _0x9ae45c(_0x449435,{force:force=![],delayMs:delayMs=0x0}={}){const _0x2d1394=_0x3b741d;await new Promise(_0x50fec5=>setTimeout(_0x50fec5,0xa));if(!_0x543bea[_0x2d1394(0xaff)][_0x2d1394(0x3ea)]||!_0x543bea['apiSettings']['key']||!_0x543bea[_0x2d1394(0xaff)][_0x2d1394(0xc4b)]){if('pidns'===_0x2d1394(0x3c0))_0x40a578[_0x2d1394(0x9e6)]=_0x439727,_0x197445[_0x2d1394(0x122)]=_0x8a1c1a=>_0x5a82d9(_0x8a1c1a[_0x2d1394(0x446)][_0x2d1394(0xb1e)]);else return _0x48e450(_0x2d1394(0x61f)),![];}const _0x53f54c=_0x577515();if(!_0x53f54c||!_0x449435)return![];const _0x59b89a=_0x2f2ed1(_0x53f54c['id']),_0x1cc4b6=_0x543bea[_0x2d1394(0xc54)]['at'](-0x1)?.[_0x2d1394(0xcd4)]===_0x2d1394(0x8ed);if(!force&&!_0x1cc4b6)return![];const _0x4e1f5b=_0x543bea['conversationHistory']['at'](-0x1)?.['isOffline']??![];if(delayMs)await new Promise(_0x2b7cf3=>setTimeout(_0x2b7cf3,delayMs));_0x4e1f5b?'MQovi'===_0x2d1394(0xb25)?_0xbf2446[_0x2d1394(0x779)]():document['getElementById']('galgame-text')['textContent']=_0x2d1394(0x8fb):'XDMSa'===_0x2d1394(0xbca)?_0x34a664[_0x2d1394(0xbc8)](_0x2d1394(0x779),()=>{const _0x2d54d8=_0x2d1394;_0x2db323(),_0x4a2361(_0x2d54d8(0x48f),_0x2d54d8(0x3fb));}):_0x5e7d91(!![]);let _0x201866='';const _0x10ee6a=_0x577515();if(_0x10ee6a?.[_0x2d1394(0x56f)]?.[_0x2d1394(0x8ce)]){const _0x11a0b3=_0x10ee6a[_0x2d1394(0x56f)],_0x40f044=await _0x30f5fc(_0x11a0b3['songId']);if(_0x40f044&&_0x40f044[_0x2d1394(0x74a)]){const _0xa61a1=_0x79ac8f(_0x40f044[_0x2d1394(0x74a)]);if(_0xa61a1[_0x2d1394(0xc1f)]>0x0){const _0x153e23=_0x44ee83['currentTime'];let _0x4202ee=-0x1;for(let _0x501dbf=0x0;_0x501dbf<_0xa61a1[_0x2d1394(0xc1f)];_0x501dbf++){if(_0x153e23>=_0xa61a1[_0x501dbf][_0x2d1394(0xb92)])_0x4202ee=_0x501dbf;else break;}const _0x55c5e9=_0xa61a1[_0x2d1394(0x257)]((_0x57f3e,_0x20d57a)=>{const _0x59cebb=_0x2d1394;if(_0x59cebb(0x95e)===_0x59cebb(0x4bc))_0x30a104[_0x59cebb(0xb1e)]('导出角色卡失败:',_0x3ca6ad),_0x5034d2(_0x59cebb(0x9bc)+_0x1c6756[_0x59cebb(0x979)]);else{const _0x5b61a6=_0x20d57a===_0x4202ee?_0x59cebb(0xabc):'';return''+_0x5b61a6+_0x57f3e['text'];}})[_0x2d1394(0x4db)]('\x0a'),_0x577af4=_0xa61a1[_0x2d1394(0x257)](_0x494e86=>_0x494e86[_0x2d1394(0x685)])['join']('\x0a'),_0xcde8c6=_0x4202ee>-0x1?_0xa61a1[_0x4202ee][_0x2d1394(0x685)]:_0x2d1394(0x926);_0x201866=(_0x2d1394(0x8af)+_0x11a0b3['artist']+_0x2d1394(0x534)+_0x11a0b3[_0x2d1394(0xd09)]+_0x2d1394(0xcf9)+_0x577af4+_0x2d1394(0x6c2)+_0xcde8c6+_0x2d1394(0xc01))[_0x2d1394(0xad4)]();}}}let _0x3a3833='',_0x180a15='';const _0x5bbce3=_0x543bea[_0x2d1394(0xc54)][_0x2d1394(0xc1f)];if(_0x5bbce3>0x1){const _0x30575a=_0x543bea[_0x2d1394(0xc54)][_0x5bbce3-0x2],_0x1f1728=_0x543bea[_0x2d1394(0xc54)][_0x5bbce3-0x1];if(_0x30575a[_0x2d1394(0xbc1)]===![]&&_0x1f1728[_0x2d1394(0xbc1)]===!![])_0x180a15=_0x2d1394(0x22e)+_0x59b89a[_0x2d1394(0x41a)]+_0x2d1394(0xd39);else _0x30575a[_0x2d1394(0xbc1)]===!![]&&_0x1f1728[_0x2d1394(0xbc1)]===![]&&(_0x180a15=_0x2d1394(0x247)+_0x59b89a[_0x2d1394(0x41a)]+_0x2d1394(0xd0b));}if(_0x4e1f5b){const _0x11b066='normal,\x20happy,\x20angry,\x20sad,\x20shy';_0x3a3833=_0x2d1394(0x77c)+_0x59b89a[_0x2d1394(0x41a)]+'”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从['+_0x11b066+_0x2d1394(0xd55)+_0x449435[_0x2d1394(0x41a)]+_0x2d1394(0x5e4)+_0x11b066+_0x2d1394(0xac4)+_0x11b066+_0x2d1394(0x93c);}else{if(_0x2d1394(0xc1c)!==_0x2d1394(0x1b0))_0x2d1394(0xcea);else{const _0x59af00=_0x23eb29['target'][_0x2d1394(0x668)];_0x1b6587[_0x2d1394(0x68b)](_0x2d1394(0xace)+_0x59af00[_0x2d1394(0x756)]+_0x2d1394(0x262)),!_0x59af00[_0x2d1394(0x53a)]['contains'](_0xcc3936)&&(_0x579783[_0x2d1394(0x68b)](_0x2d1394(0x931)+_0x16b231),_0x59af00['createObjectStore'](_0x40b657,{'keyPath':'id'})),!_0x59af00[_0x2d1394(0x53a)][_0x2d1394(0x9ff)](_0x2d1394(0x24e))&&(_0x5bfa4d[_0x2d1394(0x68b)](_0x2d1394(0x430)),_0x59af00[_0x2d1394(0x46b)](_0x2d1394(0x24e),{'keyPath':'id'})),!_0x59af00['objectStoreNames'][_0x2d1394(0x9ff)](_0x2ca2f8)&&(_0x7e3f72[_0x2d1394(0x68b)]('Creating\x20object\x20store:\x20'+_0x2a5be3),_0x59af00[_0x2d1394(0x46b)](_0x1ce027,{'keyPath':'id'}));}}const {omniText:_0x52af68}=_0x201955(_0x449435['id'],_0x53f54c['id']),_0x418479=_0x7dad63(),_0x251bad=_0x5f3db6(_0x449435['id']),_0x4881fc=_0x18956d(_0x449435['id']),_0x4620f3=_0x402406(_0x449435['id']),_0x45a1c3=await _0xf54e02(_0x449435['id']),_0x4ace83=typeof _0x137e00===_0x2d1394(0x2b1)?_0x137e00[_0x2d1394(0x9c9)](_0x2d1394(0x84b),_0x449435[_0x2d1394(0x41a)])[_0x2d1394(0x9c9)](_0x2d1394(0x4bf),_0x59b89a[_0x2d1394(0x41a)]||'用户'):'',_0x478682=_0x324dd8()[_0x2d1394(0x257)](_0x1f4497=>_0x1f4497[_0x2d1394(0x41a)])[_0x2d1394(0x4db)](',\x20');let _0x199650='';if(_0x449435[_0x2d1394(0xc49)]&&_0x449435['linkedWorldBookIds'][_0x2d1394(0xc1f)]>0x0){const _0x195a34=_0x449435[_0x2d1394(0xc49)]['map'](_0x5a6dba=>_0x543bea[_0x2d1394(0x41e)]['find'](_0x27cb53=>_0x27cb53['id']===_0x5a6dba))[_0x2d1394(0x78c)](Boolean)[_0x2d1394(0x257)](_0x324a98=>_0x2d1394(0x31e)+_0x324a98[_0x2d1394(0x41a)]+'\x0a'+_0x324a98[_0x2d1394(0x297)])[_0x2d1394(0x4db)]('');if(_0x195a34)_0x199650=_0x2d1394(0x511)+_0x195a34;}const _0x3ebc31=_0x59b89a['persona']?_0x2d1394(0x5ea)+_0x59b89a[_0x2d1394(0x41a)]+_0x2d1394(0x6a7)+_0x59b89a[_0x2d1394(0x367)]:'';let _0x48cb06='';const _0x577f76=new Date(),_0x429fbb=_0x2cf2bf(_0x449435['id']);_0x48cb06='\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a',_0x48cb06+='-\x20**当前精确时间**:\x20'+_0x577f76[_0x2d1394(0x5f4)](_0x2d1394(0xbd4),{'dateStyle':_0x2d1394(0xd0f),'timeStyle':_0x2d1394(0x90a)})+'\x0a';if(_0x429fbb){const _0x2d5e3b=new Date(_0x429fbb[_0x2d1394(0x11f)]),_0x410043=_0x1eac91(_0x2d5e3b);_0x48cb06+=_0x2d1394(0xc6f)+_0x410043+'\x0a';const _0x454981=_0x577f76[_0x2d1394(0xb12)](),_0x47c1be=_0x2d5e3b[_0x2d1394(0xb12)](),_0x52ffc3=new Date();_0x52ffc3[_0x2d1394(0x8e2)](_0x577f76[_0x2d1394(0x3d6)]()-0x1);const _0x564920=_0x52ffc3[_0x2d1394(0xb12)]();if(_0x454981===_0x47c1be){const _0x173abb=(_0x577f76-_0x2d5e3b)/(0x3e8*0x3c);_0x173abb<0x3c?_0x48cb06+='-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a':_0x2d1394(0x358)!==_0x2d1394(0x6b2)?_0x48cb06+=_0x2d1394(0xd08)+Math['round'](_0x173abb/0x3c)+_0x2d1394(0xb3b):_0x1d559a[_0x2d1394(0x76f)](_0x2d1394(0xb99),_0x2d1394(0x343));}else{if(_0x564920===_0x47c1be)_0x2d1394(0x54c)===_0x2d1394(0x7d0)?_0x1d21ef=![]:_0x48cb06+=_0x2d1394(0x325);else{const _0xb0b981=Math[_0x2d1394(0xcfd)]((_0x577f76-_0x2d5e3b)/(0x3e8*0x3c*0x3c*0x18));_0x48cb06+=_0x2d1394(0x59a)+_0xb0b981+_0x2d1394(0x7ca);}}}else'OikhQ'===_0x2d1394(0x8b7)?_0x48cb06+=_0x2d1394(0x434):_0x3cdbc5['style'][_0x2d1394(0x930)]=_0x2d1394(0x2f6);const _0x4be934=('\x0a'+_0x3a3833+_0x2d1394(0x635)+_0x449435[_0x2d1394(0x41a)]+'】进行回复。\x0a不要替其他角色续写台词，不要输出\x22'+_0x449435[_0x2d1394(0x41a)]+':\x22\x20或\x22['+_0x449435[_0x2d1394(0x41a)]+']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：['+_0x478682+_0x2d1394(0x9f2)+_0x4ace83+'\x0a')[_0x2d1394(0xad4)](),_0x4e7a7f=[{'role':_0x2d1394(0xacc),'content':_0x4be934}],_0x235bff=(_0x2d1394(0xc96)+(_0x449435['persona']||_0x2d1394(0x4cd))+'\x0a'+_0x3ebc31+'\x20\x0a'+_0x52af68+'\x0a'+_0x418479+'\x0a'+_0x251bad+'\x0a'+_0x4881fc+_0x2d1394(0x1f0)+_0x4620f3+_0x2d1394(0xc9b)+_0x45a1c3+'\x20\x0a#\x20当前情景\x0a'+_0x201866+'\x0a'+_0x48cb06+'\x0a'+_0x199650+'\x0a')[_0x2d1394(0xad4)]();_0x235bff[_0x2d1394(0x6ac)](/#.*|\s/g,'')&&(_0x4e7a7f[_0x2d1394(0xb47)]({'role':_0x2d1394(0x8ed),'content':_0x235bff}),_0x4e7a7f[_0x2d1394(0xb47)]({'role':_0x2d1394(0xbb1),'content':_0x2d1394(0x1f5)}));const _0x268b2f=_0x543bea[_0x2d1394(0xc9f)]?.['perChatContextLines']??0x64,_0x148616=_0x543bea[_0x2d1394(0xc54)]['slice'](-_0x268b2f);for(const _0x4ba5a6 of _0x148616){const _0x422cf3=_0x4ba5a6['role']==='ai'||_0x4ba5a6['role']==='assistant'?_0x2d1394(0xbb1):'user';let _0x39e51d={'role':_0x422cf3,'content':_0x4ba5a6[_0x2d1394(0x297)]},_0x187165=!!_0x4ba5a6[_0x2d1394(0x297)];if(_0x4ba5a6[_0x2d1394(0x3b2)]&&_0x4ba5a6[_0x2d1394(0x297)][_0x2d1394(0x32d)]('表情')){if(_0x2d1394(0x3f9)!==_0x2d1394(0x3f9))_0x5f19ea['pause']();else{const _0x498cc1=_0x4ba5a6['content']['match'](/：(.*?)]$/);_0x39e51d[_0x2d1394(0x297)]=_0x2d1394(0xc1b)+(_0x498cc1?_0x498cc1[0x1]:_0x2d1394(0x481))+']',_0x4e7a7f[_0x2d1394(0xb47)](_0x39e51d);}}else{if(_0x2d1394(0x935)==='aMuoW'){let _0x5e2877=null;if(_0x4ba5a6['image'])_0x2d1394(0x549)==='DYBdx'?_0x5e2877=_0x4ba5a6[_0x2d1394(0x55b)]:(_0x4beb3a[_0x2d1394(0x41a)]=_0x54320f,_0x3cc5bd[_0x2d1394(0x297)]=_0x36a2f5,_0x587241['categoryId']=_0x475912);else{if(_0x4ba5a6['imageId'])try{if(_0x2d1394(0xb15)!=='HpYbX'){const _0x3f333c=await _0x54e221(_0x4ba5a6[_0x2d1394(0x7c2)]);_0x3f333c&&(_0x5e2877=await _0xa161cf(_0x3f333c));}else _0x367f7c['addEventListener'](_0x2d1394(0x779),()=>{const _0xf6ddb1=_0x2d1394;if(_0x27e691['musicPlaylist'][_0xf6ddb1(0xc1f)]===0x0)return;_0x2d836d[_0xf6ddb1(0x786)]=(_0x13c756['currentlyPlayingIndex']+0x1)%_0x22c3da[_0xf6ddb1(0x61b)][_0xf6ddb1(0xc1f)];const _0x399f27=_0x48fd31[_0xf6ddb1(0x61b)][_0x42bb06['currentlyPlayingIndex']]['id'];_0x5e3c71(_0x399f27,_0x3d39ae['musicPlaylist'][_0xf6ddb1(0x257)](_0xc48d3f=>_0xc48d3f['id']));});}catch(_0xb16060){if('CFVwf'!==_0x2d1394(0x30e))console[_0x2d1394(0xb1e)](_0x2d1394(0x120),_0xb16060);else{const _0x40b69c=new _0x4d8c65(_0x3d2958[_0x2d1394(0x11f)]),_0xb1ae40=_0x45ab89(_0x40b69c[_0x2d1394(0xc3f)]()+0x1)[_0x2d1394(0xa9f)](0x2,'0'),_0x543e5e=_0x435448(_0x40b69c['getDate']())[_0x2d1394(0xa9f)](0x2,'0'),_0x5afa27=_0x478138(_0x40b69c[_0x2d1394(0x8bb)]())[_0x2d1394(0xa9f)](0x2,'0'),_0x4e8277=_0x5c4c8b(_0x40b69c[_0x2d1394(0x5f9)]())['padStart'](0x2,'0'),_0x91ebe1=_0xb1ae40+'-'+_0x543e5e+'\x20'+_0x5afa27+':'+_0x4e8277,_0x2efe3f=_0x3c64a4[_0x2d1394(0xbc1)]?_0x2d1394(0x2e6):_0x2d1394(0x7f6);if(_0x411e5b[_0x2d1394(0x297)]){const _0x25c523=_0x539ccd[_0x2d1394(0xbc1)]?_0x16cdb5(_0x30ee29[_0x2d1394(0x297)])[_0x2d1394(0xad4)]()[_0x2d1394(0x6ac)](/\n+/g,'\x20'):_0x341987(_0x58f454[_0x2d1394(0x297)])[_0x2d1394(0xad4)]();if(_0x25c523)_0x3a69d4[_0x2d1394(0xb47)](_0x2efe3f+'\x20['+_0x91ebe1+_0x2d1394(0x98c)+_0x411036(_0x3d8df5)+']\x20'+_0x25c523);}}}}if(_0x5e2877){if(_0x2d1394(0xcf6)!==_0x2d1394(0x438))_0x39e51d[_0x2d1394(0x55b)]=_0x5e2877,_0x187165=!![];else{const _0x5a97a1=_0x5d972c[_0x2d1394(0x259)][_0x2d1394(0x1bc)]();_0x74c1bc[_0x2d1394(0x32a)]=_0x5a97a1[_0x2d1394(0x319)]===_0x2d1394(0x4b3)?'旁白':_0x5a97a1[_0x2d1394(0x319)],_0x104899[_0x2d1394(0x32a)]=_0x5a97a1[_0x2d1394(0x3c2)],_0x5a97a1[_0x2d1394(0x319)]!==_0x2d1394(0x4b3)&&_0x12a6ce(_0x54b8a1[_0x2d1394(0x80c)],_0x5a97a1[_0x2d1394(0x6c0)]);}}_0x187165&&_0x4e7a7f['push'](_0x39e51d);}else{_0x39b6b(_0x2d1394(0x1f4));return;}}}try{if(_0x2d1394(0x6fb)==='UBiuk')_0x184417('错误:\x20'+_0x35ccb0[_0x2d1394(0x979)]);else{const _0x27c444=await _0x3a4cad(_0x4e7a7f);if(!_0x27c444)return![];if(_0x4e1f5b)try{if('ByeKy'===_0x2d1394(0x17f)){let _0x41f894=_0x27c444['trim']();const _0x37f2d8=_0x41f894[_0x2d1394(0x606)](/(\[[\s\S]*\])/);_0x37f2d8&&(_0x2d1394(0xd4b)===_0x2d1394(0xd4b)?_0x41f894=_0x37f2d8[0x1]:_0x33f63e=_0x33863f['id']);const _0x23be5e=JSON[_0x2d1394(0x576)](_0x41f894);if(Array[_0x2d1394(0x8e1)](_0x23be5e)){if('mbNxI'!=='WCNyC'){_0x543bea['activeMeetingScriptQueue']=[..._0x23be5e],_0x543bea['characterLastScripts'][_0x449435['id']]=[..._0x23be5e],_0x5498f0();const _0x24307e=_0x23be5e['map'](_0xe9ef6d=>_0xe9ef6d['speaker']===_0x2d1394(0x4b3)?_0xe9ef6d[_0x2d1394(0x3c2)]:_0xe9ef6d[_0x2d1394(0x319)]+':\x20'+_0xe9ef6d[_0x2d1394(0x3c2)])[_0x2d1394(0x4db)]('\x0a\x0a');_0x543bea[_0x2d1394(0xc54)]['push']({'role':'assistant','senderId':_0x449435['id'],'timestamp':Date['now'](),'isOffline':!![],'content':_0x24307e});}else _0x34026d[_0x2d1394(0xa19)][_0x2d1394(0xab0)]('show');}}else _0x413e72(),_0x54cf88(_0x2d1394(0x16d),_0x2d1394(0x3fb));}catch(_0x3289b3){console[_0x2d1394(0xb1e)](_0x2d1394(0x90c),_0x3289b3,_0x2d1394(0x648),_0x27c444),_0x543bea['conversationHistory']['push']({'role':_0x2d1394(0xbb1),'senderId':_0x449435['id'],'timestamp':Date['now'](),'isOffline':!![],'content':'[AI返回了无法解析的剧本:\x20'+_0x27c444+']'});}else{const _0x94b7ab=_0x3b679a(_0x27c444),_0x3d1586=_0x94b7ab[_0x2d1394(0x257)](_0x4b1a46=>{const _0xe26da6=_0x2d1394,_0x114502=_0x4b1a46[_0xe26da6(0xad4)](),_0x434007=_0x114502[_0xe26da6(0x606)](/^\[sticker:(.*?)\]$/),_0x251afb=_0x114502[_0xe26da6(0x606)](/^\[transfer:([\d.]+)\|(.*?)\]$/),_0x40279b=_0x114502[_0xe26da6(0x606)](/^\[music:(.*?)\|(.*?)\]$/),_0x2257ce=_0x114502[_0xe26da6(0x606)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/),_0x1ca75f=_0x114502['match'](/^\[html\]([\s\S]*)\[\/html\]$/);if(_0x1ca75f)return{'type':_0xe26da6(0x1c1),'content':_0x1ca75f[0x1][_0xe26da6(0xad4)]()};else{if(_0x40279b){if('PNRjV'===_0xe26da6(0x6f2))return{'type':_0xe26da6(0x64e),'songName':_0x40279b[0x1][_0xe26da6(0xad4)](),'artist':_0x40279b[0x2]['trim']()};else _0xa7036e(_0x7760c0,_0x137d10,!![]);}else{if(_0x434007)return{'type':'sticker','name':_0x434007[0x1]['trim']()};else{if(_0x2257ce)return{'type':_0xe26da6(0x6d6),'eventType':_0x2257ce[0x1]['trim'](),'eventDate':_0x2257ce[0x2]['trim'](),'eventContent':_0x2257ce[0x3]['trim']()};else{if(_0x251afb){const _0x88301a=parseFloat(_0x251afb[0x1]),_0x4cdbb1=_0x251afb[0x2]['trim'](),_0x3bb49e=_0x2f2ed1(_0x543bea[_0xe26da6(0x886)]);let _0x38810a=null;if(_0x4cdbb1===_0x3bb49e[_0xe26da6(0x41a)])_0x38810a=_0x3bb49e['id'];else{if(_0xe26da6(0x545)!==_0xe26da6(0x8d3)){const _0x399869=_0x577515();if(_0x399869[_0xe26da6(0x711)]===_0xe26da6(0x91b)){const _0xa6a0cf=_0x543bea[_0xe26da6(0x24d)][_0xe26da6(0xbe8)](_0x26f432=>_0x399869[_0xe26da6(0x184)][_0xe26da6(0x32d)](_0x26f432['id'])&&_0x26f432[_0xe26da6(0x41a)]===_0x4cdbb1);if(_0xa6a0cf)_0x38810a=_0xa6a0cf['id'];}}else{const _0x75b9bf=_0xc7798f[_0xe26da6(0x446)]['dataset']['id'];_0x4983a1('确定要删除这笔记录吗？')[_0xe26da6(0x842)](_0x1c8191=>{_0x1c8191&&_0x4606ad(_0x75b9bf);});}}if(_0x38810a)return{'type':'transfer','amount':_0x88301a,'recipientId':_0x38810a,'senderId':_0x449435['id']};else return{'type':_0xe26da6(0x685),'content':'(想转账给“'+_0x4cdbb1+_0xe26da6(0x27e)};}else{if(_0x114502){if(_0xe26da6(0x8cc)!=='IGZLv')return{'type':_0xe26da6(0x685),'content':_0x114502};else{let _0x36594a=_0x54639c[_0xe26da6(0x820)](_0xe26da6(0x1e3));!_0x36594a&&(_0x36594a=_0x4b82a5['createElement']('p'),_0x36594a[_0xe26da6(0xa9d)]=_0xe26da6(0x1d4),_0x36594a[_0xe26da6(0x32a)]='对方正在行动中...',_0x45f9de['appendChild'](_0x36594a));}}}}}}}return null;})[_0x2d1394(0x78c)](Boolean),_0x165b92=async _0x284de6=>{const _0x2eba63=_0x2d1394,_0x1aa13a={'role':_0x2eba63(0xbb1),'senderId':_0x449435['id'],'timestamp':Date[_0x2eba63(0x63d)](),'isOffline':_0x4e1f5b};if(_0x284de6[_0x2eba63(0x711)]===_0x2eba63(0x64e)){if(_0x2eba63(0xcd6)!==_0x2eba63(0xa94)){const {songName:_0x3392c5,artist:_0x37b437}=_0x284de6;_0x1aa13a[_0x2eba63(0x711)]=_0x2eba63(0x64e),_0x1aa13a[_0x2eba63(0x297)]=_0x2eba63(0x85f)+_0x3392c5+_0x2eba63(0x391)+_0x37b437+']';try{const _0x3aeff3=await _0x4ffd26(_0x3392c5,_0x37b437);Object[_0x2eba63(0xa48)](_0x1aa13a,{'songName':_0x3392c5,'artist':_0x37b437,'coverUrl':_0x3aeff3['cover'],'playableUrl':_0x3aeff3[_0x2eba63(0x411)]});}catch(_0x3e5342){Object[_0x2eba63(0xa48)](_0x1aa13a,{'songName':_0x3392c5,'artist':_0x37b437,'coverUrl':null,'playableUrl':null});}}else _0x11c52d[_0x2eba63(0x32a)]=_0x2eba63(0x21f);}else{if(_0x284de6['type']===_0x2eba63(0xd29)){if(_0x2eba63(0x844)===_0x2eba63(0x739)){const _0x52edc2=_0x27e98f[_0x2eba63(0xa24)][_0x2eba63(0x538)];!_0x55030e[_0x2eba63(0x32d)](_0x52edc2)&&_0x35aa2f[_0x2eba63(0xb47)](_0x52edc2);}else{const _0x430bd5=_0x376928[_0x2eba63(0xbe8)](_0xf5d94c=>_0xf5d94c[_0x2eba63(0x41a)]===_0x284de6[_0x2eba63(0x41a)]);if(_0x430bd5)Object[_0x2eba63(0xa48)](_0x1aa13a,{'content':_0x2eba63(0x8e6)+_0x430bd5['name']+']','displayUrl':_0x430bd5[_0x2eba63(0x411)]});else _0x1aa13a[_0x2eba63(0x297)]='[sticker:'+_0x284de6[_0x2eba63(0x41a)]+']';}}else{if(_0x284de6[_0x2eba63(0x711)]===_0x2eba63(0x68e)){const _0xc2cfe5=_0x284de6[_0x2eba63(0x458)]===_0x2f2ed1(_0x543bea[_0x2eba63(0x886)])['id']?_0x2f2ed1(_0x543bea[_0x2eba63(0x886)]):_0x509294(_0x284de6[_0x2eba63(0x458)]);Object[_0x2eba63(0xa48)](_0x1aa13a,{'type':_0x2eba63(0x68e),'amount':_0x284de6['amount'],'recipientId':_0x284de6['recipientId'],'content':_0x2eba63(0xc92)+(_0xc2cfe5?.[_0x2eba63(0x41a)]||'未知')+_0x2eba63(0x933)+_0x284de6[_0x2eba63(0x650)]+']'});}else{if(_0x284de6[_0x2eba63(0x711)]===_0x2eba63(0x6d6)){const _0x11792e=_0x2f2ed1(_0x53f54c['id']);if(!_0x11792e||!_0x11792e['id']){if(_0x2eba63(0xd01)!==_0x2eba63(0xd01))_0x90e42c(),_0x3d9be9['click']();else return console['error']('AI\x20试图创建事件，但找不到有效的用户ID。'),null;}_0x543bea[_0x2eba63(0x21c)][_0x2eba63(0xb47)]({'id':_0x2eba63(0xad0)+Date['now'](),'date':_0x284de6['eventDate'],'type':_0x284de6[_0x2eba63(0x965)],'content':_0x284de6[_0x2eba63(0x6af)],'userId':_0x11792e['id'],'createdBy':'ai'}),_0x1a0f1f(),_0x10fe67(),_0x28f1be();const _0x242d9c=_0x509294(_0x449435['id']);_0x242d9c&&_0x284de6[_0x2eba63(0x965)]===_0x2eba63(0xaa1)&&(_0x2eba63(0x328)===_0x2eba63(0x328)?_0x48e450(_0x2eba63(0x632)+_0x242d9c[_0x2eba63(0x41a)]+'\x20添加了新的纪念日：'+_0x284de6[_0x2eba63(0x6af)]):_0xb3ec5e[_0x2eba63(0xa19)][_0x2eba63(0x25d)]('show-chat-view'));return{'role':_0x2eba63(0xbb1),'senderId':_0x449435['id'],'timestamp':Date[_0x2eba63(0x63d)](),'isOffline':_0x4e1f5b,'content':null};return{'role':_0x2eba63(0xbb1),'senderId':_0x449435['id'],'timestamp':Date[_0x2eba63(0x63d)](),'isOffline':_0x4e1f5b,'content':null};}else{const _0x492c07=_0x5bebc0(_0x284de6[_0x2eba63(0x297)]);Object['assign'](_0x1aa13a,{'content':_0x492c07[_0x2eba63(0x297)],'quotedMessage':_0x492c07[_0x2eba63(0x20f)]});}}}}return _0x1aa13a;},_0x1db127=await Promise[_0x2d1394(0x71a)](_0x3d1586[_0x2d1394(0x257)](_0x165b92));for(const _0x4d0dd8 of _0x1db127){if('UMyGF'===_0x2d1394(0x90b))_0x1e3d9d[_0x2d1394(0xb1e)]('在“一起听”邀请中，净化封面失败:',_0x3365fa);else{if(_0x4d0dd8[_0x2d1394(0x711)]===_0x2d1394(0x1c1))_0x446b98(_0x4d0dd8,-0x1),_0x2ee974[_0x2d1394(0xd3a)]=_0x2ee974[_0x2d1394(0x983)];else(_0x4d0dd8[_0x2d1394(0x297)]||_0x4d0dd8[_0x2d1394(0x3b2)]||_0x4d0dd8[_0x2d1394(0x711)]===_0x2d1394(0x64e)||_0x4d0dd8[_0x2d1394(0x20f)])&&(await new Promise(_0xa00983=>setTimeout(_0xa00983,0x12c+Math[_0x2d1394(0x754)]()*0x190)),_0x543bea['conversationHistory'][_0x2d1394(0xb47)](_0x4d0dd8),_0x446b98(_0x4d0dd8,_0x543bea[_0x2d1394(0xc54)][_0x2d1394(0xc1f)]-0x1),_0x2ee974[_0x2d1394(0xd3a)]=_0x2ee974[_0x2d1394(0x983)]);}}}return _0x348dc5(),!![];}}catch(_0x458b59){if(_0x458b59[_0x2d1394(0x41a)]!==_0x2d1394(0x8a3)){if(_0x2d1394(0x412)!==_0x2d1394(0xbbf)){console[_0x2d1394(0xb1e)](_0x2d1394(0x9c3),_0x458b59);const _0x36d5a3={'role':'assistant','content':_0x2d1394(0xcdc)+_0x458b59['message'],'senderId':_0x449435['id'],'isOffline':_0x4e1f5b};_0x543bea['conversationHistory'][_0x2d1394(0xb47)](_0x36d5a3),_0xe2dd1b();}else{_0x29dc46[_0x2d1394(0x446)]['value']='';return;}}return![];}finally{_0x5e7d91(![]);}}async function _0x34a11f(){const _0x2ca312=_0x3b741d,_0x1358df=_0x577515();if(!_0x1358df||_0x1358df[_0x2ca312(0x711)]!==_0x2ca312(0x5fc)){if(_0x2ca312(0x2eb)!=='PrWfn'){_0x48e450(_0x2ca312(0x688));return;}else _0x22ccc5();}if(_0x543bea[_0x2ca312(0xd1f)]){_0x48e450(_0x2ca312(0xbba));return;}const _0x39484f=await _0x44efa2(_0x2ca312(0xd02));if(!_0x39484f)return;_0x2ee484(!![],_0x2ca312(0x2f2)),_0x3bb4a5[_0x2ca312(0x90f)]='',_0xc9b4fc['classList'][_0x2ca312(0x25d)](_0x2ca312(0x6db)),_0x543bea[_0x2ca312(0xd1f)]=!![];try{const _0x6f3d5e=_0x509294(_0x1358df[_0x2ca312(0x184)][0x0]),_0x212117=_0x2f2ed1(_0x1358df['id']),_0x237fc0=_0x3e4812(_0x1358df['id']);if(_0x237fc0[_0x2ca312(0xc1f)]===0x0){if(_0x2ca312(0xa70)===_0x2ca312(0xa70)){_0x3bb4a5[_0x2ca312(0x90f)]='#\x20记录是空的，没什么好总结的。';return;}else _0x1a06fb[_0x2ca312(0xa10)](),_0x238b34[_0x2ca312(0xa19)][_0x2ca312(0x52b)]('visible'),_0x2cdb30[_0x2ca312(0xa19)][_0x2ca312(0x52b)](_0x2ca312(0x206));}const _0x481e37=_0x237fc0['map'](_0xeab33e=>{const _0x4b709f=_0x2ca312,_0x4d2896=new Date(_0xeab33e[_0x4b709f(0x11f)]),_0x5eec51=_0x4d2896[_0x4b709f(0x5f6)]()+'-'+String(_0x4d2896['getMonth']()+0x1)[_0x4b709f(0xa9f)](0x2,'0')+'-'+String(_0x4d2896[_0x4b709f(0x3d6)]())[_0x4b709f(0xa9f)](0x2,'0'),_0x10034d=String(_0x4d2896['getHours']())[_0x4b709f(0xa9f)](0x2,'0')+':'+String(_0x4d2896[_0x4b709f(0x5f9)]())[_0x4b709f(0xa9f)](0x2,'0');let _0x1eca39='未知';_0xeab33e[_0x4b709f(0xcd4)]==='user'?_0x1eca39=_0x212117[_0x4b709f(0x41a)]:_0x4b709f(0x6d7)===_0x4b709f(0xae5)?(_0x17673b[_0x4b709f(0xb1e)](_0x4b709f(0x173),_0x22e8e0),_0xd3ab1a('保存失败:\x20'+_0xbb5977[_0x4b709f(0x979)])):_0x1eca39=_0x6f3d5e[_0x4b709f(0x41a)];let _0x4c895b=_0xeab33e[_0x4b709f(0x297)];if(_0xeab33e[_0x4b709f(0x3b2)])_0x4c895b='[发送了表情]';if(_0xeab33e['imageId'])_0x4c895b='[发送了图片]';return'['+_0x5eec51+'\x20'+_0x10034d+_0x4b709f(0x98c)+_0x1eca39+_0x4b709f(0x578)+_0x4c895b;})[_0x2ca312(0x4db)]('\x0a'),_0x5a2cae=_0x251dfe[_0x2ca312(0x6ac)](/{charName}/g,_0x6f3d5e[_0x2ca312(0x41a)])['replace'](/{userName}/g,_0x212117[_0x2ca312(0x41a)]),_0x2e6e75=[{'role':_0x2ca312(0xacc),'content':_0x5a2cae},{'role':_0x2ca312(0x8ed),'content':_0x481e37}],_0x14884d=await _0x3a4cad(_0x2e6e75);_0x3bb4a5[_0x2ca312(0x90f)]=_0x14884d||_0x2ca312(0x460),_0x3bb4a5[_0x2ca312(0xd3a)]=0x0;}catch(_0x2da4ad){console[_0x2ca312(0xb1e)](_0x2ca312(0x74b),_0x2da4ad),_0x3bb4a5[_0x2ca312(0x90f)]=_0x2ca312(0x839)+_0x2da4ad[_0x2ca312(0x979)];}finally{if(_0x2ca312(0xc98)===_0x2ca312(0xc98))_0x2ee484(![]),_0x543bea[_0x2ca312(0xd1f)]=![];else{if(_0x312b66)_0x538cda[_0x2ca312(0x2d9)]=_0x366229[_0x2ca312(0xcb2)](_0xcd5065);}}}async function _0x183583(){const _0x522055=_0x3b741d;if('rJwzm'!==_0x522055(0x9ef)){console[_0x522055(0x68b)](_0x522055(0x284));if(!_0x543bea['apiSettings']['endpoint']||!_0x543bea['apiSettings'][_0x522055(0xc7f)]||!_0x543bea[_0x522055(0xaff)][_0x522055(0xc4b)]){_0x48e450(_0x522055(0x61f));return;}const _0x5858e6=_0x543bea['conversationHistory']['at'](-0x1)?.[_0x522055(0xcd4)]===_0x522055(0x8ed);if(!_0x5858e6||_0x543bea['isGenerating'])return;const _0x34d797=_0x577515();if(!_0x34d797)return;_0x543bea[_0x522055(0xd1f)]=!![],_0x5e7d91(!![]);try{if(_0x522055(0x4da)===_0x522055(0x8b1))return _0x206be0(_0x522055(0x61f)),![];else{if(_0x34d797[_0x522055(0x711)]===_0x522055(0x5fc)){const _0xb8be0e=_0x509294(_0x34d797['participantIds'][0x0]);console[_0x522055(0x68b)](_0x522055(0xb1d));if(_0xb8be0e)await _0x9ae45c(_0xb8be0e,{'force':!![]});}else{const _0x38eb2b=await _0x261b1f();if(_0x38eb2b&&_0x38eb2b['events']?.[_0x522055(0xc1f)])_0x522055(0xc4d)==='nCZOF'?await _0x20e054(_0x38eb2b):_0xf15ba3(()=>{const _0x1f798a=_0x522055;_0x17a06f[_0x1f798a(0x1e2)][_0x1f798a(0x48e)]='1';});else{console[_0x522055(0xc52)](_0x522055(0x15e));const _0x3f4f3=_0x34d797[_0x522055(0x184)][_0x522055(0x257)](_0x509294)[_0x522055(0x78c)](Boolean);if(!_0x3f4f3[_0x522055(0xc1f)])return;let _0x1a96e5=0x0;for(const _0xa69c35 of _0x3f4f3){_0x9ae45c(_0xa69c35,{'force':!![],'delayMs':_0x1a96e5}),_0x1a96e5+=0x1f4;}}}}}catch(_0x46bd79){_0x46bd79[_0x522055(0x41a)]!==_0x522055(0x8a3)&&(_0x522055(0xbaf)===_0x522055(0xbaf)?(console['error'](_0x522055(0xacd),_0x46bd79),_0x446b98({'role':_0x522055(0xbb1),'content':'错误:\x20'+_0x46bd79['message']},_0x543bea['conversationHistory'][_0x522055(0xc1f)]-0x1)):_0x57b9e0=_0x43ba1a);}finally{_0x543bea[_0x522055(0xd1f)]=![],_0x5e7d91(![]);}}else _0x3bad8f[_0xb24b77]=[];}function _0x508e8e(_0x1aa842,_0x342a90){const _0x2e880c=_0x3b741d;if(_0x2e880c(0xadf)!=='WKihe')_0x5dab9a={'title':_0x1e963c['songName'],'artist':_0x5c751b[_0x2e880c(0x38b)],'cover':_0x32c5f9[_0x2e880c(0x372)]||(_0x1db3da[_0x2e880c(0x28a)]?'db:'+_0x1a73a4[_0x2e880c(0x28a)]:_0x55ed51),'isFromLibrary':!![]},_0x342cba[_0x2e880c(0x2d9)]=_0x2e7c9d[_0x2e880c(0x72e)],_0x1e0d90[_0x2e880c(0x152)](),_0x5aad46[_0x2e880c(0x786)]=_0xf90554['musicPlaylist'][_0x2e880c(0xc58)](_0x45016b=>_0x45016b['id']===_0x30fe8f['id']),_0xafff78();else{const _0x5b7d05=_0x342a90[_0x2e880c(0x196)](),_0x52a82d=_0x1aa842[_0x2e880c(0x196)]();if(_0x5b7d05[_0x2e880c(0xca0)]('claude'))return _0x2e880c(0xa96);if(_0x52a82d[_0x2e880c(0x32d)](_0x2e880c(0x83d)))return _0x2e880c(0xa96);if(_0x52a82d[_0x2e880c(0x32d)](_0x2e880c(0x5f3)))return _0x2e880c(0xc3e);if(_0x5b7d05[_0x2e880c(0xca0)]('gemini'))return'gemini';return _0x2e880c(0x354);}}async function _0x3a4cad(_0x4b5487,_0x10fe05={}){const _0x3bbaa7=_0x3b741d;if('slgfH'!=='fLcCj'){_0x543bea[_0x3bbaa7(0x320)]&&_0x543bea[_0x3bbaa7(0x320)][_0x3bbaa7(0x627)]('New\x20request\x20started');_0x543bea['currentAbortController']=new AbortController();const _0x5462c3=_0x543bea[_0x3bbaa7(0x320)][_0x3bbaa7(0xd24)],{endpoint:_0x9297fe,key:_0x448663,model:_0x43c354}=_0x543bea[_0x3bbaa7(0xaff)],_0x2e636d=!!_0x10fe05['json'],_0x37a9fb=_0x508e8e(_0x9297fe,_0x43c354);console[_0x3bbaa7(0x68b)](_0x3bbaa7(0x72d)+_0x37a9fb);let _0x19a517='';try{if(_0x3bbaa7(0x817)===_0x3bbaa7(0x817)){switch(_0x37a9fb){case _0x3bbaa7(0xa96):{if(_0x3bbaa7(0x53e)===_0x3bbaa7(0x53e)){const _0x51012=_0x307715(_0x448663),_0x52f2cb=_0x4b5487[_0x3bbaa7(0xbe8)](_0x542532=>_0x542532[_0x3bbaa7(0xcd4)]===_0x3bbaa7(0xacc))?.[_0x3bbaa7(0x297)]||'',_0x4d4f19=_0x4b5487[_0x3bbaa7(0x78c)](_0x120264=>_0x120264[_0x3bbaa7(0xcd4)]!==_0x3bbaa7(0xacc)),_0x545ba1={'model':_0x43c354,'system':_0x52f2cb,'messages':_0x4d4f19[_0x3bbaa7(0x257)](_0x49548f=>({'role':_0x49548f[_0x3bbaa7(0xcd4)],'content':[{'type':'text','text':_0x49548f[_0x3bbaa7(0x297)]}]})),'max_tokens':0x2000},_0x309e3d=await fetch(_0x9297fe,{'method':_0x3bbaa7(0xb32),'headers':{'Content-Type':'application/json','x-api-key':_0x51012,'anthropic-version':_0x3bbaa7(0xd05)},'body':JSON[_0x3bbaa7(0x427)](_0x545ba1),'signal':_0x5462c3});if(!_0x309e3d['ok']){const _0x10a557=await _0x309e3d['json']()['catch'](()=>({}));throw new Error(_0x3bbaa7(0x5e5)+_0x309e3d[_0x3bbaa7(0x998)]+_0x3bbaa7(0x391)+(_0x10a557[_0x3bbaa7(0xb1e)]?.[_0x3bbaa7(0x979)]||_0x309e3d[_0x3bbaa7(0x502)]));}const _0x3e6835=await _0x309e3d[_0x3bbaa7(0x2f8)]();_0x19a517=_0x3e6835[_0x3bbaa7(0x297)]?.[0x0]?.[_0x3bbaa7(0x685)]||'';break;}else _0x11174b[_0x3bbaa7(0x1e2)][_0x3bbaa7(0xbd8)]='url(\x27'+_0x1112fa[_0x3bbaa7(0xcc2)]+'\x27)',_0x26eb7f[_0x3bbaa7(0x1e2)][_0x3bbaa7(0xa4e)]=_0x3bbaa7(0x73d),_0x58a3e8['style'][_0x3bbaa7(0x1c0)]='center';}case _0x3bbaa7(0xc3e):{if(_0x3bbaa7(0x5c1)===_0x3bbaa7(0xc6b))_0x23e4e3=_0x217bc2[_0x3bbaa7(0x55b)];else{const _0x29bad7=_0x307715(_0x448663),_0xff8917=_0x9297fe[_0x3bbaa7(0x32d)]('generativelace.googleapis.com'),_0x555450=_0xfe425b=>{const _0x32d525=_0x3bbaa7;if(_0x32d525(0x57b)!==_0x32d525(0x57b))_0x472d41[_0x32d525(0x184)][_0x32d525(0xb36)](_0x44db68=>{const _0x98064c=_0x32d525,_0x1e3b6f=_0x368838(_0x44db68);if(_0x1e3b6f){const _0x4ce1f6=_0x5e7c55[_0x98064c(0x23f)](_0x98064c(0xb34));_0x4ce1f6[_0x98064c(0x90f)]=_0x1e3b6f['id'],_0x4ce1f6['textContent']=_0x1e3b6f[_0x98064c(0x41a)],_0xd6b60d['appendChild'](_0x4ce1f6);}}),_0x3ee412[_0x32d525(0x1e2)][_0x32d525(0x930)]=_0x32d525(0x94a);else{const _0x14264d=[];if(_0xfe425b['content'])_0x14264d[_0x32d525(0xb47)]({'text':_0xfe425b[_0x32d525(0x297)]});if(_0xfe425b[_0x32d525(0x55b)]){if(_0x32d525(0xbf8)!=='HsoZb'){const _0x22dcb0=_0xfe425b[_0x32d525(0x55b)][_0x32d525(0x2bf)](',')[0x1],_0x41bfed=_0xfe425b[_0x32d525(0x55b)][_0x32d525(0xc97)](_0xfe425b[_0x32d525(0x55b)][_0x32d525(0xbf0)](':')+0x1,_0xfe425b[_0x32d525(0x55b)][_0x32d525(0xbf0)](';'))||_0x32d525(0x476);_0x14264d[_0x32d525(0xb47)]({'inline_data':{'mime_type':_0x41bfed,'data':_0x22dcb0}});}else _0x4a708e[_0x32d525(0x698)]=_0x314999,_0x48b511(_0xae9919[_0x32d525(0x80c)],_0x32d525(0x8a7));}return _0x14264d;}},_0x386ea4=_0x4b5487[_0x3bbaa7(0x257)](_0x4a2df3=>({'role':_0x4a2df3[_0x3bbaa7(0xcd4)]==='assistant'?_0x3bbaa7(0xc4b):_0x4a2df3[_0x3bbaa7(0xcd4)]===_0x3bbaa7(0xacc)?_0x3bbaa7(0x8ed):_0x4a2df3['role'],'parts':_0x555450(_0x4a2df3)}))[_0x3bbaa7(0x78c)](_0x127254=>_0x127254['parts'][_0x3bbaa7(0xc1f)]>0x0),_0x39a07c={'contents':_0x386ea4};if(_0x2e636d&&_0xff8917){if(_0x3bbaa7(0x280)!==_0x3bbaa7(0x298))_0x39a07c['generationConfig']={'response_mime_type':_0x3bbaa7(0xcb5)};else{const _0x5ae3e8=_0x5c73f8['map'](_0x25357c=>new _0xb35537(_0x25357c[_0x3bbaa7(0x11f)]||_0x25357c[_0x3bbaa7(0x96b)]))[_0x3bbaa7(0x78c)](_0x5440f6=>!_0x112da9(_0x5440f6));_0x5ae3e8[_0x3bbaa7(0xc1f)]>0x0&&(_0x64b93a=new _0x3cfb74(_0x3553f6[_0x3bbaa7(0x5de)][_0x3bbaa7(0x329)](null,_0x5ae3e8)),_0x5a2333=_0x7c6082[_0x3bbaa7(0x5f4)](_0x3bbaa7(0xbd4),{'dateStyle':_0x3bbaa7(0x5c5),'timeStyle':'short'}));}}const _0x2682dc=_0x9297fe+_0x3bbaa7(0xb8e)+_0x43c354+_0x3bbaa7(0xc48)+_0x29bad7+'&alt=sse',_0x1c6d8a=await fetch(_0x2682dc,{'method':_0x3bbaa7(0xb32),'headers':{'Content-Type':'application/json'},'body':JSON[_0x3bbaa7(0x427)](_0x39a07c),'signal':_0x5462c3});if(!_0x1c6d8a['ok'])throw new Error('Gemini\x20API\x20Error:\x20'+_0x1c6d8a['status']);const _0xbedf55=_0x1c6d8a[_0x3bbaa7(0x936)]['getReader'](),_0x509c81=new TextDecoder();let _0x356ed0='';while(!![]){if(_0x3bbaa7(0x3ae)==='OFszW'){_0xeb1ad2(_0x3bbaa7(0x2f7));return;}else{if(_0x5462c3[_0x3bbaa7(0x888)]){console[_0x3bbaa7(0x68b)]('Gemini\x20stream\x20reading\x20aborted.'),_0xbedf55[_0x3bbaa7(0x136)]();break;}const {done:_0x4f836e,value:_0xd511ae}=await _0xbedf55['read']();if(_0x4f836e)break;const _0x415db4=_0x509c81['decode'](_0xd511ae,{'stream':!![]}),_0x325474=_0x415db4[_0x3bbaa7(0x2bf)]('\x0a')[_0x3bbaa7(0x78c)](_0x3605ec=>_0x3605ec[_0x3bbaa7(0xad4)]()[_0x3bbaa7(0xca0)](_0x3bbaa7(0x7ad)));for(const _0x38ebec of _0x325474){if(_0x3bbaa7(0xc09)===_0x3bbaa7(0xc09)){const _0x9f15c3=_0x38ebec['replace'](_0x3bbaa7(0x89a),'');if(_0x9f15c3===_0x3bbaa7(0x759))break;try{_0x356ed0+=JSON['parse'](_0x9f15c3)[_0x3bbaa7(0x70e)][0x0]['content'][_0x3bbaa7(0x970)][0x0][_0x3bbaa7(0x685)];}catch{}}else{const _0x1e849e=_0xfc711e[_0x3bbaa7(0x820)](_0x3bbaa7(0x763));if(!_0x1e849e)return;_0x1e849e['id']==='meeting-view-screen'?_0x2ac07d():_0x179806();}}}}_0x19a517=_0x356ed0;break;}}case _0x3bbaa7(0x354):default:{const _0x54afe2=_0x307715(_0x448663),_0x1b1fa3=_0x9297fe[_0x3bbaa7(0x6ac)](/\/+$/,'')+'/v1/chat/completions',_0x2205f2=_0x4b5487['map'](_0x343fad=>{const _0x555f01=_0x3bbaa7;if(_0x343fad[_0x555f01(0xcd4)]===_0x555f01(0x8ed)&&_0x343fad[_0x555f01(0x55b)]){if(_0x555f01(0xd0a)!==_0x555f01(0x541))return{'role':'user','content':[{'type':_0x555f01(0x685),'text':_0x343fad[_0x555f01(0x297)]||'\x20'},{'type':_0x555f01(0x6a2),'image_url':{'url':_0x343fad['image'],'detail':'high'}}]};else{const _0x5725d9=_0x184938[_0x555f01(0x23f)](_0x555f01(0xaee));_0x5725d9[_0x555f01(0x32a)]=_0x20a414,_0x5725d9['addEventListener'](_0x555f01(0x779),()=>{const _0x514a73=_0x555f01;_0x124a3a[_0x514a73(0x90f)]=_0x432722,_0x8cf32a[_0x514a73(0xa19)][_0x514a73(0xab0)](_0x514a73(0x6db));}),_0x57a30c[_0x555f01(0x83b)](_0x5725d9);}}return{'role':_0x343fad[_0x555f01(0xcd4)],'content':_0x343fad[_0x555f01(0x297)]};})['filter'](_0x31bd29=>_0x31bd29['content']),_0x1b4c3a={'model':_0x43c354,'messages':_0x2205f2,'max_tokens':0x2000,..._0x2e636d?{'response_format':{'type':_0x3bbaa7(0x45b)}}:{}},_0x194685=await fetch(_0x1b1fa3,{'method':_0x3bbaa7(0xb32),'headers':{'Content-Type':_0x3bbaa7(0xcb5),'Authorization':_0x3bbaa7(0xc10)+_0x54afe2},'body':JSON['stringify'](_0x1b4c3a),'signal':_0x5462c3});if(!_0x194685['ok']){const _0x41088a=await _0x194685[_0x3bbaa7(0x2f8)]()['catch'](()=>({}));throw new Error(_0x3bbaa7(0x99a)+_0x194685[_0x3bbaa7(0x998)]+_0x3bbaa7(0x391)+(_0x41088a[_0x3bbaa7(0xb1e)]?.[_0x3bbaa7(0x979)]||_0x194685[_0x3bbaa7(0x502)]));}const _0xfab8f7=await _0x194685[_0x3bbaa7(0x2f8)]();_0x19a517=_0xfab8f7[_0x3bbaa7(0x62a)]?.[0x0]?.[_0x3bbaa7(0x979)]?.[_0x3bbaa7(0x297)]||'';break;}}return _0x19a517;}else try{const _0x23cc33=_0x4a60db[_0x3bbaa7(0x760)](_0x3bbaa7(0x74f)+_0x544be2),_0x3267dd=_0x163eb4[_0x3bbaa7(0x576)](_0x23cc33||'[]');return _0x38261f[_0x3bbaa7(0x8e1)](_0x3267dd)?_0x3267dd:[];}catch{return[];}}catch(_0x2fadf8){if(_0x3bbaa7(0x88a)!=='SDTtQ'){if(_0x2fadf8[_0x3bbaa7(0x41a)]==='AbortError')return console[_0x3bbaa7(0x68b)](_0x3bbaa7(0x33e)),'';throw _0x2fadf8;}else{_0x1e9d81[_0x3bbaa7(0xc54)]=[],_0x27d8fa();return;}}finally{if('TQnGg'!==_0x3bbaa7(0x8c1)){if(typeof _0x27dbf7===_0x3bbaa7(0x2b1))_0x23f4fd[_0x3bbaa7(0xb47)](_0x23ec56);}else _0x543bea[_0x3bbaa7(0x320)]&&_0x543bea[_0x3bbaa7(0x320)][_0x3bbaa7(0xd24)]===_0x5462c3&&(_0x3bbaa7(0xc2c)!==_0x3bbaa7(0xc2c)?_0x1b0f2f+=_0x3bbaa7(0xa26)+_0xc0d2fb['songName']+'\x20-\x20'+_0x379165['artist']+')':_0x543bea[_0x3bbaa7(0x320)]=null);}}else _0x1338c2[_0x3bbaa7(0xb47)](..._0x2c3f74(_0x5ee788));}async function _0x26f682(){const _0x5449ff=_0x3b741d;if('rXSjD'===_0x5449ff(0xd51))_0x9280f1[_0x5449ff(0x32a)]=_0x33239d['speaker']===_0x5449ff(0x4b3)?'旁白':_0x2ab4ab[_0x5449ff(0x319)],_0x36f939[_0x5449ff(0x32a)]=_0x35a596['line'],_0x320926[_0x5449ff(0x319)]===_0x904ff1['name']?_0x458ffd(_0xffc5f0,_0x47f4a6['emotion']):_0x40066f(_0x218165,_0x5449ff(0x8a7));else{const _0x2de322=_0x3d5cde[_0x5449ff(0xb5f)][_0x5449ff(0xa19)][_0x5449ff(0x9ff)]('active'),_0x5dce30=_0x2de322?_0x432acb[_0x5449ff(0x90f)]:null;let _0x4518c1=null,_0x15ba8d='';if(_0x2de322&&_0x5dce30){_0x4518c1=_0x543bea[_0x5449ff(0x94b)][_0x5449ff(0xbe8)](_0xb21a51=>_0xb21a51[_0x5449ff(0x711)]===_0x5449ff(0x5fc)&&_0xb21a51[_0x5449ff(0x184)]['includes'](_0x5dce30));const _0x246144=_0x509294(_0x5dce30);_0x15ba8d=_0x246144?_0x246144[_0x5449ff(0x41a)]:_0x5449ff(0x522);}else{if(_0x543bea[_0x5449ff(0x886)]){_0x4518c1=_0x577515();const _0x45ad5b=document[_0x5449ff(0x51d)](_0x5449ff(0x56d))[_0x5449ff(0x32a)];_0x15ba8d=_0x45ad5b||_0x5449ff(0x35a);}}if(!_0x4518c1){_0x48e450('找不到要清空的聊天记录。');return;}const _0x221055=await _0x44efa2(_0x5449ff(0x550)+_0x15ba8d+_0x5449ff(0x3e4));if(!_0x221055)return;_0x4518c1['id']===_0x543bea[_0x5449ff(0x886)]&&(_0x1834e0(),_0x543bea[_0x5449ff(0xc54)]=[],_0x15b163());try{localStorage[_0x5449ff(0x584)](_0x5449ff(0x74f)+_0x4518c1['id']);}catch(_0x5d2b22){'xMpWz'===_0x5449ff(0x2cc)?(_0x3176a2={'id':_0x5449ff(0xd3b),'name':_0x5449ff(0x1c1)},_0x4419c8[_0x5449ff(0x4a4)]['push'](_0x3b6b92),_0x12e27f[_0x5449ff(0x68b)](_0x5449ff(0xc88)),_0xa1089c=!![]):console[_0x5449ff(0xb1e)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x4518c1['id'],_0x5d2b22);}_0x48e450('\x22'+_0x15ba8d+_0x5449ff(0x441));}}const _0x3db8b8=document[_0x3b741d(0x51d)]('export-all-data-button'),_0x4adddc=document[_0x3b741d(0x51d)]('import-all-data-button'),_0x5b8ae9=document[_0x3b741d(0x51d)](_0x3b741d(0x593));_0x3db8b8[_0x3b741d(0xbc8)](_0x3b741d(0x779),async()=>{const _0x6f4441=_0x3b741d;if('DMuXe'!==_0x6f4441(0x867)){_0x2ee484(!![],_0x6f4441(0x9e0));const _0xf0e087=[];try{if(_0x6f4441(0x676)==='PzwIf'){const _0x57321d={'localStorageData':{},'indexedDBData':{},'indexedDBMusicData':[],'indexedDBSnoopData':[]};for(let _0x22b3ef=0x0;_0x22b3ef<localStorage['length'];_0x22b3ef++){if(_0x6f4441(0x919)!==_0x6f4441(0xb63)){const _0x2788a3=localStorage['key'](_0x22b3ef);if(_0x2788a3)_0x57321d[_0x6f4441(0x544)][_0x2788a3]=localStorage[_0x6f4441(0x760)](_0x2788a3);}else _0x1d5eb8(_0x589a8c['coverId'])[_0x6f4441(0x842)](_0x542494=>{const _0x46def3=_0x6f4441;if(_0x542494)_0x19577a[_0x46def3(0x2d9)]=_0x13bbc1[_0x46def3(0xcb2)](_0x542494);});}const _0xc9486=await _0x5e955c,_0x54943d=_0xc9486[_0x6f4441(0x170)]([_0x462025,_0xe51d70,_0x4d2e4a],_0x6f4441(0x366)),_0xc50986=_0x54943d[_0x6f4441(0x327)](_0x462025),_0x4e5b8c=_0x54943d[_0x6f4441(0x327)](_0xe51d70),_0x5dc9a9=_0x54943d[_0x6f4441(0x327)](_0x4d2e4a),_0x1b424d=new Promise((_0x1b5316,_0x5af71d)=>{const _0x195238=_0x6f4441;if(_0x195238(0xb5c)!==_0x195238(0x94f)){const _0x14e423=_0xc50986[_0x195238(0x1d3)]();_0x14e423['onsuccess']=()=>_0x1b5316(_0x14e423['result']),_0x14e423['onerror']=()=>_0x5af71d(_0x14e423[_0x195238(0xb1e)]);}else _0x5619cd(_0x1a562a['id']);}),_0x5ea4ed=new Promise((_0x29935d,_0x57e3ec)=>{const _0x520cf9=_0x6f4441;if(_0x520cf9(0x963)==='fiSHT'){const _0x52b136=_0x4e5b8c[_0x520cf9(0x1d3)]();_0x52b136[_0x520cf9(0x487)]=()=>_0x29935d(_0x52b136[_0x520cf9(0x668)]),_0x52b136['onerror']=()=>_0x57e3ec(_0x52b136[_0x520cf9(0xb1e)]);}else return _0x51113b(_0xa8740d)[_0x520cf9(0x842)](_0x1ee830=>_0x1ee830['blob']());}),_0x28ddd3=new Promise((_0xcdd0e5,_0x1519f2)=>{const _0x3dd5cb=_0x6f4441,_0x3cd816=_0x5dc9a9['getAll']();_0x3cd816[_0x3dd5cb(0x487)]=()=>_0xcdd0e5(_0x3cd816[_0x3dd5cb(0x668)]),_0x3cd816[_0x3dd5cb(0x122)]=()=>_0x1519f2(_0x3cd816['error']);}),[_0x3cff1b,_0x2df35e,_0x20f494]=await Promise['all']([_0x1b424d,_0x5ea4ed,_0x28ddd3]);for(const _0x48ae13 of _0x3cff1b){if(_0x48ae13['blob']instanceof Blob){if(_0x6f4441(0x551)===_0x6f4441(0xb5e)){const _0x264881=_0x23cce3[_0x6f4441(0x51d)](_0x6f4441(0x204)),_0x3cb410=_0x33b72e[_0x6f4441(0x51d)](_0x6f4441(0x420)),_0x1670a9=_0x38b000[_0x6f4441(0x51d)]('modal-ok'),_0x259c22=_0x4a647a[_0x6f4441(0x51d)](_0x6f4441(0x9ea)),_0x19d7c9=_0x2b7543[_0x6f4441(0x51d)]('modal-mask');_0x3cb410[_0x6f4441(0x32a)]=_0x1416e0,_0x264881[_0x6f4441(0x1e2)][_0x6f4441(0x930)]=_0x6f4441(0x338);const _0x46798a=_0x5a5092=>{const _0x479ab7=_0x6f4441;_0x264881[_0x479ab7(0x1e2)][_0x479ab7(0x930)]=_0x479ab7(0x2f6),_0x1670a9[_0x479ab7(0x50e)]=_0x259c22[_0x479ab7(0x50e)]=_0x19d7c9[_0x479ab7(0x50e)]=null,_0x1ab625[_0x479ab7(0x2ec)](_0x479ab7(0x830),_0x5ca3a3),_0x1b729c(_0x5a5092);},_0x5ca3a3=_0x2266c4=>{const _0x14066d=_0x6f4441;if(_0x2266c4['key']===_0x14066d(0x959))_0x46798a(![]);if(_0x2266c4['key']===_0x14066d(0x778))_0x46798a(!![]);};_0x1670a9['onclick']=()=>_0x46798a(!![]),_0x259c22[_0x6f4441(0x50e)]=()=>_0x46798a(![]),_0x19d7c9[_0x6f4441(0x50e)]=()=>_0x46798a(![]),_0x18ff91[_0x6f4441(0xbc8)](_0x6f4441(0x830),_0x5ca3a3);}else try{_0x57321d['indexedDBData'][_0x48ae13['id']]=await _0xa161cf(_0x48ae13[_0x6f4441(0x543)]);}catch(_0x12aaac){_0xf0e087[_0x6f4441(0xb47)](_0x48ae13['id']);}}}for(const _0x46d9cb of _0x2df35e){if(_0x6f4441(0xa36)!==_0x6f4441(0xa36)){const _0x48b9f2=_0x140ef5[_0x6f4441(0x90f)]['trim']();if(!_0x48b9f2)return;_0x457483['currentLivestreamDMs'][_0x6f4441(0xb47)]({'sender':_0x6f4441(0x8ed),'content':_0x48b9f2}),_0x54020d();const _0x2b93d0={'type':'dm','content':_0x48b9f2};_0x5d9c2d['currentLivestreamUserActions'][_0x6f4441(0xb47)](_0x2b93d0),_0x3c94a9[_0x6f4441(0x90f)]='',_0x3c7921[_0x6f4441(0x72b)]();}else{const _0x1366d5={..._0x46d9cb};_0x46d9cb[_0x6f4441(0xb27)]instanceof Blob&&(_0x6f4441(0x4ba)!==_0x6f4441(0x4ba)?_0x4a88df[_0x6f4441(0x2d9)]=_0x23a327[_0x6f4441(0x55b)]:_0x1366d5[_0x6f4441(0xb27)]=await _0xa161cf(_0x46d9cb[_0x6f4441(0xb27)])),_0x46d9cb[_0x6f4441(0x73d)]instanceof Blob&&(_0x1366d5[_0x6f4441(0x73d)]=await _0xa161cf(_0x46d9cb[_0x6f4441(0x73d)])),_0x57321d[_0x6f4441(0x3c9)]['push'](_0x1366d5);}}_0x57321d[_0x6f4441(0x3a2)]=_0x20f494;const _0x33b98c=new Blob([JSON[_0x6f4441(0x427)](_0x57321d,null,0x2)],{'type':'application/json'}),_0x3dba92=URL[_0x6f4441(0xcb2)](_0x33b98c),_0x1c9a4c=document['createElement']('a'),_0x16024f=new Date(),_0x22fd94=_0x16024f[_0x6f4441(0x5f6)]()+'-'+String(_0x16024f['getMonth']()+0x1)[_0x6f4441(0xa9f)](0x2,'0')+'-'+String(_0x16024f[_0x6f4441(0x3d6)]())['padStart'](0x2,'0');_0x1c9a4c[_0x6f4441(0x7f5)]=_0x3dba92,_0x1c9a4c[_0x6f4441(0x183)]=_0x6f4441(0x4c1)+_0x22fd94+'.json',document[_0x6f4441(0x936)]['appendChild'](_0x1c9a4c),_0x1c9a4c['click'](),document[_0x6f4441(0x936)][_0x6f4441(0x526)](_0x1c9a4c),URL[_0x6f4441(0x6eb)](_0x3dba92),_0x2ee484(![]),_0xf0e087[_0x6f4441(0xc1f)]>0x0?_0x48e450(_0x6f4441(0xc8a)+_0xf0e087[_0x6f4441(0x4db)]('\x0a')):_0x48e450('包含所有图片和音乐的全量数据已成功导出！');}else _0x542dcc('chat','groupChatCreate'),_0x2e2500(![]);}catch(_0x35ec6b){_0x2ee484(![]),console['error'](_0x6f4441(0x6e7),_0x35ec6b),_0x48e450(_0x6f4441(0x14c)+_0x35ec6b[_0x6f4441(0x979)]);}}else _0x2ca1e2+=_0x6f4441(0x5c8)+_0x5dc186['store_name']+'”买过：“'+_0x1ac844[_0x6f4441(0xa01)]+_0x6f4441(0x949);}),_0x4adddc['addEventListener'](_0x3b741d(0x779),()=>{const _0x21a162=_0x3b741d;_0x5b8ae9[_0x21a162(0x779)]();}),_0x212627[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x1ef0a7),_0x5b8ae9[_0x3b741d(0xbc8)]('change',_0x4f31ed=>{const _0x252a34=_0x3b741d,_0x511a4f=_0x4f31ed[_0x252a34(0x446)][_0x252a34(0x730)][0x0];if(!_0x511a4f)return;_0x44efa2(_0x252a34(0x5b5))['then'](_0x4d2de9=>{const _0xea8969=_0x252a34;if(!_0x4d2de9){if(_0xea8969(0x5c6)!==_0xea8969(0x5c6))_0x128dfa['classList'][_0xea8969(0xab0)]('hidden'),_0x2f8db9['coverId']?_0x1b1b67(_0x3d4824[_0xea8969(0x28a)])[_0xea8969(0x842)](_0x3b5763=>{const _0x129def=_0xea8969;if(_0x3b5763)_0x2e4efc[_0x129def(0x2d9)]=_0x3435d6[_0x129def(0xcb2)](_0x3b5763);}):_0x409209[_0xea8969(0x2d9)]=_0x54d428[_0xea8969(0x372)]||_0x3db09c,_0x3c3b12['textContent']=_0x2b73d7['songName']||'未知歌曲',_0x13deed[_0xea8969(0x32a)]=_0x55af28[_0xea8969(0x38b)]||_0xea8969(0x421),_0x47d329[_0xea8969(0x32a)]=_0x22520e?'❚❚':'▶';else{_0x5b8ae9[_0xea8969(0x90f)]='';return;}}_0x2ee484(!![],_0xea8969(0x256));const _0x426d12=new FileReader();_0x426d12[_0xea8969(0x14a)]=async _0x266ffd=>{const _0x224fbb=_0xea8969;try{if(_0x224fbb(0xd57)!==_0x224fbb(0xd57))_0x4bfb48['error'](_0x224fbb(0x964)+_0xdb2d73['id']+_0x224fbb(0x6a5),_0x9dbc10);else{const _0x38589a=JSON[_0x224fbb(0x576)](_0x266ffd['target'][_0x224fbb(0x668)]);if(!_0x38589a['localStorageData']||!_0x38589a[_0x224fbb(0x447)]){if(_0x224fbb(0xd0e)!==_0x224fbb(0xd0e))_0x522b47[_0x224fbb(0x711)]===_0x224fbb(0xa3e)&&_0x257a98(_0x424196);else throw new Error(_0x224fbb(0xa11));}_0x2ee484(!![],_0x224fbb(0x966));const _0xd94367=await Promise[_0x224fbb(0x71a)](Object[_0x224fbb(0x4fa)](_0x38589a[_0x224fbb(0x447)])[_0x224fbb(0x257)](async _0x2624c8=>{const _0x2858be=_0x224fbb;if(_0x2858be(0x4c4)!==_0x2858be(0x4c4))_0x1cff6e(_0x479a92,_0x324ea8);else{const _0x18907a=_0x38589a[_0x2858be(0x447)][_0x2624c8];if(typeof _0x18907a===_0x2858be(0x2b1)&&_0x18907a['startsWith'](_0x2858be(0x7ad))){const _0x5c599a=await _0xe092cf(_0x18907a);return{'id':_0x2624c8,'blob':_0x5c599a};}return null;}}))[_0x224fbb(0x842)](_0x37031c=>_0x37031c[_0x224fbb(0x78c)](Boolean)),_0x2ea61e=[];if(_0x38589a[_0x224fbb(0x3c9)]){_0x2ee484(!![],_0x224fbb(0x132));const _0x26a34c=_0x38589a[_0x224fbb(0x3c9)][_0x224fbb(0x257)](async _0x1d52a8=>{const _0xdc16c7=_0x224fbb;if(_0xdc16c7(0xd38)==='vMIjo')_0x80787[_0xdc16c7(0xa61)]=new _0x5eecf0(),_0x17bbcc['selectedDate']=_0x3fd6f8(),_0x5f0ac1();else{const _0x56f11f={..._0x1d52a8};if(_0x1d52a8[_0xdc16c7(0xb27)])_0x56f11f[_0xdc16c7(0xb27)]=await _0xe092cf(_0x1d52a8[_0xdc16c7(0xb27)]);if(_0x1d52a8[_0xdc16c7(0x73d)])_0x56f11f[_0xdc16c7(0x73d)]=await _0xe092cf(_0x1d52a8[_0xdc16c7(0x73d)]);return _0x56f11f;}});_0x2ea61e[_0x224fbb(0xb47)](...await Promise[_0x224fbb(0x71a)](_0x26a34c));}_0x2ee484(!![],_0x224fbb(0x999)),localStorage[_0x224fbb(0xb46)]();for(const _0x4ae7a9 in _0x38589a[_0x224fbb(0x544)]){localStorage[_0x224fbb(0xa1c)](_0x4ae7a9,_0x38589a[_0x224fbb(0x544)][_0x4ae7a9]);}_0x2ee484(!![],_0x224fbb(0x414));const _0x39c44e=await _0x5e955c,_0x29d6ad=_0x39c44e[_0x224fbb(0x170)]([_0x462025,_0xe51d70,_0x4d2e4a],'readwrite'),_0x3f98e9=_0x29d6ad[_0x224fbb(0x327)](_0x462025),_0x11d1e9=_0x29d6ad[_0x224fbb(0x327)](_0xe51d70),_0x158ae=_0x29d6ad[_0x224fbb(0x327)](_0x4d2e4a);_0x3f98e9[_0x224fbb(0xb46)](),_0x11d1e9['clear'](),_0x158ae[_0x224fbb(0xb46)](),_0xd94367[_0x224fbb(0xb36)](_0x47c4a7=>_0x3f98e9[_0x224fbb(0x3f8)](_0x47c4a7)),_0x2ea61e[_0x224fbb(0xb36)](_0x23b4f8=>_0x11d1e9[_0x224fbb(0x3f8)](_0x23b4f8)),_0x38589a[_0x224fbb(0x3a2)]&&Array[_0x224fbb(0x8e1)](_0x38589a[_0x224fbb(0x3a2)])&&(console[_0x224fbb(0x68b)](_0x224fbb(0x542)),_0x38589a[_0x224fbb(0x3a2)]['forEach'](_0x327da9=>_0x158ae['put'](_0x327da9))),await new Promise((_0x2a9694,_0x2528f9)=>{const _0x151ebf=_0x224fbb;_0x29d6ad['oncomplete']=_0x2a9694,_0x29d6ad[_0x151ebf(0x122)]=_0x1e4342=>_0x2528f9(_0x1e4342[_0x151ebf(0x446)][_0x151ebf(0xb1e)]);}),_0x2ee484(![]),_0x48e450('数据导入成功！应用即将刷新...'),setTimeout(()=>location[_0x224fbb(0x5f2)](),0x640);}}catch(_0x24bc62){if(_0x224fbb(0x238)===_0x224fbb(0x81d)){const _0x16ca27=_0x567210[0x0][_0x224fbb(0xad4)](),_0x5e1199=_0x381d1e[0x1][_0x224fbb(0xad4)]()[_0x224fbb(0x6ac)](/^"|"$/g,'');_0x3604fc[_0x16ca27]=_0x5e1199;}else _0x2ee484(![]),console['error'](_0x224fbb(0x548),_0x24bc62),_0x48e450(_0x224fbb(0xb54)+_0x24bc62[_0x224fbb(0x979)]);}finally{_0x5b8ae9['value']='';}},_0x426d12[_0xea8969(0x88b)](_0x511a4f);});});function _0x2f5b96(){const _0x5b5369=_0x3b741d;_0x4b026a[_0x5b5369(0x90f)]=_0x543bea[_0x5b5369(0xaff)]['endpoint']||'',_0x3e710d[_0x5b5369(0x90f)]=_0x543bea[_0x5b5369(0xaff)]['key']||'',_0x560116[_0x5b5369(0x90f)]=_0x543bea[_0x5b5369(0xaff)][_0x5b5369(0xc4b)]||'',_0x49d97a[_0x5b5369(0x90f)]=String(_0x543bea[_0x5b5369(0xc9f)]?.[_0x5b5369(0x5eb)]??0x64),document[_0x5b5369(0x51d)](_0x5b5369(0x41f))['value']=_0x543bea[_0x5b5369(0xaff)][_0x5b5369(0xbf2)]||_0x5b5369(0x354);}function _0x2bddc2(){const _0x4a2932=_0x3b741d;if(_0x4a2932(0x510)===_0x4a2932(0x510)){_0x543bea[_0x4a2932(0xaff)][_0x4a2932(0x3ea)]=_0x4b026a[_0x4a2932(0x90f)][_0x4a2932(0xad4)](),_0x543bea[_0x4a2932(0xaff)]['key']=_0x3e710d[_0x4a2932(0x90f)][_0x4a2932(0xad4)](),_0x543bea[_0x4a2932(0xaff)][_0x4a2932(0xc4b)]=_0x560116['value']['trim'](),_0x543bea['apiSettings']['provider']=document[_0x4a2932(0x51d)](_0x4a2932(0x41f))[_0x4a2932(0x90f)];const _0x27e0f2=parseInt(_0x49d97a['value'],0xa);_0x543bea[_0x4a2932(0xc9f)][_0x4a2932(0x5eb)]=Number[_0x4a2932(0x8f3)](_0x27e0f2)&&_0x27e0f2>0x0?_0x27e0f2:0x64,_0x1a0f1f(),_0x48e450(_0x4a2932(0x3c4));}else _0x325c5d['quotedMessage']={..._0x1789cc[_0x4a2932(0xa6e)]};}function _0x13dff8(){const _0x37ef62=_0x3b741d;_0xbd6f83[_0x37ef62(0x90f)]=_0x543bea[_0x37ef62(0x4b9)][_0x37ef62(0x41a)]||'',_0x40bce8['src']=_0x543bea[_0x37ef62(0x4b9)]['avatar']||_0x234b40,_0xe52977['value']=_0x543bea[_0x37ef62(0x4b9)][_0x37ef62(0x367)]||'';}async function _0x3925e7(_0x3c213f=null){const _0x1cad28=_0x3b741d;_0x53ffb2(_0x1cad28(0xb5f),_0x256cdf),_0xbac87e('char-edit-bind-user');const _0x9e92e6=_0x3c213f?_0x543bea[_0x1cad28(0x24d)][_0x1cad28(0xbe8)](_0x420d1d=>_0x420d1d['id']===_0x3c213f):null;_0x516182(_0x1cad28(0x43e),_0x9e92e6?_0x9e92e6[_0x1cad28(0xc49)]||[]:[]);const _0x3c7bbf=document['getElementById'](_0x1cad28(0x123)),_0x549f66=document[_0x1cad28(0x51d)](_0x1cad28(0x5bd));_0x52b51c[_0x1cad28(0x2d9)]=_0x46536a,_0x778b31[_0x1cad28(0x90f)]='',_0x89bc79[_0x1cad28(0x1e2)]['backgroundImage']='',_0x889c55['value']='',_0x38f216[_0x1cad28(0x1e2)]['backgroundImage']='',_0x47cf12[_0x1cad28(0x90f)]='';const _0x5b959c=[_0x1cad28(0x8a7),_0x1cad28(0x772),'angry','sad',_0x1cad28(0xaf1)];_0x5b959c[_0x1cad28(0xb36)](_0x2a0871=>{const _0x44a8da=_0x1cad28;document['getElementById'](_0x44a8da(0xb4d)+_0x2a0871+'-preview')[_0x44a8da(0x1e2)][_0x44a8da(0xbd8)]='',document[_0x44a8da(0x51d)](_0x44a8da(0xb4d)+_0x2a0871+_0x44a8da(0xa3c))[_0x44a8da(0x90f)]='';});if(_0x3c213f){if(!_0x9e92e6)return;_0x432acb[_0x1cad28(0x90f)]=_0x9e92e6['id'],_0x43906b['textContent']=_0x1cad28(0xa16),_0xa5295e[_0x1cad28(0x90f)]=_0x9e92e6[_0x1cad28(0x41a)],_0x69cecd['value']=_0x9e92e6['remark'],_0x31b822[_0x1cad28(0x90f)]=_0x9e92e6['persona'],document[_0x1cad28(0x51d)](_0x1cad28(0x57c))['value']=_0x9e92e6[_0x1cad28(0x5ee)]||'',_0x3c7bbf[_0x1cad28(0x90f)]=_0x9e92e6[_0x1cad28(0x172)]||'',_0x549f66[_0x1cad28(0x90f)]=_0x9e92e6[_0x1cad28(0x34e)]||'';const _0x56bbef=_0x543bea[_0x1cad28(0x94b)]['find'](_0x1a9d0b=>_0x1a9d0b[_0x1cad28(0x711)]===_0x1cad28(0x5fc)&&_0x1a9d0b[_0x1cad28(0x184)][_0x1cad28(0x32d)](_0x3c213f));document[_0x1cad28(0x51d)](_0x1cad28(0x1d0))[_0x1cad28(0x90f)]=_0x56bbef?.['boundUserProfileId']||_0x543bea['activeUserProfileId'];try{if('GqXOH'!=='cWqxz'){const _0x4bbd10=await _0x54e221(_0x1cad28(0x395)+_0x9e92e6['id']);_0x52b51c['src']=_0x4bbd10?URL[_0x1cad28(0xcb2)](_0x4bbd10):_0x9e92e6[_0x1cad28(0x5ec)]||_0x46536a;const _0x36c1dd=await _0x54e221('char_wallpaper_'+_0x9e92e6['id']);if(_0x36c1dd)_0x89bc79['style'][_0x1cad28(0xbd8)]=_0x1cad28(0x744)+URL[_0x1cad28(0xcb2)](_0x36c1dd)+'\x27)';const _0x6c5c62=await _0x54e221(_0x1cad28(0x352)+_0x9e92e6['id']);if(_0x6c5c62)_0x38f216[_0x1cad28(0x1e2)][_0x1cad28(0xbd8)]=_0x1cad28(0x744)+URL[_0x1cad28(0xcb2)](_0x6c5c62)+'\x27)';for(const _0x4a935d of _0x5b959c){const _0x1cbdfa=await _0x54e221('char_sprite_'+_0x4a935d+'_'+_0x9e92e6['id']);_0x1cbdfa&&(document[_0x1cad28(0x51d)]('char-edit-sprite-'+_0x4a935d+'-preview')['style'][_0x1cad28(0xbd8)]=_0x1cad28(0x744)+URL[_0x1cad28(0xcb2)](_0x1cbdfa)+'\x27)');}}else _0x4a0a04[_0x1cad28(0x2d9)]=_0x397745['createObjectURL'](_0x4a23f4),_0x1dfdf4[_0x1cad28(0x1e2)][_0x1cad28(0x930)]='block';}catch(_0x57cbcd){console[_0x1cad28(0xb1e)](_0x1cad28(0x85a)+_0x9e92e6['id']+_0x1cad28(0x4a8),_0x57cbcd),_0x52b51c[_0x1cad28(0x2d9)]=_0x9e92e6['avatar']||_0x46536a;}}else _0x432acb[_0x1cad28(0x90f)]='',_0x43906b[_0x1cad28(0x32a)]='创建新角色',_0xa5295e['value']='新角色\x20'+(_0x543bea[_0x1cad28(0x24d)][_0x1cad28(0xc1f)]+0x1),_0x69cecd[_0x1cad28(0x90f)]='',_0x31b822[_0x1cad28(0x90f)]=_0x1cad28(0xb9a),document['getElementById'](_0x1cad28(0x57c))['value']='',_0x3c7bbf[_0x1cad28(0x90f)]='',_0x549f66[_0x1cad28(0x90f)]='';_0x59f608();const _0x272893=document[_0x1cad28(0x51d)]('char-edit-css');let _0x42aa0a=document['getElementById']('live-preview-style');if(!_0x42aa0a){if(_0x1cad28(0x906)===_0x1cad28(0xa47)){const _0x443f65=_0x4eb3b0(_0x2af58d[_0x1cad28(0x297)]??_0x2167ee[_0x1cad28(0x685)]??_0x4e7b23[_0x1cad28(0x979)]??'')[_0x1cad28(0xad4)]();if(_0x443f65)_0x1dc5f0[_0x1cad28(0x3cd)][_0x1cad28(0xb47)]({'senderId':_0x1a20e2['id'],'kind':_0x1cad28(0x685),'content':_0x443f65});}else _0x42aa0a=document[_0x1cad28(0x23f)](_0x1cad28(0x1e2)),_0x42aa0a['id']=_0x1cad28(0x929),document[_0x1cad28(0xa74)][_0x1cad28(0x83b)](_0x42aa0a);}const _0x13960d=()=>{const _0x184c90=_0x1cad28;if(_0x184c90(0x389)===_0x184c90(0x690))_0x2134f1[_0x184c90(0x1e2)]['backgroundImage']=_0x184c90(0x744)+_0xa9a553['createObjectURL'](_0x29c79)+'\x27)';else{const _0x4c8a89=_0x272893[_0x184c90(0x90f)];let _0x579f10=_0x4c8a89['replace'](/\.bubble\.sent/g,_0x184c90(0xbe4))[_0x184c90(0x6ac)](/\.bubble\.received/g,'#bubble-preview-ai');_0x42aa0a['innerHTML']=_0x579f10;}};_0x272893[_0x1cad28(0x2ec)](_0x1cad28(0xa5e),_0x13960d),_0x272893['addEventListener'](_0x1cad28(0xa5e),_0x13960d),_0x13960d();}function _0x11fa65(){const _0x4b61ea=_0x3b741d;try{if(_0x4b61ea(0x826)!=='OHQMS')_0xaf4a69[_0x4b61ea(0x779)]();else{const _0x4242c6={'type':_0x4b61ea(0x5b6),'version':0x1,'timestamp':Date[_0x4b61ea(0x63d)](),'accountingData':_0x543bea['accountingData'],'accountingLedger':_0x543bea[_0x4b61ea(0x43a)]},_0x26c7ad=new Blob([JSON[_0x4b61ea(0x427)](_0x4242c6,null,0x2)],{'type':_0x4b61ea(0xcb5)}),_0x5b6576=URL[_0x4b61ea(0xcb2)](_0x26c7ad),_0x40fdac=document[_0x4b61ea(0x23f)]('a'),_0x58bd8d=new Date(),_0x19ebbe=_0x58bd8d[_0x4b61ea(0x5f6)]()+'-'+String(_0x58bd8d[_0x4b61ea(0xc3f)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x58bd8d[_0x4b61ea(0x3d6)]())['padStart'](0x2,'0');_0x40fdac[_0x4b61ea(0x7f5)]=_0x5b6576,_0x40fdac[_0x4b61ea(0x183)]='Noir_Accounting_Backup_'+_0x19ebbe+'.json',document[_0x4b61ea(0x936)]['appendChild'](_0x40fdac),_0x40fdac[_0x4b61ea(0x779)](),document[_0x4b61ea(0x936)][_0x4b61ea(0x526)](_0x40fdac),URL[_0x4b61ea(0x6eb)](_0x5b6576),_0x48e450(_0x4b61ea(0x639));}}catch(_0x1a8219){if(_0x4b61ea(0x39f)!==_0x4b61ea(0x39f)){_0x17f41f[_0x4b61ea(0x4d5)]=_0x4b61ea(0x49e),_0x3fdc82[_0x4b61ea(0x4d5)]=_0x4b61ea(0x377),_0x24a986[_0x4b61ea(0x51d)]('diary-write-button')[_0x4b61ea(0xbc8)]('click',_0x44ef75),_0x128af6[_0x4b61ea(0x51d)](_0x4b61ea(0x9f0))[_0x4b61ea(0xbc8)](_0x4b61ea(0x779),_0x52d40c);return;}else console['error'](_0x4b61ea(0x7e3),_0x1a8219),_0x48e450('导出失败了，哼:\x20'+_0x1a8219[_0x4b61ea(0x979)]);}}function _0x496c8a(_0x5121bb){const _0xd107e3=_0x3b741d;if(_0xd107e3(0x190)!==_0xd107e3(0x5b4)){const _0x3b9656=_0x5121bb['target'][_0xd107e3(0x730)][0x0];if(!_0x3b9656)return;_0x44efa2(_0xd107e3(0xb97))[_0xd107e3(0x842)](_0x48bacf=>{const _0x231a78=_0xd107e3;if(_0x231a78(0xb02)!==_0x231a78(0xb02))_0x2d152d['log']('TODO:\x20结束直播并生成总结');else{if(!_0x48bacf){_0x5121bb[_0x231a78(0x446)][_0x231a78(0x90f)]='';return;}_0x2ee484(!![],_0x231a78(0x96e));const _0x1e5bf0=new FileReader();_0x1e5bf0[_0x231a78(0x14a)]=_0x13794f=>{const _0x2a4a3b=_0x231a78;if(_0x2a4a3b(0x401)!==_0x2a4a3b(0x401)){_0x9d28db(_0x2a4a3b(0x952));return;}else try{if(_0x2a4a3b(0x317)!==_0x2a4a3b(0x317)){if(!_0x4a8896['isArray'](_0x3ad91d))return'<p>格式错误</p>';if(_0x16ff12[_0x2a4a3b(0xc1f)]===0x0)return _0x2a4a3b(0x97c);return _0xc6ebc['sort']((_0x52d38f,_0xb326e5)=>new _0x11dcdd(_0xb326e5['timestamp'])-new _0x214c89(_0x52d38f[_0x2a4a3b(0x11f)])),_0x2a4a3b(0xd34)+_0x5950d3[_0x2a4a3b(0x257)]((_0x305bee,_0x3389cd)=>'\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20'+(_0x3389cd<_0x3fc15[_0x2a4a3b(0xc1f)]-0x1?_0x2a4a3b(0x266):'')+'\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+(_0x305bee['query']||_0x2a4a3b(0xb6a))+_0x2a4a3b(0x1a3)+(_0x305bee['result_page_content']||'没有找到相关结果。')+_0x2a4a3b(0x7c5)+(_0x305bee[_0x2a4a3b(0x11f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x2a4a3b(0x4db)]('')+_0x2a4a3b(0x14f);}else{const _0x5eb80f=JSON[_0x2a4a3b(0x576)](_0x13794f[_0x2a4a3b(0x446)]['result']);if(_0x5eb80f[_0x2a4a3b(0x711)]!==_0x2a4a3b(0x5b6)||!_0x5eb80f[_0x2a4a3b(0x1d2)]||!_0x5eb80f[_0x2a4a3b(0x43a)])throw new Error(_0x2a4a3b(0x60e));_0x543bea[_0x2a4a3b(0x1d2)]=_0x5eb80f['accountingData'],_0x543bea[_0x2a4a3b(0x43a)]=_0x5eb80f[_0x2a4a3b(0x43a)],_0x1a0f1f(),_0x2ee484(![]),_0x48e450(_0x2a4a3b(0x20d)),_0x4f90e2();}}catch(_0x521597){_0x2ee484(![]),console['error'](_0x2a4a3b(0x5b1),_0x521597),_0x48e450(_0x2a4a3b(0xb54)+_0x521597[_0x2a4a3b(0x979)]);}finally{_0x5121bb['target'][_0x2a4a3b(0x90f)]='';}},_0x1e5bf0[_0x231a78(0x88b)](_0x3b9656);}});}else _0x48d1a0=_0x5a4c43[_0xd107e3(0x41a)];}async function _0x475e03(){const _0x516b43=_0x3b741d;if(_0x516b43(0xbd7)!==_0x516b43(0x3c8)){const _0x24f797=_0x432acb[_0x516b43(0x90f)];if(!_0x24f797){_0x48e450(_0x516b43(0x19f));return;}const _0x4b3998=_0x509294(_0x24f797);if(!_0x4b3998)return;_0x2ee484(!![],_0x516b43(0x922)+_0x4b3998[_0x516b43(0x41a)]+_0x516b43(0xcba));try{const _0x4039f7={'type':'NoirCharacterCard','version':0x1,'name':_0x4b3998['name'],'remark':_0x4b3998['remark'],'persona':_0x4b3998['persona'],'bubbleCss':_0x4b3998[_0x516b43(0x5ee)],'avatar':null,'sprites':{},'worldBooks':[]},_0x130c80=await _0x54e221(_0x516b43(0x395)+_0x4b3998['id']);if(_0x130c80)_0x4039f7['avatar']=await _0xa161cf(_0x130c80);const _0x36645b=[_0x516b43(0x8a7),_0x516b43(0x772),_0x516b43(0x80e),_0x516b43(0x348),_0x516b43(0xaf1)];for(const _0x4df748 of _0x36645b){if(_0x516b43(0x20e)==='jozSD'){const _0x1ebcbd=await _0x54e221(_0x516b43(0x9fc)+_0x4df748+'_'+_0x4b3998['id']);_0x1ebcbd&&(_0x4039f7[_0x516b43(0x873)][_0x4df748]=await _0xa161cf(_0x1ebcbd));}else _0x312970(![]),_0x52fc97(),_0x3af2a3[_0x516b43(0xd1f)]=![];}_0x4b3998[_0x516b43(0xc49)]&&_0x4b3998[_0x516b43(0xc49)]['length']>0x0&&(_0x4039f7[_0x516b43(0x41e)]=_0x4b3998[_0x516b43(0xc49)][_0x516b43(0x257)](_0x17b364=>_0x543bea[_0x516b43(0x41e)][_0x516b43(0xbe8)](_0x5336a7=>_0x5336a7['id']===_0x17b364))[_0x516b43(0x78c)](Boolean)[_0x516b43(0x257)](_0x7f5264=>({'name':_0x7f5264['name'],'content':_0x7f5264['content'],'categoryId':_0x7f5264[_0x516b43(0x903)]||_0x516b43(0x65a)})));const _0x3d62f1=new Set(_0x4039f7['worldBooks']['map'](_0x2d111d=>_0x2d111d[_0x516b43(0x903)]));_0x4039f7[_0x516b43(0x4a4)]=_0x543bea[_0x516b43(0x4a4)][_0x516b43(0x78c)](_0x222652=>_0x3d62f1[_0x516b43(0x403)](_0x222652['id']));const _0x22e6fe=new Blob([JSON[_0x516b43(0x427)](_0x4039f7,null,0x2)],{'type':_0x516b43(0xcb5)}),_0x23491b=URL['createObjectURL'](_0x22e6fe),_0x50330e=document[_0x516b43(0x23f)]('a');_0x50330e[_0x516b43(0x7f5)]=_0x23491b,_0x50330e[_0x516b43(0x183)]=_0x4b3998[_0x516b43(0x41a)]+_0x516b43(0x1b9),document['body'][_0x516b43(0x83b)](_0x50330e),_0x50330e[_0x516b43(0x779)](),document[_0x516b43(0x936)]['removeChild'](_0x50330e),URL[_0x516b43(0x6eb)](_0x23491b);}catch(_0x5705ea){console[_0x516b43(0xb1e)](_0x516b43(0x6ae),_0x5705ea),_0x48e450(_0x516b43(0x9bc)+_0x5705ea[_0x516b43(0x979)]);}finally{_0x2ee484(![]);}}else _0x420e5a['textContent']=_0x1cfd36[_0x516b43(0x3c2)],_0x23701d(_0x5cfaf1,_0x34f6c9[_0x516b43(0x6c0)]);}async function _0x17d41e(_0x53578a){const _0x56c667=_0x3b741d;if(_0x56c667(0x2d5)!=='EHMJE'){const _0x1271ba=_0x53578a['target'][_0x56c667(0x730)][0x0];if(!_0x1271ba)return;_0x2ee484(!![],_0x56c667(0x579));const _0x2951d6=new FileReader();_0x2951d6[_0x56c667(0x14a)]=async _0x246a7e=>{const _0xe42770=_0x56c667;if('JOQbZ'!==_0xe42770(0xcd1))try{const _0x143f38=JSON[_0xe42770(0x576)](_0x246a7e[_0xe42770(0x446)]['result']);if(_0x143f38[_0xe42770(0x711)]!==_0xe42770(0x37b))throw new Error(_0xe42770(0x733));const _0x1f520e=[];_0x143f38['worldBookCategories']&&Array[_0xe42770(0x8e1)](_0x143f38[_0xe42770(0x4a4)])&&(_0xe42770(0x378)!==_0xe42770(0x378)?_0x109a28[_0xe42770(0x4a4)][_0xe42770(0xb36)](_0x38eecc=>{const _0x4d3f20=_0xe42770,_0x40c3f9=_0x1a7140[_0x4d3f20(0x4a4)][_0x4d3f20(0xbe8)](_0x22700a=>_0x22700a['name']===_0x38eecc[_0x4d3f20(0x41a)]);!_0x40c3f9&&_0x1c8a11[_0x4d3f20(0x4a4)][_0x4d3f20(0xb47)]({'id':_0x38eecc['id']||_0x4d3f20(0xc67)+_0x4d00d4[_0x4d3f20(0x63d)](),'name':_0x38eecc[_0x4d3f20(0x41a)]});}):_0x143f38[_0xe42770(0x4a4)][_0xe42770(0xb36)](_0x155ea4=>{const _0x2d581f=_0xe42770,_0x1cc47c=_0x543bea[_0x2d581f(0x4a4)][_0x2d581f(0xbe8)](_0x25de92=>_0x25de92[_0x2d581f(0x41a)]===_0x155ea4[_0x2d581f(0x41a)]);!_0x1cc47c&&('YpEtz'===_0x2d581f(0xd31)?_0x543bea[_0x2d581f(0x4a4)]['push']({'id':_0x155ea4['id']||_0x2d581f(0xc67)+Date[_0x2d581f(0x63d)](),'name':_0x155ea4[_0x2d581f(0x41a)]}):_0x5ebfec[_0x2d581f(0x2d9)]=_0x1665e7['createObjectURL'](_0x2c7319));}));if(_0x143f38[_0xe42770(0x41e)]&&_0x143f38[_0xe42770(0x41e)][_0xe42770(0xc1f)]>0x0){if('fCrnn'===_0xe42770(0x7e9)){const _0x51ca24=_0x4d344d(_0x4f0ac8)['trim']();if(_0x51ca24[_0xe42770(0xca0)](_0xe42770(0x1ea))&&_0x51ca24[_0xe42770(0x159)]('</div>'))return[_0x51ca24];const _0x3bf12e=_0x51ca24[_0xe42770(0x2bf)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0xe42770(0x257)](_0x436ff2=>_0x436ff2[_0xe42770(0xad4)]())['filter'](_0x393d4c);if(_0x3bf12e['length']>0x0)return _0x3bf12e[_0xe42770(0xb41)](0x0,0xc);return[_0x51ca24][_0xe42770(0x78c)](_0x101b80);}else for(const _0x410a12 of _0x143f38[_0xe42770(0x41e)]){let _0x679ab4=_0x543bea[_0xe42770(0x41e)][_0xe42770(0xbe8)](_0xd673e7=>_0xd673e7['name']===_0x410a12[_0xe42770(0x41a)]&&(_0xd673e7['categoryId']||_0xe42770(0x65a))===(_0x410a12[_0xe42770(0x903)]||'default'));if(_0x679ab4)'USCeN'!==_0xe42770(0x869)?_0x3d19cd[_0xe42770(0x1a2)][_0xe42770(0xb47)]({'sender':'ai','content':_0x49a69f[_0xe42770(0xad4)]()}):_0x1f520e[_0xe42770(0xb47)](_0x679ab4['id']);else{if('QvavZ'!=='tqTBH'){const _0x2f12a1={'id':_0xe42770(0x39e)+Date[_0xe42770(0x63d)]()+'_'+Math[_0xe42770(0x754)](),'name':_0x410a12[_0xe42770(0x41a)],'content':_0x410a12[_0xe42770(0x297)],'categoryId':_0x410a12[_0xe42770(0x903)]||_0xe42770(0x65a)};_0x543bea[_0xe42770(0x41e)][_0xe42770(0xb47)](_0x2f12a1),_0x1f520e[_0xe42770(0xb47)](_0x2f12a1['id']);}else{const _0xcc0e1a=_0x5cf453(_0x756153['getHours']())[_0xe42770(0xa9f)](0x2,'0'),_0x2b91bb=_0xe19b57(_0x47044d['getMinutes']())[_0xe42770(0xa9f)](0x2,'0');_0x3385b4['textContent']=_0xcc0e1a+':'+_0x2b91bb;const _0x163491=_0x3175f5[_0xe42770(0xc3f)]()+0x1,_0x1beb94=_0x3d0d51['getDate'](),_0x7b6acd=[_0xe42770(0x229),_0xe42770(0xb9f),_0xe42770(0x66b),_0xe42770(0x182),_0xe42770(0x4e6),_0xe42770(0xb19),'星期六'][_0x2e5171['getDay']()];_0x4cef28[_0xe42770(0x32a)]=_0x163491+'月'+_0x1beb94+'日\x20'+_0x7b6acd;}}}}const _0xa1dda1=_0xe42770(0x569)+Date[_0xe42770(0x63d)]();let _0x598acb=null;if(_0x143f38['avatar']){const _0x43de80=await _0xe092cf(_0x143f38[_0xe42770(0x5ec)]);await _0x567110(_0xe42770(0x395)+_0xa1dda1,_0x43de80),_0x598acb=await _0xa161cf(_0x43de80);}if(_0x143f38[_0xe42770(0x873)])for(const _0x46b209 in _0x143f38[_0xe42770(0x873)]){const _0x4000a8=_0x143f38[_0xe42770(0x873)][_0x46b209];if(_0x4000a8){if(_0xe42770(0x4e1)!==_0xe42770(0x4e1))return(_0x2d27c1?.[_0xe42770(0x24d)]||[])['find'](_0x3214e5=>_0x3214e5['id']===_0x19d056);else{const _0x1e612c=await _0xe092cf(_0x4000a8);await _0x567110(_0xe42770(0x9fc)+_0x46b209+'_'+_0xa1dda1,_0x1e612c);}}}const _0x359d31={'id':_0xa1dda1,'name':_0x143f38[_0xe42770(0x41a)],'remark':_0x143f38[_0xe42770(0xabb)]||'','persona':_0x143f38[_0xe42770(0x367)],'avatar':_0x598acb,'linkedWorldBookIds':_0x1f520e,'bubbleCss':_0x143f38[_0xe42770(0x5ee)]||''};_0x543bea[_0xe42770(0x24d)][_0xe42770(0xb47)](_0x359d31);const _0x57175a={'id':_0xe42770(0xa45)+_0xa1dda1,'type':'private','participantIds':[_0xa1dda1],'boundUserProfileId':_0x543bea[_0xe42770(0x3fc)]};_0x543bea[_0xe42770(0x94b)]['push'](_0x57175a),_0x1a0f1f(),await _0x358a91(),_0x48e450('“'+_0x359d31[_0xe42770(0x41a)]+_0xe42770(0x4b8));}catch(_0xd534f4){'wgzam'===_0xe42770(0x5fe)?(_0x5d364d(![]),_0x744adc[_0xe42770(0xd1f)]=![]):(console[_0xe42770(0xb1e)](_0xe42770(0x703),_0xd534f4),_0x48e450(_0xe42770(0x2c8)+_0xd534f4[_0xe42770(0x979)]));}finally{_0x2ee484(![]),_0x53578a[_0xe42770(0x446)][_0xe42770(0x90f)]='';}else _0x15f586[_0xe42770(0x61b)]=_0x1ef3f6,_0x493982[_0xe42770(0x786)]=_0x3901a0,_0x3191c6[_0xe42770(0x75b)]=![],_0x3d2a21();},_0x2951d6[_0x56c667(0x88b)](_0x1271ba);}else{const _0x2a4f2f=_0x5dc3ae['parse'](_0x1aa03e['target'][_0x56c667(0x668)]);if(_0x2a4f2f[_0x56c667(0x711)]!==_0x56c667(0x5b6)||!_0x2a4f2f[_0x56c667(0x1d2)]||!_0x2a4f2f[_0x56c667(0x43a)])throw new _0x4c53bd('这不是我认证的账本卷轴，导入失败！');_0x29b85a[_0x56c667(0x1d2)]=_0x2a4f2f[_0x56c667(0x1d2)],_0x1dce52[_0x56c667(0x43a)]=_0x2a4f2f[_0x56c667(0x43a)],_0x48c577(),_0x5825b5(![]),_0x976c8d('时空逆转成功！账本已恢复。'),_0x532972();}}function _0x516182(_0x357e37,_0x7bb4c3=[]){const _0x2b528b=_0x3b741d;if(_0x2b528b(0x3ec)!=='jwNyN'){const _0x1725f2=document[_0x2b528b(0x51d)](_0x357e37);_0x1725f2['innerHTML']='';const _0x301fc5=_0x543bea['worldBooks'][_0x2b528b(0x8ea)]((_0x4863d9,_0x1bf005)=>{const _0x17facb=_0x2b528b,_0x5c45cf=_0x1bf005[_0x17facb(0x903)]||'default';return!_0x4863d9[_0x5c45cf]&&(_0x4863d9[_0x5c45cf]=[]),_0x4863d9[_0x5c45cf]['push'](_0x1bf005),_0x4863d9;},{}),_0x12a83f=()=>{const _0x5c3f81=_0x2b528b;_0x357e37==='world-book-checkboxes-container'?_0x5c3f81(0x456)===_0x5c3f81(0x456)?_0x59f608():(_0x55a59c[_0x5c3f81(0xa19)][_0x5c3f81(0xab0)]('unlocked'),_0x288a11['style'][_0x5c3f81(0x424)]='',_0x4f6af8[_0x5c3f81(0x1e2)]['opacity']=''):_0x126c22();},_0x3535a4=[..._0x543bea[_0x2b528b(0x4a4)]];if(_0x301fc5[_0x2b528b(0x65a)]&&!_0x3535a4[_0x2b528b(0xbe8)](_0x1e7aac=>_0x1e7aac['id']===_0x2b528b(0x65a))){if(_0x2b528b(0xb08)!=='kBCni'){const _0x58459b=_0x543bea[_0x2b528b(0x4a4)][_0x2b528b(0x66a)](_0x48d6da=>_0x48d6da['id']==='default');if(!_0x58459b){if('wVnhI'!==_0x2b528b(0x8d6))_0x3535a4[_0x2b528b(0xb47)]({'id':_0x2b528b(0x65a),'name':_0x2b528b(0xba7)});else return _0x2b528b(0x523);}}else _0xfe9359=_0x38c0e8[_0x2b528b(0x760)](_0x2b528b(0x74f)+_0x38131a[_0x2b528b(0x886)]);}_0x3535a4['forEach'](_0x345394=>{const _0x52a3a4=_0x2b528b,_0xbdb66a=_0x301fc5[_0x345394['id']]||[];if(_0xbdb66a[_0x52a3a4(0xc1f)]===0x0)return;const _0x2c586f=document[_0x52a3a4(0x23f)](_0x52a3a4(0xaee));_0x2c586f[_0x52a3a4(0xa9d)]=_0x52a3a4(0xa2e);const _0x19b8f2=_0xbdb66a[_0x52a3a4(0x89f)](_0x4b2ffd=>_0x7bb4c3[_0x52a3a4(0x32d)](_0x4b2ffd['id']));_0x2c586f[_0x52a3a4(0x4d5)]=_0x52a3a4(0xca6)+_0x345394['id']+'\x22\x20'+(_0x19b8f2?_0x52a3a4(0xaf0):'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>'+_0x345394['name']+_0x52a3a4(0xac0);const _0x26228a=_0x2c586f[_0x52a3a4(0x820)](_0x52a3a4(0x134));_0xbdb66a[_0x52a3a4(0xb36)](_0x31356e=>{const _0x56be2d=_0x52a3a4,_0x4514ad=_0x7bb4c3['includes'](_0x31356e['id']),_0x44dd46=document[_0x56be2d(0x23f)](_0x56be2d(0x3d5));_0x44dd46[_0x56be2d(0xa9d)]=_0x56be2d(0x5b7),_0x44dd46[_0x56be2d(0x4d5)]='<input\x20type=\x22checkbox\x22\x20value=\x22'+_0x31356e['id']+_0x56be2d(0x788)+_0x345394['id']+'\x22\x20'+(_0x4514ad?_0x56be2d(0xaf0):'')+'>\x20'+_0x31356e[_0x56be2d(0x41a)],_0x26228a[_0x56be2d(0x83b)](_0x44dd46);}),_0x1725f2[_0x52a3a4(0x83b)](_0x2c586f);}),_0x1725f2['querySelectorAll']('.wb-category-header')[_0x2b528b(0xb36)](_0x453c0a=>{const _0x1422c9=_0x2b528b;_0x453c0a['addEventListener'](_0x1422c9(0x779),_0x4fcb3d=>{const _0x28bcda=_0x1422c9;if(_0x4fcb3d[_0x28bcda(0x446)][_0x28bcda(0x711)]===_0x28bcda(0x1db))return;const _0x453932=_0x453c0a[_0x28bcda(0x463)],_0x37cc7d=_0x453c0a[_0x28bcda(0x820)](_0x28bcda(0x7a0)),_0x412398=_0x453932['classList']['contains'](_0x28bcda(0x206));_0x453932[_0x28bcda(0xa19)][_0x28bcda(0x52b)](_0x28bcda(0x206),!_0x412398),_0x37cc7d[_0x28bcda(0xa19)][_0x28bcda(0x52b)](_0x28bcda(0x206),!_0x412398);});}),_0x1725f2[_0x2b528b(0x5c4)]('.category-checkbox')[_0x2b528b(0xb36)](_0x10a8f6=>{const _0x51be8c=_0x2b528b;_0x10a8f6[_0x51be8c(0xbc8)]('click',_0x22cd41=>{const _0x4ff145=_0x51be8c,_0x459d95=_0x22cd41[_0x4ff145(0x446)]['dataset'][_0x4ff145(0x903)],_0xf40c2f=_0x22cd41[_0x4ff145(0x446)][_0x4ff145(0xaf0)];_0x1725f2[_0x4ff145(0x5c4)](_0x4ff145(0x617)+_0x459d95+'\x22]')[_0x4ff145(0xb36)](_0x40a86e=>{_0x40a86e['checked']=_0xf40c2f;}),_0x12a83f();});}),_0x1725f2[_0x2b528b(0x5c4)](_0x2b528b(0x45e))['forEach'](_0x52ec18=>{const _0x2a51b7=_0x2b528b;_0x2a51b7(0x22d)!=='RlpWO'?_0x52ec18['addEventListener']('input',_0x4240ef=>{const _0x122c61=_0x2a51b7,_0x477aac=_0x4240ef[_0x122c61(0x446)][_0x122c61(0xa24)][_0x122c61(0x903)],_0x257747=_0x1725f2['querySelectorAll'](_0x122c61(0x617)+_0x477aac+'\x22]'),_0x27eda9=_0x1725f2[_0x122c61(0x5c4)](_0x122c61(0x617)+_0x477aac+'\x22]:checked'),_0x4d1b25=_0x1725f2[_0x122c61(0x820)](_0x122c61(0x72c)+_0x477aac+'\x22]');if(_0x27eda9[_0x122c61(0xc1f)]===0x0)_0x4d1b25[_0x122c61(0xaf0)]=![],_0x4d1b25[_0x122c61(0x850)]=![];else _0x27eda9[_0x122c61(0xc1f)]===_0x257747[_0x122c61(0xc1f)]?(_0x4d1b25[_0x122c61(0xaf0)]=!![],_0x4d1b25[_0x122c61(0x850)]=![]):_0x4d1b25[_0x122c61(0x850)]=!![];_0x12a83f();}):_0x40c99f=_0x1ba9f4[_0x2a51b7(0xcb2)](_0x217201);}),_0x1725f2[_0x2b528b(0x5c4)](_0x2b528b(0x73f))[_0x2b528b(0xb36)](_0x66b51c=>{const _0x50265b=_0x2b528b,_0x8de96a=_0x66b51c['dataset'][_0x50265b(0x903)],_0x1672cc=_0x1725f2[_0x50265b(0x5c4)](_0x50265b(0x617)+_0x8de96a+'\x22]'),_0x244ed3=_0x1725f2[_0x50265b(0x5c4)](_0x50265b(0x617)+_0x8de96a+_0x50265b(0x43d));if(_0x244ed3[_0x50265b(0xc1f)]>0x0&&_0x244ed3['length']<_0x1672cc[_0x50265b(0xc1f)]){if(_0x50265b(0xbbd)!=='BFVNt'){const _0x34226f=_0x57ac56[_0x50265b(0x24d)]['find'](_0x467793=>_0x3dbe4a[_0x50265b(0x184)][_0x50265b(0x32d)](_0x467793['id'])&&_0x467793[_0x50265b(0x41a)]===_0x4fd093);if(_0x34226f)_0x168ffb=_0x34226f['id'];}else _0x66b51c[_0x50265b(0x850)]=!![];}});}else _0x22daef(![]),_0x34d095(_0x2b528b(0x261)+_0xa67a0e['message']);}async function _0xcd88ff(){const _0x56ea06=_0x3b741d;if(_0x56ea06(0x6e6)!==_0x56ea06(0x796)){const _0x423fc9=['normal',_0x56ea06(0x772),_0x56ea06(0x80e),'sad',_0x56ea06(0xaf1)],_0x54e8c8=_0x432acb['value'],_0x53763f=document[_0x56ea06(0x51d)]('char-edit-bind-user')[_0x56ea06(0x90f)],_0x3184c0=_0x778b31[_0x56ea06(0x730)][0x0],_0x45c832=_0x889c55[_0x56ea06(0x730)][0x0],_0x4f69e3=_0x47cf12[_0x56ea06(0x730)][0x0],_0x1e4350=document['querySelectorAll'](_0x56ea06(0xb2c)),_0x436d29=Array[_0x56ea06(0x382)](_0x1e4350)[_0x56ea06(0x257)](_0x2893cb=>_0x2893cb[_0x56ea06(0x90f)]),_0x4bd687={'name':_0xa5295e[_0x56ea06(0x90f)][_0x56ea06(0xad4)](),'remark':_0x69cecd[_0x56ea06(0x90f)][_0x56ea06(0xad4)](),'persona':_0x31b822['value'][_0x56ea06(0xad4)](),'linkedWorldBookIds':_0x436d29,'bubbleCss':document[_0x56ea06(0x51d)](_0x56ea06(0x57c))['value'][_0x56ea06(0xad4)](),'avatarFrameUrl':document[_0x56ea06(0x51d)]('char-avatar-frame-url')['value'][_0x56ea06(0xad4)](),'userAvatarFrameUrl':document[_0x56ea06(0x51d)]('user-avatar-frame-url-in-chat')[_0x56ea06(0x90f)][_0x56ea06(0xad4)]()};if(!_0x4bd687['name']){_0x48e450(_0x56ea06(0xb06));return;}try{if(_0x56ea06(0x4f7)!==_0x56ea06(0x4f7))_0x1c2ec1[_0x56ea06(0x2d9)]=_0x2ce3a2[_0x56ea06(0xcb2)](_0x922993),_0x3fe3a2[_0x56ea06(0x1e2)][_0x56ea06(0x930)]=_0x56ea06(0x94a),_0x1a613d[_0x56ea06(0x1e2)][_0x56ea06(0x643)]=_0x56ea06(0x2f6);else{let _0x5cc9ad=_0x54e8c8;if(_0x54e8c8){const _0x560c76=_0x543bea[_0x56ea06(0x24d)][_0x56ea06(0xbe8)](_0x3a484a=>_0x3a484a['id']===_0x54e8c8);_0x560c76&&(_0x56ea06(0xb94)==='DRHRF'?(_0xb97c9c[_0x56ea06(0xa10)](),_0x57e47f()):Object['assign'](_0x560c76,_0x4bd687));}else{const _0x34c333=_0x56ea06(0x569)+Date[_0x56ea06(0x63d)]();_0x5cc9ad=_0x34c333;const _0xfa50f2={'id':_0x34c333,..._0x4bd687};_0xfa50f2['avatar']=_0x3184c0?await _0x2cc568(_0x3184c0):_0x46536a,_0x543bea[_0x56ea06(0x24d)][_0x56ea06(0xb47)](_0xfa50f2);const _0x1211a7={'id':_0x56ea06(0xa45)+_0x34c333,'type':_0x56ea06(0x5fc),'participantIds':[_0x34c333],'listenTogetherSession':null};_0x543bea[_0x56ea06(0x94b)]['push'](_0x1211a7);}const _0x1b3170=_0x543bea[_0x56ea06(0x94b)][_0x56ea06(0xbe8)](_0x5b7e95=>_0x5b7e95['type']===_0x56ea06(0x5fc)&&_0x5b7e95[_0x56ea06(0x184)][_0x56ea06(0x32d)](_0x5cc9ad));_0x1b3170&&(_0x1b3170[_0x56ea06(0x16c)]=_0x53763f);if(_0x3184c0)await _0x567110(_0x56ea06(0x395)+_0x5cc9ad,_0x3184c0);if(_0x45c832)await _0x567110(_0x56ea06(0x33d)+_0x5cc9ad,_0x45c832);if(_0x4f69e3)await _0x567110(_0x56ea06(0x352)+_0x5cc9ad,_0x4f69e3);for(const _0x6e079d of _0x423fc9){const _0x2b2269=document[_0x56ea06(0x51d)](_0x56ea06(0xb4d)+_0x6e079d+_0x56ea06(0xa3c))[_0x56ea06(0x730)][0x0];if(_0x2b2269)await _0x567110(_0x56ea06(0x9fc)+_0x6e079d+'_'+_0x5cc9ad,_0x2b2269);}_0x1a0f1f(),_0x358a91(),_0x48e450(_0x56ea06(0xb17)),_0x53ffb2('chat',_0x56ea06(0xb5f));if(!_0x54e8c8){if(_0x56ea06(0x168)!==_0x56ea06(0x168))_0x425889(_0x1bb40d['id']),_0x19d15e(_0x56ea06(0x6a6)+_0xbba779['name']+_0x56ea06(0x283)),_0x19333a(![]);else{const _0x452058=_0x56ea06(0xa45)+_0x5cc9ad;_0xead58c(_0x452058),_0x517704(!![]);}}}}catch(_0xb067a3){if(_0x56ea06(0x51a)!=='sjSYm')console['error'](_0x56ea06(0x173),_0xb067a3),_0x48e450(_0x56ea06(0x4cf)+_0xb067a3[_0x56ea06(0x979)]);else{const _0x30f84a=_0x4082c5[_0x56ea06(0x5f6)](),_0x17d066=_0x28d3cc(_0x445acc[_0x56ea06(0xc3f)]()+0x1)[_0x56ea06(0xa9f)](0x2,'0'),_0xcf723c=_0x5e18cb(_0x1763a0['getDate']())[_0x56ea06(0xa9f)](0x2,'0');return _0x30f84a+'-'+_0x17d066+'-'+_0xcf723c;}}if(_0x3184c0||_0x45c832||_0x4f69e3||_0x423fc9['some'](_0x24bd9c=>document[_0x56ea06(0x51d)](_0x56ea06(0xb4d)+_0x24bd9c+_0x56ea06(0xa3c))[_0x56ea06(0x730)][0x0]))_0x48e450(_0x56ea06(0x97f)),setTimeout(()=>location[_0x56ea06(0x5f2)](),0x5dc);else{_0x53ffb2(_0x56ea06(0x69f),_0x56ea06(0xb5f));if(!_0x54e8c8){const _0x2a6b3e='chat_char_'+Date[_0x56ea06(0x63d)]();_0xead58c(_0x2a6b3e),_0x517704(!![]);}}}else _0x56940d[_0x56ea06(0xb47)](_0x286aaf[_0x56ea06(0xb41)](_0x319a60,_0xb6326a+_0x536d77));}function _0x451c7d(){const _0x1cca6e=_0x3b741d;_0x4b5e81[_0x1cca6e(0x90f)]='',_0x5d2965[_0x1cca6e(0x4d5)]='';if(_0x543bea[_0x1cca6e(0x24d)][_0x1cca6e(0xc1f)]<0x2){if(_0x1cca6e(0x875)!==_0x1cca6e(0x875)){const _0x3975b7=_0x22fb32[_0x1cca6e(0x170)](_0xfdc1d9,_0x1cca6e(0x96c)),_0x212cd9=_0x3975b7[_0x1cca6e(0x327)](_0x1a16ed),_0x1a3500=_0x212cd9[_0x1cca6e(0x3f8)]({'id':_0x412cdd,'data':_0x10363b});_0x1a3500[_0x1cca6e(0x487)]=()=>_0x37369b(),_0x1a3500['onerror']=()=>_0x20916b(_0x1a3500[_0x1cca6e(0xb1e)]);}else{_0x48e450(_0x1cca6e(0x4f1));return;}}_0x543bea[_0x1cca6e(0x24d)]['forEach'](_0x25f1fc=>{const _0x4c0d3f=_0x1cca6e,_0xd78a16=document[_0x4c0d3f(0x23f)]('li');_0xd78a16[_0x4c0d3f(0xa9d)]=_0x4c0d3f(0x6ab),_0xd78a16['innerHTML']=_0x4c0d3f(0xa0f)+_0x25f1fc['id']+'\x22\x20data-id=\x22'+_0x25f1fc['id']+_0x4c0d3f(0xd23)+(_0x25f1fc[_0x4c0d3f(0x5ec)]||_0x46536a)+_0x4c0d3f(0x193)+_0x25f1fc['id']+_0x4c0d3f(0xbb7)+_0x25f1fc[_0x4c0d3f(0x41a)]+'</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5d2965[_0x4c0d3f(0x83b)](_0xd78a16);}),_0x53ffb2(_0x1cca6e(0x2fd),_0x1cca6e(0x13f));}function _0x47eb22(){const _0x1e0208=_0x3b741d,_0x30c437=_0x4b5e81[_0x1e0208(0x90f)][_0x1e0208(0xad4)]();if(!_0x30c437){_0x48e450(_0x1e0208(0x482));return;}const _0x4275b2=Array['from'](_0x5d2965[_0x1e0208(0x5c4)](_0x1e0208(0x9df)))[_0x1e0208(0x257)](_0x27c1b5=>_0x27c1b5['dataset']['id']);if(_0x4275b2[_0x1e0208(0xc1f)]<0x2){_0x48e450(_0x1e0208(0xab8));return;}const _0x26a5e2={'id':'chat_group_'+Date['now'](),'type':'group','name':_0x30c437,'participantIds':_0x4275b2};_0x543bea[_0x1e0208(0x94b)][_0x1e0208(0xb47)](_0x26a5e2),_0x543bea['activeChatId']=_0x26a5e2['id'],_0x1a0f1f(),_0x358a91(),_0x258f32(),_0x26dafa(),_0x48e450('群聊“'+_0x30c437+_0x1e0208(0xca9)),_0x53ffb2('chat',_0x1e0208(0x2fd));}_0xd34e1f[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x39433c[_0x3b741d(0x779)]()),_0x66315d[_0x3b741d(0xbc8)]('click',_0x5f22d1),_0x39433c['addEventListener'](_0x3b741d(0xb2a),_0x517d20),_0x54d2ed[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x34a11f),_0x57b022['addEventListener'](_0x3b741d(0x779),()=>_0xc9b4fc[_0x3b741d(0xa19)]['remove'](_0x3b741d(0x6db))),_0x24c19d[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0xc9b4fc[_0x3b741d(0xa19)]['remove']('show')),_0x543224[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x4a51a4=_0x3b741d;'bowZj'==='bowZj'?(_0x3bb4a5[_0x4a51a4(0x22c)](),navigator[_0x4a51a4(0xa17)]['writeText'](_0x3bb4a5[_0x4a51a4(0x90f)])[_0x4a51a4(0x842)](()=>{_0x48e450('已复制到剪贴板！');})[_0x4a51a4(0x634)](_0x1ee009=>{const _0x51715b=_0x4a51a4;if(_0x51715b(0xbe3)!==_0x51715b(0xbe3)){const _0x19c924=_0x129eb6['musicPlaylist'][_0x102546['currentlyPlayingIndex']],_0x1bddc6=_0x572a2f[_0x51715b(0x75b)];_0x245e23(),_0x1ef5b8();const _0x46f9a7=_0x3346ff[_0x51715b(0x5c4)](_0x51715b(0xc9a));_0x46f9a7[_0x51715b(0xb36)](_0x4859ec=>{const _0x4abc79=_0x51715b,_0x29bc26=_0x4859ec['dataset'][_0x4abc79(0x7ec)],_0x306b83=_0x4859ec['querySelector'](_0x4abc79(0x41c));if(!_0x306b83)return;_0x19c924&&_0x29bc26===_0x19c924['id']&&_0x1bddc6?_0x306b83[_0x4abc79(0x32a)]='❚❚':_0x306b83['textContent']='▶';});}else _0x48e450(_0x51715b(0x379));})):_0x15e46e();}),_0x29a097[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x57dcde),_0x440989['addEventListener']('click',_0x7fc6ff),_0x1e4d45[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53f508['classList'][_0x3b741d(0xab0)]('show')),_0x8a4640[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53f508[_0x3b741d(0xa19)][_0x3b741d(0xab0)](_0x3b741d(0x6db))),_0x89bc79[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x889c55[_0x3b741d(0x779)]()),_0x38f216['addEventListener'](_0x3b741d(0x779),()=>_0x47cf12[_0x3b741d(0x779)]()),_0x889c55[_0x3b741d(0xbc8)](_0x3b741d(0xb2a),_0xabb5d1=>{const _0x250741=_0x3b741d;if(_0x250741(0xd50)==='cSmkt'){const _0x12769e=_0xabb5d1['target']['files'][0x0];if(!_0x12769e)return;const _0x379c85=URL[_0x250741(0xcb2)](_0x12769e);_0x89bc79[_0x250741(0x1e2)]['backgroundImage']=_0x250741(0x744)+_0x379c85+'\x27)';}else{const _0x3eb88d=_0x5d14e6[_0x250741(0x51d)](_0x250741(0x6d2));if(!_0x3eb88d)return;const _0x56d325=_0x1c5a2e[_0x250741(0x760)]('themeLightness')||'80';_0x1572b2[_0x250741(0x713)][_0x250741(0x1e2)][_0x250741(0xcac)](_0x250741(0x4a3),_0x56d325+'%'),_0x3eb88d[_0x250741(0x90f)]=_0x56d325,_0x3eb88d['addEventListener']('input',()=>{const _0xf7c67c=_0x250741,_0x3019a9=_0x3eb88d[_0xf7c67c(0x90f)];_0x4a7b16[_0xf7c67c(0x713)][_0xf7c67c(0x1e2)][_0xf7c67c(0xcac)]('--primary-lightness',_0x3019a9+'%'),_0x365ab8['setItem'](_0xf7c67c(0xd2e),_0x3019a9),_0x174106();});}}),_0x47cf12[_0x3b741d(0xbc8)](_0x3b741d(0xb2a),_0x22c2f8=>{const _0x496982=_0x3b741d,_0x2f0d6e=_0x22c2f8[_0x496982(0x446)][_0x496982(0x730)][0x0];if(!_0x2f0d6e)return;const _0x371497=URL[_0x496982(0xcb2)](_0x2f0d6e);_0x38f216[_0x496982(0x1e2)][_0x496982(0xbd8)]='url(\x27'+_0x371497+'\x27)';}),_0x314fbe['addEventListener'](_0x3b741d(0x779),()=>_0x1e0369[_0x3b741d(0x779)]()),_0x73416b[_0x3b741d(0xbc8)]('click',()=>{const _0x13595d=_0x3b741d;localStorage[_0x13595d(0x584)]('customFeedWallpaper'),_0x279505(),_0x48e450(_0x13595d(0x245));}),_0x1e0369['addEventListener'](_0x3b741d(0xb2a),async _0x5814dd=>{const _0x435ff2=_0x3b741d;if('Xgnth'!==_0x435ff2(0x155)){const _0x32ac4c=_0x5814dd[_0x435ff2(0x446)]['files'][0x0];if(!_0x32ac4c)return;try{if('FIptE'==='KWwkq')_0x29d960[_0x435ff2(0xc7f)]===_0x435ff2(0x778)&&!_0x236eb6[_0x435ff2(0xaf2)]&&(_0x11209d[_0x435ff2(0x9cb)](),_0x4e8ba0());else{const _0x5567e7=await _0x2cc568(_0x32ac4c);localStorage[_0x435ff2(0xa1c)](_0x435ff2(0x3e3),_0x5567e7),_0x279505(),_0x48e450(_0x435ff2(0x859));}}catch(_0x12a0e0){_0x435ff2(0xbfb)!==_0x435ff2(0xbfb)?_0x386e73[_0x435ff2(0x51d)](_0x435ff2(0x3b4))['click']():_0x48e450(_0x435ff2(0xcdc)+_0x12a0e0[_0x435ff2(0x979)]);}}else _0x459e7e[_0x435ff2(0x4d5)]=_0x435ff2(0x3ca)+_0x144f0f+_0x435ff2(0x3ab)+_0xd10c21[_0x435ff2(0xd09)]+_0x435ff2(0x699)+_0x333e92['artist']+'</div></div></div>';}),document[_0x3b741d(0x51d)](_0x3b741d(0x334))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0x69f),_0x3b741d(0x868))),document['getElementById'](_0x3b741d(0x3df))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x2712b0);const _0x4ada99=document[_0x3b741d(0x51d)](_0x3b741d(0xb4c)),_0x1700c1=document['getElementById'](_0x3b741d(0x5a2));_0x4ada99['addEventListener'](_0x3b741d(0x779),()=>_0x1700c1[_0x3b741d(0x779)]()),_0x1700c1[_0x3b741d(0xbc8)]('change',_0x525923=>{const _0x511d65=_0x3b741d;if(_0x511d65(0x40e)==='klOVC'){const _0x172140=_0x525923[_0x511d65(0x446)]['files'][0x0];if(!_0x172140)return;const _0x4b2e4c=URL['createObjectURL'](_0x172140);_0x4ada99[_0x511d65(0x2d9)]=_0x4b2e4c,_0x4ada99[_0x511d65(0x14a)]=()=>{const _0xb660a9=_0x511d65;URL[_0xb660a9(0x6eb)](_0x4b2e4c);};}else _0x85eaa9[_0x511d65(0x4d5)]=_0x511d65(0x23b)+_0x3c3a87+'\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>';});const _0x1aaf3e=document[_0x3b741d(0x51d)](_0x3b741d(0x1a7))[_0x3b741d(0x2a6)],_0x44ecc2=document[_0x3b741d(0x51d)](_0x3b741d(0x330)),_0x4455be=document[_0x3b741d(0x51d)](_0x3b741d(0x1a7));_0x1aaf3e[_0x3b741d(0xbc8)]('click',()=>_0x44ecc2[_0x3b741d(0x779)]()),_0x44ecc2[_0x3b741d(0xbc8)]('change',_0x2e560e=>{const _0x36dc6f=_0x3b741d;if(_0x36dc6f(0x407)===_0x36dc6f(0x407)){const _0x7ea78f=_0x2e560e[_0x36dc6f(0x446)]['files'][0x0];if(!_0x7ea78f)return;const _0x204a75=URL[_0x36dc6f(0xcb2)](_0x7ea78f);document['getElementById'](_0x36dc6f(0x1a7))[_0x36dc6f(0x1e2)][_0x36dc6f(0xbd8)]=_0x36dc6f(0x744)+_0x204a75+'\x27)';}else _0x2851a3[_0x36dc6f(0x405)]=![];});const _0x23ab70=document[_0x3b741d(0x820)](_0x3b741d(0x18c)),_0x587d07=document[_0x3b741d(0x51d)](_0x3b741d(0x70b));_0x23ab70[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x5c0569=>{const _0x445295=_0x3b741d;_0x5c0569[_0x445295(0xa10)](),_0x587d07[_0x445295(0xa19)][_0x445295(0x52b)](_0x445295(0x462)),_0x23ab70[_0x445295(0xa19)][_0x445295(0x52b)](_0x445295(0x206));}),_0x587d07['addEventListener'](_0x3b741d(0xb2a),_0x126c22),document[_0x3b741d(0x51d)](_0x3b741d(0x658))['addEventListener']('click',_0x26f682),document['getElementById']('group-delete-button')['addEventListener'](_0x3b741d(0x779),async()=>{const _0x52a3f5=_0x3b741d,_0x4358bb=_0x577515();if(!_0x4358bb||_0x4358bb[_0x52a3f5(0x711)]!==_0x52a3f5(0x91b))return;const _0x2e0408=await _0x44efa2(_0x52a3f5(0xcfb)+_0x4358bb['name']+_0x52a3f5(0x1be));_0x2e0408&&(_0x5047c2(_0x4358bb['id']),_0x48e450(_0x52a3f5(0x251)),_0x53ffb2(_0x52a3f5(0x69f)),_0x517704(![]));});const _0x37b564=document[_0x3b741d(0x820)]('.custom-multiselect\x20.select-box'),_0x3f3fff=document[_0x3b741d(0x51d)](_0x3b741d(0x43e));_0x37b564[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x2fc305=>{const _0x262557=_0x3b741d;_0x2fc305['stopPropagation'](),_0x3f3fff[_0x262557(0xa19)][_0x262557(0x52b)](_0x262557(0x462)),_0x37b564[_0x262557(0xa19)]['toggle'](_0x262557(0x206));}),_0x3f3fff['addEventListener']('change',_0x59f608),document[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x5230f9=>{const _0x1c03b1=_0x3b741d;!document[_0x1c03b1(0x820)](_0x1c03b1(0xa2f))[_0x1c03b1(0x9ff)](_0x5230f9['target'])&&(_0x3f3fff[_0x1c03b1(0xa19)][_0x1c03b1(0xab0)](_0x1c03b1(0x462)),_0x37b564[_0x1c03b1(0xa19)][_0x1c03b1(0xab0)]('expanded'));}),_0x2baf29[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x41fb51=_0x3b741d;_0x8131b7(),_0x53ffb2(_0x41fb51(0x4e4),_0x41fb51(0x3fb));}),document['getElementById'](_0x3b741d(0x69a))[_0x3b741d(0xbc8)]('click',()=>_0x53ffb2(_0x3b741d(0x3fb),'worldBook')),document['getElementById']('add-world-book-button')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x28026e()),document[_0x3b741d(0x51d)](_0x3b741d(0x66e))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x5a09dd=_0x3b741d;_0x5a09dd(0xcbd)===_0x5a09dd(0xa8f)?_0x271a58[_0x5a09dd(0x51d)](_0x5a09dd(0x7d5))[_0x5a09dd(0x939)]():(_0x8131b7(),_0x53ffb2(_0x5a09dd(0x4e4),_0x5a09dd(0xc73)));}),document[_0x3b741d(0x51d)](_0x3b741d(0xc07))['addEventListener'](_0x3b741d(0x779),_0x21abb2),document[_0x3b741d(0x51d)](_0x3b741d(0xa6d))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x403c2b),_0x191d8b['addEventListener'](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0xad7),_0x3b741d(0x3fb))),_0x3b183d[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0x3fb),_0x3b741d(0xad7))),_0x40fe86[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x500688['click']()),_0x500688[_0x3b741d(0xbc8)](_0x3b741d(0xb2a),async _0x2a85eb=>{const _0x418a54=_0x3b741d;if('MJetl'!==_0x418a54(0x7f1))_0x3f2f2f[_0x418a54(0xd1f)]&&_0x581616['currentAbortController']&&(_0x3b3bda[_0x418a54(0x68b)](_0x418a54(0x3e7)),_0x55849f[_0x418a54(0x320)][_0x418a54(0x627)]('User\x20cancelled'),_0x119119[_0x418a54(0x320)]=null),_0x2e372a['isGenerating']=![],_0x9d5064(![]);else{const _0xc5e072=_0x2a85eb['target'][_0x418a54(0x730)][0x0];if(!_0xc5e072)return;await _0x1cbe3c(_0xc5e072);}}),_0x551322[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x1a416b=_0x3b741d;if(_0x1a416b(0x3d3)==='JoEyF')_0x358a91(),_0x53ffb2(_0x1a416b(0x69f),_0x1a416b(0x3fb));else{const _0x3017b3=_0x259b2f();if(_0x3017b3&&_0x3017b3['type']===_0x1a416b(0x5fc))_0x2794af(_0x3017b3[_0x1a416b(0x184)][0x0]);else _0x3017b3&&_0x3017b3[_0x1a416b(0x711)]===_0x1a416b(0x91b)&&_0x1e9af1(_0x3017b3['id']);}}),_0x5aa1c4[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x3f41da=_0x3b741d;if(_0x3f41da(0xb58)!==_0x3f41da(0xb58))_0x24ce08[_0x3f41da(0x51d)]('editing-world-book-id')[_0x3f41da(0x90f)]='',_0x4dbc8b[_0x3f41da(0x51d)](_0x3f41da(0x16e))['textContent']=_0x3f41da(0xc5c),_0x149f4a['getElementById'](_0x3f41da(0x505))['value']='',_0x282a05[_0x3f41da(0x51d)](_0x3f41da(0x4dc))[_0x3f41da(0x90f)]='',_0x18e856['value']=_0x6b8370[_0x3f41da(0x3b3)];else{_0x2f5b96();const _0x2d3c72=(_0x543bea[_0x3f41da(0xaff)]['endpoint']||'')['includes'](_0x21523);_0x26c49f[_0x3f41da(0xaa9)]=_0x2d3c72,_0x53ffb2('settings',_0x3f41da(0x3fb));}}),_0x143d18[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0x3fb),_0x3b741d(0x38e))),_0x1b193f[_0x3b741d(0xbc8)]('click',()=>{const _0x49b244=_0x3b741d;_0x1834e0(),document[_0x49b244(0x51d)](_0x49b244(0x645))[_0x49b244(0xa19)][_0x49b244(0xab0)]('show'),document[_0x49b244(0x51d)](_0x49b244(0x1de))[_0x49b244(0x1e2)][_0x49b244(0x930)]='none',setTimeout(()=>{const _0x440a62=_0x49b244;'rTlfE'===_0x440a62(0x400)?_0x53ffb2(_0x440a62(0x3fb),'chat'):(_0x296da3(_0xd30e09),_0x198f7e('livestreamReplayView',_0x440a62(0x226)));},0x14);}),_0x1446f2['addEventListener'](_0x3b741d(0x779),()=>{const _0x4e326b=_0x3b741d;_0x1834e0(),document['getElementById']('chat-sticker-panel')[_0x4e326b(0xa19)][_0x4e326b(0xab0)]('show'),document[_0x4e326b(0x51d)](_0x4e326b(0x1de))[_0x4e326b(0x1e2)][_0x4e326b(0x930)]=_0x4e326b(0x2f6),setTimeout(()=>{_0x517704(![]);},0x14);}),_0x1e8089['addEventListener']('click',()=>{const _0x3b2757=_0x3b741d;if(_0x3b2757(0xc7b)!==_0x3b2757(0xc7b)){const _0x179633=_0x22cbe0(_0x262d3a['senderId']||_0x11cf25[_0x3b2757(0x80c)]);_0x695550=_0x179633?.[_0x3b2757(0x41a)]||'角色',_0x539d21=_0x3b2757(0x86f);}else _0x53ffb2('chat',_0x3b2757(0xb5f));}),_0x4ffafd[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x10551b=_0x3b741d;'IVYeG'===_0x10551b(0x8e8)?_0x5ab421[_0x10551b(0xa19)][_0x10551b(0x25d)](_0x10551b(0x6db)):(_0x3439e0[_0x10551b(0x1e2)][_0x10551b(0x135)]=0x55*_0x181417+'%',_0x2b54aa[_0x10551b(0x1e2)][_0x10551b(0x34a)]=0x55*_0x3f1150+'%',_0x4cd63f[_0x10551b(0x1e2)][_0x10551b(0xa12)]=_0x248d7c+'%',_0x46fb0a[_0x10551b(0x1e2)][_0x10551b(0x49d)]=_0x3de9cb+'%',_0x25592e[_0x10551b(0x1e2)][_0x10551b(0x424)]=_0x10551b(0x3aa));}),_0xd3db11[_0x3b741d(0xbc8)]('click',()=>_0x5680ba()),_0x118cea[_0x3b741d(0xbc8)]('click',_0x183583);function _0x171c07(_0x1ae752){const _0x55e362=_0x3b741d;if(!_0x1ae752||_0x1ae752[_0x55e362(0x711)]!==_0x55e362(0x91b))return;const _0x2d41ab='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x55e362(0x936)][_0x55e362(0x125)](_0x55e362(0x2a7),_0x2d41ab);const _0x5047d6=document[_0x55e362(0x51d)](_0x55e362(0xa28)),_0x36354d=_0x5047d6['querySelector'](_0x55e362(0x9fd)),_0x59d214=document[_0x55e362(0x51d)](_0x55e362(0xc93)),_0x116f18=document['getElementById'](_0x55e362(0x82f)),_0x41610e=document[_0x55e362(0x51d)](_0x55e362(0x11d)),_0x42b3bf=document['getElementById'](_0x55e362(0xa99)),_0xf6f759=document['getElementById'](_0x55e362(0xbab)),_0x470775=()=>_0x5047d6[_0x55e362(0xab0)]();_0x59d214[_0x55e362(0xbc8)]('click',async()=>{const _0x4b239d=_0x55e362;if(_0x4b239d(0x3ce)!==_0x4b239d(0x3ce)){_0x157a69[_0x4b239d(0xaff)]['endpoint']=_0x101d61['value'][_0x4b239d(0xad4)](),_0x151c8d[_0x4b239d(0xaff)][_0x4b239d(0xc7f)]=_0x7a8ffc[_0x4b239d(0x90f)][_0x4b239d(0xad4)](),_0x5e82d4[_0x4b239d(0xaff)]['model']=_0x9e85c4[_0x4b239d(0x90f)][_0x4b239d(0xad4)](),_0x2269fe[_0x4b239d(0xaff)][_0x4b239d(0xbf2)]=_0x19d7e8[_0x4b239d(0x51d)](_0x4b239d(0x41f))[_0x4b239d(0x90f)];const _0x49e05c=_0x3e0777(_0x1c4835['value'],0xa);_0x4cf3cb['preferences']['perChatContextLines']=_0x54b41a['isFinite'](_0x49e05c)&&_0x49e05c>0x0?_0x49e05c:0x64,_0x53ded6(),_0x2f7605('设置已保存！');}else{_0x470775();const _0x542d0a=await _0x44efa2('确定要清空群聊\x22'+_0x1ae752[_0x4b239d(0x41a)]+'\x22\x20的聊天记录吗？此操作不可撤销。');if(_0x542d0a){_0x1ae752['id']===_0x543bea[_0x4b239d(0x886)]&&(_0x1834e0(),_0x543bea[_0x4b239d(0xc54)]=[],_0x15b163());try{'mmpUr'===_0x4b239d(0x75e)?(localStorage[_0x4b239d(0x584)]('chatHistory_'+_0x1ae752['id']),_0x48e450(_0x4b239d(0x6a6)+_0x1ae752['name']+'\x22\x20的聊天记录已清空。')):_0x4ffab0?_0x3cd4a5[_0x4b239d(0xa19)][_0x4b239d(0x25d)](_0x4b239d(0x4ea)):_0x59db1b[_0x4b239d(0xa19)][_0x4b239d(0xab0)](_0x4b239d(0x4ea));}catch(_0x38459a){console[_0x4b239d(0xb1e)](_0x4b239d(0x8cf)+_0x1ae752['id'],_0x38459a),_0x48e450(_0x4b239d(0x27b));}}}}),_0x116f18[_0x55e362(0xbc8)]('click',()=>{const _0x531d01=_0x55e362;_0x531d01(0xd12)!=='IDZyv'?(_0x470775(),_0x48e450(_0x531d01(0x80f))):(_0x298411[_0x531d01(0x2d9)]=_0x5e8f47[_0x531d01(0x72e)],_0x4ff800[_0x531d01(0x152)](),_0x20a9cb['textContent']='❚❚');}),_0x41610e[_0x55e362(0xbc8)](_0x55e362(0x779),async()=>{const _0x4c16fb=_0x55e362;_0x470775();const _0x4aa352=prompt(_0x4c16fb(0x3bf),_0x1ae752['name']);_0x4aa352&&_0x4aa352['trim']()&&_0x4aa352!==_0x1ae752[_0x4c16fb(0x41a)]&&(_0x1ae752[_0x4c16fb(0x41a)]=_0x4aa352['trim'](),_0x1a0f1f(),_0x358a91(),_0x258f32(),_0x48e450(_0x4c16fb(0xcdb)+_0x1ae752[_0x4c16fb(0x41a)]+'\x22。'));}),_0x42b3bf['addEventListener']('click',async()=>{const _0x24204b=_0x55e362;if('KKXkR'==='GLxFJ')_0x1e000e[_0x24204b(0xb1e)](_0x24204b(0x7a7),_0x135de2);else{_0x470775();const _0x1d671c=await _0x44efa2(_0x24204b(0x272)+_0x1ae752[_0x24204b(0x41a)]+_0x24204b(0xc6c));_0x1d671c&&(_0x5047c2(_0x1ae752['id']),_0x48e450('群聊\x22'+_0x1ae752['name']+_0x24204b(0x283)),_0x517704(![]));}}),_0x36354d[_0x55e362(0xbc8)](_0x55e362(0x779),_0x470775),_0xf6f759[_0x55e362(0xbc8)]('click',_0x470775);}_0x4e7273[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0xc4cb9e=_0x3b741d;if(_0xc4cb9e(0xa84)!==_0xc4cb9e(0xa84))_0x327ab3[_0xc4cb9e(0xc9f)][_0xc4cb9e(0x753)]=_0x2d4953[_0xc4cb9e(0xaf0)],_0x5a5ff0(),_0x3c1d71();else{const _0x29bccd=_0x577515();if(_0x29bccd&&_0x29bccd[_0xc4cb9e(0x711)]===_0xc4cb9e(0x5fc)){if(_0xc4cb9e(0x841)!==_0xc4cb9e(0x841)){if(!_0x2df550)return;const _0xa755e2=_0x333755[_0xc4cb9e(0x80c)],_0x11031f=_0x62470(_0xa755e2);if(!_0x11031f)return;const _0x11b0e6=_0x883dd8(_0x12436b[_0xc4cb9e(0x51d)](_0xc4cb9e(0x573))[_0xc4cb9e(0x90f)]),_0x3e5598=_0xa73539(_0x420001[_0xc4cb9e(0x51d)](_0xc4cb9e(0xcc7))[_0xc4cb9e(0x90f)]),_0x38d7ed=_0x283a19(_0x376497[_0xc4cb9e(0x51d)](_0xc4cb9e(0x160))['value'])/0x64;_0x11031f[_0xc4cb9e(0x698)]={'x':_0x11b0e6,'y':_0x3e5598,'scale':_0x38d7ed};const _0x35afee=_0x4b0245[_0xc4cb9e(0x51d)](_0xc4cb9e(0x684)),_0x5c394f=0x50*_0x38d7ed;_0x35afee[_0xc4cb9e(0x1e2)][_0xc4cb9e(0x135)]=_0x5c394f+'%',_0x35afee[_0xc4cb9e(0x1e2)][_0xc4cb9e(0x34a)]=_0x5c394f+'%',_0x35afee[_0xc4cb9e(0x1e2)][_0xc4cb9e(0xa12)]=_0x11b0e6+'%',_0x35afee[_0xc4cb9e(0x1e2)][_0xc4cb9e(0x49d)]=_0x3e5598+'%',_0x35afee['style'][_0xc4cb9e(0x424)]=_0xc4cb9e(0x3aa);}else _0x3925e7(_0x29bccd[_0xc4cb9e(0x184)][0x0]);}else _0x29bccd&&_0x29bccd[_0xc4cb9e(0x711)]===_0xc4cb9e(0x91b)&&_0x4fa83c(_0x29bccd['id']);}}),_0x376e7e[_0x3b741d(0xbc8)](_0x3b741d(0x830),_0x5288e1=>{const _0x44b206=_0x3b741d;_0x44b206(0x8ae)===_0x44b206(0x8ae)?_0x5288e1['key']==='Enter'&&!_0x5288e1[_0x44b206(0xaf2)]&&(_0x5288e1[_0x44b206(0x9cb)](),_0x5680ba()):(_0x313374=_0x33b0b4[_0x44b206(0x23f)]('p'),_0x3b1839['className']=_0x44b206(0x1d4),_0x4525db['textContent']='对方正在行动中...',_0x1af470[_0x44b206(0x83b)](_0x2d7752));});const _0x486548=()=>_0x5ab421[_0x3b741d(0xa19)][_0x3b741d(0xab0)]('show');_0x227b50[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x486548),_0x284671[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x486548),_0x22508a[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{_0x486548(),_0x3925e7();}),_0x4ca04f[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{_0x486548(),_0x451c7d();}),_0x27d16f[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x2c0f6f=_0x3b741d;_0x53ffb2(_0x2c0f6f(0x69f),_0x2c0f6f(0x2fd)),_0x517704(![]);}),_0x8cbc09[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x47eb22),_0x36c198[_0x3b741d(0xbc8)]('click',()=>{const _0x9d1ac=_0x3b741d;_0x1e05aa['classList']['toggle'](_0x9d1ac(0x6db));if(_0x1e05aa[_0x9d1ac(0xa19)]['contains']('show')){if(_0x9d1ac(0xca8)!==_0x9d1ac(0x72f))_0x2ee974[_0x9d1ac(0xd3a)]=_0x2ee974[_0x9d1ac(0x983)];else{const _0x29a65e=_0x4139a8[_0x9d1ac(0x23f)]('li');_0x29a65e[_0x9d1ac(0xa9d)]=_0x9d1ac(0x9eb),_0x29a65e[_0x9d1ac(0xa24)][_0x9d1ac(0x37d)]=_0x1f954a['id'],_0x29a65e['innerHTML']=_0x9d1ac(0x4e8)+(_0x3ec068[_0x9d1ac(0x5ec)]||_0x291cb8)+_0x9d1ac(0x557)+_0x2318d6[_0x9d1ac(0x41a)]+_0x9d1ac(0xc55)+(_0x266b09[_0x9d1ac(0xabb)]||'私聊')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x29a65e[_0x9d1ac(0xbc8)](_0x9d1ac(0x779),()=>{_0x32a2de(_0x55355f['id']);}),_0xa5cc01[_0x9d1ac(0x83b)](_0x29a65e);}}}),_0x562d2a[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x5eee11[_0x3b741d(0x779)]());const _0x15648b=document[_0x3b741d(0x51d)](_0x3b741d(0xb93));_0x5eee11['addEventListener'](_0x3b741d(0xb2a),_0x582527),_0x15648b[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x151d66),_0x9d4beb['addEventListener'](_0x3b741d(0x779),_0x2bddc2),_0x5d840e[_0x3b741d(0xbc8)]('click',_0x5308a9),_0x3bc74a[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0xcd88ff),_0x5bfcdd['addEventListener'](_0x3b741d(0x779),_0x26f682),_0x5e7634['addEventListener'](_0x3b741d(0x779),async()=>{const _0x9988be=_0x3b741d,_0x1fe68a=_0x432acb[_0x9988be(0x90f)];if(!_0x1fe68a)return;const _0x1c7ecf=_0x509294(_0x1fe68a);if(!_0x1c7ecf)return;const _0x318329=await _0x44efa2(_0x9988be(0x514)+_0x1c7ecf[_0x9988be(0x41a)]+_0x9988be(0x399));_0x318329&&(_0x23a598(_0x1fe68a),_0x48e450(_0x9988be(0x854)+_0x1c7ecf['name']+'”已删除。'),_0x53ffb2(_0x9988be(0x69f),_0x9988be(0xb5f)),_0x517704(![]));}),_0x4b026a[_0x3b741d(0xbc8)](_0x3b741d(0xa5e),()=>{const _0x27d6b3=_0x3b741d,_0x335f95=_0x4b026a[_0x27d6b3(0x90f)][_0x27d6b3(0xad4)]()[_0x27d6b3(0x32d)](_0x21523);_0x26c49f['disabled']=_0x335f95;});async function _0xd2eea1(){const _0x14efb5=_0x3b741d,_0x1763af=_0x4b026a[_0x14efb5(0x90f)]['trim'](),_0x26654a=_0x3e710d[_0x14efb5(0x90f)]['trim']();if(!_0x1763af||!_0x26654a){if(_0x14efb5(0xb64)!=='SlJyS'){_0x48e450('请先输入\x20API\x20接口地址和密钥。');return;}else _0x510522();}const _0x59691e=_0x1763af[_0x14efb5(0x6ac)](/\/+$/,''),_0x4ae92b=_0x59691e+_0x14efb5(0x4b4);_0x26c49f[_0x14efb5(0xaa9)]=!![],_0x26c49f[_0x14efb5(0x32a)]=_0x14efb5(0xb82),_0x391488[_0x14efb5(0xa19)][_0x14efb5(0xab0)](_0x14efb5(0x6db));try{if('EWmbN'===_0x14efb5(0x186))_0x3aea8c[_0x14efb5(0x1e2)][_0x14efb5(0x930)]=_0x14efb5(0x2f6),_0x43c3f4[_0x14efb5(0x51d)](_0x14efb5(0x393))[_0x14efb5(0x1e2)]['display']='flex';else{const _0x2630a4=await fetch(_0x4ae92b,{'headers':{'Authorization':_0x14efb5(0xc10)+_0x307715(_0x26654a)}});if(!_0x2630a4['ok'])throw new Error(_0x14efb5(0x680)+_0x2630a4['status']);const _0x401a98=await _0x2630a4[_0x14efb5(0x2f8)](),_0x26ae8e=(_0x401a98[_0x14efb5(0xade)]||_0x401a98)['map'](_0x29521a=>_0x29521a['id'])['sort']();if(_0x26ae8e[_0x14efb5(0xc1f)]>0x0)_0x391488[_0x14efb5(0x4d5)]='',_0x26ae8e['forEach'](_0x151545=>{const _0x4c8008=_0x14efb5,_0x20dd40=document[_0x4c8008(0x23f)]('div');_0x20dd40[_0x4c8008(0x32a)]=_0x151545,_0x20dd40[_0x4c8008(0xbc8)](_0x4c8008(0x779),()=>{const _0x32b01b=_0x4c8008;_0x560116[_0x32b01b(0x90f)]=_0x151545,_0x391488[_0x32b01b(0xa19)]['remove'](_0x32b01b(0x6db));}),_0x391488[_0x4c8008(0x83b)](_0x20dd40);}),_0x391488[_0x14efb5(0xa19)]['add'](_0x14efb5(0x6db)),_0x48e450('成功获取\x20'+_0x26ae8e[_0x14efb5(0xc1f)]+_0x14efb5(0x8b8));else{if('JgwaW'==='JgwaW')_0x48e450(_0x14efb5(0xb2d));else{const _0x3a63a8=_0x3028b0[_0x14efb5(0x23f)]('div');_0x3a63a8[_0x14efb5(0xa9d)]=_0x14efb5(0x70c),_0x3a63a8['id']=_0x14efb5(0x157)+_0x51b8dc,_0x1ff121===_0x28f85f['diaryCurrentPage']&&_0x3a63a8[_0x14efb5(0xa19)][_0x14efb5(0x25d)](_0x14efb5(0x167)),_0x14a1b9['forEach'](_0x982137=>{const _0x974dc4=_0x14efb5,_0x289b2a=_0x982137[_0x974dc4(0x7a5)]===_0x974dc4(0x8ed)?_0x974dc4(0x8ed):'ai',_0x581130=_0x982137[_0x974dc4(0x7a5)]===_0x974dc4(0x8ed)?_0x5271d3['name']:_0x1cea38(_0x982137['author'])[_0x974dc4(0x41a)],_0x5802f8=_0x497dc0['createElement']('div');_0x5802f8[_0x974dc4(0xa9d)]=_0x974dc4(0xbe7)+_0x289b2a,_0x5802f8[_0x974dc4(0xa24)]['timestamp']=_0x982137[_0x974dc4(0x11f)],_0x5802f8[_0x974dc4(0x1e2)]['borderBottom']=_0x974dc4(0x2f6),_0x5802f8['style'][_0x974dc4(0x303)]='0',_0x5802f8[_0x974dc4(0x4d5)]=_0x974dc4(0xab1)+_0x581130+_0x974dc4(0xb7e)+new _0x1ba58c(_0x982137[_0x974dc4(0x11f)])[_0x974dc4(0x5f4)](_0x974dc4(0xbd4))+_0x974dc4(0xb84)+_0x982137[_0x974dc4(0x297)]['replace'](/\n/g,_0x974dc4(0x71c))+_0x974dc4(0x6e0),_0x3a63a8['appendChild'](_0x5802f8);}),_0x4c562a[_0x14efb5(0x83b)](_0x3a63a8);}}}}catch(_0x2befac){'qEnFJ'===_0x14efb5(0x2dd)?_0x48e450(_0x14efb5(0x30c)+_0x2befac[_0x14efb5(0x979)]+_0x14efb5(0x15c)):_0x3036e4[_0x14efb5(0x711)]=_0x14efb5(0x685);}finally{if(_0x14efb5(0x3bd)===_0x14efb5(0x3bd))_0x26c49f[_0x14efb5(0xaa9)]=![],_0x26c49f[_0x14efb5(0x32a)]='获取';else{const _0xc60af3=_0x590294[_0x14efb5(0x51d)](_0x287b63);if(_0xc60af3&&_0x5a6ba7)_0xc60af3['src']=_0x4de409['createObjectURL'](_0x3dfe45);}}}_0x26c49f[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x2cf7d9=>{const _0x4641d5=_0x3b741d;if(_0x4641d5(0x45f)!==_0x4641d5(0x9aa))_0x2cf7d9[_0x4641d5(0xa10)](),_0xd2eea1();else{const _0x634162=(_0x492f13-_0x2a0283)/(0x3e8*0x3c);_0x4fb23c+='-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a';}}),document[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x99051a=>{const _0x5bd5da=_0x3b741d;!_0x391488[_0x5bd5da(0x9ff)](_0x99051a[_0x5bd5da(0x446)])&&_0x99051a[_0x5bd5da(0x446)]!==_0x560116&&_0x99051a['target']!==_0x26c49f&&_0x391488[_0x5bd5da(0xa19)][_0x5bd5da(0xab0)](_0x5bd5da(0x6db));});async function _0x2cc568(_0x2e2b4b){return await _0x13bce5(_0x2e2b4b,0x190,0.85);}_0x40bce8[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x1a2639[_0x3b741d(0x779)]()),_0x1a2639[_0x3b741d(0xbc8)](_0x3b741d(0xb2a),async _0x54c111=>{const _0xa95613=_0x3b741d,_0x4e6f93=_0x54c111[_0xa95613(0x446)]['files'][0x0];if(!_0x4e6f93)return;try{if(_0xa95613(0x244)===_0xa95613(0x244)){const _0x3de754=await _0x2cc568(_0x4e6f93),_0x59cc8a=document[_0xa95613(0x51d)](_0xa95613(0xae9));_0x59cc8a[_0xa95613(0x1e2)]['backgroundImage']=_0xa95613(0x744)+_0x3de754+'\x27)',_0x59cc8a['dataset'][_0xa95613(0xbda)]=_0x3de754;}else _0x2bf84c={'speaker':_0x475b16[_0xa95613(0x41a)],'line':_0x399cb4[_0xa95613(0x297)],'emotion':_0xa95613(0x8a7)};}catch(_0x1dc0bf){_0x48e450(_0xa95613(0xcdc)+_0x1dc0bf[_0xa95613(0x979)]);}}),_0x52b51c[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x778b31[_0x3b741d(0x779)]()),_0x778b31[_0x3b741d(0xbc8)]('change',async _0x212ce7=>{const _0xc2e46f=_0x3b741d;if(_0xc2e46f(0x263)!=='TdcPk'){const _0x3edee4=_0x212ce7[_0xc2e46f(0x446)][_0xc2e46f(0x730)][0x0];if(!_0x3edee4)return;try{_0x52b51c[_0xc2e46f(0x2d9)]=await _0x2cc568(_0x3edee4);}catch(_0x3d428a){_0x48e450(_0xc2e46f(0xcdc)+_0x3d428a[_0xc2e46f(0x979)]);}}else _0x6d7d46[_0xc2e46f(0xa19)][_0xc2e46f(0x25d)](_0xc2e46f(0xd29)),_0x4d2b9f[_0xc2e46f(0x4d5)]+=_0xc2e46f(0x23b)+_0x43314c+_0xc2e46f(0xd04);});function _0x28fcbf(){const _0x5d98dd=_0x3b741d,_0x21b50b=document[_0x5d98dd(0x51d)]('chat-sticker-panel');_0x21b50b['innerHTML']='',_0x1ebaa0=![];const _0x58da5d=document[_0x5d98dd(0x23f)](_0x5d98dd(0xaee));_0x58da5d['id']='sticker-panel-controls',_0x58da5d[_0x5d98dd(0x4d5)]=_0x5d98dd(0x79b),_0x21b50b[_0x5d98dd(0x83b)](_0x58da5d);const _0x4a5b35=document[_0x5d98dd(0x51d)](_0x5d98dd(0x9b9)),_0x475f07=document[_0x5d98dd(0x51d)]('sticker-confirm-delete-btn'),_0x340a62=document[_0x5d98dd(0x23f)](_0x5d98dd(0xaee));_0x340a62['style']['display']=_0x5d98dd(0x7de),_0x340a62[_0x5d98dd(0x1e2)][_0x5d98dd(0x2e8)]='repeat(auto-fill,\x20minmax(60px,\x201fr))',_0x340a62['style'][_0x5d98dd(0x749)]=_0x5d98dd(0x44b),_0x340a62[_0x5d98dd(0x1e2)][_0x5d98dd(0x940)]=_0x5d98dd(0x44b),_0x340a62['style'][_0x5d98dd(0x994)]=_0x5d98dd(0x6cf),_0x340a62[_0x5d98dd(0x1e2)]['overflowY']=_0x5d98dd(0x3ee),_0x21b50b[_0x5d98dd(0x83b)](_0x340a62);const _0x117ef1=_0x324dd8();_0x117ef1[_0x5d98dd(0xb36)](_0x4e02b6=>{const _0x3242f9=_0x5d98dd,_0x45be1b=document[_0x3242f9(0x23f)](_0x3242f9(0xaee));_0x45be1b[_0x3242f9(0xa9d)]='sticker-item-wrapper',_0x45be1b[_0x3242f9(0xa24)]['stickerName']=_0x4e02b6['name'];const _0xe8e316=document[_0x3242f9(0x23f)](_0x3242f9(0x93f));_0xe8e316[_0x3242f9(0x2d9)]=_0x4e02b6[_0x3242f9(0x411)],_0xe8e316[_0x3242f9(0x258)]=_0x3242f9(0x4d3),_0xe8e316[_0x3242f9(0x82a)]=_0x4e02b6['name'],_0xe8e316[_0x3242f9(0xa9d)]='sticker-item',_0x45be1b[_0x3242f9(0x83b)](_0xe8e316),_0x340a62[_0x3242f9(0x83b)](_0x45be1b),_0x45be1b[_0x3242f9(0xbc8)](_0x3242f9(0x779),()=>{const _0x1f9244=_0x3242f9;if(_0x1f9244(0x7b0)===_0x1f9244(0x7b0)){if(_0x1ebaa0){if(_0x1f9244(0xbdc)!=='AFmyu'){_0x45be1b[_0x1f9244(0xa19)][_0x1f9244(0x52b)]('selected');const _0x32f8f7=_0x340a62['querySelector'](_0x1f9244(0x285));_0x475f07['classList'][_0x1f9244(0x52b)](_0x1f9244(0x215),!!_0x32f8f7);}else _0x47b246[_0x1f9244(0x41a)]=_0x42d2d6[_0x1f9244(0xad4)](),_0x11f687(),_0x500890(),_0x49e27b(),_0x4ccf08('群名称已更改为\x22'+_0x1f39f3[_0x1f9244(0x41a)]+'\x22。');}else{if(_0x1f9244(0x34b)===_0x1f9244(0x34b))_0x399f12(_0x4e02b6);else{_0x5dd490(_0x1f9244(0x374));return;}}}else _0x5721bf[_0x1f9244(0x51d)](_0x1f9244(0x64f))[_0x1f9244(0x32a)]='（正在构思中...）';});}),_0x4a5b35[_0x5d98dd(0xbc8)](_0x5d98dd(0x779),()=>{const _0x4d001c=_0x5d98dd;_0x1ebaa0=!_0x1ebaa0,_0x21b50b[_0x4d001c(0xa19)]['toggle'](_0x4d001c(0x2f4),_0x1ebaa0),_0x4a5b35[_0x4d001c(0x32a)]=_0x1ebaa0?'完成':'管理',_0x475f07[_0x4d001c(0x1e2)][_0x4d001c(0x930)]=_0x1ebaa0?'block':_0x4d001c(0x2f6),!_0x1ebaa0&&('RVmiS'!==_0x4d001c(0x79c)?(_0x340a62['querySelectorAll'](_0x4d001c(0x285))[_0x4d001c(0xb36)](_0x43f03a=>_0x43f03a[_0x4d001c(0xa19)][_0x4d001c(0xab0)](_0x4d001c(0x3fe))),_0x475f07['classList']['remove'](_0x4d001c(0x215))):_0x462f01?_0x3d95ca(_0x412d4a):_0x143c59(new _0x40babe(_0x4d001c(0xcd2))));}),_0x475f07[_0x5d98dd(0xbc8)](_0x5d98dd(0x779),async()=>{const _0x155bb4=_0x5d98dd,_0x2b4d52=_0x340a62[_0x155bb4(0x5c4)]('.selected');if(_0x2b4d52[_0x155bb4(0xc1f)]===0x0)return;const _0x5e381e=await _0x44efa2(_0x155bb4(0x914)+_0x2b4d52[_0x155bb4(0xc1f)]+'\x20个表情吗？');if(_0x5e381e){const _0xe56add=JSON[_0x155bb4(0x576)](localStorage[_0x155bb4(0x760)](_0x155bb4(0xaf9))||'[]');_0x2b4d52['forEach'](_0x275305=>{const _0x213dcb=_0x155bb4;if('UQeQs'===_0x213dcb(0x293)){const _0x147d33=_0x275305[_0x213dcb(0xa24)][_0x213dcb(0x538)];!_0xe56add[_0x213dcb(0x32d)](_0x147d33)&&_0xe56add['push'](_0x147d33);}else _0x28a300=_0x3ec990['createElement'](_0x213dcb(0x1e2)),_0x33cfd6['id']=_0x213dcb(0x66f)+_0x39a7e8['id'],_0x423945[_0x213dcb(0xa74)][_0x213dcb(0x83b)](_0x4bdac6);}),localStorage[_0x155bb4(0xa1c)]('deletedStickers',JSON[_0x155bb4(0x427)](_0xe56add)),_0x1ebaa0=![],_0x28fcbf(),_0x48e450(_0x155bb4(0xae3));}}),_0x475f07[_0x5d98dd(0x1e2)][_0x5d98dd(0x930)]=_0x5d98dd(0x2f6);const _0x35eb30=document['getElementById'](_0x5d98dd(0xab7)),_0x5a2623=new MutationObserver(()=>{const _0x45e8bf=_0x5d98dd,_0x351032=_0x21b50b[_0x45e8bf(0xa19)][_0x45e8bf(0x9ff)](_0x45e8bf(0x6db));_0x58da5d['classList']['toggle']('visible',_0x351032),!_0x351032&&(_0x1ebaa0&&_0x4a5b35[_0x45e8bf(0x779)]());});_0x5a2623[_0x5d98dd(0x37a)](_0x21b50b,{'attributes':!![],'attributeFilter':[_0x5d98dd(0x2a8)]});}function _0x324dd8(){const _0x586c95=_0x3b741d;if('UxMBp'===_0x586c95(0x336)){const _0x426c59=JSON[_0x586c95(0x576)](localStorage[_0x586c95(0x760)](_0x586c95(0xaf9))||'[]');if(_0x426c59['length']===0x0){if(_0x586c95(0xab5)!==_0x586c95(0xadc))return _0x376928;else _0x41112f['getElementById'](_0x586c95(0xb4d)+_0x2e0c0f+_0x586c95(0x19d))[_0x586c95(0x1e2)][_0x586c95(0xbd8)]='',_0x49a24a['getElementById'](_0x586c95(0xb4d)+_0x2ef376+_0x586c95(0xa3c))[_0x586c95(0x90f)]='';}return _0x376928['filter'](_0x3898c7=>!_0x426c59[_0x586c95(0x32d)](_0x3898c7[_0x586c95(0x41a)]));}else _0x4055d1(_0x586c95(0x30c)+_0x471841['message']+_0x586c95(0x15c));}async function _0x5a6d77(_0x1a1f44){const _0x1384e8=_0x3b741d,_0x1cdb67=await _0x44efa2(_0x1384e8(0x3f5));if(!_0x1cdb67)return;const _0xf4798=_0x543bea[_0x1384e8(0x21c)][_0x1384e8(0xc58)](_0x55ec21=>_0x55ec21['id']===_0x1a1f44);if(_0xf4798>-0x1){if('OPcAw'==='OPcAw')_0x543bea[_0x1384e8(0x21c)][_0x1384e8(0x278)](_0xf4798,0x1),_0x1a0f1f(),_0xe0ec9e(),_0x10fe67(),_0x28f1be(),_0x48e450(_0x1384e8(0xa63));else{_0x10a1ff['getElementById'](_0x1384e8(0x52d))['addEventListener'](_0x1384e8(0x779),_0x5247da),_0x201a24[_0x1384e8(0x51d)]('back-to-livestream-from-settings')[_0x1384e8(0xbc8)](_0x1384e8(0x779),()=>_0x18e11e(_0x1384e8(0x99d),_0x1384e8(0x908))),_0x246ffb[_0x1384e8(0x51d)](_0x1384e8(0x693))['addEventListener'](_0x1384e8(0x779),_0x1f1cfb),_0x1dcf1a['getElementById'](_0x1384e8(0x9a7))['addEventListener'](_0x1384e8(0x779),()=>_0x57c754[_0x1384e8(0x51d)](_0x1384e8(0x2d4))['click']()),_0x421a24['getElementById'](_0x1384e8(0x2d4))[_0x1384e8(0xbc8)](_0x1384e8(0xb2a),_0x9aade=>{const _0xe3f21e=_0x1384e8,_0x1dd28=_0x9aade[_0xe3f21e(0x446)][_0xe3f21e(0x730)][0x0];if(_0x1dd28)_0x451d2f[_0xe3f21e(0x51d)](_0xe3f21e(0x9a7))['style'][_0xe3f21e(0xbd8)]='url(\x27'+_0x14451b[_0xe3f21e(0xcb2)](_0x1dd28)+'\x27)';});const _0x4ffb17=[_0x1384e8(0x8a7),_0x1384e8(0x772),_0x1384e8(0x80e),_0x1384e8(0x348),_0x1384e8(0xaf1)];_0x4ffb17['forEach'](_0x3ea220=>{const _0x237628=_0x1384e8,_0x3e9b5c=_0x1ed3f4['getElementById'](_0x237628(0x43f)+_0x3ea220+_0x237628(0x19d)),_0x5614e6=_0x43f41d[_0x237628(0x51d)](_0x237628(0x43f)+_0x3ea220+_0x237628(0xa3c));_0x3e9b5c[_0x237628(0xbc8)](_0x237628(0x779),()=>_0x5614e6['click']()),_0x5614e6[_0x237628(0xbc8)](_0x237628(0xb2a),_0x317e2f=>{const _0x2662f5=_0x237628,_0x27be77=_0x317e2f['target'][_0x2662f5(0x730)][0x0];if(_0x27be77)_0x3e9b5c[_0x2662f5(0x1e2)][_0x2662f5(0xbd8)]=_0x2662f5(0x744)+_0x132318[_0x2662f5(0xcb2)](_0x27be77)+'\x27)';});});}}}let _0x386365=null;function _0x33bbf9(_0x9999b9){const _0xdd9b72=_0x3b741d;if(_0x386365)clearTimeout(_0x386365);const _0x46cd6e=_0x9999b9[_0xdd9b72(0x446)][_0xdd9b72(0x156)](_0xdd9b72(0xca5));if(!_0x46cd6e)return;const _0x393402=_0x46cd6e[_0xdd9b72(0xa24)]['id'];if(!_0x393402)return;const _0x4ff9f7=()=>{const _0x3b23e5=_0xdd9b72;if(_0x3b23e5(0x5fa)!==_0x3b23e5(0x5fa)){_0x186fbc(_0x3b23e5(0x8d8)+_0x31c0d9+'\x20张旧封面。应用即将刷新。'),_0x297c73(()=>_0x73193[_0x3b23e5(0x5f2)](),0x5dc);return;}else _0x386365=setTimeout(()=>{const _0x53bc36=_0x3b23e5;if(_0x9999b9[_0x53bc36(0x711)]==='touchstart')_0x9999b9[_0x53bc36(0x9cb)]();_0x5a6d77(_0x393402);},0x320);},_0x5d45f4=()=>{if(_0x386365)clearTimeout(_0x386365);};document[_0xdd9b72(0xbc8)](_0xdd9b72(0xb0e),_0x5d45f4,{'once':!![]}),document[_0xdd9b72(0xbc8)](_0xdd9b72(0xbc7),_0x5d45f4,{'once':!![]}),document[_0xdd9b72(0xbc8)]('touchcancel',_0x5d45f4,{'once':!![]}),document['addEventListener'](_0xdd9b72(0x5ad),_0x5d45f4,{'once':!![]}),_0x4ff9f7();}function _0x402406(_0x432ce3){const _0x2a85ca=_0x3b741d,_0x5455af=_0x543bea[_0x2a85ca(0x94b)][_0x2a85ca(0xbe8)](_0x50b388=>_0x50b388['participantIds'][_0x2a85ca(0x32d)](_0x432ce3));if(!_0x5455af)return'';const _0x55eeab=_0x2f2ed1(_0x5455af['id']),_0x268b20=_0x543bea[_0x2a85ca(0x21c)][_0x2a85ca(0x78c)](_0x158663=>_0x158663[_0x2a85ca(0x79e)]===_0x55eeab['id']||!_0x158663[_0x2a85ca(0x79e)]);if(_0x268b20[_0x2a85ca(0xc1f)]===0x0){if(_0x2a85ca(0x907)!==_0x2a85ca(0x76b))return'';else _0x454203[_0x2a85ca(0x969)]=_0x36e33b,_0x528350(_0x3b8208[_0x2a85ca(0x268)],_0x2a85ca(0x8a7));}const _0x2ec435=_0x268b20[_0x2a85ca(0x257)](_0x2723ff=>{const _0x5b296d=_0x2a85ca;if('xsNMR'!==_0x5b296d(0x5ca))_0x5f52ae=_0x5b296d(0x580)+_0x13b7eb+_0x5b296d(0x6a8)+_0x5e289a+_0x5b296d(0x1f3)+_0x506f68+_0x5b296d(0x311)+_0x377adc+_0x5b296d(0x851);else{const _0x3d6ede=_0x2723ff[_0x5b296d(0x711)]===_0x5b296d(0xaa1)?_0x5b296d(0x6c4):'待办';return'-\x20['+_0x3d6ede+']\x20'+_0x2723ff[_0x5b296d(0x637)]+':\x20'+_0x2723ff[_0x5b296d(0x297)];}})[_0x2a85ca(0x4db)]('\x0a');return _0x2a85ca(0xbde)+_0x55eeab['name']+_0x2a85ca(0xb26)+_0x2ec435;}let _0x55a611={'currentDate':new Date(),'selectedDate':_0x47309e()};function _0x6f9412(){const _0x34f47d=_0x3b741d;document[_0x34f47d(0x51d)]('app-calendar')[_0x34f47d(0xbc8)]('click',()=>{const _0x3252a5=_0x34f47d;if(_0x3252a5(0x539)!==_0x3252a5(0x748))_0xe0ec9e(),_0x53ffb2(_0x3252a5(0xb11),'home');else{_0x590356(_0x3252a5(0x482));return;}}),document[_0x34f47d(0x51d)](_0x34f47d(0x4b5))[_0x34f47d(0xbc8)]('click',()=>_0x53ffb2(_0x34f47d(0x3fb),_0x34f47d(0xb11))),document['getElementById']('prev-month-btn')[_0x34f47d(0xbc8)]('click',()=>{const _0xf5c2a3=_0x34f47d;_0x55a611[_0xf5c2a3(0xa61)][_0xf5c2a3(0xb43)](_0x55a611['currentDate'][_0xf5c2a3(0xc3f)]()-0x1),_0xe0ec9e();}),document[_0x34f47d(0x51d)]('next-month-btn')[_0x34f47d(0xbc8)](_0x34f47d(0x779),()=>{const _0x3471bd=_0x34f47d;_0x3471bd(0xb76)===_0x3471bd(0xb76)?(_0x55a611['currentDate'][_0x3471bd(0xb43)](_0x55a611[_0x3471bd(0xa61)][_0x3471bd(0xc3f)]()+0x1),_0xe0ec9e()):_0x11d2d1[_0x3471bd(0x184)]=_0x5946d8[_0x3471bd(0x184)][_0x3471bd(0x78c)](_0x32be1b=>_0x32be1b!==_0x52da61);}),document['getElementById'](_0x34f47d(0x351))[_0x34f47d(0xbc8)](_0x34f47d(0x779),()=>{const _0x29c589=_0x34f47d;_0x29c589(0x42c)!==_0x29c589(0xcbe)?(_0x55a611[_0x29c589(0xa61)]=new Date(),_0x55a611[_0x29c589(0x94e)]=_0x47309e(),_0xe0ec9e()):(_0x38e085(_0x29c589(0x533)),_0x1d4aec(()=>{const _0xbca94f=_0x29c589;_0x538bf3('chat',_0xbca94f(0x3fb)),_0x4e8f8a(()=>_0x1f62d1(),0x64);},0x6a4));}),document['getElementById']('add-event-fab')[_0x34f47d(0xbc8)](_0x34f47d(0x779),()=>{const _0x40403e=_0x34f47d;_0x40403e(0x450)===_0x40403e(0x2b0)?(_0x11b1f4[_0x40403e(0x9cb)](),_0x4b9264()):_0x94dc63(_0x55a611[_0x40403e(0x94e)]);}),document[_0x34f47d(0x51d)](_0x34f47d(0xa90))[_0x34f47d(0xbc8)](_0x34f47d(0x779),_0x3e20bf),document[_0x34f47d(0x51d)](_0x34f47d(0x86c))['addEventListener'](_0x34f47d(0x779),()=>document[_0x34f47d(0x51d)](_0x34f47d(0x1c9))[_0x34f47d(0xa19)]['remove']('show')),document['getElementById'](_0x34f47d(0x3d7))[_0x34f47d(0xbc8)]('click',()=>document['getElementById'](_0x34f47d(0x1c9))['classList'][_0x34f47d(0xab0)]('show'));const _0x1ab703=document[_0x34f47d(0x51d)](_0x34f47d(0x3f0));_0x1ab703[_0x34f47d(0xbc8)](_0x34f47d(0x57e),_0x33bbf9),_0x1ab703[_0x34f47d(0xbc8)](_0x34f47d(0x897),_0x33bbf9,{'passive':![]});}function _0xe0ec9e(){const _0xd88c16=_0x3b741d,_0x152796=_0x55a611[_0xd88c16(0xa61)]['getFullYear'](),_0x24a9c3=_0x55a611[_0xd88c16(0xa61)][_0xd88c16(0xc3f)]();document[_0xd88c16(0x51d)](_0xd88c16(0x4ec))[_0xd88c16(0x32a)]=_0x152796+'年\x20'+(_0x24a9c3+0x1)+'月',_0x421be7(_0x152796,_0x24a9c3),_0x45e9e4(_0x55a611['selectedDate']);}function _0x28f1be(){const _0x186f09=_0x3b741d,_0x53eaec=document[_0x186f09(0x51d)](_0x186f09(0x69b));if(!_0x53eaec)return;const _0x5f1fdc=_0x47309e(),_0x173190=_0x543bea[_0x186f09(0x21c)][_0x186f09(0x78c)](_0x28d0bb=>_0x28d0bb[_0x186f09(0x637)]===_0x5f1fdc&&_0x28d0bb['type']===_0x186f09(0x3ed));_0x53eaec[_0x186f09(0x4d5)]='';if(_0x173190['length']>0x0)_0x173190['forEach'](_0x5aa912=>{const _0x2a4e74=_0x186f09,_0x5c42da=document[_0x2a4e74(0x23f)](_0x2a4e74(0xaee));_0x5c42da['className']='todo-item-small',_0x5c42da[_0x2a4e74(0x32a)]=_0x5aa912[_0x2a4e74(0x297)],_0x53eaec[_0x2a4e74(0x83b)](_0x5c42da);});else{if(_0x186f09(0x121)===_0x186f09(0x121))_0x53eaec[_0x186f09(0x4d5)]=_0x186f09(0x837);else{if(_0x2e500e[_0x186f09(0x446)][_0x186f09(0x711)]===_0x186f09(0x1db))return;const _0x34c74f=_0x50fe83[_0x186f09(0x463)],_0x49d37f=_0x362bd2[_0x186f09(0x820)](_0x186f09(0x7a0)),_0x2d5a48=_0x34c74f[_0x186f09(0xa19)][_0x186f09(0x9ff)]('expanded');_0x34c74f[_0x186f09(0xa19)][_0x186f09(0x52b)](_0x186f09(0x206),!_0x2d5a48),_0x49d37f[_0x186f09(0xa19)][_0x186f09(0x52b)](_0x186f09(0x206),!_0x2d5a48);}}}function _0x421be7(_0x32d125,_0x57822e){const _0x4703f1=_0x3b741d,_0xe9f419=document[_0x4703f1(0x51d)](_0x4703f1(0xa07));_0xe9f419[_0x4703f1(0x4d5)]='';const _0x18ef06=new Date(_0x32d125,_0x57822e,0x1)['getDay'](),_0xdbf511=new Date(_0x32d125,_0x57822e+0x1,0x0)[_0x4703f1(0x3d6)](),_0x22dddd=_0x47309e();for(let _0x3adb8e=0x0;_0x3adb8e<_0x18ef06;_0x3adb8e++){_0x4703f1(0xc7e)!==_0x4703f1(0x950)?_0xe9f419[_0x4703f1(0x83b)](document[_0x4703f1(0x23f)](_0x4703f1(0xaee))):_0x1a7ba4+=_0x4703f1(0x92d);}for(let _0x2114b0=0x1;_0x2114b0<=_0xdbf511;_0x2114b0++){if('icvdn'!==_0x4703f1(0x28e))_0x59e160(),_0x55dbeb=null;else{const _0x2c8b58=document['createElement'](_0x4703f1(0xaee));_0x2c8b58[_0x4703f1(0xa9d)]=_0x4703f1(0x6c1);const _0x32f081=_0x32d125+'-'+String(_0x57822e+0x1)[_0x4703f1(0xa9f)](0x2,'0')+'-'+String(_0x2114b0)[_0x4703f1(0xa9f)](0x2,'0');if(_0x32f081===_0x22dddd)_0x2c8b58[_0x4703f1(0xa19)][_0x4703f1(0x25d)](_0x4703f1(0x27d));if(_0x32f081===_0x55a611[_0x4703f1(0x94e)])_0x2c8b58['classList'][_0x4703f1(0x25d)](_0x4703f1(0x96f));const _0xe05ff6=document[_0x4703f1(0x23f)](_0x4703f1(0xc63));_0xe05ff6[_0x4703f1(0xa9d)]=_0x4703f1(0x42d),_0xe05ff6[_0x4703f1(0x32a)]=_0x2114b0,_0x2c8b58[_0x4703f1(0x83b)](_0xe05ff6);const _0x716c4d=_0x543bea[_0x4703f1(0x21c)][_0x4703f1(0x78c)](_0x13511d=>_0x13511d[_0x4703f1(0x637)]===_0x32f081);if(_0x716c4d[_0x4703f1(0xc1f)]>0x0){const _0x398424=document['createElement'](_0x4703f1(0xaee));_0x398424[_0x4703f1(0xa9d)]=_0x4703f1(0x633),_0x2c8b58[_0x4703f1(0x83b)](_0x398424);}_0x2c8b58[_0x4703f1(0xbc8)]('click',()=>{const _0x32b7b4=_0x4703f1;if(_0x32b7b4(0xc53)!==_0x32b7b4(0xc53)){_0x4331f6['innerHTML']=_0x32b7b4(0x4f4);return;}else _0x55a611[_0x32b7b4(0x94e)]=_0x32f081,_0xe0ec9e();}),_0xe9f419[_0x4703f1(0x83b)](_0x2c8b58);}}}function _0x45e9e4(_0x336593){const _0x1c0d97=_0x3b741d;if('kBCgq'!==_0x1c0d97(0x29f))return;else{const _0x2b18fd=document['getElementById']('todo-list'),_0x585552=document[_0x1c0d97(0x51d)](_0x1c0d97(0x4ab));_0x2b18fd[_0x1c0d97(0x4d5)]='';const _0x3a672d=new Date(_0x336593+'T00:00:00');_0x585552[_0x1c0d97(0x32a)]=_0x3a672d['getMonth']()+0x1+'月'+_0x3a672d[_0x1c0d97(0x3d6)]()+'日';const _0x359fb2=_0x543bea['calendarEvents'][_0x1c0d97(0x78c)](_0x3120ce=>_0x3120ce[_0x1c0d97(0x637)]===_0x336593);if(_0x359fb2[_0x1c0d97(0xc1f)]===0x0){_0x2b18fd[_0x1c0d97(0x4d5)]=_0x1c0d97(0xbc5);return;}_0x359fb2[_0x1c0d97(0xb36)](_0x133cc1=>{const _0x5e4758=_0x1c0d97,_0xa23773=document[_0x5e4758(0x23f)](_0x5e4758(0xaee));_0xa23773[_0x5e4758(0xa9d)]=_0x133cc1[_0x5e4758(0x711)]===_0x5e4758(0xaa1)?_0x5e4758(0xac8):'todo-item',_0xa23773[_0x5e4758(0x32a)]=_0x133cc1['content'],_0xa23773[_0x5e4758(0xa24)]['id']=_0x133cc1['id'],_0x2b18fd[_0x5e4758(0x83b)](_0xa23773);});}}function _0x94dc63(_0x1adbab){const _0xcc1f86=_0x3b741d;document[_0xcc1f86(0x51d)](_0xcc1f86(0xcdf))[_0xcc1f86(0x32a)]='为\x20'+_0x1adbab+_0xcc1f86(0x76a),document[_0xcc1f86(0x51d)](_0xcc1f86(0x91c))['value']='',document[_0xcc1f86(0x51d)]('event-type-todo')['checked']=!![],document['getElementById'](_0xcc1f86(0x1c9))['classList'][_0xcc1f86(0x25d)](_0xcc1f86(0x6db)),document[_0xcc1f86(0x51d)](_0xcc1f86(0x91c))[_0xcc1f86(0x72b)]();}function _0x3e20bf(){const _0x14668c=_0x3b741d,_0x45271a=document['getElementById'](_0x14668c(0x91c))[_0x14668c(0x90f)][_0x14668c(0xad4)](),_0x586ee6=document[_0x14668c(0x820)](_0x14668c(0x877))[_0x14668c(0x90f)];if(!_0x45271a){_0x48e450(_0x14668c(0x4fe));return;}const _0x564eaa=_0x543bea[_0x14668c(0x7e7)][_0x14668c(0xbe8)](_0x46d788=>_0x46d788['id']===_0x543bea[_0x14668c(0x3fc)]);if(!_0x564eaa){_0x48e450(_0x14668c(0x6e1));return;}_0x543bea[_0x14668c(0x21c)]['push']({'id':_0x14668c(0x483)+Date[_0x14668c(0x63d)](),'date':_0x55a611[_0x14668c(0x94e)],'type':_0x586ee6,'content':_0x45271a,'userId':_0x564eaa['id']}),_0x1a0f1f(),_0xe0ec9e(),_0x10fe67(),_0x28f1be(),document[_0x14668c(0x51d)](_0x14668c(0x1c9))[_0x14668c(0xa19)]['remove'](_0x14668c(0x6db));}function _0x10fe67(){const _0x22b386=_0x3b741d,_0x5d2d12=document[_0x22b386(0x51d)]('countdown-title'),_0x3854b6=document[_0x22b386(0x51d)]('countdown-timer'),_0x59d6ec=new Date();_0x59d6ec[_0x22b386(0x12f)](0x0,0x0,0x0,0x0);const _0x106093=_0x543bea[_0x22b386(0x21c)]['filter'](_0x1615b0=>_0x1615b0['type']==='important'&&new Date(_0x1615b0[_0x22b386(0x637)]+_0x22b386(0x2cd))>=_0x59d6ec)[_0x22b386(0xb3d)]((_0x1942ee,_0x1ac76b)=>new Date(_0x1942ee['date'])-new Date(_0x1ac76b[_0x22b386(0x637)]));if(_0x106093['length']>0x0){const _0x9a034a=_0x106093[0x0],_0x32edd5=new Date(_0x9a034a['date']+_0x22b386(0x2cd)),_0x34dd7c=_0x32edd5-_0x59d6ec,_0x1cd34d=Math[_0x22b386(0xd21)](_0x34dd7c/(0x3e8*0x3c*0x3c*0x18));_0x5d2d12[_0x22b386(0x32a)]=_0x22b386(0x361)+_0x9a034a['content']+'」',_0x3854b6['innerHTML']='<span>'+_0x1cd34d+_0x22b386(0xb4e);}else _0x5d2d12[_0x22b386(0x32a)]=_0x22b386(0x556),_0x3854b6['innerHTML']='<span>--</span><span\x20class=\x22unit\x22>天</span>';}function _0x2b8baf(){const _0x55d779=_0x3b741d,_0x4e7cc3=document[_0x55d779(0x51d)](_0x55d779(0xc8e));_0x4e7cc3[_0x55d779(0x4d5)]='';if(_0x543bea['userProfiles'][_0x55d779(0xc1f)]===0x0){if('TZRLm'!=='FidyT'){_0x4e7cc3[_0x55d779(0x4d5)]=_0x55d779(0xb16);return;}else _0x3f9fc8[_0x55d779(0x32a)]=_0x55d779(0xd3f);}_0x543bea[_0x55d779(0x7e7)][_0x55d779(0xb36)](_0xde657a=>{const _0x2bf888=_0x55d779;if('zKvKv'===_0x2bf888(0x207)){const _0x1e56d2=document[_0x2bf888(0x23f)](_0x2bf888(0xaee));_0x1e56d2[_0x2bf888(0xa9d)]=_0x2bf888(0x6e3),_0x1e56d2[_0x2bf888(0xa24)]['id']=_0xde657a['id'];const _0x382664=_0xde657a['id']===_0x543bea['activeUserProfileId']?_0x2bf888(0x50d):'';_0x1e56d2[_0x2bf888(0x4d5)]=_0x2bf888(0x6ce)+(_0xde657a[_0x2bf888(0x5ec)]||_0x234b40)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xde657a['name']+_0x382664+_0x2bf888(0x3b8)+_0xde657a[_0x2bf888(0x367)][_0x2bf888(0xc97)](0x0,0x64)+_0x2bf888(0x8a5),_0x1e56d2['addEventListener'](_0x2bf888(0x779),()=>_0x206465(_0xde657a['id'])),_0x4e7cc3['appendChild'](_0x1e56d2);}else for(const _0x2695ce in _0x1e24cb){_0x228980[_0x2bf888(0x1e2)][_0x2695ce]=_0x601cd7[_0x2695ce];}});}function _0x206465(_0x1b953d=null){const _0x5ae1b0=_0x3b741d;if(_0x5ae1b0(0x22f)!==_0x5ae1b0(0x22f))_0x39c7cf[_0x5ae1b0(0xbc8)](_0x5ae1b0(0x779),()=>{const _0x4325f0=_0x5ae1b0;_0x30aadb(),_0x145b7b(_0x4325f0(0x188),'home');});else{_0x53ffb2(_0x5ae1b0(0x4b9),'userProfileList');const _0x4727ac=document['getElementById'](_0x5ae1b0(0x1ad)),_0xd36b20=document[_0x5ae1b0(0x51d)](_0x5ae1b0(0xae9));_0xd36b20['style'][_0x5ae1b0(0xbd8)]='',delete _0xd36b20['dataset'][_0x5ae1b0(0xbda)];if(_0x1b953d){if(_0x5ae1b0(0x5c9)!=='RfDOE')_0x41314e(![]);else{const _0x1a018d=_0x543bea[_0x5ae1b0(0x7e7)]['find'](_0x4cb25e=>_0x4cb25e['id']===_0x1b953d);if(!_0x1a018d)return;document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x475))[_0x5ae1b0(0x90f)]=_0x1a018d['id'],document['getElementById'](_0x5ae1b0(0x491))[_0x5ae1b0(0x32a)]=_0x5ae1b0(0x81f),document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x8bc))[_0x5ae1b0(0x90f)]=_0x1a018d[_0x5ae1b0(0x41a)],_0x1a018d['avatar']?_0xd36b20[_0x5ae1b0(0x1e2)][_0x5ae1b0(0xbd8)]=_0x5ae1b0(0x744)+_0x1a018d['avatar']+'\x27)':_0x5ae1b0(0x62f)!==_0x5ae1b0(0x62f)?delete _0x16d1d9[_0x5ae1b0(0x5ec)]:_0xd36b20[_0x5ae1b0(0x1e2)]['backgroundImage']=_0x5ae1b0(0x744)+_0x234b40+'\x27)',document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x11b))[_0x5ae1b0(0x90f)]=_0x1a018d[_0x5ae1b0(0x367)],_0x4727ac[_0x5ae1b0(0x1e2)][_0x5ae1b0(0x930)]=_0x1a018d['id']===_0x543bea[_0x5ae1b0(0x3fc)]?_0x5ae1b0(0x2f6):_0x5ae1b0(0x94a),document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x7aa))[_0x5ae1b0(0x1e2)][_0x5ae1b0(0x930)]=_0x5ae1b0(0x94a);}}else _0x5ae1b0(0x60c)!==_0x5ae1b0(0xb29)?(document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x475))[_0x5ae1b0(0x90f)]='',document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x491))[_0x5ae1b0(0x32a)]=_0x5ae1b0(0xb80),document['getElementById'](_0x5ae1b0(0x8bc))['value']=_0x5ae1b0(0x1a4)+(_0x543bea[_0x5ae1b0(0x7e7)]['length']+0x1),_0xd36b20['style'][_0x5ae1b0(0xbd8)]=_0x5ae1b0(0x744)+_0x234b40+'\x27)',document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x11b))[_0x5ae1b0(0x90f)]='',_0x4727ac[_0x5ae1b0(0x1e2)][_0x5ae1b0(0x930)]=_0x5ae1b0(0x2f6),document[_0x5ae1b0(0x51d)](_0x5ae1b0(0x7aa))['style'][_0x5ae1b0(0x930)]='none'):(_0x1c3208[_0x5ae1b0(0x226)][_0x223ccc][_0x5ae1b0(0x278)](_0x19cd16,0x1),_0x47fce9(),_0x30d7b3(_0x47d21e),_0x391947('回放已删除。'));}}function _0x5308a9(){const _0x2f6f4e=_0x3b741d;if(_0x2f6f4e(0x572)===_0x2f6f4e(0x68c)){_0x59eb04[_0x2f6f4e(0xc52)](_0x2f6f4e(0xcd5),_0x4dd050['message']);try{_0x58aeb5=_0x36aba4(_0x5386c2);if(!_0x52c5a2)throw new _0x23a9f4(_0x2f6f4e(0x599));_0x2c8082[_0x2f6f4e(0x68b)]('兼容模式成功，已将旧格式数据翻译。');}catch(_0x10db74){throw _0xfb6f76;}}else{const _0x45011f=document[_0x2f6f4e(0x51d)](_0x2f6f4e(0x475))[_0x2f6f4e(0x90f)],_0x1e70bf=document['getElementById'](_0x2f6f4e(0xae9)),_0x3bb92f={'name':document[_0x2f6f4e(0x51d)]('user-name')['value']['trim'](),'persona':document['getElementById'](_0x2f6f4e(0x11b))['value']['trim'](),'avatar':_0x543bea[_0x2f6f4e(0x7e7)]['find'](_0x570083=>_0x570083['id']===_0x45011f)?.[_0x2f6f4e(0x5ec)]||_0x1e70bf[_0x2f6f4e(0x1e2)][_0x2f6f4e(0xbd8)]['slice'](0x5,-0x2)['replace'](/'/g,'')||_0x234b40};_0x1e70bf[_0x2f6f4e(0xa24)][_0x2f6f4e(0xbda)]&&(_0x3bb92f[_0x2f6f4e(0x5ec)]=_0x1e70bf['dataset'][_0x2f6f4e(0xbda)],delete _0x1e70bf[_0x2f6f4e(0xa24)]['newAvatar']);if(!_0x3bb92f[_0x2f6f4e(0x41a)]){if(_0x2f6f4e(0xbad)!==_0x2f6f4e(0xbad)){const _0x467227=new _0x48dbb1();_0x467227[_0x2f6f4e(0xa30)]=()=>_0x303c34(_0x467227[_0x2f6f4e(0x668)]),_0x467227[_0x2f6f4e(0x122)]=_0x21a60c,_0x467227['readAsDataURL'](_0x2854ef);}else{_0x48e450('名字不能为空！');return;}}if(_0x45011f){const _0x26c752=_0x543bea['userProfiles'][_0x2f6f4e(0xbe8)](_0x6e691f=>_0x6e691f['id']===_0x45011f);if(_0x26c752)Object[_0x2f6f4e(0xa48)](_0x26c752,_0x3bb92f);}else{const _0x1dc43b={'id':_0x2f6f4e(0x200)+Date[_0x2f6f4e(0x63d)](),..._0x3bb92f};_0x543bea[_0x2f6f4e(0x7e7)]['push'](_0x1dc43b),!_0x543bea[_0x2f6f4e(0x3fc)]&&(_0x543bea['activeUserProfileId']=_0x1dc43b['id']);}_0x1a0f1f(),_0x48e450('用户资料已保存！'),_0x2b8baf(),_0x53ffb2(_0x2f6f4e(0x807),_0x2f6f4e(0x4b9));}}async function _0x1174c3(){const _0x24c9e3=_0x3b741d,_0xf92229=document[_0x24c9e3(0x51d)]('editing-user-id')[_0x24c9e3(0x90f)];if(!_0xf92229)return;if(_0x543bea[_0x24c9e3(0x7e7)]['length']<=0x1){if(_0x24c9e3(0x50b)===_0x24c9e3(0x997))_0x1e6134[_0x24c9e3(0x16c)]===_0x4532e7&&(_0x3c7529[_0x24c9e3(0x16c)]=_0x7a974e[_0x24c9e3(0x3fc)]);else{_0x48e450(_0x24c9e3(0xc65));return;}}const _0x3d37b6=await _0x44efa2(_0x24c9e3(0x77d));_0x3d37b6&&(_0x24c9e3(0x673)!==_0x24c9e3(0xa9c)?(_0x543bea['userProfiles']=_0x543bea[_0x24c9e3(0x7e7)][_0x24c9e3(0x78c)](_0x54780d=>_0x54780d['id']!==_0xf92229),_0x543bea['activeUserProfileId']===_0xf92229&&(_0x543bea[_0x24c9e3(0x3fc)]=_0x543bea[_0x24c9e3(0x7e7)][0x0]['id']),_0x543bea[_0x24c9e3(0x94b)]['forEach'](_0x26793d=>{const _0x45d7a2=_0x24c9e3;if(_0x26793d[_0x45d7a2(0x16c)]===_0xf92229){if(_0x45d7a2(0x70d)!==_0x45d7a2(0x70d)){_0x235b36(![]),_0x25b46c('错误：找不到这首作为“信物”的歌。');return;}else _0x26793d[_0x45d7a2(0x16c)]=_0x543bea[_0x45d7a2(0x3fc)];}}),_0x1a0f1f(),_0x48e450(_0x24c9e3(0x6f8)),_0x2b8baf(),_0x53ffb2('userProfileList',_0x24c9e3(0x4b9))):_0x3ceefb[_0x24c9e3(0x90f)]='');}function _0x8131b7(){const _0x43f536=_0x3b741d;if(_0x43f536(0xc51)==='ZdABU'){const _0x112521=_0x28a09a[_0x43f536(0x170)](_0x395711,_0x43f536(0x96c)),_0x43c883=_0x112521[_0x43f536(0x327)](_0x49bc11),_0x9b18e4=_0x43c883[_0x43f536(0xca3)](_0x2f291b);_0x9b18e4[_0x43f536(0x487)]=()=>_0x2077d1(),_0x9b18e4[_0x43f536(0x122)]=()=>_0x4653c2(_0x9b18e4['error']);}else _0xb5f502(),_0x261987(_0x543bea['activeWorldBookCategoryId']);}function _0xb5f502(){const _0x2f53e1=_0x3b741d;if(_0x2f53e1(0x583)===_0x2f53e1(0x625))_0x523464=_0x4d6ad9(()=>{const _0x22ab22=_0x2f53e1;if(_0x18a68f[_0x22ab22(0x711)]==='touchstart')_0xccdad['preventDefault']();_0x5ebbf2(_0x661822);},0x320);else{const _0x2cf6e2=document[_0x2f53e1(0x51d)](_0x2f53e1(0x252));_0x2cf6e2[_0x2f53e1(0x4d5)]='',_0x543bea['worldBookCategories'][_0x2f53e1(0xb36)](_0xe67f7c=>{const _0xabf64e=_0x2f53e1;if(_0xabf64e(0xb1c)!==_0xabf64e(0xb1c)){const _0x82bef8=_0x312928['querySelector']('.load-more-btn');if(_0x82bef8)_0x82bef8['remove']();}else{const _0x3d112d=document[_0xabf64e(0x23f)](_0xabf64e(0xaee));_0x3d112d[_0xabf64e(0x32a)]=_0xe67f7c[_0xabf64e(0x41a)],_0x3d112d[_0xabf64e(0xa24)]['id']=_0xe67f7c['id'],_0x3d112d['style'][_0xabf64e(0x940)]=_0xabf64e(0xd22),_0x3d112d[_0xabf64e(0x1e2)][_0xabf64e(0x8e5)]=_0xabf64e(0x6cb),_0x3d112d[_0xabf64e(0x1e2)][_0xabf64e(0x33a)]='pointer',_0x3d112d['style'][_0xabf64e(0xb35)]='5px',_0x3d112d['style']['fontWeight']=_0xabf64e(0x716);_0xe67f7c['id']===_0x543bea[_0xabf64e(0x3b3)]?(_0x3d112d['style'][_0xabf64e(0xaa6)]='var(--primary-color)',_0x3d112d[_0xabf64e(0x1e2)]['color']=_0xabf64e(0x774)):_0x3d112d[_0xabf64e(0x1e2)]['color']=_0xabf64e(0x4e9);_0x3d112d['addEventListener']('click',()=>{const _0x43200b=_0xabf64e;_0x43200b(0xada)!==_0x43200b(0xada)?(_0x2de13d[_0x43200b(0x1e2)]['backgroundImage']=_0x43200b(0x535)+_0x3a1b70[_0x43200b(0xcb2)](_0x8d8092)+')',_0x34bb33[_0x43200b(0x1e2)][_0x43200b(0xa4e)]=_0x43200b(0x73d),_0x8c3b48[_0x43200b(0x1e2)][_0x43200b(0x1c0)]=_0x43200b(0xcc6)):(_0x543bea[_0x43200b(0x3b3)]=_0xe67f7c['id'],_0x8131b7());});let _0x1e174c=null;const _0x4d14f3=_0x1eff2d=>{const _0x51bcda=_0xabf64e;if('JKUzM'!==_0x51bcda(0xcab))_0xeec0f5[_0x51bcda(0xc54)][_0x51bcda(0xb36)]((_0xe5e4ce,_0x109dd7)=>_0x4eb023(_0xe5e4ce,_0x109dd7));else{if(_0xe67f7c['id']===_0x51bcda(0x65a))return;_0x1e174c=setTimeout(()=>{const _0x3769fa=_0x51bcda;if(_0x1eff2d[_0x3769fa(0x711)]===_0x3769fa(0x897))_0x1eff2d[_0x3769fa(0x9cb)]();_0x51cd71(_0xe67f7c['id'],_0xe67f7c[_0x3769fa(0x41a)]);},0x320);}},_0x303b5f=()=>{clearTimeout(_0x1e174c);};_0x3d112d[_0xabf64e(0xbc8)](_0xabf64e(0x57e),_0x4d14f3),_0x3d112d[_0xabf64e(0xbc8)](_0xabf64e(0xb0e),_0x303b5f),_0x3d112d[_0xabf64e(0xbc8)]('mouseleave',_0x303b5f),_0x3d112d['addEventListener'](_0xabf64e(0x897),_0x4d14f3,{'passive':![]}),_0x3d112d[_0xabf64e(0xbc8)]('touchend',_0x303b5f),_0x3d112d[_0xabf64e(0xbc8)]('touchcancel',_0x303b5f),_0x2cf6e2['appendChild'](_0x3d112d);}});}}async function _0x51cd71(_0x598253,_0x59ac3d){const _0x27e3be=_0x3b741d;if(_0x27e3be(0x1eb)!==_0x27e3be(0xb7d)){const _0x3ed6c9=await _0x44efa2(_0x27e3be(0x6bf)+_0x59ac3d+_0x27e3be(0xb14));if(!_0x3ed6c9)return;const _0x2a3c60=_0x543bea['worldBooks'][_0x27e3be(0x78c)](_0x5482b7=>_0x5482b7['categoryId']===_0x598253)[_0x27e3be(0x257)](_0x20f72f=>_0x20f72f['id']);_0x543bea[_0x27e3be(0x41e)]=_0x543bea[_0x27e3be(0x41e)][_0x27e3be(0x78c)](_0x4e1dbd=>_0x4e1dbd[_0x27e3be(0x903)]!==_0x598253),_0x543bea[_0x27e3be(0x2e3)]=_0x543bea[_0x27e3be(0x4a4)][_0x27e3be(0x78c)](_0x420076=>_0x420076['id']!==_0x598253);_0x543bea['activeWorldBookCategoryId']===_0x598253&&(_0x543bea[_0x27e3be(0x3b3)]=_0x27e3be(0x65a));const _0x34809c=[..._0x543bea['characters'],..._0x543bea[_0x27e3be(0x94b)]];_0x34809c[_0x27e3be(0xb36)](_0x2d3f27=>{const _0x3daa27=_0x27e3be;_0x2d3f27[_0x3daa27(0xc49)]&&_0x2d3f27[_0x3daa27(0xc49)]['length']>0x0&&(_0x2d3f27[_0x3daa27(0xc49)]=_0x2d3f27[_0x3daa27(0xc49)]['filter'](_0x4d35a0=>!_0x2a3c60[_0x3daa27(0x32d)](_0x4d35a0)));}),_0x1a0f1f(),_0x8131b7(),_0x48e450(_0x27e3be(0xd27)+_0x59ac3d+_0x27e3be(0x89c));}else _0x29bd83[_0x27e3be(0xb1e)](_0x27e3be(0x619),_0x31b4c6);}function _0x261987(_0x166f5b){const _0x161f75=_0x3b741d,_0x10c022=document[_0x161f75(0x51d)]('world-book-list-container');_0x10c022[_0x161f75(0x4d5)]='';const _0x1771e9=_0x543bea[_0x161f75(0x41e)][_0x161f75(0x78c)](_0x5433e9=>_0x5433e9[_0x161f75(0x903)]===_0x166f5b||_0x166f5b===_0x161f75(0x65a)&&!_0x5433e9['categoryId']);if(_0x1771e9[_0x161f75(0xc1f)]===0x0){if(_0x161f75(0x231)!==_0x161f75(0x231)){const _0x193b93=_0x1e34ae[_0x161f75(0xc7f)](_0x310998);if(_0x193b93)_0x34981a['localStorageData'][_0x193b93]=_0x4b7ef2[_0x161f75(0x760)](_0x193b93);}else{_0x10c022['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>';return;}}_0x1771e9[_0x161f75(0xb36)](_0x4ae1f3=>{const _0xf7404a=_0x161f75;if('eJVec'===_0xf7404a(0xbeb)){const _0x58dca0=document[_0xf7404a(0x23f)](_0xf7404a(0xaee));_0x58dca0['className']=_0xf7404a(0x6e3),_0x58dca0[_0xf7404a(0xa24)]['id']=_0x4ae1f3['id'],_0x58dca0[_0xf7404a(0x4d5)]=_0xf7404a(0x369)+_0x4ae1f3['name']+_0xf7404a(0x246)+_0x4ae1f3[_0xf7404a(0x297)][_0xf7404a(0xc97)](0x0,0x64)+_0xf7404a(0x8a5),_0x58dca0[_0xf7404a(0xbc8)]('click',()=>_0x28026e(_0x4ae1f3['id'])),_0x10c022[_0xf7404a(0x83b)](_0x58dca0);}else return[];});}document[_0x3b741d(0x51d)](_0x3b741d(0x8c0))[_0x3b741d(0xbc8)]('click',async()=>{const _0x4b0537=_0x3b741d,_0x4c401e=prompt('请输入新的分类名称:');if(_0x4c401e&&_0x4c401e['trim']()){const _0x272282={'id':'wbc_'+Date[_0x4b0537(0x63d)](),'name':_0x4c401e[_0x4b0537(0xad4)]()};_0x543bea[_0x4b0537(0x4a4)][_0x4b0537(0xb47)](_0x272282),_0x543bea['activeWorldBookCategoryId']=_0x272282['id'],_0x1a0f1f(),_0x8131b7();}});function _0x28026e(_0x4a06bc=null){const _0x3f98b5=_0x3b741d;if(_0x3f98b5(0xa35)===_0x3f98b5(0x40a))_0x4530d5[_0x3f98b5(0x2d9)]=_0xe06b39[_0x3f98b5(0x372)]||_0xc24378;else{_0x53ffb2(_0x3f98b5(0xc73),_0x3f98b5(0x4e4));const _0x2072b2=document[_0x3f98b5(0x51d)](_0x3f98b5(0x97b));_0x2072b2[_0x3f98b5(0x4d5)]='',_0x543bea[_0x3f98b5(0x4a4)][_0x3f98b5(0xb36)](_0x3b8000=>{const _0x12da63=_0x3f98b5,_0x423dde=document[_0x12da63(0x23f)](_0x12da63(0xb34));_0x423dde[_0x12da63(0x90f)]=_0x3b8000['id'],_0x423dde[_0x12da63(0x32a)]=_0x3b8000['name'],_0x2072b2[_0x12da63(0x83b)](_0x423dde);});if(_0x4a06bc){const _0x202b23=_0x543bea[_0x3f98b5(0x41e)][_0x3f98b5(0xbe8)](_0x2c0a3f=>_0x2c0a3f['id']===_0x4a06bc);if(!_0x202b23)return;document[_0x3f98b5(0x51d)](_0x3f98b5(0x777))[_0x3f98b5(0x90f)]=_0x202b23['id'],document[_0x3f98b5(0x51d)](_0x3f98b5(0x16e))['textContent']='编辑条目',document[_0x3f98b5(0x51d)]('world-book-edit-name')['value']=_0x202b23['name'],document[_0x3f98b5(0x51d)](_0x3f98b5(0x4dc))[_0x3f98b5(0x90f)]=_0x202b23[_0x3f98b5(0x297)],_0x2072b2[_0x3f98b5(0x90f)]=_0x202b23['categoryId']||_0x3f98b5(0x65a);}else document['getElementById']('editing-world-book-id')[_0x3f98b5(0x90f)]='',document[_0x3f98b5(0x51d)](_0x3f98b5(0x16e))[_0x3f98b5(0x32a)]=_0x3f98b5(0xc5c),document[_0x3f98b5(0x51d)](_0x3f98b5(0x505))['value']='',document[_0x3f98b5(0x51d)](_0x3f98b5(0x4dc))[_0x3f98b5(0x90f)]='',_0x2072b2[_0x3f98b5(0x90f)]=_0x543bea['activeWorldBookCategoryId'];}}function _0x21abb2(){const _0x230d5c=_0x3b741d;if('dNPZR'!==_0x230d5c(0x567))_0x2c7602=_0x25a46c(_0x4de1c4[_0x230d5c(0x184)][0x0]);else{const _0x49798a=document[_0x230d5c(0x51d)](_0x230d5c(0x777))[_0x230d5c(0x90f)],_0x5e0b1e=document['getElementById'](_0x230d5c(0x505))[_0x230d5c(0x90f)][_0x230d5c(0xad4)](),_0x10592b=document[_0x230d5c(0x51d)]('world-book-edit-content')[_0x230d5c(0x90f)]['trim'](),_0x10cbe4=document['getElementById'](_0x230d5c(0x97b))[_0x230d5c(0x90f)];if(!_0x5e0b1e||!_0x10592b){_0x48e450('条目名称和内容都不能为空！');return;}if(_0x49798a){if(_0x230d5c(0x64b)!==_0x230d5c(0x6f5)){const _0x45a739=_0x543bea[_0x230d5c(0x41e)][_0x230d5c(0xbe8)](_0x58bd01=>_0x58bd01['id']===_0x49798a);_0x45a739&&(_0x230d5c(0xa1f)!=='uNAaZ'?(_0x45a739[_0x230d5c(0x41a)]=_0x5e0b1e,_0x45a739[_0x230d5c(0x297)]=_0x10592b,_0x45a739[_0x230d5c(0x903)]=_0x10cbe4):_0xdebade[_0x230d5c(0x83b)](_0x15d579));}else _0x52f6f9(),_0x559440=_0x15f16b(()=>{_0x4e594c(_0x244be1);},0x258),_0x3591a1[_0x230d5c(0xbc8)](_0x230d5c(0xb0e),_0x541b3c),_0x5a447d['addEventListener'](_0x230d5c(0xbc7),_0x427860),_0xf0c952[_0x230d5c(0xbc8)](_0x230d5c(0x6bb),_0x7cfe7d),_0x150db1[_0x230d5c(0xbc8)](_0x230d5c(0x5ad),_0x3f1d54);}else{const _0x4cf5fe={'id':'wb_'+Date[_0x230d5c(0x63d)](),'name':_0x5e0b1e,'content':_0x10592b,'categoryId':_0x10cbe4};_0x543bea[_0x230d5c(0x41e)]['push'](_0x4cf5fe);}_0x543bea[_0x230d5c(0x3b3)]=_0x10cbe4,_0x1a0f1f(),_0x48e450(_0x230d5c(0x54f)),_0x8131b7(),_0x53ffb2(_0x230d5c(0x4e4),_0x230d5c(0xc73));}}async function _0x403c2b(){const _0x35c3b3=_0x3b741d,_0x154dc5=document['getElementById']('editing-world-book-id')['value'];if(!_0x154dc5)return;const _0x45cbc6=await _0x44efa2('确定要删除这个条目吗？此操作不可撤销。');_0x45cbc6&&(_0x543bea[_0x35c3b3(0x41e)]=_0x543bea[_0x35c3b3(0x41e)][_0x35c3b3(0x78c)](_0x46908f=>_0x46908f['id']!==_0x154dc5),_0x543bea[_0x35c3b3(0x24d)][_0x35c3b3(0xb36)](_0x31154f=>{const _0x11223d=_0x35c3b3;_0x31154f['linkedWorldBookIds']&&(_0x31154f[_0x11223d(0xc49)]=_0x31154f[_0x11223d(0xc49)][_0x11223d(0x78c)](_0x77b6b7=>_0x77b6b7!==_0x154dc5));}),_0x1a0f1f(),_0x48e450(_0x35c3b3(0x925)),_0x8131b7(),_0x53ffb2('worldBook',_0x35c3b3(0xc73)));}function _0x59f608(){const _0x162fea=_0x3b741d,_0x3a714b=document[_0x162fea(0x51d)](_0x162fea(0x43e)),_0x373736=_0x3a714b['querySelectorAll']('.wb-entry-item\x20input:checked'),_0x1d0cf0=document[_0x162fea(0x820)](_0x162fea(0x5cf));if(_0x373736[_0x162fea(0xc1f)]===0x0)_0x162fea(0xa41)!==_0x162fea(0xb90)?_0x1d0cf0[_0x162fea(0x32a)]=_0x162fea(0xd3f):_0x1dbcb6[_0x162fea(0x83b)](_0x4efbe7);else{if(_0x373736[_0x162fea(0xc1f)]>0x2){if(_0x162fea(0x590)==='IXuRi'){const _0x927fe9=_0x2490d5['getItem']('customFeedWallpaper');_0x927fe9?_0x56ea18[_0x162fea(0x51d)](_0x162fea(0xa0e))[_0x162fea(0x1e2)][_0x162fea(0xcac)](_0x162fea(0x7af),_0x162fea(0x535)+_0x927fe9+')'):_0x3ce6ea[_0x162fea(0x51d)](_0x162fea(0xa0e))[_0x162fea(0x1e2)][_0x162fea(0xcac)](_0x162fea(0x7af),_0x162fea(0x2f6));}else _0x1d0cf0[_0x162fea(0x32a)]=_0x162fea(0xcdd)+_0x373736[_0x162fea(0xc1f)]+'\x20项';}else _0x1d0cf0[_0x162fea(0x32a)]=Array[_0x162fea(0x382)](_0x373736)[_0x162fea(0x257)](_0x534b98=>_0x534b98[_0x162fea(0x2a6)][_0x162fea(0x32a)]['trim']())[_0x162fea(0x4db)]('、');}}async function _0x4fa83c(_0x2e6cef){const _0x345037=_0x3b741d;if(_0x345037(0x98b)!==_0x345037(0xb68)){const _0x3002a8=_0x543bea[_0x345037(0x94b)][_0x345037(0xbe8)](_0xffad0c=>_0xffad0c['id']===_0x2e6cef);if(!_0x3002a8||_0x3002a8[_0x345037(0x711)]!==_0x345037(0x91b))return;document[_0x345037(0x51d)](_0x345037(0x360))[_0x345037(0x90f)]=_0x3002a8[_0x345037(0x41a)]||'',_0xbac87e(_0x345037(0x147)),document[_0x345037(0x51d)](_0x345037(0x147))[_0x345037(0x90f)]=_0x3002a8[_0x345037(0x16c)]||_0x543bea[_0x345037(0x3fc)],_0x516182(_0x345037(0x70b),_0x3002a8[_0x345037(0xc49)]||[]),_0x126c22();const _0x466bbe=document[_0x345037(0x51d)](_0x345037(0xb4c)),_0x49a065=document['getElementById'](_0x345037(0x1a7));_0x49a065['style'][_0x345037(0xbd8)]='',_0x54e221(_0x345037(0x989)+_0x2e6cef)['then'](_0x3721e2=>{_0x466bbe['src']=_0x3721e2?URL['createObjectURL'](_0x3721e2):_0x46536a;}),_0x54e221(_0x345037(0x50c)+_0x2e6cef)[_0x345037(0x842)](_0x319c63=>{const _0x2ec9ac=_0x345037;if(_0x2ec9ac(0x8a6)===_0x2ec9ac(0x8a6)){if(_0x319c63)_0x49a065[_0x2ec9ac(0x1e2)]['backgroundImage']='url(\x27'+URL[_0x2ec9ac(0xcb2)](_0x319c63)+'\x27)';}else{const _0x5ec285=_0x10bf30[_0x2ec9ac(0x2bd)][_0x215512[_0x2ec9ac(0x80c)]];if(_0x5ec285&&_0x5ec285[_0x2ec9ac(0xc1f)]>0x0){_0x58cf12[_0x2ec9ac(0x259)]=[..._0x5ec285];const _0x1bf2d1=_0x5028f7[_0x2ec9ac(0x259)][_0x2ec9ac(0x1bc)]();_0x2c1ecb[_0x2ec9ac(0x32a)]=_0x1bf2d1[_0x2ec9ac(0x319)]===_0x2ec9ac(0x4b3)?'旁白':_0x1bf2d1[_0x2ec9ac(0x319)],_0x3dabec[_0x2ec9ac(0x32a)]=_0x1bf2d1[_0x2ec9ac(0x3c2)],_0x1bf2d1[_0x2ec9ac(0x319)]!==_0x2ec9ac(0x4b3)&&_0x52e911(_0x4b1221[_0x2ec9ac(0x80c)],_0x1bf2d1[_0x2ec9ac(0x6c0)]);}else _0x2bb3ef[_0x2ec9ac(0x32a)]='旁白',_0x2fa5e7[_0x2ec9ac(0x32a)]=_0x2ec9ac(0x7b3);}}),_0x53ffb2(_0x345037(0x868),_0x345037(0x69f));}else _0x42eb07['type']=_0x345037(0x685);}async function _0x2712b0(){const _0xf44b34=_0x3b741d,_0x4821ea=_0x577515();if(!_0x4821ea||_0x4821ea['type']!==_0xf44b34(0x91b))return;const _0xfa7faf=document[_0xf44b34(0x51d)](_0xf44b34(0x360))['value'][_0xf44b34(0xad4)]();if(!_0xfa7faf){_0x48e450('群聊名称不能为空！');return;}_0x4821ea[_0xf44b34(0x41a)]=_0xfa7faf;const _0x23f0d0=document['querySelectorAll'](_0xf44b34(0x8d5));_0x4821ea[_0xf44b34(0xc49)]=Array['from'](_0x23f0d0)[_0xf44b34(0x257)](_0x1e7788=>_0x1e7788[_0xf44b34(0x90f)]),_0x4821ea[_0xf44b34(0x16c)]=document[_0xf44b34(0x51d)](_0xf44b34(0x147))['value'];const _0x2c33b3=document[_0xf44b34(0x51d)](_0xf44b34(0x5a2))[_0xf44b34(0x730)][0x0],_0x2ad492=document['getElementById'](_0xf44b34(0x330))[_0xf44b34(0x730)][0x0];if(_0x2c33b3)await _0x567110(_0xf44b34(0x989)+_0x4821ea['id'],_0x2c33b3);if(_0x2ad492)await _0x567110(_0xf44b34(0x50c)+_0x4821ea['id'],_0x2ad492);_0x1a0f1f(),_0x258f32(),await _0x358a91(),_0x48e450('群聊设置已保存！'),_0x53ffb2(_0xf44b34(0x69f),_0xf44b34(0x868));}function _0x126c22(){const _0x186385=_0x3b741d,_0x576a46=document[_0x186385(0x51d)](_0x186385(0x70b)),_0x1e20a8=_0x576a46[_0x186385(0x5c4)](_0x186385(0x46f)),_0x2f63b1=document['querySelector'](_0x186385(0x51e));if(_0x1e20a8[_0x186385(0xc1f)]===0x0)_0x2f63b1[_0x186385(0x32a)]=_0x186385(0xd3f);else _0x1e20a8[_0x186385(0xc1f)]>0x2?_0x186385(0xd18)!=='oIuNR'?_0x2f63b1[_0x186385(0x32a)]='已选择\x20'+_0x1e20a8[_0x186385(0xc1f)]+'\x20项':_0x18d70b[_0x186385(0xb1e)](_0x186385(0xadb),_0x3ee165):_0x2f63b1['textContent']=Array[_0x186385(0x382)](_0x1e20a8)[_0x186385(0x257)](_0x448dc6=>_0x448dc6['parentElement'][_0x186385(0x32a)][_0x186385(0xad4)]())[_0x186385(0x4db)]('、');}async function _0x261b1f(){const _0x5d646f=_0x3b741d,_0x3c8501=_0x577515(),_0x23f707=(_0x3c8501?.[_0x5d646f(0x184)]||[])[_0x5d646f(0x257)](_0x509294)[_0x5d646f(0x78c)](Boolean),_0x578c7c=_0x2f2ed1(_0x3c8501['id']);if(!_0x3c8501||_0x3c8501[_0x5d646f(0x711)]!==_0x5d646f(0x91b)||_0x23f707[_0x5d646f(0xc1f)]<0x2)return null;const _0x538cf1=_0x3c8501[_0x5d646f(0xc49)]&&_0x3c8501[_0x5d646f(0xc49)]['length']>0x0?_0x5d646f(0xacb)+_0x3c8501[_0x5d646f(0xc49)][_0x5d646f(0x257)](_0x5f29fd=>_0x543bea[_0x5d646f(0x41e)][_0x5d646f(0xbe8)](_0x40685f=>_0x40685f['id']===_0x5f29fd))[_0x5d646f(0x78c)](Boolean)[_0x5d646f(0x257)](_0x2d63ef=>'\x0a##\x20世界书条目:\x20'+_0x2d63ef[_0x5d646f(0x41a)]+'\x0a'+_0x2d63ef[_0x5d646f(0x297)])[_0x5d646f(0x4db)](''):'',_0x363b21=_0x578c7c['persona']?_0x5d646f(0x26e)+_0x578c7c['name']+_0x5d646f(0x6a7)+_0x578c7c[_0x5d646f(0x367)]:'';let _0x33b44c='';const _0x2a6553=new Date(),_0x2159b1=_0x543bea[_0x5d646f(0xc54)]['at'](-0x1);_0x33b44c+='\x0a-\x20**当前时间**:\x20'+_0x2a6553['toLocaleString']('zh-CN',{'dateStyle':_0x5d646f(0xd0f),'timeStyle':_0x5d646f(0x90a)});if(_0x2159b1){const _0x24fa89=new Date(_0x2159b1[_0x5d646f(0x11f)]),_0x370afb=Math[_0x5d646f(0x498)]((_0x2a6553-_0x24fa89)/(0x3e8*0x3c));if(_0x370afb<0x5)_0x33b44c+=_0x5d646f(0x2c5);else{if(_0x370afb<0x78)_0x33b44c+='\x0a-\x20**对话状态**:\x20群里在'+_0x370afb+'分钟前聊过，请注意衔接。';else{if(_0x5d646f(0x19e)===_0x5d646f(0xaa0))_0x383d09[_0xab018b][_0x5d646f(0xa19)]['add']('active');else{const _0x2f8bb5=Math[_0x5d646f(0x498)](_0x370afb/0x3c);if(_0x2f8bb5<0x30)_0x33b44c+=_0x5d646f(0x5e9)+_0x2f8bb5+_0x5d646f(0x72a);else _0x33b44c+=_0x5d646f(0xb07)+Math[_0x5d646f(0x498)](_0x2f8bb5/0x18)+_0x5d646f(0x789);}}}}else{if(_0x5d646f(0x1fe)!==_0x5d646f(0x2bb))_0x33b44c+=_0x5d646f(0x92d);else{if(_0x56ec19)_0xf84780(_0x4f9ecc);const _0x55b32a=_0x26f8bc[_0x5d646f(0x446)][_0x5d646f(0x156)](_0x5d646f(0xbfa));if(!_0x55b32a)return;const _0x560808=_0x37e9f6(_0x55b32a[_0x5d646f(0xa24)]['historyIndex'],0xa);if(_0x15fa02(_0x560808))return;const _0x5caae1=()=>{_0x1d164b=_0x484b2d(()=>{const _0x1fdea2=_0x53d2;if(_0x3a81b2[_0x1fdea2(0x711)]===_0x1fdea2(0x897))_0xd682ba[_0x1fdea2(0x9cb)]();_0x37cdcd(_0x560808);},0x320);},_0x585f2e=()=>{if(_0x1d1462)_0x1eae10(_0x32463b);};_0x1928d1[_0x5d646f(0xbc8)](_0x5d646f(0xb0e),_0x585f2e,{'once':!![]}),_0x14352f[_0x5d646f(0xbc8)](_0x5d646f(0x65c),_0x585f2e,{'once':!![]}),_0xda8b1a['addEventListener']('touchend',_0x585f2e,{'once':!![]}),_0x268450[_0x5d646f(0xbc8)](_0x5d646f(0x6bb),_0x585f2e,{'once':!![]}),_0x5caae1();}}const _0x55821d=[..._0x543bea[_0x5d646f(0xc54)]][_0x5d646f(0x27f)]()[_0x5d646f(0xbe8)](_0x34381f=>_0x34381f[_0x5d646f(0xcd4)]===_0x5d646f(0x8ed))?.['content']||'',_0x5a68f3=_0x448a83(_0x3c8501,_0x55821d),_0x310307=_0x543bea['conversationHistory'][_0x5d646f(0xb41)](-0x78),_0x248c00=_0x376928[_0x5d646f(0x257)](_0x5c76d8=>_0x5c76d8[_0x5d646f(0x41a)]),_0x8a64e6=_0x7dad63(),_0x48012b=await Promise[_0x5d646f(0x71a)](_0x23f707['map'](async _0x31981a=>{const _0x1779e1=_0x5d646f;if(_0x1779e1(0xa5d)!=='wOlCy'){const {omniText:_0x3ac895}=_0x201955(_0x31981a['id'],_0x3c8501['id']),_0x228003=_0x5f3db6(_0x31981a['id']),_0x1427f7=await _0xf54e02(_0x31981a['id']),_0x58799d=_0x18956d(_0x31981a['id']),_0x571066=_0x31981a['linkedWorldBookIds']&&_0x31981a[_0x1779e1(0xc49)][_0x1779e1(0xc1f)]>0x0?_0x1779e1(0x45a)+_0x31981a[_0x1779e1(0x41a)]+'的个人专属世界观设定\x0a'+_0x31981a[_0x1779e1(0xc49)]['map'](_0x5d4758=>_0x543bea[_0x1779e1(0x41e)][_0x1779e1(0xbe8)](_0xf15946=>_0xf15946['id']===_0x5d4758))[_0x1779e1(0x78c)](Boolean)[_0x1779e1(0x257)](_0x3dd888=>'\x0a##\x20条目:\x20'+_0x3dd888[_0x1779e1(0x41a)]+'\x0a'+_0x3dd888[_0x1779e1(0x297)])[_0x1779e1(0x4db)](''):'';let _0x439eee=_0x1779e1(0xc3a)+_0x31981a[_0x1779e1(0x41a)]+_0x1779e1(0x464);const _0x4a6000=_0x2cf2bf(_0x31981a['id']),_0x21a1fb=new Date();if(_0x4a6000){if('iSMKq'===_0x1779e1(0x5d3))_0x194218[_0x1779e1(0x1e2)][_0x1779e1(0xbd8)]='';else{const _0xecbf55=new Date(_0x4a6000[_0x1779e1(0x11f)]);_0x439eee+=_0x1779e1(0x236)+_0x578c7c[_0x1779e1(0x41a)]+_0x1779e1(0x956)+_0x1eac91(_0xecbf55)+'\x0a';}}else _0x1779e1(0xa92)==='tFJZo'?_0x439eee+=_0x1779e1(0x7d6)+_0x578c7c[_0x1779e1(0x41a)]+_0x1779e1(0x921):_0x34e262[_0x1779e1(0xb1e)](_0x1779e1(0x22b)+_0x446776[_0x1779e1(0x886)],_0x5e8542);return{'id':_0x31981a['id'],'name':_0x31981a['name'],'persona':_0x31981a['persona']||_0x1779e1(0x24f),'memory':_0x3ac895+_0x228003+_0x1427f7+_0x58799d+_0x571066+_0x439eee};}else _0x18e2b3[_0x1779e1(0xb47)](_0x519194);})),_0x4b6052=0x5,_0x528fb8=0xc,_0x180f99=_0x5d646f(0x398)[_0x5d646f(0xad4)](),_0x15c11f={'instruction':('\x0a-\x20你正在为一个名为“'+(_0x3c8501['name']||'群聊')+_0x5d646f(0x5e2)+(_0x578c7c['name']||'用户')+'”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20'+_0x4b6052+_0x5d646f(0x4dd)+_0x528fb8+_0x5d646f(0xcd9)+(_0x578c7c[_0x5d646f(0x41a)]||'用户')+'。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a'+_0x33b44c+'\x20\x0a'+_0x363b21+'\x0a'+_0x538cf1+'\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a'+_0x8a64e6+'\x0a')[_0x5d646f(0xad4)](),'personas':_0x48012b,'mentioned':_0x5a68f3?{'id':_0x5a68f3['id'],'name':_0x5a68f3[_0x5d646f(0x41a)]}:null,'stickerList':_0x248c00},_0xf05811={'type':_0x5d646f(0x60b),'properties':{'events':{'type':_0x5d646f(0x79d),'items':{'type':_0x5d646f(0x60b),'required':['senderId','kind'],'properties':{'senderId':{'type':'string'},'kind':{'type':_0x5d646f(0x2b1),'enum':[_0x5d646f(0x685),_0x5d646f(0xd29),_0x5d646f(0x64e)]},'content':{'type':_0x5d646f(0x2b1)},'sticker':{'type':_0x5d646f(0x2b1)},'songName':{'type':_0x5d646f(0x2b1)},'artist':{'type':_0x5d646f(0x2b1)}}}}},'required':[_0x5d646f(0x3cd)]},_0x4b8bde=[{'role':_0x5d646f(0xacc),'content':_0x180f99}];for(const _0x2038fb of _0x310307){if(_0x5d646f(0xb38)!==_0x5d646f(0x5ae)){const _0x22d285=_0x2038fb[_0x5d646f(0xcd4)]==='ai'||_0x2038fb[_0x5d646f(0xcd4)]===_0x5d646f(0xbb1)?_0x5d646f(0xbb1):'user';let _0x3717b9={'role':_0x22d285,'content':_0x2038fb[_0x5d646f(0x297)]},_0x33dfe6=!!_0x2038fb[_0x5d646f(0x297)],_0x4cefb4=null;if(_0x2038fb[_0x5d646f(0x55b)])_0x4cefb4=_0x2038fb['image'];else{if(_0x2038fb['imageId'])try{const _0x542ce1=await _0x54e221(_0x2038fb['imageId']);if(_0x542ce1)_0x4cefb4=await _0xa161cf(_0x542ce1);}catch(_0xb77c4b){console[_0x5d646f(0xb1e)](_0x5d646f(0xcda),_0xb77c4b);}}_0x4cefb4&&(_0x3717b9[_0x5d646f(0x55b)]=_0x4cefb4,_0x33dfe6=!![]);if(_0x33dfe6)_0x4b8bde[_0x5d646f(0xb47)](_0x3717b9);}else{const _0x174a8=_0x5e8b0f[_0x5d646f(0x51d)](_0x5d646f(0x384));_0x174a8['innerHTML']='';const _0x1d917e=_0x2fc894[_0x5d646f(0x41e)][_0x5d646f(0x78c)](_0x3bbb53=>_0x3bbb53[_0x5d646f(0x903)]===_0x26f355||_0x5c5dce===_0x5d646f(0x65a)&&!_0x3bbb53['categoryId']);if(_0x1d917e[_0x5d646f(0xc1f)]===0x0){_0x174a8['innerHTML']=_0x5d646f(0x6c9);return;}_0x1d917e[_0x5d646f(0xb36)](_0x41892a=>{const _0x58981a=_0x5d646f,_0x44cd01=_0x4016c5[_0x58981a(0x23f)]('div');_0x44cd01[_0x58981a(0xa9d)]='world-book-item',_0x44cd01[_0x58981a(0xa24)]['id']=_0x41892a['id'],_0x44cd01[_0x58981a(0x4d5)]=_0x58981a(0x369)+_0x41892a[_0x58981a(0x41a)]+_0x58981a(0x246)+_0x41892a['content'][_0x58981a(0xc97)](0x0,0x64)+_0x58981a(0x8a5),_0x44cd01[_0x58981a(0xbc8)]('click',()=>_0x308daf(_0x41892a['id'])),_0x174a8[_0x58981a(0x83b)](_0x44cd01);});}}_0x4b8bde['push']({'role':_0x5d646f(0x8ed),'content':_0x5d646f(0xba5)+JSON['stringify'](_0xf05811)+_0x5d646f(0x118)+JSON['stringify'](_0x15c11f)});try{const _0x59f549=await _0x3a4cad(_0x4b8bde,{'json':!![]});if(!_0x59f549)return null;let _0x53c940=_0x59f549[_0x5d646f(0xad4)]();const _0x5055d9=_0x53c940[_0x5d646f(0x606)](/```json([\s\S]*?)```/i);if(_0x5055d9)_0x53c940=_0x5055d9[0x1][_0x5d646f(0xad4)]();_0x53c940=_0xaab406(_0x53c940);let _0x5a35ca=null;try{if('QqtLv'!=='HCkWc')_0x5a35ca=JSON[_0x5d646f(0x576)](_0x53c940);else{const _0x5e4950=_0x477d7b[_0x5d646f(0x820)](_0x5d646f(0x73e));_0x5e4950&&_0x5e4950[_0x5d646f(0xab0)]();const _0x1f5575=_0x1826d9[_0x5d646f(0x820)](_0x5d646f(0x763));if(_0x1f5575&&(_0x1f5575['id']===_0x5d646f(0x6ad)||_0x1f5575['id']===_0x5d646f(0x898)))_0x141590();else{const _0x2e1af7=_0x457264[_0x5d646f(0x5c4)](_0x5d646f(0x1e3));_0x2e1af7[_0x5d646f(0xb36)](_0x3e89eb=>_0x3e89eb[_0x5d646f(0xab0)]());}}}catch(_0x330ef4){console['error']('JSON\x20解析失败!\x20错误原因:',_0x330ef4),console[_0x5d646f(0xb1e)]('收到的原始、有问题的文本:',_0x53c940);}if(!_0x5a35ca||!Array[_0x5d646f(0x8e1)](_0x5a35ca[_0x5d646f(0x3cd)]))return null;return _0x5a35ca=_0x27993d(_0x5a35ca,_0x23f707,_0x248c00),_0x5a35ca[_0x5d646f(0x3cd)]=_0x5a35ca['events'][_0x5d646f(0xb41)](0x0,_0x528fb8),_0x5a35ca[_0x5d646f(0x3cd)][_0x5d646f(0xc1f)]?_0x5a35ca:null;}catch(_0x42b859){return _0x42b859['name']!=='AbortError'&&console['error']('Failed\x20to\x20plan\x20group\x20replies:',_0x42b859),null;}}function _0x18a7e2(){const _0x4555ce=_0x3b741d,_0x5a5d54=document[_0x4555ce(0x51d)](_0x4555ce(0x5d6));_0x5a5d54['innerHTML']='';if(_0x543bea[_0x4555ce(0x882)][_0x4555ce(0xc1f)]===0x0){if(_0x4555ce(0x2a0)===_0x4555ce(0xbb8))_0x566017[_0x4555ce(0x1e2)][_0x4555ce(0xbd8)]=_0x4555ce(0x744)+_0x46a84b['avatar']+'\x27)';else{_0x5a5d54['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>';return;}}_0x543bea['friendCircles']['forEach'](_0x5b0f42=>{const _0xd240e5=_0x4555ce;if(_0xd240e5(0x838)===_0xd240e5(0x838)){const _0x50dcdf=_0x543bea[_0xd240e5(0x7e7)]['find'](_0x362793=>_0x362793['id']===_0x5b0f42[_0xd240e5(0x16c)])||{'name':_0xd240e5(0x426)},_0x1b8e9f=document[_0xd240e5(0x23f)](_0xd240e5(0xaee));_0x1b8e9f[_0xd240e5(0xa9d)]=_0xd240e5(0x6e3),_0x1b8e9f[_0xd240e5(0xa24)]['id']=_0x5b0f42['id'],_0x1b8e9f['innerHTML']=_0xd240e5(0xa8b)+_0x5b0f42[_0xd240e5(0x41a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20'+_0x50dcdf[_0xd240e5(0x41a)]+'\x20|\x20'+_0x5b0f42[_0xd240e5(0x42a)]['length']+_0xd240e5(0xa83),_0x1b8e9f[_0xd240e5(0xbc8)](_0xd240e5(0x779),()=>_0x128793(_0x5b0f42['id'])),_0x5a5d54[_0xd240e5(0x83b)](_0x1b8e9f);}else _0x317498(_0x463a80,_0xd240e5(0x8a7));});}function _0xe93ec7(_0x5e2932=null){const _0x2f8564=_0x3b741d,_0xf2315b=document[_0x2f8564(0x51d)](_0x2f8564(0x60a)),_0x3151be=document[_0x2f8564(0x51d)]('friend-circle-edit-bind-user'),_0x1629ec=document[_0x2f8564(0x51d)]('friend-circle-member-selection'),_0x9e2b18=document[_0x2f8564(0x51d)](_0x2f8564(0xce2)),_0x13657b=document[_0x2f8564(0x51d)]('editing-friend-circle-id'),_0x4feeb9=document['getElementById'](_0x2f8564(0xb03));_0xbac87e(_0x2f8564(0x5ff)),_0x1629ec[_0x2f8564(0x4d5)]='',_0x543bea[_0x2f8564(0x24d)][_0x2f8564(0xb36)](_0x642d10=>{const _0x39f5e5=_0x2f8564,_0x45e02d=document['createElement']('div');_0x45e02d[_0x39f5e5(0xa9d)]=_0x39f5e5(0x6ab),_0x45e02d['innerHTML']=_0x39f5e5(0x86d)+_0x642d10['id']+_0x39f5e5(0x618)+_0x642d10['id']+_0x39f5e5(0xa5a)+(_0x642d10[_0x39f5e5(0x5ec)]||_0x46536a)+_0x39f5e5(0x8ff)+_0x642d10['id']+'\x22\x20class=\x22char-name\x22>'+_0x642d10[_0x39f5e5(0x41a)]+_0x39f5e5(0xbf9),_0x1629ec[_0x39f5e5(0x83b)](_0x45e02d);});if(_0x5e2932){if(_0x2f8564(0x223)===_0x2f8564(0x409))_0x358f2d[_0x2f8564(0xa19)][_0x2f8564(0xab0)](_0x2f8564(0x462)),_0x25128e['classList'][_0x2f8564(0xab0)]('expanded');else{const _0x3436fa=_0x543bea[_0x2f8564(0x882)][_0x2f8564(0xbe8)](_0x2d4222=>_0x2d4222['id']===_0x5e2932);if(!_0x3436fa)return;_0x9e2b18[_0x2f8564(0x32a)]=_0x2f8564(0x934),_0x13657b[_0x2f8564(0x90f)]=_0x3436fa['id'],_0xf2315b['value']=_0x3436fa[_0x2f8564(0x41a)],_0x3151be[_0x2f8564(0x90f)]=_0x3436fa[_0x2f8564(0x16c)],_0x4feeb9[_0x2f8564(0x1e2)][_0x2f8564(0x930)]='block',_0x3436fa[_0x2f8564(0x42a)][_0x2f8564(0xb36)](_0x36d0a3=>{const _0x32e37c=_0x2f8564,_0x19faa3=_0x1629ec[_0x32e37c(0x820)](_0x32e37c(0x1d7)+_0x36d0a3);if(_0x19faa3)_0x19faa3[_0x32e37c(0xaf0)]=!![];});}}else'KIWHd'===_0x2f8564(0x17d)?(_0x9e2b18['textContent']='新建好友圈',_0x13657b[_0x2f8564(0x90f)]='',_0xf2315b[_0x2f8564(0x90f)]=_0x2f8564(0xc12)+(_0x543bea[_0x2f8564(0x882)][_0x2f8564(0xc1f)]+0x1),_0x3151be[_0x2f8564(0x90f)]=_0x543bea[_0x2f8564(0x3fc)],_0x4feeb9[_0x2f8564(0x1e2)][_0x2f8564(0x930)]=_0x2f8564(0x2f6)):_0x9cae97(_0x424c17['id']);_0x53ffb2('friendCircleEdit',_0x2f8564(0x16d));}function _0x714f01(){const _0x574dff=_0x3b741d;if(_0x574dff(0x5f1)===_0x574dff(0xbe1))return{'type':'create_event','eventType':_0x37cab7[0x1][_0x574dff(0xad4)](),'eventDate':_0x346868[0x2]['trim'](),'eventContent':_0x127ac5[0x3][_0x574dff(0xad4)]()};else{const _0x874ced=document[_0x574dff(0x51d)](_0x574dff(0x144))[_0x574dff(0x90f)],_0x3a1ef9=document[_0x574dff(0x51d)](_0x574dff(0x60a))[_0x574dff(0x90f)][_0x574dff(0xad4)](),_0x12fec2=document['getElementById'](_0x574dff(0x5ff))['value'],_0x39b4c5=Array[_0x574dff(0x382)](document[_0x574dff(0x5c4)]('#friend-circle-member-selection\x20input:checked'))[_0x574dff(0x257)](_0x53283f=>_0x53283f[_0x574dff(0xa24)]['id']);if(!_0x3a1ef9){_0x48e450(_0x574dff(0x3a5));return;}if(_0x39b4c5[_0x574dff(0xc1f)]===0x0){_0x48e450(_0x574dff(0x570));return;}if(_0x874ced){const _0x452b67=_0x543bea['friendCircles'][_0x574dff(0xbe8)](_0x45d73a=>_0x45d73a['id']===_0x874ced);_0x452b67&&(_0x452b67[_0x574dff(0x41a)]=_0x3a1ef9,_0x452b67[_0x574dff(0x16c)]=_0x12fec2,_0x452b67[_0x574dff(0x42a)]=_0x39b4c5);}else{const _0x5a38d4={'id':_0x574dff(0xb0f)+Date[_0x574dff(0x63d)](),'name':_0x3a1ef9,'boundUserProfileId':_0x12fec2,'memberCharacterIds':_0x39b4c5,'posts':[]};_0x543bea[_0x574dff(0x882)][_0x574dff(0xb47)](_0x5a38d4);}_0x1a0f1f(),_0x48e450('好友圈已保存！'),_0x18a7e2(),_0x53ffb2(_0x574dff(0x16d),_0x574dff(0x981));}}async function _0xd0e24e(){const _0x5cce42=_0x3b741d;if(_0x5cce42(0x465)===_0x5cce42(0xcc0)){const _0x565ede=(_0x55c263-0x5a)*_0x422c61['PI']/0xb4;return{'x':_0x104455+_0x2a589f*_0x3964e4[_0x5cce42(0xb8a)](_0x565ede),'y':_0x1e4e87+_0x53a73b*_0x42609c[_0x5cce42(0xd17)](_0x565ede)};}else{const _0x4ecf6a=document[_0x5cce42(0x51d)](_0x5cce42(0x144))[_0x5cce42(0x90f)];if(!_0x4ecf6a)return;const _0x294d8a=await _0x44efa2(_0x5cce42(0x242));_0x294d8a&&(_0x543bea[_0x5cce42(0x882)]=_0x543bea[_0x5cce42(0x882)][_0x5cce42(0x78c)](_0x14375a=>_0x14375a['id']!==_0x4ecf6a),_0x543bea[_0x5cce42(0x9d5)]===_0x4ecf6a&&(_0x543bea[_0x5cce42(0x9d5)]=null),_0x1a0f1f(),_0x48e450(_0x5cce42(0x1c4)),_0x18a7e2(),_0x53ffb2(_0x5cce42(0x16d),_0x5cce42(0x981)));}}function _0x128793(_0x179ecd){const _0x5b79d9=_0x3b741d;_0xa40cc0();const _0x19cf90=_0x543bea[_0x5b79d9(0x882)][_0x5b79d9(0xbe8)](_0x5d8445=>_0x5d8445['id']===_0x179ecd);if(!_0x19cf90)return;_0x543bea[_0x5b79d9(0x9d5)]=_0x179ecd,_0x1a0f1f(),document[_0x5b79d9(0x51d)]('friend-circle-title')['textContent']=_0x19cf90[_0x5b79d9(0x41a)],_0x57d7e3(),_0x53ffb2(_0x5b79d9(0x64e),'friendCircleList'),_0x53e965();}function _0x5e3865(){const _0x510296=_0x3b741d;if('mfTdz'!==_0x510296(0x717)){if(!_0x543bea[_0x510296(0x882)]||_0x543bea[_0x510296(0x882)][_0x510296(0xc1f)]===0x0){if(_0x510296(0x219)===_0x510296(0x219)){console[_0x510296(0xb1e)](_0x510296(0x2c7));return;}else{const _0x588191=_0x4a8f29[_0x510296(0x606)](_0x386e85);if(_0x588191){const _0x18f4f8=_0x537505(_0x588191[0x1],0xa),_0x6e3a27=_0x24b103(_0x588191[0x2],0xa),_0x123db0=_0x5545de(_0x588191[0x3],0xa)*(_0x588191[0x3][_0x510296(0xc1f)]===0x2?0xa:0x1),_0x117d41=_0x18f4f8*0x3c+_0x6e3a27+_0x123db0/0x3e8,_0x4d1452=_0x42da20['replace'](_0x10a5da,'')[_0x510296(0xad4)]();_0x4d1452&&_0x18cff1[_0x510296(0xb47)]({'time':_0x117d41,'text':_0x4d1452});}}}const _0x145f74=_0x543bea[_0x510296(0x882)][0x0];if(_0x145f74[_0x510296(0x42a)]['length']<0x2){console['error'](_0x510296(0x2cb)+_0x145f74[_0x510296(0x41a)]+_0x510296(0x4a2));return;}const _0x43b6bc={'id':_0x510296(0xc30)+Date[_0x510296(0x63d)](),'authorType':_0x510296(0xaa3),'authorId':_0x145f74['memberCharacterIds'][0x0],'content':'这是一条由控制台添加的测试动态！样式看起来非常完美。','timestamp':Date[_0x510296(0x63d)](),'likes':[_0x145f74[_0x510296(0x42a)][0x1]],'comments':[{'commentId':'c_'+Date[_0x510296(0x63d)](),'authorId':_0x145f74[_0x510296(0x42a)][0x1],'content':_0x510296(0x4a6)}]};_0x145f74[_0x510296(0x840)][_0x510296(0xb47)](_0x43b6bc),_0x1a0f1f(),console[_0x510296(0x68b)](_0x510296(0x5c2)+_0x145f74['name']+_0x510296(0x353)),_0x48e450(_0x510296(0x4e5));}else _0x4a3aa5+='-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a';}window[_0x3b741d(0x55c)]=_0x5e3865;function _0x4b62f7(_0xa98434){const _0x336bf6=_0x3b741d;return _0x543bea[_0x336bf6(0x7e7)][_0x336bf6(0xbe8)](_0xa96513=>_0xa96513['id']===_0xa98434);}function _0x2ee484(_0x4ff0b2,_0xb5f3d0='正在处理...'){const _0x1f9aed=_0x3b741d,_0x45934c=document[_0x1f9aed(0x51d)]('phone-container');let _0xa1161d=document[_0x1f9aed(0x51d)](_0x1f9aed(0x1fd));if(_0x4ff0b2){if(!_0xa1161d){if('ajdMI'==='ZcGVe'){_0x38f0d4(_0x1f9aed(0xd1c));return;}else _0xa1161d=document[_0x1f9aed(0x23f)](_0x1f9aed(0xaee)),_0xa1161d['id']=_0x1f9aed(0x1fd),_0x45934c[_0x1f9aed(0x83b)](_0xa1161d);}_0xa1161d['innerHTML']=_0x1f9aed(0x9a4)+_0xb5f3d0+_0x1f9aed(0xcd7),_0xa1161d[_0x1f9aed(0x1e2)][_0x1f9aed(0x930)]=_0x1f9aed(0x338);}else{if(_0xa1161d){if(_0x1f9aed(0x35e)!=='IIUWS')_0xa1161d[_0x1f9aed(0x1e2)]['display']=_0x1f9aed(0x2f6);else{const _0x23707f=new _0x115bd3(),_0x5c8889=_0xa893ac[_0x1f9aed(0x51d)](_0x1f9aed(0x58a)),_0x39ac1e=_0x36a6ac[_0x1f9aed(0x51d)](_0x1f9aed(0xc77));if(_0x5c8889&&_0x39ac1e){const _0x17b395=_0x49354f(_0x23707f[_0x1f9aed(0x8bb)]())[_0x1f9aed(0xa9f)](0x2,'0'),_0x6ade6e=_0x13e6d9(_0x23707f['getMinutes']())[_0x1f9aed(0xa9f)](0x2,'0');_0x5c8889[_0x1f9aed(0x32a)]=_0x17b395+':'+_0x6ade6e;const _0x59d8b9=_0x23707f['getMonth']()+0x1,_0x5e0c97=_0x23707f[_0x1f9aed(0x3d6)](),_0x2a34d1=[_0x1f9aed(0x229),'星期一',_0x1f9aed(0x66b),_0x1f9aed(0x182),_0x1f9aed(0x4e6),_0x1f9aed(0xb19),_0x1f9aed(0x8a9)][_0x23707f[_0x1f9aed(0x848)]()];_0x39ac1e[_0x1f9aed(0x32a)]=_0x59d8b9+'月'+_0x5e0c97+'日\x20'+_0x2a34d1;}}}}}async function _0x125890(){const _0x1bf169=_0x3b741d,_0x654387=_0x543bea['friendCircles']['find'](_0x5b74a7=>_0x5b74a7['id']===_0x543bea['activeFriendCircleId']);if(!_0x654387||_0x543bea[_0x1bf169(0xd1f)])return;_0x2ee484(!![],_0x1bf169(0x286)),await new Promise(_0x6e822f=>setTimeout(_0x6e822f,0x32)),_0x543bea[_0x1bf169(0xd1f)]=!![];try{let _0x4b2e0a=Date['now']();if(_0x654387[_0x1bf169(0x840)]&&_0x654387['posts']['length']>0x0){if('mIwVY'===_0x1bf169(0xc87)){const _0xaab77e=_0x27b959[_0x1bf169(0x576)](_0x2f0ca1[_0x1bf169(0xa24)][_0x1bf169(0x68b)][_0x1bf169(0x6ac)](/&quot;/g,'\x22')),_0x19c886=_0x33ac70[_0x1bf169(0xa24)][_0x1bf169(0x21a)],_0x3b8729=_0x338497[_0x1bf169(0xa24)][_0x1bf169(0xb60)];_0x16f4e5(_0x19c886,_0x3b8729,_0xaab77e);}else _0x4b2e0a=Math['max'](..._0x654387[_0x1bf169(0x840)][_0x1bf169(0x257)](_0x2a2794=>_0x2a2794[_0x1bf169(0x11f)]));}const _0x58957b=await _0x30906f(_0x654387);if(!_0x58957b||_0x58957b[_0x1bf169(0xc1f)]===0x0){if(_0x1bf169(0x3bc)===_0x1bf169(0x3bc)){_0x48e450(_0x1bf169(0x304));return;}else _0x473e5b[_0x1bf169(0x1e2)][_0x1bf169(0x930)]=_0x1bf169(0x2f6);}const _0x2a9132=_0x58957b[_0x1bf169(0x257)](async(_0x3627fc,_0x4d36f6)=>{const _0x5d8450=_0x1bf169;_0x2ee484(!![],_0x5d8450(0x385)+(_0x4d36f6+0x1)+_0x5d8450(0xac5)+_0x58957b['length']+'\x20条动态...');const _0x7cf988=_0x4b2e0a+(_0x4d36f6+0x1)*0x3c*0x3e8,_0x288a9f={'id':'post_'+_0x3627fc[_0x5d8450(0x719)]+'_'+_0x7cf988,'authorType':'character','authorId':_0x3627fc[_0x5d8450(0x719)],'content':_0x3627fc['postContent'],'timestamp':_0x7cf988,'likes':_0x3627fc['likes']||[],'comments':(_0x3627fc[_0x5d8450(0xc82)]||[])[_0x5d8450(0x257)]((_0x344aa8,_0x404a60)=>({'commentId':'c_'+_0x7cf988+'_'+_0x404a60,'authorId':_0x344aa8['authorId'],'content':_0x344aa8[_0x5d8450(0x297)]}))};if(_0x3627fc['postType']===_0x5d8450(0x64e)&&_0x3627fc[_0x5d8450(0xd09)]&&_0x3627fc['artist']){if(_0x5d8450(0x477)===_0x5d8450(0x477))try{const _0x2f96ac=await _0x4ffd26(_0x3627fc[_0x5d8450(0xd09)],_0x3627fc[_0x5d8450(0x38b)]);_0x288a9f[_0x5d8450(0x711)]=_0x5d8450(0x64e),_0x288a9f['songName']=_0x3627fc[_0x5d8450(0xd09)],_0x288a9f[_0x5d8450(0x38b)]=_0x3627fc[_0x5d8450(0x38b)],_0x288a9f[_0x5d8450(0x372)]=_0x2f96ac[_0x5d8450(0x73d)],_0x288a9f[_0x5d8450(0x72e)]=_0x2f96ac[_0x5d8450(0x411)];}catch(_0x23d2b1){console['error'](_0x5d8450(0x3e2),_0x23d2b1),_0x288a9f['type']=_0x5d8450(0x685);}else _0x502c4d[_0x5d8450(0xb47)]('['+_0x3148fc(_0x5c84d8)+']\x20'+_0x1c4841[_0x5d8450(0x297)]);}else _0x5d8450(0x5f5)==='PUaRO'?(_0x460380[_0x5d8450(0x75b)]=!![],_0xcb81ce()):_0x288a9f['type']='text';return _0x288a9f;}),_0x33359a=await Promise[_0x1bf169(0x71a)](_0x2a9132);_0x654387[_0x1bf169(0x840)][_0x1bf169(0xb47)](..._0x33359a),_0x1a0f1f(),_0xa40cc0();}catch(_0x46898f){console['error'](_0x1bf169(0xce5),_0x46898f),_0x48e450(_0x1bf169(0xcb3)+_0x46898f[_0x1bf169(0x979)]);}finally{_0x57d7e3(),_0x2ee484(![]),_0x543bea[_0x1bf169(0xd1f)]=![];}}async function _0x30906f(_0x3c3dde){const _0x238062=_0x3b741d;if(_0x238062(0xc4c)==='TSUNp'){const _0x120f35=_0x3c3dde['memberCharacterIds'][_0x238062(0x257)](_0x55f133=>_0x509294(_0x55f133))[_0x238062(0x78c)](Boolean);if(_0x120f35['length']===0x0)return null;const _0x569b8b=_0x7dad63(),_0x58c0d2=_0x4b62f7(_0x3c3dde[_0x238062(0x16c)])||_0x543bea['userProfiles'][0x0],_0x2326f4=_0x58c0d2?_0x238062(0x87d)+_0x58c0d2[_0x238062(0x41a)]+_0x238062(0x631)+(_0x58c0d2[_0x238062(0x367)]||'无')+'\x0a':'',_0x5ad8ac=_0x120f35[_0x238062(0x257)](_0x4995e9=>{const _0xe5af32=_0x238062,{omniText:_0x5d1fa8}=_0x201955(_0x4995e9['id'],null),_0x6fd42e=_0x5f3db6(_0x4995e9['id']),_0x4414a3=_0x4995e9['linkedWorldBookIds']&&_0x4995e9[_0xe5af32(0xc49)][_0xe5af32(0xc1f)]>0x0?_0xe5af32(0x45a)+_0x4995e9[_0xe5af32(0x41a)]+'的个人专属世界观设定\x0a'+_0x4995e9['linkedWorldBookIds'][_0xe5af32(0x257)](_0x230f57=>_0x543bea[_0xe5af32(0x41e)][_0xe5af32(0xbe8)](_0x6b3fb0=>_0x6b3fb0['id']===_0x230f57))['filter'](Boolean)[_0xe5af32(0x257)](_0x26a0ab=>_0xe5af32(0x87f)+_0x26a0ab[_0xe5af32(0x41a)]+'\x0a'+_0x26a0ab[_0xe5af32(0x297)])[_0xe5af32(0x4db)](''):'';return _0xe5af32(0x65b)+_0x4995e9[_0xe5af32(0x41a)]+_0xe5af32(0x710)+_0x4995e9['id']+_0xe5af32(0xb51)+_0x4995e9[_0xe5af32(0x367)]+'\x0a\x20\x20近期记忆:\x0a'+_0x5d1fa8+'\x0a'+_0x6fd42e+'\x0a'+_0x4414a3;})[_0x238062(0x4db)]('\x0a\x0a'),_0x486a2d=Math['floor'](Math[_0x238062(0x754)]()*0x3)+0x2,_0x4a2b8c=_0x238062(0x555)+_0x486a2d+_0x238062(0xa7c)+_0x58c0d2[_0x238062(0x41a)]+_0x238062(0xceb)+_0x5ad8ac+'\x0a'+_0x2326f4+_0x238062(0x497)+_0x569b8b+'\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为'+_0x486a2d+_0x238062(0x1d5)+_0x486a2d+_0x238062(0xa69),_0x3a70b4=[{'role':'system','content':_0x4a2b8c},{'role':_0x238062(0x8ed),'content':_0x238062(0x705)}];_0x3a70b4[_0x238062(0xb47)]({'role':'user','content':_0x238062(0x92f)+_0x486a2d+_0x238062(0x28c)});try{if(_0x238062(0xa1e)!==_0x238062(0x2fa)){const _0x590c5b=await _0x3a4cad(_0x3a70b4,{'json':!![]}),_0xc756e0=_0x590c5b[_0x238062(0x606)](/(\[[\s\S]*\])/);if(!_0xc756e0)throw new Error(_0x238062(0x29d));const _0x1d791b=_0xc756e0[0x1],_0x4114fc=JSON[_0x238062(0x576)](_0x1d791b);if(!Array['isArray'](_0x4114fc))throw new Error('AI返回的不是一个数组。');return _0x4114fc;}else _0x1cb4ce['classList'][_0x238062(0x25d)]('is-user');}catch(_0x35e36d){if(_0x238062(0x636)!==_0x238062(0x307))return console[_0x238062(0xb1e)]('批量生成动态失败:\x20',_0x35e36d),console['error'](_0x238062(0xd20),_0x35e36d[_0x238062(0x287)]||_0x238062(0x5d1)),null;else _0x237df2(_0x387a10);}}else _0xb80bea=_0x4f2f67[_0x238062(0x576)](_0x4c4d3b);}async function _0x225485(){const _0x4dcb36=_0x3b741d;if(_0x4dcb36(0x8fd)!=='DRdsE'){const _0x53a12d=_0x543bea[_0x4dcb36(0x882)][_0x4dcb36(0xbe8)](_0x2ed9a4=>_0x2ed9a4['id']===_0x543bea[_0x4dcb36(0x9d5)]);if(!_0x53a12d)return;const _0x615f66=await _0x44efa2('确定要清空好友圈“'+_0x53a12d[_0x4dcb36(0x41a)]+_0x4dcb36(0x177));if(_0x615f66){if(_0x4dcb36(0x992)===_0x4dcb36(0x992))_0x53a12d[_0x4dcb36(0x840)]=[],_0x1a0f1f(),_0x57d7e3(),_0x48e450(_0x4dcb36(0x313));else{const _0x46ecf2=_0x206ed7[_0x4dcb36(0x268)],_0x34950f=_0x4e936e(_0x46ecf2);if(!_0x34950f)return;_0x33562f[_0x4dcb36(0x51d)](_0x4dcb36(0x1fc))[_0x4dcb36(0x32a)]=_0x34950f[_0x4dcb36(0x41a)]+_0x4dcb36(0xa06),_0x219086(_0x46ecf2),_0x103bcc('livestreamReplays',_0x4dcb36(0x99d));}}}else _0x3842a9[_0x4dcb36(0xc49)]=_0x4c981f[_0x4dcb36(0xc49)]['filter'](_0x6e8cdb=>_0x6e8cdb!==_0x4d59d5);}function _0x57d7e3(){const _0x3ab34c=_0x3b741d,_0x183c7c=document[_0x3ab34c(0x51d)](_0x3ab34c(0x3e6)),_0x28be86=_0x543bea[_0x3ab34c(0x882)][_0x3ab34c(0xbe8)](_0x12f08d=>_0x12f08d['id']===_0x543bea[_0x3ab34c(0x9d5)]);if(!_0x28be86){if(_0x3ab34c(0x905)!==_0x3ab34c(0x9e2)){_0x183c7c['innerHTML']=_0x3ab34c(0x5b3);return;}else{if(_0x4ddfe9===null)return;const _0x69c7cb=_0xa4421e[_0x3ab34c(0xc54)][_0x28d128];if(!_0x69c7cb)return;const _0x199eeb=_0x37b519();let _0x40100c='未知';if(_0x69c7cb['role']===_0x3ab34c(0x8ed)){const _0x442703=_0xbbc0d(_0x52e585[_0x3ab34c(0x886)]);_0x40100c=_0x442703[_0x3ab34c(0x41a)]||'我';}else{const _0x1f4a88=_0x69c7cb[_0x3ab34c(0x2fb)]||_0x199eeb?.[_0x3ab34c(0x184)][0x0],_0x102d42=_0x3a9dcf(_0x1f4a88);_0x40100c=_0x102d42?_0x102d42[_0x3ab34c(0x41a)]:'角色';}let _0x260efb=_0x69c7cb['content']||'';if(_0x69c7cb[_0x3ab34c(0x3b2)])_0x260efb=_0x3ab34c(0xce3);if(_0x69c7cb[_0x3ab34c(0x55b)])_0x260efb=_0x3ab34c(0x99f);if(_0x260efb['length']>0x32)_0x260efb=_0x260efb[_0x3ab34c(0xc97)](0x0,0x32)+_0x3ab34c(0x262);_0x47dc21[_0x3ab34c(0xa6e)]={'sender':_0x40100c,'content':_0x260efb},_0x4dbfd0(),_0x33a2a4(),_0x34bc4e['focus']();}}if(!_0x28be86['posts']||_0x28be86[_0x3ab34c(0x840)]['length']===0x0){if('DXdme'!==_0x3ab34c(0x741))_0x2a341e['log'](_0x3ab34c(0x931)+_0x461165),_0x997d1['createObjectStore'](_0x25bf34,{'keyPath':'id'});else{_0x183c7c[_0x3ab34c(0x4d5)]=_0x3ab34c(0x4f4);return;}}_0x183c7c[_0x3ab34c(0x4d5)]='';const _0x2a1c58=[..._0x28be86['posts']][_0x3ab34c(0xb3d)]((_0x1787b7,_0x3c0967)=>_0x3c0967[_0x3ab34c(0x11f)]-_0x1787b7[_0x3ab34c(0x11f)]);_0x2a1c58[_0x3ab34c(0xb36)](_0x58ea89=>{const _0x575238=_0x3ab34c,_0x52da1e=document[_0x575238(0x23f)](_0x575238(0xaee));_0x52da1e['className']=_0x575238(0x270);let _0x3050db='未知',_0x235e17=_0x46536a;if(_0x58ea89['authorType']===_0x575238(0x8ed)){if(_0x575238(0x277)===_0x575238(0x277)){const _0x50bea5=_0x4b62f7(_0x58ea89[_0x575238(0x719)]);_0x50bea5&&('xwjEu'!==_0x575238(0x312)?(_0x3a196a[_0x575238(0x3b3)]=_0x5b3720['id'],_0x3a196e()):(_0x3050db=_0x50bea5[_0x575238(0x41a)],_0x235e17=_0x50bea5['avatar']));}else _0x583c32[_0x575238(0x1e2)][_0x575238(0xbd8)]='';}else{if('eXYAk'!==_0x575238(0x769)){const _0x4b4ed7=_0x121c2c[_0x575238(0x94b)][_0x575238(0xbe8)](_0x4c2d1d=>_0x4c2d1d[_0x575238(0x184)]['includes'](_0x226c72));if(!_0x4b4ed7)return'';const _0x257545=_0x196af1(_0x4b4ed7['id']),_0x3d7590=_0x2f8d2b[_0x575238(0x21c)][_0x575238(0x78c)](_0x157456=>_0x157456[_0x575238(0x79e)]===_0x257545['id']||!_0x157456[_0x575238(0x79e)]);if(_0x3d7590[_0x575238(0xc1f)]===0x0)return'';const _0x2eb3fe=_0x3d7590[_0x575238(0x257)](_0x27f4ec=>{const _0x18dc85=_0x575238,_0x2a1261=_0x27f4ec[_0x18dc85(0x711)]==='important'?'纪念日':'待办';return _0x18dc85(0x346)+_0x2a1261+']\x20'+_0x27f4ec[_0x18dc85(0x637)]+':\x20'+_0x27f4ec[_0x18dc85(0x297)];})[_0x575238(0x4db)]('\x0a');return _0x575238(0xbde)+_0x257545[_0x575238(0x41a)]+_0x575238(0xb26)+_0x2eb3fe;}else{const _0xa4ed5f=_0x509294(_0x58ea89[_0x575238(0x719)]);if(_0xa4ed5f){if(_0x575238(0x8a1)!==_0x575238(0x7f4))_0x3050db=_0xa4ed5f['name'],_0x235e17=_0xa4ed5f[_0x575238(0x5ec)];else{_0x58b3a3['value']=_0x575238(0xca1);return;}}}}const _0x921429=_0x575238(0x429)+_0x235e17+_0x575238(0xc05)+_0x3050db+'</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2b57a4=_0x575238(0xad5)+_0x58ea89[_0x575238(0x297)]+_0x575238(0x84f);let _0x35750c='';if(_0x58ea89[_0x575238(0x55b)]||_0x58ea89[_0x575238(0x7c2)]){const _0x584124='post-img-'+_0x58ea89['id'];_0x35750c=_0x575238(0x664)+_0x584124+_0x575238(0x666),setTimeout(()=>{const _0x4084a1=_0x575238,_0x301b9b=document['getElementById'](_0x584124);if(!_0x301b9b)return;if(_0x58ea89[_0x4084a1(0x55b)]){if(_0x4084a1(0x7d4)===_0x4084a1(0x7d4))_0x301b9b[_0x4084a1(0x2d9)]=_0x58ea89[_0x4084a1(0x55b)];else throw new _0x219a70(_0x4084a1(0x60e));}else _0x58ea89[_0x4084a1(0x7c2)]&&_0x54e221(_0x58ea89[_0x4084a1(0x7c2)])[_0x4084a1(0x842)](_0x4df4c9=>{const _0x35b70c=_0x4084a1;if(_0x4df4c9){if(_0x35b70c(0x23c)===_0x35b70c(0x23c)){const _0x5231f9=URL[_0x35b70c(0xcb2)](_0x4df4c9);_0x301b9b[_0x35b70c(0x2d9)]=_0x5231f9,_0x301b9b['onload']=()=>URL[_0x35b70c(0x6eb)](_0x5231f9);}else _0x13fef2['removeItem'](_0x35b70c(0x932)),_0x5f4b6e[_0x35b70c(0x584)](_0x35b70c(0x470)),_0x5d4b8b(_0x35b70c(0x47c)),_0x57ea5f(()=>_0x36eaaa[_0x35b70c(0x5f2)](),0x3e8);}});},0x0);}let _0x34088a='';_0x58ea89[_0x575238(0x711)]===_0x575238(0x64e)&&_0x58ea89[_0x575238(0xd09)]&&(_0x34088a=_0x575238(0x92c)+_0x58ea89['id']+_0x575238(0x5e6)+(_0x58ea89[_0x575238(0x372)]||_0x46536a)+_0x575238(0x883)+_0x58ea89[_0x575238(0xd09)]+_0x575238(0x65f)+_0x58ea89[_0x575238(0x38b)]+_0x575238(0x913)+(_0x58ea89[_0x575238(0x72e)]?'▶':'⚠')+_0x575238(0x6c6));const _0x2ac3e4='<div\x20class=\x22post-timestamp\x22>'+new Date(_0x58ea89['timestamp'])[_0x575238(0x5f4)](_0x575238(0xbd4))+_0x575238(0xc4f);let _0x31c310='';if(_0x58ea89[_0x575238(0x646)]&&_0x58ea89[_0x575238(0x646)][_0x575238(0xc1f)]>0x0||_0x58ea89['comments']&&_0x58ea89[_0x575238(0xc82)]['length']>0x0){let _0x35d2b6='';if(_0x58ea89['likes']&&_0x58ea89[_0x575238(0x646)][_0x575238(0xc1f)]>0x0){if(_0x575238(0xb3f)===_0x575238(0xb3f)){const _0x5c1891=_0x58ea89['likes'][_0x575238(0x257)](_0x5c0f23=>_0x509294(_0x5c0f23)?.[_0x575238(0x41a)]||'未知')[_0x575238(0x4db)]('、'),_0x1856a3=_0x575238(0x927);_0x35d2b6='<div\x20class=\x22post-likes\x22>'+_0x1856a3+'\x20'+_0x5c1891+_0x575238(0xc4f);}else _0x53aa88[_0x575238(0x1e2)][_0x575238(0x930)]=_0x575238(0x2f6);}let _0x2e1835='';if(_0x58ea89[_0x575238(0xc82)]&&_0x58ea89[_0x575238(0xc82)]['length']>0x0){const _0x16c475=_0x58ea89[_0x575238(0xc82)][_0x575238(0x257)](_0x493a79=>{const _0x4af3ca=_0x575238,_0x1d01e0=_0x509294(_0x493a79[_0x4af3ca(0x719)])?.[_0x4af3ca(0x41a)]||'未知';return _0x4af3ca(0x40b)+_0x1d01e0+_0x4af3ca(0xbf1)+_0x493a79[_0x4af3ca(0x297)]+_0x4af3ca(0xc4f);})[_0x575238(0x4db)]('');_0x2e1835=_0x575238(0x675)+_0x16c475+'</div>';}_0x31c310=_0x575238(0xbac)+_0x35d2b6+_0x575238(0x974)+_0x2e1835+_0x575238(0x954);}const _0x114bd5='<div\x20class=\x22post-body\x22>'+_0x2b57a4+_0x35750c+_0x34088a+_0x575238(0xc4f);_0x52da1e[_0x575238(0x4d5)]=_0x921429+_0x114bd5+_0x2ac3e4+_0x31c310;if(_0x58ea89[_0x575238(0x711)]==='music'&&_0x58ea89['playableUrl']){if('SnjsM'!==_0x575238(0x787))_0x2945f4['addEventListener'](_0x575238(0x779),()=>_0x419141[_0x575238(0x779)]()),_0x16cac6['addEventListener']('change',_0x530a9f);else{const _0xb2f391=_0x52da1e[_0x575238(0x820)](_0x575238(0xaa5));_0xb2f391&&(_0x575238(0x1b6)===_0x575238(0xc20)?(_0x4dba4e(),_0x504945(![])):_0xb2f391['addEventListener']('click',function(){const _0x22bf09=_0x575238,_0x58a095={'id':_0x58ea89['id'],'url':_0x58ea89[_0x22bf09(0x72e)]};_0x4a7731(this,_0x58a095);}));}}_0x183c7c[_0x575238(0x83b)](_0x52da1e);});}document[_0x3b741d(0x51d)]('clear-feed-button')['addEventListener']('click',_0x225485),document[_0x3b741d(0x51d)](_0x3b741d(0x746))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x125890),document[_0x3b741d(0x51d)](_0x3b741d(0x2e4))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2('home',_0x3b741d(0x16d))),document[_0x3b741d(0x51d)](_0x3b741d(0x439))[_0x3b741d(0xbc8)]('click',()=>_0xe93ec7()),document[_0x3b741d(0x51d)](_0x3b741d(0x84a))[_0x3b741d(0xbc8)]('click',()=>_0x53ffb2(_0x3b741d(0x16d),_0x3b741d(0x981))),document[_0x3b741d(0x51d)](_0x3b741d(0xa55))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x714f01),document[_0x3b741d(0x51d)](_0x3b741d(0xb03))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0xd0e24e),document['getElementById'](_0x3b741d(0x98e))['addEventListener'](_0x3b741d(0x779),()=>{const _0x48518f=_0x3b741d;_0x18a7e2(),_0x53ffb2(_0x48518f(0x16d),_0x48518f(0x64e));}),document[_0x3b741d(0x51d)](_0x3b741d(0x560))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x349d7d=_0x3b741d;_0x543bea[_0x349d7d(0x9d5)]&&_0xe93ec7(_0x543bea[_0x349d7d(0x9d5)]);}),document[_0x3b741d(0x51d)]('user-send-post-button')[_0x3b741d(0xbc8)](_0x3b741d(0x779),async()=>{const _0x3ce23c=_0x3b741d;if(_0x3ce23c(0x915)!==_0x3ce23c(0xd3e)){const _0x38c410=_0x543bea['friendCircles']['find'](_0x45dabe=>_0x45dabe['id']===_0x543bea['activeFriendCircleId']);if(!_0x38c410||_0x543bea[_0x3ce23c(0xd1f)])return;const _0x4f901d=_0x38c410[_0x3ce23c(0x16c)],_0x57a4d1=_0x543bea[_0x3ce23c(0x7e7)]['find'](_0x531349=>_0x531349['id']===_0x4f901d);if(!_0x57a4d1){_0x48e450(_0x3ce23c(0x83a));return;}const _0x561541=document[_0x3ce23c(0x51d)](_0x3ce23c(0xd07))[_0x3ce23c(0x90f)][_0x3ce23c(0xad4)](),_0x5199b4=_0x543bea['pendingPostAttachments'][_0x3ce23c(0x55b)],_0x27a921=_0x543bea[_0x3ce23c(0x139)]['music'],_0x2fbe64=_0x543bea[_0x3ce23c(0x139)][_0x3ce23c(0x7c2)];if(!_0x561541&&!_0x5199b4&&!_0x27a921){_0x48e450(_0x3ce23c(0x847));return;}const _0x41c418={'id':_0x3ce23c(0x947)+Date[_0x3ce23c(0x63d)](),'authorType':_0x3ce23c(0x8ed),'authorId':_0x57a4d1['id'],'content':_0x561541,'timestamp':Date[_0x3ce23c(0x63d)](),'likes':[],'comments':[]};if(_0x2fbe64)_0x41c418[_0x3ce23c(0x7c2)]=_0x2fbe64;else _0x5199b4&&(_0x3ce23c(0x706)!=='bVAsk'?_0x31be5b['activeUserProfileId']=_0x3f1444[_0x3ce23c(0x7e7)][0x0]['id']:_0x41c418['image']=_0x5199b4);if(_0x27a921){if(_0x3ce23c(0x1d6)!==_0x3ce23c(0x1d6)){const _0x3195a8=_0x3fa144(_0x24c221[_0x3ce23c(0x268)]);_0x3195a8&&(_0x3195a8['livestreamSpriteTransform']=_0x1cbd57,_0x18d4e0(_0x3cb955[_0x3ce23c(0x268)],_0x3ce23c(0x8a7)));}else _0x41c418['type']=_0x3ce23c(0x64e),Object[_0x3ce23c(0xa48)](_0x41c418,_0x27a921);}else _0x41c418['type']='text';_0x38c410[_0x3ce23c(0x840)][_0x3ce23c(0xb47)](_0x41c418),_0x1a0f1f(),_0x57d7e3(),document['getElementById'](_0x3ce23c(0xd07))['value']='',_0x543bea[_0x3ce23c(0x139)][_0x3ce23c(0x55b)]=null,_0x543bea[_0x3ce23c(0x139)][_0x3ce23c(0x64e)]=null,_0x543bea[_0x3ce23c(0x139)][_0x3ce23c(0x7c2)]=null,_0x5d056f(),_0x36c659(_0x41c418);}else{const _0x4d6851=_0x4b44a1[_0x3ce23c(0x51d)](_0x3ce23c(0x2c4));if(!_0x4d6851)return;const _0x4cbec7=_0x2217e7['getItem'](_0x3ce23c(0xb7f))||'35';_0x554214[_0x3ce23c(0x713)][_0x3ce23c(0x1e2)][_0x3ce23c(0xcac)](_0x3ce23c(0x480),_0x4cbec7),_0x4d6851[_0x3ce23c(0x90f)]=_0x4cbec7,_0x4d6851[_0x3ce23c(0xbc8)]('input',()=>{const _0x760a20=_0x3ce23c,_0x47d14b=_0x4d6851[_0x760a20(0x90f)];_0x32d07a[_0x760a20(0x713)]['style'][_0x760a20(0xcac)](_0x760a20(0x480),_0x47d14b),_0x273e22[_0x760a20(0xa1c)]('themeHue',_0x47d14b),_0x812002();});}}),document[_0x3b741d(0x51d)]('user-post-image-button')[_0x3b741d(0xbc8)]('click',()=>{const _0x1afb8e=_0x3b741d;document['getElementById'](_0x1afb8e(0x8b9))[_0x1afb8e(0x779)]();}),document[_0x3b741d(0x51d)]('user-post-image-input')[_0x3b741d(0xbc8)](_0x3b741d(0xb2a),async _0x29a83d=>{const _0x2172b1=_0x3b741d,_0x456fa7=_0x29a83d[_0x2172b1(0x446)]['files'][0x0];if(!_0x456fa7)return;try{if(_0x2172b1(0xa4d)!==_0x2172b1(0xaac)){const _0x3414bd=await _0x13bce5(_0x456fa7,0x320,0.8,!![]),_0x254174='post_image_'+Date['now']();await _0x567110(_0x254174,_0x3414bd),_0x543bea[_0x2172b1(0x139)][_0x2172b1(0x7c2)]=_0x254174,_0x543bea['pendingPostAttachments'][_0x2172b1(0x55b)]=null,_0x543bea[_0x2172b1(0x139)][_0x2172b1(0x64e)]=null,_0x5d056f();}else{const _0x5544d8=_0x298693(_0x102fc5[_0x2172b1(0x268)]);_0x5544d8&&(delete _0x5544d8[_0x2172b1(0x969)],_0x426219(),_0x824071(_0x5544d8['id'],'normal'),_0x218e4c('已恢复默认。'),_0x3e10bf(!![]));}}catch(_0x5c980e){_0x48e450(_0x2172b1(0x56a)+_0x5c980e[_0x2172b1(0x979)]);}_0x29a83d[_0x2172b1(0x446)]['value']='';}),document[_0x3b741d(0x51d)]('user-post-music-button')[_0x3b741d(0xbc8)]('click',async()=>{const _0xfc6c15=_0x3b741d;if(_0xfc6c15(0x235)==='DUIMV')_0x13b56a=_0x22c60f(_0x7ee9b2);else{const _0x33814d=await _0x357cce();if(!_0x33814d)return;_0x48e450(_0xfc6c15(0x36e));try{const _0x5d9255=await _0x4ffd26(_0x33814d[_0xfc6c15(0xd09)],_0x33814d['artist']);_0x543bea[_0xfc6c15(0x139)][_0xfc6c15(0x64e)]={'songName':_0x33814d[_0xfc6c15(0xd09)],'artist':_0x33814d['artist'],'coverUrl':_0x5d9255[_0xfc6c15(0x73d)],'playableUrl':_0x5d9255[_0xfc6c15(0x411)]},_0x543bea[_0xfc6c15(0x139)][_0xfc6c15(0x55b)]=null,_0x5d056f();}catch(_0x2b8f88){if(_0xfc6c15(0xa38)!=='xIZbz'){const _0x1adeaf=_0x983f48['chats'][_0xfc6c15(0xbe8)](_0x729dc2=>_0x729dc2[_0xfc6c15(0x56f)]&&_0x729dc2[_0xfc6c15(0x56f)][_0xfc6c15(0x8ce)]);_0x1adeaf&&(_0x1adeaf['activeListenSession']=null,_0x1c12a0(),_0x27a28d(_0xfc6c15(0x501)),_0x23b857(),_0x4ea540[_0xfc6c15(0xa19)]['remove'](_0xfc6c15(0x6db)),_0x509f5a(()=>_0x25c3d0[_0xfc6c15(0x1e2)][_0xfc6c15(0x930)]=_0xfc6c15(0x2f6),0x12c));}else _0x48e450('音乐搜索失败:\x20'+_0x2b8f88[_0xfc6c15(0x979)]);}}});function _0x1915c9(){const _0x173e19=_0x3b741d,_0x5c3173=new Date(),_0x3a0c21=document[_0x173e19(0x51d)]('home-time'),_0x39ebfb=document['getElementById'](_0x173e19(0xba3));if(_0x3a0c21&&_0x39ebfb){const _0xc0b2af=String(_0x5c3173[_0x173e19(0x8bb)]())['padStart'](0x2,'0'),_0x5b7c18=String(_0x5c3173['getMinutes']())['padStart'](0x2,'0');_0x3a0c21[_0x173e19(0x32a)]=_0xc0b2af+':'+_0x5b7c18;const _0x386a0b=_0x5c3173[_0x173e19(0xc3f)]()+0x1,_0x26109a=_0x5c3173[_0x173e19(0x3d6)](),_0x51a736=[_0x173e19(0x229),_0x173e19(0xb9f),_0x173e19(0x66b),_0x173e19(0x182),_0x173e19(0x4e6),_0x173e19(0xb19),_0x173e19(0x8a9)][_0x5c3173['getDay']()];_0x39ebfb[_0x173e19(0x32a)]=_0x386a0b+'月'+_0x26109a+'日\x20'+_0x51a736;}}function _0x2ca02b(_0x399224){const _0x2567ba=_0x3b741d;if(!_0x399224)return'';const _0x5dd727=new Date(_0x399224),_0xd1a31=String(_0x5dd727[_0x2567ba(0x8bb)]())[_0x2567ba(0xa9f)](0x2,'0'),_0x5c08b8=String(_0x5dd727[_0x2567ba(0x5f9)]())['padStart'](0x2,'0');return _0xd1a31+':'+_0x5c08b8;}function _0x7dad63(){const _0x24859b=_0x3b741d,_0x169c85=_0x543bea[_0x24859b(0x882)][_0x24859b(0xbe8)](_0x5a0841=>_0x5a0841['id']===_0x543bea[_0x24859b(0x9d5)]),_0x56ee13=_0x169c85?_0x169c85[_0x24859b(0x840)]:[];if(!_0x56ee13||_0x56ee13[_0x24859b(0xc1f)]===0x0){if('vNKVF'===_0x24859b(0x117))_0x13b01c+=_0x24859b(0x19a);else return'';}const _0x1b4145=_0x56ee13['slice'](0x0,0x5),_0x888bad=_0x1b4145[_0x24859b(0x257)](_0x20e7f3=>{const _0x412bd6=_0x24859b,_0x3c6e0b=_0x509294(_0x20e7f3['authorId'])||{'name':'未知'};let _0x2941bd=_0x412bd6(0x36a)+_0x3c6e0b['name']+_0x412bd6(0x98a)+(_0x20e7f3[_0x412bd6(0xc7d)]||_0x20e7f3[_0x412bd6(0x297)])+'”';return _0x20e7f3[_0x412bd6(0x711)]==='music'&&(_0x2941bd+='\x20(分享了歌曲:\x20'+_0x20e7f3[_0x412bd6(0xd09)]+'\x20-\x20'+_0x20e7f3[_0x412bd6(0x38b)]+')'),_0x2941bd;});return _0x24859b(0x85e)+_0x888bad['join']('\x0a');}function _0x5f3db6(_0x453daa){const _0x4b8de9=_0x3b741d,_0x1e8b5c=_0x543bea[_0x4b8de9(0x7e7)][_0x4b8de9(0xbe8)](_0x506392=>_0x506392['id']===_0x543bea[_0x4b8de9(0x3fc)])||{'name':'你'},_0x4b427a=_0x543bea[_0x4b8de9(0x12b)]['find'](_0x31e33b=>_0x31e33b['characterId']===_0x453daa);if(!_0x4b427a||!_0x4b427a[_0x4b8de9(0x594)]||_0x4b427a[_0x4b8de9(0x594)][_0x4b8de9(0xc1f)]===0x0)return'';const _0x1ff029=_0x4b427a['entries'][_0x4b8de9(0xb41)](-0x8),_0x339da1=_0x1ff029[_0x4b8de9(0x257)](_0x3117f1=>{const _0x36f20d=_0x4b8de9,_0x5eaa04=_0x3117f1[_0x36f20d(0x7a5)]===_0x36f20d(0x8ed)?_0x1e8b5c[_0x36f20d(0x41a)]:_0x509294(_0x3117f1[_0x36f20d(0x7a5)])[_0x36f20d(0x41a)];return _0x36f20d(0x346)+new Date(_0x3117f1[_0x36f20d(0x11f)])['toLocaleDateString']()+']\x20'+_0x5eaa04+_0x36f20d(0x9d6)+_0x3117f1[_0x36f20d(0x297)];})['join']('\x0a');return _0x4b8de9(0xa77)+_0x1e8b5c[_0x4b8de9(0x41a)]+_0x4b8de9(0x6b7)+_0x339da1;}function _0x18956d(_0xdf0bd5){const _0x50b258=_0x3b741d;if(_0x50b258(0x273)!==_0x50b258(0x7e8)){const _0x4ab236=_0x543bea[_0x50b258(0x226)][_0xdf0bd5];if(!_0x4ab236||_0x4ab236[_0x50b258(0xc1f)]===0x0){if(_0x50b258(0x987)==='dwYgw')return'';else{const _0x6f9470=_0x3aabf1[_0x50b258(0x170)](_0x632496,_0x50b258(0x96c)),_0x4f2690=_0x6f9470['objectStore'](_0x55c427),_0x460e6e=_0x4f2690[_0x50b258(0xca3)](_0x4407d7);_0x460e6e[_0x50b258(0x487)]=()=>_0x38bbca(),_0x460e6e['onerror']=()=>_0x4b376d(_0x460e6e['error']);}}const _0x41be64=_0x4ab236[_0x50b258(0xb41)](0x0,0x3),_0x105d92=_0x41be64['map']((_0x273dff,_0x142466)=>{const _0x722299=_0x50b258;if(_0x722299(0x6da)==='sjbyB')return _0x722299(0x9e9)+_0xbf6fd;else{const _0x5ab578=_0x273dff[_0x722299(0x606)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x722299(0x33b),_0x3daf81=(_0x273dff[_0x722299(0x606)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x722299(0x2bf)]('\x0a')[_0x722299(0x257)](_0x16a8fb=>_0x16a8fb[_0x722299(0xad4)]())[_0x722299(0x78c)](_0xd54a61=>_0xd54a61[_0x722299(0xca0)]('-'))['join']('\x20');return'-\x20上次第\x20'+(_0x142466+0x1)+_0x722299(0x7fd)+_0x5ab578+_0x722299(0xbfc)+_0x3daf81;}})[_0x50b258(0x4db)]('\x0a');return _0x50b258(0x663)+_0x105d92;}else _0xbab4a2*=_0xf4ec06/_0x4ed201,_0x3abeb8=_0x9930e2;}function _0x461a42(){const _0x4b852d=_0x3b741d;if(_0x4b852d(0x736)!==_0x4b852d(0x736)){const _0x2a2204=_0x67b767(_0x58d7ac[_0x4b852d(0x719)]);_0x2a2204&&(_0x9ab525=_0x2a2204[_0x4b852d(0x41a)],_0x445818=_0x2a2204['avatar']);}else{const _0x297760=document['getElementById'](_0x4b852d(0x2a4)),_0x348874=_0x543bea['preferences'][_0x4b852d(0xafb)];_0x348874?_0x4b852d(0x197)!==_0x4b852d(0x197)?_0x468809[_0x4b852d(0xb1e)](_0x4b852d(0x499)):(_0x297760[_0x4b852d(0x1e2)][_0x4b852d(0xbd8)]=_0x4b852d(0x535)+_0x348874+')',_0x297760[_0x4b852d(0x1e2)][_0x4b852d(0xa4e)]='cover',_0x297760[_0x4b852d(0x1e2)][_0x4b852d(0x1c0)]='center',_0x297760[_0x4b852d(0x1e2)][_0x4b852d(0x911)]=_0x4b852d(0x774),_0x297760['querySelectorAll'](_0x4b852d(0x5d7))['forEach'](_0x179049=>{const _0x42b6b7=_0x4b852d;_0x179049[_0x42b6b7(0x1e2)][_0x42b6b7(0x49b)]=_0x42b6b7(0x390);})):(_0x297760[_0x4b852d(0x1e2)][_0x4b852d(0xbd8)]='',_0x297760[_0x4b852d(0x1e2)]['color']='',_0x297760[_0x4b852d(0x5c4)]('.widget-info\x20>\x20div')['forEach'](_0x26e30d=>{const _0x480a68=_0x4b852d;if(_0x480a68(0x2e9)!=='AlQoH'){_0x37386d=![],_0x581da1['style'][_0x480a68(0x930)]=_0x480a68(0x2f6),_0x58ba6b[_0x480a68(0x51d)]('galgame-textbox-container')[_0x480a68(0x1e2)][_0x480a68(0x930)]=_0x480a68(0x94a),_0x5e26e6['getElementById'](_0x480a68(0x785))[_0x480a68(0x1e2)][_0x480a68(0x930)]=_0x480a68(0x94a);if(!_0x29586a){const _0x196d2e=_0x1873c5(_0x11353f['activeMeetingCharId']);_0x196d2e&&(_0x196d2e[_0x480a68(0x698)]=_0x1937b1,_0x4276f7(_0x278346[_0x480a68(0x80c)],_0x480a68(0x8a7)));}}else _0x26e30d[_0x480a68(0x1e2)][_0x480a68(0x49b)]='';}));}}const _0x26b219=document[_0x3b741d(0x51d)](_0x3b741d(0x253)),_0x46f878=document[_0x3b741d(0x51d)](_0x3b741d(0x449));_0x26b219[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x3b6485=_0x3b741d;_0x18a7e2(),_0x53ffb2(_0x3b6485(0x16d),'home');}),_0x46f878[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0xfd68c5=_0x3b741d;_0x8a067d(),_0x53ffb2(_0xfd68c5(0x958),_0xfd68c5(0x3fb));}),document[_0x3b741d(0x51d)]('back-to-home-from-meeting-list')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x3253b6=_0x3b741d;_0x53ffb2('home',_0x3253b6(0x958));}),document[_0x3b741d(0x51d)](_0x3b741d(0x5bf))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x9902bc=_0x3b741d;if(_0x22ff14)clearInterval(_0x22ff14);_0x22ff14=null,_0x543bea[_0x9902bc(0x259)]=[],_0x543bea['activeMeetingCharId']=null,document[_0x9902bc(0x51d)](_0x9902bc(0x785))['style'][_0x9902bc(0x930)]=_0x9902bc(0x2f6),_0x543bea[_0x9902bc(0x886)]=null,_0x1a0f1f(),_0x53ffb2(_0x9902bc(0x958),_0x9902bc(0x5d0));});const _0x3af198=document[_0x3b741d(0x51d)](_0x3b741d(0x924)),_0x518015=document[_0x3b741d(0x51d)](_0x3b741d(0x212));_0x518015[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x55d40b=_0x3b741d,_0x248485=_0x3af198[_0x55d40b(0x90f)][_0x55d40b(0xad4)]();_0x248485&&(_0x55d40b(0x38d)!==_0x55d40b(0xae7)?(_0x5680ba(_0x248485),_0x3af198[_0x55d40b(0x90f)]='',setTimeout(_0x183583,0x64)):(_0x5d7398[_0x55d40b(0x9a8)]=![],_0x1678bd[_0x55d40b(0xa19)]['remove'](_0x55d40b(0x6d9))));});function _0x4a7731(_0x3af344,_0xea8d7c){const _0x156ee1=_0x3b741d,_0xd8136c=document[_0x156ee1(0x51d)](_0x156ee1(0x7d5)),_0x211723=_0x543bea['musicPlaylist']['find'](_0x25eedb=>_0x25eedb['id']===_0xea8d7c['id']);if(!_0x211723){console[_0x156ee1(0xb1e)](_0x156ee1(0x9a0),_0xea8d7c['id']);return;}const _0x4142fe=_0xd8136c[_0x156ee1(0x2d9)][_0x156ee1(0x32d)](_0x211723[_0x156ee1(0x72e)])&&!_0xd8136c['paused'];if(_0x4142fe)_0x156ee1(0x31a)!=='CoCDK'?_0xd8136c[_0x156ee1(0x939)]():(_0x14db21['activeListenSession']=null,_0x44f9be(),_0x22c28c(_0x156ee1(0x501)),_0x5144b7(),_0x2da6b4[_0x156ee1(0xa19)][_0x156ee1(0xab0)]('show'),_0x506bcd(()=>_0x474636[_0x156ee1(0x1e2)][_0x156ee1(0x930)]=_0x156ee1(0x2f6),0x12c));else{if(_0x156ee1(0x3f6)===_0x156ee1(0x181)){const _0x4d4e67=_0x5cc65d['parse'](_0x5385ca[_0x156ee1(0x760)]('badgeState')||'{}'),_0x3c506f={..._0x4d4e67,..._0x57428e};_0x4defda[_0x156ee1(0xa1c)]('badgeState',_0xd60643[_0x156ee1(0x427)](_0x3c506f));}else _0x545db0={'title':_0x211723['songName'],'artist':_0x211723['artist'],'cover':_0x211723['coverUrl']||(_0x211723[_0x156ee1(0x28a)]?_0x156ee1(0x3cc)+_0x211723['coverId']:_0x46536a),'isFromLibrary':!![]},_0xd8136c[_0x156ee1(0x2d9)]=_0x211723[_0x156ee1(0x72e)],_0xd8136c['play'](),_0x543bea['currentlyPlayingIndex']=_0x543bea['musicPlaylist']['findIndex'](_0x3341bc=>_0x3341bc['id']===_0xea8d7c['id']),_0x101706();}}const _0x1e3813=document[_0x3b741d(0x51d)]('music-player-bar');async function _0x51ebe8(_0x1ecf59){if(!_0x1ecf59||!_0x1ecf59['startsWith']('http'))return![];return new Promise(_0x4855e5=>{const _0x39a0ea=_0x53d2,_0x2f66d0=document[_0x39a0ea(0x23f)](_0x39a0ea(0xb27));_0x2f66d0['src']=_0x1ecf59;const _0xd700e3=setTimeout(()=>{const _0x588d6c=_0x39a0ea;if(_0x588d6c(0x62e)===_0x588d6c(0x62e))_0x2064d9(),_0x4855e5(![]);else{const _0x4be614=_0x209ca0(_0x5969f0['participantIds'][0x0]);return _0x4be614?.[_0x588d6c(0x41a)]||'AI';}},0xbb8),_0x2064d9=()=>{const _0x488cc9=_0x39a0ea;_0x488cc9(0xc21)===_0x488cc9(0xc21)?(clearTimeout(_0xd700e3),_0x2f66d0[_0x488cc9(0x2ec)](_0x488cc9(0x901),_0x2f07fa),_0x2f66d0[_0x488cc9(0x2ec)](_0x488cc9(0xb1e),_0x48abb2),_0x2f66d0[_0x488cc9(0x2d9)]='',_0x2f66d0['remove']()):_0x1a3d1b[_0x488cc9(0x32a)]=_0x488cc9(0xd3f);},_0x2f07fa=()=>{_0x2064d9(),_0x4855e5(!![]);},_0x48abb2=()=>{const _0x483366=_0x39a0ea;if(_0x483366(0x128)!=='xnyWC'){_0x10bae3(_0x483366(0x488));return;}else _0x2064d9(),_0x4855e5(![]);};_0x2f66d0[_0x39a0ea(0xbc8)]('canplaythrough',_0x2f07fa),_0x2f66d0[_0x39a0ea(0xbc8)]('error',_0x48abb2);});}async function _0x4ffd26(_0x4d4440,_0x63e024){const _0x27f1c9=_0x3b741d,_0x1fef2d=[_0x27f1c9(0xa0c),_0x27f1c9(0x237)];for(const _0x188084 of _0x1fef2d){try{const _0x1ba71c=_0x27f1c9(0xbc3)+_0x188084+_0x27f1c9(0xd4c)+encodeURIComponent(_0x4d4440)+'-'+encodeURIComponent(_0x63e024),_0x12424f=await fetch(_0x1ba71c),_0x1ef241=await _0x12424f[_0x27f1c9(0x2f8)]();if(_0x1ef241[_0x27f1c9(0xad2)]!==0xc8||!_0x1ef241['data']||_0x1ef241[_0x27f1c9(0xade)][_0x27f1c9(0xc1f)]===0x0)continue;const _0x14c2f5=_0x1ef241[_0x27f1c9(0xade)][_0x27f1c9(0xb41)](0x0,0x5);for(const _0x386e7e of _0x14c2f5){if(_0x27f1c9(0x316)===_0x27f1c9(0x479)){let _0x2aa50d=_0x25e5fd[_0x27f1c9(0x12b)]['find'](_0x1caeb9=>_0x1caeb9[_0x27f1c9(0xaec)]===_0x17fce7);!_0x2aa50d&&(_0x2aa50d={'characterId':_0x410539,'entries':[]},_0x34308b[_0x27f1c9(0x12b)][_0x27f1c9(0xb47)](_0x2aa50d));_0x2aa50d[_0x27f1c9(0x594)][_0x27f1c9(0xb47)]({'timestamp':_0x2d6a57['now'](),'author':_0x504db4,'content':_0x666955}),_0xa26552();const _0x110913=_0x2aa50d['entries'][_0x27f1c9(0xc1f)];_0x1ec18f[_0x27f1c9(0x70f)]=_0x1ccb33[_0x27f1c9(0xd21)](_0x110913/0x2)-0x1,_0x465dab();}else{const _0x41b8fe=_0x27f1c9(0xbc3)+_0x188084+'?id='+_0x386e7e['id'],_0x5c3e0a=await fetch(_0x41b8fe),_0xc65134=await _0x5c3e0a[_0x27f1c9(0x2f8)](),_0xbba44d=_0xc65134[_0x27f1c9(0xade)]?.['url'];if(await _0x51ebe8(_0xbba44d))return{'url':_0xbba44d,'cover':_0x386e7e[_0x27f1c9(0x73d)],'source':_0x188084};}}}catch(_0x59f141){console[_0x27f1c9(0xb1e)](_0x27f1c9(0x31c)+_0x188084+':',_0x59f141);}}return{'url':null,'cover':null,'source':null};}function _0x137aaf(){const _0x36f89e=_0x3b741d;if(_0x36f89e(0x493)!==_0x36f89e(0x493))_0x1f0b5e[_0x36f89e(0x446)][_0x36f89e(0x90f)]='';else{const _0x5aa201=document['getElementById'](_0x36f89e(0x26b)),_0x3e73d9=document[_0x36f89e(0x713)],_0xcf7f06=document[_0x36f89e(0x51d)](_0x36f89e(0x322));if(!_0x5aa201||!_0xcf7f06)return;const _0x10b856=localStorage[_0x36f89e(0x760)](_0x36f89e(0x99c))||'1';_0x3e73d9[_0x36f89e(0x1e2)][_0x36f89e(0xcac)](_0x36f89e(0xd10),_0x10b856),_0x5aa201[_0x36f89e(0x90f)]=_0x10b856,_0x5aa201[_0x36f89e(0xbc8)](_0x36f89e(0xa5e),()=>{const _0x48eb9b=_0x36f89e;if('uiYsN'===_0x48eb9b(0x8ee)){_0x1c4f13=![],_0x181439[_0x48eb9b(0x51d)](_0x48eb9b(0x7f2))['style'][_0x48eb9b(0x930)]=_0x48eb9b(0x2f6),_0x8651df[_0x48eb9b(0x51d)]('livestream-textbox-container')[_0x48eb9b(0x1e2)][_0x48eb9b(0x930)]=_0x48eb9b(0x94a),_0x11a681[_0x48eb9b(0x51d)](_0x48eb9b(0xb55))[_0x48eb9b(0x1e2)][_0x48eb9b(0x930)]=_0x48eb9b(0x338);if(!_0x21a569){const _0x5a747f=_0x37d7d8(_0x140871[_0x48eb9b(0x268)]);_0x5a747f&&(_0x5a747f[_0x48eb9b(0x969)]=_0x264692,_0x4d342b(_0x27fddb[_0x48eb9b(0x268)],_0x48eb9b(0x8a7)));}}else{const _0x279363=_0x5aa201[_0x48eb9b(0x90f)];_0x3e73d9[_0x48eb9b(0x1e2)]['setProperty'](_0x48eb9b(0xd10),_0x279363),localStorage[_0x48eb9b(0xa1c)](_0x48eb9b(0x99c),_0x279363);}}),_0xcf7f06['addEventListener']('click',()=>{const _0xb55cf7=_0x36f89e,_0x5ae8e1='1';_0x5aa201['value']=_0x5ae8e1,_0x3e73d9[_0xb55cf7(0x1e2)][_0xb55cf7(0xcac)](_0xb55cf7(0xd10),_0x5ae8e1),localStorage[_0xb55cf7(0xa1c)]('uiScale',_0x5ae8e1);});}}function _0x30f8e1(_0x2a29cd){const _0x14e71a=_0x3b741d;try{const _0x5f4d8d=JSON[_0x14e71a(0x576)](localStorage[_0x14e71a(0x760)](_0x14e71a(0x932))||'{}'),_0x1e13b4={..._0x5f4d8d,..._0x2a29cd};localStorage[_0x14e71a(0xa1c)](_0x14e71a(0x932),JSON[_0x14e71a(0x427)](_0x1e13b4));}catch(_0x137e15){console[_0x14e71a(0xb1e)]('保存徽章状态失败',_0x137e15);}}async function _0x5e72ca(){const _0x49e784=_0x3b741d;if(_0x49e784(0x2d7)==='FxmBI')_0x201d29===_0x49e784(0x3fb)?_0x5ab166[_0x49e784(0x1e2)]['display']=_0x49e784(0xb87):_0x59cc20['style'][_0x49e784(0x930)]=_0x49e784(0x2f6);else{const _0x484f6d=document[_0x49e784(0x51d)]('decorative-badge'),_0x55f2e4=document['getElementById'](_0x49e784(0xaaf));try{let _0x319de9=await _0x54e221('widget_badge');if(!_0x319de9){if('mSPKC'!==_0x49e784(0xa5b)){const _0xf7baa7=_0xedcf90[_0x49e784(0x576)](_0x56927e);_0x49bc4b['isArray'](_0xf7baa7)?_0x95e74=[..._0x3f755b,..._0xf7baa7]:_0x2c7771=_0x44557a;}else{const _0x24074c=JSON[_0x49e784(0x576)](localStorage[_0x49e784(0x760)](_0x49e784(0x932))||'{}');_0x24074c[_0x49e784(0x55b)]&&(_0x319de9=await _0xe092cf(_0x24074c[_0x49e784(0x55b)]),await _0x567110(_0x49e784(0x91f),_0x319de9));}}_0x319de9?(_0x55f2e4[_0x49e784(0x2d9)]=URL[_0x49e784(0xcb2)](_0x319de9),_0x55f2e4[_0x49e784(0x1e2)][_0x49e784(0x930)]=_0x49e784(0x94a),_0x484f6d[_0x49e784(0x1e2)]['border']=_0x49e784(0x2f6)):(_0x55f2e4[_0x49e784(0x1e2)][_0x49e784(0x930)]='none',_0x484f6d['style'][_0x49e784(0x643)]='2px\x20dashed\x20var(--border-color)'),_0x484f6d[_0x49e784(0x1e2)]['display']=_0x49e784(0x94a);}catch(_0x415b16){console[_0x49e784(0xb1e)]('加载徽章图片失败',_0x415b16);}}}async function _0x4fbe3f(){const _0x15f47b=_0x3b741d,_0x221fe5=document[_0x15f47b(0x51d)]('card-widget'),_0x1d6727=document[_0x15f47b(0x51d)](_0x15f47b(0xabd)),_0x2cae7f=document[_0x15f47b(0x51d)](_0x15f47b(0xbe5)),_0x36d574=document['getElementById'](_0x15f47b(0x737));try{if(_0x15f47b(0xa54)!==_0x15f47b(0xa54))_0x102010['error'](_0x15f47b(0x74b),_0x885ebb),_0x51cea2[_0x15f47b(0x90f)]='#\x20发生错误：\x0a'+_0x404904[_0x15f47b(0x979)];else{let _0x235b9a=await _0x54e221(_0x15f47b(0xaad));if(_0x235b9a)_0x1d6727[_0x15f47b(0x2d9)]=URL['createObjectURL'](_0x235b9a),_0x1d6727['style'][_0x15f47b(0x930)]='block',_0x221fe5[_0x15f47b(0x1e2)][_0x15f47b(0x643)]=_0x15f47b(0x2f6),_0x221fe5[_0x15f47b(0x1e2)][_0x15f47b(0xb2e)]=_0x15f47b(0x712);else{if('fKkia'!==_0x15f47b(0xae2)){const _0x67534b=_0x50ece1['querySelectorAll'](_0x15f47b(0x1e3));_0x67534b['forEach'](_0x4bfc63=>_0x4bfc63[_0x15f47b(0xab0)]());}else _0x1d6727[_0x15f47b(0x1e2)]['display']='none',_0x221fe5[_0x15f47b(0x1e2)][_0x15f47b(0x643)]=_0x15f47b(0xb8f),_0x221fe5[_0x15f47b(0x1e2)][_0x15f47b(0xb2e)]=_0x15f47b(0x8d2);}_0x221fe5[_0x15f47b(0x1e2)][_0x15f47b(0x930)]=_0x15f47b(0x94a);let _0x1c4192=await _0x54e221(_0x15f47b(0xa1d));_0x1c4192?(_0x36d574[_0x15f47b(0x2d9)]=URL[_0x15f47b(0xcb2)](_0x1c4192),_0x36d574[_0x15f47b(0x1e2)][_0x15f47b(0x930)]='block',_0x2cae7f[_0x15f47b(0x1e2)][_0x15f47b(0x643)]=_0x15f47b(0x2f6),_0x2cae7f['style']['background']='transparent'):_0x15f47b(0x5cc)==='VKPTF'?_0x4c8bfa['activeUserProfileId']=_0x5bf62f['id']:(_0x36d574[_0x15f47b(0x1e2)]['display']=_0x15f47b(0x2f6),_0x2cae7f[_0x15f47b(0x1e2)]['border']=_0x15f47b(0xb8f),_0x2cae7f['style'][_0x15f47b(0xb2e)]=_0x15f47b(0x8d2)),_0x2cae7f[_0x15f47b(0x1e2)][_0x15f47b(0x930)]=_0x15f47b(0x94a);}}catch(_0x29cfb0){console['error'](_0x15f47b(0x7a7),_0x29cfb0);}}async function _0x4fbe3f(){const _0x48019e=_0x3b741d,_0x56aac5=document['getElementById'](_0x48019e(0x36f)),_0x41a6cd=document[_0x48019e(0x51d)]('card-image');try{let _0x507377=await _0x54e221(_0x48019e(0xaad));if(!_0x507377){if(_0x48019e(0x8d4)!==_0x48019e(0x3a9)){const _0x29fd37=JSON[_0x48019e(0x576)](localStorage[_0x48019e(0x760)](_0x48019e(0x470))||'{}');_0x29fd37[_0x48019e(0x55b)]&&(_0x48019e(0xb30)!==_0x48019e(0xb30)?_0x9c2051=_0x48019e(0x9e4)+_0x48755e:(console['log'](_0x48019e(0x3a3)),_0x507377=await _0xe092cf(_0x29fd37[_0x48019e(0x55b)]),await _0x567110(_0x48019e(0xaad),_0x507377)));}else _0x25c937[_0x48019e(0xad4)]()&&_0x30f9f0[_0x48019e(0x1a2)][_0x48019e(0xb47)]({'sender':'ai','content':_0x5e99a0[_0x48019e(0xad4)]()});}_0x507377?_0x48019e(0x3ff)===_0x48019e(0x3b7)?_0x3c0ba[_0x48019e(0x51d)]('snoop-app-refresh-btn')[_0x48019e(0xbc8)](_0x48019e(0x779),async()=>{_0x2b2465(_0x41ea32,_0x39658a,!![]);}):(_0x41a6cd[_0x48019e(0x2d9)]=URL[_0x48019e(0xcb2)](_0x507377),_0x56aac5['style'][_0x48019e(0x930)]=_0x48019e(0x94a)):'cgosu'!==_0x48019e(0x5e7)?_0x5704bd[_0x48019e(0x1e2)][_0x48019e(0x930)]=_0x48019e(0xb87):_0x56aac5['style'][_0x48019e(0x930)]=_0x48019e(0x2f6);}catch(_0x340590){if(_0x48019e(0xc25)!=='JVZQD'){const _0x3059f7=_0x4c2b1b[_0x48019e(0xa24)]['musicId'],_0x26a6de=_0x5f31f6[_0x48019e(0x820)](_0x48019e(0x41c));if(!_0x26a6de)return;_0x561b7b&&_0x3059f7===_0xb172ac['id']&&_0x271750?_0x26a6de['textContent']='❚❚':_0x26a6de[_0x48019e(0x32a)]='▶';}else console['error'](_0x48019e(0x7a7),_0x340590);}try{if(_0x48019e(0x614)==='dUiRC')_0x5ccf8b={'characterId':_0x3e0bb4['activeDiaryCharacterId'],'entries':[]},_0x2eae12[_0x48019e(0x12b)][_0x48019e(0xb47)](_0x529eb8);else{let _0xaa10d7=await _0x54e221('widget_card_2');const _0xa63eb1=document[_0x48019e(0x51d)](_0x48019e(0x737)),_0x225562=document[_0x48019e(0x51d)](_0x48019e(0xbe5));if(_0xaa10d7)_0xa63eb1[_0x48019e(0x2d9)]=URL[_0x48019e(0xcb2)](_0xaa10d7),_0x225562[_0x48019e(0x1e2)][_0x48019e(0x930)]='block';else{if('trJbz'!=='trJbz'){_0x406e33[_0x48019e(0x259)]=[..._0x169a6a],_0x1d54bc[_0x48019e(0x2bd)][_0x5d6241['id']]=[..._0x1ada5e],_0x126a88();const _0x39ada9=_0x30336b['map'](_0x1a817b=>_0x1a817b['speaker']==='narrator'?_0x1a817b[_0x48019e(0x3c2)]:_0x1a817b[_0x48019e(0x319)]+':\x20'+_0x1a817b[_0x48019e(0x3c2)])[_0x48019e(0x4db)]('\x0a\x0a');_0x505715['conversationHistory'][_0x48019e(0xb47)]({'role':_0x48019e(0xbb1),'senderId':_0x50c0b8['id'],'timestamp':_0x7b6db7['now'](),'isOffline':!![],'content':_0x39ada9});}else _0x225562[_0x48019e(0x1e2)][_0x48019e(0x930)]=_0x48019e(0x2f6);}}}catch(_0x3d7d7e){_0x48019e(0xc64)===_0x48019e(0x151)?_0x553a1b(_0x3aa35c['coverId'])[_0x48019e(0x842)](_0x5e7a32=>{const _0x2019d0=_0x48019e;if(_0x5e7a32)_0x320b42['src']=_0x5389c2[_0x2019d0(0xcb2)](_0x5e7a32);}):console['error'](_0x48019e(0x797),_0x3d7d7e);}}_0x4e2f05[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x3de5f7=_0x3b741d;_0x2b8baf(),_0x53ffb2(_0x3de5f7(0x807),'home');}),document[_0x3b741d(0x51d)]('back-to-home-from-user-list')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0x3fb),'userProfileList')),document['getElementById']('add-user-profile-button')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x206465()),document[_0x3b741d(0x51d)](_0x3b741d(0xd1a))['addEventListener'](_0x3b741d(0x779),()=>{const _0x321398=_0x3b741d;_0x2b8baf(),_0x53ffb2('userProfileList',_0x321398(0x4b9));}),document['getElementById'](_0x3b741d(0x9d0))[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x5308a9),document[_0x3b741d(0x51d)]('delete-user-profile-button')[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x1174c3),document[_0x3b741d(0x51d)](_0x3b741d(0x1ad))['addEventListener']('click',()=>{const _0x546916=_0x3b741d,_0x118f4f=document['getElementById'](_0x546916(0x475))['value'];_0x118f4f&&(_0x546916(0x3e1)==='kOTDM'?(_0x543bea[_0x546916(0x3fc)]=_0x118f4f,_0x1a0f1f(),_0x48e450(_0x546916(0x63b)),_0x2b8baf(),document[_0x546916(0x51d)]('set-active-user-button')[_0x546916(0x1e2)][_0x546916(0x930)]='none'):_0x599642[_0x546916(0x51d)](_0x546916(0x43f)+_0x3dfd04+_0x546916(0x19d))['style'][_0x546916(0xbd8)]=_0x546916(0x744)+_0x5d5434[_0x546916(0xcb2)](_0x275062)+'\x27)');});function _0x2f2ed1(_0x23d2f1){const _0x48cd05=_0x3b741d,_0x170453=_0x543bea[_0x48cd05(0x94b)][_0x48cd05(0xbe8)](_0xc95a8d=>_0xc95a8d['id']===_0x23d2f1),_0x143aa7=_0x170453?.[_0x48cd05(0x16c)];let _0x15d5c9=_0x543bea[_0x48cd05(0x7e7)][_0x48cd05(0xbe8)](_0x3b114f=>_0x3b114f['id']===_0x143aa7);return!_0x15d5c9&&(_0x48cd05(0x214)!==_0x48cd05(0x5ce)?_0x15d5c9=_0x543bea[_0x48cd05(0x7e7)]['find'](_0x5156fc=>_0x5156fc['id']===_0x543bea[_0x48cd05(0x3fc)])||_0x543bea[_0x48cd05(0x7e7)][0x0]:_0x2bebdd[_0x48cd05(0xc52)](_0x48cd05(0xc0d),_0x3ec6f8)),_0x15d5c9||{'name':'用户','avatar':_0x234b40,'persona':''};}function _0xbac87e(_0x27299e){const _0x41feab=_0x3b741d,_0x116e9d=document[_0x41feab(0x51d)](_0x27299e);_0x116e9d[_0x41feab(0x4d5)]='',_0x543bea[_0x41feab(0x7e7)][_0x41feab(0xb36)](_0x574f75=>{const _0x4d253b=_0x41feab,_0x107d07=document[_0x4d253b(0x23f)](_0x4d253b(0xb34));_0x107d07['value']=_0x574f75['id'],_0x107d07[_0x4d253b(0x32a)]=_0x574f75[_0x4d253b(0x41a)],_0x116e9d['appendChild'](_0x107d07);});}function _0x94cae(_0x7506db){const _0x509e78=_0x3b741d,_0x1d4676=_0x509294(_0x7506db),_0x53df76=document[_0x509e78(0x51d)](_0x509e78(0x624));_0x53df76[_0x509e78(0x1e2)][_0x509e78(0xbd8)]='';let _0x507b78=document[_0x509e78(0x51d)](_0x509e78(0x66f)+_0x7506db);if(_0x507b78)_0x507b78['innerHTML']='';if(!_0x1d4676)return;_0x1d4676[_0x509e78(0xcc2)]&&(_0x53df76[_0x509e78(0x1e2)][_0x509e78(0xbd8)]=_0x509e78(0x744)+_0x1d4676[_0x509e78(0xcc2)]+'\x27)',_0x53df76['style']['backgroundSize']='cover',_0x53df76['style'][_0x509e78(0x1c0)]=_0x509e78(0xcc6));if(_0x1d4676[_0x509e78(0x5ee)]){let _0x46bf8d=document[_0x509e78(0x51d)](_0x509e78(0x66f)+_0x1d4676['id']);!_0x46bf8d&&(_0x46bf8d=document[_0x509e78(0x23f)](_0x509e78(0x1e2)),_0x46bf8d['id']=_0x509e78(0x66f)+_0x1d4676['id'],document[_0x509e78(0xa74)][_0x509e78(0x83b)](_0x46bf8d));const _0x3495cc=_0x1d4676[_0x509e78(0x5ee)],_0x4fd1e2=_0x3495cc[_0x509e78(0x6ac)](/\.bubble\.sent/g,_0x509e78(0xa34)+_0x1d4676['id']+_0x509e78(0x413))[_0x509e78(0x6ac)](/\.bubble\.received/g,'.bubble-'+_0x1d4676['id']+_0x509e78(0xce0));_0x46bf8d['innerHTML']=_0x4fd1e2;}}function _0x5d056f(){const _0x873e9d=_0x3b741d,_0x194f18=document[_0x873e9d(0x51d)](_0x873e9d(0x331));_0x194f18[_0x873e9d(0x4d5)]='';const _0x205976=_0x386c4c=>{const _0x1c29c3=_0x873e9d;_0x543bea['pendingPostAttachments'][_0x386c4c]=null;if(_0x386c4c==='image')_0x543bea[_0x1c29c3(0x139)][_0x1c29c3(0x7c2)]=null;_0x5d056f();},_0x5792eb=_0x543bea[_0x873e9d(0x139)]['imageId'],_0x1c9982=_0x543bea[_0x873e9d(0x139)][_0x873e9d(0x64e)];if(_0x5792eb){if(_0x873e9d(0x5b2)!==_0x873e9d(0x296)){const _0x575b74=document[_0x873e9d(0x23f)](_0x873e9d(0xaee));_0x575b74[_0x873e9d(0xa9d)]=_0x873e9d(0x9cd),_0x575b74['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x575b74[_0x873e9d(0x820)](_0x873e9d(0x623))[_0x873e9d(0x50e)]=()=>_0x205976(_0x873e9d(0x55b)),_0x194f18['appendChild'](_0x575b74),_0x54e221(_0x5792eb)[_0x873e9d(0x842)](_0x2efc0c=>{const _0x3275f0=_0x873e9d;if(_0x3275f0(0x4ca)===_0x3275f0(0x4ca)){const _0x191369=document[_0x3275f0(0x51d)](_0x3275f0(0x770));_0x191369&&_0x2efc0c&&(_0x191369[_0x3275f0(0x2d9)]=URL[_0x3275f0(0xcb2)](_0x2efc0c));}else{const _0x9453d6=_0x302155();if(_0x9453d6[_0x3275f0(0x711)]===_0x3275f0(0x91b)){const _0x3d3557=_0x427625[_0x3275f0(0x24d)][_0x3275f0(0xbe8)](_0x568f5=>_0x9453d6['participantIds'][_0x3275f0(0x32d)](_0x568f5['id'])&&_0x568f5[_0x3275f0(0x41a)]===_0x59b04c);if(_0x3d3557)_0x3d2e0f=_0x3d3557['id'];}}});}else{const _0x2eaa9c=_0x3cd845[_0x873e9d(0x820)](_0x873e9d(0x67c));_0x58f5f3(_0x873e9d(0x395)+_0x60f9e1['id'])[_0x873e9d(0x842)](_0x5090fb=>{const _0x5a3d85=_0x873e9d;_0x5090fb&&(_0x2eaa9c['src']=_0x193284[_0x5a3d85(0xcb2)](_0x5090fb));});}}if(_0x1c9982){if(_0x873e9d(0x302)!==_0x873e9d(0x302))_0x21b1d4['error']('JSON\x20解析失败!\x20错误原因:',_0x1302bb),_0xea08df['error'](_0x873e9d(0xb96),_0x2e7016);else{const _0x4ffe42=document[_0x873e9d(0x23f)](_0x873e9d(0xaee));_0x4ffe42['className']=_0x873e9d(0x9cd),_0x4ffe42['innerHTML']=_0x873e9d(0x129)+(_0x1c9982[_0x873e9d(0x372)]||_0x46536a)+_0x873e9d(0x95d)+_0x1c9982['songName']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>'+_0x1c9982[_0x873e9d(0x38b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ffe42[_0x873e9d(0x820)](_0x873e9d(0x623))[_0x873e9d(0x50e)]=()=>_0x205976(_0x873e9d(0x64e)),_0x194f18[_0x873e9d(0x83b)](_0x4ffe42);}}}async function _0x36c659(_0x343a79){const _0x565e5a=_0x3b741d,_0x4850e0=_0x543bea[_0x565e5a(0x882)][_0x565e5a(0xbe8)](_0x325b95=>_0x325b95['id']===_0x543bea['activeFriendCircleId']);if(!_0x4850e0)return;_0x2ee484(!![],_0x565e5a(0x5bc)),_0x543bea[_0x565e5a(0xd1f)]=!![];try{if('YKnaO'===_0x565e5a(0x626)){const _0x583a9c=_0x4850e0['memberCharacterIds']['map'](_0x58d5b8=>_0x509294(_0x58d5b8))['filter'](Boolean),_0x4ae6a0=_0x7dad63(),_0x2f4dbe=_0x583a9c[_0x565e5a(0x257)](_0x1be205=>{const _0x1f0b76=_0x565e5a,{omniText:_0x17de73}=_0x201955(_0x1be205['id'],null),_0x1cc3c5=_0x5f3db6(_0x1be205['id']),_0x264d41=_0x1be205[_0x1f0b76(0xc49)]&&_0x1be205[_0x1f0b76(0xc49)][_0x1f0b76(0xc1f)]>0x0?_0x1f0b76(0x45a)+_0x1be205[_0x1f0b76(0x41a)]+_0x1f0b76(0xa0a)+_0x1be205['linkedWorldBookIds'][_0x1f0b76(0x257)](_0x5c275a=>_0x543bea[_0x1f0b76(0x41e)]['find'](_0x3df468=>_0x3df468['id']===_0x5c275a))[_0x1f0b76(0x78c)](Boolean)[_0x1f0b76(0x257)](_0x2a5aee=>'\x0a##\x20条目:\x20'+_0x2a5aee['name']+'\x0a'+_0x2a5aee[_0x1f0b76(0x297)])[_0x1f0b76(0x4db)](''):'';return _0x1f0b76(0x65b)+_0x1be205[_0x1f0b76(0x41a)]+_0x1f0b76(0x710)+_0x1be205['id']+_0x1f0b76(0xb51)+_0x1be205[_0x1f0b76(0x367)]+_0x1f0b76(0xd37)+_0x17de73+'\x0a'+_0x1cc3c5+'\x0a'+_0x264d41;})[_0x565e5a(0x4db)]('\x0a\x0a'),_0x5bd971=_0x4b62f7(_0x343a79[_0x565e5a(0x719)])||{'name':'用户'},_0xb26b44=_0x5bd971['persona']?_0x565e5a(0x616)+_0x5bd971['name']+_0x565e5a(0x631)+_0x5bd971[_0x565e5a(0x367)]+'\x0a':'';let _0x170ba9=null;if(_0x343a79['image'])_0x170ba9=_0x343a79[_0x565e5a(0x55b)];else{if(_0x343a79[_0x565e5a(0x7c2)]){if(_0x565e5a(0x67a)==='TjhrB'){const _0x35eff9=_0x565e5a(0xd47);_0x120d94=_0x565e5a(0x77c)+_0x39fa1d[_0x565e5a(0x41a)]+_0x565e5a(0x332)+_0x35eff9+']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“'+_0x4c9c09[_0x565e5a(0x41a)]+_0x565e5a(0x5e4)+_0x35eff9+_0x565e5a(0xac4)+_0x35eff9+_0x565e5a(0x93c);}else try{if(_0x565e5a(0x95a)===_0x565e5a(0x2a2))_0x13645d['error'](_0x565e5a(0xc36)+_0x50cb3e['id'],_0x77d702);else{const _0x2364f1=await _0x54e221(_0x343a79[_0x565e5a(0x7c2)]);_0x2364f1&&(_0x170ba9=await _0xa161cf(_0x2364f1));}}catch(_0x2fe264){console[_0x565e5a(0xb1e)]('在准备动态回复时，读取图片失败:',_0x2fe264);}}}let _0x5aae82=_0x5bd971['name']+_0x565e5a(0x9a9)+_0x343a79['content']+'”';_0x170ba9&&(_0x5aae82+=_0x565e5a(0x731));_0x343a79[_0x565e5a(0x711)]==='music'&&(_0x5aae82+=_0x565e5a(0x1a9)+_0x343a79[_0x565e5a(0xd09)]+_0x565e5a(0x391)+_0x343a79[_0x565e5a(0x38b)]+']');const _0x36cae2=_0x565e5a(0x8f1)+_0x2f4dbe+'\x0a\x0a'+_0xb26b44+_0x565e5a(0xa59)+_0x4ae6a0+'\x0a\x0a#\x20用户的动态\x0a'+_0x5aae82+_0x565e5a(0x2c0),_0x1e8db8=[{'role':_0x565e5a(0xacc),'content':_0x36cae2}],_0x547875={'role':_0x565e5a(0x8ed),'content':'请根据以上所有规则（特别是要看图！），生成对用户动态的回应。'};if(_0x170ba9){if(_0x565e5a(0x7f8)!==_0x565e5a(0x7f8))return'';else _0x547875[_0x565e5a(0x55b)]=_0x170ba9;}_0x1e8db8[_0x565e5a(0xb47)](_0x547875);const _0x3bff83=await _0x3a4cad(_0x1e8db8,{'json':!![]}),_0x55cacd=_0x3bff83['match'](/({[\s\S]*})/);if(!_0x55cacd)throw new Error('AI未能返回有效的JSON对象。');const _0x116360=JSON['parse'](_0x55cacd[0x1]),_0x26e777=_0x4850e0['posts'][_0x565e5a(0xbe8)](_0x31ba27=>_0x31ba27['id']===_0x343a79['id']);_0x26e777&&(_0x565e5a(0xc45)!==_0x565e5a(0xc45)?_0x5e103d[_0x565e5a(0xb47)](_0x4fb395['async'](_0x565e5a(0x543))[_0x565e5a(0x842)](_0x5b38cd=>_0x2ffeef[_0x565e5a(0xb27)]=new _0x56c152([_0x5b38cd],_0x2a932a[_0x565e5a(0x41a)]))):(_0x26e777['likes']=_0x116360[_0x565e5a(0x646)]||[],_0x26e777[_0x565e5a(0xc82)]=(_0x116360[_0x565e5a(0xc82)]||[])[_0x565e5a(0x257)]((_0x4d40e6,_0x24d23e)=>({..._0x4d40e6,'commentId':'c_'+_0x343a79[_0x565e5a(0x11f)]+'_'+_0x24d23e})),_0x1a0f1f(),_0x57d7e3()));}else _0xc811e6=_0x22cb10[_0x565e5a(0x297)];}catch(_0x39a180){_0x565e5a(0xb01)===_0x565e5a(0xb01)?(console[_0x565e5a(0xb1e)](_0x565e5a(0x2d0),_0x39a180),_0x48e450(_0x565e5a(0x923))):_0x46525b=_0x5788a4[_0x565e5a(0x576)](_0x316ecf);}finally{_0x2ee484(![]),_0x543bea[_0x565e5a(0xd1f)]=![];}}function _0x53e965(){const _0x34adb8=_0x3b741d;if(_0x34adb8(0x387)!==_0x34adb8(0x79f)){const _0x437d69=_0x543bea[_0x34adb8(0x882)][_0x34adb8(0xbe8)](_0x20f6d1=>_0x20f6d1['id']===_0x543bea[_0x34adb8(0x9d5)]),_0x5d9861=_0x437d69?.['boundUserProfileId'];let _0x575d60=_0x543bea[_0x34adb8(0x7e7)][_0x34adb8(0xbe8)](_0x39bbcb=>_0x39bbcb['id']===_0x5d9861);!_0x575d60&&(_0x34adb8(0xc85)==='jGOsh'?_0x575d60=_0x543bea[_0x34adb8(0x7e7)]['find'](_0x3a3b8d=>_0x3a3b8d['id']===_0x543bea[_0x34adb8(0x3fc)]):(_0x11ff00[_0x34adb8(0x9cb)](),_0x60f898()));!_0x575d60&&(_0x575d60=_0x543bea['userProfiles'][0x0]);if(_0x575d60){if(_0x34adb8(0x607)!==_0x34adb8(0x607)){if(_0x167705[_0x34adb8(0xc1f)]===0x0)return;_0x3fb5f8=(_0x3865bc-0x1+_0x27f621[_0x34adb8(0xc1f)])%_0x468082[_0x34adb8(0xc1f)],_0x2c42fa(_0x26c78e[_0x287b4d],_0x4203aa);}else document[_0x34adb8(0x51d)](_0x34adb8(0x142))[_0x34adb8(0x2d9)]=_0x575d60[_0x34adb8(0x5ec)]||_0x234b40;}}else _0x25c3b8=_0x3d0c41[0x1]['trim']();}function _0x4968f3(_0x34981c){const _0x3310fe=_0x3b741d;if('DWSsm'===_0x3310fe(0xa2d)){let _0x3ae320=0x0,_0x18f857=0x0,_0x38b502=0x0;if(_0x34981c[_0x3310fe(0xc1f)]==0x4){if(_0x3310fe(0x386)!==_0x3310fe(0x386)){const _0x13b380=_0xf2f895[_0x3310fe(0xd1d)][0x0][_0x3310fe(0x148)]-_0x737536,_0x131629=_0xc64d8c[_0x3310fe(0xd1d)][0x0][_0x3310fe(0x496)]-_0x2064c0;_0xe97551[_0x3310fe(0x95c)](_0x13b380)>_0x87ade[_0x3310fe(0x95c)](_0x131629)?_0x22f72f=_0x3310fe(0x64c):_0x2c6a0a=_0x3310fe(0x437);}else _0x3ae320='0x'+_0x34981c[0x1]+_0x34981c[0x1],_0x18f857='0x'+_0x34981c[0x2]+_0x34981c[0x2],_0x38b502='0x'+_0x34981c[0x3]+_0x34981c[0x3];}else _0x34981c['length']==0x7&&(_0x3ae320='0x'+_0x34981c[0x1]+_0x34981c[0x2],_0x18f857='0x'+_0x34981c[0x3]+_0x34981c[0x4],_0x38b502='0x'+_0x34981c[0x5]+_0x34981c[0x6]);_0x3ae320/=0xff,_0x18f857/=0xff,_0x38b502/=0xff;let _0x96fbb1=Math['min'](_0x3ae320,_0x18f857,_0x38b502),_0x3d58af=Math['max'](_0x3ae320,_0x18f857,_0x38b502),_0x4eb31e=_0x3d58af-_0x96fbb1,_0x25b843=0x0,_0x2056d5=0x0,_0x11d263=0x0;if(_0x4eb31e==0x0)_0x25b843=0x0;else{if(_0x3d58af==_0x3ae320)_0x25b843=(_0x18f857-_0x38b502)/_0x4eb31e%0x6;else{if(_0x3d58af==_0x18f857)_0x25b843=(_0x38b502-_0x3ae320)/_0x4eb31e+0x2;else _0x25b843=(_0x3ae320-_0x18f857)/_0x4eb31e+0x4;}}_0x25b843=Math[_0x3310fe(0xcfd)](_0x25b843*0x3c);if(_0x25b843<0x0)_0x25b843+=0x168;return _0x11d263=(_0x3d58af+_0x96fbb1)/0x2,_0x2056d5=_0x4eb31e==0x0?0x0:_0x4eb31e/(0x1-Math[_0x3310fe(0x95c)](0x2*_0x11d263-0x1)),_0x2056d5=+(_0x2056d5*0x64)['toFixed'](0x1),_0x11d263=+(_0x11d263*0x64)['toFixed'](0x1),{'h':_0x25b843,'s':_0x2056d5,'l':_0x11d263};}else _0x149806();}function _0x14bf9e(){const _0x521886=_0x3b741d,_0x302787=(_0x11541b,_0x5d21ef,_0x40a586)=>{const _0x992650=_0x53d2,_0x4ac313=document[_0x992650(0x51d)](_0x11541b);if(!_0x4ac313)return;let _0x5311f9=null;try{_0x5311f9=JSON['parse'](localStorage[_0x992650(0x760)](_0x5d21ef)||'{}');}catch{if(_0x992650(0xaab)!==_0x992650(0xaab)){const _0x243682=_0x17a196['includes'](_0x5bf0fb['id']),_0x2e7a89=_0x381ed8[_0x992650(0x23f)](_0x992650(0x3d5));_0x2e7a89[_0x992650(0xa9d)]=_0x992650(0x5b7),_0x2e7a89[_0x992650(0x4d5)]=_0x992650(0x953)+_0x497d31['id']+_0x992650(0x788)+_0x9ae09['id']+'\x22\x20'+(_0x243682?_0x992650(0xaf0):'')+'>\x20'+_0x59dc57[_0x992650(0x41a)],_0x83cbd9[_0x992650(0x83b)](_0x2e7a89);}else _0x5311f9={};}_0x4ac313[_0x992650(0x1e2)][_0x992650(0x9cf)]=_0x992650(0xc50),_0x4ac313[_0x992650(0x1e2)][_0x992650(0x49d)]='',_0x4ac313[_0x992650(0x1e2)][_0x992650(0xa12)]='',_0x4ac313[_0x992650(0x1e2)][_0x992650(0x687)]='',_0x4ac313[_0x992650(0x1e2)]['bottom']='',_0x4ac313[_0x992650(0x1e2)][_0x992650(0x424)]='';if(typeof _0x5311f9['top']===_0x992650(0x26f)&&typeof _0x5311f9[_0x992650(0xa12)]===_0x992650(0x26f))_0x992650(0x149)===_0x992650(0x149)?(_0x4ac313['style'][_0x992650(0x49d)]=_0x5311f9['top']+'%',_0x4ac313[_0x992650(0x1e2)]['left']=_0x5311f9['left']+'%'):(!_0x50b0c5&&(_0x176960=_0x33f761[_0x992650(0x5ec)]||_0x24944f),_0x44156e=_0xe8bbd6['name']||_0x992650(0x967),_0x53ae75=_0x548c5b[_0x992650(0xabb)]||'私聊');else for(const _0x535ff0 in _0x40a586){_0x4ac313['style'][_0x535ff0]=_0x40a586[_0x535ff0];}};_0x302787(_0x521886(0x56b),_0x521886(0xbc6),{'top':_0x521886(0xc47),'left':'50%','transform':_0x521886(0x7b8)}),_0x302787('app-wallpaper',_0x521886(0xd30),{'top':_0x521886(0xd25),'right':'4%'}),_0x302787(_0x521886(0x822),'appIconPosition_app-user-profiles',{'top':_0x521886(0xd25),'right':_0x521886(0xc3c)}),_0x302787(_0x521886(0x6d0),_0x521886(0xc8b),{'top':'8%','right':'28%'}),_0x302787(_0x521886(0x7a1),'appIconPosition_app-world-book',{'top':'8%','right':'4%'}),_0x302787(_0x521886(0x4d9),'appIconPosition_app-music-library',{'top':_0x521886(0xc62),'left':'5%'}),_0x302787(_0x521886(0x364),_0x521886(0xb44),{'top':_0x521886(0xb1f),'left':_0x521886(0xb72)}),_0x302787(_0x521886(0x444),_0x521886(0x3a4),{'top':_0x521886(0xb1f),'left':'5%'}),_0x302787(_0x521886(0x97d),'appIconPosition_app-accounting',{'top':_0x521886(0xc62),'left':_0x521886(0xb72)}),_0x302787(_0x521886(0xc60),_0x521886(0x932),{'top':_0x521886(0x4eb),'right':'5%'}),_0x302787(_0x521886(0xbe5),_0x521886(0x1f1),{'top':'8%','left':'5%'});const _0x1ffb3c=document['getElementById']('card-widget');_0x1ffb3c&&(_0x521886(0x69e)!==_0x521886(0x1ef)?(_0x1ffb3c[_0x521886(0x1e2)][_0x521886(0x9cf)]=_0x521886(0xc50),_0x1ffb3c[_0x521886(0x1e2)][_0x521886(0x49d)]=_0x521886(0x295),_0x1ffb3c[_0x521886(0x1e2)][_0x521886(0xa12)]=_0x521886(0x69c),_0x1ffb3c[_0x521886(0x1e2)][_0x521886(0x424)]='translateX(-50%)',_0x1ffb3c[_0x521886(0x1e2)][_0x521886(0x930)]=_0x521886(0x94a)):_0xbf6ca5[_0x521886(0x152)]());const _0x52d00e=document[_0x521886(0x51d)](_0x521886(0x20b));_0x52d00e&&(_0x52d00e[_0x521886(0x1e2)][_0x521886(0x9cf)]=_0x521886(0xc50),_0x52d00e['style']['top']=_0x521886(0xa62),_0x52d00e[_0x521886(0x1e2)][_0x521886(0xa12)]='50%',_0x52d00e['style'][_0x521886(0x424)]=_0x521886(0x7b8),_0x52d00e[_0x521886(0x1e2)][_0x521886(0x930)]='inline-block');}function _0x292714(){const _0x2c7b79=_0x3b741d;if('cLdZL'!==_0x2c7b79(0x305)){const _0x280897=document[_0x2c7b79(0x51d)](_0x2c7b79(0xa82));_0x280897[_0x2c7b79(0x4d5)]='';const _0x1f8fa2=document[_0x2c7b79(0x5c4)]('.app-icon');_0x1f8fa2[_0x2c7b79(0xb36)](_0x44d9e5=>{const _0x2f2dd3=_0x2c7b79,_0x537706=_0x44d9e5['id'],_0x3e5bcd=_0x44d9e5['querySelector'](_0x2f2dd3(0xc63))[_0x2f2dd3(0x32a)],_0x524c05=_0x2f2dd3(0x29c)+_0x537706,_0x1201f9=localStorage[_0x2f2dd3(0x760)](_0x524c05),_0x296be5=document['createElement'](_0x2f2dd3(0xaee));_0x296be5[_0x2f2dd3(0xa9d)]='member-selection-item',_0x296be5[_0x2f2dd3(0x1e2)]['padding']='10px\x200',_0x296be5['innerHTML']=_0x2f2dd3(0x14d)+_0x537706+_0x2f2dd3(0x6b9)+(_0x1201f9||_0x2f2dd3(0xa2b))+_0x2f2dd3(0xcf8)+_0x3e5bcd+_0x2f2dd3(0x130)+_0x537706+_0x2f2dd3(0x508)+_0x537706+_0x2f2dd3(0x153)+_0x524c05+_0x2f2dd3(0xb77),_0x280897[_0x2f2dd3(0x83b)](_0x296be5);const _0x52b9d0=document['getElementById']('input_'+_0x537706);_0x52b9d0[_0x2f2dd3(0xbc8)]('change',async _0x5c2e32=>{const _0x2f42e5=_0x2f2dd3,_0x246093=_0x5c2e32['target'][_0x2f42e5(0x730)][0x0];if(!_0x246093)return;try{if(_0x2f42e5(0x473)==='LjnCH')_0x3ea37f[_0x2f42e5(0x9d5)]&&_0x116f70(_0x5e87b2['activeFriendCircleId']);else{const _0x2d68e5=await _0x2cc568(_0x246093);localStorage[_0x2f42e5(0xa1c)](_0x524c05,_0x2d68e5),document[_0x2f42e5(0x51d)](_0x2f42e5(0xc81)+_0x537706)['src']=_0x2d68e5,_0x2c0635();}}catch(_0x18faac){_0x2f42e5(0x641)!==_0x2f42e5(0x641)?_0x4bb031[_0x2f42e5(0x1a0)]({'behavior':'auto','block':_0x2f42e5(0xa18)}):_0x48e450(_0x2f42e5(0x3a7)+_0x18faac[_0x2f42e5(0x979)]);}});});}else{const _0x534494=_0x11f012['createElement']('li');_0x534494[_0x2c7b79(0xa9d)]=_0x2c7b79(0x6ab),_0x534494[_0x2c7b79(0x4d5)]=_0x2c7b79(0xa0f)+_0x4f1fc7['id']+_0x2c7b79(0x618)+_0x69910b['id']+_0x2c7b79(0xd23)+(_0x330760[_0x2c7b79(0x5ec)]||_0x4508ee)+_0x2c7b79(0x193)+_0x9d698f['id']+_0x2c7b79(0xbb7)+_0x663af9['name']+_0x2c7b79(0xaeb),_0x109b8e[_0x2c7b79(0x83b)](_0x534494);}}function _0x2c0635(){const _0x1408c8=_0x3b741d,_0x46086c=document[_0x1408c8(0x5c4)](_0x1408c8(0x53d));_0x46086c['forEach'](_0x4eb3ad=>{const _0x3767ad=_0x1408c8,_0x5b9e5c=_0x4eb3ad['id'],_0x1f1253=_0x3767ad(0x29c)+_0x5b9e5c,_0x52a123=localStorage[_0x3767ad(0x760)](_0x1f1253),_0x39b378=_0x4eb3ad[_0x3767ad(0x820)]('.app-icon-img');if(_0x52a123)_0x39b378['innerHTML']=_0x3767ad(0x23b)+_0x52a123+_0x3767ad(0x561);else{if(_0x3767ad(0xb6d)!==_0x3767ad(0x455)){const _0x5e705d=document[_0x3767ad(0x820)](_0x3767ad(0x17e)+_0x5b9e5c+_0x3767ad(0x23d)+_0x5b9e5c+_0x3767ad(0x3a8))?.[_0x3767ad(0x4d5)];_0x5e705d&&(_0x39b378['innerHTML']=_0x5e705d);}else _0x542324=_0x5e9386[_0x3767ad(0x55b)];}});}function _0xa40cc0(){const _0x423ee9=_0x3b741d,_0x1cdf0f=_0x543bea[_0x423ee9(0x882)][_0x423ee9(0xbe8)](_0x17d3af=>_0x17d3af['id']===_0x543bea[_0x423ee9(0x9d5)]),_0x2ebd2c=_0x577515();let _0x3c50eb=[];if(_0x1cdf0f&&_0x1cdf0f[_0x423ee9(0x840)]){if(_0x423ee9(0x9fb)!==_0x423ee9(0x15b)){const _0x4c69d6=_0x1cdf0f[_0x423ee9(0x840)][_0x423ee9(0x78c)](_0x575a55=>_0x575a55[_0x423ee9(0x711)]===_0x423ee9(0x64e)&&_0x575a55[_0x423ee9(0x72e)])['map'](_0x3b271a=>({..._0x3b271a,'source':_0x423ee9(0x2c9)}));_0x3c50eb[_0x423ee9(0xb47)](..._0x4c69d6);}else _0x5e9804[_0x423ee9(0xb1e)](_0x423ee9(0xc99),_0x2d5934),_0x29c880(_0x423ee9(0x12e));}if(_0x2ebd2c&&_0x543bea['conversationHistory']){const _0x5486f0=_0x543bea['conversationHistory'][_0x423ee9(0x78c)](_0x45f67e=>_0x45f67e[_0x423ee9(0x711)]==='music'&&_0x45f67e[_0x423ee9(0x72e)])[_0x423ee9(0x257)](_0x12269b=>({..._0x12269b,'id':_0x423ee9(0x5a0)+_0x12269b['timestamp'],'source':_0x423ee9(0x69f)}));_0x3c50eb[_0x423ee9(0xb47)](..._0x5486f0);}const _0x450e52=Array[_0x423ee9(0x382)](new Map(_0x3c50eb['map'](_0xc291ea=>[_0xc291ea[_0x423ee9(0x72e)],_0xc291ea]))[_0x423ee9(0x5b0)]());_0x543bea[_0x423ee9(0x61b)]=_0x450e52[_0x423ee9(0xb3d)]((_0x46f7df,_0x33ed0d)=>_0x33ed0d[_0x423ee9(0x11f)]-_0x46f7df[_0x423ee9(0x11f)]);}function _0x1c50c5(_0x212f21){const _0x3c40b2=_0x3b741d;if(_0x212f21<0x0||_0x212f21>=_0x5d9664[_0x3c40b2(0xc1f)])return;_0x240573=_0x212f21;const _0x3e59f5=_0x5d9664[_0x212f21];_0x44ee83[_0x3c40b2(0x2d9)]=_0x3e59f5['playableUrl']||_0x3e59f5[_0x3c40b2(0x411)],_0x44ee83[_0x3c40b2(0x152)](),_0x3ef2d0(),_0x101706();}function _0x3ef2d0(){const _0x4f61d5=_0x3b741d;if('MDzJb'===_0x4f61d5(0x4ef)){const _0x3c8530=_0x543bea[_0x4f61d5(0x61b)][_0x543bea[_0x4f61d5(0x786)]],_0x130ab5=_0x543bea['isPlaying'];_0x2e8831(),_0x254669();const _0x54e5c7=document[_0x4f61d5(0x5c4)]('.music-post-song-card,\x20.music-share-card');_0x54e5c7[_0x4f61d5(0xb36)](_0x2ad6dc=>{const _0x5901c1=_0x4f61d5;if(_0x5901c1(0xbd2)===_0x5901c1(0xbd2)){const _0x1e1796=_0x2ad6dc[_0x5901c1(0xa24)][_0x5901c1(0x7ec)],_0x25f85d=_0x2ad6dc['querySelector'](_0x5901c1(0x41c));if(!_0x25f85d)return;_0x3c8530&&_0x1e1796===_0x3c8530['id']&&_0x130ab5?_0x25f85d[_0x5901c1(0x32a)]='❚❚':_0x25f85d[_0x5901c1(0x32a)]='▶';}else{if(!_0x14a62d)return[];const _0x5ce62b=_0x2de65f['split']('\x0a'),_0x44e3b2=[],_0x4ce6b5=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x55f816 of _0x5ce62b){const _0x4450ff=_0x55f816[_0x5901c1(0x606)](_0x4ce6b5);if(_0x4450ff){const _0xb6d904=_0x5df5aa(_0x4450ff[0x1],0xa),_0x4f6a85=_0x158702(_0x4450ff[0x2],0xa),_0x2ef7cc=_0x35a893(_0x4450ff[0x3],0xa)*(_0x4450ff[0x3][_0x5901c1(0xc1f)]===0x2?0xa:0x1),_0x4b2056=_0xb6d904*0x3c+_0x4f6a85+_0x2ef7cc/0x3e8,_0x1b7849=_0x55f816['replace'](_0x4ce6b5,'')['trim']();_0x1b7849&&_0x44e3b2[_0x5901c1(0xb47)]({'time':_0x4b2056,'text':_0x1b7849});}}return _0x44e3b2;}});}else _0x14cabe[_0x4f61d5(0xb47)](_0x1d142a);}function _0x101706(){const _0x2623c2=_0x3b741d;try{localStorage[_0x2623c2(0xa1c)](_0x2623c2(0x12c),JSON[_0x2623c2(0x427)]({'playlist':_0x543bea[_0x2623c2(0x61b)],'currentIndex':_0x543bea[_0x2623c2(0x786)]}));}catch(_0x1ea4ca){console['error']('保存播放器状态失败，真是没用。',_0x1ea4ca);}}function _0x24b4b8(){const _0x33c918=_0x3b741d;if('iUewo'===_0x33c918(0x8ab)){if(_0x21d312)_0x456efb(_0x3c3a70);}else try{if('LMrur'!==_0x33c918(0x6ef)){_0x3cba4a();return;}else{const _0x157832=localStorage[_0x33c918(0x760)]('musicPlayerState');if(_0x157832){const {playlist:_0x32a188,currentIndex:_0x43a21a}=JSON[_0x33c918(0x576)](_0x157832);Array[_0x33c918(0x8e1)](_0x32a188)&&_0x32a188[_0x33c918(0xc1f)]>0x0&&_0x43a21a>-0x1&&(_0x33c918(0xa08)===_0x33c918(0xa08)?(_0x543bea[_0x33c918(0x61b)]=_0x32a188,_0x543bea['currentlyPlayingIndex']=_0x43a21a,_0x543bea['isPlaying']=![],_0x3ef2d0()):_0x1f8f7f[_0x33c918(0x55b)]=_0x5d301f);}}}catch(_0x38d55f){_0x33c918(0x9b3)==='bqVIz'?console[_0x33c918(0xb1e)]('切，加载播放器状态的时候出错了。',_0x38d55f):_0x39cee7(_0x33c918(0x435));}}function _0x3c2b7b(_0x360881){const _0x508234=_0x3b741d;if(_0x508234(0xb91)!==_0x508234(0xce7)){if(window[_0x508234(0xb66)])clearTimeout(window[_0x508234(0xb66)]);const _0x2de409=_0x360881[_0x508234(0x446)][_0x508234(0x156)](_0x508234(0x124));if(!_0x2de409)return;const _0x5a37a3=_0x2de409[_0x508234(0xa24)]['timestamp'],_0x29ca81=_0x2de409['classList'][_0x508234(0x9ff)](_0x508234(0x8ed))?_0x508234(0x8ed):'ai';if(!_0x5a37a3)return;const _0x409e29=()=>{const _0x28f1c6=_0x508234;window[_0x28f1c6(0xb66)]=setTimeout(()=>{const _0x164fa9=_0x28f1c6;if(_0x164fa9(0x97e)!==_0x164fa9(0x858)){if(_0x360881['type']==='touchstart')_0x360881['preventDefault']();_0x4aae41(parseInt(_0x5a37a3,0xa),_0x29ca81);}else _0x165057[_0x164fa9(0x51d)](_0x164fa9(0x43f)+_0x552d57+_0x164fa9(0x19d))[_0x164fa9(0x1e2)][_0x164fa9(0xbd8)]='';},0x320);},_0x53548e=()=>{const _0x189827=_0x508234;if(window[_0x189827(0xb66)])clearTimeout(window[_0x189827(0xb66)]);};document[_0x508234(0xbc8)](_0x508234(0xb0e),_0x53548e,{'once':!![]}),document[_0x508234(0xbc8)](_0x508234(0xbc7),_0x53548e,{'once':!![]}),document[_0x508234(0xbc8)](_0x508234(0x6bb),_0x53548e,{'once':!![]}),_0x409e29();}else _0x1d4735[_0x508234(0x405)]=![];}function _0x4aae41(_0x160703,_0x25d0e4){const _0x35487f=_0x3b741d;if(_0x35487f(0x3de)===_0x35487f(0x288)){const _0x1f1477=new _0x5494ae(),_0xf59095=_0x210cfd[_0x35487f(0x51d)](_0x35487f(0xa4c)),_0x253df1=_0x2424d3[_0x35487f(0x51d)](_0x35487f(0x459)),_0x2c929e=_0x5e6f9b[_0x35487f(0x51d)]('snoop-phone-header');_0xf59095&&_0x253df1&&(_0xf59095[_0x35487f(0x32a)]=_0x1f1477['toLocaleTimeString']('zh-CN',{'hour':_0x35487f(0x145),'minute':_0x35487f(0x145),'hour12':![]}),_0x253df1[_0x35487f(0x32a)]=_0x1f1477['toLocaleDateString']('zh-CN',{'month':'long','day':'numeric','weekday':_0x35487f(0x765)})),_0x2c929e&&(_0x2c929e[_0x35487f(0x4d5)]=_0x35487f(0xaf5)+_0x1f1477[_0x35487f(0x864)](_0x35487f(0xbd4),{'hour':_0x35487f(0x145),'minute':_0x35487f(0x145),'hour12':![]})+_0x35487f(0x568));}else{const _0x44aaff=_0x35487f(0x2d8)+_0x160703;let _0x420a2b=document[_0x35487f(0x51d)](_0x44aaff);if(_0x420a2b)return;const _0x1ef4af=_0x35487f(0x955)+_0x44aaff+_0x35487f(0x2f9)+(_0x25d0e4==='ai'?_0x35487f(0x4ce):'')+_0x35487f(0x9b7);document[_0x35487f(0x936)]['insertAdjacentHTML'](_0x35487f(0x2a7),_0x1ef4af);const _0x404604=document[_0x35487f(0x51d)](_0x44aaff),_0xe3a4d2=()=>_0x404604['remove']();_0x404604[_0x35487f(0x820)](_0x35487f(0x9fd))[_0x35487f(0x50e)]=_0xe3a4d2,_0x404604[_0x35487f(0x820)](_0x35487f(0x2f1))[_0x35487f(0x50e)]=_0xe3a4d2,_0x404604['querySelector'](_0x35487f(0x812))[_0x35487f(0x50e)]=()=>{_0x121a9e(_0x160703),_0xe3a4d2();},_0x25d0e4==='ai'&&(_0x404604['querySelector'](_0x35487f(0xb83))[_0x35487f(0x50e)]=()=>{_0x33c854(_0x160703),_0xe3a4d2();});}}async function _0x121a9e(_0x110a86){const _0x209d6f=_0x3b741d,_0x51c92e=await _0x44efa2(_0x209d6f(0x9f4));if(!_0x51c92e)return;const _0x2ef08c=_0x543bea[_0x209d6f(0x12b)][_0x209d6f(0xbe8)](_0x280b1c=>_0x280b1c[_0x209d6f(0xaec)]===_0x543bea[_0x209d6f(0xbaa)]);if(!_0x2ef08c)return;const _0x265194=_0x2ef08c[_0x209d6f(0x594)][_0x209d6f(0xc58)](_0x1511ec=>_0x1511ec['timestamp']===_0x110a86);_0x265194>-0x1&&(_0x2ef08c[_0x209d6f(0x594)][_0x209d6f(0x278)](_0x265194,0x1),_0x1a0f1f(),_0x4119f7(),_0x48e450('日记已删除。'));}async function _0x33c854(_0x409e4b){const _0x553c23=_0x3b741d,_0x1c3941=_0x543bea['diaries'][_0x553c23(0xbe8)](_0x27316b=>_0x27316b[_0x553c23(0xaec)]===_0x543bea[_0x553c23(0xbaa)]);if(!_0x1c3941)return;const _0xfff471=_0x1c3941[_0x553c23(0x594)][_0x553c23(0xc58)](_0x18628b=>_0x18628b[_0x553c23(0x11f)]===_0x409e4b);_0xfff471>-0x1&&(_0x1c3941[_0x553c23(0x594)]['splice'](_0xfff471,0x1),_0x1a0f1f(),_0x4119f7(),await _0x2a1d58());}function _0x23e3b8(){const _0x824afb=_0x3b741d,_0x35a5cd=document[_0x824afb(0x51d)](_0x824afb(0x68a));_0x35a5cd[_0x824afb(0x4d5)]='';const _0x333714=_0x543bea[_0x824afb(0x24d)]['filter'](_0x18f3a2=>_0x543bea['chats'][_0x824afb(0x66a)](_0x484c9d=>_0x484c9d['type']===_0x824afb(0x5fc)&&_0x484c9d[_0x824afb(0x184)]['includes'](_0x18f3a2['id'])));if(_0x333714['length']===0x0){_0x35a5cd[_0x824afb(0x4d5)]=_0x824afb(0x48d);return;}_0x333714[_0x824afb(0xb36)](_0x377090=>{const _0x5d04a5=_0x824afb,_0x4ea43c=document[_0x5d04a5(0x23f)]('li');_0x4ea43c[_0x5d04a5(0xa9d)]=_0x5d04a5(0x9eb),_0x4ea43c['dataset']['charId']=_0x377090['id'],_0x4ea43c[_0x5d04a5(0x4d5)]=_0x5d04a5(0x4e8)+(_0x377090[_0x5d04a5(0x5ec)]||_0x46536a)+_0x5d04a5(0x557)+_0x377090['name']+_0x5d04a5(0xc5a),_0x4ea43c[_0x5d04a5(0xbc8)](_0x5d04a5(0x779),()=>{_0x31bb51(_0x377090['id']);}),_0x4ea43c[_0x5d04a5(0x820)]('.char-info-wrapper')[_0x5d04a5(0xbc8)](_0x5d04a5(0x779),()=>{const _0xe7b372=_0x5d04a5;if(_0xe7b372(0x528)!==_0xe7b372(0x528)){_0x294473(_0xe7b372(0xc00));return;}else _0x31bb51(_0x377090['id']);}),_0x4ea43c['querySelector'](_0x5d04a5(0xc75))[_0x5d04a5(0xbc8)](_0x5d04a5(0x779),_0x300f60=>{_0x300f60['stopPropagation'](),_0x9a81bb(_0x377090['id']);}),_0x35a5cd[_0x5d04a5(0x83b)](_0x4ea43c);});}function _0x31bb51(_0x5e8251){const _0x18d56c=_0x3b741d,_0x427d95=_0x509294(_0x5e8251);if(!_0x427d95)return;_0x543bea['activeDiaryCharacterId']=_0x5e8251;const _0x224cb8=_0x543bea['diaries'][_0x18d56c(0xbe8)](_0x2a06a3=>_0x2a06a3[_0x18d56c(0xaec)]===_0x5e8251),_0x3100f0=_0x224cb8?_0x224cb8['entries'][_0x18d56c(0xc1f)]:0x0,_0x10a2ed=0x2;_0x543bea[_0x18d56c(0x70f)]=Math[_0x18d56c(0x5de)](0x0,Math[_0x18d56c(0xd21)](_0x3100f0/_0x10a2ed)-0x1),document['getElementById'](_0x18d56c(0xa15))[_0x18d56c(0x32a)]=_0x427d95[_0x18d56c(0x41a)]+_0x18d56c(0xc22),_0x4119f7(),_0x53ffb2('diaryView','diaryList');}function _0x4119f7(){const _0x5209a3=_0x3b741d,_0x2413fc=document['getElementById'](_0x5209a3(0x69d)),_0x17440e=document[_0x5209a3(0x51d)](_0x5209a3(0x2e0));_0x2413fc[_0x5209a3(0x4d5)]='',_0x17440e[_0x5209a3(0x4d5)]='';const _0x330f5b=_0x14b9b9()||{'name':'我'},_0x5195ae=_0x543bea['diaries']['find'](_0x568f37=>_0x568f37[_0x5209a3(0xaec)]===_0x543bea['activeDiaryCharacterId']);if(!_0x5195ae||!_0x5195ae[_0x5209a3(0x594)]||_0x5195ae[_0x5209a3(0x594)]['length']===0x0){_0x2413fc[_0x5209a3(0x4d5)]=_0x5209a3(0x49e),_0x17440e['innerHTML']=_0x5209a3(0x377),document[_0x5209a3(0x51d)]('diary-write-button')['addEventListener'](_0x5209a3(0x779),_0x53aa68),document['getElementById'](_0x5209a3(0x9f0))['addEventListener']('click',_0x2a1d58);return;}const _0x47bcf8=0x2,_0x5a2f40=[..._0x5195ae['entries']][_0x5209a3(0xb3d)]((_0x29d3ae,_0x1bc7b6)=>_0x29d3ae[_0x5209a3(0x11f)]-_0x1bc7b6[_0x5209a3(0x11f)]),_0x1cf936=[];for(let _0x1253eb=0x0;_0x1253eb<_0x5a2f40[_0x5209a3(0xc1f)];_0x1253eb+=_0x47bcf8){_0x1cf936['push'](_0x5a2f40[_0x5209a3(0xb41)](_0x1253eb,_0x1253eb+_0x47bcf8));}const _0x424beb=_0x1cf936[_0x5209a3(0xc1f)];_0x1cf936[_0x5209a3(0xb36)]((_0x5bba49,_0x107b46)=>{const _0xda31f2=_0x5209a3;if('PSDLe'!==_0xda31f2(0x248))_0x30a85e[_0xda31f2(0xbc8)]('click',()=>{_0x139459('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a');});else{const _0x3a0f59=document['createElement']('div');_0x3a0f59[_0xda31f2(0xa9d)]=_0xda31f2(0x70c),_0x3a0f59['id']=_0xda31f2(0x157)+_0x107b46,_0x107b46===_0x543bea['diaryCurrentPage']&&(_0xda31f2(0x82e)!==_0xda31f2(0x82e)?(_0x50dc5d+=_0xda31f2(0x5a6),_0x4291e7['log']['forEach'](_0x279e32=>{const _0x108c45=_0xda31f2,_0x3c704e=_0x279e32['sender']===_0x108c45(0xaa3)?'你':_0x286a81[_0x108c45(0x6d3)];_0x238bf4+='\x20\x20\x20\x20-\x20'+_0x3c704e+':\x20'+_0x279e32[_0x108c45(0x297)]+'\x20\x0a';})):_0x3a0f59[_0xda31f2(0xa19)]['add'](_0xda31f2(0x167))),_0x5bba49[_0xda31f2(0xb36)](_0x24f262=>{const _0x273b60=_0xda31f2,_0x73db42=_0x24f262[_0x273b60(0x7a5)]===_0x273b60(0x8ed)?_0x273b60(0x8ed):'ai',_0xf1940c=_0x24f262[_0x273b60(0x7a5)]==='user'?_0x330f5b['name']:_0x509294(_0x24f262[_0x273b60(0x7a5)])[_0x273b60(0x41a)],_0xab5c2a=document['createElement'](_0x273b60(0xaee));_0xab5c2a[_0x273b60(0xa9d)]='diary-entry\x20'+_0x73db42,_0xab5c2a[_0x273b60(0xa24)]['timestamp']=_0x24f262['timestamp'],_0xab5c2a[_0x273b60(0x1e2)]['borderBottom']=_0x273b60(0x2f6),_0xab5c2a['style'][_0x273b60(0x303)]='0',_0xab5c2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>'+_0xf1940c+_0x273b60(0xb7e)+new Date(_0x24f262[_0x273b60(0x11f)])[_0x273b60(0x5f4)](_0x273b60(0xbd4))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>'+_0x24f262[_0x273b60(0x297)][_0x273b60(0x6ac)](/\n/g,'<br>')+_0x273b60(0x6e0),_0x3a0f59[_0x273b60(0x83b)](_0xab5c2a);}),_0x2413fc[_0xda31f2(0x83b)](_0x3a0f59);}}),_0x17440e['innerHTML']=_0x5209a3(0xc38)+(_0x543bea[_0x5209a3(0x70f)]+0x1)+_0x5209a3(0xac5)+_0x424beb+'\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x5209a3(0x51d)](_0x5209a3(0xd45))[_0x5209a3(0xaa9)]=_0x543bea['diaryCurrentPage']===0x0,document['getElementById'](_0x5209a3(0x7b5))[_0x5209a3(0xaa9)]=_0x543bea[_0x5209a3(0x70f)]===_0x424beb-0x1,document['getElementById'](_0x5209a3(0xd45))[_0x5209a3(0xbc8)]('click',_0x200f4e),document['getElementById'](_0x5209a3(0x7b5))[_0x5209a3(0xbc8)](_0x5209a3(0x779),_0x5901c3),document[_0x5209a3(0x51d)]('diary-write-button')['addEventListener'](_0x5209a3(0x779),_0x53aa68),document[_0x5209a3(0x51d)](_0x5209a3(0x9f0))[_0x5209a3(0xbc8)](_0x5209a3(0x779),_0x2a1d58);}function _0x5901c3(){const _0x6b6f2=_0x3b741d;if(_0x6b6f2(0x3eb)!=='ILYoC'){if(_0x543bea[_0x6b6f2(0x405)])return;const _0x34756b=_0x543bea[_0x6b6f2(0x70f)],_0x5e0e00=Math[_0x6b6f2(0xd21)](_0x543bea[_0x6b6f2(0x12b)][_0x6b6f2(0xbe8)](_0x1b03fd=>_0x1b03fd[_0x6b6f2(0xaec)]===_0x543bea['activeDiaryCharacterId'])[_0x6b6f2(0x594)][_0x6b6f2(0xc1f)]/0x2);if(_0x34756b>=_0x5e0e00-0x1)return;_0x543bea[_0x6b6f2(0x405)]=!![];const _0x5f03c5=_0x34756b+0x1,_0x342086=document['getElementById']('diary-page-'+_0x34756b),_0x35c735=document['getElementById'](_0x6b6f2(0x157)+_0x5f03c5);_0x342086&&_0x35c735?'Gksoa'!==_0x6b6f2(0x7b7)?(_0xea0256['type']=_0x6b6f2(0x64e),_0x17adc2['assign'](_0x5a5f27,_0x16f8ff)):(_0x35c735[_0x6b6f2(0xa19)]['add'](_0x6b6f2(0x715)),_0x342086[_0x6b6f2(0xa19)][_0x6b6f2(0x25d)](_0x6b6f2(0xb85)),_0x35c735[_0x6b6f2(0xa19)]['add'](_0x6b6f2(0x167)),setTimeout(()=>{const _0x41fde9=_0x6b6f2;_0x342086[_0x41fde9(0xa19)][_0x41fde9(0xab0)](_0x41fde9(0x167),_0x41fde9(0xb85)),_0x35c735[_0x41fde9(0xa19)][_0x41fde9(0xab0)](_0x41fde9(0x715)),_0x543bea[_0x41fde9(0x70f)]=_0x5f03c5,_0x4119f7(),_0x543bea[_0x41fde9(0x405)]=![];},0x2bc)):_0x543bea['isAnimatingDiary']=![];}else _0x1e9fb0[_0x6b6f2(0x226)][_0xb72574]&&_0x304976['livestreamReplays'][_0x427ea3][_0x48ec09]&&(_0x28653d[_0x6b6f2(0x226)][_0x559731][_0x6b6f2(0x278)](_0x2126df,0x1),_0x4c53f0(),_0x53dfed(_0x75f89b),_0x1f20ba(_0x6b6f2(0x8d0)));}function _0x200f4e(){const _0xcbebbb=_0x3b741d;if(_0x543bea[_0xcbebbb(0x405)])return;const _0x118d56=_0x543bea[_0xcbebbb(0x70f)];if(_0x118d56<=0x0)return;_0x543bea['isAnimatingDiary']=!![];const _0x141a5b=_0x118d56-0x1,_0x59f9ec=document[_0xcbebbb(0x51d)]('diary-page-'+_0x118d56),_0x1c9af0=document['getElementById'](_0xcbebbb(0x157)+_0x141a5b);if(_0x59f9ec&&_0x1c9af0)_0x1c9af0[_0xcbebbb(0xa19)]['add'](_0xcbebbb(0xaea)),_0x59f9ec[_0xcbebbb(0xa19)]['add'](_0xcbebbb(0x984)),_0x1c9af0[_0xcbebbb(0xa19)][_0xcbebbb(0x25d)]('is-visible'),setTimeout(()=>{const _0x164a76=_0xcbebbb;_0x59f9ec[_0x164a76(0xa19)][_0x164a76(0xab0)](_0x164a76(0x167),'is-exiting-right'),_0x1c9af0['classList']['remove'](_0x164a76(0xaea)),_0x543bea[_0x164a76(0x70f)]=_0x141a5b,_0x4119f7(),_0x543bea['isAnimatingDiary']=![];},0x2bc);else{if(_0xcbebbb(0x3b5)===_0xcbebbb(0x425)){if(!_0x34d191||!_0xde66ec[_0xcbebbb(0x886)])return;const _0x4d7c80={'role':'user','content':_0xcbebbb(0x801)+_0x4a3966[_0xcbebbb(0x41a)]+']','displayUrl':_0x3e616e['url'],'timestamp':_0x833f2a[_0xcbebbb(0x63d)]()};_0x5b3d3f['conversationHistory'][_0xcbebbb(0xb47)](_0x4d7c80),_0x2726bf(_0x4d7c80,_0x1834fc[_0xcbebbb(0xc54)][_0xcbebbb(0xc1f)]-0x1),_0x47be7d(),_0x345d94[_0xcbebbb(0xa19)][_0xcbebbb(0xab0)](_0xcbebbb(0x6db));}else _0x543bea['isAnimatingDiary']=![];}}function _0x53aa68(){return new Promise(_0x163c0f=>{const _0x339cfb=_0x53d2,_0x225576=_0x339cfb(0x9b2);document[_0x339cfb(0x936)]['insertAdjacentHTML'](_0x339cfb(0x2a7),_0x225576);const _0x40f9ee=document['getElementById']('diary-write-modal'),_0x35fdd0=document['getElementById']('diary-modal-textarea'),_0x247e9b=document[_0x339cfb(0x51d)](_0x339cfb(0x127)),_0x4b52b0=document['getElementById'](_0x339cfb(0x662)),_0x2e0875=_0x40f9ee[_0x339cfb(0x820)](_0x339cfb(0x9fd)),_0x5573c7=()=>{const _0x3d34f9=_0x339cfb;_0x40f9ee[_0x3d34f9(0xab0)](),_0x163c0f();};_0x247e9b[_0x339cfb(0x50e)]=()=>{const _0x57c637=_0x339cfb;_0x4c4f8c(_0x35fdd0[_0x57c637(0x90f)]),_0x5573c7();},_0x4b52b0['onclick']=_0x5573c7,_0x2e0875[_0x339cfb(0x50e)]=_0x5573c7;});}function _0x4c4f8c(_0xcdb1e3){const _0x448582=_0x3b741d;if(_0x448582(0x376)!==_0x448582(0x376)){const _0x4bb70b=_0x54bd71(_0x19c4dd[_0x448582(0x90f)]);if(_0x4a7992(_0x4bb70b)||_0x4bb70b<=0x0){_0x480d40(_0x448582(0xb75));return;}const _0x2a36f5=_0x2a8fe6();let _0x4e33b2=null;_0x2a36f5[_0x448582(0x711)]===_0x448582(0x91b)?_0x4e33b2=_0x5cc811[_0x448582(0x90f)]:_0x4e33b2=_0x2a36f5[_0x448582(0x184)][0x0];const _0x12b991=_0x3e89ce(_0x2a36f5['id']),_0x25f3ba={'role':'user','type':_0x448582(0x68e),'content':'[用户向\x20'+(_0x20915a(_0x4e33b2)?.[_0x448582(0x41a)]||'未知')+_0x448582(0x933)+_0x4bb70b+']','amount':_0x4bb70b,'recipientId':_0x4e33b2,'senderId':_0x12b991['id'],'timestamp':_0x3d8511[_0x448582(0x63d)]()};_0x322952[_0x448582(0xc54)][_0x448582(0xb47)](_0x25f3ba),_0x3589c7(),_0x3fe828(),_0x3fb389[_0x448582(0xa19)][_0x448582(0xab0)](_0x448582(0x6db));}else{const _0x100d4f=_0xcdb1e3[_0x448582(0xad4)]();if(!_0x100d4f||!_0x543bea[_0x448582(0xbaa)])return;let _0x11503b=_0x543bea[_0x448582(0x12b)]['find'](_0x2687fa=>_0x2687fa[_0x448582(0xaec)]===_0x543bea[_0x448582(0xbaa)]);!_0x11503b&&(_0x11503b={'characterId':_0x543bea[_0x448582(0xbaa)],'entries':[]},_0x543bea[_0x448582(0x12b)][_0x448582(0xb47)](_0x11503b));_0x11503b[_0x448582(0x594)][_0x448582(0xb47)]({'timestamp':Date[_0x448582(0x63d)](),'author':_0x448582(0x8ed),'content':_0x100d4f}),_0x1a0f1f();const _0x4ab6ba=_0x11503b[_0x448582(0x594)][_0x448582(0xc1f)];_0x543bea[_0x448582(0x70f)]=Math['ceil'](_0x4ab6ba/0x2)-0x1,_0x4119f7();}}async function _0x2a1d58(){const _0x4a8e63=_0x3b741d,_0x3966b4=_0x543bea[_0x4a8e63(0x12b)]['find'](_0x54e076=>_0x54e076[_0x4a8e63(0xaec)]===_0x543bea[_0x4a8e63(0xbaa)]),_0x27c674=_0x543bea[_0x4a8e63(0xbaa)],_0x5f0b5b=_0x509294(_0x27c674);if(!_0x5f0b5b||_0x543bea[_0x4a8e63(0xd1f)])return;_0x2ee484(!![],_0x4a8e63(0x59c)),await new Promise(_0x33c727=>setTimeout(_0x33c727,0x32)),_0x543bea[_0x4a8e63(0xd1f)]=!![];let _0x27fddd=[];try{const _0x20527d=_0x14b9b9()||{'name':'你'},_0x231f51=_0x5f3db6(_0x27c674),{omniText:_0x3df3a4}=_0x201955(_0x27c674,_0x543bea[_0x4a8e63(0x886)]);let _0xb01315='';if(_0x5f0b5b[_0x4a8e63(0xc49)]&&_0x5f0b5b['linkedWorldBookIds'][_0x4a8e63(0xc1f)]>0x0){const _0x52c29b=_0x5f0b5b[_0x4a8e63(0xc49)]['map'](_0x5ec9b0=>_0x543bea[_0x4a8e63(0x41e)][_0x4a8e63(0xbe8)](_0x21aa6d=>_0x21aa6d['id']===_0x5ec9b0))['filter'](Boolean)[_0x4a8e63(0x257)](_0x3ba03a=>_0x4a8e63(0x31e)+_0x3ba03a['name']+'\x0a'+_0x3ba03a[_0x4a8e63(0x297)])[_0x4a8e63(0x4db)]('');if(_0x52c29b)_0xb01315=_0x4a8e63(0x511)+_0x52c29b;}const _0x13e4f8=_0x20527d[_0x4a8e63(0x367)]?_0x4a8e63(0x18d)+_0x20527d[_0x4a8e63(0x41a)]+_0x4a8e63(0x6a7)+_0x20527d[_0x4a8e63(0x367)]:'',_0x3e6823=_0x7dad63(),_0x2eec01=_0x18956d(_0x27c674);let _0x2c268b=_0x4a8e63(0x216);if(_0x3966b4&&_0x3966b4[_0x4a8e63(0x594)]){const _0x6d7b5a=_0x3966b4['entries']['filter'](_0x57d772=>_0x57d772[_0x4a8e63(0x7a5)]===_0x4a8e63(0x8ed))[_0x4a8e63(0x4fc)]();_0x6d7b5a&&(_0x2c268b=_0x6d7b5a['content']);}const _0x1496f0='#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“'+_0x5f0b5b[_0x4a8e63(0x41a)]+'”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a'+_0x20527d[_0x4a8e63(0x41a)]+'。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（'+_0x20527d[_0x4a8e63(0x41a)]+_0x4a8e63(0xa2a)+_0x2c268b+'”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a'+_0x5f0b5b[_0x4a8e63(0x367)]+'\x0a'+_0x13e4f8+'\x0a'+_0xb01315+'\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20'+new Date()[_0x4a8e63(0x5f4)](_0x4a8e63(0xbd4),{'dateStyle':_0x4a8e63(0xd0f),'timeStyle':'short'})+'\x0a-\x20**日记本的上一笔记录是在**:\x20'+_0x1eac91(new Date(_0x3966b4?.['entries']?.['at'](-0x1)?.[_0x4a8e63(0x11f)]||Date[_0x4a8e63(0x63d)]()))+'\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a'+(_0x3df3a4||'最近没有互动记录。')+'\x0a'+_0x2eec01+_0x4a8e63(0x515)+(_0x3e6823||_0x4a8e63(0x6bc))+_0x4a8e63(0x615);_0x27fddd=[{'role':_0x4a8e63(0xacc),'content':_0x1496f0},{'role':_0x4a8e63(0x8ed),'content':_0x4a8e63(0xb7c)}];const _0x39915b=await _0x3a4cad(_0x27fddd);if(_0x39915b){let _0x9c9d38=_0x543bea[_0x4a8e63(0x12b)][_0x4a8e63(0xbe8)](_0x6235b5=>_0x6235b5[_0x4a8e63(0xaec)]===_0x27c674);!_0x9c9d38&&(_0x9c9d38={'characterId':_0x27c674,'entries':[]},_0x543bea[_0x4a8e63(0x12b)]['push'](_0x9c9d38));_0x9c9d38['entries']['push']({'timestamp':Date[_0x4a8e63(0x63d)](),'author':_0x27c674,'content':_0x39915b}),_0x1a0f1f();const _0x234d3c=_0x9c9d38[_0x4a8e63(0x594)][_0x4a8e63(0xc1f)];_0x543bea[_0x4a8e63(0x70f)]=Math[_0x4a8e63(0xd21)](_0x234d3c/0x2)-0x1,_0x4119f7();}}catch(_0x46474e){_0x48e450(_0x4a8e63(0x793)+_0x46474e[_0x4a8e63(0x979)]);}finally{_0x2ee484(![]),_0x543bea[_0x4a8e63(0xd1f)]=![];}}function _0x1093c7(){const _0x50f00b=_0x3b741d;if(_0x50f00b(0x15f)!=='mjmsU'){_0x20ead2[_0x50f00b(0x139)][_0x2ea15e]=null;if(_0x4e9b71===_0x50f00b(0x55b))_0xb5ea18[_0x50f00b(0x139)][_0x50f00b(0x7c2)]=null;_0x2941ea();}else{const _0x38fb62=document['getElementById'](_0x50f00b(0xa23)),_0x250cd4=document[_0x50f00b(0x51d)](_0x50f00b(0x62d)),_0x4fab8d=document['querySelector']('#meeting-view-screen\x20.chat-input-area'),_0x373c01=document['getElementById']('meeting-view-screen');_0x373c01[_0x50f00b(0xa19)][_0x50f00b(0x52b)](_0x50f00b(0x40c),_0x543bea[_0x50f00b(0x629)]===_0x50f00b(0x7da)),_0x373c01[_0x50f00b(0xa19)][_0x50f00b(0x52b)](_0x50f00b(0xc0f),_0x543bea[_0x50f00b(0x629)]===_0x50f00b(0xc19)),_0x543bea[_0x50f00b(0x629)]===_0x50f00b(0xc19)?'QzLBf'===_0x50f00b(0x49c)?(_0x38fb62['style'][_0x50f00b(0x930)]='none',_0x250cd4[_0x50f00b(0x1e2)]['display']='block'):_0x1751b2=[..._0x156f61,..._0x1330d9]:(_0x38fb62[_0x50f00b(0x1e2)]['display']=_0x50f00b(0x94a),_0x250cd4[_0x50f00b(0x1e2)]['display']='none',setTimeout(()=>{const _0x487eb2=_0x50f00b,_0x171a7c=_0x38fb62['querySelector'](_0x487eb2(0xbcf));if(_0x171a7c)_0x171a7c[_0x487eb2(0x1a0)]({'behavior':_0x487eb2(0x3ee),'block':_0x487eb2(0xa18)});else{if(_0x487eb2(0xd26)!==_0x487eb2(0xd26)){const _0xf630e2=_0x336601[_0x487eb2(0x760)](_0x487eb2(0x12c));if(_0xf630e2){const {playlist:_0x4330e5,currentIndex:_0x2485b4}=_0x4c3381['parse'](_0xf630e2);_0xcccc9d[_0x487eb2(0x8e1)](_0x4330e5)&&_0x4330e5[_0x487eb2(0xc1f)]>0x0&&_0x2485b4>-0x1&&(_0x2fa44b['musicPlaylist']=_0x4330e5,_0x77ea[_0x487eb2(0x786)]=_0x2485b4,_0x150bdd[_0x487eb2(0x75b)]=![],_0x586d11());}}else _0x38fb62[_0x487eb2(0xd3a)]=_0x38fb62[_0x487eb2(0x983)];}},0x32)),_0x4fab8d[_0x50f00b(0x1e2)][_0x50f00b(0x930)]=_0x50f00b(0x94a);}}function _0x5498f0(){const _0x151397=_0x3b741d,_0x1ea62b=document[_0x151397(0x51d)](_0x151397(0x889)),_0x336924=document['getElementById']('galgame-text');if(_0x543bea[_0x151397(0x259)][_0x151397(0xc1f)]>0x0){const _0x1b51cf=_0x543bea[_0x151397(0x259)]['shift']();_0x1ea62b[_0x151397(0x32a)]=_0x1b51cf['speaker']===_0x151397(0x4b3)?'旁白':_0x1b51cf[_0x151397(0x319)],_0x336924[_0x151397(0x32a)]=_0x1b51cf[_0x151397(0x3c2)],_0x1b51cf[_0x151397(0x319)]!==_0x151397(0x4b3)&&(_0x151397(0x581)===_0x151397(0x432)?_0x1da760(_0x3a4c60):_0x202039(_0x543bea[_0x151397(0x80c)],_0x1b51cf[_0x151397(0x6c0)]));}else{const _0x5680e3=_0x543bea[_0x151397(0x2bd)][_0x543bea['activeMeetingCharId']];if(_0x5680e3&&_0x5680e3[_0x151397(0xc1f)]>0x0){_0x543bea[_0x151397(0x259)]=[..._0x5680e3];const _0x3f1f72=_0x543bea[_0x151397(0x259)]['shift']();_0x1ea62b[_0x151397(0x32a)]=_0x3f1f72[_0x151397(0x319)]===_0x151397(0x4b3)?'旁白':_0x3f1f72['speaker'],_0x336924[_0x151397(0x32a)]=_0x3f1f72[_0x151397(0x3c2)],_0x3f1f72[_0x151397(0x319)]!=='narrator'&&(_0x151397(0xa22)!==_0x151397(0xa22)?_0x2d1339=_0xce5d1[_0x151397(0x90f)]:_0x202039(_0x543bea[_0x151397(0x80c)],_0x3f1f72['emotion']));}else _0x1ea62b[_0x151397(0x32a)]='旁白',_0x336924[_0x151397(0x32a)]=_0x151397(0x7b3);}}async function _0x202039(_0x1b8e93,_0x4431dc){const _0x4dd15e=_0x3b741d;if(_0x4dd15e(0x5dc)===_0x4dd15e(0x350))!_0x477d09&&(_0x10cc0f=_0x2ef329[_0x4dd15e(0x23f)](_0x4dd15e(0xaee)),_0x521428['id']=_0x4dd15e(0x1fd),_0x4bdab0[_0x4dd15e(0x83b)](_0x4ee0c0)),_0x4b259a[_0x4dd15e(0x4d5)]='<div\x20class=\x22loader-spinner\x22></div><span>'+_0x34f096+_0x4dd15e(0xcd7),_0x4c97f5[_0x4dd15e(0x1e2)][_0x4dd15e(0x930)]=_0x4dd15e(0x338);else{const _0x5114b1=document[_0x4dd15e(0x51d)](_0x4dd15e(0x74e)),_0x3d08af=document['getElementById'](_0x4dd15e(0x684)),_0x1bce46=_0x509294(_0x1b8e93),_0x45a257=_0x1bce46?.[_0x4dd15e(0x698)]||{'x':0x32,'y':0x64,'scale':0x1},_0x5c3d08=0x50*_0x45a257['scale'];_0x3d08af[_0x4dd15e(0x1e2)]['height']=_0x5c3d08+'%',_0x3d08af[_0x4dd15e(0x1e2)][_0x4dd15e(0x34a)]=_0x5c3d08+'%',_0x3d08af[_0x4dd15e(0x1e2)][_0x4dd15e(0xa12)]=_0x45a257['x']+'%',_0x3d08af[_0x4dd15e(0x1e2)][_0x4dd15e(0x49d)]=_0x45a257['y']+'%',_0x3d08af[_0x4dd15e(0x1e2)][_0x4dd15e(0x424)]='translate(-50%,\x20-100%)',_0x3d08af['style'][_0x4dd15e(0x1f7)]=_0x4dd15e(0x3ee);const _0x3d5744=['normal',_0x4dd15e(0x772),'angry',_0x4dd15e(0x348),_0x4dd15e(0xaf1)],_0x16dddb=_0x3d5744[_0x4dd15e(0x32d)](_0x4431dc)?_0x4431dc:_0x4dd15e(0x8a7);try{if(_0x4dd15e(0x240)!==_0x4dd15e(0x240))_0x52531b[_0x4dd15e(0xc6e)]?_0x22e985['play']():_0x227ccd[_0x4dd15e(0x939)]();else{const _0xc75a30=await _0x54e221(_0x4dd15e(0x9fc)+_0x16dddb+'_'+_0x1b8e93);if(_0xc75a30)_0x5114b1['src']&&_0x5114b1['style'][_0x4dd15e(0x48e)]!=='0'?(_0x5114b1[_0x4dd15e(0x1e2)]['opacity']=0x0,setTimeout(()=>{const _0x22cf7e=_0x4dd15e;'PcuUR'===_0x22cf7e(0xa86)?(_0x5114b1[_0x22cf7e(0x2d9)]=URL[_0x22cf7e(0xcb2)](_0xc75a30),_0x5114b1[_0x22cf7e(0x1e2)][_0x22cf7e(0x48e)]=0x1):(_0x10cf35[_0x22cf7e(0x1e2)]['backgroundImage']=_0x22cf7e(0x744)+_0x2e529c[_0x22cf7e(0xcb2)](_0x313004)+'\x27)',_0xa1f531[_0x22cf7e(0x1e2)][_0x22cf7e(0xa4e)]=_0x22cf7e(0x73d),_0x3602a8[_0x22cf7e(0x1e2)]['backgroundPosition']=_0x22cf7e(0xcc6));},0x96)):(_0x5114b1[_0x4dd15e(0x2d9)]=URL[_0x4dd15e(0xcb2)](_0xc75a30),_0x5114b1[_0x4dd15e(0x1e2)][_0x4dd15e(0x48e)]=0x1);else{if(_0x4dd15e(0x1f9)==='RimkB'){const _0x7494a2=await _0x54e221(_0x4dd15e(0x677)+_0x1b8e93);_0x5114b1[_0x4dd15e(0x2d9)]=_0x7494a2?URL[_0x4dd15e(0xcb2)](_0x7494a2):'';}else _0xe0c345[_0x4dd15e(0x90f)]=_0x2dc13b,_0xfedd1c['classList']['remove'](_0x4dd15e(0x6db));}}}catch(_0x256314){_0x4dd15e(0xbb2)===_0x4dd15e(0xbb2)?(console[_0x4dd15e(0xb1e)](_0x4dd15e(0x9f1),_0x256314),document['getElementById'](_0x4dd15e(0x3f7))[_0x4dd15e(0x2d9)]='',document[_0x4dd15e(0x51d)]('livestream-sprite-back')[_0x4dd15e(0x2d9)]=''):_0x28f274['worldBooks']=_0x1e8280[_0x4dd15e(0xc49)]['map'](_0x405b10=>_0x28d515[_0x4dd15e(0x41e)][_0x4dd15e(0xbe8)](_0x30eb6a=>_0x30eb6a['id']===_0x405b10))['filter'](_0x3464be)[_0x4dd15e(0x257)](_0x56f866=>({'name':_0x56f866['name'],'content':_0x56f866[_0x4dd15e(0x297)],'categoryId':_0x56f866[_0x4dd15e(0x903)]||_0x4dd15e(0x65a)}));}}}let _0x58af84=![],_0x2a68a3={'isDragging':![],'isResizing':![],'startX':0x0,'startY':0x0,'startLeft':0x0,'startTop':0x0,'startWidth':0x0,'startHeight':0x0};const _0x3c53fb=document[_0x3b741d(0x51d)](_0x3b741d(0xbc4)),_0x3bd225=document['getElementById'](_0x3b741d(0xae8)),_0x2a5fc0=document[_0x3b741d(0x51d)](_0x3b741d(0x59d)),_0x194242=document[_0x3b741d(0x51d)](_0x3b741d(0x265)),_0x14da60=document[_0x3b741d(0x51d)](_0x3b741d(0x7cb)),_0x1cf0ed=document[_0x3b741d(0x51d)](_0x3b741d(0x684)),_0x2714c1=document['getElementById']('sprite-resize-handle'),_0x54dd7b=document['getElementById']('meeting-main-content');let _0x4ccf2a={};function _0x472e73(){const _0xcd16be=_0x3b741d,_0x4a0ab1=_0x509294(_0x543bea[_0xcd16be(0x80c)]);if(!_0x4a0ab1)return;_0x58af84=!![],_0x14da60[_0xcd16be(0x1e2)][_0xcd16be(0x930)]='block';const _0x481cc5=_0x4a0ab1[_0xcd16be(0x698)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0xcd16be(0x51d)]('sprite-slider-x')[_0xcd16be(0x90f)]=_0x481cc5['x'],document[_0xcd16be(0x51d)](_0xcd16be(0xcc7))['value']=_0x481cc5['y'],document['getElementById']('sprite-slider-scale')['value']=_0x481cc5[_0xcd16be(0x2e5)]*0x64,_0x4ccf2a={..._0x481cc5},document[_0xcd16be(0x51d)]('galgame-textbox-container')[_0xcd16be(0x1e2)][_0xcd16be(0x930)]=_0xcd16be(0x2f6),document[_0xcd16be(0x51d)](_0xcd16be(0x785))[_0xcd16be(0x1e2)][_0xcd16be(0x930)]='none';}function _0x1c64d7(_0x2672b1=![]){const _0x173f34=_0x3b741d;_0x58af84=![],_0x14da60[_0x173f34(0x1e2)][_0x173f34(0x930)]=_0x173f34(0x2f6),document[_0x173f34(0x51d)](_0x173f34(0xc46))[_0x173f34(0x1e2)]['display']='block',document[_0x173f34(0x51d)](_0x173f34(0x785))[_0x173f34(0x1e2)][_0x173f34(0x930)]=_0x173f34(0x94a);if(!_0x2672b1){const _0x6627d2=_0x509294(_0x543bea['activeMeetingCharId']);if(_0x6627d2){if(_0x173f34(0x722)===_0x173f34(0x722))_0x6627d2[_0x173f34(0x698)]=_0x4ccf2a,_0x202039(_0x543bea[_0x173f34(0x80c)],_0x173f34(0x8a7));else{const _0xa28e20=_0xfbbf7c[_0x173f34(0x576)](_0x30b136[_0x173f34(0x760)]('deletedStickers')||'[]');if(_0xa28e20[_0x173f34(0xc1f)]===0x0)return _0x35bccc;return _0x23c68f[_0x173f34(0x78c)](_0x59ac18=>!_0xa28e20[_0x173f34(0x32d)](_0x59ac18[_0x173f34(0x41a)]));}}}}function _0x4ed12c(){const _0x3e4888=_0x3b741d;if(_0x3e4888(0x612)==='zPVLe')_0x50ef6c(_0x3e4888(0x632)+_0x4b4ea9[_0x3e4888(0x41a)]+_0x3e4888(0x597)+_0x5cf99e[_0x3e4888(0x6af)]);else{const _0xeaa460=_0x509294(_0x543bea[_0x3e4888(0x80c)]);if(!_0xeaa460)return;const _0x4e6290=parseFloat(document[_0x3e4888(0x51d)](_0x3e4888(0x573))[_0x3e4888(0x90f)]),_0x2554e1=parseFloat(document[_0x3e4888(0x51d)](_0x3e4888(0xcc7))[_0x3e4888(0x90f)]),_0x3fa24f=parseFloat(document[_0x3e4888(0x51d)](_0x3e4888(0x160))[_0x3e4888(0x90f)])/0x64;_0xeaa460[_0x3e4888(0x698)]={'x':_0x4e6290,'y':_0x2554e1,'scale':_0x3fa24f},_0x1a0f1f(),_0x48e450(_0x3e4888(0x3c7)),_0x1c64d7(!![]);}}function _0x396e7e(){const _0xe9d5f2=_0x3b741d;_0x44efa2('确定要恢复这个角色的默认立绘位置吗？')[_0xe9d5f2(0x842)](_0x56486e=>{const _0x2db412=_0xe9d5f2;if(_0x56486e){const _0x5337b7=_0x509294(_0x543bea[_0x2db412(0x80c)]);if(_0x5337b7){if('dHjag'===_0x2db412(0x6fd))delete _0x5337b7[_0x2db412(0x698)],_0x1a0f1f(),_0x202039(_0x5337b7['id'],_0x2db412(0x8a7)),_0x48e450(_0x2db412(0xb81)),_0x1c64d7(!![]);else{if(_0x535428[_0x2db412(0x3b2)])_0x696282['push']('['+_0x1b0991(_0x571090)+_0x2db412(0x4ac)+(_0x5f36da[_0x2db412(0x297)]?.[_0x2db412(0x606)](/：(.+?)]/)?.[0x1]||'表情')+']');else{if(_0x18467a[_0x2db412(0x55b)]){const _0x311925=_0x1099f6[_0x2db412(0x297)]?'\x20'+_0x10eef8['content']:'';_0x550550['push']('['+_0x7b0552(_0x940189)+_0x2db412(0x375)+_0x311925);}else _0x24568d[_0x2db412(0x297)]&&_0x41380f['push']('['+_0x51fc87(_0x32a539)+']\x20'+_0x4da50c['content']);}}}}});}function _0x2f0e15(){const _0x48c4e9=_0x3b741d;if(!_0x58af84)return;const _0x106ec7=_0x543bea[_0x48c4e9(0x80c)],_0x21e4a2=_0x509294(_0x106ec7);if(!_0x21e4a2)return;const _0x32cac5=parseFloat(document[_0x48c4e9(0x51d)](_0x48c4e9(0x573))['value']),_0x3923ef=parseFloat(document['getElementById'](_0x48c4e9(0xcc7))[_0x48c4e9(0x90f)]),_0x4138ee=parseFloat(document[_0x48c4e9(0x51d)](_0x48c4e9(0x160))[_0x48c4e9(0x90f)])/0x64;_0x21e4a2[_0x48c4e9(0x698)]={'x':_0x32cac5,'y':_0x3923ef,'scale':_0x4138ee};const _0x4a0bd0=document[_0x48c4e9(0x51d)](_0x48c4e9(0x684)),_0x31dae8=0x50*_0x4138ee;_0x4a0bd0[_0x48c4e9(0x1e2)][_0x48c4e9(0x135)]=_0x31dae8+'%',_0x4a0bd0[_0x48c4e9(0x1e2)][_0x48c4e9(0x34a)]=_0x31dae8+'%',_0x4a0bd0['style']['left']=_0x32cac5+'%',_0x4a0bd0['style'][_0x48c4e9(0x49d)]=_0x3923ef+'%',_0x4a0bd0[_0x48c4e9(0x1e2)][_0x48c4e9(0x424)]=_0x48c4e9(0x3aa);}document['getElementById'](_0x3b741d(0x573))[_0x3b741d(0xbc8)](_0x3b741d(0xa5e),_0x2f0e15),document[_0x3b741d(0x51d)]('sprite-slider-y')[_0x3b741d(0xbc8)](_0x3b741d(0xa5e),_0x2f0e15),document[_0x3b741d(0x51d)](_0x3b741d(0x160))[_0x3b741d(0xbc8)]('input',_0x2f0e15),_0x3c53fb[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x472e73),_0x3bd225[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x4ed12c),_0x2a5fc0[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x1c64d7(![])),_0x194242[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x396e7e);function _0x5ef098(_0x4bdc16){const _0x4724d4=_0x3b741d,_0x125304=_0x509294(_0x4bdc16);if(!_0x125304)return;const _0x44ea80=_0x543bea[_0x4724d4(0x94b)][_0x4724d4(0xbe8)](_0x89df18=>_0x89df18['type']===_0x4724d4(0x5fc)&&_0x89df18[_0x4724d4(0x184)][_0x4724d4(0x32d)](_0x4bdc16)),_0xbdebba=_0x2f2ed1(_0x44ea80['id']),_0x57f8ad=_0x543bea[_0x4724d4(0xc54)][_0x4724d4(0x78c)](_0x586187=>_0x586187[_0x4724d4(0xbc1)])['pop'](),_0x4b807b=document[_0x4724d4(0x51d)]('galgame-speaker'),_0x475358=document[_0x4724d4(0x51d)](_0x4724d4(0x64f));let _0x5618d9=null;if(_0x57f8ad){if(_0x57f8ad[_0x4724d4(0xcd4)]===_0x4724d4(0xbb1)){if(_0x4724d4(0xb7a)!=='nVknN'){const _0x2146de=_0x543bea[_0x4724d4(0x2bd)][_0x4bdc16];_0x2146de&&_0x2146de[_0x4724d4(0xc1f)]>0x0&&(_0x5618d9=_0x2146de['at'](-0x1));}else{const _0x2da1f9=_0x424896(_0x47af59[_0x4724d4(0x80c)]);if(!_0x2da1f9)return;_0x3c2cb6=!![],_0x4c10bf[_0x4724d4(0x1e2)][_0x4724d4(0x930)]=_0x4724d4(0x94a);const _0x5cc7da=_0x2da1f9[_0x4724d4(0x698)]||{'x':0x32,'y':0x64,'scale':0x1};_0x5c4cd3[_0x4724d4(0x51d)](_0x4724d4(0x573))[_0x4724d4(0x90f)]=_0x5cc7da['x'],_0x4176e9[_0x4724d4(0x51d)](_0x4724d4(0xcc7))['value']=_0x5cc7da['y'],_0x41c93d['getElementById']('sprite-slider-scale')[_0x4724d4(0x90f)]=_0x5cc7da[_0x4724d4(0x2e5)]*0x64,_0x14d203={..._0x5cc7da},_0x44466e['getElementById'](_0x4724d4(0xc46))['style']['display']='none',_0x23bd55['getElementById']('galgame-sprite-adjust-ui')[_0x4724d4(0x1e2)][_0x4724d4(0x930)]=_0x4724d4(0x2f6);}}else _0x5618d9={'speaker':_0xbdebba['name'],'line':_0x57f8ad[_0x4724d4(0x297)],'emotion':_0x4724d4(0x8a7)};}_0x5618d9?(_0x4b807b[_0x4724d4(0x32a)]=_0x5618d9[_0x4724d4(0x319)]===_0x4724d4(0x4b3)?'旁白':_0x5618d9[_0x4724d4(0x319)],_0x475358[_0x4724d4(0x32a)]=_0x5618d9[_0x4724d4(0x3c2)],_0x5618d9[_0x4724d4(0x319)]===_0x125304[_0x4724d4(0x41a)]?_0x202039(_0x4bdc16,_0x5618d9[_0x4724d4(0x6c0)]):_0x202039(_0x4bdc16,_0x4724d4(0x8a7))):(_0x4b807b[_0x4724d4(0x32a)]=_0x125304[_0x4724d4(0x41a)],_0x475358[_0x4724d4(0x32a)]=_0x4724d4(0x33c),_0x202039(_0x4bdc16,_0x4724d4(0x8a7)));}function _0x50ced9(){const _0x2d0ef0=_0x3b741d,_0x11ee5d=new Date(),_0x468f98=document[_0x2d0ef0(0x51d)](_0x2d0ef0(0x58a)),_0x539bbf=document[_0x2d0ef0(0x51d)](_0x2d0ef0(0xc77));if(_0x468f98&&_0x539bbf){const _0x14a91f=String(_0x11ee5d[_0x2d0ef0(0x8bb)]())[_0x2d0ef0(0xa9f)](0x2,'0'),_0x397026=String(_0x11ee5d[_0x2d0ef0(0x5f9)]())['padStart'](0x2,'0');_0x468f98[_0x2d0ef0(0x32a)]=_0x14a91f+':'+_0x397026;const _0x50a28d=_0x11ee5d[_0x2d0ef0(0xc3f)]()+0x1,_0x145283=_0x11ee5d[_0x2d0ef0(0x3d6)](),_0x50b76c=[_0x2d0ef0(0x229),_0x2d0ef0(0xb9f),'星期二','星期三','星期四',_0x2d0ef0(0xb19),_0x2d0ef0(0x8a9)][_0x11ee5d[_0x2d0ef0(0x848)]()];_0x539bbf[_0x2d0ef0(0x32a)]=_0x50a28d+'月'+_0x145283+'日\x20'+_0x50b76c;}}const _0x2294c6=document['getElementById'](_0x3b741d(0xc78)),_0x36d6c1=document['getElementById'](_0x3b741d(0x93e)),_0x4f11ff=document['getElementById'](_0x3b741d(0xa64)),_0xa74478=document[_0x3b741d(0x51d)](_0x3b741d(0x9de)),_0x491ec6=document[_0x3b741d(0x51d)]('listen-together-song-list'),_0x44ee83=document[_0x3b741d(0x51d)](_0x3b741d(0x7d5)),_0x3bf5a4=document[_0x3b741d(0x51d)](_0x3b741d(0x75d)),_0x184866=document[_0x3b741d(0x51d)](_0x3b741d(0xabe)),_0x34852c=document[_0x3b741d(0x51d)](_0x3b741d(0x1ac));let _0x431431=[],_0x28a765=![];async function _0x114a4b(){const _0x1f87fd=_0x3b741d;if(_0x1f87fd(0x44f)!==_0x1f87fd(0x495)){if(!_0x543bea[_0x1f87fd(0x886)])return;_0x491ec6[_0x1f87fd(0x4d5)]=_0x1f87fd(0xc74),_0x2294c6[_0x1f87fd(0xa19)][_0x1f87fd(0x25d)](_0x1f87fd(0x6db));const _0x19dccb=await _0x4842ec();if(_0x19dccb[_0x1f87fd(0xc1f)]===0x0){_0x491ec6[_0x1f87fd(0x4d5)]=_0x1f87fd(0xc59);return;}_0x491ec6[_0x1f87fd(0x4d5)]='',_0x19dccb[_0x1f87fd(0xb36)](_0x144596=>{const _0x167011=_0x1f87fd;if(_0x167011(0xb89)!==_0x167011(0xa76)){const _0x2e4a6d=document[_0x167011(0x23f)](_0x167011(0xaee));_0x2e4a6d[_0x167011(0xa9d)]=_0x167011(0x3a6);const _0x5a9954=_0x144596[_0x167011(0x73d)]?URL['createObjectURL'](_0x144596[_0x167011(0x73d)]):_0x46536a;_0x2e4a6d[_0x167011(0x4d5)]=_0x167011(0x3ef)+_0x5a9954+_0x167011(0x321)+(_0x144596[_0x167011(0xc80)][_0x167011(0xa6b)]||_0x167011(0xa81))+_0x167011(0x83f)+(_0x144596[_0x167011(0xc80)]['歌手']||'未知艺术家')+_0x167011(0x67e),_0x2e4a6d[_0x167011(0xbc8)]('click',()=>{_0x42afb8(_0x144596);}),_0x491ec6[_0x167011(0x83b)](_0x2e4a6d);}else _0x57635e(_0x167011(0x56a)+_0x1a6ca9[_0x167011(0x979)]);});}else _0x1133af=_0x455704[_0x1f87fd(0x7e7)][_0x1f87fd(0xbe8)](_0x215172=>_0x215172['id']===_0xe24fe3['activeUserProfileId'])||_0x575e94[_0x1f87fd(0x7e7)][0x0];}function _0x39ccd3(){const _0x9b5a23=_0x3b741d;_0x2294c6[_0x9b5a23(0xa19)][_0x9b5a23(0xab0)](_0x9b5a23(0x6db));}async function _0x42afb8(_0x1c021a){const _0x2b49d7=_0x3b741d;if(!_0x543bea[_0x2b49d7(0x886)]||!_0x1c021a)return;let _0x44c768=null;if(_0x1c021a[_0x2b49d7(0x73d)]){if(_0x2b49d7(0xb20)===_0x2b49d7(0xd35))_0x161362();else try{if(_0x2b49d7(0xcbb)!==_0x2b49d7(0xcbb))return new _0x216f20(_0xee4703=>{const _0x33a945=_0x2b49d7,_0x2538cd=_0x4a3f6d[_0x33a945(0x51d)](_0x33a945(0x204)),_0x3e88ea=_0x2a8d04['getElementById']('modal-text'),_0x70d89d=_0x56e3e7[_0x33a945(0x51d)](_0x33a945(0xc27)),_0x1e81db=_0x2745e7[_0x33a945(0x51d)](_0x33a945(0x9ea)),_0x431962=_0x3b2053[_0x33a945(0x51d)](_0x33a945(0xbf7));_0x3e88ea[_0x33a945(0x32a)]=_0x51ce1c,_0x2538cd[_0x33a945(0x1e2)][_0x33a945(0x930)]=_0x33a945(0x338);const _0x559e62=_0x4448c8=>{const _0x3b1cc7=_0x33a945;_0x2538cd[_0x3b1cc7(0x1e2)][_0x3b1cc7(0x930)]=_0x3b1cc7(0x2f6),_0x70d89d['onclick']=_0x1e81db[_0x3b1cc7(0x50e)]=_0x431962[_0x3b1cc7(0x50e)]=null,_0x298472[_0x3b1cc7(0x2ec)](_0x3b1cc7(0x830),_0x167b13),_0xee4703(_0x4448c8);},_0x167b13=_0x3a6125=>{const _0x260e7f=_0x33a945;if(_0x3a6125[_0x260e7f(0xc7f)]===_0x260e7f(0x959))_0x559e62(![]);if(_0x3a6125['key']===_0x260e7f(0x778))_0x559e62(!![]);};_0x70d89d['onclick']=()=>_0x559e62(!![]),_0x1e81db[_0x33a945(0x50e)]=()=>_0x559e62(![]),_0x431962['onclick']=()=>_0x559e62(![]),_0x416104[_0x33a945(0xbc8)](_0x33a945(0x830),_0x167b13);});else _0x44c768=_0x2b49d7(0xb24)+Date[_0x2b49d7(0x63d)]()+'_'+Math['random'](),await _0x567110(_0x44c768,_0x1c021a[_0x2b49d7(0x73d)]);}catch(_0x7f3176){console['error']('在“一起听”邀请中，净化封面失败:',_0x7f3176);}}const _0x5762e4={'role':_0x2b49d7(0x8ed),'type':_0x2b49d7(0x3e9),'content':_0x2b49d7(0x982)+_0x1c021a[_0x2b49d7(0xc80)][_0x2b49d7(0xa6b)]+']','songId':_0x1c021a['id'],'songName':_0x1c021a[_0x2b49d7(0xc80)][_0x2b49d7(0xa6b)],'artist':_0x1c021a[_0x2b49d7(0xc80)]['歌手'],'coverId':_0x44c768,'timestamp':Date[_0x2b49d7(0x63d)]()};_0x543bea[_0x2b49d7(0xc54)][_0x2b49d7(0xb47)](_0x5762e4),_0x348dc5(),_0x15b163(),_0x39ccd3(),setTimeout(_0x183583,0x64);}_0x36d6c1[_0x3b741d(0xbc8)]('click',_0x114a4b),_0x4f11ff[_0x3b741d(0xbc8)]('click',_0x39ccd3),_0xa74478['addEventListener'](_0x3b741d(0x779),_0x39ccd3);async function _0x5784d5(_0x2971b0,_0xebc9cd,_0x41600c){const _0x45428b=_0x3b741d;if(_0x28a765)return;_0x28a765=!![];try{const _0x406f78=_0x543bea['chats']['find'](_0x4cb373=>_0x4cb373['activeListenSession']&&_0x4cb373['activeListenSession'][_0x45428b(0x8ce)]),_0x5029b8=_0x577515();if(_0x406f78&&_0x406f78['id']!==_0x5029b8['id'])_0x406f78['activeListenSession']=null,_0x48e450(_0x45428b(0x422)),_0x1a0f1f();else _0x406f78&&_0x406f78['id']===_0x5029b8['id']&&_0x48e450(_0x45428b(0xc3d));_0x2ee484(!![],'正在连接同步频道...');if(!_0x5029b8){_0x2ee484(![]),_0x48e450(_0x45428b(0x9ce));return;}const _0x5ec2d5=await _0x30f5fc(_0x2971b0);if(!_0x5ec2d5){if('cnLyu'===_0x45428b(0x559)){_0x2ee484(![]),_0x48e450(_0x45428b(0x40f));return;}else!_0x539712[_0x45428b(0x820)](_0x45428b(0xa2f))[_0x45428b(0x9ff)](_0x1e1a28[_0x45428b(0x446)])&&(_0x5744b2[_0x45428b(0xa19)][_0x45428b(0xab0)](_0x45428b(0x462)),_0x4a9e47[_0x45428b(0xa19)][_0x45428b(0xab0)]('expanded'));}_0x5029b8[_0x45428b(0x56f)]={'isActive':!![],'songId':_0x2971b0,'leaderId':_0x45428b(0x8ed),'songName':_0x5ec2d5[_0x45428b(0xc80)]['歌曲名称'],'artist':_0x5ec2d5[_0x45428b(0xc80)]['歌手'],'cover':_0x5ec2d5[_0x45428b(0x73d)]},_0x1a0f1f(),document[_0x45428b(0x51d)]('lt-ui-cover-art')[_0x45428b(0x2d9)]=_0x5ec2d5[_0x45428b(0x73d)]?URL[_0x45428b(0xcb2)](_0x5ec2d5[_0x45428b(0x73d)]):_0x46536a,document['getElementById'](_0x45428b(0x771))[_0x45428b(0x32a)]=_0x5ec2d5[_0x45428b(0xc80)]['歌曲名称'],document[_0x45428b(0x51d)](_0x45428b(0x4d8))[_0x45428b(0x32a)]=_0x5ec2d5[_0x45428b(0xc80)]['歌手'],_0x11533e(_0x5ec2d5),_0x3bf5a4[_0x45428b(0x1e2)][_0x45428b(0x930)]=_0x45428b(0x338),setTimeout(()=>_0x3bf5a4[_0x45428b(0xa19)]['add'](_0x45428b(0x6db)),0xa),_0x41600c['innerHTML']=_0x45428b(0xbb9)+_0x41600c[_0x45428b(0x820)](_0x45428b(0xcc3))[_0x45428b(0xb4a)],_0x543bea[_0x45428b(0xc54)][_0xebc9cd]&&(_0x543bea[_0x45428b(0xc54)][_0xebc9cd]['accepted']=!![],_0x348dc5()),_0x2ee484(![]),_0x401b2c(_0x2971b0,[_0x2971b0]),_0x2e8831(_0x5ec2d5,!![]);}finally{_0x28a765=![];}}function _0x5dc218(){const _0x51b3df=_0x3b741d,_0x22e10b=_0x543bea[_0x51b3df(0x94b)][_0x51b3df(0xbe8)](_0x3149e6=>_0x3149e6[_0x51b3df(0x56f)]&&_0x3149e6['activeListenSession'][_0x51b3df(0x8ce)]);_0x22e10b&&(_0x22e10b['activeListenSession']=null,_0x1a0f1f(),_0x48e450(_0x51b3df(0x501)),_0x2e8831(),_0x3bf5a4[_0x51b3df(0xa19)]['remove'](_0x51b3df(0x6db)),setTimeout(()=>_0x3bf5a4[_0x51b3df(0x1e2)][_0x51b3df(0x930)]=_0x51b3df(0x2f6),0x12c));}function _0x79ac8f(_0x5a9085){const _0x3cf264=_0x3b741d;if(!_0x5a9085)return[];const _0x408f40=_0x5a9085[_0x3cf264(0x2bf)]('\x0a'),_0x3259be=[],_0x4bb2bb=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x1f6254 of _0x408f40){if(_0x3cf264(0x721)!==_0x3cf264(0x9e3)){const _0x2b59bf=_0x1f6254[_0x3cf264(0x606)](_0x4bb2bb);if(_0x2b59bf){if('aKBIX'==='bBjsY')_0x17a9aa[_0x3cf264(0x1e2)][_0x3cf264(0xbd8)]='',_0x1d55f9[_0x3cf264(0x1e2)][_0x3cf264(0x911)]='',_0x30bd5c[_0x3cf264(0x5c4)](_0x3cf264(0x5d7))['forEach'](_0x53b3fa=>{const _0x40516b=_0x3cf264;_0x53b3fa['style'][_0x40516b(0x49b)]='';});else{const _0x4c5e9c=parseInt(_0x2b59bf[0x1],0xa),_0x4f2097=parseInt(_0x2b59bf[0x2],0xa),_0x2f4967=parseInt(_0x2b59bf[0x3],0xa)*(_0x2b59bf[0x3]['length']===0x2?0xa:0x1),_0x5a3378=_0x4c5e9c*0x3c+_0x4f2097+_0x2f4967/0x3e8,_0x353b40=_0x1f6254['replace'](_0x4bb2bb,'')[_0x3cf264(0xad4)]();_0x353b40&&_0x3259be[_0x3cf264(0xb47)]({'time':_0x5a3378,'text':_0x353b40});}}}else{_0x567473(_0x3cf264(0xc73),_0x3cf264(0x4e4));const _0x37e467=_0x16868a[_0x3cf264(0x51d)](_0x3cf264(0x97b));_0x37e467[_0x3cf264(0x4d5)]='',_0x17d043['worldBookCategories'][_0x3cf264(0xb36)](_0x739181=>{const _0x5bc7f0=_0x3cf264,_0x43e4cf=_0x8b3a1f['createElement']('option');_0x43e4cf['value']=_0x739181['id'],_0x43e4cf[_0x5bc7f0(0x32a)]=_0x739181[_0x5bc7f0(0x41a)],_0x37e467[_0x5bc7f0(0x83b)](_0x43e4cf);});if(_0x42dd7c){const _0x36601d=_0x4b4d96[_0x3cf264(0x41e)][_0x3cf264(0xbe8)](_0x225622=>_0x225622['id']===_0x3e0f11);if(!_0x36601d)return;_0x35146b['getElementById']('editing-world-book-id')[_0x3cf264(0x90f)]=_0x36601d['id'],_0x3f4995[_0x3cf264(0x51d)]('world-book-editor-title')[_0x3cf264(0x32a)]=_0x3cf264(0x775),_0x4d88bf['getElementById'](_0x3cf264(0x505))['value']=_0x36601d[_0x3cf264(0x41a)],_0x5e4ae1[_0x3cf264(0x51d)](_0x3cf264(0x4dc))['value']=_0x36601d[_0x3cf264(0x297)],_0x37e467[_0x3cf264(0x90f)]=_0x36601d[_0x3cf264(0x903)]||'default';}else _0x3c7c7b[_0x3cf264(0x51d)](_0x3cf264(0x777))[_0x3cf264(0x90f)]='',_0x27f69f[_0x3cf264(0x51d)](_0x3cf264(0x16e))[_0x3cf264(0x32a)]=_0x3cf264(0xc5c),_0x279673[_0x3cf264(0x51d)](_0x3cf264(0x505))[_0x3cf264(0x90f)]='',_0x5079b8[_0x3cf264(0x51d)](_0x3cf264(0x4dc))[_0x3cf264(0x90f)]='',_0x37e467['value']=_0x115419['activeWorldBookCategoryId'];}}return _0x3259be;}function _0x11533e(_0x2d98ff){const _0x20970a=_0x3b741d;if(_0x20970a(0x3b1)!==_0x20970a(0x3b1)){if(!_0x25a51e[_0x20970a(0x886)])return;try{_0x151a95[_0x20970a(0xa1c)](_0x20970a(0x74f)+_0x3e55a6['activeChatId'],_0x272a9c[_0x20970a(0x427)](_0x32ee38[_0x20970a(0xc54)]));}catch(_0x1975f5){_0x45d0d9[_0x20970a(0xb1e)](_0x20970a(0x1b7),_0x1975f5),_0x5d6964(_0x20970a(0xc4a));}}else{_0x431431=_0x79ac8f(_0x2d98ff['lyrics']),_0x34852c[_0x20970a(0x4d5)]='';if(_0x431431[_0x20970a(0xc1f)]===0x0){if(_0x20970a(0x3b0)===_0x20970a(0x4f0))_0x484e1d(_0x20970a(0x52c))[_0x20970a(0x842)](_0x1d5f5d=>{const _0x31a46e=_0x20970a;if(_0x1d5f5d){const _0x3bb921=_0xbd30b(_0x9cf89c['activeMeetingCharId']);_0x3bb921&&(delete _0x3bb921[_0x31a46e(0x698)],_0x5c2616(),_0x5e6c0c(_0x3bb921['id'],'normal'),_0x4898e1(_0x31a46e(0xb81)),_0x4feb3f(!![]));}});else{_0x34852c[_0x20970a(0x4d5)]=_0x20970a(0xaa7);return;}}_0x431431[_0x20970a(0xb36)]((_0x527193,_0x2de9d0)=>{const _0x121161=_0x20970a,_0x3f493d=document[_0x121161(0x23f)]('p');_0x3f493d[_0x121161(0x32a)]=_0x527193[_0x121161(0x685)],_0x3f493d['id']=_0x121161(0x2cf)+_0x2de9d0,_0x34852c['appendChild'](_0x3f493d);});}}function _0x50e8ea(_0x4e7775,_0x12af1f,_0x43cdf4,_0x255179){const _0x1e7912=_0x3b741d;if(_0x1e7912(0x6e9)==='bnHZc'){const _0xa93496=(_0x255179-0x5a)*Math['PI']/0xb4;return{'x':_0x4e7775+_0x43cdf4*Math['cos'](_0xa93496),'y':_0x12af1f+_0x43cdf4*Math[_0x1e7912(0xd17)](_0xa93496)};}else{if(_0x5067ba[_0x1e7912(0x711)]===_0x1e7912(0x897))_0x40786b[_0x1e7912(0x9cb)]();_0x3c7ece(_0x4390d5);}}function _0x47ccee(_0x3795ea){const _0x511f1e=_0x3b741d;if(_0x511f1e(0xccd)!==_0x511f1e(0xccd))_0x1853df[_0x511f1e(0x9e6)]=_0x34641e;else{const _0x1ab9db='http://www.w3.org/2000/svg',_0x96725f=document[_0x511f1e(0x39d)](_0x1ab9db,_0x511f1e(0x6ba)),_0xa270ed=0xfa,_0x148474=_0xa270ed/0x2,_0x17f279=_0xa270ed/0x2,_0x51d3db=_0xa270ed/0x2-0x14;_0x96725f[_0x511f1e(0xa3f)](_0x511f1e(0x34a),_0x511f1e(0x503)),_0x96725f[_0x511f1e(0xa3f)](_0x511f1e(0x135),_0x511f1e(0x503)),_0x96725f[_0x511f1e(0xa3f)](_0x511f1e(0xd4f),_0x511f1e(0x9c6)+_0xa270ed+'\x20'+_0xa270ed);const _0x1fa116=Object[_0x511f1e(0x5b0)](_0x3795ea)[_0x511f1e(0x8ea)]((_0xb5c021,_0x5e2f6e)=>_0xb5c021+_0x5e2f6e,0x0);if(_0x1fa116===0x0)return _0x96725f;let _0x41c14=-0x5a;const _0x1db188=[_0x511f1e(0x208),'#ffcc66',_0x511f1e(0x137),_0x511f1e(0x4d0),_0x511f1e(0x489),_0x511f1e(0x558),_0x511f1e(0x92e),'#ff8c66'];let _0x50b67f=0x0;for(const _0x794425 in _0x3795ea){const _0x1be63a=_0x3795ea[_0x794425];if(_0x1be63a<=0x0)continue;const _0x262bf4=_0x1be63a/_0x1fa116*0x168,_0x1e199d=_0x41c14+_0x262bf4,_0x552da4=_0x50e8ea(_0x148474,_0x17f279,_0x51d3db,_0x1e199d),_0xc469c=_0x50e8ea(_0x148474,_0x17f279,_0x51d3db,_0x41c14),_0x5138ad=_0x262bf4>0xb4?'1':'0',_0x579346=['M',_0x552da4['x'],_0x552da4['y'],'A',_0x51d3db,_0x51d3db,0x0,_0x5138ad,0x1,_0xc469c['x'],_0xc469c['y'],'L',_0x148474,_0x17f279,'Z'][_0x511f1e(0x4db)]('\x20'),_0xc74a53=document[_0x511f1e(0x39d)](_0x1ab9db,_0x511f1e(0x222));_0xc74a53[_0x511f1e(0xa3f)]('d',_0x579346),_0xc74a53[_0x511f1e(0xa3f)](_0x511f1e(0x227),_0x1db188[_0x50b67f%_0x1db188['length']]),_0x50b67f++;const _0x555aae=document[_0x511f1e(0x39d)](_0x1ab9db,_0x511f1e(0x82a));_0x555aae[_0x511f1e(0x32a)]=_0x794425+':\x20'+_0x1be63a['toFixed'](0x2)+'\x20('+(_0x1be63a/_0x1fa116*0x64)['toFixed'](0x1)+'%)',_0xc74a53[_0x511f1e(0x83b)](_0x555aae),_0x96725f[_0x511f1e(0x83b)](_0xc74a53),_0x41c14=_0x1e199d;}return _0x96725f;}}function _0x19318d(){const _0x4355a9=_0x3b741d;if(_0x431431[_0x4355a9(0xc1f)]===0x0)return;const _0x28e909=_0x44ee83[_0x4355a9(0xc5d)];let _0x14aa51=-0x1;for(let _0x18a9b8=0x0;_0x18a9b8<_0x431431['length'];_0x18a9b8++){if('mLHji'===_0x4355a9(0x8b0))_0x544223['classList']['add'](_0x4355a9(0x715)),_0x18887f[_0x4355a9(0xa19)][_0x4355a9(0x25d)](_0x4355a9(0xb85)),_0x466a43['classList'][_0x4355a9(0x25d)](_0x4355a9(0x167)),_0x5d4a0f(()=>{const _0x423579=_0x4355a9;_0xde9099[_0x423579(0xa19)][_0x423579(0xab0)]('is-visible',_0x423579(0xb85)),_0x5929be[_0x423579(0xa19)]['remove'](_0x423579(0x715)),_0x91d88f['diaryCurrentPage']=_0x341c0a,_0xa7d941(),_0xdb3b46[_0x423579(0x405)]=![];},0x2bc);else{if(_0x28e909>=_0x431431[_0x18a9b8][_0x4355a9(0xb92)]){if('mZsVZ'!==_0x4355a9(0x928)){const _0x3c11e5=_0x1436b2['getElementById']('world-book-checkboxes-container'),_0xa51631=_0x3c11e5['querySelectorAll'](_0x4355a9(0x46f)),_0x4af983=_0x12ffae[_0x4355a9(0x820)](_0x4355a9(0x5cf));if(_0xa51631['length']===0x0)_0x4af983[_0x4355a9(0x32a)]='--\x20点击选择\x20--';else _0xa51631['length']>0x2?_0x4af983['textContent']=_0x4355a9(0xcdd)+_0xa51631['length']+'\x20项':_0x4af983[_0x4355a9(0x32a)]=_0x41911b['from'](_0xa51631)['map'](_0x12df23=>_0x12df23[_0x4355a9(0x2a6)]['textContent'][_0x4355a9(0xad4)]())[_0x4355a9(0x4db)]('、');}else _0x14aa51=_0x18a9b8;}else break;}}if(_0x14aa51!==-0x1){if(_0x4355a9(0x2e1)===_0x4355a9(0x9c2))_0x44f706[_0x4355a9(0xa19)][_0x4355a9(0xab0)](_0x4355a9(0x6db));else{const _0x54ecc6=_0x34852c[_0x4355a9(0x5c4)]('p');_0x54ecc6[_0x4355a9(0xb36)](_0x2f4d2b=>_0x2f4d2b[_0x4355a9(0xa19)]['remove'](_0x4355a9(0x215)));const _0x367b91=document[_0x4355a9(0x51d)](_0x4355a9(0x2cf)+_0x14aa51);_0x367b91&&(_0x367b91[_0x4355a9(0xa19)][_0x4355a9(0x25d)](_0x4355a9(0x215)),_0x367b91[_0x4355a9(0x1a0)]({'behavior':_0x4355a9(0x972),'block':_0x4355a9(0xcc6)}));}}}_0x184866[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0xa2ee6c=_0x3b741d;_0x3bf5a4[_0xa2ee6c(0xa19)][_0xa2ee6c(0xab0)]('show'),setTimeout(()=>_0x3bf5a4[_0xa2ee6c(0x1e2)][_0xa2ee6c(0x930)]=_0xa2ee6c(0x2f6),0x12c);}),document['getElementById']('music-widget-card')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x4926e8=_0x3b741d;_0x543bea[_0x4926e8(0xba0)]&&_0x543bea[_0x4926e8(0xba0)][_0x4926e8(0x8ce)]&&(_0x3bf5a4[_0x4926e8(0x1e2)]['display']='flex',setTimeout(()=>_0x3bf5a4[_0x4926e8(0xa19)][_0x4926e8(0x25d)]('show'),0xa));}),_0x44ee83[_0x3b741d(0xbc8)]('timeupdate',_0x19318d);const _0x4b5675=document[_0x3b741d(0x51d)](_0x3b741d(0x8b6)),_0x2d97df=document[_0x3b741d(0x51d)](_0x3b741d(0xa25)),_0x52e7ef=document[_0x3b741d(0x51d)](_0x3b741d(0x909));_0x4b5675[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x4193ad=_0x3b741d;if(_0x4193ad(0x71f)!==_0x4193ad(0x71f))_0x3ff0a8[_0x4193ad(0xb1e)]('切换聊天时发生异步错误:',_0x450259),_0xce8260(_0x4193ad(0xcf1)+_0x330e0d[_0x4193ad(0x979)]);else{if(_0x44ee83[_0x4193ad(0x2d9)]){if(_0x4193ad(0xa2c)!==_0x4193ad(0xa2c))_0x38d901[_0x4193ad(0xa61)][_0x4193ad(0xb43)](_0x5b2c28['currentDate'][_0x4193ad(0xc3f)]()+0x1),_0x4ba88d();else{if(_0x44ee83[_0x4193ad(0xc6e)]){if(_0x4193ad(0x610)!==_0x4193ad(0x4ae))_0x44ee83[_0x4193ad(0x152)]();else{_0x22278c=_0x414f5a(_0x1314b4);if(!_0x56899e)throw new _0xa5b0f9(_0x4193ad(0x53f));}}else _0x44ee83[_0x4193ad(0x939)]();}}}}),_0x2d97df[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x384873=_0x3b741d;if(_0x5d9664[_0x384873(0xc1f)]===0x0)return;_0x240573=(_0x240573+0x1)%_0x5d9664[_0x384873(0xc1f)],_0x401b2c(_0x5d9664[_0x240573],_0x5d9664);}),_0x52e7ef[_0x3b741d(0xbc8)]('click',()=>{const _0x88f881=_0x3b741d;if(_0x88f881(0xa6c)===_0x88f881(0x2fe))_0x42ab93[_0x88f881(0xb1e)](_0x88f881(0x9a2),_0x2c2e2f);else{if(_0x5d9664[_0x88f881(0xc1f)]===0x0)return;_0x240573=(_0x240573-0x1+_0x5d9664['length'])%_0x5d9664['length'],_0x401b2c(_0x5d9664[_0x240573],_0x5d9664);}}),_0x44ee83['addEventListener'](_0x3b741d(0x152),()=>{_0x4b5675['textContent']='❚❚';}),_0x44ee83['addEventListener'](_0x3b741d(0x939),()=>{_0x4b5675['textContent']='▶';}),_0x44ee83[_0x3b741d(0xbc8)]('ended',()=>{const _0x12b2f3=_0x3b741d;_0x2d97df[_0x12b2f3(0x779)]();}),_0x44ee83['addEventListener'](_0x3b741d(0x152),()=>{const _0x2904c8=_0x3b741d,_0x3535de=document['getElementById'](_0x2904c8(0x6c8));if(_0x3535de)_0x3535de[_0x2904c8(0x32a)]='❚❚';}),_0x44ee83[_0x3b741d(0xbc8)](_0x3b741d(0x939),()=>{const _0x128da6=_0x3b741d,_0x31177d=document[_0x128da6(0x51d)](_0x128da6(0x6c8));if(_0x31177d)_0x31177d['textContent']='▶';}),_0x44ee83[_0x3b741d(0xbc8)](_0x3b741d(0x943),()=>{const _0x4a761d=_0x3b741d,_0x49b416=document['getElementById'](_0x4a761d(0x1e6));_0x49b416&&_0x49b416[_0x4a761d(0x779)]();});function _0x1b43f8(_0x75384f){const _0x26fd0c=_0x3b741d;if(!_0x75384f||typeof _0x75384f!=='string')return null;const _0x220721=_0x75384f['indexOf']('['),_0x10e875=_0x75384f['lastIndexOf'](']');if(_0x220721>-0x1&&_0x10e875>_0x220721){if('XLuaQ'!==_0x26fd0c(0x4c0))return _0x75384f['substring'](_0x220721,_0x10e875+0x1);else _0x37f0f5=_0x1d5038[_0x26fd0c(0x576)](_0x4a575b);}return null;}document['getElementById'](_0x3b741d(0x97d))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0xef4bd1=_0x3b741d;_0x25c471(),_0x53ffb2(_0xef4bd1(0x4e3),_0xef4bd1(0x3fb));}),document[_0x3b741d(0x51d)]('back-to-home-from-accounting')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>_0x53ffb2(_0x3b741d(0x3fb),_0x3b741d(0x4e3)));const _0x150cdf=document[_0x3b741d(0x51d)](_0x3b741d(0x9e1)),_0x3939a4=document[_0x3b741d(0x51d)]('tab-view-ledger');_0x150cdf[_0x3b741d(0xbc8)](_0x3b741d(0x779),_0x25c471),_0x3939a4['addEventListener'](_0x3b741d(0x779),()=>{const _0x105746=_0x3b741d;if(_0x105746(0x4cb)===_0x105746(0x310)){const _0xd1e6c7=new _0x131f48(_0x26fb37['timestamp']),_0x27bd37=_0xd1e6c7[_0x105746(0x5f6)]()+'-'+_0x646eaa(_0xd1e6c7[_0x105746(0xc3f)]()+0x1)['padStart'](0x2,'0')+'-'+_0x39d55e(_0xd1e6c7[_0x105746(0x3d6)]())[_0x105746(0xa9f)](0x2,'0'),_0x213207=_0x108603(_0xd1e6c7[_0x105746(0x8bb)]())['padStart'](0x2,'0')+':'+_0x25c9e5(_0xd1e6c7[_0x105746(0x5f9)]())['padStart'](0x2,'0');let _0x136779='未知';_0x49f217[_0x105746(0xcd4)]===_0x105746(0x8ed)?_0x136779=_0x5a8c26['name']:_0x136779=_0x2590fc[_0x105746(0x41a)];let _0x53ce19=_0x418016[_0x105746(0x297)];if(_0x4ebe4e[_0x105746(0x3b2)])_0x53ce19=_0x105746(0x78e);if(_0x2c4443[_0x105746(0x7c2)])_0x53ce19='[发送了图片]';return'['+_0x27bd37+'\x20'+_0x213207+_0x105746(0x98c)+_0x136779+_0x105746(0x578)+_0x53ce19;}else _0x150cdf[_0x105746(0xa19)][_0x105746(0xab0)](_0x105746(0x215)),_0x3939a4[_0x105746(0xa19)][_0x105746(0x25d)](_0x105746(0x215)),_0x4f90e2();});function _0x25c471(){const _0x3cb7f9=_0x3b741d;_0x3939a4[_0x3cb7f9(0xa19)][_0x3cb7f9(0xab0)](_0x3cb7f9(0x215)),_0x150cdf[_0x3cb7f9(0xa19)]['add'](_0x3cb7f9(0x215)),_0x2ad5b2();}function _0x2ad5b2(){const _0x1a1634=_0x3b741d,_0x2fe863=document[_0x1a1634(0x51d)](_0x1a1634(0x63e));document[_0x1a1634(0x51d)](_0x1a1634(0x7fc))['textContent']=_0x1a1634(0x5d9),document[_0x1a1634(0x51d)](_0x1a1634(0x960))[_0x1a1634(0x4d5)]='',_0x2fe863['innerHTML']='<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>',_0x125c70(),document[_0x1a1634(0x51d)](_0x1a1634(0x163))[_0x1a1634(0xbc8)](_0x1a1634(0x779),_0x2e46ad),document[_0x1a1634(0x51d)]('daily-expenses-list')[_0x1a1634(0xbc8)](_0x1a1634(0x779),_0x51dad6=>{const _0x5803cf=_0x1a1634;if('LogCN'===_0x5803cf(0x766)){if(_0x51dad6[_0x5803cf(0x446)]['classList'][_0x5803cf(0x9ff)](_0x5803cf(0x47d))){if(_0x5803cf(0x308)==='UDyEL'){const _0x4785af=_0x54fcc5[_0x5803cf(0x23f)]('option');_0x4785af[_0x5803cf(0x90f)]=_0x45f915['id'],_0x4785af[_0x5803cf(0x32a)]=_0x3d33a0[_0x5803cf(0x41a)],_0xa9fc4c[_0x5803cf(0x83b)](_0x4785af);}else{const _0x1e87b6=_0x51dad6[_0x5803cf(0x446)]['dataset']['id'];_0x44efa2(_0x5803cf(0x9d1))['then'](_0x478b38=>{const _0x55a3e5=_0x5803cf;_0x55a3e5(0xd40)!==_0x55a3e5(0x290)?_0x478b38&&_0x142abe(_0x1e87b6):_0x1c2d72[_0x55a3e5(0x51d)](_0x55a3e5(0xb4d)+_0x3c1f7e+_0x55a3e5(0x19d))[_0x55a3e5(0x1e2)]['backgroundImage']='url(\x27'+_0x47c6ca[_0x55a3e5(0xcb2)](_0x404b20)+'\x27)';});}}}else _0x846e2(_0x38d6e3[_0x5803cf(0x80c)],_0x5b1b60[_0x5803cf(0x6c0)]);}),document[_0x1a1634(0x51d)](_0x1a1634(0x3be))[_0x1a1634(0x72b)]();}function _0x42b3f8(_0x3e3545,_0x2d504b){const _0x21503b=_0x3b741d;if(_0x21503b(0xc0c)===_0x21503b(0x613)){const _0x3cec6=_0x271b17[_0x21503b(0x95c)](_0x1c2ede),_0x14e5c1=0.4,_0x950d5c=_0x40c67f[_0x21503b(0x660)](_0x3cec6,_0x14e5c1)*0x14;_0x39d877[_0x21503b(0x1e2)][_0x21503b(0x424)]=_0x21503b(0xac9)+_0x950d5c+_0x21503b(0xad8);}else{const _0xcd1204=document['getElementById'](_0x21503b(0x63e)),_0x2e668a=document['getElementById'](_0x21503b(0x960));document['getElementById'](_0x21503b(0x7fc))[_0x21503b(0x32a)]=_0x2d504b+_0x21503b(0x727);const _0x38cdf1=_0x3e3545['categorizedExpenses']['reduce']((_0x113cd9,_0x54ca97)=>_0x113cd9+(_0x54ca97[_0x21503b(0x650)]||0x0),0x0);let _0x21bdb3=_0x21503b(0x1ec)+_0x38cdf1[_0x21503b(0xb7b)](0x2)+_0x21503b(0x701);_0xcd1204[_0x21503b(0x4d5)]=_0x21bdb3;const _0x2296bb=document[_0x21503b(0x51d)](_0x21503b(0x81e)),_0x256f05={'餐饮美食':_0x21503b(0x672),'交通出行':_0x21503b(0x281),'购物消费':'<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','生活服务':_0x21503b(0x93d),'休闲娱乐':_0x21503b(0x4d1),'医疗健康':_0x21503b(0xc32),'人情红包':_0x21503b(0xb98),'其他杂项':_0x21503b(0x29a),'默认':_0x21503b(0x404)};_0x3e3545[_0x21503b(0x64a)][_0x21503b(0xb36)](_0x55ea68=>{const _0x3de29b=_0x21503b;if(_0x3de29b(0x3e8)===_0x3de29b(0x314))_0x12454d[_0x3de29b(0xb1e)](_0x3de29b(0x47b),_0x20204a);else{const _0x41fe30=document[_0x3de29b(0x23f)](_0x3de29b(0xaee));_0x41fe30[_0x3de29b(0xa9d)]='expense-item',_0x41fe30['style'][_0x3de29b(0xd44)]=_0x3de29b(0x7c1),_0x41fe30['style'][_0x3de29b(0x1e7)]=_0x3de29b(0xb2b),_0x41fe30[_0x3de29b(0x1e2)][_0x3de29b(0x940)]=_0x3de29b(0xcaf),_0x41fe30['style']['gap']='0';const _0x192e16=_0x256f05[_0x55ea68[_0x3de29b(0x131)]]||_0x256f05['默认'],_0x4a1412='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>'+_0x192e16+_0x3de29b(0xc04),_0x512b3e=_0x3de29b(0xb5b)+_0x4a1412+_0x3de29b(0x32c)+_0x55ea68[_0x3de29b(0x11a)]+'</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>'+(_0x55ea68[_0x3de29b(0x131)]||'未分类')+'</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20'+(_0x55ea68[_0x3de29b(0x650)]||0x0)[_0x3de29b(0xb7b)](0x2)+_0x3de29b(0x478);let _0x118526='';if(_0x55ea68[_0x3de29b(0xa93)]&&_0x55ea68[_0x3de29b(0xa93)][_0x3de29b(0x37d)]){const _0xc2a0d6=_0x509294(_0x55ea68[_0x3de29b(0xa93)]['charId']);if(_0xc2a0d6){if(_0x3de29b(0xbd6)!==_0x3de29b(0x323))_0x118526=_0x3de29b(0x6a4)+_0xc2a0d6[_0x3de29b(0x5ec)]+_0x3de29b(0x73a)+_0xc2a0d6[_0x3de29b(0x41a)]+_0x3de29b(0x9a5)+_0x55ea68[_0x3de29b(0xa93)][_0x3de29b(0x685)]+_0x3de29b(0x87e);else{const _0x4362b1=_0x47304b['characters'][_0x3de29b(0xbe8)](_0x538df1=>_0x538df1['id']===_0x4779cb);_0x4362b1&&_0x185b3a['assign'](_0x4362b1,_0x255ac1);}}}_0x41fe30[_0x3de29b(0x4d5)]=_0x512b3e+_0x118526,_0x2296bb[_0x3de29b(0x83b)](_0x41fe30);}}),_0x2e668a[_0x21503b(0x4d5)]=_0x21503b(0x1ce),document[_0x21503b(0x51d)](_0x21503b(0xced))[_0x21503b(0xbc8)](_0x21503b(0x779),async()=>{const _0x212816=_0x21503b;if(_0x212816(0xa39)!==_0x212816(0x6bd)){const _0x23b935=await _0x44efa2(_0x212816(0xa05));if(_0x23b935){const _0xea018c=_0x543bea['accountingLedger'][_0x2d504b];_0xea018c&&_0xea018c[_0x212816(0xb9e)]&&(_0x212816(0xb79)==='igLQY'?_0x2f4f1a['linkedWorldBookIds']&&_0x4b8fdc[_0x212816(0xc49)][_0x212816(0xc1f)]>0x0&&(_0x244ba4[_0x212816(0xc49)]=_0x3c0908['linkedWorldBookIds'][_0x212816(0x78c)](_0x9877d1=>!_0x52a647[_0x212816(0x32d)](_0x9877d1))):_0x543bea[_0x212816(0x1d2)][_0x212816(0xb47)](..._0xea018c[_0x212816(0xb9e)])),delete _0x543bea[_0x212816(0x43a)][_0x2d504b],_0x1a0f1f(),_0x2ad5b2();}}else _0x2a873e(_0x212816(0xad3)+_0x4e49f9['message']);});}}function _0x4f90e2(){const _0x4a240c=_0x3b741d,_0x2fa006=document[_0x4a240c(0x51d)](_0x4a240c(0x63e));document['getElementById'](_0x4a240c(0x7fc))[_0x4a240c(0x32a)]='账本',document[_0x4a240c(0x51d)](_0x4a240c(0x960))['innerHTML']='';const _0x28184b=Object[_0x4a240c(0x4fa)](_0x543bea['accountingLedger'])[_0x4a240c(0xb3d)]((_0x3f2058,_0x281f38)=>new Date(_0x281f38)-new Date(_0x3f2058));let _0x296169=_0x4a240c(0x4c8);if(_0x28184b[_0x4a240c(0xc1f)]===0x0){if(_0x4a240c(0x824)===_0x4a240c(0x824))_0x296169+=_0x4a240c(0x6b3);else{const _0x60d05a=_0x48c2c2[_0x4a240c(0x51d)](_0x4a240c(0x69b));if(!_0x60d05a)return;const _0x3fe409=_0x3d893c(),_0x26c1dd=_0x30a5fc[_0x4a240c(0x21c)][_0x4a240c(0x78c)](_0x3eea05=>_0x3eea05[_0x4a240c(0x637)]===_0x3fe409&&_0x3eea05[_0x4a240c(0x711)]===_0x4a240c(0x3ed));_0x60d05a[_0x4a240c(0x4d5)]='',_0x26c1dd[_0x4a240c(0xc1f)]>0x0?_0x26c1dd[_0x4a240c(0xb36)](_0x12f28a=>{const _0x1082b8=_0x4a240c,_0x4f5946=_0xd997c6[_0x1082b8(0x23f)](_0x1082b8(0xaee));_0x4f5946[_0x1082b8(0xa9d)]='todo-item-small',_0x4f5946['textContent']=_0x12f28a[_0x1082b8(0x297)],_0x60d05a['appendChild'](_0x4f5946);}):_0x60d05a[_0x4a240c(0x4d5)]=_0x4a240c(0x837);}}else _0x28184b[_0x4a240c(0xb36)](_0x982af9=>{const _0x3c6507=_0x4a240c;if(_0x3c6507(0x7fe)!==_0x3c6507(0xcb9)){const _0x220637=_0x543bea[_0x3c6507(0x43a)][_0x982af9],_0x5a5e71=_0x220637[_0x3c6507(0x64a)][_0x3c6507(0x8ea)]((_0x26871b,_0xaf4597)=>_0x26871b+(_0xaf4597[_0x3c6507(0x650)]||0x0),0x0);_0x296169+=_0x3c6507(0x90d)+_0x982af9+'\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>'+_0x982af9+_0x3c6507(0x1e4)+_0x5a5e71[_0x3c6507(0xb7b)](0x2)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}else _0x51095b[_0x3c6507(0x1e2)][_0x3c6507(0x48e)]='1';});_0x2fa006[_0x4a240c(0x4d5)]=_0x296169,document['getElementById']('export-accounting-btn')[_0x4a240c(0xbc8)](_0x4a240c(0x779),_0x11fa65),document[_0x4a240c(0x51d)](_0x4a240c(0xc9c))[_0x4a240c(0xbc8)](_0x4a240c(0x779),()=>{const _0x2cb9bf=_0x4a240c;document[_0x2cb9bf(0x51d)](_0x2cb9bf(0x3b4))[_0x2cb9bf(0x779)]();}),_0x2fa006[_0x4a240c(0x5c4)]('.ledger-item')['forEach'](_0x367e8f=>{const _0x3146c4=_0x4a240c;'PReNc'!==_0x3146c4(0x16f)?_0x367e8f[_0x3146c4(0xbc8)](_0x3146c4(0x779),_0x3445b6=>{const _0x446f4b=_0x3146c4,_0x41f0e6=_0x3445b6[_0x446f4b(0xc08)][_0x446f4b(0xa24)][_0x446f4b(0x637)],_0x1f0b97=_0x543bea[_0x446f4b(0x43a)][_0x41f0e6];_0x1f0b97&&_0x42b3f8(_0x1f0b97,_0x41f0e6);}):_0x38c0e9(_0x3146c4(0x781)+_0x28bb26[_0x3146c4(0x979)]);});}function _0x2e46ad(){const _0x16d7af=_0x3b741d;if(_0x16d7af(0x863)!==_0x16d7af(0x863)){const _0x88d3d0=_0x3b25ea[_0x16d7af(0x23f)]('div');_0x88d3d0['className']=_0x5887dc[_0x16d7af(0x711)]==='important'?'important-day-item':_0x16d7af(0x7bf),_0x88d3d0[_0x16d7af(0x32a)]=_0x4b5403[_0x16d7af(0x297)],_0x88d3d0[_0x16d7af(0xa24)]['id']=_0x2b1737['id'],_0x162030[_0x16d7af(0x83b)](_0x88d3d0);}else{const _0x470826=document['getElementById']('expense-description'),_0x34570a=document[_0x16d7af(0x51d)](_0x16d7af(0x30b)),_0x6154d7=_0x470826[_0x16d7af(0x90f)][_0x16d7af(0xad4)](),_0x2c74e3=parseFloat(_0x34570a[_0x16d7af(0x90f)]);if(!_0x6154d7||isNaN(_0x2c74e3)||_0x2c74e3<=0x0){_0x48e450(_0x16d7af(0x179));return;}_0x543bea[_0x16d7af(0x1d2)][_0x16d7af(0xb47)]({'id':_0x16d7af(0x9fe)+Date[_0x16d7af(0x63d)](),'description':_0x6154d7,'amount':_0x2c74e3,'timestamp':Date['now']()}),_0x1a0f1f(),_0x125c70(),_0x470826['value']='',_0x34570a[_0x16d7af(0x90f)]='',_0x470826[_0x16d7af(0x72b)]();}}function _0x142abe(_0x2325c0){const _0x19bd68=_0x3b741d;if(_0x19bd68(0x4f8)!=='kPFyP'){_0x31bca6('AI似乎没有想出任何新动态。');return;}else{const _0x4d7b68=_0x543bea[_0x19bd68(0x1d2)][_0x19bd68(0xc58)](_0x195f10=>_0x195f10['id']===_0x2325c0);_0x4d7b68>-0x1&&(_0x543bea['accountingData'][_0x19bd68(0x278)](_0x4d7b68,0x1),_0x1a0f1f(),_0x125c70());}}function _0x125c70(){const _0x499d4e=_0x3b741d,_0x137b3f=document['getElementById'](_0x499d4e(0x7dc)),_0x4e2ecd=document[_0x499d4e(0x51d)](_0x499d4e(0x93a)),_0x1d4321=new Date(),_0x255454=_0x543bea[_0x499d4e(0x1d2)][_0x499d4e(0x78c)](_0x135a18=>new Date(_0x135a18[_0x499d4e(0x11f)])[_0x499d4e(0xb12)]()===_0x1d4321[_0x499d4e(0xb12)]());if(_0x255454[_0x499d4e(0xc1f)]===0x0){if('xnZDF'!=='xnZDF')_0x3943e0(_0x224819),_0x43dce5();else{_0x137b3f[_0x499d4e(0x4d5)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0x4e2ecd[_0x499d4e(0x4d5)]='';return;}}_0x137b3f[_0x499d4e(0x4d5)]='',_0x255454[_0x499d4e(0xb3d)]((_0x56f62d,_0x386ac3)=>_0x386ac3[_0x499d4e(0x11f)]-_0x56f62d[_0x499d4e(0x11f)])[_0x499d4e(0xb36)](_0x8e592d=>{const _0x1700c2=_0x499d4e,_0x4928f9=document[_0x1700c2(0x23f)](_0x1700c2(0xaee));_0x4928f9[_0x1700c2(0xa9d)]=_0x1700c2(0x86b),_0x4928f9['innerHTML']=_0x1700c2(0x829)+_0x8e592d[_0x1700c2(0x11a)]+'</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20'+_0x8e592d[_0x1700c2(0x650)]['toFixed'](0x2)+'</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22'+_0x8e592d['id']+_0x1700c2(0x9d8),_0x137b3f['appendChild'](_0x4928f9);}),_0x4e2ecd&&(_0x4e2ecd[_0x499d4e(0x4d5)]=_0x499d4e(0x900),document[_0x499d4e(0x51d)](_0x499d4e(0x41d))[_0x499d4e(0xbc8)](_0x499d4e(0x779),_0x29c85f));}async function _0x29c85f(){const _0x23fa3e=_0x3b741d;if('kFMos'===_0x23fa3e(0x845)){_0x226ca9[_0x23fa3e(0x4d5)]=_0x23fa3e(0xa52);return;}else{const _0x21d978=new Date(),_0x4affa3=_0x21d978[_0x23fa3e(0x5f6)]()+'-'+String(_0x21d978[_0x23fa3e(0xc3f)]()+0x1)[_0x23fa3e(0xa9f)](0x2,'0')+'-'+String(_0x21d978['getDate']())[_0x23fa3e(0xa9f)](0x2,'0');if(_0x543bea[_0x23fa3e(0x43a)][_0x4affa3]){_0x48e450(_0x23fa3e(0x620));return;}const _0x3bbdc6=_0x543bea[_0x23fa3e(0x1d2)]['filter'](_0x27c3a2=>new Date(_0x27c3a2[_0x23fa3e(0x11f)])[_0x23fa3e(0xb12)]()===_0x21d978[_0x23fa3e(0xb12)]());if(_0x3bbdc6[_0x23fa3e(0xc1f)]===0x0){_0x48e450(_0x23fa3e(0x952));return;}_0x2ee484(!![],_0x23fa3e(0x649));try{if(_0x23fa3e(0x2c3)!==_0x23fa3e(0x2c3)){const _0x343125=_0x320071[_0x23fa3e(0x446)][_0x23fa3e(0x730)][0x0];if(!_0x343125)return;const _0x51511b=_0x2848bc[_0x23fa3e(0xcb2)](_0x343125);_0x189cf2[_0x23fa3e(0x2d9)]=_0x51511b,_0x4b7054[_0x23fa3e(0x14a)]=()=>{const _0x58b92e=_0x23fa3e;_0x30f479[_0x58b92e(0x6eb)](_0x51511b);};}else{const _0x23b00e=[_0x23fa3e(0x7b9),_0x23fa3e(0x392),_0x23fa3e(0xbd3),_0x23fa3e(0x2d3),_0x23fa3e(0x269),_0x23fa3e(0xb22),_0x23fa3e(0x7ba),'其他杂项'],_0x52ae98=_0x3bbdc6[_0x23fa3e(0x257)](_0x4e9923=>'-\x20'+_0x4e9923['description']+':\x20'+_0x4e9923[_0x23fa3e(0x650)])['join']('\x0a'),_0x10a190=_0x543bea['characters'][_0x23fa3e(0x257)](_0x5ccb79=>{const _0x30d5c1=_0x23fa3e,_0x5b0946=_0x543bea[_0x30d5c1(0x94b)][_0x30d5c1(0xbe8)](_0x31f0e7=>_0x31f0e7[_0x30d5c1(0x711)]===_0x30d5c1(0x5fc)&&_0x31f0e7['participantIds'][_0x30d5c1(0x32d)](_0x5ccb79['id'])),_0x3b5bec=_0x543bea['userProfiles'][_0x30d5c1(0xbe8)](_0x48e745=>_0x48e745['id']===(_0x5b0946?.[_0x30d5c1(0x16c)]||_0x543bea['activeUserProfileId']))||{'id':_0x30d5c1(0x65a),'name':'你'};let _0x5ae8e9='';return _0x5ccb79[_0x30d5c1(0xc49)]&&_0x5ccb79[_0x30d5c1(0xc49)]['length']>0x0&&(_0x5ae8e9=_0x5ccb79[_0x30d5c1(0xc49)][_0x30d5c1(0x257)](_0x3029c5=>_0x543bea['worldBooks']['find'](_0x493e0f=>_0x493e0f['id']===_0x3029c5))[_0x30d5c1(0x78c)](Boolean)['map'](_0x503c1b=>_0x30d5c1(0x53b)+_0x503c1b[_0x30d5c1(0x41a)]+']:\x20'+_0x503c1b[_0x30d5c1(0x297)])['join']('')),_0x30d5c1(0x7ac)+_0x5ccb79['id']+'\x0a\x20\x20\x20\x20姓名:\x20'+_0x5ccb79[_0x30d5c1(0x41a)]+_0x30d5c1(0xa5c)+_0x5ccb79[_0x30d5c1(0x367)]+'\x0a\x20\x20\x20\x20绑定用户:\x20'+_0x3b5bec[_0x30d5c1(0x41a)]+'\x20(ID:\x20'+_0x3b5bec['id']+')\x0a'+_0x5ae8e9;})['join']('\x0a'),_0x540991=_0x543bea[_0x23fa3e(0x7e7)][_0x23fa3e(0x257)](_0x4d0466=>_0x23fa3e(0x3f2)+_0x4d0466['id']+_0x23fa3e(0x255)+_0x4d0466['name']+_0x23fa3e(0xa5c)+(_0x4d0466[_0x23fa3e(0x367)]||'无'))['join']('\x0a'),_0x2658e3='#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。',_0x325a74=_0x23fa3e(0xbd5)+_0x23b00e[_0x23fa3e(0x4db)](',\x20')+_0x23fa3e(0x6f4)+_0x10a190+'\x0a\x0a#\x20用户资料库\x0a'+_0x540991+_0x23fa3e(0xac1)+_0x52ae98,_0x21fe91=[{'role':_0x23fa3e(0xacc),'content':_0x2658e3},{'role':_0x23fa3e(0x8ed),'content':_0x325a74}],_0x3d7cf2=await _0x3a4cad(_0x21fe91,{'json':!![]}),_0x2e5972=_0x1b43f8(_0x3d7cf2);if(!_0x2e5972)throw new Error(_0x23fa3e(0x5c7)+_0x3d7cf2);const _0x2ae3c3=JSON['parse'](_0x2e5972);_0x543bea['accountingLedger'][_0x4affa3]={'categorizedExpenses':_0x2ae3c3,'timestamp':Date[_0x23fa3e(0x63d)](),'originalExpenses':_0x3bbdc6},_0x543bea['accountingData']=_0x543bea['accountingData']['filter'](_0x48fa13=>new Date(_0x48fa13['timestamp'])['toDateString']()!==_0x21d978[_0x23fa3e(0xb12)]()),_0x1a0f1f(),_0x42b3f8(_0x543bea[_0x23fa3e(0x43a)][_0x4affa3],_0x4affa3);}}catch(_0x450151){_0x48e450(_0x23fa3e(0xc89)+_0x450151['message']);}finally{_0x2ee484(![]);}}}async function _0x1b22eb(){const _0x412b90=_0x3b741d;_0x137aaf();(!_0x543bea[_0x412b90(0x4a4)]||_0x543bea['worldBookCategories']['length']===0x0)&&(_0x543bea[_0x412b90(0x4a4)]=[{'id':_0x412b90(0x65a),'name':_0x412b90(0xba7)}],_0x543bea[_0x412b90(0x41e)]['forEach'](_0x11f796=>{const _0x3b2d48=_0x412b90;if(_0x3b2d48(0x896)==='JVdIH'){if(!_0x11f796['categoryId']){if(_0x3b2d48(0x784)===_0x3b2d48(0x718)){const _0x1d4999=_0x1509fe[_0x3b2d48(0x2bf)]('--');_0x1d4999[_0x3b2d48(0xc1f)]===0x2&&_0x1d4999[0x0][_0x3b2d48(0xad4)]()&&_0x1d4999[0x1][_0x3b2d48(0xad4)]()[_0x3b2d48(0xca0)](_0x3b2d48(0xa42))?_0x438815[_0x3b2d48(0xb47)]({'name':_0x1d4999[0x0][_0x3b2d48(0xad4)](),'url':_0x1d4999[0x1]['trim']()}):_0xd2c894++;}else _0x11f796['categoryId']=_0x3b2d48(0x65a);}}else _0x2f40a7(_0x25f5bc['id']);}));const _0x2394d8=[..._0x184821];try{const _0x1abc86=localStorage[_0x412b90(0x760)]('customStickers');if(_0x1abc86){if(_0x412b90(0x289)!=='xtTlg'){const _0x28dfe3=JSON['parse'](_0x1abc86);if(Array[_0x412b90(0x8e1)](_0x28dfe3)){if('jCTqO'!==_0x412b90(0x592)){const _0x22f0b1=_0x55981f[_0x412b90(0x1d2)][_0x412b90(0xc58)](_0xac7854=>_0xac7854['id']===_0x4311cc);_0x22f0b1>-0x1&&(_0x864187[_0x412b90(0x1d2)][_0x412b90(0x278)](_0x22f0b1,0x1),_0x45e396(),_0x3efe93());}else _0x376928=[..._0x2394d8,..._0x28dfe3];}else{if(_0x412b90(0x3d2)===_0x412b90(0x6f6)){const _0x1482e3=_0x4546ea[_0x412b90(0x51d)](_0x412b90(0x3be)),_0x2e204c=_0x5ccc26[_0x412b90(0x51d)]('expense-amount'),_0x5f1e4a=_0x1482e3[_0x412b90(0x90f)][_0x412b90(0xad4)](),_0x50c551=_0x5400ce(_0x2e204c[_0x412b90(0x90f)]);if(!_0x5f1e4a||_0x171d50(_0x50c551)||_0x50c551<=0x0){_0x28a01d(_0x412b90(0x179));return;}_0x58fcb6[_0x412b90(0x1d2)][_0x412b90(0xb47)]({'id':'exp_'+_0x406b18['now'](),'description':_0x5f1e4a,'amount':_0x50c551,'timestamp':_0x3656dc[_0x412b90(0x63d)]()}),_0x3b1c71(),_0x1aaede(),_0x1482e3['value']='',_0x2e204c[_0x412b90(0x90f)]='',_0x1482e3[_0x412b90(0x72b)]();}else _0x376928=_0x2394d8;}}else _0x39a04c[_0x412b90(0x32a)]='▶';}else'rjbjc'!==_0x412b90(0x537)?_0x376928=_0x2394d8:(_0x4647a6=_0x4f9db4['touches']?_0x21fd4d[_0x412b90(0xd1d)][0x0][_0x412b90(0x496)]:_0x5a09fc[_0x412b90(0x496)],_0x55c765=0x0,_0x1efa95[_0x412b90(0x1e2)][_0x412b90(0xb9c)]=_0x412b90(0x2f6),_0x4ab50e=!![],_0x97f002['type']===_0x412b90(0x57e)&&(_0x59b817['addEventListener']('mousemove',_0x5d1040),_0xdf91cb[_0x412b90(0xbc8)](_0x412b90(0xb0e),_0x1fc4fc)));}catch(_0x4d49f3){_0x412b90(0xa9e)!==_0x412b90(0x800)?(console[_0x412b90(0xb1e)]('加载自定义表情包失败，真是没用。',_0x4d49f3),_0x376928=_0x2394d8):(_0x59c876['style'][_0x412b90(0x911)]=_0x412b90(0x92a),_0x57ba4f[_0x412b90(0x1e2)][_0x412b90(0x49b)]='0\x202px\x208px\x20rgba(0,0,0,0.4)');}if(!localStorage['getItem']('noir_data_migration_v1_complete')){if(_0x412b90(0x63a)!==_0x412b90(0x1a6)){_0x44efa2(_0x412b90(0x9c4))['then'](async _0x55bbf7=>{const _0x168310=_0x412b90;_0x168310(0xc17)!=='iwqmu'?_0x58e00d[_0x168310(0xb47)](_0x5c2d4e):_0x55bbf7?(_0x2ee484(!![],'正在升级聊天数据结构...'),await _0x3fa0dc(),localStorage['setItem'](_0x168310(0x519),_0x168310(0x324)),_0x2ee484(![]),_0x48e450('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'),setTimeout(()=>location[_0x168310(0x5f2)](),0x5dc)):_0x48e450(_0x168310(0xacf));});return;}else _0x28854d[_0x412b90(0xa10)](),_0x27aba8(_0x137e42['id']);}if(!localStorage[_0x412b90(0x760)]('noir_migration_fc_v1_complete')){if(_0x412b90(0x221)===_0x412b90(0x8e0))return;else{console[_0x412b90(0x68b)](_0x412b90(0xa20)),_0x2ee484(!![],'正在检查好友圈数据...');const _0x857bc1=await _0x54ff63();localStorage[_0x412b90(0xa1c)]('noir_migration_fc_v1_complete',_0x412b90(0x324)),_0x2ee484(![]);if(_0x857bc1>0x0){_0x48e450(_0x412b90(0xbb4)+_0x857bc1+_0x412b90(0xab9)),setTimeout(()=>location['reload'](),0x5dc);return;}}}if(!localStorage[_0x412b90(0x760)](_0x412b90(0xcde))){}if(!localStorage[_0x412b90(0x760)](_0x412b90(0xcf7))){if(_0x412b90(0x782)===_0x412b90(0xcb7))_0x3ca527=_0x412b90(0x2ff);else{console['log'](_0x412b90(0x5d4)),_0x2ee484(!![],'正在升级音乐卡片数据...');const _0x18f014=await _0x2c7a98();localStorage[_0x412b90(0xa1c)]('noir_migration_music_v1_complete',_0x412b90(0x324)),_0x2ee484(![]);if(_0x18f014>0x0){_0x48e450('音乐数据升级完成，迁移了\x20'+_0x18f014+_0x412b90(0x359)),setTimeout(()=>location[_0x412b90(0x5f2)](),0x5dc);return;}}}if(!localStorage['getItem'](_0x412b90(0x30d))){const _0x2d1087=await _0x1df16c();localStorage[_0x412b90(0xa1c)]('noir_migration_avatar_v1_complete',_0x412b90(0x324));if(_0x2d1087>0x0){_0x48e450(_0x412b90(0xa80)+_0x2d1087+'\x20个旧头像。应用即将刷新。'),setTimeout(()=>location[_0x412b90(0x5f2)](),0x5dc);return;}}const _0x47db93=document[_0x412b90(0x51d)](_0x412b90(0x444));if(_0x47db93){if(_0x412b90(0x762)===_0x412b90(0x1cb))return _0x464d2e[_0x412b90(0x7e7)][_0x412b90(0xbe8)](_0x39ccec=>_0x39ccec['id']===_0x375875[_0x412b90(0x3fc)])||_0x1cf96c['userProfiles'][0x0];else _0x47db93[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x6eaaa2=_0x412b90;_0x3539ee(),_0x53ffb2(_0x6eaaa2(0x188),'home');});}else console[_0x412b90(0xb1e)](_0x412b90(0x499));const _0x229ce0=document[_0x412b90(0x51d)](_0x412b90(0x2ea));_0x229ce0&&_0x229ce0['addEventListener'](_0x412b90(0x779),()=>{const _0x9a583d=_0x412b90;_0x13c4d9(),_0x53ffb2('livestreamList',_0x9a583d(0x3fb));});const _0x42c652=document[_0x412b90(0x51d)](_0x412b90(0x95b)),_0x50b871=document[_0x412b90(0x51d)](_0x412b90(0x32e)),_0x4514da=document[_0x412b90(0x51d)](_0x412b90(0x7b1)),_0x1698e9=document[_0x412b90(0x51d)]('livestream-dm-backdrop'),_0x31a97b=document[_0x412b90(0x51d)](_0x412b90(0x818)),_0x5ec7dd=document[_0x412b90(0x51d)]('livestream-dm-input'),_0x51b9eb=document[_0x412b90(0x51d)](_0x412b90(0xcef));function _0x57aa13(_0x4fa1ba){const _0x4c3016=_0x412b90;_0x543bea[_0x4c3016(0xab2)]=_0x4fa1ba,_0x42c652[_0x4c3016(0xa19)]['toggle'](_0x4c3016(0x6db),_0x4fa1ba);if(_0x4fa1ba){if('DXZKj'===_0x4c3016(0x5a7)){_0x580c2e(_0x4c3016(0xbba));return;}else _0x543bea['hasNewDMReply']&&(_0x4c3016(0x9c7)==='sLfVJ'?(_0x543bea[_0x4c3016(0x9a8)]=![],_0x50b871[_0x4c3016(0xa19)][_0x4c3016(0xab0)](_0x4c3016(0x6d9))):_0x1accdd[_0x4c3016(0x83b)](_0x32966c[_0x4c3016(0x23f)](_0x4c3016(0xaee)))),_0x5ec7dd[_0x4c3016(0x72b)](),_0x59b508();}}_0x50b871[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x57aa13(!_0x543bea[_0x412b90(0xab2)])),_0x4514da['addEventListener']('click',()=>_0x57aa13(![])),_0x1698e9[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x57aa13(![]));function _0x59b508(){const _0x1f21b2=_0x412b90;_0x31a97b[_0x1f21b2(0x4d5)]='',_0x543bea[_0x1f21b2(0x1a2)][_0x1f21b2(0xb36)](_0x55efde=>{const _0x27aa6c=_0x1f21b2,_0xd9d4c3=document[_0x27aa6c(0x23f)](_0x27aa6c(0xaee));_0xd9d4c3['className']=_0x27aa6c(0x504)+_0x55efde[_0x27aa6c(0x433)],_0xd9d4c3[_0x27aa6c(0x32a)]=_0x55efde[_0x27aa6c(0x297)],_0x31a97b['appendChild'](_0xd9d4c3);}),_0x31a97b[_0x1f21b2(0xd3a)]=_0x31a97b['scrollHeight'];}function _0x2bd3a0(){const _0x2418c5=_0x412b90;if(_0x2418c5(0x5a9)===_0x2418c5(0x5a9)){const _0x540527=_0x5ec7dd[_0x2418c5(0x90f)][_0x2418c5(0xad4)]();if(!_0x540527)return;_0x543bea[_0x2418c5(0x1a2)][_0x2418c5(0xb47)]({'sender':_0x2418c5(0x8ed),'content':_0x540527}),_0x59b508();const _0x272fec={'type':'dm','content':_0x540527};_0x543bea[_0x2418c5(0x1ae)][_0x2418c5(0xb47)](_0x272fec),_0x5ec7dd[_0x2418c5(0x90f)]='',_0x5ec7dd[_0x2418c5(0x72b)]();}else _0x238164=_0x4a0a35[_0x2418c5(0x184)][0x0];}_0x51b9eb['addEventListener']('click',_0x2bd3a0),_0x5ec7dd['addEventListener']('keydown',_0x510b2c=>{const _0x3d0e0b=_0x412b90;_0x510b2c[_0x3d0e0b(0xc7f)]===_0x3d0e0b(0x778)&&(_0x510b2c[_0x3d0e0b(0x9cb)](),_0x2bd3a0());});const _0xeea420=document[_0x412b90(0x51d)](_0x412b90(0xcc8));_0xeea420[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x477174=_0x412b90;if(_0x477174(0x692)!==_0x477174(0x692))_0x413111(_0xe80d00[_0x477174(0x90f)]),_0xff92c3();else{const _0x50fa89={'type':_0x477174(0x54d),'name':_0x477174(0xb45),'count':0x1};_0x543bea[_0x477174(0x1ae)][_0x477174(0xb47)](_0x50fa89),_0x48e450('你送出了一朵\x20🌸小花花！');const _0xfafcb6=document[_0x477174(0x23f)](_0x477174(0xaee));_0xfafcb6[_0x477174(0x32a)]='🌸',_0xfafcb6[_0x477174(0x1e2)][_0x477174(0x9cf)]=_0x477174(0xc50),_0xfafcb6[_0x477174(0x1e2)][_0x477174(0x1f7)]=_0x477174(0x8bf),_0xfafcb6[_0x477174(0x1e2)][_0x477174(0xa12)]=Math[_0x477174(0x754)]()*0x50+0xa+'%',_0xfafcb6[_0x477174(0x1e2)]['fontSize']=_0x477174(0x440),_0xfafcb6[_0x477174(0x1e2)][_0x477174(0x48e)]='1',_0xfafcb6[_0x477174(0x1e2)][_0x477174(0xb9c)]=_0x477174(0x202),_0xfafcb6[_0x477174(0x1e2)][_0x477174(0x3e5)]=_0x477174(0x2f6),document[_0x477174(0x51d)]('livestream-main-view')[_0x477174(0x83b)](_0xfafcb6),setTimeout(()=>{const _0x50f364=_0x477174;if(_0x50f364(0xb9d)===_0x50f364(0xb9d))_0xfafcb6['style'][_0x50f364(0x424)]=_0x50f364(0x8e7),_0xfafcb6[_0x50f364(0x1e2)][_0x50f364(0x48e)]='0',setTimeout(()=>_0xfafcb6[_0x50f364(0xab0)](),0x7d0);else{_0x5f0927[_0x50f364(0x4d5)]=_0x50f364(0x45d);return;}},0x32);}});function _0x5f00dd(){const _0x2efbd7=_0x412b90;'OKjRp'!=='fRKJf'?_0x50b871['classList']['toggle'](_0x2efbd7(0x6d9),_0x543bea[_0x2efbd7(0x9a8)]):(_0x442950[_0x2efbd7(0xa6e)]=null,_0x1c4131['style'][_0x2efbd7(0x930)]='none');}async function _0x9aa77a(){const _0x183d0b=_0x412b90;if(_0x183d0b(0x57d)!=='towqt')return _0x183d0b(0x6ee)+_0x85f0fa;else{if(!_0x543bea[_0x183d0b(0x268)]||_0x543bea[_0x183d0b(0x383)][_0x183d0b(0xc1f)]===0x0){if('yeHNS'===_0x183d0b(0xc79)){console[_0x183d0b(0x68b)]('Noir\x27s\x20Log:\x20直播日志为空，没什么可总结的。');return;}else _0xab4619=_0x183d0b(0x64c);}_0x2ee484(!![],_0x183d0b(0xcc4));const _0x1cb531=_0x509294(_0x543bea[_0x183d0b(0x268)]),_0xcbf9e3=_0x2f2ed1(_0x543bea['activeChatId']);try{if(_0x183d0b(0x13c)==='FgwKF')_0x4953e3[_0x183d0b(0xc49)]=_0xb96612[_0x183d0b(0xc49)][_0x183d0b(0x78c)](_0xac31f7=>!_0x3494a5['includes'](_0xac31f7));else{const _0x6ad52f=new Date(),_0x479c88='\x0a#\x20时间锚点\x20(最高优先级)\x0a-\x20**当前时间**:\x20'+_0x6ad52f[_0x183d0b(0x5f4)]('zh-CN',{'dateStyle':'long','timeStyle':_0x183d0b(0x90a)})+_0x183d0b(0x518),_0x59607b=_0x543bea['currentLivestreamLog']['map'](_0x281d61=>{const _0x480b6c=_0x183d0b;if(_0x480b6c(0xb1b)!==_0x480b6c(0x8fa)){const _0x1176ba=new Date(_0x281d61['timestamp'])[_0x480b6c(0x864)]('zh-CN');if(_0x281d61['type']===_0x480b6c(0x416))return'['+_0x1176ba+_0x480b6c(0x516)+_0x281d61[_0x480b6c(0x319)]+_0x480b6c(0x578)+_0x281d61[_0x480b6c(0x297)];if(_0x281d61['type']===_0x480b6c(0xa3e))return'['+_0x1176ba+_0x480b6c(0x881)+_0x281d61[_0x480b6c(0x8ed)]+_0x480b6c(0x578)+(_0x281d61['comment']||_0x281d61['content']);if(_0x281d61[_0x480b6c(0x711)]===_0x480b6c(0x876))return'['+_0x1176ba+_0x480b6c(0xa60)+_0x281d61[_0x480b6c(0x382)]+_0x480b6c(0xd14)+_0x281d61['to']+']:\x20'+_0x281d61['content'];return'['+_0x1176ba+_0x480b6c(0x547)+JSON[_0x480b6c(0x427)](_0x281d61);}else _0x5d0274+=_0x480b6c(0x7c3)+_0x8b5f6(_0xe6f72c)+_0x480b6c(0xca2);})[_0x183d0b(0x4db)]('\x0a'),_0x58ade3='\x0a#\x20核心任务:\x20生成直播总结报告\x0a\x0a你是一名数据分析师，需要为“'+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0xd2f)+_0x479c88+_0x183d0b(0xba8)+_0x59607b+_0x183d0b(0x6d5)+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0x89d)+_0xcbf9e3[_0x183d0b(0x41a)]+_0x183d0b(0xcee)+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0x7e1)+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0x454)+_0xcbf9e3[_0x183d0b(0x41a)]+_0x183d0b(0x62c)+_0xcbf9e3['name']+_0x183d0b(0x678)+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0x381)+_0x1cb531[_0x183d0b(0x41a)]+_0x183d0b(0xac7),_0x2cfbdc=[{'role':'system','content':_0x58ade3}],_0x396df8=await _0x3a4cad(_0x2cfbdc);if(_0x396df8){const _0x191c7d=_0x396df8[_0x183d0b(0x6ac)](/```(?:yaml)?/g,'')[_0x183d0b(0xad4)]();!_0x543bea[_0x183d0b(0x226)][_0x1cb531['id']]&&(_0x543bea[_0x183d0b(0x226)][_0x1cb531['id']]=[]),_0x543bea[_0x183d0b(0x226)][_0x1cb531['id']][_0x183d0b(0x7ab)](_0x191c7d),_0x1a0f1f(),_0x48e450(_0x183d0b(0xb70));}}}catch(_0x51b502){_0x183d0b(0x1f2)!=='RYkKu'?(_0x411928='你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！',_0x5cd142=_0x183d0b(0x474)+_0x28b3f2+'\x0a```'):(console[_0x183d0b(0xb1e)](_0x183d0b(0xc28),_0x51b502),_0x48e450(_0x183d0b(0x846)+_0x51b502[_0x183d0b(0x979)]));}finally{if(_0x183d0b(0x4ff)===_0x183d0b(0x185)){const _0x107499=_0x4c3d73['currentDate'][_0x183d0b(0x5f6)](),_0x338940=_0x4c28c7[_0x183d0b(0xa61)][_0x183d0b(0xc3f)]();_0x15a23f[_0x183d0b(0x51d)](_0x183d0b(0x4ec))[_0x183d0b(0x32a)]=_0x107499+'年\x20'+(_0x338940+0x1)+'月',_0x43beaa(_0x107499,_0x338940),_0x157d5e(_0x47cb01[_0x183d0b(0x94e)]);}else _0x2ee484(![]);}}}let _0x316472={'charId':null,'index':-0x1};function _0x433cc1(_0x7f230b,_0x5c0b02,_0x5c5299){const _0x5e5acd=_0x412b90;if(window[_0x5e5acd(0x8ad)])clearTimeout(window[_0x5e5acd(0x8ad)]);const _0x274e21=()=>{const _0x1787c1=_0x5e5acd;window[_0x1787c1(0x8ad)]=setTimeout(()=>{_0x7f230b['preventDefault'](),_0x288205(_0x5c0b02,_0x5c5299);},0x320);},_0x12ab87=()=>{const _0x3c0b7d=_0x5e5acd;clearTimeout(window['replayPressTimer']),document[_0x3c0b7d(0x2ec)](_0x3c0b7d(0xb0e),_0x12ab87),document['removeEventListener'](_0x3c0b7d(0x65c),_0x12ab87),document[_0x3c0b7d(0x2ec)](_0x3c0b7d(0xbc7),_0x12ab87),document['removeEventListener'](_0x3c0b7d(0x6bb),_0x12ab87);};document['addEventListener'](_0x5e5acd(0xb0e),_0x12ab87,{'once':!![]}),document[_0x5e5acd(0xbc8)](_0x5e5acd(0x65c),_0x12ab87,{'once':!![]}),document[_0x5e5acd(0xbc8)]('touchend',_0x12ab87,{'once':!![]}),document[_0x5e5acd(0xbc8)](_0x5e5acd(0x6bb),_0x12ab87,{'once':!![]}),_0x274e21();}function _0x288205(_0x390d77,_0x52fa60){const _0x46ba55=_0x412b90,_0x23ccd2='replay-action-modal-'+_0x52fa60;if(document[_0x46ba55(0x51d)](_0x23ccd2))return;const _0x900ede='\x0a\x20\x20\x20\x20<div\x20id=\x22'+_0x23ccd2+_0x46ba55(0x832);document[_0x46ba55(0x936)][_0x46ba55(0x125)](_0x46ba55(0x2a7),_0x900ede);const _0x279540=document['getElementById'](_0x23ccd2),_0x1f44e4=()=>_0x279540[_0x46ba55(0xab0)]();_0x279540[_0x46ba55(0x820)]('.choice-modal-backdrop')[_0x46ba55(0x50e)]=_0x1f44e4,_0x279540[_0x46ba55(0x820)](_0x46ba55(0x5f8))[_0x46ba55(0x50e)]=_0x1f44e4,_0x279540[_0x46ba55(0x820)](_0x46ba55(0x54e))[_0x46ba55(0x50e)]=()=>{_0x177568(_0x390d77,_0x52fa60),_0x1f44e4();},_0x279540[_0x46ba55(0x820)]('#replay-action-delete')[_0x46ba55(0x50e)]=()=>{_0x5a7b06(_0x390d77,_0x52fa60),_0x1f44e4();};}async function _0x5a7b06(_0x78ddb4,_0x35e75e){const _0xc5b022=_0x412b90;if('LoKuv'==='CsZfI'){const _0x4948f1=_0x1561ec['createElement'](_0xc5b022(0xaee));_0x4948f1[_0xc5b022(0xa9d)]='expense-item',_0x4948f1['innerHTML']='<span\x20class=\x22description\x22>'+_0xa67f63[_0xc5b022(0x11a)]+_0xc5b022(0xb8c)+_0x5bc5e6[_0xc5b022(0x650)][_0xc5b022(0xb7b)](0x2)+'</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22'+_0x182fa7['id']+_0xc5b022(0x9d8),_0x42c3d8[_0xc5b022(0x83b)](_0x4948f1);}else{const _0x2c232d=await _0x44efa2(_0xc5b022(0x7f0));if(_0x2c232d){if(_0xc5b022(0xb09)==='QPHgn')return[_0x45e9d5];else _0x543bea['livestreamReplays'][_0x78ddb4]&&_0x543bea[_0xc5b022(0x226)][_0x78ddb4][_0x35e75e]&&(_0x543bea[_0xc5b022(0x226)][_0x78ddb4][_0xc5b022(0x278)](_0x35e75e,0x1),_0x1a0f1f(),_0x57e3d8(_0x78ddb4),_0x48e450('回放已删除。'));}}}function _0x177568(_0x5a7158,_0x227fb4){const _0x199a2c=_0x412b90;if(_0x199a2c(0x342)==='Ltaij'){const _0x410ed3=_0x3bbaa8[_0x199a2c(0x41e)][_0x199a2c(0xbe8)](_0x2be9c1=>_0x2be9c1['id']===_0x4f8735);_0x410ed3&&(_0x410ed3[_0x199a2c(0x41a)]=_0x1708d1,_0x410ed3['content']=_0x1a8b5e,_0x410ed3['categoryId']=_0x2c3cdb);}else{const _0x303537=_0x543bea[_0x199a2c(0x226)][_0x5a7158]?.[_0x227fb4];if(_0x303537===undefined)return;const _0x4215bb=document['getElementById']('edit-replay-modal'),_0x4f7270=document[_0x199a2c(0x51d)]('edit-replay-textarea');_0x4f7270['value']=_0x303537,_0x4215bb[_0x199a2c(0xa19)][_0x199a2c(0x25d)]('show'),document[_0x199a2c(0x51d)](_0x199a2c(0x56c))[_0x199a2c(0x50e)]=()=>_0xe8ec98(_0x5a7158,_0x227fb4),document[_0x199a2c(0x51d)](_0x199a2c(0x368))[_0x199a2c(0x50e)]=_0x5054b2,document[_0x199a2c(0x51d)](_0x199a2c(0xd32))['onclick']=_0x5054b2;}}function _0x5054b2(){const _0x58ac1b=_0x412b90;_0x58ac1b(0x3d0)===_0x58ac1b(0x828)?(_0x5c61aa[_0x58ac1b(0x5c4)]('.selected')[_0x58ac1b(0xb36)](_0x15adc2=>_0x15adc2[_0x58ac1b(0xa19)]['remove'](_0x58ac1b(0x3fe))),_0x38db37[_0x58ac1b(0xa19)]['remove']('active')):document[_0x58ac1b(0x51d)](_0x58ac1b(0xa21))[_0x58ac1b(0xa19)]['remove'](_0x58ac1b(0x6db));}function _0xe8ec98(_0x2a7dd4,_0x3707e2){const _0x301be6=_0x412b90,_0x5e9c58=document['getElementById'](_0x301be6(0x899))['value'];_0x543bea[_0x301be6(0x226)][_0x2a7dd4][_0x3707e2]=_0x5e9c58,_0x1a0f1f(),_0x57e3d8(_0x2a7dd4),_0x5054b2(),_0x48e450(_0x301be6(0x995));}function _0x8a99b9(){const _0x392800=_0x412b90;if(_0x392800(0x7e0)!==_0x392800(0x80a)){const _0x5a3da3=_0x543bea['activeLivestreamCharId'],_0x127660=_0x509294(_0x5a3da3);if(!_0x127660)return;document[_0x392800(0x51d)]('replays-char-name-header')['textContent']=_0x127660[_0x392800(0x41a)]+_0x392800(0xa06),_0x57e3d8(_0x5a3da3),_0x53ffb2('livestreamReplays',_0x392800(0x99d));}else return _0x4a7048['slice'](0x0,0xc);}function _0x57e3d8(_0x21bdb6){const _0x4c9156=_0x412b90;if(_0x4c9156(0xd54)==='KvNDw'){const _0x43b763=document[_0x4c9156(0x51d)](_0x4c9156(0x116)),_0x1b3297=_0x543bea[_0x4c9156(0x226)][_0x21bdb6]||[];_0x43b763[_0x4c9156(0x4d5)]='';if(_0x1b3297[_0x4c9156(0xc1f)]===0x0){if('tEKVz'!==_0x4c9156(0x640)){const _0x24efdb=_0x3f6583['trim']();if(!_0x24efdb||!_0x536528[_0x4c9156(0xbaa)])return;let _0x94e3d1=_0x2aba3a['diaries']['find'](_0x4cb3e2=>_0x4cb3e2['characterId']===_0x2640a0['activeDiaryCharacterId']);!_0x94e3d1&&(_0x94e3d1={'characterId':_0x11cc51['activeDiaryCharacterId'],'entries':[]},_0x5f14e5[_0x4c9156(0x12b)][_0x4c9156(0xb47)](_0x94e3d1));_0x94e3d1[_0x4c9156(0x594)][_0x4c9156(0xb47)]({'timestamp':_0xd51fd5['now'](),'author':'user','content':_0x24efdb}),_0x537995();const _0x2b7b57=_0x94e3d1['entries'][_0x4c9156(0xc1f)];_0x18ef50[_0x4c9156(0x70f)]=_0x466d48['ceil'](_0x2b7b57/0x2)-0x1,_0x4e38ab();}else{_0x43b763[_0x4c9156(0x4d5)]=_0x4c9156(0x62b);return;}}_0x1b3297[_0x4c9156(0xb36)]((_0x1961fd,_0x33b69e)=>{const _0xb7601f=_0x4c9156,_0x14775b=_0x1961fd[_0xb7601f(0x606)](/start_time:\s*"?([^"\n]+)"?/),_0x9bb387=_0x1961fd[_0xb7601f(0x606)](/theme:\s*"?([^"\n]+)"?/),_0x58b767=_0x14775b?_0x14775b[0x1]:_0xb7601f(0xb0d),_0x58fc7e=document[_0xb7601f(0x23f)](_0xb7601f(0xaee));_0x58fc7e[_0xb7601f(0xa9d)]='replay-item',_0x58fc7e[_0xb7601f(0x4d5)]=_0xb7601f(0xbb5)+(_0x9bb387?_0x9bb387[0x1]:_0xb7601f(0x33b))+_0xb7601f(0x205)+_0x58b767+_0xb7601f(0x9b1),_0x58fc7e[_0xb7601f(0xbc8)](_0xb7601f(0x779),()=>_0x547c42(_0x1961fd)),_0x58fc7e[_0xb7601f(0xbc8)](_0xb7601f(0x57e),_0x4ecd55=>{const _0x35451d=_0xb7601f;_0x4ecd55['button']===0x0&&(_0x35451d(0x461)===_0x35451d(0x461)?_0x433cc1(_0x4ecd55,_0x21bdb6,_0x33b69e):_0x258406[_0x35451d(0xbc8)]('click',()=>{const _0x5130ff=_0x35451d;if(_0x44a070[_0x5130ff(0x61b)]['length']===0x0)return;_0x34634c[_0x5130ff(0x786)]=(_0x32d1ee[_0x5130ff(0x786)]-0x1+_0x309fbd[_0x5130ff(0x61b)][_0x5130ff(0xc1f)])%_0x14e6ed['musicPlaylist']['length'];const _0x36695e=_0x41e9e1[_0x5130ff(0x61b)][_0x46735e[_0x5130ff(0x786)]]['id'];_0x3fbc5d(_0x36695e,_0xcc9cf1[_0x5130ff(0x61b)][_0x5130ff(0x257)](_0x305f5e=>_0x305f5e['id']));}));}),_0x58fc7e['addEventListener']('touchstart',_0x44de7d=>_0x433cc1(_0x44de7d,_0x21bdb6,_0x33b69e),{'passive':![]}),_0x58fc7e[_0xb7601f(0xbc8)]('contextmenu',_0x4249d0=>_0x4249d0['preventDefault']()),_0x58fc7e['addEventListener'](_0xb7601f(0x2b5),_0xf1ed9b=>_0xf1ed9b['preventDefault']()),_0x43b763[_0xb7601f(0x83b)](_0x58fc7e);});}else _0x1a688f[_0x4c9156(0x886)]=_0x28fbee['chats'][0x0]?.['id']||null,_0x176a02(_0x2c909b[_0x4c9156(0x886)]);}function _0x547c42(_0x3ced62){const _0x2f89b1=_0x412b90;_0x44c00f(_0x3ced62),_0x53ffb2(_0x2f89b1(0xc9d),'livestreamReplays');}function _0x44c00f(_0x4d32b4){const _0xd2dc59=_0x412b90;if(_0xd2dc59(0x84d)===_0xd2dc59(0x84d)){const _0x2f97ef=document['getElementById']('livestream-replay-view-container');_0x2f97ef[_0xd2dc59(0x4d5)]='';const _0x55aed9=_0x4d32b4[_0xd2dc59(0x2bf)]('\x0a');let _0x3332c2='',_0x4a92fc=![];_0x55aed9[_0xd2dc59(0xb36)](_0x5c7107=>{const _0x32b5ee=_0xd2dc59,_0x8ae5c6=_0x5c7107[_0x32b5ee(0xad4)]();if(!_0x8ae5c6)return;if(_0x8ae5c6[_0x32b5ee(0xca0)]('-\x20')){if('DmseW'!==_0x32b5ee(0x7eb)){const _0x45a9b3=_0x2927f6(_0x32a648),_0x55a7b1=_0x3f09c7['getElementById'](_0x32b5ee(0x624));_0x55a7b1[_0x32b5ee(0x1e2)]['backgroundImage']='';let _0x921e4b=_0x372da7[_0x32b5ee(0x51d)](_0x32b5ee(0x66f)+_0x1dc32e);if(_0x921e4b)_0x921e4b['innerHTML']='';if(!_0x45a9b3)return;_0x45a9b3[_0x32b5ee(0xcc2)]&&(_0x55a7b1[_0x32b5ee(0x1e2)][_0x32b5ee(0xbd8)]=_0x32b5ee(0x744)+_0x45a9b3['chatWallpaper']+'\x27)',_0x55a7b1[_0x32b5ee(0x1e2)]['backgroundSize']=_0x32b5ee(0x73d),_0x55a7b1[_0x32b5ee(0x1e2)][_0x32b5ee(0x1c0)]=_0x32b5ee(0xcc6));if(_0x45a9b3[_0x32b5ee(0x5ee)]){let _0x16664b=_0x1f2195[_0x32b5ee(0x51d)](_0x32b5ee(0x66f)+_0x45a9b3['id']);!_0x16664b&&(_0x16664b=_0x313121[_0x32b5ee(0x23f)]('style'),_0x16664b['id']=_0x32b5ee(0x66f)+_0x45a9b3['id'],_0x11a18c['head'][_0x32b5ee(0x83b)](_0x16664b));const _0x63a805=_0x45a9b3[_0x32b5ee(0x5ee)],_0x2ae3dc=_0x63a805[_0x32b5ee(0x6ac)](/\.bubble\.sent/g,'.bubble-'+_0x45a9b3['id']+_0x32b5ee(0x413))[_0x32b5ee(0x6ac)](/\.bubble\.received/g,_0x32b5ee(0xa34)+_0x45a9b3['id']+_0x32b5ee(0xce0));_0x16664b[_0x32b5ee(0x4d5)]=_0x2ae3dc;}}else{if(_0x4a92fc){const _0xafe1d2=document['createElement']('li');_0xafe1d2['textContent']=_0x8ae5c6[_0x32b5ee(0xc97)](0x2),_0xafe1d2['style'][_0x32b5ee(0xb35)]=_0x32b5ee(0x6cb),_0x2f97ef[_0x32b5ee(0xb3c)][_0x32b5ee(0x83b)](_0xafe1d2);}}}else{_0x4a92fc=![];const _0x537a11=_0x8ae5c6[_0x32b5ee(0x2bf)](/:(.*)/s);_0x3332c2=_0x537a11[0x0]['trim']();let _0xc0a408=(_0x537a11[0x1]||'')[_0x32b5ee(0xad4)]()[_0x32b5ee(0x6ac)](/^"|"$/g,'');const _0x4fa4ee={'start_time':_0x32b5ee(0x349),'duration':'直播时长','theme':'本场主题','streamer_mood':_0x32b5ee(0x162),'audience_mood':'观众氛围','key_events':_0x32b5ee(0x306),'dm_interaction_summary':_0x32b5ee(0x7a8)},_0x9c10e0=document[_0x32b5ee(0x23f)]('h4');_0x9c10e0[_0x32b5ee(0x32a)]=_0x4fa4ee[_0x3332c2]||_0x3332c2,_0x9c10e0[_0x32b5ee(0x1e2)][_0x32b5ee(0x19b)]=_0x32b5ee(0x7e4),_0x9c10e0[_0x32b5ee(0x1e2)][_0x32b5ee(0x303)]='5px',_0x9c10e0[_0x32b5ee(0x1e2)][_0x32b5ee(0x862)]=_0x32b5ee(0x4c2),_0x2f97ef[_0x32b5ee(0x83b)](_0x9c10e0);if(_0xc0a408){const _0x3c58d9=document['createElement']('p');_0x3c58d9[_0x32b5ee(0x32a)]=_0xc0a408,_0x3c58d9['style'][_0x32b5ee(0x36d)]=_0x32b5ee(0x198),_0x2f97ef[_0x32b5ee(0x83b)](_0x3c58d9);}else{_0x4a92fc=!![];const _0x2b1d24=document[_0x32b5ee(0x23f)]('ul');_0x2b1d24['style']['paddingLeft']=_0x32b5ee(0x4c2),_0x2f97ef[_0x32b5ee(0x83b)](_0x2b1d24);}}});}else _0x1fb8fe[_0x4ec7d1]=_0x2974de[_0xd2dc59(0x576)](_0x52ac98);}const _0xaed371=_0x5ce83a();await _0x48c3d1(),_0x10fa97(),((()=>{const _0x25dd83=_0x412b90;if(_0x25dd83(0x318)===_0x25dd83(0x652))return _0x4971d0[_0x25dd83(0xb1e)](_0x25dd83(0x59e),_0x240c6e),_0x252bd8['error']('AI返回的原始文本:',_0x1a72cd[_0x25dd83(0x287)]||_0x25dd83(0x5d1)),null;else{let _0x1dfbda=![],_0x542bc8=_0x543bea['worldBookCategories'][_0x25dd83(0xbe8)](_0x3fbd60=>_0x3fbd60['name']===_0x25dd83(0x1c1));!_0x542bc8&&(_0x542bc8={'id':_0x25dd83(0xd3b),'name':_0x25dd83(0x1c1)},_0x543bea['worldBookCategories'][_0x25dd83(0xb47)](_0x542bc8),console[_0x25dd83(0x68b)](_0x25dd83(0xc88)),_0x1dfbda=!![]);const _0x36e04f='wb_html_module_builtin_1';let _0x2af486=_0x543bea[_0x25dd83(0x41e)]['some'](_0x3ea04b=>_0x3ea04b['id']===_0x36e04f);if(!_0x2af486){if(_0x25dd83(0x4c9)===_0x25dd83(0x852))_0x47e976(),_0x32c3b9(_0x25dd83(0x4e4),_0x25dd83(0xc73));else{console[_0x25dd83(0x68b)](_0x25dd83(0xd3c));const _0x179179='#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a',_0x597237={'id':_0x36e04f,'name':'HTML模块生成规则','content':_0x179179,'categoryId':_0x542bc8['id']};_0x543bea['worldBooks']['push'](_0x597237),_0x1dfbda=!![];}}_0x1dfbda&&(_0x25dd83(0x554)!==_0x25dd83(0x554)?_0x550fdf['assign'](_0x11e9ec,{'songName':_0x47b86d,'artist':_0x35d589,'coverUrl':null,'playableUrl':null}):(_0x1a0f1f(),console['log'](_0x25dd83(0xac6))));}})()),_0x1d7fad(),_0x990f61(),_0x1aec3b(),_0x1d4668(),_0x292714(),_0x2c0635(),_0xab982b(),_0x24b4b8(),_0x279505(),_0x14bf9e();const _0x329ef9=document['getElementById'](_0x412b90(0x1b5));_0x329ef9&&requestAnimationFrame(()=>{const _0x1cf12c=_0x412b90;'qvFus'!=='snXrp'?_0x329ef9[_0x1cf12c(0x1e2)]['opacity']='1':_0x107d10(_0x459292);});_0x2e8831(),_0x1915c9(),setInterval(_0x1915c9,0x7530),_0x461a42(),_0x358a91(),_0x28fcbf();const _0x28d525=document['getElementById'](_0x412b90(0x4bd));document[_0x412b90(0x51d)](_0x412b90(0x2a4))[_0x412b90(0xbc8)](_0x412b90(0x779),function(_0x246026){const _0x261530=_0x412b90;if(_0x261530(0x738)==='zHBHT')_0x5b69f8(),_0x1fbde4(_0x261530(0x912),_0x261530(0x3fb));else{if(_0x246026[_0x261530(0x446)]['closest'](_0x261530(0x436))){if(_0x261530(0x655)==='PyOso')return;else _0x3372c9['getElementById']('music-screen')['style']['setProperty'](_0x261530(0x7af),_0x261530(0x535)+_0x1b53ae+')');}const _0x29b5c7=document[_0x261530(0x51d)](_0x261530(0x8b6));_0x29b5c7&&_0x29b5c7[_0x261530(0x779)]();}}),_0x53ffb2(_0x412b90(0x3fb),'init');(_0xaed371||_0x543bea['characters'][_0x412b90(0xc1f)]===0x0)&&(_0x412b90(0x57a)===_0x412b90(0x757)?_0x159ff7[_0x412b90(0xb47)]({'name':_0x206570[0x0][_0x412b90(0xad4)](),'url':_0x11f8a8[0x1][_0x412b90(0xad4)]()}):(_0x48e450(_0x412b90(0x533)),setTimeout(()=>{const _0x5e53fa=_0x412b90;_0x53ffb2('chat',_0x5e53fa(0x3fb)),setTimeout(()=>_0x3925e7(),0x64);},0x6a4)));document[_0x412b90(0x51d)](_0x412b90(0x2ee))[_0x412b90(0xbc8)](_0x412b90(0x779),_0x15fa55);const _0x77a98=document[_0x412b90(0x51d)]('widget-bg-input');document[_0x412b90(0x51d)](_0x412b90(0xb05))[_0x412b90(0xbc8)]('click',()=>_0x77a98[_0x412b90(0x779)]()),document[_0x412b90(0x51d)](_0x412b90(0x9ab))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x3eb224=_0x412b90;_0x543bea[_0x3eb224(0xc9f)][_0x3eb224(0xafb)]=null,_0x1a0f1f(),_0x461a42(),_0x48e450('小组件背景已恢复默认。');}),_0x77a98[_0x412b90(0xbc8)](_0x412b90(0xb2a),async _0x42341b=>{const _0x5c1089=_0x412b90,_0x5db4b8=_0x42341b['target'][_0x5c1089(0x730)][0x0];if(!_0x5db4b8)return;try{if('HDggn'==='VhRNN')_0x135154+='-\x20你最近去过：“'+_0x2e675e[_0x5c1089(0x363)]+_0x5c1089(0xbce)+_0x3bd3c5[_0x5c1089(0x143)]+'”。\x0a';else{const _0x37fbca=await _0x2cc568(_0x5db4b8);_0x543bea[_0x5c1089(0xc9f)][_0x5c1089(0xafb)]=_0x37fbca,_0x1a0f1f(),_0x461a42(),_0x48e450(_0x5c1089(0x667));}}catch(_0x36174c){_0x48e450(_0x5c1089(0xcdc)+_0x36174c[_0x5c1089(0x979)]);}}),_0x5e72ca(),document['getElementById'](_0x412b90(0x3b9))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>document[_0x412b90(0x51d)]('badge-input')['click']()),document[_0x412b90(0x51d)](_0x412b90(0xd0d))[_0x412b90(0xbc8)](_0x412b90(0x779),async()=>{const _0x3e4991=_0x412b90;await _0x23455e(_0x3e4991(0x91f)),localStorage[_0x3e4991(0x584)](_0x3e4991(0x932)),_0x5e72ca(),_0x48e450('徽章已移除。');}),document[_0x412b90(0x51d)](_0x412b90(0x1c3))[_0x412b90(0xbc8)](_0x412b90(0xb2a),async _0x4ddab0=>{const _0x2f22ee=_0x412b90,_0x5d05f3=_0x4ddab0['target']['files'][0x0];if(!_0x5d05f3)return;try{await _0x567110('widget_badge',_0x5d05f3),await _0x5e72ca(),_0x48e450('徽章已更换！');}catch(_0x26436c){_0x2f22ee(0x21b)===_0x2f22ee(0x21b)?_0x48e450('错误:\x20'+_0x26436c['message']):(_0x3d8dd8[_0x2f22ee(0x90f)]='',_0x31d77d[_0x2f22ee(0x32a)]=_0x2f22ee(0x951),_0x4dc338[_0x2f22ee(0x90f)]=_0x2f22ee(0xce4)+(_0x1ba928[_0x2f22ee(0x24d)][_0x2f22ee(0xc1f)]+0x1),_0x4dbef9['value']='',_0x2f16eb[_0x2f22ee(0x90f)]=_0x2f22ee(0xb9a),_0x3bcdea['getElementById'](_0x2f22ee(0x57c))[_0x2f22ee(0x90f)]='',_0x4a4595[_0x2f22ee(0x90f)]='',_0x39fabb['value']='');}}),_0x4fbe3f(),document[_0x412b90(0x51d)](_0x412b90(0x69d))['addEventListener'](_0x412b90(0x57e),_0x3c2b7b),document['getElementById'](_0x412b90(0x69d))[_0x412b90(0xbc8)](_0x412b90(0x897),_0x3c2b7b,{'passive':![]}),document[_0x412b90(0x51d)]('upload-card-button')[_0x412b90(0xbc8)]('click',()=>document[_0x412b90(0x51d)](_0x412b90(0xd19))[_0x412b90(0x779)]()),document[_0x412b90(0x51d)]('reset-card-button')['addEventListener'](_0x412b90(0x779),async()=>{const _0x1c4619=_0x412b90;await _0x23455e(_0x1c4619(0xaad)),localStorage['removeItem']('cardState'),_0x4fbe3f(),_0x48e450(_0x1c4619(0x42f));}),document['getElementById'](_0x412b90(0xd19))[_0x412b90(0xbc8)]('change',async _0x3d57f7=>{const _0x5c619f=_0x412b90,_0x233611=_0x3d57f7[_0x5c619f(0x446)][_0x5c619f(0x730)][0x0];if(!_0x233611)return;try{await _0x567110(_0x5c619f(0xaad),_0x233611),await _0x4fbe3f(),_0x48e450(_0x5c619f(0xb21));}catch(_0xe8f204){_0x48e450(_0x5c619f(0xcdc)+_0xe8f204[_0x5c619f(0x979)]);}}),document['getElementById']('reset-widgets-position-button')[_0x412b90(0xbc8)](_0x412b90(0x779),async()=>{const _0x3af281=_0x412b90,_0x4e683d=await _0x44efa2(_0x3af281(0x9ed));_0x4e683d&&(localStorage[_0x3af281(0x584)](_0x3af281(0x932)),localStorage[_0x3af281(0x584)](_0x3af281(0x470)),_0x48e450(_0x3af281(0x47c)),setTimeout(()=>location[_0x3af281(0x5f2)](),0x3e8));});const _0x1cb0cd=document[_0x412b90(0x51d)]('app-diary');_0x1cb0cd[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x537214=_0x412b90;_0x23e3b8(),_0x53ffb2('diaryList',_0x537214(0x3fb));});const _0xba8ad2=document[_0x412b90(0x51d)](_0x412b90(0x4d9));_0xba8ad2['addEventListener'](_0x412b90(0x779),()=>{_0x270b16(),_0x53ffb2('musicLibrary','home');}),document[_0x412b90(0x51d)](_0x412b90(0xcf5))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x53ffb2('home',_0x412b90(0x912))),document['getElementById']('back-to-home-from-diary-list')['addEventListener'](_0x412b90(0x779),()=>_0x53ffb2(_0x412b90(0x3fb),_0x412b90(0x6cc))),document['getElementById']('back-to-diary-list')[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x1e3810=_0x412b90;'YDGKt'==='pyNMw'?_0x56793f['forEach'](_0x1bbd4d=>{const _0x1379e9=_0x53d2,_0xee4833=_0x1bbd4d['sender']===_0x1379e9(0xaa3),_0x49745c=_0xee4833?_0x41caef?_0x52dc46[0x0]:'?':_0x9c542e?_0x3959ca[0x0]:'?';_0x224274+=_0x1379e9(0xd3d)+(_0xee4833?_0x1379e9(0x8ed):'ai')+_0x1379e9(0x89b)+(!_0xee4833?_0x1379e9(0x696)+_0x49745c+'</div>':'')+_0x1379e9(0x5bb)+(_0xee4833?'user':'ai')+'\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x1bbd4d[_0x1379e9(0x297)]+_0x1379e9(0x402)+(_0xee4833?'<div\x20class=\x22snoop-avatar\x22>'+_0x49745c+'</div>':'')+_0x1379e9(0xd1e);}):(_0x543bea[_0x1e3810(0xbaa)]=null,_0x53ffb2(_0x1e3810(0x6cc),_0x1e3810(0x68d)));}),document[_0x412b90(0x51d)](_0x412b90(0xbe6))['addEventListener']('click',_0x4c4f8c),document[_0x412b90(0x51d)](_0x412b90(0x9f0))['addEventListener'](_0x412b90(0x779),_0x2a1d58),document[_0x412b90(0x51d)]('diary-entry-input')['addEventListener'](_0x412b90(0x830),_0x42a6c3=>{const _0x5f1dd8=_0x412b90;_0x5f1dd8(0x7be)!==_0x5f1dd8(0xb8b)?_0x42a6c3[_0x5f1dd8(0xc7f)]===_0x5f1dd8(0x778)&&!_0x42a6c3['shiftKey']&&(_0x42a6c3[_0x5f1dd8(0x9cb)](),_0x4c4f8c()):(_0x5a61a3(),_0x23632c());});const _0x4f8fec=[_0x412b90(0x8a7),_0x412b90(0x772),'angry',_0x412b90(0x348),'shy'];_0x4f8fec['forEach'](_0x348aa5=>{const _0x545e8d=_0x412b90;if(_0x545e8d(0x734)!==_0x545e8d(0x734))_0x3fb085['key']===_0x545e8d(0x778)&&(_0xd0cfa6[_0x545e8d(0x9cb)](),_0x4d7671());else{const _0x38ad06=document['getElementById']('char-edit-sprite-'+_0x348aa5+_0x545e8d(0x19d)),_0x5c39dd=document[_0x545e8d(0x51d)](_0x545e8d(0xb4d)+_0x348aa5+'-input');if(_0x38ad06&&_0x5c39dd){if('YyGEd'!==_0x545e8d(0x189))_0x38ad06[_0x545e8d(0xbc8)](_0x545e8d(0x779),()=>_0x5c39dd[_0x545e8d(0x779)]()),_0x5c39dd[_0x545e8d(0xbc8)](_0x545e8d(0xb2a),_0x58b359=>{const _0x41dc1d=_0x545e8d;if('diPvq'===_0x41dc1d(0x98f)){_0x56069f(_0x41dc1d(0xaef));return;}else{const _0x23b0d6=_0x58b359[_0x41dc1d(0x446)][_0x41dc1d(0x730)][0x0];if(!_0x23b0d6)return;try{const _0x3d09ee=URL[_0x41dc1d(0xcb2)](_0x23b0d6);_0x38ad06[_0x41dc1d(0x1e2)][_0x41dc1d(0xbd8)]=_0x41dc1d(0x744)+_0x3d09ee+'\x27)';}catch(_0x4c602b){_0x48e450(_0x41dc1d(0x781)+_0x4c602b[_0x41dc1d(0x979)]);}}});else{const _0xbac2c6=_0x508ac3[_0x545e8d(0x446)][_0x545e8d(0x730)][0x0];if(_0xbac2c6)_0x963c15[_0x545e8d(0x1e2)]['backgroundImage']=_0x545e8d(0x744)+_0x5c76cb[_0x545e8d(0xcb2)](_0xbac2c6)+'\x27)';}}}}),document[_0x412b90(0x51d)](_0x412b90(0xc46))[_0x412b90(0xbc8)](_0x412b90(0x779),_0x5498f0),document[_0x412b90(0x51d)]('toggle-meeting-view-button')['addEventListener'](_0x412b90(0x779),()=>{const _0x5a2feb=_0x412b90;if('VEaYp'==='eDGcV'){const _0x3040d1=_0x335cfc[_0x5a2feb(0xcfd)]((_0x5f4f31-_0x3ee4f4)/(0x3e8*0x3c*0x3c*0x18));_0x3102a5+=_0x5a2feb(0x59a)+_0x3040d1+'\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a';}else _0x543bea[_0x5a2feb(0x629)]=_0x543bea[_0x5a2feb(0x629)]===_0x5a2feb(0x7da)?_0x5a2feb(0xc19):'novel',_0x1093c7();}),document['getElementById'](_0x412b90(0xa23))[_0x412b90(0xbc8)]('mousedown',_0x2c7611),document[_0x412b90(0x51d)](_0x412b90(0xa23))[_0x412b90(0xbc8)](_0x412b90(0x897),_0x2c7611,{'passive':![]});let _0x25f8c3=null;function _0x2c7611(_0x45d3fc){const _0xc44291=_0x412b90;if('sWpOW'!=='MyNWQ'){if(_0x25f8c3)clearTimeout(_0x25f8c3);const _0x21023d=_0x45d3fc[_0xc44291(0x446)][_0xc44291(0x156)]('p[data-history-index]');if(!_0x21023d)return;const _0x2c8099=parseInt(_0x21023d[_0xc44291(0xa24)]['historyIndex'],0xa);if(isNaN(_0x2c8099))return;const _0x5d7704=()=>{_0x25f8c3=setTimeout(()=>{const _0x1760e9=_0x53d2;if(_0x45d3fc[_0x1760e9(0x711)]==='touchstart')_0x45d3fc[_0x1760e9(0x9cb)]();_0x130f27(_0x2c8099);},0x320);},_0x5a9fb0=()=>{const _0x5c68c6=_0xc44291;if(_0x5c68c6(0x74d)!==_0x5c68c6(0x174)){if(_0x25f8c3)clearTimeout(_0x25f8c3);}else{const _0x1a6fbd=_0xd661e0[_0x5c68c6(0x23f)](_0x5c68c6(0xaee));_0x1a6fbd[_0x5c68c6(0xa9d)]=_0x5c68c6(0x86b),_0x1a6fbd[_0x5c68c6(0x1e2)]['flexDirection']='column',_0x1a6fbd[_0x5c68c6(0x1e2)][_0x5c68c6(0x1e7)]=_0x5c68c6(0xb2b),_0x1a6fbd[_0x5c68c6(0x1e2)][_0x5c68c6(0x940)]=_0x5c68c6(0xcaf),_0x1a6fbd[_0x5c68c6(0x1e2)]['gap']='0';const _0x1a43ab=_0x49ea82[_0xfe11a2[_0x5c68c6(0x131)]]||_0xe8486b['默认'],_0x34d995=_0x5c68c6(0xb1a)+_0x1a43ab+'</svg>',_0x3cb0ed=_0x5c68c6(0xb5b)+_0x34d995+_0x5c68c6(0x32c)+_0x570a8b[_0x5c68c6(0x11a)]+_0x5c68c6(0xa87)+(_0x2dca49[_0x5c68c6(0x131)]||_0x5c68c6(0xb88))+_0x5c68c6(0x7c6)+(_0x412e8f[_0x5c68c6(0x650)]||0x0)[_0x5c68c6(0xb7b)](0x2)+_0x5c68c6(0x478);let _0x339c99='';if(_0x5f082d[_0x5c68c6(0xa93)]&&_0x536d43[_0x5c68c6(0xa93)]['charId']){const _0x3e5e18=_0x3c324e(_0x35c19e[_0x5c68c6(0xa93)]['charId']);_0x3e5e18&&(_0x339c99=_0x5c68c6(0x6a4)+_0x3e5e18[_0x5c68c6(0x5ec)]+_0x5c68c6(0x73a)+_0x3e5e18[_0x5c68c6(0x41a)]+_0x5c68c6(0x9a5)+_0x18251d[_0x5c68c6(0xa93)]['text']+'</div></div></div>');}_0x1a6fbd[_0x5c68c6(0x4d5)]=_0x3cb0ed+_0x339c99,_0xbbced5['appendChild'](_0x1a6fbd);}};document[_0xc44291(0xbc8)]('mouseup',_0x5a9fb0,{'once':!![]}),document[_0xc44291(0xbc8)](_0xc44291(0x65c),_0x5a9fb0,{'once':!![]}),document['addEventListener'](_0xc44291(0xbc7),_0x5a9fb0,{'once':!![]}),document[_0xc44291(0xbc8)](_0xc44291(0x6bb),_0x5a9fb0,{'once':!![]}),_0x5d7704();}else _0x5c33c1(_0xc44291(0xacf));}document[_0x412b90(0x51d)]('import-accounting-input')['addEventListener']('change',_0x496c8a),document[_0x412b90(0x936)][_0x412b90(0xbc8)]('click',_0x41a04b=>{const _0x1a385f=_0x412b90,_0x49955d=_0x41a04b['target'][_0x1a385f(0x156)](_0x1a385f(0x55d));if(_0x49955d){if(_0x1a385f(0xaf8)===_0x1a385f(0x78f))_0x2d54c0[_0x1a385f(0x51d)]('livestream-sprite-adjust-btn')[_0x1a385f(0xbc8)](_0x1a385f(0x779),_0x12e181),_0x30365f[_0x1a385f(0x51d)](_0x1a385f(0x8d9))[_0x1a385f(0xbc8)](_0x1a385f(0x779),_0x50f7e5),_0x4aa299[_0x1a385f(0x51d)]('livestream-reroll-btn')[_0x1a385f(0xbc8)](_0x1a385f(0x779),_0x265943),_0x2222af['getElementById']('livestream-sprite-confirm-button')[_0x1a385f(0xbc8)](_0x1a385f(0x779),_0x19238e),_0x5d2fc2['getElementById'](_0x1a385f(0xd48))[_0x1a385f(0xbc8)](_0x1a385f(0x779),()=>_0x5b5ed5(![])),_0x3df1ad[_0x1a385f(0x51d)](_0x1a385f(0x942))[_0x1a385f(0xbc8)](_0x1a385f(0x779),_0x1df42f),_0x1d8d77['getElementById'](_0x1a385f(0x3f1))[_0x1a385f(0xbc8)]('input',_0x18ab9a),_0x45f110[_0x1a385f(0x51d)]('livestream-sprite-slider-y')[_0x1a385f(0xbc8)](_0x1a385f(0xa5e),_0xe17e26),_0x5b2bd7[_0x1a385f(0x51d)](_0x1a385f(0xcc5))['addEventListener'](_0x1a385f(0xa5e),_0x17d0b3);else{const _0x814ad4=_0x41a04b['target']['closest'](_0x1a385f(0x2b2)),_0x3e3b31=_0x41a04b['target'][_0x1a385f(0x156)](_0x1a385f(0x4f2));if(_0x814ad4){if(_0x1a385f(0x337)!==_0x1a385f(0x337)){const _0x15a9fc='diary-action-modal-'+_0x1fbcbd;let _0x354f6f=_0x4f046e[_0x1a385f(0x51d)](_0x15a9fc);if(_0x354f6f)return;const _0x48f309='\x0a\x20\x20\x20\x20<div\x20id=\x22'+_0x15a9fc+_0x1a385f(0x2f9)+(_0x14f962==='ai'?_0x1a385f(0x4ce):'')+_0x1a385f(0x9b7);_0x981ca9[_0x1a385f(0x936)][_0x1a385f(0x125)](_0x1a385f(0x2a7),_0x48f309);const _0x48172a=_0x3a87b9[_0x1a385f(0x51d)](_0x15a9fc),_0x1083a0=()=>_0x48172a[_0x1a385f(0xab0)]();_0x48172a['querySelector'](_0x1a385f(0x9fd))[_0x1a385f(0x50e)]=_0x1083a0,_0x48172a[_0x1a385f(0x820)](_0x1a385f(0x2f1))[_0x1a385f(0x50e)]=_0x1083a0,_0x48172a[_0x1a385f(0x820)](_0x1a385f(0x812))[_0x1a385f(0x50e)]=()=>{_0x2d44fa(_0x4308bb),_0x1083a0();},_0x5d3eea==='ai'&&(_0x48172a[_0x1a385f(0x820)](_0x1a385f(0xb83))['onclick']=()=>{_0x4945d9(_0x2147db),_0x1083a0();});}else _0x5dc218();}else{if(_0x3e3b31){const _0x5654ad=_0x3e3b31[_0x1a385f(0x156)](_0x1a385f(0xcfa)),_0x2e60c0=_0x3e3b31[_0x1a385f(0xa24)]['songId'],_0x3e9020=parseInt(_0x5654ad[_0x1a385f(0xa24)]['historyIndex'],0xa);_0x5784d5(_0x2e60c0,_0x3e9020,_0x49955d);}else{if('sqpXA'!==_0x1a385f(0x26a)){const _0x109fea=_0x577515();if(_0x109fea&&_0x109fea[_0x1a385f(0x56f)]&&_0x109fea['activeListenSession'][_0x1a385f(0x8ce)]){if(_0x1a385f(0xbe9)===_0x1a385f(0x25a)){const _0x3957e0=new _0x47920d(_0x44f671[_0x1a385f(0x11f)])['toLocaleTimeString'](_0x1a385f(0xbd4));if(_0x952e81[_0x1a385f(0x711)]===_0x1a385f(0x416))return'['+_0x3957e0+']\x20[主播\x20'+_0x9f83ca[_0x1a385f(0x319)]+_0x1a385f(0x578)+_0x49bff8[_0x1a385f(0x297)];if(_0x43b0c3[_0x1a385f(0x711)]==='danmaku')return'['+_0x3957e0+']\x20[弹幕\x20'+_0x2c50d6[_0x1a385f(0x8ed)]+_0x1a385f(0x578)+(_0x5494dc['comment']||_0x5498c6[_0x1a385f(0x297)]);if(_0xeb1c8e['type']===_0x1a385f(0x876))return'['+_0x3957e0+_0x1a385f(0xa60)+_0x36e248[_0x1a385f(0x382)]+_0x1a385f(0xd14)+_0x2eb58a['to']+']:\x20'+_0x18d82c[_0x1a385f(0x297)];return'['+_0x3957e0+']\x20[系统事件]:\x20'+_0x2bbdd5[_0x1a385f(0x427)](_0x3976ec);}else _0x3bf5a4[_0x1a385f(0x1e2)][_0x1a385f(0x930)]=_0x1a385f(0x338),setTimeout(()=>_0x3bf5a4[_0x1a385f(0xa19)]['add'](_0x1a385f(0x6db)),0xa);}}else{const _0xb55d0f=_0x19fdc3['createElement']('div');_0xb55d0f[_0x1a385f(0xa9d)]='preview-item',_0xb55d0f[_0x1a385f(0x4d5)]=_0x1a385f(0x87c),_0xb55d0f['querySelector'](_0x1a385f(0x623))[_0x1a385f(0x50e)]=()=>_0x583e96(_0x1a385f(0x55b)),_0x136c14[_0x1a385f(0x83b)](_0xb55d0f),_0x1cc20a(_0x5d04ad)[_0x1a385f(0x842)](_0x28b89d=>{const _0x16cb20=_0x1a385f,_0x24ce4b=_0x38456c[_0x16cb20(0x51d)](_0x16cb20(0x770));_0x24ce4b&&_0x28b89d&&(_0x24ce4b[_0x16cb20(0x2d9)]=_0x143648[_0x16cb20(0xcb2)](_0x28b89d));});}}}return;}}if(window[_0x1a385f(0x225)]()[_0x1a385f(0x8ef)]())return;const _0x1aceaf=_0x41a04b[_0x1a385f(0x446)][_0x1a385f(0x156)]('.message-container');if(_0x1aceaf&&!_0x41a04b[_0x1a385f(0x446)][_0x1a385f(0x156)]('.no-action-modal')){const _0x992513=parseInt(_0x1aceaf['dataset']['historyIndex'],0xa);!isNaN(_0x992513)&&_0x130f27(_0x992513);}});const _0x260c9e=document[_0x412b90(0x51d)](_0x412b90(0x806));_0x260c9e&&_0x260c9e[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x4a10c7=_0x412b90;_0x4a10c7(0x1d1)!==_0x4a10c7(0xc43)?_0x48e450(_0x4a10c7(0x86a)):(_0x3e2aed[_0x4a10c7(0x32a)]='旁白',_0x38e2e3['textContent']=_0x4a10c7(0x7b3));});const _0x1238a8=document[_0x412b90(0x51d)](_0x412b90(0x764)),_0x20d7f8=localStorage[_0x412b90(0x760)](_0x412b90(0xb78));if(_0x20d7f8){if(_0x412b90(0xd49)===_0x412b90(0xd49))try{const _0x156a9b=JSON['parse'](_0x20d7f8);Array[_0x412b90(0x8e1)](_0x156a9b)&&(_0x1238a8[_0x412b90(0x90f)]=_0x156a9b[_0x412b90(0x257)](_0x4bd997=>_0x4bd997[_0x412b90(0x41a)]+'--'+_0x4bd997['url'])[_0x412b90(0x4db)]('\x0a'));}catch(_0x3559c4){}else _0x5da5da+=_0x412b90(0x9db)+_0x49bfab[_0x412b90(0x11a)]+_0x412b90(0x949);}document[_0x412b90(0x51d)](_0x412b90(0x7dd))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x3fde11=_0x412b90;if(_0x3fde11(0xce6)!==_0x3fde11(0xab6)){const _0x1b56c3=_0x1238a8[_0x3fde11(0x90f)],_0x13e723=_0x1b56c3['split']('\x0a')[_0x3fde11(0x78c)](_0x4010b9=>_0x4010b9['trim']()!==''),_0x445992=[];let _0x325af7=0x0;for(const _0x2bd17e of _0x13e723){if('xegVx'===_0x3fde11(0xc83))_0x4b36a9=_0x3fde11(0x9e4)+_0x20af1c;else{const _0x4c43de=_0x2bd17e[_0x3fde11(0x2bf)]('--');_0x4c43de[_0x3fde11(0xc1f)]===0x2&&_0x4c43de[0x0][_0x3fde11(0xad4)]()&&_0x4c43de[0x1]['trim']()[_0x3fde11(0xca0)]('http')?_0x445992[_0x3fde11(0xb47)]({'name':_0x4c43de[0x0][_0x3fde11(0xad4)](),'url':_0x4c43de[0x1][_0x3fde11(0xad4)]()}):_0x325af7++;}}_0x325af7>0x0&&_0x48e450('有\x20'+_0x325af7+_0x3fde11(0xb3a));try{_0x3fde11(0xa88)!==_0x3fde11(0xa88)?_0x495675[_0x3fde11(0x2d9)]&&(_0x557635[_0x3fde11(0xc6e)]?_0x17e570['play']():_0x4a8c78[_0x3fde11(0x939)]()):(localStorage[_0x3fde11(0xa1c)]('customStickers',JSON[_0x3fde11(0x427)](_0x445992)),_0x48e450(_0x3fde11(0x6a0)),setTimeout(()=>location[_0x3fde11(0x5f2)](),0x5dc));}catch(_0x34d688){_0x48e450(_0x3fde11(0x274));}}else{const _0x21fa28=_0x169533(_0x49d8bd[_0x3fde11(0x297)]);_0x519bfa[_0x3fde11(0xa48)](_0x207ccb,{'content':_0x21fa28[_0x3fde11(0x297)],'quotedMessage':_0x21fa28[_0x3fde11(0x20f)]});}}),_0x14f576(),_0x4bc8eb(),document[_0x412b90(0x51d)](_0x412b90(0xafe))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x53ffb2(_0x412b90(0x99d),_0x412b90(0x226))),document[_0x412b90(0x51d)](_0x412b90(0x39a))[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x53ffb2(_0x412b90(0x226),_0x412b90(0xc9d)));const _0x54fb79=document['getElementById']('player-play-pause-btn'),_0x19c49c=document[_0x412b90(0x51d)](_0x412b90(0xb33)),_0x429cda=document[_0x412b90(0x51d)](_0x412b90(0x794));_0x54fb79&&_0x54fb79['addEventListener']('click',()=>{const _0x272443=_0x412b90;if('Qvzen'!=='Qvzen'){const _0x4c0f4a=_0x107925[_0x272443(0x882)][_0x272443(0xbe8)](_0x2916d6=>_0x2916d6['id']===_0x1ab59d['activeFriendCircleId']),_0x1fbe0e=_0x4c0f4a?_0x4c0f4a['posts']:[];if(!_0x1fbe0e||_0x1fbe0e[_0x272443(0xc1f)]===0x0)return'';const _0x2b5294=_0x1fbe0e['slice'](0x0,0x5),_0xd74dfa=_0x2b5294['map'](_0x190803=>{const _0x2f10ad=_0x272443,_0x3d47e1=_0xe3a06(_0x190803[_0x2f10ad(0x719)])||{'name':'未知'};let _0x141729='-\x20[动态]\x20'+_0x3d47e1[_0x2f10ad(0x41a)]+'\x20说：“'+(_0x190803[_0x2f10ad(0xc7d)]||_0x190803[_0x2f10ad(0x297)])+'”';return _0x190803[_0x2f10ad(0x711)]===_0x2f10ad(0x64e)&&(_0x141729+=_0x2f10ad(0xa26)+_0x190803[_0x2f10ad(0xd09)]+'\x20-\x20'+_0x190803[_0x2f10ad(0x38b)]+')'),_0x141729;});return _0x272443(0x85e)+_0xd74dfa['join']('\x0a');}else _0x44ee83[_0x272443(0x2d9)]&&(_0x44ee83[_0x272443(0xc6e)]?'nElML'!=='rbUzg'?_0x44ee83[_0x272443(0x152)]():_0x2fdb36[_0x272443(0x850)]=!![]:_0x44ee83[_0x272443(0x939)]());});_0x19c49c&&_0x19c49c[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x54d47e=_0x412b90;if(_0x543bea[_0x54d47e(0x61b)][_0x54d47e(0xc1f)]===0x0)return;_0x543bea[_0x54d47e(0x786)]=(_0x543bea[_0x54d47e(0x786)]+0x1)%_0x543bea[_0x54d47e(0x61b)]['length'];const _0x1cd685=_0x543bea[_0x54d47e(0x61b)][_0x543bea[_0x54d47e(0x786)]]['id'];_0x401b2c(_0x1cd685,_0x543bea[_0x54d47e(0x61b)][_0x54d47e(0x257)](_0x26b470=>_0x26b470['id']));});if(_0x429cda){if(_0x412b90(0x2a9)===_0x412b90(0xa85)){const _0x3b6e2c=_0x466984[_0x412b90(0xc08)][_0x412b90(0xa24)]['date'],_0x2d6332=_0x2d32a1[_0x412b90(0x43a)][_0x3b6e2c];_0x2d6332&&_0x2b3410(_0x2d6332,_0x3b6e2c);}else _0x429cda[_0x412b90(0xbc8)]('click',()=>{const _0x10c19c=_0x412b90;if(_0x543bea[_0x10c19c(0x61b)]['length']===0x0)return;_0x543bea[_0x10c19c(0x786)]=(_0x543bea['currentlyPlayingIndex']-0x1+_0x543bea[_0x10c19c(0x61b)][_0x10c19c(0xc1f)])%_0x543bea[_0x10c19c(0x61b)][_0x10c19c(0xc1f)];const _0x169b50=_0x543bea[_0x10c19c(0x61b)][_0x543bea[_0x10c19c(0x786)]]['id'];_0x401b2c(_0x169b50,_0x543bea[_0x10c19c(0x61b)][_0x10c19c(0x257)](_0x16f407=>_0x16f407['id']));});}document[_0x412b90(0x51d)]('upload-card-button-2')[_0x412b90(0xbc8)](_0x412b90(0x779),()=>{const _0x2f386c=_0x412b90;document[_0x2f386c(0x51d)](_0x2f386c(0xd2c))['click']();}),document[_0x412b90(0x51d)](_0x412b90(0x671))[_0x412b90(0xbc8)]('click',async()=>{const _0x1607d5=_0x412b90;await _0x23455e(_0x1607d5(0xa1d)),localStorage['removeItem']('cardState2'),_0x4fbe3f(),_0x48e450(_0x1607d5(0x11c));}),document[_0x412b90(0x51d)](_0x412b90(0xd2c))[_0x412b90(0xbc8)]('change',async _0x17e22e=>{const _0x408d67=_0x412b90;if('RwunH'===_0x408d67(0xb00)){const _0x145263=_0x17e22e[_0x408d67(0x446)]['files'][0x0];if(!_0x145263)return;try{await _0x567110(_0x408d67(0xa1d),_0x145263),await _0x4fbe3f(),_0x48e450('卡片\x202\x20已更换！');}catch(_0x3f69a0){if(_0x408d67(0x24c)===_0x408d67(0x230))return _0x408d67(0x523);else _0x48e450(_0x408d67(0xcdc)+_0x3f69a0[_0x408d67(0x979)]);}}else _0x3afdee[_0x408d67(0x83b)](_0x160b92);}),_0x6f9412(),_0x10fe67(),_0x28f1be(),document[_0x412b90(0x51d)](_0x412b90(0x333))[_0x412b90(0xbc8)](_0x412b90(0x779),async()=>{const _0x3cb111=_0x412b90;if(_0x3cb111(0x8f8)!==_0x3cb111(0x2d1)){const _0x30d901=await _0x44efa2(_0x3cb111(0x9f7));if(_0x30d901){const _0x413f1c=await _0x44efa2(_0x3cb111(0xbd1));if(_0x413f1c){_0x2ee484(!![],'正在执行净化程序...');try{if(_0x3cb111(0x39b)!==_0x3cb111(0x1ca)){localStorage['clear']();const _0x101892=await _0x5e955c,_0x55f615=_0x101892[_0x3cb111(0x170)]([_0x3cb111(0x95f),_0x3cb111(0x24e),_0x3cb111(0x9f3)],_0x3cb111(0x96c));await Promise[_0x3cb111(0x71a)]([_0x55f615[_0x3cb111(0x327)]('images')[_0x3cb111(0xb46)](),_0x55f615[_0x3cb111(0x327)](_0x3cb111(0x24e))['clear'](),_0x55f615[_0x3cb111(0x327)](_0x3cb111(0x9f3))[_0x3cb111(0xb46)]()]),await new Promise(_0x4c6eea=>{const _0x1b0636=_0x3cb111;_0x1b0636(0x8fe)===_0x1b0636(0x54a)?_0x1ddf1c[_0x1b0636(0x1e2)][_0x1b0636(0xbd8)]=_0x1b0636(0x744)+_0x22f8de+'\x27)':_0x55f615[_0x1b0636(0x9e6)]=_0x4c6eea;}),_0x48e450(_0x3cb111(0x2f5)),setTimeout(()=>{const _0x1be1b2=_0x3cb111;location[_0x1be1b2(0x5f2)]();},0x5dc);}else{_0x20cd6f(_0x3cb111(0x1e1));return;}}catch(_0x48709b){if(_0x3cb111(0x158)!=='ijsIa'){const _0x3ef0f6=new _0x45b470(),_0x4c1a0f=_0x5757f4[_0x3cb111(0x51d)]('home-time'),_0x5c88a4=_0x204d61[_0x3cb111(0x51d)]('home-date');if(_0x4c1a0f&&_0x5c88a4){const _0x42765d=_0xa6d16(_0x3ef0f6[_0x3cb111(0x8bb)]())[_0x3cb111(0xa9f)](0x2,'0'),_0x200613=_0x3116a6(_0x3ef0f6['getMinutes']())['padStart'](0x2,'0');_0x4c1a0f[_0x3cb111(0x32a)]=_0x42765d+':'+_0x200613;const _0x479e13=_0x3ef0f6[_0x3cb111(0xc3f)]()+0x1,_0x1fdd65=_0x3ef0f6[_0x3cb111(0x3d6)](),_0xc1be2=[_0x3cb111(0x229),'星期一','星期二',_0x3cb111(0x182),_0x3cb111(0x4e6),_0x3cb111(0xb19),_0x3cb111(0x8a9)][_0x3ef0f6[_0x3cb111(0x848)]()];_0x5c88a4[_0x3cb111(0x32a)]=_0x479e13+'月'+_0x1fdd65+'日\x20'+_0xc1be2;}}else _0x2ee484(![]),_0x48e450('净化失败了，哼:\x20'+_0x48709b[_0x3cb111(0x979)]);}}}}else _0x50628[_0x3cb111(0xb1e)](_0x3cb111(0x857),_0x50f886),_0x400d22['removeItem']('currentLivestreamSession');});const _0x33920a=document[_0x412b90(0x820)](_0x412b90(0xb23));if(_0x33920a){if(_0x412b90(0x5ba)!=='ZxpvY'){const _0x2ed5ba=document[_0x412b90(0x23f)](_0x412b90(0xaee));_0x2ed5ba['id']='api-watermark',_0x2ed5ba[_0x412b90(0x32a)]=_0x412b90(0xcce),Object[_0x412b90(0xa48)](_0x2ed5ba[_0x412b90(0x1e2)],{'position':'absolute','top':_0x412b90(0xcaf),'right':_0x412b90(0x4c2),'fontSize':'0.7rem','lineHeight':_0x412b90(0xba6),'color':_0x412b90(0x8c7),'opacity':_0x412b90(0xc5e),'cursor':_0x412b90(0x6d4),'zIndex':'1','transition':_0x412b90(0xc4e),'whiteSpace':_0x412b90(0x92b),'textAlign':_0x412b90(0x687)}),_0x2ed5ba['onmouseover']=()=>{const _0x3af644=_0x412b90;_0x2ed5ba['style'][_0x3af644(0x48e)]='1';},_0x2ed5ba[_0x412b90(0x7ed)]=()=>{const _0x2ae275=_0x412b90;if(_0x2ae275(0x9d3)!==_0x2ae275(0x9d3))return[_0x4a6871];else _0x2ed5ba['style'][_0x2ae275(0x48e)]=_0x2ae275(0xc5e);},_0x2ed5ba['addEventListener'](_0x412b90(0x779),()=>{const _0x435459=_0x412b90;window[_0x435459(0x76f)]('https://xhslink.com/m/5IgC1rniI2I',_0x435459(0x343));}),_0x33920a[_0x412b90(0x1e2)][_0x412b90(0x9cf)]=_0x412b90(0x4ad),_0x33920a[_0x412b90(0xd4d)](_0x2ed5ba);}else{_0x308160();const _0x79a0d2=(_0x2aa3b6[_0x412b90(0xaff)][_0x412b90(0x3ea)]||'')['includes'](_0x487aaf);_0x15c571[_0x412b90(0xaa9)]=_0x79a0d2,_0x5d87cb(_0x412b90(0x38e),_0x412b90(0x3fb));}}_0x1abb79(),_0x4dc870();function _0x13c4d9(){const _0x185c2a=_0x412b90,_0x2fa968=document[_0x185c2a(0x51d)](_0x185c2a(0x2f0));_0x2fa968['innerHTML']='';const _0x1605e7=_0x543bea['characters'][_0x185c2a(0x78c)](_0x2157e4=>_0x543bea[_0x185c2a(0x94b)]['some'](_0x1f394c=>_0x1f394c[_0x185c2a(0x711)]===_0x185c2a(0x5fc)&&_0x1f394c[_0x185c2a(0x184)][_0x185c2a(0x32d)](_0x2157e4['id'])));if(_0x1605e7['length']===0x0){if(_0x185c2a(0xaf3)!=='pGkQC')_0x2d10ee*=_0x28f586/_0x49ba27,_0x5f2fd3=_0x28adee;else{_0x2fa968[_0x185c2a(0x4d5)]=_0x185c2a(0x68f);return;}}_0x1605e7['forEach'](_0x67e17a=>{const _0x14da4d=_0x185c2a,_0x552675=document['createElement']('li');_0x552675[_0x14da4d(0xa9d)]='character-item',_0x552675[_0x14da4d(0xa24)]['charId']=_0x67e17a['id'],_0x552675[_0x14da4d(0x4d5)]=_0x14da4d(0xa67)+(_0x67e17a['avatar']||_0x46536a)+_0x14da4d(0x670)+_0x67e17a[_0x14da4d(0x41a)]+_0x14da4d(0xd11),_0x552675['addEventListener'](_0x14da4d(0x779),()=>{_0x5dc0c5(_0x67e17a['id']);}),_0x2fa968['appendChild'](_0x552675);});}async function _0x5dc0c5(_0x40dc4b){const _0x59938b=_0x412b90,_0x3e1ff3=_0x509294(_0x40dc4b);if(!_0x3e1ff3)return;_0x543bea[_0x59938b(0x268)]=_0x40dc4b,document['getElementById'](_0x59938b(0x3cb))[_0x59938b(0x32a)]=_0x3e1ff3[_0x59938b(0x41a)]+_0x59938b(0x39c),_0x53ffb2('livestreamRoom',_0x59938b(0x48f));const _0x457a55=document[_0x59938b(0x51d)]('livestream-background'),_0x50ceed=document[_0x59938b(0x51d)](_0x59938b(0x15d)),_0x332ebe=document[_0x59938b(0x51d)](_0x59938b(0x661));_0x457a55[_0x59938b(0x1e2)][_0x59938b(0xbd8)]='',document[_0x59938b(0x51d)]('livestream-sprite')[_0x59938b(0x2d9)]='',_0x50ceed['innerHTML']='',_0x332ebe[_0x59938b(0x32a)]=_0x59938b(0x262);let _0x564b41=null;try{if(_0x59938b(0x209)!==_0x59938b(0x2be)){const _0x1f1588=localStorage[_0x59938b(0x760)](_0x59938b(0xc70));_0x1f1588&&(_0x564b41=JSON[_0x59938b(0x576)](_0x1f1588));}else{const _0x4d8068=_0x5c25a4[_0x59938b(0x23f)](_0x59938b(0xaee));_0x4d8068[_0x59938b(0xa9d)]=_0x59938b(0xa43)+_0x1f463c;const _0x432bee=_0x692de7['createElement'](_0x59938b(0x93f));_0x432bee[_0x59938b(0x2d9)]=_0x11c3a0,_0x432bee['className']=_0x59938b(0x5ec);const _0x398ebd=_0x219466[_0x59938b(0x23f)]('div');return _0x398ebd['className']=_0x59938b(0xbed),_0x276851&&(_0x398ebd[_0x59938b(0x1e2)][_0x59938b(0xbd8)]='url(\x27'+_0x4b9115+'\x27)'),_0x4d8068['appendChild'](_0x432bee),_0x4d8068['appendChild'](_0x398ebd),_0x4d8068;}}catch(_0x34202d){console['error'](_0x59938b(0x857),_0x34202d),localStorage[_0x59938b(0x584)]('currentLivestreamSession');}if(_0x564b41&&_0x564b41[_0x59938b(0x37d)]===_0x40dc4b){console[_0x59938b(0x68b)](_0x59938b(0xb73)),_0x543bea[_0x59938b(0x383)]=_0x564b41[_0x59938b(0x68b)]||[],_0x543bea[_0x59938b(0xbbc)]=_0x564b41['speechQueue']||[],_0x543bea[_0x59938b(0x249)]=_0x564b41[_0x59938b(0xac3)]||0x0,_0x543bea[_0x59938b(0x1a2)]=_0x564b41[_0x59938b(0x729)]||[],document[_0x59938b(0x51d)](_0x59938b(0x29b))[_0x59938b(0x1e2)][_0x59938b(0x930)]=_0x59938b(0x2f6),document[_0x59938b(0x51d)](_0x59938b(0x8ec))[_0x59938b(0x1e2)][_0x59938b(0x930)]=_0x59938b(0x338),_0x543bea['currentLivestreamLog'][_0x59938b(0xb36)](_0x5cc1dd=>{const _0x21087c=_0x59938b;if(_0x21087c(0x725)==='KFAvq'){if(_0x5cc1dd[_0x21087c(0x711)]===_0x21087c(0xa3e)){if(_0x21087c(0x944)==='VPBov'){_0x228708(_0x21087c(0x488));return;}else _0x103dce(_0x5cc1dd);}}else _0x50bd24[_0x21087c(0x840)]=[],_0x53bcee(),_0x522c29(),_0x23d5d8(_0x21087c(0x313));});const _0x604405=_0x543bea[_0x59938b(0xbbc)][_0x543bea[_0x59938b(0x249)]];if(_0x604405&&typeof _0x604405==='object'){if(_0x59938b(0x1bf)!==_0x59938b(0xbec))_0x332ebe['textContent']=_0x604405[_0x59938b(0x3c2)],_0x74c60e(_0x40dc4b,_0x604405[_0x59938b(0x6c0)]);else{const _0x5e5efe=_0x4e8151['value'][_0x59938b(0xad4)]()[_0x59938b(0x32d)](_0x5ad138);_0x323620[_0x59938b(0xaa9)]=_0x5e5efe;}}else typeof _0x604405===_0x59938b(0x2b1)?_0x332ebe[_0x59938b(0x32a)]=_0x604405:_0x332ebe[_0x59938b(0x32a)]=_0x59938b(0x21f);}else console[_0x59938b(0x68b)](_0x59938b(0x5b8)),_0x543bea['currentLivestreamLog']=[],_0x543bea[_0x59938b(0xbbc)]=[],_0x543bea[_0x59938b(0x249)]=-0x1,_0x543bea[_0x59938b(0x1a2)]=[],_0x332ebe[_0x59938b(0x32a)]='直播尚未开始...',document[_0x59938b(0x51d)](_0x59938b(0x29b))[_0x59938b(0x1e2)][_0x59938b(0x930)]=_0x59938b(0x94a),document[_0x59938b(0x51d)](_0x59938b(0x8ec))[_0x59938b(0x1e2)]['display']=_0x59938b(0x2f6);try{const _0x9a4c3c=await _0x54e221(_0x59938b(0xbae)+_0x40dc4b);if(_0x9a4c3c)_0x457a55[_0x59938b(0x1e2)][_0x59938b(0xbd8)]=_0x59938b(0x744)+URL[_0x59938b(0xcb2)](_0x9a4c3c)+'\x27)';else{const _0x5186ce=await _0x54e221('char_offline_bg_'+_0x40dc4b);if(_0x5186ce)_0x457a55[_0x59938b(0x1e2)][_0x59938b(0xbd8)]='url(\x27'+URL[_0x59938b(0xcb2)](_0x5186ce)+'\x27)';}(!_0x564b41||!_0x564b41['charId'])&&_0x74c60e(_0x40dc4b,_0x59938b(0x8a7));}catch(_0x170833){console[_0x59938b(0xb1e)](_0x59938b(0x47b),_0x170833);}}async function _0x25e86c(_0x2fa010,_0x3b617d){const _0x5952a7=_0x412b90;localStorage[_0x5952a7(0x584)](_0x5952a7(0xc70));if(_0x543bea['isGenerating'])return;document[_0x5952a7(0x51d)](_0x5952a7(0x29b))[_0x5952a7(0x1e2)][_0x5952a7(0x930)]='none',document[_0x5952a7(0x51d)]('livestream-controls-container')[_0x5952a7(0x1e2)][_0x5952a7(0x930)]='flex',_0x2ee484(!![],_0x5952a7(0x702)),_0x543bea[_0x5952a7(0xd1f)]=!![],_0x543bea['currentLivestreamLog']=[],_0x543bea[_0x5952a7(0xbbc)]=[],_0x543bea[_0x5952a7(0x249)]=-0x1;const _0xefe86a=_0x509294(_0x543bea[_0x5952a7(0x268)]),_0x1130c4=_0x2f2ed1(_0x543bea[_0x5952a7(0x886)]),{omniText:_0x232348}=_0x201955(_0xefe86a['id']),_0x4523a0=_0x5f3db6(_0xefe86a['id']),_0x2df72e=await _0xf54e02(_0xefe86a['id']),_0x4ee7c9=_0x402406(_0xefe86a['id']),_0x37d8b0=_0x1130c4[_0x5952a7(0x367)]?_0x5952a7(0x291)+_0x1130c4[_0x5952a7(0x41a)]+_0x5952a7(0x740)+_0x1130c4[_0x5952a7(0x367)]:'',_0x2f7cb7=new Date(),_0x579c4a='\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20'+_0x2f7cb7[_0x5952a7(0x5f4)](_0x5952a7(0xbd4),{'dateStyle':_0x5952a7(0xd0f),'timeStyle':_0x5952a7(0x90a)})+_0x5952a7(0x4d2);let _0x2de1df='';if(_0xefe86a[_0x5952a7(0xc49)]&&_0xefe86a[_0x5952a7(0xc49)][_0x5952a7(0xc1f)]>0x0){const _0x121312=_0xefe86a['linkedWorldBookIds'][_0x5952a7(0x257)](_0x1815d1=>_0x543bea[_0x5952a7(0x41e)][_0x5952a7(0xbe8)](_0x5472ec=>_0x5472ec['id']===_0x1815d1))['filter'](Boolean)['map'](_0x2dcb71=>'\x0a\x0a##\x20世界书条目:\x20'+_0x2dcb71['name']+'\x0a'+_0x2dcb71[_0x5952a7(0x297)])[_0x5952a7(0x4db)]('');_0x121312&&(_0x2de1df=_0x5952a7(0x9e4)+_0x121312);}const _0x6b34b9=document[_0x5952a7(0x51d)](_0x5952a7(0x15d)),_0x2eb2ae=document['getElementById'](_0x5952a7(0x661));_0x6b34b9[_0x5952a7(0x4d5)]='',_0x2eb2ae[_0x5952a7(0x32a)]=_0x5952a7(0x262);try{const _0x5b37d8=_0x5952a7(0x993)+_0x1130c4[_0x5952a7(0x41a)]+_0x5952a7(0x2dc)+_0xefe86a['name']+_0x5952a7(0x34c)+_0x579c4a+'\x20//\x20<---\x20哼，就是把这行加在这里！\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▼▼▼\x20在\x20startLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色核心资料\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20**你的核心人设**:\x20'+_0xefe86a[_0x5952a7(0x367)]+_0x5952a7(0xcbf)+_0x37d8b0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2de1df+_0x5952a7(0x13a)+_0x232348+_0x5952a7(0x373)+_0x4523a0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2df72e+_0x5952a7(0x373)+_0x4ee7c9+_0x5952a7(0x2c1)+_0x2fa010+_0x5952a7(0x683)+_0x3b617d+_0x5952a7(0xb37)+_0x1130c4['name']+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x0a\x20\x20\x20\x20\x20\x20\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22大家好，今天我们来聊聊...\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢大家的到来！\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20}\x0a\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人甲\x22,\x20\x22comment\x22:\x20\x22前排！\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人乙\x22,\x20\x22comment\x22:\x20\x22主播今天好帅！\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20#\x20emotion字段规则\x0a\x20\x20\x20\x20-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a\x20\x20\x20\x20-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x942173=[{'role':_0x5952a7(0xacc),'content':_0x5b37d8}];_0x942173[_0x5952a7(0xb47)]({'role':'user','content':_0x5952a7(0x2e7)});const _0x5ec726=await _0x3a4cad(_0x942173,{'json':!![]});let _0x49e5fb=_0x5ec726[_0x5952a7(0xad4)]();const _0x1a556c=_0x49e5fb[_0x5952a7(0x606)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x1a556c&&('vrRYw'===_0x5952a7(0x76e)?(_0x127e5a(_0x112fdf,{'force':!![],'delayMs':_0x4ed0d4}),_0x5348b2+=0x1f4):_0x49e5fb=_0x1a556c[0x1]['trim']());const _0x413a90=JSON[_0x5952a7(0x576)](_0x49e5fb);if(!_0x413a90||!_0x413a90[_0x5952a7(0xa75)]||!_0x413a90['danmaku'])throw new Error(_0x5952a7(0x9a1));_0x543bea['currentLivestreamSpeechQueue']=_0x413a90['streamerSpeech'],_0x543bea['currentSpeechIndex']=0x0;const _0x458294=_0x543bea['currentLivestreamSpeechQueue'][0x0];_0x2eb2ae['textContent']=_0x458294[_0x5952a7(0x3c2)],_0x74c60e(_0xefe86a['id'],_0x458294['emotion']),_0x543bea[_0x5952a7(0x383)][_0x5952a7(0xb47)]({'type':_0x5952a7(0x416),'speaker':_0xefe86a[_0x5952a7(0x41a)],'content':_0x458294[_0x5952a7(0x3c2)],'emotion':_0x458294[_0x5952a7(0x6c0)]}),_0x413a90[_0x5952a7(0xa3e)]['forEach'](_0x5efebe=>{const _0x4bdb9e=_0x5952a7,_0x1b62a1=document[_0x4bdb9e(0x23f)](_0x4bdb9e(0xaee));_0x1b62a1[_0x4bdb9e(0xa9d)]=_0x4bdb9e(0x1a5),_0x1b62a1[_0x4bdb9e(0x4d5)]=_0x4bdb9e(0x6a9)+_0x5efebe[_0x4bdb9e(0x8ed)]+':</span><span\x20class=\x22danmaku-comment\x22>'+_0x5efebe[_0x4bdb9e(0x751)]+_0x4bdb9e(0xcd7),_0x6b34b9[_0x4bdb9e(0xd4d)](_0x1b62a1),_0x543bea['currentLivestreamLog'][_0x4bdb9e(0xb47)]({'type':_0x4bdb9e(0xa3e),..._0x5efebe});});}catch(_0x202238){console[_0x5952a7(0xb1e)](_0x5952a7(0xc1a),_0x202238),_0x48e450(_0x5952a7(0xa51)+_0x202238[_0x5952a7(0x979)]),document['getElementById']('start-livestream-btn-container')['style'][_0x5952a7(0x930)]=_0x5952a7(0x94a),document[_0x5952a7(0x51d)](_0x5952a7(0x8ec))['style']['display']=_0x5952a7(0x2f6);}finally{_0x5952a7(0x7d8)!==_0x5952a7(0x175)?(_0x2ee484(![]),_0x543bea[_0x5952a7(0xd1f)]=![]):_0x362e3a['scrollTop']=_0x34739e['scrollHeight'];}}function _0x5903f6(){const _0x538539=_0x412b90;if(!_0x543bea[_0x538539(0xbbc)]||_0x543bea[_0x538539(0xbbc)]['length']===0x0)return;let _0xd67875=_0x543bea['currentSpeechIndex']+0x1;_0xd67875>=_0x543bea[_0x538539(0xbbc)][_0x538539(0xc1f)]&&(_0x538539(0x6f1)!==_0x538539(0x887)?_0xd67875=0x0:(_0x50febf[_0x538539(0x2d9)]=_0x1f8f47['createObjectURL'](_0x51049a),_0x55b404['style'][_0x538539(0x930)]=_0x538539(0x94a),_0x2f96bb[_0x538539(0x1e2)][_0x538539(0x643)]=_0x538539(0x2f6),_0x19d00[_0x538539(0x1e2)][_0x538539(0xb2e)]=_0x538539(0x712)));_0x543bea[_0x538539(0x249)]=_0xd67875;const _0x3c126c=_0x543bea['currentLivestreamSpeechQueue'][_0x543bea[_0x538539(0x249)]],_0x29adcd=document[_0x538539(0x51d)]('livestream-text');_0x29adcd['textContent']=_0x3c126c[_0x538539(0x3c2)],_0x74c60e(_0x543bea[_0x538539(0x268)],_0x3c126c[_0x538539(0x6c0)]);}function _0x103dce(_0x48eba8){const _0x57f028=_0x412b90,_0x3b56b2=document[_0x57f028(0x51d)](_0x57f028(0x15d)),_0x41a96c=document[_0x57f028(0x23f)](_0x57f028(0xaee));_0x41a96c[_0x57f028(0xa9d)]=_0x57f028(0x1a5);_0x48eba8[_0x57f028(0xd2a)]&&(_0x57f028(0xcd8)==='nnJON'?(_0x45967b(),_0x588826(_0x57f028(0x4e4),_0x57f028(0x3fb))):_0x41a96c[_0x57f028(0xa19)][_0x57f028(0x25d)]('is-user'));const _0x3db004=_0x48eba8['content']||_0x48eba8['comment']||'';_0x41a96c[_0x57f028(0x4d5)]=_0x57f028(0x6a9)+_0x48eba8['user']+_0x57f028(0x1e8)+_0x3db004+_0x57f028(0xcd7),_0x3b56b2[_0x57f028(0xd4d)](_0x41a96c);}const _0x267fa1=document[_0x412b90(0x51d)](_0x412b90(0x8f2)),_0x4c43cc=document[_0x412b90(0x51d)](_0x412b90(0x6b6));document[_0x412b90(0x51d)](_0x412b90(0x51c))[_0x412b90(0xbc8)]('click',_0x270d77);function _0x3ed28d(){const _0x226e79=_0x412b90,_0x27a85c=_0x4c43cc[_0x226e79(0x90f)]['trim']();if(!_0x27a85c)return;const _0x43feff=_0x2f2ed1(_0x543bea[_0x226e79(0x886)]),_0x4cb7d4={'type':'danmaku','user':_0x43feff[_0x226e79(0x41a)]||'我','content':_0x27a85c,'isUser':!![]};_0x103dce(_0x4cb7d4),_0x543bea[_0x226e79(0x1ae)][_0x226e79(0xb47)](_0x4cb7d4),_0x543bea[_0x226e79(0x383)][_0x226e79(0xb47)](_0x4cb7d4),_0x4c43cc[_0x226e79(0x90f)]='';}_0x267fa1[_0x412b90(0xbc8)]('click',_0x3ed28d),_0x4c43cc['addEventListener'](_0x412b90(0x830),_0xf75739=>{const _0x10b610=_0x412b90;_0xf75739[_0x10b610(0xc7f)]===_0x10b610(0x778)&&(_0xf75739[_0x10b610(0x9cb)](),_0x3ed28d());});function _0x457303(){const _0x10f9c4=_0x412b90;if(!_0x543bea[_0x10f9c4(0x268)]||document['getElementById'](_0x10f9c4(0x29b))['style'][_0x10f9c4(0x930)]==='block'){if(_0x10f9c4(0x591)!==_0x10f9c4(0x792))return;else{_0x5ce1d5[_0x10f9c4(0xa19)][_0x10f9c4(0x25d)](_0x10f9c4(0x68e));const _0x3d511c=_0x477b88[_0x10f9c4(0xcd4)]===_0x10f9c4(0x8ed)?_0x14129c(_0x5efee1[_0x10f9c4(0x886)]):_0x47f473(_0x2f01c3[_0x10f9c4(0x2fb)]),_0x1ffc48=_0x208d11[_0x10f9c4(0x458)]===_0x4dc33f(_0x256c01['activeChatId'])['id']?_0x322dbc(_0x4726a3[_0x10f9c4(0x886)]):_0x3926c5(_0x28609a[_0x10f9c4(0x458)]),_0x468fb9=_0x3d511c?.[_0x10f9c4(0x41a)]?_0x3d511c['name']+_0x10f9c4(0x878):'转账',_0x1f9eda=_0x1ffc48?.[_0x10f9c4(0x41a)]?_0x10f9c4(0x48c)+_0x1ffc48[_0x10f9c4(0x41a)]:'转账';_0x287ddc[_0x10f9c4(0x4d5)]+='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20'+_0x468fb9+_0x10f9c4(0x9dd)+_0x15c7e9[_0x10f9c4(0x650)][_0x10f9c4(0xb7b)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>'+_0x1f9eda+_0x10f9c4(0x1d9);}}const _0x3fdc99={'charId':_0x543bea[_0x10f9c4(0x268)],'log':_0x543bea[_0x10f9c4(0x383)],'speechQueue':_0x543bea[_0x10f9c4(0xbbc)],'speechIndex':_0x543bea[_0x10f9c4(0x249)],'dms':_0x543bea[_0x10f9c4(0x1a2)]};try{_0x10f9c4(0xbe0)==='Sefnr'?_0x5c132a[_0x10f9c4(0x1e2)]['transform']=_0x10f9c4(0x6aa):(localStorage['setItem'](_0x10f9c4(0xc70),JSON['stringify'](_0x3fdc99)),console[_0x10f9c4(0x68b)](_0x10f9c4(0x860)));}catch(_0x510d0c){_0x10f9c4(0x3ad)!==_0x10f9c4(0x5a8)?console[_0x10f9c4(0xb1e)](_0x10f9c4(0x37e),_0x510d0c):(_0x513a0a(![]),_0x1c7316[_0x10f9c4(0xb1e)]('导入账本失败:',_0x5458c9),_0x445eb3(_0x10f9c4(0xb54)+_0x5379b2[_0x10f9c4(0x979)]));}}async function _0x270d77(){const _0x1811b0=_0x412b90;if(_0x543bea[_0x1811b0(0xd1f)])return;_0x543bea[_0x1811b0(0x1ae)][_0x1811b0(0xc1f)]===0x0&&_0x48e450(_0x1811b0(0x435));_0x2ee484(!![],_0x1811b0(0x971)),_0x543bea[_0x1811b0(0xd1f)]=!![];const _0x46e885=_0x509294(_0x543bea[_0x1811b0(0x268)]),_0x3a96c=_0x2f2ed1(_0x543bea[_0x1811b0(0x886)]),{omniText:_0x3507b2}=_0x201955(_0x46e885['id']),_0x385fbd=_0x5f3db6(_0x46e885['id']),_0x682408=await _0xf54e02(_0x46e885['id']),_0x1ba923=_0x402406(_0x46e885['id']),_0x1c5de0=_0x3a96c['persona']?_0x1811b0(0x12a)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0xc68)+_0x3a96c[_0x1811b0(0x367)]:'',_0x2f3be0=new Date(),_0x5a2805=_0x1811b0(0x8db)+_0x2f3be0[_0x1811b0(0x5f4)]('zh-CN',{'dateStyle':_0x1811b0(0xd0f),'timeStyle':_0x1811b0(0x90a)})+_0x1811b0(0x4d2);let _0x4917b2='';if(_0x46e885[_0x1811b0(0xc49)]&&_0x46e885['linkedWorldBookIds'][_0x1811b0(0xc1f)]>0x0){if(_0x1811b0(0x445)==='LyMHe'){if(_0x18c749['name']!=='AbortError'){_0x2c2aac[_0x1811b0(0xb1e)](_0x1811b0(0x9c3),_0x3daf32);const _0x88bca0={'role':'assistant','content':_0x1811b0(0xcdc)+_0xe6413d[_0x1811b0(0x979)],'senderId':_0x514a62['id'],'isOffline':_0x5914ad};_0x18cbdd[_0x1811b0(0xc54)][_0x1811b0(0xb47)](_0x88bca0),_0xc2ad6b();}return![];}else{const _0x13852b=_0x46e885[_0x1811b0(0xc49)][_0x1811b0(0x257)](_0x4b37e3=>_0x543bea[_0x1811b0(0x41e)][_0x1811b0(0xbe8)](_0x62af36=>_0x62af36['id']===_0x4b37e3))[_0x1811b0(0x78c)](Boolean)[_0x1811b0(0x257)](_0xcd983e=>'\x0a\x0a##\x20世界书条目:\x20'+_0xcd983e[_0x1811b0(0x41a)]+'\x0a'+_0xcd983e['content'])[_0x1811b0(0x4db)]('');_0x13852b&&(_0x4917b2=_0x1811b0(0x9e4)+_0x13852b);}}try{const _0x82a6d2=_0x543bea[_0x1811b0(0x383)]['slice'](-0xf)['map'](_0x3471d1=>{const _0x7e11bb=_0x1811b0;if(_0x7e11bb(0x596)!=='okehU'){if(_0x3471d1[_0x7e11bb(0x711)]===_0x7e11bb(0x416))return _0x7e11bb(0x552)+_0x3471d1['speaker']+']：'+_0x3471d1[_0x7e11bb(0x297)];return'[弹幕\x20'+_0x3471d1[_0x7e11bb(0x8ed)]+']：'+(_0x3471d1[_0x7e11bb(0x751)]||_0x3471d1[_0x7e11bb(0x297)]);}else _0x297c09['error'](_0x7e11bb(0x797),_0xc35400);})[_0x1811b0(0x4db)]('\x0a'),_0x31d240=_0x543bea[_0x1811b0(0x1ae)][_0x1811b0(0x78c)](_0x47eba5=>_0x47eba5['type']===_0x1811b0(0xa3e))['map'](_0x1b6589=>_0x1811b0(0x946)+_0x1b6589[_0x1811b0(0x297)]+'\x22')[_0x1811b0(0x4db)]('\x0a'),_0x35aa50=_0x543bea[_0x1811b0(0x1ae)]['filter'](_0x4c11eb=>_0x4c11eb['type']===_0x1811b0(0x54d))[_0x1811b0(0x257)](_0x361544=>'-\x20'+_0x361544['name']+'\x20x'+_0x361544['count'])[_0x1811b0(0x4db)]('\x0a'),_0x2f7ede=_0x543bea[_0x1811b0(0x1ae)][_0x1811b0(0x78c)](_0x4fd2ae=>_0x4fd2ae[_0x1811b0(0x711)]==='dm')[_0x1811b0(0x257)](_0x23f2a0=>_0x1811b0(0x946)+_0x23f2a0['content']+'\x22')[_0x1811b0(0x4db)]('\x0a'),_0x12ac14=_0x1811b0(0x24b)+_0x3a96c[_0x1811b0(0x41a)]+'”所有近期互动的自然延续。\x0a2.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a3.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a你正在扮演“'+_0x46e885[_0x1811b0(0x41a)]+'”进行直播。\x0a\x0a'+_0x5a2805+_0x1811b0(0xd13)+_0x46e885[_0x1811b0(0x367)]+'\x0a-\x20**本场直播主题**:\x20(根据上下文自行判断)\x0a'+_0x1c5de0+'\x0a'+_0x4917b2+_0x1811b0(0xae6)+_0x3507b2+'\x0a---\x0a'+_0x385fbd+_0x1811b0(0xbcc)+_0x682408+_0x1811b0(0xbcc)+_0x1ba923+_0x1811b0(0x84e)+_0x82a6d2+'\x0a\x0a#\x20【最重要】来自“我”('+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0xa32)+(_0x31d240?_0x1811b0(0x27a)+_0x31d240:'')+'\x0a'+(_0x35aa50?'\x0a-\x20“我”送出的礼物:\x0a'+_0x35aa50:'')+'\x0a'+(_0x2f7ede?_0x1811b0(0x937)+_0x2f7ede:'')+'\x0a'+(!_0x31d240&&!_0x35aa50&&!_0x2f7ede?_0x1811b0(0x7b2):'')+_0x1811b0(0x811)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x8a2)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x264)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0xa14)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x7cd)+_0x3a96c['name']+'的特殊关照，建立更深的羁绊。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20添加结束\x20▲▲▲\x0a\x0a#\x20任务指令\x0a\x20\x20##\x20阶段一：主播的回应\x20(生成\x20streamerSpeech\x20和\x20privateMessageReply)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**最高优先级\x20-\x20回应私信**:\x20检查'+_0x3a96c[_0x1811b0(0x41a)]+'是否发送了私信。如果有，你【必须】通过“隔空喊话”或“私密回复”来回应。这是建立特殊羁绊的关键，绝对不许无视。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**第二优先级\x20-\x20回应互动**:\x20回应'+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x7df)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x803)+_0x3a96c[_0x1811b0(0x41a)]+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**核心焦点**:\x20这些路人观众的核心焦点应该是【主播你】和【你正在说的话题】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**反应逻辑**:\x20他们会针对你在【阶段一】中生成的\x20\x22streamerSpeech\x22\x20内容做出反应。例如，如果你感谢了礼物，他们可能会惊叹或跟风；如果你说了一个笑话，他们可能会发“哈哈哈”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**减少对'+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0x9ca)+_0x3a96c[_0x1811b0(0x41a)]+_0x1811b0(0xce9)+_0x3a96c['name']+_0x1811b0(0x5cd),_0x4edf1c=[{'role':'system','content':_0x12ac14}];_0x4edf1c['push']({'role':'user','content':_0x1811b0(0x5da)}),_0x543bea['currentLivestreamUserActions']=[];const _0x4d4ec6=await _0x3a4cad(_0x4edf1c,{'json':!![]});let _0x47c6b9=_0x4d4ec6[_0x1811b0(0xad4)]();const _0x3bfb99=_0x47c6b9[_0x1811b0(0x606)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x3bfb99&&(_0x47c6b9=_0x3bfb99[0x1][_0x1811b0(0xad4)]());const _0x3c0d68=JSON[_0x1811b0(0x576)](_0x47c6b9);if(_0x3c0d68[_0x1811b0(0xa75)]&&_0x3c0d68[_0x1811b0(0xa75)][_0x1811b0(0xc1f)]>0x0){_0x543bea[_0x1811b0(0xbbc)]=_0x3c0d68[_0x1811b0(0xa75)],_0x543bea[_0x1811b0(0x249)]=0x0;const _0x37b8b3=_0x543bea['currentLivestreamSpeechQueue'][0x0],_0x543cc6=document[_0x1811b0(0x51d)]('livestream-text');_0x543cc6['textContent']=_0x37b8b3[_0x1811b0(0x3c2)],_0x74c60e(_0x46e885['id'],_0x37b8b3[_0x1811b0(0x6c0)]),_0x543bea[_0x1811b0(0x383)]['push']({'type':_0x1811b0(0x416),'speaker':_0x46e885['name'],'content':_0x37b8b3['line'],'emotion':_0x37b8b3[_0x1811b0(0x6c0)]});}if(_0x3c0d68['danmaku'])for(const _0x4c8125 of _0x3c0d68[_0x1811b0(0xa3e)]){_0x103dce(_0x4c8125),_0x543bea[_0x1811b0(0x383)][_0x1811b0(0xb47)]({'type':_0x1811b0(0xa3e),..._0x4c8125}),await new Promise(_0xcb716a=>setTimeout(_0xcb716a,0xc8+Math['random']()*0x12c));}if(_0x3c0d68[_0x1811b0(0x20c)]){const _0x37229e=Array[_0x1811b0(0x8e1)](_0x3c0d68[_0x1811b0(0x20c)])?_0x3c0d68[_0x1811b0(0x20c)]:[_0x3c0d68[_0x1811b0(0x20c)]];for(const _0x43d48f of _0x37229e){_0x43d48f[_0x1811b0(0xad4)]()&&('dKddx'===_0x1811b0(0xa3b)?_0x319ed9(_0x14021d['imageId'])['then'](_0x185f42=>{const _0x342b01=_0x1811b0;if(_0x185f42){const _0x50c5c3=_0x38cc72[_0x342b01(0xcb2)](_0x185f42);_0x12b13e['src']=_0x50c5c3,_0x2ce2f7[_0x342b01(0x14a)]=()=>_0x3b57d1[_0x342b01(0x6eb)](_0x50c5c3);}}):_0x543bea[_0x1811b0(0x1a2)][_0x1811b0(0xb47)]({'sender':'ai','content':_0x43d48f[_0x1811b0(0xad4)]()}));}if(_0x543bea[_0x1811b0(0xab2)])_0x59b508();else{if(_0x1811b0(0xa02)!=='AlphZ'){_0x543bea[_0x1811b0(0x9a8)]=!![],_0x5f00dd();const _0x4dc1a4=_0x509294(_0x543bea[_0x1811b0(0x268)]);_0x48e450('【叮咚！收到来自\x20'+_0x4dc1a4[_0x1811b0(0x41a)]+_0x1811b0(0x849));}else _0x38c39a['error'](_0x1811b0(0x8cf)+_0x18ea4c['id'],_0x40db80),_0x59dbe9(_0x1811b0(0x27b));}}}catch(_0x16b883){_0x1811b0(0x52a)!==_0x1811b0(0x4a5)?(console[_0x1811b0(0xb1e)](_0x1811b0(0x36c),_0x16b883),_0x48e450(_0x1811b0(0x469)+_0x16b883[_0x1811b0(0x979)])):(_0x5c9401[_0x1811b0(0x939)](),_0x15b1e2[_0x1811b0(0x32a)]='▶');}finally{_0x2ee484(![]),_0x457303(),_0x543bea[_0x1811b0(0xd1f)]=![];}}async function _0x74c60e(_0x537c1a,_0x5c7a4e){const _0x2853a4=_0x412b90,_0x1c389c=document[_0x2853a4(0x51d)](_0x2853a4(0x707)),_0x4fde74=document[_0x2853a4(0x51d)](_0x2853a4(0x370));if(!_0x1c389c||!_0x4fde74)return;const _0x4310da=_0x509294(_0x537c1a),_0x410100=_0x4310da?.[_0x2853a4(0x969)]||{'x':0x32,'y':0x64,'scale':0x1};_0x4fde74[_0x2853a4(0x1e2)][_0x2853a4(0x135)]=0x55*_0x410100['scale']+'%',_0x4fde74['style'][_0x2853a4(0x34a)]=0x55*_0x410100[_0x2853a4(0x2e5)]+'%',_0x4fde74[_0x2853a4(0x1e2)]['left']=_0x410100['x']+'%',_0x4fde74[_0x2853a4(0x1e2)]['top']=_0x410100['y']+'%',_0x4fde74[_0x2853a4(0x1e2)]['transform']='translate(-50%,\x20-100%)';const _0x343d92=[_0x2853a4(0x8a7),_0x2853a4(0x772),_0x2853a4(0x80e),'sad',_0x2853a4(0xaf1)],_0x1b38fa=_0x343d92[_0x2853a4(0x32d)](_0x5c7a4e)?_0x5c7a4e:_0x2853a4(0x8a7);try{let _0x58a9b9=null;_0x58a9b9=await _0x54e221(_0x2853a4(0x52f)+_0x1b38fa+'_'+_0x537c1a);if(!_0x58a9b9)_0x58a9b9=await _0x54e221(_0x2853a4(0x9fc)+_0x1b38fa+'_'+_0x537c1a);if(!_0x58a9b9)_0x58a9b9=await _0x54e221('livestream_sprite_normal_'+_0x537c1a);if(!_0x58a9b9)_0x58a9b9=await _0x54e221(_0x2853a4(0x677)+_0x537c1a);_0x58a9b9?_0x1c389c[_0x2853a4(0x2d9)]=URL[_0x2853a4(0xcb2)](_0x58a9b9):_0x2853a4(0x621)===_0x2853a4(0x621)?_0x1c389c[_0x2853a4(0x2d9)]='':_0x3ef083[_0x2853a4(0xb36)](_0xd7e4d9=>{const _0x17f86e=_0x2853a4,_0x3ff963=_0x38f9a7[_0x17f86e(0x43a)][_0xd7e4d9],_0x5f4d19=_0x3ff963[_0x17f86e(0x64a)]['reduce']((_0x10f706,_0x4a7ad2)=>_0x10f706+(_0x4a7ad2['amount']||0x0),0x0);_0x384357+=_0x17f86e(0x90d)+_0xd7e4d9+_0x17f86e(0xc42)+_0xd7e4d9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20'+_0x5f4d19[_0x17f86e(0xb7b)](0x2)+_0x17f86e(0x169);});}catch(_0x2ef3e4){if(_0x2853a4(0x40d)===_0x2853a4(0x7cf)){const _0x4e6805=_0x1519d6[_0x2853a4(0x90f)];_0x4e9765['documentElement'][_0x2853a4(0x1e2)]['setProperty'](_0x2853a4(0x480),_0x4e6805),_0x2b4688['setItem'](_0x2853a4(0xb7f),_0x4e6805),_0x1c75cd();}else console['error'](_0x2853a4(0xd28),_0x2ef3e4),_0x1c389c['src']='';}}let _0x75f957=![],_0xb2df26={};function _0x22a372(){const _0xcc99d5=_0x412b90,_0x46ed8a=_0x509294(_0x543bea[_0xcc99d5(0x268)]);if(!_0x46ed8a)return;_0x75f957=!![],document[_0xcc99d5(0x51d)](_0xcc99d5(0x7f2))[_0xcc99d5(0x1e2)][_0xcc99d5(0x930)]='block';const _0x51b355=_0x46ed8a[_0xcc99d5(0x969)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0xcc99d5(0x51d)](_0xcc99d5(0x3f1))[_0xcc99d5(0x90f)]=_0x51b355['x'],document[_0xcc99d5(0x51d)]('livestream-sprite-slider-y')[_0xcc99d5(0x90f)]=_0x51b355['y'],document['getElementById']('livestream-sprite-slider-scale')[_0xcc99d5(0x90f)]=_0x51b355[_0xcc99d5(0x2e5)]*0x64,_0xb2df26={..._0x51b355},document[_0xcc99d5(0x51d)](_0xcc99d5(0xb13))[_0xcc99d5(0x1e2)][_0xcc99d5(0x930)]='none',document['getElementById'](_0xcc99d5(0xb55))['style'][_0xcc99d5(0x930)]=_0xcc99d5(0x2f6);}function _0x5ba182(_0x104314=![]){const _0x20b76e=_0x412b90;if(_0x20b76e(0x904)!==_0x20b76e(0x904)){_0x361dd7[_0x20b76e(0x24d)]=_0x17ed5f[_0x20b76e(0x24d)]['filter'](_0x17a6a9=>_0x17a6a9['id']!==_0x51a1fb),_0x49c4a4[_0x20b76e(0x94b)]['forEach'](_0x1560a5=>{const _0x34a241=_0x20b76e;_0x1560a5[_0x34a241(0x711)]===_0x34a241(0x91b)&&(_0x1560a5['participantIds']=_0x1560a5[_0x34a241(0x184)][_0x34a241(0x78c)](_0xa9ad20=>_0xa9ad20!==_0x1fb5f4));});const _0x1aa0a7=_0x486a04[_0x20b76e(0x94b)][_0x20b76e(0xbe8)](_0x1b9294=>_0x1b9294[_0x20b76e(0x711)]===_0x20b76e(0x5fc)&&_0x1b9294[_0x20b76e(0x184)][_0x20b76e(0x32d)](_0x335408));_0x1aa0a7&&_0x4d86b6(_0x1aa0a7['id']),_0x17b143['chats']=_0x66cc58['chats'][_0x20b76e(0x78c)](_0x48d7ba=>_0x48d7ba[_0x20b76e(0x711)]!==_0x20b76e(0x91b)||_0x48d7ba[_0x20b76e(0x184)][_0x20b76e(0xc1f)]>0x1),_0x592497(),_0x10912a();}else{_0x75f957=![],document[_0x20b76e(0x51d)](_0x20b76e(0x7f2))[_0x20b76e(0x1e2)][_0x20b76e(0x930)]=_0x20b76e(0x2f6),document[_0x20b76e(0x51d)](_0x20b76e(0xb13))[_0x20b76e(0x1e2)][_0x20b76e(0x930)]='block',document[_0x20b76e(0x51d)]('livestream-header-right')[_0x20b76e(0x1e2)][_0x20b76e(0x930)]='flex';if(!_0x104314){if('HAInN'!==_0x20b76e(0x38a))_0x2e84eb['setItem'](_0x5039d3,_0x4ff82e[_0x20b76e(0x427)](_0x202988));else{const _0x1c6c71=_0x509294(_0x543bea[_0x20b76e(0x268)]);_0x1c6c71&&('sJEoQ'===_0x20b76e(0x300)?_0x37f9ba[_0x20b76e(0xb66)]=_0x8c24e0(()=>{const _0x2f81ff=_0x20b76e;if(_0x1fcd29[_0x2f81ff(0x711)]==='touchstart')_0x29e8cd[_0x2f81ff(0x9cb)]();_0x3ac0f5(_0x1b0f02(_0x5eaa77,0xa),_0x139624);},0x320):(_0x1c6c71[_0x20b76e(0x969)]=_0xb2df26,_0x74c60e(_0x543bea[_0x20b76e(0x268)],_0x20b76e(0x8a7))));}}}}function _0x2d966a(){const _0x503113=_0x412b90;if(_0x503113(0xb4f)===_0x503113(0x750))_0x5c2c89(_0x503113(0x3dd)+_0xbe120b[_0x503113(0x979)]);else{const _0x5f56e3=_0x509294(_0x543bea[_0x503113(0x268)]);if(!_0x5f56e3)return;const _0x382d43=parseFloat(document['getElementById'](_0x503113(0x3f1))[_0x503113(0x90f)]),_0x423d19=parseFloat(document[_0x503113(0x51d)]('livestream-sprite-slider-y')[_0x503113(0x90f)]),_0x1efb00=parseFloat(document[_0x503113(0x51d)]('livestream-sprite-slider-scale')['value'])/0x64;_0x5f56e3[_0x503113(0x969)]={'x':_0x382d43,'y':_0x423d19,'scale':_0x1efb00},_0x1a0f1f(),_0x48e450(_0x503113(0x3c7)),_0x5ba182(!![]);}}function _0x1a7a4a(){const _0x27d25c=_0x412b90;if(_0x27d25c(0xbc2)===_0x27d25c(0xcfc)){const _0xbf0e56=_0x3ffb4a[_0x27d25c(0xa24)][_0x27d25c(0x903)],_0x3b7c7e=_0xa2d254['querySelectorAll']('.wb-entry-item\x20input[data-category-id=\x22'+_0xbf0e56+'\x22]'),_0x5b71bb=_0x16bf04['querySelectorAll'](_0x27d25c(0x617)+_0xbf0e56+_0x27d25c(0x43d));_0x5b71bb[_0x27d25c(0xc1f)]>0x0&&_0x5b71bb[_0x27d25c(0xc1f)]<_0x3b7c7e[_0x27d25c(0xc1f)]&&(_0x3ecafe[_0x27d25c(0x850)]=!![]);}else _0x44efa2(_0x27d25c(0x52c))[_0x27d25c(0x842)](_0xf687d7=>{const _0x3146bd=_0x27d25c;if(_0xf687d7){const _0x3ca9be=_0x509294(_0x543bea['activeLivestreamCharId']);_0x3ca9be&&(delete _0x3ca9be[_0x3146bd(0x969)],_0x1a0f1f(),_0x74c60e(_0x3ca9be['id'],_0x3146bd(0x8a7)),_0x48e450(_0x3146bd(0xb81)),_0x5ba182(!![]));}});}function _0x4e4bd9(){const _0x57ea68=_0x412b90;if(_0x57ea68(0x467)==='oRBfQ'){if(!_0x75f957)return;const _0x32e2a7=parseFloat(document[_0x57ea68(0x51d)](_0x57ea68(0x3f1))[_0x57ea68(0x90f)]),_0x5e6fe5=parseFloat(document[_0x57ea68(0x51d)]('livestream-sprite-slider-y')[_0x57ea68(0x90f)]),_0xee16f9=parseFloat(document['getElementById'](_0x57ea68(0xcc5))[_0x57ea68(0x90f)])/0x64,_0x50cd6d=document[_0x57ea68(0x51d)]('livestream-sprite-container');_0x50cd6d&&(_0x50cd6d[_0x57ea68(0x1e2)]['height']=0x55*_0xee16f9+'%',_0x50cd6d['style'][_0x57ea68(0x34a)]=0x55*_0xee16f9+'%',_0x50cd6d[_0x57ea68(0x1e2)][_0x57ea68(0xa12)]=_0x32e2a7+'%',_0x50cd6d[_0x57ea68(0x1e2)][_0x57ea68(0x49d)]=_0x5e6fe5+'%',_0x50cd6d['style']['transform']='translate(-50%,\x20-100%)');}else _0x27cfb5(),_0x4978d8[_0x57ea68(0x51d)](_0x57ea68(0x645))[_0x57ea68(0xa19)]['remove'](_0x57ea68(0x6db)),_0x46b1af['getElementById'](_0x57ea68(0x1de))[_0x57ea68(0x1e2)][_0x57ea68(0x930)]=_0x57ea68(0x2f6),_0x4ff3cf(()=>{const _0x2b5ef9=_0x57ea68;_0x2d2322(_0x2b5ef9(0x3fb),_0x2b5ef9(0x69f));},0x14);}async function _0x4916d4(){const _0x16c958=_0x412b90;if('aVNuh'!=='OsKuG'){if(_0x543bea[_0x16c958(0xd1f)]){if('DjhLu'===_0x16c958(0x9b5)){_0x48e450('正在回应中，别急。');return;}else _0x845dfe>_0x143ea1&&(_0x56916a*=_0x565d7e/_0x2bf682,_0x52828e=_0x43a886);}const _0x289852=_0x543bea[_0x16c958(0x383)];if(_0x289852[_0x16c958(0xc1f)]===0x0)return;let _0x1807ac=-0x1;for(let _0x2650ec=_0x289852[_0x16c958(0xc1f)]-0x1;_0x2650ec>=0x0;_0x2650ec--){if('reCQT'!=='reCQT'){_0x5ef27a(_0x16c958(0xb06));return;}else{if(_0x289852[_0x2650ec][_0x16c958(0xd2a)]||_0x289852[_0x2650ec][_0x16c958(0x711)]==='dm'||_0x289852[_0x2650ec]['type']===_0x16c958(0x54d)){if(_0x16c958(0x3c1)!==_0x16c958(0x691)){_0x1807ac=_0x2650ec;break;}else{if(_0x18979f['musicPlaylist'][_0x16c958(0xc1f)]===0x0)return;_0x39fa14[_0x16c958(0x786)]=(_0x32e2c8['currentlyPlayingIndex']+0x1)%_0x5ab28a[_0x16c958(0x61b)][_0x16c958(0xc1f)];const _0x315285=_0x2c4bdd['musicPlaylist'][_0x323eff[_0x16c958(0x786)]]['id'];_0x2802b5(_0x315285,_0x3ac63e[_0x16c958(0x61b)]['map'](_0x3e1586=>_0x3e1586['id']));}}}}if(_0x1807ac===-0x1||_0x1807ac===_0x289852['length']-0x1){if(_0x16c958(0x82c)!=='kdHce'){_0x48e450(_0x16c958(0x488));return;}else return'刚才';}_0x289852[_0x16c958(0x278)](_0x1807ac+0x1),_0x543bea[_0x16c958(0xbbc)]=[],_0x543bea[_0x16c958(0x249)]=-0x1,document[_0x16c958(0x51d)](_0x16c958(0x661))[_0x16c958(0x32a)]=_0x16c958(0x262);const _0x291787=document[_0x16c958(0x51d)](_0x16c958(0x15d));_0x291787[_0x16c958(0x4d5)]='',_0x289852['forEach'](_0x277999=>{const _0x2477b5=_0x16c958;if(_0x2477b5(0x98d)===_0x2477b5(0x418)){_0x54872a[_0x2477b5(0x90f)]='';return;}else _0x277999[_0x2477b5(0x711)]==='danmaku'&&_0x103dce(_0x277999);}),_0x457303();const _0x36d2e8=_0x289852[_0x16c958(0xb41)](_0x1807ac)[_0x16c958(0x78c)](_0x269035=>_0x269035[_0x16c958(0xd2a)]||_0x269035[_0x16c958(0x711)]==='dm'||_0x269035[_0x16c958(0x711)]===_0x16c958(0x54d));_0x543bea[_0x16c958(0x1ae)][_0x16c958(0xb47)](..._0x36d2e8),setTimeout(()=>{const _0x533808=_0x16c958;'idiMp'===_0x533808(0x14e)?_0x43fdf0[_0x533808(0xc49)]&&(_0x27779b[_0x533808(0xc49)]=_0x131f65[_0x533808(0xc49)][_0x533808(0x78c)](_0xadcaa5=>_0xadcaa5!==_0xfbc6b5)):_0x270d77();},0x64);}else _0x197fcc(_0x16c958(0xcdc)+_0x31e2ad[_0x16c958(0x979)]);}function _0x4dc870(){const _0x1ec039=_0x412b90;document[_0x1ec039(0x51d)]('livestream-sprite-adjust-btn')[_0x1ec039(0xbc8)]('click',_0x22a372),document['getElementById'](_0x1ec039(0x8d9))['addEventListener'](_0x1ec039(0x779),_0x8a99b9),document[_0x1ec039(0x51d)](_0x1ec039(0x4c6))['addEventListener']('click',_0x4916d4),document[_0x1ec039(0x51d)](_0x1ec039(0x46c))[_0x1ec039(0xbc8)]('click',_0x2d966a),document[_0x1ec039(0x51d)](_0x1ec039(0xd48))['addEventListener'](_0x1ec039(0x779),()=>_0x5ba182(![])),document[_0x1ec039(0x51d)](_0x1ec039(0x942))[_0x1ec039(0xbc8)]('click',_0x1a7a4a),document[_0x1ec039(0x51d)](_0x1ec039(0x3f1))[_0x1ec039(0xbc8)](_0x1ec039(0xa5e),_0x4e4bd9),document[_0x1ec039(0x51d)](_0x1ec039(0x7f9))['addEventListener'](_0x1ec039(0xa5e),_0x4e4bd9),document['getElementById']('livestream-sprite-slider-scale')['addEventListener']('input',_0x4e4bd9);}async function _0x229049(){const _0x25949b=_0x412b90;if(_0x25949b(0xc57)!=='HaphS'){const _0x586451=_0x4aabad(_0x43ec3c[_0x25949b(0x80c)]);_0x586451&&(_0x586451[_0x25949b(0x698)]=_0x18f5c5,_0x19076a(_0x50bd30[_0x25949b(0x80c)],_0x25949b(0x8a7)));}else{const _0x2fe9e2=_0x543bea['activeLivestreamCharId'];if(!_0x2fe9e2)return;_0x53ffb2('livestreamSettings','livestreamRoom');const _0x2bc6e1=[_0x25949b(0x8a7),_0x25949b(0x772),'angry','sad',_0x25949b(0xaf1)];document['getElementById'](_0x25949b(0x9a7))[_0x25949b(0x1e2)][_0x25949b(0xbd8)]='',_0x2bc6e1[_0x25949b(0xb36)](_0x4c0ab0=>{const _0x557055=_0x25949b;document[_0x557055(0x51d)](_0x557055(0x43f)+_0x4c0ab0+'-preview')[_0x557055(0x1e2)][_0x557055(0xbd8)]='';});try{if(_0x25949b(0xa5f)==='DrOca')_0x3add8b(_0x26ef7f+0x1);else{const _0x4a5ab1=await _0x54e221(_0x25949b(0xbae)+_0x2fe9e2);if(_0x4a5ab1)document['getElementById'](_0x25949b(0x9a7))['style']['backgroundImage']='url(\x27'+URL[_0x25949b(0xcb2)](_0x4a5ab1)+'\x27)';for(const _0x104cb8 of _0x2bc6e1){const _0xfe930f=await _0x54e221('livestream_sprite_'+_0x104cb8+'_'+_0x2fe9e2);_0xfe930f&&(document['getElementById']('livestream-sprite-'+_0x104cb8+'-preview')[_0x25949b(0x1e2)][_0x25949b(0xbd8)]=_0x25949b(0x744)+URL[_0x25949b(0xcb2)](_0xfe930f)+'\x27)');}}}catch(_0x87d3b5){console[_0x25949b(0xb1e)](_0x25949b(0xadb),_0x87d3b5);}}}async function _0x3d4501(){const _0x967209=_0x412b90,_0x27abb0=_0x543bea[_0x967209(0x268)];if(!_0x27abb0)return;_0x2ee484(!![],_0x967209(0x86e));try{const _0xb9e49d=document['getElementById']('livestream-bg-input')['files'][0x0];if(_0xb9e49d)await _0x567110(_0x967209(0xbae)+_0x27abb0,_0xb9e49d);const _0x2ae7da=[_0x967209(0x8a7),_0x967209(0x772),_0x967209(0x80e),_0x967209(0x348),_0x967209(0xaf1)];for(const _0x3c7b83 of _0x2ae7da){if('lROgu'===_0x967209(0xae0))return _0x419105['characters']['find'](_0x32b597=>_0x32b597['id']===_0x26de7d);else{const _0x2b0193=document[_0x967209(0x51d)](_0x967209(0x43f)+_0x3c7b83+_0x967209(0xa3c))[_0x967209(0x730)][0x0];if(_0x2b0193)await _0x567110('livestream_sprite_'+_0x3c7b83+'_'+_0x27abb0,_0x2b0193);}}_0x1a0f1f(),_0x48e450(_0x967209(0x2b7)),await _0x5dc0c5(_0x27abb0),_0x53ffb2(_0x967209(0x99d),_0x967209(0x908));}catch(_0x12a9f0){_0x48e450(_0x967209(0x4cf)+_0x12a9f0[_0x967209(0x979)]);}finally{'wxQoH'!=='wnNeN'?_0x2ee484(![]):(_0x33dfad(![]),_0x225abf[_0x967209(0xb1e)](_0x967209(0xd15),_0x5bdc27),_0x5a99e1(_0x967209(0x783)+_0x45cf33[_0x967209(0x979)]+'\x20'));}}function _0x1abb79(){const _0x2b2df8=_0x412b90;if('oTOQN'==='KNoBg')_0x2e27a5[_0x2b2df8(0x83b)](_0x490b17),_0x1f4b46[_0x2b2df8(0x83b)](_0x287108);else{document['getElementById'](_0x2b2df8(0x52d))[_0x2b2df8(0xbc8)]('click',_0x229049),document[_0x2b2df8(0x51d)](_0x2b2df8(0x611))[_0x2b2df8(0xbc8)](_0x2b2df8(0x779),()=>_0x53ffb2(_0x2b2df8(0x99d),_0x2b2df8(0x908))),document['getElementById'](_0x2b2df8(0x693))[_0x2b2df8(0xbc8)]('click',_0x3d4501),document[_0x2b2df8(0x51d)](_0x2b2df8(0x9a7))[_0x2b2df8(0xbc8)](_0x2b2df8(0x779),()=>document[_0x2b2df8(0x51d)](_0x2b2df8(0x2d4))['click']()),document[_0x2b2df8(0x51d)](_0x2b2df8(0x2d4))['addEventListener']('change',_0x52393a=>{const _0x596dbe=_0x2b2df8,_0x5a6de7=_0x52393a[_0x596dbe(0x446)][_0x596dbe(0x730)][0x0];if(_0x5a6de7)document[_0x596dbe(0x51d)]('livestream-bg-preview')['style'][_0x596dbe(0xbd8)]='url(\x27'+URL[_0x596dbe(0xcb2)](_0x5a6de7)+'\x27)';});const _0x407078=[_0x2b2df8(0x8a7),_0x2b2df8(0x772),'angry',_0x2b2df8(0x348),_0x2b2df8(0xaf1)];_0x407078[_0x2b2df8(0xb36)](_0x3c4c68=>{const _0x4199af=_0x2b2df8,_0xc795db=document['getElementById']('livestream-sprite-'+_0x3c4c68+'-preview'),_0xbedd81=document['getElementById'](_0x4199af(0x43f)+_0x3c4c68+_0x4199af(0xa3c));_0xc795db[_0x4199af(0xbc8)](_0x4199af(0x779),()=>_0xbedd81[_0x4199af(0x779)]()),_0xbedd81['addEventListener'](_0x4199af(0xb2a),_0x56dc6f=>{const _0x1241b8=_0x4199af;if('xxFEz'===_0x1241b8(0x874)){const _0x582fe6=_0x56dc6f[_0x1241b8(0x446)][_0x1241b8(0x730)][0x0];if(_0x582fe6)_0xc795db['style']['backgroundImage']=_0x1241b8(0x744)+URL['createObjectURL'](_0x582fe6)+'\x27)';}else _0x3bc5f8[_0x1241b8(0x4d5)]=_0x1241b8(0x582)+_0x2c7d4e+_0x1241b8(0x564)+_0x40dd4c+_0x1241b8(0x3ab)+_0x395c8a['songName']+_0x1241b8(0x699)+_0x3c9f8e[_0x1241b8(0x38b)]+_0x1241b8(0x7bb)+_0x1d3644[_0x1241b8(0x8bd)]+_0x1241b8(0x9c0);});});}}function _0x53c6eb(){const _0x6c3687=_0x412b90;console[_0x6c3687(0x68b)]('TODO:\x20结束直播并生成总结');}document[_0x412b90(0x51d)]('livestream-textbox-container')[_0x412b90(0xbc8)](_0x412b90(0x779),_0x5903f6);const _0x7bafca=document[_0x412b90(0x51d)](_0x412b90(0x2b4)),_0x1f5259=document[_0x412b90(0x51d)](_0x412b90(0x728)),_0x269400=document[_0x412b90(0x51d)](_0x412b90(0xc7c)),_0x15c288=document[_0x412b90(0x51d)](_0x412b90(0x28b)),_0x1a00a0=document[_0x412b90(0x51d)](_0x412b90(0x3cf)),_0x55148b=document['getElementById'](_0x412b90(0x9ad)),_0x54ebaa=document[_0x412b90(0x51d)]('audience-mood-input');_0x7bafca[_0x412b90(0xbc8)]('click',()=>{const _0x4b16fe=_0x412b90;_0x4b16fe(0xc71)===_0x4b16fe(0x85c)?_0x5a305c[_0x4b16fe(0x32a)]=_0x15014b[_0x4b16fe(0x382)](_0x2bac49)[_0x4b16fe(0x257)](_0x401ab9=>_0x401ab9[_0x4b16fe(0x2a6)]['textContent'][_0x4b16fe(0xad4)]())[_0x4b16fe(0x4db)]('、'):(_0x55148b['value']='',_0x54ebaa[_0x4b16fe(0x90f)]='',_0x1f5259[_0x4b16fe(0xa19)]['add']('show'),_0x55148b[_0x4b16fe(0x72b)]());});const _0x143fe0=()=>_0x1f5259[_0x412b90(0xa19)][_0x412b90(0xab0)](_0x412b90(0x6db));_0x15c288[_0x412b90(0xbc8)](_0x412b90(0x779),_0x143fe0),_0x1a00a0[_0x412b90(0xbc8)](_0x412b90(0x779),_0x143fe0),_0x269400[_0x412b90(0xbc8)]('click',()=>{const _0x52d6ce=_0x412b90;if(_0x52d6ce(0x988)===_0x52d6ce(0x89e))_0x5342ed&&_0x3251b1(_0x5768db);else{const _0x1a17c9=_0x55148b[_0x52d6ce(0x90f)][_0x52d6ce(0xad4)](),_0x467275=_0x54ebaa['value'][_0x52d6ce(0xad4)]();if(!_0x1a17c9||!_0x467275){if(_0x52d6ce(0x4fb)===_0x52d6ce(0x4fb)){_0x48e450(_0x52d6ce(0x1f4));return;}else{const _0x127741=_0x5dfb9a[_0x52d6ce(0x882)][_0x52d6ce(0xbe8)](_0x10ef49=>_0x10ef49['id']===_0x409f67);if(!_0x127741)return;_0x261b05['textContent']='编辑好友圈',_0x11dad0[_0x52d6ce(0x90f)]=_0x127741['id'],_0x9dd8c6['value']=_0x127741[_0x52d6ce(0x41a)],_0x47bc24['value']=_0x127741['boundUserProfileId'],_0x2398db[_0x52d6ce(0x1e2)][_0x52d6ce(0x930)]=_0x52d6ce(0x94a),_0x127741[_0x52d6ce(0x42a)][_0x52d6ce(0xb36)](_0x23a86e=>{const _0x285a16=_0x52d6ce,_0x231072=_0x1951d0[_0x285a16(0x820)](_0x285a16(0x1d7)+_0x23a86e);if(_0x231072)_0x231072['checked']=!![];});}}_0x143fe0(),_0x25e86c(_0x1a17c9,_0x467275);}}),document[_0x412b90(0x51d)]('back-to-home-from-livestream-list')[_0x412b90(0xbc8)]('click',()=>_0x53ffb2(_0x412b90(0x3fb),_0x412b90(0x48f))),document[_0x412b90(0x51d)](_0x412b90(0xa1b))['addEventListener']('click',()=>{const _0x2a2026=_0x412b90,_0x19f3f4=document[_0x2a2026(0x51d)](_0x2a2026(0x29b))[_0x2a2026(0x1e2)][_0x2a2026(0x930)]===_0x2a2026(0x2f6);_0x19f3f4?_0x44efa2(_0x2a2026(0xb5a))[_0x2a2026(0x842)](async _0x5067d2=>{const _0x44cf8e=_0x2a2026;if(_0x5067d2){if(_0x44cf8e(0x44e)!==_0x44cf8e(0x44e)){const _0x116d3c=_0x33cf49['transaction'](_0x2e4fa8,_0x44cf8e(0x96c)),_0x326021=_0x116d3c[_0x44cf8e(0x327)](_0x2cb5db),_0xf558ff=_0x326021['put']({'id':_0x71b7c6,'data':_0x1a01f2});_0xf558ff[_0x44cf8e(0x487)]=()=>_0x490826(),_0xf558ff[_0x44cf8e(0x122)]=()=>_0x152ab0(_0xf558ff[_0x44cf8e(0xb1e)]);}else _0x457303(),await _0x9aa77a(),localStorage[_0x44cf8e(0x584)]('currentLivestreamSession'),_0x48e450('直播已结束。'),_0x53ffb2(_0x44cf8e(0x48f),'livestreamRoom');}}):_0x53ffb2(_0x2a2026(0x48f),_0x2a2026(0x99d));});const _0x485137=document['getElementById'](_0x412b90(0xd56)),_0x591082=document[_0x412b90(0x51d)](_0x412b90(0x55a));_0x485137&&_0x591082&&('aYXSF'!==_0x412b90(0xbc9)?_0x5760b2=_0x412b90(0x247)+_0x5aa38c['name']+'”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。':(_0x485137[_0x412b90(0xbc8)](_0x412b90(0x779),()=>_0x591082['click']()),_0x591082[_0x412b90(0xbc8)]('change',_0x2bbbd0))),document[_0x412b90(0x51d)]('confirm-altar-upload-button')['addEventListener'](_0x412b90(0x779),_0x3b6dc0);}const _0xe51d70='music_library';async function _0x30f5fc(_0xb3c3f1){const _0x444825=_0x3b741d;if(_0x444825(0xcb8)!==_0x444825(0x507)){const _0x9ce40e=await _0x5e955c;return new Promise((_0x41e9bc,_0x19e273)=>{const _0x2768ac=_0x444825,_0x584b56=_0x9ce40e[_0x2768ac(0x170)](_0xe51d70,_0x2768ac(0x366)),_0x2e6c74=_0x584b56[_0x2768ac(0x327)](_0xe51d70),_0x3f9103=_0x2e6c74[_0x2768ac(0x1f8)](_0xb3c3f1);_0x3f9103[_0x2768ac(0x487)]=()=>_0x41e9bc(_0x3f9103['result']),_0x3f9103[_0x2768ac(0x122)]=()=>_0x19e273(_0x3f9103[_0x2768ac(0xb1e)]);});}else{_0xaaffae['textContent']=_0x444825(0xa9b);return;}}async function _0x4842ec(){const _0x2a1099=await _0x5e955c;return new Promise((_0x18909d,_0x4d38ba)=>{const _0x355c93=_0x53d2,_0x1c5deb=_0x2a1099[_0x355c93(0x170)](_0xe51d70,_0x355c93(0x366)),_0x518dd6=_0x1c5deb['objectStore'](_0xe51d70),_0x32d2e1=_0x518dd6[_0x355c93(0x1d3)]();_0x32d2e1['onsuccess']=()=>_0x18909d(_0x32d2e1['result']),_0x32d2e1[_0x355c93(0x122)]=()=>_0x4d38ba(_0x32d2e1[_0x355c93(0xb1e)]);});}async function _0x11fe42(_0xe249e9){const _0x7a11d5=await _0x5e955c;return new Promise((_0x445d0d,_0x1cdb91)=>{const _0x2b53d4=_0x53d2,_0x54ef3c=_0x7a11d5['transaction'](_0xe51d70,'readwrite'),_0x4fc8ad=_0x54ef3c['objectStore'](_0xe51d70),_0x224959=_0x4fc8ad[_0x2b53d4(0x3f8)](_0xe249e9);_0x224959['onsuccess']=()=>_0x445d0d(_0x224959['result']),_0x224959[_0x2b53d4(0x122)]=()=>_0x1cdb91(_0x224959[_0x2b53d4(0xb1e)]);});}async function _0x435c96(_0x2cf4bb){const _0x1716ef=_0x3b741d;if(_0x1716ef(0x6c5)!==_0x1716ef(0x6c5))_0x23a609='<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22'+_0x5f0c59[_0x1716ef(0x5ec)]+_0x1716ef(0x73a)+_0x2cc092[_0x1716ef(0x41a)]+_0x1716ef(0x9a5)+_0x14638a['review'][_0x1716ef(0x685)]+'</div></div></div>';else{const _0x2eb999=await _0x5e955c;return new Promise((_0x1cd840,_0x3ee023)=>{const _0x14e835=_0x1716ef,_0x585aa9=_0x2eb999[_0x14e835(0x170)](_0xe51d70,_0x14e835(0x96c)),_0x2b3f73=_0x585aa9[_0x14e835(0x327)](_0xe51d70),_0x5d0127=_0x2b3f73[_0x14e835(0xca3)](_0x2cf4bb);_0x5d0127[_0x14e835(0x487)]=()=>_0x1cd840(),_0x5d0127[_0x14e835(0x122)]=()=>_0x3ee023(_0x5d0127[_0x14e835(0xb1e)]);});}}let _0x4cb3f0={'audio':null,'cover':null,'info':null,'lyrics':null};const _0x425e2c={'audio':document['getElementById']('altar-slot-audio'),'cover':document[_0x3b741d(0x51d)](_0x3b741d(0x686)),'info':document[_0x3b741d(0x51d)](_0x3b741d(0x15a)),'lyrics':document[_0x3b741d(0x51d)](_0x3b741d(0xaa4))},_0xa0023a={'audio':document['getElementById']('audio-file-input'),'cover':document[_0x3b741d(0x51d)](_0x3b741d(0x191)),'info':document['getElementById']('info-file-input'),'lyrics':document[_0x3b741d(0x51d)](_0x3b741d(0x4d4))};function _0x27151a(){const _0x2cabce=_0x3b741d,_0x14ba2e=document[_0x2cabce(0x51d)](_0x2cabce(0xa56));if(_0x4cb3f0[_0x2cabce(0xb27)]&&_0x4cb3f0[_0x2cabce(0xc80)]){if('Ecsvv'==='Ecsvv')_0x14ba2e[_0x2cabce(0xaa9)]=![];else{const _0x507bbc=_0xa8bc08[_0x2cabce(0x594)][_0x2cabce(0x78c)](_0x314696=>_0x314696['author']===_0x2cabce(0x8ed))[_0x2cabce(0x4fc)]();_0x507bbc&&(_0x230b00=_0x507bbc['content']);}}else _0x2cabce(0xb50)!=='XWHDL'?(_0x3e4794['style']['display']=_0x2cabce(0x2f6),_0x5beee7['onclick']=_0x46230d[_0x2cabce(0x50e)]=_0x442c17[_0x2cabce(0x50e)]=null,_0x4f8f46[_0x2cabce(0x2ec)](_0x2cabce(0x830),_0x5c5fa3),_0x456897(_0x5916ef)):_0x14ba2e[_0x2cabce(0xaa9)]=!![];}async function _0x2bbbd0(_0x5b8c06){const _0x90829=_0x3b741d,_0x79c0ae=_0x5b8c06[_0x90829(0x446)][_0x90829(0x730)][0x0];if(!_0x79c0ae)return;_0x2ee484(!![],'正在解析音乐魔方...');const _0x5b4013=document[_0x90829(0x51d)](_0x90829(0xd56)),_0x467c12=document[_0x90829(0x51d)](_0x90829(0xa56));_0x5b4013[_0x90829(0xa19)][_0x90829(0xab0)](_0x90829(0x1c8)),_0x467c12[_0x90829(0xaa9)]=!![],_0x5b4013[_0x90829(0x820)](_0x90829(0x7fa))[_0x90829(0x32a)]=_0x79c0ae['name'];try{const _0x2fe430=await JSZip[_0x90829(0x494)](_0x79c0ae),_0xb1783a={'audio':null,'cover':null,'info':null,'lyrics':null},_0x3907d9=[];_0x2fe430[_0x90829(0xb36)]((_0x539c3c,_0x5a8733)=>{const _0x517d12=_0x90829;if(_0x517d12(0xc0a)===_0x517d12(0xc0a)){const _0x1d96d7=_0x5a8733[_0x517d12(0x41a)];if(/\.(mp3|flac)$/i[_0x517d12(0x805)](_0x1d96d7)){if(_0x517d12(0x9b0)!==_0x517d12(0x506))_0x3907d9['push'](_0x5a8733['async']('blob')['then'](_0x1ca3d9=>_0xb1783a[_0x517d12(0xb27)]=new File([_0x1ca3d9],_0x5a8733['name'])));else{if(_0x221fcf)_0x178653(_0x1ec189);const _0x478af8=_0x1a3e38['target'][_0x517d12(0x156)](_0x517d12(0xca5));if(!_0x478af8)return;const _0x2fe28f=_0x478af8[_0x517d12(0xa24)]['id'];if(!_0x2fe28f)return;const _0x3dd10d=()=>{_0x5e6733=_0x3c4e24(()=>{const _0x194539=_0x53d2;if(_0x4212b2[_0x194539(0x711)]===_0x194539(0x897))_0x1c2b39['preventDefault']();_0x579c6c(_0x2fe28f);},0x320);},_0x39013c=()=>{if(_0x2fde83)_0x5cb40f(_0x105aa5);};_0x40152b[_0x517d12(0xbc8)](_0x517d12(0xb0e),_0x39013c,{'once':!![]}),_0x34fe9d[_0x517d12(0xbc8)](_0x517d12(0xbc7),_0x39013c,{'once':!![]}),_0x4e7101[_0x517d12(0xbc8)](_0x517d12(0x6bb),_0x39013c,{'once':!![]}),_0x10231f['addEventListener'](_0x517d12(0x5ad),_0x39013c,{'once':!![]}),_0x3dd10d();}}else{if(/\.(jpg|jpeg|png|webp)$/i[_0x517d12(0x805)](_0x1d96d7))_0x3907d9[_0x517d12(0xb47)](_0x5a8733['async'](_0x517d12(0x543))[_0x517d12(0x842)](_0x18888a=>_0xb1783a[_0x517d12(0x73d)]=new File([_0x18888a],_0x5a8733[_0x517d12(0x41a)])));else{if(/\.(txt|json)$/i[_0x517d12(0x805)](_0x1d96d7))_0x3907d9[_0x517d12(0xb47)](_0x5a8733[_0x517d12(0x4a1)](_0x517d12(0x543))[_0x517d12(0x842)](_0x4db3c5=>_0xb1783a[_0x517d12(0xc80)]=new File([_0x4db3c5],_0x5a8733[_0x517d12(0x41a)])));else/\.lrc$/i['test'](_0x1d96d7)&&_0x3907d9['push'](_0x5a8733[_0x517d12(0x4a1)](_0x517d12(0x543))['then'](_0x231ee5=>_0xb1783a[_0x517d12(0x74a)]=new File([_0x231ee5],_0x5a8733[_0x517d12(0x41a)])));}}}else _0x1c9a97[_0x517d12(0x21c)]['splice'](_0x47f132,0x1),_0xb81c0d(),_0x16ffa7(),_0x29c34a(),_0x20795b(),_0x5afa7d(_0x517d12(0xa63));}),await Promise[_0x90829(0x71a)](_0x3907d9);if(!_0xb1783a['audio']||!_0xb1783a[_0x90829(0xc80)])throw new Error('哼，你的压缩包里连最基本的音频和信息文件都没有！');_0x4cb3f0=_0xb1783a,_0x5b4013[_0x90829(0xa19)][_0x90829(0x25d)]('filled'),_0x467c12['disabled']=![],_0x2ee484(![]),_0x48e450(_0x90829(0x835));}catch(_0x4501f1){_0x2ee484(![]),console[_0x90829(0xb1e)](_0x90829(0x804),_0x4501f1),_0x48e450(_0x90829(0xc41)+_0x4501f1['message']),_0x5b4013[_0x90829(0x820)](_0x90829(0x7fa))[_0x90829(0x32a)]='点击选择包含音频、封面、信息、歌词的\x20.zip\x20压缩包';}finally{_0x90829(0x4b6)===_0x90829(0x4b6)?_0x5b8c06['target']['value']='':_0x5835c1(_0x90829(0x88e)+_0x23b23b[_0x90829(0x979)]);}}document[_0x3b741d(0x51d)]('confirm-altar-upload-button')[_0x3b741d(0xbc8)](_0x3b741d(0x779),async()=>{const _0x4bd443=_0x3b741d;if(!_0x4cb3f0[_0x4bd443(0xb27)]||!_0x4cb3f0[_0x4bd443(0xc80)]){_0x48e450(_0x4bd443(0x99b));return;}await _0x3b6dc0();}),document[_0x3b741d(0x51d)]('upload-music-button')['addEventListener']('click',()=>{const _0x316650=_0x3b741d;_0x53ffb2('musicUploadAltar',_0x316650(0x912));}),document[_0x3b741d(0x51d)](_0x3b741d(0x466))['addEventListener'](_0x3b741d(0x779),()=>{const _0x5cbd61=_0x3b741d;_0x53ffb2(_0x5cbd61(0x912),_0x5cbd61(0x7ae));});async function _0x3b6dc0(){const _0x2edd44=_0x3b741d;_0x2ee484(!![],_0x2edd44(0xafa));try{const _0x5e54d8=await _0x4cb3f0[_0x2edd44(0xc80)]['text']();let _0x2584be;if(_0x5e54d8[_0x2edd44(0xad4)]()[_0x2edd44(0xca0)]('{'))_0x2584be=JSON[_0x2edd44(0x576)](_0x5e54d8);else{if('wjqMU'!==_0x2edd44(0x3bb)){const _0x2d4986=_0x4aaedf[_0x2edd44(0x90f)][_0x2edd44(0xad4)](),_0x10de80=_0x46345b['value'][_0x2edd44(0xad4)]();if(!_0x2d4986||!_0x10de80){_0xf116a5('歌名和歌手都不能为空！');return;}_0x18ecbc({'songName':_0x2d4986,'artist':_0x10de80});}else{_0x2584be={};const _0x1785d1=_0x5e54d8['split']('\x0a');_0x1785d1['forEach'](_0x5100d8=>{const _0x19fa77=_0x2edd44,_0x1d9e19=_0x5100d8['split'](/:\s|：\s/);if(_0x1d9e19[_0x19fa77(0xc1f)]===0x2){if(_0x19fa77(0x25e)!==_0x19fa77(0x865)){const _0x1c1f0a=_0x1d9e19[0x0][_0x19fa77(0xad4)](),_0x58f071=_0x1d9e19[0x1][_0x19fa77(0xad4)](),_0x4869e1={'歌名':_0x19fa77(0xa6b),'艺术家':'歌手','专辑':'专辑'};_0x4869e1[_0x1c1f0a]&&(_0x2584be[_0x4869e1[_0x1c1f0a]]=_0x58f071);}else _0x4b8b3c[_0x19fa77(0x2d9)]=_0x502c01[_0x19fa77(0xcb2)](_0x923f03),_0x1665db['style'][_0x19fa77(0x48e)]=0x1;}});if(!_0x2584be[_0x2edd44(0xa6b)]){if('JDJEI'!=='GViUx')throw new Error(_0x2edd44(0x816));else _0x1240a5[_0x2edd44(0xb1e)](_0x2edd44(0xba9),_0x22471d);}_0x2584be[_0x2edd44(0x8aa)]=_0x2edd44(0xb6c)+Date[_0x2edd44(0x63d)]()+'\x20';}}const _0x1b9b6a=_0x2edd44(0xb6c)+(_0x2584be[_0x2edd44(0x8aa)]||Date[_0x2edd44(0x63d)]())+'\x20',_0x1683db={'id':_0x1b9b6a,'info':_0x2584be,'audio':_0x4cb3f0[_0x2edd44(0xb27)],'cover':_0x4cb3f0['cover'],'lyrics':_0x4cb3f0[_0x2edd44(0x74a)]?await _0x4cb3f0[_0x2edd44(0x74a)][_0x2edd44(0x685)]():''};await _0x11fe42(_0x1683db),_0x2ee484(![]),_0x48e450(_0x2edd44(0x213)+_0x2584be[_0x2edd44(0xa6b)]+'”已存入圣殿。'),_0x53ffb2('musicLibrary','musicUploadAltar'),setTimeout(_0x270b16,0x32);}catch(_0x4b9f8b){if(_0x2edd44(0xa78)!==_0x2edd44(0xa78))return _0xdf38d0[_0x2edd44(0xc97)](_0x5c75b4,_0x20879b+0x1);else _0x2ee484(![]),console[_0x2edd44(0xb1e)](_0x2edd44(0xd15),_0x4b9f8b),_0x48e450(_0x2edd44(0x783)+_0x4b9f8b[_0x2edd44(0x979)]+'\x20');}}async function _0x270b16(){const _0x5a9079=_0x3b741d;if(_0x5a9079(0x1e5)!==_0x5a9079(0x1e5)){_0x69e4cf&&_0x28458d['push'](_0x4b65f9);_0x24c96e={};const _0x2f948f=_0x49ef90[_0x5a9079(0xc97)](0x2),_0x42b81d=_0x2f948f[_0x5a9079(0x2bf)](/:\s(.+)/);if(_0x42b81d[_0x5a9079(0xc1f)]>0x1){const _0x4d7335=_0x42b81d[0x0][_0x5a9079(0xad4)](),_0x204210=_0x42b81d[0x1][_0x5a9079(0xad4)]()['replace'](/^"|"$/g,'');_0x110f3a[_0x4d7335]=_0x204210;}}else{const _0x2b7178=document[_0x5a9079(0x51d)](_0x5a9079(0x6ca));_0x2b7178[_0x5a9079(0x4d5)]='';const _0x564ce2=await _0x4842ec();if(_0x564ce2[_0x5a9079(0xc1f)]===0x0){_0x2b7178[_0x5a9079(0x4d5)]=_0x5a9079(0x59b);return;}_0x564ce2[_0x5a9079(0xb3d)]((_0xdd109d,_0x274993)=>(_0xdd109d[_0x5a9079(0xc80)][_0x5a9079(0xa6b)]||'')[_0x5a9079(0x79a)](_0x274993['info']['歌曲名称']||''));for(const _0x6afad7 of _0x564ce2){if(_0x5a9079(0x1aa)===_0x5a9079(0x1aa)){const _0x5e354b=document[_0x5a9079(0x23f)]('div');_0x5e354b[_0x5a9079(0xa9d)]=_0x5a9079(0x3a6),_0x5e354b[_0x5a9079(0xa24)][_0x5a9079(0x8bd)]=_0x6afad7['id'];const _0x4b4d7a=_0x6afad7[_0x5a9079(0x73d)]?URL['createObjectURL'](_0x6afad7[_0x5a9079(0x73d)]):_0x46536a;_0x5e354b[_0x5a9079(0x4d5)]=_0x5a9079(0x3e0)+_0x4b4d7a+_0x5a9079(0x8c5)+(_0x6afad7['info'][_0x5a9079(0xa6b)]||'未知歌曲')+_0x5a9079(0xa57)+(_0x6afad7[_0x5a9079(0xc80)]['歌手']||_0x5a9079(0x421))+_0x5a9079(0x33f);let _0x3e0588=null;const _0x3dcf98=_0x518e75=>{const _0x43479e=_0x5a9079;if(_0x518e75[_0x43479e(0x436)]===0x2)return;_0x3e0588=setTimeout(async()=>{const _0x1bef1d=_0x43479e;if(_0x1bef1d(0x3ba)!=='JDsWZ')_0x1deb04=_0xb5733e[_0x1bef1d(0x41a)];else{if(_0x518e75['type']===_0x1bef1d(0x897))_0x518e75[_0x1bef1d(0x9cb)]();const _0x25e5a1=await _0x44efa2(_0x1bef1d(0xd42)+_0x6afad7[_0x1bef1d(0xc80)][_0x1bef1d(0xa6b)]+_0x1bef1d(0x895));_0x25e5a1&&(await _0x435c96(_0x6afad7['id']),await _0x270b16(),_0x48e450(_0x1bef1d(0x8eb)));}},0x320);},_0x424268=()=>{const _0x3f4114=_0x5a9079;_0x3f4114(0xa8a)===_0x3f4114(0xd46)?_0x26dc0e+=_0x3f4114(0xd08)+_0x2cdc7a[_0x3f4114(0xcfd)](_0x285fa3/0x3c)+_0x3f4114(0xb3b):clearTimeout(_0x3e0588);};_0x5e354b['addEventListener'](_0x5a9079(0x57e),_0x3dcf98),_0x5e354b[_0x5a9079(0xbc8)](_0x5a9079(0xb0e),_0x424268),_0x5e354b[_0x5a9079(0xbc8)](_0x5a9079(0x65c),_0x424268),_0x5e354b[_0x5a9079(0xbc8)](_0x5a9079(0x897),_0x3dcf98,{'passive':![]}),_0x5e354b[_0x5a9079(0xbc8)]('touchend',_0x424268),_0x5e354b['addEventListener'](_0x5a9079(0x6bb),_0x424268),_0x5e354b['addEventListener']('click',_0x23bd56=>{const _0x907041=_0x5a9079;if('JrzoI'==='JrzoI'){if(_0x3e0588)clearTimeout(_0x3e0588);if(_0x23bd56[_0x907041(0x81b)])return;setTimeout(()=>{const _0x3a4773=_0x907041;_0x3e0588&&_0x401b2c(_0x6afad7['id'],_0x564ce2[_0x3a4773(0x257)](_0x3f6403=>_0x3f6403['id']));},0x32);}else _0x5d3a37(![]);}),_0x2b7178[_0x5a9079(0x83b)](_0x5e354b);}else{const _0x20271c=_0x834461[_0x5a9079(0x170)](_0x1d74f6,_0x5a9079(0x366)),_0x1e5c36=_0x20271c[_0x5a9079(0x327)](_0x34f3d3),_0x4dc696=_0x1e5c36[_0x5a9079(0x1f8)](_0x20c681);_0x4dc696[_0x5a9079(0x487)]=()=>_0x61f083(_0x4dc696[_0x5a9079(0x668)]),_0x4dc696[_0x5a9079(0x122)]=()=>_0x50dfe7(_0x4dc696[_0x5a9079(0xb1e)]);}}}}_0x2d97df['addEventListener'](_0x3b741d(0x779),()=>{_0x48e450('说了是摆设啦，笨蛋。');}),_0x52e7ef[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{_0x48e450('这个也是摆设，别点了。');});let _0x5d9664=[],_0x240573=-0x1;async function _0x401b2c(_0x2789b6,_0x3ba5f9){const _0x2277b5=_0x3b741d;if(_0x2277b5(0x66c)!==_0x2277b5(0x66c)){if(_0x1d3634['id']===_0x2277b5(0x65a))return;_0x24ec16=_0xa82db9(()=>{const _0x7ddb82=_0x2277b5;if(_0x511d04['type']===_0x7ddb82(0x897))_0x4d12e8[_0x7ddb82(0x9cb)]();_0x40fe14(_0x3fdff0['id'],_0x138360[_0x7ddb82(0x41a)]);},0x320);}else{const _0x3ac5d0=await _0x30f5fc(_0x2789b6);if(!_0x3ac5d0)return;_0x545db0={'title':_0x3ac5d0[_0x2277b5(0xc80)][_0x2277b5(0xa6b)]||_0x2277b5(0xa81),'artist':_0x3ac5d0[_0x2277b5(0xc80)]['歌手']||_0x2277b5(0x421),'cover':_0x3ac5d0[_0x2277b5(0x73d)]?URL[_0x2277b5(0xcb2)](_0x3ac5d0[_0x2277b5(0x73d)]):_0x46536a,'isFromLibrary':!![]};const _0x42762a=URL['createObjectURL'](_0x3ac5d0[_0x2277b5(0xb27)]);_0x44ee83[_0x2277b5(0x2d9)]=_0x42762a,_0x44ee83[_0x2277b5(0x152)](),_0x2e8831();}}async function _0x2e8831(){const _0x53ec23=_0x3b741d,_0x55d75f=document[_0x53ec23(0x51d)]('music-widget-card'),_0x591d36=document[_0x53ec23(0x51d)](_0x53ec23(0x232)),_0x3dfe4b=document[_0x53ec23(0x51d)](_0x53ec23(0xd53)),_0x3a62c7=document[_0x53ec23(0x51d)](_0x53ec23(0x88f)),_0x17586e=_0x545db0;_0x17586e&&_0x17586e[_0x53ec23(0xc03)]?_0x53ec23(0xa7e)==='FFhIm'?_0x3f7d17=_0x53ec23(0x4f5)+_0x284122:(_0x591d36[_0x53ec23(0x32a)]=_0x17586e[_0x53ec23(0x82a)],_0x3dfe4b[_0x53ec23(0x32a)]=_0x17586e[_0x53ec23(0x38b)],_0x55d75f[_0x53ec23(0xa19)]['add'](_0x53ec23(0x45c)),_0x55d75f[_0x53ec23(0x1e2)]['setProperty'](_0x53ec23(0x1b4),_0x53ec23(0x535)+_0x17586e['cover']+')')):(_0x591d36['textContent']='暂无音乐',_0x3dfe4b['textContent']=_0x53ec23(0x243),_0x55d75f[_0x53ec23(0xa19)][_0x53ec23(0xab0)](_0x53ec23(0x45c)),_0x3a62c7[_0x53ec23(0x1e2)][_0x53ec23(0xcac)](_0x53ec23(0x1b4),_0x53ec23(0x2f6)));}function _0x254669(){const _0x1ef753=_0x3b741d,_0x555123=document['getElementById'](_0x1ef753(0x30a));if(!_0x555123)return;const _0x5b976e=document[_0x1ef753(0x51d)](_0x1ef753(0xc5b)),_0x580262=document['getElementById'](_0x1ef753(0xa7f)),_0x2fb3f1=document[_0x1ef753(0x51d)](_0x1ef753(0xc8f)),_0x245c69=document[_0x1ef753(0x51d)](_0x1ef753(0x726)),_0x4d16a2=_0x543bea['musicPlaylist'][_0x543bea[_0x1ef753(0x786)]],_0x6aa718=_0x543bea[_0x1ef753(0x75b)],_0x307158=document[_0x1ef753(0x51d)](_0x1ef753(0xa0e))[_0x1ef753(0xa19)][_0x1ef753(0x9ff)](_0x1ef753(0x215));if(_0x4d16a2&&_0x307158){if(_0x1ef753(0xa4b)!==_0x1ef753(0xa4b)){_0x20e60a(_0x1ef753(0x570));return;}else _0x555123[_0x1ef753(0xa19)][_0x1ef753(0xab0)](_0x1ef753(0xcc1)),_0x4d16a2['coverId']?_0x54e221(_0x4d16a2[_0x1ef753(0x28a)])[_0x1ef753(0x842)](_0x13dc6e=>{const _0x23a334=_0x1ef753;if(_0x13dc6e)_0x5b976e['src']=URL[_0x23a334(0xcb2)](_0x13dc6e);}):_0x5b976e[_0x1ef753(0x2d9)]=_0x4d16a2[_0x1ef753(0x372)]||_0x46536a,_0x580262[_0x1ef753(0x32a)]=_0x4d16a2[_0x1ef753(0xd09)]||_0x1ef753(0xa81),_0x2fb3f1[_0x1ef753(0x32a)]=_0x4d16a2['artist']||_0x1ef753(0x421),_0x245c69[_0x1ef753(0x32a)]=_0x6aa718?'❚❚':'▶';}else _0x555123[_0x1ef753(0xa19)][_0x1ef753(0x25d)]('hidden');}_0x2d97df&&_0x2d97df[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x1933f0=_0x3b741d;if(_0x1933f0(0x9cc)!==_0x1933f0(0x9cc)){const _0x4358d6=_0x494e83[_0x1933f0(0x882)][_0x1933f0(0xbe8)](_0x2ef036=>_0x2ef036['id']===_0x4ca403);_0x4358d6&&(_0x4358d6[_0x1933f0(0x41a)]=_0x4c7b37,_0x4358d6[_0x1933f0(0x16c)]=_0x5b35a8,_0x4358d6[_0x1933f0(0x42a)]=_0x38ad3d);}else{if(_0x5d9664[_0x1933f0(0xc1f)]===0x0)return;_0x240573=(_0x240573+0x1)%_0x5d9664['length'],_0x401b2c(_0x5d9664[_0x240573],_0x5d9664);}});_0x52e7ef&&_0x52e7ef[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x4048c3=_0x3b741d;if(_0x4048c3(0xcfe)===_0x4048c3(0x9ba)){const _0x38e5a6=_0x41b334['author']===_0x4048c3(0x8ed)?'user':'ai',_0x1c668a=_0x376543[_0x4048c3(0x7a5)]===_0x4048c3(0x8ed)?_0x4cab79['name']:_0x434594(_0x383334[_0x4048c3(0x7a5)])[_0x4048c3(0x41a)],_0x400b23=_0xe94ec3[_0x4048c3(0x23f)](_0x4048c3(0xaee));_0x400b23[_0x4048c3(0xa9d)]=_0x4048c3(0xbe7)+_0x38e5a6,_0x400b23['dataset'][_0x4048c3(0x11f)]=_0x4e8b56[_0x4048c3(0x11f)],_0x400b23[_0x4048c3(0x1e2)]['borderBottom']=_0x4048c3(0x2f6),_0x400b23[_0x4048c3(0x1e2)][_0x4048c3(0x303)]='0',_0x400b23[_0x4048c3(0x4d5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>'+_0x1c668a+_0x4048c3(0xb7e)+new _0x2e8b67(_0x5db5c9['timestamp'])[_0x4048c3(0x5f4)]('zh-CN')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>'+_0x4ba1d8[_0x4048c3(0x297)][_0x4048c3(0x6ac)](/\n/g,_0x4048c3(0x71c))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x372443[_0x4048c3(0x83b)](_0x400b23);}else{if(_0x5d9664[_0x4048c3(0xc1f)]===0x0)return;_0x240573=(_0x240573-0x1+_0x5d9664[_0x4048c3(0xc1f)])%_0x5d9664[_0x4048c3(0xc1f)],_0x401b2c(_0x5d9664[_0x240573],_0x5d9664);}});_0x44ee83[_0x3b741d(0xbc8)](_0x3b741d(0x152),()=>{const _0x2ae24a=_0x3b741d;_0x543bea[_0x2ae24a(0x75b)]=!![],_0x3ef2d0();}),_0x44ee83[_0x3b741d(0xbc8)](_0x3b741d(0x939),()=>{_0x543bea['isPlaying']=![],_0x3ef2d0();}),_0x44ee83['addEventListener']('ended',()=>{if(_0x2d97df)_0x2d97df['click']();});function _0x57dcde(){const _0x983bd1=_0x3b741d,_0x388802=_0x577515();if(!_0x388802)return;_0x33ab7e[_0x983bd1(0x4d5)]='',_0x40953a[_0x983bd1(0x90f)]='',_0x388802[_0x983bd1(0x711)]==='group'?(_0x388802[_0x983bd1(0x184)][_0x983bd1(0xb36)](_0x30c629=>{const _0x2fe537=_0x983bd1;if('dEvLw'!==_0x2fe537(0x224)){const _0xca7ef=_0x509294(_0x30c629);if(_0xca7ef){const _0x1acf51=document[_0x2fe537(0x23f)](_0x2fe537(0xb34));_0x1acf51[_0x2fe537(0x90f)]=_0xca7ef['id'],_0x1acf51['textContent']=_0xca7ef[_0x2fe537(0x41a)],_0x33ab7e[_0x2fe537(0x83b)](_0x1acf51);}}else _0x16d98c(_0x2fe537(0x4cf)+_0x10992f[_0x2fe537(0x979)]);}),_0x1577c2[_0x983bd1(0x1e2)][_0x983bd1(0x930)]='block'):_0x1577c2[_0x983bd1(0x1e2)][_0x983bd1(0x930)]=_0x983bd1(0x2f6),_0x53f508[_0x983bd1(0xa19)]['add'](_0x983bd1(0x6db)),_0x40953a[_0x983bd1(0x72b)]();}function _0x7fc6ff(){const _0x5d2565=_0x3b741d,_0x25ef01=parseFloat(_0x40953a['value']);if(isNaN(_0x25ef01)||_0x25ef01<=0x0){_0x48e450(_0x5d2565(0xb75));return;}const _0x3abded=_0x577515();let _0x3cc86d=null;if(_0x3abded[_0x5d2565(0x711)]===_0x5d2565(0x91b)){if(_0x5d2565(0x8df)===_0x5d2565(0x9e5)){const _0x740785=_0x3ee00c['conversationHistory']['filter'](_0xdb7021=>_0xdb7021[_0x5d2565(0x711)]==='music'&&_0xdb7021[_0x5d2565(0x72e)])[_0x5d2565(0x257)](_0x848905=>({..._0x848905,'id':'msg_'+_0x848905[_0x5d2565(0x11f)],'source':'chat'}));_0x32f61d[_0x5d2565(0xb47)](..._0x740785);}else _0x3cc86d=_0x33ab7e[_0x5d2565(0x90f)];}else _0x3cc86d=_0x3abded['participantIds'][0x0];const _0x5ed439=_0x2f2ed1(_0x3abded['id']),_0x576a8f={'role':_0x5d2565(0x8ed),'type':_0x5d2565(0x68e),'content':_0x5d2565(0xa0b)+(_0x509294(_0x3cc86d)?.[_0x5d2565(0x41a)]||'未知')+_0x5d2565(0x933)+_0x25ef01+']','amount':_0x25ef01,'recipientId':_0x3cc86d,'senderId':_0x5ed439['id'],'timestamp':Date[_0x5d2565(0x63d)]()};_0x543bea[_0x5d2565(0xc54)][_0x5d2565(0xb47)](_0x576a8f),_0x348dc5(),_0x15b163(),_0x53f508[_0x5d2565(0xa19)][_0x5d2565(0xab0)](_0x5d2565(0x6db));}async function _0x9a81bb(_0x5bc6d9){const _0x2e0eb7=_0x3b741d;if(_0x2e0eb7(0x176)!==_0x2e0eb7(0x4f6)){const _0x5a2146=_0x509294(_0x5bc6d9);if(!_0x5a2146)return;const _0x3e6527=await _0x44efa2('确定要永久清空【'+_0x5a2146[_0x2e0eb7(0x41a)]+_0x2e0eb7(0x8c4));if(!_0x3e6527)return;const _0x4e1eb2=_0x543bea[_0x2e0eb7(0x12b)][_0x2e0eb7(0xc58)](_0x4cab34=>_0x4cab34[_0x2e0eb7(0xaec)]===_0x5bc6d9);if(_0x4e1eb2>-0x1){if(_0x2e0eb7(0x26c)===_0x2e0eb7(0x8e4)){const _0x4975fb=_0x18f262(_0x239dfa[_0x2e0eb7(0xa24)]['page'],0xa);_0x510086(_0x4975fb);}else _0x543bea[_0x2e0eb7(0x12b)]['splice'](_0x4e1eb2,0x1),_0x1a0f1f(),_0x23e3b8(),_0x48e450('【'+_0x5a2146[_0x2e0eb7(0x41a)]+_0x2e0eb7(0x75c));}else{if('fqyYK'===_0x2e0eb7(0x1b2))_0x48e450(_0x2e0eb7(0xa13));else{const _0x4e87fd=_0x28765e(_0x174161[_0x2e0eb7(0x80c)]);_0x4e87fd&&(delete _0x4e87fd[_0x2e0eb7(0x698)],_0x58167c(),_0x12814c(_0x4e87fd['id'],_0x2e0eb7(0x8a7)),_0xdbf2f3(_0x2e0eb7(0xb81)),_0x4b023a(!![]));}}}else _0x313600(![]),_0x2039aa[_0x2e0eb7(0xb1e)]('全量导出失败:',_0xe40fc7),_0x249e87(_0x2e0eb7(0x14c)+_0xa0ac7c[_0x2e0eb7(0x979)]);}function _0x3539ee(){const _0x164c78=_0x3b741d,_0x2dccb0=document[_0x164c78(0x51d)](_0x164c78(0x6dc));_0x2dccb0[_0x164c78(0x4d5)]='';const _0x4dbf2e=_0x543bea[_0x164c78(0x24d)][_0x164c78(0x78c)](_0x205e47=>_0x543bea['chats'][_0x164c78(0x66a)](_0x2cff49=>_0x2cff49[_0x164c78(0x711)]===_0x164c78(0x5fc)&&_0x2cff49['participantIds']['includes'](_0x205e47['id'])));if(_0x4dbf2e[_0x164c78(0xc1f)]===0x0){_0x2dccb0[_0x164c78(0x4d5)]=_0x164c78(0x45d);return;}_0x4dbf2e['forEach'](_0x146cd2=>{const _0x3a7d0c=_0x164c78;if('sVyGO'!==_0x3a7d0c(0x902))_0x34a53b[_0x3a7d0c(0x584)]('chatHistory_'+_0x383756[_0x3a7d0c(0x886)]);else{const _0x3e6629=document[_0x3a7d0c(0x23f)]('li');_0x3e6629['className']=_0x3a7d0c(0x9eb),_0x3e6629['dataset'][_0x3a7d0c(0x37d)]=_0x146cd2['id'],_0x3e6629['innerHTML']=_0x3a7d0c(0x4e8)+(_0x146cd2[_0x3a7d0c(0x5ec)]||_0x46536a)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x146cd2[_0x3a7d0c(0x41a)]+_0x3a7d0c(0x5ab)+_0x146cd2['name']+'的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3e6629[_0x3a7d0c(0x820)](_0x3a7d0c(0x589))[_0x3a7d0c(0xbc8)](_0x3a7d0c(0x779),()=>_0xc195fe(_0x146cd2['id'])),_0x3e6629[_0x3a7d0c(0x820)](_0x3a7d0c(0x58f))[_0x3a7d0c(0xbc8)]('click',async _0x54ef5a=>{const _0x308e2c=_0x3a7d0c;_0x54ef5a[_0x308e2c(0xa10)]();const _0x2a3f21=_0x509294(_0x146cd2['id']);if(!_0x2a3f21)return;const _0x4cf482=await _0x44efa2(_0x308e2c(0x6b5)+_0x2a3f21['name']+_0x308e2c(0xa50));if(_0x4cf482){if('LAzTX'===_0x308e2c(0x605))_0x130e56=_0x3f3ccd['at'](-0x1);else{_0x2ee484(!![],_0x308e2c(0xa65)+_0x2a3f21[_0x308e2c(0x41a)]+_0x308e2c(0x35d));const _0x1d35b9=[_0x308e2c(0x58b),_0x308e2c(0xbe2),_0x308e2c(0x609),_0x308e2c(0x723),'bites',_0x308e2c(0x451),_0x308e2c(0xca7),'summary'];for(const _0x33b9f7 of _0x1d35b9){const _0x74e1aa=_0x308e2c(0x600)+_0x2a3f21['id']+'_'+_0x33b9f7;await _0x1c28c4(_0x74e1aa);}_0x2ee484(![]),_0x48e450('【'+_0x2a3f21['name']+_0x308e2c(0x6e4));}}}),_0x2dccb0['appendChild'](_0x3e6629);}});}let _0x2c0f90=null,_0x1c891e=null;function _0x31f4b(){const _0x4c9a87=_0x3b741d;if(_0x4c9a87(0x861)==='eKdsz'){const _0x15f049={'id':_0x4c9a87(0x39e)+_0x1613e4[_0x4c9a87(0x63d)](),'name':_0x28abe9,'content':_0x3cf873,'categoryId':_0x17f13b};_0x5c7ea3[_0x4c9a87(0x41e)][_0x4c9a87(0xb47)](_0x15f049);}else{const _0xb62f2f=new Date(),_0x51b542=document[_0x4c9a87(0x51d)](_0x4c9a87(0xa4c)),_0x5da316=document[_0x4c9a87(0x51d)]('snoop-home-date'),_0x7a9bf9=document['getElementById'](_0x4c9a87(0x8c2));_0x51b542&&_0x5da316&&(_0x51b542[_0x4c9a87(0x32a)]=_0xb62f2f[_0x4c9a87(0x864)](_0x4c9a87(0xbd4),{'hour':_0x4c9a87(0x145),'minute':_0x4c9a87(0x145),'hour12':![]}),_0x5da316[_0x4c9a87(0x32a)]=_0xb62f2f[_0x4c9a87(0x894)](_0x4c9a87(0xbd4),{'month':_0x4c9a87(0x765),'day':'numeric','weekday':_0x4c9a87(0x765)})),_0x7a9bf9&&(_0x7a9bf9[_0x4c9a87(0x4d5)]=_0x4c9a87(0xaf5)+_0xb62f2f[_0x4c9a87(0x864)](_0x4c9a87(0xbd4),{'hour':_0x4c9a87(0x145),'minute':'2-digit','hour12':![]})+'</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');}}function _0xc195fe(_0x351a93){const _0x3aec5c=_0x3b741d;if(_0x3aec5c(0x7e5)!=='AMVTH')_0x8d7a5d=_0x3aec5c(0xcd0);else{_0x2c0f90=_0x351a93;const _0x192849=_0x509294(_0x351a93);if(!_0x192849)return;const _0x23b46a=document['getElementById'](_0x3aec5c(0x3d1)),_0x2e69d0=document[_0x3aec5c(0x51d)](_0x3aec5c(0xa89));if(_0x2e69d0)_0x2e69d0['remove']();const _0x15c675=document[_0x3aec5c(0x51d)]('snoop-dock');if(_0x15c675)_0x15c675[_0x3aec5c(0xab0)]();_0x23b46a[_0x3aec5c(0x125)](_0x3aec5c(0x2a7),_0x3aec5c(0xcbc)),_0x23b46a[_0x3aec5c(0x125)](_0x3aec5c(0x2a7),'<div\x20id=\x22snoop-dock\x22></div>'),document[_0x3aec5c(0x51d)](_0x3aec5c(0x8b5))[_0x3aec5c(0x32a)]='',_0x93d532();if(_0x1c891e)clearInterval(_0x1c891e);_0x31f4b(),_0x1c891e=setInterval(_0x31f4b,0x2710),_0x53ffb2(_0x3aec5c(0x6b4),_0x3aec5c(0x188));}}function _0x93d532(){const _0x42d616=_0x3b741d;if(_0x42d616(0x44a)!==_0x42d616(0x990)){const _0x567868=document[_0x42d616(0x51d)](_0x42d616(0x833)),_0x1f6a79=document[_0x42d616(0x51d)](_0x42d616(0xb8d));_0x567868[_0x42d616(0x4d5)]=_0x42d616(0xb6f),_0x1f6a79['innerHTML']='';const _0xe8b414=_0x567868['querySelector'](_0x42d616(0x66d)),_0x20bba3=[{'id':_0x42d616(0xbe2),'name':'聊天','svg':_0x42d616(0x780),'area':_0x42d616(0x665)},{'id':_0x42d616(0x609),'name':_0x42d616(0x976),'svg':_0x42d616(0x21d),'area':_0x42d616(0x665)},{'id':_0x42d616(0x58b),'name':'相册','svg':_0x42d616(0x1dd),'area':_0x42d616(0x665)},{'id':_0x42d616(0xc24),'name':'总结','svg':_0x42d616(0xc7a),'area':_0x42d616(0x665)},{'id':_0x42d616(0x723),'name':_0x42d616(0x4bb),'svg':_0x42d616(0xb57),'area':_0x42d616(0xcae)},{'id':_0x42d616(0xc02),'name':'外卖','svg':_0x42d616(0x697),'area':_0x42d616(0xcae)},{'id':'wants','name':'购物','svg':_0x42d616(0x11e),'area':_0x42d616(0xcae)},{'id':'footprints','name':'足迹','svg':_0x42d616(0x9e7),'area':_0x42d616(0xcae)}];_0x20bba3[_0x42d616(0xb36)](_0x9f8481=>{const _0x442d07=_0x42d616;if(_0x442d07(0xb49)!==_0x442d07(0x724)){const _0x52d73f=document[_0x442d07(0x23f)](_0x442d07(0xaee));_0x52d73f[_0x442d07(0xa9d)]='snoop-app-icon',_0x52d73f[_0x442d07(0x4d5)]=_0x442d07(0xc2e)+_0x9f8481[_0x442d07(0x6ba)]+_0x442d07(0x8cd)+_0x9f8481['name']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x52d73f[_0x442d07(0xbc8)](_0x442d07(0x779),()=>_0x42c372(_0x9f8481['id'],_0x9f8481[_0x442d07(0x41a)])),_0x9f8481[_0x442d07(0x396)]===_0x442d07(0x665)?_0x1f6a79[_0x442d07(0x83b)](_0x52d73f):_0xe8b414[_0x442d07(0x83b)](_0x52d73f);}else _0x1219ad[_0x442d07(0xb1e)](_0x442d07(0x90c),_0x578b51,_0x442d07(0x648),_0x159fe6),_0x2e383c[_0x442d07(0xc54)][_0x442d07(0xb47)]({'role':_0x442d07(0xbb1),'senderId':_0x1fd071['id'],'timestamp':_0x148500[_0x442d07(0x63d)](),'isOffline':!![],'content':_0x442d07(0xb40)+_0x528ca7+']'});});}else _0x5deece(_0x287d91,_0x25828a),_0x25ee2f();}document[_0x3b741d(0x51d)]('back-to-snoop-list-from-phone')[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0xac2c52=_0x3b741d;if('CSlRd'!==_0xac2c52(0x7f3)){_0x1c891e&&(clearInterval(_0x1c891e),_0x1c891e=null);document[_0xac2c52(0x51d)](_0xac2c52(0x141))[_0xac2c52(0x1e2)][_0xac2c52(0x930)]=_0xac2c52(0x2f6);const _0x257154=document[_0xac2c52(0x51d)]('snoop-dock');if(_0x257154)_0x257154['remove']();const _0x5ce50f=document[_0xac2c52(0x51d)](_0xac2c52(0xa89));if(_0x5ce50f)_0x5ce50f['remove']();_0x53ffb2('snoopList',_0xac2c52(0x6b4));}else _0x51661f[_0xac2c52(0x1e2)][_0xac2c52(0x424)]=_0xac2c52(0x8e7),_0x33f3c7[_0xac2c52(0x1e2)][_0xac2c52(0x48e)]='0',_0x41a0c6(()=>_0x5a5e22[_0xac2c52(0xab0)](),0x7d0);});async function _0x42c372(_0x45156c,_0x1fd0ee,_0x1aa89=![]){const _0xe5b647=_0x3b741d;let _0x1ee43a=null;document['getElementById'](_0xe5b647(0x393))[_0xe5b647(0x1e2)][_0xe5b647(0x930)]='none';const _0x236981=document['getElementById']('snoop-app-view-container');_0x236981['innerHTML']=_0xe5b647(0x529),_0x236981['style']['display']=_0xe5b647(0x338);const _0xbe1835=_0xe5b647(0x600)+_0x2c0f90+'_'+_0x45156c;try{if(_0x45156c==='summary'){if(_0xe5b647(0x5e1)===_0xe5b647(0x394)){const _0x43c5d8=_0x3a8720??_0x5a2404[_0xe5b647(0x90f)][_0xe5b647(0xad4)]();if(_0x43c5d8===''||!_0x3ff582['activeChatId'])return;const _0x292bb6=_0x113ba1[_0xe5b647(0x820)](_0xe5b647(0x763)),_0x2f38f5=_0x292bb6['id']===_0xe5b647(0x6ad),_0x10f229={'role':_0xe5b647(0x8ed),'content':_0x43c5d8,'timestamp':_0x22e5c8[_0xe5b647(0x63d)](),'isOffline':_0x2f38f5};_0x588072[_0xe5b647(0xa6e)]&&(_0x10f229[_0xe5b647(0x20f)]={..._0x59c0c1['activeQuote']});_0x61af29[_0xe5b647(0xc54)][_0xe5b647(0xb47)](_0x10f229);const _0x49e426=_0xab62aa(_0x10f229,_0x339e7d[_0xe5b647(0xc54)][_0xe5b647(0xc1f)]-0x1);_0x49e426&&(_0x331a65[_0xe5b647(0xd3a)]=_0x1a5584[_0xe5b647(0x983)]),_0x4e1837(),_0x2c3ade['value']='',_0x5706ec();}else{const _0x104ced=await _0x1f2dba(_0x2c0f90);_0x50581d(_0x45156c,_0x1fd0ee,_0x104ced);return;}}let _0x501e70=await _0x1bc020(_0xbe1835);if(_0x1aa89||!_0x501e70){if(_0xe5b647(0x2db)==='YLouZ'){const _0x2c3c1a=_0x49dce3[_0xe5b647(0x51d)](_0xe5b647(0x70b)),_0x195283=_0x2c3c1a[_0xe5b647(0x5c4)](_0xe5b647(0x46f)),_0x541392=_0x201411['querySelector'](_0xe5b647(0x51e));if(_0x195283[_0xe5b647(0xc1f)]===0x0)_0x541392[_0xe5b647(0x32a)]='--\x20点击选择\x20--';else _0x195283[_0xe5b647(0xc1f)]>0x2?_0x541392[_0xe5b647(0x32a)]='已选择\x20'+_0x195283[_0xe5b647(0xc1f)]+'\x20项':_0x541392[_0xe5b647(0x32a)]=_0x12b8c0[_0xe5b647(0x382)](_0x195283)[_0xe5b647(0x257)](_0x4a6500=>_0x4a6500[_0xe5b647(0x2a6)][_0xe5b647(0x32a)][_0xe5b647(0xad4)]())[_0xe5b647(0x4db)]('、');}else{console[_0xe5b647(0x68b)](_0xe5b647(0x13d)+_0xbe1835+_0xe5b647(0x262)),_0x1ee43a=await _0x2e1491(_0x45156c,_0x2c0f90,_0x501e70);if(_0x1ee43a){if(_0xe5b647(0xabf)!==_0xe5b647(0x388)){const _0x402a5e=_0x1ee43a[_0xe5b647(0x606)](/```(?:json)?\s*([\s\S]*?)\s*```/),_0x279345=_0x402a5e?_0x402a5e[0x1]['trim']():_0x1ee43a[_0xe5b647(0xad4)]();let _0x151551;try{if(_0xe5b647(0xae1)===_0xe5b647(0xae1))_0x151551=JSON['parse'](_0x279345);else{if(_0x301fca){const _0x59f26d=_0x449db6['createObjectURL'](_0x36be8a);_0x530fb7['src']=_0x59f26d,_0x3d6864['onload']=()=>_0x1b7e64[_0xe5b647(0x6eb)](_0x59f26d);}}}catch(_0x333527){if(_0xe5b647(0x546)!==_0xe5b647(0x38f)){_0x151551=_0x4aee8c(_0x279345);if(!_0x151551)throw new Error('AI返回了无法识别的数据格式。');}else _0x45513c(_0x53d7ce['id'],_0x494445[_0xe5b647(0x257)](_0x1592a0=>_0x1592a0['id']));}const _0x22bb31=JSON[_0xe5b647(0x427)](_0x151551);console['log'](_0xe5b647(0x78a)),await _0x36ff18(_0xbe1835,_0x22bb31),_0x501e70=_0x22bb31;}else _0x581469[_0xe5b647(0xc54)][_0x5ec349]['accepted']=!![],_0x3940da();}}}else console['log'](_0xe5b647(0x54b)+_0xbe1835);_0x50581d(_0x45156c,_0x1fd0ee,_0x501e70);}catch(_0x1b1229){console[_0xe5b647(0xb1e)](_0xe5b647(0xc34)+_0x1fd0ee+'\x20内容失败:',_0x1b1229);const _0x1ba01b=_0x509294(_0x2c0f90),_0x247404=_0xe5b647(0x2da)+_0x1ba01b[_0xe5b647(0x41a)]+_0xe5b647(0x26d);let _0x34523f=_0xe5b647(0x75a)+_0x1b1229[_0xe5b647(0x979)]+_0xe5b647(0xa91);_0x1ee43a&&(_0x34523f+='\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>'+_0x3704b9(_0x1ee43a)+'</pre>\x0a\x20\x20\x20\x20\x20\x20</div>'),_0x236981[_0xe5b647(0x4d5)]=_0x247404+(_0xe5b647(0xaba)+_0x34523f+_0xe5b647(0xc4f)),document['getElementById'](_0xe5b647(0x2c2))[_0xe5b647(0xbc8)]('click',()=>{const _0x5bfc6e=_0xe5b647;_0x236981['style'][_0x5bfc6e(0x930)]=_0x5bfc6e(0x2f6),document[_0x5bfc6e(0x51d)]('snoop-phone-top-nav')[_0x5bfc6e(0x1e2)][_0x5bfc6e(0x930)]=_0x5bfc6e(0x338);});}}function _0x3704b9(_0x24fa16){const _0x4c20d0=_0x3b741d;if('fHvZu'===_0x4c20d0(0xb9b)){_0x36888a(_0x4c20d0(0x19f));return;}else{if(!_0x24fa16)return'';return _0x24fa16[_0x4c20d0(0x6ac)](/&/g,_0x4c20d0(0x81a))['replace'](/</g,_0x4c20d0(0x63f))[_0x4c20d0(0x6ac)](/>/g,_0x4c20d0(0x345))[_0x4c20d0(0x6ac)](/"/g,_0x4c20d0(0xa6f))['replace'](/'/g,_0x4c20d0(0x9bd));}}function _0x50581d(_0x2bcf20,_0x54d74a,_0x55dae6){const _0xa3eb3=_0x3b741d;if('cawav'===_0xa3eb3(0x28f)){const _0x1d5917=_0x509294(_0x2c0f90),_0x2ac127=document['getElementById'](_0xa3eb3(0x141));let _0xd70b1='';if(!_0x55dae6)_0xd70b1=_0xa3eb3(0xcd0);else{if(_0xa3eb3(0xa6a)===_0xa3eb3(0xa6a)){if(_0x2bcf20===_0xa3eb3(0xc24)){if(_0xa3eb3(0x43b)!=='FlUbs'){let _0x4ba6d8='';if(_0x167ced[_0xa3eb3(0x646)]&&_0x1a6ead[_0xa3eb3(0x646)][_0xa3eb3(0xc1f)]>0x0){const _0x4255b0=_0x109b94[_0xa3eb3(0x646)]['map'](_0x18c006=>_0x597dc8(_0x18c006)?.['name']||'未知')[_0xa3eb3(0x4db)]('、'),_0x30e09a=_0xa3eb3(0x927);_0x4ba6d8=_0xa3eb3(0xcff)+_0x30e09a+'\x20'+_0x4255b0+_0xa3eb3(0xc4f);}let _0x20499d='';if(_0x46dd7f['comments']&&_0x569c19[_0xa3eb3(0xc82)][_0xa3eb3(0xc1f)]>0x0){const _0x1b0ea1=_0x4861dd[_0xa3eb3(0xc82)][_0xa3eb3(0x257)](_0x32eaf8=>{const _0x428692=_0xa3eb3,_0x252df8=_0x5f0245(_0x32eaf8[_0x428692(0x719)])?.['name']||'未知';return _0x428692(0x40b)+_0x252df8+_0x428692(0xbf1)+_0x32eaf8[_0x428692(0x297)]+'</div>';})[_0xa3eb3(0x4db)]('');_0x20499d=_0xa3eb3(0x675)+_0x1b0ea1+_0xa3eb3(0xc4f);}_0x2ff634=_0xa3eb3(0xbac)+_0x4ba6d8+_0xa3eb3(0x974)+_0x20499d+_0xa3eb3(0x954);}else _0xd70b1=_0xa3eb3(0x540)+_0x55dae6+_0xa3eb3(0x58c);}else{if(_0xa3eb3(0x2a1)!==_0xa3eb3(0x843))try{if(_0xa3eb3(0xa27)!==_0xa3eb3(0x8f5)){let _0x1802ec=null;const _0x5f45ba=_0x55dae6[_0xa3eb3(0x606)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x58b453=_0x5f45ba?_0x5f45ba[0x1]['trim']():_0x55dae6['trim']();try{_0x1802ec=JSON[_0xa3eb3(0x576)](_0x58b453);}catch(_0x2398aa){console['warn'](_0xa3eb3(0xcd5),_0x2398aa['message']);try{_0x1802ec=_0x4aee8c(_0x58b453);if(!_0x1802ec)throw new Error(_0xa3eb3(0x599));console[_0xa3eb3(0x68b)](_0xa3eb3(0x9dc));}catch(_0x5afd50){throw _0x2398aa;}}switch(_0x2bcf20){case _0xa3eb3(0x58b):_0xd70b1=_0x1e7fb3(_0x1802ec);break;case'whispers':_0xd70b1=_0x571555(_0x1802ec,_0x1d5917[_0xa3eb3(0x41a)]);break;case _0xa3eb3(0x609):_0xd70b1=_0x1a7da0(_0x1802ec);break;case _0xa3eb3(0x723):_0xd70b1=_0x307e0b(_0x1802ec);break;case _0xa3eb3(0xc02):_0xd70b1=_0x49d6cf(_0x1802ec);break;case'wants':_0xd70b1=_0x54521c(_0x1802ec);break;case'footprints':_0xd70b1=_0x541608(_0x1802ec);break;default:_0xd70b1='<pre\x20style\x20=\x20\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22\x20>\x20'+JSON[_0xa3eb3(0x427)](_0x1802ec,null,0x2)+_0xa3eb3(0x250);}}else{if(_0x4bb71c?.[_0xa3eb3(0x711)]===_0xa3eb3(0x5fc))_0x3b77de=_0x2a337f(_0x4b71a2[_0xa3eb3(0x184)][0x0]);else _0x5a5001?.['type']===_0xa3eb3(0x91b)&&_0x2bab73&&(_0x16fea0=_0x2536f3(_0x1e3545));_0x42526c=_0x500604?.[_0xa3eb3(0x5ec)]||_0x5a020a,_0x42abb9=_0x1926df?.[_0xa3eb3(0x172)]||'';}}catch(_0xf8aeb1){_0xa3eb3(0x60d)===_0xa3eb3(0x60d)?(console['error']('视奸内容解析失败:',_0xf8aeb1),_0xd70b1='<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>'+_0x55dae6+'</pre>'):_0x23d344(![]);}else _0x27158f(![]),_0x4a2f22[_0xa3eb3(0xb1e)](_0xa3eb3(0x804),_0x3dce69),_0x1b9fc7(_0xa3eb3(0xc41)+_0x482a96[_0xa3eb3(0x979)]),_0x55e4e6[_0xa3eb3(0x820)](_0xa3eb3(0x7fa))[_0xa3eb3(0x32a)]=_0xa3eb3(0x808);}}else _0x869e0b[_0xa3eb3(0x41e)]=_0x82f3aa[_0xa3eb3(0x41e)][_0xa3eb3(0x78c)](_0x54b04b=>_0x54b04b['id']!==_0x3f758d),_0x37681d[_0xa3eb3(0x24d)][_0xa3eb3(0xb36)](_0x1dc2fe=>{const _0x5d94a4=_0xa3eb3;_0x1dc2fe[_0x5d94a4(0xc49)]&&(_0x1dc2fe[_0x5d94a4(0xc49)]=_0x1dc2fe[_0x5d94a4(0xc49)][_0x5d94a4(0x78c)](_0x6035ad=>_0x6035ad!==_0x30b7d2));}),_0x1078d7(),_0x59f64f(_0xa3eb3(0x925)),_0x456076(),_0x24cc78(_0xa3eb3(0x4e4),_0xa3eb3(0xc73));}_0x2ac127[_0xa3eb3(0x4d5)]=_0xa3eb3(0x70a)+_0x54d74a+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0x1d5917[_0xa3eb3(0x41a)]+_0xa3eb3(0x6c3)+(_0x2bcf20==='summary'?_0xa3eb3(0x790):_0xa3eb3(0xa7d))+_0xa3eb3(0x577)+_0xd70b1+_0xa3eb3(0x8a5);const _0x2919a8=_0x2ac127['querySelector']('.snoop-app-content');_0x2bcf20===_0xa3eb3(0xc24)&&(_0x2919a8[_0xa3eb3(0x1e2)][_0xa3eb3(0x940)]='0');document[_0xa3eb3(0x51d)]('snoop-app-back-btn')['addEventListener'](_0xa3eb3(0x779),()=>{const _0x236ae1=_0xa3eb3;_0x2ac127[_0x236ae1(0x1e2)]['display']=_0x236ae1(0x2f6),document[_0x236ae1(0x51d)]('snoop-phone-top-nav')[_0x236ae1(0x1e2)]['display']=_0x236ae1(0x338);});if(_0x2bcf20==='summary'){if('JimwI'!==_0xa3eb3(0x356)){const _0x4490c2=_0x342702[_0xa3eb3(0x1d3)]();_0x4490c2[_0xa3eb3(0x487)]=()=>_0x390f9f(_0x4490c2[_0xa3eb3(0x668)]),_0x4490c2[_0xa3eb3(0x122)]=()=>_0xb9b36e(_0x4490c2['error']);}else document[_0xa3eb3(0x51d)](_0xa3eb3(0xa4a))[_0xa3eb3(0xbc8)](_0xa3eb3(0x779),()=>{const _0x68abb8=_0xa3eb3,_0x502b24=document[_0x68abb8(0x51d)](_0x68abb8(0x880));_0x502b24['select'](),document[_0x68abb8(0x916)](_0x68abb8(0x2df)),_0x48e450(_0x68abb8(0xc86));});}else document['getElementById'](_0xa3eb3(0x17c))['addEventListener'](_0xa3eb3(0x779),async()=>{_0x42c372(_0x2bcf20,_0x54d74a,!![]);});_0x2bcf20===_0xa3eb3(0xbe2)&&('BEhVL'===_0xa3eb3(0x485)?_0x2a4466(_0xa3eb3(0x48f),_0xa3eb3(0x99d)):_0x2ac127[_0xa3eb3(0x5c4)]('.snoop-chat-item')['forEach'](_0x206150=>{const _0x586ccf=_0xa3eb3;if(_0x586ccf(0x9f9)==='KFwzg'){_0x37bc08['innerHTML']=_0x586ccf(0x48d);return;}else _0x206150[_0x586ccf(0xbc8)](_0x586ccf(0x779),()=>{const _0x525245=_0x586ccf;if('tuylW'===_0x525245(0xbd0))_0x44e72a(_0x20a773[_0x525245(0x9d5)]);else{const _0x47eb94=JSON[_0x525245(0x576)](_0x206150[_0x525245(0xa24)][_0x525245(0x68b)][_0x525245(0x6ac)](/&quot;/g,'\x22')),_0x184262=_0x206150[_0x525245(0xa24)][_0x525245(0x21a)],_0x3f3fb6=_0x206150[_0x525245(0xa24)]['characterName'];_0x2ba557(_0x184262,_0x3f3fb6,_0x47eb94);}});}));}else _0x2bedef['error'](_0xa3eb3(0x1b7),_0x100e6b),_0x3789a5('无法保存聊天记录。');}function _0x4aee8c(_0x2f7509){const _0x41b53a=_0x3b741d;if(_0x41b53a(0x371)===_0x41b53a(0x340))_0x2a2b73(),_0x1eef89(![]),_0x2293af[_0x41b53a(0xd1f)]=![];else{if(!_0x2f7509||typeof _0x2f7509!==_0x41b53a(0x2b1))return null;const _0x32c030=_0x2f7509[_0x41b53a(0xad4)]()[_0x41b53a(0x2bf)]('\x0a'),_0x23b607=[];let _0x3d4a9e=null;for(const _0x39f2c9 of _0x32c030){if(_0x41b53a(0x218)!==_0x41b53a(0xb2f)){const _0x20b11a=_0x39f2c9[_0x41b53a(0xad4)]();if(_0x20b11a[_0x41b53a(0xca0)]('-\x20')){if(_0x41b53a(0x41b)!==_0x41b53a(0x41b)){const _0x40de22=_0x1bac67[_0x41b53a(0x576)](_0x3050a9[_0x41b53a(0x760)]('deletedStickers')||'[]');_0x267fac['forEach'](_0x26db85=>{const _0x116ff9=_0x41b53a,_0x4576a5=_0x26db85[_0x116ff9(0xa24)][_0x116ff9(0x538)];!_0x40de22[_0x116ff9(0x32d)](_0x4576a5)&&_0x40de22[_0x116ff9(0xb47)](_0x4576a5);}),_0x3b30d4[_0x41b53a(0xa1c)](_0x41b53a(0xaf9),_0x529d68['stringify'](_0x40de22)),_0x2b16a4=![],_0x4fa5d1(),_0x696411(_0x41b53a(0xae3));}else{_0x3d4a9e&&_0x23b607['push'](_0x3d4a9e);_0x3d4a9e={};const _0x46a5c9=_0x20b11a[_0x41b53a(0xc97)](0x2),_0x430303=_0x46a5c9['split'](/:\s(.+)/);if(_0x430303[_0x41b53a(0xc1f)]>0x1){const _0x22d878=_0x430303[0x0][_0x41b53a(0xad4)](),_0x40d362=_0x430303[0x1]['trim']()['replace'](/^"|"$/g,'');_0x3d4a9e[_0x22d878]=_0x40d362;}}}else{if(_0x3d4a9e&&_0x20b11a){const _0x2a529b=_0x20b11a[_0x41b53a(0x2bf)](/:\s(.+)/);if(_0x2a529b[_0x41b53a(0xc1f)]>0x1){const _0x13fe78=_0x2a529b[0x0][_0x41b53a(0xad4)](),_0x452d5f=_0x2a529b[0x1]['trim']()[_0x41b53a(0x6ac)](/^"|"$/g,'');_0x3d4a9e[_0x13fe78]=_0x452d5f;}}}}else _0x17857d[_0x41b53a(0x32a)]='▶';}if(_0x3d4a9e){if(_0x41b53a(0x674)!==_0x41b53a(0x809))_0x23b607[_0x41b53a(0xb47)](_0x3d4a9e);else{const _0x365ef2=_0x52bb05['getAll']();_0x365ef2[_0x41b53a(0x487)]=()=>_0x2c02ab(_0x365ef2[_0x41b53a(0x668)]),_0x365ef2[_0x41b53a(0x122)]=()=>_0x44ab92(_0x365ef2[_0x41b53a(0xb1e)]);}}return _0x23b607['length']>0x0?_0x23b607:null;}}function _0x2ba557(_0x2fd8b3,_0x166087,_0x567447){const _0x25953d=_0x3b741d,_0x3b196b=document[_0x25953d(0x820)](_0x25953d(0xbdb)),_0x594578=document[_0x25953d(0x820)](_0x25953d(0x1e0));let _0x4f3661=_0x25953d(0xb65);if(!_0x567447||_0x567447[_0x25953d(0xc1f)]===0x0)'LdJVB'==='bdByp'?_0x258dfd['click']():_0x4f3661+=_0x25953d(0xcb6);else{if(_0x25953d(0x8d1)!==_0x25953d(0x8d1)){const _0x34aa3d=_0x25971f['id'],_0x23a5c7=_0x25953d(0x29c)+_0x34aa3d,_0x328ead=_0x4bb0cd[_0x25953d(0x760)](_0x23a5c7),_0x3c9f24=_0x81ddf7['querySelector'](_0x25953d(0xb56));if(_0x328ead)_0x3c9f24[_0x25953d(0x4d5)]='<img\x20src=\x22'+_0x328ead+_0x25953d(0x561);else{const _0x141dfa=_0x29dff6[_0x25953d(0x820)](_0x25953d(0x17e)+_0x34aa3d+_0x25953d(0x23d)+_0x34aa3d+_0x25953d(0x3a8))?.[_0x25953d(0x4d5)];_0x141dfa&&(_0x3c9f24[_0x25953d(0x4d5)]=_0x141dfa);}}else _0x567447[_0x25953d(0xb36)](_0x2cb8e2=>{const _0x2c72fc=_0x25953d,_0x22cf1d=_0x2cb8e2['sender']==='character',_0xa7cfca=_0x22cf1d?_0x166087?_0x166087[0x0]:'?':_0x2fd8b3?_0x2fd8b3[0x0]:'?';_0x4f3661+=_0x2c72fc(0xd3d)+(_0x22cf1d?_0x2c72fc(0x8ed):'ai')+'\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20'+(!_0x22cf1d?'<div\x20class=\x22snoop-avatar\x22>'+_0xa7cfca+_0x2c72fc(0xc4f):'')+_0x2c72fc(0x5bb)+(_0x22cf1d?_0x2c72fc(0x8ed):'ai')+_0x2c72fc(0xccc)+_0x2cb8e2[_0x2c72fc(0x297)]+'</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20'+(_0x22cf1d?_0x2c72fc(0x696)+_0xa7cfca+_0x2c72fc(0xc4f):'')+_0x2c72fc(0xd1e);});}_0x4f3661+=_0x25953d(0xc4f),_0x3b196b['innerHTML']=_0x4f3661,_0x3b196b['scrollTop']=_0x3b196b[_0x25953d(0x983)],_0x594578[_0x25953d(0x4d5)]=_0x25953d(0xb18)+_0x2fd8b3+_0x25953d(0x553),document['getElementById'](_0x25953d(0x4b1))[_0x25953d(0xbc8)](_0x25953d(0x779),()=>{const _0x4c6466=_0x25953d;_0x42c372(_0x4c6466(0xbe2),'聊天');}),!document['getElementById'](_0x25953d(0x71d))&&document['head'][_0x25953d(0x125)](_0x25953d(0x2a7),_0x25953d(0x1b3));}async function _0xf54e02(_0x266e3d){const _0x378f23=_0x3b741d;if(!_0x266e3d)return'';const _0x23be39=[{'id':'gallery','name':'相册'},{'id':_0x378f23(0xbe2),'name':'和其他人的聊天'},{'id':_0x378f23(0x609),'name':_0x378f23(0x7bc)},{'id':_0x378f23(0x723),'name':'备忘录'},{'id':_0x378f23(0xc02),'name':_0x378f23(0x5d2)},{'id':_0x378f23(0x451),'name':'购物记录'},{'id':_0x378f23(0xca7),'name':'最近的足迹'}];let _0x2b1c6c='';for(const _0x471bdc of _0x23be39){try{const _0x3df2d1=_0x378f23(0x600)+_0x266e3d+'_'+_0x471bdc['id']+'\x20',_0x4eb032=await _0x1bc020(_0x3df2d1);if(_0x4eb032){const _0x188942=_0x4eb032[_0x378f23(0x606)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x524026=_0x188942?_0x188942[0x1][_0x378f23(0xad4)]():_0x4eb032['trim']();if(!_0x524026)continue;let _0x176b7d=null;try{if(_0x378f23(0xb71)!==_0x378f23(0xc94))_0x176b7d=JSON['parse'](_0x524026);else{if(_0x3fd7a4['diaryPressTimer'])_0x592de1(_0x10304d['diaryPressTimer']);}}catch(_0x199e1e){if('mLeBo'===_0x378f23(0x5f7)){console[_0x378f23(0xc52)](_0x378f23(0x823)+_0x471bdc['id']+_0x378f23(0x945),_0x199e1e[_0x378f23(0x979)]);try{_0x176b7d=_0x4aee8c(_0x524026);if(!_0x176b7d)throw new Error(_0x378f23(0x599));console[_0x378f23(0x68b)](_0x378f23(0x315)+_0x471bdc['id']+_0x378f23(0x50a));}catch(_0x158326){throw _0x199e1e;}}else{const _0x3f0827=_0x35d19b['createElement']('li');_0x3f0827['className']=_0x378f23(0x9eb),_0x3f0827[_0x378f23(0xa24)][_0x378f23(0x37d)]=_0x1f1b20['id'],_0x3f0827['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x35cb66['avatar']||_0x4bfd0e)+_0x378f23(0x557)+_0x52b654[_0x378f23(0x41a)]+_0x378f23(0xc5a),_0x3f0827[_0x378f23(0xbc8)]('click',()=>{_0x598229(_0x3e6554['id']);}),_0x3f0827['querySelector'](_0x378f23(0x589))['addEventListener']('click',()=>{_0x313895(_0x435582['id']);}),_0x3f0827[_0x378f23(0x820)](_0x378f23(0xc75))[_0x378f23(0xbc8)](_0x378f23(0x779),_0x1c7e55=>{const _0x236adf=_0x378f23;_0x1c7e55[_0x236adf(0xa10)](),_0x3141c5(_0x5b824e['id']);}),_0x2b5026['appendChild'](_0x3f0827);}}if(Array['isArray'](_0x176b7d)&&_0x176b7d['length']>0x0){if(_0x378f23(0x7fb)===_0x378f23(0x7fb)){_0x2b1c6c===''&&(_0x378f23(0xd2d)===_0x378f23(0xd2d)?_0x2b1c6c+=_0x378f23(0xc06):_0x190c2d[_0x378f23(0xb1e)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x45909c,_0x31097f));_0x2b1c6c+='\x0a##\x20'+_0x471bdc[_0x378f23(0x41a)]+'\x20\x0a';switch(_0x471bdc['id']){case _0x378f23(0x58b):_0x176b7d[_0x378f23(0xb36)](_0x434fe9=>{const _0x3cfb7c=_0x378f23;_0x3cfb7c(0x1ff)!=='GLhkJ'?_0x2b1c6c+=_0x3cfb7c(0x9db)+_0x434fe9['description']+_0x3cfb7c(0x949):_0x1780ed+=_0x3cfb7c(0xb0c);});break;case _0x378f23(0xbe2):_0x176b7d[_0x378f23(0xb36)](_0x4bf1a7=>{const _0x2e6aa4=_0x378f23;_0x2b1c6c+='-\x20你记得曾和“'+_0x4bf1a7[_0x2e6aa4(0x6d3)]+'”聊过天，关于：“'+_0x4bf1a7['last_message_preview']+_0x2e6aa4(0x949),_0x4bf1a7['log']&&Array['isArray'](_0x4bf1a7[_0x2e6aa4(0x68b)])&&(_0x2b1c6c+=_0x2e6aa4(0x5a6),_0x4bf1a7[_0x2e6aa4(0x68b)][_0x2e6aa4(0xb36)](_0x2eb4bf=>{const _0xe4ad96=_0x2e6aa4;if(_0xe4ad96(0x918)!==_0xe4ad96(0xc95)){const _0x5850bb=_0x2eb4bf[_0xe4ad96(0x433)]===_0xe4ad96(0xaa3)?'你':_0x4bf1a7[_0xe4ad96(0x6d3)];_0x2b1c6c+=_0xe4ad96(0xc9e)+_0x5850bb+':\x20'+_0x2eb4bf[_0xe4ad96(0x297)]+'\x20\x0a';}else{if(!_0x569c28)return;const _0x221a22=_0x54a204[_0xe4ad96(0xd1d)]?_0x2bea9b[_0xe4ad96(0xd1d)][0x0][_0xe4ad96(0x496)]:_0x4726e5[_0xe4ad96(0x496)];_0x1a19ea=_0x221a22-_0x1c9d88;if(_0x1ce131<0x0){const _0x46990f=_0x27d98a['abs'](_0x2dadec),_0x1dc70e=0.4,_0x3a78c6=_0x2c4e59[_0xe4ad96(0x660)](_0x46990f,_0x1dc70e)*0x14;_0x279c35['style'][_0xe4ad96(0x424)]=_0xe4ad96(0xac9)+_0x3a78c6+_0xe4ad96(0xad8);}}}));});break;case _0x378f23(0x609):_0x176b7d[_0x378f23(0xb36)](_0x1c4497=>{const _0x348c3c=_0x378f23;if(_0x348c3c(0x31b)!=='rXPWN')_0x2b1c6c+=_0x348c3c(0x941)+_0x1c4497[_0x348c3c(0xa79)]+_0x348c3c(0x949);else{const _0x46aebc=[],_0x141c23=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x4a22eb;while((_0x4a22eb=_0x141c23['exec'](_0x4f4c7d))!==null){const _0x10713b=_0x4a22eb[0x1][_0x348c3c(0x6ac)](/\\"/g,'\x22')[_0x348c3c(0x6ac)](/\\n/g,'\x0a')[_0x348c3c(0xad4)]();if(_0x10713b)_0x46aebc['push'](_0x10713b);}if(_0x46aebc[_0x348c3c(0xc1f)])return _0x46aebc['flatMap'](_0x4b0a46)['slice'](0x0,0x9);}});break;case'fragments':_0x176b7d[_0x378f23(0xb36)](_0x176be3=>{const _0x3d77cb=_0x378f23;_0x2b1c6c+=_0x3d77cb(0xc56)+_0x176be3[_0x3d77cb(0x82a)]+_0x3d77cb(0x457)+_0x176be3[_0x3d77cb(0x297)]['replace'](/\n/g,'\x20')+'”。\x0a';});break;case'bites':_0x176b7d['forEach'](_0x1c9fee=>{const _0xf793c5=_0x378f23;_0x2b1c6c+=_0xf793c5(0x525)+_0x1c9fee['restaurant_name']+'”，里面有\x20'+_0x1c9fee[_0xf793c5(0x63c)][_0xf793c5(0x4db)]('、')+'。\x0a';});break;case _0x378f23(0x451):_0x176b7d[_0x378f23(0xb36)](_0x4d7b13=>{const _0x44896b=_0x378f23;_0x2b1c6c+=_0x44896b(0x5c8)+_0x4d7b13['store_name']+_0x44896b(0x150)+_0x4d7b13[_0x44896b(0xa01)]+'”。\x0a';});break;case _0x378f23(0xca7):_0x176b7d[_0x378f23(0xb36)](_0x566b26=>{const _0x4c09f0=_0x378f23;_0x2b1c6c+=_0x4c09f0(0x7ff)+_0x566b26[_0x4c09f0(0x363)]+'”，在那里“'+_0x566b26[_0x4c09f0(0x143)]+_0x4c09f0(0x949);});break;default:_0x176b7d[_0x378f23(0xb36)](_0x4ba960=>{const _0x4e839f=_0x378f23;_0x4e839f(0xa8d)===_0x4e839f(0x32b)?_0x45c4a6['click']():_0x2b1c6c+='-\x20'+JSON[_0x4e839f(0x427)](_0x4ba960)+'\x20\x0a';});break;}}else{if(!_0x56f54c)return;const _0x5decff=_0x3c2175(_0x5da14d['getElementById'](_0x378f23(0x3f1))[_0x378f23(0x90f)]),_0x479351=_0x56d75f(_0x5aa6a4[_0x378f23(0x51d)]('livestream-sprite-slider-y')['value']),_0x3d1889=_0xf84f54(_0x842db8[_0x378f23(0x51d)]('livestream-sprite-slider-scale')[_0x378f23(0x90f)])/0x64,_0x1f67eb=_0x11ac95['getElementById'](_0x378f23(0x370));_0x1f67eb&&(_0x1f67eb[_0x378f23(0x1e2)][_0x378f23(0x135)]=0x55*_0x3d1889+'%',_0x1f67eb[_0x378f23(0x1e2)][_0x378f23(0x34a)]=0x55*_0x3d1889+'%',_0x1f67eb[_0x378f23(0x1e2)][_0x378f23(0xa12)]=_0x5decff+'%',_0x1f67eb[_0x378f23(0x1e2)][_0x378f23(0x49d)]=_0x479351+'%',_0x1f67eb['style'][_0x378f23(0x424)]=_0x378f23(0x3aa));}}}}catch(_0x57d6c9){console[_0x378f23(0xb1e)]('加载视奸记忆失败('+_0x471bdc['id']+_0x378f23(0x6a5),_0x57d6c9);}}return _0x2b1c6c;}function _0x1e7fb3(_0x276d21){const _0x3a45fa=_0x3b741d;if(_0x3a45fa(0x38c)!==_0x3a45fa(0x38c))_0x530fd5();else{_0x276d21['sort']((_0x4e506c,_0x1be26f)=>new Date(_0x1be26f['timestamp'])-new Date(_0x4e506c['timestamp']));if(!Array[_0x3a45fa(0x8e1)](_0x276d21))return _0x3a45fa(0x87a);if(_0x276d21[_0x3a45fa(0xc1f)]===0x0)return _0x3a45fa(0xa0d);return'<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20'+_0x276d21[_0x3a45fa(0x257)]((_0x4dda6e,_0x37db6f)=>'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style\x20=\x20\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20'+(_0x37db6f<_0x276d21['length']-0x1?_0x3a45fa(0x266):'')+_0x3a45fa(0x357)+(_0x4dda6e['description']||'无描述')+_0x3a45fa(0xce8)+(_0x4dda6e[_0x3a45fa(0x11f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')['join']('')+'</div\x20>\x20';}}function _0x571555(_0x526f07,_0x5bfb0c){const _0x58ca9d=_0x3b741d;if(_0x58ca9d(0x78d)===_0x58ca9d(0xa04))_0x5af336=_0xf35842[_0x58ca9d(0x41a)]||'我',_0x4f7328='speaker-user';else{if(!Array[_0x58ca9d(0x8e1)](_0x526f07)||_0x526f07[_0x58ca9d(0xc1f)]===0x0)return _0x58ca9d(0x815);return _0x58ca9d(0xd34)+_0x526f07[_0x58ca9d(0x257)]((_0x3d3798,_0xbf7200)=>{const _0x487536=_0x58ca9d,_0x4aefbe=JSON[_0x487536(0x427)](_0x3d3798[_0x487536(0x68b)]||[])['replace'](/'/g,_0x487536(0x834))[_0x487536(0x6ac)](/"/g,_0x487536(0xa6f)),_0x1c79a3=_0x3d3798[_0x487536(0x6d3)]||_0x487536(0x7a3);return _0x487536(0xccb)+(_0xbf7200<_0x526f07[_0x487536(0xc1f)]-0x1?_0x487536(0x266):'')+_0x487536(0x8b4)+_0x4aefbe+_0x487536(0x642)+_0x1c79a3+'\x27\x0a\x20\x20\x20\x20data-character-name=\x27'+_0x5bfb0c+_0x487536(0x71e)+_0x1c79a3[_0x487536(0x51b)](0x0)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x1c79a3+_0x487536(0xafd)+(_0x3d3798[_0x487536(0x326)]||'')+_0x487536(0x2b6);})['join']('')+'</div\x20>\x20';}}function _0x1a7da0(_0x5964c5){const _0xcb2e50=_0x3b741d;if(!Array['isArray'](_0x5964c5))return _0xcb2e50(0x87a);if(_0x5964c5['length']===0x0)return _0xcb2e50(0x97c);return _0x5964c5[_0xcb2e50(0xb3d)]((_0x5a993e,_0x3d0dbc)=>new Date(_0x3d0dbc[_0xcb2e50(0x11f)])-new Date(_0x5a993e[_0xcb2e50(0x11f)])),_0xcb2e50(0xd34)+_0x5964c5[_0xcb2e50(0x257)]((_0x27f7db,_0x1bf987)=>_0xcb2e50(0xb0b)+(_0x1bf987<_0x5964c5['length']-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+_0xcb2e50(0x292)+(_0x27f7db[_0xcb2e50(0xa79)]||_0xcb2e50(0xb6a))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x27f7db[_0xcb2e50(0x78b)]||'没有找到相关结果。')+_0xcb2e50(0x7c5)+(_0x27f7db[_0xcb2e50(0x11f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')['join']('')+_0xcb2e50(0x14f);}function _0x307e0b(_0x1c9012){const _0x61095d=_0x3b741d;if(!Array[_0x61095d(0x8e1)](_0x1c9012))return _0x61095d(0x87a);if(_0x1c9012[_0x61095d(0xc1f)]===0x0)return _0x61095d(0x7c8);return _0x1c9012[_0x61095d(0xb3d)]((_0x58adb4,_0x380621)=>new Date(_0x380621[_0x61095d(0x96b)])-new Date(_0x58adb4[_0x61095d(0x96b)])),_0x1c9012['map'](_0xfc5fa4=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>'+(_0xfc5fa4['title']||_0x61095d(0x81c))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>'+(_0xfc5fa4[_0x61095d(0x297)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20'+(_0xfc5fa4['last_edited']||'')+_0x61095d(0x12d))['join']('');}function _0x49d6cf(_0x84d68){const _0x36faff=_0x3b741d;if(!Array[_0x36faff(0x8e1)](_0x84d68))return'<p>格式错误</p>';if(_0x84d68[_0x36faff(0xc1f)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>';return _0x84d68['sort']((_0x186212,_0x18bd21)=>new Date(_0x18bd21['timestamp'])-new Date(_0x186212[_0x36faff(0x11f)])),_0x84d68[_0x36faff(0x257)](_0x50476d=>{const _0x34045d=_0x36faff;if(_0x34045d(0x2aa)===_0x34045d(0x47f))return{'type':_0x34045d(0x1c1),'content':_0x361640[0x1][_0x34045d(0xad4)]()};else{const _0x49ed8f=(_0x50476d['items']||[])[_0x34045d(0x257)](_0x2288e3=>_0x34045d(0x76d)+_0x2288e3+_0x34045d(0x9ae))[_0x34045d(0x4db)]('');return _0x34045d(0xc26)+(_0x50476d[_0x34045d(0x870)]||_0x34045d(0xa29))+_0x34045d(0x1cd)+(_0x50476d['timestamp']||'')+_0x34045d(0x6ed)+(_0x50476d[_0x34045d(0x998)]||'已送达')+_0x34045d(0x490)+_0x49ed8f+_0x34045d(0x365)+(_0x50476d[_0x34045d(0x6e5)]||0x0)[_0x34045d(0xb7b)](0x2)+_0x34045d(0xa58);}})[_0x36faff(0x4db)]('');}function _0x54521c(_0x481582){const _0x3a082c=_0x3b741d;if(_0x3a082c(0x3af)!==_0x3a082c(0x6a1)){if(!Array[_0x3a082c(0x8e1)](_0x481582))return'<p>格式错误</p>';if(_0x481582['length']===0x0)return _0x3a082c(0x8b3);return _0x481582[_0x3a082c(0xb3d)]((_0x5653c8,_0x48f248)=>new Date(_0x48f248[_0x3a082c(0x11f)])-new Date(_0x5653c8[_0x3a082c(0x11f)])),_0x481582[_0x3a082c(0x257)](_0x55b09c=>'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20'+(_0x55b09c['store_name']||_0x3a082c(0x659))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>'+(_0x55b09c[_0x3a082c(0x11f)]||'')+_0x3a082c(0x735)+(_0x55b09c[_0x3a082c(0xa01)]||_0x3a082c(0x6cd))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20'+(_0x55b09c[_0x3a082c(0x1cf)]||0x0)['toFixed'](0x2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x3a082c(0x4db)]('');}else _0x30a7cd['textContent']=_0x3a082c(0x893);}function _0x541608(_0x32c3b0){const _0x416bc1=_0x3b741d;if(!Array[_0x416bc1(0x8e1)](_0x32c3b0))return _0x416bc1(0x87a);if(_0x32c3b0[_0x416bc1(0xc1f)]===0x0)return _0x416bc1(0x890);return _0x32c3b0[_0x416bc1(0xb3d)]((_0x5f29e9,_0x33627d)=>new Date(_0x33627d[_0x416bc1(0x11f)])-new Date(_0x5f29e9[_0x416bc1(0x11f)])),_0x416bc1(0x217)+_0x32c3b0[_0x416bc1(0x257)](_0x10f8c4=>_0x416bc1(0x23e)+(_0x10f8c4[_0x416bc1(0x363)]||'未知地点')+_0x416bc1(0x1ed)+(_0x10f8c4[_0x416bc1(0x143)]||'')+_0x416bc1(0x126)+(_0x10f8c4[_0x416bc1(0x11f)]||'')+_0x416bc1(0x53c))['join']('')+_0x416bc1(0x14f);}async function _0x2e1491(_0x59c414,_0x4bd15e,_0x5eb2a7=null){const _0xb4895f=_0x3b741d,_0xf86aa8=_0x509294(_0x4bd15e),_0x2a7719=_0x543bea[_0xb4895f(0x94b)]['find'](_0x37068c=>_0x37068c[_0xb4895f(0x711)]===_0xb4895f(0x5fc)&&_0x37068c['participantIds'][_0xb4895f(0x32d)](_0x4bd15e)),_0x17db21=_0x2f2ed1(_0x2a7719?.['id']||_0x543bea['activeChatId']);if(!_0xf86aa8)throw new Error(_0xb4895f(0x60f));const {omniText:_0x6c7c9c}=_0x201955(_0x4bd15e);let _0x4aa303='';const _0x319915=new Date();let _0x5a349c=null,_0x2d60a1='无';if(_0x5eb2a7){if(_0xb4895f(0xbee)!==_0xb4895f(0xbee)){if(_0x483bce===null)return;const _0x1dfc77=_0x1dd42c['value'][_0xb4895f(0xad4)]();if(_0x1dfc77===''){_0x236930();return;}const _0x3e0b0b=_0x4194d1[_0xb4895f(0xc54)][_0x58aa0a];_0x3e0b0b&&(_0x3e0b0b[_0xb4895f(0x297)]=_0x1dfc77,_0x5a98e7(),_0x1dd91d()),_0xfbd4d7[_0xb4895f(0xa19)]['remove'](_0xb4895f(0x6db)),_0x186468=null;}else try{if(_0xb4895f(0x6ff)!=='XNyrP')throw new _0x3c2a68(_0xb4895f(0x599));else{let _0x111d40;try{if(_0xb4895f(0x9fa)!=='qTQMC'){const _0x50be86=_0x47447e(_0x55d879['participantIds'][0x0]);_0x50be86?(!_0x2ea656&&(_0x4bb6f0=_0x50be86['avatar']||_0x4793ee),_0x5a3b4c=_0x50be86['name']||'未命名角色',_0x2e5247=_0x50be86[_0xb4895f(0xabb)]||'私聊'):(_0x2f4752=_0xb4895f(0x4c3),_0x47157c='错误：找不到角色');}else _0x111d40=JSON[_0xb4895f(0x576)](_0x5eb2a7);}catch(_0x53871c){_0xb4895f(0xaa8)!==_0xb4895f(0x5a4)?_0x111d40=_0x4aee8c(_0x5eb2a7):_0x449d1f(_0x48e3da['selectedDate']);}if(Array[_0xb4895f(0x8e1)](_0x111d40)&&_0x111d40[_0xb4895f(0xc1f)]>0x0){if(_0xb4895f(0xa03)===_0xb4895f(0xa03)){const _0x3ab7a7=_0x111d40[_0xb4895f(0x257)](_0x1e49f8=>new Date(_0x1e49f8[_0xb4895f(0x11f)]||_0x1e49f8[_0xb4895f(0x96b)]))[_0xb4895f(0x78c)](_0x4add67=>!isNaN(_0x4add67));_0x3ab7a7['length']>0x0&&('IYwMy'!==_0xb4895f(0x23a)?_0x5e3124[_0xb4895f(0x16c)]=_0x952d9[_0xb4895f(0x3fc)]:(_0x5a349c=new Date(Math['max'][_0xb4895f(0x329)](null,_0x3ab7a7)),_0x2d60a1=_0x5a349c['toLocaleString'](_0xb4895f(0xbd4),{'dateStyle':'medium','timeStyle':_0xb4895f(0x90a)})));}else{if(!_0x18e092[_0xb4895f(0xbaa)])return _0x572f74[_0xb4895f(0x7e7)][_0xb4895f(0xbe8)](_0x8073b1=>_0x8073b1['id']===_0x2a64d3['activeUserProfileId'])||_0x43ff3d['userProfiles'][0x0];const _0x19bcf0=_0x114984['chats'][_0xb4895f(0xbe8)](_0x2bcf54=>_0x2bcf54[_0xb4895f(0x711)]===_0xb4895f(0x5fc)&&_0x2bcf54['participantIds'][_0xb4895f(0x32d)](_0x20c16b['activeDiaryCharacterId'])),_0x3707b7=_0x19bcf0?.['boundUserProfileId']||_0x3a9391['activeUserProfileId'];return _0x3102d0['userProfiles'][_0xb4895f(0xbe8)](_0x2b3f0d=>_0x2b3f0d['id']===_0x3707b7)||_0x387c84[_0xb4895f(0x7e7)][0x0];}}}}catch(_0x24706a){if(_0xb4895f(0x472)!=='azJwq'){const _0xd9b336=_0x596dcd(_0x92dac0[0x1],0xa),_0x44e87d=_0x4c4d48(_0x5b397c[0x2],0xa),_0x12b59a=_0x1dfefc(_0x1cb811[0x3],0xa)*(_0x562346[0x3]['length']===0x2?0xa:0x1),_0x5b637c=_0xd9b336*0x3c+_0x44e87d+_0x12b59a/0x3e8,_0x3eef1b=_0x1714dd['replace'](_0x5778b4,'')[_0xb4895f(0xad4)]();_0x3eef1b&&_0x2f0234['push']({'time':_0x5b637c,'text':_0x3eef1b});}else console[_0xb4895f(0xc52)]('无法解析旧的视奸内容来获取时间戳。',_0x24706a);}}const _0x4c1a7d=_0x2cf2bf(_0x4bd15e);_0x4aa303=_0xb4895f(0xbfd),_0x4aa303+=_0xb4895f(0x827)+_0x319915[_0xb4895f(0x5f4)](_0xb4895f(0xbd4),{'dateStyle':_0xb4895f(0xd0f),'timeStyle':_0xb4895f(0x90a)})+'\x20\x0a';if(_0x4c1a7d){const _0x2a440f=new Date(_0x4c1a7d[_0xb4895f(0x11f)]),_0x401105=_0x1eac91(_0x2a440f);_0x4aa303+=_0xb4895f(0xc76)+_0x401105+'\x20\x0a';const _0x33a8a6=_0x319915[_0xb4895f(0xb12)](),_0x4df50f=_0x2a440f[_0xb4895f(0xb12)](),_0x48e0c0=new Date();_0x48e0c0[_0xb4895f(0x8e2)](_0x319915[_0xb4895f(0x3d6)]()-0x1);const _0x3cd6b7=_0x48e0c0[_0xb4895f(0xb12)]();if(_0x33a8a6===_0x4df50f){const _0x3e6568=(_0x319915-_0x2a440f)/(0x3e8*0x3c);_0x4aa303+=_0xb4895f(0x171);}else{if(_0x3cd6b7===_0x4df50f){if('tmxWR'===_0xb4895f(0x195)){if(_0x2c2296)_0x1f93b9[_0xb4895f(0x779)]();}else _0x4aa303+=_0xb4895f(0xb0c);}else{if(_0xb4895f(0xb62)!==_0xb4895f(0x6ec)){const _0x29b77a=Math[_0xb4895f(0xcfd)]((_0x319915-_0x2a440f)/(0x3e8*0x3c*0x3c*0x18));_0x4aa303+=_0xb4895f(0xa71)+_0x29b77a+_0xb4895f(0xab3);}else _0x118b0d=_0x43be0a['name'],_0x4e4f02=_0x574668[_0xb4895f(0x5ec)];}}}else _0x4aa303+=_0xb4895f(0x19a);let _0x39c7b5='',_0x3d1012='';_0x5eb2a7?(_0x39c7b5=_0xb4895f(0xcf0),_0x3d1012=_0xb4895f(0x474)+_0x5eb2a7+'\x0a```'):_0x39c7b5=_0xb4895f(0x2ff);const _0x5cbc55={'gallery':_0xb4895f(0xadd),'whispers':_0xb4895f(0x938),'abyss':_0xb4895f(0x96a),'fragments':'\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','bites':_0xb4895f(0xb04),'wants':_0xb4895f(0xc3b),'footprints':_0xb4895f(0x6fe)},_0x5345e3=_0x5cbc55[_0x59c414]||'#\x20任务:\x20生成\x20'+_0x59c414+_0xb4895f(0x9d9);let _0xccdd9f='';if(_0xf86aa8['linkedWorldBookIds']&&_0xf86aa8[_0xb4895f(0xc49)][_0xb4895f(0xc1f)]>0x0){const _0x14e7df=_0xf86aa8[_0xb4895f(0xc49)][_0xb4895f(0x257)](_0x3f8a42=>_0x543bea[_0xb4895f(0x41e)][_0xb4895f(0xbe8)](_0x7b0290=>_0x7b0290['id']===_0x3f8a42))['filter'](Boolean)[_0xb4895f(0x257)](_0x25bd11=>'\x0a##\x20世界书条目:\x20'+_0x25bd11['name']+'\x0a'+_0x25bd11[_0xb4895f(0x297)])['join']('');_0x14e7df&&(_0xccdd9f=_0xb4895f(0x4f5)+_0x14e7df);}const _0xdc26b9=_0xb4895f(0x638)+_0xf86aa8[_0xb4895f(0x41a)]+_0xb4895f(0x768)+_0xf86aa8[_0xb4895f(0x41a)]+_0xb4895f(0x51f)+_0x17db21['name']+_0xb4895f(0x5af)+_0x2d60a1+_0xb4895f(0xc33)+_0x319915[_0xb4895f(0x5f4)](_0xb4895f(0xbd4),{'dateStyle':_0xb4895f(0xd0f),'timeStyle':'short'})+_0xb4895f(0x3f3)+_0xf86aa8[_0xb4895f(0x41a)]+_0xb4895f(0x631)+_0xf86aa8['persona']+'\x0a'+_0xccdd9f+_0xb4895f(0x758)+_0x17db21[_0xb4895f(0x41a)]+_0xb4895f(0x631)+_0x17db21[_0xb4895f(0x367)]+_0xb4895f(0x309)+_0x6c7c9c+'\x0a'+_0x3d1012+'\x0a\x0a#\x20当前任务指令\x0a'+_0x39c7b5+'\x0a'+_0x5345e3+_0xb4895f(0x5f0),_0x5a810b=[{'role':_0xb4895f(0xacc),'content':_0xdc26b9}];_0x5a810b['push']({'role':_0xb4895f(0x8ed),'content':_0xb4895f(0x7e2)});const _0x452451=await _0x3a4cad(_0x5a810b,{'json':!![]});return _0x452451;}async function _0x1f2dba(_0x1306ed){const _0x22f2a7=_0x3b741d,_0x3004e8=_0x509294(_0x1306ed);if(!_0x3004e8)throw new Error('找不到角色。');_0x2ee484(!![],_0x22f2a7(0xa3d));const _0x14ce8f=[_0x22f2a7(0x58b),'whispers',_0x22f2a7(0x609),_0x22f2a7(0x723),_0x22f2a7(0xc02),'wants','footprints'];let _0x5992de={};await Promise[_0x22f2a7(0x71a)](_0x14ce8f[_0x22f2a7(0x257)](async _0x4191a5=>{const _0x2a9348=_0x22f2a7,_0x165493=_0x2a9348(0x600)+_0x1306ed+'_'+_0x4191a5,_0x120f82=await _0x1bc020(_0x165493);if(_0x120f82){if(_0x2a9348(0x524)!==_0x2a9348(0x524)){const _0x804fbc=_0x639dc9[_0x2a9348(0x23f)](_0x2a9348(0xaee));_0x804fbc['className']='day-dot',_0xea90a8['appendChild'](_0x804fbc);}else try{_0x5992de[_0x4191a5]=JSON[_0x2a9348(0x576)](_0x120f82);}catch(_0x1a97df){}}}));if(Object['keys'](_0x5992de)['length']===0x0)return _0x22f2a7(0x523);const _0x25d854=_0x22f2a7(0x4c5)+_0x3004e8[_0x22f2a7(0x41a)]+_0x22f2a7(0x260),_0x435e80=[{'role':_0x22f2a7(0xacc),'content':_0x25d854},{'role':_0x22f2a7(0x8ed),'content':JSON['stringify'](_0x5992de,null,0x2)}];_0x2ee484(!![],'书记官正在奋笔疾书...');const _0x2069e2=await _0x3a4cad(_0x435e80);return _0x2069e2||_0x22f2a7(0x91e);}async function _0x1f2dba(_0x2ea4ed){const _0x2abb4e=_0x3b741d,_0x3df5a0=_0x509294(_0x2ea4ed);if(!_0x3df5a0)throw new Error(_0x2abb4e(0xbc0));try{_0x2ee484(!![],_0x2abb4e(0xa3d));const _0x5d9948=[_0x2abb4e(0x58b),_0x2abb4e(0xbe2),_0x2abb4e(0x609),'fragments','bites',_0x2abb4e(0x451),_0x2abb4e(0xca7)];let _0x3745a3={};await Promise['all'](_0x5d9948[_0x2abb4e(0x257)](async _0x3f92ec=>{const _0x331f10=_0x2abb4e,_0xa2b946=_0x331f10(0x600)+_0x2ea4ed+'_'+_0x3f92ec,_0x17946d=await _0x1bc020(_0xa2b946);if(_0x17946d)try{_0x331f10(0x917)===_0x331f10(0x1ee)?(_0x513660[_0x331f10(0x32a)]=_0x388c5e[_0x331f10(0x864)](_0x331f10(0xbd4),{'hour':'2-digit','minute':_0x331f10(0x145),'hour12':![]}),_0x3d8d79['textContent']=_0x48ff7f[_0x331f10(0x894)](_0x331f10(0xbd4),{'month':'long','day':_0x331f10(0x423),'weekday':'long'})):_0x3745a3[_0x3f92ec]=JSON['parse'](_0x17946d);}catch(_0x5a0690){}}));if(Object[_0x2abb4e(0x4fa)](_0x3745a3)['length']===0x0)return _0x2abb4e(0x523);const _0x3c6e72='\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“'+_0x3df5a0[_0x2abb4e(0x41a)]+_0x2abb4e(0xc72),_0x24e5cf=[{'role':_0x2abb4e(0xacc),'content':_0x3c6e72},{'role':'user','content':JSON[_0x2abb4e(0x427)](_0x3745a3,null,0x2)}];_0x2ee484(!![],_0x2abb4e(0xc61));const _0x18262f=await _0x3a4cad(_0x24e5cf);return _0x18262f||_0x2abb4e(0x91e);}finally{_0x2ee484(![]);}}document[_0x3b741d(0x51d)](_0x3b741d(0x2ac))[_0x3b741d(0xbc8)]('click',()=>_0x53ffb2(_0x3b741d(0x3fb),_0x3b741d(0x188))),document[_0x3b741d(0x51d)](_0x3b741d(0xc23))[_0x3b741d(0xbc8)](_0x3b741d(0x779),()=>{const _0x41be99=_0x3b741d;document[_0x41be99(0x51d)](_0x41be99(0x141))[_0x41be99(0x1e2)][_0x41be99(0x930)]=_0x41be99(0x2f6),_0x53ffb2(_0x41be99(0x188),_0x41be99(0x6b4));});const _0x588c86=document[_0x3b741d(0x51d)](_0x3b741d(0x2f3));_0x588c86&&_0x588c86['addEventListener']('click',()=>{const _0x662da5=_0x3b741d,_0x22bdaf=document[_0x662da5(0x51d)](_0x662da5(0x1ab));_0x22bdaf&&('nvkik'===_0x662da5(0x1c2)?(_0x22bdaf[_0x662da5(0xa19)][_0x662da5(0xab0)](_0x662da5(0x5be)),_0x22bdaf['style'][_0x662da5(0x424)]='',_0x22bdaf[_0x662da5(0x1e2)][_0x662da5(0x48e)]=''):(_0x324b9f='0x'+_0x3e05f9[0x1]+_0x34f093[0x2],_0x31e9ad='0x'+_0x240db9[0x3]+_0x35324a[0x4],_0x43ac66='0x'+_0x596c83[0x5]+_0x4dc8bc[0x6]));}),_0x1b22eb();});async function _0x3fa0dc(){const _0x39283f=_0x1ad1ef;console[_0x39283f(0x68b)](_0x39283f(0xb28)),console[_0x39283f(0x68b)](_0x39283f(0xa40));async function _0x38084e(_0x2b085d,_0xded091){const _0x3ea5d2=await _0x5e955c;return new Promise((_0x4406bc,_0x162bfe)=>{const _0x4bb914=_0x53d2;if(_0x4bb914(0x520)==='epojJ'){const _0xeea048=_0x3ea5d2[_0x4bb914(0x170)](_0x462025,'readwrite'),_0x12b5f7=_0xeea048[_0x4bb914(0x327)](_0x462025),_0x56e528=_0x12b5f7[_0x4bb914(0x3f8)]({'id':_0x2b085d,'blob':_0xded091});_0x56e528[_0x4bb914(0x487)]=()=>_0x4406bc(_0x56e528[_0x4bb914(0x668)]),_0x56e528[_0x4bb914(0x122)]=()=>_0x162bfe(_0x56e528[_0x4bb914(0xb1e)]);}else _0x85b7b9=_0x90f698[0x1];});}async function _0x2855d0(_0x425d5b){const _0x318a67=await _0x5e955c;return new Promise((_0x9da6db,_0x599713)=>{const _0x29b364=_0x53d2,_0x2f90c7=_0x318a67[_0x29b364(0x170)](_0x4d2e4a,_0x29b364(0x366)),_0x2c93a8=_0x2f90c7[_0x29b364(0x327)](_0x4d2e4a),_0x2cc23f=_0x2c93a8[_0x29b364(0x1f8)](_0x425d5b);_0x2cc23f[_0x29b364(0x487)]=()=>_0x9da6db(_0x2cc23f[_0x29b364(0x668)]?_0x2cc23f['result'][_0x29b364(0xade)]:null),_0x2cc23f[_0x29b364(0x122)]=()=>_0x599713(_0x2cc23f[_0x29b364(0xb1e)]);});}async function _0x2a78b1(_0x312b46,_0x7aff7b){const _0x31cd22=await _0x5e955c;return new Promise((_0xbf1acf,_0x20ad5c)=>{const _0x259cae=_0x53d2;if(_0x259cae(0x50f)!==_0x259cae(0x50f)){const _0x1169d7=_0x4085b0[_0x259cae(0x2bd)][_0x1c442b];_0x1169d7&&_0x1169d7[_0x259cae(0xc1f)]>0x0&&(_0xf9245c=_0x1169d7['at'](-0x1));}else{const _0x13828d=_0x31cd22[_0x259cae(0x170)](_0x4d2e4a,_0x259cae(0x96c)),_0x24628b=_0x13828d[_0x259cae(0x327)](_0x4d2e4a),_0x4d8ab9=_0x24628b[_0x259cae(0x3f8)]({'id':_0x312b46,'data':_0x7aff7b});_0x4d8ab9[_0x259cae(0x487)]=()=>_0xbf1acf(),_0x4d8ab9[_0x259cae(0x122)]=()=>_0x20ad5c(_0x4d8ab9[_0x259cae(0xb1e)]);}});}function _0x597647(_0x553fb1){const _0x1f4cb7=_0x39283f;if(_0x1f4cb7(0xc90)===_0x1f4cb7(0xc90))return fetch(_0x553fb1)[_0x1f4cb7(0x842)](_0x553ea9=>_0x553ea9['blob']());else _0x2eef58[_0x1f4cb7(0x9d5)]=null;}let _0x2b7a0c=0x0;for(let _0x303d15=0x0;_0x303d15<localStorage[_0x39283f(0xc1f)];_0x303d15++){if('ScMCJ'===_0x39283f(0x30f)){const _0x11d92f=_0x5b368d[_0x39283f(0x606)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x39283f(0x33b),_0x2ceb5e=(_0x32982e[_0x39283f(0x606)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x39283f(0x2bf)]('\x0a')[_0x39283f(0x257)](_0x21b859=>_0x21b859[_0x39283f(0xad4)]())[_0x39283f(0x78c)](_0x2cb154=>_0x2cb154[_0x39283f(0xca0)]('-'))[_0x39283f(0x4db)]('\x20');return _0x39283f(0xaf4)+(_0x2186e2+0x1)+'\x20场直播的主题是“'+_0x11d92f+_0x39283f(0xbfc)+_0x2ceb5e;}else{const _0x45983a=localStorage[_0x39283f(0xc7f)](_0x303d15);if(_0x45983a&&_0x45983a[_0x39283f(0xca0)]('chatHistory_')){if(_0x39283f(0x271)===_0x39283f(0xd00))_0x2f2fd7=_0x3be8a1(_0x50927e);else{let _0x14bd97,_0x296fc3=![];try{_0x14bd97=JSON['parse'](localStorage[_0x39283f(0x760)](_0x45983a));if(!Array[_0x39283f(0x8e1)](_0x14bd97))continue;for(const _0x3ed8ff of _0x14bd97){if(_0x3ed8ff&&_0x3ed8ff[_0x39283f(0x55b)]&&_0x3ed8ff[_0x39283f(0x55b)][_0x39283f(0xca0)](_0x39283f(0x8be))){if(_0x39283f(0x2d2)!=='Pseat'){const _0x407e29=_0xa58660[_0x39283f(0x23f)]('p');_0x407e29['textContent']=_0x4dc1b1,_0x407e29[_0x39283f(0x1e2)][_0x39283f(0x36d)]=_0x39283f(0x198),_0x55103f['appendChild'](_0x407e29);}else{const _0x5193d7=await _0x597647(_0x3ed8ff['image']),_0x55b063='chat_image_migrated_'+Date[_0x39283f(0x63d)]()+'_'+Math[_0x39283f(0x754)]();await _0x38084e(_0x55b063,_0x5193d7),_0x3ed8ff[_0x39283f(0x7c2)]=_0x55b063,delete _0x3ed8ff[_0x39283f(0x55b)],_0x296fc3=!![],_0x2b7a0c++;}}}_0x296fc3&&localStorage[_0x39283f(0xa1c)](_0x45983a,JSON[_0x39283f(0x427)](_0x14bd97));}catch(_0x199589){if(_0x39283f(0x1bd)===_0x39283f(0x1bd)){console[_0x39283f(0xb1e)](_0x39283f(0xad9)+_0x45983a+_0x39283f(0x9da),_0x199589);continue;}else{const _0x29a716=_0x36cac3(_0x35a36a['id']),_0x5a7389=_0x29a716[_0x39283f(0xc1f)]>0x0?_0x29a716[_0x29a716[_0x39283f(0xc1f)]-0x1]:null;return{'chat':_0x52d777,'history':_0x29a716,'lastTimestamp':_0x5a7389?_0x5a7389[_0x39283f(0x11f)]:0x0};}}}}}}console[_0x39283f(0x68b)](_0x39283f(0xb74)+_0x2b7a0c+_0x39283f(0x56e));}async function _0x54ff63(){const _0xaae62a=_0x1ad1ef;console[_0xaae62a(0x68b)](_0xaae62a(0xbb0)),console[_0xaae62a(0x68b)](_0xaae62a(0x853));async function _0x169bcd(_0x495d38,_0x23211d){const _0x50c1ba=_0xaae62a;if(_0x50c1ba(0x24a)===_0x50c1ba(0x24a)){const _0x4a5212=await _0x5e955c;return new Promise((_0x39ce27,_0x275077)=>{const _0x2e2658=_0x50c1ba,_0x1cc2c7=_0x4a5212[_0x2e2658(0x170)](_0x2e2658(0x95f),_0x2e2658(0x96c)),_0x124fd6=_0x1cc2c7[_0x2e2658(0x327)](_0x2e2658(0x95f)),_0x3211f5=_0x124fd6['put']({'id':_0x495d38,'blob':_0x23211d});_0x3211f5[_0x2e2658(0x487)]=()=>_0x39ce27(_0x3211f5[_0x2e2658(0x668)]),_0x3211f5[_0x2e2658(0x122)]=()=>_0x275077(_0x3211f5[_0x2e2658(0xb1e)]);});}else _0x5bc099['revokeObjectURL'](_0x1dd9f1);}function _0x39309a(_0xf148e8){const _0xc7a4d6=_0xaae62a;if('GsOfS'===_0xc7a4d6(0x7e6))return fetch(_0xf148e8)[_0xc7a4d6(0x842)](_0x2e9107=>_0x2e9107[_0xc7a4d6(0x543)]());else{const _0x295169=_0x139c15[_0xc7a4d6(0x51d)](_0xc7a4d6(0x9d2));if(!_0x295169)return;_0x295169[_0xc7a4d6(0xaf0)]=_0x298bd8[_0xc7a4d6(0xc9f)][_0xc7a4d6(0x753)]||![],_0x295169[_0xc7a4d6(0xbc8)]('change',()=>{const _0x39767e=_0xc7a4d6;_0x68b598[_0x39767e(0xc9f)]['forceWhiteClock']=_0x295169['checked'],_0x282341(),_0x53826b();});}}let _0x116b27=0x0,_0x5cae14=![];try{if(_0xaae62a(0x980)!==_0xaae62a(0x980))_0x2c37b8[_0xaae62a(0x320)]&&_0x5e70f3['currentAbortController']['signal']===_0x3529fa&&(_0x6696c7[_0xaae62a(0x320)]=null);else{const _0x2bc5ed=localStorage[_0xaae62a(0x760)](_0xaae62a(0x59f));if(!_0x2bc5ed){console['log'](_0xaae62a(0x1a8));return;}const _0x4ead43=JSON['parse'](_0x2bc5ed);if(!_0x4ead43[_0xaae62a(0x882)]||!Array['isArray'](_0x4ead43['friendCircles']))return;for(const _0x236d90 of _0x4ead43[_0xaae62a(0x882)]){if(_0x236d90[_0xaae62a(0x840)]&&Array[_0xaae62a(0x8e1)](_0x236d90[_0xaae62a(0x840)]))for(const _0x145057 of _0x236d90[_0xaae62a(0x840)]){if(_0xaae62a(0x37f)!=='WlJcJ')_0x5397e0=new _0x1eb0a5(_0x316342[_0xaae62a(0x5de)][_0xaae62a(0x329)](null,_0xe25216)),_0x4932a6=_0x186b3e['toLocaleString'](_0xaae62a(0xbd4),{'dateStyle':_0xaae62a(0x5c5),'timeStyle':_0xaae62a(0x90a)});else{if(_0x145057&&_0x145057[_0xaae62a(0x55b)]&&_0x145057[_0xaae62a(0x55b)][_0xaae62a(0xca0)](_0xaae62a(0x8be))){if(_0xaae62a(0x9ee)===_0xaae62a(0x9ee)){console['log'](_0xaae62a(0x776)+_0x236d90[_0xaae62a(0x41a)]+_0xaae62a(0x239));const _0x7b540c=await _0x39309a(_0x145057[_0xaae62a(0x55b)]),_0x1f0a97=_0xaae62a(0x6a3)+Date[_0xaae62a(0x63d)]()+'_'+Math['random']();await _0x169bcd(_0x1f0a97,_0x7b540c),_0x145057[_0xaae62a(0x7c2)]=_0x1f0a97,delete _0x145057[_0xaae62a(0x55b)],_0x5cae14=!![],_0x116b27++;}else{_0x345ca5('名字不能为空！');return;}}}}}_0x5cae14&&(console[_0xaae62a(0x68b)](_0xaae62a(0x8e9)),localStorage[_0xaae62a(0xa1c)](_0xaae62a(0x59f),JSON[_0xaae62a(0x427)](_0x4ead43)));}}catch(_0x415d3a){console[_0xaae62a(0xb1e)](_0xaae62a(0x19c),_0x415d3a);}return console[_0xaae62a(0x68b)](_0xaae62a(0x9c5)),console[_0xaae62a(0x68b)]('成功净化并迁移了\x20'+_0x116b27+_0xaae62a(0x920)),_0x116b27;}async function _0x2c7a98(){const _0x3367af=_0x1ad1ef;console[_0x3367af(0x68b)](_0x3367af(0x233)),console[_0x3367af(0x68b)](_0x3367af(0x5c3));let _0x58d1da=0x0,_0x5a39cc=![];try{if(_0x3367af(0x417)!==_0x3367af(0xa95)){const _0x1b2ad7=localStorage['getItem']('appState');if(!_0x1b2ad7){if(_0x3367af(0x4a7)===_0x3367af(0x586)){_0x11c4f6[_0x3367af(0x4d5)]=_0x3367af(0xbc5);return;}else return console['log'](_0x3367af(0x1da)),0x0;}for(let _0x8483fd=0x0;_0x8483fd<localStorage[_0x3367af(0xc1f)];_0x8483fd++){const _0x201c07=localStorage[_0x3367af(0xc7f)](_0x8483fd);if(_0x201c07&&_0x201c07['startsWith'](_0x3367af(0x74f))){if(_0x3367af(0x67f)!=='TrPBt'){const _0x2772fc=_0xfd94f4[_0x3367af(0x51d)]('editing-user-id')[_0x3367af(0x90f)];_0x2772fc&&(_0x14eb1b[_0x3367af(0x3fc)]=_0x2772fc,_0x4c8874(),_0x39acce(_0x3367af(0x63b)),_0x7c1ab(),_0x1637cf['getElementById']('set-active-user-button')['style'][_0x3367af(0x930)]=_0x3367af(0x2f6));}else{let _0x139fb5,_0x158dd1=![];try{_0x139fb5=JSON[_0x3367af(0x576)](localStorage['getItem'](_0x201c07));if(!Array[_0x3367af(0x8e1)](_0x139fb5))continue;for(const _0x1bcac2 of _0x139fb5){if('gUlbM'!=='ypFHh'){if(_0x1bcac2&&(_0x1bcac2[_0x3367af(0x711)]===_0x3367af(0x64e)||_0x1bcac2['type']===_0x3367af(0x3e9))&&_0x1bcac2['coverUrl']&&_0x1bcac2['coverUrl'][_0x3367af(0xca0)]('data:image')){const _0x3d3098=await _0xe092cf(_0x1bcac2[_0x3367af(0x372)]),_0x313c6f=_0x3367af(0x866)+Date['now']()+'_'+Math[_0x3367af(0x754)]();await _0x567110(_0x313c6f,_0x3d3098),_0x1bcac2['coverId']=_0x313c6f,delete _0x1bcac2[_0x3367af(0x372)],_0x158dd1=!![],_0x58d1da++;}}else _0x4c6d2a();}if(_0x158dd1){if('KRyRH'===_0x3367af(0x64d))localStorage['setItem'](_0x201c07,JSON[_0x3367af(0x427)](_0x139fb5));else{if(_0x9144ce[_0x3367af(0xcd4)]===_0x3367af(0x8ed))return _0x2c2e32[_0x3367af(0x4b9)]?.['name']||_0x3367af(0x48a);if(_0xfb4968['type']===_0x3367af(0x91b)){const _0x14306=_0x30ff87[_0x3367af(0x2fb)]?_0x53643d(_0xbbbfc['senderId']):null;return _0x14306?.[_0x3367af(0x41a)]||_0x3367af(0x3fa);}else{const _0x5a799d=_0x32fc39(_0x5beeae[_0x3367af(0x184)][0x0]);return _0x5a799d?.['name']||'AI';}}}}catch(_0x465a08){console[_0x3367af(0xb1e)](_0x3367af(0xad9)+_0x201c07+_0x3367af(0x49f),_0x465a08);continue;}}}}}else{const _0x328bf5=_0x5f06e9[_0x3367af(0x51d)]('ui-scale-slider'),_0x15cb41=_0xa44587[_0x3367af(0x713)],_0x18dd73=_0x1a27b8[_0x3367af(0x51d)](_0x3367af(0x322));if(!_0x328bf5||!_0x18dd73)return;const _0x4a2c87=_0x53cf97['getItem'](_0x3367af(0x99c))||'1';_0x15cb41[_0x3367af(0x1e2)][_0x3367af(0xcac)](_0x3367af(0xd10),_0x4a2c87),_0x328bf5['value']=_0x4a2c87,_0x328bf5[_0x3367af(0xbc8)]('input',()=>{const _0x378898=_0x3367af,_0x65cab2=_0x328bf5[_0x378898(0x90f)];_0x15cb41['style'][_0x378898(0xcac)](_0x378898(0xd10),_0x65cab2),_0x2e76a4[_0x378898(0xa1c)](_0x378898(0x99c),_0x65cab2);}),_0x18dd73[_0x3367af(0xbc8)]('click',()=>{const _0x16c87c=_0x3367af,_0x4886a0='1';_0x328bf5[_0x16c87c(0x90f)]=_0x4886a0,_0x15cb41[_0x16c87c(0x1e2)]['setProperty'](_0x16c87c(0xd10),_0x4886a0),_0x5b712f[_0x16c87c(0xa1c)](_0x16c87c(0x99c),_0x4886a0);});}}catch(_0x20668b){console[_0x3367af(0xb1e)]('净化音乐封面时出错，真是的。',_0x20668b);}return console[_0x3367af(0x68b)](_0x3367af(0xc1d)),console['log'](_0x3367af(0xa46)+_0x58d1da+_0x3367af(0x97a)),_0x58d1da;}async function _0x1df16c(){const _0x5368a1=_0x1ad1ef;console[_0x5368a1(0x68b)](_0x5368a1(0xb95)),console['log']('正在检查是否有需要救援的旧头像...');let _0xc1a842=0x0;try{if(_0x5368a1(0x669)===_0x5368a1(0x77b)){_0x5e531f(_0x5368a1(0x847));return;}else{const _0x56243a=localStorage[_0x5368a1(0x760)](_0x5368a1(0x59f));if(!_0x56243a)return console[_0x5368a1(0x68b)]('找不到旧的存档，无需救援。'),0x0;const _0x4a3518=JSON['parse'](_0x56243a);if(!_0x4a3518[_0x5368a1(0x24d)]||!Array[_0x5368a1(0x8e1)](_0x4a3518['characters'])){if(_0x5368a1(0x267)!=='RvaoV')_0x4956a3[_0x5368a1(0x22c)](),_0x3a34ec['clipboard'][_0x5368a1(0x3d4)](_0x3cd0ed[_0x5368a1(0x90f)])[_0x5368a1(0x842)](()=>{const _0x287322=_0x5368a1;_0x46c92c(_0x287322(0x77f));})['catch'](_0x46b045=>{const _0x2ece0a=_0x5368a1;_0x116fde(_0x2ece0a(0x379));});else return 0x0;}for(const _0x589b73 of _0x4a3518['characters']){if(_0x589b73&&_0x589b73[_0x5368a1(0x5ec)]&&_0x589b73[_0x5368a1(0x5ec)][_0x5368a1(0xca0)](_0x5368a1(0x8be))){if(_0x5368a1(0x813)!==_0x5368a1(0x7d1)){const _0x4dbd49=await _0x54e221(_0x5368a1(0x395)+_0x589b73['id']);if(!_0x4dbd49){if(_0x5368a1(0x275)!=='HMCUV'){console['log'](_0x5368a1(0x415)+_0x589b73[_0x5368a1(0x41a)]+_0x5368a1(0x52e));const _0x59e67b=await _0xe092cf(_0x589b73[_0x5368a1(0x5ec)]);await _0x567110(_0x5368a1(0x395)+_0x589b73['id'],_0x59e67b),_0xc1a842++;}else _0x26ff47[_0x5368a1(0xbc8)](_0x5368a1(0x9a6),_0x2130f5),_0x1fab31['addEventListener']('mouseup',_0x289a9a);}}else _0x35eb04[_0x5368a1(0xa19)]['remove'](_0x5368a1(0x6db)),_0xc73f67[_0x5368a1(0x50e)]=null,_0x2be96c[_0x5368a1(0x50e)]=null,_0xfc5750[_0x5368a1(0x50e)]=null,_0x5246d1['removeEventListener'](_0x5368a1(0x830),_0x3afd72),_0x4e5203(_0x3d438a);}}}}catch(_0x43bb57){console[_0x5368a1(0xb1e)](_0x5368a1(0xba9),_0x43bb57);}return console[_0x5368a1(0x68b)](_0x5368a1(0x93b)),console[_0x5368a1(0x68b)]('成功救援并备份了\x20'+_0xc1a842+_0x5368a1(0x2a5)),_0xc1a842;}function _0x14b9b9(){const _0x14d1df=_0x1ad1ef;if(!_0x543bea['activeDiaryCharacterId']){if(_0x14d1df(0x5df)!==_0x14d1df(0x563))return _0x543bea[_0x14d1df(0x7e7)]['find'](_0x1f8056=>_0x1f8056['id']===_0x543bea[_0x14d1df(0x3fc)])||_0x543bea[_0x14d1df(0x7e7)][0x0];else _0x37f973[_0x14d1df(0x32a)]='❚❚';}const _0x7f6925=_0x543bea['chats'][_0x14d1df(0xbe8)](_0x19d3c9=>_0x19d3c9[_0x14d1df(0x711)]===_0x14d1df(0x5fc)&&_0x19d3c9['participantIds'][_0x14d1df(0x32d)](_0x543bea[_0x14d1df(0xbaa)])),_0x287a2c=_0x7f6925?.['boundUserProfileId']||_0x543bea[_0x14d1df(0x3fc)];return _0x543bea[_0x14d1df(0x7e7)][_0x14d1df(0xbe8)](_0x69e683=>_0x69e683['id']===_0x287a2c)||_0x543bea[_0x14d1df(0x7e7)][0x0];}function _0x1eac91(_0x1c54da){const _0x2f19fb=_0x1ad1ef,_0x1224ee=new Date(),_0x5f1075=_0x1224ee-_0x1c54da,_0x676c9=Math[_0x2f19fb(0xcfd)](_0x5f1075/0x3e8),_0x26354c=Math['round'](_0x676c9/0x3c),_0x2a8177=Math[_0x2f19fb(0xcfd)](_0x26354c/0x3c),_0x31ffaf=Math['round'](_0x2a8177/0x18),_0x5ad1b9=_0x1c54da[_0x2f19fb(0x864)](_0x2f19fb(0xbd4),{'hour':_0x2f19fb(0x145),'minute':_0x2f19fb(0x145)});if(_0x676c9<0x3c){if(_0x2f19fb(0x220)!==_0x2f19fb(0x682))return'刚才';else{const _0x3c64fa=_0x4d2abf['value'][_0x2f19fb(0xad4)]();if(!_0x3c64fa){_0x1a2551(_0x2f19fb(0x482));return;}const _0x437392=_0x2a38ff['from'](_0xeac37['querySelectorAll'](_0x2f19fb(0x9df)))[_0x2f19fb(0x257)](_0x3e5647=>_0x3e5647[_0x2f19fb(0xa24)]['id']);if(_0x437392[_0x2f19fb(0xc1f)]<0x2){_0x5763e7('群聊至少需要2名成员。');return;}const _0x356c09={'id':_0x2f19fb(0xbb6)+_0x434540['now'](),'type':'group','name':_0x3c64fa,'participantIds':_0x437392};_0x436b1[_0x2f19fb(0x94b)]['push'](_0x356c09),_0x130413[_0x2f19fb(0x886)]=_0x356c09['id'],_0x3919f3(),_0x2d08cc(),_0x14a683(),_0x3647fa(),_0xc377e7(_0x2f19fb(0x8ca)+_0x3c64fa+_0x2f19fb(0xca9)),_0x261ba1(_0x2f19fb(0x69f),_0x2f19fb(0x2fd));}}if(_0x26354c<0x3c){if(_0x2f19fb(0x9ac)!==_0x2f19fb(0x9ac))_0x3a4fe6[_0x2f19fb(0x51d)](_0x2f19fb(0xcdf))[_0x2f19fb(0x32a)]='为\x20'+_0x474e4b+_0x2f19fb(0x76a),_0x13706c[_0x2f19fb(0x51d)](_0x2f19fb(0x91c))[_0x2f19fb(0x90f)]='',_0x1bf0b8[_0x2f19fb(0x51d)](_0x2f19fb(0x4e2))[_0x2f19fb(0xaf0)]=!![],_0x2d11a4[_0x2f19fb(0x51d)](_0x2f19fb(0x1c9))['classList'][_0x2f19fb(0x25d)]('show'),_0x1da380['getElementById'](_0x2f19fb(0x91c))[_0x2f19fb(0x72b)]();else return _0x26354c+_0x2f19fb(0xd36);}const _0x47905b=_0x1224ee['toDateString']()===_0x1c54da['toDateString']();if(_0x47905b){if(_0x2f19fb(0x977)===_0x2f19fb(0x977))return'今天\x20'+_0x5ad1b9;else{_0x48f20a('真是的，必需的祭品都还没准备好！');return;}}const _0x1cea8b=new Date();_0x1cea8b[_0x2f19fb(0x8e2)](_0x1224ee['getDate']()-0x1);const _0x18cb0b=_0x1cea8b[_0x2f19fb(0xb12)]()===_0x1c54da['toDateString']();if(_0x18cb0b)return _0x2f19fb(0x6ee)+_0x5ad1b9;if(_0x31ffaf<=0x7){const _0x1d904f=['星期日',_0x2f19fb(0xb9f),_0x2f19fb(0x66b),_0x2f19fb(0x182),'星期四',_0x2f19fb(0xb19),_0x2f19fb(0x8a9)];return _0x1d904f[_0x1c54da[_0x2f19fb(0x848)]()]+'\x20'+_0x5ad1b9;}return _0x1c54da[_0x2f19fb(0x5f6)]()+'年'+(_0x1c54da['getMonth']()+0x1)+'月'+_0x1c54da[_0x2f19fb(0x3d6)]()+'日';}function _0x13bce5(_0x53c994,_0x5b85f5=0x320,_0x5d3c88=0.8,_0x5697bd=![]){return new Promise((_0x29dca9,_0x298728)=>{const _0x477fa1=_0x53d2;if(!_0x53c994||!_0x53c994[_0x477fa1(0x711)][_0x477fa1(0xca0)](_0x477fa1(0x2c6)))return _0x298728(new Error(_0x477fa1(0x486)));const _0x565079=new FileReader();_0x565079['readAsDataURL'](_0x53c994),_0x565079[_0x477fa1(0x14a)]=_0x5511f0=>{const _0x2a6f28=_0x477fa1,_0x1dae00=new Image();_0x1dae00[_0x2a6f28(0x2d9)]=_0x5511f0[_0x2a6f28(0x446)][_0x2a6f28(0x668)],_0x1dae00[_0x2a6f28(0x14a)]=()=>{const _0x48030e=_0x2a6f28,_0x23dc5e=document['createElement'](_0x48030e(0xd52));let _0x1fe5da=_0x1dae00[_0x48030e(0x34a)],_0x12ca99=_0x1dae00[_0x48030e(0x135)];if(_0x1fe5da>_0x12ca99)_0x1fe5da>_0x5b85f5&&(_0x12ca99*=_0x5b85f5/_0x1fe5da,_0x1fe5da=_0x5b85f5);else{if(_0x48030e(0x9f8)===_0x48030e(0xa1a))_0x4a68ac[_0x48030e(0x1d2)][_0x48030e(0xb47)](..._0x3bb9df[_0x48030e(0xb9e)]);else{if(_0x12ca99>_0x5b85f5){if(_0x48030e(0x25f)===_0x48030e(0x25f))_0x1fe5da*=_0x5b85f5/_0x12ca99,_0x12ca99=_0x5b85f5;else{const _0x2d5090=_0xf3abc['userProfiles'][_0x48030e(0xbe8)](_0x554709=>_0x554709['id']===_0x41571f);if(_0x2d5090)_0x233e9f[_0x48030e(0xa48)](_0x2d5090,_0x5290fa);}}}}_0x23dc5e['width']=_0x1fe5da,_0x23dc5e['height']=_0x12ca99;const _0x3105cf=_0x23dc5e['getContext']('2d');_0x3105cf[_0x48030e(0x8c6)](_0x1dae00,0x0,0x0,_0x1fe5da,_0x12ca99);const _0x1cfdca=_0x53c994['type']===_0x48030e(0x512)?'image/png':_0x48030e(0x476);_0x5697bd?_0x23dc5e[_0x48030e(0x532)](_0x4efe4d=>{const _0x227947=_0x48030e;if(_0x4efe4d){if(_0x227947(0x20a)==='LxKSg'){const _0x24c0a3=_0x2e8345[_0x227947(0x51d)]('meeting-list-container');_0x24c0a3[_0x227947(0x4d5)]='';const _0x2a366c=_0x3eb98c['characters'][_0x227947(0x78c)](_0x5e2a81=>_0x171a5c[_0x227947(0x94b)][_0x227947(0x66a)](_0x53a426=>_0x53a426[_0x227947(0x711)]==='private'&&_0x53a426[_0x227947(0x184)][_0x227947(0x32d)](_0x5e2a81['id'])));if(_0x2a366c[_0x227947(0xc1f)]===0x0){_0x24c0a3[_0x227947(0x4d5)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>';return;}_0x2a366c[_0x227947(0xb36)](_0x557da9=>{const _0x1a5aa0=_0x227947,_0x4f3c09=_0x3f1c40[_0x1a5aa0(0x23f)]('li');_0x4f3c09[_0x1a5aa0(0xa9d)]=_0x1a5aa0(0x9eb),_0x4f3c09['dataset'][_0x1a5aa0(0x37d)]=_0x557da9['id'],_0x4f3c09[_0x1a5aa0(0x4d5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x557da9[_0x1a5aa0(0x5ec)]||_0x11c260)+_0x1a5aa0(0x557)+_0x557da9[_0x1a5aa0(0x41a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>'+(_0x557da9['remark']||'私聊')+_0x1a5aa0(0x517),_0x4f3c09[_0x1a5aa0(0xbc8)](_0x1a5aa0(0x779),()=>{_0xb5cccf(_0x557da9['id']);}),_0x24c0a3[_0x1a5aa0(0x83b)](_0x4f3c09);});}else _0x29dca9(_0x4efe4d);}else{if(_0x227947(0x4d6)===_0x227947(0x7d7))return;else _0x298728(new Error(_0x227947(0xcd2)));}},_0x1cfdca,_0x5d3c88):_0x48030e(0x8fc)!==_0x48030e(0x49a)?_0x29dca9(_0x23dc5e['toDataURL'](_0x1cfdca,_0x5d3c88)):_0x334e25=_0x48030e(0x28d)+_0x2e3295+'\x22>'+_0x3f88e2+_0x48030e(0x84f);},_0x1dae00[_0x2a6f28(0x122)]=_0x481a2d=>_0x298728(_0x481a2d);},_0x565079[_0x477fa1(0x122)]=_0x5965a7=>_0x298728(_0x5965a7);});}function _0xa161cf(_0x3a3117){return new Promise((_0x3b9691,_0x1f2e53)=>{const _0x6dd5d7=_0x53d2;if('BbGUM'!==_0x6dd5d7(0x8cb))_0x4eea85();else{const _0x5434b3=new FileReader();_0x5434b3[_0x6dd5d7(0xa30)]=()=>_0x3b9691(_0x5434b3['result']),_0x5434b3['onerror']=_0x1f2e53,_0x5434b3[_0x6dd5d7(0x6f9)](_0x3a3117);}});}function _0xa161cf(_0x27cd02){return new Promise((_0x370455,_0x4d7b19)=>{const _0x4c166b=_0x53d2,_0xf065b3=new FileReader();_0xf065b3[_0x4c166b(0xa30)]=()=>_0x370455(_0xf065b3['result']),_0xf065b3['onerror']=_0x4d7b19,_0xf065b3[_0x4c166b(0x6f9)](_0x27cd02);});}function _0xf6e1(){const _0xb28c6f=['#bubble-preview-user','card-widget-2','diary-send-button','diary-entry\x20','find','gMKIM','edit-message-backdrop','eJVec','lrbiB','avatar-frame','gzZoi','api-key','indexOf','</span>:\x20','provider','form-button\x20load-more-btn','cWolx','close-summary-button','gXiYi','modal-mask','gwDXU','</label>\x0a\x20\x20\x20\x20','p[data-history-index]','dODyZ','”，期间发生了：','\x0a#\x20时间锚点(你必须严格参考此信息进行推演)\x20\x0a','切，加载播放器状态的时候出错了。','2346zDlHSn','找不到要清空的聊天记录。','\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20','bites','isFromLibrary','</svg>','\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>','\x0a\x0a#\x20你的手机内容摘要(这是你的个人记忆，不要提及“视奸”)\x20\x0a','save-world-book-button','currentTarget','VfZQC','HJnzs','无语但是随便吧','kcRPx','无法解析旧的视奸内容来获取时间戳。','music-share-card','galgame-mode','Bearer\x20','Uojqy','好友圈\x20','LtWDj','正在为你搬运旧壁纸到新仓库...','200%','jcoRJ','iwqmu','<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>','galgame','开始直播失败:','[sticker:','DuxTS','---\x20音乐净化仪式完成\x20---','<img\x20id=\x22','length','hiwrd','UzzdS','的日记本','back-to-snoop-list-from-phone','summary','JVZQD','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>','modal-ok','生成直播总结失败:','chat-transfer-button','谁啊我吗','hQUwT','PsWVy','gvkje','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>','iiqBU','test_post_','chat-image-button','<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>','\x0a-\x20当前精确时间:\x20','加载\x20','我是垃圾','Failed\x20to\x20remove\x20history\x20for\x20chat\x20','https://sharkpan.xyz/f/35lse/xmsue5.jpg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20','insertBefore','\x0a#\x20关于你\x20(','\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','28%','正在为你切换新的歌曲...','gemini','getMonth','tolxS','解析失败了，笨蛋！\x20','\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>','iLURF','有点破防','rqsMT','galgame-textbox-container','15%',':streamGenerateContent?key=','linkedWorldBookIds','无法保存聊天记录。','model','TSUNp','nCZOF','opacity\x200.2s\x20ease-in-out','</div>','absolute','iaWOd','warn','RxGze','conversationHistory','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>','-\x20你的备忘录里有一条叫“','HaphS','findIndex','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','player-cover','新建条目','currentTime','0.5','translateX(-','decorative-badge','书记官正在奋笔疾书...','59%','span','euHec','至少要保留一个用户。','KgWsA','wbc_imported_','的补充信息\x0a','listen-together-card\x20no-action-modal','zIsHL','FqoUa','\x22\x20吗？所有聊天记录将被永久删除。','quoted-message-in-bubble','paused','-\x20**你们最后一次互动是在**:\x20','currentLivestreamSession','sKbwu','”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a','worldBookEditor','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>','.diary-delete-btn','-\x20**\x20你最后一次活动是在\x20**:\x20','galgame-date','listen-together-modal','yeHNS','<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>','QKUUo','confirm-start-livestream-button','thought','dYaiU','key','info','preview_','comments','UOIpU','https://sharkpan.xyz/f/Mamca/4e3emf.jpg','jGOsh','档案已复制到剪贴板！','nVYdE','Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.','AI整理失败了，哼:\x20','导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a','appIconPosition_app-settings','https://sharkpan.xyz/f/6Dzia/m9smvt.jpg','UFNCn','user-profile-list-container','player-artist','TLOlA','kUqfB','[AI向\x20','group-clear-history','YJZla','ZIsEz','\x0a#\x20你的个性（节选）\x0a','substring','vRCDY','字体应用失败:','.music-post-song-card,\x20.music-share-card','\x20//\x20<--\x20哼，加在这里\x0a','import-accounting-btn','livestreamReplayView','\x20\x20\x20\x20-\x20','preferences','startsWith','#\x20记录是空的，没什么好总结的。','</pre>\x0a\x20\x20\x20\x20\x20\x20</div>','delete','qYQXX','.todo-item,\x20.important-day-item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22','footprints','ukKCR','”已创建！','HXFpp','JKUzM','setProperty','vBzaV','main','15px','delete-message-button','dXpgP','createObjectURL','生成动态时发生错误:\x20','custom_font_ttf','application/json','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>','NMeJe','bMUvS','AijrK','”...','yFuAa','\x0a\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22snoop-home-clock\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','OrpTv','LuqxB','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','DwPqK','hidden','chatWallpaper','.listen-together-song','AI正在撰写直播总结...','livestream-sprite-slider-scale','center','sprite-slider-y','livestream-gift-btn','VBzFt','WZqNv','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20','\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','himTW','核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传','uWJHo','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>','uwzeL','Canvas\x20to\x20Blob\x20conversion\x20failed.','AYWAY','role','JSON解析失败，启动兼容模式...','esxHi','</span>','ITZPL','\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕','准备群聊API数据时，读取图片失败:','群名称已更改为\x22','错误:\x20','已选择\x20','noir_migration_fc_v1_complete','add-event-modal-title','.message.ai','我很脆弱','friend-circle-edit-title','[表情]','新角色\x20','生成动态失败:','JSruj','JQVUk','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>','的互动非常引人注目时（例如送出昂贵的礼物），才允许【少量】路人弹幕提及','\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a','”（即“我”，用户）来发布任何动态或评论。\x0a-\x20所有的动态发布者（authorId）和评论者（authorId）都【必须】从【好友圈成员信息】列表中提供的角色ID里选择。\x0a\x0a#\x20好友圈成员信息\x0a','XuuWA','re-record-button',')的私信互动摘要\x20(列表形式)\x0a\x0a#\x20输出示例\x20(直接输出YAML文本)\x0a\x0astart_time:\x20\x222025年10月9日\x20大约下午3点\x22\x0atheme:\x20\x22分享最近读的一本书\x22\x0astreamer_mood:\x20\x22','livestream-dm-send-btn','你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！','加载聊天失败:\x20','back-to-char-select-from-group-create','api-endpoint','\x20的私聊','back-to-home-from-music-library','uhUPz','noir_migration_music_v1_complete','\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>','》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a','.message-container','确定要删除群聊“','WLlUe','round','NJjPN','<div\x20class=\x22post-likes\x22>','sZiSA','mgGPU','确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20','\x22\x20class=\x22sticker-content\x22>','2023-06-01','xlESr','user-post-textarea','-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概','songName','DlrNW','”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。','margin','reset-badge-button','ylaHa','full','--desktop-item-scale','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','rDenG','\x20\x0a\x0a//\x20▼▼▼\x20在\x20continueLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色与直播信息\x20▼▼▼\x0a#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a-\x20**你的核心人设**:\x20','\x20to\x20','解析音乐文件失败:','FnQue','sin','TenWw','card-input','back-to-user-list-from-edit','LDKQv','请先输入\x20API\x20接口地址和密钥。','touches','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','isGenerating','AI返回的原始文本:','ceil','10px\x208px','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','signal','20%','QiaJD','分类\x20“','加载直播立绘失败:','sticker','isUser','feKOr','card-input-2','wtSbq','themeLightness','”的本次直播生成一份总结报告。\x0a\x0a','appIconPosition_app-wallpaper','YpEtz','edit-replay-backdrop','summarize-backdrop','<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20','aOnPx','分钟前','\x0a\x20\x20相关记忆:\x0a','DHscf','”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。','scrollTop','wbc_html_default_builtin','Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22message-container\x20','ARDYj','--\x20点击选择\x20--','bsGvJ','jjLCE','确定要从圣殿中永久删除《','OBtCr','flexDirection','diary-prev-button','jOhOS','normal,\x20happy,\x20angry,\x20sad,\x20shy','livestream-sprite-cancel-button','dnxWg','resolve','zTRce','?word=','prepend','一拳打爆','viewBox','cSmkt','bXVLk','canvas','widget-artist','KvNDw',']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“','altar-slot-zip','yNmiO','livestream-replays-container','nrgyM','\x0a\x0aINPUT:\x0a','user-avatar-input','description','user-persona','卡片\x202\x20已移除。','group-edit-name','<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','timestamp','在准备API数据时，从IndexedDB读取图片失败:','spnMy','onerror','char-avatar-frame-url','.diary-entry','insertAdjacentHTML','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>','diary-modal-save','xnyWC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x0a\x0a#\x20关于观众','diaries','musicPlayerState','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','哼，你这字体文件有问题，用不了。','setHours','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_','category','正在准备音乐数据...','world-book-editor-screen','.wb-entry-list','height','cancel','#99ff99','VSZuc','pendingPostAttachments','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的个人记忆\x20(来自所有App)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','SBDgh','qMQoH','请求AI更新:\x20','我来搞定','charSelect','被萌到','snoop-app-view-container','user-post-avatar','activity_description','editing-friend-circle-id','2-digit','nyHwE','group-settings-bind-user','clientX','ylfTg','onload','10px\x20auto','导出过程中发生严重错误:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_','bCgWd','</div\x20>\x20','”买过：“','qFfzX','play','\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27','未命名','lJwdI','closest','diary-page-','ijsIa','endsWith','altar-slot-info','gCiHE','\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1','livestream-danmaku-overlay','Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.','mjmsU','sprite-slider-scale','quote-preview-text','主播情绪','add-expense-button','VdeBD','WgNMK','fJMZT','is-visible','wnzHB','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-music-input','char-edit-avatar-preview','boundUserProfileId','friendCircleList','world-book-editor-title','ZUhWU','transaction','-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a','avatarFrameUrl','保存角色失败:','XXTcv','Kwbjq','konuO','”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。','displayedMessageCount','哼，不好好写清楚花在哪、花了多少，我怎么记？','confirm-transfer-button','咱俩天下第一好','snoop-app-refresh-btn','KIWHd','#app-dock-bottom-left\x20#','ByeKy','https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg','ilNwT','星期三','download','participantIds','PyeSh','fHSVH','emoji','snoopList','yTeUv','”已删除。','快点哄我','#group-settings-screen\x20.select-box','\x0a\x0a#\x20关于读者“','undefined','NoirCustomFont','yEMBz','cover-file-input','gaxfg','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-','https://sharkpan.xyz/f/ljNUx/aw6udx.jpg','ShOqH','toLowerCase','awDJr','1.6','正在构思中，请稍候...','-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a','borderBottom','净化好友圈时出错，真是的。','-preview','NGEhp','你还没保存这个角色呢，导什么导？','scrollIntoView','超激动我来了','currentLivestreamDMs','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','新用户\x20','danmaku-item','ODSSi','group-bg-preview','好友圈档案柜是空的，无需净化。','\x20[并分享了歌曲:\x20','YMpFR','lock-screen-overlay','lt-ui-lyrics-container','set-active-user-button','currentLivestreamUserActions','PlBND','NwTlV','transfer-amount-input','fqyYK','<style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20','--widget-cover-image','app-pages-container','whwXv','Failed\x20to\x20save\x20history\x20to\x20localStorage:','8LIgWiQ','_NoirCard.json','kvQba','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+','shift','NMlNM','”吗？此操作不可撤销。','MOUnZ','backgroundPosition','html','nvkik','badge-input','好友圈已删除。','刷我的卡','Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:','hjpVV','filled','add-event-modal','ahZwm','DRzir','Noir_Accounting_Backup_','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>','<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>','cost','char-edit-bind-user','KwWyz','accountingData','getAll','typing-indicator\x20narrator','条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20','ykuJr','#member-select-','historyIndex','</div>\x0a\x20\x20\x20\x20\x20\x20</div>','聊天档案柜是空的，无需净化。','checkbox','import-char-input','<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>','quote-preview-area','vHiVv','#snoop-app-view-container\x20.snoop-app-header','条目名称和内容都不能为空！','style','.typing-indicator','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20','NmGQI','global-player-next-btn','alignItems',':</span>\x20<span\x20class=\x22danmaku-comment\x22>','IauYN','<div','NxFRW','<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>','ogCZe','viCLh','\x20//\x20<--\x20哼，还有这里！\x0a','cardState2','RYkKu','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-speaker-tag\x22>','直播主题和观众氛围都不能为空！','好的，我记住了这些人设和历史。现在我们开始对话。','<span>--</span><span\x20class=\x22unit\x22>天</span>','bottom','get','RimkB','MrcAv','KHLOc','replays-char-name-header','feed-loader','HPqFB','hIITk','user_','gRdNH','transform\x202s\x20ease-out,\x20opacity\x202s\x20ease-out','视奸内容解析失败:','modal-root','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22time\x22>','expanded','zKvKv','#66b3ff','nKCrt','wTeaL','music-widget','privateMessageReply','时空逆转成功！账本已恢复。','jozSD','quotedMessage','加载壁纸失败:','jzBOY','meeting-send-button','歌曲“','fTiki','active','你还没有写日记。','<div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20','fVVIn','SiOzv','contactName','HKmWq','calendarEvents','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>','add-choice-backdrop','（直播已暂停）','EWrBx','ZmlDR','path','llSoe','qLYpg','getSelection','livestreamReplays','fill','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>','星期日','livestream-list-screen','Failed\x20to\x20read\x20history\x20for\x20chat\x20','select','ODdsX','\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“','EcJLk','yFUBK','tAtyi','widget-title','---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---','char-edit-offline-bg-preview','OHoPH','-\x20**你与','tencent','QKjev','\x22\x20中发现一张需要净化的图片...','IYwMy','<img\x20src=\x22','RWFdS','\x20.app-icon-img,\x20#app-dock-top-right\x20#','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>','createElement','PSVaN','TWhJO','确定要删除这个好友圈吗？此操作不可撤销。','请在动态或聊天中播放','XTtki','动态页背景已移除。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“','PSDLe','currentSpeechIndex','jdaQB','#\x20核心任务:\x20继续直播并与观众互动\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a1.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“','fDQyZ','characters','music_library','乐于助人的助手','</pre\x20>\x20','群聊已解散。','world-book-category-list','app-music','NnDrz','\x0a\x20\x20\x20\x20姓名:\x20','正在解析备份文件...','map','loading','activeMeetingScriptQueue','ciQpk','music-library-screen','MmcPc','add','ujgwR','LQjUO','”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a','净化失败了，哼:\x20','...','zWwhd','对你极度信任，或者想问一些不方便在直播间公开说的事情。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20【绝对重要】：无视私信是对','sprite-reset-button','border-bottom:\x201px\x20solid\x20var(--border-color);','RvaoV','activeLivestreamCharId','休闲娱乐','CdFwG','ui-scale-slider','hcNDH','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>','\x0a\x0a#\x20关于群聊参与者“','number','music-post','Zpvko','确定要删除群聊\x22','YMLKB','保存失败，你的表情包是不是太多了？','CYPDu','oQVjl','gIido','splice','summary-textarea','\x0a-\x20“我”发送的弹幕:\x0a','清空聊天记录失败。','font-preview-text','is-today','”，但没找到人)','reverse','gWCRh','<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>','暗夜紫晶','\x22\x20已删除。','---\x20开始AI回复流程\x20---','.selected','好像有动态了...','rawResponse','Grvwm','duGNt','coverId','cancel-start-livestream-button','\x20条新动态。','<p\x20class=\x22narrator\x22\x20data-history-index=\x22','icvdn','cawav','fFlud','\x0a\x0a#\x20关于观众“我”(','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','UQeQs','包含所有图片和音乐的全量数据已成功导出！','34%','VySpU','content','qzyZV','ezuTt','<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>','start-livestream-btn-container','customIcon_','AI未能返回有效的JSON数组格式。','music-input-song','kBCgq','xifwC','rhjtn','QeaCa','https://sharkpan.xyz/f/wyeIq/phhdy2.jpg','music-widget-card','\x20个旧头像。','parentElement','beforeend','class','HDerU','TUSTU','kzgVl','back-to-home-from-snoop-list','LIcww','GxWNA','nKzMX','kSNKW','string','.lt-end-session-btn','copy-summary-button','start-livestream-btn','contextmenu','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','直播间设置已保存！','axIcl','吃你的饭','PIZFv','ooTdZ','jEgPQ','characterLastScripts','AeGHn','split','\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20本场直播信息\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20主题:\x20\x22','snoop-app-back-btn','hCQHm','theme-hue-slider','\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。','image/','错误：你还没有创建任何好友圈。请先在App内创建一个。','导入失败了，笨蛋:\x20','feed','https://sharkpan.xyz/f/DVJtK/vxiup1.jpg','错误：第一个好友圈\x20\x22','iTVmr','T00:00:00','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>','lyric-line-','生成动态回复失败:','Wuqda','Pseat','生活服务','livestream-bg-input','plUzm','启动头像恢复程序...','uLJOK','diary-action-modal-','src','\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>','cDnSz','”所有近期互动的自然延续。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你正在扮演名为“','qEnFJ','group-settings-screen','copy','diary-input-wrapper','fAxyS','委屈那我歇了','worldBooksCategories','back-to-home-from-circle-list','scale','[见面]','请基于以上设定，开始你的直播开场表演。','gridTemplateColumns','AlQoH','app-livestream','qTLGs','removeEventListener','editing-char-id','meeting-reroll-button','\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27','livestream-list-container','#diary-action-cancel','正在翻阅全部历史记录...','app-lock-screen','deletion-mode','净化完成！应用即将重启。','none','还没有我的回复可以重新生成哦。','json','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','xYLIy','senderId','https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg','groupChatCreate','yCoUD','你的任务是【首次生成】这个应用的内容。','richI','正在铭刻字体...','jAeNH','paddingBottom','AI似乎没有想出任何新动态。','IOmUV','关键事件','nRFgR','yRtVg','\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a','music-player-bar','expense-amount','获取模型失败:\x20','noir_migration_avatar_v1_complete','PhrIz','rpqor','EaDbi','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-content\x22>','xwjEu','动态已清空。','bXSnb','兼容模式成功，已将\x20','YPsXn','xzExr','ovatM','speaker','hgOlI','LXoeR','Error\x20fetching\x20from\x20','https://sharkpan.xyz/f/G0dTl/4qad2i.jpg','\x0a\x0a##\x20世界书条目:\x20','保存壁纸失败:','currentAbortController','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','reset-ui-scale-button','gzVFc','true','-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a','last_message_preview','objectStore','MXsCD','apply','textContent','YJMIV','</span><div><div\x20class=\x22description\x22>','includes','livestream-dm-btn','</div>\x0a\x20\x20\x20\x20\x20\x20','group-bg-input','user-post-attachment-preview','”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[','hard-reset-button','back-to-chat-from-group-settings','BjbGn','UxMBp','SFjlM','flex','toast','cursor','未知主题','（开始一段新的对话...）','char_wallpaper_','Fetch\x20request\x20was\x20aborted.','</div>\x0a\x20\x20</div>\x0a','kQmYz','找不到旧的存档，无需救援。','fPokX','_blank','nUILx','&gt;','-\x20[','FFVAt','sad','开始时间','width','GVsjS','”的角色，即将开始一场直播。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','reply','userAvatarFrameUrl','488805RYCega','Ohnjv','today-btn','char_offline_bg_','\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。','openai','flatMap','JimwI','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>','YLoaf','\x20张旧封面。应用即将刷新。','当前聊天','.page-dot','api-model','】的旧数据...','JPBtb','music-input-artist','group-settings-name','距离「','xvKkO','location_name','app-diary','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20','readonly','persona','cancel-edit-replay-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','-\x20[动态]\x20','Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!','继续直播失败:','lineHeight','正在搜索音乐...','card-widget','livestream-sprite-container','vaToS','coverUrl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','正在回应中，别急。',']\x20[image]','QLkIO','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Tdlet','复制失败了，哼。','observe','NoirCharacterCard','字体更换成功！','charId','保存直播进度失败了，真是的。','WlJcJ','Tcqet','对主角的看法，','from','currentLivestreamLog','world-book-list-container','刷新了\x20','wtYjk','TFufl','ZGpKv','PurJc','HAInN','artist','lqVMj','TcRaZ','settings','UHjPq','0\x201px\x203px\x20rgba(0,0,0,0.6)','\x20-\x20','交通出行','snoop-phone-top-nav','ZKwFO','char_avatar_','area','\x22\x20id=\x22','你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。','”吗？该角色的私聊和所有相关群聊记录都将被一并处理。','back-to-replays-list-from-view','OWWLs','的直播间','createElementNS','wb_','mgrHz','PxXKN','ZIcSW','indexedDBSnoopData','正在搬运旧卡片...','appIconPosition_app-snoop','好友圈名称不能为空！','music-library-item','图标处理失败:\x20','\x20.app-icon-img','nQrbj','translate(-50%,\x20-100%)','<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>','music-input-backdrop','pRgOx','IDnWh','URcOm','qEdJR','wXAeA','displayUrl','activeWorldBookCategoryId','import-accounting-input','uASmq','YpgzY','owQlS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','upload-badge-button','JDsWZ','wjqMU','uEcnJ','WcQoa','expense-description','请输入新的群名称：','ghSyJ','LedFS','line','add-chat-button','设置已保存！','.load-more-btn','char-edit-wallpaper-preview','哼，就按你说的办好了。','MZbBl','indexedDBMusicData','<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>','livestream-char-name-header','db:','events','PWnBx','start-livestream-backdrop','CRNBr','snoop-phone-screen','faQuV','JoEyF','writeText','label','getDate','add-event-backdrop','吃薯条','回复\x20','kPfhv','wallpaper_main','对方正在输入...','字体保存失败了，哼:\x20','kvLcQ','save-group-settings-button','\x0a\x20\x20<img\x20src=\x22','kOTDM','动态中的音乐搜索失败:','customFeedWallpaper','\x22\x20的聊天记录吗？此操作不可撤销。','pointerEvents','music-feed-container','用户操作中断了\x20AI\x20响应。','VpTbW','listen-together-invite','endpoint','lioPP','GQiTc','todo','auto','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','todo-list','livestream-sprite-slider-x','\x20\x20-\x20用户ID:\x20','\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20','confirm-music-input','确定要删除这个安排吗？此操作不可撤销。','mdCsV','livestream-sprite-front','put','pkTSc','Unknown','home','activeUserProfileId','wallpaper-input','selected','GJErz','rTlfE','GYXlX','</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','has','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>','isAnimatingDiary','https://sharkpan.xyz/f/N0VCv/5rd8br.jpg','RSNId','https://sharkpan.xyz/f/Ganul/78iwli.jpg','dNylc','YBrnK','<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>','novel-mode','VduvP','klOVC','错误：找不到这首作为“信物”的歌。','app-chat','url','Dhqnq','.message.user','正在写入新数据...','发现角色\x20','speech','ULrJD','aZnoY','FONgp','name','RyNEx','.music-post-play-icon,\x20.music-share-play-icon','organize-bill-button','worldBooks','api-provider','modal-text','未知艺术家','已自动断开与其他人的听歌同步。','numeric','transform','QHbsx','未知用户','stringify','accepted','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','memberCharacterIds','settings-screen','cmVvD','day-number','djbIb','卡片已移除。','Creating\x20object\x20store:\x20music_library','对方正在行动中...','JMVBd','sender','-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a','让主播继续说点什么吧...','button','vertical','rtBKj','add-friend-circle-button','accountingLedger','FlUbs','nQUHf','\x22]:checked','world-book-checkboxes-container','livestream-sprite-','2rem','\x22\x20的聊天记录已清空。','https://sharkpan.xyz/f/ajwtY/x03qxn.gif','QYofS','app-snoop','gLAgx','target','indexedDBData','qcAkN','app-meeting','esjRE','10px','被你撩到','UMmFo','SpGPa','HHNdG','aZkbL','wants','bzrnK','JlWoj','分享了《仿生人会梦见电子羊吗？》的读后感。\x22\x0a\x20\x20-\x20\x22与观众激烈讨论了关于人性的定义。\x22\x0a\x20\x20-\x20\x22收到了来自‘','ovlbs','iFHgK','”的笔记，内容是：“','recipientId','snoop-home-date','\x0a\x0a#\x20','json_object','is-playing','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>','.wb-entry-item\x20input','DPPdo','#\x20总结失败了，可能是记录太长或太复杂。','ESmdg','visible','nextElementSibling',')\x20的专属时间锚点\x0a','qohlA','back-to-library-from-altar','oRBfQ','JAtzv','直播出错了...\x20','aOmNp','createObjectStore','livestream-sprite-confirm-button','ZQdQs','WlTzb','.wb-entry-item\x20input:checked','cardWidgetState','alt','azJwq','MLJFg','\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a','editing-user-id','image/jpeg','nBZBB','</span></div>','DSshv','ffOiu','加载直播资源失败:','位置已重置，正在刷新...','delete-expense-btn','委屈哭','SCVlh','--primary-hue','未知表情','请输入群聊名称。','event_','ukcRR','BQnPP','哼，这不是图片，你想让我压缩什么？','onsuccess','还没有我的回应可以重新生成哦。','#c299ff','User','lastTimestamp','转给\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>','opacity','livestreamList','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','user-profile-edit-title','https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg','bkKlQ','loadAsync','ZihHG','clientY','\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a','floor','Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？','MtrRt','textShadow','QzLBf','top','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>','\x20时出错，跳过。','diiEo','async','\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。','--primary-lightness','worldBookCategories','EiDIv','赞同！渲染效果一级棒！','QgBtK','\x20的图片失败:','xUBee','https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg','todo-date-title',']\x20[sticker:','relative','kSqSh','加载见面场景时出错:','chat-send-button','snoop-log-back-btn','一个人可怜吃饭','narrator','/v1/models','back-to-home-from-calendar','wEevo','https://sharkpan.xyz/f/ZazfW/2vv46w.jpg','”已成功导入！','userProfile','CSRwx','备忘录','GwHIZ','audio-player','DABBv','{userName}','LFuqI','Noir_Backup_','20px','未知角色','yrGaE','\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“','livestream-reroll-btn','back-to-chat-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','EydvD','MFJQC','wnFTI','user-profile-list-screen','你是一个乐于助人的助手。','<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>','保存失败:\x20','#ff9999','<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>','\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20','lazy','lyrics-file-input','innerHTML','XqLXP','ljSTR','lt-ui-song-artist','app-music-library','dVIwQ','join','world-book-edit-content','\x20到\x20','zmJeB','加载更多聊天记录','XIIbU','ILiUD','event-type-todo','accounting','worldBook','测试动态已添加！','星期四','transfer-recipient-group','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','var(--text-color)','show-chat-view','60%','calendar-header-title','meeting-char-name-header',')\x20恢复头像失败:','MDzJb','EzCjS','需要至少2个角色才能创建群聊。','.listen-together-accept-btn','RnCJP','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>','\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a','GlcJJ','FbUqf','kPFyP','save-edit-button','keys','UhoMK','pop','很期待','内容不能为空！','eKwWN','Failed\x20to\x20read\x20state\x20from\x20localStorage:','同步已断开。','statusText','100%','dm-bubble\x20','world-book-edit-name','RNlsP','JZNnv','\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_','</pre>','\x20的旧格式数据翻译。','jJJmY','group_bg_','\x20(当前)','onclick','aSnfI','jBZpj','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a','image/png','gWbKg','确定要删除角色“','\x20//\x20<--\x20哼，最后是这里\x0a---\x0a##\x20最近的朋友圈动态\x0a',']\x20[主播\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a-\x20**核心指令**:\x20你必须假定这场直播就是在此【当前时间】附近刚刚结束的。在报告中，所有与时间相关的描述，如\x20\x22start_time\x22，都必须以此为基准。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','noir_data_migration_v1_complete','FthtS','charAt','continue-livestream-btn','getElementById','#group-settings-screen\x20.selected-options-text','”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“','epojJ','https://sharkpan.xyz/f/z1xc5/iore2n.gif','该角色','phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。','ZtyRQ','-\x20你点过一份外卖：“','removeChild','export-char-button','XbuSh','<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>','cPBwy','toggle','确定要恢复这个角色的默认立绘位置吗？','livestream-settings-btn','\x20的遗失头像，正在救援...','livestream_sprite_','teIkS','不高兴撒娇','toBlob','欢迎！请先创建一个角色开始聊天。','\x20的《','url(','pjSxa','Ocezq','stickerName','ChsrE','objectStoreNames','\x0a\x20\x20\x20\x20-\x20世界书[','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','.app-icon','yBXUh','AI返回了无法识别的数据格式。','\x0a\x20\x20\x20\x20<textarea\x20id\x20=\x20\x22snoop-summary-textarea\x22\x20readonly\x20style\x20=\x20\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22\x20>\x20','eUIcd','正在恢复视奸档案...','blob','localStorageData','dSgoE','SqyDP',']\x20[系统事件]:\x20','全量导入失败:','DYBdx','LIQCa','缓存命中:\x20','deelk','gift','#replay-action-edit','世界书条目已保存！','确定要清空\x22','tnbrk','[主播\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','whGnQ','\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【','近期没有特别安排','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','#ffb366','cnLyu','altar-zip-input','image','addTestPost','.listen-together-card','错误：找不到角色','WVNLT','edit-current-circle-button','\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>','dUOdX','HGSeY','\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>','iQAFv','CvOOC','dNPZR','</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','char_','图片处理失败:\x20','home-clock-container','save-edit-replay-btn','char-name-header','\x20张旧图片。','activeListenSession','至少要选择一个圈内成员！','upload-feed-bg-button','gTuuW','sprite-slider-x','GkTxe','JMzpN','parse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>',']:\x20','正在解析角色卡...','FZAqt','ftwmH','char-edit-css','towqt','mousedown','https://sharkpan.xyz/f/25ACQ/gpzab6.jpg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-card\x20','VIMJe','<div\x20class=\x22listen-together-header\x22>','lOCJZ','removeItem','--custom-font-family','embMq','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','home-screen','.char-info-wrapper','galgame-time','gallery','</textarea\x20>\x0a\x20\x20\x20\x20\x20\x20','NoxaD','https://sharkpan.xyz/f/B4DCa/u86hk2.jpg','.snoop-clear-btn','cMTiw','OYQAO','jCTqO','import-data-input','entries','lastIndexOf','BMgxd','\x20添加了新的纪念日：','urosq','YAML翻译机也无法理解这段梦话。','-\x20**对话状态提示**:\x20你们已经有\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>','TA正在提笔写日记...','sprite-cancel-button','批量生成动态失败:\x20','appState','msg_','\x20|\x20','group-avatar-input','1971891mDswJr','IFiaV','切换聊天时发生异步错误:','\x20\x20具体对话如下：\x0a','GRoHr','saiSO','FDYEr','没有角色需要恢复头像，跳过。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空','cancel-transfer-button','touchmove','QNCZX','”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20','values','导入账本失败:','UDTOz','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>','YQiJu','确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！','NoirAccountingData','wb-entry-item','Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。','sender_id','LOTJO','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20','大家正在赶来回复...','user-avatar-frame-url-in-chat','unlocked','back-to-meeting-list','edit-message-textarea','gzSsC','成功向好友圈\x20\x22','哼，正在净化你那些超重的音乐分享记录...','querySelectorAll','medium','jSviY','AI返回的内容里找不到有效的JSON数组。原始回复:\x20','-\x20你在“','RfDOE','xsNMR','图片加载失败','QJoVz','。绝大多数弹幕都应该围绕着你。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20\x20**产出**:\x20生成\x206-8\x20条符合以上规则的、自然的、多样化的路人弹幕，放入\x20\x22danmaku\x22\x20数组。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22哦？刚刚有位朋友私信问我...\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20},\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢你的礼物！非常开心！\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人丙\x22,\x20\x22comment\x22:\x20\x22学到了！\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22privateMessageReply\x22:\x20[\x22（悄悄）跟你说哦...\x22,\x20\x22刚刚那个问题，其实是因为...\x22]\x0a}\x0a\x20\x20\x0a#\x20emotion字段规则\x0a-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a','fbQNP','#character-edit-screen\x20.selected-options-text','meetingView','AI返回了无法解析的文本','外卖订单','UDsab','执行音乐封面数据净化...','LmNKA','friend-circle-list-container','.widget-info\x20>\x20div','friend-circle-list-screen','记一笔','请基于“我”的最新互动，继续你的直播。','char-edit-offline-bg-input','Villi','snoop-list-screen','max','YJVAl','https://sharkpan.xyz/f/55ntj/ul0hkz.jpg','JWyRw','”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“','choice-cancel','”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[','Claude\x20API\x20错误:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','cgosu','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20','\x0a-\x20**对话状态**:\x20群里在','\x0a\x0a#\x20关于对话者“','perChatContextLines','avatar','勉强但是好吧','bubbleCss','https://sharkpan.xyz/f/wjgHq/yznfhq.jpg','\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a','jrkpv','reload','googleapis.com','toLocaleString','NqUTO','getFullYear','mLeBo','#replay-action-cancel','getMinutes','BmhRV','transfer-recipient-select','private','message-action-modal','VaYnr','friend-circle-edit-bind-user','snoop_','KjMKg','lkSuN','https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg','home-dock','vvinB','match','sbOmd','reset-feed-bg-button','abyss','friend-circle-edit-name','object','ZMzUg','PDdiI','这不是我认证的账本卷轴，导入失败！','找不到角色信息。','ZDTSq','back-to-livestream-from-settings','zDprT','XkYKQ','CdHYw','\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。','\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20','.wb-entry-item\x20input[data-category-id=\x22','\x22\x20data-id=\x22','加载已保存字体失败:','emote','musicPlaylist','9wIuIls','别这样嘛我哭哭','aOGKh','请先在\x22设置\x22中配置你的\x20API\x20信息。','已经生成了今日账单！想看就去“看账本”标签页。','dHaYv','喝多了','.remove-attachment-btn','chat-view-pane','AHEsc','YKnaO','abort','Noir\x27s\x20Log:\x20直播日志为空，没什么可总结的。','meetingViewMode','choices','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何回放记录。</p>','’的关键礼物‘超级火箭’。\x22\x0adm_interaction_summary:\x0a\x20\x20-\x20\x22‘','galgame-view-container','OcTRa','lpZQm','Failed\x20to\x20parse\x20history\x20for\x20chat\x20','\x0a-\x20人设:\x20','💜\x20','day-dot','catch','\x0a你只扮演【','IUVmT','date','\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“','账本已成功导出！','CBOvg','已设为当前用户！','items','now','accounting-content-area','&lt;','tEKVz','HCEdW','\x27\x0a\x20\x20\x20\x20data-contact-name=\x27','border','feed-bg-input','chat-sticker-panel','likes','context-lines-per-chat','原始文本:','正在整理…','categorizedExpenses','ZAzFt','horizontal','KRyRH','music','galgame-text','amount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27','gzPbS','qrnfP',',\x20resetting.','PyOso','https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg','\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20','group-clear-history-button','未知商店','default','-\x20姓名:\x20','mouseleave','load-more-btn','uMwyc','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>','pow','livestream-text','diary-modal-cancel','\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a','<div\x20class=\x22post-image-container\x22><img\x20id=\x22','dock','\x22\x20class=\x22post-image\x22></div>','小组件背景已更换！','result','WdiFm','some','星期二','aaSuK','.snoop-main-grid','back-to-world-book-list','style-','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','reset-card-button-2','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>','EzJok','VVDfV','<div\x20class=\x22post-comments-container\x22>','PzwIf','char_sprite_normal_','’私信询问了','LHZcO','CBIwc','IndexedDB\x20failed\x20to\x20open','.avatar','upload-wallpaper-button','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','TrPBt','服务器错误:\x20','fMseZ','hKrGF','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20初始观众情绪:\x20\x22','galgame-sprite-container','text','altar-slot-cover','right','哼，只有私聊才能进行总结，群聊那么乱怎么记！','mgBuG','diary-list-container','log','dPAdj','diaryView','transfer','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以直播的角色哦。</p>','cCKhm','DPyeV','iNZam','save-livestream-settings-button','https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg','efpZW','<div\x20class=\x22snoop-avatar\x22>','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>','spriteTransform','</div><div\x20class=\x22artist\x22>','back-to-home-from-world-book','today-todo-list','50%','diary-entries-container','MIXWd','chat','表情包已保存！正在刷新应用...','huoUn','image_url','post_image_migrated_','<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22',')，已跳过。这不应该发生，数据库可能已损坏。','群聊\x22','”的补充信息\x0a','\x22\x20data-history-index=\x22','<span\x20class=\x22danmaku-user\x22>','translateY(0px)','member-selection-item','replace','meeting-view-screen','导出角色卡失败:','eventContent','reset-desktop-button','等你消息','GIivz','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>','snoopPhone','确定要彻底清空【','danmaku-input','\x20之间的私密内容)\x0a','https://sharkpan.xyz/f/nj7ul/r48eum.jpg','\x22\x20src=\x22','svg','touchcancel','最近没有动态记录。','ZdxxS','未命名群聊','确定要永久删除分类\x20“','emotion','calendar-day','\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','纪念日','MRqMR','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','music-upload-altar-screen','global-player-play-pause-btn','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>','music-library-container','8px','diaryList','未知商品','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','180px','app-settings','https://sharkpan.xyz/f/JYeig/sv4p6m.jpg','theme-lightness-slider','contact_name','pointer','\x0a\x0a#\x20报告要求\x0a\x0a\x20\x20-\x20**格式**:\x20必须是严格的YAML格式。\x0a\x20\x20-\x20**内容**:\x20必须包含以下字段：\x0a\x20\x20\x20\x20\x20\x20-\x20`start_time`:\x20直播开始时间\x20(根据【时间锚点】中的“当前时间”来写，格式必须包含年月日，例如：“2025年10月9日\x20大约下午3点”)\x0a\x20\x20\x20\x20\x20\x20-\x20`theme`:\x20直播主题\x20(总结)\x0a\x20\x20\x20\x20\x20\x20-\x20`streamer_mood`:\x20','create_event','Dpglo','app-pages-slider','has-new','dVIds','show','snoop-character-list-container','出去玩','meeting-list-container','Bzavq','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。','sAPjs','world-book-item','】的手机已被重置。','total_cost','TomYl','全量导出失败:','message-image-content','bnHZc','NXqBn','revokeObjectURL','sILMG','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>','昨天\x20','LMrur','交给我吧','BBPKF','PNRjV','\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a',']\x0a\x0a#\x20角色资料库\x0a','Qbucq','NEzSv','eqUZy','用户已删除。','readAsDataURL','uUWeW','IFwcl','MIVsV','dHjag','\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','XNyrP','6960680YvnSyp','</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>','主播正在准备开场...','导入角色卡失败:','说了要\x20.ttf\x20文件，你是听不懂吗？','请根据以上所有信息，开始分析并返回JSON。','bVAsk','livestream-sprite','[用户分享了音乐：','QrjEs','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22snoop-app-header\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>','group-world-book-checkboxes','diary-page','GKrCo','candidates','diaryCurrentPage',',\x20ID:\x20','type','transparent','documentElement','https://sharkpan.xyz/f/olJt4/7z47b8.jpg','is-entering-from-right','500','dKNcg','tCRZK','authorId','all','1478045AFNhsO','<br>','snoop-temp-style','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>','JZSES','81572cNmgUw','QSaOC','Xxury','fragments','UJRgV','KFAvq','player-play-pause-btn','\x20账单','start-livestream-modal','dms','小时前聊过，可以适当问候，不要直接继续之前的话题。','focus','.category-checkbox[data-category-id=\x22','Detected\x20API\x20provider:\x20','playableUrl','LFzUJ','files','\x20[并附上了一张图片]','quote-preview-sender','这不是一张有效的Noir角色卡。','KEujG','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','yoTUF','card-image-2','BYYqZ','TQlsy','\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>','livestream-replay-view-screen','transfer-modal','cover','#chat-view-pane\x20>\x20.typing-indicator','.category-checkbox',')的补充信息\x0a','DXdme','https://sharkpan.xyz/f/8a7tj/sea1z9.jpg','KnSLN','url(\x27','Failed\x20to\x20save\x20state\x20to\x20localStorage:','refresh-feed-button','QKoDS','YASWo','gap','lyrics','总结失败:','chat-image-input','qBNkg','galgame-sprite','chatHistory_','ULnVY','comment','font-input','forceWhiteClock','random','typing-indicator','version','GvoRo','\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20','[DONE]','\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x20margin:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>加载失败了，哼。</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','isPlaying','】的日记本已被清空。','listen-together-ui','mmpUr','chat-reroll-button','getItem','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=','fVTDE','.screen.active','custom-stickers-input','long','LogCN','lXhIW','”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“','eXYAk','\x20添加...','cWyTk','full-width-module-container','<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>','qBtHN','open','pending-post-image-preview','lt-ui-song-title','happy','dVmJB','white','编辑条目','在好友圈\x20\x22','editing-world-book-id','Enter','click','cardState','GrvjO','\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“','确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。','character-edit-title','已复制到剪贴板！','<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>','图片预览失败:\x20','QuwgT','上传失败了，笨蛋！\x20','EfnJN','galgame-sprite-adjust-ui','currentlyPlayingIndex','SnjsM','\x22\x20data-category-id=\x22','天没动静了。你的角色们应该发起新的问候或话题。','Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。','result_page_content','filter','QzMjx','[发送了表情]','GKuPO','<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>','https://sharkpan.xyz/f/djjH8/29ejbg.jpg','TPLoB','生成日记失败:\x20','player-prev-btn','https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg','szBIP','加载第二个卡片图片失败','response','https://sharkpan.xyz/f/7L3Hj/sl4504.jpg','localeCompare','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20','gZgIE','array','userId','zsKgf','.category-toggle-arrow','app-world-book','chat_image_','未知联系人','\x20个成员','author','正在生成中，请稍候...','加载卡片图片失败','私信互动','customWallpaper','delete-user-profile-button','unshift','\x20\x20-\x20角色ID:\x20','data:','musicUploadAltar','--feed-bg-image','YqPUI','dm-close-btn','“我”这次没有新的互动，请你根据情况继续直播。','（对话结束）','hoUeH','diary-next-button','EWHJU','Gksoa','translateX(-50%)','餐饮美食','人情红包','</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22','浏览器历史','VDmmB','gCYdJ','todo-item','我是女仆','column','imageId','\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>','lDqeV','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>','</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20','tTDIe','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>','猫猫撒娇','\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a','galgame-sprite-controls','直播尚未开始...','的特殊对待。因此，回应私信是你的【最高优先级】任务。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20回应私信能体现你对','rrSfd','dshBa','YvqAn','rwGSJ','User\x20cancelled','countdown-timer','NBaPV','unified-audio-player','-\x20**状态提示**:\x20这是你和','rwBNR','UpeVH','chat-summarize-button','novel','https://sharkpan.xyz/f/4adUj/68uj9o.jpg','daily-expenses-list','save-custom-stickers-button','grid','的弹幕和礼物。感谢礼物，针对弹幕内容进行回复。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**常规任务\x20-\x20推进直播**:\x20在完成以上互动后，自然地继续你的直播主题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**产出**:\x20将以上所有主播的发言，按顺序整理成\x20\x22streamerSpeech\x22\x20数组(通常6-8条内容)。私信回复则放入\x20\x22privateMessageReply\x22\x20数组。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20##\x20阶段二：观众的反应\x20(生成\x20danmaku)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【绝对禁令】**:\x20你在这里的任务是模拟【除了','xEdyl','从开播时的期待，到讨论剧情时的兴奋，最后收到礼物时非常开心。\x22\x0aaudience_mood:\x20\x22初期以好奇和捧场为主，中途讨论热烈，后期因用户的礼物达到高潮。\x22\x0akey_events:\x0a\x20\x20-\x20\x22','请根据以上所有规则和资料，开始生成内容。','导出账本失败:','1px\x20solid\x20var(--border-color)','AMVTH','GsOfS','userProfiles','rJdon','KzEqr','https://sharkpan.xyz/f/VG2FY/uucfvv.jpg','DmseW','musicId','onmouseout','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','甜蜜地和你聊天','确定要永久删除这条回放记录吗？','MJetl','livestream-sprite-controls','Ppdgm','lLHtg','href','[手机]','char-edit-persona','uxyvZ','livestream-sprite-slider-y','.slot-filename','wJpQA','accounting-title','\x20场直播的主题是“','qDrUR','-\x20你最近去过：“','TxYzj','[用户发送了表情：','meeting-list-screen','之外】的其他观众。你【绝对禁止】伪造成','解析压缩包失败:','test','noir-author-mark','userProfileList','点击选择包含音频、封面、信息、歌词的\x20.zip\x20压缩包','Bjggn','tFMSo','##\x20','activeMeetingCharId','https://sharkpan.xyz/f/1zQH2/o84boo.jpg','angry','编辑群成员功能正在开发中...','XXSop','\x0a\x0a//\x20▼▼▼\x20在\x20#\x20任务指令\x20的前面，加上这段“社会学常识”\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心概念：直播中的“私信”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20“私信”是“我”(','#diary-action-delete','ucgFM','（正在回忆...）','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>','在你那乱七八糟的文本里没找到“歌名”！','CeyUP','livestream-dm-messages','friend-circle-edit-screen','&amp;','defaultPrevented','无标题笔记','XuCPa','categorized-expenses-list','编辑用户','querySelector','你好，世界\x20(Hello,\x20World)','app-user-profiles','JSON解析失败(','CejYJ','FrddL','OHQMS','-\x20**\x20当前精确时间\x20**:\x20','hwTtX','<span\x20class=\x22description\x22>','title','EoTYZ','EhvGX','https://sharkpan.xyz/f/yrOhN/0yixqd.jpg','fcrQt','group-edit-members','keydown','cancel-quote-button','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-edit\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-delete\x22\x20style=\x22color:\x20#dc3545;\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x20cancel\x22\x20id=\x22replay-action-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>','snoop-app-container','&apos;','音乐魔方解析完毕，随时可以献上祭品。','world-book-screen','<span\x20style=\x22opacity:\x200.6;\x22>无</span>','jXdLB','#\x20发生错误：\x0a','错误：找不到此好友圈绑定的用户！','appendChild','OlNlI','anthropic.com','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','posts','etDzV','then','QlABA','xownD','gerPt','总结报告生成失败:\x20','总得说点什么吧？','getDay','\x20的私信】','back-to-circle-list-from-edit','{charName}','remove-font-button','vyiDS','\x0a---\x0a//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x0a#\x20上下文\x20(最近的直播内容)\x0a','</p>','indeterminate','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','VGmhN','哼，正在净化你那些被污染的好友圈动态...','角色“','WNRQU','ddqJR','读取直播存档失败，将重新开始。','gNEQc','动态页背景已更换！','加载角色\x20','为你骄傲','uvtlh','char-edit-avatar-input','\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a','[AI分享了音乐：','Noir\x27s\x20Log:\x20直播进度已保存\x20(包含私信)。','MbyUA','marginTop','uyeOa','toLocaleTimeString','mTEcW','music_cover_migrated_','CYXWa','groupSettings','USCeN','核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a','expense-item','cancel-event-button','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-','正在保存...','speaker-ai','restaurant_name','noir-custom-font-style','zdWeb','sprites','xxFEz','GLwoe','dm_reply','input[name=\x22event-type\x22]:checked','的转账','char-edit-name','<p>格式错误</p>','choice-import-character','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20','</div></div></div>','\x0a##\x20条目:\x20','snoop-summary-textarea',']\x20[弹幕\x20','friendCircles','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','WTVwd','fcepr','activeChatId','TUnPW','aborted','galgame-speaker','aBkus','readAsText','lEKEa','OIZSm','恢复失败了:\x20','widget-cover-art','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>','message-anchor','onupgradeneeded','群友正在输入...','toLocaleDateString','》吗？','JVdIH','touchstart','chat-screen','edit-replay-textarea','data:\x20','\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20','”\x20已被彻底清除。','的情绪变化总结\x20(【注意】必须用角色名，不是“主播”)\x0a\x20\x20\x20\x20\x20\x20-\x20`audience_mood`:\x20观众氛围变化总结\x0a\x20\x20\x20\x20\x20\x20-\x20`key_events`:\x20本场直播的关键事件节点\x20(列表形式)\x0a\x20\x20\x20\x20\x20\x20-\x20`dm_interaction_summary`:\x20与“我”(','FAWZd','every','dnbaP','UNkaT',')只发给你一个人看的悄悄话。这代表','AbortError','NJmlg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','wLgzJ','normal','wheQh','星期六','歌曲ID','aTlpd','back-to-home-from-wallpaper','replayPressTimer','lLteC','\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20','fQfNw','hNvNV','为角色\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>','\x22\x0a\x20\x20\x20\x20data-log=\x27','snoop-char-name-header','widget-play-pause-btn','OikhQ','\x20个模型。','user-post-image-input','VxQuC','getHours','user-name','songId','data:image','80px','add-world-book-category-button','TQnGg','snoop-phone-header','VEtwv','】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','drawImage','var(--text-color-light)','https://sharkpan.xyz/f/3AGHe/2f8x3x.gif','群聊「','群聊“','BbGUM','IAZaF','</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','isActive','Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20','回放已删除。','TGxpa','rgba(255,255,255,0.2)','tiSXT','qJBKT','#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked','nPWGr','MbtHt','音乐数据升级完成，迁移了\x20','livestream-replays-btn','char-edit-wallpaper-input','\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20','livestream-room-screen','back-to-home-from-settings','history','yHfQi','Nrgas','isArray','setDate','正在处理图片...','OdmNF','borderRadius','[AI发送了表情：','translateY(-300px)','IVYeG','好友圈净化完成，正在重新存档...','reduce','已删除。','livestream-controls-container','user','DGgZA','toString','chat-messages','\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a','send-danmaku-btn','isFinite','csBHl','lsxfW','dGMaA','保存壁纸失败:\x20','HdCFz','firstChild','khQSy','（正在构思中...）','ZmqTi','EtiKm','dViQJ','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-','<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>','canplaythrough','sVyGO','categoryId','jZKie','FhYRN','etOwj','wzNjP','livestreamSettings','widget-prev-btn','short','kiPLc','解析AI剧本JSON失败:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22','character-edit-screen','value','gscEP','color','musicLibrary','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>','确定要放逐这\x20','qtnLM','execCommand','MeEHU','oxCUt','YgvPM','https://sharkpan.xyz/f/8ngsj/ax0fat.jpg','group','event-content-input','livestream-replays-screen','phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。','widget_badge','\x20张旧的动态图片。','的第一次互动。\x0a','正在打包“','大家好像不知道该怎么回复...','meeting-message-input','条目已删除。','(歌曲刚开始)','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>','mZsVZ','live-preview-style','#FFFFFF','pre-line','\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22','\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。','#a4c2f4','请根据以上所有规则，生成\x20','display','Creating\x20object\x20store:\x20','badgeState','\x20转账\x20','编辑好友圈','aMuoW','body','\x0a-\x20“我”发送的私信:\x0a','\x0a#\x20任务:\x20更新并扩展聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕【非用户的】角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**核心指令**:\x20你的任务是更新和扩展现有的聊天列表。你有两种选择，请务必同时进行：\x0a\x20\x20\x20\x201.\x20\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20\x20\x202.\x20\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a\x20\x20-\x20**平衡性要求**:\x20鼓励在延续旧对话的同时，也积极创造新的联系人，让手机看起来更真实。不要只做其中一项。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新创造/续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成主角自己的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]','pause','organize-button-container','---\x20救援任务完成\x20---',']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20','<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>','chat-listen-together-button','img','padding','-\x20你曾经搜索过：“','livestream-sprite-reset-button','ended','OJIOZ',')，启动兼容模式...','-\x20\x22','post_user_','hnKYy','”。\x0a','block','chats','NiWCJ','GwKiJ','selectedDate','pJYxk','dUhCR','创建新角色','今天一笔账都没有，我整理什么？','<input\x20type=\x22checkbox\x22\x20value=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20<div\x20id=\x22','在所有地方的最后一次互动是在**:\x20','fetch-models-button','meetingList','Escape','goBAz','livestream-dm-panel','abs','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','pobKQ','images','header-actions','cancel-edit-button','https://sharkpan.xyz/f/xjmCX/zyjzew.jpg','fiSHT','加载视奸记忆失败(','eventType','正在准备图片数据...','未命名角色','character-list','livestreamSpriteTransform','\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','last_edited','readwrite','12775DinBoV','正在逆转时空...','is-selected','parts','主播正在回应...','smooth','gAMXo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','https://sharkpan.xyz/f/Krwio/1mcclx.jpg','浏览器','ZntLd','已恢复默认字体。','message','\x20张旧的音乐封面。','world-book-edit-category','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>','app-accounting','caOXd','资料已更新，为了让所有变更完全生效，我来帮你刷新一下。','OwnuV','friendCircleEdit','[用户发起了听歌邀请:\x20','scrollHeight','is-exiting-right','vzdFZ','https://sharkpan.xyz/f/N02Sv/378vt6.jpg','dwYgw','KhIDm','group_avatar_','\x20说：“','cZljG',']\x20[','OStaP','back-to-circle-list-from-feed','OtPJd','QFqzr','|||CMD|||','ReVLm','#\x20核心任务:\x20直播开场\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“','maxHeight','回放档-案已更新。','NTpVM','rRyPx','status','正在清空旧数据...','OpenAI\x20API\x20错误:\x20','真是的，必需的祭品都还没准备好！','uiScale','livestreamRoom','https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg','[图片]','Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:','AI返回的数据格式不正确。','加载徽章图片失败','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>','<div\x20class=\x22loader-spinner\x22></div><span>','</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>','mousemove','livestream-bg-preview','hasNewDMReply','刚刚发布了一条动态，内容是：“','sgpfj','reset-widget-bg-button','QpqxO','livestream-theme-input','</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20','买新衣服','pntTY','</div>\x0a</div>\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','bqVIz','.no-action-modal','DjhLu','qwBtk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','KODUE','sticker-manage-btn','GzgEf','https://sharkpan.xyz/f/qjJT3/kpy33b.jpg','导出失败了，哼:\x20','&#039;','OHMzV','wGUBn','\x22>一起听</button></div>','children','XAjiS','生成失败:\x20','检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。','---\x20好友圈净化仪式完成\x20---','0\x200\x20','sLfVJ','wStiD','replaceAll','的关注**:\x20只有当','preventDefault','IYVUn','preview-item','错误：找不到签署契约的地方。','position','save-user-profile-button','确定要删除这笔记录吗？','clock-color-toggle','BKtdZ','ueRSg','activeFriendCircleId','\x20写道:\x20','Noir_FileSystem','\x22>&times;</button></div>','\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。','\x20时出错:','-\x20你拍过一张照片，内容是：“','兼容模式成功，已将旧格式数据翻译。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥','listen-together-backdrop','input[type=\x22checkbox\x22]:checked','正在打包数据，请稍候...','tab-record-expense','cLtgw','zFwEg','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a','BCbhz','oncomplete','<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>','vDHUj','今天\x20','modal-cancel','character-item','message-bubble-row','确定要重置所有小组件的位置吗？它们会回到初始位置。','UNgcI','KkgIK','diary-get-reply-button','加载立绘失败:',']。严禁使用列表之外的任何表情名。\x0a','snoop_cache','确定要删除这篇日记吗？此操作不可撤销。','群聊\x20(','appIconPosition_','【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！','mkWIy','Nuyyt','qTQMC','LNrGX','char_sprite_','.choice-modal-backdrop','exp_','contains','kind','item_name','SiNtJ','PAbyV','qUWII','确定要重新记录吗？当前的账单会被删除。','的回放列表','calendar-grid','SucMZ','ODles','的个人专属世界观设定\x0a','[用户向\x20','netease','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>','music-screen','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-','stopPropagation','文件格式不正确，不是一个有效的备份文件。','left','这本日记本来就是空的，你还想清空什么？','的巨大伤害，代表你不在乎','diary-char-name-header','编辑角色','clipboard','end','classList','hWmaM','back-to-livestream-list','setItem','widget_card_2','kMNMN','FBxAd','执行好友圈数据净化...','edit-replay-modal','pKpaH','meeting-scene-view','dataset','widget-next-btn','\x20(分享了歌曲:\x20','lDSLB','group-options-modal','未知餐厅','）最新写下的日记内容。Ta写的是：\x0a\x20“','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7','OfUpd','DWSsm','wb-category-group','.custom-multiselect','onloadend','有点无语',')的互动\x0a这是“我”刚刚发送的互动内容，你必须对此做出【优先回应】:\x0a','group-chat-member-list','.bubble-','WVZfh','huOzr','tscrR','xIZbz','NNNIj','wallpaper-screen','GsCED','-input','正在翻阅所有档案...','danmaku','setAttribute','哼，正在开始净化你那被污染的聊天记录...','EIeFa','http','avatar-wrapper\x20','gfAxH','chat_','成功净化并迁移了\x20','mQITp','assign','确定要恢复默认字体吗？','snoop-copy-summary-btn','jeOWe','snoop-home-time','KOcji','backgroundSize','https://sharkpan.xyz/f/mjdFW/28n30c.jpg','】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。','开播失败了，哼:\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>','GOhLE','gHVtt','save-friend-circle-button','confirm-altar-upload-button','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a','\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','mSPKC','\x0a\x20\x20\x20\x20人设:\x20','BSHXt','input','NbtIp',']\x20[私信回复\x20from\x20','currentDate','35%','已经删掉了。','cancel-listen-together','正在焚烧【','transfer-backdrop','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','https://sharkpan.xyz/f/ABwhZ/twknmr.jpg','个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。ID只用于\x20\x22authorId\x22\x20和\x20\x22likes\x22\x20这种结构化字段。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a','nmOdL','歌曲名称','wddsZ','delete-world-book-button','activeQuote','&quot;','XWSdP','-\x20**\x20状态提示\x20**:\x20你已经有\x20','.json','https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg','head','streamerSpeech','FZZgs','\x0a#\x20交换日记摘要\x20(你和\x20','XeKrP','query','MWSbo','请看是我','条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对禁令】(最高优先级)\x0a-\x20你【绝对禁止】扮演“','<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>','dyJsi','player-title','数据结构升级：成功救援了\x20','未知歌曲','custom-icon-list-container','\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','StnFx','Otbbi','PcuUR','</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>','DRTXH','snoop-home-clock','EJHmc','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','搜索失败:\x20','yYKff','VcIbd','uWKMR','save-event-button','\x0a\x20\x20\x20\x20</div>','tFJZo','review','EAzyK','HrqYy','anthropic','https://sharkpan.xyz/f/djyi8/1en214.jpg','检测到已保存的字体，正在应用...','group-delete','edit-delete-char-button','选择聊天','yTFqF','className','fFHuz','padStart','fEOyY','important','薄荷水色','character','altar-slot-lyrics','.music-post-song-card','backgroundColor','<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>','AsiqP','disabled','JYZaY','QHiXI','IerNd','widget_card','https://sharkpan.xyz/f/v0qcL/dio7j0.jpg','badge-image','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>','isDMPanelVisible','\x20天没活动了。你生成的内容必须是全新的事件。\x0a','tNRuN','PHWkc','OeufP','chat-sticker-button','群聊至少需要2名成员。','\x20张旧图片。应用即将刷新。','<div\x20class=\x22snoop-app-content\x22>','remark','>>\x20','card-image','lt-ui-close-btn','mAntS','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a#\x20今日消费流水\x0a','稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书。非强制性，只是手机会有点卡，想继续聊下去也可以。','speechIndex',']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[','\x20/\x20','Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.','在直播中进行了侧面回应。\x22\x0a\x20\x20\x20\x20','important-day-item','translateY(-','https://sharkpan.xyz/f/kjOF6/zedyqb.jpg','\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a','system','获取AI响应失败:','Upgrading\x20database\x20to\x20version\x20','升级已取消。旧版图片数据可能导致应用卡顿或出错。','event_ai_','https://sharkpan.xyz/f/MWOIa/rb3nov.jpg','code','音乐搜索失败:\x20','trim','<p\x20class=\x22music-post-thought\x22>','tdIxq','wallpaper','px)','处理\x20','YZcqU','加载直播间设置失败:','JoUav','\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','data','WKihe','btOhz','BwHXU','fKkia','已放逐。','vOlhF','fawxo','\x0a\x0a#\x20你的个人记忆\x20(来自所有App)\x0a---\x0a','PbrJW','sprite-confirm-button','user-avatar-preview','is-entering-from-left','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','characterId','一起听歌','div','歌名和歌手都不能为空！','checked','shy','shiftKey','pGkQC','-\x20上次第\x20','\x0a\x20\x20\x20\x20<div\x20>\x20','YMJyX','mYjxl','lzOlY','deletedStickers','正在解析音乐灵魂...','widgetBgImage','Ezwqw','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>','back-to-livestream-from-replays','apiSettings','RwunH','Hosxr','MguKF','delete-friend-circle-button','\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','upload-widget-bg-button','名字不能为空！','\x0a-\x20**对话状态**:\x20群里已经有','uMqBz','LdPOF','fYhWQ','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20','-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a','未知时间','mouseup','circle_','我错了','calendar','toDateString','livestream-textbox-container','”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。','OxDLG','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>','角色已保存！','\x0a\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22snoop-log-back-btn\x22\x20class=\x20\x22snoop-app-header-button\x22\x20style\x20=\x20\x22text-align:\x20left;\x22\x20>‹\x20聊天</button\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>','星期五','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>','yqABj','jSXTb','准备调用\x20generateAs...','error','71%','oWMgz','卡片已更换！','医疗健康','#settings-screen\x20.content','music_cover_','OlDQd','\x20记录)\x0a','audio','---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---','gvTzh','change','stretch','#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked','未找到可用模型。','background','fKHfu','JuTyn','yraFP','POST','player-next-btn','option','marginBottom','forEach','\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20任务指令\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**开场白**:\x20根据直播主题和你的性格，生成一段自然、生动的开场白。这段话应该被拆分成\x206-8\x20句，放在\x20\x22streamerSpeech\x22\x20数组里。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**弹幕生成**:\x20模拟一群性格各异的观众，生成\x205-8\x20条符合初始情绪的弹幕。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**初步互动**:\x20你的开场白应该与其中\x201-2\x20条弹幕进行简单的互动。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20【绝对禁止】伪造成','LhPzw','removeProperty','\x20行格式不对，被我无视了。','小时前），可以简单问候一下对方现在的状态。\x0a','lastChild','sort','樱花薄粉','PxGng','[AI返回了无法解析的剧本:\x20','slice','我不想工作','setMonth','appIconPosition_app-diary','小花花','clear','push','accounting-screen','dJhqU','outerHTML','upload-font-button','group-avatar-preview','char-edit-sprite-','</span><span\x20class=\x22unit\x22>天</span>','OyeSl','XWHDL','\x0a\x20\x20人设:\x20','解析存档失败，正在重置:','aTgoR','导入失败:\x20','livestream-header-right','.app-icon-img','<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>','cqrZd','hIPMr','确定要结束本次直播吗？结束后将为你生成本场回放。','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>','prLya','vmGEP','cYOog','characterEdit','characterName','model-dropdown','LSOPO','KPdZQ','ZhYUO','<div\x20style\x20=\x20\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>\x20','diaryPressTimer','https://sharkpan.xyz/f/ljVCx/b16h2z.jpg','NNOwh','EvksN','未知搜索','https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg','song_','yQDMp','TXZOo','<div\x20class=\x22snoop-main-grid\x22></div>','直播总结已生成！','fhKsU','29%','Noir\x27s\x20Log:\x20发现直播存档，正在恢复现场...','净化完成！总共迁移了\x20','请输入有效的转账金额！','OQmaP','\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','customStickers','QyPlF','WRrhn','toFixed','好了，请基于以上所有信息，开始写今天的日记吧。','ljlzh','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>','themeHue','创建新用户','已恢复默认。','获取中…','#diary-action-reroll','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>','is-exiting-left','XKWRy','inline-block','未分类','DmrVo','cos','QbxVV','</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20','snoop-dock','/v1beta/models/','2px\x20dashed\x20var(--border-color)','ClRkW','vbAvN','time','chat-music-button','eJFCl','---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---','收到的原始、有问题的文本:','确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！','<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>','https://xhslink.com/m/5IgC1rniI2I','你是一个乐于助人的AI助手。','tsQyp','transition','Ywysk','originalExpenses','星期一','listenTogetherSession','zOtCu','有点生气','home-date','https://sharkpan.xyz/f/0GKHX/mthvno.jpg','请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a','1.4','默认分类','\x0a\x0a#\x20直播完整记录\x20(全文)\x0a\x0a','救援头像时出错:','activeDiaryCharacterId','group-options-cancel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','VTUjk','livestream_bg_','anliH','---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---','assistant','zzxXv','哼，你的压缩包里连最基本的音频和信息文件都没有！','好友圈数据升级完成，迁移了\x20','\x0a<div\x20class=\x22replay-icon\x22\x20style=\x22font-size:\x201.5rem;\x22>\x0a\x20\x20\x20\x20<span>📼</span>\x0a</div>\x0a<div\x20class=\x22replay-info\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22theme\x22>','chat_group_','\x22\x20class=\x22char-name\x22>','gWVHr','<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>','我正在说话呢，别打岔！','0\x202px\x208px\x20rgba(0,0,0,0.4)','currentLivestreamSpeechQueue','BFVNt','TCWSW','TgGJC','找不到角色。','isOffline','rGYxC','https://api.vkeys.cn/v2/music/','sprite-adjust-button','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>','clockPosition','touchend','addEventListener','aYXSF','Xmqmz','speaker-user','\x0a---\x0a','nwXVU','”，在那里“','#message-anchor','OQuOT','最后一次确认，真的要清空所有数据吗？','TEvtM','购物消费','zh-CN','#\x20固定分类列表\x0a[','uCcIm','MIvgP','backgroundImage','1435544xyTcRP','newAvatar','#snoop-app-view-container\x20.snoop-app-content','nCsLq','save-char-button','\x0a#\x20你的日程与纪念日\x20(由\x20','cancel-action-button','FduVH','TAMAE','whispers','dCNDJ'];_0xf6e1=function(){return _0xb28c6f;};return _0xf6e1();}function _0x4aca47(_0x597419,_0x520dc1,_0x5b0adc){const _0xd3f34b=_0x1ad1ef,_0x10059f=_0x54c272=>{const _0x17782f=_0x53d2;if(_0x17782f(0x299)!=='ezuTt'){if(_0x706055){_0x38c1b6[_0x17782f(0xa19)][_0x17782f(0x52b)](_0x17782f(0x3fe));const _0x2d35bd=_0x5d963d[_0x17782f(0x820)](_0x17782f(0x285));_0x37fd29[_0x17782f(0xa19)]['toggle']('active',!!_0x2d35bd);}else _0x4bd90f(_0x597edb);}else{if(_0x54c272[_0x17782f(0xcd4)]===_0x17782f(0x8ed))return _0x543bea['userProfile']?.[_0x17782f(0x41a)]||_0x17782f(0x48a);if(_0x597419[_0x17782f(0x711)]===_0x17782f(0x91b)){const _0x389e16=_0x54c272['senderId']?_0x48d319(_0x54c272['senderId']):null;return _0x389e16?.['name']||'Unknown';}else{const _0x465a16=_0x48d319(_0x597419[_0x17782f(0x184)][0x0]);return _0x465a16?.['name']||'AI';}}},_0x711b3d=_0x520dc1[_0xd3f34b(0xb41)](-_0x5b0adc),_0x9929b=[];for(const _0x4bdd10 of _0x711b3d){const _0xf921a0=new Date(_0x4bdd10[_0xd3f34b(0x11f)]),_0x47c047=String(_0xf921a0[_0xd3f34b(0xc3f)]()+0x1)['padStart'](0x2,'0'),_0x303ff3=String(_0xf921a0[_0xd3f34b(0x3d6)]())[_0xd3f34b(0xa9f)](0x2,'0'),_0x407e47=String(_0xf921a0[_0xd3f34b(0x8bb)]())[_0xd3f34b(0xa9f)](0x2,'0'),_0x47cbf1=String(_0xf921a0['getMinutes']())[_0xd3f34b(0xa9f)](0x2,'0'),_0x1d1f92=_0x47c047+'-'+_0x303ff3+'\x20'+_0x407e47+':'+_0x47cbf1,_0x192b71=_0x4bdd10[_0xd3f34b(0xbc1)]?_0xd3f34b(0x2e6):_0xd3f34b(0x7f6);if(_0x4bdd10[_0xd3f34b(0x297)]){if(_0xd3f34b(0x2ad)===_0xd3f34b(0x166))_0x233932[_0xd3f34b(0xb1e)]('Error\x20fetching\x20from\x20'+_0x4f4ce6+':',_0x211a0e);else{const _0x30305e=_0x4bdd10[_0xd3f34b(0xbc1)]?String(_0x4bdd10[_0xd3f34b(0x297)])[_0xd3f34b(0xad4)]()['replace'](/\n+/g,'\x20'):String(_0x4bdd10[_0xd3f34b(0x297)])[_0xd3f34b(0xad4)]();if(_0x30305e)_0x9929b[_0xd3f34b(0xb47)](_0x192b71+'\x20['+_0x1d1f92+_0xd3f34b(0x98c)+_0x10059f(_0x4bdd10)+']\x20'+_0x30305e);}}}return _0x9929b;}function _0x16b579(_0x23a37b){const _0x293f4e=_0x1ad1ef;if(_0x23a37b[_0x293f4e(0x711)]===_0x293f4e(0x91b))return _0x293f4e(0x8c9)+(_0x23a37b[_0x293f4e(0x41a)]||_0x293f4e(0x154))+'」';const _0x2815b8=_0x48d319(_0x23a37b[_0x293f4e(0x184)][0x0]);return'与\x20'+(_0x2815b8?.[_0x293f4e(0x41a)]||_0x293f4e(0x4c3))+_0x293f4e(0xcf4);}function _0x3e4812(_0x2949b3){const _0x356a4e=_0x1ad1ef;try{if(_0x356a4e(0x7c7)==='GTGys'){const _0x48e2a1=_0x2407ac['split'](/:\s(.+)/);if(_0x48e2a1[_0x356a4e(0xc1f)]>0x1){const _0xbb8a2e=_0x48e2a1[0x0][_0x356a4e(0xad4)](),_0x2d3672=_0x48e2a1[0x1]['trim']()[_0x356a4e(0x6ac)](/^"|"$/g,'');_0x7839c8[_0xbb8a2e]=_0x2d3672;}}else{const _0x25440c=localStorage[_0x356a4e(0x760)](_0x356a4e(0x74f)+_0x2949b3),_0x34b1ce=JSON['parse'](_0x25440c||'[]');return Array[_0x356a4e(0x8e1)](_0x34b1ce)?_0x34b1ce:[];}}catch{return[];}}function _0x201955(_0x4a31a6){const _0x33c42e=_0x1ad1ef,_0x4ed300=Math['max'](0x1,Number(_0x543bea['preferences']?.[_0x33c42e(0x5eb)]??0x64)),_0x3dbd9e=_0x543bea[_0x33c42e(0x94b)][_0x33c42e(0x78c)](_0x3b0435=>_0x3b0435[_0x33c42e(0x184)][_0x33c42e(0x32d)](_0x4a31a6)),_0x4f30dd=_0x3dbd9e[_0x33c42e(0x257)](_0x1dbe5a=>{const _0x17c8d8=_0x33c42e,_0x555121=_0x3e4812(_0x1dbe5a['id']),_0x2abf4e=_0x555121['length']>0x0?_0x555121[_0x555121['length']-0x1]:null;return{'chat':_0x1dbe5a,'history':_0x555121,'lastTimestamp':_0x2abf4e?_0x2abf4e[_0x17c8d8(0x11f)]:0x0};})[_0x33c42e(0x78c)](_0x1b0594=>_0x1b0594[_0x33c42e(0x8de)][_0x33c42e(0xc1f)]>0x0);_0x4f30dd[_0x33c42e(0xb3d)]((_0x174a90,_0x497703)=>_0x497703['lastTimestamp']-_0x174a90[_0x33c42e(0x48b)]);const _0x3f2c27=[],_0x576867={};return _0x4f30dd['forEach']((_0x36a28e,_0x1beb86)=>{const _0x2964d2=_0x33c42e,_0xd0c8b2=_0x4aca47(_0x36a28e['chat'],_0x36a28e['history'],_0x4ed300);if(_0xd0c8b2[_0x2964d2(0xc1f)]===0x0)return;const _0x5ac9ac=_0x1beb86===0x0?'来源：[最活跃]':'来源：';_0x3f2c27[_0x2964d2(0xb47)](_0x2964d2(0x80b)+_0x5ac9ac+_0x16b579(_0x36a28e[_0x2964d2(0x69f)])+'\x0a'+_0xd0c8b2['join']('\x0a')),_0x576867[_0x36a28e[_0x2964d2(0x69f)]['id']]=_0xd0c8b2[_0x2964d2(0xc1f)];}),{'omniText':_0x3f2c27[_0x33c42e(0x4db)]('\x0a\x0a'),'usedCounts':_0x576867};}function _0x2cf2bf(_0x2408c5){const _0x43b010=_0x1ad1ef;let _0x5f577e=null;const _0x19a67f=_0x543bea['chats'][_0x43b010(0x78c)](_0x2b5146=>_0x2b5146['participantIds'][_0x43b010(0x32d)](_0x2408c5));for(const _0x12b48f of _0x19a67f){const _0x30b588=_0x3e4812(_0x12b48f['id']);if(_0x30b588&&_0x30b588[_0x43b010(0xc1f)]>0x0){if(_0x43b010(0xb86)!==_0x43b010(0x443)){const _0x2b19aa=_0x30b588[_0x30b588[_0x43b010(0xc1f)]-0x1];(!_0x5f577e||_0x2b19aa[_0x43b010(0x11f)]>_0x5f577e['timestamp'])&&(_0x5f577e=_0x2b19aa);}else _0x32c140[_0x43b010(0x9cb)](),_0x26197f();}}return _0x5f577e;}function _0x307715(_0xb3c002){const _0xe10c5b=_0x1ad1ef;if(!_0xb3c002||!_0xb3c002[_0xe10c5b(0x32d)](','))return _0xb3c002;const _0x5a7d50=_0xb3c002[_0xe10c5b(0x2bf)](',')['map'](_0x205a1b=>_0x205a1b[_0xe10c5b(0xad4)]());return _0x5a7d50[Math[_0xe10c5b(0x498)](Math['random']()*_0x5a7d50[_0xe10c5b(0xc1f)])];}function _0x44efa2(_0x4361da){return new Promise(_0x1ec5e9=>{const _0x36a72b=_0x53d2,_0xd01bc0=document[_0x36a72b(0x51d)](_0x36a72b(0x204)),_0x439dc9=document[_0x36a72b(0x51d)](_0x36a72b(0x420)),_0x56b658=document[_0x36a72b(0x51d)](_0x36a72b(0xc27)),_0x2d20b0=document['getElementById'](_0x36a72b(0x9ea)),_0x39fcd5=document[_0x36a72b(0x51d)]('modal-mask');_0x439dc9[_0x36a72b(0x32a)]=_0x4361da,_0xd01bc0['style']['display']=_0x36a72b(0x338);const _0x53a07=_0x38123a=>{const _0x5bbc6d=_0x36a72b;_0xd01bc0[_0x5bbc6d(0x1e2)]['display']=_0x5bbc6d(0x2f6),_0x56b658[_0x5bbc6d(0x50e)]=_0x2d20b0[_0x5bbc6d(0x50e)]=_0x39fcd5[_0x5bbc6d(0x50e)]=null,document[_0x5bbc6d(0x2ec)](_0x5bbc6d(0x830),_0x539084),_0x1ec5e9(_0x38123a);},_0x539084=_0x5a8d2e=>{const _0x44fa7e=_0x36a72b;if('jqojY'!==_0x44fa7e(0xccf)){if(_0x5a8d2e['key']===_0x44fa7e(0x959))_0x53a07(![]);if(_0x5a8d2e['key']===_0x44fa7e(0x778))_0x53a07(!![]);}else{const _0x5d8fa7=_0x19b5e2['value'];_0x242fea[_0x44fa7e(0x1e2)][_0x44fa7e(0xcac)](_0x44fa7e(0xd10),_0x5d8fa7),_0x1e891c[_0x44fa7e(0xa1c)](_0x44fa7e(0x99c),_0x5d8fa7);}};_0x56b658[_0x36a72b(0x50e)]=()=>_0x53a07(!![]),_0x2d20b0[_0x36a72b(0x50e)]=()=>_0x53a07(![]),_0x39fcd5[_0x36a72b(0x50e)]=()=>_0x53a07(![]),document[_0x36a72b(0xbc8)]('keydown',_0x539084);});}function _0x48e450(_0x57fb43){const _0x38e22a=_0x1ad1ef,_0x43f2eb=document[_0x38e22a(0x51d)](_0x38e22a(0x339));_0x43f2eb['textContent']=_0x57fb43,_0x43f2eb[_0x38e22a(0x1e2)][_0x38e22a(0x930)]=_0x38e22a(0x94a);if(_0x48e450['_t'])clearTimeout(_0x48e450['_t']);_0x48e450['_t']=setTimeout(()=>{const _0x3cc788=_0x38e22a;'Xmcsx'!=='Xmcsx'?(_0x241ada['worldBookCategories']=[{'id':'default','name':_0x3cc788(0xba7)}],_0x34de75['worldBooks'][_0x3cc788(0xb36)](_0x221ad9=>{const _0x6b1f1b=_0x3cc788;!_0x221ad9[_0x6b1f1b(0x903)]&&(_0x221ad9[_0x6b1f1b(0x903)]='default');})):_0x43f2eb[_0x3cc788(0x1e2)][_0x3cc788(0x930)]=_0x3cc788(0x2f6);},0x640);}function _0x4bc8eb(){const _0x4f4b1c=_0x1ad1ef,_0x5e7c51=document['getElementById'](_0x4f4b1c(0x1ab));if(!_0x5e7c51)return;let _0x310e02=0x0,_0x162ba4=0x0;const _0x326981=0x50;let _0x3b07b0=![];const _0x4cc25d=_0x5ae481=>{const _0x546ff8=_0x4f4b1c;_0x310e02=_0x5ae481[_0x546ff8(0xd1d)]?_0x5ae481[_0x546ff8(0xd1d)][0x0][_0x546ff8(0x496)]:_0x5ae481['clientY'],_0x162ba4=0x0,_0x5e7c51[_0x546ff8(0x1e2)][_0x546ff8(0xb9c)]=_0x546ff8(0x2f6),_0x3b07b0=!![];if(_0x5ae481[_0x546ff8(0x711)]==='mousedown'){if(_0x546ff8(0x55f)===_0x546ff8(0x55f))document[_0x546ff8(0xbc8)](_0x546ff8(0x9a6),_0x354ae6),document['addEventListener'](_0x546ff8(0xb0e),_0x4f70c3);else{_0x30cbe7(_0x546ff8(0x179));return;}}},_0x354ae6=_0x26abff=>{const _0x3cf489=_0x4f4b1c;if(!_0x3b07b0)return;const _0x2ab39c=_0x26abff[_0x3cf489(0xd1d)]?_0x26abff[_0x3cf489(0xd1d)][0x0]['clientY']:_0x26abff[_0x3cf489(0x496)];_0x162ba4=_0x2ab39c-_0x310e02;if(_0x162ba4<0x0){if(_0x3cf489(0x83c)!=='OlNlI'){if(_0x33962e[_0x3cf489(0x405)])return;const _0x1d6553=_0x3a2c03['diaryCurrentPage'],_0x2f15d2=_0x3bba1a[_0x3cf489(0xd21)](_0x2acfdb[_0x3cf489(0x12b)]['find'](_0x1792a7=>_0x1792a7[_0x3cf489(0xaec)]===_0x55bfda['activeDiaryCharacterId'])['entries'][_0x3cf489(0xc1f)]/0x2);if(_0x1d6553>=_0x2f15d2-0x1)return;_0x35bbe6[_0x3cf489(0x405)]=!![];const _0x25ad98=_0x1d6553+0x1,_0x5b0ed9=_0x333ca8['getElementById']('diary-page-'+_0x1d6553),_0x5a25f7=_0x5572ee[_0x3cf489(0x51d)](_0x3cf489(0x157)+_0x25ad98);_0x5b0ed9&&_0x5a25f7?(_0x5a25f7[_0x3cf489(0xa19)][_0x3cf489(0x25d)](_0x3cf489(0x715)),_0x5b0ed9[_0x3cf489(0xa19)][_0x3cf489(0x25d)](_0x3cf489(0xb85)),_0x5a25f7[_0x3cf489(0xa19)][_0x3cf489(0x25d)](_0x3cf489(0x167)),_0x1ad389(()=>{const _0x523531=_0x3cf489;_0x5b0ed9[_0x523531(0xa19)]['remove'](_0x523531(0x167),_0x523531(0xb85)),_0x5a25f7['classList'][_0x523531(0xab0)]('is-entering-from-right'),_0x13bfa5['diaryCurrentPage']=_0x25ad98,_0x3072fb(),_0x1c18ee['isAnimatingDiary']=![];},0x2bc)):_0x4d7d2[_0x3cf489(0x405)]=![];}else{const _0x21b978=Math[_0x3cf489(0x95c)](_0x162ba4),_0x5f5f5f=0.4,_0x11ccd8=Math[_0x3cf489(0x660)](_0x21b978,_0x5f5f5f)*0x14;_0x5e7c51['style'][_0x3cf489(0x424)]=_0x3cf489(0xac9)+_0x11ccd8+_0x3cf489(0xad8);}}},_0x4f70c3=()=>{const _0xc11b3c=_0x4f4b1c;if('izbwM'===_0xc11b3c(0xb0a))!_0x1810ae['classList'][_0xc11b3c(0x9ff)](_0xc11b3c(0x65d))&&_0x3e88aa[_0xc11b3c(0xab0)]();else{if(!_0x3b07b0)return;_0x3b07b0=![],_0x5e7c51['style'][_0xc11b3c(0xb9c)]='transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease',_0x162ba4<-_0x326981?_0xc11b3c(0x335)!==_0xc11b3c(0x65e)?_0x5e7c51[_0xc11b3c(0xa19)]['add'](_0xc11b3c(0x5be)):_0x97af32(![]):_0x5e7c51[_0xc11b3c(0x1e2)][_0xc11b3c(0x424)]=_0xc11b3c(0x6aa),document['removeEventListener'](_0xc11b3c(0x9a6),_0x354ae6),document[_0xc11b3c(0x2ec)](_0xc11b3c(0xb0e),_0x4f70c3);}};_0x5e7c51[_0x4f4b1c(0xbc8)]('touchstart',_0x4cc25d,{'passive':!![]}),_0x5e7c51[_0x4f4b1c(0xbc8)](_0x4f4b1c(0x5ad),_0x354ae6,{'passive':!![]}),_0x5e7c51['addEventListener']('touchend',_0x4f70c3),_0x5e7c51[_0x4f4b1c(0xbc8)](_0x4f4b1c(0x57e),_0x4cc25d);}function _0x14f576(){const _0x2ce59f=_0x1ad1ef,_0x5a4b45=document[_0x2ce59f(0x51d)](_0x2ce59f(0x1b5)),_0x464eca=document[_0x2ce59f(0x51d)](_0x2ce59f(0x6d8)),_0x180377=document[_0x2ce59f(0x5c4)](_0x2ce59f(0x35b)),_0x2738b3=document[_0x2ce59f(0x51d)](_0x2ce59f(0x604));let _0x2b93ed=0x0;const _0x21030a=0x2;_0x464eca[_0x2ce59f(0x1e2)][_0x2ce59f(0x34a)]=_0x2ce59f(0xc15),_0x2738b3['style'][_0x2ce59f(0x930)]='flex';function _0x1ee735(_0x33069a){const _0xc3b754=_0x2ce59f;if(_0x33069a<0x0||_0x33069a>=_0x21030a)return;_0x464eca[_0xc3b754(0x1e2)]['transform']=_0xc3b754(0xc5f)+_0x33069a*(0x64/_0x21030a)+'%)',_0x180377[_0xc3b754(0xb36)](_0x5b4421=>_0x5b4421[_0xc3b754(0xa19)][_0xc3b754(0xab0)](_0xc3b754(0x215))),_0x180377[_0x33069a]['classList'][_0xc3b754(0x25d)](_0xc3b754(0x215)),_0x2b93ed=_0x33069a;}_0x1ee735(0x0),_0x180377[_0x2ce59f(0xb36)](_0x455cdd=>{const _0x5ef3e6=_0x2ce59f;_0x455cdd[_0x5ef3e6(0xbc8)](_0x5ef3e6(0x779),()=>{const _0x2758fd=_0x5ef3e6;if(_0x2758fd(0xd1b)!=='UNwBe'){const _0x214109=parseInt(_0x455cdd['dataset']['page'],0xa);_0x1ee735(_0x214109);}else _0xcf52b7[_0x2758fd(0x68b)]('Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。'),_0x25e405[_0x2758fd(0x383)]=[],_0x4afa4e[_0x2758fd(0xbbc)]=[],_0x4747f3[_0x2758fd(0x249)]=-0x1,_0x2c7852[_0x2758fd(0x1a2)]=[],_0x45b1b1[_0x2758fd(0x32a)]=_0x2758fd(0x7cc),_0x535d25[_0x2758fd(0x51d)]('start-livestream-btn-container')[_0x2758fd(0x1e2)]['display']=_0x2758fd(0x94a),_0x3a1ba8['getElementById'](_0x2758fd(0x8ec))[_0x2758fd(0x1e2)][_0x2758fd(0x930)]=_0x2758fd(0x2f6);});});let _0x4c1c89=0x0,_0x51e9b3=0x0,_0x213ece=0x0,_0x5820a7=![],_0x180fac='';_0x5a4b45[_0x2ce59f(0xbc8)](_0x2ce59f(0x897),_0x317189=>{const _0x1eee36=_0x2ce59f;_0x1eee36(0xa8e)!==_0x1eee36(0xa8e)?_0x5c49a3[_0x1eee36(0x1a0)]({'behavior':_0x1eee36(0x3ee),'block':_0x1eee36(0xa18)}):(_0x4c1c89=_0x317189[_0x1eee36(0xd1d)][0x0][_0x1eee36(0x148)],_0x51e9b3=_0x317189[_0x1eee36(0xd1d)][0x0]['clientY'],_0x5820a7=!![],_0x180fac='');},{'passive':!![]}),_0x5a4b45[_0x2ce59f(0xbc8)]('touchmove',_0xaa6e6d=>{const _0x3a85c7=_0x2ce59f;if(!_0x5820a7)return;if(_0x180fac===''){const _0x146e0e=_0xaa6e6d[_0x3a85c7(0xd1d)][0x0][_0x3a85c7(0x148)]-_0x4c1c89,_0x43d48b=_0xaa6e6d[_0x3a85c7(0xd1d)][0x0][_0x3a85c7(0x496)]-_0x51e9b3;Math[_0x3a85c7(0x95c)](_0x146e0e)>Math[_0x3a85c7(0x95c)](_0x43d48b)?_0x180fac=_0x3a85c7(0x64c):_0x180fac=_0x3a85c7(0x437);}_0x180fac===_0x3a85c7(0x64c)&&_0xaa6e6d['preventDefault']();},{'passive':![]}),_0x5a4b45[_0x2ce59f(0xbc8)](_0x2ce59f(0xbc7),_0x38b47b=>{const _0x4f4344=_0x2ce59f;if(!_0x5820a7)return;_0x213ece=_0x38b47b['changedTouches'][0x0][_0x4f4344(0x148)],_0x180fac===_0x4f4344(0x64c)&&_0x183cda(),_0x5820a7=![];});function _0x183cda(){const _0x38a8e5=_0x2ce59f,_0x548fd8=0x32;if(_0x213ece<_0x4c1c89-_0x548fd8)_0x38a8e5(0x1e9)==='cOjdn'?_0x4ef816[_0x38a8e5(0x51d)](_0x38a8e5(0xa4a))[_0x38a8e5(0xbc8)](_0x38a8e5(0x779),()=>{const _0x446fb2=_0x38a8e5,_0xcc575d=_0xea03ac[_0x446fb2(0x51d)](_0x446fb2(0x880));_0xcc575d[_0x446fb2(0x22c)](),_0x12993e[_0x446fb2(0x916)]('copy'),_0x216c0a(_0x446fb2(0xc86));}):_0x1ee735(_0x2b93ed+0x1);else _0x213ece>_0x4c1c89+_0x548fd8&&_0x1ee735(_0x2b93ed-0x1);}}function _0x357cce(){return new Promise(_0x4e2041=>{const _0x9b4237=_0x53d2,_0x2322e2=document['getElementById']('music-input-modal'),_0x4e503c=document[_0x9b4237(0x51d)](_0x9b4237(0x29e)),_0x483fcc=document[_0x9b4237(0x51d)](_0x9b4237(0x35f)),_0x22ddc8=document[_0x9b4237(0x51d)](_0x9b4237(0x3f4)),_0x43f895=document[_0x9b4237(0x51d)](_0x9b4237(0x16a)),_0x43b4b7=document[_0x9b4237(0x51d)](_0x9b4237(0x3ac));_0x4e503c[_0x9b4237(0x90f)]='',_0x483fcc[_0x9b4237(0x90f)]='',_0x2322e2[_0x9b4237(0xa19)]['add'](_0x9b4237(0x6db)),_0x4e503c[_0x9b4237(0x72b)]();const _0x4d5a4c=_0x30535f=>{const _0x5e5145=_0x9b4237;_0x2322e2[_0x5e5145(0xa19)]['remove'](_0x5e5145(0x6db)),_0x22ddc8[_0x5e5145(0x50e)]=null,_0x43f895['onclick']=null,_0x43b4b7['onclick']=null,document[_0x5e5145(0x2ec)](_0x5e5145(0x830),_0x2b3a34),_0x4e2041(_0x30535f);},_0x290641=()=>{const _0x61ec29=_0x9b4237;if(_0x61ec29(0xca4)!==_0x61ec29(0x4f3)){const _0x4df97b=_0x4e503c[_0x61ec29(0x90f)]['trim'](),_0x4bf666=_0x483fcc[_0x61ec29(0x90f)][_0x61ec29(0xad4)]();if(!_0x4df97b||!_0x4bf666){if(_0x61ec29(0x2ab)==='kzgVl'){_0x48e450(_0x61ec29(0xaef));return;}else{const _0x136c3b=_0x4b9c59[_0x61ec29(0xcb2)](_0x2687b6);_0x1e1443[_0x61ec29(0x2d9)]=_0x136c3b,_0x40d193[_0x61ec29(0x14a)]=()=>_0x5b7eee['revokeObjectURL'](_0x136c3b);}}_0x4d5a4c({'songName':_0x4df97b,'artist':_0x4bf666});}else _0x5f643(_0x14b83a,_0x61ec29(0x8a7));},_0x2b3a34=_0x36568a=>{const _0x3c9cd7=_0x9b4237;if(_0x3c9cd7(0x598)===_0x3c9cd7(0xb31))_0xaf48ea=_0x93a5d2[_0x3c9cd7(0x78c)](_0x4d7c67=>_0x4d7c67&&typeof _0x4d7c67===_0x3c9cd7(0x60b)&&typeof _0x4d7c67['role']===_0x3c9cd7(0x2b1)&&typeof _0x4d7c67[_0x3c9cd7(0x297)]!==_0x3c9cd7(0x18e));else{if(_0x36568a[_0x3c9cd7(0xc7f)]===_0x3c9cd7(0x959))_0x4d5a4c(null);_0x36568a[_0x3c9cd7(0xc7f)]===_0x3c9cd7(0x778)&&(_0x36568a['preventDefault'](),_0x290641());}};_0x22ddc8['onclick']=_0x290641,_0x43f895['onclick']=()=>_0x4d5a4c(null),_0x43b4b7[_0x9b4237(0x50e)]=()=>_0x4d5a4c(null),document[_0x9b4237(0xbc8)]('keydown',_0x2b3a34);});}function _0x3b679a(_0x4e31b4){const _0x45c714=_0x1ad1ef;if(!_0x4e31b4)return[];const _0x27ba55=_0x4e31b4[_0x45c714(0xad4)]();if(_0x27ba55[_0x45c714(0xca0)]('<div')&&_0x27ba55[_0x45c714(0x159)]('</div>'))return[_0x27ba55];const _0x525e4f=/(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\])/g,_0x4cdaff=_0x45c714(0x991),_0x532305=[],_0x23e07d=_0x4e31b4[_0x45c714(0x6ac)](_0x525e4f,_0x80f1ed=>{const _0x34d67a=_0x45c714;return _0x532305[_0x34d67a(0xb47)](_0x80f1ed),_0x4cdaff;}),_0x2d1477=_0x23e07d[_0x45c714(0x2bf)](_0x4cdaff),_0x443214=[];let _0x49bc64=0x0;return _0x2d1477[_0x45c714(0xb36)]((_0x4c975b,_0x1a9948)=>{const _0x6a9c8a=_0x45c714,_0x3cbe10=_0x4c975b[_0x6a9c8a(0xad4)]();_0x3cbe10&&_0x443214['push'](..._0x305437(_0x3cbe10)),_0x49bc64<_0x532305[_0x6a9c8a(0xc1f)]&&(_0x443214[_0x6a9c8a(0xb47)](_0x532305[_0x49bc64][_0x6a9c8a(0xad4)]()),_0x49bc64++);}),_0x443214;}function _0x4fc2a0(_0x4a9ccf,_0x1eefe9,_0x522b72=''){const _0x2c8698=_0x1ad1ef,_0xda5873=document[_0x2c8698(0x23f)](_0x2c8698(0xaee));_0xda5873[_0x2c8698(0xa9d)]=_0x2c8698(0xa43)+_0x522b72;const _0x542c9d=document[_0x2c8698(0x23f)](_0x2c8698(0x93f));_0x542c9d[_0x2c8698(0x2d9)]=_0x4a9ccf,_0x542c9d[_0x2c8698(0xa9d)]=_0x2c8698(0x5ec);const _0x32c581=document['createElement']('div');return _0x32c581['className']=_0x2c8698(0xbed),_0x1eefe9&&(_0x32c581['style'][_0x2c8698(0xbd8)]=_0x2c8698(0x744)+_0x1eefe9+'\x27)'),_0xda5873['appendChild'](_0x542c9d),_0xda5873[_0x2c8698(0x83b)](_0x32c581),_0xda5873;}function _0x4f4f5c(_0x17a3b9){const _0xacb787=_0x1ad1ef;if(!_0x17a3b9)return[];let _0x55bc49=String(_0x17a3b9)['trim']();const _0x217498=_0x55bc49['match'](/```(?:json)?([\s\S]*?)```/i);if(_0x217498)_0x55bc49=_0x217498[0x1]['trim']();try{const _0x15dedf=JSON[_0xacb787(0x576)](_0x55bc49);if(_0x15dedf&&Array[_0xacb787(0x8e1)](_0x15dedf[_0xacb787(0x34d)]))return _0x15dedf[_0xacb787(0x34d)][_0xacb787(0x257)](_0x567786=>typeof _0x567786===_0xacb787(0x2b1)?_0x567786:_0x567786?.[_0xacb787(0x297)])[_0xacb787(0x78c)](Boolean)[_0xacb787(0x355)](_0x305437);const _0x352cc3=[_0xacb787(0x798),'dialogue','message',_0xacb787(0x685),_0xacb787(0x297),_0xacb787(0x3c2),'utterance'];if(_0x15dedf&&typeof _0x15dedf===_0xacb787(0x60b)){if(_0xacb787(0x25c)!==_0xacb787(0x562)){const _0xf970cc=[];for(const _0x4a8251 of Object[_0xacb787(0x4fa)](_0x15dedf)){if(_0xacb787(0x347)===_0xacb787(0x448))_0x1a8342[_0xacb787(0xb47)]({'role':_0xacb787(0x8ed),'content':_0x4efa4c}),_0x3993d8[_0xacb787(0xb47)]({'role':_0xacb787(0xbb1),'content':_0xacb787(0x1f5)});else{const _0x2fdab1=_0x4a8251[_0xacb787(0x196)]();if(_0x352cc3[_0xacb787(0x66a)](_0x18a49e=>_0x2fdab1[_0xacb787(0xca0)](_0x18a49e))){const _0x4c1190=_0x15dedf[_0x4a8251];if(typeof _0x4c1190===_0xacb787(0x2b1))_0xf970cc[_0xacb787(0xb47)](_0x4c1190);if(Array[_0xacb787(0x8e1)](_0x4c1190))_0x4c1190['forEach'](_0x4fc1e2=>{const _0x248bf5=_0xacb787;if(_0x248bf5(0x709)!=='QrjEs')_0x461666[_0x248bf5(0x2d9)]=_0x248bf5(0xa2b),_0x2be8bb(_0x1f20df[_0x248bf5(0x7c2)])['then'](_0x33914c=>{const _0x2a424d=_0x248bf5;if(_0x33914c)_0xaca1c2[_0x2a424d(0x2d9)]=_0xd04b39['createObjectURL'](_0x33914c);else _0x26768a['alt']=_0x2a424d(0x5cb);})[_0x248bf5(0x634)](()=>_0x589ed5[_0x248bf5(0x471)]=_0x248bf5(0x5cb));else{if(typeof _0x4fc1e2===_0x248bf5(0x2b1))_0xf970cc['push'](_0x4fc1e2);}});}}}if(_0xf970cc[_0xacb787(0xc1f)])return _0xf970cc['flatMap'](_0x305437)['slice'](0x0,0x9);}else _0x49c6cd(_0x87ca31['id']);}}catch{}if(/[{\[]/['test'](_0x55bc49)&&/":/[_0xacb787(0x805)](_0x55bc49)){if(_0xacb787(0xa7a)!==_0xacb787(0x2bc)){const _0x2b116e=[],_0x32a970=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x5649ec;while((_0x5649ec=_0x32a970['exec'](_0x55bc49))!==null){const _0x11836d=_0x5649ec[0x1][_0xacb787(0x6ac)](/\\"/g,'\x22')[_0xacb787(0x6ac)](/\\n/g,'\x0a')[_0xacb787(0xad4)]();if(_0x11836d)_0x2b116e[_0xacb787(0xb47)](_0x11836d);}if(_0x2b116e[_0xacb787(0xc1f)])return _0x2b116e[_0xacb787(0x355)](_0x305437)['slice'](0x0,0x9);}else{_0x1bfeba['error'](_0xacb787(0x2c7));return;}}return _0x305437(_0x55bc49);}function _0x305437(_0x579653){const _0x2cc2c0=_0x1ad1ef,_0x4b3d2f=String(_0x579653)[_0x2cc2c0(0xad4)]();if(_0x4b3d2f[_0x2cc2c0(0xca0)](_0x2cc2c0(0x1ea))&&_0x4b3d2f[_0x2cc2c0(0x159)]('</div>'))return[_0x4b3d2f];const _0x156ac4=_0x4b3d2f['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x2cc2c0(0x257)](_0x213e15=>_0x213e15[_0x2cc2c0(0xad4)]())[_0x2cc2c0(0x78c)](Boolean);if(_0x156ac4['length']>0x0){if(_0x2cc2c0(0x743)!=='phvsf')return _0x156ac4[_0x2cc2c0(0xb41)](0x0,0xc);else{const _0xa301df=new _0x3ececc(_0x9fe9b2['timestamp']);_0x2b3695+=_0x2cc2c0(0x236)+_0x23eeba[_0x2cc2c0(0x41a)]+_0x2cc2c0(0x956)+_0x1887d8(_0xa301df)+'\x0a';}}return[_0x4b3d2f][_0x2cc2c0(0x78c)](Boolean);}const _0x5e955c=new Promise((_0x1c9e15,_0x44f659)=>{const _0x2b1967=_0x1ad1ef,_0x370dc8=indexedDB['open'](_0x4d9cba,0x3);_0x370dc8[_0x2b1967(0x122)]=()=>_0x44f659(_0x2b1967(0x67b)),_0x370dc8[_0x2b1967(0x487)]=()=>_0x1c9e15(_0x370dc8['result']),_0x370dc8[_0x2b1967(0x892)]=_0x64ef4b=>{const _0x432ddd=_0x2b1967;if(_0x432ddd(0x530)==='LSPix'){_0x547c3a['log'](_0x432ddd(0x628));return;}else{const _0x115ffd=_0x64ef4b[_0x432ddd(0x446)][_0x432ddd(0x668)];console[_0x432ddd(0x68b)](_0x432ddd(0xace)+_0x115ffd[_0x432ddd(0x756)]+_0x432ddd(0x262)),!_0x115ffd['objectStoreNames'][_0x432ddd(0x9ff)](_0x462025)&&(_0x432ddd(0x2af)!==_0x432ddd(0x2af)?(_0x523df3[_0x432ddd(0xa19)][_0x432ddd(0x25d)](_0x432ddd(0xaea)),_0x5e5984[_0x432ddd(0xa19)][_0x432ddd(0x25d)]('is-exiting-right'),_0x35f45b['classList'][_0x432ddd(0x25d)](_0x432ddd(0x167)),_0x3b9c10(()=>{const _0x417a0d=_0x432ddd;_0x5890ca['classList'][_0x417a0d(0xab0)](_0x417a0d(0x167),'is-exiting-right'),_0x2f898b['classList']['remove'](_0x417a0d(0xaea)),_0x55e26c[_0x417a0d(0x70f)]=_0x1ef1a9,_0x5d7770(),_0x4c21f1['isAnimatingDiary']=![];},0x2bc)):(console[_0x432ddd(0x68b)](_0x432ddd(0x931)+_0x462025),_0x115ffd[_0x432ddd(0x46b)](_0x462025,{'keyPath':'id'}))),!_0x115ffd[_0x432ddd(0x53a)]['contains'](_0x432ddd(0x24e))&&('rDojs'==='rDojs'?(console[_0x432ddd(0x68b)](_0x432ddd(0x430)),_0x115ffd[_0x432ddd(0x46b)]('music_library',{'keyPath':'id'})):_0x5d2adc(_0x432ddd(0x56a)+_0x158423[_0x432ddd(0x979)])),!_0x115ffd['objectStoreNames']['contains'](_0x4d2e4a)&&(console[_0x432ddd(0x68b)](_0x432ddd(0x931)+_0x4d2e4a),_0x115ffd[_0x432ddd(0x46b)](_0x4d2e4a,{'keyPath':'id'}));}};});async function _0x54e221(_0x579e7f){const _0x21086b=await _0x5e955c;return new Promise((_0x446fc9,_0x94f172)=>{const _0x3122bf=_0x53d2;if('UZOId'!==_0x3122bf(0x695)){const _0x58a5a9=_0x21086b[_0x3122bf(0x170)](_0x462025,_0x3122bf(0x366)),_0x5a767c=_0x58a5a9[_0x3122bf(0x327)](_0x462025),_0x45d418=_0x5a767c['get'](_0x579e7f);_0x45d418[_0x3122bf(0x487)]=()=>_0x446fc9(_0x45d418['result']?_0x45d418[_0x3122bf(0x668)][_0x3122bf(0x543)]:null),_0x45d418[_0x3122bf(0x122)]=()=>_0x94f172(_0x45d418[_0x3122bf(0xb1e)]);}else _0x5b88dd[_0x3122bf(0xb47)]('['+_0x2c93ea(_0x4596fb)+_0x3122bf(0x4ac)+(_0x1650cb[_0x3122bf(0x297)]?.[_0x3122bf(0x606)](/：(.+?)]/)?.[0x1]||'表情')+']');});}async function _0x1bc020(_0x1fd74c){const _0x539407=await _0x5e955c;return new Promise((_0x389c7d,_0x3e502a)=>{const _0x313f48=_0x53d2,_0x309f88=_0x539407['transaction'](_0x4d2e4a,'readonly'),_0x489c8e=_0x309f88['objectStore'](_0x4d2e4a),_0x19cbe5=_0x489c8e[_0x313f48(0x1f8)](_0x1fd74c);_0x19cbe5[_0x313f48(0x487)]=()=>_0x389c7d(_0x19cbe5[_0x313f48(0x668)]?_0x19cbe5[_0x313f48(0x668)][_0x313f48(0xade)]:null),_0x19cbe5['onerror']=()=>_0x3e502a(_0x19cbe5[_0x313f48(0xb1e)]);});}async function _0x36ff18(_0xa4389f,_0x36530a){const _0x315cd8=await _0x5e955c;return new Promise((_0x29578a,_0x571031)=>{const _0x37c4ee=_0x53d2,_0x17ce93=_0x315cd8[_0x37c4ee(0x170)](_0x4d2e4a,'readwrite'),_0x343292=_0x17ce93['objectStore'](_0x4d2e4a),_0x413d5f=_0x343292['put']({'id':_0xa4389f,'data':_0x36530a});_0x413d5f[_0x37c4ee(0x487)]=()=>_0x29578a(),_0x413d5f[_0x37c4ee(0x122)]=()=>_0x571031(_0x413d5f[_0x37c4ee(0xb1e)]);});}async function _0x1c28c4(_0x473c67){const _0x4f44e2=await _0x5e955c;return new Promise((_0x3bc638,_0x33380a)=>{const _0x4f7a59=_0x53d2;if('jhGaK'!=='UiMog'){const _0x57b290=_0x4f44e2['transaction'](_0x4d2e4a,_0x4f7a59(0x96c)),_0x477b8f=_0x57b290['objectStore'](_0x4d2e4a),_0x25f09e=_0x477b8f[_0x4f7a59(0xca3)](_0x473c67);_0x25f09e[_0x4f7a59(0x487)]=()=>_0x3bc638(),_0x25f09e[_0x4f7a59(0x122)]=()=>_0x33380a(_0x25f09e[_0x4f7a59(0xb1e)]);}else _0x10db67['pause']();});}async function _0x567110(_0xfdb38e,_0x594d06){const _0xfb6116=await _0x5e955c;return new Promise((_0xc88d1e,_0x208087)=>{const _0x23a07c=_0x53d2;if(_0x23a07c(0x8a0)!==_0x23a07c(0x43c)){const _0x20130e=_0xfb6116[_0x23a07c(0x170)](_0x462025,_0x23a07c(0x96c)),_0x119b57=_0x20130e[_0x23a07c(0x327)](_0x462025),_0x3af884=_0x119b57[_0x23a07c(0x3f8)]({'id':_0xfdb38e,'blob':_0x594d06});_0x3af884['onsuccess']=()=>_0xc88d1e(_0x3af884[_0x23a07c(0x668)]),_0x3af884['onerror']=()=>_0x208087(_0x3af884[_0x23a07c(0xb1e)]);}else{const _0x5220dd={'id':_0x409fd1['id'],'url':_0x2f83b6['playableUrl']};_0x39eb62(this,_0x5220dd);}});}async function _0x23455e(_0x5c32e9){const _0x4912b2=await _0x5e955c;return new Promise((_0x84fc82,_0x207fce)=>{const _0x197519=_0x53d2;if(_0x197519(0x6df)==='crpeN'){const _0x47bd65=_0x3cb211[_0x197519(0x51d)](_0x197519(0x1e6));_0x47bd65&&_0x47bd65[_0x197519(0x779)]();}else{const _0x5f396c=_0x4912b2[_0x197519(0x170)](_0x462025,_0x197519(0x96c)),_0x2c1378=_0x5f396c['objectStore'](_0x462025),_0xca606f=_0x2c1378[_0x197519(0xca3)](_0x5c32e9);_0xca606f[_0x197519(0x487)]=()=>_0x84fc82(),_0xca606f[_0x197519(0x122)]=()=>_0x207fce(_0xca606f[_0x197519(0xb1e)]);}});}function _0xe092cf(_0x299c8e){const _0x28c86f=_0x1ad1ef;return fetch(_0x299c8e)['then'](_0x1d9522=>_0x1d9522[_0x28c86f(0x543)]());}
  </script>
  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>




  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>

  <div id="edit-replay-modal" class="choice-modal">
    <div id="edit-replay-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="flex-shrink: 0;">
        <button id="cancel-edit-replay-btn" class="header-button">取消</button>
        <span class="header-title">编辑回放档案</span>
        <button id="save-edit-replay-btn" class="header-button">保存</button>
      </div>
      <div class="content" style="padding: 0; flex-grow: 1;">
        <textarea id="edit-replay-textarea"
          style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 10px; box-sizing: border-box;"></textarea>
      </div>
    </div>
  </div>
</body>

</html>
