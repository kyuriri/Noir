<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>


  <script>

    const _0x2d0b86 = _0x198c; (function (_0x2bf8ba, _0x31ed00) { const _0x40b2b5 = _0x198c, _0x469446 = _0x2bf8ba(); while (!![]) { try { const _0x4642cf = parseInt(_0x40b2b5(0x73c)) / 0x1 + parseInt(_0x40b2b5(0x895)) / 0x2 * (-parseInt(_0x40b2b5(0x86b)) / 0x3) + parseInt(_0x40b2b5(0x938)) / 0x4 * (parseInt(_0x40b2b5(0x9be)) / 0x5) + parseInt(_0x40b2b5(0x6de)) / 0x6 * (-parseInt(_0x40b2b5(0x51d)) / 0x7) + parseInt(_0x40b2b5(0x9e2)) / 0x8 + -parseInt(_0x40b2b5(0xa5a)) / 0x9 * (parseInt(_0x40b2b5(0x9a5)) / 0xa) + -parseInt(_0x40b2b5(0x525)) / 0xb * (parseInt(_0x40b2b5(0x398)) / 0xc); if (_0x4642cf === _0x31ed00) break; else _0x469446['push'](_0x469446['shift']()); } catch (_0x2e8dea) { _0x469446['push'](_0x469446['shift']()); } } }(_0x2686, 0x5409e)); function _0x5b838e(_0x5db358 = new Date()) { const _0x1b8cf6 = _0x198c, _0x397ea0 = _0x5db358[_0x1b8cf6(0x780)](), _0x3d29be = String(_0x5db358[_0x1b8cf6(0x49d)]() + 0x1)[_0x1b8cf6(0xb98)](0x2, '0'), _0x5f44d8 = String(_0x5db358['getDate']())[_0x1b8cf6(0xb98)](0x2, '0'); return _0x397ea0 + '-' + _0x3d29be + '-' + _0x5f44d8; } const _0xc9d9b7 = _0x2d0b86(0x6c3), _0x523203 = _0x2d0b86(0x470), _0x6be7aa = 'snoop_cache', _0x5e29e5 = document['createElement']('style'); _0x5e29e5['id'] = _0x2d0b86(0x608), document['head'][_0x2d0b86(0x594)](_0x5e29e5); function _0x2686() { const _0x45e898 = ['wugvq', 'forceWhiteClock', 'version', '_blank', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'diary-char-name-header', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'fontStyle', '已经删掉了。', 'padStart', 'UhUvv', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'LEhZF', 'countdown-timer', '&apos;', 'fMpqk', 'json', 'music_cover_', 'AbortError', 'gap', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'yPlSH', '正在连接同步频道...', 'todo-item-small', 'BTetn', 'Aqkop', 'meeting-view-screen', 'diary-get-reply-button', 'snoopPhone', '#diary-action-reroll', '成功救援并备份了\x20', 'zNMXy', 'tab-record-expense', 'activeFriendCircleId', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'form-button\x20load-more-btn', '</span>:\x20', 'endpoint', '有点无语', 'character-edit-screen', 'OAtaJ', 'TpwHg', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', '</span></div>', '未知餐厅', 'text', 'margin', '请输入群聊名称。', '吃你的饭', 'CHmPS', 'giExd', 'sYDPZ', 'music-upload-altar-screen', 'kajzn', '[发送了图片]', '点击选择\x20.mp3\x20或\x20.flac', 'summarize-backdrop', 'sprite-cancel-button', 'QtgGq', '哼，这不是图片，你想让我压缩什么？', '加载卡片图片失败', '\x0a#\x20关于你\x20(', 'JmWhK', 'bubble-', 'xwWtX', 'BcSJd', 'OiVPl', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'PKMOP', 'from', '\x20\x20\x20\x20-\x20', 'app-accounting', 'scrollTop', '</pre>', 'BNhpM', 'closest', 'currentTime', 'ukSxa', 'gmIUR', 'mPJLC', 'wpIvS', 'noir-author-mark', '\x20个成员', 'CraBq', '咱俩天下第一好', 'TeNgN', 'back-to-meeting-list', 'xKpXm', 'nKXOj', 'meeting-send-button', '\x0a\x0a#\x20当前任务指令\x0a', 'transfer', 'mIfVV', '刚刚发布了一条动态，内容是：“', 'quote-preview-text', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', '当前聊天', 'log', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', 'yuFrK', '--primary-hue', 'key', '在所有地方的最后一次互动是在**:\x20', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'toLocaleDateString', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', 'tsXkD', 'rtmBF', 'OuYmR', 'add-event-modal', 'delete-user-profile-button', 'widget_badge', 'NoirCharacterCard', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', '生成动态回复失败:', 'model-dropdown', 'owVCL', '[sticker:', 'uAckM', 'LSUaB', 'music-input-modal', 'jtqRp', '\x20.app-icon-img', '无语但是随便吧', 'clipboard', 'VlMeD', '好的，我记住了这些人设和历史。现在我们开始对话。', 'HXDXH', 'card-widget-2', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'qRBzS', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'UWoab', 'EzmPq', 'googleapis.com', 'eooes', 'fbirM', '用户分享音乐失败:', 'qMbAX', 'isFromLibrary', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '.typing-indicator', 'info-file-input', 'meeting-message-input', 'XutPd', 'snwbx', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'badgeState', 'api-model', 'IaUfC', 'LNYLu', 'is-entering-from-right', 'important', 'User', '暂无音乐', 'CLeyS', 'FLSbx', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'music', 'character', 'friend-circle-title', '\x20张旧封面。应用即将刷新。', 'vertical', 'expanded', 'quotedMessage', 'day-number', 'back-to-circle-list-from-feed', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'change', 'diary-view-screen', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'VbmZC', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'translate(-50%,\x20-100%)', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '无描述', 'rawResponse', 'userId', '搜索失败:\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', 'AVBbH', '#meeting-view-screen\x20.chat-input-area', 'isOffline', 'summary-textarea', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', '[表情]', 'cancel-music-input', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'aRAIk', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'LxSZm', 'calendar-day', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '视奸内容解析失败:', '\x20张旧的动态图片。', '保存失败:\x20', 'gQriO', 'RJniu', 'RgBrz', '准备调用\x20generateAs...', 'XDdjP', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'contactName', 'rEWym', 'vqrti', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'user-persona', 'QmxhR', 'char-avatar-frame-url', 'diaryCurrentPage', 'qvpsu', 'LffFX', '记一笔', 'data:', '\x0a\x20\x20人设:\x20', 'transfer-amount-input', 'JilfZ', 'VWIMH', 'iRmld', 'widget-cover-art', 'KgxFl', 'activeDiaryCharacterId', 'background', 'UYDaV', '--feed-bg-image', '最近的足迹', 'Gemini\x20API\x20Error:\x20', 'WhIxG', 'XiyPK', ']\x20[image]', 'oHWzN', 'date', ';\x22>', 'bFTkQ', '”已成功导入！', 'kxPPN', ')，已跳过。这不应该发生，数据库可能已损坏。', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'custom_font_ttf', 'includes', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'customStickers', 'scrollHeight', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'create-group-chat-button', '正在焚烧【', 'ilMTC', 'opacity', '执行好友圈数据净化...', '星期日', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', '\x20内容失败:', 'jYulg', 'meetingViewMode', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'OXIbb', 'boundUserProfileId', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'guGml', 'font-preview-text', 'angry', '正在翻阅所有档案...', 'app-music', 'label', 'uxjRG', '60%', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', '有点破防', '刷我的卡', '聊天档案柜是空的，无需净化。', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', '.lt-end-session-btn', 'groupChatCreate', 'hard-reset-button', 'HVxiR', 'meeting-main-content', '--widget-cover-image', 'ZHLjF', 'snoop-home-date', '\x20[并附上了一张图片]', '</span>', 'Drnrk', '切换聊天时发生异步错误:', 'calendar-grid', 'url(\x27', 'ruUNA', 'addTestPost', 'pause', 'pqBgR', 'eOOfb', 'home-clock-container', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', 'role', 'nVwdh', 'xGeJS', 'insertAdjacentHTML', 'mouseup', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '加载聊天失败:\x20', 'EYKVC', 'TBWgH', 'linkedWorldBookIds', 'lBCNW', 'provider', 'feed-loader', 'qwNhB', 'pddsh', '保存角色失败:', '逗你开心', 'accounting-title', 'JJjGs', 'MbdtN', 'info', 'HLwgI', 'wallpaper-screen', 'nSYrp', '】的旧数据...', 'VwBhr', 'diaryPressTimer', '还没有我的回复可以重新生成哦。', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'XQoOO', 'YQOkj', 'LKAWo', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', 'GkTFN', '在准备动态回复时，读取图片失败:', 'TobPr', 'pBHzb', 'GQpZs', '确定要从圣殿中永久删除《', 'zDUqY', '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。', 'group-options-modal', 'WzSnb', '<div\x20class=\x22loader-spinner\x22></div><span>', 'transaction', 'vxCUI', 'OAVrR', '未知商店', 'worldBooks', 'AqYFd', 'BYJkJ', '.custom-multiselect', 'hZHgG', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '创建新用户', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'world-book-list-container', 'todo-date-title', 'char-edit-sprite-', '已复制到剪贴板！', 'card-widget', '这本日记本来就是空的，你还想清空什么？', 'appIconPosition_app-user-profiles', 'card-input-2', 'listen-together-song-list', 'getReader', '<div\x20class=\x22snoop-main-grid\x22></div>', 'revokeObjectURL', 'user-post-image-input', 'char_avatar_', '正在搜索音乐...', 'musicPlaylist', '”，里面有\x20', 'add-expense-button', 'object', '#d1d5db', 'cTvJf', '哼，你这字体文件有问题，用不了。', '\x0a#\x20你的个性（节选）\x0a', 'zTSCg', '的日记本', '分钟前', 'wHGPd', 'replaceAll', '获取AI响应失败:', 'UhFMi', 'eHICr', 'moZtJ', '5px', 'ncdor', 'beforeend', 'chat_image_', 'VgOIr', 'friendCircles', 'AI\x20试图创建事件，但找不到有效的用户ID。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'aborted', '-\x20[', 'bpcAA', 'yprHT', 'AI整理失败了，哼:\x20', 'thought', 'PMDLu', 'efDuy', 'XNhCs', 'concat', 'stringify', 'accountingLedger', '加载壁纸失败:', 'remark', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'TQzKK', '\x20\x20-\x20角色ID:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'conversationHistory', 'innerHTML', '29%', 'widget-play-pause-btn', '</p>', 'raxJl', 'gemini', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', '确定要删除这笔记录吗？', '图片预览失败:\x20', '歌曲“', 'system', 'EzfIm', 'JxYxa', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'wJfuN', 'getHours', 'indexedDBMusicData', 'reply', '人情红包', 'wants', 'sticker-content', 'LjQkN', '1.4', 'expense-amount', 'horizontal', 'QrENi', 'iLjMm', 'char-edit-wallpaper-preview', '猫猫撒娇', 'aVnNQ', '日记已删除。', 'xYEnX', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', '#member-select-', 'MuJab', '-preview', 'yaTMy', 'backgroundColor', 'lazy', 'narrator', 'category', 'smCQw', 'world-book-editor-screen', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', '2-digit', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'Jmmit', '角色“', '一起听歌', 'meeting-list-container', '交通出行', 'abyss', 'lTctY', '我正在说话呢，别打岔！', 'gbWIO', 'HIAcU', 'mUOLC', 'short', 'screenX', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'feed', 'currentDate', 'rtUBA', 'add-event-modal-title', 'char-edit-bind-user', 'RiRIK', 'parse', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', '.snoop-app-content', 'kiAXH', 'kgjOw', 'kbzEH', 'userProfile', 'group-chat-member-list', 'fTRPJ', 'api-key', 'rmUga', 'YcMWR', '-\x20姓名:\x20', 'all', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'modal-ok', 'YaqYr', 'app-settings', 'character-list', 'is-today', 'eNafE', '59%', '确定要彻底清空【', 'edit-delete-char-button', 'textContent', 'diary-modal-cancel', '测试动态已添加！', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', 'test', 'canplaythrough', 'nOOTH', 'pre-line', 'gijwX', 'user-profile-edit-title', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', 'rRGqe', 'white', '群聊至少需要2名成员。', 'appState', 'upload-card-button-2', '0.7rem', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'KUymh', 'chat-image-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '对不起', '未知搜索', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'https://xhslink.com/m/5IgC1rniI2I', 'daily-expenses-list', '10px\x20auto', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', ']\x0a\x0a#\x20角色资料库\x0a', 'api-provider', 'style-', 'user_', 'zpwka', 'snoop-summary-textarea', 'pointer', 'TfFOm', 'decorative-badge', 'PKxLl', '-input', 'vZfjg', '.page-dot', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'snoop-dock', 'position', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'delete-message-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'is-playing', 'galgame-sprite-adjust-ui', 'displayedMessageCount', 'historyIndex', 'editing-world-book-id', 'day-dot', 'Escape', '确定要删除这个条目吗？此操作不可撤销。', 'setAttribute', '群聊设置已保存！', 'bites', '（正在构思中...）', '吃薯条', 'RzXUE', 'mqBNm', 'badge-input', '[用户分享了音乐：', '我来搞定', 'flex', 'mCGkj', '2px\x20dashed\x20var(--border-color)', 'modal-root', 'char_wallpaper_', 'music-input-backdrop', '15px', 'widget-artist', 'EcslU', 'candidates', '\x20行格式不对，被我无视了。', 'edit-message-button', '确定要清空好友圈“', 'diary-modal-textarea', 'filled', '\x0a##\x20', '所有头像已恢复到运行时状态。', 'translateX(-50%)', 'pkNaO', 'wttPQ', ':</span>\x20', '\x20\x20-\x20用户ID:\x20', '好友圈已保存！', '<p\x20class=\x22music-post-thought\x22>', 'MvszA', 'galgame-speaker', 'calendar-screen', 'kcOOX', 'iRZyM', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'yVcEu', '\x22\x20的聊天记录吗？此操作不可撤销。', '】的日记本已被清空。', '错误：找不到签署契约的地方。', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', '”已创建！', 'KpZJJ', 'diary-entry\x20', 'createObjectURL', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'ZTISp', 'zRqCx', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'getElementById', 'back-to-home-from-music-library', '\x0a\x20\x20\x20\x20姓名:\x20', 'roPjP', 'NoGqv', 'RQmfS', '12OhGDEu', 'SHnMw', 'gjTZu', '字体已应用！(Font\x20Applied!)', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'VebTo', 'eKRWP', '\x0a\x0a#\x20关于对话者“', 'gyDgq', 'has', 'ANGsG', 'ZcdOW', 'none', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'high', '确定要清空群聊\x22', 'vKYED', 'show', 'cuiwP', 'activeQuote', 'speaker-user', 'snoop_', 'read', '图标处理失败:\x20', '在“一起听”邀请中，净化封面失败:', 'DVNWc', 'gBLUE', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'getContext', '医疗健康', '100%', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'diary-list-container', '请根据以上所有信息，开始分析并返回JSON。', 'select', '[发送了表情]', 'IrQyw', 'mEzzg', 'aQAJb', 'galgame-view-container', '星期一', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'outerHTML', '点击选择\x20info.txt', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'editing-char-id', '书记官正在奋笔疾书...', 'message-image-content', '\x22\x20data-id=\x22', 'elboD', 'diary-modal-save', 'kind', 'jiKyY', 'eventContent', 'isPlaying', 'result', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'CEAft', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'add-event-backdrop', 'char-edit-offline-bg-preview', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'review', 'gGwIU', 'cApgQ', 'srham', 'FVkZG', 'Creating\x20object\x20store:\x20music_library', 'body', 'head', 'gRPGB', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'char_sprite_', 'EhXSr', 'CvEtS', '<br>', '为角色\x20', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', '净化失败了，哼:\x20', '确定要删除这个安排吗？此操作不可撤销。', 'HkKOS', 'COfgJ', 'toBlob', 'cDCjs', 'AauLU', 'RKHkf', 'faRIt', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'IRmVu', '-\x20你拍过一张照片，内容是：“', 'setHours', 'modal-cancel', 'image', '未知商品', 'RAILJ', '-\x20**你最后一次活动是在**:\x20', 'TBQEW', 'isFinite', 'setDate', 'SspHV', 'BgTty', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', '距离「', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'characters', 'fKhTR', 'edit-message-backdrop', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'toLocaleString', 'wallpaper-input', 'jhFPG', '甜蜜地和你聊天', 'removeProperty', 'reverse', 'prmKb', 'organize-bill-button', 'query', '---\x20救援任务完成\x20---', 'eRLSf', 'enmIx', 'wallpaper', '#c299ff', 'EFxtB', '正在处理...', '</div></div></div>', 'user-post-textarea', '</label>\x0a\x20\x20\x20\x20', 'OpenAI\x20API\x20错误:\x20', '好友圈净化完成，正在重新存档...', 'string', 'Ddewr', 'accountingData', 'name', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'qCOhc', '桌面已重置，即将刷新...', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', 'scale', 'vWWja', '.ttf', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'lmDaN', '超激动我来了', 'uLLzV', 'classList', '字体更换成功！', '档案已复制到剪贴板！', 'ecQBE', '未知用户', '卡片已移除。', 'UEnYN', 'ckitF', 'postContent', 'diary-page-', 'JSON\x20解析失败!\x20错误原因:', 'user-avatar-input', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'MAOLr', '净化好友圈时出错，真是的。', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'slice', 'group-settings-name', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', '小组件背景已更换！', '导出角色卡失败:', 'chats', '<div\x20class=\x22post-comments-container\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'mousedown', 'tab-view-ledger', 'sender', 'bquBX', '错误:\x20', 'jmiMm', 'Failed\x20to\x20plan\x20group\x20replies:', 'isldI', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', 'is-exiting-right', 'gPbUq', 'xIcen', 'api-endpoint', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', 'custom-stickers-input', 'active', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'hRaKY', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', '#f2b7c6', 'coverUrl', 'https://api.vkeys.cn/v2/music/', 'diary-entries-container', 'cMbne', 'hLvLg', 'jwoTW', 'lnTDW', 'HqRQw', '哼，正在净化你那些超重的音乐分享记录...', 'GqiSj', 'FRIRu', 'focus', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'Lqwaf', 'HwvJs', '找不到旧的存档，无需救援。', 'relative', '.listen-together-card', '\x22\x20class=\x22post-image\x22></div>', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'accepted', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', 'diary-write-button', 'images', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'sprites', 'BjvDb', 'sort', '#\x20发生错误：\x0a', 'post_', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', 'kqNCm', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', '保存播放器状态失败，真是没用。', 'flexDirection', 'ZhrJb', 'character-item', '.char-info-wrapper', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', '点击选择\x20.jpg\x20或\x20.png', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'VHbun', 'oWnWl', 'user-name', 'jNTdp', '正在检查是否有需要救援的旧头像...', 'HnpBd', '来源：[最活跃]', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', '确定要永久清空【', 'diary-list-screen', 'XNFkw', 'ZzLby', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'GbSmg', '字体保存失败了，哼:\x20', 'YAML翻译机也无法理解这段梦话。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x0a#\x20关于群聊参与者“', '#group-world-book-checkboxes\x20input:checked', 'ibYkx', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'qAoZu', 'zGfCS', '请根据以上所有规则和资料，开始生成内容。', 'EhAXw', '\x0a\x20\x20\x20\x20-\x20世界书[', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'getMonth', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'input[type=\x22checkbox\x22]', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'drrRD', 'group-avatar-input', 'card-image-2', 'true', 'AI返回了无法识别的数据格式。', 'LbkVM', 'removeItem', '\x20个模型。', 'save-custom-stickers-button', 'rwkyb', 'ZZlLI', 'musicWidgetPosition', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'GgzVK', 'categorizedExpenses', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', '<span\x20class=\x22description\x22>', 'BLGuS', '准备群聊API数据时，读取图片失败:', 'CrnrQ', 'svg', 'world-book-screen', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', '正在执行净化程序...', 'click', 'LQTho', '绝对不想', '.snoop-main-grid', 'app-meeting', 'whNsK', 'emoji', 'lTAzy', 'user-post-attachment-preview', 'borderBottom', 'sticker', 'QGGFL', 'objectStore', 'image/png', 'chat-send-button', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'AI未能返回有效的JSON对象。', '\x20转账\x20', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', 'eventDate', ']:\x20', 'back-to-settings-from-user-profile', 'EYFeH', '有点生气', 'wHivJ', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '错误：第一个好友圈\x20\x22', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '的个人专属世界观设定\x0a', '成功净化并迁移了\x20', 'cZMAx', 'FSNuv', 'cardState2', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', '数据导入成功！应用即将刷新...', '10px\x200', 'NRPXc', 'editing-user-id', 'padding', '[DONE]', 'Esdou', 'cancel', 'transparent', 'RcKpL', 'VopLi', 'exp_', 'YVzSI', ')\x20恢复头像失败:', 'back-to-char-select-from-group-create', 'transfer-recipient-select', 'loYJj', 'newAvatar', '-\x20**当前精确时间**:\x20', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '---\x20音乐净化仪式完成\x20---', 'HQTjB', 'char-edit-offline-bg-input', '解析存档失败，正在重置:', 'rgba(255,255,255,0.2)', 'recipientId', 'IvaMs', 'RPABI', 'CPCYt', '1em', '正在为你搬运旧壁纸到新仓库...', 'world-book-edit-name', 'chat', '>>\x20', '批量生成动态失败:\x20', 'oaBsw', 'music-widget-card', 'DvmmF', 'aKXtk', 'app-music-library', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'lZKye', '#bubble-preview-user', '这不是一张有效的Noir角色卡。', 'MFSMb', 'likes', 'widget_card_2', 'MTghi', 'querySelector', 'var(--text-color)', '💜\x20', 'songName', 'NftVW', 'tFzcN', 'aJnDX', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'app-snoop', 'galgame', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', '\x0a\x20\x20\x20\x20绑定用户:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'timestamp', 'todo-item', 'ZSnOU', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '未知艺术家', '273IOflql', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'touchcancel', '保存壁纸失败:', 'music-library-container', 'sqval', 'disabled', 'isGenerating', '384703cqKaPk', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'touches', '哼，正在净化你那些被污染的好友圈动态...', 'clear', 'import-char-input', 'join', ']\x20[', 'Unknown', 'app-pages-container', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'shy', '\x20|\x20', '/v1beta/models/', 'ZHsgY', 'dyqEV', 'activeListenSession', '\x22\x20id=\x22', '用户资料已保存！', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '[AI向\x20', 'customFeedWallpaper', '群聊名称不能为空！', 'LqxVO', 'add-event-fab', 'home-dock', '导入角色卡失败:', 'activeMeetingScriptQueue', '”已存入圣殿。', 'message', '</span><span\x20class=\x22amount\x22>总计:\x20', 'LuvpV', 'VJLnz', 'widget-next-btn', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', '正在生成中，请稍候...', 'lastIndexOf', 'then', 'wlbYn', 'back-to-world-book-list', 'title', '.avatar', 'XuUaY', 'toast', 'nKWEi', 'floor', 'Schho', '快点哄我', 'char_offline_bg_', 'snoop-app-refresh-btn', 'New\x20request\x20started', '#\x20总结失败了，可能是记录太长或太复杂。', 'onupgradeneeded', 'FzQeI', 'post-img-', 'expense-item', '--primary-lightness', '缓存命中:\x20', 'stretch', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'perChatContextLines', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'playableUrl', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'full', 'cNEvr', 'GZbDF', 'yyHgF', '\x20//\x20<--\x20哼，加在这里\x0a', 'MIzIw', 'kdUPN', 'XBpxD', 'LvGBq', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'gsLBE', '--\x20点击选择\x20--', '”，但没找到人)', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '#ff9999', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'cancel-edit-button', 'musicLibrary', 'DTyuC', 'WZvaZ', 'xfEem', '请输入新的群名称：', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'QbrUh', '没有找到相关结果。', 'bottom', 'vDinX', '新建好友圈', 'WqTXp', '保存徽章状态失败', 'no-action-modal', 'ktVMU', 'oncomplete', 'meetingView', '#ffcc66', '星期二', 'music-player-bar', 'substring', 'avatar', 'contact_name', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'calendar', 'zh-CN', '<div\x20class=\x22post-timestamp\x22>', '动态页背景已更换！', 'appendChild', 'GhpcQ', 'back-to-circle-list-from-edit', 'sAUeY', 'qUDHr', '获取中…', 'diary-page', 'itQKS', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'chatWallpaper', '加载第二个卡片图片失败', 'readAsDataURL', 'Cztwm', 'files', 'event_ai_', 'snoop-app-view-container', 'appIconPosition_app-world-book', 'BbibB', '<div\x20class=\x22snoop-avatar\x22>', 'sFMHD', 'charId', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'world-book-editor-title', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'history', 'lZqtT', '好像有动态了...', 'XFTpj', 'error', 'save-event-button', 'NoirCustomFont', 'chat-sticker-panel', '\x0a-\x20当前精确时间:\x20', 'DRsox', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'jXKaA', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'originalExpenses', 'endsWith', 'chat_', 'reset-card-button', 'end', 'XsEMg', '.widget-info\x20>\x20div', '星期六', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', 'user', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '未知角色', 'group-chat-name', 'artist', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '.load-more-btn', 'Sqklb', '50%', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'persona', '#app-dock-bottom-left\x20#', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'getDay', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', 'CSeff', '正在构思中，请稍候...', '】的手机已被重置。', 'FcAlv', 'HNzHr', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'themeHue', '最近没有动态记录。', '上传失败了，笨蛋！\x20', 'pAZYG', 'spriteTransform', 'VcrRI', 'noir_migration_fc_v1_complete', 'MmifK', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'TSwoq', 'RsPBr', '至少要保留一个用户。', 'jGMou', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'user-post-avatar', 'map', 'borderRadius', 'otoBt', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'ended', '-\x20你最近去过：“', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'store_name', 'wGxXN', 'snoop-app-back-btn', 'char-edit-css', 'app-user-profiles', '”。\x0a', 'aXwun', 'edit-message-textarea', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'speaker', 'group-world-book-checkboxes', 'global-player-play-pause-btn', 'GgjPI', 'gZLTM', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', 'upload-feed-bg-button', '我是女仆', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'download', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'img', 'bZbna', 'noir-custom-font-style', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'is-exiting-left', 'ORHli', 'widget-prev-btn', 'POST', 'value', '群聊\x22', 'firstChild', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'column', 'open', 'fRXny', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a', 'yCXEE', 'wQLwm', 'getMinutes', 'sprite-reset-button', 'wYdXx', '天没动静了。你的角色们应该发起新的问候或话题。', 'card-input', 'eguQK', 'diary-write-modal', 'DJTRH', 'isActive', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'user-post-music-button', 'JaIFr', 'isAnimatingDiary', 'listen-together-card', 'gZZRQ', 'hSBQy', 'jyGse', 'startsWith', 'GzfEA', 'galgame-text', 'kHqeI', 'qkhEk', 'bINMV', 'QQbqL', '新建条目', '已恢复默认。', '已自动断开与其他人的听歌同步。', 'GefeO', '服务器错误:\x20', 'cost', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'JfhwH', 'sprite-confirm-button', 'div', 'Xendo', 'snoop-home-time', 'GPRNX', '导入失败了，笨蛋:\x20', 'gugvT', 'PxXwd', 'dataset', 'last_message_preview', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'zJOtp', 'group-settings-bind-user', 'preview_', 'snoop-home-clock', 'sprite-slider-scale', 'textShadow', 'expense-description', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'TA正在提笔写日记...', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'world-book-checkboxes-container', 'chat_image_migrated_', 'HUwPg', 'fragments', 'snoop-phone-screen', 'array', 'jyjOy', 'indexedDBData', 'aUKDw', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'kxZUU', 'group-chat-create-screen', 'zHjAm', '内容不能为空！', 'friend-circle-edit-screen', 'YvdZi', 'jOaER', 'group-delete-button', 'userProfileList', 'BHlhK', 'senderId', '确定要删除这个好友圈吗？此操作不可撤销。', 'href', '正在搬运旧卡片...', 'bKYTK', 'VsJJZ', 'fGQSF', '&alt=sse', '15px\x2020px', 'OILml', 'BBzyL', 'MDenw', '徽章已更换！', '300%', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', '.app-icon', 'VrLTc', 'AI未能返回有效的JSON数组格式。', 'fUxiS', 'altar-slot-info', 'HqWAy', 'onerror', 'Noir_Backup_', ':streamGenerateContent?key=', 'DdiWh', 'cancel-event-button', '\x0a-\x20**日记本的上一笔记录是在**:\x20', '这个也是摆设，别点了。', 'qkeUf', 'Yystb', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', 'TJQeV', 'CxWbJ', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', '歌曲ID', 'split', 'upload-wallpaper-button', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'user-post-image-button', 'IndexedDB\x20failed\x20to\x20open', 'TICJA', 'friend-circle-edit-name', 'fwXro', '未知联系人', 'novel', 'IKuvc', 'snoop-character-list-container', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '确定要重新记录吗？当前的账单会被删除。', '-\x20你的备忘录里有一条叫“', 'LjVNK', 'KPNbw', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', 'today-todo-list', '编辑条目', 'listenTogetherSession', 'worldBook', '加载自定义表情包失败，真是没用。', '#\x20记录是空的，没什么好总结的。', 'find', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'center', 'ERdAp', 'todo', '.selected-options-text', '#ff8c66', 'wallpaper_main', 'calendarEvents', 'pxcJF', '用户已删除。', '至少要选择一个圈内成员！', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'RHpFv', '大家好像不知道该怎么回复...', 'uRTlw', 'url', '确定要删除这篇日记吗？此操作不可撤销。', '\x0a##\x20世界书条目:\x20', 'vzQAh', '<p>格式错误</p>', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'vuNfT', '解析音乐文件失败:', 'input_', 'ijUdT', 'FKQVM', 'dUSeG', 'characterEdit', 'XgPvo', 'toggle', 'numeric', 'mjGti', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', 'XDLMe', 'activity_description', '未知表情', 'Noir_FileSystem', 'bqrKj', 'UDuRI', 'footprints', '.no-action-modal', '\x0a\x0a#\x20今日消费流水\x0a', 'data', 'cancel-quote-button', 'CyzJJ', '无法保存聊天记录。', 'yTDVg', 'number', 'SePwv', 'zDMfX', 'Error\x20fetching\x20from\x20', '餐饮美食', 'prev-month-btn', 'NJnyb', 'NVGJr', 'iEcJd', 'friendCircleEdit', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'audio', '正在升级聊天数据结构...', '的转账', '星期四', 'get', '11046JuqJWV', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', '我是小丑呜呜', 'EILMV', 'drawImage', 'removeEventListener', '加载立绘失败:', 'lastTimestamp', 'group_bg_', 'diary-action-modal-', '.message.ai', '(想转账给“', 'snoop-char-name-header', 'add', '\x20(当前)', 'SMdID', 'event-content-input', '净化音乐封面时出错，真是的。', 'left', 'length', 'touchstart', 'back-to-chat-from-group-settings', 'YSCIE', 'summary', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', 'LHKZK', '哼，正在开始净化你那被污染的聊天记录...', 'uCeSz', 'QuKoP', 'transform', 'displayUrl', '你是一个乐于助人的助手。', '创建新角色', 'confirm-music-input', 'put', 'HNZFj', '生成动态时发生错误:\x20', 'post_image_', '[AI返回了无法解析的剧本:\x20', '#group-settings-screen\x20.selected-options-text', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', 'widget-title', '\x0a#\x20交换日记摘要\x20(你和\x20', '近期没有特别安排', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'XEyrg', 'YdCZJ', 'mJUpK', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', '编辑好友圈', 'AIYRl', 'blob', 'yUKJB', 'pONjR', '收到的原始、有问题的文本:', 'music-widget', 'data:image', 'OUDGu', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', '未知歌曲', 'coverId', '.listen-together-song', 'checked', 'galgame-date', '星期五', '”的补充信息\x0a', 'xqORk', '加载已保存字体失败:', 'aLPVH', 'diaryView', 'max', 'CCSfV', '#\x20任务:\x20生成\x20', 'rObcl', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', 'live-preview-style', '原始文本:', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'setMonth', '没有角色需要恢复头像，跳过。', '<div', 'XWIhJ', 'items', 'chat-messages', '兼容模式成功，已将\x20', 'chat_group_', 'catch', 'currentAbortController', 'transfer-modal', 'lpyXI', '群名称已更改为\x22', 'prepend', '385446lCloTE', '<span\x20class=\x22', '错误：找不到此好友圈绑定的用户！', '.snoop-chat-item', '樱花薄粉', '.screen.active', 'filter', '暗夜紫晶', '\x20张旧图片。', 'glObR', 'bqjhZ', 'fCsbT', 'veifS', 'xbpKB', 'isArray', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'html-module-container', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'cardState', 'json_object', 'paddingBottom', 'ttojq', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'JkoKH', '我很脆弱', 'music-screen', 'OFsvc', '-\x20**你与', '\x0a\x0a#\x20用户资料库\x0a', '.bubble-', '.slot-filename', 'kLEYV', 'hMzgV', 'zUKwH', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '回复\x20', 'LzhJy', 'AcwPm', 'vOBQZ', 'diaryList', 'YUsJs', 'MLnmZ', 'theme-lightness-slider', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'editing-friend-circle-id', 'iVNjS', '小组件背景已恢复默认。', 'chatHistory_', 'zKHvx', 'parts', 'fANrp', 'message-bubble-row', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '-\x20你记得曾和“', 'onvhh', 'message-action-backdrop', 'add-friend-circle-button', 'pRmfK', 'onloadend', 'muNqI', '导入失败:\x20', '复制失败了，哼。', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', '{charName}', 'input:checked', 'getFullYear', '\x20的图片失败:', 'KBhFX', 'NCrWT', 'YpqbQ', 'touchend', 'noir_data_migration_v1_complete', 'meetingList', 'auto', 'activeUserProfileId', '\x20(分享了歌曲:\x20', '浏览器', 'wRNmW', 'RYblG', 'aXfhS', 'indexOf', 'AINdC', 'upload-widget-bg-button', 'play', 'Pqddk', 'lyric-line-', 'miFYe', 'flatMap', '&quot;', 'LKlXg', 'is-entering-from-left', 'groupSettings', 'charAt', 'dgMuj', 'char_sprite_normal_', 'CyNJy', 'input[name=\x22event-type\x22]:checked', 'msg_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'char_', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', '你好，世界\x20(Hello,\x20World)', 'utterance', 'snoop-phone-top-nav', 'CQHMA', '你是一个乐于助人的AI助手。', 'vQZnj', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', 'HMqso', '\x0a\x0a##\x20世界书条目:\x20', 'jvFyk', 'Texnh', 'todo-list', 'UKwLC', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', '\x0a#\x20你的日程与纪念日\x20(由\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '[用户发起了听歌邀请:\x20', '新用户\x20', '文件格式不正确，不是一个有效的备份文件。', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', '28%', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', 'home-screen', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', '--custom-font-family', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'char-edit-remark', 'group-options-cancel', 'Jcfer', 'lfGKa', 'ciwRE', '我不想工作', '未命名', 'meeting-scene-view', 'import-all-data-button', 'UHUca', 'badge-image', 'add-user-profile-button', '在准备API数据时，从IndexedDB读取图片失败:', '总结失败:', 'XGEsN', 'snoop-temp-style', 'round', '未分类', 'documentElement', 'default', '真是的，必需的祭品都还没准备好！', 'UzuJa', 'chat-view-pane', 'zoXlB', 'keydown', 'group-clear-history', 'back-to-home-from-circle-list', 'image_url', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'BmNQg', 'VxjTz', '设置已保存！', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', '<img\x20src=\x22', 'gallery', 'push', 'mxGIi', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'ZHjaN', 'SkwLs', '被萌到', 'settings', 'tGWUE', 'rgba(0,\x200,\x200,\x200.4)', 'IeYrC', 'activeChatId', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'pendingPostAttachments', '##\x20', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', '正在准备音乐数据...', 'rtoCk', '无法解析旧的视奸内容来获取时间戳。', 'customWallpaper', 'cover-file-input', 'line', '-\x20你在“', 'meeting-reroll-button', 'abs', 'dock', '</div>\x0a\x20\x20\x20\x20', 'kCmRw', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', '请先输入\x20API\x20接口地址和密钥。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '.message.user', 'quoted-content', 'GtQZT', 'apply', 'delete-world-book-button', 'luxwi', '.diary-delete-btn', 'SxRbD', '已送达', 'WgprP', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', 'pop', 'long', 'http', 'ZhlQo', 'lEDjx', '切，加载播放器状态的时候出错了。', 'viewBox', '”买过：“', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'bKzOE', 'onsuccess', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'user-avatar-preview', 'themeLightness', 'WVnax', 'NNTIJ', 'sWSPV', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '[图片]', '<img\x20id=\x22', 'AQzQd', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', '正在整理…', 'authorId', '请在动态或聊天中播放', '好了，请基于以上所有信息，开始写今天的日记吧。', 'wvkHs', 'marginBottom', '确定要清空\x22', '.remove-attachment-btn', 'hxRff', 'reset-card-button-2', 'DLpGg', 'SiQJP', '无标题笔记', '在你那乱七八糟的文本里没找到“歌名”！', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'toLocaleTimeString', 'height', 'fMymI', 'warn', 'add-world-book-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '生成日记失败:\x20', 'opacity\x200.2s\x20ease-in-out', '\x0a##\x20条目:\x20', 'normal', 'back-to-home-from-chat', 'ufBWv', 'xvqHr', '解析AI剧本JSON失败:', 'wBbrd', 'jFSoh', 'stopPropagation', 'visible', 'openai', 'edit-clear-history-button', 'meeting-list-screen', 'music_cover_migrated_', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', '很期待', 'chat-image-button', 'data:\x20', '的第一次互动。\x0a', 'src', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'events', '正在打包数据，请稍候...', 'musicId', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'uvrka', 'DJaHM', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'hFBwn', 'card-image', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'SeyoT', 'circle_', 'ZETiQ', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', 'audio-player', 'PYOdY', '\x22\x20的聊天记录已清空。', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'alt', 'OIxPF', 'FYxrY', 'cfmmY', 'QcBpq', '条目名称和内容都不能为空！', 'button', '群聊「', 'onmouseover', '45ikjbih', '加载更多聊天记录', 'status', 'UHtXC', '...', 'ZmYKA', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', 'splice', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', '徽章已移除。', 'type', '\x20(ID:\x20', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', 'dlicY', 'LumST', '\x20的旧格式数据翻译。', '大家正在赶来回复...', 'delete', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', '净化完成！应用即将重启。', 'back-to-home-from-user-list', 'assistant', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'cover', '---\x20好友圈净化仪式完成\x20---', '好友圈名称不能为空！', 'User\x20cancelled', 'url(', '-\x20**状态提示**:\x20这是你和', '找不到角色信息。', 'phone-container', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'HOUIb', '其他杂项', 'yLkqH', 'chat-screen', '#friend-circle-member-selection\x20input:checked', '</div>', 'galgame-textbox-container', 'className', '91686uWccvA', 'emotion', 'image/jpeg', '别这样嘛我哭哭', '用户操作中断了\x20AI\x20响应。', 'objectStoreNames', 'WWSuy', 'LMwIl', 'userProfiles', 'LymXb', 'KnrNI', 'execCommand', '执行音乐封面数据净化...', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'hujlH', 'countdown-title', 'TFNAI', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', 'back-to-home-from-diary-list', 'message-action-modal', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', '---\x20开始AI回复流程\x20---', 'BceBj', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'YDTGg', '（对话结束）', 'BnyVs', '正在清空旧数据...', 'OMDME', '该角色', '名字不能为空！', '同步已断开。', 'localeCompare', 'AYnJc', '8px', 'group-avatar-preview', 'Iwrvb', 'trim', 'lt-ui-song-artist', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', '你还没保存这个角色呢，导什么导？', 'next-month-btn', '和其他人的聊天', '\x20[并分享了歌曲:\x20', 'right', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'quote-preview-area', 'toFixed', 'choice-create-character', 'listen-together-invite', 'oCtCZ', 'avatar-wrapper\x20', 'wXmCI', '\x20之间的私密内容)\x0a', 'delete-expense-btn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'EgPCQ', 'app-pages-slider', 'preview-item', 'total_cost', 'accounting-screen', '错误：找不到角色', '音乐数据升级完成，迁移了\x20', 'replace', '\x0a\x20\x20相关记忆:\x0a', '\x0a-\x20**对话状态**:\x20群里在', 'Wgoep', 'mmkmX', '刷新了\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'altar-slot-cover', 'char-edit-wallpaper-input', 'DNIjU', 'onload', 'Qbfwo', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'mfGwY', 'user-profile-list-container', 'zAwDt', '救援头像时出错:', 'ZRxTG', 'memberCharacterIds', 'QJLok', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', 'iKVNY', 'api-watermark', 'back-to-home-from-meeting-list', 'mJjCT', '分钟前聊过，请注意衔接。', 'activeMeetingCharId', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'WavbP', 'back-to-home-from-calendar', 'UJEAw', 'top', 'music_library', '编辑群成员功能正在开发中...', 'undefined', 'group-bg-input', 'anthropic', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '未命名角色', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'sAJtv', '小时前），可以简单问候一下对方现在的状态。\x0a', 'getSelection', 'xUSml', 'fLdeH', 'EhxrZ', '\x0a-\x20人设:\x20', 'app-world-book', 'user-avatar-frame-url-in-chat', 'songId', 'HwTcV', '已选择\x20', '”...', 'wtOTC', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'back-to-library-from-altar', 'signal', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '歌名和歌手都不能为空！', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'fwhmL', '找不到要清空的聊天记录。', 'vwNWN', 'accounting', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'characterId', '”，在那里“', 'ofuCm', 'chat-music-button', '\x20时出错，跳过。', 'fYPEB', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'userAvatarFrameUrl', 'wfhUB', 'input', '<div\x20class=\x22post-likes\x22>', '保存壁纸失败:\x20', ',\x20ID:\x20', '[AI分享了音乐：', '\x20-\x20', 'back-to-home-from-wallpaper', '正在解析角色卡...', 'HCCBZ', '购物消费', 'unNcC', 'music-feed-container', '\x20/\x20', 'createElement', 'toLowerCase', 'dsAPn', 'is-visible', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'NFZcA', 'cPpgm', '#snoop-app-view-container\x20.snoop-app-header', 'edit-current-circle-button', '条目已删除。', '953112dYMWjp', 'GkkwE', 'eventType', 'charSelect', 'altar-slot-audio', 'DihoI', 'preventDefault', 'RKbjz', 'Creating\x20object\x20store:\x20', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'absolute', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'VUvmL', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'appIconPosition_app-music-library', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'findIndex', 'friend-circle-edit-bind-user', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'cursor', 'block', '.custom-multiselect\x20.select-box', 'dFiAP', 'worldBookEditor', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'IYCNa', '请看是我', '壁纸已更换！', 'toggle-meeting-view-button', '备忘录', 'getItem', 'GaQvY', 'SxVwX', '加载\x20', '\x0a你只扮演【', 'MLfvf', '</svg>', '清空聊天记录失败。', 'uAgMK', 'rYWbH', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'save-user-profile-button', 'Bearer\x20', 'setItem', 'AI返回的不是一个数组。', 'McIlQ', 'settings-screen', 'BQhce', 'abort', 'quoted-message-in-bubble', 'add-chat-button', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'parentElement', 'PsDnG', '{userName}', 'main', 'upload-card-button', 'chat-message-input', 'fCxHK', 'group-delete', 'avatar-frame', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'Bsqsj', '正在升级音乐卡片数据...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'backgroundPosition', 'fCdCP', 'RvnVD', 'toDateString', 'lubgH', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', 'sprite-slider-x', 'TfRIm', '购物记录', 'character-settings-button', 'posts', 'world-book-item', 'happy', '</span><div><div\x20class=\x22description\x22>', 'MQTnB', ']\x20[sticker:', 'qeQqe', 'min', 'DOMContentLoaded', 'home-time', 'widgetBgImage', 'response', 'zQDeU', 'epyJE', 'orwjC', '\x20条新动态。', 'display', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', '好委屈但是不能哭', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', 'onclick', 'VleYr', 'natXL', 'bNUdL', 'group_avatar_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', 'app-wallpaper', 'currentlyPlayingIndex', 'WROyT', 'accounting-content-area', '?word=', 'jkgSh', 'getAll', '175630fQtMJs', 'AKvSt', 'ZsLym', 'save-edit-button', 'kjcNA', 'upload-font-button', 'snoop-app-icon', '未找到可用模型。', '生成失败:\x20', '生成动态失败:', 'UNXQy', 'music-library-item', '卡片\x202\x20已移除。', 'snoop-phone-header', '.diary-entry', 'now', 'netease', 'option', 'description', 'querySelectorAll', '获取模型失败:\x20', '被你撩到', 'diaries', 'generationConfig', 'anthropic.com', '10sMjXOm', 'diary-send-button', 'oHwHt', '#diary-action-delete', 'JSON解析失败\x20(', 'JNpNL', 'appIconPosition_app-snoop', 'event_', 'quote-message-button', 'shiftKey', '歌曲名称', 'zQgnV', 'HgyVK', 'assign', 'jqfYM', 'medium', 'galgame-time', 'defaultPrevented', '20px', 'ZQzYg', 'QnPge', 'back-to-snoop-list-from-phone', 'CuodL', 'choice-create-group', 'group-bg-preview', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'http://www.w3.org/2000/svg', 'values', 'sRGTW', 'show-chat-view', '/v1/chat/completions', 'delete-friend-circle-button', 'Kjjel', '纪念日', '新角色\x20', 'user-profile-screen', '3196624FFoLfB', 'reduce', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'HAvoF', 'YOSAg', 'friend-circle-edit-title', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', 'postType', 'music-input-song', 'reset-desktop-button', '选择聊天', 'remove-font-button', 'last_edited', 'DQurl', 'copy-summary-button', '#66b3ff', 'load-more-btn', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'oTIAt', '\x20的《', 'confirm-altar-upload-button', 'kywSh', 'Enter', 'gKQdo', 'message-container', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'home-date', 'choice-import-character', ',\x20resetting.', 'alignItems', '喝多了', 'EmenO', '.message-container', '34%', 'ngbnk', '等你消息', '净化完成！总共迁移了\x20', '不高兴撒娇', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', '.music-post-song-card', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '加载视奸记忆失败\x20(', 'clientX', 'snoop-app-container', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'WakBz', 'QSgeW', '\x0a-\x20**当前时间**:\x20', 'DCaLc', '正在为你切换新的歌曲...', '找不到角色。', 'GFbfO', 'sVLsb', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'content', 'ojBDX', 'cos', '动态页背景已移除。', '\x20张旧图片。应用即将刷新。', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'backgroundSize', 'lt-ui-lyrics-container', 'RMnbF', 'PvvIJ', 'upload-music-button', 'back-to-user-list-from-edit', 'DagDZ', 'ONaQD', 'HIPnX', '\x0a\x0a#\x20', 'friend-circle-member-selection', 'participantIds', 'translateX(-', 'friendCircleList', 'ULUDN', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', '需要至少2个角色才能创建群聊。', 'feed-bg-input', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'save-world-book-button', '浏览器历史', 'chat-transfer-button', 'noir_migration_avatar_v1_complete', 'T00:00:00', 'Fetch\x20request\x20was\x20aborted.', '\x20添加...', 'galgame-sprite-container', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', 'NWAJu', 'snoop_cache', 'EHFwR', 'user-send-post-button', 'fKEuC', 'paused', 'egfjB', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', 'fill', 'group-edit-members', 'galgame-sprite', 'cIPSY', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'AI返回的原始文本:', 'decode', 'friend-circle-list-container', 'ZctNr', 'target', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', 'private', 'lWzYB', '请求AI更新:\x20', 'sad', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'add-choice-backdrop', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '确定要删除群聊“', 'location_name', 'bsqLS', 'ceil', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', '63VcOCws', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', '#FFFFFF', '正在处理图片...', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'set-active-user-button', '未知地点', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'pZrdZ', 'USBNM', '\x0a\x0a#\x20用户的动态\x0a', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'calendar-header-title', '位置已重置，正在刷新...', 'FxXDz', 'setProperty', '-\x20**对话状态提示**:\x20你们已经有\x20', 'char-edit-avatar-preview', 'CVesV', 'ZuHwM', 'createObjectStore', 'chat-get-reply-button', 'lyrics', 'ofBOa', 'MNKoD', 'home', 'zTSCS', 'MJbIN', '编辑用户', 'SGlpL', 'iSLeA', 'getDate', '导出失败了，哼:\x20', 'span', 'writeText', 'qFRNG', '正在准备图片数据...', 'FsZuO', 'QTvZA', 'UEfpG', '\x20条动态...', '群聊已解散。', '\x20账单', ')，启动兼容模式...', '?id=', '\x0a\x20\x20近期记忆:\x0a', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'apiSettings', 'RAUwL', 'QBNMQ', '好友圈数据升级完成，迁移了\x20', 'XrmDX', 'marginTop', 'important-day-item', 'qprmY', 'member-selection-item', 'CrZIn', '正在解析音乐灵魂...', '\x22>&times;</button></div>', 'color', 'page', 'toString', '\x20添加了新的纪念日：', 'width', 'header-actions', 'context-lines-per-chat', 'removeChild', 'loceJ', 'song_', '正在翻阅全部历史记录...', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'input[type=\x22checkbox\x22]:checked', 'AqylN', 'back-to-home-from-world-book', '无法从\x20IndexedDB\x20加载聊天图片:', 'VKktO', '.music-post-play-icon,\x20.music-share-play-icon', 'characterLastScripts', 'AsqvC', '检测到已保存的字体，正在应用...', 'match', 'TNsin', 'UyQqp', 'EWECs', '处理\x20', 'UPvEB', ')\x20的专属时间锚点\x0a', 'world-book-edit-content', 'preferences', 'model', '-\x20**状态提示**:\x20你已经有\x20', 'YsFil', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', 'kjHTv', 'inline-block', 'arXMR', '\x22\x20class=\x22char-name\x22>', 'eEpQa', 'keys', 'widget_card', 'addEventListener', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', 'back-to-diary-list', 'rVtzz', 'restaurant_name', 'AI返回了无法解析的文本', 'xoGBB', 'vZTNx', 'export-char-button', 'tMoNt', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'test_post_', 'char-edit-avatar-input', 'add-choice-modal', 'AuKBB', '[AI发送了表情：', 'group', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'loading', 'upload-badge-button', 'diary-prev-button', 'LDnSZ', 'oVvKr', 'confirm-transfer-button', 'musicPlayerState', 'lMAno', 'VshyY', 'music-post', 'quoted-sender', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'noir_migration_music_v1_complete', 'xnTdH', 'insertBefore', 'readwrite', '\x22\x20吗？所有聊天记录将被永久删除。', '对方正在输入...', '\x0a\x20\x20\x20\x20人设:\x20', 'refresh-feed-button', 'readonly', '\x20时出错:', 'cardWidgetState', 'PCZqU', 'init', 'BMSUB', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'some', 'zRxVu', '\x20记录)\x0a', 'nDmGx', '确定要恢复这个角色的默认立绘位置吗？', 'avatarFrameUrl', 'application/json', 're-record-button', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'wVkpL', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'GGFYQ', 'scrollIntoView', 'SsnNR', 'bubbleCss', 'author', 'localStorageData', 'BiIGn', 'selectedDate', 'app-chat', 'ZgwfT', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'create_event', 'EQzIg', 'toDataURL', 'wb_', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'QnbXc', 'KfCJw', '#bubble-preview-ai', 'galgame-sprite-controls', 'ptdSu', 'edit-message-modal', 'qtvAZ', 'tencent', '#\x20固定分类列表\x0a[', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', '你还没有写日记。', 'back-to-chat-list', '2023-06-01', '20%', 'snoopList', '今天一笔账都没有，我整理什么？', '星期三', 'audio-file-input', 'imageId', 'EmiKV', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', '[用户发送了表情：', 'hIJtc', '一个人可怜吃饭', 'phWMK', '\x22\x20已删除。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'feSJv', 'aidlf', 'reload', 'remove', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'rgqDL', '\x20说：“', 'copy', 'Rjcju', '委屈那我歇了', 'contains', '最后一次确认，真的要清空所有数据吗？', 'XQPrh', '说了是摆设啦，笨蛋。', '\x20写道:\x20', 'KPMkW', 'LwmvG', 'MLoxS', 'PZoCy', 'axgLy', '.choice-modal-backdrop', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', '好友圈已删除。', 'typing-indicator', 'comments', 'entries', '已设为当前用户！', '正在检查好友圈数据...', '表情包已保存！正在刷新应用...', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', 'save-friend-circle-button', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'organize-button-container', 'path', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '很好哦', 'GpuSv', 'xBugk', 'sprite-resize-handle', '-\x20[动态]\x20', '<span>', '赞同！渲染效果一级棒！', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', '欢迎！请先创建一个角色开始聊天。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '”已删除。', 'HovWB', 'item_name', 'DxrnK', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'style', '#diary-action-cancel', '音乐搜索失败:\x20', 'random', '数据结构升级：成功救援了\x20', 'time', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '/v1/models', 'forEach', '\x0a-\x20**对话状态**:\x20群里已经有', 'nJlAl', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', '\x0a-\x20你正在为一个名为“', 'diary-next-button', '乐于助人的助手', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'CijAM', 'clientY', 'speaker-ai', '-\x20你曾经搜索过：“', 'border', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', '导出过程中发生严重错误:\x20', 'clockPosition', 'shift', 'choice-cancel', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'musicUploadAltar', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'sticker-item', 'createElementNS', 'touchmove', 'back-to-home-from-settings', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', '图片处理失败:\x20', 'lAviA', '图片加载失败', 'cover_placeholder_', 'TjCeG', 'whispers', 'oEhsL', 'QflGC', 'oQEXg', 'nXlrk', '”聊过天，关于：“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'bFvNP', 'backgroundImage', 'amount', '-\x20**你们最后一次互动是在**:\x20', '世界书条目已保存！', '生活服务', 'theme-hue-slider', 'sprite-slider-y', '保存失败，你的表情包是不是太多了？', 'listen-together-ui']; _0x2686 = function () { return _0x45e898; }; return _0x2686(); } var _0x2e4b8c, _0x1be478 = null; let _0x216772 = [], _0x20f32b = ![], _0x30f62f = { 'x': 0x0, 'y': 0x0 }; function _0x252f3f(_0x32aad8) { const _0x4f3a69 = _0x2d0b86; return (_0x2e4b8c?.[_0x4f3a69(0x404)] || [])['find'](_0x4065ca => _0x4065ca['id'] === _0x32aad8); } const _0x37f8ca = _0x2d0b86(0x259), _0x3efbf6 = _0x2d0b86(0xb40), _0x2be033 = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', _0x35726a = [{ 'name': '委屈哭', 'url': _0x2d0b86(0xa42) }, { 'name': '崩溃', 'url': 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg' }, { 'name': '生病', 'url': _0x2d0b86(0x400) }, { 'name': '工作', 'url': _0x2d0b86(0x947) }, { 'name': _0x2d0b86(0x756), 'url': _0x2d0b86(0x49c) }, { 'name': '弱小委屈但凶恶', 'url': _0x2d0b86(0x7ff) }, { 'name': _0x2d0b86(0x360), 'url': _0x2d0b86(0x3b3) }, { 'name': '期待', 'url': _0x2d0b86(0x72a) }, { 'name': '喜欢', 'url': _0x2d0b86(0x5c2) }, { 'name': _0x2d0b86(0x7e9), 'url': 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg' }, { 'name': _0x2d0b86(0x4d0), 'url': _0x2d0b86(0xb07) }, { 'name': '委屈', 'url': _0x2d0b86(0x5ff) }, { 'name': '加油', 'url': _0x2d0b86(0x403) }, { 'name': '对的', 'url': _0x2d0b86(0x3e8) }, { 'name': '不满', 'url': _0x2d0b86(0x421) }, { 'name': _0x2d0b86(0x84a), 'url': _0x2d0b86(0x697) }, { 'name': _0x2d0b86(0x2e5), 'url': _0x2d0b86(0x72d) }, { 'name': '委屈', 'url': _0x2d0b86(0x4b7) }, { 'name': '平静', 'url': _0x2d0b86(0x753) }, { 'name': '咬你', 'url': 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg' }, { 'name': _0x2d0b86(0xbe3), 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': _0x2d0b86(0xc21) }, { 'name': '摸鱼', 'url': _0x2d0b86(0x97e) }, { 'name': _0x2d0b86(0xb2c), 'url': _0x2d0b86(0x941) }, { 'name': _0x2d0b86(0x42a), 'url': _0x2d0b86(0x74d) }, { 'name': _0x2d0b86(0x9ba), 'url': 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg' }, { 'name': _0x2d0b86(0x2fa), 'url': _0x2d0b86(0x8ea) }, { 'name': _0x2d0b86(0x23a), 'url': _0x2d0b86(0x710) }, { 'name': '啥意思捏', 'url': 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg' }, { 'name': _0x2d0b86(0x995), 'url': _0x2d0b86(0x1ea) }, { 'name': '事情好多', 'url': 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg' }, { 'name': '我是垃圾', 'url': _0x2d0b86(0xc2c) }, { 'name': '勉强但是好吧', 'url': _0x2d0b86(0x1f7) }, { 'name': _0x2d0b86(0x264), 'url': _0x2d0b86(0x8ad) }, { 'name': '买新衣服', 'url': _0x2d0b86(0x7bc) }, { 'name': '干劲满满', 'url': _0x2d0b86(0xa47) }, { 'name': _0x2d0b86(0x33a), 'url': _0x2d0b86(0x84f) }, { 'name': '交给我吧', 'url': 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg' }, { 'name': _0x2d0b86(0xc0a), 'url': _0x2d0b86(0xb38) }, { 'name': _0x2d0b86(0x239), 'url': 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg' }, { 'name': _0x2d0b86(0x554), 'url': 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg' }, { 'name': _0x2d0b86(0xbb5), 'url': _0x2d0b86(0x57d) }, { 'name': '一拳打爆', 'url': _0x2d0b86(0x8bd) }, { 'name': _0x2d0b86(0x4bb), 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': '谁啊我吗', 'url': 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg' }, { 'name': _0x2d0b86(0xb46), 'url': _0x2d0b86(0x465) }, { 'name': _0x2d0b86(0x40b), 'url': _0x2d0b86(0x5d8) }, { 'name': _0x2d0b86(0xa07), 'url': _0x2d0b86(0x877) }, { 'name': _0x2d0b86(0x6e1), 'url': _0x2d0b86(0x707) }, { 'name': _0x2d0b86(0x7c6), 'url': 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg' }, { 'name': _0x2d0b86(0xbbf), 'url': _0x2d0b86(0xb9a) }, { 'name': _0x2d0b86(0x365), 'url': 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg' }, { 'name': _0x2d0b86(0x601), 'url': _0x2d0b86(0x6f7) }, { 'name': '等你', 'url': 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg' }, { 'name': _0x2d0b86(0xb1f), 'url': _0x2d0b86(0x30d) }, { 'name': _0x2d0b86(0xa05), 'url': _0x2d0b86(0x351) }, { 'name': '喝酒', 'url': 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg' }, { 'name': _0x2d0b86(0xa00), 'url': _0x2d0b86(0xb77) }, { 'name': '呜呜', 'url': _0x2d0b86(0xbf8) }, { 'name': '为你骄傲', 'url': 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg' }, { 'name': '我错了', 'url': _0x2d0b86(0x754) }, { 'name': '出去玩', 'url': _0x2d0b86(0x496) }, { 'name': _0x2d0b86(0x952), 'url': _0x2d0b86(0x477) }, { 'name': _0x2d0b86(0x898), 'url': _0x2d0b86(0x7c0) }], _0xf3e86c = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': '薄荷水色', 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x2d0b86(0x740), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x2d0b86(0x743), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x2d0b86(0xabf)](_0x2d0b86(0x98b), () => { const _0x3abecc = _0x2d0b86, _0xc4e981 = document[_0x3abecc(0x392)](_0x3abecc(0x5f4)), _0x30ce09 = document['getElementById'](_0x3abecc(0xa34)), _0x34abc0 = document[_0x3abecc(0x392)](_0x3abecc(0x738)), _0x21ba50 = document['getElementById']('transfer-backdrop'), _0x37c131 = document[_0x3abecc(0x392)](_0x3abecc(0xad6)), _0x3caa0b = document[_0x3abecc(0x392)]('cancel-transfer-button'), _0x1c1e5b = document[_0x3abecc(0x392)]('transfer-recipient-group'), _0x2a5dc2 = document[_0x3abecc(0x392)](_0x3abecc(0x4ea)), _0x2b3f5b = document[_0x3abecc(0x392)](_0x3abecc(0x205)), _0x275223 = document[_0x3abecc(0x392)]('chat-reroll-button'), _0xc597ba = document[_0x3abecc(0x392)]('chat-summarize-button'), _0x25869f = document[_0x3abecc(0x392)]('summarize-modal'), _0x14780b = document[_0x3abecc(0x392)](_0x3abecc(0xbc7)), _0x5786e2 = document['getElementById'](_0x3abecc(0x1e4)), _0x513733 = document['getElementById'](_0x3abecc(0x9f0)), _0x1bc718 = document[_0x3abecc(0x392)]('close-summary-button'), _0x3194bf = document[_0x3abecc(0x392)](_0x3abecc(0x2e4)), _0x12e3f3 = document['getElementById'](_0x3abecc(0x8dd)), _0x68c6a9 = document[_0x3abecc(0x392)](_0x3abecc(0x3d6)), _0x43a895 = document[_0x3abecc(0x392)](_0x3abecc(0x4f1)), _0x55b4c4 = document[_0x3abecc(0x392)](_0x3abecc(0x9fd)), _0x356524 = document[_0x3abecc(0x392)](_0x3abecc(0x52a)), _0x1cd88d = document['getElementById'](_0x3abecc(0xac7)), _0x2cb370 = document[_0x3abecc(0x392)](_0x3abecc(0x9aa)), _0x4e87b1 = document['getElementById'](_0x3abecc(0x9ed)), _0x19c720 = document[_0x3abecc(0x392)]('font-input'), _0x4358c8 = document['getElementById'](_0x3abecc(0x231)); async function _0x461681(_0x4e77b9) { const _0x3b698f = _0x3abecc; if (_0x3b698f(0x362) !== _0x3b698f(0x362)) { const _0x1bf0d5 = _0x5093d1['getElementById']('music-widget-card'), _0x4cccbc = _0x482a5e[_0x3b698f(0x392)]('widget-title'), _0x19d096 = _0x4781eb[_0x3b698f(0x392)](_0x3b698f(0x36d)), _0x317484 = _0x95bae9[_0x3b698f(0x392)](_0x3b698f(0x209)), _0x44dc43 = _0x2fadb5; _0x44dc43 && _0x44dc43[_0x3b698f(0xc1a)] ? (_0x4cccbc[_0x3b698f(0x324)] = _0x44dc43[_0x3b698f(0x54d)], _0x19d096[_0x3b698f(0x324)] = _0x44dc43['artist'], _0x1bf0d5['classList']['add'](_0x3b698f(0x354)), _0x1bf0d5[_0x3b698f(0xb56)][_0x3b698f(0xa6a)](_0x3b698f(0x243), 'url(' + _0x44dc43[_0x3b698f(0x883)] + ')')) : (_0x4cccbc[_0x3b698f(0x324)] = _0x3b698f(0xc29), _0x19d096['textContent'] = '请在动态或聊天中播放', _0x1bf0d5[_0x3b698f(0x42c)][_0x3b698f(0xb26)](_0x3b698f(0x354)), _0x317484[_0x3b698f(0xb56)]['setProperty']('--widget-cover-image', _0x3b698f(0x3a4))); } else try { const _0x3917bc = URL[_0x3b698f(0x38c)](_0x4e77b9), _0x5110ce = _0x3b698f(0x5b3), _0x54ba3d = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x5110ce + _0x3b698f(0xbf1) + _0x3917bc + _0x3b698f(0x70c); _0x5e29e5['innerHTML'] = _0x54ba3d, document[_0x3b698f(0x7d3)][_0x3b698f(0xb56)][_0x3b698f(0xa6a)](_0x3b698f(0x7bf), '\x27' + _0x5110ce + '\x27'), _0x4358c8['textContent'] = _0x3b698f(0x39b); } catch (_0x2215b9) { 'BqERb' !== 'BqERb' ? _0x576224(_0x3b698f(0x2d1) + _0x14da1a['message']) : (console[_0x3b698f(0x5b1)]('字体应用失败:', _0x2215b9), _0x18c07b(_0x3b698f(0x2a2))); } } async function _0x59c729() { const _0x554a1b = _0x3abecc; try { const _0x5c625 = await _0x1de353(_0x554a1b(0x21c)); _0x5c625 && (_0x554a1b(0xc08) !== _0x554a1b(0xc08) ? (_0xe353b6['push']({ 'role': 'user', 'content': _0x3baa4a }), _0x1664a1[_0x554a1b(0x7e4)]({ 'role': _0x554a1b(0x880), 'content': _0x554a1b(0xc0d) })) : (console['log'](_0x554a1b(0xaaa)), await _0x461681(_0x5c625))); } catch (_0x37ce2a) { console['error'](_0x554a1b(0x723), _0x37ce2a); } } async function _0x1c87b2(_0x935e3a) { const _0x292323 = _0x3abecc; if (_0x292323(0xb2b) !== 'BUMPf') { const _0x21ac4a = _0x935e3a[_0x292323(0xa4c)][_0x292323(0x5a1)][0x0]; if (!_0x21ac4a || !_0x21ac4a[_0x292323(0x420)][_0x292323(0x92f)]()[_0x292323(0x5bb)](_0x292323(0x427))) { if (_0x292323(0x276) === _0x292323(0x276)) { _0x18c07b('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else { const _0x4ab54a = _0x197fdf(_0x372d26[_0x292323(0x825)]) || { 'name': '未知' }; let _0x1cf92e = '-\x20[动态]\x20' + _0x4ab54a[_0x292323(0x420)] + _0x292323(0xb29) + (_0x4df86e[_0x292323(0x2ba)] || _0x482e5b[_0x292323(0xa19)]) + '”'; return _0x207fbb[_0x292323(0x875)] === _0x292323(0xc2d) && (_0x1cf92e += _0x292323(0x78a) + _0x2531a8[_0x292323(0x50e)] + '\x20-\x20' + _0x31d480[_0x292323(0x5c7)] + ')'), _0x1cf92e; } } _0x5b3ee9(!![], '正在铭刻字体...'); try { await _0x3b613b(_0x292323(0x21c), _0x21ac4a), await _0x461681(_0x21ac4a), _0x18c07b(_0x292323(0x42d)); } catch (_0xe24b53) { _0x18c07b(_0x292323(0x490) + _0xe24b53[_0x292323(0x542)]); } finally { if (_0x292323(0x76f) === _0x292323(0x76f)) _0x5b3ee9(![]), _0x19c720[_0x292323(0x60e)] = ''; else { const _0x59c0ee = _0x208f55(_0x1329d2[_0x292323(0x825)]); _0x59c0ee && (_0x1124a9 = _0x59c0ee[_0x292323(0x420)], _0x3de620 = _0x59c0ee[_0x292323(0x58d)]); } } } else _0x262ab1(), _0x513fe6(_0x292323(0xa74), _0x292323(0x4fb)); } async function _0x46f416() { const _0x482849 = _0x3abecc; if (_0x482849(0xa46) !== _0x482849(0x478)) { const _0x12e5f0 = await _0x4b635a('确定要恢复默认字体吗？'); if (_0x12e5f0) { if (_0x482849(0x261) === _0x482849(0x724)) _0x5bd314(_0x2766aa), _0x51576f(_0x482849(0x2f9) + _0x54a478[_0x482849(0x420)] + _0x482849(0xb51)), _0x658455('chat', _0x482849(0x6ba)), _0x41176d(![]); else try { if ('qfWNH' === _0x482849(0x8e6)) { const _0x3b78a6 = _0x2b6b18[_0x482849(0x983)][_0x482849(0x742)](_0x7c341b => _0x7c341b[_0x482849(0x875)] === _0x482849(0xc2d) && _0x7c341b[_0x482849(0x565)])[_0x482849(0x5e9)](_0x15d6dd => ({ ..._0x15d6dd, 'source': _0x482849(0x306) })); _0x50666f[_0x482849(0x7e4)](..._0x3b78a6); } else await _0x597764(_0x482849(0x21c)), _0x5e29e5[_0x482849(0x2c9)] = '', document[_0x482849(0x7d3)][_0x482849(0xb56)][_0x482849(0x40c)](_0x482849(0x7bf)), _0x4358c8['textContent'] = _0x482849(0x7a4), _0x18c07b('已恢复默认字体。'); } catch (_0x2b01b6) { _0x18c07b('恢复失败了:\x20' + _0x2b01b6[_0x482849(0x542)]); } } } else { const _0x4fa75e = _0x1e8055(_0x5e913c['content'] ?? _0xa5a30a[_0x482849(0xbbc)] ?? '')[_0x482849(0x8bb)]() || _0x482849(0xc04) + (_0x25fbe2 || '未知表情') + ']'; if (_0x4fa75e) _0x18a7ec[_0x482849(0x850)]['push']({ 'senderId': _0x54ba13['id'], 'kind': _0x482849(0xbbc), 'content': _0x4fa75e }); } } function _0x2366ce() { const _0xe11a64 = _0x3abecc, _0x214fa6 = document[_0xe11a64(0x392)](_0xe11a64(0xb8a)); if (!_0x214fa6) return; const _0x4442c9 = localStorage[_0xe11a64(0x956)](_0xe11a64(0x5d9)) || '35'; document[_0xe11a64(0x7d3)][_0xe11a64(0xb56)][_0xe11a64(0xa6a)]('--primary-hue', _0x4442c9), _0x214fa6['value'] = _0x4442c9, _0x214fa6[_0xe11a64(0xabf)]('input', () => { const _0x329a19 = _0xe11a64; if (_0x329a19(0x763) !== 'znCaK') { const _0x303498 = _0x214fa6[_0x329a19(0x60e)]; document[_0x329a19(0x7d3)][_0x329a19(0xb56)][_0x329a19(0xa6a)](_0x329a19(0xbf3), _0x303498), localStorage[_0x329a19(0x963)](_0x329a19(0x5d9), _0x303498), _0x560f7a(); } else _0x4b0e17['classList'][_0x329a19(0x6ec)]('is-entering-from-right'), _0x30eaea[_0x329a19(0x42c)]['add'](_0x329a19(0x60a)), _0x50ef91[_0x329a19(0x42c)]['add']('is-visible'), _0x5dd8fb(() => { const _0x5b8e1c = _0x329a19; _0x273d49[_0x5b8e1c(0x42c)][_0x5b8e1c(0xb26)]('is-visible', 'is-exiting-left'), _0x183342[_0x5b8e1c(0x42c)][_0x5b8e1c(0xb26)](_0x5b8e1c(0xc26)), _0x2870f8[_0x5b8e1c(0x1ff)] = _0x2307f6, _0x2dd974(), _0x3da92c[_0x5b8e1c(0x624)] = ![]; }, 0x2bc); }); } function _0x378c51() { const _0x1bf03a = _0x3abecc; if (_0x1bf03a(0xb24) === _0x1bf03a(0xb24)) { const _0x1a7187 = document[_0x1bf03a(0x392)](_0x1bf03a(0x768)); if (!_0x1a7187) return; const _0x4dc292 = localStorage[_0x1bf03a(0x956)](_0x1bf03a(0x81a)) || '80'; document[_0x1bf03a(0x7d3)]['style'][_0x1bf03a(0xa6a)](_0x1bf03a(0x55d), _0x4dc292 + '%'), _0x1a7187[_0x1bf03a(0x60e)] = _0x4dc292, _0x1a7187[_0x1bf03a(0xabf)](_0x1bf03a(0x921), () => { const _0x1e5061 = _0x1bf03a; if (_0x1e5061(0xb48) === _0x1e5061(0x3f3)) _0x29ebaa(_0x4a54b4 + 0x1); else { const _0x4525e1 = _0x1a7187[_0x1e5061(0x60e)]; document['documentElement'][_0x1e5061(0xb56)]['setProperty']('--primary-lightness', _0x4525e1 + '%'), localStorage['setItem'](_0x1e5061(0x81a), _0x4525e1), _0x560f7a(); } }); } else _0x20297b['addEventListener'](_0x1bf03a(0x4b9), () => _0x13e4e1[_0x1bf03a(0x4b9)]()), _0x19c2fc['addEventListener'](_0x1bf03a(0xc38), _0x3f57de => { const _0x1a2d92 = _0x1bf03a, _0x308449 = _0x3f57de[_0x1a2d92(0xa4c)][_0x1a2d92(0x5a1)][0x0]; if (!_0x308449) return; try { const _0x311356 = _0x46372f[_0x1a2d92(0x38c)](_0x308449); _0x3ea8c3['style']['backgroundImage'] = _0x1a2d92(0x24b) + _0x311356 + '\x27)'; } catch (_0x281882) { _0x167396('图片预览失败:\x20' + _0x281882[_0x1a2d92(0x542)]); } }); } function _0x560f7a() { const _0x3caa38 = _0x3abecc, _0x5b89a1 = document[_0x3caa38(0x392)]('home-clock-container'); if (!_0x5b89a1) return; _0x2e4b8c[_0x3caa38(0xab3)][_0x3caa38(0xb8f)] ? 'azBdy' !== _0x3caa38(0x2eb) ? (_0x5b89a1['style']['color'] = _0x3caa38(0xa5d), _0x5b89a1[_0x3caa38(0xb56)][_0x3caa38(0x649)] = _0x3caa38(0x43c)) : (_0x38331c(), _0x96bfc6(_0x3caa38(0x765), _0x3caa38(0xa74))) : (_0x5b89a1[_0x3caa38(0xb56)][_0x3caa38(0xa96)] = _0x3caa38(0x50c), _0x5b89a1[_0x3caa38(0xb56)][_0x3caa38(0x649)] = 'none'); } function _0x51c3e1() { const _0x5b1241 = _0x3abecc, _0xb74fa5 = document['getElementById']('clock-color-toggle'); if (!_0xb74fa5) return; _0xb74fa5['checked'] = _0x2e4b8c[_0x5b1241(0xab3)][_0x5b1241(0xb8f)] || ![], _0xb74fa5['addEventListener'](_0x5b1241(0xc38), () => { const _0x573fa5 = _0x5b1241; _0x573fa5(0x7ad) !== 'RkLqI' ? (_0x2e4b8c[_0x573fa5(0xab3)][_0x573fa5(0xb8f)] = _0xb74fa5[_0x573fa5(0x71e)], _0x5a3c71(), _0x560f7a()) : _0x42d504(_0x573fa5(0x4fb), _0x573fa5(0x6ba)); }); } _0x1cd88d['addEventListener'](_0x3abecc(0x4b9), _0x2abdc2), _0x55b4c4[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x4a1e32 = _0x3abecc; _0xbb72f8(), _0x356524[_0x4a1e32(0x4b9)](); }), _0x356524[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x4b518a); const _0xa77016 = { 'home': document[_0x3abecc(0x392)]('home-screen'), 'chat': document[_0x3abecc(0x392)](_0x3abecc(0x890)), 'settings': document[_0x3abecc(0x392)](_0x3abecc(0x966)), 'userProfile': document[_0x3abecc(0x392)](_0x3abecc(0x9e1)), 'characterEdit': document['getElementById'](_0x3abecc(0xbb6)), 'groupChatCreate': document[_0x3abecc(0x392)](_0x3abecc(0x659)), 'wallpaper': document[_0x3abecc(0x392)](_0x3abecc(0x26a)), 'worldBook': document['getElementById'](_0x3abecc(0x4b6)), 'worldBookEditor': document['getElementById'](_0x3abecc(0x2f3)), 'groupSettings': document['getElementById']('group-settings-screen'), 'music': document[_0x3abecc(0x392)](_0x3abecc(0x757)), 'friendCircleList': document[_0x3abecc(0x392)]('friend-circle-list-screen'), 'friendCircleEdit': document[_0x3abecc(0x392)](_0x3abecc(0x65c)), 'meetingList': document[_0x3abecc(0x392)](_0x3abecc(0x847)), 'meetingView': document[_0x3abecc(0x392)](_0x3abecc(0xba9)), 'userProfileList': document[_0x3abecc(0x392)]('user-profile-list-screen'), 'diaryList': document[_0x3abecc(0x392)](_0x3abecc(0x48b)), 'diaryView': document[_0x3abecc(0x392)](_0x3abecc(0x1d6)), 'musicLibrary': document[_0x3abecc(0x392)]('music-library-screen'), 'musicUploadAltar': document[_0x3abecc(0x392)](_0x3abecc(0xbc3)), 'accounting': document[_0x3abecc(0x392)](_0x3abecc(0x8d2)), 'snoopList': document['getElementById']('snoop-list-screen'), 'snoopPhone': document[_0x3abecc(0x392)]('snoop-phone-screen'), 'calendar': document[_0x3abecc(0x392)](_0x3abecc(0x380)) }, _0x1b4258 = document[_0x3abecc(0x392)](_0x3abecc(0x600)), _0x1c0ea9 = document[_0x3abecc(0x392)](_0x3abecc(0xa30)), _0x179d09 = document[_0x3abecc(0x392)]('reset-feed-bg-button'), _0x3ff48c = document[_0x3abecc(0x392)](_0x3abecc(0x99e)), _0x5d83cc = document[_0x3abecc(0x392)](_0x3abecc(0x906)), _0x5ed9ac = document[_0x3abecc(0x392)](_0x3abecc(0x927)), _0x34bb26 = document['getElementById'](_0x3abecc(0x409)), _0x48928a = document[_0x3abecc(0x392)](_0x3abecc(0x687)); document[_0x3abecc(0x392)](_0x3abecc(0x9eb))['addEventListener'](_0x3abecc(0x4b9), async () => { const _0x19139f = _0x3abecc; if (_0x19139f(0xbd3) === _0x19139f(0x1f4)) { _0x3ce6be && (_0x43ff9b(_0x25c8b8), _0x1a17c4 = null); _0x3f28de['getElementById'](_0x19139f(0x5a3))[_0x19139f(0xb56)]['display'] = _0x19139f(0x3a4); const _0x6bddc3 = _0x402f74[_0x19139f(0x392)]('snoop-dock'); if (_0x6bddc3) _0x6bddc3['remove'](); const _0x5377e7 = _0x49b2c5[_0x19139f(0x392)](_0x19139f(0x647)); if (_0x5377e7) _0x5377e7[_0x19139f(0xb26)](); _0x8b5f77(_0x19139f(0xb16), _0x19139f(0xbab)); } else { const _0xe05a1 = await _0x4b635a(_0x19139f(0xa18)); if (_0xe05a1) { if (_0x19139f(0xaba) !== _0x19139f(0xaba)) { const _0x5854f1 = _0x511f2f[_0x19139f(0x442)][_0x19139f(0x69e)](_0x3098b0 => _0x3098b0[_0x19139f(0xa2a)]['includes'](_0x146192)); if (!_0x5854f1) return ''; const _0x458cc8 = _0x4f3b1a(_0x5854f1['id']), _0x17b432 = _0x35e8d2[_0x19139f(0x6a6)][_0x19139f(0x742)](_0xd71100 => _0xd71100[_0x19139f(0x1de)] === _0x458cc8['id'] || !_0xd71100['userId']); if (_0x17b432['length'] === 0x0) return ''; const _0x1edd5d = _0x17b432[_0x19139f(0x5e9)](_0x1f67ef => { const _0x4b0459 = _0x19139f, _0x18b823 = _0x1f67ef[_0x4b0459(0x875)] === 'important' ? _0x4b0459(0x9df) : '待办'; return '-\x20[' + _0x18b823 + ']\x20' + _0x1f67ef[_0x4b0459(0x215)] + ':\x20' + _0x1f67ef[_0x4b0459(0xa19)]; })[_0x19139f(0x52b)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x458cc8[_0x19139f(0x420)] + _0x19139f(0xaef) + _0x1edd5d; } else { localStorage[_0x19139f(0x4a7)](_0x19139f(0xc22)), localStorage[_0x19139f(0x4a7)]('cardState'), localStorage[_0x19139f(0x4a7)](_0x19139f(0xb6d)), localStorage['removeItem'](_0x19139f(0x4ac)); const _0x31d661 = []; for (let _0x8c0e73 = 0x0; _0x8c0e73 < localStorage[_0x19139f(0x6f2)]; _0x8c0e73++) { if (_0x19139f(0x864) !== _0x19139f(0x864)) _0x4bb6a5 = _0x393265[_0x19139f(0x91f)] || ''; else { const _0x404906 = localStorage[_0x19139f(0xbf4)](_0x8c0e73); _0x404906 && _0x404906[_0x19139f(0x629)]('appIconPosition_') && ('mjNyr' !== _0x19139f(0x3f0) ? _0x31d661[_0x19139f(0x7e4)](_0x404906) : (_0x43ba97[_0x19139f(0x5b1)](_0x19139f(0x2c1), _0x10e731), _0x2c6c30 && (_0xfc3846[_0x19139f(0xb56)]['backgroundImage'] = ''))); } } _0x31d661[_0x19139f(0xb5e)](_0x5c6a79 => localStorage[_0x19139f(0x4a7)](_0x5c6a79)), await _0x3b613b(_0x19139f(0x6a5), await _0x5db80c(_0x19139f(0xa59))), _0x18c07b(_0x19139f(0x423)), setTimeout(() => location[_0x19139f(0xb25)](), 0x5dc); } } } }); const _0x1cf0e9 = document[_0x3abecc(0x392)](_0x3abecc(0xacc)), _0x5c63f8 = document[_0x3abecc(0x392)](_0x3abecc(0xa53)), _0x5986e6 = document['getElementById'](_0x3abecc(0x8c6)), _0x1613de = document[_0x3abecc(0x392)](_0x3abecc(0x9d5)), _0x548b0b = document[_0x3abecc(0x392)](_0x3abecc(0xb6f)), _0xa9ef91 = document['getElementById'](_0x3abecc(0x4e9)), _0x4d0323 = document[_0x3abecc(0x392)](_0x3abecc(0x222)), _0x12ee15 = document['getElementById'](_0x3abecc(0x5c6)), _0x1dd84c = document[_0x3abecc(0x392)](_0x3abecc(0x313)), _0x398a96 = document[_0x3abecc(0x392)](_0x3abecc(0xb00)), _0x253957 = document[_0x3abecc(0x392)](_0x3abecc(0x31d)), _0x56c1ea = document[_0x3abecc(0x392)](_0x3abecc(0xb76)), _0x8d14ca = document[_0x3abecc(0x392)](_0x3abecc(0x83d)), _0x4a354b = document[_0x3abecc(0x392)](_0x3abecc(0xb13)), _0x1664a0 = document[_0x3abecc(0x392)](_0x3abecc(0x4ce)), _0x741cc6 = document['getElementById']('back-to-char-select-from-edit'), _0x5ec660 = document[_0x3abecc(0x392)](_0x3abecc(0x31e)), _0x51b7ff = document[_0x3abecc(0x392)](_0x3abecc(0x96a)), _0x3339ef = document[_0x3abecc(0x392)](_0x3abecc(0x890)), _0x2d4f68 = document[_0x3abecc(0x392)](_0x3abecc(0x733)), _0xd8c7f5 = document['getElementById'](_0x3abecc(0x971)), _0x3afa5f = document[_0x3abecc(0x392)](_0x3abecc(0x4c7)), _0x289097 = document['getElementById'](_0x3abecc(0xa70)), _0x4161c4 = document[_0x3abecc(0x392)](_0x3abecc(0x8c4)), _0x5c2466 = document['getElementById']('quote-preview-sender'), _0x2d6ec4 = document[_0x3abecc(0x392)](_0x3abecc(0xbed)), _0x561898 = document[_0x3abecc(0x392)](_0x3abecc(0x6ca)), _0x3757d5 = document[_0x3abecc(0x392)]('char-name-header'), _0x1f2fd9 = document[_0x3abecc(0x392)]('chat-sticker-button'), _0x28c089 = document[_0x3abecc(0x392)](_0x3abecc(0x5b4)), _0x55a537 = document[_0x3abecc(0x392)](_0x3abecc(0x84b)), _0x78ac47 = document['getElementById'](_0x3abecc(0x337)), _0x188245 = document[_0x3abecc(0x392)](_0x3abecc(0x982)), _0x511203 = document['getElementById']('offline-scene-view'), _0x20451a = document[_0x3abecc(0x392)](_0x3abecc(0x451)), _0x133cfb = document[_0x3abecc(0x392)](_0x3abecc(0x315)), _0x316f32 = document[_0x3abecc(0x392)](_0x3abecc(0xc23)), _0x2d0572 = document['getElementById']('save-api-settings-button'), _0x2b95f8 = document['getElementById']('fetch-models-button'), _0x2f14cd = document[_0x3abecc(0x392)](_0x3abecc(0xc02)), _0x2482a8 = document[_0x3abecc(0x392)](_0x3abecc(0xa9c)), _0x2a0067 = document['getElementById'](_0x3abecc(0x484)), _0x2b744 = document[_0x3abecc(0x392)](_0x3abecc(0x819)), _0x124c95 = document[_0x3abecc(0x392)](_0x3abecc(0x437)), _0x50126d = document[_0x3abecc(0x392)]('user-persona'), _0x54438e = document[_0x3abecc(0x392)](_0x3abecc(0x961)), _0x35b68b = document[_0x3abecc(0x392)](_0x3abecc(0x3c5)), _0x2f76e2 = document[_0x3abecc(0x392)]('character-edit-title'), _0x437154 = document[_0x3abecc(0x392)]('char-edit-name'), _0x5886c1 = document[_0x3abecc(0x392)](_0x3abecc(0x7c1)), _0x3ef78d = document[_0x3abecc(0x392)](_0x3abecc(0xa6c)), _0x343afb = document[_0x3abecc(0x392)](_0x3abecc(0xacb)), _0x299fd0 = document[_0x3abecc(0x392)]('char-edit-persona'), _0x40d8fe = document[_0x3abecc(0x392)]('save-char-button'), _0x87b1b7 = document[_0x3abecc(0x392)](_0x3abecc(0x846)), _0x83b1c8 = document[_0x3abecc(0x392)](_0x3abecc(0x323)); let _0xcd188e = null; const _0x5bd072 = _0x3abecc(0xb55), _0x2cda90 = _0x3abecc(0x7ef); _0x2e4b8c = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x5a3c71() { const _0xc034d8 = _0x3abecc; try { const _0x397e6d = _0x2e4b8c['characters']['map'](_0x4c5b13 => { const _0xd06e54 = _0x198c, _0x2bf716 = { ..._0x4c5b13 }; return _0x2bf716[_0xd06e54(0x58d)] && _0x2bf716[_0xd06e54(0x58d)][_0xd06e54(0x629)]('data:image') && (_0xd06e54(0x865) === _0xd06e54(0x865) ? delete _0x2bf716[_0xd06e54(0x58d)] : _0x52cf7b++), _0x2bf716; }), _0x5c5122 = { 'version': 0x1, 'characters': _0x397e6d, 'worldBooks': _0x2e4b8c[_0xc034d8(0x285)], 'chats': _0x2e4b8c['chats'], 'apiSettings': _0x2e4b8c['apiSettings'], 'preferences': _0x2e4b8c['preferences'], 'activeChatId': _0x2e4b8c['activeChatId'], 'diaries': _0x2e4b8c[_0xc034d8(0x9bb)], 'friendCircles': _0x2e4b8c['friendCircles'], 'activeFriendCircleId': _0x2e4b8c['activeFriendCircleId'], 'userProfiles': _0x2e4b8c['userProfiles'], 'activeUserProfileId': _0x2e4b8c['activeUserProfileId'], 'accountingData': _0x2e4b8c[_0xc034d8(0x41f)], 'accountingLedger': _0x2e4b8c[_0xc034d8(0x2c0)], 'calendarEvents': _0x2e4b8c[_0xc034d8(0x6a6)] }; localStorage[_0xc034d8(0x963)]('appState', JSON[_0xc034d8(0x2bf)](_0x5c5122)); } catch (_0x4196c9) { console[_0xc034d8(0x5b1)](_0xc034d8(0x7b9), _0x4196c9), _0x18c07b('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。'); } } async function _0x3d6301() { const _0x26ee85 = _0x3abecc; if (!_0x2e4b8c[_0x26ee85(0x404)] || _0x2e4b8c[_0x26ee85(0x404)][_0x26ee85(0x6f2)] === 0x0) { console[_0x26ee85(0xbf0)](_0x26ee85(0x72f)); return; } console[_0x26ee85(0xbf0)]('启动头像恢复程序...'); for (const _0x28aa28 of _0x2e4b8c[_0x26ee85(0x404)]) { if (!_0x28aa28[_0x26ee85(0x58d)]) { if (_0x26ee85(0x98f) === _0x26ee85(0xaa3)) _0x33f832 = _0x50dfb7(_0x41d758); else try { if (_0x26ee85(0x2b8) !== _0x26ee85(0x2b8)) _0x280600 = _0x330429; else { const _0x5d1f78 = await _0x1de353('char_avatar_' + _0x28aa28['id']); _0x5d1f78 && (_0x28aa28[_0x26ee85(0x58d)] = await _0x5a357c(_0x5d1f78)); } } catch (_0x21b76b) { 'LSUaB' === _0x26ee85(0xc06) ? console['error'](_0x26ee85(0x3e6) + _0x28aa28[_0x26ee85(0x420)] + '\x20(' + _0x28aa28['id'] + _0x26ee85(0x4e8), _0x21b76b) : _0x4b1865('错误:\x20' + _0x5a3579[_0x26ee85(0x542)]); } } } console['log'](_0x26ee85(0x376)); } function _0x31fe73() { const _0x5c3425 = _0x3abecc; let _0x2b8ddc = null; try { if ('ANGsG' === _0x5c3425(0x3a2)) _0x2b8ddc = localStorage[_0x5c3425(0x956)]('appState'); else { const _0x5c714b = (_0x5735af - _0x532ac5) / (0x3e8 * 0x3c); _0x5c714b < 0x3c ? _0x4660b8 += _0x5c3425(0x22c) : _0x4a3718 += _0x5c3425(0x643) + _0x1402b6['round'](_0x5c714b / 0x3c) + _0x5c3425(0x900); } } catch (_0x2fe04f) { console[_0x5c3425(0x5b1)]('Failed\x20to\x20read\x20state\x20from\x20localStorage:', _0x2fe04f); } if (_0x2b8ddc) try { if (_0x5c3425(0xaf0) === _0x5c3425(0xaf0)) { const _0x2e7167 = JSON[_0x5c3425(0x30c)](_0x2b8ddc), _0x12583a = { ..._0x2e4b8c }, _0x3be5fe = { ..._0x12583a, ..._0x2e7167 }; _0x3be5fe[_0x5c3425(0xab3)] = { ..._0x12583a[_0x5c3425(0xab3)], ..._0x2e7167[_0x5c3425(0xab3)] || {} }, _0x3be5fe[_0x5c3425(0xa8a)] = { ..._0x12583a['apiSettings'], ..._0x2e7167[_0x5c3425(0xa8a)] || {} }, Object[_0x5c3425(0x9cb)](_0x2e4b8c, _0x3be5fe); } else { const _0x4aa66b = _0x131406[_0x5c3425(0x92f)](); if (_0x55e45c[_0x5c3425(0xaed)](_0x1aa96e => _0x4aa66b[_0x5c3425(0x629)](_0x1aa96e))) { const _0x27ab75 = _0x7582c7[_0x3097f9]; if (typeof _0x27ab75 === _0x5c3425(0x41d)) _0x168098[_0x5c3425(0x7e4)](_0x27ab75); if (_0x98ac0a[_0x5c3425(0x74a)](_0x27ab75)) _0x27ab75[_0x5c3425(0xb5e)](_0x280607 => { const _0x46b432 = _0x5c3425; if (typeof _0x280607 === 'string') _0x2a90ac[_0x46b432(0x7e4)](_0x280607); }); } } } catch (_0x17806d) { console[_0x5c3425(0x5b1)](_0x5c3425(0x4f2), _0x17806d), localStorage[_0x5c3425(0x4a7)](_0x5c3425(0x332)); } const _0x589bb7 = _0x2e4b8c['characters'][_0x5c3425(0x6f2)] === 0x0; return !_0x2e4b8c[_0x5c3425(0x442)][_0x5c3425(0x69e)](_0x37b501 => _0x37b501['id'] === _0x2e4b8c[_0x5c3425(0x7ee)]) && (_0x2e4b8c[_0x5c3425(0x7ee)] = _0x2e4b8c['chats'][0x0]?.['id'] || null), _0x2b8ddc && _0x5a3c71(), _0x589bb7; } function _0x5f38ff() { const _0x4bd4eb = _0x3abecc; if (_0x4bd4eb(0x782) === 'KBhFX') { if (!_0x2e4b8c[_0x4bd4eb(0x7ee)]) return; try { localStorage[_0x4bd4eb(0x963)](_0x4bd4eb(0x76e) + _0x2e4b8c[_0x4bd4eb(0x7ee)], JSON[_0x4bd4eb(0x2bf)](_0x2e4b8c[_0x4bd4eb(0x2c8)])); } catch (_0xb8fc4e) { if (_0x4bd4eb(0x5e0) !== 'hVcJC') console['error'](_0x4bd4eb(0x818), _0xb8fc4e), _0x18c07b(_0x4bd4eb(0x6cc)); else { const _0x26a24b = _0x1ebf60[_0x4bd4eb(0x404)][_0x4bd4eb(0x69e)](_0x556c55 => _0x556c55['id'] === _0x3d26ff); _0x4fb58b['value'] = _0x26a24b[_0x4bd4eb(0xaf2)] || '', _0x508c11[_0x4bd4eb(0x60e)] = _0x26a24b[_0x4bd4eb(0x91f)] || ''; if (_0x3eb14e) _0x234e15[_0x4bd4eb(0xb56)]['backgroundImage'] = _0x26a24b[_0x4bd4eb(0xaf2)] ? _0x4bd4eb(0x24b) + _0x26a24b['avatarFrameUrl'] + '\x27)' : ''; } } } else _0x598946[_0x4bd4eb(0x5b1)](_0x4bd4eb(0xb42), _0x3b57e1); } function _0x7af3ed() { const _0x13d1b9 = _0x3abecc; if (!_0x2e4b8c[_0x13d1b9(0x7ee)]) { _0x2e4b8c[_0x13d1b9(0x2c8)] = [], _0x2d9cac(); return; } let _0x2765ef = null; try { _0x13d1b9(0x3fe) !== _0x13d1b9(0x3fe) ? (_0x5ebfa2[_0x13d1b9(0x2c8)][_0x5c438b][_0x13d1b9(0x46d)] = !![], _0x368137()) : _0x2765ef = localStorage[_0x13d1b9(0x956)]('chatHistory_' + _0x2e4b8c['activeChatId']); } catch (_0x3db32a) { console[_0x13d1b9(0x5b1)](_0x13d1b9(0x7aa) + _0x2e4b8c[_0x13d1b9(0x7ee)], _0x3db32a); } let _0xf8db21 = []; if (_0x2765ef) try { if (_0x13d1b9(0x616) !== 'lGqWX') { const _0x29549a = JSON[_0x13d1b9(0x30c)](_0x2765ef); Array[_0x13d1b9(0x74a)](_0x29549a) && (_0xf8db21 = _0x29549a['filter'](_0x37e4d7 => _0x37e4d7 && typeof _0x37e4d7 === _0x13d1b9(0x29f) && typeof _0x37e4d7[_0x13d1b9(0x253)] === _0x13d1b9(0x41d) && typeof _0x37e4d7[_0x13d1b9(0xa19)] !== 'undefined')); } else { const _0x30715c = _0xc525b0[_0x13d1b9(0xa4c)][_0x13d1b9(0x641)]['id']; _0x475778(_0x13d1b9(0x2d0))[_0x13d1b9(0x54a)](_0x437aee => { _0x437aee && _0x428785(_0x30715c); }); } } catch (_0x5285cc) { console[_0x13d1b9(0x5b1)](_0x13d1b9(0x28c) + _0x2e4b8c[_0x13d1b9(0x7ee)] + _0x13d1b9(0x9fe), _0x5285cc); try { _0x13d1b9(0xa26) !== 'ONaQD' ? (_0x43c1b1(![]), _0x34944f['isGenerating'] = ![]) : localStorage[_0x13d1b9(0x4a7)](_0x13d1b9(0x76e) + _0x2e4b8c[_0x13d1b9(0x7ee)]); } catch (_0x6df7f4) { _0x13d1b9(0x4ae) !== _0x13d1b9(0x56f) ? console[_0x13d1b9(0x5b1)](_0x13d1b9(0xba3), _0x6df7f4) : _0x303a73[_0x13d1b9(0x324)] = _0x13d1b9(0x572); } } _0x2e4b8c[_0x13d1b9(0x2c8)] = _0xf8db21, _0x2d4f68[_0x13d1b9(0x2c9)] = '', _0x2e4b8c[_0x13d1b9(0x2c8)] && _0x2e4b8c['conversationHistory']['forEach']((_0x2967b6, _0x5d4d02) => _0x16ed9e(_0x2967b6, _0x5d4d02)), setTimeout(() => { const _0x3d5e16 = _0x13d1b9; _0x2d4f68[_0x3d5e16(0xbd7)] = _0x2d4f68[_0x3d5e16(0x220)]; }, 0x0); } async function _0x243c3f() { const _0x5b5d76 = _0x3abecc; if (_0x5b5d76(0x56a) !== _0x5b5d76(0x56a)) _0x36b0aa[_0x5b5d76(0x5b1)](_0x5b5d76(0x4b3), _0x1f4d8e); else { const _0x1e1497 = document['getElementById'](_0x5b5d76(0x7bd)); if (!_0x1e1497) { console['error'](_0x5b5d76(0x881)); return; } try { if (_0x5b5d76(0x462) === 'nxjUH') { if (!_0x449dbf[_0x5b5d76(0x74a)](_0x24dd3a)) return '<p>格式错误</p>'; if (_0x1b44d6[_0x5b5d76(0x6f2)] === 0x0) return _0x5b5d76(0x51b); return _0x2adc6d[_0x5b5d76(0x474)]((_0x348a5a, _0x568f32) => new _0x2d5500(_0x568f32[_0x5b5d76(0x518)]) - new _0x27dbc5(_0x348a5a['timestamp'])), _0x592b91['map'](_0x3a7806 => { const _0x1a0455 = _0x5b5d76, _0x4045c9 = (_0x3a7806[_0x1a0455(0x732)] || [])['map'](_0x4d6429 => '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x4d6429 + _0x1a0455(0x71a))[_0x1a0455(0x52b)](''); return _0x1a0455(0x2f4) + (_0x3a7806[_0x1a0455(0xac3)] || '未知餐厅') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x3a7806[_0x1a0455(0x518)] || '') + _0x1a0455(0x391) + (_0x3a7806['status'] || _0x1a0455(0x80a)) + _0x1a0455(0xb50) + _0x4045c9 + _0x1a0455(0x74b) + (_0x3a7806[_0x1a0455(0x8d1)] || 0x0)[_0x1a0455(0x8c5)](0x2) + _0x1a0455(0x1db); })[_0x5b5d76(0x52b)](''); } else { let _0x40177a = await _0x1de353(_0x5b5d76(0x6a5)); if (!_0x40177a) { if (_0x5b5d76(0x6cb) === _0x5b5d76(0x282)) return [_0x59167d]; else { const _0x2f98b8 = localStorage[_0x5b5d76(0x956)]('customWallpaper'); if (_0x2f98b8) { if (_0x5b5d76(0xaa6) !== 'gwJdG') console[_0x5b5d76(0xbf0)](_0x5b5d76(0x4f9)), _0x40177a = await _0x5db80c(_0x2f98b8), await _0x3b613b(_0x5b5d76(0x6a5), _0x40177a), localStorage[_0x5b5d76(0x4a7)](_0x5b5d76(0x7f6)); else { const _0x17b5e6 = (_0x4c83f2[_0x5b5d76(0x732)] || [])[_0x5b5d76(0x5e9)](_0x3d4139 => _0x5b5d76(0x1fb) + _0x3d4139 + '</span>\x0a\x20\x20\x20\x20\x20\x20</div>')[_0x5b5d76(0x52b)](''); return _0x5b5d76(0x2f4) + (_0x4061ff['restaurant_name'] || _0x5b5d76(0xbbb)) + _0x5b5d76(0x7bb) + (_0x1ebef8[_0x5b5d76(0x518)] || '') + _0x5b5d76(0x391) + (_0xe8ec23[_0x5b5d76(0x86d)] || _0x5b5d76(0x80a)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x17b5e6 + _0x5b5d76(0x74b) + (_0xc6e342['total_cost'] || 0x0)[_0x5b5d76(0x8c5)](0x2) + _0x5b5d76(0x1db); } } } } _0x40177a ? (_0x1e1497[_0x5b5d76(0xb56)][_0x5b5d76(0xb85)] = _0x5b5d76(0x887) + URL[_0x5b5d76(0x38c)](_0x40177a) + ')', _0x1e1497[_0x5b5d76(0xb56)][_0x5b5d76(0xa1f)] = _0x5b5d76(0x883), _0x1e1497[_0x5b5d76(0xb56)][_0x5b5d76(0x979)] = _0x5b5d76(0x6a0)) : _0x1e1497[_0x5b5d76(0xb56)][_0x5b5d76(0xb85)] = ''; } } catch (_0x2334b2) { if ('zUgpn' === 'zUgpn') console[_0x5b5d76(0x5b1)](_0x5b5d76(0x2c1), _0x2334b2), _0x1e1497 && ('juQeA' === _0x5b5d76(0x654) ? _0x1f520f = '你的任务是【首次生成】这个应用的内容。' : _0x1e1497[_0x5b5d76(0xb56)][_0x5b5d76(0xb85)] = ''); else { const _0x3cd26f = _0x2df380[_0x5b5d76(0x30c)](_0x1b5c77); _0x39add2[_0x5b5d76(0x74a)](_0x3cd26f) && (_0x3e25c5 = _0x3cd26f[_0x5b5d76(0x742)](_0x45006f => _0x45006f && typeof _0x45006f === _0x5b5d76(0x29f) && typeof _0x45006f[_0x5b5d76(0x253)] === _0x5b5d76(0x41d) && typeof _0x45006f['content'] !== _0x5b5d76(0x8f9))); } } } } function _0x3b7495() { const _0x3bdedf = _0x3abecc, _0x3086f3 = localStorage['getItem'](_0x3bdedf(0x53a)); _0x3086f3 ? document['getElementById'](_0x3bdedf(0x757))[_0x3bdedf(0xb56)][_0x3bdedf(0xa6a)]('--feed-bg-image', _0x3bdedf(0x887) + _0x3086f3 + ')') : document[_0x3bdedf(0x392)](_0x3bdedf(0x757))['style'][_0x3bdedf(0xa6a)](_0x3bdedf(0x20e), _0x3bdedf(0x3a4)); } async function _0x2e2623(_0x318b84) { const _0x48ea33 = _0x3abecc; if ('Pqddk' === _0x48ea33(0x793)) try { await _0x3b613b('wallpaper_main', _0x318b84), await _0x243c3f(), _0x18c07b(_0x48ea33(0x953)); } catch (_0x209412) { console[_0x48ea33(0x5b1)](_0x48ea33(0x520), _0x209412), _0x18c07b('保存壁纸失败:\x20' + _0x209412[_0x48ea33(0x542)]); } else { const _0x60b23 = 0x32; if (_0x16a375 < _0x5f3a13 - _0x60b23) _0x1063d9(_0x3c2905 + 0x1); else _0x13e95d > _0x9086c0 + _0x60b23 && _0x5af2d3(_0x2a66a2 - 0x1); } } function _0x3b6c33(_0x5ac450) { const _0x5844cc = _0x3abecc; if (_0x5844cc(0x5a0) === 'Cztwm') { const _0x11bef1 = { 'quotedMessage': null, 'content': _0x5ac450 }, _0x2c08c7 = _0x5ac450['match'](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x2c08c7 && (_0x5844cc(0x913) === _0x5844cc(0x913) ? (_0x11bef1['quotedMessage'] = { 'sender': _0x2c08c7[0x1][_0x5844cc(0x8bb)](), 'content': _0x2c08c7[0x2][_0x5844cc(0x8bb)]() }, _0x11bef1[_0x5844cc(0xa19)] = _0x5ac450[_0x5844cc(0x58c)](_0x2c08c7[0x0]['length'])[_0x5844cc(0x8bb)]()) : _0x566f8c['push']('[' + _0x9134ae(_0x1ad9ba) + _0x5844cc(0x988) + (_0x2d65b6['content']?.[_0x5844cc(0xaab)](/：(.+?)]/)?.[0x1] || '表情') + ']')), _0x11bef1; } else { const _0x136277 = _0x14e0e1[_0x5844cc(0x7d1)]((_0x1cebb0 - _0xbeb373) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x241b1b += _0x5844cc(0xab5) + _0x136277 + '\x20天没活动了。你生成的内容必须是全新的事件。\x0a'; } } const _0x364c66 = document[_0x3abecc(0x392)](_0x3abecc(0x8a9)), _0x4ba37f = document[_0x3abecc(0x392)](_0x3abecc(0x776)), _0x5052a9 = document[_0x3abecc(0x392)](_0x3abecc(0x371)), _0x2f616a = document[_0x3abecc(0x392)](_0x3abecc(0x352)), _0x5b853f = document[_0x3abecc(0x392)]('cancel-action-button'), _0xd8a726 = document[_0x3abecc(0x392)](_0x3abecc(0x9c6)), _0xc401fc = document[_0x3abecc(0x392)](_0x3abecc(0xb0d)), _0x4a3aa4 = document[_0x3abecc(0x392)](_0x3abecc(0x406)), _0x32553a = document[_0x3abecc(0x392)](_0x3abecc(0x5f7)), _0x2bf04e = document[_0x3abecc(0x392)](_0x3abecc(0x9a8)), _0x58eee1 = document[_0x3abecc(0x392)](_0x3abecc(0x577)); let _0x2e1c0a = null; function _0xb978ff(_0x4ea44b) { const _0x90f797 = _0x3abecc; _0x2e1c0a = _0x4ea44b, _0x364c66[_0x90f797(0x42c)][_0x90f797(0x6ec)](_0x90f797(0x3a9)); } function _0x206e83() { const _0x226e22 = _0x3abecc; _0x364c66['classList'][_0x226e22(0xb26)]('show'); } function _0x37fa9f() { _0x206e83(), _0x2e1c0a = null; } function _0x3564b9() { const _0x181411 = _0x3abecc; if (_0x2e1c0a === null) return; _0x2e4b8c[_0x181411(0x2c8)][_0x181411(0x872)](_0x2e1c0a, 0x1), _0x5f38ff(), _0x46a9ae(), _0x37fa9f(); } function _0x37c129() { const _0x1da2d8 = _0x3abecc; if (_0x2e1c0a === null) return; const _0x16ea90 = _0x2e4b8c[_0x1da2d8(0x2c8)][_0x2e1c0a]; if (!_0x16ea90) return; _0x32553a[_0x1da2d8(0x60e)] = _0x16ea90[_0x1da2d8(0xa19)], _0x206e83(), _0xc401fc[_0x1da2d8(0x42c)][_0x1da2d8(0x6ec)](_0x1da2d8(0x3a9)), _0x32553a[_0x1da2d8(0x464)](); } function _0x37fdb0() { const _0x341206 = _0x3abecc; if (_0x2e1c0a === null) return; const _0x2dc54c = _0x32553a['value'][_0x341206(0x8bb)](); if (_0x2dc54c === '') { _0x33333c(); return; } const _0x1b3826 = _0x2e4b8c['conversationHistory'][_0x2e1c0a]; if (_0x1b3826) { if ('AnJVb' === _0x341206(0x504)) { const _0x3c3d98 = new _0x3285e1(_0x7c98b2[_0x341206(0x518)]), _0x1228e9 = _0x50bfa1[_0x341206(0x552)]((_0x2d5506 - _0x3c3d98) / (0x3e8 * 0x3c)); if (_0x1228e9 < 0x5) _0x2a7696 += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x1228e9 < 0x78) _0x32c663 += '\x0a-\x20**对话状态**:\x20群里在' + _0x1228e9 + '分钟前聊过，请注意衔接。'; else { const _0x2cd156 = _0x1adef5[_0x341206(0x552)](_0x1228e9 / 0x3c); if (_0x2cd156 < 0x30) _0x1460e1 += _0x341206(0x8d7) + _0x2cd156 + _0x341206(0x3e7); else _0x230ae5 += '\x0a-\x20**对话状态**:\x20群里已经有' + _0x4c5f89[_0x341206(0x552)](_0x2cd156 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } else _0x1b3826[_0x341206(0xa19)] = _0x2dc54c, _0x5f38ff(), _0x46a9ae(); } _0xc401fc['classList'][_0x341206(0xb26)](_0x341206(0x3a9)), _0x2e1c0a = null; } function _0x33333c() { const _0x4cb072 = _0x3abecc; _0xc401fc[_0x4cb072(0x42c)][_0x4cb072(0xb26)]('show'), _0x2e1c0a = null; } _0x4ba37f[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x37fa9f), _0x5b853f[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x37fa9f), _0x2f616a[_0x3abecc(0xabf)]('click', _0x3564b9), _0x5052a9['addEventListener']('click', _0x37c129), _0xd8a726[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x501902), _0x561898['addEventListener']('click', _0x5a7d24), _0x2bf04e['addEventListener'](_0x3abecc(0x4b9), _0x37fdb0), _0x58eee1[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x33333c), _0x4a3aa4[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x33333c); function _0x501902() { const _0xa5fbe9 = _0x3abecc; if (_0x2e1c0a === null) return; const _0x4a2b92 = _0x2e4b8c[_0xa5fbe9(0x2c8)][_0x2e1c0a]; if (!_0x4a2b92) return; const _0x2f778f = _0x28f748(); let _0x3f550e = '未知'; if (_0x4a2b92[_0xa5fbe9(0x253)] === 'user') _0x3f550e = _0x2e4b8c[_0xa5fbe9(0x312)]['name'] || '我'; else { if (_0xa5fbe9(0x80b) !== _0xa5fbe9(0x696)) { const _0x1d22c3 = _0x4a2b92['senderId'] || _0x2f778f?.['participantIds'][0x0], _0x1bda82 = _0x2653c6(_0x1d22c3); _0x3f550e = _0x1bda82 ? _0x1bda82['name'] : '角色'; } else return _0x14778e[_0xa5fbe9(0x7e4)](_0x407007), _0x1c60b0; } let _0x58f43f = _0x4a2b92[_0xa5fbe9(0xa19)] || ''; if (_0x4a2b92['displayUrl']) _0x58f43f = _0xa5fbe9(0x1e6); if (_0x4a2b92[_0xa5fbe9(0x3f7)]) _0x58f43f = _0xa5fbe9(0x81f); if (_0x58f43f[_0xa5fbe9(0x6f2)] > 0x32) _0x58f43f = _0x58f43f['substring'](0x0, 0x32) + _0xa5fbe9(0x86f); _0x2e4b8c[_0xa5fbe9(0x3ab)] = { 'sender': _0x3f550e, 'content': _0x58f43f }, _0x20673d(), _0x37fa9f(), _0xd8c7f5[_0xa5fbe9(0x464)](); } function _0x20673d() { const _0x7aec = _0x3abecc; if (!_0x2e4b8c[_0x7aec(0x3ab)]) return; _0x5c2466['textContent'] = _0x7aec(0x761) + _0x2e4b8c[_0x7aec(0x3ab)]['sender'], _0x2d6ec4[_0x7aec(0x324)] = _0x2e4b8c[_0x7aec(0x3ab)][_0x7aec(0xa19)], _0x4161c4[_0x7aec(0xb56)][_0x7aec(0x993)] = _0x7aec(0x94c); } function _0x5a7d24() { const _0x1a0dc2 = _0x3abecc; if (_0x1a0dc2(0x4ab) === _0x1a0dc2(0x255)) { const _0x42bed3 = new _0x16b218(), _0x28ed98 = _0x1321fd['getElementById'](_0x1a0dc2(0x63c)), _0x59393e = _0x59052f[_0x1a0dc2(0x392)]('snoop-home-date'), _0x4bcece = _0x58fa65['getElementById'](_0x1a0dc2(0x9b2)); _0x28ed98 && _0x59393e && (_0x28ed98[_0x1a0dc2(0x324)] = _0x42bed3[_0x1a0dc2(0x833)](_0x1a0dc2(0x591), { 'hour': '2-digit', 'minute': _0x1a0dc2(0x2f5), 'hour12': ![] }), _0x59393e[_0x1a0dc2(0x324)] = _0x42bed3['toLocaleDateString'](_0x1a0dc2(0x591), { 'month': _0x1a0dc2(0x80e), 'day': _0x1a0dc2(0x6bd), 'weekday': _0x1a0dc2(0x80e) })), _0x4bcece && (_0x4bcece[_0x1a0dc2(0x2c9)] = _0x1a0dc2(0x6d8) + _0x42bed3[_0x1a0dc2(0x833)](_0x1a0dc2(0x591), { 'hour': '2-digit', 'minute': _0x1a0dc2(0x2f5), 'hour12': ![] }) + _0x1a0dc2(0x70b)); } else _0x2e4b8c[_0x1a0dc2(0x3ab)] = null, _0x4161c4[_0x1a0dc2(0xb56)][_0x1a0dc2(0x993)] = _0x1a0dc2(0x3a4); } function _0x2bd982(_0x1e258d, _0xcc876e) { const _0x4c323a = _0x3abecc, _0x27ee02 = document[_0x4c323a(0x392)](_0x4c323a(0x717)); _0x27ee02 && (_0x4c323a(0x44a) === _0x4c323a(0x44a) ? _0x1e258d === _0x4c323a(0xa74) ? _0x27ee02['style'][_0x4c323a(0x993)] = 'inline-block' : _0x27ee02[_0x4c323a(0xb56)][_0x4c323a(0x993)] = _0x4c323a(0x3a4) : (_0x206c6d(), _0x95403a(![]))), _0xcd188e = _0xcc876e || null, Object[_0x4c323a(0x9d9)](_0xa77016)['forEach'](_0x55c2e0 => _0x55c2e0[_0x4c323a(0x42c)][_0x4c323a(0xb26)](_0x4c323a(0x454))), _0xa77016[_0x1e258d] && (_0x4c323a(0xb23) === 'OZKVB' ? _0x30ba67 ? _0x3a900e[_0x4c323a(0x42c)][_0x4c323a(0x6ec)](_0x4c323a(0x9db)) : _0x3da7c4[_0x4c323a(0x42c)][_0x4c323a(0xb26)](_0x4c323a(0x9db)) : _0xa77016[_0x1e258d][_0x4c323a(0x42c)][_0x4c323a(0x6ec)](_0x4c323a(0x454))), _0x1e258d !== _0x4c323a(0x4fb) && (_0x4c323a(0x48d) !== _0x4c323a(0xabc) ? _0x3339ef[_0x4c323a(0x42c)]['remove'](_0x4c323a(0x9db)) : _0x5c4630(_0x4c323a(0xb30))); } function _0x113379(_0x5e78ff) { const _0x3715ca = _0x3abecc; _0x5e78ff ? _0x3339ef[_0x3715ca(0x42c)][_0x3715ca(0x6ec)]('show-chat-view') : 'QFQkk' === _0x3715ca(0x522) ? _0x30954c('有\x20' + _0x180855 + _0x3715ca(0x370)) : _0x3339ef['classList'][_0x3715ca(0xb26)]('show-chat-view'); } async function _0x4adb3c() { const _0x315b36 = _0x3abecc; _0x5ec660[_0x315b36(0x2c9)] = ''; for (const _0x6e685b of _0x2e4b8c[_0x315b36(0x442)]) { const _0x4c1411 = document[_0x315b36(0x92e)]('li'); _0x4c1411[_0x315b36(0x894)] = _0x315b36(0x47d), _0x4c1411[_0x315b36(0x641)]['id'] = _0x6e685b['id']; let _0x58318d = _0x2be033, _0x4f73ff = '群聊', _0x326ff1 = ''; if (_0x6e685b['type'] === _0x315b36(0xa4e)) { const _0x14654b = _0x2653c6(_0x6e685b[_0x315b36(0xa2a)][0x0]); if (_0x14654b) { if ('CHmPS' !== _0x315b36(0xbc0)) { _0x2cc392[_0x315b36(0x2c9)] = _0x315b36(0x6e0); return; } else { const _0x505f95 = await _0x1de353(_0x315b36(0x29a) + _0x14654b['id']); if (_0x505f95) { if (_0x315b36(0xa2d) !== _0x315b36(0x75e)) _0x58318d = URL[_0x315b36(0x38c)](_0x505f95); else throw new _0x18cae5(_0x315b36(0x90d) + _0x879ad4); } else _0x58318d = _0x14654b['avatar'] || _0x2be033; _0x4f73ff = _0x14654b['name'] || _0x315b36(0x8fd), _0x326ff1 = _0x14654b['remark'] || '私聊'; } } else _0x4f73ff = _0x315b36(0x5c5), _0x326ff1 = _0x315b36(0x8d3); } else { if (_0x315b36(0xbfa) !== _0x315b36(0x8de)) { _0x4f73ff = _0x6e685b[_0x315b36(0x420)] || '未命名群聊', _0x326ff1 = _0x6e685b[_0x315b36(0xa2a)][_0x315b36(0x6f2)] + _0x315b36(0xbe1); const _0x125d84 = await _0x1de353(_0x315b36(0x99c) + _0x6e685b['id']); if (_0x125d84) _0x58318d = URL['createObjectURL'](_0x125d84); } else { _0x5c90ee[_0x315b36(0x2c9)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>'; return; } } _0x4c1411[_0x315b36(0x2c9)] = '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x58318d + _0x315b36(0x7dd) + _0x4f73ff + _0x315b36(0x5c4) + _0x326ff1 + _0x315b36(0xac0), _0x4c1411[_0x315b36(0x50b)](_0x315b36(0x47e))[_0x315b36(0xabf)]('click', () => { _0x290d79(_0x6e685b['id']), _0x113379(!![]); }), _0x5ec660[_0x315b36(0x594)](_0x4c1411); } } function _0x196c12() { const _0x300a35 = _0x3abecc, _0x113823 = document[_0x300a35(0x392)](_0x300a35(0x2fb)); _0x113823['innerHTML'] = ''; const _0xf8bba2 = _0x2e4b8c[_0x300a35(0x404)][_0x300a35(0x742)](_0x93ee19 => _0x2e4b8c[_0x300a35(0x442)]['some'](_0x21096a => _0x21096a[_0x300a35(0x875)] === 'private' && _0x21096a[_0x300a35(0xa2a)][_0x300a35(0x21d)](_0x93ee19['id']))); if (_0xf8bba2[_0x300a35(0x6f2)] === 0x0) { if ('oCYuc' === _0x300a35(0x44c)) _0x5eef6c[_0x300a35(0xabf)](_0x300a35(0x4b9), () => { const _0x6bd340 = _0x300a35; if (_0x553b0a['length'] === 0x0) return; _0x1dd2fd = (_0xea7bad - 0x1 + _0x4f7f16[_0x6bd340(0x6f2)]) % _0x2453fc[_0x6bd340(0x6f2)], _0xd498ef(_0x1f9e6b[_0x37cba5], _0x290228); }); else { _0x113823[_0x300a35(0x2c9)] = _0x300a35(0x2c6); return; } } _0xf8bba2[_0x300a35(0xb5e)](_0x5768f4 => { const _0x587651 = _0x300a35, _0x4657ce = document[_0x587651(0x92e)]('li'); _0x4657ce[_0x587651(0x894)] = _0x587651(0x47d), _0x4657ce[_0x587651(0x641)][_0x587651(0x5a8)] = _0x5768f4['id'], _0x4657ce[_0x587651(0x2c9)] = _0x587651(0x2f7) + (_0x5768f4['avatar'] || _0x2be033) + _0x587651(0x832) + _0x5768f4[_0x587651(0x420)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x5768f4[_0x587651(0x2c2)] || '私聊') + _0x587651(0x838), _0x4657ce[_0x587651(0xabf)](_0x587651(0x4b9), () => { _0x60ddf1(_0x5768f4['id']); }), _0x113823[_0x587651(0x594)](_0x4657ce); }); } async function _0x60ddf1(_0x5697ef) { const _0x137cb0 = _0x3abecc, _0x5ac8a1 = _0x2653c6(_0x5697ef); if (!_0x5ac8a1) return; document[_0x137cb0(0x392)](_0x137cb0(0xa45))[_0x137cb0(0x84e)] = '', _0x2e4b8c[_0x137cb0(0x8f1)] = _0x5697ef; const _0x5bd2f1 = _0x2e4b8c['chats'][_0x137cb0(0x69e)](_0x2693cc => _0x2693cc['type'] === _0x137cb0(0xa4e) && _0x2693cc[_0x137cb0(0xa2a)][_0x137cb0(0x21d)](_0x5697ef)); if (_0x5bd2f1) { if ('bUVmU' !== 'bUVmU') { const _0x28212d = _0x462a47[_0x137cb0(0x5e9)](_0x555244 => new _0x42a5ab(_0x555244['timestamp'] || _0x555244[_0x137cb0(0x9ee)]))['filter'](_0x1495e8 => !_0x5b7a12(_0x1495e8)); _0x28212d[_0x137cb0(0x6f2)] > 0x0 && (_0x3ac878 = new _0x1e3bfb(_0x10a52d['max'][_0x137cb0(0x805)](null, _0x28212d)), _0x586f87 = _0x56fbd4[_0x137cb0(0x408)]('zh-CN', { 'dateStyle': _0x137cb0(0x9cd), 'timeStyle': _0x137cb0(0x303) })); } else _0x2e4b8c[_0x137cb0(0x7ee)] = _0x5bd2f1['id'], _0x5a3c71(), _0x7af3ed(), _0x3e2cce(_0x5697ef); } else _0x137cb0(0x9d2) === _0x137cb0(0x9d2) ? _0x2e4b8c['conversationHistory'] = [] : _0xb6be52['error'](_0x137cb0(0x812), _0x3e130e); document[_0x137cb0(0x392)]('meeting-char-name-header')[_0x137cb0(0x324)] = _0x5ac8a1['name']; const _0x981835 = document[_0x137cb0(0x392)](_0x137cb0(0x242)); try { const _0x683cbd = await _0x1de353('char_offline_bg_' + _0x5697ef); _0x683cbd ? (_0x981835[_0x137cb0(0xb56)]['backgroundImage'] = _0x137cb0(0x24b) + URL[_0x137cb0(0x38c)](_0x683cbd) + '\x27)', _0x981835['style'][_0x137cb0(0xa1f)] = _0x137cb0(0x883), _0x981835[_0x137cb0(0xb56)]['backgroundPosition'] = _0x137cb0(0x6a0)) : _0x981835['style'][_0x137cb0(0xb85)] = _0x137cb0(0x3a4); } catch (_0x4daaac) { console[_0x137cb0(0x5b1)]('加载见面背景失败\x20for\x20' + _0x5697ef + ':', _0x4daaac), _0x981835[_0x137cb0(0xb56)][_0x137cb0(0xb85)] = _0x137cb0(0x3a4); } _0x3acc1b(), _0xc1c9f0(); if (_0x3085bc) clearInterval(_0x3085bc); _0x274030(), _0x3085bc = setInterval(_0x274030, 0x2710), document['getElementById'](_0x137cb0(0x355))[_0x137cb0(0xb56)][_0x137cb0(0x993)] = _0x137cb0(0x94c), _0x2bd982(_0x137cb0(0x588), _0x137cb0(0x787)); } function _0xc1c9f0() { const _0xc7cc5e = _0x3abecc; if (_0xc7cc5e(0xa9e) !== _0xc7cc5e(0xa63)) { const _0x294fb8 = document[_0xc7cc5e(0x392)](_0xc7cc5e(0x7c8)); _0x294fb8[_0xc7cc5e(0x2c9)] = ''; const _0x52914c = _0x294fb8[_0xc7cc5e(0x50b)]('#message-anchor'); if (_0x52914c) _0x52914c[_0xc7cc5e(0xb26)](); _0x2e4b8c['conversationHistory'] && (_0xc7cc5e(0x683) !== _0xc7cc5e(0x44f) ? _0x2e4b8c[_0xc7cc5e(0x2c8)][_0xc7cc5e(0xb5e)]((_0x38dfa0, _0x5e146d) => { const _0x4cf114 = _0xc7cc5e; if (!_0x38dfa0[_0x4cf114(0x1e3)] || _0x38dfa0[_0x4cf114(0x253)] === _0x4cf114(0x2d3)) return; const _0x46c72d = document[_0x4cf114(0x92e)]('p'); _0x46c72d[_0x4cf114(0x641)]['historyIndex'] = _0x5e146d; const _0x1e6216 = _0x38dfa0[_0x4cf114(0xa19)]['replace'](/\n/g, _0x4cf114(0x3e5)); let _0x29912e = '', _0x5e2536 = ''; const _0x204e12 = _0x23edb1(_0x2e4b8c[_0x4cf114(0x7ee)]); if (_0x38dfa0['role'] === _0x4cf114(0x5c3)) _0x29912e = _0x204e12[_0x4cf114(0x420)] || '我', _0x5e2536 = _0x4cf114(0x3ac); else { if (_0x38dfa0[_0x4cf114(0x253)] === _0x4cf114(0x880)) { const _0x2f5fe2 = _0x2653c6(_0x38dfa0[_0x4cf114(0x662)] || _0x2e4b8c[_0x4cf114(0x8f1)]); _0x29912e = _0x2f5fe2?.[_0x4cf114(0x420)] || '角色', _0x5e2536 = _0x4cf114(0xb68); } } _0x46c72d['style'][_0x4cf114(0x2ee)] = _0x4cf114(0x7ec), _0x46c72d[_0x4cf114(0xb56)][_0x4cf114(0x4df)] = _0x4cf114(0x66a), _0x46c72d[_0x4cf114(0xb56)][_0x4cf114(0x5ea)] = _0x4cf114(0x8b8), _0x46c72d[_0x4cf114(0xb56)][_0x4cf114(0x829)] = _0x4cf114(0x4f8), _0x29912e ? _0x4cf114(0xbd0) !== 'BcSJd' ? _0x5883b1 += _0x54f48b[_0x4cf114(0x30c)](_0xff8ae9)[_0x4cf114(0x36f)][0x0]['content'][_0x4cf114(0x770)][0x0][_0x4cf114(0xbbc)] : _0x46c72d[_0x4cf114(0x2c9)] = _0x4cf114(0x73d) + _0x5e2536 + _0x4cf114(0x3e1) + (_0x5e2536 === 'speaker-user' ? '#a7c7e7' : _0x4cf114(0x458)) + _0x4cf114(0x216) + _0x29912e + _0x4cf114(0x37a) + _0x1e6216 : _0x4cf114(0x5f1) !== 'wGxXN' ? (_0x239bc4(), _0x1604cd(_0x4cf114(0x916), 'home')) : (_0x46c72d['className'] = _0x4cf114(0x2f0), _0x46c72d[_0x4cf114(0xb56)][_0x4cf114(0xb96)] = 'italic', _0x46c72d[_0x4cf114(0xb56)][_0x4cf114(0xa96)] = _0x4cf114(0x2a0), _0x46c72d['innerHTML'] = _0x1e6216), _0x294fb8['appendChild'](_0x46c72d); }) : _0x4d4461[_0xc7cc5e(0x42c)][_0xc7cc5e(0x6ec)](_0xc7cc5e(0x3a9))); if (_0x2e4b8c[_0xc7cc5e(0x524)]) { let _0x4b147f = _0x294fb8[_0xc7cc5e(0x50b)]('.typing-indicator'); !_0x4b147f && (_0x4b147f = document[_0xc7cc5e(0x92e)](_0xc7cc5e(0x63a)), _0x4b147f[_0xc7cc5e(0x894)] = _0xc7cc5e(0xb3a), _0x4b147f[_0xc7cc5e(0x324)] = '对方正在行动中...', _0x4b147f[_0xc7cc5e(0xb56)][_0xc7cc5e(0x2ee)] = _0xc7cc5e(0x7ec), _0x4b147f[_0xc7cc5e(0xb56)][_0xc7cc5e(0x4df)] = _0xc7cc5e(0x66a), _0x4b147f[_0xc7cc5e(0xb56)][_0xc7cc5e(0x5ea)] = '8px', _0x294fb8[_0xc7cc5e(0x594)](_0x4b147f)); } const _0xf44072 = document[_0xc7cc5e(0x92e)](_0xc7cc5e(0x63a)); _0xf44072['id'] = 'message-anchor', _0x294fb8['appendChild'](_0xf44072), setTimeout(() => { const _0xc35edb = _0xc7cc5e; _0xf44072[_0xc35edb(0xaf9)]({ 'behavior': _0xc35edb(0x788), 'block': _0xc35edb(0x5be) }); }, 0x32); } else _0x4489d7[_0xc7cc5e(0xb56)]['display'] = _0xc7cc5e(0x3a4), _0x561491[_0xc7cc5e(0x392)](_0xc7cc5e(0x7a6))['style'][_0xc7cc5e(0x993)] = _0xc7cc5e(0x366); } function _0x46a9ae() { const _0x4c69c9 = _0x3abecc, _0x2344c3 = document[_0x4c69c9(0x50b)]('.screen.active'); if (!_0x2344c3) return; _0x2344c3['id'] === _0x4c69c9(0xba9) ? _0xc1c9f0() : _0x2d9cac(); } function _0x2d9cac() { const _0xfdcc20 = _0x3abecc, _0xe6eb50 = _0x2e4b8c[_0xfdcc20(0x2c8)][_0xfdcc20(0x742)](_0x363bb2 => !_0x363bb2['isOffline'] && _0x363bb2['role'] !== 'system'); if (_0xe6eb50[_0xfdcc20(0x6f2)] > _0x2e4b8c[_0xfdcc20(0x356)]) { let _0x6a4b7b = _0x2d4f68[_0xfdcc20(0x50b)](_0xfdcc20(0x5c9)); !_0x6a4b7b && (_0x6a4b7b = document[_0xfdcc20(0x92e)](_0xfdcc20(0x868)), _0x6a4b7b[_0xfdcc20(0x324)] = _0xfdcc20(0x86c), _0x6a4b7b['className'] = _0xfdcc20(0xbb2), _0x6a4b7b[_0xfdcc20(0xb56)][_0xfdcc20(0xa9a)] = 'auto', _0x6a4b7b[_0xfdcc20(0xb56)][_0xfdcc20(0xbbd)] = _0xfdcc20(0x33f), _0x6a4b7b[_0xfdcc20(0xb56)]['padding'] = '8px\x2016px', _0x6a4b7b[_0xfdcc20(0x998)] = () => { const _0x503e08 = _0xfdcc20, _0x238eeb = _0x2d4f68, _0x520174 = _0x238eeb['scrollHeight'], _0x521aed = _0x238eeb[_0x503e08(0xbd7)]; _0x2e4b8c[_0x503e08(0x356)] += 0x64, _0x2d9cac(), requestAnimationFrame(() => { const _0x2a9ca0 = _0x503e08; if (_0x2a9ca0(0x62a) === _0x2a9ca0(0x62a)) { const _0x1c9b4c = _0x238eeb[_0x2a9ca0(0x220)]; _0x238eeb[_0x2a9ca0(0xbd7)] = _0x521aed + (_0x1c9b4c - _0x520174); } else return '刚才'; }); }, _0x2d4f68['firstChild'] ? _0x2d4f68[_0xfdcc20(0xadf)](_0x6a4b7b, _0x2d4f68[_0xfdcc20(0x610)]) : _0x2d4f68['appendChild'](_0x6a4b7b)); } else { const _0x5c442f = _0x2d4f68[_0xfdcc20(0x50b)](_0xfdcc20(0x5c9)); if (_0x5c442f) _0x5c442f[_0xfdcc20(0xb26)](); } Array['from'](_0x2d4f68['children'])[_0xfdcc20(0xb5e)](_0xa751 => { const _0x2302ac = _0xfdcc20; if (!_0xa751['classList'][_0x2302ac(0xb2d)](_0x2302ac(0x9f2))) { if ('kcFXS' !== 'FqhDe') _0xa751['remove'](); else { const _0x782ed1 = _0x18d6ee[_0x2302ac(0x392)](_0x3b483c); if (_0x782ed1 && _0x2a6c33) _0x782ed1['src'] = _0x1d9c58['createObjectURL'](_0x2d0eca); } } }); const _0x5772c3 = _0xe6eb50['slice'](-_0x2e4b8c[_0xfdcc20(0x356)]); _0x5772c3[_0xfdcc20(0xb5e)](_0x4ff157 => { const _0x43b650 = _0xfdcc20; if (_0x43b650(0x702) === 'MaPud') { const _0x881825 = _0x43b650(0x560); _0x349a6a[_0x43b650(0x3de)][_0x43b650(0x256)]('beforeend', _0x881825); const _0x17fae3 = _0x550b1d[_0x43b650(0x392)](_0x43b650(0x61e)), _0x456106 = _0x246f7b[_0x43b650(0x392)]('diary-modal-textarea'), _0x137547 = _0x295712[_0x43b650(0x392)]('diary-modal-save'), _0x2f5af6 = _0x474188[_0x43b650(0x392)](_0x43b650(0x325)), _0xa7175d = _0x17fae3[_0x43b650(0x50b)](_0x43b650(0xb37)), _0x14fc3f = () => { const _0xf5dfb4 = _0x43b650; _0x17fae3[_0xf5dfb4(0xb26)](), _0x37a084(); }; _0x137547[_0x43b650(0x998)] = () => { const _0x3890db = _0x43b650; _0x53d163(_0x456106[_0x3890db(0x60e)]), _0x14fc3f(); }, _0x2f5af6[_0x43b650(0x998)] = _0x14fc3f, _0xa7175d[_0x43b650(0x998)] = _0x14fc3f; } else { const _0x24abc9 = _0x2e4b8c[_0x43b650(0x2c8)][_0x43b650(0x78f)](_0x4ff157); if (_0x24abc9 > -0x1) { if (_0x43b650(0x3c9) !== 'elboD') { if (_0x4a667c['role'] === _0x43b650(0x5c3)) return _0x1c4528[_0x43b650(0x312)]?.[_0x43b650(0x420)] || _0x43b650(0xc28); if (_0x4f31e3['type'] === _0x43b650(0xacf)) { const _0x2a0788 = _0x43af97[_0x43b650(0x662)] ? _0x571dde(_0x37d84f['senderId']) : null; return _0x2a0788?.['name'] || _0x43b650(0x52d); } else { const _0x1e7694 = _0x2b9efe(_0xe63ca8[_0x43b650(0xa2a)][0x0]); return _0x1e7694?.[_0x43b650(0x420)] || 'AI'; } } else _0x16ed9e(_0x4ff157, _0x24abc9); } } }); if (_0x2e4b8c[_0xfdcc20(0x524)]) { let _0x54fe2c = _0x2d4f68[_0xfdcc20(0x50b)](_0xfdcc20(0xc1c)); !_0x54fe2c && (_0x54fe2c = document['createElement'](_0xfdcc20(0x63a)), _0x54fe2c['className'] = _0xfdcc20(0xb3a), _0x54fe2c[_0xfdcc20(0x324)] = _0xfdcc20(0xae2), _0x2d4f68['appendChild'](_0x54fe2c)); } _0x5772c3['length'] <= _0x2e4b8c[_0xfdcc20(0x356)] && setTimeout(() => { const _0x4a377a = _0xfdcc20; _0x2d4f68[_0x4a377a(0xbd7)] = _0x2d4f68[_0x4a377a(0x220)]; }, 0x0); } function _0x16ed9e(_0x2dff34, _0x287702) { const _0x13f879 = _0x3abecc; if (_0x13f879(0xb99) === _0x13f879(0xb99)) { const { role: _0x25f65f, content: _0x1f1a07, displayUrl: _0x5d7916, image: _0x18f5bf, senderId: _0x4ff5dc } = _0x2dff34, _0x8a0676 = _0x25f65f === 'assistant' ? 'ai' : _0x25f65f, _0x1fe177 = _0x28f748(), _0x53f46c = document[_0x13f879(0x92e)](_0x13f879(0x63a)); _0x53f46c['classList'][_0x13f879(0x6ec)](_0x13f879(0x9fa), _0x8a0676), _0x53f46c[_0x13f879(0x641)][_0x13f879(0x357)] = _0x287702; const _0x5afe7a = document['createElement'](_0x13f879(0x63a)); _0x5afe7a['className'] = _0x13f879(0x772); let _0x1f6c6e = '', _0x51b133 = '', _0x2d7935 = null; if (_0x25f65f === _0x13f879(0x5c3)) { if (_0x13f879(0x3db) !== _0x13f879(0x3a0)) { const _0x3bef25 = _0x23edb1(_0x2e4b8c[_0x13f879(0x7ee)]); _0x1f6c6e = _0x3bef25[_0x13f879(0x58d)] || _0x3efbf6; const _0x2877cd = _0x2653c6(_0x1fe177?.['participantIds'][0x0]); _0x2877cd && (_0x51b133 = _0x2877cd[_0x13f879(0x91f)] || ''); } else _0x20f915[_0x13f879(0x2c9)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x11b9e7 + _0x13f879(0x2d6) + _0x1a1630['songName'] + _0x13f879(0x383) + _0x4d4ec6['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>'; } else { if (_0x1fe177?.[_0x13f879(0x875)] === _0x13f879(0xa4e)) 'VnQZd' === _0x13f879(0x68b) ? _0x376205[_0x13f879(0x5b1)]('加载已保存字体失败:', _0xc807f9) : _0x2d7935 = _0x2653c6(_0x1fe177[_0x13f879(0xa2a)][0x0]); else _0x1fe177?.[_0x13f879(0x875)] === 'group' && _0x4ff5dc && (_0x13f879(0x5b6) === 'DRsox' ? _0x2d7935 = _0x2653c6(_0x4ff5dc) : _0xd44bf4 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>'); _0x1f6c6e = _0x2d7935?.['avatar'] || _0x2be033, _0x51b133 = _0x2d7935?.[_0x13f879(0xaf2)] || ''; } const _0x455f74 = _0x43a8f4(_0x1f6c6e, _0x51b133); if (_0x25f65f !== _0x13f879(0x5c3) && _0x2d7935) { const _0x507806 = _0x455f74[_0x13f879(0x50b)](_0x13f879(0x54e)); _0x1de353('char_avatar_' + _0x2d7935['id'])['then'](_0x24dc0b => { const _0x5d929c = _0x13f879; if (_0x5d929c(0x91a) === _0x5d929c(0x857)) { _0x5b0aca[_0x5d929c(0x2c9)] = _0x5d929c(0x657), _0x286b4e['innerHTML'] = _0x5d929c(0xa54), _0x4102c7[_0x5d929c(0x392)]('diary-write-button')[_0x5d929c(0xabf)](_0x5d929c(0x4b9), _0x2a1fff), _0x65ea3a[_0x5d929c(0x392)](_0x5d929c(0xbaa))[_0x5d929c(0xabf)]('click', _0x40467c); return; } else _0x24dc0b && (_0x5d929c(0x78e) !== _0x5d929c(0x583) ? _0x507806[_0x5d929c(0x84e)] = URL['createObjectURL'](_0x24dc0b) : (_0x10cdbf[_0x5d929c(0x508)] = _0x63aadb[_0x5d929c(0x508)] || [], _0x391fac[_0x5d929c(0xb3b)] = (_0x3bd577[_0x5d929c(0xb3b)] || [])[_0x5d929c(0x5e9)]((_0x27e651, _0xd402aa) => ({ ..._0x27e651, 'commentId': 'c_' + _0x4aee94[_0x5d929c(0x518)] + '_' + _0xd402aa })), _0x1bc01c(), _0x2820c0())); }); } const _0xd66bb0 = _0x1f1a07 && _0x1f1a07[_0x13f879(0x8bb)]()[_0x13f879(0x629)](_0x13f879(0x730)) && _0x1f1a07[_0x13f879(0x8bb)]()['endsWith'](_0x13f879(0x892)); if (_0xd66bb0) { if (_0x13f879(0x49a) === _0x13f879(0x49a)) { const _0x15009b = document[_0x13f879(0x92e)]('div'); _0x15009b[_0x13f879(0x894)] = _0x13f879(0x74c), _0x15009b['innerHTML'] = _0x1f1a07; if (_0x8a0676 === _0x13f879(0x5c3)) _0x5afe7a[_0x13f879(0x594)](_0x15009b), _0x5afe7a['appendChild'](_0x455f74); else { if ('BBzyL' !== _0x13f879(0x66c)) return _0x6ce683(_0xdd3c35)[_0x13f879(0x54a)](_0x2e7a02 => _0x2e7a02[_0x13f879(0x713)]()); else _0x5afe7a[_0x13f879(0x594)](_0x455f74), _0x5afe7a[_0x13f879(0x594)](_0x15009b); } } else _0x192e86(); } else { const _0x3ade85 = document[_0x13f879(0x92e)](_0x13f879(0x63a)); _0x3ade85[_0x13f879(0x42c)][_0x13f879(0x6ec)](_0x13f879(0x542), _0x8a0676); if (_0x1fe177?.['type'] === _0x13f879(0xa4e)) { const _0x1412d = _0x1fe177[_0x13f879(0xa2a)][0x0]; _0x3ade85[_0x13f879(0x42c)][_0x13f879(0x6ec)](_0x13f879(0xbce) + _0x1412d); } if (_0x2dff34[_0x13f879(0xc33)]) { const _0x5bb7d2 = document['createElement'](_0x13f879(0x63a)); _0x5bb7d2[_0x13f879(0x894)] = _0x13f879(0x969); const _0x37a33f = document[_0x13f879(0x92e)](_0x13f879(0x63a)); _0x37a33f[_0x13f879(0x894)] = _0x13f879(0xadb), _0x37a33f[_0x13f879(0x324)] = _0x2dff34[_0x13f879(0xc33)][_0x13f879(0x447)]; const _0x21eeb5 = document[_0x13f879(0x92e)]('div'); _0x21eeb5[_0x13f879(0x894)] = _0x13f879(0x803), _0x21eeb5[_0x13f879(0x324)] = _0x2dff34['quotedMessage'][_0x13f879(0xa19)], _0x5bb7d2['appendChild'](_0x37a33f), _0x5bb7d2[_0x13f879(0x594)](_0x21eeb5), _0x3ade85[_0x13f879(0x594)](_0x5bb7d2); } if (_0x5d7916) { _0x3ade85['classList'][_0x13f879(0x6ec)](_0x13f879(0x4c3)); const _0x244035 = document[_0x13f879(0x92e)](_0x13f879(0x606)); _0x244035[_0x13f879(0x84e)] = _0x5d7916, _0x244035['classList'][_0x13f879(0x6ec)](_0x13f879(0x2dd)), _0x3ade85[_0x13f879(0x594)](_0x244035); } else { if (_0x2dff34['image'] || _0x2dff34['imageId']) { _0x3ade85['classList'][_0x13f879(0x6ec)](_0x13f879(0x3f7)); const _0x9d74c9 = document[_0x13f879(0x92e)](_0x13f879(0x606)); _0x9d74c9[_0x13f879(0x42c)][_0x13f879(0x6ec)](_0x13f879(0x3c7)), _0x3ade85[_0x13f879(0x594)](_0x9d74c9); _0x2dff34[_0x13f879(0x3f7)] ? _0x13f879(0xc1f) === _0x13f879(0x727) ? _0x269092[_0x13f879(0x5b1)](_0x13f879(0x6f0), _0x27275c) : _0x9d74c9[_0x13f879(0x84e)] = _0x2dff34[_0x13f879(0x3f7)] : (_0x9d74c9[_0x13f879(0x84e)] = _0x13f879(0xb4d), _0x1de353(_0x2dff34['imageId'])[_0x13f879(0x54a)](_0x407730 => { const _0x4ee8ba = _0x13f879; if (_0x407730) { if ('xTkHu' === _0x4ee8ba(0x367)) { let _0x10486c = _0x585d7e[_0x4ee8ba(0x50b)](_0x4ee8ba(0xc1c)); !_0x10486c && (_0x10486c = _0x1b0a18[_0x4ee8ba(0x92e)](_0x4ee8ba(0x63a)), _0x10486c[_0x4ee8ba(0x894)] = _0x4ee8ba(0xb3a), _0x10486c[_0x4ee8ba(0x324)] = _0x4ee8ba(0xae2), _0x42784c[_0x4ee8ba(0x594)](_0x10486c)); } else { const _0x2da948 = URL[_0x4ee8ba(0x38c)](_0x407730); _0x9d74c9[_0x4ee8ba(0x84e)] = _0x2da948, _0x9d74c9[_0x4ee8ba(0x8df)] = () => { const _0x3e9b79 = _0x4ee8ba; URL[_0x3e9b79(0x298)](_0x2da948); }; } } else _0x9d74c9['alt'] = _0x4ee8ba(0xb7a); })[_0x13f879(0x736)](_0x50d295 => { const _0x20ef1b = _0x13f879; console[_0x20ef1b(0x5b1)](_0x20ef1b(0xaa5), _0x50d295), _0x9d74c9[_0x20ef1b(0x862)] = _0x20ef1b(0xb7a); })); if (_0x1f1a07) { if (_0x13f879(0x7d6) === 'UzuJa') { const _0x1d7d7b = document[_0x13f879(0x92e)]('p'); _0x1d7d7b[_0x13f879(0xb56)][_0x13f879(0xa8f)] = _0x13f879(0x2ad), _0x1d7d7b['textContent'] = _0x1f1a07, _0x3ade85[_0x13f879(0x594)](_0x1d7d7b); } else _0x590b41[_0x13f879(0x324)] = _0x13f879(0x572); } } else { if (_0x2dff34[_0x13f879(0x875)] === _0x13f879(0xbea)) { if (_0x13f879(0x661) === _0x13f879(0x661)) { _0x3ade85[_0x13f879(0x42c)]['add']('transfer'); const _0x24a138 = _0x2dff34[_0x13f879(0x253)] === 'user' ? _0x23edb1(_0x2e4b8c[_0x13f879(0x7ee)]) : _0x2653c6(_0x2dff34['senderId']), _0x1ab16a = _0x2dff34[_0x13f879(0x4f4)] === _0x23edb1(_0x2e4b8c[_0x13f879(0x7ee)])['id'] ? _0x23edb1(_0x2e4b8c[_0x13f879(0x7ee)]) : _0x2653c6(_0x2dff34[_0x13f879(0x4f4)]), _0x1bc521 = _0x24a138?.[_0x13f879(0x420)] ? _0x24a138['name'] + _0x13f879(0x6db) : '转账', _0x4fc5ca = _0x1ab16a?.['name'] ? '转给\x20' + _0x1ab16a[_0x13f879(0x420)] : '转账', _0x317fa5 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20' + _0x1bc521 + _0x13f879(0x481) + _0x2dff34['amount'][_0x13f879(0x8c5)](0x2) + _0x13f879(0xb22) + _0x4fc5ca + _0x13f879(0xc1b); _0x3ade85[_0x13f879(0x2c9)] = _0x317fa5; } else { const _0x93a7b7 = _0x2d7413[_0x13f879(0x50b)](_0x13f879(0x741)); if (_0x93a7b7 && (_0x93a7b7['id'] === 'meeting-view-screen' || _0x93a7b7['id'] === _0x13f879(0x890))) _0x48a42d(); else { const _0x3a82eb = _0x46ce65[_0x13f879(0x9b8)](_0x13f879(0xc1c)); _0x3a82eb[_0x13f879(0xb5e)](_0x2b7958 => _0x2b7958[_0x13f879(0xb26)]()); } } } else { if (_0x2dff34['type'] === _0x13f879(0x8c7)) { _0x3ade85[_0x13f879(0x42c)][_0x13f879(0x6ec)](_0x13f879(0xc2d)); const _0x3458c6 = document[_0x13f879(0x92e)]('div'); _0x3458c6[_0x13f879(0x894)] = _0x13f879(0x625), _0x3458c6[_0x13f879(0x42c)][_0x13f879(0x6ec)](_0x13f879(0x585)); const _0x128806 = _0x2dff34['role'] === _0x13f879(0x5c3) ? _0x23edb1(_0x2e4b8c['activeChatId'])['name'] || '你' : _0x2653c6(_0x2dff34[_0x13f879(0x662)])?.[_0x13f879(0x420)] || 'TA', _0x1b04d5 = _0x13f879(0xb7b) + _0x2dff34[_0x13f879(0x518)], _0x5007f8 = _0x13f879(0x820) + _0x1b04d5 + '\x22\x20src=\x22' + _0x2be033 + '\x22>'; _0x2dff34['coverId'] && _0x1de353(_0x2dff34['coverId'])[_0x13f879(0x54a)](_0x113a5f => { const _0x249279 = _0x13f879; if (_0x249279(0x39d) === 'VebTo') { const _0x4ff4ef = document['getElementById'](_0x1b04d5); if (_0x4ff4ef && _0x113a5f) _0x4ff4ef[_0x249279(0x84e)] = URL['createObjectURL'](_0x113a5f); } else { const _0x8e632d = _0x14f3a7['getAll'](); _0x8e632d[_0x249279(0x817)] = () => _0x101bba(_0x8e632d['result']), _0x8e632d[_0x249279(0x677)] = () => _0x4f2924(_0x8e632d[_0x249279(0x5b1)]); } }); if (_0x2dff34[_0x13f879(0x46d)]) _0x3458c6[_0x13f879(0x2c9)] = _0x13f879(0x773) + _0x5007f8 + _0x13f879(0x2d6) + _0x2dff34[_0x13f879(0x50e)] + _0x13f879(0x383) + _0x2dff34[_0x13f879(0x5c7)] + _0x13f879(0x996); else { if ('rRspa' !== _0x13f879(0x93f)) _0x3458c6[_0x13f879(0x2c9)] = _0x13f879(0x76a) + _0x128806 + _0x13f879(0x9fb) + _0x5007f8 + _0x13f879(0x2d6) + _0x2dff34[_0x13f879(0x50e)] + _0x13f879(0x383) + _0x2dff34[_0x13f879(0x5c7)] + _0x13f879(0x58f) + _0x2dff34[_0x13f879(0x908)] + _0x13f879(0x910); else { const _0x286754 = _0x340f82[_0x13f879(0x281)](_0x28e7b7, 'readwrite'), _0x45290a = _0x286754[_0x13f879(0x4c5)](_0x310bcd), _0x1c8bf0 = _0x45290a[_0x13f879(0x701)]({ 'id': _0x185eb2, 'blob': _0x427cd5 }); _0x1c8bf0[_0x13f879(0x817)] = () => _0x4f1b19(_0x1c8bf0[_0x13f879(0x3cf)]), _0x1c8bf0[_0x13f879(0x677)] = () => _0x4faaa8(_0x1c8bf0[_0x13f879(0x5b1)]); } } _0x3ade85[_0x13f879(0x594)](_0x3458c6); } else { if (_0x2dff34[_0x13f879(0x875)] === _0x13f879(0xc2d) && _0x2dff34[_0x13f879(0x50e)]) { if (_0x13f879(0x597) === _0x13f879(0x2b7)) { let _0x48f717 = 0x0, _0xbd4f38 = 0x0, _0x57155b = 0x0; if (_0x3c2da6[_0x13f879(0x6f2)] == 0x4) _0x48f717 = '0x' + _0xfc694d[0x1] + _0x1351f0[0x1], _0xbd4f38 = '0x' + _0x7923fa[0x2] + _0x164823[0x2], _0x57155b = '0x' + _0x1e6479[0x3] + _0x5525fb[0x3]; else _0x37f885[_0x13f879(0x6f2)] == 0x7 && (_0x48f717 = '0x' + _0x18f239[0x1] + _0xba8e33[0x2], _0xbd4f38 = '0x' + _0x433019[0x3] + _0x586c1f[0x4], _0x57155b = '0x' + _0x2aa3ed[0x5] + _0x176e8b[0x6]); _0x48f717 /= 0xff, _0xbd4f38 /= 0xff, _0x57155b /= 0xff; let _0x22707a = _0x48e847['min'](_0x48f717, _0xbd4f38, _0x57155b), _0x1787e9 = _0xfd31d9['max'](_0x48f717, _0xbd4f38, _0x57155b), _0x38dcb6 = _0x1787e9 - _0x22707a, _0x6b8059 = 0x0, _0x4d01fa = 0x0, _0x59e17e = 0x0; if (_0x38dcb6 == 0x0) _0x6b8059 = 0x0; else { if (_0x1787e9 == _0x48f717) _0x6b8059 = (_0xbd4f38 - _0x57155b) / _0x38dcb6 % 0x6; else { if (_0x1787e9 == _0xbd4f38) _0x6b8059 = (_0x57155b - _0x48f717) / _0x38dcb6 + 0x2; else _0x6b8059 = (_0x48f717 - _0xbd4f38) / _0x38dcb6 + 0x4; } } _0x6b8059 = _0x2c6cbf[_0x13f879(0x7d1)](_0x6b8059 * 0x3c); if (_0x6b8059 < 0x0) _0x6b8059 += 0x168; return _0x59e17e = (_0x1787e9 + _0x22707a) / 0x2, _0x4d01fa = _0x38dcb6 == 0x0 ? 0x0 : _0x38dcb6 / (0x1 - _0x621a71[_0x13f879(0x7fb)](0x2 * _0x59e17e - 0x1)), _0x4d01fa = +(_0x4d01fa * 0x64)[_0x13f879(0x8c5)](0x1), _0x59e17e = +(_0x59e17e * 0x64)['toFixed'](0x1), { 'h': _0x6b8059, 's': _0x4d01fa, 'l': _0x59e17e }; } else { _0x3ade85[_0x13f879(0x42c)][_0x13f879(0x6ec)]('music'); const _0x2e7ddd = document[_0x13f879(0x92e)](_0x13f879(0x63a)); _0x2e7ddd[_0x13f879(0x894)] = 'music-share-card', _0x2e7ddd[_0x13f879(0x641)][_0x13f879(0x852)] = _0x13f879(0x7a0) + _0x2dff34[_0x13f879(0x518)]; const _0x3bba57 = _0x13f879(0xb7b) + _0x2dff34[_0x13f879(0x518)], _0x17d911 = _0x13f879(0x7e2) + _0x2be033 + _0x13f879(0x536) + _0x3bba57 + '\x22\x20class=\x22music-share-cover\x22>'; if (_0x2dff34[_0x13f879(0x71c)]) _0x13f879(0x866) !== _0x13f879(0x866) ? (_0x5dc8e4[_0x13f879(0x523)] = ![], _0x51d8af[_0x13f879(0x324)] = '获取') : _0x1de353(_0x2dff34['coverId'])['then'](_0x1fbc2e => { const _0xb06b5f = _0x13f879; if (_0xb06b5f(0xc11) === _0xb06b5f(0x2a7)) { if (_0x3e8411) _0x276712(_0x359d8e); _0x268a7e = null, _0x408f47[_0xb06b5f(0x540)] = [], _0x5a9dc7[_0xb06b5f(0x8f1)] = null, _0x10a06b[_0xb06b5f(0x392)](_0xb06b5f(0x355))[_0xb06b5f(0xb56)][_0xb06b5f(0x993)] = _0xb06b5f(0x3a4), _0xfbe02e[_0xb06b5f(0x7ee)] = null, _0xae7598(), _0x330e6b(_0xb06b5f(0x787), _0xb06b5f(0x588)); } else { const _0x25e600 = document['getElementById'](_0x3bba57); if (_0x25e600 && _0x1fbc2e) _0x25e600[_0xb06b5f(0x84e)] = URL[_0xb06b5f(0x38c)](_0x1fbc2e); } }); else { if (_0x2dff34[_0x13f879(0x459)]) { if (_0x13f879(0x751) !== _0x13f879(0x4e1)) setTimeout(() => { const _0x12ac8f = _0x13f879, _0x377a1b = document[_0x12ac8f(0x392)](_0x3bba57); if (_0x377a1b) _0x377a1b[_0x12ac8f(0x84e)] = _0x2dff34[_0x12ac8f(0x459)]; }, 0x0); else { const _0x3a53d8 = _0x23340d(_0x1f514d[_0x13f879(0x8f1)]); _0x3a53d8 && (delete _0x3a53d8['spriteTransform'], _0x30d1ca(), _0x1bb486(_0x3a53d8['id'], _0x13f879(0x83c)), _0x100629(_0x13f879(0x631)), _0x217dd2(!![])); } } } _0x2e7ddd['innerHTML'] = _0x13f879(0x5c8) + _0x17d911 + _0x13f879(0x340) + _0x2dff34[_0x13f879(0x50e)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x2dff34[_0x13f879(0x5c7)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>' + (_0x2dff34[_0x13f879(0x565)] ? '▶' : '⚠') + _0x13f879(0x892), _0x2dff34['playableUrl'] && _0x2e7ddd['addEventListener']('click', function () { const _0x219911 = _0x13f879; if ('RQmfS' !== _0x219911(0x397)) _0x303808(_0x27e98f[_0x219911(0x8f1)], _0x17c0d7[_0x219911(0x896)]); else { const _0xbea755 = { 'id': _0x219911(0x7a0) + _0x2dff34[_0x219911(0x518)], 'url': _0x2dff34[_0x219911(0x565)] }; _0x45ee27(this, _0xbea755); } }), _0x3ade85['appendChild'](_0x2e7ddd); } } else { if (_0x13f879(0x48c) !== 'XNFkw') _0x16ace9[_0x13f879(0x392)]('snoop-app-view-container')['style']['display'] = _0x13f879(0x3a4), _0x2029bd(_0x13f879(0xb16), _0x13f879(0xbab)); else { if (_0x1f1a07) { if ('nDyJD' === 'bFDua') _0x55009c(_0x2d67fb['id'], _0xee6e02['map'](_0x3f84ea => _0x3f84ea['id'])); else { const _0x12471c = document[_0x13f879(0x92e)]('p'); _0x12471c[_0x13f879(0x2c9)] = _0x1f1a07, _0x12471c[_0x13f879(0xb56)][_0x13f879(0xbbd)] = '0', _0x3ade85[_0x13f879(0x594)](_0x12471c); } } } } } } } } _0x8a0676 === _0x13f879(0x5c3) ? (_0x5afe7a[_0x13f879(0x594)](_0x3ade85), _0x5afe7a[_0x13f879(0x594)](_0x455f74)) : (_0x5afe7a[_0x13f879(0x594)](_0x455f74), _0x5afe7a[_0x13f879(0x594)](_0x3ade85)); } _0x53f46c['appendChild'](_0x5afe7a); const _0x2e47a9 = document['createElement'](_0x13f879(0x63a)); return _0x2e47a9[_0x13f879(0x894)] = 'timestamp', _0x2e47a9[_0x13f879(0x324)] = _0x15bde6(_0x2dff34[_0x13f879(0x518)]), _0x53f46c[_0x13f879(0x594)](_0x2e47a9), _0x2d4f68[_0x13f879(0x594)](_0x53f46c), _0x53f46c; } else { const _0x5dd1c5 = _0x1f1d8b[_0x13f879(0x30c)](_0x3a7ee4); _0x15484d[_0x13f879(0x74a)](_0x5dd1c5) ? _0x54b2d4 = [..._0x5a0554, ..._0x5dd1c5] : _0x193281 = _0x1c088; } } document['getElementById'](_0x3abecc(0x733))[_0x3abecc(0xabf)]('click', _0x208cee); let _0x182bf1 = null, _0x3085bc = null; function _0x208cee(_0x5c5476) { const _0x10a2fd = _0x3abecc; if ('nHRPU' !== _0x10a2fd(0xaad)) { if (window[_0x10a2fd(0x901)]()[_0x10a2fd(0xa98)]()) { if ('oZGkZ' === _0x10a2fd(0x778)) _0xceabe6[_0x10a2fd(0x324)] = _0x5ee3aa['name'], _0x4e43bd['textContent'] = '（开始一段新的对话...）', _0x298be1(_0x18a87d, 'normal'); else return; } const _0x56a317 = _0x5c5476[_0x10a2fd(0xa4c)][_0x10a2fd(0xbda)](_0x10a2fd(0xa02)), _0x2e8c17 = _0x5c5476[_0x10a2fd(0xa4c)][_0x10a2fd(0xbda)](_0x10a2fd(0x6c7)); if (!_0x56a317 || _0x2e8c17) return; const _0x529545 = parseInt(_0x56a317['dataset'][_0x10a2fd(0x357)], 0xa); if (isNaN(_0x529545)) return; _0xb978ff(_0x529545); } else _0x3a941e[_0x10a2fd(0xbd7)] = _0x4f9d47['scrollHeight']; } function _0x29d35e() { const _0x26e381 = _0x3abecc, _0x535e9e = _0x28f748(); if (!_0x535e9e) { if (_0x26e381(0x422) === _0x26e381(0x422)) { _0x3757d5['textContent'] = _0x26e381(0x9ec); return; } else return _0x16b88[_0x26e381(0xbf0)](_0x26e381(0x23b)), 0x0; } if (_0x535e9e['type'] === _0x26e381(0xa4e)) { const _0xa2cab7 = _0x2653c6(_0x535e9e[_0x26e381(0xa2a)][0x0]); _0x3757d5[_0x26e381(0x324)] = _0xa2cab7 ? _0xa2cab7[_0x26e381(0x420)] : _0x26e381(0x5c5); } else _0x3757d5[_0x26e381(0x324)] = _0x535e9e[_0x26e381(0x420)] || '群聊\x20(' + _0x535e9e[_0x26e381(0xa2a)][_0x26e381(0x6f2)] + ')'; } function _0x473a59(_0x43d5b6) { const _0x2d3bb7 = _0x3abecc; if (_0x2d3bb7(0x47c) !== _0x2d3bb7(0x47c)) _0x8a4017[_0x2d3bb7(0x324)] = _0x2d3bb7(0x90a) + _0x1031f2[_0x2d3bb7(0x6f2)] + '\x20项'; else { const _0x5cfe0c = document[_0x2d3bb7(0x50b)](_0x2d3bb7(0x741)); if (_0x5cfe0c && (_0x5cfe0c['id'] === _0x2d3bb7(0xba9) || _0x5cfe0c['id'] === _0x2d3bb7(0x890))) _0x2d3bb7(0x22a) !== _0x2d3bb7(0xa25) ? _0x46a9ae() : _0x331da5 = _0x52c266['avatar'] || _0x5696bf; else { const _0x5d8fa6 = document[_0x2d3bb7(0x9b8)](_0x2d3bb7(0xc1c)); _0x5d8fa6[_0x2d3bb7(0xb5e)](_0x149a82 => _0x149a82[_0x2d3bb7(0xb26)]()); } } } function _0x43f2bd() { const _0x27edfc = _0x3abecc; if (_0x27edfc(0x40e) === _0x27edfc(0x40e)) _0x2e4b8c[_0x27edfc(0x524)] && _0x2e4b8c[_0x27edfc(0x737)] && (console[_0x27edfc(0xbf0)](_0x27edfc(0x899)), _0x2e4b8c['currentAbortController'][_0x27edfc(0x968)](_0x27edfc(0x886)), _0x2e4b8c['currentAbortController'] = null), _0x2e4b8c['isGenerating'] = ![], _0x473a59(![]); else { const _0x1cec04 = _0xab9ac3[_0x27edfc(0x30c)](_0x547ef4), _0x1491af = { ..._0x14edb2 }, _0x3570e7 = { ..._0x1491af, ..._0x1cec04 }; _0x3570e7[_0x27edfc(0xab3)] = { ..._0x1491af[_0x27edfc(0xab3)], ..._0x1cec04[_0x27edfc(0xab3)] || {} }, _0x3570e7[_0x27edfc(0xa8a)] = { ..._0x1491af[_0x27edfc(0xa8a)], ..._0x1cec04[_0x27edfc(0xa8a)] || {} }, _0x535283[_0x27edfc(0x9cb)](_0x5caa0e, _0x3570e7); } } function _0x28f748() { const _0x273038 = _0x3abecc; if ('nWXje' !== _0x273038(0x1f9)) return _0x2e4b8c[_0x273038(0x442)][_0x273038(0x69e)](_0x21b182 => _0x21b182['id'] === _0x2e4b8c[_0x273038(0x7ee)]); else { const _0x27b2f6 = _0x42362a['createElement'](_0x273038(0x63a)); _0x27b2f6['className'] = _0x273038(0x55c), _0x27b2f6[_0x273038(0xb56)][_0x273038(0x94b)] = _0x273038(0x347); const _0x41cf37 = _0x345bd8[_0x273038(0x2c0)][_0x41c602], _0x20763c = _0x41cf37[_0x273038(0x4af)][_0x273038(0x9e3)]((_0x190835, _0x64b1e) => _0x190835 + (_0x64b1e[_0x273038(0xb86)] || 0x0), 0x0); _0x27b2f6[_0x273038(0x2c9)] = _0x273038(0x4b1) + _0x4859ce + _0x273038(0x543) + _0x20763c[_0x273038(0x8c5)](0x2) + _0x273038(0x247), _0x27b2f6[_0x273038(0xabf)]('click', () => { const _0x2bd6f8 = _0x273038; _0x38f0fb[_0x2bd6f8(0x42c)][_0x2bd6f8(0xb26)](_0x2bd6f8(0x454)), _0x4c159c[_0x2bd6f8(0x42c)]['add'](_0x2bd6f8(0x454)), _0x5748c0(_0x41cf37, _0x2c3d8a); }), _0x2959ac[_0x273038(0x594)](_0x27b2f6); } } function _0x2653c6(_0x34886f) { const _0x402d20 = _0x3abecc; if ('UgXxO' !== _0x402d20(0x57b)) return _0x2e4b8c['characters'][_0x402d20(0x69e)](_0xc9403e => _0xc9403e['id'] === _0x34886f); else _0x3071b7 = new _0x376855(_0x282e24['max'][_0x402d20(0x805)](null, _0x4c2d7c)), _0x233ec7 = _0x222399[_0x402d20(0x408)](_0x402d20(0x591), { 'dateStyle': _0x402d20(0x9cd), 'timeStyle': _0x402d20(0x303) }); } function _0x126b7b(_0x23a03e) { const _0x4d9ef4 = _0x3abecc; _0x2e4b8c[_0x4d9ef4(0x404)] = _0x2e4b8c[_0x4d9ef4(0x404)][_0x4d9ef4(0x742)](_0x40894a => _0x40894a['id'] !== _0x23a03e), _0x2e4b8c[_0x4d9ef4(0x442)]['forEach'](_0x23d8e3 => { const _0x24a7fd = _0x4d9ef4; if (_0x23d8e3[_0x24a7fd(0x875)] === _0x24a7fd(0xacf)) { if ('ZwtJV' !== _0x24a7fd(0x68d)) _0x23d8e3['participantIds'] = _0x23d8e3['participantIds'][_0x24a7fd(0x742)](_0x508c6b => _0x508c6b !== _0x23a03e); else { if (_0x397874[_0x24a7fd(0x6fd)]) _0x48d9db[_0x24a7fd(0x7e4)]('[' + _0x49adb9(_0x56fb32) + _0x24a7fd(0x988) + (_0x1eea0c[_0x24a7fd(0xa19)]?.[_0x24a7fd(0xaab)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x260cf5['image']) { const _0xa9f130 = _0x53e382[_0x24a7fd(0xa19)] ? '\x20' + _0x45eee7[_0x24a7fd(0xa19)] : ''; _0x40d75c[_0x24a7fd(0x7e4)]('[' + _0x17091f(_0x30eaa8) + ']\x20[image]' + _0xa9f130); } else _0x45b014['content'] && _0x33fd71['push']('[' + _0x2def9f(_0x1cfa6e) + ']\x20' + _0x4a5692[_0x24a7fd(0xa19)]); } } } }); const _0x26eca3 = _0x2e4b8c[_0x4d9ef4(0x442)]['find'](_0x33ae66 => _0x33ae66[_0x4d9ef4(0x875)] === _0x4d9ef4(0xa4e) && _0x33ae66[_0x4d9ef4(0xa2a)][_0x4d9ef4(0x21d)](_0x23a03e)); _0x26eca3 && (_0x4d9ef4(0x67f) === _0x4d9ef4(0x412) ? (_0x49e5e0 = '0x' + _0x2c91fb[0x1] + _0x105eb8[0x2], _0x1395f8 = '0x' + _0x1d3bb3[0x3] + _0xe101cd[0x4], _0x2afb1a = '0x' + _0x595031[0x5] + _0xda48d0[0x6]) : _0xccc749(_0x26eca3['id'])), _0x2e4b8c[_0x4d9ef4(0x442)] = _0x2e4b8c['chats'][_0x4d9ef4(0x742)](_0x2c63bb => _0x2c63bb['type'] !== _0x4d9ef4(0xacf) || _0x2c63bb[_0x4d9ef4(0xa2a)][_0x4d9ef4(0x6f2)] > 0x1), _0x5a3c71(), _0x4adb3c(); } function _0xccc749(_0x82d519) { const _0x3c2f72 = _0x3abecc; _0x2e4b8c['chats'] = _0x2e4b8c['chats'][_0x3c2f72(0x742)](_0x4e3728 => _0x4e3728['id'] !== _0x82d519); try { _0x3c2f72(0x83f) !== _0x3c2f72(0x7ab) ? localStorage[_0x3c2f72(0x4a7)](_0x3c2f72(0x76e) + _0x82d519) : (_0x1644f7[_0x3c2f72(0x392)]('editing-user-id')['value'] = '', _0x1a248c[_0x3c2f72(0x392)](_0x3c2f72(0x32d))[_0x3c2f72(0x324)] = _0x3c2f72(0x28b), _0x3c2103[_0x3c2f72(0x392)]('user-name')[_0x3c2f72(0x60e)] = _0x3c2f72(0x7b5) + (_0x25fd94[_0x3c2f72(0x89d)]['length'] + 0x1), _0x3badb7['style'][_0x3c2f72(0xb85)] = _0x3c2f72(0x24b) + _0x113714 + '\x27)', _0x2b73d2[_0x3c2f72(0x392)]('user-persona')[_0x3c2f72(0x60e)] = '', _0x275826[_0x3c2f72(0xb56)][_0x3c2f72(0x993)] = _0x3c2f72(0x3a4), _0x4fdb55[_0x3c2f72(0x392)]('delete-user-profile-button')[_0x3c2f72(0xb56)][_0x3c2f72(0x993)] = _0x3c2f72(0x3a4)); } catch (_0x204339) { console[_0x3c2f72(0x5b1)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x82d519, _0x204339); } if (_0x2e4b8c[_0x3c2f72(0x7ee)] === _0x82d519) { if (_0x3c2f72(0x79c) === 'ZuWLA') try { const _0x10b6e5 = _0x1c598d[_0x3c2f72(0x30c)](_0x4b5d08), _0x11b51b = { ..._0x510dcd }, _0xa7618e = { ..._0x11b51b, ..._0x10b6e5 }; _0xa7618e[_0x3c2f72(0xab3)] = { ..._0x11b51b['preferences'], ..._0x10b6e5['preferences'] || {} }, _0xa7618e[_0x3c2f72(0xa8a)] = { ..._0x11b51b[_0x3c2f72(0xa8a)], ..._0x10b6e5[_0x3c2f72(0xa8a)] || {} }, _0x25bcc1[_0x3c2f72(0x9cb)](_0x57a88d, _0xa7618e); } catch (_0x263c35) { _0x447689[_0x3c2f72(0x5b1)]('解析存档失败，正在重置:', _0x263c35), _0x3753f4[_0x3c2f72(0x4a7)](_0x3c2f72(0x332)); } else _0x2e4b8c['activeChatId'] = _0x2e4b8c[_0x3c2f72(0x442)][0x0]?.['id'] || null, _0x290d79(_0x2e4b8c['activeChatId']); } _0x5a3c71(); } async function _0x290d79(_0x28b5d3) { const _0x57f60e = _0x3abecc; _0x2e4b8c[_0x57f60e(0x7ee)] !== _0x28b5d3 && (_0x43f2bd(), _0x2e4b8c[_0x57f60e(0x356)] = 0x64); if (!_0x28b5d3) { if ('qiGXv' === 'nOIpQ') _0x16f63e = _0x57f60e(0x47f) + _0x344443; else { _0x2e4b8c[_0x57f60e(0x7ee)] = null, _0x5a3c71(), _0x113379(![]), document['getElementById'](_0x57f60e(0x7d7))[_0x57f60e(0xb56)][_0x57f60e(0xb85)] = ''; return; } } _0x2e4b8c[_0x57f60e(0x7ee)] = _0x28b5d3, _0x5a3c71(), _0x29d35e(), _0x2d4f68[_0x57f60e(0x2c9)] = '', _0x5b3ee9(!![], _0x57f60e(0x85d)), setTimeout(async () => { const _0x18eeb0 = _0x57f60e; if ('Xendo' !== _0x18eeb0(0x63b)) { if (!_0x398f83['activeQuote']) return; _0x262d35[_0x18eeb0(0x324)] = _0x18eeb0(0x761) + _0x249f76[_0x18eeb0(0x3ab)][_0x18eeb0(0x447)], _0x163a3d[_0x18eeb0(0x324)] = _0x1e430a[_0x18eeb0(0x3ab)][_0x18eeb0(0xa19)], _0x31d7dc[_0x18eeb0(0xb56)][_0x18eeb0(0x993)] = _0x18eeb0(0x94c); } else try { _0x7af3ed(); const _0x213ca1 = _0x28f748(), _0x39eec1 = document[_0x18eeb0(0x392)](_0x18eeb0(0x7d7)); let _0x2a5db1 = null; if (_0x213ca1) { if (_0x213ca1[_0x18eeb0(0x875)] === _0x18eeb0(0xa4e)) { if (_0x18eeb0(0x32f) === _0x18eeb0(0x991)) { const _0x313723 = _0x21f9eb['concat'](_0x1fbb68); _0xf8bf2 = _0x587166[_0x18eeb0(0x2bf)](_0x313723), _0x5a0ed3[_0x18eeb0(0xbf0)]('Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。'); } else { const _0x4910c3 = _0x213ca1[_0x18eeb0(0xa2a)][0x0]; _0x537ba1(_0x4910c3), _0x2a5db1 = await _0x1de353(_0x18eeb0(0x36a) + _0x4910c3); } } else _0x2a5db1 = await _0x1de353(_0x18eeb0(0x6e7) + _0x213ca1['id']); if (_0x2a5db1) { if (_0x18eeb0(0x266) === _0x18eeb0(0x266)) _0x39eec1[_0x18eeb0(0xb56)][_0x18eeb0(0xb85)] = 'url(\x27' + URL[_0x18eeb0(0x38c)](_0x2a5db1) + '\x27)', _0x39eec1[_0x18eeb0(0xb56)][_0x18eeb0(0xa1f)] = _0x18eeb0(0x883), _0x39eec1[_0x18eeb0(0xb56)][_0x18eeb0(0x979)] = 'center'; else { const _0x1cb298 = _0x4293d0[_0x18eeb0(0x392)](_0x44f56e); if (_0x1cb298 && _0x2cdcd7) _0x1cb298['src'] = _0x684351[_0x18eeb0(0x38c)](_0x543b39); } } else _0x39eec1[_0x18eeb0(0xb56)][_0x18eeb0(0xb85)] = ''; } _0x2d9cac(); } catch (_0x439177) { console['error'](_0x18eeb0(0x249), _0x439177), _0x18c07b(_0x18eeb0(0x25a) + _0x439177[_0x18eeb0(0x542)]); } finally { _0x5b3ee9(![]); } }, 0x32); } async function _0x356196() { const _0xd2dc6b = _0x3abecc; if (_0x2e4b8c[_0xd2dc6b(0x524)]) { _0x18c07b(_0xd2dc6b(0x5d4)); return; } const _0x2efb20 = _0x2e4b8c[_0xd2dc6b(0x2c8)]; if (_0x2efb20[_0xd2dc6b(0x6f2)] === 0x0) return; let _0x3f28e6 = -0x1; for (let _0xed88b0 = _0x2efb20[_0xd2dc6b(0x6f2)] - 0x1; _0xed88b0 >= 0x0; _0xed88b0--) { if (_0x2efb20[_0xed88b0][_0xd2dc6b(0x253)] === _0xd2dc6b(0x5c3)) { _0x3f28e6 = _0xed88b0; break; } } if (_0x3f28e6 === -0x1 || _0x3f28e6 === _0x2efb20[_0xd2dc6b(0x6f2)] - 0x1) { _0x18c07b('还没有我的回应可以重新生成哦。'); return; } _0x2efb20[_0xd2dc6b(0x872)](_0x3f28e6 + 0x1), _0x2e4b8c['activeMeetingScriptQueue'] = [], _0x5f38ff(), _0xc1c9f0(), _0x3e2cce(_0x2e4b8c[_0xd2dc6b(0x8f1)]), setTimeout(() => { _0x3137d6(); }, 0x64); } async function _0x39cb3c() { const _0x8f7955 = _0x3abecc; if (_0x2e4b8c[_0x8f7955(0x524)]) { if (_0x8f7955(0x495) === _0x8f7955(0x495)) { _0x18c07b(_0x8f7955(0x548)); return; } else _0x4f05b7['activeListenSession'] = null, _0x43e60e(), _0x374fe8(_0x8f7955(0x8b5)), _0x6d45b0(), _0x1d23a2[_0x8f7955(0x42c)][_0x8f7955(0xb26)]('show'), _0x28dbad(() => _0x509254['style']['display'] = 'none', 0x12c); } const _0x37a487 = _0x2e4b8c[_0x8f7955(0x2c8)]; if (_0x37a487[_0x8f7955(0x6f2)] === 0x0) return; let _0x1caf89 = -0x1; for (let _0xc83ea1 = _0x37a487[_0x8f7955(0x6f2)] - 0x1; _0xc83ea1 >= 0x0; _0xc83ea1--) { if (_0x37a487[_0xc83ea1][_0x8f7955(0x253)] === _0x8f7955(0x5c3)) { if (_0x8f7955(0xafe) === _0x8f7955(0xafe)) { _0x1caf89 = _0xc83ea1; break; } else _0x27bafa = _0x155f2f[_0x8f7955(0x3f7)]; } } if (_0x1caf89 === -0x1 || _0x1caf89 === _0x37a487[_0x8f7955(0x6f2)] - 0x1) { _0x18c07b(_0x8f7955(0x26f)); return; } _0x37a487[_0x8f7955(0x872)](_0x1caf89 + 0x1), _0x5f38ff(), _0x46a9ae(), setTimeout(() => { _0x3137d6(); }, 0x64); } function _0x49bbae(_0x4d6732 = null) { const _0x5e1651 = _0x3abecc, _0x3abfae = _0x4d6732 ?? _0xd8c7f5['value'][_0x5e1651(0x8bb)](); if (_0x3abfae === '' || !_0x2e4b8c[_0x5e1651(0x7ee)]) return; const _0x480995 = document['querySelector'](_0x5e1651(0x741)), _0x4b7151 = _0x480995['id'] === _0x5e1651(0xba9), _0x44ed71 = { 'role': 'user', 'content': _0x3abfae, 'timestamp': Date[_0x5e1651(0x9b4)](), 'isOffline': _0x4b7151 }; _0x2e4b8c[_0x5e1651(0x3ab)] && (_0x5e1651(0xa82) !== _0x5e1651(0x607) ? _0x44ed71[_0x5e1651(0xc33)] = { ..._0x2e4b8c[_0x5e1651(0x3ab)] } : _0x2b6d80[_0x5e1651(0x392)](_0x5e1651(0x5e8))[_0x5e1651(0x84e)] = _0x3b347c[_0x5e1651(0x58d)] || _0x5569dd), _0x2e4b8c[_0x5e1651(0x2c8)][_0x5e1651(0x7e4)](_0x44ed71), _0x5f38ff(), _0x46a9ae(), !_0x4d6732 && (_0xd8c7f5[_0x5e1651(0x60e)] = ''), _0x5a7d24(); } function _0x1d93f8(_0x13e302) { const _0x59cde9 = _0x3abecc; if (!_0x13e302 || !_0x2e4b8c['activeChatId']) return; const _0x4aa4b2 = { 'role': _0x59cde9(0x5c3), 'content': _0x59cde9(0xb1d) + _0x13e302[_0x59cde9(0x420)] + ']', 'displayUrl': _0x13e302[_0x59cde9(0x6ae)], 'timestamp': Date[_0x59cde9(0x9b4)]() }; _0x2e4b8c['conversationHistory'][_0x59cde9(0x7e4)](_0x4aa4b2), _0x16ed9e(_0x4aa4b2, _0x2e4b8c[_0x59cde9(0x2c8)][_0x59cde9(0x6f2)] - 0x1), _0x5f38ff(), _0x28c089[_0x59cde9(0x42c)][_0x59cde9(0xb26)]('show'); } async function _0x1c665b(_0x590696) { const _0x5ef867 = _0x3abecc; if (_0x5ef867(0x82f) !== _0x5ef867(0x82f)) _0x1d0f99(), _0x1e0c2d('编辑群成员功能正在开发中...'); else { const _0x57a5ac = _0x590696['target']['files'][0x0]; if (!_0x57a5ac || !_0x2e4b8c[_0x5ef867(0x7ee)]) return; _0x5b3ee9(!![], _0x5ef867(0xa5e)); try { if ('SGDKy' !== 'SGDKy') return new _0x5858db((_0x1448a4, _0x368bcb) => { const _0x531533 = _0x5ef867, _0x41c34e = new _0x487573(); _0x41c34e[_0x531533(0x779)] = () => _0x1448a4(_0x41c34e[_0x531533(0x3cf)]), _0x41c34e[_0x531533(0x677)] = _0x368bcb, _0x41c34e[_0x531533(0x59f)](_0x370a0f); }); else { const _0x1c1d0e = await _0x4b681c(_0x57a5ac, 0x320, 0.8, !![]), _0x5c441e = _0x5ef867(0x2b0) + Date[_0x5ef867(0x9b4)](); await _0x3b613b(_0x5c441e, _0x1c1d0e); const _0x23651a = _0xd8c7f5[_0x5ef867(0x60e)][_0x5ef867(0x8bb)](); _0xd8c7f5[_0x5ef867(0x60e)] = ''; const _0x4c434d = { 'role': 'user', 'content': _0x23651a, 'imageId': _0x5c441e, 'timestamp': Date[_0x5ef867(0x9b4)]() }; _0x2e4b8c[_0x5ef867(0x2c8)][_0x5ef867(0x7e4)](_0x4c434d), _0x16ed9e(_0x4c434d, _0x2e4b8c[_0x5ef867(0x2c8)][_0x5ef867(0x6f2)] - 0x1), _0x5f38ff(); } } catch (_0x43a3f8) { _0x18c07b(_0x5ef867(0xb78) + _0x43a3f8[_0x5ef867(0x542)]); } finally { 'XNcYu' !== 'WMUVx' ? (_0x5b3ee9(![]), _0x590696[_0x5ef867(0xa4c)][_0x5ef867(0x60e)] = '') : _0x5c8bcc['addEventListener'](_0x5ef867(0x4b9), () => { const _0x5bd6ae = _0x5ef867; if (_0x1dade8[_0x5bd6ae(0x6f2)] === 0x0) return; _0x5775c1 = (_0x32b54c + 0x1) % _0xd6bf89[_0x5bd6ae(0x6f2)], _0x4ee6b7(_0x3c7564[_0x2f8b74], _0x1a6504); }); } } } async function _0x5da13e() { const _0x333afa = _0x3abecc; if (!_0x2e4b8c[_0x333afa(0x7ee)]) return; const _0x2adca8 = await _0x32665b(); if (!_0x2adca8) return; _0x18c07b('正在搜索音乐...'); try { if (_0x333afa(0x45d) !== 'hLvLg') { if (_0x166461) _0xc25c['textContent'] = '▶'; } else { const _0x1db883 = await _0x273f55(_0x2adca8[_0x333afa(0x50e)], _0x2adca8[_0x333afa(0x5c7)]), _0x4996e3 = { 'role': 'user', 'type': 'music', 'content': _0x333afa(0x364) + _0x2adca8['songName'] + '\x20-\x20' + _0x2adca8[_0x333afa(0x5c7)] + ']', 'songName': _0x2adca8[_0x333afa(0x50e)], 'artist': _0x2adca8['artist'], 'coverUrl': _0x1db883[_0x333afa(0x883)], 'playableUrl': _0x1db883[_0x333afa(0x6ae)], 'timestamp': Date['now']() }; _0x2e4b8c['conversationHistory'][_0x333afa(0x7e4)](_0x4996e3), _0x5f38ff(), _0x2d9cac(); } } catch (_0x367345) { if (_0x333afa(0xac5) === _0x333afa(0x745)) { const _0x3741db = _0x13baaa[_0x333afa(0x92e)](_0x333afa(0x63a)); _0x3741db[_0x333afa(0x324)] = _0x569543, _0x3741db[_0x333afa(0xabf)](_0x333afa(0x4b9), () => { const _0x1f88f4 = _0x333afa; _0x5abbd5['value'] = _0x1befc2, _0x2068db[_0x1f88f4(0x42c)]['remove'](_0x1f88f4(0x3a9)); }), _0x5ef95c[_0x333afa(0x594)](_0x3741db); } else console['error'](_0x333afa(0xc18), _0x367345), _0x18c07b(_0x333afa(0x1df) + _0x367345[_0x333afa(0x542)]); } } function _0x277f39(_0x3a103a, _0x5c2f04 = 0x78) { const _0x38f46a = _0x3abecc, _0x51aab9 = _0x9fe1b8 => { const _0x1a31ab = _0x198c; if (_0x1a31ab(0x30b) === 'RiRIK') { if (_0x9fe1b8[_0x1a31ab(0x253)] === _0x1a31ab(0x5c3)) return _0x2e4b8c['userProfile']?.['name'] || _0x1a31ab(0xc28); if (_0x9fe1b8[_0x1a31ab(0x662)]) { if (_0x1a31ab(0x3ff) !== _0x1a31ab(0xc0e)) { const _0xd2d5a6 = _0x2653c6(_0x9fe1b8[_0x1a31ab(0x662)]); return _0xd2d5a6?.['name'] || _0x1a31ab(0x52d); } else { const _0x39a9f7 = _0x932559[_0x1a31ab(0x392)]('snoop-summary-textarea'); _0x39a9f7[_0x1a31ab(0x3ba)](), _0x524b1a[_0x1a31ab(0x8a0)](_0x1a31ab(0xb2a)), _0x43d8e3('档案已复制到剪贴板！'); } } if (_0x3a103a?.[_0x1a31ab(0x875)] === _0x1a31ab(0xa4e)) { const _0x1767b2 = _0x2653c6(_0x3a103a[_0x1a31ab(0xa2a)][0x0]); return _0x1767b2?.[_0x1a31ab(0x420)] || 'AI'; } return 'Assistant'; } else { const _0x25ff33 = _0x75bd2d(_0x1dbae7[_0x1a31ab(0xa19)]); _0x37f52a[_0x1a31ab(0x9cb)](_0x134b57, { 'content': _0x25ff33[_0x1a31ab(0xa19)], 'quotedMessage': _0x25ff33[_0x1a31ab(0xc33)] }); } }, _0xfdb7f8 = _0x2e4b8c[_0x38f46a(0x2c8)][_0x38f46a(0x43d)](-_0x5c2f04), _0x4236c5 = []; for (const _0x2c23bd of _0xfdb7f8) { if (_0x2c23bd[_0x38f46a(0x6fd)]) _0x4236c5[_0x38f46a(0x7e4)]('[' + _0x51aab9(_0x2c23bd) + _0x38f46a(0x988) + (_0x2c23bd[_0x38f46a(0xa19)]?.[_0x38f46a(0xaab)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x2c23bd[_0x38f46a(0x3f7)]) { const _0x123231 = _0x2c23bd['content'] ? '\x20' + _0x2c23bd[_0x38f46a(0xa19)] : ''; _0x4236c5['push']('[' + _0x51aab9(_0x2c23bd) + _0x38f46a(0x213) + _0x123231); } else _0x2c23bd[_0x38f46a(0xa19)] && _0x4236c5[_0x38f46a(0x7e4)]('[' + _0x51aab9(_0x2c23bd) + ']\x20' + _0x2c23bd[_0x38f46a(0xa19)]); } } return _0x4236c5[_0x38f46a(0x52b)]('\x0a'); } function _0x4ccd97(_0x43ab88, _0x3a9f65) { const _0x427e16 = _0x3abecc; if (!_0x43ab88 || !_0x3a9f65) return null; const _0x38de60 = _0x3a9f65[_0x427e16(0xaab)](/@([^\s:：,，。!?]+)/); if (!_0x38de60) return null; const _0x25dacf = _0x38de60[0x1][_0x427e16(0x92f)](); for (const _0x189819 of _0x43ab88[_0x427e16(0xa2a)]) { if (_0x427e16(0x207) !== _0x427e16(0x207)) { const _0x44624a = _0x5272a3[_0x427e16(0x2c8)][_0x427e16(0x742)](_0x24f557 => _0x24f557[_0x427e16(0x875)] === _0x427e16(0xc2d) && _0x24f557[_0x427e16(0x565)])[_0x427e16(0x5e9)](_0xfa68e => ({ ..._0xfa68e, 'source': _0x427e16(0x4fb) })); _0x38782b[_0x427e16(0x7e4)](..._0x44624a); } else { const _0x3acc64 = _0x2653c6(_0x189819); if (!_0x3acc64?.[_0x427e16(0x420)]) continue; if (_0x3acc64['name'][_0x427e16(0x92f)]() === _0x25dacf) return _0x3acc64; if (_0x3acc64[_0x427e16(0x420)][_0x427e16(0x92f)]()['startsWith'](_0x25dacf)) return _0x3acc64; } } return null; } function _0x54f8f3(_0x53beaf) { const _0x11de02 = _0x3abecc; if (_0x11de02(0x48f) !== 'GbSmg') { const _0x282405 = _0x1bb7d1[_0x11de02(0x392)]('confirm-altar-upload-button'); _0x344fa5[_0x11de02(0x6d9)] && _0x1814e9[_0x11de02(0x268)] ? _0x282405[_0x11de02(0x523)] = ![] : _0x282405['disabled'] = !![]; } else { const _0x1ee193 = _0x53beaf[_0x11de02(0x78f)]('{'), _0x22e71b = _0x53beaf[_0x11de02(0x549)]('}'); if (_0x1ee193 >= 0x0 && _0x22e71b > _0x1ee193) return _0x53beaf[_0x11de02(0x43d)](_0x1ee193, _0x22e71b + 0x1); return _0x53beaf; } } function _0x59046e(_0x405528, _0x24e228, _0x3dfa97) { const _0x49ac45 = _0x3abecc, _0x526c47 = new Map(_0x24e228[_0x49ac45(0x5e9)](_0x5a28ef => [String(_0x5a28ef['id']), _0x5a28ef])), _0x268fa1 = _0x580223 => String(_0x580223 || '')[_0x49ac45(0x92f)]()[_0x49ac45(0x8d5)](/\s+/g, ''), _0x294cc6 = new Map(_0x24e228['map'](_0x129f1c => [_0x268fa1(_0x129f1c[_0x49ac45(0x420)]), _0x129f1c])), _0xcea77a = new Set(_0x3dfa97), _0x28f5d0 = { 'events': [] }; for (const _0x163e35 of _0x405528?.[_0x49ac45(0x850)] || []) { const _0x2f799d = _0x163e35[_0x49ac45(0x662)] ?? _0x163e35['sender'] ?? _0x163e35['sender_id'] ?? _0x163e35[_0x49ac45(0x5fa)] ?? _0x163e35[_0x49ac45(0x253)] ?? _0x163e35[_0x49ac45(0x420)]; if (!_0x2f799d) continue; let _0x38aada = _0x526c47[_0x49ac45(0x6dd)](String(_0x2f799d)) || _0x294cc6[_0x49ac45(0x6dd)](_0x268fa1(_0x2f799d)); if (!_0x38aada) continue; const _0x38b447 = (_0x163e35['kind'] || _0x163e35[_0x49ac45(0x875)] || _0x49ac45(0xbbc))[_0x49ac45(0x92f)](); if (_0x38b447 === 'sticker') { const _0x439848 = (_0x163e35[_0x49ac45(0x4c3)] ?? _0x163e35[_0x49ac45(0x4bf)] ?? _0x163e35['emote'] ?? _0x163e35['tag'])?.[_0x49ac45(0x8bb)](); if (_0x439848 && _0xcea77a[_0x49ac45(0x3a1)](_0x439848)) _0x28f5d0['events']['push']({ 'senderId': _0x38aada['id'], 'kind': _0x49ac45(0x4c3), 'sticker': _0x439848 }); else { const _0x24572d = String(_0x163e35[_0x49ac45(0xa19)] ?? _0x163e35[_0x49ac45(0xbbc)] ?? '')['trim']() || '[sticker:' + (_0x439848 || _0x49ac45(0x6c2)) + ']'; if (_0x24572d) _0x28f5d0[_0x49ac45(0x850)]['push']({ 'senderId': _0x38aada['id'], 'kind': _0x49ac45(0xbbc), 'content': _0x24572d }); } } else { if (_0x38b447 === _0x49ac45(0xc2d) && _0x163e35[_0x49ac45(0x50e)] && _0x163e35[_0x49ac45(0x5c7)]) _0x28f5d0[_0x49ac45(0x850)][_0x49ac45(0x7e4)]({ 'senderId': _0x38aada['id'], 'kind': 'music', 'songName': _0x163e35[_0x49ac45(0x50e)], 'artist': _0x163e35[_0x49ac45(0x5c7)] }); else { if (_0x49ac45(0x6b8) !== 'FKQVM') _0x5d31d6[_0x49ac45(0x42c)][_0x49ac45(0xb26)]('active'), _0x196ea2['classList'][_0x49ac45(0x6ec)](_0x49ac45(0x454)), _0x5f3e5a(_0x12611f, _0x1a7bed); else { const _0x4516c2 = String(_0x163e35[_0x49ac45(0xa19)] ?? _0x163e35[_0x49ac45(0xbbc)] ?? _0x163e35[_0x49ac45(0x542)] ?? '')[_0x49ac45(0x8bb)](); if (_0x4516c2) _0x28f5d0[_0x49ac45(0x850)]['push']({ 'senderId': _0x38aada['id'], 'kind': 'text', 'content': _0x4516c2 }); } } } } return _0x28f5d0; } async function _0x2bb35d(_0x3da599) { const _0x2a583b = _0x3abecc; if (!_0x3da599 || !Array['isArray'](_0x3da599[_0x2a583b(0x850)]) || _0x3da599[_0x2a583b(0x850)][_0x2a583b(0x6f2)] === 0x0) return; const _0x57b022 = _0x31f210 => _0x31f210 + Math[_0x2a583b(0x552)](Math[_0x2a583b(0xb59)]() * 0x190); let _0x365ae9 = 0x1f4; for (const _0x52ada9 of _0x3da599['events']) { if (_0x2a583b(0xac2) === _0x2a583b(0xac2)) { await new Promise(_0x5403d4 => setTimeout(_0x5403d4, _0x57b022(_0x365ae9))), _0x365ae9 = 0x2bc; const _0x5dea3f = _0x2e4b8c[_0x2a583b(0x2c8)]['at'](-0x1)?.[_0x2a583b(0x1e3)] ?? ![]; if (_0x52ada9[_0x2a583b(0x3cb)] === _0x2a583b(0x4c3)) { const _0x497d57 = _0x216772[_0x2a583b(0x69e)](_0x5abde9 => _0x5abde9['name'] === _0x52ada9[_0x2a583b(0x4c3)]); if (_0x497d57) { const _0x409ef5 = { 'role': _0x2a583b(0x880), 'content': '[AI发送了表情：' + _0x497d57['name'] + ']', 'displayUrl': _0x497d57[_0x2a583b(0x6ae)], 'senderId': _0x52ada9[_0x2a583b(0x662)], 'timestamp': Date[_0x2a583b(0x9b4)](), 'isOffline': _0x5dea3f }; _0x2e4b8c[_0x2a583b(0x2c8)]['push'](_0x409ef5), _0x5f38ff(), _0x46a9ae(); } } else { if (_0x52ada9[_0x2a583b(0x3cb)] === 'music' && _0x52ada9[_0x2a583b(0x50e)] && _0x52ada9['artist']) { const { songName: _0x245f49, artist: _0x1926e5 } = _0x52ada9, _0x51c285 = { 'role': 'assistant', 'type': _0x2a583b(0xc2d), 'content': _0x2a583b(0x925) + _0x245f49 + _0x2a583b(0x926) + _0x1926e5 + ']', 'songName': _0x245f49, 'artist': _0x1926e5, 'senderId': _0x52ada9[_0x2a583b(0x662)], 'timestamp': Date[_0x2a583b(0x9b4)](), 'isOffline': _0x5dea3f }; try { if (_0x2a583b(0x473) !== _0x2a583b(0x57e)) { const _0x10c9b9 = await _0x273f55(_0x245f49, _0x1926e5); _0x51c285[_0x2a583b(0x459)] = _0x10c9b9[_0x2a583b(0x883)], _0x51c285[_0x2a583b(0x565)] = _0x10c9b9[_0x2a583b(0x6ae)]; } else { const _0x5a4968 = _0x267ded, _0x51841a = _0x5a4968[_0x2a583b(0x220)], _0x515455 = _0x5a4968[_0x2a583b(0xbd7)]; _0x4525fa[_0x2a583b(0x356)] += 0x64, _0x379ca0(), _0x2af876(() => { const _0x5344c9 = _0x2a583b, _0x543827 = _0x5a4968[_0x5344c9(0x220)]; _0x5a4968[_0x5344c9(0xbd7)] = _0x515455 + (_0x543827 - _0x51841a); }); } } catch (_0x9498ec) { console[_0x2a583b(0x5b1)]('群聊音乐搜索失败\x20(' + _0x245f49 + _0x2a583b(0x926) + _0x1926e5 + '):', _0x9498ec), _0x51c285[_0x2a583b(0x459)] = null, _0x51c285[_0x2a583b(0x565)] = null; } _0x2e4b8c[_0x2a583b(0x2c8)][_0x2a583b(0x7e4)](_0x51c285), _0x5f38ff(), _0x46a9ae(); } else { if (_0x52ada9[_0x2a583b(0x3cb)] === _0x2a583b(0xbbc)) { const _0x5ed583 = _0x53b18c(_0x52ada9[_0x2a583b(0xa19)])[_0x2a583b(0x43d)](0x0, 0x3); for (let _0x1910a9 = 0x0; _0x1910a9 < _0x5ed583[_0x2a583b(0x6f2)]; _0x1910a9++) { if (_0x1910a9 > 0x0) await new Promise(_0x5f28fd => setTimeout(_0x5f28fd, _0x57b022(0x190))); const _0x441056 = { 'role': _0x2a583b(0x880), 'content': _0x5ed583[_0x1910a9], 'senderId': _0x52ada9[_0x2a583b(0x662)], 'timestamp': Date[_0x2a583b(0x9b4)](), 'isOffline': _0x5dea3f }; _0x2e4b8c[_0x2a583b(0x2c8)][_0x2a583b(0x7e4)](_0x441056), _0x5f38ff(), _0x46a9ae(); } } } } } else { _0x557659(_0x2a583b(0x5cc)); return; } } } async function _0x3712a8(_0x5ad0e2, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x3aa3f8 = _0x3abecc; await new Promise(_0x51d455 => setTimeout(_0x51d455, 0xa)); if (!_0x2e4b8c[_0x3aa3f8(0xa8a)][_0x3aa3f8(0xbb4)] || !_0x2e4b8c['apiSettings'][_0x3aa3f8(0xbf4)] || !_0x2e4b8c[_0x3aa3f8(0xa8a)][_0x3aa3f8(0xab4)]) return _0x3aa3f8(0x7fe) === 'kCmRw' ? (_0x18c07b('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]) : { 'role': _0x3aa3f8(0x5c3), 'content': [{ 'type': _0x3aa3f8(0xbbc), 'text': _0x212a03[_0x3aa3f8(0xa19)] || '\x20' }, { 'type': _0x3aa3f8(0x7dc), 'image_url': { 'url': _0x34d602['image'], 'detail': _0x3aa3f8(0x3a6) } }] }; const _0x125fda = _0x28f748(); if (!_0x125fda || !_0x5ad0e2) return ![]; const _0x410d43 = _0x23edb1(_0x125fda['id']), _0xbcbf1a = _0x2e4b8c[_0x3aa3f8(0x2c8)]['at'](-0x1)?.[_0x3aa3f8(0x253)] === _0x3aa3f8(0x5c3); if (!force && !_0xbcbf1a) return ![]; const _0x4299b4 = _0x2e4b8c[_0x3aa3f8(0x2c8)]['at'](-0x1)?.[_0x3aa3f8(0x1e3)] ?? ![]; if (delayMs) await new Promise(_0x3f6947 => setTimeout(_0x3f6947, delayMs)); _0x4299b4 ? document[_0x3aa3f8(0x392)](_0x3aa3f8(0x62b))[_0x3aa3f8(0x324)] = '（正在构思中...）' : _0x473a59(!![]); let _0x26e782 = ''; const _0x220060 = _0x28f748(); if (_0x220060?.['activeListenSession']?.[_0x3aa3f8(0x620)]) { if (_0x3aa3f8(0x5b0) !== _0x3aa3f8(0xa64)) { const _0x48b3e6 = _0x220060['activeListenSession'], _0xc7d70c = await _0x58cb76(_0x48b3e6[_0x3aa3f8(0x908)]); if (_0xc7d70c && _0xc7d70c[_0x3aa3f8(0xa71)]) { const _0x3c18cb = _0x4edc40(_0xc7d70c['lyrics']); if (_0x3c18cb[_0x3aa3f8(0x6f2)] > 0x0) { if (_0x3aa3f8(0x9c3) !== _0x3aa3f8(0x9c3)) { const _0x47a2d2 = _0x596e56[_0x3aa3f8(0xa4c)][_0x3aa3f8(0x5a1)][0x0]; if (!_0x47a2d2) return; const _0x239ec6 = _0x5ce82a[_0x3aa3f8(0x38c)](_0x47a2d2); _0x3a393f[_0x3aa3f8(0xb56)][_0x3aa3f8(0xb85)] = _0x3aa3f8(0x24b) + _0x239ec6 + '\x27)'; } else { const _0x3c3b67 = _0x2a3ed9[_0x3aa3f8(0xbdb)]; let _0x34fa4b = -0x1; for (let _0x1c4b15 = 0x0; _0x1c4b15 < _0x3c18cb['length']; _0x1c4b15++) { if (_0x3c3b67 >= _0x3c18cb[_0x1c4b15][_0x3aa3f8(0xb5b)]) _0x34fa4b = _0x1c4b15; else break; } const _0x1ab437 = _0x3c18cb[_0x3aa3f8(0x5e9)]((_0x1d26ce, _0x57fd82) => { const _0x27e59b = _0x3aa3f8, _0x32f2aa = _0x57fd82 === _0x34fa4b ? _0x27e59b(0x4fc) : ''; return '' + _0x32f2aa + _0x1d26ce[_0x27e59b(0xbbc)]; })[_0x3aa3f8(0x52b)]('\x0a'); _0x26e782 = (_0x3aa3f8(0xa5c) + _0x48b3e6['artist'] + _0x3aa3f8(0x9f5) + _0x48b3e6['songName'] + '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a' + _0x1ab437 + _0x3aa3f8(0xbf6))[_0x3aa3f8(0x8bb)](); } } } } else _0xff1d21['src'] && (_0x2f6e9c[_0x3aa3f8(0xa40)] ? _0x240c0e[_0x3aa3f8(0x792)]() : _0xbd2c43[_0x3aa3f8(0x24e)]()); } let _0x550e22 = '', _0x484c82 = ''; const _0x13575d = _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x3aa3f8(0x6f2)]; if (_0x13575d > 0x1) { const _0x358718 = _0x2e4b8c['conversationHistory'][_0x13575d - 0x2], _0x53c27b = _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x13575d - 0x1]; if (_0x358718[_0x3aa3f8(0x1e3)] === ![] && _0x53c27b['isOffline'] === !![]) _0x484c82 = _0x3aa3f8(0x8aa) + _0x410d43['name'] + _0x3aa3f8(0x6b3); else _0x358718['isOffline'] === !![] && _0x53c27b[_0x3aa3f8(0x1e3)] === ![] && (_0x484c82 = _0x3aa3f8(0x5ab) + _0x410d43['name'] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); } if (_0x4299b4) { if ('YvdZi' !== _0x3aa3f8(0x65d)) _0xa443bf(_0x270e36['id']), _0x495b83(_0x3aa3f8(0x60f) + _0x57fa50[_0x3aa3f8(0x420)] + _0x3aa3f8(0xb21)), _0x5dbcf5(![]); else { const _0x37b88c = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x550e22 = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x410d43[_0x3aa3f8(0x420)] + _0x3aa3f8(0x917) + _0x37b88c + _0x3aa3f8(0x512) + _0x5ad0e2['name'] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x37b88c + _0x3aa3f8(0xa4d) + _0x37b88c + _0x3aa3f8(0x873); } } else _0x3aa3f8(0x5d2); const { omniText: _0x4091de } = _0x42b275(_0x5ad0e2['id'], _0x125fda['id']), _0x2573cd = _0x4bf621(), _0x5cb829 = _0x44a6ac(_0x5ad0e2['id']), _0x28a2fe = _0xcb334d(_0x5ad0e2['id']), _0x5e12cd = await _0x4efa04(_0x5ad0e2['id']), _0xacf3da = typeof _0x5bd072 === _0x3aa3f8(0x41d) ? _0x5bd072[_0x3aa3f8(0x2a8)](_0x3aa3f8(0x77e), _0x5ad0e2[_0x3aa3f8(0x420)])[_0x3aa3f8(0x2a8)](_0x3aa3f8(0x96e), _0x410d43[_0x3aa3f8(0x420)] || '用户') : '', _0x1f5457 = _0x216772['map'](_0x548bbc => _0x548bbc[_0x3aa3f8(0x420)])[_0x3aa3f8(0x52b)](',\x20'); let _0x421544 = ''; if (_0x5ad0e2['linkedWorldBookIds'] && _0x5ad0e2[_0x3aa3f8(0x25d)]['length'] > 0x0) { const _0x62e97c = _0x5ad0e2[_0x3aa3f8(0x25d)]['map'](_0x105340 => _0x2e4b8c[_0x3aa3f8(0x285)][_0x3aa3f8(0x69e)](_0x4b4f76 => _0x4b4f76['id'] === _0x105340))['filter'](Boolean)['map'](_0x1a1d5d => '\x0a\x0a##\x20世界书条目:\x20' + _0x1a1d5d['name'] + '\x0a' + _0x1a1d5d[_0x3aa3f8(0xa19)])['join'](''); if (_0x62e97c) _0x421544 = _0x3aa3f8(0x388) + _0x62e97c; } const _0x11139a = _0x410d43[_0x3aa3f8(0x5cd)] ? _0x3aa3f8(0x39f) + _0x410d43[_0x3aa3f8(0x420)] + _0x3aa3f8(0x721) + _0x410d43['persona'] : ''; let _0x46b22e = ''; const _0x52b415 = new Date(), _0x3fc9a9 = _0x367a29(_0x5ad0e2['id']); _0x46b22e = _0x3aa3f8(0x21e), _0x46b22e += _0x3aa3f8(0x4ed) + _0x52b415[_0x3aa3f8(0x408)](_0x3aa3f8(0x591), { 'dateStyle': _0x3aa3f8(0x567), 'timeStyle': _0x3aa3f8(0x303) }) + '\x0a'; if (_0x3fc9a9) { const _0xb4e5d7 = new Date(_0x3fc9a9[_0x3aa3f8(0x518)]), _0x446910 = _0x593dd0(_0xb4e5d7); _0x46b22e += _0x3aa3f8(0xb87) + _0x446910 + '\x0a'; const _0x271628 = _0x52b415['toDateString'](), _0x510e55 = _0xb4e5d7[_0x3aa3f8(0x97c)](), _0x1ccdae = new Date(); _0x1ccdae['setDate'](_0x52b415['getDate']() - 0x1); const _0x140577 = _0x1ccdae[_0x3aa3f8(0x97c)](); if (_0x271628 === _0x510e55) { const _0x3e3692 = (_0x52b415 - _0xb4e5d7) / (0x3e8 * 0x3c); if (_0x3e3692 < 0x3c) _0x46b22e += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a'; else { if (_0x3aa3f8(0x626) === _0x3aa3f8(0x626)) _0x46b22e += _0x3aa3f8(0x643) + Math[_0x3aa3f8(0x7d1)](_0x3e3692 / 0x3c) + _0x3aa3f8(0x900); else { const _0x1c5e0a = _0x13bf8a[_0x3aa3f8(0x392)](_0x3aa3f8(0x768)); if (!_0x1c5e0a) return; const _0x3495ce = _0x265957[_0x3aa3f8(0x956)](_0x3aa3f8(0x81a)) || '80'; _0x8172ac[_0x3aa3f8(0x7d3)][_0x3aa3f8(0xb56)]['setProperty'](_0x3aa3f8(0x55d), _0x3495ce + '%'), _0x1c5e0a['value'] = _0x3495ce, _0x1c5e0a[_0x3aa3f8(0xabf)](_0x3aa3f8(0x921), () => { const _0x21b206 = _0x3aa3f8, _0x18f5eb = _0x1c5e0a[_0x21b206(0x60e)]; _0x3feafa[_0x21b206(0x7d3)][_0x21b206(0xb56)]['setProperty'](_0x21b206(0x55d), _0x18f5eb + '%'), _0x224535[_0x21b206(0x963)](_0x21b206(0x81a), _0x18f5eb), _0x541d7d(); }); } } } else { if (_0x140577 === _0x510e55) _0x3aa3f8(0x6b9) !== _0x3aa3f8(0x795) ? _0x46b22e += _0x3aa3f8(0x43f) : (!_0x49efbe && (_0x938ec2 = _0x259e09[_0x3aa3f8(0x92e)](_0x3aa3f8(0x63a)), _0x47048b['id'] = _0x3aa3f8(0x260), _0x105c3a['appendChild'](_0x2b0e0d)), _0x55ff27[_0x3aa3f8(0x2c9)] = '<div\x20class=\x22loader-spinner\x22></div><span>' + _0x3878dd + _0x3aa3f8(0x247), _0x53cf1e[_0x3aa3f8(0xb56)][_0x3aa3f8(0x993)] = _0x3aa3f8(0x366)); else { const _0x456b70 = Math[_0x3aa3f8(0x7d1)]((_0x52b415 - _0xb4e5d7) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x46b22e += _0x3aa3f8(0xa6b) + _0x456b70 + _0x3aa3f8(0x5a9); } } } else _0x46b22e += _0x3aa3f8(0x5ac); const _0x5a4f17 = ('\x0a' + _0x550e22 + _0x3aa3f8(0x95a) + _0x5ad0e2[_0x3aa3f8(0x420)] + _0x3aa3f8(0x8c3) + _0x5ad0e2[_0x3aa3f8(0x420)] + ':\x22\x20或\x22[' + _0x5ad0e2[_0x3aa3f8(0x420)] + _0x3aa3f8(0x7f2) + _0x1f5457 + ']。严禁使用列表之外的任何表情名。\x0a' + _0xacf3da + '\x0a')[_0x3aa3f8(0x8bb)](), _0x53ef52 = [{ 'role': _0x3aa3f8(0x2d3), 'content': _0x5a4f17 }], _0x29ff07 = (_0x3aa3f8(0x2a3) + (_0x5ad0e2[_0x3aa3f8(0x5cd)] || _0x3aa3f8(0x6fe)) + '\x0a' + _0x11139a + '\x20\x0a' + _0x4091de + '\x0a' + _0x2573cd + '\x0a' + _0x5cb829 + '\x0a' + _0x28a2fe + _0x3aa3f8(0x56b) + _0x5e12cd + '\x20\x0a#\x20当前情景\x0a' + _0x26e782 + '\x0a' + _0x46b22e + '\x0a' + _0x421544 + '\x0a')[_0x3aa3f8(0x8bb)](); _0x29ff07[_0x3aa3f8(0x8d5)](/#.*|\s/g, '') && ('CzCRU' === 'zyhjm' ? _0xa6deae[_0x3aa3f8(0x26e)] = _0x516722(() => { const _0x42c2b3 = _0x3aa3f8; if (_0x230212['type'] === _0x42c2b3(0x6f3)) _0x78508[_0x42c2b3(0x93e)](); _0x3026f5(_0x22de91(_0x453d35, 0xa), _0x49fbe3); }, 0x320) : (_0x53ef52[_0x3aa3f8(0x7e4)]({ 'role': _0x3aa3f8(0x5c3), 'content': _0x29ff07 }), _0x53ef52[_0x3aa3f8(0x7e4)]({ 'role': 'assistant', 'content': _0x3aa3f8(0xc0d) }))); const _0x585c26 = _0x2e4b8c[_0x3aa3f8(0xab3)]?.['perChatContextLines'] ?? 0x64, _0x35f056 = _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x3aa3f8(0x43d)](-_0x585c26); for (const _0x18a59a of _0x35f056) { if (_0x3aa3f8(0x9a9) === _0x3aa3f8(0xa93)) _0x33505d = _0x4b3a7a[_0x3aa3f8(0x527)][0x0][_0x3aa3f8(0xa0d)], _0x4ee2f8 = _0xe96630[_0x3aa3f8(0x527)][0x0][_0x3aa3f8(0xb67)], _0x556bdb = !![], _0x5c0b57 = ''; else { const _0x10bc39 = _0x18a59a[_0x3aa3f8(0x253)] === 'ai' || _0x18a59a[_0x3aa3f8(0x253)] === _0x3aa3f8(0x880) ? _0x3aa3f8(0x880) : _0x3aa3f8(0x5c3); let _0x1de62e = { 'role': _0x10bc39, 'content': _0x18a59a[_0x3aa3f8(0xa19)] }, _0xd4d325 = !!_0x18a59a['content']; if (_0x18a59a['displayUrl'] && _0x18a59a['content'][_0x3aa3f8(0x21d)]('表情')) { const _0x40a273 = _0x18a59a[_0x3aa3f8(0xa19)]['match'](/：(.*?)]$/); _0x1de62e[_0x3aa3f8(0xa19)] = '[sticker:' + (_0x40a273 ? _0x40a273[0x1] : _0x3aa3f8(0x6c2)) + ']', _0x53ef52['push'](_0x1de62e); } else { let _0xd23cab = null; if (_0x18a59a[_0x3aa3f8(0x3f7)]) _0xd23cab = _0x18a59a[_0x3aa3f8(0x3f7)]; else { if (_0x18a59a[_0x3aa3f8(0xb1a)]) { if (_0x3aa3f8(0x382) === _0x3aa3f8(0xb9e)) { const _0x1c5258 = _0xbfd0e0['getElementById'](_0x3aa3f8(0xa0e)), _0x48d7d3 = _0x351c8e['getElementById'](_0x3aa3f8(0x34f)); _0x1c5258[_0x3aa3f8(0x2c9)] = _0x3aa3f8(0x297), _0x48d7d3[_0x3aa3f8(0x2c9)] = ''; const _0x3be980 = _0x1c5258[_0x3aa3f8(0x50b)](_0x3aa3f8(0x4bc)), _0x5b4bd6 = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x3aa3f8(0x950), 'area': _0x3aa3f8(0x7fc) }, { 'id': 'abyss', 'name': _0x3aa3f8(0x78b), 'svg': _0x3aa3f8(0x547), 'area': _0x3aa3f8(0x7fc) }, { 'id': _0x3aa3f8(0x7e3), 'name': '相册', 'svg': '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'area': _0x3aa3f8(0x7fc) }, { 'id': _0x3aa3f8(0x6f6), 'name': '总结', 'svg': _0x3aa3f8(0x5ec), 'area': _0x3aa3f8(0x7fc) }, { 'id': _0x3aa3f8(0x651), 'name': _0x3aa3f8(0x955), 'svg': _0x3aa3f8(0xa2e), 'area': _0x3aa3f8(0x96f) }, { 'id': _0x3aa3f8(0x35e), 'name': '外卖', 'svg': _0x3aa3f8(0xa0a), 'area': _0x3aa3f8(0x96f) }, { 'id': _0x3aa3f8(0x2dc), 'name': '购物', 'svg': _0x3aa3f8(0x4c8), 'area': 'main' }, { 'id': 'footprints', 'name': '足迹', 'svg': _0x3aa3f8(0xb1c), 'area': _0x3aa3f8(0x96f) }]; _0x5b4bd6[_0x3aa3f8(0xb5e)](_0x5866e8 => { const _0x4863a3 = _0x3aa3f8, _0x172d82 = _0x14ce2d[_0x4863a3(0x92e)](_0x4863a3(0x63a)); _0x172d82[_0x4863a3(0x894)] = _0x4863a3(0x9ab), _0x172d82[_0x4863a3(0x2c9)] = _0x4863a3(0x570) + _0x5866e8[_0x4863a3(0x4b5)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x5866e8[_0x4863a3(0x420)] + _0x4863a3(0x5cf), _0x172d82[_0x4863a3(0xabf)](_0x4863a3(0x4b9), () => _0x2c6bc0(_0x5866e8['id'], _0x5866e8[_0x4863a3(0x420)])), _0x5866e8['area'] === _0x4863a3(0x7fc) ? _0x48d7d3[_0x4863a3(0x594)](_0x172d82) : _0x3be980[_0x4863a3(0x594)](_0x172d82); }); } else try { if (_0x3aa3f8(0x22d) === _0x3aa3f8(0x82c)) _0x20f90c = _0x3aa3f8(0x7b3) + _0x58ea14 + _0x3aa3f8(0x49e); else { const _0x2ed8bf = await _0x1de353(_0x18a59a[_0x3aa3f8(0xb1a)]); _0x2ed8bf && (_0xd23cab = await _0x5a357c(_0x2ed8bf)); } } catch (_0x4bbb81) { if (_0x3aa3f8(0x7de) === _0x3aa3f8(0x586)) { const _0x1a4f7d = _0x3b48c0[0x0][_0x3aa3f8(0x8bb)](), _0x4de5d6 = _0x6f2a84[0x1][_0x3aa3f8(0x8bb)]()[_0x3aa3f8(0x8d5)](/^"|"$/g, ''); _0x255c4a[_0x1a4f7d] = _0x4de5d6; } else console['error'](_0x3aa3f8(0x7cd), _0x4bbb81); } } } _0xd23cab && (_0x1de62e[_0x3aa3f8(0x3f7)] = _0xd23cab, _0xd4d325 = !![]), _0xd4d325 && _0x53ef52['push'](_0x1de62e); } } } try { if ('XfPvC' === 'AJkcF') { _0x682909(_0x3aa3f8(0x8be)); return; } else { const _0x46ae02 = await _0x45b854(_0x53ef52); if (!_0x46ae02) return ![]; if (_0x4299b4) { if ('VUCdx' !== _0x3aa3f8(0x482)) try { let _0x24c15b = _0x46ae02['trim'](); const _0x8d639c = _0x24c15b[_0x3aa3f8(0xaab)](/(\[[\s\S]*\])/); _0x8d639c && (_0x24c15b = _0x8d639c[0x1]); const _0x331e62 = JSON[_0x3aa3f8(0x30c)](_0x24c15b); if (Array[_0x3aa3f8(0x74a)](_0x331e62)) { if (_0x3aa3f8(0x755) === _0x3aa3f8(0x965)) _0x552f26 = _0x3cf6e1[_0x3aa3f8(0x742)](_0x16d139 => _0x16d139 && typeof _0x16d139 === 'object' && typeof _0x16d139[_0x3aa3f8(0x253)] === _0x3aa3f8(0x41d) && typeof _0x16d139['content'] !== 'undefined'); else { _0x2e4b8c[_0x3aa3f8(0x540)] = [..._0x331e62], _0x2e4b8c[_0x3aa3f8(0xaa8)][_0x5ad0e2['id']] = [..._0x331e62], _0x3be1c9(); const _0x208f3e = _0x331e62['map'](_0x588293 => _0x588293['speaker'] === 'narrator' ? _0x588293[_0x3aa3f8(0x7f8)] : _0x588293['speaker'] + ':\x20' + _0x588293[_0x3aa3f8(0x7f8)])[_0x3aa3f8(0x52b)]('\x0a\x0a'); _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x3aa3f8(0x7e4)]({ 'role': _0x3aa3f8(0x880), 'senderId': _0x5ad0e2['id'], 'timestamp': Date[_0x3aa3f8(0x9b4)](), 'isOffline': !![], 'content': _0x208f3e }); } } } catch (_0x526403) { console['error'](_0x3aa3f8(0x840), _0x526403, _0x3aa3f8(0x72c), _0x46ae02), _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x3aa3f8(0x7e4)]({ 'role': 'assistant', 'senderId': _0x5ad0e2['id'], 'timestamp': Date[_0x3aa3f8(0x9b4)](), 'isOffline': !![], 'content': _0x3aa3f8(0x705) + _0x46ae02 + ']' }); } else { const _0x189b5a = _0x3cadc0(_0x4afc3c[_0x3aa3f8(0x662)]); return _0x189b5a?.[_0x3aa3f8(0x420)] || 'Unknown'; } } else { const _0x4c6c23 = _0x3206f4(_0x46ae02), _0x7d7cf6 = _0x4c6c23[_0x3aa3f8(0x5e9)](_0x127845 => { const _0x391d3d = _0x3aa3f8, _0x15bb45 = _0x127845[_0x391d3d(0x8bb)](), _0x2c2c53 = _0x15bb45[_0x391d3d(0xaab)](/^\[sticker:(.*?)\]$/), _0x37db23 = _0x15bb45[_0x391d3d(0xaab)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x145809 = _0x15bb45[_0x391d3d(0xaab)](/^\[music:(.*?)\|(.*?)\]$/), _0x33f777 = _0x15bb45[_0x391d3d(0xaab)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x145809) return _0x391d3d(0xbc9) === 'QtgGq' ? { 'type': _0x391d3d(0xc2d), 'songName': _0x145809[0x1][_0x391d3d(0x8bb)](), 'artist': _0x145809[0x2]['trim']() } : _0x2483cb['substring'](_0xc14e69, _0x33cb49 + 0x1); else { if (_0x2c2c53) return { 'type': _0x391d3d(0x4c3), 'name': _0x2c2c53[0x1][_0x391d3d(0x8bb)]() }; else { if (_0x33f777) { if (_0x391d3d(0xaac) !== 'iPnKl') return { 'type': _0x391d3d(0xb03), 'eventType': _0x33f777[0x1][_0x391d3d(0x8bb)](), 'eventDate': _0x33f777[0x2]['trim'](), 'eventContent': _0x33f777[0x3][_0x391d3d(0x8bb)]() }; else _0x1ea53f['push'](_0x5ec5b6); } else { if (_0x37db23) { const _0x7f06b0 = parseFloat(_0x37db23[0x1]), _0x518a77 = _0x37db23[0x2][_0x391d3d(0x8bb)](), _0x24dbec = _0x23edb1(_0x2e4b8c[_0x391d3d(0x7ee)]); let _0x586480 = null; if (_0x518a77 === _0x24dbec[_0x391d3d(0x420)]) _0x586480 = _0x24dbec['id']; else { const _0xd8fc3f = _0x28f748(); if (_0xd8fc3f[_0x391d3d(0x875)] === _0x391d3d(0xacf)) { const _0x58ffc0 = _0x2e4b8c[_0x391d3d(0x404)]['find'](_0x336cf6 => _0xd8fc3f['participantIds'][_0x391d3d(0x21d)](_0x336cf6['id']) && _0x336cf6[_0x391d3d(0x420)] === _0x518a77); if (_0x58ffc0) _0x586480 = _0x58ffc0['id']; } } if (_0x586480) return { 'type': 'transfer', 'amount': _0x7f06b0, 'recipientId': _0x586480, 'senderId': _0x5ad0e2['id'] }; else return { 'type': _0x391d3d(0xbbc), 'content': _0x391d3d(0x6ea) + _0x518a77 + _0x391d3d(0x573) }; } else { if (_0x15bb45) return { 'type': _0x391d3d(0xbbc), 'content': _0x15bb45 }; } } } } return null; })[_0x3aa3f8(0x742)](Boolean), _0x44199e = async _0x55d5ae => { const _0x3c9f75 = _0x3aa3f8, _0x1fd5f5 = { 'role': _0x3c9f75(0x880), 'senderId': _0x5ad0e2['id'], 'timestamp': Date[_0x3c9f75(0x9b4)](), 'isOffline': _0x4299b4 }; if (_0x55d5ae['type'] === _0x3c9f75(0xc2d)) { if (_0x3c9f75(0x8b2) !== _0x3c9f75(0xbc2)) { const { songName: _0x13de7b, artist: _0x78243e } = _0x55d5ae; _0x1fd5f5[_0x3c9f75(0x875)] = _0x3c9f75(0xc2d), _0x1fd5f5[_0x3c9f75(0xa19)] = _0x3c9f75(0x925) + _0x13de7b + '\x20-\x20' + _0x78243e + ']'; try { if (_0x3c9f75(0x432) === 'UEnYN') { const _0x4fd499 = await _0x273f55(_0x13de7b, _0x78243e); Object[_0x3c9f75(0x9cb)](_0x1fd5f5, { 'songName': _0x13de7b, 'artist': _0x78243e, 'coverUrl': _0x4fd499[_0x3c9f75(0x883)], 'playableUrl': _0x4fd499[_0x3c9f75(0x6ae)] }); } else _0x1c1f90[_0x3c9f75(0x42c)][_0x3c9f75(0xb26)]('show'), _0x351abc[_0x3c9f75(0x998)] = null, _0x1a1cb0[_0x3c9f75(0x998)] = null, _0x4096f2[_0x3c9f75(0x998)] = null, _0x2b3774[_0x3c9f75(0x6e4)](_0x3c9f75(0x7d9), _0x3fece9), _0x26ce20(_0x39404d); } catch (_0x396189) { Object[_0x3c9f75(0x9cb)](_0x1fd5f5, { 'songName': _0x13de7b, 'artist': _0x78243e, 'coverUrl': null, 'playableUrl': null }); } } else _0x2f3ea1(), _0x22af25(![]), _0x2750d4['isGenerating'] = ![]; } else { if (_0x55d5ae[_0x3c9f75(0x875)] === _0x3c9f75(0x4c3)) { const _0x2b5db3 = _0x216772[_0x3c9f75(0x69e)](_0x37b05b => _0x37b05b['name'] === _0x55d5ae[_0x3c9f75(0x420)]); if (_0x2b5db3) Object[_0x3c9f75(0x9cb)](_0x1fd5f5, { 'content': _0x3c9f75(0xace) + _0x2b5db3[_0x3c9f75(0x420)] + ']', 'displayUrl': _0x2b5db3[_0x3c9f75(0x6ae)] }); else _0x1fd5f5[_0x3c9f75(0xa19)] = _0x3c9f75(0xc04) + _0x55d5ae[_0x3c9f75(0x420)] + ']'; } else { if (_0x55d5ae[_0x3c9f75(0x875)] === _0x3c9f75(0xbea)) { const _0xd1c1c4 = _0x55d5ae[_0x3c9f75(0x4f4)] === _0x23edb1(_0x2e4b8c[_0x3c9f75(0x7ee)])['id'] ? _0x23edb1(_0x2e4b8c[_0x3c9f75(0x7ee)]) : _0x2653c6(_0x55d5ae[_0x3c9f75(0x4f4)]); Object[_0x3c9f75(0x9cb)](_0x1fd5f5, { 'type': 'transfer', 'amount': _0x55d5ae['amount'], 'recipientId': _0x55d5ae[_0x3c9f75(0x4f4)], 'content': '[AI向\x20' + (_0xd1c1c4?.[_0x3c9f75(0x420)] || '未知') + _0x3c9f75(0x4ca) + _0x55d5ae['amount'] + ']' }); } else { if (_0x55d5ae[_0x3c9f75(0x875)] === _0x3c9f75(0xb03)) { if (_0x3c9f75(0x31c) !== _0x3c9f75(0x283)) { const _0x93d916 = _0x23edb1(_0x125fda['id']); if (!_0x93d916 || !_0x93d916['id']) { if (_0x3c9f75(0x379) === 'wttPQ') return console['error']('AI\x20试图创建事件，但找不到有效的用户ID。'), null; else _0x1544b9 = _0x804fbf['createElement'](_0x3c9f75(0x63a)), _0x2140de['className'] = _0x3c9f75(0xb3a), _0x42045f[_0x3c9f75(0x324)] = '对方正在输入...', _0x221e74['appendChild'](_0xd25e3d); } _0x2e4b8c[_0x3c9f75(0x6a6)][_0x3c9f75(0x7e4)]({ 'id': _0x3c9f75(0x5a2) + Date[_0x3c9f75(0x9b4)](), 'date': _0x55d5ae[_0x3c9f75(0x4cc)], 'type': _0x55d5ae[_0x3c9f75(0x93a)], 'content': _0x55d5ae[_0x3c9f75(0x3cd)], 'userId': _0x93d916['id'], 'createdBy': 'ai' }), _0x5a3c71(), _0x4b2288(), _0x1e972b(); const _0x1a7f07 = _0x2653c6(_0x5ad0e2['id']); _0x1a7f07 && _0x55d5ae['eventType'] === _0x3c9f75(0xc27) && _0x18c07b(_0x3c9f75(0x50d) + _0x1a7f07[_0x3c9f75(0x420)] + '\x20添加了新的纪念日：' + _0x55d5ae['eventContent']); return { 'role': _0x3c9f75(0x880), 'senderId': _0x5ad0e2['id'], 'timestamp': Date[_0x3c9f75(0x9b4)](), 'isOffline': _0x4299b4, 'content': null }; return { 'role': _0x3c9f75(0x880), 'senderId': _0x5ad0e2['id'], 'timestamp': Date['now'](), 'isOffline': _0x4299b4, 'content': null }; } else _0x51009f(_0x2f9f8[_0x3c9f75(0x60e)]), _0x286597(); } else { const _0x412c3c = _0x3b6c33(_0x55d5ae['content']); Object[_0x3c9f75(0x9cb)](_0x1fd5f5, { 'content': _0x412c3c[_0x3c9f75(0xa19)], 'quotedMessage': _0x412c3c[_0x3c9f75(0xc33)] }); } } } } return _0x1fd5f5; }, _0x20e8d3 = await Promise[_0x3aa3f8(0x319)](_0x7d7cf6['map'](_0x44199e)); for (const _0xd91168 of _0x20e8d3) { if (_0x3aa3f8(0x9e5) !== _0x3aa3f8(0xa8e)) { if (_0xd91168['content'] || _0xd91168['displayUrl'] || _0xd91168[_0x3aa3f8(0x875)] === _0x3aa3f8(0xc2d)) { if (_0x3aa3f8(0x934) === _0x3aa3f8(0x934)) await new Promise(_0x1b6437 => setTimeout(_0x1b6437, 0x12c + Math[_0x3aa3f8(0xb59)]() * 0x190)), _0x2e4b8c['conversationHistory'][_0x3aa3f8(0x7e4)](_0xd91168), _0x46a9ae(); else { const _0x100880 = _0x2f2a45(_0x14ada2[_0x3aa3f8(0x8f1)]); if (!_0x100880) return; _0x427fdf = !![], _0x48cd5f['style']['display'] = _0x3aa3f8(0x94c); const _0x1db17a = _0x100880[_0x3aa3f8(0x5dd)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0x32dbcf[_0x3aa3f8(0x392)](_0x3aa3f8(0x97f))[_0x3aa3f8(0x60e)] = _0x1db17a['x'], _0x427a47['getElementById'](_0x3aa3f8(0xb8b))[_0x3aa3f8(0x60e)] = _0x1db17a['y'], _0x5ce320[_0x3aa3f8(0x392)]('sprite-slider-scale')[_0x3aa3f8(0x60e)] = _0x1db17a[_0x3aa3f8(0x425)] * 0x64, _0x58b5db = { ..._0x1db17a }, _0x14b9bd['getElementById'](_0x3aa3f8(0x893))[_0x3aa3f8(0xb56)][_0x3aa3f8(0x993)] = _0x3aa3f8(0x3a4), _0x330a63['getElementById'](_0x3aa3f8(0x355))['style'][_0x3aa3f8(0x993)] = _0x3aa3f8(0x3a4); } } } else _0x2a806f = _0x2a5a16[_0x3aa3f8(0x30c)](_0xbb1bb0); } } return _0x5f38ff(), _0x46a9ae(), !![]; } } catch (_0x1ae1ff) { if (_0x3aa3f8(0x67a) !== 'DdiWh') { const _0x2ee74c = _0xfc433a['createElement'](_0x3aa3f8(0x63a)); _0x2ee74c[_0x3aa3f8(0x894)] = _0x3aa3f8(0xa92), _0x2ee74c[_0x3aa3f8(0x2c9)] = _0x3aa3f8(0x8e1) + _0x2e5ade['id'] + _0x3aa3f8(0x3c8) + _0x5b6668['id'] + _0x3aa3f8(0x59c) + (_0xcce657[_0x3aa3f8(0x58d)] || _0x2458dd) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x31f89f['id'] + _0x3aa3f8(0xabb) + _0x11de67[_0x3aa3f8(0x420)] + _0x3aa3f8(0x41a), _0x53332f[_0x3aa3f8(0x594)](_0x2ee74c); } else { if (_0x1ae1ff[_0x3aa3f8(0x420)] !== _0x3aa3f8(0xba1)) { console[_0x3aa3f8(0x5b1)](_0x3aa3f8(0x9ad), _0x1ae1ff); const _0x49f862 = { 'role': _0x3aa3f8(0x880), 'content': _0x3aa3f8(0x449) + _0x1ae1ff[_0x3aa3f8(0x542)], 'senderId': _0x5ad0e2['id'], 'isOffline': _0x4299b4 }; _0x2e4b8c[_0x3aa3f8(0x2c8)][_0x3aa3f8(0x7e4)](_0x49f862), _0x46a9ae(); } return ![]; } } finally { _0x3aa3f8(0x507) === _0x3aa3f8(0x4fe) ? _0x96df6d += '-\x20你在“' + _0x51e39f[_0x3aa3f8(0x5f0)] + _0x3aa3f8(0x814) + _0x84a624['item_name'] + '”。\x0a' : _0x473a59(![]); } } async function _0x4dccf2() { const _0x837a6a = _0x3abecc; if (_0x837a6a(0x45e) === _0x837a6a(0x45e)) { const _0x325c31 = _0x28f748(); if (!_0x325c31 || _0x325c31[_0x837a6a(0x875)] !== 'private') { _0x18c07b(_0x837a6a(0x33c)); return; } if (_0x2e4b8c[_0x837a6a(0x524)]) { _0x18c07b(_0x837a6a(0x2ff)); return; } const _0x44088c = await _0x4b635a('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x44088c) return; _0x5b3ee9(!![], _0x837a6a(0xaa0)), _0x5786e2['value'] = '', _0x25869f[_0x837a6a(0x42c)]['add'](_0x837a6a(0x3a9)), _0x2e4b8c[_0x837a6a(0x524)] = !![]; try { const _0x375d3d = _0x2653c6(_0x325c31[_0x837a6a(0xa2a)][0x0]), _0x1f0833 = _0x23edb1(_0x325c31['id']), _0x6dd0d0 = _0x3efbf7(_0x325c31['id']); if (_0x6dd0d0['length'] === 0x0) { _0x5786e2[_0x837a6a(0x60e)] = _0x837a6a(0x69d); return; } const _0x3b5497 = _0x6dd0d0[_0x837a6a(0x5e9)](_0x93feb5 => { const _0x1a216b = _0x837a6a, _0x39473f = new Date(_0x93feb5[_0x1a216b(0x518)]), _0x52332d = _0x39473f[_0x1a216b(0x780)]() + '-' + String(_0x39473f[_0x1a216b(0x49d)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x39473f['getDate']())[_0x1a216b(0xb98)](0x2, '0'), _0x26a9f4 = String(_0x39473f['getHours']())[_0x1a216b(0xb98)](0x2, '0') + ':' + String(_0x39473f[_0x1a216b(0x618)]())[_0x1a216b(0xb98)](0x2, '0'); let _0x1bf49f = '未知'; if (_0x93feb5[_0x1a216b(0x253)] === _0x1a216b(0x5c3)) { if (_0x1a216b(0x902) === 'odpPx') { const _0x112dc2 = _0x42d6b3['linkedWorldBookIds']?.[_0x1a216b(0x21d)](_0x4bf9ad['id']), _0x12090a = _0x56e419[_0x1a216b(0x92e)](_0x1a216b(0x235)); _0x12090a['innerHTML'] = _0x1a216b(0xb02) + _0x546ccb['id'] + '\x22\x20' + (_0x112dc2 ? 'checked' : '') + '>\x20' + _0x35e733[_0x1a216b(0x420)], _0x1a7deb[_0x1a216b(0x594)](_0x12090a); } else _0x1bf49f = _0x1f0833[_0x1a216b(0x420)]; } else 'fiOJi' === 'eOEDw' ? (_0x1f4685[_0x1a216b(0x93e)](), _0x2799c0()) : _0x1bf49f = _0x375d3d[_0x1a216b(0x420)]; let _0x4e22a7 = _0x93feb5[_0x1a216b(0xa19)]; if (_0x93feb5[_0x1a216b(0x6fd)]) _0x4e22a7 = '[发送了表情]'; if (_0x93feb5[_0x1a216b(0xb1a)]) _0x4e22a7 = _0x1a216b(0xbc5); return '[' + _0x52332d + '\x20' + _0x26a9f4 + _0x1a216b(0x52c) + _0x1bf49f + _0x1a216b(0x4cd) + _0x4e22a7; })[_0x837a6a(0x52b)]('\x0a'), _0x7e23cf = _0x2cda90['replace'](/{charName}/g, _0x375d3d['name'])['replace'](/{userName}/g, _0x1f0833['name']), _0x53aae7 = [{ 'role': _0x837a6a(0x2d3), 'content': _0x7e23cf }, { 'role': _0x837a6a(0x5c3), 'content': _0x3b5497 }], _0xa6f0a7 = await _0x45b854(_0x53aae7); _0x5786e2[_0x837a6a(0x60e)] = _0xa6f0a7 || _0x837a6a(0x558), _0x5786e2['scrollTop'] = 0x0; } catch (_0x164c76) { 'GZEdH' === _0x837a6a(0x980) ? _0xf85f9 = _0x200806(_0x1bd9c7) : (console['error'](_0x837a6a(0x7ce), _0x164c76), _0x5786e2[_0x837a6a(0x60e)] = _0x837a6a(0x475) + _0x164c76[_0x837a6a(0x542)]); } finally { 'vqrti' === _0x837a6a(0x1fa) ? (_0x5b3ee9(![]), _0x2e4b8c[_0x837a6a(0x524)] = ![]) : _0x423223[_0x837a6a(0xabf)](_0x837a6a(0x4b9), () => { const _0x314568 = _0x837a6a, _0x2dcc1d = _0x5659f3(_0x1dd420[_0x314568(0x641)]['page'], 0xa); _0x58166c(_0x2dcc1d); }); } } else { const _0x1004b4 = _0x414371(_0x1964e9['getHours']())[_0x837a6a(0xb98)](0x2, '0'), _0x4755c2 = _0x1f88b2(_0x4aeab8['getMinutes']())[_0x837a6a(0xb98)](0x2, '0'); _0x213376[_0x837a6a(0x324)] = _0x1004b4 + ':' + _0x4755c2; const _0xe28557 = _0x25235c[_0x837a6a(0x49d)]() + 0x1, _0x5eb93d = _0x5e46a3['getDate'](), _0x4943dc = ['星期日', _0x837a6a(0x3c0), _0x837a6a(0x58a), _0x837a6a(0xb18), '星期四', _0x837a6a(0x720), '星期六'][_0x5e60a7[_0x837a6a(0x5d1)]()]; _0x570c42['textContent'] = _0xe28557 + '月' + _0x5eb93d + '日\x20' + _0x4943dc; } } async function _0x3137d6() { const _0x1e6ef8 = _0x3abecc; console['log'](_0x1e6ef8(0x8ab)); if (!_0x2e4b8c['apiSettings'][_0x1e6ef8(0xbb4)] || !_0x2e4b8c[_0x1e6ef8(0xa8a)]['key'] || !_0x2e4b8c[_0x1e6ef8(0xa8a)]['model']) { if (_0x1e6ef8(0xab8) !== 'kjHTv') _0x551c5a[_0x1e6ef8(0x41f)][_0x1e6ef8(0x872)](_0x3c8da1, 0x1), _0x179cd4(), _0x3ace60(); else { _0x18c07b(_0x1e6ef8(0x5cc)); return; } } const _0x5caad2 = _0x2e4b8c['conversationHistory']['at'](-0x1)?.[_0x1e6ef8(0x253)] === _0x1e6ef8(0x5c3); if (!_0x5caad2 || _0x2e4b8c[_0x1e6ef8(0x524)]) return; const _0x468e6a = _0x28f748(); if (!_0x468e6a) return; _0x2e4b8c['isGenerating'] = !![], _0x473a59(!![]); try { if (_0x468e6a[_0x1e6ef8(0x875)] === _0x1e6ef8(0xa4e)) { const _0xba831e = _0x2653c6(_0x468e6a[_0x1e6ef8(0xa2a)][0x0]); console['log'](_0x1e6ef8(0x1f5)); if (_0xba831e) await _0x3712a8(_0xba831e, { 'force': !![] }); } else { const _0x293f2a = await _0x3e1746(); if (_0x293f2a && _0x293f2a[_0x1e6ef8(0x850)]?.[_0x1e6ef8(0x6f2)]) { if (_0x1e6ef8(0x3eb) === _0x1e6ef8(0x3eb)) await _0x2bb35d(_0x293f2a); else { const _0x311118 = _0x1a77e2[_0x1e6ef8(0x956)]('appState'); if (_0x311118) { const _0x11d839 = _0x179ab8[_0x1e6ef8(0x30c)](_0x311118); _0x11d839['accountingLedger'] && (_0x2eb0e0[_0x1e6ef8(0x2c0)] = _0x11d839[_0x1e6ef8(0x2c0)], _0x5f13e9[_0x1e6ef8(0xbf0)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.')); } } } else { console['warn'](_0x1e6ef8(0x2e9)); const _0x852fc7 = _0x468e6a[_0x1e6ef8(0xa2a)]['map'](_0x2653c6)[_0x1e6ef8(0x742)](Boolean); if (!_0x852fc7[_0x1e6ef8(0x6f2)]) return; let _0x2284ab = 0x0; for (const _0x573521 of _0x852fc7) { if (_0x1e6ef8(0x66b) === 'YhzBm') { if (_0x565e18['key'] === 'Escape') _0x3dccc6(null); _0x4c3528[_0x1e6ef8(0xbf4)] === _0x1e6ef8(0x9f8) && (_0x16b5e0[_0x1e6ef8(0x93e)](), _0x5be1ff()); } else _0x3712a8(_0x573521, { 'force': !![], 'delayMs': _0x2284ab }), _0x2284ab += 0x1f4; } } } } catch (_0x357648) { _0x357648['name'] !== _0x1e6ef8(0xba1) && (console[_0x1e6ef8(0x5b1)](_0x1e6ef8(0x2a9), _0x357648), _0x16ed9e({ 'role': _0x1e6ef8(0x880), 'content': _0x1e6ef8(0x449) + _0x357648[_0x1e6ef8(0x542)] }, _0x2e4b8c[_0x1e6ef8(0x2c8)][_0x1e6ef8(0x6f2)] - 0x1)); } finally { _0x2e4b8c['isGenerating'] = ![], _0x473a59(![]); } } function _0x4c802b(_0x2d5f28, _0x2278ba) { const _0x1bbc1e = _0x3abecc; if ('AsqvC' === _0x1bbc1e(0xaa9)) { const _0x540877 = _0x2278ba[_0x1bbc1e(0x92f)](), _0x70ffd4 = _0x2d5f28[_0x1bbc1e(0x92f)](); if (_0x540877['startsWith']('claude')) return _0x1bbc1e(0x8fb); if (_0x70ffd4[_0x1bbc1e(0x21d)](_0x1bbc1e(0x9bd))) return _0x1bbc1e(0x8fb); if (_0x70ffd4[_0x1bbc1e(0x21d)](_0x1bbc1e(0xc15))) return _0x1bbc1e(0x2ce); if (_0x540877[_0x1bbc1e(0x629)](_0x1bbc1e(0x2ce))) return _0x1bbc1e(0x2ce); return _0x1bbc1e(0x845); } else _0x20df8e[_0x1bbc1e(0x5b1)](_0x1bbc1e(0x47a), _0x1f7aa4); } async function _0x45b854(_0xf8b627, _0xa5ed85 = {}) { const _0xdf54e0 = _0x3abecc; if (_0x2e4b8c[_0xdf54e0(0x737)]) { if (_0xdf54e0(0xade) === 'EnFie') { const _0x19ec87 = _0x5afb6f[_0xdf54e0(0x25d)][_0xdf54e0(0x5e9)](_0x1f9cf3 => _0x7ab1cb['worldBooks'][_0xdf54e0(0x69e)](_0x2b509e => _0x2b509e['id'] === _0x1f9cf3))['filter'](_0x1d4727)[_0xdf54e0(0x5e9)](_0x2a59be => _0xdf54e0(0x7ac) + _0x2a59be[_0xdf54e0(0x420)] + '\x0a' + _0x2a59be[_0xdf54e0(0xa19)])[_0xdf54e0(0x52b)](''); if (_0x19ec87) _0x18f24d = _0xdf54e0(0x388) + _0x19ec87; } else _0x2e4b8c[_0xdf54e0(0x737)][_0xdf54e0(0x968)](_0xdf54e0(0x557)); } _0x2e4b8c[_0xdf54e0(0x737)] = new AbortController(); const _0x4cafe7 = _0x2e4b8c[_0xdf54e0(0x737)][_0xdf54e0(0x90f)], { endpoint: _0x247db7, key: _0x3e24a6, model: _0x7175ce } = _0x2e4b8c['apiSettings'], _0x1690ca = !!_0xa5ed85[_0xdf54e0(0xb9f)], _0x399953 = _0x4c802b(_0x247db7, _0x7175ce); console[_0xdf54e0(0xbf0)]('Detected\x20API\x20provider:\x20' + _0x399953); let _0x6c5123 = ''; try { switch (_0x399953) { case 'anthropic': { const _0x5abe7e = _0x416820(_0x3e24a6), _0x1c835c = _0xf8b627[_0xdf54e0(0x69e)](_0x14430a => _0x14430a[_0xdf54e0(0x253)] === 'system')?.['content'] || '', _0x1f3e3f = _0xf8b627[_0xdf54e0(0x742)](_0x59492b => _0x59492b[_0xdf54e0(0x253)] !== 'system'), _0xfcbae1 = { 'model': _0x7175ce, 'system': _0x1c835c, 'messages': _0x1f3e3f[_0xdf54e0(0x5e9)](_0x1baa58 => ({ 'role': _0x1baa58[_0xdf54e0(0x253)], 'content': [{ 'type': 'text', 'text': _0x1baa58['content'] }] })), 'max_tokens': 0x1000 }, _0x2b83df = await fetch(_0x247db7, { 'method': _0xdf54e0(0x60d), 'headers': { 'Content-Type': _0xdf54e0(0xaf3), 'x-api-key': _0x5abe7e, 'anthropic-version': _0xdf54e0(0xb14) }, 'body': JSON[_0xdf54e0(0x2bf)](_0xfcbae1), 'signal': _0x4cafe7 }); if (!_0x2b83df['ok']) { const _0x1e4b7c = await _0x2b83df[_0xdf54e0(0xb9f)]()[_0xdf54e0(0x736)](() => ({})); throw new Error('Claude\x20API\x20错误:\x20' + _0x2b83df[_0xdf54e0(0x86d)] + _0xdf54e0(0x926) + (_0x1e4b7c[_0xdf54e0(0x5b1)]?.[_0xdf54e0(0x542)] || _0x2b83df['statusText'])); } const _0xb80fd9 = await _0x2b83df[_0xdf54e0(0xb9f)](); _0x6c5123 = _0xb80fd9[_0xdf54e0(0xa19)]?.[0x0]?.[_0xdf54e0(0xbbc)] || ''; break; } case _0xdf54e0(0x2ce): { const _0x501c3e = _0x416820(_0x3e24a6), _0x4835a8 = _0x247db7[_0xdf54e0(0x21d)]('generativelace.googleapis.com'), _0x286982 = _0x19ef99 => { const _0x71797 = _0xdf54e0, _0x110168 = []; if (_0x19ef99[_0x71797(0xa19)]) _0x110168[_0x71797(0x7e4)]({ 'text': _0x19ef99[_0x71797(0xa19)] }); if (_0x19ef99['image']) { const _0x102195 = _0x19ef99['image']['split'](',')[0x1], _0x281a4b = _0x19ef99[_0x71797(0x3f7)][_0x71797(0x58c)](_0x19ef99[_0x71797(0x3f7)][_0x71797(0x78f)](':') + 0x1, _0x19ef99[_0x71797(0x3f7)][_0x71797(0x78f)](';')) || _0x71797(0x897); _0x110168[_0x71797(0x7e4)]({ 'inline_data': { 'mime_type': _0x281a4b, 'data': _0x102195 } }); } return _0x110168; }, _0x87b01 = _0xf8b627[_0xdf54e0(0x5e9)](_0x10dbac => ({ 'role': _0x10dbac['role'] === _0xdf54e0(0x880) ? _0xdf54e0(0xab4) : _0x10dbac[_0xdf54e0(0x253)] === _0xdf54e0(0x2d3) ? _0xdf54e0(0x5c3) : _0x10dbac[_0xdf54e0(0x253)], 'parts': _0x286982(_0x10dbac) }))[_0xdf54e0(0x742)](_0x2d8490 => _0x2d8490[_0xdf54e0(0x770)][_0xdf54e0(0x6f2)] > 0x0), _0x441626 = { 'contents': _0x87b01 }; _0x1690ca && _0x4835a8 && (_0xdf54e0(0x9a7) === _0xdf54e0(0x9a7) ? _0x441626[_0xdf54e0(0x9bc)] = { 'response_mime_type': _0xdf54e0(0xaf3) } : _0x401ad4[_0xdf54e0(0x324)] = _0x39adfe[_0xdf54e0(0xbd4)](_0x3b816b)[_0xdf54e0(0x5e9)](_0x42ee84 => _0x42ee84[_0xdf54e0(0x96c)][_0xdf54e0(0x324)][_0xdf54e0(0x8bb)]())['join']('、')); const _0x50d4d6 = _0x247db7 + _0xdf54e0(0x532) + _0x7175ce + _0xdf54e0(0x679) + _0x501c3e + _0xdf54e0(0x669), _0x37e32d = await fetch(_0x50d4d6, { 'method': 'POST', 'headers': { 'Content-Type': _0xdf54e0(0xaf3) }, 'body': JSON[_0xdf54e0(0x2bf)](_0x441626), 'signal': _0x4cafe7 }); if (!_0x37e32d['ok']) throw new Error(_0xdf54e0(0x210) + _0x37e32d[_0xdf54e0(0x86d)]); const _0x5a0b89 = _0x37e32d[_0xdf54e0(0x3de)][_0xdf54e0(0x296)](), _0x5c8792 = new TextDecoder(); let _0x1f74d3 = ''; while (!![]) { if (_0x4cafe7[_0xdf54e0(0x2b5)]) { console[_0xdf54e0(0xbf0)]('Gemini\x20stream\x20reading\x20aborted.'), _0x5a0b89[_0xdf54e0(0x4e2)](); break; } const { done: _0x56624d, value: _0x35471b } = await _0x5a0b89[_0xdf54e0(0x3ae)](); if (_0x56624d) break; const _0x202a4e = _0x5c8792[_0xdf54e0(0xa49)](_0x35471b, { 'stream': !![] }), _0x474d14 = _0x202a4e[_0xdf54e0(0x686)]('\x0a')[_0xdf54e0(0x742)](_0x5c72c0 => _0x5c72c0['trim']()['startsWith'](_0xdf54e0(0x203))); for (const _0x871a3 of _0x474d14) { const _0x690ce3 = _0x871a3['replace'](_0xdf54e0(0x84c), ''); if (_0x690ce3 === _0xdf54e0(0x4e0)) break; try { _0x1f74d3 += JSON[_0xdf54e0(0x30c)](_0x690ce3)[_0xdf54e0(0x36f)][0x0][_0xdf54e0(0xa19)][_0xdf54e0(0x770)][0x0][_0xdf54e0(0xbbc)]; } catch { } } } _0x6c5123 = _0x1f74d3; break; } case _0xdf54e0(0x845): default: { const _0x34386a = _0x416820(_0x3e24a6), _0x3f055d = _0x247db7[_0xdf54e0(0x8d5)](/\/+$/, '') + _0xdf54e0(0x9dc), _0x45fb47 = _0xf8b627['map'](_0x251e1c => { const _0x1a470a = _0xdf54e0; if (_0x1a470a(0x5d6) === 'epeYN') _0x513894(_0x1a470a(0x50d) + _0x559308['name'] + _0x1a470a(0xa99) + _0x28fd3d[_0x1a470a(0x3cd)]); else { if (_0x251e1c[_0x1a470a(0x253)] === _0x1a470a(0x5c3) && _0x251e1c[_0x1a470a(0x3f7)]) return { 'role': 'user', 'content': [{ 'type': _0x1a470a(0xbbc), 'text': _0x251e1c[_0x1a470a(0xa19)] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x251e1c[_0x1a470a(0x3f7)], 'detail': _0x1a470a(0x3a6) } }] }; return { 'role': _0x251e1c[_0x1a470a(0x253)], 'content': _0x251e1c['content'] }; } })[_0xdf54e0(0x742)](_0x575a74 => _0x575a74[_0xdf54e0(0xa19)]), _0x55250f = { 'model': _0x7175ce, 'messages': _0x45fb47, 'max_tokens': 0x1000, ..._0x1690ca ? { 'response_format': { 'type': _0xdf54e0(0x74f) } } : {} }, _0x215e71 = await fetch(_0x3f055d, { 'method': _0xdf54e0(0x60d), 'headers': { 'Content-Type': _0xdf54e0(0xaf3), 'Authorization': _0xdf54e0(0x962) + _0x34386a }, 'body': JSON['stringify'](_0x55250f), 'signal': _0x4cafe7 }); if (!_0x215e71['ok']) { if ('YJAub' === _0xdf54e0(0x75f)) { if (_0x3d1688) _0xa9b270[_0xdf54e0(0x4b9)](); } else { const _0x7cedf6 = await _0x215e71[_0xdf54e0(0xb9f)]()[_0xdf54e0(0x736)](() => ({})); throw new Error(_0xdf54e0(0x41b) + _0x215e71[_0xdf54e0(0x86d)] + _0xdf54e0(0x926) + (_0x7cedf6[_0xdf54e0(0x5b1)]?.[_0xdf54e0(0x542)] || _0x215e71['statusText'])); } } const _0x1ef627 = await _0x215e71[_0xdf54e0(0xb9f)](); _0x6c5123 = _0x1ef627['choices']?.[0x0]?.[_0xdf54e0(0x542)]?.[_0xdf54e0(0xa19)] || ''; break; } }return _0x6c5123; } catch (_0x3d428b) { if (_0x3d428b[_0xdf54e0(0x420)] === _0xdf54e0(0xba1)) { if (_0xdf54e0(0x990) === _0xdf54e0(0x82e)) { let _0x4af58c = ''; if (_0x1e363e[_0xdf54e0(0x508)] && _0x22065e[_0xdf54e0(0x508)][_0xdf54e0(0x6f2)] > 0x0) { const _0x3ddff6 = _0x1afcfb[_0xdf54e0(0x508)][_0xdf54e0(0x5e9)](_0xad2e5f => _0x4de394(_0xad2e5f)?.[_0xdf54e0(0x420)] || '未知')[_0xdf54e0(0x52b)]('、'), _0x2a49a6 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>'; _0x4af58c = _0xdf54e0(0x922) + _0x2a49a6 + '\x20' + _0x3ddff6 + _0xdf54e0(0x892); } let _0xbddb4b = ''; if (_0x218553[_0xdf54e0(0xb3b)] && _0x47ae50[_0xdf54e0(0xb3b)][_0xdf54e0(0x6f2)] > 0x0) { const _0x317670 = _0x552424['comments'][_0xdf54e0(0x5e9)](_0x18afc3 => { const _0x5219ba = _0xdf54e0, _0x3ef9e2 = _0x5b90dd(_0x18afc3[_0x5219ba(0x825)])?.[_0x5219ba(0x420)] || '未知'; return _0x5219ba(0xa5f) + _0x3ef9e2 + _0x5219ba(0xbb3) + _0x18afc3[_0x5219ba(0xa19)] + _0x5219ba(0x892); })[_0xdf54e0(0x52b)](''); _0xbddb4b = '<div\x20class=\x22post-comments-container\x22>' + _0x317670 + '</div>'; } _0x58fc5c = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x4af58c + _0xdf54e0(0x562) + _0xbddb4b + _0xdf54e0(0x680); } else return console['log'](_0xdf54e0(0xa37)), ''; } throw _0x3d428b; } finally { _0x2e4b8c[_0xdf54e0(0x737)] && _0x2e4b8c[_0xdf54e0(0x737)][_0xdf54e0(0x90f)] === _0x4cafe7 && (_0x2e4b8c[_0xdf54e0(0x737)] = null); } } async function _0x1fc19a() { const _0x379cc0 = _0x3abecc, _0x38ee25 = _0xa77016[_0x379cc0(0x6ba)][_0x379cc0(0x42c)][_0x379cc0(0xb2d)]('active'), _0x15885b = _0x38ee25 ? _0x35b68b['value'] : null; let _0x3a51be = null, _0xa973b5 = ''; if (_0x38ee25 && _0x15885b) { if (_0x379cc0(0x429) === _0x379cc0(0x91d)) _0x428db0[_0x379cc0(0x3f7)] = _0x35e99e; else { _0x3a51be = _0x2e4b8c[_0x379cc0(0x442)][_0x379cc0(0x69e)](_0x4e1332 => _0x4e1332[_0x379cc0(0x875)] === _0x379cc0(0xa4e) && _0x4e1332[_0x379cc0(0xa2a)][_0x379cc0(0x21d)](_0x15885b)); const _0x1b4af7 = _0x2653c6(_0x15885b); _0xa973b5 = _0x1b4af7 ? _0x1b4af7['name'] : _0x379cc0(0x8b3); } } else { if (_0x2e4b8c[_0x379cc0(0x7ee)]) { _0x3a51be = _0x28f748(); const _0x1028d = document[_0x379cc0(0x392)]('char-name-header')[_0x379cc0(0x324)]; _0xa973b5 = _0x1028d || _0x379cc0(0xbef); } } if (!_0x3a51be) { _0x18c07b(_0x379cc0(0x914)); return; } const _0x25e175 = await _0x4b635a(_0x379cc0(0x82a) + _0xa973b5 + _0x379cc0(0x385)); if (!_0x25e175) return; _0x3a51be['id'] === _0x2e4b8c[_0x379cc0(0x7ee)] && (_0x43f2bd(), _0x2e4b8c['conversationHistory'] = [], _0x2d9cac()); try { localStorage[_0x379cc0(0x4a7)](_0x379cc0(0x76e) + _0x3a51be['id']); } catch (_0x30e909) { if (_0x379cc0(0xbe6) !== 'xKpXm') { _0x8cb0de[_0x379cc0(0x442)] = _0x585cd4['chats'][_0x379cc0(0x742)](_0x107283 => _0x107283['id'] !== _0x3dfdf1); try { _0x55469c[_0x379cc0(0x4a7)]('chatHistory_' + _0x1e4401); } catch (_0x1f5cbd) { _0x5905cb[_0x379cc0(0x5b1)](_0x379cc0(0x38e) + _0x1653bf, _0x1f5cbd); } _0x62839[_0x379cc0(0x7ee)] === _0x5b41da && (_0x32fbf1['activeChatId'] = _0x2034bb['chats'][0x0]?.['id'] || null, _0x39d22a(_0x2bace9['activeChatId'])), _0x4946f6(); } else console['error'](_0x379cc0(0x38e) + _0x3a51be['id'], _0x30e909); } _0x18c07b('\x22' + _0xa973b5 + '\x22\x20的聊天记录已清空。'); } const _0x4b64fb = document['getElementById']('export-all-data-button'), _0x5170b1 = document[_0x3abecc(0x392)](_0x3abecc(0x7c9)), _0x4e3281 = document[_0x3abecc(0x392)]('import-data-input'); _0x4b64fb[_0x3abecc(0xabf)](_0x3abecc(0x4b9), async () => { const _0x1b17bb = _0x3abecc; if (_0x1b17bb(0x4f5) === _0x1b17bb(0x4f5)) { _0x5b3ee9(!![], _0x1b17bb(0x851)); const _0x2f83dc = []; try { if (_0x1b17bb(0xb1b) !== _0x1b17bb(0x208)) { const _0x49a577 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x343956 = 0x0; _0x343956 < localStorage[_0x1b17bb(0x6f2)]; _0x343956++) { const _0x151b73 = localStorage['key'](_0x343956); if (_0x151b73) _0x49a577[_0x1b17bb(0xafd)][_0x151b73] = localStorage[_0x1b17bb(0x956)](_0x151b73); } const _0x3c05dc = await _0x1282ec, _0x39893f = _0x3c05dc[_0x1b17bb(0x281)](_0x523203, _0x1b17bb(0xae5)), _0x50c6e1 = _0x39893f[_0x1b17bb(0x4c5)](_0x523203), _0x219754 = await new Promise((_0x477053, _0xa508c4) => { const _0x4e49a7 = _0x1b17bb; if (_0x4e49a7(0x2bc) !== 'efDuy') _0x23c5b8(_0x424d51['id']), _0x59945d('群聊已解散。'), _0x268049(_0x4e49a7(0x4fb)), _0x3ec82a(![]); else { const _0x5117f8 = _0x50c6e1['getAll'](); _0x5117f8[_0x4e49a7(0x817)] = () => _0x477053(_0x5117f8['result']), _0x5117f8[_0x4e49a7(0x677)] = () => _0xa508c4(_0x5117f8[_0x4e49a7(0x5b1)]); } }); for (const _0x165612 of _0x219754) { if (_0x165612['blob'] instanceof Blob) try { _0x1b17bb(0x976) !== 'Bsqsj' ? _0x32af7a(_0x360e68['id']) : _0x49a577[_0x1b17bb(0x655)][_0x165612['id']] = await _0x5a357c(_0x165612[_0x1b17bb(0x713)]); } catch (_0xd04634) { _0x2f83dc[_0x1b17bb(0x7e4)](_0x165612['id']); } } const _0x56464f = _0x3c05dc[_0x1b17bb(0x281)](_0xa7f348, 'readonly'), _0x44515a = _0x56464f['objectStore'](_0xa7f348), _0x218d50 = await new Promise((_0xee6da3, _0x4e5b27) => { const _0x4b5af4 = _0x1b17bb; if (_0x4b5af4(0x2d5) === 'JxYxa') { const _0x256e6e = _0x44515a[_0x4b5af4(0x9a4)](); _0x256e6e[_0x4b5af4(0x817)] = () => _0xee6da3(_0x256e6e[_0x4b5af4(0x3cf)]), _0x256e6e[_0x4b5af4(0x677)] = () => _0x4e5b27(_0x256e6e['error']); } else { _0x4ee0e7(_0x4b5af4(0xa2f)); return; } }); for (const _0x2f7739 of _0x218d50) { if (_0x1b17bb(0x944) !== _0x1b17bb(0x944)) { _0x1a2994(_0x1b17bb(0xbbe)); return; } else { const _0x1bc18d = { ..._0x2f7739 }; if (_0x2f7739['audio'] instanceof Blob) { if (_0x1b17bb(0x3b2) !== 'JDFiC') _0x1bc18d[_0x1b17bb(0x6d9)] = await _0x5a357c(_0x2f7739['audio']); else { const _0x149696 = _0x24e5ab[_0x1b17bb(0x281)](_0x232a14, _0x1b17bb(0xae0)), _0x31b63f = _0x149696[_0x1b17bb(0x4c5)](_0x191947), _0x525810 = _0x31b63f[_0x1b17bb(0x701)](_0x444164); _0x525810[_0x1b17bb(0x817)] = () => _0x3837d8(_0x525810[_0x1b17bb(0x3cf)]), _0x525810[_0x1b17bb(0x677)] = () => _0x4acf27(_0x525810[_0x1b17bb(0x5b1)]); } } _0x2f7739[_0x1b17bb(0x883)] instanceof Blob && (_0x1b17bb(0x279) === 'pBHzb' ? _0x1bc18d[_0x1b17bb(0x883)] = await _0x5a357c(_0x2f7739[_0x1b17bb(0x883)]) : (_0x9fbf0f[_0x1b17bb(0x5b1)](_0x1b17bb(0x249), _0x358f72), _0x1fe305(_0x1b17bb(0x25a) + _0xab8312[_0x1b17bb(0x542)]))), _0x49a577[_0x1b17bb(0x2d9)]['push'](_0x1bc18d); } } const _0x27926a = new Blob([JSON[_0x1b17bb(0x2bf)](_0x49a577, null, 0x2)], { 'type': _0x1b17bb(0xaf3) }), _0x3ea72c = URL[_0x1b17bb(0x38c)](_0x27926a), _0x58ad80 = document[_0x1b17bb(0x92e)]('a'), _0x39e0af = new Date(), _0x4884c4 = _0x39e0af[_0x1b17bb(0x780)]() + '-' + String(_0x39e0af['getMonth']() + 0x1)[_0x1b17bb(0xb98)](0x2, '0') + '-' + String(_0x39e0af['getDate']())[_0x1b17bb(0xb98)](0x2, '0'); _0x58ad80[_0x1b17bb(0x664)] = _0x3ea72c, _0x58ad80[_0x1b17bb(0x604)] = _0x1b17bb(0x678) + _0x4884c4 + '.json', document[_0x1b17bb(0x3de)][_0x1b17bb(0x594)](_0x58ad80), _0x58ad80[_0x1b17bb(0x4b9)](), document['body']['removeChild'](_0x58ad80), URL[_0x1b17bb(0x298)](_0x3ea72c), _0x5b3ee9(![]), _0x2f83dc[_0x1b17bb(0x6f2)] > 0x0 ? _0x18c07b('导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a' + _0x2f83dc[_0x1b17bb(0x52b)]('\x0a')) : _0x1b17bb(0x310) !== _0x1b17bb(0x3e3) ? _0x18c07b('包含所有图片和音乐的全量数据已成功导出！') : (_0x35ed1c[_0x1b17bb(0x392)](_0x1b17bb(0x358))[_0x1b17bb(0x60e)] = '', _0x12cd14[_0x1b17bb(0x392)](_0x1b17bb(0x5aa))[_0x1b17bb(0x324)] = _0x1b17bb(0x630), _0x5ecd3f[_0x1b17bb(0x392)]('world-book-edit-name')['value'] = '', _0x2737ce[_0x1b17bb(0x392)]('world-book-edit-content')[_0x1b17bb(0x60e)] = ''); } else _0x4721a8(); } catch (_0x5a8647) { _0x5b3ee9(![]), console[_0x1b17bb(0x5b1)]('全量导出失败:', _0x5a8647), _0x18c07b(_0x1b17bb(0xb6c) + _0x5a8647[_0x1b17bb(0x542)]); } } else { if (_0x720da6) _0x2ae029(_0x581259); if (_0x480bd9[_0x1b17bb(0x9cf)]) return; _0x385dac(() => { const _0x142d5d = _0x1b17bb; _0x1e2312 && _0x5c0acb(_0x49b4f0['id'], _0x45ec8c[_0x142d5d(0x5e9)](_0x17f494 => _0x17f494['id'])); }, 0x32); } }), _0x5170b1[_0x3abecc(0xabf)]('click', () => { const _0x25e7ce = _0x3abecc; if (_0x25e7ce(0x5fd) === _0x25e7ce(0x5fd)) _0x4e3281[_0x25e7ce(0x4b9)](); else { _0x53ff84[_0x25e7ce(0x836)](_0x25e7ce(0x9c2) + _0x17c8f1['id'] + _0x25e7ce(0xa86), _0xf624ee['message']); try { _0x163e49 = _0x4d973c(_0x11d2d0); if (!_0x2e4000) throw new _0x43e791(_0x25e7ce(0x491)); _0x2ba8ca[_0x25e7ce(0xbf0)](_0x25e7ce(0x734) + _0x1de913['id'] + '\x20的旧格式数据翻译。'); } catch (_0x1666c8) { throw _0x1ae96d; } } }), _0x275223[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x39cb3c), _0x4e3281[_0x3abecc(0xabf)]('change', _0x155202 => { const _0x33ff24 = _0x3abecc, _0x54ed5d = _0x155202[_0x33ff24(0xa4c)][_0x33ff24(0x5a1)][0x0]; if (!_0x54ed5d) return; _0x4b635a(_0x33ff24(0x574))['then'](_0x23f37e => { const _0x1b4a0d = _0x33ff24; if (!_0x23f37e) { if (_0x1b4a0d(0x841) !== _0x1b4a0d(0x841)) try { const _0x2ce5f1 = _0x17b5dc[_0x1b4a0d(0x38c)](_0x431e61), _0x22b59d = _0x1b4a0d(0x5b3), _0x312e90 = _0x1b4a0d(0x1e8) + _0x22b59d + '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27' + _0x2ce5f1 + _0x1b4a0d(0x70c); _0x5b049d[_0x1b4a0d(0x2c9)] = _0x312e90, _0x458c37['documentElement'][_0x1b4a0d(0xb56)]['setProperty'](_0x1b4a0d(0x7bf), '\x27' + _0x22b59d + '\x27'), _0x205e57['textContent'] = _0x1b4a0d(0x39b); } catch (_0x2ab09a) { _0x1a472f[_0x1b4a0d(0x5b1)]('字体应用失败:', _0x2ab09a), _0xb2b4ba(_0x1b4a0d(0x2a2)); } else { _0x4e3281[_0x1b4a0d(0x60e)] = ''; return; } } _0x5b3ee9(!![], '正在解析备份文件...'); const _0x11ce33 = new FileReader(); _0x11ce33[_0x1b4a0d(0x8df)] = async _0x82088b => { const _0x361c3a = _0x1b4a0d; try { const _0x575542 = JSON[_0x361c3a(0x30c)](_0x82088b[_0x361c3a(0xa4c)]['result']); if (!_0x575542[_0x361c3a(0xafd)] || !_0x575542[_0x361c3a(0x655)]) throw new Error(_0x361c3a(0x7b6)); _0x5b3ee9(!![], _0x361c3a(0xa7f)); const _0x5681e1 = await Promise['all'](Object[_0x361c3a(0xabd)](_0x575542[_0x361c3a(0x655)])[_0x361c3a(0x5e9)](async _0x5b5ba9 => { const _0x2595df = _0x361c3a; if (_0x2595df(0xa79) !== 'yKNFs') { const _0x1f64bf = _0x575542[_0x2595df(0x655)][_0x5b5ba9]; if (typeof _0x1f64bf === _0x2595df(0x41d) && _0x1f64bf[_0x2595df(0x629)]('data:')) { const _0x4af5e8 = await _0x5db80c(_0x1f64bf); return { 'id': _0x5b5ba9, 'blob': _0x4af5e8 }; } return null; } else _0x264490[_0x2595df(0x285)] = _0x36a396[_0x2595df(0x25d)]['map'](_0x577a4c => _0x4f65e2['worldBooks']['find'](_0x3b209a => _0x3b209a['id'] === _0x577a4c))[_0x2595df(0x742)](_0x5719af)[_0x2595df(0x5e9)](_0x1d376c => ({ 'name': _0x1d376c[_0x2595df(0x420)], 'content': _0x1d376c['content'] })); }))[_0x361c3a(0x54a)](_0x42f647 => _0x42f647['filter'](Boolean)), _0x5961a9 = []; if (_0x575542[_0x361c3a(0x2d9)]) { _0x5b3ee9(!![], _0x361c3a(0x7f3)); const _0x131d99 = _0x575542['indexedDBMusicData'][_0x361c3a(0x5e9)](async _0x9004ab => { const _0x4de524 = _0x361c3a, _0x64be64 = { ..._0x9004ab }; if (_0x9004ab[_0x4de524(0x6d9)]) _0x64be64[_0x4de524(0x6d9)] = await _0x5db80c(_0x9004ab[_0x4de524(0x6d9)]); if (_0x9004ab[_0x4de524(0x883)]) _0x64be64[_0x4de524(0x883)] = await _0x5db80c(_0x9004ab[_0x4de524(0x883)]); return _0x64be64; }); _0x5961a9[_0x361c3a(0x7e4)](...await Promise[_0x361c3a(0x319)](_0x131d99)); } _0x5b3ee9(!![], _0x361c3a(0x8b1)), localStorage[_0x361c3a(0x529)](); for (const _0x552962 in _0x575542['localStorageData']) { 'SlTCB' === 'SlTCB' ? localStorage[_0x361c3a(0x963)](_0x552962, _0x575542['localStorageData'][_0x552962]) : _0x13081b[_0x361c3a(0x594)](_0x1d239b); } _0x5b3ee9(!![], '正在写入新数据...'); const _0x3f29d4 = await _0x1282ec, _0xeae256 = _0x3f29d4['transaction']([_0x523203, _0xa7f348, _0x6be7aa], _0x361c3a(0xae0)), _0x4a0a48 = _0xeae256[_0x361c3a(0x4c5)](_0x523203), _0x3f59a4 = _0xeae256[_0x361c3a(0x4c5)](_0xa7f348), _0x195650 = _0xeae256[_0x361c3a(0x4c5)](_0x6be7aa); _0x4a0a48[_0x361c3a(0x529)](), _0x3f59a4[_0x361c3a(0x529)](), _0x195650['clear'](), _0x5681e1['forEach'](_0x1457f5 => _0x4a0a48[_0x361c3a(0x701)](_0x1457f5)), _0x5961a9[_0x361c3a(0xb5e)](_0x5e1463 => _0x3f59a4['put'](_0x5e1463)), await new Promise((_0x5e749a, _0x44f243) => { const _0x257174 = _0x361c3a; _0xeae256[_0x257174(0x587)] = _0x5e749a, _0xeae256['onerror'] = _0x56d3a9 => _0x44f243(_0x56d3a9[_0x257174(0xa4c)][_0x257174(0x5b1)]); }), _0x5b3ee9(![]), _0x18c07b(_0x361c3a(0x4db)), setTimeout(() => location[_0x361c3a(0xb25)](), 0x640); } catch (_0x122145) { _0x5b3ee9(![]), console[_0x361c3a(0x5b1)]('全量导入失败:', _0x122145), _0x18c07b(_0x361c3a(0x77b) + _0x122145[_0x361c3a(0x542)]); } finally { _0x361c3a(0x879) !== 'LumST' ? _0x907589[_0x361c3a(0xb56)][_0x361c3a(0x993)] = _0x361c3a(0x3a4) : _0x4e3281['value'] = ''; } }, _0x11ce33['readAsText'](_0x54ed5d); }); }); function _0x110a87() { const _0x50d3dd = _0x3abecc; if (_0x50d3dd(0x20a) === _0x50d3dd(0x20a)) _0x20451a[_0x50d3dd(0x60e)] = _0x2e4b8c['apiSettings'][_0x50d3dd(0xbb4)] || '', _0x133cfb[_0x50d3dd(0x60e)] = _0x2e4b8c[_0x50d3dd(0xa8a)][_0x50d3dd(0xbf4)] || '', _0x316f32[_0x50d3dd(0x60e)] = _0x2e4b8c['apiSettings'][_0x50d3dd(0xab4)] || '', _0x2482a8[_0x50d3dd(0x60e)] = String(_0x2e4b8c[_0x50d3dd(0xab3)]?.[_0x50d3dd(0x563)] ?? 0x64), document[_0x50d3dd(0x392)](_0x50d3dd(0x342))[_0x50d3dd(0x60e)] = _0x2e4b8c[_0x50d3dd(0xa8a)][_0x50d3dd(0x25f)] || _0x50d3dd(0x845); else { const _0x1ea342 = _0x41f7b4['stringify'](_0x4b82e2['log'] || [])[_0x50d3dd(0x8d5)](/'/g, _0x50d3dd(0xb9d))[_0x50d3dd(0x8d5)](/"/g, _0x50d3dd(0x797)), _0x5517cd = _0x51678a['contact_name'] || _0x50d3dd(0x68e); return _0x50d3dd(0x8cd) + (_0x2dc1de < _0x118ff3[_0x50d3dd(0x6f2)] - 0x1 ? _0x50d3dd(0x526) : '') + _0x50d3dd(0x439) + _0x1ea342 + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x5517cd + _0x50d3dd(0x7e6) + _0x352123 + '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>' + _0x5517cd['charAt'](0x0) + _0x50d3dd(0x88c) + _0x5517cd + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>' + (_0x159ce2[_0x50d3dd(0x642)] || '') + _0x50d3dd(0x492); } } function _0x39ec71() { const _0x48c425 = _0x3abecc; _0x2e4b8c[_0x48c425(0xa8a)]['endpoint'] = _0x20451a[_0x48c425(0x60e)][_0x48c425(0x8bb)](), _0x2e4b8c[_0x48c425(0xa8a)]['key'] = _0x133cfb[_0x48c425(0x60e)][_0x48c425(0x8bb)](), _0x2e4b8c[_0x48c425(0xa8a)]['model'] = _0x316f32[_0x48c425(0x60e)][_0x48c425(0x8bb)](), _0x2e4b8c[_0x48c425(0xa8a)][_0x48c425(0x25f)] = document[_0x48c425(0x392)](_0x48c425(0x342))['value']; const _0x2920c5 = parseInt(_0x2482a8[_0x48c425(0x60e)], 0xa); _0x2e4b8c[_0x48c425(0xab3)][_0x48c425(0x563)] = Number[_0x48c425(0x3fc)](_0x2920c5) && _0x2920c5 > 0x0 ? _0x2920c5 : 0x64, _0x5a3c71(), _0x18c07b(_0x48c425(0x7e0)); } function _0x15b126() { const _0x23341d = _0x3abecc; _0x2a0067[_0x23341d(0x60e)] = _0x2e4b8c[_0x23341d(0x312)][_0x23341d(0x420)] || '', _0x2b744[_0x23341d(0x84e)] = _0x2e4b8c[_0x23341d(0x312)][_0x23341d(0x58d)] || _0x3efbf6, _0x50126d[_0x23341d(0x60e)] = _0x2e4b8c[_0x23341d(0x312)][_0x23341d(0x5cd)] || ''; } async function _0x11f229(_0x41bc7c = null) { const _0x2de232 = _0x3abecc; _0x2bd982('characterEdit', _0xcd188e); const _0x534294 = document[_0x2de232(0x392)](_0x2de232(0x1fe)), _0x49d2e0 = document[_0x2de232(0x392)]('user-avatar-frame-url-in-chat'), _0x55fd04 = document['querySelector']('#char-edit-avatar-preview\x20+\x20.avatar-frame'); if (_0x41bc7c) { if (_0x2de232(0x614) === 'fRXny') { const _0x24ddd0 = _0x2e4b8c[_0x2de232(0x404)][_0x2de232(0x69e)](_0x53f05f => _0x53f05f['id'] === _0x41bc7c); _0x534294[_0x2de232(0x60e)] = _0x24ddd0[_0x2de232(0xaf2)] || '', _0x49d2e0[_0x2de232(0x60e)] = _0x24ddd0['userAvatarFrameUrl'] || ''; if (_0x55fd04) _0x55fd04[_0x2de232(0xb56)][_0x2de232(0xb85)] = _0x24ddd0[_0x2de232(0xaf2)] ? 'url(\x27' + _0x24ddd0[_0x2de232(0xaf2)] + '\x27)' : ''; } else { const _0x59cd94 = _0x367627['chats'][_0x2de232(0x69e)](_0x876634 => _0x876634['activeListenSession'] && _0x876634['activeListenSession'][_0x2de232(0x620)]); _0x59cd94 && (_0x59cd94[_0x2de232(0x535)] = null, _0x296ccd(), _0x31a3a4(_0x2de232(0x8b5)), _0x354185(), _0x21fbe7['classList'][_0x2de232(0xb26)](_0x2de232(0x3a9)), _0x4feea1(() => _0x5acdf8['style'][_0x2de232(0x993)] = _0x2de232(0x3a4), 0x12c)); } } else { _0x534294[_0x2de232(0x60e)] = '', _0x49d2e0['value'] = ''; if (_0x55fd04) _0x55fd04[_0x2de232(0xb56)][_0x2de232(0xb85)] = ''; } _0x534294[_0x2de232(0xabf)](_0x2de232(0x921), () => { const _0x1f6753 = _0x2de232; if (_0x55fd04) _0x55fd04[_0x1f6753(0xb56)]['backgroundImage'] = _0x534294[_0x1f6753(0x60e)] ? _0x1f6753(0x24b) + _0x534294[_0x1f6753(0x60e)] + '\x27)' : ''; }); const _0x1bde59 = document[_0x2de232(0x392)](_0x2de232(0x64e)); _0x1bde59['innerHTML'] = '', _0x2e4b8c[_0x2de232(0x285)][_0x2de232(0xb5e)](_0x516f0a => { const _0x548371 = _0x2de232; if (_0x548371(0x783) !== _0x548371(0x783)) { const _0x5a2bb3 = _0x19ba52[_0x548371(0x392)](_0x548371(0x251)); if (!_0x5a2bb3) return; _0x2bfe69['preferences']['forceWhiteClock'] ? (_0x5a2bb3['style'][_0x548371(0xa96)] = '#FFFFFF', _0x5a2bb3['style'][_0x548371(0x649)] = _0x548371(0x43c)) : (_0x5a2bb3[_0x548371(0xb56)][_0x548371(0xa96)] = _0x548371(0x50c), _0x5a2bb3['style']['textShadow'] = _0x548371(0x3a4)); } else { const _0x177ccd = document[_0x548371(0x92e)]('label'); _0x177ccd[_0x548371(0x2c9)] = _0x548371(0xb02) + _0x516f0a['id'] + '\x22>\x20' + _0x516f0a['name'], _0x1bde59[_0x548371(0x594)](_0x177ccd); } }), _0x4613dc(_0x2de232(0x30a)), _0x3ef78d[_0x2de232(0x84e)] = _0x2be033, _0x343afb[_0x2de232(0x60e)] = '', _0x3194bf[_0x2de232(0xb56)][_0x2de232(0xb85)] = '', _0x12e3f3['value'] = '', _0x68c6a9['style'][_0x2de232(0xb85)] = '', _0x43a895[_0x2de232(0x60e)] = ''; const _0x2844f3 = [_0x2de232(0x83c), _0x2de232(0x985), 'angry', 'sad', 'shy']; _0x2844f3[_0x2de232(0xb5e)](_0x3dc643 => { const _0x491631 = _0x2de232; document[_0x491631(0x392)](_0x491631(0x28f) + _0x3dc643 + '-preview')[_0x491631(0xb56)][_0x491631(0xb85)] = '', document[_0x491631(0x392)]('char-edit-sprite-' + _0x3dc643 + _0x491631(0x34b))[_0x491631(0x60e)] = ''; }); if (_0x41bc7c) { const _0x252349 = _0x2e4b8c[_0x2de232(0x404)][_0x2de232(0x69e)](_0xcb1bb3 => _0xcb1bb3['id'] === _0x41bc7c); if (!_0x252349) return; _0x35b68b[_0x2de232(0x60e)] = _0x252349['id'], _0x2f76e2[_0x2de232(0x324)] = '编辑角色', _0x437154[_0x2de232(0x60e)] = _0x252349[_0x2de232(0x420)], _0x5886c1[_0x2de232(0x60e)] = _0x252349[_0x2de232(0x2c2)], _0x299fd0[_0x2de232(0x60e)] = _0x252349[_0x2de232(0x5cd)], document[_0x2de232(0x392)](_0x2de232(0x5f3))['value'] = _0x252349[_0x2de232(0xafb)] || ''; const _0x33d527 = _0x2e4b8c[_0x2de232(0x442)][_0x2de232(0x69e)](_0x49dd79 => _0x49dd79[_0x2de232(0x875)] === _0x2de232(0xa4e) && _0x49dd79[_0x2de232(0xa2a)][_0x2de232(0x21d)](_0x41bc7c)); document[_0x2de232(0x392)](_0x2de232(0x30a))[_0x2de232(0x60e)] = _0x33d527?.['boundUserProfileId'] || _0x2e4b8c[_0x2de232(0x789)]; try { if ('VmAPs' !== 'rizlz') { const _0x1ce22a = await _0x1de353(_0x2de232(0x29a) + _0x252349['id']), _0x449c2b = await _0x1de353(_0x2de232(0x36a) + _0x252349['id']), _0x30aeaf = await _0x1de353(_0x2de232(0x555) + _0x252349['id']); _0x3ef78d[_0x2de232(0x84e)] = _0x1ce22a ? URL[_0x2de232(0x38c)](_0x1ce22a) : _0x252349[_0x2de232(0x58d)] || _0x2be033; if (_0x449c2b) _0x3194bf['style']['backgroundImage'] = _0x2de232(0x24b) + URL[_0x2de232(0x38c)](_0x449c2b) + '\x27)'; if (_0x30aeaf) _0x68c6a9[_0x2de232(0xb56)]['backgroundImage'] = 'url(\x27' + URL[_0x2de232(0x38c)](_0x30aeaf) + '\x27)'; for (const _0x455ea4 of _0x2844f3) { if (_0x2de232(0x674) === _0x2de232(0x674)) { const _0x514790 = await _0x1de353(_0x2de232(0x3e2) + _0x455ea4 + '_' + _0x252349['id']); _0x514790 && (document[_0x2de232(0x392)](_0x2de232(0x28f) + _0x455ea4 + '-preview')['style'][_0x2de232(0xb85)] = 'url(\x27' + URL[_0x2de232(0x38c)](_0x514790) + '\x27)'); } else _0xcf84e[_0x2de232(0x93e)](), _0x1f6849(); } } else { _0x2bad3d[_0x2de232(0x2c8)] = [], _0x5d0baa(); return; } } catch (_0x94b58b) { console[_0x2de232(0x5b1)]('加载角色\x20' + _0x252349['id'] + _0x2de232(0x781), _0x94b58b), _0x3ef78d[_0x2de232(0x84e)] = _0x252349['avatar'] || _0x2be033; } _0x252349[_0x2de232(0x25d)] && _0x1bde59[_0x2de232(0x9b8)](_0x2de232(0x49f))[_0x2de232(0xb5e)](_0x22f4df => { const _0x2be8b4 = _0x2de232; if (_0x252349[_0x2be8b4(0x25d)][_0x2be8b4(0x21d)](_0x22f4df[_0x2be8b4(0x60e)])) _0x22f4df['checked'] = !![]; }), _0x1374bd(); } else _0x35b68b['value'] = '', _0x2f76e2['textContent'] = _0x2de232(0x6ff), _0x437154[_0x2de232(0x60e)] = _0x2de232(0x9e0) + (_0x2e4b8c[_0x2de232(0x404)][_0x2de232(0x6f2)] + 0x1), _0x5886c1['value'] = '', _0x299fd0['value'] = _0x2de232(0x7a8), document[_0x2de232(0x392)]('char-edit-css')[_0x2de232(0x60e)] = '', _0x1374bd(); const _0xd2a45e = document[_0x2de232(0x392)]('char-edit-css'); let _0x4f88a8 = document[_0x2de232(0x392)](_0x2de232(0x72b)); !_0x4f88a8 && (_0x4f88a8 = document[_0x2de232(0x92e)](_0x2de232(0xb56)), _0x4f88a8['id'] = _0x2de232(0x72b), document['head'][_0x2de232(0x594)](_0x4f88a8)); const _0x53dcee = () => { const _0x25815f = _0x2de232, _0x3794c8 = _0xd2a45e[_0x25815f(0x60e)]; let _0x2c31fc = _0x3794c8[_0x25815f(0x8d5)](/\.bubble\.sent/g, _0x25815f(0x505))['replace'](/\.bubble\.received/g, '#bubble-preview-ai'); _0x4f88a8['innerHTML'] = _0x2c31fc; }; _0xd2a45e[_0x2de232(0x6e4)]('input', _0x53dcee), _0xd2a45e[_0x2de232(0xabf)](_0x2de232(0x921), _0x53dcee), _0x53dcee(); } async function _0x2abdc2() { const _0x2cdbc3 = _0x3abecc; if (_0x2cdbc3(0x99a) === _0x2cdbc3(0xc0c)) _0x42a3f9[_0x2cdbc3(0x42c)][_0x2cdbc3(0x6ec)](_0x2cdbc3(0x799)), _0x5db31a[_0x2cdbc3(0x42c)][_0x2cdbc3(0x6ec)](_0x2cdbc3(0x44e)), _0x2cf60b['classList'][_0x2cdbc3(0x6ec)](_0x2cdbc3(0x931)), _0xfc1d20(() => { const _0x336b45 = _0x2cdbc3; _0x33d2ae[_0x336b45(0x42c)][_0x336b45(0xb26)]('is-visible', 'is-exiting-right'), _0xa5e5a8[_0x336b45(0x42c)][_0x336b45(0xb26)]('is-entering-from-left'), _0x26095b[_0x336b45(0x1ff)] = _0x20c5fa, _0x5314ec(), _0x57bacc[_0x336b45(0x624)] = ![]; }, 0x2bc); else { const _0x4bb3ae = _0x35b68b[_0x2cdbc3(0x60e)]; if (!_0x4bb3ae) { if ('DRGjo' !== _0x2cdbc3(0xb52)) { _0x18c07b(_0x2cdbc3(0x8be)); return; } else { const _0x346afc = _0x3d0e04['sender'] === 'character', _0x2b4795 = _0x346afc ? _0x424c74 ? _0x5e9a4d[0x0] : '?' : _0x5ef8f3 ? _0xf2b3e1[0x0] : '?'; _0x4e2b29 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x346afc ? _0x2cdbc3(0x5c3) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x346afc ? _0x2cdbc3(0x5a6) + _0x2b4795 + _0x2cdbc3(0x892) : '') + _0x2cdbc3(0x503) + (_0x346afc ? _0x2cdbc3(0x5c3) : 'ai') + _0x2cdbc3(0xbd2) + _0x5eda55['content'] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x346afc ? _0x2cdbc3(0x5a6) + _0x2b4795 + _0x2cdbc3(0x892) : '') + _0x2cdbc3(0x692); } } const _0xb8fe31 = _0x2653c6(_0x4bb3ae); if (!_0xb8fe31) return; _0x5b3ee9(!![], '正在打包“' + _0xb8fe31[_0x2cdbc3(0x420)] + _0x2cdbc3(0x90b)); try { const _0x4e10a6 = { 'type': _0x2cdbc3(0xbff), 'version': 0x1, 'name': _0xb8fe31['name'], 'remark': _0xb8fe31[_0x2cdbc3(0x2c2)], 'persona': _0xb8fe31['persona'], 'bubbleCss': _0xb8fe31[_0x2cdbc3(0xafb)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x5e2956 = await _0x1de353(_0x2cdbc3(0x29a) + _0xb8fe31['id']); if (_0x5e2956) _0x4e10a6[_0x2cdbc3(0x58d)] = await _0x5a357c(_0x5e2956); const _0x20abeb = [_0x2cdbc3(0x83c), _0x2cdbc3(0x985), 'angry', 'sad', 'shy']; for (const _0x1b4051 of _0x20abeb) { const _0x244dc9 = await _0x1de353(_0x2cdbc3(0x3e2) + _0x1b4051 + '_' + _0xb8fe31['id']); _0x244dc9 && (_0x4e10a6['sprites'][_0x1b4051] = await _0x5a357c(_0x244dc9)); } _0xb8fe31[_0x2cdbc3(0x25d)] && _0xb8fe31[_0x2cdbc3(0x25d)]['length'] > 0x0 && (_0x2cdbc3(0x1eb) === _0x2cdbc3(0x8a3) ? _0x170e60 = _0x220594[_0x2cdbc3(0x726)](..._0x16978f['posts']['map'](_0x215a6e => _0x215a6e[_0x2cdbc3(0x518)])) : _0x4e10a6[_0x2cdbc3(0x285)] = _0xb8fe31[_0x2cdbc3(0x25d)][_0x2cdbc3(0x5e9)](_0x8d59a3 => _0x2e4b8c['worldBooks'][_0x2cdbc3(0x69e)](_0x42cfd6 => _0x42cfd6['id'] === _0x8d59a3))[_0x2cdbc3(0x742)](Boolean)[_0x2cdbc3(0x5e9)](_0x1c4530 => ({ 'name': _0x1c4530[_0x2cdbc3(0x420)], 'content': _0x1c4530['content'] }))); const _0x5516d5 = new Blob([JSON[_0x2cdbc3(0x2bf)](_0x4e10a6, null, 0x2)], { 'type': _0x2cdbc3(0xaf3) }), _0x499437 = URL[_0x2cdbc3(0x38c)](_0x5516d5), _0x286f12 = document[_0x2cdbc3(0x92e)]('a'); _0x286f12[_0x2cdbc3(0x664)] = _0x499437, _0x286f12['download'] = _0xb8fe31[_0x2cdbc3(0x420)] + '_NoirCard.json', document[_0x2cdbc3(0x3de)][_0x2cdbc3(0x594)](_0x286f12), _0x286f12[_0x2cdbc3(0x4b9)](), document['body'][_0x2cdbc3(0xa9d)](_0x286f12), URL[_0x2cdbc3(0x298)](_0x499437); } catch (_0x30a0a7) { if (_0x2cdbc3(0x390) === 'zRqCx') console[_0x2cdbc3(0x5b1)](_0x2cdbc3(0x441), _0x30a0a7), _0x18c07b(_0x2cdbc3(0xa7b) + _0x30a0a7[_0x2cdbc3(0x542)]); else return { 'type': _0x2cdbc3(0x4c3), 'name': _0x514238[0x1][_0x2cdbc3(0x8bb)]() }; } finally { _0x5b3ee9(![]); } } } async function _0x4b518a(_0x169afd) { const _0x383606 = _0x3abecc, _0x3ee283 = _0x169afd['target']['files'][0x0]; if (!_0x3ee283) return; _0x5b3ee9(!![], _0x383606(0x928)); const _0x7d80f = new FileReader(); _0x7d80f[_0x383606(0x8df)] = async _0x508a3f => { const _0x1189a0 = _0x383606; try { if (_0x1189a0(0x2cd) !== 'raxJl') _0x11e081(_0x179077, _0x15beaa, !![]); else { const _0x5ef067 = JSON[_0x1189a0(0x30c)](_0x508a3f[_0x1189a0(0xa4c)][_0x1189a0(0x3cf)]); if (_0x5ef067[_0x1189a0(0x875)] !== _0x1189a0(0xbff)) throw new Error(_0x1189a0(0x506)); const _0x14c76b = []; if (_0x5ef067[_0x1189a0(0x285)] && _0x5ef067['worldBooks'][_0x1189a0(0x6f2)] > 0x0) { if (_0x1189a0(0x2ed) === _0x1189a0(0x2ed)) for (const _0x1247ee of _0x5ef067[_0x1189a0(0x285)]) { let _0x3c018f = _0x2e4b8c[_0x1189a0(0x285)][_0x1189a0(0x69e)](_0x374ca8 => _0x374ca8[_0x1189a0(0x420)] === _0x1247ee[_0x1189a0(0x420)]); if (_0x3c018f) _0x14c76b['push'](_0x3c018f['id']); else { if (_0x1189a0(0x63f) !== _0x1189a0(0x63f)) _0x25f0c9(_0x1189a0(0x839) + _0x5742a0[_0x1189a0(0x542)]); else { const _0x49a6d3 = { 'id': _0x1189a0(0xb06) + Date[_0x1189a0(0x9b4)]() + '_' + Math[_0x1189a0(0xb59)](), 'name': _0x1247ee[_0x1189a0(0x420)], 'content': _0x1247ee[_0x1189a0(0xa19)] }; _0x2e4b8c['worldBooks'][_0x1189a0(0x7e4)](_0x49a6d3), _0x14c76b[_0x1189a0(0x7e4)](_0x49a6d3['id']); } } } else _0x34aac4[_0x1189a0(0x9bc)] = { 'response_mime_type': 'application/json' }; } const _0x11e9f4 = _0x1189a0(0x7a2) + Date[_0x1189a0(0x9b4)](); let _0x2cffef = null; if (_0x5ef067[_0x1189a0(0x58d)]) { const _0xd892b5 = await _0x5db80c(_0x5ef067[_0x1189a0(0x58d)]); await _0x3b613b(_0x1189a0(0x29a) + _0x11e9f4, _0xd892b5), _0x2cffef = await _0x5a357c(_0xd892b5); } if (_0x5ef067['sprites']) for (const _0x3d3549 in _0x5ef067['sprites']) { const _0x51d2d8 = _0x5ef067[_0x1189a0(0x472)][_0x3d3549]; if (_0x51d2d8) { if (_0x1189a0(0x413) === _0x1189a0(0x413)) { const _0x30ad68 = await _0x5db80c(_0x51d2d8); await _0x3b613b('char_sprite_' + _0x3d3549 + '_' + _0x11e9f4, _0x30ad68); } else _0x5cf74e(!![]); } } const _0x5cc372 = { 'id': _0x11e9f4, 'name': _0x5ef067[_0x1189a0(0x420)], 'remark': _0x5ef067[_0x1189a0(0x2c2)] || '', 'persona': _0x5ef067[_0x1189a0(0x5cd)], 'avatar': _0x2cffef, 'linkedWorldBookIds': _0x14c76b, 'bubbleCss': _0x5ef067[_0x1189a0(0xafb)] || '' }; _0x2e4b8c[_0x1189a0(0x404)][_0x1189a0(0x7e4)](_0x5cc372); const _0x2f523c = { 'id': 'chat_' + _0x11e9f4, 'type': _0x1189a0(0xa4e), 'participantIds': [_0x11e9f4], 'boundUserProfileId': _0x2e4b8c[_0x1189a0(0x789)] }; _0x2e4b8c['chats']['push'](_0x2f523c), _0x5a3c71(), await _0x4adb3c(), _0x18c07b('“' + _0x5cc372[_0x1189a0(0x420)] + _0x1189a0(0x218)); } } catch (_0x360c50) { _0x1189a0(0x4b2) === 'BLGuS' ? (console[_0x1189a0(0x5b1)](_0x1189a0(0x53f), _0x360c50), _0x18c07b(_0x1189a0(0x63e) + _0x360c50[_0x1189a0(0x542)])) : (_0x561889['isGenerating'] = ![], _0x49684b(![])); } finally { _0x5b3ee9(![]), _0x169afd[_0x1189a0(0xa4c)][_0x1189a0(0x60e)] = ''; } }, _0x7d80f['readAsText'](_0x3ee283); } async function _0x4f74cb() { const _0x44f157 = _0x3abecc; if (_0x44f157(0x8a5) !== _0x44f157(0x262)) { const _0x5e6a00 = _0x35b68b[_0x44f157(0x60e)], _0x5492dd = document[_0x44f157(0x392)](_0x44f157(0x30a))[_0x44f157(0x60e)], _0x5713e4 = _0x343afb[_0x44f157(0x5a1)][0x0], _0x42c1a0 = _0x12e3f3[_0x44f157(0x5a1)][0x0], _0x25313c = _0x43a895[_0x44f157(0x5a1)][0x0], _0x29f190 = document[_0x44f157(0x9b8)]('#world-book-checkboxes-container\x20input:checked'), _0x5e866a = Array['from'](_0x29f190)[_0x44f157(0x5e9)](_0x3e4b47 => _0x3e4b47[_0x44f157(0x60e)]), _0x40c2f0 = { 'name': _0x437154['value'][_0x44f157(0x8bb)](), 'remark': _0x5886c1[_0x44f157(0x60e)]['trim'](), 'persona': _0x299fd0['value'][_0x44f157(0x8bb)](), 'linkedWorldBookIds': _0x5e866a, 'bubbleCss': document[_0x44f157(0x392)](_0x44f157(0x5f3))['value'][_0x44f157(0x8bb)](), 'avatarFrameUrl': document[_0x44f157(0x392)](_0x44f157(0x1fe))['value'][_0x44f157(0x8bb)](), 'userAvatarFrameUrl': document[_0x44f157(0x392)](_0x44f157(0x907))[_0x44f157(0x60e)]['trim']() }; if (!_0x40c2f0['name']) { if (_0x44f157(0x54b) !== _0x44f157(0x39a)) { _0x18c07b(_0x44f157(0x8b4)); return; } else _0x3a1123[_0x44f157(0x324)] = '暂无音乐', _0x4437b7[_0x44f157(0x324)] = _0x44f157(0x826), _0x17b526['classList']['remove'](_0x44f157(0x354)), _0x333308[_0x44f157(0xb56)][_0x44f157(0xa6a)](_0x44f157(0x243), _0x44f157(0x3a4)); } try { const _0x3febc7 = [_0x44f157(0x83c), _0x44f157(0x985), _0x44f157(0x232), 'sad', 'shy']; let _0x13d565 = _0x5e6a00; if (_0x5e6a00) { const _0xc138d5 = _0x2e4b8c[_0x44f157(0x404)][_0x44f157(0x69e)](_0x27f1ed => _0x27f1ed['id'] === _0x5e6a00); _0xc138d5 && Object['assign'](_0xc138d5, _0x40c2f0); } else { const _0xe50912 = _0x44f157(0x7a2) + Date[_0x44f157(0x9b4)](); _0x13d565 = _0xe50912; const _0x48a407 = { 'id': _0xe50912, ..._0x40c2f0 }; _0x48a407['avatar'] = _0x5713e4 ? await _0x518739(_0x5713e4) : _0x2be033, _0x2e4b8c[_0x44f157(0x404)]['push'](_0x48a407); const _0x209ce7 = { 'id': _0x44f157(0x5bc) + _0xe50912, 'type': 'private', 'participantIds': [_0xe50912], 'listenTogetherSession': null }; _0x2e4b8c[_0x44f157(0x442)]['push'](_0x209ce7); } const _0x50da57 = _0x2e4b8c[_0x44f157(0x442)][_0x44f157(0x69e)](_0x24f44b => _0x24f44b[_0x44f157(0x875)] === 'private' && _0x24f44b[_0x44f157(0xa2a)][_0x44f157(0x21d)](_0x13d565)); _0x50da57 && (_0x50da57[_0x44f157(0x22e)] = _0x5492dd); if (_0x5713e4) await _0x3b613b(_0x44f157(0x29a) + _0x13d565, _0x5713e4); if (_0x42c1a0) await _0x3b613b(_0x44f157(0x36a) + _0x13d565, _0x42c1a0); if (_0x25313c) await _0x3b613b(_0x44f157(0x555) + _0x13d565, _0x25313c); for (const _0x544e2d of _0x3febc7) { const _0x3f79a7 = document[_0x44f157(0x392)](_0x44f157(0x28f) + _0x544e2d + _0x44f157(0x34b))['files'][0x0]; if (_0x3f79a7) await _0x3b613b('char_sprite_' + _0x544e2d + '_' + _0x13d565, _0x3f79a7); } _0x5a3c71(), _0x4adb3c(), _0x18c07b('角色已保存！'), _0x2bd982('chat', _0x44f157(0x6ba)); if (!_0x5e6a00) { if (_0x44f157(0x6c5) === 'UDuRI') { const _0x2ff9b7 = 'chat_' + _0x13d565; _0x290d79(_0x2ff9b7), _0x113379(!![]); } else _0x29a5be[_0x44f157(0x963)](_0x1585fe, _0x21c0b4[_0x44f157(0x2bf)](_0xbfe416)); } } catch (_0x154296) { console[_0x44f157(0x5b1)](_0x44f157(0x263), _0x154296), _0x18c07b(_0x44f157(0x1f1) + _0x154296['message']); } } else _0x38ef18(), _0x431cd7 = null; } function _0x40f7f3() { const _0x224cf3 = _0x3abecc; _0x12ee15[_0x224cf3(0x60e)] = '', _0x1dd84c[_0x224cf3(0x2c9)] = ''; if (_0x2e4b8c[_0x224cf3(0x404)]['length'] < 0x2) { if (_0x224cf3(0x3a3) !== _0x224cf3(0x81c)) { _0x18c07b(_0x224cf3(0xa2f)); return; } else _0x1c0296[_0x224cf3(0x9bb)]['splice'](_0x5662c1, 0x1), _0x497f6a(), _0x5139d1(), _0x108537('【' + _0x484069[_0x224cf3(0x420)] + _0x224cf3(0x386)); } _0x2e4b8c[_0x224cf3(0x404)][_0x224cf3(0xb5e)](_0xc3875e => { const _0x3c0916 = _0x224cf3; if (_0x3c0916(0xc2b) !== _0x3c0916(0xc2b)) _0x25c4ab(_0x6ab86a['id']), _0x8a1e3d(!![]); else { const _0x4f6147 = document[_0x3c0916(0x92e)]('li'); _0x4f6147['className'] = _0x3c0916(0xa92), _0x4f6147[_0x3c0916(0x2c9)] = _0x3c0916(0x31a) + _0xc3875e['id'] + '\x22\x20data-id=\x22' + _0xc3875e['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0xc3875e[_0x3c0916(0x58d)] || _0x2be033) + _0x3c0916(0x561) + _0xc3875e['id'] + _0x3c0916(0xabb) + _0xc3875e[_0x3c0916(0x420)] + '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x1dd84c[_0x3c0916(0x594)](_0x4f6147); } }), _0x2bd982(_0x224cf3(0x23f), _0x224cf3(0x93b)); } function _0x1900c8() { const _0x1e783a = _0x3abecc, _0x45cfa2 = _0x12ee15[_0x1e783a(0x60e)][_0x1e783a(0x8bb)](); if (!_0x45cfa2) { _0x18c07b('请输入群聊名称。'); return; } const _0x5e4e66 = Array[_0x1e783a(0xbd4)](_0x1dd84c[_0x1e783a(0x9b8)]('input[type=\x22checkbox\x22]:checked'))[_0x1e783a(0x5e9)](_0x27ee69 => _0x27ee69[_0x1e783a(0x641)]['id']); if (_0x5e4e66[_0x1e783a(0x6f2)] < 0x2) { _0x18c07b('群聊至少需要2名成员。'); return; } const _0x56f7e1 = { 'id': _0x1e783a(0x735) + Date['now'](), 'type': _0x1e783a(0xacf), 'name': _0x45cfa2, 'participantIds': _0x5e4e66 }; _0x2e4b8c[_0x1e783a(0x442)][_0x1e783a(0x7e4)](_0x56f7e1), _0x2e4b8c[_0x1e783a(0x7ee)] = _0x56f7e1['id'], _0x5a3c71(), _0x4adb3c(), _0x29d35e(), _0x7af3ed(), _0x18c07b('群聊“' + _0x45cfa2 + _0x1e783a(0x389)), _0x2bd982(_0x1e783a(0x4fb), _0x1e783a(0x23f)); } _0x2cb370[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x19c720[_0x3abecc(0x4b9)]()), _0x4e87b1[_0x3abecc(0xabf)]('click', _0x46f416), _0x19c720[_0x3abecc(0xabf)]('change', _0x1c87b2), _0xc597ba[_0x3abecc(0xabf)]('click', _0x4dccf2), _0x1bc718[_0x3abecc(0xabf)]('click', () => _0x25869f[_0x3abecc(0x42c)][_0x3abecc(0xb26)](_0x3abecc(0x3a9))), _0x14780b[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x25869f[_0x3abecc(0x42c)][_0x3abecc(0xb26)]('show')), _0x513733[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x5106b6 = _0x3abecc; _0x5786e2[_0x5106b6(0x3ba)](), navigator['clipboard'][_0x5106b6(0xa7d)](_0x5786e2[_0x5106b6(0x60e)])['then'](() => { const _0x875a50 = _0x5106b6; _0x18c07b(_0x875a50(0x290)); })[_0x5106b6(0x736)](_0x4d6d6b => { const _0x26152f = _0x5106b6; 'RMnbF' !== _0x26152f(0xa21) ? _0x1ff367[_0x26152f(0xbf4)] === _0x26152f(0x9f8) && !_0x3dab6f['shiftKey'] && (_0xd365ef[_0x26152f(0x93e)](), _0x57ac85()) : _0x18c07b('复制失败了，哼。'); }); }), _0x30ce09['addEventListener']('click', _0x56d3f6), _0x37c131[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x3a8db9), _0x3caa0b[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x34abc0[_0x3abecc(0x42c)][_0x3abecc(0xb26)](_0x3abecc(0x3a9))), _0x21ba50['addEventListener']('click', () => _0x34abc0[_0x3abecc(0x42c)][_0x3abecc(0xb26)]('show')), _0x3194bf['addEventListener'](_0x3abecc(0x4b9), () => _0x12e3f3[_0x3abecc(0x4b9)]()), _0x68c6a9[_0x3abecc(0xabf)]('click', () => _0x43a895[_0x3abecc(0x4b9)]()), _0x12e3f3['addEventListener'](_0x3abecc(0xc38), _0x4225d3 => { const _0x10d672 = _0x3abecc, _0x5a200c = _0x4225d3[_0x10d672(0xa4c)][_0x10d672(0x5a1)][0x0]; if (!_0x5a200c) return; const _0x3f9174 = URL[_0x10d672(0x38c)](_0x5a200c); _0x3194bf[_0x10d672(0xb56)][_0x10d672(0xb85)] = _0x10d672(0x24b) + _0x3f9174 + '\x27)'; }), _0x43a895[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x22f793 => { const _0xdf15ea = _0x3abecc, _0x8c3f58 = _0x22f793[_0xdf15ea(0xa4c)][_0xdf15ea(0x5a1)][0x0]; if (!_0x8c3f58) return; const _0x5b7da3 = URL[_0xdf15ea(0x38c)](_0x8c3f58); _0x68c6a9[_0xdf15ea(0xb56)][_0xdf15ea(0xb85)] = 'url(\x27' + _0x5b7da3 + '\x27)'; }), _0x1b4258[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x1c0ea9[_0x3abecc(0x4b9)]()), _0x179d09['addEventListener'](_0x3abecc(0x4b9), () => { const _0x35a5d6 = _0x3abecc; _0x35a5d6(0xbdf) !== _0x35a5d6(0xbdf) ? _0x544ec0(![]) : (localStorage['removeItem'](_0x35a5d6(0x53a)), _0x3b7495(), _0x18c07b(_0x35a5d6(0xa1c))); }), _0x1c0ea9['addEventListener'](_0x3abecc(0xc38), async _0x53267e => { const _0x2ac434 = _0x3abecc, _0x892e74 = _0x53267e[_0x2ac434(0xa4c)][_0x2ac434(0x5a1)][0x0]; if (!_0x892e74) return; try { if ('yjzIO' !== _0x2ac434(0x62f)) { const _0x2a53fb = await _0x518739(_0x892e74); localStorage[_0x2ac434(0x963)](_0x2ac434(0x53a), _0x2a53fb), _0x3b7495(), _0x18c07b(_0x2ac434(0x593)); } else _0x114b42[_0x2ac434(0x594)](_0x273372), _0xd209e5[_0x2ac434(0x594)](_0x5ecd8a); } catch (_0x4e4b90) { _0x2ac434(0x85f) === _0x2ac434(0x3ec) ? _0x4a33f3[_0x2ac434(0x7e4)]({ 'name': _0x17bcbc[0x0][_0x2ac434(0x8bb)](), 'url': _0x2d7342[0x1][_0x2ac434(0x8bb)]() }) : _0x18c07b(_0x2ac434(0x449) + _0x4e4b90[_0x2ac434(0x542)]); } }), document[_0x3abecc(0x392)](_0x3abecc(0x6f4))['addEventListener'](_0x3abecc(0x4b9), () => _0x2bd982('chat', _0x3abecc(0x79a))), document[_0x3abecc(0x392)]('save-group-settings-button')['addEventListener'](_0x3abecc(0x4b9), _0x5838dc); const _0x3605e6 = document[_0x3abecc(0x392)](_0x3abecc(0x8b9)), _0x15c9a0 = document[_0x3abecc(0x392)](_0x3abecc(0x4a2)); _0x3605e6[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x15c9a0[_0x3abecc(0x4b9)]()), _0x15c9a0[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x4d8ca1 => { const _0x1115c8 = _0x3abecc; if (_0x1115c8(0x6ee) === 'LfrVA') { const _0x74b149 = _0x129c80['author'] === _0x1115c8(0x5c3) ? _0x34c8e7[_0x1115c8(0x420)] : _0x504416(_0x4b9b81[_0x1115c8(0xafc)])[_0x1115c8(0x420)]; return _0x1115c8(0x2b6) + new _0x35c934(_0x4f74c1[_0x1115c8(0x518)])[_0x1115c8(0xbf7)]() + ']\x20' + _0x74b149 + '\x20写道:\x20' + _0x6ed0cb['content']; } else { const _0x1e50d1 = _0x4d8ca1[_0x1115c8(0xa4c)][_0x1115c8(0x5a1)][0x0]; if (!_0x1e50d1) return; const _0x13b307 = URL[_0x1115c8(0x38c)](_0x1e50d1); _0x3605e6[_0x1115c8(0x84e)] = _0x13b307, _0x3605e6[_0x1115c8(0x8df)] = () => { const _0x3616dc = _0x1115c8; if (_0x3616dc(0x273) !== _0x3616dc(0x7df)) URL[_0x3616dc(0x298)](_0x13b307); else throw new _0x3c56cb('文件格式不正确，不是一个有效的备份文件。'); }; } }); const _0x39ecb1 = document[_0x3abecc(0x392)](_0x3abecc(0x9d6))['parentElement'], _0x5482ff = document[_0x3abecc(0x392)](_0x3abecc(0x8fa)), _0x536642 = document[_0x3abecc(0x392)](_0x3abecc(0x9d6)); _0x39ecb1[_0x3abecc(0xabf)]('click', () => _0x5482ff[_0x3abecc(0x4b9)]()), _0x5482ff['addEventListener']('change', _0x441fb3 => { const _0x4e43b3 = _0x3abecc, _0x407f9d = _0x441fb3['target'][_0x4e43b3(0x5a1)][0x0]; if (!_0x407f9d) return; const _0x3ce1b9 = URL[_0x4e43b3(0x38c)](_0x407f9d); document[_0x4e43b3(0x392)](_0x4e43b3(0x9d6))['style'][_0x4e43b3(0xb85)] = _0x4e43b3(0x24b) + _0x3ce1b9 + '\x27)'; }); const _0x42e57a = document[_0x3abecc(0x50b)]('#group-settings-screen\x20.select-box'), _0x5b31b2 = document[_0x3abecc(0x392)](_0x3abecc(0x5fb)); _0x42e57a[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x29855a => { const _0x2beda5 = _0x3abecc; _0x2beda5(0x5a7) === _0x2beda5(0x5a7) ? (_0x29855a[_0x2beda5(0x843)](), _0x5b31b2[_0x2beda5(0x42c)][_0x2beda5(0x6bc)](_0x2beda5(0x844)), _0x42e57a[_0x2beda5(0x42c)][_0x2beda5(0x6bc)]('expanded')) : (_0x3eeeab *= _0x130dde / _0x2fcd4e, _0x1368b8 = _0xe9b173); }), _0x5b31b2[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x4844ad), document[_0x3abecc(0x392)]('group-clear-history-button')[_0x3abecc(0xabf)]('click', _0x1fc19a), document[_0x3abecc(0x392)](_0x3abecc(0x65f))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), async () => { const _0x1dc78f = _0x3abecc, _0x3e81fb = _0x28f748(); if (!_0x3e81fb || _0x3e81fb[_0x1dc78f(0x875)] !== _0x1dc78f(0xacf)) return; const _0x39ad8c = await _0x4b635a(_0x1dc78f(0xa55) + _0x3e81fb[_0x1dc78f(0x420)] + '”吗？此操作不可撤销。'); _0x39ad8c && (_0x1dc78f(0x715) !== _0x1dc78f(0x715) ? (_0x300949[_0x1dc78f(0xb56)][_0x1dc78f(0x993)] = 'none', _0x16fd5e[_0x1dc78f(0xb56)][_0x1dc78f(0xb6a)] = _0x1dc78f(0x368)) : (_0xccc749(_0x3e81fb['id']), _0x18c07b(_0x1dc78f(0xa84)), _0x2bd982('chat'), _0x113379(![]))); }); const _0x22b7c3 = document[_0x3abecc(0x50b)](_0x3abecc(0x94d)), _0x2a513d = document['getElementById'](_0x3abecc(0x64e)); _0x22b7c3[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0xc08cc0 => { const _0x2e8d44 = _0x3abecc; _0xc08cc0[_0x2e8d44(0x843)](), _0x2a513d[_0x2e8d44(0x42c)][_0x2e8d44(0x6bc)]('visible'), _0x22b7c3['classList'][_0x2e8d44(0x6bc)](_0x2e8d44(0xc32)); }), _0x2a513d[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x1374bd), document['addEventListener']('click', _0x1b455c => { const _0x4ba939 = _0x3abecc; !document[_0x4ba939(0x50b)](_0x4ba939(0x288))[_0x4ba939(0xb2d)](_0x1b455c[_0x4ba939(0xa4c)]) && (_0x2a513d[_0x4ba939(0x42c)]['remove'](_0x4ba939(0x844)), _0x22b7c3['classList'][_0x4ba939(0xb26)](_0x4ba939(0xc32))); }), _0x5d83cc[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x27663a = _0x3abecc; if (_0x27663a(0x854) !== _0x27663a(0x399)) _0x5b04d8(), _0x2bd982(_0x27663a(0x69b), _0x27663a(0xa74)); else { const _0x3e2082 = _0x2a2b44['querySelector'](_0x27663a(0x2ea) + _0x227b8d); if (_0x3e2082) _0x3e2082[_0x27663a(0x71e)] = !![]; } }), document[_0x3abecc(0x392)](_0x3abecc(0xaa4))['addEventListener']('click', () => _0x2bd982('home', _0x3abecc(0x69b))), document[_0x3abecc(0x392)](_0x3abecc(0x837))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x477d6c()), document['getElementById'](_0x3abecc(0x54c))[_0x3abecc(0xabf)]('click', () => { const _0x4b3702 = _0x3abecc; _0x5b04d8(), _0x2bd982(_0x4b3702(0x69b), _0x4b3702(0x94f)); }), document[_0x3abecc(0x392)](_0x3abecc(0xa32))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x97decf), document[_0x3abecc(0x392)](_0x3abecc(0x806))[_0x3abecc(0xabf)]('click', _0x5606cd), _0x3ff48c['addEventListener']('click', () => _0x2bd982('wallpaper', _0x3abecc(0xa74))), _0x5ed9ac[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x2bd982(_0x3abecc(0xa74), _0x3abecc(0x414))), _0x48928a[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x34bb26['click']()), _0x34bb26[_0x3abecc(0xabf)](_0x3abecc(0xc38), async _0x40347f => { const _0x4c4fee = _0x3abecc, _0x239122 = _0x40347f[_0x4c4fee(0xa4c)][_0x4c4fee(0x5a1)][0x0]; if (!_0x239122) return; await _0x2e2623(_0x239122); }), _0x398a96[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x2921a4 = _0x3abecc; if (_0x2921a4(0x8e2) !== _0x2921a4(0x790)) _0x4adb3c(), _0x2bd982(_0x2921a4(0x4fb), _0x2921a4(0xa74)); else return _0x7a5e9d['error'](_0x2921a4(0x2b3)), null; }), _0x253957[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x1b2c33 = _0x3abecc; _0x110a87(); const _0xc6428f = (_0x2e4b8c[_0x1b2c33(0xa8a)][_0x1b2c33(0xbb4)] || '')[_0x1b2c33(0x21d)](_0x37f8ca); _0x2b95f8[_0x1b2c33(0x523)] = _0xc6428f, _0x2bd982(_0x1b2c33(0x7ea), _0x1b2c33(0xa74)); }), _0x56c1ea['addEventListener']('click', () => _0x2bd982(_0x3abecc(0xa74), _0x3abecc(0x7ea))), _0x8d14ca[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x113c81 = _0x3abecc; _0x43f2bd(), _0x2bd982(_0x113c81(0xa74), _0x113c81(0x4fb)); }), _0x4a354b['addEventListener']('click', () => { _0x43f2bd(), _0x113379(![]); }), _0x741cc6[_0x3abecc(0xabf)]('click', () => { const _0x13399e = _0x3abecc; _0x13399e(0x3d9) === _0x13399e(0x7e7) ? (_0x507d8d[_0x13399e(0xa19)] = _0x3615c4, _0x357e12(), _0x7a2a08()) : _0x2bd982('chat', _0x13399e(0x6ba)); }), _0x51b7ff[_0x3abecc(0xabf)]('click', () => { const _0x291313 = _0x3abecc; _0x1cf0e9['classList']['add'](_0x291313(0x3a9)); }), _0x3afa5f[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x49bbae()), _0x289097['addEventListener'](_0x3abecc(0x4b9), _0x3137d6); function _0x108133(_0x22a1c2) { const _0x1ed635 = _0x3abecc; if ('QNeAo' === 'sNUEq') _0x29fd7f[_0x1ed635(0xabf)](_0x1ed635(0x4b9), () => { _0x1ad647('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a'); }); else { if (!_0x22a1c2 || _0x22a1c2[_0x1ed635(0x875)] !== 'group') return; const _0x2ea006 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x1ed635(0x3de)][_0x1ed635(0x256)](_0x1ed635(0x2af), _0x2ea006); const _0x33fd91 = document['getElementById'](_0x1ed635(0x27e)), _0x4a9e1e = _0x33fd91[_0x1ed635(0x50b)](_0x1ed635(0xb37)), _0x40e5e3 = document[_0x1ed635(0x392)](_0x1ed635(0x7da)), _0x388fb8 = document[_0x1ed635(0x392)](_0x1ed635(0xa44)), _0x4965b4 = document['getElementById']('group-edit-name'), _0x365b1e = document[_0x1ed635(0x392)](_0x1ed635(0x973)), _0x9001a7 = document[_0x1ed635(0x392)](_0x1ed635(0x7c2)), _0x20fa46 = () => _0x33fd91['remove'](); _0x40e5e3[_0x1ed635(0xabf)]('click', async () => { const _0x120916 = _0x1ed635; _0x20fa46(); const _0x2e8b64 = await _0x4b635a(_0x120916(0x3a7) + _0x22a1c2[_0x120916(0x420)] + _0x120916(0x385)); if (_0x2e8b64) { _0x22a1c2['id'] === _0x2e4b8c[_0x120916(0x7ee)] && (_0x43f2bd(), _0x2e4b8c[_0x120916(0x2c8)] = [], _0x2d9cac()); try { localStorage[_0x120916(0x4a7)]('chatHistory_' + _0x22a1c2['id']), _0x18c07b(_0x120916(0x60f) + _0x22a1c2[_0x120916(0x420)] + _0x120916(0x860)); } catch (_0x3282c1) { console[_0x120916(0x5b1)](_0x120916(0xaf5) + _0x22a1c2['id'], _0x3282c1), _0x18c07b(_0x120916(0x95d)); } } }), _0x388fb8[_0x1ed635(0xabf)]('click', () => { const _0x466313 = _0x1ed635; _0x20fa46(), _0x18c07b(_0x466313(0x8f8)); }), _0x4965b4[_0x1ed635(0xabf)]('click', async () => { const _0x317d4d = _0x1ed635; _0x20fa46(); const _0x398aa4 = prompt('请输入新的群名称：', _0x22a1c2['name']); _0x398aa4 && _0x398aa4[_0x317d4d(0x8bb)]() && _0x398aa4 !== _0x22a1c2['name'] && (_0x22a1c2[_0x317d4d(0x420)] = _0x398aa4[_0x317d4d(0x8bb)](), _0x5a3c71(), _0x4adb3c(), _0x29d35e(), _0x18c07b(_0x317d4d(0x73a) + _0x22a1c2['name'] + '\x22。')); }), _0x365b1e[_0x1ed635(0xabf)]('click', async () => { const _0x49fa77 = _0x1ed635; _0x20fa46(); const _0x450803 = await _0x4b635a('确定要删除群聊\x22' + _0x22a1c2[_0x49fa77(0x420)] + _0x49fa77(0xae1)); _0x450803 && (_0xccc749(_0x22a1c2['id']), _0x18c07b(_0x49fa77(0x60f) + _0x22a1c2[_0x49fa77(0x420)] + '\x22\x20已删除。'), _0x113379(![])); }), _0x4a9e1e[_0x1ed635(0xabf)]('click', _0x20fa46), _0x9001a7['addEventListener'](_0x1ed635(0x4b9), _0x20fa46); } } _0x188245[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x1f9ccb = _0x3abecc, _0x4eea8e = _0x28f748(); if (_0x4eea8e && _0x4eea8e[_0x1f9ccb(0x875)] === 'private') _0x11f229(_0x4eea8e[_0x1f9ccb(0xa2a)][0x0]); else _0x4eea8e && _0x4eea8e[_0x1f9ccb(0x875)] === _0x1f9ccb(0xacf) && _0x181fb3(_0x4eea8e['id']); }), _0xd8c7f5[_0x3abecc(0xabf)](_0x3abecc(0x7d9), _0x5cefd4 => { const _0x162bea = _0x3abecc; _0x5cefd4[_0x162bea(0xbf4)] === _0x162bea(0x9f8) && !_0x5cefd4[_0x162bea(0x9c7)] && (_0x5cefd4[_0x162bea(0x93e)](), _0x49bbae()); }); const _0xbb72f8 = () => _0x1cf0e9[_0x3abecc(0x42c)]['remove'](_0x3abecc(0x3a9)); _0x5c63f8[_0x3abecc(0xabf)]('click', _0xbb72f8), _0x548b0b[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0xbb72f8), _0x5986e6[_0x3abecc(0xabf)]('click', () => { _0xbb72f8(), _0x11f229(); }), _0x1613de[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { _0xbb72f8(), _0x40f7f3(); }), _0xa9ef91['addEventListener'](_0x3abecc(0x4b9), () => { const _0x4da717 = _0x3abecc; _0x2bd982('chat', _0x4da717(0x23f)), _0x113379(![]); }), _0x4d0323[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x1900c8), _0x1f2fd9['addEventListener']('click', () => { const _0x181d32 = _0x3abecc; if ('qtvAZ' !== _0x181d32(0xb0e)) _0x3b86fc['stopPropagation'](), _0x517f7c(); else { _0x28c089[_0x181d32(0x42c)][_0x181d32(0x6bc)](_0x181d32(0x3a9)); if (_0x28c089[_0x181d32(0x42c)][_0x181d32(0xb2d)]('show')) { if (_0x181d32(0x784) !== _0x181d32(0x784)) { const _0x114e32 = _0x4e25fb['transaction'](_0x36e82d, _0x181d32(0xae0)), _0x4a9f8b = _0x114e32[_0x181d32(0x4c5)](_0x438533), _0x29047d = _0x4a9f8b[_0x181d32(0x701)]({ 'id': _0x2211b2, 'blob': _0x3bf5cb }); _0x29047d[_0x181d32(0x817)] = () => _0x95cae3(_0x29047d['result']), _0x29047d['onerror'] = () => _0x8ff0e2(_0x29047d[_0x181d32(0x5b1)]); } else _0x2d4f68[_0x181d32(0xbd7)] = _0x2d4f68[_0x181d32(0x220)]; } } }), _0x55a537[_0x3abecc(0xabf)]('click', () => _0x78ac47[_0x3abecc(0x4b9)]()); const _0xc54842 = document[_0x3abecc(0x392)](_0x3abecc(0x91b)); _0x78ac47[_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x1c665b), _0xc54842['addEventListener'](_0x3abecc(0x4b9), _0x5da13e), _0x2d0572[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x39ec71), _0x54438e['addEventListener'](_0x3abecc(0x4b9), _0x2a26c9), _0x40d8fe['addEventListener'](_0x3abecc(0x4b9), _0x4f74cb), _0x87b1b7[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x1fc19a), _0x83b1c8['addEventListener'](_0x3abecc(0x4b9), async () => { const _0x4df9bd = _0x3abecc, _0x4b25d6 = _0x35b68b[_0x4df9bd(0x60e)]; if (!_0x4b25d6) return; const _0x53c393 = _0x2653c6(_0x4b25d6); if (!_0x53c393) return; const _0x3d40ec = await _0x4b635a('确定要删除角色“' + _0x53c393[_0x4df9bd(0x420)] + _0x4df9bd(0x8eb)); _0x3d40ec && (_0x126b7b(_0x4b25d6), _0x18c07b(_0x4df9bd(0x2f9) + _0x53c393[_0x4df9bd(0x420)] + _0x4df9bd(0xb51)), _0x2bd982(_0x4df9bd(0x4fb), _0x4df9bd(0x6ba)), _0x113379(![])); }), _0x20451a[_0x3abecc(0xabf)](_0x3abecc(0x921), () => { const _0x15b26c = _0x3abecc; if (_0x15b26c(0x4aa) === _0x15b26c(0x4aa)) { const _0x535162 = _0x20451a[_0x15b26c(0x60e)][_0x15b26c(0x8bb)]()[_0x15b26c(0x21d)](_0x37f8ca); _0x2b95f8['disabled'] = _0x535162; } else _0x11e7c0(_0x15b26c(0xaf1))[_0x15b26c(0x54a)](_0x782fb1 => { const _0x5afefc = _0x15b26c; if (_0x782fb1) { const _0x3eaf24 = _0xad84c7(_0x536742[_0x5afefc(0x8f1)]); _0x3eaf24 && (delete _0x3eaf24[_0x5afefc(0x5dd)], _0x47dde7(), _0x1f99cd(_0x3eaf24['id'], _0x5afefc(0x83c)), _0x24a423(_0x5afefc(0x631)), _0x19a6f2(!![])); } }); }); async function _0x3c741b() { const _0x1aad74 = _0x3abecc, _0x4a366e = _0x20451a[_0x1aad74(0x60e)]['trim'](), _0x6caaa = _0x133cfb[_0x1aad74(0x60e)][_0x1aad74(0x8bb)](); if (!_0x4a366e || !_0x6caaa) { if (_0x1aad74(0xbc4) !== _0x1aad74(0x42b)) { _0x18c07b(_0x1aad74(0x800)); return; } else _0x1ec167['error'](_0x1aad74(0x959) + _0x1eeed2 + _0x1aad74(0x229), _0x113cb1), _0x285ac8[_0x1aad74(0x2c9)] = _0x1aad74(0x77d) + _0x22691e['message'] + _0x1aad74(0x2cc); } const _0x1afb85 = _0x4a366e['replace'](/\/+$/, ''), _0x3d3094 = _0x1afb85 + _0x1aad74(0xb5d); _0x2b95f8[_0x1aad74(0x523)] = !![], _0x2b95f8[_0x1aad74(0x324)] = _0x1aad74(0x599), _0x2f14cd[_0x1aad74(0x42c)]['remove'](_0x1aad74(0x3a9)); try { if ('Hurts' !== 'Hurts') _0x2ea719[_0x1aad74(0x2c9)] = _0x1aad74(0x76a) + _0x14be6d + '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x16d51c + _0x1aad74(0x2d6) + _0x4283f4[_0x1aad74(0x50e)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x5d2bd3['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0xaa8e7f[_0x1aad74(0x908)] + '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>'; else { const _0x207c8e = await fetch(_0x3d3094, { 'headers': { 'Authorization': _0x1aad74(0x962) + _0x416820(_0x6caaa) } }); if (!_0x207c8e['ok']) throw new Error(_0x1aad74(0x634) + _0x207c8e[_0x1aad74(0x86d)]); const _0x2f52ff = await _0x207c8e[_0x1aad74(0xb9f)](), _0x4f0400 = (_0x2f52ff[_0x1aad74(0x6c9)] || _0x2f52ff)['map'](_0x33af8c => _0x33af8c['id'])[_0x1aad74(0x474)](); if (_0x4f0400[_0x1aad74(0x6f2)] > 0x0) _0x2f14cd['innerHTML'] = '', _0x4f0400[_0x1aad74(0xb5e)](_0x5ebe4f => { const _0x87e1d0 = _0x1aad74; if (_0x87e1d0(0x6be) === _0x87e1d0(0x6be)) { const _0x409b3e = document['createElement'](_0x87e1d0(0x63a)); _0x409b3e[_0x87e1d0(0x324)] = _0x5ebe4f, _0x409b3e[_0x87e1d0(0xabf)](_0x87e1d0(0x4b9), () => { const _0x4bc554 = _0x87e1d0; _0x4bc554(0xad9) !== _0x4bc554(0xb60) ? (_0x316f32[_0x4bc554(0x60e)] = _0x5ebe4f, _0x2f14cd[_0x4bc554(0x42c)]['remove']('show')) : _0x89759a(_0x4bc554(0x77c)); }), _0x2f14cd[_0x87e1d0(0x594)](_0x409b3e); } else { const _0x24faae = _0x28e854[_0x87e1d0(0x8bb)](); _0x24faae && _0x356d84[_0x87e1d0(0x7e4)](..._0x1b3726(_0x24faae)), _0x3dbd34 < _0x5bce07[_0x87e1d0(0x6f2)] && (_0x392ec3[_0x87e1d0(0x7e4)](_0xff6ac8[_0x180e28][_0x87e1d0(0x8bb)]()), _0x68c47b++); } }), _0x2f14cd[_0x1aad74(0x42c)][_0x1aad74(0x6ec)]('show'), _0x18c07b('成功获取\x20' + _0x4f0400[_0x1aad74(0x6f2)] + _0x1aad74(0x4a8)); else { if (_0x1aad74(0x4f6) !== 'RPABI') { const _0xe7f6b6 = _0x14a53d(_0x5f0ab2['activeMeetingCharId']); _0xe7f6b6 && (_0xe7f6b6['spriteTransform'] = _0x35591e, _0x90a23e(_0x13c175[_0x1aad74(0x8f1)], _0x1aad74(0x83c))); } else _0x18c07b(_0x1aad74(0x9ac)); } } } catch (_0x3cc75c) { _0x18c07b(_0x1aad74(0x9b9) + _0x3cc75c[_0x1aad74(0x542)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); } finally { if (_0x1aad74(0x4d1) === _0x1aad74(0xafa)) { const _0x4b08f1 = _0x51487e[_0x1aad74(0x9b8)](_0x1aad74(0xc1c)); _0x4b08f1[_0x1aad74(0xb5e)](_0x295f34 => _0x295f34[_0x1aad74(0xb26)]()); } else _0x2b95f8[_0x1aad74(0x523)] = ![], _0x2b95f8[_0x1aad74(0x324)] = '获取'; } } _0x2b95f8['addEventListener']('click', _0x2aabfa => { const _0x50f92d = _0x3abecc; _0x50f92d(0x81b) === _0x50f92d(0x9de) ? _0x67f5bc[_0x50f92d(0x587)] = _0x57ac37 : (_0x2aabfa[_0x50f92d(0x843)](), _0x3c741b()); }), document[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0xe31119 => { const _0x8a55d0 = _0x3abecc; !_0x2f14cd[_0x8a55d0(0xb2d)](_0xe31119['target']) && _0xe31119['target'] !== _0x316f32 && _0xe31119['target'] !== _0x2b95f8 && _0x2f14cd[_0x8a55d0(0x42c)][_0x8a55d0(0xb26)](_0x8a55d0(0x3a9)); }); async function _0x518739(_0x54c191) { const _0x5c7c87 = _0x3abecc; if (_0x5c7c87(0x4f0) === _0x5c7c87(0xb01)) _0x15c379(_0x58473b); else return await _0x4b681c(_0x54c191, 0x190, 0.85); } _0x2b744[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x124c95['click']()), _0x124c95[_0x3abecc(0xabf)](_0x3abecc(0xc38), async _0x3d7df6 => { const _0x205731 = _0x3abecc; if (_0x205731(0x623) === _0x205731(0x617)) return _0x540b34[_0x205731(0x5b1)](_0x205731(0x4fd), _0x28db40), _0x4842c0[_0x205731(0x5b1)](_0x205731(0xa48), _0x954e24[_0x205731(0x1dd)] || _0x205731(0xac4)), null; else { const _0x5b46d4 = _0x3d7df6[_0x205731(0xa4c)][_0x205731(0x5a1)][0x0]; if (!_0x5b46d4) return; try { if (_0x205731(0x5e3) === _0x205731(0x5e3)) { const _0x5ecaad = await _0x518739(_0x5b46d4), _0x5ca964 = document[_0x205731(0x392)](_0x205731(0x819)); _0x5ca964[_0x205731(0xb56)][_0x205731(0xb85)] = 'url(\x27' + _0x5ecaad + '\x27)', _0x5ca964[_0x205731(0x641)][_0x205731(0x4ec)] = _0x5ecaad; } else _0x2ff389(_0x4c2f07['id']); } catch (_0x2c66f2) { if (_0x205731(0x6fb) === _0x205731(0x38a)) { const _0x4a3b75 = _0x4aeb93 === _0x3c4f43 ? '>>\x20' : ''; return '' + _0x4a3b75 + _0x2931d8[_0x205731(0xbbc)]; } else _0x18c07b(_0x205731(0x449) + _0x2c66f2[_0x205731(0x542)]); } } }), _0x3ef78d[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x343afb[_0x3abecc(0x4b9)]()), _0x343afb[_0x3abecc(0xabf)]('change', async _0x155429 => { const _0x23e6b4 = _0x3abecc; if ('DYHVw' === 'lNqcB') _0x60e433[_0x23e6b4(0xbf0)](_0x23e6b4(0x55e) + _0x5f37c2); else { const _0xc9307d = _0x155429[_0x23e6b4(0xa4c)][_0x23e6b4(0x5a1)][0x0]; if (!_0xc9307d) return; try { _0x3ef78d[_0x23e6b4(0x84e)] = await _0x518739(_0xc9307d); } catch (_0xc5fcf5) { _0x18c07b('错误:\x20' + _0xc5fcf5['message']); } } }); function _0x530ad9() { const _0x72f858 = _0x3abecc; 'rgkhD' === 'rgkhD' ? (_0x28c089[_0x72f858(0x2c9)] = '', _0x216772['forEach'](_0xc55b26 => { const _0xf196f = _0x72f858; if ('NZOKt' !== 'jszYM') { const _0x3d5803 = document[_0xf196f(0x92e)](_0xf196f(0x606)); _0x3d5803[_0xf196f(0x84e)] = _0xc55b26['url'], _0x3d5803[_0xf196f(0xad1)] = _0xf196f(0x2ef), _0x3d5803['title'] = _0xc55b26[_0xf196f(0x420)], _0x3d5803[_0xf196f(0x42c)][_0xf196f(0x6ec)]('sticker-item'), _0x3d5803[_0xf196f(0xabf)](_0xf196f(0x4b9), () => _0x1d93f8(_0xc55b26)), _0x28c089[_0xf196f(0x594)](_0x3d5803); } else { const _0x1442b4 = _0x45136d(_0x3f6e1d[_0xf196f(0x641)][_0xf196f(0xa97)], 0xa); _0xf84356(_0x1442b4); } })) : _0x56ae67['push'](_0x2d4874); } async function _0x349d2d(_0x16f21d) { const _0x6d6f82 = _0x3abecc, _0xbb08c2 = await _0x4b635a(_0x6d6f82(0x3ea)); if (!_0xbb08c2) return; const _0x968f2 = _0x2e4b8c['calendarEvents'][_0x6d6f82(0x948)](_0x55803f => _0x55803f['id'] === _0x16f21d); if (_0x968f2 > -0x1) { if (_0x6d6f82(0xb9b) === _0x6d6f82(0xb9b)) _0x2e4b8c[_0x6d6f82(0x6a6)][_0x6d6f82(0x872)](_0x968f2, 0x1), _0x5a3c71(), _0x860c97(), _0x4b2288(), _0x1e972b(), _0x18c07b(_0x6d6f82(0xb97)); else { const _0x465091 = _0x1c014d[_0x6d6f82(0x92e)](_0x6d6f82(0x63a)); _0x465091[_0x6d6f82(0x894)] = _0x6d6f82(0x8c9) + _0x9c3bf1; const _0xaf6fef = _0x5574b4[_0x6d6f82(0x92e)](_0x6d6f82(0x606)); _0xaf6fef[_0x6d6f82(0x84e)] = _0x5576dd, _0xaf6fef[_0x6d6f82(0x894)] = _0x6d6f82(0x58d); const _0x3f9edb = _0x195d1c[_0x6d6f82(0x92e)](_0x6d6f82(0x63a)); return _0x3f9edb[_0x6d6f82(0x894)] = _0x6d6f82(0x974), _0x996d3b && (_0x3f9edb['style']['backgroundImage'] = _0x6d6f82(0x24b) + _0x2b60f5 + '\x27)'), _0x465091[_0x6d6f82(0x594)](_0xaf6fef), _0x465091[_0x6d6f82(0x594)](_0x3f9edb), _0x465091; } } } let _0x467f8a = null; function _0x45d6c1(_0x289770) { const _0x482683 = _0x3abecc; if (_0x482683(0xb47) !== _0x482683(0x6a7)) { if (_0x467f8a) clearTimeout(_0x467f8a); const _0x2a7403 = _0x289770['target'][_0x482683(0xbda)]('.todo-item,\x20.important-day-item'); if (!_0x2a7403) return; const _0x307dd5 = _0x2a7403[_0x482683(0x641)]['id']; if (!_0x307dd5) return; const _0x52c4b7 = () => { const _0x3dffa8 = _0x482683; if ('OuYmR' === _0x3dffa8(0xbfb)) _0x467f8a = setTimeout(() => { const _0x3a77ad = _0x3dffa8; if (_0x289770[_0x3a77ad(0x875)] === _0x3a77ad(0x6f3)) _0x289770['preventDefault'](); _0x349d2d(_0x307dd5); }, 0x320); else { if (!_0x51f0fe[_0x3dffa8(0x74a)](_0x277d6c)) return _0x3dffa8(0x6b2); if (_0x1292a3['length'] === 0x0) return _0x3dffa8(0x271); return _0x237c2b[_0x3dffa8(0x474)]((_0x2192e1, _0x19e21e) => new _0x77aae5(_0x19e21e['timestamp']) - new _0x59ecbe(_0x2192e1[_0x3dffa8(0x518)])), _0x2b5f05[_0x3dffa8(0x5e9)](_0x21de5a => _0x3dffa8(0x46c) + (_0x21de5a[_0x3dffa8(0x5f0)] || _0x3dffa8(0x284)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>' + (_0x21de5a[_0x3dffa8(0x518)] || '') + _0x3dffa8(0xa52) + (_0x21de5a[_0x3dffa8(0xb53)] || _0x3dffa8(0x3f8)) + _0x3dffa8(0x2b4) + (_0x21de5a[_0x3dffa8(0x635)] || 0x0)[_0x3dffa8(0x8c5)](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')['join'](''); } }, _0x239f2d = () => { const _0x76140c = _0x482683; if (_0x76140c(0x381) === _0x76140c(0x842)) _0x465b33[_0x76140c(0xb56)][_0x76140c(0x993)] = _0x76140c(0x3a4), _0x482b26[_0x76140c(0xb56)][_0x76140c(0x993)] = _0x76140c(0x94c); else { if (_0x467f8a) clearTimeout(_0x467f8a); } }; document[_0x482683(0xabf)](_0x482683(0x257), _0x239f2d, { 'once': !![] }), document[_0x482683(0xabf)]('touchend', _0x239f2d, { 'once': !![] }), document[_0x482683(0xabf)]('touchcancel', _0x239f2d, { 'once': !![] }), document['addEventListener'](_0x482683(0xb75), _0x239f2d, { 'once': !![] }), _0x52c4b7(); } else _0x1be1f8[_0x482683(0x93e)](); } function _0xcb334d(_0x4c311f) { const _0x3b3038 = _0x3abecc, _0x32121d = _0x2e4b8c[_0x3b3038(0x442)][_0x3b3038(0x69e)](_0x303bb3 => _0x303bb3[_0x3b3038(0xa2a)][_0x3b3038(0x21d)](_0x4c311f)); if (!_0x32121d) return ''; const _0xd558df = _0x23edb1(_0x32121d['id']), _0x33b1f1 = _0x2e4b8c['calendarEvents'][_0x3b3038(0x742)](_0x22ef20 => _0x22ef20['userId'] === _0xd558df['id'] || !_0x22ef20['userId']); if (_0x33b1f1[_0x3b3038(0x6f2)] === 0x0) return ''; const _0x235ac2 = _0x33b1f1['map'](_0x4d178c => { const _0x361fae = _0x3b3038, _0x4bc888 = _0x4d178c[_0x361fae(0x875)] === _0x361fae(0xc27) ? _0x361fae(0x9df) : '待办'; return _0x361fae(0x2b6) + _0x4bc888 + ']\x20' + _0x4d178c['date'] + ':\x20' + _0x4d178c['content']; })[_0x3b3038(0x52b)]('\x0a'); return _0x3b3038(0x7b2) + _0xd558df[_0x3b3038(0x420)] + _0x3b3038(0xaef) + _0x235ac2; } let _0x5595c8 = { 'currentDate': new Date(), 'selectedDate': _0x5b838e() }; function _0x4f69e3() { const _0x2202c8 = _0x3abecc; if (_0x2202c8(0x2b1) !== _0x2202c8(0x2b1)) throw new _0x45bae8(_0x2202c8(0x831)); else { document['getElementById']('app-calendar')[_0x2202c8(0xabf)](_0x2202c8(0x4b9), () => { const _0x38e741 = _0x2202c8; _0x860c97(), _0x2bd982(_0x38e741(0x590), 'home'); }), document['getElementById'](_0x2202c8(0x8f4))[_0x2202c8(0xabf)](_0x2202c8(0x4b9), () => _0x2bd982(_0x2202c8(0xa74), _0x2202c8(0x590))), document[_0x2202c8(0x392)](_0x2202c8(0x6d3))['addEventListener'](_0x2202c8(0x4b9), () => { const _0x2d0845 = _0x2202c8; _0x5595c8['currentDate'][_0x2d0845(0x72e)](_0x5595c8[_0x2d0845(0x307)][_0x2d0845(0x49d)]() - 0x1), _0x860c97(); }), document[_0x2202c8(0x392)](_0x2202c8(0x8bf))[_0x2202c8(0xabf)]('click', () => { const _0x4fcfd8 = _0x2202c8; _0x5595c8[_0x4fcfd8(0x307)][_0x4fcfd8(0x72e)](_0x5595c8['currentDate'][_0x4fcfd8(0x49d)]() + 0x1), _0x860c97(); }), document['getElementById']('today-btn')[_0x2202c8(0xabf)](_0x2202c8(0x4b9), () => { const _0x15323c = _0x2202c8; _0x5595c8[_0x15323c(0x307)] = new Date(), _0x5595c8[_0x15323c(0xaff)] = _0x5b838e(), _0x860c97(); }), document[_0x2202c8(0x392)](_0x2202c8(0x53d))[_0x2202c8(0xabf)](_0x2202c8(0x4b9), () => { const _0x309c54 = _0x2202c8; if (_0x309c54(0xa78) !== 'SGlpL') return { 'type': _0x309c54(0xb03), 'eventType': _0x57d623[0x1][_0x309c54(0x8bb)](), 'eventDate': _0x50cf71[0x2]['trim'](), 'eventContent': _0x4e1339[0x3][_0x309c54(0x8bb)]() }; else _0xf33dc(_0x5595c8[_0x309c54(0xaff)]); }), document[_0x2202c8(0x392)](_0x2202c8(0x5b2))[_0x2202c8(0xabf)](_0x2202c8(0x4b9), _0x13635c), document[_0x2202c8(0x392)](_0x2202c8(0x67b))[_0x2202c8(0xabf)](_0x2202c8(0x4b9), () => document[_0x2202c8(0x392)](_0x2202c8(0xbfc))[_0x2202c8(0x42c)][_0x2202c8(0xb26)]('show')), document[_0x2202c8(0x392)](_0x2202c8(0x3d5))['addEventListener'](_0x2202c8(0x4b9), () => document[_0x2202c8(0x392)](_0x2202c8(0xbfc))[_0x2202c8(0x42c)][_0x2202c8(0xb26)](_0x2202c8(0x3a9))); const _0x3489e6 = document[_0x2202c8(0x392)]('todo-list'); _0x3489e6[_0x2202c8(0xabf)](_0x2202c8(0x445), _0x45d6c1), _0x3489e6[_0x2202c8(0xabf)]('touchstart', _0x45d6c1, { 'passive': ![] }); } } function _0x860c97() { const _0x1f9786 = _0x3abecc; if ('AlFSz' !== 'nnPOi') { const _0x4489dd = _0x5595c8[_0x1f9786(0x307)][_0x1f9786(0x780)](), _0x3afac1 = _0x5595c8[_0x1f9786(0x307)][_0x1f9786(0x49d)](); document[_0x1f9786(0x392)](_0x1f9786(0xa67))['textContent'] = _0x4489dd + '年\x20' + (_0x3afac1 + 0x1) + '月', _0xdb9dbd(_0x4489dd, _0x3afac1), _0x5477b7(_0x5595c8[_0x1f9786(0xaff)]); } else { const _0x20f306 = { ..._0x2bec1e }; return _0x20f306[_0x1f9786(0x58d)] && _0x20f306[_0x1f9786(0x58d)]['startsWith'](_0x1f9786(0x718)) && delete _0x20f306[_0x1f9786(0x58d)], _0x20f306; } } function _0x1e972b() { const _0x4f08db = _0x3abecc, _0x5ea73e = document[_0x4f08db(0x392)](_0x4f08db(0x698)); if (!_0x5ea73e) return; const _0x348889 = _0x5b838e(), _0x440607 = _0x2e4b8c[_0x4f08db(0x6a6)][_0x4f08db(0x742)](_0x4428f7 => _0x4428f7['date'] === _0x348889 && _0x4428f7[_0x4f08db(0x875)] === 'todo'); _0x5ea73e[_0x4f08db(0x2c9)] = '', _0x440607['length'] > 0x0 ? _0x4f08db(0xac8) !== _0x4f08db(0x2a4) ? _0x440607[_0x4f08db(0xb5e)](_0x3276cd => { const _0x50ee8e = _0x4f08db; if (_0x50ee8e(0xa13) === _0x50ee8e(0x70f)) { _0x39d077(_0x50ee8e(0x8b4)); return; } else { const _0x50807c = document[_0x50ee8e(0x92e)](_0x50ee8e(0x63a)); _0x50807c[_0x50ee8e(0x894)] = 'todo-item-small', _0x50807c[_0x50ee8e(0x324)] = _0x3276cd[_0x50ee8e(0xa19)], _0x5ea73e[_0x50ee8e(0x594)](_0x50807c); } }) : _0x46eb7c('musicLibrary', 'musicUploadAltar') : _0x5ea73e[_0x4f08db(0x2c9)] = _0x4f08db(0xbb9); } function _0xdb9dbd(_0x1d5873, _0x5cddcd) { const _0x379fb5 = _0x3abecc, _0xa951d2 = document[_0x379fb5(0x392)](_0x379fb5(0x24a)); _0xa951d2[_0x379fb5(0x2c9)] = ''; const _0x41fc01 = new Date(_0x1d5873, _0x5cddcd, 0x1)[_0x379fb5(0x5d1)](), _0x4bb387 = new Date(_0x1d5873, _0x5cddcd + 0x1, 0x0)[_0x379fb5(0xa7a)](), _0x50c153 = _0x5b838e(); for (let _0x58d657 = 0x0; _0x58d657 < _0x41fc01; _0x58d657++) { if ('cpxAN' !== _0x379fb5(0x501)) _0xa951d2['appendChild'](document['createElement'](_0x379fb5(0x63a))); else { const _0x1849cc = _0x379fb5(0x5bc) + _0xbf4bc9; _0x5d334e(_0x1849cc), _0x5e3422(!![]); } } for (let _0x3dbf16 = 0x1; _0x3dbf16 <= _0x4bb387; _0x3dbf16++) { if (_0x379fb5(0xc13) !== 'UWoab') { if (!_0x557940) return ''; const _0x1766dc = new _0x2bb254(_0x325a88), _0x5e4c67 = _0x4276a3(_0x1766dc[_0x379fb5(0x2d8)]())[_0x379fb5(0xb98)](0x2, '0'), _0x3be70b = _0xd03d89(_0x1766dc[_0x379fb5(0x618)]())[_0x379fb5(0xb98)](0x2, '0'); return _0x5e4c67 + ':' + _0x3be70b; } else { const _0x4e1f7c = document[_0x379fb5(0x92e)]('div'); _0x4e1f7c['className'] = _0x379fb5(0x1ec); const _0xd6ab96 = _0x1d5873 + '-' + String(_0x5cddcd + 0x1)[_0x379fb5(0xb98)](0x2, '0') + '-' + String(_0x3dbf16)[_0x379fb5(0xb98)](0x2, '0'); if (_0xd6ab96 === _0x50c153) _0x4e1f7c[_0x379fb5(0x42c)]['add'](_0x379fb5(0x31f)); if (_0xd6ab96 === _0x5595c8[_0x379fb5(0xaff)]) _0x4e1f7c[_0x379fb5(0x42c)][_0x379fb5(0x6ec)]('is-selected'); const _0x2a0d3e = document[_0x379fb5(0x92e)]('span'); _0x2a0d3e[_0x379fb5(0x894)] = _0x379fb5(0xc34), _0x2a0d3e[_0x379fb5(0x324)] = _0x3dbf16, _0x4e1f7c[_0x379fb5(0x594)](_0x2a0d3e); const _0x2066e1 = _0x2e4b8c[_0x379fb5(0x6a6)][_0x379fb5(0x742)](_0x2f0d30 => _0x2f0d30['date'] === _0xd6ab96); if (_0x2066e1['length'] > 0x0) { const _0x133255 = document[_0x379fb5(0x92e)]('div'); _0x133255[_0x379fb5(0x894)] = _0x379fb5(0x359), _0x4e1f7c[_0x379fb5(0x594)](_0x133255); } _0x4e1f7c[_0x379fb5(0xabf)](_0x379fb5(0x4b9), () => { const _0x532571 = _0x379fb5; _0x5595c8[_0x532571(0xaff)] = _0xd6ab96, _0x860c97(); }), _0xa951d2[_0x379fb5(0x594)](_0x4e1f7c); } } } function _0x5477b7(_0x3c9844) { const _0x10b69a = _0x3abecc; if (_0x10b69a(0x20d) !== _0x10b69a(0x20d)) _0x54ade0[_0x10b69a(0xb56)][_0x10b69a(0xb85)] = _0x10b69a(0x24b) + _0x3f9890 + '\x27)'; else { const _0x42821f = document['getElementById'](_0x10b69a(0x7af)), _0x2a9a54 = document[_0x10b69a(0x392)](_0x10b69a(0x28e)); _0x42821f[_0x10b69a(0x2c9)] = ''; const _0x53f257 = new Date(_0x3c9844 + _0x10b69a(0xa36)); _0x2a9a54[_0x10b69a(0x324)] = _0x53f257['getMonth']() + 0x1 + '月' + _0x53f257[_0x10b69a(0xa7a)]() + '日'; const _0x3a9727 = _0x2e4b8c[_0x10b69a(0x6a6)]['filter'](_0xc0ac5c => _0xc0ac5c[_0x10b69a(0x215)] === _0x3c9844); if (_0x3a9727[_0x10b69a(0x6f2)] === 0x0) { _0x42821f[_0x10b69a(0x2c9)] = _0x10b69a(0x564); return; } _0x3a9727['forEach'](_0x142b80 => { const _0x1ad0a2 = _0x10b69a, _0x158441 = document[_0x1ad0a2(0x92e)](_0x1ad0a2(0x63a)); _0x158441['className'] = _0x142b80[_0x1ad0a2(0x875)] === _0x1ad0a2(0xc27) ? _0x1ad0a2(0xa90) : 'todo-item', _0x158441['textContent'] = _0x142b80['content'], _0x158441['dataset']['id'] = _0x142b80['id'], _0x42821f['appendChild'](_0x158441); }); } } function _0xf33dc(_0xb2cffa) { const _0x5025a2 = _0x3abecc; if (_0x5025a2(0x644) !== 'zJOtp') { const _0x506561 = _0x579858[_0x5025a2(0x2b2)]['find'](_0x425f62 => _0x425f62['id'] === _0xc73aef); if (!_0x506561) return; _0x4c353a[_0x5025a2(0x324)] = _0x5025a2(0x711), _0x5f540d['value'] = _0x506561['id'], _0x5aca47['value'] = _0x506561[_0x5025a2(0x420)], _0x4ed632['value'] = _0x506561[_0x5025a2(0x22e)], _0x44b459[_0x5025a2(0xb56)][_0x5025a2(0x993)] = 'block', _0x506561[_0x5025a2(0x8e7)][_0x5025a2(0xb5e)](_0x4e4689 => { const _0x789088 = _0x5025a2, _0x249818 = _0x338d22[_0x789088(0x50b)](_0x789088(0x2ea) + _0x4e4689); if (_0x249818) _0x249818[_0x789088(0x71e)] = !![]; }); } else document[_0x5025a2(0x392)](_0x5025a2(0x309))[_0x5025a2(0x324)] = '为\x20' + _0xb2cffa + _0x5025a2(0xa38), document[_0x5025a2(0x392)]('event-content-input')[_0x5025a2(0x60e)] = '', document['getElementById']('event-type-todo')[_0x5025a2(0x71e)] = !![], document[_0x5025a2(0x392)](_0x5025a2(0xbfc))['classList'][_0x5025a2(0x6ec)](_0x5025a2(0x3a9)), document[_0x5025a2(0x392)]('event-content-input')['focus'](); } function _0x13635c() { const _0x2255b9 = _0x3abecc; if ('Oehqd' === 'Oehqd') { const _0x33be4f = document[_0x2255b9(0x392)]('event-content-input')[_0x2255b9(0x60e)][_0x2255b9(0x8bb)](), _0x3a45db = document[_0x2255b9(0x50b)](_0x2255b9(0x79f))[_0x2255b9(0x60e)]; if (!_0x33be4f) { if ('ckitF' === _0x2255b9(0x433)) { _0x18c07b(_0x2255b9(0x65b)); return; } else { _0x414b57[_0x2255b9(0x60e)] = _0x2255b9(0x69d); return; } } const _0x58a5d3 = _0x2e4b8c[_0x2255b9(0x89d)][_0x2255b9(0x69e)](_0x5a5a0e => _0x5a5a0e['id'] === _0x2e4b8c[_0x2255b9(0x789)]); if (!_0x58a5d3) { if (_0x2255b9(0x378) === _0x2255b9(0x53c)) { const _0x48c85c = { 'id': 'circle_' + _0x1bdc72[_0x2255b9(0x9b4)](), 'name': _0x4328f2, 'boundUserProfileId': _0x16cda1, 'memberCharacterIds': _0x1acbc6, 'posts': [] }; _0x5a1310[_0x2255b9(0x2b2)][_0x2255b9(0x7e4)](_0x48c85c); } else { _0x18c07b('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } } _0x2e4b8c[_0x2255b9(0x6a6)][_0x2255b9(0x7e4)]({ 'id': 'event_' + Date[_0x2255b9(0x9b4)](), 'date': _0x5595c8[_0x2255b9(0xaff)], 'type': _0x3a45db, 'content': _0x33be4f, 'userId': _0x58a5d3['id'] }), _0x5a3c71(), _0x860c97(), _0x4b2288(), _0x1e972b(), document[_0x2255b9(0x392)](_0x2255b9(0xbfc))[_0x2255b9(0x42c)]['remove'](_0x2255b9(0x3a9)); } else _0x304086(![]), _0x4bc3ad[_0x2255b9(0xa4c)][_0x2255b9(0x60e)] = ''; } function _0x4b2288() { const _0x869412 = _0x3abecc, _0x2a3c51 = document[_0x869412(0x392)](_0x869412(0x8a4)), _0x133744 = document[_0x869412(0x392)](_0x869412(0xb9c)), _0x214e08 = new Date(); _0x214e08[_0x869412(0x3f5)](0x0, 0x0, 0x0, 0x0); const _0x1f98cb = _0x2e4b8c[_0x869412(0x6a6)][_0x869412(0x742)](_0x8a4781 => _0x8a4781[_0x869412(0x875)] === 'important' && new Date(_0x8a4781[_0x869412(0x215)] + _0x869412(0xa36)) >= _0x214e08)[_0x869412(0x474)]((_0x5461e6, _0x57ac65) => new Date(_0x5461e6[_0x869412(0x215)]) - new Date(_0x57ac65['date'])); if (_0x1f98cb[_0x869412(0x6f2)] > 0x0) { if (_0x869412(0xbe4) !== _0x869412(0xbe4)) _0x502b80[_0x869412(0x25d)] && (_0x7146c2['linkedWorldBookIds'] = _0x2bbdb2['linkedWorldBookIds'][_0x869412(0x742)](_0x905142 => _0x905142 !== _0x4b69e9)); else { const _0xaf48c4 = _0x1f98cb[0x0], _0x25871a = new Date(_0xaf48c4[_0x869412(0x215)] + _0x869412(0xa36)), _0x44023e = _0x25871a - _0x214e08, _0x334d3b = Math[_0x869412(0xa58)](_0x44023e / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2a3c51[_0x869412(0x324)] = _0x869412(0x402) + _0xaf48c4[_0x869412(0xa19)] + '」', _0x133744[_0x869412(0x2c9)] = _0x869412(0xb4b) + _0x334d3b + '</span><span\x20class=\x22unit\x22>天</span>'; } } else _0x2a3c51[_0x869412(0x324)] = _0x869412(0x70a), _0x133744['innerHTML'] = _0x869412(0xa89); } function _0x40e39e() { const _0x136916 = _0x3abecc; if (_0x136916(0x3dc) !== 'ahTBR') { const _0x3ca14a = document[_0x136916(0x392)](_0x136916(0x8e3)); _0x3ca14a[_0x136916(0x2c9)] = ''; if (_0x2e4b8c[_0x136916(0x89d)]['length'] === 0x0) { _0x3ca14a[_0x136916(0x2c9)] = _0x136916(0xa08); return; } _0x2e4b8c[_0x136916(0x89d)][_0x136916(0xb5e)](_0x21e30c => { const _0x1cb36a = _0x136916; if (_0x1cb36a(0x863) !== 'XQweH') { const _0x486f53 = document[_0x1cb36a(0x92e)](_0x1cb36a(0x63a)); _0x486f53[_0x1cb36a(0x894)] = _0x1cb36a(0x984), _0x486f53[_0x1cb36a(0x641)]['id'] = _0x21e30c['id']; const _0x3d8d36 = _0x21e30c['id'] === _0x2e4b8c['activeUserProfileId'] ? '\x20(当前)' : ''; _0x486f53[_0x1cb36a(0x2c9)] = _0x1cb36a(0xc37) + (_0x21e30c[_0x1cb36a(0x58d)] || _0x3efbf6) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x21e30c['name'] + _0x3d8d36 + _0x1cb36a(0x4d4) + _0x21e30c[_0x1cb36a(0x5cd)]['substring'](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x486f53[_0x1cb36a(0xabf)](_0x1cb36a(0x4b9), () => _0x308677(_0x21e30c['id'])), _0x3ca14a[_0x1cb36a(0x594)](_0x486f53); } else _0x2d63f4[_0x1cb36a(0xb56)][_0x1cb36a(0x993)] = 'none'; }); } else { const _0x119a21 = [], _0x366756 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x1f7cfe; while ((_0x1f7cfe = _0x366756['exec'](_0x593f28)) !== null) { const _0x3a16f8 = _0x1f7cfe[0x1]['replace'](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x136916(0x8bb)](); if (_0x3a16f8) _0x119a21[_0x136916(0x7e4)](_0x3a16f8); } if (_0x119a21[_0x136916(0x6f2)]) return _0x119a21[_0x136916(0x796)](_0x1c0c9e)['slice'](0x0, 0x9); } } function _0x308677(_0x4d2ddd = null) { const _0x945b73 = _0x3abecc; _0x2bd982(_0x945b73(0x312), _0x945b73(0x660)); const _0x4771fd = document[_0x945b73(0x392)](_0x945b73(0xa60)), _0x4680e7 = document[_0x945b73(0x392)]('user-avatar-preview'); _0x4680e7['style'][_0x945b73(0xb85)] = '', delete _0x4680e7['dataset'][_0x945b73(0x4ec)]; if (_0x4d2ddd) { if (_0x945b73(0x320) !== _0x945b73(0x510)) { const _0x17efa9 = _0x2e4b8c['userProfiles'][_0x945b73(0x69e)](_0x246683 => _0x246683['id'] === _0x4d2ddd); if (!_0x17efa9) return; document[_0x945b73(0x392)](_0x945b73(0x4de))['value'] = _0x17efa9['id'], document['getElementById']('user-profile-edit-title')[_0x945b73(0x324)] = _0x945b73(0xa77), document['getElementById'](_0x945b73(0x484))[_0x945b73(0x60e)] = _0x17efa9['name'], _0x17efa9[_0x945b73(0x58d)] ? _0x4680e7[_0x945b73(0xb56)]['backgroundImage'] = 'url(\x27' + _0x17efa9[_0x945b73(0x58d)] + '\x27)' : _0x4680e7[_0x945b73(0xb56)][_0x945b73(0xb85)] = _0x945b73(0x24b) + _0x3efbf6 + '\x27)', document[_0x945b73(0x392)](_0x945b73(0x1fc))[_0x945b73(0x60e)] = _0x17efa9[_0x945b73(0x5cd)], _0x4771fd['style'][_0x945b73(0x993)] = _0x17efa9['id'] === _0x2e4b8c[_0x945b73(0x789)] ? 'none' : _0x945b73(0x94c), document['getElementById'](_0x945b73(0xbfd))[_0x945b73(0xb56)][_0x945b73(0x993)] = 'block'; } else _0x49be24['appendChild'](_0x1de34f), _0x2d7815['appendChild'](_0x32b141); } else { if (_0x945b73(0x212) === _0x945b73(0x7f4)) { const _0x275191 = _0x1815f4[_0x945b73(0x686)](/:\s(.+)/); if (_0x275191['length'] > 0x1) { const _0x3e1eb6 = _0x275191[0x0][_0x945b73(0x8bb)](), _0x52cc68 = _0x275191[0x1][_0x945b73(0x8bb)]()[_0x945b73(0x8d5)](/^"|"$/g, ''); _0x13de6a[_0x3e1eb6] = _0x52cc68; } } else document['getElementById'](_0x945b73(0x4de))[_0x945b73(0x60e)] = '', document['getElementById']('user-profile-edit-title')['textContent'] = _0x945b73(0x28b), document[_0x945b73(0x392)](_0x945b73(0x484))[_0x945b73(0x60e)] = _0x945b73(0x7b5) + (_0x2e4b8c['userProfiles'][_0x945b73(0x6f2)] + 0x1), _0x4680e7[_0x945b73(0xb56)][_0x945b73(0xb85)] = _0x945b73(0x24b) + _0x3efbf6 + '\x27)', document[_0x945b73(0x392)](_0x945b73(0x1fc))[_0x945b73(0x60e)] = '', _0x4771fd[_0x945b73(0xb56)][_0x945b73(0x993)] = 'none', document[_0x945b73(0x392)](_0x945b73(0xbfd))[_0x945b73(0xb56)]['display'] = _0x945b73(0x3a4); } } function _0x2a26c9() { const _0x3dc22c = _0x3abecc, _0x2d864c = document['getElementById'](_0x3dc22c(0x4de))[_0x3dc22c(0x60e)], _0x2cef37 = document['getElementById'](_0x3dc22c(0x819)), _0x356f5e = { 'name': document['getElementById']('user-name')[_0x3dc22c(0x60e)]['trim'](), 'persona': document[_0x3dc22c(0x392)](_0x3dc22c(0x1fc))[_0x3dc22c(0x60e)][_0x3dc22c(0x8bb)](), 'avatar': _0x2e4b8c[_0x3dc22c(0x89d)]['find'](_0x5d1b7c => _0x5d1b7c['id'] === _0x2d864c)?.['avatar'] || _0x2cef37[_0x3dc22c(0xb56)]['backgroundImage'][_0x3dc22c(0x43d)](0x5, -0x2)[_0x3dc22c(0x8d5)](/'/g, '') || _0x3efbf6 }; _0x2cef37[_0x3dc22c(0x641)][_0x3dc22c(0x4ec)] && (_0x356f5e[_0x3dc22c(0x58d)] = _0x2cef37['dataset'][_0x3dc22c(0x4ec)], delete _0x2cef37[_0x3dc22c(0x641)][_0x3dc22c(0x4ec)]); if (!_0x356f5e[_0x3dc22c(0x420)]) { if ('zARtt' !== _0x3dc22c(0x32c)) { _0x18c07b(_0x3dc22c(0x8b4)); return; } else _0x191ddf(![]); } if (_0x2d864c) { if (_0x3dc22c(0x746) === _0x3dc22c(0x416)) return ''; else { const _0x3823f1 = _0x2e4b8c[_0x3dc22c(0x89d)][_0x3dc22c(0x69e)](_0x50bf3b => _0x50bf3b['id'] === _0x2d864c); if (_0x3823f1) Object['assign'](_0x3823f1, _0x356f5e); } } else { const _0x4ce2c1 = { 'id': _0x3dc22c(0x344) + Date[_0x3dc22c(0x9b4)](), ..._0x356f5e }; _0x2e4b8c[_0x3dc22c(0x89d)][_0x3dc22c(0x7e4)](_0x4ce2c1); if (!_0x2e4b8c[_0x3dc22c(0x789)]) { if (_0x3dc22c(0x426) === _0x3dc22c(0x2d4)) { _0x2abc5c(); const _0x5d112f = _0x5e2223[_0x3dc22c(0x2b2)][_0x3dc22c(0x69e)](_0x5a5165 => _0x5a5165['id'] === _0x4d4e67); if (!_0x5d112f) return; _0x5bba64[_0x3dc22c(0xbb0)] = _0x139f82, _0x32de40(), _0x44cce1['getElementById']('friend-circle-title')[_0x3dc22c(0x324)] = _0x5d112f[_0x3dc22c(0x420)], _0x1d2adc(), _0x5ed93e(_0x3dc22c(0xc2d), _0x3dc22c(0xa2c)), _0x1dc44f(); } else _0x2e4b8c[_0x3dc22c(0x789)] = _0x4ce2c1['id']; } } _0x5a3c71(), _0x18c07b(_0x3dc22c(0x537)), _0x40e39e(), _0x2bd982('userProfileList', _0x3dc22c(0x312)); } async function _0x440024() { const _0x4e1fdd = _0x3abecc; if (_0x4e1fdd(0x201) === _0x4e1fdd(0x201)) { const _0x5be41f = document[_0x4e1fdd(0x392)](_0x4e1fdd(0x4de))['value']; if (!_0x5be41f) return; if (_0x2e4b8c['userProfiles'][_0x4e1fdd(0x6f2)] <= 0x1) { _0x18c07b(_0x4e1fdd(0x5e4)); return; } const _0x4191af = await _0x4b635a('确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。'); _0x4191af && (_0x2e4b8c[_0x4e1fdd(0x89d)] = _0x2e4b8c[_0x4e1fdd(0x89d)][_0x4e1fdd(0x742)](_0x471bb4 => _0x471bb4['id'] !== _0x5be41f), _0x2e4b8c[_0x4e1fdd(0x789)] === _0x5be41f && (_0x2e4b8c[_0x4e1fdd(0x789)] = _0x2e4b8c[_0x4e1fdd(0x89d)][0x0]['id']), _0x2e4b8c['chats'][_0x4e1fdd(0xb5e)](_0xb916da => { const _0x49c78e = _0x4e1fdd; _0xb916da[_0x49c78e(0x22e)] === _0x5be41f && (_0xb916da[_0x49c78e(0x22e)] = _0x2e4b8c[_0x49c78e(0x789)]); }), _0x5a3c71(), _0x18c07b(_0x4e1fdd(0x6a8)), _0x40e39e(), _0x2bd982(_0x4e1fdd(0x660), _0x4e1fdd(0x312))); } else { const _0x57ded8 = _0x3d84ee[_0x4e1fdd(0x392)](_0x4e1fdd(0x7c8)), _0x24810b = _0x362a2e['getElementById'](_0x4e1fdd(0x3bf)), _0x13296a = _0x4d9387['querySelector']('#meeting-view-screen\x20.chat-input-area'); _0x52470f[_0x4e1fdd(0x22b)] === 'galgame' ? (_0x57ded8[_0x4e1fdd(0xb56)][_0x4e1fdd(0x993)] = 'none', _0x24810b[_0x4e1fdd(0xb56)]['display'] = 'block') : (_0x57ded8['style']['display'] = _0x4e1fdd(0x94c), _0x24810b[_0x4e1fdd(0xb56)][_0x4e1fdd(0x993)] = _0x4e1fdd(0x3a4)), _0x13296a[_0x4e1fdd(0xb56)][_0x4e1fdd(0x993)] = 'block'; } } function _0x5b04d8() { const _0x3531e7 = _0x3abecc, _0x360c8d = document[_0x3531e7(0x392)](_0x3531e7(0x28d)); _0x360c8d[_0x3531e7(0x2c9)] = ''; if (_0x2e4b8c[_0x3531e7(0x285)][_0x3531e7(0x6f2)] === 0x0) { if (_0x3531e7(0x2ac) === _0x3531e7(0x2ac)) { _0x360c8d[_0x3531e7(0x2c9)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>'; return; } else _0x1fccd1['error'](_0x3531e7(0x520), _0x17e1b5), _0x4f645b(_0x3531e7(0x923) + _0x3e5002[_0x3531e7(0x542)]); } _0x2e4b8c[_0x3531e7(0x285)][_0x3531e7(0xb5e)](_0x90c012 => { const _0x2d0cdd = _0x3531e7, _0x156dbe = document[_0x2d0cdd(0x92e)](_0x2d0cdd(0x63a)); _0x156dbe['className'] = 'world-book-item', _0x156dbe[_0x2d0cdd(0x641)]['id'] = _0x90c012['id'], _0x156dbe[_0x2d0cdd(0x2c9)] = _0x2d0cdd(0x822) + _0x90c012['name'] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x90c012[_0x2d0cdd(0xa19)]['substring'](0x0, 0x64) + _0x2d0cdd(0x7fd), _0x156dbe[_0x2d0cdd(0xabf)]('click', () => _0x477d6c(_0x90c012['id'])), _0x360c8d[_0x2d0cdd(0x594)](_0x156dbe); }); } function _0x477d6c(_0x6505c4 = null) { const _0x1b0b17 = _0x3abecc; _0x2bd982(_0x1b0b17(0x94f), 'worldBook'); if (_0x6505c4) { const _0x26864a = _0x2e4b8c[_0x1b0b17(0x285)][_0x1b0b17(0x69e)](_0x2e4f65 => _0x2e4f65['id'] === _0x6505c4); if (!_0x26864a) return; document[_0x1b0b17(0x392)](_0x1b0b17(0x358))[_0x1b0b17(0x60e)] = _0x26864a['id'], document['getElementById'](_0x1b0b17(0x5aa))[_0x1b0b17(0x324)] = _0x1b0b17(0x699), document[_0x1b0b17(0x392)]('world-book-edit-name')['value'] = _0x26864a[_0x1b0b17(0x420)], document[_0x1b0b17(0x392)]('world-book-edit-content')[_0x1b0b17(0x60e)] = _0x26864a['content']; } else document['getElementById'](_0x1b0b17(0x358))['value'] = '', document[_0x1b0b17(0x392)](_0x1b0b17(0x5aa))[_0x1b0b17(0x324)] = _0x1b0b17(0x630), document[_0x1b0b17(0x392)](_0x1b0b17(0x4fa))[_0x1b0b17(0x60e)] = '', document[_0x1b0b17(0x392)](_0x1b0b17(0xab2))[_0x1b0b17(0x60e)] = ''; } function _0x97decf() { const _0x1f75bc = _0x3abecc, _0x483e70 = document[_0x1f75bc(0x392)](_0x1f75bc(0x358))[_0x1f75bc(0x60e)], _0x45ec61 = document['getElementById'](_0x1f75bc(0x4fa))['value'][_0x1f75bc(0x8bb)](), _0x317a98 = document[_0x1f75bc(0x392)](_0x1f75bc(0xab2))[_0x1f75bc(0x60e)][_0x1f75bc(0x8bb)](); if (!_0x45ec61 || !_0x317a98) { if ('KOvpM' === _0x1f75bc(0x8f3)) _0x306db0(); else { _0x18c07b(_0x1f75bc(0x867)); return; } } if (_0x483e70) { if (_0x1f75bc(0x656) !== 'qsjgR') { const _0x1af9e0 = _0x2e4b8c[_0x1f75bc(0x285)][_0x1f75bc(0x69e)](_0x117f57 => _0x117f57['id'] === _0x483e70); if (_0x1af9e0) { if (_0x1f75bc(0x7eb) === _0x1f75bc(0x915)) { const _0x5a5f66 = _0x22edda[_0x1f75bc(0x92e)](_0x1f75bc(0x63a)); _0x5a5f66['className'] = _0x1f75bc(0x984), _0x5a5f66[_0x1f75bc(0x641)]['id'] = _0x3af9eb['id'], _0x5a5f66[_0x1f75bc(0x2c9)] = _0x1f75bc(0x822) + _0x5b8e1f[_0x1f75bc(0x420)] + _0x1f75bc(0x28a) + _0x461084[_0x1f75bc(0xa19)][_0x1f75bc(0x58c)](0x0, 0x64) + _0x1f75bc(0x7fd), _0x5a5f66['addEventListener']('click', () => _0xf9bda2(_0x42d7eb['id'])), _0x36849d[_0x1f75bc(0x594)](_0x5a5f66); } else _0x1af9e0[_0x1f75bc(0x420)] = _0x45ec61, _0x1af9e0[_0x1f75bc(0xa19)] = _0x317a98; } } else return _0xaf5985['reply'][_0x1f75bc(0x5e9)](_0x3d83e9 => typeof _0x3d83e9 === _0x1f75bc(0x41d) ? _0x3d83e9 : _0x3d83e9?.[_0x1f75bc(0xa19)])[_0x1f75bc(0x742)](_0x510f6b)['flatMap'](_0x254175); } else { const _0x1ce596 = { 'id': _0x1f75bc(0xb06) + Date[_0x1f75bc(0x9b4)](), 'name': _0x45ec61, 'content': _0x317a98 }; _0x2e4b8c[_0x1f75bc(0x285)]['push'](_0x1ce596); } _0x5a3c71(), _0x18c07b(_0x1f75bc(0xb88)), _0x5b04d8(), _0x2bd982(_0x1f75bc(0x69b), 'worldBookEditor'); } async function _0x5606cd() { const _0x3e1856 = _0x3abecc, _0x5353fa = document[_0x3e1856(0x392)]('editing-world-book-id')[_0x3e1856(0x60e)]; if (!_0x5353fa) return; const _0xe84439 = await _0x4b635a(_0x3e1856(0x35b)); _0xe84439 && (_0x2e4b8c[_0x3e1856(0x285)] = _0x2e4b8c[_0x3e1856(0x285)][_0x3e1856(0x742)](_0x4c560e => _0x4c560e['id'] !== _0x5353fa), _0x2e4b8c[_0x3e1856(0x404)][_0x3e1856(0xb5e)](_0x1cc451 => { const _0x173bfb = _0x3e1856; _0x173bfb(0x739) !== _0x173bfb(0x739) ? (_0x18cf9c['participantIds'][_0x173bfb(0xb5e)](_0x169985 => { const _0x1eca78 = _0x173bfb, _0x25f03e = _0x44bc03(_0x169985); if (_0x25f03e) { const _0x19860e = _0x549695[_0x1eca78(0x92e)]('option'); _0x19860e[_0x1eca78(0x60e)] = _0x25f03e['id'], _0x19860e[_0x1eca78(0x324)] = _0x25f03e[_0x1eca78(0x420)], _0x3fbc04[_0x1eca78(0x594)](_0x19860e); } }), _0x3640b5[_0x173bfb(0xb56)][_0x173bfb(0x993)] = 'block') : _0x1cc451[_0x173bfb(0x25d)] && (_0x1cc451[_0x173bfb(0x25d)] = _0x1cc451[_0x173bfb(0x25d)][_0x173bfb(0x742)](_0x5e1a1f => _0x5e1a1f !== _0x5353fa)); }), _0x5a3c71(), _0x18c07b(_0x3e1856(0x937)), _0x5b04d8(), _0x2bd982('worldBook', _0x3e1856(0x94f))); } function _0x1374bd() { const _0xa6407a = _0x3abecc; if (_0xa6407a(0x8e0) !== _0xa6407a(0x361)) { const _0x354c22 = document[_0xa6407a(0x392)](_0xa6407a(0x64e)), _0x50b113 = _0x354c22[_0xa6407a(0x9b8)](_0xa6407a(0x77f)), _0x46f23f = document['querySelector'](_0xa6407a(0x6a3)); if (_0x50b113[_0xa6407a(0x6f2)] === 0x0) _0xa6407a(0x25c) !== _0xa6407a(0x50f) ? _0x46f23f[_0xa6407a(0x324)] = _0xa6407a(0x572) : _0x3b25bc = _0xa6407a(0x5ab) + _0x2e78cb['name'] + _0xa6407a(0x3c4); else _0x50b113[_0xa6407a(0x6f2)] > 0x2 ? _0x46f23f['textContent'] = _0xa6407a(0x90a) + _0x50b113[_0xa6407a(0x6f2)] + '\x20项' : _0x46f23f['textContent'] = Array[_0xa6407a(0xbd4)](_0x50b113)[_0xa6407a(0x5e9)](_0x33ae87 => _0x33ae87['parentElement']['textContent'][_0xa6407a(0x8bb)]())[_0xa6407a(0x52b)]('、'); } else { const _0x368cf9 = _0x187aba[_0xa6407a(0x38c)](_0x2e741f), _0x4f33f8 = _0xa6407a(0x5b3), _0x5a5b0c = _0xa6407a(0x1e8) + _0x4f33f8 + _0xa6407a(0xbf1) + _0x368cf9 + '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x29f503['innerHTML'] = _0x5a5b0c, _0x2a6bc8[_0xa6407a(0x7d3)]['style']['setProperty'](_0xa6407a(0x7bf), '\x27' + _0x4f33f8 + '\x27'), _0x1ab16c[_0xa6407a(0x324)] = _0xa6407a(0x39b); } } async function _0x181fb3(_0x4ba6fd) { const _0x11bac2 = _0x3abecc; if (_0x11bac2(0x224) === _0x11bac2(0x26d)) _0x393bee[_0x11bac2(0x42c)][_0x11bac2(0xb26)](_0x11bac2(0x454)), _0xcfe42[_0x11bac2(0x42c)]['add'](_0x11bac2(0x454)), _0x2fee02(); else { const _0x79e885 = _0x2e4b8c['chats']['find'](_0x166df6 => _0x166df6['id'] === _0x4ba6fd); if (!_0x79e885 || _0x79e885[_0x11bac2(0x875)] !== _0x11bac2(0xacf)) return; document[_0x11bac2(0x392)](_0x11bac2(0x43e))[_0x11bac2(0x60e)] = _0x79e885['name'] || '', _0x4613dc(_0x11bac2(0x645)), document[_0x11bac2(0x392)](_0x11bac2(0x645))[_0x11bac2(0x60e)] = _0x79e885[_0x11bac2(0x22e)] || _0x2e4b8c[_0x11bac2(0x789)]; const _0x229569 = document[_0x11bac2(0x392)](_0x11bac2(0x5fb)); _0x229569[_0x11bac2(0x2c9)] = '', _0x2e4b8c['worldBooks'][_0x11bac2(0xb5e)](_0x6e460f => { const _0x43d497 = _0x11bac2, _0x1c6f4a = _0x79e885[_0x43d497(0x25d)]?.[_0x43d497(0x21d)](_0x6e460f['id']), _0x406d6b = document['createElement'](_0x43d497(0x235)); _0x406d6b['innerHTML'] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x6e460f['id'] + '\x22\x20' + (_0x1c6f4a ? _0x43d497(0x71e) : '') + '>\x20' + _0x6e460f[_0x43d497(0x420)], _0x229569[_0x43d497(0x594)](_0x406d6b); }), _0x4844ad(); const _0x5a8659 = document[_0x11bac2(0x392)](_0x11bac2(0x8b9)), _0x6db9b0 = document[_0x11bac2(0x392)](_0x11bac2(0x9d6)); _0x6db9b0['style'][_0x11bac2(0xb85)] = '', _0x1de353(_0x11bac2(0x99c) + _0x4ba6fd)['then'](_0x25213f => { const _0x538ee7 = _0x11bac2; _0x5a8659[_0x538ee7(0x84e)] = _0x25213f ? URL[_0x538ee7(0x38c)](_0x25213f) : _0x2be033; }), _0x1de353(_0x11bac2(0x6e7) + _0x4ba6fd)[_0x11bac2(0x54a)](_0x17c8ec => { const _0x1e231e = _0x11bac2; if (_0x17c8ec) _0x6db9b0[_0x1e231e(0xb56)][_0x1e231e(0xb85)] = 'url(\x27' + URL[_0x1e231e(0x38c)](_0x17c8ec) + '\x27)'; }), _0x2bd982(_0x11bac2(0x79a), 'chat'); } } async function _0x5838dc() { const _0x4cb4fd = _0x3abecc; if (_0x4cb4fd(0x568) !== 'cNEvr') _0x502f79[_0x4cb4fd(0x298)](_0x4f01fa); else { const _0x19d2f9 = _0x28f748(); if (!_0x19d2f9 || _0x19d2f9[_0x4cb4fd(0x875)] !== 'group') return; const _0xf88467 = document['getElementById'](_0x4cb4fd(0x43e))[_0x4cb4fd(0x60e)][_0x4cb4fd(0x8bb)](); if (!_0xf88467) { if (_0x4cb4fd(0x217) === _0x4cb4fd(0x217)) { _0x18c07b(_0x4cb4fd(0x53b)); return; } else { if (_0x24250d[_0x4cb4fd(0x624)]) return; const _0x484dab = _0x273795['diaryCurrentPage']; if (_0x484dab <= 0x0) return; _0x19191c[_0x4cb4fd(0x624)] = !![]; const _0x42ca09 = _0x484dab - 0x1, _0xe32eda = _0x7b4ba4['getElementById'](_0x4cb4fd(0x435) + _0x484dab), _0x59eade = _0x165372['getElementById'](_0x4cb4fd(0x435) + _0x42ca09); _0xe32eda && _0x59eade ? (_0x59eade[_0x4cb4fd(0x42c)]['add'](_0x4cb4fd(0x799)), _0xe32eda[_0x4cb4fd(0x42c)][_0x4cb4fd(0x6ec)](_0x4cb4fd(0x44e)), _0x59eade[_0x4cb4fd(0x42c)][_0x4cb4fd(0x6ec)](_0x4cb4fd(0x931)), _0x5205fc(() => { const _0x175d8d = _0x4cb4fd; _0xe32eda['classList'][_0x175d8d(0xb26)](_0x175d8d(0x931), _0x175d8d(0x44e)), _0x59eade[_0x175d8d(0x42c)][_0x175d8d(0xb26)]('is-entering-from-left'), _0xdaa999['diaryCurrentPage'] = _0x42ca09, _0xb9da1b(), _0xc81586[_0x175d8d(0x624)] = ![]; }, 0x2bc)) : _0x5c190d[_0x4cb4fd(0x624)] = ![]; } } _0x19d2f9[_0x4cb4fd(0x420)] = _0xf88467; const _0x3acb3a = document[_0x4cb4fd(0x9b8)](_0x4cb4fd(0x494)); _0x19d2f9[_0x4cb4fd(0x25d)] = Array[_0x4cb4fd(0xbd4)](_0x3acb3a)[_0x4cb4fd(0x5e9)](_0x279d15 => _0x279d15[_0x4cb4fd(0x60e)]), _0x19d2f9[_0x4cb4fd(0x22e)] = document[_0x4cb4fd(0x392)]('group-settings-bind-user')['value']; const _0x38efc3 = document[_0x4cb4fd(0x392)](_0x4cb4fd(0x4a2))['files'][0x0], _0x4157b9 = document[_0x4cb4fd(0x392)](_0x4cb4fd(0x8fa))[_0x4cb4fd(0x5a1)][0x0]; if (_0x38efc3) await _0x3b613b(_0x4cb4fd(0x99c) + _0x19d2f9['id'], _0x38efc3); if (_0x4157b9) await _0x3b613b(_0x4cb4fd(0x6e7) + _0x19d2f9['id'], _0x4157b9); _0x5a3c71(), _0x29d35e(), await _0x4adb3c(), _0x18c07b(_0x4cb4fd(0x35d)), _0x2bd982(_0x4cb4fd(0x4fb), _0x4cb4fd(0x79a)); } } function _0x4844ad() { const _0x118de9 = _0x3abecc; if ('VnpuX' !== _0x118de9(0x61f)) { const _0x696300 = document['getElementById'](_0x118de9(0x5fb)), _0x3dd75b = _0x696300[_0x118de9(0x9b8)]('input:checked'), _0xaa359d = document['querySelector'](_0x118de9(0x706)); if (_0x3dd75b[_0x118de9(0x6f2)] === 0x0) { if ('fCxHK' === _0x118de9(0x972)) _0xaa359d[_0x118de9(0x324)] = _0x118de9(0x572); else { const _0x31cc0a = _0x573ec9[_0x5ccbf4[_0x118de9(0x6f2)] - 0x1]; (!_0x7e3ec7 || _0x31cc0a[_0x118de9(0x518)] > _0x388c0e[_0x118de9(0x518)]) && (_0x3c62d6 = _0x31cc0a); } } else _0x3dd75b['length'] > 0x2 ? _0xaa359d[_0x118de9(0x324)] = _0x118de9(0x90a) + _0x3dd75b['length'] + '\x20项' : _0xaa359d[_0x118de9(0x324)] = Array['from'](_0x3dd75b)[_0x118de9(0x5e9)](_0x4571a0 => _0x4571a0['parentElement'][_0x118de9(0x324)][_0x118de9(0x8bb)]())[_0x118de9(0x52b)]('、'); } else return { 'type': _0x118de9(0xbbc), 'content': _0x4c6734 }; } async function _0x3e1746() { const _0x2a938f = _0x3abecc; if ('RTzzx' === _0x2a938f(0x9a6)) { const _0x3a7973 = _0x5ab63c[_0x2a938f(0xa4c)][_0x2a938f(0x5a1)][0x0]; if (!_0x3a7973) return; const _0x388839 = _0x2bc172[_0x2a938f(0x38c)](_0x3a7973); _0x22471f[_0x2a938f(0xb56)][_0x2a938f(0xb85)] = _0x2a938f(0x24b) + _0x388839 + '\x27)'; } else { const _0x65219 = _0x28f748(), _0x868f21 = (_0x65219?.[_0x2a938f(0xa2a)] || [])['map'](_0x2653c6)['filter'](Boolean), _0x2b2e22 = _0x23edb1(_0x65219['id']); if (!_0x65219 || _0x65219['type'] !== _0x2a938f(0xacf) || _0x868f21[_0x2a938f(0x6f2)] < 0x2) return null; const _0x17de6f = _0x65219[_0x2a938f(0x25d)] && _0x65219['linkedWorldBookIds']['length'] > 0x0 ? _0x2a938f(0x681) + _0x65219[_0x2a938f(0x25d)][_0x2a938f(0x5e9)](_0x4feb22 => _0x2e4b8c[_0x2a938f(0x285)][_0x2a938f(0x69e)](_0x2c072b => _0x2c072b['id'] === _0x4feb22))[_0x2a938f(0x742)](Boolean)[_0x2a938f(0x5e9)](_0x1e7761 => _0x2a938f(0x6b0) + _0x1e7761[_0x2a938f(0x420)] + '\x0a' + _0x1e7761['content'])[_0x2a938f(0x52b)]('') : '', _0x18c2fa = _0x2b2e22['persona'] ? _0x2a938f(0x493) + _0x2b2e22[_0x2a938f(0x420)] + '”的补充信息\x0a' + _0x2b2e22[_0x2a938f(0x5cd)] : ''; let _0x3fad7e = ''; const _0x33ef56 = new Date(), _0x2c6eb8 = _0x2e4b8c[_0x2a938f(0x2c8)]['at'](-0x1); _0x3fad7e += _0x2a938f(0xa12) + _0x33ef56['toLocaleString'](_0x2a938f(0x591), { 'dateStyle': 'full', 'timeStyle': _0x2a938f(0x303) }); if (_0x2c6eb8) { if (_0x2a938f(0xb04) === 'EQzIg') { const _0x1fed9e = new Date(_0x2c6eb8[_0x2a938f(0x518)]), _0x18e611 = Math['floor']((_0x33ef56 - _0x1fed9e) / (0x3e8 * 0x3c)); if (_0x18e611 < 0x5) _0x3fad7e += _0x2a938f(0x853); else { if (_0x18e611 < 0x78) _0x3fad7e += _0x2a938f(0x8d7) + _0x18e611 + _0x2a938f(0x8f0); else { if (_0x2a938f(0x3cc) === _0x2a938f(0x7c4)) _0xb7cd83['appendChild'](_0x5bd831), _0x20b8f1[_0x2a938f(0x594)](_0x3e250c); else { const _0x20db96 = Math['floor'](_0x18e611 / 0x3c); if (_0x20db96 < 0x30) _0x3fad7e += _0x2a938f(0x8d7) + _0x20db96 + _0x2a938f(0x3e7); else _0x3fad7e += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x2a938f(0x552)](_0x20db96 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } } else _0x1e6787[_0x2a938f(0x789)] = _0x5b2fd6, _0xfbb8a2(), _0x3174dd('已设为当前用户！'), _0x897685(), _0x180ab1['getElementById']('set-active-user-button')[_0x2a938f(0xb56)]['display'] = 'none'; } else _0x3fad7e += _0x2a938f(0x64d); const _0x1b973a = [..._0x2e4b8c[_0x2a938f(0x2c8)]][_0x2a938f(0x40d)]()[_0x2a938f(0x69e)](_0x46733a => _0x46733a[_0x2a938f(0x253)] === 'user')?.[_0x2a938f(0xa19)] || '', _0x359468 = _0x4ccd97(_0x65219, _0x1b973a), _0x19faf8 = _0x2e4b8c[_0x2a938f(0x2c8)][_0x2a938f(0x43d)](-0x78), _0x2553b9 = _0x216772[_0x2a938f(0x5e9)](_0x784baf => _0x784baf[_0x2a938f(0x420)]), _0x49c32c = _0x4bf621(), _0x23640c = _0x868f21[_0x2a938f(0x5e9)](_0xbd26a1 => { const _0x177f40 = _0x2a938f; if ('EVXwX' === _0x177f40(0x690)) _0x5c34c2['open']('https://xhslink.com/m/5IgC1rniI2I', _0x177f40(0xb91)); else { const { omniText: _0x57edc4 } = _0x42b275(_0xbd26a1['id'], _0x65219['id']), _0x133c17 = _0x44a6ac(_0xbd26a1['id']), _0x165f81 = _0xbd26a1[_0x177f40(0x25d)] && _0xbd26a1[_0x177f40(0x25d)][_0x177f40(0x6f2)] > 0x0 ? _0x177f40(0xa28) + _0xbd26a1['name'] + _0x177f40(0x4d5) + _0xbd26a1[_0x177f40(0x25d)][_0x177f40(0x5e9)](_0x4a16a8 => _0x2e4b8c[_0x177f40(0x285)]['find'](_0x5161c5 => _0x5161c5['id'] === _0x4a16a8))['filter'](Boolean)[_0x177f40(0x5e9)](_0x376123 => _0x177f40(0x83b) + _0x376123['name'] + '\x0a' + _0x376123['content'])[_0x177f40(0x52b)]('') : ''; let _0x18a616 = _0x177f40(0xbcc) + _0xbd26a1['name'] + _0x177f40(0xab1); const _0x2544bd = _0x367a29(_0xbd26a1['id']), _0x1a65d6 = new Date(); if (_0x2544bd) { const _0x18a06a = new Date(_0x2544bd[_0x177f40(0x518)]); _0x18a616 += _0x177f40(0x759) + _0x2b2e22[_0x177f40(0x420)] + _0x177f40(0xbf5) + _0x593dd0(_0x18a06a) + '\x0a'; } else _0x18a616 += _0x177f40(0x888) + _0x2b2e22['name'] + _0x177f40(0x84d); return { 'id': _0xbd26a1['id'], 'name': _0xbd26a1[_0x177f40(0x420)], 'persona': _0xbd26a1['persona'] || _0x177f40(0xb64), 'memory': _0x57edc4 + _0x133c17 + _0x165f81 + _0x18a616 }; } }), _0x45b6f4 = 0x5, _0x32bc5a = 0xc, _0x4cd76b = _0x2a938f(0x27d)[_0x2a938f(0x8bb)](), _0x2e7c25 = { 'instruction': (_0x2a938f(0xb62) + (_0x65219['name'] || '群聊') + _0x2a938f(0x602) + (_0x2b2e22['name'] || '用户') + _0x2a938f(0x335) + _0x45b6f4 + '\x20到\x20' + _0x32bc5a + _0x2a938f(0x452) + (_0x2b2e22[_0x2a938f(0x420)] || '用户') + '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a' + _0x3fad7e + '\x20\x0a' + _0x18c2fa + '\x0a' + _0x17de6f + _0x2a938f(0x2c7) + _0x49c32c + '\x0a')[_0x2a938f(0x8bb)](), 'personas': _0x23640c, 'mentioned': _0x359468 ? { 'id': _0x359468['id'], 'name': _0x359468[_0x2a938f(0x420)] } : null, 'stickerList': _0x2553b9 }, _0x39abc4 = { 'type': _0x2a938f(0x29f), 'properties': { 'events': { 'type': _0x2a938f(0x653), 'items': { 'type': _0x2a938f(0x29f), 'required': [_0x2a938f(0x662), 'kind'], 'properties': { 'senderId': { 'type': _0x2a938f(0x41d) }, 'kind': { 'type': _0x2a938f(0x41d), 'enum': ['text', _0x2a938f(0x4c3), _0x2a938f(0xc2d)] }, 'content': { 'type': _0x2a938f(0x41d) }, 'sticker': { 'type': 'string' }, 'songName': { 'type': _0x2a938f(0x41d) }, 'artist': { 'type': _0x2a938f(0x41d) } } } } }, 'required': [_0x2a938f(0x850)] }, _0x13e453 = [{ 'role': 'system', 'content': _0x4cd76b }]; for (const _0x4978fd of _0x19faf8) { const _0x1f9b84 = _0x4978fd['role'] === 'ai' || _0x4978fd[_0x2a938f(0x253)] === _0x2a938f(0x880) ? _0x2a938f(0x880) : _0x2a938f(0x5c3); let _0x37c336 = { 'role': _0x1f9b84, 'content': _0x4978fd[_0x2a938f(0xa19)] }, _0x455db2 = !!_0x4978fd[_0x2a938f(0xa19)], _0x443b08 = null; if (_0x4978fd['image']) _0x443b08 = _0x4978fd['image']; else { if (_0x4978fd[_0x2a938f(0xb1a)]) try { if (_0x2a938f(0x967) === 'BQhce') { const _0x38d6ac = await _0x1de353(_0x4978fd['imageId']); if (_0x38d6ac) _0x443b08 = await _0x5a357c(_0x38d6ac); } else _0x3da534(_0x8cb8d4); } catch (_0x41053e) { _0x2a938f(0xab6) === _0x2a938f(0xb66) ? _0x185f5d[_0x2a938f(0x392)]('user-post-image-input')[_0x2a938f(0x4b9)]() : console[_0x2a938f(0x5b1)](_0x2a938f(0x4b3), _0x41053e); } } _0x443b08 && (_0x37c336[_0x2a938f(0x3f7)] = _0x443b08, _0x455db2 = !![]); if (_0x455db2) _0x13e453['push'](_0x37c336); } _0x13e453[_0x2a938f(0x7e4)]({ 'role': _0x2a938f(0x5c3), 'content': _0x2a938f(0x489) + JSON[_0x2a938f(0x2bf)](_0x39abc4) + '\x0a\x0aINPUT:\x0a' + JSON[_0x2a938f(0x2bf)](_0x2e7c25) }); try { const _0xae033a = await _0x45b854(_0x13e453, { 'json': !![] }); if (!_0xae033a) return null; let _0xece7d2 = _0xae033a[_0x2a938f(0x8bb)](); const _0x5236e5 = _0xece7d2[_0x2a938f(0xaab)](/```json([\s\S]*?)```/i); if (_0x5236e5) _0xece7d2 = _0x5236e5[0x1][_0x2a938f(0x8bb)](); _0xece7d2 = _0x54f8f3(_0xece7d2); let _0x499bbc = null; try { 'xDNKn' !== _0x2a938f(0x627) ? _0x499bbc = JSON['parse'](_0xece7d2) : (_0x5dcebf = _0x2a938f(0xa1e), _0x4e85dc = _0x2a938f(0x615) + _0xbc2b24 + '\x0a```'); } catch (_0x3e2245) { console['error'](_0x2a938f(0x436), _0x3e2245), console[_0x2a938f(0x5b1)]('收到的原始、有问题的文本:', _0xece7d2); } if (!_0x499bbc || !Array[_0x2a938f(0x74a)](_0x499bbc[_0x2a938f(0x850)])) return null; return _0x499bbc = _0x59046e(_0x499bbc, _0x868f21, _0x2553b9), _0x499bbc[_0x2a938f(0x850)] = _0x499bbc['events']['slice'](0x0, _0x32bc5a), _0x499bbc[_0x2a938f(0x850)][_0x2a938f(0x6f2)] ? _0x499bbc : null; } catch (_0x2e3554) { return _0x2e3554[_0x2a938f(0x420)] !== _0x2a938f(0xba1) && (_0x2a938f(0xae8) !== 'PCZqU' ? (_0x2655ed[_0x2a938f(0x420)] = _0x1ac2b7[_0x2a938f(0x8bb)](), _0x264225(), _0x3c973e(), _0x45ecd7(), _0x485daf(_0x2a938f(0x73a) + _0x198608[_0x2a938f(0x420)] + '\x22。')) : console[_0x2a938f(0x5b1)](_0x2a938f(0x44b), _0x2e3554)), null; } } } function _0x9d3834() { const _0x483586 = _0x3abecc; if ('wsRDz' === 'wsRDz') { const _0x37d520 = document[_0x483586(0x392)](_0x483586(0xa4a)); _0x37d520[_0x483586(0x2c9)] = ''; if (_0x2e4b8c['friendCircles'][_0x483586(0x6f2)] === 0x0) { _0x37d520[_0x483586(0x2c9)] = _0x483586(0xadc); return; } _0x2e4b8c[_0x483586(0x2b2)][_0x483586(0xb5e)](_0x2c7d89 => { const _0x590470 = _0x483586, _0x90fc1a = _0x2e4b8c[_0x590470(0x89d)][_0x590470(0x69e)](_0x2515e2 => _0x2515e2['id'] === _0x2c7d89[_0x590470(0x22e)]) || { 'name': _0x590470(0x430) }, _0x3dc2ac = document['createElement'](_0x590470(0x63a)); _0x3dc2ac[_0x590470(0x894)] = _0x590470(0x984), _0x3dc2ac['dataset']['id'] = _0x2c7d89['id'], _0x3dc2ac[_0x590470(0x2c9)] = _0x590470(0x822) + _0x2c7d89[_0x590470(0x420)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x90fc1a[_0x590470(0x420)] + _0x590470(0x531) + _0x2c7d89[_0x590470(0x8e7)]['length'] + _0x590470(0x3d7), _0x3dc2ac['addEventListener'](_0x590470(0x4b9), () => _0x46259e(_0x2c7d89['id'])), _0x37d520[_0x590470(0x594)](_0x3dc2ac); }); } else { const _0x466079 = _0x1033be(_0x3d81f8['activeChatId']); _0x5d1e69 = _0x466079['avatar'] || _0x2b28c8; const _0x3e859f = _0x206d5e(_0xe556d2?.['participantIds'][0x0]); _0x3e859f && (_0x3c288e = _0x3e859f[_0x483586(0x91f)] || ''); } } function _0x370233(_0x22064a = null) { const _0x20f76e = _0x3abecc; if (_0x20f76e(0x666) === _0x20f76e(0x7cf)) _0x386d78['warn'](_0x20f76e(0x7f5), _0x56da43); else { const _0x2471e8 = document['getElementById']('friend-circle-edit-name'), _0x17107c = document['getElementById'](_0x20f76e(0x949)), _0x3e7e7a = document[_0x20f76e(0x392)](_0x20f76e(0xa29)), _0x234d1a = document['getElementById'](_0x20f76e(0x9e7)), _0x1fe0dd = document[_0x20f76e(0x392)]('editing-friend-circle-id'), _0x4ba63d = document[_0x20f76e(0x392)](_0x20f76e(0x9dd)); _0x4613dc(_0x20f76e(0x949)), _0x3e7e7a[_0x20f76e(0x2c9)] = '', _0x2e4b8c[_0x20f76e(0x404)]['forEach'](_0x503755 => { const _0x16f9d8 = _0x20f76e; if (_0x16f9d8(0x62d) === _0x16f9d8(0x89c)) { _0x5c2151['innerHTML'] = _0x16f9d8(0xadc); return; } else { const _0x42d2c0 = document[_0x16f9d8(0x92e)](_0x16f9d8(0x63a)); _0x42d2c0[_0x16f9d8(0x894)] = _0x16f9d8(0xa92), _0x42d2c0[_0x16f9d8(0x2c9)] = _0x16f9d8(0x8e1) + _0x503755['id'] + _0x16f9d8(0x3c8) + _0x503755['id'] + _0x16f9d8(0x59c) + (_0x503755[_0x16f9d8(0x58d)] || _0x2be033) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x503755['id'] + _0x16f9d8(0xabb) + _0x503755['name'] + '</label>\x0a\x20\x20\x20\x20', _0x3e7e7a[_0x16f9d8(0x594)](_0x42d2c0); } }); if (_0x22064a) { const _0x28ddda = _0x2e4b8c[_0x20f76e(0x2b2)][_0x20f76e(0x69e)](_0x475475 => _0x475475['id'] === _0x22064a); if (!_0x28ddda) return; _0x234d1a[_0x20f76e(0x324)] = _0x20f76e(0x711), _0x1fe0dd[_0x20f76e(0x60e)] = _0x28ddda['id'], _0x2471e8[_0x20f76e(0x60e)] = _0x28ddda[_0x20f76e(0x420)], _0x17107c['value'] = _0x28ddda[_0x20f76e(0x22e)], _0x4ba63d[_0x20f76e(0xb56)][_0x20f76e(0x993)] = 'block', _0x28ddda['memberCharacterIds'][_0x20f76e(0xb5e)](_0x559bbf => { const _0x166f9a = _0x20f76e, _0x35af27 = _0x3e7e7a[_0x166f9a(0x50b)](_0x166f9a(0x2ea) + _0x559bbf); if (_0x35af27) _0x35af27[_0x166f9a(0x71e)] = !![]; }); } else 'sTbCi' === _0x20f76e(0x405) ? _0x4ad7cc[_0x20f76e(0x69a)] && _0x2cff4d['listenTogetherSession'][_0x20f76e(0x620)] && (_0x5f0166[_0x20f76e(0xb56)][_0x20f76e(0x993)] = _0x20f76e(0x366), _0x334f86(() => _0x305db6[_0x20f76e(0x42c)][_0x20f76e(0x6ec)](_0x20f76e(0x3a9)), 0xa)) : (_0x234d1a['textContent'] = _0x20f76e(0x582), _0x1fe0dd[_0x20f76e(0x60e)] = '', _0x2471e8['value'] = '好友圈\x20' + (_0x2e4b8c[_0x20f76e(0x2b2)][_0x20f76e(0x6f2)] + 0x1), _0x17107c['value'] = _0x2e4b8c[_0x20f76e(0x789)], _0x4ba63d[_0x20f76e(0xb56)]['display'] = _0x20f76e(0x3a4)); _0x2bd982(_0x20f76e(0x6d7), _0x20f76e(0xa2c)); } } function _0x5a75ca() { const _0x3c843e = _0x3abecc; if (_0x3c843e(0xc20) !== _0x3c843e(0xc20)) { const _0x22d856 = _0x5c4158(); if (_0x22d856 && _0x22d856[_0x3c843e(0x875)] === 'private') _0x5b6886(_0x22d856['participantIds'][0x0]); else _0x22d856 && _0x22d856['type'] === _0x3c843e(0xacf) && _0x32b491(_0x22d856['id']); } else { const _0x5f523a = document[_0x3c843e(0x392)](_0x3c843e(0x76b))[_0x3c843e(0x60e)], _0x1b0206 = document[_0x3c843e(0x392)](_0x3c843e(0x68c))[_0x3c843e(0x60e)][_0x3c843e(0x8bb)](), _0x1ca5ae = document['getElementById'](_0x3c843e(0x949))[_0x3c843e(0x60e)], _0x506617 = Array[_0x3c843e(0xbd4)](document['querySelectorAll'](_0x3c843e(0x891)))['map'](_0x276df1 => _0x276df1['dataset']['id']); if (!_0x1b0206) { _0x18c07b(_0x3c843e(0x885)); return; } if (_0x506617[_0x3c843e(0x6f2)] === 0x0) { _0x18c07b(_0x3c843e(0x6a9)); return; } if (_0x5f523a) { const _0x30f462 = _0x2e4b8c[_0x3c843e(0x2b2)][_0x3c843e(0x69e)](_0x2d333b => _0x2d333b['id'] === _0x5f523a); _0x30f462 && (_0x30f462[_0x3c843e(0x420)] = _0x1b0206, _0x30f462[_0x3c843e(0x22e)] = _0x1ca5ae, _0x30f462[_0x3c843e(0x8e7)] = _0x506617); } else { const _0x29035d = { 'id': _0x3c843e(0x85b) + Date[_0x3c843e(0x9b4)](), 'name': _0x1b0206, 'boundUserProfileId': _0x1ca5ae, 'memberCharacterIds': _0x506617, 'posts': [] }; _0x2e4b8c[_0x3c843e(0x2b2)][_0x3c843e(0x7e4)](_0x29035d); } _0x5a3c71(), _0x18c07b(_0x3c843e(0x37c)), _0x9d3834(), _0x2bd982('friendCircleList', _0x3c843e(0x6d7)); } } async function _0x5b2f00() { const _0x27cb71 = _0x3abecc, _0x3fbc31 = document[_0x27cb71(0x392)]('editing-friend-circle-id')[_0x27cb71(0x60e)]; if (!_0x3fbc31) return; const _0x52d6ff = await _0x4b635a(_0x27cb71(0x663)); _0x52d6ff && (_0x27cb71(0x92b) !== _0x27cb71(0x7e8) ? (_0x2e4b8c[_0x27cb71(0x2b2)] = _0x2e4b8c['friendCircles'][_0x27cb71(0x742)](_0x2a7b09 => _0x2a7b09['id'] !== _0x3fbc31), _0x2e4b8c['activeFriendCircleId'] === _0x3fbc31 && (_0x27cb71(0xba7) !== _0x27cb71(0xba7) ? _0x3c69ef['appendChild'](_0x265c7c) : _0x2e4b8c[_0x27cb71(0xbb0)] = null), _0x5a3c71(), _0x18c07b(_0x27cb71(0xb39)), _0x9d3834(), _0x2bd982(_0x27cb71(0xa2c), _0x27cb71(0x6d7))) : _0x16fbb2(_0x27cb71(0x3b7))); } function _0x46259e(_0x10c61d) { const _0x5c4131 = _0x3abecc; if ('zGkch' === 'zGkch') { _0x1484e8(); const _0x3dbfe4 = _0x2e4b8c['friendCircles']['find'](_0xf4a167 => _0xf4a167['id'] === _0x10c61d); if (!_0x3dbfe4) return; _0x2e4b8c[_0x5c4131(0xbb0)] = _0x10c61d, _0x5a3c71(), document[_0x5c4131(0x392)](_0x5c4131(0xc2f))[_0x5c4131(0x324)] = _0x3dbfe4[_0x5c4131(0x420)], _0x21cf7a(), _0x2bd982('music', 'friendCircleList'), _0x156a5f(); } else { const _0x291e8f = _0x253b6a[_0x5c4131(0x38c)](_0xec24d5); _0x961485[_0x5c4131(0xb56)][_0x5c4131(0xb85)] = _0x5c4131(0x24b) + _0x291e8f + '\x27)'; } } function _0x237ba7() { const _0x2361f9 = _0x3abecc; if ('AShaK' === _0x2361f9(0x274)) _0x11d085 = _0x2361f9(0x670) + _0x32ac8f[_0x2361f9(0x58d)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x3558f7[_0x2361f9(0x420)] + _0x2361f9(0x8f2) + _0x244148[_0x2361f9(0x3d8)][_0x2361f9(0xbbc)] + _0x2361f9(0x418); else { if (!_0x2e4b8c['friendCircles'] || _0x2e4b8c['friendCircles'][_0x2361f9(0x6f2)] === 0x0) { console[_0x2361f9(0x5b1)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x5afdfe = _0x2e4b8c['friendCircles'][0x0]; if (_0x5afdfe[_0x2361f9(0x8e7)][_0x2361f9(0x6f2)] < 0x2) { if (_0x2361f9(0xb28) !== _0x2361f9(0xbcd)) { console[_0x2361f9(0x5b1)](_0x2361f9(0x4d3) + _0x5afdfe[_0x2361f9(0x420)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } else { _0x4a2ba8['id'] === _0x521dd3[_0x2361f9(0x7ee)] && (_0x5131c2(), _0x2d387e[_0x2361f9(0x2c8)] = [], _0x50de55()); try { _0x4821b7[_0x2361f9(0x4a7)](_0x2361f9(0x76e) + _0x4e60d4['id']), _0x177ec3(_0x2361f9(0x60f) + _0x3d6abd[_0x2361f9(0x420)] + _0x2361f9(0x860)); } catch (_0x257f66) { _0x331635[_0x2361f9(0x5b1)](_0x2361f9(0xaf5) + _0x4b3ca0['id'], _0x257f66), _0x16ae77(_0x2361f9(0x95d)); } } } const _0x501cbb = { 'id': _0x2361f9(0xaca) + Date[_0x2361f9(0x9b4)](), 'authorType': _0x2361f9(0xc2e), 'authorId': _0x5afdfe['memberCharacterIds'][0x0], 'content': _0x2361f9(0xb92), 'timestamp': Date['now'](), 'likes': [_0x5afdfe[_0x2361f9(0x8e7)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x2361f9(0x9b4)](), 'authorId': _0x5afdfe[_0x2361f9(0x8e7)][0x1], 'content': _0x2361f9(0xb4c) }] }; _0x5afdfe[_0x2361f9(0x983)][_0x2361f9(0x7e4)](_0x501cbb), _0x5a3c71(), console[_0x2361f9(0xbf0)]('成功向好友圈\x20\x22' + _0x5afdfe[_0x2361f9(0x420)] + _0x2361f9(0x7a3)), _0x18c07b(_0x2361f9(0x326)); } } window[_0x3abecc(0x24d)] = _0x237ba7; function _0x220f78(_0x4639ed) { const _0x522e20 = _0x3abecc; return _0x2e4b8c[_0x522e20(0x89d)][_0x522e20(0x69e)](_0x1a0625 => _0x1a0625['id'] === _0x4639ed); } function _0x5b3ee9(_0x5f1d6c, _0x259f41 = _0x3abecc(0x417)) { const _0x192c4f = _0x3abecc, _0x583f08 = document[_0x192c4f(0x392)](_0x192c4f(0x88a)); let _0x1d81d9 = document[_0x192c4f(0x392)](_0x192c4f(0x260)); if (_0x5f1d6c) { if (_0x192c4f(0x317) === _0x192c4f(0x2ab)) { const _0x5a7152 = _0xd1bbd9[_0x192c4f(0x4f4)] === _0x4acd93(_0x53204d[_0x192c4f(0x7ee)])['id'] ? _0xd7165d(_0x273e0f[_0x192c4f(0x7ee)]) : _0x277503(_0x2475a2[_0x192c4f(0x4f4)]); _0x3672a0['assign'](_0x54d890, { 'type': _0x192c4f(0xbea), 'amount': _0x32128c['amount'], 'recipientId': _0x38b972[_0x192c4f(0x4f4)], 'content': _0x192c4f(0x539) + (_0x5a7152?.[_0x192c4f(0x420)] || '未知') + _0x192c4f(0x4ca) + _0x1b4b92[_0x192c4f(0xb86)] + ']' }); } else { if (!_0x1d81d9) { if (_0x192c4f(0x9f9) !== _0x192c4f(0x8b0)) _0x1d81d9 = document[_0x192c4f(0x92e)](_0x192c4f(0x63a)), _0x1d81d9['id'] = _0x192c4f(0x260), _0x583f08['appendChild'](_0x1d81d9); else return _0x4d41cf(_0x2ea81c)[_0x192c4f(0x54a)](_0x2aa810 => _0x2aa810['blob']()); } _0x1d81d9['innerHTML'] = _0x192c4f(0x280) + _0x259f41 + _0x192c4f(0x247), _0x1d81d9[_0x192c4f(0xb56)][_0x192c4f(0x993)] = _0x192c4f(0x366); } } else _0x192c4f(0x75d) !== _0x192c4f(0x75d) ? _0x1d22f2[_0x192c4f(0x7e4)](..._0x12d975(_0x89d224)) : _0x1d81d9 && (_0x1d81d9[_0x192c4f(0xb56)][_0x192c4f(0x993)] = _0x192c4f(0x3a4)); } async function _0xace354() { const _0x22c3e2 = _0x3abecc, _0x1f7059 = _0x2e4b8c[_0x22c3e2(0x2b2)]['find'](_0x30f26e => _0x30f26e['id'] === _0x2e4b8c[_0x22c3e2(0xbb0)]); if (!_0x1f7059 || _0x2e4b8c[_0x22c3e2(0x524)]) return; _0x5b3ee9(!![], _0x22c3e2(0x5af)), _0x2e4b8c[_0x22c3e2(0x524)] = !![]; try { if (_0x22c3e2(0x3bd) !== _0x22c3e2(0x3bd)) { const _0x26f976 = _0x1e9e13[_0x22c3e2(0x92e)]('img'); _0x26f976[_0x22c3e2(0x84e)] = _0x40cb60[_0x22c3e2(0x6ae)], _0x26f976[_0x22c3e2(0xad1)] = _0x22c3e2(0x2ef), _0x26f976['title'] = _0xef9f5b[_0x22c3e2(0x420)], _0x26f976[_0x22c3e2(0x42c)][_0x22c3e2(0x6ec)](_0x22c3e2(0xb73)), _0x26f976[_0x22c3e2(0xabf)](_0x22c3e2(0x4b9), () => _0x30fbb9(_0x4b9603)), _0x51a513[_0x22c3e2(0x594)](_0x26f976); } else { let _0x189836 = Date[_0x22c3e2(0x9b4)](); _0x1f7059[_0x22c3e2(0x983)] && _0x1f7059[_0x22c3e2(0x983)][_0x22c3e2(0x6f2)] > 0x0 && (_0x22c3e2(0x595) === _0x22c3e2(0xba8) ? _0x463a63[_0x22c3e2(0xa2a)] = _0x31b3c7[_0x22c3e2(0xa2a)]['filter'](_0x39bbb7 => _0x39bbb7 !== _0xb6f9f1) : _0x189836 = Math['max'](..._0x1f7059[_0x22c3e2(0x983)][_0x22c3e2(0x5e9)](_0x1c1b97 => _0x1c1b97[_0x22c3e2(0x518)]))); const _0x3d59df = await _0x4d2353(_0x1f7059); if (!_0x3d59df || _0x3d59df[_0x22c3e2(0x6f2)] === 0x0) { if (_0x22c3e2(0x672) !== _0x22c3e2(0x672)) { const _0x571763 = _0x531f75[_0x22c3e2(0x7d1)]((_0x8ee010 - _0x53b023) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x3363f1 += _0x22c3e2(0xa6b) + _0x571763 + _0x22c3e2(0x5a9); } else { _0x18c07b('AI似乎没有想出任何新动态。'); return; } } const _0x7eeef6 = _0x3d59df['map'](async (_0xa08aba, _0x56fb7a) => { const _0x8cc943 = _0x22c3e2; if ('waSco' === _0x8cc943(0xb7f)) _0x44c234(_0x4ca677 - 0x1); else { _0x5b3ee9(!![], _0x8cc943(0x8da) + (_0x56fb7a + 0x1) + _0x8cc943(0x92d) + _0x3d59df[_0x8cc943(0x6f2)] + _0x8cc943(0xa83)); const _0x31dde1 = _0x189836 + (_0x56fb7a + 0x1) * 0x3c * 0x3e8, _0x5b070e = { 'id': _0x8cc943(0x476) + _0xa08aba['authorId'] + '_' + _0x31dde1, 'authorType': _0x8cc943(0xc2e), 'authorId': _0xa08aba['authorId'], 'content': _0xa08aba[_0x8cc943(0x434)], 'timestamp': _0x31dde1, 'likes': _0xa08aba[_0x8cc943(0x508)] || [], 'comments': (_0xa08aba[_0x8cc943(0xb3b)] || [])[_0x8cc943(0x5e9)]((_0x2ff06e, _0x1d4615) => ({ 'commentId': 'c_' + _0x31dde1 + '_' + _0x1d4615, 'authorId': _0x2ff06e[_0x8cc943(0x825)], 'content': _0x2ff06e['content'] })) }; if (_0xa08aba[_0x8cc943(0x9e9)] === 'music' && _0xa08aba[_0x8cc943(0x50e)] && _0xa08aba[_0x8cc943(0x5c7)]) try { if (_0x8cc943(0x62e) !== 'bINMV') { const _0x37a2d0 = new _0xd7a742(), _0x1dd46f = _0x24c334[_0x8cc943(0x392)](_0x8cc943(0x98c)), _0x4ce855 = _0x2d9938['getElementById'](_0x8cc943(0x9fc)); if (_0x1dd46f && _0x4ce855) { const _0x36749a = _0x4d1ce7(_0x37a2d0[_0x8cc943(0x2d8)]())[_0x8cc943(0xb98)](0x2, '0'), _0x33cd10 = _0x906a0e(_0x37a2d0[_0x8cc943(0x618)]())[_0x8cc943(0xb98)](0x2, '0'); _0x1dd46f['textContent'] = _0x36749a + ':' + _0x33cd10; const _0x451c25 = _0x37a2d0[_0x8cc943(0x49d)]() + 0x1, _0x24a324 = _0x37a2d0[_0x8cc943(0xa7a)](), _0x5deac8 = [_0x8cc943(0x227), _0x8cc943(0x3c0), _0x8cc943(0x58a), '星期三', '星期四', '星期五', _0x8cc943(0x5c1)][_0x37a2d0[_0x8cc943(0x5d1)]()]; _0x4ce855[_0x8cc943(0x324)] = _0x451c25 + '月' + _0x24a324 + '日\x20' + _0x5deac8; } } else { const _0x140532 = await _0x273f55(_0xa08aba['songName'], _0xa08aba[_0x8cc943(0x5c7)]); _0x5b070e['type'] = _0x8cc943(0xc2d), _0x5b070e[_0x8cc943(0x50e)] = _0xa08aba[_0x8cc943(0x50e)], _0x5b070e[_0x8cc943(0x5c7)] = _0xa08aba['artist'], _0x5b070e['coverUrl'] = _0x140532['cover'], _0x5b070e[_0x8cc943(0x565)] = _0x140532[_0x8cc943(0x6ae)]; } } catch (_0x53b3c4) { console[_0x8cc943(0x5b1)]('动态中的音乐搜索失败:', _0x53b3c4), _0x5b070e[_0x8cc943(0x875)] = 'text'; } else _0x5b070e[_0x8cc943(0x875)] = _0x8cc943(0xbbc); return _0x5b070e; } }), _0xb51b53 = await Promise[_0x22c3e2(0x319)](_0x7eeef6); _0x1f7059['posts'][_0x22c3e2(0x7e4)](..._0xb51b53), _0x5a3c71(); } } catch (_0x206db2) { _0x22c3e2(0xc2a) === 'CLeyS' ? (console[_0x22c3e2(0x5b1)](_0x22c3e2(0x9ae), _0x206db2), _0x18c07b(_0x22c3e2(0x703) + _0x206db2[_0x22c3e2(0x542)])) : (_0x25b088[_0x22c3e2(0x5b1)](_0x22c3e2(0x6e5), _0x177458), _0x957b0a[_0x22c3e2(0x84e)] = ''); } finally { _0x21cf7a(), _0x5b3ee9(![]), _0x2e4b8c[_0x22c3e2(0x524)] = ![]; } } async function _0x4d2353(_0x379f6e) { const _0x439986 = _0x3abecc, _0x53afd7 = _0x379f6e[_0x439986(0x8e7)][_0x439986(0x5e9)](_0x1cab3a => _0x2653c6(_0x1cab3a))[_0x439986(0x742)](Boolean); if (_0x53afd7[_0x439986(0x6f2)] === 0x0) return null; const _0xce8b79 = _0x4bf621(), _0x4b9650 = _0x220f78(_0x379f6e[_0x439986(0x22e)]) || _0x2e4b8c[_0x439986(0x89d)][0x0], _0x1f9c77 = _0x4b9650 ? _0x439986(0xc36) + _0x4b9650['name'] + _0x439986(0x905) + (_0x4b9650[_0x439986(0x5cd)] || '无') + '\x0a' : '', _0x3c9408 = _0x53afd7['map'](_0x13b93f => { const _0xd4c2 = _0x439986; if ('TQmlq' !== 'fHSkp') { const { omniText: _0x584068 } = _0x42b275(_0x13b93f['id'], null), _0x89ffdc = _0x44a6ac(_0x13b93f['id']), _0x1d2b0c = _0x13b93f[_0xd4c2(0x25d)] && _0x13b93f[_0xd4c2(0x25d)][_0xd4c2(0x6f2)] > 0x0 ? _0xd4c2(0xa28) + _0x13b93f[_0xd4c2(0x420)] + _0xd4c2(0x4d5) + _0x13b93f[_0xd4c2(0x25d)][_0xd4c2(0x5e9)](_0x2985e3 => _0x2e4b8c[_0xd4c2(0x285)][_0xd4c2(0x69e)](_0x199602 => _0x199602['id'] === _0x2985e3))[_0xd4c2(0x742)](Boolean)[_0xd4c2(0x5e9)](_0x568618 => _0xd4c2(0x83b) + _0x568618[_0xd4c2(0x420)] + '\x0a' + _0x568618[_0xd4c2(0xa19)])[_0xd4c2(0x52b)]('') : ''; return _0xd4c2(0x318) + _0x13b93f[_0xd4c2(0x420)] + _0xd4c2(0x924) + _0x13b93f['id'] + _0xd4c2(0x204) + _0x13b93f[_0xd4c2(0x5cd)] + _0xd4c2(0xa88) + _0x584068 + '\x0a' + _0x89ffdc + '\x0a' + _0x1d2b0c; } else { _0x304bde[_0xd4c2(0x2c9)] = _0xd4c2(0x945); return; } })[_0x439986(0x52b)]('\x0a\x0a'), _0x546c9c = Math[_0x439986(0x552)](Math[_0x439986(0xb59)]() * 0x3) + 0x2, _0x516bdd = _0x439986(0x34e) + _0x546c9c + '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a' + _0x3c9408 + '\x0a' + _0x1f9c77 + '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a' + _0xce8b79 + _0x439986(0x8fc) + _0x546c9c + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0x546c9c + _0x439986(0x270), _0x3e155f = [{ 'role': 'system', 'content': _0x516bdd }, { 'role': _0x439986(0x5c3), 'content': _0x439986(0x3b9) }]; _0x3e155f[_0x439986(0x7e4)]({ 'role': _0x439986(0x5c3), 'content': '请根据以上所有规则，生成\x20' + _0x546c9c + _0x439986(0x992) }); try { if (_0x439986(0x99b) !== 'bNUdL') { const _0x534d96 = _0x48e575[_0x439986(0xaab)](_0x57452c); if (_0x534d96) { const _0x5c9638 = _0x51ab0d(_0x534d96[0x1], 0xa), _0x2b2a37 = _0x56a23b(_0x534d96[0x2], 0xa), _0x215c5c = _0xfaa4df(_0x534d96[0x3], 0xa) * (_0x534d96[0x3][_0x439986(0x6f2)] === 0x2 ? 0xa : 0x1), _0x39e6d5 = _0x5c9638 * 0x3c + _0x2b2a37 + _0x215c5c / 0x3e8, _0x385811 = _0x5aa73c[_0x439986(0x8d5)](_0x590dd0, '')[_0x439986(0x8bb)](); _0x385811 && _0x54c8de[_0x439986(0x7e4)]({ 'time': _0x39e6d5, 'text': _0x385811 }); } } else { const _0x2e1eeb = await _0x45b854(_0x3e155f, { 'json': !![] }), _0x18938e = _0x2e1eeb[_0x439986(0xaab)](/(\[[\s\S]*\])/); if (!_0x18938e) throw new Error(_0x439986(0x673)); const _0x36140c = _0x18938e[0x1], _0x5643fb = JSON['parse'](_0x36140c); if (!Array[_0x439986(0x74a)](_0x5643fb)) throw new Error(_0x439986(0x964)); return _0x5643fb; } } catch (_0x4e3b94) { if (_0x439986(0x5ae) === _0x439986(0x5ae)) return console[_0x439986(0x5b1)](_0x439986(0x4fd), _0x4e3b94), console['error'](_0x439986(0xa48), _0x4e3b94[_0x439986(0x1dd)] || _0x439986(0xac4)), null; else _0x2e4660[_0x439986(0x875)] === 'group' && (_0x2bcc9a[_0x439986(0xa2a)] = _0x4ca72a[_0x439986(0xa2a)][_0x439986(0x742)](_0x55d024 => _0x55d024 !== _0x5da276)); } } async function _0x1cd010() { const _0x1543dc = _0x3abecc, _0x5977e3 = _0x2e4b8c[_0x1543dc(0x2b2)][_0x1543dc(0x69e)](_0x3a57ff => _0x3a57ff['id'] === _0x2e4b8c['activeFriendCircleId']); if (!_0x5977e3) return; const _0x1429f8 = await _0x4b635a(_0x1543dc(0x372) + _0x5977e3['name'] + _0x1543dc(0x7e1)); _0x1429f8 && (_0x5977e3[_0x1543dc(0x983)] = [], _0x5a3c71(), _0x21cf7a(), _0x18c07b('动态已清空。')); } function _0x21cf7a() { const _0x5eacc5 = _0x3abecc, _0x202cd4 = document['getElementById'](_0x5eacc5(0x92c)), _0x31162e = _0x2e4b8c[_0x5eacc5(0x2b2)][_0x5eacc5(0x69e)](_0x3d5847 => _0x3d5847['id'] === _0x2e4b8c[_0x5eacc5(0xbb0)]); if (!_0x31162e) { if (_0x5eacc5(0xb32) === 'JjYJq') _0xd1cd62 = _0x5eacc5(0x8aa) + _0x10b517[_0x5eacc5(0x420)] + _0x5eacc5(0x6b3); else { _0x202cd4[_0x5eacc5(0x2c9)] = _0x5eacc5(0x4da); return; } } if (!_0x31162e['posts'] || _0x31162e[_0x5eacc5(0x983)][_0x5eacc5(0x6f2)] === 0x0) { _0x202cd4['innerHTML'] = _0x5eacc5(0x945); return; } _0x202cd4['innerHTML'] = ''; const _0x5ea7ad = [..._0x31162e[_0x5eacc5(0x983)]][_0x5eacc5(0x474)]((_0x285e8c, _0x50030c) => _0x50030c[_0x5eacc5(0x518)] - _0x285e8c[_0x5eacc5(0x518)]); _0x5ea7ad[_0x5eacc5(0xb5e)](_0x43d54f => { const _0x11e34d = _0x5eacc5, _0x4843ea = document['createElement']('div'); _0x4843ea['className'] = _0x11e34d(0xada); let _0x5f07d8 = '未知', _0x342b79 = _0x2be033; if (_0x43d54f['authorType'] === _0x11e34d(0x5c3)) { const _0x4ea32a = _0x220f78(_0x43d54f[_0x11e34d(0x825)]); _0x4ea32a && (_0x11e34d(0x2e3) === 'iLjMm' ? (_0x5f07d8 = _0x4ea32a[_0x11e34d(0x420)], _0x342b79 = _0x4ea32a[_0x11e34d(0x58d)]) : _0x2c28d3[_0x11e34d(0x84e)] = _0x236066[_0x11e34d(0x38c)](_0x3127cc)); } else { if (_0x11e34d(0x581) === _0x11e34d(0xb80)) _0x15b034 = _0x55c226['getItem'](_0x11e34d(0x76e) + _0x3a2606[_0x11e34d(0x7ee)]); else { const _0x35b38d = _0x2653c6(_0x43d54f['authorId']); _0x35b38d && (_0x5f07d8 = _0x35b38d['name'], _0x342b79 = _0x35b38d['avatar']); } } const _0xa3893c = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x342b79 + _0x11e34d(0xb6b) + _0x5f07d8 + _0x11e34d(0xb95), _0x25efa = _0x11e34d(0x37d) + _0x43d54f[_0x11e34d(0xa19)] + _0x11e34d(0x2cc); let _0x5a89a9 = ''; if (_0x43d54f[_0x11e34d(0x3f7)] || _0x43d54f[_0x11e34d(0xb1a)]) { if (_0x11e34d(0xb54) !== _0x11e34d(0xb54)) _0x12b718['appendChild'](_0x11b2fb[_0x11e34d(0x92e)](_0x11e34d(0x63a))); else { const _0x159ef4 = _0x11e34d(0x55b) + _0x43d54f['id']; _0x5a89a9 = _0x11e34d(0x621) + _0x159ef4 + _0x11e34d(0x46b), setTimeout(() => { const _0x1ad96d = _0x11e34d, _0x2e83d1 = document[_0x1ad96d(0x392)](_0x159ef4); if (!_0x2e83d1) return; if (_0x43d54f[_0x1ad96d(0x3f7)]) _0x1ad96d(0x904) === _0x1ad96d(0x904) ? _0x2e83d1[_0x1ad96d(0x84e)] = _0x43d54f['image'] : _0x4188f0[_0x1ad96d(0x84e)] = _0x5e020a['image']; else _0x43d54f['imageId'] && _0x1de353(_0x43d54f[_0x1ad96d(0xb1a)])['then'](_0x5be1b7 => { const _0x4407af = _0x1ad96d; if (_0x5be1b7) { const _0x504289 = URL[_0x4407af(0x38c)](_0x5be1b7); _0x2e83d1['src'] = _0x504289, _0x2e83d1['onload'] = () => URL[_0x4407af(0x298)](_0x504289); } }); }, 0x0); } } let _0x17d0e3 = ''; _0x43d54f[_0x11e34d(0x875)] === _0x11e34d(0xc2d) && _0x43d54f[_0x11e34d(0x50e)] && (_0x17d0e3 = _0x11e34d(0x87d) + _0x43d54f['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x43d54f[_0x11e34d(0x459)] || _0x2be033) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x43d54f[_0x11e34d(0x50e)] + _0x11e34d(0x8db) + _0x43d54f[_0x11e34d(0x5c7)] + _0x11e34d(0x99d) + (_0x43d54f[_0x11e34d(0x565)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'); const _0x1555f7 = _0x11e34d(0x592) + new Date(_0x43d54f[_0x11e34d(0x518)])[_0x11e34d(0x408)](_0x11e34d(0x591)) + '</div>'; let _0x4cd252 = ''; if (_0x43d54f[_0x11e34d(0x508)] && _0x43d54f[_0x11e34d(0x508)][_0x11e34d(0x6f2)] > 0x0 || _0x43d54f[_0x11e34d(0xb3b)] && _0x43d54f[_0x11e34d(0xb3b)]['length'] > 0x0) { let _0x36b195 = ''; if (_0x43d54f[_0x11e34d(0x508)] && _0x43d54f[_0x11e34d(0x508)][_0x11e34d(0x6f2)] > 0x0) { const _0x1cbe60 = _0x43d54f[_0x11e34d(0x508)][_0x11e34d(0x5e9)](_0x22fa8a => _0x2653c6(_0x22fa8a)?.[_0x11e34d(0x420)] || '未知')[_0x11e34d(0x52b)]('、'), _0x342bd3 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>'; _0x36b195 = '<div\x20class=\x22post-likes\x22>' + _0x342bd3 + '\x20' + _0x1cbe60 + _0x11e34d(0x892); } let _0x3ee940 = ''; if (_0x43d54f[_0x11e34d(0xb3b)] && _0x43d54f[_0x11e34d(0xb3b)]['length'] > 0x0) { const _0x401b6f = _0x43d54f['comments'][_0x11e34d(0x5e9)](_0x254ded => { const _0x546122 = _0x11e34d; if (_0x546122(0x714) === _0x546122(0x25e)) return _0xfd36d1['slice'](0x0, 0x9); else { const _0x15cc46 = _0x2653c6(_0x254ded['authorId'])?.[_0x546122(0x420)] || '未知'; return _0x546122(0xa5f) + _0x15cc46 + _0x546122(0xbb3) + _0x254ded[_0x546122(0xa19)] + _0x546122(0x892); } })[_0x11e34d(0x52b)](''); _0x3ee940 = _0x11e34d(0x443) + _0x401b6f + _0x11e34d(0x892); } _0x4cd252 = _0x11e34d(0x339) + _0x36b195 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x3ee940 + _0x11e34d(0x680); } const _0x1c1f9c = '<div\x20class=\x22post-body\x22>' + _0x25efa + _0x5a89a9 + _0x17d0e3 + _0x11e34d(0x892); _0x4843ea['innerHTML'] = _0xa3893c + _0x1c1f9c + _0x1555f7 + _0x4cd252; if (_0x43d54f[_0x11e34d(0x875)] === _0x11e34d(0xc2d) && _0x43d54f[_0x11e34d(0x565)]) { const _0x44c51e = _0x4843ea[_0x11e34d(0x50b)](_0x11e34d(0xa09)); _0x44c51e && _0x44c51e[_0x11e34d(0xabf)](_0x11e34d(0x4b9), function () { const _0x3bcf92 = _0x11e34d, _0xaa7c97 = { 'id': _0x43d54f['id'], 'url': _0x43d54f[_0x3bcf92(0x565)] }; _0x45ee27(this, _0xaa7c97); }); } _0x202cd4[_0x11e34d(0x594)](_0x4843ea); }); } document['getElementById']('clear-feed-button')['addEventListener'](_0x3abecc(0x4b9), _0x1cd010), document[_0x3abecc(0x392)](_0x3abecc(0xae4))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0xace354), document[_0x3abecc(0x392)](_0x3abecc(0x7db))[_0x3abecc(0xabf)]('click', () => _0x2bd982(_0x3abecc(0xa74), _0x3abecc(0xa2c))), document[_0x3abecc(0x392)](_0x3abecc(0x777))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x370233()), document[_0x3abecc(0x392)](_0x3abecc(0x596))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x2bd982('friendCircleList', _0x3abecc(0x6d7))), document['getElementById'](_0x3abecc(0xb41))['addEventListener']('click', _0x5a75ca), document[_0x3abecc(0x392)](_0x3abecc(0x9dd))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x5b2f00), document[_0x3abecc(0x392)](_0x3abecc(0xc35))['addEventListener']('click', () => { const _0x2f8855 = _0x3abecc; _0x9d3834(), _0x2bd982(_0x2f8855(0xa2c), _0x2f8855(0xc2d)); }), document[_0x3abecc(0x392)](_0x3abecc(0x936))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x3605ff = _0x3abecc; _0x2e4b8c['activeFriendCircleId'] && _0x370233(_0x2e4b8c[_0x3605ff(0xbb0)]); }), document[_0x3abecc(0x392)](_0x3abecc(0xa3e))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), async () => { const _0x1c4c87 = _0x3abecc; if (_0x1c4c87(0x930) !== _0x1c4c87(0x930)) { const _0x4d5010 = _0x57adc9['split'](/:\s(.+)/); if (_0x4d5010[_0x1c4c87(0x6f2)] > 0x1) { const _0x3bcd3a = _0x4d5010[0x0][_0x1c4c87(0x8bb)](), _0x4e7f2b = _0x4d5010[0x1][_0x1c4c87(0x8bb)]()['replace'](/^"|"$/g, ''); _0xade77b[_0x3bcd3a] = _0x4e7f2b; } } else { const _0x23d798 = _0x2e4b8c[_0x1c4c87(0x2b2)][_0x1c4c87(0x69e)](_0x56ab38 => _0x56ab38['id'] === _0x2e4b8c['activeFriendCircleId']); if (!_0x23d798 || _0x2e4b8c['isGenerating']) return; const _0x215f37 = _0x23d798['boundUserProfileId'], _0x8c25ca = _0x2e4b8c['userProfiles'][_0x1c4c87(0x69e)](_0x167479 => _0x167479['id'] === _0x215f37); if (!_0x8c25ca) { if (_0x1c4c87(0x467) === 'KtHFh') _0x541471 += '-\x20' + _0x4d603f[_0x1c4c87(0x2bf)](_0x28f4d7) + '\x0a'; else { _0x18c07b(_0x1c4c87(0x73e)); return; } } const _0x37f7fa = document[_0x1c4c87(0x392)]('user-post-textarea')[_0x1c4c87(0x60e)][_0x1c4c87(0x8bb)](), _0x1f243c = _0x2e4b8c[_0x1c4c87(0x7f0)]['image'], _0x5b3013 = _0x2e4b8c[_0x1c4c87(0x7f0)]['music'], _0x1b5e2f = _0x2e4b8c['pendingPostAttachments']['imageId']; if (!_0x37f7fa && !_0x1f243c && !_0x5b3013) { if (_0x1c4c87(0xab0) === 'UPvEB') { _0x18c07b('总得说点什么吧？'); return; } else _0x1f19b1 = _0x9b76fd[_0x1c4c87(0x2bf)](_0x1288be); } const _0x227f80 = { 'id': 'post_user_' + Date[_0x1c4c87(0x9b4)](), 'authorType': _0x1c4c87(0x5c3), 'authorId': _0x8c25ca['id'], 'content': _0x37f7fa, 'timestamp': Date[_0x1c4c87(0x9b4)](), 'likes': [], 'comments': [] }; if (_0x1b5e2f) _0x1c4c87(0x650) === 'HUwPg' ? _0x227f80[_0x1c4c87(0xb1a)] = _0x1b5e2f : (_0x5917df = _0x322273['createElement'](_0x1c4c87(0xb56)), _0x4e5716['id'] = 'live-preview-style', _0x459428[_0x1c4c87(0x3df)][_0x1c4c87(0x594)](_0x1fa983)); else _0x1f243c && (_0x227f80[_0x1c4c87(0x3f7)] = _0x1f243c); _0x5b3013 ? (_0x227f80[_0x1c4c87(0x875)] = 'music', Object['assign'](_0x227f80, _0x5b3013)) : _0x227f80[_0x1c4c87(0x875)] = _0x1c4c87(0xbbc), _0x23d798[_0x1c4c87(0x983)][_0x1c4c87(0x7e4)](_0x227f80), _0x5a3c71(), _0x21cf7a(), document[_0x1c4c87(0x392)](_0x1c4c87(0x419))[_0x1c4c87(0x60e)] = '', _0x2e4b8c[_0x1c4c87(0x7f0)][_0x1c4c87(0x3f7)] = null, _0x2e4b8c['pendingPostAttachments'][_0x1c4c87(0xc2d)] = null, _0x2e4b8c['pendingPostAttachments'][_0x1c4c87(0xb1a)] = null, _0x1328f1(), _0x181a6e(_0x227f80); } }), document[_0x3abecc(0x392)](_0x3abecc(0x689))[_0x3abecc(0xabf)]('click', () => { const _0x2e3d6c = _0x3abecc; _0x2e3d6c(0x5dc) !== 'mppYg' ? document[_0x2e3d6c(0x392)](_0x2e3d6c(0x299))[_0x2e3d6c(0x4b9)]() : _0x28d032[_0x2e3d6c(0x324)] = '▶'; }), document[_0x3abecc(0x392)](_0x3abecc(0x299))[_0x3abecc(0xabf)](_0x3abecc(0xc38), async _0x43cbd7 => { const _0xbea6e2 = _0x3abecc, _0x4e09a6 = _0x43cbd7[_0xbea6e2(0xa4c)][_0xbea6e2(0x5a1)][0x0]; if (!_0x4e09a6) return; try { if ('OukeU' !== 'OukeU') _0x2442e4[_0xbea6e2(0x84e)] = _0x231128['image']; else { const _0xa6556 = await _0x4b681c(_0x4e09a6, 0x320, 0.8, !![]), _0x19e9c8 = _0xbea6e2(0x704) + Date[_0xbea6e2(0x9b4)](); await _0x3b613b(_0x19e9c8, _0xa6556), _0x2e4b8c[_0xbea6e2(0x7f0)][_0xbea6e2(0xb1a)] = _0x19e9c8, _0x2e4b8c[_0xbea6e2(0x7f0)][_0xbea6e2(0x3f7)] = null, _0x2e4b8c[_0xbea6e2(0x7f0)][_0xbea6e2(0xc2d)] = null, _0x1328f1(); } } catch (_0x471edc) { _0x18c07b(_0xbea6e2(0xb78) + _0x471edc[_0xbea6e2(0x542)]); } _0x43cbd7['target'][_0xbea6e2(0x60e)] = ''; }), document[_0x3abecc(0x392)](_0x3abecc(0x622))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), async () => { const _0x23ccd1 = _0x3abecc, _0x330af3 = await _0x32665b(); if (!_0x330af3) return; _0x18c07b(_0x23ccd1(0x29b)); try { if (_0x23ccd1(0x903) === _0x23ccd1(0x903)) { const _0x30e296 = await _0x273f55(_0x330af3[_0x23ccd1(0x50e)], _0x330af3[_0x23ccd1(0x5c7)]); _0x2e4b8c[_0x23ccd1(0x7f0)][_0x23ccd1(0xc2d)] = { 'songName': _0x330af3['songName'], 'artist': _0x330af3['artist'], 'coverUrl': _0x30e296[_0x23ccd1(0x883)], 'playableUrl': _0x30e296[_0x23ccd1(0x6ae)] }, _0x2e4b8c[_0x23ccd1(0x7f0)]['image'] = null, _0x1328f1(); } else { const _0x56a8be = _0x2b2bbd[_0x23ccd1(0x392)](_0x23ccd1(0x6ef))['value']['trim'](), _0x4efe3a = _0x220184[_0x23ccd1(0x50b)]('input[name=\x22event-type\x22]:checked')[_0x23ccd1(0x60e)]; if (!_0x56a8be) { _0x1a0a61(_0x23ccd1(0x65b)); return; } const _0x479d91 = _0x1aee17[_0x23ccd1(0x89d)][_0x23ccd1(0x69e)](_0x4a1b0f => _0x4a1b0f['id'] === _0x341b5e[_0x23ccd1(0x789)]); if (!_0x479d91) { _0x54ea4b(_0x23ccd1(0x39c)); return; } _0x471538[_0x23ccd1(0x6a6)][_0x23ccd1(0x7e4)]({ 'id': _0x23ccd1(0x9c5) + _0x517128[_0x23ccd1(0x9b4)](), 'date': _0x226553[_0x23ccd1(0xaff)], 'type': _0x4efe3a, 'content': _0x56a8be, 'userId': _0x479d91['id'] }), _0x2775bd(), _0x5720ee(), _0x49ade7(), _0x2d2e9f(), _0x34a036[_0x23ccd1(0x392)](_0x23ccd1(0xbfc))['classList'][_0x23ccd1(0xb26)](_0x23ccd1(0x3a9)); } } catch (_0x3cba26) { _0x23ccd1(0x3ef) !== _0x23ccd1(0x3ef) ? _0x4c391c[_0x23ccd1(0x624)] = ![] : _0x18c07b(_0x23ccd1(0xb58) + _0x3cba26[_0x23ccd1(0x542)]); } }); function _0x1dfa59() { const _0x306352 = _0x3abecc, _0x10649b = new Date(), _0x592692 = document[_0x306352(0x392)]('home-time'), _0x3efb90 = document['getElementById'](_0x306352(0x9fc)); if (_0x592692 && _0x3efb90) { const _0x2eebb8 = String(_0x10649b['getHours']())[_0x306352(0xb98)](0x2, '0'), _0x54e3f3 = String(_0x10649b[_0x306352(0x618)]())['padStart'](0x2, '0'); _0x592692[_0x306352(0x324)] = _0x2eebb8 + ':' + _0x54e3f3; const _0x47cb4d = _0x10649b[_0x306352(0x49d)]() + 0x1, _0x414784 = _0x10649b[_0x306352(0xa7a)](), _0x376d4e = [_0x306352(0x227), _0x306352(0x3c0), _0x306352(0x58a), _0x306352(0xb18), _0x306352(0x6dc), _0x306352(0x720), _0x306352(0x5c1)][_0x10649b[_0x306352(0x5d1)]()]; _0x3efb90[_0x306352(0x324)] = _0x47cb4d + '月' + _0x414784 + '日\x20' + _0x376d4e; } } function _0x15bde6(_0x483fbb) { const _0x1050d6 = _0x3abecc; if ('oWHos' !== _0x1050d6(0x9ca)) { if (!_0x483fbb) return ''; const _0x4853bc = new Date(_0x483fbb), _0x2603cc = String(_0x4853bc[_0x1050d6(0x2d8)]())[_0x1050d6(0xb98)](0x2, '0'), _0x42d370 = String(_0x4853bc[_0x1050d6(0x618)]())[_0x1050d6(0xb98)](0x2, '0'); return _0x2603cc + ':' + _0x42d370; } else _0x5f46cf[_0x1050d6(0xb56)][_0x1050d6(0x4df)] = '0'; } function _0x4bf621() { const _0x3ffd12 = _0x3abecc, _0x3f0483 = _0x2e4b8c['friendCircles'][_0x3ffd12(0x69e)](_0x416696 => _0x416696['id'] === _0x2e4b8c[_0x3ffd12(0xbb0)]), _0x29bc77 = _0x3f0483 ? _0x3f0483[_0x3ffd12(0x983)] : []; if (!_0x29bc77 || _0x29bc77[_0x3ffd12(0x6f2)] === 0x0) { if (_0x3ffd12(0x83e) !== _0x3ffd12(0x83e)) _0x587e7e = _0x333753['parse'](_0x7c22fa); else return ''; } const _0x4fa720 = _0x29bc77['slice'](0x0, 0x5), _0x2dfd5a = _0x4fa720[_0x3ffd12(0x5e9)](_0x4ecc35 => { const _0x489d32 = _0x3ffd12, _0xe2704e = _0x2653c6(_0x4ecc35[_0x489d32(0x825)]) || { 'name': '未知' }; let _0x417d97 = _0x489d32(0xb4a) + _0xe2704e['name'] + _0x489d32(0xb29) + (_0x4ecc35[_0x489d32(0x2ba)] || _0x4ecc35[_0x489d32(0xa19)]) + '”'; if (_0x4ecc35[_0x489d32(0x875)] === _0x489d32(0xc2d)) { if ('QnbXc' !== _0x489d32(0xb08)) { if (_0x3f1d8c[_0x489d32(0x6f2)] === 0x0) return; _0x22799e = (_0x1a47ad - 0x1 + _0x517e65[_0x489d32(0x6f2)]) % _0x51696a[_0x489d32(0x6f2)], _0x309735(_0x5a6393[_0x5ac785], _0x66ae91); } else _0x417d97 += _0x489d32(0x78a) + _0x4ecc35[_0x489d32(0x50e)] + _0x489d32(0x926) + _0x4ecc35[_0x489d32(0x5c7)] + ')'; } return _0x417d97; }); return _0x3ffd12(0x6bf) + _0x2dfd5a['join']('\x0a'); } function _0x44a6ac(_0x230cfd) { const _0x3ef0be = _0x3abecc, _0x1957c9 = _0x2e4b8c[_0x3ef0be(0x89d)][_0x3ef0be(0x69e)](_0xb05db1 => _0xb05db1['id'] === _0x2e4b8c[_0x3ef0be(0x789)]) || { 'name': '你' }, _0x7d95d = _0x2e4b8c['diaries'][_0x3ef0be(0x69e)](_0x4a6531 => _0x4a6531[_0x3ef0be(0x918)] === _0x230cfd); if (!_0x7d95d || !_0x7d95d[_0x3ef0be(0xb3c)] || _0x7d95d[_0x3ef0be(0xb3c)][_0x3ef0be(0x6f2)] === 0x0) return _0x3ef0be(0x289) !== 'hZHgG' ? [] : ''; const _0x4e40eb = _0x7d95d[_0x3ef0be(0xb3c)]['slice'](-0x8), _0x567bb6 = _0x4e40eb[_0x3ef0be(0x5e9)](_0x42f0d3 => { const _0x41d640 = _0x3ef0be, _0x35fb6c = _0x42f0d3[_0x41d640(0xafc)] === _0x41d640(0x5c3) ? _0x1957c9[_0x41d640(0x420)] : _0x2653c6(_0x42f0d3['author'])[_0x41d640(0x420)]; return _0x41d640(0x2b6) + new Date(_0x42f0d3[_0x41d640(0x518)])[_0x41d640(0xbf7)]() + ']\x20' + _0x35fb6c + '\x20写道:\x20' + _0x42f0d3[_0x41d640(0xa19)]; })[_0x3ef0be(0x52b)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0x1957c9['name'] + _0x3ef0be(0x8cb) + _0x567bb6; } function _0x297f69() { const _0x493848 = _0x3abecc, _0x2e9bc6 = document[_0x493848(0x392)](_0x493848(0x4ff)), _0x4fcaff = _0x2e4b8c['preferences'][_0x493848(0x98d)]; _0x4fcaff ? (_0x2e9bc6[_0x493848(0xb56)][_0x493848(0xb85)] = _0x493848(0x887) + _0x4fcaff + ')', _0x2e9bc6['style'][_0x493848(0xa1f)] = 'cover', _0x2e9bc6['style']['backgroundPosition'] = _0x493848(0x6a0), _0x2e9bc6[_0x493848(0xb56)][_0x493848(0xa96)] = _0x493848(0x330), _0x2e9bc6['querySelectorAll'](_0x493848(0x5c0))[_0x493848(0xb5e)](_0x513e7e => { const _0x53b6db = _0x493848; _0x53b6db(0x6c4) === _0x53b6db(0xc03) ? _0x35a2eb[_0x53b6db(0x41f)]['push'](..._0x4079b0[_0x53b6db(0x5ba)]) : _0x513e7e['style'][_0x53b6db(0x649)] = _0x53b6db(0x428); })) : _0x493848(0x241) === _0x493848(0x300) ? _0x58ad76 += _0x493848(0x5ac) : (_0x2e9bc6[_0x493848(0xb56)][_0x493848(0xb85)] = '', _0x2e9bc6[_0x493848(0xb56)][_0x493848(0xa96)] = '', _0x2e9bc6['querySelectorAll']('.widget-info\x20>\x20div')['forEach'](_0x4134ea => { const _0x16d760 = _0x493848; _0x4134ea[_0x16d760(0xb56)]['textShadow'] = ''; })); } const _0x289296 = document['getElementById'](_0x3abecc(0x234)), _0x18aef2 = document[_0x3abecc(0x392)](_0x3abecc(0x4bd)); _0x289296[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x29ecff = _0x3abecc; _0x9d3834(), _0x2bd982('friendCircleList', _0x29ecff(0xa74)); }), _0x18aef2[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x6d6b61 = _0x3abecc; if (_0x6d6b61(0x311) !== 'kbzEH') { if (_0x395604 === null) return; const _0x5f21b3 = _0x476566[_0x6d6b61(0x2c8)][_0x3b5cc3]; if (!_0x5f21b3) return; const _0x1eb534 = _0x3b20c6(); let _0x5c8e81 = '未知'; if (_0x5f21b3[_0x6d6b61(0x253)] === 'user') _0x5c8e81 = _0x4d3e67[_0x6d6b61(0x312)][_0x6d6b61(0x420)] || '我'; else { const _0x4d8e75 = _0x5f21b3[_0x6d6b61(0x662)] || _0x1eb534?.[_0x6d6b61(0xa2a)][0x0], _0x47806 = _0x3f1c93(_0x4d8e75); _0x5c8e81 = _0x47806 ? _0x47806['name'] : '角色'; } let _0x210b2d = _0x5f21b3[_0x6d6b61(0xa19)] || ''; if (_0x5f21b3[_0x6d6b61(0x6fd)]) _0x210b2d = _0x6d6b61(0x1e6); if (_0x5f21b3['image']) _0x210b2d = '[图片]'; if (_0x210b2d[_0x6d6b61(0x6f2)] > 0x32) _0x210b2d = _0x210b2d['substring'](0x0, 0x32) + _0x6d6b61(0x86f); _0x542c6a[_0x6d6b61(0x3ab)] = { 'sender': _0x5c8e81, 'content': _0x210b2d }, _0x13ede3(), _0x35b439(), _0x12ade1[_0x6d6b61(0x464)](); } else _0x196c12(), _0x2bd982(_0x6d6b61(0x787), _0x6d6b61(0xa74)); }), document[_0x3abecc(0x392)](_0x3abecc(0x8ee))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x2deb86 = _0x3abecc; _0x2bd982(_0x2deb86(0xa74), _0x2deb86(0x787)); }), document[_0x3abecc(0x392)](_0x3abecc(0xbe5))['addEventListener'](_0x3abecc(0x4b9), () => { const _0x5b32b8 = _0x3abecc; if (_0x3085bc) clearInterval(_0x3085bc); _0x3085bc = null, _0x2e4b8c[_0x5b32b8(0x540)] = [], _0x2e4b8c[_0x5b32b8(0x8f1)] = null, document['getElementById']('galgame-sprite-adjust-ui')[_0x5b32b8(0xb56)][_0x5b32b8(0x993)] = 'none', _0x2e4b8c[_0x5b32b8(0x7ee)] = null, _0x5a3c71(), _0x2bd982(_0x5b32b8(0x787), _0x5b32b8(0x588)); }); const _0x3b69bb = document['getElementById'](_0x3abecc(0xc1e)), _0x32b2fa = document[_0x3abecc(0x392)](_0x3abecc(0xbe8)); _0x32b2fa['addEventListener'](_0x3abecc(0x4b9), () => { const _0x531f79 = _0x3abecc, _0x2857fa = _0x3b69bb['value'][_0x531f79(0x8bb)](); _0x2857fa && (_0x49bbae(_0x2857fa), _0x3b69bb[_0x531f79(0x60e)] = '', setTimeout(_0x3137d6, 0x64)); }); function _0x45ee27(_0x1571a6, _0x464bbe) { const _0x48f1ab = _0x3abecc; if (_0x48f1ab(0x93d) === _0x48f1ab(0x316)) _0x181beb = _0x10b962[_0x48f1ab(0x89d)][0x0]; else { const _0x59e7b8 = document['getElementById'](_0x48f1ab(0x85e)), _0xb6ed1 = document[_0x48f1ab(0x9b8)]('.music-post-play-icon,\x20.music-share-play-icon'); _0xb6ed1[_0x48f1ab(0xb5e)](_0x45042d => { const _0x1c6cb9 = _0x48f1ab; _0x45042d !== _0x1571a6[_0x1c6cb9(0x50b)](_0x1c6cb9(0xaa7)) && (_0x1c6cb9(0xa6d) !== _0x1c6cb9(0x38f) ? _0x45042d[_0x1c6cb9(0x324)] = '▶' : (_0x15257c = _0x4178f9['createElement'](_0x1c6cb9(0x63a)), _0x27d5b4['id'] = _0x1c6cb9(0x260), _0x93f3bb[_0x1c6cb9(0x594)](_0x5f5257))); }); if (_0x59e7b8[_0x48f1ab(0x84e)] === _0x464bbe[_0x48f1ab(0x6ae)] && !_0x59e7b8['paused']) _0x59e7b8[_0x48f1ab(0x24e)](), _0x1571a6['querySelector'](_0x48f1ab(0xaa7))[_0x48f1ab(0x324)] = '▶'; else { if (_0x48f1ab(0x9c0) !== _0x48f1ab(0x9c0)) { if (!_0x19b6a9) return; _0x165a33[_0x41bab3] = _0x2a9521, _0x5f5015[_0x84bc1c]['querySelector']('.slot-filename')[_0x48f1ab(0x324)] = _0x312928['name'], _0xc7198[_0x238425][_0x48f1ab(0x42c)][_0x48f1ab(0x6ec)]('filled'), _0x2c67f1(); } else _0x59e7b8[_0x48f1ab(0x84e)] = _0x464bbe[_0x48f1ab(0x6ae)], _0x59e7b8[_0x48f1ab(0x792)](), _0x1571a6[_0x48f1ab(0x50b)](_0x48f1ab(0xaa7))[_0x48f1ab(0x324)] = '❚❚'; } } } const _0x5cc78 = document[_0x3abecc(0x392)](_0x3abecc(0x58b)); async function _0x1a43c8(_0x30fae7) { const _0x1a0367 = _0x3abecc; if (_0x1a0367(0x553) === _0x1a0367(0x5b8)) return _0x1fc1e2['chats'][_0x1a0367(0x69e)](_0x5d2e28 => _0x5d2e28['id'] === _0x3762ff[_0x1a0367(0x7ee)]); else { if (!_0x30fae7 || !_0x30fae7['startsWith'](_0x1a0367(0x80f))) return ![]; return new Promise(_0x4dc41e => { const _0x1d6425 = _0x1a0367, _0x45cd76 = document[_0x1d6425(0x92e)](_0x1d6425(0x6d9)); _0x45cd76[_0x1d6425(0x84e)] = _0x30fae7; const _0x247046 = setTimeout(() => { _0x26afe9(), _0x4dc41e(![]); }, 0xbb8), _0x26afe9 = () => { const _0x4d13e0 = _0x1d6425; clearTimeout(_0x247046), _0x45cd76['removeEventListener'](_0x4d13e0(0x329), _0x18dae5), _0x45cd76[_0x4d13e0(0x6e4)](_0x4d13e0(0x5b1), _0x57eb45), _0x45cd76['src'] = '', _0x45cd76['remove'](); }, _0x18dae5 = () => { const _0x589212 = _0x1d6425; 'ybyzR' !== _0x589212(0x500) ? (_0x26afe9(), _0x4dc41e(!![])) : (_0x1e1050[_0x589212(0xb56)][_0x589212(0xb85)] = _0x589212(0x24b) + _0x5fbcc3[_0x589212(0x38c)](_0x507098) + '\x27)', _0x34bf48[_0x589212(0xb56)]['backgroundSize'] = _0x589212(0x883), _0x557732['style'][_0x589212(0x979)] = 'center'); }, _0x57eb45 = () => { _0x26afe9(), _0x4dc41e(![]); }; _0x45cd76[_0x1d6425(0xabf)]('canplaythrough', _0x18dae5), _0x45cd76[_0x1d6425(0xabf)](_0x1d6425(0x5b1), _0x57eb45); }); } } async function _0x273f55(_0x402542, _0x54e8e2) { const _0x288b04 = _0x3abecc, _0x4b90ed = [_0x288b04(0x9b5), _0x288b04(0xb0f)]; for (const _0x545703 of _0x4b90ed) { try { const _0x2b6eaf = _0x288b04(0x45a) + _0x545703 + _0x288b04(0x9a2) + encodeURIComponent(_0x402542) + '-' + encodeURIComponent(_0x54e8e2), _0x5401ac = await fetch(_0x2b6eaf), _0x124b96 = await _0x5401ac[_0x288b04(0xb9f)](); if (_0x124b96['code'] !== 0xc8 || !_0x124b96[_0x288b04(0x6c9)] || _0x124b96['data'][_0x288b04(0x6f2)] === 0x0) continue; const _0x441e69 = _0x124b96[_0x288b04(0x6c9)]['slice'](0x0, 0x5); for (const _0x1b917b of _0x441e69) { const _0x43bc6c = _0x288b04(0x45a) + _0x545703 + _0x288b04(0xa87) + _0x1b917b['id'], _0x440f68 = await fetch(_0x43bc6c), _0x526701 = await _0x440f68[_0x288b04(0xb9f)](), _0x513815 = _0x526701[_0x288b04(0x6c9)]?.[_0x288b04(0x6ae)]; if (await _0x1a43c8(_0x513815)) return { 'url': _0x513815, 'cover': _0x1b917b[_0x288b04(0x883)], 'source': _0x545703 }; } } catch (_0x10fdae) { console['error'](_0x288b04(0x6d1) + _0x545703 + ':', _0x10fdae); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x30c8ec(_0x2d4181) { const _0x192454 = _0x3abecc; if (_0x192454(0x3bc) === _0x192454(0x3bc)) try { if (_0x192454(0x61a) === _0x192454(0x61a)) { const _0x56b84b = JSON[_0x192454(0x30c)](localStorage['getItem'](_0x192454(0xc22)) || '{}'), _0x42abab = { ..._0x56b84b, ..._0x2d4181 }; localStorage[_0x192454(0x963)](_0x192454(0xc22), JSON[_0x192454(0x2bf)](_0x42abab)); } else { const _0x8c956b = _0x818396['friendCircles'][_0x192454(0x69e)](_0xfdc4f2 => _0xfdc4f2['id'] === _0x649b94['activeFriendCircleId']), _0x534f38 = _0x5147c5(); let _0x97a540 = []; if (_0x8c956b && _0x8c956b[_0x192454(0x983)]) { const _0x494c37 = _0x8c956b['posts']['filter'](_0x1015ef => _0x1015ef['type'] === _0x192454(0xc2d) && _0x1015ef['playableUrl'])['map'](_0x52019d => ({ ..._0x52019d, 'source': 'feed' })); _0x97a540['push'](..._0x494c37); } if (_0x534f38 && _0x548cb4[_0x192454(0x2c8)]) { const _0x47baec = _0x1b4f87[_0x192454(0x2c8)][_0x192454(0x742)](_0x475764 => _0x475764[_0x192454(0x875)] === _0x192454(0xc2d) && _0x475764['playableUrl'])[_0x192454(0x5e9)](_0x163c54 => ({ ..._0x163c54, 'source': _0x192454(0x4fb) })); _0x97a540[_0x192454(0x7e4)](..._0x47baec); } const _0x3a66a0 = _0x32e47a['from'](new _0x4f3b02(_0x97a540[_0x192454(0x5e9)](_0x3d148b => [_0x3d148b[_0x192454(0x565)], _0x3d148b]))['values']()); _0x257239[_0x192454(0x29c)] = _0x3a66a0[_0x192454(0x474)]((_0x3fa0ce, _0x42125e) => _0x42125e[_0x192454(0x518)] - _0x3fa0ce[_0x192454(0x518)]); } } catch (_0x5d20df) { console['error'](_0x192454(0x584), _0x5d20df); } else _0x254eea[_0x192454(0x3f7)] = _0xefd5bf, _0x2dbb96 = !![]; } async function _0x5804df() { const _0x1feefb = _0x3abecc; if (_0x1feefb(0x9d1) !== 'ZQzYg') { _0x29fe0c(_0x1feefb(0x5e4)); return; } else { const _0x2595cb = document[_0x1feefb(0x392)](_0x1feefb(0x349)), _0x5bc5a4 = document[_0x1feefb(0x392)](_0x1feefb(0x7cb)); try { if (_0x1feefb(0xa81) !== _0x1feefb(0x5f6)) { let _0x353f04 = await _0x1de353(_0x1feefb(0xbfe)); if (!_0x353f04) { const _0x13316f = JSON[_0x1feefb(0x30c)](localStorage[_0x1feefb(0x956)](_0x1feefb(0xc22)) || '{}'); if (_0x13316f['image']) { if (_0x1feefb(0x7d8) !== 'zoXlB') return _0x1e77cf[_0x1feefb(0x89d)][_0x1feefb(0x69e)](_0x47a1b0 => _0x47a1b0['id'] === _0x550809[_0x1feefb(0x789)]) || _0x4c47e4['userProfiles'][0x0]; else _0x353f04 = await _0x5db80c(_0x13316f[_0x1feefb(0x3f7)]), await _0x3b613b(_0x1feefb(0xbfe), _0x353f04); } } _0x353f04 ? 'mPJLC' !== _0x1feefb(0xbde) ? _0x587747 = { 'speaker': _0x33f8ca[_0x1feefb(0x420)], 'line': _0x1e6f56['content'], 'emotion': _0x1feefb(0x83c) } : (_0x5bc5a4['src'] = URL[_0x1feefb(0x38c)](_0x353f04), _0x5bc5a4[_0x1feefb(0xb56)][_0x1feefb(0x993)] = 'block', _0x2595cb[_0x1feefb(0xb56)]['border'] = 'none') : _0x1feefb(0x60b) !== _0x1feefb(0x78d) ? (_0x5bc5a4[_0x1feefb(0xb56)][_0x1feefb(0x993)] = _0x1feefb(0x3a4), _0x2595cb['style']['border'] = _0x1feefb(0x368)) : (_0xb66bf4('chat', 'groupChatCreate'), _0x168fce(![])), _0x2595cb[_0x1feefb(0xb56)][_0x1feefb(0x993)] = _0x1feefb(0x94c); } else { const _0x4c0b11 = new _0x38a055(); _0x4c0b11[_0x1feefb(0x779)] = () => _0x3256c6(_0x4c0b11[_0x1feefb(0x3cf)]), _0x4c0b11['onerror'] = _0x45b170, _0x4c0b11[_0x1feefb(0x59f)](_0xcd08d9); } } catch (_0xdb22fe) { 'zQgnV' !== _0x1feefb(0x9c9) ? _0x2056b0(![]) : console[_0x1feefb(0x5b1)]('加载徽章图片失败', _0xdb22fe); } } } async function _0x5346a4() { const _0x400c82 = _0x3abecc; if (_0x400c82(0x731) === _0x400c82(0x230)) { const _0x300287 = _0x2cb855[_0x400c82(0x41f)][_0x400c82(0x948)](_0x188dfa => _0x188dfa['id'] === _0x591656); _0x300287 > -0x1 && (_0x439835[_0x400c82(0x41f)][_0x400c82(0x872)](_0x300287, 0x1), _0x197673(), _0x359bc6()); } else { const _0x376c89 = document[_0x400c82(0x392)](_0x400c82(0x291)), _0x23029f = document[_0x400c82(0x392)]('card-image'), _0x4959b3 = document[_0x400c82(0x392)]('card-widget-2'), _0x4560ac = document[_0x400c82(0x392)](_0x400c82(0x4a3)); try { let _0x50c5ed = await _0x1de353(_0x400c82(0xabe)); _0x50c5ed ? (_0x23029f[_0x400c82(0x84e)] = URL['createObjectURL'](_0x50c5ed), _0x23029f[_0x400c82(0xb56)][_0x400c82(0x993)] = 'block', _0x376c89[_0x400c82(0xb56)][_0x400c82(0xb6a)] = 'none', _0x376c89[_0x400c82(0xb56)][_0x400c82(0x20c)] = _0x400c82(0x4e3)) : (_0x23029f[_0x400c82(0xb56)]['display'] = _0x400c82(0x3a4), _0x376c89[_0x400c82(0xb56)][_0x400c82(0xb6a)] = _0x400c82(0x368), _0x376c89[_0x400c82(0xb56)][_0x400c82(0x20c)] = 'rgba(255,255,255,0.2)'); _0x376c89['style'][_0x400c82(0x993)] = _0x400c82(0x94c); let _0x4a9a98 = await _0x1de353(_0x400c82(0x509)); _0x4a9a98 ? (_0x4560ac[_0x400c82(0x84e)] = URL['createObjectURL'](_0x4a9a98), _0x4560ac['style'][_0x400c82(0x993)] = _0x400c82(0x94c), _0x4959b3[_0x400c82(0xb56)][_0x400c82(0xb6a)] = _0x400c82(0x3a4), _0x4959b3[_0x400c82(0xb56)][_0x400c82(0x20c)] = _0x400c82(0x4e3)) : (_0x4560ac[_0x400c82(0xb56)][_0x400c82(0x993)] = _0x400c82(0x3a4), _0x4959b3[_0x400c82(0xb56)][_0x400c82(0xb6a)] = _0x400c82(0x368), _0x4959b3[_0x400c82(0xb56)]['background'] = _0x400c82(0x4f3)), _0x4959b3['style'][_0x400c82(0x993)] = _0x400c82(0x94c); } catch (_0x4b475a) { if ('Texnh' === _0x400c82(0x7ae)) console[_0x400c82(0x5b1)](_0x400c82(0xbcb), _0x4b475a); else { if (!_0x48e113[_0x400c82(0x74a)](_0x4751ae) || _0xf6e3a2['length'] === 0x0) return _0x400c82(0x401); return _0x400c82(0xbb1) + _0x302dfd['map']((_0x30f835, _0x61a33b) => { const _0x3dc889 = _0x400c82, _0x283470 = _0x5b1302[_0x3dc889(0x2bf)](_0x30f835['log'] || [])['replace'](/'/g, _0x3dc889(0xb9d))['replace'](/"/g, _0x3dc889(0x797)), _0x1a8835 = _0x30f835[_0x3dc889(0x58e)] || _0x3dc889(0x68e); return _0x3dc889(0x8cd) + (_0x61a33b < _0x26b49f[_0x3dc889(0x6f2)] - 0x1 ? _0x3dc889(0x526) : '') + _0x3dc889(0x439) + _0x283470 + _0x3dc889(0x975) + _0x1a8835 + _0x3dc889(0x7e6) + _0x180428 + '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>' + _0x1a8835[_0x3dc889(0x79b)](0x0) + _0x3dc889(0x88c) + _0x1a8835 + _0x3dc889(0x305) + (_0x30f835[_0x3dc889(0x642)] || '') + _0x3dc889(0x492); })['join']('') + _0x400c82(0x892); } } } } async function _0x5346a4() { const _0x531bee = _0x3abecc; if (_0x531bee(0x345) !== _0x531bee(0x345)) { _0x293287[_0x531bee(0x2c9)] = _0x531bee(0x275); return; } else { const _0x372cdf = document[_0x531bee(0x392)](_0x531bee(0x291)), _0x1ac57e = document[_0x531bee(0x392)](_0x531bee(0x858)); try { if (_0x531bee(0x764) !== 'uYbuf') { let _0x264d96 = await _0x1de353(_0x531bee(0xabe)); if (!_0x264d96) { const _0x579c5e = JSON[_0x531bee(0x30c)](localStorage[_0x531bee(0x956)]('cardWidgetState') || '{}'); if (_0x579c5e['image']) { if (_0x531bee(0xaae) !== _0x531bee(0x85c)) console[_0x531bee(0xbf0)](_0x531bee(0x665)), _0x264d96 = await _0x5db80c(_0x579c5e[_0x531bee(0x3f7)]), await _0x3b613b(_0x531bee(0xabe), _0x264d96); else { const _0x5010b0 = new _0x12c170(_0x24ec86[_0x531bee(0x518)])['toLocaleTimeString'](_0x531bee(0x591), { 'hour': _0x531bee(0x2f5), 'minute': _0x531bee(0x2f5) }); _0x543056[_0x531bee(0xa19)] && _0x3546fd['push']('[' + _0x5010b0 + _0x531bee(0x52c) + _0x5b43c3(_0x59cf31) + ']\x20' + _0x22ed98(_0x37e51e[_0x531bee(0xa19)])[_0x531bee(0x8bb)]()); } } } _0x264d96 ? (_0x1ac57e[_0x531bee(0x84e)] = URL['createObjectURL'](_0x264d96), _0x372cdf['style'][_0x531bee(0x993)] = _0x531bee(0x94c)) : _0x531bee(0xa57) !== _0x531bee(0x638) ? _0x372cdf[_0x531bee(0xb56)]['display'] = 'none' : _0x36046b[_0x531bee(0x789)] = _0x41df95['userProfiles'][0x0]['id']; } else _0x24c1d4[_0x531bee(0x89d)] = _0x4f5d69['userProfiles']['filter'](_0x95aa9 => _0x95aa9['id'] !== _0x5cff87), _0x3578a4[_0x531bee(0x789)] === _0x40a090 && (_0x248e48[_0x531bee(0x789)] = _0x4b0264[_0x531bee(0x89d)][0x0]['id']), _0x5a3b69[_0x531bee(0x442)][_0x531bee(0xb5e)](_0x3d152d => { const _0x15c7d3 = _0x531bee; _0x3d152d[_0x15c7d3(0x22e)] === _0x389eac && (_0x3d152d[_0x15c7d3(0x22e)] = _0x112127[_0x15c7d3(0x789)]); }), _0x48a469(), _0x5ae47f(_0x531bee(0x6a8)), _0x24ed7b(), _0x595a44(_0x531bee(0x660), _0x531bee(0x312)); } catch (_0x91b918) { console[_0x531bee(0x5b1)]('加载卡片图片失败', _0x91b918); } try { if ('LVVrA' !== _0x531bee(0x909)) { let _0x282a9f = await _0x1de353(_0x531bee(0x509)); const _0x3efb3b = document[_0x531bee(0x392)](_0x531bee(0x4a3)), _0x516a51 = document[_0x531bee(0x392)](_0x531bee(0xc0f)); if (_0x282a9f) _0x3efb3b[_0x531bee(0x84e)] = URL['createObjectURL'](_0x282a9f), _0x516a51[_0x531bee(0xb56)][_0x531bee(0x993)] = _0x531bee(0x94c); else { if (_0x531bee(0x8ce) !== _0x531bee(0x4f7)) _0x516a51[_0x531bee(0xb56)][_0x531bee(0x993)] = 'none'; else { const _0x35e3b8 = _0x531bee(0x5f9); _0x4143a8 = _0x531bee(0x2f6) + _0x1851fd[_0x531bee(0x420)] + _0x531bee(0x917) + _0x35e3b8 + _0x531bee(0x512) + _0x587c01[_0x531bee(0x420)] + _0x531bee(0xa66) + _0x35e3b8 + _0x531bee(0xa4d) + _0x35e3b8 + _0x531bee(0x873); } } } else { if (_0x4be89f[_0x531bee(0x253)] === _0x531bee(0x5c3) && _0x4cbd61['image']) return { 'role': _0x531bee(0x5c3), 'content': [{ 'type': 'text', 'text': _0x4d360d[_0x531bee(0xa19)] || '\x20' }, { 'type': _0x531bee(0x7dc), 'image_url': { 'url': _0x6f3848[_0x531bee(0x3f7)], 'detail': _0x531bee(0x3a6) } }] }; return { 'role': _0x46f847[_0x531bee(0x253)], 'content': _0x1860dd[_0x531bee(0xa19)] }; } } catch (_0x53fd3c) { console[_0x531bee(0x5b1)]('加载第二个卡片图片失败', _0x53fd3c); } } } _0xc4e981[_0x3abecc(0xabf)]('click', () => { const _0x44dc67 = _0x3abecc; _0x44dc67(0x3e0) !== 'yHtwN' ? (_0x40e39e(), _0x2bd982(_0x44dc67(0x660), 'home')) : _0x2a14a6('错误:\x20' + _0x4522c7[_0x44dc67(0x542)]); }), document[_0x3abecc(0x392)](_0x3abecc(0x87f))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x2bd982('home', 'userProfileList')), document[_0x3abecc(0x392)](_0x3abecc(0x7cc))['addEventListener'](_0x3abecc(0x4b9), () => _0x308677()), document[_0x3abecc(0x392)](_0x3abecc(0xa24))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x34f127 = _0x3abecc; _0x40e39e(), _0x2bd982(_0x34f127(0x660), _0x34f127(0x312)); }), document[_0x3abecc(0x392)](_0x3abecc(0x961))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x2a26c9), document[_0x3abecc(0x392)](_0x3abecc(0xbfd))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x440024), document['getElementById']('set-active-user-button')['addEventListener'](_0x3abecc(0x4b9), () => { const _0x25dafd = _0x3abecc; if ('yuFrK' !== _0x25dafd(0xbf2)) _0x48a441(); else { const _0x202792 = document[_0x25dafd(0x392)](_0x25dafd(0x4de))['value']; _0x202792 && (_0x2e4b8c[_0x25dafd(0x789)] = _0x202792, _0x5a3c71(), _0x18c07b(_0x25dafd(0xb3d)), _0x40e39e(), document[_0x25dafd(0x392)]('set-active-user-button')['style'][_0x25dafd(0x993)] = _0x25dafd(0x3a4)); } }); function _0x23edb1(_0x544555) { const _0x4562a5 = _0x3abecc; if ('JmhXg' !== 'EEaWk') { const _0x2efb23 = _0x2e4b8c[_0x4562a5(0x442)]['find'](_0x38f6ae => _0x38f6ae['id'] === _0x544555), _0x4e7986 = _0x2efb23?.['boundUserProfileId']; let _0x7dce4b = _0x2e4b8c[_0x4562a5(0x89d)][_0x4562a5(0x69e)](_0x168896 => _0x168896['id'] === _0x4e7986); return !_0x7dce4b && (_0x4562a5(0xa75) === _0x4562a5(0x272) ? (_0x6803ba['style'][_0x4562a5(0xb85)] = _0x4562a5(0x887) + _0x1d309f + ')', _0x3dd37b[_0x4562a5(0xb56)][_0x4562a5(0xa1f)] = _0x4562a5(0x883), _0xfdcdb0[_0x4562a5(0xb56)][_0x4562a5(0x979)] = 'center', _0x4c2efa[_0x4562a5(0xb56)]['color'] = _0x4562a5(0x330), _0x507f13[_0x4562a5(0x9b8)]('.widget-info\x20>\x20div')[_0x4562a5(0xb5e)](_0x49340e => { const _0xb870d2 = _0x4562a5; _0x49340e[_0xb870d2(0xb56)][_0xb870d2(0x649)] = _0xb870d2(0x428); })) : _0x7dce4b = _0x2e4b8c[_0x4562a5(0x89d)][_0x4562a5(0x69e)](_0x5601a0 => _0x5601a0['id'] === _0x2e4b8c[_0x4562a5(0x789)]) || _0x2e4b8c[_0x4562a5(0x89d)][0x0]), _0x7dce4b || { 'name': '用户', 'avatar': _0x3efbf6, 'persona': '' }; } else { const _0x5ec332 = _0x984937[_0x4562a5(0x89d)][_0x4562a5(0x69e)](_0x370691 => _0x370691['id'] === _0xc49217); if (_0x5ec332) _0x477ef8[_0x4562a5(0x9cb)](_0x5ec332, _0x5e8fcb); } } function _0x4613dc(_0x52bb75) { const _0x43f1a3 = _0x3abecc, _0xc02b5e = document[_0x43f1a3(0x392)](_0x52bb75); _0xc02b5e[_0x43f1a3(0x2c9)] = '', _0x2e4b8c[_0x43f1a3(0x89d)][_0x43f1a3(0xb5e)](_0x472929 => { const _0x313534 = _0x43f1a3, _0x499d58 = document[_0x313534(0x92e)](_0x313534(0x9b6)); _0x499d58[_0x313534(0x60e)] = _0x472929['id'], _0x499d58['textContent'] = _0x472929[_0x313534(0x420)], _0xc02b5e['appendChild'](_0x499d58); }); } function _0x537ba1(_0x6c3330) { const _0x3676bf = _0x3abecc; if (_0x3676bf(0x7a7) !== _0x3676bf(0x7a7)) { if (!_0x400961) return; _0x1962ea = _0x217876['changedTouches'][0x0][_0x3676bf(0x304)], _0x2339d0 === _0x3676bf(0x2e1) && _0x35acd9(), _0x388f71 = ![]; } else { const _0x537889 = _0x2653c6(_0x6c3330), _0x3cfc2c = document[_0x3676bf(0x392)](_0x3676bf(0x7d7)); _0x3cfc2c[_0x3676bf(0xb56)][_0x3676bf(0xb85)] = ''; let _0x28cc2c = document[_0x3676bf(0x392)](_0x3676bf(0x343) + _0x6c3330); if (_0x28cc2c) _0x28cc2c[_0x3676bf(0x2c9)] = ''; if (!_0x537889) return; _0x537889[_0x3676bf(0x59d)] && (_0x3cfc2c[_0x3676bf(0xb56)][_0x3676bf(0xb85)] = _0x3676bf(0x24b) + _0x537889['chatWallpaper'] + '\x27)', _0x3cfc2c[_0x3676bf(0xb56)]['backgroundSize'] = 'cover', _0x3cfc2c[_0x3676bf(0xb56)][_0x3676bf(0x979)] = _0x3676bf(0x6a0)); if (_0x537889[_0x3676bf(0xafb)]) { let _0x4df0ab = document[_0x3676bf(0x392)](_0x3676bf(0x343) + _0x537889['id']); !_0x4df0ab && (_0x4df0ab = document[_0x3676bf(0x92e)]('style'), _0x4df0ab['id'] = _0x3676bf(0x343) + _0x537889['id'], document[_0x3676bf(0x3df)][_0x3676bf(0x594)](_0x4df0ab)); const _0x37bc5b = _0x537889['bubbleCss'], _0x1e14ed = _0x37bc5b['replace'](/\.bubble\.sent/g, _0x3676bf(0x75b) + _0x537889['id'] + _0x3676bf(0x802))[_0x3676bf(0x8d5)](/\.bubble\.received/g, _0x3676bf(0x75b) + _0x537889['id'] + _0x3676bf(0x6e9)); _0x4df0ab['innerHTML'] = _0x1e14ed; } } } function _0x1328f1() { const _0x3ebde0 = _0x3abecc, _0x3d5a29 = document[_0x3ebde0(0x392)](_0x3ebde0(0x4c1)); _0x3d5a29['innerHTML'] = ''; const _0x4e7413 = _0x2bf3d9 => { const _0x589aa6 = _0x3ebde0; _0x2e4b8c['pendingPostAttachments'][_0x2bf3d9] = null; if (_0x2bf3d9 === _0x589aa6(0x3f7)) _0x2e4b8c[_0x589aa6(0x7f0)][_0x589aa6(0xb1a)] = null; _0x1328f1(); }, _0x479918 = _0x2e4b8c[_0x3ebde0(0x7f0)][_0x3ebde0(0xb1a)], _0x30bd7f = _0x2e4b8c['pendingPostAttachments'][_0x3ebde0(0xc2d)]; if (_0x479918) { const _0x34da47 = document[_0x3ebde0(0x92e)](_0x3ebde0(0x63a)); _0x34da47['className'] = _0x3ebde0(0x8d0), _0x34da47[_0x3ebde0(0x2c9)] = _0x3ebde0(0x353), _0x34da47['querySelector']('.remove-attachment-btn')['onclick'] = () => _0x4e7413('image'), _0x3d5a29[_0x3ebde0(0x594)](_0x34da47), _0x1de353(_0x479918)['then'](_0x315e6f => { const _0xefaa3a = _0x3ebde0, _0x12f1dc = document[_0xefaa3a(0x392)]('pending-post-image-preview'); if (_0x12f1dc && _0x315e6f) { if (_0xefaa3a(0x4d7) === _0xefaa3a(0x9a3)) { const _0x36e782 = _0x32b327[_0x5f072c]; if (typeof _0x36e782 === 'string') _0xb9e274[_0xefaa3a(0x7e4)](_0x36e782); if (_0x2cf1db[_0xefaa3a(0x74a)](_0x36e782)) _0x36e782[_0xefaa3a(0xb5e)](_0x27a9b2 => { const _0x22c4b1 = _0xefaa3a; if (typeof _0x27a9b2 === _0x22c4b1(0x41d)) _0x541836[_0x22c4b1(0x7e4)](_0x27a9b2); }); } else _0x12f1dc[_0xefaa3a(0x84e)] = URL['createObjectURL'](_0x315e6f); } }); } if (_0x30bd7f) { if (_0x3ebde0(0xa7e) !== 'ZqTmI') { const _0x2f258d = document[_0x3ebde0(0x92e)]('div'); _0x2f258d['className'] = 'preview-item', _0x2f258d['innerHTML'] = _0x3ebde0(0x48e) + (_0x30bd7f['coverUrl'] || _0x2be033) + _0x3ebde0(0x9d7) + _0x30bd7f[_0x3ebde0(0x50e)] + _0x3ebde0(0x1d7) + _0x30bd7f[_0x3ebde0(0x5c7)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2f258d[_0x3ebde0(0x50b)](_0x3ebde0(0x82b))[_0x3ebde0(0x998)] = () => _0x4e7413('music'), _0x3d5a29[_0x3ebde0(0x594)](_0x2f258d); } else _0x51b458[_0x3ebde0(0x5dd)] = _0x356686, _0x4da338(_0x3f8293['activeMeetingCharId'], 'normal'); } } async function _0x181a6e(_0x7c5cfa) { const _0x4bb9b7 = _0x3abecc; if (_0x4bb9b7(0x5d7) === 'ptkZQ') delete _0x1f6a9f['avatar']; else { const _0x14137a = _0x2e4b8c['friendCircles'][_0x4bb9b7(0x69e)](_0xadf815 => _0xadf815['id'] === _0x2e4b8c[_0x4bb9b7(0xbb0)]); if (!_0x14137a) return; _0x5b3ee9(!![], _0x4bb9b7(0x87b)), _0x2e4b8c[_0x4bb9b7(0x524)] = !![]; try { const _0x19fa47 = _0x14137a[_0x4bb9b7(0x8e7)][_0x4bb9b7(0x5e9)](_0x3650c5 => _0x2653c6(_0x3650c5))[_0x4bb9b7(0x742)](Boolean), _0x57c1e5 = _0x4bf621(), _0xa39990 = _0x19fa47[_0x4bb9b7(0x5e9)](_0x102fef => { const _0x586e5e = _0x4bb9b7, { omniText: _0x20de2e } = _0x42b275(_0x102fef['id'], null), _0x2923f5 = _0x44a6ac(_0x102fef['id']), _0x155eb9 = _0x102fef['linkedWorldBookIds'] && _0x102fef[_0x586e5e(0x25d)][_0x586e5e(0x6f2)] > 0x0 ? _0x586e5e(0xa28) + _0x102fef['name'] + _0x586e5e(0x4d5) + _0x102fef[_0x586e5e(0x25d)][_0x586e5e(0x5e9)](_0x286854 => _0x2e4b8c[_0x586e5e(0x285)]['find'](_0x164573 => _0x164573['id'] === _0x286854))[_0x586e5e(0x742)](Boolean)[_0x586e5e(0x5e9)](_0xf7d54c => _0x586e5e(0x83b) + _0xf7d54c[_0x586e5e(0x420)] + '\x0a' + _0xf7d54c[_0x586e5e(0xa19)])[_0x586e5e(0x52b)]('') : ''; return _0x586e5e(0x318) + _0x102fef['name'] + ',\x20ID:\x20' + _0x102fef['id'] + '\x0a\x20\x20人设:\x20' + _0x102fef[_0x586e5e(0x5cd)] + _0x586e5e(0x8d6) + _0x20de2e + '\x0a' + _0x2923f5 + '\x0a' + _0x155eb9; })[_0x4bb9b7(0x52b)]('\x0a\x0a'), _0x164682 = _0x220f78(_0x7c5cfa[_0x4bb9b7(0x825)]) || { 'name': '用户' }, _0x2d2b1a = _0x164682[_0x4bb9b7(0x5cd)] ? _0x4bb9b7(0x23d) + _0x164682[_0x4bb9b7(0x420)] + _0x4bb9b7(0x905) + _0x164682[_0x4bb9b7(0x5cd)] + '\x0a' : ''; let _0x1f6da7 = null; if (_0x7c5cfa[_0x4bb9b7(0x3f7)]) _0x1f6da7 = _0x7c5cfa[_0x4bb9b7(0x3f7)]; else { if (_0x7c5cfa[_0x4bb9b7(0xb1a)]) try { if (_0x4bb9b7(0x8d9) !== _0x4bb9b7(0x8d9)) _0x47ac42['boundUserProfileId'] = _0x4bc83d; else { const _0x53f13e = await _0x1de353(_0x7c5cfa[_0x4bb9b7(0xb1a)]); _0x53f13e && (_0x1f6da7 = await _0x5a357c(_0x53f13e)); } } catch (_0x257c22) { console[_0x4bb9b7(0x5b1)](_0x4bb9b7(0x277), _0x257c22); } } let _0x534f8f = _0x164682[_0x4bb9b7(0x420)] + _0x4bb9b7(0xbec) + _0x7c5cfa[_0x4bb9b7(0xa19)] + '”'; if (_0x1f6da7) { if (_0x4bb9b7(0x4dd) !== 'NRPXc') { _0x11c30c && _0x9c3357[_0x4bb9b7(0x7e4)](_0x298a81); _0x538c19 = {}; const _0x202d68 = _0x6dd6a1[_0x4bb9b7(0x58c)](0x2), _0x45d5cf = _0x202d68[_0x4bb9b7(0x686)](/:\s(.+)/); if (_0x45d5cf[_0x4bb9b7(0x6f2)] > 0x1) { const _0x3a8e77 = _0x45d5cf[0x0][_0x4bb9b7(0x8bb)](), _0x537b4b = _0x45d5cf[0x1]['trim']()[_0x4bb9b7(0x8d5)](/^"|"$/g, ''); _0x569099[_0x3a8e77] = _0x537b4b; } } else _0x534f8f += _0x4bb9b7(0x246); } if (_0x7c5cfa[_0x4bb9b7(0x875)] === _0x4bb9b7(0xc2d)) { if (_0x4bb9b7(0x3be) !== 'wCbKv') _0x534f8f += _0x4bb9b7(0x8c1) + _0x7c5cfa[_0x4bb9b7(0x50e)] + _0x4bb9b7(0x926) + _0x7c5cfa[_0x4bb9b7(0x5c7)] + ']'; else { _0x5e7aae = _0x930a1f; const _0x1fbb5e = _0x5a42af(_0x2aeca7); if (!_0x1fbb5e) return; const _0x3e219b = _0x3bca45[_0x4bb9b7(0x392)](_0x4bb9b7(0x652)), _0xa20b28 = _0x2f5b4b[_0x4bb9b7(0x392)](_0x4bb9b7(0x647)); if (_0xa20b28) _0xa20b28[_0x4bb9b7(0xb26)](); const _0x2a25a5 = _0xfeca09[_0x4bb9b7(0x392)](_0x4bb9b7(0x34f)); if (_0x2a25a5) _0x2a25a5[_0x4bb9b7(0xb26)](); _0x3e219b[_0x4bb9b7(0x256)](_0x4bb9b7(0x2af), _0x4bb9b7(0x81e)), _0x3e219b['insertAdjacentHTML'](_0x4bb9b7(0x2af), '<div\x20id=\x22snoop-dock\x22></div>'), _0x2f8887[_0x4bb9b7(0x392)]('snoop-char-name-header')[_0x4bb9b7(0x324)] = '', _0x45083a(); if (_0x27afc7) _0x37f7c2(_0x54fed9); _0x5bdf05(), _0x1596ca = _0x1390a6(_0x282fd7, 0x2710), _0x10b46e(_0x4bb9b7(0xbab), _0x4bb9b7(0xb16)); } } const _0x29d020 = _0x4bb9b7(0x38d) + _0xa39990 + '\x0a\x0a' + _0x2d2b1a + _0x4bb9b7(0x5d0) + _0x57c1e5 + _0x4bb9b7(0xa65) + _0x534f8f + _0x4bb9b7(0x1ed), _0x14a9b5 = [{ 'role': _0x4bb9b7(0x2d3), 'content': _0x29d020 }], _0x25451c = { 'role': _0x4bb9b7(0x5c3), 'content': '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。' }; if (_0x1f6da7) { if (_0x4bb9b7(0x511) === 'aJnDX') _0x25451c['image'] = _0x1f6da7; else { _0x1811ac('找不到要清空的聊天记录。'); return; } } _0x14a9b5[_0x4bb9b7(0x7e4)](_0x25451c); const _0x2f35e0 = await _0x45b854(_0x14a9b5, { 'json': !![] }), _0x3f69b9 = _0x2f35e0[_0x4bb9b7(0xaab)](/({[\s\S]*})/); if (!_0x3f69b9) throw new Error(_0x4bb9b7(0x4c9)); const _0x1521e1 = JSON[_0x4bb9b7(0x30c)](_0x3f69b9[0x1]), _0x32cb80 = _0x14137a[_0x4bb9b7(0x983)][_0x4bb9b7(0x69e)](_0x297c6e => _0x297c6e['id'] === _0x7c5cfa['id']); _0x32cb80 && (_0x32cb80[_0x4bb9b7(0x508)] = _0x1521e1[_0x4bb9b7(0x508)] || [], _0x32cb80['comments'] = (_0x1521e1[_0x4bb9b7(0xb3b)] || [])[_0x4bb9b7(0x5e9)]((_0x95cd11, _0x20ad31) => ({ ..._0x95cd11, 'commentId': 'c_' + _0x7c5cfa[_0x4bb9b7(0x518)] + '_' + _0x20ad31 })), _0x5a3c71(), _0x21cf7a()); } catch (_0x36f013) { console['error']('生成动态回复失败:', _0x36f013), _0x18c07b(_0x4bb9b7(0x6ac)); } finally { 'xwWtX' === _0x4bb9b7(0xbcf) ? (_0x5b3ee9(![]), _0x2e4b8c[_0x4bb9b7(0x524)] = ![]) : _0x15d63e = _0x17515a; } } } function _0x156a5f() { const _0xf127c3 = _0x3abecc, _0x4911b5 = _0x2e4b8c[_0xf127c3(0x2b2)]['find'](_0x8a061b => _0x8a061b['id'] === _0x2e4b8c['activeFriendCircleId']), _0x502ec5 = _0x4911b5?.[_0xf127c3(0x22e)]; let _0x4fcd4b = _0x2e4b8c['userProfiles'][_0xf127c3(0x69e)](_0x3f3e98 => _0x3f3e98['id'] === _0x502ec5); !_0x4fcd4b && (_0x4fcd4b = _0x2e4b8c[_0xf127c3(0x89d)][_0xf127c3(0x69e)](_0x28d224 => _0x28d224['id'] === _0x2e4b8c['activeUserProfileId'])), !_0x4fcd4b && (_0x4fcd4b = _0x2e4b8c[_0xf127c3(0x89d)][0x0]), _0x4fcd4b && (document[_0xf127c3(0x392)](_0xf127c3(0x5e8))['src'] = _0x4fcd4b['avatar'] || _0x3efbf6); } function _0x1fbdf0(_0x57f998) { const _0x14b872 = _0x3abecc; let _0x19fd12 = 0x0, _0x42917f = 0x0, _0x137586 = 0x0; if (_0x57f998[_0x14b872(0x6f2)] == 0x4) { if (_0x14b872(0x5d3) !== 'CSeff') { _0x242f06 && _0x27850a['push'](_0x3d64a4); _0x45ecaa = {}; const _0x51f648 = _0x48725b[_0x14b872(0x58c)](0x2), _0x50fcb4 = _0x51f648[_0x14b872(0x686)](/:\s(.+)/); if (_0x50fcb4['length'] > 0x1) { const _0x1e9461 = _0x50fcb4[0x0][_0x14b872(0x8bb)](), _0xf71b79 = _0x50fcb4[0x1]['trim']()[_0x14b872(0x8d5)](/^"|"$/g, ''); _0x4b9476[_0x1e9461] = _0xf71b79; } } else _0x19fd12 = '0x' + _0x57f998[0x1] + _0x57f998[0x1], _0x42917f = '0x' + _0x57f998[0x2] + _0x57f998[0x2], _0x137586 = '0x' + _0x57f998[0x3] + _0x57f998[0x3]; } else _0x57f998[_0x14b872(0x6f2)] == 0x7 && (_0x19fd12 = '0x' + _0x57f998[0x1] + _0x57f998[0x2], _0x42917f = '0x' + _0x57f998[0x3] + _0x57f998[0x4], _0x137586 = '0x' + _0x57f998[0x5] + _0x57f998[0x6]); _0x19fd12 /= 0xff, _0x42917f /= 0xff, _0x137586 /= 0xff; let _0x48ce0b = Math[_0x14b872(0x98a)](_0x19fd12, _0x42917f, _0x137586), _0x3fa84c = Math['max'](_0x19fd12, _0x42917f, _0x137586), _0x15fa4b = _0x3fa84c - _0x48ce0b, _0x147311 = 0x0, _0x43ad00 = 0x0, _0x2739a9 = 0x0; if (_0x15fa4b == 0x0) _0x147311 = 0x0; else { if (_0x3fa84c == _0x19fd12) _0x147311 = (_0x42917f - _0x137586) / _0x15fa4b % 0x6; else { if (_0x3fa84c == _0x42917f) _0x147311 = (_0x137586 - _0x19fd12) / _0x15fa4b + 0x2; else _0x147311 = (_0x19fd12 - _0x42917f) / _0x15fa4b + 0x4; } } _0x147311 = Math[_0x14b872(0x7d1)](_0x147311 * 0x3c); if (_0x147311 < 0x0) _0x147311 += 0x168; return _0x2739a9 = (_0x3fa84c + _0x48ce0b) / 0x2, _0x43ad00 = _0x15fa4b == 0x0 ? 0x0 : _0x15fa4b / (0x1 - Math[_0x14b872(0x7fb)](0x2 * _0x2739a9 - 0x1)), _0x43ad00 = +(_0x43ad00 * 0x64)[_0x14b872(0x8c5)](0x1), _0x2739a9 = +(_0x2739a9 * 0x64)['toFixed'](0x1), { 'h': _0x147311, 's': _0x43ad00, 'l': _0x2739a9 }; } function _0x404f23() { const _0x1ad4ad = _0x3abecc, _0x4104a1 = (_0x346aca, _0x1be2c0, _0x2a7af8) => { const _0x443ad1 = _0x198c, _0x59bf2b = document[_0x443ad1(0x392)](_0x346aca); if (!_0x59bf2b) return; let _0x520ce0 = null; try { _0x520ce0 = JSON['parse'](localStorage['getItem'](_0x1be2c0) || '{}'); } catch { _0x443ad1(0xbc1) === _0x443ad1(0x97b) ? (_0x5056bd(![]), _0x237c03(_0x443ad1(0x3e9) + _0x186eef[_0x443ad1(0x542)])) : _0x520ce0 = {}; } _0x59bf2b['style']['position'] = 'absolute', _0x59bf2b['style'][_0x443ad1(0x8f6)] = '', _0x59bf2b[_0x443ad1(0xb56)][_0x443ad1(0x6f1)] = '', _0x59bf2b['style'][_0x443ad1(0x8c2)] = '', _0x59bf2b[_0x443ad1(0xb56)]['bottom'] = '', _0x59bf2b[_0x443ad1(0xb56)][_0x443ad1(0x6fc)] = ''; if (typeof _0x520ce0[_0x443ad1(0x8f6)] === _0x443ad1(0x6ce) && typeof _0x520ce0[_0x443ad1(0x6f1)] === 'number') _0x443ad1(0xa91) !== _0x443ad1(0x2e2) ? (_0x59bf2b['style'][_0x443ad1(0x8f6)] = _0x520ce0[_0x443ad1(0x8f6)] + '%', _0x59bf2b['style'][_0x443ad1(0x6f1)] = _0x520ce0[_0x443ad1(0x6f1)] + '%') : _0xb7d8a3 = _0x2ea27e(() => { const _0x8afb41 = _0x443ad1; if (_0x571ef8[_0x8afb41(0x875)] === _0x8afb41(0x6f3)) _0x1998e1[_0x8afb41(0x93e)](); _0x3bf1e7(_0x2d4284); }, 0x320); else for (const _0x1387c6 in _0x2a7af8) { _0x59bf2b['style'][_0x1387c6] = _0x2a7af8[_0x1387c6]; } }; _0x4104a1(_0x1ad4ad(0x251), _0x1ad4ad(0xb6d), { 'top': '15%', 'left': '50%', 'transform': 'translateX(-50%)' }), _0x4104a1(_0x1ad4ad(0x99e), 'appIconPosition_app-wallpaper', { 'top': _0x1ad4ad(0xb15), 'right': '4%' }), _0x4104a1(_0x1ad4ad(0x5f4), _0x1ad4ad(0x293), { 'top': _0x1ad4ad(0xb15), 'right': _0x1ad4ad(0x7ba) }), _0x4104a1(_0x1ad4ad(0x31d), 'appIconPosition_app-settings', { 'top': '8%', 'right': _0x1ad4ad(0x7ba) }), _0x4104a1(_0x1ad4ad(0x906), _0x1ad4ad(0x5a4), { 'top': '8%', 'right': '4%' }), _0x4104a1(_0x1ad4ad(0x502), _0x1ad4ad(0x946), { 'top': '59%', 'left': '5%' }), _0x4104a1('app-diary', 'appIconPosition_app-diary', { 'top': '71%', 'left': _0x1ad4ad(0x2ca) }), _0x4104a1(_0x1ad4ad(0x513), _0x1ad4ad(0x9c4), { 'top': '71%', 'left': '5%' }), _0x4104a1('app-accounting', 'appIconPosition_app-accounting', { 'top': _0x1ad4ad(0x321), 'left': '29%' }), _0x4104a1(_0x1ad4ad(0x349), _0x1ad4ad(0xc22), { 'top': _0x1ad4ad(0x237), 'right': '5%' }), _0x4104a1(_0x1ad4ad(0xc0f), _0x1ad4ad(0x4d9), { 'top': '8%', 'left': '5%' }); const _0x5ec9a8 = document['getElementById'](_0x1ad4ad(0x291)); _0x5ec9a8 && (_0x5ec9a8[_0x1ad4ad(0xb56)][_0x1ad4ad(0x350)] = _0x1ad4ad(0x942), _0x5ec9a8[_0x1ad4ad(0xb56)][_0x1ad4ad(0x8f6)] = _0x1ad4ad(0xa03), _0x5ec9a8['style'][_0x1ad4ad(0x6f1)] = _0x1ad4ad(0x5cb), _0x5ec9a8[_0x1ad4ad(0xb56)][_0x1ad4ad(0x6fc)] = 'translateX(-50%)', _0x5ec9a8[_0x1ad4ad(0xb56)][_0x1ad4ad(0x993)] = _0x1ad4ad(0x94c)); const _0x1d129f = document[_0x1ad4ad(0x392)](_0x1ad4ad(0x717)); _0x1d129f && (_0x1ad4ad(0xa3b) !== _0x1ad4ad(0xa3b) ? _0x3571d7 += _0x1ad4ad(0x3f4) + _0x7e5f12['description'] + _0x1ad4ad(0x5f5) : (_0x1d129f[_0x1ad4ad(0xb56)][_0x1ad4ad(0x350)] = _0x1ad4ad(0x942), _0x1d129f[_0x1ad4ad(0xb56)][_0x1ad4ad(0x8f6)] = '35%', _0x1d129f[_0x1ad4ad(0xb56)]['left'] = '50%', _0x1d129f[_0x1ad4ad(0xb56)][_0x1ad4ad(0x6fc)] = _0x1ad4ad(0x377), _0x1d129f[_0x1ad4ad(0xb56)][_0x1ad4ad(0x993)] = _0x1ad4ad(0xab9))); } function _0x4dd5b6() { const _0x27c556 = _0x3abecc, _0x4c8d1b = document['getElementById']('custom-icon-list-container'); _0x4c8d1b[_0x27c556(0x2c9)] = ''; const _0x4a3f2e = document[_0x27c556(0x9b8)](_0x27c556(0x671)); _0x4a3f2e['forEach'](_0x5a6143 => { const _0x281e2b = _0x27c556; if (_0x281e2b(0x8ba) === 'Iwrvb') { const _0x4c48e3 = _0x5a6143['id'], _0x479a36 = _0x5a6143[_0x281e2b(0x50b)](_0x281e2b(0xa7c))[_0x281e2b(0x324)], _0x5bedc6 = 'customIcon_' + _0x4c48e3, _0xbbdbf9 = localStorage[_0x281e2b(0x956)](_0x5bedc6), _0xb62856 = document[_0x281e2b(0x92e)]('div'); _0xb62856[_0x281e2b(0x894)] = 'member-selection-item', _0xb62856[_0x281e2b(0xb56)][_0x281e2b(0x4df)] = _0x281e2b(0x4dc), _0xb62856[_0x281e2b(0x2c9)] = _0x281e2b(0xc10) + _0x4c48e3 + '\x22\x20src=\x22' + (_0xbbdbf9 || _0x281e2b(0xb4d)) + _0x281e2b(0x258) + _0x479a36 + _0x281e2b(0x4a0) + _0x4c48e3 + _0x281e2b(0x8a7) + _0x4c48e3 + _0x281e2b(0x457) + _0x5bedc6 + _0x281e2b(0x5e7), _0x4c8d1b[_0x281e2b(0x594)](_0xb62856); const _0x295724 = document[_0x281e2b(0x392)](_0x281e2b(0x6b6) + _0x4c48e3); _0x295724[_0x281e2b(0xabf)](_0x281e2b(0xc38), async _0x532fec => { const _0x29aac0 = _0x281e2b; if (_0x29aac0(0x63d) === _0x29aac0(0x63d)) { const _0x2bd9c6 = _0x532fec[_0x29aac0(0xa4c)][_0x29aac0(0x5a1)][0x0]; if (!_0x2bd9c6) return; try { if (_0x29aac0(0x7b0) === _0x29aac0(0x70d)) _0x14c573[_0x29aac0(0x84e)] = _0x12808a[_0x29aac0(0x38c)](_0x131b5b), _0x23343a['style'][_0x29aac0(0x993)] = _0x29aac0(0x94c), _0x183524['style']['border'] = _0x29aac0(0x3a4), _0x34a16c[_0x29aac0(0xb56)]['background'] = _0x29aac0(0x4e3); else { const _0x45488a = await _0x518739(_0x2bd9c6); localStorage[_0x29aac0(0x963)](_0x5bedc6, _0x45488a), document[_0x29aac0(0x392)](_0x29aac0(0x646) + _0x4c48e3)['src'] = _0x45488a, _0x2d4a09(); } } catch (_0x17c978) { _0x18c07b(_0x29aac0(0x3af) + _0x17c978[_0x29aac0(0x542)]); } } else return { 'type': _0x29aac0(0xc2d), 'songName': _0x16bbb3[0x1][_0x29aac0(0x8bb)](), 'artist': _0x5e23bb[0x2][_0x29aac0(0x8bb)]() }; }); } else _0x20b34b += _0x281e2b(0x43f); }); } function _0x2d4a09() { const _0x525ee3 = _0x3abecc, _0x12eae8 = document[_0x525ee3(0x9b8)](_0x525ee3(0x671)); _0x12eae8[_0x525ee3(0xb5e)](_0x57a89d => { const _0x24d72e = _0x525ee3; if (_0x24d72e(0x1f6) === 'XDdjP') { const _0x39aa14 = _0x57a89d['id'], _0x4c84e6 = 'customIcon_' + _0x39aa14, _0x136bfa = localStorage[_0x24d72e(0x956)](_0x4c84e6), _0x346383 = _0x57a89d[_0x24d72e(0x50b)]('.app-icon-img'); if (_0x136bfa) { if ('TQzKK' !== _0x24d72e(0x2c4)) { const _0x4274d1 = _0x79b06['linkedWorldBookIds'][_0x24d72e(0x5e9)](_0x58aa79 => _0x8d9c0f['worldBooks'][_0x24d72e(0x69e)](_0x1ed89a => _0x1ed89a['id'] === _0x58aa79))['filter'](_0x597421)['map'](_0x53f273 => '\x0a\x0a##\x20世界书条目:\x20' + _0x53f273['name'] + '\x0a' + _0x53f273[_0x24d72e(0xa19)])[_0x24d72e(0x52b)](''); if (_0x4274d1) _0x337483 = _0x24d72e(0x388) + _0x4274d1; } else _0x346383[_0x24d72e(0x2c9)] = '<img\x20src=\x22' + _0x136bfa + _0x24d72e(0x4ee); } else { if ('wtdVb' === _0x24d72e(0xa27)) { const _0x5b7d37 = _0x532f08[_0x24d72e(0x285)][_0x24d72e(0x69e)](_0x1c642e => _0x1c642e['id'] === _0x200a0c); if (!_0x5b7d37) return; _0x264635['getElementById']('editing-world-book-id')[_0x24d72e(0x60e)] = _0x5b7d37['id'], _0x286446[_0x24d72e(0x392)](_0x24d72e(0x5aa))[_0x24d72e(0x324)] = '编辑条目', _0x259d26['getElementById'](_0x24d72e(0x4fa))['value'] = _0x5b7d37['name'], _0x4556f4[_0x24d72e(0x392)](_0x24d72e(0xab2))[_0x24d72e(0x60e)] = _0x5b7d37[_0x24d72e(0xa19)]; } else { const _0x11a102 = document[_0x24d72e(0x50b)](_0x24d72e(0x5ce) + _0x39aa14 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x39aa14 + _0x24d72e(0xc09))?.[_0x24d72e(0x2c9)]; _0x11a102 && (_0x346383[_0x24d72e(0x2c9)] = _0x11a102); } } } else { const _0x3481d0 = _0x3aefc0[_0x24d72e(0x956)]('customFeedWallpaper'); _0x3481d0 ? _0x1a3d40[_0x24d72e(0x392)](_0x24d72e(0x757))['style'][_0x24d72e(0xa6a)]('--feed-bg-image', 'url(' + _0x3481d0 + ')') : _0x270f8e[_0x24d72e(0x392)](_0x24d72e(0x757))['style'][_0x24d72e(0xa6a)]('--feed-bg-image', _0x24d72e(0x3a4)); } }); } function _0x1484e8() { const _0x2b6c16 = _0x3abecc; if (_0x2b6c16(0x3f1) === 'vnSfA') { if (_0x916e44['target']['classList'][_0x2b6c16(0xb2d)]('delete-expense-btn')) { const _0x22d067 = _0x55c67b['target'][_0x2b6c16(0x641)]['id']; _0x2a64cf(_0x2b6c16(0x2d0))['then'](_0x1d211b => { _0x1d211b && _0x1b126b(_0x22d067); }); } } else { const _0x4fd48c = _0x2e4b8c['friendCircles']['find'](_0x224ae8 => _0x224ae8['id'] === _0x2e4b8c[_0x2b6c16(0xbb0)]), _0x33dc4d = _0x28f748(); let _0x4899eb = []; if (_0x4fd48c && _0x4fd48c[_0x2b6c16(0x983)]) { const _0x16cd1a = _0x4fd48c[_0x2b6c16(0x983)]['filter'](_0x32e9f2 => _0x32e9f2[_0x2b6c16(0x875)] === _0x2b6c16(0xc2d) && _0x32e9f2[_0x2b6c16(0x565)])['map'](_0x161366 => ({ ..._0x161366, 'source': _0x2b6c16(0x306) })); _0x4899eb[_0x2b6c16(0x7e4)](..._0x16cd1a); } if (_0x33dc4d && _0x2e4b8c[_0x2b6c16(0x2c8)]) { const _0x149b8c = _0x2e4b8c[_0x2b6c16(0x2c8)][_0x2b6c16(0x742)](_0x580838 => _0x580838['type'] === 'music' && _0x580838[_0x2b6c16(0x565)])[_0x2b6c16(0x5e9)](_0x12b5df => ({ ..._0x12b5df, 'source': _0x2b6c16(0x4fb) })); _0x4899eb[_0x2b6c16(0x7e4)](..._0x149b8c); } const _0x32b75d = Array[_0x2b6c16(0xbd4)](new Map(_0x4899eb[_0x2b6c16(0x5e9)](_0x2b9b92 => [_0x2b9b92['playableUrl'], _0x2b9b92]))[_0x2b6c16(0x9d9)]()); _0x2e4b8c[_0x2b6c16(0x29c)] = _0x32b75d[_0x2b6c16(0x474)]((_0x4a7d09, _0x36f867) => _0x36f867['timestamp'] - _0x4a7d09[_0x2b6c16(0x518)]); } } function _0x4b490a(_0x3289f8) { const _0x22b38e = _0x3abecc; if (_0x3289f8 < 0x0 || _0x3289f8 >= _0x15ee6a['length']) return; _0x2d690c = _0x3289f8; const _0xf45718 = _0x15ee6a[_0x3289f8]; _0x2a3ed9[_0x22b38e(0x84e)] = _0xf45718[_0x22b38e(0x565)] || _0xf45718['url'], _0x2a3ed9[_0x22b38e(0x792)](), _0x21e08e(), _0x41e230(); } function _0x21e08e() { const _0x1b7925 = _0x3abecc; if (_0x1b7925(0x6d5) !== _0x1b7925(0x6d5)) !_0x279283[_0x1b7925(0x50b)](_0x1b7925(0x288))[_0x1b7925(0xb2d)](_0x2170ac[_0x1b7925(0xa4c)]) && (_0xcd7f7e[_0x1b7925(0x42c)][_0x1b7925(0xb26)](_0x1b7925(0x844)), _0x50e947[_0x1b7925(0x42c)][_0x1b7925(0xb26)](_0x1b7925(0xc32))); else { const _0x5d5866 = _0x15ee6a[_0x2d690c]; _0x9e19ad(_0x5d5866); } } function _0x41e230() { const _0x344280 = _0x3abecc; try { 'jldBA' !== 'duMjz' ? localStorage[_0x344280(0x963)]('musicPlayerState', JSON[_0x344280(0x2bf)]({ 'playlist': _0x2e4b8c[_0x344280(0x29c)], 'currentIndex': _0x2e4b8c[_0x344280(0x99f)] })) : _0x1a47b7('恢复失败了:\x20' + _0x285be7[_0x344280(0x542)]); } catch (_0x9f7eae) { console[_0x344280(0x5b1)]('保存播放器状态失败，真是没用。', _0x9f7eae); } } function _0x1d49d5() { const _0x10e834 = _0x3abecc; try { const _0xc4ccae = localStorage['getItem'](_0x10e834(0xad7)); if (_0xc4ccae) { const { playlist: _0x5a56e7, currentIndex: _0x5db08b } = JSON[_0x10e834(0x30c)](_0xc4ccae); Array[_0x10e834(0x74a)](_0x5a56e7) && _0x5a56e7[_0x10e834(0x6f2)] > 0x0 && _0x5db08b > -0x1 && (_0x2e4b8c[_0x10e834(0x29c)] = _0x5a56e7, _0x2e4b8c['currentlyPlayingIndex'] = _0x5db08b, _0x2e4b8c[_0x10e834(0x3ce)] = ![], _0x21e08e()); } } catch (_0x439520) { 'LWgHz' !== 'AAArS' ? console['error'](_0x10e834(0x812), _0x439520) : (_0x42c852[_0x10e834(0x84e)] = _0x1eaf4c[_0x10e834(0x38c)](_0x3638f), _0x3ccfdc[_0x10e834(0xb56)][_0x10e834(0x993)] = _0x10e834(0x94c), _0x55ca30['style'][_0x10e834(0xb6a)] = 'none', _0x59eb3b[_0x10e834(0xb56)][_0x10e834(0x20c)] = _0x10e834(0x4e3)); } } function _0xfe36ef(_0x129f01) { const _0x10122f = _0x3abecc; if (_0x10122f(0x244) !== 'LQmsv') { if (window[_0x10122f(0x26e)]) clearTimeout(window[_0x10122f(0x26e)]); const _0x2ac1aa = _0x129f01['target'][_0x10122f(0xbda)](_0x10122f(0x9b3)); if (!_0x2ac1aa) return; const _0x3cba24 = _0x2ac1aa[_0x10122f(0x641)][_0x10122f(0x518)], _0x481e93 = _0x2ac1aa['classList'][_0x10122f(0xb2d)](_0x10122f(0x5c3)) ? _0x10122f(0x5c3) : 'ai'; if (!_0x3cba24) return; const _0x48d9e1 = () => { const _0x46a4b6 = _0x10122f; if ('vUzWZ' !== _0x46a4b6(0x54f)) window[_0x46a4b6(0x26e)] = setTimeout(() => { const _0x4b480a = _0x46a4b6; if (_0x4b480a(0x7a9) === 'nOfNo') _0x4f3e84['innerHTML'] = _0x4b480a(0x6d8) + _0x43e3f5['toLocaleTimeString'](_0x4b480a(0x591), { 'hour': _0x4b480a(0x2f5), 'minute': '2-digit', 'hour12': ![] }) + _0x4b480a(0x70b); else { if (_0x129f01['type'] === _0x4b480a(0x6f3)) _0x129f01[_0x4b480a(0x93e)](); _0x3317c0(parseInt(_0x3cba24, 0xa), _0x481e93); } }, 0x320); else { const _0x109ea9 = _0x372ee1[_0x46a4b6(0x392)]('countdown-title'), _0x3d7f3a = _0x18a928[_0x46a4b6(0x392)](_0x46a4b6(0xb9c)), _0x1159a3 = new _0xaa2702(); _0x1159a3[_0x46a4b6(0x3f5)](0x0, 0x0, 0x0, 0x0); const _0x1657b5 = _0x473dca[_0x46a4b6(0x6a6)][_0x46a4b6(0x742)](_0x34acb6 => _0x34acb6[_0x46a4b6(0x875)] === _0x46a4b6(0xc27) && new _0x5b02b4(_0x34acb6['date'] + 'T00:00:00') >= _0x1159a3)[_0x46a4b6(0x474)]((_0x509ccd, _0x485441) => new _0xa0c2f1(_0x509ccd[_0x46a4b6(0x215)]) - new _0x3f66e6(_0x485441[_0x46a4b6(0x215)])); if (_0x1657b5[_0x46a4b6(0x6f2)] > 0x0) { const _0x282568 = _0x1657b5[0x0], _0x58b9c6 = new _0x5205cd(_0x282568['date'] + _0x46a4b6(0xa36)), _0x4543c1 = _0x58b9c6 - _0x1159a3, _0x4ae08e = _0x463265[_0x46a4b6(0xa58)](_0x4543c1 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x109ea9[_0x46a4b6(0x324)] = _0x46a4b6(0x402) + _0x282568[_0x46a4b6(0xa19)] + '」', _0x3d7f3a[_0x46a4b6(0x2c9)] = _0x46a4b6(0xb4b) + _0x4ae08e + '</span><span\x20class=\x22unit\x22>天</span>'; } else _0x109ea9['textContent'] = _0x46a4b6(0x70a), _0x3d7f3a[_0x46a4b6(0x2c9)] = _0x46a4b6(0xa89); } }, _0x9871c0 = () => { const _0x40bdbb = _0x10122f; if ('jQpsa' !== 'jQpsa') _0x520e4a[_0x40bdbb(0x24e)](), _0x41274e[_0x40bdbb(0x50b)]('.music-post-play-icon,\x20.music-share-play-icon')['textContent'] = '▶'; else { if (window['diaryPressTimer']) clearTimeout(window['diaryPressTimer']); } }; document['addEventListener'](_0x10122f(0x257), _0x9871c0, { 'once': !![] }), document[_0x10122f(0xabf)](_0x10122f(0x785), _0x9871c0, { 'once': !![] }), document['addEventListener'](_0x10122f(0x51f), _0x9871c0, { 'once': !![] }), _0x48d9e1(); } else _0x540b5b(![]); } function _0x3317c0(_0x4e1224, _0x4c0f59) { const _0x22b7e3 = _0x3abecc, _0x470c92 = _0x22b7e3(0x6e8) + _0x4e1224; let _0x2e675a = document[_0x22b7e3(0x392)](_0x470c92); if (_0x2e675a) return; const _0x20aae2 = _0x22b7e3(0x861) + _0x470c92 + _0x22b7e3(0x609) + (_0x4c0f59 === 'ai' ? _0x22b7e3(0xb94) : '') + _0x22b7e3(0x3d4); document[_0x22b7e3(0x3de)][_0x22b7e3(0x256)](_0x22b7e3(0x2af), _0x20aae2); const _0x1495c8 = document['getElementById'](_0x470c92), _0x28223b = () => _0x1495c8[_0x22b7e3(0xb26)](); _0x1495c8[_0x22b7e3(0x50b)](_0x22b7e3(0xb37))[_0x22b7e3(0x998)] = _0x28223b, _0x1495c8['querySelector'](_0x22b7e3(0xb57))[_0x22b7e3(0x998)] = _0x28223b, _0x1495c8[_0x22b7e3(0x50b)](_0x22b7e3(0x9c1))[_0x22b7e3(0x998)] = () => { _0x31dfa3(_0x4e1224), _0x28223b(); }, _0x4c0f59 === 'ai' && (_0x22b7e3(0x97a) === _0x22b7e3(0x804) ? (_0x167d1a(), _0x4fa62f[_0x22b7e3(0x4b9)]()) : _0x1495c8['querySelector']('#diary-action-reroll')[_0x22b7e3(0x998)] = () => { _0x221ca0(_0x4e1224), _0x28223b(); }); } async function _0x31dfa3(_0x282ff6) { const _0xd2f9ad = _0x3abecc, _0x7c0e19 = await _0x4b635a(_0xd2f9ad(0x6af)); if (!_0x7c0e19) return; const _0xaeae13 = _0x2e4b8c['diaries']['find'](_0x2dbae2 => _0x2dbae2[_0xd2f9ad(0x918)] === _0x2e4b8c['activeDiaryCharacterId']); if (!_0xaeae13) return; const _0x1adc8d = _0xaeae13[_0xd2f9ad(0xb3c)][_0xd2f9ad(0x948)](_0x2688a4 => _0x2688a4[_0xd2f9ad(0x518)] === _0x282ff6); _0x1adc8d > -0x1 && (_0xaeae13[_0xd2f9ad(0xb3c)][_0xd2f9ad(0x872)](_0x1adc8d, 0x1), _0x5a3c71(), _0x253b8d(), _0x18c07b(_0xd2f9ad(0x2e7))); } async function _0x221ca0(_0x94af44) { const _0x1dc726 = _0x3abecc; if (_0x1dc726(0x336) !== _0x1dc726(0x545)) { const _0x321c8c = _0x2e4b8c['diaries'][_0x1dc726(0x69e)](_0x2b748c => _0x2b748c[_0x1dc726(0x918)] === _0x2e4b8c[_0x1dc726(0x20b)]); if (!_0x321c8c) return; const _0x54a7f9 = _0x321c8c[_0x1dc726(0xb3c)][_0x1dc726(0x948)](_0x611a23 => _0x611a23[_0x1dc726(0x518)] === _0x94af44); _0x54a7f9 > -0x1 && (_0x1dc726(0x7e5) === 'mxGIi' ? (_0x321c8c['entries'][_0x1dc726(0x872)](_0x54a7f9, 0x1), _0x5a3c71(), _0x253b8d(), await _0x4a3a55()) : (_0x429368[_0x1dc726(0x5b1)](_0x1dc726(0x4f2), _0x5a4f18), _0x3abe89[_0x1dc726(0x4a7)](_0x1dc726(0x332)))); } else { const _0x30216d = _0xa92fd6[_0x1dc726(0x30c)](_0xdf2b91); _0x23e968[_0x1dc726(0x74a)](_0x30216d) && (_0x35fa5a[_0x1dc726(0x60e)] = _0x30216d[_0x1dc726(0x5e9)](_0x3f922b => _0x3f922b[_0x1dc726(0x420)] + '--' + _0x3f922b[_0x1dc726(0x6ae)])['join']('\x0a')); } } function _0x52bbfa() { const _0x25eaa3 = _0x3abecc, _0x40ee53 = document[_0x25eaa3(0x392)](_0x25eaa3(0x3b8)); _0x40ee53[_0x25eaa3(0x2c9)] = ''; const _0x316e94 = _0x2e4b8c['characters'][_0x25eaa3(0x742)](_0x549fa6 => _0x2e4b8c[_0x25eaa3(0x442)][_0x25eaa3(0xaed)](_0xccca7b => _0xccca7b[_0x25eaa3(0x875)] === _0x25eaa3(0xa4e) && _0xccca7b[_0x25eaa3(0xa2a)][_0x25eaa3(0x21d)](_0x549fa6['id']))); if (_0x316e94['length'] === 0x0) { _0x40ee53[_0x25eaa3(0x2c9)] = _0x25eaa3(0x932); return; } _0x316e94[_0x25eaa3(0xb5e)](_0x296c8a => { const _0x2cb688 = _0x25eaa3, _0x2dd28d = document[_0x2cb688(0x92e)]('li'); _0x2dd28d['className'] = _0x2cb688(0x47d), _0x2dd28d[_0x2cb688(0x641)]['charId'] = _0x296c8a['id'], _0x2dd28d[_0x2cb688(0x2c9)] = _0x2cb688(0x2f7) + (_0x296c8a[_0x2cb688(0x58d)] || _0x2be033) + _0x2cb688(0x832) + _0x296c8a['name'] + _0x2cb688(0x8a2), _0x2dd28d[_0x2cb688(0xabf)](_0x2cb688(0x4b9), () => { const _0x10dcf4 = _0x2cb688; 'bzlzM' === 'RpTpN' ? _0x176eb6[_0x10dcf4(0x392)]('galgame-text')[_0x10dcf4(0x324)] = _0x10dcf4(0x35f) : _0x476842(_0x296c8a['id']); }), _0x2dd28d[_0x2cb688(0x50b)](_0x2cb688(0x47e))[_0x2cb688(0xabf)](_0x2cb688(0x4b9), () => { _0x476842(_0x296c8a['id']); }), _0x2dd28d[_0x2cb688(0x50b)](_0x2cb688(0x808))['addEventListener'](_0x2cb688(0x4b9), _0x413386 => { _0x413386['stopPropagation'](), _0x10fec1(_0x296c8a['id']); }), _0x40ee53[_0x2cb688(0x594)](_0x2dd28d); }); } function _0x476842(_0x9af4e) { const _0x4578a6 = _0x3abecc, _0x1474d7 = _0x2653c6(_0x9af4e); if (!_0x1474d7) return; _0x2e4b8c[_0x4578a6(0x20b)] = _0x9af4e; const _0x53ed3b = _0x2e4b8c[_0x4578a6(0x9bb)]['find'](_0x316f78 => _0x316f78[_0x4578a6(0x918)] === _0x9af4e), _0x59f948 = _0x53ed3b ? _0x53ed3b[_0x4578a6(0xb3c)]['length'] : 0x0, _0x2302c4 = 0x2; _0x2e4b8c['diaryCurrentPage'] = Math[_0x4578a6(0x726)](0x0, Math[_0x4578a6(0xa58)](_0x59f948 / _0x2302c4) - 0x1), document['getElementById'](_0x4578a6(0xb93))['textContent'] = _0x1474d7['name'] + _0x4578a6(0x2a5), _0x253b8d(), _0x2bd982(_0x4578a6(0x725), _0x4578a6(0x765)); } function _0x253b8d() { const _0x58032e = _0x3abecc, _0x29a8a9 = document[_0x58032e(0x392)]('diary-entries-container'), _0x351508 = document[_0x58032e(0x392)]('diary-input-wrapper'); _0x29a8a9['innerHTML'] = '', _0x351508[_0x58032e(0x2c9)] = ''; const _0x56c58b = _0x4f3c7a() || { 'name': '我' }, _0x2467bc = _0x2e4b8c[_0x58032e(0x9bb)][_0x58032e(0x69e)](_0x5cfdb9 => _0x5cfdb9[_0x58032e(0x918)] === _0x2e4b8c[_0x58032e(0x20b)]); if (!_0x2467bc || !_0x2467bc[_0x58032e(0xb3c)] || _0x2467bc[_0x58032e(0xb3c)][_0x58032e(0x6f2)] === 0x0) { _0x29a8a9[_0x58032e(0x2c9)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', _0x351508[_0x58032e(0x2c9)] = _0x58032e(0xa54), document[_0x58032e(0x392)](_0x58032e(0x46f))['addEventListener'](_0x58032e(0x4b9), _0x12c51e), document[_0x58032e(0x392)](_0x58032e(0xbaa))[_0x58032e(0xabf)](_0x58032e(0x4b9), _0x4a3a55); return; } const _0x3e945d = 0x2, _0x28ad6c = [..._0x2467bc[_0x58032e(0xb3c)]][_0x58032e(0x474)]((_0x397846, _0x33ebf4) => _0x397846['timestamp'] - _0x33ebf4[_0x58032e(0x518)]), _0x262f00 = []; for (let _0x408a28 = 0x0; _0x408a28 < _0x28ad6c['length']; _0x408a28 += _0x3e945d) { _0x262f00[_0x58032e(0x7e4)](_0x28ad6c[_0x58032e(0x43d)](_0x408a28, _0x408a28 + _0x3e945d)); } const _0x176e97 = _0x262f00[_0x58032e(0x6f2)]; _0x262f00[_0x58032e(0xb5e)]((_0x49243f, _0x4acd75) => { const _0x33f0f4 = _0x58032e, _0x7a6a7a = document[_0x33f0f4(0x92e)](_0x33f0f4(0x63a)); _0x7a6a7a[_0x33f0f4(0x894)] = _0x33f0f4(0x59a), _0x7a6a7a['id'] = _0x33f0f4(0x435) + _0x4acd75, _0x4acd75 === _0x2e4b8c[_0x33f0f4(0x1ff)] && _0x7a6a7a[_0x33f0f4(0x42c)]['add'](_0x33f0f4(0x931)), _0x49243f[_0x33f0f4(0xb5e)](_0xdefde9 => { const _0x4ebeb3 = _0x33f0f4; if ('zNMXy' === _0x4ebeb3(0xbae)) { const _0x352e0e = _0xdefde9[_0x4ebeb3(0xafc)] === _0x4ebeb3(0x5c3) ? 'user' : 'ai', _0x560c75 = _0xdefde9[_0x4ebeb3(0xafc)] === _0x4ebeb3(0x5c3) ? _0x56c58b[_0x4ebeb3(0x420)] : _0x2653c6(_0xdefde9[_0x4ebeb3(0xafc)])[_0x4ebeb3(0x420)], _0x1e50c8 = document[_0x4ebeb3(0x92e)](_0x4ebeb3(0x63a)); _0x1e50c8[_0x4ebeb3(0x894)] = _0x4ebeb3(0x38b) + _0x352e0e, _0x1e50c8[_0x4ebeb3(0x641)][_0x4ebeb3(0x518)] = _0xdefde9['timestamp'], _0x1e50c8[_0x4ebeb3(0xb56)][_0x4ebeb3(0x4c2)] = 'none', _0x1e50c8[_0x4ebeb3(0xb56)][_0x4ebeb3(0x750)] = '0', _0x1e50c8[_0x4ebeb3(0x2c9)] = _0x4ebeb3(0xa0f) + _0x560c75 + _0x4ebeb3(0x94a) + new Date(_0xdefde9[_0x4ebeb3(0x518)])[_0x4ebeb3(0x408)](_0x4ebeb3(0x591)) + _0x4ebeb3(0x7b8) + _0xdefde9['content'][_0x4ebeb3(0x8d5)](/\n/g, _0x4ebeb3(0x3e5)) + _0x4ebeb3(0xc12), _0x7a6a7a['appendChild'](_0x1e50c8); } else { const _0x1ada69 = _0x233c06[_0x4ebeb3(0x392)](_0x4ebeb3(0x33e)), _0x388088 = _0x45e6fc[_0x4ebeb3(0x392)]('organize-button-container'), _0x4097ec = new _0x3ed61c(), _0x4b6781 = _0xef3be[_0x4ebeb3(0x41f)][_0x4ebeb3(0x742)](_0x290d47 => new _0xb206d7(_0x290d47[_0x4ebeb3(0x518)])[_0x4ebeb3(0x97c)]() === _0x4097ec['toDateString']()); if (_0x4b6781[_0x4ebeb3(0x6f2)] === 0x0) { _0x1ada69['innerHTML'] = _0x4ebeb3(0x5e1), _0x388088[_0x4ebeb3(0x2c9)] = ''; return; } _0x1ada69[_0x4ebeb3(0x2c9)] = '', _0x4b6781['sort']((_0x2aa99c, _0x111642) => _0x111642[_0x4ebeb3(0x518)] - _0x2aa99c[_0x4ebeb3(0x518)])[_0x4ebeb3(0xb5e)](_0x5e0f43 => { const _0x4f8e79 = _0x4ebeb3, _0xbcd5cd = _0x9296f5[_0x4f8e79(0x92e)](_0x4f8e79(0x63a)); _0xbcd5cd[_0x4f8e79(0x894)] = 'expense-item', _0xbcd5cd['innerHTML'] = _0x4f8e79(0x4b1) + _0x5e0f43[_0x4f8e79(0x9b7)] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x5e0f43[_0x4f8e79(0xb86)]['toFixed'](0x2) + _0x4f8e79(0x815) + _0x5e0f43['id'] + '\x22>&times;</button></div>', _0x1ada69[_0x4f8e79(0x594)](_0xbcd5cd); }), _0x388088 && (_0x388088[_0x4ebeb3(0x2c9)] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', _0x887fe6[_0x4ebeb3(0x392)](_0x4ebeb3(0x40f))['addEventListener'](_0x4ebeb3(0x4b9), _0x7d3028)); } }), _0x29a8a9['appendChild'](_0x7a6a7a); }), _0x351508[_0x58032e(0x2c9)] = _0x58032e(0xa5b) + (_0x2e4b8c[_0x58032e(0x1ff)] + 0x1) + _0x58032e(0x92d) + _0x176e97 + _0x58032e(0x9e4), document[_0x58032e(0x392)](_0x58032e(0xad3))[_0x58032e(0x523)] = _0x2e4b8c[_0x58032e(0x1ff)] === 0x0, document[_0x58032e(0x392)](_0x58032e(0xb63))['disabled'] = _0x2e4b8c['diaryCurrentPage'] === _0x176e97 - 0x1, document['getElementById'](_0x58032e(0xad3))[_0x58032e(0xabf)](_0x58032e(0x4b9), _0x3665bb), document[_0x58032e(0x392)](_0x58032e(0xb63))[_0x58032e(0xabf)](_0x58032e(0x4b9), _0x5a6ba4), document[_0x58032e(0x392)](_0x58032e(0x46f))['addEventListener']('click', _0x12c51e), document[_0x58032e(0x392)](_0x58032e(0xbaa))[_0x58032e(0xabf)]('click', _0x4a3a55); } function _0x5a6ba4() { const _0x1b4e96 = _0x3abecc; if (_0x2e4b8c[_0x1b4e96(0x624)]) return; const _0x170595 = _0x2e4b8c[_0x1b4e96(0x1ff)], _0x1dbade = Math[_0x1b4e96(0xa58)](_0x2e4b8c['diaries'][_0x1b4e96(0x69e)](_0x1a39b8 => _0x1a39b8[_0x1b4e96(0x918)] === _0x2e4b8c[_0x1b4e96(0x20b)])['entries'][_0x1b4e96(0x6f2)] / 0x2); if (_0x170595 >= _0x1dbade - 0x1) return; _0x2e4b8c[_0x1b4e96(0x624)] = !![]; const _0x875c51 = _0x170595 + 0x1, _0x11726c = document['getElementById'](_0x1b4e96(0x435) + _0x170595), _0x51b5a6 = document['getElementById'](_0x1b4e96(0x435) + _0x875c51); _0x11726c && _0x51b5a6 ? (_0x51b5a6[_0x1b4e96(0x42c)]['add'](_0x1b4e96(0xc26)), _0x11726c[_0x1b4e96(0x42c)][_0x1b4e96(0x6ec)](_0x1b4e96(0x60a)), _0x51b5a6[_0x1b4e96(0x42c)][_0x1b4e96(0x6ec)](_0x1b4e96(0x931)), setTimeout(() => { const _0x11a3a2 = _0x1b4e96; if ('VsJJZ' !== _0x11a3a2(0x667)) return _0xbb9b8d[_0x11a3a2(0xbf0)]('找不到旧的存档，无需救援。'), 0x0; else _0x11726c[_0x11a3a2(0x42c)]['remove']('is-visible', _0x11a3a2(0x60a)), _0x51b5a6['classList']['remove'](_0x11a3a2(0xc26)), _0x2e4b8c[_0x11a3a2(0x1ff)] = _0x875c51, _0x253b8d(), _0x2e4b8c[_0x11a3a2(0x624)] = ![]; }, 0x2bc)) : _0x2e4b8c[_0x1b4e96(0x624)] = ![]; } function _0x3665bb() { const _0x21a66c = _0x3abecc; if (_0x2e4b8c[_0x21a66c(0x624)]) return; const _0x227cc7 = _0x2e4b8c[_0x21a66c(0x1ff)]; if (_0x227cc7 <= 0x0) return; _0x2e4b8c[_0x21a66c(0x624)] = !![]; const _0x364ccb = _0x227cc7 - 0x1, _0x39b5af = document['getElementById']('diary-page-' + _0x227cc7), _0x32a98f = document[_0x21a66c(0x392)]('diary-page-' + _0x364ccb); if (_0x39b5af && _0x32a98f) { if ('hwsiL' !== 'hwsiL') { const _0x112355 = _0x4f66cf['parse'](_0xb6f6e4['getItem'](_0x21a66c(0xc22)) || '{}'), _0x3bc866 = { ..._0x112355, ..._0x20bbb9 }; _0x14d155[_0x21a66c(0x963)](_0x21a66c(0xc22), _0x5267a4['stringify'](_0x3bc866)); } else _0x32a98f[_0x21a66c(0x42c)][_0x21a66c(0x6ec)](_0x21a66c(0x799)), _0x39b5af[_0x21a66c(0x42c)][_0x21a66c(0x6ec)](_0x21a66c(0x44e)), _0x32a98f[_0x21a66c(0x42c)][_0x21a66c(0x6ec)](_0x21a66c(0x931)), setTimeout(() => { const _0x3ff2d0 = _0x21a66c; if ('vzECK' === _0x3ff2d0(0xbeb)) { const _0x20694f = _0x617bf9[_0x3ff2d0(0x9a4)](); _0x20694f[_0x3ff2d0(0x817)] = () => _0x3c7fbd(_0x20694f[_0x3ff2d0(0x3cf)]), _0x20694f['onerror'] = () => _0x59ea03(_0x20694f['error']); } else _0x39b5af[_0x3ff2d0(0x42c)]['remove'](_0x3ff2d0(0x931), _0x3ff2d0(0x44e)), _0x32a98f['classList'][_0x3ff2d0(0xb26)](_0x3ff2d0(0x799)), _0x2e4b8c[_0x3ff2d0(0x1ff)] = _0x364ccb, _0x253b8d(), _0x2e4b8c['isAnimatingDiary'] = ![]; }, 0x2bc); } else _0x2e4b8c[_0x21a66c(0x624)] = ![]; } function _0x12c51e() { return new Promise(_0x45d62e => { const _0x5ec89e = _0x198c, _0x49f028 = _0x5ec89e(0x560); document[_0x5ec89e(0x3de)][_0x5ec89e(0x256)]('beforeend', _0x49f028); const _0x1bf33c = document[_0x5ec89e(0x392)](_0x5ec89e(0x61e)), _0x228d1c = document[_0x5ec89e(0x392)](_0x5ec89e(0x373)), _0x15d83b = document[_0x5ec89e(0x392)](_0x5ec89e(0x3ca)), _0x968f59 = document[_0x5ec89e(0x392)](_0x5ec89e(0x325)), _0x141bff = _0x1bf33c[_0x5ec89e(0x50b)]('.choice-modal-backdrop'), _0x4b0df5 = () => { const _0x379f3b = _0x5ec89e; _0x1bf33c[_0x379f3b(0xb26)](), _0x45d62e(); }; _0x15d83b[_0x5ec89e(0x998)] = () => { const _0x4639a7 = _0x5ec89e; _0xcbdcad(_0x228d1c[_0x4639a7(0x60e)]), _0x4b0df5(); }, _0x968f59[_0x5ec89e(0x998)] = _0x4b0df5, _0x141bff['onclick'] = _0x4b0df5; }); } function _0xcbdcad(_0x25a194) { const _0x17e2f9 = _0x3abecc, _0x3615a2 = _0x25a194[_0x17e2f9(0x8bb)](); if (!_0x3615a2 || !_0x2e4b8c[_0x17e2f9(0x20b)]) return; let _0x47854e = _0x2e4b8c['diaries'][_0x17e2f9(0x69e)](_0x1809c3 => _0x1809c3[_0x17e2f9(0x918)] === _0x2e4b8c[_0x17e2f9(0x20b)]); !_0x47854e && (_0x47854e = { 'characterId': _0x2e4b8c[_0x17e2f9(0x20b)], 'entries': [] }, _0x2e4b8c[_0x17e2f9(0x9bb)][_0x17e2f9(0x7e4)](_0x47854e)); _0x47854e[_0x17e2f9(0xb3c)]['push']({ 'timestamp': Date[_0x17e2f9(0x9b4)](), 'author': 'user', 'content': _0x3615a2 }), _0x5a3c71(); const _0x31914e = _0x47854e['entries']['length']; _0x2e4b8c['diaryCurrentPage'] = Math[_0x17e2f9(0xa58)](_0x31914e / 0x2) - 0x1, _0x253b8d(); } async function _0x4a3a55() { const _0x38d6ec = _0x3abecc, _0x253825 = _0x2e4b8c[_0x38d6ec(0x9bb)][_0x38d6ec(0x69e)](_0x186a56 => _0x186a56['characterId'] === _0x2e4b8c[_0x38d6ec(0x20b)]), _0x4eaf14 = _0x2e4b8c[_0x38d6ec(0x20b)], _0x171c21 = _0x2653c6(_0x4eaf14); if (!_0x171c21 || _0x2e4b8c[_0x38d6ec(0x524)]) return; _0x5b3ee9(!![], _0x38d6ec(0x64c)), _0x2e4b8c[_0x38d6ec(0x524)] = !![]; let _0x3f3149 = []; try { if (_0x38d6ec(0x4a1) !== _0x38d6ec(0x94e)) { const _0x5af6c6 = _0x4f3c7a() || { 'name': '你' }, _0x57313a = _0x44a6ac(_0x4eaf14), { omniText: _0x59b49a } = _0x42b275(_0x4eaf14, _0x2e4b8c['activeChatId']); let _0x408ea0 = ''; if (_0x171c21['linkedWorldBookIds'] && _0x171c21[_0x38d6ec(0x25d)]['length'] > 0x0) { const _0x3a5d11 = _0x171c21[_0x38d6ec(0x25d)]['map'](_0xd7431b => _0x2e4b8c['worldBooks'][_0x38d6ec(0x69e)](_0x445d41 => _0x445d41['id'] === _0xd7431b))[_0x38d6ec(0x742)](Boolean)[_0x38d6ec(0x5e9)](_0x549669 => _0x38d6ec(0x7ac) + _0x549669[_0x38d6ec(0x420)] + '\x0a' + _0x549669[_0x38d6ec(0xa19)])['join'](''); if (_0x3a5d11) _0x408ea0 = _0x38d6ec(0x388) + _0x3a5d11; } const _0x343eb5 = _0x5af6c6['persona'] ? '\x0a\x0a#\x20关于读者“' + _0x5af6c6[_0x38d6ec(0x420)] + '”的补充信息\x0a' + _0x5af6c6[_0x38d6ec(0x5cd)] : '', _0x2bb7c8 = _0x4bf621(); let _0x468ba5 = _0x38d6ec(0xb12); if (_0x253825 && _0x253825[_0x38d6ec(0xb3c)]) { const _0x3c5a85 = _0x253825[_0x38d6ec(0xb3c)][_0x38d6ec(0x742)](_0x546673 => _0x546673[_0x38d6ec(0xafc)] === _0x38d6ec(0x5c3))[_0x38d6ec(0x80d)](); if (_0x3c5a85) { if (_0x38d6ec(0x835) !== _0x38d6ec(0x835)) { const _0x25d973 = _0x3bce6f[_0x38d6ec(0x392)](_0xaaec4); if (_0x25d973) _0x25d973[_0x38d6ec(0x84e)] = _0x5ea879[_0x38d6ec(0x459)]; } else _0x468ba5 = _0x3c5a85[_0x38d6ec(0xa19)]; } } const _0x841bdc = _0x38d6ec(0x823) + _0x171c21['name'] + _0x38d6ec(0x9f3) + _0x5af6c6[_0x38d6ec(0x420)] + _0x38d6ec(0x46e) + _0x5af6c6[_0x38d6ec(0x420)] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x468ba5 + _0x38d6ec(0xb70) + _0x171c21[_0x38d6ec(0x5cd)] + '\x0a' + _0x343eb5 + '\x0a' + _0x408ea0 + _0x38d6ec(0x611) + new Date()['toLocaleString'](_0x38d6ec(0x591), { 'dateStyle': _0x38d6ec(0x567), 'timeStyle': _0x38d6ec(0x303) }) + _0x38d6ec(0x67c) + _0x593dd0(new Date(_0x253825?.['entries']?.['at'](-0x1)?.[_0x38d6ec(0x518)] || Date[_0x38d6ec(0x9b4)]())) + _0x38d6ec(0xaf7) + (_0x59b49a || '最近没有互动记录。') + '\x0a---\x0a##\x20最近的朋友圈动态\x0a' + (_0x2bb7c8 || _0x38d6ec(0x5da)) + '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。'; _0x3f3149 = [{ 'role': 'system', 'content': _0x841bdc }, { 'role': _0x38d6ec(0x5c3), 'content': _0x38d6ec(0x827) }]; const _0x5dd943 = await _0x45b854(_0x3f3149); if (_0x5dd943) { if (_0x38d6ec(0xaf6) !== _0x38d6ec(0xaf6)) _0xda50bb[_0x38d6ec(0xbb0)] = null; else { let _0x54acbf = _0x2e4b8c[_0x38d6ec(0x9bb)]['find'](_0x1b35c6 => _0x1b35c6[_0x38d6ec(0x918)] === _0x4eaf14); !_0x54acbf && (_0x38d6ec(0xa8c) === 'nAeBx' ? _0x413e4e['push']({ 'time': _0x3b3104, 'text': _0x134266 }) : (_0x54acbf = { 'characterId': _0x4eaf14, 'entries': [] }, _0x2e4b8c[_0x38d6ec(0x9bb)][_0x38d6ec(0x7e4)](_0x54acbf))); _0x54acbf[_0x38d6ec(0xb3c)]['push']({ 'timestamp': Date[_0x38d6ec(0x9b4)](), 'author': _0x4eaf14, 'content': _0x5dd943 }), _0x5a3c71(); const _0x53797d = _0x54acbf[_0x38d6ec(0xb3c)][_0x38d6ec(0x6f2)]; _0x2e4b8c[_0x38d6ec(0x1ff)] = Math[_0x38d6ec(0xa58)](_0x53797d / 0x2) - 0x1, _0x253b8d(); } } } else _0x250c6f(_0x38d6ec(0xb78) + _0x110bed[_0x38d6ec(0x542)]); } catch (_0x5514d3) { _0x18c07b(_0x38d6ec(0x839) + _0x5514d3[_0x38d6ec(0x542)]); } finally { _0x5b3ee9(![]), _0x2e4b8c['isGenerating'] = ![]; } } function _0x3acc1b() { const _0x5559f5 = _0x3abecc; if ('nwEtc' === _0x5559f5(0x8ac)) _0x4cc6c7(_0x5559f5(0x292)); else { const _0x1dfd2b = document[_0x5559f5(0x392)](_0x5559f5(0x7c8)), _0xdf82f3 = document['getElementById'](_0x5559f5(0x3bf)), _0x1d2986 = document['querySelector'](_0x5559f5(0x1e2)); _0x2e4b8c[_0x5559f5(0x22b)] === _0x5559f5(0x514) ? (_0x1dfd2b[_0x5559f5(0xb56)][_0x5559f5(0x993)] = _0x5559f5(0x3a4), _0xdf82f3[_0x5559f5(0xb56)][_0x5559f5(0x993)] = _0x5559f5(0x94c)) : 'yUvrW' !== _0x5559f5(0x39e) ? (_0x1dfd2b['style'][_0x5559f5(0x993)] = _0x5559f5(0x94c), _0xdf82f3[_0x5559f5(0xb56)][_0x5559f5(0x993)] = 'none') : _0x5ef2ae = _0x5559f5(0xc31), _0x1d2986[_0x5559f5(0xb56)]['display'] = _0x5559f5(0x94c); } } function _0x3be1c9() { const _0x554618 = _0x3abecc; if (_0x554618(0x51a) !== _0x554618(0x51a)) _0x5f2b4f(![]), _0x439532['error']('全量导入失败:', _0x2ee931), _0xab055d(_0x554618(0x77b) + _0x27f8c['message']); else { const _0x2d5da7 = document[_0x554618(0x392)]('galgame-speaker'), _0x190e16 = document[_0x554618(0x392)](_0x554618(0x62b)); if (_0x2e4b8c[_0x554618(0x540)][_0x554618(0x6f2)] > 0x0) { if (_0x554618(0xb36) !== 'vAJir') { const _0xf52e93 = _0x2e4b8c[_0x554618(0x540)][_0x554618(0xb6e)](); _0x2d5da7[_0x554618(0x324)] = _0xf52e93[_0x554618(0x5fa)] === 'narrator' ? '旁白' : _0xf52e93[_0x554618(0x5fa)], _0x190e16[_0x554618(0x324)] = _0xf52e93[_0x554618(0x7f8)], _0xf52e93[_0x554618(0x5fa)] !== _0x554618(0x2f0) && (_0x554618(0x1d8) === _0x554618(0xa41) ? _0x574956['error']('加载徽章图片失败', _0x10fb99) : _0x30c2d9(_0x2e4b8c[_0x554618(0x8f1)], _0xf52e93[_0x554618(0x896)])); } else _0x2deb79[_0x554618(0x298)](_0x4a861b); } else { const _0xb0eb16 = _0x2e4b8c[_0x554618(0xaa8)][_0x2e4b8c[_0x554618(0x8f1)]]; if (_0xb0eb16 && _0xb0eb16[_0x554618(0x6f2)] > 0x0) { _0x2e4b8c[_0x554618(0x540)] = [..._0xb0eb16]; const _0x2f61c6 = _0x2e4b8c[_0x554618(0x540)][_0x554618(0xb6e)](); _0x2d5da7[_0x554618(0x324)] = _0x2f61c6['speaker'] === 'narrator' ? '旁白' : _0x2f61c6[_0x554618(0x5fa)], _0x190e16[_0x554618(0x324)] = _0x2f61c6[_0x554618(0x7f8)], _0x2f61c6[_0x554618(0x5fa)] !== _0x554618(0x2f0) && _0x30c2d9(_0x2e4b8c[_0x554618(0x8f1)], _0x2f61c6[_0x554618(0x896)]); } else _0x554618(0x301) === _0x554618(0x301) ? (_0x2d5da7[_0x554618(0x324)] = '旁白', _0x190e16[_0x554618(0x324)] = _0x554618(0x8af)) : _0x1c7a2f[_0x554618(0xbd7)] = _0x32da6f[_0x554618(0x220)]; } } } async function _0x30c2d9(_0x1ecc60, _0x3ebc1e) { const _0x4983b1 = _0x3abecc, _0x5294cb = document[_0x4983b1(0x392)](_0x4983b1(0xa45)), _0x40c918 = document[_0x4983b1(0x392)](_0x4983b1(0xa39)), _0x3aade8 = _0x2653c6(_0x1ecc60), _0x2b42fc = _0x3aade8?.[_0x4983b1(0x5dd)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x1b72e4 = 0x50 * _0x2b42fc[_0x4983b1(0x425)]; _0x40c918[_0x4983b1(0xb56)][_0x4983b1(0x834)] = _0x1b72e4 + '%', _0x40c918[_0x4983b1(0xb56)][_0x4983b1(0xa9a)] = _0x1b72e4 + '%', _0x40c918[_0x4983b1(0xb56)]['left'] = _0x2b42fc['x'] + '%', _0x40c918['style'][_0x4983b1(0x8f6)] = _0x2b42fc['y'] + '%', _0x40c918[_0x4983b1(0xb56)][_0x4983b1(0x6fc)] = _0x4983b1(0x1da), _0x40c918['style'][_0x4983b1(0x580)] = 'auto'; const _0x44af4f = [_0x4983b1(0x83c), 'happy', 'angry', _0x4983b1(0xa51), _0x4983b1(0x530)], _0xefaf67 = _0x44af4f[_0x4983b1(0x21d)](_0x3ebc1e) ? _0x3ebc1e : _0x4983b1(0x83c); try { if ('vHPJX' !== _0x4983b1(0x729)) { const _0x58a24b = await _0x1de353(_0x4983b1(0x3e2) + _0xefaf67 + '_' + _0x1ecc60); if (_0x58a24b) _0x5294cb[_0x4983b1(0x84e)] && _0x5294cb[_0x4983b1(0xb56)][_0x4983b1(0x225)] !== '0' ? 'ihBUI' !== 'CScGu' ? (_0x5294cb['style']['opacity'] = 0x0, setTimeout(() => { const _0x4e3a6d = _0x4983b1; _0x5294cb[_0x4e3a6d(0x84e)] = URL[_0x4e3a6d(0x38c)](_0x58a24b), _0x5294cb[_0x4e3a6d(0xb56)][_0x4e3a6d(0x225)] = 0x1; }, 0x96)) : (_0x250e30(), _0x14f972('friendCircleList', _0x4983b1(0xa74))) : (_0x5294cb[_0x4983b1(0x84e)] = URL['createObjectURL'](_0x58a24b), _0x5294cb[_0x4983b1(0xb56)][_0x4983b1(0x225)] = 0x1); else { const _0x1e67d1 = await _0x1de353(_0x4983b1(0x79d) + _0x1ecc60); _0x5294cb['src'] = _0x1e67d1 ? URL[_0x4983b1(0x38c)](_0x1e67d1) : ''; } } else _0xef4bcc *= _0xd18b6d / _0x398fb8, _0x12168e = _0x218aab; } catch (_0x5c8bb9) { if (_0x4983b1(0x571) !== _0x4983b1(0x86e)) console['error']('加载立绘失败:', _0x5c8bb9), _0x5294cb[_0x4983b1(0x84e)] = ''; else { const _0x4ba6c6 = _0x4bc3f8['createElement'](_0x4983b1(0x63a)); _0x4ba6c6[_0x4983b1(0x894)] = _0x4983b1(0xba6), _0x4ba6c6[_0x4983b1(0x324)] = _0x3e074d['content'], _0x1e501c['appendChild'](_0x4ba6c6); } } } let _0x5c26d5 = ![], _0x13bc98 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x3a66a5 = document[_0x3abecc(0x392)]('sprite-adjust-button'), _0x1f5ffd = document[_0x3abecc(0x392)](_0x3abecc(0x639)), _0x3ccba8 = document[_0x3abecc(0x392)](_0x3abecc(0xbc8)), _0x406937 = document['getElementById'](_0x3abecc(0x619)), _0x5b2f3b = document[_0x3abecc(0x392)](_0x3abecc(0xb0b)), _0x5a6a79 = document[_0x3abecc(0x392)]('galgame-sprite-container'), _0x94e9d4 = document[_0x3abecc(0x392)](_0x3abecc(0xb49)), _0x27e5f9 = document['getElementById']('meeting-main-content'); let _0x49a210 = {}; function _0x1754fb() { const _0x54b807 = _0x3abecc, _0xc5a8c5 = _0x2653c6(_0x2e4b8c[_0x54b807(0x8f1)]); if (!_0xc5a8c5) return; _0x5c26d5 = !![], _0x5b2f3b[_0x54b807(0xb56)]['display'] = _0x54b807(0x94c); const _0x2ff231 = _0xc5a8c5[_0x54b807(0x5dd)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document['getElementById']('sprite-slider-x')[_0x54b807(0x60e)] = _0x2ff231['x'], document['getElementById'](_0x54b807(0xb8b))[_0x54b807(0x60e)] = _0x2ff231['y'], document[_0x54b807(0x392)](_0x54b807(0x648))[_0x54b807(0x60e)] = _0x2ff231[_0x54b807(0x425)] * 0x64, _0x49a210 = { ..._0x2ff231 }, document[_0x54b807(0x392)](_0x54b807(0x893))['style'][_0x54b807(0x993)] = _0x54b807(0x3a4), document[_0x54b807(0x392)]('galgame-sprite-adjust-ui')[_0x54b807(0xb56)][_0x54b807(0x993)] = _0x54b807(0x3a4); } function _0x4df907(_0x5b89d8 = ![]) { const _0x570090 = _0x3abecc; _0x5c26d5 = ![], _0x5b2f3b[_0x570090(0xb56)][_0x570090(0x993)] = _0x570090(0x3a4), document[_0x570090(0x392)](_0x570090(0x893))[_0x570090(0xb56)]['display'] = 'block', document['getElementById'](_0x570090(0x355))[_0x570090(0xb56)]['display'] = _0x570090(0x94c); if (!_0x5b89d8) { const _0x4ae543 = _0x2653c6(_0x2e4b8c[_0x570090(0x8f1)]); _0x4ae543 && (_0x4ae543[_0x570090(0x5dd)] = _0x49a210, _0x30c2d9(_0x2e4b8c[_0x570090(0x8f1)], _0x570090(0x83c))); } } function _0xbc7579() { const _0xf305e3 = _0x3abecc, _0x24c547 = _0x2653c6(_0x2e4b8c[_0xf305e3(0x8f1)]); if (!_0x24c547) return; const _0x48300f = parseFloat(document[_0xf305e3(0x392)]('sprite-slider-x')[_0xf305e3(0x60e)]), _0x34f6ed = parseFloat(document[_0xf305e3(0x392)](_0xf305e3(0xb8b))[_0xf305e3(0x60e)]), _0x52775b = parseFloat(document[_0xf305e3(0x392)](_0xf305e3(0x648))[_0xf305e3(0x60e)]) / 0x64; _0x24c547[_0xf305e3(0x5dd)] = { 'x': _0x48300f, 'y': _0x34f6ed, 'scale': _0x52775b }, _0x5a3c71(), _0x18c07b('哼，就按你说的办好了。'), _0x4df907(!![]); } function _0x37b6c8() { const _0x4e3fd8 = _0x3abecc; 'vncUw' !== _0x4e3fd8(0x6f5) ? _0x4b635a(_0x4e3fd8(0xaf1))['then'](_0x2a2151 => { const _0x3938ff = _0x4e3fd8; if (_0x2a2151) { if ('mwUsX' === 'mwUsX') { const _0x2a03de = _0x2653c6(_0x2e4b8c['activeMeetingCharId']); _0x2a03de && (_0x3938ff(0x37e) === _0x3938ff(0x37e) ? (delete _0x2a03de['spriteTransform'], _0x5a3c71(), _0x30c2d9(_0x2a03de['id'], _0x3938ff(0x83c)), _0x18c07b('已恢复默认。'), _0x4df907(!![])) : _0x11ba82[_0x3938ff(0x3ed)](_0x2c011f => { const _0x4591c2 = _0x3938ff; _0x2c011f ? _0x5eba82(_0x2c011f) : _0x554d1a(new _0x5375f9(_0x4591c2(0xb65))); }, _0x51d997, _0x96d23)); } else { const _0x1aae3d = _0x7af362[_0x3938ff(0x50b)]('#app-dock-bottom-left\x20#' + _0x31ab65 + _0x3938ff(0xa62) + _0x5e9c48 + '\x20.app-icon-img')?.[_0x3938ff(0x2c9)]; _0x1aae3d && (_0x23f9ba[_0x3938ff(0x2c9)] = _0x1aae3d); } } }) : _0x202874['forEach'](_0x13754e => { const _0xea8ef = _0x4e3fd8, _0x4760dd = _0x13754e[_0xea8ef(0x447)] === 'character', _0x459c4f = _0x4760dd ? _0x1942ee ? _0x3b1b43[0x0] : '?' : _0x53cb4b ? _0x170f48[0x0] : '?'; _0x2c8152 += _0xea8ef(0x978) + (_0x4760dd ? _0xea8ef(0x5c3) : 'ai') + _0xea8ef(0x859) + (!_0x4760dd ? _0xea8ef(0x5a6) + _0x459c4f + _0xea8ef(0x892) : '') + _0xea8ef(0x503) + (_0x4760dd ? _0xea8ef(0x5c3) : 'ai') + _0xea8ef(0xbd2) + _0x13754e[_0xea8ef(0xa19)] + _0xea8ef(0xaa1) + (_0x4760dd ? _0xea8ef(0x5a6) + _0x459c4f + _0xea8ef(0x892) : '') + _0xea8ef(0x692); }); } function _0x2f915b() { const _0x2a4f5a = _0x3abecc; if (!_0x5c26d5) return; const _0x416b1b = _0x2e4b8c[_0x2a4f5a(0x8f1)], _0x14658e = _0x2653c6(_0x416b1b); if (!_0x14658e) return; const _0x1e0438 = parseFloat(document[_0x2a4f5a(0x392)](_0x2a4f5a(0x97f))['value']), _0x5d6709 = parseFloat(document['getElementById'](_0x2a4f5a(0xb8b))['value']), _0x1eea8e = parseFloat(document['getElementById'](_0x2a4f5a(0x648))[_0x2a4f5a(0x60e)]) / 0x64; _0x14658e[_0x2a4f5a(0x5dd)] = { 'x': _0x1e0438, 'y': _0x5d6709, 'scale': _0x1eea8e }; const _0x435951 = document[_0x2a4f5a(0x392)](_0x2a4f5a(0xa39)), _0x3e81d5 = 0x50 * _0x1eea8e; _0x435951[_0x2a4f5a(0xb56)][_0x2a4f5a(0x834)] = _0x3e81d5 + '%', _0x435951[_0x2a4f5a(0xb56)][_0x2a4f5a(0xa9a)] = _0x3e81d5 + '%', _0x435951[_0x2a4f5a(0xb56)][_0x2a4f5a(0x6f1)] = _0x1e0438 + '%', _0x435951[_0x2a4f5a(0xb56)]['top'] = _0x5d6709 + '%', _0x435951[_0x2a4f5a(0xb56)][_0x2a4f5a(0x6fc)] = _0x2a4f5a(0x1da); } document[_0x3abecc(0x392)](_0x3abecc(0x97f))['addEventListener']('input', _0x2f915b), document[_0x3abecc(0x392)]('sprite-slider-y')[_0x3abecc(0xabf)](_0x3abecc(0x921), _0x2f915b), document[_0x3abecc(0x392)]('sprite-slider-scale')[_0x3abecc(0xabf)](_0x3abecc(0x921), _0x2f915b), _0x3a66a5[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x1754fb), _0x1f5ffd[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0xbc7579), _0x3ccba8['addEventListener'](_0x3abecc(0x4b9), () => _0x4df907(![])), _0x406937['addEventListener']('click', _0x37b6c8); function _0x3e2cce(_0x1b1f10) { const _0x13fa55 = _0x3abecc, _0x3d2366 = _0x2653c6(_0x1b1f10); if (!_0x3d2366) return; const _0x485486 = _0x2e4b8c[_0x13fa55(0x442)]['find'](_0x18d418 => _0x18d418[_0x13fa55(0x875)] === _0x13fa55(0xa4e) && _0x18d418[_0x13fa55(0xa2a)]['includes'](_0x1b1f10)), _0x5364b9 = _0x23edb1(_0x485486['id']), _0x2b2d5a = _0x2e4b8c[_0x13fa55(0x2c8)][_0x13fa55(0x742)](_0x4840e4 => _0x4840e4[_0x13fa55(0x1e3)])[_0x13fa55(0x80d)](), _0x2bf89d = document['getElementById'](_0x13fa55(0x37f)), _0x25809f = document['getElementById']('galgame-text'); let _0x312443 = null; if (_0x2b2d5a) { if (_0x2b2d5a[_0x13fa55(0x253)] === _0x13fa55(0x880)) { const _0x55d9b5 = _0x2e4b8c[_0x13fa55(0xaa8)][_0x1b1f10]; _0x55d9b5 && _0x55d9b5[_0x13fa55(0x6f2)] > 0x0 && (_0x13fa55(0x95e) !== 'uAgMK' ? (_0x77df4(![]), _0x55bca1[_0x13fa55(0x60e)] = '') : _0x312443 = _0x55d9b5['at'](-0x1)); } else 'ZQScY' === 'aDsZN' ? (_0x86c30[_0x13fa55(0x5b1)](_0x13fa55(0xaf5) + _0x545a9f['id'], _0x40be28), _0x299aa4(_0x13fa55(0x95d))) : _0x312443 = { 'speaker': _0x5364b9[_0x13fa55(0x420)], 'line': _0x2b2d5a[_0x13fa55(0xa19)], 'emotion': _0x13fa55(0x83c) }; } if (_0x312443) { _0x2bf89d[_0x13fa55(0x324)] = _0x312443[_0x13fa55(0x5fa)] === _0x13fa55(0x2f0) ? '旁白' : _0x312443[_0x13fa55(0x5fa)], _0x25809f[_0x13fa55(0x324)] = _0x312443[_0x13fa55(0x7f8)]; if (_0x312443[_0x13fa55(0x5fa)] === _0x3d2366[_0x13fa55(0x420)]) 'qKVxm' === _0x13fa55(0x267) ? _0x3c7709[_0x13fa55(0xb25)]() : _0x30c2d9(_0x1b1f10, _0x312443['emotion']); else { if ('akIBO' !== _0x13fa55(0x43a)) _0x30c2d9(_0x1b1f10, 'normal'); else { _0x6dc683(); const _0x3eba94 = _0x1465b6(_0x13fa55(0x57c), _0x2d46fe[_0x13fa55(0x420)]); _0x3eba94 && _0x3eba94[_0x13fa55(0x8bb)]() && _0x3eba94 !== _0x35a745['name'] && (_0x361be1[_0x13fa55(0x420)] = _0x3eba94[_0x13fa55(0x8bb)](), _0x17201d(), _0x5cf8c7(), _0x3bccf7(), _0xfe6b5e(_0x13fa55(0x73a) + _0x512b83['name'] + '\x22。')); } } } else _0x2bf89d['textContent'] = _0x3d2366[_0x13fa55(0x420)], _0x25809f[_0x13fa55(0x324)] = '（开始一段新的对话...）', _0x30c2d9(_0x1b1f10, _0x13fa55(0x83c)); } function _0x274030() { const _0x5025aa = _0x3abecc, _0x2bfabc = new Date(), _0x44afae = document['getElementById'](_0x5025aa(0x9ce)), _0x3ff265 = document['getElementById'](_0x5025aa(0x71f)); if (_0x44afae && _0x3ff265) { const _0x37a216 = String(_0x2bfabc['getHours']())[_0x5025aa(0xb98)](0x2, '0'), _0x897904 = String(_0x2bfabc[_0x5025aa(0x618)]())[_0x5025aa(0xb98)](0x2, '0'); _0x44afae[_0x5025aa(0x324)] = _0x37a216 + ':' + _0x897904; const _0x500c89 = _0x2bfabc['getMonth']() + 0x1, _0xb74148 = _0x2bfabc['getDate'](), _0xad1f20 = ['星期日', _0x5025aa(0x3c0), '星期二', _0x5025aa(0xb18), _0x5025aa(0x6dc), _0x5025aa(0x720), _0x5025aa(0x5c1)][_0x2bfabc[_0x5025aa(0x5d1)]()]; _0x3ff265[_0x5025aa(0x324)] = _0x500c89 + '月' + _0xb74148 + '日\x20' + _0xad1f20; } } const _0x3c07e2 = document[_0x3abecc(0x392)]('listen-together-modal'), _0x2cb151 = document[_0x3abecc(0x392)]('chat-listen-together-button'), _0x44998c = document[_0x3abecc(0x392)]('cancel-listen-together'), _0x430c95 = document[_0x3abecc(0x392)]('listen-together-backdrop'), _0x21136c = document[_0x3abecc(0x392)](_0x3abecc(0x295)), _0x2a3ed9 = document['getElementById']('unified-audio-player'), _0x5e6fd8 = document['getElementById'](_0x3abecc(0xb8d)), _0x9b8882 = document[_0x3abecc(0x392)]('lt-ui-close-btn'), _0x43eb84 = document[_0x3abecc(0x392)](_0x3abecc(0xa20)); let _0x7d28e = []; async function _0x5b2005() { const _0x72ada5 = _0x3abecc; if (_0x72ada5(0x8b7) !== _0x72ada5(0x6f8)) { if (!_0x2e4b8c[_0x72ada5(0x7ee)]) return; _0x21136c[_0x72ada5(0x2c9)] = _0x72ada5(0xb27), _0x3c07e2['classList'][_0x72ada5(0x6ec)](_0x72ada5(0x3a9)); const _0x2ad689 = await _0x4be0cf(); if (_0x2ad689[_0x72ada5(0x6f2)] === 0x0) { _0x21136c[_0x72ada5(0x2c9)] = _0x72ada5(0x275); return; } _0x21136c[_0x72ada5(0x2c9)] = '', _0x2ad689[_0x72ada5(0xb5e)](_0xc76fb7 => { const _0x49bb94 = _0x72ada5; if (_0x49bb94(0x4b4) !== _0x49bb94(0x4b4)) _0x12e0ed[_0x49bb94(0x25d)] = _0xb51b5c['linkedWorldBookIds'][_0x49bb94(0x742)](_0x457fc7 => _0x457fc7 !== _0x5c99cd); else { const _0x4056f3 = document[_0x49bb94(0x92e)](_0x49bb94(0x63a)); _0x4056f3[_0x49bb94(0x894)] = _0x49bb94(0x9b0); const _0x172981 = _0xc76fb7[_0x49bb94(0x883)] ? URL[_0x49bb94(0x38c)](_0xc76fb7[_0x49bb94(0x883)]) : _0x2be033; _0x4056f3[_0x49bb94(0x2c9)] = _0x49bb94(0x444) + _0x172981 + _0x49bb94(0x3a5) + (_0xc76fb7[_0x49bb94(0x268)][_0x49bb94(0x9c8)] || _0x49bb94(0x71b)) + _0x49bb94(0x636) + (_0xc76fb7[_0x49bb94(0x268)]['歌手'] || '未知艺术家') + _0x49bb94(0x769), _0x4056f3[_0x49bb94(0xabf)]('click', () => { const _0x2d6e38 = _0x49bb94; 'HndqD' === _0x2d6e38(0x90c) ? (_0x55053e = { 'characterId': _0x28ced6, 'entries': [] }, _0x2e7293[_0x2d6e38(0x9bb)][_0x2d6e38(0x7e4)](_0x48ba38)) : _0x37b63e(_0xc76fb7); }), _0x21136c['appendChild'](_0x4056f3); } }); } else { const _0x1e922c = _0xc4c95d[_0x72ada5(0xa4c)][_0x72ada5(0x5a1)][0x0]; if (!_0x1e922c) return; const _0x27498e = _0x556513[_0x72ada5(0x38c)](_0x1e922c); _0x113bda[_0x72ada5(0x392)](_0x72ada5(0x9d6))[_0x72ada5(0xb56)][_0x72ada5(0xb85)] = 'url(\x27' + _0x27498e + '\x27)'; } } function _0x12807e() { const _0x591723 = _0x3abecc; if ('kxZUU' !== _0x591723(0x658)) { const _0x309deb = _0x10045a[0x0][_0x591723(0x8bb)](), _0x45fcfa = _0x5f2e3a[0x1][_0x591723(0x8bb)]()[_0x591723(0x8d5)](/^"|"$/g, ''); _0x59ffb8[_0x309deb] = _0x45fcfa; } else _0x3c07e2['classList'][_0x591723(0xb26)]('show'); } async function _0x37b63e(_0xef370f) { const _0x65914 = _0x3abecc; if ('IGZHY' !== 'ZEtkU') { if (!_0x2e4b8c[_0x65914(0x7ee)] || !_0xef370f) return; let _0x5bce78 = null; if (_0xef370f[_0x65914(0x883)]) { if ('jyGse' !== _0x65914(0x628)) { const _0x173b04 = _0x348258[_0x65914(0x92e)]('div'); _0x173b04[_0x65914(0x894)] = _0x65914(0x55c), _0x173b04[_0x65914(0x2c9)] = _0x65914(0x4b1) + _0x1b4a25[_0x65914(0x9b7)] + _0x65914(0x882) + _0x491d9a[_0x65914(0xb86)][_0x65914(0x8c5)](0x2) + _0x65914(0x815) + _0x385354['id'] + _0x65914(0xa95), _0x2cbefb[_0x65914(0x594)](_0x173b04); } else try { _0x5bce78 = _0x65914(0xba0) + Date[_0x65914(0x9b4)]() + '_' + Math[_0x65914(0xb59)](), await _0x3b613b(_0x5bce78, _0xef370f[_0x65914(0x883)]); } catch (_0x4c2d6c) { _0x65914(0x8ca) === _0x65914(0x8ca) ? console[_0x65914(0x5b1)]('在“一起听”邀请中，净化封面失败:', _0x4c2d6c) : _0x29b8f8[_0x65914(0x392)](_0x65914(0x294))['click'](); } } const _0x219ed2 = { 'role': _0x65914(0x5c3), 'type': _0x65914(0x8c7), 'content': _0x65914(0x7b4) + _0xef370f[_0x65914(0x268)][_0x65914(0x9c8)] + ']', 'songId': _0xef370f['id'], 'songName': _0xef370f['info'][_0x65914(0x9c8)], 'artist': _0xef370f[_0x65914(0x268)]['歌手'], 'coverId': _0x5bce78, 'timestamp': Date[_0x65914(0x9b4)]() }; _0x2e4b8c[_0x65914(0x2c8)][_0x65914(0x7e4)](_0x219ed2), _0x5f38ff(), _0x2d9cac(), _0x12807e(), setTimeout(_0x3137d6, 0x64); } else _0x3f9123[_0x65914(0xab3)][_0x65914(0xb8f)] = _0x1d1a42['checked'], _0xfca2a3(), _0x5ba3fd(); } _0x2cb151[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x5b2005), _0x44998c[_0x3abecc(0xabf)](_0x3abecc(0x4b9), _0x12807e), _0x430c95['addEventListener']('click', _0x12807e); async function _0x5c0877(_0x3ad59c, _0x468673, _0x37cec4) { const _0x4ec7aa = _0x3abecc, _0x58d3be = _0x2e4b8c[_0x4ec7aa(0x442)][_0x4ec7aa(0x69e)](_0x20ff87 => _0x20ff87[_0x4ec7aa(0x535)] && _0x20ff87['activeListenSession'][_0x4ec7aa(0x620)]), _0x518c32 = _0x28f748(); if (_0x58d3be && _0x58d3be['id'] !== _0x518c32['id']) { if (_0x4ec7aa(0x855) !== 'DJaHM') { if (_0x5ec026[_0x4ec7aa(0x875)] === 'touchstart') _0x999ad[_0x4ec7aa(0x93e)](); _0x3a0174(_0x3a1684); } else _0x58d3be[_0x4ec7aa(0x535)] = null, _0x18c07b(_0x4ec7aa(0x632)), _0x5a3c71(); } else _0x58d3be && _0x58d3be['id'] === _0x518c32['id'] && _0x18c07b(_0x4ec7aa(0xa14)); _0x5b3ee9(!![], _0x4ec7aa(0xba5)); if (!_0x518c32) { _0x5b3ee9(![]), _0x18c07b(_0x4ec7aa(0x387)); return; } const _0x62fb5b = await _0x58cb76(_0x3ad59c); if (!_0x62fb5b) { _0x5b3ee9(![]), _0x18c07b('错误：找不到这首作为“信物”的歌。'); return; } _0x518c32[_0x4ec7aa(0x535)] = { 'isActive': !![], 'songId': _0x3ad59c, 'leaderId': _0x4ec7aa(0x5c3), 'songName': _0x62fb5b[_0x4ec7aa(0x268)][_0x4ec7aa(0x9c8)], 'artist': _0x62fb5b[_0x4ec7aa(0x268)]['歌手'], 'cover': _0x62fb5b[_0x4ec7aa(0x883)] }, _0x5a3c71(), document['getElementById']('lt-ui-cover-art')[_0x4ec7aa(0x84e)] = _0x62fb5b[_0x4ec7aa(0x883)] ? URL['createObjectURL'](_0x62fb5b[_0x4ec7aa(0x883)]) : _0x2be033, document[_0x4ec7aa(0x392)]('lt-ui-song-title')['textContent'] = _0x62fb5b['info']['歌曲名称'], document['getElementById'](_0x4ec7aa(0x8bc))[_0x4ec7aa(0x324)] = _0x62fb5b[_0x4ec7aa(0x268)]['歌手'], _0x520e59(_0x62fb5b), _0x5e6fd8[_0x4ec7aa(0xb56)]['display'] = _0x4ec7aa(0x366), setTimeout(() => _0x5e6fd8[_0x4ec7aa(0x42c)][_0x4ec7aa(0x6ec)](_0x4ec7aa(0x3a9)), 0xa), _0x37cec4[_0x4ec7aa(0x2c9)] = '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>' + _0x37cec4[_0x4ec7aa(0x50b)](_0x4ec7aa(0x71d))[_0x4ec7aa(0x3c2)]; if (_0x2e4b8c[_0x4ec7aa(0x2c8)][_0x468673]) { if ('eooes' === _0x4ec7aa(0xc16)) _0x2e4b8c['conversationHistory'][_0x468673]['accepted'] = !![], _0x5f38ff(); else { const _0x578f56 = _0x5f12ee['getElementById'](_0x4ec7aa(0x28d)); _0x578f56[_0x4ec7aa(0x2c9)] = ''; if (_0x250085[_0x4ec7aa(0x285)]['length'] === 0x0) { _0x578f56[_0x4ec7aa(0x2c9)] = _0x4ec7aa(0x3f2); return; } _0x26a6e0[_0x4ec7aa(0x285)][_0x4ec7aa(0xb5e)](_0x55c3a5 => { const _0x6bd566 = _0x4ec7aa, _0x5930a8 = _0xb3c92d['createElement']('div'); _0x5930a8[_0x6bd566(0x894)] = _0x6bd566(0x984), _0x5930a8['dataset']['id'] = _0x55c3a5['id'], _0x5930a8[_0x6bd566(0x2c9)] = _0x6bd566(0x822) + _0x55c3a5[_0x6bd566(0x420)] + _0x6bd566(0x28a) + _0x55c3a5[_0x6bd566(0xa19)][_0x6bd566(0x58c)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20', _0x5930a8[_0x6bd566(0xabf)](_0x6bd566(0x4b9), () => _0x243bc8(_0x55c3a5['id'])), _0x578f56[_0x6bd566(0x594)](_0x5930a8); }); } } _0x5b3ee9(![]), _0x15b31a(_0x3ad59c, [_0x3ad59c]), _0x9e19ad(_0x62fb5b, !![]); } function _0x5bf61d() { const _0x36b619 = _0x3abecc, _0x414139 = _0x2e4b8c[_0x36b619(0x442)][_0x36b619(0x69e)](_0x124de0 => _0x124de0[_0x36b619(0x535)] && _0x124de0[_0x36b619(0x535)][_0x36b619(0x620)]); _0x414139 && ('Xrrnl' !== _0x36b619(0xbe7) ? (_0x414139[_0x36b619(0x535)] = null, _0x5a3c71(), _0x18c07b('同步已断开。'), _0x9e19ad(), _0x5e6fd8['classList']['remove'](_0x36b619(0x3a9)), setTimeout(() => _0x5e6fd8['style'][_0x36b619(0x993)] = _0x36b619(0x3a4), 0x12c)) : (_0x54da27[_0x36b619(0x5b1)](_0x36b619(0x441), _0x49d65d), _0x486ff3(_0x36b619(0xa7b) + _0x204bf4['message']))); } function _0x4edc40(_0x2b204a) { const _0x90fe84 = _0x3abecc; if (!_0x2b204a) return []; const _0x5bfb58 = _0x2b204a[_0x90fe84(0x686)]('\x0a'), _0x3a8d23 = [], _0x2276c0 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x8e2053 of _0x5bfb58) { const _0x215cf6 = _0x8e2053[_0x90fe84(0xaab)](_0x2276c0); if (_0x215cf6) { if (_0x90fe84(0x722) !== 'TKNXR') { const _0x19a8b4 = parseInt(_0x215cf6[0x1], 0xa), _0xdc2144 = parseInt(_0x215cf6[0x2], 0xa), _0x53dc71 = parseInt(_0x215cf6[0x3], 0xa) * (_0x215cf6[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x4ed5d3 = _0x19a8b4 * 0x3c + _0xdc2144 + _0x53dc71 / 0x3e8, _0x7f7fe = _0x8e2053[_0x90fe84(0x8d5)](_0x2276c0, '')[_0x90fe84(0x8bb)](); if (_0x7f7fe) { if (_0x90fe84(0x24c) === _0x90fe84(0x24c)) _0x3a8d23[_0x90fe84(0x7e4)]({ 'time': _0x4ed5d3, 'text': _0x7f7fe }); else { const _0x44fc29 = _0x1c50fd['querySelector'](_0x90fe84(0xa09)); _0x44fc29 && _0x44fc29[_0x90fe84(0xabf)](_0x90fe84(0x4b9), function () { const _0x282ca2 = _0x90fe84, _0x13d638 = { 'id': _0x15eb78['id'], 'url': _0x52521e[_0x282ca2(0x565)] }; _0x21f550(this, _0x13d638); }); } } } else { if (_0x34d09b['length'] === 0x0) return; _0x5676a8 = (_0x46f71d - 0x1 + _0x3fd1af[_0x90fe84(0x6f2)]) % _0xdc2802[_0x90fe84(0x6f2)], _0x5c488d(_0x344900[_0x4710df], _0x3bd114); } } } return _0x3a8d23; } function _0x520e59(_0x453815) { const _0x24c98d = _0x3abecc; _0x7d28e = _0x4edc40(_0x453815['lyrics']), _0x43eb84[_0x24c98d(0x2c9)] = ''; if (_0x7d28e[_0x24c98d(0x6f2)] === 0x0) { if ('jhFPG' === _0x24c98d(0x40a)) { _0x43eb84[_0x24c98d(0x2c9)] = _0x24c98d(0x424); return; } else _0x3aaa4e[_0x24c98d(0x29c)] = _0xe401ed, _0x2c870c[_0x24c98d(0x99f)] = _0x2d7d6a, _0x3782c7[_0x24c98d(0x3ce)] = ![], _0x495b03(); } _0x7d28e[_0x24c98d(0xb5e)]((_0x23430c, _0x440077) => { const _0x454db5 = _0x24c98d, _0x2f933f = document['createElement']('p'); _0x2f933f['textContent'] = _0x23430c[_0x454db5(0xbbc)], _0x2f933f['id'] = _0x454db5(0x794) + _0x440077, _0x43eb84[_0x454db5(0x594)](_0x2f933f); }); } function _0x82b509(_0x23e6d9, _0x5d909c, _0x188ee5, _0x1af76a) { const _0x38617f = _0x3abecc, _0x3d86c1 = (_0x1af76a - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x23e6d9 + _0x188ee5 * Math[_0x38617f(0xa1b)](_0x3d86c1), 'y': _0x5d909c + _0x188ee5 * Math['sin'](_0x3d86c1) }; } function _0x48a51e(_0x597b94) { const _0x21461e = _0x3abecc; if ('WSoPq' !== _0x21461e(0x483)) { const _0x46b00a = _0x21461e(0x9d8), _0x3566db = document[_0x21461e(0xb74)](_0x46b00a, 'svg'), _0x1ce8a1 = 0xfa, _0x2b033d = _0x1ce8a1 / 0x2, _0x464ebe = _0x1ce8a1 / 0x2, _0x4a7008 = _0x1ce8a1 / 0x2 - 0x14; _0x3566db[_0x21461e(0x35c)](_0x21461e(0xa9a), _0x21461e(0x3b6)), _0x3566db[_0x21461e(0x35c)]('height', _0x21461e(0x3b6)), _0x3566db['setAttribute'](_0x21461e(0x813), '0\x200\x20' + _0x1ce8a1 + '\x20' + _0x1ce8a1); const _0x32b2aa = Object[_0x21461e(0x9d9)](_0x597b94)['reduce']((_0x5dc389, _0x167bd9) => _0x5dc389 + _0x167bd9, 0x0); if (_0x32b2aa === 0x0) return _0x3566db; let _0x4f9beb = -0x5a; const _0x1a0b1c = [_0x21461e(0x9f1), _0x21461e(0x589), '#99ff99', _0x21461e(0x575), _0x21461e(0x415), '#ffb366', '#a4c2f4', _0x21461e(0x6a4)]; let _0x5d4b1f = 0x0; for (const _0x49b3b8 in _0x597b94) { const _0x35f2a2 = _0x597b94[_0x49b3b8]; if (_0x35f2a2 <= 0x0) continue; const _0x970799 = _0x35f2a2 / _0x32b2aa * 0x168, _0x144241 = _0x4f9beb + _0x970799, _0x37d156 = _0x82b509(_0x2b033d, _0x464ebe, _0x4a7008, _0x144241), _0x2a4453 = _0x82b509(_0x2b033d, _0x464ebe, _0x4a7008, _0x4f9beb), _0x294b20 = _0x970799 > 0xb4 ? '1' : '0', _0x3ce854 = ['M', _0x37d156['x'], _0x37d156['y'], 'A', _0x4a7008, _0x4a7008, 0x0, _0x294b20, 0x1, _0x2a4453['x'], _0x2a4453['y'], 'L', _0x2b033d, _0x464ebe, 'Z'][_0x21461e(0x52b)]('\x20'), _0x401a03 = document[_0x21461e(0xb74)](_0x46b00a, _0x21461e(0xb44)); _0x401a03[_0x21461e(0x35c)]('d', _0x3ce854), _0x401a03[_0x21461e(0x35c)](_0x21461e(0xa43), _0x1a0b1c[_0x5d4b1f % _0x1a0b1c[_0x21461e(0x6f2)]]), _0x5d4b1f++; const _0x441ca5 = document[_0x21461e(0xb74)](_0x46b00a, 'title'); _0x441ca5[_0x21461e(0x324)] = _0x49b3b8 + ':\x20' + _0x35f2a2[_0x21461e(0x8c5)](0x2) + '\x20(' + (_0x35f2a2 / _0x32b2aa * 0x64)[_0x21461e(0x8c5)](0x1) + '%)', _0x401a03[_0x21461e(0x594)](_0x441ca5), _0x3566db[_0x21461e(0x594)](_0x401a03), _0x4f9beb = _0x144241; } return _0x3566db; } else _0x3170b9[_0x21461e(0x7e4)](_0x176508['id']); } function _0x2f9355() { const _0x2c81b9 = _0x3abecc; if (_0x2c81b9(0x206) === _0x2c81b9(0x712)) _0x5d86bf[_0x2c81b9(0x5b1)](_0x2c81b9(0x436), _0x578af3), _0x4aec7b[_0x2c81b9(0x5b1)](_0x2c81b9(0x716), _0xd7cccc); else { if (_0x7d28e['length'] === 0x0) return; const _0x48a80e = _0x2a3ed9[_0x2c81b9(0xbdb)]; let _0x418b2d = -0x1; for (let _0x1e4041 = 0x0; _0x1e4041 < _0x7d28e[_0x2c81b9(0x6f2)]; _0x1e4041++) { if (_0x2c81b9(0x4c0) === 'otvok') _0x4293cf[_0x2c81b9(0xabf)](_0x2c81b9(0x4b9), function () { const _0x35c603 = _0x2c81b9, _0x27b183 = { 'id': _0x1002e7['id'], 'url': _0x5641ee[_0x35c603(0x565)] }; _0x23cb24(this, _0x27b183); }); else { if (_0x48a80e >= _0x7d28e[_0x1e4041]['time']) { if ('PYlGK' === _0x2c81b9(0x89f)) { const _0x189557 = _0x5893ca['value'][_0x2c81b9(0x8bb)](); if (!_0x189557) { _0x22a749('请输入群聊名称。'); return; } const _0x20c370 = _0x19f74a[_0x2c81b9(0xbd4)](_0x369305[_0x2c81b9(0x9b8)](_0x2c81b9(0xaa2)))[_0x2c81b9(0x5e9)](_0xf99f56 => _0xf99f56[_0x2c81b9(0x641)]['id']); if (_0x20c370[_0x2c81b9(0x6f2)] < 0x2) { _0x491810(_0x2c81b9(0x331)); return; } const _0x442274 = { 'id': _0x2c81b9(0x735) + _0x32bfc2[_0x2c81b9(0x9b4)](), 'type': _0x2c81b9(0xacf), 'name': _0x189557, 'participantIds': _0x20c370 }; _0x1a5dd0[_0x2c81b9(0x442)][_0x2c81b9(0x7e4)](_0x442274), _0x3b2508[_0x2c81b9(0x7ee)] = _0x442274['id'], _0x375531(), _0x5a361f(), _0x174825(), _0x3fec68(), _0x4c86b7('群聊“' + _0x189557 + _0x2c81b9(0x389)), _0x2acb8b(_0x2c81b9(0x4fb), _0x2c81b9(0x23f)); } else _0x418b2d = _0x1e4041; } else { if (_0x2c81b9(0x2aa) === _0x2c81b9(0x816)) _0x56374d('升级已取消。旧版图片数据可能导致应用卡顿或出错。'); else break; } } } if (_0x418b2d !== -0x1) { if ('YVzSI' !== _0x2c81b9(0x4e7)) { if (!_0x1c15e2[_0x2c81b9(0x74a)](_0x3fa28b)) return _0x2c81b9(0x6b2); if (_0x47eabe[_0x2c81b9(0x6f2)] === 0x0) return _0x2c81b9(0x6df); return _0x1dc332[_0x2c81b9(0x474)]((_0x1c186a, _0x27764f) => new _0x3739df(_0x27764f[_0x2c81b9(0x518)]) - new _0x3659be(_0x1c186a['timestamp'])), _0x2c81b9(0xbb1) + _0x16509a[_0x2c81b9(0x5e9)]((_0x932932, _0x51fef2) => _0x2c81b9(0x752) + (_0x51fef2 < _0x36871d['length'] - 0x1 ? _0x2c81b9(0x526) : '') + _0x2c81b9(0x407) + (_0x932932[_0x2c81b9(0x410)] || '未知搜索') + _0x2c81b9(0xb45) + (_0x932932['result_page_content'] || _0x2c81b9(0x57f)) + _0x2c81b9(0x960) + (_0x932932[_0x2c81b9(0x518)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x2c81b9(0x52b)]('') + '</div>'; } else { const _0x6f6800 = _0x43eb84['querySelectorAll']('p'); _0x6f6800[_0x2c81b9(0xb5e)](_0x4f6a41 => _0x4f6a41['classList'][_0x2c81b9(0xb26)](_0x2c81b9(0x454))); const _0x2f56c4 = document[_0x2c81b9(0x392)](_0x2c81b9(0x794) + _0x418b2d); _0x2f56c4 && (_0x2f56c4[_0x2c81b9(0x42c)][_0x2c81b9(0x6ec)]('active'), _0x2f56c4[_0x2c81b9(0xaf9)]({ 'behavior': 'smooth', 'block': 'center' })); } } } } _0x9b8882[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x41bbfd = _0x3abecc; if ('jqfYM' !== _0x41bbfd(0x9cc)) { const _0xb2b4c3 = _0x3f2785(_0x16476f); if (!_0xb2b4c3) return; _0x10bf19[_0x41bbfd(0x20b)] = _0x5682bd; const _0x372a21 = _0x1e4de7[_0x41bbfd(0x9bb)][_0x41bbfd(0x69e)](_0x1e3f5e => _0x1e3f5e['characterId'] === _0xc18f31), _0x19874e = _0x372a21 ? _0x372a21['entries'][_0x41bbfd(0x6f2)] : 0x0, _0x30702b = 0x2; _0x26b32c['diaryCurrentPage'] = _0x2f451c[_0x41bbfd(0x726)](0x0, _0x239b1c[_0x41bbfd(0xa58)](_0x19874e / _0x30702b) - 0x1), _0x408384[_0x41bbfd(0x392)]('diary-char-name-header')[_0x41bbfd(0x324)] = _0xb2b4c3[_0x41bbfd(0x420)] + _0x41bbfd(0x2a5), _0x132897(), _0x52b88a(_0x41bbfd(0x725), _0x41bbfd(0x765)); } else _0x5e6fd8['classList'][_0x41bbfd(0xb26)](_0x41bbfd(0x3a9)), setTimeout(() => _0x5e6fd8[_0x41bbfd(0xb56)][_0x41bbfd(0x993)] = _0x41bbfd(0x3a4), 0x12c); }), document['getElementById'](_0x3abecc(0x4ff))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0xccbb9f = _0x3abecc; if (_0xccbb9f(0xb09) === 'KfCJw') _0x2e4b8c[_0xccbb9f(0x69a)] && _0x2e4b8c[_0xccbb9f(0x69a)][_0xccbb9f(0x620)] && (_0x5e6fd8['style'][_0xccbb9f(0x993)] = 'flex', setTimeout(() => _0x5e6fd8[_0xccbb9f(0x42c)][_0xccbb9f(0x6ec)]('show'), 0xa)); else { const _0x5bfbd6 = _0x2b979b[_0xccbb9f(0x89d)]['find'](_0x11d26c => _0x11d26c['id'] === _0x118e96[_0xccbb9f(0x789)]) || { 'name': '你' }, _0x2e801a = _0x3c245a[_0xccbb9f(0x9bb)][_0xccbb9f(0x69e)](_0x4b650a => _0x4b650a[_0xccbb9f(0x918)] === _0x53065d); if (!_0x2e801a || !_0x2e801a['entries'] || _0x2e801a[_0xccbb9f(0xb3c)][_0xccbb9f(0x6f2)] === 0x0) return ''; const _0x3f4def = _0x2e801a[_0xccbb9f(0xb3c)][_0xccbb9f(0x43d)](-0x8), _0x13274a = _0x3f4def[_0xccbb9f(0x5e9)](_0x494319 => { const _0x1a0c27 = _0xccbb9f, _0x4b2b26 = _0x494319['author'] === 'user' ? _0x5bfbd6[_0x1a0c27(0x420)] : _0x1aded4(_0x494319['author'])['name']; return _0x1a0c27(0x2b6) + new _0x58ff4b(_0x494319[_0x1a0c27(0x518)])[_0x1a0c27(0xbf7)]() + ']\x20' + _0x4b2b26 + _0x1a0c27(0xb31) + _0x494319[_0x1a0c27(0xa19)]; })[_0xccbb9f(0x52b)]('\x0a'); return _0xccbb9f(0x709) + _0x5bfbd6['name'] + _0xccbb9f(0x8cb) + _0x13274a; } }), _0x2a3ed9[_0x3abecc(0xabf)]('timeupdate', _0x2f9355); const _0x31c4b5 = document[_0x3abecc(0x392)](_0x3abecc(0x2cb)), _0x4a20c9 = document[_0x3abecc(0x392)](_0x3abecc(0x546)), _0x249284 = document[_0x3abecc(0x392)](_0x3abecc(0x60c)); _0x31c4b5[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x15df3c = _0x3abecc; if ('IKrpy' === _0x15df3c(0x828)) return _0x27314a + _0x15df3c(0x2a6); else _0x2a3ed9[_0x15df3c(0x84e)] && (_0x2a3ed9['paused'] ? _0x2a3ed9[_0x15df3c(0x792)]() : _0x15df3c(0x41e) !== _0x15df3c(0x5e5) ? _0x2a3ed9[_0x15df3c(0x24e)]() : _0x34d877(() => { const _0x50ae01 = _0x15df3c; _0x475379[_0x50ae01(0xbd7)] = _0x3d9128['scrollHeight']; }, 0x0)); }), _0x4a20c9[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x345cf0 = _0x3abecc; if (_0x15ee6a[_0x345cf0(0x6f2)] === 0x0) return; _0x2d690c = (_0x2d690c + 0x1) % _0x15ee6a[_0x345cf0(0x6f2)], _0x15b31a(_0x15ee6a[_0x2d690c], _0x15ee6a); }), _0x249284['addEventListener']('click', () => { const _0x176b60 = _0x3abecc; if (_0x15ee6a[_0x176b60(0x6f2)] === 0x0) return; _0x2d690c = (_0x2d690c - 0x1 + _0x15ee6a[_0x176b60(0x6f2)]) % _0x15ee6a[_0x176b60(0x6f2)], _0x15b31a(_0x15ee6a[_0x2d690c], _0x15ee6a); }), _0x2a3ed9[_0x3abecc(0xabf)](_0x3abecc(0x792), () => { _0x31c4b5['textContent'] = '❚❚'; }), _0x2a3ed9['addEventListener'](_0x3abecc(0x24e), () => { const _0x1639ec = _0x3abecc; _0x31c4b5[_0x1639ec(0x324)] = '▶'; }), _0x2a3ed9[_0x3abecc(0xabf)](_0x3abecc(0x5ed), () => { const _0x3fa841 = _0x3abecc; _0x4a20c9[_0x3fa841(0x4b9)](); }), _0x2a3ed9['addEventListener'](_0x3abecc(0x792), () => { const _0x4f832b = _0x3abecc; if (_0x4f832b(0x933) === _0x4f832b(0x933)) { const _0x1c1a0a = document[_0x4f832b(0x392)](_0x4f832b(0x5fc)); if (_0x1c1a0a) _0x1c1a0a[_0x4f832b(0x324)] = '❚❚'; } else { const _0x4282ec = _0x27877e(_0x49cab7), _0x6e9c4a = _0x37ed91[_0x4f832b(0x392)](_0x4f832b(0x7d7)); _0x6e9c4a[_0x4f832b(0xb56)][_0x4f832b(0xb85)] = ''; let _0x2fe166 = _0x33e8ab['getElementById'](_0x4f832b(0x343) + _0x4aa2c1); if (_0x2fe166) _0x2fe166[_0x4f832b(0x2c9)] = ''; if (!_0x4282ec) return; _0x4282ec[_0x4f832b(0x59d)] && (_0x6e9c4a['style']['backgroundImage'] = 'url(\x27' + _0x4282ec['chatWallpaper'] + '\x27)', _0x6e9c4a[_0x4f832b(0xb56)][_0x4f832b(0xa1f)] = _0x4f832b(0x883), _0x6e9c4a[_0x4f832b(0xb56)][_0x4f832b(0x979)] = 'center'); if (_0x4282ec['bubbleCss']) { let _0x2ca22f = _0x547758[_0x4f832b(0x392)](_0x4f832b(0x343) + _0x4282ec['id']); !_0x2ca22f && (_0x2ca22f = _0x47df3c[_0x4f832b(0x92e)](_0x4f832b(0xb56)), _0x2ca22f['id'] = 'style-' + _0x4282ec['id'], _0x4f7ed6['head']['appendChild'](_0x2ca22f)); const _0x519525 = _0x4282ec['bubbleCss'], _0x53b9e4 = _0x519525[_0x4f832b(0x8d5)](/\.bubble\.sent/g, _0x4f832b(0x75b) + _0x4282ec['id'] + '.message.user')[_0x4f832b(0x8d5)](/\.bubble\.received/g, _0x4f832b(0x75b) + _0x4282ec['id'] + _0x4f832b(0x6e9)); _0x2ca22f[_0x4f832b(0x2c9)] = _0x53b9e4; } } }), _0x2a3ed9['addEventListener']('pause', () => { const _0x175fc9 = _0x3abecc; if (_0x175fc9(0xba4) !== _0x175fc9(0xbdd)) { const _0x3d0361 = document['getElementById'](_0x175fc9(0x5fc)); if (_0x3d0361) _0x3d0361[_0x175fc9(0x324)] = '▶'; } else { const _0x56c3f4 = _0xfec0e[_0x175fc9(0x92e)](_0x175fc9(0x235)); _0x56c3f4[_0x175fc9(0x2c9)] = _0x175fc9(0xb02) + _0x279480['id'] + '\x22>\x20' + _0x1f2d3f[_0x175fc9(0x420)], _0x4ccca0[_0x175fc9(0x594)](_0x56c3f4); } }), _0x2a3ed9[_0x3abecc(0xabf)](_0x3abecc(0x5ed), () => { const _0x309faa = _0x3abecc, _0x234bc1 = document[_0x309faa(0x392)]('global-player-next-btn'); _0x234bc1 && (_0x309faa(0xb34) !== _0x309faa(0xb34) ? (_0x19d4d7['textContent'] = _0x569b2c[_0x309faa(0x54d)], _0x1dbcb8[_0x309faa(0x324)] = _0x1db1cb[_0x309faa(0x5c7)], _0x41eaa7[_0x309faa(0x42c)][_0x309faa(0x6ec)](_0x309faa(0x354)), _0x21f42e[_0x309faa(0xb56)][_0x309faa(0xa6a)]('--widget-cover-image', _0x309faa(0x887) + _0x4bad62[_0x309faa(0x883)] + ')')) : _0x234bc1[_0x309faa(0x4b9)]()); }); function _0xd6cf38(_0x187304) { const _0x97ad3d = _0x3abecc; if (!_0x187304 || typeof _0x187304 !== _0x97ad3d(0x41d)) return null; const _0x33f33b = _0x187304[_0x97ad3d(0x78f)]('['), _0x36e010 = _0x187304[_0x97ad3d(0x549)](']'); if (_0x33f33b > -0x1 && _0x36e010 > _0x33f33b) return _0x187304['substring'](_0x33f33b, _0x36e010 + 0x1); return null; } document[_0x3abecc(0x392)](_0x3abecc(0xbd6))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x5994bf = _0x3abecc; _0x5994bf(0x4e5) === _0x5994bf(0x4e5) ? (_0x41fb25(), _0x2bd982('accounting', 'home')) : _0x5c650d(_0x5994bf(0x67d)); }), document[_0x3abecc(0x392)]('back-to-home-from-accounting')[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x2bd982(_0x3abecc(0xa74), _0x3abecc(0x916))); const _0xa5c09e = document['getElementById'](_0x3abecc(0xbaf)), _0x5ab34d = document[_0x3abecc(0x392)](_0x3abecc(0x446)); _0xa5c09e[_0x3abecc(0xabf)]('click', _0x41fb25), _0x5ab34d[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x1db52e = _0x3abecc; _0xa5c09e[_0x1db52e(0x42c)][_0x1db52e(0xb26)](_0x1db52e(0x454)), _0x5ab34d[_0x1db52e(0x42c)][_0x1db52e(0x6ec)](_0x1db52e(0x454)), _0x1ef81e(); }); function _0x41fb25() { const _0x216a57 = _0x3abecc; _0x5ab34d[_0x216a57(0x42c)][_0x216a57(0xb26)](_0x216a57(0x454)), _0xa5c09e[_0x216a57(0x42c)][_0x216a57(0x6ec)]('active'), _0x292d2d(); } function _0x292d2d() { const _0x320be6 = _0x3abecc, _0x1a4944 = document[_0x320be6(0x392)]('accounting-content-area'); document['getElementById'](_0x320be6(0x265))[_0x320be6(0x324)] = _0x320be6(0x202), document[_0x320be6(0x392)](_0x320be6(0xa9b))[_0x320be6(0x2c9)] = '', _0x1a4944[_0x320be6(0x2c9)] = _0x320be6(0x88b), _0x576ca6(), document[_0x320be6(0x392)](_0x320be6(0x29e))[_0x320be6(0xabf)]('click', _0x18310c), document['getElementById'](_0x320be6(0x33e))[_0x320be6(0xabf)](_0x320be6(0x4b9), _0x5dfd6d => { const _0x148d54 = _0x320be6; if (_0x5dfd6d[_0x148d54(0xa4c)][_0x148d54(0x42c)]['contains'](_0x148d54(0x8cc))) { const _0x51acc5 = _0x5dfd6d[_0x148d54(0xa4c)][_0x148d54(0x641)]['id']; _0x4b635a(_0x148d54(0x2d0))[_0x148d54(0x54a)](_0x5373a0 => { const _0x138a4e = _0x148d54; if ('YdCZJ' === _0x138a4e(0x70e)) _0x5373a0 && (_0x138a4e(0x45f) === 'vRhzs' ? (_0x49f925['log']('Creating\x20object\x20store:\x20music_library'), _0x2c6a24[_0x138a4e(0xa6f)](_0x138a4e(0x8f7), { 'keyPath': 'id' })) : _0x344e90(_0x51acc5)); else { _0x29479e[_0x138a4e(0xbf0)]('没有角色需要恢复头像，跳过。'); return; } }); } }), document['getElementById'](_0x320be6(0x64a))['focus'](); } function _0x1097fe(_0x1b44af, _0x1bc217) { const _0x405cae = _0x3abecc, _0xe944d6 = document['getElementById'](_0x405cae(0x9a1)), _0x208f0f = document[_0x405cae(0x392)](_0x405cae(0xa9b)); document[_0x405cae(0x392)]('accounting-title')[_0x405cae(0x324)] = _0x1bc217 + _0x405cae(0xa85); const _0x248d5a = _0x1b44af[_0x405cae(0x4af)][_0x405cae(0x9e3)]((_0x301928, _0x4ac065) => _0x301928 + (_0x4ac065[_0x405cae(0xb86)] || 0x0), 0x0); let _0x36fd38 = '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>' + _0x248d5a['toFixed'](0x2) + _0x405cae(0x4b0); _0xe944d6[_0x405cae(0x2c9)] = _0x36fd38; const _0xdd256b = document['getElementById']('categorized-expenses-list'), _0x33df50 = { '餐饮美食': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', '交通出行': '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '购物消费': _0x405cae(0x4c8), '生活服务': _0x405cae(0x5e6), '休闲娱乐': _0x405cae(0xad0), '医疗健康': _0x405cae(0x4ad), '人情红包': _0x405cae(0x80c), '其他杂项': _0x405cae(0x4d2), '默认': _0x405cae(0x5b7) }; _0x1b44af[_0x405cae(0x4af)]['forEach'](_0x12aaab => { const _0x4c1e25 = _0x405cae, _0x300fe5 = document[_0x4c1e25(0x92e)](_0x4c1e25(0x63a)); _0x300fe5['className'] = _0x4c1e25(0x55c), _0x300fe5[_0x4c1e25(0xb56)][_0x4c1e25(0x47b)] = _0x4c1e25(0x612), _0x300fe5[_0x4c1e25(0xb56)][_0x4c1e25(0x9ff)] = _0x4c1e25(0x55f), _0x300fe5['style'][_0x4c1e25(0x4df)] = _0x4c1e25(0x36c), _0x300fe5[_0x4c1e25(0xb56)]['gap'] = '0'; const _0x4114b6 = _0x33df50[_0x12aaab[_0x4c1e25(0x2f1)]] || _0x33df50['默认'], _0x1d73bc = _0x4c1e25(0x7be) + _0x4114b6 + '</svg>', _0x55d9cc = _0x4c1e25(0xb5c) + _0x1d73bc + '</span><div><div\x20class=\x22description\x22>' + _0x12aaab[_0x4c1e25(0x9b7)] + _0x4c1e25(0x252) + (_0x12aaab['category'] || _0x4c1e25(0x7d2)) + _0x4c1e25(0x8fe) + (_0x12aaab[_0x4c1e25(0xb86)] || 0x0)[_0x4c1e25(0x8c5)](0x2) + _0x4c1e25(0xbba); let _0x53e093 = ''; if (_0x12aaab['review'] && _0x12aaab[_0x4c1e25(0x3d8)][_0x4c1e25(0x5a8)]) { const _0x20f6c4 = _0x2653c6(_0x12aaab[_0x4c1e25(0x3d8)]['charId']); _0x20f6c4 && (_0x53e093 = _0x4c1e25(0x670) + _0x20f6c4[_0x4c1e25(0x58d)] + _0x4c1e25(0x3c1) + _0x20f6c4[_0x4c1e25(0x420)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x12aaab[_0x4c1e25(0x3d8)][_0x4c1e25(0xbbc)] + '</div></div></div>'); } _0x300fe5['innerHTML'] = _0x55d9cc + _0x53e093, _0xdd256b[_0x4c1e25(0x594)](_0x300fe5); }), _0x208f0f[_0x405cae(0x2c9)] = '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', document['getElementById'](_0x405cae(0xaf4))['addEventListener'](_0x405cae(0x4b9), async () => { const _0x4911e7 = _0x405cae, _0x74b80b = await _0x4b635a(_0x4911e7(0x693)); if (_0x74b80b) { if (_0x4911e7(0x3a8) !== 'vKYED') _0x49548b += '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概' + _0x202640[_0x4911e7(0x7d1)](_0x559b12 / 0x3c) + _0x4911e7(0x900); else { const _0x77a16a = _0x2e4b8c[_0x4911e7(0x2c0)][_0x1bc217]; if (_0x77a16a && _0x77a16a[_0x4911e7(0x5ba)]) { if ('luxwi' === _0x4911e7(0x807)) _0x2e4b8c[_0x4911e7(0x41f)]['push'](..._0x77a16a[_0x4911e7(0x5ba)]); else { const { omniText: _0x583e50 } = _0x4c254f(_0x165b8d['id'], null), _0x31f759 = _0x441422(_0x58dc0e['id']), _0x49865a = _0x202614[_0x4911e7(0x25d)] && _0xfa9c60[_0x4911e7(0x25d)][_0x4911e7(0x6f2)] > 0x0 ? '\x0a\x0a#\x20' + _0x51b95f['name'] + '的个人专属世界观设定\x0a' + _0x73245f['linkedWorldBookIds'][_0x4911e7(0x5e9)](_0x3451e1 => _0x33d98c['worldBooks'][_0x4911e7(0x69e)](_0x2b203c => _0x2b203c['id'] === _0x3451e1))[_0x4911e7(0x742)](_0x5addd2)['map'](_0x252b12 => '\x0a##\x20条目:\x20' + _0x252b12[_0x4911e7(0x420)] + '\x0a' + _0x252b12[_0x4911e7(0xa19)])['join']('') : ''; return _0x4911e7(0x318) + _0x9ebdf9[_0x4911e7(0x420)] + ',\x20ID:\x20' + _0x4cf893['id'] + _0x4911e7(0x204) + _0x2effc2[_0x4911e7(0x5cd)] + _0x4911e7(0x8d6) + _0x583e50 + '\x0a' + _0x31f759 + '\x0a' + _0x49865a; } } delete _0x2e4b8c[_0x4911e7(0x2c0)][_0x1bc217], _0x5a3c71(), _0x292d2d(); } } }); } function _0x1ef81e() { const _0x3b69bd = _0x3abecc; if (_0x3b69bd(0x9ef) !== _0x3b69bd(0xac6)) { const _0x51a8c7 = document[_0x3b69bd(0x392)](_0x3b69bd(0x9a1)); document[_0x3b69bd(0x392)]('accounting-title')[_0x3b69bd(0x324)] = '账本', document['getElementById'](_0x3b69bd(0xa9b))[_0x3b69bd(0x2c9)] = ''; const _0x9ff703 = Object[_0x3b69bd(0xabd)](_0x2e4b8c[_0x3b69bd(0x2c0)])[_0x3b69bd(0x474)]((_0x2b5d1b, _0x38be48) => new Date(_0x38be48) - new Date(_0x2b5d1b)); if (_0x9ff703[_0x3b69bd(0x6f2)] === 0x0) { if ('BDVEc' !== _0x3b69bd(0x9f4)) { _0x51a8c7[_0x3b69bd(0x2c9)] = _0x3b69bd(0x6e0); return; } else _0x3baf6e(), _0x1cc053[_0x3b69bd(0x2c8)] = [], _0x4b83f9(); } _0x51a8c7['innerHTML'] = '', _0x9ff703[_0x3b69bd(0xb5e)](_0x38e5cf => { const _0x1a6c55 = _0x3b69bd, _0x162785 = document[_0x1a6c55(0x92e)](_0x1a6c55(0x63a)); _0x162785['className'] = _0x1a6c55(0x55c), _0x162785['style'][_0x1a6c55(0x94b)] = 'pointer'; const _0x5cc9a0 = _0x2e4b8c[_0x1a6c55(0x2c0)][_0x38e5cf], _0x57cb6e = _0x5cc9a0['categorizedExpenses'][_0x1a6c55(0x9e3)]((_0x32c1ec, _0x12731e) => _0x32c1ec + (_0x12731e[_0x1a6c55(0xb86)] || 0x0), 0x0); _0x162785[_0x1a6c55(0x2c9)] = _0x1a6c55(0x4b1) + _0x38e5cf + _0x1a6c55(0x543) + _0x57cb6e['toFixed'](0x2) + _0x1a6c55(0x247), _0x162785[_0x1a6c55(0xabf)](_0x1a6c55(0x4b9), () => { const _0x4ca3af = _0x1a6c55; _0x4ca3af(0x348) !== _0x4ca3af(0x958) ? (_0xa5c09e[_0x4ca3af(0x42c)][_0x4ca3af(0xb26)](_0x4ca3af(0x454)), _0x5ab34d['classList'][_0x4ca3af(0x6ec)](_0x4ca3af(0x454)), _0x1097fe(_0x5cc9a0, _0x38e5cf)) : _0x2c5c6c === 'home' ? _0x64f5b0[_0x4ca3af(0xb56)][_0x4ca3af(0x993)] = _0x4ca3af(0xab9) : _0x3f1100[_0x4ca3af(0xb56)][_0x4ca3af(0x993)] = _0x4ca3af(0x3a4); }), _0x51a8c7[_0x1a6c55(0x594)](_0x162785); }); } else { _0x19cc3b('真是的，必需的祭品都还没准备好！'); return; } } function _0x18310c() { const _0x394dc7 = _0x3abecc, _0x31baef = document[_0x394dc7(0x392)](_0x394dc7(0x64a)), _0x1d6ab1 = document['getElementById'](_0x394dc7(0x2e0)), _0x3aa077 = _0x31baef['value'][_0x394dc7(0x8bb)](), _0x3f8910 = parseFloat(_0x1d6ab1[_0x394dc7(0x60e)]); if (!_0x3aa077 || isNaN(_0x3f8910) || _0x3f8910 <= 0x0) { _0x18c07b('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } _0x2e4b8c[_0x394dc7(0x41f)][_0x394dc7(0x7e4)]({ 'id': _0x394dc7(0x4e6) + Date[_0x394dc7(0x9b4)](), 'description': _0x3aa077, 'amount': _0x3f8910, 'timestamp': Date[_0x394dc7(0x9b4)]() }), _0x5a3c71(), _0x576ca6(), _0x31baef['value'] = '', _0x1d6ab1[_0x394dc7(0x60e)] = '', _0x31baef['focus'](); } function _0x344e90(_0x3fd28b) { const _0x3d3421 = _0x3abecc, _0x315a98 = _0x2e4b8c[_0x3d3421(0x41f)][_0x3d3421(0x948)](_0x4b4ac2 => _0x4b4ac2['id'] === _0x3fd28b); _0x315a98 > -0x1 && (_0x2e4b8c[_0x3d3421(0x41f)][_0x3d3421(0x872)](_0x315a98, 0x1), _0x5a3c71(), _0x576ca6()); } function _0x576ca6() { const _0x514f35 = _0x3abecc; if (_0x514f35(0xc14) !== 'zWXRZ') { const _0x795111 = document[_0x514f35(0x392)](_0x514f35(0x33e)), _0x14eb78 = document['getElementById'](_0x514f35(0xb43)), _0x68c3f6 = new Date(), _0x293bb1 = _0x2e4b8c[_0x514f35(0x41f)]['filter'](_0x42b55b => new Date(_0x42b55b['timestamp'])[_0x514f35(0x97c)]() === _0x68c3f6[_0x514f35(0x97c)]()); if (_0x293bb1[_0x514f35(0x6f2)] === 0x0) { if (_0x514f35(0x81d) !== 'sWSPV') { _0x2f23d6(); return; } else { _0x795111['innerHTML'] = _0x514f35(0x5e1), _0x14eb78[_0x514f35(0x2c9)] = ''; return; } } _0x795111[_0x514f35(0x2c9)] = '', _0x293bb1[_0x514f35(0x474)]((_0x127507, _0x538022) => _0x538022[_0x514f35(0x518)] - _0x127507['timestamp'])[_0x514f35(0xb5e)](_0x18f891 => { const _0x4c544f = _0x514f35; if (_0x4c544f(0x2de) !== _0x4c544f(0x24f)) { const _0x33129b = document[_0x4c544f(0x92e)](_0x4c544f(0x63a)); _0x33129b[_0x4c544f(0x894)] = _0x4c544f(0x55c), _0x33129b[_0x4c544f(0x2c9)] = '<span\x20class=\x22description\x22>' + _0x18f891[_0x4c544f(0x9b7)] + _0x4c544f(0x882) + _0x18f891[_0x4c544f(0xb86)][_0x4c544f(0x8c5)](0x2) + _0x4c544f(0x815) + _0x18f891['id'] + _0x4c544f(0xa95), _0x795111[_0x4c544f(0x594)](_0x33129b); } else _0x570a43['error'](_0x4c544f(0x584), _0x264416); }), _0x14eb78 && (_0x14eb78[_0x514f35(0x2c9)] = _0x514f35(0x52f), document['getElementById']('organize-bill-button')['addEventListener'](_0x514f35(0x4b9), _0x394da7)); } else { const _0x400a91 = _0x289ae1(_0x2d97db['id']); if (_0x400a91 && _0x400a91[_0x514f35(0x6f2)] > 0x0) { const _0x3a6243 = _0x400a91[_0x400a91['length'] - 0x1]; (!_0x26259b || _0x3a6243['timestamp'] > _0x3b24df[_0x514f35(0x518)]) && (_0x17d650 = _0x3a6243); } } } async function _0x394da7() { const _0x2ed9f9 = _0x3abecc, _0x2e72f9 = new Date(), _0x503d51 = _0x2e72f9[_0x2ed9f9(0x780)]() + '-' + String(_0x2e72f9[_0x2ed9f9(0x49d)]() + 0x1)[_0x2ed9f9(0xb98)](0x2, '0') + '-' + String(_0x2e72f9[_0x2ed9f9(0xa7a)]())[_0x2ed9f9(0xb98)](0x2, '0'); if (_0x2e4b8c[_0x2ed9f9(0x2c0)][_0x503d51]) { _0x18c07b('已经生成了今日账单！想看就去“看账本”标签页。'); return; } const _0x21801d = _0x2e4b8c[_0x2ed9f9(0x41f)]['filter'](_0x4d311a => new Date(_0x4d311a[_0x2ed9f9(0x518)])['toDateString']() === _0x2e72f9[_0x2ed9f9(0x97c)]()); if (_0x21801d[_0x2ed9f9(0x6f2)] === 0x0) { if ('qcKzN' === 'qcKzN') { _0x18c07b(_0x2ed9f9(0xb17)); return; } else _0x130b97['innerHTML'] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', _0x161cf0[_0x2ed9f9(0x392)](_0x2ed9f9(0x40f))['addEventListener'](_0x2ed9f9(0x4b9), _0x59ac46); } _0x5b3ee9(!![], _0x2ed9f9(0x824)); try { if ('aRnnH' === _0x2ed9f9(0x5eb)) _0x54afcd[_0x2ed9f9(0x963)](_0x20c1a1, _0x5f3d3e[_0x2ed9f9(0x2bf)](_0x52e57a)); else { const _0x141d1b = [_0x2ed9f9(0x6d2), _0x2ed9f9(0x2fc), _0x2ed9f9(0x92a), _0x2ed9f9(0xb89), '休闲娱乐', _0x2ed9f9(0x3b5), _0x2ed9f9(0x2db), _0x2ed9f9(0x88e)], _0x51c2b2 = _0x21801d['map'](_0x5b8907 => '-\x20' + _0x5b8907['description'] + ':\x20' + _0x5b8907[_0x2ed9f9(0xb86)])[_0x2ed9f9(0x52b)]('\x0a'), _0x424f14 = _0x2e4b8c[_0x2ed9f9(0x404)][_0x2ed9f9(0x5e9)](_0x3b0d97 => { const _0x33d635 = _0x2ed9f9; if (_0x33d635(0xacd) !== _0x33d635(0xacd)) _0x29ef92 += _0x33d635(0x96b); else { const _0x3c1052 = _0x2e4b8c[_0x33d635(0x442)][_0x33d635(0x69e)](_0x1f0fbe => _0x1f0fbe[_0x33d635(0x875)] === _0x33d635(0xa4e) && _0x1f0fbe['participantIds'][_0x33d635(0x21d)](_0x3b0d97['id'])), _0x41f0bc = _0x2e4b8c['userProfiles'][_0x33d635(0x69e)](_0x2917d6 => _0x2917d6['id'] === (_0x3c1052?.[_0x33d635(0x22e)] || _0x2e4b8c['activeUserProfileId'])) || { 'id': _0x33d635(0x7d4), 'name': '你' }; let _0x28033f = ''; if (_0x3b0d97[_0x33d635(0x25d)] && _0x3b0d97[_0x33d635(0x25d)]['length'] > 0x0) { if (_0x33d635(0x6ad) !== 'ueGYL') _0x28033f = _0x3b0d97[_0x33d635(0x25d)]['map'](_0x1536ec => _0x2e4b8c[_0x33d635(0x285)][_0x33d635(0x69e)](_0x4cc65e => _0x4cc65e['id'] === _0x1536ec))[_0x33d635(0x742)](Boolean)['map'](_0x236ebf => _0x33d635(0x49b) + _0x236ebf[_0x33d635(0x420)] + _0x33d635(0x4cd) + _0x236ebf[_0x33d635(0xa19)])[_0x33d635(0x52b)](''); else { const _0x437b64 = _0xef3536[_0x33d635(0x281)](_0x33d635(0x470), 'readwrite'), _0x507711 = _0x437b64[_0x33d635(0x4c5)]('images'), _0x115c2c = _0x507711['put']({ 'id': _0x5c5ba9, 'blob': _0x5dfda1 }); _0x115c2c[_0x33d635(0x817)] = () => _0x3d6581(_0x115c2c[_0x33d635(0x3cf)]), _0x115c2c['onerror'] = () => _0x4ccfa2(_0x115c2c[_0x33d635(0x5b1)]); } } return _0x33d635(0x2c5) + _0x3b0d97['id'] + _0x33d635(0x394) + _0x3b0d97[_0x33d635(0x420)] + _0x33d635(0xae3) + _0x3b0d97[_0x33d635(0x5cd)] + _0x33d635(0x516) + _0x41f0bc[_0x33d635(0x420)] + '\x20(ID:\x20' + _0x41f0bc['id'] + ')\x0a' + _0x28033f; } })[_0x2ed9f9(0x52b)]('\x0a'), _0xcfa588 = _0x2e4b8c[_0x2ed9f9(0x89d)][_0x2ed9f9(0x5e9)](_0x596295 => _0x2ed9f9(0x37b) + _0x596295['id'] + _0x2ed9f9(0x394) + _0x596295[_0x2ed9f9(0x420)] + _0x2ed9f9(0xae3) + (_0x596295['persona'] || '无'))[_0x2ed9f9(0x52b)]('\x0a'), _0x40ade6 = _0x2ed9f9(0x1e5), _0x5aabe4 = _0x2ed9f9(0xb10) + _0x141d1b[_0x2ed9f9(0x52b)](',\x20') + _0x2ed9f9(0x341) + _0x424f14 + _0x2ed9f9(0x75a) + _0xcfa588 + _0x2ed9f9(0x6c8) + _0x51c2b2, _0x4e66d5 = [{ 'role': _0x2ed9f9(0x2d3), 'content': _0x40ade6 }, { 'role': _0x2ed9f9(0x5c3), 'content': _0x5aabe4 }], _0x5980ad = await _0x45b854(_0x4e66d5, { 'json': !![] }), _0x33ed6a = _0xd6cf38(_0x5980ad); if (!_0x33ed6a) throw new Error(_0x2ed9f9(0x90d) + _0x5980ad); const _0x52c52f = JSON[_0x2ed9f9(0x30c)](_0x33ed6a); _0x2e4b8c['accountingLedger'][_0x503d51] = { 'categorizedExpenses': _0x52c52f, 'timestamp': Date[_0x2ed9f9(0x9b4)](), 'originalExpenses': _0x21801d }, _0x2e4b8c[_0x2ed9f9(0x41f)] = _0x2e4b8c[_0x2ed9f9(0x41f)]['filter'](_0x22ab18 => new Date(_0x22ab18[_0x2ed9f9(0x518)])[_0x2ed9f9(0x97c)]() !== _0x2e72f9[_0x2ed9f9(0x97c)]()), _0x5a3c71(), _0x1097fe(_0x2e4b8c[_0x2ed9f9(0x2c0)][_0x503d51], _0x503d51); } } catch (_0x10e642) { _0x18c07b(_0x2ed9f9(0x2b9) + _0x10e642['message']); } finally { _0x5b3ee9(![]); } } async function _0x352a1c() { const _0x5f2c5b = _0x3abecc, _0x5beea9 = [..._0x35726a]; try { const _0x308011 = localStorage['getItem'](_0x5f2c5b(0x21f)); if (_0x308011) { const _0x293af0 = JSON['parse'](_0x308011); Array[_0x5f2c5b(0x74a)](_0x293af0) ? _0x216772 = [..._0x5beea9, ..._0x293af0] : _0x216772 = _0x5beea9; } else { if (_0x5f2c5b(0xad4) !== 'tFtDb') _0x216772 = _0x5beea9; else { const _0x3be9c8 = _0x5424d5[_0x5f2c5b(0x686)](/:\s|：\s/); if (_0x3be9c8[_0x5f2c5b(0x6f2)] === 0x2) { const _0x512df2 = _0x3be9c8[0x0][_0x5f2c5b(0x8bb)](), _0x20be87 = _0x3be9c8[0x1][_0x5f2c5b(0x8bb)](), _0x37dd11 = { '歌名': _0x5f2c5b(0x9c8), '艺术家': '歌手', '专辑': '专辑' }; _0x37dd11[_0x512df2] && (_0x3f5407[_0x37dd11[_0x512df2]] = _0x20be87); } } } } catch (_0x594ec3) { console['error'](_0x5f2c5b(0x69c), _0x594ec3), _0x216772 = _0x5beea9; } if (!localStorage['getItem'](_0x5f2c5b(0x786))) { _0x4b635a(_0x5f2c5b(0x455))[_0x5f2c5b(0x54a)](async _0x76dd3 => { const _0x2ff19f = _0x5f2c5b; _0x76dd3 ? (_0x5b3ee9(!![], _0x2ff19f(0x6da)), await _0x144e27(), localStorage[_0x2ff19f(0x963)](_0x2ff19f(0x786), _0x2ff19f(0x4a4)), _0x5b3ee9(![]), _0x18c07b('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'), setTimeout(() => location[_0x2ff19f(0xb25)](), 0x5dc)) : _0x2ff19f(0x6c0) === _0x2ff19f(0x214) ? (_0x3c5d22[_0x2ff19f(0xbf0)](_0x2ff19f(0x41c)), _0x4df73e['setItem']('appState', _0x209ce9[_0x2ff19f(0x2bf)](_0x758975))) : _0x18c07b(_0x2ff19f(0x238)); }); return; } if (!localStorage[_0x5f2c5b(0x956)](_0x5f2c5b(0x5df))) { if (_0x5f2c5b(0x811) === _0x5f2c5b(0x811)) { console['log'](_0x5f2c5b(0x226)), _0x5b3ee9(!![], _0x5f2c5b(0xb3e)); const _0x27f336 = await _0x1a6e4b(); localStorage['setItem'](_0x5f2c5b(0x5df), _0x5f2c5b(0x4a4)), _0x5b3ee9(![]); if (_0x27f336 > 0x0) { if ('SBvAu' === _0x5f2c5b(0x3d3)) { const _0x268e97 = _0x7c0a9e['type'] === 'important' ? _0x5f2c5b(0x9df) : '待办'; return _0x5f2c5b(0x2b6) + _0x268e97 + ']\x20' + _0x2bcd3a['date'] + ':\x20' + _0x5cce7a[_0x5f2c5b(0xa19)]; } else { _0x18c07b(_0x5f2c5b(0xa8d) + _0x27f336 + _0x5f2c5b(0xa1d)), setTimeout(() => location[_0x5f2c5b(0xb25)](), 0x5dc); return; } } } else _0x4e8361[_0x5f2c5b(0xadf)](_0x4be5e3, _0x4f773b[_0x5f2c5b(0x610)]); } if (!localStorage['getItem'](_0x5f2c5b(0x5df))) { } if (!localStorage[_0x5f2c5b(0x956)](_0x5f2c5b(0xadd))) { if ('nKWEi' !== _0x5f2c5b(0x551)) _0x5e2f6d[_0x5f2c5b(0x5b1)]('在准备API数据时，从IndexedDB读取图片失败:', _0x3abed2); else { console[_0x5f2c5b(0xbf0)](_0x5f2c5b(0x8a1)), _0x5b3ee9(!![], _0x5f2c5b(0x977)); const _0x12d656 = await _0x14818d(); localStorage[_0x5f2c5b(0x963)]('noir_migration_music_v1_complete', _0x5f2c5b(0x4a4)), _0x5b3ee9(![]); if (_0x12d656 > 0x0) { if ('FWsZy' === _0x5f2c5b(0xc17)) { const _0x886fe4 = 'diary-action-modal-' + _0x1a5d9c; let _0x9d11c = _0x5eae87[_0x5f2c5b(0x392)](_0x886fe4); if (_0x9d11c) return; const _0xc1481e = _0x5f2c5b(0x861) + _0x886fe4 + _0x5f2c5b(0x609) + (_0x579b60 === 'ai' ? _0x5f2c5b(0xb94) : '') + _0x5f2c5b(0x3d4); _0x4d9b7a[_0x5f2c5b(0x3de)]['insertAdjacentHTML']('beforeend', _0xc1481e); const _0x1ab3ee = _0x593d57[_0x5f2c5b(0x392)](_0x886fe4), _0x3c4743 = () => _0x1ab3ee['remove'](); _0x1ab3ee[_0x5f2c5b(0x50b)]('.choice-modal-backdrop')['onclick'] = _0x3c4743, _0x1ab3ee[_0x5f2c5b(0x50b)](_0x5f2c5b(0xb57))[_0x5f2c5b(0x998)] = _0x3c4743, _0x1ab3ee[_0x5f2c5b(0x50b)](_0x5f2c5b(0x9c1))[_0x5f2c5b(0x998)] = () => { _0x5d9850(_0x4cf56f), _0x3c4743(); }, _0xc72374 === 'ai' && (_0x1ab3ee[_0x5f2c5b(0x50b)](_0x5f2c5b(0xbac))[_0x5f2c5b(0x998)] = () => { _0xbadbb0(_0xc6eb85), _0x3c4743(); }); } else { _0x18c07b(_0x5f2c5b(0x8d4) + _0x12d656 + _0x5f2c5b(0xc30)), setTimeout(() => location['reload'](), 0x5dc); return; } } } } if (!localStorage['getItem'](_0x5f2c5b(0xa35))) { const _0x23aa2f = await _0x4f28f7(); localStorage[_0x5f2c5b(0x963)](_0x5f2c5b(0xa35), _0x5f2c5b(0x4a4)); if (_0x23aa2f > 0x0) { _0x18c07b(_0x5f2c5b(0xb5a) + _0x23aa2f + '\x20个旧头像。应用即将刷新。'), setTimeout(() => location[_0x5f2c5b(0xb25)](), 0x5dc); return; } } const _0x5284f7 = document['getElementById']('app-snoop'); _0x5284f7 ? _0x5284f7[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x2c48f8 = _0x5f2c5b; if (_0x2c48f8(0x450) === _0x2c48f8(0x450)) _0x19336b(), _0x2bd982(_0x2c48f8(0xb16), _0x2c48f8(0xa74)); else { const _0x2d4091 = _0x2ebc65[_0x2c48f8(0x92e)]('p'); _0x2d4091['style'][_0x2c48f8(0xa8f)] = _0x2c48f8(0x2ad), _0x2d4091[_0x2c48f8(0x324)] = _0x3f31fc, _0x1dc995[_0x2c48f8(0x594)](_0x2d4091); } }) : console['error']('Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？'); const _0x37bcd6 = _0x31fe73(); await _0x3d6301(); try { const _0x1ac7a1 = localStorage['getItem']('appState'); if (_0x1ac7a1) { const _0x3c3166 = JSON[_0x5f2c5b(0x30c)](_0x1ac7a1); if (_0x3c3166['accountingLedger']) { if (_0x5f2c5b(0x2d7) === _0x5f2c5b(0x2d7)) _0x2e4b8c[_0x5f2c5b(0x2c0)] = _0x3c3166[_0x5f2c5b(0x2c0)], console[_0x5f2c5b(0xbf0)]('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.'); else { const _0x1039d3 = _0x462a5b ?? _0x4ebc5a[_0x5f2c5b(0x60e)][_0x5f2c5b(0x8bb)](); if (_0x1039d3 === '' || !_0x11d482['activeChatId']) return; const _0x1f9fb5 = _0x123b99[_0x5f2c5b(0x50b)](_0x5f2c5b(0x741)), _0x8fa317 = _0x1f9fb5['id'] === 'meeting-view-screen', _0x4419e4 = { 'role': _0x5f2c5b(0x5c3), 'content': _0x1039d3, 'timestamp': _0x111acd[_0x5f2c5b(0x9b4)](), 'isOffline': _0x8fa317 }; _0x336b7['activeQuote'] && (_0x4419e4[_0x5f2c5b(0xc33)] = { ..._0x1897dc['activeQuote'] }), _0x99b1[_0x5f2c5b(0x2c8)][_0x5f2c5b(0x7e4)](_0x4419e4), _0x8e6584(), _0x430d9f(), !_0x14cd16 && (_0x3e0d06[_0x5f2c5b(0x60e)] = ''), _0x3ae66b(); } } } } catch (_0x11c68) { console[_0x5f2c5b(0x5b1)](_0x5f2c5b(0xb42), _0x11c68); } _0x59c729(), _0x51c3e1(), _0x2366ce(), _0x560f7a(), _0x378c51(), _0x4dd5b6(), _0x2d4a09(), _0x243c3f(), _0x1d49d5(), _0x3b7495(), _0x404f23(), _0x9e19ad(), _0x1dfa59(), setInterval(_0x1dfa59, 0x7530), _0x297f69(), _0x4adb3c(), _0x530ad9(); const _0x3bd7e7 = document[_0x5f2c5b(0x392)](_0x5f2c5b(0x85e)); document[_0x5f2c5b(0x392)](_0x5f2c5b(0x4ff))['addEventListener'](_0x5f2c5b(0x4b9), function (_0x1e57ea) { const _0x296ce8 = _0x5f2c5b; if ('gZLTM' !== _0x296ce8(0x5fe)) { const _0x152a34 = _0x5b1b96[_0x296ce8(0x92e)]('li'); _0x152a34[_0x296ce8(0x894)] = 'member-selection-item', _0x152a34[_0x296ce8(0x2c9)] = _0x296ce8(0x31a) + _0x555ed3['id'] + _0x296ce8(0x3c8) + _0x14ea3f['id'] + _0x296ce8(0x605) + (_0x27630a[_0x296ce8(0x58d)] || _0x2eab79) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-' + _0x4661a8['id'] + _0x296ce8(0xabb) + _0x3a74f1['name'] + _0x296ce8(0x8a6), _0x43ef95[_0x296ce8(0x594)](_0x152a34); } else { if (_0x1e57ea[_0x296ce8(0xa4c)]['closest']('button')) { if (_0x296ce8(0xbb8) === _0x296ce8(0xbb8)) return; else _0x48bb07(_0x4664fd[_0x296ce8(0xb1a)])[_0x296ce8(0x54a)](_0x38c3a5 => { const _0x250cc1 = _0x296ce8; if (_0x38c3a5) { const _0x2f5c03 = _0x587db1[_0x250cc1(0x38c)](_0x38c3a5); _0x629310[_0x250cc1(0x84e)] = _0x2f5c03, _0x1ea452[_0x250cc1(0x8df)] = () => _0x2a1c77[_0x250cc1(0x298)](_0x2f5c03); } }); } const _0x1e2579 = document[_0x296ce8(0x392)]('widget-play-pause-btn'); _0x1e2579 && _0x1e2579[_0x296ce8(0x4b9)](); } }), _0x2bd982(_0x5f2c5b(0xa74), _0x5f2c5b(0xae9)); if (_0x37bcd6 || _0x2e4b8c[_0x5f2c5b(0x404)][_0x5f2c5b(0x6f2)] === 0x0) { if (_0x5f2c5b(0x7ed) === 'QJTuE') { const _0x2da1c2 = _0x229a1b['getElementById'](_0x5f2c5b(0x550)); _0x2da1c2['textContent'] = _0x4e1bdc, _0x2da1c2[_0x5f2c5b(0xb56)][_0x5f2c5b(0x993)] = _0x5f2c5b(0x94c); if (_0x5292cc['_t']) _0x245ee1(_0x4324a7['_t']); _0x169335['_t'] = _0x1e10b3(() => { const _0x388e49 = _0x5f2c5b; _0x2da1c2['style'][_0x388e49(0x993)] = _0x388e49(0x3a4); }, 0x640); } else _0x18c07b(_0x5f2c5b(0xb4f)), setTimeout(() => { const _0x372dd0 = _0x5f2c5b; _0x2bd982(_0x372dd0(0x4fb), _0x372dd0(0xa74)), setTimeout(() => _0x11f229(), 0x64); }, 0x6a4); } document[_0x5f2c5b(0x392)](_0x5f2c5b(0x7fa))['addEventListener'](_0x5f2c5b(0x4b9), _0x356196); const _0x49dcf7 = document[_0x5f2c5b(0x392)]('widget-bg-input'); document[_0x5f2c5b(0x392)](_0x5f2c5b(0x791))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => _0x49dcf7[_0x5f2c5b(0x4b9)]()), document[_0x5f2c5b(0x392)]('reset-widget-bg-button')[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x2a9dc2 = _0x5f2c5b; _0x2e4b8c[_0x2a9dc2(0xab3)][_0x2a9dc2(0x98d)] = null, _0x5a3c71(), _0x297f69(), _0x18c07b(_0x2a9dc2(0x76d)); }), _0x49dcf7[_0x5f2c5b(0xabf)](_0x5f2c5b(0xc38), async _0x25f72e => { const _0x2f0eb6 = _0x5f2c5b; if (_0x2f0eb6(0x870) !== _0x2f0eb6(0x767)) { const _0x201ddd = _0x25f72e[_0x2f0eb6(0xa4c)][_0x2f0eb6(0x5a1)][0x0]; if (!_0x201ddd) return; try { const _0x55ac55 = await _0x518739(_0x201ddd); _0x2e4b8c[_0x2f0eb6(0xab3)][_0x2f0eb6(0x98d)] = _0x55ac55, _0x5a3c71(), _0x297f69(), _0x18c07b(_0x2f0eb6(0x440)); } catch (_0x2c0a12) { _0x2f0eb6(0xb35) === 'PZoCy' ? _0x18c07b(_0x2f0eb6(0x449) + _0x2c0a12[_0x2f0eb6(0x542)]) : (_0x91efe4[_0x2f0eb6(0x42c)][_0x2f0eb6(0xb26)](_0x2f0eb6(0x3a9)), _0x443fd1(() => _0xec1da2[_0x2f0eb6(0xb56)][_0x2f0eb6(0x993)] = _0x2f0eb6(0x3a4), 0x12c)); } } else _0x4ed956 = _0x397973['at'](-0x1); }), _0x5804df(), document['getElementById'](_0x5f2c5b(0xad2))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => document['getElementById'](_0x5f2c5b(0x363))['click']()), document[_0x5f2c5b(0x392)]('reset-badge-button')[_0x5f2c5b(0xabf)]('click', async () => { const _0x2cc966 = _0x5f2c5b; await _0x597764('widget_badge'), localStorage[_0x2cc966(0x4a7)](_0x2cc966(0xc22)), _0x5804df(), _0x18c07b(_0x2cc966(0x874)); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x363))[_0x5f2c5b(0xabf)]('change', async _0x373f1d => { const _0x57a7f3 = _0x5f2c5b, _0x5b0247 = _0x373f1d['target']['files'][0x0]; if (!_0x5b0247) return; try { if (_0x57a7f3(0x32a) !== 'nOOTH') { const _0x171ae9 = _0x5a497d['characters'][_0x57a7f3(0x69e)](_0x57739b => _0x57739b['id'] === _0x39a88b); _0x171ae9 && _0x3a240a[_0x57a7f3(0x9cb)](_0x171ae9, _0x472b88); } else await _0x3b613b('widget_badge', _0x5b0247), await _0x5804df(), _0x18c07b(_0x57a7f3(0x66e)); } catch (_0x1ed524) { _0x18c07b(_0x57a7f3(0x449) + _0x1ed524[_0x57a7f3(0x542)]); } }), _0x5346a4(), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x45b))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x445), _0xfe36ef), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x45b))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x6f3), _0xfe36ef, { 'passive': ![] }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x970))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => document[_0x5f2c5b(0x392)](_0x5f2c5b(0x61c))[_0x5f2c5b(0x4b9)]()), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x5bd))[_0x5f2c5b(0xabf)]('click', async () => { const _0x3339e5 = _0x5f2c5b; await _0x597764(_0x3339e5(0xabe)), localStorage[_0x3339e5(0x4a7)](_0x3339e5(0x74e)), _0x5346a4(), _0x18c07b(_0x3339e5(0x431)); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x61c))['addEventListener']('change', async _0x800f35 => { const _0x1b9909 = _0x5f2c5b, _0x252256 = _0x800f35[_0x1b9909(0xa4c)]['files'][0x0]; if (!_0x252256) return; try { if ('lINxs' === _0x1b9909(0x3ee)) try { _0x3dc44b[_0x3b8837] = _0x181dde[_0x1b9909(0x30c)](_0xd5e9e); } catch (_0x344211) { } else await _0x3b613b('widget_card', _0x252256), await _0x5346a4(), _0x18c07b('卡片已更换！'); } catch (_0x295f96) { _0x18c07b(_0x1b9909(0x449) + _0x295f96['message']); } }), document[_0x5f2c5b(0x392)]('reset-widgets-position-button')['addEventListener']('click', async () => { const _0x474dd9 = _0x5f2c5b, _0x259e1c = await _0x4b635a(_0x474dd9(0x21b)); _0x259e1c && (localStorage[_0x474dd9(0x4a7)]('badgeState'), localStorage['removeItem'](_0x474dd9(0xae7)), _0x18c07b(_0x474dd9(0xa68)), setTimeout(() => location['reload'](), 0x3e8)); }); const _0x3de5a9 = document[_0x5f2c5b(0x392)]('app-diary'); _0x3de5a9['addEventListener']('click', () => { const _0x52bd18 = _0x5f2c5b; _0x52bbfa(), _0x2bd982(_0x52bd18(0x765), _0x52bd18(0xa74)); }); const _0x3ac53f = document['getElementById'](_0x5f2c5b(0x502)); _0x3ac53f[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x588e3f = _0x5f2c5b; _0x588e3f(0x6bb) !== _0x588e3f(0x6bb) ? _0x24e58c && (_0x5d00ef[_0x588e3f(0x84e)] = _0x279d5a[_0x588e3f(0x38c)](_0x513061)) : (_0x58350f(), _0x2bd982(_0x588e3f(0x578), 'home')); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x393))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => _0x2bd982(_0x5f2c5b(0xa74), 'musicLibrary')), document['getElementById'](_0x5f2c5b(0x8a8))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => _0x2bd982(_0x5f2c5b(0xa74), 'diaryList')), document['getElementById'](_0x5f2c5b(0xac1))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x3ba911 = _0x5f2c5b; _0x2e4b8c[_0x3ba911(0x20b)] = null, _0x2bd982(_0x3ba911(0x765), _0x3ba911(0x725)); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x9bf))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), _0xcbdcad), document['getElementById'](_0x5f2c5b(0xbaa))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), _0x4a3a55), document[_0x5f2c5b(0x392)]('diary-entry-input')['addEventListener'](_0x5f2c5b(0x7d9), _0x50c3fc => { const _0x3fb82d = _0x5f2c5b; if ('TQelM' === 'GIjfl') { const _0x52194c = _0x6fe2b[_0x3fb82d(0x3f7)]['split'](',')[0x1], _0x3e7202 = _0x1978cd['image'][_0x3fb82d(0x58c)](_0xe00521[_0x3fb82d(0x3f7)][_0x3fb82d(0x78f)](':') + 0x1, _0x4c6e0f[_0x3fb82d(0x3f7)]['indexOf'](';')) || _0x3fb82d(0x897); _0x5d8aae[_0x3fb82d(0x7e4)]({ 'inline_data': { 'mime_type': _0x3e7202, 'data': _0x52194c } }); } else _0x50c3fc[_0x3fb82d(0xbf4)] === _0x3fb82d(0x9f8) && !_0x50c3fc[_0x3fb82d(0x9c7)] && (_0x50c3fc[_0x3fb82d(0x93e)](), _0xcbdcad()); }); const _0x76c58a = [_0x5f2c5b(0x83c), _0x5f2c5b(0x985), _0x5f2c5b(0x232), _0x5f2c5b(0xa51), 'shy']; _0x76c58a[_0x5f2c5b(0xb5e)](_0x43842a => { const _0x45d776 = _0x5f2c5b; if ('MQTnB' === _0x45d776(0x987)) { const _0x467ac8 = document['getElementById']('char-edit-sprite-' + _0x43842a + '-preview'), _0x46e046 = document[_0x45d776(0x392)](_0x45d776(0x28f) + _0x43842a + _0x45d776(0x34b)); if (_0x467ac8 && _0x46e046) { if (_0x45d776(0x9e6) !== 'YOSAg') { const _0x258b3e = _0xecc2fc[_0x45d776(0x92e)]('div'); _0x258b3e[_0x45d776(0x894)] = _0x45d776(0x59a), _0x258b3e['id'] = 'diary-page-' + _0x2089f5, _0x5dcd66 === _0x4f1268['diaryCurrentPage'] && _0x258b3e[_0x45d776(0x42c)]['add'](_0x45d776(0x931)), _0x4ca6be['forEach'](_0x5bdc67 => { const _0x1a5c90 = _0x45d776, _0x1f5618 = _0x5bdc67[_0x1a5c90(0xafc)] === 'user' ? _0x1a5c90(0x5c3) : 'ai', _0x2b0ddd = _0x5bdc67[_0x1a5c90(0xafc)] === _0x1a5c90(0x5c3) ? _0x20e67e['name'] : _0x448829(_0x5bdc67[_0x1a5c90(0xafc)])[_0x1a5c90(0x420)], _0x490553 = _0x2bf2f2[_0x1a5c90(0x92e)](_0x1a5c90(0x63a)); _0x490553[_0x1a5c90(0x894)] = _0x1a5c90(0x38b) + _0x1f5618, _0x490553['dataset'][_0x1a5c90(0x518)] = _0x5bdc67['timestamp'], _0x490553['style'][_0x1a5c90(0x4c2)] = _0x1a5c90(0x3a4), _0x490553[_0x1a5c90(0xb56)][_0x1a5c90(0x750)] = '0', _0x490553[_0x1a5c90(0x2c9)] = _0x1a5c90(0xa0f) + _0x2b0ddd + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new _0x5d6d1d(_0x5bdc67[_0x1a5c90(0x518)])['toLocaleString']('zh-CN') + _0x1a5c90(0x7b8) + _0x5bdc67[_0x1a5c90(0xa19)][_0x1a5c90(0x8d5)](/\n/g, _0x1a5c90(0x3e5)) + _0x1a5c90(0xc12), _0x258b3e[_0x1a5c90(0x594)](_0x490553); }), _0x4fe127['appendChild'](_0x258b3e); } else _0x467ac8[_0x45d776(0xabf)](_0x45d776(0x4b9), () => _0x46e046[_0x45d776(0x4b9)]()), _0x46e046[_0x45d776(0xabf)](_0x45d776(0xc38), _0x210b9d => { const _0x34e083 = _0x45d776; if (_0x34e083(0x1e9) === _0x34e083(0x97d)) _0x3350dc[_0x34e083(0x963)]('customStickers', _0x5eda69['stringify'](_0x1a1208)), _0x33ae6e(_0x34e083(0xb3f)), _0x141d15(() => _0x249617[_0x34e083(0xb25)](), 0x5dc); else { const _0x3fe2c0 = _0x210b9d['target'][_0x34e083(0x5a1)][0x0]; if (!_0x3fe2c0) return; try { if ('MTghi' !== _0x34e083(0x50a)) _0x48885c[_0x34e083(0x42c)][_0x34e083(0xb26)](_0x34e083(0x454)), _0x585e92[_0x34e083(0x42c)]['add'](_0x34e083(0x454)), _0x58a8e7(); else { const _0x5f1d3c = URL[_0x34e083(0x38c)](_0x3fe2c0); _0x467ac8[_0x34e083(0xb56)][_0x34e083(0xb85)] = _0x34e083(0x24b) + _0x5f1d3c + '\x27)'; } } catch (_0x1ea277) { _0x18c07b(_0x34e083(0x2d1) + _0x1ea277[_0x34e083(0x542)]); } } }); } } else _0x59c7cd(![]), _0x9258e7[_0x45d776(0x5b1)]('解析音乐文件失败:', _0x4154a0), _0x3e7987(_0x45d776(0x5db) + _0x1752f7[_0x45d776(0x542)] + '\x20'); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x893))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), _0x3be1c9), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x954))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0xd74b62 = _0x5f2c5b; _0x2e4b8c[_0xd74b62(0x22b)] = _0x2e4b8c[_0xd74b62(0x22b)] === _0xd74b62(0x68f) ? _0xd74b62(0x514) : _0xd74b62(0x68f), _0x3acc1b(); }), document['getElementById'](_0x5f2c5b(0x7c8))['addEventListener'](_0x5f2c5b(0x445), _0x163038), document['getElementById'](_0x5f2c5b(0x7c8))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x6f3), _0x163038, { 'passive': ![] }); let _0x5a6e68 = null; function _0x163038(_0x130445) { const _0x3f0ad1 = _0x5f2c5b; if (_0x5a6e68) clearTimeout(_0x5a6e68); const _0x380bcd = _0x130445[_0x3f0ad1(0xa4c)]['closest']('p[data-history-index]'); if (!_0x380bcd) return; const _0x9e1d54 = parseInt(_0x380bcd[_0x3f0ad1(0x641)][_0x3f0ad1(0x357)], 0xa); if (isNaN(_0x9e1d54)) return; const _0x3df52f = () => { const _0x55993e = _0x3f0ad1; _0x55993e(0xa01) === _0x55993e(0xa01) ? _0x5a6e68 = setTimeout(() => { const _0x32f157 = _0x55993e; if (_0x130445[_0x32f157(0x875)] === 'touchstart') _0x130445[_0x32f157(0x93e)](); _0xb978ff(_0x9e1d54); }, 0x320) : _0x463193(_0xf9d717[_0x55993e(0x8f1)], _0x2188ac[_0x55993e(0x896)]); }, _0x5a6370 = () => { const _0x20be4e = _0x3f0ad1; if (_0x20be4e(0x6a1) !== _0x20be4e(0x6a1)) { const _0x51b8bb = _0x2dba55[_0x20be4e(0x552)](_0x7a3060 / 0x3c); if (_0x51b8bb < 0x30) _0x22f18e += _0x20be4e(0x8d7) + _0x51b8bb + _0x20be4e(0x3e7); else _0xfa92c1 += _0x20be4e(0xb5f) + _0xf0ca0c[_0x20be4e(0x552)](_0x51b8bb / 0x18) + _0x20be4e(0x61b); } else { if (_0x5a6e68) clearTimeout(_0x5a6e68); } }; document['addEventListener']('mouseup', _0x5a6370, { 'once': !![] }), document[_0x3f0ad1(0xabf)]('mouseleave', _0x5a6370, { 'once': !![] }), document[_0x3f0ad1(0xabf)](_0x3f0ad1(0x785), _0x5a6370, { 'once': !![] }), document['addEventListener'](_0x3f0ad1(0x51f), _0x5a6370, { 'once': !![] }), _0x3df52f(); } document['body'][_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), _0x3a8dc2 => { const _0x4c2538 = _0x5f2c5b, _0xe411bf = _0x3a8dc2['target']['closest'](_0x4c2538(0x46a)); if (_0xe411bf) { const _0xa9b4fe = _0x3a8dc2[_0x4c2538(0xa4c)][_0x4c2538(0xbda)](_0x4c2538(0x23e)), _0x28fa13 = _0x3a8dc2[_0x4c2538(0xa4c)][_0x4c2538(0xbda)]('.listen-together-accept-btn'); if (_0xa9b4fe) _0x4c2538(0x200) !== _0x4c2538(0x640) ? _0x5bf61d() : (_0x1653aa['preventDefault'](), _0x50f495()); else { if (_0x28fa13) { const _0x3a07fe = _0x28fa13[_0x4c2538(0xbda)](_0x4c2538(0xa02)), _0x1ef1b1 = _0x28fa13[_0x4c2538(0x641)][_0x4c2538(0x908)], _0x86f2aa = parseInt(_0x3a07fe[_0x4c2538(0x641)][_0x4c2538(0x357)], 0xa); _0x5c0877(_0x1ef1b1, _0x86f2aa, _0xe411bf); } else { if (_0x4c2538(0x5de) === _0x4c2538(0x254)) _0x5f376f['currentAbortController'][_0x4c2538(0x968)](_0x4c2538(0x557)); else { const _0x372e6b = _0x28f748(); _0x372e6b && _0x372e6b[_0x4c2538(0x535)] && _0x372e6b[_0x4c2538(0x535)][_0x4c2538(0x620)] && (_0x5e6fd8[_0x4c2538(0xb56)]['display'] = _0x4c2538(0x366), setTimeout(() => _0x5e6fd8['classList']['add'](_0x4c2538(0x3a9)), 0xa)); } } } return; } if (window[_0x4c2538(0x901)]()[_0x4c2538(0xa98)]()) return; const _0x3bc73f = _0x3a8dc2[_0x4c2538(0xa4c)]['closest'](_0x4c2538(0xa02)); if (_0x3bc73f && !_0x3a8dc2[_0x4c2538(0xa4c)]['closest'](_0x4c2538(0x6c7))) { const _0x395c00 = parseInt(_0x3bc73f[_0x4c2538(0x641)][_0x4c2538(0x357)], 0xa); if (!isNaN(_0x395c00)) { if (_0x4c2538(0x9da) !== 'sRGTW') { const _0x1154a7 = _0x367a3e['transaction'](_0x57f091, 'readwrite'), _0x330210 = _0x1154a7['objectStore'](_0x455867), _0x2a65c5 = _0x330210[_0x4c2538(0x701)]({ 'id': _0x518af6, 'data': _0x4aa2e5 }); _0x2a65c5[_0x4c2538(0x817)] = () => _0x4d7698(), _0x2a65c5['onerror'] = () => _0x12ea5c(_0x2a65c5[_0x4c2538(0x5b1)]); } else _0xb978ff(_0x395c00); } } }); const _0x3f09ae = document[_0x5f2c5b(0x392)](_0x5f2c5b(0xbe0)); _0x3f09ae && _0x3f09ae[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0xca74d3 = _0x5f2c5b; _0x18c07b(_0xca74d3(0x3b7)); }); const _0x2e1c53 = document[_0x5f2c5b(0x392)](_0x5f2c5b(0x453)), _0xbc4df7 = localStorage[_0x5f2c5b(0x956)](_0x5f2c5b(0x21f)); if (_0xbc4df7) try { const _0x2c06ba = JSON['parse'](_0xbc4df7); Array['isArray'](_0x2c06ba) && (_0x2e1c53[_0x5f2c5b(0x60e)] = _0x2c06ba['map'](_0x28bc49 => _0x28bc49[_0x5f2c5b(0x420)] + '--' + _0x28bc49[_0x5f2c5b(0x6ae)])[_0x5f2c5b(0x52b)]('\x0a')); } catch (_0x2273cd) { } document['getElementById'](_0x5f2c5b(0x4a9))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x3969a0 = _0x5f2c5b; if ('sCoTH' !== _0x3969a0(0x6fa)) { const _0x5a6594 = _0x2e1c53[_0x3969a0(0x60e)], _0x2b0f4b = _0x5a6594[_0x3969a0(0x686)]('\x0a')[_0x3969a0(0x742)](_0x11917a => _0x11917a['trim']() !== ''), _0x4fc05a = []; let _0x450c53 = 0x0; for (const _0x1e1612 of _0x2b0f4b) { const _0x2a05b8 = _0x1e1612[_0x3969a0(0x686)]('--'); _0x2a05b8[_0x3969a0(0x6f2)] === 0x2 && _0x2a05b8[0x0]['trim']() && _0x2a05b8[0x1]['trim']()['startsWith'](_0x3969a0(0x80f)) ? _0x4fc05a[_0x3969a0(0x7e4)]({ 'name': _0x2a05b8[0x0]['trim'](), 'url': _0x2a05b8[0x1][_0x3969a0(0x8bb)]() }) : _0x3969a0(0x66d) !== _0x3969a0(0x3da) ? _0x450c53++ : _0xab2c16[_0x3969a0(0x792)](); } _0x450c53 > 0x0 && _0x18c07b('有\x20' + _0x450c53 + _0x3969a0(0x370)); try { localStorage[_0x3969a0(0x963)](_0x3969a0(0x21f), JSON['stringify'](_0x4fc05a)), _0x18c07b('表情包已保存！正在刷新应用...'), setTimeout(() => location['reload'](), 0x5dc); } catch (_0x2d5e3e) { _0x3969a0(0xb84) === 'bFvNP' ? _0x18c07b(_0x3969a0(0xb8c)) : _0x224ead['classList'][_0x3969a0(0xb26)]('show'); } } else { _0x3764a7[_0x3969a0(0x7ee)] = null, _0x5e0cd1(), _0x3ac271(![]), _0xaf7a9e[_0x3969a0(0x392)](_0x3969a0(0x7d7))['style'][_0x3969a0(0xb85)] = ''; return; } }), _0x443a2a(), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x333))['addEventListener']('click', () => { const _0x2f96b0 = _0x5f2c5b; if (_0x2f96b0(0x76c) === _0x2f96b0(0x463)) { const _0x5c26c9 = _0x3ecaaf['currentDate'][_0x2f96b0(0x780)](), _0x46e3b7 = _0x140ca6[_0x2f96b0(0x307)][_0x2f96b0(0x49d)](); _0x20e0a0[_0x2f96b0(0x392)](_0x2f96b0(0xa67))['textContent'] = _0x5c26c9 + '年\x20' + (_0x46e3b7 + 0x1) + '月', _0x38a999(_0x5c26c9, _0x46e3b7), _0x42041a(_0x556297['selectedDate']); } else document['getElementById'](_0x2f96b0(0x294))['click'](); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x82d))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), async () => { const _0x568f2f = _0x5f2c5b; await _0x597764(_0x568f2f(0x509)), localStorage[_0x568f2f(0x4a7)]('cardState2'), _0x5346a4(), _0x18c07b(_0x568f2f(0x9b1)); }), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x294))['addEventListener'](_0x5f2c5b(0xc38), async _0x427b12 => { const _0x19d7bd = _0x5f2c5b, _0x4ee159 = _0x427b12[_0x19d7bd(0xa4c)][_0x19d7bd(0x5a1)][0x0]; if (!_0x4ee159) return; try { if (_0x19d7bd(0x8ef) !== _0x19d7bd(0x1f3)) await _0x3b613b(_0x19d7bd(0x509), _0x4ee159), await _0x5346a4(), _0x18c07b('卡片\x202\x20已更换！'); else { _0x43b5d4[_0x19d7bd(0x2c9)] = _0x19d7bd(0xa08); return; } } catch (_0x107125) { if (_0x19d7bd(0x579) === 'dTcmG') return _0xa6759d[_0x19d7bd(0x404)][_0x19d7bd(0x69e)](_0x4939cd => _0x4939cd['id'] === _0xdcc214); else _0x18c07b(_0x19d7bd(0x449) + _0x107125[_0x19d7bd(0x542)]); } }), _0x4f69e3(), _0x4b2288(), _0x1e972b(), document[_0x5f2c5b(0x392)](_0x5f2c5b(0x240))[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), async () => { const _0x1c2432 = _0x5f2c5b, _0x3bf664 = await _0x4b635a(_0x1c2432(0x5b9)); if (_0x3bf664) { const _0x1ffc0e = await _0x4b635a(_0x1c2432(0xb2e)); if (_0x1ffc0e) { if (_0x1c2432(0x8ae) === 'YDTGg') { _0x5b3ee9(!![], _0x1c2432(0x4b8)); try { localStorage[_0x1c2432(0x529)](); const _0x14905d = await _0x1282ec, _0x5eaa63 = _0x14905d[_0x1c2432(0x281)]([_0x1c2432(0x470), 'music_library', _0x1c2432(0xa3c)], _0x1c2432(0xae0)); await Promise['all']([_0x5eaa63[_0x1c2432(0x4c5)]('images')[_0x1c2432(0x529)](), _0x5eaa63['objectStore']('music_library')['clear'](), _0x5eaa63[_0x1c2432(0x4c5)](_0x1c2432(0xa3c))[_0x1c2432(0x529)]()]), await new Promise(_0x39da22 => { const _0x2f722a = _0x1c2432; _0x5eaa63[_0x2f722a(0x587)] = _0x39da22; }), _0x18c07b(_0x1c2432(0x87e)), setTimeout(() => { const _0x2a6658 = _0x1c2432; location[_0x2a6658(0xb25)](); }, 0x5dc); } catch (_0x1ad699) { _0x5b3ee9(![]), _0x18c07b(_0x1c2432(0x3e9) + _0x1ad699[_0x1c2432(0x542)]); } } else _0x3cdc12[_0x1c2432(0x7e4)]('[' + _0xa9f4d6(_0x5a2132) + ']\x20' + _0x42a392['content']); } } }); const _0x7a3da8 = document[_0x5f2c5b(0x50b)]('#settings-screen\x20.content'); if (_0x7a3da8) { if ('BMSUB' !== _0x5f2c5b(0xaea)) _0x1fb833(() => { const _0x1e61a1 = _0x5f2c5b, _0x1474f5 = _0x407b8d[_0x1e61a1(0x392)](_0x1f6281); if (_0x1474f5) _0x1474f5['src'] = _0x3a5e1a[_0x1e61a1(0x459)]; }, 0x0); else { const _0x105f90 = document[_0x5f2c5b(0x92e)](_0x5f2c5b(0x63a)); _0x105f90['id'] = _0x5f2c5b(0x8ed), _0x105f90[_0x5f2c5b(0x324)] = _0x5f2c5b(0x438), Object[_0x5f2c5b(0x9cb)](_0x105f90['style'], { 'position': _0x5f2c5b(0x942), 'top': '15px', 'right': _0x5f2c5b(0x9d0), 'fontSize': _0x5f2c5b(0x334), 'lineHeight': _0x5f2c5b(0x2df), 'color': 'var(--text-color-light)', 'opacity': '0.5', 'cursor': _0x5f2c5b(0x347), 'zIndex': '1', 'transition': _0x5f2c5b(0x83a), 'whiteSpace': _0x5f2c5b(0x32b), 'textAlign': 'right' }), _0x105f90[_0x5f2c5b(0x86a)] = () => { const _0x59b60b = _0x5f2c5b; _0x105f90[_0x59b60b(0xb56)][_0x59b60b(0x225)] = '1'; }, _0x105f90['onmouseout'] = () => { const _0x30ccae = _0x5f2c5b; if (_0x30ccae(0x9f7) !== _0x30ccae(0x9f7)) { const _0x41f7b0 = _0x16761e[_0x30ccae(0x8bb)](); if (!_0x41f7b0 || !_0x4fdf5b['activeDiaryCharacterId']) return; let _0xd52bb0 = _0x2f0692[_0x30ccae(0x9bb)][_0x30ccae(0x69e)](_0xd8f225 => _0xd8f225[_0x30ccae(0x918)] === _0x77934e['activeDiaryCharacterId']); !_0xd52bb0 && (_0xd52bb0 = { 'characterId': _0xe726b5['activeDiaryCharacterId'], 'entries': [] }, _0x1c04de[_0x30ccae(0x9bb)]['push'](_0xd52bb0)); _0xd52bb0[_0x30ccae(0xb3c)][_0x30ccae(0x7e4)]({ 'timestamp': _0x3f1d27[_0x30ccae(0x9b4)](), 'author': _0x30ccae(0x5c3), 'content': _0x41f7b0 }), _0x171a15(); const _0x22e4cc = _0xd52bb0[_0x30ccae(0xb3c)][_0x30ccae(0x6f2)]; _0x526bca[_0x30ccae(0x1ff)] = _0x5e5cae['ceil'](_0x22e4cc / 0x2) - 0x1, _0x3924cc(); } else _0x105f90[_0x30ccae(0xb56)][_0x30ccae(0x225)] = '0.5'; }, _0x105f90[_0x5f2c5b(0xabf)](_0x5f2c5b(0x4b9), () => { const _0x56a355 = _0x5f2c5b; if (_0x56a355(0x308) !== _0x56a355(0x308)) { const _0x20408a = new _0x544524(_0x20d0f9['timestamp']); _0x197ab4 += '-\x20**你与' + _0x1c2aff[_0x56a355(0x420)] + _0x56a355(0xbf5) + _0x3e7b5d(_0x20408a) + '\x0a'; } else window[_0x56a355(0x613)](_0x56a355(0x33d), '_blank'); }), _0x7a3da8[_0x5f2c5b(0xb56)][_0x5f2c5b(0x350)] = _0x5f2c5b(0x469), _0x7a3da8[_0x5f2c5b(0x73b)](_0x105f90); } } } const _0xa7f348 = _0x3abecc(0x8f7); async function _0x58cb76(_0xf7c13) { const _0x241a7f = _0x3abecc; if (_0x241a7f(0xb8e) !== 'wugvq') _0x3b7134 = _0x241a7f(0x2e1); else { const _0xc21b17 = await _0x1282ec; return new Promise((_0x171a5c, _0x362680) => { const _0x209ddc = _0x241a7f, _0x91e974 = _0xc21b17['transaction'](_0xa7f348, _0x209ddc(0xae5)), _0x4d4126 = _0x91e974[_0x209ddc(0x4c5)](_0xa7f348), _0x1e648c = _0x4d4126['get'](_0xf7c13); _0x1e648c[_0x209ddc(0x817)] = () => _0x171a5c(_0x1e648c['result']), _0x1e648c[_0x209ddc(0x677)] = () => _0x362680(_0x1e648c['error']); }); } } async function _0x4be0cf() { const _0x1836bb = _0x3abecc; if ('qYlXG' === 'qYlXG') { const _0x30fd5d = await _0x1282ec; return new Promise((_0x5e639d, _0x43b13c) => { const _0x1ba491 = _0x198c, _0x1a493d = _0x30fd5d[_0x1ba491(0x281)](_0xa7f348, _0x1ba491(0xae5)), _0x3e900f = _0x1a493d['objectStore'](_0xa7f348), _0xe9b960 = _0x3e900f['getAll'](); _0xe9b960[_0x1ba491(0x817)] = () => _0x5e639d(_0xe9b960[_0x1ba491(0x3cf)]), _0xe9b960['onerror'] = () => _0x43b13c(_0xe9b960[_0x1ba491(0x5b1)]); }); } else _0x2a381f[_0x1836bb(0x7e4)](_0x11b03b); } async function _0x4f6b3c(_0x29eada) { const _0x4c0feb = await _0x1282ec; return new Promise((_0x22bda8, _0x414cf6) => { const _0xaae894 = _0x198c; if (_0xaae894(0x766) !== 'PfiTq') { const _0x24edd4 = _0x4c0feb[_0xaae894(0x281)](_0xa7f348, _0xaae894(0xae0)), _0x3a5f47 = _0x24edd4[_0xaae894(0x4c5)](_0xa7f348), _0x33bd7b = _0x3a5f47[_0xaae894(0x701)](_0x29eada); _0x33bd7b[_0xaae894(0x817)] = () => _0x22bda8(_0x33bd7b[_0xaae894(0x3cf)]), _0x33bd7b[_0xaae894(0x677)] = () => _0x414cf6(_0x33bd7b[_0xaae894(0x5b1)]); } else _0x5216c[_0xaae894(0xb56)][_0xaae894(0x993)] = 'none'; }); } async function _0x277d8d(_0x16150c) { const _0x424ad0 = await _0x1282ec; return new Promise((_0x4a1b95, _0x501e5b) => { const _0x5c2d90 = _0x198c, _0x3d92f3 = _0x424ad0[_0x5c2d90(0x281)](_0xa7f348, _0x5c2d90(0xae0)), _0x106423 = _0x3d92f3[_0x5c2d90(0x4c5)](_0xa7f348), _0x5efcaf = _0x106423[_0x5c2d90(0x87c)](_0x16150c); _0x5efcaf[_0x5c2d90(0x817)] = () => _0x4a1b95(), _0x5efcaf[_0x5c2d90(0x677)] = () => _0x501e5b(_0x5efcaf[_0x5c2d90(0x5b1)]); }); } let _0x3b644d = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x5d2512 = { 'audio': document['getElementById'](_0x3abecc(0x93c)), 'cover': document[_0x3abecc(0x392)](_0x3abecc(0x8dc)), 'info': document[_0x3abecc(0x392)](_0x3abecc(0x675)), 'lyrics': document[_0x3abecc(0x392)]('altar-slot-lyrics') }, _0xa9378c = { 'audio': document['getElementById'](_0x3abecc(0xb19)), 'cover': document[_0x3abecc(0x392)](_0x3abecc(0x7f7)), 'info': document[_0x3abecc(0x392)](_0x3abecc(0xc1d)), 'lyrics': document[_0x3abecc(0x392)]('lyrics-file-input') }; for (const _0x4fd665 in _0x5d2512) { _0x5d2512[_0x4fd665][_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0xa9378c[_0x4fd665][_0x3abecc(0x4b9)]()), _0xa9378c[_0x4fd665][_0x3abecc(0xabf)](_0x3abecc(0xc38), _0x4ce35c => { const _0x25aa5c = _0x3abecc; _0x790f33(_0x4fd665, _0x4ce35c[_0x25aa5c(0xa4c)]['files'][0x0]); }); } function _0x790f33(_0x22b81c, _0x209382) { const _0x43baa5 = _0x3abecc; if (!_0x209382) return; _0x3b644d[_0x22b81c] = _0x209382, _0x5d2512[_0x22b81c][_0x43baa5(0x50b)](_0x43baa5(0x75c))[_0x43baa5(0x324)] = _0x209382['name'], _0x5d2512[_0x22b81c][_0x43baa5(0x42c)][_0x43baa5(0x6ec)]('filled'), _0x40d75d(); } function _0x40d75d() { const _0x1cd0ed = _0x3abecc; if (_0x1cd0ed(0x8c8) !== _0x1cd0ed(0x8c8)) _0x29e789[_0x1cd0ed(0x843)](), _0x350202(_0x14a143['id']); else { const _0x280b8a = document['getElementById']('confirm-altar-upload-button'); if (_0x3b644d[_0x1cd0ed(0x6d9)] && _0x3b644d[_0x1cd0ed(0x268)]) _0x280b8a[_0x1cd0ed(0x523)] = ![]; else { if (_0x1cd0ed(0x9a0) !== 'qaSJk') _0x280b8a[_0x1cd0ed(0x523)] = !![]; else { const _0x201961 = _0x3f3592(_0x44be80['id']); if (!_0x201961 || !_0x201961['id']) return _0x3d63af[_0x1cd0ed(0x5b1)](_0x1cd0ed(0x2b3)), null; _0x560f5e['calendarEvents'][_0x1cd0ed(0x7e4)]({ 'id': _0x1cd0ed(0x5a2) + _0x366ccf['now'](), 'date': _0x12fe6a[_0x1cd0ed(0x4cc)], 'type': _0x1c0859[_0x1cd0ed(0x93a)], 'content': _0x3c4062[_0x1cd0ed(0x3cd)], 'userId': _0x201961['id'], 'createdBy': 'ai' }), _0x35ca9b(), _0x4fd341(), _0x2e4584(); const _0x31b4b0 = _0x97672d(_0x28ad5d['id']); _0x31b4b0 && _0x11d00a[_0x1cd0ed(0x93a)] === _0x1cd0ed(0xc27) && _0xbaa160('💜\x20' + _0x31b4b0[_0x1cd0ed(0x420)] + '\x20添加了新的纪念日：' + _0x7ccb1e['eventContent']); return { 'role': _0x1cd0ed(0x880), 'senderId': _0x509482['id'], 'timestamp': _0x182ecf[_0x1cd0ed(0x9b4)](), 'isOffline': _0xb20931, 'content': null }; return { 'role': _0x1cd0ed(0x880), 'senderId': _0x361570['id'], 'timestamp': _0x260007[_0x1cd0ed(0x9b4)](), 'isOffline': _0x142650, 'content': null }; } } } } function _0x337a0e() { const _0xe4fdfb = _0x3abecc; _0x3b644d = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x4507d7 in _0x5d2512) { _0xe4fdfb(0xc25) !== _0xe4fdfb(0x236) ? (_0x5d2512[_0x4507d7][_0xe4fdfb(0x42c)][_0xe4fdfb(0xb26)](_0xe4fdfb(0x374)), _0xa9378c[_0x4507d7][_0xe4fdfb(0x60e)] = '') : _0x401636[_0xe4fdfb(0x3df)]['insertAdjacentHTML']('beforeend', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>'); } _0x5d2512['audio'][_0xe4fdfb(0x50b)]('.slot-filename')[_0xe4fdfb(0x324)] = _0xe4fdfb(0xbc6), _0x5d2512[_0xe4fdfb(0x883)][_0xe4fdfb(0x50b)](_0xe4fdfb(0x75c))[_0xe4fdfb(0x324)] = _0xe4fdfb(0x480), _0x5d2512[_0xe4fdfb(0x268)][_0xe4fdfb(0x50b)](_0xe4fdfb(0x75c))[_0xe4fdfb(0x324)] = _0xe4fdfb(0x3c3), _0x5d2512[_0xe4fdfb(0xa71)][_0xe4fdfb(0x50b)](_0xe4fdfb(0x75c))[_0xe4fdfb(0x324)] = '点击选择\x20.lrc', _0x40d75d(); } document[_0x3abecc(0x392)](_0x3abecc(0x9f6))[_0x3abecc(0xabf)]('click', async () => { const _0x2dbe6a = _0x3abecc; if (!_0x3b644d[_0x2dbe6a(0x6d9)] || !_0x3b644d['info']) { if (_0x2dbe6a(0xa3d) !== _0x2dbe6a(0xa3d)) _0x435d47[_0x2dbe6a(0x4a7)]('chatHistory_' + _0x4406ff); else { _0x18c07b(_0x2dbe6a(0x7d5)); return; } } await _0x54139f(); }), document[_0x3abecc(0x392)](_0x3abecc(0xa23))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x1c742e = _0x3abecc; _0x337a0e(), _0x2bd982(_0x1c742e(0xb71), _0x1c742e(0x578)); }), document[_0x3abecc(0x392)](_0x3abecc(0x90e))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x5b2257 = _0x3abecc; if (_0x5b2257(0x4d8) !== _0x5b2257(0x4d8)) { _0x1bc6c2(_0x5b2257(0x39c)); return; } else _0x2bd982(_0x5b2257(0x578), 'musicUploadAltar'); }); async function _0x54139f() { const _0x3e086e = _0x3abecc; _0x5b3ee9(!![], _0x3e086e(0xa94)); try { if ('Jmmit' === _0x3e086e(0x2f8)) { const _0x5a27ac = await _0x3b644d['info'][_0x3e086e(0xbbc)](); let _0x156a9a; if (_0x5a27ac[_0x3e086e(0x8bb)]()[_0x3e086e(0x629)]('{')) _0x3e086e(0x1e1) !== 'WeGQk' ? _0x156a9a = JSON[_0x3e086e(0x30c)](_0x5a27ac) : _0xa519d1 = _0x15b89d[_0x3e086e(0x2bf)](_0x15cd11); else { _0x156a9a = {}; const _0x28044a = _0x5a27ac[_0x3e086e(0x686)]('\x0a'); _0x28044a[_0x3e086e(0xb5e)](_0x554b43 => { const _0x5a5bdc = _0x3e086e, _0x70694a = _0x554b43[_0x5a5bdc(0x686)](/:\s|：\s/); if (_0x70694a['length'] === 0x2) { if (_0x5a5bdc(0xa4b) === _0x5a5bdc(0xa4b)) { const _0x43bd3c = _0x70694a[0x0]['trim'](), _0x1e25fd = _0x70694a[0x1][_0x5a5bdc(0x8bb)](), _0x5eaa4f = { '歌名': _0x5a5bdc(0x9c8), '艺术家': '歌手', '专辑': '专辑' }; if (_0x5eaa4f[_0x43bd3c]) { if (_0x5a5bdc(0x758) !== _0x5a5bdc(0x758)) { _0x5f3301[_0x5a5bdc(0xa8a)][_0x5a5bdc(0xbb4)] = _0x47e84b[_0x5a5bdc(0x60e)][_0x5a5bdc(0x8bb)](), _0x39575f[_0x5a5bdc(0xa8a)][_0x5a5bdc(0xbf4)] = _0x4c89e4['value'][_0x5a5bdc(0x8bb)](), _0x365455['apiSettings'][_0x5a5bdc(0xab4)] = _0x5e8c7a['value'][_0x5a5bdc(0x8bb)](), _0x34a60a[_0x5a5bdc(0xa8a)]['provider'] = _0x2e6e6b[_0x5a5bdc(0x392)](_0x5a5bdc(0x342))[_0x5a5bdc(0x60e)]; const _0x1e2e2a = _0x53c9ba(_0x23310c['value'], 0xa); _0x380367[_0x5a5bdc(0xab3)][_0x5a5bdc(0x563)] = _0x183813[_0x5a5bdc(0x3fc)](_0x1e2e2a) && _0x1e2e2a > 0x0 ? _0x1e2e2a : 0x64, _0x5b2fe2(), _0x191607(_0x5a5bdc(0x7e0)); } else _0x156a9a[_0x5eaa4f[_0x43bd3c]] = _0x1e25fd; } } else { const _0x32a7d5 = _0x340b25[_0x5a5bdc(0x392)]('todo-list'), _0x475ecc = _0x50fb5a[_0x5a5bdc(0x392)](_0x5a5bdc(0x28e)); _0x32a7d5['innerHTML'] = ''; const _0x2e855f = new _0x5860b9(_0x1c5e05 + 'T00:00:00'); _0x475ecc[_0x5a5bdc(0x324)] = _0x2e855f['getMonth']() + 0x1 + '月' + _0x2e855f[_0x5a5bdc(0xa7a)]() + '日'; const _0x1b9f67 = _0x2fa673['calendarEvents']['filter'](_0x15855b => _0x15855b[_0x5a5bdc(0x215)] === _0x18a4d7); if (_0x1b9f67[_0x5a5bdc(0x6f2)] === 0x0) { _0x32a7d5[_0x5a5bdc(0x2c9)] = _0x5a5bdc(0x564); return; } _0x1b9f67[_0x5a5bdc(0xb5e)](_0x551f21 => { const _0x28d139 = _0x5a5bdc, _0xd6ea0c = _0x549e55[_0x28d139(0x92e)]('div'); _0xd6ea0c['className'] = _0x551f21['type'] === _0x28d139(0xc27) ? _0x28d139(0xa90) : _0x28d139(0x519), _0xd6ea0c[_0x28d139(0x324)] = _0x551f21[_0x28d139(0xa19)], _0xd6ea0c['dataset']['id'] = _0x551f21['id'], _0x32a7d5[_0x28d139(0x594)](_0xd6ea0c); }); } } }); if (!_0x156a9a[_0x3e086e(0x9c8)]) throw new Error('在你那乱七八糟的文本里没找到“歌名”！'); _0x156a9a[_0x3e086e(0x685)] = _0x3e086e(0xa9f) + Date[_0x3e086e(0x9b4)]() + '\x20'; } const _0x59a148 = _0x3e086e(0xa9f) + (_0x156a9a[_0x3e086e(0x685)] || Date['now']()) + '\x20', _0x4465a6 = { 'id': _0x59a148, 'info': _0x156a9a, 'audio': _0x3b644d['audio'], 'cover': _0x3b644d[_0x3e086e(0x883)], 'lyrics': _0x3b644d[_0x3e086e(0xa71)] ? await _0x3b644d['lyrics'][_0x3e086e(0xbbc)]() : '' }; await _0x4f6b3c(_0x4465a6), await _0x58350f(), _0x5b3ee9(![]), _0x18c07b(_0x3e086e(0x2d2) + _0x156a9a[_0x3e086e(0x9c8)] + _0x3e086e(0x541)), _0x2bd982(_0x3e086e(0x578), 'musicUploadAltar'); } else { _0x4fe6d2[_0x3e086e(0x5b1)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20' + _0xf402cb['activeChatId'] + ',\x20resetting.', _0x4a6dcc); try { _0x506dcf['removeItem'](_0x3e086e(0x76e) + _0x179711[_0x3e086e(0x7ee)]); } catch (_0x25c861) { _0x19dd87[_0x3e086e(0x5b1)]('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', _0x25c861); } } } catch (_0x4ffc5a) { _0x3e086e(0x278) !== _0x3e086e(0x5bf) ? (_0x5b3ee9(![]), console[_0x3e086e(0x5b1)](_0x3e086e(0x6b5), _0x4ffc5a), _0x18c07b(_0x3e086e(0x5db) + _0x4ffc5a[_0x3e086e(0x542)] + '\x20')) : (_0x713a7a = _0xf0023d[_0x3e086e(0x420)], _0x5e0646 = _0x257aef[_0x3e086e(0x58d)]); } } async function _0x58350f() { const _0x4d3c47 = _0x3abecc; if ('lPTpn' === _0x4d3c47(0x27a)) { const _0x451a87 = _0x41e388[_0x4d3c47(0x392)](_0x4d3c47(0x64a)), _0x4511dc = _0x498446['getElementById'](_0x4d3c47(0x2e0)), _0x457ec6 = _0x451a87[_0x4d3c47(0x60e)][_0x4d3c47(0x8bb)](), _0x4db91a = _0x2b794a(_0x4511dc[_0x4d3c47(0x60e)]); if (!_0x457ec6 || _0x4298fd(_0x4db91a) || _0x4db91a <= 0x0) { _0x2a9cc0(_0x4d3c47(0x91e)); return; } _0x149832[_0x4d3c47(0x41f)][_0x4d3c47(0x7e4)]({ 'id': 'exp_' + _0x49e501[_0x4d3c47(0x9b4)](), 'description': _0x457ec6, 'amount': _0x4db91a, 'timestamp': _0x5580b3['now']() }), _0x5e887f(), _0x189ab6(), _0x451a87[_0x4d3c47(0x60e)] = '', _0x4511dc[_0x4d3c47(0x60e)] = '', _0x451a87[_0x4d3c47(0x464)](); } else { const _0x1c543d = document['getElementById'](_0x4d3c47(0x521)); _0x1c543d[_0x4d3c47(0x2c9)] = ''; const _0x70d1b6 = await _0x4be0cf(); if (_0x70d1b6[_0x4d3c47(0x6f2)] === 0x0) { _0x1c543d[_0x4d3c47(0x2c9)] = _0x4d3c47(0x566); return; } _0x70d1b6[_0x4d3c47(0x474)]((_0x4f2f2a, _0x255080) => (_0x4f2f2a['info'][_0x4d3c47(0x9c8)] || '')[_0x4d3c47(0x8b6)](_0x255080[_0x4d3c47(0x268)][_0x4d3c47(0x9c8)] || '')); for (const _0x456768 of _0x70d1b6) { const _0x44ac87 = document[_0x4d3c47(0x92e)](_0x4d3c47(0x63a)); _0x44ac87[_0x4d3c47(0x894)] = _0x4d3c47(0x9b0), _0x44ac87[_0x4d3c47(0x641)][_0x4d3c47(0x908)] = _0x456768['id']; const _0x1419b1 = _0x456768[_0x4d3c47(0x883)] ? URL[_0x4d3c47(0x38c)](_0x456768[_0x4d3c47(0x883)]) : _0x2be033; _0x44ac87['innerHTML'] = _0x4d3c47(0x444) + _0x1419b1 + _0x4d3c47(0x3a5) + (_0x456768[_0x4d3c47(0x268)][_0x4d3c47(0x9c8)] || '未知歌曲') + _0x4d3c47(0x636) + (_0x456768[_0x4d3c47(0x268)]['歌手'] || _0x4d3c47(0x51c)) + _0x4d3c47(0x769); let _0x1fd6b9 = null; const _0x342b69 = _0x988a8 => { const _0x571afc = _0x4d3c47; if (_0x571afc(0x668) !== _0x571afc(0x1f2)) { if (_0x988a8['button'] === 0x2) return; _0x1fd6b9 = setTimeout(async () => { const _0x5b8eab = _0x571afc; if (_0x988a8['type'] === _0x5b8eab(0x6f3)) _0x988a8[_0x5b8eab(0x93e)](); const _0x3d81e3 = await _0x4b635a(_0x5b8eab(0x27b) + _0x456768[_0x5b8eab(0x268)][_0x5b8eab(0x9c8)] + '》吗？'); _0x3d81e3 && (await _0x277d8d(_0x456768['id']), await _0x58350f(), _0x18c07b('已删除。')); }, 0x320); } else _0x86b553 = _0x1f05c8[_0x571afc(0x420)], _0x1963a7 = _0x4606fe[_0x571afc(0x58d)]; }, _0x40322e = () => { 'EVefG' !== 'EVefG' ? _0x26292e[_0x133230] = _0x2da4e9['parse'](_0x18008a) : clearTimeout(_0x1fd6b9); }; _0x44ac87[_0x4d3c47(0xabf)]('mousedown', _0x342b69), _0x44ac87[_0x4d3c47(0xabf)](_0x4d3c47(0x257), _0x40322e), _0x44ac87[_0x4d3c47(0xabf)]('mouseleave', _0x40322e), _0x44ac87[_0x4d3c47(0xabf)](_0x4d3c47(0x6f3), _0x342b69, { 'passive': ![] }), _0x44ac87[_0x4d3c47(0xabf)]('touchend', _0x40322e), _0x44ac87[_0x4d3c47(0xabf)]('touchcancel', _0x40322e), _0x44ac87[_0x4d3c47(0xabf)]('click', _0x255a50 => { const _0x37a260 = _0x4d3c47; if ('vsgyb' === _0x37a260(0x6b1)) { const _0x4939eb = _0x242b5e[_0x37a260(0x392)](_0x37a260(0x5fb)), _0x208d31 = _0x4939eb[_0x37a260(0x9b8)](_0x37a260(0x77f)), _0x191d88 = _0x233778['querySelector'](_0x37a260(0x706)); if (_0x208d31[_0x37a260(0x6f2)] === 0x0) _0x191d88['textContent'] = _0x37a260(0x572); else _0x208d31['length'] > 0x2 ? _0x191d88[_0x37a260(0x324)] = '已选择\x20' + _0x208d31[_0x37a260(0x6f2)] + '\x20项' : _0x191d88['textContent'] = _0x51429c[_0x37a260(0xbd4)](_0x208d31)[_0x37a260(0x5e9)](_0xf7694 => _0xf7694[_0x37a260(0x96c)][_0x37a260(0x324)][_0x37a260(0x8bb)]())[_0x37a260(0x52b)]('、'); } else { if (_0x1fd6b9) clearTimeout(_0x1fd6b9); if (_0x255a50[_0x37a260(0x9cf)]) return; setTimeout(() => { const _0x3b05a5 = _0x37a260; if (_0x1fd6b9) { if (_0x3b05a5(0x67e) !== _0x3b05a5(0xb7e)) _0x15b31a(_0x456768['id'], _0x70d1b6[_0x3b05a5(0x5e9)](_0x4b9c98 => _0x4b9c98['id'])); else { const _0x5636dc = _0x204f12['getElementById']('global-player-play-pause-btn'); if (_0x5636dc) _0x5636dc['textContent'] = '❚❚'; } } }, 0x32); } }), _0x1c543d[_0x4d3c47(0x594)](_0x44ac87); } } } _0x4a20c9[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x2d59cb = _0x3abecc; _0x18c07b(_0x2d59cb(0xb30)); }), _0x249284[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0xfdfb3e = _0x3abecc; _0x18c07b(_0xfdfb3e(0x67d)); }); let _0x15ee6a = [], _0x2d690c = -0x1; async function _0x15b31a(_0x5820f4, _0x5ecbf8) { const _0x20be2d = _0x3abecc; if ('GfhRw' === _0x20be2d(0xa10)) _0x53644b += '-\x20你的备忘录里有一条叫“' + _0x439a3f[_0x20be2d(0x54d)] + '”的笔记，内容是：“' + _0x216329[_0x20be2d(0xa19)]['replace'](/\n/g, '\x20') + _0x20be2d(0x5f5); else { const _0xd0e618 = await _0x58cb76(_0x5820f4); if (!_0xd0e618) return; _0x1be478 = { 'title': _0xd0e618[_0x20be2d(0x268)][_0x20be2d(0x9c8)] || _0x20be2d(0x71b), 'artist': _0xd0e618[_0x20be2d(0x268)]['歌手'] || _0x20be2d(0x51c), 'cover': _0xd0e618[_0x20be2d(0x883)] ? URL[_0x20be2d(0x38c)](_0xd0e618[_0x20be2d(0x883)]) : _0x2be033, 'isFromLibrary': !![] }; const _0x17ea3d = URL[_0x20be2d(0x38c)](_0xd0e618[_0x20be2d(0x6d9)]); _0x2a3ed9[_0x20be2d(0x84e)] = _0x17ea3d, _0x2a3ed9['play'](), _0x9e19ad(); } } async function _0x9e19ad() { const _0x43276c = _0x3abecc; if (_0x43276c(0x34c) !== _0x43276c(0x34c)) _0x398fc7[_0x43276c(0x84e)] = _0x86000a[_0x43276c(0x38c)](_0x1269fc), _0x1beaa5[_0x43276c(0xb56)][_0x43276c(0x993)] = _0x43276c(0x94c); else { const _0x49164d = document[_0x43276c(0x392)](_0x43276c(0x4ff)), _0x483e4e = document[_0x43276c(0x392)](_0x43276c(0x708)), _0x259dce = document[_0x43276c(0x392)](_0x43276c(0x36d)), _0xc1bc9f = document[_0x43276c(0x392)](_0x43276c(0x209)), _0x1eeec7 = _0x1be478; _0x1eeec7 && _0x1eeec7[_0x43276c(0xc1a)] ? _0x43276c(0xb0c) !== _0x43276c(0xb0c) ? _0x37287b += '-\x20**状态提示**:\x20这是你和' + _0x5a478f[_0x43276c(0x420)] + _0x43276c(0x84d) : (_0x483e4e[_0x43276c(0x324)] = _0x1eeec7[_0x43276c(0x54d)], _0x259dce[_0x43276c(0x324)] = _0x1eeec7[_0x43276c(0x5c7)], _0x49164d['classList'][_0x43276c(0x6ec)](_0x43276c(0x354)), _0x49164d[_0x43276c(0xb56)][_0x43276c(0xa6a)]('--widget-cover-image', 'url(' + _0x1eeec7['cover'] + ')')) : (_0x483e4e[_0x43276c(0x324)] = _0x43276c(0xc29), _0x259dce['textContent'] = _0x43276c(0x826), _0x49164d['classList'][_0x43276c(0xb26)](_0x43276c(0x354)), _0xc1bc9f[_0x43276c(0xb56)]['setProperty'](_0x43276c(0x243), _0x43276c(0x3a4))); } } _0x4a20c9 && _0x4a20c9[_0x3abecc(0xabf)]('click', () => { const _0x29bf12 = _0x3abecc; if (_0x29bf12(0x286) === _0x29bf12(0x286)) { if (_0x15ee6a[_0x29bf12(0x6f2)] === 0x0) return; _0x2d690c = (_0x2d690c + 0x1) % _0x15ee6a[_0x29bf12(0x6f2)], _0x15b31a(_0x15ee6a[_0x2d690c], _0x15ee6a); } else { if (!_0x56d9e0['isArray'](_0x11bbc2)) return '<p>格式错误</p>'; if (_0x65c444[_0x29bf12(0x6f2)] === 0x0) return _0x29bf12(0x515); return _0x29bf12(0xbb1) + _0x1fd4a9[_0x29bf12(0x5e9)]((_0x3e6527, _0x9eeb) => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20' + (_0x9eeb < _0x15a100[_0x29bf12(0x6f2)] - 0x1 ? _0x29bf12(0x526) : '') + _0x29bf12(0x3d2) + (_0x3e6527[_0x29bf12(0x9b7)] || _0x29bf12(0x1dc)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x3e6527[_0x29bf12(0x518)] || '') + _0x29bf12(0x838))[_0x29bf12(0x52b)]('') + _0x29bf12(0x892); } }); _0x249284 && _0x249284[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0xf5cefd = _0x3abecc; if (_0x15ee6a[_0xf5cefd(0x6f2)] === 0x0) return; _0x2d690c = (_0x2d690c - 0x1 + _0x15ee6a[_0xf5cefd(0x6f2)]) % _0x15ee6a['length'], _0x15b31a(_0x15ee6a[_0x2d690c], _0x15ee6a); }); _0x2a3ed9[_0x3abecc(0xabf)]('play', () => { if (_0x31c4b5) _0x31c4b5['textContent'] = '❚❚'; }), _0x2a3ed9[_0x3abecc(0xabf)](_0x3abecc(0x24e), () => { const _0x4d3af9 = _0x3abecc; if (_0x31c4b5) _0x31c4b5[_0x4d3af9(0x324)] = '▶'; }), _0x2a3ed9[_0x3abecc(0xabf)]('ended', () => { const _0x43cd88 = _0x3abecc; if (_0x43cd88(0x59b) !== _0x43cd88(0x771)) { if (_0x4a20c9) _0x4a20c9[_0x43cd88(0x4b9)](); } else _0x39dc66[_0x43cd88(0xb56)][_0x43cd88(0xa96)] = _0x43cd88(0x50c), _0x723882[_0x43cd88(0xb56)]['textShadow'] = _0x43cd88(0x3a4); }); function _0x56d3f6() { const _0x512f20 = _0x3abecc, _0x331edc = _0x28f748(); if (!_0x331edc) return; _0x2a5dc2[_0x512f20(0x2c9)] = '', _0x2b3f5b[_0x512f20(0x60e)] = ''; if (_0x331edc[_0x512f20(0x875)] === 'group') _0x331edc['participantIds'][_0x512f20(0xb5e)](_0x413ef4 => { const _0x2a73c5 = _0x512f20; if (_0x2a73c5(0x6ab) !== 'RHpFv') _0x51044f(_0x2a73c5(0xb7d), '聊天'); else { const _0xc444b7 = _0x2653c6(_0x413ef4); if (_0xc444b7) { if ('NEjqU' === 'NEjqU') { const _0x2638fe = document[_0x2a73c5(0x92e)](_0x2a73c5(0x9b6)); _0x2638fe['value'] = _0xc444b7['id'], _0x2638fe[_0x2a73c5(0x324)] = _0xc444b7[_0x2a73c5(0x420)], _0x2a5dc2[_0x2a73c5(0x594)](_0x2638fe); } else _0x3585ba = _0x2a73c5(0x5c5), _0x2fb881 = _0x2a73c5(0x8d3); } } }), _0x1c1e5b[_0x512f20(0xb56)]['display'] = 'block'; else { if (_0x512f20(0x56c) === _0x512f20(0x396)) { const _0x3d6526 = _0xb8abf[_0x512f20(0x92e)](_0x512f20(0x63a)); _0x3d6526['className'] = _0x512f20(0x984), _0x3d6526[_0x512f20(0x641)]['id'] = _0x48607c['id']; const _0x2816b6 = _0x4ec372['id'] === _0xc40833[_0x512f20(0x789)] ? _0x512f20(0x6ed) : ''; _0x3d6526['innerHTML'] = _0x512f20(0xc37) + (_0x4b14c4[_0x512f20(0x58d)] || _0x376669) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x212bbe[_0x512f20(0x420)] + _0x2816b6 + _0x512f20(0x4d4) + _0x37aa91['persona'][_0x512f20(0x58c)](0x0, 0x64) + _0x512f20(0x7a1), _0x3d6526[_0x512f20(0xabf)](_0x512f20(0x4b9), () => _0x251b9e(_0x1f41b2['id'])), _0x4f12c8[_0x512f20(0x594)](_0x3d6526); } else _0x1c1e5b[_0x512f20(0xb56)][_0x512f20(0x993)] = _0x512f20(0x3a4); } _0x34abc0[_0x512f20(0x42c)][_0x512f20(0x6ec)](_0x512f20(0x3a9)), _0x2b3f5b[_0x512f20(0x464)](); } function _0x3a8db9() { const _0x5ea395 = _0x3abecc; if (_0x5ea395(0x65e) === 'jOaER') { const _0x5f533b = parseFloat(_0x2b3f5b[_0x5ea395(0x60e)]); if (isNaN(_0x5f533b) || _0x5f533b <= 0x0) { if ('BYJkJ' !== _0x5ea395(0x287)) return new _0xfac5bd(_0x5bce0e => { const _0x481a4a = _0x5ea395, _0x42748b = _0x481a4a(0x560); _0x855b98[_0x481a4a(0x3de)][_0x481a4a(0x256)]('beforeend', _0x42748b); const _0x819bee = _0x5cb0d1[_0x481a4a(0x392)](_0x481a4a(0x61e)), _0x1d7b7d = _0x52a482[_0x481a4a(0x392)]('diary-modal-textarea'), _0x5361cc = _0x11b013[_0x481a4a(0x392)](_0x481a4a(0x3ca)), _0x4beb00 = _0x317b69[_0x481a4a(0x392)](_0x481a4a(0x325)), _0x151d73 = _0x819bee[_0x481a4a(0x50b)](_0x481a4a(0xb37)), _0x2579ef = () => { const _0x1e7674 = _0x481a4a; _0x819bee[_0x1e7674(0xb26)](), _0x5bce0e(); }; _0x5361cc[_0x481a4a(0x998)] = () => { const _0x4c02b0 = _0x481a4a; _0x565b12(_0x1d7b7d[_0x4c02b0(0x60e)]), _0x2579ef(); }, _0x4beb00[_0x481a4a(0x998)] = _0x2579ef, _0x151d73[_0x481a4a(0x998)] = _0x2579ef; }); else { _0x18c07b('请输入有效的转账金额！'); return; } } const _0x3fb333 = _0x28f748(); let _0x3ba76b = null; _0x3fb333[_0x5ea395(0x875)] === _0x5ea395(0xacf) ? _0x3ba76b = _0x2a5dc2['value'] : _0x5ea395(0x8ff) === _0x5ea395(0x8ff) ? _0x3ba76b = _0x3fb333[_0x5ea395(0xa2a)][0x0] : (_0x401981['style']['backgroundImage'] = _0x5ea395(0x887) + _0x53e582[_0x5ea395(0x38c)](_0x6d8ed1) + ')', _0x3d57de[_0x5ea395(0xb56)]['backgroundSize'] = _0x5ea395(0x883), _0x4d5b84[_0x5ea395(0xb56)]['backgroundPosition'] = _0x5ea395(0x6a0)); const _0xf127 = _0x23edb1(_0x3fb333['id']), _0x39957c = { 'role': _0x5ea395(0x5c3), 'type': _0x5ea395(0xbea), 'content': '[用户向\x20' + (_0x2653c6(_0x3ba76b)?.[_0x5ea395(0x420)] || '未知') + _0x5ea395(0x4ca) + _0x5f533b + ']', 'amount': _0x5f533b, 'recipientId': _0x3ba76b, 'senderId': _0xf127['id'], 'timestamp': Date['now']() }; _0x2e4b8c['conversationHistory']['push'](_0x39957c), _0x5f38ff(), _0x2d9cac(), _0x34abc0[_0x5ea395(0x42c)][_0x5ea395(0xb26)](_0x5ea395(0x3a9)); } else for (const _0x975cfe of _0x1bd5ad[_0x5ea395(0x285)]) { let _0x2066c6 = _0x4f2e4c[_0x5ea395(0x285)]['find'](_0x3ee3d5 => _0x3ee3d5[_0x5ea395(0x420)] === _0x975cfe[_0x5ea395(0x420)]); if (_0x2066c6) _0x1d0826[_0x5ea395(0x7e4)](_0x2066c6['id']); else { const _0x3231fc = { 'id': _0x5ea395(0xb06) + _0x442d19[_0x5ea395(0x9b4)]() + '_' + _0x3ceb4a[_0x5ea395(0xb59)](), 'name': _0x975cfe['name'], 'content': _0x975cfe[_0x5ea395(0xa19)] }; _0x2b63bc['worldBooks']['push'](_0x3231fc), _0x2f8d60[_0x5ea395(0x7e4)](_0x3231fc['id']); } } } async function _0x10fec1(_0x590b36) { const _0x5d8367 = _0x3abecc, _0x24ac18 = _0x2653c6(_0x590b36); if (!_0x24ac18) return; const _0x3b4587 = await _0x4b635a(_0x5d8367(0x48a) + _0x24ac18['name'] + _0x5d8367(0x4cb)); if (!_0x3b4587) return; const _0x228d81 = _0x2e4b8c['diaries'][_0x5d8367(0x948)](_0x3a4393 => _0x3a4393[_0x5d8367(0x918)] === _0x590b36); if (_0x228d81 > -0x1) _0x5d8367(0x219) !== _0x5d8367(0x3fb) ? (_0x2e4b8c[_0x5d8367(0x9bb)][_0x5d8367(0x872)](_0x228d81, 0x1), _0x5a3c71(), _0x52bbfa(), _0x18c07b('【' + _0x24ac18[_0x5d8367(0x420)] + _0x5d8367(0x386))) : _0x4f251f = _0x195311['participantIds'][0x0]; else { if (_0x5d8367(0x544) !== 'pGTpH') _0x18c07b(_0x5d8367(0x292)); else { _0x1b727d[_0x5d8367(0x5b1)](_0x5d8367(0x4d3) + _0x482677[_0x5d8367(0x420)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } } } function _0x19336b() { const _0x58dc87 = _0x3abecc, _0x3d8b2a = document[_0x58dc87(0x392)](_0x58dc87(0x691)); _0x3d8b2a[_0x58dc87(0x2c9)] = ''; const _0x4c7e41 = _0x2e4b8c[_0x58dc87(0x404)][_0x58dc87(0x742)](_0x3bf614 => _0x2e4b8c[_0x58dc87(0x442)][_0x58dc87(0xaed)](_0x5d55af => _0x5d55af[_0x58dc87(0x875)] === 'private' && _0x5d55af[_0x58dc87(0xa2a)]['includes'](_0x3bf614['id']))); if (_0x4c7e41[_0x58dc87(0x6f2)] === 0x0) { _0x3d8b2a[_0x58dc87(0x2c9)] = _0x58dc87(0x517); return; } _0x4c7e41[_0x58dc87(0xb5e)](_0x5d5463 => { const _0x2f23b2 = _0x58dc87, _0x29647a = document[_0x2f23b2(0x92e)]('li'); _0x29647a[_0x2f23b2(0x894)] = _0x2f23b2(0x47d), _0x29647a['dataset']['charId'] = _0x5d5463['id'], _0x29647a['innerHTML'] = _0x2f23b2(0x2f7) + (_0x5d5463['avatar'] || _0x2be033) + _0x2f23b2(0x832) + _0x5d5463[_0x2f23b2(0x420)] + _0x2f23b2(0x6aa) + _0x5d5463[_0x2f23b2(0x420)] + _0x2f23b2(0x51e), _0x29647a[_0x2f23b2(0x50b)](_0x2f23b2(0x47e))[_0x2f23b2(0xabf)]('click', () => _0x1a26d4(_0x5d5463['id'])), _0x29647a['querySelector']('.snoop-clear-btn')[_0x2f23b2(0xabf)]('click', async _0x14c39b => { const _0x3def57 = _0x2f23b2; _0x14c39b[_0x3def57(0x843)](); const _0x55b3f3 = _0x2653c6(_0x5d5463['id']); if (!_0x55b3f3) return; const _0x303854 = await _0x4b635a(_0x3def57(0x322) + _0x55b3f3[_0x3def57(0x420)] + _0x3def57(0x228)); if (_0x303854) { _0x5b3ee9(!![], _0x3def57(0x223) + _0x55b3f3[_0x3def57(0x420)] + _0x3def57(0x26c)); const _0x7d66af = [_0x3def57(0x7e3), _0x3def57(0xb7d), _0x3def57(0x2fd), _0x3def57(0x651), _0x3def57(0x35e), _0x3def57(0x2dc), 'footprints', _0x3def57(0x6f6)]; for (const _0x4c76a9 of _0x7d66af) { const _0x17e8b6 = _0x3def57(0x3ad) + _0x55b3f3['id'] + '_' + _0x4c76a9; await _0x2ab875(_0x17e8b6); } _0x5b3ee9(![]), _0x18c07b('【' + _0x55b3f3['name'] + _0x3def57(0x5d5)); } }), _0x3d8b2a[_0x2f23b2(0x594)](_0x29647a); }); } let _0x382597 = null, _0x2b4134 = null; function _0x420fdd() { const _0x3be83f = _0x3abecc, _0x255966 = new Date(), _0x2e1ba8 = document[_0x3be83f(0x392)]('snoop-home-time'), _0x11e8a4 = document[_0x3be83f(0x392)](_0x3be83f(0x245)), _0x1b9cd0 = document[_0x3be83f(0x392)](_0x3be83f(0x9b2)); _0x2e1ba8 && _0x11e8a4 && (_0x2e1ba8['textContent'] = _0x255966['toLocaleTimeString'](_0x3be83f(0x591), { 'hour': _0x3be83f(0x2f5), 'minute': _0x3be83f(0x2f5), 'hour12': ![] }), _0x11e8a4[_0x3be83f(0x324)] = _0x255966[_0x3be83f(0xbf7)](_0x3be83f(0x591), { 'month': _0x3be83f(0x80e), 'day': 'numeric', 'weekday': _0x3be83f(0x80e) })), _0x1b9cd0 && (_0x1b9cd0[_0x3be83f(0x2c9)] = _0x3be83f(0x6d8) + _0x255966[_0x3be83f(0x833)](_0x3be83f(0x591), { 'hour': _0x3be83f(0x2f5), 'minute': _0x3be83f(0x2f5), 'hour12': ![] }) + _0x3be83f(0x70b)); } function _0x1a26d4(_0x36f511) { const _0x1d3686 = _0x3abecc; if (_0x1d3686(0xa22) === _0x1d3686(0xbb7)) _0x5dee40[_0x1d3686(0x3f7)] = _0x35a264; else { _0x382597 = _0x36f511; const _0x590a3c = _0x2653c6(_0x36f511); if (!_0x590a3c) return; const _0x3e8eac = document[_0x1d3686(0x392)](_0x1d3686(0x652)), _0xd81db = document[_0x1d3686(0x392)]('snoop-home-clock'); if (_0xd81db) _0xd81db[_0x1d3686(0xb26)](); const _0x3c9af2 = document['getElementById'](_0x1d3686(0x34f)); if (_0x3c9af2) _0x3c9af2[_0x1d3686(0xb26)](); _0x3e8eac[_0x1d3686(0x256)](_0x1d3686(0x2af), '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'), _0x3e8eac[_0x1d3686(0x256)]('beforeend', '<div\x20id=\x22snoop-dock\x22></div>'), document['getElementById'](_0x1d3686(0x6eb))[_0x1d3686(0x324)] = '', _0x33376c(); if (_0x2b4134) clearInterval(_0x2b4134); _0x420fdd(), _0x2b4134 = setInterval(_0x420fdd, 0x2710), _0x2bd982(_0x1d3686(0xbab), 'snoopList'); } } function _0x33376c() { const _0x5e2b39 = _0x3abecc, _0x4cf95d = document[_0x5e2b39(0x392)]('snoop-app-container'), _0x1dae96 = document[_0x5e2b39(0x392)]('snoop-dock'); _0x4cf95d[_0x5e2b39(0x2c9)] = _0x5e2b39(0x297), _0x1dae96['innerHTML'] = ''; const _0x5a2401 = _0x4cf95d[_0x5e2b39(0x50b)](_0x5e2b39(0x4bc)), _0x16fc6e = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x5e2b39(0x950), 'area': _0x5e2b39(0x7fc) }, { 'id': 'abyss', 'name': _0x5e2b39(0x78b), 'svg': _0x5e2b39(0x547), 'area': 'dock' }, { 'id': _0x5e2b39(0x7e3), 'name': '相册', 'svg': _0x5e2b39(0x849), 'area': 'dock' }, { 'id': _0x5e2b39(0x6f6), 'name': '总结', 'svg': _0x5e2b39(0x5ec), 'area': 'dock' }, { 'id': _0x5e2b39(0x651), 'name': '备忘录', 'svg': _0x5e2b39(0xa2e), 'area': 'main' }, { 'id': 'bites', 'name': '外卖', 'svg': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'area': _0x5e2b39(0x96f) }, { 'id': _0x5e2b39(0x2dc), 'name': '购物', 'svg': _0x5e2b39(0x4c8), 'area': _0x5e2b39(0x96f) }, { 'id': _0x5e2b39(0x6c6), 'name': '足迹', 'svg': _0x5e2b39(0xb1c), 'area': 'main' }]; _0x16fc6e['forEach'](_0x2e826f => { const _0x304aa2 = _0x5e2b39; if (_0x304aa2(0x719) === _0x304aa2(0xa11)) _0x124f97[_0x304aa2(0x324)] = _0x2073b9['toLocaleTimeString'](_0x304aa2(0x591), { 'hour': _0x304aa2(0x2f5), 'minute': _0x304aa2(0x2f5), 'hour12': ![] }), _0x11b4b8['textContent'] = _0x287cc4[_0x304aa2(0xbf7)](_0x304aa2(0x591), { 'month': 'long', 'day': _0x304aa2(0x6bd), 'weekday': _0x304aa2(0x80e) }); else { const _0x581030 = document['createElement']('div'); _0x581030['className'] = _0x304aa2(0x9ab), _0x581030['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x2e826f[_0x304aa2(0x4b5)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x2e826f[_0x304aa2(0x420)] + _0x304aa2(0x5cf), _0x581030[_0x304aa2(0xabf)](_0x304aa2(0x4b9), () => _0x59e35b(_0x2e826f['id'], _0x2e826f['name'])); if (_0x2e826f['area'] === _0x304aa2(0x7fc)) { if (_0x304aa2(0x4be) !== _0x304aa2(0x633)) _0x1dae96[_0x304aa2(0x594)](_0x581030); else { if (_0x48d26f) _0x12c3ab(_0x45e60e); } } else _0x5a2401[_0x304aa2(0x594)](_0x581030); } }); } document[_0x3abecc(0x392)](_0x3abecc(0x9d3))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x2ef942 = _0x3abecc; _0x2b4134 && (clearInterval(_0x2b4134), _0x2b4134 = null); document[_0x2ef942(0x392)](_0x2ef942(0x5a3))[_0x2ef942(0xb56)]['display'] = _0x2ef942(0x3a4); const _0x2bc91b = document[_0x2ef942(0x392)](_0x2ef942(0x34f)); if (_0x2bc91b) _0x2bc91b[_0x2ef942(0xb26)](); const _0x48e53b = document['getElementById'](_0x2ef942(0x647)); if (_0x48e53b) _0x48e53b[_0x2ef942(0xb26)](); _0x2bd982('snoopList', _0x2ef942(0xbab)); }); async function _0x59e35b(_0x4d7cc2, _0x22c113, _0x10a57b = ![]) { const _0x17f9c3 = _0x3abecc; document[_0x17f9c3(0x392)](_0x17f9c3(0x7a6))[_0x17f9c3(0xb56)][_0x17f9c3(0x993)] = _0x17f9c3(0x3a4); const _0x4b4822 = document[_0x17f9c3(0x392)](_0x17f9c3(0x5a3)); _0x4b4822['innerHTML'] = _0x17f9c3(0x5f8), _0x4b4822[_0x17f9c3(0xb56)][_0x17f9c3(0x993)] = _0x17f9c3(0x366); const _0x4e2e9b = _0x17f9c3(0x3ad) + _0x382597 + '_' + _0x4d7cc2; try { if (_0x17f9c3(0x9af) !== 'IzAWt') { if (_0x4d7cc2 === _0x17f9c3(0x6f6)) { if (_0x17f9c3(0x1fd) === _0x17f9c3(0xb7c)) _0x19c06d('错误:\x20' + _0x59a81d[_0x17f9c3(0x542)]); else { const _0x1d55f3 = await _0x2ff045(_0x382597); _0x393e1a(_0x4d7cc2, _0x22c113, _0x1d55f3); return; } } let _0x20e58a = await _0x1ccaa1(_0x4e2e9b); if (_0x10a57b || !_0x20e58a) { console[_0x17f9c3(0xbf0)](_0x17f9c3(0xa50) + _0x4e2e9b + _0x17f9c3(0x86f)); let _0x4be3c1 = await _0x51c713(_0x4d7cc2, _0x382597, _0x20e58a); if (_0x4be3c1) { if ('EdunC' === _0x17f9c3(0x3aa)) { const _0x918b31 = _0x4aa521[_0x17f9c3(0xa19)] ? '\x20' + _0x14e675[_0x17f9c3(0xa19)] : ''; _0x5ced5b[_0x17f9c3(0x7e4)]('[' + _0x8f5a7d(_0x589ec) + _0x17f9c3(0x213) + _0x918b31); } else { const _0x3db938 = _0x4be3c1[_0x17f9c3(0xaab)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x4434f3 = _0x3db938 ? _0x3db938[0x1]['trim']() : _0x4be3c1[_0x17f9c3(0x8bb)](); let _0x21d5f9; try { _0x21d5f9 = JSON[_0x17f9c3(0x30c)](_0x4434f3); } catch (_0x322c32) { if ('sEcjZ' !== 'sEcjZ') _0x19cc5f[_0x17f9c3(0x737)] = null; else { _0x21d5f9 = _0x375bb7(_0x4434f3); if (!_0x21d5f9) throw new Error(_0x17f9c3(0x4a5)); } } let _0x4e9dc1; if (_0x10a57b && _0x20e58a) { if (_0x17f9c3(0x6d0) !== 'fzyUi') try { const _0x567400 = JSON['parse'](_0x20e58a); if (_0x4d7cc2 === _0x17f9c3(0xb7d)) _0x4e9dc1 = JSON['stringify'](_0x21d5f9), console[_0x17f9c3(0xbf0)]('Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。'); else { if (Array['isArray'](_0x567400) && Array['isArray'](_0x21d5f9)) { if (_0x17f9c3(0x61d) !== 'eguQK') _0x333bb9[_0x17f9c3(0x7ee)] = _0x7bc395[_0x17f9c3(0x442)][0x0]?.['id'] || null, _0x43303a(_0x5077a9[_0x17f9c3(0x7ee)]); else { const _0x28d639 = _0x567400[_0x17f9c3(0x2be)](_0x21d5f9); _0x4e9dc1 = JSON['stringify'](_0x28d639), console[_0x17f9c3(0xbf0)](_0x17f9c3(0xa3a)); } } else _0x4e9dc1 = JSON['stringify'](_0x21d5f9); } } catch (_0x3ffa32) { _0x4e9dc1 = JSON[_0x17f9c3(0x2bf)](_0x21d5f9); } else { if (_0x1b4ba2[_0x17f9c3(0x420)] !== 'AbortError') { _0x52b3bd[_0x17f9c3(0x5b1)](_0x17f9c3(0x9ad), _0x2a3709); const _0x58c2a7 = { 'role': _0x17f9c3(0x880), 'content': '错误:\x20' + _0x40ac4f[_0x17f9c3(0x542)], 'senderId': _0x2ee21b['id'], 'isOffline': _0x58789d }; _0x35e27b['conversationHistory'][_0x17f9c3(0x7e4)](_0x58c2a7), _0x57838b(); } return ![]; } } else _0x4e9dc1 = JSON[_0x17f9c3(0x2bf)](_0x21d5f9); await _0x1aa3a9(_0x4e2e9b, _0x4e9dc1), _0x20e58a = _0x4e9dc1; } } } else 'SeyoT' === _0x17f9c3(0x85a) ? console[_0x17f9c3(0xbf0)](_0x17f9c3(0x55e) + _0x4e2e9b) : _0x5c3d30['style'][_0x17f9c3(0x993)] = _0x17f9c3(0x3a4); _0x393e1a(_0x4d7cc2, _0x22c113, _0x20e58a); } else { const _0x2d88ab = _0x23b3ad[0x1][_0x17f9c3(0x8d5)](/\\"/g, '\x22')[_0x17f9c3(0x8d5)](/\\n/g, '\x0a')['trim'](); if (_0x2d88ab) _0x182bed[_0x17f9c3(0x7e4)](_0x2d88ab); } } catch (_0x5dea63) { console[_0x17f9c3(0x5b1)]('加载\x20' + _0x22c113 + _0x17f9c3(0x229), _0x5dea63), _0x4b4822[_0x17f9c3(0x2c9)] = _0x17f9c3(0x77d) + _0x5dea63['message'] + _0x17f9c3(0x2cc); } } function _0x393e1a(_0x2e8921, _0x49c370, _0x52fad5) { const _0x3ff68a = _0x3abecc, _0x474765 = _0x2653c6(_0x382597), _0x3f7427 = document[_0x3ff68a(0x392)]('snoop-app-view-container'); let _0x1f1b6b = ''; if (!_0x52fad5) _0x3ff68a(0x4eb) !== _0x3ff68a(0xb20) ? _0x1f1b6b = _0x3ff68a(0x327) : _0x444655(![]); else { if (_0x3ff68a(0xa73) !== 'mXLrO') { if (_0x2e8921 === 'summary') 'ngbnk' === _0x3ff68a(0xa04) ? _0x1f1b6b = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x52fad5 + _0x3ff68a(0x49e) : (_0x353b1f['value'] = _0x504ba6[_0x3ff68a(0x312)][_0x3ff68a(0x420)] || '', _0xad3674[_0x3ff68a(0x84e)] = _0x61f1ae[_0x3ff68a(0x312)][_0x3ff68a(0x58d)] || _0x50ce73, _0x1dbe26[_0x3ff68a(0x60e)] = _0x2122af[_0x3ff68a(0x312)]['persona'] || ''); else { if (_0x3ff68a(0x3e4) !== 'KPvRR') try { let _0x8bd656 = null; const _0x134102 = _0x52fad5['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x28ec6e = _0x134102 ? _0x134102[0x1] : _0x52fad5; _0x8bd656 = JSON[_0x3ff68a(0x30c)](_0x28ec6e); const _0x2442ec = _0x2653c6(_0x382597); switch (_0x2e8921) { case _0x3ff68a(0x7e3): _0x1f1b6b = _0x321d86(_0x8bd656); break; case _0x3ff68a(0xb7d): _0x1f1b6b = _0x2a394f(_0x8bd656, _0x2442ec[_0x3ff68a(0x420)]); break; case _0x3ff68a(0x2fd): _0x1f1b6b = _0x377d31(_0x8bd656); break; case _0x3ff68a(0x651): _0x1f1b6b = _0x130cd7(_0x8bd656); break; case _0x3ff68a(0x35e): _0x1f1b6b = _0x39319d(_0x8bd656); break; case _0x3ff68a(0x2dc): _0x1f1b6b = _0x2061a0(_0x8bd656); break; case _0x3ff68a(0x6c6): _0x1f1b6b = _0x2b144d(_0x8bd656); break; case 'summary': _0x1f1b6b = _0x3ff68a(0xb83) + _0x52fad5 + _0x3ff68a(0x856); break; default: _0x1f1b6b = _0x3ff68a(0x3d1) + JSON[_0x3ff68a(0x2bf)](_0x8bd656, null, 0x2) + '</pre>'; } } catch (_0x32d3eb) { console[_0x3ff68a(0x5b1)](_0x3ff68a(0x1ef), _0x32d3eb), _0x1f1b6b = '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>' + _0x52fad5 + _0x3ff68a(0xbd8); } else _0xe3203b[_0x3ff68a(0x420)] = _0x2fea1a, _0x262975[_0x3ff68a(0x22e)] = _0x3cbf6e, _0x55a66d[_0x3ff68a(0x8e7)] = _0x335e9b; } } else { const _0x271751 = _0x4aafd4[_0x3ff68a(0x442)][_0x3ff68a(0x69e)](_0x39e290 => _0x39e290['id'] === _0x5a7298); if (!_0x271751 || _0x271751[_0x3ff68a(0x875)] !== 'group') return; _0x12c900['getElementById']('group-settings-name')[_0x3ff68a(0x60e)] = _0x271751[_0x3ff68a(0x420)] || '', _0x5583b2(_0x3ff68a(0x645)), _0x2416a4[_0x3ff68a(0x392)]('group-settings-bind-user')[_0x3ff68a(0x60e)] = _0x271751[_0x3ff68a(0x22e)] || _0x4ca4de[_0x3ff68a(0x789)]; const _0x39bb6a = _0x24136a[_0x3ff68a(0x392)](_0x3ff68a(0x5fb)); _0x39bb6a[_0x3ff68a(0x2c9)] = '', _0x37956c[_0x3ff68a(0x285)][_0x3ff68a(0xb5e)](_0x345968 => { const _0xe613f7 = _0x3ff68a, _0x3535fe = _0x271751['linkedWorldBookIds']?.[_0xe613f7(0x21d)](_0x345968['id']), _0xcd917e = _0x47a190['createElement'](_0xe613f7(0x235)); _0xcd917e[_0xe613f7(0x2c9)] = _0xe613f7(0xb02) + _0x345968['id'] + '\x22\x20' + (_0x3535fe ? _0xe613f7(0x71e) : '') + '>\x20' + _0x345968[_0xe613f7(0x420)], _0x39bb6a[_0xe613f7(0x594)](_0xcd917e); }), _0x575a68(); const _0x2e7083 = _0xb9bda1[_0x3ff68a(0x392)](_0x3ff68a(0x8b9)), _0x47b54b = _0x4107ee[_0x3ff68a(0x392)]('group-bg-preview'); _0x47b54b[_0x3ff68a(0xb56)][_0x3ff68a(0xb85)] = '', _0x22ed45(_0x3ff68a(0x99c) + _0x5f1e55)[_0x3ff68a(0x54a)](_0xe99b1a => { const _0x5d7939 = _0x3ff68a; _0x2e7083[_0x5d7939(0x84e)] = _0xe99b1a ? _0x16b7bb[_0x5d7939(0x38c)](_0xe99b1a) : _0xc2027; }), _0x51c3c4(_0x3ff68a(0x6e7) + _0x35b970)['then'](_0x52f52d => { const _0x36cc9a = _0x3ff68a; if (_0x52f52d) _0x47b54b[_0x36cc9a(0xb56)][_0x36cc9a(0xb85)] = 'url(\x27' + _0x10ce0b[_0x36cc9a(0x38c)](_0x52f52d) + '\x27)'; }), _0x4c70cd(_0x3ff68a(0x79a), _0x3ff68a(0x4fb)); } } _0x3f7427['innerHTML'] = _0x3ff68a(0x1e0) + _0x49c370 + _0x3ff68a(0x684) + _0x474765[_0x3ff68a(0x420)] + '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x2e8921 === _0x3ff68a(0x6f6) ? _0x3ff68a(0xab7) : _0x3ff68a(0x2cf)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x1f1b6b + _0x3ff68a(0x7a1); const _0x4109e8 = _0x3f7427[_0x3ff68a(0x50b)](_0x3ff68a(0x30e)); _0x2e8921 === _0x3ff68a(0x6f6) && (_0x4109e8['style']['padding'] = '0'); document[_0x3ff68a(0x392)](_0x3ff68a(0x5f2))[_0x3ff68a(0xabf)](_0x3ff68a(0x4b9), () => { const _0x33dfd8 = _0x3ff68a; _0x3f7427['style'][_0x33dfd8(0x993)] = _0x33dfd8(0x3a4), document[_0x33dfd8(0x392)](_0x33dfd8(0x7a6))['style']['display'] = _0x33dfd8(0x366); }); if (_0x2e8921 === _0x3ff68a(0x6f6)) { if ('PqDka' === _0x3ff68a(0xbf9)) { _0x4a8f72[_0x3ff68a(0x2c9)] = _0x3ff68a(0x517); return; } else document['getElementById']('snoop-copy-summary-btn')['addEventListener'](_0x3ff68a(0x4b9), () => { const _0x19c14e = _0x3ff68a; if (_0x19c14e(0xa3f) !== 'fKEuC') _0xcccf0c[_0x19c14e(0x42c)]['add']('show-chat-view'); else { const _0xe4ffba = document['getElementById'](_0x19c14e(0x346)); _0xe4ffba[_0x19c14e(0x3ba)](), document['execCommand'](_0x19c14e(0xb2a)), _0x18c07b(_0x19c14e(0x42e)); } }); } else { if (_0x3ff68a(0x749) !== _0x3ff68a(0x8d8)) document[_0x3ff68a(0x392)](_0x3ff68a(0x556))[_0x3ff68a(0xabf)]('click', async () => { _0x59e35b(_0x2e8921, _0x49c370, !![]); }); else { _0x389e9d(_0x3ff68a(0x548)); return; } } _0x2e8921 === _0x3ff68a(0xb7d) && (_0x3ff68a(0x533) === _0x3ff68a(0xa16) ? _0x5afd4e[_0x3ff68a(0xabf)](_0x3ff68a(0x4b9), () => { const _0x573cd5 = _0x3ff68a; _0x499326(), _0xcb607d(_0x573cd5(0xb16), _0x573cd5(0xa74)); }) : _0x3f7427[_0x3ff68a(0x9b8)](_0x3ff68a(0x73f))[_0x3ff68a(0xb5e)](_0x19d4d2 => { const _0x73e481 = _0x3ff68a; _0x19d4d2[_0x73e481(0xabf)](_0x73e481(0x4b9), () => { const _0x201cda = _0x73e481; if (_0x201cda(0x78c) !== 'Voghp') { const _0x105205 = JSON[_0x201cda(0x30c)](_0x19d4d2[_0x201cda(0x641)][_0x201cda(0xbf0)]['replace'](/&quot;/g, '\x22')), _0x440a3b = _0x19d4d2['dataset'][_0x201cda(0x1f8)], _0x45ded2 = _0x19d4d2[_0x201cda(0x641)]['characterName']; _0x3cc1d5(_0x440a3b, _0x45ded2, _0x105205); } else { const _0x43a834 = _0x33d5ce[_0x201cda(0x38c)](_0x480529); _0x189613[_0x201cda(0x84e)] = _0x43a834, _0x6bd85d[_0x201cda(0x8df)] = () => { const _0xada15a = _0x201cda; _0x4fdc58[_0xada15a(0x298)](_0x43a834); }; } }); })); } function _0x375bb7(_0x332468) { const _0x10c7c3 = _0x3abecc; if (_0x10c7c3(0x4e4) !== _0x10c7c3(0x4e4)) _0x1cca10(); else { if (!_0x332468 || typeof _0x332468 !== _0x10c7c3(0x41d)) return null; const _0x1f37b0 = _0x332468[_0x10c7c3(0x8bb)]()['split']('\x0a'), _0x27aba4 = []; let _0x1ded47 = null; for (const _0x5b6776 of _0x1f37b0) { const _0x12d41a = _0x5b6776[_0x10c7c3(0x8bb)](); if (_0x12d41a[_0x10c7c3(0x629)]('-\x20')) { _0x1ded47 && _0x27aba4[_0x10c7c3(0x7e4)](_0x1ded47); _0x1ded47 = {}; const _0x269e8c = _0x12d41a['substring'](0x2), _0x315cd0 = _0x269e8c[_0x10c7c3(0x686)](/:\s(.+)/); if (_0x315cd0['length'] > 0x1) { if (_0x10c7c3(0x95b) !== 'MLfvf') _0x40cd84[_0x10c7c3(0x7e4)](_0x4d1f7c[_0x5e5899][_0x10c7c3(0x8bb)]()), _0x5a5f90++; else { const _0x2efcf6 = _0x315cd0[0x0][_0x10c7c3(0x8bb)](), _0x54790b = _0x315cd0[0x1][_0x10c7c3(0x8bb)]()[_0x10c7c3(0x8d5)](/^"|"$/g, ''); _0x1ded47[_0x2efcf6] = _0x54790b; } } } else { if (_0x1ded47 && _0x12d41a) { if (_0x10c7c3(0x460) !== _0x10c7c3(0x460)) _0xaaef10(_0x427045[_0x10c7c3(0xaff)]); else { const _0x38ad1d = _0x12d41a[_0x10c7c3(0x686)](/:\s(.+)/); if (_0x38ad1d[_0x10c7c3(0x6f2)] > 0x1) { const _0x18897d = _0x38ad1d[0x0][_0x10c7c3(0x8bb)](), _0xe3c123 = _0x38ad1d[0x1][_0x10c7c3(0x8bb)]()['replace'](/^"|"$/g, ''); _0x1ded47[_0x18897d] = _0xe3c123; } } } } } if (_0x1ded47) { if ('OKCuJ' !== 'OKCuJ') { const _0x18e25f = _0x23258f['transaction'](_0x2d8d48, _0x10c7c3(0xae0)), _0x5ba944 = _0x18e25f[_0x10c7c3(0x4c5)](_0x33fcb9), _0x1a3ee2 = _0x5ba944['put']({ 'id': _0x514aef, 'data': _0x3522fa }); _0x1a3ee2[_0x10c7c3(0x817)] = () => _0x25df4a(), _0x1a3ee2[_0x10c7c3(0x677)] = () => _0x531bc7(_0x1a3ee2[_0x10c7c3(0x5b1)]); } else _0x27aba4['push'](_0x1ded47); } return _0x27aba4[_0x10c7c3(0x6f2)] > 0x0 ? _0x27aba4 : null; } } function _0x3cc1d5(_0x3d34c4, _0x27d229, _0x3bc416) { const _0x2325ee = _0x3abecc, _0x2237b6 = document[_0x2325ee(0x50b)]('#snoop-app-view-container\x20.snoop-app-content'), _0x554cf4 = document[_0x2325ee(0x50b)](_0x2325ee(0x935)); let _0x390e09 = '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>'; !_0x3bc416 || _0x3bc416[_0x2325ee(0x6f2)] === 0x0 ? _0x390e09 += _0x2325ee(0xb11) : _0x3bc416['forEach'](_0x13a8d9 => { const _0x3c5d23 = _0x2325ee, _0x161810 = _0x13a8d9['sender'] === _0x3c5d23(0xc2e), _0x4d32a3 = _0x161810 ? _0x27d229 ? _0x27d229[0x0] : '?' : _0x3d34c4 ? _0x3d34c4[0x0] : '?'; _0x390e09 += _0x3c5d23(0x978) + (_0x161810 ? _0x3c5d23(0x5c3) : 'ai') + _0x3c5d23(0x859) + (!_0x161810 ? _0x3c5d23(0x5a6) + _0x4d32a3 + '</div>' : '') + _0x3c5d23(0x503) + (_0x161810 ? _0x3c5d23(0x5c3) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x13a8d9[_0x3c5d23(0xa19)] + _0x3c5d23(0xaa1) + (_0x161810 ? _0x3c5d23(0x5a6) + _0x4d32a3 + '</div>' : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; }), _0x390e09 += _0x2325ee(0x892), _0x2237b6[_0x2325ee(0x2c9)] = _0x390e09, _0x2237b6[_0x2325ee(0xbd7)] = _0x2237b6[_0x2325ee(0x220)], _0x554cf4[_0x2325ee(0x2c9)] = _0x2325ee(0xbee) + _0x3d34c4 + _0x2325ee(0x538), document[_0x2325ee(0x392)]('snoop-log-back-btn')[_0x2325ee(0xabf)]('click', () => { const _0x4ffd1f = _0x2325ee; _0x59e35b(_0x4ffd1f(0xb7d), '聊天'); }), !document[_0x2325ee(0x392)](_0x2325ee(0x7d0)) && document[_0x2325ee(0x3df)]['insertAdjacentHTML']('beforeend', _0x2325ee(0x8e9)); } function _0x375bb7(_0x2d641c) { const _0x300f81 = _0x3abecc; if (!_0x2d641c || typeof _0x2d641c !== 'string') return null; const _0x22a9d2 = _0x2d641c[_0x300f81(0x8bb)]()['split']('\x0a'), _0x28002c = []; let _0x4ca520 = null; for (const _0x387104 of _0x22a9d2) { const _0x3205bd = _0x387104['trim'](); if (_0x3205bd[_0x300f81(0x629)]('-\x20')) { if (_0x300f81(0x676) === _0x300f81(0x676)) { _0x4ca520 && (_0x300f81(0x2a1) === 'cTvJf' ? _0x28002c['push'](_0x4ca520) : _0xf6b604 = _0x29ca81[_0x300f81(0x2bf)](_0x221c76)); _0x4ca520 = {}; const _0x49cef6 = _0x3205bd[_0x300f81(0x58c)](0x2), _0x332131 = _0x49cef6['split'](/:\s(.+)/); if (_0x332131[_0x300f81(0x6f2)] > 0x1) { if (_0x300f81(0xa76) === _0x300f81(0xa76)) { const _0x2ba474 = _0x332131[0x0][_0x300f81(0x8bb)](), _0x48af86 = _0x332131[0x1][_0x300f81(0x8bb)]()['replace'](/^"|"$/g, ''); _0x4ca520[_0x2ba474] = _0x48af86; } else _0x3833ed(_0x44eb1e, _0x40b74c[_0x300f81(0x896)]); } } else _0x346aa7[_0x300f81(0x42c)][_0x300f81(0x6bc)]('show'), _0x23695d[_0x300f81(0x42c)][_0x300f81(0xb2d)]('show') && (_0x165d54[_0x300f81(0xbd7)] = _0x46ab48[_0x300f81(0x220)]); } else { if (_0x4ca520 && _0x3205bd) { if (_0x300f81(0xbdc) !== _0x300f81(0x89e)) { const _0x31e44d = _0x3205bd['split'](/:\s(.+)/); if (_0x31e44d['length'] > 0x1) { if (_0x300f81(0xa1a) === _0x300f81(0xa4f)) { _0xb0cbf7('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } else { const _0x5d02d5 = _0x31e44d[0x0]['trim'](), _0x2a04f8 = _0x31e44d[0x1][_0x300f81(0x8bb)]()[_0x300f81(0x8d5)](/^"|"$/g, ''); _0x4ca520[_0x5d02d5] = _0x2a04f8; } } } else _0x2c1af8[_0x300f81(0x5b1)](_0x300f81(0x59e), _0x489bb9); } } } if (_0x4ca520) { if (_0x300f81(0x2e6) !== _0x300f81(0x2e6)) { const _0x5e6806 = _0x34adec(_0x3ea52c[_0x300f81(0x2d8)]())[_0x300f81(0xb98)](0x2, '0'), _0x3ffefa = _0x28493f(_0x4c571a[_0x300f81(0x618)]())[_0x300f81(0xb98)](0x2, '0'); _0x2ee12d[_0x300f81(0x324)] = _0x5e6806 + ':' + _0x3ffefa; const _0x2c5c63 = _0x5a19b0[_0x300f81(0x49d)]() + 0x1, _0x2a2675 = _0x5e2003[_0x300f81(0xa7a)](), _0x9c581e = [_0x300f81(0x227), _0x300f81(0x3c0), '星期二', _0x300f81(0xb18), _0x300f81(0x6dc), _0x300f81(0x720), '星期六'][_0x150c30['getDay']()]; _0x560a80[_0x300f81(0x324)] = _0x2c5c63 + '月' + _0x2a2675 + '日\x20' + _0x9c581e; } else _0x28002c['push'](_0x4ca520); } return _0x28002c[_0x300f81(0x6f2)] > 0x0 ? _0x28002c : null; } async function _0x4efa04(_0x34ebdb) { const _0x4715c0 = _0x3abecc; if (_0x4715c0(0x6d4) === _0x4715c0(0x6d4)) { if (!_0x34ebdb) return ''; const _0x1a2d46 = [{ 'id': _0x4715c0(0x7e3), 'name': '相册' }, { 'id': 'whispers', 'name': _0x4715c0(0x8c0) }, { 'id': 'abyss', 'name': _0x4715c0(0xa33) }, { 'id': _0x4715c0(0x651), 'name': _0x4715c0(0x955) }, { 'id': _0x4715c0(0x35e), 'name': '外卖订单' }, { 'id': _0x4715c0(0x2dc), 'name': _0x4715c0(0x981) }, { 'id': _0x4715c0(0x6c6), 'name': _0x4715c0(0x20f) }]; let _0x37e589 = ''; for (const _0x2ef64c of _0x1a2d46) { try { const _0xe3494e = _0x4715c0(0x3ad) + _0x34ebdb + '_' + _0x2ef64c['id'], _0x57191d = await _0x1ccaa1(_0xe3494e); if (_0x57191d) { const _0x34a3a7 = _0x57191d[_0x4715c0(0xaab)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x30fe98 = _0x34a3a7 ? _0x34a3a7[0x1]['trim']() : _0x57191d['trim'](); if (!_0x30fe98) continue; let _0x32cb9e = null; try { if (_0x4715c0(0x25b) !== _0x4715c0(0x211)) _0x32cb9e = JSON[_0x4715c0(0x30c)](_0x30fe98); else { _0x15667b = _0x30e538(_0x134416); if (!_0x4dcbda) throw new _0x90a034('YAML翻译机也无法理解这段梦话。'); _0x379e77[_0x4715c0(0xbf0)]('兼容模式成功，已将\x20' + _0x40c200['id'] + _0x4715c0(0x87a)); } } catch (_0x3b26bf) { console[_0x4715c0(0x836)](_0x4715c0(0x9c2) + _0x2ef64c['id'] + _0x4715c0(0xa86), _0x3b26bf[_0x4715c0(0x542)]); try { if (_0x4715c0(0x929) !== _0x4715c0(0x8e4)) { _0x32cb9e = _0x375bb7(_0x30fe98); if (!_0x32cb9e) throw new Error(_0x4715c0(0x491)); console[_0x4715c0(0xbf0)](_0x4715c0(0x734) + _0x2ef64c['id'] + _0x4715c0(0x87a)); } else _0x4cbc2e['style'][_0x4715c0(0xb85)] = _0x4715c0(0x24b) + _0xa932e7 + '\x27)'; } catch (_0x51280d) { throw _0x3b26bf; } } if (Array[_0x4715c0(0x74a)](_0x32cb9e) && _0x32cb9e[_0x4715c0(0x6f2)] > 0x0) { _0x37e589 === '' && (_0x37e589 += _0x4715c0(0x96b)); _0x37e589 += _0x4715c0(0x375) + _0x2ef64c[_0x4715c0(0x420)] + '\x0a'; switch (_0x2ef64c['id']) { case _0x4715c0(0x7e3): _0x32cb9e['forEach'](_0x262664 => { const _0x5ee50e = _0x4715c0; _0x37e589 += _0x5ee50e(0x3f4) + _0x262664[_0x5ee50e(0x9b7)] + _0x5ee50e(0x5f5); }); break; case _0x4715c0(0xb7d): _0x32cb9e[_0x4715c0(0xb5e)](_0x2b2e3b => { const _0x5e59f6 = _0x4715c0; _0x5e59f6(0x6e2) === _0x5e59f6(0x6e2) ? (_0x37e589 += _0x5e59f6(0x774) + _0x2b2e3b[_0x5e59f6(0x58e)] + _0x5e59f6(0xb82) + _0x2b2e3b[_0x5e59f6(0x642)] + _0x5e59f6(0x5f5), _0x2b2e3b[_0x5e59f6(0xbf0)] && Array['isArray'](_0x2b2e3b[_0x5e59f6(0xbf0)]) && (_0x37e589 += '\x20\x20具体对话如下：\x0a', _0x2b2e3b[_0x5e59f6(0xbf0)][_0x5e59f6(0xb5e)](_0x4b55b7 => { const _0x196e1c = _0x5e59f6, _0xe718c8 = _0x4b55b7['sender'] === _0x196e1c(0xc2e) ? '你' : _0x2b2e3b[_0x196e1c(0x58e)]; _0x37e589 += '\x20\x20\x20\x20-\x20' + _0xe718c8 + ':\x20' + _0x4b55b7[_0x196e1c(0xa19)] + '\x0a'; }))) : (_0xf42f32(_0x45b40e), _0x5ebda1['value'] = '', _0x26afba(_0x4af7a1, 0x64)); }); break; case _0x4715c0(0x2fd): _0x32cb9e[_0x4715c0(0xb5e)](_0x411af0 => { const _0xe3f969 = _0x4715c0; _0x37e589 += _0xe3f969(0xb69) + _0x411af0[_0xe3f969(0x410)] + '”。\x0a'; }); break; case _0x4715c0(0x651): _0x32cb9e[_0x4715c0(0xb5e)](_0xdce4aa => { const _0x3ebb49 = _0x4715c0; _0x37e589 += _0x3ebb49(0x694) + _0xdce4aa[_0x3ebb49(0x54d)] + '”的笔记，内容是：“' + _0xdce4aa[_0x3ebb49(0xa19)][_0x3ebb49(0x8d5)](/\n/g, '\x20') + '”。\x0a'; }); break; case _0x4715c0(0x35e): _0x32cb9e[_0x4715c0(0xb5e)](_0x3338aa => { const _0x396a8c = _0x4715c0; _0x396a8c(0x8e8) !== _0x396a8c(0xa17) ? _0x37e589 += '-\x20你点过一份外卖：“' + _0x3338aa[_0x396a8c(0xac3)] + _0x396a8c(0x29d) + _0x3338aa[_0x396a8c(0x732)]['join']('、') + '。\x0a' : _0x5059c5['click'](); }); break; case 'wants': _0x32cb9e['forEach'](_0x1db132 => { const _0x5ccf6c = _0x4715c0; _0x5ccf6c(0x45c) === 'ZeTje' ? (_0x247acb(![]), _0x4ff75a[_0x5ccf6c(0x524)] = ![]) : _0x37e589 += _0x5ccf6c(0x7f9) + _0x1db132[_0x5ccf6c(0x5f0)] + _0x5ccf6c(0x814) + _0x1db132['item_name'] + '”。\x0a'; }); break; case _0x4715c0(0x6c6): _0x32cb9e[_0x4715c0(0xb5e)](_0x437f04 => { const _0x1bb3b6 = _0x4715c0; 'qAoZu' === _0x1bb3b6(0x497) ? _0x37e589 += _0x1bb3b6(0x5ee) + _0x437f04[_0x1bb3b6(0xa56)] + _0x1bb3b6(0x919) + _0x437f04['activity_description'] + '”。\x0a' : (_0x356c25(_0x2da05e, { 'force': !![], 'delayMs': _0x276310 }), _0x426437 += 0x1f4); }); break; default: _0x32cb9e[_0x4715c0(0xb5e)](_0xde40b9 => { const _0x3dcc1f = _0x4715c0; _0x37e589 += '-\x20' + JSON[_0x3dcc1f(0x2bf)](_0xde40b9) + '\x0a'; }); break; } } } } catch (_0x500e0c) { if (_0x4715c0(0x79e) !== _0x4715c0(0x79e)) { _0xef022b('请先输入\x20API\x20接口地址和密钥。'); return; } else console[_0x4715c0(0x5b1)](_0x4715c0(0xa0c) + _0x2ef64c['id'] + _0x4715c0(0x21a), _0x500e0c); } } return _0x37e589; } else { if (_0x5073d4) _0x3f1a1e['style'][_0x4715c0(0xb85)] = _0x5de5fd['value'] ? _0x4715c0(0x24b) + _0x4fe15a[_0x4715c0(0x60e)] + '\x27)' : ''; } } function _0x321d86(_0x47db48) { const _0x320117 = _0x3abecc; if (!Array[_0x320117(0x74a)](_0x47db48)) return '<p>格式错误</p>'; if (_0x47db48[_0x320117(0x6f2)] === 0x0) return _0x320117(0x515); return _0x320117(0xbb1) + _0x47db48[_0x320117(0x5e9)]((_0x116d3e, _0x50264c) => _0x320117(0x943) + (_0x50264c < _0x47db48['length'] - 0x1 ? _0x320117(0x526) : '') + _0x320117(0x3d2) + (_0x116d3e[_0x320117(0x9b7)] || _0x320117(0x1dc)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x116d3e[_0x320117(0x518)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x320117(0x52b)]('') + _0x320117(0x892); } function _0x2a394f(_0xd19005, _0x840130) { const _0x3ea6b6 = _0x3abecc; if (_0x3ea6b6(0xbd9) === _0x3ea6b6(0x3b1)) { const _0x35134f = _0x533ba2['createElement'](_0x3ea6b6(0x9b6)); _0x35134f[_0x3ea6b6(0x60e)] = _0x1f584b['id'], _0x35134f[_0x3ea6b6(0x324)] = _0x588ae3[_0x3ea6b6(0x420)], _0xaa0a84[_0x3ea6b6(0x594)](_0x35134f); } else { if (!Array['isArray'](_0xd19005) || _0xd19005[_0x3ea6b6(0x6f2)] === 0x0) return _0x3ea6b6(0x401); return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0xd19005[_0x3ea6b6(0x5e9)]((_0x17f979, _0x157345) => { const _0x4d75ce = _0x3ea6b6; if (_0x4d75ce(0x88f) === _0x4d75ce(0x88f)) { const _0x313903 = JSON[_0x4d75ce(0x2bf)](_0x17f979[_0x4d75ce(0xbf0)] || [])[_0x4d75ce(0x8d5)](/'/g, _0x4d75ce(0xb9d))['replace'](/"/g, _0x4d75ce(0x797)), _0x46719a = _0x17f979[_0x4d75ce(0x58e)] || _0x4d75ce(0x68e); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x157345 < _0xd19005[_0x4d75ce(0x6f2)] - 0x1 ? _0x4d75ce(0x526) : '') + _0x4d75ce(0x439) + _0x313903 + _0x4d75ce(0x975) + _0x46719a + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x840130 + _0x4d75ce(0x576) + _0x46719a[_0x4d75ce(0x79b)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x46719a + _0x4d75ce(0x305) + (_0x17f979[_0x4d75ce(0x642)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; } else { if (_0x1f0228 === null) return; _0x98f642['conversationHistory'][_0x4d75ce(0x872)](_0x5d4447, 0x1), _0x5dbb42(), _0x4706f1(), _0x418ee4(); } })['join']('') + _0x3ea6b6(0x892); } } function _0x377d31(_0x30f4ab) { const _0x2e8a14 = _0x3abecc; if (_0x2e8a14(0x30f) !== 'kiAXH') _0x3aaca8(_0x2e8a14(0x449) + _0x5395e6[_0x2e8a14(0x542)]); else { if (!Array[_0x2e8a14(0x74a)](_0x30f4ab)) return _0x2e8a14(0x6b2); if (_0x30f4ab['length'] === 0x0) return _0x2e8a14(0x6df); return _0x30f4ab['sort']((_0x56d2d7, _0x4f6a38) => new Date(_0x4f6a38['timestamp']) - new Date(_0x56d2d7[_0x2e8a14(0x518)])), '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x30f4ab[_0x2e8a14(0x5e9)]((_0x4cc8b0, _0x307e72) => _0x2e8a14(0x752) + (_0x307e72 < _0x30f4ab[_0x2e8a14(0x6f2)] - 0x1 ? _0x2e8a14(0x526) : '') + _0x2e8a14(0x407) + (_0x4cc8b0['query'] || _0x2e8a14(0x33b)) + _0x2e8a14(0xb45) + (_0x4cc8b0['result_page_content'] || _0x2e8a14(0x57f)) + _0x2e8a14(0x960) + (_0x4cc8b0['timestamp'] || '') + _0x2e8a14(0x912))['join']('') + _0x2e8a14(0x892); } } function _0x130cd7(_0x54f184) { const _0xce34a1 = _0x3abecc; if (_0xce34a1(0x2ae) === 'jSZZw') { _0x279644[_0xce34a1(0x60e)] = ''; return; } else { if (!Array[_0xce34a1(0x74a)](_0x54f184)) return '<p>格式错误</p>'; if (_0x54f184['length'] === 0x0) return _0xce34a1(0x994); return _0x54f184[_0xce34a1(0x474)]((_0x2abedf, _0x2d27c6) => new Date(_0x2d27c6[_0xce34a1(0x9ee)]) - new Date(_0x2abedf['last_edited'])), _0x54f184[_0xce34a1(0x5e9)](_0x2bebf7 => _0xce34a1(0x603) + (_0x2bebf7[_0xce34a1(0x54d)] || _0xce34a1(0x830)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>' + (_0x2bebf7['content'] || '') + _0xce34a1(0x637) + (_0x2bebf7['last_edited'] || '') + _0xce34a1(0x338))[_0xce34a1(0x52b)](''); } } function _0x39319d(_0x147879) { const _0x46547c = _0x3abecc; if ('WWSuy' !== _0x46547c(0x89b)) { const _0x11ba3e = _0x4184c7[_0x46547c(0x442)]['find'](_0x405f67 => _0x405f67[_0x46547c(0x875)] === _0x46547c(0xa4e) && _0x405f67[_0x46547c(0xa2a)][_0x46547c(0x21d)](_0x41f699['id'])), _0xd368dd = _0x14ec3a[_0x46547c(0x89d)][_0x46547c(0x69e)](_0x121b03 => _0x121b03['id'] === (_0x11ba3e?.[_0x46547c(0x22e)] || _0x481b0a[_0x46547c(0x789)])) || { 'id': _0x46547c(0x7d4), 'name': '你' }; let _0x5d88e6 = ''; return _0x2a1c5f['linkedWorldBookIds'] && _0x44b2fa[_0x46547c(0x25d)]['length'] > 0x0 && (_0x5d88e6 = _0x1764a0['linkedWorldBookIds']['map'](_0xcd23e => _0x4d305b[_0x46547c(0x285)][_0x46547c(0x69e)](_0x232b48 => _0x232b48['id'] === _0xcd23e))[_0x46547c(0x742)](_0x14ff49)[_0x46547c(0x5e9)](_0x4ac147 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x4ac147[_0x46547c(0x420)] + ']:\x20' + _0x4ac147['content'])[_0x46547c(0x52b)]('')), _0x46547c(0x2c5) + _0x3141f0['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x448820[_0x46547c(0x420)] + '\x0a\x20\x20\x20\x20人设:\x20' + _0x545f31['persona'] + _0x46547c(0x516) + _0xd368dd[_0x46547c(0x420)] + _0x46547c(0x876) + _0xd368dd['id'] + ')\x0a' + _0x5d88e6; } else { if (!Array[_0x46547c(0x74a)](_0x147879)) return _0x46547c(0x6b2); if (_0x147879[_0x46547c(0x6f2)] === 0x0) return _0x46547c(0x51b); return _0x147879['sort']((_0x44eabf, _0x15fc6e) => new Date(_0x15fc6e[_0x46547c(0x518)]) - new Date(_0x44eabf[_0x46547c(0x518)])), _0x147879[_0x46547c(0x5e9)](_0x23d8d2 => { const _0x1d48e8 = _0x46547c, _0xf92aa6 = (_0x23d8d2[_0x1d48e8(0x732)] || [])[_0x1d48e8(0x5e9)](_0x136a20 => _0x1d48e8(0x1fb) + _0x136a20 + _0x1d48e8(0x71a))['join'](''); return _0x1d48e8(0x2f4) + (_0x23d8d2[_0x1d48e8(0xac3)] || _0x1d48e8(0xbbb)) + _0x1d48e8(0x7bb) + (_0x23d8d2[_0x1d48e8(0x518)] || '') + _0x1d48e8(0x391) + (_0x23d8d2[_0x1d48e8(0x86d)] || _0x1d48e8(0x80a)) + _0x1d48e8(0xb50) + _0xf92aa6 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x23d8d2[_0x1d48e8(0x8d1)] || 0x0)[_0x1d48e8(0x8c5)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; })[_0x46547c(0x52b)](''); } } function _0x2061a0(_0x9eb42e) { const _0x584720 = _0x3abecc; if (!Array[_0x584720(0x74a)](_0x9eb42e)) return _0x584720(0x6b2); if (_0x9eb42e[_0x584720(0x6f2)] === 0x0) return _0x584720(0x271); return _0x9eb42e[_0x584720(0x474)]((_0x5e838f, _0x48d97d) => new Date(_0x48d97d['timestamp']) - new Date(_0x5e838f[_0x584720(0x518)])), _0x9eb42e[_0x584720(0x5e9)](_0x3a39f8 => _0x584720(0x46c) + (_0x3a39f8[_0x584720(0x5f0)] || _0x584720(0x284)) + _0x584720(0x69f) + (_0x3a39f8[_0x584720(0x518)] || '') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x3a39f8[_0x584720(0xb53)] || _0x584720(0x3f8)) + _0x584720(0x2b4) + (_0x3a39f8['cost'] || 0x0)['toFixed'](0x2) + _0x584720(0x471))['join'](''); } function _0x2b144d(_0x39a1b3) { const _0x513635 = _0x3abecc; if (!Array['isArray'](_0x39a1b3)) return _0x513635(0x6b2); if (_0x39a1b3[_0x513635(0x6f2)] === 0x0) return _0x513635(0xc00); return _0x39a1b3[_0x513635(0x474)]((_0x2d4467, _0x4d5a5e) => new Date(_0x4d5a5e[_0x513635(0x518)]) - new Date(_0x2d4467['timestamp'])), _0x513635(0xb4e) + _0x39a1b3['map'](_0x8d6e6a => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x8d6e6a[_0x513635(0xa56)] || _0x513635(0xa61)) + _0x513635(0x801) + (_0x8d6e6a[_0x513635(0x6c1)] || '') + _0x513635(0xb61) + (_0x8d6e6a[_0x513635(0x518)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')['join']('') + '</div>'; } async function _0x51c713(_0x1f029, _0x4130ae, _0x19bd95 = null) { const _0x287083 = _0x3abecc; if ('wEeFA' !== _0x287083(0x2fe)) { const _0x9dfa53 = _0x2653c6(_0x4130ae), _0x5db9d7 = _0x2e4b8c[_0x287083(0x442)][_0x287083(0x69e)](_0x404b81 => _0x404b81['type'] === _0x287083(0xa4e) && _0x404b81[_0x287083(0xa2a)][_0x287083(0x21d)](_0x4130ae)), _0x4e3852 = _0x23edb1(_0x5db9d7?.['id'] || _0x2e4b8c[_0x287083(0x7ee)]); if (!_0x9dfa53) throw new Error(_0x287083(0x889)); const { omniText: _0x1e506b } = _0x42b275(_0x4130ae); let _0x1faee4 = ''; const _0x3b82fe = new Date(); let _0x2db159 = null, _0x75ef55 = '无'; if (_0x19bd95) try { if ('nxnZw' !== 'nxnZw') _0x22f741 += _0x287083(0x8c1) + _0x5849f8[_0x287083(0x50e)] + '\x20-\x20' + _0x5a73e3['artist'] + ']'; else { let _0x245dae; try { _0x245dae = JSON[_0x287083(0x30c)](_0x19bd95); } catch (_0x308237) { _0x245dae = _0x375bb7(_0x19bd95); } if (Array[_0x287083(0x74a)](_0x245dae) && _0x245dae['length'] > 0x0) { if (_0x287083(0x695) !== _0x287083(0x96d)) { const _0x324983 = _0x245dae[_0x287083(0x5e9)](_0x5b1624 => new Date(_0x5b1624[_0x287083(0x518)] || _0x5b1624[_0x287083(0x9ee)]))[_0x287083(0x742)](_0x482d1c => !isNaN(_0x482d1c)); _0x324983['length'] > 0x0 && (_0x2db159 = new Date(Math['max']['apply'](null, _0x324983)), _0x75ef55 = _0x2db159[_0x287083(0x408)](_0x287083(0x591), { 'dateStyle': _0x287083(0x9cd), 'timeStyle': _0x287083(0x303) })); } else _0x213c1e[_0x287083(0x285)] = _0x95f585[_0x287083(0x285)][_0x287083(0x742)](_0x1d6d95 => _0x1d6d95['id'] !== _0x329e11), _0x104df1[_0x287083(0x404)]['forEach'](_0x5bafb6 => { const _0x2f2fce = _0x287083; _0x5bafb6[_0x2f2fce(0x25d)] && (_0x5bafb6[_0x2f2fce(0x25d)] = _0x5bafb6['linkedWorldBookIds']['filter'](_0x4ff996 => _0x4ff996 !== _0x1213a1)); }), _0x495d42(), _0x39bab2(_0x287083(0x937)), _0x13e89f(), _0x1fc42c(_0x287083(0x69b), 'worldBookEditor'); } } } catch (_0x1f990a) { if (_0x287083(0x498) === _0x287083(0x6b7)) { const _0x4d967e = _0x320580[_0x287083(0x92e)](_0x287083(0x63a)); _0x4d967e[_0x287083(0x894)] = _0x287083(0x55c), _0x4d967e[_0x287083(0xb56)][_0x287083(0x47b)] = _0x287083(0x612), _0x4d967e['style'][_0x287083(0x9ff)] = 'stretch', _0x4d967e['style'][_0x287083(0x4df)] = _0x287083(0x36c), _0x4d967e[_0x287083(0xb56)][_0x287083(0xba2)] = '0'; const _0x120072 = _0x1d75fe[_0x4d54d5[_0x287083(0x2f1)]] || _0xdb3769['默认'], _0x25eb51 = _0x287083(0x7be) + _0x120072 + _0x287083(0x95c), _0x5eb016 = _0x287083(0xb5c) + _0x25eb51 + _0x287083(0x986) + _0x179ab2['description'] + _0x287083(0x252) + (_0x476104[_0x287083(0x2f1)] || _0x287083(0x7d2)) + _0x287083(0x8fe) + (_0x3396b3[_0x287083(0xb86)] || 0x0)[_0x287083(0x8c5)](0x2) + _0x287083(0xbba); let _0x4d67de = ''; if (_0x257597['review'] && _0x4e7317[_0x287083(0x3d8)][_0x287083(0x5a8)]) { const _0x116277 = _0x10bccb(_0x2c82d6[_0x287083(0x3d8)][_0x287083(0x5a8)]); _0x116277 && (_0x4d67de = _0x287083(0x670) + _0x116277[_0x287083(0x58d)] + _0x287083(0x3c1) + _0x116277[_0x287083(0x420)] + _0x287083(0x8f2) + _0x477e37[_0x287083(0x3d8)]['text'] + _0x287083(0x418)); } _0x4d967e[_0x287083(0x2c9)] = _0x5eb016 + _0x4d67de, _0x1c5a51['appendChild'](_0x4d967e); } else console[_0x287083(0x836)]('无法解析旧的视奸内容来获取时间戳。', _0x1f990a); } const _0x2257f9 = _0x367a29(_0x4130ae); _0x1faee4 = _0x287083(0xaeb), _0x1faee4 += _0x287083(0x4ed) + _0x3b82fe[_0x287083(0x408)]('zh-CN', { 'dateStyle': _0x287083(0x567), 'timeStyle': _0x287083(0x303) }) + '\x0a'; if (_0x2257f9) { const _0x53eb99 = new Date(_0x2257f9[_0x287083(0x518)]), _0x27e004 = _0x593dd0(_0x53eb99); _0x1faee4 += _0x287083(0x3fa) + _0x27e004 + '\x0a'; const _0xc8b645 = _0x3b82fe[_0x287083(0x97c)](), _0xe5a767 = _0x53eb99[_0x287083(0x97c)](), _0x341054 = new Date(); _0x341054['setDate'](_0x3b82fe[_0x287083(0xa7a)]() - 0x1); const _0x2645b4 = _0x341054[_0x287083(0x97c)](); if (_0xc8b645 === _0xe5a767) { const _0x230009 = (_0x3b82fe - _0x53eb99) / (0x3e8 * 0x3c); _0x1faee4 += _0x287083(0x64b); } else { if (_0x2645b4 === _0xe5a767) _0x287083(0xc24) === _0x287083(0x989) ? _0x5dc250[_0x287083(0x24e)]() : _0x1faee4 += _0x287083(0x221); else { const _0x4d5d70 = Math[_0x287083(0x7d1)]((_0x3b82fe - _0x53eb99) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x1faee4 += _0x287083(0xab5) + _0x4d5d70 + _0x287083(0xac9); } } } else _0x1faee4 += '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a'; let _0x35cbb8 = '', _0x9e0456 = ''; if (_0x19bd95) _0x35cbb8 = _0x287083(0xa1e), _0x9e0456 = _0x287083(0x615) + _0x19bd95 + '\x0a```'; else { if (_0x287083(0x2bb) === _0x287083(0x2bb)) _0x35cbb8 = '你的任务是【首次生成】这个应用的内容。'; else { const _0x21b389 = _0x541f4f['getElementById'](_0x287083(0x698)); if (!_0x21b389) return; const _0x104ca4 = _0x4fcdb9(), _0xa50d37 = _0x2667bb['calendarEvents'][_0x287083(0x742)](_0x287185 => _0x287185['date'] === _0x104ca4 && _0x287185[_0x287083(0x875)] === _0x287083(0x6a2)); _0x21b389[_0x287083(0x2c9)] = '', _0xa50d37['length'] > 0x0 ? _0xa50d37[_0x287083(0xb5e)](_0x1d1b56 => { const _0x24ba95 = _0x287083, _0x53cdd2 = _0xb5639a[_0x24ba95(0x92e)](_0x24ba95(0x63a)); _0x53cdd2['className'] = _0x24ba95(0xba6), _0x53cdd2['textContent'] = _0x1d1b56[_0x24ba95(0xa19)], _0x21b389[_0x24ba95(0x594)](_0x53cdd2); }) : _0x21b389[_0x287083(0x2c9)] = _0x287083(0xbb9); } } const _0x2a0f44 = { 'gallery': _0x287083(0xa0b), 'whispers': _0x287083(0x7b1), 'abyss': _0x287083(0x760), 'fragments': _0x287083(0x7b7), 'bites': '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'wants': _0x287083(0x22f), 'footprints': _0x287083(0x2c3) }, _0x12b6cc = _0x2a0f44[_0x1f029] || _0x287083(0x728) + _0x1f029 + '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。'; let _0x39d730 = ''; if (_0x9dfa53[_0x287083(0x25d)] && _0x9dfa53[_0x287083(0x25d)]['length'] > 0x0) { const _0x46a913 = _0x9dfa53[_0x287083(0x25d)][_0x287083(0x5e9)](_0x2e1977 => _0x2e4b8c[_0x287083(0x285)][_0x287083(0x69e)](_0x39d374 => _0x39d374['id'] === _0x2e1977))[_0x287083(0x742)](Boolean)[_0x287083(0x5e9)](_0x2d4815 => _0x287083(0x6b0) + _0x2d4815[_0x287083(0x420)] + '\x0a' + _0x2d4815[_0x287083(0xa19)])['join'](''); if (_0x46a913) { if (_0x287083(0x3f9) === 'gmQLP') { _0x58641f['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } else _0x39d730 = _0x287083(0x47f) + _0x46a913; } } const _0x41f5bc = _0x287083(0x688) + _0x9dfa53[_0x287083(0x420)] + _0x287083(0x23c) + _0x9dfa53[_0x287083(0x420)] + '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“' + _0x4e3852[_0x287083(0x420)] + '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20' + _0x75ef55 + _0x287083(0x5b5) + _0x3b82fe[_0x287083(0x408)](_0x287083(0x591), { 'dateStyle': 'full', 'timeStyle': 'short' }) + _0x287083(0x32e) + _0x9dfa53[_0x287083(0x420)] + '\x0a-\x20人设:\x20' + _0x9dfa53[_0x287083(0x5cd)] + '\x0a' + _0x39d730 + _0x287083(0xaec) + _0x4e3852['name'] + _0x287083(0x905) + _0x4e3852['persona'] + '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a' + _0x1e506b + '\x0a' + _0x9e0456 + _0x287083(0xbe9) + _0x35cbb8 + '\x0a' + _0x12b6cc + _0x287083(0x5ef), _0x2e0003 = [{ 'role': _0x287083(0x2d3), 'content': _0x41f5bc }]; _0x2e0003[_0x287083(0x7e4)]({ 'role': _0x287083(0x5c3), 'content': _0x287083(0x499) }); const _0x457d88 = await _0x45b854(_0x2e0003, { 'json': !![] }); return _0x457d88; } else _0x5b57b1[_0x287083(0x3ba)](), _0x27d788[_0x287083(0xc0b)]['writeText'](_0xdd7c5e[_0x287083(0x60e)])[_0x287083(0x54a)](() => { const _0x2cf5aa = _0x287083; _0x55a3e5(_0x2cf5aa(0x290)); })[_0x287083(0x736)](_0x465f81 => { const _0x3aa560 = _0x287083; _0xc912d(_0x3aa560(0x77c)); }); } async function _0x2ff045(_0x3c57ee) { const _0x5ea16a = _0x3abecc; if (_0x5ea16a(0x466) === 'Ladfu') _0xd4733e += '-\x20你记得曾和“' + _0x4ce707[_0x5ea16a(0x58e)] + _0x5ea16a(0xb82) + _0x1aac7f[_0x5ea16a(0x642)] + _0x5ea16a(0x5f5), _0xf5b6b3[_0x5ea16a(0xbf0)] && _0x5e4e8b[_0x5ea16a(0x74a)](_0x20f165['log']) && (_0x190169 += '\x20\x20具体对话如下：\x0a', _0x20f977[_0x5ea16a(0xbf0)][_0x5ea16a(0xb5e)](_0x1fb144 => { const _0x54e1e7 = _0x5ea16a, _0xf44704 = _0x1fb144['sender'] === _0x54e1e7(0xc2e) ? '你' : _0x461a5c[_0x54e1e7(0x58e)]; _0x22410a += _0x54e1e7(0xbd5) + _0xf44704 + ':\x20' + _0x1fb144[_0x54e1e7(0xa19)] + '\x0a'; })); else { const _0x50cb04 = _0x2653c6(_0x3c57ee); if (!_0x50cb04) throw new Error(_0x5ea16a(0xa15)); _0x5b3ee9(!![], _0x5ea16a(0x233)); const _0x1a540f = [_0x5ea16a(0x7e3), _0x5ea16a(0xb7d), _0x5ea16a(0x2fd), _0x5ea16a(0x651), _0x5ea16a(0x35e), _0x5ea16a(0x2dc), _0x5ea16a(0x6c6)]; let _0x5af4af = {}; await Promise[_0x5ea16a(0x319)](_0x1a540f[_0x5ea16a(0x5e9)](async _0x46c6bc => { const _0x2ae803 = _0x5ea16a, _0x2bd1a0 = _0x2ae803(0x3ad) + _0x3c57ee + '_' + _0x46c6bc, _0x1126d5 = await _0x1ccaa1(_0x2bd1a0); if (_0x1126d5) try { _0x2ae803(0x7ca) === _0x2ae803(0x7ca) ? _0x5af4af[_0x46c6bc] = JSON['parse'](_0x1126d5) : (_0x19b665(), _0x42ccf5(_0x2ae803(0xa2c), 'music')); } catch (_0x5acddf) { } })); if (Object[_0x5ea16a(0xabd)](_0x5af4af)['length'] === 0x0) { if (_0x5ea16a(0xa6e) !== 'iBfAF') return _0x5ea16a(0x1ee); else _0x536479(_0x5ea16a(0xb8c)); } const _0x635316 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x50cb04[_0x5ea16a(0x420)] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x273b1a = [{ 'role': _0x5ea16a(0x2d3), 'content': _0x635316 }, { 'role': _0x5ea16a(0x5c3), 'content': JSON[_0x5ea16a(0x2bf)](_0x5af4af, null, 0x2) }]; _0x5b3ee9(!![], _0x5ea16a(0x3c6)); const _0x26d4c6 = await _0x45b854(_0x273b1a); return _0x26d4c6 || _0x5ea16a(0x1d9); } } async function _0x2ff045(_0x2bd126) { const _0x52f327 = _0x3abecc, _0x51b3a9 = _0x2653c6(_0x2bd126); if (!_0x51b3a9) throw new Error(_0x52f327(0xa15)); try { _0x5b3ee9(!![], _0x52f327(0x233)); const _0x2575d2 = [_0x52f327(0x7e3), _0x52f327(0xb7d), _0x52f327(0x2fd), 'fragments', 'bites', _0x52f327(0x2dc), 'footprints']; let _0x235854 = {}; await Promise[_0x52f327(0x319)](_0x2575d2[_0x52f327(0x5e9)](async _0x564747 => { const _0x4496f6 = _0x52f327; if (_0x4496f6(0x56e) === _0x4496f6(0x56e)) { const _0x243a05 = _0x4496f6(0x3ad) + _0x2bd126 + '_' + _0x564747, _0x1f02f1 = await _0x1ccaa1(_0x243a05); if (_0x1f02f1) try { _0x235854[_0x564747] = JSON[_0x4496f6(0x30c)](_0x1f02f1); } catch (_0x11ec44) { } } else { _0x41aa25(_0x4496f6(0x911)); return; } })); if (Object['keys'](_0x235854)[_0x52f327(0x6f2)] === 0x0) { if ('oUVUM' !== 'oUVUM') _0x58fc39 = _0x3c4223[_0x52f327(0x420)] || '我', _0x5b8c91 = _0x52f327(0x3ac); else return _0x52f327(0x1ee); } const _0x1d1598 = _0x52f327(0xa31) + _0x51b3a9['name'] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x3f7765 = [{ 'role': _0x52f327(0x2d3), 'content': _0x1d1598 }, { 'role': _0x52f327(0x5c3), 'content': JSON[_0x52f327(0x2bf)](_0x235854, null, 0x2) }]; _0x5b3ee9(!![], _0x52f327(0x3c6)); const _0x1a0587 = await _0x45b854(_0x3f7765); return _0x1a0587 || _0x52f327(0x1d9); } finally { _0x52f327(0x5a5) !== _0x52f327(0x57a) ? _0x5b3ee9(![]) : (_0x5a0c2a[_0x52f327(0x3f7)] = _0x271228, _0xf4cfcd = !![]); } } document['getElementById']('back-to-home-from-snoop-list')[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => _0x2bd982('home', 'snoopList')), document[_0x3abecc(0x392)](_0x3abecc(0x9d3))[_0x3abecc(0xabf)](_0x3abecc(0x4b9), () => { const _0x27ca16 = _0x3abecc; _0x27ca16(0x951) !== _0x27ca16(0x62c) ? (document[_0x27ca16(0x392)](_0x27ca16(0x5a3))['style'][_0x27ca16(0x993)] = _0x27ca16(0x3a4), _0x2bd982(_0x27ca16(0xb16), _0x27ca16(0xbab))) : _0x205aeb[_0x27ca16(0xb56)][_0x27ca16(0xb85)] = ''; }), _0x352a1c(); }); async function _0x144e27() { const _0x3b5639 = _0x2d0b86; console[_0x3b5639(0xbf0)](_0x3b5639(0x9e8)), console['log'](_0x3b5639(0x6f9)); async function _0x3cd171(_0x1d430d, _0x6fd840) { const _0x58a3e6 = _0x3b5639; if (_0x58a3e6(0x456) === _0x58a3e6(0x302)) { const _0x1c5dbb = _0x587457[0x0]['trim'](), _0x57c0ce = _0x59c2cd[0x1][_0x58a3e6(0x8bb)]()[_0x58a3e6(0x8d5)](/^"|"$/g, ''); _0x217eab[_0x1c5dbb] = _0x57c0ce; } else { const _0x54c5cc = await _0x1282ec; return new Promise((_0xb1ecf6, _0x2a0edf) => { const _0x55eb5b = _0x58a3e6; if ('QiCyu' !== 'QiCyu') throw _0x5acdfa; else { const _0x1a89a5 = _0x54c5cc[_0x55eb5b(0x281)](_0x523203, _0x55eb5b(0xae0)), _0x3d74f0 = _0x1a89a5[_0x55eb5b(0x4c5)](_0x523203), _0x525bff = _0x3d74f0['put']({ 'id': _0x1d430d, 'blob': _0x6fd840 }); _0x525bff[_0x55eb5b(0x817)] = () => _0xb1ecf6(_0x525bff['result']), _0x525bff[_0x55eb5b(0x677)] = () => _0x2a0edf(_0x525bff['error']); } }); } } async function _0x4ed83f(_0x1c2b81) { const _0x404f0e = _0x3b5639; if (_0x404f0e(0x598) !== _0x404f0e(0x598)) _0x255d96[_0x404f0e(0x2c9)] = _0x44f92b; else { const _0x4ffd97 = await _0x1282ec; return new Promise((_0xc94c64, _0x41ce19) => { const _0x54deab = _0x404f0e, _0x442f58 = _0x4ffd97['transaction'](_0x6be7aa, 'readonly'), _0x357d54 = _0x442f58[_0x54deab(0x4c5)](_0x6be7aa), _0x433bce = _0x357d54[_0x54deab(0x6dd)](_0x1c2b81); _0x433bce['onsuccess'] = () => _0xc94c64(_0x433bce[_0x54deab(0x3cf)] ? _0x433bce[_0x54deab(0x3cf)][_0x54deab(0x6c9)] : null), _0x433bce[_0x54deab(0x677)] = () => _0x41ce19(_0x433bce[_0x54deab(0x5b1)]); }); } } async function _0x3bd05e(_0x22974f, _0x46e520) { const _0x51cd05 = await _0x1282ec; return new Promise((_0x50c65d, _0x362b6b) => { const _0x1abe46 = _0x198c, _0x50d922 = _0x51cd05[_0x1abe46(0x281)](_0x6be7aa, _0x1abe46(0xae0)), _0x43a8b1 = _0x50d922[_0x1abe46(0x4c5)](_0x6be7aa), _0x37f065 = _0x43a8b1[_0x1abe46(0x701)]({ 'id': _0x22974f, 'data': _0x46e520 }); _0x37f065[_0x1abe46(0x817)] = () => _0x50c65d(), _0x37f065[_0x1abe46(0x677)] = () => _0x362b6b(_0x37f065['error']); }); } function _0x4c6271(_0x21f4c9) { const _0x32eae5 = _0x3b5639; if (_0x32eae5(0x448) === _0x32eae5(0x448)) return fetch(_0x21f4c9)[_0x32eae5(0x54a)](_0x469582 => _0x469582['blob']()); else { const _0x3cfc57 = _0x554321[_0x32eae5(0x281)](_0x2338b5, _0x32eae5(0xae0)), _0x3ef34d = _0x3cfc57[_0x32eae5(0x4c5)](_0x2ee7e5), _0x468c72 = _0x3ef34d[_0x32eae5(0x87c)](_0x4e5463); _0x468c72[_0x32eae5(0x817)] = () => _0x1358fc(), _0x468c72[_0x32eae5(0x677)] = () => _0x8c147e(_0x468c72[_0x32eae5(0x5b1)]); } } let _0x207b4b = 0x0; for (let _0x46ec78 = 0x0; _0x46ec78 < localStorage['length']; _0x46ec78++) { const _0x527d28 = localStorage[_0x3b5639(0xbf4)](_0x46ec78); if (_0x527d28 && _0x527d28[_0x3b5639(0x629)](_0x3b5639(0x76e))) { let _0x2d22af, _0x2d7dcf = ![]; try { _0x2d22af = JSON[_0x3b5639(0x30c)](localStorage[_0x3b5639(0x956)](_0x527d28)); if (!Array[_0x3b5639(0x74a)](_0x2d22af)) continue; for (const _0x382bf6 of _0x2d22af) { if (_0x382bf6 && _0x382bf6[_0x3b5639(0x3f7)] && _0x382bf6[_0x3b5639(0x3f7)][_0x3b5639(0x629)]('data:image')) { const _0x216ca2 = await _0x4c6271(_0x382bf6['image']), _0x548089 = _0x3b5639(0x64f) + Date[_0x3b5639(0x9b4)]() + '_' + Math[_0x3b5639(0xb59)](); await _0x3cd171(_0x548089, _0x216ca2), _0x382bf6[_0x3b5639(0xb1a)] = _0x548089, delete _0x382bf6[_0x3b5639(0x3f7)], _0x2d7dcf = !![], _0x207b4b++; } } _0x2d7dcf && (_0x3b5639(0x5ca) !== 'AfcYi' ? localStorage[_0x3b5639(0x963)](_0x527d28, JSON['stringify'](_0x2d22af)) : _0x2cf4d8(_0x15dc84['toDataURL'](_0x3a5eb2, _0x2423d7))); } catch (_0x343ab7) { console[_0x3b5639(0x5b1)](_0x3b5639(0xaaf) + _0x527d28 + _0x3b5639(0xae6), _0x343ab7); continue; } } } console[_0x3b5639(0xbf0)](_0x3b5639(0xa06) + _0x207b4b + _0x3b5639(0x744)); } async function _0x1a6e4b() { const _0x41f8b0 = _0x2d0b86; console[_0x41f8b0(0xbf0)](_0x41f8b0(0x997)), console[_0x41f8b0(0xbf0)](_0x41f8b0(0x528)); async function _0x24486e(_0x5c2867, _0x4e6670) { const _0x295ed2 = await _0x1282ec; return new Promise((_0x4bbc, _0x1bb881) => { const _0x45f899 = _0x198c, _0xb83a8e = _0x295ed2[_0x45f899(0x281)](_0x45f899(0x470), _0x45f899(0xae0)), _0x3e958c = _0xb83a8e[_0x45f899(0x4c5)](_0x45f899(0x470)), _0x5d0f83 = _0x3e958c[_0x45f899(0x701)]({ 'id': _0x5c2867, 'blob': _0x4e6670 }); _0x5d0f83[_0x45f899(0x817)] = () => _0x4bbc(_0x5d0f83['result']), _0x5d0f83[_0x45f899(0x677)] = () => _0x1bb881(_0x5d0f83[_0x45f899(0x5b1)]); }); } function _0x1a7522(_0x3f8156) { const _0x210c18 = _0x41f8b0; return fetch(_0x3f8156)['then'](_0x492bec => _0x492bec[_0x210c18(0x713)]()); } let _0x6e28ab = 0x0, _0x835599 = ![]; try { const _0x14fd0a = localStorage[_0x41f8b0(0x956)](_0x41f8b0(0x332)); if (!_0x14fd0a) { if (_0x41f8b0(0x4a6) === _0x41f8b0(0x4a6)) { console[_0x41f8b0(0xbf0)]('好友圈档案柜是空的，无需净化。'); return; } else { const _0x3823e4 = _0x43cf9b(_0x2ae823[_0x41f8b0(0x3d8)][_0x41f8b0(0x5a8)]); _0x3823e4 && (_0x247bd1 = _0x41f8b0(0x670) + _0x3823e4[_0x41f8b0(0x58d)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x3823e4['name'] + _0x41f8b0(0x8f2) + _0x34bd05[_0x41f8b0(0x3d8)][_0x41f8b0(0xbbc)] + _0x41f8b0(0x418)); } } const _0x3a5903 = JSON[_0x41f8b0(0x30c)](_0x14fd0a); if (!_0x3a5903[_0x41f8b0(0x2b2)] || !Array['isArray'](_0x3a5903[_0x41f8b0(0x2b2)])) { if (_0x41f8b0(0x809) !== 'SxRbD') _0x306c69(_0x41f8b0(0xa74), _0x41f8b0(0x787)); else return; } for (const _0x3bab77 of _0x3a5903['friendCircles']) { if (_0x3bab77['posts'] && Array['isArray'](_0x3bab77['posts'])) for (const _0x5540ec of _0x3bab77[_0x41f8b0(0x983)]) { if (_0x5540ec && _0x5540ec['image'] && _0x5540ec[_0x41f8b0(0x3f7)][_0x41f8b0(0x629)]('data:image')) { console[_0x41f8b0(0xbf0)]('在好友圈\x20\x22' + _0x3bab77['name'] + '\x22\x20中发现一张需要净化的图片...'); const _0xe94b99 = await _0x1a7522(_0x5540ec[_0x41f8b0(0x3f7)]), _0x575b91 = 'post_image_migrated_' + Date[_0x41f8b0(0x9b4)]() + '_' + Math[_0x41f8b0(0xb59)](); await _0x24486e(_0x575b91, _0xe94b99), _0x5540ec[_0x41f8b0(0xb1a)] = _0x575b91, delete _0x5540ec[_0x41f8b0(0x3f7)], _0x835599 = !![], _0x6e28ab++; } } } _0x835599 && (console[_0x41f8b0(0xbf0)](_0x41f8b0(0x41c)), localStorage['setItem'](_0x41f8b0(0x332), JSON['stringify'](_0x3a5903))); } catch (_0x275adb) { console[_0x41f8b0(0x5b1)](_0x41f8b0(0x43b), _0x275adb); } return console['log'](_0x41f8b0(0x884)), console['log'](_0x41f8b0(0x4d6) + _0x6e28ab + _0x41f8b0(0x1f0)), _0x6e28ab; } function _0x198c(_0x5afde4, _0x450947) { const _0x268638 = _0x2686(); return _0x198c = function (_0x198cae, _0x40fe9b) { _0x198cae = _0x198cae - 0x1d6; let _0x19cf99 = _0x268638[_0x198cae]; return _0x19cf99; }, _0x198c(_0x5afde4, _0x450947); } async function _0x14818d() { const _0x550c17 = _0x2d0b86; console[_0x550c17(0xbf0)](_0x550c17(0x871)), console['log'](_0x550c17(0x461)); let _0x533ac9 = 0x0, _0x46b209 = ![]; try { if (_0x550c17(0xc19) === 'rJFqK') { const _0x4baa37 = new _0x407a61(_0x1d3e1a['timestamp']), _0xf414fe = _0x4baa37[_0x550c17(0x780)]() + '-' + _0x28b3b6(_0x4baa37[_0x550c17(0x49d)]() + 0x1)[_0x550c17(0xb98)](0x2, '0') + '-' + _0x7c4891(_0x4baa37['getDate']())['padStart'](0x2, '0'), _0x4d2862 = _0xae966f(_0x4baa37[_0x550c17(0x2d8)]())[_0x550c17(0xb98)](0x2, '0') + ':' + _0x4cbf04(_0x4baa37[_0x550c17(0x618)]())[_0x550c17(0xb98)](0x2, '0'); let _0x5e5dce = '未知'; _0x32bd01[_0x550c17(0x253)] === _0x550c17(0x5c3) ? _0x5e5dce = _0x141e15['name'] : _0x5e5dce = _0x1f581a[_0x550c17(0x420)]; let _0x4e98e2 = _0x1cef9e[_0x550c17(0xa19)]; if (_0x2b8530[_0x550c17(0x6fd)]) _0x4e98e2 = _0x550c17(0x3bb); if (_0x3a0f2a['imageId']) _0x4e98e2 = _0x550c17(0xbc5); return '[' + _0xf414fe + '\x20' + _0x4d2862 + _0x550c17(0x52c) + _0x5e5dce + _0x550c17(0x4cd) + _0x4e98e2; } else { const _0xd40088 = localStorage[_0x550c17(0x956)](_0x550c17(0x332)); if (!_0xd40088) { if (_0x550c17(0xb1e) !== _0x550c17(0xb1e)) { const _0x55571c = _0x49a738['getElementById'](_0x550c17(0x2fb)); _0x55571c['innerHTML'] = ''; const _0x498906 = _0xb5756e[_0x550c17(0x404)][_0x550c17(0x742)](_0x13f1ab => _0x4af356[_0x550c17(0x442)]['some'](_0x3df116 => _0x3df116[_0x550c17(0x875)] === 'private' && _0x3df116['participantIds']['includes'](_0x13f1ab['id']))); if (_0x498906[_0x550c17(0x6f2)] === 0x0) { _0x55571c[_0x550c17(0x2c9)] = _0x550c17(0x2c6); return; } _0x498906[_0x550c17(0xb5e)](_0x5c91c7 => { const _0x34164e = _0x550c17, _0x2d7f1a = _0x2f5ded[_0x34164e(0x92e)]('li'); _0x2d7f1a[_0x34164e(0x894)] = _0x34164e(0x47d), _0x2d7f1a[_0x34164e(0x641)][_0x34164e(0x5a8)] = _0x5c91c7['id'], _0x2d7f1a['innerHTML'] = _0x34164e(0x2f7) + (_0x5c91c7[_0x34164e(0x58d)] || _0xc9e11c) + _0x34164e(0x832) + _0x5c91c7[_0x34164e(0x420)] + _0x34164e(0xb72) + (_0x5c91c7[_0x34164e(0x2c2)] || '私聊') + _0x34164e(0x838), _0x2d7f1a[_0x34164e(0xabf)](_0x34164e(0x4b9), () => { _0x2801f7(_0x5c91c7['id']); }), _0x55571c[_0x34164e(0x594)](_0x2d7f1a); }); } else return console[_0x550c17(0xbf0)](_0x550c17(0x23b)), 0x0; } for (let _0x330aa6 = 0x0; _0x330aa6 < localStorage['length']; _0x330aa6++) { const _0x44ad50 = localStorage[_0x550c17(0xbf4)](_0x330aa6); if (_0x44ad50 && _0x44ad50['startsWith'](_0x550c17(0x76e))) { if (_0x550c17(0x999) !== _0x550c17(0x999)) _0x417cb5[_0x550c17(0x392)](_0x550c17(0x28f) + _0xc8aabb + '-preview')['style'][_0x550c17(0xb85)] = _0x550c17(0x24b) + _0x59fdd8[_0x550c17(0x38c)](_0x23cffc) + '\x27)'; else { let _0x4010ef, _0xc42170 = ![]; try { _0x4010ef = JSON[_0x550c17(0x30c)](localStorage[_0x550c17(0x956)](_0x44ad50)); if (!Array[_0x550c17(0x74a)](_0x4010ef)) continue; for (const _0x29c2a of _0x4010ef) { if (_0x550c17(0x682) === _0x550c17(0x4cf)) _0x466428(), _0xcdde6a(![]); else { if (_0x29c2a && (_0x29c2a['type'] === _0x550c17(0xc2d) || _0x29c2a[_0x550c17(0x875)] === _0x550c17(0x8c7)) && _0x29c2a[_0x550c17(0x459)] && _0x29c2a[_0x550c17(0x459)][_0x550c17(0x629)]('data:image')) { if (_0x550c17(0x34a) === _0x550c17(0x34a)) { const _0x54c546 = await _0x5db80c(_0x29c2a[_0x550c17(0x459)]), _0x70628d = _0x550c17(0x848) + Date[_0x550c17(0x9b4)]() + '_' + Math[_0x550c17(0xb59)](); await _0x3b613b(_0x70628d, _0x54c546), _0x29c2a[_0x550c17(0x71c)] = _0x70628d, delete _0x29c2a[_0x550c17(0x459)], _0xc42170 = !![], _0x533ac9++; } else _0x11638f(_0x550c17(0x490) + _0x2f9a88[_0x550c17(0x542)]); } } } _0xc42170 && localStorage['setItem'](_0x44ad50, JSON[_0x550c17(0x2bf)](_0x4010ef)); } catch (_0x5939ea) { if ('SNgOv' === _0x550c17(0x95f)) _0x547f51[_0x550c17(0x5b1)](_0x550c17(0xc01), _0xf4916), _0x46deb8(_0x550c17(0x6ac)); else { console[_0x550c17(0x5b1)](_0x550c17(0xaaf) + _0x44ad50 + _0x550c17(0x91c), _0x5939ea); continue; } } } } } } } catch (_0x1590c5) { console[_0x550c17(0x5b1)](_0x550c17(0x6f0), _0x1590c5); } return console[_0x550c17(0xbf0)](_0x550c17(0x4ef)), console['log'](_0x550c17(0x4d6) + _0x533ac9 + '\x20张旧的音乐封面。'), _0x533ac9; } async function _0x4f28f7() { const _0x548953 = _0x2d0b86; console[_0x548953(0xbf0)](_0x548953(0x479)), console[_0x548953(0xbf0)](_0x548953(0x486)); let _0x1f5623 = 0x0; try { const _0x12c691 = localStorage['getItem']('appState'); if (!_0x12c691) return console[_0x548953(0xbf0)](_0x548953(0x468)), 0x0; const _0x1d027e = JSON[_0x548953(0x30c)](_0x12c691); if (!_0x1d027e[_0x548953(0x404)] || !Array[_0x548953(0x74a)](_0x1d027e[_0x548953(0x404)])) return 0x0; for (const _0x3fd83b of _0x1d027e[_0x548953(0x404)]) { if ('NEunJ' === 'NEunJ') { if (_0x3fd83b && _0x3fd83b['avatar'] && _0x3fd83b[_0x548953(0x58d)][_0x548953(0x629)](_0x548953(0x718))) { if (_0x548953(0xaf8) === _0x548953(0xaf8)) { const _0x39ec80 = await _0x1de353(_0x548953(0x29a) + _0x3fd83b['id']); if (!_0x39ec80) { console[_0x548953(0xbf0)]('发现角色\x20' + _0x3fd83b['name'] + '\x20的遗失头像，正在救援...'); const _0x5da359 = await _0x5db80c(_0x3fd83b[_0x548953(0x58d)]); await _0x3b613b('char_avatar_' + _0x3fd83b['id'], _0x5da359), _0x1f5623++; } } else _0x32eb92[_0x548953(0x5b1)](_0x548953(0x3b0), _0x4c611a); } } else _0x364eee[_0x548953(0x392)]('char-edit-sprite-' + _0x54bc0c + _0x548953(0x2ec))['style'][_0x548953(0xb85)] = '', _0x103786[_0x548953(0x392)]('char-edit-sprite-' + _0x1036d0 + _0x548953(0x34b))[_0x548953(0x60e)] = ''; } } catch (_0x5b0b1c) { console[_0x548953(0x5b1)](_0x548953(0x8e5), _0x5b0b1c); } return console[_0x548953(0xbf0)](_0x548953(0x411)), console[_0x548953(0xbf0)](_0x548953(0xbad) + _0x1f5623 + '\x20个旧头像。'), _0x1f5623; } function _0x4f3c7a() { const _0x7c2239 = _0x2d0b86; if (!_0x2e4b8c[_0x7c2239(0x20b)]) return _0x2e4b8c['userProfiles']['find'](_0x2807a2 => _0x2807a2['id'] === _0x2e4b8c[_0x7c2239(0x789)]) || _0x2e4b8c[_0x7c2239(0x89d)][0x0]; const _0x4e2f41 = _0x2e4b8c[_0x7c2239(0x442)][_0x7c2239(0x69e)](_0x5af641 => _0x5af641[_0x7c2239(0x875)] === 'private' && _0x5af641['participantIds'][_0x7c2239(0x21d)](_0x2e4b8c[_0x7c2239(0x20b)])), _0x56f07d = _0x4e2f41?.['boundUserProfileId'] || _0x2e4b8c[_0x7c2239(0x789)]; return _0x2e4b8c['userProfiles'][_0x7c2239(0x69e)](_0x2ede79 => _0x2ede79['id'] === _0x56f07d) || _0x2e4b8c[_0x7c2239(0x89d)][0x0]; } function _0x593dd0(_0x4c49a3) { const _0x33c549 = _0x2d0b86, _0x438d01 = new Date(), _0x3bcc6f = _0x438d01 - _0x4c49a3, _0x23bc89 = Math['round'](_0x3bcc6f / 0x3e8), _0x4f0934 = Math[_0x33c549(0x7d1)](_0x23bc89 / 0x3c), _0x14c08f = Math[_0x33c549(0x7d1)](_0x4f0934 / 0x3c), _0x200f0a = Math[_0x33c549(0x7d1)](_0x14c08f / 0x18), _0x115bd5 = _0x4c49a3[_0x33c549(0x833)](_0x33c549(0x591), { 'hour': _0x33c549(0x2f5), 'minute': _0x33c549(0x2f5) }); if (_0x23bc89 < 0x3c) return '刚才'; if (_0x4f0934 < 0x3c) return _0x4f0934 + '分钟前'; const _0x44eb9f = _0x438d01['toDateString']() === _0x4c49a3[_0x33c549(0x97c)](); if (_0x44eb9f) { if (_0x33c549(0x2bd) !== _0x33c549(0x2bd)) _0x43a4d9[_0x33c549(0xc33)] = { ..._0x46b6f6[_0x33c549(0x3ab)] }; else return '今天\x20' + _0x115bd5; } const _0x1f0876 = new Date(); _0x1f0876[_0x33c549(0x3fd)](_0x438d01[_0x33c549(0xa7a)]() - 0x1); const _0x305213 = _0x1f0876[_0x33c549(0x97c)]() === _0x4c49a3[_0x33c549(0x97c)](); if (_0x305213) { if (_0x33c549(0x42f) === _0x33c549(0x88d)) throw new _0x52fcdf('YAML翻译机也无法理解这段梦话。'); else return '昨天\x20' + _0x115bd5; } if (_0x200f0a <= 0x7) { if (_0x33c549(0x26b) === _0x33c549(0x384)) { const _0x27baee = _0x393b99[_0x33c549(0x281)](_0x1c39dd, 'readwrite'), _0x2caedf = _0x27baee['objectStore'](_0x51504b), _0x49b836 = _0x2caedf[_0x33c549(0x87c)](_0x2ba9fd); _0x49b836[_0x33c549(0x817)] = () => _0x3187ed(), _0x49b836[_0x33c549(0x677)] = () => _0x5956ae(_0x49b836[_0x33c549(0x5b1)]); } else { const _0x1c652b = [_0x33c549(0x227), _0x33c549(0x3c0), '星期二', '星期三', _0x33c549(0x6dc), '星期五', _0x33c549(0x5c1)]; return _0x1c652b[_0x4c49a3['getDay']()] + '\x20' + _0x115bd5; } } return _0x4c49a3[_0x33c549(0x780)]() + '年' + (_0x4c49a3[_0x33c549(0x49d)]() + 0x1) + '月' + _0x4c49a3[_0x33c549(0xa7a)]() + '日'; } function _0x4b681c(_0x122ad4, _0x1d3ad4 = 0x320, _0x8ec15b = 0.8, _0x570dd6 = ![]) { return new Promise((_0x210ad9, _0x4cedb3) => { const _0x6fd3ce = _0x198c; if (_0x6fd3ce(0xb79) !== _0x6fd3ce(0x4c4)) { if (!_0x122ad4 || !_0x122ad4['type'][_0x6fd3ce(0x629)]('image/')) return _0x4cedb3(new Error(_0x6fd3ce(0xbca))); const _0xa3b759 = new FileReader(); _0xa3b759[_0x6fd3ce(0x59f)](_0x122ad4), _0xa3b759[_0x6fd3ce(0x8df)] = _0x1f7445 => { const _0x238a59 = _0x6fd3ce; if (_0x238a59(0xb81) !== 'nXlrk') { _0x4a5919 = _0xc7e33[_0x238a59(0x442)][_0x238a59(0x69e)](_0x395348 => _0x395348[_0x238a59(0x875)] === 'private' && _0x395348[_0x238a59(0xa2a)][_0x238a59(0x21d)](_0x25f761)); const _0x50bba5 = _0x362bd1(_0x1f751b); _0x4a2ee3 = _0x50bba5 ? _0x50bba5[_0x238a59(0x420)] : _0x238a59(0x8b3); } else { const _0x18fbab = new Image(); _0x18fbab['src'] = _0x1f7445[_0x238a59(0xa4c)]['result'], _0x18fbab[_0x238a59(0x8df)] = () => { const _0x54233b = _0x238a59; if (_0x54233b(0x487) !== _0x54233b(0x487)) _0x42758e['remove'](), _0x4ec5bd(); else { const _0x4714bf = document[_0x54233b(0x92e)]('canvas'); let _0x172bbf = _0x18fbab[_0x54233b(0xa9a)], _0x19174c = _0x18fbab[_0x54233b(0x834)]; _0x172bbf > _0x19174c ? _0x172bbf > _0x1d3ad4 && (_0x19174c *= _0x1d3ad4 / _0x172bbf, _0x172bbf = _0x1d3ad4) : _0x54233b(0x65a) === _0x54233b(0x77a) ? _0x2792b7['click']() : _0x19174c > _0x1d3ad4 && (_0x172bbf *= _0x1d3ad4 / _0x19174c, _0x19174c = _0x1d3ad4); _0x4714bf[_0x54233b(0xa9a)] = _0x172bbf, _0x4714bf['height'] = _0x19174c; const _0x5f0c30 = _0x4714bf[_0x54233b(0x3b4)]('2d'); _0x5f0c30[_0x54233b(0x6e3)](_0x18fbab, 0x0, 0x0, _0x172bbf, _0x19174c); const _0x89276d = _0x122ad4[_0x54233b(0x875)] === 'image/png' ? _0x54233b(0x4c6) : 'image/jpeg'; _0x570dd6 ? _0x54233b(0x8ec) === _0x54233b(0x27f) ? (_0x2c0c0b['currentDate']['setMonth'](_0x418222[_0x54233b(0x307)][_0x54233b(0x49d)]() + 0x1), _0x6b653()) : _0x4714bf['toBlob'](_0x7dbd38 => { const _0x5b9168 = _0x54233b; if (_0x5b9168(0xa72) === _0x5b9168(0xa72)) _0x7dbd38 ? _0x210ad9(_0x7dbd38) : _0x5b9168(0xbd1) !== 'xkzwx' ? _0x4cedb3(new Error(_0x5b9168(0xb65))) : _0x465db6['remove'](); else { _0x481f4b(_0x5b9168(0x2ff)); return; } }, _0x89276d, _0x8ec15b) : _0x54233b(0x6cd) !== _0x54233b(0x6cd) ? _0x3432aa[_0x54233b(0x7e4)](_0x321cf7[_0x54233b(0x43d)](_0x5023dd, _0x514e99 + _0x996467)) : _0x210ad9(_0x4714bf[_0x54233b(0xb05)](_0x89276d, _0x8ec15b)); } }, _0x18fbab[_0x238a59(0x677)] = _0x52ac06 => _0x4cedb3(_0x52ac06); } }, _0xa3b759[_0x6fd3ce(0x677)] = _0xac0e4a => _0x4cedb3(_0xac0e4a); } else { const _0x2638c2 = _0x4eb648[_0x6fd3ce(0xbda)](_0x6fd3ce(0xa02)), _0xcc1bf0 = _0x2c5bc7[_0x6fd3ce(0x641)][_0x6fd3ce(0x908)], _0xe73acc = _0x567cdd(_0x2638c2[_0x6fd3ce(0x641)]['historyIndex'], 0xa); _0x3105b6(_0xcc1bf0, _0xe73acc, _0x101f4e); } }); } function _0x5a357c(_0x153831) { return new Promise((_0xda794, _0x59b18b) => { const _0x4002fc = _0x198c; if (_0x4002fc(0xa80) !== _0x4002fc(0xa80)) _0x280097[_0x4002fc(0x594)](_0x109aab); else { const _0x1230a7 = new FileReader(); _0x1230a7[_0x4002fc(0x779)] = () => _0xda794(_0x1230a7[_0x4002fc(0x3cf)]), _0x1230a7[_0x4002fc(0x677)] = _0x59b18b, _0x1230a7['readAsDataURL'](_0x153831); } }); } function _0x5a357c(_0x4efe98) { return new Promise((_0x9c0a6, _0x1a8e28) => { const _0x2ceb04 = _0x198c, _0x45ea30 = new FileReader(); _0x45ea30[_0x2ceb04(0x779)] = () => _0x9c0a6(_0x45ea30[_0x2ceb04(0x3cf)]), _0x45ea30[_0x2ceb04(0x677)] = _0x1a8e28, _0x45ea30[_0x2ceb04(0x59f)](_0x4efe98); }); } function _0x5e5952(_0x305a9a, _0x4408ea, _0x2a6347) { const _0x4e73e1 = _0x2d0b86, _0x38fe4c = _0x5add33 => { const _0x171f9f = _0x198c; if (_0x171f9f(0xbe2) === _0x171f9f(0xbe2)) { if (_0x5add33['role'] === 'user') return _0x2e4b8c[_0x171f9f(0x312)]?.[_0x171f9f(0x420)] || _0x171f9f(0xc28); if (_0x305a9a[_0x171f9f(0x875)] === _0x171f9f(0xacf)) { const _0x5a54fa = _0x5add33['senderId'] ? _0x252f3f(_0x5add33[_0x171f9f(0x662)]) : null; return _0x5a54fa?.[_0x171f9f(0x420)] || _0x171f9f(0x52d); } else { if ('RAUwL' === _0x171f9f(0xa8b)) { const _0x1080ad = _0x252f3f(_0x305a9a[_0x171f9f(0xa2a)][0x0]); return _0x1080ad?.[_0x171f9f(0x420)] || 'AI'; } else _0x56d8f2['style'][_0x171f9f(0xb85)] = '', _0x5863cb[_0x171f9f(0xb56)][_0x171f9f(0xa96)] = '', _0x30a64f[_0x171f9f(0x9b8)](_0x171f9f(0x5c0))['forEach'](_0x205c57 => { _0x205c57['style']['textShadow'] = ''; }); } } else _0x10b7a6[_0x171f9f(0xb1a)] = _0x489541; }, _0x292804 = _0x4408ea[_0x4e73e1(0x43d)](-_0x2a6347), _0x3b1fe1 = []; for (const _0x3c3c02 of _0x292804) { const _0x51e4a3 = new Date(_0x3c3c02[_0x4e73e1(0x518)])[_0x4e73e1(0x833)](_0x4e73e1(0x591), { 'hour': _0x4e73e1(0x2f5), 'minute': _0x4e73e1(0x2f5) }); _0x3c3c02[_0x4e73e1(0xa19)] && (_0x4e73e1(0x6cf) === _0x4e73e1(0x6cf) ? _0x3b1fe1[_0x4e73e1(0x7e4)]('[' + _0x51e4a3 + _0x4e73e1(0x52c) + _0x38fe4c(_0x3c3c02) + ']\x20' + String(_0x3c3c02['content'])['trim']()) : (_0x329e9b[_0x4e73e1(0x42c)]['remove'](_0x4e73e1(0x3a9)), _0x121279 = null)); } return _0x3b1fe1; } function _0x315639(_0x1c28fb) { const _0x408409 = _0x2d0b86; if (_0x1c28fb[_0x408409(0x875)] === _0x408409(0xacf)) return _0x408409(0x869) + (_0x1c28fb[_0x408409(0x420)] || _0x408409(0x7c7)) + '」'; const _0x322429 = _0x252f3f(_0x1c28fb[_0x408409(0xa2a)][0x0]); return '与\x20' + (_0x322429?.[_0x408409(0x420)] || _0x408409(0x5c5)) + '\x20的私聊'; } function _0x3efbf7(_0x51ac90) { const _0x38bcbd = _0x2d0b86; try { if (_0x38bcbd(0x957) === 'uMfPN') _0x210ece = _0xd7102a[_0x38bcbd(0x3f7)]; else { const _0x2bdce6 = localStorage[_0x38bcbd(0x956)]('chatHistory_' + _0x51ac90), _0x3c7342 = JSON[_0x38bcbd(0x30c)](_0x2bdce6 || '[]'); return Array[_0x38bcbd(0x74a)](_0x3c7342) ? _0x3c7342 : []; } } catch { return []; } } function _0x42b275(_0x27ee99) { const _0x47975c = _0x2d0b86, _0x40860d = Math[_0x47975c(0x726)](0x1, Number(_0x2e4b8c[_0x47975c(0xab3)]?.[_0x47975c(0x563)] ?? 0x64)), _0x55b2bc = _0x2e4b8c['chats'][_0x47975c(0x742)](_0x2fb9b6 => _0x2fb9b6['participantIds']['includes'](_0x27ee99)), _0x15cb5c = _0x55b2bc['map'](_0x2b6f99 => { const _0x346cc9 = _0x47975c; if (_0x346cc9(0x747) === _0x346cc9(0x314)) { _0x576c9d['error']('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!'); return; } else { const _0x1cfe40 = _0x3efbf7(_0x2b6f99['id']), _0x16d77a = _0x1cfe40[_0x346cc9(0x6f2)] > 0x0 ? _0x1cfe40[_0x1cfe40[_0x346cc9(0x6f2)] - 0x1] : null; return { 'chat': _0x2b6f99, 'history': _0x1cfe40, 'lastTimestamp': _0x16d77a ? _0x16d77a[_0x346cc9(0x518)] : 0x0 }; } })[_0x47975c(0x742)](_0x22d5e4 => _0x22d5e4[_0x47975c(0x5ad)][_0x47975c(0x6f2)] > 0x0); _0x15cb5c[_0x47975c(0x474)]((_0x1f288d, _0x18eade) => _0x18eade[_0x47975c(0x6e6)] - _0x1f288d[_0x47975c(0x6e6)]); const _0x43f530 = [], _0x3c0d34 = {}; return _0x15cb5c[_0x47975c(0xb5e)]((_0x502c1c, _0x55dbc3) => { const _0x5cef87 = _0x47975c; if (_0x5cef87(0x920) !== 'kPXDb') { const _0x4e0e2c = _0x5e5952(_0x502c1c[_0x5cef87(0x4fb)], _0x502c1c['history'], _0x40860d); if (_0x4e0e2c[_0x5cef87(0x6f2)] === 0x0) return; const _0x8e8fed = _0x55dbc3 === 0x0 ? _0x5cef87(0x488) : '来源：'; _0x43f530[_0x5cef87(0x7e4)](_0x5cef87(0x7f1) + _0x8e8fed + _0x315639(_0x502c1c[_0x5cef87(0x4fb)]) + '\x0a' + _0x4e0e2c[_0x5cef87(0x52b)]('\x0a')), _0x3c0d34[_0x502c1c[_0x5cef87(0x4fb)]['id']] = _0x4e0e2c[_0x5cef87(0x6f2)]; } else { const _0x5b85a5 = _0x328c6d['find'](_0x38c476 => _0x38c476[_0x5cef87(0x420)] === _0x172619[_0x5cef87(0x420)]); if (_0x5b85a5) _0x3ed186['assign'](_0x212874, { 'content': _0x5cef87(0xace) + _0x5b85a5[_0x5cef87(0x420)] + ']', 'displayUrl': _0x5b85a5[_0x5cef87(0x6ae)] }); else _0x36d594[_0x5cef87(0xa19)] = _0x5cef87(0xc04) + _0x275045[_0x5cef87(0x420)] + ']'; } }), { 'omniText': _0x43f530[_0x47975c(0x52b)]('\x0a\x0a'), 'usedCounts': _0x3c0d34 }; } function _0x367a29(_0x48113e) { const _0x1ff7b = _0x2d0b86; let _0x3173e4 = null; const _0xf13e46 = _0x2e4b8c[_0x1ff7b(0x442)][_0x1ff7b(0x742)](_0x5a257d => _0x5a257d[_0x1ff7b(0xa2a)]['includes'](_0x48113e)); for (const _0x247ca2 of _0xf13e46) { const _0x1c5609 = _0x3efbf7(_0x247ca2['id']); if (_0x1c5609 && _0x1c5609[_0x1ff7b(0x6f2)] > 0x0) { const _0x2b745c = _0x1c5609[_0x1c5609['length'] - 0x1]; if (!_0x3173e4 || _0x2b745c[_0x1ff7b(0x518)] > _0x3173e4[_0x1ff7b(0x518)]) { if ('iEcJd' === _0x1ff7b(0x6d6)) _0x3173e4 = _0x2b745c; else { const _0x367777 = _0x2d5941[_0x1ff7b(0xa4c)][_0x1ff7b(0x5a1)][0x0]; if (!_0x367777) return; const _0xcbab77 = _0x175c34['createObjectURL'](_0x367777); _0x3c9f24[_0x1ff7b(0x84e)] = _0xcbab77, _0x526196['onload'] = () => { const _0x46a0a4 = _0x1ff7b; _0x25ff43[_0x46a0a4(0x298)](_0xcbab77); }; } } } } return _0x3173e4; } function _0x416820(_0x349164) { const _0x5c5ae0 = _0x2d0b86; if (!_0x349164 || !_0x349164[_0x5c5ae0(0x21d)](',')) return _0x349164; const _0x3ee2d1 = _0x349164[_0x5c5ae0(0x686)](',')[_0x5c5ae0(0x5e9)](_0x2081f7 => _0x2081f7[_0x5c5ae0(0x8bb)]()); return _0x3ee2d1[Math['floor'](Math[_0x5c5ae0(0xb59)]() * _0x3ee2d1[_0x5c5ae0(0x6f2)])]; } function _0x4b635a(_0x218bb4) { return new Promise(_0x457bfc => { const _0x50ceee = _0x198c; if (_0x50ceee(0x6b4) === _0x50ceee(0x269)) _0x3394b6(_0x3c7ee1[_0x50ceee(0x71c)])[_0x50ceee(0x54a)](_0x51c907 => { const _0xb758f2 = _0x50ceee, _0x374f83 = _0xd3416c[_0xb758f2(0x392)](_0x19fec0); if (_0x374f83 && _0x51c907) _0x374f83[_0xb758f2(0x84e)] = _0x76d39c['createObjectURL'](_0x51c907); }); else { const _0x606dba = document['getElementById'](_0x50ceee(0x369)), _0x5e0667 = document[_0x50ceee(0x392)]('modal-text'), _0x7f2833 = document[_0x50ceee(0x392)](_0x50ceee(0x31b)), _0x4e8275 = document[_0x50ceee(0x392)](_0x50ceee(0x3f6)), _0x421dd3 = document[_0x50ceee(0x392)]('modal-mask'); _0x5e0667[_0x50ceee(0x324)] = _0x218bb4, _0x606dba[_0x50ceee(0xb56)][_0x50ceee(0x993)] = 'flex'; const _0xc5e2b0 = _0x4f6d28 => { const _0xd70197 = _0x50ceee; _0xd70197(0x748) !== _0xd70197(0x748) ? _0x2d6c8d[_0xd70197(0x789)] = _0x458349['id'] : (_0x606dba[_0xd70197(0xb56)][_0xd70197(0x993)] = _0xd70197(0x3a4), _0x7f2833[_0xd70197(0x998)] = _0x4e8275[_0xd70197(0x998)] = _0x421dd3[_0xd70197(0x998)] = null, document[_0xd70197(0x6e4)](_0xd70197(0x7d9), _0x13cb63), _0x457bfc(_0x4f6d28)); }, _0x13cb63 = _0x23aaf6 => { const _0x4a9d0c = _0x50ceee; if (_0x23aaf6[_0x4a9d0c(0xbf4)] === _0x4a9d0c(0x35a)) _0xc5e2b0(![]); if (_0x23aaf6['key'] === 'Enter') _0xc5e2b0(!![]); }; _0x7f2833[_0x50ceee(0x998)] = () => _0xc5e2b0(!![]), _0x4e8275[_0x50ceee(0x998)] = () => _0xc5e2b0(![]), _0x421dd3[_0x50ceee(0x998)] = () => _0xc5e2b0(![]), document['addEventListener']('keydown', _0x13cb63); } }); } function _0x18c07b(_0x1160c3) { const _0x836165 = _0x2d0b86, _0x35bf5b = document[_0x836165(0x392)]('toast'); _0x35bf5b[_0x836165(0x324)] = _0x1160c3, _0x35bf5b[_0x836165(0xb56)][_0x836165(0x993)] = _0x836165(0x94c); if (_0x18c07b['_t']) clearTimeout(_0x18c07b['_t']); _0x18c07b['_t'] = setTimeout(() => { const _0x14b723 = _0x836165; if ('oVvKr' !== _0x14b723(0xad5)) { _0x2d661a(_0x14b723(0x331)); return; } else _0x35bf5b[_0x14b723(0xb56)]['display'] = _0x14b723(0x3a4); }, 0x640); } function _0x443a2a() { const _0x369ece = _0x2d0b86, _0x44ce20 = document[_0x369ece(0x392)](_0x369ece(0x52e)), _0x2e668e = document[_0x369ece(0x392)](_0x369ece(0x8cf)), _0x740934 = document[_0x369ece(0x9b8)](_0x369ece(0x34d)), _0x4d3736 = document[_0x369ece(0x392)](_0x369ece(0x53e)); let _0x38a8df = 0x0; _0x2e668e[_0x369ece(0xb56)][_0x369ece(0xa9a)] = _0x369ece(0x66f); const _0x206413 = 0x3; function _0x28547b(_0x24683c) { const _0x53c71e = _0x369ece; if (_0x53c71e(0x798) !== _0x53c71e(0x250)) { if (_0x24683c < 0x0 || _0x24683c >= _0x206413) return; _0x2e668e['style'][_0x53c71e(0x6fc)] = _0x53c71e(0xa2b) + _0x24683c * (0x64 / _0x206413) + '%)', _0x740934['forEach'](_0x23fcb5 => _0x23fcb5[_0x53c71e(0x42c)][_0x53c71e(0xb26)](_0x53c71e(0x454))), _0x740934[_0x24683c][_0x53c71e(0x42c)][_0x53c71e(0x6ec)](_0x53c71e(0x454)), _0x38a8df = _0x24683c; if (_0x24683c === 0x0) { if (_0x53c71e(0xb33) !== _0x53c71e(0xb33)) { const _0x2c084a = _0x36d974[_0x53c71e(0x92e)]('li'); _0x2c084a['className'] = _0x53c71e(0x47d), _0x2c084a[_0x53c71e(0x641)][_0x53c71e(0x5a8)] = _0x291669['id'], _0x2c084a[_0x53c71e(0x2c9)] = _0x53c71e(0x2f7) + (_0x15daf0[_0x53c71e(0x58d)] || _0x5e0ba7) + _0x53c71e(0x832) + _0x57d767[_0x53c71e(0x420)] + _0x53c71e(0xb72) + (_0x19a40a['remark'] || '私聊') + _0x53c71e(0x838), _0x2c084a['addEventListener'](_0x53c71e(0x4b9), () => { _0x311276(_0x280bc7['id']); }), _0x6cfee[_0x53c71e(0x594)](_0x2c084a); } else _0x4d3736[_0x53c71e(0xb56)][_0x53c71e(0x993)] = 'none'; } else _0x4d3736['style'][_0x53c71e(0x993)] = _0x53c71e(0x366); } else _0x5ef254[_0x53c71e(0x392)](_0x53c71e(0x757))[_0x53c71e(0xb56)][_0x53c71e(0xa6a)](_0x53c71e(0x20e), _0x53c71e(0x3a4)); } _0x28547b(0x0), _0x740934[_0x369ece(0xb5e)](_0x523062 => { const _0x195e4d = _0x369ece; _0x523062['addEventListener'](_0x195e4d(0x4b9), () => { const _0x25c9b7 = _0x195e4d; if (_0x25c9b7(0x939) === _0x25c9b7(0x534)) { _0x1ad864(_0x25c9b7(0x53b)); return; } else { const _0x4a1cc4 = parseInt(_0x523062[_0x25c9b7(0x641)][_0x25c9b7(0xa97)], 0xa); _0x28547b(_0x4a1cc4); } }); }); let _0x26e0f9 = 0x0, _0x4d877c = 0x0, _0x11ebe7 = 0x0, _0x39346b = ![], _0x149fc2 = ''; _0x44ce20[_0x369ece(0xabf)](_0x369ece(0x6f3), _0x37f8fe => { const _0xa2d794 = _0x369ece; _0x26e0f9 = _0x37f8fe[_0xa2d794(0x527)][0x0][_0xa2d794(0xa0d)], _0x4d877c = _0x37f8fe[_0xa2d794(0x527)][0x0][_0xa2d794(0xb67)], _0x39346b = !![], _0x149fc2 = ''; }, { 'passive': !![] }), _0x44ce20[_0x369ece(0xabf)]('touchmove', _0x1e4235 => { const _0x28c614 = _0x369ece; if (!_0x39346b) return; if (_0x149fc2 === '') { if (_0x28c614(0x810) !== _0x28c614(0x8f5)) { const _0xd2f9b9 = _0x1e4235[_0x28c614(0x527)][0x0][_0x28c614(0xa0d)] - _0x26e0f9, _0x55ac81 = _0x1e4235[_0x28c614(0x527)][0x0][_0x28c614(0xb67)] - _0x4d877c; if (Math[_0x28c614(0x7fb)](_0xd2f9b9) > Math[_0x28c614(0x7fb)](_0x55ac81)) { if (_0x28c614(0xc05) !== _0x28c614(0xc05)) return; else _0x149fc2 = _0x28c614(0x2e1); } else _0x149fc2 = _0x28c614(0xc31); } else { _0x431ad0[_0x28c614(0x324)] = '选择聊天'; return; } } _0x149fc2 === _0x28c614(0x2e1) && (_0x28c614(0x485) === _0x28c614(0x485) ? _0x1e4235[_0x28c614(0x93e)]() : (_0x4d0b46[_0x28c614(0xb56)][_0x28c614(0x8f6)] = _0x1f8dca['top'] + '%', _0xaf404f['style'][_0x28c614(0x6f1)] = _0x523124[_0x28c614(0x6f1)] + '%')); }, { 'passive': ![] }), _0x44ce20[_0x369ece(0xabf)]('touchend', _0x5ec9b8 => { const _0xa5e69a = _0x369ece; if (_0xa5e69a(0x4ba) !== 'LQTho') { _0x283a57[_0xa5e69a(0x540)] = [..._0x50e76d], _0xd2e798[_0xa5e69a(0xaa8)][_0x110461['id']] = [..._0x921704], _0x2b7b3d(); const _0x3d03a3 = _0x360a82[_0xa5e69a(0x5e9)](_0x2af0a2 => _0x2af0a2[_0xa5e69a(0x5fa)] === _0xa5e69a(0x2f0) ? _0x2af0a2[_0xa5e69a(0x7f8)] : _0x2af0a2[_0xa5e69a(0x5fa)] + ':\x20' + _0x2af0a2[_0xa5e69a(0x7f8)])[_0xa5e69a(0x52b)]('\x0a\x0a'); _0x45e12b[_0xa5e69a(0x2c8)][_0xa5e69a(0x7e4)]({ 'role': _0xa5e69a(0x880), 'senderId': _0x132f93['id'], 'timestamp': _0x27c1da[_0xa5e69a(0x9b4)](), 'isOffline': !![], 'content': _0x3d03a3 }); } else { if (!_0x39346b) return; _0x11ebe7 = _0x5ec9b8['changedTouches'][0x0]['screenX'], _0x149fc2 === _0xa5e69a(0x2e1) && _0xb93ef0(), _0x39346b = ![]; } }); function _0xb93ef0() { const _0x17e6f6 = _0x369ece, _0x2ab4a1 = 0x32; if (_0x11ebe7 < _0x26e0f9 - _0x2ab4a1) { if (_0x17e6f6(0x2e8) !== 'dkHEf') _0x28547b(_0x38a8df + 0x1); else { const _0x1a8065 = _0xd37d59[_0x17e6f6(0x60e)]; let _0x2bb6b7 = _0x1a8065[_0x17e6f6(0x8d5)](/\.bubble\.sent/g, '#bubble-preview-user')[_0x17e6f6(0x8d5)](/\.bubble\.received/g, _0x17e6f6(0xb0a)); _0x108e59[_0x17e6f6(0x2c9)] = _0x2bb6b7; } } else _0x11ebe7 > _0x26e0f9 + _0x2ab4a1 && _0x28547b(_0x38a8df - 0x1); } } function _0x32665b() { return new Promise(_0x3b2c3e => { const _0x3e35de = _0x198c, _0x5dc939 = document[_0x3e35de(0x392)](_0x3e35de(0xc07)), _0x55af8f = document['getElementById'](_0x3e35de(0x9ea)), _0x144c06 = document[_0x3e35de(0x392)]('music-input-artist'), _0x45cfa9 = document['getElementById'](_0x3e35de(0x700)), _0x525daf = document[_0x3e35de(0x392)](_0x3e35de(0x1e7)), _0x7a7392 = document[_0x3e35de(0x392)](_0x3e35de(0x36b)); _0x55af8f[_0x3e35de(0x60e)] = '', _0x144c06[_0x3e35de(0x60e)] = '', _0x5dc939[_0x3e35de(0x42c)][_0x3e35de(0x6ec)](_0x3e35de(0x3a9)), _0x55af8f[_0x3e35de(0x464)](); const _0x447e43 = _0x500224 => { const _0x41616e = _0x3e35de; _0x41616e(0x762) === 'KbDNf' ? _0xbc1bb6[_0x41616e(0x7e4)](_0x1167eb) : (_0x5dc939['classList']['remove'](_0x41616e(0x3a9)), _0x45cfa9[_0x41616e(0x998)] = null, _0x525daf[_0x41616e(0x998)] = null, _0x7a7392[_0x41616e(0x998)] = null, document['removeEventListener'](_0x41616e(0x7d9), _0x1940d1), _0x3b2c3e(_0x500224)); }, _0x1befe3 = () => { const _0x4fb75e = _0x3e35de; if (_0x4fb75e(0x821) !== 'grjdI') { const _0x995486 = _0x55af8f[_0x4fb75e(0x60e)][_0x4fb75e(0x8bb)](), _0x4598aa = _0x144c06[_0x4fb75e(0x60e)]['trim'](); if (!_0x995486 || !_0x4598aa) { _0x18c07b(_0x4fb75e(0x911)); return; } _0x447e43({ 'songName': _0x995486, 'artist': _0x4598aa }); } else _0x3aeace[_0x4fb75e(0x420)] !== _0x4fb75e(0xba1) && (_0x4adb86['error'](_0x4fb75e(0x2a9), _0x409d84), _0x5cfd9a({ 'role': _0x4fb75e(0x880), 'content': _0x4fb75e(0x449) + _0x22deae['message'] }, _0x590bf8['conversationHistory'][_0x4fb75e(0x6f2)] - 0x1)); }, _0x1940d1 = _0xb1601 => { const _0x1c4994 = _0x3e35de; if (_0xb1601[_0x1c4994(0xbf4)] === _0x1c4994(0x35a)) _0x447e43(null); _0xb1601[_0x1c4994(0xbf4)] === _0x1c4994(0x9f8) && (_0xb1601[_0x1c4994(0x93e)](), _0x1befe3()); }; _0x45cfa9['onclick'] = _0x1befe3, _0x525daf[_0x3e35de(0x998)] = () => _0x447e43(null), _0x7a7392[_0x3e35de(0x998)] = () => _0x447e43(null), document[_0x3e35de(0xabf)](_0x3e35de(0x7d9), _0x1940d1); }); } function _0x3206f4(_0x921cb1) { const _0x21db70 = _0x2d0b86; if (!_0x921cb1) return []; const _0x5b8887 = _0x921cb1['trim'](); if (_0x5b8887[_0x21db70(0x629)](_0x21db70(0x730)) && _0x5b8887['endsWith'](_0x21db70(0x892))) return [_0x5b8887]; const _0x5d7a87 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x23aef3 = '|||CMD|||', _0x55c22f = [], _0x3a6d1d = _0x921cb1[_0x21db70(0x8d5)](_0x5d7a87, _0x39dada => { const _0x589335 = _0x21db70; return _0x55c22f[_0x589335(0x7e4)](_0x39dada), _0x23aef3; }), _0x1d740f = _0x3a6d1d[_0x21db70(0x686)](_0x23aef3), _0x478bab = []; let _0x31e836 = 0x0; return _0x1d740f[_0x21db70(0xb5e)]((_0x3326b8, _0x233ea3) => { const _0x1937ca = _0x21db70; if ('UZgWg' !== 'VrVGt') { const _0x11afba = _0x3326b8['trim'](); if (_0x11afba) { if (_0x1937ca(0xb2f) === _0x1937ca(0x5e2)) { const _0x36680f = _0x4c5899[_0x1937ca(0x25d)][_0x1937ca(0x5e9)](_0x5f1a57 => _0x578e47['worldBooks'][_0x1937ca(0x69e)](_0x1e0452 => _0x1e0452['id'] === _0x5f1a57))[_0x1937ca(0x742)](_0x5b9fda)[_0x1937ca(0x5e9)](_0x1a4cc9 => _0x1937ca(0x6b0) + _0x1a4cc9[_0x1937ca(0x420)] + '\x0a' + _0x1a4cc9['content'])['join'](''); _0x36680f && (_0x27f4df = _0x1937ca(0x47f) + _0x36680f); } else _0x478bab[_0x1937ca(0x7e4)](..._0x53b18c(_0x11afba)); } _0x31e836 < _0x55c22f[_0x1937ca(0x6f2)] && (_0x478bab['push'](_0x55c22f[_0x31e836][_0x1937ca(0x8bb)]()), _0x31e836++); } else { const _0x3825d0 = _0x2dc483['activeMeetingScriptQueue']['shift'](); _0x2ac1e1[_0x1937ca(0x324)] = _0x3825d0[_0x1937ca(0x5fa)] === _0x1937ca(0x2f0) ? '旁白' : _0x3825d0[_0x1937ca(0x5fa)], _0xd13b7d['textContent'] = _0x3825d0[_0x1937ca(0x7f8)], _0x3825d0[_0x1937ca(0x5fa)] !== _0x1937ca(0x2f0) && _0x39106b(_0x32138e[_0x1937ca(0x8f1)], _0x3825d0[_0x1937ca(0x896)]); } }), _0x478bab; } function _0x43a8f4(_0x2c14d0, _0x47e872, _0x2dc3b8 = '') { const _0x4cef62 = _0x2d0b86, _0xe57399 = document['createElement'](_0x4cef62(0x63a)); _0xe57399['className'] = 'avatar-wrapper\x20' + _0x2dc3b8; const _0x386d97 = document[_0x4cef62(0x92e)]('img'); _0x386d97[_0x4cef62(0x84e)] = _0x2c14d0, _0x386d97[_0x4cef62(0x894)] = _0x4cef62(0x58d); const _0x4a78ad = document[_0x4cef62(0x92e)](_0x4cef62(0x63a)); _0x4a78ad[_0x4cef62(0x894)] = _0x4cef62(0x974); if (_0x47e872) { if ('NAZtO' === 'BeHSj') { const _0x59913a = _0x226412[_0x4cef62(0x89d)]['find'](_0x5f3e7a => _0x5f3e7a['id'] === _0x571ab1[_0x4cef62(0x22e)]) || { 'name': _0x4cef62(0x430) }, _0x27659c = _0x18cd6b[_0x4cef62(0x92e)]('div'); _0x27659c[_0x4cef62(0x894)] = 'world-book-item', _0x27659c['dataset']['id'] = _0x179e90['id'], _0x27659c[_0x4cef62(0x2c9)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x192571[_0x4cef62(0x420)] + _0x4cef62(0x44d) + _0x59913a[_0x4cef62(0x420)] + _0x4cef62(0x531) + _0x52dc48[_0x4cef62(0x8e7)]['length'] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x27659c[_0x4cef62(0xabf)](_0x4cef62(0x4b9), () => _0x1221ee(_0x262da4['id'])), _0x4c77a5[_0x4cef62(0x594)](_0x27659c); } else _0x4a78ad['style']['backgroundImage'] = _0x4cef62(0x24b) + _0x47e872 + '\x27)'; } return _0xe57399['appendChild'](_0x386d97), _0xe57399['appendChild'](_0x4a78ad), _0xe57399; } function _0x107b3a(_0x4438b2) { const _0x220388 = _0x2d0b86; if (!_0x4438b2) return []; let _0x479f7d = String(_0x4438b2)[_0x220388(0x8bb)](); const _0x5a8b8d = _0x479f7d[_0x220388(0xaab)](/```(?:json)?([\s\S]*?)```/i); if (_0x5a8b8d) _0x479f7d = _0x5a8b8d[0x1]['trim'](); try { if ('zDUqY' !== _0x220388(0x27c)) _0x3f5f27[_0x220388(0x9cb)](_0x58dfb2, { 'songName': _0x164ea8, 'artist': _0x6865b, 'coverUrl': null, 'playableUrl': null }); else { const _0x40c942 = JSON['parse'](_0x479f7d); if (_0x40c942 && Array[_0x220388(0x74a)](_0x40c942[_0x220388(0x2da)])) { if (_0x220388(0xaee) === _0x220388(0xaee)) return _0x40c942[_0x220388(0x2da)][_0x220388(0x5e9)](_0x18f57b => typeof _0x18f57b === _0x220388(0x41d) ? _0x18f57b : _0x18f57b?.[_0x220388(0xa19)])[_0x220388(0x742)](Boolean)[_0x220388(0x796)](_0x53b18c); else _0x28b058[_0x220388(0xb5e)](_0x21c27f => { const _0x59cf5f = _0x220388, _0x1250b2 = _0x272291[_0x59cf5f(0x92e)](_0x59cf5f(0x63a)); _0x1250b2[_0x59cf5f(0x894)] = _0x59cf5f(0xba6), _0x1250b2[_0x59cf5f(0x324)] = _0x21c27f[_0x59cf5f(0xa19)], _0x494990[_0x59cf5f(0x594)](_0x1250b2); }); } const _0x4e9cec = [_0x220388(0x98e), 'dialogue', 'message', _0x220388(0xbbc), 'content', 'line', _0x220388(0x7a5)]; if (_0x40c942 && typeof _0x40c942 === 'object') { if ('aHDQY' !== 'aHDQY') _0x4341bc[_0x220388(0x5b1)]('加载卡片图片失败', _0x263f63); else { const _0x9f6787 = []; for (const _0x3a09d0 of Object[_0x220388(0xabd)](_0x40c942)) { const _0x1d955d = _0x3a09d0[_0x220388(0x92f)](); if (_0x4e9cec['some'](_0x4294ec => _0x1d955d[_0x220388(0x629)](_0x4294ec))) { if (_0x220388(0x56d) === _0x220388(0x878)) _0x44cabc('音乐搜索失败:\x20' + _0x3ccf9b[_0x220388(0x542)]); else { const _0x4c758a = _0x40c942[_0x3a09d0]; if (typeof _0x4c758a === _0x220388(0x41d)) _0x9f6787[_0x220388(0x7e4)](_0x4c758a); if (Array[_0x220388(0x74a)](_0x4c758a)) _0x4c758a['forEach'](_0x11c4db => { if (typeof _0x11c4db === 'string') _0x9f6787['push'](_0x11c4db); }); } } } if (_0x9f6787[_0x220388(0x6f2)]) return _0x9f6787[_0x220388(0x796)](_0x53b18c)[_0x220388(0x43d)](0x0, 0x9); } } } } catch { } if (/[{\[]/['test'](_0x479f7d) && /":/[_0x220388(0x328)](_0x479f7d)) { const _0x1d28bf = [], _0x3d57c3 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x896423; while ((_0x896423 = _0x3d57c3['exec'](_0x479f7d)) !== null) { if (_0x220388(0x775) === _0x220388(0xad8)) _0x27e8fd[_0x220388(0x42c)][_0x220388(0xb26)](_0x220388(0x931), _0x220388(0x44e)), _0x4e9f8d[_0x220388(0x42c)][_0x220388(0xb26)]('is-entering-from-left'), _0x7a4ef[_0x220388(0x1ff)] = _0x47b344, _0x409a71(), _0x181cae[_0x220388(0x624)] = ![]; else { const _0x4ac236 = _0x896423[0x1][_0x220388(0x8d5)](/\\"/g, '\x22')[_0x220388(0x8d5)](/\\n/g, '\x0a')[_0x220388(0x8bb)](); if (_0x4ac236) _0x1d28bf[_0x220388(0x7e4)](_0x4ac236); } } if (_0x1d28bf[_0x220388(0x6f2)]) return _0x1d28bf['flatMap'](_0x53b18c)[_0x220388(0x43d)](0x0, 0x9); } return _0x53b18c(_0x479f7d); } function _0x53b18c(_0x15302a) { const _0x578481 = _0x2d0b86; if (!_0x15302a) return []; const _0x1ada1b = String(_0x15302a)[_0x578481(0x8bb)](), _0x28973a = _0x1ada1b[_0x578481(0x686)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x578481(0x5e9)](_0x5c4f35 => _0x5c4f35['trim']())[_0x578481(0x742)](Boolean); if (_0x28973a['length'] > 0x0) return _0x28973a[_0x578481(0x43d)](0x0, 0x9); return [_0x1ada1b][_0x578481(0x742)](Boolean); } const _0x1282ec = new Promise((_0x48ea70, _0x59ddcb) => { const _0x520e54 = _0x2d0b86, _0x5f5369 = indexedDB[_0x520e54(0x613)](_0xc9d9b7, 0x3); _0x5f5369[_0x520e54(0x677)] = () => _0x59ddcb(_0x520e54(0x68a)), _0x5f5369[_0x520e54(0x817)] = () => _0x48ea70(_0x5f5369['result']), _0x5f5369[_0x520e54(0x559)] = _0x2a0076 => { const _0x102d42 = _0x520e54; if (_0x102d42(0x248) === _0x102d42(0x395)) { const _0xeb635a = _0x47d7cb['createElement'](_0x102d42(0x9b6)); _0xeb635a[_0x102d42(0x60e)] = _0x22b4f8['id'], _0xeb635a[_0x102d42(0x324)] = _0x2f0a1c['name'], _0x225743[_0x102d42(0x594)](_0xeb635a); } else { const _0x25f8ad = _0x2a0076[_0x102d42(0xa4c)][_0x102d42(0x3cf)]; console['log']('Upgrading\x20database\x20to\x20version\x20' + _0x25f8ad[_0x102d42(0xb90)] + _0x102d42(0x86f)); if (!_0x25f8ad['objectStoreNames'][_0x102d42(0xb2d)](_0x523203)) { if ('McLqp' === 'McLqp') console[_0x102d42(0xbf0)]('Creating\x20object\x20store:\x20' + _0x523203), _0x25f8ad[_0x102d42(0xa6f)](_0x523203, { 'keyPath': 'id' }); else return _0x2cf5a9('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; } if (!_0x25f8ad[_0x102d42(0x89a)][_0x102d42(0xb2d)]('music_library')) { if (_0x102d42(0x9d4) === _0x102d42(0x7c3)) { let _0x37f623 = null; const _0x5f25c0 = _0x32464d['chats'][_0x102d42(0x742)](_0x5d7096 => _0x5d7096[_0x102d42(0xa2a)][_0x102d42(0x21d)](_0x3d4f99)); for (const _0x2e0bf0 of _0x5f25c0) { const _0x59b8bd = _0x13b0d0(_0x2e0bf0['id']); if (_0x59b8bd && _0x59b8bd[_0x102d42(0x6f2)] > 0x0) { const _0x231b26 = _0x59b8bd[_0x59b8bd[_0x102d42(0x6f2)] - 0x1]; (!_0x37f623 || _0x231b26[_0x102d42(0x518)] > _0x37f623[_0x102d42(0x518)]) && (_0x37f623 = _0x231b26); } } return _0x37f623; } else console[_0x102d42(0xbf0)](_0x102d42(0x3dd)), _0x25f8ad[_0x102d42(0xa6f)](_0x102d42(0x8f7), { 'keyPath': 'id' }); } !_0x25f8ad[_0x102d42(0x89a)][_0x102d42(0xb2d)](_0x6be7aa) && (_0x102d42(0x55a) !== _0x102d42(0x7c5) ? (console[_0x102d42(0xbf0)](_0x102d42(0x940) + _0x6be7aa), _0x25f8ad[_0x102d42(0xa6f)](_0x6be7aa, { 'keyPath': 'id' })) : (_0xb3ecdd(), _0x50c9cb(_0x102d42(0x69b), _0x102d42(0x94f)))); } }; }); async function _0x1de353(_0x5818b3) { const _0x90e9dc = await _0x1282ec; return new Promise((_0x8ae76e, _0x45416e) => { const _0x21344e = _0x198c; if (_0x21344e(0x569) !== _0x21344e(0x569)) { _0x529fde[_0x21344e(0x2c9)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>'; return; } else { const _0x5de2ba = _0x90e9dc[_0x21344e(0x281)](_0x523203, _0x21344e(0xae5)), _0x84b364 = _0x5de2ba[_0x21344e(0x4c5)](_0x523203), _0xf884f3 = _0x84b364['get'](_0x5818b3); _0xf884f3[_0x21344e(0x817)] = () => _0x8ae76e(_0xf884f3[_0x21344e(0x3cf)] ? _0xf884f3[_0x21344e(0x3cf)][_0x21344e(0x713)] : null), _0xf884f3[_0x21344e(0x677)] = () => _0x45416e(_0xf884f3[_0x21344e(0x5b1)]); } }); } async function _0x1ccaa1(_0x1d246b) { const _0x6a03d8 = await _0x1282ec; return new Promise((_0x51e56d, _0x5c4ad4) => { const _0x57471c = _0x198c, _0x46a697 = _0x6a03d8['transaction'](_0x6be7aa, _0x57471c(0xae5)), _0x2dc1cb = _0x46a697[_0x57471c(0x4c5)](_0x6be7aa), _0x5cedad = _0x2dc1cb['get'](_0x1d246b); _0x5cedad[_0x57471c(0x817)] = () => _0x51e56d(_0x5cedad['result'] ? _0x5cedad[_0x57471c(0x3cf)]['data'] : null), _0x5cedad[_0x57471c(0x677)] = () => _0x5c4ad4(_0x5cedad[_0x57471c(0x5b1)]); }); } async function _0x1aa3a9(_0x43c2fe, _0x7ec544) { const _0xf29329 = await _0x1282ec; return new Promise((_0x1e924e, _0x3ae0c3) => { const _0xa2266 = _0x198c; if (_0xa2266(0x2f2) !== _0xa2266(0x2f2)) _0x166108['friendCircles'] = _0x4d722f[_0xa2266(0x2b2)]['filter'](_0x4795b8 => _0x4795b8['id'] !== _0x43fd30), _0x1b56f1[_0xa2266(0xbb0)] === _0x5c5312 && (_0xe733fd[_0xa2266(0xbb0)] = null), _0x3dd900(), _0x37170c('好友圈已删除。'), _0xe791d9(), _0x4bfce4(_0xa2266(0xa2c), 'friendCircleEdit'); else { const _0x501ef9 = _0xf29329[_0xa2266(0x281)](_0x6be7aa, 'readwrite'), _0x5d5df4 = _0x501ef9[_0xa2266(0x4c5)](_0x6be7aa), _0xf05e33 = _0x5d5df4[_0xa2266(0x701)]({ 'id': _0x43c2fe, 'data': _0x7ec544 }); _0xf05e33['onsuccess'] = () => _0x1e924e(), _0xf05e33['onerror'] = () => _0x3ae0c3(_0xf05e33[_0xa2266(0x5b1)]); } }); } async function _0x2ab875(_0x79b9b2) { const _0x4cdde4 = await _0x1282ec; return new Promise((_0x2940b0, _0x3ae133) => { const _0x5597e0 = _0x198c; if ('wnpga' === 'wnpga') { const _0x1da33f = _0x4cdde4[_0x5597e0(0x281)](_0x6be7aa, _0x5597e0(0xae0)), _0x4e2f37 = _0x1da33f[_0x5597e0(0x4c5)](_0x6be7aa), _0x157162 = _0x4e2f37['delete'](_0x79b9b2); _0x157162['onsuccess'] = () => _0x2940b0(), _0x157162[_0x5597e0(0x677)] = () => _0x3ae133(_0x157162[_0x5597e0(0x5b1)]); } else { _0x3348ff['error'](_0x5597e0(0x3d0)); return; } }); } async function _0x3b613b(_0x1c50ca, _0x5dfce7) { const _0x4bd589 = await _0x1282ec; return new Promise((_0x4cfbc6, _0x8e07de) => { const _0x3632ab = _0x198c; if (_0x3632ab(0xa69) === _0x3632ab(0x36e)) { const _0x36188b = { 'id': _0x3632ab(0xb06) + _0x4a9581[_0x3632ab(0x9b4)](), 'name': _0x5174bf, 'content': _0x464b99 }; _0x3f8cf8[_0x3632ab(0x285)][_0x3632ab(0x7e4)](_0x36188b); } else { const _0xa16425 = _0x4bd589[_0x3632ab(0x281)](_0x523203, _0x3632ab(0xae0)), _0x20ccf8 = _0xa16425[_0x3632ab(0x4c5)](_0x523203), _0x53ee5f = _0x20ccf8[_0x3632ab(0x701)]({ 'id': _0x1c50ca, 'blob': _0x5dfce7 }); _0x53ee5f[_0x3632ab(0x817)] = () => _0x4cfbc6(_0x53ee5f[_0x3632ab(0x3cf)]), _0x53ee5f['onerror'] = () => _0x8e07de(_0x53ee5f[_0x3632ab(0x5b1)]); } }); } async function _0x597764(_0x41a953) { const _0x1fee6e = await _0x1282ec; return new Promise((_0x3de304, _0x33ce) => { const _0x51a51b = _0x198c, _0x1de5b3 = _0x1fee6e['transaction'](_0x523203, _0x51a51b(0xae0)), _0x308097 = _0x1de5b3['objectStore'](_0x523203), _0x4a9011 = _0x308097[_0x51a51b(0x87c)](_0x41a953); _0x4a9011[_0x51a51b(0x817)] = () => _0x3de304(), _0x4a9011[_0x51a51b(0x677)] = () => _0x33ce(_0x4a9011['error']); }); } function _0x5db80c(_0x444110) { const _0x495e0b = _0x2d0b86; return fetch(_0x444110)[_0x495e0b(0x54a)](_0x3be45b => _0x3be45b[_0x495e0b(0x713)]()); }
  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
