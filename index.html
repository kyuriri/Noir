<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>
    const _0x3ea4fd = _0x493f; (function (_0x94464f, _0x1c088a) { const _0x3fbfe8 = _0x493f, _0x50fbf6 = _0x94464f(); while (!![]) { try { const _0x2c7bea = -parseInt(_0x3fbfe8(0x8ed)) / 0x1 * (parseInt(_0x3fbfe8(0x882)) / 0x2) + -parseInt(_0x3fbfe8(0x68e)) / 0x3 + -parseInt(_0x3fbfe8(0xad1)) / 0x4 + -parseInt(_0x3fbfe8(0xa01)) / 0x5 + -parseInt(_0x3fbfe8(0x474)) / 0x6 * (parseInt(_0x3fbfe8(0x1e5)) / 0x7) + -parseInt(_0x3fbfe8(0x7d6)) / 0x8 * (parseInt(_0x3fbfe8(0x40e)) / 0x9) + -parseInt(_0x3fbfe8(0x231)) / 0xa * (-parseInt(_0x3fbfe8(0x356)) / 0xb); if (_0x2c7bea === _0x1c088a) break; else _0x50fbf6['push'](_0x50fbf6['shift']()); } catch (_0xc681d) { _0x50fbf6['push'](_0x50fbf6['shift']()); } } }(_0x1487, 0x9c5c6)); function _0x668643(_0x4ee3ba = new Date()) { const _0x1d84ff = _0x493f, _0x234800 = _0x4ee3ba[_0x1d84ff(0x374)](), _0x1c7a6f = String(_0x4ee3ba[_0x1d84ff(0x978)]() + 0x1)[_0x1d84ff(0xa83)](0x2, '0'), _0x5c6f18 = String(_0x4ee3ba[_0x1d84ff(0x8ff)]())[_0x1d84ff(0xa83)](0x2, '0'); return _0x234800 + '-' + _0x1c7a6f + '-' + _0x5c6f18; } const _0x28a702 = _0x3ea4fd(0x570), _0x1ae959 = _0x3ea4fd(0xa7f), _0x5211d8 = _0x3ea4fd(0xaff), _0x57b7e5 = document['createElement'](_0x3ea4fd(0x313)); _0x57b7e5['id'] = _0x3ea4fd(0xa8b), document[_0x3ea4fd(0x8be)][_0x3ea4fd(0x168)](_0x57b7e5); var _0x1884b1, _0x361c6d = null; let _0x356d37 = [], _0x15dd9a = ![], _0x11bf67 = { 'x': 0x0, 'y': 0x0 }; function _0x4a9025(_0x540160) { const _0x2db362 = _0x3ea4fd; return (_0x1884b1?.[_0x2db362(0x358)] || [])[_0x2db362(0x6f9)](_0x2a030a => _0x2a030a['id'] === _0x540160); } const _0x48e921 = _0x3ea4fd(0x623), _0x100125 = _0x3ea4fd(0x1ed), _0xe4a1db = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', _0x2d17f0 = [{ 'name': '委屈哭', 'url': _0x3ea4fd(0x70e) }, { 'name': '崩溃', 'url': 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg' }, { 'name': '生病', 'url': 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg' }, { 'name': '工作', 'url': _0x3ea4fd(0x2cb) }, { 'name': _0x3ea4fd(0x4cc), 'url': _0x3ea4fd(0x758) }, { 'name': _0x3ea4fd(0x1d5), 'url': _0x3ea4fd(0x7de) }, { 'name': _0x3ea4fd(0xaf2), 'url': _0x3ea4fd(0x323) }, { 'name': '期待', 'url': 'https://sharkpan.xyz/f/35lse/xmsue5.jpg' }, { 'name': '喜欢', 'url': _0x3ea4fd(0x861) }, { 'name': '被萌到', 'url': _0x3ea4fd(0x9b8) }, { 'name': '有点生气', 'url': _0x3ea4fd(0x6a9) }, { 'name': '委屈', 'url': _0x3ea4fd(0x632) }, { 'name': '加油', 'url': _0x3ea4fd(0x8c5) }, { 'name': '对的', 'url': 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg' }, { 'name': '不满', 'url': 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg' }, { 'name': _0x3ea4fd(0xa3d), 'url': _0x3ea4fd(0x736) }, { 'name': '猫猫撒娇', 'url': _0x3ea4fd(0xa90) }, { 'name': '委屈', 'url': _0x3ea4fd(0x1c9) }, { 'name': '平静', 'url': _0x3ea4fd(0x31a) }, { 'name': '咬你', 'url': 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg' }, { 'name': '咱俩天下第一好', 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg' }, { 'name': '摸鱼', 'url': 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg' }, { 'name': _0x3ea4fd(0x90c), 'url': 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg' }, { 'name': _0x3ea4fd(0x4e4), 'url': _0x3ea4fd(0x1d8) }, { 'name': _0x3ea4fd(0x61d), 'url': _0x3ea4fd(0x83a) }, { 'name': '一起听歌', 'url': 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg' }, { 'name': '刷我的卡', 'url': _0x3ea4fd(0x449) }, { 'name': _0x3ea4fd(0xb13), 'url': _0x3ea4fd(0x35b) }, { 'name': _0x3ea4fd(0x9ee), 'url': 'https://sharkpan.xyz/f/djyi8/1en214.jpg' }, { 'name': _0x3ea4fd(0x209), 'url': _0x3ea4fd(0xa64) }, { 'name': '我是垃圾', 'url': _0x3ea4fd(0x6c9) }, { 'name': _0x3ea4fd(0x40f), 'url': 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg' }, { 'name': _0x3ea4fd(0xa35), 'url': _0x3ea4fd(0xab2) }, { 'name': _0x3ea4fd(0x7ae), 'url': 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg' }, { 'name': '干劲满满', 'url': _0x3ea4fd(0x658) }, { 'name': _0x3ea4fd(0x6cc), 'url': _0x3ea4fd(0x211) }, { 'name': '交给我吧', 'url': _0x3ea4fd(0x2b3) }, { 'name': _0x3ea4fd(0x88b), 'url': _0x3ea4fd(0x33d) }, { 'name': _0x3ea4fd(0x6cf), 'url': _0x3ea4fd(0x60f) }, { 'name': _0x3ea4fd(0x1bd), 'url': _0x3ea4fd(0x2d7) }, { 'name': _0x3ea4fd(0x5e0), 'url': _0x3ea4fd(0x6db) }, { 'name': _0x3ea4fd(0x6a4), 'url': 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg' }, { 'name': _0x3ea4fd(0x5cf), 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': _0x3ea4fd(0x235), 'url': _0x3ea4fd(0x68a) }, { 'name': _0x3ea4fd(0x1fd), 'url': _0x3ea4fd(0x867) }, { 'name': _0x3ea4fd(0x6f4), 'url': _0x3ea4fd(0x5b5) }, { 'name': _0x3ea4fd(0x1b8), 'url': 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg' }, { 'name': '我是小丑呜呜', 'url': _0x3ea4fd(0x274) }, { 'name': _0x3ea4fd(0x4f6), 'url': 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg' }, { 'name': _0x3ea4fd(0x4dc), 'url': _0x3ea4fd(0x1db) }, { 'name': _0x3ea4fd(0x7d8), 'url': 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg' }, { 'name': _0x3ea4fd(0x190), 'url': _0x3ea4fd(0x8df) }, { 'name': '等你', 'url': 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg' }, { 'name': _0x3ea4fd(0x702), 'url': 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg' }, { 'name': _0x3ea4fd(0x6b5), 'url': _0x3ea4fd(0x507) }, { 'name': '喝酒', 'url': _0x3ea4fd(0x50d) }, { 'name': _0x3ea4fd(0x640), 'url': _0x3ea4fd(0x417) }, { 'name': '呜呜', 'url': _0x3ea4fd(0x1a9) }, { 'name': '为你骄傲', 'url': _0x3ea4fd(0x523) }, { 'name': '我错了', 'url': _0x3ea4fd(0x6e0) }, { 'name': _0x3ea4fd(0x2d4), 'url': _0x3ea4fd(0x946) }, { 'name': _0x3ea4fd(0x291), 'url': _0x3ea4fd(0x9e2) }, { 'name': _0x3ea4fd(0x73a), 'url': _0x3ea4fd(0x496) }], _0x77c09b = { 'beige': { 'name': '默认米白', 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': '薄荷水色', 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x3ea4fd(0x4b5), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x3ea4fd(0x348), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x3ea4fd(0xacf)](_0x3ea4fd(0x5e6), () => { const _0x5f58e0 = _0x3ea4fd, _0x24fd32 = document[_0x5f58e0(0x653)](_0x5f58e0(0x88a)), _0x535eb6 = document[_0x5f58e0(0x653)]('chat-transfer-button'), _0x35b3b8 = document['getElementById'](_0x5f58e0(0xa6c)), _0x32c27f = document['getElementById'](_0x5f58e0(0xac3)), _0xce4c2b = document[_0x5f58e0(0x653)](_0x5f58e0(0x980)), _0x1bb201 = document[_0x5f58e0(0x653)](_0x5f58e0(0x6fb)), _0x5e0a19 = document[_0x5f58e0(0x653)]('transfer-recipient-group'), _0x110a74 = document['getElementById'](_0x5f58e0(0x79a)), _0x2a0938 = document[_0x5f58e0(0x653)](_0x5f58e0(0x703)), _0x53a4fb = document[_0x5f58e0(0x653)]('chat-reroll-button'), _0x1540f5 = document[_0x5f58e0(0x653)](_0x5f58e0(0x7b5)), _0x594899 = document[_0x5f58e0(0x653)](_0x5f58e0(0xb3b)), _0x4324df = document['getElementById'](_0x5f58e0(0x3fd)), _0x3cfe08 = document[_0x5f58e0(0x653)]('summary-textarea'), _0x1aed27 = document[_0x5f58e0(0x653)](_0x5f58e0(0x78c)), _0x285905 = document[_0x5f58e0(0x653)](_0x5f58e0(0x7ac)), _0x13a3cb = document[_0x5f58e0(0x653)](_0x5f58e0(0x787)), _0x363924 = document[_0x5f58e0(0x653)](_0x5f58e0(0x187)), _0x3d86b = document[_0x5f58e0(0x653)](_0x5f58e0(0x2e1)), _0x27a5a1 = document[_0x5f58e0(0x653)](_0x5f58e0(0x1e3)), _0x1cbf2a = document['getElementById'](_0x5f58e0(0x406)), _0x415549 = document['getElementById'](_0x5f58e0(0x4c2)), _0x37e2b9 = document['getElementById'](_0x5f58e0(0x1fe)), _0x5ab55c = document[_0x5f58e0(0x653)](_0x5f58e0(0x7a1)), _0x1cf891 = document['getElementById'](_0x5f58e0(0xa1b)), _0x49f3dc = document[_0x5f58e0(0x653)](_0x5f58e0(0x9da)), _0xfc25b7 = document['getElementById'](_0x5f58e0(0x30a)); async function _0xb18857(_0x561506) { const _0x34ea30 = _0x5f58e0; try { const _0x551a14 = URL[_0x34ea30(0x264)](_0x561506), _0x433eea = _0x34ea30(0x844), _0x32e68c = _0x34ea30(0x33e) + _0x433eea + _0x34ea30(0xaf7) + _0x551a14 + _0x34ea30(0x36e); _0x57b7e5['innerHTML'] = _0x32e68c, document[_0x34ea30(0x82a)][_0x34ea30(0x313)][_0x34ea30(0x3d0)](_0x34ea30(0x6d8), '\x27' + _0x433eea + '\x27'), _0xfc25b7[_0x34ea30(0x8f9)] = _0x34ea30(0x23a); } catch (_0x3ef404) { console[_0x34ea30(0x5f0)](_0x34ea30(0xae4), _0x3ef404), _0x5929aa(_0x34ea30(0x911)); } } async function _0x10e983() { const _0x33db73 = _0x5f58e0; if (_0x33db73(0x87f) !== _0x33db73(0xa50)) try { const _0x439319 = await _0x329660(_0x33db73(0x6ad)); _0x439319 && (console[_0x33db73(0xace)]('检测到已保存的字体，正在应用...'), await _0xb18857(_0x439319)); } catch (_0x44446a) { if (_0x33db73(0x813) !== 'PGjtY') console['error'](_0x33db73(0x8d7), _0x44446a); else { _0x3e2ead(); const _0x41cb62 = _0x367e3a[_0x33db73(0xa26)][_0x33db73(0x6f9)](_0x575436 => _0x575436['id'] === _0x4b5f96); if (!_0x41cb62) return; _0x3c9971[_0x33db73(0x825)] = _0x455a45, _0x6b3a97(), _0x1505d0[_0x33db73(0x653)]('friend-circle-title')['textContent'] = _0x41cb62['name'], _0x44ec31(), _0x53e793(_0x33db73(0x35c), _0x33db73(0x585)), _0x10889f(); } } else { _0x1757c8[_0x33db73(0x358)] = _0x26c191['characters'][_0x33db73(0x776)](_0x371f78 => _0x371f78['id'] !== _0x462af9), _0x11f1c4[_0x33db73(0x940)][_0x33db73(0xa30)](_0x6db2c6 => { const _0x5616d4 = _0x33db73; _0x6db2c6[_0x5616d4(0x8c3)] === _0x5616d4(0x2b7) && (_0x6db2c6[_0x5616d4(0x3d5)] = _0x6db2c6[_0x5616d4(0x3d5)][_0x5616d4(0x776)](_0x465b12 => _0x465b12 !== _0x1e7387)); }); const _0x5edadb = _0x197d50['chats'][_0x33db73(0x6f9)](_0x2b22e1 => _0x2b22e1[_0x33db73(0x8c3)] === _0x33db73(0xaa7) && _0x2b22e1[_0x33db73(0x3d5)][_0x33db73(0x1ac)](_0x99cb4c)); _0x5edadb && _0x259c21(_0x5edadb['id']), _0x1f5f03[_0x33db73(0x940)] = _0x1c9513[_0x33db73(0x940)][_0x33db73(0x776)](_0x200f8f => _0x200f8f['type'] !== _0x33db73(0x2b7) || _0x200f8f[_0x33db73(0x3d5)][_0x33db73(0x8a0)] > 0x1), _0xbc67c9(), _0x1a9cb8(); } } async function _0x478b6e(_0x1919c4) { const _0x2a3e0f = _0x5f58e0; if (_0x2a3e0f(0x995) !== _0x2a3e0f(0x65d)) { const _0x102454 = _0x1919c4[_0x2a3e0f(0xa4b)][_0x2a3e0f(0x53d)][0x0]; if (!_0x102454 || !_0x102454[_0x2a3e0f(0x7d7)]['toLowerCase']()['endsWith'](_0x2a3e0f(0x1fb))) { if (_0x2a3e0f(0x910) !== _0x2a3e0f(0xb76)) { _0x5929aa(_0x2a3e0f(0xb66)); return; } else { const _0x3cd9e0 = _0x13f1f5[_0x2a3e0f(0x562)][_0x2a3e0f(0x6f9)](_0x5431e8 => _0x5431e8['id'] === _0x1d48e2); _0x3cd9e0 && (_0x3cd9e0[_0x2a3e0f(0x7d7)] = _0x125b68, _0x3cd9e0[_0x2a3e0f(0x329)] = _0x3d4f42); } } _0x1d9e54(!![], _0x2a3e0f(0x880)); try { await _0x100c88(_0x2a3e0f(0x6ad), _0x102454), await _0xb18857(_0x102454), _0x5929aa(_0x2a3e0f(0x7c7)); } catch (_0x5110a5) { _0x2a3e0f(0xb16) === _0x2a3e0f(0xb16) ? _0x5929aa(_0x2a3e0f(0xa62) + _0x5110a5[_0x2a3e0f(0xa53)]) : (_0x25e4f1['error']('下载并转换网络封面失败:', _0x327997), _0x1efead = _0x2c8e3e); } finally { _0x1d9e54(![]), _0x49f3dc['value'] = ''; } } else { const _0xe6292b = _0x1d6b0f(_0x1931a1[_0x2a3e0f(0x3cd)]); if (_0x56c55c(_0xe6292b) || _0xe6292b <= 0x0) { _0x551956(_0x2a3e0f(0x586)); return; } const _0x2df141 = _0x38249b(); let _0x36f971 = null; _0x2df141[_0x2a3e0f(0x8c3)] === _0x2a3e0f(0x2b7) ? _0x36f971 = _0x476ac5['value'] : _0x36f971 = _0x2df141[_0x2a3e0f(0x3d5)][0x0]; const _0x175d8f = _0x2b9755(_0x2df141['id']), _0x1185a5 = { 'role': _0x2a3e0f(0x901), 'type': _0x2a3e0f(0x7b8), 'content': '[用户向\x20' + (_0x40cd96(_0x36f971)?.[_0x2a3e0f(0x7d7)] || '未知') + '\x20转账\x20' + _0xe6292b + ']', 'amount': _0xe6292b, 'recipientId': _0x36f971, 'senderId': _0x175d8f['id'], 'timestamp': _0x3e742a[_0x2a3e0f(0x965)]() }; _0x25a55b['conversationHistory']['push'](_0x1185a5), _0x1d3edc(), _0x1b5929(), _0x4993a1['classList'][_0x2a3e0f(0x344)]('show'); } } async function _0x1efc8b() { const _0x2d40ba = _0x5f58e0, _0x4b63f7 = await _0x9e00ac(_0x2d40ba(0x452)); if (_0x4b63f7) { if (_0x2d40ba(0x92d) !== _0x2d40ba(0x92d)) _0x5440a5[_0x2d40ba(0x8f9)] = '旁白', _0xcadd2c[_0x2d40ba(0x8f9)] = '（对话结束）'; else try { if ('NXVnK' === _0x2d40ba(0x669)) await _0x48fa9d(_0x2d40ba(0x6ad)), _0x57b7e5[_0x2d40ba(0x9c2)] = '', document[_0x2d40ba(0x82a)][_0x2d40ba(0x313)][_0x2d40ba(0x84d)](_0x2d40ba(0x6d8)), _0xfc25b7['textContent'] = _0x2d40ba(0x72e), _0x5929aa(_0x2d40ba(0x783)); else { if (!_0x154917[_0x2d40ba(0xb41)](_0x285715)) return _0x2d40ba(0x2bf); if (_0x4cd962[_0x2d40ba(0x8a0)] === 0x0) return _0x2d40ba(0x226); return _0x38a153[_0x2d40ba(0x9ec)]((_0x44a217, _0x35b03d) => new _0x54f6b2(_0x35b03d[_0x2d40ba(0x1af)]) - new _0x5776e3(_0x44a217[_0x2d40ba(0x1af)])), _0x534880['map'](_0x49fb57 => _0x2d40ba(0x412) + (_0x49fb57[_0x2d40ba(0x581)] || '未知商店') + _0x2d40ba(0x8f2) + (_0x49fb57['timestamp'] || '') + _0x2d40ba(0x3f0) + (_0x49fb57['item_name'] || _0x2d40ba(0x68f)) + _0x2d40ba(0x996) + (_0x49fb57[_0x2d40ba(0xa11)] || 0x0)[_0x2d40ba(0x395)](0x2) + _0x2d40ba(0x6c5))[_0x2d40ba(0x359)](''); } } catch (_0x44e75b) { if (_0x2d40ba(0x3b8) === 'DdsEc') _0x5929aa('恢复失败了:\x20' + _0x44e75b[_0x2d40ba(0xa53)]); else { const _0x58e232 = _0x30abf2[_0x2d40ba(0x653)](_0x2d40ba(0x780)), _0x21a6aa = _0x59a691[_0x2d40ba(0x653)](_0x2d40ba(0x9bf)), _0x13c399 = _0x3feaae['querySelector']('#meeting-view-screen\x20.chat-input-area'); _0x313d3e['meetingViewMode'] === _0x2d40ba(0x53b) ? (_0x58e232[_0x2d40ba(0x313)][_0x2d40ba(0x272)] = 'none', _0x21a6aa[_0x2d40ba(0x313)][_0x2d40ba(0x272)] = _0x2d40ba(0x8b0)) : (_0x58e232[_0x2d40ba(0x313)]['display'] = _0x2d40ba(0x8b0), _0x21a6aa[_0x2d40ba(0x313)][_0x2d40ba(0x272)] = 'none'), _0x13c399[_0x2d40ba(0x313)][_0x2d40ba(0x272)] = 'block'; } } } } function _0x21fa93() { const _0x329db0 = _0x5f58e0; if ('tgkNc' === _0x329db0(0x60e)) { const _0x1580e6 = document['getElementById'](_0x329db0(0x9b3)); if (!_0x1580e6) return; const _0x3e33f2 = localStorage[_0x329db0(0x6da)](_0x329db0(0x3da)) || '35'; document['documentElement'][_0x329db0(0x313)][_0x329db0(0x3d0)](_0x329db0(0x8ea), _0x3e33f2), _0x1580e6['value'] = _0x3e33f2, _0x1580e6[_0x329db0(0xacf)](_0x329db0(0x49e), () => { const _0x3c641c = _0x329db0, _0x4d247c = _0x1580e6[_0x3c641c(0x3cd)]; document[_0x3c641c(0x82a)][_0x3c641c(0x313)][_0x3c641c(0x3d0)](_0x3c641c(0x8ea), _0x4d247c), localStorage[_0x3c641c(0x7db)](_0x3c641c(0x3da), _0x4d247c), _0x166a54(); }); } else { const _0x35df76 = 0x32; if (_0x2f5b91 < _0x5228ad - _0x35df76) _0x3fc2f4(_0x5d1db9 + 0x1); else _0x30a270 > _0x551062 + _0x35df76 && _0x270b3a(_0x348b13 - 0x1); } } function _0x26d6a8() { const _0x51e066 = _0x5f58e0, _0x24bce0 = document[_0x51e066(0x653)](_0x51e066(0x3ee)); if (!_0x24bce0) return; const _0xba5377 = localStorage[_0x51e066(0x6da)](_0x51e066(0x652)) || '80'; document[_0x51e066(0x82a)][_0x51e066(0x313)]['setProperty'](_0x51e066(0x253), _0xba5377 + '%'), _0x24bce0['value'] = _0xba5377, _0x24bce0[_0x51e066(0xacf)](_0x51e066(0x49e), () => { const _0xdf700a = _0x51e066, _0x4df37f = _0x24bce0[_0xdf700a(0x3cd)]; document['documentElement'][_0xdf700a(0x313)][_0xdf700a(0x3d0)](_0xdf700a(0x253), _0x4df37f + '%'), localStorage[_0xdf700a(0x7db)](_0xdf700a(0x652), _0x4df37f), _0x166a54(); }); } function _0x166a54() { const _0x2dd769 = _0x5f58e0; if (_0x2dd769(0x9d8) !== _0x2dd769(0xb7c)) { const _0x5b2bcd = document['getElementById'](_0x2dd769(0x90d)); if (!_0x5b2bcd) return; _0x1884b1[_0x2dd769(0xa17)][_0x2dd769(0x84a)] ? (_0x5b2bcd[_0x2dd769(0x313)][_0x2dd769(0x2b2)] = '#FFFFFF', _0x5b2bcd[_0x2dd769(0x313)][_0x2dd769(0x6c4)] = _0x2dd769(0x457)) : (_0x5b2bcd[_0x2dd769(0x313)][_0x2dd769(0x2b2)] = 'var(--text-color)', _0x5b2bcd[_0x2dd769(0x313)]['textShadow'] = _0x2dd769(0x643)); } else { const _0x36ab49 = _0x5761c2[_0x2dd769(0x3cd)]; _0x41ce12[_0x2dd769(0x82a)][_0x2dd769(0x313)][_0x2dd769(0x3d0)]('--primary-lightness', _0x36ab49 + '%'), _0x415760[_0x2dd769(0x7db)]('themeLightness', _0x36ab49), _0x9e5d4c(); } } function _0x334eae() { const _0x4985e9 = _0x5f58e0; if (_0x4985e9(0x57a) === _0x4985e9(0x88e)) _0x1a6909(), _0x49314b('calendar', _0x4985e9(0x6fe)); else { const _0x2fe37e = document['getElementById'](_0x4985e9(0x3a4)); if (!_0x2fe37e) return; _0x2fe37e[_0x4985e9(0x65f)] = _0x1884b1[_0x4985e9(0xa17)][_0x4985e9(0x84a)] || ![], _0x2fe37e[_0x4985e9(0xacf)]('change', () => { const _0x25c662 = _0x4985e9; _0x25c662(0x75b) === _0x25c662(0x64c) ? _0x57e2c7[_0x10d3c9] = _0x50c775['parse'](_0x185508) : (_0x1884b1[_0x25c662(0xa17)][_0x25c662(0x84a)] = _0x2fe37e[_0x25c662(0x65f)], _0x480928(), _0x166a54()); }); } } _0x37e2b9[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x47725a), _0x1cbf2a[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0xc57397 = _0x5f58e0; _0x2e96f3(), _0x415549[_0xc57397(0x4f4)](); }), _0x415549[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), _0x3eafdf); const _0x28fb8b = { 'home': document[_0x5f58e0(0x653)]('home-screen'), 'chat': document[_0x5f58e0(0x653)]('chat-screen'), 'settings': document[_0x5f58e0(0x653)]('settings-screen'), 'userProfile': document[_0x5f58e0(0x653)](_0x5f58e0(0x8d2)), 'characterEdit': document[_0x5f58e0(0x653)]('character-edit-screen'), 'groupChatCreate': document[_0x5f58e0(0x653)]('group-chat-create-screen'), 'wallpaper': document[_0x5f58e0(0x653)](_0x5f58e0(0x225)), 'worldBook': document[_0x5f58e0(0x653)](_0x5f58e0(0x271)), 'worldBookEditor': document[_0x5f58e0(0x653)]('world-book-editor-screen'), 'groupSettings': document[_0x5f58e0(0x653)](_0x5f58e0(0xa23)), 'music': document[_0x5f58e0(0x653)]('music-screen'), 'friendCircleList': document[_0x5f58e0(0x653)](_0x5f58e0(0xa1d)), 'friendCircleEdit': document['getElementById'](_0x5f58e0(0x811)), 'meetingList': document[_0x5f58e0(0x653)](_0x5f58e0(0x1d9)), 'meetingView': document[_0x5f58e0(0x653)]('meeting-view-screen'), 'userProfileList': document[_0x5f58e0(0x653)](_0x5f58e0(0x19c)), 'diaryList': document[_0x5f58e0(0x653)](_0x5f58e0(0xa00)), 'diaryView': document[_0x5f58e0(0x653)](_0x5f58e0(0x5f6)), 'musicLibrary': document['getElementById']('music-library-screen'), 'musicUploadAltar': document[_0x5f58e0(0x653)](_0x5f58e0(0x9d1)), 'accounting': document[_0x5f58e0(0x653)]('accounting-screen'), 'snoopList': document[_0x5f58e0(0x653)](_0x5f58e0(0xb0f)), 'snoopPhone': document[_0x5f58e0(0x653)](_0x5f58e0(0x48d)), 'calendar': document['getElementById'](_0x5f58e0(0x790)) }, _0x7a5492 = document[_0x5f58e0(0x653)]('upload-feed-bg-button'), _0x1eeb36 = document[_0x5f58e0(0x653)](_0x5f58e0(0x973)), _0x3bbc99 = document[_0x5f58e0(0x653)](_0x5f58e0(0x4a2)), _0xca9b98 = document['getElementById'](_0x5f58e0(0x777)), _0x2dd775 = document['getElementById'](_0x5f58e0(0x273)), _0x148ea7 = document[_0x5f58e0(0x653)]('back-to-home-from-wallpaper'), _0x5bd76f = document[_0x5f58e0(0x653)](_0x5f58e0(0x638)), _0x34409e = document['getElementById'](_0x5f58e0(0x6b9)); document[_0x5f58e0(0x653)](_0x5f58e0(0x255))[_0x5f58e0(0xacf)]('click', async () => { const _0x4d2b16 = _0x5f58e0, _0x390e94 = await _0x9e00ac(_0x4d2b16(0x5c3)); if (_0x390e94) { localStorage[_0x4d2b16(0x673)](_0x4d2b16(0x743)), localStorage[_0x4d2b16(0x673)](_0x4d2b16(0x920)), localStorage['removeItem'](_0x4d2b16(0x347)), localStorage[_0x4d2b16(0x673)]('musicWidgetPosition'); const _0x20b43e = []; for (let _0x1c692e = 0x0; _0x1c692e < localStorage[_0x4d2b16(0x8a0)]; _0x1c692e++) { if ('oYSKu' !== 'OJBeN') { const _0x14f316 = localStorage[_0x4d2b16(0x8c2)](_0x1c692e); _0x14f316 && _0x14f316[_0x4d2b16(0x6c0)](_0x4d2b16(0x48e)) && (_0x4d2b16(0x245) === 'ctIHx' ? _0x30d843[_0x4d2b16(0x80e)](_0xb86fbe) : _0x20b43e['push'](_0x14f316)); } else _0x3c684d['style'][_0x4d2b16(0x956)] = ''; } _0x20b43e[_0x4d2b16(0xa30)](_0x5a8cd9 => localStorage[_0x4d2b16(0x673)](_0x5a8cd9)), await _0x100c88(_0x4d2b16(0xaaf), await _0x3d106b(_0x4d2b16(0xa71))), _0x5929aa('桌面已重置，即将刷新...'), setTimeout(() => location[_0x4d2b16(0x2a5)](), 0x5dc); } }); const _0x1871ea = document[_0x5f58e0(0x653)]('add-choice-modal'), _0x48b283 = document[_0x5f58e0(0x653)](_0x5f58e0(0x5ef)), _0xeb20de = document[_0x5f58e0(0x653)](_0x5f58e0(0xa2b)), _0x4a0fbe = document[_0x5f58e0(0x653)](_0x5f58e0(0x892)), _0x5615fe = document[_0x5f58e0(0x653)](_0x5f58e0(0x365)), _0xa28caf = document[_0x5f58e0(0x653)]('back-to-char-select-from-group-create'), _0x45aefd = document['getElementById']('create-group-chat-button'), _0x495ee2 = document['getElementById'](_0x5f58e0(0x71d)), _0x1c1810 = document[_0x5f58e0(0x653)](_0x5f58e0(0x839)), _0x469a9a = document[_0x5f58e0(0x653)](_0x5f58e0(0xb38)), _0x1ee668 = document['getElementById'](_0x5f58e0(0x912)), _0x3298cd = document[_0x5f58e0(0x653)](_0x5f58e0(0x267)), _0x7240a4 = document[_0x5f58e0(0x653)]('back-to-home-from-chat'), _0x3830cf = document[_0x5f58e0(0x653)](_0x5f58e0(0xb58)), _0x3a7038 = document['getElementById'](_0x5f58e0(0x4c9)), _0x18a1f1 = document['getElementById'](_0x5f58e0(0x6d0)), _0x55a0eb = document[_0x5f58e0(0x653)](_0x5f58e0(0xa45)), _0x2573e2 = document[_0x5f58e0(0x653)](_0x5f58e0(0x677)), _0x3820ee = document[_0x5f58e0(0x653)](_0x5f58e0(0x407)), _0x319ce7 = document[_0x5f58e0(0x653)](_0x5f58e0(0x250)), _0x8185a2 = document[_0x5f58e0(0x653)]('chat-message-input'), _0x4c6ae6 = document[_0x5f58e0(0x653)]('chat-send-button'), _0x28149a = document['getElementById'](_0x5f58e0(0x42d)), _0x3de62f = document[_0x5f58e0(0x653)](_0x5f58e0(0x46e)), _0x3c8b6a = document[_0x5f58e0(0x653)](_0x5f58e0(0x7f8)), _0x264f23 = document['getElementById'](_0x5f58e0(0x4a7)), _0x5d46fe = document[_0x5f58e0(0x653)](_0x5f58e0(0x17f)), _0x3aae85 = document[_0x5f58e0(0x653)]('char-name-header'), _0x38e926 = document['getElementById'](_0x5f58e0(0x85d)), _0x52300e = document[_0x5f58e0(0x653)](_0x5f58e0(0x22a)), _0x1dd942 = document[_0x5f58e0(0x653)](_0x5f58e0(0x73d)), _0x359b11 = document[_0x5f58e0(0x653)](_0x5f58e0(0xa5d)), _0x53fe2e = document[_0x5f58e0(0x653)](_0x5f58e0(0x29b)), _0x4f51cb = document[_0x5f58e0(0x653)](_0x5f58e0(0x607)), _0x3864d3 = document[_0x5f58e0(0x653)](_0x5f58e0(0x4e8)), _0x51b0f6 = document[_0x5f58e0(0x653)](_0x5f58e0(0xa87)), _0x2863b2 = document[_0x5f58e0(0x653)](_0x5f58e0(0x92a)), _0x3257b6 = document['getElementById'](_0x5f58e0(0xb19)), _0x5b1ea1 = document[_0x5f58e0(0x653)](_0x5f58e0(0x9c4)), _0x298ad0 = document[_0x5f58e0(0x653)](_0x5f58e0(0x181)), _0xda6dce = document[_0x5f58e0(0x653)](_0x5f58e0(0x537)), _0x2d7af2 = document[_0x5f58e0(0x653)](_0x5f58e0(0x52e)), _0x37b891 = document[_0x5f58e0(0x653)]('user-avatar-preview'), _0x52accd = document[_0x5f58e0(0x653)](_0x5f58e0(0x387)), _0x38e9d8 = document[_0x5f58e0(0x653)](_0x5f58e0(0x18d)), _0x4bcb19 = document['getElementById'](_0x5f58e0(0x883)), _0xbc58d3 = document[_0x5f58e0(0x653)](_0x5f58e0(0x604)), _0x23aee9 = document[_0x5f58e0(0x653)](_0x5f58e0(0x7d9)), _0x3637f9 = document[_0x5f58e0(0x653)](_0x5f58e0(0x333)), _0x75c634 = document[_0x5f58e0(0x653)](_0x5f58e0(0x21e)), _0xb6e1d2 = document[_0x5f58e0(0x653)]('char-edit-avatar-preview'), _0x4c5d6f = document['getElementById']('char-edit-avatar-input'), _0x8d37f7 = document[_0x5f58e0(0x653)](_0x5f58e0(0x2fd)), _0x1c3319 = document[_0x5f58e0(0x653)](_0x5f58e0(0x343)), _0x3408ca = document[_0x5f58e0(0x653)](_0x5f58e0(0x69e)), _0x3e6305 = document[_0x5f58e0(0x653)](_0x5f58e0(0x9e8)); let _0x3ffea4 = null; const _0x225d80 = _0x5f58e0(0x7f0), _0x123ad0 = _0x5f58e0(0x6b1); _0x1884b1 = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': _0x5f58e0(0x169), 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x480928() { const _0x39b88c = _0x5f58e0; if (_0x39b88c(0x67f) === _0x39b88c(0x434)) _0x2a24c0 = _0x39b88c(0xa20) + _0x5bdf6b[_0x39b88c(0x7d7)] + _0x39b88c(0x67d); else try { const _0x4023e1 = { 'version': 0x1, 'characters': _0x1884b1[_0x39b88c(0x358)], 'worldBooks': _0x1884b1['worldBooks'], 'chats': _0x1884b1[_0x39b88c(0x940)], 'apiSettings': _0x1884b1['apiSettings'], 'preferences': _0x1884b1['preferences'], 'activeChatId': _0x1884b1[_0x39b88c(0x9a8)], 'diaries': _0x1884b1[_0x39b88c(0x7f1)], 'friendCircles': _0x1884b1[_0x39b88c(0xa26)], 'activeFriendCircleId': _0x1884b1[_0x39b88c(0x825)], 'userProfiles': _0x1884b1[_0x39b88c(0x38c)], 'activeUserProfileId': _0x1884b1[_0x39b88c(0x1d3)], 'accountingData': _0x1884b1['accountingData'], 'accountingLedger': _0x1884b1['accountingLedger'], 'calendarEvents': _0x1884b1[_0x39b88c(0xa9d)] }; localStorage[_0x39b88c(0x7db)](_0x39b88c(0x4c5), JSON[_0x39b88c(0x98f)](_0x4023e1)); } catch (_0x90e2b5) { if (_0x39b88c(0x3e2) !== 'lQgJm') { const _0x24f0b9 = (_0x516e8e[_0x39b88c(0x6b2)] ?? _0x542733['emoji'] ?? _0x278ea4[_0x39b88c(0x7d2)] ?? _0x542b2f[_0x39b88c(0x7a6)])?.['trim'](); if (_0x24f0b9 && _0x5ad664[_0x39b88c(0x9a4)](_0x24f0b9)) _0x1b4482[_0x39b88c(0x9c5)][_0x39b88c(0x24d)]({ 'senderId': _0x5775d9['id'], 'kind': _0x39b88c(0x6b2), 'sticker': _0x24f0b9 }); else { const _0x2d50fc = _0x17b642(_0x3979e2['content'] ?? _0x1fd2a2[_0x39b88c(0x252)] ?? '')[_0x39b88c(0x87b)]() || '[sticker:' + (_0x24f0b9 || _0x39b88c(0x2c5)) + ']'; if (_0x2d50fc) _0x541cd7['events'][_0x39b88c(0x24d)]({ 'senderId': _0x28affa['id'], 'kind': _0x39b88c(0x252), 'content': _0x2d50fc }); } } else console[_0x39b88c(0x5f0)](_0x39b88c(0xb2b), _0x90e2b5), _0x5929aa(_0x39b88c(0x1dc)); } } function _0x333530() { const _0x1c7015 = _0x5f58e0; if ('vNRNp' !== 'SlNOC') { let _0xfed962 = null; try { _0xfed962 = localStorage[_0x1c7015(0x6da)]('appState'); } catch (_0x9e9bef) { if ('SXGDP' === _0x1c7015(0x2b5)) console[_0x1c7015(0x5f0)](_0x1c7015(0x34e), _0x9e9bef); else { let _0x4f1873 = null; if (_0xb22b75?.[_0x1c7015(0x8c3)] === 'private') _0x4f1873 = _0x1db315; else _0xd9b68d?.[_0x1c7015(0x8c3)] === _0x1c7015(0x2b7) && _0x5d507b && (_0x4f1873 = _0x12cb76(_0x1b29ec)); _0x4f1873 && (_0xfb71da = _0x4f1873['avatarFrameUrl'] || ''); } } if (_0xfed962) try { const _0x1d0a2d = JSON[_0x1c7015(0x440)](_0xfed962), _0x1ce61f = _0x1d0a2d[_0x1c7015(0x88c)] || 0x0; if (_0x1ce61f < 0x1) { console[_0x1c7015(0xace)](_0x1c7015(0x5f5)); const _0x130dcc = { 'version': 0x1, 'characters': [], 'worldBooks': [], 'chats': [], 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'perChatContextLines': 0x64, 'widgetBgImage': null, 'forceWhiteClock': ![] }, 'activeChatId': null, 'friendCircles': [], 'activeFriendCircleId': null, 'diaries': [], 'userProfiles': [], 'activeUserProfileId': null, 'accountingData': [], 'accountingLedger': {}, 'calendarEvents': [] }; if (Array['isArray'](_0x1d0a2d[_0x1c7015(0x358)])) _0x130dcc[_0x1c7015(0x358)] = _0x1d0a2d[_0x1c7015(0x358)]; if (Array[_0x1c7015(0xb41)](_0x1d0a2d[_0x1c7015(0x562)])) _0x130dcc[_0x1c7015(0x562)] = _0x1d0a2d[_0x1c7015(0x562)]; if (Array['isArray'](_0x1d0a2d[_0x1c7015(0x940)])) _0x130dcc[_0x1c7015(0x940)] = _0x1d0a2d['chats']; if (_0x1d0a2d[_0x1c7015(0x2ec)]) _0x130dcc[_0x1c7015(0x2ec)] = _0x1d0a2d[_0x1c7015(0x2ec)]; if (_0x1d0a2d['preferences']) _0x130dcc[_0x1c7015(0xa17)] = { ..._0x130dcc['preferences'], ..._0x1d0a2d[_0x1c7015(0xa17)] }; if (_0x1d0a2d[_0x1c7015(0x9a8)]) _0x130dcc[_0x1c7015(0x9a8)] = _0x1d0a2d['activeChatId']; if (Array['isArray'](_0x1d0a2d['diaries'])) _0x130dcc[_0x1c7015(0x7f1)] = _0x1d0a2d['diaries']; if (Array[_0x1c7015(0xb41)](_0x1d0a2d[_0x1c7015(0xa26)])) _0x130dcc[_0x1c7015(0xa26)] = _0x1d0a2d[_0x1c7015(0xa26)]; if (_0x1d0a2d[_0x1c7015(0x825)]) _0x130dcc['activeFriendCircleId'] = _0x1d0a2d[_0x1c7015(0x825)]; if (Array[_0x1c7015(0xb41)](_0x1d0a2d[_0x1c7015(0x38c)])) _0x130dcc['userProfiles'] = _0x1d0a2d[_0x1c7015(0x38c)]; if (_0x1d0a2d['activeUserProfileId']) _0x130dcc[_0x1c7015(0x1d3)] = _0x1d0a2d[_0x1c7015(0x1d3)]; if (Array[_0x1c7015(0xb41)](_0x1d0a2d[_0x1c7015(0x447)])) _0x130dcc[_0x1c7015(0x447)] = _0x1d0a2d['accountingData']; if (_0x1d0a2d[_0x1c7015(0x47a)]) _0x130dcc[_0x1c7015(0x47a)] = _0x1d0a2d[_0x1c7015(0x47a)]; if (Array[_0x1c7015(0xb41)](_0x1d0a2d[_0x1c7015(0xa9d)])) _0x130dcc['calendarEvents'] = _0x1d0a2d[_0x1c7015(0xa9d)]; if (!_0x1d0a2d[_0x1c7015(0x38c)] && _0x1d0a2d[_0x1c7015(0x7c2)]) { if ('VxIHN' !== 'VxIHN') return _0x468e32[_0x1c7015(0x2b8)][_0x1c7015(0x7d4)](_0x17a3e8 => typeof _0x17a3e8 === _0x1c7015(0x4b6) ? _0x17a3e8 : _0x17a3e8?.[_0x1c7015(0x329)])[_0x1c7015(0x776)](_0x4545a5)[_0x1c7015(0x7e8)](_0x267436); else { const _0x4e5d6f = { 'id': _0x1c7015(0x9a2) + Date[_0x1c7015(0x965)](), 'name': _0x1d0a2d[_0x1c7015(0x7c2)][_0x1c7015(0x7d7)] || '我', 'avatar': _0x1d0a2d[_0x1c7015(0x7c2)]['avatar'] || _0x100125, 'persona': _0x1d0a2d[_0x1c7015(0x7c2)][_0x1c7015(0x370)] || '' }; _0x130dcc[_0x1c7015(0x38c)] = [_0x4e5d6f], _0x130dcc[_0x1c7015(0x1d3)] = _0x4e5d6f['id']; } } Object[_0x1c7015(0x6c1)](_0x1884b1, _0x130dcc), _0x480928(), _0x5929aa('检测到旧版数据，已自动为您完成升级！'); } else Object[_0x1c7015(0x6c1)](_0x1884b1, _0x1d0a2d); } catch (_0x1c133f) { console['error'](_0x1c7015(0x4cb), _0x1c133f), localStorage[_0x1c7015(0x673)](_0x1c7015(0x4c5)); } const _0x410f22 = _0x1884b1[_0x1c7015(0x358)][_0x1c7015(0x8a0)] === 0x0; return !_0x1884b1[_0x1c7015(0x940)][_0x1c7015(0x6f9)](_0xe75ba7 => _0xe75ba7['id'] === _0x1884b1[_0x1c7015(0x9a8)]) && (_0x1884b1[_0x1c7015(0x9a8)] = _0x1884b1[_0x1c7015(0x940)][0x0]?.['id'] || null), _0x410f22; } else _0x5f3234['oncomplete'] = _0x2772a7, _0x546ad2[_0x1c7015(0x740)] = _0x1ed578 => _0x14bb62(_0x1ed578[_0x1c7015(0xa4b)][_0x1c7015(0x5f0)]); } function _0x21733b() { const _0x2eb430 = _0x5f58e0; if (!_0x1884b1[_0x2eb430(0x9a8)]) return; try { localStorage['setItem'](_0x2eb430(0x962) + _0x1884b1['activeChatId'], JSON['stringify'](_0x1884b1[_0x2eb430(0x589)])); } catch (_0x3dfa7b) { if ('YcAwv' === _0x2eb430(0x877)) console[_0x2eb430(0x5f0)](_0x2eb430(0x4f7), _0x3dfa7b), _0x5929aa(_0x2eb430(0x722)); else { const _0x3e2893 = _0x28344a[_0x2eb430(0x6e4)]('p'); _0x3e2893['forEach'](_0x5b1638 => _0x5b1638['classList']['remove']('active')); const _0x462d33 = _0x40f2fd[_0x2eb430(0x653)](_0x2eb430(0x3bc) + _0x252c40); _0x462d33 && (_0x462d33[_0x2eb430(0xb7b)][_0x2eb430(0x428)](_0x2eb430(0x33f)), _0x462d33[_0x2eb430(0x9bb)]({ 'behavior': _0x2eb430(0x301), 'block': _0x2eb430(0xaa3) })); } } } function _0x4f8e33() { const _0x1307e2 = _0x5f58e0; if (_0x1307e2(0x238) === _0x1307e2(0x238)) { if (!_0x1884b1[_0x1307e2(0x9a8)]) { _0x1884b1[_0x1307e2(0x589)] = [], _0x59f07e(); return; } let _0x3ccef8 = null; try { _0x3ccef8 = localStorage[_0x1307e2(0x6da)]('chatHistory_' + _0x1884b1[_0x1307e2(0x9a8)]); } catch (_0x4d0ba1) { console['error'](_0x1307e2(0x49f) + _0x1884b1[_0x1307e2(0x9a8)], _0x4d0ba1); } let _0x551dc4 = []; if (_0x3ccef8) try { const _0x5b0248 = JSON[_0x1307e2(0x440)](_0x3ccef8); Array['isArray'](_0x5b0248) && (_0x551dc4 = _0x5b0248[_0x1307e2(0x776)](_0x9b2d05 => _0x9b2d05 && typeof _0x9b2d05 === _0x1307e2(0xada) && typeof _0x9b2d05['role'] === _0x1307e2(0x4b6) && typeof _0x9b2d05['content'] !== 'undefined')); } catch (_0x3f7eec) { if (_0x1307e2(0xa7d) === _0x1307e2(0xa7d)) { console[_0x1307e2(0x5f0)](_0x1307e2(0x69d) + _0x1884b1['activeChatId'] + _0x1307e2(0x59d), _0x3f7eec); try { localStorage[_0x1307e2(0x673)](_0x1307e2(0x962) + _0x1884b1[_0x1307e2(0x9a8)]); } catch (_0x37d35f) { console[_0x1307e2(0x5f0)](_0x1307e2(0xa58), _0x37d35f); } } else _0x49f749[_0x1307e2(0x9c2)] = _0x1307e2(0x564); } _0x1884b1[_0x1307e2(0x589)] = _0x551dc4, _0x319ce7[_0x1307e2(0x9c2)] = '', _0x1884b1[_0x1307e2(0x589)] && _0x1884b1[_0x1307e2(0x589)][_0x1307e2(0xa30)]((_0x22fad7, _0x314b27) => _0x1582f0(_0x22fad7, _0x314b27)), setTimeout(() => { const _0x209bb1 = _0x1307e2; _0x319ce7[_0x209bb1(0x497)] = _0x319ce7[_0x209bb1(0x244)]; }, 0x0); } else _0x5d4b41 = '0x' + _0x2e7f2e[0x1] + _0x12a618[0x2], _0x5f3880 = '0x' + _0x303a31[0x3] + _0x4b0026[0x4], _0xe9617e = '0x' + _0x3edeb1[0x5] + _0x411325[0x6]; } async function _0xd46509() { const _0x2600ef = _0x5f58e0, _0xc12cf6 = document['getElementById'](_0x2600ef(0x7b4)); if (!_0xc12cf6) { if (_0x2600ef(0x2d8) !== 'uMgkj') { console[_0x2600ef(0x5f0)](_0x2600ef(0x7d0)); return; } else _0x4ad044[_0x2600ef(0x1d3)] = _0x3d667d['userProfiles'][0x0]['id']; } try { let _0x2706e3 = await _0x329660(_0x2600ef(0xaaf)); if (!_0x2706e3) { if (_0x2600ef(0x5de) !== _0x2600ef(0x5de)) { _0x2952a5[_0x2600ef(0x9c2)] = _0x2600ef(0x558); return; } else { const _0x2b6276 = localStorage[_0x2600ef(0x6da)](_0x2600ef(0x6cd)); _0x2b6276 && (console['log'](_0x2600ef(0x856)), _0x2706e3 = await _0x3d106b(_0x2b6276), await _0x100c88(_0x2600ef(0xaaf), _0x2706e3), localStorage['removeItem'](_0x2600ef(0x6cd))); } } _0x2706e3 ? (_0xc12cf6[_0x2600ef(0x313)]['backgroundImage'] = _0x2600ef(0x8f5) + URL[_0x2600ef(0x264)](_0x2706e3) + ')', _0xc12cf6['style'][_0x2600ef(0x5ab)] = _0x2600ef(0x544), _0xc12cf6[_0x2600ef(0x313)]['backgroundPosition'] = _0x2600ef(0xaa3)) : _0xc12cf6['style'][_0x2600ef(0x956)] = ''; } catch (_0x2ad0f8) { _0x2600ef(0x774) !== _0x2600ef(0x94a) ? (console['error'](_0x2600ef(0x25b), _0x2ad0f8), _0xc12cf6 && (_0xc12cf6[_0x2600ef(0x313)][_0x2600ef(0x956)] = '')) : _0x4006a2[_0x13a1b9] = _0x4ccaf7[_0x2600ef(0x440)](_0x4a31a6); } } function _0x5a0f4b() { const _0x4f7cc5 = _0x5f58e0, _0x1e3985 = localStorage[_0x4f7cc5(0x6da)](_0x4f7cc5(0x3ef)); if (_0x1e3985) { if (_0x4f7cc5(0x32e) === _0x4f7cc5(0x416)) { const _0x184469 = _0x458d05[_0x4f7cc5(0x87b)](); _0x184469 && _0x54ce05[_0x4f7cc5(0x24d)](..._0x35921d(_0x184469)), _0x38ee58 < _0x1e4774[_0x4f7cc5(0x8a0)] && (_0x3c0523[_0x4f7cc5(0x24d)](_0x21807f[_0x386564][_0x4f7cc5(0x87b)]()), _0x4dd009++); } else document[_0x4f7cc5(0x653)](_0x4f7cc5(0x98b))[_0x4f7cc5(0x313)][_0x4f7cc5(0x3d0)](_0x4f7cc5(0xa5f), _0x4f7cc5(0x8f5) + _0x1e3985 + ')'); } else { if ('MYJbz' !== _0x4f7cc5(0x64e)) document[_0x4f7cc5(0x653)](_0x4f7cc5(0x98b))[_0x4f7cc5(0x313)]['setProperty'](_0x4f7cc5(0xa5f), 'none'); else { _0x3c0451[_0x4f7cc5(0x9c2)] = _0x4f7cc5(0x925); return; } } } async function _0xe07a1e(_0x20af4e) { const _0x38ef83 = _0x5f58e0; try { await _0x100c88(_0x38ef83(0xaaf), _0x20af4e), await _0xd46509(), _0x5929aa(_0x38ef83(0xae2)); } catch (_0x2729e9) { console[_0x38ef83(0x5f0)](_0x38ef83(0xac4), _0x2729e9), _0x5929aa('保存壁纸失败:\x20' + _0x2729e9[_0x38ef83(0xa53)]); } } function _0x38095f(_0xd0a63b) { const _0x2b1ec2 = _0x5f58e0, _0x479364 = { 'quotedMessage': null, 'content': _0xd0a63b }, _0x562533 = _0xd0a63b[_0x2b1ec2(0x81f)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x562533 && (_0x479364['quotedMessage'] = { 'sender': _0x562533[0x1][_0x2b1ec2(0x87b)](), 'content': _0x562533[0x2][_0x2b1ec2(0x87b)]() }, _0x479364['content'] = _0xd0a63b[_0x2b1ec2(0x650)](_0x562533[0x0][_0x2b1ec2(0x8a0)])[_0x2b1ec2(0x87b)]()), _0x479364; } const _0x4a2bac = document[_0x5f58e0(0x653)](_0x5f58e0(0x44a)), _0x2adcc2 = document[_0x5f58e0(0x653)]('message-action-backdrop'), _0x13cf92 = document[_0x5f58e0(0x653)](_0x5f58e0(0x77c)), _0x28b84c = document['getElementById']('delete-message-button'), _0x2f4069 = document[_0x5f58e0(0x653)](_0x5f58e0(0x552)), _0x4b88e6 = document['getElementById'](_0x5f58e0(0x3bd)), _0x581906 = document[_0x5f58e0(0x653)]('edit-message-modal'), _0x156f69 = document[_0x5f58e0(0x653)](_0x5f58e0(0x979)), _0x54fae8 = document[_0x5f58e0(0x653)](_0x5f58e0(0x305)), _0x25290a = document[_0x5f58e0(0x653)](_0x5f58e0(0x445)), _0x4b914f = document[_0x5f58e0(0x653)]('cancel-edit-button'); let _0x2adca8 = null; function _0x5e1692(_0xdf2cd9) { const _0x3cf447 = _0x5f58e0; if (_0x3cf447(0x7dd) === _0x3cf447(0x850)) { const _0x40bc84 = _0x5b12c0['createElement']('div'); _0x40bc84[_0x3cf447(0x84e)] = _0x3cf447(0x625), _0x40bc84[_0x3cf447(0x2c4)]['id'] = _0x18a31b['id'], _0x40bc84['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x47b67b[_0x3cf447(0x7d7)] + _0x3cf447(0xa9a) + _0x3805ba[_0x3cf447(0x329)][_0x3cf447(0x650)](0x0, 0x64) + _0x3cf447(0x6a2), _0x40bc84['addEventListener']('click', () => _0x50605c(_0x516c59['id'])), _0x3984bf[_0x3cf447(0x168)](_0x40bc84); } else _0x2adca8 = _0xdf2cd9, _0x4a2bac['classList'][_0x3cf447(0x428)](_0x3cf447(0x322)); } function _0x393bcb() { const _0x3f8b42 = _0x5f58e0; _0x4a2bac['classList']['remove'](_0x3f8b42(0x322)); } function _0x5e203c() { const _0x1a259f = _0x5f58e0; if ('XRvoA' === _0x1a259f(0x3f6)) return; else _0x393bcb(), _0x2adca8 = null; } function _0x19ae68() { const _0x242a59 = _0x5f58e0; if (_0x2adca8 === null) return; _0x1884b1['conversationHistory'][_0x242a59(0x8cf)](_0x2adca8, 0x1), _0x21733b(), _0x45c4f2(), _0x5e203c(); } function _0x4e4287() { const _0x1a9aa7 = _0x5f58e0; if (_0x2adca8 === null) return; const _0x2ece90 = _0x1884b1['conversationHistory'][_0x2adca8]; if (!_0x2ece90) return; _0x54fae8['value'] = _0x2ece90[_0x1a9aa7(0x329)], _0x393bcb(), _0x581906['classList']['add'](_0x1a9aa7(0x322)), _0x54fae8[_0x1a9aa7(0x96c)](); } function _0x3fb592() { const _0x2046fc = _0x5f58e0; if (_0x2adca8 === null) return; const _0x450a13 = _0x54fae8[_0x2046fc(0x3cd)]['trim'](); if (_0x450a13 === '') { if (_0x2046fc(0x701) !== _0x2046fc(0x701)) _0x113cb0[_0x2046fc(0xb7b)][_0x2046fc(0x428)]('is-entering-from-left'), _0x439b13['classList'][_0x2046fc(0x428)](_0x2046fc(0xa79)), _0x454970[_0x2046fc(0xb7b)][_0x2046fc(0x428)](_0x2046fc(0x43d)), _0x3003d8(() => { const _0x516004 = _0x2046fc; _0x5a8eae[_0x516004(0xb7b)]['remove'](_0x516004(0x43d), _0x516004(0xa79)), _0x3b3980['classList'][_0x516004(0x344)](_0x516004(0x1ca)), _0x58376a['diaryCurrentPage'] = _0x4a9226, _0x361682(), _0x19510f[_0x516004(0x46c)] = ![]; }, 0x2bc); else { _0x4f50cb(); return; } } const _0x157ef4 = _0x1884b1[_0x2046fc(0x589)][_0x2adca8]; _0x157ef4 && (_0x157ef4[_0x2046fc(0x329)] = _0x450a13, _0x21733b(), _0x45c4f2()), _0x581906['classList'][_0x2046fc(0x344)](_0x2046fc(0x322)), _0x2adca8 = null; } function _0x4f50cb() { const _0x407f8b = _0x5f58e0; _0x581906[_0x407f8b(0xb7b)][_0x407f8b(0x344)](_0x407f8b(0x322)), _0x2adca8 = null; } _0x2adcc2['addEventListener'](_0x5f58e0(0x4f4), _0x5e203c), _0x2f4069[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x5e203c), _0x28b84c[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x19ae68), _0x13cf92['addEventListener']('click', _0x4e4287), _0x4b88e6[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x5b2157), _0x5d46fe[_0x5f58e0(0xacf)]('click', _0x1764ec), _0x25290a[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x3fb592), _0x4b914f[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x4f50cb), _0x156f69[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x4f50cb); function _0x5b2157() { const _0x259f7d = _0x5f58e0; if (_0x2adca8 === null) return; const _0x1afaae = _0x1884b1[_0x259f7d(0x589)][_0x2adca8]; if (!_0x1afaae) return; const _0x5a71fb = _0x2bf707(); let _0xc423f7 = '未知'; if (_0x1afaae['role'] === _0x259f7d(0x901)) _0xc423f7 = _0x1884b1[_0x259f7d(0x7c2)][_0x259f7d(0x7d7)] || '我'; else { const _0x16aee5 = _0x1afaae[_0x259f7d(0x86d)] || _0x5a71fb?.[_0x259f7d(0x3d5)][0x0], _0x12d779 = _0x21051e(_0x16aee5); _0xc423f7 = _0x12d779 ? _0x12d779[_0x259f7d(0x7d7)] : '角色'; } let _0x39a170 = _0x1afaae[_0x259f7d(0x329)] || ''; if (_0x1afaae[_0x259f7d(0x6dd)]) _0x39a170 = '[表情]'; if (_0x1afaae[_0x259f7d(0x3bf)]) _0x39a170 = _0x259f7d(0x904); if (_0x39a170[_0x259f7d(0x8a0)] > 0x32) _0x39a170 = _0x39a170[_0x259f7d(0x650)](0x0, 0x32) + _0x259f7d(0x708); _0x1884b1[_0x259f7d(0x31f)] = { 'sender': _0xc423f7, 'content': _0x39a170 }, _0x4ef461(), _0x5e203c(), _0x8185a2[_0x259f7d(0x96c)](); } function _0x4ef461() { const _0x1d992b = _0x5f58e0; if (!_0x1884b1[_0x1d992b(0x31f)]) return; _0x3c8b6a[_0x1d992b(0x8f9)] = _0x1d992b(0x35d) + _0x1884b1[_0x1d992b(0x31f)][_0x1d992b(0x311)], _0x264f23[_0x1d992b(0x8f9)] = _0x1884b1['activeQuote']['content'], _0x3de62f[_0x1d992b(0x313)][_0x1d992b(0x272)] = 'block'; } function _0x1764ec() { const _0xa59289 = _0x5f58e0; 'NNBiz' !== _0xa59289(0x391) ? (_0x1884b1['activeQuote'] = null, _0x3de62f[_0xa59289(0x313)][_0xa59289(0x272)] = _0xa59289(0x643)) : (_0x3ff21d(_0x4ef15c['id']), _0x4508a1(_0xa59289(0x6e5)), _0x30616d(_0xa59289(0x842)), _0x463acb(![])); } function _0x13d883(_0x972fef, _0x3a2141) { const _0x28eccf = _0x5f58e0; if ('jbxPJ' !== _0x28eccf(0xa5e)) { const _0x5657f4 = document[_0x28eccf(0x653)](_0x28eccf(0x4b1)); _0x5657f4 && (_0x972fef === 'home' ? _0x28eccf(0x466) !== _0x28eccf(0x393) ? _0x5657f4[_0x28eccf(0x313)][_0x28eccf(0x272)] = _0x28eccf(0x960) : _0x278c8d(() => { const _0x451192 = _0x28eccf; _0x364f54[_0x451192(0x497)] = _0x44b541['scrollHeight']; }, 0x0) : _0x5657f4[_0x28eccf(0x313)][_0x28eccf(0x272)] = _0x28eccf(0x643)), _0x3ffea4 = _0x3a2141 || null, Object['values'](_0x28fb8b)[_0x28eccf(0xa30)](_0x424cf6 => _0x424cf6[_0x28eccf(0xb7b)][_0x28eccf(0x344)](_0x28eccf(0x33f))), _0x28fb8b[_0x972fef] && (_0x28eccf(0x2c2) === _0x28eccf(0x2c2) ? _0x28fb8b[_0x972fef]['classList'][_0x28eccf(0x428)](_0x28eccf(0x33f)) : _0x49113d[_0x28eccf(0x8f9)] = '▶'), _0x972fef !== 'chat' && ('bGZaM' !== _0x28eccf(0x2e0) ? _0x44be90[_0x28eccf(0xacf)](_0x28eccf(0x4f4), () => { const _0x47b8d0 = _0x28eccf, _0x41b3d0 = _0xab900b(_0x4fb2f5[_0x47b8d0(0x2c4)]['page'], 0xa); _0xde86c7(_0x41b3d0); }) : _0x3820ee[_0x28eccf(0xb7b)]['remove'](_0x28eccf(0x2c1))); } else { const _0x4781de = _0x13aeb8['createElement'](_0x28eccf(0x1f9)); _0x4781de[_0x28eccf(0x84e)] = _0x28eccf(0x635), _0x409dc0[_0x28eccf(0x168)](_0x4781de); } } function _0x32aad5(_0xe472e) { const _0x365903 = _0x5f58e0; _0x365903(0x9e4) === _0x365903(0x9e4) ? _0xe472e ? _0x3820ee['classList'][_0x365903(0x428)](_0x365903(0x2c1)) : _0x3820ee[_0x365903(0xb7b)][_0x365903(0x344)](_0x365903(0x2c1)) : _0x403485[_0x272c67[_0x12b56d]] = _0x2f9334; } async function _0x3ebe62() { const _0x4a2f79 = _0x5f58e0; _0x55a0eb[_0x4a2f79(0x9c2)] = ''; for (const _0x3dfda6 of _0x1884b1[_0x4a2f79(0x940)]) { const _0x5d244d = document[_0x4a2f79(0x2da)]('li'); _0x5d244d[_0x4a2f79(0x84e)] = _0x4a2f79(0x451), _0x5d244d['dataset']['id'] = _0x3dfda6['id']; let _0x588171 = _0xe4a1db, _0x44df0c = '群聊', _0x5cc0f8 = ''; if (_0x3dfda6[_0x4a2f79(0x8c3)] === _0x4a2f79(0xaa7)) { const _0x5aec3d = _0x21051e(_0x3dfda6[_0x4a2f79(0x3d5)][0x0]); _0x5aec3d ? (_0x588171 = _0x5aec3d[_0x4a2f79(0x99a)] || _0xe4a1db, _0x44df0c = _0x5aec3d['name'] || _0x4a2f79(0xa0e), _0x5cc0f8 = _0x5aec3d[_0x4a2f79(0xb17)] || '私聊') : (_0x44df0c = _0x4a2f79(0x3f2), _0x5cc0f8 = _0x4a2f79(0x37f)); } else { if (_0x4a2f79(0x4ee) === _0x4a2f79(0x613)) { const _0x1d7085 = _0x23b6fe['transaction'](_0x4b1d8d, _0x4a2f79(0xadd)), _0x144ba6 = _0x1d7085[_0x4a2f79(0x751)](_0x7d9c5e), _0x48da19 = _0x144ba6[_0x4a2f79(0x990)](_0x55bb56); _0x48da19[_0x4a2f79(0x8ef)] = () => _0x659f87(), _0x48da19[_0x4a2f79(0x740)] = () => _0xc0df27(_0x48da19[_0x4a2f79(0x5f0)]); } else { _0x44df0c = _0x3dfda6['name'] || _0x4a2f79(0xa93), _0x5cc0f8 = _0x3dfda6['participantIds'][_0x4a2f79(0x8a0)] + _0x4a2f79(0x8a1); const _0x83601c = await _0x329660(_0x4a2f79(0x528) + _0x3dfda6['id']); if (_0x83601c) _0x588171 = URL[_0x4a2f79(0x264)](_0x83601c); } } _0x5d244d['innerHTML'] = '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x588171 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x44df0c + _0x4a2f79(0x199) + _0x5cc0f8 + _0x4a2f79(0x2a8), _0x5d244d[_0x4a2f79(0x795)](_0x4a2f79(0xa1c))[_0x4a2f79(0xacf)](_0x4a2f79(0x4f4), () => { const _0x1c8c70 = _0x4a2f79; _0x1c8c70(0x2ca) === _0x1c8c70(0x2ca) ? (_0x24f491(_0x3dfda6['id']), _0x32aad5(!![])) : _0x518093['remove'](); }), _0x55a0eb[_0x4a2f79(0x168)](_0x5d244d); } } function _0x2da830() { const _0x50fa7e = _0x5f58e0; if (_0x50fa7e(0x94f) === _0x50fa7e(0x688)) { const _0x17e2c0 = _0x5be708[_0x50fa7e(0x795)]('.screen.active'); if (_0x17e2c0 && (_0x17e2c0['id'] === _0x50fa7e(0x93f) || _0x17e2c0['id'] === _0x50fa7e(0x407))) _0x360870(); else { const _0x5cfc28 = _0xfc8843[_0x50fa7e(0x6e4)](_0x50fa7e(0x400)); _0x5cfc28[_0x50fa7e(0xa30)](_0x57d1c9 => _0x57d1c9[_0x50fa7e(0x344)]()); } } else { const _0x264a2e = document[_0x50fa7e(0x653)](_0x50fa7e(0x753)); _0x264a2e[_0x50fa7e(0x9c2)] = ''; const _0x1dbaa2 = _0x1884b1[_0x50fa7e(0x358)][_0x50fa7e(0x776)](_0xb56d4d => _0x1884b1[_0x50fa7e(0x940)][_0x50fa7e(0x942)](_0x507c09 => _0x507c09['type'] === _0x50fa7e(0xaa7) && _0x507c09['participantIds']['includes'](_0xb56d4d['id']))); if (_0x1dbaa2[_0x50fa7e(0x8a0)] === 0x0) { _0x264a2e[_0x50fa7e(0x9c2)] = _0x50fa7e(0x925); return; } _0x1dbaa2[_0x50fa7e(0xa30)](_0x5ab55b => { const _0x33421a = _0x50fa7e, _0x9b4af3 = document[_0x33421a(0x2da)]('li'); _0x9b4af3[_0x33421a(0x84e)] = _0x33421a(0x451), _0x9b4af3['dataset'][_0x33421a(0x91f)] = _0x5ab55b['id'], _0x9b4af3[_0x33421a(0x9c2)] = _0x33421a(0x6de) + (_0x5ab55b['avatar'] || _0xe4a1db) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x5ab55b['name'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + (_0x5ab55b['remark'] || '私聊') + _0x33421a(0x2ba), _0x9b4af3[_0x33421a(0xacf)](_0x33421a(0x4f4), () => { _0x1c2133(_0x5ab55b['id']); }), _0x264a2e[_0x33421a(0x168)](_0x9b4af3); }); } } async function _0x1c2133(_0x1e6415) { const _0xe3c7e3 = _0x5f58e0, _0x48b0df = _0x21051e(_0x1e6415); if (!_0x48b0df) return; document[_0xe3c7e3(0x653)]('galgame-sprite')[_0xe3c7e3(0x74e)] = '', _0x1884b1[_0xe3c7e3(0x5f2)] = _0x1e6415; const _0x3b75d2 = _0x1884b1[_0xe3c7e3(0x940)][_0xe3c7e3(0x6f9)](_0x2cbbf0 => _0x2cbbf0[_0xe3c7e3(0x8c3)] === _0xe3c7e3(0xaa7) && _0x2cbbf0['participantIds'][_0xe3c7e3(0x1ac)](_0x1e6415)); _0x3b75d2 ? (_0x1884b1['activeChatId'] = _0x3b75d2['id'], _0x480928(), _0x4f8e33(), _0x48607f(_0x1e6415)) : _0x1884b1['conversationHistory'] = []; document[_0xe3c7e3(0x653)](_0xe3c7e3(0x550))[_0xe3c7e3(0x8f9)] = _0x48b0df[_0xe3c7e3(0x7d7)]; const _0x5490e0 = document[_0xe3c7e3(0x653)](_0xe3c7e3(0x43a)); try { if (_0xe3c7e3(0x723) !== 'LSiQR') { if (_0x4c7f6d['type'] === _0xe3c7e3(0x2b7)) return '群聊「' + (_0x43d621[_0xe3c7e3(0x7d7)] || _0xe3c7e3(0xa66)) + '」'; const _0xe08f03 = _0x4807b6(_0x423ea6[_0xe3c7e3(0x3d5)][0x0]); return '与\x20' + (_0xe08f03?.[_0xe3c7e3(0x7d7)] || _0xe3c7e3(0x3f2)) + _0xe3c7e3(0x59f); } else { const _0xdd4e3a = await _0x329660('char_offline_bg_' + _0x1e6415); _0xdd4e3a ? (_0x5490e0[_0xe3c7e3(0x313)][_0xe3c7e3(0x956)] = _0xe3c7e3(0xa38) + URL[_0xe3c7e3(0x264)](_0xdd4e3a) + '\x27)', _0x5490e0[_0xe3c7e3(0x313)][_0xe3c7e3(0x5ab)] = 'cover', _0x5490e0[_0xe3c7e3(0x313)][_0xe3c7e3(0x6e7)] = _0xe3c7e3(0xaa3)) : 'TAltn' === _0xe3c7e3(0xb67) ? _0x5490e0['style'][_0xe3c7e3(0x956)] = _0xe3c7e3(0x643) : _0x57eb9e = _0x4d4d3d(_0x240208); } } catch (_0x375335) { _0xe3c7e3(0x19d) !== _0xe3c7e3(0x70b) ? (console[_0xe3c7e3(0x5f0)]('加载见面背景失败\x20for\x20' + _0x1e6415 + ':', _0x375335), _0x5490e0[_0xe3c7e3(0x313)]['backgroundImage'] = _0xe3c7e3(0x643)) : _0x28a897(_0x236b45); } _0x2d8fe4(), _0x1a91c2(); if (_0x509211) clearInterval(_0x509211); _0x19a9a7(), _0x509211 = setInterval(_0x19a9a7, 0x2710), document[_0xe3c7e3(0x653)]('galgame-sprite-adjust-ui')[_0xe3c7e3(0x313)][_0xe3c7e3(0x272)] = _0xe3c7e3(0x8b0), _0x13d883('meetingView', _0xe3c7e3(0x5c2)); } function _0x1a91c2() { const _0x4dd0cc = _0x5f58e0, _0x2250ce = document[_0x4dd0cc(0x653)](_0x4dd0cc(0x780)); _0x2250ce[_0x4dd0cc(0x9c2)] = ''; const _0x50b6bc = _0x2250ce[_0x4dd0cc(0x795)](_0x4dd0cc(0x4e2)); if (_0x50b6bc) _0x50b6bc['remove'](); _0x1884b1[_0x4dd0cc(0x589)] && (_0x4dd0cc(0x2b6) === 'FRSOM' ? _0x1884b1[_0x4dd0cc(0x589)][_0x4dd0cc(0xa30)]((_0x5c8e2e, _0x1ca84e) => { const _0x175c9a = _0x4dd0cc; if (!_0x5c8e2e[_0x175c9a(0xa04)] || _0x5c8e2e[_0x175c9a(0xaae)] === _0x175c9a(0xa40)) return; const _0x4873d0 = document[_0x175c9a(0x2da)]('p'); _0x4873d0[_0x175c9a(0x2c4)][_0x175c9a(0x63f)] = _0x1ca84e; const _0x2a4911 = _0x5c8e2e[_0x175c9a(0x329)][_0x175c9a(0xac6)](/\n/g, _0x175c9a(0x3b1)); let _0x491836 = '', _0x36151b = ''; const _0x1136f9 = _0x4079e8(_0x1884b1[_0x175c9a(0x9a8)]); if (_0x5c8e2e[_0x175c9a(0xaae)] === _0x175c9a(0x901)) { if (_0x175c9a(0x67b) === 'vTlas') return new _0x39e1ef((_0xba31c6, _0x195b69) => { const _0x4a6f1b = _0x175c9a, _0x8493af = new _0xcfc4f8(); _0x8493af[_0x4a6f1b(0x8c0)] = () => _0xba31c6(_0x8493af[_0x4a6f1b(0x97f)]), _0x8493af[_0x4a6f1b(0x740)] = _0x195b69, _0x8493af[_0x4a6f1b(0x560)](_0x1c6b20); }); else _0x491836 = _0x1136f9['name'] || '我', _0x36151b = _0x175c9a(0x30c); } else { if (_0x5c8e2e[_0x175c9a(0xaae)] === _0x175c9a(0x37b)) { const _0x22cf15 = _0x21051e(_0x5c8e2e[_0x175c9a(0x86d)] || _0x1884b1['activeMeetingCharId']); _0x491836 = _0x22cf15?.[_0x175c9a(0x7d7)] || '角色', _0x36151b = _0x175c9a(0x6f6); } } _0x4873d0['style'][_0x175c9a(0x45f)] = _0x175c9a(0x7b9), _0x4873d0[_0x175c9a(0x313)][_0x175c9a(0x4bd)] = _0x175c9a(0x473), _0x4873d0[_0x175c9a(0x313)][_0x175c9a(0x3a5)] = _0x175c9a(0xae0), _0x4873d0[_0x175c9a(0x313)][_0x175c9a(0x924)] = _0x175c9a(0x18b), _0x491836 ? _0x4873d0[_0x175c9a(0x9c2)] = _0x175c9a(0x808) + _0x36151b + '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20' + (_0x36151b === _0x175c9a(0x30c) ? _0x175c9a(0x6fc) : _0x175c9a(0x24c)) + _0x175c9a(0x4d2) + _0x491836 + _0x175c9a(0x699) + _0x2a4911 : (_0x4873d0[_0x175c9a(0x84e)] = _0x175c9a(0x700), _0x4873d0[_0x175c9a(0x313)]['fontStyle'] = _0x175c9a(0x4d5), _0x4873d0[_0x175c9a(0x313)][_0x175c9a(0x2b2)] = _0x175c9a(0x2a2), _0x4873d0[_0x175c9a(0x9c2)] = _0x2a4911), _0x2250ce[_0x175c9a(0x168)](_0x4873d0); }) : (_0x2aecfa[_0x4dd0cc(0x4d1)](), _0x584a59())); if (_0x1884b1[_0x4dd0cc(0xa54)]) { let _0x4dfce7 = _0x2250ce[_0x4dd0cc(0x795)]('.typing-indicator'); !_0x4dfce7 && (_0x4dfce7 = document[_0x4dd0cc(0x2da)](_0x4dd0cc(0x1f9)), _0x4dfce7[_0x4dd0cc(0x84e)] = _0x4dd0cc(0x674), _0x4dfce7[_0x4dd0cc(0x8f9)] = '对方正在行动中...', _0x4dfce7[_0x4dd0cc(0x313)][_0x4dd0cc(0x45f)] = _0x4dd0cc(0x7b9), _0x4dfce7[_0x4dd0cc(0x313)][_0x4dd0cc(0x4bd)] = _0x4dd0cc(0x473), _0x4dfce7[_0x4dd0cc(0x313)]['borderRadius'] = '8px', _0x2250ce['appendChild'](_0x4dfce7)); } const _0x51f296 = document['createElement']('div'); _0x51f296['id'] = _0x4dd0cc(0x362), _0x2250ce[_0x4dd0cc(0x168)](_0x51f296), setTimeout(() => { const _0x5519ec = _0x4dd0cc; _0x51f296[_0x5519ec(0x9bb)]({ 'behavior': 'auto', 'block': _0x5519ec(0x9ea) }); }, 0x32); } function _0x45c4f2() { const _0x591d57 = _0x5f58e0, _0x4701ad = document[_0x591d57(0x795)](_0x591d57(0x94b)); if (!_0x4701ad) return; _0x4701ad['id'] === _0x591d57(0x93f) ? _0x1a91c2() : _0x591d57(0x70a) === _0x591d57(0x70a) ? _0x59f07e() : _0x1ba1c2[_0x591d57(0x8c2)] === 'Enter' && !_0x49d682[_0x591d57(0x93c)] && (_0x27dc98[_0x591d57(0x4d1)](), _0x3cf4d6()); } function _0x59f07e() { const _0x2c723b = _0x5f58e0, _0x2a5f55 = _0x1884b1[_0x2c723b(0x589)][_0x2c723b(0x776)](_0x157ff6 => !_0x157ff6['isOffline'] && _0x157ff6[_0x2c723b(0xaae)] !== 'system'); if (_0x2a5f55[_0x2c723b(0x8a0)] > _0x1884b1['displayedMessageCount']) { let _0x581341 = _0x319ce7[_0x2c723b(0x795)]('.load-more-btn'); !_0x581341 && (_0x581341 = document['createElement']('button'), _0x581341['textContent'] = _0x2c723b(0xaa1), _0x581341[_0x2c723b(0x84e)] = 'form-button\x20load-more-btn', _0x581341[_0x2c723b(0x313)]['width'] = _0x2c723b(0x31b), _0x581341[_0x2c723b(0x313)]['margin'] = _0x2c723b(0xafc), _0x581341[_0x2c723b(0x313)][_0x2c723b(0x4bd)] = _0x2c723b(0x4fd), _0x581341[_0x2c723b(0x5c8)] = () => { const _0x4aa84e = _0x2c723b, _0x2277c4 = _0x319ce7, _0x2edf5b = _0x2277c4['scrollHeight'], _0x4797eb = _0x2277c4[_0x4aa84e(0x497)]; _0x1884b1['displayedMessageCount'] += 0x64, _0x59f07e(), requestAnimationFrame(() => { const _0x3c8ce4 = _0x4aa84e; if (_0x3c8ce4(0x2e7) === _0x3c8ce4(0x2e7)) { const _0x951faa = _0x2277c4[_0x3c8ce4(0x244)]; _0x2277c4['scrollTop'] = _0x4797eb + (_0x951faa - _0x2edf5b); } else _0x5f164c['appendChild'](_0x480589), _0x5c58d1[_0x3c8ce4(0x168)](_0xd25cf1); }); }, _0x319ce7['firstChild'] ? _0x2c723b(0xb61) === _0x2c723b(0xb61) ? _0x319ce7[_0x2c723b(0x621)](_0x581341, _0x319ce7[_0x2c723b(0x53e)]) : (_0xbcc5b8(), _0x50fe2d(_0x2c723b(0x328))) : _0x2c723b(0x176) === _0x2c723b(0x545) ? (_0x76e624[_0x2c723b(0xa80)](), _0x2220f1[_0x2c723b(0xb7b)][_0x2c723b(0xb4b)]('visible'), _0x1d13da[_0x2c723b(0xb7b)][_0x2c723b(0xb4b)]('expanded')) : _0x319ce7[_0x2c723b(0x168)](_0x581341)); } else { if (_0x2c723b(0x521) !== 'TMvCq') { const _0x3cd937 = _0x319ce7['querySelector']('.load-more-btn'); if (_0x3cd937) _0x3cd937[_0x2c723b(0x344)](); } else _0x3c7a03(), _0x11659f(![]); } Array[_0x2c723b(0x5a1)](_0x319ce7[_0x2c723b(0x1ab)])[_0x2c723b(0xa30)](_0x12baea => { const _0x3b2381 = _0x2c723b; !_0x12baea[_0x3b2381(0xb7b)][_0x3b2381(0x974)]('load-more-btn') && _0x12baea[_0x3b2381(0x344)](); }); const _0xe5f3c2 = _0x2a5f55[_0x2c723b(0x46a)](-_0x1884b1[_0x2c723b(0x41b)]); _0xe5f3c2[_0x2c723b(0xa30)](_0x5a1cb7 => { const _0x2883c7 = _0x2c723b; if (_0x2883c7(0x7ed) !== _0x2883c7(0x193)) { const _0x189c14 = _0x1884b1[_0x2883c7(0x589)][_0x2883c7(0x9db)](_0x5a1cb7); _0x189c14 > -0x1 && _0x1582f0(_0x5a1cb7, _0x189c14); } else _0x218597 += _0x2883c7(0x3d8); }); if (_0x1884b1['isGenerating']) { if ('qCeFt' !== _0x2c723b(0x933)) { let _0x21a54d = _0x319ce7[_0x2c723b(0x795)](_0x2c723b(0x400)); if (!_0x21a54d) { if (_0x2c723b(0x8c7) === _0x2c723b(0x8c7)) _0x21a54d = document[_0x2c723b(0x2da)](_0x2c723b(0x1f9)), _0x21a54d['className'] = _0x2c723b(0x674), _0x21a54d[_0x2c723b(0x8f9)] = _0x2c723b(0x421), _0x319ce7[_0x2c723b(0x168)](_0x21a54d); else { const _0x564819 = _0x55d30b[_0x2c723b(0x940)][_0x2c723b(0x6f9)](_0x9347aa => _0x9347aa['id'] === _0x3dbf03), _0x2191e2 = _0x564819?.[_0x2c723b(0x70c)]; let _0x2a8595 = _0x132b19[_0x2c723b(0x38c)][_0x2c723b(0x6f9)](_0x5f4191 => _0x5f4191['id'] === _0x2191e2); return !_0x2a8595 && (_0x2a8595 = _0x3fb4a9[_0x2c723b(0x38c)]['find'](_0x315e11 => _0x315e11['id'] === _0x31b3c1[_0x2c723b(0x1d3)]) || _0x14098b[_0x2c723b(0x38c)][0x0]), _0x2a8595 || { 'name': '用户', 'avatar': _0x52cbca, 'persona': '' }; } } } else _0x46e8f7[_0x2c723b(0x1f8)]['setMonth'](_0x33bfec['currentDate']['getMonth']() + 0x1), _0x50b11f(); } _0xe5f3c2[_0x2c723b(0x8a0)] <= _0x1884b1[_0x2c723b(0x41b)] && setTimeout(() => { const _0x5f1b8c = _0x2c723b; _0x5f1b8c(0x4c0) === _0x5f1b8c(0x9cd) ? _0x3c18c = _0x3a50f7[0x1] : _0x319ce7[_0x5f1b8c(0x497)] = _0x319ce7[_0x5f1b8c(0x244)]; }, 0x0); } function _0x1582f0(_0x1e7d1c, _0x3e0922) { const _0x316c17 = _0x5f58e0, { role: _0x451a53, content: _0xc3b5fc, displayUrl: _0xcbb9d8, image: _0x4d557f, senderId: _0x2acfe6 } = _0x1e7d1c, _0x2e5db0 = _0x451a53 === 'assistant' ? 'ai' : _0x451a53, _0x17b4c3 = _0x2bf707(), _0x1535ae = document[_0x316c17(0x2da)]('div'); _0x1535ae[_0x316c17(0xb7b)]['add'](_0x316c17(0x404), _0x2e5db0), _0x1535ae[_0x316c17(0x2c4)][_0x316c17(0x63f)] = _0x3e0922; const _0x2c1f77 = document[_0x316c17(0x2da)]('div'); _0x2c1f77['className'] = _0x316c17(0x87a); let _0x5eddc5 = ''; if (_0x451a53 === 'user') { const _0x346ac9 = _0x4079e8(_0x1884b1[_0x316c17(0x9a8)]); _0x5eddc5 = _0x346ac9['avatar'] || _0x100125; } else { if (_0x316c17(0x309) === _0x316c17(0x309)) { _0x5eddc5 = _0xe4a1db; let _0xf7a4de = null; if (_0x17b4c3?.[_0x316c17(0x8c3)] === _0x316c17(0xaa7)) _0xf7a4de = _0x21051e(_0x17b4c3['participantIds'][0x0]); else _0x17b4c3?.[_0x316c17(0x8c3)] === _0x316c17(0x2b7) && _0x2acfe6 && (_0xf7a4de = _0x21051e(_0x2acfe6)); _0xf7a4de?.[_0x316c17(0x99a)] && (_0x5eddc5 = _0xf7a4de[_0x316c17(0x99a)]); } else { _0x4c57b8 = _0x49d38a; const _0x4ee1b2 = _0x2f0b5c(_0x23e3b7); if (!_0x4ee1b2) return; const _0x4bee4a = _0x59548a[_0x316c17(0x653)](_0x316c17(0x48d)), _0x57b53d = _0x5bc6a5['getElementById']('snoop-home-clock'); if (_0x57b53d) _0x57b53d[_0x316c17(0x344)](); const _0x3e66d8 = _0x547d60[_0x316c17(0x653)](_0x316c17(0x78a)); if (_0x3e66d8) _0x3e66d8[_0x316c17(0x344)](); _0x4bee4a[_0x316c17(0x8e4)](_0x316c17(0x819), _0x316c17(0x55b)), _0x4bee4a[_0x316c17(0x8e4)](_0x316c17(0x819), '<div\x20id=\x22snoop-dock\x22></div>'), _0x4aca32[_0x316c17(0x653)]('snoop-char-name-header')['textContent'] = '', _0x331e34(); if (_0x1de4d6) _0x60a4af(_0x31f31d); _0x4cd8c2(), _0x507dda = _0x2bf2dd(_0x372bf7, 0x2710), _0x111bdd(_0x316c17(0x2c6), _0x316c17(0x9aa)); } } let _0x3f63ab = ''; const _0x13b4eb = _0x21051e(_0x17b4c3?.[_0x316c17(0x3d5)][0x0]); if (_0x451a53 === 'user') { if (_0x13b4eb) { if ('zthQL' === 'zthQL') _0x3f63ab = _0x13b4eb[_0x316c17(0x7f9)] || ''; else { _0x3f00e2(_0x316c17(0x373) + _0x368796 + _0x316c17(0x598)), _0x5b7771(() => _0x3fe07d[_0x316c17(0x2a5)](), 0x5dc); return; } } } else { let _0x12893a = null; if (_0x17b4c3?.['type'] === _0x316c17(0xaa7)) _0x12893a = _0x13b4eb; else _0x17b4c3?.[_0x316c17(0x8c3)] === 'group' && _0x2acfe6 && (_0x12893a = _0x21051e(_0x2acfe6)); _0x12893a && (_0x3f63ab = _0x12893a[_0x316c17(0x557)] || ''); } const _0x219d7e = _0x190001(_0x5eddc5, _0x3f63ab), _0x1ccfc2 = _0xc3b5fc && _0xc3b5fc[_0x316c17(0x87b)]()[_0x316c17(0x6c0)]('<div') && _0xc3b5fc[_0x316c17(0x87b)]()[_0x316c17(0xb35)](_0x316c17(0x681)); if (_0x1ccfc2) { if ('Selng' === _0x316c17(0x6ec)) { const _0x4f127c = document[_0x316c17(0x2da)](_0x316c17(0x1f9)); _0x4f127c[_0x316c17(0x84e)] = 'html-module-container', _0x4f127c[_0x316c17(0x9c2)] = _0xc3b5fc, _0x2e5db0 === _0x316c17(0x901) ? _0x316c17(0x4e7) !== _0x316c17(0x4e7) ? (_0x122ebc[_0x316c17(0xa80)](), _0x173ea1['classList'][_0x316c17(0xb4b)](_0x316c17(0x9fb)), _0x355b13['classList']['toggle'](_0x316c17(0x7b2))) : (_0x2c1f77[_0x316c17(0x168)](_0x4f127c), _0x2c1f77['appendChild'](_0x219d7e)) : _0x316c17(0x1b9) !== _0x316c17(0x1b9) ? _0x301328 += _0x316c17(0x509) + _0x15ba07['name'] + _0x316c17(0x5cb) : (_0x2c1f77[_0x316c17(0x168)](_0x219d7e), _0x2c1f77[_0x316c17(0x168)](_0x4f127c)); } else _0x1c7217[_0x316c17(0x4f4)](); } else { const _0x42d88f = document[_0x316c17(0x2da)](_0x316c17(0x1f9)); _0x42d88f[_0x316c17(0xb7b)]['add']('message', _0x2e5db0); if (_0x17b4c3?.[_0x316c17(0x8c3)] === 'private') { const _0x51e89e = _0x17b4c3[_0x316c17(0x3d5)][0x0]; _0x42d88f['classList']['add'](_0x316c17(0x3ca) + _0x51e89e); } if (_0x1e7d1c[_0x316c17(0x748)]) { if ('luJWv' === _0x316c17(0xa49)) { const _0xf0e31d = document['createElement']('div'); _0xf0e31d[_0x316c17(0x84e)] = _0x316c17(0x76d); const _0x2c6f4e = document[_0x316c17(0x2da)](_0x316c17(0x1f9)); _0x2c6f4e[_0x316c17(0x84e)] = _0x316c17(0xa69), _0x2c6f4e[_0x316c17(0x8f9)] = _0x1e7d1c['quotedMessage']['sender']; const _0x3d8bdc = document[_0x316c17(0x2da)](_0x316c17(0x1f9)); _0x3d8bdc[_0x316c17(0x84e)] = _0x316c17(0x641), _0x3d8bdc['textContent'] = _0x1e7d1c[_0x316c17(0x748)][_0x316c17(0x329)], _0xf0e31d[_0x316c17(0x168)](_0x2c6f4e), _0xf0e31d['appendChild'](_0x3d8bdc), _0x42d88f[_0x316c17(0x168)](_0xf0e31d); } else { const _0x39ad25 = _0x350abf[_0x316c17(0x653)]('theme-hue-slider'); if (!_0x39ad25) return; const _0x1fa10a = _0x1bb688['getItem'](_0x316c17(0x3da)) || '35'; _0x1c63a6[_0x316c17(0x82a)][_0x316c17(0x313)][_0x316c17(0x3d0)](_0x316c17(0x8ea), _0x1fa10a), _0x39ad25[_0x316c17(0x3cd)] = _0x1fa10a, _0x39ad25[_0x316c17(0xacf)]('input', () => { const _0x3e795c = _0x316c17, _0x78fd3d = _0x39ad25['value']; _0x385177[_0x3e795c(0x82a)][_0x3e795c(0x313)]['setProperty'](_0x3e795c(0x8ea), _0x78fd3d), _0x11d48f['setItem'](_0x3e795c(0x3da), _0x78fd3d), _0x1c1a4b(); }); } } if (_0xcbb9d8) { _0x42d88f[_0x316c17(0xb7b)][_0x316c17(0x428)](_0x316c17(0x6b2)); const _0xe8551e = document[_0x316c17(0x2da)](_0x316c17(0x7fb)); _0xe8551e[_0x316c17(0x74e)] = _0xcbb9d8, _0xe8551e[_0x316c17(0xb7b)]['add'](_0x316c17(0x80a)), _0x42d88f[_0x316c17(0x168)](_0xe8551e); } else { if (_0x1e7d1c[_0x316c17(0x3bf)] || _0x1e7d1c[_0x316c17(0xaa4)]) { _0x42d88f['classList'][_0x316c17(0x428)]('image'); const _0x490977 = document[_0x316c17(0x2da)](_0x316c17(0x7fb)); _0x490977[_0x316c17(0xb7b)][_0x316c17(0x428)](_0x316c17(0x506)), _0x42d88f['appendChild'](_0x490977); if (_0x1e7d1c[_0x316c17(0x3bf)]) { if (_0x316c17(0x8e0) === 'RCtYh') try { const _0x4e381a = _0x3be02f['createObjectURL'](_0x1265b3), _0x3fc8d5 = _0x316c17(0x844), _0x1c2912 = _0x316c17(0x33e) + _0x3fc8d5 + _0x316c17(0xaf7) + _0x4e381a + _0x316c17(0x36e); _0x427c32[_0x316c17(0x9c2)] = _0x1c2912, _0x49b9ec[_0x316c17(0x82a)][_0x316c17(0x313)][_0x316c17(0x3d0)](_0x316c17(0x6d8), '\x27' + _0x3fc8d5 + '\x27'), _0xe529c5[_0x316c17(0x8f9)] = _0x316c17(0x23a); } catch (_0x4508c5) { _0x5eeb82[_0x316c17(0x5f0)]('字体应用失败:', _0x4508c5), _0x1babd3(_0x316c17(0x911)); } else _0x490977[_0x316c17(0x74e)] = _0x1e7d1c[_0x316c17(0x3bf)]; } else { if ('pMIei' === _0x316c17(0x955)) _0x490977[_0x316c17(0x74e)] = _0x316c17(0x2c7), _0x329660(_0x1e7d1c[_0x316c17(0xaa4)])[_0x316c17(0x8e7)](_0x27efbe => { const _0x10869f = _0x316c17; if (_0x27efbe) { const _0x3fc54f = URL['createObjectURL'](_0x27efbe); _0x490977[_0x10869f(0x74e)] = _0x3fc54f, _0x490977[_0x10869f(0x3e1)] = () => { URL['revokeObjectURL'](_0x3fc54f); }; } else { if (_0x10869f(0x713) === _0x10869f(0x713)) _0x490977[_0x10869f(0x52a)] = '图片加载失败'; else return ''; } })[_0x316c17(0x32a)](_0x1a9aa3 => { const _0x2174ef = _0x316c17; console[_0x2174ef(0x5f0)](_0x2174ef(0x8a2), _0x1a9aa3), _0x490977[_0x2174ef(0x52a)] = '图片加载失败'; }); else { _0x28ca88 = _0x53e9c9(_0x5b64a6[_0x316c17(0x89a)]), _0x242821[_0x316c17(0x9c2)] = ''; if (_0x108428[_0x316c17(0x8a0)] === 0x0) { _0x3b17b3['innerHTML'] = _0x316c17(0x56c); return; } _0x1fd44['forEach']((_0x2dcae3, _0x14cce2) => { const _0x599206 = _0x316c17, _0x1e468d = _0x698f88[_0x599206(0x2da)]('p'); _0x1e468d[_0x599206(0x8f9)] = _0x2dcae3[_0x599206(0x252)], _0x1e468d['id'] = _0x599206(0x3bc) + _0x14cce2, _0x42544b['appendChild'](_0x1e468d); }); } } if (_0xc3b5fc) { if (_0x316c17(0x295) === 'jfsoT') !_0x480972['contains'](_0x2d47f5[_0x316c17(0xa4b)]) && _0x931927[_0x316c17(0xa4b)] !== _0x3b20a9 && _0x24e165[_0x316c17(0xa4b)] !== _0x307d48 && _0x49c744[_0x316c17(0xb7b)][_0x316c17(0x344)](_0x316c17(0x322)); else { const _0x36ee37 = document[_0x316c17(0x2da)]('p'); _0x36ee37[_0x316c17(0x313)][_0x316c17(0x2fb)] = _0x316c17(0xa89), _0x36ee37['textContent'] = _0xc3b5fc, _0x42d88f[_0x316c17(0x168)](_0x36ee37); } } } else { if (_0x1e7d1c[_0x316c17(0x8c3)] === _0x316c17(0x7b8)) { if (_0x316c17(0x58a) === 'OPQAW') { _0x42d88f[_0x316c17(0xb7b)][_0x316c17(0x428)](_0x316c17(0x7b8)); const _0x38be85 = _0x1e7d1c['role'] === _0x316c17(0x901) ? _0x4079e8(_0x1884b1['activeChatId']) : _0x21051e(_0x1e7d1c[_0x316c17(0x86d)]), _0xefe022 = _0x1e7d1c[_0x316c17(0x9c7)] === _0x4079e8(_0x1884b1[_0x316c17(0x9a8)])['id'] ? _0x4079e8(_0x1884b1['activeChatId']) : _0x21051e(_0x1e7d1c[_0x316c17(0x9c7)]), _0x17d8d7 = _0x38be85?.[_0x316c17(0x7d7)] ? _0x38be85[_0x316c17(0x7d7)] + _0x316c17(0x6f0) : '转账', _0x157444 = _0xefe022?.[_0x316c17(0x7d7)] ? _0x316c17(0x8d1) + _0xefe022[_0x316c17(0x7d7)] : '转账', _0xe387d5 = _0x316c17(0x5be) + _0x17d8d7 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥' + _0x1e7d1c[_0x316c17(0x8d0)][_0x316c17(0x395)](0x2) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>' + _0x157444 + _0x316c17(0xa03); _0x42d88f[_0x316c17(0x9c2)] = _0xe387d5; } else _0x44245e = _0x98e1f5[_0x316c17(0x99a)] || _0x4d4a1f, _0x5dc2a0 = _0x13e6fb[_0x316c17(0x7d7)] || _0x316c17(0xa0e), _0x759943 = _0x1f01b3['remark'] || '私聊'; } else { if (_0x1e7d1c['type'] === _0x316c17(0x94e)) { if ('IWDyn' !== _0x316c17(0x9c9)) { _0x42d88f[_0x316c17(0xb7b)][_0x316c17(0x428)]('music'); const _0x574bca = document[_0x316c17(0x2da)](_0x316c17(0x1f9)); _0x574bca[_0x316c17(0x84e)] = _0x316c17(0x57d), _0x574bca['classList'][_0x316c17(0x428)](_0x316c17(0x9b1)); const _0x31434b = _0x1e7d1c[_0x316c17(0xaae)] === _0x316c17(0x901) ? _0x4079e8(_0x1884b1[_0x316c17(0x9a8)])['name'] || '你' : _0x21051e(_0x1e7d1c[_0x316c17(0x86d)])?.[_0x316c17(0x7d7)] || 'TA', _0x4efee4 = _0x316c17(0x50b) + _0x1e7d1c[_0x316c17(0x1af)], _0x21b27e = '<img\x20id=\x22' + _0x4efee4 + _0x316c17(0x418) + _0xe4a1db + '\x22>'; _0x1e7d1c[_0x316c17(0x180)] && _0x329660(_0x1e7d1c[_0x316c17(0x180)])[_0x316c17(0x8e7)](_0x7d248f => { const _0x30f5bd = _0x316c17, _0x54ba42 = document[_0x30f5bd(0x653)](_0x4efee4); if (_0x54ba42 && _0x7d248f) _0x54ba42[_0x30f5bd(0x74e)] = URL[_0x30f5bd(0x264)](_0x7d248f); }), _0x1e7d1c[_0x316c17(0x4db)] ? _0x574bca['innerHTML'] = _0x316c17(0x4be) + _0x21b27e + _0x316c17(0xa5b) + _0x1e7d1c[_0x316c17(0x70f)] + _0x316c17(0x8fd) + _0x1e7d1c['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>' : _0x574bca[_0x316c17(0x9c2)] = _0x316c17(0x75e) + _0x31434b + '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x21b27e + _0x316c17(0xa5b) + _0x1e7d1c['songName'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x1e7d1c[_0x316c17(0x6e9)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x1e7d1c[_0x316c17(0x64b)] + _0x316c17(0x590), _0x42d88f[_0x316c17(0x168)](_0x574bca); } else _0x5a738c = { 'characterId': _0x378823[_0x316c17(0x553)], 'entries': [] }, _0x2e9879[_0x316c17(0x7f1)]['push'](_0x2f24a4); } else { if (_0x1e7d1c['type'] === _0x316c17(0x35c) && _0x1e7d1c['songName']) { _0x42d88f['classList'][_0x316c17(0x428)](_0x316c17(0x35c)); const _0x43a6e6 = document['createElement'](_0x316c17(0x1f9)); _0x43a6e6[_0x316c17(0x84e)] = _0x316c17(0x6ba), _0x43a6e6[_0x316c17(0x2c4)][_0x316c17(0x543)] = _0x316c17(0xaf6) + _0x1e7d1c[_0x316c17(0x1af)]; const _0x29ef36 = 'cover_placeholder_' + _0x1e7d1c[_0x316c17(0x1af)], _0x41ff04 = _0x316c17(0x222) + _0xe4a1db + _0x316c17(0x22b) + _0x29ef36 + '\x22\x20class=\x22music-share-cover\x22>'; if (_0x1e7d1c[_0x316c17(0x180)]) _0x329660(_0x1e7d1c['coverId'])[_0x316c17(0x8e7)](_0x3eb2c4 => { const _0x4b4682 = _0x316c17, _0x20e849 = document[_0x4b4682(0x653)](_0x29ef36); if (_0x20e849 && _0x3eb2c4) _0x20e849[_0x4b4682(0x74e)] = URL['createObjectURL'](_0x3eb2c4); }); else _0x1e7d1c[_0x316c17(0xb23)] && setTimeout(() => { const _0x40ba83 = _0x316c17, _0x57cb94 = document[_0x40ba83(0x653)](_0x29ef36); if (_0x57cb94) _0x57cb94[_0x40ba83(0x74e)] = _0x1e7d1c[_0x40ba83(0xb23)]; }, 0x0); _0x43a6e6['innerHTML'] = _0x316c17(0x65e) + _0x41ff04 + _0x316c17(0x51c) + _0x1e7d1c[_0x316c17(0x70f)] + _0x316c17(0x414) + _0x1e7d1c['artist'] + _0x316c17(0x728) + (_0x1e7d1c[_0x316c17(0xa36)] ? '▶' : '⚠') + _0x316c17(0x681), _0x1e7d1c[_0x316c17(0xa36)] && _0x43a6e6[_0x316c17(0xacf)](_0x316c17(0x4f4), function () { const _0x19b513 = _0x316c17; if ('zdact' === _0x19b513(0x605)) throw _0x31c0c2; else { const _0x4c9a42 = { 'id': _0x19b513(0xaf6) + _0x1e7d1c[_0x19b513(0x1af)], 'url': _0x1e7d1c[_0x19b513(0xa36)] }; _0x3734cf(this, _0x4c9a42); } }), _0x42d88f[_0x316c17(0x168)](_0x43a6e6); } else { if (_0xc3b5fc) { if (_0x316c17(0x1d4) === _0x316c17(0x1d4)) { const _0x135ec3 = document[_0x316c17(0x2da)]('p'); _0x135ec3[_0x316c17(0x9c2)] = _0xc3b5fc, _0x135ec3[_0x316c17(0x313)][_0x316c17(0x29e)] = '0', _0x42d88f[_0x316c17(0x168)](_0x135ec3); } else _0x1714b9['style'][_0x316c17(0x272)] = _0x316c17(0xac5), _0x2abc3e(() => _0x705bf5[_0x316c17(0xb7b)][_0x316c17(0x428)]('show'), 0xa); } } } } } } _0x2e5db0 === _0x316c17(0x901) ? (_0x2c1f77[_0x316c17(0x168)](_0x42d88f), _0x2c1f77['appendChild'](_0x219d7e)) : 'Qaljo' === 'Qaljo' ? (_0x2c1f77[_0x316c17(0x168)](_0x219d7e), _0x2c1f77[_0x316c17(0x168)](_0x42d88f)) : _0x48c66d[_0x316c17(0x8f9)] = _0x3c52c2['from'](_0x2a4fee)[_0x316c17(0x7d4)](_0x58326e => _0x58326e[_0x316c17(0x8fb)][_0x316c17(0x8f9)][_0x316c17(0x87b)]())[_0x316c17(0x359)]('、'); } _0x1535ae[_0x316c17(0x168)](_0x2c1f77); const _0x388711 = document['createElement']('div'); return _0x388711[_0x316c17(0x84e)] = _0x316c17(0x1af), _0x388711[_0x316c17(0x8f9)] = _0x4a8060(_0x1e7d1c[_0x316c17(0x1af)]), _0x1535ae[_0x316c17(0x168)](_0x388711), _0x319ce7[_0x316c17(0x168)](_0x1535ae), _0x1535ae; } document['getElementById'](_0x5f58e0(0x250))['addEventListener'](_0x5f58e0(0x4f4), _0x3cedbf); let _0x1a6bba = null, _0x509211 = null; function _0x3cedbf(_0x48c230) { const _0x1ef597 = _0x5f58e0; if (window[_0x1ef597(0xa21)]()[_0x1ef597(0x8aa)]()) { if ('fyUGD' === _0x1ef597(0x38a)) return; else _0x5e158f(), _0x2b9818(_0x1ef597(0x1ea), _0x1ef597(0x91e)); } const _0x2e844b = _0x48c230[_0x1ef597(0xa4b)][_0x1ef597(0x546)](_0x1ef597(0x594)), _0x304a31 = _0x48c230[_0x1ef597(0xa4b)]['closest'](_0x1ef597(0x4c7)); if (!_0x2e844b || _0x304a31) return; const _0x4f0f26 = parseInt(_0x2e844b[_0x1ef597(0x2c4)][_0x1ef597(0x63f)], 0xa); if (isNaN(_0x4f0f26)) return; _0x5e1692(_0x4f0f26); } function _0x22d007() { const _0x605b68 = _0x5f58e0, _0x5aa37c = _0x2bf707(); if (!_0x5aa37c) { _0x3aae85[_0x605b68(0x8f9)] = _0x605b68(0x8f1); return; } if (_0x5aa37c[_0x605b68(0x8c3)] === _0x605b68(0xaa7)) { if (_0x605b68(0xb43) !== _0x605b68(0xb43)) _0x321b8c[_0x605b68(0x981)] = _0xa26b75(() => { const _0x1cb763 = _0x605b68; if (_0x938622[_0x1cb763(0x8c3)] === 'touchstart') _0xcc6b67[_0x1cb763(0x4d1)](); _0x44fa84(_0x767c90(_0xefefe, 0xa), _0x42f34b); }, 0x320); else { const _0x3544a8 = _0x21051e(_0x5aa37c[_0x605b68(0x3d5)][0x0]); _0x3aae85['textContent'] = _0x3544a8 ? _0x3544a8['name'] : _0x605b68(0x3f2); } } else { if (_0x605b68(0x90b) !== _0x605b68(0x90b)) try { const _0x4eac4c = { 'version': 0x1, 'characters': _0x4879d3[_0x605b68(0x358)], 'worldBooks': _0x15ca42[_0x605b68(0x562)], 'chats': _0x1de9e2[_0x605b68(0x940)], 'apiSettings': _0x2f9401[_0x605b68(0x2ec)], 'preferences': _0x160e8c[_0x605b68(0xa17)], 'activeChatId': _0x515883[_0x605b68(0x9a8)], 'diaries': _0x519797[_0x605b68(0x7f1)], 'friendCircles': _0x2b8c3d[_0x605b68(0xa26)], 'activeFriendCircleId': _0x435f4b[_0x605b68(0x825)], 'userProfiles': _0x309bbe[_0x605b68(0x38c)], 'activeUserProfileId': _0x145342[_0x605b68(0x1d3)], 'accountingData': _0x30169e['accountingData'], 'accountingLedger': _0x2ae44a[_0x605b68(0x47a)], 'calendarEvents': _0x3d281c[_0x605b68(0xa9d)] }; _0x6b77d0[_0x605b68(0x7db)](_0x605b68(0x4c5), _0x16cdb1['stringify'](_0x4eac4c)); } catch (_0x38b17d) { _0x3c4fcd[_0x605b68(0x5f0)](_0x605b68(0xb2b), _0x38b17d), _0x3a16f8('无法保存状态，浏览器可能禁用了存储功能。'); } else _0x3aae85[_0x605b68(0x8f9)] = _0x5aa37c[_0x605b68(0x7d7)] || '群聊\x20(' + _0x5aa37c[_0x605b68(0x3d5)]['length'] + ')'; } } function _0x5dead2(_0x38fdfd) { const _0x1fa618 = _0x5f58e0; if (_0x1fa618(0x9b2) !== _0x1fa618(0x9b2)) { const _0x57f57c = _0x202e0b[_0x1fa618(0x81f)](_0x267fe1); if (_0x57f57c) { const _0x568646 = _0x1925f4(_0x57f57c[0x1], 0xa), _0x4225c4 = _0x266502(_0x57f57c[0x2], 0xa), _0x5b8026 = _0x59a655(_0x57f57c[0x3], 0xa) * (_0x57f57c[0x3][_0x1fa618(0x8a0)] === 0x2 ? 0xa : 0x1), _0x25c5f2 = _0x568646 * 0x3c + _0x4225c4 + _0x5b8026 / 0x3e8, _0x139b14 = _0x211d1e[_0x1fa618(0xac6)](_0x2d04bb, '')['trim'](); _0x139b14 && _0x91929e['push']({ 'time': _0x25c5f2, 'text': _0x139b14 }); } } else { const _0x535860 = document[_0x1fa618(0x795)](_0x1fa618(0x94b)); if (_0x535860 && (_0x535860['id'] === 'meeting-view-screen' || _0x535860['id'] === _0x1fa618(0x407))) _0x45c4f2(); else { if ('DjbYN' === 'DjbYN') { const _0x440b3e = document[_0x1fa618(0x6e4)]('.typing-indicator'); _0x440b3e[_0x1fa618(0xa30)](_0x4456c9 => _0x4456c9[_0x1fa618(0x344)]()); } else _0x4129bf[_0x1fa618(0x168)](_0x553d84), _0x4df4de[_0x1fa618(0x168)](_0x1fa6ee); } } } function _0x5bcec0() { const _0xd0db30 = _0x5f58e0; if (_0x1884b1[_0xd0db30(0xa54)] && _0x1884b1[_0xd0db30(0xacc)]) { if ('fEqfj' === 'fEqfj') console['log']('用户操作中断了\x20AI\x20响应。'), _0x1884b1[_0xd0db30(0xacc)]['abort'](_0xd0db30(0xb74)), _0x1884b1[_0xd0db30(0xacc)] = null; else { if (_0x3ab640) _0x3f679b(_0x22c253); const _0x20ca52 = _0xa62279['target'][_0xd0db30(0x546)](_0xd0db30(0x5a5)); if (!_0x20ca52) return; const _0x5f4d0c = _0x20ca52[_0xd0db30(0x2c4)]['id']; if (!_0x5f4d0c) return; const _0x157ccc = () => { _0xb4272f = _0x46efe4(() => { const _0x574fa3 = _0x493f; if (_0x40c71e['type'] === _0x574fa3(0x65a)) _0x390d98[_0x574fa3(0x4d1)](); _0x41a2bd(_0x5f4d0c); }, 0x320); }, _0x160aac = () => { if (_0x1bc197) _0x3072ed(_0x1b45ce); }; _0x3b7b9d[_0xd0db30(0xacf)](_0xd0db30(0x5a7), _0x160aac, { 'once': !![] }), _0x1ee5b5[_0xd0db30(0xacf)](_0xd0db30(0x898), _0x160aac, { 'once': !![] }), _0x1f8151[_0xd0db30(0xacf)]('touchcancel', _0x160aac, { 'once': !![] }), _0x366e12[_0xd0db30(0xacf)](_0xd0db30(0x2e5), _0x160aac, { 'once': !![] }), _0x157ccc(); } } _0x1884b1[_0xd0db30(0xa54)] = ![], _0x5dead2(![]); } function _0x2bf707() { const _0x407d84 = _0x5f58e0; return _0x1884b1['chats']['find'](_0x37bb12 => _0x37bb12['id'] === _0x1884b1[_0x407d84(0x9a8)]); } function _0x21051e(_0x127a25) { const _0x9fd924 = _0x5f58e0; if (_0x9fd924(0x9ff) === _0x9fd924(0x88d)) { const _0xd11475 = _0x2a49dc[_0x48b26a]; _0x3adf86(_0xd11475); } else return _0x1884b1[_0x9fd924(0x358)]['find'](_0x38d0b8 => _0x38d0b8['id'] === _0x127a25); } function _0x96cc06(_0x595084) { const _0x264b87 = _0x5f58e0; if ('sHwxy' !== _0x264b87(0x7c3)) _0x4962e8(_0x264b87(0x868)); else { _0x1884b1[_0x264b87(0x358)] = _0x1884b1[_0x264b87(0x358)][_0x264b87(0x776)](_0x5943fe => _0x5943fe['id'] !== _0x595084), _0x1884b1['chats']['forEach'](_0x5200e5 => { const _0x478616 = _0x264b87; _0x5200e5[_0x478616(0x8c3)] === 'group' && (_0x5200e5[_0x478616(0x3d5)] = _0x5200e5[_0x478616(0x3d5)][_0x478616(0x776)](_0x41eb83 => _0x41eb83 !== _0x595084)); }); const _0x104273 = _0x1884b1[_0x264b87(0x940)][_0x264b87(0x6f9)](_0x2fff0e => _0x2fff0e[_0x264b87(0x8c3)] === _0x264b87(0xaa7) && _0x2fff0e[_0x264b87(0x3d5)][_0x264b87(0x1ac)](_0x595084)); _0x104273 && _0x5a7d4e(_0x104273['id']), _0x1884b1[_0x264b87(0x940)] = _0x1884b1['chats'][_0x264b87(0x776)](_0x280581 => _0x280581[_0x264b87(0x8c3)] !== _0x264b87(0x2b7) || _0x280581[_0x264b87(0x3d5)][_0x264b87(0x8a0)] > 0x1), _0x480928(), _0x3ebe62(); } } function _0x5a7d4e(_0x55991f) { const _0x46b5e8 = _0x5f58e0; _0x1884b1[_0x46b5e8(0x940)] = _0x1884b1[_0x46b5e8(0x940)][_0x46b5e8(0x776)](_0x55ce2c => _0x55ce2c['id'] !== _0x55991f); try { localStorage['removeItem'](_0x46b5e8(0x962) + _0x55991f); } catch (_0x4d86bc) { console[_0x46b5e8(0x5f0)](_0x46b5e8(0xb2c) + _0x55991f, _0x4d86bc); } _0x1884b1['activeChatId'] === _0x55991f && (_0x1884b1[_0x46b5e8(0x9a8)] = _0x1884b1['chats'][0x0]?.['id'] || null, _0x24f491(_0x1884b1[_0x46b5e8(0x9a8)])), _0x480928(), _0x3ebe62(); } async function _0x24f491(_0x270b75) { const _0xdd1b49 = _0x5f58e0; _0x1884b1[_0xdd1b49(0x9a8)] !== _0x270b75 && (_0x5bcec0(), _0x1884b1[_0xdd1b49(0x41b)] = 0x64); if (!_0x270b75) { _0x1884b1[_0xdd1b49(0x9a8)] = null, _0x480928(), _0x32aad5(![]), document[_0xdd1b49(0x653)](_0xdd1b49(0x692))['style'][_0xdd1b49(0x956)] = ''; return; } _0x1884b1[_0xdd1b49(0x9a8)] = _0x270b75, _0x480928(), _0x22d007(), _0x319ce7[_0xdd1b49(0x9c2)] = '', _0x1d9e54(!![], _0xdd1b49(0x5b4)), setTimeout(async () => { const _0x489aa7 = _0xdd1b49; try { _0x4f8e33(); const _0x5cb666 = _0x2bf707(), _0x131cfd = document[_0x489aa7(0x653)](_0x489aa7(0x692)); let _0x187faf = null; if (_0x5cb666) { if (_0x5cb666[_0x489aa7(0x8c3)] === 'private') { if (_0x489aa7(0xae7) !== _0x489aa7(0x8b7)) { const _0x53acc8 = _0x5cb666[_0x489aa7(0x3d5)][0x0]; _0x4a4362(_0x53acc8), _0x187faf = await _0x329660(_0x489aa7(0xac9) + _0x53acc8); } else { if (_0x5eb905 === null) return; _0x200f93[_0x489aa7(0x589)][_0x489aa7(0x8cf)](_0x391b6a, 0x1), _0x58d731(), _0x30bd65(), _0x5b04d6(); } } else _0x187faf = await _0x329660(_0x489aa7(0x288) + _0x5cb666['id']); if (_0x187faf) { if (_0x489aa7(0x7bb) === _0x489aa7(0x7bb)) _0x131cfd[_0x489aa7(0x313)][_0x489aa7(0x956)] = _0x489aa7(0xa38) + URL[_0x489aa7(0x264)](_0x187faf) + '\x27)', _0x131cfd[_0x489aa7(0x313)][_0x489aa7(0x5ab)] = _0x489aa7(0x544), _0x131cfd['style'][_0x489aa7(0x6e7)] = _0x489aa7(0xaa3); else { if (_0x514536[_0x489aa7(0x8c3)] === 'touchstart') _0x2e94b3['preventDefault'](); _0x18c2a5(_0x32d282); } } else { if (_0x489aa7(0x6e1) !== 'zDNSD') _0x131cfd[_0x489aa7(0x313)]['backgroundImage'] = ''; else { const _0x9d189f = { 'role': _0x489aa7(0x37b), 'content': _0x489aa7(0x18a) + _0x30c670['name'] + ']', 'displayUrl': _0x3b5f5e[_0x489aa7(0x51a)], 'senderId': _0x447c40[_0x489aa7(0x86d)], 'timestamp': _0x168d70[_0x489aa7(0x965)](), 'isOffline': _0x273a9 }; _0xd75668[_0x489aa7(0x589)][_0x489aa7(0x24d)](_0x9d189f); } } } _0x59f07e(); } catch (_0x4236ee) { if (_0x489aa7(0x954) !== _0x489aa7(0x954)) try { _0x57e771[_0x191a1d] = _0x2ceec7[_0x489aa7(0x440)](_0x3b64c3); } catch (_0x56f813) { } else console['error'](_0x489aa7(0xb6b), _0x4236ee), _0x5929aa('加载聊天失败:\x20' + _0x4236ee[_0x489aa7(0xa53)]); } finally { _0x1d9e54(![]); } }, 0x32); } async function _0x52598f() { const _0x36d5dd = _0x5f58e0; if (_0x1884b1[_0x36d5dd(0xa54)]) { if (_0x36d5dd(0x916) === _0x36d5dd(0x4b3)) { if (_0x34b2eb) _0x1e200e[_0x36d5dd(0x8f9)] = '▶'; } else { _0x5929aa('正在构思中，请稍候...'); return; } } const _0x3e9b05 = _0x1884b1[_0x36d5dd(0x589)]; if (_0x3e9b05[_0x36d5dd(0x8a0)] === 0x0) return; let _0x341eb7 = -0x1; for (let _0x3b6690 = _0x3e9b05[_0x36d5dd(0x8a0)] - 0x1; _0x3b6690 >= 0x0; _0x3b6690--) { if (_0x3e9b05[_0x3b6690][_0x36d5dd(0xaae)] === _0x36d5dd(0x901)) { if ('hkKkB' === _0x36d5dd(0x744)) _0x18e11d[_0x36d5dd(0x313)][_0x36d5dd(0x272)] = 'none', _0x558e0b[_0x36d5dd(0x313)]['border'] = _0x36d5dd(0x26b); else { _0x341eb7 = _0x3b6690; break; } } } if (_0x341eb7 === -0x1 || _0x341eb7 === _0x3e9b05[_0x36d5dd(0x8a0)] - 0x1) { _0x5929aa(_0x36d5dd(0x7c1)); return; } _0x3e9b05[_0x36d5dd(0x8cf)](_0x341eb7 + 0x1), _0x1884b1[_0x36d5dd(0x8ac)] = [], _0x21733b(), _0x1a91c2(), _0x48607f(_0x1884b1[_0x36d5dd(0x5f2)]), setTimeout(() => { const _0x263e67 = _0x36d5dd; 'NTHub' === _0x263e67(0x203) ? (_0x4526af[_0x263e67(0x653)](_0x263e67(0x8bd))[_0x263e67(0x8f9)] = '为\x20' + _0x105a95 + _0x263e67(0x394), _0x345763[_0x263e67(0x653)](_0x263e67(0x6bd))['value'] = '', _0x574a77[_0x263e67(0x653)](_0x263e67(0xaec))[_0x263e67(0x65f)] = !![], _0x4ba303[_0x263e67(0x653)]('add-event-modal')[_0x263e67(0xb7b)]['add'](_0x263e67(0x322)), _0x438b1a[_0x263e67(0x653)]('event-content-input')['focus']()) : _0x180c61(); }, 0x64); } async function _0x326b55() { const _0x133e79 = _0x5f58e0; if (_0x1884b1[_0x133e79(0xa54)]) { _0x5929aa(_0x133e79(0x45d)); return; } const _0x3ace8c = _0x1884b1[_0x133e79(0x589)]; if (_0x3ace8c[_0x133e79(0x8a0)] === 0x0) return; let _0x49f735 = -0x1; for (let _0x577933 = _0x3ace8c[_0x133e79(0x8a0)] - 0x1; _0x577933 >= 0x0; _0x577933--) { if (_0x3ace8c[_0x577933][_0x133e79(0xaae)] === _0x133e79(0x901)) { if (_0x133e79(0xadf) !== _0x133e79(0xadf)) _0x324204(_0x133e79(0x8d5)); else { _0x49f735 = _0x577933; break; } } } if (_0x49f735 === -0x1 || _0x49f735 === _0x3ace8c[_0x133e79(0x8a0)] - 0x1) { _0x5929aa(_0x133e79(0x646)); return; } _0x3ace8c[_0x133e79(0x8cf)](_0x49f735 + 0x1), _0x21733b(), _0x45c4f2(), setTimeout(() => { _0x180c61(); }, 0x64); } function _0xa6a72(_0x1d5840 = null) { const _0x422b10 = _0x5f58e0; if (_0x422b10(0x772) !== 'VYobL') { const _0x3cc55d = _0x1d5840 ?? _0x8185a2[_0x422b10(0x3cd)][_0x422b10(0x87b)](); if (_0x3cc55d === '' || !_0x1884b1[_0x422b10(0x9a8)]) return; const _0x1745be = document[_0x422b10(0x795)]('.screen.active'), _0xabcf8e = _0x1745be['id'] === 'meeting-view-screen', _0x31f6d8 = { 'role': 'user', 'content': _0x3cc55d, 'timestamp': Date[_0x422b10(0x965)](), 'isOffline': _0xabcf8e }; _0x1884b1[_0x422b10(0x31f)] && (_0x422b10(0xb46) !== _0x422b10(0xb46) ? (_0xc97c6b(_0x3271d6), _0x2f2879 = null) : _0x31f6d8[_0x422b10(0x748)] = { ..._0x1884b1[_0x422b10(0x31f)] }); _0x1884b1[_0x422b10(0x589)][_0x422b10(0x24d)](_0x31f6d8), _0x21733b(), _0x45c4f2(); if (!_0x1d5840) { if ('jBFQa' === 'jBFQa') _0x8185a2[_0x422b10(0x3cd)] = ''; else { const _0xbb97b4 = _0x422b10(0x7f4); _0x4f6cd5 = _0x422b10(0x1b1) + _0x4a5660['name'] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0xbb97b4 + _0x422b10(0x9e0) + _0x449a1f[_0x422b10(0x7d7)] + _0x422b10(0xb24) + _0xbb97b4 + _0x422b10(0x78b) + _0xbb97b4 + _0x422b10(0x1b0); } } _0x1764ec(); } else _0x38d0a5(_0x47eb57[_0x422b10(0x825)]); } function _0x192871(_0x44c0d6) { const _0x8e1982 = _0x5f58e0; if ('NIykB' !== _0x8e1982(0x212)) throw new _0x3bd16e(_0x8e1982(0x1a0)); else { if (!_0x44c0d6 || !_0x1884b1['activeChatId']) return; const _0x1eb55f = { 'role': 'user', 'content': _0x8e1982(0x44c) + _0x44c0d6[_0x8e1982(0x7d7)] + ']', 'displayUrl': _0x44c0d6['url'], 'timestamp': Date[_0x8e1982(0x965)]() }; _0x1884b1[_0x8e1982(0x589)][_0x8e1982(0x24d)](_0x1eb55f), _0x1582f0(_0x1eb55f, _0x1884b1[_0x8e1982(0x589)][_0x8e1982(0x8a0)] - 0x1), _0x21733b(), _0x52300e[_0x8e1982(0xb7b)][_0x8e1982(0x344)](_0x8e1982(0x322)); } } async function _0x33d5cf(_0x2ce5af) { const _0x4a697d = _0x5f58e0, _0x30454b = _0x2ce5af['target']['files'][0x0]; if (!_0x30454b || !_0x1884b1['activeChatId']) return; _0x1d9e54(!![], _0x4a697d(0x9b9)); try { if (_0x4a697d(0x6bf) !== 'gDOZF') { const _0x589e9b = await _0x4f9511(_0x30454b, 0x320, 0.8, !![]), _0xfe9e94 = _0x4a697d(0xb49) + Date[_0x4a697d(0x965)](); await _0x100c88(_0xfe9e94, _0x589e9b); const _0x201e03 = _0x8185a2[_0x4a697d(0x3cd)][_0x4a697d(0x87b)](); _0x8185a2[_0x4a697d(0x3cd)] = ''; const _0x205a8a = { 'role': _0x4a697d(0x901), 'content': _0x201e03, 'imageId': _0xfe9e94, 'timestamp': Date[_0x4a697d(0x965)]() }; _0x1884b1[_0x4a697d(0x589)][_0x4a697d(0x24d)](_0x205a8a), _0x1582f0(_0x205a8a, _0x1884b1[_0x4a697d(0x589)][_0x4a697d(0x8a0)] - 0x1), _0x21733b(); } else _0x10bea7 += _0x4a697d(0xb4c) + _0x2f6860[_0x4a697d(0x869)] + '”的笔记，内容是：“' + _0x2f144d['content'][_0x4a697d(0xac6)](/\n/g, '\x20') + '”。\x0a'; } catch (_0x33622a) { 'LDDbI' === _0x4a697d(0x293) ? _0x5929aa(_0x4a697d(0x6b4) + _0x33622a[_0x4a697d(0xa53)]) : _0x4af920 = _0x3a75b3['content']; } finally { _0x1d9e54(![]), _0x2ce5af[_0x4a697d(0xa4b)][_0x4a697d(0x3cd)] = ''; } } async function _0x5c24d8() { const _0x4c2604 = _0x5f58e0; if (!_0x1884b1[_0x4c2604(0x9a8)]) return; const _0x1fcbfb = await _0x43a6b9(); if (!_0x1fcbfb) return; _0x5929aa(_0x4c2604(0x7a7)); try { if (_0x4c2604(0x28d) !== 'gIPaP') { const _0x3724d9 = await _0x4ff13a(_0x1fcbfb['songName'], _0x1fcbfb[_0x4c2604(0x6e9)]); let _0x3fef4f = _0x3724d9['cover']; if (_0x3724d9[_0x4c2604(0x544)] && _0x3724d9[_0x4c2604(0x544)][_0x4c2604(0x6c0)](_0x4c2604(0x80f))) try { const _0x3ed704 = await fetch(_0x3724d9['cover']), _0xe00c9c = await _0x3ed704[_0x4c2604(0x511)](); _0x3fef4f = await _0x1f0891(_0xe00c9c); } catch (_0x10d374) { console[_0x4c2604(0x5f0)](_0x4c2604(0x574), _0x10d374), _0x3fef4f = _0xe4a1db; } const _0x160a44 = { 'role': _0x4c2604(0x901), 'type': _0x4c2604(0x35c), 'content': _0x4c2604(0x838) + _0x1fcbfb[_0x4c2604(0x70f)] + _0x4c2604(0x4ec) + _0x1fcbfb[_0x4c2604(0x6e9)] + ']', 'songName': _0x1fcbfb[_0x4c2604(0x70f)], 'artist': _0x1fcbfb['artist'], 'coverUrl': _0x3fef4f, 'playableUrl': _0x3724d9[_0x4c2604(0x51a)], 'timestamp': Date[_0x4c2604(0x965)]() }; _0x1884b1[_0x4c2604(0x589)][_0x4c2604(0x24d)](_0x160a44), _0x1582f0(_0x160a44, _0x1884b1[_0x4c2604(0x589)][_0x4c2604(0x8a0)] - 0x1), _0x21733b(); } else _0xd51e64['participantIds'] = _0x24dd4f[_0x4c2604(0x3d5)][_0x4c2604(0x776)](_0x4ebc45 => _0x4ebc45 !== _0x443f19); } catch (_0xc6cffd) { if ('IlVmU' !== 'boWOF') console[_0x4c2604(0x5f0)](_0x4c2604(0x4ad), _0xc6cffd), _0x5929aa(_0x4c2604(0x232) + _0xc6cffd[_0x4c2604(0xa53)]); else { _0x573425['chats'] = _0x192f73['chats'][_0x4c2604(0x776)](_0x2be085 => _0x2be085['id'] !== _0x5b0555); try { _0xec8b54[_0x4c2604(0x673)](_0x4c2604(0x962) + _0x5a80a3); } catch (_0x3934e0) { _0x4b656e['error'](_0x4c2604(0xb2c) + _0x5e6515, _0x3934e0); } _0xf1bf47['activeChatId'] === _0x39018c && (_0xd80679[_0x4c2604(0x9a8)] = _0x4df42e['chats'][0x0]?.['id'] || null, _0x571e63(_0x207722[_0x4c2604(0x9a8)])), _0x3dceaf(), _0x198ec2(); } } } function _0x31000d(_0x10b80b, _0x2838d6 = 0x78) { const _0x2c4a46 = _0x5f58e0; if (_0x2c4a46(0x7cb) === _0x2c4a46(0x7cb)) { const _0x44b329 = _0x3c25ad => { const _0x20eaad = _0x2c4a46; if (_0x20eaad(0x8b1) === 'VLKHO') { if (_0x3c25ad[_0x20eaad(0xaae)] === _0x20eaad(0x901)) return _0x1884b1[_0x20eaad(0x7c2)]?.['name'] || _0x20eaad(0x8dd); if (_0x3c25ad['senderId']) { const _0x4b8c6 = _0x21051e(_0x3c25ad[_0x20eaad(0x86d)]); return _0x4b8c6?.[_0x20eaad(0x7d7)] || 'Unknown'; } if (_0x10b80b?.['type'] === 'private') { const _0x448f7d = _0x21051e(_0x10b80b[_0x20eaad(0x3d5)][0x0]); return _0x448f7d?.['name'] || 'AI'; } return _0x20eaad(0xa18); } else return ''; }, _0x5afaac = _0x1884b1[_0x2c4a46(0x589)][_0x2c4a46(0x46a)](-_0x2838d6), _0x2d7a5e = []; for (const _0x48606c of _0x5afaac) { if ('gTXfL' !== 'gTXfL') { _0x4e9b01[_0x2c4a46(0x5f0)](_0x2c4a46(0x319) + _0x2edead[_0x2c4a46(0x7d7)] + _0x2c4a46(0x561)); return; } else { if (_0x48606c[_0x2c4a46(0x6dd)]) { if (_0x2c4a46(0xa59) === 'yIEJo') { const _0x1af0c9 = _0x1b9555[_0x2c4a46(0x374)](), _0x44c2ef = _0x400ae6(_0x3a61da[_0x2c4a46(0x978)]() + 0x1)[_0x2c4a46(0xa83)](0x2, '0'), _0x416dea = _0x156e86(_0x4ca008[_0x2c4a46(0x8ff)]())[_0x2c4a46(0xa83)](0x2, '0'); return _0x1af0c9 + '-' + _0x44c2ef + '-' + _0x416dea; } else _0x2d7a5e['push']('[' + _0x44b329(_0x48606c) + _0x2c4a46(0x99f) + (_0x48606c[_0x2c4a46(0x329)]?.[_0x2c4a46(0x81f)](/：(.+?)]/)?.[0x1] || '表情') + ']'); } else { if (_0x48606c['image']) { const _0x47b37e = _0x48606c['content'] ? '\x20' + _0x48606c[_0x2c4a46(0x329)] : ''; _0x2d7a5e[_0x2c4a46(0x24d)]('[' + _0x44b329(_0x48606c) + _0x2c4a46(0x689) + _0x47b37e); } else _0x48606c['content'] && _0x2d7a5e[_0x2c4a46(0x24d)]('[' + _0x44b329(_0x48606c) + ']\x20' + _0x48606c['content']); } } } return _0x2d7a5e[_0x2c4a46(0x359)]('\x0a'); } else _0x5ad5f0['style']['backgroundImage'] = _0x2c4a46(0xa38) + _0x3139e6[_0x2c4a46(0x41d)] + '\x27)', _0x2736ef[_0x2c4a46(0x313)][_0x2c4a46(0x5ab)] = _0x2c4a46(0x544), _0xfe5988[_0x2c4a46(0x313)][_0x2c4a46(0x6e7)] = _0x2c4a46(0xaa3); } function _0x4a8541(_0x5d3ff2, _0x1a8b18) { const _0x3f1a4 = _0x5f58e0; if (!_0x5d3ff2 || !_0x1a8b18) return null; const _0x5d3a5e = _0x1a8b18[_0x3f1a4(0x81f)](/@([^\s:：,，。!?]+)/); if (!_0x5d3a5e) return null; const _0x357dc = _0x5d3a5e[0x1][_0x3f1a4(0xaab)](); for (const _0x287e52 of _0x5d3ff2[_0x3f1a4(0x3d5)]) { const _0x2e8651 = _0x21051e(_0x287e52); if (!_0x2e8651?.[_0x3f1a4(0x7d7)]) continue; if (_0x2e8651[_0x3f1a4(0x7d7)][_0x3f1a4(0xaab)]() === _0x357dc) return _0x2e8651; if (_0x2e8651[_0x3f1a4(0x7d7)][_0x3f1a4(0xaab)]()[_0x3f1a4(0x6c0)](_0x357dc)) return _0x2e8651; } return null; } function _0x24869b(_0x20f04b) { const _0x95f3a9 = _0x5f58e0; if ('itCKQ' !== 'qeYRs') { const _0x3b65e1 = _0x20f04b['indexOf']('{'), _0x439621 = _0x20f04b[_0x95f3a9(0x63b)]('}'); if (_0x3b65e1 >= 0x0 && _0x439621 > _0x3b65e1) return _0x20f04b['slice'](_0x3b65e1, _0x439621 + 0x1); return _0x20f04b; } else { const _0x5cf07b = _0x4797c2['key'](_0x516357); _0x5cf07b && _0x5cf07b[_0x95f3a9(0x6c0)](_0x95f3a9(0x48e)) && _0x59c0d3['push'](_0x5cf07b); } } function _0x385f45(_0x261d9c, _0x3864d9, _0x5080fc) { const _0x68654a = _0x5f58e0; if ('oWMfD' === 'YKGSp') return { 'type': _0x68654a(0x252), 'content': _0x515291 }; else { const _0x375956 = new Map(_0x3864d9[_0x68654a(0x7d4)](_0x161b7f => [String(_0x161b7f['id']), _0x161b7f])), _0x28c15b = _0x12259e => String(_0x12259e || '')[_0x68654a(0xaab)]()['replace'](/\s+/g, ''), _0xa0a0d4 = new Map(_0x3864d9[_0x68654a(0x7d4)](_0x3f1fd8 => [_0x28c15b(_0x3f1fd8[_0x68654a(0x7d7)]), _0x3f1fd8])), _0x237b9a = new Set(_0x5080fc), _0x3e0ed3 = { 'events': [] }; for (const _0x5305f2 of _0x261d9c?.[_0x68654a(0x9c5)] || []) { if (_0x68654a(0x38d) !== _0x68654a(0x38d)) { const _0x2c9df4 = _0x3ed350[_0x68654a(0x19f)](0x1, _0x1432eb(_0x5610ea[_0x68654a(0xa17)]?.[_0x68654a(0x99e)] ?? 0x64)), _0x272372 = _0x2f6493[_0x68654a(0x940)][_0x68654a(0x776)](_0x347201 => _0x347201[_0x68654a(0x3d5)][_0x68654a(0x1ac)](_0x4b3cc7)), _0x23e731 = _0x272372[_0x68654a(0x7d4)](_0x83fbf2 => { const _0x2366c6 = _0x68654a, _0x5a0b41 = _0xbad047(_0x83fbf2['id']), _0x1434cc = _0x5a0b41[_0x2366c6(0x8a0)] > 0x0 ? _0x5a0b41[_0x5a0b41['length'] - 0x1] : null; return { 'chat': _0x83fbf2, 'history': _0x5a0b41, 'lastTimestamp': _0x1434cc ? _0x1434cc[_0x2366c6(0x1af)] : 0x0 }; })[_0x68654a(0x776)](_0x58d90c => _0x58d90c[_0x68654a(0x415)][_0x68654a(0x8a0)] > 0x0); _0x23e731[_0x68654a(0x9ec)]((_0x2ebfd5, _0x1383df) => _0x1383df['lastTimestamp'] - _0x2ebfd5[_0x68654a(0x686)]); const _0xac06a4 = [], _0x4ce679 = {}; return _0x23e731['forEach']((_0x142c16, _0x48aa30) => { const _0x17dd03 = _0x68654a, _0x4679d8 = _0xb6f7d8(_0x142c16[_0x17dd03(0x842)], _0x142c16['history'], _0x2c9df4); if (_0x4679d8[_0x17dd03(0x8a0)] === 0x0) return; const _0x108334 = _0x48aa30 === 0x0 ? _0x17dd03(0x5fc) : '来源：'; _0xac06a4[_0x17dd03(0x24d)](_0x17dd03(0xa41) + _0x108334 + _0x208fa3(_0x142c16['chat']) + '\x0a' + _0x4679d8[_0x17dd03(0x359)]('\x0a')), _0x4ce679[_0x142c16[_0x17dd03(0x842)]['id']] = _0x4679d8[_0x17dd03(0x8a0)]; }), { 'omniText': _0xac06a4[_0x68654a(0x359)]('\x0a\x0a'), 'usedCounts': _0x4ce679 }; } else { const _0x13ccfe = _0x5305f2[_0x68654a(0x86d)] ?? _0x5305f2[_0x68654a(0x311)] ?? _0x5305f2[_0x68654a(0x4e3)] ?? _0x5305f2[_0x68654a(0x1d0)] ?? _0x5305f2[_0x68654a(0xaae)] ?? _0x5305f2[_0x68654a(0x7d7)]; if (!_0x13ccfe) continue; let _0x210771 = _0x375956[_0x68654a(0x8f6)](String(_0x13ccfe)) || _0xa0a0d4[_0x68654a(0x8f6)](_0x28c15b(_0x13ccfe)); if (!_0x210771) continue; const _0x3c3232 = (_0x5305f2[_0x68654a(0x304)] || _0x5305f2[_0x68654a(0x8c3)] || 'text')[_0x68654a(0xaab)](); if (_0x3c3232 === 'sticker') { if ('bAfyB' === 'bAfyB') { const _0x40223f = (_0x5305f2[_0x68654a(0x6b2)] ?? _0x5305f2[_0x68654a(0x69c)] ?? _0x5305f2[_0x68654a(0x7d2)] ?? _0x5305f2[_0x68654a(0x7a6)])?.['trim'](); if (_0x40223f && _0x237b9a[_0x68654a(0x9a4)](_0x40223f)) _0x68654a(0x615) !== _0x68654a(0xb6a) ? _0x3e0ed3['events'][_0x68654a(0x24d)]({ 'senderId': _0x210771['id'], 'kind': _0x68654a(0x6b2), 'sticker': _0x40223f }) : _0x3f24e4 += _0x68654a(0x584); else { const _0x48d0b0 = String(_0x5305f2[_0x68654a(0x329)] ?? _0x5305f2[_0x68654a(0x252)] ?? '')[_0x68654a(0x87b)]() || _0x68654a(0x785) + (_0x40223f || _0x68654a(0x2c5)) + ']'; if (_0x48d0b0) _0x3e0ed3[_0x68654a(0x9c5)][_0x68654a(0x24d)]({ 'senderId': _0x210771['id'], 'kind': _0x68654a(0x252), 'content': _0x48d0b0 }); } } else return _0x549bb9(_0x45fa7e)['then'](_0x3fbc1a => _0x3fbc1a['blob']()); } else { const _0x26a20e = String(_0x5305f2[_0x68654a(0x329)] ?? _0x5305f2[_0x68654a(0x252)] ?? _0x5305f2[_0x68654a(0xa53)] ?? '')[_0x68654a(0x87b)](); if (_0x26a20e) _0x3e0ed3[_0x68654a(0x9c5)][_0x68654a(0x24d)]({ 'senderId': _0x210771['id'], 'kind': _0x68654a(0x252), 'content': _0x26a20e }); } } } return _0x3e0ed3; } } async function _0x186fbb(_0x3a415b) { const _0x12454e = _0x5f58e0; if ('PFndQ' !== _0x12454e(0x966)) { if (!_0x3a415b || !Array[_0x12454e(0xb41)](_0x3a415b['events']) || _0x3a415b[_0x12454e(0x9c5)][_0x12454e(0x8a0)] === 0x0) return; const _0x1b833d = _0x379a1d => _0x379a1d + Math[_0x12454e(0xa29)](Math[_0x12454e(0x664)]() * 0x190); let _0x5d32fb = 0x1f4; for (const _0x5a9716 of _0x3a415b[_0x12454e(0x9c5)]) { await new Promise(_0x5ad1d1 => setTimeout(_0x5ad1d1, _0x1b833d(_0x5d32fb))), _0x5d32fb += 0x2bc; const _0x4e9dd3 = _0x1884b1[_0x12454e(0x589)]['at'](-0x1)?.[_0x12454e(0xa04)] ?? ![]; if (_0x5a9716['kind'] === 'sticker') { const _0x129300 = _0x356d37['find'](_0x317869 => _0x317869[_0x12454e(0x7d7)] === _0x5a9716[_0x12454e(0x6b2)]); if (_0x129300) { const _0x380e98 = { 'role': 'assistant', 'content': '[AI发送了表情：' + _0x129300[_0x12454e(0x7d7)] + ']', 'displayUrl': _0x129300[_0x12454e(0x51a)], 'senderId': _0x5a9716['senderId'], 'timestamp': Date[_0x12454e(0x965)](), 'isOffline': _0x4e9dd3 }; _0x1884b1[_0x12454e(0x589)]['push'](_0x380e98); } } else { if (_0x5a9716[_0x12454e(0x304)] === _0x12454e(0x35c) && _0x5a9716[_0x12454e(0x70f)] && _0x5a9716['artist']) { const { songName: _0xaef657, artist: _0x50205c } = _0x5a9716, _0x1127b1 = { 'role': 'assistant', 'type': 'music', 'content': _0x12454e(0x91c) + _0xaef657 + _0x12454e(0x4ec) + _0x50205c + ']', 'songName': _0xaef657, 'artist': _0x50205c, 'senderId': _0x5a9716[_0x12454e(0x86d)], 'timestamp': Date[_0x12454e(0x965)](), 'isOffline': _0x4e9dd3 }; try { const _0x2f1c36 = await _0x4ff13a(_0xaef657, _0x50205c); _0x1127b1[_0x12454e(0xb23)] = _0x2f1c36[_0x12454e(0x544)], _0x1127b1[_0x12454e(0xa36)] = _0x2f1c36[_0x12454e(0x51a)]; } catch (_0xf8f93) { console[_0x12454e(0x5f0)](_0x12454e(0x352) + _0xaef657 + _0x12454e(0x4ec) + _0x50205c + '):', _0xf8f93), _0x1127b1['coverUrl'] = null, _0x1127b1[_0x12454e(0xa36)] = null; } _0x1884b1[_0x12454e(0x589)][_0x12454e(0x24d)](_0x1127b1); } else { if (_0x5a9716[_0x12454e(0x304)] === _0x12454e(0x252)) { if (_0x12454e(0x726) !== _0x12454e(0x163)) { const _0x239287 = _0x1c3300(_0x5a9716[_0x12454e(0x329)])[_0x12454e(0x46a)](0x0, 0x3); for (let _0x18fa8b = 0x0; _0x18fa8b < _0x239287['length']; _0x18fa8b++) { if (_0x12454e(0x52c) !== 'zVNaF') { _0x3dd3c3(_0x12454e(0xae8)); return; } else { if (_0x18fa8b > 0x0) await new Promise(_0x57a215 => setTimeout(_0x57a215, _0x1b833d(0x190))); const _0x47a979 = { 'role': _0x12454e(0x37b), 'content': _0x239287[_0x18fa8b], 'senderId': _0x5a9716[_0x12454e(0x86d)], 'timestamp': Date[_0x12454e(0x965)](), 'isOffline': _0x4e9dd3 }; _0x1884b1['conversationHistory'][_0x12454e(0x24d)](_0x47a979); } } } else { const _0x580a22 = _0xe0b351[_0x12454e(0x940)][_0x12454e(0x6f9)](_0x449c7e => _0x449c7e['id'] === _0x514edf); if (!_0x580a22 || _0x580a22[_0x12454e(0x8c3)] !== _0x12454e(0x2b7)) return; _0x23cf42['getElementById'](_0x12454e(0x3d9))[_0x12454e(0x3cd)] = _0x580a22[_0x12454e(0x7d7)] || '', _0x5216db(_0x12454e(0x4a6)), _0x33f3d7[_0x12454e(0x653)](_0x12454e(0x4a6))[_0x12454e(0x3cd)] = _0x580a22[_0x12454e(0x70c)] || _0x112ef7['activeUserProfileId']; const _0x593e14 = _0x38eb61[_0x12454e(0x653)](_0x12454e(0x606)); _0x593e14[_0x12454e(0x9c2)] = '', _0xf457ea[_0x12454e(0x562)][_0x12454e(0xa30)](_0x1e06ab => { const _0xc3b400 = _0x12454e, _0x5dcf55 = _0x580a22[_0xc3b400(0x99b)]?.['includes'](_0x1e06ab['id']), _0x7d3723 = _0x30835b[_0xc3b400(0x2da)](_0xc3b400(0x24b)); _0x7d3723['innerHTML'] = _0xc3b400(0x7c4) + _0x1e06ab['id'] + '\x22\x20' + (_0x5dcf55 ? _0xc3b400(0x65f) : '') + '>\x20' + _0x1e06ab[_0xc3b400(0x7d7)], _0x593e14['appendChild'](_0x7d3723); }), _0x2d3cef(); const _0x399a71 = _0x2dd0b8[_0x12454e(0x653)]('group-avatar-preview'), _0x84c5cf = _0x42175e[_0x12454e(0x653)](_0x12454e(0x617)); _0x84c5cf[_0x12454e(0x313)]['backgroundImage'] = '', _0x3762a1('group_avatar_' + _0x5571a3)['then'](_0x24df07 => { const _0x520f76 = _0x12454e; _0x399a71[_0x520f76(0x74e)] = _0x24df07 ? _0x4083ca['createObjectURL'](_0x24df07) : _0x4f4b2c; }), _0x5f1c80('group_bg_' + _0x2c247d)[_0x12454e(0x8e7)](_0x14021b => { const _0x53921f = _0x12454e; if (_0x14021b) _0x84c5cf[_0x53921f(0x313)][_0x53921f(0x956)] = _0x53921f(0xa38) + _0x5ab37f['createObjectURL'](_0x14021b) + '\x27)'; }), _0x4e5374(_0x12454e(0x337), 'chat'); } } } } } _0x21733b(), _0x45c4f2(); } else return _0xaae20d['log'](_0x12454e(0x3b0)), ''; } async function _0x2e33dc(_0x3b6516, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0xd3b2f0 = _0x5f58e0; if (_0xd3b2f0(0x2a0) !== _0xd3b2f0(0x342)) { await new Promise(_0x55931c => setTimeout(_0x55931c, 0xa)); if (!_0x1884b1[_0xd3b2f0(0x2ec)][_0xd3b2f0(0x5e8)] || !_0x1884b1['apiSettings']['key'] || !_0x1884b1[_0xd3b2f0(0x2ec)]['model']) { if (_0xd3b2f0(0x803) === _0xd3b2f0(0x803)) return _0x5929aa(_0xd3b2f0(0x2f7)), ![]; else _0x13f3f3[_0xd3b2f0(0xb7b)][_0xd3b2f0(0x344)](_0xd3b2f0(0x322)), _0x1cad67(() => _0x26696c[_0xd3b2f0(0x313)]['display'] = _0xd3b2f0(0x643), 0x12c); } const _0x4b787f = _0x2bf707(); if (!_0x4b787f || !_0x3b6516) return ![]; const _0x19d7f9 = _0x4079e8(_0x4b787f['id']), _0x42bf1f = _0x1884b1[_0xd3b2f0(0x589)]['at'](-0x1)?.[_0xd3b2f0(0xaae)] === 'user'; if (!force && !_0x42bf1f) return ![]; const _0x5cc16e = _0x1884b1[_0xd3b2f0(0x589)]['at'](-0x1)?.[_0xd3b2f0(0xa04)] ?? ![]; if (delayMs) await new Promise(_0x44ebaa => setTimeout(_0x44ebaa, delayMs)); if (_0x5cc16e) document['getElementById']('galgame-text')[_0xd3b2f0(0x8f9)] = '（正在构思中...）'; else { if (_0xd3b2f0(0xa1e) === 'QAQVT') _0x5dead2(!![]); else { const _0x4b96c8 = _0x71e5d9(_0x587dbe[_0xd3b2f0(0x2e3)]())[_0xd3b2f0(0xa83)](0x2, '0'), _0xb1e3cb = _0x4bfc0c(_0x2be661['getMinutes']())['padStart'](0x2, '0'); _0x69ea3b[_0xd3b2f0(0x8f9)] = _0x4b96c8 + ':' + _0xb1e3cb; const _0x62a6e = _0x31ba23[_0xd3b2f0(0x978)]() + 0x1, _0x430a2f = _0x378bb7[_0xd3b2f0(0x8ff)](), _0x432928 = [_0xd3b2f0(0x85f), _0xd3b2f0(0x62f), '星期二', _0xd3b2f0(0x2f8), _0xd3b2f0(0x25f), '星期五', _0xd3b2f0(0x771)][_0x248faa['getDay']()]; _0x241769[_0xd3b2f0(0x8f9)] = _0x62a6e + '月' + _0x430a2f + '日\x20' + _0x432928; } } let _0x348e90 = ''; const _0x2a6324 = _0x2bf707(); if (_0x2a6324?.['activeListenSession']?.[_0xd3b2f0(0x50c)]) { const _0x4b02db = _0x2a6324['activeListenSession'], _0x8ed516 = await _0x44ee51(_0x4b02db[_0xd3b2f0(0x64b)]); if (_0x8ed516 && _0x8ed516[_0xd3b2f0(0x89a)]) { if (_0xd3b2f0(0x9fd) === _0xd3b2f0(0x9fd)) { const _0x1837da = _0x3882ac(_0x8ed516['lyrics']); if (_0x1837da[_0xd3b2f0(0x8a0)] > 0x0) { const _0x2914ae = _0x29f550[_0xd3b2f0(0x685)]; let _0xc9f27a = -0x1; for (let _0x296273 = 0x0; _0x296273 < _0x1837da['length']; _0x296273++) { if (_0x2914ae >= _0x1837da[_0x296273][_0xd3b2f0(0x71a)]) _0xc9f27a = _0x296273; else break; } const _0x3723b9 = _0x1837da[_0xd3b2f0(0x7d4)]((_0x4f2c08, _0x5815e3) => { const _0x366d22 = _0xd3b2f0; if (_0x366d22(0x5f1) === _0x366d22(0x448)) _0x47ad90[_0x366d22(0x313)][_0x366d22(0x272)] = 'none'; else { const _0x175aa4 = _0x5815e3 === _0xc9f27a ? _0x366d22(0xa72) : ''; return '' + _0x175aa4 + _0x4f2c08[_0x366d22(0x252)]; } })[_0xd3b2f0(0x359)]('\x0a'); _0x348e90 = (_0xd3b2f0(0x5a2) + _0x4b02db[_0xd3b2f0(0x6e9)] + _0xd3b2f0(0x3c5) + _0x4b02db[_0xd3b2f0(0x70f)] + _0xd3b2f0(0x383) + _0x3723b9 + _0xd3b2f0(0x54f))[_0xd3b2f0(0x87b)](); } } else { const _0x2b7e34 = (_0x3fdc3e - 0x5a) * _0x32c3e3['PI'] / 0xb4; return { 'x': _0x25c786 + _0x18815f * _0x270878[_0xd3b2f0(0x74c)](_0x2b7e34), 'y': _0x124330 + _0x1959fa * _0x3f0fb0['sin'](_0x2b7e34) }; } } } let _0x28887a = '', _0x210cc2 = ''; const _0x15585b = _0x1884b1[_0xd3b2f0(0x589)][_0xd3b2f0(0x8a0)]; if (_0x15585b > 0x1) { const _0x4a8887 = _0x1884b1[_0xd3b2f0(0x589)][_0x15585b - 0x2], _0x3cd98e = _0x1884b1[_0xd3b2f0(0x589)][_0x15585b - 0x1]; if (_0x4a8887[_0xd3b2f0(0xa04)] === ![] && _0x3cd98e[_0xd3b2f0(0xa04)] === !![]) _0x210cc2 = _0xd3b2f0(0x8d9) + _0x19d7f9[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0x249); else _0x4a8887[_0xd3b2f0(0xa04)] === !![] && _0x3cd98e['isOffline'] === ![] && (_0x210cc2 = _0xd3b2f0(0xa20) + _0x19d7f9[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0x67d)); } if (_0x5cc16e) { if (_0xd3b2f0(0x601) !== 'JtvzX') { const _0x37323c = _0xd3b2f0(0x7f4); _0x28887a = _0xd3b2f0(0x1b1) + _0x19d7f9[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0x4f3) + _0x37323c + _0xd3b2f0(0x9e0) + _0x3b6516[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0xb24) + _0x37323c + ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[' + _0x37323c + _0xd3b2f0(0x1b0); } else _0x348055('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a'); } else '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a'; const { omniText: _0x877a31 } = _0x1c528d(_0x3b6516['id'], _0x4b787f['id']), _0x5bcc1a = _0x1b0dfd(), _0x1b982c = _0x2c45f5(_0x3b6516['id']), _0x2d0e95 = _0x476781(_0x3b6516['id']), _0x587762 = await _0x5346cc(_0x3b6516['id']), _0x5a10a6 = typeof _0x225d80 === _0xd3b2f0(0x4b6) ? _0x225d80[_0xd3b2f0(0x95d)](_0xd3b2f0(0x837), _0x3b6516['name'])[_0xd3b2f0(0x95d)](_0xd3b2f0(0x714), _0x19d7f9['name'] || '用户') : '', _0x561501 = _0x356d37[_0xd3b2f0(0x7d4)](_0x5e41ea => _0x5e41ea[_0xd3b2f0(0x7d7)])[_0xd3b2f0(0x359)](',\x20'); let _0x1b4828 = ''; if (_0x3b6516[_0xd3b2f0(0x99b)] && _0x3b6516['linkedWorldBookIds']['length'] > 0x0) { const _0x616bb0 = _0x3b6516[_0xd3b2f0(0x99b)][_0xd3b2f0(0x7d4)](_0x5e4017 => _0x1884b1[_0xd3b2f0(0x562)][_0xd3b2f0(0x6f9)](_0x41d2d6 => _0x41d2d6['id'] === _0x5e4017))[_0xd3b2f0(0x776)](Boolean)['map'](_0x34dbf7 => _0xd3b2f0(0x15c) + _0x34dbf7['name'] + '\x0a' + _0x34dbf7[_0xd3b2f0(0x329)])['join'](''); if (_0x616bb0) _0x1b4828 = '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a' + _0x616bb0; } const _0x4b2efa = _0x19d7f9[_0xd3b2f0(0x370)] ? _0xd3b2f0(0x9cb) + _0x19d7f9['name'] + _0xd3b2f0(0x631) + _0x19d7f9[_0xd3b2f0(0x370)] : ''; let _0x44c9b0 = ''; const _0xa49b19 = new Date(), _0x9a1011 = _0x5018f9(_0x3b6516['id']); _0x44c9b0 = _0xd3b2f0(0xa97), _0x44c9b0 += _0xd3b2f0(0xa15) + _0xa49b19[_0xd3b2f0(0x40a)](_0xd3b2f0(0x567), { 'dateStyle': _0xd3b2f0(0xb4a), 'timeStyle': _0xd3b2f0(0xa5a) }) + '\x0a'; if (_0x9a1011) { const _0x590d8d = new Date(_0x9a1011[_0xd3b2f0(0x1af)]), _0x5358a1 = _0x68ddbc(_0x590d8d); _0x44c9b0 += _0xd3b2f0(0x7c9) + _0x5358a1 + '\x0a'; const _0x1eb087 = _0xa49b19[_0xd3b2f0(0x65b)](), _0xf67ce7 = _0x590d8d['toDateString'](), _0x194eda = new Date(); _0x194eda[_0xd3b2f0(0xad6)](_0xa49b19[_0xd3b2f0(0x8ff)]() - 0x1); const _0x439eff = _0x194eda[_0xd3b2f0(0x65b)](); if (_0x1eb087 === _0xf67ce7) { if (_0xd3b2f0(0x208) !== _0xd3b2f0(0xb69)) { const _0x9ac841 = (_0xa49b19 - _0x590d8d) / (0x3e8 * 0x3c); _0x9ac841 < 0x3c ? _0xd3b2f0(0x629) === _0xd3b2f0(0x629) ? _0x44c9b0 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : (_0x29f9e5['error'](_0xd3b2f0(0x4cb), _0x189bfe), _0x1724d9[_0xd3b2f0(0x673)](_0xd3b2f0(0x4c5))) : _0x44c9b0 += _0xd3b2f0(0x72c) + Math[_0xd3b2f0(0x725)](_0x9ac841 / 0x3c) + '小时前），可以简单问候一下对方现在的状态。\x0a'; } else _0x566f4a(_0x3270b8['id']); } else { if (_0x439eff === _0xf67ce7) { if (_0xd3b2f0(0x482) !== 'mLbmI') { _0x5a794b('音乐数据升级完成，迁移了\x20' + _0x3dcacf + _0xd3b2f0(0x26d)), _0x53103a(() => _0x2958ae[_0xd3b2f0(0x2a5)](), 0x5dc); return; } else _0x44c9b0 += _0xd3b2f0(0x297); } else { const _0x2ce69d = Math[_0xd3b2f0(0x725)]((_0xa49b19 - _0x590d8d) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x44c9b0 += _0xd3b2f0(0xb21) + _0x2ce69d + _0xd3b2f0(0x21c); } } } else _0x44c9b0 += _0xd3b2f0(0x91b); const _0x15a5e5 = ('\x0a' + _0x28887a + _0xd3b2f0(0x280) + _0x3b6516[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0x588) + _0x3b6516[_0xd3b2f0(0x7d7)] + ':\x22\x20或\x22[' + _0x3b6516[_0xd3b2f0(0x7d7)] + _0xd3b2f0(0x3c8) + _0x561501 + _0xd3b2f0(0x247) + _0x5a10a6 + '\x0a')['trim'](), _0x13a41a = [{ 'role': _0xd3b2f0(0xa40), 'content': _0x15a5e5 }], _0x6a3f47 = (_0xd3b2f0(0x809) + (_0x3b6516[_0xd3b2f0(0x370)] || _0xd3b2f0(0x55e)) + '\x0a' + _0x4b2efa + '\x20\x0a' + _0x877a31 + '\x0a' + _0x5bcc1a + '\x0a' + _0x1b982c + '\x0a' + _0x2d0e95 + _0xd3b2f0(0xb28) + _0x587762 + '\x20\x0a#\x20当前情景\x0a' + _0x348e90 + '\x0a' + _0x44c9b0 + '\x0a' + _0x1b4828 + '\x0a')['trim'](); _0x6a3f47[_0xd3b2f0(0xac6)](/#.*|\s/g, '') && (_0xd3b2f0(0x788) !== _0xd3b2f0(0x36c) ? (_0x13a41a[_0xd3b2f0(0x24d)]({ 'role': _0xd3b2f0(0x901), 'content': _0x6a3f47 }), _0x13a41a['push']({ 'role': _0xd3b2f0(0x37b), 'content': _0xd3b2f0(0x8e9) })) : _0x17d879('错误:\x20' + _0x5149cf[_0xd3b2f0(0xa53)])); const _0x335833 = _0x1884b1[_0xd3b2f0(0xa17)]?.[_0xd3b2f0(0x99e)] ?? 0x64, _0x182cc1 = _0x1884b1[_0xd3b2f0(0x589)][_0xd3b2f0(0x46a)](-_0x335833); for (const _0x1f6bee of _0x182cc1) { const _0x533132 = _0x1f6bee['role'] === 'ai' || _0x1f6bee[_0xd3b2f0(0xaae)] === _0xd3b2f0(0x37b) ? _0xd3b2f0(0x37b) : _0xd3b2f0(0x901); let _0xa1a257 = { 'role': _0x533132, 'content': _0x1f6bee[_0xd3b2f0(0x329)] }, _0x7f3a1b = !!_0x1f6bee[_0xd3b2f0(0x329)]; if (_0x1f6bee[_0xd3b2f0(0x6dd)] && _0x1f6bee[_0xd3b2f0(0x329)][_0xd3b2f0(0x1ac)]('表情')) { const _0x5f7301 = _0x1f6bee[_0xd3b2f0(0x329)][_0xd3b2f0(0x81f)](/：(.*?)]$/); _0xa1a257['content'] = _0xd3b2f0(0x785) + (_0x5f7301 ? _0x5f7301[0x1] : _0xd3b2f0(0x2c5)) + ']', _0x13a41a['push'](_0xa1a257); } else { if (_0xd3b2f0(0x712) === _0xd3b2f0(0x712)) { let _0x13dd76 = null; if (_0x1f6bee[_0xd3b2f0(0x3bf)]) _0x13dd76 = _0x1f6bee[_0xd3b2f0(0x3bf)]; else { if (_0x1f6bee[_0xd3b2f0(0xaa4)]) { if (_0xd3b2f0(0x66c) === _0xd3b2f0(0x66c)) try { const _0x53e4d9 = await _0x329660(_0x1f6bee[_0xd3b2f0(0xaa4)]); _0x53e4d9 && (_0x13dd76 = await _0x1f0891(_0x53e4d9)); } catch (_0xb8d6dc) { _0xd3b2f0(0x7ef) === _0xd3b2f0(0xb48) ? _0x16567b[_0xd3b2f0(0x313)]['backgroundImage'] = _0xd3b2f0(0xa38) + _0x287671 + '\x27)' : console[_0xd3b2f0(0x5f0)](_0xd3b2f0(0x2fc), _0xb8d6dc); } else { const _0x3c6b4a = _0x7f264a['parse'](_0x1e8f63), _0xdc5e86 = _0x3c6b4a[_0xd3b2f0(0x88c)] || 0x0; if (_0xdc5e86 < 0x1) { _0x4dbecc[_0xd3b2f0(0xace)](_0xd3b2f0(0x5f5)); const _0x42fc3d = { 'version': 0x1, 'characters': [], 'worldBooks': [], 'chats': [], 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'perChatContextLines': 0x64, 'widgetBgImage': null, 'forceWhiteClock': ![] }, 'activeChatId': null, 'friendCircles': [], 'activeFriendCircleId': null, 'diaries': [], 'userProfiles': [], 'activeUserProfileId': null, 'accountingData': [], 'accountingLedger': {}, 'calendarEvents': [] }; if (_0x666e07['isArray'](_0x3c6b4a[_0xd3b2f0(0x358)])) _0x42fc3d[_0xd3b2f0(0x358)] = _0x3c6b4a[_0xd3b2f0(0x358)]; if (_0xad227[_0xd3b2f0(0xb41)](_0x3c6b4a[_0xd3b2f0(0x562)])) _0x42fc3d['worldBooks'] = _0x3c6b4a[_0xd3b2f0(0x562)]; if (_0x4e1e69[_0xd3b2f0(0xb41)](_0x3c6b4a[_0xd3b2f0(0x940)])) _0x42fc3d[_0xd3b2f0(0x940)] = _0x3c6b4a[_0xd3b2f0(0x940)]; if (_0x3c6b4a[_0xd3b2f0(0x2ec)]) _0x42fc3d[_0xd3b2f0(0x2ec)] = _0x3c6b4a[_0xd3b2f0(0x2ec)]; if (_0x3c6b4a[_0xd3b2f0(0xa17)]) _0x42fc3d[_0xd3b2f0(0xa17)] = { ..._0x42fc3d['preferences'], ..._0x3c6b4a['preferences'] }; if (_0x3c6b4a[_0xd3b2f0(0x9a8)]) _0x42fc3d['activeChatId'] = _0x3c6b4a[_0xd3b2f0(0x9a8)]; if (_0x4f328f[_0xd3b2f0(0xb41)](_0x3c6b4a['diaries'])) _0x42fc3d['diaries'] = _0x3c6b4a[_0xd3b2f0(0x7f1)]; if (_0x746a47['isArray'](_0x3c6b4a[_0xd3b2f0(0xa26)])) _0x42fc3d[_0xd3b2f0(0xa26)] = _0x3c6b4a[_0xd3b2f0(0xa26)]; if (_0x3c6b4a[_0xd3b2f0(0x825)]) _0x42fc3d['activeFriendCircleId'] = _0x3c6b4a[_0xd3b2f0(0x825)]; if (_0x27524c[_0xd3b2f0(0xb41)](_0x3c6b4a[_0xd3b2f0(0x38c)])) _0x42fc3d[_0xd3b2f0(0x38c)] = _0x3c6b4a['userProfiles']; if (_0x3c6b4a[_0xd3b2f0(0x1d3)]) _0x42fc3d['activeUserProfileId'] = _0x3c6b4a['activeUserProfileId']; if (_0x16a557[_0xd3b2f0(0xb41)](_0x3c6b4a[_0xd3b2f0(0x447)])) _0x42fc3d[_0xd3b2f0(0x447)] = _0x3c6b4a[_0xd3b2f0(0x447)]; if (_0x3c6b4a[_0xd3b2f0(0x47a)]) _0x42fc3d['accountingLedger'] = _0x3c6b4a[_0xd3b2f0(0x47a)]; if (_0x221db7['isArray'](_0x3c6b4a[_0xd3b2f0(0xa9d)])) _0x42fc3d['calendarEvents'] = _0x3c6b4a[_0xd3b2f0(0xa9d)]; if (!_0x3c6b4a[_0xd3b2f0(0x38c)] && _0x3c6b4a[_0xd3b2f0(0x7c2)]) { const _0x1b8c57 = { 'id': _0xd3b2f0(0x9a2) + _0x51c6ac[_0xd3b2f0(0x965)](), 'name': _0x3c6b4a['userProfile'][_0xd3b2f0(0x7d7)] || '我', 'avatar': _0x3c6b4a[_0xd3b2f0(0x7c2)]['avatar'] || _0x452032, 'persona': _0x3c6b4a[_0xd3b2f0(0x7c2)][_0xd3b2f0(0x370)] || '' }; _0x42fc3d[_0xd3b2f0(0x38c)] = [_0x1b8c57], _0x42fc3d[_0xd3b2f0(0x1d3)] = _0x1b8c57['id']; } _0x142618[_0xd3b2f0(0x6c1)](_0x2dd7b0, _0x42fc3d), _0x4d8ac8(), _0x159732('检测到旧版数据，已自动为您完成升级！'); } else _0x1bc0d7[_0xd3b2f0(0x6c1)](_0x1e1270, _0x3c6b4a); } } } _0x13dd76 && ('akLAt' === _0xd3b2f0(0x45e) ? (_0x45cb57['error'](_0xd3b2f0(0xb6b), _0x8e94cd), _0x1b885f(_0xd3b2f0(0x93a) + _0x330d7a['message'])) : (_0xa1a257[_0xd3b2f0(0x3bf)] = _0x13dd76, _0x7f3a1b = !![])), _0x7f3a1b && _0x13a41a['push'](_0xa1a257); } else _0x20e9ca['activeChatId'] = _0x25629d['chats'][0x0]?.['id'] || null, _0x5cd7e3(_0x482481['activeChatId']); } } try { const _0x20135c = await _0x286894(_0x13a41a); if (!_0x20135c) return ![]; if (_0x5cc16e) { if (_0xd3b2f0(0x19e) !== _0xd3b2f0(0x19e)) _0x2be0[_0xd3b2f0(0x24d)]('[' + _0x7d5ff1 + _0xd3b2f0(0x759) + _0x575ae4(_0x20b2b3) + ']\x20' + _0x4ab850(_0x27c893[_0xd3b2f0(0x329)])[_0xd3b2f0(0x87b)]()); else try { if (_0xd3b2f0(0x37c) !== 'ftTDg') _0x4486a0['src'] = _0x4581e4[_0xd3b2f0(0x264)](_0x3fa7ec), _0x48627b[_0xd3b2f0(0x313)][_0xd3b2f0(0x272)] = _0xd3b2f0(0x8b0), _0x499329['style'][_0xd3b2f0(0x639)] = _0xd3b2f0(0x643), _0x1d537f[_0xd3b2f0(0x313)]['background'] = _0xd3b2f0(0x9e1); else { let _0x414194 = _0x20135c[_0xd3b2f0(0x87b)](); const _0x1c900e = _0x414194[_0xd3b2f0(0x81f)](/(\[[\s\S]*\])/); _0x1c900e && (_0x414194 = _0x1c900e[0x1]); const _0x3c9517 = JSON[_0xd3b2f0(0x440)](_0x414194); if (Array['isArray'](_0x3c9517)) { if (_0xd3b2f0(0x224) === 'EzTmF') _0x553b96(), _0x59d9c9(_0xd3b2f0(0x91e), _0xd3b2f0(0x6fe)); else { _0x1884b1[_0xd3b2f0(0x8ac)] = [..._0x3c9517], _0x1884b1['characterLastScripts'][_0x3b6516['id']] = [..._0x3c9517], _0x5c5d6d(); const _0x488e56 = _0x3c9517['map'](_0x42bbd5 => _0x42bbd5[_0xd3b2f0(0x1d0)] === _0xd3b2f0(0x700) ? _0x42bbd5[_0xd3b2f0(0x15b)] : _0x42bbd5[_0xd3b2f0(0x1d0)] + ':\x20' + _0x42bbd5['line'])['join']('\x0a\x0a'); _0x1884b1['conversationHistory']['push']({ 'role': _0xd3b2f0(0x37b), 'senderId': _0x3b6516['id'], 'timestamp': Date[_0xd3b2f0(0x965)](), 'isOffline': !![], 'content': _0x488e56 }); } } } } catch (_0x2f6ada) { console[_0xd3b2f0(0x5f0)]('解析AI剧本JSON失败:', _0x2f6ada, _0xd3b2f0(0x500), _0x20135c), _0x1884b1[_0xd3b2f0(0x589)][_0xd3b2f0(0x24d)]({ 'role': _0xd3b2f0(0x37b), 'senderId': _0x3b6516['id'], 'timestamp': Date[_0xd3b2f0(0x965)](), 'isOffline': !![], 'content': _0xd3b2f0(0x968) + _0x20135c + ']' }); } } else { const _0x3ff941 = _0x242ba7(_0x20135c), _0x369d73 = _0x3ff941[_0xd3b2f0(0x7d4)](_0x246367 => { const _0x301569 = _0xd3b2f0, _0x3d00ca = _0x246367['trim'](), _0x117ba6 = _0x3d00ca[_0x301569(0x81f)](/^\[sticker:(.*?)\]$/), _0x1774a8 = _0x3d00ca[_0x301569(0x81f)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x192f3e = _0x3d00ca[_0x301569(0x81f)](/^\[music:(.*?)\|(.*?)\]$/), _0x28593d = _0x3d00ca[_0x301569(0x81f)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x192f3e) { if (_0x301569(0x4b9) === _0x301569(0x4b9)) return { 'type': 'music', 'songName': _0x192f3e[0x1][_0x301569(0x87b)](), 'artist': _0x192f3e[0x2][_0x301569(0x87b)]() }; else { const _0x40a816 = _0x2089b8(); if (_0x40a816[_0x301569(0x8c3)] === 'group') { const _0x50208b = _0x50d948['characters'][_0x301569(0x6f9)](_0xe78b1a => _0x40a816['participantIds'][_0x301569(0x1ac)](_0xe78b1a['id']) && _0xe78b1a[_0x301569(0x7d7)] === _0x3228d8); if (_0x50208b) _0x5d78d5 = _0x50208b['id']; } } } else { if (_0x117ba6) return { 'type': _0x301569(0x6b2), 'name': _0x117ba6[0x1]['trim']() }; else { if (_0x28593d) return { 'type': _0x301569(0x747), 'eventType': _0x28593d[0x1][_0x301569(0x87b)](), 'eventDate': _0x28593d[0x2]['trim'](), 'eventContent': _0x28593d[0x3][_0x301569(0x87b)]() }; else { if (_0x1774a8) { const _0x1848ca = parseFloat(_0x1774a8[0x1]), _0x2edd79 = _0x1774a8[0x2][_0x301569(0x87b)](), _0x72bab2 = _0x4079e8(_0x1884b1['activeChatId']); let _0xb1e565 = null; if (_0x2edd79 === _0x72bab2[_0x301569(0x7d7)]) _0xb1e565 = _0x72bab2['id']; else { const _0x539597 = _0x2bf707(); if (_0x539597[_0x301569(0x8c3)] === _0x301569(0x2b7)) { const _0x3392a8 = _0x1884b1[_0x301569(0x358)][_0x301569(0x6f9)](_0x11955b => _0x539597[_0x301569(0x3d5)][_0x301569(0x1ac)](_0x11955b['id']) && _0x11955b['name'] === _0x2edd79); if (_0x3392a8) _0xb1e565 = _0x3392a8['id']; } } if (_0xb1e565) return { 'type': _0x301569(0x7b8), 'amount': _0x1848ca, 'recipientId': _0xb1e565, 'senderId': _0x3b6516['id'] }; else return { 'type': _0x301569(0x252), 'content': _0x301569(0x96b) + _0x2edd79 + _0x301569(0x908) }; } else { if (_0x3d00ca) { if ('FCQjR' !== _0x301569(0x8e2)) return { 'type': _0x301569(0x252), 'content': _0x3d00ca }; else _0x2e34da = _0x4e4d81(_0x4dd470); } } } } } return null; })[_0xd3b2f0(0x776)](Boolean), _0x472023 = async _0x282701 => { const _0x5095fc = _0xd3b2f0, _0x287cc8 = { 'role': _0x5095fc(0x37b), 'senderId': _0x3b6516['id'], 'timestamp': Date[_0x5095fc(0x965)](), 'isOffline': _0x5cc16e }; if (_0x282701['type'] === _0x5095fc(0x35c)) { const { songName: _0x533bc4, artist: _0x57e972 } = _0x282701; _0x287cc8[_0x5095fc(0x8c3)] = 'music', _0x287cc8[_0x5095fc(0x329)] = _0x5095fc(0x91c) + _0x533bc4 + _0x5095fc(0x4ec) + _0x57e972 + ']'; try { const _0x1fd01a = await _0x4ff13a(_0x533bc4, _0x57e972); let _0x2887a8 = null; if (_0x1fd01a[_0x5095fc(0x544)]) { const _0x48a503 = await _0x3d106b(_0x1fd01a[_0x5095fc(0x544)]); _0x2887a8 = _0x5095fc(0x94d) + Date[_0x5095fc(0x965)]() + '_' + Math[_0x5095fc(0x664)](), await _0x100c88(_0x2887a8, _0x48a503); } Object[_0x5095fc(0x6c1)](_0x287cc8, { 'songName': _0x533bc4, 'artist': _0x57e972, 'coverId': _0x2887a8, 'playableUrl': _0x1fd01a[_0x5095fc(0x51a)] }); } catch (_0x1267d8) { Object['assign'](_0x287cc8, { 'songName': _0x533bc4, 'artist': _0x57e972, 'coverId': null, 'playableUrl': null }); } } else { if (_0x282701[_0x5095fc(0x8c3)] === _0x5095fc(0x6b2)) { if ('KXfsi' === 'KXfsi') { const _0x245f9b = _0x356d37['find'](_0x12bdf9 => _0x12bdf9['name'] === _0x282701[_0x5095fc(0x7d7)]); if (_0x245f9b) Object['assign'](_0x287cc8, { 'content': _0x5095fc(0x18a) + _0x245f9b['name'] + ']', 'displayUrl': _0x245f9b[_0x5095fc(0x51a)] }); else _0x287cc8['content'] = _0x5095fc(0x785) + _0x282701[_0x5095fc(0x7d7)] + ']'; } else { const _0x2cfcc0 = { 'id': _0x11f66e['id'], 'url': _0x51c7b3[_0x5095fc(0xa36)] }; _0x3fa656(this, _0x2cfcc0); } } else { if (_0x282701[_0x5095fc(0x8c3)] === _0x5095fc(0x7b8)) { const _0x494307 = _0x282701['recipientId'] === _0x4079e8(_0x1884b1[_0x5095fc(0x9a8)])['id'] ? _0x4079e8(_0x1884b1[_0x5095fc(0x9a8)]) : _0x21051e(_0x282701['recipientId']); Object[_0x5095fc(0x6c1)](_0x287cc8, { 'type': 'transfer', 'amount': _0x282701[_0x5095fc(0x8d0)], 'recipientId': _0x282701[_0x5095fc(0x9c7)], 'content': _0x5095fc(0x998) + (_0x494307?.[_0x5095fc(0x7d7)] || '未知') + _0x5095fc(0x977) + _0x282701[_0x5095fc(0x8d0)] + ']' }); } else { if (_0x282701[_0x5095fc(0x8c3)] === _0x5095fc(0x747)) { if (_0x5095fc(0x66d) !== _0x5095fc(0x603)) { const _0x40ac92 = _0x4079e8(_0x4b787f['id']); if (!_0x40ac92 || !_0x40ac92['id']) return console[_0x5095fc(0x5f0)](_0x5095fc(0x194)), null; _0x1884b1[_0x5095fc(0xa9d)][_0x5095fc(0x24d)]({ 'id': 'event_ai_' + Date[_0x5095fc(0x965)](), 'date': _0x282701[_0x5095fc(0x3b4)], 'type': _0x282701['eventType'], 'content': _0x282701['eventContent'], 'userId': _0x40ac92['id'], 'createdBy': 'ai' }), _0x480928(), _0x20e8d7(), _0x2f2ff7(); const _0x13a40a = _0x21051e(_0x3b6516['id']); _0x13a40a && _0x282701['eventType'] === _0x5095fc(0x687) && _0x5929aa(_0x5095fc(0x3f1) + _0x13a40a['name'] + _0x5095fc(0xa0b) + _0x282701[_0x5095fc(0x51f)]); return { 'role': _0x5095fc(0x37b), 'senderId': _0x3b6516['id'], 'timestamp': Date[_0x5095fc(0x965)](), 'isOffline': _0x5cc16e, 'content': null }; return { 'role': 'assistant', 'senderId': _0x3b6516['id'], 'timestamp': Date[_0x5095fc(0x965)](), 'isOffline': _0x5cc16e, 'content': null }; } else _0x4af3a9++; } else { if ('hAElt' === _0x5095fc(0x5fe)) _0x4fd547 = _0x35355a[_0x5095fc(0x2da)](_0x5095fc(0x1f9)), _0x3b239b['id'] = _0x5095fc(0x6eb), _0x2d62da[_0x5095fc(0x168)](_0x341f19); else { const _0x5f574e = _0x38095f(_0x282701[_0x5095fc(0x329)]); Object['assign'](_0x287cc8, { 'content': _0x5f574e[_0x5095fc(0x329)], 'quotedMessage': _0x5f574e[_0x5095fc(0x748)] }); } } } } } return _0x287cc8; }, _0x19dbd9 = await Promise[_0xd3b2f0(0x98d)](_0x369d73[_0xd3b2f0(0x7d4)](_0x472023)); for (const _0x451e1a of _0x19dbd9) { (_0x451e1a[_0xd3b2f0(0x329)] || _0x451e1a['displayUrl'] || _0x451e1a[_0xd3b2f0(0x8c3)] === 'music') && (_0xd3b2f0(0xb14) === _0xd3b2f0(0x833) ? _0x28e54(_0xd02927[_0xd3b2f0(0x5f2)], _0xff0bc0['emotion']) : (await new Promise(_0x464188 => setTimeout(_0x464188, 0x12c + Math[_0xd3b2f0(0x664)]() * 0x190)), _0x1884b1[_0xd3b2f0(0x589)][_0xd3b2f0(0x24d)](_0x451e1a), _0x45c4f2())); } } return _0x21733b(), _0x45c4f2(), !![]; } catch (_0x136c41) { if (_0x136c41[_0xd3b2f0(0x7d7)] !== _0xd3b2f0(0xa3e)) { console[_0xd3b2f0(0x5f0)]('生成失败:\x20', _0x136c41); const _0x100316 = { 'role': _0xd3b2f0(0x37b), 'content': _0xd3b2f0(0x6d1) + _0x136c41[_0xd3b2f0(0xa53)], 'senderId': _0x3b6516['id'], 'isOffline': _0x5cc16e }; _0x1884b1[_0xd3b2f0(0x589)][_0xd3b2f0(0x24d)](_0x100316), _0x45c4f2(); } return ![]; } finally { _0x5dead2(![]); } } else _0x30b5e4[_0xd3b2f0(0xa54)] && _0x1d1aec[_0xd3b2f0(0xacc)] && (_0x3050c5['log']('用户操作中断了\x20AI\x20响应。'), _0x4ebea4['currentAbortController']['abort'](_0xd3b2f0(0xb74)), _0x4174a0[_0xd3b2f0(0xacc)] = null), _0x3edcea[_0xd3b2f0(0xa54)] = ![], _0x4da047(![]); } async function _0x403bba() { const _0x4ba53a = _0x5f58e0, _0x56f56b = _0x2bf707(); if (!_0x56f56b || _0x56f56b['type'] !== _0x4ba53a(0xaa7)) { if (_0x4ba53a(0x1c7) !== 'TSUtj') _0x37c75a(_0x3820c6), _0x2b4650(); else { _0x5929aa(_0x4ba53a(0x380)); return; } } if (_0x1884b1[_0x4ba53a(0xa54)]) { _0x5929aa('我正在说话呢，别打岔！'); return; } const _0x20642b = await _0x9e00ac('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x20642b) return; _0x1d9e54(!![], '正在翻阅全部历史记录...'), _0x3cfe08[_0x4ba53a(0x3cd)] = '', _0x594899[_0x4ba53a(0xb7b)][_0x4ba53a(0x428)]('show'), _0x1884b1['isGenerating'] = !![]; try { const _0x4f505e = _0x21051e(_0x56f56b[_0x4ba53a(0x3d5)][0x0]), _0x426ae1 = _0x4079e8(_0x56f56b['id']), _0x599c71 = _0x468c29(_0x56f56b['id']); if (_0x599c71[_0x4ba53a(0x8a0)] === 0x0) { _0x3cfe08[_0x4ba53a(0x3cd)] = _0x4ba53a(0x66a); return; } const _0x2abf89 = _0x599c71[_0x4ba53a(0x7d4)](_0x49f8c7 => { const _0x57453b = _0x4ba53a; if (_0x57453b(0x865) === _0x57453b(0x6a5)) _0x16d5de['insertBefore'](_0x489771, _0x5a4434['firstChild']); else { const _0x416c9e = new Date(_0x49f8c7[_0x57453b(0x1af)]), _0x48a384 = _0x416c9e[_0x57453b(0x374)]() + '-' + String(_0x416c9e[_0x57453b(0x978)]() + 0x1)[_0x57453b(0xa83)](0x2, '0') + '-' + String(_0x416c9e['getDate']())[_0x57453b(0xa83)](0x2, '0'), _0x54e3b4 = String(_0x416c9e[_0x57453b(0x2e3)]())[_0x57453b(0xa83)](0x2, '0') + ':' + String(_0x416c9e[_0x57453b(0x697)]())[_0x57453b(0xa83)](0x2, '0'); let _0x2a32b6 = '未知'; _0x49f8c7['role'] === _0x57453b(0x901) ? _0x2a32b6 = _0x426ae1[_0x57453b(0x7d7)] : _0x2a32b6 = _0x4f505e[_0x57453b(0x7d7)]; let _0x3fa0a3 = _0x49f8c7['content']; if (_0x49f8c7[_0x57453b(0x6dd)]) _0x3fa0a3 = '[发送了表情]'; if (_0x49f8c7[_0x57453b(0xaa4)]) _0x3fa0a3 = _0x57453b(0x614); return '[' + _0x48a384 + '\x20' + _0x54e3b4 + _0x57453b(0x759) + _0x2a32b6 + _0x57453b(0x1c1) + _0x3fa0a3; } })[_0x4ba53a(0x359)]('\x0a'), _0x1d0e89 = _0x123ad0[_0x4ba53a(0xac6)](/{charName}/g, _0x4f505e[_0x4ba53a(0x7d7)])[_0x4ba53a(0xac6)](/{userName}/g, _0x426ae1[_0x4ba53a(0x7d7)]), _0x242bb7 = [{ 'role': 'system', 'content': _0x1d0e89 }, { 'role': _0x4ba53a(0x901), 'content': _0x2abf89 }], _0x24a52f = await _0x286894(_0x242bb7); _0x3cfe08['value'] = _0x24a52f || _0x4ba53a(0xaef), _0x3cfe08['scrollTop'] = 0x0; } catch (_0x2cf0d2) { _0x4ba53a(0x7bc) !== _0x4ba53a(0x7bc) ? _0x228834['style']['padding'] = '0' : (console['error'](_0x4ba53a(0x287), _0x2cf0d2), _0x3cfe08['value'] = '#\x20发生错误：\x0a' + _0x2cf0d2[_0x4ba53a(0xa53)]); } finally { _0x1d9e54(![]), _0x1884b1[_0x4ba53a(0xa54)] = ![]; } } async function _0x180c61() { const _0x1db50c = _0x5f58e0; console[_0x1db50c(0xace)]('---\x20开始AI回复流程\x20---'); if (!_0x1884b1[_0x1db50c(0x2ec)][_0x1db50c(0x5e8)] || !_0x1884b1['apiSettings'][_0x1db50c(0x8c2)] || !_0x1884b1['apiSettings']['model']) { _0x5929aa('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } const _0x244441 = _0x1884b1[_0x1db50c(0x589)]['at'](-0x1)?.['role'] === _0x1db50c(0x901); if (!_0x244441 || _0x1884b1[_0x1db50c(0xa54)]) return; const _0x2a53a7 = _0x2bf707(); if (!_0x2a53a7) return; _0x1884b1[_0x1db50c(0xa54)] = !![], _0x5dead2(!![]); try { if (_0x1db50c(0x197) !== _0x1db50c(0x197)) _0x1de1cd[_0x1db50c(0x313)][_0x1db50c(0x956)] = '', _0xa238d1[_0x1db50c(0x313)][_0x1db50c(0x2b2)] = '', _0x3ea3af['querySelectorAll'](_0x1db50c(0x184))[_0x1db50c(0xa30)](_0x403476 => { const _0x1c3c9f = _0x1db50c; _0x403476[_0x1c3c9f(0x313)]['textShadow'] = ''; }); else { if (_0x2a53a7[_0x1db50c(0x8c3)] === _0x1db50c(0xaa7)) { const _0x1edfea = _0x21051e(_0x2a53a7[_0x1db50c(0x3d5)][0x0]); console[_0x1db50c(0xace)](_0x1db50c(0x8e6)); if (_0x1edfea) await _0x2e33dc(_0x1edfea, { 'force': !![] }); } else { if (_0x1db50c(0x5e4) !== _0x1db50c(0x778)) { const _0x5eb84e = await _0x10fd05(); if (_0x5eb84e && _0x5eb84e['events']?.[_0x1db50c(0x8a0)]) await _0x186fbb(_0x5eb84e); else { if (_0x1db50c(0x8b4) === _0x1db50c(0x8b4)) { console[_0x1db50c(0x16a)](_0x1db50c(0x51b)); const _0xe72232 = _0x2a53a7[_0x1db50c(0x3d5)][_0x1db50c(0x7d4)](_0x21051e)['filter'](Boolean); if (!_0xe72232['length']) return; let _0x134240 = 0x0; for (const _0x5277c5 of _0xe72232) { if (_0x1db50c(0x243) === 'cyvTh') _0x2e33dc(_0x5277c5, { 'force': !![], 'delayMs': _0x134240 }), _0x134240 += 0x1f4; else { _0x3420d8(_0x1db50c(0x18e)); return; } } } else _0x411691[_0x1db50c(0x5f0)](_0x1db50c(0x25b), _0x23461a), _0x398486 && (_0x4b6003[_0x1db50c(0x313)][_0x1db50c(0x956)] = ''); } } else _0x1c37d5(_0x1db50c(0x8bf)); } } } catch (_0x1187e5) { _0x1187e5['name'] !== _0x1db50c(0xa3e) && (console[_0x1db50c(0x5f0)](_0x1db50c(0x7cc), _0x1187e5), _0x1582f0({ 'role': 'assistant', 'content': _0x1db50c(0x6d1) + _0x1187e5[_0x1db50c(0xa53)] }, _0x1884b1[_0x1db50c(0x589)][_0x1db50c(0x8a0)] - 0x1)); } finally { _0x1884b1['isGenerating'] = ![], _0x5dead2(![]); } } function _0x2ea776(_0x29ae86, _0x2be9b7) { const _0x1c07cd = _0x5f58e0; if (_0x1c07cd(0xb51) !== _0x1c07cd(0x9d4)) { const _0x43e369 = _0x2be9b7[_0x1c07cd(0xaab)](), _0x589d40 = _0x29ae86[_0x1c07cd(0xaab)](); if (_0x43e369['startsWith']('claude')) return _0x1c07cd(0x931); if (_0x589d40[_0x1c07cd(0x1ac)]('anthropic.com')) return 'anthropic'; if (_0x589d40['includes'](_0x1c07cd(0x47b))) return _0x1c07cd(0x9d0); if (_0x43e369[_0x1c07cd(0x6c0)]('gemini')) return 'gemini'; return 'openai'; } else _0x2621fb = _0x55e4a8[_0x1c07cd(0x7d7)] || '我', _0x313f40 = _0x1c07cd(0x30c); } async function _0x286894(_0x11ed7f, _0x192156 = {}) { const _0x435457 = _0x5f58e0; _0x1884b1['currentAbortController'] && (_0x435457(0x372) !== _0x435457(0x372) ? (_0x371529[_0x435457(0x589)][_0xb4746f][_0x435457(0x4db)] = !![], _0x18c61c()) : _0x1884b1[_0x435457(0xacc)][_0x435457(0x857)]('New\x20request\x20started')); _0x1884b1[_0x435457(0xacc)] = new AbortController(); const _0x2b309d = _0x1884b1[_0x435457(0xacc)][_0x435457(0x5a3)], { endpoint: _0x1169c3, key: _0x3f5afe, model: _0x311b6e } = _0x1884b1[_0x435457(0x2ec)], _0x578904 = !!_0x192156[_0x435457(0x87e)], _0x2872a2 = _0x2ea776(_0x1169c3, _0x311b6e); console[_0x435457(0xace)](_0x435457(0x166) + _0x2872a2); let _0x47856a = ''; try { if (_0x435457(0x986) === _0x435457(0x27a)) { const _0x45b375 = _0x5c85ea['getElementById'](_0x435457(0x160)); if (!_0x45b375) return; const _0x26f65 = _0x4ea69b(), _0x218d26 = _0x3a655f[_0x435457(0xa9d)][_0x435457(0x776)](_0x58ff7d => _0x58ff7d[_0x435457(0x1f5)] === _0x26f65 && _0x58ff7d[_0x435457(0x8c3)] === _0x435457(0xa2c)); _0x45b375[_0x435457(0x9c2)] = '', _0x218d26[_0x435457(0x8a0)] > 0x0 ? _0x218d26[_0x435457(0xa30)](_0x2117eb => { const _0x559f2c = _0x435457, _0x4ec170 = _0x38941b['createElement'](_0x559f2c(0x1f9)); _0x4ec170[_0x559f2c(0x84e)] = _0x559f2c(0x8f4), _0x4ec170['textContent'] = _0x2117eb[_0x559f2c(0x329)], _0x45b375[_0x559f2c(0x168)](_0x4ec170); }) : _0x45b375['innerHTML'] = _0x435457(0x564); } else { switch (_0x2872a2) { case _0x435457(0x931): { if ('HqyTp' === 'HqyTp') { const _0x4f15ec = _0x154dae(_0x3f5afe), _0x5bc9de = _0x11ed7f['find'](_0x4df713 => _0x4df713[_0x435457(0xaae)] === _0x435457(0xa40))?.[_0x435457(0x329)] || '', _0x518f73 = _0x11ed7f[_0x435457(0x776)](_0x101efd => _0x101efd[_0x435457(0xaae)] !== _0x435457(0xa40)), _0x3bad5e = { 'model': _0x311b6e, 'system': _0x5bc9de, 'messages': _0x518f73[_0x435457(0x7d4)](_0xbead14 => ({ 'role': _0xbead14[_0x435457(0xaae)], 'content': [{ 'type': 'text', 'text': _0xbead14[_0x435457(0x329)] }] })), 'max_tokens': 0x1000 }, _0x5ac905 = await fetch(_0x1169c3, { 'method': _0x435457(0x6e8), 'headers': { 'Content-Type': 'application/json', 'x-api-key': _0x4f15ec, 'anthropic-version': '2023-06-01' }, 'body': JSON[_0x435457(0x98f)](_0x3bad5e), 'signal': _0x2b309d }); if (!_0x5ac905['ok']) { const _0x50736b = await _0x5ac905['json']()[_0x435457(0x32a)](() => ({})); throw new Error(_0x435457(0x2e8) + _0x5ac905['status'] + _0x435457(0x4ec) + (_0x50736b['error']?.[_0x435457(0xa53)] || _0x5ac905[_0x435457(0x9d9)])); } const _0x503fc2 = await _0x5ac905[_0x435457(0x87e)](); _0x47856a = _0x503fc2[_0x435457(0x329)]?.[0x0]?.[_0x435457(0x252)] || ''; break; } else _0x49d783[_0x435457(0x313)][_0x435457(0x272)] = _0x435457(0x643), _0x300461[_0x435457(0x313)]['border'] = _0x435457(0x26b), _0x5a7149[_0x435457(0x313)][_0x435457(0x1fa)] = _0x435457(0x459); } case _0x435457(0x9d0): { const _0xe871e1 = _0x154dae(_0x3f5afe), _0x2b5cf6 = _0x1169c3[_0x435457(0x1ac)](_0x435457(0x1f2)), _0x1366f7 = _0x5a452a => { const _0x38e5db = _0x435457; if ('fNANG' !== _0x38e5db(0x4f9)) { const _0x8b6f10 = []; if (_0x5a452a['content']) _0x8b6f10[_0x38e5db(0x24d)]({ 'text': _0x5a452a['content'] }); if (_0x5a452a[_0x38e5db(0x3bf)]) { if (_0x38e5db(0x93b) === _0x38e5db(0x93b)) { const _0x150a60 = _0x5a452a[_0x38e5db(0x3bf)]['split'](',')[0x1], _0x3d7906 = _0x5a452a[_0x38e5db(0x3bf)][_0x38e5db(0x650)](_0x5a452a[_0x38e5db(0x3bf)][_0x38e5db(0x9db)](':') + 0x1, _0x5a452a['image'][_0x38e5db(0x9db)](';')) || _0x38e5db(0x932); _0x8b6f10[_0x38e5db(0x24d)]({ 'inline_data': { 'mime_type': _0x3d7906, 'data': _0x150a60 } }); } else _0x3fdb7a = _0xdec82a['at'](-0x1); } return _0x8b6f10; } else _0x599ba1(![]); }, _0x5a1904 = _0x11ed7f[_0x435457(0x7d4)](_0x14c00b => ({ 'role': _0x14c00b['role'] === _0x435457(0x37b) ? 'model' : _0x14c00b[_0x435457(0xaae)] === 'system' ? _0x435457(0x901) : _0x14c00b[_0x435457(0xaae)], 'parts': _0x1366f7(_0x14c00b) }))['filter'](_0x5cb305 => _0x5cb305[_0x435457(0x8eb)][_0x435457(0x8a0)] > 0x0), _0x26870c = { 'contents': _0x5a1904 }; _0x578904 && _0x2b5cf6 && (_0x26870c[_0x435457(0xaa5)] = { 'response_mime_type': _0x435457(0x6a0) }); const _0x1b1643 = _0x1169c3 + _0x435457(0x90a) + _0x311b6e + _0x435457(0x62e) + _0xe871e1 + '&alt=sse', _0xb50511 = await fetch(_0x1b1643, { 'method': _0x435457(0x6e8), 'headers': { 'Content-Type': _0x435457(0x6a0) }, 'body': JSON[_0x435457(0x98f)](_0x26870c), 'signal': _0x2b309d }); if (!_0xb50511['ok']) throw new Error(_0x435457(0x21a) + _0xb50511[_0x435457(0x4da)]); const _0x49737d = _0xb50511[_0x435457(0xafb)][_0x435457(0xaf5)](), _0x4e68c7 = new TextDecoder(); let _0x4478c2 = ''; while (!![]) { if ('EnNLc' === _0x435457(0x7ff)) { if (_0x2b309d[_0x435457(0x41a)]) { if (_0x435457(0x7a3) !== _0x435457(0xaa2)) { console[_0x435457(0xace)](_0x435457(0x549)), _0x49737d[_0x435457(0x845)](); break; } else _0x46cc84(), _0x2d3a5e('worldBook', _0x435457(0x6fe)); } const { done: _0x51bd8e, value: _0x21693c } = await _0x49737d[_0x435457(0x5c4)](); if (_0x51bd8e) break; const _0x4d3167 = _0x4e68c7['decode'](_0x21693c, { 'stream': !![] }), _0x291189 = _0x4d3167[_0x435457(0x334)]('\x0a')[_0x435457(0x776)](_0x592639 => _0x592639[_0x435457(0x87b)]()[_0x435457(0x6c0)]('data:')); for (const _0x4987f8 of _0x291189) { const _0x4d77c2 = _0x4987f8['replace'](_0x435457(0x1ad), ''); if (_0x4d77c2 === _0x435457(0x361)) break; try { _0x4478c2 += JSON[_0x435457(0x440)](_0x4d77c2)[_0x435457(0x592)][0x0][_0x435457(0x329)][_0x435457(0x8eb)][0x0][_0x435457(0x252)]; } catch { } } } else _0x1d06a2 = _0x41987a[_0x435457(0x38c)][0x0]; } _0x47856a = _0x4478c2; break; } case 'openai': default: { const _0x4f1afc = _0x154dae(_0x3f5afe), _0x2971b5 = _0x1169c3['replace'](/\/+$/, '') + _0x435457(0x4ab), _0x2bf191 = _0x11ed7f[_0x435457(0x7d4)](_0x213ed1 => { const _0x56be98 = _0x435457; if (_0x56be98(0xb1d) === _0x56be98(0xa14)) _0x309672(_0x56be98(0x6d1) + _0x22bd31[_0x56be98(0xa53)]); else { if (_0x213ed1['role'] === _0x56be98(0x901) && _0x213ed1['image']) return { 'role': _0x56be98(0x901), 'content': [{ 'type': _0x56be98(0x252), 'text': _0x213ed1[_0x56be98(0x329)] || '\x20' }, { 'type': _0x56be98(0xa47), 'image_url': { 'url': _0x213ed1[_0x56be98(0x3bf)], 'detail': _0x56be98(0x914) } }] }; return { 'role': _0x213ed1['role'], 'content': _0x213ed1[_0x56be98(0x329)] }; } })[_0x435457(0x776)](_0x309967 => _0x309967[_0x435457(0x329)]), _0x4b7611 = { 'model': _0x311b6e, 'messages': _0x2bf191, 'max_tokens': 0x1000, ..._0x578904 ? { 'response_format': { 'type': 'json_object' } } : {} }, _0x10966b = await fetch(_0x2971b5, { 'method': _0x435457(0x6e8), 'headers': { 'Content-Type': 'application/json', 'Authorization': _0x435457(0x89e) + _0x4f1afc }, 'body': JSON['stringify'](_0x4b7611), 'signal': _0x2b309d }); if (!_0x10966b['ok']) { if (_0x435457(0x895) !== _0x435457(0xac2)) { const _0x43fc81 = await _0x10966b[_0x435457(0x87e)]()[_0x435457(0x32a)](() => ({})); throw new Error(_0x435457(0x71c) + _0x10966b[_0x435457(0x4da)] + _0x435457(0x4ec) + (_0x43fc81[_0x435457(0x5f0)]?.[_0x435457(0xa53)] || _0x10966b[_0x435457(0x9d9)])); } else _0x535a58 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“' + _0x5c0bf7[_0x435457(0x7d7)] + _0x435457(0x249); } const _0x326731 = await _0x10966b[_0x435457(0x87e)](); _0x47856a = _0x326731[_0x435457(0x710)]?.[0x0]?.['message']?.['content'] || ''; break; } }return _0x47856a; } } catch (_0x2b5e7d) { if (_0x2b5e7d[_0x435457(0x7d7)] === _0x435457(0xa3e)) return console[_0x435457(0xace)](_0x435457(0x3b0)), ''; throw _0x2b5e7d; } finally { if (_0x435457(0xb50) === 'YCqdv') { _0xf1a39('你还没保存这个角色呢，导什么导？'); return; } else _0x1884b1[_0x435457(0xacc)] && _0x1884b1[_0x435457(0xacc)][_0x435457(0x5a3)] === _0x2b309d && (_0x1884b1[_0x435457(0xacc)] = null); } } async function _0x2a6e16() { const _0x50d2e8 = _0x5f58e0, _0x24601c = _0x28fb8b['characterEdit'][_0x50d2e8(0xb7b)][_0x50d2e8(0x974)]('active'), _0x5d98fc = _0x24601c ? _0xbc58d3['value'] : null; let _0x154e6b = null, _0x12132a = ''; if (_0x24601c && _0x5d98fc) { _0x154e6b = _0x1884b1[_0x50d2e8(0x940)][_0x50d2e8(0x6f9)](_0x4afa60 => _0x4afa60[_0x50d2e8(0x8c3)] === _0x50d2e8(0xaa7) && _0x4afa60[_0x50d2e8(0x3d5)][_0x50d2e8(0x1ac)](_0x5d98fc)); const _0x5a85a7 = _0x21051e(_0x5d98fc); _0x12132a = _0x5a85a7 ? _0x5a85a7[_0x50d2e8(0x7d7)] : _0x50d2e8(0x796); } else { if (_0x1884b1[_0x50d2e8(0x9a8)]) { _0x154e6b = _0x2bf707(); const _0x1a3df8 = document[_0x50d2e8(0x653)](_0x50d2e8(0x608))[_0x50d2e8(0x8f9)]; _0x12132a = _0x1a3df8 || _0x50d2e8(0x335); } } if (!_0x154e6b) { _0x5929aa('找不到要清空的聊天记录。'); return; } const _0x4763f7 = await _0x9e00ac('确定要清空\x22' + _0x12132a + _0x50d2e8(0x866)); if (!_0x4763f7) return; if (_0x154e6b['id'] === _0x1884b1[_0x50d2e8(0x9a8)]) { if (_0x50d2e8(0x349) !== _0x50d2e8(0xa1a)) _0x5bcec0(), _0x1884b1[_0x50d2e8(0x589)] = [], _0x59f07e(); else return new _0x200aa6(_0x519f4d => { const _0x2d3dd6 = _0x50d2e8, _0x44de2f = _0x2d3dd6(0x5da); _0x29de26[_0x2d3dd6(0xafb)]['insertAdjacentHTML'](_0x2d3dd6(0x819), _0x44de2f); const _0x5da681 = _0x4ab18c[_0x2d3dd6(0x653)](_0x2d3dd6(0x5d7)), _0x3dc00f = _0x22ce6a[_0x2d3dd6(0x653)](_0x2d3dd6(0x6c3)), _0x3bf636 = _0x392855[_0x2d3dd6(0x653)]('diary-modal-save'), _0x58bcb1 = _0x8ea49c['getElementById'](_0x2d3dd6(0x802)), _0x2a5ead = _0x5da681[_0x2d3dd6(0x795)]('.choice-modal-backdrop'), _0x5606e2 = () => { const _0x4ee548 = _0x2d3dd6; _0x5da681[_0x4ee548(0x344)](), _0x519f4d(); }; _0x3bf636[_0x2d3dd6(0x5c8)] = () => { const _0x3cfee9 = _0x2d3dd6; _0x24f5a4(_0x3dc00f[_0x3cfee9(0x3cd)]), _0x5606e2(); }, _0x58bcb1['onclick'] = _0x5606e2, _0x2a5ead[_0x2d3dd6(0x5c8)] = _0x5606e2; }); } try { localStorage[_0x50d2e8(0x673)](_0x50d2e8(0x962) + _0x154e6b['id']); } catch (_0x365015) { console[_0x50d2e8(0x5f0)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x154e6b['id'], _0x365015); } _0x5929aa('\x22' + _0x12132a + _0x50d2e8(0x1f7)); } const _0x4f5941 = document[_0x5f58e0(0x653)]('export-all-data-button'), _0x382ef2 = document[_0x5f58e0(0x653)](_0x5f58e0(0x5af)), _0x2cbc8b = document[_0x5f58e0(0x653)](_0x5f58e0(0x413)); _0x4f5941['addEventListener'](_0x5f58e0(0x4f4), async () => { const _0xc48a0c = _0x5f58e0; _0x1d9e54(!![], _0xc48a0c(0x773)); const _0x1d90dd = []; try { if (_0xc48a0c(0x593) !== 'gdlud') _0x5c3d86[_0xc48a0c(0x9a8)] = _0x213543['chats'][0x0]?.['id'] || null; else { const _0x43857e = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x4f8437 = 0x0; _0x4f8437 < localStorage['length']; _0x4f8437++) { if (_0xc48a0c(0xb27) !== _0xc48a0c(0xb27)) _0x4457bf[_0xc48a0c(0x24d)]({ 'role': _0xc48a0c(0x901), 'content': _0xedc699 }), _0x5a476f[_0xc48a0c(0x24d)]({ 'role': 'assistant', 'content': _0xc48a0c(0x8e9) }); else { const _0x282777 = localStorage[_0xc48a0c(0x8c2)](_0x4f8437); if (_0x282777) _0x43857e[_0xc48a0c(0x1b7)][_0x282777] = localStorage[_0xc48a0c(0x6da)](_0x282777); } } const _0x938f22 = await _0x43cbe5, _0x3790bd = _0x938f22[_0xc48a0c(0xb25)](_0x1ae959, _0xc48a0c(0x1f4)), _0x4b373e = _0x3790bd[_0xc48a0c(0x751)](_0x1ae959), _0x2a4abe = await new Promise((_0x36f8ce, _0x37dfdb) => { const _0x42370e = _0xc48a0c, _0x26f615 = _0x4b373e[_0x42370e(0x3dd)](); _0x26f615['onsuccess'] = () => _0x36f8ce(_0x26f615[_0x42370e(0x97f)]), _0x26f615['onerror'] = () => _0x37dfdb(_0x26f615[_0x42370e(0x5f0)]); }); for (const _0x310d83 of _0x2a4abe) { if (_0x310d83['blob'] instanceof Blob) { if (_0xc48a0c(0xb36) !== _0xc48a0c(0xb36)) _0x2df4b0[_0xc48a0c(0x313)][_0xc48a0c(0x956)] = _0xc48a0c(0xa38) + _0x3d6172[_0xc48a0c(0x264)](_0x136741) + '\x27)', _0xaacaf8['style']['backgroundSize'] = _0xc48a0c(0x544), _0x1a8e49[_0xc48a0c(0x313)][_0xc48a0c(0x6e7)] = 'center'; else try { _0x43857e[_0xc48a0c(0x29f)][_0x310d83['id']] = await _0x1f0891(_0x310d83[_0xc48a0c(0x511)]); } catch (_0x29d2f5) { if (_0xc48a0c(0x737) !== 'RYuHL') { const _0x4ea8dd = _0x140c3c['author'] === _0xc48a0c(0x901) ? _0xc48a0c(0x901) : 'ai', _0x248f52 = _0x5b145b[_0xc48a0c(0x15e)] === _0xc48a0c(0x901) ? _0x3ae8bc[_0xc48a0c(0x7d7)] : _0x2016e2(_0x19e7f6[_0xc48a0c(0x15e)])[_0xc48a0c(0x7d7)], _0x350c71 = _0x1f0595[_0xc48a0c(0x2da)](_0xc48a0c(0x1f9)); _0x350c71['className'] = _0xc48a0c(0x698) + _0x4ea8dd, _0x350c71[_0xc48a0c(0x2c4)]['timestamp'] = _0x53b48c[_0xc48a0c(0x1af)], _0x350c71[_0xc48a0c(0x313)][_0xc48a0c(0x37e)] = _0xc48a0c(0x643), _0x350c71['style'][_0xc48a0c(0x1cc)] = '0', _0x350c71['innerHTML'] = _0xc48a0c(0x791) + _0x248f52 + _0xc48a0c(0x481) + new _0x33359e(_0x213234['timestamp'])['toLocaleString']('zh-CN') + _0xc48a0c(0x928) + _0x3b0546[_0xc48a0c(0x329)][_0xc48a0c(0xac6)](/\n/g, _0xc48a0c(0x3b1)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x4e7d09[_0xc48a0c(0x168)](_0x350c71); } else _0x1d90dd['push'](_0x310d83['id']); } } } const _0x5c394b = _0x938f22[_0xc48a0c(0xb25)](_0x3949cc, 'readonly'), _0x102500 = _0x5c394b[_0xc48a0c(0x751)](_0x3949cc), _0x141703 = await new Promise((_0x18989b, _0x2a8f01) => { const _0x5789df = _0xc48a0c, _0x5a3a0e = _0x102500['getAll'](); _0x5a3a0e[_0x5789df(0x8ef)] = () => _0x18989b(_0x5a3a0e[_0x5789df(0x97f)]), _0x5a3a0e['onerror'] = () => _0x2a8f01(_0x5a3a0e[_0x5789df(0x5f0)]); }); for (const _0x59ace7 of _0x141703) { if (_0xc48a0c(0x216) !== _0xc48a0c(0x216)) { const _0x412c12 = _0x3f8419(_0x16a7a8[_0xc48a0c(0xb63)])?.[_0xc48a0c(0x7d7)] || '未知'; return '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>' + _0x412c12 + _0xc48a0c(0x69b) + _0xebf209['content'] + _0xc48a0c(0x681); } else { const _0x1001fc = { ..._0x59ace7 }; _0x59ace7['audio'] instanceof Blob && (_0x1001fc['audio'] = await _0x1f0891(_0x59ace7[_0xc48a0c(0x8e1)])), _0x59ace7[_0xc48a0c(0x544)] instanceof Blob && (_0x1001fc[_0xc48a0c(0x544)] = await _0x1f0891(_0x59ace7[_0xc48a0c(0x544)])), _0x43857e['indexedDBMusicData'][_0xc48a0c(0x24d)](_0x1001fc); } } const _0x5ddc74 = new Blob([JSON[_0xc48a0c(0x98f)](_0x43857e, null, 0x2)], { 'type': _0xc48a0c(0x6a0) }), _0x17aba0 = URL[_0xc48a0c(0x264)](_0x5ddc74), _0x12187e = document['createElement']('a'), _0x2d6afc = new Date(), _0xdfdfbe = _0x2d6afc['getFullYear']() + '-' + String(_0x2d6afc[_0xc48a0c(0x978)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x2d6afc['getDate']())['padStart'](0x2, '0'); _0x12187e['href'] = _0x17aba0, _0x12187e[_0xc48a0c(0xafa)] = _0xc48a0c(0x733) + _0xdfdfbe + '.json', document[_0xc48a0c(0xafb)][_0xc48a0c(0x168)](_0x12187e), _0x12187e['click'](), document['body'][_0xc48a0c(0x4d4)](_0x12187e), URL[_0xc48a0c(0x80e)](_0x17aba0), _0x1d9e54(![]), _0x1d90dd[_0xc48a0c(0x8a0)] > 0x0 ? _0x5929aa(_0xc48a0c(0x378) + _0x1d90dd['join']('\x0a')) : _0x5929aa(_0xc48a0c(0x950)); } } catch (_0x1baae7) { _0x1d9e54(![]), console[_0xc48a0c(0x5f0)](_0xc48a0c(0x76f), _0x1baae7), _0x5929aa(_0xc48a0c(0x876) + _0x1baae7['message']); } }), _0x382ef2[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x24114d = _0x5f58e0; _0x24114d(0x183) === _0x24114d(0x183) ? _0x2cbc8b[_0x24114d(0x4f4)]() : _0x2a6c65('图片预览失败:\x20' + _0x3b2bc5[_0x24114d(0xa53)]); }), _0x53a4fb[_0x5f58e0(0xacf)]('click', _0x326b55), _0x2cbc8b['addEventListener']('change', _0x59656f => { const _0x4c9156 = _0x5f58e0, _0x14c467 = _0x59656f[_0x4c9156(0xa4b)]['files'][0x0]; if (!_0x14c467) return; _0x9e00ac(_0x4c9156(0x310))['then'](_0x496ae9 => { const _0x4f9880 = _0x4c9156; if (!_0x496ae9) { _0x2cbc8b[_0x4f9880(0x3cd)] = ''; return; } _0x1d9e54(!![], _0x4f9880(0x624)); const _0xf2d3b0 = new FileReader(); _0xf2d3b0['onload'] = async _0x5a0a54 => { const _0xeb3c8f = _0x4f9880; if ('SyDmD' !== 'SyDmD') { const _0x14e7b9 = []; if (_0x24de2f[_0xeb3c8f(0x329)]) _0x14e7b9[_0xeb3c8f(0x24d)]({ 'text': _0x3079df[_0xeb3c8f(0x329)] }); if (_0x14d8e4[_0xeb3c8f(0x3bf)]) { const _0x44b99c = _0x4a13de[_0xeb3c8f(0x3bf)][_0xeb3c8f(0x334)](',')[0x1], _0x478392 = _0x1fde38[_0xeb3c8f(0x3bf)][_0xeb3c8f(0x650)](_0x50194b['image']['indexOf'](':') + 0x1, _0x4d000a[_0xeb3c8f(0x3bf)][_0xeb3c8f(0x9db)](';')) || 'image/jpeg'; _0x14e7b9['push']({ 'inline_data': { 'mime_type': _0x478392, 'data': _0x44b99c } }); } return _0x14e7b9; } else try { const _0x12951a = JSON[_0xeb3c8f(0x440)](_0x5a0a54[_0xeb3c8f(0xa4b)]['result']); if (!_0x12951a['localStorageData'] || !_0x12951a[_0xeb3c8f(0x29f)]) throw new Error(_0xeb3c8f(0x1a0)); _0x1d9e54(!![], '正在准备图片数据...'); const _0x30f8e2 = await Promise['all'](Object['keys'](_0x12951a['indexedDBData'])['map'](async _0x2986b7 => { const _0x1e09d9 = _0xeb3c8f, _0x5eec74 = _0x12951a[_0x1e09d9(0x29f)][_0x2986b7]; if (typeof _0x5eec74 === 'string' && _0x5eec74['startsWith'](_0x1e09d9(0x6ca))) { const _0x2e0ee8 = await _0x3d106b(_0x5eec74); return { 'id': _0x2986b7, 'blob': _0x2e0ee8 }; } return null; }))[_0xeb3c8f(0x8e7)](_0x13b2f4 => _0x13b2f4[_0xeb3c8f(0x776)](Boolean)), _0x6d6925 = []; if (_0x12951a[_0xeb3c8f(0x5b9)]) { if (_0xeb3c8f(0x490) === 'LVWxm') { const _0x268bd2 = _0x4d5f1b[0x0][_0xeb3c8f(0x87b)](), _0x2e84d8 = _0x32ce3e[0x1][_0xeb3c8f(0x87b)]()[_0xeb3c8f(0xac6)](/^"|"$/g, ''); _0x3272c7[_0x268bd2] = _0x2e84d8; } else { _0x1d9e54(!![], _0xeb3c8f(0x7bf)); const _0x3315df = _0x12951a[_0xeb3c8f(0x5b9)]['map'](async _0x428f3c => { const _0x1b153c = _0xeb3c8f; if ('Eqmxj' !== _0x1b153c(0x189)) { const _0x10f118 = { ..._0x428f3c }; if (_0x428f3c[_0x1b153c(0x8e1)]) _0x10f118[_0x1b153c(0x8e1)] = await _0x3d106b(_0x428f3c[_0x1b153c(0x8e1)]); if (_0x428f3c[_0x1b153c(0x544)]) _0x10f118[_0x1b153c(0x544)] = await _0x3d106b(_0x428f3c[_0x1b153c(0x544)]); return _0x10f118; } else { const _0x4987a6 = _0x1be6ac[_0x1b153c(0x653)](_0x1b153c(0x31d)); _0x4987a6[_0x1b153c(0x902)](), _0x5b61ee[_0x1b153c(0xb1b)]('copy'), _0xf900d6(_0x1b153c(0x987)); } }); _0x6d6925['push'](...await Promise['all'](_0x3315df)); } } _0x1d9e54(!![], _0xeb3c8f(0x1a5)), localStorage[_0xeb3c8f(0x7c5)](); for (const _0x138116 in _0x12951a['localStorageData']) { _0xeb3c8f(0x782) === _0xeb3c8f(0x782) ? localStorage[_0xeb3c8f(0x7db)](_0x138116, _0x12951a[_0xeb3c8f(0x1b7)][_0x138116]) : (_0x54615f['getElementById']('snoop-app-view-container')[_0xeb3c8f(0x313)][_0xeb3c8f(0x272)] = _0xeb3c8f(0x643), _0x391b3b('snoopList', 'snoopPhone')); } _0x1d9e54(!![], _0xeb3c8f(0x849)); const _0x5657d4 = await _0x43cbe5, _0x217888 = _0x5657d4['transaction']([_0x1ae959, _0x3949cc, _0x5211d8], _0xeb3c8f(0xadd)), _0xe3f095 = _0x217888['objectStore'](_0x1ae959), _0x2670c1 = _0x217888['objectStore'](_0x3949cc), _0x46ee92 = _0x217888[_0xeb3c8f(0x751)](_0x5211d8); _0xe3f095[_0xeb3c8f(0x7c5)](), _0x2670c1['clear'](), _0x46ee92[_0xeb3c8f(0x7c5)](), _0x30f8e2[_0xeb3c8f(0xa30)](_0x5e5adb => _0xe3f095[_0xeb3c8f(0x215)](_0x5e5adb)), _0x6d6925['forEach'](_0x28c603 => _0x2670c1[_0xeb3c8f(0x215)](_0x28c603)), await new Promise((_0x5bb04e, _0x2f442c) => { const _0x448025 = _0xeb3c8f; _0x217888[_0x448025(0x426)] = _0x5bb04e, _0x217888[_0x448025(0x740)] = _0x317e70 => _0x2f442c(_0x317e70[_0x448025(0xa4b)]['error']); }), _0x1d9e54(![]), _0x5929aa(_0xeb3c8f(0x556)), setTimeout(() => location['reload'](), 0x640); } catch (_0x283165) { if (_0xeb3c8f(0xb2d) !== 'gOwPs') { if (_0x42ddc3) _0x53736b(_0x353669); _0x1bcfaa = null, _0x210b88[_0xeb3c8f(0x8ac)] = [], _0x221d35[_0xeb3c8f(0x5f2)] = null, _0x3d1cfe[_0xeb3c8f(0x653)](_0xeb3c8f(0xaac))['style']['display'] = 'none', _0xde8b70[_0xeb3c8f(0x9a8)] = null, _0x17d11d(), _0xb272dc(_0xeb3c8f(0x5c2), 'meetingView'); } else _0x1d9e54(![]), console[_0xeb3c8f(0x5f0)](_0xeb3c8f(0xb15), _0x283165), _0x5929aa(_0xeb3c8f(0xb1f) + _0x283165['message']); } finally { _0x2cbc8b[_0xeb3c8f(0x3cd)] = ''; } }, _0xf2d3b0[_0x4f9880(0xb53)](_0x14c467); }); }); function _0x191a1c() { const _0x46ea7c = _0x5f58e0; if ('GdArH' === _0x46ea7c(0x9e6)) _0x3864d3[_0x46ea7c(0x3cd)] = _0x1884b1[_0x46ea7c(0x2ec)][_0x46ea7c(0x5e8)] || '', _0x51b0f6[_0x46ea7c(0x3cd)] = _0x1884b1['apiSettings'][_0x46ea7c(0x8c2)] || '', _0x2863b2[_0x46ea7c(0x3cd)] = _0x1884b1[_0x46ea7c(0x2ec)][_0x46ea7c(0xacd)] || '', _0xda6dce[_0x46ea7c(0x3cd)] = String(_0x1884b1[_0x46ea7c(0xa17)]?.['perChatContextLines'] ?? 0x64), document[_0x46ea7c(0x653)](_0x46ea7c(0xa43))['value'] = _0x1884b1['apiSettings'][_0x46ea7c(0x204)] || _0x46ea7c(0x6b0); else return _0x880969[_0x46ea7c(0x24d)](_0x27e981), _0x3334f4; } function _0xda175a() { const _0x2a8d60 = _0x5f58e0; _0x1884b1['apiSettings'][_0x2a8d60(0x5e8)] = _0x3864d3[_0x2a8d60(0x3cd)][_0x2a8d60(0x87b)](), _0x1884b1['apiSettings'][_0x2a8d60(0x8c2)] = _0x51b0f6[_0x2a8d60(0x3cd)][_0x2a8d60(0x87b)](), _0x1884b1[_0x2a8d60(0x2ec)][_0x2a8d60(0xacd)] = _0x2863b2[_0x2a8d60(0x3cd)][_0x2a8d60(0x87b)](), _0x1884b1['apiSettings']['provider'] = document[_0x2a8d60(0x653)](_0x2a8d60(0xa43))[_0x2a8d60(0x3cd)]; const _0x9d6a6a = parseInt(_0xda6dce['value'], 0xa); _0x1884b1['preferences'][_0x2a8d60(0x99e)] = Number['isFinite'](_0x9d6a6a) && _0x9d6a6a > 0x0 ? _0x9d6a6a : 0x64, _0x480928(), _0x5929aa('设置已保存！'); } function _0x252d9f() { const _0x3c8877 = _0x5f58e0; _0x2d7af2[_0x3c8877(0x3cd)] = _0x1884b1[_0x3c8877(0x7c2)]['name'] || '', _0x37b891['src'] = _0x1884b1[_0x3c8877(0x7c2)][_0x3c8877(0x99a)] || _0x100125, _0x38e9d8[_0x3c8877(0x3cd)] = _0x1884b1[_0x3c8877(0x7c2)]['persona'] || ''; } async function _0x5b7355(_0x2cb814 = null) { const _0x56185f = _0x5f58e0; if (_0x56185f(0x8d8) === _0x56185f(0x8d8)) { _0x13d883(_0x56185f(0x670), _0x3ffea4); const _0x4f933c = document[_0x56185f(0x653)](_0x56185f(0x779)), _0x4d8614 = document['getElementById']('user-avatar-frame-url-in-chat'), _0x44b4f5 = document['querySelector']('#char-edit-avatar-preview\x20+\x20.avatar-frame'); if (_0x2cb814) { const _0x4e49f5 = _0x1884b1['characters'][_0x56185f(0x6f9)](_0x16ae8e => _0x16ae8e['id'] === _0x2cb814); _0x4f933c[_0x56185f(0x3cd)] = _0x4e49f5[_0x56185f(0x557)] || '', _0x4d8614[_0x56185f(0x3cd)] = _0x4e49f5[_0x56185f(0x7f9)] || ''; if (_0x44b4f5) _0x44b4f5['style'][_0x56185f(0x956)] = _0x4e49f5[_0x56185f(0x557)] ? 'url(\x27' + _0x4e49f5[_0x56185f(0x557)] + '\x27)' : ''; } else { _0x4f933c[_0x56185f(0x3cd)] = '', _0x4d8614[_0x56185f(0x3cd)] = ''; if (_0x44b4f5) _0x44b4f5['style'][_0x56185f(0x956)] = ''; } _0x4f933c[_0x56185f(0xacf)](_0x56185f(0x49e), () => { const _0xd9300c = _0x56185f; if (_0x44b4f5) _0x44b4f5[_0xd9300c(0x313)]['backgroundImage'] = _0x4f933c[_0xd9300c(0x3cd)] ? _0xd9300c(0xa38) + _0x4f933c['value'] + '\x27)' : ''; }); const _0x7e5ce2 = document[_0x56185f(0x653)](_0x56185f(0xa0a)); _0x7e5ce2[_0x56185f(0x9c2)] = '', _0x1884b1['worldBooks'][_0x56185f(0xa30)](_0xee302a => { const _0x51f34d = _0x56185f; if (_0x51f34d(0xad2) !== _0x51f34d(0x425)) { const _0x16d9c5 = document[_0x51f34d(0x2da)]('label'); _0x16d9c5[_0x51f34d(0x9c2)] = _0x51f34d(0x7c4) + _0xee302a['id'] + _0x51f34d(0x32b) + _0xee302a[_0x51f34d(0x7d7)], _0x7e5ce2[_0x51f34d(0x168)](_0x16d9c5); } else { const _0x59db78 = _0x54db3b['characterLastScripts'][_0x38b13f[_0x51f34d(0x5f2)]]; if (_0x59db78 && _0x59db78[_0x51f34d(0x8a0)] > 0x0) { _0x3f38dd[_0x51f34d(0x8ac)] = [..._0x59db78]; const _0x3affaa = _0x20199e[_0x51f34d(0x8ac)][_0x51f34d(0x3dc)](); _0x427a55[_0x51f34d(0x8f9)] = _0x3affaa[_0x51f34d(0x1d0)] === 'narrator' ? '旁白' : _0x3affaa['speaker'], _0x4c3a9c[_0x51f34d(0x8f9)] = _0x3affaa[_0x51f34d(0x15b)], _0x3affaa['speaker'] !== _0x51f34d(0x700) && _0x350bc3(_0x415c7f[_0x51f34d(0x5f2)], _0x3affaa[_0x51f34d(0x5cc)]); } else _0x5b8ce3[_0x51f34d(0x8f9)] = '旁白', _0x5b5e14[_0x51f34d(0x8f9)] = _0x51f34d(0x897); } }), _0x65d0a9(_0x56185f(0x170)), _0xb6e1d2[_0x56185f(0x74e)] = _0xe4a1db, _0x4c5d6f[_0x56185f(0x3cd)] = '', _0x13a3cb[_0x56185f(0x313)][_0x56185f(0x956)] = '', _0x363924[_0x56185f(0x3cd)] = '', _0x3d86b[_0x56185f(0x313)][_0x56185f(0x956)] = '', _0x27a5a1[_0x56185f(0x3cd)] = ''; const _0x1a8aaa = [_0x56185f(0xb1a), _0x56185f(0x51e), _0x56185f(0xad0), _0x56185f(0x2af), _0x56185f(0xae9)]; _0x1a8aaa[_0x56185f(0xa30)](_0x4643f8 => { const _0x20c14c = _0x56185f; document[_0x20c14c(0x653)](_0x20c14c(0xadc) + _0x4643f8 + _0x20c14c(0xa82))[_0x20c14c(0x313)][_0x20c14c(0x956)] = '', document['getElementById'](_0x20c14c(0xadc) + _0x4643f8 + _0x20c14c(0x2a7))[_0x20c14c(0x3cd)] = ''; }); if (_0x2cb814) { const _0x3caa88 = _0x1884b1[_0x56185f(0x358)][_0x56185f(0x6f9)](_0x50d9ba => _0x50d9ba['id'] === _0x2cb814); if (!_0x3caa88) return; _0xbc58d3[_0x56185f(0x3cd)] = _0x3caa88['id'], _0x23aee9[_0x56185f(0x8f9)] = _0x56185f(0x9f5), _0x3637f9[_0x56185f(0x3cd)] = _0x3caa88[_0x56185f(0x7d7)], _0x75c634[_0x56185f(0x3cd)] = _0x3caa88['remark'], _0x8d37f7['value'] = _0x3caa88[_0x56185f(0x370)], document['getElementById'](_0x56185f(0x768))[_0x56185f(0x3cd)] = _0x3caa88[_0x56185f(0xa88)] || ''; const _0x110eab = _0x1884b1[_0x56185f(0x940)][_0x56185f(0x6f9)](_0x2bbcea => _0x2bbcea[_0x56185f(0x8c3)] === _0x56185f(0xaa7) && _0x2bbcea[_0x56185f(0x3d5)]['includes'](_0x2cb814)); document[_0x56185f(0x653)](_0x56185f(0x170))['value'] = _0x110eab?.[_0x56185f(0x70c)] || _0x1884b1[_0x56185f(0x1d3)]; try { const _0x5ccda5 = await _0x329660(_0x56185f(0x735) + _0x3caa88['id']), _0x2779d3 = await _0x329660(_0x56185f(0xac9) + _0x3caa88['id']), _0x4721ed = await _0x329660(_0x56185f(0x3f9) + _0x3caa88['id']); _0xb6e1d2['src'] = _0x5ccda5 ? URL[_0x56185f(0x264)](_0x5ccda5) : _0x3caa88[_0x56185f(0x99a)] || _0xe4a1db; if (_0x2779d3) _0x13a3cb['style'][_0x56185f(0x956)] = _0x56185f(0xa38) + URL[_0x56185f(0x264)](_0x2779d3) + '\x27)'; if (_0x4721ed) _0x3d86b[_0x56185f(0x313)][_0x56185f(0x956)] = _0x56185f(0xa38) + URL[_0x56185f(0x264)](_0x4721ed) + '\x27)'; for (const _0x4eefd4 of _0x1a8aaa) { const _0x26d797 = await _0x329660(_0x56185f(0x1de) + _0x4eefd4 + '_' + _0x3caa88['id']); if (_0x26d797) { if (_0x56185f(0x4e5) === _0x56185f(0x6a1)) return { 'role': _0x56185f(0x901), 'content': [{ 'type': 'text', 'text': _0x3877a2['content'] || '\x20' }, { 'type': 'image_url', 'image_url': { 'url': _0x5d4a41[_0x56185f(0x3bf)], 'detail': _0x56185f(0x914) } }] }; else document[_0x56185f(0x653)](_0x56185f(0xadc) + _0x4eefd4 + _0x56185f(0xa82))[_0x56185f(0x313)][_0x56185f(0x956)] = 'url(\x27' + URL[_0x56185f(0x264)](_0x26d797) + '\x27)'; } } } catch (_0x5e7a) { console[_0x56185f(0x5f0)](_0x56185f(0x91d) + _0x3caa88['id'] + _0x56185f(0x354), _0x5e7a), _0xb6e1d2['src'] = _0x3caa88[_0x56185f(0x99a)] || _0xe4a1db; } _0x3caa88['linkedWorldBookIds'] && _0x7e5ce2['querySelectorAll']('input[type=\x22checkbox\x22]')['forEach'](_0x49c408 => { const _0x453db4 = _0x56185f; if (_0x3caa88[_0x453db4(0x99b)]['includes'](_0x49c408['value'])) _0x49c408['checked'] = !![]; }), _0x2d897b(); } else _0xbc58d3[_0x56185f(0x3cd)] = '', _0x23aee9[_0x56185f(0x8f9)] = '创建新角色', _0x3637f9[_0x56185f(0x3cd)] = _0x56185f(0x5c6) + (_0x1884b1[_0x56185f(0x358)][_0x56185f(0x8a0)] + 0x1), _0x75c634[_0x56185f(0x3cd)] = '', _0x8d37f7['value'] = '你是一个乐于助人的AI助手。', document[_0x56185f(0x653)](_0x56185f(0x768))[_0x56185f(0x3cd)] = '', _0x2d897b(); const _0x143058 = document['getElementById'](_0x56185f(0x768)); let _0x37de51 = document[_0x56185f(0x653)]('live-preview-style'); if (!_0x37de51) { if (_0x56185f(0xb6e) === _0x56185f(0x73c)) for (const _0x2ae89d in _0xe105b0) { _0x363394['style'][_0x2ae89d] = _0x566a06[_0x2ae89d]; } else _0x37de51 = document[_0x56185f(0x2da)](_0x56185f(0x313)), _0x37de51['id'] = _0x56185f(0x34f), document[_0x56185f(0x8be)][_0x56185f(0x168)](_0x37de51); } const _0x5ccb7e = () => { const _0x4fc564 = _0x56185f; if (_0x4fc564(0xad9) !== _0x4fc564(0x6d9)) { const _0x2cee14 = _0x143058[_0x4fc564(0x3cd)]; let _0x9418c9 = _0x2cee14[_0x4fc564(0xac6)](/\.bubble\.sent/g, _0x4fc564(0x618))[_0x4fc564(0xac6)](/\.bubble\.received/g, _0x4fc564(0x44e)); _0x37de51[_0x4fc564(0x9c2)] = _0x9418c9; } else _0x15d414[_0x4fc564(0xb7b)][_0x4fc564(0x344)](_0x4fc564(0x2c1)); }; _0x143058[_0x56185f(0x870)](_0x56185f(0x49e), _0x5ccb7e), _0x143058[_0x56185f(0xacf)](_0x56185f(0x49e), _0x5ccb7e), _0x5ccb7e(); } else _0x26dbce(_0x133ddb['id']); } async function _0x47725a() { const _0x67dcd5 = _0x5f58e0, _0x1e0d3c = _0xbc58d3['value']; if (!_0x1e0d3c) { if ('lyGij' !== _0x67dcd5(0x1be)) { const _0x4055d2 = _0xbe7f['createElement'](_0x67dcd5(0x1f9)); _0x4055d2[_0x67dcd5(0x84e)] = _0x67dcd5(0x657), _0x4055d2[_0x67dcd5(0x313)]['cursor'] = _0x67dcd5(0x519); const _0x4ff48f = _0x50bece[_0x67dcd5(0x47a)][_0x2d3283], _0x30d510 = _0x4ff48f[_0x67dcd5(0x5ae)][_0x67dcd5(0x83b)]((_0xecea73, _0x5b1bda) => _0xecea73 + (_0x5b1bda[_0x67dcd5(0x8d0)] || 0x0), 0x0); _0x4055d2[_0x67dcd5(0x9c2)] = _0x67dcd5(0x7be) + _0x1f74f2 + _0x67dcd5(0x80c) + _0x30d510[_0x67dcd5(0x395)](0x2) + _0x67dcd5(0x680), _0x4055d2['addEventListener'](_0x67dcd5(0x4f4), () => { const _0x5d9164 = _0x67dcd5; _0x468b8d['classList'][_0x5d9164(0x344)]('active'), _0x3a4b46['classList'][_0x5d9164(0x428)](_0x5d9164(0x33f)), _0x49cea8(_0x4ff48f, _0x59b07d); }), _0x208249[_0x67dcd5(0x168)](_0x4055d2); } else { _0x5929aa(_0x67dcd5(0xa55)); return; } } const _0x24ce02 = _0x21051e(_0x1e0d3c); if (!_0x24ce02) return; _0x1d9e54(!![], _0x67dcd5(0x573) + _0x24ce02[_0x67dcd5(0x7d7)] + '”...'); try { if (_0x67dcd5(0x52f) !== _0x67dcd5(0x52f)) _0x227a9b['disabled'] = !![]; else { const _0x79ff04 = { 'type': _0x67dcd5(0x81d), 'version': 0x1, 'name': _0x24ce02[_0x67dcd5(0x7d7)], 'remark': _0x24ce02[_0x67dcd5(0xb17)], 'persona': _0x24ce02[_0x67dcd5(0x370)], 'bubbleCss': _0x24ce02[_0x67dcd5(0xa88)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x454187 = await _0x329660(_0x67dcd5(0x735) + _0x24ce02['id']); if (_0x454187) _0x79ff04[_0x67dcd5(0x99a)] = await _0x1f0891(_0x454187); const _0x5e9ec7 = [_0x67dcd5(0xb1a), 'happy', _0x67dcd5(0xad0), 'sad', _0x67dcd5(0xae9)]; for (const _0x73ea2e of _0x5e9ec7) { if (_0x67dcd5(0xb80) !== _0x67dcd5(0x505)) { const _0x484906 = await _0x329660(_0x67dcd5(0x1de) + _0x73ea2e + '_' + _0x24ce02['id']); _0x484906 && (_0x79ff04['sprites'][_0x73ea2e] = await _0x1f0891(_0x484906)); } else _0x4ade05['push'](_0x37b4e3['id']); } _0x24ce02['linkedWorldBookIds'] && _0x24ce02[_0x67dcd5(0x99b)][_0x67dcd5(0x8a0)] > 0x0 && (_0x79ff04[_0x67dcd5(0x562)] = _0x24ce02[_0x67dcd5(0x99b)][_0x67dcd5(0x7d4)](_0x334a64 => _0x1884b1[_0x67dcd5(0x562)][_0x67dcd5(0x6f9)](_0x5b519a => _0x5b519a['id'] === _0x334a64))['filter'](Boolean)[_0x67dcd5(0x7d4)](_0x1fb9f6 => ({ 'name': _0x1fb9f6[_0x67dcd5(0x7d7)], 'content': _0x1fb9f6[_0x67dcd5(0x329)] }))); const _0x36ae44 = new Blob([JSON[_0x67dcd5(0x98f)](_0x79ff04, null, 0x2)], { 'type': 'application/json' }), _0x12931a = URL[_0x67dcd5(0x264)](_0x36ae44), _0x1e3e83 = document[_0x67dcd5(0x2da)]('a'); _0x1e3e83[_0x67dcd5(0x303)] = _0x12931a, _0x1e3e83[_0x67dcd5(0xafa)] = _0x24ce02[_0x67dcd5(0x7d7)] + _0x67dcd5(0x357), document['body'][_0x67dcd5(0x168)](_0x1e3e83), _0x1e3e83['click'](), document['body']['removeChild'](_0x1e3e83), URL[_0x67dcd5(0x80e)](_0x12931a); } } catch (_0xe4c411) { console[_0x67dcd5(0x5f0)](_0x67dcd5(0x595), _0xe4c411), _0x5929aa('导出失败了，哼:\x20' + _0xe4c411[_0x67dcd5(0xa53)]); } finally { _0x1d9e54(![]); } } async function _0x3eafdf(_0x2880c2) { const _0x1fc36c = _0x5f58e0; if ('nufoL' === _0x1fc36c(0x648)) { const _0x4ed355 = _0x2880c2['target'][_0x1fc36c(0x53d)][0x0]; if (!_0x4ed355) return; _0x1d9e54(!![], _0x1fc36c(0x86e)); const _0x22d261 = new FileReader(); _0x22d261[_0x1fc36c(0x3e1)] = async _0x1731db => { const _0x383d4c = _0x1fc36c; if (_0x383d4c(0x818) === _0x383d4c(0x818)) try { const _0x4301d9 = JSON[_0x383d4c(0x440)](_0x1731db[_0x383d4c(0xa4b)][_0x383d4c(0x97f)]); if (_0x4301d9[_0x383d4c(0x8c3)] !== _0x383d4c(0x81d)) { if (_0x383d4c(0x9eb) !== _0x383d4c(0x39d)) throw new Error(_0x383d4c(0xb30)); else _0x342eff[_0x383d4c(0x653)]('user-post-avatar')[_0x383d4c(0x74e)] = _0x3b3d8c[_0x383d4c(0x99a)] || _0xcae7b4; } const _0x2b48e7 = []; if (_0x4301d9[_0x383d4c(0x562)] && _0x4301d9[_0x383d4c(0x562)][_0x383d4c(0x8a0)] > 0x0) for (const _0xc5678a of _0x4301d9[_0x383d4c(0x562)]) { if (_0x383d4c(0x95b) !== 'iGAQx') { let _0x3d91c2 = _0x1884b1['worldBooks']['find'](_0x137e4c => _0x137e4c['name'] === _0xc5678a[_0x383d4c(0x7d7)]); if (_0x3d91c2) _0x2b48e7['push'](_0x3d91c2['id']); else { const _0x415537 = { 'id': _0x383d4c(0xb54) + Date[_0x383d4c(0x965)]() + '_' + Math['random'](), 'name': _0xc5678a[_0x383d4c(0x7d7)], 'content': _0xc5678a[_0x383d4c(0x329)] }; _0x1884b1[_0x383d4c(0x562)][_0x383d4c(0x24d)](_0x415537), _0x2b48e7[_0x383d4c(0x24d)](_0x415537['id']); } } else _0x438921['textContent'] = _0x1939f9[_0x383d4c(0x7d7)], _0x532f9b[_0x383d4c(0x8f9)] = _0x383d4c(0x2a6), _0x284c51(_0x123b78, _0x383d4c(0xb1a)); } const _0x2ef99e = _0x383d4c(0x2ea) + Date[_0x383d4c(0x965)](), _0x585086 = { 'id': _0x2ef99e, 'name': _0x4301d9['name'], 'remark': _0x4301d9[_0x383d4c(0xb17)] || '', 'persona': _0x4301d9[_0x383d4c(0x370)], 'avatar': _0x4301d9[_0x383d4c(0x99a)] || _0xe4a1db, 'linkedWorldBookIds': _0x2b48e7, 'bubbleCss': _0x4301d9[_0x383d4c(0xa88)] || '' }; if (_0x4301d9[_0x383d4c(0x99a)]) { if ('iQlVE' !== _0x383d4c(0x5a4)) { const _0x123652 = await _0x3d106b(_0x4301d9[_0x383d4c(0x99a)]); await _0x100c88(_0x383d4c(0x735) + _0x2ef99e, _0x123652); } else { if (_0x301ba9) _0x33d38d(_0x2d7d55); const _0x19c15a = _0x503b8f['target']['closest'](_0x383d4c(0x43b)); if (!_0x19c15a) return; const _0x50ddaf = _0x12b9f3(_0x19c15a['dataset']['historyIndex'], 0xa); if (_0x27cd3e(_0x50ddaf)) return; const _0x2956cf = () => { _0x34b94d = _0xd7dc5b(() => { const _0x565479 = _0x493f; if (_0x2e303e['type'] === 'touchstart') _0x4d1ea7[_0x565479(0x4d1)](); _0x2bfee6(_0x50ddaf); }, 0x320); }, _0x3743ee = () => { if (_0x21af43) _0x2e9e1b(_0xa8f766); }; _0x4ee4e9['addEventListener']('mouseup', _0x3743ee, { 'once': !![] }), _0xb36998['addEventListener'](_0x383d4c(0x478), _0x3743ee, { 'once': !![] }), _0x212ac5[_0x383d4c(0xacf)]('touchend', _0x3743ee, { 'once': !![] }), _0x36dfbc[_0x383d4c(0xacf)](_0x383d4c(0x242), _0x3743ee, { 'once': !![] }), _0x2956cf(); } } if (_0x4301d9[_0x383d4c(0xb07)]) for (const _0x98e90d in _0x4301d9[_0x383d4c(0xb07)]) { if (_0x383d4c(0x24f) !== _0x383d4c(0x24f)) { let _0x298dbc = 0x0, _0x58d083 = 0x0, _0x31a35 = 0x0; if (_0x1efe88['length'] == 0x4) _0x298dbc = '0x' + _0xa83e03[0x1] + _0x1f5186[0x1], _0x58d083 = '0x' + _0x11bb73[0x2] + _0x6545be[0x2], _0x31a35 = '0x' + _0x13f3f4[0x3] + _0x1a8410[0x3]; else _0x5d461d[_0x383d4c(0x8a0)] == 0x7 && (_0x298dbc = '0x' + _0x3befd3[0x1] + _0x4d62f1[0x2], _0x58d083 = '0x' + _0x591d85[0x3] + _0x1ef843[0x4], _0x31a35 = '0x' + _0x2c93d4[0x5] + _0x375a70[0x6]); _0x298dbc /= 0xff, _0x58d083 /= 0xff, _0x31a35 /= 0xff; let _0x22f3ec = _0x13f84f[_0x383d4c(0xa4f)](_0x298dbc, _0x58d083, _0x31a35), _0x16e820 = _0x291031[_0x383d4c(0x19f)](_0x298dbc, _0x58d083, _0x31a35), _0xb2e4d7 = _0x16e820 - _0x22f3ec, _0x3f0bb8 = 0x0, _0x32878b = 0x0, _0x439d71 = 0x0; if (_0xb2e4d7 == 0x0) _0x3f0bb8 = 0x0; else { if (_0x16e820 == _0x298dbc) _0x3f0bb8 = (_0x58d083 - _0x31a35) / _0xb2e4d7 % 0x6; else { if (_0x16e820 == _0x58d083) _0x3f0bb8 = (_0x31a35 - _0x298dbc) / _0xb2e4d7 + 0x2; else _0x3f0bb8 = (_0x298dbc - _0x58d083) / _0xb2e4d7 + 0x4; } } _0x3f0bb8 = _0x4318f6[_0x383d4c(0x725)](_0x3f0bb8 * 0x3c); if (_0x3f0bb8 < 0x0) _0x3f0bb8 += 0x168; return _0x439d71 = (_0x16e820 + _0x22f3ec) / 0x2, _0x32878b = _0xb2e4d7 == 0x0 ? 0x0 : _0xb2e4d7 / (0x1 - _0x34cbdd['abs'](0x2 * _0x439d71 - 0x1)), _0x32878b = +(_0x32878b * 0x64)[_0x383d4c(0x395)](0x1), _0x439d71 = +(_0x439d71 * 0x64)[_0x383d4c(0x395)](0x1), { 'h': _0x3f0bb8, 's': _0x32878b, 'l': _0x439d71 }; } else { const _0x5689b2 = _0x4301d9[_0x383d4c(0xb07)][_0x98e90d], _0x4d032f = await _0x3d106b(_0x5689b2); await _0x100c88(_0x383d4c(0x1de) + _0x98e90d + '_' + _0x2ef99e, _0x4d032f); } } _0x1884b1[_0x383d4c(0x358)][_0x383d4c(0x24d)](_0x585086); const _0x47c39e = { 'id': 'chat_' + _0x2ef99e, 'type': _0x383d4c(0xaa7), 'participantIds': [_0x2ef99e], 'boundUserProfileId': _0x1884b1[_0x383d4c(0x1d3)] }; _0x1884b1['chats']['push'](_0x47c39e), _0x480928(), _0x3ebe62(), _0x5929aa('“' + _0x585086['name'] + _0x383d4c(0x789)); } catch (_0x3a0bf6) { if ('vATQv' !== _0x383d4c(0x4c4)) { const _0x214db5 = _0xafc4aa[_0x383d4c(0x2da)](_0x383d4c(0x1f9)); _0x214db5['className'] = _0x383d4c(0x969), _0x214db5['id'] = 'diary-page-' + _0x3c2fec, _0x31cf22 === _0x3243ce['diaryCurrentPage'] && _0x214db5[_0x383d4c(0xb7b)][_0x383d4c(0x428)](_0x383d4c(0x43d)), _0x23c9da['forEach'](_0xf1f871 => { const _0x58f6f7 = _0x383d4c, _0x32775c = _0xf1f871[_0x58f6f7(0x15e)] === _0x58f6f7(0x901) ? _0x58f6f7(0x901) : 'ai', _0x113de3 = _0xf1f871[_0x58f6f7(0x15e)] === _0x58f6f7(0x901) ? _0x14d524[_0x58f6f7(0x7d7)] : _0x336a1a(_0xf1f871[_0x58f6f7(0x15e)])[_0x58f6f7(0x7d7)], _0x367bfd = _0x373732[_0x58f6f7(0x2da)](_0x58f6f7(0x1f9)); _0x367bfd[_0x58f6f7(0x84e)] = _0x58f6f7(0x698) + _0x32775c, _0x367bfd['dataset']['timestamp'] = _0xf1f871[_0x58f6f7(0x1af)], _0x367bfd[_0x58f6f7(0x313)][_0x58f6f7(0x37e)] = _0x58f6f7(0x643), _0x367bfd[_0x58f6f7(0x313)][_0x58f6f7(0x1cc)] = '0', _0x367bfd['innerHTML'] = _0x58f6f7(0x791) + _0x113de3 + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>' + new _0x4aa352(_0xf1f871['timestamp'])['toLocaleString'](_0x58f6f7(0x567)) + _0x58f6f7(0x928) + _0xf1f871['content'][_0x58f6f7(0xac6)](/\n/g, _0x58f6f7(0x3b1)) + _0x58f6f7(0x765), _0x214db5['appendChild'](_0x367bfd); }), _0x30de7e[_0x383d4c(0x168)](_0x214db5); } else console['error']('导入角色卡失败:', _0x3a0bf6), _0x5929aa(_0x383d4c(0xa99) + _0x3a0bf6['message']); } finally { _0x1d9e54(![]), _0x2880c2['target'][_0x383d4c(0x3cd)] = ''; } else { const _0x3f52bf = _0x4e0c00[_0x383d4c(0xa29)](_0x325f42 / 0x3c); if (_0x3f52bf < 0x30) _0x1c2da4 += _0x383d4c(0x3af) + _0x3f52bf + _0x383d4c(0x786); else _0x5cb768 += '\x0a-\x20**对话状态**:\x20群里已经有' + _0x4421aa[_0x383d4c(0xa29)](_0x3f52bf / 0x18) + _0x383d4c(0x3bb); } }, _0x22d261['readAsText'](_0x4ed355); } else { const _0x58eea7 = _0x4bd803[_0x1fc36c(0x2da)](_0x1fc36c(0x1f9)); _0x58eea7[_0x1fc36c(0x84e)] = _0x1fc36c(0x636); const _0x4ae6ac = _0x1b9c44 + '-' + _0x43b63f(_0xac0c29 + 0x1)['padStart'](0x2, '0') + '-' + _0x5abd53(_0xe8d10f)[_0x1fc36c(0xa83)](0x2, '0'); if (_0x4ae6ac === _0xe46519) _0x58eea7[_0x1fc36c(0xb7b)]['add'](_0x1fc36c(0x70d)); if (_0x4ae6ac === _0x125128[_0x1fc36c(0x42c)]) _0x58eea7[_0x1fc36c(0xb7b)][_0x1fc36c(0x428)]('is-selected'); const _0xffe1bb = _0x51e5e5['createElement']('span'); _0xffe1bb[_0x1fc36c(0x84e)] = 'day-number', _0xffe1bb[_0x1fc36c(0x8f9)] = _0x51195b, _0x58eea7['appendChild'](_0xffe1bb); const _0x5d7b9f = _0x58d993[_0x1fc36c(0xa9d)][_0x1fc36c(0x776)](_0x19f259 => _0x19f259['date'] === _0x4ae6ac); if (_0x5d7b9f['length'] > 0x0) { const _0x52efad = _0x4982f3[_0x1fc36c(0x2da)](_0x1fc36c(0x1f9)); _0x52efad[_0x1fc36c(0x84e)] = _0x1fc36c(0x635), _0x58eea7['appendChild'](_0x52efad); } _0x58eea7[_0x1fc36c(0xacf)](_0x1fc36c(0x4f4), () => { const _0x2f2e9a = _0x1fc36c; _0x26462a[_0x2f2e9a(0x42c)] = _0x4ae6ac, _0x36c185(); }), _0x4969a0[_0x1fc36c(0x168)](_0x58eea7); } } async function _0x195ed2() { const _0x4c2946 = _0x5f58e0, _0x1a92b2 = _0xbc58d3[_0x4c2946(0x3cd)], _0x13bf5e = document[_0x4c2946(0x653)]('char-edit-bind-user')[_0x4c2946(0x3cd)], _0x48762f = _0x4c5d6f['files'][0x0], _0x142ff5 = _0x363924[_0x4c2946(0x53d)][0x0], _0x1c3cd5 = _0x27a5a1['files'][0x0], _0x4089ba = document[_0x4c2946(0x6e4)]('#world-book-checkboxes-container\x20input:checked'), _0x4fe04d = Array[_0x4c2946(0x5a1)](_0x4089ba)[_0x4c2946(0x7d4)](_0x22f7bc => _0x22f7bc[_0x4c2946(0x3cd)]), _0x5ef686 = { 'name': _0x3637f9['value'][_0x4c2946(0x87b)](), 'remark': _0x75c634[_0x4c2946(0x3cd)][_0x4c2946(0x87b)](), 'persona': _0x8d37f7[_0x4c2946(0x3cd)][_0x4c2946(0x87b)](), 'linkedWorldBookIds': _0x4fe04d, 'bubbleCss': document['getElementById']('char-edit-css')[_0x4c2946(0x3cd)][_0x4c2946(0x87b)](), 'avatarFrameUrl': document[_0x4c2946(0x653)](_0x4c2946(0x779))[_0x4c2946(0x3cd)][_0x4c2946(0x87b)](), 'userAvatarFrameUrl': document[_0x4c2946(0x653)](_0x4c2946(0x828))[_0x4c2946(0x3cd)][_0x4c2946(0x87b)]() }; if (!_0x5ef686[_0x4c2946(0x7d7)]) { _0x5929aa(_0x4c2946(0x5e9)); return; } try { if (_0x4c2946(0xaaa) !== _0x4c2946(0x984)) { const _0x4b3f2b = [_0x4c2946(0xb1a), _0x4c2946(0x51e), _0x4c2946(0xad0), 'sad', 'shy']; let _0x1f7e30 = _0x1a92b2; if (_0x1a92b2) { if (_0x4c2946(0x8c1) === _0x4c2946(0x8c1)) { const _0x300f98 = _0x1884b1[_0x4c2946(0x358)][_0x4c2946(0x6f9)](_0x42a410 => _0x42a410['id'] === _0x1a92b2); if (_0x300f98) { if ('xlGZE' !== _0x4c2946(0x8c8)) { _0x199313[_0x4c2946(0x5f0)](_0x4c2946(0xa92), _0x2df371); const _0x1bde3a = { 'role': 'assistant', 'content': _0x4c2946(0x6d1) + _0x3e5a2d[_0x4c2946(0xa53)], 'senderId': _0x4b7b15['id'], 'isOffline': _0xdff92f }; _0x282fad[_0x4c2946(0x589)][_0x4c2946(0x24d)](_0x1bde3a), _0x26bc1a(); } else Object['assign'](_0x300f98, _0x5ef686); } } else _0x22ce31('保存失败，你的表情包是不是太多了？'); } else { const _0x3d9b95 = 'char_' + Date[_0x4c2946(0x965)](); _0x1f7e30 = _0x3d9b95; const _0xe1cbe7 = { 'id': _0x3d9b95, ..._0x5ef686 }; _0xe1cbe7[_0x4c2946(0x99a)] = _0x48762f ? await _0x10d9fa(_0x48762f) : _0xe4a1db, _0x1884b1[_0x4c2946(0x358)][_0x4c2946(0x24d)](_0xe1cbe7); const _0x21e947 = { 'id': _0x4c2946(0x4ca) + _0x3d9b95, 'type': _0x4c2946(0xaa7), 'participantIds': [_0x3d9b95], 'listenTogetherSession': null }; _0x1884b1['chats'][_0x4c2946(0x24d)](_0x21e947); } const _0x17b33e = _0x1884b1[_0x4c2946(0x940)][_0x4c2946(0x6f9)](_0x4c1925 => _0x4c1925['type'] === _0x4c2946(0xaa7) && _0x4c1925[_0x4c2946(0x3d5)][_0x4c2946(0x1ac)](_0x1f7e30)); _0x17b33e && (_0x17b33e[_0x4c2946(0x70c)] = _0x13bf5e); if (_0x48762f) await _0x100c88('char_avatar_' + _0x1f7e30, _0x48762f); if (_0x142ff5) await _0x100c88(_0x4c2946(0xac9) + _0x1f7e30, _0x142ff5); if (_0x1c3cd5) await _0x100c88('char_offline_bg_' + _0x1f7e30, _0x1c3cd5); for (const _0x36a715 of _0x4b3f2b) { const _0x4d414f = document['getElementById'](_0x4c2946(0xadc) + _0x36a715 + _0x4c2946(0x2a7))['files'][0x0]; if (_0x4d414f) await _0x100c88('char_sprite_' + _0x36a715 + '_' + _0x1f7e30, _0x4d414f); } _0x480928(), _0x3ebe62(), _0x5929aa(_0x4c2946(0x6bb)), _0x13d883(_0x4c2946(0x842), _0x4c2946(0x670)); if (!_0x1a92b2) { if (_0x4c2946(0x2d9) !== _0x4c2946(0x8a9)) { const _0x2bf6d4 = 'chat_' + _0x1f7e30; _0x24f491(_0x2bf6d4), _0x32aad5(!![]); } else { const _0x2d1d03 = _0x576c23[_0x4c2946(0xb25)](_0x38b988, _0x4c2946(0x1f4)), _0xaf1ffe = _0x2d1d03[_0x4c2946(0x751)](_0x48ee89), _0x5dd786 = _0xaf1ffe[_0x4c2946(0x3dd)](); _0x5dd786[_0x4c2946(0x8ef)] = () => _0x72b60(_0x5dd786['result']), _0x5dd786[_0x4c2946(0x740)] = () => _0xd63a4d(_0x5dd786[_0x4c2946(0x5f0)]); } } } else _0x325cef['head'][_0x4c2946(0x8e4)](_0x4c2946(0x819), _0x4c2946(0x462)); } catch (_0x581025) { _0x4c2946(0x5ac) === _0x4c2946(0x5ac) ? (console['error'](_0x4c2946(0xac1), _0x581025), _0x5929aa('保存失败:\x20' + _0x581025['message'])) : _0x15f04a['click'](); } } function _0x32f09f() { const _0x22f824 = _0x5f58e0; if (_0x22f824(0x298) !== 'ZLpmh') { _0x495ee2['value'] = '', _0x1c1810[_0x22f824(0x9c2)] = ''; if (_0x1884b1[_0x22f824(0x358)]['length'] < 0x2) { if (_0x22f824(0x62b) !== 'VtKuW') { _0x5929aa('需要至少2个角色才能创建群聊。'); return; } else { let _0x562a18 = _0x30b0c8[_0x22f824(0x7f1)][_0x22f824(0x6f9)](_0x1bd56b => _0x1bd56b['characterId'] === _0x80606); !_0x562a18 && (_0x562a18 = { 'characterId': _0x3d8546, 'entries': [] }, _0x2b983b[_0x22f824(0x7f1)][_0x22f824(0x24d)](_0x562a18)); _0x562a18[_0x22f824(0xb3c)][_0x22f824(0x24d)]({ 'timestamp': _0x5b6a86[_0x22f824(0x965)](), 'author': _0x53edad, 'content': _0x1ad614 }), _0x4a8d7e(); const _0x1ddfdf = _0x562a18['entries']['length']; _0x4f03cc['diaryCurrentPage'] = _0x4e5799[_0x22f824(0x58f)](_0x1ddfdf / 0x2) - 0x1, _0x73921b(); } } _0x1884b1[_0x22f824(0x358)][_0x22f824(0xa30)](_0x4bd617 => { const _0x407aa6 = _0x22f824; if (_0x407aa6(0x826) !== _0x407aa6(0x826)) { if (_0x4eebc1 < 0x0 || _0x145b8d >= _0x1de5a9) return; _0x1da707['style'][_0x407aa6(0x72a)] = _0x407aa6(0x9f0) + _0x2dd33f * (0x64 / _0x5de23a) + '%)', _0x50ed92['forEach'](_0x4ea124 => _0x4ea124['classList']['remove']('active')), _0x2a5576[_0x28fcea][_0x407aa6(0xb7b)][_0x407aa6(0x428)](_0x407aa6(0x33f)), _0x308725 = _0x27586d, _0x70a3ae === 0x0 ? _0x249dbe[_0x407aa6(0x313)]['display'] = _0x407aa6(0x643) : _0x5029fb[_0x407aa6(0x313)][_0x407aa6(0x272)] = _0x407aa6(0xac5); } else { const _0x44bc81 = document[_0x407aa6(0x2da)]('li'); _0x44bc81[_0x407aa6(0x84e)] = _0x407aa6(0x405), _0x44bc81['innerHTML'] = _0x407aa6(0xa7b) + _0x4bd617['id'] + _0x407aa6(0x57b) + _0x4bd617['id'] + _0x407aa6(0x95c) + (_0x4bd617['avatar'] || _0xe4a1db) + _0x407aa6(0x72d) + _0x4bd617['id'] + _0x407aa6(0xb3f) + _0x4bd617['name'] + _0x407aa6(0x360), _0x1c1810[_0x407aa6(0x168)](_0x44bc81); } }), _0x13d883(_0x22f824(0x945), _0x22f824(0x532)); } else _0x5a533d(_0x16f72f[_0x22f824(0xa46)](_0x5175d4, _0x30c26b)); } function _0x42bc81() { const _0x37593c = _0x5f58e0, _0x160284 = _0x495ee2['value']['trim'](); if (!_0x160284) { _0x5929aa(_0x37593c(0x3ba)); return; } const _0x35be88 = Array[_0x37593c(0x5a1)](_0x1c1810[_0x37593c(0x6e4)](_0x37593c(0x755)))[_0x37593c(0x7d4)](_0x4f5a94 => _0x4f5a94[_0x37593c(0x2c4)]['id']); if (_0x35be88['length'] < 0x2) { _0x5929aa(_0x37593c(0x8cd)); return; } const _0x123980 = { 'id': _0x37593c(0x283) + Date['now'](), 'type': _0x37593c(0x2b7), 'name': _0x160284, 'participantIds': _0x35be88 }; _0x1884b1[_0x37593c(0x940)][_0x37593c(0x24d)](_0x123980), _0x1884b1[_0x37593c(0x9a8)] = _0x123980['id'], _0x480928(), _0x3ebe62(), _0x22d007(), _0x4f8e33(), _0x5929aa(_0x37593c(0x19a) + _0x160284 + '”已创建！'), _0x13d883(_0x37593c(0x842), 'groupChatCreate'); } _0x5ab55c[_0x5f58e0(0xacf)]('click', () => _0x49f3dc['click']()), _0x1cf891[_0x5f58e0(0xacf)]('click', _0x1efc8b), _0x49f3dc[_0x5f58e0(0xacf)]('change', _0x478b6e), _0x1540f5[_0x5f58e0(0xacf)]('click', _0x403bba), _0x285905[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x594899['classList'][_0x5f58e0(0x344)](_0x5f58e0(0x322))), _0x4324df[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x594899[_0x5f58e0(0xb7b)]['remove'](_0x5f58e0(0x322))), _0x1aed27[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x3c23e0 = _0x5f58e0; _0x3cfe08[_0x3c23e0(0x902)](), navigator['clipboard'][_0x3c23e0(0x3e0)](_0x3cfe08[_0x3c23e0(0x3cd)])[_0x3c23e0(0x8e7)](() => { const _0x4159bd = _0x3c23e0; 'HBIeI' !== _0x4159bd(0x6af) ? (_0x4b25d0[_0x4159bd(0x5f0)](_0x4159bd(0x91d) + _0x520549['id'] + _0x4159bd(0x354), _0x2120d), _0x19f343[_0x4159bd(0x74e)] = _0x3a5b9b[_0x4159bd(0x99a)] || _0x2b41e9) : _0x5929aa(_0x4159bd(0x46d)); })[_0x3c23e0(0x32a)](_0x476de9 => { const _0x52b976 = _0x3c23e0; _0x52b976(0x7e2) !== _0x52b976(0x7e2) ? _0x30f6c3 = _0x52b976(0x622) + _0x81620['id'] + _0x52b976(0x8b9) + (_0x1baad2['coverUrl'] || _0x5a3379) + _0x52b976(0x43f) + _0x1880aa[_0x52b976(0x70f)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x10802e[_0x52b976(0x6e9)] + _0x52b976(0x929) + (_0x47e7c6[_0x52b976(0xa36)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20' : _0x5929aa('复制失败了，哼。'); }); }), _0x535eb6[_0x5f58e0(0xacf)]('click', _0x5daa59), _0xce4c2b[_0x5f58e0(0xacf)]('click', _0x1a3dd6), _0x1bb201[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x35b3b8[_0x5f58e0(0xb7b)][_0x5f58e0(0x344)](_0x5f58e0(0x322))), _0x32c27f[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x35b3b8[_0x5f58e0(0xb7b)][_0x5f58e0(0x344)](_0x5f58e0(0x322))), _0x13a3cb[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x363924[_0x5f58e0(0x4f4)]()), _0x3d86b[_0x5f58e0(0xacf)]('click', () => _0x27a5a1['click']()), _0x363924[_0x5f58e0(0xacf)]('change', _0x2ea314 => { const _0x2121fb = _0x5f58e0; if (_0x2121fb(0x5ff) !== 'nEqWa') { const _0x11d00a = _0x2ea314[_0x2121fb(0xa4b)]['files'][0x0]; if (!_0x11d00a) return; const _0x539a2d = URL[_0x2121fb(0x264)](_0x11d00a); _0x13a3cb[_0x2121fb(0x313)][_0x2121fb(0x956)] = _0x2121fb(0xa38) + _0x539a2d + '\x27)'; } else { const _0x11dc4d = _0x26b31b[_0x2121fb(0x953)](_0x438786); _0x3aa55a = _0x2558e3['stringify'](_0x11dc4d), _0xb1e9f6['log'](_0x2121fb(0x386)); } }), _0x27a5a1[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), _0x35fc96 => { const _0xd9e034 = _0x5f58e0, _0x580d76 = _0x35fc96['target']['files'][0x0]; if (!_0x580d76) return; const _0x32ed2f = URL[_0xd9e034(0x264)](_0x580d76); _0x3d86b[_0xd9e034(0x313)]['backgroundImage'] = _0xd9e034(0xa38) + _0x32ed2f + '\x27)'; }), _0x7a5492[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x1eeb36[_0x5f58e0(0x4f4)]()), _0x3bbc99[_0x5f58e0(0xacf)]('click', () => { const _0x5329c6 = _0x5f58e0; localStorage['removeItem']('customFeedWallpaper'), _0x5a0f4b(), _0x5929aa(_0x5329c6(0x48c)); }), _0x1eeb36['addEventListener'](_0x5f58e0(0xb6d), async _0x426858 => { const _0x75bc4c = _0x5f58e0; if ('IMcaz' !== _0x75bc4c(0xad8)) { const _0x44cb04 = _0x426858[_0x75bc4c(0xa4b)][_0x75bc4c(0x53d)][0x0]; if (!_0x44cb04) return; try { if (_0x75bc4c(0x32d) !== _0x75bc4c(0x32d)) _0x2d90a2[_0x75bc4c(0x329)] = _0x1f6edf, _0x51895e(), _0x5cccdc(); else { const _0x174db9 = await _0x10d9fa(_0x44cb04); localStorage[_0x75bc4c(0x7db)](_0x75bc4c(0x3ef), _0x174db9), _0x5a0f4b(), _0x5929aa(_0x75bc4c(0x5ed)); } } catch (_0x433506) { _0x5929aa(_0x75bc4c(0x6d1) + _0x433506['message']); } } else { if (_0x26ab9b[_0x75bc4c(0x8a0)] === 0x0) return; _0x52deb4 = (_0x255955 - 0x1 + _0x477973[_0x75bc4c(0x8a0)]) % _0xea25f7[_0x75bc4c(0x8a0)], _0x3161c6(_0x592553[_0x3c38b1], _0xbe3df); } }), document[_0x5f58e0(0x653)](_0x5f58e0(0x1c8))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883('chat', _0x5f58e0(0x337))), document[_0x5f58e0(0x653)](_0x5f58e0(0x489))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x31f407); const _0x11de6b = document[_0x5f58e0(0x653)](_0x5f58e0(0x219)), _0x36d545 = document['getElementById'](_0x5f58e0(0x41e)); _0x11de6b[_0x5f58e0(0xacf)]('click', () => _0x36d545['click']()), _0x36d545[_0x5f58e0(0xacf)]('change', _0x512373 => { const _0x43306c = _0x5f58e0, _0x5a15d7 = _0x512373[_0x43306c(0xa4b)][_0x43306c(0x53d)][0x0]; if (!_0x5a15d7) return; const _0x58709d = URL['createObjectURL'](_0x5a15d7); _0x11de6b[_0x43306c(0x74e)] = _0x58709d, _0x11de6b[_0x43306c(0x3e1)] = () => { const _0xde185a = _0x43306c; 'hYtvw' === _0xde185a(0x495) ? _0x4217ab[_0xde185a(0x653)](_0xde185a(0x4af))[_0xde185a(0x4f4)]() : URL[_0xde185a(0x80e)](_0x58709d); }; }); const _0x47a8bd = document[_0x5f58e0(0x653)](_0x5f58e0(0x617))[_0x5f58e0(0x8fb)], _0x391c27 = document[_0x5f58e0(0x653)](_0x5f58e0(0x805)), _0x53417a = document[_0x5f58e0(0x653)]('group-bg-preview'); _0x47a8bd['addEventListener']('click', () => _0x391c27['click']()), _0x391c27[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), _0xebfad3 => { const _0x172eab = _0x5f58e0; if (_0x172eab(0xb32) === 'uTUKM') { const _0x3b6cf1 = _0xebfad3['target']['files'][0x0]; if (!_0x3b6cf1) return; const _0x1652be = URL[_0x172eab(0x264)](_0x3b6cf1); document['getElementById']('group-bg-preview')[_0x172eab(0x313)]['backgroundImage'] = _0x172eab(0xa38) + _0x1652be + '\x27)'; } else { const _0x134dcf = _0x1fa265(_0x3a950d[_0x172eab(0x86d)]); return _0x134dcf?.[_0x172eab(0x7d7)] || _0x172eab(0x47f); } }); const _0x4cabf9 = document[_0x5f58e0(0x795)](_0x5f58e0(0x292)), _0x38e11c = document[_0x5f58e0(0x653)]('group-world-book-checkboxes'); _0x4cabf9[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x26d285 => { const _0x29e4ff = _0x5f58e0; _0x29e4ff(0x8b6) === _0x29e4ff(0x20f) ? (_0x3044be[_0x29e4ff(0xb7b)][_0x29e4ff(0x344)]('active'), _0x4d6ec0[_0x29e4ff(0xb7b)][_0x29e4ff(0x428)](_0x29e4ff(0x33f)), _0x439d1b()) : (_0x26d285[_0x29e4ff(0xa80)](), _0x38e11c[_0x29e4ff(0xb7b)][_0x29e4ff(0xb4b)](_0x29e4ff(0x9fb)), _0x4cabf9['classList'][_0x29e4ff(0xb4b)](_0x29e4ff(0x7b2))); }), _0x38e11c[_0x5f58e0(0xacf)]('change', _0x41fa73), document['getElementById'](_0x5f58e0(0xb12))['addEventListener'](_0x5f58e0(0x4f4), _0x2a6e16), document[_0x5f58e0(0x653)]('group-delete-button')['addEventListener']('click', async () => { const _0x420c0e = _0x5f58e0; if (_0x420c0e(0x2fe) !== _0x420c0e(0x2fe)) { if (!_0x30515) return; const _0x328e5b = _0x26fc49[_0x420c0e(0x5f2)], _0x5658bd = _0x13b326(_0x328e5b); if (!_0x5658bd) return; const _0x2dbe39 = _0x319bdb(_0x6a501c[_0x420c0e(0x653)]('sprite-slider-x')[_0x420c0e(0x3cd)]), _0x409443 = _0x5a8ac0(_0x30461d[_0x420c0e(0x653)](_0x420c0e(0x9f3))[_0x420c0e(0x3cd)]), _0x550d96 = _0x4dc63c(_0x53eb62[_0x420c0e(0x653)](_0x420c0e(0x9c1))[_0x420c0e(0x3cd)]) / 0x64; _0x5658bd[_0x420c0e(0xa75)] = { 'x': _0x2dbe39, 'y': _0x409443, 'scale': _0x550d96 }; const _0x212381 = _0xb4a591[_0x420c0e(0x653)](_0x420c0e(0x290)), _0x1914bf = 0x50 * _0x550d96; _0x212381[_0x420c0e(0x313)][_0x420c0e(0x7da)] = _0x1914bf + '%', _0x212381[_0x420c0e(0x313)][_0x420c0e(0x62c)] = _0x1914bf + '%', _0x212381[_0x420c0e(0x313)]['left'] = _0x2dbe39 + '%', _0x212381[_0x420c0e(0x313)][_0x420c0e(0x86a)] = _0x409443 + '%', _0x212381[_0x420c0e(0x313)][_0x420c0e(0x72a)] = _0x420c0e(0x54a); } else { const _0xa53e37 = _0x2bf707(); if (!_0xa53e37 || _0xa53e37[_0x420c0e(0x8c3)] !== _0x420c0e(0x2b7)) return; const _0x1b2728 = await _0x9e00ac('确定要删除群聊“' + _0xa53e37[_0x420c0e(0x7d7)] + '”吗？此操作不可撤销。'); if (_0x1b2728) { if (_0x420c0e(0x89f) === _0x420c0e(0x89f)) _0x5a7d4e(_0xa53e37['id']), _0x5929aa(_0x420c0e(0x6e5)), _0x13d883(_0x420c0e(0x842)), _0x32aad5(![]); else { _0x368aae(![]), _0x1bd339(_0x420c0e(0x69a)); return; } } } }); const _0x4b22c8 = document[_0x5f58e0(0x795)](_0x5f58e0(0x6ee)), _0xb27dad = document[_0x5f58e0(0x653)](_0x5f58e0(0xa0a)); _0x4b22c8[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0xc35470 => { const _0x515df4 = _0x5f58e0; _0xc35470['stopPropagation'](), _0xb27dad[_0x515df4(0xb7b)][_0x515df4(0xb4b)](_0x515df4(0x9fb)), _0x4b22c8['classList']['toggle'](_0x515df4(0x7b2)); }), _0xb27dad['addEventListener'](_0x5f58e0(0xb6d), _0x2d897b), document[_0x5f58e0(0xacf)]('click', _0x552064 => { const _0x245fdd = _0x5f58e0; !document[_0x245fdd(0x795)](_0x245fdd(0x44d))[_0x245fdd(0x974)](_0x552064[_0x245fdd(0xa4b)]) && (_0xb27dad[_0x245fdd(0xb7b)]['remove']('visible'), _0x4b22c8['classList'][_0x245fdd(0x344)]('expanded')); }), _0x2dd775['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x2eebec = _0x5f58e0; _0x2eebec(0x75c) === _0x2eebec(0x75c) ? (_0x51e288(), _0x13d883(_0x2eebec(0x1d2), _0x2eebec(0x6fe))) : _0x4a615c['imageId'] = _0x53dbd5; }), document[_0x5f58e0(0x653)](_0x5f58e0(0x1f6))[_0x5f58e0(0xacf)]('click', () => _0x13d883(_0x5f58e0(0x6fe), 'worldBook')), document[_0x5f58e0(0x653)](_0x5f58e0(0x3be))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x2309d9()), document[_0x5f58e0(0x653)](_0x5f58e0(0x464))['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x509e9f = _0x5f58e0; if (_0x509e9f(0x7e3) !== 'uTTBs') _0x51e288(), _0x13d883(_0x509e9f(0x1d2), _0x509e9f(0xb05)); else { if (_0x5d2765) { const _0xd203cd = _0x23344c['createElement']('p'); _0xd203cd[_0x509e9f(0x9c2)] = _0x3ed90c, _0xd203cd[_0x509e9f(0x313)]['margin'] = '0', _0x314df2['appendChild'](_0xd203cd); } } }), document['getElementById'](_0x5f58e0(0x49d))[_0x5f58e0(0xacf)]('click', _0x56a802), document[_0x5f58e0(0x653)](_0x5f58e0(0x9f2))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x17d398), _0xca9b98[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883(_0x5f58e0(0x3ff), _0x5f58e0(0x6fe))), _0x148ea7[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883('home', 'wallpaper')), _0x34409e[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x5bd76f['click']()), _0x5bd76f['addEventListener'](_0x5f58e0(0xb6d), async _0x41c1b6 => { const _0x5d8d38 = _0x5f58e0; if (_0x5d8d38(0x812) !== 'kxzDM') { const _0x2caeb1 = _0x41c1b6[_0x5d8d38(0xa4b)][_0x5d8d38(0x53d)][0x0]; if (!_0x2caeb1) return; await _0xe07a1e(_0x2caeb1); } else { const _0x55dc5f = _0x5af33f[_0x5d8d38(0x3dd)](); _0x55dc5f['onsuccess'] = () => _0x1dd226(_0x55dc5f[_0x5d8d38(0x97f)]), _0x55dc5f[_0x5d8d38(0x740)] = () => _0x3113f0(_0x55dc5f[_0x5d8d38(0x5f0)]); } }), _0x469a9a[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x66421a = _0x5f58e0; _0x3ebe62(), _0x13d883(_0x66421a(0x842), _0x66421a(0x6fe)); }), _0x1ee668[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x298efc = _0x5f58e0; if (_0x298efc(0x93e) === 'vsVbq') { _0x191a1c(); const _0xdccc21 = (_0x1884b1[_0x298efc(0x2ec)][_0x298efc(0x5e8)] || '')[_0x298efc(0x1ac)](_0x48e921); _0x5b1ea1[_0x298efc(0x534)] = _0xdccc21, _0x13d883('settings', _0x298efc(0x6fe)); } else _0x19ba23['posts'] = [], _0x295a43(), _0x2e806d(), _0x59fdf7(_0x298efc(0x583)); }), _0x3298cd[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883(_0x5f58e0(0x6fe), 'settings')), _0x7240a4[_0x5f58e0(0xacf)]('click', () => { const _0x3a07c8 = _0x5f58e0; _0x5bcec0(), _0x13d883(_0x3a07c8(0x6fe), 'chat'); }), _0x3830cf[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x16140d = _0x5f58e0; _0x16140d(0x39f) === _0x16140d(0x7b0) ? _0x48d7d7[_0x16140d(0x313)][_0x16140d(0x956)] = _0x16140d(0xa38) + _0x435fb0 + '\x27)' : (_0x5bcec0(), _0x32aad5(![])); }), _0x18a1f1[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x94a9d1 = _0x5f58e0; _0x94a9d1(0x5bc) === _0x94a9d1(0x5bc) ? _0x13d883('chat', _0x94a9d1(0x670)) : _0x3a541f[_0x94a9d1(0x5f0)](_0x94a9d1(0x7fa), _0x17b3a6); }), _0x2573e2[_0x5f58e0(0xacf)]('click', () => { const _0x3da1d2 = _0x5f58e0; _0x1871ea[_0x3da1d2(0xb7b)]['add'](_0x3da1d2(0x322)); }), _0x4c6ae6[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0xa6a72()), _0x28149a[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x180c61); function _0x22727b(_0x258cf7) { const _0x2a976e = _0x5f58e0; if (!_0x258cf7 || _0x258cf7[_0x2a976e(0x8c3)] !== 'group') return; const _0x2101a9 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x2a976e(0xafb)][_0x2a976e(0x8e4)]('beforeend', _0x2101a9); const _0x1b1d70 = document['getElementById'](_0x2a976e(0x599)), _0xed2cb3 = _0x1b1d70[_0x2a976e(0x795)](_0x2a976e(0x340)), _0xd6cc1 = document['getElementById']('group-clear-history'), _0x22861d = document[_0x2a976e(0x653)](_0x2a976e(0x863)), _0x26b977 = document['getElementById'](_0x2a976e(0x4e1)), _0x5b57bb = document[_0x2a976e(0x653)](_0x2a976e(0x6ed)), _0x5e6d01 = document[_0x2a976e(0x653)](_0x2a976e(0xa8a)), _0x1a51dd = () => _0x1b1d70['remove'](); _0xd6cc1[_0x2a976e(0xacf)](_0x2a976e(0x4f4), async () => { const _0x2d6e83 = _0x2a976e; if (_0x2d6e83(0x7cf) === _0x2d6e83(0x4f2)) { if (_0x5c46ab[_0x2d6e83(0x8c3)] === 'touchstart') _0x4db911['preventDefault'](); _0x5c6d49(_0x383b3c(_0x119451, 0xa), _0x38e22a); } else { _0x1a51dd(); const _0x430043 = await _0x9e00ac(_0x2d6e83(0x2a3) + _0x258cf7[_0x2d6e83(0x7d7)] + '\x22\x20的聊天记录吗？此操作不可撤销。'); if (_0x430043) { if ('kWLKE' === 'kWLKE') { _0x258cf7['id'] === _0x1884b1[_0x2d6e83(0x9a8)] && (_0x2d6e83(0x17a) === _0x2d6e83(0x85e) ? _0x571bd1(_0x7a5e56, _0x8d741c) : (_0x5bcec0(), _0x1884b1['conversationHistory'] = [], _0x59f07e())); try { if (_0x2d6e83(0x9ef) === _0x2d6e83(0xb56)) { const _0x104ed8 = _0x117fd8['getElementById'](_0x2d6e83(0x3b6)), _0x3a9328 = _0x233cf3[_0x2d6e83(0x653)](_0x2d6e83(0xb26)), _0x5283a1 = _0xed86ec[_0x2d6e83(0x653)](_0x2d6e83(0x4c6)), _0x23e2bc = _0x1e1049[_0x2d6e83(0x653)]('widget-cover-art'), _0x25d663 = _0x3351f2; _0x25d663 && _0x25d663[_0x2d6e83(0x529)] ? (_0x3a9328['textContent'] = _0x25d663[_0x2d6e83(0x869)], _0x5283a1[_0x2d6e83(0x8f9)] = _0x25d663['artist'], _0x104ed8['classList']['add']('is-playing'), _0x104ed8[_0x2d6e83(0x313)][_0x2d6e83(0x3d0)](_0x2d6e83(0x972), _0x2d6e83(0x8f5) + _0x25d663[_0x2d6e83(0x544)] + ')')) : (_0x3a9328[_0x2d6e83(0x8f9)] = _0x2d6e83(0xab1), _0x5283a1[_0x2d6e83(0x8f9)] = '请在动态或聊天中播放', _0x104ed8['classList'][_0x2d6e83(0x344)](_0x2d6e83(0xa65)), _0x23e2bc[_0x2d6e83(0x313)]['setProperty'](_0x2d6e83(0x972), _0x2d6e83(0x643))); } else localStorage[_0x2d6e83(0x673)](_0x2d6e83(0x962) + _0x258cf7['id']), _0x5929aa('群聊\x22' + _0x258cf7[_0x2d6e83(0x7d7)] + '\x22\x20的聊天记录已清空。'); } catch (_0x5b1974) { if (_0x2d6e83(0x536) !== 'fLWxC') { const _0x53fa6c = _0x59f9c3[_0x2d6e83(0x440)](_0x4adeb3); _0x298a86[_0x2d6e83(0xb41)](_0x53fa6c) ? _0x4475fd = [..._0x1bb795, ..._0x53fa6c] : _0x40e257 = _0x1eefc7; } else console['error'](_0x2d6e83(0x24e) + _0x258cf7['id'], _0x5b1974), _0x5929aa(_0x2d6e83(0x57c)); } } else _0x23961c[_0x2d6e83(0xaa5)] = { 'response_mime_type': _0x2d6e83(0x6a0) }; } } }), _0x22861d[_0x2a976e(0xacf)](_0x2a976e(0x4f4), () => { const _0x52f76b = _0x2a976e; _0x1a51dd(), _0x5929aa(_0x52f76b(0x328)); }), _0x26b977[_0x2a976e(0xacf)]('click', async () => { const _0x5d1292 = _0x2a976e; _0x1a51dd(); const _0x8580a = prompt('请输入新的群名称：', _0x258cf7[_0x5d1292(0x7d7)]); if (_0x8580a && _0x8580a[_0x5d1292(0x87b)]() && _0x8580a !== _0x258cf7[_0x5d1292(0x7d7)]) { if (_0x5d1292(0x4fc) !== _0x5d1292(0x4a0)) _0x258cf7[_0x5d1292(0x7d7)] = _0x8580a[_0x5d1292(0x87b)](), _0x480928(), _0x3ebe62(), _0x22d007(), _0x5929aa(_0x5d1292(0x381) + _0x258cf7[_0x5d1292(0x7d7)] + '\x22。'); else { _0x1fb9fd(_0x5d1292(0x7c1)); return; } } }), _0x5b57bb[_0x2a976e(0xacf)]('click', async () => { const _0x529b06 = _0x2a976e; _0x1a51dd(); const _0x586503 = await _0x9e00ac('确定要删除群聊\x22' + _0x258cf7[_0x529b06(0x7d7)] + '\x22\x20吗？所有聊天记录将被永久删除。'); _0x586503 && (_0x5a7d4e(_0x258cf7['id']), _0x5929aa(_0x529b06(0x5eb) + _0x258cf7[_0x529b06(0x7d7)] + _0x529b06(0x483)), _0x32aad5(![])); }), _0xed2cb3['addEventListener'](_0x2a976e(0x4f4), _0x1a51dd), _0x5e6d01[_0x2a976e(0xacf)](_0x2a976e(0x4f4), _0x1a51dd); } _0x53fe2e[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x44b095 = _0x5f58e0, _0x3feb4a = _0x2bf707(); if (_0x3feb4a && _0x3feb4a[_0x44b095(0x8c3)] === _0x44b095(0xaa7)) _0x5b7355(_0x3feb4a[_0x44b095(0x3d5)][0x0]); else { if (_0x3feb4a && _0x3feb4a[_0x44b095(0x8c3)] === _0x44b095(0x2b7)) { if (_0x44b095(0x9a7) === _0x44b095(0x9a7)) _0x41d4c5(_0x3feb4a['id']); else { _0x2fe75('至少要保留一个用户。'); return; } } } }), _0x8185a2[_0x5f58e0(0xacf)]('keydown', _0x221f56 => { const _0xaf85f8 = _0x5f58e0; _0xaf85f8(0x84f) === 'WnJNj' ? _0x221f56['key'] === _0xaf85f8(0x4de) && !_0x221f56['shiftKey'] && (_0x221f56['preventDefault'](), _0xa6a72()) : (_0x585c15(![]), _0xd18e67['error'](_0xaf85f8(0xb15), _0x647011), _0x12e6f9('导入失败:\x20' + _0x6b4cc['message'])); }); const _0x2e96f3 = () => _0x1871ea['classList'][_0x5f58e0(0x344)](_0x5f58e0(0x322)); _0x48b283[_0x5f58e0(0xacf)]('click', _0x2e96f3), _0x5615fe['addEventListener'](_0x5f58e0(0x4f4), _0x2e96f3), _0xeb20de['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x310b29 = _0x5f58e0; if (_0x310b29(0x1b6) === 'PaRTI') { _0x48da72(_0x310b29(0x5ee)); return; } else _0x2e96f3(), _0x5b7355(); }), _0x4a0fbe[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { _0x2e96f3(), _0x32f09f(); }), _0xa28caf['addEventListener']('click', () => { const _0x5f59a7 = _0x5f58e0; if ('LZEBq' === _0x5f59a7(0x7c6)) _0x13d883(_0x5f59a7(0x842), _0x5f59a7(0x945)), _0x32aad5(![]); else { const _0x3b8b38 = _0x3f4e78(); if (_0x3b8b38 && _0x3b8b38['type'] === 'private') _0x11730c(_0x3b8b38[_0x5f59a7(0x3d5)][0x0]); else _0x3b8b38 && _0x3b8b38[_0x5f59a7(0x8c3)] === _0x5f59a7(0x2b7) && _0x34a9e7(_0x3b8b38['id']); } }), _0x45aefd[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x42bc81), _0x38e926[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x3b1ac8 = _0x5f58e0; _0x52300e['classList'][_0x3b1ac8(0xb4b)](_0x3b1ac8(0x322)), _0x52300e[_0x3b1ac8(0xb7b)][_0x3b1ac8(0x974)](_0x3b1ac8(0x322)) && (_0x319ce7['scrollTop'] = _0x319ce7['scrollHeight']); }), _0x1dd942[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x359b11[_0x5f58e0(0x4f4)]()); const _0x371b45 = document['getElementById'](_0x5f58e0(0x308)); _0x359b11[_0x5f58e0(0xacf)]('change', _0x33d5cf), _0x371b45['addEventListener'](_0x5f58e0(0x4f4), _0x5c24d8), _0x3257b6[_0x5f58e0(0xacf)]('click', _0xda175a), _0x4bcb19[_0x5f58e0(0xacf)]('click', _0x5c45f3), _0x1c3319[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x195ed2), _0x3408ca[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x2a6e16), _0x3e6305[_0x5f58e0(0xacf)]('click', async () => { const _0x1935be = _0x5f58e0, _0x1630ae = _0xbc58d3[_0x1935be(0x3cd)]; if (!_0x1630ae) return; const _0x30d6d5 = _0x21051e(_0x1630ae); if (!_0x30d6d5) return; const _0x20e320 = await _0x9e00ac(_0x1935be(0x75a) + _0x30d6d5['name'] + _0x1935be(0x326)); if (_0x20e320) { if ('TvFtR' !== _0x1935be(0x807)) return _0xf09c5['error'](_0x1935be(0x194)), null; else _0x96cc06(_0x1630ae), _0x5929aa(_0x1935be(0x32c) + _0x30d6d5[_0x1935be(0x7d7)] + '”已删除。'), _0x13d883(_0x1935be(0x842), _0x1935be(0x670)), _0x32aad5(![]); } }), _0x3864d3[_0x5f58e0(0xacf)](_0x5f58e0(0x49e), () => { const _0x47eb89 = _0x5f58e0; if (_0x47eb89(0x533) !== _0x47eb89(0x504)) { const _0x5573df = _0x3864d3[_0x47eb89(0x3cd)]['trim']()['includes'](_0x48e921); _0x5b1ea1[_0x47eb89(0x534)] = _0x5573df; } else { const _0x811ba7 = (_0x6b3d31 - _0x424205) / (0x3e8 * 0x3c); _0x811ba7 < 0x3c ? _0xb9aac7 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x322580 += '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概' + _0x70f3b5['round'](_0x811ba7 / 0x3c) + '小时前），可以简单问候一下对方现在的状态。\x0a'; } }); async function _0x464912() { const _0x44b8d2 = _0x5f58e0; if (_0x44b8d2(0x7ce) === 'jCSQw') { const _0x120eea = _0x3864d3['value']['trim'](), _0x29c02d = _0x51b0f6['value'][_0x44b8d2(0x87b)](); if (!_0x120eea || !_0x29c02d) { _0x5929aa('请先输入\x20API\x20接口地址和密钥。'); return; } const _0x11cc52 = _0x120eea[_0x44b8d2(0xac6)](/\/+$/, ''), _0x44338f = _0x11cc52 + _0x44b8d2(0x58d); _0x5b1ea1[_0x44b8d2(0x534)] = !![], _0x5b1ea1['textContent'] = _0x44b8d2(0x3ec), _0x298ad0['classList'][_0x44b8d2(0x344)](_0x44b8d2(0x322)); try { const _0x299e91 = await fetch(_0x44338f, { 'headers': { 'Authorization': 'Bearer\x20' + _0x154dae(_0x29c02d) } }); if (!_0x299e91['ok']) throw new Error('服务器错误:\x20' + _0x299e91[_0x44b8d2(0x4da)]); const _0x2c5429 = await _0x299e91[_0x44b8d2(0x87e)](), _0x5cea13 = (_0x2c5429['data'] || _0x2c5429)[_0x44b8d2(0x7d4)](_0x4f2601 => _0x4f2601['id'])[_0x44b8d2(0x9ec)](); if (_0x5cea13['length'] > 0x0) { if ('NeiVl' === _0x44b8d2(0x1bf)) _0x298ad0['innerHTML'] = '', _0x5cea13[_0x44b8d2(0xa30)](_0x1e7043 => { const _0x9dd44d = _0x44b8d2, _0x1c82f2 = document[_0x9dd44d(0x2da)](_0x9dd44d(0x1f9)); _0x1c82f2['textContent'] = _0x1e7043, _0x1c82f2[_0x9dd44d(0xacf)](_0x9dd44d(0x4f4), () => { const _0x232474 = _0x9dd44d; _0x232474(0x2df) === 'bVdAt' ? (_0x355f4f[_0x232474(0xa17)]['forceWhiteClock'] = _0x527943[_0x232474(0x65f)], _0x1c5af9(), _0x192b2b()) : (_0x2863b2[_0x232474(0x3cd)] = _0x1e7043, _0x298ad0[_0x232474(0xb7b)]['remove'](_0x232474(0x322))); }), _0x298ad0[_0x9dd44d(0x168)](_0x1c82f2); }), _0x298ad0[_0x44b8d2(0xb7b)]['add'](_0x44b8d2(0x322)), _0x5929aa(_0x44b8d2(0x3a7) + _0x5cea13[_0x44b8d2(0x8a0)] + _0x44b8d2(0x66e)); else { _0x5229cf['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', _0x4952a3[_0x44b8d2(0x9c2)] = _0x44b8d2(0x81c), _0x374a5a[_0x44b8d2(0x653)](_0x44b8d2(0x3c4))[_0x44b8d2(0xacf)](_0x44b8d2(0x4f4), _0x3c8a86), _0x38aa5f['getElementById'](_0x44b8d2(0x855))[_0x44b8d2(0xacf)]('click', _0xad9f24); return; } } else _0x5929aa(_0x44b8d2(0x868)); } catch (_0x3bf002) { if (_0x44b8d2(0x810) === 'JKTsc') _0x5929aa('获取模型失败:\x20' + _0x3bf002['message'] + _0x44b8d2(0xa6d)); else { const _0x22311f = _0x1724e2[_0x44b8d2(0x2da)](_0x44b8d2(0x1f9)); _0x22311f[_0x44b8d2(0x84e)] = _0x44b8d2(0x6c8), _0x22311f[_0x44b8d2(0x9c2)] = _0x44b8d2(0x345) + (_0x4ede75[_0x44b8d2(0xb23)] || _0x3303c1) + _0x44b8d2(0xa6b) + _0x2097f6[_0x44b8d2(0x70f)] + _0x44b8d2(0xa84) + _0x2a4be9['artist'] + _0x44b8d2(0x62d), _0x22311f[_0x44b8d2(0x795)]('.remove-attachment-btn')[_0x44b8d2(0x5c8)] = () => _0x191193(_0x44b8d2(0x35c)), _0x2b7d54['appendChild'](_0x22311f); } } finally { _0x44b8d2(0x1a8) !== _0x44b8d2(0x1a8) ? _0x7b8bbd(_0x4f48b7['id']) : (_0x5b1ea1[_0x44b8d2(0x534)] = ![], _0x5b1ea1[_0x44b8d2(0x8f9)] = '获取'); } } else { const _0x30ad7d = _0xf1dd36[_0x44b8d2(0xb25)]('images', 'readwrite'), _0x22150c = _0x30ad7d[_0x44b8d2(0x751)](_0x44b8d2(0xa7f)), _0x4b08d3 = _0x22150c['put']({ 'id': _0x5264d4, 'blob': _0x1df308 }); _0x4b08d3['onsuccess'] = () => _0x3b9806(_0x4b08d3[_0x44b8d2(0x97f)]), _0x4b08d3[_0x44b8d2(0x740)] = () => _0x2b5127(_0x4b08d3['error']); } } _0x5b1ea1['addEventListener'](_0x5f58e0(0x4f4), _0x4484df => { const _0x48e347 = _0x5f58e0; _0x4484df[_0x48e347(0xa80)](), _0x464912(); }), document[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x2df791 => { const _0x33599e = _0x5f58e0; if ('zfokr' !== _0x33599e(0x1c3)) { const _0x48c1ae = _0x3f15f9(_0x431e7a[_0x33599e(0xb63)]); _0x48c1ae && (_0x4d5414 = _0x48c1ae['name'], _0x1697d3 = _0x48c1ae[_0x33599e(0x99a)]); } else !_0x298ad0['contains'](_0x2df791['target']) && _0x2df791[_0x33599e(0xa4b)] !== _0x2863b2 && _0x2df791[_0x33599e(0xa4b)] !== _0x5b1ea1 && _0x298ad0['classList'][_0x33599e(0x344)]('show'); }); async function _0x10d9fa(_0x3f8da7) { const _0x712fc4 = _0x5f58e0; return _0x712fc4(0x7df) === _0x712fc4(0xa19) ? _0x4a6cab(new _0xec838c(_0x712fc4(0x797))) : await _0x4f9511(_0x3f8da7, 0x190, 0.85); } _0x37b891[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x52accd[_0x5f58e0(0x4f4)]()), _0x52accd[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), async _0x5e7148 => { const _0x254b89 = _0x5f58e0, _0x17a82a = _0x5e7148[_0x254b89(0xa4b)][_0x254b89(0x53d)][0x0]; if (!_0x17a82a) return; try { if (_0x254b89(0x6ac) !== _0x254b89(0x5bb)) { const _0x1f3708 = await _0x10d9fa(_0x17a82a), _0x2dab41 = document[_0x254b89(0x653)](_0x254b89(0x485)); _0x2dab41[_0x254b89(0x313)][_0x254b89(0x956)] = _0x254b89(0xa38) + _0x1f3708 + '\x27)', _0x2dab41[_0x254b89(0x2c4)]['newAvatar'] = _0x1f3708; } else { const _0x70a8fd = _0x5dea3f[_0x254b89(0x5e5)][_0x254b89(0x7d4)](_0x54bccd => _0x204af1(_0x54bccd)?.['name'] || '未知')[_0x254b89(0x359)]('、'), _0x32db06 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>'; _0x5874af = '<div\x20class=\x22post-likes\x22>' + _0x32db06 + '\x20' + _0x70a8fd + _0x254b89(0x681); } } catch (_0x23331a) { if (_0x254b89(0x498) === _0x254b89(0x498)) _0x5929aa(_0x254b89(0x6d1) + _0x23331a[_0x254b89(0xa53)]); else { if (_0x533269 === null) return; const _0x5d1cb4 = _0x383363[_0x254b89(0x3cd)]['trim'](); if (_0x5d1cb4 === '') { _0x1ef225(); return; } const _0x2441b2 = _0x31f675['conversationHistory'][_0x445359]; _0x2441b2 && (_0x2441b2[_0x254b89(0x329)] = _0x5d1cb4, _0x1c9696(), _0x3d019a()), _0xcd54c8[_0x254b89(0xb7b)][_0x254b89(0x344)](_0x254b89(0x322)), _0x558876 = null; } } }), _0xb6e1d2[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x4c5d6f[_0x5f58e0(0x4f4)]()), _0x4c5d6f[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), async _0x4f9594 => { const _0x2af200 = _0x5f58e0, _0x5f2cdf = _0x4f9594[_0x2af200(0xa4b)][_0x2af200(0x53d)][0x0]; if (!_0x5f2cdf) return; try { if ('Uehhy' === _0x2af200(0x446)) _0xb6e1d2['src'] = await _0x10d9fa(_0x5f2cdf); else { if (_0x50fb52[_0x2af200(0x7d7)] === 'AbortError') return _0x24c792[_0x2af200(0xace)](_0x2af200(0x3b0)), ''; throw _0xa5a399; } } catch (_0x367da1) { _0x5929aa(_0x2af200(0x6d1) + _0x367da1['message']); } }); function _0x54a5bd() { const _0x5d2cec = _0x5f58e0; _0x52300e['innerHTML'] = '', _0x356d37[_0x5d2cec(0xa30)](_0x14fbf6 => { const _0x684855 = _0x5d2cec, _0x1fa17d = document[_0x684855(0x2da)](_0x684855(0x7fb)); _0x1fa17d[_0x684855(0x74e)] = _0x14fbf6[_0x684855(0x51a)], _0x1fa17d['loading'] = 'lazy', _0x1fa17d[_0x684855(0x869)] = _0x14fbf6['name'], _0x1fa17d[_0x684855(0xb7b)][_0x684855(0x428)](_0x684855(0x179)), _0x1fa17d[_0x684855(0xacf)](_0x684855(0x4f4), () => _0x192871(_0x14fbf6)), _0x52300e[_0x684855(0x168)](_0x1fa17d); }); } async function _0x101378(_0x5501b2) { const _0x5d5412 = _0x5f58e0, _0x306665 = await _0x9e00ac('确定要删除这个安排吗？此操作不可撤销。'); if (!_0x306665) return; const _0x4e2888 = _0x1884b1['calendarEvents'][_0x5d5412(0x6dc)](_0x2554ac => _0x2554ac['id'] === _0x5501b2); _0x4e2888 > -0x1 && (_0x1884b1[_0x5d5412(0xa9d)]['splice'](_0x4e2888, 0x1), _0x480928(), _0xecaa8(), _0x20e8d7(), _0x2f2ff7(), _0x5929aa(_0x5d5412(0x3e3))); } let _0xd31069 = null; function _0x3a0039(_0x207155) { const _0x5c986e = _0x5f58e0; if (_0xd31069) clearTimeout(_0xd31069); const _0x248a5d = _0x207155[_0x5c986e(0xa4b)][_0x5c986e(0x546)](_0x5c986e(0x5a5)); if (!_0x248a5d) return; const _0xa9249f = _0x248a5d[_0x5c986e(0x2c4)]['id']; if (!_0xa9249f) return; const _0x401287 = () => { _0xd31069 = setTimeout(() => { const _0x10696f = _0x493f; if (_0x207155[_0x10696f(0x8c3)] === _0x10696f(0x65a)) _0x207155['preventDefault'](); _0x101378(_0xa9249f); }, 0x320); }, _0xc4e69f = () => { if (_0xd31069) clearTimeout(_0xd31069); }; document['addEventListener'](_0x5c986e(0x5a7), _0xc4e69f, { 'once': !![] }), document['addEventListener'](_0x5c986e(0x898), _0xc4e69f, { 'once': !![] }), document[_0x5c986e(0xacf)](_0x5c986e(0x242), _0xc4e69f, { 'once': !![] }), document[_0x5c986e(0xacf)](_0x5c986e(0x2e5), _0xc4e69f, { 'once': !![] }), _0x401287(); } function _0x476781(_0x75e764) { const _0x575b8b = _0x5f58e0, _0x5dc41b = _0x1884b1['chats'][_0x575b8b(0x6f9)](_0x14e9c3 => _0x14e9c3[_0x575b8b(0x3d5)][_0x575b8b(0x1ac)](_0x75e764)); if (!_0x5dc41b) return ''; const _0x5a3e54 = _0x4079e8(_0x5dc41b['id']), _0x5d14e9 = _0x1884b1[_0x575b8b(0xa9d)]['filter'](_0x41573c => _0x41573c[_0x575b8b(0xb03)] === _0x5a3e54['id'] || !_0x41573c['userId']); if (_0x5d14e9[_0x575b8b(0x8a0)] === 0x0) return ''; const _0x14f5c5 = _0x5d14e9[_0x575b8b(0x7d4)](_0x31d360 => { const _0x1bd3b1 = _0x575b8b, _0x3bfcb6 = _0x31d360['type'] === _0x1bd3b1(0x687) ? '纪念日' : '待办'; return _0x1bd3b1(0x1c2) + _0x3bfcb6 + ']\x20' + _0x31d360[_0x1bd3b1(0x1f5)] + ':\x20' + _0x31d360[_0x1bd3b1(0x329)]; })[_0x575b8b(0x359)]('\x0a'); return _0x575b8b(0x20b) + _0x5a3e54[_0x575b8b(0x7d7)] + _0x575b8b(0x731) + _0x14f5c5; } let _0x351dce = { 'currentDate': new Date(), 'selectedDate': _0x668643() }; function _0x5556c2() { const _0x19526d = _0x5f58e0; if (_0x19526d(0x975) !== 'FJAtn') { document[_0x19526d(0x653)](_0x19526d(0x919))[_0x19526d(0xacf)](_0x19526d(0x4f4), () => { const _0x5640c4 = _0x19526d; if ('rnewg' !== _0x5640c4(0x251)) _0xecaa8(), _0x13d883('calendar', _0x5640c4(0x6fe)); else { const _0x574244 = _0x1babc7[_0x5640c4(0x795)](_0x5640c4(0x906) + _0x16b67d); if (_0x574244) _0x574244[_0x5640c4(0x65f)] = !![]; } }), document[_0x19526d(0x653)](_0x19526d(0x889))['addEventListener'](_0x19526d(0x4f4), () => _0x13d883(_0x19526d(0x6fe), _0x19526d(0x667))), document[_0x19526d(0x653)](_0x19526d(0x42f))[_0x19526d(0xacf)](_0x19526d(0x4f4), () => { const _0xdeabd0 = _0x19526d; _0xdeabd0(0x82d) !== 'jOCGB' ? _0x7d70c5 += _0xdeabd0(0x72c) + _0x34d826['round'](_0x1bf9da / 0x3c) + _0xdeabd0(0x97b) : (_0x351dce[_0xdeabd0(0x1f8)][_0xdeabd0(0xa68)](_0x351dce[_0xdeabd0(0x1f8)][_0xdeabd0(0x978)]() - 0x1), _0xecaa8()); }), document[_0x19526d(0x653)](_0x19526d(0x90f))[_0x19526d(0xacf)](_0x19526d(0x4f4), () => { const _0x560946 = _0x19526d; if ('ExsYO' === _0x560946(0x24a)) _0x351dce[_0x560946(0x1f8)]['setMonth'](_0x351dce[_0x560946(0x1f8)][_0x560946(0x978)]() + 0x1), _0xecaa8(); else { const _0x36f908 = _0x34014e[_0x560946(0x653)]('daily-expenses-list'), _0x4382cb = _0x47502b[_0x560946(0x653)](_0x560946(0x3b2)), _0x2d82ed = new _0x4f2e1b(), _0xe396c9 = _0x12f7ea['accountingData']['filter'](_0x1bf8a8 => new _0x47ce62(_0x1bf8a8[_0x560946(0x1af)])[_0x560946(0x65b)]() === _0x2d82ed[_0x560946(0x65b)]()); if (_0xe396c9[_0x560946(0x8a0)] === 0x0) { _0x36f908[_0x560946(0x9c2)] = _0x560946(0x1ee), _0x4382cb['innerHTML'] = ''; return; } _0x36f908[_0x560946(0x9c2)] = '', _0xe396c9[_0x560946(0x9ec)]((_0x419b26, _0x458dc1) => _0x458dc1[_0x560946(0x1af)] - _0x419b26[_0x560946(0x1af)])[_0x560946(0xa30)](_0x175477 => { const _0x33099d = _0x560946, _0x28a3a1 = _0x3b8662[_0x33099d(0x2da)]('div'); _0x28a3a1[_0x33099d(0x84e)] = _0x33099d(0x657), _0x28a3a1[_0x33099d(0x9c2)] = _0x33099d(0x7be) + _0x175477[_0x33099d(0x3ed)] + _0x33099d(0x793) + _0x175477[_0x33099d(0x8d0)]['toFixed'](0x2) + _0x33099d(0x86c) + _0x175477['id'] + _0x33099d(0x949), _0x36f908['appendChild'](_0x28a3a1); }), _0x4382cb && (_0x4382cb[_0x560946(0x9c2)] = _0x560946(0x63a), _0x1b1082[_0x560946(0x653)](_0x560946(0x339))[_0x560946(0xacf)](_0x560946(0x4f4), _0x535f63)); } }), document[_0x19526d(0x653)](_0x19526d(0x285))[_0x19526d(0xacf)]('click', () => { const _0x446e65 = _0x19526d; if (_0x446e65(0x217) === _0x446e65(0x36d)) return _0x446e65(0xa4a) + _0x1f8dc2; else _0x351dce[_0x446e65(0x1f8)] = new Date(), _0x351dce[_0x446e65(0x42c)] = _0x668643(), _0xecaa8(); }), document[_0x19526d(0x653)](_0x19526d(0xb33))[_0x19526d(0xacf)](_0x19526d(0x4f4), () => { const _0x3a6a86 = _0x19526d; _0x3ff2c5(_0x351dce[_0x3a6a86(0x42c)]); }), document[_0x19526d(0x653)]('save-event-button')['addEventListener'](_0x19526d(0x4f4), _0x3c98f0), document[_0x19526d(0x653)](_0x19526d(0x706))[_0x19526d(0xacf)](_0x19526d(0x4f4), () => document['getElementById'](_0x19526d(0xab3))['classList'][_0x19526d(0x344)](_0x19526d(0x322))), document['getElementById'](_0x19526d(0x484))['addEventListener']('click', () => document[_0x19526d(0x653)]('add-event-modal')['classList'][_0x19526d(0x344)](_0x19526d(0x322))); const _0x305d96 = document[_0x19526d(0x653)](_0x19526d(0x430)); _0x305d96[_0x19526d(0xacf)](_0x19526d(0x8b3), _0x3a0039), _0x305d96[_0x19526d(0xacf)]('touchstart', _0x3a0039, { 'passive': ![] }); } else { const _0x1054e0 = _0x493a56(_0x247182[_0x19526d(0x5f2)]); _0x1054e0 && (delete _0x1054e0[_0x19526d(0xa75)], _0x160f06(), _0xb552b7(_0x1054e0['id'], _0x19526d(0xb1a)), _0x290d49(_0x19526d(0x9c0)), _0x4faeed(!![])); } } function _0xecaa8() { const _0x5f6672 = _0x5f58e0; if (_0x5f6672(0xaf0) !== _0x5f6672(0xaf0)) _0x317832[_0x5f6672(0xa54)] = ![], _0x3c7d09(![]); else { const _0xf37e9c = _0x351dce[_0x5f6672(0x1f8)][_0x5f6672(0x374)](), _0x2e5333 = _0x351dce['currentDate']['getMonth'](); document[_0x5f6672(0x653)]('calendar-header-title')[_0x5f6672(0x8f9)] = _0xf37e9c + '年\x20' + (_0x2e5333 + 0x1) + '月', _0x3accd8(_0xf37e9c, _0x2e5333), _0x114392(_0x351dce[_0x5f6672(0x42c)]); } } function _0x2f2ff7() { const _0x17a427 = _0x5f58e0, _0x1481ff = document[_0x17a427(0x653)](_0x17a427(0x160)); if (!_0x1481ff) return; const _0x4333cb = _0x668643(), _0x2ab66e = _0x1884b1[_0x17a427(0xa9d)]['filter'](_0x44f86f => _0x44f86f['date'] === _0x4333cb && _0x44f86f['type'] === _0x17a427(0xa2c)); _0x1481ff[_0x17a427(0x9c2)] = '', _0x2ab66e['length'] > 0x0 ? _0x2ab66e[_0x17a427(0xa30)](_0x26f07a => { const _0x2b5831 = _0x17a427, _0x1e5ad1 = document[_0x2b5831(0x2da)](_0x2b5831(0x1f9)); _0x1e5ad1[_0x2b5831(0x84e)] = _0x2b5831(0x8f4), _0x1e5ad1['textContent'] = _0x26f07a['content'], _0x1481ff[_0x2b5831(0x168)](_0x1e5ad1); }) : _0x17a427(0x1c4) !== _0x17a427(0x92e) ? _0x1481ff['innerHTML'] = '<span\x20style=\x22opacity:\x200.6;\x22>无</span>' : _0x2ebaef[_0x17a427(0xb7b)]['remove']('show'); } function _0x3accd8(_0x13c09e, _0x5b7c1e) { const _0x46a4aa = _0x5f58e0, _0x305479 = document[_0x46a4aa(0x653)](_0x46a4aa(0x461)); _0x305479[_0x46a4aa(0x9c2)] = ''; const _0x2f0166 = new Date(_0x13c09e, _0x5b7c1e, 0x1)[_0x46a4aa(0x5df)](), _0x1c27d6 = new Date(_0x13c09e, _0x5b7c1e + 0x1, 0x0)[_0x46a4aa(0x8ff)](), _0x169de1 = new Date()[_0x46a4aa(0x5db)]()[_0x46a4aa(0x334)]('T')[0x0]; for (let _0x22b46a = 0x0; _0x22b46a < _0x2f0166; _0x22b46a++) { if (_0x46a4aa(0x2be) !== 'zFPvQ') _0x305479[_0x46a4aa(0x168)](document[_0x46a4aa(0x2da)]('div')); else { _0x494fec[_0x46a4aa(0x3cd)] = _0x46a4aa(0x66a); return; } } for (let _0x8bd0ea = 0x1; _0x8bd0ea <= _0x1c27d6; _0x8bd0ea++) { if (_0x46a4aa(0x2ef) === 'bTOfk') { const _0x906ba3 = document['createElement'](_0x46a4aa(0x1f9)); _0x906ba3[_0x46a4aa(0x84e)] = _0x46a4aa(0x636); const _0x17f143 = _0x13c09e + '-' + String(_0x5b7c1e + 0x1)[_0x46a4aa(0xa83)](0x2, '0') + '-' + String(_0x8bd0ea)[_0x46a4aa(0xa83)](0x2, '0'); if (_0x17f143 === _0x169de1) _0x906ba3['classList']['add']('is-today'); if (_0x17f143 === _0x351dce[_0x46a4aa(0x42c)]) _0x906ba3['classList'][_0x46a4aa(0x428)](_0x46a4aa(0x4ed)); const _0x564382 = document[_0x46a4aa(0x2da)]('span'); _0x564382[_0x46a4aa(0x84e)] = _0x46a4aa(0x234), _0x564382[_0x46a4aa(0x8f9)] = _0x8bd0ea, _0x906ba3[_0x46a4aa(0x168)](_0x564382); const _0x56a2ba = _0x1884b1['calendarEvents'][_0x46a4aa(0x776)](_0x2fb71a => _0x2fb71a['date'] === _0x17f143); if (_0x56a2ba[_0x46a4aa(0x8a0)] > 0x0) { const _0x2791b9 = document['createElement'](_0x46a4aa(0x1f9)); _0x2791b9['className'] = _0x46a4aa(0x635), _0x906ba3[_0x46a4aa(0x168)](_0x2791b9); } _0x906ba3[_0x46a4aa(0xacf)]('click', () => { const _0x4e9af7 = _0x46a4aa; _0x351dce[_0x4e9af7(0x42c)] = _0x17f143, _0xecaa8(); }), _0x305479['appendChild'](_0x906ba3); } else _0x368a21[_0x46a4aa(0x497)] = _0x29cd40[_0x46a4aa(0x244)]; } } function _0x114392(_0x532a48) { const _0x5c9c29 = _0x5f58e0; if ('BVGrq' === 'euMEy') { const _0x3899a3 = _0x35335c[_0x5c9c29(0xaab)](); if (_0x1e22ea[_0x5c9c29(0x942)](_0x47bdd2 => _0x3899a3['startsWith'](_0x47bdd2))) { const _0xc17e05 = _0x461f5d[_0x5243b1]; if (typeof _0xc17e05 === 'string') _0x29a297[_0x5c9c29(0x24d)](_0xc17e05); if (_0x168c2e['isArray'](_0xc17e05)) _0xc17e05[_0x5c9c29(0xa30)](_0x53c505 => { const _0x80614 = _0x5c9c29; if (typeof _0x53c505 === _0x80614(0x4b6)) _0x465d8b[_0x80614(0x24d)](_0x53c505); }); } } else { const _0x46e8c1 = document[_0x5c9c29(0x653)]('todo-list'), _0x5b52b2 = document[_0x5c9c29(0x653)](_0x5c9c29(0x3d7)); _0x46e8c1[_0x5c9c29(0x9c2)] = ''; const _0x267d26 = new Date(_0x532a48 + 'T00:00:00'); _0x5b52b2[_0x5c9c29(0x8f9)] = _0x267d26[_0x5c9c29(0x978)]() + 0x1 + '月' + _0x267d26['getDate']() + '日'; const _0x279a13 = _0x1884b1[_0x5c9c29(0xa9d)][_0x5c9c29(0x776)](_0x1df5b4 => _0x1df5b4[_0x5c9c29(0x1f5)] === _0x532a48); if (_0x279a13['length'] === 0x0) { _0x46e8c1[_0x5c9c29(0x9c2)] = _0x5c9c29(0x7fc); return; } _0x279a13[_0x5c9c29(0xa30)](_0xca6ecc => { const _0x51df4f = _0x5c9c29, _0x87015 = document[_0x51df4f(0x2da)](_0x51df4f(0x1f9)); _0x87015[_0x51df4f(0x84e)] = _0xca6ecc[_0x51df4f(0x8c3)] === 'important' ? _0x51df4f(0x221) : _0x51df4f(0x336), _0x87015[_0x51df4f(0x8f9)] = _0xca6ecc[_0x51df4f(0x329)], _0x87015['dataset']['id'] = _0xca6ecc['id'], _0x46e8c1[_0x51df4f(0x168)](_0x87015); }); } } function _0x3ff2c5(_0x3cffca) { const _0x56a475 = _0x5f58e0; if (_0x56a475(0x799) !== _0x56a475(0x799)) { if (_0xe81516) _0x4c7c1d[_0x56a475(0x313)]['backgroundImage'] = _0x37630c[_0x56a475(0x3cd)] ? _0x56a475(0xa38) + _0x455cf0['value'] + '\x27)' : ''; } else document[_0x56a475(0x653)](_0x56a475(0x8bd))[_0x56a475(0x8f9)] = '为\x20' + _0x3cffca + _0x56a475(0x394), document['getElementById'](_0x56a475(0x6bd))[_0x56a475(0x3cd)] = '', document[_0x56a475(0x653)](_0x56a475(0xaec))[_0x56a475(0x65f)] = !![], document[_0x56a475(0x653)](_0x56a475(0xab3))['classList'][_0x56a475(0x428)]('show'), document[_0x56a475(0x653)]('event-content-input')['focus'](); } function _0x3c98f0() { const _0x23b6b0 = _0x5f58e0, _0x274589 = document[_0x23b6b0(0x653)](_0x23b6b0(0x6bd))[_0x23b6b0(0x3cd)][_0x23b6b0(0x87b)](), _0x7908c2 = document[_0x23b6b0(0x795)](_0x23b6b0(0x30d))[_0x23b6b0(0x3cd)]; if (!_0x274589) { _0x5929aa(_0x23b6b0(0x409)); return; } const _0x13f826 = _0x1884b1[_0x23b6b0(0x38c)][_0x23b6b0(0x6f9)](_0xadd6d6 => _0xadd6d6['id'] === _0x1884b1[_0x23b6b0(0x1d3)]); if (!_0x13f826) { if ('vbRSF' === _0x23b6b0(0x647)) { _0x5929aa('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } else { const _0x2c7234 = _0x13b1b7(_0x1baa07['id']), _0x168110 = _0x2c7234[_0x23b6b0(0x8a0)] > 0x0 ? _0x2c7234[_0x2c7234[_0x23b6b0(0x8a0)] - 0x1] : null; return { 'chat': _0x5a7a7d, 'history': _0x2c7234, 'lastTimestamp': _0x168110 ? _0x168110['timestamp'] : 0x0 }; } } _0x1884b1['calendarEvents'][_0x23b6b0(0x24d)]({ 'id': _0x23b6b0(0x5e3) + Date[_0x23b6b0(0x965)](), 'date': _0x351dce['selectedDate'], 'type': _0x7908c2, 'content': _0x274589, 'userId': _0x13f826['id'] }), _0x480928(), _0xecaa8(), _0x20e8d7(), _0x2f2ff7(), document['getElementById']('add-event-modal')['classList']['remove'](_0x23b6b0(0x322)); } function _0x20e8d7() { const _0x4ffaea = _0x5f58e0; if (_0x4ffaea(0x8da) === _0x4ffaea(0x8da)) { const _0x2385b9 = document[_0x4ffaea(0x653)](_0x4ffaea(0x30e)), _0x26becc = document['getElementById'](_0x4ffaea(0x997)), _0x3bd219 = new Date(); _0x3bd219[_0x4ffaea(0x279)](0x0, 0x0, 0x0, 0x0); const _0x332f6c = _0x1884b1[_0x4ffaea(0xa9d)]['filter'](_0x32e149 => _0x32e149[_0x4ffaea(0x8c3)] === _0x4ffaea(0x687) && new Date(_0x32e149[_0x4ffaea(0x1f5)] + _0x4ffaea(0x3c7)) >= _0x3bd219)[_0x4ffaea(0x9ec)]((_0x28b806, _0x42ccd1) => new Date(_0x28b806[_0x4ffaea(0x1f5)]) - new Date(_0x42ccd1[_0x4ffaea(0x1f5)])); if (_0x332f6c[_0x4ffaea(0x8a0)] > 0x0) { const _0x308850 = _0x332f6c[0x0], _0x4fc5a6 = new Date(_0x308850[_0x4ffaea(0x1f5)] + _0x4ffaea(0x3c7)), _0x255342 = _0x4fc5a6 - _0x3bd219, _0x440a9b = Math[_0x4ffaea(0x58f)](_0x255342 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2385b9[_0x4ffaea(0x8f9)] = '距离「' + _0x308850[_0x4ffaea(0x329)] + '」', _0x26becc['innerHTML'] = _0x4ffaea(0x9a9) + _0x440a9b + '</span><span\x20class=\x22unit\x22>天</span>'; } else _0x2385b9[_0x4ffaea(0x8f9)] = _0x4ffaea(0x9f1), _0x26becc[_0x4ffaea(0x9c2)] = _0x4ffaea(0x720); } else { _0x213e1c('名字不能为空！'); return; } } function _0x29d27a() { const _0x12903c = _0x5f58e0; if (_0x12903c(0x366) !== _0x12903c(0x366)) { if (_0x42d2a7['isAnimatingDiary']) return; const _0x2dd3c0 = _0x20e0ea['diaryCurrentPage']; if (_0x2dd3c0 <= 0x0) return; _0x395979[_0x12903c(0x46c)] = !![]; const _0x51479c = _0x2dd3c0 - 0x1, _0x2073d7 = _0x7c8fbb[_0x12903c(0x653)]('diary-page-' + _0x2dd3c0), _0x41eaf2 = _0x19c52d[_0x12903c(0x653)]('diary-page-' + _0x51479c); _0x2073d7 && _0x41eaf2 ? (_0x41eaf2[_0x12903c(0xb7b)][_0x12903c(0x428)](_0x12903c(0x1ca)), _0x2073d7['classList'][_0x12903c(0x428)]('is-exiting-right'), _0x41eaf2[_0x12903c(0xb7b)][_0x12903c(0x428)](_0x12903c(0x43d)), _0x5f2130(() => { const _0xf88760 = _0x12903c; _0x2073d7[_0xf88760(0xb7b)][_0xf88760(0x344)](_0xf88760(0x43d), _0xf88760(0xa79)), _0x41eaf2['classList']['remove'](_0xf88760(0x1ca)), _0x1dbbef['diaryCurrentPage'] = _0x51479c, _0x26d1de(), _0x3ec6ab['isAnimatingDiary'] = ![]; }, 0x2bc)) : _0x438eb6[_0x12903c(0x46c)] = ![]; } else { const _0x49277f = document[_0x12903c(0x653)]('user-profile-list-container'); _0x49277f[_0x12903c(0x9c2)] = ''; if (_0x1884b1[_0x12903c(0x38c)][_0x12903c(0x8a0)] === 0x0) { _0x49277f[_0x12903c(0x9c2)] = _0x12903c(0x28f); return; } _0x1884b1[_0x12903c(0x38c)][_0x12903c(0xa30)](_0x23439d => { const _0xedf4ca = _0x12903c, _0x81506a = document[_0xedf4ca(0x2da)]('div'); _0x81506a['className'] = _0xedf4ca(0x625), _0x81506a['dataset']['id'] = _0x23439d['id']; const _0x2ed383 = _0x23439d['id'] === _0x1884b1['activeUserProfileId'] ? _0xedf4ca(0xa81) : ''; _0x81506a['innerHTML'] = _0xedf4ca(0x565) + (_0x23439d[_0xedf4ca(0x99a)] || _0x100125) + _0xedf4ca(0x7d5) + _0x23439d[_0xedf4ca(0x7d7)] + _0x2ed383 + _0xedf4ca(0x1e6) + _0x23439d[_0xedf4ca(0x370)][_0xedf4ca(0x650)](0x0, 0x64) + _0xedf4ca(0x315), _0x81506a['addEventListener']('click', () => _0x1a9b5a(_0x23439d['id'])), _0x49277f[_0xedf4ca(0x168)](_0x81506a); }); } } function _0x1a9b5a(_0x398b42 = null) { const _0x4c4d1e = _0x5f58e0; _0x13d883('userProfile', _0x4c4d1e(0xb0b)); const _0x26c802 = document['getElementById'](_0x4c4d1e(0x1e0)), _0x497029 = document[_0x4c4d1e(0x653)]('user-avatar-preview'); _0x497029[_0x4c4d1e(0x313)]['backgroundImage'] = '', delete _0x497029[_0x4c4d1e(0x2c4)][_0x4c4d1e(0x3ae)]; if (_0x398b42) { const _0x28c30a = _0x1884b1[_0x4c4d1e(0x38c)][_0x4c4d1e(0x6f9)](_0x35c419 => _0x35c419['id'] === _0x398b42); if (!_0x28c30a) return; document[_0x4c4d1e(0x653)](_0x4c4d1e(0x3e7))['value'] = _0x28c30a['id'], document['getElementById'](_0x4c4d1e(0x450))['textContent'] = _0x4c4d1e(0x172), document['getElementById'](_0x4c4d1e(0x52e))['value'] = _0x28c30a[_0x4c4d1e(0x7d7)], _0x28c30a[_0x4c4d1e(0x99a)] ? _0x4c4d1e(0xa2a) !== _0x4c4d1e(0x2eb) ? _0x497029[_0x4c4d1e(0x313)]['backgroundImage'] = _0x4c4d1e(0xa38) + _0x28c30a['avatar'] + '\x27)' : _0x291d8e[_0x4c4d1e(0x80e)](_0x19ee63) : _0x497029[_0x4c4d1e(0x313)][_0x4c4d1e(0x956)] = _0x4c4d1e(0xa38) + _0x100125 + '\x27)', document['getElementById'](_0x4c4d1e(0x18d))[_0x4c4d1e(0x3cd)] = _0x28c30a[_0x4c4d1e(0x370)], _0x26c802['style'][_0x4c4d1e(0x272)] = _0x28c30a['id'] === _0x1884b1[_0x4c4d1e(0x1d3)] ? _0x4c4d1e(0x643) : _0x4c4d1e(0x8b0), document[_0x4c4d1e(0x653)](_0x4c4d1e(0x420))[_0x4c4d1e(0x313)][_0x4c4d1e(0x272)] = 'block'; } else document['getElementById'](_0x4c4d1e(0x3e7))[_0x4c4d1e(0x3cd)] = '', document[_0x4c4d1e(0x653)](_0x4c4d1e(0x450))[_0x4c4d1e(0x8f9)] = _0x4c4d1e(0x223), document['getElementById'](_0x4c4d1e(0x52e))['value'] = _0x4c4d1e(0x2f5) + (_0x1884b1['userProfiles'][_0x4c4d1e(0x8a0)] + 0x1), _0x497029[_0x4c4d1e(0x313)][_0x4c4d1e(0x956)] = _0x4c4d1e(0xa38) + _0x100125 + '\x27)', document[_0x4c4d1e(0x653)](_0x4c4d1e(0x18d))['value'] = '', _0x26c802[_0x4c4d1e(0x313)][_0x4c4d1e(0x272)] = _0x4c4d1e(0x643), document[_0x4c4d1e(0x653)](_0x4c4d1e(0x420))[_0x4c4d1e(0x313)][_0x4c4d1e(0x272)] = 'none'; } function _0x5c45f3() { const _0x3badbc = _0x5f58e0; if (_0x3badbc(0x33b) === _0x3badbc(0x453)) { _0x1c541b[_0x3badbc(0x9c2)] = _0x3badbc(0x634); return; } else { const _0x3bf438 = document[_0x3badbc(0x653)]('editing-user-id')['value'], _0x116adf = document[_0x3badbc(0x653)](_0x3badbc(0x485)), _0x35d43b = { 'name': document['getElementById'](_0x3badbc(0x52e))[_0x3badbc(0x3cd)][_0x3badbc(0x87b)](), 'persona': document[_0x3badbc(0x653)](_0x3badbc(0x18d))[_0x3badbc(0x3cd)][_0x3badbc(0x87b)](), 'avatar': _0x1884b1[_0x3badbc(0x38c)][_0x3badbc(0x6f9)](_0x15db4e => _0x15db4e['id'] === _0x3bf438)?.[_0x3badbc(0x99a)] || _0x116adf[_0x3badbc(0x313)][_0x3badbc(0x956)]['slice'](0x5, -0x2)[_0x3badbc(0xac6)](/'/g, '') || _0x100125 }; if (_0x116adf[_0x3badbc(0x2c4)][_0x3badbc(0x3ae)]) { if (_0x3badbc(0x1f0) === _0x3badbc(0x1f0)) _0x35d43b[_0x3badbc(0x99a)] = _0x116adf[_0x3badbc(0x2c4)][_0x3badbc(0x3ae)], delete _0x116adf[_0x3badbc(0x2c4)][_0x3badbc(0x3ae)]; else { const _0xa4bfbd = _0x5069e1[_0x3badbc(0x447)][_0x3badbc(0x6dc)](_0x23c85c => _0x23c85c['id'] === _0x458aa2); _0xa4bfbd > -0x1 && (_0x30397b[_0x3badbc(0x447)][_0x3badbc(0x8cf)](_0xa4bfbd, 0x1), _0x398b44(), _0x5c9908()); } } if (!_0x35d43b[_0x3badbc(0x7d7)]) { if ('QuenA' === _0x3badbc(0x299)) { _0x5929aa('名字不能为空！'); return; } else { const _0x396c7e = _0x2dd19d[_0x3badbc(0x795)](_0x3badbc(0x814)); if (_0x396c7e) _0x396c7e[_0x3badbc(0x344)](); } } if (_0x3bf438) { const _0x5ec5c = _0x1884b1[_0x3badbc(0x38c)][_0x3badbc(0x6f9)](_0xefd663 => _0xefd663['id'] === _0x3bf438); if (_0x5ec5c) Object['assign'](_0x5ec5c, _0x35d43b); } else { const _0x6a3589 = { 'id': _0x3badbc(0x9a2) + Date[_0x3badbc(0x965)](), ..._0x35d43b }; _0x1884b1[_0x3badbc(0x38c)]['push'](_0x6a3589); if (!_0x1884b1[_0x3badbc(0x1d3)]) { if (_0x3badbc(0x402) !== 'cambe') { const _0xb5520a = _0x1a649c(_0x549317[_0x3badbc(0x3d5)][0x0]); return _0xb5520a?.['name'] || 'AI'; } else _0x1884b1[_0x3badbc(0x1d3)] = _0x6a3589['id']; } } _0x480928(), _0x5929aa(_0x3badbc(0x1e8)), _0x29d27a(), _0x13d883(_0x3badbc(0xb0b), _0x3badbc(0x7c2)); } } async function _0x207ebb() { const _0xa4c2c5 = _0x5f58e0; if (_0xa4c2c5(0x2e4) === _0xa4c2c5(0xb39)) _0x2a0711(() => { const _0x520709 = _0xa4c2c5, _0xc6d8d7 = _0x3336cd[_0x520709(0x653)](_0x1f6672); if (_0xc6d8d7) _0xc6d8d7['src'] = _0x1362f3['coverUrl']; }, 0x0); else { const _0x5abd0e = document['getElementById'](_0xa4c2c5(0x3e7))[_0xa4c2c5(0x3cd)]; if (!_0x5abd0e) return; if (_0x1884b1[_0xa4c2c5(0x38c)]['length'] <= 0x1) { if (_0xa4c2c5(0x182) !== _0xa4c2c5(0x182)) _0x35118c = _0x4ffcfc[_0xa4c2c5(0x7f9)] || ''; else { _0x5929aa(_0xa4c2c5(0x9de)); return; } } const _0x623b16 = await _0x9e00ac(_0xa4c2c5(0x220)); _0x623b16 && (_0x1884b1[_0xa4c2c5(0x38c)] = _0x1884b1[_0xa4c2c5(0x38c)][_0xa4c2c5(0x776)](_0x207205 => _0x207205['id'] !== _0x5abd0e), _0x1884b1[_0xa4c2c5(0x1d3)] === _0x5abd0e && (_0x1884b1[_0xa4c2c5(0x1d3)] = _0x1884b1[_0xa4c2c5(0x38c)][0x0]['id']), _0x1884b1[_0xa4c2c5(0x940)][_0xa4c2c5(0xa30)](_0x1fdec2 => { const _0x624bc2 = _0xa4c2c5; _0x624bc2(0x81e) !== _0x624bc2(0x81e) ? _0x285a84[_0x624bc2(0x313)][_0x624bc2(0x6c4)] = _0x624bc2(0x951) : _0x1fdec2[_0x624bc2(0x70c)] === _0x5abd0e && (_0x1fdec2[_0x624bc2(0x70c)] = _0x1884b1[_0x624bc2(0x1d3)]); }), _0x480928(), _0x5929aa('用户已删除。'), _0x29d27a(), _0x13d883(_0xa4c2c5(0xb0b), _0xa4c2c5(0x7c2))); } } function _0x51e288() { const _0x43e6b0 = _0x5f58e0; if (_0x43e6b0(0x651) === 'KdGKA') { const _0x4f9897 = [], _0x56cd7d = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x1a164c; while ((_0x1a164c = _0x56cd7d[_0x43e6b0(0x7f5)](_0xfc5310)) !== null) { const _0x2885e1 = _0x1a164c[0x1]['replace'](/\\"/g, '\x22')[_0x43e6b0(0xac6)](/\\n/g, '\x0a')[_0x43e6b0(0x87b)](); if (_0x2885e1) _0x4f9897[_0x43e6b0(0x24d)](_0x2885e1); } if (_0x4f9897['length']) return _0x4f9897[_0x43e6b0(0x7e8)](_0x16cda7)[_0x43e6b0(0x46a)](0x0, 0x9); } else { const _0x895a4d = document[_0x43e6b0(0x653)](_0x43e6b0(0x792)); _0x895a4d[_0x43e6b0(0x9c2)] = ''; if (_0x1884b1[_0x43e6b0(0x562)][_0x43e6b0(0x8a0)] === 0x0) { if (_0x43e6b0(0x8c4) !== 'BHsBN') _0x545af0[_0x43e6b0(0x5f0)](_0x43e6b0(0x8a2), _0x165981), _0x1c0738[_0x43e6b0(0x52a)] = _0x43e6b0(0x6b3); else { _0x895a4d[_0x43e6b0(0x9c2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>'; return; } } _0x1884b1[_0x43e6b0(0x562)][_0x43e6b0(0xa30)](_0x1ae921 => { const _0x15ce47 = _0x43e6b0, _0x2f5c04 = document[_0x15ce47(0x2da)](_0x15ce47(0x1f9)); _0x2f5c04[_0x15ce47(0x84e)] = _0x15ce47(0x625), _0x2f5c04[_0x15ce47(0x2c4)]['id'] = _0x1ae921['id'], _0x2f5c04[_0x15ce47(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x1ae921['name'] + _0x15ce47(0xa9a) + _0x1ae921[_0x15ce47(0x329)][_0x15ce47(0x650)](0x0, 0x64) + _0x15ce47(0x6a2), _0x2f5c04[_0x15ce47(0xacf)](_0x15ce47(0x4f4), () => _0x2309d9(_0x1ae921['id'])), _0x895a4d['appendChild'](_0x2f5c04); }); } } function _0x2309d9(_0x2db316 = null) { const _0x32bfdd = _0x5f58e0; if ('clEDA' !== _0x32bfdd(0xa7a)) { _0x13d883(_0x32bfdd(0xb05), _0x32bfdd(0x1d2)); if (_0x2db316) { const _0x4f34f4 = _0x1884b1[_0x32bfdd(0x562)][_0x32bfdd(0x6f9)](_0xda691a => _0xda691a['id'] === _0x2db316); if (!_0x4f34f4) return; document[_0x32bfdd(0x653)]('editing-world-book-id')[_0x32bfdd(0x3cd)] = _0x4f34f4['id'], document[_0x32bfdd(0x653)](_0x32bfdd(0x472))[_0x32bfdd(0x8f9)] = _0x32bfdd(0x6ea), document[_0x32bfdd(0x653)]('world-book-edit-name')[_0x32bfdd(0x3cd)] = _0x4f34f4['name'], document[_0x32bfdd(0x653)](_0x32bfdd(0xabe))[_0x32bfdd(0x3cd)] = _0x4f34f4[_0x32bfdd(0x329)]; } else document[_0x32bfdd(0x653)](_0x32bfdd(0xb3d))['value'] = '', document[_0x32bfdd(0x653)](_0x32bfdd(0x472))[_0x32bfdd(0x8f9)] = _0x32bfdd(0x186), document['getElementById'](_0x32bfdd(0x15a))[_0x32bfdd(0x3cd)] = '', document['getElementById'](_0x32bfdd(0xabe))[_0x32bfdd(0x3cd)] = ''; } else { const _0x2c4ef6 = _0x213810(_0xd1f787[_0x32bfdd(0x329)]); _0x4c4166[_0x32bfdd(0x6c1)](_0x14af81, { 'content': _0x2c4ef6[_0x32bfdd(0x329)], 'quotedMessage': _0x2c4ef6[_0x32bfdd(0x748)] }); } } function _0x56a802() { const _0x56dbe4 = _0x5f58e0; if (_0x56dbe4(0x675) === _0x56dbe4(0x675)) { const _0x3dba13 = document[_0x56dbe4(0x653)]('editing-world-book-id')['value'], _0x3c2215 = document['getElementById'](_0x56dbe4(0x15a))[_0x56dbe4(0x3cd)][_0x56dbe4(0x87b)](), _0xdd3958 = document[_0x56dbe4(0x653)](_0x56dbe4(0xabe))[_0x56dbe4(0x3cd)][_0x56dbe4(0x87b)](); if (!_0x3c2215 || !_0xdd3958) { _0x5929aa(_0x56dbe4(0x2fa)); return; } if (_0x3dba13) { const _0x45c61b = _0x1884b1[_0x56dbe4(0x562)]['find'](_0x28da50 => _0x28da50['id'] === _0x3dba13); _0x45c61b && (_0x56dbe4(0x8f8) === _0x56dbe4(0x8f8) ? (_0x45c61b[_0x56dbe4(0x7d7)] = _0x3c2215, _0x45c61b[_0x56dbe4(0x329)] = _0xdd3958) : _0x339e2e[_0x56dbe4(0x653)](_0x56dbe4(0x98b))[_0x56dbe4(0x313)][_0x56dbe4(0x3d0)](_0x56dbe4(0xa5f), _0x56dbe4(0x8f5) + _0x151b13 + ')')); } else { if ('GsQWu' !== _0x56dbe4(0xa44)) { const _0x2cad1c = { 'id': _0x56dbe4(0xb54) + Date['now'](), 'name': _0x3c2215, 'content': _0xdd3958 }; _0x1884b1[_0x56dbe4(0x562)][_0x56dbe4(0x24d)](_0x2cad1c); } else return ''; } _0x480928(), _0x5929aa(_0x56dbe4(0xa9e)), _0x51e288(), _0x13d883(_0x56dbe4(0x1d2), _0x56dbe4(0xb05)); } else _0x17a16e[_0x56dbe4(0x653)](_0x56dbe4(0xadc) + _0x2775a8 + _0x56dbe4(0xa82))[_0x56dbe4(0x313)][_0x56dbe4(0x956)] = '', _0x29571b[_0x56dbe4(0x653)]('char-edit-sprite-' + _0x1f1d4b + '-input')[_0x56dbe4(0x3cd)] = ''; } async function _0x17d398() { const _0x374ed6 = _0x5f58e0, _0x3c3e25 = document[_0x374ed6(0x653)](_0x374ed6(0xb3d))['value']; if (!_0x3c3e25) return; const _0x3d2ac3 = await _0x9e00ac(_0x374ed6(0x835)); _0x3d2ac3 && (_0x1884b1['worldBooks'] = _0x1884b1[_0x374ed6(0x562)][_0x374ed6(0x776)](_0x1954d2 => _0x1954d2['id'] !== _0x3c3e25), _0x1884b1[_0x374ed6(0x358)][_0x374ed6(0xa30)](_0x12a9be => { const _0x52b107 = _0x374ed6; 'ZGDDN' !== _0x52b107(0x441) ? _0x12a9be['linkedWorldBookIds'] && (_0x12a9be[_0x52b107(0x99b)] = _0x12a9be[_0x52b107(0x99b)][_0x52b107(0x776)](_0x192dd6 => _0x192dd6 !== _0x3c3e25)) : _0x1d501f(_0x5d2729['id'], _0x665cf3['map'](_0x345e44 => _0x345e44['id'])); }), _0x480928(), _0x5929aa('条目已删除。'), _0x51e288(), _0x13d883('worldBook', _0x374ed6(0xb05))); } function _0x2d897b() { const _0x12981f = _0x5f58e0; if (_0x12981f(0x547) !== _0x12981f(0x547)) _0x13cdf0['boundUserProfileId'] = _0x4b6080; else { const _0xb0e045 = document[_0x12981f(0x653)](_0x12981f(0xa0a)), _0x39b8ee = _0xb0e045[_0x12981f(0x6e4)](_0x12981f(0x976)), _0x14c287 = document[_0x12981f(0x795)](_0x12981f(0x25c)); if (_0x39b8ee[_0x12981f(0x8a0)] === 0x0) 'aJnAY' === _0x12981f(0x1ef) ? _0x4302c1[_0x12981f(0x3bf)] = _0x32590c : _0x14c287[_0x12981f(0x8f9)] = _0x12981f(0x4aa); else _0x39b8ee[_0x12981f(0x8a0)] > 0x2 ? _0x14c287[_0x12981f(0x8f9)] = _0x12981f(0x20e) + _0x39b8ee[_0x12981f(0x8a0)] + '\x20项' : _0x14c287[_0x12981f(0x8f9)] = Array['from'](_0x39b8ee)['map'](_0x8c3563 => _0x8c3563[_0x12981f(0x8fb)][_0x12981f(0x8f9)][_0x12981f(0x87b)]())['join']('、'); } } async function _0x41d4c5(_0x3417b0) { const _0x6d9cd3 = _0x5f58e0, _0x51a496 = _0x1884b1[_0x6d9cd3(0x940)]['find'](_0x3139ba => _0x3139ba['id'] === _0x3417b0); if (!_0x51a496 || _0x51a496[_0x6d9cd3(0x8c3)] !== _0x6d9cd3(0x2b7)) return; document[_0x6d9cd3(0x653)](_0x6d9cd3(0x3d9))[_0x6d9cd3(0x3cd)] = _0x51a496['name'] || '', _0x65d0a9(_0x6d9cd3(0x4a6)), document[_0x6d9cd3(0x653)](_0x6d9cd3(0x4a6))[_0x6d9cd3(0x3cd)] = _0x51a496[_0x6d9cd3(0x70c)] || _0x1884b1['activeUserProfileId']; const _0x38a504 = document['getElementById'](_0x6d9cd3(0x606)); _0x38a504[_0x6d9cd3(0x9c2)] = '', _0x1884b1[_0x6d9cd3(0x562)][_0x6d9cd3(0xa30)](_0xfdde7d => { const _0x2c68dd = _0x6d9cd3, _0x531bc3 = _0x51a496[_0x2c68dd(0x99b)]?.['includes'](_0xfdde7d['id']), _0x36af0f = document[_0x2c68dd(0x2da)](_0x2c68dd(0x24b)); _0x36af0f[_0x2c68dd(0x9c2)] = _0x2c68dd(0x7c4) + _0xfdde7d['id'] + '\x22\x20' + (_0x531bc3 ? _0x2c68dd(0x65f) : '') + '>\x20' + _0xfdde7d[_0x2c68dd(0x7d7)], _0x38a504[_0x2c68dd(0x168)](_0x36af0f); }), _0x41fa73(); const _0x4c1b1b = document['getElementById']('group-avatar-preview'), _0x110f58 = document['getElementById']('group-bg-preview'); _0x110f58['style'][_0x6d9cd3(0x956)] = '', _0x329660('group_avatar_' + _0x3417b0)['then'](_0x1ad655 => { const _0xd8736e = _0x6d9cd3; _0x4c1b1b[_0xd8736e(0x74e)] = _0x1ad655 ? URL[_0xd8736e(0x264)](_0x1ad655) : _0xe4a1db; }), _0x329660(_0x6d9cd3(0x288) + _0x3417b0)[_0x6d9cd3(0x8e7)](_0x1bfeee => { const _0x2edb5f = _0x6d9cd3; if (_0x1bfeee) _0x110f58[_0x2edb5f(0x313)][_0x2edb5f(0x956)] = _0x2edb5f(0xa38) + URL[_0x2edb5f(0x264)](_0x1bfeee) + '\x27)'; }), _0x13d883(_0x6d9cd3(0x337), 'chat'); } async function _0x31f407() { const _0x5aecde = _0x5f58e0; if ('JCaaw' !== 'JCaaw') _0x2dd877 += _0x5aecde(0x4e9); else { const _0x3012df = _0x2bf707(); if (!_0x3012df || _0x3012df['type'] !== _0x5aecde(0x2b7)) return; const _0x4f43d0 = document['getElementById']('group-settings-name')['value'][_0x5aecde(0x87b)](); if (!_0x4f43d0) { if ('uKqoc' === 'eftxM') { const _0x48270d = _0x21abfd['linkedWorldBookIds']?.['includes'](_0x27bd11['id']), _0x45c4ce = _0x342e6a[_0x5aecde(0x2da)](_0x5aecde(0x24b)); _0x45c4ce[_0x5aecde(0x9c2)] = _0x5aecde(0x7c4) + _0x222240['id'] + '\x22\x20' + (_0x48270d ? 'checked' : '') + '>\x20' + _0x517484[_0x5aecde(0x7d7)], _0x475856['appendChild'](_0x45c4ce); } else { _0x5929aa(_0x5aecde(0x531)); return; } } _0x3012df[_0x5aecde(0x7d7)] = _0x4f43d0; const _0x278fed = document['querySelectorAll'](_0x5aecde(0x423)); _0x3012df[_0x5aecde(0x99b)] = Array['from'](_0x278fed)[_0x5aecde(0x7d4)](_0x1a3303 => _0x1a3303[_0x5aecde(0x3cd)]), _0x3012df[_0x5aecde(0x70c)] = document[_0x5aecde(0x653)](_0x5aecde(0x4a6))['value']; const _0x269420 = document[_0x5aecde(0x653)](_0x5aecde(0x41e))[_0x5aecde(0x53d)][0x0], _0x527df1 = document[_0x5aecde(0x653)](_0x5aecde(0x805))[_0x5aecde(0x53d)][0x0]; if (_0x269420) await _0x100c88(_0x5aecde(0x528) + _0x3012df['id'], _0x269420); if (_0x527df1) await _0x100c88(_0x5aecde(0x288) + _0x3012df['id'], _0x527df1); _0x480928(), _0x22d007(), await _0x3ebe62(), _0x5929aa('群聊设置已保存！'), _0x13d883('chat', _0x5aecde(0x337)); } } function _0x41fa73() { const _0x4589d1 = _0x5f58e0, _0x59919b = document[_0x4589d1(0x653)](_0x4589d1(0x606)), _0xca4164 = _0x59919b[_0x4589d1(0x6e4)](_0x4589d1(0x976)), _0x2dac66 = document[_0x4589d1(0x795)]('#group-settings-screen\x20.selected-options-text'); if (_0xca4164[_0x4589d1(0x8a0)] === 0x0) _0x4589d1(0x469) === _0x4589d1(0x469) ? _0x2dac66['textContent'] = _0x4589d1(0x4aa) : (_0xca4885(), _0x30e191(_0x4589d1(0x2c9), _0x4589d1(0x6fe))); else { if (_0xca4164['length'] > 0x2) { if (_0x4589d1(0x655) === 'qJJjt') { const _0x4ce845 = _0xf7c7e4[0x0][_0x4589d1(0x87b)](), _0x31680d = _0x445a4b[0x1][_0x4589d1(0x87b)]()[_0x4589d1(0xac6)](/^"|"$/g, ''); _0x33be61[_0x4ce845] = _0x31680d; } else _0x2dac66[_0x4589d1(0x8f9)] = _0x4589d1(0x20e) + _0xca4164[_0x4589d1(0x8a0)] + '\x20项'; } else _0x2dac66[_0x4589d1(0x8f9)] = Array['from'](_0xca4164)['map'](_0x413fdb => _0x413fdb[_0x4589d1(0x8fb)]['textContent'][_0x4589d1(0x87b)]())[_0x4589d1(0x359)]('、'); } } async function _0x10fd05() { const _0x3813bf = _0x5f58e0, _0x2e6531 = _0x2bf707(), _0x267277 = (_0x2e6531?.['participantIds'] || [])['map'](_0x21051e)[_0x3813bf(0x776)](Boolean), _0x1a9ece = _0x4079e8(_0x2e6531['id']); if (!_0x2e6531 || _0x2e6531[_0x3813bf(0x8c3)] !== 'group' || _0x267277[_0x3813bf(0x8a0)] < 0x2) return null; const _0xdde5fe = _0x2e6531[_0x3813bf(0x99b)] && _0x2e6531[_0x3813bf(0x99b)]['length'] > 0x0 ? '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a' + _0x2e6531['linkedWorldBookIds'][_0x3813bf(0x7d4)](_0x822c13 => _0x1884b1[_0x3813bf(0x562)][_0x3813bf(0x6f9)](_0x3b09cb => _0x3b09cb['id'] === _0x822c13))[_0x3813bf(0x776)](Boolean)['map'](_0x2e0e6b => _0x3813bf(0x36f) + _0x2e0e6b[_0x3813bf(0x7d7)] + '\x0a' + _0x2e0e6b[_0x3813bf(0x329)])[_0x3813bf(0x359)]('') : '', _0x1cdaf7 = _0x1a9ece[_0x3813bf(0x370)] ? _0x3813bf(0x5ec) + _0x1a9ece[_0x3813bf(0x7d7)] + _0x3813bf(0x631) + _0x1a9ece[_0x3813bf(0x370)] : ''; let _0x1168f9 = ''; const _0x1a20c3 = new Date(), _0x1067d1 = _0x1884b1[_0x3813bf(0x589)]['at'](-0x1); _0x1168f9 += '\x0a-\x20**当前时间**:\x20' + _0x1a20c3[_0x3813bf(0x40a)](_0x3813bf(0x567), { 'dateStyle': _0x3813bf(0xb4a), 'timeStyle': _0x3813bf(0xa5a) }); if (_0x1067d1) { if ('EzTAB' !== _0x3813bf(0x16c)) { const _0x182c15 = new Date(_0x1067d1[_0x3813bf(0x1af)]), _0x242123 = Math[_0x3813bf(0xa29)]((_0x1a20c3 - _0x182c15) / (0x3e8 * 0x3c)); if (_0x242123 < 0x5) _0x1168f9 += _0x3813bf(0x985); else { if (_0x242123 < 0x78) _0x1168f9 += _0x3813bf(0x3af) + _0x242123 + _0x3813bf(0x97a); else { if ('Mvgfm' !== _0x3813bf(0x3f8)) _0x4a9ca8[_0x3813bf(0x8fe)](_0x49ee87 => { const _0x3bc9fe = _0x3813bf; _0x49ee87 ? _0x124cb7(_0x49ee87) : _0x3aaef3(new _0xa8a0(_0x3bc9fe(0x8ab))); }, _0x209b61, _0x1e14b1); else { const _0x3d8a7e = Math[_0x3813bf(0xa29)](_0x242123 / 0x3c); if (_0x3d8a7e < 0x30) _0x1168f9 += _0x3813bf(0x3af) + _0x3d8a7e + _0x3813bf(0x786); else _0x1168f9 += '\x0a-\x20**对话状态**:\x20群里已经有' + Math[_0x3813bf(0xa29)](_0x3d8a7e / 0x18) + _0x3813bf(0x3bb); } } } } else _0x32e1c1(); } else _0x1168f9 += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; const _0x280c39 = [..._0x1884b1['conversationHistory']][_0x3813bf(0xa24)]()['find'](_0x50d9a1 => _0x50d9a1[_0x3813bf(0xaae)] === _0x3813bf(0x901))?.[_0x3813bf(0x329)] || '', _0x3cef8 = _0x4a8541(_0x2e6531, _0x280c39), _0x53dc0d = _0x1884b1[_0x3813bf(0x589)]['slice'](-0x78), _0x4f3d6c = _0x356d37['map'](_0x72be46 => _0x72be46[_0x3813bf(0x7d7)]), _0x21463e = _0x1b0dfd(), _0x19e395 = _0x267277[_0x3813bf(0x7d4)](_0x2054a9 => { const _0x5d0378 = _0x3813bf, { omniText: _0x333d83 } = _0x1c528d(_0x2054a9['id'], _0x2e6531['id']), _0x1f63c6 = _0x2c45f5(_0x2054a9['id']), _0x2379d8 = _0x2054a9[_0x5d0378(0x99b)] && _0x2054a9[_0x5d0378(0x99b)][_0x5d0378(0x8a0)] > 0x0 ? _0x5d0378(0x192) + _0x2054a9[_0x5d0378(0x7d7)] + _0x5d0378(0x397) + _0x2054a9[_0x5d0378(0x99b)][_0x5d0378(0x7d4)](_0x186696 => _0x1884b1[_0x5d0378(0x562)]['find'](_0x15a629 => _0x15a629['id'] === _0x186696))[_0x5d0378(0x776)](Boolean)['map'](_0x4a0904 => '\x0a##\x20条目:\x20' + _0x4a0904['name'] + '\x0a' + _0x4a0904['content'])[_0x5d0378(0x359)]('') : ''; let _0x4e8de9 = _0x5d0378(0x666) + _0x2054a9[_0x5d0378(0x7d7)] + ')\x20的专属时间锚点\x0a'; const _0x3ddb22 = _0x5018f9(_0x2054a9['id']), _0x323aa8 = new Date(); if (_0x3ddb22) { const _0x4b5aef = new Date(_0x3ddb22['timestamp']); _0x4e8de9 += _0x5d0378(0x992) + _0x1a9ece[_0x5d0378(0x7d7)] + '在所有地方的最后一次互动是在**:\x20' + _0x68ddbc(_0x4b5aef) + '\x0a'; const _0x25840a = _0x323aa8['toDateString']() === _0x4b5aef[_0x5d0378(0x65b)](), _0x40765f = new Date(); _0x40765f[_0x5d0378(0xad6)](_0x323aa8[_0x5d0378(0x8ff)]() - 0x1); const _0x1e92b7 = _0x40765f[_0x5d0378(0x65b)]() === _0x4b5aef[_0x5d0378(0x65b)](); if (_0x25840a) _0x4e8de9 += _0x5d0378(0xab5); else _0x1e92b7 ? 'NUQAm' !== 'NUQAm' ? _0x216dd2[_0x5d0378(0x8c3)] = 'text' : _0x4e8de9 += '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a' : _0x5d0378(0x1e1) !== _0x5d0378(0x935) ? _0x4e8de9 += '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a' : _0x4a604d['scrollIntoView']({ 'behavior': _0x5d0378(0x31b), 'block': _0x5d0378(0x9ea) }); } else { if (_0x5d0378(0x762) === _0x5d0378(0x762)) _0x4e8de9 += _0x5d0378(0x509) + _0x1a9ece[_0x5d0378(0x7d7)] + _0x5d0378(0x5cb); else { const _0x28f20c = _0x41b2e7[_0x5d0378(0x2da)]('div'); _0x28f20c[_0x5d0378(0x84e)] = _0x5d0378(0x286), _0x28f20c[_0x5d0378(0x9c2)] = _0x5d0378(0x8d6) + _0x1c7a82[_0x5d0378(0x645)] + _0x5d0378(0x637) + _0x5be882[_0x5d0378(0x7d7)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x28f20c['addEventListener'](_0x5d0378(0x4f4), () => _0x2c2ba9(_0x57f07a['id'], _0x21448c[_0x5d0378(0x7d7)])), _0xfe38ba['area'] === _0x5d0378(0x6a7) ? _0x4de7bd[_0x5d0378(0x168)](_0x28f20c) : _0x174b0b[_0x5d0378(0x168)](_0x28f20c); } } return { 'id': _0x2054a9['id'], 'name': _0x2054a9[_0x5d0378(0x7d7)], 'persona': _0x2054a9[_0x5d0378(0x370)] || _0x5d0378(0x9b5), 'memory': _0x333d83 + _0x1f63c6 + _0x2379d8 + _0x4e8de9 }; }), _0x4a1ec5 = 0x5, _0x3f735f = 0xc, _0x59eb4c = _0x3813bf(0xb2e)['trim'](), _0x122b11 = { 'instruction': (_0x3813bf(0x6fa) + (_0x1a9ece['name'] || '用户') + _0x3813bf(0x165) + (_0x1a9ece[_0x3813bf(0x7d7)] || '用户') + '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20' + _0x4a1ec5 + _0x3813bf(0x241) + _0x3f735f + _0x3813bf(0x84c) + (_0x1a9ece['name'] || '用户') + '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a' + _0x1168f9 + '\x20\x0a' + _0x1cdaf7 + '\x0a' + _0xdde5fe + _0x3813bf(0x50f) + _0x21463e + '\x0a')['trim'](), 'personas': _0x19e395, 'mentioned': _0x3cef8 ? { 'id': _0x3cef8['id'], 'name': _0x3cef8[_0x3813bf(0x7d7)] } : null, 'stickerList': _0x4f3d6c }, _0x540047 = { 'type': _0x3813bf(0xada), 'properties': { 'events': { 'type': _0x3813bf(0x1c6), 'items': { 'type': _0x3813bf(0xada), 'required': [_0x3813bf(0x86d), 'kind'], 'properties': { 'senderId': { 'type': _0x3813bf(0x4b6) }, 'kind': { 'type': _0x3813bf(0x4b6), 'enum': [_0x3813bf(0x252), _0x3813bf(0x6b2), 'music'] }, 'content': { 'type': 'string' }, 'sticker': { 'type': _0x3813bf(0x4b6) }, 'songName': { 'type': 'string' }, 'artist': { 'type': _0x3813bf(0x4b6) } } } } }, 'required': ['events'] }, _0x2d5132 = []; _0x2d5132[_0x3813bf(0x24d)]({ 'role': _0x3813bf(0xa40), 'content': _0x59eb4c }); for (const _0x5dbb34 of _0x53dc0d) { if (_0x3813bf(0x804) !== _0x3813bf(0x804)) { if (!_0x38b887[_0x3813bf(0xb41)](_0x29ae1d)) return _0x3813bf(0x2bf); if (_0x37bdf5['length'] === 0x0) return _0x3813bf(0x739); return _0x2ea49a[_0x3813bf(0x9ec)]((_0x1e0456, _0x2af70c) => new _0x519f43(_0x2af70c['timestamp']) - new _0x41c58e(_0x1e0456[_0x3813bf(0x1af)])), _0x3813bf(0x15d) + _0x69af0a[_0x3813bf(0x7d4)]((_0x1e18ab, _0xdb92f0) => _0x3813bf(0x296) + (_0xdb92f0 < _0x2517ca[_0x3813bf(0x8a0)] - 0x1 ? _0x3813bf(0xaad) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + (_0x1e18ab['query'] || _0x3813bf(0x353)) + _0x3813bf(0x71e) + (_0x1e18ab[_0x3813bf(0x4b0)] || _0x3813bf(0xb02)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>' + (_0x1e18ab['timestamp'] || '') + _0x3813bf(0xaf3))[_0x3813bf(0x359)]('') + '</div>'; } else { const _0x2b668a = _0x5dbb34[_0x3813bf(0xaae)] === 'ai' || _0x5dbb34[_0x3813bf(0xaae)] === 'assistant' ? _0x3813bf(0x37b) : _0x3813bf(0x901); let _0x31743d = { 'role': _0x2b668a, 'content': _0x5dbb34[_0x3813bf(0x329)] }, _0x27a55f = !!_0x5dbb34[_0x3813bf(0x329)], _0x1ab7e5 = null; if (_0x5dbb34[_0x3813bf(0x3bf)]) { if (_0x3813bf(0xa8f) === _0x3813bf(0xa8f)) _0x1ab7e5 = _0x5dbb34[_0x3813bf(0x3bf)]; else { _0x1fed1a(_0x3813bf(0xb66)); return; } } else { if (_0x5dbb34[_0x3813bf(0xaa4)]) try { const _0x295a2e = await _0x329660(_0x5dbb34['imageId']); _0x295a2e && (_0x1ab7e5 = await _0x1f0891(_0x295a2e)); } catch (_0x4571e0) { if (_0x3813bf(0x85a) === _0x3813bf(0xa3b)) { const _0x473e0f = _0x2ac1e5[_0x3813bf(0x2da)]('div'); _0x473e0f[_0x3813bf(0x84e)] = _0x4759b0[_0x3813bf(0x8c3)] === _0x3813bf(0x687) ? _0x3813bf(0x221) : 'todo-item', _0x473e0f['textContent'] = _0x101154[_0x3813bf(0x329)], _0x473e0f[_0x3813bf(0x2c4)]['id'] = _0x3c06d7['id'], _0xbbc114[_0x3813bf(0x168)](_0x473e0f); } else console[_0x3813bf(0x5f0)](_0x3813bf(0xb1e), _0x4571e0); } } _0x1ab7e5 && (_0x31743d[_0x3813bf(0x3bf)] = _0x1ab7e5, _0x27a55f = !![]); if (_0x27a55f) { if (_0x3813bf(0x408) === _0x3813bf(0x2b0)) { const _0x2d3fa7 = _0x14a298['createObjectURL'](_0x261797); _0x14eb9b[_0x3813bf(0x74e)] = _0x2d3fa7, _0x24dff1[_0x3813bf(0x3e1)] = () => _0x52f108[_0x3813bf(0x80e)](_0x2d3fa7); } else _0x2d5132[_0x3813bf(0x24d)](_0x31743d); } } } _0x2d5132[_0x3813bf(0x24d)]({ 'role': _0x3813bf(0x901), 'content': _0x3813bf(0x5a6) + JSON[_0x3813bf(0x98f)](_0x540047) + '\x0a\x0aINPUT:\x0a' + JSON['stringify'](_0x122b11) }); try { const _0x4ce851 = await _0x286894(_0x2d5132, { 'json': !![] }); if (!_0x4ce851) return null; let _0x4e841d = _0x4ce851[_0x3813bf(0x87b)](); const _0x254059 = _0x4e841d['match'](/```json([\s\S]*?)```/i); if (_0x254059) _0x4e841d = _0x254059[0x1]['trim'](); _0x4e841d = _0x24869b(_0x4e841d); let _0x4ca1e3 = null; try { if (_0x3813bf(0x202) === _0x3813bf(0xad7)) { const { omniText: _0x5b8a20 } = _0x2fa0c7(_0xcf4d61['id'], null), _0x3fc827 = _0x26448f(_0x223e8a['id']), _0x558d0a = _0x5af77e['linkedWorldBookIds'] && _0x11b1a2['linkedWorldBookIds']['length'] > 0x0 ? '\x0a\x0a#\x20' + _0x107008[_0x3813bf(0x7d7)] + '的个人专属世界观设定\x0a' + _0x3b4713[_0x3813bf(0x99b)]['map'](_0x55cd1a => _0x16e33d['worldBooks'][_0x3813bf(0x6f9)](_0x5e7eb1 => _0x5e7eb1['id'] === _0x55cd1a))['filter'](_0x20c6a9)['map'](_0x2e85f7 => _0x3813bf(0x878) + _0x2e85f7[_0x3813bf(0x7d7)] + '\x0a' + _0x2e85f7['content'])[_0x3813bf(0x359)]('') : ''; return _0x3813bf(0xaba) + _0x3926a9[_0x3813bf(0x7d7)] + _0x3813bf(0x555) + _0x39b734['id'] + '\x0a\x20\x20人设:\x20' + _0x4b09c6[_0x3813bf(0x370)] + '\x0a\x20\x20近期记忆:\x0a' + _0x5b8a20 + '\x0a' + _0x3fc827 + '\x0a' + _0x558d0a; } else _0x4ca1e3 = JSON['parse'](_0x4e841d); } catch (_0x5dd745) { console[_0x3813bf(0x5f0)](_0x3813bf(0x858), _0x5dd745), console[_0x3813bf(0x5f0)](_0x3813bf(0xaca), _0x4e841d); } if (!_0x4ca1e3 || !Array['isArray'](_0x4ca1e3['events'])) return null; return _0x4ca1e3 = _0x385f45(_0x4ca1e3, _0x267277, _0x4f3d6c), _0x4ca1e3[_0x3813bf(0x9c5)] = _0x4ca1e3[_0x3813bf(0x9c5)][_0x3813bf(0x46a)](0x0, _0x3f735f), _0x4ca1e3[_0x3813bf(0x9c5)]['length'] ? _0x4ca1e3 : null; } catch (_0x248221) { return _0x248221[_0x3813bf(0x7d7)] !== 'AbortError' && console[_0x3813bf(0x5f0)](_0x3813bf(0x260), _0x248221), null; } } function _0x4512e1() { const _0x2bbb7e = _0x5f58e0, _0xc419bb = document[_0x2bbb7e(0x653)]('friend-circle-list-container'); _0xc419bb[_0x2bbb7e(0x9c2)] = ''; if (_0x1884b1[_0x2bbb7e(0xa26)][_0x2bbb7e(0x8a0)] === 0x0) { _0xc419bb[_0x2bbb7e(0x9c2)] = _0x2bbb7e(0x634); return; } _0x1884b1[_0x2bbb7e(0xa26)][_0x2bbb7e(0xa30)](_0x1d9da0 => { const _0x2b8d11 = _0x2bbb7e; if (_0x2b8d11(0x54d) !== _0x2b8d11(0x54d)) { _0x3e4e2b[_0x2b8d11(0x16a)](_0x2b8d11(0x51b)); const _0x5c7227 = _0xb9529c[_0x2b8d11(0x3d5)]['map'](_0x4e478d)[_0x2b8d11(0x776)](_0x297dc8); if (!_0x5c7227[_0x2b8d11(0x8a0)]) return; let _0x33d71a = 0x0; for (const _0x25ca60 of _0x5c7227) { _0x4b93ce(_0x25ca60, { 'force': !![], 'delayMs': _0x33d71a }), _0x33d71a += 0x1f4; } } else { const _0x6868af = _0x1884b1[_0x2b8d11(0x38c)][_0x2b8d11(0x6f9)](_0x1e3b91 => _0x1e3b91['id'] === _0x1d9da0[_0x2b8d11(0x70c)]) || { 'name': _0x2b8d11(0xb7d) }, _0x258c4c = document['createElement'](_0x2b8d11(0x1f9)); _0x258c4c[_0x2b8d11(0x84e)] = _0x2b8d11(0x625), _0x258c4c[_0x2b8d11(0x2c4)]['id'] = _0x1d9da0['id'], _0x258c4c[_0x2b8d11(0x9c2)] = _0x2b8d11(0x79c) + _0x1d9da0[_0x2b8d11(0x7d7)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x6868af['name'] + '\x20|\x20' + _0x1d9da0[_0x2b8d11(0x42a)][_0x2b8d11(0x8a0)] + _0x2b8d11(0x6bc), _0x258c4c[_0x2b8d11(0xacf)](_0x2b8d11(0x4f4), () => _0x45af54(_0x1d9da0['id'])), _0xc419bb[_0x2b8d11(0x168)](_0x258c4c); } }); } function _0x3a3b85(_0x5eb8d2 = null) { const _0x2964a9 = _0x5f58e0, _0x5391f5 = document[_0x2964a9(0x653)](_0x2964a9(0x58b)), _0x1d3000 = document[_0x2964a9(0x653)](_0x2964a9(0x98c)), _0x53163b = document['getElementById']('friend-circle-member-selection'), _0x2c7983 = document[_0x2964a9(0x653)]('friend-circle-edit-title'), _0x42318d = document['getElementById']('editing-friend-circle-id'), _0xabd468 = document[_0x2964a9(0x653)](_0x2964a9(0xa98)); _0x65d0a9(_0x2964a9(0x98c)), _0x53163b['innerHTML'] = '', _0x1884b1['characters']['forEach'](_0x42a363 => { const _0x4a854c = _0x2964a9; if (_0x4a854c(0x398) !== _0x4a854c(0x576)) { const _0xc10cad = document[_0x4a854c(0x2da)](_0x4a854c(0x1f9)); _0xc10cad[_0x4a854c(0x84e)] = _0x4a854c(0x405), _0xc10cad[_0x4a854c(0x9c2)] = _0x4a854c(0x256) + _0x42a363['id'] + _0x4a854c(0x57b) + _0x42a363['id'] + _0x4a854c(0x266) + (_0x42a363[_0x4a854c(0x99a)] || _0xe4a1db) + _0x4a854c(0x7eb) + _0x42a363['id'] + '\x22\x20class=\x22char-name\x22>' + _0x42a363[_0x4a854c(0x7d7)] + _0x4a854c(0x36b), _0x53163b[_0x4a854c(0x168)](_0xc10cad); } else { const _0x2306dd = _0x2b4a8d[_0x4a854c(0x2da)]('div'); _0x2306dd[_0x4a854c(0x84e)] = 'avatar-wrapper\x20' + _0x6d209f; const _0x48ab8b = _0x22d151[_0x4a854c(0x2da)](_0x4a854c(0x7fb)); _0x48ab8b['src'] = _0x2fd2ed, _0x48ab8b[_0x4a854c(0x84e)] = _0x4a854c(0x99a); const _0x3e4601 = _0x19237e[_0x4a854c(0x2da)](_0x4a854c(0x1f9)); return _0x3e4601[_0x4a854c(0x84e)] = _0x4a854c(0x15f), _0x34cfb8 && (_0x3e4601[_0x4a854c(0x313)][_0x4a854c(0x956)] = _0x4a854c(0xa38) + _0x305dcc + '\x27)'), _0x2306dd['appendChild'](_0x48ab8b), _0x2306dd[_0x4a854c(0x168)](_0x3e4601), _0x2306dd; } }); if (_0x5eb8d2) { if ('hbyuM' === _0x2964a9(0x4ea)) { const _0x27cc6d = _0x4059aa['getElementById']('countdown-title'), _0x5165a8 = _0x31570e[_0x2964a9(0x653)](_0x2964a9(0x997)), _0x6d2dcc = new _0x2d3e7b(); _0x6d2dcc['setHours'](0x0, 0x0, 0x0, 0x0); const _0x523d99 = _0x299c77[_0x2964a9(0xa9d)][_0x2964a9(0x776)](_0x56360c => _0x56360c[_0x2964a9(0x8c3)] === 'important' && new _0x440d55(_0x56360c['date'] + _0x2964a9(0x3c7)) >= _0x6d2dcc)[_0x2964a9(0x9ec)]((_0x60adb1, _0x2ff548) => new _0x2091b8(_0x60adb1['date']) - new _0x405fc1(_0x2ff548[_0x2964a9(0x1f5)])); if (_0x523d99[_0x2964a9(0x8a0)] > 0x0) { const _0x2fbcae = _0x523d99[0x0], _0x82176c = new _0x43ae64(_0x2fbcae[_0x2964a9(0x1f5)] + _0x2964a9(0x3c7)), _0x24eff0 = _0x82176c - _0x6d2dcc, _0x592e0e = _0x39b0fd[_0x2964a9(0x58f)](_0x24eff0 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x27cc6d['textContent'] = _0x2964a9(0x277) + _0x2fbcae[_0x2964a9(0x329)] + '」', _0x5165a8[_0x2964a9(0x9c2)] = _0x2964a9(0x9a9) + _0x592e0e + _0x2964a9(0x784); } else _0x27cc6d['textContent'] = _0x2964a9(0x9f1), _0x5165a8[_0x2964a9(0x9c2)] = _0x2964a9(0x720); } else { const _0x18bf1b = _0x1884b1[_0x2964a9(0xa26)][_0x2964a9(0x6f9)](_0x430f45 => _0x430f45['id'] === _0x5eb8d2); if (!_0x18bf1b) return; _0x2c7983[_0x2964a9(0x8f9)] = '编辑好友圈', _0x42318d[_0x2964a9(0x3cd)] = _0x18bf1b['id'], _0x5391f5['value'] = _0x18bf1b[_0x2964a9(0x7d7)], _0x1d3000[_0x2964a9(0x3cd)] = _0x18bf1b[_0x2964a9(0x70c)], _0xabd468['style'][_0x2964a9(0x272)] = 'block', _0x18bf1b[_0x2964a9(0x42a)][_0x2964a9(0xa30)](_0xf98ead => { const _0x2bac07 = _0x2964a9, _0x2e8109 = _0x53163b[_0x2bac07(0x795)](_0x2bac07(0x906) + _0xf98ead); if (_0x2e8109) _0x2e8109[_0x2bac07(0x65f)] = !![]; }); } } else _0x2c7983[_0x2964a9(0x8f9)] = '新建好友圈', _0x42318d[_0x2964a9(0x3cd)] = '', _0x5391f5[_0x2964a9(0x3cd)] = '好友圈\x20' + (_0x1884b1['friendCircles']['length'] + 0x1), _0x1d3000[_0x2964a9(0x3cd)] = _0x1884b1[_0x2964a9(0x1d3)], _0xabd468[_0x2964a9(0x313)][_0x2964a9(0x272)] = 'none'; _0x13d883(_0x2964a9(0x492), _0x2964a9(0x585)); } function _0x265940() { const _0x4d0d90 = _0x5f58e0, _0x100955 = document['getElementById'](_0x4d0d90(0x3c3))[_0x4d0d90(0x3cd)], _0x4f8c67 = document['getElementById'](_0x4d0d90(0x58b))[_0x4d0d90(0x3cd)][_0x4d0d90(0x87b)](), _0x3c8061 = document[_0x4d0d90(0x653)]('friend-circle-edit-bind-user')[_0x4d0d90(0x3cd)], _0x2528b5 = Array[_0x4d0d90(0x5a1)](document[_0x4d0d90(0x6e4)]('#friend-circle-member-selection\x20input:checked'))[_0x4d0d90(0x7d4)](_0x561d53 => _0x561d53['dataset']['id']); if (!_0x4f8c67) { _0x5929aa(_0x4d0d90(0x61e)); return; } if (_0x2528b5[_0x4d0d90(0x8a0)] === 0x0) { _0x5929aa('至少要选择一个圈内成员！'); return; } if (_0x100955) { const _0x4160c9 = _0x1884b1[_0x4d0d90(0xa26)][_0x4d0d90(0x6f9)](_0x780de9 => _0x780de9['id'] === _0x100955); _0x4160c9 && (_0x4160c9[_0x4d0d90(0x7d7)] = _0x4f8c67, _0x4160c9['boundUserProfileId'] = _0x3c8061, _0x4160c9['memberCharacterIds'] = _0x2528b5); } else { const _0x5c9c76 = { 'id': _0x4d0d90(0x5aa) + Date['now'](), 'name': _0x4f8c67, 'boundUserProfileId': _0x3c8061, 'memberCharacterIds': _0x2528b5, 'posts': [] }; _0x1884b1[_0x4d0d90(0xa26)][_0x4d0d90(0x24d)](_0x5c9c76); } _0x480928(), _0x5929aa('好友圈已保存！'), _0x4512e1(), _0x13d883(_0x4d0d90(0x585), 'friendCircleEdit'); } async function _0x356697() { const _0x2558a2 = _0x5f58e0, _0x113219 = document[_0x2558a2(0x653)](_0x2558a2(0x3c3))[_0x2558a2(0x3cd)]; if (!_0x113219) return; const _0x414582 = await _0x9e00ac(_0x2558a2(0x905)); _0x414582 && (_0x2558a2(0xae1) === _0x2558a2(0x832) ? _0x2d1257(_0x2558a2(0x738), '聊天') : (_0x1884b1[_0x2558a2(0xa26)] = _0x1884b1[_0x2558a2(0xa26)][_0x2558a2(0x776)](_0x3ee2d6 => _0x3ee2d6['id'] !== _0x113219), _0x1884b1[_0x2558a2(0x825)] === _0x113219 && (_0x1884b1[_0x2558a2(0x825)] = null), _0x480928(), _0x5929aa('好友圈已删除。'), _0x4512e1(), _0x13d883(_0x2558a2(0x585), _0x2558a2(0x492)))); } function _0x45af54(_0x5da25b) { const _0x575832 = _0x5f58e0; _0x564594(); const _0x1250df = _0x1884b1[_0x575832(0xa26)][_0x575832(0x6f9)](_0x2cd4de => _0x2cd4de['id'] === _0x5da25b); if (!_0x1250df) return; _0x1884b1[_0x575832(0x825)] = _0x5da25b, _0x480928(), document[_0x575832(0x653)](_0x575832(0x324))[_0x575832(0x8f9)] = _0x1250df[_0x575832(0x7d7)], _0x2229ef(), _0x13d883('music', _0x575832(0x585)), _0x1f4775(); } function _0x2fe75a() { const _0xb87269 = _0x5f58e0; if (!_0x1884b1[_0xb87269(0xa26)] || _0x1884b1[_0xb87269(0xa26)]['length'] === 0x0) { console[_0xb87269(0x5f0)](_0xb87269(0x31e)); return; } const _0x1b8fc6 = _0x1884b1['friendCircles'][0x0]; if (_0x1b8fc6[_0xb87269(0x42a)][_0xb87269(0x8a0)] < 0x2) { console[_0xb87269(0x5f0)](_0xb87269(0x319) + _0x1b8fc6[_0xb87269(0x7d7)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } const _0x2ddade = { 'id': _0xb87269(0x816) + Date[_0xb87269(0x965)](), 'authorType': _0xb87269(0x50e), 'authorId': _0x1b8fc6[_0xb87269(0x42a)][0x0], 'content': _0xb87269(0x704), 'timestamp': Date[_0xb87269(0x965)](), 'likes': [_0x1b8fc6['memberCharacterIds'][0x1]], 'comments': [{ 'commentId': 'c_' + Date['now'](), 'authorId': _0x1b8fc6[_0xb87269(0x42a)][0x1], 'content': _0xb87269(0x21f) }] }; _0x1b8fc6[_0xb87269(0xa6e)]['push'](_0x2ddade), _0x480928(), console[_0xb87269(0xace)]('成功向好友圈\x20\x22' + _0x1b8fc6['name'] + _0xb87269(0x18f)), _0x5929aa(_0xb87269(0x6fd)); } window['addTestPost'] = _0x2fe75a; function _0x4d4457(_0x40a9a4) { return _0x1884b1['userProfiles']['find'](_0xf3e1a3 => _0xf3e1a3['id'] === _0x40a9a4); } function _0x1d9e54(_0x519724, _0x26c512 = _0x5f58e0(0x4cd)) { const _0x317daa = _0x5f58e0, _0x158f85 = document[_0x317daa(0x653)](_0x317daa(0x246)); let _0x537168 = document[_0x317daa(0x653)](_0x317daa(0x6eb)); if (_0x519724) { if (_0x317daa(0x22d) !== 'HyWQE') !_0x537168 && (_0x537168 = document[_0x317daa(0x2da)](_0x317daa(0x1f9)), _0x537168['id'] = _0x317daa(0x6eb), _0x158f85['appendChild'](_0x537168)), _0x537168['innerHTML'] = _0x317daa(0x76c) + _0x26c512 + _0x317daa(0x680), _0x537168[_0x317daa(0x313)][_0x317daa(0x272)] = _0x317daa(0xac5); else { _0x54545b[_0x317daa(0x5f0)](_0x317daa(0x69d) + _0xb7d89c['activeChatId'] + _0x317daa(0x59d), _0xb78df5); try { _0x16d9d3[_0x317daa(0x673)](_0x317daa(0x962) + _0x491990['activeChatId']); } catch (_0x1c013b) { _0x298b3b['error'](_0x317daa(0xa58), _0x1c013b); } } } else { if (_0x317daa(0x8c6) !== _0x317daa(0xb01)) _0x537168 && (_0x537168[_0x317daa(0x313)][_0x317daa(0x272)] = _0x317daa(0x643)); else { _0x32c35c[_0x317daa(0x2ec)][_0x317daa(0x5e8)] = _0xf945f[_0x317daa(0x3cd)][_0x317daa(0x87b)](), _0x2b2b24[_0x317daa(0x2ec)][_0x317daa(0x8c2)] = _0x2a6f8f[_0x317daa(0x3cd)][_0x317daa(0x87b)](), _0x3d2abd['apiSettings'][_0x317daa(0xacd)] = _0x10f8ef[_0x317daa(0x3cd)][_0x317daa(0x87b)](), _0x69f81d[_0x317daa(0x2ec)][_0x317daa(0x204)] = _0x15ebef[_0x317daa(0x653)](_0x317daa(0xa43))[_0x317daa(0x3cd)]; const _0x18eb3f = _0x1b8beb(_0x11f4c4['value'], 0xa); _0x2c0baa[_0x317daa(0xa17)][_0x317daa(0x99e)] = _0x160909[_0x317daa(0x207)](_0x18eb3f) && _0x18eb3f > 0x0 ? _0x18eb3f : 0x64, _0x5d16a7(), _0x3ec253(_0x317daa(0x2ff)); } } } async function _0x266322() { const _0x336e4a = _0x5f58e0, _0x4472f2 = _0x1884b1[_0x336e4a(0xa26)][_0x336e4a(0x6f9)](_0x8a4215 => _0x8a4215['id'] === _0x1884b1[_0x336e4a(0x825)]); if (!_0x4472f2 || _0x1884b1['isGenerating']) return; _0x1d9e54(!![], _0x336e4a(0x29c)), _0x1884b1[_0x336e4a(0xa54)] = !![]; try { if (_0x336e4a(0x3d3) === _0x336e4a(0x9cc)) { const _0x5657db = _0x5e5f79[_0x336e4a(0x6da)](_0x336e4a(0x4c5)); if (_0x5657db) { const _0x1de673 = _0x7b773d[_0x336e4a(0x440)](_0x5657db); _0x1de673[_0x336e4a(0x47a)] && (_0x318249[_0x336e4a(0x47a)] = _0x1de673[_0x336e4a(0x47a)], _0x8baf2a[_0x336e4a(0xace)](_0x336e4a(0x332))); } } else { let _0x2078d1 = Date[_0x336e4a(0x965)](); _0x4472f2[_0x336e4a(0xa6e)] && _0x4472f2['posts'][_0x336e4a(0x8a0)] > 0x0 && (_0x2078d1 = Math['max'](..._0x4472f2[_0x336e4a(0xa6e)][_0x336e4a(0x7d4)](_0x267a94 => _0x267a94['timestamp']))); const _0x1c412a = await _0x284f32(_0x4472f2); if (!_0x1c412a || _0x1c412a[_0x336e4a(0x8a0)] === 0x0) { _0x5929aa(_0x336e4a(0x5ee)); return; } const _0x558ee1 = _0x1c412a[_0x336e4a(0x7d4)](async (_0x19e215, _0x5db19a) => { const _0x28247a = _0x336e4a; _0x1d9e54(!![], '刷新了\x20' + (_0x5db19a + 0x1) + _0x28247a(0x458) + _0x1c412a[_0x28247a(0x8a0)] + _0x28247a(0x8a5)); const _0x40cd48 = _0x2078d1 + (_0x5db19a + 0x1) * 0x3c * 0x3e8, _0x500a0a = { 'id': _0x28247a(0x7ec) + _0x19e215[_0x28247a(0xb63)] + '_' + _0x40cd48, 'authorType': _0x28247a(0x50e), 'authorId': _0x19e215[_0x28247a(0xb63)], 'content': _0x19e215[_0x28247a(0x517)], 'timestamp': _0x40cd48, 'likes': _0x19e215[_0x28247a(0x5e5)] || [], 'comments': (_0x19e215['comments'] || [])[_0x28247a(0x7d4)]((_0x9ab700, _0x16f571) => ({ 'commentId': 'c_' + _0x40cd48 + '_' + _0x16f571, 'authorId': _0x9ab700['authorId'], 'content': _0x9ab700[_0x28247a(0x329)] })) }; if (_0x19e215['postType'] === 'music' && _0x19e215[_0x28247a(0x70f)] && _0x19e215[_0x28247a(0x6e9)]) try { const _0x76e3e0 = await _0x4ff13a(_0x19e215[_0x28247a(0x70f)], _0x19e215[_0x28247a(0x6e9)]); _0x500a0a[_0x28247a(0x8c3)] = _0x28247a(0x35c), _0x500a0a[_0x28247a(0x70f)] = _0x19e215[_0x28247a(0x70f)], _0x500a0a[_0x28247a(0x6e9)] = _0x19e215[_0x28247a(0x6e9)], _0x500a0a[_0x28247a(0xb23)] = _0x76e3e0[_0x28247a(0x544)], _0x500a0a[_0x28247a(0xa36)] = _0x76e3e0['url']; } catch (_0x412cd8) { _0x28247a(0x422) !== _0x28247a(0x159) ? (console[_0x28247a(0x5f0)](_0x28247a(0x750), _0x412cd8), _0x500a0a[_0x28247a(0x8c3)] = _0x28247a(0x252)) : (_0x17fdaf['activeChatId'] = _0x1bb66c['id'], _0x34b196(), _0x2f5c5f(), _0xae0470(_0x3c3d17)); } else { if (_0x28247a(0x597) === _0x28247a(0x597)) _0x500a0a[_0x28247a(0x8c3)] = _0x28247a(0x252); else { const _0x5d38cc = _0x678904[_0x28247a(0x2da)](_0x28247a(0x1f9)); _0x5d38cc[_0x28247a(0x84e)] = _0x28247a(0x6c8), _0x5d38cc[_0x28247a(0x9c2)] = _0x28247a(0x913), _0x5d38cc[_0x28247a(0x795)](_0x28247a(0x213))[_0x28247a(0x5c8)] = () => _0x105ce7(_0x28247a(0x3bf)), _0x9176f1[_0x28247a(0x168)](_0x5d38cc), _0x452685(_0x4d8c07)[_0x28247a(0x8e7)](_0x1f3941 => { const _0x5a0bad = _0x28247a, _0x11037e = _0x141399[_0x5a0bad(0x653)]('pending-post-image-preview'); _0x11037e && _0x1f3941 && (_0x11037e[_0x5a0bad(0x74e)] = _0xa2eed0[_0x5a0bad(0x264)](_0x1f3941)); }); } } return _0x500a0a; }), _0x220af3 = await Promise[_0x336e4a(0x98d)](_0x558ee1); _0x4472f2[_0x336e4a(0xa6e)][_0x336e4a(0x24d)](..._0x220af3), _0x480928(); } } catch (_0x53ce36) { if (_0x336e4a(0xaed) === _0x336e4a(0xaed)) console[_0x336e4a(0x5f0)]('生成动态失败:', _0x53ce36), _0x5929aa('生成动态时发生错误:\x20' + _0x53ce36[_0x336e4a(0xa53)]); else { const _0x558684 = _0x252d60[_0x22ee53]; if (typeof _0x558684 === _0x336e4a(0x4b6)) _0x1e792b[_0x336e4a(0x24d)](_0x558684); if (_0x316858['isArray'](_0x558684)) _0x558684[_0x336e4a(0xa30)](_0x1f61db => { if (typeof _0x1f61db === 'string') _0x2d74d['push'](_0x1f61db); }); } } finally { _0x2229ef(), _0x1d9e54(![]), _0x1884b1['isGenerating'] = ![]; } } async function _0x284f32(_0x2bbd62) { const _0x3c4c39 = _0x5f58e0, _0x42c5be = _0x2bbd62[_0x3c4c39(0x42a)]['map'](_0x4dd987 => _0x21051e(_0x4dd987))[_0x3c4c39(0x776)](Boolean); if (_0x42c5be[_0x3c4c39(0x8a0)] === 0x0) return null; const _0x12d362 = _0x1b0dfd(), _0x2cfd4e = _0x4d4457(_0x2bbd62['boundUserProfileId']) || _0x1884b1['userProfiles'][0x0], _0x1336a7 = _0x2cfd4e ? _0x3c4c39(0x23b) + _0x2cfd4e[_0x3c4c39(0x7d7)] + '\x0a-\x20人设:\x20' + (_0x2cfd4e['persona'] || '无') + '\x0a' : '', _0x25e0f3 = _0x42c5be[_0x3c4c39(0x7d4)](_0x53738b => { const _0x126cb4 = _0x3c4c39; if (_0x126cb4(0x351) === _0x126cb4(0x351)) { const { omniText: _0x12fe2a } = _0x1c528d(_0x53738b['id'], null), _0x2f427f = _0x2c45f5(_0x53738b['id']), _0x171a8a = _0x53738b[_0x126cb4(0x99b)] && _0x53738b[_0x126cb4(0x99b)][_0x126cb4(0x8a0)] > 0x0 ? '\x0a\x0a#\x20' + _0x53738b[_0x126cb4(0x7d7)] + _0x126cb4(0x397) + _0x53738b[_0x126cb4(0x99b)][_0x126cb4(0x7d4)](_0x43c9d0 => _0x1884b1[_0x126cb4(0x562)][_0x126cb4(0x6f9)](_0x2ddd6f => _0x2ddd6f['id'] === _0x43c9d0))[_0x126cb4(0x776)](Boolean)[_0x126cb4(0x7d4)](_0x42bfbb => _0x126cb4(0x878) + _0x42bfbb[_0x126cb4(0x7d7)] + '\x0a' + _0x42bfbb['content'])[_0x126cb4(0x359)]('') : ''; return _0x126cb4(0xaba) + _0x53738b[_0x126cb4(0x7d7)] + _0x126cb4(0x555) + _0x53738b['id'] + _0x126cb4(0x427) + _0x53738b[_0x126cb4(0x370)] + _0x126cb4(0x859) + _0x12fe2a + '\x0a' + _0x2f427f + '\x0a' + _0x171a8a; } else { const _0x5bdf2e = _0x8221ce['linkedWorldBookIds'][_0x126cb4(0x7d4)](_0x1106a2 => _0x4eb696[_0x126cb4(0x562)][_0x126cb4(0x6f9)](_0x1f39f1 => _0x1f39f1['id'] === _0x1106a2))['filter'](_0x5821a1)[_0x126cb4(0x7d4)](_0x3585c5 => _0x126cb4(0x15c) + _0x3585c5['name'] + '\x0a' + _0x3585c5[_0x126cb4(0x329)])[_0x126cb4(0x359)](''); if (_0x5bdf2e) _0x798845 = _0x126cb4(0x60b) + _0x5bdf2e; } })[_0x3c4c39(0x359)]('\x0a\x0a'), _0xb3344f = Math[_0x3c4c39(0xa29)](Math[_0x3c4c39(0x664)]() * 0x3) + 0x2, _0x191e43 = _0x3c4c39(0x909) + _0xb3344f + _0x3c4c39(0xa0c) + _0x25e0f3 + '\x0a' + _0x1336a7 + _0x3c4c39(0x5d8) + _0x12d362 + _0x3c4c39(0x939) + _0xb3344f + '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20' + _0xb3344f + _0x3c4c39(0x38f), _0x42ffa6 = [{ 'role': _0x3c4c39(0xa40), 'content': _0x191e43 }, { 'role': 'user', 'content': '请根据以上所有信息，开始分析并返回JSON。' }]; _0x42ffa6[_0x3c4c39(0x24d)]({ 'role': _0x3c4c39(0x901), 'content': _0x3c4c39(0x958) + _0xb3344f + _0x3c4c39(0x3b7) }); try { if (_0x3c4c39(0x67e) !== _0x3c4c39(0x9a0)) { const _0x38c020 = await _0x286894(_0x42ffa6, { 'json': !![] }), _0x1b138c = _0x38c020['match'](/(\[[\s\S]*\])/); if (!_0x1b138c) throw new Error(_0x3c4c39(0x1cb)); const _0x46a1ec = _0x1b138c[0x1], _0x568775 = JSON[_0x3c4c39(0x440)](_0x46a1ec); if (!Array[_0x3c4c39(0xb41)](_0x568775)) throw new Error(_0x3c4c39(0x429)); return _0x568775; } else return _0x36af13[_0x3c4c39(0x650)](_0x189714, _0xf0e61a + 0x1); } catch (_0x14da74) { return console['error'](_0x3c4c39(0x93d), _0x14da74), console['error'](_0x3c4c39(0x388), _0x14da74['rawResponse'] || _0x3c4c39(0x6b8)), null; } } async function _0x478583() { const _0x5798ec = _0x5f58e0, _0x548b6f = _0x1884b1[_0x5798ec(0xa26)][_0x5798ec(0x6f9)](_0x1d4ebd => _0x1d4ebd['id'] === _0x1884b1['activeFriendCircleId']); if (!_0x548b6f) return; const _0x479c49 = await _0x9e00ac('确定要清空好友圈“' + _0x548b6f[_0x5798ec(0x7d7)] + _0x5798ec(0xb34)); _0x479c49 && (_0x548b6f[_0x5798ec(0xa6e)] = [], _0x480928(), _0x2229ef(), _0x5929aa(_0x5798ec(0x583))); } function _0x2229ef() { const _0x4dbc64 = _0x5f58e0, _0x573e59 = document[_0x4dbc64(0x653)](_0x4dbc64(0x368)), _0x43e747 = _0x1884b1[_0x4dbc64(0xa26)][_0x4dbc64(0x6f9)](_0x1c5c76 => _0x1c5c76['id'] === _0x1884b1[_0x4dbc64(0x825)]); if (!_0x43e747) { if (_0x4dbc64(0x4c3) !== _0x4dbc64(0x379)) { _0x573e59['innerHTML'] = _0x4dbc64(0x54e); return; } else _0x126351[_0x4dbc64(0xb7b)][_0x4dbc64(0x344)]('show'); } if (!_0x43e747['posts'] || _0x43e747[_0x4dbc64(0xa6e)][_0x4dbc64(0x8a0)] === 0x0) { _0x573e59[_0x4dbc64(0x9c2)] = _0x4dbc64(0x2b4); return; } _0x573e59[_0x4dbc64(0x9c2)] = ''; const _0x47b8ba = [..._0x43e747[_0x4dbc64(0xa6e)]][_0x4dbc64(0x9ec)]((_0x3f7bff, _0x535aea) => _0x535aea[_0x4dbc64(0x1af)] - _0x3f7bff[_0x4dbc64(0x1af)]); _0x47b8ba[_0x4dbc64(0xa30)](_0x450f56 => { const _0x40c5c4 = _0x4dbc64, _0x391433 = document[_0x40c5c4(0x2da)](_0x40c5c4(0x1f9)); _0x391433[_0x40c5c4(0x84e)] = 'music-post'; let _0x32cb7b = '未知', _0x456d6c = _0xe4a1db; if (_0x450f56[_0x40c5c4(0x7dc)] === 'user') { const _0x264f70 = _0x4d4457(_0x450f56['authorId']); _0x264f70 && (_0x32cb7b = _0x264f70[_0x40c5c4(0x7d7)], _0x456d6c = _0x264f70['avatar']); } else { const _0x4719bd = _0x21051e(_0x450f56[_0x40c5c4(0xb63)]); _0x4719bd && (_0x32cb7b = _0x4719bd['name'], _0x456d6c = _0x4719bd[_0x40c5c4(0x99a)]); } const _0xa912e4 = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x456d6c + '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>' + _0x32cb7b + _0x40c5c4(0xae5), _0x336b1b = _0x40c5c4(0x9bc) + _0x450f56[_0x40c5c4(0x329)] + '</p>'; let _0x511a7e = ''; if (_0x450f56['image'] || _0x450f56[_0x40c5c4(0xaa4)]) { if (_0x40c5c4(0x871) !== _0x40c5c4(0x871)) _0x5831f9(_0x40c5c4(0x6d1) + _0x29a967[_0x40c5c4(0xa53)]); else { const _0x3401d8 = _0x40c5c4(0xb1c) + _0x450f56['id']; _0x511a7e = _0x40c5c4(0x3fa) + _0x3401d8 + _0x40c5c4(0x6df), setTimeout(() => { const _0x1f3fec = _0x40c5c4, _0x297a7c = document['getElementById'](_0x3401d8); if (!_0x297a7c) return; if (_0x450f56[_0x1f3fec(0x3bf)]) _0x297a7c[_0x1f3fec(0x74e)] = _0x450f56[_0x1f3fec(0x3bf)]; else _0x450f56[_0x1f3fec(0xaa4)] && _0x329660(_0x450f56[_0x1f3fec(0xaa4)])[_0x1f3fec(0x8e7)](_0x2c733a => { const _0x3549e9 = _0x1f3fec; if (_0x2c733a) { const _0x55911e = URL['createObjectURL'](_0x2c733a); _0x297a7c[_0x3549e9(0x74e)] = _0x55911e, _0x297a7c[_0x3549e9(0x3e1)] = () => URL[_0x3549e9(0x80e)](_0x55911e); } }); }, 0x0); } } let _0x246f46 = ''; _0x450f56['type'] === _0x40c5c4(0x35c) && _0x450f56[_0x40c5c4(0x70f)] && (_0x40c5c4(0x36a) !== 'ViGmw' ? _0x59e99f += '-\x20你拍过一张照片，内容是：“' + _0xa8dd5b[_0x40c5c4(0x3ed)] + _0x40c5c4(0x185) : _0x246f46 = _0x40c5c4(0x622) + _0x450f56['id'] + _0x40c5c4(0x8b9) + (_0x450f56[_0x40c5c4(0xb23)] || _0xe4a1db) + _0x40c5c4(0x43f) + _0x450f56[_0x40c5c4(0x70f)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x450f56[_0x40c5c4(0x6e9)] + _0x40c5c4(0x929) + (_0x450f56[_0x40c5c4(0xa36)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'); const _0x4e4307 = _0x40c5c4(0x2d2) + new Date(_0x450f56[_0x40c5c4(0x1af)])[_0x40c5c4(0x40a)](_0x40c5c4(0x567)) + _0x40c5c4(0x681); let _0x642c59 = ''; if (_0x450f56[_0x40c5c4(0x5e5)] && _0x450f56[_0x40c5c4(0x5e5)][_0x40c5c4(0x8a0)] > 0x0 || _0x450f56['comments'] && _0x450f56[_0x40c5c4(0x9ae)][_0x40c5c4(0x8a0)] > 0x0) { let _0x54f563 = ''; if (_0x450f56[_0x40c5c4(0x5e5)] && _0x450f56[_0x40c5c4(0x5e5)][_0x40c5c4(0x8a0)] > 0x0) { const _0x3539a7 = _0x450f56[_0x40c5c4(0x5e5)][_0x40c5c4(0x7d4)](_0x11432b => _0x21051e(_0x11432b)?.[_0x40c5c4(0x7d7)] || '未知')[_0x40c5c4(0x359)]('、'), _0x1668e5 = _0x40c5c4(0xb44); _0x54f563 = _0x40c5c4(0x7f2) + _0x1668e5 + '\x20' + _0x3539a7 + _0x40c5c4(0x681); } let _0x365154 = ''; if (_0x450f56[_0x40c5c4(0x9ae)] && _0x450f56[_0x40c5c4(0x9ae)]['length'] > 0x0) { if (_0x40c5c4(0xa94) === _0x40c5c4(0x5dd)) _0x3f667b = _0x126389[_0x40c5c4(0x3bf)]; else { const _0x4b14b8 = _0x450f56['comments'][_0x40c5c4(0x7d4)](_0xd739e9 => { const _0x22a5d4 = _0x40c5c4, _0x570cb3 = _0x21051e(_0xd739e9['authorId'])?.[_0x22a5d4(0x7d7)] || '未知'; return _0x22a5d4(0x6e2) + _0x570cb3 + _0x22a5d4(0x69b) + _0xd739e9[_0x22a5d4(0x329)] + _0x22a5d4(0x681); })[_0x40c5c4(0x359)](''); _0x365154 = _0x40c5c4(0x7b3) + _0x4b14b8 + '</div>'; } } _0x642c59 = _0x40c5c4(0x930) + _0x54f563 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x365154 + _0x40c5c4(0xb62); } const _0x4962f1 = _0x40c5c4(0x633) + _0x336b1b + _0x511a7e + _0x246f46 + _0x40c5c4(0x681); _0x391433[_0x40c5c4(0x9c2)] = _0xa912e4 + _0x4962f1 + _0x4e4307 + _0x642c59; if (_0x450f56[_0x40c5c4(0x8c3)] === _0x40c5c4(0x35c) && _0x450f56[_0x40c5c4(0xa36)]) { if (_0x40c5c4(0x210) === _0x40c5c4(0x210)) { const _0x5b195a = _0x391433[_0x40c5c4(0x795)]('.music-post-song-card'); _0x5b195a && _0x5b195a['addEventListener']('click', function () { const _0x350721 = _0x40c5c4, _0x280ddb = { 'id': _0x450f56['id'], 'url': _0x450f56[_0x350721(0xa36)] }; _0x3734cf(this, _0x280ddb); }); } else _0x4487ef['name'] = _0x4af712, _0x540707[_0x40c5c4(0x329)] = _0x3fc2c1; } _0x573e59[_0x40c5c4(0x168)](_0x391433); }); } document['getElementById']('clear-feed-button')[_0x5f58e0(0xacf)]('click', _0x478583), document['getElementById']('refresh-feed-button')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x266322), document['getElementById'](_0x5f58e0(0x48a))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883('home', _0x5f58e0(0x585))), document[_0x5f58e0(0x653)](_0x5f58e0(0x918))[_0x5f58e0(0xacf)]('click', () => _0x3a3b85()), document[_0x5f58e0(0x653)](_0x5f58e0(0x63e))[_0x5f58e0(0xacf)]('click', () => _0x13d883(_0x5f58e0(0x585), _0x5f58e0(0x492))), document[_0x5f58e0(0x653)]('save-friend-circle-button')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x265940), document[_0x5f58e0(0x653)](_0x5f58e0(0xa98))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x356697), document[_0x5f58e0(0x653)](_0x5f58e0(0x444))[_0x5f58e0(0xacf)]('click', () => { const _0x180f47 = _0x5f58e0; _0x180f47(0xabc) !== _0x180f47(0xabc) ? _0x12a751(_0x180f47(0x5ba) + _0x180da1[_0x180f47(0xa53)] + _0x180f47(0xa6d)) : (_0x4512e1(), _0x13d883(_0x180f47(0x585), _0x180f47(0x35c))); }), document[_0x5f58e0(0x653)]('edit-current-circle-button')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x54463a = _0x5f58e0; _0x1884b1[_0x54463a(0x825)] && _0x3a3b85(_0x1884b1['activeFriendCircleId']); }), document['getElementById'](_0x5f58e0(0xb64))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), async () => { const _0x14d8c2 = _0x5f58e0, _0x48d385 = _0x1884b1['friendCircles'][_0x14d8c2(0x6f9)](_0x44930f => _0x44930f['id'] === _0x1884b1[_0x14d8c2(0x825)]); if (!_0x48d385 || _0x1884b1[_0x14d8c2(0xa54)]) return; const _0x289e64 = _0x48d385[_0x14d8c2(0x70c)], _0x413144 = _0x1884b1[_0x14d8c2(0x38c)][_0x14d8c2(0x6f9)](_0x311c88 => _0x311c88['id'] === _0x289e64); if (!_0x413144) { _0x5929aa(_0x14d8c2(0x4fa)); return; } const _0xc68c55 = document['getElementById'](_0x14d8c2(0x9fe))[_0x14d8c2(0x3cd)][_0x14d8c2(0x87b)](), _0x57e5d4 = _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0x3bf)], _0x3be29c = _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0x35c)], _0x1dcfb3 = _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0xaa4)]; if (!_0xc68c55 && !_0x57e5d4 && !_0x3be29c) { if (_0x14d8c2(0x6a6) === 'CihCi') _0x249eeb[_0x14d8c2(0x5f0)](_0x14d8c2(0x1a4), _0x394c89), _0xca36e8[_0x14d8c2(0x74e)] = ''; else { _0x5929aa(_0x14d8c2(0x18e)); return; } } const _0x226ceb = { 'id': _0x14d8c2(0x9e9) + Date[_0x14d8c2(0x965)](), 'authorType': 'user', 'authorId': _0x413144['id'], 'content': _0xc68c55, 'timestamp': Date[_0x14d8c2(0x965)](), 'likes': [], 'comments': [] }; if (_0x1dcfb3) _0x226ceb[_0x14d8c2(0xaa4)] = _0x1dcfb3; else { if (_0x57e5d4) { if (_0x14d8c2(0xa9c) !== 'futYe') _0x226ceb[_0x14d8c2(0x3bf)] = _0x57e5d4; else { const _0x8de535 = _0x40312f[_0x14d8c2(0xb25)](_0x18308e, _0x14d8c2(0xadd)), _0x2c6387 = _0x8de535['objectStore'](_0x3467cd), _0x455c2d = _0x2c6387[_0x14d8c2(0x215)](_0x4de168); _0x455c2d[_0x14d8c2(0x8ef)] = () => _0x35c1fc(_0x455c2d['result']), _0x455c2d[_0x14d8c2(0x740)] = () => _0x1da317(_0x455c2d[_0x14d8c2(0x5f0)]); } } } _0x3be29c ? (_0x226ceb[_0x14d8c2(0x8c3)] = _0x14d8c2(0x35c), Object['assign'](_0x226ceb, _0x3be29c)) : _0x226ceb[_0x14d8c2(0x8c3)] = _0x14d8c2(0x252), _0x48d385[_0x14d8c2(0xa6e)][_0x14d8c2(0x24d)](_0x226ceb), _0x480928(), _0x2229ef(), document[_0x14d8c2(0x653)](_0x14d8c2(0x9fe))['value'] = '', _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0x3bf)] = null, _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0x35c)] = null, _0x1884b1[_0x14d8c2(0xacb)][_0x14d8c2(0xaa4)] = null, _0x1b4a22(), _0x589eba(_0x226ceb); }), document[_0x5f58e0(0x653)](_0x5f58e0(0x39c))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x1d40bd = _0x5f58e0; 'EKDjL' === _0x1d40bd(0x7d3) ? _0x256be1['appendChild'](_0xe8c124) : document['getElementById']('user-post-image-input')[_0x1d40bd(0x4f4)](); }), document['getElementById'](_0x5f58e0(0x4af))[_0x5f58e0(0xacf)](_0x5f58e0(0xb6d), async _0x24ba34 => { const _0x2b6bf6 = _0x5f58e0, _0x29bfcd = _0x24ba34[_0x2b6bf6(0xa4b)]['files'][0x0]; if (!_0x29bfcd) return; try { const _0x37c27a = await _0x4f9511(_0x29bfcd, 0x320, 0.8, !![]), _0x241578 = _0x2b6bf6(0x3d1) + Date['now'](); await _0x100c88(_0x241578, _0x37c27a), _0x1884b1[_0x2b6bf6(0xacb)][_0x2b6bf6(0xaa4)] = _0x241578, _0x1884b1[_0x2b6bf6(0xacb)][_0x2b6bf6(0x3bf)] = null, _0x1884b1[_0x2b6bf6(0xacb)][_0x2b6bf6(0x35c)] = null, _0x1b4a22(); } catch (_0xb318a2) { _0x5929aa(_0x2b6bf6(0x6b4) + _0xb318a2[_0x2b6bf6(0xa53)]); } _0x24ba34['target'][_0x2b6bf6(0x3cd)] = ''; }), document['getElementById'](_0x5f58e0(0x948))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), async () => { const _0x138a99 = _0x5f58e0, _0x34baf3 = await _0x43a6b9(); if (!_0x34baf3) return; _0x5929aa(_0x138a99(0x7a7)); try { if (_0x138a99(0x371) === _0x138a99(0x371)) { const _0x1fbe50 = await _0x4ff13a(_0x34baf3[_0x138a99(0x70f)], _0x34baf3[_0x138a99(0x6e9)]); _0x1884b1[_0x138a99(0xacb)][_0x138a99(0x35c)] = { 'songName': _0x34baf3[_0x138a99(0x70f)], 'artist': _0x34baf3[_0x138a99(0x6e9)], 'coverUrl': _0x1fbe50[_0x138a99(0x544)], 'playableUrl': _0x1fbe50['url'] }, _0x1884b1[_0x138a99(0xacb)][_0x138a99(0x3bf)] = null, _0x1b4a22(); } else _0x40d960[_0x138a99(0xa30)](_0x25feea => { const _0x136afd = _0x138a99, _0x37617c = _0x25feea[_0x136afd(0x311)] === _0x136afd(0x50e), _0x2bf825 = _0x37617c ? _0x7e573e ? _0x2a24a8[0x0] : '?' : _0x5ddd9e ? _0x1fd8ef[0x0] : '?'; _0x5b7f1e += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x37617c ? _0x136afd(0x901) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x37617c ? _0x136afd(0x41c) + _0x2bf825 + _0x136afd(0x681) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0x37617c ? _0x136afd(0x901) : 'ai') + _0x136afd(0x1b4) + _0x25feea[_0x136afd(0x329)] + _0x136afd(0xb5b) + (_0x37617c ? _0x136afd(0x41c) + _0x2bf825 + _0x136afd(0x681) : '') + _0x136afd(0x2ae); }); } catch (_0x1c6446) { _0x5929aa(_0x138a99(0x3eb) + _0x1c6446[_0x138a99(0xa53)]); } }); function _0x4002bb() { const _0x269877 = _0x5f58e0, _0x2deb35 = new Date(), _0x35edff = document[_0x269877(0x653)]('home-time'), _0x18f024 = document[_0x269877(0x653)]('home-date'); if (_0x35edff && _0x18f024) { const _0x8eee2d = String(_0x2deb35[_0x269877(0x2e3)]())['padStart'](0x2, '0'), _0x46b187 = String(_0x2deb35[_0x269877(0x697)]())[_0x269877(0xa83)](0x2, '0'); _0x35edff[_0x269877(0x8f9)] = _0x8eee2d + ':' + _0x46b187; const _0x48b745 = _0x2deb35[_0x269877(0x978)]() + 0x1, _0xd23a43 = _0x2deb35[_0x269877(0x8ff)](), _0x59b6b8 = [_0x269877(0x85f), '星期一', _0x269877(0x579), '星期三', _0x269877(0x25f), _0x269877(0x4d7), _0x269877(0x771)][_0x2deb35['getDay']()]; _0x18f024[_0x269877(0x8f9)] = _0x48b745 + '月' + _0xd23a43 + '日\x20' + _0x59b6b8; } } function _0x4a8060(_0x2e1848) { const _0xcfb4c5 = _0x5f58e0; if (_0xcfb4c5(0x749) !== _0xcfb4c5(0x749)) { const _0x1f9d57 = _0x34ba24(_0x3c06bc); if (_0x1f9d57) { const _0xc2ff27 = _0x260349[_0xcfb4c5(0x2da)](_0xcfb4c5(0x503)); _0xc2ff27['value'] = _0x1f9d57['id'], _0xc2ff27['textContent'] = _0x1f9d57['name'], _0x3fc981[_0xcfb4c5(0x168)](_0xc2ff27); } } else { if (!_0x2e1848) return ''; const _0x2181ee = new Date(_0x2e1848), _0x1b4013 = String(_0x2181ee[_0xcfb4c5(0x2e3)]())['padStart'](0x2, '0'), _0x5d7963 = String(_0x2181ee['getMinutes']())['padStart'](0x2, '0'); return _0x1b4013 + ':' + _0x5d7963; } } function _0x1b0dfd() { const _0x39c1b6 = _0x5f58e0; if ('OCWqk' === 'OCWqk') { const _0x49da77 = _0x1884b1[_0x39c1b6(0xa26)][_0x39c1b6(0x6f9)](_0x189344 => _0x189344['id'] === _0x1884b1['activeFriendCircleId']), _0x3a240f = _0x49da77 ? _0x49da77['posts'] : []; if (!_0x3a240f || _0x3a240f[_0x39c1b6(0x8a0)] === 0x0) return ''; const _0x3a3ff4 = _0x3a240f['slice'](0x0, 0x5), _0x12cad7 = _0x3a3ff4[_0x39c1b6(0x7d4)](_0xb3d46c => { const _0x44fa98 = _0x39c1b6, _0x32069b = _0x21051e(_0xb3d46c[_0x44fa98(0xb63)]) || { 'name': '未知' }; let _0x9a41f9 = _0x44fa98(0xa6f) + _0x32069b[_0x44fa98(0x7d7)] + _0x44fa98(0x389) + (_0xb3d46c[_0x44fa98(0xa08)] || _0xb3d46c[_0x44fa98(0x329)]) + '”'; return _0xb3d46c['type'] === 'music' && (_0x9a41f9 += '\x20(分享了歌曲:\x20' + _0xb3d46c[_0x44fa98(0x70f)] + _0x44fa98(0x4ec) + _0xb3d46c[_0x44fa98(0x6e9)] + ')'), _0x9a41f9; }); return _0x39c1b6(0x578) + _0x12cad7['join']('\x0a'); } else _0x3794d4 = '你的任务是【首次生成】这个应用的内容。'; } function _0x2c45f5(_0x3de970) { const _0x3bc29f = _0x5f58e0, _0x4a39a2 = _0x1884b1[_0x3bc29f(0x38c)][_0x3bc29f(0x6f9)](_0x203f0f => _0x203f0f['id'] === _0x1884b1[_0x3bc29f(0x1d3)]) || { 'name': '你' }, _0x479982 = _0x1884b1[_0x3bc29f(0x7f1)][_0x3bc29f(0x6f9)](_0x583610 => _0x583610[_0x3bc29f(0x853)] === _0x3de970); if (!_0x479982 || !_0x479982['entries'] || _0x479982[_0x3bc29f(0xb3c)][_0x3bc29f(0x8a0)] === 0x0) return ''; const _0x22c112 = _0x479982['entries'][_0x3bc29f(0x46a)](-0x8), _0x21e0ca = _0x22c112['map'](_0x10647e => { const _0x22a4ff = _0x3bc29f, _0x388430 = _0x10647e[_0x22a4ff(0x15e)] === _0x22a4ff(0x901) ? _0x4a39a2[_0x22a4ff(0x7d7)] : _0x21051e(_0x10647e[_0x22a4ff(0x15e)])[_0x22a4ff(0x7d7)]; return _0x22a4ff(0x1c2) + new Date(_0x10647e[_0x22a4ff(0x1af)])[_0x22a4ff(0x600)]() + ']\x20' + _0x388430 + _0x22a4ff(0x3c1) + _0x10647e[_0x22a4ff(0x329)]; })[_0x3bc29f(0x359)]('\x0a'); return _0x3bc29f(0x32f) + _0x4a39a2['name'] + '\x20之间的私密内容)\x0a' + _0x21e0ca; } function _0x145bb9() { const _0x396260 = _0x5f58e0, _0x4b4246 = document[_0x396260(0x653)]('music-widget-card'), _0x572c06 = _0x1884b1[_0x396260(0xa17)][_0x396260(0x4b8)]; _0x572c06 ? (_0x4b4246[_0x396260(0x313)][_0x396260(0x956)] = 'url(' + _0x572c06 + ')', _0x4b4246[_0x396260(0x313)][_0x396260(0x5ab)] = _0x396260(0x544), _0x4b4246[_0x396260(0x313)][_0x396260(0x6e7)] = _0x396260(0xaa3), _0x4b4246[_0x396260(0x313)]['color'] = 'white', _0x4b4246[_0x396260(0x6e4)]('.widget-info\x20>\x20div')['forEach'](_0x1c8fde => { const _0x5c8d3f = _0x396260; _0x5c8d3f(0xa8e) !== _0x5c8d3f(0xa8e) ? _0x2be4ca(_0x72a94e) : _0x1c8fde[_0x5c8d3f(0x313)][_0x5c8d3f(0x6c4)] = _0x5c8d3f(0x951); })) : _0x396260(0xa0f) === _0x396260(0x937) ? (_0x2211d5(), _0x4bba0e(![]), _0x5de2a3[_0x396260(0xa54)] = ![]) : (_0x4b4246[_0x396260(0x313)]['backgroundImage'] = '', _0x4b4246[_0x396260(0x313)][_0x396260(0x2b2)] = '', _0x4b4246[_0x396260(0x6e4)](_0x396260(0x184))[_0x396260(0xa30)](_0x2ea770 => { const _0x1a5360 = _0x396260; _0x2ea770[_0x1a5360(0x313)][_0x1a5360(0x6c4)] = ''; })); } const _0x451f35 = document['getElementById'](_0x5f58e0(0x6f7)), _0x29fb4f = document[_0x5f58e0(0x653)]('app-meeting'); _0x451f35[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x257ce4 = _0x5f58e0; _0x4512e1(), _0x13d883(_0x257ce4(0x585), _0x257ce4(0x6fe)); }), _0x29fb4f[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { _0x2da830(), _0x13d883('meetingList', 'home'); }), document['getElementById']('back-to-home-from-meeting-list')['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x5747d8 = _0x5f58e0; _0x13d883('home', _0x5747d8(0x5c2)); }), document[_0x5f58e0(0x653)](_0x5f58e0(0x28b))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x37c91c = _0x5f58e0; if (_0x509211) clearInterval(_0x509211); _0x509211 = null, _0x1884b1[_0x37c91c(0x8ac)] = [], _0x1884b1[_0x37c91c(0x5f2)] = null, document['getElementById'](_0x37c91c(0xaac))[_0x37c91c(0x313)]['display'] = _0x37c91c(0x643), _0x1884b1[_0x37c91c(0x9a8)] = null, _0x480928(), _0x13d883(_0x37c91c(0x5c2), 'meetingView'); }); const _0x58ff75 = document['getElementById'](_0x5f58e0(0x3d6)), _0x53052a = document[_0x5f58e0(0x653)](_0x5f58e0(0x4dd)); _0x53052a[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x161541 = _0x5f58e0; if (_0x161541(0x660) !== _0x161541(0x660)) { _0x358963(_0x161541(0x409)); return; } else { const _0x384c67 = _0x58ff75[_0x161541(0x3cd)][_0x161541(0x87b)](); _0x384c67 && (_0x161541(0x654) !== _0x161541(0x654) ? (_0x6b85d2[_0x161541(0x4d1)](), _0x4771b4()) : (_0xa6a72(_0x384c67), _0x58ff75[_0x161541(0x3cd)] = '', setTimeout(_0x180c61, 0x64))); } }); function _0x3734cf(_0x5a1134, _0x4bd094) { const _0x22dc80 = _0x5f58e0, _0x62a158 = document['getElementById'](_0x22dc80(0x1ff)), _0x23022a = document[_0x22dc80(0x6e4)](_0x22dc80(0x524)); _0x23022a[_0x22dc80(0xa30)](_0x3e872b => { const _0x4ffeb4 = _0x22dc80; _0x3e872b !== _0x5a1134[_0x4ffeb4(0x795)]('.music-post-play-icon,\x20.music-share-play-icon') && (_0x4ffeb4(0x9af) === 'hyKdH' ? _0x3e872b[_0x4ffeb4(0x8f9)] = '▶' : _0x32e70c[_0x4ffeb4(0x825)] = null); }), _0x62a158[_0x22dc80(0x74e)] === _0x4bd094[_0x22dc80(0x51a)] && !_0x62a158['paused'] ? (_0x62a158['pause'](), _0x5a1134[_0x22dc80(0x795)](_0x22dc80(0x524))[_0x22dc80(0x8f9)] = '▶') : (_0x62a158['src'] = _0x4bd094[_0x22dc80(0x51a)], _0x62a158[_0x22dc80(0x9d7)](), _0x5a1134[_0x22dc80(0x795)]('.music-post-play-icon,\x20.music-share-play-icon')[_0x22dc80(0x8f9)] = '❚❚'); } const _0x8c3a26 = document[_0x5f58e0(0x653)](_0x5f58e0(0x851)); async function _0x2e9403(_0x12001b) { const _0x43d0f0 = _0x5f58e0; if (_0x43d0f0(0x9ed) !== _0x43d0f0(0x9ed)) _0x5dd630['classList'][_0x43d0f0(0x344)](_0x43d0f0(0x322)), _0x56f207 = null; else { if (!_0x12001b || !_0x12001b['startsWith']('http')) return ![]; return new Promise(_0x205446 => { const _0x4592d0 = _0x43d0f0, _0x2b270f = document['createElement'](_0x4592d0(0x8e1)); _0x2b270f['src'] = _0x12001b; const _0x39bca1 = setTimeout(() => { const _0x5782fb = _0x4592d0; _0x5782fb(0x81a) !== _0x5782fb(0x81a) ? (_0x328e22[_0x5782fb(0x673)](_0x5782fb(0x962) + _0x4e90bd['id']), _0x49c124(_0x5782fb(0x5eb) + _0x5d7f9c[_0x5782fb(0x7d7)] + _0x5782fb(0x1f7))) : (_0x53e600(), _0x205446(![])); }, 0xbb8), _0x53e600 = () => { const _0x36e752 = _0x4592d0; clearTimeout(_0x39bca1), _0x2b270f['removeEventListener']('canplaythrough', _0x37d68b), _0x2b270f[_0x36e752(0x870)](_0x36e752(0x5f0), _0x1edf08), _0x2b270f['src'] = '', _0x2b270f[_0x36e752(0x344)](); }, _0x37d68b = () => { const _0xefcf8a = _0x4592d0; if (_0xefcf8a(0x5d2) !== _0xefcf8a(0x5d2)) { const _0x268336 = _0xd36b00['author'] === _0xefcf8a(0x901) ? _0x1c19b5['name'] : _0x138828(_0x539b84[_0xefcf8a(0x15e)])[_0xefcf8a(0x7d7)]; return '-\x20[' + new _0x530959(_0x3a9417[_0xefcf8a(0x1af)])['toLocaleDateString']() + ']\x20' + _0x268336 + _0xefcf8a(0x3c1) + _0x33fe1d[_0xefcf8a(0x329)]; } else _0x53e600(), _0x205446(!![]); }, _0x1edf08 = () => { _0x53e600(), _0x205446(![]); }; _0x2b270f['addEventListener'](_0x4592d0(0x46b), _0x37d68b), _0x2b270f[_0x4592d0(0xacf)](_0x4592d0(0x5f0), _0x1edf08); }); } } async function _0x4ff13a(_0x5e8264, _0x36e6a4) { const _0x5aebed = _0x5f58e0, _0x2e4043 = [_0x5aebed(0x2f9), 'tencent']; for (const _0x5c1cb0 of _0x2e4043) { try { if ('KgJNW' === _0x5aebed(0x278)) { const _0x4d0fd3 = 'https://api.vkeys.cn/v2/music/' + _0x5c1cb0 + '?word=' + encodeURIComponent(_0x5e8264) + '-' + encodeURIComponent(_0x36e6a4), _0x663e5d = await fetch(_0x4d0fd3), _0x565c2b = await _0x663e5d['json'](); if (_0x565c2b['code'] !== 0xc8 || !_0x565c2b['data'] || _0x565c2b[_0x5aebed(0xb75)]['length'] === 0x0) continue; const _0x45e8ac = _0x565c2b[_0x5aebed(0xb75)]['slice'](0x0, 0x5); for (const _0x4ec696 of _0x45e8ac) { const _0x2f5657 = 'https://api.vkeys.cn/v2/music/' + _0x5c1cb0 + _0x5aebed(0x3b5) + _0x4ec696['id'], _0x5ef2d1 = await fetch(_0x2f5657), _0x557361 = await _0x5ef2d1[_0x5aebed(0x87e)](), _0xe49eb1 = _0x557361[_0x5aebed(0xb75)]?.['url']; if (await _0x2e9403(_0xe49eb1)) return { 'url': _0xe49eb1, 'cover': _0x4ec696[_0x5aebed(0x544)], 'source': _0x5c1cb0 }; } } else _0x47083c += '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a'; } catch (_0x16d74d) { console[_0x5aebed(0x5f0)]('Error\x20fetching\x20from\x20' + _0x5c1cb0 + ':', _0x16d74d); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x59363b(_0x3decb3) { const _0x1fc6fe = _0x5f58e0; if ('bNDZN' === _0x1fc6fe(0x9fa)) { _0x554863(_0x1fc6fe(0x45d)); return; } else try { if (_0x1fc6fe(0x26f) === _0x1fc6fe(0x331)) _0xd36970[_0x1fc6fe(0x46c)] = ![]; else { const _0x33e01e = JSON['parse'](localStorage[_0x1fc6fe(0x6da)]('badgeState') || '{}'), _0x2fedfd = { ..._0x33e01e, ..._0x3decb3 }; localStorage[_0x1fc6fe(0x7db)]('badgeState', JSON[_0x1fc6fe(0x98f)](_0x2fedfd)); } } catch (_0x1c4c1e) { if (_0x1fc6fe(0x881) !== _0x1fc6fe(0x881)) { if (!_0x2ba615['isArray'](_0xf206af)) return _0x1fc6fe(0x2bf); if (_0x1d2b22[_0x1fc6fe(0x8a0)] === 0x0) return _0x1fc6fe(0x92f); return _0x4e2113[_0x1fc6fe(0x9ec)]((_0x1bc043, _0x3f1a7d) => new _0x325f9c(_0x3f1a7d[_0x1fc6fe(0xa10)]) - new _0x1cecd3(_0x1bc043[_0x1fc6fe(0xa10)])), _0x50eedf['map'](_0x3ac8a7 => _0x1fc6fe(0x4a4) + (_0x3ac8a7[_0x1fc6fe(0x869)] || _0x1fc6fe(0x568)) + _0x1fc6fe(0x321) + (_0x3ac8a7['content'] || '') + _0x1fc6fe(0x936) + (_0x3ac8a7[_0x1fc6fe(0xa10)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x1fc6fe(0x359)](''); } else console[_0x1fc6fe(0x5f0)](_0x1fc6fe(0x2d3), _0x1c4c1e); } } async function _0x5d1b13() { const _0xe675d7 = _0x5f58e0; if (_0xe675d7(0x35f) !== 'hwELA') _0x3c923e(!![]); else { const _0x560e8f = document[_0xe675d7(0x653)]('decorative-badge'), _0x1859a2 = document['getElementById']('badge-image'); try { let _0x533339 = await _0x329660(_0xe675d7(0x64f)); if (!_0x533339) { if (_0xe675d7(0x862) !== _0xe675d7(0x862)) _0x12ef03[_0xe675d7(0x6c1)](_0x226678, _0x4f023d); else { const _0x4d0704 = JSON[_0xe675d7(0x440)](localStorage[_0xe675d7(0x6da)](_0xe675d7(0x743)) || '{}'); _0x4d0704['image'] && (_0xe675d7(0x5b7) === _0xe675d7(0x620) ? _0x34b3c6() : (_0x533339 = await _0x3d106b(_0x4d0704[_0xe675d7(0x3bf)]), await _0x100c88(_0xe675d7(0x64f), _0x533339))); } } _0x533339 ? (_0x1859a2['src'] = URL[_0xe675d7(0x264)](_0x533339), _0x1859a2['style']['display'] = _0xe675d7(0x8b0), _0x560e8f[_0xe675d7(0x313)][_0xe675d7(0x639)] = _0xe675d7(0x643)) : (_0x1859a2[_0xe675d7(0x313)]['display'] = 'none', _0x560e8f[_0xe675d7(0x313)][_0xe675d7(0x639)] = _0xe675d7(0x26b)), _0x560e8f[_0xe675d7(0x313)]['display'] = _0xe675d7(0x8b0); } catch (_0x2b106a) { _0xe675d7(0x717) !== 'rPNZL' ? (_0x498fcd[_0xe675d7(0x74e)] = _0x57aa31[_0xe675d7(0x264)](_0x56d522), _0x476ebd[_0xe675d7(0x313)]['opacity'] = 0x1) : console[_0xe675d7(0x5f0)](_0xe675d7(0x268), _0x2b106a); } } } async function _0x1c016c() { const _0xe8282a = _0x5f58e0, _0x100f86 = document[_0xe8282a(0x653)](_0xe8282a(0x934)), _0x11b9c0 = document[_0xe8282a(0x653)](_0xe8282a(0xabb)), _0x32027a = document[_0xe8282a(0x653)](_0xe8282a(0x39b)), _0x2e1e6a = document[_0xe8282a(0x653)]('card-image-2'); try { let _0x21df02 = await _0x329660(_0xe8282a(0x823)); _0x21df02 ? (_0x11b9c0[_0xe8282a(0x74e)] = URL[_0xe8282a(0x264)](_0x21df02), _0x11b9c0[_0xe8282a(0x313)][_0xe8282a(0x272)] = _0xe8282a(0x8b0), _0x100f86[_0xe8282a(0x313)]['border'] = 'none', _0x100f86[_0xe8282a(0x313)][_0xe8282a(0x1fa)] = 'transparent') : _0xe8282a(0x5ce) !== _0xe8282a(0xaeb) ? (_0x11b9c0[_0xe8282a(0x313)][_0xe8282a(0x272)] = _0xe8282a(0x643), _0x100f86[_0xe8282a(0x313)][_0xe8282a(0x639)] = _0xe8282a(0x26b), _0x100f86[_0xe8282a(0x313)]['background'] = _0xe8282a(0x459)) : (_0x2268d8(), _0x16cef1('home', _0xe8282a(0x842))); _0x100f86[_0xe8282a(0x313)][_0xe8282a(0x272)] = 'block'; let _0x87ad37 = await _0x329660(_0xe8282a(0x3a9)); if (_0x87ad37) _0xe8282a(0x302) !== _0xe8282a(0x794) ? (_0x2e1e6a['src'] = URL[_0xe8282a(0x264)](_0x87ad37), _0x2e1e6a[_0xe8282a(0x313)][_0xe8282a(0x272)] = _0xe8282a(0x8b0), _0x32027a[_0xe8282a(0x313)]['border'] = _0xe8282a(0x643), _0x32027a[_0xe8282a(0x313)][_0xe8282a(0x1fa)] = _0xe8282a(0x9e1)) : !_0x27a819[_0xe8282a(0x795)](_0xe8282a(0x44d))[_0xe8282a(0x974)](_0x3106b6[_0xe8282a(0xa4b)]) && (_0x36bec1[_0xe8282a(0xb7b)]['remove'](_0xe8282a(0x9fb)), _0x24855e[_0xe8282a(0xb7b)][_0xe8282a(0x344)](_0xe8282a(0x7b2))); else { if (_0xe8282a(0x3ac) !== _0xe8282a(0x3ac)) { if (_0x311064) _0x3495cf(_0x1d5882); } else _0x2e1e6a[_0xe8282a(0x313)][_0xe8282a(0x272)] = _0xe8282a(0x643), _0x32027a[_0xe8282a(0x313)][_0xe8282a(0x639)] = '2px\x20dashed\x20var(--border-color)', _0x32027a[_0xe8282a(0x313)][_0xe8282a(0x1fa)] = _0xe8282a(0x459); } _0x32027a[_0xe8282a(0x313)][_0xe8282a(0x272)] = 'block'; } catch (_0x373950) { console[_0xe8282a(0x5f0)]('加载卡片图片失败', _0x373950); } } async function _0x1c016c() { const _0x3140e9 = _0x5f58e0; if (_0x3140e9(0x6aa) === _0x3140e9(0x5a9)) { const _0x31fe5f = new _0x22f6cb(_0x4a20e6[_0x3140e9(0x1af)]); _0x5e4109 += _0x3140e9(0x992) + _0x178494[_0x3140e9(0x7d7)] + _0x3140e9(0x6cb) + _0x340418(_0x31fe5f) + '\x0a'; const _0x27ed83 = _0xfe98a0[_0x3140e9(0x65b)]() === _0x31fe5f['toDateString'](), _0x1f3545 = new _0x550a65(); _0x1f3545[_0x3140e9(0xad6)](_0x3f1a1d[_0x3140e9(0x8ff)]() - 0x1); const _0x7299db = _0x1f3545[_0x3140e9(0x65b)]() === _0x31fe5f[_0x3140e9(0x65b)](); if (_0x27ed83) _0x132e04 += '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a'; else _0x7299db ? _0x3b587d += '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a' : _0x3d4415 += '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a'; } else { const _0x57fbb5 = document[_0x3140e9(0x653)](_0x3140e9(0x934)), _0x5c56e3 = document['getElementById'](_0x3140e9(0xabb)); try { let _0x1232a1 = await _0x329660(_0x3140e9(0x823)); if (!_0x1232a1) { const _0x2da8bc = JSON[_0x3140e9(0x440)](localStorage['getItem']('cardWidgetState') || '{}'); _0x2da8bc[_0x3140e9(0x3bf)] && (console[_0x3140e9(0xace)]('正在搬运旧卡片...'), _0x1232a1 = await _0x3d106b(_0x2da8bc[_0x3140e9(0x3bf)]), await _0x100c88(_0x3140e9(0x823), _0x1232a1)); } _0x1232a1 ? (_0x5c56e3[_0x3140e9(0x74e)] = URL[_0x3140e9(0x264)](_0x1232a1), _0x57fbb5[_0x3140e9(0x313)]['display'] = 'block') : _0x57fbb5[_0x3140e9(0x313)][_0x3140e9(0x272)] = _0x3140e9(0x643); } catch (_0x1f70bb) { if ('GGZrV' !== _0x3140e9(0x22e)) console['error'](_0x3140e9(0x983), _0x1f70bb); else { _0x29de65['innerHTML'] = _0x3140e9(0x28f); return; } } try { if (_0x3140e9(0x539) === 'NtAPa') { let _0x4c0319 = await _0x329660(_0x3140e9(0x3a9)); const _0x38afeb = document[_0x3140e9(0x653)](_0x3140e9(0x4ba)), _0x202d21 = document[_0x3140e9(0x653)](_0x3140e9(0x39b)); _0x4c0319 ? (_0x38afeb['src'] = URL[_0x3140e9(0x264)](_0x4c0319), _0x202d21[_0x3140e9(0x313)][_0x3140e9(0x272)] = _0x3140e9(0x8b0)) : _0x202d21[_0x3140e9(0x313)]['display'] = 'none'; } else { const _0x35d8f8 = _0x3140e9(0x8cb) + _0x225ac0; let _0x3ad001 = _0x303327['getElementById'](_0x35d8f8); if (_0x3ad001) return; const _0x50f4f3 = _0x3140e9(0x6b6) + _0x35d8f8 + '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x41b414 === 'ai' ? _0x3140e9(0x6be) : '') + _0x3140e9(0x97c); _0x3426a3['body'][_0x3140e9(0x8e4)](_0x3140e9(0x819), _0x50f4f3); const _0x340d32 = _0x1877f8[_0x3140e9(0x653)](_0x35d8f8), _0x1aebdb = () => _0x340d32['remove'](); _0x340d32[_0x3140e9(0x795)](_0x3140e9(0x340))[_0x3140e9(0x5c8)] = _0x1aebdb, _0x340d32[_0x3140e9(0x795)](_0x3140e9(0xa6a))['onclick'] = _0x1aebdb, _0x340d32[_0x3140e9(0x795)]('#diary-action-delete')[_0x3140e9(0x5c8)] = () => { _0xc1a459(_0x20c91d), _0x1aebdb(); }, _0x4a3a86 === 'ai' && (_0x340d32[_0x3140e9(0x795)](_0x3140e9(0x4ac))['onclick'] = () => { _0x17901c(_0x4f7062), _0x1aebdb(); }); } } catch (_0x3ec6e4) { console[_0x3140e9(0x5f0)](_0x3140e9(0xb4d), _0x3ec6e4); } } } _0x24fd32[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x37a786 = _0x5f58e0; _0x29d27a(), _0x13d883(_0x37a786(0xb0b), 'home'); }), document[_0x5f58e0(0x653)](_0x5f58e0(0x5bd))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883('home', 'userProfileList')), document['getElementById'](_0x5f58e0(0x571))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x1a9b5a()), document[_0x5f58e0(0x653)](_0x5f58e0(0xb20))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x190f95 = _0x5f58e0; _0x29d27a(), _0x13d883(_0x190f95(0xb0b), 'userProfile'); }), document[_0x5f58e0(0x653)](_0x5f58e0(0x883))['addEventListener'](_0x5f58e0(0x4f4), _0x5c45f3), document[_0x5f58e0(0x653)]('delete-user-profile-button')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x207ebb), document[_0x5f58e0(0x653)]('set-active-user-button')['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x152474 = _0x5f58e0; if (_0x152474(0xa7e) === _0x152474(0xab0)) { const _0x29656d = _0x380789[_0x152474(0x653)](_0x152474(0x86f)), _0x5c921f = _0x1a0cfb[_0x152474(0x653)](_0x152474(0x53a)), _0x3d55f5 = _0x29656d[_0x152474(0x3cd)][_0x152474(0x87b)](), _0xaadc5e = _0x502b43(_0x5c921f[_0x152474(0x3cd)]); if (!_0x3d55f5 || _0x29187f(_0xaadc5e) || _0xaadc5e <= 0x0) { _0x4258a6(_0x152474(0x7f6)); return; } _0x152e61[_0x152474(0x447)][_0x152474(0x24d)]({ 'id': _0x152474(0x294) + _0x392908['now'](), 'description': _0x3d55f5, 'amount': _0xaadc5e, 'timestamp': _0x2449e9[_0x152474(0x965)]() }), _0x5d8f2d(), _0x245dbb(), _0x29656d[_0x152474(0x3cd)] = '', _0x5c921f[_0x152474(0x3cd)] = '', _0x29656d['focus'](); } else { const _0x11e61c = document[_0x152474(0x653)]('editing-user-id')[_0x152474(0x3cd)]; _0x11e61c && (_0x1884b1[_0x152474(0x1d3)] = _0x11e61c, _0x480928(), _0x5929aa('已设为当前用户！'), _0x29d27a(), document[_0x152474(0x653)](_0x152474(0x1e0))[_0x152474(0x313)]['display'] = 'none'); } }); function _0x4079e8(_0xf57a31) { const _0x53d875 = _0x5f58e0, _0x25a07a = _0x1884b1[_0x53d875(0x940)][_0x53d875(0x6f9)](_0x2d45e1 => _0x2d45e1['id'] === _0xf57a31), _0x2b025a = _0x25a07a?.[_0x53d875(0x70c)]; let _0x3de99f = _0x1884b1[_0x53d875(0x38c)][_0x53d875(0x6f9)](_0x348a22 => _0x348a22['id'] === _0x2b025a); return !_0x3de99f && (_0x3de99f = _0x1884b1[_0x53d875(0x38c)][_0x53d875(0x6f9)](_0x3020c8 => _0x3020c8['id'] === _0x1884b1[_0x53d875(0x1d3)]) || _0x1884b1[_0x53d875(0x38c)][0x0]), _0x3de99f || { 'name': '用户', 'avatar': _0x100125, 'persona': '' }; } function _0x65d0a9(_0x3a79b9) { const _0x4d7e16 = _0x5f58e0; if (_0x4d7e16(0xad5) === _0x4d7e16(0x27f)) { if (_0x589b94['length'] === 0x0) return; _0x29d180 = (_0x3bed24 + 0x1) % _0x5a5327[_0x4d7e16(0x8a0)], _0x949e3b(_0x1e19c1[_0x1f27f5], _0x583fae); } else { const _0x48b99d = document[_0x4d7e16(0x653)](_0x3a79b9); _0x48b99d[_0x4d7e16(0x9c2)] = '', _0x1884b1['userProfiles'][_0x4d7e16(0xa30)](_0x5c8dc9 => { const _0x24ba10 = _0x4d7e16; if (_0x24ba10(0x173) === _0x24ba10(0x173)) { const _0xb06dc = document['createElement'](_0x24ba10(0x503)); _0xb06dc[_0x24ba10(0x3cd)] = _0x5c8dc9['id'], _0xb06dc[_0x24ba10(0x8f9)] = _0x5c8dc9[_0x24ba10(0x7d7)], _0x48b99d[_0x24ba10(0x168)](_0xb06dc); } else _0x406b02[_0x24ba10(0x5f0)](_0x24ba10(0x830), _0x17b38d); }); } } function _0x4a4362(_0x442f9c) { const _0x240206 = _0x5f58e0, _0x41086e = _0x21051e(_0x442f9c), _0x5c509b = document[_0x240206(0x653)](_0x240206(0x692)); _0x5c509b[_0x240206(0x313)]['backgroundImage'] = ''; let _0xcbc3f6 = document[_0x240206(0x653)](_0x240206(0xb31) + _0x442f9c); if (_0xcbc3f6) _0xcbc3f6[_0x240206(0x9c2)] = ''; if (!_0x41086e) return; _0x41086e[_0x240206(0x41d)] && (_0x240206(0x2c3) !== _0x240206(0x2c3) ? (_0x13858f['innerHTML'] = _0x240206(0x63a), _0x3320d0[_0x240206(0x653)](_0x240206(0x339))[_0x240206(0xacf)](_0x240206(0x4f4), _0x4009f3)) : (_0x5c509b['style'][_0x240206(0x956)] = _0x240206(0xa38) + _0x41086e[_0x240206(0x41d)] + '\x27)', _0x5c509b[_0x240206(0x313)][_0x240206(0x5ab)] = _0x240206(0x544), _0x5c509b[_0x240206(0x313)][_0x240206(0x6e7)] = _0x240206(0xaa3))); if (_0x41086e['bubbleCss']) { let _0x401994 = document[_0x240206(0x653)](_0x240206(0xb31) + _0x41086e['id']); !_0x401994 && (_0x240206(0x516) !== 'dhTJd' ? (_0x401994 = document[_0x240206(0x2da)]('style'), _0x401994['id'] = _0x240206(0xb31) + _0x41086e['id'], document[_0x240206(0x8be)][_0x240206(0x168)](_0x401994)) : (_0x27908b(), _0x4b41fc('meetingList', _0x240206(0x6fe)))); const _0x6afaf0 = _0x41086e[_0x240206(0xa88)], _0x1847e0 = _0x6afaf0[_0x240206(0xac6)](/\.bubble\.sent/g, _0x240206(0x60c) + _0x41086e['id'] + _0x240206(0x289))[_0x240206(0xac6)](/\.bubble\.received/g, _0x240206(0x60c) + _0x41086e['id'] + _0x240206(0x83e)); _0x401994[_0x240206(0x9c2)] = _0x1847e0; } } function _0x1b4a22() { const _0x316a46 = _0x5f58e0, _0x1220fa = document[_0x316a46(0x653)](_0x316a46(0x943)); _0x1220fa[_0x316a46(0x9c2)] = ''; const _0x24e253 = _0x57366c => { const _0x827c19 = _0x316a46; _0x1884b1[_0x827c19(0xacb)][_0x57366c] = null; if (_0x57366c === _0x827c19(0x3bf)) _0x1884b1[_0x827c19(0xacb)][_0x827c19(0xaa4)] = null; _0x1b4a22(); }, _0x5cd4a7 = _0x1884b1[_0x316a46(0xacb)]['imageId'], _0x8988c = _0x1884b1[_0x316a46(0xacb)][_0x316a46(0x35c)]; if (_0x5cd4a7) { const _0x591bf2 = document[_0x316a46(0x2da)](_0x316a46(0x1f9)); _0x591bf2[_0x316a46(0x84e)] = _0x316a46(0x6c8), _0x591bf2[_0x316a46(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x591bf2[_0x316a46(0x795)](_0x316a46(0x213))[_0x316a46(0x5c8)] = () => _0x24e253(_0x316a46(0x3bf)), _0x1220fa['appendChild'](_0x591bf2), _0x329660(_0x5cd4a7)[_0x316a46(0x8e7)](_0x540105 => { const _0x3eb3ac = _0x316a46, _0x6dcb33 = document[_0x3eb3ac(0x653)]('pending-post-image-preview'); _0x6dcb33 && _0x540105 && (_0x6dcb33[_0x3eb3ac(0x74e)] = URL['createObjectURL'](_0x540105)); }); } if (_0x8988c) { const _0x146ee1 = document['createElement']('div'); _0x146ee1[_0x316a46(0x84e)] = _0x316a46(0x6c8), _0x146ee1[_0x316a46(0x9c2)] = _0x316a46(0x345) + (_0x8988c[_0x316a46(0xb23)] || _0xe4a1db) + _0x316a46(0xa6b) + _0x8988c[_0x316a46(0x70f)] + _0x316a46(0xa84) + _0x8988c[_0x316a46(0x6e9)] + _0x316a46(0x62d), _0x146ee1[_0x316a46(0x795)]('.remove-attachment-btn')[_0x316a46(0x5c8)] = () => _0x24e253('music'), _0x1220fa[_0x316a46(0x168)](_0x146ee1); } } async function _0x589eba(_0x246b93) { const _0x247256 = _0x5f58e0; if (_0x247256(0x5f4) === _0x247256(0x5f4)) { const _0x1186d5 = _0x1884b1[_0x247256(0xa26)][_0x247256(0x6f9)](_0x17eb6f => _0x17eb6f['id'] === _0x1884b1[_0x247256(0x825)]); if (!_0x1186d5) return; _0x1d9e54(!![], _0x247256(0x542)), _0x1884b1[_0x247256(0xa54)] = !![]; try { if (_0x247256(0x693) !== _0x247256(0x693)) _0xdd4843[_0x247256(0x7d7)] !== _0x247256(0xa3e) && (_0x4cce7f[_0x247256(0x5f0)](_0x247256(0x7cc), _0x12ec1a), _0x238d8f({ 'role': 'assistant', 'content': _0x247256(0x6d1) + _0x544e31[_0x247256(0xa53)] }, _0xf8ca67['conversationHistory']['length'] - 0x1)); else { const _0x2248a9 = _0x1186d5[_0x247256(0x42a)]['map'](_0x1a45ce => _0x21051e(_0x1a45ce))[_0x247256(0x776)](Boolean), _0xcd14c9 = _0x1b0dfd(), _0xd7a1ae = _0x2248a9[_0x247256(0x7d4)](_0x1232a9 => { const _0x12c7ac = _0x247256, { omniText: _0x19cc34 } = _0x1c528d(_0x1232a9['id'], null), _0x5892d6 = _0x2c45f5(_0x1232a9['id']), _0x25eede = _0x1232a9[_0x12c7ac(0x99b)] && _0x1232a9[_0x12c7ac(0x99b)][_0x12c7ac(0x8a0)] > 0x0 ? _0x12c7ac(0x192) + _0x1232a9[_0x12c7ac(0x7d7)] + _0x12c7ac(0x397) + _0x1232a9['linkedWorldBookIds'][_0x12c7ac(0x7d4)](_0x5a792d => _0x1884b1[_0x12c7ac(0x562)]['find'](_0x4e434a => _0x4e434a['id'] === _0x5a792d))[_0x12c7ac(0x776)](Boolean)[_0x12c7ac(0x7d4)](_0x348895 => _0x12c7ac(0x878) + _0x348895['name'] + '\x0a' + _0x348895[_0x12c7ac(0x329)])['join']('') : ''; return _0x12c7ac(0xaba) + _0x1232a9[_0x12c7ac(0x7d7)] + _0x12c7ac(0x555) + _0x1232a9['id'] + _0x12c7ac(0x427) + _0x1232a9[_0x12c7ac(0x370)] + _0x12c7ac(0xb55) + _0x19cc34 + '\x0a' + _0x5892d6 + '\x0a' + _0x25eede; })[_0x247256(0x359)]('\x0a\x0a'), _0x3fe106 = _0x4d4457(_0x246b93['authorId']) || { 'name': '用户' }, _0x6acc8f = _0x3fe106['persona'] ? _0x247256(0xa61) + _0x3fe106[_0x247256(0x7d7)] + _0x247256(0x72b) + _0x3fe106[_0x247256(0x370)] + '\x0a' : ''; let _0x2179df = null; if (_0x246b93[_0x247256(0x3bf)]) _0x2179df = _0x246b93['image']; else { if (_0x246b93[_0x247256(0xaa4)]) { if (_0x247256(0x820) === _0x247256(0x820)) try { const _0x4b7102 = await _0x329660(_0x246b93[_0x247256(0xaa4)]); _0x4b7102 && (_0x247256(0xa96) === _0x247256(0x33a) ? (_0x27e417[_0x247256(0x5f0)](_0x247256(0x5f3), _0x4b7d7e), _0x43c536 = _0x247256(0x98e) + _0x137772 + _0x247256(0x9ce)) : _0x2179df = await _0x1f0891(_0x4b7102)); } catch (_0x26aad3) { console['error'](_0x247256(0x7fa), _0x26aad3); } else _0x41efcc = _0x482951(() => { const _0x45de58 = _0x247256; if (_0x36e267[_0x45de58(0x8c3)] === _0x45de58(0x65a)) _0x2e722c[_0x45de58(0x4d1)](); _0x3e9c8d(_0xc70b2b); }, 0x320); } } let _0x3bf5c5 = _0x3fe106[_0x247256(0x7d7)] + _0x247256(0x900) + _0x246b93[_0x247256(0x329)] + '”'; if (_0x2179df) { if ('jiMfO' !== _0x247256(0x52d)) { if (_0x7d2d4a === null) return; const _0x2a5704 = _0x41511d['conversationHistory'][_0x188b68]; if (!_0x2a5704) return; _0x59a2eb['value'] = _0x2a5704['content'], _0x5ed927(), _0x369e45[_0x247256(0xb7b)]['add'](_0x247256(0x322)), _0x493228[_0x247256(0x96c)](); } else _0x3bf5c5 += '\x20[并附上了一张图片]'; } _0x246b93[_0x247256(0x8c3)] === _0x247256(0x35c) && ('eFRGk' === _0x247256(0x4d9) ? (_0x52283d *= _0x3d4558 / _0x1204fa, _0x4848f6 = _0x2fc2de) : _0x3bf5c5 += '\x20[并分享了歌曲:\x20' + _0x246b93['songName'] + _0x247256(0x4ec) + _0x246b93[_0x247256(0x6e9)] + ']'); const _0x1e4da0 = '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a' + _0xd7a1ae + '\x0a\x0a' + _0x6acc8f + _0x247256(0x3fe) + _0xcd14c9 + _0x247256(0x364) + _0x3bf5c5 + _0x247256(0x7ad), _0xefaac1 = [{ 'role': 'system', 'content': _0x1e4da0 }], _0x30ce64 = { 'role': _0x247256(0x901), 'content': _0x247256(0x6c2) }; _0x2179df && (_0x247256(0x34b) === 'WBWbw' ? _0x30ce64[_0x247256(0x3bf)] = _0x2179df : _0x469edb = { 'speaker': _0x408ef0['name'], 'line': _0x35e32d[_0x247256(0x329)], 'emotion': _0x247256(0xb1a) }); _0xefaac1['push'](_0x30ce64); const _0x6de9ae = await _0x286894(_0xefaac1, { 'json': !![] }), _0x37f9ff = _0x6de9ae[_0x247256(0x81f)](/({[\s\S]*})/); if (!_0x37f9ff) throw new Error('AI未能返回有效的JSON对象。'); const _0x49b4f9 = JSON[_0x247256(0x440)](_0x37f9ff[0x1]), _0x21eb89 = _0x1186d5[_0x247256(0xa6e)][_0x247256(0x6f9)](_0x1b777d => _0x1b777d['id'] === _0x246b93['id']); _0x21eb89 && (_0x21eb89[_0x247256(0x5e5)] = _0x49b4f9[_0x247256(0x5e5)] || [], _0x21eb89[_0x247256(0x9ae)] = (_0x49b4f9[_0x247256(0x9ae)] || [])['map']((_0x5cf60c, _0xbb7abf) => ({ ..._0x5cf60c, 'commentId': 'c_' + _0x246b93[_0x247256(0x1af)] + '_' + _0xbb7abf })), _0x480928(), _0x2229ef()); } } catch (_0x55491f) { console['error'](_0x247256(0x17e), _0x55491f), _0x5929aa('大家好像不知道该怎么回复...'); } finally { _0x1d9e54(![]), _0x1884b1['isGenerating'] = ![]; } } else { if (!_0xf64acf[_0x247256(0xb41)](_0x3453ac) || _0x457fc0[_0x247256(0x8a0)] === 0x0) return _0x247256(0x1f1); return _0x247256(0x15d) + _0x476bb4['map']((_0x30f07a, _0x4da552) => { const _0x3237e4 = _0x247256, _0x3356d0 = _0x44ff44['stringify'](_0x30f07a[_0x3237e4(0xace)] || [])['replace'](/'/g, _0x3237e4(0xab4))['replace'](/"/g, '&quot;'), _0x32d6b3 = _0x30f07a[_0x3237e4(0x494)] || _0x3237e4(0x9e5); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x4da552 < _0x3f1dc0[_0x3237e4(0x8a0)] - 0x1 ? _0x3237e4(0xaad) : '') + _0x3237e4(0x436) + _0x3356d0 + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x32d6b3 + _0x3237e4(0x8ad) + _0x3c5ce5 + '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>' + _0x32d6b3[_0x3237e4(0x724)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x32d6b3 + _0x3237e4(0x7a9) + (_0x30f07a[_0x3237e4(0x84b)] || '') + _0x3237e4(0x4f5); })[_0x247256(0x359)]('') + _0x247256(0x681); } } function _0x1f4775() { const _0x3f5df2 = _0x5f58e0, _0x183cdc = _0x1884b1[_0x3f5df2(0xa26)][_0x3f5df2(0x6f9)](_0x1e1ba0 => _0x1e1ba0['id'] === _0x1884b1['activeFriendCircleId']), _0x2c2509 = _0x183cdc?.[_0x3f5df2(0x70c)]; let _0x3f9178 = _0x1884b1[_0x3f5df2(0x38c)]['find'](_0x21089c => _0x21089c['id'] === _0x2c2509); !_0x3f9178 && ('bXkwQ' !== _0x3f5df2(0x6b7) ? _0x3f9178 = _0x1884b1[_0x3f5df2(0x38c)][_0x3f5df2(0x6f9)](_0x497f87 => _0x497f87['id'] === _0x1884b1[_0x3f5df2(0x1d3)]) : (_0xf65680 = _0xfd7211[_0x3f5df2(0x2da)](_0x3f5df2(0x1f9)), _0x5daa8a[_0x3f5df2(0x84e)] = _0x3f5df2(0x674), _0x596235[_0x3f5df2(0x8f9)] = _0x3f5df2(0x421), _0x44faf3[_0x3f5df2(0x168)](_0x23baf5))), !_0x3f9178 && (_0x3f5df2(0x999) === 'gMddi' ? _0x3f9178 = _0x1884b1[_0x3f5df2(0x38c)][0x0] : _0x30c3f9 = _0x148c12), _0x3f9178 && (document[_0x3f5df2(0x653)]('user-post-avatar')[_0x3f5df2(0x74e)] = _0x3f9178[_0x3f5df2(0x99a)] || _0x100125); } function _0x44114a(_0x5206a8) { const _0x281c3c = _0x5f58e0; if (_0x281c3c(0x87d) !== _0x281c3c(0x439)) { let _0x54fb10 = 0x0, _0x933159 = 0x0, _0x48fe8a = 0x0; if (_0x5206a8[_0x281c3c(0x8a0)] == 0x4) _0x54fb10 = '0x' + _0x5206a8[0x1] + _0x5206a8[0x1], _0x933159 = '0x' + _0x5206a8[0x2] + _0x5206a8[0x2], _0x48fe8a = '0x' + _0x5206a8[0x3] + _0x5206a8[0x3]; else _0x5206a8['length'] == 0x7 && (_0x54fb10 = '0x' + _0x5206a8[0x1] + _0x5206a8[0x2], _0x933159 = '0x' + _0x5206a8[0x3] + _0x5206a8[0x4], _0x48fe8a = '0x' + _0x5206a8[0x5] + _0x5206a8[0x6]); _0x54fb10 /= 0xff, _0x933159 /= 0xff, _0x48fe8a /= 0xff; let _0x4ba0f4 = Math[_0x281c3c(0xa4f)](_0x54fb10, _0x933159, _0x48fe8a), _0x1c86f1 = Math[_0x281c3c(0x19f)](_0x54fb10, _0x933159, _0x48fe8a), _0x47661c = _0x1c86f1 - _0x4ba0f4, _0x45bce1 = 0x0, _0x3da3f9 = 0x0, _0x3d8710 = 0x0; if (_0x47661c == 0x0) _0x45bce1 = 0x0; else { if (_0x1c86f1 == _0x54fb10) _0x45bce1 = (_0x933159 - _0x48fe8a) / _0x47661c % 0x6; else { if (_0x1c86f1 == _0x933159) _0x45bce1 = (_0x48fe8a - _0x54fb10) / _0x47661c + 0x2; else _0x45bce1 = (_0x54fb10 - _0x933159) / _0x47661c + 0x4; } } _0x45bce1 = Math[_0x281c3c(0x725)](_0x45bce1 * 0x3c); if (_0x45bce1 < 0x0) _0x45bce1 += 0x168; return _0x3d8710 = (_0x1c86f1 + _0x4ba0f4) / 0x2, _0x3da3f9 = _0x47661c == 0x0 ? 0x0 : _0x47661c / (0x1 - Math[_0x281c3c(0x989)](0x2 * _0x3d8710 - 0x1)), _0x3da3f9 = +(_0x3da3f9 * 0x64)['toFixed'](0x1), _0x3d8710 = +(_0x3d8710 * 0x64)[_0x281c3c(0x395)](0x1), { 'h': _0x45bce1, 's': _0x3da3f9, 'l': _0x3d8710 }; } else { const _0x5370cc = _0x23fa23(_0x34ab21); if (!_0x5370cc) return; _0x1c16f7[_0x281c3c(0x553)] = _0x8df50; const _0x304504 = _0x30d747[_0x281c3c(0x7f1)][_0x281c3c(0x6f9)](_0xe55424 => _0xe55424[_0x281c3c(0x853)] === _0x49a6aa), _0x5863a3 = _0x304504 ? _0x304504[_0x281c3c(0xb3c)][_0x281c3c(0x8a0)] : 0x0, _0x2d0f26 = 0x2; _0x2b5f23[_0x281c3c(0xa07)] = _0x488677['max'](0x0, _0x2657d9[_0x281c3c(0x58f)](_0x5863a3 / _0x2d0f26) - 0x1), _0x43fcf9['getElementById'](_0x281c3c(0x4fe))['textContent'] = _0x5370cc[_0x281c3c(0x7d7)] + '的日记本', _0x181e4e(), _0x2c4360(_0x281c3c(0x730), _0x281c3c(0x2c9)); } } function _0x5713b7() { const _0x37b05f = _0x5f58e0, _0x39f995 = (_0x480ff7, _0xd113ad, _0x6c363a) => { const _0x354339 = _0x493f; if (_0x354339(0x341) === _0x354339(0x745)) for (const _0x47396c of _0x188cfa[_0x354339(0x562)]) { let _0x9135ba = _0x3e792d[_0x354339(0x562)][_0x354339(0x6f9)](_0x3520cb => _0x3520cb[_0x354339(0x7d7)] === _0x47396c[_0x354339(0x7d7)]); if (_0x9135ba) _0x4cdd3d[_0x354339(0x24d)](_0x9135ba['id']); else { const _0x5759ec = { 'id': _0x354339(0xb54) + _0x1e5745[_0x354339(0x965)]() + '_' + _0x3d88b2[_0x354339(0x664)](), 'name': _0x47396c[_0x354339(0x7d7)], 'content': _0x47396c[_0x354339(0x329)] }; _0x2eaa1b[_0x354339(0x562)][_0x354339(0x24d)](_0x5759ec), _0x34f85c['push'](_0x5759ec['id']); } } else { const _0x35f0c9 = document[_0x354339(0x653)](_0x480ff7); if (!_0x35f0c9) return; let _0x543e17 = null; try { _0x543e17 = JSON[_0x354339(0x440)](localStorage[_0x354339(0x6da)](_0xd113ad) || '{}'); } catch { if (_0x354339(0x8ae) !== _0x354339(0x95f)) _0x543e17 = {}; else { const _0x2ceeeb = _0x4a6c41[0x0][_0x354339(0x87b)](), _0x3122ac = _0xb03c28[0x1]['trim']()[_0x354339(0xac6)](/^"|"$/g, ''); _0x27196c[_0x2ceeeb] = _0x3122ac; } } _0x35f0c9['style'][_0x354339(0x760)] = _0x354339(0x491), _0x35f0c9['style'][_0x354339(0x86a)] = '', _0x35f0c9['style'][_0x354339(0xa05)] = '', _0x35f0c9[_0x354339(0x313)]['right'] = '', _0x35f0c9['style'][_0x354339(0xa67)] = '', _0x35f0c9[_0x354339(0x313)][_0x354339(0x72a)] = ''; if (typeof _0x543e17[_0x354339(0x86a)] === _0x354339(0x3c0) && typeof _0x543e17['left'] === _0x354339(0x3c0)) 'oLpye' !== _0x354339(0x424) ? (_0x3e7319['innerHTML'] = '', _0x2d9c92[_0x354339(0xa30)](_0x7c9cd3 => { const _0x42b96e = _0x354339, _0x2964a1 = _0x5dcf30[_0x42b96e(0x2da)](_0x42b96e(0x7fb)); _0x2964a1[_0x42b96e(0x74e)] = _0x7c9cd3['url'], _0x2964a1[_0x42b96e(0x5e7)] = _0x42b96e(0x8fa), _0x2964a1[_0x42b96e(0x869)] = _0x7c9cd3['name'], _0x2964a1[_0x42b96e(0xb7b)][_0x42b96e(0x428)](_0x42b96e(0x179)), _0x2964a1['addEventListener'](_0x42b96e(0x4f4), () => _0x12a45f(_0x7c9cd3)), _0x44df80[_0x42b96e(0x168)](_0x2964a1); })) : (_0x35f0c9[_0x354339(0x313)]['top'] = _0x543e17[_0x354339(0x86a)] + '%', _0x35f0c9['style'][_0x354339(0xa05)] = _0x543e17['left'] + '%'); else for (const _0x5ed9a8 in _0x6c363a) { _0x35f0c9[_0x354339(0x313)][_0x5ed9a8] = _0x6c363a[_0x5ed9a8]; } } }; _0x39f995('home-clock-container', 'clockPosition', { 'top': _0x37b05f(0x49c), 'left': _0x37b05f(0x20a), 'transform': _0x37b05f(0x6ab) }), _0x39f995(_0x37b05f(0x777), _0x37b05f(0x9dd), { 'top': _0x37b05f(0x4f1), 'right': '4%' }), _0x39f995(_0x37b05f(0x88a), _0x37b05f(0x89b), { 'top': '20%', 'right': _0x37b05f(0x875) }), _0x39f995(_0x37b05f(0x912), _0x37b05f(0x38b), { 'top': '8%', 'right': _0x37b05f(0x875) }), _0x39f995(_0x37b05f(0x273), _0x37b05f(0x2cf), { 'top': '8%', 'right': '4%' }), _0x39f995(_0x37b05f(0x227), 'appIconPosition_app-music-library', { 'top': _0x37b05f(0xb08), 'left': '5%' }), _0x39f995(_0x37b05f(0x230), _0x37b05f(0x64a), { 'top': _0x37b05f(0x9df), 'left': _0x37b05f(0x3cc) }), _0x39f995(_0x37b05f(0x9d5), _0x37b05f(0x259), { 'top': _0x37b05f(0x9df), 'left': '5%' }), _0x39f995(_0x37b05f(0xabf), _0x37b05f(0x569), { 'top': _0x37b05f(0xb08), 'left': _0x37b05f(0x3cc) }), _0x39f995(_0x37b05f(0x17c), _0x37b05f(0x743), { 'top': _0x37b05f(0x61f), 'right': '5%' }), _0x39f995(_0x37b05f(0x39b), _0x37b05f(0x515), { 'top': '8%', 'left': '5%' }); const _0x20b023 = document[_0x37b05f(0x653)](_0x37b05f(0x934)); if (_0x20b023) { if (_0x37b05f(0xb60) === _0x37b05f(0xb60)) _0x20b023[_0x37b05f(0x313)][_0x37b05f(0x760)] = _0x37b05f(0x491), _0x20b023[_0x37b05f(0x313)]['top'] = _0x37b05f(0x8bc), _0x20b023[_0x37b05f(0x313)][_0x37b05f(0xa05)] = _0x37b05f(0x20a), _0x20b023[_0x37b05f(0x313)][_0x37b05f(0x72a)] = _0x37b05f(0x6ab), _0x20b023[_0x37b05f(0x313)][_0x37b05f(0x272)] = _0x37b05f(0x8b0); else { const _0x5f40f4 = _0x473dcd['getElementById']('global-player-play-pause-btn'); if (_0x5f40f4) _0x5f40f4['textContent'] = '▶'; } } const _0x4e4a41 = document[_0x37b05f(0x653)](_0x37b05f(0x4b1)); _0x4e4a41 && (_0x37b05f(0x8f3) !== _0x37b05f(0x8f3) ? _0x453db3[_0x37b05f(0x9c2)] = _0x37b05f(0x77f) + _0x282bcc[_0x37b05f(0x9ac)](_0x37b05f(0x567), { 'hour': _0x37b05f(0x711), 'minute': _0x37b05f(0x711), 'hour12': ![] }) + _0x37b05f(0x4eb) : (_0x4e4a41[_0x37b05f(0x313)][_0x37b05f(0x760)] = _0x37b05f(0x491), _0x4e4a41[_0x37b05f(0x313)][_0x37b05f(0x86a)] = '35%', _0x4e4a41[_0x37b05f(0x313)]['left'] = _0x37b05f(0x20a), _0x4e4a41['style'][_0x37b05f(0x72a)] = _0x37b05f(0x6ab), _0x4e4a41[_0x37b05f(0x313)][_0x37b05f(0x272)] = 'inline-block')); } function _0x5cf5f1() { const _0x1f4333 = _0x5f58e0, _0x1e6971 = document[_0x1f4333(0x653)]('custom-icon-list-container'); _0x1e6971[_0x1f4333(0x9c2)] = ''; const _0x4bb676 = document['querySelectorAll']('.app-icon'); _0x4bb676[_0x1f4333(0xa30)](_0x412fa3 => { const _0x5a5785 = _0x1f4333, _0x1957f0 = _0x412fa3['id'], _0x59bcd5 = _0x412fa3['querySelector']('span')[_0x5a5785(0x8f9)], _0x65e51b = _0x5a5785(0x369) + _0x1957f0, _0x126576 = localStorage['getItem'](_0x65e51b), _0x2acf34 = document[_0x5a5785(0x2da)]('div'); _0x2acf34[_0x5a5785(0x84e)] = _0x5a5785(0x405), _0x2acf34[_0x5a5785(0x313)]['padding'] = _0x5a5785(0x6d2), _0x2acf34[_0x5a5785(0x9c2)] = _0x5a5785(0x501) + _0x1957f0 + _0x5a5785(0x418) + (_0x126576 || _0x5a5785(0x2c7)) + _0x5a5785(0xa86) + _0x59bcd5 + _0x5a5785(0x4df) + _0x1957f0 + _0x5a5785(0x525) + _0x1957f0 + _0x5a5785(0x477) + _0x65e51b + _0x5a5785(0x538), _0x1e6971[_0x5a5785(0x168)](_0x2acf34); const _0x1fabfc = document[_0x5a5785(0x653)](_0x5a5785(0x67c) + _0x1957f0); _0x1fabfc[_0x5a5785(0xacf)](_0x5a5785(0xb6d), async _0x3c6ee6 => { const _0x1b1fda = _0x5a5785, _0x543f76 = _0x3c6ee6['target'][_0x1b1fda(0x53d)][0x0]; if (!_0x543f76) return; try { if (_0x1b1fda(0x661) === 'irYjt') { const _0x415d73 = await _0x10d9fa(_0x543f76); localStorage[_0x1b1fda(0x7db)](_0x65e51b, _0x415d73), document['getElementById'](_0x1b1fda(0xa32) + _0x1957f0)['src'] = _0x415d73, _0x2e471d(); } else { const _0x31a076 = []; for (const _0x2f4958 of _0xbc791d[_0x1b1fda(0x75d)](_0x372419)) { const _0x1ddf4c = _0x2f4958['toLowerCase'](); if (_0x2c9fda[_0x1b1fda(0x942)](_0x1f0837 => _0x1ddf4c[_0x1b1fda(0x6c0)](_0x1f0837))) { const _0x19a682 = _0x69b019[_0x2f4958]; if (typeof _0x19a682 === _0x1b1fda(0x4b6)) _0x31a076[_0x1b1fda(0x24d)](_0x19a682); if (_0x24e580['isArray'](_0x19a682)) _0x19a682['forEach'](_0x3c7dca => { const _0x30bc86 = _0x1b1fda; if (typeof _0x3c7dca === _0x30bc86(0x4b6)) _0x31a076[_0x30bc86(0x24d)](_0x3c7dca); }); } } if (_0x31a076['length']) return _0x31a076[_0x1b1fda(0x7e8)](_0x4c43b5)[_0x1b1fda(0x46a)](0x0, 0x9); } } catch (_0x20cd57) { _0x5929aa(_0x1b1fda(0x899) + _0x20cd57[_0x1b1fda(0xa53)]); } }); }); } function _0x2e471d() { const _0x37b545 = _0x5f58e0, _0x1d7567 = document['querySelectorAll']('.app-icon'); _0x1d7567[_0x37b545(0xa30)](_0x507e0a => { const _0x3cb406 = _0x37b545, _0x14e7b2 = _0x507e0a['id'], _0x238f08 = 'customIcon_' + _0x14e7b2, _0x53dff9 = localStorage[_0x3cb406(0x6da)](_0x238f08), _0x8076e6 = _0x507e0a[_0x3cb406(0x795)](_0x3cb406(0x45a)); if (_0x53dff9) 'gLetG' === _0x3cb406(0x437) ? _0x8076e6[_0x3cb406(0x9c2)] = _0x3cb406(0x222) + _0x53dff9 + _0x3cb406(0x848) : _0x32b42b['classList'][_0x3cb406(0x344)](_0x3cb406(0x322)); else { const _0x1b4adc = document[_0x3cb406(0x795)](_0x3cb406(0xaea) + _0x14e7b2 + _0x3cb406(0x21d) + _0x14e7b2 + _0x3cb406(0xa77))?.[_0x3cb406(0x9c2)]; _0x1b4adc && (_0x8076e6[_0x3cb406(0x9c2)] = _0x1b4adc); } }); } function _0x564594() { const _0x2eed4d = _0x5f58e0, _0x55bfc4 = _0x1884b1[_0x2eed4d(0xa26)]['find'](_0x32953b => _0x32953b['id'] === _0x1884b1['activeFriendCircleId']), _0x2c5b50 = _0x2bf707(); let _0x10115a = []; if (_0x55bfc4 && _0x55bfc4[_0x2eed4d(0xa6e)]) { if ('RKyyv' !== _0x2eed4d(0x921)) { const _0x511c31 = _0x55bfc4[_0x2eed4d(0xa6e)]['filter'](_0x10f941 => _0x10f941[_0x2eed4d(0x8c3)] === _0x2eed4d(0x35c) && _0x10f941[_0x2eed4d(0xa36)])[_0x2eed4d(0x7d4)](_0x4d49ec => ({ ..._0x4d49ec, 'source': _0x2eed4d(0x38e) })); _0x10115a[_0x2eed4d(0x24d)](..._0x511c31); } else { const _0x1eb306 = _0x11e33b[_0x2eed4d(0x3cd)]; let _0x1087c8 = _0x1eb306['replace'](/\.bubble\.sent/g, _0x2eed4d(0x618))['replace'](/\.bubble\.received/g, '#bubble-preview-ai'); _0x2b67f5[_0x2eed4d(0x9c2)] = _0x1087c8; } } if (_0x2c5b50 && _0x1884b1['conversationHistory']) { const _0x41c69d = _0x1884b1[_0x2eed4d(0x589)]['filter'](_0x4e280b => _0x4e280b[_0x2eed4d(0x8c3)] === _0x2eed4d(0x35c) && _0x4e280b['playableUrl'])[_0x2eed4d(0x7d4)](_0x3ff395 => ({ ..._0x3ff395, 'source': _0x2eed4d(0x842) })); _0x10115a['push'](..._0x41c69d); } const _0x12dd95 = Array[_0x2eed4d(0x5a1)](new Map(_0x10115a[_0x2eed4d(0x7d4)](_0x41c954 => [_0x41c954[_0x2eed4d(0xa36)], _0x41c954]))['values']()); _0x1884b1[_0x2eed4d(0xb5e)] = _0x12dd95[_0x2eed4d(0x9ec)]((_0x55f288, _0x15c3e1) => _0x15c3e1['timestamp'] - _0x55f288[_0x2eed4d(0x1af)]); } function _0x37ad7f(_0x5d223a) { const _0x21ebc2 = _0x5f58e0; if (_0x21ebc2(0x468) === 'bZkxY') _0xbb5adb[_0x21ebc2(0x313)][_0x21ebc2(0x956)] = _0x21ebc2(0xa38) + _0x36ffda['createObjectURL'](_0x5b1e9e) + '\x27)', _0x2956de['style'][_0x21ebc2(0x5ab)] = _0x21ebc2(0x544), _0x274159[_0x21ebc2(0x313)]['backgroundPosition'] = 'center'; else { if (_0x5d223a < 0x0 || _0x5d223a >= _0x498a45[_0x21ebc2(0x8a0)]) return; _0x15ea73 = _0x5d223a; const _0x54bea3 = _0x498a45[_0x5d223a]; _0x29f550[_0x21ebc2(0x74e)] = _0x54bea3[_0x21ebc2(0xa36)] || _0x54bea3[_0x21ebc2(0x51a)], _0x29f550['play'](), _0x173cd5(), _0x6ba4ee(); } } function _0x173cd5() { const _0x41597e = _0x498a45[_0x15ea73]; _0x541511(_0x41597e); } function _0x6ba4ee() { const _0x297a53 = _0x5f58e0; try { localStorage[_0x297a53(0x7db)](_0x297a53(0x71f), JSON[_0x297a53(0x98f)]({ 'playlist': _0x1884b1['musicPlaylist'], 'currentIndex': _0x1884b1[_0x297a53(0xa39)] })); } catch (_0x2a6dfe) { if (_0x297a53(0xac0) === _0x297a53(0xac0)) console['error']('保存播放器状态失败，真是没用。', _0x2a6dfe); else { const _0x10a9df = _0x5e9a5e[0x0]['trim'](), _0x1f14f4 = _0x591fe3[0x1][_0x297a53(0x87b)](), _0x20d96d = { '歌名': _0x297a53(0x2ed), '艺术家': '歌手', '专辑': '专辑' }; _0x20d96d[_0x10a9df] && (_0x451e91[_0x20d96d[_0x10a9df]] = _0x1f14f4); } } } function _0x699a59() { const _0x545d70 = _0x5f58e0; try { const _0x493768 = localStorage[_0x545d70(0x6da)](_0x545d70(0x71f)); if (_0x493768) { if (_0x545d70(0xb71) === _0x545d70(0xb71)) { const { playlist: _0x240b14, currentIndex: _0x25d0c4 } = JSON['parse'](_0x493768); Array[_0x545d70(0xb41)](_0x240b14) && _0x240b14[_0x545d70(0x8a0)] > 0x0 && _0x25d0c4 > -0x1 && (_0x545d70(0x644) === _0x545d70(0x644) ? (_0x1884b1[_0x545d70(0xb5e)] = _0x240b14, _0x1884b1[_0x545d70(0xa39)] = _0x25d0c4, _0x1884b1[_0x545d70(0x34d)] = ![], _0x173cd5()) : _0x2ef9c3 = _0x545d70(0x8ce) + _0x156303); } else { const _0x583c1d = _0xb10014[_0x545d70(0x653)](_0x545d70(0x3e7))[_0x545d70(0x3cd)]; _0x583c1d && (_0x40270d[_0x545d70(0x1d3)] = _0x583c1d, _0x2d4001(), _0x18077b(_0x545d70(0xa06)), _0x137a97(), _0x54b204[_0x545d70(0x653)](_0x545d70(0x1e0))[_0x545d70(0x313)]['display'] = 'none'); } } } catch (_0x13606b) { if ('JxaIv' === _0x545d70(0x3f7)) console[_0x545d70(0x5f0)](_0x545d70(0xb40), _0x13606b); else { const _0x81af09 = _0x53e1a6[_0x545d70(0x2da)]('li'); _0x81af09[_0x545d70(0x84e)] = _0x545d70(0x405), _0x81af09[_0x545d70(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x307fa4['id'] + _0x545d70(0x57b) + _0x172a53['id'] + _0x545d70(0x95c) + (_0x3027f4[_0x545d70(0x99a)] || _0x58d93d) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-' + _0x55650b['id'] + '\x22\x20class=\x22char-name\x22>' + _0x21f6a5[_0x545d70(0x7d7)] + _0x545d70(0x360), _0x1f4b70[_0x545d70(0x168)](_0x81af09); } } } function _0x57cda0(_0x569470) { const _0x162831 = _0x5f58e0; if (window['diaryPressTimer']) clearTimeout(window['diaryPressTimer']); const _0x2f8dde = _0x569470[_0x162831(0xa4b)][_0x162831(0x546)](_0x162831(0x8b5)); if (!_0x2f8dde) return; const _0x2f82cf = _0x2f8dde['dataset'][_0x162831(0x1af)], _0x3bc058 = _0x2f8dde[_0x162831(0xb7b)]['contains'](_0x162831(0x901)) ? 'user' : 'ai'; if (!_0x2f82cf) return; const _0x277d2f = () => { const _0x2cf727 = _0x162831; _0x2cf727(0x433) !== _0x2cf727(0x627) ? window['diaryPressTimer'] = setTimeout(() => { const _0x281535 = _0x2cf727; if (_0x569470['type'] === 'touchstart') _0x569470[_0x281535(0x4d1)](); _0x1f24cf(parseInt(_0x2f82cf, 0xa), _0x3bc058); }, 0x320) : _0x398ea3['textContent'] = _0x570761[_0x2cf727(0x7d7)] || _0x2cf727(0x96a) + _0x5db72e[_0x2cf727(0x3d5)][_0x2cf727(0x8a0)] + ')'; }, _0x59939a = () => { const _0x498ae4 = _0x162831; if (window[_0x498ae4(0x981)]) clearTimeout(window['diaryPressTimer']); }; document[_0x162831(0xacf)]('mouseup', _0x59939a, { 'once': !![] }), document['addEventListener'](_0x162831(0x898), _0x59939a, { 'once': !![] }), document[_0x162831(0xacf)](_0x162831(0x242), _0x59939a, { 'once': !![] }), _0x277d2f(); } function _0x1f24cf(_0x3a7c67, _0x4f36aa) { const _0x5da857 = _0x5f58e0, _0x26376d = _0x5da857(0x8cb) + _0x3a7c67; let _0x4dc35a = document['getElementById'](_0x26376d); if (_0x4dc35a) return; const _0x2a8ed6 = '\x0a\x20\x20\x20\x20<div\x20id=\x22' + _0x26376d + _0x5da857(0x1a6) + (_0x4f36aa === 'ai' ? _0x5da857(0x6be) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20'; document[_0x5da857(0xafb)]['insertAdjacentHTML'](_0x5da857(0x819), _0x2a8ed6); const _0x2f43e7 = document[_0x5da857(0x653)](_0x26376d), _0x5cac1e = () => _0x2f43e7[_0x5da857(0x344)](); _0x2f43e7['querySelector']('.choice-modal-backdrop')[_0x5da857(0x5c8)] = _0x5cac1e, _0x2f43e7[_0x5da857(0x795)](_0x5da857(0xa6a))[_0x5da857(0x5c8)] = _0x5cac1e, _0x2f43e7[_0x5da857(0x795)](_0x5da857(0xa2f))['onclick'] = () => { _0x463aad(_0x3a7c67), _0x5cac1e(); }, _0x4f36aa === 'ai' && (_0x2f43e7[_0x5da857(0x795)](_0x5da857(0x4ac))[_0x5da857(0x5c8)] = () => { _0x4b5a76(_0x3a7c67), _0x5cac1e(); }); } async function _0x463aad(_0x5c2d97) { const _0x461c92 = _0x5f58e0, _0x5d3688 = await _0x9e00ac(_0x461c92(0x6a8)); if (!_0x5d3688) return; const _0x25feb9 = _0x1884b1[_0x461c92(0x7f1)]['find'](_0x2a6f29 => _0x2a6f29['characterId'] === _0x1884b1[_0x461c92(0x553)]); if (!_0x25feb9) return; const _0x49ec38 = _0x25feb9[_0x461c92(0xb3c)]['findIndex'](_0xb436e1 => _0xb436e1['timestamp'] === _0x5c2d97); _0x49ec38 > -0x1 && (_0x25feb9[_0x461c92(0xb3c)][_0x461c92(0x8cf)](_0x49ec38, 0x1), _0x480928(), _0x5af97d(), _0x5929aa(_0x461c92(0x63d))); } async function _0x4b5a76(_0x5447a7) { const _0x5e3c9d = _0x5f58e0; if ('EFGeX' !== _0x5e3c9d(0x847)) { const _0x3d687b = _0x121e0c(_0x51acf5[_0x5e3c9d(0x5f2)]); if (!_0x3d687b) return; const _0x51af90 = _0x504b1d(_0xa1f9b7[_0x5e3c9d(0x653)](_0x5e3c9d(0x81b))['value']), _0x470863 = _0xc287ea(_0x4f2272[_0x5e3c9d(0x653)]('sprite-slider-y')['value']), _0x3c64fc = _0x4e5dde(_0x28490f[_0x5e3c9d(0x653)](_0x5e3c9d(0x9c1))[_0x5e3c9d(0x3cd)]) / 0x64; _0x3d687b[_0x5e3c9d(0xa75)] = { 'x': _0x51af90, 'y': _0x470863, 'scale': _0x3c64fc }, _0x4754ce(), _0x26d16f(_0x5e3c9d(0x4ff)), _0x195d4f(!![]); } else { const _0x38b18d = _0x1884b1[_0x5e3c9d(0x7f1)][_0x5e3c9d(0x6f9)](_0x26679b => _0x26679b[_0x5e3c9d(0x853)] === _0x1884b1[_0x5e3c9d(0x553)]); if (!_0x38b18d) return; const _0xd2eca6 = _0x38b18d[_0x5e3c9d(0xb3c)][_0x5e3c9d(0x6dc)](_0x5a48a1 => _0x5a48a1[_0x5e3c9d(0x1af)] === _0x5447a7); _0xd2eca6 > -0x1 && (_0x5e3c9d(0x68d) !== 'cvosb' ? _0xbc72de[_0x5e3c9d(0x8c2)] === 'Enter' && !_0x706bd8[_0x5e3c9d(0x93c)] && (_0x53908b[_0x5e3c9d(0x4d1)](), _0x1c482d()) : (_0x38b18d[_0x5e3c9d(0xb3c)][_0x5e3c9d(0x8cf)](_0xd2eca6, 0x1), _0x480928(), _0x5af97d(), await _0x8b5db7())); } } function _0x1a0dfa() { const _0x3225c3 = _0x5f58e0, _0x32f810 = document[_0x3225c3(0x653)]('diary-list-container'); _0x32f810[_0x3225c3(0x9c2)] = ''; const _0x35f287 = _0x1884b1['characters'][_0x3225c3(0x776)](_0x172b02 => _0x1884b1[_0x3225c3(0x940)][_0x3225c3(0x942)](_0x504b59 => _0x504b59['type'] === _0x3225c3(0xaa7) && _0x504b59[_0x3225c3(0x3d5)][_0x3225c3(0x1ac)](_0x172b02['id']))); if (_0x35f287[_0x3225c3(0x8a0)] === 0x0) { if (_0x3225c3(0xab6) === _0x3225c3(0x522)) { _0x55a8e1[_0x3225c3(0x9c2)] = _0x3225c3(0x56c); return; } else { _0x32f810[_0x3225c3(0x9c2)] = _0x3225c3(0x3b9); return; } } _0x35f287[_0x3225c3(0xa30)](_0x1bccb2 => { const _0x5d1146 = _0x3225c3; if (_0x5d1146(0x5f9) !== 'ylFgt') { const _0x442a55 = document[_0x5d1146(0x2da)]('li'); _0x442a55[_0x5d1146(0x84e)] = 'character-item', _0x442a55['dataset']['charId'] = _0x1bccb2['id'], _0x442a55[_0x5d1146(0x9c2)] = _0x5d1146(0x6de) + (_0x1bccb2[_0x5d1146(0x99a)] || _0xe4a1db) + _0x5d1146(0x37d) + _0x1bccb2[_0x5d1146(0x7d7)] + _0x5d1146(0x7e7), _0x442a55[_0x5d1146(0xacf)](_0x5d1146(0x4f4), () => { _0x2df065(_0x1bccb2['id']); }), _0x442a55[_0x5d1146(0x795)](_0x5d1146(0xa1c))[_0x5d1146(0xacf)]('click', () => { _0x2df065(_0x1bccb2['id']); }), _0x442a55[_0x5d1146(0x795)]('.diary-delete-btn')[_0x5d1146(0xacf)](_0x5d1146(0x4f4), _0x14c48d => { const _0x2dd312 = _0x5d1146; _0x14c48d[_0x2dd312(0xa80)](), _0x1badc1(_0x1bccb2['id']); }), _0x32f810[_0x5d1146(0x168)](_0x442a55); } else { const _0x5bcd46 = _0x298913[_0x4007a1['length'] - 0x1]; (!_0x3a4fa2 || _0x5bcd46[_0x5d1146(0x1af)] > _0x282db8['timestamp']) && (_0x3a9899 = _0x5bcd46); } }); } function _0x2df065(_0x1b817b) { const _0x5b6a25 = _0x5f58e0, _0x108be0 = _0x21051e(_0x1b817b); if (!_0x108be0) return; _0x1884b1['activeDiaryCharacterId'] = _0x1b817b; const _0xcd08c0 = _0x1884b1[_0x5b6a25(0x7f1)][_0x5b6a25(0x6f9)](_0x5236f3 => _0x5236f3[_0x5b6a25(0x853)] === _0x1b817b), _0x584309 = _0xcd08c0 ? _0xcd08c0[_0x5b6a25(0xb3c)]['length'] : 0x0, _0x37c10a = 0x2; _0x1884b1['diaryCurrentPage'] = Math[_0x5b6a25(0x19f)](0x0, Math[_0x5b6a25(0x58f)](_0x584309 / _0x37c10a) - 0x1), document[_0x5b6a25(0x653)]('diary-char-name-header')[_0x5b6a25(0x8f9)] = _0x108be0['name'] + _0x5b6a25(0x58e), _0x5af97d(), _0x13d883(_0x5b6a25(0x730), _0x5b6a25(0x2c9)); } function _0x5af97d() { const _0x445c7e = _0x5f58e0, _0x1cbac0 = document[_0x445c7e(0x653)](_0x445c7e(0x4b2)), _0x630574 = document['getElementById'](_0x445c7e(0x4e0)); _0x1cbac0[_0x445c7e(0x9c2)] = '', _0x630574[_0x445c7e(0x9c2)] = ''; const _0x38a949 = _0x507cbe() || { 'name': '我' }, _0x485e60 = _0x1884b1['diaries'][_0x445c7e(0x6f9)](_0x5014e0 => _0x5014e0['characterId'] === _0x1884b1[_0x445c7e(0x553)]); if (!_0x485e60 || !_0x485e60[_0x445c7e(0xb3c)] || _0x485e60[_0x445c7e(0xb3c)][_0x445c7e(0x8a0)] === 0x0) { if (_0x445c7e(0xb7a) !== _0x445c7e(0x961)) { _0x1cbac0[_0x445c7e(0x9c2)] = _0x445c7e(0x9e7), _0x630574[_0x445c7e(0x9c2)] = _0x445c7e(0x81c), document[_0x445c7e(0x653)](_0x445c7e(0x3c4))[_0x445c7e(0xacf)](_0x445c7e(0x4f4), _0x39c729), document[_0x445c7e(0x653)](_0x445c7e(0x855))['addEventListener'](_0x445c7e(0x4f4), _0x8b5db7); return; } else { const _0x272b43 = new _0x4321b0(_0x439258[_0x445c7e(0x1af)]), _0x58db70 = _0x272b43['getFullYear']() + '-' + _0x30a850(_0x272b43[_0x445c7e(0x978)]() + 0x1)[_0x445c7e(0xa83)](0x2, '0') + '-' + _0x194a67(_0x272b43['getDate']())[_0x445c7e(0xa83)](0x2, '0'), _0x5056b9 = _0x519d3e(_0x272b43[_0x445c7e(0x2e3)]())[_0x445c7e(0xa83)](0x2, '0') + ':' + _0x46cfec(_0x272b43[_0x445c7e(0x697)]())[_0x445c7e(0xa83)](0x2, '0'); let _0x303119 = '未知'; _0x1a3119['role'] === _0x445c7e(0x901) ? _0x303119 = _0x2f64f4[_0x445c7e(0x7d7)] : _0x303119 = _0x42e93a['name']; let _0x3b3e07 = _0x4c3bfd[_0x445c7e(0x329)]; if (_0x5d060e[_0x445c7e(0x6dd)]) _0x3b3e07 = _0x445c7e(0x78f); if (_0x2f9438[_0x445c7e(0xaa4)]) _0x3b3e07 = _0x445c7e(0x614); return '[' + _0x58db70 + '\x20' + _0x5056b9 + _0x445c7e(0x759) + _0x303119 + ']:\x20' + _0x3b3e07; } } const _0x44fdd7 = 0x2, _0x1d4b3f = [..._0x485e60[_0x445c7e(0xb3c)]]['sort']((_0x1a6608, _0x10bd3d) => _0x1a6608[_0x445c7e(0x1af)] - _0x10bd3d[_0x445c7e(0x1af)]), _0x57e6aa = []; for (let _0x2406c8 = 0x0; _0x2406c8 < _0x1d4b3f[_0x445c7e(0x8a0)]; _0x2406c8 += _0x44fdd7) { _0x57e6aa['push'](_0x1d4b3f[_0x445c7e(0x46a)](_0x2406c8, _0x2406c8 + _0x44fdd7)); } const _0x2e1de5 = _0x57e6aa[_0x445c7e(0x8a0)]; _0x57e6aa['forEach']((_0xcf13cd, _0x60900a) => { const _0x55cd9e = _0x445c7e; if (_0x55cd9e(0x16b) !== 'Gonux') { const _0x5b5563 = _0x2490bf[_0x55cd9e(0x8ac)][_0x55cd9e(0x3dc)](); _0xbddb51['textContent'] = _0x5b5563[_0x55cd9e(0x1d0)] === _0x55cd9e(0x700) ? '旁白' : _0x5b5563[_0x55cd9e(0x1d0)], _0x479635['textContent'] = _0x5b5563[_0x55cd9e(0x15b)], _0x5b5563[_0x55cd9e(0x1d0)] !== _0x55cd9e(0x700) && _0xe152c1(_0x5324e4[_0x55cd9e(0x5f2)], _0x5b5563[_0x55cd9e(0x5cc)]); } else { const _0x31bcfb = document[_0x55cd9e(0x2da)](_0x55cd9e(0x1f9)); _0x31bcfb[_0x55cd9e(0x84e)] = _0x55cd9e(0x969), _0x31bcfb['id'] = 'diary-page-' + _0x60900a; if (_0x60900a === _0x1884b1[_0x55cd9e(0xa07)]) { if (_0x55cd9e(0x5ca) !== 'YlONO') _0x31bcfb[_0x55cd9e(0xb7b)]['add'](_0x55cd9e(0x43d)); else { const _0x59a9f2 = _0x45b980(); if (!_0x59a9f2) { _0x19f36e[_0x55cd9e(0x8f9)] = '选择聊天'; return; } if (_0x59a9f2['type'] === 'private') { const _0x880c0 = _0x1c77b5(_0x59a9f2[_0x55cd9e(0x3d5)][0x0]); _0x3ca2a3['textContent'] = _0x880c0 ? _0x880c0['name'] : _0x55cd9e(0x3f2); } else _0x54c067[_0x55cd9e(0x8f9)] = _0x59a9f2[_0x55cd9e(0x7d7)] || _0x55cd9e(0x96a) + _0x59a9f2['participantIds'][_0x55cd9e(0x8a0)] + ')'; } } _0xcf13cd[_0x55cd9e(0xa30)](_0x68b9c1 => { const _0x216574 = _0x55cd9e, _0x3df192 = _0x68b9c1[_0x216574(0x15e)] === _0x216574(0x901) ? _0x216574(0x901) : 'ai', _0x59f2e3 = _0x68b9c1[_0x216574(0x15e)] === _0x216574(0x901) ? _0x38a949[_0x216574(0x7d7)] : _0x21051e(_0x68b9c1[_0x216574(0x15e)])[_0x216574(0x7d7)], _0x34850e = document['createElement'](_0x216574(0x1f9)); _0x34850e[_0x216574(0x84e)] = _0x216574(0x698) + _0x3df192, _0x34850e[_0x216574(0x2c4)]['timestamp'] = _0x68b9c1[_0x216574(0x1af)], _0x34850e['style'][_0x216574(0x37e)] = _0x216574(0x643), _0x34850e[_0x216574(0x313)][_0x216574(0x1cc)] = '0', _0x34850e[_0x216574(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x59f2e3 + _0x216574(0x481) + new Date(_0x68b9c1['timestamp'])['toLocaleString'](_0x216574(0x567)) + _0x216574(0x928) + _0x68b9c1[_0x216574(0x329)]['replace'](/\n/g, _0x216574(0x3b1)) + _0x216574(0x765), _0x31bcfb[_0x216574(0x168)](_0x34850e); }), _0x1cbac0[_0x55cd9e(0x168)](_0x31bcfb); } }), _0x630574['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20' + (_0x1884b1['diaryCurrentPage'] + 0x1) + '\x20/\x20' + _0x2e1de5 + _0x445c7e(0x5d4), document[_0x445c7e(0x653)](_0x445c7e(0xaee))[_0x445c7e(0x534)] = _0x1884b1[_0x445c7e(0xa07)] === 0x0, document[_0x445c7e(0x653)](_0x445c7e(0xab9))[_0x445c7e(0x534)] = _0x1884b1[_0x445c7e(0xa07)] === _0x2e1de5 - 0x1, document['getElementById'](_0x445c7e(0xaee))[_0x445c7e(0xacf)]('click', _0x419c0d), document[_0x445c7e(0x653)](_0x445c7e(0xab9))[_0x445c7e(0xacf)](_0x445c7e(0x4f4), _0x37d157), document[_0x445c7e(0x653)](_0x445c7e(0x3c4))[_0x445c7e(0xacf)](_0x445c7e(0x4f4), _0x39c729), document['getElementById']('diary-get-reply-button')[_0x445c7e(0xacf)]('click', _0x8b5db7); } function _0x37d157() { const _0x40f529 = _0x5f58e0; if (_0x1884b1['isAnimatingDiary']) return; const _0x246085 = _0x1884b1[_0x40f529(0xa07)], _0x4377d6 = Math['ceil'](_0x1884b1[_0x40f529(0x7f1)][_0x40f529(0x6f9)](_0x1da78d => _0x1da78d['characterId'] === _0x1884b1['activeDiaryCharacterId'])[_0x40f529(0xb3c)][_0x40f529(0x8a0)] / 0x2); if (_0x246085 >= _0x4377d6 - 0x1) return; _0x1884b1[_0x40f529(0x46c)] = !![]; const _0x423d1e = _0x246085 + 0x1, _0x291a45 = document[_0x40f529(0x653)](_0x40f529(0x1a7) + _0x246085), _0x2a3a42 = document['getElementById']('diary-page-' + _0x423d1e); _0x291a45 && _0x2a3a42 ? (_0x2a3a42[_0x40f529(0xb7b)][_0x40f529(0x428)](_0x40f529(0x218)), _0x291a45[_0x40f529(0xb7b)][_0x40f529(0x428)](_0x40f529(0x5d3)), _0x2a3a42['classList']['add']('is-visible'), setTimeout(() => { const _0x2cfa = _0x40f529; _0x2cfa(0x3f3) !== _0x2cfa(0x79f) ? (_0x291a45[_0x2cfa(0xb7b)][_0x2cfa(0x344)](_0x2cfa(0x43d), _0x2cfa(0x5d3)), _0x2a3a42['classList'][_0x2cfa(0x344)](_0x2cfa(0x218)), _0x1884b1[_0x2cfa(0xa07)] = _0x423d1e, _0x5af97d(), _0x1884b1[_0x2cfa(0x46c)] = ![]) : (_0x41c016(_0x2cfa(0x842), _0x2cfa(0x6fe)), _0xf4a5e6(() => _0x4c5d3c(), 0x64)); }, 0x2bc)) : _0x1884b1[_0x40f529(0x46c)] = ![]; } function _0x419c0d() { const _0x103fef = _0x5f58e0; if ('kDAXu' === _0x103fef(0x3ab)) { if (_0x1884b1[_0x103fef(0x46c)]) return; const _0x526361 = _0x1884b1['diaryCurrentPage']; if (_0x526361 <= 0x0) return; _0x1884b1[_0x103fef(0x46c)] = !![]; const _0x4178e2 = _0x526361 - 0x1, _0x1a1fe2 = document[_0x103fef(0x653)](_0x103fef(0x1a7) + _0x526361), _0x2b73b5 = document['getElementById']('diary-page-' + _0x4178e2); _0x1a1fe2 && _0x2b73b5 ? (_0x2b73b5[_0x103fef(0xb7b)][_0x103fef(0x428)](_0x103fef(0x1ca)), _0x1a1fe2[_0x103fef(0xb7b)][_0x103fef(0x428)]('is-exiting-right'), _0x2b73b5[_0x103fef(0xb7b)][_0x103fef(0x428)](_0x103fef(0x43d)), setTimeout(() => { const _0x37710c = _0x103fef; _0x37710c(0x4b7) === _0x37710c(0x4b7) ? (_0x1a1fe2[_0x37710c(0xb7b)][_0x37710c(0x344)](_0x37710c(0x43d), 'is-exiting-right'), _0x2b73b5[_0x37710c(0xb7b)]['remove'](_0x37710c(0x1ca)), _0x1884b1[_0x37710c(0xa07)] = _0x4178e2, _0x5af97d(), _0x1884b1[_0x37710c(0x46c)] = ![]) : _0x24d0ab[_0x37710c(0x168)](_0x336e49); }, 0x2bc)) : _0x1884b1[_0x103fef(0x46c)] = ![]; } else { _0x37cca2[_0x103fef(0x9c2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>'; return; } } function _0x39c729() { return new Promise(_0x303336 => { const _0x15fcee = _0x493f, _0x30b9bd = _0x15fcee(0x5da); document[_0x15fcee(0xafb)][_0x15fcee(0x8e4)]('beforeend', _0x30b9bd); const _0x301608 = document[_0x15fcee(0x653)](_0x15fcee(0x5d7)), _0x3d87c8 = document[_0x15fcee(0x653)]('diary-modal-textarea'), _0xa59ca = document[_0x15fcee(0x653)](_0x15fcee(0x88f)), _0x29b377 = document[_0x15fcee(0x653)]('diary-modal-cancel'), _0x14adcc = _0x301608[_0x15fcee(0x795)](_0x15fcee(0x340)), _0x29b98f = () => { const _0xc61e73 = _0x15fcee; if (_0xc61e73(0x55f) === _0xc61e73(0x7c0)) { const _0x19dd37 = _0x1fe1e7[_0xc61e73(0x795)](_0xc61e73(0xaea) + _0x4a2a29 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x22e1f6 + _0xc61e73(0xa77))?.['innerHTML']; _0x19dd37 && (_0x7bc7c6[_0xc61e73(0x9c2)] = _0x19dd37); } else _0x301608[_0xc61e73(0x344)](), _0x303336(); }; _0xa59ca[_0x15fcee(0x5c8)] = () => { _0x2ab93c(_0x3d87c8['value']), _0x29b98f(); }, _0x29b377[_0x15fcee(0x5c8)] = _0x29b98f, _0x14adcc['onclick'] = _0x29b98f; }); } function _0x2ab93c(_0x317f01) { const _0x497250 = _0x5f58e0; if ('iGzoA' !== 'GoKeS') { const _0x3750c2 = _0x317f01['trim'](); if (!_0x3750c2 || !_0x1884b1['activeDiaryCharacterId']) return; let _0x52119c = _0x1884b1[_0x497250(0x7f1)]['find'](_0x58fa71 => _0x58fa71[_0x497250(0x853)] === _0x1884b1['activeDiaryCharacterId']); !_0x52119c && ('wFdgk' === 'ZHlhz' ? _0x4d2998 = _0x3b5149[_0x497250(0x3bf)] : (_0x52119c = { 'characterId': _0x1884b1[_0x497250(0x553)], 'entries': [] }, _0x1884b1[_0x497250(0x7f1)]['push'](_0x52119c))); _0x52119c[_0x497250(0xb3c)][_0x497250(0x24d)]({ 'timestamp': Date[_0x497250(0x965)](), 'author': _0x497250(0x901), 'content': _0x3750c2 }), _0x480928(); const _0x1ecb43 = _0x52119c[_0x497250(0xb3c)][_0x497250(0x8a0)]; _0x1884b1[_0x497250(0xa07)] = Math[_0x497250(0x58f)](_0x1ecb43 / 0x2) - 0x1, _0x5af97d(); } else { const _0x246fe6 = _0xed7bcc[_0x497250(0xb25)](_0x8218ac, _0x497250(0xadd)), _0xd38854 = _0x246fe6[_0x497250(0x751)](_0x40a84c), _0x47dd75 = _0xd38854[_0x497250(0x215)]({ 'id': _0x53a9cd, 'blob': _0x552835 }); _0x47dd75[_0x497250(0x8ef)] = () => _0x5261c7(_0x47dd75[_0x497250(0x97f)]), _0x47dd75[_0x497250(0x740)] = () => _0x13ed74(_0x47dd75['error']); } } async function _0x8b5db7() { const _0x42eb12 = _0x5f58e0; if (_0x42eb12(0x872) === _0x42eb12(0x872)) { const _0x56169b = _0x1884b1[_0x42eb12(0x7f1)]['find'](_0x157597 => _0x157597[_0x42eb12(0x853)] === _0x1884b1['activeDiaryCharacterId']), _0x5bd2aa = _0x1884b1['activeDiaryCharacterId'], _0x594472 = _0x21051e(_0x5bd2aa); if (!_0x594472 || _0x1884b1[_0x42eb12(0xa54)]) return; _0x1d9e54(!![], _0x42eb12(0x512)), _0x1884b1[_0x42eb12(0xa54)] = !![]; let _0x25468e = []; try { const _0x1d9056 = _0x507cbe() || { 'name': '你' }, _0x3d6730 = _0x2c45f5(_0x5bd2aa), { omniText: _0x19efb9 } = _0x1c528d(_0x5bd2aa, _0x1884b1[_0x42eb12(0x9a8)]); let _0x13c09b = ''; if (_0x594472[_0x42eb12(0x99b)] && _0x594472[_0x42eb12(0x99b)][_0x42eb12(0x8a0)] > 0x0) { if (_0x42eb12(0x3ce) !== 'YuGyA') { const _0x481668 = _0x594472[_0x42eb12(0x99b)][_0x42eb12(0x7d4)](_0x3ddf31 => _0x1884b1[_0x42eb12(0x562)][_0x42eb12(0x6f9)](_0x3735cd => _0x3735cd['id'] === _0x3ddf31))[_0x42eb12(0x776)](Boolean)['map'](_0x537463 => _0x42eb12(0x15c) + _0x537463[_0x42eb12(0x7d7)] + '\x0a' + _0x537463[_0x42eb12(0x329)])[_0x42eb12(0x359)](''); if (_0x481668) _0x13c09b = _0x42eb12(0x60b) + _0x481668; } else _0x4b3426[_0x42eb12(0x74e)] = _0x5deb66[_0x42eb12(0x264)](_0xac606a); } const _0x6a2955 = _0x1d9056[_0x42eb12(0x370)] ? '\x0a\x0a#\x20关于读者“' + _0x1d9056[_0x42eb12(0x7d7)] + _0x42eb12(0x631) + _0x1d9056['persona'] : '', _0x5ec176 = _0x1b0dfd(); let _0x2103ef = _0x42eb12(0xaa0); if (_0x56169b && _0x56169b[_0x42eb12(0xb3c)]) { const _0x186ed4 = _0x56169b[_0x42eb12(0xb3c)]['filter'](_0x1d94db => _0x1d94db[_0x42eb12(0x15e)] === _0x42eb12(0x901))[_0x42eb12(0x915)](); _0x186ed4 && (_0x2103ef = _0x186ed4['content']); } const _0x3ad696 = _0x42eb12(0x821) + _0x594472[_0x42eb12(0x7d7)] + _0x42eb12(0x73b) + _0x1d9056[_0x42eb12(0x7d7)] + '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（' + _0x1d9056[_0x42eb12(0x7d7)] + _0x42eb12(0x33c) + _0x2103ef + _0x42eb12(0x690) + _0x594472[_0x42eb12(0x370)] + '\x0a' + _0x6a2955 + '\x0a' + _0x13c09b + _0x42eb12(0x6d5) + new Date()[_0x42eb12(0x40a)]('zh-CN', { 'dateStyle': _0x42eb12(0xb4a), 'timeStyle': _0x42eb12(0xa5a) }) + '\x0a-\x20**日记本的上一笔记录是在**:\x20' + _0x68ddbc(new Date(_0x56169b?.[_0x42eb12(0xb3c)]?.['at'](-0x1)?.[_0x42eb12(0x1af)] || Date[_0x42eb12(0x965)]())) + _0x42eb12(0x890) + (_0x19efb9 || '最近没有互动记录。') + _0x42eb12(0x715) + (_0x5ec176 || '最近没有动态记录。') + _0x42eb12(0x73e); _0x25468e = [{ 'role': _0x42eb12(0xa40), 'content': _0x3ad696 }, { 'role': 'user', 'content': '好了，请基于以上所有信息，开始写今天的日记吧。' }]; const _0x3e8c29 = await _0x286894(_0x25468e); if (_0x3e8c29) { let _0xdd8934 = _0x1884b1['diaries'][_0x42eb12(0x6f9)](_0x1afffb => _0x1afffb['characterId'] === _0x5bd2aa); !_0xdd8934 && (_0xdd8934 = { 'characterId': _0x5bd2aa, 'entries': [] }, _0x1884b1[_0x42eb12(0x7f1)][_0x42eb12(0x24d)](_0xdd8934)); _0xdd8934[_0x42eb12(0xb3c)][_0x42eb12(0x24d)]({ 'timestamp': Date[_0x42eb12(0x965)](), 'author': _0x5bd2aa, 'content': _0x3e8c29 }), _0x480928(); const _0x503c86 = _0xdd8934[_0x42eb12(0xb3c)][_0x42eb12(0x8a0)]; _0x1884b1['diaryCurrentPage'] = Math['ceil'](_0x503c86 / 0x2) - 0x1, _0x5af97d(); } } catch (_0x2f7755) { 'rCxqq' === 'rCxqq' ? _0x5929aa(_0x42eb12(0x26a) + _0x2f7755[_0x42eb12(0xa53)]) : _0x5583b2(_0x5120c8[_0x42eb12(0x180)])['then'](_0xbed798 => { const _0x4fa9c6 = _0x42eb12, _0x7f2cdb = _0xfb84fc[_0x4fa9c6(0x653)](_0x1d172e); if (_0x7f2cdb && _0xbed798) _0x7f2cdb[_0x4fa9c6(0x74e)] = _0x469d4a[_0x4fa9c6(0x264)](_0xbed798); }); } finally { _0x1d9e54(![]), _0x1884b1[_0x42eb12(0xa54)] = ![]; } } else { if (!_0x4e97ec[_0x42eb12(0xa26)] || _0x3f7998['friendCircles'][_0x42eb12(0x8a0)] === 0x0) { _0x584b8e[_0x42eb12(0x5f0)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x283570 = _0x2b3431['friendCircles'][0x0]; if (_0x283570['memberCharacterIds'][_0x42eb12(0x8a0)] < 0x2) { _0x121b26[_0x42eb12(0x5f0)](_0x42eb12(0x319) + _0x283570[_0x42eb12(0x7d7)] + _0x42eb12(0x561)); return; } const _0x38ed83 = { 'id': _0x42eb12(0x816) + _0xedbf30['now'](), 'authorType': _0x42eb12(0x50e), 'authorId': _0x283570[_0x42eb12(0x42a)][0x0], 'content': _0x42eb12(0x704), 'timestamp': _0x4b658f[_0x42eb12(0x965)](), 'likes': [_0x283570[_0x42eb12(0x42a)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x3c4008[_0x42eb12(0x965)](), 'authorId': _0x283570['memberCharacterIds'][0x1], 'content': _0x42eb12(0x21f) }] }; _0x283570[_0x42eb12(0xa6e)][_0x42eb12(0x24d)](_0x38ed83), _0xbaff1c(), _0x306e72[_0x42eb12(0xace)](_0x42eb12(0x486) + _0x283570[_0x42eb12(0x7d7)] + _0x42eb12(0x18f)), _0x25030c(_0x42eb12(0x6fd)); } } function _0x2d8fe4() { const _0x515ca6 = _0x5f58e0, _0x18f6b8 = document[_0x515ca6(0x653)](_0x515ca6(0x780)), _0x25cc60 = document[_0x515ca6(0x653)](_0x515ca6(0x9bf)), _0x1fc8a1 = document[_0x515ca6(0x795)](_0x515ca6(0x78d)); if (_0x1884b1[_0x515ca6(0x30f)] === _0x515ca6(0x53b)) _0x18f6b8[_0x515ca6(0x313)][_0x515ca6(0x272)] = _0x515ca6(0x643), _0x25cc60[_0x515ca6(0x313)][_0x515ca6(0x272)] = _0x515ca6(0x8b0); else { if (_0x515ca6(0x74f) !== 'WosTX') _0x18f6b8[_0x515ca6(0x313)]['display'] = _0x515ca6(0x8b0), _0x25cc60['style'][_0x515ca6(0x272)] = 'none'; else { const _0x211772 = _0x4037da[_0x515ca6(0x653)](_0x515ca6(0xa0a)), _0x4871f7 = _0x211772[_0x515ca6(0x6e4)](_0x515ca6(0x976)), _0x587322 = _0x515253[_0x515ca6(0x795)](_0x515ca6(0x25c)); if (_0x4871f7[_0x515ca6(0x8a0)] === 0x0) _0x587322['textContent'] = '--\x20点击选择\x20--'; else _0x4871f7[_0x515ca6(0x8a0)] > 0x2 ? _0x587322[_0x515ca6(0x8f9)] = _0x515ca6(0x20e) + _0x4871f7[_0x515ca6(0x8a0)] + '\x20项' : _0x587322[_0x515ca6(0x8f9)] = _0xf59c84[_0x515ca6(0x5a1)](_0x4871f7)['map'](_0x34d2d1 => _0x34d2d1[_0x515ca6(0x8fb)][_0x515ca6(0x8f9)][_0x515ca6(0x87b)]())[_0x515ca6(0x359)]('、'); } } _0x1fc8a1['style'][_0x515ca6(0x272)] = _0x515ca6(0x8b0); } function _0x5c5d6d() { const _0x258fd5 = _0x5f58e0, _0x2bbb75 = document['getElementById'](_0x258fd5(0x66b)), _0xf73e38 = document[_0x258fd5(0x653)](_0x258fd5(0xb4e)); if (_0x1884b1[_0x258fd5(0x8ac)][_0x258fd5(0x8a0)] > 0x0) { if (_0x258fd5(0xa27) === 'BTyLm') { const _0x53254a = _0x1884b1[_0x258fd5(0x8ac)][_0x258fd5(0x3dc)](); _0x2bbb75[_0x258fd5(0x8f9)] = _0x53254a[_0x258fd5(0x1d0)] === _0x258fd5(0x700) ? '旁白' : _0x53254a[_0x258fd5(0x1d0)], _0xf73e38[_0x258fd5(0x8f9)] = _0x53254a[_0x258fd5(0x15b)], _0x53254a[_0x258fd5(0x1d0)] !== _0x258fd5(0x700) && (_0x258fd5(0xa70) !== _0x258fd5(0xa70) ? _0x5318b4 += _0x258fd5(0x91b) : _0x46d7e0(_0x1884b1['activeMeetingCharId'], _0x53254a['emotion'])); } else { const { playlist: _0x1b3136, currentIndex: _0xe9506f } = _0x2d7558[_0x258fd5(0x440)](_0x574def); _0x49b0ce[_0x258fd5(0xb41)](_0x1b3136) && _0x1b3136[_0x258fd5(0x8a0)] > 0x0 && _0xe9506f > -0x1 && (_0x3ffed5[_0x258fd5(0xb5e)] = _0x1b3136, _0x26c476[_0x258fd5(0xa39)] = _0xe9506f, _0x25ab69['isPlaying'] = ![], _0xe2b8e8()); } } else { if (_0x258fd5(0x7bd) === _0x258fd5(0x3cf)) return { 'type': _0x258fd5(0x6b2), 'name': _0x1f882b[0x1]['trim']() }; else { const _0x56bdc4 = _0x1884b1[_0x258fd5(0x3ad)][_0x1884b1['activeMeetingCharId']]; if (_0x56bdc4 && _0x56bdc4[_0x258fd5(0x8a0)] > 0x0) { if ('jRfsr' !== _0x258fd5(0xb0e)) _0x2c03c3['image'] = _0x59c7de; else { _0x1884b1[_0x258fd5(0x8ac)] = [..._0x56bdc4]; const _0x143a14 = _0x1884b1['activeMeetingScriptQueue'][_0x258fd5(0x3dc)](); _0x2bbb75[_0x258fd5(0x8f9)] = _0x143a14[_0x258fd5(0x1d0)] === _0x258fd5(0x700) ? '旁白' : _0x143a14[_0x258fd5(0x1d0)], _0xf73e38['textContent'] = _0x143a14[_0x258fd5(0x15b)], _0x143a14['speaker'] !== _0x258fd5(0x700) && (_0x258fd5(0x375) !== _0x258fd5(0x375) ? _0x76516c['error'](_0x258fd5(0xb1e), _0x15e3ec) : _0x46d7e0(_0x1884b1['activeMeetingCharId'], _0x143a14[_0x258fd5(0x5cc)])); } } else _0x2bbb75[_0x258fd5(0x8f9)] = '旁白', _0xf73e38['textContent'] = _0x258fd5(0x897); } } } async function _0x46d7e0(_0x3fb78f, _0x41727d) { const _0x59c897 = _0x5f58e0; if (_0x59c897(0xa8c) !== _0x59c897(0x922)) { const _0x1aa172 = document[_0x59c897(0x653)](_0x59c897(0x679)), _0x50b2e4 = document['getElementById']('galgame-sprite-container'), _0x3fb08a = _0x21051e(_0x3fb78f), _0x52e71c = _0x3fb08a?.[_0x59c897(0xa75)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x398bfe = 0x50 * _0x52e71c[_0x59c897(0x314)]; _0x50b2e4[_0x59c897(0x313)]['height'] = _0x398bfe + '%', _0x50b2e4['style'][_0x59c897(0x62c)] = _0x398bfe + '%', _0x50b2e4[_0x59c897(0x313)][_0x59c897(0xa05)] = _0x52e71c['x'] + '%', _0x50b2e4['style'][_0x59c897(0x86a)] = _0x52e71c['y'] + '%', _0x50b2e4['style'][_0x59c897(0x72a)] = _0x59c897(0x54a), _0x50b2e4['style'][_0x59c897(0xa67)] = _0x59c897(0x31b); const _0xba2749 = [_0x59c897(0xb1a), _0x59c897(0x51e), _0x59c897(0xad0), _0x59c897(0x2af), _0x59c897(0xae9)], _0x536a18 = _0xba2749[_0x59c897(0x1ac)](_0x41727d) ? _0x41727d : _0x59c897(0xb1a); try { if (_0x59c897(0x79b) === _0x59c897(0x79b)) { const _0x498d97 = await _0x329660(_0x59c897(0x1de) + _0x536a18 + '_' + _0x3fb78f); if (_0x498d97) { if (_0x1aa172[_0x59c897(0x74e)] && _0x1aa172[_0x59c897(0x313)][_0x59c897(0x480)] !== '0') _0x59c897(0x580) !== _0x59c897(0x4f8) ? (_0x1aa172[_0x59c897(0x313)][_0x59c897(0x480)] = 0x0, setTimeout(() => { const _0x17852a = _0x59c897; if (_0x17852a(0x520) !== _0x17852a(0x520)) { _0x2702a4 = _0x57bea9(_0x694b4a); if (!_0x552ddd) throw new _0x140665(_0x17852a(0x540)); _0x186b9c[_0x17852a(0xace)]('兼容模式成功，已将\x20' + _0x528d0f['id'] + _0x17852a(0x663)); } else _0x1aa172[_0x17852a(0x74e)] = URL[_0x17852a(0x264)](_0x498d97), _0x1aa172[_0x17852a(0x313)]['opacity'] = 0x1; }, 0x96)) : _0x11daa2['textContent'] = _0x59c897(0x4aa); else { if (_0x59c897(0xac8) === _0x59c897(0x5bf)) { let _0x47c769 = null; const _0x1a128f = _0x2a0181[_0x59c897(0x940)][_0x59c897(0x776)](_0x1dd604 => _0x1dd604[_0x59c897(0x3d5)][_0x59c897(0x1ac)](_0x1d1bc1)); for (const _0x3ac88a of _0x1a128f) { const _0x33f6f0 = _0x293545(_0x3ac88a['id']); if (_0x33f6f0 && _0x33f6f0[_0x59c897(0x8a0)] > 0x0) { const _0x571f7a = _0x33f6f0[_0x33f6f0[_0x59c897(0x8a0)] - 0x1]; (!_0x47c769 || _0x571f7a['timestamp'] > _0x47c769['timestamp']) && (_0x47c769 = _0x571f7a); } } return _0x47c769; } else _0x1aa172[_0x59c897(0x74e)] = URL['createObjectURL'](_0x498d97), _0x1aa172[_0x59c897(0x313)][_0x59c897(0x480)] = 0x1; } } else { const _0x4b29ee = await _0x329660(_0x59c897(0xa4d) + _0x3fb78f); _0x1aa172[_0x59c897(0x74e)] = _0x4b29ee ? URL[_0x59c897(0x264)](_0x4b29ee) : ''; } } else { if (_0xed17f2[_0x59c897(0x46c)]) return; const _0x1d28e3 = _0x565c48['diaryCurrentPage'], _0x4024d5 = _0x5504cd['ceil'](_0x2126dc[_0x59c897(0x7f1)][_0x59c897(0x6f9)](_0x3d1411 => _0x3d1411[_0x59c897(0x853)] === _0x89fb12[_0x59c897(0x553)])[_0x59c897(0xb3c)][_0x59c897(0x8a0)] / 0x2); if (_0x1d28e3 >= _0x4024d5 - 0x1) return; _0x42cd64[_0x59c897(0x46c)] = !![]; const _0x247762 = _0x1d28e3 + 0x1, _0x104a1f = _0x50f925[_0x59c897(0x653)](_0x59c897(0x1a7) + _0x1d28e3), _0x491d2f = _0x1c9f48['getElementById']('diary-page-' + _0x247762); _0x104a1f && _0x491d2f ? (_0x491d2f[_0x59c897(0xb7b)]['add']('is-entering-from-right'), _0x104a1f[_0x59c897(0xb7b)][_0x59c897(0x428)](_0x59c897(0x5d3)), _0x491d2f['classList'][_0x59c897(0x428)](_0x59c897(0x43d)), _0x475c87(() => { const _0x51bacc = _0x59c897; _0x104a1f[_0x51bacc(0xb7b)][_0x51bacc(0x344)](_0x51bacc(0x43d), _0x51bacc(0x5d3)), _0x491d2f[_0x51bacc(0xb7b)]['remove'](_0x51bacc(0x218)), _0x38317a['diaryCurrentPage'] = _0x247762, _0x59e66c(), _0x47a3c4[_0x51bacc(0x46c)] = ![]; }, 0x2bc)) : _0x10d01f[_0x59c897(0x46c)] = ![]; } } catch (_0x33a681) { if ('Aaczy' === 'Aaczy') console[_0x59c897(0x5f0)](_0x59c897(0x1a4), _0x33a681), _0x1aa172[_0x59c897(0x74e)] = ''; else { const _0x5f3a9d = _0xd176d0[_0x59c897(0x653)]('pending-post-image-preview'); _0x5f3a9d && _0x24c8e5 && (_0x5f3a9d[_0x59c897(0x74e)] = _0x514a07['createObjectURL'](_0xf69b06)); } } } else return { 'type': 'create_event', 'eventType': _0xab3997[0x1][_0x59c897(0x87b)](), 'eventDate': _0x2218e1[0x2]['trim'](), 'eventContent': _0x4ca8a8[0x3][_0x59c897(0x87b)]() }; } let _0x3b58d4 = ![], _0x461ca4 = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x2c3ac7 = document['getElementById'](_0x5f58e0(0x766)), _0xa739b1 = document[_0x5f58e0(0x653)](_0x5f58e0(0x195)), _0x92beac = document['getElementById'](_0x5f58e0(0x2f0)), _0x54b537 = document[_0x5f58e0(0x653)](_0x5f58e0(0x4fb)), _0x5046e6 = document[_0x5f58e0(0x653)](_0x5f58e0(0x8dc)), _0x4e32fa = document[_0x5f58e0(0x653)]('galgame-sprite-container'), _0x131e64 = document[_0x5f58e0(0x653)]('sprite-resize-handle'), _0x5eaf6e = document[_0x5f58e0(0x653)](_0x5f58e0(0x43a)); let _0x2858e9 = {}; function _0xe6f707() { const _0x30f9e9 = _0x5f58e0; if (_0x30f9e9(0x3a3) !== 'PXGrY') _0x1ee5ec[_0x30f9e9(0x6c1)](_0x59f155, { 'songName': _0xbb3d1e, 'artist': _0x3357f6, 'coverId': null, 'playableUrl': null }); else { const _0x52d881 = _0x21051e(_0x1884b1['activeMeetingCharId']); if (!_0x52d881) return; _0x3b58d4 = !![], _0x5046e6[_0x30f9e9(0x313)]['display'] = _0x30f9e9(0x8b0); const _0x1979ff = _0x52d881[_0x30f9e9(0xa75)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x30f9e9(0x653)](_0x30f9e9(0x81b))['value'] = _0x1979ff['x'], document[_0x30f9e9(0x653)](_0x30f9e9(0x9f3))[_0x30f9e9(0x3cd)] = _0x1979ff['y'], document[_0x30f9e9(0x653)]('sprite-slider-scale')['value'] = _0x1979ff[_0x30f9e9(0x314)] * 0x64, _0x2858e9 = { ..._0x1979ff }, document[_0x30f9e9(0x653)]('galgame-textbox-container')[_0x30f9e9(0x313)]['display'] = _0x30f9e9(0x643), document[_0x30f9e9(0x653)](_0x30f9e9(0xaac))[_0x30f9e9(0x313)][_0x30f9e9(0x272)] = 'none'; } } function _0x1c5b24(_0x19d618 = ![]) { const _0x2a77f0 = _0x5f58e0; if (_0x2a77f0(0x97e) !== _0x2a77f0(0x97e)) _0x38d9e7 = _0x5e7180[_0x2a77f0(0x98f)](_0x51d495); else { _0x3b58d4 = ![], _0x5046e6['style'][_0x2a77f0(0x272)] = 'none', document['getElementById'](_0x2a77f0(0x29d))[_0x2a77f0(0x313)]['display'] = 'block', document[_0x2a77f0(0x653)](_0x2a77f0(0xaac))[_0x2a77f0(0x313)][_0x2a77f0(0x272)] = 'block'; if (!_0x19d618) { if (_0x2a77f0(0x563) !== _0x2a77f0(0x563)) { _0x2d18e6 && _0x4e79b3[_0x2a77f0(0x24d)](_0x337dda); _0x9f5c0 = {}; const _0x4a3110 = _0x123cbe['substring'](0x2), _0x303ebc = _0x4a3110[_0x2a77f0(0x334)](/:\s(.+)/); if (_0x303ebc[_0x2a77f0(0x8a0)] > 0x1) { const _0x1d158e = _0x303ebc[0x0]['trim'](), _0x425754 = _0x303ebc[0x1]['trim']()[_0x2a77f0(0xac6)](/^"|"$/g, ''); _0x31917b[_0x1d158e] = _0x425754; } } else { const _0x1b8be5 = _0x21051e(_0x1884b1['activeMeetingCharId']); _0x1b8be5 && (_0x1b8be5['spriteTransform'] = _0x2858e9, _0x46d7e0(_0x1884b1['activeMeetingCharId'], _0x2a77f0(0xb1a))); } } } } function _0x3fcb85() { const _0x496f60 = _0x5f58e0, _0x120aeb = _0x21051e(_0x1884b1['activeMeetingCharId']); if (!_0x120aeb) return; const _0x9ddda = parseFloat(document[_0x496f60(0x653)]('sprite-slider-x')[_0x496f60(0x3cd)]), _0xea2965 = parseFloat(document[_0x496f60(0x653)](_0x496f60(0x9f3))[_0x496f60(0x3cd)]), _0x2d4be9 = parseFloat(document[_0x496f60(0x653)](_0x496f60(0x9c1))[_0x496f60(0x3cd)]) / 0x64; _0x120aeb[_0x496f60(0xa75)] = { 'x': _0x9ddda, 'y': _0xea2965, 'scale': _0x2d4be9 }, _0x480928(), _0x5929aa(_0x496f60(0x4ff)), _0x1c5b24(!![]); } function _0x548617() { const _0x453fc0 = _0x5f58e0; _0x9e00ac(_0x453fc0(0x741))[_0x453fc0(0x8e7)](_0x18e0ba => { const _0x5e0502 = _0x453fc0; if (_0x5e0502(0xb11) !== _0x5e0502(0x1ba)) { if (_0x18e0ba) { const _0x171cb7 = _0x21051e(_0x1884b1[_0x5e0502(0x5f2)]); _0x171cb7 && (delete _0x171cb7[_0x5e0502(0xa75)], _0x480928(), _0x46d7e0(_0x171cb7['id'], _0x5e0502(0xb1a)), _0x5929aa('已恢复默认。'), _0x1c5b24(!![])); } } else _0x513bdf(_0x5e0502(0x26a) + _0x5a4e3d[_0x5e0502(0xa53)]); }); } function _0x1e3df2() { const _0x2b9da = _0x5f58e0; if (!_0x3b58d4) return; const _0x170d37 = _0x1884b1[_0x2b9da(0x5f2)], _0x4d22dd = _0x21051e(_0x170d37); if (!_0x4d22dd) return; const _0x2fd847 = parseFloat(document[_0x2b9da(0x653)](_0x2b9da(0x81b))[_0x2b9da(0x3cd)]), _0x4735aa = parseFloat(document[_0x2b9da(0x653)]('sprite-slider-y')[_0x2b9da(0x3cd)]), _0x18a5d7 = parseFloat(document[_0x2b9da(0x653)]('sprite-slider-scale')[_0x2b9da(0x3cd)]) / 0x64; _0x4d22dd['spriteTransform'] = { 'x': _0x2fd847, 'y': _0x4735aa, 'scale': _0x18a5d7 }; const _0x2ad81c = document['getElementById'](_0x2b9da(0x290)), _0x315d3a = 0x50 * _0x18a5d7; _0x2ad81c[_0x2b9da(0x313)]['height'] = _0x315d3a + '%', _0x2ad81c[_0x2b9da(0x313)][_0x2b9da(0x62c)] = _0x315d3a + '%', _0x2ad81c['style'][_0x2b9da(0xa05)] = _0x2fd847 + '%', _0x2ad81c[_0x2b9da(0x313)]['top'] = _0x4735aa + '%', _0x2ad81c[_0x2b9da(0x313)]['transform'] = 'translate(-50%,\x20-100%)'; } document[_0x5f58e0(0x653)](_0x5f58e0(0x81b))[_0x5f58e0(0xacf)](_0x5f58e0(0x49e), _0x1e3df2), document[_0x5f58e0(0x653)]('sprite-slider-y')[_0x5f58e0(0xacf)](_0x5f58e0(0x49e), _0x1e3df2), document['getElementById'](_0x5f58e0(0x9c1))[_0x5f58e0(0xacf)](_0x5f58e0(0x49e), _0x1e3df2), _0x2c3ac7['addEventListener'](_0x5f58e0(0x4f4), _0xe6f707), _0xa739b1[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x3fcb85), _0x92beac['addEventListener']('click', () => _0x1c5b24(![])), _0x54b537[_0x5f58e0(0xacf)]('click', _0x548617); function _0x48607f(_0xdea433) { const _0x3c96a2 = _0x5f58e0; if ('LVLFH' !== _0x3c96a2(0x85b)) { const _0xcdb4bf = _0x21051e(_0xdea433); if (!_0xcdb4bf) return; const _0x3216d9 = _0x1884b1[_0x3c96a2(0x940)]['find'](_0x37c062 => _0x37c062[_0x3c96a2(0x8c3)] === _0x3c96a2(0xaa7) && _0x37c062[_0x3c96a2(0x3d5)][_0x3c96a2(0x1ac)](_0xdea433)), _0x5cf602 = _0x4079e8(_0x3216d9['id']), _0x413fa5 = _0x1884b1[_0x3c96a2(0x589)][_0x3c96a2(0x776)](_0x92bfad => _0x92bfad[_0x3c96a2(0xa04)])[_0x3c96a2(0x915)](), _0x3fb290 = document[_0x3c96a2(0x653)](_0x3c96a2(0x66b)), _0x19f19d = document[_0x3c96a2(0x653)](_0x3c96a2(0xb4e)); let _0x4f1134 = null; if (_0x413fa5) { if (_0x413fa5[_0x3c96a2(0xaae)] === 'assistant') { const _0x36459b = _0x1884b1['characterLastScripts'][_0xdea433]; _0x36459b && _0x36459b[_0x3c96a2(0x8a0)] > 0x0 && (_0x4f1134 = _0x36459b['at'](-0x1)); } else _0x4f1134 = { 'speaker': _0x5cf602[_0x3c96a2(0x7d7)], 'line': _0x413fa5[_0x3c96a2(0x329)], 'emotion': _0x3c96a2(0xb1a) }; } if (_0x4f1134) 'KfCVw' === _0x3c96a2(0x5c5) ? _0x585676[_0x3c96a2(0x313)][_0x3c96a2(0x272)] = _0x3c96a2(0x643) : (_0x3fb290[_0x3c96a2(0x8f9)] = _0x4f1134[_0x3c96a2(0x1d0)] === _0x3c96a2(0x700) ? '旁白' : _0x4f1134['speaker'], _0x19f19d[_0x3c96a2(0x8f9)] = _0x4f1134['line'], _0x4f1134[_0x3c96a2(0x1d0)] === _0xcdb4bf[_0x3c96a2(0x7d7)] ? _0x3c96a2(0x3c6) === _0x3c96a2(0x316) ? (_0x4994f0[_0x3c96a2(0x3cd)] = _0xba70dc['userProfile'][_0x3c96a2(0x7d7)] || '', _0x14d994[_0x3c96a2(0x74e)] = _0x225abf[_0x3c96a2(0x7c2)][_0x3c96a2(0x99a)] || _0x26b101, _0x169d22[_0x3c96a2(0x3cd)] = _0x2f9a0a[_0x3c96a2(0x7c2)]['persona'] || '') : _0x46d7e0(_0xdea433, _0x4f1134[_0x3c96a2(0x5cc)]) : _0x3c96a2(0x656) !== _0x3c96a2(0x727) ? _0x46d7e0(_0xdea433, _0x3c96a2(0xb1a)) : _0x1744f0[_0x3c96a2(0x24d)](_0x19b7b8)); else { if ('cEZEi' === _0x3c96a2(0x99d)) _0x3fb290['textContent'] = _0xcdb4bf[_0x3c96a2(0x7d7)], _0x19f19d[_0x3c96a2(0x8f9)] = '（开始一段新的对话...）', _0x46d7e0(_0xdea433, _0x3c96a2(0xb1a)); else { const _0x4d895a = _0x2cf504[_0x3c96a2(0xa4b)]['files'][0x0]; if (!_0x4d895a) return; try { const _0x430990 = _0x21d794[_0x3c96a2(0x264)](_0x4d895a); _0x4b5ac6['style']['backgroundImage'] = 'url(\x27' + _0x430990 + '\x27)'; } catch (_0x14113e) { _0x3d163e(_0x3c96a2(0x77d) + _0x14113e[_0x3c96a2(0xa53)]); } } } } else { const _0x48e69b = _0x3683fe[_0x3c96a2(0x47a)][_0x5c49a5]; _0x48e69b && _0x48e69b['originalExpenses'] && _0x2bef5e[_0x3c96a2(0x447)][_0x3c96a2(0x24d)](..._0x48e69b[_0x3c96a2(0x28e)]), delete _0x2c4edc[_0x3c96a2(0x47a)][_0x110053], _0x20ff2a(), _0x4b33a6(); } } function _0x19a9a7() { const _0x26a104 = _0x5f58e0, _0x413951 = new Date(), _0x267b0d = document['getElementById'](_0x26a104(0x53c)), _0x4ff9ca = document[_0x26a104(0x653)](_0x26a104(0x3a6)); if (_0x267b0d && _0x4ff9ca) { const _0x2cf2c6 = String(_0x413951[_0x26a104(0x2e3)]())[_0x26a104(0xa83)](0x2, '0'), _0x102288 = String(_0x413951[_0x26a104(0x697)]())[_0x26a104(0xa83)](0x2, '0'); _0x267b0d['textContent'] = _0x2cf2c6 + ':' + _0x102288; const _0x30e6d5 = _0x413951[_0x26a104(0x978)]() + 0x1, _0x42111d = _0x413951[_0x26a104(0x8ff)](), _0x3f5351 = [_0x26a104(0x85f), _0x26a104(0x62f), _0x26a104(0x579), '星期三', _0x26a104(0x25f), _0x26a104(0x4d7), _0x26a104(0x771)][_0x413951[_0x26a104(0x5df)]()]; _0x4ff9ca[_0x26a104(0x8f9)] = _0x30e6d5 + '月' + _0x42111d + '日\x20' + _0x3f5351; } } const _0x48956c = document[_0x5f58e0(0x653)](_0x5f58e0(0x9ba)), _0x1e19e3 = document[_0x5f58e0(0x653)](_0x5f58e0(0x8e3)), _0x220e41 = document['getElementById'](_0x5f58e0(0x964)), _0x531d18 = document['getElementById'](_0x5f58e0(0x672)), _0xeda8d5 = document['getElementById'](_0x5f58e0(0x1d6)), _0x29f550 = document[_0x5f58e0(0x653)](_0x5f58e0(0x8d4)), _0xdbe3c2 = document['getElementById'](_0x5f58e0(0xa13)), _0x565a41 = document[_0x5f58e0(0x653)](_0x5f58e0(0x49a)), _0x1e72e0 = document[_0x5f58e0(0x653)](_0x5f58e0(0x99c)); let _0x129f87 = []; async function _0x1201c6() { const _0x19fcca = _0x5f58e0; if (!_0x1884b1[_0x19fcca(0x9a8)]) return; _0xeda8d5[_0x19fcca(0x9c2)] = _0x19fcca(0x493), _0x48956c[_0x19fcca(0xb7b)][_0x19fcca(0x428)]('show'); const _0x57b7b1 = await _0x354975(); if (_0x57b7b1['length'] === 0x0) { if ('gBonn' === _0x19fcca(0xaa6)) { _0xeda8d5[_0x19fcca(0x9c2)] = _0x19fcca(0x60a); return; } else { _0x3fa8d0(_0x19fcca(0x586)); return; } } _0xeda8d5[_0x19fcca(0x9c2)] = '', _0x57b7b1[_0x19fcca(0xa30)](_0x9b8650 => { const _0x2320c9 = _0x19fcca; if (_0x2320c9(0x45b) === _0x2320c9(0xb68)) _0x2bed73['click'](); else { const _0x371755 = document['createElement'](_0x2320c9(0x1f9)); _0x371755[_0x2320c9(0x84e)] = 'music-library-item'; const _0x186764 = _0x9b8650[_0x2320c9(0x544)] ? URL['createObjectURL'](_0x9b8650[_0x2320c9(0x544)]) : _0xe4a1db; _0x371755[_0x2320c9(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x186764 + _0x2320c9(0x3aa) + (_0x9b8650['info'][_0x2320c9(0x2ed)] || _0x2320c9(0x587)) + _0x2320c9(0xb45) + (_0x9b8650['info']['歌手'] || _0x2320c9(0x1aa)) + _0x2320c9(0x926), _0x371755[_0x2320c9(0xacf)](_0x2320c9(0x4f4), () => { _0x16e54a(_0x9b8650); }), _0xeda8d5[_0x2320c9(0x168)](_0x371755); } }); } function _0x350292() { const _0x511534 = _0x5f58e0; _0x511534(0x893) !== _0x511534(0x893) ? (_0x42977c['src'] = _0x328888[_0x511534(0x264)](_0x21181d), _0x38283d[_0x511534(0x313)][_0x511534(0x480)] = 0x1) : _0x48956c[_0x511534(0xb7b)]['remove']('show'); } async function _0x16e54a(_0x21f8c6) { const _0x3e2f64 = _0x5f58e0; if (!_0x1884b1[_0x3e2f64(0x9a8)] || !_0x21f8c6) return; let _0x29f763 = null; if (_0x21f8c6[_0x3e2f64(0x544)]) try { _0x29f763 = _0x3e2f64(0x94d) + Date[_0x3e2f64(0x965)]() + '_' + Math['random'](), await _0x100c88(_0x29f763, _0x21f8c6[_0x3e2f64(0x544)]); } catch (_0x18a5a1) { console['error']('在“一起听”邀请中，净化封面失败:', _0x18a5a1); } const _0x3d967a = { 'role': _0x3e2f64(0x901), 'type': _0x3e2f64(0x94e), 'content': '[用户发起了听歌邀请:\x20' + _0x21f8c6['info'][_0x3e2f64(0x2ed)] + ']', 'songId': _0x21f8c6['id'], 'songName': _0x21f8c6['info'][_0x3e2f64(0x2ed)], 'artist': _0x21f8c6[_0x3e2f64(0x732)]['歌手'], 'coverId': _0x29f763, 'timestamp': Date[_0x3e2f64(0x965)]() }; _0x1884b1[_0x3e2f64(0x589)][_0x3e2f64(0x24d)](_0x3d967a), _0x21733b(), _0x59f07e(), _0x350292(), setTimeout(_0x180c61, 0x64); } _0x1e19e3[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x1201c6), _0x220e41[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x350292), _0x531d18[_0x5f58e0(0xacf)]('click', _0x350292); async function _0x1092fe(_0x12d65e, _0x438f9c, _0x291c04) { const _0x3838ad = _0x5f58e0; if (_0x3838ad(0x96d) === _0x3838ad(0x42b)) _0x478186[_0x3838ad(0x74e)] = _0x47fb0c[_0x3838ad(0x264)](_0x1a23dd), _0x2965f5[_0x3838ad(0x313)][_0x3838ad(0x272)] = 'block'; else { const _0x4c785c = _0x1884b1['chats'][_0x3838ad(0x6f9)](_0x5da882 => _0x5da882['activeListenSession'] && _0x5da882[_0x3838ad(0x8bb)][_0x3838ad(0x50c)]), _0x5681d7 = _0x2bf707(); if (_0x4c785c && _0x4c785c['id'] !== _0x5681d7['id']) 'UZkrA' === _0x3838ad(0x3e8) ? _0x244bbd('图片处理失败:\x20' + _0x421ffb['message']) : (_0x4c785c[_0x3838ad(0x8bb)] = null, _0x5929aa(_0x3838ad(0xa2d)), _0x480928()); else _0x4c785c && _0x4c785c['id'] === _0x5681d7['id'] && (_0x3838ad(0xb72) !== _0x3838ad(0xb72) ? (_0x24d623['value'] = '', _0x4cd281[_0x3838ad(0x8f9)] = '创建新角色', _0x5b3f4c[_0x3838ad(0x3cd)] = _0x3838ad(0x5c6) + (_0x168f6d[_0x3838ad(0x358)][_0x3838ad(0x8a0)] + 0x1), _0xf9d73['value'] = '', _0x278335[_0x3838ad(0x3cd)] = _0x3838ad(0xaf4), _0x41fab7[_0x3838ad(0x653)](_0x3838ad(0x768))[_0x3838ad(0x3cd)] = '', _0x4d0d7d()) : _0x5929aa(_0x3838ad(0x9c3))); _0x1d9e54(!![], _0x3838ad(0x9a1)); if (!_0x5681d7) { if (_0x3838ad(0x2c8) === _0x3838ad(0x2c8)) { _0x1d9e54(![]), _0x5929aa('错误：找不到签署契约的地方。'); return; } else _0x3931d8[_0x3838ad(0xacf)](_0x3838ad(0x4f4), function () { const _0x6e9d26 = { 'id': _0x2ea5b4['id'], 'url': _0x2a6ddb['playableUrl'] }; _0x2df9f9(this, _0x6e9d26); }); } const _0x4b1641 = await _0x44ee51(_0x12d65e); if (!_0x4b1641) { _0x1d9e54(![]), _0x5929aa('错误：找不到这首作为“信物”的歌。'); return; } _0x5681d7[_0x3838ad(0x8bb)] = { 'isActive': !![], 'songId': _0x12d65e, 'leaderId': 'user', 'songName': _0x4b1641[_0x3838ad(0x732)][_0x3838ad(0x2ed)], 'artist': _0x4b1641[_0x3838ad(0x732)]['歌手'], 'cover': _0x4b1641[_0x3838ad(0x544)] }, _0x480928(), document[_0x3838ad(0x653)](_0x3838ad(0x8d3))['src'] = _0x4b1641[_0x3838ad(0x544)] ? URL[_0x3838ad(0x264)](_0x4b1641[_0x3838ad(0x544)]) : _0xe4a1db, document[_0x3838ad(0x653)](_0x3838ad(0x325))[_0x3838ad(0x8f9)] = _0x4b1641['info'][_0x3838ad(0x2ed)], document[_0x3838ad(0x653)](_0x3838ad(0x27b))[_0x3838ad(0x8f9)] = _0x4b1641[_0x3838ad(0x732)]['歌手'], _0x5969a1(_0x4b1641), _0xdbe3c2[_0x3838ad(0x313)][_0x3838ad(0x272)] = 'flex', setTimeout(() => _0xdbe3c2[_0x3838ad(0xb7b)]['add'](_0x3838ad(0x322)), 0xa), _0x291c04[_0x3838ad(0x9c2)] = '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>' + _0x291c04['querySelector'](_0x3838ad(0x7c8))[_0x3838ad(0xb29)], _0x1884b1[_0x3838ad(0x589)][_0x438f9c] && (_0x1884b1[_0x3838ad(0x589)][_0x438f9c][_0x3838ad(0x4db)] = !![], _0x21733b()), _0x1d9e54(![]), _0x2097e4(_0x12d65e, [_0x12d65e]), _0x541511(_0x4b1641, !![]); } } function _0x392e4a() { const _0x46e150 = _0x5f58e0; if (_0x46e150(0x8e5) === _0x46e150(0x8e5)) { const _0x193838 = _0x1884b1['chats']['find'](_0x5128d4 => _0x5128d4['activeListenSession'] && _0x5128d4[_0x46e150(0x8bb)][_0x46e150(0x50c)]); _0x193838 && (_0x193838[_0x46e150(0x8bb)] = null, _0x480928(), _0x5929aa(_0x46e150(0x6d7)), _0x541511(), _0xdbe3c2[_0x46e150(0xb7b)][_0x46e150(0x344)](_0x46e150(0x322)), setTimeout(() => _0xdbe3c2[_0x46e150(0x313)][_0x46e150(0x272)] = 'none', 0x12c)); } else _0x46e150(0x963); } function _0x3882ac(_0x3a8bb0) { const _0x1b5bd2 = _0x5f58e0; if (!_0x3a8bb0) return []; const _0x100fe8 = _0x3a8bb0[_0x1b5bd2(0x334)]('\x0a'), _0x1c6f7e = [], _0x350c8e = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x2b43ba of _0x100fe8) { if (_0x1b5bd2(0x6e3) !== _0x1b5bd2(0xb65)) { const _0x3f1e93 = _0x2b43ba[_0x1b5bd2(0x81f)](_0x350c8e); if (_0x3f1e93) { if ('IawIt' === _0x1b5bd2(0x8ec)) { const _0x1367eb = parseInt(_0x3f1e93[0x1], 0xa), _0x3c14f7 = parseInt(_0x3f1e93[0x2], 0xa), _0x2d2ab3 = parseInt(_0x3f1e93[0x3], 0xa) * (_0x3f1e93[0x3][_0x1b5bd2(0x8a0)] === 0x2 ? 0xa : 0x1), _0x58ea24 = _0x1367eb * 0x3c + _0x3c14f7 + _0x2d2ab3 / 0x3e8, _0xc30a61 = _0x2b43ba['replace'](_0x350c8e, '')[_0x1b5bd2(0x87b)](); _0xc30a61 && _0x1c6f7e[_0x1b5bd2(0x24d)]({ 'time': _0x58ea24, 'text': _0xc30a61 }); } else _0x1f1f63 > _0x1427f4 && (_0x15bb67 *= _0x2c3029 / _0x381fbb, _0x362b42 = _0x1653f6); } } else { _0x583a12['id'] === _0x3d8e2d[_0x1b5bd2(0x9a8)] && (_0xb249a6(), _0x4ff2b0[_0x1b5bd2(0x589)] = [], _0x2bf158()); try { _0x59510d[_0x1b5bd2(0x673)](_0x1b5bd2(0x962) + _0x18b6a8['id']), _0x51aacd(_0x1b5bd2(0x5eb) + _0x1ed912['name'] + _0x1b5bd2(0x1f7)); } catch (_0x4ea49b) { _0x2afb60[_0x1b5bd2(0x5f0)](_0x1b5bd2(0x24e) + _0xfcf246['id'], _0x4ea49b), _0x313680(_0x1b5bd2(0x57c)); } } } return _0x1c6f7e; } function _0x5969a1(_0x1fa2db) { const _0x1dcbec = _0x5f58e0; _0x129f87 = _0x3882ac(_0x1fa2db[_0x1dcbec(0x89a)]), _0x1e72e0[_0x1dcbec(0x9c2)] = ''; if (_0x129f87['length'] === 0x0) { _0x1e72e0[_0x1dcbec(0x9c2)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x129f87['forEach']((_0x23992c, _0x526d9e) => { const _0x10ca1a = _0x1dcbec, _0x29a8c3 = document[_0x10ca1a(0x2da)]('p'); _0x29a8c3[_0x10ca1a(0x8f9)] = _0x23992c[_0x10ca1a(0x252)], _0x29a8c3['id'] = _0x10ca1a(0x3bc) + _0x526d9e, _0x1e72e0[_0x10ca1a(0x168)](_0x29a8c3); }); } function _0x383c42(_0x47ae92, _0x1d3906, _0x39c623, _0x266d62) { const _0x2c7347 = _0x5f58e0; if ('VSYTx' !== _0x2c7347(0x9c6)) { const _0x7c72f5 = (_0x266d62 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x47ae92 + _0x39c623 * Math[_0x2c7347(0x74c)](_0x7c72f5), 'y': _0x1d3906 + _0x39c623 * Math['sin'](_0x7c72f5) }; } else _0x3ef27e(_0x175d29['id']); } function _0x506ea2(_0x148fe8) { const _0x3732df = _0x5f58e0, _0x3c58bd = _0x3732df(0x23e), _0xacb3a7 = document[_0x3732df(0xa8d)](_0x3c58bd, _0x3732df(0x645)), _0x487c1a = 0xfa, _0x4c27c3 = _0x487c1a / 0x2, _0x2a29f6 = _0x487c1a / 0x2, _0xf50313 = _0x487c1a / 0x2 - 0x14; _0xacb3a7[_0x3732df(0xb04)]('width', _0x3732df(0x261)), _0xacb3a7['setAttribute']('height', _0x3732df(0x261)), _0xacb3a7['setAttribute']('viewBox', _0x3732df(0x709) + _0x487c1a + '\x20' + _0x487c1a); const _0x1c815e = Object['values'](_0x148fe8)[_0x3732df(0x83b)]((_0x52199d, _0x59129a) => _0x52199d + _0x59129a, 0x0); if (_0x1c815e === 0x0) return _0xacb3a7; let _0x3129b4 = -0x5a; const _0x4a5226 = [_0x3732df(0x83c), _0x3732df(0x781), _0x3732df(0x432), _0x3732df(0x754), _0x3732df(0x46f), _0x3732df(0x82f), _0x3732df(0x665), _0x3732df(0x276)]; let _0xe576bd = 0x0; for (const _0xfa95b6 in _0x148fe8) { if (_0x3732df(0x65c) === _0x3732df(0x214)) { const _0xb4a35 = _0x11136b['sender'] === 'character', _0x7b9700 = _0xb4a35 ? _0x4a6805 ? _0x16f3e6[0x0] : '?' : _0xa6d4a3 ? _0x387cf5[0x0] : '?'; _0x108726 += _0x3732df(0x18c) + (_0xb4a35 ? _0x3732df(0x901) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0xb4a35 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x7b9700 + _0x3732df(0x681) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0xb4a35 ? _0x3732df(0x901) : 'ai') + _0x3732df(0x1b4) + _0x50ad4e[_0x3732df(0x329)] + _0x3732df(0xb5b) + (_0xb4a35 ? _0x3732df(0x41c) + _0x7b9700 + '</div>' : '') + _0x3732df(0x2ae); } else { const _0x333312 = _0x148fe8[_0xfa95b6]; if (_0x333312 <= 0x0) continue; const _0x60762e = _0x333312 / _0x1c815e * 0x168, _0x5159f7 = _0x3129b4 + _0x60762e, _0x1165fe = _0x383c42(_0x4c27c3, _0x2a29f6, _0xf50313, _0x5159f7), _0x1b3b30 = _0x383c42(_0x4c27c3, _0x2a29f6, _0xf50313, _0x3129b4), _0x39e55d = _0x60762e > 0xb4 ? '1' : '0', _0x21139c = ['M', _0x1165fe['x'], _0x1165fe['y'], 'A', _0xf50313, _0xf50313, 0x0, _0x39e55d, 0x1, _0x1b3b30['x'], _0x1b3b30['y'], 'L', _0x4c27c3, _0x2a29f6, 'Z'][_0x3732df(0x359)]('\x20'), _0xde3252 = document['createElementNS'](_0x3c58bd, 'path'); _0xde3252[_0x3732df(0xb04)]('d', _0x21139c), _0xde3252['setAttribute'](_0x3732df(0xb4f), _0x4a5226[_0xe576bd % _0x4a5226[_0x3732df(0x8a0)]]), _0xe576bd++; const _0xd419d9 = document[_0x3732df(0xa8d)](_0x3c58bd, _0x3732df(0x869)); _0xd419d9[_0x3732df(0x8f9)] = _0xfa95b6 + ':\x20' + _0x333312[_0x3732df(0x395)](0x2) + '\x20(' + (_0x333312 / _0x1c815e * 0x64)[_0x3732df(0x395)](0x1) + '%)', _0xde3252['appendChild'](_0xd419d9), _0xacb3a7[_0x3732df(0x168)](_0xde3252), _0x3129b4 = _0x5159f7; } } return _0xacb3a7; } function _0x2f3305() { const _0x48d71b = _0x5f58e0; if (_0x129f87[_0x48d71b(0x8a0)] === 0x0) return; const _0x26f19a = _0x29f550['currentTime']; let _0x3fb155 = -0x1; for (let _0x19156c = 0x0; _0x19156c < _0x129f87[_0x48d71b(0x8a0)]; _0x19156c++) { if (_0x26f19a >= _0x129f87[_0x19156c][_0x48d71b(0x71a)]) _0x3fb155 = _0x19156c; else break; } if (_0x3fb155 !== -0x1) { const _0xca0904 = _0x1e72e0[_0x48d71b(0x6e4)]('p'); _0xca0904[_0x48d71b(0xa30)](_0x1a9ebf => _0x1a9ebf[_0x48d71b(0xb7b)][_0x48d71b(0x344)](_0x48d71b(0x33f))); const _0x535aad = document[_0x48d71b(0x653)](_0x48d71b(0x3bc) + _0x3fb155); _0x535aad && (_0x48d71b(0x944) !== 'mmNFo' ? (_0x535aad[_0x48d71b(0xb7b)]['add']('active'), _0x535aad[_0x48d71b(0x9bb)]({ 'behavior': _0x48d71b(0x301), 'block': _0x48d71b(0xaa3) })) : _0x2a6aa6 ? _0x497f1b(_0xdcc30f) : _0x279667(new _0x57ce20(_0x48d71b(0x8ab)))); } } _0x565a41['addEventListener'](_0x5f58e0(0x4f4), () => { const _0x551da3 = _0x5f58e0; _0xdbe3c2[_0x551da3(0xb7b)][_0x551da3(0x344)](_0x551da3(0x322)), setTimeout(() => _0xdbe3c2[_0x551da3(0x313)]['display'] = _0x551da3(0x643), 0x12c); }), document[_0x5f58e0(0x653)]('music-widget-card')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x4444d7 = _0x5f58e0; if (_0x4444d7(0xb2a) !== _0x4444d7(0x27e)) { if (_0x1884b1[_0x4444d7(0x66f)] && _0x1884b1[_0x4444d7(0x66f)][_0x4444d7(0x50c)]) { if (_0x4444d7(0x3a2) !== 'GSOyB') { const _0x5898a4 = _0x2c062b[_0x4444d7(0x86d)] || _0x2518bb?.[_0x4444d7(0x3d5)][0x0], _0x2cabca = _0x348c7b(_0x5898a4); _0x4d4bcc = _0x2cabca ? _0x2cabca[_0x4444d7(0x7d7)] : '角色'; } else _0xdbe3c2[_0x4444d7(0x313)][_0x4444d7(0x272)] = _0x4444d7(0xac5), setTimeout(() => _0xdbe3c2['classList'][_0x4444d7(0x428)](_0x4444d7(0x322)), 0xa); } } else _0x3c600b[_0x4444d7(0x6c1)](_0x464c1a, _0x44290d); }), _0x29f550[_0x5f58e0(0xacf)]('timeupdate', _0x2f3305); const _0x1f4f7f = document[_0x5f58e0(0x653)](_0x5f58e0(0x411)), _0x206077 = document[_0x5f58e0(0x653)]('widget-next-btn'), _0x277247 = document[_0x5f58e0(0x653)](_0x5f58e0(0x7b6)); _0x1f4f7f['addEventListener']('click', () => { const _0x4ddd0c = _0x5f58e0; if (_0x4ddd0c(0x649) !== 'pXdiS') { if (_0x29f550[_0x4ddd0c(0x74e)]) { if (_0x29f550[_0x4ddd0c(0x941)]) _0x4ddd0c(0x97d) !== _0x4ddd0c(0x97d) ? _0x5980bc[_0x4ddd0c(0x24d)](_0x1ea9c8) : _0x29f550[_0x4ddd0c(0x9d7)](); else { if (_0x4ddd0c(0x74a) !== _0x4ddd0c(0x815)) _0x29f550[_0x4ddd0c(0xb78)](); else { const _0x3b5586 = _0x5df527(_0x31d66e[0x1], 0xa), _0x52e1c0 = _0x25affa(_0x2b79af[0x2], 0xa), _0x99367b = _0x38b296(_0x440fbb[0x3], 0xa) * (_0x412f26[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x1677d7 = _0x3b5586 * 0x3c + _0x52e1c0 + _0x99367b / 0x3e8, _0x347209 = _0x45910a[_0x4ddd0c(0xac6)](_0x2ea524, '')[_0x4ddd0c(0x87b)](); _0x347209 && _0x2bc531[_0x4ddd0c(0x24d)]({ 'time': _0x1677d7, 'text': _0x347209 }); } } } } else _0x14a86d[_0x4ddd0c(0x5f0)]('动态中的音乐搜索失败:', _0x407425), _0x69329d[_0x4ddd0c(0x8c3)] = _0x4ddd0c(0x252); }), _0x206077[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x325e35 = _0x5f58e0; if (_0x498a45[_0x325e35(0x8a0)] === 0x0) return; _0x15ea73 = (_0x15ea73 + 0x1) % _0x498a45[_0x325e35(0x8a0)], _0x2097e4(_0x498a45[_0x15ea73], _0x498a45); }), _0x277247[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x375101 = _0x5f58e0; if (_0x375101(0x761) !== _0x375101(0x22c)) { if (_0x498a45[_0x375101(0x8a0)] === 0x0) return; _0x15ea73 = (_0x15ea73 - 0x1 + _0x498a45['length']) % _0x498a45[_0x375101(0x8a0)], _0x2097e4(_0x498a45[_0x15ea73], _0x498a45); } else { _0x338337 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0xabca0e in _0x2497cf) { _0x4bbf1d[_0xabca0e][_0x375101(0xb7b)][_0x375101(0x344)]('filled'), _0x8ed2c[_0xabca0e]['value'] = ''; } _0x443687[_0x375101(0x8e1)]['querySelector'](_0x375101(0x62a))[_0x375101(0x8f9)] = _0x375101(0x82b), _0x36c82b[_0x375101(0x544)][_0x375101(0x795)](_0x375101(0x62a))[_0x375101(0x8f9)] = '点击选择\x20.jpg\x20或\x20.png', _0x13f290[_0x375101(0x732)][_0x375101(0x795)](_0x375101(0x62a))[_0x375101(0x8f9)] = _0x375101(0x734), _0xf6ead2[_0x375101(0x89a)][_0x375101(0x795)]('.slot-filename')[_0x375101(0x8f9)] = '点击选择\x20.lrc', _0x189c30(); } }), _0x29f550[_0x5f58e0(0xacf)](_0x5f58e0(0x9d7), () => { const _0x2ea08d = _0x5f58e0; _0x2ea08d(0xb5f) === _0x2ea08d(0x612) ? _0x44df98 = _0x5cd1f0['name'] : _0x1f4f7f[_0x2ea08d(0x8f9)] = '❚❚'; }), _0x29f550[_0x5f58e0(0xacf)](_0x5f58e0(0xb78), () => { const _0x47018d = _0x5f58e0; _0x47018d(0x9f8) !== 'MCSau' ? _0x5337a4 && (_0x44e222 = _0x5a1685[_0x47018d(0x7f9)] || '') : _0x1f4f7f[_0x47018d(0x8f9)] = '▶'; }), _0x29f550['addEventListener'](_0x5f58e0(0xa52), () => { _0x206077['click'](); }), _0x29f550[_0x5f58e0(0xacf)](_0x5f58e0(0x9d7), () => { const _0xdae945 = _0x5f58e0; if ('pptoy' !== _0xdae945(0xa42)) { const _0x2fe1ef = _0x1c8b70['createElement']('p'); _0x2fe1ef[_0xdae945(0x313)][_0xdae945(0x2fb)] = '5px', _0x2fe1ef['textContent'] = _0x5c66a1, _0x5c4f19['appendChild'](_0x2fe1ef); } else { const _0x524422 = document['getElementById'](_0xdae945(0x3f4)); if (_0x524422) _0x524422[_0xdae945(0x8f9)] = '❚❚'; } }), _0x29f550[_0x5f58e0(0xacf)](_0x5f58e0(0xb78), () => { const _0x2cc036 = _0x5f58e0, _0x32fd23 = document[_0x2cc036(0x653)](_0x2cc036(0x3f4)); if (_0x32fd23) _0x32fd23['textContent'] = '▶'; }), _0x29f550[_0x5f58e0(0xacf)]('ended', () => { const _0x40baed = _0x5f58e0; if (_0x40baed(0x2c0) !== _0x40baed(0x2c0)) _0x3785c4 = _0x37f715[_0x40baed(0x440)](_0x47aa68); else { const _0x40060a = document[_0x40baed(0x653)](_0x40baed(0x171)); _0x40060a && _0x40060a['click'](); } }); function _0x443a4a(_0x659140) { const _0x39b002 = _0x5f58e0; if (_0x39b002(0x8a7) === 'mnFNH') { if (!_0x659140 || typeof _0x659140 !== _0x39b002(0x4b6)) return null; const _0x56719b = _0x659140[_0x39b002(0x9db)]('['), _0x4418fd = _0x659140[_0x39b002(0x63b)](']'); if (_0x56719b > -0x1 && _0x4418fd > _0x56719b) { if (_0x39b002(0x800) !== _0x39b002(0x68b)) return _0x659140[_0x39b002(0x650)](_0x56719b, _0x4418fd + 0x1); else _0x1ac5b7['pause'](), _0x2849cd[_0x39b002(0x795)]('.music-post-play-icon,\x20.music-share-play-icon')[_0x39b002(0x8f9)] = '▶'; } return null; } else _0x12321f = _0x5401d5[_0x39b002(0x6da)](_0x39b002(0x4c5)); } document['getElementById']('app-accounting')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x4ecc6c = _0x5f58e0; _0x171183(), _0x13d883(_0x4ecc6c(0x4ae), _0x4ecc6c(0x6fe)); }), document[_0x5f58e0(0x653)](_0x5f58e0(0xa02))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883(_0x5f58e0(0x6fe), _0x5f58e0(0x4ae))); const _0x30f5a8 = document[_0x5f58e0(0x653)]('tab-record-expense'), _0x40c844 = document['getElementById']('tab-view-ledger'); _0x30f5a8[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), _0x171183), _0x40c844[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x277f86 = _0x5f58e0; _0x277f86(0x4a9) !== 'QJkSd' ? _0x5eac40() : (_0x30f5a8[_0x277f86(0xb7b)][_0x277f86(0x344)](_0x277f86(0x33f)), _0x40c844[_0x277f86(0xb7b)][_0x277f86(0x428)]('active'), _0x17d234()); }); function _0x171183() { const _0x3ec10b = _0x5f58e0; _0x40c844['classList'][_0x3ec10b(0x344)](_0x3ec10b(0x33f)), _0x30f5a8[_0x3ec10b(0xb7b)][_0x3ec10b(0x428)](_0x3ec10b(0x33f)), _0x1b29f4(); } function _0x1b29f4() { const _0x3eca60 = _0x5f58e0; if (_0x3eca60(0x888) === _0x3eca60(0x888)) { const _0x13243f = document['getElementById']('accounting-content-area'); document[_0x3eca60(0x653)](_0x3eca60(0x188))[_0x3eca60(0x8f9)] = _0x3eca60(0x164), document[_0x3eca60(0x653)](_0x3eca60(0x4bc))['innerHTML'] = '', _0x13243f['innerHTML'] = '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', _0x4f5bed(), document[_0x3eca60(0x653)](_0x3eca60(0x827))[_0x3eca60(0xacf)](_0x3eca60(0x4f4), _0x248621), document[_0x3eca60(0x653)](_0x3eca60(0x952))[_0x3eca60(0xacf)](_0x3eca60(0x4f4), _0x377808 => { const _0x1e4f1f = _0x3eca60; if (_0x377808[_0x1e4f1f(0xa4b)][_0x1e4f1f(0xb7b)]['contains'](_0x1e4f1f(0xb2f))) { const _0x35c344 = _0x377808['target'][_0x1e4f1f(0x2c4)]['id']; _0x9e00ac(_0x1e4f1f(0x39a))[_0x1e4f1f(0x8e7)](_0x12bc8c => { const _0x451787 = _0x1e4f1f; if (_0x451787(0x90e) === _0x451787(0x90e)) { if (_0x12bc8c) { if (_0x451787(0x306) === _0x451787(0x306)) _0x3228bf(_0x35c344); else { const _0x1b9dc0 = _0x39474b[_0x451787(0x334)](/:\s(.+)/); if (_0x1b9dc0[_0x451787(0x8a0)] > 0x1) { const _0x2b5954 = _0x1b9dc0[0x0]['trim'](), _0x1a3143 = _0x1b9dc0[0x1][_0x451787(0x87b)]()['replace'](/^"|"$/g, ''); _0x3160de[_0x2b5954] = _0x1a3143; } } } } else { const _0x13e6a4 = _0x5dee35[_0x451787(0x6da)]('musicPlayerState'); if (_0x13e6a4) { const { playlist: _0x4a4417, currentIndex: _0x1eb4bd } = _0x5c014c[_0x451787(0x440)](_0x13e6a4); _0x1528d1['isArray'](_0x4a4417) && _0x4a4417[_0x451787(0x8a0)] > 0x0 && _0x1eb4bd > -0x1 && (_0x3d8fb2['musicPlaylist'] = _0x4a4417, _0x2618b3[_0x451787(0xa39)] = _0x1eb4bd, _0x3df81a[_0x451787(0x34d)] = ![], _0x2aeb0f()); } } }); } }), document[_0x3eca60(0x653)](_0x3eca60(0x86f))[_0x3eca60(0x96c)](); } else _0x4735dc[_0x3eca60(0x1f8)] = new _0xbcc511(), _0x3b9dec[_0x3eca60(0x42c)] = _0x5a4ec3(), _0x394f78(); } function _0x529560(_0x14b02e, _0x5107d8) { const _0x5af903 = _0x5f58e0, _0x33c9b4 = document[_0x5af903(0x653)](_0x5af903(0x40d)), _0x3c30b9 = document['getElementById'](_0x5af903(0x4bc)); document[_0x5af903(0x653)](_0x5af903(0x188))['textContent'] = _0x5107d8 + _0x5af903(0x3fb); const _0x363616 = _0x14b02e[_0x5af903(0x5ae)][_0x5af903(0x83b)]((_0x1f8ad4, _0x3f627a) => _0x1f8ad4 + (_0x3f627a[_0x5af903(0x8d0)] || 0x0), 0x0); let _0x3dd5fc = _0x5af903(0x161) + _0x363616[_0x5af903(0x395)](0x2) + '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>'; _0x33c9b4['innerHTML'] = _0x3dd5fc; const _0x2808b3 = document[_0x5af903(0x653)](_0x5af903(0x53f)), _0x96a9fd = { '餐饮美食': _0x5af903(0x281), '交通出行': _0x5af903(0xb0c), '购物消费': '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '生活服务': _0x5af903(0x4a3), '休闲娱乐': _0x5af903(0x947), '医疗健康': _0x5af903(0x9c8), '人情红包': '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '其他杂项': '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '默认': _0x5af903(0x510) }; _0x14b02e[_0x5af903(0x5ae)][_0x5af903(0xa30)](_0x339df2 => { const _0x4edefd = _0x5af903; if (_0x4edefd(0x5d6) === _0x4edefd(0x6d6)) _0x56c63a[_0x4edefd(0x5f0)](_0x4edefd(0xa58), _0x40650f); else { const _0x2c68c0 = document[_0x4edefd(0x2da)](_0x4edefd(0x1f9)); _0x2c68c0[_0x4edefd(0x84e)] = 'expense-item', _0x2c68c0[_0x4edefd(0x313)][_0x4edefd(0x2d1)] = 'column', _0x2c68c0[_0x4edefd(0x313)]['alignItems'] = 'stretch', _0x2c68c0['style'][_0x4edefd(0x4bd)] = _0x4edefd(0x4bb), _0x2c68c0['style'][_0x4edefd(0x4d6)] = '0'; const _0x2f845a = _0x96a9fd[_0x339df2[_0x4edefd(0x9be)]] || _0x96a9fd['默认'], _0x5c5b60 = _0x4edefd(0xaf8) + _0x2f845a + _0x4edefd(0x2dc), _0x2618bf = '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>' + _0x5c5b60 + '</span><div><div\x20class=\x22description\x22>' + _0x339df2[_0x4edefd(0x3ed)] + '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>' + (_0x339df2[_0x4edefd(0x9be)] || '未分类') + '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20' + (_0x339df2[_0x4edefd(0x8d0)] || 0x0)[_0x4edefd(0x395)](0x2) + _0x4edefd(0x9f7); let _0x3db1ed = ''; if (_0x339df2[_0x4edefd(0x17b)] && _0x339df2[_0x4edefd(0x17b)][_0x4edefd(0x91f)]) { if (_0x4edefd(0x764) === 'ANCdB') _0x3815ee(_0x48df76), _0x5dc8d5[_0x4edefd(0x870)]('canplaythrough', _0xd8b217), _0x40b838[_0x4edefd(0x870)](_0x4edefd(0x5f0), _0x316d36), _0x4c2d9d['src'] = '', _0x21088d['remove'](); else { const _0x5b671b = _0x21051e(_0x339df2['review'][_0x4edefd(0x91f)]); _0x5b671b && (_0x3db1ed = _0x4edefd(0x26e) + _0x5b671b[_0x4edefd(0x99a)] + _0x4edefd(0x22f) + _0x5b671b[_0x4edefd(0x7d7)] + _0x4edefd(0xa57) + _0x339df2['review'][_0x4edefd(0x252)] + '</div></div></div>'); } } _0x2c68c0[_0x4edefd(0x9c2)] = _0x2618bf + _0x3db1ed, _0x2808b3[_0x4edefd(0x168)](_0x2c68c0); } }), _0x3c30b9[_0x5af903(0x9c2)] = _0x5af903(0x1f3), document['getElementById'](_0x5af903(0x817))[_0x5af903(0xacf)](_0x5af903(0x4f4), async () => { const _0x5a7c8e = _0x5af903, _0x6ef3a0 = await _0x9e00ac('确定要重新记录吗？当前的账单会被删除。'); if (_0x6ef3a0) { const _0x309817 = _0x1884b1[_0x5a7c8e(0x47a)][_0x5107d8]; _0x309817 && _0x309817['originalExpenses'] && _0x1884b1[_0x5a7c8e(0x447)]['push'](..._0x309817[_0x5a7c8e(0x28e)]), delete _0x1884b1[_0x5a7c8e(0x47a)][_0x5107d8], _0x480928(), _0x1b29f4(); } }); } function _0x17d234() { const _0x379092 = _0x5f58e0, _0x112428 = document[_0x379092(0x653)]('accounting-content-area'); document['getElementById'](_0x379092(0x188))[_0x379092(0x8f9)] = '账本', document[_0x379092(0x653)](_0x379092(0x4bc))[_0x379092(0x9c2)] = ''; const _0x161c4d = Object[_0x379092(0x75d)](_0x1884b1[_0x379092(0x47a)])[_0x379092(0x9ec)]((_0x331011, _0x24ee5e) => new Date(_0x24ee5e) - new Date(_0x331011)); if (_0x161c4d[_0x379092(0x8a0)] === 0x0) { if (_0x379092(0xa31) === _0x379092(0xa31)) { _0x112428['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>'; return; } else _0x9fa3a4['style'][_0x379092(0x956)] = _0x379092(0x8f5) + _0x52ead2 + ')', _0x576e27[_0x379092(0x313)][_0x379092(0x5ab)] = _0x379092(0x544), _0x596089[_0x379092(0x313)][_0x379092(0x6e7)] = 'center', _0x240df3[_0x379092(0x313)][_0x379092(0x2b2)] = 'white', _0x52e2fc['querySelectorAll'](_0x379092(0x184))[_0x379092(0xa30)](_0x138839 => { const _0x3fa41c = _0x379092; _0x138839[_0x3fa41c(0x313)]['textShadow'] = _0x3fa41c(0x951); }); } _0x112428[_0x379092(0x9c2)] = '', _0x161c4d['forEach'](_0x2a0707 => { const _0x153941 = _0x379092; if (_0x153941(0x282) !== 'UVAVz') { const _0x316e0b = document['createElement'](_0x153941(0x1f9)); _0x316e0b[_0x153941(0x84e)] = _0x153941(0x657), _0x316e0b[_0x153941(0x313)]['cursor'] = 'pointer'; const _0xdce019 = _0x1884b1[_0x153941(0x47a)][_0x2a0707], _0x278c5a = _0xdce019[_0x153941(0x5ae)][_0x153941(0x83b)]((_0x4e8412, _0xa31521) => _0x4e8412 + (_0xa31521['amount'] || 0x0), 0x0); _0x316e0b[_0x153941(0x9c2)] = '<span\x20class=\x22description\x22>' + _0x2a0707 + _0x153941(0x80c) + _0x278c5a[_0x153941(0x395)](0x2) + _0x153941(0x680), _0x316e0b[_0x153941(0xacf)](_0x153941(0x4f4), () => { const _0x427302 = _0x153941; _0x427302(0xa25) !== 'OGQfe' ? _0x59ca18(_0x427302(0x46d)) : (_0x30f5a8[_0x427302(0xb7b)][_0x427302(0x344)](_0x427302(0x33f)), _0x40c844[_0x427302(0xb7b)][_0x427302(0x428)](_0x427302(0x33f)), _0x529560(_0xdce019, _0x2a0707)); }), _0x112428[_0x153941(0x168)](_0x316e0b); } else _0x528b0e(_0x5f5d61[_0x153941(0x180)])['then'](_0x59fd14 => { const _0x4544e0 = _0x153941, _0x37bbb = _0x231aab[_0x4544e0(0x653)](_0x4d58f6); if (_0x37bbb && _0x59fd14) _0x37bbb[_0x4544e0(0x74e)] = _0x46d11c['createObjectURL'](_0x59fd14); }); }); } function _0x248621() { const _0x44ecd1 = _0x5f58e0; if (_0x44ecd1(0x1fc) !== _0x44ecd1(0x7fd)) { const _0x445496 = document[_0x44ecd1(0x653)](_0x44ecd1(0x86f)), _0x2964b5 = document['getElementById']('expense-amount'), _0x290e4e = _0x445496[_0x44ecd1(0x3cd)][_0x44ecd1(0x87b)](), _0x3f9792 = parseFloat(_0x2964b5[_0x44ecd1(0x3cd)]); if (!_0x290e4e || isNaN(_0x3f9792) || _0x3f9792 <= 0x0) { _0x5929aa(_0x44ecd1(0x7f6)); return; } _0x1884b1[_0x44ecd1(0x447)]['push']({ 'id': _0x44ecd1(0x294) + Date[_0x44ecd1(0x965)](), 'description': _0x290e4e, 'amount': _0x3f9792, 'timestamp': Date[_0x44ecd1(0x965)]() }), _0x480928(), _0x4f5bed(), _0x445496['value'] = '', _0x2964b5['value'] = '', _0x445496[_0x44ecd1(0x96c)](); } else { const _0x2e43a1 = _0x157023[_0x44ecd1(0x546)](_0x44ecd1(0x594)), _0x12889d = _0x9335fb[_0x44ecd1(0x2c4)][_0x44ecd1(0x64b)], _0x1a85fe = _0x5e14d7(_0x2e43a1[_0x44ecd1(0x2c4)][_0x44ecd1(0x63f)], 0xa); _0x1d5184(_0x12889d, _0x1a85fe, _0x459350); } } function _0x3228bf(_0x426245) { const _0xb2284c = _0x5f58e0, _0x4ed3ef = _0x1884b1[_0xb2284c(0x447)]['findIndex'](_0x4d9c7e => _0x4d9c7e['id'] === _0x426245); _0x4ed3ef > -0x1 && (_0x1884b1[_0xb2284c(0x447)][_0xb2284c(0x8cf)](_0x4ed3ef, 0x1), _0x480928(), _0x4f5bed()); } function _0x4f5bed() { const _0x1a3d19 = _0x5f58e0; if (_0x1a3d19(0xaa8) === _0x1a3d19(0x7e5)) _0x12748a(_0x1a3d19(0x3eb) + _0x32a2ad[_0x1a3d19(0xa53)]); else { const _0x13e81f = document[_0x1a3d19(0x653)](_0x1a3d19(0x952)), _0x4c3793 = document[_0x1a3d19(0x653)](_0x1a3d19(0x3b2)), _0x21a35c = new Date(), _0x270c47 = _0x1884b1['accountingData'][_0x1a3d19(0x776)](_0x4b91cd => new Date(_0x4b91cd['timestamp'])[_0x1a3d19(0x65b)]() === _0x21a35c[_0x1a3d19(0x65b)]()); if (_0x270c47['length'] === 0x0) { _0x13e81f[_0x1a3d19(0x9c2)] = _0x1a3d19(0x1ee), _0x4c3793[_0x1a3d19(0x9c2)] = ''; return; } _0x13e81f[_0x1a3d19(0x9c2)] = '', _0x270c47['sort']((_0x391075, _0x13a2fa) => _0x13a2fa['timestamp'] - _0x391075[_0x1a3d19(0x1af)])[_0x1a3d19(0xa30)](_0x31eeea => { const _0x11b735 = _0x1a3d19, _0x2bd28f = document['createElement'](_0x11b735(0x1f9)); _0x2bd28f[_0x11b735(0x84e)] = _0x11b735(0x657), _0x2bd28f['innerHTML'] = _0x11b735(0x7be) + _0x31eeea[_0x11b735(0x3ed)] + _0x11b735(0x793) + _0x31eeea[_0x11b735(0x8d0)]['toFixed'](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0x31eeea['id'] + _0x11b735(0x949), _0x13e81f['appendChild'](_0x2bd28f); }), _0x4c3793 && (_0x1a3d19(0x894) === _0x1a3d19(0x894) ? (_0x4c3793[_0x1a3d19(0x9c2)] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', document[_0x1a3d19(0x653)]('organize-bill-button')[_0x1a3d19(0xacf)](_0x1a3d19(0x4f4), _0xa6997b)) : _0x4e462 += _0x52aebe[_0x1a3d19(0x440)](_0x23c835)['candidates'][0x0][_0x1a3d19(0x329)]['parts'][0x0][_0x1a3d19(0x252)]); } } async function _0xa6997b() { const _0x496bf1 = _0x5f58e0, _0x4e1101 = new Date(), _0x4f5a88 = _0x4e1101['getFullYear']() + '-' + String(_0x4e1101[_0x496bf1(0x978)]() + 0x1)[_0x496bf1(0xa83)](0x2, '0') + '-' + String(_0x4e1101[_0x496bf1(0x8ff)]())['padStart'](0x2, '0'); if (_0x1884b1[_0x496bf1(0x47a)][_0x4f5a88]) { _0x5929aa(_0x496bf1(0xb22)); return; } const _0x3ee905 = _0x1884b1[_0x496bf1(0x447)][_0x496bf1(0x776)](_0x3799bc => new Date(_0x3799bc[_0x496bf1(0x1af)])[_0x496bf1(0x65b)]() === _0x4e1101[_0x496bf1(0x65b)]()); if (_0x3ee905['length'] === 0x0) { _0x5929aa(_0x496bf1(0x54b)); return; } _0x1d9e54(!![], _0x496bf1(0x4cf)); try { const _0x2c1b48 = ['餐饮美食', _0x496bf1(0xab7), _0x496bf1(0x7e9), _0x496bf1(0x258), _0x496bf1(0x1e2), '医疗健康', _0x496bf1(0x196), _0x496bf1(0x8de)], _0x4b45b7 = _0x3ee905[_0x496bf1(0x7d4)](_0x29637b => '-\x20' + _0x29637b[_0x496bf1(0x3ed)] + ':\x20' + _0x29637b[_0x496bf1(0x8d0)])[_0x496bf1(0x359)]('\x0a'), _0x5d18ee = _0x1884b1[_0x496bf1(0x358)][_0x496bf1(0x7d4)](_0x641c3a => { const _0x5ce662 = _0x496bf1; if (_0x5ce662(0x438) !== _0x5ce662(0x30b)) { const _0x107af2 = _0x1884b1['chats'][_0x5ce662(0x6f9)](_0x49f67d => _0x49f67d[_0x5ce662(0x8c3)] === _0x5ce662(0xaa7) && _0x49f67d['participantIds'][_0x5ce662(0x1ac)](_0x641c3a['id'])), _0xe574ad = _0x1884b1['userProfiles'][_0x5ce662(0x6f9)](_0x4ee855 => _0x4ee855['id'] === (_0x107af2?.[_0x5ce662(0x70c)] || _0x1884b1[_0x5ce662(0x1d3)])) || { 'id': _0x5ce662(0x591), 'name': '你' }; let _0x1f395e = ''; return _0x641c3a[_0x5ce662(0x99b)] && _0x641c3a[_0x5ce662(0x99b)][_0x5ce662(0x8a0)] > 0x0 && (_0x1f395e = _0x641c3a[_0x5ce662(0x99b)]['map'](_0x228cf3 => _0x1884b1['worldBooks'][_0x5ce662(0x6f9)](_0x17b7ed => _0x17b7ed['id'] === _0x228cf3))[_0x5ce662(0x776)](Boolean)[_0x5ce662(0x7d4)](_0x2af8a9 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x2af8a9[_0x5ce662(0x7d7)] + _0x5ce662(0x1c1) + _0x2af8a9['content'])[_0x5ce662(0x359)]('')), _0x5ce662(0x7ee) + _0x641c3a['id'] + _0x5ce662(0x3a0) + _0x641c3a[_0x5ce662(0x7d7)] + _0x5ce662(0x1a1) + _0x641c3a[_0x5ce662(0x370)] + _0x5ce662(0x174) + _0xe574ad[_0x5ce662(0x7d7)] + _0x5ce662(0x2ac) + _0xe574ad['id'] + ')\x0a' + _0x1f395e; } else _0x2182c9 = _0x5a18ac['name']; })[_0x496bf1(0x359)]('\x0a'), _0x4ba75b = _0x1884b1[_0x496bf1(0x38c)][_0x496bf1(0x7d4)](_0x4df491 => _0x496bf1(0x7b1) + _0x4df491['id'] + _0x496bf1(0x3a0) + _0x4df491['name'] + '\x0a\x20\x20\x20\x20人设:\x20' + (_0x4df491['persona'] || '无'))['join']('\x0a'), _0x1df278 = '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', _0x2d79f0 = _0x496bf1(0x367) + _0x2c1b48['join'](',\x20') + ']\x0a\x0a#\x20角色资料库\x0a' + _0x5d18ee + _0x496bf1(0xa5c) + _0x4ba75b + _0x496bf1(0x1d1) + _0x4b45b7, _0x18cff6 = [{ 'role': 'system', 'content': _0x1df278 }, { 'role': _0x496bf1(0x901), 'content': _0x2d79f0 }], _0x240a60 = await _0x286894(_0x18cff6, { 'json': !![] }), _0x13692a = _0x443a4a(_0x240a60); if (!_0x13692a) { if (_0x496bf1(0x841) === _0x496bf1(0x841)) throw new Error(_0x496bf1(0x2a1) + _0x240a60); else _0x4f4fad += _0x496bf1(0xa78); } const _0x23ba97 = JSON[_0x496bf1(0x440)](_0x13692a); _0x1884b1[_0x496bf1(0x47a)][_0x4f5a88] = { 'categorizedExpenses': _0x23ba97, 'timestamp': Date[_0x496bf1(0x965)](), 'originalExpenses': _0x3ee905 }, _0x1884b1[_0x496bf1(0x447)] = _0x1884b1['accountingData'][_0x496bf1(0x776)](_0x16e54d => new Date(_0x16e54d[_0x496bf1(0x1af)])[_0x496bf1(0x65b)]() !== _0x4e1101[_0x496bf1(0x65b)]()), _0x480928(), _0x529560(_0x1884b1[_0x496bf1(0x47a)][_0x4f5a88], _0x4f5a88); } catch (_0x28f7f0) { _0x496bf1(0x7fe) !== _0x496bf1(0x7aa) ? _0x5929aa(_0x496bf1(0x9cf) + _0x28f7f0[_0x496bf1(0xa53)]) : (_0x292ff8['style']['display'] = _0x496bf1(0x643), _0x295db1['onclick'] = _0x4c868d[_0x496bf1(0x5c8)] = _0x257b49[_0x496bf1(0x5c8)] = null, _0x408846[_0x496bf1(0x870)](_0x496bf1(0xa09), _0x55cca8), _0x6bb20f(_0x44a039)); } finally { if (_0x496bf1(0xa95) !== _0x496bf1(0xa95)) return new _0x2bb34f(_0x2a4be3 => { const _0x567760 = _0x496bf1, _0x2456a9 = _0x3eff2b[_0x567760(0x653)]('modal-root'), _0x25b9c3 = _0x3faf35[_0x567760(0x653)](_0x567760(0xa76)), _0x2e38a7 = _0x40e700[_0x567760(0x653)](_0x567760(0x683)), _0x515066 = _0xb9a4b4[_0x567760(0x653)](_0x567760(0x8b8)), _0x5c1d42 = _0xf4e850['getElementById'](_0x567760(0xa12)); _0x25b9c3[_0x567760(0x8f9)] = _0x4f60eb, _0x2456a9['style'][_0x567760(0x272)] = _0x567760(0xac5); const _0x1ead5d = _0x3d410b => { const _0x47c60e = _0x567760; _0x2456a9[_0x47c60e(0x313)][_0x47c60e(0x272)] = _0x47c60e(0x643), _0x2e38a7[_0x47c60e(0x5c8)] = _0x515066[_0x47c60e(0x5c8)] = _0x5c1d42[_0x47c60e(0x5c8)] = null, _0xc8e7fb[_0x47c60e(0x870)]('keydown', _0x8dff0f), _0x2a4be3(_0x3d410b); }, _0x8dff0f = _0x9b3f55 => { const _0x440290 = _0x567760; if (_0x9b3f55[_0x440290(0x8c2)] === 'Escape') _0x1ead5d(![]); if (_0x9b3f55[_0x440290(0x8c2)] === _0x440290(0x4de)) _0x1ead5d(!![]); }; _0x2e38a7[_0x567760(0x5c8)] = () => _0x1ead5d(!![]), _0x515066[_0x567760(0x5c8)] = () => _0x1ead5d(![]), _0x5c1d42['onclick'] = () => _0x1ead5d(![]), _0x333560[_0x567760(0xacf)](_0x567760(0xa09), _0x8dff0f); }); else _0x1d9e54(![]); } } async function _0x293cf9() { const _0xbdb56f = _0x5f58e0, _0x172d14 = [..._0x2d17f0]; try { const _0xdc8ab5 = localStorage['getItem'](_0xbdb56f(0x43c)); if (_0xdc8ab5) { if (_0xbdb56f(0x63c) !== _0xbdb56f(0xa7c)) { const _0xf5a915 = JSON[_0xbdb56f(0x440)](_0xdc8ab5); Array['isArray'](_0xf5a915) ? _0x356d37 = [..._0x172d14, ..._0xf5a915] : _0x356d37 = _0x172d14; } else _0x33c501(); } else { if ('egzEE' === _0xbdb56f(0x3d2)) { const _0x180370 = _0x4f5a4c['createElement'](_0xbdb56f(0x1f9)); _0x180370[_0xbdb56f(0x84e)] = 'todo-item-small', _0x180370[_0xbdb56f(0x8f9)] = _0x4e079a[_0xbdb56f(0x329)], _0x107aa4['appendChild'](_0x180370); } else _0x356d37 = _0x172d14; } } catch (_0x500b85) { console[_0xbdb56f(0x5f0)]('加载自定义表情包失败，真是没用。', _0x500b85), _0x356d37 = _0x172d14; } if (!localStorage[_0xbdb56f(0x6da)](_0xbdb56f(0xa33))) { _0x9e00ac(_0xbdb56f(0x19b))[_0xbdb56f(0x8e7)](async _0x6f038a => { const _0x37820a = _0xbdb56f; _0x6f038a ? (_0x1d9e54(!![], _0x37820a(0x3e6)), await _0x39335f(), localStorage[_0x37820a(0x7db)](_0x37820a(0xa33), 'true'), _0x1d9e54(![]), _0x5929aa(_0x37820a(0x4d8)), setTimeout(() => location[_0x37820a(0x2a5)](), 0x5dc)) : _0x37820a(0x79e) === 'ZPjDM' ? _0x4e5334[_0x37820a(0x8f9)] = _0x37820a(0x4aa) : _0x5929aa(_0x37820a(0x57e)); }); return; } if (!localStorage[_0xbdb56f(0x6da)](_0xbdb56f(0x98a))) { if (_0xbdb56f(0x7a5) === 'jxezL') { console['log'](_0xbdb56f(0xb42)), _0x1d9e54(!![], _0xbdb56f(0x2ce)); const _0x232e40 = await _0x5ec695(); localStorage['setItem']('noir_migration_fc_v1_complete', _0xbdb56f(0xb73)), _0x1d9e54(![]); if (_0x232e40 > 0x0) { _0x5929aa('好友圈数据升级完成，迁移了\x20' + _0x232e40 + _0xbdb56f(0x598)), setTimeout(() => location[_0xbdb56f(0x2a5)](), 0x5dc); return; } } else _0x12d023[_0xbdb56f(0xb5e)] = _0x531a45, _0x570ee7[_0xbdb56f(0xa39)] = _0x458478, _0x1664aa[_0xbdb56f(0x34d)] = ![], _0x1e92f8(); } if (!localStorage['getItem'](_0xbdb56f(0x98a))) { } if (!localStorage[_0xbdb56f(0x6da)](_0xbdb56f(0x460))) { console['log'](_0xbdb56f(0x3de)), _0x1d9e54(!![], _0xbdb56f(0x69f)); const _0x309858 = await _0x45c626(); localStorage[_0xbdb56f(0x7db)]('noir_migration_music_v1_complete', _0xbdb56f(0xb73)), _0x1d9e54(![]); if (_0x309858 > 0x0) { _0x5929aa(_0xbdb56f(0x514) + _0x309858 + '\x20张旧封面。应用即将刷新。'), setTimeout(() => location[_0xbdb56f(0x2a5)](), 0x5dc); return; } } const _0x5917fe = document[_0xbdb56f(0x653)]('app-snoop'); _0x5917fe[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => { const _0x3887b0 = _0xbdb56f; _0x38e3c3(), _0x13d883(_0x3887b0(0x9aa), _0x3887b0(0x6fe)); }); const _0xd7db9b = _0x333530(); try { const _0x46654d = localStorage[_0xbdb56f(0x6da)](_0xbdb56f(0x4c5)); if (_0x46654d) { const _0x2d2e8a = JSON[_0xbdb56f(0x440)](_0x46654d); if (_0x2d2e8a['accountingLedger']) { if (_0xbdb56f(0x57f) !== _0xbdb56f(0x57f)) { const _0x4f41d1 = _0x5d4c03[_0xbdb56f(0x334)](/:\s|：\s/); if (_0x4f41d1[_0xbdb56f(0x8a0)] === 0x2) { const _0x3c37f7 = _0x4f41d1[0x0]['trim'](), _0x2fee69 = _0x4f41d1[0x1]['trim'](), _0x536aa7 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x536aa7[_0x3c37f7] && (_0xa5dde0[_0x536aa7[_0x3c37f7]] = _0x2fee69); } } else _0x1884b1[_0xbdb56f(0x47a)] = _0x2d2e8a[_0xbdb56f(0x47a)], console[_0xbdb56f(0xace)](_0xbdb56f(0x332)); } } } catch (_0x40bc89) { _0xbdb56f(0x254) === _0xbdb56f(0x254) ? console['error'](_0xbdb56f(0x40b), _0x40bc89) : _0x3d5d17 = _0x1f2b7c; } _0x10e983(), _0x334eae(), _0x21fa93(), _0x166a54(), _0x26d6a8(), _0x5cf5f1(), _0x2e471d(), _0xd46509(), _0x699a59(), _0x5a0f4b(), _0x5713b7(), _0x541511(), _0x4002bb(), setInterval(_0x4002bb, 0x7530), _0x145bb9(), _0x3ebe62(), _0x54a5bd(); const _0xfc529b = document[_0xbdb56f(0x653)](_0xbdb56f(0x1ff)); document[_0xbdb56f(0x653)](_0xbdb56f(0x3b6))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), function (_0x33ead4) { const _0x341277 = _0xbdb56f; if (_0x341277(0x3a1) === _0x341277(0x67a)) _0x15ac89[_0x341277(0x5f0)](_0x341277(0xb2b), _0x54435c), _0x233a45(_0x341277(0x1dc)); else { if (_0x33ead4['target'][_0x341277(0x546)](_0x341277(0xae6))) { if ('wfHSn' !== _0x341277(0x3ea)) return; else { _0x4dfe51[_0x341277(0xb7b)][_0x341277(0x428)](_0x341277(0x6b2)); const _0xb52c7e = _0xba6375[_0x341277(0x2da)]('img'); _0xb52c7e['src'] = _0x262d71, _0xb52c7e[_0x341277(0xb7b)][_0x341277(0x428)](_0x341277(0x80a)), _0x49d9e7['appendChild'](_0xb52c7e); } } const _0x22cb5f = document[_0x341277(0x653)]('widget-play-pause-btn'); if (_0x22cb5f) { if (_0x341277(0x488) !== 'sLyGE') { const _0x27a9f7 = _0x459250(_0x30eddb['participantIds'][0x0]); _0x488f07[_0x341277(0x8f9)] = _0x27a9f7 ? _0x27a9f7[_0x341277(0x7d7)] : _0x341277(0x3f2); } else _0x22cb5f[_0x341277(0x4f4)](); } } }), _0x13d883(_0xbdb56f(0x6fe), _0xbdb56f(0xad4)); (_0xd7db9b || _0x1884b1[_0xbdb56f(0x358)][_0xbdb56f(0x8a0)] === 0x0) && (_0xbdb56f(0x6f3) === _0xbdb56f(0x6f3) ? (_0x5929aa(_0xbdb56f(0x2d0)), setTimeout(() => { const _0x1b9ba1 = _0xbdb56f; _0x13d883(_0x1b9ba1(0x842), 'home'), setTimeout(() => _0x5b7355(), 0x64); }, 0x6a4)) : (_0xf571a3['error']('解析AI剧本JSON失败:', _0x2fbed4, _0xbdb56f(0x500), _0x2c264d), _0x35caf1[_0xbdb56f(0x589)][_0xbdb56f(0x24d)]({ 'role': 'assistant', 'senderId': _0x5f26ff['id'], 'timestamp': _0x277d60['now'](), 'isOffline': !![], 'content': _0xbdb56f(0x968) + _0x37e6cf + ']' }))); document[_0xbdb56f(0x653)](_0xbdb56f(0x1a3))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), _0x52598f); const _0x1499a7 = document['getElementById'](_0xbdb56f(0x92c)); document[_0xbdb56f(0x653)]('upload-widget-bg-button')[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => _0x1499a7[_0xbdb56f(0x4f4)]()), document['getElementById'](_0xbdb56f(0x61b))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => { const _0x297185 = _0xbdb56f; _0x297185(0x16f) !== _0x297185(0x9bd) ? (_0x1884b1[_0x297185(0xa17)][_0x297185(0x4b8)] = null, _0x480928(), _0x145bb9(), _0x5929aa('小组件背景已恢复默认。')) : _0x1e2e1e[_0x297185(0x313)]['backgroundImage'] = ''; }), _0x1499a7[_0xbdb56f(0xacf)](_0xbdb56f(0xb6d), async _0x207dff => { const _0x41e05c = _0xbdb56f, _0x2c734b = _0x207dff[_0x41e05c(0xa4b)][_0x41e05c(0x53d)][0x0]; if (!_0x2c734b) return; try { const _0x57cda3 = await _0x10d9fa(_0x2c734b); _0x1884b1['preferences'][_0x41e05c(0x4b8)] = _0x57cda3, _0x480928(), _0x145bb9(), _0x5929aa(_0x41e05c(0x59c)); } catch (_0x2f9678) { 'qZQcJ' === _0x41e05c(0x25a) ? _0x104ad7[_0x41e05c(0x5f0)](_0x41e05c(0x2fc), _0x36d978) : _0x5929aa('错误:\x20' + _0x2f9678[_0x41e05c(0xa53)]); } }), _0x5d1b13(), document['getElementById']('upload-badge-button')['addEventListener'](_0xbdb56f(0x4f4), () => document[_0xbdb56f(0x653)](_0xbdb56f(0x17d))[_0xbdb56f(0x4f4)]()), document['getElementById'](_0xbdb56f(0x42e))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), async () => { const _0x1f1353 = _0xbdb56f; await _0x48fa9d(_0x1f1353(0x64f)), localStorage[_0x1f1353(0x673)](_0x1f1353(0x743)), _0x5d1b13(), _0x5929aa(_0x1f1353(0x4f0)); }), document['getElementById'](_0xbdb56f(0x17d))['addEventListener'](_0xbdb56f(0xb6d), async _0x1087bb => { const _0x20432d = _0xbdb56f; if (_0x20432d(0x248) === _0x20432d(0x248)) { const _0x1764a0 = _0x1087bb['target'][_0x20432d(0x53d)][0x0]; if (!_0x1764a0) return; try { if (_0x20432d(0x39e) !== _0x20432d(0x39e)) { const _0xe342ca = _0x41f08d[_0x20432d(0x2da)](_0x20432d(0x503)); _0xe342ca[_0x20432d(0x3cd)] = _0x568744['id'], _0xe342ca[_0x20432d(0x8f9)] = _0x1ef9d1[_0x20432d(0x7d7)], _0x384fd2['appendChild'](_0xe342ca); } else await _0x100c88('widget_badge', _0x1764a0), await _0x5d1b13(), _0x5929aa(_0x20432d(0x6f8)); } catch (_0x27a68f) { 'bZclF' === _0x20432d(0x7a0) ? _0x5a235e[_0x20432d(0x3cd)] = '' : _0x5929aa('错误:\x20' + _0x27a68f[_0x20432d(0xa53)]); } } else _0x531e9b[_0x20432d(0x70c)] = _0x40b641[_0x20432d(0x1d3)]; }), _0x1c016c(), document['getElementById']('diary-entries-container')[_0xbdb56f(0xacf)]('mousedown', _0x57cda0), document[_0xbdb56f(0x653)]('diary-entries-container')[_0xbdb56f(0xacf)](_0xbdb56f(0x65a), _0x57cda0, { 'passive': ![] }), document[_0xbdb56f(0x653)](_0xbdb56f(0x237))['addEventListener']('click', () => document[_0xbdb56f(0x653)](_0xbdb56f(0x4c1))[_0xbdb56f(0x4f4)]()), document[_0xbdb56f(0x653)](_0xbdb56f(0x3a8))['addEventListener'](_0xbdb56f(0x4f4), async () => { const _0x93c4ba = _0xbdb56f; await _0x48fa9d(_0x93c4ba(0x823)), localStorage[_0x93c4ba(0x673)](_0x93c4ba(0x920)), _0x1c016c(), _0x5929aa(_0x93c4ba(0x9a5)); }), document[_0xbdb56f(0x653)](_0xbdb56f(0x4c1))[_0xbdb56f(0xacf)]('change', async _0x491965 => { const _0x52afeb = _0xbdb56f, _0x444641 = _0x491965[_0x52afeb(0xa4b)][_0x52afeb(0x53d)][0x0]; if (!_0x444641) return; try { await _0x100c88('widget_card', _0x444641), await _0x1c016c(), _0x5929aa(_0x52afeb(0x5b3)); } catch (_0x14d20d) { _0x5929aa('错误:\x20' + _0x14d20d[_0x52afeb(0xa53)]); } }), document[_0xbdb56f(0x653)](_0xbdb56f(0x7ea))[_0xbdb56f(0xacf)]('click', async () => { const _0x3fa804 = _0xbdb56f, _0x46373d = await _0x9e00ac(_0x3fa804(0xa63)); if (_0x46373d) { if ('ungyt' !== _0x3fa804(0x92b)) localStorage[_0x3fa804(0x673)](_0x3fa804(0x743)), localStorage[_0x3fa804(0x673)](_0x3fa804(0x467)), _0x5929aa(_0x3fa804(0x5e1)), setTimeout(() => location['reload'](), 0x3e8); else { _0x1e9875 = _0x24048b[_0x3fa804(0x940)][_0x3fa804(0x6f9)](_0x433f1c => _0x433f1c[_0x3fa804(0x8c3)] === _0x3fa804(0xaa7) && _0x433f1c['participantIds']['includes'](_0x4060be)); const _0x51db26 = _0x2559b7(_0x3e3804); _0x3dcef1 = _0x51db26 ? _0x51db26['name'] : _0x3fa804(0x796); } } }); const _0x52b21f = document[_0xbdb56f(0x653)](_0xbdb56f(0x230)); _0x52b21f['addEventListener']('click', () => { const _0x3551d0 = _0xbdb56f; _0x1a0dfa(), _0x13d883(_0x3551d0(0x2c9), 'home'); }); const _0x4df8b6 = document[_0xbdb56f(0x653)](_0xbdb56f(0x227)); _0x4df8b6[_0xbdb56f(0xacf)]('click', () => { const _0x3f5914 = _0xbdb56f; _0x2032ab(), _0x13d883('musicLibrary', _0x3f5914(0x6fe)); }), document[_0xbdb56f(0x653)](_0xbdb56f(0xb5d))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => _0x13d883(_0xbdb56f(0x6fe), _0xbdb56f(0x91e))), document['getElementById'](_0xbdb56f(0x596))['addEventListener'](_0xbdb56f(0x4f4), () => _0x13d883(_0xbdb56f(0x6fe), 'diaryList')), document[_0xbdb56f(0x653)](_0xbdb56f(0x729))['addEventListener'](_0xbdb56f(0x4f4), () => { const _0x5ac21d = _0xbdb56f; _0x1884b1[_0x5ac21d(0x553)] = null, _0x13d883(_0x5ac21d(0x2c9), _0x5ac21d(0x730)); }), document[_0xbdb56f(0x653)](_0xbdb56f(0x9a3))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), _0x2ab93c), document[_0xbdb56f(0x653)](_0xbdb56f(0x855))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), _0x8b5db7), document[_0xbdb56f(0x653)](_0xbdb56f(0x5f7))['addEventListener']('keydown', _0x16b0b5 => { const _0x517fd0 = _0xbdb56f; _0x16b0b5[_0x517fd0(0x8c2)] === _0x517fd0(0x4de) && !_0x16b0b5[_0x517fd0(0x93c)] && (_0x16b0b5[_0x517fd0(0x4d1)](), _0x2ab93c()); }); const _0x1ebb35 = [_0xbdb56f(0xb1a), 'happy', 'angry', 'sad', _0xbdb56f(0xae9)]; _0x1ebb35[_0xbdb56f(0xa30)](_0x1d35aa => { const _0x4c2dc3 = _0xbdb56f, _0x5c6aab = document[_0x4c2dc3(0x653)](_0x4c2dc3(0xadc) + _0x1d35aa + _0x4c2dc3(0xa82)), _0x29958d = document[_0x4c2dc3(0x653)](_0x4c2dc3(0xadc) + _0x1d35aa + _0x4c2dc3(0x2a7)); if (_0x5c6aab && _0x29958d) { if (_0x4c2dc3(0x470) === 'ONBMI') { const _0x48cf80 = _0x3938a9['createElement'](_0x4c2dc3(0x7fb)); _0x48cf80['src'] = _0x1ca0d3[_0x4c2dc3(0x51a)], _0x48cf80[_0x4c2dc3(0x5e7)] = _0x4c2dc3(0x8fa), _0x48cf80[_0x4c2dc3(0x869)] = _0x41991c[_0x4c2dc3(0x7d7)], _0x48cf80[_0x4c2dc3(0xb7b)][_0x4c2dc3(0x428)]('sticker-item'), _0x48cf80[_0x4c2dc3(0xacf)](_0x4c2dc3(0x4f4), () => _0x5c80ed(_0x5b2d27)), _0x2c9646[_0x4c2dc3(0x168)](_0x48cf80); } else _0x5c6aab[_0x4c2dc3(0xacf)](_0x4c2dc3(0x4f4), () => _0x29958d[_0x4c2dc3(0x4f4)]()), _0x29958d[_0x4c2dc3(0xacf)](_0x4c2dc3(0xb6d), _0x5623f8 => { const _0x4545a3 = _0x4c2dc3, _0x4e7fd5 = _0x5623f8[_0x4545a3(0xa4b)][_0x4545a3(0x53d)][0x0]; if (!_0x4e7fd5) return; try { const _0x2394f3 = URL[_0x4545a3(0x264)](_0x4e7fd5); _0x5c6aab[_0x4545a3(0x313)][_0x4545a3(0x956)] = _0x4545a3(0xa38) + _0x2394f3 + '\x27)'; } catch (_0x3baafc) { _0x4545a3(0x26c) !== _0x4545a3(0x26c) ? _0x429555 = _0xcd6e1c['filter'](_0x2b0d5e => _0x2b0d5e && typeof _0x2b0d5e === _0x4545a3(0xada) && typeof _0x2b0d5e[_0x4545a3(0xaae)] === _0x4545a3(0x4b6) && typeof _0x2b0d5e[_0x4545a3(0x329)] !== _0x4545a3(0x1c5)) : _0x5929aa(_0x4545a3(0x77d) + _0x3baafc[_0x4545a3(0xa53)]); } }); } }), document['getElementById'](_0xbdb56f(0x29d))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), _0x5c5d6d), document[_0xbdb56f(0x653)](_0xbdb56f(0x9e3))[_0xbdb56f(0xacf)]('click', () => { const _0x34fb21 = _0xbdb56f; _0x1884b1[_0x34fb21(0x30f)] = _0x1884b1[_0x34fb21(0x30f)] === _0x34fb21(0x169) ? _0x34fb21(0x53b) : _0x34fb21(0x169), _0x2d8fe4(); }), document[_0xbdb56f(0x653)](_0xbdb56f(0x780))[_0xbdb56f(0xacf)](_0xbdb56f(0x8b3), _0x5f4143), document[_0xbdb56f(0x653)](_0xbdb56f(0x780))[_0xbdb56f(0xacf)](_0xbdb56f(0x65a), _0x5f4143, { 'passive': ![] }); let _0x2b5dce = null; function _0x5f4143(_0x970615) { const _0x10d6ef = _0xbdb56f; if (_0x10d6ef(0x716) !== 'moxvM') _0x51f3d0[_0x10d6ef(0x8c3)] = _0x10d6ef(0x252); else { if (_0x2b5dce) clearTimeout(_0x2b5dce); const _0xd8d2a0 = _0x970615[_0x10d6ef(0xa4b)][_0x10d6ef(0x546)](_0x10d6ef(0x43b)); if (!_0xd8d2a0) return; const _0x425b45 = parseInt(_0xd8d2a0['dataset'][_0x10d6ef(0x63f)], 0xa); if (isNaN(_0x425b45)) return; const _0x1689ce = () => { const _0x22d53a = _0x10d6ef; if (_0x22d53a(0x16e) !== _0x22d53a(0x16e)) { let _0x5b8234 = _0x1c1f53['worldBooks'][_0x22d53a(0x6f9)](_0x387b31 => _0x387b31[_0x22d53a(0x7d7)] === _0x14ddb3[_0x22d53a(0x7d7)]); if (_0x5b8234) _0x3d85c7[_0x22d53a(0x24d)](_0x5b8234['id']); else { const _0x4c1dd9 = { 'id': 'wb_' + _0x5a3807['now']() + '_' + _0x3543ba[_0x22d53a(0x664)](), 'name': _0xbf35fe[_0x22d53a(0x7d7)], 'content': _0x3cd86c[_0x22d53a(0x329)] }; _0x24ba3b[_0x22d53a(0x562)][_0x22d53a(0x24d)](_0x4c1dd9), _0x40922f['push'](_0x4c1dd9['id']); } } else _0x2b5dce = setTimeout(() => { const _0x47e1e8 = _0x22d53a; if (_0x47e1e8(0x7d1) !== 'gtFkH') { _0x4fb51a(_0x47e1e8(0xb05), _0x47e1e8(0x1d2)); if (_0x375fa6) { const _0x1f3432 = _0x1454c4['worldBooks'][_0x47e1e8(0x6f9)](_0x1f9bec => _0x1f9bec['id'] === _0x4502a0); if (!_0x1f3432) return; _0xf3dc30[_0x47e1e8(0x653)](_0x47e1e8(0xb3d))['value'] = _0x1f3432['id'], _0x2acde1[_0x47e1e8(0x653)]('world-book-editor-title')['textContent'] = _0x47e1e8(0x6ea), _0x820d1e['getElementById'](_0x47e1e8(0x15a))['value'] = _0x1f3432[_0x47e1e8(0x7d7)], _0x812a50[_0x47e1e8(0x653)](_0x47e1e8(0xabe))[_0x47e1e8(0x3cd)] = _0x1f3432[_0x47e1e8(0x329)]; } else _0x132eae[_0x47e1e8(0x653)]('editing-world-book-id')[_0x47e1e8(0x3cd)] = '', _0x5ea6af[_0x47e1e8(0x653)](_0x47e1e8(0x472))['textContent'] = _0x47e1e8(0x186), _0x26ac7e[_0x47e1e8(0x653)](_0x47e1e8(0x15a))['value'] = '', _0x2d7e5a['getElementById'](_0x47e1e8(0xabe))[_0x47e1e8(0x3cd)] = ''; } else { if (_0x970615[_0x47e1e8(0x8c3)] === 'touchstart') _0x970615[_0x47e1e8(0x4d1)](); _0x5e1692(_0x425b45); } }, 0x320); }, _0x32e17c = () => { if (_0x2b5dce) clearTimeout(_0x2b5dce); }; document[_0x10d6ef(0xacf)](_0x10d6ef(0x5a7), _0x32e17c, { 'once': !![] }), document['addEventListener'](_0x10d6ef(0x478), _0x32e17c, { 'once': !![] }), document[_0x10d6ef(0xacf)](_0x10d6ef(0x898), _0x32e17c, { 'once': !![] }), document[_0x10d6ef(0xacf)]('touchcancel', _0x32e17c, { 'once': !![] }), _0x1689ce(); } } document[_0xbdb56f(0xafb)][_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), _0x45c788 => { const _0x2608f9 = _0xbdb56f, _0x15e1d8 = _0x45c788[_0x2608f9(0xa4b)][_0x2608f9(0x546)](_0x2608f9(0x8af)); if (_0x15e1d8) { const _0x3b9ccf = _0x45c788[_0x2608f9(0xa4b)]['closest']('.lt-end-session-btn'), _0x30765b = _0x45c788[_0x2608f9(0xa4b)]['closest'](_0x2608f9(0x831)); if (_0x3b9ccf) _0x392e4a(); else { if (_0x30765b) { if ('upqqE' === _0x2608f9(0x6a3)) { const _0x3a84d8 = _0x30765b[_0x2608f9(0x546)](_0x2608f9(0x594)), _0x2d3b8c = _0x30765b[_0x2608f9(0x2c4)][_0x2608f9(0x64b)], _0x2b61f5 = parseInt(_0x3a84d8[_0x2608f9(0x2c4)][_0x2608f9(0x63f)], 0xa); _0x1092fe(_0x2d3b8c, _0x2b61f5, _0x15e1d8); } else { const _0x4fba2b = _0x481e40[_0x2608f9(0x653)]('theme-lightness-slider'); if (!_0x4fba2b) return; const _0x2498a1 = _0x12953f[_0x2608f9(0x6da)](_0x2608f9(0x652)) || '80'; _0xcd4cd3[_0x2608f9(0x82a)]['style'][_0x2608f9(0x3d0)](_0x2608f9(0x253), _0x2498a1 + '%'), _0x4fba2b[_0x2608f9(0x3cd)] = _0x2498a1, _0x4fba2b[_0x2608f9(0xacf)](_0x2608f9(0x49e), () => { const _0x537a5d = _0x2608f9, _0x14d6f9 = _0x4fba2b[_0x537a5d(0x3cd)]; _0x1e53d1['documentElement']['style'][_0x537a5d(0x3d0)](_0x537a5d(0x253), _0x14d6f9 + '%'), _0x4af114['setItem'](_0x537a5d(0x652), _0x14d6f9), _0x17f97f(); }); } } else { const _0x25e208 = _0x2bf707(); _0x25e208 && _0x25e208[_0x2608f9(0x8bb)] && _0x25e208[_0x2608f9(0x8bb)][_0x2608f9(0x50c)] && (_0xdbe3c2[_0x2608f9(0x313)][_0x2608f9(0x272)] = _0x2608f9(0xac5), setTimeout(() => _0xdbe3c2[_0x2608f9(0xb7b)]['add'](_0x2608f9(0x322)), 0xa)); } } return; } if (window[_0x2608f9(0xa21)]()[_0x2608f9(0x8aa)]()) return; const _0x305d92 = _0x45c788[_0x2608f9(0xa4b)][_0x2608f9(0x546)](_0x2608f9(0x594)); if (_0x305d92 && !_0x45c788['target'][_0x2608f9(0x546)](_0x2608f9(0x4c7))) { if (_0x2608f9(0x55a) === _0x2608f9(0x456)) { const _0x1cd0b3 = _0x428596[_0x2608f9(0x2da)](_0x2608f9(0x24b)); _0x1cd0b3['innerHTML'] = _0x2608f9(0x7c4) + _0x569c05['id'] + _0x2608f9(0x32b) + _0x319b37[_0x2608f9(0x7d7)], _0x367b10[_0x2608f9(0x168)](_0x1cd0b3); } else { const _0x202f89 = parseInt(_0x305d92[_0x2608f9(0x2c4)][_0x2608f9(0x63f)], 0xa); !isNaN(_0x202f89) && _0x5e1692(_0x202f89); } } }); const _0x4356d5 = document[_0xbdb56f(0x653)](_0xbdb56f(0x957)); _0x4356d5 && ('xELcK' !== _0xbdb56f(0x23f) ? (_0x875926(_0x466420), _0x9d2be4(_0xbdb56f(0x32c) + _0x255de6[_0xbdb56f(0x7d7)] + _0xbdb56f(0x548)), _0x21ed54('chat', _0xbdb56f(0x670)), _0x7ba2d7(![])) : _0x4356d5[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => { const _0x3f1f22 = _0xbdb56f; _0x5929aa(_0x3f1f22(0x5a8)); })); const _0x13ef02 = document[_0xbdb56f(0x653)]('custom-stickers-input'), _0x45e439 = localStorage[_0xbdb56f(0x6da)](_0xbdb56f(0x43c)); if (_0x45e439) try { const _0x3c4032 = JSON[_0xbdb56f(0x440)](_0x45e439); if (Array[_0xbdb56f(0xb41)](_0x3c4032)) { if (_0xbdb56f(0x572) !== 'wkLwf') _0x13ef02[_0xbdb56f(0x3cd)] = _0x3c4032[_0xbdb56f(0x7d4)](_0x20032b => _0x20032b['name'] + '--' + _0x20032b[_0xbdb56f(0x51a)])['join']('\x0a'); else { const _0x4e94be = 'chat_' + _0x58257c; _0x4dbfab(_0x4e94be), _0x42f516(!![]); } } } catch (_0x2ed47f) { } document['getElementById'](_0xbdb56f(0x2bd))['addEventListener'](_0xbdb56f(0x4f4), () => { const _0xabef97 = _0xbdb56f, _0x1d7419 = _0x13ef02['value'], _0x34486a = _0x1d7419[_0xabef97(0x334)]('\x0a')['filter'](_0x1b1ac6 => _0x1b1ac6['trim']() !== ''), _0x4c3da0 = []; let _0x2b9e8a = 0x0; for (const _0x469ae9 of _0x34486a) { if ('VemCd' === 'SzHjF') { const _0x36d80b = _0x81579b[_0xabef97(0xb25)](_0x102297, 'readonly'), _0x700fd5 = _0x36d80b['objectStore'](_0x428ce2), _0x4e9aae = _0x700fd5[_0xabef97(0x8f6)](_0x42df8e); _0x4e9aae[_0xabef97(0x8ef)] = () => _0x2a2b08(_0x4e9aae[_0xabef97(0x97f)] ? _0x4e9aae[_0xabef97(0x97f)][_0xabef97(0xb75)] : null), _0x4e9aae[_0xabef97(0x740)] = () => _0xc04c00(_0x4e9aae[_0xabef97(0x5f0)]); } else { const _0x3ea08a = _0x469ae9[_0xabef97(0x334)]('--'); _0x3ea08a[_0xabef97(0x8a0)] === 0x2 && _0x3ea08a[0x0][_0xabef97(0x87b)]() && _0x3ea08a[0x1][_0xabef97(0x87b)]()['startsWith'](_0xabef97(0x80f)) ? _0x4c3da0[_0xabef97(0x24d)]({ 'name': _0x3ea08a[0x0][_0xabef97(0x87b)](), 'url': _0x3ea08a[0x1][_0xabef97(0x87b)]() }) : 'BQeTx' !== _0xabef97(0x410) ? _0x4b2d3a && _0x49ca95(_0x5b87a5['id'], _0x35d8b5[_0xabef97(0x7d4)](_0x353e7d => _0x353e7d['id'])) : _0x2b9e8a++; } } _0x2b9e8a > 0x0 && _0x5929aa('有\x20' + _0x2b9e8a + _0xabef97(0x2bb)); try { localStorage[_0xabef97(0x7db)](_0xabef97(0x43c), JSON['stringify'](_0x4c3da0)), _0x5929aa(_0xabef97(0x671)), setTimeout(() => location['reload'](), 0x5dc); } catch (_0x2bb2a8) { _0x5929aa(_0xabef97(0x49b)); } }), _0x476f3c(), document[_0xbdb56f(0x653)](_0xbdb56f(0x5d1))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), () => { const _0x52b368 = _0xbdb56f; document[_0x52b368(0x653)]('card-input-2')['click'](); }), document[_0xbdb56f(0x653)](_0xbdb56f(0x676))[_0xbdb56f(0xacf)](_0xbdb56f(0x4f4), async () => { const _0x80a385 = _0xbdb56f; 'YqRbw' === _0x80a385(0x705) ? (await _0x48fa9d(_0x80a385(0x3a9)), localStorage[_0x80a385(0x673)](_0x80a385(0x515)), _0x1c016c(), _0x5929aa(_0x80a385(0x8a4))) : _0x1f88c4[_0x80a385(0x589)] = []; }), document[_0xbdb56f(0x653)]('card-input-2')[_0xbdb56f(0xacf)](_0xbdb56f(0xb6d), async _0x22a35e => { const _0x53321f = _0xbdb56f, _0x2218f0 = _0x22a35e['target']['files'][0x0]; if (!_0x2218f0) return; try { if (_0x53321f(0x73f) !== _0x53321f(0xad3)) await _0x100c88(_0x53321f(0x3a9), _0x2218f0), await _0x1c016c(), _0x5929aa(_0x53321f(0x559)); else { _0x50f4c3[_0x53321f(0xace)](_0x53321f(0x9b7)); return; } } catch (_0x523daf) { _0x5929aa('错误:\x20' + _0x523daf['message']); } }), _0x5556c2(), _0x20e8d7(), _0x2f2ff7(); } const _0x3949cc = _0x5f58e0(0x442); async function _0x44ee51(_0x4cce96) { const _0x102f77 = await _0x43cbe5; return new Promise((_0x363e13, _0x37d9c2) => { const _0x55345c = _0x493f; if ('gtPDO' !== _0x55345c(0xafe)) { const _0x939f4f = _0x102f77['transaction'](_0x3949cc, 'readonly'), _0xee5ccf = _0x939f4f[_0x55345c(0x751)](_0x3949cc), _0x13a084 = _0xee5ccf[_0x55345c(0x8f6)](_0x4cce96); _0x13a084['onsuccess'] = () => _0x363e13(_0x13a084[_0x55345c(0x97f)]), _0x13a084[_0x55345c(0x740)] = () => _0x37d9c2(_0x13a084['error']); } else { _0x326755[_0x55345c(0x9c2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>'; return; } }); } async function _0x354975() { const _0x4a8d40 = _0x5f58e0; if (_0x4a8d40(0x20c) !== _0x4a8d40(0x25d)) { const _0x49abe6 = await _0x43cbe5; return new Promise((_0x240791, _0x23a19a) => { const _0xc96f1a = _0x4a8d40, _0x568a47 = _0x49abe6[_0xc96f1a(0xb25)](_0x3949cc, _0xc96f1a(0x1f4)), _0x4d1cb9 = _0x568a47['objectStore'](_0x3949cc), _0x27e7ae = _0x4d1cb9[_0xc96f1a(0x3dd)](); _0x27e7ae[_0xc96f1a(0x8ef)] = () => _0x240791(_0x27e7ae[_0xc96f1a(0x97f)]), _0x27e7ae[_0xc96f1a(0x740)] = () => _0x23a19a(_0x27e7ae[_0xc96f1a(0x5f0)]); }); } else { if (_0x373b3a['length'] === 0x0) return; _0x4610d8 = (_0x12f507 + 0x1) % _0x57ad41[_0x4a8d40(0x8a0)], _0x513dd3(_0x28cfbe[_0x5ea2f3], _0x12bbc9); } } async function _0x296056(_0x193063) { const _0x49051e = _0x5f58e0; if ('BiXUr' !== _0x49051e(0x642)) { const _0x4bb7e8 = await _0x43cbe5; return new Promise((_0x1f0e56, _0x31ff90) => { const _0x5f25a5 = _0x49051e, _0x7fb4be = _0x4bb7e8[_0x5f25a5(0xb25)](_0x3949cc, 'readwrite'), _0x3c8c92 = _0x7fb4be[_0x5f25a5(0x751)](_0x3949cc), _0x18e5ed = _0x3c8c92['put'](_0x193063); _0x18e5ed[_0x5f25a5(0x8ef)] = () => _0x1f0e56(_0x18e5ed[_0x5f25a5(0x97f)]), _0x18e5ed[_0x5f25a5(0x740)] = () => _0x31ff90(_0x18e5ed[_0x5f25a5(0x5f0)]); }); } else { const _0x4c62e3 = _0x44565c[_0x49051e(0x3cd)][_0x49051e(0x87b)](), _0x2a908f = _0x5a554c[_0x49051e(0x3cd)][_0x49051e(0x87b)](); if (!_0x4c62e3 || !_0x2a908f) { _0x12e61d(_0x49051e(0x864)); return; } _0x4f999b({ 'songName': _0x4c62e3, 'artist': _0x2a908f }); } } async function _0x25ab5b(_0x5e5c1f) { const _0x2f2224 = await _0x43cbe5; return new Promise((_0x4f34ad, _0x3b0287) => { const _0x1f3875 = _0x493f; if (_0x1f3875(0xa91) === _0x1f3875(0x31c)) { const _0x4011aa = new _0x269e0c(); _0x4011aa['onloadend'] = () => _0xe6a036(_0x4011aa[_0x1f3875(0x97f)]), _0x4011aa['onerror'] = _0x197307, _0x4011aa[_0x1f3875(0x560)](_0xc4fc4d); } else { const _0x41a876 = _0x2f2224['transaction'](_0x3949cc, 'readwrite'), _0x28b813 = _0x41a876[_0x1f3875(0x751)](_0x3949cc), _0x22aca9 = _0x28b813[_0x1f3875(0x990)](_0x5e5c1f); _0x22aca9[_0x1f3875(0x8ef)] = () => _0x4f34ad(), _0x22aca9[_0x1f3875(0x740)] = () => _0x3b0287(_0x22aca9['error']); } }); } let _0x4afe05 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x29406c = { 'audio': document[_0x5f58e0(0x653)]('altar-slot-audio'), 'cover': document[_0x5f58e0(0x653)](_0x5f58e0(0x5b0)), 'info': document[_0x5f58e0(0x653)](_0x5f58e0(0xb59)), 'lyrics': document[_0x5f58e0(0x653)](_0x5f58e0(0x7e4)) }, _0x209333 = { 'audio': document[_0x5f58e0(0x653)](_0x5f58e0(0x9ca)), 'cover': document[_0x5f58e0(0x653)]('cover-file-input'), 'info': document[_0x5f58e0(0x653)](_0x5f58e0(0x71b)), 'lyrics': document[_0x5f58e0(0x653)](_0x5f58e0(0x7a4)) }; for (const _0x29303f in _0x29406c) { if ('nkpXR' !== 'KrCpA') _0x29406c[_0x29303f]['addEventListener']('click', () => _0x209333[_0x29303f][_0x5f58e0(0x4f4)]()), _0x209333[_0x29303f]['addEventListener'](_0x5f58e0(0xb6d), _0xa0e690 => { const _0x5491a9 = _0x5f58e0; 'ZKSch' !== _0x5491a9(0x435) ? _0x374e89(_0x29303f, _0xa0e690['target'][_0x5491a9(0x53d)][0x0]) : (_0x2d5631['classList']['remove'](_0x5491a9(0x33f)), _0x2dd458[_0x5491a9(0xb7b)]['add']('active'), _0x2d63eb(_0x48f022, _0x17fbb2)); }); else { const _0x47bde6 = _0x4055a4['transaction'](_0x2ed53b, _0x5f58e0(0xadd)), _0x202080 = _0x47bde6[_0x5f58e0(0x751)](_0x63e27a), _0x406c3d = _0x202080[_0x5f58e0(0x215)]({ 'id': _0x572792, 'blob': _0x351c09 }); _0x406c3d[_0x5f58e0(0x8ef)] = () => _0x27b5f5(_0x406c3d[_0x5f58e0(0x97f)]), _0x406c3d[_0x5f58e0(0x740)] = () => _0x3a1e45(_0x406c3d[_0x5f58e0(0x5f0)]); } } function _0x374e89(_0x8cd828, _0x16e691) { const _0x435fc5 = _0x5f58e0; if (!_0x16e691) return; _0x4afe05[_0x8cd828] = _0x16e691, _0x29406c[_0x8cd828][_0x435fc5(0x795)](_0x435fc5(0x62a))[_0x435fc5(0x8f9)] = _0x16e691[_0x435fc5(0x7d7)], _0x29406c[_0x8cd828][_0x435fc5(0xb7b)][_0x435fc5(0x428)](_0x435fc5(0xa37)), _0x312eba(); } function _0x312eba() { const _0x5e3a47 = _0x5f58e0, _0x39e91e = document['getElementById'](_0x5e3a47(0x2bc)); if (_0x4afe05['audio'] && _0x4afe05[_0x5e3a47(0x732)]) { if (_0x5e3a47(0x236) === 'JqIFx') _0x39e91e[_0x5e3a47(0x534)] = ![]; else { _0x5f650e('哼，只有私聊才能进行总结，群聊那么乱怎么记！'); return; } } else _0x39e91e[_0x5e3a47(0x534)] = !![]; } function _0x31030c() { const _0x1fc72a = _0x5f58e0; _0x4afe05 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x364023 in _0x29406c) { if (_0x1fc72a(0xa3a) === 'mcnJe') _0x29406c[_0x364023][_0x1fc72a(0xb7b)][_0x1fc72a(0x344)](_0x1fc72a(0xa37)), _0x209333[_0x364023][_0x1fc72a(0x3cd)] = ''; else { const _0x2f326a = _0x24662e['getElementById'](_0x32538e); _0x2f326a['innerHTML'] = '', _0x4ae8ae[_0x1fc72a(0x38c)][_0x1fc72a(0xa30)](_0x2bc689 => { const _0x4058da = _0x1fc72a, _0x191c06 = _0x1f11b8[_0x4058da(0x2da)]('option'); _0x191c06[_0x4058da(0x3cd)] = _0x2bc689['id'], _0x191c06[_0x4058da(0x8f9)] = _0x2bc689[_0x4058da(0x7d7)], _0x2f326a[_0x4058da(0x168)](_0x191c06); }); } } _0x29406c[_0x1fc72a(0x8e1)][_0x1fc72a(0x795)](_0x1fc72a(0x62a))[_0x1fc72a(0x8f9)] = _0x1fc72a(0x82b), _0x29406c[_0x1fc72a(0x544)][_0x1fc72a(0x795)]('.slot-filename')[_0x1fc72a(0x8f9)] = _0x1fc72a(0x917), _0x29406c[_0x1fc72a(0x732)]['querySelector'](_0x1fc72a(0x62a))[_0x1fc72a(0x8f9)] = _0x1fc72a(0x734), _0x29406c[_0x1fc72a(0x89a)][_0x1fc72a(0x795)](_0x1fc72a(0x62a))[_0x1fc72a(0x8f9)] = _0x1fc72a(0x56b), _0x312eba(); } document[_0x5f58e0(0x653)](_0x5f58e0(0x2bc))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), async () => { const _0x3f3936 = _0x5f58e0; if (!_0x4afe05['audio'] || !_0x4afe05[_0x3f3936(0x732)]) { _0x5929aa(_0x3f3936(0x5b1)); return; } await _0x3d8810(); }), document[_0x5f58e0(0x653)](_0x5f58e0(0xadb))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x5042af = _0x5f58e0; _0x31030c(), _0x13d883('musicUploadAltar', _0x5042af(0x91e)); }), document['getElementById']('back-to-library-from-altar')[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x25bbc5 = _0x5f58e0; _0x13d883(_0x25bbc5(0x91e), _0x25bbc5(0x1ea)); }); async function _0x3d8810() { const _0x543e49 = _0x5f58e0; _0x1d9e54(!![], _0x543e49(0x162)); try { const _0x5606cc = await _0x4afe05[_0x543e49(0x732)][_0x543e49(0x252)](); let _0x283aeb; if (_0x5606cc['trim']()[_0x543e49(0x6c0)]('{')) _0x283aeb = JSON[_0x543e49(0x440)](_0x5606cc); else { if (_0x543e49(0x61a) === _0x543e49(0x61a)) { _0x283aeb = {}; const _0x42c8c4 = _0x5606cc[_0x543e49(0x334)]('\x0a'); _0x42c8c4[_0x543e49(0xa30)](_0x277a91 => { const _0x53855b = _0x543e49, _0x426055 = _0x277a91['split'](/:\s|：\s/); if (_0x426055['length'] === 0x2) { const _0x5b3b4e = _0x426055[0x0]['trim'](), _0x3b6ef0 = _0x426055[0x1][_0x53855b(0x87b)](), _0x3f0814 = { '歌名': _0x53855b(0x2ed), '艺术家': '歌手', '专辑': '专辑' }; _0x3f0814[_0x5b3b4e] && (_0x283aeb[_0x3f0814[_0x5b3b4e]] = _0x3b6ef0); } }); if (!_0x283aeb[_0x543e49(0x2ed)]) { if ('OAwnr' === _0x543e49(0x56a)) throw new Error(_0x543e49(0xaf1)); else _0x47e48c(_0x543e49(0x842), _0x543e49(0x945)), _0x784f80(![]); } _0x283aeb[_0x543e49(0x1ec)] = _0x543e49(0x4a8) + Date[_0x543e49(0x965)](); } else _0x16a46c[_0x543e49(0x589)]['forEach']((_0x6954b0, _0x5d28b4) => _0x53901d(_0x6954b0, _0x5d28b4)); } const _0x2cf9c2 = _0x543e49(0x4a8) + (_0x283aeb[_0x543e49(0x1ec)] || Date[_0x543e49(0x965)]()), _0x3d0607 = { 'id': _0x2cf9c2, 'info': _0x283aeb, 'audio': _0x4afe05[_0x543e49(0x8e1)], 'cover': _0x4afe05[_0x543e49(0x544)], 'lyrics': _0x4afe05[_0x543e49(0x89a)] ? await _0x4afe05[_0x543e49(0x89a)][_0x543e49(0x252)]() : '' }; await _0x296056(_0x3d0607), await _0x2032ab(), _0x1d9e54(![]), _0x5929aa('歌曲“' + _0x283aeb[_0x543e49(0x2ed)] + _0x543e49(0x9b4)), _0x13d883(_0x543e49(0x91e), _0x543e49(0x1ea)); } catch (_0x296e64) { _0x543e49(0x2d6) !== _0x543e49(0x64d) ? (_0x1d9e54(![]), console['error'](_0x543e49(0x5cd), _0x296e64), _0x5929aa(_0x543e49(0x8ca) + _0x296e64[_0x543e49(0xa53)])) : _0x4d2b14[_0x543e49(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>' + _0x354d55 + _0x543e49(0x927) + _0x23b596 + _0x543e49(0xa5b) + _0x2dc68e[_0x543e49(0x70f)] + _0x543e49(0x8fd) + _0x24fee7['artist'] + _0x543e49(0xafd) + _0x30d63b[_0x543e49(0x64b)] + _0x543e49(0x590); } } async function _0x2032ab() { const _0x40e0d6 = _0x5f58e0, _0x494cbb = document['getElementById'](_0x40e0d6(0x843)); _0x494cbb[_0x40e0d6(0x9c2)] = ''; const _0x4d98b9 = await _0x354975(); if (_0x4d98b9[_0x40e0d6(0x8a0)] === 0x0) { if ('DfdJE' !== _0x40e0d6(0x1da)) return { 'url': _0x4b4220, 'cover': _0x104857[_0x40e0d6(0x544)], 'source': _0x372d36 }; else { _0x494cbb[_0x40e0d6(0x9c2)] = _0x40e0d6(0x320); return; } } _0x4d98b9['sort']((_0x6ccdce, _0x50ff5f) => (_0x6ccdce['info'][_0x40e0d6(0x2ed)] || '')[_0x40e0d6(0x2f1)](_0x50ff5f['info'][_0x40e0d6(0x2ed)] || '')); for (const _0x37ea83 of _0x4d98b9) { const _0x49f74a = document[_0x40e0d6(0x2da)](_0x40e0d6(0x1f9)); _0x49f74a[_0x40e0d6(0x84e)] = _0x40e0d6(0x6ef), _0x49f74a['dataset'][_0x40e0d6(0x64b)] = _0x37ea83['id']; const _0x5f3f12 = _0x37ea83[_0x40e0d6(0x544)] ? URL[_0x40e0d6(0x264)](_0x37ea83[_0x40e0d6(0x544)]) : _0xe4a1db; _0x49f74a[_0x40e0d6(0x9c2)] = _0x40e0d6(0x6c7) + _0x5f3f12 + _0x40e0d6(0x3aa) + (_0x37ea83[_0x40e0d6(0x732)][_0x40e0d6(0x2ed)] || _0x40e0d6(0x587)) + _0x40e0d6(0xb45) + (_0x37ea83[_0x40e0d6(0x732)]['歌手'] || _0x40e0d6(0x1aa)) + _0x40e0d6(0x926); let _0x296423 = null; const _0x1d6ca3 = _0x181680 => { const _0x51b9fc = _0x40e0d6; if (_0x181680[_0x51b9fc(0xae6)] === 0x2) return; _0x296423 = setTimeout(async () => { const _0x302039 = _0x51b9fc; if ('LrWsh' === _0x302039(0x47d)) { if (_0x181680[_0x302039(0x8c3)] === _0x302039(0x65a)) _0x181680[_0x302039(0x4d1)](); const _0x30e5d7 = await _0x9e00ac(_0x302039(0x6f5) + _0x37ea83[_0x302039(0x732)][_0x302039(0x2ed)] + _0x302039(0x684)); _0x30e5d7 && (await _0x25ab5b(_0x37ea83['id']), await _0x2032ab(), _0x5929aa(_0x302039(0x628))); } else { const _0x988e88 = new _0x269b61(); _0x988e88[_0x302039(0x8c0)] = () => _0x5f27fb(_0x988e88[_0x302039(0x97f)]), _0x988e88[_0x302039(0x740)] = _0x39a3dc, _0x988e88[_0x302039(0x560)](_0x145a1f); } }, 0x320); }, _0x454224 = () => { const _0x4dd0e9 = _0x40e0d6; 'RQGLL' === _0x4dd0e9(0x363) ? (_0xecb8e6[_0x4dd0e9(0xb7b)][_0x4dd0e9(0x428)]('is-entering-from-right'), _0x3e2d3b[_0x4dd0e9(0xb7b)][_0x4dd0e9(0x428)]('is-exiting-left'), _0x1008f6['classList'][_0x4dd0e9(0x428)](_0x4dd0e9(0x43d)), _0x307dd3(() => { const _0x3700bf = _0x4dd0e9; _0xb0fcf8[_0x3700bf(0xb7b)][_0x3700bf(0x344)](_0x3700bf(0x43d), _0x3700bf(0x5d3)), _0x487725[_0x3700bf(0xb7b)][_0x3700bf(0x344)](_0x3700bf(0x218)), _0x1a2dfd[_0x3700bf(0xa07)] = _0x1d29b3, _0x2b23d8(), _0xf72bf['isAnimatingDiary'] = ![]; }, 0x2bc)) : clearTimeout(_0x296423); }; _0x49f74a[_0x40e0d6(0xacf)]('mousedown', _0x1d6ca3), _0x49f74a[_0x40e0d6(0xacf)](_0x40e0d6(0x5a7), _0x454224), _0x49f74a[_0x40e0d6(0xacf)]('mouseleave', _0x454224), _0x49f74a[_0x40e0d6(0xacf)](_0x40e0d6(0x65a), _0x1d6ca3, { 'passive': ![] }), _0x49f74a['addEventListener'](_0x40e0d6(0x898), _0x454224), _0x49f74a[_0x40e0d6(0xacf)](_0x40e0d6(0x242), _0x454224), _0x49f74a[_0x40e0d6(0xacf)]('click', _0x4abb21 => { const _0x22c40b = _0x40e0d6; if (_0x296423) clearTimeout(_0x296423); if (_0x4abb21[_0x22c40b(0x988)]) return; setTimeout(() => { const _0x4ee2e3 = _0x22c40b; if (_0x4ee2e3(0x891) !== 'VCfrr') { if (_0x296423) { if ('COmoL' === _0x4ee2e3(0x609)) _0x2097e4(_0x37ea83['id'], _0x4d98b9[_0x4ee2e3(0x7d4)](_0x16e3dd => _0x16e3dd['id'])); else { const _0x58d954 = _0x231035[_0x4ee2e3(0xb25)](_0xdbd1d6, _0x4ee2e3(0xadd)), _0x34ba7c = _0x58d954[_0x4ee2e3(0x751)](_0x2dd670), _0x49d71b = _0x34ba7c[_0x4ee2e3(0x215)]({ 'id': _0x5adc5a, 'data': _0x16c518 }); _0x49d71b['onsuccess'] = () => _0x4b05cd(), _0x49d71b['onerror'] = () => _0x1f00df(_0x49d71b[_0x4ee2e3(0x5f0)]); } } } else { const _0x12ee7b = _0x34fc52[_0x4ee2e3(0xa26)][_0x4ee2e3(0x6f9)](_0x472497 => _0x472497['id'] === _0x399e6c[_0x4ee2e3(0x825)]), _0x3f197a = _0x12ee7b?.[_0x4ee2e3(0x70c)]; let _0x36d56d = _0xa660e7[_0x4ee2e3(0x38c)][_0x4ee2e3(0x6f9)](_0x32611c => _0x32611c['id'] === _0x3f197a); !_0x36d56d && (_0x36d56d = _0x59e9fc[_0x4ee2e3(0x38c)][_0x4ee2e3(0x6f9)](_0x4a808d => _0x4a808d['id'] === _0x5b2001[_0x4ee2e3(0x1d3)])), !_0x36d56d && (_0x36d56d = _0x52560f['userProfiles'][0x0]), _0x36d56d && (_0x3ef3b7[_0x4ee2e3(0x653)]('user-post-avatar')[_0x4ee2e3(0x74e)] = _0x36d56d['avatar'] || _0x2a5552); } }, 0x32); }), _0x494cbb[_0x40e0d6(0x168)](_0x49f74a); } } _0x206077[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x5a6495 = _0x5f58e0; _0x5929aa(_0x5a6495(0x8d5)); }), _0x277247['addEventListener'](_0x5f58e0(0x4f4), () => { _0x5929aa('这个也是摆设，别点了。'); }); let _0x498a45 = [], _0x15ea73 = -0x1; async function _0x2097e4(_0x20db92, _0x41845a) { const _0x52a794 = _0x5f58e0, _0x9f7a39 = await _0x44ee51(_0x20db92); if (!_0x9f7a39) return; _0x361c6d = { 'title': _0x9f7a39[_0x52a794(0x732)][_0x52a794(0x2ed)] || _0x52a794(0x587), 'artist': _0x9f7a39[_0x52a794(0x732)]['歌手'] || '未知艺术家', 'cover': _0x9f7a39[_0x52a794(0x544)] ? URL[_0x52a794(0x264)](_0x9f7a39[_0x52a794(0x544)]) : _0xe4a1db, 'isFromLibrary': !![] }; const _0x463f55 = URL[_0x52a794(0x264)](_0x9f7a39['audio']); _0x29f550[_0x52a794(0x74e)] = _0x463f55, _0x29f550['play'](), _0x541511(); } async function _0x541511() { const _0xaf34b6 = _0x5f58e0; if ('Cgoxp' !== _0xaf34b6(0x806)) { _0x8b4128(_0xaf34b6(0x2fa)); return; } else { const _0x312e11 = document[_0xaf34b6(0x653)](_0xaf34b6(0x3b6)), _0x36fb30 = document['getElementById'](_0xaf34b6(0xb26)), _0x29a042 = document[_0xaf34b6(0x653)](_0xaf34b6(0x4c6)), _0x4d419f = document[_0xaf34b6(0x653)]('widget-cover-art'), _0x622b6a = _0x361c6d; if (_0x622b6a && _0x622b6a[_0xaf34b6(0x529)]) _0x36fb30[_0xaf34b6(0x8f9)] = _0x622b6a[_0xaf34b6(0x869)], _0x29a042[_0xaf34b6(0x8f9)] = _0x622b6a[_0xaf34b6(0x6e9)], _0x312e11[_0xaf34b6(0xb7b)][_0xaf34b6(0x428)](_0xaf34b6(0xa65)), _0x312e11[_0xaf34b6(0x313)][_0xaf34b6(0x3d0)](_0xaf34b6(0x972), _0xaf34b6(0x8f5) + _0x622b6a['cover'] + ')'); else { if (_0xaf34b6(0x229) === _0xaf34b6(0x229)) _0x36fb30[_0xaf34b6(0x8f9)] = '暂无音乐', _0x29a042[_0xaf34b6(0x8f9)] = '请在动态或聊天中播放', _0x312e11[_0xaf34b6(0xb7b)]['remove'](_0xaf34b6(0xa65)), _0x4d419f[_0xaf34b6(0x313)][_0xaf34b6(0x3d0)]('--widget-cover-image', _0xaf34b6(0x643)); else throw new _0xb28ee(_0xaf34b6(0x540)); } } } _0x206077 && (_0x5f58e0(0x54c) === _0x5f58e0(0x8cc) ? _0x29ac12 = _0x57cd90['linkedWorldBookIds'][_0x5f58e0(0x7d4)](_0x30cb7b => _0x3123c0[_0x5f58e0(0x562)]['find'](_0x5d82a8 => _0x5d82a8['id'] === _0x30cb7b))[_0x5f58e0(0x776)](_0x337795)[_0x5f58e0(0x7d4)](_0x5ad1eb => _0x5f58e0(0x76a) + _0x5ad1eb['name'] + _0x5f58e0(0x1c1) + _0x5ad1eb[_0x5f58e0(0x329)])[_0x5f58e0(0x359)]('') : _0x206077[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x166a40 = _0x5f58e0; if (_0x166a40(0x454) === _0x166a40(0x454)) { if (_0x498a45[_0x166a40(0x8a0)] === 0x0) return; _0x15ea73 = (_0x15ea73 + 0x1) % _0x498a45[_0x166a40(0x8a0)], _0x2097e4(_0x498a45[_0x15ea73], _0x498a45); } else _0x595dd4[_0x166a40(0x66f)] && _0x874417[_0x166a40(0x66f)][_0x166a40(0x50c)] && (_0x2733c0['style'][_0x166a40(0x272)] = _0x166a40(0xac5), _0x5a7f52(() => _0x1c3d72[_0x166a40(0xb7b)][_0x166a40(0x428)](_0x166a40(0x322)), 0xa)); })); _0x277247 && _0x277247[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x4997f4 = _0x5f58e0; if (_0x498a45['length'] === 0x0) return; _0x15ea73 = (_0x15ea73 - 0x1 + _0x498a45[_0x4997f4(0x8a0)]) % _0x498a45[_0x4997f4(0x8a0)], _0x2097e4(_0x498a45[_0x15ea73], _0x498a45); }); _0x29f550['addEventListener'](_0x5f58e0(0x9d7), () => { const _0x45b68f = _0x5f58e0; if ('aJirU' === _0x45b68f(0x5fb)) _0x54bbfa[_0x45b68f(0x74e)] = _0x3b5a4e[_0x45b68f(0x3bf)]; else { if (_0x1f4f7f) _0x1f4f7f[_0x45b68f(0x8f9)] = '❚❚'; } }), _0x29f550[_0x5f58e0(0xacf)]('pause', () => { const _0x387ae7 = _0x5f58e0; if (_0x387ae7(0x401) === _0x387ae7(0x2ad)) { if (_0x10320e[_0x387ae7(0x6dd)]) _0x20888a[_0x387ae7(0x24d)]('[' + _0x28dcfb(_0x5b389a) + _0x387ae7(0x99f) + (_0x40c57d[_0x387ae7(0x329)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x540767[_0x387ae7(0x3bf)]) { const _0x244d2f = _0x38c6b5[_0x387ae7(0x329)] ? '\x20' + _0x2aecab[_0x387ae7(0x329)] : ''; _0xd93a23[_0x387ae7(0x24d)]('[' + _0x45919d(_0x24c571) + _0x387ae7(0x689) + _0x244d2f); } else _0x540141[_0x387ae7(0x329)] && _0xa9d579[_0x387ae7(0x24d)]('[' + _0x27348f(_0x1dad89) + ']\x20' + _0xe7e1f9['content']); } } else { if (_0x1f4f7f) _0x1f4f7f[_0x387ae7(0x8f9)] = '▶'; } }), _0x29f550[_0x5f58e0(0xacf)](_0x5f58e0(0xa52), () => { const _0x29c8d7 = _0x5f58e0; if (_0x206077) _0x206077[_0x29c8d7(0x4f4)](); }); function _0x5daa59() { const _0x277985 = _0x5f58e0; if (_0x277985(0x7e6) !== _0x277985(0xa28)) { const _0x41001a = _0x2bf707(); if (!_0x41001a) return; _0x110a74['innerHTML'] = '', _0x2a0938[_0x277985(0x3cd)] = ''; if (_0x41001a[_0x277985(0x8c3)] === 'group') _0x277985(0x9b6) !== _0x277985(0x9b6) ? _0x3b7258(_0x31683d, _0x277985(0xb1a)) : (_0x41001a['participantIds'][_0x277985(0xa30)](_0x1a277e => { const _0x10b995 = _0x277985, _0x1831e4 = _0x21051e(_0x1a277e); if (_0x1831e4) { if (_0x10b995(0x1df) === 'icMGs') _0x8f84db > _0x1bd90e && (_0x58550e *= _0x4fe446 / _0xd03685, _0x2203de = _0x31a003); else { const _0xb85f5f = document[_0x10b995(0x2da)](_0x10b995(0x503)); _0xb85f5f[_0x10b995(0x3cd)] = _0x1831e4['id'], _0xb85f5f[_0x10b995(0x8f9)] = _0x1831e4[_0x10b995(0x7d7)], _0x110a74[_0x10b995(0x168)](_0xb85f5f); } } }), _0x5e0a19[_0x277985(0x313)][_0x277985(0x272)] = _0x277985(0x8b0)); else { if (_0x277985(0x4ce) === _0x277985(0x4ce)) _0x5e0a19[_0x277985(0x313)][_0x277985(0x272)] = _0x277985(0x643); else { _0x129da1(_0x277985(0x822)); return; } } _0x35b3b8[_0x277985(0xb7b)][_0x277985(0x428)](_0x277985(0x322)), _0x2a0938[_0x277985(0x96c)](); } else { const _0x3f9d82 = _0x33dc39[_0x277985(0x2da)]('p'); _0x3f9d82[_0x277985(0x9c2)] = _0x225c2d, _0x3f9d82[_0x277985(0x313)][_0x277985(0x29e)] = '0', _0x5acbe6[_0x277985(0x168)](_0x3f9d82); } } function _0x1a3dd6() { const _0x3504d4 = _0x5f58e0, _0x18da41 = parseFloat(_0x2a0938[_0x3504d4(0x3cd)]); if (isNaN(_0x18da41) || _0x18da41 <= 0x0) { if (_0x3504d4(0x200) === _0x3504d4(0x1bb)) { const _0x177cc0 = _0x18906e['target'][_0x3504d4(0x2c4)]['id']; _0x558eb2(_0x3504d4(0x39a))[_0x3504d4(0x8e7)](_0xff1a6c => { _0xff1a6c && _0x3c40a0(_0x177cc0); }); } else { _0x5929aa('请输入有效的转账金额！'); return; } } const _0x509dda = _0x2bf707(); let _0x1958b4 = null; _0x509dda[_0x3504d4(0x8c3)] === 'group' ? _0x1958b4 = _0x110a74[_0x3504d4(0x3cd)] : _0x1958b4 = _0x509dda[_0x3504d4(0x3d5)][0x0]; const _0x5e56aa = _0x4079e8(_0x509dda['id']), _0x76361 = { 'role': _0x3504d4(0x901), 'type': _0x3504d4(0x7b8), 'content': _0x3504d4(0xabd) + (_0x21051e(_0x1958b4)?.[_0x3504d4(0x7d7)] || '未知') + _0x3504d4(0x977) + _0x18da41 + ']', 'amount': _0x18da41, 'recipientId': _0x1958b4, 'senderId': _0x5e56aa['id'], 'timestamp': Date[_0x3504d4(0x965)]() }; _0x1884b1[_0x3504d4(0x589)]['push'](_0x76361), _0x21733b(), _0x59f07e(), _0x35b3b8[_0x3504d4(0xb7b)]['remove'](_0x3504d4(0x322)); } async function _0x1badc1(_0x10821d) { const _0x347edc = _0x5f58e0, _0x4ed698 = _0x21051e(_0x10821d); if (!_0x4ed698) return; const _0x350eb8 = await _0x9e00ac(_0x347edc(0x55d) + _0x4ed698[_0x347edc(0x7d7)] + _0x347edc(0x8fc)); if (!_0x350eb8) return; const _0x261360 = _0x1884b1[_0x347edc(0x7f1)]['findIndex'](_0x443ab1 => _0x443ab1[_0x347edc(0x853)] === _0x10821d); if (_0x261360 > -0x1) { if (_0x347edc(0xb52) !== _0x347edc(0xb52)) { const _0x215b36 = _0x201e48[_0x347edc(0xa6e)][_0x347edc(0x776)](_0x81fd68 => _0x81fd68['type'] === _0x347edc(0x35c) && _0x81fd68[_0x347edc(0xa36)])[_0x347edc(0x7d4)](_0x1dd446 => ({ ..._0x1dd446, 'source': _0x347edc(0x38e) })); _0x50c300['push'](..._0x215b36); } else _0x1884b1[_0x347edc(0x7f1)][_0x347edc(0x8cf)](_0x261360, 0x1), _0x480928(), _0x1a0dfa(), _0x5929aa('【' + _0x4ed698[_0x347edc(0x7d7)] + _0x347edc(0x1b3)); } else 'qysFB' === 'YtSnv' ? (_0x29288d(), _0x4c8cdf[_0x347edc(0x4f4)]()) : _0x5929aa('这本日记本来就是空的，你还想清空什么？'); } function _0x38e3c3() { const _0x4f18a6 = _0x5f58e0; if ('oAMNM' === 'oAMNM') { const _0x25aba7 = document[_0x4f18a6(0x653)](_0x4f18a6(0x318)); _0x25aba7[_0x4f18a6(0x9c2)] = ''; const _0x42b399 = _0x1884b1[_0x4f18a6(0x358)][_0x4f18a6(0x776)](_0x5ba0bc => _0x1884b1['chats'][_0x4f18a6(0x942)](_0x5a88a4 => _0x5a88a4[_0x4f18a6(0x8c3)] === _0x4f18a6(0xaa7) && _0x5a88a4[_0x4f18a6(0x3d5)]['includes'](_0x5ba0bc['id']))); if (_0x42b399[_0x4f18a6(0x8a0)] === 0x0) { if ('swWyU' !== _0x4f18a6(0x7e0)) { const _0x4b2920 = _0x2fd8d2[_0x4f18a6(0x358)][_0x4f18a6(0x6f9)](_0x3b44ae => _0x3b44ae['id'] === _0x3699b6); _0x6ff9aa[_0x4f18a6(0x3cd)] = _0x4b2920['avatarFrameUrl'] || '', _0x3c278d[_0x4f18a6(0x3cd)] = _0x4b2920[_0x4f18a6(0x7f9)] || ''; if (_0x1737d9) _0x34713a[_0x4f18a6(0x313)][_0x4f18a6(0x956)] = _0x4b2920['avatarFrameUrl'] ? _0x4f18a6(0xa38) + _0x4b2920[_0x4f18a6(0x557)] + '\x27)' : ''; } else { _0x25aba7['innerHTML'] = _0x4f18a6(0x6ff); return; } } _0x42b399['forEach'](_0x31ed9c => { const _0xa3fe81 = _0x4f18a6, _0x408315 = document['createElement']('li'); _0x408315[_0xa3fe81(0x84e)] = _0xa3fe81(0x451), _0x408315[_0xa3fe81(0x2c4)]['charId'] = _0x31ed9c['id'], _0x408315[_0xa3fe81(0x9c2)] = _0xa3fe81(0x6de) + (_0x31ed9c['avatar'] || _0xe4a1db) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x31ed9c['name'] + _0xa3fe81(0x56f) + _0x31ed9c[_0xa3fe81(0x7d7)] + _0xa3fe81(0x775), _0x408315[_0xa3fe81(0x795)](_0xa3fe81(0xa1c))[_0xa3fe81(0xacf)](_0xa3fe81(0x4f4), () => _0x438022(_0x31ed9c['id'])), _0x408315['querySelector'](_0xa3fe81(0x382))[_0xa3fe81(0xacf)](_0xa3fe81(0x4f4), async _0x25426b => { const _0x16e671 = _0xa3fe81; if ('TjPiz' === _0x16e671(0x719)) { _0x25426b[_0x16e671(0xa80)](); const _0x2ab650 = _0x21051e(_0x31ed9c['id']); if (!_0x2ab650) return; const _0x4271c2 = await _0x9e00ac(_0x16e671(0xb09) + _0x2ab650['name'] + '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。'); if (_0x4271c2) { _0x1d9e54(!![], '正在焚烧【' + _0x2ab650[_0x16e671(0x7d7)] + '】的旧数据...'); const _0x177dc4 = ['gallery', _0x16e671(0x738), 'abyss', _0x16e671(0xade), _0x16e671(0x873), 'wants', _0x16e671(0x257), _0x16e671(0x5c9)]; for (const _0x2c4788 of _0x177dc4) { const _0x5f4bb8 = _0x16e671(0x8a6) + _0x2ab650['id'] + '_' + _0x2c4788; await _0x2612b6(_0x5f4bb8); } _0x1d9e54(![]), _0x5929aa('【' + _0x2ab650['name'] + _0x16e671(0x4d3)); } } else _0x388d77['warn'](_0x16e671(0xb0d), _0x1a2bf5); }), _0x25aba7[_0xa3fe81(0x168)](_0x408315); }); } else { _0x3de7ae(_0x4f18a6(0x5b1)); return; } } let _0x299cce = null, _0xf24782 = null; function _0x455572() { const _0x169063 = _0x5f58e0; if (_0x169063(0x74d) !== _0x169063(0x74d)) _0x14e1e5['log'](_0x169063(0x2ee) + _0x4d88a8), _0xc161a1[_0x169063(0x3b3)](_0x153694, { 'keyPath': 'id' }); else { const _0x4eca2d = new Date(), _0x1f2cf7 = document[_0x169063(0x653)]('snoop-home-time'), _0x5d6144 = document[_0x169063(0x653)]('snoop-home-date'), _0x351554 = document[_0x169063(0x653)](_0x169063(0x265)); _0x1f2cf7 && _0x5d6144 && (_0x1f2cf7[_0x169063(0x8f9)] = _0x4eca2d[_0x169063(0x9ac)](_0x169063(0x567), { 'hour': '2-digit', 'minute': _0x169063(0x711), 'hour12': ![] }), _0x5d6144['textContent'] = _0x4eca2d[_0x169063(0x600)](_0x169063(0x567), { 'month': 'long', 'day': _0x169063(0x385), 'weekday': _0x169063(0xa0d) })), _0x351554 && (_0x169063(0x7a2) === _0x169063(0x89c) ? (_0x31d726(), _0x7078ea('friendCircleList', 'home')) : _0x351554[_0x169063(0x9c2)] = _0x169063(0x77f) + _0x4eca2d[_0x169063(0x9ac)]('zh-CN', { 'hour': _0x169063(0x711), 'minute': _0x169063(0x711), 'hour12': ![] }) + _0x169063(0x4eb)); } } function _0x438022(_0xe08f57) { const _0x268641 = _0x5f58e0; _0x299cce = _0xe08f57; const _0x332c7f = _0x21051e(_0xe08f57); if (!_0x332c7f) return; const _0xd82c0e = document[_0x268641(0x653)](_0x268641(0x48d)), _0x4edde7 = document[_0x268641(0x653)](_0x268641(0x3fc)); if (_0x4edde7) _0x4edde7[_0x268641(0x344)](); const _0x7b13f0 = document[_0x268641(0x653)](_0x268641(0x78a)); if (_0x7b13f0) _0x7b13f0[_0x268641(0x344)](); _0xd82c0e[_0x268641(0x8e4)](_0x268641(0x819), _0x268641(0x55b)), _0xd82c0e[_0x268641(0x8e4)](_0x268641(0x819), _0x268641(0x240)), document[_0x268641(0x653)]('snoop-char-name-header')['textContent'] = '', _0x449d41(); if (_0xf24782) clearInterval(_0xf24782); _0x455572(), _0xf24782 = setInterval(_0x455572, 0x2710), _0x13d883('snoopPhone', 'snoopList'); } function _0x449d41() { const _0x1ddc32 = _0x5f58e0, _0xc66584 = document[_0x1ddc32(0x653)]('snoop-app-container'), _0x1aca59 = document[_0x1ddc32(0x653)](_0x1ddc32(0x78a)); _0xc66584['innerHTML'] = _0x1ddc32(0xb79), _0x1aca59[_0x1ddc32(0x9c2)] = ''; const _0x44b6e4 = _0xc66584[_0x1ddc32(0x795)](_0x1ddc32(0x742)), _0x1a82c8 = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x1ddc32(0x1a2), 'area': _0x1ddc32(0x6a7) }, { 'id': _0x1ddc32(0x1e4), 'name': _0x1ddc32(0x82c), 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': 'dock' }, { 'id': _0x1ddc32(0x392), 'name': '相册', 'svg': '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'area': _0x1ddc32(0x6a7) }, { 'id': _0x1ddc32(0x5c9), 'name': '总结', 'svg': _0x1ddc32(0x158), 'area': 'dock' }, { 'id': _0x1ddc32(0xade), 'name': _0x1ddc32(0x769), 'svg': _0x1ddc32(0x3e4), 'area': _0x1ddc32(0x330) }, { 'id': _0x1ddc32(0x873), 'name': '外卖', 'svg': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'area': _0x1ddc32(0x330) }, { 'id': _0x1ddc32(0xa22), 'name': '购物', 'svg': _0x1ddc32(0x56e), 'area': 'main' }, { 'id': 'footprints', 'name': '足迹', 'svg': _0x1ddc32(0x2b9), 'area': 'main' }]; _0x1a82c8[_0x1ddc32(0xa30)](_0x34345f => { const _0x48ea5f = _0x1ddc32; if ('kASOo' === _0x48ea5f(0x668)) { const _0x481dcf = new _0xd2857e(_0x14ff67[_0x48ea5f(0x1af)]), _0x42a679 = _0x37b9cd['floor']((_0x813886 - _0x481dcf) / (0x3e8 * 0x3c)); if (_0x42a679 < 0x5) _0x56808f += _0x48ea5f(0x985); else { if (_0x42a679 < 0x78) _0x25f787 += _0x48ea5f(0x3af) + _0x42a679 + _0x48ea5f(0x97a); else { const _0x25c9b9 = _0x3a3a5e[_0x48ea5f(0xa29)](_0x42a679 / 0x3c); if (_0x25c9b9 < 0x30) _0x4ecabe += _0x48ea5f(0x3af) + _0x25c9b9 + _0x48ea5f(0x786); else _0x4e19a0 += _0x48ea5f(0x6f1) + _0x581e3c['floor'](_0x25c9b9 / 0x18) + _0x48ea5f(0x3bb); } } } else { const _0x32f6ca = document[_0x48ea5f(0x2da)](_0x48ea5f(0x1f9)); _0x32f6ca[_0x48ea5f(0x84e)] = 'snoop-app-icon', _0x32f6ca['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x34345f[_0x48ea5f(0x645)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x34345f[_0x48ea5f(0x7d7)] + _0x48ea5f(0x846), _0x32f6ca[_0x48ea5f(0xacf)](_0x48ea5f(0x4f4), () => _0x87fe9f(_0x34345f['id'], _0x34345f[_0x48ea5f(0x7d7)])), _0x34345f[_0x48ea5f(0x630)] === _0x48ea5f(0x6a7) ? _0x1aca59['appendChild'](_0x32f6ca) : _0x48ea5f(0x390) !== _0x48ea5f(0x4b4) ? _0x44b6e4[_0x48ea5f(0x168)](_0x32f6ca) : (_0x298d16['classList'][_0x48ea5f(0x344)]('active'), _0x179fad['classList'][_0x48ea5f(0x428)]('active'), _0x54f3b4()); } }); } document[_0x5f58e0(0x653)](_0x5f58e0(0x757))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => { const _0x161885 = _0x5f58e0; _0xf24782 && (clearInterval(_0xf24782), _0xf24782 = null); document[_0x161885(0x653)](_0x161885(0x4a1))['style'][_0x161885(0x272)] = _0x161885(0x643); const _0xcdc4b1 = document[_0x161885(0x653)](_0x161885(0x78a)); if (_0xcdc4b1) _0xcdc4b1['remove'](); const _0x87158 = document['getElementById'](_0x161885(0x3fc)); if (_0x87158) _0x87158['remove'](); _0x13d883('snoopList', _0x161885(0x2c6)); }); async function _0x87fe9f(_0x3e0571, _0xc66c97, _0x4cd20e = ![]) { const _0x5cbdf0 = _0x5f58e0; document['getElementById'](_0x5cbdf0(0x270))[_0x5cbdf0(0x313)][_0x5cbdf0(0x272)] = _0x5cbdf0(0x643); const _0x1efcba = document[_0x5cbdf0(0x653)](_0x5cbdf0(0x4a1)); _0x1efcba[_0x5cbdf0(0x9c2)] = _0x5cbdf0(0x198), _0x1efcba[_0x5cbdf0(0x313)][_0x5cbdf0(0x272)] = _0x5cbdf0(0xac5); const _0x2bf597 = _0x5cbdf0(0x8a6) + _0x299cce + '_' + _0x3e0571; try { if (_0x3e0571 === _0x5cbdf0(0x5c9)) { if (_0x5cbdf0(0x9a6) !== _0x5cbdf0(0x9a6)) { const _0x5849d8 = _0x30b9fc[_0x5cbdf0(0x440)](_0x20ca61[_0x5cbdf0(0x2c4)][_0x5cbdf0(0xace)][_0x5cbdf0(0xac6)](/&quot;/g, '\x22')), _0x20bc4d = _0x5116c7[_0x5cbdf0(0x2c4)][_0x5cbdf0(0x76e)], _0x232926 = _0x37b6dd[_0x5cbdf0(0x2c4)][_0x5cbdf0(0x746)]; _0x2a3a2f(_0x20bc4d, _0x232926, _0x5849d8); } else { const _0x986aa = await _0x33d26d(_0x299cce); _0x440f80(_0x3e0571, _0xc66c97, _0x986aa); return; } } let _0x296671 = await _0x4f8ac7(_0x2bf597); if (_0x4cd20e || !_0x296671) { if (_0x5cbdf0(0x907) === _0x5cbdf0(0x884)) { _0x161448(); return; } else { console[_0x5cbdf0(0xace)]('请求AI更新:\x20' + _0x2bf597 + _0x5cbdf0(0x708)); let _0x1720b8 = await _0x3a8351(_0x3e0571, _0x299cce, _0x296671); if (_0x1720b8) { const _0x1dcc80 = _0x1720b8[_0x5cbdf0(0x81f)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x587fce = _0x1dcc80 ? _0x1dcc80[0x1][_0x5cbdf0(0x87b)]() : _0x1720b8['trim'](); let _0x2faf3b; try { _0x2faf3b = JSON[_0x5cbdf0(0x440)](_0x587fce); } catch (_0x34f8cd) { _0x2faf3b = _0x4d13b3(_0x587fce); if (!_0x2faf3b) throw new Error('AI返回了无法识别的数据格式。'); } let _0xda33a6; if (_0x4cd20e && _0x296671) try { const _0x33568b = JSON[_0x5cbdf0(0x440)](_0x296671); if (_0x3e0571 === _0x5cbdf0(0x738)) _0x5cbdf0(0x5b2) !== _0x5cbdf0(0x27d) ? (_0xda33a6 = JSON['stringify'](_0x2faf3b), console[_0x5cbdf0(0xace)]('Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。')) : _0x4e5e09 = [..._0x3e4647, ..._0x2397e6]; else { if (_0x5cbdf0(0xb6f) !== _0x5cbdf0(0x86b)) { if (Array['isArray'](_0x33568b) && Array['isArray'](_0x2faf3b)) { const _0x40dd5f = _0x33568b[_0x5cbdf0(0x953)](_0x2faf3b); _0xda33a6 = JSON[_0x5cbdf0(0x98f)](_0x40dd5f), console[_0x5cbdf0(0xace)](_0x5cbdf0(0x386)); } else _0xda33a6 = JSON['stringify'](_0x2faf3b); } else _0x4c16d3[_0x5cbdf0(0x313)][_0x5cbdf0(0x272)] = _0x5cbdf0(0x643); } } catch (_0x473054) { _0xda33a6 = JSON[_0x5cbdf0(0x98f)](_0x2faf3b); } else _0xda33a6 = JSON[_0x5cbdf0(0x98f)](_0x2faf3b); await _0x146448(_0x2bf597, _0xda33a6), _0x296671 = _0xda33a6; } } } else 'rVxld' === _0x5cbdf0(0xb3a) ? console[_0x5cbdf0(0xace)](_0x5cbdf0(0x8ee) + _0x2bf597) : _0x24e4f7 = _0x1a6cf5['stringify'](_0x26b0c0); _0x440f80(_0x3e0571, _0xc66c97, _0x296671); } catch (_0x2755cb) { _0x5cbdf0(0x85c) === _0x5cbdf0(0x4e6) ? _0x70d083[_0x5cbdf0(0x24d)]({ 'time': _0x502b6e, 'text': _0x3a2034 }) : (console[_0x5cbdf0(0x5f0)](_0x5cbdf0(0xb57) + _0xc66c97 + _0x5cbdf0(0x530), _0x2755cb), _0x1efcba[_0x5cbdf0(0x9c2)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x2755cb[_0x5cbdf0(0xa53)] + _0x5cbdf0(0x721)); } } function _0x440f80(_0x5909e8, _0x1ea949, _0x583f7d) { const _0x26252f = _0x5f58e0; if ('sJLHr' === _0x26252f(0x6d4)) _0x3fdec6(_0x26252f(0x899) + _0x1b107e[_0x26252f(0xa53)]); else { const _0x5382d1 = _0x21051e(_0x299cce), _0x48c12d = document['getElementById']('snoop-app-view-container'); let _0x517cc8 = ''; if (!_0x583f7d) _0x517cc8 = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>'; else { if (_0x5909e8 === _0x26252f(0x5c9)) { if (_0x26252f(0x834) !== 'GlWym') _0x517cc8 = _0x26252f(0x61c) + _0x583f7d + _0x26252f(0x527); else { const _0x59ba17 = _0x387593[_0x26252f(0x8c3)] === _0x26252f(0x687) ? _0x26252f(0x7af) : '待办'; return _0x26252f(0x1c2) + _0x59ba17 + ']\x20' + _0x39e97a[_0x26252f(0x1f5)] + ':\x20' + _0xe8b598[_0x26252f(0x329)]; } } else try { if (_0x26252f(0x6ce) === _0x26252f(0x6ce)) { let _0x233473 = null; const _0xbdd176 = _0x583f7d['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x379d7a = _0xbdd176 ? _0xbdd176[0x1] : _0x583f7d; _0x233473 = JSON['parse'](_0x379d7a); const _0x5ef2d8 = _0x21051e(_0x299cce); switch (_0x5909e8) { case _0x26252f(0x392): _0x517cc8 = _0x2d1b95(_0x233473); break; case _0x26252f(0x738): _0x517cc8 = _0x25e163(_0x233473, _0x5ef2d8['name']); break; case _0x26252f(0x1e4): _0x517cc8 = _0x4fa486(_0x233473); break; case _0x26252f(0xade): _0x517cc8 = _0x50b1ee(_0x233473); break; case _0x26252f(0x873): _0x517cc8 = _0x2b2bf3(_0x233473); break; case 'wants': _0x517cc8 = _0x445e90(_0x233473); break; case _0x26252f(0x257): _0x517cc8 = _0x298995(_0x233473); break; case _0x26252f(0x5c9): _0x517cc8 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x583f7d + '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; break; default: _0x517cc8 = _0x26252f(0xae3) + JSON[_0x26252f(0x98f)](_0x233473, null, 0x2) + _0x26252f(0x9ce); } } else throw new _0x344202('在你那乱七八糟的文本里没找到“歌名”！'); } catch (_0x554c37) { _0x26252f(0x836) === _0x26252f(0x970) ? _0x397a3e['click']() : (console[_0x26252f(0x5f0)]('视奸内容解析失败:', _0x554c37), _0x517cc8 = '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>' + _0x583f7d + _0x26252f(0x9ce)); } } _0x48c12d[_0x26252f(0x9c2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>' + _0x1ea949 + _0x26252f(0x7f7) + _0x5382d1[_0x26252f(0x7d7)] + _0x26252f(0x476) + (_0x5909e8 === _0x26252f(0x5c9) ? _0x26252f(0x2e9) : _0x26252f(0x752)) + _0x26252f(0x479) + _0x517cc8 + _0x26252f(0x315); const _0x46f2e1 = _0x48c12d[_0x26252f(0x795)](_0x26252f(0x2d5)); _0x5909e8 === 'summary' && (_0x46f2e1[_0x26252f(0x313)]['padding'] = '0'); document[_0x26252f(0x653)]('snoop-app-back-btn')['addEventListener'](_0x26252f(0x4f4), () => { const _0x46738c = _0x26252f; _0x48c12d['style'][_0x46738c(0x272)] = 'none', document[_0x46738c(0x653)](_0x46738c(0x270))[_0x46738c(0x313)][_0x46738c(0x272)] = 'flex'; }); if (_0x5909e8 === _0x26252f(0x5c9)) document[_0x26252f(0x653)]('snoop-copy-summary-btn')[_0x26252f(0xacf)](_0x26252f(0x4f4), () => { const _0x5b289f = _0x26252f, _0x731ea4 = document['getElementById'](_0x5b289f(0x31d)); _0x731ea4[_0x5b289f(0x902)](), document[_0x5b289f(0xb1b)](_0x5b289f(0x6d3)), _0x5929aa(_0x5b289f(0x987)); }); else { if (_0x26252f(0x44f) !== _0x26252f(0x8c9)) document['getElementById']('snoop-app-refresh-btn')[_0x26252f(0xacf)]('click', async () => { const _0x477769 = _0x26252f; _0x477769(0x959) !== _0x477769(0x886) ? _0x87fe9f(_0x5909e8, _0x1ea949, !![]) : _0x49f2c3[_0x477769(0x5f0)]('加载视奸记忆失败\x20(' + _0x3ee7f6['id'] + _0x477769(0x5e2), _0x384d4f); }); else return; } _0x5909e8 === _0x26252f(0x738) && _0x48c12d[_0x26252f(0x6e4)]('.snoop-chat-item')[_0x26252f(0xa30)](_0x4233f5 => { const _0x3d45bb = _0x26252f; _0x3d45bb(0x840) === 'RHcma' ? _0x4233f5[_0x3d45bb(0xacf)](_0x3d45bb(0x4f4), () => { const _0xa6b426 = _0x3d45bb, _0x2472ce = JSON[_0xa6b426(0x440)](_0x4233f5[_0xa6b426(0x2c4)]['log'][_0xa6b426(0xac6)](/&quot;/g, '\x22')), _0x431932 = _0x4233f5[_0xa6b426(0x2c4)][_0xa6b426(0x76e)], _0x5c8cb8 = _0x4233f5[_0xa6b426(0x2c4)][_0xa6b426(0x746)]; _0x378f6c(_0x431932, _0x5c8cb8, _0x2472ce); }) : (_0x252b7f[_0x3d45bb(0x313)][_0x3d45bb(0x2b2)] = _0x3d45bb(0x95e), _0x30639f[_0x3d45bb(0x313)]['textShadow'] = _0x3d45bb(0x643)); }); } } function _0x4d13b3(_0x30b9ee) { const _0x49b97b = _0x5f58e0; if (_0x49b97b(0xa4e) !== 'NuTCy') { if (!_0x30b9ee || typeof _0x30b9ee !== _0x49b97b(0x4b6)) return null; const _0x4bc8ca = _0x30b9ee[_0x49b97b(0x87b)]()[_0x49b97b(0x334)]('\x0a'), _0x3733a2 = []; let _0x228f62 = null; for (const _0xd3679b of _0x4bc8ca) { const _0x598f15 = _0xd3679b[_0x49b97b(0x87b)](); if (_0x598f15['startsWith']('-\x20')) { _0x228f62 && _0x3733a2[_0x49b97b(0x24d)](_0x228f62); _0x228f62 = {}; const _0x7f24 = _0x598f15[_0x49b97b(0x650)](0x2), _0x3b5814 = _0x7f24[_0x49b97b(0x334)](/:\s(.+)/); if (_0x3b5814[_0x49b97b(0x8a0)] > 0x1) { if (_0x49b97b(0x852) !== 'EVDkQ') { let _0x5de988 = _0x1093c3[_0x49b97b(0x795)](_0x49b97b(0x400)); !_0x5de988 && (_0x5de988 = _0x561890[_0x49b97b(0x2da)](_0x49b97b(0x1f9)), _0x5de988[_0x49b97b(0x84e)] = _0x49b97b(0x674), _0x5de988[_0x49b97b(0x8f9)] = _0x49b97b(0x421), _0x1df98b[_0x49b97b(0x168)](_0x5de988)); } else { const _0x4b8a3b = _0x3b5814[0x0][_0x49b97b(0x87b)](), _0x14d0cf = _0x3b5814[0x1][_0x49b97b(0x87b)]()['replace'](/^"|"$/g, ''); _0x228f62[_0x4b8a3b] = _0x14d0cf; } } } else { if (_0x228f62 && _0x598f15) { if (_0x49b97b(0x95a) === _0x49b97b(0xaf9)) { if (!_0x3b8836['isArray'](_0x435b46)) return '<p>格式错误</p>'; if (_0x53247b[_0x49b97b(0x8a0)] === 0x0) return _0x49b97b(0x23c); return _0x37bda0['sort']((_0x11831a, _0x467707) => new _0x77f0a5(_0x467707[_0x49b97b(0x1af)]) - new _0x58b920(_0x11831a[_0x49b97b(0x1af)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0xbbac77[_0x49b97b(0x7d4)](_0x3f27be => _0x49b97b(0x384) + (_0x3f27be[_0x49b97b(0xab8)] || '未知地点') + _0x49b97b(0x206) + (_0x3f27be[_0x49b97b(0x443)] || '') + _0x49b97b(0x50a) + (_0x3f27be[_0x49b97b(0x1af)] || '') + _0x49b97b(0x317))[_0x49b97b(0x359)]('') + _0x49b97b(0x681); } else { const _0x9d36af = _0x598f15[_0x49b97b(0x334)](/:\s(.+)/); if (_0x9d36af[_0x49b97b(0x8a0)] > 0x1) { const _0x14fdee = _0x9d36af[0x0][_0x49b97b(0x87b)](), _0x33b88a = _0x9d36af[0x1][_0x49b97b(0x87b)]()[_0x49b97b(0xac6)](/^"|"$/g, ''); _0x228f62[_0x14fdee] = _0x33b88a; } } } } } return _0x228f62 && (_0x49b97b(0x327) === 'wFOFY' ? _0x48aa95 += '-\x20你曾经搜索过：“' + _0x3ac9b0[_0x49b97b(0x2e2)] + _0x49b97b(0x185) : _0x3733a2[_0x49b97b(0x24d)](_0x228f62)), _0x3733a2[_0x49b97b(0x8a0)] > 0x0 ? _0x3733a2 : null; } else _0x2b304f[_0x49b97b(0x673)]('badgeState'), _0x5ad47f[_0x49b97b(0x673)](_0x49b97b(0x467)), _0x4fbbc0(_0x49b97b(0x5e1)), _0x53060b(() => _0x4e89b6[_0x49b97b(0x2a5)](), 0x3e8); } function _0x378f6c(_0x2d934c, _0x3cb619, _0x2ebf20) { const _0x49e57c = _0x5f58e0, _0x3760ea = document[_0x49e57c(0x795)](_0x49e57c(0x346)), _0x275762 = document['querySelector'](_0x49e57c(0x87c)); let _0x2b782a = _0x49e57c(0x3c9); if (!_0x2ebf20 || _0x2ebf20[_0x49e57c(0x8a0)] === 0x0) _0x2b782a += _0x49e57c(0xb37); else { if (_0x49e57c(0x487) === _0x49e57c(0x8b2)) { const _0x1c17d2 = _0x446c4a[_0x49e57c(0xa26)]['find'](_0x6b5f2d => _0x6b5f2d['id'] === _0x3fe187); _0x1c17d2 && (_0x1c17d2[_0x49e57c(0x7d7)] = _0x4f93a6, _0x1c17d2[_0x49e57c(0x70c)] = _0x400eff, _0x1c17d2[_0x49e57c(0x42a)] = _0x5353bd); } else _0x2ebf20[_0x49e57c(0xa30)](_0x307751 => { const _0x1f65e2 = _0x49e57c, _0x20bd04 = _0x307751['sender'] === _0x1f65e2(0x50e), _0x1d4d18 = _0x20bd04 ? _0x3cb619 ? _0x3cb619[0x0] : '?' : _0x2d934c ? _0x2d934c[0x0] : '?'; _0x2b782a += _0x1f65e2(0x18c) + (_0x20bd04 ? _0x1f65e2(0x901) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x20bd04 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x1d4d18 + '</div>' : '') + _0x1f65e2(0x94c) + (_0x20bd04 ? _0x1f65e2(0x901) : 'ai') + _0x1f65e2(0x1b4) + _0x307751['content'] + _0x1f65e2(0xb5b) + (_0x20bd04 ? _0x1f65e2(0x41c) + _0x1d4d18 + _0x1f65e2(0x681) : '') + _0x1f65e2(0x2ae); }); } _0x2b782a += _0x49e57c(0x681), _0x3760ea['innerHTML'] = _0x2b782a, _0x3760ea['scrollTop'] = _0x3760ea[_0x49e57c(0x244)], _0x275762[_0x49e57c(0x9c2)] = _0x49e57c(0xb81) + _0x2d934c + _0x49e57c(0x2cd), document[_0x49e57c(0x653)]('snoop-log-back-btn')[_0x49e57c(0xacf)](_0x49e57c(0x4f4), () => { const _0x245b06 = _0x49e57c; _0x87fe9f(_0x245b06(0x738), '聊天'); }), !document[_0x49e57c(0x653)](_0x49e57c(0x9dc)) && document[_0x49e57c(0x8be)][_0x49e57c(0x8e4)](_0x49e57c(0x819), _0x49e57c(0x462)); } function _0x4d13b3(_0x3237d7) { const _0x347537 = _0x5f58e0; if (_0x347537(0x694) !== _0x347537(0x68c)) { if (!_0x3237d7 || typeof _0x3237d7 !== 'string') return null; const _0x312d18 = _0x3237d7['trim']()[_0x347537(0x334)]('\x0a'), _0x48da67 = []; let _0x5d0476 = null; for (const _0x1fc51c of _0x312d18) { const _0x2e3f86 = _0x1fc51c[_0x347537(0x87b)](); if (_0x2e3f86['startsWith']('-\x20')) { if (_0x347537(0x239) !== 'wQIkX') { _0x5d0476 && _0x48da67['push'](_0x5d0476); _0x5d0476 = {}; const _0x99bf84 = _0x2e3f86['substring'](0x2), _0x373f6d = _0x99bf84[_0x347537(0x334)](/:\s(.+)/); if (_0x373f6d['length'] > 0x1) { if (_0x347537(0xb18) === _0x347537(0x860)) _0x2d79dc[_0x347537(0xb7b)]['remove'](_0x347537(0x322)), _0x16f289[_0x347537(0x5c8)] = null, _0x32cfd7[_0x347537(0x5c8)] = null, _0xcc87f2['onclick'] = null, _0x5b3c85['removeEventListener']('keydown', _0x3e5ec8), _0xde45fa(_0xdb434d); else { const _0x597ae6 = _0x373f6d[0x0][_0x347537(0x87b)](), _0x5bbaac = _0x373f6d[0x1][_0x347537(0x87b)]()[_0x347537(0xac6)](/^"|"$/g, ''); _0x5d0476[_0x597ae6] = _0x5bbaac; } } } else { if (_0x2f64a7[_0x347537(0xaae)] === 'assistant') { const _0x32884f = _0x1b6f81[_0x347537(0x3ad)][_0xa18544]; _0x32884f && _0x32884f[_0x347537(0x8a0)] > 0x0 && (_0x495416 = _0x32884f['at'](-0x1)); } else _0x5ec237 = { 'speaker': _0x307c1e['name'], 'line': _0x447729[_0x347537(0x329)], 'emotion': _0x347537(0xb1a) }; } } else { if (_0x5d0476 && _0x2e3f86) { const _0x50b20d = _0x2e3f86[_0x347537(0x334)](/:\s(.+)/); if (_0x50b20d[_0x347537(0x8a0)] > 0x1) { const _0x279b2e = _0x50b20d[0x0][_0x347537(0x87b)](), _0x578e6b = _0x50b20d[0x1][_0x347537(0x87b)]()['replace'](/^"|"$/g, ''); _0x5d0476[_0x279b2e] = _0x578e6b; } } } } return _0x5d0476 && _0x48da67[_0x347537(0x24d)](_0x5d0476), _0x48da67[_0x347537(0x8a0)] > 0x0 ? _0x48da67 : null; } else { if (_0x54721a[_0x347537(0x8c2)] === 'Escape') _0x294705(null); _0x5ce15f[_0x347537(0x8c2)] === _0x347537(0x4de) && (_0x5de126[_0x347537(0x4d1)](), _0x455690()); } } async function _0x5346cc(_0x16906d) { const _0x59cf15 = _0x5f58e0; if (!_0x16906d) return ''; const _0x5507e0 = [{ 'id': _0x59cf15(0x392), 'name': '相册' }, { 'id': _0x59cf15(0x738), 'name': _0x59cf15(0xb6c) }, { 'id': _0x59cf15(0x1e4), 'name': _0x59cf15(0xac7) }, { 'id': _0x59cf15(0xade), 'name': '备忘录' }, { 'id': _0x59cf15(0x873), 'name': _0x59cf15(0x1e7) }, { 'id': _0x59cf15(0xa22), 'name': _0x59cf15(0x551) }, { 'id': _0x59cf15(0x257), 'name': _0x59cf15(0x51d) }]; let _0x3a7030 = ''; for (const _0x26f2a4 of _0x5507e0) { if (_0x59cf15(0x6c6) === _0x59cf15(0x6c6)) try { const _0x3356d8 = _0x59cf15(0x8a6) + _0x16906d + '_' + _0x26f2a4['id'], _0xa4706c = await _0x4f8ac7(_0x3356d8); if (_0xa4706c) { if ('SEGou' === 'SEGou') { const _0x2de7ad = _0xa4706c['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x5ad158 = _0x2de7ad ? _0x2de7ad[0x1][_0x59cf15(0x87b)]() : _0xa4706c[_0x59cf15(0x87b)](); if (!_0x5ad158) continue; let _0x4e18d5 = null; try { _0x59cf15(0x696) === 'PbBgN' ? _0x4e18d5 = JSON[_0x59cf15(0x440)](_0x5ad158) : _0x601741[_0x59cf15(0x5f0)](_0x59cf15(0x526) + _0x1f2b7e + ':', _0x4df485); } catch (_0x38c12a) { if (_0x59cf15(0x610) === _0x59cf15(0x4ef)) { _0x26209a(_0x59cf15(0x2f4)); return; } else { console[_0x59cf15(0x16a)](_0x59cf15(0x923) + _0x26f2a4['id'] + _0x59cf15(0x938), _0x38c12a['message']); try { if (_0x59cf15(0x45c) !== _0x59cf15(0x45c)) _0x5c3d09['classList'][_0x59cf15(0x428)](_0x59cf15(0x2c1)); else { _0x4e18d5 = _0x4d13b3(_0x5ad158); if (!_0x4e18d5) { if (_0x59cf15(0x37a) === 'NRDwO') { const _0x508fe1 = _0x24e718(_0x48200e['activeChatId']); _0x63d8a9 = _0x508fe1['avatar'] || _0x2f59ab; } else throw new Error(_0x59cf15(0x540)); } console[_0x59cf15(0xace)](_0x59cf15(0x824) + _0x26f2a4['id'] + _0x59cf15(0x663)); } } catch (_0x160e90) { throw _0x38c12a; } } } if (Array[_0x59cf15(0xb41)](_0x4e18d5) && _0x4e18d5[_0x59cf15(0x8a0)] > 0x0) { if (_0x59cf15(0x175) === _0x59cf15(0x175)) { _0x3a7030 === '' && (_0x59cf15(0x455) === _0x59cf15(0x377) ? (_0x1c1515(), _0x8970[_0x59cf15(0x41b)] = 0x64) : _0x3a7030 += _0x59cf15(0xa34)); _0x3a7030 += _0x59cf15(0x16d) + _0x26f2a4['name'] + '\x0a'; switch (_0x26f2a4['id']) { case _0x59cf15(0x392): _0x4e18d5['forEach'](_0x32296b => { const _0x273a12 = _0x59cf15; _0x3a7030 += _0x273a12(0x300) + _0x32296b[_0x273a12(0x3ed)] + _0x273a12(0x185); }); break; case 'whispers': _0x4e18d5[_0x59cf15(0xa30)](_0x36e6b4 => { const _0x4fa465 = _0x59cf15; if (_0x4fa465(0x284) !== _0x4fa465(0x284)) { _0x224140[_0x4fa465(0x8f9)] = _0x4fa465(0x8f1); return; } else _0x3a7030 += _0x4fa465(0x9d3) + _0x36e6b4['contact_name'] + _0x4fa465(0x502) + _0x36e6b4[_0x4fa465(0x84b)] + '”。\x0a', _0x36e6b4[_0x4fa465(0xace)] && Array[_0x4fa465(0xb41)](_0x36e6b4['log']) && ('KqHNg' === _0x4fa465(0x4d0) ? (_0xfca52b(![]), _0x1cd94f[_0x4fa465(0xa4b)]['value'] = '') : (_0x3a7030 += _0x4fa465(0x80d), _0x36e6b4[_0x4fa465(0xace)]['forEach'](_0x16093e => { const _0x473708 = _0x4fa465; if (_0x473708(0x616) === 'Xcrvk') _0x5af2d1 = _0x5330e3; else { const _0x4a6ee9 = _0x16093e[_0x473708(0x311)] === _0x473708(0x50e) ? '你' : _0x36e6b4['contact_name']; _0x3a7030 += _0x473708(0x1b5) + _0x4a6ee9 + ':\x20' + _0x16093e[_0x473708(0x329)] + '\x0a'; } }))); }); break; case _0x59cf15(0x1e4): _0x4e18d5[_0x59cf15(0xa30)](_0xc6e832 => { const _0x436196 = _0x59cf15; _0x436196(0x431) === _0x436196(0x431) ? _0x3a7030 += _0x436196(0x982) + _0xc6e832[_0x436196(0x2e2)] + '”。\x0a' : _0x4945da[_0x436196(0x313)]['textShadow'] = ''; }); break; case _0x59cf15(0xade): _0x4e18d5[_0x59cf15(0xa30)](_0x130377 => { const _0x4d261e = _0x59cf15; if (_0x4d261e(0x2ab) === _0x4d261e(0x2ab)) _0x3a7030 += _0x4d261e(0xb4c) + _0x130377[_0x4d261e(0x869)] + _0x4d261e(0x611) + _0x130377['content'][_0x4d261e(0xac6)](/\n/g, '\x20') + _0x4d261e(0x185); else return _0x3cb0d4[_0x4d261e(0x46a)](0x0, 0x9); }); break; case _0x59cf15(0x873): _0x4e18d5[_0x59cf15(0xa30)](_0x34e4d6 => { const _0x434fff = _0x59cf15; if ('sXpPB' !== _0x434fff(0x767)) { const _0x1dccff = _0x58ee11['userProfiles']['find'](_0x11c4d5 => _0x11c4d5['id'] === _0x598dd0); if (_0x1dccff) _0x2fddee['assign'](_0x1dccff, _0x2663ec); } else _0x3a7030 += _0x434fff(0x9fc) + _0x34e4d6[_0x434fff(0x1d7)] + '”，里面有\x20' + _0x34e4d6[_0x434fff(0x312)][_0x434fff(0x359)]('、') + '。\x0a'; }); break; case _0x59cf15(0xa22): _0x4e18d5[_0x59cf15(0xa30)](_0x19f975 => { const _0x341a29 = _0x59cf15; _0x3a7030 += '-\x20你在“' + _0x19f975[_0x341a29(0x581)] + _0x341a29(0x7a8) + _0x19f975[_0x341a29(0x21b)] + _0x341a29(0x185); }); break; case _0x59cf15(0x257): _0x4e18d5[_0x59cf15(0xa30)](_0x29e3ba => { const _0x78b411 = _0x59cf15; _0x3a7030 += '-\x20你最近去过：“' + _0x29e3ba[_0x78b411(0xab8)] + _0x78b411(0x1bc) + _0x29e3ba[_0x78b411(0x443)] + _0x78b411(0x185); }); break; default: _0x4e18d5[_0x59cf15(0xa30)](_0x1b696d => { _0x3a7030 += '-\x20' + JSON['stringify'](_0x1b696d) + '\x0a'; }); break; } } else _0x3535fc[_0x59cf15(0x5f0)](_0x59cf15(0xa3f), _0x40b16f), _0xd1d2bc(_0x59cf15(0xb0a) + _0xcd14fa[_0x59cf15(0xa53)]); } } else _0x44f3f6(), _0x1c79e7('accounting', _0x59cf15(0x6fe)); } } catch (_0x587915) { console[_0x59cf15(0x5f0)](_0x59cf15(0x691) + _0x26f2a4['id'] + _0x59cf15(0x5e2), _0x587915); } else { const _0x48777b = _0x84e207[_0x59cf15(0x795)]('.music-post-song-card'); _0x48777b && _0x48777b[_0x59cf15(0xacf)](_0x59cf15(0x4f4), function () { const _0xe5ccc0 = _0x59cf15, _0x27a58a = { 'id': _0x12296d['id'], 'url': _0x4ca8e4[_0xe5ccc0(0xa36)] }; _0x50afcf(this, _0x27a58a); }); } } return _0x3a7030; } function _0x2d1b95(_0x53518a) { const _0x471e40 = _0x5f58e0; if (!Array[_0x471e40(0xb41)](_0x53518a)) return _0x471e40(0x2bf); if (_0x53518a[_0x471e40(0x8a0)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>'; return _0x471e40(0x15d) + _0x53518a[_0x471e40(0x7d4)]((_0x6462f1, _0x37890c) => _0x471e40(0x403) + (_0x37890c < _0x53518a[_0x471e40(0x8a0)] - 0x1 ? _0x471e40(0xaad) : '') + _0x471e40(0x338) + (_0x6462f1[_0x471e40(0x3ed)] || _0x471e40(0x96e)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x6462f1[_0x471e40(0x1af)] || '') + _0x471e40(0x2ba))['join']('') + _0x471e40(0x681); } function _0x25e163(_0x249667, _0x29f395) { const _0xabe895 = _0x5f58e0; if (_0xabe895(0x59e) === _0xabe895(0x376)) { if (_0x7c2e5f) { const _0x2d6fb6 = _0x54bc74(_0x58df1f[_0xabe895(0x5f2)]); _0x2d6fb6 && (delete _0x2d6fb6['spriteTransform'], _0x44f47b(), _0x4cc720(_0x2d6fb6['id'], 'normal'), _0x123735(_0xabe895(0x9c0)), _0x1a6da8(!![])); } } else { if (!Array['isArray'](_0x249667) || _0x249667['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>'; return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x249667[_0xabe895(0x7d4)]((_0x2c6a50, _0x519d48) => { const _0x67772c = _0xabe895; if ('WLioT' === _0x67772c(0x8a3)) _0x2b449a += _0x67772c(0x297); else { const _0x53d264 = JSON[_0x67772c(0x98f)](_0x2c6a50['log'] || [])['replace'](/'/g, _0x67772c(0xab4))[_0x67772c(0xac6)](/"/g, _0x67772c(0x9f9)), _0x358f7b = _0x2c6a50[_0x67772c(0x494)] || _0x67772c(0x9e5); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x519d48 < _0x249667['length'] - 0x1 ? _0x67772c(0xaad) : '') + _0x67772c(0x436) + _0x53d264 + _0x67772c(0x829) + _0x358f7b + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x29f395 + _0x67772c(0x28a) + _0x358f7b[_0x67772c(0x724)](0x0) + _0x67772c(0x4bf) + _0x358f7b + _0x67772c(0x7a9) + (_0x2c6a50['last_message_preview'] || '') + _0x67772c(0x4f5); } })[_0xabe895(0x359)]('') + '</div>'; } } function _0x4fa486(_0x2912ea) { const _0x1c107c = _0x5f58e0; if (_0x1c107c(0x7ca) !== _0x1c107c(0x7ca)) throw new _0x5714c1(_0x1c107c(0x2a1) + _0x3f37a1); else { if (!Array[_0x1c107c(0xb41)](_0x2912ea)) return _0x1c107c(0x2bf); if (_0x2912ea[_0x1c107c(0x8a0)] === 0x0) return _0x1c107c(0x739); return _0x2912ea['sort']((_0x5129f2, _0x55fd55) => new Date(_0x55fd55[_0x1c107c(0x1af)]) - new Date(_0x5129f2[_0x1c107c(0x1af)])), _0x1c107c(0x15d) + _0x2912ea['map']((_0x343f98, _0x16c28b) => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20' + (_0x16c28b < _0x2912ea[_0x1c107c(0x8a0)] - 0x1 ? _0x1c107c(0xaad) : '') + _0x1c107c(0x5ea) + (_0x343f98[_0x1c107c(0x2e2)] || '未知搜索') + _0x1c107c(0x71e) + (_0x343f98[_0x1c107c(0x4b0)] || _0x1c107c(0xb02)) + _0x1c107c(0x262) + (_0x343f98[_0x1c107c(0x1af)] || '') + _0x1c107c(0xaf3))[_0x1c107c(0x359)]('') + _0x1c107c(0x681); } } function _0x50b1ee(_0xa65bdb) { const _0x3c6199 = _0x5f58e0; if (!Array[_0x3c6199(0xb41)](_0xa65bdb)) return '<p>格式错误</p>'; if (_0xa65bdb[_0x3c6199(0x8a0)] === 0x0) return _0x3c6199(0x92f); return _0xa65bdb[_0x3c6199(0x9ec)]((_0x45001c, _0xf5484f) => new Date(_0xf5484f['last_edited']) - new Date(_0x45001c[_0x3c6199(0xa10)])), _0xa65bdb[_0x3c6199(0x7d4)](_0x4348e0 => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + (_0x4348e0[_0x3c6199(0x869)] || _0x3c6199(0x568)) + _0x3c6199(0x321) + (_0x4348e0['content'] || '') + _0x3c6199(0x936) + (_0x4348e0[_0x3c6199(0xa10)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x3c6199(0x359)](''); } function _0x2b2bf3(_0x1f7bb3) { const _0x357bd8 = _0x5f58e0; if (_0x357bd8(0x40c) !== _0x357bd8(0x40c)) { _0x4f1e4e(_0x357bd8(0x864)); return; } else { if (!Array[_0x357bd8(0xb41)](_0x1f7bb3)) return _0x357bd8(0x2bf); if (_0x1f7bb3[_0x357bd8(0x8a0)] === 0x0) return _0x357bd8(0xa56); return _0x1f7bb3[_0x357bd8(0x9ec)]((_0x468f2b, _0x5a5fda) => new Date(_0x5a5fda[_0x357bd8(0x1af)]) - new Date(_0x468f2b[_0x357bd8(0x1af)])), _0x1f7bb3['map'](_0x46598e => { const _0xb6bc6b = _0x357bd8, _0x1af05a = (_0x46598e[_0xb6bc6b(0x312)] || [])['map'](_0x4845ce => _0xb6bc6b(0x2f3) + _0x4845ce + _0xb6bc6b(0x5dc))[_0xb6bc6b(0x359)](''); return '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>' + (_0x46598e[_0xb6bc6b(0x1d7)] || '未知餐厅') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>' + (_0x46598e['timestamp'] || '') + _0xb6bc6b(0x205) + (_0x46598e[_0xb6bc6b(0x4da)] || _0xb6bc6b(0x60d)) + _0xb6bc6b(0x2aa) + _0x1af05a + _0xb6bc6b(0x756) + (_0x46598e[_0xb6bc6b(0x541)] || 0x0)[_0xb6bc6b(0x395)](0x2) + _0xb6bc6b(0x2cc); })['join'](''); } } function _0x445e90(_0xe1b81c) { const _0x340c26 = _0x5f58e0; if (_0x340c26(0x582) === 'SaJFg') { if (!Array[_0x340c26(0xb41)](_0xe1b81c)) return '<p>格式错误</p>'; if (_0xe1b81c[_0x340c26(0x8a0)] === 0x0) return _0x340c26(0x226); return _0xe1b81c[_0x340c26(0x9ec)]((_0x22379c, _0x4796e8) => new Date(_0x4796e8['timestamp']) - new Date(_0x22379c[_0x340c26(0x1af)])), _0xe1b81c['map'](_0xc91a2d => _0x340c26(0x412) + (_0xc91a2d[_0x340c26(0x581)] || _0x340c26(0x233)) + _0x340c26(0x8f2) + (_0xc91a2d[_0x340c26(0x1af)] || '') + _0x340c26(0x3f0) + (_0xc91a2d[_0x340c26(0x21b)] || _0x340c26(0x68f)) + _0x340c26(0x996) + (_0xc91a2d[_0x340c26(0xa11)] || 0x0)[_0x340c26(0x395)](0x2) + _0x340c26(0x6c5))['join'](''); } else _0xb86b61 = _0x4af38a[_0x340c26(0x38c)]['find'](_0x456266 => _0x456266['id'] === _0x10d93d[_0x340c26(0x1d3)]) || _0x1bccb3[_0x340c26(0x38c)][0x0]; } function _0x298995(_0x495e2f) { const _0x2d9920 = _0x5f58e0; if (_0x2d9920(0x1c0) === _0x2d9920(0xa2e)) _0x23833c[_0x2d9920(0x313)][_0x2d9920(0x956)] = _0x2d9920(0x8f5) + _0x298507[_0x2d9920(0x264)](_0x358db5) + ')', _0x7bec50[_0x2d9920(0x313)]['backgroundSize'] = 'cover', _0x48e577[_0x2d9920(0x313)][_0x2d9920(0x6e7)] = 'center'; else { if (!Array[_0x2d9920(0xb41)](_0x495e2f)) return _0x2d9920(0x2bf); if (_0x495e2f[_0x2d9920(0x8a0)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>'; return _0x495e2f['sort']((_0x432fda, _0x14f045) => new Date(_0x14f045['timestamp']) - new Date(_0x432fda[_0x2d9920(0x1af)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x495e2f[_0x2d9920(0x7d4)](_0x122bc9 => _0x2d9920(0x384) + (_0x122bc9[_0x2d9920(0xab8)] || '未知地点') + _0x2d9920(0x206) + (_0x122bc9[_0x2d9920(0x443)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>' + (_0x122bc9[_0x2d9920(0x1af)] || '') + _0x2d9920(0x317))[_0x2d9920(0x359)]('') + _0x2d9920(0x681); } } async function _0x3a8351(_0x34bdc5, _0x523eab, _0x4d93d7 = null) { const _0x2ca604 = _0x5f58e0, _0x325d5c = _0x21051e(_0x523eab), _0x4c3da9 = _0x1884b1['chats']['find'](_0x312020 => _0x312020[_0x2ca604(0x8c3)] === _0x2ca604(0xaa7) && _0x312020[_0x2ca604(0x3d5)][_0x2ca604(0x1ac)](_0x523eab)), _0x3737e9 = _0x4079e8(_0x4c3da9?.['id'] || _0x1884b1['activeChatId']); if (!_0x325d5c) throw new Error(_0x2ca604(0x23d)); const { omniText: _0x25eb46 } = _0x1c528d(_0x523eab); let _0x9925d4 = ''; const _0x270606 = new Date(); let _0x356aea = null, _0x1a146b = '无'; if (_0x4d93d7) { if ('bgvsV' === _0x2ca604(0x659)) _0x179a7f['src'] = _0x12ab70[_0x2ca604(0x264)](_0x475bea), _0x55bb0e[_0x2ca604(0x313)][_0x2ca604(0x272)] = _0x2ca604(0x8b0), _0x3f182e[_0x2ca604(0x313)][_0x2ca604(0x639)] = _0x2ca604(0x643); else try { if (_0x2ca604(0x43e) !== _0x2ca604(0x43e)) _0x3c7b2b[_0x2ca604(0x534)] = ![], _0x44ebcf['textContent'] = '获取'; else { let _0x284e58; try { _0x284e58 = JSON[_0x2ca604(0x440)](_0x4d93d7); } catch (_0x16c159) { if ('ttSRV' !== _0x2ca604(0x419)) { const _0x5410de = _0x33860b(); _0x5410de && _0x5410de[_0x2ca604(0x8bb)] && _0x5410de['activeListenSession'][_0x2ca604(0x50c)] && (_0x419b63['style'][_0x2ca604(0x272)] = _0x2ca604(0xac5), _0x512a10(() => _0x5c966e['classList'][_0x2ca604(0x428)](_0x2ca604(0x322)), 0xa)); } else _0x284e58 = _0x4d13b3(_0x4d93d7); } if (Array[_0x2ca604(0xb41)](_0x284e58) && _0x284e58[_0x2ca604(0x8a0)] > 0x0) { if ('fnQgG' !== _0x2ca604(0x34a)) { const _0x2f8bcc = _0x284e58[_0x2ca604(0x7d4)](_0x507c27 => new Date(_0x507c27[_0x2ca604(0x1af)] || _0x507c27[_0x2ca604(0xa10)]))[_0x2ca604(0x776)](_0x2e7602 => !isNaN(_0x2e7602)); _0x2f8bcc[_0x2ca604(0x8a0)] > 0x0 && (_0x356aea = new Date(Math[_0x2ca604(0x19f)][_0x2ca604(0x499)](null, _0x2f8bcc)), _0x1a146b = _0x356aea[_0x2ca604(0x40a)]('zh-CN', { 'dateStyle': _0x2ca604(0x707), 'timeStyle': _0x2ca604(0xa5a) })); } else _0x2534c0(_0x2ca604(0x950)); } } } catch (_0x1aff96) { console['warn'](_0x2ca604(0xb0d), _0x1aff96); } } const _0x28ad52 = _0x5018f9(_0x523eab); _0x9925d4 = _0x2ca604(0x7cd), _0x9925d4 += _0x2ca604(0xa15) + _0x270606['toLocaleString'](_0x2ca604(0x567), { 'dateStyle': _0x2ca604(0xb4a), 'timeStyle': 'short' }) + '\x0a'; if (_0x28ad52) { if (_0x2ca604(0xa48) === _0x2ca604(0xa48)) { const _0x235012 = new Date(_0x28ad52['timestamp']), _0x35dffa = _0x68ddbc(_0x235012); _0x9925d4 += _0x2ca604(0x76b) + _0x35dffa + '\x0a'; const _0x48a930 = _0x270606[_0x2ca604(0x65b)](), _0xfb978d = _0x235012[_0x2ca604(0x65b)](), _0x3a763e = new Date(); _0x3a763e['setDate'](_0x270606['getDate']() - 0x1); const _0x8703a4 = _0x3a763e[_0x2ca604(0x65b)](); if (_0x48a930 === _0xfb978d) { const _0x509f2d = (_0x270606 - _0x235012) / (0x3e8 * 0x3c); _0x9925d4 += _0x2ca604(0x48f); } else { if (_0x8703a4 === _0xfb978d) _0x9925d4 += _0x2ca604(0x399); else { if (_0x2ca604(0x967) !== 'WUxji') { const _0x5ce6ab = _0xd3df8[_0x2ca604(0x940)][_0x2ca604(0x6f9)](_0x14ef71 => _0x14ef71[_0x2ca604(0x8bb)] && _0x14ef71['activeListenSession'][_0x2ca604(0x50c)]); _0x5ce6ab && (_0x5ce6ab[_0x2ca604(0x8bb)] = null, _0x1dce59(), _0x3e6700('同步已断开。'), _0x3361ae(), _0x4deeb6[_0x2ca604(0xb7b)][_0x2ca604(0x344)](_0x2ca604(0x322)), _0x55feab(() => _0x2befc5[_0x2ca604(0x313)][_0x2ca604(0x272)] = _0x2ca604(0x643), 0x12c)); } else { const _0x38aebb = Math[_0x2ca604(0x725)]((_0x270606 - _0x235012) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x9925d4 += _0x2ca604(0xb3e) + _0x38aebb + _0x2ca604(0x7ba); } } } } else { if (_0x18b418[_0x2ca604(0xaae)] === _0x2ca604(0x901) && _0x4e5288[_0x2ca604(0x3bf)]) return { 'role': _0x2ca604(0x901), 'content': [{ 'type': _0x2ca604(0x252), 'text': _0x479bd5[_0x2ca604(0x329)] || '\x20' }, { 'type': _0x2ca604(0xa47), 'image_url': { 'url': _0x1bd1e1[_0x2ca604(0x3bf)], 'detail': _0x2ca604(0x914) } }] }; return { 'role': _0x51e52a[_0x2ca604(0xaae)], 'content': _0x33f3bc[_0x2ca604(0x329)] }; } } else _0x9925d4 += _0x2ca604(0xa78); let _0x58c22a = '', _0x55d4ca = ''; _0x4d93d7 ? (_0x58c22a = _0x2ca604(0x79d), _0x55d4ca = _0x2ca604(0x463) + _0x4d93d7 + _0x2ca604(0x34c)) : _0x58c22a = _0x2ca604(0x4c8); const _0x469c28 = { 'gallery': _0x2ca604(0x52b), 'whispers': _0x2ca604(0x8db), 'abyss': _0x2ca604(0x91a), 'fragments': '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'bites': _0x2ca604(0x72f), 'wants': _0x2ca604(0x854), 'footprints': _0x2ca604(0xa16) }, _0x3c8379 = _0x469c28[_0x34bdc5] || _0x2ca604(0x2db) + _0x34bdc5 + _0x2ca604(0x78e); let _0x1c254a = ''; if (_0x325d5c['linkedWorldBookIds'] && _0x325d5c[_0x2ca604(0x99b)][_0x2ca604(0x8a0)] > 0x0) { const _0x36ee9c = _0x325d5c[_0x2ca604(0x99b)]['map'](_0x30afa3 => _0x1884b1[_0x2ca604(0x562)]['find'](_0x208207 => _0x208207['id'] === _0x30afa3))[_0x2ca604(0x776)](Boolean)[_0x2ca604(0x7d4)](_0x1163b4 => _0x2ca604(0x36f) + _0x1163b4[_0x2ca604(0x7d7)] + '\x0a' + _0x1163b4[_0x2ca604(0x329)])[_0x2ca604(0x359)](''); _0x36ee9c && (_0x2ca604(0x3db) === _0x2ca604(0x2f2) ? _0x3aaca7 = _0x424bb0[_0x2ca604(0x38c)][_0x2ca604(0x6f9)](_0x19929e => _0x19929e['id'] === _0x3040a8[_0x2ca604(0x1d3)]) : _0x1c254a = _0x2ca604(0x8ce) + _0x36ee9c); } const _0x19e1ce = '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“' + _0x325d5c[_0x2ca604(0x7d7)] + '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“' + _0x325d5c['name'] + '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“' + _0x3737e9[_0x2ca604(0x7d7)] + _0x2ca604(0x5c1) + _0x1a146b + _0x2ca604(0x991) + _0x270606[_0x2ca604(0x40a)]('zh-CN', { 'dateStyle': _0x2ca604(0xb4a), 'timeStyle': _0x2ca604(0xa5a) }) + _0x2ca604(0x566) + _0x325d5c[_0x2ca604(0x7d7)] + _0x2ca604(0x72b) + _0x325d5c[_0x2ca604(0x370)] + '\x0a' + _0x1c254a + '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20' + _0x3737e9['name'] + _0x2ca604(0x72b) + _0x3737e9[_0x2ca604(0x370)] + _0x2ca604(0x8f0) + _0x25eb46 + '\x0a' + _0x55d4ca + _0x2ca604(0xb82) + _0x58c22a + '\x0a' + _0x3c8379 + _0x2ca604(0x5c7), _0x55f6e3 = [{ 'role': _0x2ca604(0xa40), 'content': _0x19e1ce }]; _0x55f6e3['push']({ 'role': _0x2ca604(0x901), 'content': _0x2ca604(0x25e) }); const _0x17a095 = await _0x286894(_0x55f6e3, { 'json': !![] }); return _0x17a095; } async function _0x33d26d(_0x35641d) { const _0x2f7309 = _0x5f58e0; if (_0x2f7309(0x475) === _0x2f7309(0x475)) { const _0x152f53 = _0x21051e(_0x35641d); if (!_0x152f53) throw new Error(_0x2f7309(0x355)); _0x1d9e54(!![], _0x2f7309(0xb06)); const _0x184fcc = [_0x2f7309(0x392), _0x2f7309(0x738), _0x2f7309(0x1e4), _0x2f7309(0xade), _0x2f7309(0x873), 'wants', _0x2f7309(0x257)]; let _0x58881d = {}; await Promise['all'](_0x184fcc[_0x2f7309(0x7d4)](async _0x4aec09 => { const _0x1b1603 = _0x2f7309; if (_0x1b1603(0x6e6) !== 'bdmxo') { const _0x1aece7 = 'snoop_' + _0x35641d + '_' + _0x4aec09, _0x49b743 = await _0x4f8ac7(_0x1aece7); if (_0x49b743) { if (_0x1b1603(0x887) === _0x1b1603(0x887)) try { _0x58881d[_0x4aec09] = JSON[_0x1b1603(0x440)](_0x49b743); } catch (_0x4f9adb) { } else _0x44dae1[_0x1b1603(0x5f0)](_0x1b1603(0x983), _0x1efc80); } } else _0x5974d9(_0x1b1603(0x2d0)), _0x22b11d(() => { const _0x546b7b = _0x1b1603; _0x3a3881(_0x546b7b(0x842), _0x546b7b(0x6fe)), _0xe9f55d(() => _0x51dcb3(), 0x64); }, 0x6a4); })); if (Object[_0x2f7309(0x75d)](_0x58881d)[_0x2f7309(0x8a0)] === 0x0) { if (_0x2f7309(0x3df) === _0x2f7309(0x3df)) return _0x2f7309(0x695); else { const _0x30f722 = _0x4bbe0b[_0x2f7309(0x653)](_0x2f7309(0x606)), _0x4d2d0d = _0x30f722[_0x2f7309(0x6e4)](_0x2f7309(0x976)), _0x85b20a = _0x58285c[_0x2f7309(0x795)](_0x2f7309(0x47e)); if (_0x4d2d0d[_0x2f7309(0x8a0)] === 0x0) _0x85b20a[_0x2f7309(0x8f9)] = _0x2f7309(0x4aa); else _0x4d2d0d[_0x2f7309(0x8a0)] > 0x2 ? _0x85b20a[_0x2f7309(0x8f9)] = _0x2f7309(0x20e) + _0x4d2d0d[_0x2f7309(0x8a0)] + '\x20项' : _0x85b20a[_0x2f7309(0x8f9)] = _0x1e3091[_0x2f7309(0x5a1)](_0x4d2d0d)[_0x2f7309(0x7d4)](_0x2cb777 => _0x2cb777['parentElement'][_0x2f7309(0x8f9)][_0x2f7309(0x87b)]())[_0x2f7309(0x359)]('、'); } } const _0x1f0d10 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x152f53['name'] + _0x2f7309(0x55c), _0x517e99 = [{ 'role': _0x2f7309(0xa40), 'content': _0x1f0d10 }, { 'role': _0x2f7309(0x901), 'content': JSON[_0x2f7309(0x98f)](_0x58881d, null, 0x2) }]; _0x1d9e54(!![], '书记官正在奋笔疾书...'); const _0x126efe = await _0x286894(_0x517e99); return _0x126efe || _0x2f7309(0x80b); } else { const _0x3fd7eb = _0x492907[_0x2f7309(0x6f9)](_0x2e162e => _0x2e162e['name'] === _0x263d72[_0x2f7309(0x7d7)]); if (_0x3fd7eb) _0x26462b[_0x2f7309(0x6c1)](_0x1d2aa5, { 'content': _0x2f7309(0x18a) + _0x3fd7eb['name'] + ']', 'displayUrl': _0x3fd7eb[_0x2f7309(0x51a)] }); else _0x22a147[_0x2f7309(0x329)] = '[sticker:' + _0x161d89[_0x2f7309(0x7d7)] + ']'; } } async function _0x33d26d(_0x2b1cd1) { const _0x114d1b = _0x5f58e0, _0x3f2455 = _0x21051e(_0x2b1cd1); if (!_0x3f2455) throw new Error('找不到角色。'); try { if (_0x114d1b(0x9f4) === _0x114d1b(0x9f4)) { _0x1d9e54(!![], _0x114d1b(0xb06)); const _0x379c1d = ['gallery', 'whispers', 'abyss', _0x114d1b(0xade), _0x114d1b(0x873), 'wants', _0x114d1b(0x257)]; let _0x56e5d6 = {}; await Promise[_0x114d1b(0x98d)](_0x379c1d[_0x114d1b(0x7d4)](async _0x53d2a6 => { const _0x100820 = _0x114d1b, _0x84469c = 'snoop_' + _0x2b1cd1 + '_' + _0x53d2a6, _0x48c53d = await _0x4f8ac7(_0x84469c); if (_0x48c53d) { if (_0x100820(0x7ab) === _0x100820(0x7ab)) try { _0x56e5d6[_0x53d2a6] = JSON[_0x100820(0x440)](_0x48c53d); } catch (_0x31e9ba) { } else { const _0x3d2cfb = _0x448b84(_0x459926['getHours']())[_0x100820(0xa83)](0x2, '0'), _0x18f64d = _0x360cb6(_0x1cfb84['getMinutes']())[_0x100820(0xa83)](0x2, '0'); _0x2aee70[_0x100820(0x8f9)] = _0x3d2cfb + ':' + _0x18f64d; const _0x118d29 = _0x352f85[_0x100820(0x978)]() + 0x1, _0x276799 = _0x14933c[_0x100820(0x8ff)](), _0x543d23 = ['星期日', _0x100820(0x62f), _0x100820(0x579), _0x100820(0x2f8), _0x100820(0x25f), '星期五', '星期六'][_0x58ce69[_0x100820(0x5df)]()]; _0x2b2ad2[_0x100820(0x8f9)] = _0x118d29 + '月' + _0x276799 + '日\x20' + _0x543d23; } } })); if (Object['keys'](_0x56e5d6)[_0x114d1b(0x8a0)] === 0x0) return _0x114d1b(0x695); const _0x5c0bf6 = '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“' + _0x3f2455[_0x114d1b(0x7d7)] + _0x114d1b(0x28c), _0x4d5e9f = [{ 'role': 'system', 'content': _0x5c0bf6 }, { 'role': 'user', 'content': JSON['stringify'](_0x56e5d6, null, 0x2) }]; _0x1d9e54(!![], _0x114d1b(0x5c0)); const _0x394bec = await _0x286894(_0x4d5e9f); return _0x394bec || _0x114d1b(0x80b); } else _0x22ae03 = _0x240057[_0x114d1b(0x2da)]('style'), _0x1e5e26['id'] = 'style-' + _0x540cba['id'], _0x19c5cb[_0x114d1b(0x8be)]['appendChild'](_0x85e3a2); } finally { _0x114d1b(0x5b8) !== _0x114d1b(0xb5a) ? _0x1d9e54(![]) : _0x385ba7 = _0x14b6d1['id']; } } document[_0x5f58e0(0x653)](_0x5f58e0(0x41f))[_0x5f58e0(0xacf)](_0x5f58e0(0x4f4), () => _0x13d883('home', _0x5f58e0(0x9aa))), document[_0x5f58e0(0x653)](_0x5f58e0(0x757))[_0x5f58e0(0xacf)]('click', () => { const _0x4a35c8 = _0x5f58e0; document[_0x4a35c8(0x653)]('snoop-app-view-container')[_0x4a35c8(0x313)]['display'] = _0x4a35c8(0x643), _0x13d883(_0x4a35c8(0x9aa), _0x4a35c8(0x2c6)); }), _0x293cf9(); }); async function _0x39335f() { const _0x39a445 = _0x3ea4fd; console[_0x39a445(0xace)](_0x39a445(0x44b)), console[_0x39a445(0xace)](_0x39a445(0x896)); async function _0x112968(_0x40725a, _0x27398c) { const _0x474ff7 = await _0x43cbe5; return new Promise((_0x22abdd, _0x19b217) => { const _0x2be45e = _0x493f, _0x50c9c5 = _0x474ff7[_0x2be45e(0xb25)](_0x1ae959, 'readwrite'), _0x3b20f4 = _0x50c9c5[_0x2be45e(0x751)](_0x1ae959), _0x3e4934 = _0x3b20f4[_0x2be45e(0x215)]({ 'id': _0x40725a, 'blob': _0x27398c }); _0x3e4934[_0x2be45e(0x8ef)] = () => _0x22abdd(_0x3e4934[_0x2be45e(0x97f)]), _0x3e4934['onerror'] = () => _0x19b217(_0x3e4934[_0x2be45e(0x5f0)]); }); } async function _0x285e3a(_0x12c245) { const _0x2de7dc = await _0x43cbe5; return new Promise((_0x414d46, _0x4f255e) => { const _0xba56ef = _0x493f; if ('QCkbA' !== _0xba56ef(0x5d9)) _0x247e7e += _0xba56ef(0x9b0) + _0xbf4bc5[_0xba56ef(0x70f)] + _0xba56ef(0x4ec) + _0x925f28['artist'] + ')'; else { const _0x5dae82 = _0x2de7dc[_0xba56ef(0xb25)](_0x5211d8, _0xba56ef(0x1f4)), _0x20d38e = _0x5dae82[_0xba56ef(0x751)](_0x5211d8), _0x1d5ba7 = _0x20d38e['get'](_0x12c245); _0x1d5ba7[_0xba56ef(0x8ef)] = () => _0x414d46(_0x1d5ba7[_0xba56ef(0x97f)] ? _0x1d5ba7[_0xba56ef(0x97f)][_0xba56ef(0xb75)] : null), _0x1d5ba7[_0xba56ef(0x740)] = () => _0x4f255e(_0x1d5ba7[_0xba56ef(0x5f0)]); } }); } async function _0x52bc44(_0x112d4e, _0x190ae9) { const _0x536529 = await _0x43cbe5; return new Promise((_0x1dd386, _0x1f15ff) => { const _0xef1c18 = _0x493f; if (_0xef1c18(0x83d) !== 'tgSxh') { const _0x142524 = _0x536529[_0xef1c18(0xb25)](_0x5211d8, _0xef1c18(0xadd)), _0x5efa94 = _0x142524['objectStore'](_0x5211d8), _0x337c67 = _0x5efa94['put']({ 'id': _0x112d4e, 'data': _0x190ae9 }); _0x337c67[_0xef1c18(0x8ef)] = () => _0x1dd386(), _0x337c67[_0xef1c18(0x740)] = () => _0x1f15ff(_0x337c67[_0xef1c18(0x5f0)]); } else _0x115bdc[_0xef1c18(0xacc)] && _0x2a9e18['currentAbortController'][_0xef1c18(0x5a3)] === _0x45b2e7 && (_0x38c5af[_0xef1c18(0xacc)] = null); }); } function _0x50be86(_0xa39cd9) { const _0x4a88d5 = _0x39a445; return fetch(_0xa39cd9)['then'](_0x50660b => _0x50660b[_0x4a88d5(0x511)]()); } let _0x4c75d4 = 0x0; for (let _0x36cdca = 0x0; _0x36cdca < localStorage[_0x39a445(0x8a0)]; _0x36cdca++) { if (_0x39a445(0x89d) !== _0x39a445(0x89d)) { _0x5c2ca3(); const _0x1b9821 = (_0x416af3[_0x39a445(0x2ec)]['endpoint'] || '')[_0x39a445(0x1ac)](_0x21aaac); _0x82c104[_0x39a445(0x534)] = _0x1b9821, _0x5438a9(_0x39a445(0xa4c), 'home'); } else { const _0x3a8e27 = localStorage['key'](_0x36cdca); if (_0x3a8e27 && _0x3a8e27[_0x39a445(0x6c0)](_0x39a445(0x962))) { let _0x1e4025, _0x3f507f = ![]; try { _0x1e4025 = JSON[_0x39a445(0x440)](localStorage['getItem'](_0x3a8e27)); if (!Array[_0x39a445(0xb41)](_0x1e4025)) continue; for (const _0x4372c6 of _0x1e4025) { if (_0x4372c6 && _0x4372c6['image'] && _0x4372c6[_0x39a445(0x3bf)][_0x39a445(0x6c0)](_0x39a445(0x1ae))) { if ('ROfnd' === _0x39a445(0x763)) { const _0x4c92ea = await _0x50be86(_0x4372c6[_0x39a445(0x3bf)]), _0x17fbac = 'chat_image_migrated_' + Date[_0x39a445(0x965)]() + '_' + Math['random'](); await _0x112968(_0x17fbac, _0x4c92ea), _0x4372c6[_0x39a445(0xaa4)] = _0x17fbac, delete _0x4372c6['image'], _0x3f507f = !![], _0x4c75d4++; } else _0x3da38a[_0x39a445(0x24d)](_0x2875e7[_0x39a445(0x46a)](_0x5f0296, _0x355dc6 + _0x116558)); } } _0x3f507f && localStorage['setItem'](_0x3a8e27, JSON[_0x39a445(0x98f)](_0x1e4025)); } catch (_0x13fba8) { console[_0x39a445(0x5f0)](_0x39a445(0x96f) + _0x3a8e27 + _0x39a445(0x8ba), _0x13fba8); continue; } } } } console['log'](_0x39a445(0x59a) + _0x4c75d4 + _0x39a445(0x29a)); } async function _0x5ec695() { const _0x14376a = _0x3ea4fd; console[_0x14376a(0xace)]('---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---'), console[_0x14376a(0xace)](_0x14376a(0x3cb)); async function _0x337f36(_0x2077d8, _0x1644fc) { const _0x2fe158 = _0x14376a; if ('Mjaiy' === 'Mjaiy') { const _0x3be018 = await _0x43cbe5; return new Promise((_0x21901c, _0x58fcd8) => { const _0x34a740 = _0x493f, _0x13b05f = _0x3be018[_0x34a740(0xb25)](_0x34a740(0xa7f), _0x34a740(0xadd)), _0x1a9102 = _0x13b05f['objectStore']('images'), _0x4bb5bc = _0x1a9102[_0x34a740(0x215)]({ 'id': _0x2077d8, 'blob': _0x1644fc }); _0x4bb5bc[_0x34a740(0x8ef)] = () => _0x21901c(_0x4bb5bc[_0x34a740(0x97f)]), _0x4bb5bc[_0x34a740(0x740)] = () => _0x58fcd8(_0x4bb5bc['error']); }); } else _0x19075f += _0x2fe158(0x2de); } function _0x5d1bef(_0x1f98ba) { const _0x108ec0 = _0x14376a; if ('MHvfi' === _0x108ec0(0x575)) return fetch(_0x1f98ba)[_0x108ec0(0x8e7)](_0xf6ed96 => _0xf6ed96['blob']()); else _0x4756dc['entries'][_0x108ec0(0x8cf)](_0x72f7d3, 0x1), _0x1d0a42(), _0x442fd0(), _0x2dd311(_0x108ec0(0x63d)); } let _0x2b3d8b = 0x0, _0x4f9f77 = ![]; try { const _0x425e1d = localStorage[_0x14376a(0x6da)](_0x14376a(0x4c5)); if (!_0x425e1d) { if ('JrZNZ' === 'bleIY') { const _0x36bc22 = _0x139706['createElement']('option'); _0x36bc22[_0x14376a(0x3cd)] = _0x4cea8a['id'], _0x36bc22['textContent'] = _0x9dee8e[_0x14376a(0x7d7)], _0x2c1052[_0x14376a(0x168)](_0x36bc22); } else { console['log'](_0x14376a(0x9b7)); return; } } const _0x33fce9 = JSON['parse'](_0x425e1d); if (!_0x33fce9['friendCircles'] || !Array['isArray'](_0x33fce9['friendCircles'])) return; for (const _0x5ce6a1 of _0x33fce9[_0x14376a(0xa26)]) { if (_0x5ce6a1[_0x14376a(0xa6e)] && Array[_0x14376a(0xb41)](_0x5ce6a1[_0x14376a(0xa6e)])) { if (_0x14376a(0x2a4) === 'zjRiN') !_0x44775d && (_0x5caac5 = _0x21c70b[_0x14376a(0x2da)](_0x14376a(0x1f9)), _0xa610c2['id'] = _0x14376a(0x6eb), _0x3db841[_0x14376a(0x168)](_0x386513)), _0x3c29e1[_0x14376a(0x9c2)] = '<div\x20class=\x22loader-spinner\x22></div><span>' + _0x44aed6 + '</span>', _0x3f600c[_0x14376a(0x313)][_0x14376a(0x272)] = _0x14376a(0xac5); else for (const _0x111b9b of _0x5ce6a1[_0x14376a(0xa6e)]) { if (_0x14376a(0x535) !== _0x14376a(0x535)) _0x445d7b['selectedDate'] = _0x51701e, _0xc41f7e(); else { if (_0x111b9b && _0x111b9b[_0x14376a(0x3bf)] && _0x111b9b['image']['startsWith'](_0x14376a(0x1ae))) { console[_0x14376a(0xace)](_0x14376a(0x3c2) + _0x5ce6a1[_0x14376a(0x7d7)] + '\x22\x20中发现一张需要净化的图片...'); const _0x22f357 = await _0x5d1bef(_0x111b9b['image']), _0x118485 = _0x14376a(0x4a5) + Date[_0x14376a(0x965)]() + '_' + Math[_0x14376a(0x664)](); await _0x337f36(_0x118485, _0x22f357), _0x111b9b[_0x14376a(0xaa4)] = _0x118485, delete _0x111b9b[_0x14376a(0x3bf)], _0x4f9f77 = !![], _0x2b3d8b++; } } } } } _0x4f9f77 && (console[_0x14376a(0xace)](_0x14376a(0xa9f)), localStorage[_0x14376a(0x7db)](_0x14376a(0x4c5), JSON[_0x14376a(0x98f)](_0x33fce9))); } catch (_0x8bbc5b) { _0x14376a(0x191) !== _0x14376a(0x7e1) ? console[_0x14376a(0x5f0)](_0x14376a(0x56d), _0x8bbc5b) : (_0x263fbd(_0x346524['id']), _0x444af6(_0x14376a(0x5eb) + _0x43c6fd[_0x14376a(0x7d7)] + _0x14376a(0x483)), _0xbb7494(![])); } return console['log'](_0x14376a(0x396)), console['log'](_0x14376a(0xb47) + _0x2b3d8b + _0x14376a(0x8f7)), _0x2b3d8b; } async function _0x45c626() { const _0x61cd5d = _0x3ea4fd; console[_0x61cd5d(0xace)]('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'), console[_0x61cd5d(0xace)](_0x61cd5d(0x3f5)); let _0x1b61d3 = 0x0, _0x30c7c5 = ![]; try { if ('vNaaK' !== _0x61cd5d(0x626)) { const _0x340ebd = _0x1f8a88[_0x61cd5d(0x3ad)][_0x38c544]; _0x340ebd && _0x340ebd[_0x61cd5d(0x8a0)] > 0x0 && (_0xe23de3 = _0x340ebd['at'](-0x1)); } else { const _0x5d66f2 = localStorage[_0x61cd5d(0x6da)](_0x61cd5d(0x4c5)); if (!_0x5d66f2) { if ('uTfQw' === 'uTfQw') return console['log'](_0x61cd5d(0x2a9)), 0x0; else { const _0xee7647 = _0x3cbd12['getElementById'](_0x61cd5d(0x40d)); _0x587656[_0x61cd5d(0x653)](_0x61cd5d(0x188))['textContent'] = '账本', _0x31c89b[_0x61cd5d(0x653)]('header-actions')[_0x61cd5d(0x9c2)] = ''; const _0xd2bf53 = _0x5a58c0[_0x61cd5d(0x75d)](_0x109f67[_0x61cd5d(0x47a)])[_0x61cd5d(0x9ec)]((_0x26db15, _0xa5276c) => new _0x332baf(_0xa5276c) - new _0x330cd3(_0x26db15)); if (_0xd2bf53[_0x61cd5d(0x8a0)] === 0x0) { _0xee7647[_0x61cd5d(0x9c2)] = _0x61cd5d(0x558); return; } _0xee7647['innerHTML'] = '', _0xd2bf53['forEach'](_0xe6435 => { const _0x3074d8 = _0x61cd5d, _0x27779e = _0xfe5372[_0x3074d8(0x2da)](_0x3074d8(0x1f9)); _0x27779e[_0x3074d8(0x84e)] = _0x3074d8(0x657), _0x27779e['style'][_0x3074d8(0xb7f)] = _0x3074d8(0x519); const _0x3c1247 = _0x2f8741[_0x3074d8(0x47a)][_0xe6435], _0x261fbb = _0x3c1247[_0x3074d8(0x5ae)]['reduce']((_0x373ae0, _0x21e765) => _0x373ae0 + (_0x21e765[_0x3074d8(0x8d0)] || 0x0), 0x0); _0x27779e[_0x3074d8(0x9c2)] = _0x3074d8(0x7be) + _0xe6435 + _0x3074d8(0x80c) + _0x261fbb[_0x3074d8(0x395)](0x2) + _0x3074d8(0x680), _0x27779e[_0x3074d8(0xacf)]('click', () => { const _0x11a098 = _0x3074d8; _0x105d6b['classList'][_0x11a098(0x344)](_0x11a098(0x33f)), _0x2a9b10[_0x11a098(0xb7b)][_0x11a098(0x428)](_0x11a098(0x33f)), _0x3a679d(_0x3c1247, _0xe6435); }), _0xee7647[_0x3074d8(0x168)](_0x27779e); }); } } for (let _0x5b6b2f = 0x0; _0x5b6b2f < localStorage['length']; _0x5b6b2f++) { const _0x3cba20 = localStorage[_0x61cd5d(0x8c2)](_0x5b6b2f); if (_0x3cba20 && _0x3cba20[_0x61cd5d(0x6c0)](_0x61cd5d(0x962))) { if (_0x61cd5d(0x6f2) === _0x61cd5d(0x177)) return _0x3500d2 + '分钟前'; else { let _0x7c9ec0, _0x3738c7 = ![]; try { if (_0x61cd5d(0xb7e) === _0x61cd5d(0xb7e)) { _0x7c9ec0 = JSON[_0x61cd5d(0x440)](localStorage[_0x61cd5d(0x6da)](_0x3cba20)); if (!Array[_0x61cd5d(0xb41)](_0x7c9ec0)) continue; for (const _0x13ad99 of _0x7c9ec0) { if (_0x13ad99 && (_0x13ad99['type'] === 'music' || _0x13ad99[_0x61cd5d(0x8c3)] === _0x61cd5d(0x94e)) && _0x13ad99[_0x61cd5d(0xb23)] && _0x13ad99['coverUrl'][_0x61cd5d(0x6c0)]('data:image')) { if (_0x61cd5d(0x1e9) !== _0x61cd5d(0x1e9)) return _0x1f60b8[_0x61cd5d(0x940)]['find'](_0xf13be6 => _0xf13be6['id'] === _0x559462[_0x61cd5d(0x9a8)]); else { const _0x57e74f = await _0x3d106b(_0x13ad99[_0x61cd5d(0xb23)]), _0x247a51 = 'music_cover_migrated_' + Date['now']() + '_' + Math[_0x61cd5d(0x664)](); await _0x100c88(_0x247a51, _0x57e74f), _0x13ad99[_0x61cd5d(0x180)] = _0x247a51, delete _0x13ad99[_0x61cd5d(0xb23)], _0x3738c7 = !![], _0x1b61d3++; } } } _0x3738c7 && localStorage['setItem'](_0x3cba20, JSON[_0x61cd5d(0x98f)](_0x7c9ec0)); } else _0xabb2b7[_0x61cd5d(0x5f0)]('切，加载播放器状态的时候出错了。', _0x2887dc); } catch (_0x4981eb) { console['error'](_0x61cd5d(0x96f) + _0x3cba20 + '\x20时出错，跳过。', _0x4981eb); continue; } } } } } } catch (_0x5b4b75) { _0x61cd5d(0x718) === 'OGtwZ' ? _0x1f7f1f[_0x61cd5d(0x313)]['backgroundImage'] = 'none' : console[_0x61cd5d(0x5f0)](_0x61cd5d(0x770), _0x5b4b75); } return console['log'](_0x61cd5d(0x518)), console[_0x61cd5d(0xace)](_0x61cd5d(0xb47) + _0x1b61d3 + _0x61cd5d(0x2f6)), _0x1b61d3; } function _0x507cbe() { const _0x4ab319 = _0x3ea4fd; if (!_0x1884b1[_0x4ab319(0x553)]) { if (_0x4ab319(0x350) !== _0x4ab319(0x350)) { const _0x27cfcd = _0x136d6d['touches'][0x0][_0x4ab319(0x619)] - _0x2b7b0f, _0x4a8151 = _0x5a04c7[_0x4ab319(0x577)][0x0][_0x4ab319(0xa60)] - _0x4c617a; _0x50aa['abs'](_0x27cfcd) > _0x4df2f4[_0x4ab319(0x989)](_0x4a8151) ? _0x1c15e4 = _0x4ab319(0x602) : _0x437024 = _0x4ab319(0x9d6); } else return _0x1884b1[_0x4ab319(0x38c)][_0x4ab319(0x6f9)](_0x31e228 => _0x31e228['id'] === _0x1884b1[_0x4ab319(0x1d3)]) || _0x1884b1[_0x4ab319(0x38c)][0x0]; } const _0x3a4ef8 = _0x1884b1[_0x4ab319(0x940)][_0x4ab319(0x6f9)](_0x3e15fe => _0x3e15fe[_0x4ab319(0x8c3)] === _0x4ab319(0xaa7) && _0x3e15fe['participantIds'][_0x4ab319(0x1ac)](_0x1884b1[_0x4ab319(0x553)])), _0x8a02d4 = _0x3a4ef8?.['boundUserProfileId'] || _0x1884b1[_0x4ab319(0x1d3)]; return _0x1884b1[_0x4ab319(0x38c)]['find'](_0x11e9ae => _0x11e9ae['id'] === _0x8a02d4) || _0x1884b1[_0x4ab319(0x38c)][0x0]; } function _0x68ddbc(_0x39f878) { const _0xfe8531 = _0x3ea4fd, _0xfb1be1 = new Date(), _0x1e89ad = _0xfb1be1 - _0x39f878, _0x4c7175 = Math[_0xfe8531(0x725)](_0x1e89ad / 0x3e8), _0x129c85 = Math['round'](_0x4c7175 / 0x3c), _0x40c594 = Math[_0xfe8531(0x725)](_0x129c85 / 0x3c), _0x40d169 = Math[_0xfe8531(0x725)](_0x40c594 / 0x18), _0x132bdd = _0x39f878[_0xfe8531(0x9ac)]('zh-CN', { 'hour': '2-digit', 'minute': _0xfe8531(0x711) }); if (_0x4c7175 < 0x3c) return '刚才'; if (_0x129c85 < 0x3c) { if (_0xfe8531(0x7f3) !== 'KTvXJ') return _0x129c85 + _0xfe8531(0x77e); else { const _0x14831c = _0x30b904[_0xfe8531(0x6da)]('chatHistory_' + _0x41bfa7), _0x5789c1 = _0x493728[_0xfe8531(0x440)](_0x14831c || '[]'); return _0x5b0476[_0xfe8531(0xb41)](_0x5789c1) ? _0x5789c1 : []; } } const _0x4fe5aa = _0xfb1be1[_0xfe8531(0x65b)]() === _0x39f878[_0xfe8531(0x65b)](); if (_0x4fe5aa) return _0xfe8531(0xa4a) + _0x132bdd; const _0x56886d = new Date(); _0x56886d[_0xfe8531(0xad6)](_0xfb1be1['getDate']() - 0x1); const _0x110ca0 = _0x56886d[_0xfe8531(0x65b)]() === _0x39f878[_0xfe8531(0x65b)](); if (_0x110ca0) { if (_0xfe8531(0x2b1) === 'pGugD') return _0xfe8531(0x5fd) + _0x132bdd; else { _0x45edd8(_0xfe8531(0x554)); return; } } if (_0x40d169 <= 0x7) { if ('gjhOy' !== _0xfe8531(0xb5c)) { const _0x16f560 = ['星期日', _0xfe8531(0x62f), _0xfe8531(0x579), _0xfe8531(0x2f8), _0xfe8531(0x25f), _0xfe8531(0x4d7), '星期六']; return _0x16f560[_0x39f878[_0xfe8531(0x5df)]()] + '\x20' + _0x132bdd; } else { _0x319766[_0xfe8531(0x8ac)] = [..._0x5d14f2], _0x3e2700['characterLastScripts'][_0x12f77e['id']] = [..._0x1b56e3], _0x478419(); const _0x153431 = _0x11fcc3['map'](_0x2280f7 => _0x2280f7[_0xfe8531(0x1d0)] === _0xfe8531(0x700) ? _0x2280f7['line'] : _0x2280f7[_0xfe8531(0x1d0)] + ':\x20' + _0x2280f7['line'])['join']('\x0a\x0a'); _0x13d971[_0xfe8531(0x589)]['push']({ 'role': 'assistant', 'senderId': _0x5e240f['id'], 'timestamp': _0x16fa53[_0xfe8531(0x965)](), 'isOffline': !![], 'content': _0x153431 }); } } return _0x39f878[_0xfe8531(0x374)]() + '年' + (_0x39f878[_0xfe8531(0x978)]() + 0x1) + '月' + _0x39f878[_0xfe8531(0x8ff)]() + '日'; } function _0x4f9511(_0x2ade38, _0xd285cb = 0x320, _0x58d888 = 0.8, _0x3101e8 = ![]) { return new Promise((_0x136c24, _0x125504) => { const _0x2e4421 = _0x493f; if ('rDNRa' !== 'olQyC') { if (!_0x2ade38 || !_0x2ade38[_0x2e4421(0x8c3)][_0x2e4421(0x6c0)]('image/')) return _0x125504(new Error(_0x2e4421(0x797))); const _0x25c05b = new FileReader(); _0x25c05b[_0x2e4421(0x560)](_0x2ade38), _0x25c05b[_0x2e4421(0x3e1)] = _0x235490 => { const _0x2b0bf8 = _0x2e4421, _0x395ea8 = new Image(); _0x395ea8[_0x2b0bf8(0x74e)] = _0x235490[_0x2b0bf8(0xa4b)][_0x2b0bf8(0x97f)], _0x395ea8['onload'] = () => { const _0x5a94e5 = _0x2b0bf8, _0x15f7a8 = document['createElement'](_0x5a94e5(0x508)); let _0x3f9f5d = _0x395ea8[_0x5a94e5(0x62c)], _0x2c6a58 = _0x395ea8['height']; _0x3f9f5d > _0x2c6a58 ? _0x5a94e5(0x5fa) !== _0x5a94e5(0x5fa) ? _0x2fa27f[_0x5a94e5(0x313)][_0x5a94e5(0x272)] = _0x5a94e5(0x643) : _0x3f9f5d > _0xd285cb && (_0x2c6a58 *= _0xd285cb / _0x3f9f5d, _0x3f9f5d = _0xd285cb) : _0x2c6a58 > _0xd285cb && (_0x3f9f5d *= _0xd285cb / _0x2c6a58, _0x2c6a58 = _0xd285cb); _0x15f7a8[_0x5a94e5(0x62c)] = _0x3f9f5d, _0x15f7a8[_0x5a94e5(0x7da)] = _0x2c6a58; const _0xeec570 = _0x15f7a8[_0x5a94e5(0x275)]('2d'); _0xeec570[_0x5a94e5(0x167)](_0x395ea8, 0x0, 0x0, _0x3f9f5d, _0x2c6a58); const _0x284e77 = _0x2ade38[_0x5a94e5(0x8c3)] === _0x5a94e5(0x228) ? 'image/png' : _0x5a94e5(0x932); if (_0x3101e8) _0x15f7a8[_0x5a94e5(0x8fe)](_0x71ff34 => { const _0x495b3c = _0x5a94e5; if (_0x71ff34) _0x136c24(_0x71ff34); else { if (_0x495b3c(0x178) !== _0x495b3c(0x178)) { const _0x2889ba = _0xac3d70[_0x495b3c(0x562)][_0x495b3c(0x6f9)](_0x29737b => _0x29737b['id'] === _0x1a21a5); if (!_0x2889ba) return; _0x20f97d['getElementById']('editing-world-book-id')['value'] = _0x2889ba['id'], _0x4e3768['getElementById'](_0x495b3c(0x472))[_0x495b3c(0x8f9)] = _0x495b3c(0x6ea), _0x46f77f[_0x495b3c(0x653)](_0x495b3c(0x15a))[_0x495b3c(0x3cd)] = _0x2889ba['name'], _0x265db1['getElementById']('world-book-edit-content')[_0x495b3c(0x3cd)] = _0x2889ba[_0x495b3c(0x329)]; } else _0x125504(new Error(_0x495b3c(0x8ab))); } }, _0x284e77, _0x58d888); else { if (_0x5a94e5(0x471) === _0x5a94e5(0x201)) { const _0x441c62 = _0x12838a['createElement']('p'); _0x441c62['textContent'] = _0x43a81f[_0x5a94e5(0x252)], _0x441c62['id'] = 'lyric-line-' + _0x1c1825, _0x7adca5['appendChild'](_0x441c62); } else _0x136c24(_0x15f7a8[_0x5a94e5(0xa46)](_0x284e77, _0x58d888)); } }, _0x395ea8[_0x2b0bf8(0x740)] = _0x18e48c => _0x125504(_0x18e48c); }, _0x25c05b[_0x2e4421(0x740)] = _0x21bb52 => _0x125504(_0x21bb52); } else delete _0xba777a['spriteTransform'], _0x4c9775(), _0x32b699(_0x27b03e['id'], _0x2e4421(0xb1a)), _0x378fa7(_0x2e4421(0x9c0)), _0x31b763(!![]); }); } function _0x1f0891(_0x24b2b2) { return new Promise((_0x26d7db, _0x119bbc) => { const _0x493944 = _0x493f; if (_0x493944(0xaa9) === _0x493944(0xaa9)) { const _0x581392 = new FileReader(); _0x581392[_0x493944(0x8c0)] = () => _0x26d7db(_0x581392['result']), _0x581392[_0x493944(0x740)] = _0x119bbc, _0x581392['readAsDataURL'](_0x24b2b2); } else throw new _0x4af5ce('这不是一张有效的Noir角色卡。'); }); } function _0x1f0891(_0x50e9a5) { return new Promise((_0x15011c, _0x1090ec) => { const _0x22e83e = _0x493f, _0x4ba751 = new FileReader(); _0x4ba751['onloadend'] = () => _0x15011c(_0x4ba751['result']), _0x4ba751[_0x22e83e(0x740)] = _0x1090ec, _0x4ba751[_0x22e83e(0x560)](_0x50e9a5); }); } function _0x327555(_0xffc275, _0x162998, _0x29e8ca) { const _0x209c1f = _0x3ea4fd, _0x2c8b01 = _0x53affd => { const _0x4801dc = _0x493f; if (_0x53affd['role'] === _0x4801dc(0x901)) return _0x1884b1[_0x4801dc(0x7c2)]?.['name'] || 'User'; if (_0xffc275['type'] === 'group') { const _0x54fea9 = _0x53affd[_0x4801dc(0x86d)] ? _0x4a9025(_0x53affd[_0x4801dc(0x86d)]) : null; return _0x54fea9?.[_0x4801dc(0x7d7)] || _0x4801dc(0x47f); } else { const _0x5d3504 = _0x4a9025(_0xffc275['participantIds'][0x0]); return _0x5d3504?.[_0x4801dc(0x7d7)] || 'AI'; } }, _0x129175 = _0x162998['slice'](-_0x29e8ca), _0x2cdae5 = []; for (const _0x457652 of _0x129175) { if ('TPTVb' !== 'TPTVb') { const _0x3d0471 = _0x1f1bb6[_0x209c1f(0x653)]('confirm-altar-upload-button'); _0x33a759[_0x209c1f(0x8e1)] && _0x5e44ac[_0x209c1f(0x732)] ? _0x3d0471[_0x209c1f(0x534)] = ![] : _0x3d0471['disabled'] = !![]; } else { const _0x244eb7 = new Date(_0x457652[_0x209c1f(0x1af)])[_0x209c1f(0x9ac)]('zh-CN', { 'hour': _0x209c1f(0x711), 'minute': _0x209c1f(0x711) }); _0x457652['content'] && _0x2cdae5['push']('[' + _0x244eb7 + _0x209c1f(0x759) + _0x2c8b01(_0x457652) + ']\x20' + String(_0x457652[_0x209c1f(0x329)])['trim']()); } } return _0x2cdae5; } function _0x159032(_0x237d31) { const _0x320c62 = _0x3ea4fd; if (_0x237d31[_0x320c62(0x8c3)] === _0x320c62(0x2b7)) return _0x320c62(0x263) + (_0x237d31[_0x320c62(0x7d7)] || _0x320c62(0xa66)) + '」'; const _0x19a40d = _0x4a9025(_0x237d31[_0x320c62(0x3d5)][0x0]); return '与\x20' + (_0x19a40d?.[_0x320c62(0x7d7)] || _0x320c62(0x3f2)) + _0x320c62(0x59f); } function _0x468c29(_0xb1cbee) { const _0x1088dc = _0x3ea4fd; try { if (_0x1088dc(0x5ad) !== _0x1088dc(0x5ad)) _0x608a11(_0x386cf6), _0x44c54f(); else { const _0x1cd339 = localStorage['getItem'](_0x1088dc(0x962) + _0xb1cbee), _0x1f3eca = JSON['parse'](_0x1cd339 || '[]'); return Array[_0x1088dc(0xb41)](_0x1f3eca) ? _0x1f3eca : []; } } catch { return []; } } function _0x1c528d(_0x3c31c4) { const _0x99f7cd = _0x3ea4fd, _0x51cb63 = Math['max'](0x1, Number(_0x1884b1['preferences']?.[_0x99f7cd(0x99e)] ?? 0x64)), _0x2505bd = _0x1884b1[_0x99f7cd(0x940)]['filter'](_0x1f9db8 => _0x1f9db8[_0x99f7cd(0x3d5)]['includes'](_0x3c31c4)), _0x370abb = _0x2505bd[_0x99f7cd(0x7d4)](_0x4cd73d => { const _0x1ade80 = _0x99f7cd; if (_0x1ade80(0x3d4) !== _0x1ade80(0x3d4)) _0x5ec72e = _0x42a19a(_0x428c59); else { const _0x424df0 = _0x468c29(_0x4cd73d['id']), _0x33a67b = _0x424df0['length'] > 0x0 ? _0x424df0[_0x424df0[_0x1ade80(0x8a0)] - 0x1] : null; return { 'chat': _0x4cd73d, 'history': _0x424df0, 'lastTimestamp': _0x33a67b ? _0x33a67b[_0x1ade80(0x1af)] : 0x0 }; } })[_0x99f7cd(0x776)](_0x587f43 => _0x587f43[_0x99f7cd(0x415)][_0x99f7cd(0x8a0)] > 0x0); _0x370abb['sort']((_0x545dfe, _0x57e91d) => _0x57e91d[_0x99f7cd(0x686)] - _0x545dfe[_0x99f7cd(0x686)]); const _0x52c8ac = [], _0x2ca32b = {}; return _0x370abb['forEach']((_0x2bf782, _0x48d45f) => { const _0x189724 = _0x99f7cd, _0x45a8ba = _0x327555(_0x2bf782[_0x189724(0x842)], _0x2bf782[_0x189724(0x415)], _0x51cb63); if (_0x45a8ba[_0x189724(0x8a0)] === 0x0) return; const _0x1c2374 = _0x48d45f === 0x0 ? _0x189724(0x5fc) : '来源：'; _0x52c8ac[_0x189724(0x24d)]('##\x20' + _0x1c2374 + _0x159032(_0x2bf782[_0x189724(0x842)]) + '\x0a' + _0x45a8ba['join']('\x0a')), _0x2ca32b[_0x2bf782['chat']['id']] = _0x45a8ba[_0x189724(0x8a0)]; }), { 'omniText': _0x52c8ac[_0x99f7cd(0x359)]('\x0a\x0a'), 'usedCounts': _0x2ca32b }; } function _0x5018f9(_0xf52498) { const _0x41c644 = _0x3ea4fd; let _0x32b1fe = null; const _0x33b862 = _0x1884b1[_0x41c644(0x940)][_0x41c644(0x776)](_0x2ddda3 => _0x2ddda3['participantIds'][_0x41c644(0x1ac)](_0xf52498)); for (const _0x42bd9f of _0x33b862) { if (_0x41c644(0xb00) === _0x41c644(0x82e)) _0xd79306(); else { const _0x45c93e = _0x468c29(_0x42bd9f['id']); if (_0x45c93e && _0x45c93e[_0x41c644(0x8a0)] > 0x0) { if (_0x41c644(0x885) === _0x41c644(0x269)) _0x4cd05a[_0x41c644(0x5f0)](_0x41c644(0xac1), _0x3c803a), _0x242325(_0x41c644(0x9ab) + _0x43bd76[_0x41c644(0xa53)]); else { const _0xc1a478 = _0x45c93e[_0x45c93e[_0x41c644(0x8a0)] - 0x1]; (!_0x32b1fe || _0xc1a478[_0x41c644(0x1af)] > _0x32b1fe['timestamp']) && (_0x32b1fe = _0xc1a478); } } } } return _0x32b1fe; } function _0x154dae(_0x4490e3) { const _0x4144d7 = _0x3ea4fd; if (!_0x4490e3 || !_0x4490e3['includes'](',')) return _0x4490e3; const _0x46341e = _0x4490e3[_0x4144d7(0x334)](',')[_0x4144d7(0x7d4)](_0x58062d => _0x58062d[_0x4144d7(0x87b)]()); return _0x46341e[Math['floor'](Math[_0x4144d7(0x664)]() * _0x46341e[_0x4144d7(0x8a0)])]; } function _0x9e00ac(_0x344dfc) { return new Promise(_0x13b181 => { const _0x4cb39b = _0x493f; if ('jkYeQ' !== _0x4cb39b(0x2dd)) { const _0x45a048 = _0x18c012[_0x4cb39b(0x589)][_0x4cb39b(0x776)](_0x1521f6 => _0x1521f6[_0x4cb39b(0x8c3)] === _0x4cb39b(0x35c) && _0x1521f6[_0x4cb39b(0xa36)])['map'](_0x5a161f => ({ ..._0x5a161f, 'source': _0x4cb39b(0x842) })); _0x44d3c8[_0x4cb39b(0x24d)](..._0x45a048); } else { const _0x3da878 = document[_0x4cb39b(0x653)](_0x4cb39b(0x8e8)), _0x88c2d = document[_0x4cb39b(0x653)](_0x4cb39b(0xa76)), _0x37ce3c = document['getElementById']('modal-ok'), _0x517369 = document['getElementById'](_0x4cb39b(0x8b8)), _0x285567 = document['getElementById'](_0x4cb39b(0xa12)); _0x88c2d[_0x4cb39b(0x8f9)] = _0x344dfc, _0x3da878['style'][_0x4cb39b(0x272)] = 'flex'; const _0x431876 = _0x874e2 => { const _0x25a62b = _0x4cb39b; _0x3da878[_0x25a62b(0x313)][_0x25a62b(0x272)] = _0x25a62b(0x643), _0x37ce3c['onclick'] = _0x517369[_0x25a62b(0x5c8)] = _0x285567[_0x25a62b(0x5c8)] = null, document[_0x25a62b(0x870)](_0x25a62b(0xa09), _0x462620), _0x13b181(_0x874e2); }, _0x462620 = _0x44ee75 => { const _0xc7fcaa = _0x4cb39b; if (_0x44ee75[_0xc7fcaa(0x8c2)] === _0xc7fcaa(0xb10)) _0x431876(![]); if (_0x44ee75[_0xc7fcaa(0x8c2)] === _0xc7fcaa(0x4de)) _0x431876(!![]); }; _0x37ce3c[_0x4cb39b(0x5c8)] = () => _0x431876(!![]), _0x517369[_0x4cb39b(0x5c8)] = () => _0x431876(![]), _0x285567[_0x4cb39b(0x5c8)] = () => _0x431876(![]), document[_0x4cb39b(0xacf)](_0x4cb39b(0xa09), _0x462620); } }); } function _0x493f(_0x1e578c, _0x268c13) { const _0x148741 = _0x1487(); return _0x493f = function (_0x493f65, _0x5d7a12) { _0x493f65 = _0x493f65 - 0x158; let _0x306e29 = _0x148741[_0x493f65]; return _0x306e29; }, _0x493f(_0x1e578c, _0x268c13); } function _0x5929aa(_0x2505a4) { const _0x382fed = _0x3ea4fd, _0x10aa8a = document[_0x382fed(0x653)](_0x382fed(0x58c)); _0x10aa8a['textContent'] = _0x2505a4, _0x10aa8a['style'][_0x382fed(0x272)] = _0x382fed(0x8b0); if (_0x5929aa['_t']) clearTimeout(_0x5929aa['_t']); _0x5929aa['_t'] = setTimeout(() => { const _0x454d96 = _0x382fed; 'WigTb' !== _0x454d96(0x1b2) ? (_0x3d4ae4[_0x454d96(0x5e5)] = _0x179cbf[_0x454d96(0x5e5)] || [], _0x1613e9[_0x454d96(0x9ae)] = (_0x4b9988[_0x454d96(0x9ae)] || [])[_0x454d96(0x7d4)]((_0x272444, _0x50d72c) => ({ ..._0x272444, 'commentId': 'c_' + _0x50ea6c[_0x454d96(0x1af)] + '_' + _0x50d72c })), _0x48ae41(), _0x40cdaa()) : _0x10aa8a[_0x454d96(0x313)]['display'] = 'none'; }, 0x640); } function _0x476f3c() { const _0x117d4e = _0x3ea4fd, _0x50eb32 = document[_0x117d4e(0x653)](_0x117d4e(0x5b6)), _0x438ecb = document[_0x117d4e(0x653)](_0x117d4e(0x83f)), _0x148ee5 = document[_0x117d4e(0x6e4)](_0x117d4e(0x1cf)), _0x204e39 = document[_0x117d4e(0x653)](_0x117d4e(0x6ae)); let _0x15415b = 0x0; _0x438ecb[_0x117d4e(0x313)][_0x117d4e(0x62c)] = _0x117d4e(0x993); const _0x16514c = 0x3; function _0x1e3662(_0x291866) { const _0x481878 = _0x117d4e; if (_0x481878(0x903) === _0x481878(0x1cd)) _0x14ceb2['style'][_0x481878(0x272)] = 'none', _0x58bff2[_0x481878(0x313)]['border'] = _0x481878(0x26b), _0x34b951['style'][_0x481878(0x1fa)] = _0x481878(0x459); else { if (_0x291866 < 0x0 || _0x291866 >= _0x16514c) return; _0x438ecb[_0x481878(0x313)]['transform'] = _0x481878(0x9f0) + _0x291866 * (0x64 / _0x16514c) + '%)', _0x148ee5['forEach'](_0x97ca14 => _0x97ca14[_0x481878(0xb7b)][_0x481878(0x344)]('active')), _0x148ee5[_0x291866][_0x481878(0xb7b)][_0x481878(0x428)](_0x481878(0x33f)), _0x15415b = _0x291866, _0x291866 === 0x0 ? _0x204e39[_0x481878(0x313)][_0x481878(0x272)] = _0x481878(0x643) : _0x204e39['style'][_0x481878(0x272)] = _0x481878(0xac5); } } _0x1e3662(0x0), _0x148ee5[_0x117d4e(0xa30)](_0x1b405a => { const _0x3cd3ac = _0x117d4e; _0x1b405a[_0x3cd3ac(0xacf)](_0x3cd3ac(0x4f4), () => { const _0x5e8385 = _0x3cd3ac; if ('lpRGh' === 'lpRGh') { const _0x434d5c = parseInt(_0x1b405a[_0x5e8385(0x2c4)][_0x5e8385(0x1ce)], 0xa); _0x1e3662(_0x434d5c); } else _0x227729[_0x5e8385(0x74e)] && _0xb93b9f['style'][_0x5e8385(0x480)] !== '0' ? (_0x1441e5[_0x5e8385(0x313)][_0x5e8385(0x480)] = 0x0, _0x38d27a(() => { const _0x2eafe5 = _0x5e8385; _0x38a631[_0x2eafe5(0x74e)] = _0x43fdd8[_0x2eafe5(0x264)](_0x29f91b), _0x34cfe8['style'][_0x2eafe5(0x480)] = 0x1; }, 0x96)) : (_0x4b757d[_0x5e8385(0x74e)] = _0x9a4f60[_0x5e8385(0x264)](_0x3fb33c), _0x2b79eb[_0x5e8385(0x313)][_0x5e8385(0x480)] = 0x1); }); }); let _0x2b9c79 = 0x0, _0x26b359 = 0x0, _0x715a5f = 0x0, _0x499a33 = ![], _0x278a0f = ''; _0x50eb32['addEventListener']('touchstart', _0x424017 => { const _0x3459d7 = _0x117d4e; _0x2b9c79 = _0x424017['touches'][0x0][_0x3459d7(0x619)], _0x26b359 = _0x424017[_0x3459d7(0x577)][0x0][_0x3459d7(0xa60)], _0x499a33 = !![], _0x278a0f = ''; }, { 'passive': !![] }), _0x50eb32[_0x117d4e(0xacf)]('touchmove', _0x24c32a => { const _0x29ac18 = _0x117d4e; if (_0x29ac18(0x465) !== 'uFFtY') _0x3e65dc[_0x29ac18(0x9c2)] = _0x29ac18(0x808) + _0x5a0ae1 + _0x29ac18(0x801) + (_0x3311db === _0x29ac18(0x30c) ? _0x29ac18(0x6fc) : _0x29ac18(0x24c)) + _0x29ac18(0x4d2) + _0x760778 + _0x29ac18(0x699) + _0x253852; else { if (!_0x499a33) return; if (_0x278a0f === '') { const _0x1f9695 = _0x24c32a['touches'][0x0][_0x29ac18(0x619)] - _0x2b9c79, _0x15747d = _0x24c32a[_0x29ac18(0x577)][0x0][_0x29ac18(0xa60)] - _0x26b359; Math[_0x29ac18(0x989)](_0x1f9695) > Math[_0x29ac18(0x989)](_0x15747d) ? _0x278a0f = _0x29ac18(0x602) : _0x278a0f = _0x29ac18(0x9d6); } _0x278a0f === _0x29ac18(0x602) && _0x24c32a['preventDefault'](); } }, { 'passive': ![] }), _0x50eb32['addEventListener'](_0x117d4e(0x898), _0x38c12e => { const _0x22df92 = _0x117d4e; if (_0x22df92(0x5d5) === _0x22df92(0xb70)) _0x57d42d['textContent'] = _0x3150c0[_0x22df92(0x869)], _0x4b7208[_0x22df92(0x8f9)] = _0x522e4b[_0x22df92(0x6e9)], _0x343751['classList'][_0x22df92(0x428)](_0x22df92(0xa65)), _0x1602e2[_0x22df92(0x313)]['setProperty'](_0x22df92(0x972), _0x22df92(0x8f5) + _0x2642e0[_0x22df92(0x544)] + ')'); else { if (!_0x499a33) return; _0x715a5f = _0x38c12e[_0x22df92(0x678)][0x0]['screenX'], _0x278a0f === 'horizontal' && _0x528e5b(), _0x499a33 = ![]; } }); function _0x528e5b() { const _0x1aef92 = _0x117d4e; if (_0x1aef92(0xa51) === _0x1aef92(0xa51)) { const _0xc50fbb = 0x32; if (_0x715a5f < _0x2b9c79 - _0xc50fbb) _0x1aef92(0x27c) === _0x1aef92(0x48b) ? (_0x44505d[_0x1aef92(0x8bb)] = null, _0x297fb2(_0x1aef92(0xa2d)), _0x22d843()) : _0x1e3662(_0x15415b + 0x1); else _0x715a5f > _0x2b9c79 + _0xc50fbb && _0x1e3662(_0x15415b - 0x1); } else _0x505141 = _0x426eba['createElement'](_0x1aef92(0x313)), _0x1b0332['id'] = 'live-preview-style', _0x51f7aa['head'][_0x1aef92(0x168)](_0x5b38bd); } } function _0x43a6b9() { return new Promise(_0x1506bb => { const _0x2f66d9 = _0x493f; if ('EMWlE' !== _0x2f66d9(0x35e)) { if (_0xd7d2dd['type'] === _0x2f66d9(0x65a)) _0x19af15[_0x2f66d9(0x4d1)](); _0x493632(_0x26c064); } else { const _0x4b367d = document[_0x2f66d9(0x653)]('music-input-modal'), _0x23d294 = document['getElementById'](_0x2f66d9(0xa1f)), _0x4b6cd3 = document['getElementById'](_0x2f66d9(0x77b)), _0x58ad79 = document[_0x2f66d9(0x653)](_0x2f66d9(0x798)), _0x3fa61d = document[_0x2f66d9(0x653)](_0x2f66d9(0x3e9)), _0x45c6b3 = document[_0x2f66d9(0x653)](_0x2f66d9(0x77a)); _0x23d294['value'] = '', _0x4b6cd3['value'] = '', _0x4b367d[_0x2f66d9(0xb7b)][_0x2f66d9(0x428)](_0x2f66d9(0x322)), _0x23d294[_0x2f66d9(0x96c)](); const _0x316817 = _0x14b580 => { const _0x5f5956 = _0x2f66d9; if (_0x5f5956(0x662) === 'UlniG') { const _0x50a548 = _0x5a85bd[_0x5f5956(0x2da)]('div'); _0x50a548[_0x5f5956(0x84e)] = _0x5f5956(0x6ef); const _0x500a16 = _0x5df1e6[_0x5f5956(0x544)] ? _0x5f3717['createObjectURL'](_0x506bd9['cover']) : _0x4c9caa; _0x50a548[_0x5f5956(0x9c2)] = _0x5f5956(0x6c7) + _0x500a16 + _0x5f5956(0x3aa) + (_0x2baaa5[_0x5f5956(0x732)]['歌曲名称'] || _0x5f5956(0x587)) + _0x5f5956(0xb45) + (_0x54f090[_0x5f5956(0x732)]['歌手'] || _0x5f5956(0x1aa)) + _0x5f5956(0x926), _0x50a548[_0x5f5956(0xacf)](_0x5f5956(0x4f4), () => { _0x4313a3(_0x272827); }), _0x22ed4c[_0x5f5956(0x168)](_0x50a548); } else _0x4b367d['classList'][_0x5f5956(0x344)](_0x5f5956(0x322)), _0x58ad79[_0x5f5956(0x5c8)] = null, _0x3fa61d[_0x5f5956(0x5c8)] = null, _0x45c6b3[_0x5f5956(0x5c8)] = null, document['removeEventListener']('keydown', _0x3ccc1e), _0x1506bb(_0x14b580); }, _0x36b9f1 = () => { const _0xdbe47a = _0x2f66d9; if (_0xdbe47a(0x7b7) !== _0xdbe47a(0x7b7)) _0xc7c277[_0xdbe47a(0x7db)](_0x133653, _0xf2cb11[_0xdbe47a(0x98f)](_0x510ae3)); else { const _0x2beddd = _0x23d294[_0xdbe47a(0x3cd)]['trim'](), _0xf67a11 = _0x4b6cd3[_0xdbe47a(0x3cd)][_0xdbe47a(0x87b)](); if (!_0x2beddd || !_0xf67a11) { if (_0xdbe47a(0xa9b) !== _0xdbe47a(0xa74)) { _0x5929aa(_0xdbe47a(0x864)); return; } else { const _0x4dcecf = _0x29de07[_0xdbe47a(0x99b)]['map'](_0x1db500 => _0x3a7ea8[_0xdbe47a(0x562)][_0xdbe47a(0x6f9)](_0x2251b6 => _0x2251b6['id'] === _0x1db500))[_0xdbe47a(0x776)](_0x4da498)['map'](_0xfa9c60 => _0xdbe47a(0x36f) + _0xfa9c60[_0xdbe47a(0x7d7)] + '\x0a' + _0xfa9c60[_0xdbe47a(0x329)])[_0xdbe47a(0x359)](''); _0x4dcecf && (_0x4c4eee = '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a' + _0x4dcecf); } } _0x316817({ 'songName': _0x2beddd, 'artist': _0xf67a11 }); } }, _0x3ccc1e = _0xb71fad => { const _0x54ddd8 = _0x2f66d9; if (_0xb71fad[_0x54ddd8(0x8c2)] === _0x54ddd8(0xb10)) _0x316817(null); if (_0xb71fad[_0x54ddd8(0x8c2)] === _0x54ddd8(0x4de)) { if (_0x54ddd8(0x874) === _0x54ddd8(0x874)) _0xb71fad['preventDefault'](), _0x36b9f1(); else { if (typeof _0x2778b6 === _0x54ddd8(0x4b6)) _0x1913bb[_0x54ddd8(0x24d)](_0x216924); } } }; _0x58ad79['onclick'] = _0x36b9f1, _0x3fa61d[_0x2f66d9(0x5c8)] = () => _0x316817(null), _0x45c6b3['onclick'] = () => _0x316817(null), document[_0x2f66d9(0xacf)]('keydown', _0x3ccc1e); } }); } function _0x242ba7(_0x4bdf26) { const _0x70719 = _0x3ea4fd; if (!_0x4bdf26) return []; const _0x5697c8 = _0x4bdf26[_0x70719(0x87b)](); if (_0x5697c8[_0x70719(0x6c0)]('<div') && _0x5697c8[_0x70719(0xb35)](_0x70719(0x681))) { if ('gWgdy' !== _0x70719(0x307)) _0x33a291['error'](_0x70719(0x49f) + _0x3bf06a['activeChatId'], _0x32304a); else return [_0x5697c8]; } const _0x551ae9 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x5037d7 = _0x70719(0x682), _0x162c5d = [], _0x2e750a = _0x4bdf26[_0x70719(0xac6)](_0x551ae9, _0x51c49c => { return _0x162c5d['push'](_0x51c49c), _0x5037d7; }), _0x3e7a25 = _0x2e750a[_0x70719(0x334)](_0x5037d7), _0x4952e0 = []; let _0x5a140b = 0x0; return _0x3e7a25[_0x70719(0xa30)]((_0x285bc6, _0x389d3d) => { const _0x56972a = _0x70719; if ('SmEMb' !== 'bJCSL') { const _0x1ab55f = _0x285bc6[_0x56972a(0x87b)](); _0x1ab55f && ('MTKzs' === _0x56972a(0x5d0) ? _0x3fff8d = _0x56972a(0x602) : _0x4952e0[_0x56972a(0x24d)](..._0x1c3300(_0x1ab55f))); if (_0x5a140b < _0x162c5d['length']) { if ('BeAtQ' === 'VyvQg') return 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。'; else _0x4952e0['push'](_0x162c5d[_0x5a140b]['trim']()), _0x5a140b++; } } else { const { omniText: _0x9dce54 } = _0x49d36b(_0x556929['id'], null), _0x13e0e7 = _0x4db16b(_0x1fd2be['id']), _0x4e617d = _0x48261a[_0x56972a(0x99b)] && _0x56cb16[_0x56972a(0x99b)][_0x56972a(0x8a0)] > 0x0 ? '\x0a\x0a#\x20' + _0x33be65[_0x56972a(0x7d7)] + _0x56972a(0x397) + _0x270c82['linkedWorldBookIds'][_0x56972a(0x7d4)](_0x4868bb => _0x211e8e[_0x56972a(0x562)][_0x56972a(0x6f9)](_0x158d34 => _0x158d34['id'] === _0x4868bb))[_0x56972a(0x776)](_0x90d9c8)[_0x56972a(0x7d4)](_0x19ef4d => '\x0a##\x20条目:\x20' + _0x19ef4d[_0x56972a(0x7d7)] + '\x0a' + _0x19ef4d[_0x56972a(0x329)])[_0x56972a(0x359)]('') : ''; return _0x56972a(0xaba) + _0x2f1355[_0x56972a(0x7d7)] + ',\x20ID:\x20' + _0x1f755d['id'] + '\x0a\x20\x20人设:\x20' + _0x3d97ed[_0x56972a(0x370)] + _0x56972a(0xb55) + _0x9dce54 + '\x0a' + _0x13e0e7 + '\x0a' + _0x4e617d; } }), _0x4952e0; } function _0x190001(_0x3cec4a, _0x47da71, _0xe637c3 = '') { const _0x391851 = _0x3ea4fd, _0x4051ac = document[_0x391851(0x2da)]('div'); _0x4051ac[_0x391851(0x84e)] = _0x391851(0x2e6) + _0xe637c3; const _0x4e5243 = document[_0x391851(0x2da)](_0x391851(0x7fb)); _0x4e5243[_0x391851(0x74e)] = _0x3cec4a, _0x4e5243[_0x391851(0x84e)] = 'avatar'; const _0x402e30 = document[_0x391851(0x2da)](_0x391851(0x1f9)); return _0x402e30['className'] = 'avatar-frame', _0x47da71 && (_0x402e30[_0x391851(0x313)][_0x391851(0x956)] = _0x391851(0xa38) + _0x47da71 + '\x27)'), _0x4051ac[_0x391851(0x168)](_0x4e5243), _0x4051ac[_0x391851(0x168)](_0x402e30), _0x4051ac; } function _0x36e0cb(_0x153433) { const _0x2ea7f5 = _0x3ea4fd; if (!_0x153433) return []; let _0x9195a9 = String(_0x153433)[_0x2ea7f5(0x87b)](); const _0x5ae7f6 = _0x9195a9['match'](/```(?:json)?([\s\S]*?)```/i); if (_0x5ae7f6) _0x9195a9 = _0x5ae7f6[0x1][_0x2ea7f5(0x87b)](); try { const _0x1c645a = JSON[_0x2ea7f5(0x440)](_0x9195a9); if (_0x1c645a && Array['isArray'](_0x1c645a['reply'])) return _0x1c645a[_0x2ea7f5(0x2b8)][_0x2ea7f5(0x7d4)](_0x2b479d => typeof _0x2b479d === 'string' ? _0x2b479d : _0x2b479d?.[_0x2ea7f5(0x329)])[_0x2ea7f5(0x776)](Boolean)[_0x2ea7f5(0x7e8)](_0x1c3300); const _0x10048b = [_0x2ea7f5(0x8a8), _0x2ea7f5(0x75f), _0x2ea7f5(0xa53), _0x2ea7f5(0x252), _0x2ea7f5(0x329), 'line', _0x2ea7f5(0xa85)]; if (_0x1c645a && typeof _0x1c645a === _0x2ea7f5(0xada)) { if (_0x2ea7f5(0x20d) !== _0x2ea7f5(0x20d)) _0x4031c9 = _0x45f961[_0x2ea7f5(0x7d7)], _0x1ef751 = _0x3f53b8[_0x2ea7f5(0x99a)]; else { const _0xb34eb0 = []; for (const _0x520185 of Object[_0x2ea7f5(0x75d)](_0x1c645a)) { const _0x98285 = _0x520185[_0x2ea7f5(0xaab)](); if (_0x10048b['some'](_0x5a46b3 => _0x98285[_0x2ea7f5(0x6c0)](_0x5a46b3))) { const _0x219a84 = _0x1c645a[_0x520185]; if (typeof _0x219a84 === 'string') _0xb34eb0[_0x2ea7f5(0x24d)](_0x219a84); if (Array[_0x2ea7f5(0xb41)](_0x219a84)) _0x219a84[_0x2ea7f5(0xa30)](_0x14c3c7 => { const _0x32f637 = _0x2ea7f5; if (typeof _0x14c3c7 === _0x32f637(0x4b6)) _0xb34eb0[_0x32f637(0x24d)](_0x14c3c7); }); } } if (_0xb34eb0[_0x2ea7f5(0x8a0)]) return _0xb34eb0[_0x2ea7f5(0x7e8)](_0x1c3300)[_0x2ea7f5(0x46a)](0x0, 0x9); } } } catch { } if (/[{\[]/[_0x2ea7f5(0x35a)](_0x9195a9) && /":/[_0x2ea7f5(0x35a)](_0x9195a9)) { if (_0x2ea7f5(0xb77) === _0x2ea7f5(0x9ad)) { const _0x18c6e2 = _0x57d974['transaction'](_0x1eca2a, 'readwrite'), _0x34f3e2 = _0x18c6e2[_0x2ea7f5(0x751)](_0x591242), _0x215024 = _0x34f3e2[_0x2ea7f5(0x215)]({ 'id': _0x4eb111, 'data': _0x13eb71 }); _0x215024['onsuccess'] = () => _0x17ea87(), _0x215024['onerror'] = () => _0x7d53f3(_0x215024[_0x2ea7f5(0x5f0)]); } else { const _0x159a9d = [], _0x20c85e = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x4937d5; while ((_0x4937d5 = _0x20c85e[_0x2ea7f5(0x7f5)](_0x9195a9)) !== null) { if (_0x2ea7f5(0x3e5) === 'iCQAY') { const _0x80ab8e = _0x510c90[_0x2ea7f5(0xa4b)][_0x2ea7f5(0x53d)][0x0]; if (!_0x80ab8e) return; const _0x340749 = _0x921da8['createObjectURL'](_0x80ab8e); _0x1cad0f['getElementById'](_0x2ea7f5(0x617))['style']['backgroundImage'] = _0x2ea7f5(0xa38) + _0x340749 + '\x27)'; } else { const _0x1b0a51 = _0x4937d5[0x1][_0x2ea7f5(0xac6)](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x2ea7f5(0x87b)](); if (_0x1b0a51) _0x159a9d[_0x2ea7f5(0x24d)](_0x1b0a51); } } if (_0x159a9d[_0x2ea7f5(0x8a0)]) return _0x159a9d[_0x2ea7f5(0x7e8)](_0x1c3300)['slice'](0x0, 0x9); } } return _0x1c3300(_0x9195a9); } function _0x1c3300(_0x6eb352) { const _0x1d3b46 = _0x3ea4fd; if (!_0x6eb352) return []; const _0x21ef5e = String(_0x6eb352)['trim'](), _0x412383 = _0x21ef5e['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)['map'](_0x31b218 => _0x31b218[_0x1d3b46(0x87b)]())[_0x1d3b46(0x776)](Boolean); if (_0x412383[_0x1d3b46(0x8a0)] > 0x0) { if (_0x1d3b46(0x74b) !== _0x1d3b46(0x994)) return _0x412383[_0x1d3b46(0x46a)](0x0, 0x9); else { const _0x552148 = _0x1e6ddd(_0x3322a2[_0x1d3b46(0x3d5)][0x0]); _0x552148 ? (_0x33532e = _0x552148[_0x1d3b46(0x99a)] || _0x4c2ee9, _0x3016cc = _0x552148[_0x1d3b46(0x7d7)] || _0x1d3b46(0xa0e), _0x3a1f16 = _0x552148['remark'] || '私聊') : (_0x4f9300 = '未知角色', _0x29aef6 = _0x1d3b46(0x37f)); } } return [_0x21ef5e]['filter'](Boolean); } const _0x43cbe5 = new Promise((_0x37db83, _0x2b6af0) => { const _0x29dceb = _0x3ea4fd, _0x234d4b = indexedDB[_0x29dceb(0x5a0)](_0x28a702, 0x3); _0x234d4b['onerror'] = () => _0x2b6af0('IndexedDB\x20failed\x20to\x20open'), _0x234d4b['onsuccess'] = () => _0x37db83(_0x234d4b[_0x29dceb(0x97f)]), _0x234d4b[_0x29dceb(0x47c)] = _0x38aca7 => { const _0x110cdc = _0x29dceb; if (_0x110cdc(0xa3c) === _0x110cdc(0xa3c)) { const _0x4e12af = _0x38aca7[_0x110cdc(0xa4b)][_0x110cdc(0x97f)]; console[_0x110cdc(0xace)](_0x110cdc(0x971) + _0x4e12af['version'] + _0x110cdc(0x708)), !_0x4e12af['objectStoreNames'][_0x110cdc(0x974)](_0x1ae959) && (console['log'](_0x110cdc(0x2ee) + _0x1ae959), _0x4e12af[_0x110cdc(0x3b3)](_0x1ae959, { 'keyPath': 'id' })), !_0x4e12af['objectStoreNames']['contains']('music_library') && (console[_0x110cdc(0xace)](_0x110cdc(0x1dd)), _0x4e12af[_0x110cdc(0x3b3)](_0x110cdc(0x442), { 'keyPath': 'id' })), !_0x4e12af[_0x110cdc(0x59b)][_0x110cdc(0x974)](_0x5211d8) && (_0x110cdc(0x513) !== 'vlOwV' ? (console[_0x110cdc(0xace)](_0x110cdc(0x2ee) + _0x5211d8), _0x4e12af[_0x110cdc(0x3b3)](_0x5211d8, { 'keyPath': 'id' })) : _0x1c78c8['disabled'] = ![]); } else _0xad6b0c[_0x110cdc(0x5f0)](_0x110cdc(0x9d2), _0x5c7cdd), _0x389a95('导入失败了，笨蛋:\x20' + _0x131c7e[_0x110cdc(0xa53)]); }; }); async function _0x329660(_0x418368) { const _0x443af9 = await _0x43cbe5; return new Promise((_0x2e037a, _0x1a8c53) => { const _0x5f4371 = _0x493f; if (_0x5f4371(0x9f6) === _0x5f4371(0x5f8)) { const _0x36757f = _0x70a647[_0x5f4371(0x589)][_0x1ea585 - 0x2], _0x1f1271 = _0x5e903e[_0x5f4371(0x589)][_0x192d21 - 0x1]; if (_0x36757f[_0x5f4371(0xa04)] === ![] && _0x1f1271[_0x5f4371(0xa04)] === !![]) _0x10f0eb = _0x5f4371(0x8d9) + _0x2af39a['name'] + _0x5f4371(0x249); else _0x36757f[_0x5f4371(0xa04)] === !![] && _0x1f1271[_0x5f4371(0xa04)] === ![] && (_0x1d736f = _0x5f4371(0xa20) + _0x5f310f[_0x5f4371(0x7d7)] + _0x5f4371(0x67d)); } else { const _0x41600a = _0x443af9[_0x5f4371(0xb25)](_0x1ae959, 'readonly'), _0x50459b = _0x41600a[_0x5f4371(0x751)](_0x1ae959), _0x3a7713 = _0x50459b[_0x5f4371(0x8f6)](_0x418368); _0x3a7713[_0x5f4371(0x8ef)] = () => _0x2e037a(_0x3a7713[_0x5f4371(0x97f)] ? _0x3a7713['result']['blob'] : null), _0x3a7713[_0x5f4371(0x740)] = () => _0x1a8c53(_0x3a7713['error']); } }); } async function _0x4f8ac7(_0x43efcf) { const _0x3fc3b4 = await _0x43cbe5; return new Promise((_0x379bc0, _0x59fb1d) => { const _0x399fde = _0x493f; if (_0x399fde(0x879) !== _0x399fde(0x879)) _0x14b688(), _0xf77aeb(); else { const _0x311cec = _0x3fc3b4['transaction'](_0x5211d8, _0x399fde(0x1f4)), _0x60e419 = _0x311cec[_0x399fde(0x751)](_0x5211d8), _0x2e6074 = _0x60e419[_0x399fde(0x8f6)](_0x43efcf); _0x2e6074['onsuccess'] = () => _0x379bc0(_0x2e6074[_0x399fde(0x97f)] ? _0x2e6074[_0x399fde(0x97f)][_0x399fde(0xb75)] : null), _0x2e6074[_0x399fde(0x740)] = () => _0x59fb1d(_0x2e6074[_0x399fde(0x5f0)]); } }); } async function _0x146448(_0x2e8b18, _0x1911de) { const _0x1e1e02 = await _0x43cbe5; return new Promise((_0x137c06, _0x22ac31) => { const _0x9e2fd7 = _0x493f, _0x4621f9 = _0x1e1e02[_0x9e2fd7(0xb25)](_0x5211d8, 'readwrite'), _0x4fa078 = _0x4621f9['objectStore'](_0x5211d8), _0xba8208 = _0x4fa078['put']({ 'id': _0x2e8b18, 'data': _0x1911de }); _0xba8208[_0x9e2fd7(0x8ef)] = () => _0x137c06(), _0xba8208[_0x9e2fd7(0x740)] = () => _0x22ac31(_0xba8208[_0x9e2fd7(0x5f0)]); }); } async function _0x2612b6(_0x26c98b) { const _0x292749 = await _0x43cbe5; return new Promise((_0x119313, _0x3982ea) => { const _0x18292b = _0x493f, _0x14cd3e = _0x292749[_0x18292b(0xb25)](_0x5211d8, _0x18292b(0xadd)), _0x4c702e = _0x14cd3e['objectStore'](_0x5211d8), _0x68e567 = _0x4c702e[_0x18292b(0x990)](_0x26c98b); _0x68e567[_0x18292b(0x8ef)] = () => _0x119313(), _0x68e567[_0x18292b(0x740)] = () => _0x3982ea(_0x68e567[_0x18292b(0x5f0)]); }); } async function _0x100c88(_0x50929c, _0x163b38) { const _0x4b848e = await _0x43cbe5; return new Promise((_0xe3e553, _0xd27109) => { const _0x18bf12 = _0x493f; if ('OKDFl' !== _0x18bf12(0xa73)) { const _0x30f39d = _0x4b848e[_0x18bf12(0xb25)](_0x1ae959, _0x18bf12(0xadd)), _0x4d3159 = _0x30f39d[_0x18bf12(0x751)](_0x1ae959), _0x20d32b = _0x4d3159[_0x18bf12(0x215)]({ 'id': _0x50929c, 'blob': _0x163b38 }); _0x20d32b[_0x18bf12(0x8ef)] = () => _0xe3e553(_0x20d32b[_0x18bf12(0x97f)]), _0x20d32b[_0x18bf12(0x740)] = () => _0xd27109(_0x20d32b['error']); } else { const _0x362b6a = { 'id': 'wb_' + _0x28257f[_0x18bf12(0x965)](), 'name': _0x4b8fe0, 'content': _0x11c03e }; _0x3a091e[_0x18bf12(0x562)][_0x18bf12(0x24d)](_0x362b6a); } }); } async function _0x48fa9d(_0x57577e) { const _0x580c06 = await _0x43cbe5; return new Promise((_0xb45dc7, _0x3744a4) => { const _0x2700b9 = _0x493f; if (_0x2700b9(0x1eb) === _0x2700b9(0x1eb)) { const _0x1f55d6 = _0x580c06[_0x2700b9(0xb25)](_0x1ae959, _0x2700b9(0xadd)), _0x48aa10 = _0x1f55d6[_0x2700b9(0x751)](_0x1ae959), _0x3c7601 = _0x48aa10['delete'](_0x57577e); _0x3c7601[_0x2700b9(0x8ef)] = () => _0xb45dc7(), _0x3c7601[_0x2700b9(0x740)] = () => _0x3744a4(_0x3c7601[_0x2700b9(0x5f0)]); } else { const _0x33a85b = _0x2700b9(0x5da); _0x23db9d[_0x2700b9(0xafb)][_0x2700b9(0x8e4)](_0x2700b9(0x819), _0x33a85b); const _0x9e8d61 = _0x1d2062[_0x2700b9(0x653)]('diary-write-modal'), _0x4c188f = _0xc236d0[_0x2700b9(0x653)]('diary-modal-textarea'), _0x1d3fc1 = _0x50ce30[_0x2700b9(0x653)](_0x2700b9(0x88f)), _0x2c5e31 = _0x4dced9[_0x2700b9(0x653)](_0x2700b9(0x802)), _0x414c3b = _0x9e8d61[_0x2700b9(0x795)](_0x2700b9(0x340)), _0xb15906 = () => { const _0x1e201d = _0x2700b9; _0x9e8d61[_0x1e201d(0x344)](), _0x3128e8(); }; _0x1d3fc1['onclick'] = () => { const _0x2d49af = _0x2700b9; _0x267a62(_0x4c188f[_0x2d49af(0x3cd)]), _0xb15906(); }, _0x2c5e31['onclick'] = _0xb15906, _0x414c3b['onclick'] = _0xb15906; } }); } function _0x3d106b(_0x1cde63) { const _0x43544a = _0x3ea4fd; return fetch(_0x1cde63)[_0x43544a(0x8e7)](_0x323231 => _0x323231['blob']()); } function _0x1487() { const _0x9a325c = ['chat-image-input', 'dWYOQ', '--feed-bg-image', 'clientY', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', '字体保存失败了，哼:\x20', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'is-playing', '未命名', 'bottom', 'setMonth', 'quoted-sender', '#diary-action-cancel', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'transfer-modal', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'posts', '-\x20[动态]\x20', 'TeFvS', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', '>>\x20', 'VLNII', 'DYWeu', 'spriteTransform', 'modal-text', '\x20.app-icon-img', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', 'is-exiting-right', 'ivsJG', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'jobkO', 'GlpwJ', 'fJLEB', 'images', 'stopPropagation', '\x20(当前)', '-preview', 'padStart', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'utterance', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'api-key', 'bubbleCss', '5px', 'group-options-cancel', 'noir-custom-font-style', 'otgjG', 'createElementNS', 'fbflH', 'JSWOe', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', 'USFji', '生成失败:\x20', '未命名群聊', 'KpuvJ', 'DhcUn', 'CYhfK', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', 'delete-friend-circle-button', '导入失败了，笨蛋:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'gTFFG', 'EEcFk', 'calendarEvents', '世界书条目已保存！', '好友圈净化完成，正在重新存档...', '你还没有写日记。', '加载更多聊天记录', 'fJzgl', 'center', 'imageId', 'generationConfig', 'gBonn', 'private', 'IHGRm', 'cOMml', 'zqnJk', 'toLowerCase', 'galgame-sprite-adjust-ui', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'role', 'wallpaper_main', 'tmtXM', '暂无音乐', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', 'add-event-modal', '&apos;', '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a', 'keUzG', '交通出行', 'location_name', 'diary-next-button', '-\x20姓名:\x20', 'card-image', 'PqoYS', '[用户向\x20', 'world-book-edit-content', 'app-accounting', 'QvqEm', '保存角色失败:', 'qfxki', 'transfer-backdrop', '保存壁纸失败:', 'flex', 'replace', '浏览器历史', 'hXxGu', 'char_wallpaper_', '收到的原始、有问题的文本:', 'pendingPostAttachments', 'currentAbortController', 'model', 'log', 'addEventListener', 'angry', '3240888gXrFpN', 'NVaZy', 'vddmV', 'init', 'SFZDF', 'setDate', 'COiuh', 'kUjCq', 'HCkOw', 'object', 'upload-music-button', 'char-edit-sprite-', 'readwrite', 'fragments', 'mHtMr', '8px', 'QHEBJ', '壁纸已更换！', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', '字体应用失败:', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'button', 'VWQVZ', '找不到要清空的聊天记录。', 'shy', '#app-dock-bottom-left\x20#', 'IavZW', 'event-type-todo', 'QrzWo', 'diary-prev-button', '#\x20总结失败了，可能是记录太长或太复杂。', 'GgDDn', '在你那乱七八糟的文本里没找到“歌名”！', '吃薯条', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', '你是一个乐于助人的AI助手。', 'getReader', 'msg_', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'STgtS', 'download', 'body', '10px\x20auto', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'zLSKj', 'snoop_cache', 'WcBaH', 'dOCHs', '没有找到相关结果。', 'userId', 'setAttribute', 'worldBookEditor', '正在翻阅所有档案...', 'sprites', '59%', '确定要彻底清空【', '生成动态时发生错误:\x20', 'userProfileList', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '无法解析旧的视奸内容来获取时间戳。', 'jRfsr', 'snoop-list-screen', 'Escape', 'SHcpm', 'group-clear-history-button', '啥意思捏', 'mlhtZ', '全量导入失败:', 'SuFyi', 'remark', 'WsymS', 'save-api-settings-button', 'normal', 'execCommand', 'post-img-', 'FwXzY', '在准备群聊API数据时，读取图片失败:', '导入失败:\x20', 'back-to-user-list-from-edit', '-\x20**对话状态提示**:\x20你们已经有\x20', '已经生成了今日账单！想看就去“看账本”标签页。', 'coverUrl', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'transaction', 'widget-title', 'ZKwqQ', '\x20//\x20<--\x20哼，加在这里\x0a', 'outerHTML', 'YNPop', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'gOwPs', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', 'delete-expense-btn', '这不是一张有效的Noir角色卡。', 'style-', 'uTUKM', 'add-event-fab', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'endsWith', 'MNzIj', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', 'app-chat', 'TuIJe', 'rVxld', 'summarize-modal', 'entries', 'editing-world-book-id', '-\x20**状态提示**:\x20你已经有\x20', '\x22\x20class=\x22char-name\x22>', '切，加载播放器状态的时候出错了。', 'isArray', '执行好友圈数据净化...', 'BTWJz', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'SDNkA', '成功净化并迁移了\x20', 'kNgyF', 'chat_image_', 'full', 'toggle', '-\x20你的备忘录里有一条叫“', '加载第二个卡片图片失败', 'galgame-text', 'fill', 'XsejU', 'RmdzB', 'yPWSI', 'readAsText', 'wb_', '\x0a\x20\x20相关记忆:\x0a', 'lqTUM', '加载\x20', 'back-to-chat-list', 'altar-slot-info', 'xyUlA', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'NvQBB', 'back-to-home-from-music-library', 'musicPlaylist', 'WzPdv', 'VhKtM', 'ElcPz', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', 'authorId', 'user-send-post-button', 'NplGQ', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'TAltn', 'epcvo', 'OggGl', 'CVCuW', '切换聊天时发生异步错误:', '和其他人的聊天', 'change', 'WOCia', 'RVxRr', 'EpmVO', 'wXkAW', 'pEsPc', 'true', 'User\x20cancelled', 'data', 'WegJo', 'DIsoS', 'pause', '<div\x20class=\x22snoop-main-grid\x22></div>', 'HzPTg', 'classList', 'WFQjb', '未知用户', 'RzCNc', 'cursor', 'JQfCS', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', '\x0a\x0a#\x20当前任务指令\x0a', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'TOWEC', 'world-book-edit-name', 'line', '\x0a\x0a##\x20世界书条目:\x20', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'author', 'avatar-frame', 'today-todo-list', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', '正在解析音乐灵魂...', 'hnXAi', '记一笔', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'Detected\x20API\x20provider:\x20', 'drawImage', 'appendChild', 'novel', 'warn', 'Gonux', 'KgrjA', '\x0a##\x20', 'BpEXO', 'AuZlN', 'char-edit-bind-user', 'global-player-next-btn', '编辑用户', 'mNofT', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'SXuuN', 'dCynv', 'MQtnR', 'KyEgM', 'sticker-item', 'qaMkv', 'review', 'decorative-badge', 'badge-input', '生成动态回复失败:', 'cancel-quote-button', 'coverId', 'model-dropdown', 'wWzhO', 'nXEQc', '.widget-info\x20>\x20div', '”。\x0a', '新建条目', 'char-edit-wallpaper-input', 'accounting-title', 'OpOst', '[AI发送了表情：', '1em', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'user-persona', '总得说点什么吧？', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', '我是女仆', 'coAuU', '\x0a\x0a#\x20', 'WNHHK', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'sprite-confirm-button', '人情红包', 'grhvB', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '群聊“', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'user-profile-list-screen', 'HVMvM', 'ZcjHm', 'max', '文件格式不正确，不是一个有效的备份文件。', '\x0a\x20\x20\x20\x20人设:\x20', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'meeting-reroll-button', '加载立绘失败:', '正在清空旧数据...', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-page-', 'amhmS', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', '未知艺术家', 'children', 'includes', 'data:\x20', 'data:image', 'timestamp', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', 'WigTb', '】的日记本已被清空。', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', '\x20\x20\x20\x20-\x20', 'whxjc', 'localStorageData', '不高兴撒娇', 'rFoBm', 'ptjNq', 'lMKHB', '”，在那里“', '快点哄我', 'lyGij', 'NeiVl', 'wzpcs', ']:\x20', '-\x20[', 'zfokr', 'fSaHj', 'undefined', 'array', 'TSUtj', 'back-to-chat-from-group-settings', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', 'is-entering-from-left', 'AI未能返回有效的JSON数组格式。', 'paddingBottom', 'pprpM', 'page', '.page-dot', 'speaker', '\x0a\x0a#\x20今日消费流水\x0a', 'worldBook', 'activeUserProfileId', 'kRewG', '弱小委屈但凶恶', 'listen-together-song-list', 'restaurant_name', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'meeting-list-screen', 'DfdJE', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', '无法保存状态，浏览器可能禁用了存储功能。', 'Creating\x20object\x20store:\x20music_library', 'char_sprite_', 'gOTcf', 'set-active-user-button', 'xiNKM', '休闲娱乐', 'char-edit-offline-bg-input', 'abyss', '4116yaTNJs', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '外卖订单', '用户资料已保存！', 'faWno', 'musicUploadAltar', 'NZyke', '歌曲ID', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', 'VdLIn', 'pNzLW', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'generativelace.googleapis.com', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', 'readonly', 'date', 'back-to-home-from-world-book', '\x22\x20的聊天记录已清空。', 'currentDate', 'div', 'background', '.ttf', 'rAnYb', '很好哦', 'export-char-button', 'audio-player', 'WhYzp', 'RDfwI', 'DCdDt', 'UWHGs', 'provider', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'isFinite', 'BbYeU', '事情好多', '50%', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'GuTpb', 'xGpBR', '已选择\x20', 'JnhLu', 'xminv', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', 'NIykB', '.remove-attachment-btn', 'gAfYx', 'put', 'QBuKm', 'EjZYD', 'is-entering-from-right', 'group-avatar-preview', 'Gemini\x20API\x20Error:\x20', 'item_name', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'char-edit-remark', '赞同！渲染效果一级棒！', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'important-day-item', '<img\x20src=\x22', '创建新用户', 'uwOKL', 'wallpaper-screen', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', 'app-music-library', 'image/png', 'hwkYe', 'chat-sticker-panel', '\x22\x20id=\x22', 'mtyEW', 'ZKfya', 'MSPlV', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'app-diary', '52030YLJowv', '搜索失败:\x20', '未知商店', 'day-number', '谁啊我吗', 'JqIFx', 'upload-card-button', 'ZPLSz', 'NqTOJ', '字体已应用！(Font\x20Applied!)', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', '找不到角色信息。', 'http://www.w3.org/2000/svg', 'xELcK', '<div\x20id=\x22snoop-dock\x22></div>', '\x20到\x20', 'touchcancel', 'cyvTh', 'scrollHeight', 'jBRoJ', 'phone-container', ']。严禁使用列表之外的任何表情名。\x0a', 'FCHvp', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'ExsYO', 'label', '#f2b7c6', 'push', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'skJAU', 'chat-messages', 'RDMDX', 'text', '--primary-lightness', 'BeZhm', 'reset-desktop-button', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'footprints', '生活服务', 'appIconPosition_app-snoop', 'jjZZk', '加载壁纸失败:', '.selected-options-text', 'DmRSv', '请根据以上所有规则和资料，开始生成内容。', '星期四', 'Failed\x20to\x20plan\x20group\x20replies:', '100%', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', '群聊「', 'createObjectURL', 'snoop-phone-header', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'back-to-home-from-settings', '加载徽章图片失败', 'lkfmB', '生成日记失败:\x20', '2px\x20dashed\x20var(--border-color)', 'XPYbO', '\x20张旧封面。应用即将刷新。', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'gpDjq', 'snoop-phone-top-nav', 'world-book-screen', 'display', 'app-world-book', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', 'getContext', '#ff8c66', '距离「', 'KgJNW', 'setHours', 'fVWlC', 'lt-ui-song-artist', 'QSacG', 'AByLO', 'epvJX', 'rXiLE', '\x0a你只扮演【', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'wEOUg', 'chat_group_', 'hoNyr', 'today-btn', 'snoop-app-icon', '总结失败:', 'group_bg_', '.message.user', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'back-to-meeting-list', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'xjPTr', 'originalExpenses', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'galgame-sprite-container', '请看是我', '#group-settings-screen\x20.select-box', 'LDDbI', 'exp_', 'CWsRt', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'pvvUv', 'QuenA', '\x20张旧图片。', 'character-settings-button', '好像有动态了...', 'galgame-textbox-container', 'margin', 'indexedDBData', 'XFiiS', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', '#d1d5db', '确定要清空群聊\x22', 'CmWHd', 'reload', '（开始一段新的对话...）', '-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', '聊天档案柜是空的，无需净化。', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'IWrzp', '\x20(ID:\x20', 'gvYWX', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'sad', 'QvYxx', 'pGugD', 'color', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'SXGDP', 'FRSOM', 'group', 'reply', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20行格式不对，被我无视了。', 'confirm-altar-upload-button', 'save-custom-stickers-button', 'drxOE', '<p>格式错误</p>', 'YBJQz', 'show-chat-view', 'hVBoz', 'PxDWz', 'dataset', '未知表情', 'snoopPhone', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'WPOxt', 'diaryList', 'tXxuj', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '正在检查好友圈数据...', 'appIconPosition_app-world-book', '欢迎！请先创建一个角色开始聊天。', 'flexDirection', '<div\x20class=\x22post-timestamp\x22>', '保存徽章状态失败', '出去玩', '.snoop-app-content', 'zpBMU', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'tZGQN', 'Favcq', 'createElement', '#\x20任务:\x20生成\x20', '</svg>', 'jkYeQ', '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a', 'cWYKF', 'bGZaM', 'char-edit-offline-bg-preview', 'query', 'getHours', 'yQeBc', 'touchmove', 'avatar-wrapper\x20', 'kmCnm', 'Claude\x20API\x20错误:\x20', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', 'char_', 'RqGGg', 'apiSettings', '歌曲名称', 'Creating\x20object\x20store:\x20', 'bTOfk', 'sprite-cancel-button', 'localeCompare', 'gFGbX', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', '至少要选择一个圈内成员！', '新用户\x20', '\x20张旧的音乐封面。', '请先在\x22设置\x22中配置你的\x20API\x20信息。', '星期三', 'netease', '条目名称和内容都不能为空！', 'marginTop', '在准备API数据时，从IndexedDB读取图片失败:', 'char-edit-persona', 'ZMndl', '设置已保存！', '-\x20你拍过一张照片，内容是：“', 'smooth', 'uTPgu', 'href', 'kind', 'edit-message-textarea', 'hSCDG', 'gWgdy', 'chat-music-button', 'HgVCw', 'font-preview-text', 'gnRqu', 'speaker-user', 'input[name=\x22event-type\x22]:checked', 'countdown-title', 'meetingViewMode', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', 'sender', 'items', 'style', 'scale', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'vjhtq', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'snoop-character-list-container', '错误：第一个好友圈\x20\x22', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'auto', 'xWdki', 'snoop-summary-textarea', '错误：你还没有创建任何好友圈。请先在App内创建一个。', 'activeQuote', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'show', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'friend-circle-title', 'lt-ui-song-title', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', 'NJeoY', '编辑群成员功能正在开发中...', 'content', 'catch', '\x22>\x20', '角色“', 'cEyfN', 'TSKAP', '\x0a#\x20交换日记摘要\x20(你和\x20', 'main', 'WlXCc', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', 'char-edit-name', 'split', '当前聊天', 'todo-item', 'groupSettings', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'organize-bill-button', 'hRntz', 'Vdxsk', '）最新写下的日记内容。Ta写的是：\x0a\x20“', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'active', '.choice-modal-backdrop', 'rPelo', 'imkbf', 'save-char-button', 'remove', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '#snoop-app-view-container\x20.snoop-app-content', 'clockPosition', '暗夜紫晶', 'fuvok', 'FScRR', 'WBWbw', '\x0a```', 'isPlaying', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'live-preview-style', 'vsXYG', 'QyIUj', '群聊音乐搜索失败\x20(', '未知搜索', '\x20的图片失败:', '找不到角色。', '9053XNXuxR', '_NoirCard.json', 'characters', 'join', 'test', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', 'music', '回复\x20', 'EMWlE', 'hwELA', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '[DONE]', 'message-anchor', 'ywhqH', '\x0a\x0a#\x20用户的动态\x0a', 'choice-cancel', 'HcCRL', '#\x20固定分类列表\x0a[', 'music-feed-container', 'customIcon_', 'ViGmw', '</label>\x0a\x20\x20\x20\x20', 'tOYcg', 'xIjos', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a##\x20世界书条目:\x20', 'persona', 'KTpWv', 'xHtAS', '好友圈数据升级完成，迁移了\x20', 'getFullYear', 'rCeLE', 'kHXyO', 'rAhMS', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'Pisbp', 'RFuiS', 'assistant', 'ftTDg', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'borderBottom', '错误：找不到角色', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', '群名称已更改为\x22', '.snoop-clear-btn', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'numeric', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', 'user-avatar-input', 'AI返回的原始文本:', '\x20说：“', 'fyUGD', 'appIconPosition_app-settings', 'userProfiles', 'huWhR', 'feed', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'ycujR', 'qSdNP', 'gallery', 'FFmSQ', '\x20添加...', 'toFixed', '---\x20好友圈净化仪式完成\x20---', '的个人专属世界观设定\x0a', 'zpAHn', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', '确定要删除这笔记录吗？', 'card-widget-2', 'user-post-image-button', 'xfAkd', 'GgfpN', 'KAPOM', '\x0a\x20\x20\x20\x20姓名:\x20', 'SkFrG', 'GSOyB', 'PXGrY', 'clock-color-toggle', 'borderRadius', 'galgame-date', '成功获取\x20', 'reset-card-button', 'widget_card_2', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'kDAXu', 'kaSKb', 'characterLastScripts', 'newAvatar', '\x0a-\x20**对话状态**:\x20群里在', 'Fetch\x20request\x20was\x20aborted.', '<br>', 'organize-button-container', 'createObjectStore', 'eventDate', '?id=', 'music-widget-card', '\x20条新动态。', 'DdsEc', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', '请输入群聊名称。', '天没动静了。你的角色们应该发起新的问候或话题。', 'lyric-line-', 'quote-message-button', 'add-world-book-button', 'image', 'number', '\x20写道:\x20', '在好友圈\x20\x22', 'editing-friend-circle-id', 'diary-write-button', '\x20的《', 'QyUoX', 'T00:00:00', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'bubble-', '哼，正在净化你那些被污染的好友圈动态...', '29%', 'value', 'NFfmC', 'NYjBg', 'setProperty', 'post_image_', 'cxiqH', 'yTVJV', 'sKUQn', 'participantIds', 'meeting-message-input', 'todo-date-title', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'group-settings-name', 'themeHue', 'rTIVy', 'shift', 'getAll', '执行音乐封面数据净化...', 'DZobE', 'writeText', 'onload', 'lQgJm', '已经删掉了。', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', 'VfbiG', '正在升级聊天数据结构...', 'editing-user-id', 'cmbZl', 'cancel-music-input', 'QxpWJ', '音乐搜索失败:\x20', '获取中…', 'description', 'theme-lightness-slider', 'customFeedWallpaper', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '💜\x20', '未知角色', 'LrEJo', 'global-player-play-pause-btn', '哼，正在净化你那些超重的音乐分享记录...', 'feMoe', 'JxaIv', 'Mvgfm', 'char_offline_bg_', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', '\x20账单', 'snoop-home-clock', 'summarize-backdrop', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'wallpaper', '.typing-indicator', 'xBsrW', 'cambe', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'message-container', 'member-selection-item', 'choice-import-character', 'chat-screen', 'UZern', '内容不能为空！', 'toLocaleString', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', 'MLKEN', 'accounting-content-area', '954Pkctye', '勉强但是好吧', 'BQeTx', 'widget-play-pause-btn', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'import-data-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'history', 'cLqta', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', '\x22\x20src=\x22', 'ttSRV', 'aborted', 'displayedMessageCount', '<div\x20class=\x22snoop-avatar\x22>', 'chatWallpaper', 'group-avatar-input', 'back-to-home-from-snoop-list', 'delete-user-profile-button', '对方正在输入...', 'Sjwhw', '#group-world-book-checkboxes\x20input:checked', 'oLpye', 'QxRXh', 'oncomplete', '\x0a\x20\x20人设:\x20', 'add', 'AI返回的不是一个数组。', 'memberCharacterIds', 'xWdQz', 'selectedDate', 'chat-get-reply-button', 'reset-badge-button', 'prev-month-btn', 'todo-list', 'IvuqG', '#99ff99', 'MnfGc', 'HCyxA', 'JOrJV', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'gLetG', 'lGsfg', 'lNjdM', 'meeting-main-content', 'p[data-history-index]', 'customStickers', 'is-visible', 'ugIYa', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'parse', 'MlBhI', 'music_library', 'activity_description', 'back-to-circle-list-from-feed', 'save-edit-button', 'Uehhy', 'accountingData', 'uTcWg', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'message-action-modal', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', '[用户发送了表情：', '.custom-multiselect', '#bubble-preview-ai', 'TGJly', 'user-profile-edit-title', 'character-item', '确定要恢复默认字体吗？', 'BgBOH', 'kxohg', 'mlPek', 'CVjpw', '0\x202px\x208px\x20rgba(0,0,0,0.4)', '\x20/\x20', 'rgba(255,255,255,0.2)', '.app-icon-img', 'rINDT', 'HEJdw', '正在生成中，请稍候...', 'tvNTc', 'backgroundColor', 'noir_migration_music_v1_complete', 'calendar-grid', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a', 'back-to-world-book-list', 'uFFtY', 'NYRpK', 'cardWidgetState', 'qaCCb', 'zIrlQ', 'slice', 'canplaythrough', 'isAnimatingDiary', '已复制到剪贴板！', 'quote-preview-area', '#c299ff', 'BQNAD', 'OggQA', 'world-book-editor-title', '15px\x2020px', '4386lTpbwd', 'ZCMSL', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', 'mouseleave', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', 'accountingLedger', 'googleapis.com', 'onupgradeneeded', 'LrWsh', '#group-settings-screen\x20.selected-options-text', 'Unknown', 'opacity', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'mLbmI', '\x22\x20已删除。', 'add-event-backdrop', 'user-avatar-preview', '成功向好友圈\x20\x22', 'doSyx', 'sLyGE', 'save-group-settings-button', 'back-to-home-from-circle-list', 'pRbxa', '动态页背景已移除。', 'snoop-phone-screen', 'appIconPosition_', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'tJatt', 'absolute', 'friendCircleEdit', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'contact_name', 'bYROb', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'scrollTop', 'dzMuW', 'apply', 'lt-ui-close-btn', '保存失败，你的表情包是不是太多了？', '15%', 'save-world-book-button', 'input', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', 'HhbQb', 'snoop-app-view-container', 'reset-feed-bg-button', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'post_image_migrated_', 'group-settings-bind-user', 'quote-preview-text', 'song_', 'QJkSd', '--\x20点击选择\x20--', '/v1/chat/completions', '#diary-action-reroll', '用户分享音乐失败:', 'accounting', 'user-post-image-input', 'result_page_content', 'music-widget', 'diary-entries-container', 'TSYsM', 'RdHYv', '樱花薄粉', 'string', 'iiYCX', 'widgetBgImage', 'iSRAD', 'card-image-2', '15px', 'header-actions', 'padding', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'TuinE', 'card-input', 'import-char-input', 'SjIhm', 'vATQv', 'appState', 'widget-artist', '.no-action-modal', '你的任务是【首次生成】这个应用的内容。', 'back-to-settings-from-user-profile', 'chat_', '解析存档失败，正在重置:', '我很脆弱', '正在处理...', 'flEaf', '正在整理…', 'TzSUc', 'preventDefault', ';\x22>', '】的手机已被重置。', 'removeChild', 'italic', 'gap', '星期五', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', 'hFvAd', 'status', 'accepted', '吃你的饭', 'meeting-send-button', 'Enter', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'diary-input-wrapper', 'group-edit-name', '#message-anchor', 'sender_id', '超激动我来了', 'ifiDq', 'qadAX', 'EfCei', 'api-endpoint', '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a', 'byWAH', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20-\x20', 'is-selected', 'RTDAq', 'vaKBW', '徽章已移除。', '20%', 'cvZel', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'click', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '我不想工作', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'PXZwc', 'sZgrv', '错误：找不到此好友圈绑定的用户！', 'sprite-reset-button', 'OgqGJ', '8px\x2016px', 'diary-char-name-header', '哼，就按你说的办好了。', '原始文本:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', '”聊过天，关于：“', 'option', 'AInEk', 'FVKtT', 'message-image-content', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'canvas', '-\x20**状态提示**:\x20这是你和', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'cover_placeholder_', 'isActive', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'character', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', 'blob', 'TA正在提笔写日记...', 'vjMjV', '音乐数据升级完成，迁移了\x20', 'cardState2', 'PmMJb', 'postContent', '---\x20音乐净化仪式完成\x20---', 'pointer', 'url', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '最近的足迹', 'happy', 'eventContent', 'PctCP', 'CeHJj', 'dfeaP', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', '.music-post-play-icon,\x20.music-share-play-icon', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', 'Error\x20fetching\x20from\x20', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'group_avatar_', 'isFromLibrary', 'alt', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'zVNaF', 'jiMfO', 'user-name', 'FonHE', '\x20内容失败:', '群聊名称不能为空！', 'charSelect', 'QNLmV', 'disabled', 'SusWl', 'fLWxC', 'context-lines-per-chat', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'NtAPa', 'expense-amount', 'galgame', 'galgame-time', 'files', 'firstChild', 'categorized-expenses-list', 'YAML翻译机也无法理解这段梦话。', 'total_cost', '大家正在赶来回复...', 'musicId', 'cover', 'rACaw', 'closest', 'XOFCA', '”已删除。', 'Gemini\x20stream\x20reading\x20aborted.', 'translate(-50%,\x20-100%)', '今天一笔账都没有，我整理什么？', 'gZQEG', 'ASwSG', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'meeting-char-name-header', '购物记录', 'cancel-action-button', 'activeDiaryCharacterId', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', ',\x20ID:\x20', '数据导入成功！应用即将刷新...', 'avatarFrameUrl', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', '卡片\x202\x20已更换！', 'ePtUJ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', '确定要永久清空【', '你是一个乐于助人的助手。', 'lJXKi', 'readAsDataURL', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'worldBooks', 'eKsSV', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', 'zh-CN', '无标题笔记', 'appIconPosition_app-accounting', 'OAwnr', '点击选择\x20.lrc', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', '净化好友圈时出错，真是的。', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'Noir_FileSystem', 'add-user-profile-button', 'DbpOf', '正在打包“', '下载并转换网络封面失败:', 'MHvfi', 'zotoR', 'touches', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', '星期二', 'iQzps', '\x22\x20data-id=\x22', '清空聊天记录失败。', 'listen-together-card', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'XLyYE', 'UdeVt', 'store_name', 'SaJFg', '动态已清空。', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'friendCircleList', '请输入有效的转账金额！', '未知歌曲', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'conversationHistory', 'OPQAW', 'friend-circle-edit-name', 'toast', '/v1/models', '的日记本', 'ceil', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'default', 'candidates', 'gdlud', '.message-container', '导出角色卡失败:', 'back-to-home-from-diary-list', 'nzLth', '\x20张旧图片。应用即将刷新。', 'group-options-modal', '净化完成！总共迁移了\x20', 'objectStoreNames', '小组件背景已更换！', ',\x20resetting.', 'niqqL', '\x20的私聊', 'open', 'from', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'signal', 'jaKgm', '.todo-item,\x20.important-day-item', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'mouseup', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'rgeIW', 'circle_', 'backgroundSize', 'eLcVy', 'PLwNg', 'categorizedExpenses', 'import-all-data-button', 'altar-slot-cover', '真是的，必需的祭品都还没准备好！', 'cSXyh', '卡片已更换！', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'app-pages-container', 'zrKxP', 'ukkhW', 'indexedDBMusicData', '获取模型失败:\x20', 'VXtxx', 'yCkCS', 'back-to-home-from-user-list', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', 'YNVxt', '书记官正在奋笔疾书...', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', 'meetingList', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'read', 'ODuMF', '新角色\x20', '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', 'onclick', 'summary', 'ZuXGT', '的第一次互动。\x0a', 'emotion', '解析音乐文件失败:', 'JrAQM', '绝对不想', 'SHSHZ', 'upload-card-button-2', 'iQOiT', 'is-exiting-left', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'hGjmL', 'DpyEH', 'diary-write-modal', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', 'QCkbA', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'toISOString', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', 'OUUce', 'jpIXi', 'getDay', '有点无语', '位置已重置，正在刷新...', ')，已跳过。这不应该发生，数据库可能已损坏。', 'event_', 'Brpyv', 'likes', 'DOMContentLoaded', 'loading', 'endpoint', '名字不能为空！', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', '群聊\x22', '\x0a\x0a#\x20关于群聊参与者“', '动态页背景已更换！', 'AI似乎没有想出任何新动态。', 'add-choice-backdrop', 'error', 'LCrdN', 'activeMeetingCharId', '视奸内容解析失败:', 'zTlPA', '检测到旧版存档，正在自动升级...', 'diary-view-screen', 'diary-entry-input', 'xaSMm', 'YyPEA', 'CZlrq', 'IIpVE', '来源：[最活跃]', '昨天\x20', 'TbhIE', 'DGriH', 'toLocaleDateString', 'XMrez', 'horizontal', 'mHFpe', 'editing-char-id', 'bepZo', 'group-world-book-checkboxes', 'offline-scene-view', 'char-name-header', 'COmoL', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', '.bubble-', '已送达', 'tgkNc', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'oJCop', '”的笔记，内容是：“', 'KjBkr', 'DuFfC', '[发送了图片]', 'AZVVa', 'hJKnx', 'group-bg-preview', '#bubble-preview-user', 'clientX', 'vfllV', 'reset-widget-bg-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '被你撩到', '好友圈名称不能为空！', '60%', 'EhyHx', 'insertBefore', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '正在解析备份文件...', 'world-book-item', 'vNaaK', 'WehHa', '已删除。', 'WgEDR', '.slot-filename', 'yLalc', 'width', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', ':streamGenerateContent?key=', '星期一', 'area', '”的补充信息\x0a', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', '<div\x20class=\x22post-body\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'day-dot', 'calendar-day', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'wallpaper-input', 'border', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'lastIndexOf', 'IgKnC', '日记已删除。', 'back-to-circle-list-from-edit', 'historyIndex', '喝多了', 'quoted-content', 'ktgki', 'none', 'yWIDK', 'svg', '还没有我的回复可以重新生成哦。', 'vbRSF', 'nufoL', 'tcczZ', 'appIconPosition_app-diary', 'songId', 'TAeEu', 'kHzDK', 'XYFIZ', 'widget_badge', 'substring', 'zTUhJ', 'themeLightness', 'getElementById', 'MQTxn', 'TANcG', 'tVMco', 'expense-item', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'uOOJn', 'touchstart', 'toDateString', 'rrhCK', 'dYraQ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'checked', 'yUVHb', 'irYjt', 'oHOOv', '\x20的旧格式数据翻译。', 'random', '#a4c2f4', '\x0a#\x20关于你\x20(', 'calendar', 'EKQyY', 'NXVnK', '#\x20记录是空的，没什么好总结的。', 'galgame-speaker', 'XamWj', 'gvaYL', '\x20个模型。', 'listenTogetherSession', 'characterEdit', '表情包已保存！正在刷新应用...', 'listen-together-backdrop', 'removeItem', 'typing-indicator', 'ZdArB', 'reset-card-button-2', 'add-chat-button', 'changedTouches', 'galgame-sprite', 'QZbZQ', 'vBLZu', 'input_', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'qIaTL', 'mdqHl', '</span>', '</div>', '|||CMD|||', 'modal-ok', '》吗？', 'currentTime', 'lastTimestamp', 'important', 'nKmWq', ']\x20[image]', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', 'LJUtC', 'FCuQj', 'cvosb', '334788qKalBw', '未知商品', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', '加载视奸记忆失败\x20(', 'chat-view-pane', 'wxhoM', 'ZMkcy', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'PbBgN', 'getMinutes', 'diary-entry\x20', ':</span>\x20', '错误：找不到签署契约的地方。', '</span>:\x20', 'emoji', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'edit-clear-history-button', '正在升级音乐卡片数据...', 'application/json', 'IYSNl', '</div>\x0a\x20\x20\x20\x20', 'upqqE', '一拳打爆', 'aGPVw', 'MfuXE', 'dock', '确定要删除这篇日记吗？此操作不可撤销。', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'gOGwk', 'translateX(-50%)', 'VoOIh', 'custom_font_ttf', 'home-dock', 'HBIeI', 'openai', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'sticker', '图片加载失败', '图片处理失败:\x20', '等你消息', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'nyebq', 'AI返回了无法解析的文本', 'upload-wallpaper-button', 'music-share-card', '角色已保存！', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'event-content-input', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'FKvwn', 'startsWith', 'assign', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'diary-modal-textarea', 'textShadow', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'CRVZt', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'preview-item', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'data:', '在所有地方的最后一次互动是在**:\x20', '对不起', 'customWallpaper', 'ORAkE', '有点破防', 'back-to-char-select-from-edit', '错误:\x20', '10px\x200', 'copy', 'xifKK', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'WrRwS', '同步已断开。', '--custom-font-family', 'NACxr', 'getItem', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'findIndex', 'displayUrl', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x22\x20class=\x22post-image\x22></div>', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'KQDST', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'QRvQE', 'querySelectorAll', '群聊已解散。', 'MIsbn', 'backgroundPosition', 'POST', 'artist', '编辑条目', 'feed-loader', 'Selng', 'group-delete', '.custom-multiselect\x20.select-box', 'music-library-item', '的转账', '\x0a-\x20**对话状态**:\x20群里已经有', 'YxgnH', 'mkZBk', '甜蜜地和你聊天', '确定要从圣殿中永久删除《', 'speaker-ai', 'app-music', '徽章已更换！', 'find', '\x0a-\x20你正在为一个名为“', 'cancel-transfer-button', '#a7c7e7', '测试动态已添加！', 'home', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'narrator', 'yZikW', '一个人可怜吃饭', 'transfer-amount-input', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'YqRbw', 'cancel-event-button', 'medium', '...', '0\x200\x20', 'kOnpZ', 'rHBKS', 'boundUserProfileId', 'is-today', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', 'songName', 'choices', '2-digit', 'FaQFn', 'cAqbt', '{userName}', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'moxvM', 'rPNZL', 'ZSmvp', 'TjPiz', 'time', 'info-file-input', 'OpenAI\x20API\x20错误:\x20', 'group-chat-name', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'musicPlayerState', '<span>--</span><span\x20class=\x22unit\x22>天</span>', '</p>', '无法保存聊天记录。', 'LSiQR', 'charAt', 'round', 'HBwZw', 'Jxxtc', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'back-to-diary-list', 'transform', '\x0a-\x20人设:\x20', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', '你好，世界\x20(Hello,\x20World)', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diaryView', '\x20记录)\x0a', 'info', 'Noir_Backup_', '点击选择\x20info.txt', 'char_avatar_', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', 'RYuHL', 'whispers', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', '别这样嘛我哭哭', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'hDAtN', 'chat-image-button', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'PsUJR', 'onerror', '确定要恢复这个角色的默认立绘位置吗？', '.snoop-main-grid', 'badgeState', 'mecik', 'qTEid', 'characterName', 'create_event', 'quotedMessage', 'NBpzj', 'TyEcL', 'hgbMi', 'cos', 'XjSen', 'src', 'lyPjd', '动态中的音乐搜索失败:', 'objectStore', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'meeting-list-container', '#ff9999', 'input[type=\x22checkbox\x22]:checked', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', 'back-to-snoop-list-from-phone', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', ']\x20[', '确定要删除角色“', 'ZmRbG', 'SoCVg', 'keys', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'dialogue', 'position', 'cqVzK', 'kWwDx', 'ROfnd', 'WnVLj', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'sprite-adjust-button', 'sXpPB', 'char-edit-css', '备忘录', '\x0a\x20\x20\x20\x20-\x20世界书[', '-\x20**你最后一次活动是在**:\x20', '<div\x20class=\x22loader-spinner\x22></div><span>', 'quoted-message-in-bubble', 'contactName', '全量导出失败:', '净化音乐封面时出错，真是的。', '星期六', 'vlmPH', '正在打包数据，请稍候...', 'IMjbG', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'filter', 'app-wallpaper', 'ulMiV', 'char-avatar-frame-url', 'music-input-backdrop', 'music-input-artist', 'edit-message-button', '图片预览失败:\x20', '分钟前', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'meeting-scene-view', '#ffcc66', 'QWxSg', '已恢复默认字体。', '</span><span\x20class=\x22unit\x22>天</span>', '[sticker:', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'char-edit-wallpaper-preview', 'knpGY', '”已成功导入！', 'snoop-dock', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', 'copy-summary-button', '#meeting-view-screen\x20.chat-input-area', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', '[发送了表情]', 'calendar-screen', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'world-book-list-container', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'yCDdg', 'querySelector', '该角色', '哼，这不是图片，你想让我压缩什么？', 'confirm-music-input', 'zpKpR', 'transfer-recipient-select', 'rQvCh', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', 'MOHZx', 'SXYFr', 'FURqv', 'upload-font-button', 'QBgpe', 'KFPOG', 'lyrics-file-input', 'jxezL', 'tag', '正在搜索音乐...', '”买过：“', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'ZTByJ', 'ovTKE', 'close-summary-button', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', '买新衣服', '纪念日', 'RAZZB', '\x20\x20-\x20用户ID:\x20', 'expanded', '<div\x20class=\x22post-comments-container\x22>', 'home-screen', 'chat-summarize-button', 'widget-prev-btn', 'IWHHC', 'transfer', 'rgba(0,\x200,\x200,\x200.4)', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'PejOB', 'gzXOk', 'SqsFv', '<span\x20class=\x22description\x22>', '正在准备音乐数据...', 'oEgxt', '还没有我的回应可以重新生成哦。', 'userProfile', 'sHwxy', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'clear', 'LZEBq', '字体更换成功！', '.listen-together-song', '-\x20**你们最后一次互动是在**:\x20', 'IrHah', 'xPjUu', '获取AI响应失败:', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', 'jCSQw', 'tQEKr', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'gtFkH', 'emote', 'cNlsU', 'map', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '25960PoUPzM', 'name', '我来搞定', 'character-edit-title', 'height', 'setItem', 'authorType', 'EAkLX', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'rCSRk', 'swWyU', 'KhJpZ', 'WpSqC', 'Cdnvi', 'altar-slot-lyrics', 'QOpyA', 'AXwhm', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'flatMap', '购物消费', 'reset-widgets-position-button', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'post_', 'kHAkT', '\x20\x20-\x20角色ID:\x20', 'QyaBs', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'diaries', '<div\x20class=\x22post-likes\x22>', 'HrAnv', 'normal,\x20happy,\x20angry,\x20sad,\x20shy', 'exec', '哼，不好好写清楚花在哪、花了多少，我怎么记？', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', 'quote-preview-sender', 'userAvatarFrameUrl', '在准备动态回复时，读取图片失败:', 'img', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'DVqGc', 'wgIyE', 'EnNLc', 'uVkCw', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'diary-modal-cancel', 'qXqzy', 'AsjyP', 'group-bg-input', 'Cgoxp', 'TvFtR', '<span\x20class=\x22', '\x0a#\x20你的个性（节选）\x0a', 'sticker-content', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', '</span><span\x20class=\x22amount\x22>总计:\x20', '\x20\x20具体对话如下：\x0a', 'revokeObjectURL', 'http', 'JKTsc', 'friend-circle-edit-screen', 'TVMhA', 'SanjS', '.load-more-btn', 'ocIuV', 'test_post_', 're-record-button', 'JLUfF', 'beforeend', 'JFVcW', 'sprite-slider-x', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'NoirCharacterCard', 'nzSWY', 'match', 'agUap', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', '我正在说话呢，别打岔！', 'widget_card', '兼容模式成功，已将\x20', 'activeFriendCircleId', 'OssHd', 'add-expense-button', 'user-avatar-frame-url-in-chat', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'documentElement', '点击选择\x20.mp3\x20或\x20.flac', '浏览器', 'jOCGB', 'TkMbS', '#ffb366', '在“一起听”邀请中，净化封面失败:', '.listen-together-accept-btn', 'CwrFW', 'qjZis', 'bpkjg', '确定要删除这个条目吗？此操作不可撤销。', 'jciAZ', '{charName}', '[用户分享了音乐：', 'group-chat-member-list', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', 'reduce', '#66b3ff', 'LYAoD', '.message.ai', 'app-pages-slider', 'RHcma', 'Cojgo', 'chat', 'music-library-container', 'NoirCustomFont', 'cancel', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'EFGeX', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '正在写入新数据...', 'forceWhiteClock', 'last_message_preview', '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕', 'removeProperty', 'className', 'WnJNj', 'HLKJZ', 'music-player-bar', 'EVDkQ', 'characterId', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diary-get-reply-button', '正在为你搬运旧壁纸到新仓库...', 'abort', 'JSON\x20解析失败!\x20错误原因:', '\x0a\x20\x20近期记忆:\x0a', 'VrLRG', 'MmKkf', 'cRTJt', 'chat-sticker-button', 'ZYNYG', '星期日', 'PIcLI', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', 'ssFTs', 'group-edit-members', '歌名和歌手都不能为空！', 'uhOhd', '\x22\x20的聊天记录吗？此操作不可撤销。', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', '未找到可用模型。', 'title', 'top', 'XVyKi', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'senderId', '正在解析角色卡...', 'expense-description', 'removeEventListener', 'ozcYP', 'eZVvc', 'bites', 'niKog', '28%', '导出过程中发生严重错误:\x20', 'YcAwv', '\x0a##\x20条目:\x20', 'zIial', 'message-bubble-row', 'trim', '#snoop-app-view-container\x20.snoop-app-header', 'AaChK', 'json', 'fCgKY', '正在铭刻字体...', 'rSKms', '44744vWuHVu', 'save-user-profile-button', 'hBqWJ', 'wZYdb', 'YidwZ', 'vIGAg', 'nJbNQ', 'back-to-home-from-calendar', 'app-user-profiles', '无语但是随便吧', 'version', 'zBGKw', 'oZcLV', 'diary-modal-save', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'ULRga', 'choice-create-group', 'GDlXo', 'ESXFi', 'gQkyX', '哼，正在开始净化你那被污染的聊天记录...', '（对话结束）', 'touchend', '图标处理失败:\x20', 'lyrics', 'appIconPosition_app-user-profiles', 'OzaJa', 'ImsmK', 'Bearer\x20', 'iCaWh', 'length', '\x20个成员', '无法从\x20IndexedDB\x20加载聊天图片:', 'sZsSl', '卡片\x202\x20已移除。', '\x20条动态...', 'snoop_', 'mnFNH', 'response', 'VOjUU', 'toString', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'activeMeetingScriptQueue', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'TlsCP', '.listen-together-card', 'block', 'VLKHO', 'GjEoB', 'mousedown', 'iVzRK', '.diary-entry', 'tkZFi', 'bTfMa', 'modal-cancel', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x20时出错:', 'activeListenSession', '34%', 'add-event-modal-title', 'head', '这个也是摆设，别点了。', 'onloadend', 'PoHdV', 'key', 'type', 'BHsBN', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'vLRzY', 'zZfZl', 'xlGZE', 'DcirU', '上传失败了，笨蛋！\x20', 'diary-action-modal-', 'NlGEM', '群聊至少需要2名成员。', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'splice', 'amount', '转给\x20', 'user-profile-screen', 'lt-ui-cover-art', 'unified-audio-player', '说了是摆设啦，笨蛋。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '加载已保存字体失败:', 'gvLwp', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'ulqZH', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'galgame-sprite-controls', 'User', '其他杂项', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', 'ReKBf', 'audio', 'bHVdr', 'chat-listen-together-button', 'insertAdjacentHTML', 'JyIPD', '准备调用\x20generateAs...', 'then', 'modal-root', '好的，我记住了这些人设和历史。现在我们开始对话。', '--primary-hue', 'parts', 'IawIt', '50KAQtni', '缓存命中:\x20', 'onsuccess', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', '选择聊天', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'NNPCX', 'todo-item-small', 'url(', 'get', '\x20张旧的动态图片。', 'bmyFC', 'textContent', 'lazy', 'parentElement', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'toBlob', 'getDate', '刚刚发布了一条动态，内容是：“', 'user', 'select', 'fVOFm', '[图片]', '确定要删除这个好友圈吗？此操作不可撤销。', '#member-select-', 'hydSX', '”，但没找到人)', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', '/v1beta/models/', 'stbAn', '委屈那我歇了', 'home-clock-container', 'NRWFp', 'next-month-btn', 'ljsMQ', '哼，你这字体文件有问题，用不了。', 'app-settings', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'high', 'pop', 'PGWMW', '点击选择\x20.jpg\x20或\x20.png', 'add-friend-circle-button', 'app-calendar', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', '[AI分享了音乐：', '加载角色\x20', 'musicLibrary', 'charId', 'cardState', 'FXpxQ', 'ySrUq', 'JSON解析失败\x20(', 'marginBottom', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', 'api-model', 'pxWWO', 'widget-bg-input', 'pvkMT', 'tvirj', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'anthropic', 'image/jpeg', 'rHEEv', 'card-widget', 'KyhuO', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'ejUjY', ')，启动兼容模式...', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', '加载聊天失败:\x20', 'iYlSE', 'shiftKey', '批量生成动态失败:\x20', 'vsVbq', 'meeting-view-screen', 'chats', 'paused', 'some', 'user-post-attachment-preview', 'WKFlI', 'groupChatCreate', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'user-post-music-button', '\x22>&times;</button></div>', 'NDFKC', '.screen.active', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'music_cover_', 'listen-together-invite', 'LFQEY', '包含所有图片和音乐的全量数据已成功导出！', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'daily-expenses-list', 'concat', 'toljp', 'pMIei', 'backgroundImage', 'noir-author-mark', '请根据以上所有规则，生成\x20', 'VqTCQ', 'LGYOw', 'KCVgW', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'replaceAll', 'var(--text-color)', 'ScWte', 'inline-block', 'EcXwI', 'chatHistory_', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', 'cancel-listen-together', 'now', 'lRLXT', 'WUxji', '[AI返回了无法解析的剧本:\x20', 'diary-page', '群聊\x20(', '(想转账给“', 'focus', 'XRvxP', '无描述', '处理\x20', 'tmvaV', 'Upgrading\x20database\x20to\x20version\x20', '--widget-cover-image', 'feed-bg-input', 'contains', 'WqvWw', 'input:checked', '\x20转账\x20', 'getMonth', 'edit-message-backdrop', '分钟前聊过，请注意衔接。', '小时前），可以简单问候一下对方现在的状态。\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'YhSdF', 'BlKbS', 'result', 'confirm-transfer-button', 'diaryPressTimer', '-\x20你曾经搜索过：“', '加载卡片图片失败', 'MDzmd', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'fBatX', '档案已复制到剪贴板！', 'defaultPrevented', 'abs', 'noir_migration_fc_v1_complete', 'music-screen', 'friend-circle-edit-bind-user', 'all', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', 'stringify', 'delete', '\x0a-\x20当前精确时间:\x20', '-\x20**你与', '300%', 'sntQQ', 'mXwqi', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'countdown-timer', '[AI向\x20', 'gMddi', 'avatar', 'linkedWorldBookIds', 'lt-ui-lyrics-container', 'cEZEi', 'perChatContextLines', ']\x20[sticker:', 'GQZXM', '正在连接同步频道...', 'user_', 'diary-send-button', 'has', '卡片已移除。', 'clhie', 'cgIMM', 'activeChatId', '<span>', 'snoopList', '保存失败:\x20', 'toLocaleTimeString', 'qjEAY', 'comments', 'hyKdH', '\x20(分享了歌曲:\x20', 'no-action-modal', 'nbRIz', 'theme-hue-slider', '”已存入圣殿。', '乐于助人的助手', 'HjRZY', '好友圈档案柜是空的，无需净化。', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', '正在处理图片...', 'listen-together-modal', 'scrollIntoView', '<p\x20class=\x22music-post-thought\x22>', 'PkSBG', 'category', 'galgame-view-container', '已恢复默认。', 'sprite-slider-scale', 'innerHTML', '正在为你切换新的歌曲...', 'fetch-models-button', 'events', 'gmcKD', 'recipientId', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'YMsRr', 'audio-file-input', '\x0a\x0a#\x20关于对话者“', 'uxFYM', 'DwgNe', '</pre>', 'AI整理失败了，哼:\x20', 'gemini', 'music-upload-altar-screen', '导入角色卡失败:', '-\x20你记得曾和“', 'bpFIV', 'app-snoop', 'vertical', 'play', 'HgvEk', 'statusText', 'font-input', 'indexOf', 'snoop-temp-style', 'appIconPosition_app-wallpaper', '至少要保留一个用户。', '71%', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'transparent', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', 'toggle-meeting-view-button', 'PFmiA', '未知联系人', 'GdArH', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'edit-delete-char-button', 'post_user_', 'end', 'GTQSE', 'sort', 'SEqwP', '好委屈但是不能哭', 'vjzfW', 'translateX(-', '近期没有特别安排', 'delete-world-book-button', 'sprite-slider-y', 'dTzdC', '编辑角色', 'TXFqB', '</span></div>', 'MCSau', '&quot;', 'eBMHu', 'visible', '-\x20你点过一份外卖：“', 'qAbab', 'user-post-textarea', 'PfNSA', 'diary-list-screen', '4136995uwijML', 'back-to-home-from-accounting', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'isOffline', 'left', '已设为当前用户！', 'diaryCurrentPage', 'thought', 'keydown', 'world-book-checkboxes-container', '\x20添加了新的纪念日：', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'long', '未命名角色', 'VLCjd', 'last_edited', 'cost', 'modal-mask', 'listen-together-ui', 'zGoeQ', '-\x20**当前精确时间**:\x20', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'preferences', 'Assistant', 'DHLwB', 'eigfz', 'remove-font-button', '.char-info-wrapper', 'friend-circle-list-screen', 'QAQVT', 'music-input-song', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', 'getSelection', 'wants', 'group-settings-screen', 'reverse', 'OGQfe', 'friendCircles', 'BTyLm', 'HQlsy', 'floor', 'fzobC', 'choice-create-character', 'todo', '已自动断开与其他人的听歌同步。', 'kZOei', '#diary-action-delete', 'forEach', 'RZxfd', 'preview_', 'noir_data_migration_v1_complete', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', '逗你开心', 'playableUrl', 'filled', 'url(\x27', 'currentlyPlayingIndex', 'mcnJe', 'AeHis', 'gvndr', '很期待', 'AbortError', '生成动态失败:', 'system', '##\x20', 'pptoy', 'api-provider', 'sgBcG', 'character-list', 'toDataURL', 'image_url', 'XBITR', 'luJWv', '今天\x20', 'target', 'settings', 'char_sprite_normal_', 'YieiX', 'min', 'BTzfl', 'eWuQy', 'ended', 'message', 'isGenerating', '你还没保存这个角色呢，导什么导？', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'bEOai', 'short', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', '\x0a\x0a#\x20用户资料库\x0a']; _0x1487 = function () { return _0x9a325c; }; return _0x1487(); }
  </script>


  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
