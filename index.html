<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 10px;
      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* 每页占滑块的一半，也就是一个屏幕的宽度 */
      height: 100%;
      flex-shrink: 0;
      /* 防止被挤压 */
      position: relative;
      /* 让你放在里面的绝对定位图标有家可回 */
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <img id="user-avatar-preview" class="avatar-preview" alt="User Avatar Preview">
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>

              <div id="home-dock">
                <div class="app-icon app-icon-large" id="app-chat">
                  <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                      viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round">
                      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg></div>
                  <span>聊天</span>
                </div>
                <div class="app-icon" id="app-music">
                  <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                      viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round">
                      <path d="M9 18V5l12-2v13"></path>
                      <circle cx="6" cy="18" r="3"></circle>
                      <circle cx="18" cy="16" r="3"></circle>
                    </svg></div>
                  <span>动态</span>
                </div>
                <div class="app-icon" id="app-meeting">
                  <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                      viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round">
                      <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                      <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
                    </svg></div>
                  <span>见面</span>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <img id="char-edit-wallpaper-preview" style="width: 100%; height: 100%; object-fit: cover;" alt="聊天壁纸预览">
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <img id="char-edit-offline-bg-preview" style="width: 100%; height: 100%; object-fit: cover;" alt="见面背景预览">
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <img id="char-edit-sprite-normal-preview" class="avatar-preview" style="width: 80px; height: 80px;"
                  alt="平常立绘">
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <img id="char-edit-sprite-happy-preview" class="avatar-preview" style="width: 80px; height: 80px;"
                  alt="喜立绘">
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <img id="char-edit-sprite-angry-preview" class="avatar-preview" style="width: 80px; height: 80px;"
                  alt="怒立绘">
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <img id="char-edit-sprite-sad-preview" class="avatar-preview" style="width: 80px; height: 80px;"
                  alt="哀立绘">
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <img id="char-edit-sprite-shy-preview" class="avatar-preview" style="width: 80px; height: 80px;"
                  alt="害羞立绘">
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <img id="group-bg-preview" style="width: 100%; height: 100%; object-fit: cover;" alt="群聊背景预览">
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; outline: none; color: var(--text-color);"></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>




  <script>

    const _0x359829 = _0x2f04; (function (_0x1172ca, _0x451f19) { const _0xc29669 = _0x2f04, _0x180abb = _0x1172ca(); while (!![]) { try { const _0x385b05 = -parseInt(_0xc29669(0x26f)) / 0x1 + -parseInt(_0xc29669(0x6b1)) / 0x2 + parseInt(_0xc29669(0x565)) / 0x3 * (parseInt(_0xc29669(0x23c)) / 0x4) + parseInt(_0xc29669(0x626)) / 0x5 * (-parseInt(_0xc29669(0xa5b)) / 0x6) + -parseInt(_0xc29669(0x2af)) / 0x7 * (parseInt(_0xc29669(0x12f)) / 0x8) + -parseInt(_0xc29669(0x1e4)) / 0x9 * (-parseInt(_0xc29669(0x746)) / 0xa) + parseInt(_0xc29669(0x123)) / 0xb * (parseInt(_0xc29669(0x1f4)) / 0xc); if (_0x385b05 === _0x451f19) break; else _0x180abb['push'](_0x180abb['shift']()); } catch (_0x20426e) { _0x180abb['push'](_0x180abb['shift']()); } } }(_0x27bb, 0xe6f29)); const _0x4e50b4 = _0x359829(0x906), _0x1f7efd = _0x359829(0x430), _0x569363 = _0x359829(0x78c), _0x53b35b = document['createElement'](_0x359829(0x636)); _0x53b35b['id'] = _0x359829(0x3fe), document[_0x359829(0x506)]['appendChild'](_0x53b35b); var _0x4025fd, _0x249a18 = null; let _0x288407 = [], _0x5c74d7 = ![], _0x577901 = { 'x': 0x0, 'y': 0x0 }; function _0x26ed76(_0x4a6784) { const _0x28498e = _0x359829; return (_0x4025fd?.['characters'] || [])[_0x28498e(0x32b)](_0x1af93c => _0x1af93c['id'] === _0x4a6784); } const _0xe7edb9 = _0x359829(0x1c7), _0x2430ff = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', _0x535078 = _0x359829(0x9f2), _0x4d1cd1 = [{ 'name': _0x359829(0x618), 'url': _0x359829(0x39a) }, { 'name': '崩溃', 'url': _0x359829(0x8dd) }, { 'name': '生病', 'url': _0x359829(0x5e1) }, { 'name': '工作', 'url': _0x359829(0x83b) }, { 'name': _0x359829(0x39c), 'url': _0x359829(0x3da) }, { 'name': '弱小委屈但凶恶', 'url': 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg' }, { 'name': _0x359829(0x273), 'url': _0x359829(0xa43) }, { 'name': '期待', 'url': _0x359829(0x11e) }, { 'name': '喜欢', 'url': _0x359829(0x9b6) }, { 'name': _0x359829(0x4a4), 'url': _0x359829(0x460) }, { 'name': _0x359829(0x659), 'url': _0x359829(0x92d) }, { 'name': '委屈', 'url': _0x359829(0xa6a) }, { 'name': '加油', 'url': _0x359829(0x6f7) }, { 'name': '对的', 'url': _0x359829(0x800) }, { 'name': '不满', 'url': _0x359829(0xa87) }, { 'name': '很期待', 'url': _0x359829(0x706) }, { 'name': '猫猫撒娇', 'url': 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif' }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg' }, { 'name': '平静', 'url': _0x359829(0xa5a) }, { 'name': '咬你', 'url': _0x359829(0x560) }, { 'name': '咱俩天下第一好', 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': _0x359829(0x691) }, { 'name': '摸鱼', 'url': 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg' }, { 'name': _0x359829(0x26a), 'url': _0x359829(0x2a5) }, { 'name': _0x359829(0x7e5), 'url': _0x359829(0x37c) }, { 'name': _0x359829(0x9ea), 'url': _0x359829(0x8bf) }, { 'name': _0x359829(0xaaf), 'url': _0x359829(0x477) }, { 'name': _0x359829(0x605), 'url': _0x359829(0x28a) }, { 'name': _0x359829(0x9e7), 'url': _0x359829(0x38b) }, { 'name': _0x359829(0x414), 'url': _0x359829(0x813) }, { 'name': _0x359829(0x1b7), 'url': _0x359829(0x6fa) }, { 'name': _0x359829(0x8c4), 'url': _0x359829(0x954) }, { 'name': '勉强但是好吧', 'url': _0x359829(0x4b2) }, { 'name': _0x359829(0x319), 'url': 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg' }, { 'name': _0x359829(0x8a1), 'url': _0x359829(0x9d3) }, { 'name': '干劲满满', 'url': _0x359829(0x609) }, { 'name': _0x359829(0x455), 'url': 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg' }, { 'name': _0x359829(0x2a0), 'url': 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg' }, { 'name': _0x359829(0x50f), 'url': _0x359829(0x55c) }, { 'name': _0x359829(0x153), 'url': _0x359829(0x29a) }, { 'name': _0x359829(0x229), 'url': _0x359829(0x6a8) }, { 'name': _0x359829(0x3ef), 'url': _0x359829(0x715) }, { 'name': '一拳打爆', 'url': _0x359829(0x2f3) }, { 'name': '绝对不想', 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': _0x359829(0x21c), 'url': _0x359829(0xaa4) }, { 'name': _0x359829(0x6f2), 'url': _0x359829(0x500) }, { 'name': '甜蜜地和你聊天', 'url': _0x359829(0x4cb) }, { 'name': _0x359829(0x98b), 'url': _0x359829(0xa03) }, { 'name': _0x359829(0x6e2), 'url': _0x359829(0x71f) }, { 'name': _0x359829(0x1ca), 'url': _0x359829(0x62d) }, { 'name': _0x359829(0x200), 'url': _0x359829(0xa11) }, { 'name': '我来搞定', 'url': _0x359829(0xa41) }, { 'name': _0x359829(0x899), 'url': _0x359829(0x56d) }, { 'name': '等你', 'url': 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg' }, { 'name': _0x359829(0x3a7), 'url': _0x359829(0x6d7) }, { 'name': _0x359829(0x3b3), 'url': 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg' }, { 'name': '喝酒', 'url': _0x359829(0x778) }, { 'name': _0x359829(0x2d7), 'url': _0x359829(0x3bd) }, { 'name': '呜呜', 'url': _0x359829(0x30a) }, { 'name': _0x359829(0x9fd), 'url': _0x359829(0xa57) }, { 'name': '我错了', 'url': 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg' }, { 'name': '出去玩', 'url': _0x359829(0x75a) }, { 'name': _0x359829(0x9a2), 'url': 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg' }, { 'name': _0x359829(0x160), 'url': _0x359829(0xa22) }], _0x42e914 = { 'beige': { 'name': _0x359829(0x44a), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x359829(0xa7c), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x359829(0x5cb), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x359829(0x5a8), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x359829(0x20b)](_0x359829(0x5e9), () => { const _0x2a98b7 = _0x359829, _0x5007ad = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1be)), _0x277379 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x994)), _0xd16b95 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x505)), _0x19303f = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x137)), _0x5aadf6 = document['getElementById'](_0x2a98b7(0x6f3)), _0x7ac60 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x279)), _0x3d3ca7 = document['getElementById']('transfer-recipient-group'), _0x560e44 = document['getElementById']('transfer-recipient-select'), _0x26b374 = document[_0x2a98b7(0x4b6)]('transfer-amount-input'), _0x5980ff = document['getElementById']('chat-reroll-button'), _0x4c2fc9 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x66e)), _0x1c739a = document['getElementById']('summarize-modal'), _0x4438b6 = document['getElementById'](_0x2a98b7(0x4fe)), _0x31b588 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3f9)), _0x1785ed = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x93a)), _0x117084 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa18)), _0x9e5889 = document[_0x2a98b7(0x4b6)]('char-edit-wallpaper-preview'), _0x3c0d66 = document['getElementById'](_0x2a98b7(0xa51)), _0x308fa1 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x716)), _0x552584 = document['getElementById'](_0x2a98b7(0x4ce)), _0x199ed0 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x9f0)), _0x20e2a5 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa38)), _0x258741 = document['getElementById'](_0x2a98b7(0xabe)), _0x5e9aaa = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x512)), _0x139a48 = document['getElementById'](_0x2a98b7(0x530)), _0x5a3372 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x4a0)), _0xc4b19 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x8b2)); async function _0x42fd48(_0x16e633) { const _0xf3c68e = _0x2a98b7; try { if (_0xf3c68e(0x673) === 'hDtpG') { const _0x13f61f = _0x365be6(_0x267018[_0xf3c68e(0x2db)][0x0]); return _0x13f61f?.[_0xf3c68e(0x5f1)] || 'AI'; } else { const _0x2b08b2 = URL[_0xf3c68e(0x798)](_0x16e633), _0x3b487c = 'NoirCustomFont', _0x9c0f3d = _0xf3c68e(0x9df) + _0x3b487c + _0xf3c68e(0xa1b) + _0x2b08b2 + _0xf3c68e(0x4bc); _0x53b35b[_0xf3c68e(0x3c8)] = _0x9c0f3d, document['documentElement'][_0xf3c68e(0x636)]['setProperty'](_0xf3c68e(0x9d8), '\x27' + _0x3b487c + '\x27'), _0xc4b19[_0xf3c68e(0xab3)] = _0xf3c68e(0x661); } } catch (_0x4f9a52) { console[_0xf3c68e(0x963)]('字体应用失败:', _0x4f9a52), _0x26f8b2(_0xf3c68e(0x6bc)); } } async function _0x379704() { const _0x5e3a14 = _0x2a98b7; try { if (_0x5e3a14(0x421) !== _0x5e3a14(0x613)) { const _0x2fa333 = await _0x34b988('custom_font_ttf'); _0x2fa333 && (console['log']('检测到已保存的字体，正在应用...'), await _0x42fd48(_0x2fa333)); } else { const _0x830e17 = _0x35269b[_0x5e3a14(0x293)][_0x5e3a14(0x32b)](_0x9ddc4e => _0x9ddc4e['id'] === _0x518f3c); if (_0x830e17) _0x378993[_0x5e3a14(0x2b6)](_0x830e17, _0x520e41); } } catch (_0x210f61) { console['error'](_0x5e3a14(0x728), _0x210f61); } } async function _0x30928b(_0x4b1667) { const _0x53e12b = _0x2a98b7; if (_0x53e12b(0x56b) === _0x53e12b(0x56b)) { const _0x470462 = _0x4b1667[_0x53e12b(0x492)][_0x53e12b(0x1f1)][0x0]; if (!_0x470462 || !_0x470462['name'][_0x53e12b(0x577)]()[_0x53e12b(0x71c)]('.ttf')) { _0x26f8b2('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } _0x32d19f(!![], '正在铭刻字体...'); try { await _0x5a7151(_0x53e12b(0x16c), _0x470462), await _0x42fd48(_0x470462), _0x26f8b2('字体更换成功！'); } catch (_0xef0bfb) { _0x26f8b2(_0x53e12b(0x971) + _0xef0bfb[_0x53e12b(0x973)]); } finally { _0x32d19f(![]), _0x5a3372['value'] = ''; } } else { const _0x32c870 = new _0x7eb6c8(); _0x32c870[_0x53e12b(0x5e2)] = () => _0x151859(_0x32c870['result']), _0x32c870['onerror'] = _0x2b7052, _0x32c870[_0x53e12b(0x2e3)](_0x5b465a); } } async function _0x4bd9e1() { const _0xade8fe = _0x2a98b7, _0x32817b = await _0x2f2e39(_0xade8fe(0x2d9)); if (_0x32817b) { if (_0xade8fe(0x84c) === _0xade8fe(0x84c)) try { if ('YXGNu' !== _0xade8fe(0x6ee)) { if (!_0x5b5de4) return []; const _0xadcb28 = _0xbb7eab(_0x2a6b37)[_0xade8fe(0x345)](), _0x18b000 = _0xadcb28[_0xade8fe(0x80a)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0xade8fe(0x30c)](_0x71fc15 => _0x71fc15[_0xade8fe(0x345)]())[_0xade8fe(0x1f9)](_0x4626ab); if (_0x18b000[_0xade8fe(0x84b)] > 0x0) return _0x18b000['slice'](0x0, 0x9); return [_0xadcb28][_0xade8fe(0x1f9)](_0x30c6f3); } else await _0x1d61a7('custom_font_ttf'), _0x53b35b['innerHTML'] = '', document['documentElement']['style']['removeProperty'](_0xade8fe(0x9d8)), _0xc4b19[_0xade8fe(0xab3)] = _0xade8fe(0x727), _0x26f8b2(_0xade8fe(0x57b)); } catch (_0x135790) { _0x26f8b2('恢复失败了:\x20' + _0x135790[_0xade8fe(0x973)]); } else { const _0x450a8d = _0x50070b(); _0x450a8d && _0x450a8d[_0xade8fe(0x4dc)] && _0x450a8d[_0xade8fe(0x4dc)][_0xade8fe(0x387)] && (_0x391d68['style']['display'] = 'flex', _0x262a3d(() => _0xb7905b[_0xade8fe(0x544)]['add'](_0xade8fe(0x187)), 0xa)); } } } function _0x529f2f() { const _0x2fbc1c = _0x2a98b7; if (_0x2fbc1c(0x226) === _0x2fbc1c(0x226)) { const _0x2b358e = document['getElementById']('theme-hue-slider'); if (!_0x2b358e) return; const _0x351e0e = localStorage['getItem'](_0x2fbc1c(0x902)) || '35'; document[_0x2fbc1c(0x196)][_0x2fbc1c(0x636)][_0x2fbc1c(0x6d0)]('--primary-hue', _0x351e0e), _0x2b358e[_0x2fbc1c(0x95e)] = _0x351e0e, _0x2b358e[_0x2fbc1c(0x20b)](_0x2fbc1c(0x60c), () => { const _0x304e62 = _0x2fbc1c, _0x6de889 = _0x2b358e[_0x304e62(0x95e)]; document[_0x304e62(0x196)][_0x304e62(0x636)][_0x304e62(0x6d0)](_0x304e62(0x1da), _0x6de889), localStorage[_0x304e62(0x5f0)](_0x304e62(0x902), _0x6de889), _0xc3cdb6(); }); } else _0x47ed2d[_0x2fbc1c(0xab3)] = _0x5cf724['from'](_0x52d664)[_0x2fbc1c(0x30c)](_0x202212 => _0x202212[_0x2fbc1c(0x8a2)][_0x2fbc1c(0xab3)]['trim']())[_0x2fbc1c(0x602)]('、'); } function _0x14a7a9() { const _0x277a0a = _0x2a98b7, _0x466654 = document[_0x277a0a(0x4b6)](_0x277a0a(0x3c5)); if (!_0x466654) return; const _0x2a0ecc = localStorage['getItem'](_0x277a0a(0x6c2)) || '80'; document[_0x277a0a(0x196)]['style'][_0x277a0a(0x6d0)](_0x277a0a(0x6c4), _0x2a0ecc + '%'), _0x466654[_0x277a0a(0x95e)] = _0x2a0ecc, _0x466654[_0x277a0a(0x20b)](_0x277a0a(0x60c), () => { const _0x42c2c6 = _0x277a0a; if (_0x42c2c6(0x86b) !== _0x42c2c6(0x86b)) try { const _0x4c3006 = { 'characters': _0x192b64[_0x42c2c6(0x61c)], 'worldBooks': _0x311947[_0x42c2c6(0xa3c)], 'chats': _0x19999e[_0x42c2c6(0x132)], 'userProfile': _0x3a60bb[_0x42c2c6(0x146)], 'apiSettings': _0x1ee97c[_0x42c2c6(0x2c2)], 'preferences': _0x1af7a9[_0x42c2c6(0x271)], 'activeChatId': _0x58ef8d[_0x42c2c6(0xa4d)], 'diaries': _0x2775a7[_0x42c2c6(0xab2)], 'friendCircles': _0x2d7f91['friendCircles'], 'activeFriendCircleId': _0x3f79e4[_0x42c2c6(0x31a)], 'userProfiles': _0x2dc5b0[_0x42c2c6(0x293)], 'activeUserProfileId': _0x248c8b[_0x42c2c6(0x4a1)], 'accountingData': _0xc787a3[_0x42c2c6(0x30e)], 'accountingLedger': _0x2debf8[_0x42c2c6(0x961)] }; _0x290dbf[_0x42c2c6(0x5f0)](_0x42c2c6(0xa8a), _0x5c7f25[_0x42c2c6(0x49f)](_0x4c3006)); } catch (_0x3df2a9) { _0x1abc89[_0x42c2c6(0x963)](_0x42c2c6(0x965), _0x3df2a9), _0xe735d0(_0x42c2c6(0x734)); } else { const _0x1fa483 = _0x466654[_0x42c2c6(0x95e)]; document[_0x42c2c6(0x196)][_0x42c2c6(0x636)][_0x42c2c6(0x6d0)]('--primary-lightness', _0x1fa483 + '%'), localStorage[_0x42c2c6(0x5f0)](_0x42c2c6(0x6c2), _0x1fa483), _0xc3cdb6(); } }); } function _0xc3cdb6() { const _0x111aba = _0x2a98b7; if (_0x111aba(0x4e5) === _0x111aba(0x4e5)) { const _0x266cb7 = document[_0x111aba(0x4b6)]('home-clock-container'); if (!_0x266cb7) return; if (_0x4025fd['preferences'][_0x111aba(0x480)]) { if (_0x111aba(0x15a) !== _0x111aba(0x369)) _0x266cb7[_0x111aba(0x636)][_0x111aba(0x94c)] = _0x111aba(0x947), _0x266cb7[_0x111aba(0x636)][_0x111aba(0x7c6)] = _0x111aba(0x1a8); else { _0x251389[_0x111aba(0x9a4)][_0x168e2b] = null; if (_0x269fa4 === _0x111aba(0x3b9)) _0x253fa9[_0x111aba(0x9a4)]['imageId'] = null; _0x2fc043(); } } else _0x266cb7[_0x111aba(0x636)][_0x111aba(0x94c)] = _0x111aba(0x3a9), _0x266cb7[_0x111aba(0x636)][_0x111aba(0x7c6)] = _0x111aba(0x55f); } else _0x2bac7d[_0x111aba(0x5f0)]('chatHistory_' + _0x4da9c5['activeChatId'], _0x17cd09['stringify'](_0x23e0d7[_0x111aba(0x24a)])); } function _0x4e3fa7() { const _0x145e37 = _0x2a98b7, _0x2f5e0b = document[_0x145e37(0x4b6)](_0x145e37(0x409)); if (!_0x2f5e0b) return; _0x2f5e0b[_0x145e37(0x4df)] = _0x4025fd[_0x145e37(0x271)][_0x145e37(0x480)] || ![], _0x2f5e0b[_0x145e37(0x20b)](_0x145e37(0x6a4), () => { const _0x13b410 = _0x145e37; _0x4025fd['preferences'][_0x13b410(0x480)] = _0x2f5e0b['checked'], _0x33c083(), _0xc3cdb6(); }); } _0x258741[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x508cfe), _0x199ed0[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x2276e5 = _0x2a98b7; _0x1c3935(), _0x20e2a5[_0x2276e5(0xab8)](); }), _0x20e2a5[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x2ecfde); const _0xbc6ebf = { 'home': document['getElementById'](_0x2a98b7(0xa04)), 'chat': document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa37)), 'settings': document['getElementById']('settings-screen'), 'userProfile': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x8c1)), 'characterEdit': document['getElementById'](_0x2a98b7(0x930)), 'groupChatCreate': document[_0x2a98b7(0x4b6)]('group-chat-create-screen'), 'wallpaper': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3b5)), 'worldBook': document['getElementById'](_0x2a98b7(0x871)), 'worldBookEditor': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x894)), 'groupSettings': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x4b1)), 'music': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x169)), 'friendCircleList': document['getElementById'](_0x2a98b7(0xa0e)), 'friendCircleEdit': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x7b7)), 'meetingList': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x92f)), 'meetingView': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x958)), 'userProfileList': document[_0x2a98b7(0x4b6)]('user-profile-list-screen'), 'diaryList': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x503)), 'diaryView': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3db)), 'musicLibrary': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x5d4)), 'musicUploadAltar': document[_0x2a98b7(0x4b6)]('music-upload-altar-screen'), 'accounting': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x541)), 'snoopList': document['getElementById'](_0x2a98b7(0x9d9)), 'snoopPhone': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x893)) }, _0xb13c37 = document[_0x2a98b7(0x4b6)]('upload-feed-bg-button'), _0x6016af = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x58c)), _0x380874 = document['getElementById'](_0x2a98b7(0x8e9)), _0x163b59 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x748)), _0x281e97 = document['getElementById']('app-world-book'), _0x573de6 = document[_0x2a98b7(0x4b6)]('back-to-home-from-wallpaper'), _0x3135a2 = document[_0x2a98b7(0x4b6)]('wallpaper-input'), _0x1b2695 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x7a5)); document['getElementById']('reset-desktop-button')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), async () => { const _0x50b2cb = _0x2a98b7; if ('ehilv' === _0x50b2cb(0x89b)) { const _0x402f57 = await _0x2f2e39(_0x50b2cb(0x3c1)); if (_0x402f57) { localStorage['removeItem']('badgeState'), localStorage[_0x50b2cb(0x6f1)](_0x50b2cb(0x21f)), localStorage[_0x50b2cb(0x6f1)](_0x50b2cb(0x6a9)), localStorage['removeItem'](_0x50b2cb(0x464)); const _0x2348cb = []; for (let _0x114b75 = 0x0; _0x114b75 < localStorage['length']; _0x114b75++) { if (_0x50b2cb(0x7b3) === _0x50b2cb(0x5bd)) { const _0x244f1a = _0x4834ee['transaction'](_0x59ebd1, _0x50b2cb(0x431)), _0x26e766 = _0x244f1a['objectStore'](_0x3afd31), _0x400d20 = _0x26e766[_0x50b2cb(0x1e3)](_0x9372b); _0x400d20[_0x50b2cb(0x62f)] = () => _0xf5e067(), _0x400d20[_0x50b2cb(0x8ec)] = () => _0x4d9ca1(_0x400d20[_0x50b2cb(0x963)]); } else { const _0x7a94de = localStorage[_0x50b2cb(0xa7f)](_0x114b75); _0x7a94de && _0x7a94de[_0x50b2cb(0x914)]('appIconPosition_') && (_0x50b2cb(0x5eb) === _0x50b2cb(0x337) ? _0xb77371 = _0x290592(_0x126ecc[_0x50b2cb(0x2db)][0x0]) : _0x2348cb[_0x50b2cb(0x65b)](_0x7a94de)); } } _0x2348cb[_0x50b2cb(0x6ff)](_0x593797 => localStorage[_0x50b2cb(0x6f1)](_0x593797)), await _0x5a7151('wallpaper_main', await _0x22dea8(_0x50b2cb(0x360))), _0x26f8b2(_0x50b2cb(0x6a6)), setTimeout(() => location[_0x50b2cb(0x1de)](), 0x5dc); } } else return { 'type': 'sticker', 'name': _0x66998c[0x1][_0x50b2cb(0x345)]() }; }); const _0x27835f = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1a2)), _0x2803b3 = document['getElementById'](_0x2a98b7(0x180)), _0x133b9f = document['getElementById'](_0x2a98b7(0x876)), _0x22dec1 = document[_0x2a98b7(0x4b6)]('choice-create-group'), _0x14e9f8 = document[_0x2a98b7(0x4b6)]('choice-cancel'), _0xc62e1e = document['getElementById'](_0x2a98b7(0xa8b)), _0x3c374a = document['getElementById'](_0x2a98b7(0xa3e)), _0x38d478 = document['getElementById'](_0x2a98b7(0x564)), _0x4498ba = document['getElementById'](_0x2a98b7(0x8bc)), _0x2dc0a1 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x793)), _0x5c511b = document['getElementById'](_0x2a98b7(0x71a)), _0x13d9c3 = document[_0x2a98b7(0x4b6)]('back-to-home-from-settings'), _0x227ec7 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1b9)), _0x372f61 = document[_0x2a98b7(0x4b6)]('back-to-chat-list'), _0x3e75b3 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x37e)), _0x7de43c = document['getElementById']('back-to-char-select-from-edit'), _0x11669e = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x7b2)), _0x3919f7 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x63d)), _0x5b9b3 = document[_0x2a98b7(0x4b6)]('chat-screen'), _0x35c8dd = document['getElementById'](_0x2a98b7(0x7b1)), _0x547059 = document[_0x2a98b7(0x4b6)]('chat-message-input'), _0x167b2f = document[_0x2a98b7(0x4b6)]('chat-send-button'), _0x19f6ec = document['getElementById'](_0x2a98b7(0x261)), _0x721715 = document['getElementById'](_0x2a98b7(0x5a5)), _0x38b05f = document[_0x2a98b7(0x4b6)]('quote-preview-sender'), _0x33240c = document[_0x2a98b7(0x4b6)]('quote-preview-text'), _0x34111f = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1aa)), _0x2c9dab = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x85b)), _0x5ee179 = document[_0x2a98b7(0x4b6)]('chat-sticker-button'), _0x56c998 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x9c5)), _0x3b8315 = document[_0x2a98b7(0x4b6)]('chat-image-button'), _0x3eb617 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x656)), _0x4c8707 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x938)), _0x31929d = document['getElementById'](_0x2a98b7(0x2e2)), _0x4b158a = document[_0x2a98b7(0x4b6)]('api-endpoint'), _0x32ed71 = document['getElementById']('api-key'), _0x283a74 = document[_0x2a98b7(0x4b6)]('api-model'), _0x1c36bc = document['getElementById'](_0x2a98b7(0xa6b)), _0x2e9d1a = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x42b)), _0x5b1da3 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x43b)), _0x1bc97d = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x83e)), _0x8a5fc3 = document[_0x2a98b7(0x4b6)]('user-name'), _0x5cb2f2 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x750)), _0x2c9271 = document[_0x2a98b7(0x4b6)]('user-avatar-input'), _0x2c9079 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x712)), _0x2bc55f = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x513)), _0x31c72a = document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa79)), _0x2cea0c = document[_0x2a98b7(0x4b6)]('character-edit-title'), _0x1fc6de = document['getElementById'](_0x2a98b7(0x4fc)), _0x1910dd = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x15b)), _0x1bdd67 = document[_0x2a98b7(0x4b6)]('char-edit-avatar-preview'), _0x92d973 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa12)), _0x4aba4a = document['getElementById'](_0x2a98b7(0x846)), _0x19f484 = document['getElementById'](_0x2a98b7(0x381)), _0x2712fe = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x234)), _0x43540c = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x685)); let _0x413b7b = null; const _0x30161c = _0x2a98b7(0x212), _0x11faa8 = _0x2a98b7(0x139); _0x4025fd = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x33c083() { const _0x40656c = _0x2a98b7; if ('zYdSH' === _0x40656c(0x167)) _0x12f1c8[_0x40656c(0x30e)] = _0x24f714[_0x40656c(0x30e)]; else try { const _0x506c13 = { 'characters': _0x4025fd[_0x40656c(0x61c)], 'worldBooks': _0x4025fd[_0x40656c(0xa3c)], 'chats': _0x4025fd[_0x40656c(0x132)], 'userProfile': _0x4025fd[_0x40656c(0x146)], 'apiSettings': _0x4025fd[_0x40656c(0x2c2)], 'preferences': _0x4025fd[_0x40656c(0x271)], 'activeChatId': _0x4025fd[_0x40656c(0xa4d)], 'diaries': _0x4025fd[_0x40656c(0xab2)], 'friendCircles': _0x4025fd[_0x40656c(0x9b0)], 'activeFriendCircleId': _0x4025fd[_0x40656c(0x31a)], 'userProfiles': _0x4025fd['userProfiles'], 'activeUserProfileId': _0x4025fd['activeUserProfileId'], 'accountingData': _0x4025fd[_0x40656c(0x30e)], 'accountingLedger': _0x4025fd[_0x40656c(0x961)] }; localStorage['setItem']('appState', JSON[_0x40656c(0x49f)](_0x506c13)); } catch (_0x5a68f2) { console[_0x40656c(0x963)](_0x40656c(0x965), _0x5a68f2), _0x26f8b2(_0x40656c(0x734)); } } function _0x14a334() { const _0x17f0a9 = _0x2a98b7; let _0x267db = null; try { _0x267db = localStorage[_0x17f0a9(0x47c)](_0x17f0a9(0xa8a)); } catch (_0x46cec1) { console['error'](_0x17f0a9(0x631), _0x46cec1), _0x26f8b2('无法读取状态，浏览器可能禁用了存储功能。'); } if (_0x267db) { if (_0x17f0a9(0x91d) !== _0x17f0a9(0x5a4)) try { const _0x2efc9d = JSON[_0x17f0a9(0x93f)](_0x267db); if (!_0x2efc9d || typeof _0x2efc9d !== 'object') throw new Error('Invalid\x20saved\x20state\x20format'); Array['isArray'](_0x2efc9d['characters']) && (_0x4025fd['characters'] = _0x2efc9d['characters'][_0x17f0a9(0x30c)](_0x1ecdda => ({ 'offlineBackground': '', ..._0x1ecdda }))[_0x17f0a9(0x1f9)](_0x262b05 => _0x262b05 && typeof _0x262b05 === _0x17f0a9(0x545) && _0x262b05['id'])); _0x2efc9d[_0x17f0a9(0x30e)] && (_0x4025fd[_0x17f0a9(0x30e)] = _0x2efc9d[_0x17f0a9(0x30e)]); _0x2efc9d['accountingLedger'] && (_0x4025fd[_0x17f0a9(0x961)] = _0x2efc9d[_0x17f0a9(0x961)]); Array[_0x17f0a9(0x5f8)](_0x2efc9d[_0x17f0a9(0xa3c)]) && (_0x4025fd['worldBooks'] = _0x2efc9d[_0x17f0a9(0xa3c)]); Array['isArray'](_0x2efc9d[_0x17f0a9(0xab2)]) && ('rYfhT' === _0x17f0a9(0x36d) ? _0x4517e0[_0x17f0a9(0x65b)]({ 'name': _0x500808[0x0][_0x17f0a9(0x345)](), 'url': _0x5088a3[0x1][_0x17f0a9(0x345)]() }) : _0x4025fd[_0x17f0a9(0xab2)] = _0x2efc9d[_0x17f0a9(0xab2)]); if (Array['isArray'](_0x2efc9d[_0x17f0a9(0x9b0)])) _0x4025fd[_0x17f0a9(0x9b0)] = _0x2efc9d[_0x17f0a9(0x9b0)], _0x4025fd[_0x17f0a9(0x31a)] = _0x2efc9d['activeFriendCircleId']; else { if (Array[_0x17f0a9(0x5f8)](_0x2efc9d[_0x17f0a9(0x16e)]) && _0x2efc9d['musicFeed'][_0x17f0a9(0x84b)] > 0x0) { console[_0x17f0a9(0x66c)](_0x17f0a9(0x747)); const _0x54d8eb = { 'id': _0x17f0a9(0x248) + Date[_0x17f0a9(0x98c)](), 'name': _0x17f0a9(0x8e0), 'boundUserProfileId': _0x2efc9d[_0x17f0a9(0x4a1)], 'memberCharacterIds': _0x2efc9d['characters']['map'](_0x26266d => _0x26266d['id']), 'posts': _0x2efc9d[_0x17f0a9(0x16e)] }; _0x4025fd[_0x17f0a9(0x9b0)] = [_0x54d8eb], _0x4025fd[_0x17f0a9(0x31a)] = _0x54d8eb['id']; } } if (Array['isArray'](_0x2efc9d[_0x17f0a9(0x293)])) _0x4025fd['userProfiles'] = _0x2efc9d[_0x17f0a9(0x293)], _0x4025fd[_0x17f0a9(0x4a1)] = _0x2efc9d[_0x17f0a9(0x4a1)]; else { if (_0x2efc9d['userProfile']) { console[_0x17f0a9(0x66c)](_0x17f0a9(0x1b4)); const _0x156345 = { 'id': 'user_' + Date[_0x17f0a9(0x98c)](), 'name': _0x2efc9d[_0x17f0a9(0x146)][_0x17f0a9(0x5f1)] || '我', 'avatar': _0x2efc9d[_0x17f0a9(0x146)][_0x17f0a9(0x12d)] || _0x2430ff, 'persona': _0x2efc9d['userProfile']['persona'] || '' }; _0x4025fd[_0x17f0a9(0x293)] = [_0x156345], _0x4025fd[_0x17f0a9(0x4a1)] = _0x156345['id']; } } if (_0x2efc9d['apiSettings'] && typeof _0x2efc9d['apiSettings'] === _0x17f0a9(0x545)) { if (_0x17f0a9(0x3ee) !== _0x17f0a9(0x35f)) _0x4025fd[_0x17f0a9(0x2c2)] = { ..._0x4025fd[_0x17f0a9(0x2c2)], ..._0x2efc9d[_0x17f0a9(0x2c2)] }; else { _0x234673(_0x17f0a9(0x7bd)); return; } } _0x2efc9d['preferences'] && typeof _0x2efc9d[_0x17f0a9(0x271)] === _0x17f0a9(0x545) ? _0x4025fd[_0x17f0a9(0x271)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null, ..._0x2efc9d[_0x17f0a9(0x271)] } : _0x4025fd[_0x17f0a9(0x271)] = { 'perChatContextLines': 0x64, 'widgetBgImage': null }; if (Array[_0x17f0a9(0x5f8)](_0x2efc9d[_0x17f0a9(0x132)])) _0x4025fd[_0x17f0a9(0x132)] = _0x2efc9d[_0x17f0a9(0x132)], _0x4025fd['activeChatId'] = _0x2efc9d[_0x17f0a9(0xa4d)] || null; else Array[_0x17f0a9(0x5f8)](_0x2efc9d[_0x17f0a9(0x61c)]) && (console[_0x17f0a9(0x66c)](_0x17f0a9(0x9c3)), _0x4025fd['chats'] = _0x2efc9d[_0x17f0a9(0x61c)][_0x17f0a9(0x30c)](_0x2e7f20 => ({ 'id': 'chat_' + _0x2e7f20['id'], 'type': _0x17f0a9(0x258), 'participantIds': [_0x2e7f20['id']] })), _0x2efc9d['activeCharacterId'] && (_0x4025fd['activeChatId'] = _0x17f0a9(0x625) + _0x2efc9d[_0x17f0a9(0x350)]), _0x2efc9d[_0x17f0a9(0x61c)]['forEach'](_0xa380e0 => { const _0x470697 = _0x17f0a9, _0x988d43 = _0x470697(0x8ab) + _0xa380e0['id'], _0x102b60 = _0x470697(0x592) + _0xa380e0['id'], _0x34e020 = localStorage[_0x470697(0x47c)](_0x988d43); if (_0x34e020) { if (_0x470697(0x4de) !== _0x470697(0x4de)) return '今天\x20' + _0x9e7e3e; else localStorage[_0x470697(0x5f0)](_0x102b60, _0x34e020), localStorage[_0x470697(0x6f1)](_0x988d43); } })); } catch (_0x2a5868) { if (_0x17f0a9(0x788) === 'WSOwq') { console[_0x17f0a9(0x963)](_0x17f0a9(0x820), _0x2a5868), _0x4025fd[_0x17f0a9(0x61c)] = [], _0x4025fd[_0x17f0a9(0x132)] = [], _0x4025fd[_0x17f0a9(0xa4d)] = null; try { if (_0x17f0a9(0x3f5) !== _0x17f0a9(0x3f5)) { const _0x492aa6 = _0x599ed1['createElement']('li'); _0x492aa6[_0x17f0a9(0x575)] = _0x17f0a9(0x84a), _0x492aa6['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x494439['id'] + _0x17f0a9(0x2c5) + _0x1768af['id'] + _0x17f0a9(0x26c) + (_0x4d422a[_0x17f0a9(0x12d)] || _0x32e194) + _0x17f0a9(0x634) + _0x10b65f['id'] + '\x22\x20class=\x22char-name\x22>' + _0x23f7b6[_0x17f0a9(0x5f1)] + _0x17f0a9(0x151), _0x341ecb['appendChild'](_0x492aa6); } else localStorage[_0x17f0a9(0x6f1)](_0x17f0a9(0xa8a)); } catch (_0x5f0ebc) { console[_0x17f0a9(0x963)](_0x17f0a9(0x76b), _0x5f0ebc); } } else _0x196578[_0x17f0a9(0xab3)] = _0xa68905[_0x17f0a9(0x9ab)], _0x3b87c0[_0x17f0a9(0xab3)] = _0x9bb1d7[_0x17f0a9(0x278)], _0x3ac4ab[_0x17f0a9(0x544)][_0x17f0a9(0x82e)](_0x17f0a9(0xa9c)), _0x36b381[_0x17f0a9(0x636)][_0x17f0a9(0x6d0)]('--widget-cover-image', 'url(' + _0x336086[_0x17f0a9(0x549)] + ')'); } else _0x4d654d(_0x95caa7); } let _0x5d3bca = ![]; if (_0x4025fd['characters'][_0x17f0a9(0x84b)] === 0x0) _0x5d3bca = !![], _0x4025fd[_0x17f0a9(0xa4d)] = null; else { if (!_0x4025fd[_0x17f0a9(0x132)][_0x17f0a9(0x32b)](_0x3b0598 => _0x3b0598['id'] === _0x4025fd[_0x17f0a9(0xa4d)])) { if (_0x17f0a9(0x225) === _0x17f0a9(0x225)) _0x4025fd[_0x17f0a9(0xa4d)] = _0x4025fd[_0x17f0a9(0x132)][0x0]?.['id'] || null; else { _0x3b9bc7('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } } } return _0x33c083(), _0x5d3bca; } function _0x530f2e() { const _0x26eaba = _0x2a98b7; if ('AbuAO' !== 'AbuAO') _0x5003aa[_0x26eaba(0x4b6)](_0x26eaba(0x3b1))[_0x26eaba(0xab8)](); else { if (!_0x4025fd['activeChatId']) return; try { localStorage[_0x26eaba(0x5f0)](_0x26eaba(0x8ab) + _0x4025fd[_0x26eaba(0xa4d)], JSON[_0x26eaba(0x49f)](_0x4025fd[_0x26eaba(0x24a)])); } catch (_0x564606) { 'ZtYca' === 'ZtYca' ? (console['error'](_0x26eaba(0x780), _0x564606), _0x26f8b2('无法保存聊天记录。')) : _0x4c26f0[_0x26eaba(0x2fd)] = _0xb686f6['image']; } } } function _0x1c1a05() { const _0x52f9c9 = _0x2a98b7; if (!_0x4025fd[_0x52f9c9(0xa4d)]) { _0x4025fd[_0x52f9c9(0x24a)] = [], _0x21e41c(); return; } let _0x394b54 = null; try { _0x394b54 = localStorage[_0x52f9c9(0x47c)](_0x52f9c9(0x8ab) + _0x4025fd[_0x52f9c9(0xa4d)]); } catch (_0x4fa962) { _0x52f9c9(0x932) !== _0x52f9c9(0x932) ? _0x1f29a4[_0x52f9c9(0x4e3)](_0x52f9c9(0x611))[_0x52f9c9(0x6ff)](_0x258eb7 => { const _0x3094a2 = _0x52f9c9; _0x258eb7[_0x3094a2(0x20b)](_0x3094a2(0xab8), () => { const _0x21e1c8 = _0x3094a2, _0x1e6bd6 = _0xc3e4e0['parse'](_0x258eb7[_0x21e1c8(0x773)][_0x21e1c8(0x66c)][_0x21e1c8(0x829)](/&quot;/g, '\x22')), _0x4da557 = _0x258eb7[_0x21e1c8(0x773)]['contactName'], _0x1e2913 = _0x258eb7[_0x21e1c8(0x773)][_0x21e1c8(0x4ca)]; _0x48b27b(_0x4da557, _0x1e2913, _0x1e6bd6); }); }) : console[_0x52f9c9(0x963)](_0x52f9c9(0x240) + _0x4025fd[_0x52f9c9(0xa4d)], _0x4fa962); } let _0x19bfbb = []; if (_0x394b54) try { const _0x2aa490 = JSON[_0x52f9c9(0x93f)](_0x394b54); Array[_0x52f9c9(0x5f8)](_0x2aa490) && (_0x19bfbb = _0x2aa490[_0x52f9c9(0x1f9)](_0x483dbc => _0x483dbc && typeof _0x483dbc === _0x52f9c9(0x545) && typeof _0x483dbc[_0x52f9c9(0x1ce)] === _0x52f9c9(0x90a) && typeof _0x483dbc[_0x52f9c9(0x9c6)] !== _0x52f9c9(0x816))); } catch (_0x3e742b) { console[_0x52f9c9(0x963)](_0x52f9c9(0x7df) + _0x4025fd[_0x52f9c9(0xa4d)] + _0x52f9c9(0x189), _0x3e742b); try { localStorage[_0x52f9c9(0x6f1)]('chatHistory_' + _0x4025fd['activeChatId']); } catch (_0x301c43) { if (_0x52f9c9(0x22d) !== _0x52f9c9(0x22d)) { _0x542d91[_0x52f9c9(0x5e3)]('JSON解析失败\x20(' + _0x2f0223['id'] + _0x52f9c9(0x424), _0x2a5d81['message']); try { _0x52db7a = _0x15d692(_0x7169f5); if (!_0x19520c) throw new _0x3d309e(_0x52f9c9(0x216)); _0x24f4ec[_0x52f9c9(0x66c)](_0x52f9c9(0x598) + _0x5669e6['id'] + _0x52f9c9(0x79e)); } catch (_0x2847d6) { throw _0x593b54; } } else console[_0x52f9c9(0x963)](_0x52f9c9(0x230), _0x301c43); } } _0x4025fd[_0x52f9c9(0x24a)] = _0x19bfbb, _0x35c8dd[_0x52f9c9(0x3c8)] = '', _0x4025fd['conversationHistory'] && _0x4025fd['conversationHistory'][_0x52f9c9(0x6ff)]((_0x162d7e, _0xbbb309) => _0x7a4a(_0x162d7e, _0xbbb309)), setTimeout(() => { const _0x4216f2 = _0x52f9c9; _0x35c8dd[_0x4216f2(0x3ce)] = _0x35c8dd[_0x4216f2(0x650)]; }, 0x0); } async function _0x40794d() { const _0x218f81 = _0x2a98b7, _0x599d86 = document[_0x218f81(0x4b6)](_0x218f81(0xa04)); if (!_0x599d86) { console[_0x218f81(0x963)](_0x218f81(0x6e7)); return; } try { if (_0x218f81(0x59c) === _0x218f81(0x59c)) { let _0x10b731 = await _0x34b988(_0x218f81(0x550)); if (!_0x10b731) { if (_0x218f81(0x58b) !== 'uYXlg') { const _0x2277d1 = localStorage['getItem']('customWallpaper'); _0x2277d1 && (console[_0x218f81(0x66c)](_0x218f81(0x4ad)), _0x10b731 = await _0x22dea8(_0x2277d1), await _0x5a7151(_0x218f81(0x550), _0x10b731), localStorage[_0x218f81(0x6f1)](_0x218f81(0x7ee))); } else { const { playlist: _0x27553e, currentIndex: _0x1df40d } = _0x39d9db[_0x218f81(0x93f)](_0x228e31); _0x2656c9[_0x218f81(0x5f8)](_0x27553e) && _0x27553e[_0x218f81(0x84b)] > 0x0 && _0x1df40d > -0x1 && (_0x1adb43[_0x218f81(0x34a)] = _0x27553e, _0x2df4d5['currentlyPlayingIndex'] = _0x1df40d, _0x420fcc[_0x218f81(0x6e3)] = ![], _0x5e1c34()); } } if (_0x10b731) _0x218f81(0x53b) === _0x218f81(0x53b) ? (_0x599d86[_0x218f81(0x636)][_0x218f81(0x4b7)] = _0x218f81(0x7c2) + URL['createObjectURL'](_0x10b731) + ')', _0x599d86['style'][_0x218f81(0x799)] = _0x218f81(0x549), _0x599d86['style'][_0x218f81(0x90b)] = _0x218f81(0x5c1)) : _0x2c3b75[_0x218f81(0x2c2)] = { ..._0x4ba73e[_0x218f81(0x2c2)], ..._0x2b2560[_0x218f81(0x2c2)] }; else { if (_0x218f81(0x646) !== _0x218f81(0x872)) _0x599d86[_0x218f81(0x636)][_0x218f81(0x4b7)] = ''; else { const _0x4b9e7e = _0x2afb4a[_0x218f81(0x4b6)](_0x218f81(0x409)); if (!_0x4b9e7e) return; _0x4b9e7e[_0x218f81(0x4df)] = _0x5a6018[_0x218f81(0x271)][_0x218f81(0x480)] || ![], _0x4b9e7e[_0x218f81(0x20b)](_0x218f81(0x6a4), () => { const _0x244a6d = _0x218f81; _0x403e7f[_0x244a6d(0x271)][_0x244a6d(0x480)] = _0x4b9e7e[_0x244a6d(0x4df)], _0x3dbf23(), _0x203af1(); }); } } } else { if (_0x59fb2c) { const _0x48af3b = _0x21410b(_0x5b786c['activeMeetingCharId']); _0x48af3b && (delete _0x48af3b[_0x218f81(0x48a)], _0x264123(), _0x54e0ef(_0x48af3b['id'], _0x218f81(0x72b)), _0x111bd4(_0x218f81(0x81f)), _0x620855(!![])); } } } catch (_0x3eb0a8) { _0x218f81(0x3e8) === _0x218f81(0x3e8) ? (console[_0x218f81(0x963)](_0x218f81(0x884), _0x3eb0a8), _0x599d86 && (_0x599d86[_0x218f81(0x636)][_0x218f81(0x4b7)] = '')) : (_0x4d255d[_0x218f81(0xab3)] = _0x48ce88[_0x218f81(0x5f1)], _0x403365[_0x218f81(0xab3)] = _0x218f81(0x291), _0x5b08f7(_0xd19585, _0x218f81(0x72b))); } } function _0x50605b() { const _0xb92288 = _0x2a98b7; if ('gFqcs' !== _0xb92288(0x203)) _0x4ab670[_0xb92288(0x636)][_0xb92288(0x6c5)] = _0xb92288(0x55f), _0x1508a2[_0xb92288(0x636)][_0xb92288(0x6c5)] = _0xb92288(0x493); else { const _0x5abe5d = localStorage['getItem'](_0xb92288(0x253)); _0x5abe5d ? document[_0xb92288(0x4b6)]('music-screen')['style'][_0xb92288(0x6d0)](_0xb92288(0x8f2), _0xb92288(0x7c2) + _0x5abe5d + ')') : _0xb92288(0xa52) !== 'Tcyxz' ? _0x399a9a += _0xb92288(0xa2b) + _0xcb24cd[_0xb92288(0x54f)] + _0xb92288(0x96c) : document[_0xb92288(0x4b6)]('music-screen')['style']['setProperty'](_0xb92288(0x8f2), 'none'); } } async function _0xab0ba6(_0x258fcb) { const _0x41f402 = _0x2a98b7; try { _0x41f402(0x8c3) === _0x41f402(0x8c3) ? (await _0x5a7151(_0x41f402(0x550), _0x258fcb), await _0x40794d(), _0x26f8b2(_0x41f402(0x90f))) : _0x1da60c(_0x41f402(0x77a) + _0x9f5404[_0x41f402(0x973)]); } catch (_0x1ff247) { console[_0x41f402(0x963)](_0x41f402(0x8ce), _0x1ff247), _0x26f8b2('保存壁纸失败:\x20' + _0x1ff247['message']); } } function _0x4a4006(_0x8dc579) { const _0x5dba65 = _0x2a98b7, _0x50eb16 = { 'quotedMessage': null, 'content': _0x8dc579 }, _0x3f42e8 = _0x8dc579[_0x5dba65(0x561)](/^\[引用\|(.*?)\|(.*?)\]\s*/); if (_0x3f42e8) { if (_0x5dba65(0x795) !== _0x5dba65(0x1f8)) _0x50eb16[_0x5dba65(0x630)] = { 'sender': _0x3f42e8[0x1][_0x5dba65(0x345)](), 'content': _0x3f42e8[0x2]['trim']() }, _0x50eb16[_0x5dba65(0x9c6)] = _0x8dc579[_0x5dba65(0xa4a)](_0x3f42e8[0x0][_0x5dba65(0x84b)])['trim'](); else return _0x565776(new _0x55278f(_0x5dba65(0x45a))); } return _0x50eb16; } const _0x17574b = document['getElementById']('message-action-modal'), _0x14d58a = document[_0x2a98b7(0x4b6)]('message-action-backdrop'), _0x490c7c = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x665)), _0x1de9bf = document['getElementById'](_0x2a98b7(0x472)), _0xe2d394 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1ad)), _0x49d0be = document['getElementById']('quote-message-button'), _0x50b388 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x622)), _0xb2d9c6 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x483)), _0x5dddeb = document['getElementById'](_0x2a98b7(0x5f3)), _0x4d3b61 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x2ee)), _0x5ebf10 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x536)); let _0x49d5a4 = null; function _0x28a1c0(_0x4420bb) { const _0x147f49 = _0x2a98b7; if (_0x147f49(0x1e0) === _0x147f49(0x349)) try { const _0x1b4f5f = _0x427c0c['getItem'](_0x147f49(0x8ab) + _0x2d3ec1), _0x3754d1 = _0x2196a8[_0x147f49(0x93f)](_0x1b4f5f || '[]'); return _0x14b342['isArray'](_0x3754d1) ? _0x3754d1 : []; } catch { return []; } else _0x49d5a4 = _0x4420bb, _0x17574b[_0x147f49(0x544)][_0x147f49(0x82e)](_0x147f49(0x187)); } function _0x29e4fa() { const _0x34bccf = _0x2a98b7; _0x34bccf(0x8d8) !== 'bNdHb' ? _0x492a9d['classList']['add']('is-visible') : _0x17574b[_0x34bccf(0x544)][_0x34bccf(0x7f8)](_0x34bccf(0x187)); } function _0x125cd8() { _0x29e4fa(), _0x49d5a4 = null; } function _0x32e4cb() { const _0x1f0b99 = _0x2a98b7; if ('DsVLY' !== _0x1f0b99(0x537)) { if (_0x49d5a4 === null) return; _0x4025fd['conversationHistory']['splice'](_0x49d5a4, 0x1), _0x530f2e(), _0x274381(), _0x125cd8(); } else { const _0x2f814c = new _0x15ad8c(); _0x2f814c['onloadend'] = () => _0x243760(_0x2f814c[_0x1f0b99(0x8e8)]), _0x2f814c[_0x1f0b99(0x8ec)] = _0x23c68c, _0x2f814c[_0x1f0b99(0x2e3)](_0x209a93); } } function _0x4a36fb() { const _0x3d5fe3 = _0x2a98b7; if (_0x49d5a4 === null) return; const _0x82b0d9 = _0x4025fd[_0x3d5fe3(0x24a)][_0x49d5a4]; if (!_0x82b0d9) return; _0x5dddeb[_0x3d5fe3(0x95e)] = _0x82b0d9[_0x3d5fe3(0x9c6)], _0x29e4fa(), _0x50b388[_0x3d5fe3(0x544)]['add']('show'), _0x5dddeb[_0x3d5fe3(0x63f)](); } function _0x649922() { const _0x3e917b = _0x2a98b7; if (_0x3e917b(0x614) !== _0x3e917b(0x614)) { _0x538a1a(_0x3e917b(0x447)); return; } else { if (_0x49d5a4 === null) return; const _0x38080d = _0x5dddeb['value']['trim'](); if (_0x38080d === '') { _0x2898ed(); return; } const _0x367b46 = _0x4025fd['conversationHistory'][_0x49d5a4]; _0x367b46 && (_0x367b46[_0x3e917b(0x9c6)] = _0x38080d, _0x530f2e(), _0x274381()), _0x50b388[_0x3e917b(0x544)][_0x3e917b(0x7f8)](_0x3e917b(0x187)), _0x49d5a4 = null; } } function _0x2898ed() { const _0x54cc23 = _0x2a98b7; if (_0x54cc23(0x341) !== _0x54cc23(0x97c)) _0x50b388[_0x54cc23(0x544)][_0x54cc23(0x7f8)](_0x54cc23(0x187)), _0x49d5a4 = null; else return _0x4d409e[_0x54cc23(0xa54)][_0x54cc23(0x30c)](_0x2d8157 => typeof _0x2d8157 === 'string' ? _0x2d8157 : _0x2d8157?.['content'])[_0x54cc23(0x1f9)](_0x2ce905)[_0x54cc23(0xa5f)](_0x273d36); } _0x14d58a[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x125cd8), _0xe2d394[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x125cd8), _0x1de9bf[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x32e4cb), _0x490c7c['addEventListener']('click', _0x4a36fb), _0x49d0be[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0xe4a9f2), _0x34111f['addEventListener'](_0x2a98b7(0xab8), _0x70c20a), _0x4d3b61[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x649922), _0x5ebf10[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x2898ed), _0xb2d9c6[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x2898ed); function _0xe4a9f2() { const _0x4c244b = _0x2a98b7; if (_0x4c244b(0x9a5) !== 'VWAer') { _0x33d557 = _0x43f18b(); const _0x1c3110 = _0x2fdee2[_0x4c244b(0x4b6)](_0x4c244b(0x85b))[_0x4c244b(0xab3)]; _0x33d870 = _0x1c3110 || '当前聊天'; } else { if (_0x49d5a4 === null) return; const _0x31cd9d = _0x4025fd['conversationHistory'][_0x49d5a4]; if (!_0x31cd9d) return; const _0x2223bd = _0xba11a1(); let _0x30ee99 = '未知'; if (_0x31cd9d['role'] === _0x4c244b(0x880)) _0x30ee99 = _0x4025fd[_0x4c244b(0x146)][_0x4c244b(0x5f1)] || '我'; else { const _0x593dd6 = _0x31cd9d[_0x4c244b(0x302)] || _0x2223bd?.[_0x4c244b(0x2db)][0x0], _0x59a044 = _0x389a36(_0x593dd6); _0x30ee99 = _0x59a044 ? _0x59a044[_0x4c244b(0x5f1)] : '角色'; } let _0x14cdc7 = _0x31cd9d[_0x4c244b(0x9c6)] || ''; if (_0x31cd9d[_0x4c244b(0x619)]) _0x14cdc7 = _0x4c244b(0x69f); if (_0x31cd9d[_0x4c244b(0x3b9)]) _0x14cdc7 = _0x4c244b(0x7ae); if (_0x14cdc7['length'] > 0x32) _0x14cdc7 = _0x14cdc7[_0x4c244b(0xa4a)](0x0, 0x32) + '...'; _0x4025fd[_0x4c244b(0x9e3)] = { 'sender': _0x30ee99, 'content': _0x14cdc7 }, _0x3c16ae(), _0x125cd8(), _0x547059[_0x4c244b(0x63f)](); } } function _0x3c16ae() { const _0xf8f25a = _0x2a98b7; if (_0xf8f25a(0x910) !== _0xf8f25a(0x910)) _0x2c0751(_0x154ae9), _0x1e49e3(); else { if (!_0x4025fd[_0xf8f25a(0x9e3)]) return; _0x38b05f['textContent'] = _0xf8f25a(0x848) + _0x4025fd['activeQuote'][_0xf8f25a(0x80f)], _0x33240c[_0xf8f25a(0xab3)] = _0x4025fd[_0xf8f25a(0x9e3)]['content'], _0x721715[_0xf8f25a(0x636)][_0xf8f25a(0x6c5)] = _0xf8f25a(0x493); } } function _0x70c20a() { const _0x412c29 = _0x2a98b7; _0x4025fd[_0x412c29(0x9e3)] = null, _0x721715[_0x412c29(0x636)][_0x412c29(0x6c5)] = _0x412c29(0x55f); } function _0x102967(_0x2a7b13, _0x32fe18) { const _0x2c1459 = _0x2a98b7, _0x2bbc86 = document[_0x2c1459(0x4b6)](_0x2c1459(0x855)); _0x2bbc86 && (_0x2c1459(0x209) === _0x2c1459(0xac5) ? _0x16d132[_0x2c1459(0x24a)] = [] : _0x2a7b13 === _0x2c1459(0x786) ? _0x2bbc86[_0x2c1459(0x636)][_0x2c1459(0x6c5)] = _0x2c1459(0x865) : _0x2bbc86[_0x2c1459(0x636)][_0x2c1459(0x6c5)] = _0x2c1459(0x55f)), _0x413b7b = _0x32fe18 || null, Object['values'](_0xbc6ebf)[_0x2c1459(0x6ff)](_0x36d68d => _0x36d68d['classList'][_0x2c1459(0x7f8)]('active')), _0xbc6ebf[_0x2a7b13] && _0xbc6ebf[_0x2a7b13][_0x2c1459(0x544)][_0x2c1459(0x82e)](_0x2c1459(0x9ad)), _0x2a7b13 !== 'chat' && _0x5b9b3[_0x2c1459(0x544)][_0x2c1459(0x7f8)](_0x2c1459(0x46d)); } function _0x3ddb58(_0x4a74a0) { const _0x3d06e3 = _0x2a98b7; _0x4a74a0 ? _0x3d06e3(0x247) === _0x3d06e3(0x247) ? _0x5b9b3[_0x3d06e3(0x544)][_0x3d06e3(0x82e)](_0x3d06e3(0x46d)) : _0x2b559d(_0x3d06e3(0x651), _0x3d06e3(0x1f3)) : _0x5b9b3['classList'][_0x3d06e3(0x7f8)]('show-chat-view'); } async function _0x56d0ee() { const _0x1ab415 = _0x2a98b7; _0x11669e[_0x1ab415(0x3c8)] = ''; for (const _0x45e9d0 of _0x4025fd[_0x1ab415(0x132)]) { if (_0x1ab415(0x5e6) !== _0x1ab415(0x627)) { const _0x14890b = document[_0x1ab415(0x597)]('li'); _0x14890b['className'] = _0x1ab415(0xa91), _0x14890b[_0x1ab415(0x773)]['id'] = _0x45e9d0['id']; let _0x151cd5 = _0x535078, _0x1c423e = '群聊', _0x568b7a = ''; if (_0x45e9d0['type'] === _0x1ab415(0x258)) { const _0x5bc1c5 = _0x389a36(_0x45e9d0[_0x1ab415(0x2db)][0x0]); _0x5bc1c5 ? (_0x151cd5 = _0x5bc1c5['avatar'] || _0x535078, _0x1c423e = _0x5bc1c5[_0x1ab415(0x5f1)] || _0x1ab415(0x64a), _0x568b7a = _0x5bc1c5[_0x1ab415(0x88f)] || '私聊') : (_0x1c423e = '未知角色', _0x568b7a = _0x1ab415(0xa94)); } else { _0x1c423e = _0x45e9d0['name'] || _0x1ab415(0x36c), _0x568b7a = _0x45e9d0[_0x1ab415(0x2db)][_0x1ab415(0x84b)] + _0x1ab415(0x721); const _0x2c7fbc = await _0x34b988(_0x1ab415(0x69c) + _0x45e9d0['id']); if (_0x2c7fbc) _0x151cd5 = URL['createObjectURL'](_0x2c7fbc); } _0x14890b[_0x1ab415(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x151cd5 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x1c423e + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>' + _0x568b7a + _0x1ab415(0x3d6), _0x14890b['querySelector'](_0x1ab415(0x3fb))[_0x1ab415(0x20b)](_0x1ab415(0xab8), () => { _0x1e0ed0(_0x45e9d0['id']), _0x3ddb58(!![]); }), _0x11669e[_0x1ab415(0x329)](_0x14890b); } else { const _0x4a7694 = _0xe926a0['find'](_0x27bb85 => _0x27bb85[_0x1ab415(0x5f1)] === _0x5725ac[_0x1ab415(0x5f1)]); if (_0x4a7694) _0xbfbee5[_0x1ab415(0x2b6)](_0x483c84, { 'content': '[AI发送了表情：' + _0x4a7694['name'] + ']', 'displayUrl': _0x4a7694[_0x1ab415(0x13f)] }); else _0x26fdd2[_0x1ab415(0x9c6)] = _0x1ab415(0x275) + _0x1effed[_0x1ab415(0x5f1)] + ']'; } } } function _0x354fce() { const _0x7bb526 = _0x2a98b7, _0x5b8fb5 = document[_0x7bb526(0x4b6)](_0x7bb526(0x49a)); _0x5b8fb5['innerHTML'] = ''; const _0x1a36de = _0x4025fd['characters'][_0x7bb526(0x1f9)](_0x32ae5c => _0x4025fd[_0x7bb526(0x132)][_0x7bb526(0x533)](_0x532b6d => _0x532b6d[_0x7bb526(0xaa2)] === _0x7bb526(0x258) && _0x532b6d['participantIds'][_0x7bb526(0x9f1)](_0x32ae5c['id']))); if (_0x1a36de[_0x7bb526(0x84b)] === 0x0) { if ('YxomA' === 'YxomA') { _0x5b8fb5[_0x7bb526(0x3c8)] = _0x7bb526(0x68d); return; } else { const _0x25326f = _0x4c9dbe['friendCircles'][_0x7bb526(0x32b)](_0x5ba181 => _0x5ba181['id'] === _0x1e15ef[_0x7bb526(0x31a)]), _0x506060 = _0x25326f?.[_0x7bb526(0x774)]; let _0x194d64 = _0x135cb0[_0x7bb526(0x293)][_0x7bb526(0x32b)](_0x558b42 => _0x558b42['id'] === _0x506060); !_0x194d64 && (_0x194d64 = _0x5b3058[_0x7bb526(0x293)][_0x7bb526(0x32b)](_0xdc099c => _0xdc099c['id'] === _0x290c7f[_0x7bb526(0x4a1)])), !_0x194d64 && (_0x194d64 = _0x4d2608[_0x7bb526(0x293)][0x0]), _0x194d64 && (_0x403284[_0x7bb526(0x4b6)](_0x7bb526(0x33f))[_0x7bb526(0x2fd)] = _0x194d64[_0x7bb526(0x12d)] || _0x12bc50); } } _0x1a36de[_0x7bb526(0x6ff)](_0x509e27 => { const _0x1ab7e4 = _0x7bb526; if ('EjJwT' !== 'EjJwT') { const _0x496fb1 = _0x476ff9[_0x1ab7e4(0x132)][_0x1ab7e4(0x32b)](_0x247909 => _0x247909['id'] === _0x443798), _0x316993 = _0x496fb1?.['boundUserProfileId']; let _0x3319fa = _0x4fcc2b[_0x1ab7e4(0x293)][_0x1ab7e4(0x32b)](_0x4de31b => _0x4de31b['id'] === _0x316993); return !_0x3319fa && (_0x3319fa = _0x4cd4d6[_0x1ab7e4(0x293)][_0x1ab7e4(0x32b)](_0x11e707 => _0x11e707['id'] === _0x46a57c['activeUserProfileId']) || _0x13f362['userProfiles'][0x0]), _0x3319fa || { 'name': '用户', 'avatar': _0xf1f9f0, 'persona': '' }; } else { const _0x4d2412 = document[_0x1ab7e4(0x597)]('li'); _0x4d2412[_0x1ab7e4(0x575)] = _0x1ab7e4(0xa91), _0x4d2412[_0x1ab7e4(0x773)][_0x1ab7e4(0x8c8)] = _0x509e27['id'], _0x4d2412[_0x1ab7e4(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x509e27['avatar'] || _0x535078) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x509e27[_0x1ab7e4(0x5f1)] + _0x1ab7e4(0x95d) + (_0x509e27[_0x1ab7e4(0x88f)] || '私聊') + _0x1ab7e4(0x121), _0x4d2412[_0x1ab7e4(0x20b)](_0x1ab7e4(0xab8), () => { const _0x551451 = _0x1ab7e4; if (_0x551451(0x3ab) === _0x551451(0x57c)) { const _0x50f9f0 = _0x2fada2(_0x40650f['value']); if (_0x356b34(_0x50f9f0) || _0x50f9f0 <= 0x0) { _0x11ffb8(_0x551451(0x5ed)); return; } const _0x2ac86d = _0x3377d2(); let _0x5a8325 = null; _0x2ac86d[_0x551451(0xaa2)] === 'group' ? _0x5a8325 = _0x1c995e[_0x551451(0x95e)] : _0x5a8325 = _0x2ac86d[_0x551451(0x2db)][0x0]; const _0x32e297 = _0x9fac9a(_0x2ac86d['id']), _0x28e6c5 = { 'role': _0x551451(0x880), 'type': 'transfer', 'content': _0x551451(0x879) + (_0x9b6e5(_0x5a8325)?.['name'] || '未知') + _0x551451(0x7a9) + _0x50f9f0 + ']', 'amount': _0x50f9f0, 'recipientId': _0x5a8325, 'senderId': _0x32e297['id'], 'timestamp': _0x299891[_0x551451(0x98c)]() }; _0x3e4f9f[_0x551451(0x24a)][_0x551451(0x65b)](_0x28e6c5), _0x40068f(), _0x3a8a2b(), _0x5032ca[_0x551451(0x544)]['remove'](_0x551451(0x187)); } else _0x129fcd(_0x509e27['id']); }), _0x5b8fb5['appendChild'](_0x4d2412); } }); } async function _0x129fcd(_0x482be9) { const _0x4c4560 = _0x2a98b7, _0x11150c = _0x389a36(_0x482be9); if (!_0x11150c) return; document[_0x4c4560(0x4b6)]('galgame-sprite')[_0x4c4560(0x2fd)] = '', _0x4025fd['activeMeetingCharId'] = _0x482be9; const _0x4cb247 = _0x4025fd[_0x4c4560(0x132)][_0x4c4560(0x32b)](_0x262713 => _0x262713[_0x4c4560(0xaa2)] === 'private' && _0x262713['participantIds'][_0x4c4560(0x9f1)](_0x482be9)); _0x4cb247 ? _0x4c4560(0x5cc) !== _0x4c4560(0x98e) ? (_0x4025fd['activeChatId'] = _0x4cb247['id'], _0x33c083(), _0x1c1a05(), _0x5cec68(_0x482be9)) : _0x48cd2a[_0x4c4560(0x636)][_0x4c4560(0x6c5)] = 'none' : _0x4025fd[_0x4c4560(0x24a)] = []; document[_0x4c4560(0x4b6)](_0x4c4560(0x168))['textContent'] = _0x11150c['name']; const _0x16979b = document[_0x4c4560(0x4b6)](_0x4c4560(0x2f7)); try { if (_0x4c4560(0x1a9) !== _0x4c4560(0x231)) { const _0xcecd0a = await _0x34b988(_0x4c4560(0x54d) + _0x482be9); if (_0xcecd0a) _0x16979b[_0x4c4560(0x636)]['backgroundImage'] = _0x4c4560(0x314) + URL['createObjectURL'](_0xcecd0a) + '\x27)', _0x16979b['style']['backgroundSize'] = 'cover', _0x16979b[_0x4c4560(0x636)][_0x4c4560(0x90b)] = _0x4c4560(0x5c1); else { if ('BmZZH' !== 'BmZZH') { const _0x2a830c = _0x27ec12[_0x4c4560(0x4b6)](_0x4c4560(0x3c5)); if (!_0x2a830c) return; const _0x1a0af5 = _0x2d6d1b[_0x4c4560(0x47c)](_0x4c4560(0x6c2)) || '80'; _0x27ecb7['documentElement']['style'][_0x4c4560(0x6d0)](_0x4c4560(0x6c4), _0x1a0af5 + '%'), _0x2a830c['value'] = _0x1a0af5, _0x2a830c[_0x4c4560(0x20b)](_0x4c4560(0x60c), () => { const _0x113e46 = _0x4c4560, _0x2f04d0 = _0x2a830c[_0x113e46(0x95e)]; _0x467470['documentElement'][_0x113e46(0x636)][_0x113e46(0x6d0)]('--primary-lightness', _0x2f04d0 + '%'), _0x52b441[_0x113e46(0x5f0)](_0x113e46(0x6c2), _0x2f04d0), _0x491469(); }); } else _0x16979b['style'][_0x4c4560(0x4b7)] = _0x4c4560(0x55f); } } else _0xd0bc03(_0x4c4560(0x786), _0x4c4560(0x2c9)); } catch (_0x4cd081) { console[_0x4c4560(0x963)](_0x4c4560(0x65d) + _0x482be9 + ':', _0x4cd081), _0x16979b['style']['backgroundImage'] = 'none'; } _0x3f2313(), _0xeb55e8(); if (_0x376663) clearInterval(_0x376663); _0x30a1f8(), _0x376663 = setInterval(_0x30a1f8, 0x2710), document[_0x4c4560(0x4b6)](_0x4c4560(0x33c))[_0x4c4560(0x636)]['display'] = 'block', _0x102967(_0x4c4560(0xaab), _0x4c4560(0x2c9)); } function _0xeb55e8() { const _0x3b7cee = _0x2a98b7; if (_0x3b7cee(0x27e) !== 'KyArC') _0x5922db[_0x3b7cee(0xab3)] = '旁白', _0x69c75b[_0x3b7cee(0xab3)] = _0x3b7cee(0x918); else { const _0x56f04c = document['getElementById']('meeting-scene-view'); _0x56f04c['innerHTML'] = ''; const _0x2208c0 = _0x56f04c['querySelector'](_0x3b7cee(0x4f1)); if (_0x2208c0) _0x2208c0[_0x3b7cee(0x7f8)](); _0x4025fd[_0x3b7cee(0x24a)] && _0x4025fd['conversationHistory'][_0x3b7cee(0x6ff)]((_0x398cb5, _0x32140e) => { const _0x18979e = _0x3b7cee; if ('aZCVi' === _0x18979e(0x520)) { _0xb859ad[_0x18979e(0x963)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20' + _0x1a46d3['activeChatId'] + ',\x20resetting.', _0x27b7fa); try { _0x5be95a[_0x18979e(0x6f1)](_0x18979e(0x8ab) + _0xe3754e[_0x18979e(0xa4d)]); } catch (_0x164c54) { _0x5c5555[_0x18979e(0x963)](_0x18979e(0x230), _0x164c54); } } else { if (!_0x398cb5[_0x18979e(0x45e)] || _0x398cb5[_0x18979e(0x1ce)] === _0x18979e(0x6f9)) return; const _0x69b5f9 = document[_0x18979e(0x597)]('p'); _0x69b5f9[_0x18979e(0x773)][_0x18979e(0x173)] = _0x32140e; const _0x346c53 = _0x398cb5[_0x18979e(0x9c6)][_0x18979e(0x829)](/\n/g, '<br>'); let _0x28497b = '', _0x5408c6 = ''; const _0x42df2b = _0x25fa5a(_0x4025fd['activeChatId']); if (_0x398cb5[_0x18979e(0x1ce)] === _0x18979e(0x880)) _0x28497b = _0x42df2b[_0x18979e(0x5f1)] || '我', _0x5408c6 = 'speaker-user'; else { if (_0x398cb5['role'] === _0x18979e(0x135)) { const _0x1b461c = _0x389a36(_0x398cb5[_0x18979e(0x302)] || _0x4025fd[_0x18979e(0xa4e)]); _0x28497b = _0x1b461c?.['name'] || '角色', _0x5408c6 = _0x18979e(0x913); } } _0x69b5f9[_0x18979e(0x636)][_0x18979e(0x4b3)] = 'rgba(0,\x200,\x200,\x200.4)', _0x69b5f9[_0x18979e(0x636)][_0x18979e(0x997)] = _0x18979e(0x2b3), _0x69b5f9[_0x18979e(0x636)][_0x18979e(0x244)] = _0x18979e(0x4dd), _0x69b5f9[_0x18979e(0x636)][_0x18979e(0x842)] = _0x18979e(0x7fc); if (_0x28497b) _0x18979e(0x48f) === _0x18979e(0x48f) ? _0x69b5f9[_0x18979e(0x3c8)] = _0x18979e(0x1b1) + _0x5408c6 + _0x18979e(0x45d) + (_0x5408c6 === _0x18979e(0x8d6) ? _0x18979e(0x7d7) : _0x18979e(0x645)) + _0x18979e(0x344) + _0x28497b + _0x18979e(0x265) + _0x346c53 : (_0xe5e609 = _0x5ab244[_0x18979e(0x597)]('div'), _0x3b97b0['id'] = 'feed-loader', _0x5a5378[_0x18979e(0x329)](_0x1d0fe9)); else { if (_0x18979e(0x36f) === _0x18979e(0x36f)) _0x69b5f9['className'] = 'narrator', _0x69b5f9['style']['fontStyle'] = _0x18979e(0x83d), _0x69b5f9['style']['color'] = _0x18979e(0x198), _0x69b5f9[_0x18979e(0x3c8)] = _0x346c53; else { const _0x5776a1 = _0x3522bd['getElementById'](_0x18979e(0xa67)); _0x5776a1['textContent'] = _0x8195b4, _0x5776a1[_0x18979e(0x636)]['display'] = _0x18979e(0x493); if (_0x220b3b['_t']) _0x4968d8(_0x34567f['_t']); _0x5e85ea['_t'] = _0x5071f1(() => { const _0x44f40a = _0x18979e; _0x5776a1[_0x44f40a(0x636)][_0x44f40a(0x6c5)] = 'none'; }, 0x640); } } _0x56f04c['appendChild'](_0x69b5f9); } }); if (_0x4025fd[_0x3b7cee(0x517)]) { let _0x2caaca = _0x56f04c[_0x3b7cee(0x6f8)](_0x3b7cee(0xa25)); !_0x2caaca && (_0x2caaca = document[_0x3b7cee(0x597)]('div'), _0x2caaca[_0x3b7cee(0x575)] = _0x3b7cee(0x5c7), _0x2caaca['textContent'] = _0x3b7cee(0x40e), _0x2caaca[_0x3b7cee(0x636)][_0x3b7cee(0x4b3)] = _0x3b7cee(0xa7a), _0x2caaca[_0x3b7cee(0x636)][_0x3b7cee(0x997)] = _0x3b7cee(0x2b3), _0x2caaca[_0x3b7cee(0x636)]['borderRadius'] = _0x3b7cee(0x4dd), _0x56f04c[_0x3b7cee(0x329)](_0x2caaca)); } const _0x2472c2 = document[_0x3b7cee(0x597)]('div'); _0x2472c2['id'] = _0x3b7cee(0x7f1), _0x56f04c[_0x3b7cee(0x329)](_0x2472c2), setTimeout(() => { const _0x46d6be = _0x3b7cee; _0x2472c2['scrollIntoView']({ 'behavior': _0x46d6be(0x2eb), 'block': 'end' }); }, 0x32); } } function _0x274381() { const _0x2c80a6 = _0x2a98b7; if (_0x2c80a6(0x756) === 'SlSgz') _0x59eb2c['error'](_0x2c80a6(0x214), _0x1e6c3b); else { const _0x183a3b = document[_0x2c80a6(0x6f8)](_0x2c80a6(0x60e)); if (!_0x183a3b) return; if (_0x183a3b['id'] === 'meeting-view-screen') { if (_0x2c80a6(0x581) !== _0x2c80a6(0x32e)) _0xeb55e8(); else return _0x2c80a6(0x347); } else _0x2c80a6(0x448) === 'AMXDx' ? _0xd9c5b0[_0x2c80a6(0x5f0)](_0x8aa338, _0x59f3e1['stringify'](_0x244f9f)) : _0x21e41c(); } } function _0x21e41c() { const _0x2259e7 = _0x2a98b7, _0x37aab7 = _0x4025fd[_0x2259e7(0x24a)][_0x2259e7(0x1f9)](_0x8d1bd => !_0x8d1bd[_0x2259e7(0x45e)] && _0x8d1bd[_0x2259e7(0x1ce)] !== 'system'); if (_0x37aab7[_0x2259e7(0x84b)] > _0x4025fd[_0x2259e7(0x7e6)]) { let _0x3084ac = _0x35c8dd[_0x2259e7(0x6f8)](_0x2259e7(0x749)); !_0x3084ac && (_0x2259e7(0x78f) === _0x2259e7(0x15c) ? _0x3ea987('获取模型失败:\x20' + _0x55c3ae[_0x2259e7(0x973)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1') : (_0x3084ac = document[_0x2259e7(0x597)](_0x2259e7(0x703)), _0x3084ac[_0x2259e7(0xab3)] = '加载更多聊天记录', _0x3084ac['className'] = 'form-button\x20load-more-btn', _0x3084ac[_0x2259e7(0x636)][_0x2259e7(0x6f0)] = _0x2259e7(0x2eb), _0x3084ac[_0x2259e7(0x636)]['margin'] = _0x2259e7(0x889), _0x3084ac[_0x2259e7(0x636)][_0x2259e7(0x997)] = _0x2259e7(0x96f), _0x3084ac[_0x2259e7(0x4a6)] = () => { const _0x1a34db = _0x2259e7; if (_0x1a34db(0x8d2) !== _0x1a34db(0x2d0)) { const _0x20d2de = _0x35c8dd, _0x55fb6c = _0x20d2de[_0x1a34db(0x650)], _0x3606d5 = _0x20d2de[_0x1a34db(0x3ce)]; _0x4025fd[_0x1a34db(0x7e6)] += 0x64, _0x21e41c(), requestAnimationFrame(() => { const _0x5c5489 = _0x1a34db, _0x4c192c = _0x20d2de['scrollHeight']; _0x20d2de[_0x5c5489(0x3ce)] = _0x3606d5 + (_0x4c192c - _0x55fb6c); }); } else _0x4b60bf[_0x1a34db(0x963)]('加载已保存字体失败:', _0x3dd929); }, _0x35c8dd[_0x2259e7(0x1e8)] ? _0x35c8dd[_0x2259e7(0x85a)](_0x3084ac, _0x35c8dd['firstChild']) : _0x35c8dd['appendChild'](_0x3084ac))); } else { if (_0x2259e7(0x2bf) === _0x2259e7(0x51b)) return [_0x5999bd]; else { const _0xbdaba4 = _0x35c8dd[_0x2259e7(0x6f8)](_0x2259e7(0x749)); if (_0xbdaba4) _0xbdaba4[_0x2259e7(0x7f8)](); } } Array[_0x2259e7(0x811)](_0x35c8dd['children'])[_0x2259e7(0x6ff)](_0x4a3df9 => { const _0x33bf0f = _0x2259e7; if (_0x33bf0f(0x8f0) === _0x33bf0f(0x8f0)) !_0x4a3df9[_0x33bf0f(0x544)]['contains'](_0x33bf0f(0x428)) && (_0x33bf0f(0x9c9) === _0x33bf0f(0x9c9) ? _0x4a3df9['remove']() : (_0x547a2e['likes'] = _0x4a849f[_0x33bf0f(0x4d9)] || [], _0x32a343[_0x33bf0f(0xa83)] = (_0x2393bf[_0x33bf0f(0xa83)] || [])['map']((_0xdb2eff, _0xc236c1) => ({ ..._0xdb2eff, 'commentId': 'c_' + _0x144387['timestamp'] + '_' + _0xc236c1 })), _0x564ec1(), _0x4a8356())); else { if (_0x37d064 === null) return; const _0x4788ba = _0x14bf30[_0x33bf0f(0x24a)][_0x346f2d]; if (!_0x4788ba) return; _0x151f4d[_0x33bf0f(0x95e)] = _0x4788ba[_0x33bf0f(0x9c6)], _0x5449bc(), _0x5bbe98[_0x33bf0f(0x544)][_0x33bf0f(0x82e)]('show'), _0x12c574[_0x33bf0f(0x63f)](); } }); const _0x133c53 = _0x37aab7[_0x2259e7(0xab4)](-_0x4025fd[_0x2259e7(0x7e6)]); _0x133c53[_0x2259e7(0x6ff)](_0x5efe4f => { const _0x53f0bf = _0x2259e7; if ('KlhPn' === _0x53f0bf(0x443)) { _0x22ca3c(_0x53f0bf(0x186)); return; } else { const _0x3493ed = _0x4025fd[_0x53f0bf(0x24a)][_0x53f0bf(0x3de)](_0x5efe4f); _0x3493ed > -0x1 && ('gDvPJ' !== 'pNFKX' ? _0x7a4a(_0x5efe4f, _0x3493ed) : (_0x353cfa[_0x309c04]['addEventListener'](_0x53f0bf(0xab8), () => _0x28c231[_0x27beec][_0x53f0bf(0xab8)]()), _0x458b81[_0x257b92][_0x53f0bf(0x20b)](_0x53f0bf(0x6a4), _0x1c93b9 => { const _0x5deee7 = _0x53f0bf; _0x30156b(_0x3444ab, _0x1c93b9['target'][_0x5deee7(0x1f1)][0x0]); }))); } }); if (_0x4025fd[_0x2259e7(0x517)]) { let _0x1c9958 = _0x35c8dd[_0x2259e7(0x6f8)](_0x2259e7(0xa25)); !_0x1c9958 && (_0x2259e7(0x999) === _0x2259e7(0x486) ? (_0x2a97b5[_0x2259e7(0x95e)] = '', _0x283773[_0x2259e7(0xab3)] = '创建新角色', _0x5cdd83[_0x2259e7(0x95e)] = _0x2259e7(0x2da) + (_0xe2f7a5[_0x2259e7(0x61c)][_0x2259e7(0x84b)] + 0x1), _0x252680[_0x2259e7(0x95e)] = '', _0x3ac131[_0x2259e7(0x2fd)] = _0x49a57f, _0x4d6538['value'] = _0x2259e7(0x787), _0x1a0e07[_0x2259e7(0x4b6)](_0x2259e7(0x7b9))[_0x2259e7(0x95e)] = '', _0x4f8f05()) : (_0x1c9958 = document[_0x2259e7(0x597)]('div'), _0x1c9958[_0x2259e7(0x575)] = 'typing-indicator', _0x1c9958[_0x2259e7(0xab3)] = _0x2259e7(0x92b), _0x35c8dd[_0x2259e7(0x329)](_0x1c9958))); } _0x133c53[_0x2259e7(0x84b)] <= _0x4025fd[_0x2259e7(0x7e6)] && (_0x2259e7(0x9fb) !== 'OGdyG' ? setTimeout(() => { const _0x27dd24 = _0x2259e7; _0x35c8dd[_0x27dd24(0x3ce)] = _0x35c8dd[_0x27dd24(0x650)]; }, 0x0) : _0x538b62 += _0x2259e7(0x7e4) + _0x3dd0b9['title'] + _0x2259e7(0x449) + _0x44d633[_0x2259e7(0x9c6)][_0x2259e7(0x829)](/\n/g, '\x20') + _0x2259e7(0x96c)); } function _0x7a4a(_0x54c847, _0x53d592) { const _0x4bed75 = _0x2a98b7, { role: _0x425df5, content: _0x41ff61, displayUrl: _0xaf87ef, image: _0x14e3d8, senderId: _0x67f35c } = _0x54c847, _0x49f5f4 = _0x425df5 === 'assistant' ? 'ai' : _0x425df5, _0x18288b = _0xba11a1(), _0xf80177 = document[_0x4bed75(0x597)]('div'); _0xf80177[_0x4bed75(0x544)][_0x4bed75(0x82e)](_0x4bed75(0x373), _0x49f5f4), _0xf80177[_0x4bed75(0x773)]['historyIndex'] = _0x53d592; const _0x4f49e8 = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0x4f49e8['className'] = _0x4bed75(0x92a); const _0x180c9c = document[_0x4bed75(0x597)]('img'); _0x180c9c[_0x4bed75(0x544)][_0x4bed75(0x82e)](_0x4bed75(0x12d), _0x425df5 + _0x4bed75(0x21e)); let _0x25722e = ''; if (_0x425df5 === _0x4bed75(0x880)) { const _0x42fe3e = _0x25fa5a(_0x4025fd['activeChatId']); _0x25722e = _0x42fe3e[_0x4bed75(0x12d)] || _0x2430ff; } else { if (_0x4bed75(0xa1e) === _0x4bed75(0x254)) _0x33daaf(), _0x28336d(_0x4bed75(0xabb), 'home'); else { _0x25722e = _0x535078; let _0x297a48 = null; if (_0x18288b?.[_0x4bed75(0xaa2)] === _0x4bed75(0x258)) _0x297a48 = _0x389a36(_0x18288b[_0x4bed75(0x2db)][0x0]); else _0x18288b?.[_0x4bed75(0xaa2)] === _0x4bed75(0x1d3) && _0x67f35c && (_0x297a48 = _0x389a36(_0x67f35c)); _0x297a48?.[_0x4bed75(0x12d)] && (_0x4bed75(0x888) === _0x4bed75(0x197) ? _0x1fac30('图片处理失败:\x20' + _0x13d278['message']) : _0x25722e = _0x297a48['avatar']); } } _0x180c9c[_0x4bed75(0x2fd)] = _0x25722e, _0x180c9c[_0x4bed75(0x339)] = _0x425df5 + _0x4bed75(0x4c6); const _0x57f187 = _0x41ff61 && _0x41ff61['trim']()[_0x4bed75(0x914)](_0x4bed75(0x875)) && _0x41ff61['trim']()[_0x4bed75(0x71c)](_0x4bed75(0x86f)); if (_0x57f187) { if (_0x4bed75(0x328) !== 'quIiO') _0x437c54[_0x4bed75(0x6f1)]('customFeedWallpaper'), _0x14daf0(), _0x1772ae(_0x4bed75(0x217)); else { const _0x134960 = document[_0x4bed75(0x597)]('div'); _0x134960[_0x4bed75(0x575)] = _0x4bed75(0x11b), _0x134960[_0x4bed75(0x3c8)] = _0x41ff61, _0x49f5f4 === _0x4bed75(0x880) ? (_0x4f49e8['appendChild'](_0x134960), _0x4f49e8[_0x4bed75(0x329)](_0x180c9c)) : _0x4bed75(0xa0c) !== _0x4bed75(0x87f) ? (_0x4f49e8[_0x4bed75(0x329)](_0x180c9c), _0x4f49e8[_0x4bed75(0x329)](_0x134960)) : _0x23b540[_0x4bed75(0x963)]('Failed\x20to\x20plan\x20group\x20replies:', _0x4c9b35); } } else { const _0x4a617c = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0x4a617c[_0x4bed75(0x544)][_0x4bed75(0x82e)](_0x4bed75(0x973), _0x49f5f4); if (_0x18288b?.[_0x4bed75(0xaa2)] === _0x4bed75(0x258)) { const _0x5e415e = _0x18288b[_0x4bed75(0x2db)][0x0]; _0x4a617c[_0x4bed75(0x544)]['add'](_0x4bed75(0x9f6) + _0x5e415e); } if (_0x54c847[_0x4bed75(0x630)]) { if ('OcNRS' === _0x4bed75(0xa68)) _0x3f1edb(![]), _0x1e7ac8[_0x4bed75(0x517)] = ![]; else { const _0x3eb160 = document['createElement']('div'); _0x3eb160[_0x4bed75(0x575)] = _0x4bed75(0x4e2); const _0x3813c3 = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0x3813c3['className'] = _0x4bed75(0x2a4), _0x3813c3[_0x4bed75(0xab3)] = _0x54c847['quotedMessage'][_0x4bed75(0x80f)]; const _0x367195 = document['createElement'](_0x4bed75(0x80e)); _0x367195[_0x4bed75(0x575)] = 'quoted-content', _0x367195['textContent'] = _0x54c847[_0x4bed75(0x630)][_0x4bed75(0x9c6)], _0x3eb160[_0x4bed75(0x329)](_0x3813c3), _0x3eb160['appendChild'](_0x367195), _0x4a617c[_0x4bed75(0x329)](_0x3eb160); } } if (_0xaf87ef) { _0x4a617c[_0x4bed75(0x544)]['add'](_0x4bed75(0x8e3)); const _0x3d8d28 = document[_0x4bed75(0x597)]('img'); _0x3d8d28[_0x4bed75(0x2fd)] = _0xaf87ef, _0x3d8d28[_0x4bed75(0x544)]['add']('sticker-content'), _0x4a617c[_0x4bed75(0x329)](_0x3d8d28); } else { if (_0x54c847[_0x4bed75(0x3b9)] || _0x54c847['imageId']) { if (_0x4bed75(0x34c) === 'AeYpI') _0x50e5fd(_0x11ce61['id']); else { _0x4a617c[_0x4bed75(0x544)]['add'](_0x4bed75(0x3b9)); const _0x1432e1 = document['createElement'](_0x4bed75(0x1d1)); _0x1432e1[_0x4bed75(0x544)][_0x4bed75(0x82e)]('message-image-content'), _0x4a617c[_0x4bed75(0x329)](_0x1432e1); _0x54c847[_0x4bed75(0x3b9)] ? _0x1432e1['src'] = _0x54c847[_0x4bed75(0x3b9)] : (_0x1432e1[_0x4bed75(0x2fd)] = _0x4bed75(0x1b0), _0x34b988(_0x54c847[_0x4bed75(0x3c7)])[_0x4bed75(0x4ea)](_0x567c1d => { const _0x2ea664 = _0x4bed75; if (_0x2ea664(0x3b7) === 'zBvvD') _0x47efb0(_0x36dc9b[_0x2ea664(0x95e)]), _0xb7116b(); else { if (_0x567c1d) { const _0x4df848 = URL['createObjectURL'](_0x567c1d); _0x1432e1['src'] = _0x4df848, _0x1432e1[_0x2ea664(0x422)] = () => { URL['revokeObjectURL'](_0x4df848); }; } else _0x1432e1['alt'] = _0x2ea664(0x491); } })['catch'](_0x128d1d => { const _0x1c52cc = _0x4bed75; console[_0x1c52cc(0x963)](_0x1c52cc(0x7e9), _0x128d1d), _0x1432e1['alt'] = _0x1c52cc(0x491); })); if (_0x41ff61) { if ('OVBho' === 'eFNkZ') { _0x159fa1['log'](_0x4bed75(0x1b4)); const _0x4ffdeb = { 'id': _0x4bed75(0x52a) + _0x593cae[_0x4bed75(0x98c)](), 'name': _0x136e48[_0x4bed75(0x146)][_0x4bed75(0x5f1)] || '我', 'avatar': _0x48d0e4['userProfile'][_0x4bed75(0x12d)] || _0x49aef2, 'persona': _0x3d3b00[_0x4bed75(0x146)][_0x4bed75(0x8ad)] || '' }; _0x1878f0[_0x4bed75(0x293)] = [_0x4ffdeb], _0x512ca8[_0x4bed75(0x4a1)] = _0x4ffdeb['id']; } else { const _0x27cff2 = document[_0x4bed75(0x597)]('p'); _0x27cff2[_0x4bed75(0x636)][_0x4bed75(0x395)] = '5px', _0x27cff2[_0x4bed75(0xab3)] = _0x41ff61, _0x4a617c[_0x4bed75(0x329)](_0x27cff2); } } } } else { if (_0x54c847[_0x4bed75(0xaa2)] === _0x4bed75(0x877)) { _0x4a617c[_0x4bed75(0x544)][_0x4bed75(0x82e)]('transfer'); const _0x577f71 = _0x54c847['role'] === _0x4bed75(0x880) ? _0x25fa5a(_0x4025fd['activeChatId']) : _0x389a36(_0x54c847['senderId']), _0x30b8aa = _0x54c847[_0x4bed75(0xaae)] === _0x25fa5a(_0x4025fd[_0x4bed75(0xa4d)])['id'] ? _0x25fa5a(_0x4025fd['activeChatId']) : _0x389a36(_0x54c847[_0x4bed75(0xaae)]), _0x4587e6 = _0x577f71?.[_0x4bed75(0x5f1)] ? _0x577f71['name'] + '的转账' : '转账', _0x2e087b = _0x30b8aa?.['name'] ? _0x4bed75(0x8a7) + _0x30b8aa[_0x4bed75(0x5f1)] : '转账', _0x2fe1b2 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20' + _0x4587e6 + _0x4bed75(0x3b4) + _0x54c847[_0x4bed75(0x9d2)]['toFixed'](0x2) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>' + _0x2e087b + _0x4bed75(0x9e5); _0x4a617c['innerHTML'] = _0x2fe1b2; } else { if (_0x54c847[_0x4bed75(0xaa2)] === _0x4bed75(0x80d)) { if (_0x4bed75(0x298) === _0x4bed75(0x298)) { _0x4a617c[_0x4bed75(0x544)]['add']('music'); const _0xca1c42 = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0xca1c42[_0x4bed75(0x575)] = _0x4bed75(0x6dc), _0xca1c42[_0x4bed75(0x544)][_0x4bed75(0x82e)](_0x4bed75(0x47f)); const _0x391041 = _0x54c847[_0x4bed75(0x1ce)] === _0x4bed75(0x880) ? _0x25fa5a(_0x4025fd[_0x4bed75(0xa4d)])[_0x4bed75(0x5f1)] || '你' : _0x389a36(_0x54c847['senderId'])?.[_0x4bed75(0x5f1)] || 'TA', _0x13f377 = 'cover_placeholder_' + _0x54c847['timestamp'], _0x2f3ac4 = _0x4bed75(0x76d) + _0x13f377 + _0x4bed75(0x156) + _0x535078 + '\x22>'; if (_0x54c847[_0x4bed75(0x3e0)]) { if (_0x4bed75(0x11d) !== 'rgyAP') { const _0x1492d5 = _0x3369b7[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0x1492d5[_0x4bed75(0x575)] = _0x4bed75(0x1bb), _0x1492d5['id'] = _0x4bed75(0x9fa) + _0x55b30b, _0x5415f1 === _0x5ac461[_0x4bed75(0x44c)] && _0x1492d5[_0x4bed75(0x544)]['add'](_0x4bed75(0x1ff)), _0x32e583['forEach'](_0xa6bc7d => { const _0xd208d9 = _0x4bed75, _0x57a8f5 = _0xa6bc7d[_0xd208d9(0x675)] === 'user' ? _0xd208d9(0x880) : 'ai', _0x38745f = _0xa6bc7d['author'] === _0xd208d9(0x880) ? _0x417999['name'] : _0x1e277b(_0xa6bc7d['author'])[_0xd208d9(0x5f1)], _0x469159 = _0x3c9579[_0xd208d9(0x597)](_0xd208d9(0x80e)); _0x469159[_0xd208d9(0x575)] = _0xd208d9(0x49c) + _0x57a8f5, _0x469159[_0xd208d9(0x773)]['timestamp'] = _0xa6bc7d['timestamp'], _0x469159['style']['borderBottom'] = 'none', _0x469159[_0xd208d9(0x636)]['paddingBottom'] = '0', _0x469159[_0xd208d9(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x38745f + _0xd208d9(0x325) + new _0x349854(_0xa6bc7d[_0xd208d9(0x36b)])['toLocaleString']('zh-CN') + _0xd208d9(0xab9) + _0xa6bc7d[_0xd208d9(0x9c6)]['replace'](/\n/g, _0xd208d9(0x3f8)) + _0xd208d9(0x5b2), _0x1492d5[_0xd208d9(0x329)](_0x469159); }), _0x33e957[_0x4bed75(0x329)](_0x1492d5); } else _0x34b988(_0x54c847['coverId'])[_0x4bed75(0x4ea)](_0x35850f => { const _0x26ea8a = _0x4bed75; if (_0x26ea8a(0x819) !== 'iWXGT') { if (_0x383d9f['role'] === 'user') return _0xbe1c9e[_0x26ea8a(0x146)]?.['name'] || _0x26ea8a(0x600); if (_0x2d90a6['type'] === _0x26ea8a(0x1d3)) { const _0x557db3 = _0xd10920['senderId'] ? _0x5e1cef(_0x15ddd6['senderId']) : null; return _0x557db3?.[_0x26ea8a(0x5f1)] || _0x26ea8a(0x97f); } else { const _0x20b883 = _0x2a2366(_0x10c8b3[_0x26ea8a(0x2db)][0x0]); return _0x20b883?.['name'] || 'AI'; } } else { const _0x5e5b7d = document['getElementById'](_0x13f377); if (_0x5e5b7d && _0x35850f) _0x5e5b7d[_0x26ea8a(0x2fd)] = URL[_0x26ea8a(0x798)](_0x35850f); } }); } if (_0x54c847[_0x4bed75(0x830)]) { if (_0x4bed75(0x2c6) === 'zajzb') _0xca1c42[_0x4bed75(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2f3ac4 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x54c847[_0x4bed75(0x4c5)] + _0x4bed75(0x890) + _0x54c847[_0x4bed75(0x278)] + _0x4bed75(0xac9); else { const _0x3f6339 = _0x2f9eb6[_0x4bed75(0x293)]['find'](_0x28dfcf => _0x28dfcf['id'] === _0x580801[_0x4bed75(0x4a1)]) || { 'name': '你' }, _0x4623a6 = _0x182957[_0x4bed75(0xab2)][_0x4bed75(0x32b)](_0x54cf05 => _0x54cf05[_0x4bed75(0x3c0)] === _0x2e1a9f); if (!_0x4623a6 || !_0x4623a6[_0x4bed75(0x204)] || _0x4623a6[_0x4bed75(0x204)][_0x4bed75(0x84b)] === 0x0) return ''; const _0x4dcd53 = _0x4623a6['entries'][_0x4bed75(0xab4)](-0x8), _0x317a18 = _0x4dcd53[_0x4bed75(0x30c)](_0x587437 => { const _0x56f529 = _0x4bed75, _0x5505a8 = _0x587437['author'] === 'user' ? _0x3f6339['name'] : _0x2e01e7(_0x587437[_0x56f529(0x675)])[_0x56f529(0x5f1)]; return _0x56f529(0x580) + new _0x38ae49(_0x587437[_0x56f529(0x36b)])[_0x56f529(0x213)]() + ']\x20' + _0x5505a8 + _0x56f529(0x398) + _0x587437[_0x56f529(0x9c6)]; })[_0x4bed75(0x602)]('\x0a'); return _0x4bed75(0x5c6) + _0x3f6339['name'] + _0x4bed75(0x297) + _0x317a18; } } else { if (_0x4bed75(0x507) !== _0x4bed75(0x507)) { const _0x59f179 = _0xc9aaa4[_0x4bed75(0x93f)](_0x3fca17); _0xa68016[_0x4bed75(0x5f8)](_0x59f179) && (_0x4e0c4a[_0x4bed75(0x95e)] = _0x59f179[_0x4bed75(0x30c)](_0x3fdf01 => _0x3fdf01[_0x4bed75(0x5f1)] + '--' + _0x3fdf01[_0x4bed75(0x13f)])[_0x4bed75(0x602)]('\x0a')); } else _0xca1c42[_0x4bed75(0x3c8)] = _0x4bed75(0xa3f) + _0x391041 + '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2f3ac4 + _0x4bed75(0x7ea) + _0x54c847[_0x4bed75(0x4c5)] + _0x4bed75(0x890) + _0x54c847[_0x4bed75(0x278)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x54c847[_0x4bed75(0xa21)] + _0x4bed75(0x891); } _0x4a617c['appendChild'](_0xca1c42); } else { const _0x50c895 = { 'characters': _0x233744[_0x4bed75(0x61c)], 'worldBooks': _0x368638[_0x4bed75(0xa3c)], 'chats': _0x58e44c[_0x4bed75(0x132)], 'userProfile': _0x172ec4[_0x4bed75(0x146)], 'apiSettings': _0x2f1fe6[_0x4bed75(0x2c2)], 'preferences': _0x429782[_0x4bed75(0x271)], 'activeChatId': _0xf97915[_0x4bed75(0xa4d)], 'diaries': _0x405ac2[_0x4bed75(0xab2)], 'friendCircles': _0x5aac64[_0x4bed75(0x9b0)], 'activeFriendCircleId': _0x19e103[_0x4bed75(0x31a)], 'userProfiles': _0x2a846c[_0x4bed75(0x293)], 'activeUserProfileId': _0x3d70f1['activeUserProfileId'], 'accountingData': _0x57bc6a[_0x4bed75(0x30e)], 'accountingLedger': _0x4b7401[_0x4bed75(0x961)] }; _0x579fad[_0x4bed75(0x5f0)](_0x4bed75(0xa8a), _0x558fd6[_0x4bed75(0x49f)](_0x50c895)); } } else { if (_0x54c847[_0x4bed75(0xaa2)] === _0x4bed75(0x43a) && _0x54c847[_0x4bed75(0x4c5)]) { _0x4a617c['classList'][_0x4bed75(0x82e)]('music'); const _0x398c5a = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); _0x398c5a[_0x4bed75(0x575)] = 'music-share-card', _0x398c5a[_0x4bed75(0x773)][_0x4bed75(0x864)] = _0x4bed75(0x308) + _0x54c847[_0x4bed75(0x36b)]; const _0x4cea7f = _0x4bed75(0x925) + _0x54c847[_0x4bed75(0x36b)], _0x40029a = _0x4bed75(0x7e1) + _0x535078 + _0x4bed75(0x3d5) + _0x4cea7f + _0x4bed75(0x207); if (_0x54c847[_0x4bed75(0x3e0)]) _0x34b988(_0x54c847['coverId'])[_0x4bed75(0x4ea)](_0x420479 => { const _0x1640ac = _0x4bed75; if (_0x1640ac(0x8a3) !== _0x1640ac(0x8a3)) { _0x3a3101['classList']['add'](_0x1640ac(0x8e3)); const _0x683189 = _0x1a12cc[_0x1640ac(0x597)](_0x1640ac(0x1d1)); _0x683189['src'] = _0x186011, _0x683189[_0x1640ac(0x544)][_0x1640ac(0x82e)](_0x1640ac(0x4fa)), _0x111e37[_0x1640ac(0x329)](_0x683189); } else { const _0x3957df = document[_0x1640ac(0x4b6)](_0x4cea7f); if (_0x3957df && _0x420479) _0x3957df[_0x1640ac(0x2fd)] = URL[_0x1640ac(0x798)](_0x420479); } }); else _0x54c847['coverUrl'] && setTimeout(() => { const _0x2fed3f = _0x4bed75, _0x365445 = document[_0x2fed3f(0x4b6)](_0x4cea7f); if (_0x365445) _0x365445['src'] = _0x54c847[_0x2fed3f(0x3ad)]; }, 0x0); _0x398c5a['innerHTML'] = _0x4bed75(0x233) + _0x40029a + _0x4bed75(0x6d2) + _0x54c847[_0x4bed75(0x4c5)] + _0x4bed75(0x95f) + _0x54c847[_0x4bed75(0x278)] + _0x4bed75(0x68b) + (_0x54c847[_0x4bed75(0x22c)] ? '▶' : '⚠') + _0x4bed75(0x86f), _0x54c847[_0x4bed75(0x22c)] && (_0x4bed75(0x8d7) === 'UtsqA' ? _0xeeaf8 = _0x4bed75(0x84d) : _0x398c5a['addEventListener']('click', function () { const _0x5138b2 = _0x4bed75; if (_0x5138b2(0x52b) === _0x5138b2(0x663)) { _0x130a06(_0x5138b2(0x11f)); return; } else { const _0x3f2257 = { 'id': 'msg_' + _0x54c847[_0x5138b2(0x36b)], 'url': _0x54c847[_0x5138b2(0x22c)] }; _0x262c75(this, _0x3f2257); } })), _0x4a617c[_0x4bed75(0x329)](_0x398c5a); } else { if ('dwPMe' !== 'dwPMe') _0x3fa2d1(); else { if (_0x41ff61) { const _0x5f4444 = document[_0x4bed75(0x597)]('p'); _0x5f4444[_0x4bed75(0x3c8)] = _0x41ff61, _0x5f4444[_0x4bed75(0x636)][_0x4bed75(0x316)] = '0', _0x4a617c[_0x4bed75(0x329)](_0x5f4444); } } } } } } } _0x425df5 === _0x4bed75(0x880) ? _0x4bed75(0x6ea) === 'whxIm' ? (_0x4f49e8[_0x4bed75(0x329)](_0x4a617c), _0x4f49e8[_0x4bed75(0x329)](_0x180c9c)) : (_0x3a7310(), _0x3f5f6c(_0x4bed75(0x9ec), _0x4bed75(0x786))) : 'uWekm' !== _0x4bed75(0x764) ? _0x23dde5(_0x212dd1, _0x21aae0, !![]) : (_0x4f49e8[_0x4bed75(0x329)](_0x180c9c), _0x4f49e8[_0x4bed75(0x329)](_0x4a617c)); } _0xf80177['appendChild'](_0x4f49e8); const _0x4d9206 = document[_0x4bed75(0x597)](_0x4bed75(0x80e)); return _0x4d9206[_0x4bed75(0x575)] = _0x4bed75(0x36b), _0x4d9206[_0x4bed75(0xab3)] = _0x185511(_0x54c847[_0x4bed75(0x36b)]), _0xf80177['appendChild'](_0x4d9206), _0x35c8dd[_0x4bed75(0x329)](_0xf80177), _0xf80177; } document[_0x2a98b7(0x4b6)](_0x2a98b7(0x7b1))['addEventListener'](_0x2a98b7(0xab8), _0x32ab00); let _0x439755 = null, _0x376663 = null; function _0x32ab00(_0x1177e3) { const _0x1ce27d = _0x2a98b7; if (window[_0x1ce27d(0x8a5)]()[_0x1ce27d(0x2d4)]()) return; const _0x36842e = _0x1177e3[_0x1ce27d(0x492)][_0x1ce27d(0x17f)](_0x1ce27d(0x840)), _0x1aabe2 = _0x1177e3[_0x1ce27d(0x492)]['closest']('.no-action-modal'); if (!_0x36842e || _0x1aabe2) return; const _0x293d62 = parseInt(_0x36842e[_0x1ce27d(0x773)][_0x1ce27d(0x173)], 0xa); if (isNaN(_0x293d62)) return; _0x28a1c0(_0x293d62); } function _0x27a7c1() { const _0x332b5c = _0x2a98b7, _0x25c497 = _0xba11a1(); if (!_0x25c497) { if (_0x332b5c(0x768) !== 'beuth') { _0x2c9dab[_0x332b5c(0xab3)] = _0x332b5c(0x912); return; } else _0x448d78 = _0x332b5c(0x8b1) + _0x4ac4c3[_0x332b5c(0x5f1)] + _0x332b5c(0x654); } if (_0x25c497[_0x332b5c(0xaa2)] === 'private') { if (_0x332b5c(0x70e) !== _0x332b5c(0xaad)) { const _0x57d32c = _0x389a36(_0x25c497[_0x332b5c(0x2db)][0x0]); _0x2c9dab[_0x332b5c(0xab3)] = _0x57d32c ? _0x57d32c[_0x332b5c(0x5f1)] : '未知角色'; } else _0x5efe5d(_0x332b5c(0x365) + _0x1e28ae[_0x332b5c(0x973)]); } else _0x2c9dab[_0x332b5c(0xab3)] = _0x25c497[_0x332b5c(0x5f1)] || '群聊\x20(' + _0x25c497['participantIds'][_0x332b5c(0x84b)] + ')'; } function _0x3e5e69(_0x2cc570) { const _0x48e7d6 = _0x2a98b7; if (_0x48e7d6(0xa93) !== _0x48e7d6(0xa93)) _0x6cbe8a[_0x48e7d6(0x293)] = _0x12bbb8[_0x48e7d6(0x293)]['filter'](_0xaed905 => _0xaed905['id'] !== _0x114c86), _0x415299['activeUserProfileId'] === _0x381beb && (_0x94f506['activeUserProfileId'] = _0x3ac30f[_0x48e7d6(0x293)][0x0]['id']), _0x669b9a[_0x48e7d6(0x132)][_0x48e7d6(0x6ff)](_0x256147 => { const _0x7497f0 = _0x48e7d6; _0x256147[_0x7497f0(0x774)] === _0x5d06d5 && (_0x256147[_0x7497f0(0x774)] = _0x3b84e2[_0x7497f0(0x4a1)]); }), _0x5a10f0(), _0x809b4d(_0x48e7d6(0x1a7)), _0xae130d(), _0x3d939e('userProfileList', _0x48e7d6(0x146)); else { const _0x5ca424 = document[_0x48e7d6(0x6f8)](_0x48e7d6(0x60e)); if (_0x5ca424 && (_0x5ca424['id'] === _0x48e7d6(0x958) || _0x5ca424['id'] === _0x48e7d6(0xa37))) _0x274381(); else { const _0x37b248 = document['querySelectorAll'](_0x48e7d6(0xa25)); _0x37b248[_0x48e7d6(0x6ff)](_0x26b52c => _0x26b52c['remove']()); } } } function _0x47d03a() { const _0x219fba = _0x2a98b7; if (_0x219fba(0x96a) === _0x219fba(0x96a)) _0x4025fd[_0x219fba(0x517)] && _0x4025fd[_0x219fba(0x38a)] && (console[_0x219fba(0x66c)](_0x219fba(0x269)), _0x4025fd[_0x219fba(0x38a)][_0x219fba(0x8da)](_0x219fba(0x522)), _0x4025fd[_0x219fba(0x38a)] = null), _0x4025fd['isGenerating'] = ![], _0x3e5e69(![]); else { if (_0x39c9c0[_0x219fba(0x7eb)]) _0x567528(_0x1aa89d['diaryPressTimer']); const _0x423c55 = _0x5229ba[_0x219fba(0x492)][_0x219fba(0x17f)](_0x219fba(0x355)); if (!_0x423c55) return; const _0x26dfad = _0x423c55[_0x219fba(0x773)][_0x219fba(0x36b)], _0x31d407 = _0x423c55[_0x219fba(0x544)][_0x219fba(0x61a)](_0x219fba(0x880)) ? _0x219fba(0x880) : 'ai'; if (!_0x26dfad) return; const _0x4d47b2 = () => { _0x9248df['diaryPressTimer'] = _0x4a0ee2(() => { const _0x34e4c6 = _0x2f04; if (_0x41b23d[_0x34e4c6(0xaa2)] === _0x34e4c6(0x866)) _0x3593bd[_0x34e4c6(0x3e5)](); _0x1659b5(_0x5d459a(_0x26dfad, 0xa), _0x31d407); }, 0x320); }, _0x5d7d54 = () => { if (_0xc030de['diaryPressTimer']) _0xe57632(_0x5e973e['diaryPressTimer']); }; _0x3323e3[_0x219fba(0x20b)](_0x219fba(0x5a7), _0x5d7d54, { 'once': !![] }), _0x5a77b1[_0x219fba(0x20b)](_0x219fba(0x13d), _0x5d7d54, { 'once': !![] }), _0x5a8552['addEventListener']('touchcancel', _0x5d7d54, { 'once': !![] }), _0x4d47b2(); } } function _0xba11a1() { const _0x159a4f = _0x2a98b7; return _0x4025fd[_0x159a4f(0x132)]['find'](_0x1b49a8 => _0x1b49a8['id'] === _0x4025fd[_0x159a4f(0xa4d)]); } function _0x389a36(_0xf370bf) { const _0x212ac2 = _0x2a98b7; return _0x4025fd[_0x212ac2(0x61c)][_0x212ac2(0x32b)](_0x116532 => _0x116532['id'] === _0xf370bf); } function _0x433580(_0x334582) { const _0x225565 = _0x2a98b7; if (_0x225565(0x833) === _0x225565(0x4d3)) _0x2d2b59(_0x98cbca); else { _0x4025fd[_0x225565(0x61c)] = _0x4025fd[_0x225565(0x61c)][_0x225565(0x1f9)](_0x3855eb => _0x3855eb['id'] !== _0x334582), _0x4025fd['chats'][_0x225565(0x6ff)](_0x539bc3 => { const _0x5c73e2 = _0x225565; if (_0x539bc3[_0x5c73e2(0xaa2)] === _0x5c73e2(0x1d3)) { if (_0x5c73e2(0x36a) === _0x5c73e2(0x7f6)) { if (_0x5a0a10['isAnimatingDiary']) return; const _0x4369b2 = _0x157a00[_0x5c73e2(0x44c)]; if (_0x4369b2 <= 0x0) return; _0x442bbe['isAnimatingDiary'] = !![]; const _0x59eaeb = _0x4369b2 - 0x1, _0x2b0d66 = _0x1dee0f[_0x5c73e2(0x4b6)]('diary-page-' + _0x4369b2), _0x49f8ad = _0x732dbc['getElementById'](_0x5c73e2(0x9fa) + _0x59eaeb); _0x2b0d66 && _0x49f8ad ? (_0x49f8ad[_0x5c73e2(0x544)][_0x5c73e2(0x82e)](_0x5c73e2(0x7ac)), _0x2b0d66[_0x5c73e2(0x544)][_0x5c73e2(0x82e)](_0x5c73e2(0x92c)), _0x49f8ad[_0x5c73e2(0x544)][_0x5c73e2(0x82e)](_0x5c73e2(0x1ff)), _0x241b3b(() => { const _0x23fa3e = _0x5c73e2; _0x2b0d66['classList'][_0x23fa3e(0x7f8)]('is-visible', _0x23fa3e(0x92c)), _0x49f8ad[_0x23fa3e(0x544)]['remove'](_0x23fa3e(0x7ac)), _0x3d6015[_0x23fa3e(0x44c)] = _0x59eaeb, _0x34360e(), _0x214285[_0x23fa3e(0xa31)] = ![]; }, 0x2bc)) : _0x49a24e[_0x5c73e2(0xa31)] = ![]; } else _0x539bc3[_0x5c73e2(0x2db)] = _0x539bc3[_0x5c73e2(0x2db)][_0x5c73e2(0x1f9)](_0x169ae2 => _0x169ae2 !== _0x334582); } }); const _0x499666 = _0x4025fd[_0x225565(0x132)][_0x225565(0x32b)](_0x8a0de0 => _0x8a0de0[_0x225565(0xaa2)] === _0x225565(0x258) && _0x8a0de0['participantIds'][_0x225565(0x9f1)](_0x334582)); _0x499666 && _0x471182(_0x499666['id']), _0x4025fd[_0x225565(0x132)] = _0x4025fd[_0x225565(0x132)][_0x225565(0x1f9)](_0x331180 => _0x331180[_0x225565(0xaa2)] !== _0x225565(0x1d3) || _0x331180['participantIds']['length'] > 0x1), _0x33c083(), _0x56d0ee(); } } function _0x471182(_0x4abdcf) { const _0x24db5c = _0x2a98b7; _0x4025fd[_0x24db5c(0x132)] = _0x4025fd[_0x24db5c(0x132)][_0x24db5c(0x1f9)](_0x5ce87d => _0x5ce87d['id'] !== _0x4abdcf); try { if (_0x24db5c(0x49d) !== _0x24db5c(0x2ae)) localStorage[_0x24db5c(0x6f1)](_0x24db5c(0x8ab) + _0x4abdcf); else { _0x31a3f8(_0x24db5c(0x827), 'worldBook'); if (_0x11491a) { const _0x480b2e = _0x3d52ea[_0x24db5c(0xa3c)]['find'](_0x192402 => _0x192402['id'] === _0x136e49); if (!_0x480b2e) return; _0x3572c7[_0x24db5c(0x4b6)]('editing-world-book-id')[_0x24db5c(0x95e)] = _0x480b2e['id'], _0x585dfb[_0x24db5c(0x4b6)]('world-book-editor-title')[_0x24db5c(0xab3)] = '编辑条目', _0x29b666['getElementById'](_0x24db5c(0x983))['value'] = _0x480b2e[_0x24db5c(0x5f1)], _0xe8823f[_0x24db5c(0x4b6)](_0x24db5c(0xa60))[_0x24db5c(0x95e)] = _0x480b2e[_0x24db5c(0x9c6)]; } else _0x11b9b6[_0x24db5c(0x4b6)](_0x24db5c(0x66a))[_0x24db5c(0x95e)] = '', _0x5da511[_0x24db5c(0x4b6)](_0x24db5c(0x790))[_0x24db5c(0xab3)] = _0x24db5c(0x77c), _0x16424f[_0x24db5c(0x4b6)]('world-book-edit-name')[_0x24db5c(0x95e)] = '', _0x141329[_0x24db5c(0x4b6)]('world-book-edit-content')[_0x24db5c(0x95e)] = ''; } } catch (_0x40259a) { console[_0x24db5c(0x963)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x4abdcf, _0x40259a); } _0x4025fd[_0x24db5c(0xa4d)] === _0x4abdcf && (_0x4025fd[_0x24db5c(0xa4d)] = _0x4025fd[_0x24db5c(0x132)][0x0]?.['id'] || null, _0x1e0ed0(_0x4025fd[_0x24db5c(0xa4d)])), _0x33c083(), _0x56d0ee(); } async function _0x1e0ed0(_0x2d541e) { const _0x37d634 = _0x2a98b7; if (_0x37d634(0x4e7) === _0x37d634(0x4d1)) _0x527b88(_0x37d634(0x402) + _0x36824b['message']); else { _0x4025fd['activeChatId'] !== _0x2d541e && (_0x47d03a(), _0x4025fd[_0x37d634(0x7e6)] = 0x64); if (!_0x2d541e) { _0x4025fd[_0x37d634(0xa4d)] = null, _0x33c083(), _0x3ddb58(![]), document['getElementById'](_0x37d634(0x6e0))[_0x37d634(0x636)]['backgroundImage'] = ''; return; } _0x4025fd['activeChatId'] = _0x2d541e, _0x33c083(), _0x27a7c1(), _0x35c8dd['innerHTML'] = '', _0x32d19f(!![], '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书'), setTimeout(async () => { const _0x373286 = _0x37d634; try { _0x1c1a05(); const _0x6c24e = _0xba11a1(), _0x123ee9 = document[_0x373286(0x4b6)](_0x373286(0x6e0)); let _0x220b8f = null; if (_0x6c24e) { if (_0x6c24e[_0x373286(0xaa2)] === _0x373286(0x258)) { const _0x3c4226 = _0x6c24e[_0x373286(0x2db)][0x0]; _0x22b7b5(_0x3c4226), _0x220b8f = await _0x34b988(_0x373286(0x4c4) + _0x3c4226); } else 'oGMgq' !== _0x373286(0x3e4) ? _0x34f62f[_0x373286(0x636)][_0x373286(0x6c5)] = _0x373286(0x865) : _0x220b8f = await _0x34b988(_0x373286(0x74d) + _0x6c24e['id']); _0x220b8f ? (_0x123ee9[_0x373286(0x636)][_0x373286(0x4b7)] = _0x373286(0x314) + URL[_0x373286(0x798)](_0x220b8f) + '\x27)', _0x123ee9[_0x373286(0x636)][_0x373286(0x799)] = _0x373286(0x549), _0x123ee9[_0x373286(0x636)][_0x373286(0x90b)] = _0x373286(0x5c1)) : _0x123ee9[_0x373286(0x636)]['backgroundImage'] = ''; } _0x21e41c(); } catch (_0xf87cf) { console[_0x373286(0x963)]('切换聊天时发生异步错误:', _0xf87cf), _0x26f8b2('加载聊天失败:\x20' + _0xf87cf['message']); } finally { if (_0x373286(0x44d) !== _0x373286(0x576)) _0x32d19f(![]); else { const _0x5581ef = _0x24f2cb[_0x373286(0x9b0)]['find'](_0x4fd140 => _0x4fd140['id'] === _0xca59cf[_0x373286(0x31a)]), _0x3e2c75 = _0x5581ef ? _0x5581ef[_0x373286(0x13e)] : []; if (!_0x3e2c75 || _0x3e2c75[_0x373286(0x84b)] === 0x0) return ''; const _0x498f4a = _0x3e2c75[_0x373286(0xab4)](0x0, 0x5), _0x373b74 = _0x498f4a[_0x373286(0x30c)](_0x2191f1 => { const _0x413575 = _0x373286, _0x3a0c02 = _0x3df85e(_0x2191f1[_0x413575(0xa84)]) || { 'name': '未知' }; let _0x29c979 = _0x413575(0x5b9) + _0x3a0c02[_0x413575(0x5f1)] + '\x20说：“' + (_0x2191f1[_0x413575(0x8e4)] || _0x2191f1[_0x413575(0x9c6)]) + '”'; return _0x2191f1[_0x413575(0xaa2)] === _0x413575(0x43a) && (_0x29c979 += '\x20(分享了歌曲:\x20' + _0x2191f1[_0x413575(0x4c5)] + _0x413575(0x6e6) + _0x2191f1[_0x413575(0x278)] + ')'), _0x29c979; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0x373b74[_0x373286(0x602)]('\x0a'); } } }, 0x32); } } async function _0x5603c2() { const _0x431dbe = _0x2a98b7; if (_0x4025fd[_0x431dbe(0x517)]) { _0x26f8b2(_0x431dbe(0x9be)); return; } const _0x5d5778 = _0x4025fd[_0x431dbe(0x24a)]; if (_0x5d5778[_0x431dbe(0x84b)] === 0x0) return; let _0xeb0464 = -0x1; for (let _0x316d86 = _0x5d5778[_0x431dbe(0x84b)] - 0x1; _0x316d86 >= 0x0; _0x316d86--) { if (_0x5d5778[_0x316d86][_0x431dbe(0x1ce)] === _0x431dbe(0x880)) { _0xeb0464 = _0x316d86; break; } } if (_0xeb0464 === -0x1 || _0xeb0464 === _0x5d5778[_0x431dbe(0x84b)] - 0x1) { if (_0x431dbe(0x670) === _0x431dbe(0x3c3)) _0x34a827[_0x431dbe(0x5f0)](_0x5bfa3b, _0x4c3b03[_0x431dbe(0x916)][_0x5580b0]); else { _0x26f8b2(_0x431dbe(0x20a)); return; } } _0x5d5778[_0x431dbe(0x31d)](_0xeb0464 + 0x1), _0x530f2e(), _0x274381(), setTimeout(() => { const _0x49c7a1 = _0x431dbe; if (_0x49c7a1(0x6b7) === _0x49c7a1(0x6b7)) _0x4e1acc(); else throw _0x1d1bbb; }, 0x64); } function _0x4d26ec(_0x206773 = null) { const _0x3024f0 = _0x2a98b7, _0xa6eaa0 = _0x206773 ?? _0x547059[_0x3024f0(0x95e)][_0x3024f0(0x345)](); if (_0xa6eaa0 === '' || !_0x4025fd['activeChatId']) return; const _0x4675d2 = document[_0x3024f0(0x6f8)](_0x3024f0(0x60e)), _0x3b764f = _0x4675d2['id'] === _0x3024f0(0x958), _0x217b66 = { 'role': _0x3024f0(0x880), 'content': _0xa6eaa0, 'timestamp': Date[_0x3024f0(0x98c)](), 'isOffline': _0x3b764f }; _0x4025fd[_0x3024f0(0x9e3)] && ('XMMFE' === 'XMMFE' ? _0x217b66[_0x3024f0(0x630)] = { ..._0x4025fd[_0x3024f0(0x9e3)] } : _0x56a5ac[_0x3024f0(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x40cfeb['toLocaleTimeString'](_0x3024f0(0x838), { 'hour': _0x3024f0(0x87a), 'minute': _0x3024f0(0x87a), 'hour12': ![] }) + _0x3024f0(0x3ec)), _0x4025fd[_0x3024f0(0x24a)][_0x3024f0(0x65b)](_0x217b66), _0x530f2e(), _0x274381(), !_0x206773 && (_0x547059[_0x3024f0(0x95e)] = ''), _0x70c20a(); } function _0xac5cdb(_0x2f28a4) { const _0x2701bd = _0x2a98b7; if (!_0x2f28a4 || !_0x4025fd[_0x2701bd(0xa4d)]) return; const _0x4cbe70 = { 'role': _0x2701bd(0x880), 'content': _0x2701bd(0x7fa) + _0x2f28a4[_0x2701bd(0x5f1)] + ']', 'displayUrl': _0x2f28a4[_0x2701bd(0x13f)], 'timestamp': Date['now']() }; _0x4025fd['conversationHistory'][_0x2701bd(0x65b)](_0x4cbe70), _0x7a4a(_0x4cbe70, _0x4025fd[_0x2701bd(0x24a)]['length'] - 0x1), _0x530f2e(), _0x56c998[_0x2701bd(0x544)][_0x2701bd(0x7f8)](_0x2701bd(0x187)); } async function _0x8a68c1(_0x11fdb7) { const _0xc870d7 = _0x2a98b7, _0x213d99 = _0x11fdb7['target']['files'][0x0]; if (!_0x213d99 || !_0x4025fd[_0xc870d7(0xa4d)]) return; _0x32d19f(!![], '正在处理图片...'); try { const _0x418db1 = await _0x245ee4(_0x213d99, 0x320, 0.8, !![]), _0x9a33b7 = _0xc870d7(0xabf) + Date[_0xc870d7(0x98c)](); await _0x5a7151(_0x9a33b7, _0x418db1); const _0xf5a078 = _0x547059[_0xc870d7(0x95e)][_0xc870d7(0x345)](); _0x547059[_0xc870d7(0x95e)] = ''; const _0xf27434 = { 'role': _0xc870d7(0x880), 'content': _0xf5a078, 'imageId': _0x9a33b7, 'timestamp': Date['now']() }; _0x4025fd['conversationHistory'][_0xc870d7(0x65b)](_0xf27434), _0x7a4a(_0xf27434, _0x4025fd[_0xc870d7(0x24a)]['length'] - 0x1), _0x530f2e(); } catch (_0x27a4fe) { _0x26f8b2(_0xc870d7(0x511) + _0x27a4fe['message']); } finally { _0xc870d7(0x3df) === 'rSfqA' ? (_0x54aeb3['error'](_0xc870d7(0x444), _0x595308, _0xc870d7(0x4f7), _0x1b1cff), _0x3c5b9e[_0xc870d7(0x24a)][_0xc870d7(0x65b)]({ 'role': _0xc870d7(0x135), 'senderId': _0x5edded['id'], 'timestamp': _0x4e645f[_0xc870d7(0x98c)](), 'isOffline': !![], 'content': _0xc870d7(0x4c3) + _0x52d1eb + ']' })) : (_0x32d19f(![]), _0x11fdb7[_0xc870d7(0x492)][_0xc870d7(0x95e)] = ''); } } async function _0x246f80() { const _0x238261 = _0x2a98b7; if (_0x238261(0x182) !== _0x238261(0x182)) _0x5d3145[_0x238261(0x636)]['backgroundImage'] = 'none'; else { if (!_0x4025fd[_0x238261(0xa4d)]) return; const _0x2158f7 = await _0xa1948f(); if (!_0x2158f7) return; _0x26f8b2(_0x238261(0x7ec)); try { if (_0x238261(0x4c8) !== _0x238261(0x5f7)) { const _0x21cf24 = await _0x5dfa8e(_0x2158f7['songName'], _0x2158f7['artist']); let _0x1d50ba = _0x21cf24[_0x238261(0x549)]; if (_0x21cf24[_0x238261(0x549)] && _0x21cf24[_0x238261(0x549)][_0x238261(0x914)](_0x238261(0x9e1))) try { const _0x425638 = await fetch(_0x21cf24[_0x238261(0x549)]), _0x29fe7a = await _0x425638[_0x238261(0x433)](); _0x1d50ba = await _0xe16e6b(_0x29fe7a); } catch (_0x4d4803) { console[_0x238261(0x963)](_0x238261(0x2c4), _0x4d4803), _0x1d50ba = _0x535078; } const _0x285ff3 = { 'role': _0x238261(0x880), 'type': 'music', 'content': _0x238261(0x8a4) + _0x2158f7[_0x238261(0x4c5)] + _0x238261(0x6e6) + _0x2158f7[_0x238261(0x278)] + ']', 'songName': _0x2158f7[_0x238261(0x4c5)], 'artist': _0x2158f7[_0x238261(0x278)], 'coverUrl': _0x1d50ba, 'playableUrl': _0x21cf24[_0x238261(0x13f)], 'timestamp': Date[_0x238261(0x98c)]() }; _0x4025fd['conversationHistory'][_0x238261(0x65b)](_0x285ff3), _0x7a4a(_0x285ff3, _0x4025fd[_0x238261(0x24a)][_0x238261(0x84b)] - 0x1), _0x530f2e(); } else _0x578d47 = _0x148d26['touches'][0x0][_0x238261(0x3cd)], _0x22080d = _0x5ba7c1['touches'][0x0][_0x238261(0x9eb)], _0x4da2cd = !![], _0x5eea74 = ''; } catch (_0x488431) { console[_0x238261(0x963)](_0x238261(0x77f), _0x488431), _0x26f8b2(_0x238261(0x723) + _0x488431['message']); } } } function _0x14ae7c(_0x2346ff, _0x2a7d90 = 0x78) { const _0x501dcf = _0x2a98b7; if (_0x501dcf(0x74a) !== _0x501dcf(0x74a)) _0x459244['appendChild'](_0x29f5ed), _0x2dff19[_0x501dcf(0x329)](_0x1e2d19); else { const _0x4f39bb = _0x3d3758 => { const _0x53b7ad = _0x501dcf; if ('FtLLE' === _0x53b7ad(0x6ba)) { if (_0x3d3758['role'] === _0x53b7ad(0x880)) return _0x4025fd[_0x53b7ad(0x146)]?.[_0x53b7ad(0x5f1)] || _0x53b7ad(0x600); if (_0x3d3758[_0x53b7ad(0x302)]) { if (_0x53b7ad(0x956) !== _0x53b7ad(0x57d)) { const _0x136108 = _0x389a36(_0x3d3758[_0x53b7ad(0x302)]); return _0x136108?.[_0x53b7ad(0x5f1)] || 'Unknown'; } else _0x4122fe = _0x53b7ad(0x624); } if (_0x2346ff?.[_0x53b7ad(0xaa2)] === _0x53b7ad(0x258)) { if ('dUlaS' !== _0x53b7ad(0xa33)) _0x3c7e66[_0x53b7ad(0x963)]('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', _0x438fa8); else { const _0x50fe70 = _0x389a36(_0x2346ff[_0x53b7ad(0x2db)][0x0]); return _0x50fe70?.['name'] || 'AI'; } } return _0x53b7ad(0xa64); } else _0x330b5e[_0x53b7ad(0xab3)] = _0x3d97a7['name'] || '群聊\x20(' + _0x58baac[_0x53b7ad(0x2db)][_0x53b7ad(0x84b)] + ')'; }, _0x22c4c9 = _0x4025fd[_0x501dcf(0x24a)]['slice'](-_0x2a7d90), _0x2717a7 = []; for (const _0x51d655 of _0x22c4c9) { if (_0x501dcf(0x267) !== _0x501dcf(0x501)) { if (_0x51d655['displayUrl']) _0x2717a7[_0x501dcf(0x65b)]('[' + _0x4f39bb(_0x51d655) + ']\x20[sticker:' + (_0x51d655[_0x501dcf(0x9c6)]?.[_0x501dcf(0x561)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x51d655[_0x501dcf(0x3b9)]) { const _0x4bc01f = _0x51d655[_0x501dcf(0x9c6)] ? '\x20' + _0x51d655[_0x501dcf(0x9c6)] : ''; _0x2717a7[_0x501dcf(0x65b)]('[' + _0x4f39bb(_0x51d655) + ']\x20[image]' + _0x4bc01f); } else _0x51d655['content'] && _0x2717a7['push']('[' + _0x4f39bb(_0x51d655) + ']\x20' + _0x51d655[_0x501dcf(0x9c6)]); } } else { const _0x2245dc = _0x2f82d4[_0x501dcf(0x287)](_0x5e892b, _0x501dcf(0x431)), _0x317bc9 = _0x2245dc[_0x501dcf(0x301)](_0x2f8afb), _0x31c900 = _0x317bc9[_0x501dcf(0x6e5)]({ 'id': _0x1690ce, 'data': _0x18b668 }); _0x31c900[_0x501dcf(0x62f)] = () => _0x22b8c4(), _0x31c900[_0x501dcf(0x8ec)] = () => _0x3de7c1(_0x31c900['error']); } } return _0x2717a7[_0x501dcf(0x602)]('\x0a'); } } function _0x2e7271(_0xa75c0c, _0x4d26d5) { const _0xb774d9 = _0x2a98b7; if (!_0xa75c0c || !_0x4d26d5) return null; const _0x11bf18 = _0x4d26d5[_0xb774d9(0x561)](/@([^\s:：,，。!?]+)/); if (!_0x11bf18) return null; const _0x43f21c = _0x11bf18[0x1]['toLowerCase'](); for (const _0x59d934 of _0xa75c0c[_0xb774d9(0x2db)]) { const _0x10d61a = _0x389a36(_0x59d934); if (!_0x10d61a?.[_0xb774d9(0x5f1)]) continue; if (_0x10d61a[_0xb774d9(0x5f1)][_0xb774d9(0x577)]() === _0x43f21c) return _0x10d61a; if (_0x10d61a[_0xb774d9(0x5f1)][_0xb774d9(0x577)]()[_0xb774d9(0x914)](_0x43f21c)) return _0x10d61a; } return null; } function _0x5e3cd4(_0x279e68) { const _0x4b3e5c = _0x2a98b7; if (_0x4b3e5c(0x9b5) !== _0x4b3e5c(0x9b5)) _0x2a251c[_0x4b3e5c(0x963)](_0x4b3e5c(0x240) + _0x3d6fad[_0x4b3e5c(0xa4d)], _0x48b5c9); else { const _0x3e82be = _0x279e68[_0x4b3e5c(0x3de)]('{'), _0x941825 = _0x279e68[_0x4b3e5c(0x9c4)]('}'); if (_0x3e82be >= 0x0 && _0x941825 > _0x3e82be) return _0x279e68[_0x4b3e5c(0xab4)](_0x3e82be, _0x941825 + 0x1); return _0x279e68; } } function _0x1ed823(_0x1e2f73, _0x246533, _0x2d6c26) { const _0x26cad4 = _0x2a98b7; if (_0x26cad4(0x9d7) === _0x26cad4(0x9d7)) { const _0x2ecc72 = new Map(_0x246533['map'](_0x98445d => [String(_0x98445d['id']), _0x98445d])), _0x4fb20e = _0x17952c => String(_0x17952c || '')[_0x26cad4(0x577)]()[_0x26cad4(0x829)](/\s+/g, ''), _0x1d5338 = new Map(_0x246533[_0x26cad4(0x30c)](_0x477bf8 => [_0x4fb20e(_0x477bf8[_0x26cad4(0x5f1)]), _0x477bf8])), _0x521181 = new Set(_0x2d6c26), _0x3612e4 = { 'events': [] }; for (const _0x585b43 of _0x1e2f73?.[_0x26cad4(0x528)] || []) { const _0x24ffcb = _0x585b43[_0x26cad4(0x302)] ?? _0x585b43[_0x26cad4(0x80f)] ?? _0x585b43[_0x26cad4(0x26e)] ?? _0x585b43[_0x26cad4(0x681)] ?? _0x585b43[_0x26cad4(0x1ce)] ?? _0x585b43[_0x26cad4(0x5f1)]; if (!_0x24ffcb) continue; let _0xebdfaf = _0x2ecc72[_0x26cad4(0x23f)](String(_0x24ffcb)) || _0x1d5338[_0x26cad4(0x23f)](_0x4fb20e(_0x24ffcb)); if (!_0xebdfaf) continue; const _0x139d08 = (_0x585b43['kind'] || _0x585b43['type'] || _0x26cad4(0xa20))[_0x26cad4(0x577)](); if (_0x139d08 === _0x26cad4(0x8e3)) { const _0x26af6f = (_0x585b43['sticker'] ?? _0x585b43[_0x26cad4(0x4d0)] ?? _0x585b43[_0x26cad4(0x643)] ?? _0x585b43[_0x26cad4(0x9f4)])?.['trim'](); if (_0x26af6f && _0x521181[_0x26cad4(0x7a8)](_0x26af6f)) _0x3612e4[_0x26cad4(0x528)][_0x26cad4(0x65b)]({ 'senderId': _0xebdfaf['id'], 'kind': _0x26cad4(0x8e3), 'sticker': _0x26af6f }); else { if (_0x26cad4(0x1c0) === _0x26cad4(0x1c0)) { const _0x5a2caf = String(_0x585b43[_0x26cad4(0x9c6)] ?? _0x585b43[_0x26cad4(0xa20)] ?? '')[_0x26cad4(0x345)]() || '[sticker:' + (_0x26af6f || _0x26cad4(0x9fe)) + ']'; if (_0x5a2caf) _0x3612e4['events']['push']({ 'senderId': _0xebdfaf['id'], 'kind': 'text', 'content': _0x5a2caf }); } else _0x4c392d[_0x26cad4(0x3c8)] = _0x26cad4(0x8e7), _0x54e297[_0x26cad4(0x4b6)]('organize-bill-button')[_0x26cad4(0x20b)](_0x26cad4(0xab8), _0x5725b0); } } else { const _0xe6f599 = String(_0x585b43[_0x26cad4(0x9c6)] ?? _0x585b43[_0x26cad4(0xa20)] ?? _0x585b43[_0x26cad4(0x973)] ?? '')[_0x26cad4(0x345)](); if (_0xe6f599) _0x3612e4['events'][_0x26cad4(0x65b)]({ 'senderId': _0xebdfaf['id'], 'kind': _0x26cad4(0xa20), 'content': _0xe6f599 }); } } return _0x3612e4; } else _0x66ddf9('有\x20' + _0x3e56ff + '\x20行格式不对，被我无视了。'); } async function _0x51a939(_0x569085) { const _0x57d8da = _0x2a98b7; if (!_0x569085 || !Array[_0x57d8da(0x5f8)](_0x569085[_0x57d8da(0x528)]) || _0x569085[_0x57d8da(0x528)][_0x57d8da(0x84b)] === 0x0) return; const _0x2353b5 = _0x4fdbfb => _0x4fdbfb + Math[_0x57d8da(0x779)](Math[_0x57d8da(0x59e)]() * 0x190); let _0x335d76 = 0x1f4; for (const _0x4aaf32 of _0x569085[_0x57d8da(0x528)]) { if (_0x57d8da(0x987) !== 'piIax') { await new Promise(_0xcddff9 => setTimeout(_0xcddff9, _0x2353b5(_0x335d76))), _0x335d76 += 0x2bc; const _0x8a1e52 = _0x4025fd[_0x57d8da(0x24a)]['at'](-0x1)?.['isOffline'] ?? ![]; if (_0x4aaf32[_0x57d8da(0x2a8)] === _0x57d8da(0x8e3)) { if ('YouuD' !== _0x57d8da(0x6a1)) _0x3043a5(), _0x4ed459[_0x57d8da(0x24a)] = [], _0x5602e8(); else { const _0x1d1d6c = _0x288407[_0x57d8da(0x32b)](_0xbee03d => _0xbee03d[_0x57d8da(0x5f1)] === _0x4aaf32['sticker']); if (_0x1d1d6c) { const _0x9cac54 = { 'role': _0x57d8da(0x135), 'content': '[AI发送了表情：' + _0x1d1d6c[_0x57d8da(0x5f1)] + ']', 'displayUrl': _0x1d1d6c['url'], 'senderId': _0x4aaf32[_0x57d8da(0x302)], 'timestamp': Date[_0x57d8da(0x98c)](), 'isOffline': _0x8a1e52 }; _0x4025fd['conversationHistory'][_0x57d8da(0x65b)](_0x9cac54); } } } else { if (_0x4aaf32[_0x57d8da(0x2a8)] === _0x57d8da(0x43a) && _0x4aaf32[_0x57d8da(0x4c5)] && _0x4aaf32[_0x57d8da(0x278)]) { const { songName: _0x35e4bb, artist: _0x15b4c0 } = _0x4aaf32, _0xfa3604 = { 'role': _0x57d8da(0x135), 'type': _0x57d8da(0x43a), 'content': _0x57d8da(0x60d) + _0x35e4bb + _0x57d8da(0x6e6) + _0x15b4c0 + ']', 'songName': _0x35e4bb, 'artist': _0x15b4c0, 'senderId': _0x4aaf32[_0x57d8da(0x302)], 'timestamp': Date['now'](), 'isOffline': _0x8a1e52 }; try { const _0x3fc1d2 = await _0x5dfa8e(_0x35e4bb, _0x15b4c0); _0xfa3604['coverUrl'] = _0x3fc1d2[_0x57d8da(0x549)], _0xfa3604[_0x57d8da(0x22c)] = _0x3fc1d2[_0x57d8da(0x13f)]; } catch (_0x8cbff1) { if (_0x57d8da(0x85c) === _0x57d8da(0x616)) { const _0x391433 = _0x531de9[_0x57d8da(0x859)][_0x57d8da(0x30c)](_0x4bf063 => _0x239fb9[_0x57d8da(0xa3c)][_0x57d8da(0x32b)](_0x4c873a => _0x4c873a['id'] === _0x4bf063))[_0x57d8da(0x1f9)](_0x4c9bcc)[_0x57d8da(0x30c)](_0x49ac81 => _0x57d8da(0x2df) + _0x49ac81['name'] + '\x0a' + _0x49ac81['content'])[_0x57d8da(0x602)](''); if (_0x391433) _0xfd5d9 = _0x57d8da(0x5ea) + _0x391433; } else console[_0x57d8da(0x963)]('群聊音乐搜索失败\x20(' + _0x35e4bb + _0x57d8da(0x6e6) + _0x15b4c0 + '):', _0x8cbff1), _0xfa3604[_0x57d8da(0x3ad)] = null, _0xfa3604[_0x57d8da(0x22c)] = null; } _0x4025fd[_0x57d8da(0x24a)][_0x57d8da(0x65b)](_0xfa3604); } else { if (_0x4aaf32[_0x57d8da(0x2a8)] === _0x57d8da(0xa20)) { const _0x5321a3 = _0x1be777(_0x4aaf32[_0x57d8da(0x9c6)])[_0x57d8da(0xab4)](0x0, 0x3); for (let _0x6e2dd9 = 0x0; _0x6e2dd9 < _0x5321a3[_0x57d8da(0x84b)]; _0x6e2dd9++) { if (_0x6e2dd9 > 0x0) await new Promise(_0x30844a => setTimeout(_0x30844a, _0x2353b5(0x190))); const _0x542d71 = { 'role': _0x57d8da(0x135), 'content': _0x5321a3[_0x6e2dd9], 'senderId': _0x4aaf32[_0x57d8da(0x302)], 'timestamp': Date[_0x57d8da(0x98c)](), 'isOffline': _0x8a1e52 }; _0x4025fd[_0x57d8da(0x24a)]['push'](_0x542d71); } } } } } else { const _0x207586 = _0xe57724['getElementById'](_0x17987f); _0x207586[_0x57d8da(0x3c8)] = '', _0x2acf13['userProfiles']['forEach'](_0x63fedd => { const _0x310d5b = _0x57d8da, _0x5edba6 = _0x3d4177['createElement'](_0x310d5b(0x689)); _0x5edba6[_0x310d5b(0x95e)] = _0x63fedd['id'], _0x5edba6[_0x310d5b(0xab3)] = _0x63fedd[_0x310d5b(0x5f1)], _0x207586['appendChild'](_0x5edba6); }); } } _0x530f2e(), _0x274381(); } async function _0x5157a3(_0x1a5bba, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x3ce55f = _0x2a98b7; await new Promise(_0x302e12 => setTimeout(_0x302e12, 0xa)); if (!_0x4025fd[_0x3ce55f(0x2c2)][_0x3ce55f(0x3c2)] || !_0x4025fd[_0x3ce55f(0x2c2)][_0x3ce55f(0xa7f)] || !_0x4025fd[_0x3ce55f(0x2c2)][_0x3ce55f(0x4f9)]) return _0x26f8b2(_0x3ce55f(0x4ba)), ![]; const _0x59fd1d = _0xba11a1(); if (!_0x59fd1d || !_0x1a5bba) return ![]; const _0x31c1cf = _0x25fa5a(_0x59fd1d['id']), _0x57c61f = _0x4025fd[_0x3ce55f(0x24a)]['at'](-0x1)?.[_0x3ce55f(0x1ce)] === 'user'; if (!force && !_0x57c61f) return ![]; const _0xd75539 = _0x4025fd[_0x3ce55f(0x24a)]['at'](-0x1)?.[_0x3ce55f(0x45e)] ?? ![]; if (delayMs) await new Promise(_0x31c0d5 => setTimeout(_0x31c0d5, delayMs)); _0xd75539 ? document['getElementById'](_0x3ce55f(0x8e6))[_0x3ce55f(0xab3)] = '（正在构思中...）' : _0x3e5e69(!![]); let _0x1c9171 = ''; const _0x8cacde = _0xba11a1(); if (_0x8cacde?.[_0x3ce55f(0x4dc)]?.['isActive']) { const _0x26c213 = _0x8cacde['activeListenSession'], _0x5c5df2 = await _0x246760(_0x26c213['songId']); if (_0x5c5df2 && _0x5c5df2[_0x3ce55f(0x682)]) { const _0xd3c9fb = _0x1512fc(_0x5c5df2[_0x3ce55f(0x682)]); if (_0xd3c9fb['length'] > 0x0) { const _0x2f9338 = _0x133351['currentTime']; let _0x21cb6d = -0x1; for (let _0x31e4d4 = 0x0; _0x31e4d4 < _0xd3c9fb['length']; _0x31e4d4++) { if (_0x2f9338 >= _0xd3c9fb[_0x31e4d4][_0x3ce55f(0x3a0)]) _0x21cb6d = _0x31e4d4; else break; } const _0x11d08b = _0xd3c9fb['map']((_0x1a2759, _0x4982f4) => { const _0x5a9000 = _0x3ce55f; if (_0x5a9000(0x599) === _0x5a9000(0x9a3)) _0x2f58e6[_0x5a9000(0xab2)][_0x5a9000(0x31d)](_0x510bfe, 0x1), _0x25a35d(), _0x35d791(), _0x1f3b3e('【' + _0xda4a78[_0x5a9000(0x5f1)] + '】的日记本已被清空。'); else { const _0xd7dae = _0x4982f4 === _0x21cb6d ? _0x5a9000(0x51e) : ''; return '' + _0xd7dae + _0x1a2759[_0x5a9000(0xa20)]; } })[_0x3ce55f(0x602)]('\x0a'); _0x1c9171 = (_0x3ce55f(0x38c) + _0x26c213[_0x3ce55f(0x278)] + '\x20的《' + _0x26c213[_0x3ce55f(0x4c5)] + _0x3ce55f(0x940) + _0x11d08b + _0x3ce55f(0x171))[_0x3ce55f(0x345)](); } } } let _0xc52e06 = '', _0x30479c = ''; const _0x3282b4 = _0x4025fd[_0x3ce55f(0x24a)][_0x3ce55f(0x84b)]; if (_0x3282b4 > 0x1) { const _0x56fb35 = _0x4025fd[_0x3ce55f(0x24a)][_0x3282b4 - 0x2], _0xcbfee4 = _0x4025fd[_0x3ce55f(0x24a)][_0x3282b4 - 0x1]; if (_0x56fb35[_0x3ce55f(0x45e)] === ![] && _0xcbfee4[_0x3ce55f(0x45e)] === !![]) { if (_0x3ce55f(0x873) !== _0x3ce55f(0x873)) { const { omniText: _0x154b9a } = _0x3fdf1b(_0x4c376b['id'], _0x42b753['id']), _0x1177d1 = _0x3223f1(_0xfa5d60['id']), _0xbd0caf = _0x31bb05[_0x3ce55f(0x859)] && _0x355846[_0x3ce55f(0x859)][_0x3ce55f(0x84b)] > 0x0 ? _0x3ce55f(0x2f9) + _0xe367ba[_0x3ce55f(0x5f1)] + '的个人专属世界观设定\x0a' + _0x358a5f['linkedWorldBookIds']['map'](_0x5536eb => _0x2be834[_0x3ce55f(0xa3c)][_0x3ce55f(0x32b)](_0x42e7b6 => _0x42e7b6['id'] === _0x5536eb))[_0x3ce55f(0x1f9)](_0x401e02)[_0x3ce55f(0x30c)](_0x5ca55a => '\x0a##\x20条目:\x20' + _0x5ca55a['name'] + '\x0a' + _0x5ca55a['content'])['join']('') : ''; return { 'id': _0x44d50c['id'], 'name': _0x30af5b[_0x3ce55f(0x5f1)], 'persona': _0x1e2027[_0x3ce55f(0x8ad)] || _0x3ce55f(0x629), 'memory': _0x154b9a + _0x1177d1 + _0xbd0caf }; } else _0x30479c = _0x3ce55f(0x8b1) + _0x31c1cf[_0x3ce55f(0x5f1)] + _0x3ce55f(0x654); } else _0x56fb35[_0x3ce55f(0x45e)] === !![] && _0xcbfee4[_0x3ce55f(0x45e)] === ![] && (_0x30479c = _0x3ce55f(0x79d) + _0x31c1cf[_0x3ce55f(0x5f1)] + _0x3ce55f(0xa27)); } if (_0xd75539) { const _0x13b78c = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0xc52e06 = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x31c1cf[_0x3ce55f(0x5f1)] + _0x3ce55f(0x2fc) + _0x13b78c + _0x3ce55f(0x6b8) + _0x1a5bba[_0x3ce55f(0x5f1)] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0x13b78c + ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[' + _0x13b78c + _0x3ce55f(0x7a7); } else _0x3ce55f(0x87c) === _0x3ce55f(0x87c) ? _0x3ce55f(0xa5d) : (_0x3152dc(), _0x1cedff(_0x3ce55f(0x683), _0x3ce55f(0x9d1))); const { omniText: _0x1f5ac3 } = _0x204d24(_0x1a5bba['id'], _0x59fd1d['id']), _0x114d1e = _0xe4da1e(), _0x39b182 = _0x5b4257(_0x1a5bba['id']), _0x3043f3 = await _0x25419e(_0x1a5bba['id']), _0x25b30b = typeof _0x30161c === _0x3ce55f(0x90a) ? _0x30161c[_0x3ce55f(0x184)](_0x3ce55f(0x33a), _0x1a5bba['name'])[_0x3ce55f(0x184)]('{userName}', _0x31c1cf[_0x3ce55f(0x5f1)] || '用户') : '', _0x35b089 = _0x288407['map'](_0x2d1f2e => _0x2d1f2e[_0x3ce55f(0x5f1)])[_0x3ce55f(0x602)](',\x20'); let _0x2731af = ''; if (_0x1a5bba[_0x3ce55f(0x859)] && _0x1a5bba[_0x3ce55f(0x859)]['length'] > 0x0) { const _0x21169e = _0x1a5bba[_0x3ce55f(0x859)][_0x3ce55f(0x30c)](_0xa8e52b => _0x4025fd['worldBooks']['find'](_0x5f2cc3 => _0x5f2cc3['id'] === _0xa8e52b))[_0x3ce55f(0x1f9)](Boolean)[_0x3ce55f(0x30c)](_0x2770bd => _0x3ce55f(0x2df) + _0x2770bd[_0x3ce55f(0x5f1)] + '\x0a' + _0x2770bd[_0x3ce55f(0x9c6)])[_0x3ce55f(0x602)](''); if (_0x21169e) _0x2731af = _0x3ce55f(0x5ea) + _0x21169e; } const _0x2cc9e6 = _0x31c1cf[_0x3ce55f(0x8ad)] ? _0x3ce55f(0x53e) + _0x31c1cf[_0x3ce55f(0x5f1)] + _0x3ce55f(0x741) + _0x31c1cf[_0x3ce55f(0x8ad)] : ''; let _0x30bea1 = ''; const _0x1a2380 = new Date(), _0x7a415e = _0x187331(_0x1a5bba['id']); _0x30bea1 = _0x3ce55f(0x14a), _0x30bea1 += _0x3ce55f(0x237) + _0x1a2380['toLocaleString'](_0x3ce55f(0x838), { 'dateStyle': _0x3ce55f(0x147), 'timeStyle': _0x3ce55f(0x2ab) }) + '\x0a'; if (_0x7a415e) { const _0x14dbf4 = new Date(_0x7a415e[_0x3ce55f(0x36b)]), _0xb3bf74 = _0x144234(_0x14dbf4); _0x30bea1 += _0x3ce55f(0x70f) + _0xb3bf74 + '\x0a'; const _0x1b83c8 = _0x1a2380[_0x3ce55f(0xa2a)](), _0x22cb44 = _0x14dbf4[_0x3ce55f(0xa2a)](), _0x201d34 = new Date(); _0x201d34[_0x3ce55f(0x72a)](_0x1a2380[_0x3ce55f(0x1f6)]() - 0x1); const _0x17ece4 = _0x201d34['toDateString'](); if (_0x1b83c8 === _0x22cb44) { const _0xf8ae4f = (_0x1a2380 - _0x14dbf4) / (0x3e8 * 0x3c); _0xf8ae4f < 0x3c ? _0x30bea1 += _0x3ce55f(0x538) : _0x30bea1 += _0x3ce55f(0x89c) + Math[_0x3ce55f(0xa05)](_0xf8ae4f / 0x3c) + _0x3ce55f(0x917); } else { if (_0x17ece4 === _0x22cb44) 'LVbQv' === 'LVbQv' ? _0x30bea1 += _0x3ce55f(0x63b) : _0x37256f[_0x3ce55f(0x963)](_0x3ce55f(0x2ad) + _0x3fb0f5 + ':', _0x284993); else { const _0x5799b6 = Math[_0x3ce55f(0xa05)]((_0x1a2380 - _0x14dbf4) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x30bea1 += _0x3ce55f(0x4d4) + _0x5799b6 + _0x3ce55f(0x591); } } } else _0x30bea1 += _0x3ce55f(0x6d6); const _0x208d03 = ('\x0a' + _0xc52e06 + _0x3ce55f(0x8f9) + _0x1a5bba[_0x3ce55f(0x5f1)] + _0x3ce55f(0x438) + _0x1a5bba['name'] + _0x3ce55f(0x246) + _0x1a5bba['name'] + _0x3ce55f(0x1e7) + _0x35b089 + _0x3ce55f(0x97e) + _0x25b30b + '\x0a')[_0x3ce55f(0x345)](), _0x48d29f = [{ 'role': 'system', 'content': _0x208d03 }], _0x57830f = (_0x3ce55f(0x406) + (_0x1a5bba[_0x3ce55f(0x8ad)] || '你是一个乐于助人的助手。') + '\x0a' + _0x2cc9e6 + '\x20\x0a' + _0x1f5ac3 + '\x0a' + _0x114d1e + '\x0a' + _0x39b182 + '\x0a' + _0x3043f3 + _0x3ce55f(0x32d) + _0x1c9171 + '\x0a' + _0x30bea1 + '\x0a' + _0x2731af + '\x0a')[_0x3ce55f(0x345)](); _0x57830f[_0x3ce55f(0x829)](/#.*|\s/g, '') && (_0x48d29f[_0x3ce55f(0x65b)]({ 'role': _0x3ce55f(0x880), 'content': _0x57830f }), _0x48d29f[_0x3ce55f(0x65b)]({ 'role': _0x3ce55f(0x135), 'content': _0x3ce55f(0x828) })); const _0x4e61f4 = _0x4025fd[_0x3ce55f(0x271)]?.[_0x3ce55f(0x78e)] ?? 0x64, _0x2073f6 = _0x4025fd[_0x3ce55f(0x24a)][_0x3ce55f(0xab4)](-_0x4e61f4); for (const _0x432159 of _0x2073f6) { const _0x421152 = _0x432159[_0x3ce55f(0x1ce)] === 'ai' || _0x432159['role'] === _0x3ce55f(0x135) ? _0x3ce55f(0x135) : _0x3ce55f(0x880); let _0x4446a1 = { 'role': _0x421152, 'content': _0x432159['content'] }, _0x5c8589 = !!_0x432159[_0x3ce55f(0x9c6)]; if (_0x432159[_0x3ce55f(0x619)] && _0x432159[_0x3ce55f(0x9c6)]['includes']('表情')) { if (_0x3ce55f(0x394) === _0x3ce55f(0x394)) { const _0x1d8ebe = _0x432159[_0x3ce55f(0x9c6)][_0x3ce55f(0x561)](/：(.*?)]$/); _0x4446a1[_0x3ce55f(0x9c6)] = _0x3ce55f(0x275) + (_0x1d8ebe ? _0x1d8ebe[0x1] : '未知表情') + ']', _0x48d29f[_0x3ce55f(0x65b)](_0x4446a1); } else _0x359d93[_0x3ce55f(0x544)][_0x3ce55f(0x7f8)]('active'), _0x4fe1cb[_0x3ce55f(0x544)]['add'](_0x3ce55f(0x9ad)), _0x24c3c6(_0x5788d2, _0x320cb0); } else { let _0x566610 = null; if (_0x432159[_0x3ce55f(0x3b9)]) { if ('LiEqY' === 'LlwuY') { const _0x6bdc4b = _0x40c255[_0x3ce55f(0x4b6)](_0x3ce55f(0x6ae)); _0x6bdc4b[_0x3ce55f(0x3c8)] = ''; if (_0x21446d[_0x3ce55f(0x9b0)][_0x3ce55f(0x84b)] === 0x0) { _0x6bdc4b[_0x3ce55f(0x3c8)] = _0x3ce55f(0xa30); return; } _0x18cced['friendCircles']['forEach'](_0x52dc4b => { const _0xcb5405 = _0x3ce55f, _0x4c5e72 = _0x3707f9[_0xcb5405(0x293)]['find'](_0x5b4193 => _0x5b4193['id'] === _0x52dc4b[_0xcb5405(0x774)]) || { 'name': _0xcb5405(0x52c) }, _0x509d64 = _0x160205['createElement']('div'); _0x509d64[_0xcb5405(0x575)] = _0xcb5405(0x8fc), _0x509d64[_0xcb5405(0x773)]['id'] = _0x52dc4b['id'], _0x509d64[_0xcb5405(0x3c8)] = _0xcb5405(0x8aa) + _0x52dc4b['name'] + _0xcb5405(0xa06) + _0x4c5e72[_0xcb5405(0x5f1)] + _0xcb5405(0x16d) + _0x52dc4b['memberCharacterIds']['length'] + _0xcb5405(0x471), _0x509d64['addEventListener'](_0xcb5405(0xab8), () => _0x4270a6(_0x52dc4b['id'])), _0x6bdc4b[_0xcb5405(0x329)](_0x509d64); }); } else _0x566610 = _0x432159[_0x3ce55f(0x3b9)]; } else { if (_0x432159[_0x3ce55f(0x3c7)]) try { if (_0x3ce55f(0x56a) !== 'LCQIv') _0x2dda51[_0x3ce55f(0x271)][_0x3ce55f(0x11c)] = null, _0x259b5e(), _0x50db58(), _0x57657('小组件背景已恢复默认。'); else { const _0x1a7ace = await _0x34b988(_0x432159['imageId']); _0x1a7ace && (_0x566610 = await _0xe16e6b(_0x1a7ace)); } } catch (_0xf256ef) { console[_0x3ce55f(0x963)]('在准备API数据时，从IndexedDB读取图片失败:', _0xf256ef); } } _0x566610 && (_0x4446a1['image'] = _0x566610, _0x5c8589 = !![]), _0x5c8589 && _0x48d29f[_0x3ce55f(0x65b)](_0x4446a1); } } try { if (_0x3ce55f(0x9f3) === _0x3ce55f(0x9f3)) { const _0xcb0375 = await _0x414037(_0x48d29f); if (!_0xcb0375) return ![]; if (_0xd75539) try { let _0x571844 = _0xcb0375[_0x3ce55f(0x345)](); const _0x2b7e6c = _0x571844[_0x3ce55f(0x561)](/(\[[\s\S]*\])/); _0x2b7e6c && (_0x571844 = _0x2b7e6c[0x1]); const _0x12fd91 = JSON[_0x3ce55f(0x93f)](_0x571844); if (Array['isArray'](_0x12fd91)) { _0x4025fd[_0x3ce55f(0x255)] = _0x12fd91, _0x4025fd[_0x3ce55f(0x3f4)][_0x1a5bba['id']] = [..._0x12fd91], _0x3681e3(); const _0x518280 = _0x12fd91['map'](_0x470ab2 => _0x470ab2['speaker'] === _0x3ce55f(0x6fc) ? _0x470ab2[_0x3ce55f(0x3e3)] : _0x470ab2[_0x3ce55f(0x681)] + ':\x20' + _0x470ab2['line'])['join']('\x0a\x0a'); _0x4025fd[_0x3ce55f(0x24a)][_0x3ce55f(0x65b)]({ 'role': _0x3ce55f(0x135), 'senderId': _0x1a5bba['id'], 'timestamp': Date['now'](), 'isOffline': !![], 'content': _0x518280 }); } } catch (_0x19fbf3) { _0x3ce55f(0xa90) === _0x3ce55f(0xa90) ? (console[_0x3ce55f(0x963)](_0x3ce55f(0x444), _0x19fbf3, _0x3ce55f(0x4f7), _0xcb0375), _0x4025fd[_0x3ce55f(0x24a)]['push']({ 'role': _0x3ce55f(0x135), 'senderId': _0x1a5bba['id'], 'timestamp': Date[_0x3ce55f(0x98c)](), 'isOffline': !![], 'content': '[AI返回了无法解析的剧本:\x20' + _0xcb0375 + ']' })) : _0x5ae3a5['currentAbortController'] && _0x559b7a[_0x3ce55f(0x38a)][_0x3ce55f(0x1d0)] === _0xb23b91 && (_0x315d83[_0x3ce55f(0x38a)] = null); } else { const _0x4a8885 = _0x15f4da(_0xcb0375), _0x5a7e61 = _0x4a8885[_0x3ce55f(0x30c)](_0x496c81 => { const _0x53be2f = _0x3ce55f, _0x1aede4 = _0x496c81['trim'](), _0x42814c = _0x1aede4[_0x53be2f(0x561)](/^\[sticker:(.*?)\]$/), _0x4df21c = _0x1aede4[_0x53be2f(0x561)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x5287ba = _0x1aede4[_0x53be2f(0x561)](/^\[music:(.*?)\|(.*?)\]$/); if (_0x5287ba) return { 'type': _0x53be2f(0x43a), 'songName': _0x5287ba[0x1][_0x53be2f(0x345)](), 'artist': _0x5287ba[0x2][_0x53be2f(0x345)]() }; else { if (_0x42814c) { if (_0x53be2f(0x9c7) === _0x53be2f(0x9c7)) return { 'type': 'sticker', 'name': _0x42814c[0x1]['trim']() }; else { const _0x55449a = _0x451aa1[_0x53be2f(0x4b6)](_0x53be2f(0x857)); _0x55449a && _0x55449a['click'](); } } else { if (_0x4df21c) { const _0x53a00d = parseFloat(_0x4df21c[0x1]), _0xd2be6d = _0x4df21c[0x2][_0x53be2f(0x345)](), _0x5c317d = _0x25fa5a(_0x4025fd[_0x53be2f(0xa4d)]); let _0x15e13a = null; if (_0xd2be6d === _0x5c317d[_0x53be2f(0x5f1)]) _0x15e13a = _0x5c317d['id']; else { if (_0x53be2f(0x3eb) === 'gKnLU') { const _0x518894 = _0xba11a1(); if (_0x518894[_0x53be2f(0xaa2)] === 'group') { const _0x1cc124 = _0x4025fd[_0x53be2f(0x61c)][_0x53be2f(0x32b)](_0x28918e => _0x518894['participantIds'][_0x53be2f(0x9f1)](_0x28918e['id']) && _0x28918e[_0x53be2f(0x5f1)] === _0xd2be6d); if (_0x1cc124) _0x15e13a = _0x1cc124['id']; } } else _0x33eceb[_0x53be2f(0x4b6)](_0x53be2f(0x458) + _0x2002c0 + _0x53be2f(0x79a))[_0x53be2f(0x2fd)] = '', _0x4ff98f[_0x53be2f(0x4b6)](_0x53be2f(0x458) + _0x51e0b8 + _0x53be2f(0x46c))[_0x53be2f(0x95e)] = ''; } if (_0x15e13a) return { 'type': 'transfer', 'amount': _0x53a00d, 'recipientId': _0x15e13a, 'senderId': _0x1a5bba['id'] }; else return { 'type': _0x53be2f(0xa20), 'content': _0x53be2f(0x32a) + _0xd2be6d + '”，但没找到人)' }; } else { if (_0x1aede4) return { 'type': _0x53be2f(0xa20), 'content': _0x1aede4 }; } } } return null; })[_0x3ce55f(0x1f9)](Boolean), _0x2eb7e1 = async _0x102c82 => { const _0x3b8593 = _0x3ce55f, _0x57ab47 = { 'role': _0x3b8593(0x135), 'senderId': _0x1a5bba['id'], 'timestamp': Date[_0x3b8593(0x98c)](), 'isOffline': _0xd75539 }; if (_0x102c82[_0x3b8593(0xaa2)] === 'music') { if (_0x3b8593(0x9ed) !== _0x3b8593(0x408)) { const { songName: _0x3e4e6e, artist: _0x520a05 } = _0x102c82; _0x57ab47[_0x3b8593(0xaa2)] = _0x3b8593(0x43a), _0x57ab47[_0x3b8593(0x9c6)] = _0x3b8593(0x60d) + _0x3e4e6e + _0x3b8593(0x6e6) + _0x520a05 + ']'; try { if ('PSWdY' !== _0x3b8593(0xa47)) _0x2ee014 = _0x3b8593(0x5d7) + _0x43b2d8; else { const _0x49263a = await _0x5dfa8e(_0x3e4e6e, _0x520a05); let _0x229614 = null; if (_0x49263a[_0x3b8593(0x549)]) { const _0x4e47a5 = await _0x22dea8(_0x49263a[_0x3b8593(0x549)]); _0x229614 = 'music_cover_' + Date[_0x3b8593(0x98c)]() + '_' + Math[_0x3b8593(0x59e)](), await _0x5a7151(_0x229614, _0x4e47a5); } Object[_0x3b8593(0x2b6)](_0x57ab47, { 'songName': _0x3e4e6e, 'artist': _0x520a05, 'coverId': _0x229614, 'playableUrl': _0x49263a[_0x3b8593(0x13f)] }); } } catch (_0x294369) { Object[_0x3b8593(0x2b6)](_0x57ab47, { 'songName': _0x3e4e6e, 'artist': _0x520a05, 'coverId': null, 'playableUrl': null }); } } else _0x21095f[_0x3b8593(0x636)][_0x3b8593(0x94c)] = _0x3b8593(0x3a9), _0x103a1a[_0x3b8593(0x636)][_0x3b8593(0x7c6)] = _0x3b8593(0x55f); } else { if (_0x102c82[_0x3b8593(0xaa2)] === _0x3b8593(0x8e3)) { if (_0x3b8593(0x2f2) === _0x3b8593(0x2f2)) { const _0x3938fa = _0x288407['find'](_0xca64e6 => _0xca64e6[_0x3b8593(0x5f1)] === _0x102c82[_0x3b8593(0x5f1)]); if (_0x3938fa) Object[_0x3b8593(0x2b6)](_0x57ab47, { 'content': _0x3b8593(0x77b) + _0x3938fa['name'] + ']', 'displayUrl': _0x3938fa[_0x3b8593(0x13f)] }); else _0x57ab47['content'] = _0x3b8593(0x275) + _0x102c82['name'] + ']'; } else _0xe14e21[_0x3b8593(0x544)][_0x3b8593(0x7f8)]('show-chat-view'); } else { if (_0x102c82['type'] === 'transfer') { const _0x56a1d2 = _0x102c82[_0x3b8593(0xaae)] === _0x25fa5a(_0x4025fd[_0x3b8593(0xa4d)])['id'] ? _0x25fa5a(_0x4025fd[_0x3b8593(0xa4d)]) : _0x389a36(_0x102c82[_0x3b8593(0xaae)]); Object[_0x3b8593(0x2b6)](_0x57ab47, { 'type': _0x3b8593(0x877), 'amount': _0x102c82[_0x3b8593(0x9d2)], 'recipientId': _0x102c82[_0x3b8593(0xaae)], 'content': _0x3b8593(0x2a6) + (_0x56a1d2?.['name'] || '未知') + _0x3b8593(0x7a9) + _0x102c82['amount'] + ']' }); } else { const _0x234f60 = _0x4a4006(_0x102c82[_0x3b8593(0x9c6)]); Object[_0x3b8593(0x2b6)](_0x57ab47, { 'content': _0x234f60[_0x3b8593(0x9c6)], 'quotedMessage': _0x234f60['quotedMessage'] }); } } } return _0x57ab47; }, _0x28018f = await Promise['all'](_0x5a7e61['map'](_0x2eb7e1)); for (const _0x2debc2 of _0x28018f) { if (_0x2debc2['content'] || _0x2debc2[_0x3ce55f(0x619)] || _0x2debc2[_0x3ce55f(0xaa2)] === _0x3ce55f(0x43a)) { if ('azTUV' !== _0x3ce55f(0x757)) await new Promise(_0x18fac2 => setTimeout(_0x18fac2, 0x12c + Math[_0x3ce55f(0x59e)]() * 0x190)), _0x4025fd[_0x3ce55f(0x24a)]['push'](_0x2debc2), _0x274381(); else { const _0x35b29b = [], _0x4f2f7d = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x5f9435; while ((_0x5f9435 = _0x4f2f7d['exec'](_0x188146)) !== null) { const _0x5026ba = _0x5f9435[0x1][_0x3ce55f(0x829)](/\\"/g, '\x22')[_0x3ce55f(0x829)](/\\n/g, '\x0a')[_0x3ce55f(0x345)](); if (_0x5026ba) _0x35b29b['push'](_0x5026ba); } if (_0x35b29b[_0x3ce55f(0x84b)]) return _0x35b29b[_0x3ce55f(0xa5f)](_0x594c9f)['slice'](0x0, 0x9); } } } } return _0x530f2e(), _0x274381(), !![]; } else _0x3d2971['src'] = _0x279b9c[_0x3ce55f(0x798)](_0x11f22a); } catch (_0x49f2d0) { if (_0x3ce55f(0xac8) !== _0x3ce55f(0x6e8)) { if (_0x49f2d0[_0x3ce55f(0x5f1)] !== _0x3ce55f(0x40f)) { console[_0x3ce55f(0x963)](_0x3ce55f(0x396), _0x49f2d0); const _0xd7e257 = { 'role': _0x3ce55f(0x135), 'content': _0x3ce55f(0x72c) + _0x49f2d0[_0x3ce55f(0x973)], 'senderId': _0x1a5bba['id'], 'isOffline': _0xd75539 }; _0x4025fd[_0x3ce55f(0x24a)][_0x3ce55f(0x65b)](_0xd7e257), _0x274381(); } return ![]; } else { const _0x52a71d = _0x2f517b[_0x3ce55f(0x859)][_0x3ce55f(0x30c)](_0x2ebc43 => _0x369a70[_0x3ce55f(0xa3c)][_0x3ce55f(0x32b)](_0x4ba130 => _0x4ba130['id'] === _0x2ebc43))['filter'](_0x23ec53)[_0x3ce55f(0x30c)](_0x27e77b => _0x3ce55f(0x745) + _0x27e77b[_0x3ce55f(0x5f1)] + '\x0a' + _0x27e77b[_0x3ce55f(0x9c6)])[_0x3ce55f(0x602)](''); _0x52a71d && (_0x587119 = '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a' + _0x52a71d); } } finally { _0x3e5e69(![]); } } async function _0x15c93f() { const _0x5bcb11 = _0x2a98b7, _0x481472 = _0xba11a1(); if (!_0x481472 || _0x481472[_0x5bcb11(0xaa2)] !== 'private') { _0x26f8b2(_0x5bcb11(0x67c)); return; } if (_0x4025fd['isGenerating']) { if ('ZNYDw' === _0x5bcb11(0x4a8)) { _0x26f8b2('我正在说话呢，别打岔！'); return; } else { const _0x54c4db = _0x2f4a19(_0x5a741f[_0x5bcb11(0xa4e)]); _0x54c4db && (delete _0x54c4db[_0x5bcb11(0x48a)], _0x190b84(), _0x3e2fb8(_0x54c4db['id'], _0x5bcb11(0x72b)), _0x57137b(_0x5bcb11(0x81f)), _0x5bdac9(!![])); } } const _0x45f202 = await _0x2f2e39('确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。'); if (!_0x45f202) return; _0x32d19f(!![], '正在翻阅全部历史记录...'), _0x31b588['value'] = '', _0x1c739a['classList']['add'](_0x5bcb11(0x187)), _0x4025fd[_0x5bcb11(0x517)] = !![]; try { const _0x5ab571 = _0x389a36(_0x481472[_0x5bcb11(0x2db)][0x0]), _0x326fcb = _0x25fa5a(_0x481472['id']), _0x12ca3b = _0x1632c7(_0x481472['id']); if (_0x12ca3b[_0x5bcb11(0x84b)] === 0x0) { if ('nCmIy' === _0x5bcb11(0x1d9)) { _0x31b588[_0x5bcb11(0x95e)] = '#\x20记录是空的，没什么好总结的。'; return; } else { const _0xf6e71e = { 'quotedMessage': null, 'content': _0x80e8ba }, _0x434edf = _0x36aca9['match'](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x434edf && (_0xf6e71e[_0x5bcb11(0x630)] = { 'sender': _0x434edf[0x1][_0x5bcb11(0x345)](), 'content': _0x434edf[0x2][_0x5bcb11(0x345)]() }, _0xf6e71e[_0x5bcb11(0x9c6)] = _0x3fd064[_0x5bcb11(0xa4a)](_0x434edf[0x0][_0x5bcb11(0x84b)])[_0x5bcb11(0x345)]()), _0xf6e71e; } } const _0x3d202b = _0x12ca3b[_0x5bcb11(0x30c)](_0x3009ee => { const _0x33cdc0 = _0x5bcb11, _0x372449 = new Date(_0x3009ee['timestamp']), _0x42d74b = _0x372449[_0x33cdc0(0x554)]() + '-' + String(_0x372449['getMonth']() + 0x1)[_0x33cdc0(0x412)](0x2, '0') + '-' + String(_0x372449[_0x33cdc0(0x1f6)]())[_0x33cdc0(0x412)](0x2, '0'), _0x71b863 = String(_0x372449['getHours']())[_0x33cdc0(0x412)](0x2, '0') + ':' + String(_0x372449[_0x33cdc0(0x24d)]())[_0x33cdc0(0x412)](0x2, '0'); let _0x33e2fc = '未知'; if (_0x3009ee['role'] === _0x33cdc0(0x880)) { if (_0x33cdc0(0xa8d) === _0x33cdc0(0x9c1)) { const _0x560623 = _0x2794c7[_0x33cdc0(0x345)](); if (!_0x560623 || !_0x4488c2[_0x33cdc0(0x7a3)]) return; let _0x2e97e1 = _0x5bc3b3[_0x33cdc0(0xab2)][_0x33cdc0(0x32b)](_0x1ae47d => _0x1ae47d['characterId'] === _0x3afdd9['activeDiaryCharacterId']); !_0x2e97e1 && (_0x2e97e1 = { 'characterId': _0x5682c5['activeDiaryCharacterId'], 'entries': [] }, _0x1687c4[_0x33cdc0(0xab2)][_0x33cdc0(0x65b)](_0x2e97e1)); _0x2e97e1[_0x33cdc0(0x204)]['push']({ 'timestamp': _0x2fdb6b[_0x33cdc0(0x98c)](), 'author': _0x33cdc0(0x880), 'content': _0x560623 }), _0x7eac44(); const _0x53250e = _0x2e97e1[_0x33cdc0(0x204)][_0x33cdc0(0x84b)]; _0x4f4ea5['diaryCurrentPage'] = _0xbda751[_0x33cdc0(0x245)](_0x53250e / 0x2) - 0x1, _0x3ace18(); } else _0x33e2fc = _0x326fcb[_0x33cdc0(0x5f1)]; } else _0x33e2fc = _0x5ab571[_0x33cdc0(0x5f1)]; let _0x496ae3 = _0x3009ee[_0x33cdc0(0x9c6)]; if (_0x3009ee[_0x33cdc0(0x619)]) _0x496ae3 = _0x33cdc0(0x357); if (_0x3009ee[_0x33cdc0(0x3c7)]) _0x496ae3 = _0x33cdc0(0x55a); return '[' + _0x42d74b + '\x20' + _0x71b863 + _0x33cdc0(0x543) + _0x33e2fc + _0x33cdc0(0xa59) + _0x496ae3; })['join']('\x0a'), _0x4dc684 = _0x11faa8['replace'](/{charName}/g, _0x5ab571['name'])[_0x5bcb11(0x829)](/{userName}/g, _0x326fcb['name']), _0x20b5b8 = [{ 'role': 'system', 'content': _0x4dc684 }, { 'role': _0x5bcb11(0x880), 'content': _0x3d202b }], _0x51f43d = await _0x414037(_0x20b5b8); _0x31b588[_0x5bcb11(0x95e)] = _0x51f43d || _0x5bcb11(0x228), _0x31b588[_0x5bcb11(0x3ce)] = 0x0; } catch (_0x3ce60d) { if (_0x5bcb11(0x3aa) === _0x5bcb11(0x56f)) { const _0x398afd = _0x31c141[_0x5bcb11(0x597)]('div'); _0x398afd[_0x5bcb11(0xab3)] = _0x4937bc, _0x398afd[_0x5bcb11(0x20b)]('click', () => { const _0x51c32d = _0x5bcb11; _0x960fcc[_0x51c32d(0x95e)] = _0x184e1c, _0x234704[_0x51c32d(0x544)][_0x51c32d(0x7f8)](_0x51c32d(0x187)); }), _0x20b097[_0x5bcb11(0x329)](_0x398afd); } else console[_0x5bcb11(0x963)](_0x5bcb11(0x335), _0x3ce60d), _0x31b588[_0x5bcb11(0x95e)] = '#\x20发生错误：\x0a' + _0x3ce60d[_0x5bcb11(0x973)]; } finally { _0x32d19f(![]), _0x4025fd[_0x5bcb11(0x517)] = ![]; } } async function _0x4e1acc() { const _0x27576b = _0x2a98b7; if ('RekZD' === _0x27576b(0x72f)) _0x123815[_0x27576b(0x31a)] = null; else { console[_0x27576b(0x66c)](_0x27576b(0x948)); if (!_0x4025fd[_0x27576b(0x2c2)][_0x27576b(0x3c2)] || !_0x4025fd[_0x27576b(0x2c2)]['key'] || !_0x4025fd[_0x27576b(0x2c2)]['model']) { if (_0x27576b(0x48d) !== _0x27576b(0x48d)) { const _0x246ee8 = _0x575075[_0x27576b(0x3b9)][_0x27576b(0x80a)](',')[0x1], _0xcd47de = _0x158527[_0x27576b(0x3b9)]['substring'](_0x1735be[_0x27576b(0x3b9)]['indexOf'](':') + 0x1, _0x59c778[_0x27576b(0x3b9)][_0x27576b(0x3de)](';')) || 'image/jpeg'; _0x4c8b0b['push']({ 'inline_data': { 'mime_type': _0xcd47de, 'data': _0x246ee8 } }); } else { _0x26f8b2('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } } const _0x5c9349 = _0x4025fd[_0x27576b(0x24a)]['at'](-0x1)?.[_0x27576b(0x1ce)] === _0x27576b(0x880); if (!_0x5c9349 || _0x4025fd[_0x27576b(0x517)]) return; const _0x5e1279 = _0xba11a1(); if (!_0x5e1279) return; _0x4025fd[_0x27576b(0x517)] = !![], _0x3e5e69(!![]); try { if (_0x5e1279[_0x27576b(0xaa2)] === _0x27576b(0x258)) { if (_0x27576b(0x802) === 'qWsWz') { const _0x7f4d4b = _0x389a36(_0x5e1279[_0x27576b(0x2db)][0x0]); console['log']('准备调用\x20generateAs...'); if (_0x7f4d4b) await _0x5157a3(_0x7f4d4b, { 'force': !![] }); } else _0x2c0f1e = _0x46c4de[_0x27576b(0x293)][_0x27576b(0x32b)](_0x2d5ef2 => _0x2d5ef2['id'] === _0x35a99b[_0x27576b(0x4a1)]); } else { if ('UOEup' === 'RArKL') { const _0x14b76d = _0x349091[_0x27576b(0x4d9)]['map'](_0xf9d297 => _0x5920a4(_0xf9d297)?.['name'] || '未知')['join']('、'), _0x431079 = _0x27576b(0x257); _0x57752a = _0x27576b(0x5c8) + _0x431079 + '\x20' + _0x14b76d + _0x27576b(0x86f); } else { const _0x14aefe = await _0x35364d(); if (_0x14aefe && _0x14aefe[_0x27576b(0x528)]?.[_0x27576b(0x84b)]) _0x27576b(0x5ba) !== _0x27576b(0x5ba) ? (_0x3e06d1[_0x27576b(0x963)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x1ee397['id'], _0x4267d4), _0x3f8cb2(_0x27576b(0x294))) : await _0x51a939(_0x14aefe); else { console[_0x27576b(0x5e3)](_0x27576b(0xa8c)); const _0x6f3586 = _0x5e1279[_0x27576b(0x2db)][_0x27576b(0x30c)](_0x389a36)['filter'](Boolean); if (!_0x6f3586[_0x27576b(0x84b)]) return; let _0x3cdb71 = 0x0; for (const _0x989314 of _0x6f3586) { _0x5157a3(_0x989314, { 'force': !![], 'delayMs': _0x3cdb71 }), _0x3cdb71 += 0x1f4; } } } } } catch (_0x23bc07) { _0x23bc07[_0x27576b(0x5f1)] !== _0x27576b(0x40f) && (_0x27576b(0x179) !== 'kiheW' ? (console[_0x27576b(0x963)](_0x27576b(0x27f), _0x23bc07), _0x7a4a({ 'role': _0x27576b(0x135), 'content': _0x27576b(0x72c) + _0x23bc07[_0x27576b(0x973)] }, _0x4025fd['conversationHistory'][_0x27576b(0x84b)] - 0x1)) : (_0x4860ee['musicPlaylist'] = _0x49b3b3, _0xa00060['currentlyPlayingIndex'] = _0x176db0, _0x2f4d37[_0x27576b(0x6e3)] = ![], _0x152cd7())); } finally { _0x27576b(0x45b) !== 'YrrHW' ? _0x117b87(_0x22cc29['imageId'])[_0x27576b(0x4ea)](_0x6d10cf => { const _0xf81bec = _0x27576b; if (_0x6d10cf) { const _0x13d27f = _0x340155[_0xf81bec(0x798)](_0x6d10cf); _0x596576[_0xf81bec(0x2fd)] = _0x13d27f, _0x1bdee4[_0xf81bec(0x422)] = () => _0x431417[_0xf81bec(0x883)](_0x13d27f); } }) : (_0x4025fd['isGenerating'] = ![], _0x3e5e69(![])); } } } function _0x1e285a(_0x2fb23c, _0x23b3c4) { const _0x54233d = _0x2a98b7; if ('leHLc' === _0x54233d(0x2bc)) { const _0x63a4e0 = _0x2af11['getElementById'](_0x54233d(0x3c6)), _0x3c412a = _0x45add8['getElementById']('widget-title'), _0x19a535 = _0x501c58[_0x54233d(0x4b6)](_0x54233d(0x8fa)), _0x37462b = _0x4bb734[_0x54233d(0x4b6)](_0x54233d(0x7db)), _0x226a8e = _0x5bd151; _0x226a8e && _0x226a8e[_0x54233d(0x5f4)] ? (_0x3c412a[_0x54233d(0xab3)] = _0x226a8e['title'], _0x19a535[_0x54233d(0xab3)] = _0x226a8e['artist'], _0x63a4e0[_0x54233d(0x544)]['add'](_0x54233d(0xa9c)), _0x63a4e0['style'][_0x54233d(0x6d0)](_0x54233d(0x895), _0x54233d(0x7c2) + _0x226a8e[_0x54233d(0x549)] + ')')) : (_0x3c412a[_0x54233d(0xab3)] = '暂无音乐', _0x19a535[_0x54233d(0xab3)] = _0x54233d(0x7af), _0x63a4e0['classList'][_0x54233d(0x7f8)](_0x54233d(0xa9c)), _0x37462b[_0x54233d(0x636)][_0x54233d(0x6d0)](_0x54233d(0x895), _0x54233d(0x55f))); } else { const _0x2526bd = _0x23b3c4[_0x54233d(0x577)](), _0x2377cd = _0x2fb23c[_0x54233d(0x577)](); if (_0x2526bd[_0x54233d(0x914)](_0x54233d(0x1ea))) return _0x54233d(0x29e); if (_0x2377cd[_0x54233d(0x9f1)](_0x54233d(0x362))) return _0x54233d(0x29e); if (_0x2377cd[_0x54233d(0x9f1)](_0x54233d(0x7c5))) return _0x54233d(0xa78); if (_0x2526bd[_0x54233d(0x914)](_0x54233d(0xa78))) return _0x54233d(0xa78); return 'openai'; } } async function _0x414037(_0x220af3, _0x1f97d6 = {}) { const _0x1f6fee = _0x2a98b7; if (_0x1f6fee(0x5bf) === 'ZOaCS') { _0x4025fd['currentAbortController'] && (_0x1f6fee(0x157) === _0x1f6fee(0x3dd) ? _0x591751['innerHTML'] = _0x330230 : _0x4025fd[_0x1f6fee(0x38a)][_0x1f6fee(0x8da)](_0x1f6fee(0x63e))); _0x4025fd['currentAbortController'] = new AbortController(); const _0x507fd0 = _0x4025fd[_0x1f6fee(0x38a)][_0x1f6fee(0x1d0)], { endpoint: _0x47616b, key: _0x51044b, model: _0x346df3 } = _0x4025fd['apiSettings'], _0x333a45 = !!_0x1f97d6['json'], _0x435ea5 = _0x1e285a(_0x47616b, _0x346df3); console[_0x1f6fee(0x66c)]('Detected\x20API\x20provider:\x20' + _0x435ea5); let _0x418dd6 = ''; try { if ('PocoF' !== _0x1f6fee(0x5a1)) { switch (_0x435ea5) { case _0x1f6fee(0x29e): { const _0x593412 = _0x554a90(_0x51044b), _0x22d726 = _0x220af3['find'](_0xe86662 => _0xe86662['role'] === _0x1f6fee(0x6f9))?.[_0x1f6fee(0x9c6)] || '', _0x548499 = _0x220af3['filter'](_0x45c785 => _0x45c785['role'] !== 'system'), _0x2f1def = { 'model': _0x346df3, 'system': _0x22d726, 'messages': _0x548499[_0x1f6fee(0x30c)](_0x546714 => ({ 'role': _0x546714[_0x1f6fee(0x1ce)], 'content': [{ 'type': _0x1f6fee(0xa20), 'text': _0x546714[_0x1f6fee(0x9c6)] }] })), 'max_tokens': 0x1000 }, _0x3a755c = await fetch(_0x47616b, { 'method': _0x1f6fee(0x82f), 'headers': { 'Content-Type': _0x1f6fee(0x26b), 'x-api-key': _0x593412, 'anthropic-version': '2023-06-01' }, 'body': JSON[_0x1f6fee(0x49f)](_0x2f1def), 'signal': _0x507fd0 }); if (!_0x3a755c['ok']) { if (_0x1f6fee(0x82a) !== 'laIaz') _0x413d9b['pause'](); else { const _0x3b4e7d = await _0x3a755c[_0x1f6fee(0x567)]()[_0x1f6fee(0x8ca)](() => ({})); throw new Error(_0x1f6fee(0x5f6) + _0x3a755c['status'] + _0x1f6fee(0x6e6) + (_0x3b4e7d[_0x1f6fee(0x963)]?.[_0x1f6fee(0x973)] || _0x3a755c[_0x1f6fee(0x557)])); } } const _0x46cacd = await _0x3a755c[_0x1f6fee(0x567)](); _0x418dd6 = _0x46cacd[_0x1f6fee(0x9c6)]?.[0x0]?.[_0x1f6fee(0xa20)] || ''; break; } case _0x1f6fee(0xa78): { if (_0x1f6fee(0x2a3) === 'XxnXi') { const _0x4a4faa = _0x554a90(_0x51044b), _0xb9bc9b = _0x47616b[_0x1f6fee(0x9f1)](_0x1f6fee(0x4ef)), _0x540647 = _0x5699cc => { const _0x28ca9e = _0x1f6fee, _0x3d26ed = []; if (_0x5699cc[_0x28ca9e(0x9c6)]) _0x3d26ed[_0x28ca9e(0x65b)]({ 'text': _0x5699cc[_0x28ca9e(0x9c6)] }); if (_0x5699cc['image']) { if (_0x28ca9e(0x50e) !== 'zmEZb') _0x38a221['insertBefore'](_0x4976ae, _0x5a2e4d[_0x28ca9e(0x1e8)]); else { const _0x265666 = _0x5699cc['image'][_0x28ca9e(0x80a)](',')[0x1], _0x564416 = _0x5699cc[_0x28ca9e(0x3b9)][_0x28ca9e(0xa4a)](_0x5699cc[_0x28ca9e(0x3b9)][_0x28ca9e(0x3de)](':') + 0x1, _0x5699cc[_0x28ca9e(0x3b9)][_0x28ca9e(0x3de)](';')) || _0x28ca9e(0x3ea); _0x3d26ed[_0x28ca9e(0x65b)]({ 'inline_data': { 'mime_type': _0x564416, 'data': _0x265666 } }); } } return _0x3d26ed; }, _0xac95c2 = _0x220af3[_0x1f6fee(0x30c)](_0x8a0a8e => ({ 'role': _0x8a0a8e[_0x1f6fee(0x1ce)] === _0x1f6fee(0x135) ? _0x1f6fee(0x4f9) : _0x8a0a8e[_0x1f6fee(0x1ce)] === _0x1f6fee(0x6f9) ? _0x1f6fee(0x880) : _0x8a0a8e['role'], 'parts': _0x540647(_0x8a0a8e) }))[_0x1f6fee(0x1f9)](_0xe25161 => _0xe25161[_0x1f6fee(0x82d)][_0x1f6fee(0x84b)] > 0x0), _0x343eb3 = { 'contents': _0xac95c2 }; _0x333a45 && _0xb9bc9b && (_0x343eb3[_0x1f6fee(0x194)] = { 'response_mime_type': _0x1f6fee(0x26b) }); const _0x421941 = _0x47616b + _0x1f6fee(0x762) + _0x346df3 + _0x1f6fee(0x887) + _0x4a4faa + _0x1f6fee(0x896), _0x5a2a27 = await fetch(_0x421941, { 'method': _0x1f6fee(0x82f), 'headers': { 'Content-Type': _0x1f6fee(0x26b) }, 'body': JSON[_0x1f6fee(0x49f)](_0x343eb3), 'signal': _0x507fd0 }); if (!_0x5a2a27['ok']) throw new Error('Gemini\x20API\x20Error:\x20' + _0x5a2a27[_0x1f6fee(0x4ae)]); const _0x5a8f80 = _0x5a2a27['body'][_0x1f6fee(0x9f7)](), _0x14eed6 = new TextDecoder(); let _0x2fde43 = ''; while (!![]) { if (_0x507fd0[_0x1f6fee(0x323)]) { if (_0x1f6fee(0x429) !== _0x1f6fee(0x862)) { console[_0x1f6fee(0x66c)](_0x1f6fee(0x976)), _0x5a8f80[_0x1f6fee(0x911)](); break; } else _0x1b85e5[_0x1f6fee(0x544)][_0x1f6fee(0x7f8)](_0x1f6fee(0x187)); } const { done: _0x40de1c, value: _0x39ecd1 } = await _0x5a8f80[_0x1f6fee(0x86e)](); if (_0x40de1c) break; const _0x58e60a = _0x14eed6[_0x1f6fee(0x892)](_0x39ecd1, { 'stream': !![] }), _0x5d7b5d = _0x58e60a[_0x1f6fee(0x80a)]('\x0a')[_0x1f6fee(0x1f9)](_0xe1669e => _0xe1669e[_0x1f6fee(0x345)]()[_0x1f6fee(0x914)](_0x1f6fee(0x13c))); for (const _0x57c8e9 of _0x5d7b5d) { if (_0x1f6fee(0x2ed) !== _0x1f6fee(0x2ed)) _0x13c3e9[_0x1f6fee(0x636)][_0x1f6fee(0x6c5)] = _0x1f6fee(0x55f); else { const _0xf9d744 = _0x57c8e9[_0x1f6fee(0x829)](_0x1f6fee(0x143), ''); if (_0xf9d744 === _0x1f6fee(0xa1f)) break; try { _0x2fde43 += JSON[_0x1f6fee(0x93f)](_0xf9d744)[_0x1f6fee(0x4ff)][0x0]['content'][_0x1f6fee(0x82d)][0x0][_0x1f6fee(0xa20)]; } catch { } } } } _0x418dd6 = _0x2fde43; break; } else { const _0xaefb1e = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x51056e = _0x1f6fee(0x310) + _0xf96454['name'] + _0x1f6fee(0x2fc) + _0xaefb1e + _0x1f6fee(0x6b8) + _0xf8ca62['name'] + '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[' + _0xaefb1e + _0x1f6fee(0x9de) + _0xaefb1e + _0x1f6fee(0x7a7); } } case _0x1f6fee(0x41a): default: { const _0x306032 = _0x554a90(_0x51044b), _0x95e1ae = _0x47616b[_0x1f6fee(0x829)](/\/+$/, '') + _0x1f6fee(0x87d), _0xb7f1ed = _0x220af3[_0x1f6fee(0x30c)](_0x2a33ba => { const _0x572179 = _0x1f6fee; if (_0x2a33ba['role'] === 'user' && _0x2a33ba['image']) { if (_0x572179(0x43f) === _0x572179(0x972)) { _0x40884d(); const _0x579803 = (_0x251b26[_0x572179(0x2c2)][_0x572179(0x3c2)] || '')[_0x572179(0x9f1)](_0x42944e); _0x2d7845[_0x572179(0xa7e)] = _0x579803, _0x4e8729(_0x572179(0x4ab), _0x572179(0x786)); } else return { 'role': _0x572179(0x880), 'content': [{ 'type': _0x572179(0xa20), 'text': _0x2a33ba[_0x572179(0x9c6)] || '\x20' }, { 'type': _0x572179(0x30f), 'image_url': { 'url': _0x2a33ba['image'], 'detail': 'high' } }] }; } return { 'role': _0x2a33ba[_0x572179(0x1ce)], 'content': _0x2a33ba[_0x572179(0x9c6)] }; })[_0x1f6fee(0x1f9)](_0x136a46 => _0x136a46['content']), _0x18aefc = { 'model': _0x346df3, 'messages': _0xb7f1ed, 'max_tokens': 0x1000, ..._0x333a45 ? { 'response_format': { 'type': _0x1f6fee(0x7be) } } : {} }, _0x32b3ea = await fetch(_0x95e1ae, { 'method': _0x1f6fee(0x82f), 'headers': { 'Content-Type': _0x1f6fee(0x26b), 'Authorization': _0x1f6fee(0x199) + _0x306032 }, 'body': JSON[_0x1f6fee(0x49f)](_0x18aefc), 'signal': _0x507fd0 }); if (!_0x32b3ea['ok']) { if (_0x1f6fee(0x57a) !== _0x1f6fee(0x9f8)) { const _0x30c6e4 = await _0x32b3ea[_0x1f6fee(0x567)]()[_0x1f6fee(0x8ca)](() => ({})); throw new Error('OpenAI\x20API\x20错误:\x20' + _0x32b3ea[_0x1f6fee(0x4ae)] + '\x20-\x20' + (_0x30c6e4['error']?.[_0x1f6fee(0x973)] || _0x32b3ea[_0x1f6fee(0x557)])); } else _0xba0793[_0x1f6fee(0x963)](_0x1f6fee(0x578), _0x1361cc), _0x1806ac[_0x1f6fee(0x963)](_0x1f6fee(0x427), _0x3979aa); } const _0x232078 = await _0x32b3ea[_0x1f6fee(0x567)](); _0x418dd6 = _0x232078['choices']?.[0x0]?.[_0x1f6fee(0x973)]?.[_0x1f6fee(0x9c6)] || ''; break; } }return _0x418dd6; } else _0x2c0543[_0x1f6fee(0x544)][_0x1f6fee(0x82e)](_0x1f6fee(0x9ad)), _0x424e1f[_0x1f6fee(0x515)]({ 'behavior': _0x1f6fee(0x9ee), 'block': 'center' }); } catch (_0x48015a) { if (_0x48015a[_0x1f6fee(0x5f1)] === _0x1f6fee(0x40f)) { if (_0x1f6fee(0x7d0) === _0x1f6fee(0x9e8)) { const _0x34caaf = _0x418f5b(_0x2c93cb[0x1], 0xa), _0x48de04 = _0x17b3aa(_0x7b1986[0x2], 0xa), _0x8fb29e = _0x3d5330(_0x465ccc[0x3], 0xa) * (_0x3a5f33[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x5aac84 = _0x34caaf * 0x3c + _0x48de04 + _0x8fb29e / 0x3e8, _0x3bade6 = _0xf32eaa[_0x1f6fee(0x829)](_0x1dc5d0, '')['trim'](); _0x3bade6 && _0x31d81d[_0x1f6fee(0x65b)]({ 'time': _0x5aac84, 'text': _0x3bade6 }); } else return console[_0x1f6fee(0x66c)](_0x1f6fee(0x571)), ''; } throw _0x48015a; } finally { _0x4025fd[_0x1f6fee(0x38a)] && _0x4025fd[_0x1f6fee(0x38a)][_0x1f6fee(0x1d0)] === _0x507fd0 && (_0x1f6fee(0x7d4) !== 'JZyhv' ? _0x4025fd['currentAbortController'] = null : _0x2f0a49['style'][_0x148210] = _0x226ec0[_0xbbc3b]); } } else _0x378219(new _0x128d4e(_0x1f6fee(0xa2e))); } async function _0x73fea2() { const _0x3d1fd4 = _0x2a98b7, _0x41f02e = _0xbc6ebf[_0x3d1fd4(0x1f3)]['classList'][_0x3d1fd4(0x61a)]('active'), _0x4acd1f = _0x41f02e ? _0x31c72a[_0x3d1fd4(0x95e)] : null; let _0x500372 = null, _0x4ffeb4 = ''; if (_0x41f02e && _0x4acd1f) { _0x500372 = _0x4025fd[_0x3d1fd4(0x132)][_0x3d1fd4(0x32b)](_0x572cf0 => _0x572cf0['type'] === _0x3d1fd4(0x258) && _0x572cf0[_0x3d1fd4(0x2db)]['includes'](_0x4acd1f)); const _0x433aa6 = _0x389a36(_0x4acd1f); _0x4ffeb4 = _0x433aa6 ? _0x433aa6['name'] : '该角色'; } else { if (_0x4025fd['activeChatId']) { _0x500372 = _0xba11a1(); const _0x184491 = document['getElementById'](_0x3d1fd4(0x85b))[_0x3d1fd4(0xab3)]; _0x4ffeb4 = _0x184491 || _0x3d1fd4(0x91c); } } if (!_0x500372) { _0x26f8b2(_0x3d1fd4(0x702)); return; } const _0x5977c6 = await _0x2f2e39(_0x3d1fd4(0x8a0) + _0x4ffeb4 + _0x3d1fd4(0x998)); if (!_0x5977c6) return; if (_0x500372['id'] === _0x4025fd['activeChatId']) { if (_0x3d1fd4(0x242) !== _0x3d1fd4(0x242)) { const _0x4a473a = { 'id': _0x3d1fd4(0x514) + _0x1fe03a['now']() + '_' + _0x29ff12[_0x3d1fd4(0x59e)](), 'name': _0x5591d5['name'], 'content': _0x2370f2[_0x3d1fd4(0x9c6)] }; _0x5cc8b3[_0x3d1fd4(0xa3c)][_0x3d1fd4(0x65b)](_0x4a473a), _0x5999ae['push'](_0x4a473a['id']); } else _0x47d03a(), _0x4025fd[_0x3d1fd4(0x24a)] = [], _0x21e41c(); } try { localStorage[_0x3d1fd4(0x6f1)](_0x3d1fd4(0x8ab) + _0x500372['id']); } catch (_0x6b8599) { if (_0x3d1fd4(0x5b0) === 'mYHzy') { _0x745593['id'] === _0x7fc900[_0x3d1fd4(0xa4d)] && (_0x2d273e(), _0x35e4e8[_0x3d1fd4(0x24a)] = [], _0x44290e()); try { _0x3fe2a3[_0x3d1fd4(0x6f1)]('chatHistory_' + _0x519718['id']), _0x2837ae(_0x3d1fd4(0x17e) + _0x22d01c[_0x3d1fd4(0x5f1)] + _0x3d1fd4(0x726)); } catch (_0x1f8311) { _0x143a3c['error'](_0x3d1fd4(0x8b0) + _0xa0404c['id'], _0x1f8311), _0x3bd2e8(_0x3d1fd4(0x294)); } } else console[_0x3d1fd4(0x963)](_0x3d1fd4(0x98a) + _0x500372['id'], _0x6b8599); } _0x26f8b2('\x22' + _0x4ffeb4 + '\x22\x20的聊天记录已清空。'); } const _0x3e9f8a = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x7d2)), _0x3d2344 = document[_0x2a98b7(0x4b6)]('import-all-data-button'), _0x3d06c4 = document['getElementById'](_0x2a98b7(0x88a)); _0x3e9f8a[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), async () => { const _0x1666c1 = _0x2a98b7; if (_0x1666c1(0x3f1) === _0x1666c1(0x2b1)) { const _0x353063 = _0x789904(); if (_0x353063 && _0x353063[_0x1666c1(0xaa2)] === _0x1666c1(0x258)) _0x1b0953(_0x353063['participantIds'][0x0]); else _0x353063 && _0x353063[_0x1666c1(0xaa2)] === _0x1666c1(0x1d3) && _0x9d9344(_0x353063['id']); } else { _0x32d19f(!![], _0x1666c1(0x709)); const _0x174d64 = []; try { const _0x335f62 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0xd72cbc = 0x0; _0xd72cbc < localStorage[_0x1666c1(0x84b)]; _0xd72cbc++) { if (_0x1666c1(0x6df) === 'qkbEM') _0x320cbc = '0x' + _0xb52462[0x1] + _0x1ff6ce[0x1], _0x57c8a3 = '0x' + _0x5e0094[0x2] + _0x58f8ab[0x2], _0x3276bb = '0x' + _0x21bf14[0x3] + _0x5980a1[0x3]; else { const _0xe90dee = localStorage['key'](_0xd72cbc); if (_0xe90dee) _0x335f62['localStorageData'][_0xe90dee] = localStorage[_0x1666c1(0x47c)](_0xe90dee); } } const _0x4a6a25 = await _0x1e4979, _0x40fb46 = _0x4a6a25[_0x1666c1(0x287)](_0x1f7efd, _0x1666c1(0x812)), _0x9f79c7 = _0x40fb46['objectStore'](_0x1f7efd), _0x3b3f9c = await new Promise((_0x161391, _0x295507) => { const _0x2ccf8a = _0x1666c1, _0x1e941d = _0x9f79c7[_0x2ccf8a(0x8d1)](); _0x1e941d[_0x2ccf8a(0x62f)] = () => _0x161391(_0x1e941d['result']), _0x1e941d['onerror'] = () => _0x295507(_0x1e941d[_0x2ccf8a(0x963)]); }); for (const _0x2b94a8 of _0x3b3f9c) { if (_0x2b94a8[_0x1666c1(0x433)] instanceof Blob) try { _0x335f62[_0x1666c1(0x3f0)][_0x2b94a8['id']] = await _0xe16e6b(_0x2b94a8[_0x1666c1(0x433)]); } catch (_0xeb4f18) { _0x174d64[_0x1666c1(0x65b)](_0x2b94a8['id']); } } const _0x356657 = _0x4a6a25[_0x1666c1(0x287)](_0x3dc1ba, 'readonly'), _0x1db036 = _0x356657[_0x1666c1(0x301)](_0x3dc1ba), _0x4cdf28 = await new Promise((_0x411e4b, _0xa2cc14) => { const _0x4e419b = _0x1666c1; if (_0x4e419b(0x1e6) !== _0x4e419b(0x1e6)) _0x5dc34d[_0x4e419b(0x2fd)] = _0x189ea2 ? _0x5934a6[_0x4e419b(0x798)](_0x51de97) : ''; else { const _0x27f9d8 = _0x1db036['getAll'](); _0x27f9d8['onsuccess'] = () => _0x411e4b(_0x27f9d8[_0x4e419b(0x8e8)]), _0x27f9d8[_0x4e419b(0x8ec)] = () => _0xa2cc14(_0x27f9d8['error']); } }); for (const _0x2d2410 of _0x4cdf28) { if (_0x1666c1(0x3f6) !== _0x1666c1(0x3f6)) _0x55319d += _0x1666c1(0x949) + _0x466339['query'] + _0x1666c1(0x96c); else { const _0x275291 = { ..._0x2d2410 }; _0x2d2410[_0x1666c1(0x91b)] instanceof Blob && (_0x1666c1(0xa44) !== _0x1666c1(0xa44) ? (_0x28bff7['classList'][_0x1666c1(0x82e)](_0x1666c1(0x426)), _0x34fccc[_0x1666c1(0x544)][_0x1666c1(0x82e)]('is-exiting-left'), _0x1849fe[_0x1666c1(0x544)][_0x1666c1(0x82e)](_0x1666c1(0x1ff)), _0x2c4a51(() => { const _0x2b0637 = _0x1666c1; _0x459677['classList']['remove'](_0x2b0637(0x1ff), 'is-exiting-left'), _0x5aca1[_0x2b0637(0x544)][_0x2b0637(0x7f8)](_0x2b0637(0x426)), _0x20a7ce[_0x2b0637(0x44c)] = _0x5d9b39, _0x523f09(), _0x72ae0d[_0x2b0637(0xa31)] = ![]; }, 0x2bc)) : _0x275291[_0x1666c1(0x91b)] = await _0xe16e6b(_0x2d2410[_0x1666c1(0x91b)])); if (_0x2d2410[_0x1666c1(0x549)] instanceof Blob) { if (_0x1666c1(0x18b) !== 'ZpKMB') _0x275291[_0x1666c1(0x549)] = await _0xe16e6b(_0x2d2410['cover']); else { _0x3b5530[_0x1666c1(0x255)] = _0xf9442a, _0x7c2cf2['characterLastScripts'][_0x4f2c50['id']] = [..._0x2f3f0b], _0x12d7e4(); const _0x1d5d50 = _0x33f798['map'](_0x137b25 => _0x137b25[_0x1666c1(0x681)] === _0x1666c1(0x6fc) ? _0x137b25[_0x1666c1(0x3e3)] : _0x137b25[_0x1666c1(0x681)] + ':\x20' + _0x137b25[_0x1666c1(0x3e3)])[_0x1666c1(0x602)]('\x0a\x0a'); _0x2073d8[_0x1666c1(0x24a)][_0x1666c1(0x65b)]({ 'role': 'assistant', 'senderId': _0x113ee7['id'], 'timestamp': _0x3ad4f0['now'](), 'isOffline': !![], 'content': _0x1d5d50 }); } } _0x335f62[_0x1666c1(0xa96)][_0x1666c1(0x65b)](_0x275291); } } const _0x53e7d0 = new Blob([JSON[_0x1666c1(0x49f)](_0x335f62, null, 0x2)], { 'type': _0x1666c1(0x26b) }), _0x4e8f49 = URL[_0x1666c1(0x798)](_0x53e7d0), _0x2456e7 = document[_0x1666c1(0x597)]('a'), _0x14eef2 = new Date(), _0x2b7fc5 = _0x14eef2[_0x1666c1(0x554)]() + '-' + String(_0x14eef2[_0x1666c1(0x720)]() + 0x1)[_0x1666c1(0x412)](0x2, '0') + '-' + String(_0x14eef2[_0x1666c1(0x1f6)]())['padStart'](0x2, '0'); _0x2456e7['href'] = _0x4e8f49, _0x2456e7[_0x1666c1(0x21d)] = _0x1666c1(0x1e5) + _0x2b7fc5 + _0x1666c1(0x5d2), document['body'][_0x1666c1(0x329)](_0x2456e7), _0x2456e7[_0x1666c1(0xab8)](), document[_0x1666c1(0x9c2)][_0x1666c1(0x2cb)](_0x2456e7), URL[_0x1666c1(0x883)](_0x4e8f49), _0x32d19f(![]); if (_0x174d64[_0x1666c1(0x84b)] > 0x0) _0x26f8b2('导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a' + _0x174d64['join']('\x0a')); else { if (_0x1666c1(0x219) === 'RJFnq') _0x26f8b2('包含所有图片和音乐的全量数据已成功导出！'); else { const _0x53f24a = (_0x3c6736['sticker'] ?? _0xc87ff9[_0x1666c1(0x4d0)] ?? _0x5445df[_0x1666c1(0x643)] ?? _0x270eb1[_0x1666c1(0x9f4)])?.['trim'](); if (_0x53f24a && _0x43729e[_0x1666c1(0x7a8)](_0x53f24a)) _0x39fd9c['events'][_0x1666c1(0x65b)]({ 'senderId': _0x28e521['id'], 'kind': _0x1666c1(0x8e3), 'sticker': _0x53f24a }); else { const _0x794048 = _0x512220(_0x37b4d4[_0x1666c1(0x9c6)] ?? _0x26b8ec[_0x1666c1(0xa20)] ?? '')[_0x1666c1(0x345)]() || _0x1666c1(0x275) + (_0x53f24a || _0x1666c1(0x9fe)) + ']'; if (_0x794048) _0x14b2ce['events'][_0x1666c1(0x65b)]({ 'senderId': _0x5287aa['id'], 'kind': _0x1666c1(0xa20), 'content': _0x794048 }); } } } } catch (_0xd039c0) { _0x32d19f(![]), console[_0x1666c1(0x963)](_0x1666c1(0x31c), _0xd039c0), _0x26f8b2(_0x1666c1(0x9cc) + _0xd039c0[_0x1666c1(0x973)]); } } }), _0x3d2344[_0x2a98b7(0x20b)]('click', () => { const _0x1136ac = _0x2a98b7; if (_0x1136ac(0xa2c) === _0x1136ac(0xa2c)) _0x3d06c4['click'](); else { const { omniText: _0x554a28 } = _0x5b318f(_0x436297['id'], null), _0x456d59 = _0x18566b(_0x2f654d['id']), _0x5f5c5a = _0x80658f[_0x1136ac(0x859)] && _0x1a7a95['linkedWorldBookIds']['length'] > 0x0 ? _0x1136ac(0x2f9) + _0x5e0219[_0x1136ac(0x5f1)] + '的个人专属世界观设定\x0a' + _0x3cdadb[_0x1136ac(0x859)][_0x1136ac(0x30c)](_0x22b23c => _0x4ab2a5[_0x1136ac(0xa3c)]['find'](_0x4794b1 => _0x4794b1['id'] === _0x22b23c))[_0x1136ac(0x1f9)](_0x1eb942)[_0x1136ac(0x30c)](_0x21c30a => _0x1136ac(0x141) + _0x21c30a[_0x1136ac(0x5f1)] + '\x0a' + _0x21c30a['content'])[_0x1136ac(0x602)]('') : ''; return '-\x20姓名:\x20' + _0x1a2177['name'] + _0x1136ac(0x456) + _0x4860bf['id'] + '\x0a\x20\x20人设:\x20' + _0xe81de2['persona'] + _0x1136ac(0x478) + _0x554a28 + '\x0a' + _0x456d59 + '\x0a' + _0x5f5c5a; } }), _0x5980ff['addEventListener'](_0x2a98b7(0xab8), _0x5603c2), _0x3d06c4[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x568573 => { const _0x42ded1 = _0x2a98b7, _0x376f89 = _0x568573[_0x42ded1(0x492)]['files'][0x0]; if (!_0x376f89) return; _0x2f2e39(_0x42ded1(0x8f1))['then'](_0x55e693 => { const _0x1998b4 = _0x42ded1; if (!_0x55e693) { _0x3d06c4[_0x1998b4(0x95e)] = ''; return; } _0x32d19f(!![], _0x1998b4(0x933)); const _0x27048d = new FileReader(); _0x27048d[_0x1998b4(0x422)] = async _0x534d9a => { const _0x2fd78d = _0x1998b4; if (_0x2fd78d(0x379) === 'sFUZk') try { const _0xeff936 = JSON[_0x2fd78d(0x93f)](_0x534d9a[_0x2fd78d(0x492)][_0x2fd78d(0x8e8)]); if (!_0xeff936[_0x2fd78d(0x916)] || !_0xeff936[_0x2fd78d(0x3f0)]) { if (_0x2fd78d(0x1d8) === 'oKkGF') _0x3e64ad[_0x2fd78d(0x20b)](_0x2fd78d(0xab8), function () { const _0x4da241 = _0x2fd78d, _0x2dd115 = { 'id': _0x4dac1e['id'], 'url': _0x45ca68[_0x4da241(0x22c)] }; _0x222152(this, _0x2dd115); }); else throw new Error(_0x2fd78d(0x334)); } _0x32d19f(!![], _0x2fd78d(0x68f)); const _0x4cffcb = await Promise['all'](Object[_0x2fd78d(0x8f4)](_0xeff936[_0x2fd78d(0x3f0)])[_0x2fd78d(0x30c)](async _0x16be27 => { const _0x56f0d3 = _0x2fd78d, _0x27288c = _0xeff936['indexedDBData'][_0x16be27]; if (typeof _0x27288c === 'string' && _0x27288c['startsWith'](_0x56f0d3(0x13c))) { if (_0x56f0d3(0x789) !== _0x56f0d3(0x789)) _0x58f39c = _0x5bcd30[_0x56f0d3(0x12d)]; else { const _0x3679e0 = await _0x22dea8(_0x27288c); return { 'id': _0x16be27, 'blob': _0x3679e0 }; } } return null; }))['then'](_0x2739bc => _0x2739bc[_0x2fd78d(0x1f9)](Boolean)), _0x31b764 = []; if (_0xeff936[_0x2fd78d(0xa96)]) { _0x32d19f(!![], _0x2fd78d(0x878)); const _0x4698ef = _0xeff936[_0x2fd78d(0xa96)][_0x2fd78d(0x30c)](async _0x7204c9 => { const _0x1384e7 = _0x2fd78d, _0x41ca93 = { ..._0x7204c9 }; if (_0x7204c9[_0x1384e7(0x91b)]) _0x41ca93['audio'] = await _0x22dea8(_0x7204c9[_0x1384e7(0x91b)]); if (_0x7204c9['cover']) _0x41ca93[_0x1384e7(0x549)] = await _0x22dea8(_0x7204c9['cover']); return _0x41ca93; }); _0x31b764[_0x2fd78d(0x65b)](...await Promise[_0x2fd78d(0x50c)](_0x4698ef)); } _0x32d19f(!![], _0x2fd78d(0x40d)), localStorage[_0x2fd78d(0x547)](); for (const _0x3ff57f in _0xeff936[_0x2fd78d(0x916)]) { localStorage[_0x2fd78d(0x5f0)](_0x3ff57f, _0xeff936['localStorageData'][_0x3ff57f]); } _0x32d19f(!![], _0x2fd78d(0x8b3)); const _0x57c4be = await _0x1e4979, _0x2ab66f = _0x57c4be[_0x2fd78d(0x287)]([_0x1f7efd, _0x3dc1ba, _0x569363], _0x2fd78d(0x431)), _0x4ec473 = _0x2ab66f[_0x2fd78d(0x301)](_0x1f7efd), _0xf03cca = _0x2ab66f[_0x2fd78d(0x301)](_0x3dc1ba), _0x28a09a = _0x2ab66f[_0x2fd78d(0x301)](_0x569363); _0x4ec473['clear'](), _0xf03cca[_0x2fd78d(0x547)](), _0x28a09a['clear'](), _0x4cffcb[_0x2fd78d(0x6ff)](_0x3875ae => _0x4ec473[_0x2fd78d(0x6e5)](_0x3875ae)), _0x31b764[_0x2fd78d(0x6ff)](_0x5d232c => _0xf03cca[_0x2fd78d(0x6e5)](_0x5d232c)), await new Promise((_0xbe8d48, _0x5a8183) => { const _0x4ced7f = _0x2fd78d; _0x2ab66f[_0x4ced7f(0x92e)] = _0xbe8d48, _0x2ab66f[_0x4ced7f(0x8ec)] = _0x4bbb55 => _0x5a8183(_0x4bbb55['target'][_0x4ced7f(0x963)]); }), _0x32d19f(![]), _0x26f8b2(_0x2fd78d(0x317)), setTimeout(() => location[_0x2fd78d(0x1de)](), 0x640); } catch (_0x2ed254) { if (_0x2fd78d(0x4b5) !== _0x2fd78d(0x974)) _0x32d19f(![]), console['error'](_0x2fd78d(0xa97), _0x2ed254), _0x26f8b2('导入失败:\x20' + _0x2ed254[_0x2fd78d(0x973)]); else { const _0x52a459 = _0x59d2e3[_0x2fd78d(0x8cd)](0x1, _0x20a12a(_0x21942d[_0x2fd78d(0x271)]?.[_0x2fd78d(0x78e)] ?? 0x64)), _0x4f2736 = _0x11d49b[_0x2fd78d(0x132)][_0x2fd78d(0x1f9)](_0xc6e603 => _0xc6e603[_0x2fd78d(0x2db)][_0x2fd78d(0x9f1)](_0x32b62)), _0x1da5cb = _0x4f2736[_0x2fd78d(0x30c)](_0x513321 => { const _0x5080ee = _0x2fd78d, _0x42ff41 = _0xaebc53(_0x513321['id']), _0x3e2df4 = _0x42ff41[_0x5080ee(0x84b)] > 0x0 ? _0x42ff41[_0x42ff41[_0x5080ee(0x84b)] - 0x1] : null; return { 'chat': _0x513321, 'history': _0x42ff41, 'lastTimestamp': _0x3e2df4 ? _0x3e2df4[_0x5080ee(0x36b)] : 0x0 }; })[_0x2fd78d(0x1f9)](_0x33f8c6 => _0x33f8c6[_0x2fd78d(0x351)]['length'] > 0x0); _0x1da5cb['sort']((_0x2178e3, _0x592f6a) => _0x592f6a['lastTimestamp'] - _0x2178e3[_0x2fd78d(0x54e)]); const _0x49577b = [], _0x25ed93 = {}; return _0x1da5cb['forEach']((_0x213ab7, _0x4b6c0a) => { const _0x25f3e9 = _0x2fd78d, _0x341691 = _0x4bb45f(_0x213ab7[_0x25f3e9(0x651)], _0x213ab7['history'], _0x52a459); if (_0x341691[_0x25f3e9(0x84b)] === 0x0) return; const _0x527f51 = _0x4b6c0a === 0x0 ? _0x25f3e9(0x326) : _0x25f3e9(0x539); _0x49577b[_0x25f3e9(0x65b)](_0x25f3e9(0x6f4) + _0x527f51 + _0x437c94(_0x213ab7[_0x25f3e9(0x651)]) + '\x0a' + _0x341691[_0x25f3e9(0x602)]('\x0a')), _0x25ed93[_0x213ab7['chat']['id']] = _0x341691['length']; }), { 'omniText': _0x49577b[_0x2fd78d(0x602)]('\x0a\x0a'), 'usedCounts': _0x25ed93 }; } } finally { _0x3d06c4[_0x2fd78d(0x95e)] = ''; } else { const _0x22f2e9 = _0xff1a8d['getElementById']('global-player-play-pause-btn'); if (_0x22f2e9) _0x22f2e9['textContent'] = '❚❚'; } }, _0x27048d[_0x1998b4(0x1d5)](_0x376f89); }); }); function _0x3e4887() { const _0x6d77fe = _0x2a98b7; _0x4b158a[_0x6d77fe(0x95e)] = _0x4025fd['apiSettings'][_0x6d77fe(0x3c2)] || '', _0x32ed71[_0x6d77fe(0x95e)] = _0x4025fd[_0x6d77fe(0x2c2)][_0x6d77fe(0xa7f)] || '', _0x283a74[_0x6d77fe(0x95e)] = _0x4025fd[_0x6d77fe(0x2c2)][_0x6d77fe(0x4f9)] || '', _0x1bc97d[_0x6d77fe(0x95e)] = String(_0x4025fd[_0x6d77fe(0x271)]?.[_0x6d77fe(0x78e)] ?? 0x64), document[_0x6d77fe(0x4b6)]('api-provider')[_0x6d77fe(0x95e)] = _0x4025fd[_0x6d77fe(0x2c2)][_0x6d77fe(0x579)] || _0x6d77fe(0x41a); } function _0x2d807e() { const _0x4a8495 = _0x2a98b7; if ('YUNjr' === _0x4a8495(0x23e)) _0x416ea1[_0x4a8495(0x3b9)] = _0x4b9933, _0x257cd9 = !![]; else { _0x4025fd['apiSettings']['endpoint'] = _0x4b158a[_0x4a8495(0x95e)][_0x4a8495(0x345)](), _0x4025fd[_0x4a8495(0x2c2)][_0x4a8495(0xa7f)] = _0x32ed71[_0x4a8495(0x95e)][_0x4a8495(0x345)](), _0x4025fd[_0x4a8495(0x2c2)][_0x4a8495(0x4f9)] = _0x283a74[_0x4a8495(0x95e)]['trim'](), _0x4025fd[_0x4a8495(0x2c2)]['provider'] = document[_0x4a8495(0x4b6)]('api-provider')['value']; const _0x3ef016 = parseInt(_0x1bc97d[_0x4a8495(0x95e)], 0xa); _0x4025fd[_0x4a8495(0x271)][_0x4a8495(0x78e)] = Number[_0x4a8495(0x8d5)](_0x3ef016) && _0x3ef016 > 0x0 ? _0x3ef016 : 0x64, _0x33c083(), _0x26f8b2(_0x4a8495(0x6d8)); } } function _0x4e1f7f() { const _0x2affae = _0x2a98b7; 'oVQEd' !== _0x2affae(0x1fb) ? (_0x33a46c(![]), _0x1d6f3b[_0x2affae(0x492)][_0x2affae(0x95e)] = '') : (_0x8a5fc3['value'] = _0x4025fd[_0x2affae(0x146)][_0x2affae(0x5f1)] || '', _0x5cb2f2['src'] = _0x4025fd[_0x2affae(0x146)][_0x2affae(0x12d)] || _0x2430ff, _0x2c9079[_0x2affae(0x95e)] = _0x4025fd[_0x2affae(0x146)][_0x2affae(0x8ad)] || ''); } function _0x58b533() { const _0x4a3fa9 = _0x2a98b7; if (_0x4a3fa9(0x288) === _0x4a3fa9(0x731)) { const _0x47c0e8 = _0x3882d7[_0x4a3fa9(0x798)](_0x1d4a3c), _0x36505c = _0x4a3fa9(0x6a0), _0xac0cad = _0x4a3fa9(0x9df) + _0x36505c + _0x4a3fa9(0xa1b) + _0x47c0e8 + _0x4a3fa9(0x4bc); _0x48fde9[_0x4a3fa9(0x3c8)] = _0xac0cad, _0x6f2f8[_0x4a3fa9(0x196)]['style'][_0x4a3fa9(0x6d0)](_0x4a3fa9(0x9d8), '\x27' + _0x36505c + '\x27'), _0x39b6e1[_0x4a3fa9(0xab3)] = _0x4a3fa9(0x661); } else _0x4025fd[_0x4a3fa9(0x146)][_0x4a3fa9(0x5f1)] = _0x8a5fc3[_0x4a3fa9(0x95e)][_0x4a3fa9(0x345)](), _0x4025fd[_0x4a3fa9(0x146)][_0x4a3fa9(0x8ad)] = _0x2c9079[_0x4a3fa9(0x95e)]['trim'](), _0x33c083(), _0x21e41c(), _0x26f8b2(_0x4a3fa9(0x608)), _0x102967(_0x4a3fa9(0x4ab), 'userProfile'); } async function _0x3c19d1(_0x1594b1 = null) { const _0x34fcdc = _0x2a98b7, _0x277061 = _0x413b7b; _0x102967(_0x34fcdc(0x1f3), _0x277061); const _0x47f1f5 = document[_0x34fcdc(0x4b6)](_0x34fcdc(0x546)); _0x47f1f5['innerHTML'] = '', _0x4025fd['worldBooks'][_0x34fcdc(0x6ff)](_0xc11119 => { const _0x4be417 = _0x34fcdc, _0x1173ca = document[_0x4be417(0x597)](_0x4be417(0x525)); _0x1173ca['innerHTML'] = _0x4be417(0x751) + _0xc11119['id'] + '\x22>\x20' + _0xc11119['name'], _0x47f1f5[_0x4be417(0x329)](_0x1173ca); }), _0x45f029(_0x34fcdc(0x306)), _0x1bdd67['src'] = '', _0x92d973[_0x34fcdc(0x95e)] = '', _0x9e5889[_0x34fcdc(0x2fd)] = '', _0x3c0d66['value'] = '', _0x308fa1[_0x34fcdc(0x2fd)] = '', _0x552584[_0x34fcdc(0x95e)] = ''; const _0x417f9b = [_0x34fcdc(0x72b), _0x34fcdc(0x901), _0x34fcdc(0x98f), _0x34fcdc(0xa39), _0x34fcdc(0x374)]; _0x417f9b[_0x34fcdc(0x6ff)](_0x85d4a4 => { const _0x14540c = _0x34fcdc; document[_0x14540c(0x4b6)](_0x14540c(0x458) + _0x85d4a4 + '-preview')['src'] = '', document['getElementById']('char-edit-sprite-' + _0x85d4a4 + _0x14540c(0x46c))[_0x14540c(0x95e)] = ''; }); if (_0x1594b1) { if (_0x34fcdc(0x8d3) === _0x34fcdc(0x432)) _0x30a72a[_0x34fcdc(0x544)][_0x34fcdc(0x7f8)](_0x34fcdc(0x9ad)), _0xc8a68f['classList'][_0x34fcdc(0x82e)]('active'), _0x1debe7(); else { const _0x5e07ef = _0x4025fd[_0x34fcdc(0x61c)]['find'](_0x49a01b => _0x49a01b['id'] === _0x1594b1); if (!_0x5e07ef) return; _0x31c72a[_0x34fcdc(0x95e)] = _0x5e07ef['id'], _0x2cea0c[_0x34fcdc(0xab3)] = _0x34fcdc(0x43e), _0x1fc6de['value'] = _0x5e07ef[_0x34fcdc(0x5f1)], _0x1910dd[_0x34fcdc(0x95e)] = _0x5e07ef[_0x34fcdc(0x88f)], _0x4aba4a[_0x34fcdc(0x95e)] = _0x5e07ef['persona'], document['getElementById']('char-edit-css')[_0x34fcdc(0x95e)] = _0x5e07ef['bubbleCss'] || ''; const _0x1ad010 = _0x4025fd[_0x34fcdc(0x132)][_0x34fcdc(0x32b)](_0x3c01bb => _0x3c01bb['type'] === _0x34fcdc(0x258) && _0x3c01bb[_0x34fcdc(0x2db)][_0x34fcdc(0x9f1)](_0x1594b1)); document[_0x34fcdc(0x4b6)](_0x34fcdc(0x306))[_0x34fcdc(0x95e)] = _0x1ad010?.['boundUserProfileId'] || _0x4025fd[_0x34fcdc(0x4a1)]; try { const _0x6eb573 = await _0x34b988(_0x34fcdc(0x201) + _0x5e07ef['id']), _0x550b75 = await _0x34b988(_0x34fcdc(0x4c4) + _0x5e07ef['id']), _0x41ae05 = await _0x34b988(_0x34fcdc(0x54d) + _0x5e07ef['id']); _0x1bdd67[_0x34fcdc(0x2fd)] = _0x6eb573 ? URL[_0x34fcdc(0x798)](_0x6eb573) : _0x5e07ef[_0x34fcdc(0x12d)] || _0x535078; if (_0x550b75) _0x9e5889[_0x34fcdc(0x2fd)] = URL['createObjectURL'](_0x550b75); if (_0x41ae05) _0x308fa1['src'] = URL[_0x34fcdc(0x798)](_0x41ae05); for (const _0x18e522 of _0x417f9b) { if (_0x34fcdc(0x639) === 'VYGXS') { const _0x45a366 = await _0x34b988(_0x34fcdc(0x489) + _0x18e522 + '_' + _0x5e07ef['id']); _0x45a366 && (document[_0x34fcdc(0x4b6)](_0x34fcdc(0x458) + _0x18e522 + _0x34fcdc(0x79a))[_0x34fcdc(0x2fd)] = URL[_0x34fcdc(0x798)](_0x45a366)); } else _0x29f6ac += _0x34fcdc(0xa9a) + _0xfeb063['restaurant_name'] + _0x34fcdc(0x752) + _0x3cddd4[_0x34fcdc(0x440)]['join']('、') + '。\x0a'; } } catch (_0x32b396) { console[_0x34fcdc(0x963)]('加载角色\x20' + _0x5e07ef['id'] + _0x34fcdc(0x263), _0x32b396), _0x1bdd67[_0x34fcdc(0x2fd)] = _0x5e07ef['avatar'] || _0x535078; } _0x5e07ef[_0x34fcdc(0x859)] && (_0x34fcdc(0x5c4) === _0x34fcdc(0x5c4) ? _0x47f1f5['querySelectorAll'](_0x34fcdc(0x18f))[_0x34fcdc(0x6ff)](_0x57e64a => { const _0x151eec = _0x34fcdc; if (_0x151eec(0x595) !== 'qaitL') { if (_0x5e07ef[_0x151eec(0x859)]['includes'](_0x57e64a['value'])) _0x57e64a['checked'] = !![]; } else _0x2b46cc = _0x5545a9[_0x151eec(0x293)][0x0]; }) : _0x380025 = _0x489aa6['getItem']('appState')), _0x32cc95(); } } else _0x31c72a['value'] = '', _0x2cea0c['textContent'] = _0x34fcdc(0x76e), _0x1fc6de[_0x34fcdc(0x95e)] = '新角色\x20' + (_0x4025fd[_0x34fcdc(0x61c)][_0x34fcdc(0x84b)] + 0x1), _0x1910dd[_0x34fcdc(0x95e)] = '', _0x1bdd67[_0x34fcdc(0x2fd)] = _0x535078, _0x4aba4a[_0x34fcdc(0x95e)] = _0x34fcdc(0x787), document[_0x34fcdc(0x4b6)](_0x34fcdc(0x7b9))[_0x34fcdc(0x95e)] = '', _0x32cc95(); const _0x1cf8be = document[_0x34fcdc(0x4b6)]('char-edit-css'); let _0xcef60 = document[_0x34fcdc(0x4b6)]('live-preview-style'); !_0xcef60 && (_0xcef60 = document[_0x34fcdc(0x597)]('style'), _0xcef60['id'] = _0x34fcdc(0x48e), document[_0x34fcdc(0x506)]['appendChild'](_0xcef60)); const _0x6496ea = () => { const _0xc9f255 = _0x34fcdc; if ('JZZKU' !== _0xc9f255(0x280)) { const _0x1a477 = _0x1cf8be[_0xc9f255(0x95e)]; let _0x2f4de4 = _0x1a477['replace'](/\.bubble\.sent/g, _0xc9f255(0x178))[_0xc9f255(0x829)](/\.bubble\.received/g, '#bubble-preview-ai'); _0xcef60[_0xc9f255(0x3c8)] = _0x2f4de4; } else { const _0x401eec = _0x157c4f[_0xc9f255(0x6f8)](_0xc9f255(0x60e)); if (!_0x401eec) return; _0x401eec['id'] === 'meeting-view-screen' ? _0x5f3208() : _0x5cc0a6(); } }; _0x1cf8be['removeEventListener'](_0x34fcdc(0x60c), _0x6496ea), _0x1cf8be[_0x34fcdc(0x20b)]('input', _0x6496ea), _0x6496ea(); } async function _0x508cfe() { const _0xed22bd = _0x2a98b7; if (_0xed22bd(0x64e) !== _0xed22bd(0x64e)) { const _0x3fa5c5 = _0x403bc0['parse'](_0x3a054d[_0xed22bd(0x47c)](_0xed22bd(0x5f5)) || '{}'), _0x1de858 = { ..._0x3fa5c5, ..._0x136c75 }; _0x247a8a[_0xed22bd(0x5f0)]('badgeState', _0x2a38e6['stringify'](_0x1de858)); } else { const _0x206112 = _0x31c72a[_0xed22bd(0x95e)]; if (!_0x206112) { _0x26f8b2(_0xed22bd(0x1a3)); return; } const _0x905807 = _0x389a36(_0x206112); if (!_0x905807) return; _0x32d19f(!![], '正在打包“' + _0x905807['name'] + '”...'); try { const _0x1887b0 = { 'type': _0xed22bd(0x174), 'version': 0x1, 'name': _0x905807[_0xed22bd(0x5f1)], 'remark': _0x905807[_0xed22bd(0x88f)], 'persona': _0x905807[_0xed22bd(0x8ad)], 'bubbleCss': _0x905807[_0xed22bd(0x1db)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x4f5f84 = await _0x34b988(_0xed22bd(0x201) + _0x905807['id']); if (_0x4f5f84) _0x1887b0[_0xed22bd(0x12d)] = await _0xe16e6b(_0x4f5f84); const _0x34b6bb = [_0xed22bd(0x72b), _0xed22bd(0x901), _0xed22bd(0x98f), _0xed22bd(0xa39), 'shy']; for (const _0x2dfe58 of _0x34b6bb) { const _0x138186 = await _0x34b988(_0xed22bd(0x489) + _0x2dfe58 + '_' + _0x905807['id']); _0x138186 && (_0xed22bd(0x7c9) === _0xed22bd(0x985) ? _0x586c11(_0xed22bd(0x72c) + _0x505127[_0xed22bd(0x973)]) : _0x1887b0[_0xed22bd(0x2d1)][_0x2dfe58] = await _0xe16e6b(_0x138186)); } if (_0x905807['linkedWorldBookIds'] && _0x905807[_0xed22bd(0x859)][_0xed22bd(0x84b)] > 0x0) { if (_0xed22bd(0xaa0) === _0xed22bd(0xaa0)) _0x1887b0['worldBooks'] = _0x905807[_0xed22bd(0x859)][_0xed22bd(0x30c)](_0x204617 => _0x4025fd['worldBooks'][_0xed22bd(0x32b)](_0xe200e8 => _0xe200e8['id'] === _0x204617))[_0xed22bd(0x1f9)](Boolean)[_0xed22bd(0x30c)](_0x599c7f => ({ 'name': _0x599c7f['name'], 'content': _0x599c7f[_0xed22bd(0x9c6)] })); else { const _0x3fd4b3 = _0x1fe21a(_0x39753a[_0xed22bd(0xa4e)]); if (!_0x3fd4b3) return; _0x193eb5 = !![], _0x5ee19d['style'][_0xed22bd(0x6c5)] = 'block'; const _0x324308 = _0x3fd4b3['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; _0x28b01a[_0xed22bd(0x4b6)](_0xed22bd(0xa3a))['value'] = _0x324308['x'], _0x58a141['getElementById'](_0xed22bd(0x669))[_0xed22bd(0x95e)] = _0x324308['y'], _0x3d59b2[_0xed22bd(0x4b6)]('sprite-slider-scale')[_0xed22bd(0x95e)] = _0x324308[_0xed22bd(0x1c6)] * 0x64, _0x2c2c97 = { ..._0x324308 }, _0xd8d2fb[_0xed22bd(0x4b6)](_0xed22bd(0x99e))[_0xed22bd(0x636)]['display'] = _0xed22bd(0x55f), _0x390cd6[_0xed22bd(0x4b6)](_0xed22bd(0x33c))['style'][_0xed22bd(0x6c5)] = _0xed22bd(0x55f); } } const _0x781d = new Blob([JSON[_0xed22bd(0x49f)](_0x1887b0, null, 0x2)], { 'type': _0xed22bd(0x26b) }), _0x2e22c4 = URL[_0xed22bd(0x798)](_0x781d), _0x50063c = document[_0xed22bd(0x597)]('a'); _0x50063c['href'] = _0x2e22c4, _0x50063c[_0xed22bd(0x21d)] = _0x905807[_0xed22bd(0x5f1)] + _0xed22bd(0x277), document[_0xed22bd(0x9c2)]['appendChild'](_0x50063c), _0x50063c[_0xed22bd(0xab8)](), document[_0xed22bd(0x9c2)][_0xed22bd(0x2cb)](_0x50063c), URL[_0xed22bd(0x883)](_0x2e22c4); } catch (_0x18b4b5) { _0xed22bd(0x810) === _0xed22bd(0x5e4) ? _0x24497d['error'](_0xed22bd(0x990), _0x45aca8) : (console[_0xed22bd(0x963)](_0xed22bd(0x1cd), _0x18b4b5), _0x26f8b2('导出失败了，哼:\x20' + _0x18b4b5['message'])); } finally { _0x32d19f(![]); } } } async function _0x2ecfde(_0x32498f) { const _0x3993d5 = _0x2a98b7, _0x1ac5b2 = _0x32498f[_0x3993d5(0x492)][_0x3993d5(0x1f1)][0x0]; if (!_0x1ac5b2) return; _0x32d19f(!![], _0x3993d5(0x2b7)); const _0x1d345e = new FileReader(); _0x1d345e[_0x3993d5(0x422)] = async _0x403b84 => { const _0x23ce60 = _0x3993d5; try { const _0x54f0f1 = JSON[_0x23ce60(0x93f)](_0x403b84[_0x23ce60(0x492)][_0x23ce60(0x8e8)]); if (_0x54f0f1[_0x23ce60(0xaa2)] !== _0x23ce60(0x174)) throw new Error('这不是一张有效的Noir角色卡。'); const _0x70143a = []; if (_0x54f0f1[_0x23ce60(0xa3c)] && _0x54f0f1['worldBooks'][_0x23ce60(0x84b)] > 0x0) for (const _0xd3a788 of _0x54f0f1[_0x23ce60(0xa3c)]) { if (_0x23ce60(0x75d) !== _0x23ce60(0x140)) { let _0x18d571 = _0x4025fd[_0x23ce60(0xa3c)][_0x23ce60(0x32b)](_0x4be1d7 => _0x4be1d7[_0x23ce60(0x5f1)] === _0xd3a788['name']); if (_0x18d571) { if (_0x23ce60(0xac1) !== 'SGkvm') { if (!_0x435923[_0x23ce60(0x9b0)] || _0x45f5d1[_0x23ce60(0x9b0)][_0x23ce60(0x84b)] === 0x0) { _0x24bd9b[_0x23ce60(0x963)]('错误：你还没有创建任何好友圈。请先在App内创建一个。'); return; } const _0x26409c = _0x41dce1[_0x23ce60(0x9b0)][0x0]; if (_0x26409c['memberCharacterIds'][_0x23ce60(0x84b)] < 0x2) { _0x1166fa[_0x23ce60(0x963)](_0x23ce60(0x4f0) + _0x26409c[_0x23ce60(0x5f1)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } const _0x2d5bb4 = { 'id': 'test_post_' + _0x435b88[_0x23ce60(0x98c)](), 'authorType': _0x23ce60(0x5ef), 'authorId': _0x26409c[_0x23ce60(0x647)][0x0], 'content': _0x23ce60(0x266), 'timestamp': _0x1bd6f9['now'](), 'likes': [_0x26409c[_0x23ce60(0x647)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x1a5d88[_0x23ce60(0x98c)](), 'authorId': _0x26409c[_0x23ce60(0x647)][0x1], 'content': _0x23ce60(0x54a) }] }; _0x26409c[_0x23ce60(0x13e)][_0x23ce60(0x65b)](_0x2d5bb4), _0x16b8c6(), _0x48d4e1['log'](_0x23ce60(0x2b0) + _0x26409c['name'] + _0x23ce60(0x6b6)), _0x45b3b4(_0x23ce60(0x300)); } else _0x70143a['push'](_0x18d571['id']); } else { if ('BIDTG' !== 'BIDTG') try { const _0x834f23 = _0x4b219b[_0x23ce60(0x798)](_0x88f090), _0x5a6d = _0x23ce60(0x6a0), _0x591b71 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x5a6d + _0x23ce60(0xa1b) + _0x834f23 + _0x23ce60(0x4bc); _0x52755[_0x23ce60(0x3c8)] = _0x591b71, _0x31fbcd[_0x23ce60(0x196)][_0x23ce60(0x636)][_0x23ce60(0x6d0)](_0x23ce60(0x9d8), '\x27' + _0x5a6d + '\x27'), _0x31c9db[_0x23ce60(0xab3)] = _0x23ce60(0x661); } catch (_0x261607) { _0x161693['error'](_0x23ce60(0x852), _0x261607), _0x3cb248(_0x23ce60(0x6bc)); } else { const _0x18d927 = { 'id': _0x23ce60(0x514) + Date[_0x23ce60(0x98c)]() + '_' + Math[_0x23ce60(0x59e)](), 'name': _0xd3a788['name'], 'content': _0xd3a788[_0x23ce60(0x9c6)] }; _0x4025fd['worldBooks']['push'](_0x18d927), _0x70143a[_0x23ce60(0x65b)](_0x18d927['id']); } } } else _0x2c65df = _0x5a8eb7['name']; } const _0x5fb9e = _0x23ce60(0x5da) + Date['now'](), _0x51d675 = { 'id': _0x5fb9e, 'name': _0x54f0f1['name'], 'remark': _0x54f0f1[_0x23ce60(0x88f)] || '', 'persona': _0x54f0f1['persona'], 'avatar': _0x54f0f1['avatar'] || _0x535078, 'linkedWorldBookIds': _0x70143a, 'bubbleCss': _0x54f0f1[_0x23ce60(0x1db)] || '' }; if (_0x54f0f1['avatar']) { const _0xbe4941 = await _0x22dea8(_0x54f0f1[_0x23ce60(0x12d)]); await _0x5a7151(_0x23ce60(0x201) + _0x5fb9e, _0xbe4941); } if (_0x54f0f1[_0x23ce60(0x2d1)]) { if (_0x23ce60(0x47d) !== 'UQsqr') { const _0x216772 = _0x30961d['getElementById'](_0x1cdcd5); if (_0x216772 && _0xa26e6a) _0x216772[_0x23ce60(0x2fd)] = _0x4f40b1[_0x23ce60(0x798)](_0x16961d); } else for (const _0x39215b in _0x54f0f1[_0x23ce60(0x2d1)]) { if (_0x23ce60(0x700) === 'poHZf') _0x5657e2[_0x23ce60(0x636)][_0x23ce60(0x4b7)] = ''; else { const _0x48bef8 = _0x54f0f1['sprites'][_0x39215b], _0x16e45c = await _0x22dea8(_0x48bef8); await _0x5a7151(_0x23ce60(0x489) + _0x39215b + '_' + _0x5fb9e, _0x16e45c); } } } _0x4025fd[_0x23ce60(0x61c)][_0x23ce60(0x65b)](_0x51d675); const _0x21c3dc = { 'id': _0x23ce60(0x625) + _0x5fb9e, 'type': _0x23ce60(0x258), 'participantIds': [_0x5fb9e], 'boundUserProfileId': _0x4025fd['activeUserProfileId'] }; _0x4025fd[_0x23ce60(0x132)]['push'](_0x21c3dc), _0x33c083(), _0x56d0ee(), _0x26f8b2('“' + _0x51d675['name'] + _0x23ce60(0x2e5)); } catch (_0x169fee) { 'KbPEb' === _0x23ce60(0x235) ? (_0x2dc111['src'] = _0x4c1822[_0x23ce60(0x798)](_0x2e4c64), _0x42bb50[_0x23ce60(0x636)][_0x23ce60(0x81c)] = 0x1) : (console[_0x23ce60(0x963)](_0x23ce60(0x769), _0x169fee), _0x26f8b2(_0x23ce60(0x5ab) + _0x169fee[_0x23ce60(0x973)])); } finally { _0x32d19f(![]), _0x32498f[_0x23ce60(0x492)][_0x23ce60(0x95e)] = ''; } }, _0x1d345e[_0x3993d5(0x1d5)](_0x1ac5b2); } async function _0x5e38d2() { const _0xd35ce7 = _0x2a98b7, _0x6201b3 = _0x31c72a[_0xd35ce7(0x95e)]; let _0x494b9b = null; const _0x1fc7e3 = _0x92d973['files'][0x0], _0x247735 = _0x3c0d66[_0xd35ce7(0x1f1)][0x0], _0x3f5a0e = _0x552584[_0xd35ce7(0x1f1)][0x0], _0x479dbc = document['querySelectorAll'](_0xd35ce7(0x8e2)), _0x5dc10b = Array[_0xd35ce7(0x811)](_0x479dbc)['map'](_0x287b4b => _0x287b4b['value']), _0x21bb54 = { 'name': _0x1fc6de[_0xd35ce7(0x95e)][_0xd35ce7(0x345)](), 'remark': _0x1910dd[_0xd35ce7(0x95e)][_0xd35ce7(0x345)](), 'persona': _0x4aba4a[_0xd35ce7(0x95e)]['trim'](), 'linkedWorldBookIds': _0x5dc10b, 'boundUserProfileId': document[_0xd35ce7(0x4b6)]('char-edit-bind-user')[_0xd35ce7(0x95e)], 'bubbleCss': document[_0xd35ce7(0x4b6)]('char-edit-css')[_0xd35ce7(0x95e)][_0xd35ce7(0x345)]() }; if (!_0x21bb54[_0xd35ce7(0x5f1)]) { _0x26f8b2(_0xd35ce7(0x9f9)); return; } try { const _0x169cc5 = [_0xd35ce7(0x72b), _0xd35ce7(0x901), 'angry', 'sad', _0xd35ce7(0x374)]; if (_0x6201b3) { if (_0xd35ce7(0x805) === _0xd35ce7(0x805)) { const _0x39f1f1 = _0x4025fd[_0xd35ce7(0x61c)]['find'](_0x338b39 => _0x338b39['id'] === _0x6201b3); if (_0x39f1f1) { if ('GZdUE' === _0xd35ce7(0x4c9)) { Object['assign'](_0x39f1f1, _0x21bb54); if (_0x1fc7e3) _0x39f1f1[_0xd35ce7(0x12d)] = await _0x54e8ab(_0x1fc7e3); } else { _0x3cdc22[_0xd35ce7(0x3c8)] = _0xd35ce7(0xa30); return; } } if (_0x1fc7e3) await _0x5a7151(_0xd35ce7(0x201) + _0x6201b3, _0x1fc7e3); if (_0x247735) await _0x5a7151(_0xd35ce7(0x4c4) + _0x6201b3, _0x247735); if (_0x3f5a0e) await _0x5a7151(_0xd35ce7(0x54d) + _0x6201b3, _0x3f5a0e); for (const _0x2d6641 of _0x169cc5) { const _0x493d30 = document[_0xd35ce7(0x4b6)](_0xd35ce7(0x458) + _0x2d6641 + _0xd35ce7(0x46c))['files'][0x0]; if (_0x493d30) await _0x5a7151(_0xd35ce7(0x489) + _0x2d6641 + '_' + _0x6201b3, _0x493d30); } } else _0xee92cf[_0xd35ce7(0xab3)] = '▶'; } else { if ('vOVzH' !== 'euoXT') { _0x494b9b = _0xd35ce7(0x5da) + Date[_0xd35ce7(0x98c)](); const _0x9bf4b9 = { 'id': _0x494b9b, ..._0x21bb54 }; _0x9bf4b9[_0xd35ce7(0x12d)] = _0x1fc7e3 ? await _0x54e8ab(_0x1fc7e3) : _0x535078, _0x4025fd[_0xd35ce7(0x61c)][_0xd35ce7(0x65b)](_0x9bf4b9); const _0x369314 = { 'id': _0xd35ce7(0x625) + _0x494b9b, 'type': _0xd35ce7(0x258), 'participantIds': [_0x494b9b], 'boundUserProfileId': _0x21bb54[_0xd35ce7(0x774)], 'listenTogetherSession': null }; _0x4025fd[_0xd35ce7(0x132)][_0xd35ce7(0x65b)](_0x369314); if (_0x1fc7e3) await _0x5a7151('char_avatar_' + _0x494b9b, _0x1fc7e3); if (_0x247735) await _0x5a7151('char_wallpaper_' + _0x494b9b, _0x247735); if (_0x3f5a0e) await _0x5a7151(_0xd35ce7(0x54d) + _0x494b9b, _0x3f5a0e); for (const _0x3bd94d of _0x169cc5) { if (_0xd35ce7(0x2dc) === _0xd35ce7(0x2dc)) { const _0x2fa7a7 = document[_0xd35ce7(0x4b6)](_0xd35ce7(0x458) + _0x3bd94d + _0xd35ce7(0x46c))[_0xd35ce7(0x1f1)][0x0]; if (_0x2fa7a7) await _0x5a7151(_0xd35ce7(0x489) + _0x3bd94d + '_' + _0x494b9b, _0x2fa7a7); } else _0x1329cb[_0xd35ce7(0x9b0)] = _0x5f033b[_0xd35ce7(0x9b0)]['filter'](_0x4eb95c => _0x4eb95c['id'] !== _0x44ddea), _0x5d2293[_0xd35ce7(0x31a)] === _0x32d809 && (_0x2995ec[_0xd35ce7(0x31a)] = null), _0x3fb3e4(), _0x44485e(_0xd35ce7(0xa5e)), _0x2fe508(), _0xddaa0d(_0xd35ce7(0xabb), _0xd35ce7(0x2d8)); } } else { const _0x10c493 = _0x4a3fcc[_0xd35ce7(0x4b6)](_0xd35ce7(0x97d))[_0xd35ce7(0x95e)]; _0x10c493 && (_0x2986a6['activeUserProfileId'] = _0x10c493, _0x14b856(), _0x4b8f20(_0xd35ce7(0x38e)), _0x295f0c(), _0x2914af['getElementById'](_0xd35ce7(0x85d))['style']['display'] = 'none'); } } _0x33c083(), _0x56d0ee(), _0x26f8b2(_0xd35ce7(0x9a8)), _0x102967(_0xd35ce7(0x651), _0xd35ce7(0x1f3)); if (!_0x6201b3) { if (_0xd35ce7(0x6c8) !== _0xd35ce7(0x6c8)) { const _0x2f10ae = new _0x439c89(_0x18a32e[_0xd35ce7(0x36b)])['toLocaleTimeString'](_0xd35ce7(0x838), { 'hour': '2-digit', 'minute': _0xd35ce7(0x87a) }); _0x379abd[_0xd35ce7(0x9c6)] && _0x1f541c[_0xd35ce7(0x65b)]('[' + _0x2f10ae + _0xd35ce7(0x543) + _0x37ca96(_0x54b981) + ']\x20' + _0xad8e77(_0x422747[_0xd35ce7(0x9c6)])[_0xd35ce7(0x345)]()); } else { const _0x1bba8f = _0xd35ce7(0x625) + _0x494b9b; _0x1e0ed0(_0x1bba8f), _0x3ddb58(!![]); } } } catch (_0x12d17f) { console[_0xd35ce7(0x963)]('保存角色失败:', _0x12d17f), _0x26f8b2(_0xd35ce7(0x8ea) + _0x12d17f['message']); } } function _0x34e6c1() { const _0x236947 = _0x2a98b7; _0x38d478[_0x236947(0x95e)] = '', _0x4498ba['innerHTML'] = ''; if (_0x4025fd[_0x236947(0x61c)][_0x236947(0x84b)] < 0x2) { if (_0x236947(0x953) !== _0x236947(0x953)) _0x28d1dc[_0x236947(0xab3)] = _0x1dd368[_0x236947(0x811)](_0x39be5b)[_0x236947(0x30c)](_0x3f27f1 => _0x3f27f1[_0x236947(0x8a2)][_0x236947(0xab3)]['trim']())[_0x236947(0x602)]('、'); else { _0x26f8b2(_0x236947(0x447)); return; } } _0x4025fd[_0x236947(0x61c)][_0x236947(0x6ff)](_0x36feb1 => { const _0x540aba = _0x236947; if (_0x540aba(0xa76) !== _0x540aba(0xa76)) _0x2d17f6 = _0x5c955c; else { const _0x45830a = document[_0x540aba(0x597)]('li'); _0x45830a['className'] = _0x540aba(0x84a), _0x45830a[_0x540aba(0x3c8)] = _0x540aba(0x39b) + _0x36feb1['id'] + '\x22\x20data-id=\x22' + _0x36feb1['id'] + _0x540aba(0x26c) + (_0x36feb1[_0x540aba(0x12d)] || _0x535078) + _0x540aba(0x634) + _0x36feb1['id'] + _0x540aba(0x22a) + _0x36feb1[_0x540aba(0x5f1)] + _0x540aba(0x151), _0x4498ba[_0x540aba(0x329)](_0x45830a); } }), _0x102967('groupChatCreate', _0x236947(0x366)); } function _0x9d6d12() { const _0x32c299 = _0x2a98b7, _0xfaa920 = _0x38d478[_0x32c299(0x95e)]['trim'](); if (!_0xfaa920) { if (_0x32c299(0x3e6) === 'cDeGM') { _0x26f8b2(_0x32c299(0xac7)); return; } else { _0x5d83e1(_0x32c299(0x20a)); return; } } const _0x5c42cf = Array[_0x32c299(0x811)](_0x4498ba['querySelectorAll'](_0x32c299(0x970)))[_0x32c299(0x30c)](_0x337717 => _0x337717[_0x32c299(0x773)]['id']); if (_0x5c42cf[_0x32c299(0x84b)] < 0x2) { if (_0x32c299(0x4f6) !== 'bfHyb') { const _0x49f6b5 = _0x57612e[_0x32c299(0x597)]('p'); _0x49f6b5[_0x32c299(0xab3)] = _0x4eedb4['text'], _0x49f6b5['id'] = _0x32c299(0x392) + _0x4f9b73, _0x365b54[_0x32c299(0x329)](_0x49f6b5); } else { _0x26f8b2(_0x32c299(0x1b6)); return; } } const _0x7f1e0d = { 'id': _0x32c299(0xa6c) + Date[_0x32c299(0x98c)](), 'type': _0x32c299(0x1d3), 'name': _0xfaa920, 'participantIds': _0x5c42cf }; _0x4025fd['chats'][_0x32c299(0x65b)](_0x7f1e0d), _0x4025fd[_0x32c299(0xa4d)] = _0x7f1e0d['id'], _0x33c083(), _0x56d0ee(), _0x27a7c1(), _0x1c1a05(), _0x26f8b2(_0x32c299(0x2de) + _0xfaa920 + _0x32c299(0x640)), _0x102967('chat', _0x32c299(0x632)); } _0x5e9aaa[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x5a3372[_0x2a98b7(0xab8)]()), _0x139a48[_0x2a98b7(0x20b)]('click', _0x4bd9e1), _0x5a3372[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x30928b), _0x4c2fc9[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x15c93f), _0x117084[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x1c739a[_0x2a98b7(0x544)][_0x2a98b7(0x7f8)](_0x2a98b7(0x187))), _0x4438b6[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x1c739a['classList']['remove']('show')), _0x1785ed['addEventListener'](_0x2a98b7(0xab8), () => { const _0x15e689 = _0x2a98b7; _0x15e689(0xac4) !== _0x15e689(0xac4) ? _0x30f905['push'](_0x2d7922['id']) : (_0x31b588[_0x15e689(0x313)](), navigator[_0x15e689(0x400)][_0x15e689(0x8be)](_0x31b588[_0x15e689(0x95e)])[_0x15e689(0x4ea)](() => { const _0x16cbd1 = _0x15e689; _0x26f8b2(_0x16cbd1(0x46e)); })[_0x15e689(0x8ca)](_0x340239 => { const _0x400ae3 = _0x15e689; _0x26f8b2(_0x400ae3(0x238)); })); }), _0x277379[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x42812a), _0x5aadf6[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x611c2c), _0x7ac60[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0xd16b95['classList'][_0x2a98b7(0x7f8)]('show')), _0x19303f['addEventListener'](_0x2a98b7(0xab8), () => _0xd16b95['classList'][_0x2a98b7(0x7f8)](_0x2a98b7(0x187))), _0x9e5889[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x3c0d66[_0x2a98b7(0xab8)]()), _0x308fa1['addEventListener'](_0x2a98b7(0xab8), () => _0x552584[_0x2a98b7(0xab8)]()), _0x3c0d66['addEventListener'](_0x2a98b7(0x6a4), async _0x4c15af => { const _0x5cacc = _0x2a98b7; if (_0x5cacc(0x89d) === _0x5cacc(0x89d)) { const _0x26c354 = _0x4c15af[_0x5cacc(0x492)][_0x5cacc(0x1f1)][0x0]; if (!_0x26c354) return; try { _0x5cacc(0x603) === _0x5cacc(0x83c) ? (_0x4fb9bf[_0x5cacc(0x66c)]('好友圈净化完成，正在重新存档...'), _0x387d9a[_0x5cacc(0x5f0)](_0x5cacc(0xa8a), _0xca1c84[_0x5cacc(0x49f)](_0x22b297))) : _0x9e5889['src'] = await _0x54e8ab(_0x26c354); } catch (_0x31f2fb) { _0x26f8b2(_0x5cacc(0x72c) + _0x31f2fb[_0x5cacc(0x973)]); } } else _0x7388a9(_0x5cacc(0x164) + _0x5ab8b7['message']); }), _0x552584[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), async _0x3cb6fc => { const _0x43c1a0 = _0x2a98b7; if ('WVmpP' === _0x43c1a0(0x467)) _0x319ece[_0x43c1a0(0x636)]['backgroundImage'] = ''; else { const _0x2a73ef = _0x3cb6fc[_0x43c1a0(0x492)]['files'][0x0]; if (!_0x2a73ef) return; try { _0x308fa1[_0x43c1a0(0x2fd)] = await _0x54e8ab(_0x2a73ef); } catch (_0x4e86fb) { _0x26f8b2(_0x43c1a0(0x72c) + _0x4e86fb[_0x43c1a0(0x973)]); } } }), _0xb13c37[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x6016af['click']()), _0x380874[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x4334ce = _0x2a98b7; _0x4334ce(0x222) === _0x4334ce(0x222) ? (localStorage[_0x4334ce(0x6f1)](_0x4334ce(0x253)), _0x50605b(), _0x26f8b2(_0x4334ce(0x217))) : _0x40e33e = _0x423271[_0x4334ce(0x146)][_0x4334ce(0x5f1)] || '我'; }), _0x6016af[_0x2a98b7(0x20b)]('change', async _0x211b8c => { const _0x43cfbf = _0x2a98b7, _0x4a23ce = _0x211b8c[_0x43cfbf(0x492)][_0x43cfbf(0x1f1)][0x0]; if (!_0x4a23ce) return; try { const _0x5b5914 = await _0x54e8ab(_0x4a23ce); localStorage[_0x43cfbf(0x5f0)]('customFeedWallpaper', _0x5b5914), _0x50605b(), _0x26f8b2(_0x43cfbf(0x4d5)); } catch (_0x4c5b2e) { _0x26f8b2(_0x43cfbf(0x72c) + _0x4c5b2e[_0x43cfbf(0x973)]); } }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3c4))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967(_0x2a98b7(0x651), _0x2a98b7(0x655))), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x48c))[_0x2a98b7(0x20b)]('click', _0x3f139a); const _0x49eba0 = document[_0x2a98b7(0x4b6)]('group-avatar-preview'), _0x3de558 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x8a8)); _0x49eba0[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x3de558[_0x2a98b7(0xab8)]()), _0x3de558[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x1dab33 => { const _0x3a025a = _0x2a98b7; if ('itybd' === _0x3a025a(0x276)) { const _0x14a1a5 = _0x1dab33['target']['files'][0x0]; if (!_0x14a1a5) return; const _0xe1ff51 = URL[_0x3a025a(0x798)](_0x14a1a5); _0x49eba0['src'] = _0xe1ff51, _0x49eba0['onload'] = () => { URL['revokeObjectURL'](_0xe1ff51); }; } else _0x211928[_0x3a025a(0x636)][_0x3a025a(0xab7)] = _0x16159c[_0x3a025a(0xab7)] + '%', _0x23e767[_0x3a025a(0x636)]['left'] = _0x9f80ad[_0x3a025a(0x5bb)] + '%'; }); const _0x1dfbb0 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x274))['parentElement'], _0x5a4dc7 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1fe)), _0x52dc5c = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x274)); _0x1dfbb0[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x5a4dc7[_0x2a98b7(0xab8)]()), _0x5a4dc7['addEventListener'](_0x2a98b7(0x6a4), _0x12a490 => { const _0xa190d6 = _0x2a98b7, _0x30e8d2 = _0x12a490[_0xa190d6(0x492)]['files'][0x0]; if (!_0x30e8d2) return; const _0x1bd97f = URL[_0xa190d6(0x798)](_0x30e8d2); _0x52dc5c[_0xa190d6(0x2fd)] = _0x1bd97f, _0x52dc5c[_0xa190d6(0x422)] = () => { const _0x43f85a = _0xa190d6; 'vNwRY' !== _0x43f85a(0x1c3) ? _0xe69e78 = 'vertical' : URL[_0x43f85a(0x883)](_0x1bd97f); }; }); const _0x5a7001 = document[_0x2a98b7(0x6f8)]('#group-settings-screen\x20.select-box'), _0x46e104 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x25b)); _0x5a7001[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x5aca7b => { const _0x4a7e2d = _0x2a98b7; _0x5aca7b[_0x4a7e2d(0x870)](), _0x46e104[_0x4a7e2d(0x544)][_0x4a7e2d(0x83f)]('visible'), _0x5a7001[_0x4a7e2d(0x544)][_0x4a7e2d(0x83f)]('expanded'); }), _0x46e104[_0x2a98b7(0x20b)]('change', _0x50b027), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3cf))[_0x2a98b7(0x20b)]('click', _0x73fea2), document[_0x2a98b7(0x4b6)]('group-delete-button')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), async () => { const _0x62d0c = _0x2a98b7, _0x140405 = _0xba11a1(); if (!_0x140405 || _0x140405['type'] !== _0x62d0c(0x1d3)) return; const _0xd2a7b5 = await _0x2f2e39(_0x62d0c(0x25e) + _0x140405[_0x62d0c(0x5f1)] + _0x62d0c(0x62b)); if (_0xd2a7b5) { if ('kawYE' !== _0x62d0c(0x6da)) { if (_0x14e578 === null) return; _0x2f7400[_0x62d0c(0x24a)][_0x62d0c(0x31d)](_0x2e5937, 0x1), _0x52a83e(), _0x3bee64(), _0x21fd39(); } else _0x471182(_0x140405['id']), _0x26f8b2('群聊已解散。'), _0x102967(_0x62d0c(0x651)), _0x3ddb58(![]); } }); const _0x5382b0 = document[_0x2a98b7(0x6f8)](_0x2a98b7(0x9fc)), _0x2d1e0c = document[_0x2a98b7(0x4b6)]('world-book-checkboxes-container'); _0x5382b0[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0xaf5559 => { const _0x49b2d2 = _0x2a98b7; if (_0x49b2d2(0x2cf) === _0x49b2d2(0x2cf)) _0xaf5559[_0x49b2d2(0x870)](), _0x2d1e0c['classList'][_0x49b2d2(0x83f)](_0x49b2d2(0x208)), _0x5382b0['classList']['toggle'](_0x49b2d2(0x386)); else { _0x348195[_0x49b2d2(0x255)] = [..._0x232d16]; const _0x5e8960 = _0x4e8616[_0x49b2d2(0x255)]['shift'](); _0x3b6402['textContent'] = _0x5e8960[_0x49b2d2(0x681)] === _0x49b2d2(0x6fc) ? '旁白' : _0x5e8960[_0x49b2d2(0x681)], _0x996c90[_0x49b2d2(0xab3)] = _0x5e8960[_0x49b2d2(0x3e3)], _0x5e8960[_0x49b2d2(0x681)] !== _0x49b2d2(0x6fc) && _0x243e17(_0x4a21b4['activeMeetingCharId'], _0x5e8960[_0x49b2d2(0xa55)]); } }), _0x2d1e0c[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x32cc95), document[_0x2a98b7(0x20b)]('click', _0x19fa8f => { const _0x26aea1 = _0x2a98b7; _0x26aea1(0x9cf) !== _0x26aea1(0x1bd) ? !document[_0x26aea1(0x6f8)]('.custom-multiselect')[_0x26aea1(0x61a)](_0x19fa8f[_0x26aea1(0x492)]) && (_0x26aea1(0x7f2) === _0x26aea1(0x3a8) ? (_0x18b628 += _0x26aea1(0x403) + _0x3659f2[_0x26aea1(0xa50)] + _0x26aea1(0x589) + _0x120871[_0x26aea1(0x41b)] + _0x26aea1(0x96c), _0x3063c0[_0x26aea1(0x66c)] && _0x26a477[_0x26aea1(0x5f8)](_0x58f150[_0x26aea1(0x66c)]) && (_0x14a1fb += '\x20\x20具体对话如下：\x0a', _0x115193[_0x26aea1(0x66c)][_0x26aea1(0x6ff)](_0x29d907 => { const _0x3ab05c = _0x26aea1, _0x4b8514 = _0x29d907[_0x3ab05c(0x80f)] === 'character' ? '你' : _0x142699[_0x3ab05c(0xa50)]; _0x23e9fe += _0x3ab05c(0x232) + _0x4b8514 + ':\x20' + _0x29d907['content'] + '\x0a'; }))) : (_0x2d1e0c[_0x26aea1(0x544)][_0x26aea1(0x7f8)](_0x26aea1(0x208)), _0x5382b0[_0x26aea1(0x544)][_0x26aea1(0x7f8)]('expanded'))) : _0x5b5c16 = _0x26aea1(0x8f8) + _0x296cc4 + _0x26aea1(0x9bc); }), _0x281e97['addEventListener']('click', () => { const _0x2fd2a1 = _0x2a98b7; if (_0x2fd2a1(0x50a) !== _0x2fd2a1(0x284)) _0x33c7f0(), _0x102967('worldBook', _0x2fd2a1(0x786)); else { const _0x16587e = _0x2a702d['createElement']('p'); _0x16587e[_0x2fd2a1(0x636)][_0x2fd2a1(0x395)] = _0x2fd2a1(0x9a1), _0x16587e[_0x2fd2a1(0xab3)] = _0x1a6f14, _0xc91734['appendChild'](_0x16587e); } }), document['getElementById']('back-to-home-from-world-book')['addEventListener'](_0x2a98b7(0xab8), () => _0x102967(_0x2a98b7(0x786), _0x2a98b7(0x6a3))), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x9af))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x5c1228()), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x8fe))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x3b4eca = _0x2a98b7; _0x3b4eca(0x338) === 'TDuiv' ? (_0x33c7f0(), _0x102967(_0x3b4eca(0x6a3), 'worldBookEditor')) : _0x1ef18d[_0x3b4eca(0x4b6)](_0x3b4eca(0x1df))['click'](); }), document['getElementById']('save-world-book-button')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x432937), document['getElementById']('delete-world-book-button')['addEventListener']('click', _0x45c54c), _0x163b59[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967('wallpaper', _0x2a98b7(0x786))), _0x573de6['addEventListener'](_0x2a98b7(0xab8), () => _0x102967('home', 'wallpaper')), _0x1b2695[_0x2a98b7(0x20b)]('click', () => _0x3135a2['click']()), _0x3135a2[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), async _0x3fa3a1 => { const _0x2e2ad2 = _0x2a98b7; if (_0x2e2ad2(0x243) === 'hKAlC') _0x1625d7['friendCircles'] = _0x4329b8['friendCircles'], _0x44d771[_0x2e2ad2(0x31a)] = _0x30ff15['activeFriendCircleId']; else { const _0x582948 = _0x3fa3a1[_0x2e2ad2(0x492)][_0x2e2ad2(0x1f1)][0x0]; if (!_0x582948) return; await _0xab0ba6(_0x582948); } }), _0x2dc0a1['addEventListener'](_0x2a98b7(0xab8), () => { const _0x5a1fbe = _0x2a98b7; _0x56d0ee(), _0x102967(_0x5a1fbe(0x651), _0x5a1fbe(0x786)); }), _0x5c511b['addEventListener'](_0x2a98b7(0xab8), () => { const _0x5e2592 = _0x2a98b7; _0x3e4887(); const _0x2a22e4 = (_0x4025fd[_0x5e2592(0x2c2)][_0x5e2592(0x3c2)] || '')[_0x5e2592(0x9f1)](_0xe7edb9); _0x2e9d1a['disabled'] = _0x2a22e4, _0x102967(_0x5e2592(0x4ab), _0x5e2592(0x786)); }), _0x13d9c3['addEventListener'](_0x2a98b7(0xab8), () => _0x102967('home', _0x2a98b7(0x4ab))), _0x227ec7[_0x2a98b7(0x20b)]('click', () => { const _0x136dff = _0x2a98b7; _0x47d03a(), _0x102967(_0x136dff(0x786), _0x136dff(0x651)); }), _0x372f61[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { _0x47d03a(), _0x3ddb58(![]); }), _0x7de43c[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x308418 = _0x2a98b7; _0x102967(_0x308418(0x651), _0x308418(0x1f3)); }), _0x3919f7['addEventListener'](_0x2a98b7(0xab8), () => { const _0x104562 = _0x2a98b7; _0x27835f[_0x104562(0x544)][_0x104562(0x82e)](_0x104562(0x187)); }), _0x167b2f[_0x2a98b7(0x20b)]('click', () => _0x4d26ec()), _0x19f6ec[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x4e1acc); function _0x464893(_0x505cd5) { const _0x53f047 = _0x2a98b7; if (!_0x505cd5 || _0x505cd5['type'] !== _0x53f047(0x1d3)) return; const _0x3a2efa = _0x53f047(0x249); document[_0x53f047(0x9c2)]['insertAdjacentHTML'](_0x53f047(0x6a2), _0x3a2efa); const _0x4c5d45 = document[_0x53f047(0x4b6)](_0x53f047(0x1fa)), _0x162be0 = _0x4c5d45[_0x53f047(0x6f8)](_0x53f047(0x31f)), _0x327464 = document[_0x53f047(0x4b6)](_0x53f047(0x3b0)), _0x24a11b = document[_0x53f047(0x4b6)](_0x53f047(0x411)), _0x1ab02d = document[_0x53f047(0x4b6)]('group-edit-name'), _0x3db17c = document[_0x53f047(0x4b6)](_0x53f047(0x730)), _0x58e69f = document[_0x53f047(0x4b6)](_0x53f047(0x281)), _0x150c71 = () => _0x4c5d45[_0x53f047(0x7f8)](); _0x327464['addEventListener'](_0x53f047(0xab8), async () => { const _0xadeb84 = _0x53f047; _0x150c71(); const _0x142cc9 = await _0x2f2e39('确定要清空群聊\x22' + _0x505cd5[_0xadeb84(0x5f1)] + _0xadeb84(0x998)); if (_0x142cc9) { _0x505cd5['id'] === _0x4025fd[_0xadeb84(0xa4d)] && (_0x47d03a(), _0x4025fd[_0xadeb84(0x24a)] = [], _0x21e41c()); try { localStorage[_0xadeb84(0x6f1)](_0xadeb84(0x8ab) + _0x505cd5['id']), _0x26f8b2('群聊\x22' + _0x505cd5['name'] + _0xadeb84(0x726)); } catch (_0x4a41e8) { console['error'](_0xadeb84(0x8b0) + _0x505cd5['id'], _0x4a41e8), _0x26f8b2(_0xadeb84(0x294)); } } }), _0x24a11b[_0x53f047(0x20b)]('click', () => { const _0x395061 = _0x53f047; _0x150c71(), _0x26f8b2(_0x395061(0x532)); }), _0x1ab02d[_0x53f047(0x20b)](_0x53f047(0xab8), async () => { const _0x108b33 = _0x53f047; _0x150c71(); const _0x56d98b = prompt(_0x108b33(0xa82), _0x505cd5[_0x108b33(0x5f1)]); _0x56d98b && _0x56d98b['trim']() && _0x56d98b !== _0x505cd5['name'] && (_0x505cd5[_0x108b33(0x5f1)] = _0x56d98b[_0x108b33(0x345)](), _0x33c083(), _0x56d0ee(), _0x27a7c1(), _0x26f8b2(_0x108b33(0x23a) + _0x505cd5[_0x108b33(0x5f1)] + '\x22。')); }), _0x3db17c['addEventListener'](_0x53f047(0xab8), async () => { const _0x5d4c69 = _0x53f047; _0x150c71(); const _0x404dec = await _0x2f2e39(_0x5d4c69(0x770) + _0x505cd5[_0x5d4c69(0x5f1)] + _0x5d4c69(0x69d)); _0x404dec && (_0x471182(_0x505cd5['id']), _0x26f8b2(_0x5d4c69(0x17e) + _0x505cd5['name'] + _0x5d4c69(0x77d)), _0x3ddb58(![])); }), _0x162be0[_0x53f047(0x20b)]('click', _0x150c71), _0x58e69f[_0x53f047(0x20b)]('click', _0x150c71); } _0x4c8707[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x526622 = _0x2a98b7; if ('lJTOW' === _0x526622(0x210)) { _0x429fa5(_0x526622(0x91e) + _0x42697b + _0x526622(0x60f)), _0xe67b75(() => _0x341cac[_0x526622(0x1de)](), 0x5dc); return; } else { const _0x57d64d = _0xba11a1(); if (_0x57d64d && _0x57d64d[_0x526622(0xaa2)] === _0x526622(0x258)) 'ZYUuN' !== 'qTqUS' ? _0x3c19d1(_0x57d64d[_0x526622(0x2db)][0x0]) : (_0xa67c4(_0x2ddafb), _0x4429e1[_0x526622(0x95e)] = '', _0x5b9f2a(_0x163a65, 0x64)); else _0x57d64d && _0x57d64d[_0x526622(0xaa2)] === _0x526622(0x1d3) && _0x590517(_0x57d64d['id']); } }), _0x547059['addEventListener'](_0x2a98b7(0x7d9), _0x8e8751 => { const _0x4c06bd = _0x2a98b7; _0x8e8751[_0x4c06bd(0xa7f)] === 'Enter' && !_0x8e8751[_0x4c06bd(0x8c9)] && (_0x8e8751[_0x4c06bd(0x3e5)](), _0x4d26ec()); }); const _0x1c3935 = () => _0x27835f['classList'][_0x2a98b7(0x7f8)](_0x2a98b7(0x187)); _0x2803b3[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x1c3935), _0x14e9f8[_0x2a98b7(0x20b)]('click', _0x1c3935), _0x133b9f[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { _0x1c3935(), _0x3c19d1(); }), _0x22dec1[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { _0x1c3935(), _0x34e6c1(); }), _0xc62e1e[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x175540 = _0x2a98b7; _0x102967(_0x175540(0x651), _0x175540(0x632)), _0x3ddb58(![]); }), _0x3c374a[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x9d6d12), _0x5ee179[_0x2a98b7(0x20b)]('click', () => { const _0x10573c = _0x2a98b7; _0x56c998[_0x10573c(0x544)][_0x10573c(0x83f)](_0x10573c(0x187)), _0x56c998['classList'][_0x10573c(0x61a)](_0x10573c(0x187)) && (_0x35c8dd[_0x10573c(0x3ce)] = _0x35c8dd[_0x10573c(0x650)]); }), _0x3b8315[_0x2a98b7(0x20b)]('click', () => _0x3eb617[_0x2a98b7(0xab8)]()); const _0x251773 = document['getElementById'](_0x2a98b7(0x743)); _0x3eb617[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), _0x8a68c1), _0x251773[_0x2a98b7(0x20b)]('click', _0x246f80), _0x1c36bc[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x2d807e), _0x2bc55f[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x58b533), _0x19f484[_0x2a98b7(0x20b)]('click', _0x5e38d2), _0x2712fe[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x73fea2), _0x43540c['addEventListener'](_0x2a98b7(0xab8), async () => { const _0x15da3f = _0x2a98b7; if (_0x15da3f(0x66b) !== _0x15da3f(0xa10)) { const _0x1ceae2 = _0x31c72a[_0x15da3f(0x95e)]; if (!_0x1ceae2) return; const _0x4e72de = _0x389a36(_0x1ceae2); if (!_0x4e72de) return; const _0x3ece58 = await _0x2f2e39(_0x15da3f(0x1bf) + _0x4e72de[_0x15da3f(0x5f1)] + _0x15da3f(0x181)); if (_0x3ece58) { if (_0x15da3f(0x69a) !== 'OzeFs') _0x433580(_0x1ceae2), _0x26f8b2(_0x15da3f(0x6b2) + _0x4e72de[_0x15da3f(0x5f1)] + '”已删除。'), _0x102967('chat', 'characterEdit'), _0x3ddb58(![]); else return new _0x308c51(_0x171fa4 => { const _0x55e254 = _0x15da3f, _0x30783b = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x113c3e['body'][_0x55e254(0x44b)](_0x55e254(0x6a2), _0x30783b); const _0x2c62ee = _0xc0b9d1['getElementById'](_0x55e254(0x51f)), _0x1c7323 = _0x330129[_0x55e254(0x4b6)](_0x55e254(0x321)), _0x245a10 = _0x287428[_0x55e254(0x4b6)]('diary-modal-save'), _0x41aa0e = _0x44a300[_0x55e254(0x4b6)](_0x55e254(0x23b)), _0x515ef1 = _0x2c62ee[_0x55e254(0x6f8)](_0x55e254(0x31f)), _0xc6a411 = () => { const _0x5eba8d = _0x55e254; _0x2c62ee[_0x5eba8d(0x7f8)](), _0x171fa4(); }; _0x245a10[_0x55e254(0x4a6)] = () => { const _0x243acf = _0x55e254; _0x825ff5(_0x1c7323[_0x243acf(0x95e)]), _0xc6a411(); }, _0x41aa0e[_0x55e254(0x4a6)] = _0xc6a411, _0x515ef1[_0x55e254(0x4a6)] = _0xc6a411; }); } } else _0x2e5a82(), _0x2242f1('snoopList', _0x15da3f(0x786)); }), _0x4b158a[_0x2a98b7(0x20b)]('input', () => { const _0x5bcf8e = _0x2a98b7; if (_0x5bcf8e(0x286) === _0x5bcf8e(0x286)) { const _0x437bb2 = _0x4b158a['value']['trim']()[_0x5bcf8e(0x9f1)](_0xe7edb9); _0x2e9d1a[_0x5bcf8e(0xa7e)] = _0x437bb2; } else { const _0x111218 = _0x188c8f[_0x5bcf8e(0x597)](_0x5bcf8e(0x80e)); _0x111218[_0x5bcf8e(0x575)] = _0x5bcf8e(0x8fc), _0x111218[_0x5bcf8e(0x773)]['id'] = _0x583460['id'], _0x111218[_0x5bcf8e(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0xb8b42f['name'] + _0x5bcf8e(0x340) + _0x2b0772[_0x5bcf8e(0x9c6)][_0x5bcf8e(0xa4a)](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20', _0x111218[_0x5bcf8e(0x20b)](_0x5bcf8e(0xab8), () => _0x353791(_0x11da44['id'])), _0x752bfa['appendChild'](_0x111218); } }); async function _0x499f08() { const _0x56f57a = _0x2a98b7; if (_0x56f57a(0x1e1) === 'FrZGw') { const _0x147685 = _0x4b158a['value'][_0x56f57a(0x345)](), _0x296df7 = _0x32ed71[_0x56f57a(0x95e)][_0x56f57a(0x345)](); if (!_0x147685 || !_0x296df7) { _0x26f8b2(_0x56f57a(0x5e7)); return; } const _0x282882 = _0x147685[_0x56f57a(0x829)](/\/+$/, ''), _0xe633f1 = _0x282882 + '/v1/models'; _0x2e9d1a['disabled'] = !![], _0x2e9d1a[_0x56f57a(0xab3)] = _0x56f57a(0x4ac), _0x5b1da3['classList'][_0x56f57a(0x7f8)](_0x56f57a(0x187)); try { const _0x3cf1de = await fetch(_0xe633f1, { 'headers': { 'Authorization': _0x56f57a(0x199) + _0x554a90(_0x296df7) } }); if (!_0x3cf1de['ok']) throw new Error(_0x56f57a(0x839) + _0x3cf1de[_0x56f57a(0x4ae)]); const _0x15a89f = await _0x3cf1de[_0x56f57a(0x567)](), _0x13d30a = (_0x15a89f[_0x56f57a(0x822)] || _0x15a89f)['map'](_0x24f392 => _0x24f392['id'])[_0x56f57a(0x419)](); _0x13d30a['length'] > 0x0 ? _0x56f57a(0x7a0) === _0x56f57a(0x7a0) ? (_0x5b1da3[_0x56f57a(0x3c8)] = '', _0x13d30a[_0x56f57a(0x6ff)](_0x525e6c => { const _0x4e528c = _0x56f57a; if (_0x4e528c(0x7aa) !== _0x4e528c(0x563)) { const _0x27ac40 = document['createElement']('div'); _0x27ac40['textContent'] = _0x525e6c, _0x27ac40[_0x4e528c(0x20b)](_0x4e528c(0xab8), () => { const _0x3f1137 = _0x4e528c; _0x283a74[_0x3f1137(0x95e)] = _0x525e6c, _0x5b1da3[_0x3f1137(0x544)]['remove']('show'); }), _0x5b1da3[_0x4e528c(0x329)](_0x27ac40); } else { const _0x536654 = _0x182548(_0x5b9936[_0x4e528c(0x3fa)]())[_0x4e528c(0x412)](0x2, '0'), _0x557ac0 = _0x5ad273(_0x4d19ff[_0x4e528c(0x24d)]())[_0x4e528c(0x412)](0x2, '0'); _0x2725c2[_0x4e528c(0xab3)] = _0x536654 + ':' + _0x557ac0; const _0x5efc84 = _0x3a156a[_0x4e528c(0x720)]() + 0x1, _0x3bd01f = _0x255a15[_0x4e528c(0x1f6)](), _0x4582ac = ['星期日', _0x4e528c(0x8bb), _0x4e528c(0x671), _0x4e528c(0x410), _0x4e528c(0x145), _0x4e528c(0x79c), _0x4e528c(0x923)][_0x23e1a2['getDay']()]; _0x3b88cc[_0x4e528c(0xab3)] = _0x5efc84 + '月' + _0x3bd01f + '日\x20' + _0x4582ac; } }), _0x5b1da3[_0x56f57a(0x544)][_0x56f57a(0x82e)](_0x56f57a(0x187)), _0x26f8b2(_0x56f57a(0x435) + _0x13d30a[_0x56f57a(0x84b)] + _0x56f57a(0x55d))) : _0xa63a33 += _0x56f57a(0x9b9) + _0x5a4948[_0x56f57a(0x466)] + _0x56f57a(0x6c6) + _0x16e8a2['activity_description'] + '”。\x0a' : _0x26f8b2('未找到可用模型。'); } catch (_0x588f60) { if (_0x56f57a(0x523) === _0x56f57a(0x55e)) { const _0x2a1800 = _0x505d11[_0x56f57a(0x32b)](_0x29a783 => _0x29a783[_0x56f57a(0x5f1)] === _0x594af2[_0x56f57a(0x8e3)]); if (_0x2a1800) { const _0x5d8fc2 = { 'role': _0x56f57a(0x135), 'content': _0x56f57a(0x77b) + _0x2a1800[_0x56f57a(0x5f1)] + ']', 'displayUrl': _0x2a1800[_0x56f57a(0x13f)], 'senderId': _0x4f2edd['senderId'], 'timestamp': _0x27917d[_0x56f57a(0x98c)](), 'isOffline': _0x3ee38e }; _0x3bdf28[_0x56f57a(0x24a)][_0x56f57a(0x65b)](_0x5d8fc2); } } else _0x26f8b2(_0x56f57a(0x9b1) + _0x588f60[_0x56f57a(0x973)] + _0x56f57a(0x713)); } finally { if (_0x56f57a(0xa08) === _0x56f57a(0x451)) { const _0x43bc6e = _0x19f581['split']('--'); _0x43bc6e[_0x56f57a(0x84b)] === 0x2 && _0x43bc6e[0x0][_0x56f57a(0x345)]() && _0x43bc6e[0x1]['trim']()[_0x56f57a(0x914)](_0x56f57a(0x9e1)) ? _0x4bc8cb[_0x56f57a(0x65b)]({ 'name': _0x43bc6e[0x0]['trim'](), 'url': _0x43bc6e[0x1][_0x56f57a(0x345)]() }) : _0x36bf4d++; } else _0x2e9d1a['disabled'] = ![], _0x2e9d1a['textContent'] = '获取'; } } else _0x268280['push'](_0x5cf4b4); } _0x2e9d1a[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x3a5991 => { const _0x3876dd = _0x2a98b7; if ('UdDTM' === 'FapFu') { const _0x3c2e43 = _0x5c8b7c === _0x5974dd ? _0x3876dd(0x51e) : ''; return '' + _0x3c2e43 + _0x3f83ed[_0x3876dd(0xa20)]; } else _0x3a5991[_0x3876dd(0x870)](), _0x499f08(); }), document[_0x2a98b7(0x20b)]('click', _0x5a07f6 => { const _0x5be67c = _0x2a98b7; !_0x5b1da3['contains'](_0x5a07f6[_0x5be67c(0x492)]) && _0x5a07f6[_0x5be67c(0x492)] !== _0x283a74 && _0x5a07f6[_0x5be67c(0x492)] !== _0x2e9d1a && _0x5b1da3[_0x5be67c(0x544)][_0x5be67c(0x7f8)](_0x5be67c(0x187)); }); async function _0x54e8ab(_0x3b355a) { return await _0x245ee4(_0x3b355a, 0x190, 0.85); } _0x5cb2f2[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x2c9271[_0x2a98b7(0xab8)]()), _0x2c9271['addEventListener']('change', async _0x562462 => { const _0xde285f = _0x2a98b7, _0x44cff4 = _0x562462[_0xde285f(0x492)][_0xde285f(0x1f1)][0x0]; if (!_0x44cff4) return; try { const _0x4ee5e5 = await _0x54e8ab(_0x44cff4); _0x5cb2f2[_0xde285f(0x2fd)] = _0x4ee5e5; } catch (_0x3ef0b2) { _0x26f8b2(_0xde285f(0x72c) + _0x3ef0b2['message']); } }), _0x1bdd67[_0x2a98b7(0x20b)]('click', () => _0x92d973[_0x2a98b7(0xab8)]()), _0x92d973[_0x2a98b7(0x20b)]('change', async _0x63b174 => { const _0x2bb753 = _0x2a98b7, _0x3506f0 = _0x63b174['target'][_0x2bb753(0x1f1)][0x0]; if (!_0x3506f0) return; try { _0x1bdd67[_0x2bb753(0x2fd)] = await _0x54e8ab(_0x3506f0); } catch (_0x35fd78) { _0x26f8b2(_0x2bb753(0x72c) + _0x35fd78[_0x2bb753(0x973)]); } }); function _0x120277() { const _0x46eae7 = _0x2a98b7; if (_0x46eae7(0x331) !== _0x46eae7(0x331)) { _0x43a96b[_0x46eae7(0x3c8)] = _0x46eae7(0xa16), _0x497575['innerHTML'] = ''; return; } else _0x56c998[_0x46eae7(0x3c8)] = '', _0x288407[_0x46eae7(0x6ff)](_0x32997e => { const _0x239e97 = _0x46eae7, _0x1a5dee = document[_0x239e97(0x597)](_0x239e97(0x1d1)); _0x1a5dee[_0x239e97(0x2fd)] = _0x32997e[_0x239e97(0x13f)], _0x1a5dee['loading'] = 'lazy', _0x1a5dee[_0x239e97(0x9ab)] = _0x32997e['name'], _0x1a5dee[_0x239e97(0x544)][_0x239e97(0x82e)](_0x239e97(0x9ba)), _0x1a5dee[_0x239e97(0x20b)]('click', () => _0xac5cdb(_0x32997e)), _0x56c998[_0x239e97(0x329)](_0x1a5dee); }); } function _0x2b384f() { const _0x868018 = _0x2a98b7, _0x510791 = document[_0x868018(0x4b6)]('user-profile-list-container'); _0x510791[_0x868018(0x3c8)] = ''; if (_0x4025fd[_0x868018(0x293)][_0x868018(0x84b)] === 0x0) { _0x510791[_0x868018(0x3c8)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>'; return; } _0x4025fd['userProfiles'][_0x868018(0x6ff)](_0x3d0124 => { const _0xc77a35 = _0x868018; if (_0xc77a35(0x2b4) !== _0xc77a35(0x2b4)) { if (_0x20634b[_0xc77a35(0x1ce)] === _0xc77a35(0x135)) { const _0x51016b = _0xf013a2[_0xc77a35(0x3f4)][_0x1e7b80]; _0x51016b && _0x51016b['length'] > 0x0 && (_0x2243ca = _0x51016b['at'](-0x1)); } else _0xd74137 = { 'speaker': _0x5a6723[_0xc77a35(0x5f1)], 'line': _0x26747b['content'], 'emotion': _0xc77a35(0x72b) }; } else { const _0x43c6cb = document[_0xc77a35(0x597)](_0xc77a35(0x80e)); _0x43c6cb[_0xc77a35(0x575)] = _0xc77a35(0x8fc), _0x43c6cb[_0xc77a35(0x773)]['id'] = _0x3d0124['id']; const _0x1c0465 = _0x3d0124['id'] === _0x4025fd['activeUserProfileId'] ? _0xc77a35(0x551) : ''; _0x43c6cb[_0xc77a35(0x3c8)] = _0xc77a35(0x2ba) + (_0x3d0124[_0xc77a35(0x12d)] || _0x2430ff) + _0xc77a35(0x841) + _0x3d0124[_0xc77a35(0x5f1)] + _0x1c0465 + _0xc77a35(0x975) + _0x3d0124[_0xc77a35(0x8ad)][_0xc77a35(0xa4a)](0x0, 0x64) + _0xc77a35(0x3d9), _0x43c6cb[_0xc77a35(0x20b)]('click', () => _0xfd5d38(_0x3d0124['id'])), _0x510791[_0xc77a35(0x329)](_0x43c6cb); } }); } function _0xfd5d38(_0x85c1c1 = null) { const _0x41bada = _0x2a98b7; _0x102967(_0x41bada(0x146), 'userProfileList'); const _0x38c8f0 = document[_0x41bada(0x4b6)]('set-active-user-button'); if (_0x85c1c1) { if (_0x41bada(0x3ca) !== _0x41bada(0x136)) { const _0x393463 = _0x4025fd['userProfiles'][_0x41bada(0x32b)](_0x597b03 => _0x597b03['id'] === _0x85c1c1); if (!_0x393463) return; document[_0x41bada(0x4b6)](_0x41bada(0x97d))[_0x41bada(0x95e)] = _0x393463['id'], document['getElementById']('user-profile-edit-title')[_0x41bada(0xab3)] = '编辑用户', document[_0x41bada(0x4b6)](_0x41bada(0x7bc))[_0x41bada(0x95e)] = _0x393463[_0x41bada(0x5f1)], document['getElementById'](_0x41bada(0x750))['src'] = _0x393463['avatar'], document[_0x41bada(0x4b6)](_0x41bada(0x712))['value'] = _0x393463[_0x41bada(0x8ad)], _0x38c8f0[_0x41bada(0x636)][_0x41bada(0x6c5)] = _0x393463['id'] === _0x4025fd[_0x41bada(0x4a1)] ? 'none' : _0x41bada(0x493); } else { const _0x710bb8 = _0x88a6b1[_0x41bada(0x4b6)]('snoop-app-container'), _0x2e33dd = _0x1687ea[_0x41bada(0x4b6)](_0x41bada(0x5d9)); _0x710bb8[_0x41bada(0x3c8)] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x2e33dd[_0x41bada(0x3c8)] = ''; const _0xc34bfd = _0x710bb8[_0x41bada(0x6f8)](_0x41bada(0x1dd)), _0x42ffe0 = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x41bada(0x95a), 'area': _0x41bada(0x6ab) }, { 'id': _0x41bada(0x152), 'name': _0x41bada(0x7d1), 'svg': _0x41bada(0x732), 'area': 'dock' }, { 'id': _0x41bada(0xaa7), 'name': '相册', 'svg': _0x41bada(0x5e0), 'area': 'dock' }, { 'id': _0x41bada(0x333), 'name': '总结', 'svg': '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', 'area': _0x41bada(0x6ab) }, { 'id': _0x41bada(0x3cc), 'name': _0x41bada(0xa77), 'svg': _0x41bada(0x959), 'area': _0x41bada(0x7ed) }, { 'id': _0x41bada(0x950), 'name': '外卖', 'svg': _0x41bada(0x823), 'area': _0x41bada(0x7ed) }, { 'id': 'wants', 'name': '购物', 'svg': _0x41bada(0x453), 'area': 'main' }, { 'id': _0x41bada(0x6af), 'name': '足迹', 'svg': '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'area': _0x41bada(0x7ed) }]; _0x42ffe0['forEach'](_0xd1091b => { const _0x179517 = _0x41bada, _0x514c32 = _0x58c500[_0x179517(0x597)](_0x179517(0x80e)); _0x514c32[_0x179517(0x575)] = _0x179517(0x4e1), _0x514c32['innerHTML'] = _0x179517(0x34d) + _0xd1091b[_0x179517(0x955)] + _0x179517(0x2c1) + _0xd1091b['name'] + _0x179517(0x9d5), _0x514c32['addEventListener'](_0x179517(0xab8), () => _0x19f662(_0xd1091b['id'], _0xd1091b[_0x179517(0x5f1)])), _0xd1091b[_0x179517(0xa26)] === _0x179517(0x6ab) ? _0x2e33dd[_0x179517(0x329)](_0x514c32) : _0xc34bfd[_0x179517(0x329)](_0x514c32); }); } } else document[_0x41bada(0x4b6)](_0x41bada(0x97d))[_0x41bada(0x95e)] = '', document[_0x41bada(0x4b6)]('user-profile-edit-title')[_0x41bada(0xab3)] = '创建新用户', document[_0x41bada(0x4b6)](_0x41bada(0x7bc))[_0x41bada(0x95e)] = '新用户\x20' + (_0x4025fd['userProfiles']['length'] + 0x1), document[_0x41bada(0x4b6)](_0x41bada(0x750))[_0x41bada(0x2fd)] = _0x2430ff, document[_0x41bada(0x4b6)]('user-persona')[_0x41bada(0x95e)] = '', _0x38c8f0[_0x41bada(0x636)][_0x41bada(0x6c5)] = _0x41bada(0x55f); } function _0x58b533() { const _0x4a7f16 = _0x2a98b7, _0x3362b4 = document[_0x4a7f16(0x4b6)]('editing-user-id')['value'], _0x48e784 = { 'name': document[_0x4a7f16(0x4b6)](_0x4a7f16(0x7bc))[_0x4a7f16(0x95e)][_0x4a7f16(0x345)](), 'persona': document['getElementById'](_0x4a7f16(0x712))[_0x4a7f16(0x95e)][_0x4a7f16(0x345)](), 'avatar': document['getElementById']('user-avatar-preview')['src'] }; if (!_0x48e784['name']) { if ('xSaOA' === _0x4a7f16(0x978)) _0x3fcb1b['classList'][_0x4a7f16(0x7f8)]('is-visible', _0x4a7f16(0x92c)), _0x286fcc[_0x4a7f16(0x544)]['remove']('is-entering-from-left'), _0x4205fa[_0x4a7f16(0x44c)] = _0x3fb3f1, _0x27bf4e(), _0x148e06[_0x4a7f16(0xa31)] = ![]; else { _0x26f8b2('名字不能为空！'); return; } } if (_0x3362b4) { const _0x5f5698 = _0x4025fd['userProfiles'][_0x4a7f16(0x32b)](_0x40a246 => _0x40a246['id'] === _0x3362b4); if (_0x5f5698) Object['assign'](_0x5f5698, _0x48e784); } else { const _0x546fc6 = { 'id': _0x4a7f16(0x52a) + Date['now'](), ..._0x48e784 }; _0x4025fd[_0x4a7f16(0x293)][_0x4a7f16(0x65b)](_0x546fc6), !_0x4025fd['activeUserProfileId'] && (_0x4025fd[_0x4a7f16(0x4a1)] = _0x546fc6['id']); } _0x33c083(), _0x26f8b2(_0x4a7f16(0x69e)), _0x2b384f(), _0x102967(_0x4a7f16(0x648), _0x4a7f16(0x146)); } async function _0x3203ca() { const _0x2120f9 = _0x2a98b7; if (_0x2120f9(0x2d2) !== _0x2120f9(0x2d2)) { const _0x434671 = 'chatHistory_' + _0x47f1b7['id'], _0x1246f9 = 'chatHistory_chat_' + _0x317830['id'], _0x520626 = _0x4a10f7['getItem'](_0x434671); _0x520626 && (_0x417b9b[_0x2120f9(0x5f0)](_0x1246f9, _0x520626), _0x59dc58['removeItem'](_0x434671)); } else { const _0x3f90cd = document[_0x2120f9(0x4b6)](_0x2120f9(0x97d))[_0x2120f9(0x95e)]; if (!_0x3f90cd) return; if (_0x4025fd['userProfiles'][_0x2120f9(0x84b)] <= 0x1) { if ('DaSZq' === 'xnhnk') _0x6dfb95 = '0x' + _0x1bf30e[0x1] + _0x7885ad[0x2], _0x5995c7 = '0x' + _0x1a22a5[0x3] + _0x1cf92f[0x4], _0x3ac7cf = '0x' + _0x4b95f2[0x5] + _0x32e5c6[0x6]; else { _0x26f8b2(_0x2120f9(0x304)); return; } } const _0x2527ad = await _0x2f2e39(_0x2120f9(0x35b)); if (_0x2527ad) { if ('pOVsp' === _0x2120f9(0x678)) _0x4025fd['userProfiles'] = _0x4025fd[_0x2120f9(0x293)][_0x2120f9(0x1f9)](_0x391080 => _0x391080['id'] !== _0x3f90cd), _0x4025fd[_0x2120f9(0x4a1)] === _0x3f90cd && (_0x2120f9(0x4ec) === 'FfRfO' ? _0x1ef495[_0x2120f9(0x6f8)](_0x2120f9(0x5e8))['onclick'] = () => { _0x3bc226(_0x1640ed), _0x53903e(); } : _0x4025fd[_0x2120f9(0x4a1)] = _0x4025fd['userProfiles'][0x0]['id']), _0x4025fd[_0x2120f9(0x132)][_0x2120f9(0x6ff)](_0x156cd4 => { const _0x137e67 = _0x2120f9; _0x156cd4[_0x137e67(0x774)] === _0x3f90cd && (_0x156cd4['boundUserProfileId'] = _0x4025fd[_0x137e67(0x4a1)]); }), _0x33c083(), _0x26f8b2(_0x2120f9(0x1a7)), _0x2b384f(), _0x102967(_0x2120f9(0x648), 'userProfile'); else { const _0x28eb9d = _0x15b8f6[_0x2120f9(0xa83)][_0x2120f9(0x30c)](_0x3e2f6a => { const _0x314f5b = _0x2120f9, _0x33db31 = _0x23b4c3(_0x3e2f6a[_0x314f5b(0xa84)])?.[_0x314f5b(0x5f1)] || '未知'; return '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>' + _0x33db31 + _0x314f5b(0x714) + _0x3e2f6a['content'] + _0x314f5b(0x86f); })[_0x2120f9(0x602)](''); _0x5ee734 = _0x2120f9(0x8c7) + _0x28eb9d + _0x2120f9(0x86f); } } } } function _0x33c7f0() { const _0x2d9f33 = _0x2a98b7; if (_0x2d9f33(0x935) !== _0x2d9f33(0xa2f)) { const _0x3bb86b = document[_0x2d9f33(0x4b6)]('world-book-list-container'); _0x3bb86b[_0x2d9f33(0x3c8)] = ''; if (_0x4025fd[_0x2d9f33(0xa3c)][_0x2d9f33(0x84b)] === 0x0) { _0x3bb86b[_0x2d9f33(0x3c8)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>'; return; } _0x4025fd[_0x2d9f33(0xa3c)][_0x2d9f33(0x6ff)](_0x319e38 => { const _0xd6c117 = _0x2d9f33, _0x5e9bb2 = document['createElement']('div'); _0x5e9bb2[_0xd6c117(0x575)] = _0xd6c117(0x8fc), _0x5e9bb2[_0xd6c117(0x773)]['id'] = _0x319e38['id'], _0x5e9bb2['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + _0x319e38[_0xd6c117(0x5f1)] + _0xd6c117(0x340) + _0x319e38['content'][_0xd6c117(0xa4a)](0x0, 0x64) + _0xd6c117(0xa07), _0x5e9bb2[_0xd6c117(0x20b)]('click', () => _0x5c1228(_0x319e38['id'])), _0x3bb86b[_0xd6c117(0x329)](_0x5e9bb2); }); } else { const _0x301ab1 = _0x17b486[_0x2d9f33(0x597)](_0x2d9f33(0x689)); _0x301ab1['value'] = _0x3e872d['id'], _0x301ab1['textContent'] = _0xc6e4fc[_0x2d9f33(0x5f1)], _0x387ecd[_0x2d9f33(0x329)](_0x301ab1); } } function _0x5c1228(_0xd21cda = null) { const _0x463268 = _0x2a98b7; _0x102967(_0x463268(0x827), _0x463268(0x6a3)); if (_0xd21cda) { const _0x1c1da9 = _0x4025fd[_0x463268(0xa3c)][_0x463268(0x32b)](_0x3abc78 => _0x3abc78['id'] === _0xd21cda); if (!_0x1c1da9) return; document[_0x463268(0x4b6)]('editing-world-book-id')[_0x463268(0x95e)] = _0x1c1da9['id'], document[_0x463268(0x4b6)](_0x463268(0x790))['textContent'] = _0x463268(0x638), document[_0x463268(0x4b6)](_0x463268(0x983))['value'] = _0x1c1da9[_0x463268(0x5f1)], document[_0x463268(0x4b6)](_0x463268(0xa60))[_0x463268(0x95e)] = _0x1c1da9['content']; } else 'NdaJk' === _0x463268(0x2b2) ? _0x42b8d3['linkedWorldBookIds'] && (_0x3926f3[_0x463268(0x859)] = _0x14bf9e['linkedWorldBookIds'][_0x463268(0x1f9)](_0x258203 => _0x258203 !== _0x2bd51f)) : (document[_0x463268(0x4b6)](_0x463268(0x66a))[_0x463268(0x95e)] = '', document[_0x463268(0x4b6)]('world-book-editor-title')[_0x463268(0xab3)] = '新建条目', document[_0x463268(0x4b6)](_0x463268(0x983))['value'] = '', document[_0x463268(0x4b6)](_0x463268(0xa60))[_0x463268(0x95e)] = ''); } function _0x432937() { const _0x4339f6 = _0x2a98b7, _0x2376c3 = document[_0x4339f6(0x4b6)](_0x4339f6(0x66a))[_0x4339f6(0x95e)], _0x19cb2f = document['getElementById']('world-book-edit-name')['value'][_0x4339f6(0x345)](), _0xef969b = document[_0x4339f6(0x4b6)]('world-book-edit-content')['value'][_0x4339f6(0x345)](); if (!_0x19cb2f || !_0xef969b) { _0x26f8b2(_0x4339f6(0x3a1)); return; } if (_0x2376c3) { const _0x4c8bf4 = _0x4025fd[_0x4339f6(0xa3c)]['find'](_0x58aefd => _0x58aefd['id'] === _0x2376c3); _0x4c8bf4 && (_0x4c8bf4[_0x4339f6(0x5f1)] = _0x19cb2f, _0x4c8bf4[_0x4339f6(0x9c6)] = _0xef969b); } else { const _0xa719b3 = { 'id': _0x4339f6(0x514) + Date[_0x4339f6(0x98c)](), 'name': _0x19cb2f, 'content': _0xef969b }; _0x4025fd[_0x4339f6(0xa3c)][_0x4339f6(0x65b)](_0xa719b3); } _0x33c083(), _0x26f8b2(_0x4339f6(0x63c)), _0x33c7f0(), _0x102967(_0x4339f6(0x6a3), 'worldBookEditor'); } async function _0x45c54c() { const _0x55f8df = _0x2a98b7; if (_0x55f8df(0x71b) === _0x55f8df(0x5d3)) _0x4f0e0d = _0x49a612; else { const _0x310692 = document[_0x55f8df(0x4b6)]('editing-world-book-id')['value']; if (!_0x310692) return; const _0xb57122 = await _0x2f2e39(_0x55f8df(0x3ed)); _0xb57122 && (_0x4025fd[_0x55f8df(0xa3c)] = _0x4025fd[_0x55f8df(0xa3c)][_0x55f8df(0x1f9)](_0x16f080 => _0x16f080['id'] !== _0x310692), _0x4025fd['characters'][_0x55f8df(0x6ff)](_0xdd80b4 => { const _0x4e6335 = _0x55f8df; _0x4e6335(0x474) !== _0x4e6335(0x474) ? (_0x594b1b['name'] = _0x1e91cc['trim'](), _0x4f26ad(), _0x46ecb8(), _0x19180e(), _0x54afd4(_0x4e6335(0x23a) + _0x2b25e8[_0x4e6335(0x5f1)] + '\x22。')) : _0xdd80b4[_0x4e6335(0x859)] && (_0xdd80b4[_0x4e6335(0x859)] = _0xdd80b4[_0x4e6335(0x859)]['filter'](_0x53acd0 => _0x53acd0 !== _0x310692)); }), _0x33c083(), _0x26f8b2(_0x55f8df(0x78a)), _0x33c7f0(), _0x102967('worldBook', _0x55f8df(0x827))); } } function _0x32cc95() { const _0x972e85 = _0x2a98b7; if (_0x972e85(0x676) !== _0x972e85(0x2d5)) { const _0x136b4d = document[_0x972e85(0x4b6)]('world-book-checkboxes-container'), _0x423cd5 = _0x136b4d['querySelectorAll'](_0x972e85(0x1dc)), _0x2da8ef = document[_0x972e85(0x6f8)](_0x972e85(0x9b4)); if (_0x423cd5['length'] === 0x0) _0x2da8ef[_0x972e85(0xab3)] = _0x972e85(0x535); else _0x423cd5[_0x972e85(0x84b)] > 0x2 ? _0x2da8ef[_0x972e85(0xab3)] = _0x972e85(0x305) + _0x423cd5[_0x972e85(0x84b)] + '\x20项' : _0x2da8ef[_0x972e85(0xab3)] = Array[_0x972e85(0x811)](_0x423cd5)[_0x972e85(0x30c)](_0x1b905b => _0x1b905b[_0x972e85(0x8a2)]['textContent'][_0x972e85(0x345)]())['join']('、'); } else throw new _0x43b75b(_0x972e85(0x59a)); } function _0x590517(_0x5c2b2f) { const _0x151363 = _0x2a98b7; if (_0x151363(0x468) === _0x151363(0x468)) { const _0x286ee1 = _0x4025fd['chats'][_0x151363(0x32b)](_0xeec41 => _0xeec41['id'] === _0x5c2b2f); if (!_0x286ee1 || _0x286ee1['type'] !== _0x151363(0x1d3)) return; document[_0x151363(0x4b6)](_0x151363(0x86a))['value'] = _0x286ee1[_0x151363(0x5f1)] || '', _0x45f029('group-settings-bind-user'), document[_0x151363(0x4b6)](_0x151363(0x45f))['value'] = _0x286ee1[_0x151363(0x774)] || _0x4025fd[_0x151363(0x4a1)]; const _0x49a2ed = document['getElementById'](_0x151363(0x25b)); _0x49a2ed['innerHTML'] = '', _0x4025fd[_0x151363(0xa3c)][_0x151363(0x6ff)](_0xcf9234 => { const _0x4eb705 = _0x151363, _0xdc0e5b = _0x286ee1[_0x4eb705(0x859)]?.[_0x4eb705(0x9f1)](_0xcf9234['id']), _0x55f0f6 = document['createElement']('label'); _0x55f0f6[_0x4eb705(0x3c8)] = _0x4eb705(0x751) + _0xcf9234['id'] + '\x22\x20' + (_0xdc0e5b ? _0x4eb705(0x4df) : '') + '>\x20' + _0xcf9234[_0x4eb705(0x5f1)], _0x49a2ed['appendChild'](_0x55f0f6); }), _0x50b027(); const _0x495f73 = document[_0x151363(0x4b6)](_0x151363(0xa8e)), _0x1f319a = document[_0x151363(0x4b6)](_0x151363(0x274)); _0x34b988(_0x151363(0x69c) + _0x5c2b2f)['then'](_0x1fb42a => { const _0x4aea07 = _0x151363; _0x495f73[_0x4aea07(0x2fd)] = _0x1fb42a ? URL[_0x4aea07(0x798)](_0x1fb42a) : _0x535078; }), _0x34b988('group_bg_' + _0x5c2b2f)['then'](_0x25829f => { const _0x47a2d7 = _0x151363; _0x47a2d7(0x68e) !== 'oOPIo' ? _0x1f319a['src'] = _0x25829f ? URL[_0x47a2d7(0x798)](_0x25829f) : '' : _0x262bdb['textContent'] = '--\x20点击选择\x20--'; }), _0x102967('groupSettings', _0x151363(0x651)); } else { _0x5c091c[_0x151363(0x963)](_0x151363(0x6e7)); return; } } async function _0x3f139a() { const _0x3a9db2 = _0x2a98b7; if (_0x3a9db2(0xa81) === _0x3a9db2(0xa35)) { _0x14781(_0x3a9db2(0x146), _0x3a9db2(0x648)); const _0x316dd0 = _0x51477d[_0x3a9db2(0x4b6)](_0x3a9db2(0x85d)); if (_0x2e1982) { const _0x5a779e = _0x2f610f[_0x3a9db2(0x293)][_0x3a9db2(0x32b)](_0x3160b7 => _0x3160b7['id'] === _0x29bf28); if (!_0x5a779e) return; _0x4f6b15[_0x3a9db2(0x4b6)](_0x3a9db2(0x97d))[_0x3a9db2(0x95e)] = _0x5a779e['id'], _0x1e9fb3['getElementById'](_0x3a9db2(0xac2))['textContent'] = _0x3a9db2(0x476), _0x55e545[_0x3a9db2(0x4b6)](_0x3a9db2(0x7bc))[_0x3a9db2(0x95e)] = _0x5a779e['name'], _0xc9eb77[_0x3a9db2(0x4b6)]('user-avatar-preview')['src'] = _0x5a779e['avatar'], _0x2edb37[_0x3a9db2(0x4b6)](_0x3a9db2(0x712))[_0x3a9db2(0x95e)] = _0x5a779e[_0x3a9db2(0x8ad)], _0x316dd0[_0x3a9db2(0x636)][_0x3a9db2(0x6c5)] = _0x5a779e['id'] === _0x201538[_0x3a9db2(0x4a1)] ? _0x3a9db2(0x55f) : _0x3a9db2(0x493); } else _0x1f556c['getElementById'](_0x3a9db2(0x97d))[_0x3a9db2(0x95e)] = '', _0x2b1a52[_0x3a9db2(0x4b6)]('user-profile-edit-title')[_0x3a9db2(0xab3)] = '创建新用户', _0x116c64[_0x3a9db2(0x4b6)](_0x3a9db2(0x7bc))[_0x3a9db2(0x95e)] = _0x3a9db2(0x718) + (_0x1243c5['userProfiles'][_0x3a9db2(0x84b)] + 0x1), _0x33b36e[_0x3a9db2(0x4b6)]('user-avatar-preview')[_0x3a9db2(0x2fd)] = _0x389e59, _0x484140[_0x3a9db2(0x4b6)]('user-persona')[_0x3a9db2(0x95e)] = '', _0x316dd0[_0x3a9db2(0x636)][_0x3a9db2(0x6c5)] = _0x3a9db2(0x55f); } else { const _0x186a2e = _0xba11a1(); if (!_0x186a2e || _0x186a2e[_0x3a9db2(0xaa2)] !== 'group') return; const _0x580ff3 = document['getElementById']('group-settings-name')[_0x3a9db2(0x95e)][_0x3a9db2(0x345)](); if (!_0x580ff3) { _0x26f8b2('群聊名称不能为空！'); return; } _0x186a2e[_0x3a9db2(0x5f1)] = _0x580ff3; const _0x361828 = document[_0x3a9db2(0x4e3)]('#group-world-book-checkboxes\x20input:checked'); _0x186a2e[_0x3a9db2(0x859)] = Array[_0x3a9db2(0x811)](_0x361828)[_0x3a9db2(0x30c)](_0x43ec2a => _0x43ec2a[_0x3a9db2(0x95e)]), _0x186a2e[_0x3a9db2(0x774)] = document[_0x3a9db2(0x4b6)](_0x3a9db2(0x45f))[_0x3a9db2(0x95e)]; const _0x447019 = document[_0x3a9db2(0x4b6)]('group-avatar-input')[_0x3a9db2(0x1f1)][0x0], _0x297899 = document[_0x3a9db2(0x4b6)](_0x3a9db2(0x1fe))[_0x3a9db2(0x1f1)][0x0]; if (_0x447019) await _0x5a7151(_0x3a9db2(0x69c) + _0x186a2e['id'], _0x447019); if (_0x297899) await _0x5a7151(_0x3a9db2(0x74d) + _0x186a2e['id'], _0x297899); _0x33c083(), _0x27a7c1(), await _0x56d0ee(), _0x26f8b2(_0x3a9db2(0x25a)), _0x102967(_0x3a9db2(0x651), _0x3a9db2(0x655)); } } function _0x50b027() { const _0x82507 = _0x2a98b7; if (_0x82507(0x694) !== _0x82507(0x694)) _0x30a663[_0x82507(0x544)][_0x82507(0x83f)]('show'), _0x420f92['classList']['contains'](_0x82507(0x187)) && (_0x571eed['scrollTop'] = _0x5f2763[_0x82507(0x650)]); else { const _0x38e18b = document[_0x82507(0x4b6)](_0x82507(0x25b)), _0xde1d4d = _0x38e18b[_0x82507(0x4e3)](_0x82507(0x1dc)), _0x57dd24 = document['querySelector'](_0x82507(0x12b)); if (_0xde1d4d[_0x82507(0x84b)] === 0x0) 'kkkLQ' !== 'kkkLQ' ? (_0x5a2ff3[_0x82507(0x544)][_0x82507(0x7f8)](_0x82507(0x208)), _0x20d64b[_0x82507(0x544)][_0x82507(0x7f8)]('expanded')) : _0x57dd24[_0x82507(0xab3)] = _0x82507(0x535); else _0xde1d4d[_0x82507(0x84b)] > 0x2 ? _0x82507(0x211) === _0x82507(0x332) ? _0x4279f9[_0x82507(0xa4d)] = _0x82507(0x625) + _0x342307[_0x82507(0x350)] : _0x57dd24[_0x82507(0xab3)] = '已选择\x20' + _0xde1d4d['length'] + '\x20项' : _0x57dd24[_0x82507(0xab3)] = Array[_0x82507(0x811)](_0xde1d4d)[_0x82507(0x30c)](_0x517b84 => _0x517b84['parentElement'][_0x82507(0xab3)]['trim']())['join']('、'); } } async function _0x35364d() { const _0x142a6d = _0x2a98b7, _0x23a5b6 = _0xba11a1(), _0x571526 = (_0x23a5b6?.[_0x142a6d(0x2db)] || [])[_0x142a6d(0x30c)](_0x389a36)[_0x142a6d(0x1f9)](Boolean), _0x4c23cb = _0x25fa5a(_0x23a5b6['id']); if (!_0x23a5b6 || _0x23a5b6[_0x142a6d(0xaa2)] !== _0x142a6d(0x1d3) || _0x571526['length'] < 0x2) return null; const _0x32c18f = _0x23a5b6[_0x142a6d(0x859)] && _0x23a5b6['linkedWorldBookIds'][_0x142a6d(0x84b)] > 0x0 ? '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a' + _0x23a5b6[_0x142a6d(0x859)][_0x142a6d(0x30c)](_0x4da5ae => _0x4025fd[_0x142a6d(0xa3c)][_0x142a6d(0x32b)](_0x5b810d => _0x5b810d['id'] === _0x4da5ae))['filter'](Boolean)['map'](_0x217ea1 => _0x142a6d(0x745) + _0x217ea1['name'] + '\x0a' + _0x217ea1['content'])['join']('') : '', _0x21c4a0 = _0x4c23cb[_0x142a6d(0x8ad)] ? _0x142a6d(0x7bb) + _0x4c23cb[_0x142a6d(0x5f1)] + _0x142a6d(0x741) + _0x4c23cb[_0x142a6d(0x8ad)] : ''; let _0x5a0d81 = ''; const _0xb716d0 = new Date(), _0x459ea3 = _0x4025fd[_0x142a6d(0x24a)]['at'](-0x1); _0x5a0d81 += '\x0a-\x20**当前时间**:\x20' + _0xb716d0[_0x142a6d(0x8de)](_0x142a6d(0x838), { 'dateStyle': _0x142a6d(0x147), 'timeStyle': _0x142a6d(0x2ab) }); if (_0x459ea3) { if (_0x142a6d(0x5ce) === _0x142a6d(0x8c2)) _0x353097 = _0x403639['parse'](_0x18cb0a); else { const _0x494050 = new Date(_0x459ea3[_0x142a6d(0x36b)]), _0x523ecf = Math['floor']((_0xb716d0 - _0x494050) / (0x3e8 * 0x3c)); if (_0x523ecf < 0x5) _0x5a0d81 += _0x142a6d(0x3b2); else { if (_0x523ecf < 0x78) _0x5a0d81 += _0x142a6d(0x7a4) + _0x523ecf + _0x142a6d(0x7b4); else { const _0x5b0a7b = Math[_0x142a6d(0x779)](_0x523ecf / 0x3c); if (_0x5b0a7b < 0x30) _0x5a0d81 += '\x0a-\x20**对话状态**:\x20群里在' + _0x5b0a7b + _0x142a6d(0x98d); else _0x5a0d81 += _0x142a6d(0xaa5) + Math[_0x142a6d(0x779)](_0x5b0a7b / 0x18) + _0x142a6d(0x37a); } } } } else _0x5a0d81 += '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'; const _0x5de1dd = [..._0x4025fd['conversationHistory']][_0x142a6d(0x9cb)]()[_0x142a6d(0x32b)](_0x4bbf41 => _0x4bbf41['role'] === _0x142a6d(0x880))?.[_0x142a6d(0x9c6)] || '', _0x5939bb = _0x2e7271(_0x23a5b6, _0x5de1dd), _0x4bd54d = _0x4025fd[_0x142a6d(0x24a)][_0x142a6d(0xab4)](-0x78), _0x4879b1 = _0x288407[_0x142a6d(0x30c)](_0x52f136 => _0x52f136[_0x142a6d(0x5f1)]), _0x4b3530 = _0xe4da1e(), _0x315aa4 = _0x571526['map'](_0x4a5ed2 => { const _0x3ab40c = _0x142a6d; if (_0x3ab40c(0x1cc) !== _0x3ab40c(0x2b9)) { const { omniText: _0x119f66 } = _0x204d24(_0x4a5ed2['id'], _0x23a5b6['id']), _0x4238ac = _0x5b4257(_0x4a5ed2['id']), _0xf3855c = _0x4a5ed2[_0x3ab40c(0x859)] && _0x4a5ed2['linkedWorldBookIds']['length'] > 0x0 ? '\x0a\x0a#\x20' + _0x4a5ed2['name'] + _0x3ab40c(0x7c4) + _0x4a5ed2[_0x3ab40c(0x859)]['map'](_0x332ef6 => _0x4025fd[_0x3ab40c(0xa3c)][_0x3ab40c(0x32b)](_0xadb30c => _0xadb30c['id'] === _0x332ef6))['filter'](Boolean)[_0x3ab40c(0x30c)](_0x39e825 => _0x3ab40c(0x141) + _0x39e825[_0x3ab40c(0x5f1)] + '\x0a' + _0x39e825[_0x3ab40c(0x9c6)])[_0x3ab40c(0x602)]('') : ''; return { 'id': _0x4a5ed2['id'], 'name': _0x4a5ed2[_0x3ab40c(0x5f1)], 'persona': _0x4a5ed2[_0x3ab40c(0x8ad)] || _0x3ab40c(0x629), 'memory': _0x119f66 + _0x4238ac + _0xf3855c }; } else { const _0x3a9e92 = _0x21ebcd[_0x3ab40c(0x597)]('li'); _0x3a9e92[_0x3ab40c(0x575)] = 'character-item', _0x3a9e92[_0x3ab40c(0x773)][_0x3ab40c(0x8c8)] = _0x4819c6['id'], _0x3a9e92[_0x3ab40c(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x35dfe8[_0x3ab40c(0x12d)] || _0x2e72b5) + _0x3ab40c(0x7a1) + _0x13aadf[_0x3ab40c(0x5f1)] + _0x3ab40c(0x89f), _0x3a9e92[_0x3ab40c(0x20b)]('click', () => { _0x4fed27(_0x2f2a00['id']); }), _0x3a9e92[_0x3ab40c(0x6f8)](_0x3ab40c(0x3fb))[_0x3ab40c(0x20b)](_0x3ab40c(0xab8), () => { _0x1e7b36(_0x156e83['id']); }), _0x3a9e92[_0x3ab40c(0x6f8)](_0x3ab40c(0xa71))['addEventListener'](_0x3ab40c(0xab8), _0x157aff => { const _0x567444 = _0x3ab40c; _0x157aff[_0x567444(0x870)](), _0x4df817(_0x5a23e5['id']); }), _0x21fbcb['appendChild'](_0x3a9e92); } }), _0x41787c = 0x5, _0x4b7e83 = 0xc, _0x3702f0 = _0x142a6d(0x188)[_0x142a6d(0x345)](), _0x1ca6ac = { 'instruction': (_0x142a6d(0x7bf) + (_0x4c23cb['name'] || '用户') + '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“' + (_0x4c23cb[_0x142a6d(0x5f1)] || '用户') + _0x142a6d(0x3af) + _0x41787c + '\x20到\x20' + _0x4b7e83 + '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕' + (_0x4c23cb[_0x142a6d(0x5f1)] || '用户') + _0x142a6d(0x120) + _0x5a0d81 + '\x20\x0a' + _0x21c4a0 + '\x0a' + _0x32c18f + _0x142a6d(0x984) + _0x4b3530 + '\x0a')[_0x142a6d(0x345)](), 'personas': _0x315aa4, 'mentioned': _0x5939bb ? { 'id': _0x5939bb['id'], 'name': _0x5939bb[_0x142a6d(0x5f1)] } : null, 'stickerList': _0x4879b1 }, _0x453712 = { 'type': _0x142a6d(0x545), 'properties': { 'events': { 'type': 'array', 'items': { 'type': 'object', 'required': [_0x142a6d(0x302), 'kind'], 'properties': { 'senderId': { 'type': _0x142a6d(0x90a) }, 'kind': { 'type': 'string', 'enum': [_0x142a6d(0xa20), _0x142a6d(0x8e3), 'music'] }, 'content': { 'type': _0x142a6d(0x90a) }, 'sticker': { 'type': _0x142a6d(0x90a) }, 'songName': { 'type': 'string' }, 'artist': { 'type': 'string' } } } } }, 'required': [_0x142a6d(0x528)] }, _0x44e08d = []; _0x44e08d[_0x142a6d(0x65b)]({ 'role': 'system', 'content': _0x3702f0 }); for (const _0x4aac42 of _0x4bd54d) { const _0x7345f0 = _0x4aac42[_0x142a6d(0x1ce)] === 'ai' || _0x4aac42[_0x142a6d(0x1ce)] === _0x142a6d(0x135) ? _0x142a6d(0x135) : _0x142a6d(0x880); let _0x236fd8 = { 'role': _0x7345f0, 'content': _0x4aac42['content'] }, _0x25911b = !!_0x4aac42[_0x142a6d(0x9c6)], _0x43beda = null; if (_0x4aac42[_0x142a6d(0x3b9)]) _0x43beda = _0x4aac42[_0x142a6d(0x3b9)]; else { if (_0x4aac42[_0x142a6d(0x3c7)]) { if (_0x142a6d(0x4e4) !== _0x142a6d(0x4e4)) { if (!_0x5b40e9['isArray'](_0x3acc36)) return _0x142a6d(0x14b); if (_0x5cff34[_0x142a6d(0x84b)] === 0x0) return _0x142a6d(0x51d); return _0x5b8567[_0x142a6d(0x419)]((_0x156ab6, _0x51e78e) => new _0x4ec893(_0x51e78e[_0x142a6d(0x36b)]) - new _0x3330c2(_0x156ab6[_0x142a6d(0x36b)])), _0x20608a['map'](_0x11bbe1 => _0x142a6d(0x610) + (_0x11bbe1[_0x142a6d(0x8b5)] || '未知商店') + _0x142a6d(0x352) + (_0x11bbe1[_0x142a6d(0x36b)] || '') + _0x142a6d(0x450) + (_0x11bbe1[_0x142a6d(0x46b)] || _0x142a6d(0xa1c)) + _0x142a6d(0x814) + (_0x11bbe1[_0x142a6d(0x2a1)] || 0x0)[_0x142a6d(0x68a)](0x2) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x142a6d(0x602)](''); } else try { const _0x5c8d78 = await _0x34b988(_0x4aac42[_0x142a6d(0x3c7)]); _0x5c8d78 && (_0x43beda = await _0xe16e6b(_0x5c8d78)); } catch (_0x7e7b44) { console[_0x142a6d(0x963)](_0x142a6d(0x214), _0x7e7b44); } } } if (_0x43beda) { if (_0x142a6d(0x767) === _0x142a6d(0x3ae)) { const _0x33a4a9 = _0x51b230[_0x142a6d(0x47c)](_0x142a6d(0x8ab) + _0x33fdfb), _0x59dc87 = _0x3e8e89[_0x142a6d(0x93f)](_0x33a4a9 || '[]'); return _0x51c23e[_0x142a6d(0x5f8)](_0x59dc87) ? _0x59dc87 : []; } else _0x236fd8[_0x142a6d(0x3b9)] = _0x43beda, _0x25911b = !![]; } _0x25911b && _0x44e08d['push'](_0x236fd8); } _0x44e08d[_0x142a6d(0x65b)]({ 'role': _0x142a6d(0x880), 'content': '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a' + JSON[_0x142a6d(0x49f)](_0x453712) + _0x142a6d(0x6eb) + JSON['stringify'](_0x1ca6ac) }); try { const _0x3edc4f = await _0x414037(_0x44e08d, { 'json': !![] }); if (!_0x3edc4f) return null; let _0x307ff0 = _0x3edc4f['trim'](); const _0xaf9e02 = _0x307ff0[_0x142a6d(0x561)](/```json([\s\S]*?)```/i); if (_0xaf9e02) _0x307ff0 = _0xaf9e02[0x1]['trim'](); _0x307ff0 = _0x5e3cd4(_0x307ff0); let _0x44957c = null; try { if (_0x142a6d(0xa6e) === _0x142a6d(0xa6e)) _0x44957c = JSON[_0x142a6d(0x93f)](_0x307ff0); else { _0x22f3a4[_0x142a6d(0x963)](_0x142a6d(0xa99)); return; } } catch (_0x5325df) { console[_0x142a6d(0x963)](_0x142a6d(0x578), _0x5325df), console[_0x142a6d(0x963)](_0x142a6d(0x427), _0x307ff0); } if (!_0x44957c || !Array[_0x142a6d(0x5f8)](_0x44957c[_0x142a6d(0x528)])) return null; return _0x44957c = _0x1ed823(_0x44957c, _0x571526, _0x4879b1), _0x44957c['events'] = _0x44957c[_0x142a6d(0x528)][_0x142a6d(0xab4)](0x0, _0x4b7e83), _0x44957c['events'][_0x142a6d(0x84b)] ? _0x44957c : null; } catch (_0x630b90) { return _0x630b90[_0x142a6d(0x5f1)] !== _0x142a6d(0x40f) && console['error']('Failed\x20to\x20plan\x20group\x20replies:', _0x630b90), null; } } function _0x1984e0() { const _0x38cea9 = _0x2a98b7; if (_0x38cea9(0x664) === 'YraCP') { const _0x3b4627 = document[_0x38cea9(0x4b6)](_0x38cea9(0x6ae)); _0x3b4627['innerHTML'] = ''; if (_0x4025fd[_0x38cea9(0x9b0)][_0x38cea9(0x84b)] === 0x0) { if ('fTjxd' === _0x38cea9(0x6ce)) { const _0x1e7369 = _0x189fde[_0x38cea9(0x597)](_0x38cea9(0x80e)); _0x1e7369[_0x38cea9(0x575)] = _0x38cea9(0xa95), _0x1e7369[_0x38cea9(0x3c8)] = _0x38cea9(0x39f), _0x1e7369[_0x38cea9(0x6f8)](_0x38cea9(0x94a))[_0x38cea9(0x4a6)] = () => _0x437cc8(_0x38cea9(0x3b9)), _0x43a30e['appendChild'](_0x1e7369), _0x5bbc87(_0x34323a)[_0x38cea9(0x4ea)](_0x179af2 => { const _0x5671eb = _0x38cea9, _0xac7969 = _0x159fa9[_0x5671eb(0x4b6)]('pending-post-image-preview'); _0xac7969 && _0x179af2 && (_0xac7969[_0x5671eb(0x2fd)] = _0x4fb500[_0x5671eb(0x798)](_0x179af2)); }); } else { _0x3b4627[_0x38cea9(0x3c8)] = _0x38cea9(0xa30); return; } } _0x4025fd[_0x38cea9(0x9b0)][_0x38cea9(0x6ff)](_0x583142 => { const _0x5b0a6d = _0x38cea9, _0x502c3c = _0x4025fd[_0x5b0a6d(0x293)][_0x5b0a6d(0x32b)](_0x1c9dae => _0x1c9dae['id'] === _0x583142[_0x5b0a6d(0x774)]) || { 'name': '未知用户' }, _0x26f3d1 = document[_0x5b0a6d(0x597)](_0x5b0a6d(0x80e)); _0x26f3d1[_0x5b0a6d(0x575)] = _0x5b0a6d(0x8fc), _0x26f3d1[_0x5b0a6d(0x773)]['id'] = _0x583142['id'], _0x26f3d1[_0x5b0a6d(0x3c8)] = _0x5b0a6d(0x8aa) + _0x583142[_0x5b0a6d(0x5f1)] + _0x5b0a6d(0xa06) + _0x502c3c[_0x5b0a6d(0x5f1)] + '\x20|\x20' + _0x583142['memberCharacterIds']['length'] + _0x5b0a6d(0x471), _0x26f3d1[_0x5b0a6d(0x20b)](_0x5b0a6d(0xab8), () => _0x3bd3d(_0x583142['id'])), _0x3b4627[_0x5b0a6d(0x329)](_0x26f3d1); }); } else { if (_0x528103[_0x38cea9(0x1ce)] === 'user') return _0x16f5d3[_0x38cea9(0x146)]?.[_0x38cea9(0x5f1)] || _0x38cea9(0x600); if (_0x142a82['senderId']) { const _0x2964c5 = _0x5a66b9(_0x2d3caf[_0x38cea9(0x302)]); return _0x2964c5?.[_0x38cea9(0x5f1)] || _0x38cea9(0x97f); } if (_0x34dc75?.[_0x38cea9(0xaa2)] === 'private') { const _0x36b079 = _0x5f5454(_0x1931f6['participantIds'][0x0]); return _0x36b079?.[_0x38cea9(0x5f1)] || 'AI'; } return _0x38cea9(0xa64); } } function _0xd35bfc(_0x3c3493 = null) { const _0x164283 = _0x2a98b7; if (_0x164283(0x79f) === _0x164283(0x952)) { _0x52b606['innerHTML'] = _0x164283(0x717); return; } else { const _0x58bf04 = document[_0x164283(0x4b6)](_0x164283(0x574)), _0x4c1079 = document['getElementById'](_0x164283(0x348)), _0x1f1117 = document[_0x164283(0x4b6)]('friend-circle-member-selection'), _0x51c201 = document[_0x164283(0x4b6)](_0x164283(0x1af)), _0x2c05d0 = document[_0x164283(0x4b6)](_0x164283(0x7e0)), _0x3560f6 = document[_0x164283(0x4b6)](_0x164283(0x695)); _0x45f029('friend-circle-edit-bind-user'), _0x1f1117[_0x164283(0x3c8)] = '', _0x4025fd[_0x164283(0x61c)][_0x164283(0x6ff)](_0x10627f => { const _0x4ad41e = _0x164283; if (_0x4ad41e(0x47a) !== _0x4ad41e(0x26d)) { const _0x3a154a = document[_0x4ad41e(0x597)](_0x4ad41e(0x80e)); _0x3a154a['className'] = _0x4ad41e(0x84a), _0x3a154a[_0x4ad41e(0x3c8)] = _0x4ad41e(0x593) + _0x10627f['id'] + _0x4ad41e(0x2c5) + _0x10627f['id'] + _0x4ad41e(0x138) + (_0x10627f[_0x4ad41e(0x12d)] || _0x535078) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x10627f['id'] + _0x4ad41e(0x22a) + _0x10627f[_0x4ad41e(0x5f1)] + _0x4ad41e(0x87b), _0x1f1117[_0x4ad41e(0x329)](_0x3a154a); } else _0x2296c8[_0x4ad41e(0x66c)](_0x4ad41e(0x9c3)), _0x53ba4c[_0x4ad41e(0x132)] = _0x23ab10[_0x4ad41e(0x61c)][_0x4ad41e(0x30c)](_0x5d4b97 => ({ 'id': _0x4ad41e(0x625) + _0x5d4b97['id'], 'type': 'private', 'participantIds': [_0x5d4b97['id']] })), _0x5dbc69[_0x4ad41e(0x350)] && (_0x46afe2['activeChatId'] = _0x4ad41e(0x625) + _0x3f4d49['activeCharacterId']), _0x3b7ee7[_0x4ad41e(0x61c)][_0x4ad41e(0x6ff)](_0x3de3f6 => { const _0x1d4b91 = _0x4ad41e, _0x4fbe4d = _0x1d4b91(0x8ab) + _0x3de3f6['id'], _0x316d95 = _0x1d4b91(0x592) + _0x3de3f6['id'], _0x1ebb2b = _0x58faa1[_0x1d4b91(0x47c)](_0x4fbe4d); _0x1ebb2b && (_0x2ef76e[_0x1d4b91(0x5f0)](_0x316d95, _0x1ebb2b), _0x2a2d5b[_0x1d4b91(0x6f1)](_0x4fbe4d)); }); }); if (_0x3c3493) { const _0x1b3125 = _0x4025fd[_0x164283(0x9b0)][_0x164283(0x32b)](_0x1a26da => _0x1a26da['id'] === _0x3c3493); if (!_0x1b3125) return; _0x51c201[_0x164283(0xab3)] = _0x164283(0x2ac), _0x2c05d0[_0x164283(0x95e)] = _0x1b3125['id'], _0x58bf04[_0x164283(0x95e)] = _0x1b3125[_0x164283(0x5f1)], _0x4c1079[_0x164283(0x95e)] = _0x1b3125[_0x164283(0x774)], _0x3560f6[_0x164283(0x636)][_0x164283(0x6c5)] = _0x164283(0x493), _0x1b3125[_0x164283(0x647)][_0x164283(0x6ff)](_0x29b3e3 => { const _0x582738 = _0x164283; if (_0x582738(0x15d) !== _0x582738(0x587)) { const _0xd6443c = _0x1f1117['querySelector'](_0x582738(0x1ec) + _0x29b3e3); if (_0xd6443c) _0xd6443c[_0x582738(0x4df)] = !![]; } else _0x50d395[_0x582738(0xab2)] = _0x135374[_0x582738(0xab2)]; }); } else _0x51c201['textContent'] = _0x164283(0x699), _0x2c05d0[_0x164283(0x95e)] = '', _0x58bf04[_0x164283(0x95e)] = _0x164283(0x441) + (_0x4025fd[_0x164283(0x9b0)][_0x164283(0x84b)] + 0x1), _0x4c1079['value'] = _0x4025fd[_0x164283(0x4a1)], _0x3560f6[_0x164283(0x636)][_0x164283(0x6c5)] = _0x164283(0x55f); _0x102967(_0x164283(0x2d8), _0x164283(0xabb)); } } function _0x41a95c() { const _0x44978f = _0x2a98b7, _0x14cbd5 = document[_0x44978f(0x4b6)](_0x44978f(0x7e0))[_0x44978f(0x95e)], _0x4d1503 = document[_0x44978f(0x4b6)]('friend-circle-edit-name')[_0x44978f(0x95e)][_0x44978f(0x345)](), _0x3b7509 = document[_0x44978f(0x4b6)]('friend-circle-edit-bind-user')['value'], _0x4f2a8e = Array['from'](document[_0x44978f(0x4e3)]('#friend-circle-member-selection\x20input:checked'))[_0x44978f(0x30c)](_0x409694 => _0x409694[_0x44978f(0x773)]['id']); if (!_0x4d1503) { if (_0x44978f(0x8c6) === _0x44978f(0x327)) { if (!_0x2c323e) return ''; const _0x4b2eda = new _0x535231(_0x31dce8), _0x3ad02d = _0xb1608b(_0x4b2eda[_0x44978f(0x3fa)]())[_0x44978f(0x412)](0x2, '0'), _0x3a3664 = _0x58fc7a(_0x4b2eda[_0x44978f(0x24d)]())[_0x44978f(0x412)](0x2, '0'); return _0x3ad02d + ':' + _0x3a3664; } else { _0x26f8b2(_0x44978f(0x6cc)); return; } } if (_0x4f2a8e[_0x44978f(0x84b)] === 0x0) { _0x26f8b2(_0x44978f(0x66d)); return; } if (_0x14cbd5) { const _0xa071b6 = _0x4025fd['friendCircles'][_0x44978f(0x32b)](_0xca7c69 => _0xca7c69['id'] === _0x14cbd5); if (_0xa071b6) { if (_0x44978f(0x594) === _0x44978f(0x594)) _0xa071b6[_0x44978f(0x5f1)] = _0x4d1503, _0xa071b6['boundUserProfileId'] = _0x3b7509, _0xa071b6['memberCharacterIds'] = _0x4f2a8e; else { if (typeof _0x1cf120 === 'string') _0x45d669[_0x44978f(0x65b)](_0x437f7c); } } } else { const _0x50d83b = { 'id': _0x44978f(0x248) + Date[_0x44978f(0x98c)](), 'name': _0x4d1503, 'boundUserProfileId': _0x3b7509, 'memberCharacterIds': _0x4f2a8e, 'posts': [] }; _0x4025fd['friendCircles']['push'](_0x50d83b); } _0x33c083(), _0x26f8b2('好友圈已保存！'), _0x1984e0(), _0x102967('friendCircleList', _0x44978f(0x2d8)); } async function _0x36de59() { const _0x154f0e = _0x2a98b7; if (_0x154f0e(0x1bc) !== _0x154f0e(0x372)) { const _0x15d109 = document[_0x154f0e(0x4b6)](_0x154f0e(0x7e0))[_0x154f0e(0x95e)]; if (!_0x15d109) return; const _0x3d3375 = await _0x2f2e39(_0x154f0e(0x401)); if (_0x3d3375) { if (_0x154f0e(0x2ca) !== _0x154f0e(0x2a9)) _0x4025fd['friendCircles'] = _0x4025fd['friendCircles'][_0x154f0e(0x1f9)](_0x2edbfb => _0x2edbfb['id'] !== _0x15d109), _0x4025fd[_0x154f0e(0x31a)] === _0x15d109 && (_0x4025fd[_0x154f0e(0x31a)] = null), _0x33c083(), _0x26f8b2(_0x154f0e(0xa5e)), _0x1984e0(), _0x102967(_0x154f0e(0xabb), 'friendCircleEdit'); else { if (!_0x1dae8f) return; _0x76ee93 = _0x1aacf6[_0x154f0e(0x126)][0x0]['screenX'], _0x663c4c === _0x154f0e(0x84d) && _0x1473ac(), _0x437c1d = ![]; } } } else _0x49149d += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>'; } function _0x3bd3d(_0x14b6e6) { const _0x1db12a = _0x2a98b7; if (_0x1db12a(0xa45) === _0x1db12a(0xa45)) { _0xed4b04(); const _0xe89007 = _0x4025fd['friendCircles'][_0x1db12a(0x32b)](_0x5322d6 => _0x5322d6['id'] === _0x14b6e6); if (!_0xe89007) return; _0x4025fd[_0x1db12a(0x31a)] = _0x14b6e6, _0x33c083(), document[_0x1db12a(0x4b6)]('friend-circle-title')['textContent'] = _0xe89007[_0x1db12a(0x5f1)], _0x13aa1b(), _0x102967(_0x1db12a(0x43a), _0x1db12a(0xabb)), _0x589e6d(); } else { const _0x412f5b = 'diary-action-modal-' + _0x3deca3; let _0x42c28f = _0x2f58d2[_0x1db12a(0x4b6)](_0x412f5b); if (_0x42c28f) return; const _0x58fd08 = _0x1db12a(0xa98) + _0x412f5b + _0x1db12a(0x96d) + (_0x20f76d === 'ai' ? _0x1db12a(0x6d5) : '') + _0x1db12a(0xac0); _0x4039cf[_0x1db12a(0x9c2)]['insertAdjacentHTML'](_0x1db12a(0x6a2), _0x58fd08); const _0x1bdd2d = _0x3fe1c5[_0x1db12a(0x4b6)](_0x412f5b), _0x39ca39 = () => _0x1bdd2d[_0x1db12a(0x7f8)](); _0x1bdd2d[_0x1db12a(0x6f8)]('.choice-modal-backdrop')[_0x1db12a(0x4a6)] = _0x39ca39, _0x1bdd2d[_0x1db12a(0x6f8)](_0x1db12a(0x606))[_0x1db12a(0x4a6)] = _0x39ca39, _0x1bdd2d['querySelector']('#diary-action-delete')['onclick'] = () => { _0x5dc9c1(_0x10335a), _0x39ca39(); }, _0x6a3886 === 'ai' && (_0x1bdd2d[_0x1db12a(0x6f8)](_0x1db12a(0x5e8))[_0x1db12a(0x4a6)] = () => { _0xbf53d6(_0x347b9a), _0x39ca39(); }); } } function _0x524dbc() { const _0x5e779b = _0x2a98b7; if (!_0x4025fd[_0x5e779b(0x9b0)] || _0x4025fd[_0x5e779b(0x9b0)][_0x5e779b(0x84b)] === 0x0) { console[_0x5e779b(0x963)](_0x5e779b(0xa99)); return; } const _0x53a31c = _0x4025fd[_0x5e779b(0x9b0)][0x0]; if (_0x53a31c[_0x5e779b(0x647)]['length'] < 0x2) { if (_0x5e779b(0x5fd) !== _0x5e779b(0x5fd)) _0xcfbdc5[_0x5e779b(0x329)](_0x36d040); else { console[_0x5e779b(0x963)]('错误：第一个好友圈\x20\x22' + _0x53a31c[_0x5e779b(0x5f1)] + _0x5e779b(0x834)); return; } } const _0x3e6b62 = { 'id': _0x5e779b(0x38d) + Date[_0x5e779b(0x98c)](), 'authorType': _0x5e779b(0x5ef), 'authorId': _0x53a31c[_0x5e779b(0x647)][0x0], 'content': _0x5e779b(0x266), 'timestamp': Date['now'](), 'likes': [_0x53a31c[_0x5e779b(0x647)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x5e779b(0x98c)](), 'authorId': _0x53a31c[_0x5e779b(0x647)][0x1], 'content': _0x5e779b(0x54a) }] }; _0x53a31c[_0x5e779b(0x13e)][_0x5e779b(0x65b)](_0x3e6b62), _0x33c083(), console['log'](_0x5e779b(0x2b0) + _0x53a31c[_0x5e779b(0x5f1)] + _0x5e779b(0x6b6)), _0x26f8b2(_0x5e779b(0x300)); } window['addTestPost'] = _0x524dbc; function _0xed925(_0x2a3b2b) { const _0x5849b8 = _0x2a98b7; if (_0x5849b8(0xa6d) === _0x5849b8(0xa6d)) return _0x4025fd['userProfiles']['find'](_0x27b290 => _0x27b290['id'] === _0x2a3b2b); else _0x38bcf9[_0x5849b8(0x963)](_0x5849b8(0x77f), _0x3b7f87), _0x29080b(_0x5849b8(0x723) + _0x4e3cf4[_0x5849b8(0x973)]); } function _0x32d19f(_0x471478, _0x400491 = _0x2a98b7(0x3e9)) { const _0x42984e = _0x2a98b7, _0x4d15b7 = document[_0x42984e(0x4b6)](_0x42984e(0x15e)); let _0x55d883 = document[_0x42984e(0x4b6)](_0x42984e(0x6bf)); if (_0x471478) { if (_0x42984e(0x711) === _0x42984e(0x711)) !_0x55d883 && (_0x55d883 = document[_0x42984e(0x597)](_0x42984e(0x80e)), _0x55d883['id'] = _0x42984e(0x6bf), _0x4d15b7[_0x42984e(0x329)](_0x55d883)), _0x55d883[_0x42984e(0x3c8)] = _0x42984e(0x192) + _0x400491 + _0x42984e(0x20c), _0x55d883[_0x42984e(0x636)][_0x42984e(0x6c5)] = 'flex'; else return _0x5baf29['userProfiles'][_0x42984e(0x32b)](_0xdd43cb => _0xdd43cb['id'] === _0x5528ff[_0x42984e(0x4a1)]) || _0x103445[_0x42984e(0x293)][0x0]; } else 'XoToR' === _0x42984e(0x62e) ? _0x574add() : _0x55d883 && (_0x55d883[_0x42984e(0x636)][_0x42984e(0x6c5)] = _0x42984e(0x55f)); } async function _0x42a75b() { const _0x2ecb21 = _0x2a98b7, _0x256843 = _0x4025fd[_0x2ecb21(0x9b0)][_0x2ecb21(0x32b)](_0x4ad1f7 => _0x4ad1f7['id'] === _0x4025fd[_0x2ecb21(0x31a)]); if (!_0x256843 || _0x4025fd[_0x2ecb21(0x517)]) return; _0x32d19f(!![], _0x2ecb21(0x170)), _0x4025fd[_0x2ecb21(0x517)] = !![]; try { let _0x181e40 = Date[_0x2ecb21(0x98c)](); _0x256843['posts'] && _0x256843[_0x2ecb21(0x13e)][_0x2ecb21(0x84b)] > 0x0 && (_0x181e40 = Math[_0x2ecb21(0x8cd)](..._0x256843[_0x2ecb21(0x13e)]['map'](_0x84859e => _0x84859e['timestamp']))); const _0x3038b2 = await _0x2df08c(_0x256843); if (!_0x3038b2 || _0x3038b2[_0x2ecb21(0x84b)] === 0x0) { _0x26f8b2('AI似乎没有想出任何新动态。'); return; } const _0x56701b = _0x3038b2['map'](async (_0x224172, _0x4b102e) => { const _0x4e5835 = _0x2ecb21; if (_0x4e5835(0x719) !== 'gTpVH') _0x1fc7d3['log'](_0x4e5835(0x269)), _0x40ce1d[_0x4e5835(0x38a)][_0x4e5835(0x8da)](_0x4e5835(0x522)), _0x32eea3[_0x4e5835(0x38a)] = null; else { _0x32d19f(!![], '刷新了\x20' + (_0x4b102e + 0x1) + _0x4e5835(0x416) + _0x3038b2[_0x4e5835(0x84b)] + '\x20条动态...'); const _0x306bbe = _0x181e40 + (_0x4b102e + 0x1) * 0x3c * 0x3e8, _0x23d426 = { 'id': _0x4e5835(0x781) + _0x224172[_0x4e5835(0xa84)] + '_' + _0x306bbe, 'authorType': _0x4e5835(0x5ef), 'authorId': _0x224172['authorId'], 'content': _0x224172[_0x4e5835(0x9b3)], 'timestamp': _0x306bbe, 'likes': _0x224172['likes'] || [], 'comments': (_0x224172[_0x4e5835(0xa83)] || [])[_0x4e5835(0x30c)]((_0x268343, _0xd5d4b5) => ({ 'commentId': 'c_' + _0x306bbe + '_' + _0xd5d4b5, 'authorId': _0x268343[_0x4e5835(0xa84)], 'content': _0x268343[_0x4e5835(0x9c6)] })) }; if (_0x224172[_0x4e5835(0x7ff)] === _0x4e5835(0x43a) && _0x224172[_0x4e5835(0x4c5)] && _0x224172[_0x4e5835(0x278)]) { if (_0x4e5835(0x90d) === _0x4e5835(0x926)) { _0x28e36c(_0x4e5835(0x526)); return; } else try { const _0x43fef2 = await _0x5dfa8e(_0x224172['songName'], _0x224172[_0x4e5835(0x278)]); _0x23d426[_0x4e5835(0xaa2)] = _0x4e5835(0x43a), _0x23d426[_0x4e5835(0x4c5)] = _0x224172[_0x4e5835(0x4c5)], _0x23d426[_0x4e5835(0x278)] = _0x224172['artist'], _0x23d426['coverUrl'] = _0x43fef2[_0x4e5835(0x549)], _0x23d426[_0x4e5835(0x22c)] = _0x43fef2['url']; } catch (_0x2194b0) { console[_0x4e5835(0x963)](_0x4e5835(0x129), _0x2194b0), _0x23d426[_0x4e5835(0xaa2)] = _0x4e5835(0xa20); } } else { if ('nZcaA' === _0x4e5835(0xa34)) _0x23d426['type'] = _0x4e5835(0xa20); else return { 'type': _0x4e5835(0x43a), 'songName': _0x92c11d[0x1][_0x4e5835(0x345)](), 'artist': _0x23b452[0x2][_0x4e5835(0x345)]() }; } return _0x23d426; } }), _0x8a7b79 = await Promise[_0x2ecb21(0x50c)](_0x56701b); _0x256843[_0x2ecb21(0x13e)][_0x2ecb21(0x65b)](..._0x8a7b79), _0x33c083(); } catch (_0x1c6548) { _0x2ecb21(0xa88) === _0x2ecb21(0x806) ? _0x1a0ba9['activeChatId'] = _0x1b8c3b[_0x2ecb21(0x132)][0x0]?.['id'] || null : (console[_0x2ecb21(0x963)](_0x2ecb21(0x375), _0x1c6548), _0x26f8b2(_0x2ecb21(0x8eb) + _0x1c6548[_0x2ecb21(0x973)])); } finally { _0x13aa1b(), _0x32d19f(![]), _0x4025fd[_0x2ecb21(0x517)] = ![]; } } async function _0x2df08c(_0x5345eb) { const _0x367fe6 = _0x2a98b7; if (_0x367fe6(0xaa9) !== _0x367fe6(0xaa9)) _0x52dfdf[_0x367fe6(0x6f1)](_0x367fe6(0x5f5)), _0x179961['removeItem']('cardWidgetState'), _0x128863('位置已重置，正在刷新...'), _0x3de992(() => _0x54a5cc['reload'](), 0x3e8); else { const _0x422074 = _0x5345eb[_0x367fe6(0x647)][_0x367fe6(0x30c)](_0x46809c => _0x389a36(_0x46809c))[_0x367fe6(0x1f9)](Boolean); if (_0x422074['length'] === 0x0) return null; const _0x22f36b = _0xe4da1e(), _0x5e26bb = _0xed925(_0x5345eb[_0x367fe6(0x774)]) || _0x4025fd['userProfiles'][0x0], _0x34476f = _0x5e26bb ? _0x367fe6(0x3ff) + _0x5e26bb[_0x367fe6(0x5f1)] + '\x0a-\x20人设:\x20' + (_0x5e26bb[_0x367fe6(0x8ad)] || '无') + '\x0a' : '', _0x42dad3 = _0x422074[_0x367fe6(0x30c)](_0x4a5cc6 => { const _0x2f162 = _0x367fe6, { omniText: _0x2f1a38 } = _0x204d24(_0x4a5cc6['id'], null), _0x4f2525 = _0x5b4257(_0x4a5cc6['id']), _0x4138ed = _0x4a5cc6[_0x2f162(0x859)] && _0x4a5cc6[_0x2f162(0x859)][_0x2f162(0x84b)] > 0x0 ? _0x2f162(0x2f9) + _0x4a5cc6[_0x2f162(0x5f1)] + _0x2f162(0x7c4) + _0x4a5cc6[_0x2f162(0x859)][_0x2f162(0x30c)](_0x2dd661 => _0x4025fd['worldBooks'][_0x2f162(0x32b)](_0x38d9b8 => _0x38d9b8['id'] === _0x2dd661))[_0x2f162(0x1f9)](Boolean)[_0x2f162(0x30c)](_0x35de02 => '\x0a##\x20条目:\x20' + _0x35de02[_0x2f162(0x5f1)] + '\x0a' + _0x35de02[_0x2f162(0x9c6)])[_0x2f162(0x602)]('') : ''; return _0x2f162(0x311) + _0x4a5cc6['name'] + _0x2f162(0x456) + _0x4a5cc6['id'] + _0x2f162(0x8c0) + _0x4a5cc6[_0x2f162(0x8ad)] + _0x2f162(0x478) + _0x2f1a38 + '\x0a' + _0x4f2525 + '\x0a' + _0x4138ed; })[_0x367fe6(0x602)]('\x0a\x0a'), _0xcb77f1 = Math[_0x367fe6(0x779)](Math['random']() * 0x3) + 0x2, _0x3fc940 = _0x367fe6(0x64d) + _0xcb77f1 + _0x367fe6(0x9b7) + _0x42dad3 + '\x0a' + _0x34476f + _0x367fe6(0xa24) + _0x22f36b + '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为' + _0xcb77f1 + _0x367fe6(0x4d2) + _0xcb77f1 + '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x40f09e = [{ 'role': _0x367fe6(0x6f9), 'content': _0x3fc940 }, { 'role': _0x367fe6(0x880), 'content': _0x367fe6(0x88d) }]; _0x40f09e[_0x367fe6(0x65b)]({ 'role': 'user', 'content': _0x367fe6(0x52e) + _0xcb77f1 + _0x367fe6(0x399) }); try { if (_0x367fe6(0x684) !== _0x367fe6(0x439)) { const _0x1401f8 = await _0x414037(_0x40f09e, { 'json': !![] }), _0x210ee3 = _0x1401f8[_0x367fe6(0x561)](/(\[[\s\S]*\])/); if (!_0x210ee3) throw new Error('AI未能返回有效的JSON数组格式。'); const _0x37c441 = _0x210ee3[0x1], _0xecdd27 = JSON[_0x367fe6(0x93f)](_0x37c441); if (!Array['isArray'](_0xecdd27)) throw new Error(_0x367fe6(0x195)); return _0xecdd27; } else _0x4d9b06 += _0x20c6f0[_0x367fe6(0x93f)](_0x55ed3a)[_0x367fe6(0x4ff)][0x0][_0x367fe6(0x9c6)]['parts'][0x0]['text']; } catch (_0x99c0e1) { return console['error']('批量生成动态失败:\x20', _0x99c0e1), console['error']('AI返回的原始文本:', _0x99c0e1[_0x367fe6(0x874)] || _0x367fe6(0x1b5)), null; } } } async function _0x510bbb() { const _0x2cfe8c = _0x2a98b7; if (_0x2cfe8c(0x904) !== _0x2cfe8c(0x904)) _0x1bdbc4[_0x2cfe8c(0x3ce)] = _0x3b2e17[_0x2cfe8c(0x650)]; else { const _0x4578b7 = _0x4025fd[_0x2cfe8c(0x9b0)]['find'](_0xbed61f => _0xbed61f['id'] === _0x4025fd[_0x2cfe8c(0x31a)]); if (!_0x4578b7) return; const _0x3ff66a = await _0x2f2e39(_0x2cfe8c(0x527) + _0x4578b7[_0x2cfe8c(0x5f1)] + '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。'); if (_0x3ff66a) { if ('MZAtp' !== 'MZAtp') { _0x43d89d[_0x2cfe8c(0x95e)] = ''; return; } else _0x4578b7[_0x2cfe8c(0x13e)] = [], _0x33c083(), _0x13aa1b(), _0x26f8b2(_0x2cfe8c(0x88e)); } } } function _0x13aa1b() { const _0x1fa7ef = _0x2a98b7, _0xd79e34 = document[_0x1fa7ef(0x4b6)](_0x1fa7ef(0x674)), _0x58b6ae = _0x4025fd[_0x1fa7ef(0x9b0)][_0x1fa7ef(0x32b)](_0x25f193 => _0x25f193['id'] === _0x4025fd[_0x1fa7ef(0x31a)]); if (!_0x58b6ae) { _0xd79e34[_0x1fa7ef(0x3c8)] = _0x1fa7ef(0x4aa); return; } if (!_0x58b6ae['posts'] || _0x58b6ae[_0x1fa7ef(0x13e)][_0x1fa7ef(0x84b)] === 0x0) { _0xd79e34[_0x1fa7ef(0x3c8)] = _0x1fa7ef(0x9ac); return; } _0xd79e34['innerHTML'] = ''; const _0x53e0c1 = [..._0x58b6ae[_0x1fa7ef(0x13e)]][_0x1fa7ef(0x419)]((_0x54d1ed, _0x4d52fd) => _0x4d52fd[_0x1fa7ef(0x36b)] - _0x54d1ed['timestamp']); _0x53e0c1['forEach'](_0x1bc44f => { const _0x1ffc90 = _0x1fa7ef, _0x4ea230 = document[_0x1ffc90(0x597)]('div'); _0x4ea230[_0x1ffc90(0x575)] = 'music-post'; let _0x45ed1c = '未知', _0x1121ee = _0x535078; if (_0x1bc44f[_0x1ffc90(0x6f6)] === _0x1ffc90(0x880)) { if (_0x1ffc90(0x1eb) !== _0x1ffc90(0x696)) { const _0x225848 = _0xed925(_0x1bc44f[_0x1ffc90(0xa84)]); _0x225848 && (_0x1ffc90(0x687) === _0x1ffc90(0x687) ? (_0x45ed1c = _0x225848[_0x1ffc90(0x5f1)], _0x1121ee = _0x225848[_0x1ffc90(0x12d)]) : _0x2b356c(_0xe28d4['id'])); } else { const _0x5b5880 = _0x41af26[_0x1ffc90(0x597)](_0x1ffc90(0x80e)); _0x5b5880[_0x1ffc90(0x575)] = 'html-module-container', _0x5b5880[_0x1ffc90(0x3c8)] = _0x188c84, _0x1f7b24 === 'user' ? (_0x41eee1[_0x1ffc90(0x329)](_0x5b5880), _0x3b84f6[_0x1ffc90(0x329)](_0x3850a7)) : (_0x7325d8[_0x1ffc90(0x329)](_0x472b06), _0x382057[_0x1ffc90(0x329)](_0x5b5880)); } } else { const _0x2c77ba = _0x389a36(_0x1bc44f['authorId']); _0x2c77ba && ('IIslu' === _0x1ffc90(0x94f) ? (_0x45ed1c = _0x2c77ba[_0x1ffc90(0x5f1)], _0x1121ee = _0x2c77ba[_0x1ffc90(0x12d)]) : _0x4f095c(_0x1ffc90(0x72c) + _0x3ce95e[_0x1ffc90(0x973)])); } const _0x2d7b22 = _0x1ffc90(0xa49) + _0x1121ee + _0x1ffc90(0x9e0) + _0x45ed1c + _0x1ffc90(0x1c8), _0x47234d = _0x1ffc90(0x9a9) + _0x1bc44f[_0x1ffc90(0x9c6)] + _0x1ffc90(0x90c); let _0x4ca996 = ''; if (_0x1bc44f[_0x1ffc90(0x3b9)] || _0x1bc44f[_0x1ffc90(0x3c7)]) { const _0x1ae76b = _0x1ffc90(0x14c) + _0x1bc44f['id']; _0x4ca996 = _0x1ffc90(0x391) + _0x1ae76b + _0x1ffc90(0x4f8), setTimeout(() => { const _0x2bd331 = _0x1ffc90, _0x2b46e9 = document[_0x2bd331(0x4b6)](_0x1ae76b); if (!_0x2b46e9) return; if (_0x1bc44f[_0x2bd331(0x3b9)]) _0x2bd331(0x42e) !== 'iwzaE' ? _0x2b46e9[_0x2bd331(0x2fd)] = _0x1bc44f['image'] : _0x2e39f5 += _0x2bd331(0x765); else _0x1bc44f[_0x2bd331(0x3c7)] && (_0x2bd331(0xa48) !== 'dkHWZ' ? _0x34b988(_0x1bc44f[_0x2bd331(0x3c7)])['then'](_0x54fd64 => { const _0x5a8f5e = _0x2bd331; if (_0x5a8f5e(0x5d5) !== _0x5a8f5e(0x5d5)) { const _0x4a4b3f = _0x290d96[_0x5a8f5e(0x4b6)](_0x43745c); if (_0x4a4b3f) _0x4a4b3f[_0x5a8f5e(0x2fd)] = _0x512a41[_0x5a8f5e(0x3ad)]; } else { if (_0x54fd64) { const _0x3ed785 = URL['createObjectURL'](_0x54fd64); _0x2b46e9['src'] = _0x3ed785, _0x2b46e9[_0x5a8f5e(0x422)] = () => URL[_0x5a8f5e(0x883)](_0x3ed785); } } }) : (_0x4a2fac(_0x288642), _0x9bcea5 = null)); }, 0x0); } let _0x1be6bf = ''; _0x1bc44f[_0x1ffc90(0xaa2)] === _0x1ffc90(0x43a) && _0x1bc44f[_0x1ffc90(0x4c5)] && (_0x1be6bf = _0x1ffc90(0x724) + _0x1bc44f['id'] + _0x1ffc90(0x60b) + (_0x1bc44f['coverUrl'] || _0x535078) + _0x1ffc90(0x693) + _0x1bc44f[_0x1ffc90(0x4c5)] + _0x1ffc90(0x65f) + _0x1bc44f['artist'] + _0x1ffc90(0x51c) + (_0x1bc44f[_0x1ffc90(0x22c)] ? '▶' : '⚠') + _0x1ffc90(0xaac)); const _0x323420 = _0x1ffc90(0xab5) + new Date(_0x1bc44f[_0x1ffc90(0x36b)])['toLocaleString'](_0x1ffc90(0x838)) + _0x1ffc90(0x86f); let _0x26b899 = ''; if (_0x1bc44f[_0x1ffc90(0x4d9)] && _0x1bc44f['likes'][_0x1ffc90(0x84b)] > 0x0 || _0x1bc44f[_0x1ffc90(0xa83)] && _0x1bc44f[_0x1ffc90(0xa83)]['length'] > 0x0) { if ('KggZq' !== 'rtrPo') { let _0x415db2 = ''; if (_0x1bc44f['likes'] && _0x1bc44f[_0x1ffc90(0x4d9)][_0x1ffc90(0x84b)] > 0x0) { if (_0x1ffc90(0xa00) === _0x1ffc90(0xa00)) { const _0x5824fc = _0x1bc44f['likes'][_0x1ffc90(0x30c)](_0x2cae4f => _0x389a36(_0x2cae4f)?.[_0x1ffc90(0x5f1)] || '未知')[_0x1ffc90(0x602)]('、'), _0xd69779 = _0x1ffc90(0x257); _0x415db2 = _0x1ffc90(0x5c8) + _0xd69779 + '\x20' + _0x5824fc + _0x1ffc90(0x86f); } else _0xab6d60[_0x1ffc90(0x65b)]('[' + _0x36f75f + ']\x20[' + _0x4c9f82(_0x43fc84) + ']\x20' + _0x3c40a1(_0x5342d1[_0x1ffc90(0x9c6)])['trim']()); } let _0x3804da = ''; if (_0x1bc44f[_0x1ffc90(0xa83)] && _0x1bc44f[_0x1ffc90(0xa83)]['length'] > 0x0) { if (_0x1ffc90(0xa09) === 'fIXau') { _0x5f20e7('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else { const _0x43e82d = _0x1bc44f[_0x1ffc90(0xa83)][_0x1ffc90(0x30c)](_0x196aba => { const _0x473dee = _0x1ffc90, _0x229412 = _0x389a36(_0x196aba['authorId'])?.[_0x473dee(0x5f1)] || '未知'; return _0x473dee(0x8f3) + _0x229412 + _0x473dee(0x714) + _0x196aba[_0x473dee(0x9c6)] + _0x473dee(0x86f); })[_0x1ffc90(0x602)](''); _0x3804da = _0x1ffc90(0x8c7) + _0x43e82d + '</div>'; } } _0x26b899 = _0x1ffc90(0x6e1) + _0x415db2 + _0x1ffc90(0x64b) + _0x3804da + _0x1ffc90(0x5d0); } else _0x57a9b1[_0x1ffc90(0x544)][_0x1ffc90(0x82e)](_0x1ffc90(0x187)); } const _0x246893 = _0x1ffc90(0x832) + _0x47234d + _0x4ca996 + _0x1be6bf + _0x1ffc90(0x86f); _0x4ea230['innerHTML'] = _0x2d7b22 + _0x246893 + _0x323420 + _0x26b899; if (_0x1bc44f[_0x1ffc90(0xaa2)] === _0x1ffc90(0x43a) && _0x1bc44f['playableUrl']) { const _0x9a2c66 = _0x4ea230['querySelector'](_0x1ffc90(0x383)); if (_0x9a2c66) { if ('PiGEu' !== _0x1ffc90(0x8b4)) _0x9a2c66[_0x1ffc90(0x20b)](_0x1ffc90(0xab8), function () { const _0x76168c = _0x1ffc90; if ('ZcAye' !== _0x76168c(0x2fa)) { const _0x8a34e6 = { 'id': _0x1bc44f['id'], 'url': _0x1bc44f[_0x76168c(0x22c)] }; _0x262c75(this, _0x8a34e6); } else _0x44fed1[_0x76168c(0x65b)]({ 'role': 'user', 'content': _0x52c672 }), _0x170fe8[_0x76168c(0x65b)]({ 'role': _0x76168c(0x135), 'content': _0x76168c(0x828) }); }); else { const _0x12269e = _0x5d4771['split'](/:\s(.+)/); if (_0x12269e['length'] > 0x1) { const _0xf72e35 = _0x12269e[0x0][_0x1ffc90(0x345)](), _0x41df95 = _0x12269e[0x1][_0x1ffc90(0x345)]()['replace'](/^"|"$/g, ''); _0x5d09b8[_0xf72e35] = _0x41df95; } } } } _0xd79e34[_0x1ffc90(0x329)](_0x4ea230); }); } document['getElementById']('clear-feed-button')['addEventListener'](_0x2a98b7(0xab8), _0x510bbb), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x882))['addEventListener'](_0x2a98b7(0xab8), _0x42a75b), document[_0x2a98b7(0x4b6)]('back-to-home-from-circle-list')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967(_0x2a98b7(0x786), _0x2a98b7(0xabb))), document['getElementById']('add-friend-circle-button')[_0x2a98b7(0x20b)]('click', () => _0xd35bfc()), document[_0x2a98b7(0x4b6)]('back-to-circle-list-from-edit')['addEventListener'](_0x2a98b7(0xab8), () => _0x102967(_0x2a98b7(0xabb), _0x2a98b7(0x2d8))), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x346))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x41a95c), document[_0x2a98b7(0x4b6)]('delete-friend-circle-button')['addEventListener'](_0x2a98b7(0xab8), _0x36de59), document[_0x2a98b7(0x4b6)]('back-to-circle-list-from-feed')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x3a9f39 = _0x2a98b7; _0x1984e0(), _0x102967(_0x3a9f39(0xabb), 'music'); }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x863))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x35c5e5 = _0x2a98b7; if (_0x35c5e5(0x166) === _0x35c5e5(0x166)) _0x4025fd[_0x35c5e5(0x31a)] && _0xd35bfc(_0x4025fd[_0x35c5e5(0x31a)]); else { if (_0x586e57[_0x35c5e5(0x84b)] === 0x0) return; _0x1c5859 = (_0x503bbd + 0x1) % _0x5433bf[_0x35c5e5(0x84b)], _0x26d425(_0x5d41ed[_0x3467ff], _0x59148b); } }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x4a7))['addEventListener']('click', async () => { const _0x4ecffe = _0x2a98b7, _0xda2200 = _0x4025fd[_0x4ecffe(0x9b0)][_0x4ecffe(0x32b)](_0x55a186 => _0x55a186['id'] === _0x4025fd[_0x4ecffe(0x31a)]); if (!_0xda2200 || _0x4025fd['isGenerating']) return; const _0x3eb010 = _0xda2200[_0x4ecffe(0x774)], _0x331415 = _0x4025fd['userProfiles'][_0x4ecffe(0x32b)](_0x3a1e31 => _0x3a1e31['id'] === _0x3eb010); if (!_0x331415) { _0x26f8b2('错误：找不到此好友圈绑定的用户！'); return; } const _0x264891 = document[_0x4ecffe(0x4b6)]('user-post-textarea')[_0x4ecffe(0x95e)][_0x4ecffe(0x345)](), _0x44bdbd = _0x4025fd[_0x4ecffe(0x9a4)][_0x4ecffe(0x3b9)], _0x18eb48 = _0x4025fd['pendingPostAttachments'][_0x4ecffe(0x43a)], _0x18c95e = _0x4025fd[_0x4ecffe(0x9a4)][_0x4ecffe(0x3c7)]; if (!_0x264891 && !_0x44bdbd && !_0x18eb48) { if ('JkWfr' !== _0x4ecffe(0x3d0)) { _0x26f8b2(_0x4ecffe(0x9a0)); return; } else _0x3a091f = _0x4ecffe(0x7e7), _0x4196e7 = _0x4ecffe(0x979) + _0x5cfb44 + _0x4ecffe(0x24e); } const _0x19ac42 = { 'id': _0x4ecffe(0x61f) + Date[_0x4ecffe(0x98c)](), 'authorType': _0x4ecffe(0x880), 'authorId': _0x331415['id'], 'content': _0x264891, 'timestamp': Date[_0x4ecffe(0x98c)](), 'likes': [], 'comments': [] }; if (_0x18c95e) _0x19ac42['imageId'] = _0x18c95e; else _0x44bdbd && (_0x19ac42[_0x4ecffe(0x3b9)] = _0x44bdbd); _0x18eb48 ? _0x4ecffe(0x61b) === _0x4ecffe(0x61b) ? (_0x19ac42[_0x4ecffe(0xaa2)] = _0x4ecffe(0x43a), Object[_0x4ecffe(0x2b6)](_0x19ac42, _0x18eb48)) : _0x3dccc5[_0x4ecffe(0x7f8)]() : _0x19ac42['type'] = 'text', _0xda2200[_0x4ecffe(0x13e)]['push'](_0x19ac42), _0x33c083(), _0x13aa1b(), document[_0x4ecffe(0x4b6)](_0x4ecffe(0x75e))[_0x4ecffe(0x95e)] = '', _0x4025fd[_0x4ecffe(0x9a4)]['image'] = null, _0x4025fd['pendingPostAttachments'][_0x4ecffe(0x43a)] = null, _0x4025fd['pendingPostAttachments']['imageId'] = null, _0x5897d7(), _0x417ae0(_0x19ac42); }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x8f5))['addEventListener'](_0x2a98b7(0xab8), () => { const _0xa1c2e6 = _0x2a98b7; document[_0xa1c2e6(0x4b6)]('user-post-image-input')[_0xa1c2e6(0xab8)](); }), document['getElementById']('user-post-image-input')[_0x2a98b7(0x20b)](_0x2a98b7(0x6a4), async _0x36828f => { const _0x3096f1 = _0x2a98b7, _0x3eec3b = _0x36828f[_0x3096f1(0x492)][_0x3096f1(0x1f1)][0x0]; if (!_0x3eec3b) return; try { const _0x2e3754 = await _0x245ee4(_0x3eec3b, 0x320, 0.8, !![]), _0x4597a1 = 'post_image_' + Date[_0x3096f1(0x98c)](); await _0x5a7151(_0x4597a1, _0x2e3754), _0x4025fd[_0x3096f1(0x9a4)][_0x3096f1(0x3c7)] = _0x4597a1, _0x4025fd[_0x3096f1(0x9a4)][_0x3096f1(0x3b9)] = null, _0x4025fd['pendingPostAttachments'][_0x3096f1(0x43a)] = null, _0x5897d7(); } catch (_0x362969) { _0x26f8b2(_0x3096f1(0x511) + _0x362969['message']); } _0x36828f[_0x3096f1(0x492)][_0x3096f1(0x95e)] = ''; }), document['getElementById']('user-post-music-button')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), async () => { const _0x11bda0 = _0x2a98b7; if (_0x11bda0(0x251) === _0x11bda0(0xa9b)) _0x10db29(), _0x472459(); else { const _0x23c9b2 = await _0xa1948f(); if (!_0x23c9b2) return; _0x26f8b2(_0x11bda0(0x7ec)); try { const _0x3eb468 = await _0x5dfa8e(_0x23c9b2['songName'], _0x23c9b2['artist']); _0x4025fd[_0x11bda0(0x9a4)]['music'] = { 'songName': _0x23c9b2[_0x11bda0(0x4c5)], 'artist': _0x23c9b2[_0x11bda0(0x278)], 'coverUrl': _0x3eb468['cover'], 'playableUrl': _0x3eb468[_0x11bda0(0x13f)] }, _0x4025fd[_0x11bda0(0x9a4)][_0x11bda0(0x3b9)] = null, _0x5897d7(); } catch (_0x1d976b) { _0x11bda0(0x469) !== 'yYSPt' ? _0x26f8b2(_0x11bda0(0x164) + _0x1d976b[_0x11bda0(0x973)]) : !_0x25640e['contains'](_0x4801a1[_0x11bda0(0x492)]) && _0x1520db[_0x11bda0(0x492)] !== _0x14e6f9 && _0x305849[_0x11bda0(0x492)] !== _0x430f2b && _0x5a074b[_0x11bda0(0x544)][_0x11bda0(0x7f8)](_0x11bda0(0x187)); } } }); function _0x18ada3() { const _0x356c54 = _0x2a98b7, _0xe7fa8c = new Date(), _0x3d371a = document[_0x356c54(0x4b6)](_0x356c54(0x490)), _0x880a0 = document[_0x356c54(0x4b6)](_0x356c54(0x388)); if (_0x3d371a && _0x880a0) { const _0x3d6b20 = String(_0xe7fa8c['getHours']())['padStart'](0x2, '0'), _0x4aafdb = String(_0xe7fa8c[_0x356c54(0x24d)]())[_0x356c54(0x412)](0x2, '0'); _0x3d371a['textContent'] = _0x3d6b20 + ':' + _0x4aafdb; const _0x34149d = _0xe7fa8c['getMonth']() + 0x1, _0x5d7279 = _0xe7fa8c[_0x356c54(0x1f6)](), _0x85069b = [_0x356c54(0x16f), _0x356c54(0x8bb), _0x356c54(0x671), '星期三', _0x356c54(0x145), '星期五', _0x356c54(0x923)][_0xe7fa8c[_0x356c54(0x94e)]()]; _0x880a0['textContent'] = _0x34149d + '月' + _0x5d7279 + '日\x20' + _0x85069b; } } function _0x185511(_0x453ccb) { const _0x226d0a = _0x2a98b7; if (_0x226d0a(0x91a) !== 'ciHXb') { const _0x104241 = _0x1c925f['target'][_0x226d0a(0x8e8)]; _0x5824dd[_0x226d0a(0x66c)]('Upgrading\x20database\x20to\x20version\x20' + _0x104241[_0x226d0a(0x177)] + _0x226d0a(0x133)), !_0x104241[_0x226d0a(0x56c)][_0x226d0a(0x61a)](_0x3e742c) && (_0x50ad07[_0x226d0a(0x66c)](_0x226d0a(0x23d) + _0x1ed68c), _0x104241[_0x226d0a(0x8f7)](_0x415adf, { 'keyPath': 'id' })), !_0x104241['objectStoreNames'][_0x226d0a(0x61a)](_0x226d0a(0x94b)) && (_0x49522f['log'](_0x226d0a(0x570)), _0x104241[_0x226d0a(0x8f7)](_0x226d0a(0x94b), { 'keyPath': 'id' })), !_0x104241[_0x226d0a(0x56c)][_0x226d0a(0x61a)](_0x469270) && (_0x289770['log'](_0x226d0a(0x23d) + _0x508448), _0x104241[_0x226d0a(0x8f7)](_0x1df8d0, { 'keyPath': 'id' })); } else { if (!_0x453ccb) return ''; const _0x92bb3e = new Date(_0x453ccb), _0x1038c6 = String(_0x92bb3e[_0x226d0a(0x3fa)]())['padStart'](0x2, '0'), _0x2fb949 = String(_0x92bb3e[_0x226d0a(0x24d)]())[_0x226d0a(0x412)](0x2, '0'); return _0x1038c6 + ':' + _0x2fb949; } } function _0xe4da1e() { const _0x3d5234 = _0x2a98b7, _0x8177f4 = _0x4025fd[_0x3d5234(0x9b0)]['find'](_0x55e11e => _0x55e11e['id'] === _0x4025fd[_0x3d5234(0x31a)]), _0x52cc04 = _0x8177f4 ? _0x8177f4[_0x3d5234(0x13e)] : []; if (!_0x52cc04 || _0x52cc04[_0x3d5234(0x84b)] === 0x0) return ''; const _0x14befa = _0x52cc04[_0x3d5234(0xab4)](0x0, 0x5), _0x7bf2b4 = _0x14befa['map'](_0x4f2875 => { const _0x59622a = _0x3d5234, _0x2e0f7c = _0x389a36(_0x4f2875[_0x59622a(0xa84)]) || { 'name': '未知' }; let _0x3448fd = _0x59622a(0x5b9) + _0x2e0f7c[_0x59622a(0x5f1)] + '\x20说：“' + (_0x4f2875[_0x59622a(0x8e4)] || _0x4f2875[_0x59622a(0x9c6)]) + '”'; return _0x4f2875[_0x59622a(0xaa2)] === _0x59622a(0x43a) && (_0x3448fd += _0x59622a(0x4a3) + _0x4f2875[_0x59622a(0x4c5)] + '\x20-\x20' + _0x4f2875[_0x59622a(0x278)] + ')'), _0x3448fd; }); return _0x3d5234(0x3fc) + _0x7bf2b4[_0x3d5234(0x602)]('\x0a'); } function _0x5b4257(_0x211cb0) { const _0x48ab4e = _0x2a98b7, _0x1b03d6 = _0x4025fd[_0x48ab4e(0x293)][_0x48ab4e(0x32b)](_0x4dcf78 => _0x4dcf78['id'] === _0x4025fd['activeUserProfileId']) || { 'name': '你' }, _0x517d85 = _0x4025fd[_0x48ab4e(0xab2)]['find'](_0x187a68 => _0x187a68[_0x48ab4e(0x3c0)] === _0x211cb0); if (!_0x517d85 || !_0x517d85['entries'] || _0x517d85[_0x48ab4e(0x204)][_0x48ab4e(0x84b)] === 0x0) return ''; const _0x191190 = _0x517d85[_0x48ab4e(0x204)]['slice'](-0x8), _0x2b210f = _0x191190['map'](_0x1921a3 => { const _0x581ad9 = _0x48ab4e; if (_0x581ad9(0x81a) !== _0x581ad9(0x845)) { const _0x339da9 = _0x1921a3[_0x581ad9(0x675)] === _0x581ad9(0x880) ? _0x1b03d6[_0x581ad9(0x5f1)] : _0x389a36(_0x1921a3[_0x581ad9(0x675)])[_0x581ad9(0x5f1)]; return _0x581ad9(0x580) + new Date(_0x1921a3['timestamp'])[_0x581ad9(0x213)]() + ']\x20' + _0x339da9 + '\x20写道:\x20' + _0x1921a3[_0x581ad9(0x9c6)]; } else { const _0x3d70e9 = _0x5c23ac[_0x581ad9(0x293)][_0x581ad9(0x32b)](_0x549ef4 => _0x549ef4['id'] === _0x5e284b); if (!_0x3d70e9) return; _0x1f3b7d[_0x581ad9(0x4b6)](_0x581ad9(0x97d))[_0x581ad9(0x95e)] = _0x3d70e9['id'], _0x21657d[_0x581ad9(0x4b6)](_0x581ad9(0xac2))[_0x581ad9(0xab3)] = _0x581ad9(0x476), _0x1f0663[_0x581ad9(0x4b6)]('user-name')['value'] = _0x3d70e9[_0x581ad9(0x5f1)], _0x42f7ab[_0x581ad9(0x4b6)](_0x581ad9(0x750))[_0x581ad9(0x2fd)] = _0x3d70e9[_0x581ad9(0x12d)], _0x1d8cea[_0x581ad9(0x4b6)](_0x581ad9(0x712))[_0x581ad9(0x95e)] = _0x3d70e9[_0x581ad9(0x8ad)], _0x554781[_0x581ad9(0x636)][_0x581ad9(0x6c5)] = _0x3d70e9['id'] === _0x3e9d4b[_0x581ad9(0x4a1)] ? _0x581ad9(0x55f) : _0x581ad9(0x493); } })[_0x48ab4e(0x602)]('\x0a'); return _0x48ab4e(0x5c6) + _0x1b03d6[_0x48ab4e(0x5f1)] + _0x48ab4e(0x297) + _0x2b210f; } function _0x145ba5() { const _0x34b99a = _0x2a98b7, _0x195523 = document[_0x34b99a(0x4b6)](_0x34b99a(0x3c6)), _0xeee55 = _0x4025fd[_0x34b99a(0x271)]['widgetBgImage']; _0xeee55 ? (_0x195523[_0x34b99a(0x636)]['backgroundImage'] = _0x34b99a(0x7c2) + _0xeee55 + ')', _0x195523[_0x34b99a(0x636)][_0x34b99a(0x799)] = _0x34b99a(0x549), _0x195523[_0x34b99a(0x636)]['backgroundPosition'] = _0x34b99a(0x5c1), _0x195523['style']['color'] = _0x34b99a(0x437), _0x195523['querySelectorAll'](_0x34b99a(0x2f6))['forEach'](_0xdcc47c => { const _0x4aa739 = _0x34b99a; _0xdcc47c['style'][_0x4aa739(0x7c6)] = _0x4aa739(0x548); })) : (_0x195523[_0x34b99a(0x636)][_0x34b99a(0x4b7)] = '', _0x195523[_0x34b99a(0x636)][_0x34b99a(0x94c)] = '', _0x195523[_0x34b99a(0x4e3)](_0x34b99a(0x2f6))[_0x34b99a(0x6ff)](_0x5718e7 => { const _0x5808c3 = _0x34b99a; _0x5808c3(0xaba) !== 'hOJrz' ? _0x5718e7[_0x5808c3(0x636)][_0x5808c3(0x7c6)] = '' : _0x54c9cb[_0x5808c3(0x963)](_0x5808c3(0x44f), _0x540e2f); })); } const _0x1bf5d1 = document['getElementById']('app-music'), _0x1f54ee = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x2c8)); _0x1bf5d1[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x282b2b = _0x2a98b7; if ('FlLqY' !== _0x282b2b(0x4f4)) _0x1984e0(), _0x102967(_0x282b2b(0xabb), _0x282b2b(0x786)); else return _0x435bde(_0x282b2b(0x4ba)), ![]; }), _0x1f54ee['addEventListener'](_0x2a98b7(0xab8), () => { const _0x1cac9f = _0x2a98b7; _0x354fce(), _0x102967(_0x1cac9f(0x2c9), _0x1cac9f(0x786)); }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x1a0))['addEventListener']('click', () => { const _0xa370ab = _0x2a98b7; _0x102967(_0xa370ab(0x786), _0xa370ab(0x2c9)); }), document[_0x2a98b7(0x4b6)]('back-to-meeting-list')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x4e290e = _0x2a98b7; if (_0x4e290e(0x12e) === _0x4e290e(0x149)) { _0x5e3efe(_0x4e290e(0x9be)); return; } else { if (_0x376663) clearInterval(_0x376663); _0x376663 = null, _0x4025fd['activeMeetingScriptQueue'] = [], _0x4025fd[_0x4e290e(0xa4e)] = null, document[_0x4e290e(0x4b6)]('galgame-sprite-adjust-ui')[_0x4e290e(0x636)][_0x4e290e(0x6c5)] = _0x4e290e(0x55f), _0x4025fd[_0x4e290e(0xa4d)] = null, _0x33c083(), _0x102967(_0x4e290e(0x2c9), 'meetingView'); } }); const _0x1134b6 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x5aa)), _0x599763 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x851)); _0x599763['addEventListener']('click', () => { const _0x281901 = _0x2a98b7; if (_0x281901(0x8df) !== _0x281901(0x6e9)) { const _0x295460 = _0x1134b6[_0x281901(0x95e)][_0x281901(0x345)](); _0x295460 && (_0x4d26ec(_0x295460), _0x1134b6[_0x281901(0x95e)] = '', setTimeout(_0x4e1acc, 0x64)); } else _0xddf0c[_0x281901(0x963)](_0x281901(0x7f7), _0x1bcc21); }); function _0x262c75(_0x58742a, _0x267bdc) { const _0x7610cd = _0x2a98b7, _0x5f3da2 = document[_0x7610cd(0x4b6)]('audio-player'), _0x92334b = document['querySelectorAll'](_0x7610cd(0x584)); _0x92334b[_0x7610cd(0x6ff)](_0x1cfa3a => { const _0x1b9c89 = _0x7610cd; if (_0x1b9c89(0x80b) !== _0x1b9c89(0x80b)) { _0x50408e && _0x2a8b65[_0x1b9c89(0x65b)](_0x130c9b); _0x59ed02 = {}; const _0x5451e2 = _0x19c84a[_0x1b9c89(0xa4a)](0x2), _0x55f39f = _0x5451e2[_0x1b9c89(0x80a)](/:\s(.+)/); if (_0x55f39f[_0x1b9c89(0x84b)] > 0x1) { const _0x9fbb29 = _0x55f39f[0x0]['trim'](), _0x5aa7bd = _0x55f39f[0x1][_0x1b9c89(0x345)]()[_0x1b9c89(0x829)](/^"|"$/g, ''); _0x518b93[_0x9fbb29] = _0x5aa7bd; } } else _0x1cfa3a !== _0x58742a[_0x1b9c89(0x6f8)](_0x1b9c89(0x584)) && (_0x1cfa3a[_0x1b9c89(0xab3)] = '▶'); }), _0x5f3da2[_0x7610cd(0x2fd)] === _0x267bdc[_0x7610cd(0x13f)] && !_0x5f3da2['paused'] ? (_0x5f3da2[_0x7610cd(0x59d)](), _0x58742a['querySelector'](_0x7610cd(0x584))['textContent'] = '▶') : (_0x5f3da2[_0x7610cd(0x2fd)] = _0x267bdc[_0x7610cd(0x13f)], _0x5f3da2[_0x7610cd(0x81e)](), _0x58742a[_0x7610cd(0x6f8)](_0x7610cd(0x584))[_0x7610cd(0xab3)] = '❚❚'); } const _0x270b9b = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x96e)); async function _0x49408a(_0x5b8e62) { const _0x537519 = _0x2a98b7; if (_0x537519(0x72d) === _0x537519(0x72d)) { if (!_0x5b8e62 || !_0x5b8e62[_0x537519(0x914)](_0x537519(0x9e1))) return ![]; return new Promise(_0x763c09 => { const _0x5886ac = _0x537519, _0x478499 = document['createElement'](_0x5886ac(0x91b)); _0x478499[_0x5886ac(0x2fd)] = _0x5b8e62; const _0x48bfb8 = setTimeout(() => { _0x5a9137(), _0x763c09(![]); }, 0xbb8), _0x5a9137 = () => { const _0x18afd9 = _0x5886ac; 'adGdn' !== _0x18afd9(0x658) ? _0x3bd1d1(_0x18afd9(0x6a7), '聊天') : (clearTimeout(_0x48bfb8), _0x478499[_0x18afd9(0x4f5)]('canplaythrough', _0x52e573), _0x478499[_0x18afd9(0x4f5)](_0x18afd9(0x963), _0x48589d), _0x478499[_0x18afd9(0x2fd)] = '', _0x478499[_0x18afd9(0x7f8)]()); }, _0x52e573 = () => { const _0x51ca39 = _0x5886ac; 'esFFW' !== 'EgArB' ? (_0x5a9137(), _0x763c09(!![])) : (_0x62251f += _0x51ca39(0x2c3), _0x136edd[_0x51ca39(0x66c)][_0x51ca39(0x6ff)](_0x9aaf23 => { const _0x519154 = _0x51ca39, _0x149be9 = _0x9aaf23[_0x519154(0x80f)] === _0x519154(0x5ef) ? '你' : _0xc0e1b4[_0x519154(0xa50)]; _0x39ed52 += _0x519154(0x232) + _0x149be9 + ':\x20' + _0x9aaf23[_0x519154(0x9c6)] + '\x0a'; })); }, _0x48589d = () => { const _0x3d51f1 = _0x5886ac; _0x3d51f1(0x945) === 'EjfSW' ? (_0x5a9137(), _0x763c09(![])) : (_0x111dc4[_0x3d51f1(0xab3)] = '暂无音乐', _0x32578a[_0x3d51f1(0xab3)] = '请在动态或聊天中播放', _0x26862d[_0x3d51f1(0x544)][_0x3d51f1(0x7f8)]('is-playing'), _0x5ecbd6[_0x3d51f1(0x636)]['setProperty'](_0x3d51f1(0x895), _0x3d51f1(0x55f))); }; _0x478499['addEventListener'](_0x5886ac(0x236), _0x52e573), _0x478499[_0x5886ac(0x20b)](_0x5886ac(0x963), _0x48589d); }); } else { if (_0x343dab) _0x5c6886(_0x10b138); if (_0x552a88[_0x537519(0x931)]) return; _0x24c595(() => { const _0xbe0118 = _0x537519; _0x4abef && _0x555571(_0x3a1298['id'], _0x4452bd[_0xbe0118(0x30c)](_0x4decf5 => _0x4decf5['id'])); }, 0x32); } } async function _0x5dfa8e(_0x2c5fc6, _0x116065) { const _0x56eb46 = _0x2a98b7, _0x35e6ca = [_0x56eb46(0x909), _0x56eb46(0x666)]; for (const _0x4a41ca of _0x35e6ca) { try { const _0x311bfa = _0x56eb46(0xaa1) + _0x4a41ca + _0x56eb46(0x481) + encodeURIComponent(_0x2c5fc6) + '-' + encodeURIComponent(_0x116065), _0x397fe7 = await fetch(_0x311bfa), _0x1234a9 = await _0x397fe7[_0x56eb46(0x567)](); if (_0x1234a9[_0x56eb46(0x5f9)] !== 0xc8 || !_0x1234a9[_0x56eb46(0x822)] || _0x1234a9[_0x56eb46(0x822)][_0x56eb46(0x84b)] === 0x0) continue; const _0x3207a8 = _0x1234a9[_0x56eb46(0x822)][_0x56eb46(0xab4)](0x0, 0x5); for (const _0x1a0591 of _0x3207a8) { const _0x44b756 = 'https://api.vkeys.cn/v2/music/' + _0x4a41ca + '?id=' + _0x1a0591['id'], _0x11e6ee = await fetch(_0x44b756), _0x2d3721 = await _0x11e6ee[_0x56eb46(0x567)](), _0x3a5d43 = _0x2d3721[_0x56eb46(0x822)]?.[_0x56eb46(0x13f)]; if (await _0x49408a(_0x3a5d43)) return { 'url': _0x3a5d43, 'cover': _0x1a0591[_0x56eb46(0x549)], 'source': _0x4a41ca }; } } catch (_0x35e0ec) { if (_0x56eb46(0x2ec) !== _0x56eb46(0x2ec)) { const _0xb88cb7 = _0x51418f[_0x56eb46(0x93f)](_0xa79e93[_0x56eb46(0x47c)](_0x56eb46(0x1b3)) || '{}'), _0x1ea60b = { ..._0xb88cb7, ..._0x4df1a6 }; _0x56f80b[_0x56eb46(0x5f0)](_0x56eb46(0x1b3), _0x1dc085['stringify'](_0x1ea60b)); } else console[_0x56eb46(0x963)]('Error\x20fetching\x20from\x20' + _0x4a41ca + ':', _0x35e0ec); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x277a95(_0xd58f6c) { const _0x22df9c = _0x2a98b7; try { const _0x19c5ae = JSON[_0x22df9c(0x93f)](localStorage[_0x22df9c(0x47c)](_0x22df9c(0x5f5)) || '{}'), _0x12bf54 = { ..._0x19c5ae, ..._0xd58f6c }; localStorage['setItem'](_0x22df9c(0x5f5), JSON[_0x22df9c(0x49f)](_0x12bf54)); } catch (_0x50525c) { 'AaFMA' !== _0x22df9c(0x662) ? (_0x577bc9[_0x22df9c(0x95e)] = _0x17f55e[_0x22df9c(0x2c2)][_0x22df9c(0x3c2)] || '', _0x1796ef[_0x22df9c(0x95e)] = _0x25836e[_0x22df9c(0x2c2)][_0x22df9c(0xa7f)] || '', _0x176580[_0x22df9c(0x95e)] = _0x278300[_0x22df9c(0x2c2)]['model'] || '', _0x5ab82a[_0x22df9c(0x95e)] = _0x123812(_0x2eb2f4[_0x22df9c(0x271)]?.[_0x22df9c(0x78e)] ?? 0x64), _0xb7a4bc[_0x22df9c(0x4b6)](_0x22df9c(0x21b))[_0x22df9c(0x95e)] = _0xf80ee[_0x22df9c(0x2c2)][_0x22df9c(0x579)] || _0x22df9c(0x41a)) : console[_0x22df9c(0x963)](_0x22df9c(0x9ce), _0x50525c); } } async function _0x5bde09() { const _0x48c30a = _0x2a98b7, _0x24483d = document['getElementById']('decorative-badge'), _0x2c3d53 = document[_0x48c30a(0x4b6)](_0x48c30a(0x6ac)); try { if ('xGbAj' === _0x48c30a(0x2e8)) { let _0x4021c9 = await _0x34b988(_0x48c30a(0x3bc)); if (!_0x4021c9) { const _0x5bbefc = JSON[_0x48c30a(0x93f)](localStorage['getItem'](_0x48c30a(0x5f5)) || '{}'); _0x5bbefc[_0x48c30a(0x3b9)] && (console[_0x48c30a(0x66c)](_0x48c30a(0x4c7)), _0x4021c9 = await _0x22dea8(_0x5bbefc['image']), await _0x5a7151('widget_badge', _0x4021c9)); } if (_0x4021c9) { if (_0x48c30a(0x363) === _0x48c30a(0x5d8)) return _0x5746e0[_0x48c30a(0x65b)](_0x391d95), _0x2f93b5; else _0x2c3d53['src'] = URL[_0x48c30a(0x798)](_0x4021c9), _0x24483d['style'][_0x48c30a(0x6c5)] = _0x48c30a(0x493); } else _0x24483d['style'][_0x48c30a(0x6c5)] = 'block'; } else { const _0x2184f9 = _0x39f8f9[_0x48c30a(0x597)]('div'); _0x2184f9[_0x48c30a(0x575)] = _0x48c30a(0x8fc), _0x2184f9['dataset']['id'] = _0x5745da['id']; const _0xb6dcd1 = _0x13a060['id'] === _0x1d1817[_0x48c30a(0x4a1)] ? '\x20(当前)' : ''; _0x2184f9['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x4f6285[_0x48c30a(0x12d)] || _0x192175) + _0x48c30a(0x841) + _0x5391e4[_0x48c30a(0x5f1)] + _0xb6dcd1 + _0x48c30a(0x975) + _0x28a624[_0x48c30a(0x8ad)][_0x48c30a(0xa4a)](0x0, 0x64) + _0x48c30a(0x3d9), _0x2184f9['addEventListener'](_0x48c30a(0xab8), () => _0x4f2af0(_0x30bcdc['id'])), _0x5793cc[_0x48c30a(0x329)](_0x2184f9); } } catch (_0x2ad185) { _0x48c30a(0x8cf) !== _0x48c30a(0x41f) ? console[_0x48c30a(0x963)](_0x48c30a(0x6d1), _0x2ad185) : (_0x1adedf['error'](_0x48c30a(0x129), _0x2cfdd8), _0x5339f4['type'] = _0x48c30a(0xa20)); } } function _0x4e1e1d(_0x111eac) { const _0x8d8452 = _0x2a98b7; try { if (_0x8d8452(0x7f0) !== _0x8d8452(0x7f0)) { const _0x5cdc57 = _0x232d46(_0x4df7e5[_0x8d8452(0x9c6)] ?? _0x4399fb[_0x8d8452(0xa20)] ?? _0x5b4b26[_0x8d8452(0x973)] ?? '')[_0x8d8452(0x345)](); if (_0x5cdc57) _0x2bb9aa[_0x8d8452(0x528)]['push']({ 'senderId': _0x4bd1b4['id'], 'kind': _0x8d8452(0xa20), 'content': _0x5cdc57 }); } else { const _0x8643c0 = JSON[_0x8d8452(0x93f)](localStorage['getItem'](_0x8d8452(0x1b3)) || '{}'), _0x1975fe = { ..._0x8643c0, ..._0x111eac }; localStorage['setItem'](_0x8d8452(0x1b3), JSON[_0x8d8452(0x49f)](_0x1975fe)); } } catch (_0x99dc29) { if (_0x8d8452(0x6b9) === 'zKQpL') { if (!_0x55bc45[_0x8d8452(0x5f8)](_0x577589)) return _0x8d8452(0x14b); if (_0x35f848[_0x8d8452(0x84b)] === 0x0) return _0x8d8452(0x710); return _0xfec7e3[_0x8d8452(0x419)]((_0x38c0d7, _0x4836f3) => new _0x168d79(_0x4836f3['timestamp']) - new _0x1325ad(_0x38c0d7[_0x8d8452(0x36b)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x498a24[_0x8d8452(0x30c)](_0x4399a7 => _0x8d8452(0x569) + (_0x4399a7[_0x8d8452(0x466)] || '未知地点') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>' + (_0x4399a7[_0x8d8452(0x76f)] || '') + _0x8d8452(0x962) + (_0x4399a7[_0x8d8452(0x36b)] || '') + _0x8d8452(0x704))[_0x8d8452(0x602)]('') + '</div>'; } else console[_0x8d8452(0x963)](_0x8d8452(0x990), _0x99dc29); } } async function _0x1efd99() { const _0x21af36 = _0x2a98b7, _0x2a2401 = document[_0x21af36(0x4b6)]('card-widget'), _0x1546de = document['getElementById']('card-image'); try { if ('vUiqa' === _0x21af36(0x405)) { const _0x36e328 = _0x460c9c(_0x1aeab0), _0x226271 = _0x2b46e4[_0x21af36(0x4b6)](_0x21af36(0x6e0)); _0x226271[_0x21af36(0x636)][_0x21af36(0x4b7)] = ''; let _0x53af32 = _0x46b660['getElementById'](_0x21af36(0x5b6) + _0x4fe1fb); if (_0x53af32) _0x53af32[_0x21af36(0x3c8)] = ''; if (!_0x36e328) return; _0x36e328[_0x21af36(0x343)] && (_0x226271[_0x21af36(0x636)][_0x21af36(0x4b7)] = _0x21af36(0x314) + _0x36e328['chatWallpaper'] + '\x27)', _0x226271[_0x21af36(0x636)]['backgroundSize'] = _0x21af36(0x549), _0x226271[_0x21af36(0x636)][_0x21af36(0x90b)] = 'center'); if (_0x36e328[_0x21af36(0x1db)]) { let _0x470f3d = _0x2c9431[_0x21af36(0x4b6)]('style-' + _0x36e328['id']); !_0x470f3d && (_0x470f3d = _0x33e8e3[_0x21af36(0x597)](_0x21af36(0x636)), _0x470f3d['id'] = 'style-' + _0x36e328['id'], _0x405197[_0x21af36(0x506)][_0x21af36(0x329)](_0x470f3d)); const _0x507b02 = _0x36e328['bubbleCss'], _0x3fe37a = _0x507b02[_0x21af36(0x829)](/\.bubble\.sent/g, _0x21af36(0x4f2) + _0x36e328['id'] + _0x21af36(0x368))[_0x21af36(0x829)](/\.bubble\.received/g, _0x21af36(0x4f2) + _0x36e328['id'] + _0x21af36(0x8dc)); _0x470f3d[_0x21af36(0x3c8)] = _0x3fe37a; } } else { let _0x17095c = await _0x34b988(_0x21af36(0x9d6)); if (!_0x17095c) { const _0x4d1264 = JSON[_0x21af36(0x93f)](localStorage[_0x21af36(0x47c)]('cardWidgetState') || '{}'); _0x4d1264['image'] && (console[_0x21af36(0x66c)](_0x21af36(0x1c1)), _0x17095c = await _0x22dea8(_0x4d1264[_0x21af36(0x3b9)]), await _0x5a7151(_0x21af36(0x9d6), _0x17095c)); } _0x17095c ? (_0x1546de[_0x21af36(0x2fd)] = URL[_0x21af36(0x798)](_0x17095c), _0x2a2401[_0x21af36(0x636)][_0x21af36(0x6c5)] = _0x21af36(0x493)) : _0x21af36(0x1d6) === 'plsbQ' ? _0x230e81(_0x38eb55, _0x1917ce['emotion']) : _0x2a2401[_0x21af36(0x636)][_0x21af36(0x6c5)] = _0x21af36(0x493); } } catch (_0x454135) { if (_0x21af36(0x2e6) === 'QZYRU') throw new _0x2478e9('YAML翻译机也无法理解这段梦话。'); else console['error'](_0x21af36(0xabd), _0x454135); } try { let _0xf4a34 = await _0x34b988(_0x21af36(0x367)); const _0x564651 = document[_0x21af36(0x4b6)](_0x21af36(0x777)), _0x444342 = document['getElementById'](_0x21af36(0x5fe)); _0xf4a34 ? (_0x564651[_0x21af36(0x2fd)] = URL[_0x21af36(0x798)](_0xf4a34), _0x444342[_0x21af36(0x636)][_0x21af36(0x6c5)] = _0x21af36(0x493)) : _0x21af36(0x9c8) === _0x21af36(0x9c8) ? _0x444342[_0x21af36(0x636)][_0x21af36(0x6c5)] = 'none' : (_0x41ffb4 = !![], _0x59a194[_0x21af36(0xa4d)] = null); } catch (_0x496d0a) { if ('ILWHf' !== _0x21af36(0x555)) return _0x50b6ec[_0x21af36(0x61c)][_0x21af36(0x32b)](_0x533608 => _0x533608['id'] === _0x57dba1); else console['error'](_0x21af36(0x1ed), _0x496d0a); } } _0x5007ad['addEventListener'](_0x2a98b7(0xab8), () => { const _0x3271bd = _0x2a98b7; _0x2b384f(), _0x102967(_0x3271bd(0x648), _0x3271bd(0x786)); }), document['getElementById'](_0x2a98b7(0xa0b))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967('home', _0x2a98b7(0x648))), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x42f))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0xfd5d38()), document[_0x2a98b7(0x4b6)]('back-to-user-list-from-edit')['addEventListener'](_0x2a98b7(0xab8), () => { const _0x4ea3ea = _0x2a98b7; _0x2b384f(), _0x102967(_0x4ea3ea(0x648), 'userProfile'); }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x513))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x58b533), document['getElementById'](_0x2a98b7(0x353))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x3203ca), document['getElementById'](_0x2a98b7(0x85d))[_0x2a98b7(0x20b)]('click', () => { const _0x514973 = _0x2a98b7, _0x22f1bb = document[_0x514973(0x4b6)]('editing-user-id')['value']; _0x22f1bb && ('DYTyt' === 'NGwoo' ? (_0x150d65['activeQuote'] = null, _0x3991a9[_0x514973(0x636)][_0x514973(0x6c5)] = _0x514973(0x55f)) : (_0x4025fd['activeUserProfileId'] = _0x22f1bb, _0x33c083(), _0x26f8b2('已设为当前用户！'), _0x2b384f(), document[_0x514973(0x4b6)]('set-active-user-button')['style'][_0x514973(0x6c5)] = _0x514973(0x55f))); }); function _0x25fa5a(_0x431b56) { const _0x265eb8 = _0x2a98b7, _0x22fe72 = _0x4025fd['chats'][_0x265eb8(0x32b)](_0x2a0216 => _0x2a0216['id'] === _0x431b56), _0x351f2e = _0x22fe72?.['boundUserProfileId']; let _0x51fb22 = _0x4025fd[_0x265eb8(0x293)]['find'](_0x1365da => _0x1365da['id'] === _0x351f2e); return !_0x51fb22 && (_0x51fb22 = _0x4025fd['userProfiles']['find'](_0x396797 => _0x396797['id'] === _0x4025fd[_0x265eb8(0x4a1)]) || _0x4025fd[_0x265eb8(0x293)][0x0]), _0x51fb22 || { 'name': '用户', 'avatar': _0x2430ff, 'persona': '' }; } function _0x45f029(_0x219fe3) { const _0x537070 = _0x2a98b7, _0x58d469 = document[_0x537070(0x4b6)](_0x219fe3); _0x58d469[_0x537070(0x3c8)] = '', _0x4025fd[_0x537070(0x293)][_0x537070(0x6ff)](_0xe0a29 => { const _0x866f63 = _0x537070; if ('kTXYf' === _0x866f63(0x7c7)) try { const _0x1c8f14 = _0x5002dc[_0x866f63(0x93f)](_0xc29d5f[_0x866f63(0x47c)]('cardWidgetState') || '{}'), _0x4e1c65 = { ..._0x1c8f14, ..._0x2cd738 }; _0x2b01f9['setItem'](_0x866f63(0x1b3), _0x2d5e7e[_0x866f63(0x49f)](_0x4e1c65)); } catch (_0x2747f1) { _0x4220f6['error'](_0x866f63(0x990), _0x2747f1); } else { const _0x543f82 = document[_0x866f63(0x597)](_0x866f63(0x689)); _0x543f82[_0x866f63(0x95e)] = _0xe0a29['id'], _0x543f82['textContent'] = _0xe0a29[_0x866f63(0x5f1)], _0x58d469['appendChild'](_0x543f82); } }); } function _0x22b7b5(_0x4b5903) { const _0x139fa9 = _0x2a98b7, _0x551885 = _0x389a36(_0x4b5903), _0x81d8a3 = document['getElementById'](_0x139fa9(0x6e0)); _0x81d8a3['style'][_0x139fa9(0x4b7)] = ''; let _0x42fa16 = document[_0x139fa9(0x4b6)]('style-' + _0x4b5903); if (_0x42fa16) _0x42fa16[_0x139fa9(0x3c8)] = ''; if (!_0x551885) return; _0x551885[_0x139fa9(0x343)] && (_0x81d8a3[_0x139fa9(0x636)][_0x139fa9(0x4b7)] = 'url(\x27' + _0x551885[_0x139fa9(0x343)] + '\x27)', _0x81d8a3[_0x139fa9(0x636)][_0x139fa9(0x799)] = 'cover', _0x81d8a3['style'][_0x139fa9(0x90b)] = 'center'); if (_0x551885[_0x139fa9(0x1db)]) { let _0x189744 = document[_0x139fa9(0x4b6)](_0x139fa9(0x5b6) + _0x551885['id']); !_0x189744 && (_0x139fa9(0x5ae) !== 'CwZwq' ? (_0x189744 = document[_0x139fa9(0x597)]('style'), _0x189744['id'] = _0x139fa9(0x5b6) + _0x551885['id'], document['head'][_0x139fa9(0x329)](_0x189744)) : (_0x1431e5(![]), _0x13faa1[_0x139fa9(0x963)]('解析音乐文件失败:', _0x4be976), _0x53c068(_0x139fa9(0x7e2) + _0x379b35['message']))); const _0x143f17 = _0x551885[_0x139fa9(0x1db)], _0x49fe71 = _0x143f17['replace'](/\.bubble\.sent/g, '.bubble-' + _0x551885['id'] + '.message.user')['replace'](/\.bubble\.received/g, _0x139fa9(0x4f2) + _0x551885['id'] + '.message.ai'); _0x189744['innerHTML'] = _0x49fe71; } } function _0x5897d7() { const _0x1e88c9 = _0x2a98b7; if (_0x1e88c9(0x2a7) !== 'WlFQs') { const _0xfaac89 = document[_0x1e88c9(0x4b6)](_0x1e88c9(0xa62)); _0xfaac89[_0x1e88c9(0x3c8)] = ''; const _0x529c09 = _0x4afe2d => { const _0x560ac0 = _0x1e88c9; _0x4025fd[_0x560ac0(0x9a4)][_0x4afe2d] = null; if (_0x4afe2d === _0x560ac0(0x3b9)) _0x4025fd[_0x560ac0(0x9a4)][_0x560ac0(0x3c7)] = null; _0x5897d7(); }, _0x557191 = _0x4025fd['pendingPostAttachments'][_0x1e88c9(0x3c7)], _0xa99ac = _0x4025fd[_0x1e88c9(0x9a4)][_0x1e88c9(0x43a)]; if (_0x557191) { if ('oORrw' !== _0x1e88c9(0x55b)) { if (_0x1312e5['name'] === _0x1e88c9(0x40f)) return _0x59b46e['log'](_0x1e88c9(0x571)), ''; throw _0x46c883; } else { const _0x29ce19 = document[_0x1e88c9(0x597)]('div'); _0x29ce19[_0x1e88c9(0x575)] = _0x1e88c9(0xa95), _0x29ce19['innerHTML'] = _0x1e88c9(0x39f), _0x29ce19[_0x1e88c9(0x6f8)]('.remove-attachment-btn')['onclick'] = () => _0x529c09('image'), _0xfaac89[_0x1e88c9(0x329)](_0x29ce19), _0x34b988(_0x557191)[_0x1e88c9(0x4ea)](_0x29f183 => { const _0x3fa8a8 = _0x1e88c9, _0x391d71 = document[_0x3fa8a8(0x4b6)]('pending-post-image-preview'); if (_0x391d71 && _0x29f183) { if (_0x3fa8a8(0x3a5) !== _0x3fa8a8(0x4cd)) _0x391d71[_0x3fa8a8(0x2fd)] = URL[_0x3fa8a8(0x798)](_0x29f183); else { _0x4b5c7d(_0x3fa8a8(0x4ba)); return; } } }); } } if (_0xa99ac) { const _0x1948cb = document[_0x1e88c9(0x597)]('div'); _0x1948cb[_0x1e88c9(0x575)] = _0x1e88c9(0xa95), _0x1948cb[_0x1e88c9(0x3c8)] = _0x1e88c9(0x3c9) + (_0xa99ac[_0x1e88c9(0x3ad)] || _0x535078) + _0x1e88c9(0x729) + _0xa99ac[_0x1e88c9(0x4c5)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>' + _0xa99ac[_0x1e88c9(0x278)] + _0x1e88c9(0x7c1), _0x1948cb[_0x1e88c9(0x6f8)](_0x1e88c9(0x94a))[_0x1e88c9(0x4a6)] = () => _0x529c09(_0x1e88c9(0x43a)), _0xfaac89[_0x1e88c9(0x329)](_0x1948cb); } } else _0x12228b[_0x1e88c9(0x544)][_0x1e88c9(0x7f8)](_0x1e88c9(0x187)), _0x28780f[_0x1e88c9(0x4a6)] = null, _0x2feede[_0x1e88c9(0x4a6)] = null, _0x422078[_0x1e88c9(0x4a6)] = null, _0x36c123['removeEventListener'](_0x1e88c9(0x7d9), _0x3e5db2), _0x19c42c(_0x3eb5b6); } async function _0x417ae0(_0x469021) { const _0x5f42d9 = _0x2a98b7, _0x57f836 = _0x4025fd['friendCircles'][_0x5f42d9(0x32b)](_0x50cbae => _0x50cbae['id'] === _0x4025fd['activeFriendCircleId']); if (!_0x57f836) return; _0x32d19f(!![], _0x5f42d9(0x761)), _0x4025fd[_0x5f42d9(0x517)] = !![]; try { if ('ZAwYr' === _0x5f42d9(0x6be)) { const _0x454049 = _0x57f836[_0x5f42d9(0x647)][_0x5f42d9(0x30c)](_0xf868b2 => _0x389a36(_0xf868b2))[_0x5f42d9(0x1f9)](Boolean), _0x16454b = _0xe4da1e(), _0x13c5e0 = _0x454049['map'](_0x19e27a => { const _0x4a621c = _0x5f42d9, { omniText: _0x21ca78 } = _0x204d24(_0x19e27a['id'], null), _0x1b1637 = _0x5b4257(_0x19e27a['id']), _0x12c84b = _0x19e27a[_0x4a621c(0x859)] && _0x19e27a[_0x4a621c(0x859)]['length'] > 0x0 ? _0x4a621c(0x2f9) + _0x19e27a[_0x4a621c(0x5f1)] + _0x4a621c(0x7c4) + _0x19e27a['linkedWorldBookIds'][_0x4a621c(0x30c)](_0x5a1e50 => _0x4025fd[_0x4a621c(0xa3c)][_0x4a621c(0x32b)](_0x4d0e4a => _0x4d0e4a['id'] === _0x5a1e50))[_0x4a621c(0x1f9)](Boolean)[_0x4a621c(0x30c)](_0x4b7aeb => '\x0a##\x20条目:\x20' + _0x4b7aeb[_0x4a621c(0x5f1)] + '\x0a' + _0x4b7aeb[_0x4a621c(0x9c6)])[_0x4a621c(0x602)]('') : ''; return '-\x20姓名:\x20' + _0x19e27a[_0x4a621c(0x5f1)] + ',\x20ID:\x20' + _0x19e27a['id'] + _0x4a621c(0x8c0) + _0x19e27a[_0x4a621c(0x8ad)] + _0x4a621c(0x73d) + _0x21ca78 + '\x0a' + _0x1b1637 + '\x0a' + _0x12c84b; })[_0x5f42d9(0x602)]('\x0a\x0a'), _0x316d7a = _0xed925(_0x469021['authorId']) || { 'name': '用户' }, _0x805ce0 = _0x316d7a['persona'] ? _0x5f42d9(0x508) + _0x316d7a['name'] + _0x5f42d9(0x58f) + _0x316d7a[_0x5f42d9(0x8ad)] + '\x0a' : ''; let _0x5888a7 = null; if (_0x469021['image']) 'gvNff' === _0x5f42d9(0x5fc) ? _0x5888a7 = _0x469021[_0x5f42d9(0x3b9)] : _0x20455c += '-\x20**状态提示**:\x20你上一次活动是在' + _0x1974f1[_0x5f42d9(0xa05)](_0x4f14f8 / 0x3c) + _0x5f42d9(0x9ca); else { if (_0x469021[_0x5f42d9(0x3c7)]) try { if (_0x5f42d9(0x50b) === _0x5f42d9(0x50b)) { const _0x1e7329 = await _0x34b988(_0x469021[_0x5f42d9(0x3c7)]); if (_0x1e7329) { if ('zouzy' !== _0x5f42d9(0x83a)) _0x5888a7 = await _0xe16e6b(_0x1e7329); else { if (_0x5f0649['target'][_0x5f42d9(0x544)]['contains'](_0x5f42d9(0x944))) { const _0x297155 = _0x14a028[_0x5f42d9(0x492)][_0x5f42d9(0x773)]['id']; _0x5ebb02(_0x5f42d9(0x7dd))[_0x5f42d9(0x4ea)](_0xf07e2b => { _0xf07e2b && _0x31280c(_0x297155); }); } } } } else _0x5cab03 = _0xa2d8a2[0x1]; } catch (_0x248018) { console[_0x5f42d9(0x963)](_0x5f42d9(0x601), _0x248018); } } let _0x522739 = _0x316d7a[_0x5f42d9(0x5f1)] + _0x5f42d9(0x7d5) + _0x469021[_0x5f42d9(0x9c6)] + '”'; _0x5888a7 && (_0x522739 += _0x5f42d9(0x697)); if (_0x469021[_0x5f42d9(0xaa2)] === _0x5f42d9(0x43a)) { if (_0x5f42d9(0x7b8) === _0x5f42d9(0x586)) { const _0x56b242 = _0x29e57d[_0x5f42d9(0x779)](_0x335da0 / 0x3c); if (_0x56b242 < 0x30) _0xc5cc7e += '\x0a-\x20**对话状态**:\x20群里在' + _0x56b242 + '小时前聊过，可以适当问候，不要直接继续之前的话题。'; else _0x30c0f1 += '\x0a-\x20**对话状态**:\x20群里已经有' + _0x1c8364[_0x5f42d9(0x779)](_0x56b242 / 0x18) + _0x5f42d9(0x37a); } else _0x522739 += '\x20[并分享了歌曲:\x20' + _0x469021[_0x5f42d9(0x4c5)] + _0x5f42d9(0x6e6) + _0x469021[_0x5f42d9(0x278)] + ']'; } const _0x52cac9 = _0x5f42d9(0xa4f) + _0x13c5e0 + '\x0a\x0a' + _0x805ce0 + '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a' + _0x16454b + _0x5f42d9(0x461) + _0x522739 + _0x5f42d9(0x482), _0x4762e7 = [{ 'role': _0x5f42d9(0x6f9), 'content': _0x52cac9 }], _0x5efffe = { 'role': _0x5f42d9(0x880), 'content': _0x5f42d9(0x9e6) }; _0x5888a7 && ('cQaqR' === 'ktZGD' ? _0x8977bc += _0x5f42d9(0x2f4) : _0x5efffe[_0x5f42d9(0x3b9)] = _0x5888a7); _0x4762e7['push'](_0x5efffe); const _0x5b94d5 = await _0x414037(_0x4762e7, { 'json': !![] }), _0x108022 = _0x5b94d5['match'](/({[\s\S]*})/); if (!_0x108022) throw new Error('AI未能返回有效的JSON对象。'); const _0x2cc654 = JSON[_0x5f42d9(0x93f)](_0x108022[0x1]), _0x1c10d8 = _0x57f836['posts'][_0x5f42d9(0x32b)](_0x273cb2 => _0x273cb2['id'] === _0x469021['id']); _0x1c10d8 && (_0x5f42d9(0x2e1) === _0x5f42d9(0x2ff) ? (_0x227db5[_0x5f42d9(0x66c)](_0x5f42d9(0x23d) + _0x15a2e1), _0x46135e[_0x5f42d9(0x8f7)](_0x42429a, { 'keyPath': 'id' })) : (_0x1c10d8['likes'] = _0x2cc654[_0x5f42d9(0x4d9)] || [], _0x1c10d8[_0x5f42d9(0xa83)] = (_0x2cc654[_0x5f42d9(0xa83)] || [])[_0x5f42d9(0x30c)]((_0x4d528c, _0x3f95d4) => ({ ..._0x4d528c, 'commentId': 'c_' + _0x469021[_0x5f42d9(0x36b)] + '_' + _0x3f95d4 })), _0x33c083(), _0x13aa1b())); } else !_0x1c77b6 && (_0x288271 = _0x426441[_0x5f42d9(0x597)](_0x5f42d9(0x80e)), _0x10eb3b['id'] = _0x5f42d9(0x6bf), _0x5c0979[_0x5f42d9(0x329)](_0x48c23c)), _0xa58185[_0x5f42d9(0x3c8)] = _0x5f42d9(0x192) + _0x28efe9 + _0x5f42d9(0x20c), _0x1fb960[_0x5f42d9(0x636)]['display'] = _0x5f42d9(0x835); } catch (_0x39cca7) { _0x5f42d9(0x1c9) === _0x5f42d9(0x1c9) ? (console[_0x5f42d9(0x963)](_0x5f42d9(0x484), _0x39cca7), _0x26f8b2(_0x5f42d9(0x754))) : (_0x1d2373['error'](_0x5f42d9(0x960) + _0x14e29f['id'] + '\x20的图片失败:', _0x5253e5), _0x4c53ec['src'] = _0x3eb2c0[_0x5f42d9(0x12d)] || _0x400c3c); } finally { _0x32d19f(![]), _0x4025fd[_0x5f42d9(0x517)] = ![]; } } function _0x589e6d() { const _0x9546b5 = _0x2a98b7; if (_0x9546b5(0x7e8) !== _0x9546b5(0x7e8)) return; else { const _0x19096a = _0x4025fd['friendCircles'][_0x9546b5(0x32b)](_0x22fa31 => _0x22fa31['id'] === _0x4025fd[_0x9546b5(0x31a)]), _0x3d910a = _0x19096a?.['boundUserProfileId']; let _0x49999f = _0x4025fd[_0x9546b5(0x293)]['find'](_0x5bf43e => _0x5bf43e['id'] === _0x3d910a); !_0x49999f && ('yQkyu' !== 'yQkyu' ? _0x239586[_0x9546b5(0xab8)]() : _0x49999f = _0x4025fd[_0x9546b5(0x293)][_0x9546b5(0x32b)](_0x342939 => _0x342939['id'] === _0x4025fd[_0x9546b5(0x4a1)])), !_0x49999f && (_0x49999f = _0x4025fd['userProfiles'][0x0]), _0x49999f && (document[_0x9546b5(0x4b6)]('user-post-avatar')['src'] = _0x49999f[_0x9546b5(0x12d)] || _0x2430ff); } } function _0xb2977a(_0x866577) { const _0x20beeb = _0x2a98b7; if (_0x20beeb(0x393) !== _0x20beeb(0x65a)) { let _0x585547 = 0x0, _0x440c4b = 0x0, _0xeb34e6 = 0x0; if (_0x866577[_0x20beeb(0x84b)] == 0x4) _0x585547 = '0x' + _0x866577[0x1] + _0x866577[0x1], _0x440c4b = '0x' + _0x866577[0x2] + _0x866577[0x2], _0xeb34e6 = '0x' + _0x866577[0x3] + _0x866577[0x3]; else { if (_0x866577[_0x20beeb(0x84b)] == 0x7) { if (_0x20beeb(0x27b) === _0x20beeb(0x27b)) _0x585547 = '0x' + _0x866577[0x1] + _0x866577[0x2], _0x440c4b = '0x' + _0x866577[0x3] + _0x866577[0x4], _0xeb34e6 = '0x' + _0x866577[0x5] + _0x866577[0x6]; else { const _0x314bfd = _0x397b58[_0x20beeb(0xa3c)][_0x20beeb(0x32b)](_0x9e660 => _0x9e660['id'] === _0x378891); _0x314bfd && (_0x314bfd[_0x20beeb(0x5f1)] = _0x573cb4, _0x314bfd[_0x20beeb(0x9c6)] = _0x41fa8b); } } } _0x585547 /= 0xff, _0x440c4b /= 0xff, _0xeb34e6 /= 0xff; let _0x2ac694 = Math['min'](_0x585547, _0x440c4b, _0xeb34e6), _0x53b445 = Math[_0x20beeb(0x8cd)](_0x585547, _0x440c4b, _0xeb34e6), _0x3cf88f = _0x53b445 - _0x2ac694, _0xf048a4 = 0x0, _0x407554 = 0x0, _0x21b78d = 0x0; if (_0x3cf88f == 0x0) _0xf048a4 = 0x0; else { if (_0x53b445 == _0x585547) _0xf048a4 = (_0x440c4b - _0xeb34e6) / _0x3cf88f % 0x6; else { if (_0x53b445 == _0x440c4b) _0xf048a4 = (_0xeb34e6 - _0x585547) / _0x3cf88f + 0x2; else _0xf048a4 = (_0x585547 - _0x440c4b) / _0x3cf88f + 0x4; } } _0xf048a4 = Math[_0x20beeb(0xa05)](_0xf048a4 * 0x3c); if (_0xf048a4 < 0x0) _0xf048a4 += 0x168; return _0x21b78d = (_0x53b445 + _0x2ac694) / 0x2, _0x407554 = _0x3cf88f == 0x0 ? 0x0 : _0x3cf88f / (0x1 - Math['abs'](0x2 * _0x21b78d - 0x1)), _0x407554 = +(_0x407554 * 0x64)[_0x20beeb(0x68a)](0x1), _0x21b78d = +(_0x21b78d * 0x64)[_0x20beeb(0x68a)](0x1), { 'h': _0xf048a4, 's': _0x407554, 'l': _0x21b78d }; } else { if (_0xd9ccfa === null) return; const _0x2c4d02 = _0xb150ac['value']['trim'](); if (_0x2c4d02 === '') { _0x3c76e9(); return; } const _0xf06801 = _0x4f5a82['conversationHistory'][_0x1baacb]; _0xf06801 && (_0xf06801[_0x20beeb(0x9c6)] = _0x2c4d02, _0x54649d(), _0x50ef3c()), _0x181b35['classList'][_0x20beeb(0x7f8)](_0x20beeb(0x187)), _0x57d205 = null; } } function _0x27e361() { const _0x12c007 = _0x2a98b7, _0x5ce271 = (_0x5e8411, _0x39cf5f, _0x3b5b65) => { const _0xe990dc = _0x2f04, _0x35038b = document['getElementById'](_0x5e8411); if (!_0x35038b) return; let _0x47c63a = null; try { if (_0xe990dc(0x7fb) !== _0xe990dc(0x8db)) _0x47c63a = JSON[_0xe990dc(0x93f)](localStorage[_0xe990dc(0x47c)](_0x39cf5f) || '{}'); else { _0x245f1b('至少要选择一个圈内成员！'); return; } } catch { _0x47c63a = {}; } _0x35038b[_0xe990dc(0x636)][_0xe990dc(0x4bb)] = 'absolute', _0x35038b[_0xe990dc(0x636)][_0xe990dc(0xab7)] = '', _0x35038b['style'][_0xe990dc(0x5bb)] = '', _0x35038b[_0xe990dc(0x636)]['right'] = '', _0x35038b['style'][_0xe990dc(0x1d2)] = '', _0x35038b['style']['transform'] = ''; if (typeof _0x47c63a[_0xe990dc(0xab7)] === _0xe990dc(0x920) && typeof _0x47c63a[_0xe990dc(0x5bb)] === _0xe990dc(0x920)) _0x35038b[_0xe990dc(0x636)][_0xe990dc(0xab7)] = _0x47c63a[_0xe990dc(0xab7)] + '%', _0x35038b[_0xe990dc(0x636)][_0xe990dc(0x5bb)] = _0x47c63a[_0xe990dc(0x5bb)] + '%'; else { if (_0xe990dc(0x849) === 'kUtaD') _0x3aa30b = _0x54936c[_0xe990dc(0x47c)](_0xe990dc(0x8ab) + _0x163d85[_0xe990dc(0xa4d)]); else for (const _0x30798d in _0x3b5b65) { _0x35038b[_0xe990dc(0x636)][_0x30798d] = _0x3b5b65[_0x30798d]; } } }; _0x5ce271(_0x12c007(0x14f), _0x12c007(0x6a9), { 'top': _0x12c007(0x262), 'left': _0x12c007(0xa5c), 'transform': 'translateX(-50%)' }), _0x5ce271(_0x12c007(0x748), 'appIconPosition_app-wallpaper', { 'top': _0x12c007(0x241), 'right': '4%' }), _0x5ce271('app-user-profiles', _0x12c007(0x6ed), { 'top': _0x12c007(0x241), 'right': _0x12c007(0x307) }), _0x5ce271('app-settings', _0x12c007(0x2f5), { 'top': '8%', 'right': _0x12c007(0x307) }), _0x5ce271(_0x12c007(0x175), _0x12c007(0x8ac), { 'top': '8%', 'right': '4%' }), _0x5ce271(_0x12c007(0x7ce), _0x12c007(0x905), { 'top': _0x12c007(0xa13), 'left': '5%' }), _0x5ce271(_0x12c007(0x49e), 'appIconPosition_app-diary', { 'top': '71%', 'left': '29%' }), _0x5ce271(_0x12c007(0xa4c), _0x12c007(0x5a0), { 'top': '71%', 'left': '5%' }), _0x5ce271('app-accounting', _0x12c007(0x159), { 'top': '59%', 'left': _0x12c007(0x775) }), _0x5ce271(_0x12c007(0x5b4), _0x12c007(0x5f5), { 'top': _0x12c007(0x5fa), 'right': '5%' }), _0x5ce271(_0x12c007(0x5fe), _0x12c007(0x7d3), { 'top': '8%', 'left': '5%' }); const _0x52bb5d = document[_0x12c007(0x4b6)](_0x12c007(0x28c)); _0x52bb5d && (_0x52bb5d[_0x12c007(0x636)][_0x12c007(0x4bb)] = _0x12c007(0x3d7), _0x52bb5d['style'][_0x12c007(0xab7)] = _0x12c007(0xa86), _0x52bb5d[_0x12c007(0x636)][_0x12c007(0x5bb)] = _0x12c007(0xa5c), _0x52bb5d['style'][_0x12c007(0x65c)] = _0x12c007(0x596), _0x52bb5d[_0x12c007(0x636)][_0x12c007(0x6c5)] = _0x12c007(0x493)); const _0x613300 = document['getElementById'](_0x12c007(0x855)); _0x613300 && (_0x613300[_0x12c007(0x636)][_0x12c007(0x4bb)] = _0x12c007(0x3d7), _0x613300[_0x12c007(0x636)][_0x12c007(0xab7)] = _0x12c007(0x67d), _0x613300[_0x12c007(0x636)][_0x12c007(0x5bb)] = '50%', _0x613300[_0x12c007(0x636)][_0x12c007(0x65c)] = _0x12c007(0x596), _0x613300[_0x12c007(0x636)][_0x12c007(0x6c5)] = _0x12c007(0x865)); } function _0xcf24c5() { const _0xe8dff7 = _0x2a98b7; if (_0xe8dff7(0x289) !== _0xe8dff7(0x289)) { const _0x5abb4c = _0x45c734[_0xe8dff7(0x859)][_0xe8dff7(0x30c)](_0x2d9be1 => _0x25900b[_0xe8dff7(0xa3c)][_0xe8dff7(0x32b)](_0x308e57 => _0x308e57['id'] === _0x2d9be1))[_0xe8dff7(0x1f9)](_0x4628f5)[_0xe8dff7(0x30c)](_0x1f63d8 => _0xe8dff7(0x2df) + _0x1f63d8['name'] + '\x0a' + _0x1f63d8[_0xe8dff7(0x9c6)])[_0xe8dff7(0x602)](''); if (_0x5abb4c) _0x18a4b5 = '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a' + _0x5abb4c; } else { const _0x45d10b = document[_0xe8dff7(0x4b6)]('custom-icon-list-container'); _0x45d10b[_0xe8dff7(0x3c8)] = ''; const _0x42e47a = document['querySelectorAll'](_0xe8dff7(0x755)); _0x42e47a[_0xe8dff7(0x6ff)](_0x32ad0e => { const _0x534a29 = _0xe8dff7; if (_0x534a29(0x867) !== _0x534a29(0x97a)) { const _0x570d0f = _0x32ad0e['id'], _0x4b2675 = _0x32ad0e[_0x534a29(0x6f8)](_0x534a29(0x479))[_0x534a29(0xab3)], _0x2e9377 = _0x534a29(0x4d7) + _0x570d0f, _0x28580e = localStorage[_0x534a29(0x47c)](_0x2e9377), _0x56016a = document[_0x534a29(0x597)](_0x534a29(0x80e)); _0x56016a[_0x534a29(0x575)] = _0x534a29(0x84a), _0x56016a[_0x534a29(0x636)]['padding'] = _0x534a29(0x1ac), _0x56016a['innerHTML'] = _0x534a29(0x361) + _0x570d0f + _0x534a29(0x156) + (_0x28580e || _0x534a29(0x1b0)) + _0x534a29(0x66f) + _0x4b2675 + _0x534a29(0x7fe) + _0x570d0f + _0x534a29(0x384) + _0x570d0f + _0x534a29(0xac6) + _0x2e9377 + _0x534a29(0x71e), _0x45d10b[_0x534a29(0x329)](_0x56016a); const _0x4bc0ea = document[_0x534a29(0x4b6)](_0x534a29(0x303) + _0x570d0f); _0x4bc0ea[_0x534a29(0x20b)]('change', async _0x272601 => { const _0x31010a = _0x534a29, _0xf488af = _0x272601['target']['files'][0x0]; if (!_0xf488af) return; try { if (_0x31010a(0x809) === _0x31010a(0xaa6)) { _0x1b875c = _0x23ea7b; let _0x5cdf98 = null; if (_0x46f35d?.['type'] === 'private') _0x5cdf98 = _0x2b611a(_0x268eec[_0x31010a(0x2db)][0x0]); else _0x43e09b?.[_0x31010a(0xaa2)] === 'group' && _0x47c3e1 && (_0x5cdf98 = _0x480ef0(_0xd84b8e)); _0x5cdf98?.[_0x31010a(0x12d)] && (_0x1c91f1 = _0x5cdf98[_0x31010a(0x12d)]); } else { const _0x472a75 = await _0x54e8ab(_0xf488af); localStorage[_0x31010a(0x5f0)](_0x2e9377, _0x472a75), document[_0x31010a(0x4b6)](_0x31010a(0xa69) + _0x570d0f)[_0x31010a(0x2fd)] = _0x472a75, _0x4da4d7(); } } catch (_0x3116a6) { _0x31010a(0x807) !== _0x31010a(0x807) ? _0x184dce[_0x31010a(0x3ce)] = _0x362c72[_0x31010a(0x650)] : _0x26f8b2(_0x31010a(0x402) + _0x3116a6[_0x31010a(0x973)]); } }); } else { const _0x5d7baf = _0x58727a[_0x534a29(0x93f)](_0x4f0779); _0x4efdd5[_0x534a29(0x5f8)](_0x5d7baf) ? _0x5c8867 = [..._0x17a8d1, ..._0x5d7baf] : _0x5eeb47 = _0x14e846; } }); } } function _0x4da4d7() { const _0x594565 = _0x2a98b7, _0x5daac7 = document['querySelectorAll'](_0x594565(0x755)); _0x5daac7[_0x594565(0x6ff)](_0x4d7166 => { const _0x4ac778 = _0x594565; if (_0x4ac778(0x295) === _0x4ac778(0x295)) { const _0x3877fa = _0x4d7166['id'], _0x4b9afd = 'customIcon_' + _0x3877fa, _0x7ff923 = localStorage[_0x4ac778(0x47c)](_0x4b9afd), _0x250d95 = _0x4d7166[_0x4ac778(0x6f8)](_0x4ac778(0x562)); if (_0x7ff923) { if (_0x4ac778(0x19b) !== 'yrmMV') _0x250d95['innerHTML'] = _0x4ac778(0x7e1) + _0x7ff923 + _0x4ac778(0xab6); else { const _0x1abf7e = _0x58d318['participantIds'][0x0]; _0xb8ac52[_0x4ac778(0x544)]['add'](_0x4ac778(0x9f6) + _0x1abf7e); } } else { const _0x28456c = document[_0x4ac778(0x6f8)](_0x4ac778(0x903) + _0x3877fa + _0x4ac778(0x1c4) + _0x3877fa + _0x4ac778(0x82b))?.[_0x4ac778(0x3c8)]; _0x28456c && (_0x250d95[_0x4ac778(0x3c8)] = _0x28456c); } } else _0x5d7709[_0x4ac778(0x95e)] = _0x17ed1d[_0x4ac778(0x30c)](_0x1ab548 => _0x1ab548['name'] + '--' + _0x1ab548[_0x4ac778(0x13f)])[_0x4ac778(0x602)]('\x0a'); }); } function _0xed4b04() { const _0x8bd69e = _0x2a98b7; if (_0x8bd69e(0x1b8) !== 'QsiLZ') { _0x2ce146[_0x8bd69e(0x3c8)] = _0x8bd69e(0x4aa); return; } else { const _0x540da0 = _0x4025fd[_0x8bd69e(0x9b0)][_0x8bd69e(0x32b)](_0x1807f6 => _0x1807f6['id'] === _0x4025fd[_0x8bd69e(0x31a)]), _0x3e18ff = _0xba11a1(); let _0x5ca1be = []; if (_0x540da0 && _0x540da0[_0x8bd69e(0x13e)]) { const _0x46e9f8 = _0x540da0[_0x8bd69e(0x13e)][_0x8bd69e(0x1f9)](_0x463573 => _0x463573['type'] === 'music' && _0x463573[_0x8bd69e(0x22c)])[_0x8bd69e(0x30c)](_0x290c08 => ({ ..._0x290c08, 'source': _0x8bd69e(0x73a) })); _0x5ca1be[_0x8bd69e(0x65b)](..._0x46e9f8); } if (_0x3e18ff && _0x4025fd[_0x8bd69e(0x24a)]) { const _0x46be5e = _0x4025fd[_0x8bd69e(0x24a)]['filter'](_0x21299e => _0x21299e[_0x8bd69e(0xaa2)] === _0x8bd69e(0x43a) && _0x21299e[_0x8bd69e(0x22c)])[_0x8bd69e(0x30c)](_0x1ac744 => ({ ..._0x1ac744, 'source': 'chat' })); _0x5ca1be['push'](..._0x46be5e); } const _0x47270b = Array[_0x8bd69e(0x811)](new Map(_0x5ca1be[_0x8bd69e(0x30c)](_0x1c5429 => [_0x1c5429[_0x8bd69e(0x22c)], _0x1c5429]))[_0x8bd69e(0x946)]()); _0x4025fd[_0x8bd69e(0x34a)] = _0x47270b[_0x8bd69e(0x419)]((_0x31f244, _0x259f69) => _0x259f69[_0x8bd69e(0x36b)] - _0x31f244['timestamp']); } } function _0x11cea0(_0x5b0160) { const _0x57b113 = _0x2a98b7; if (_0x5b0160 < 0x0 || _0x5b0160 >= _0x53f789[_0x57b113(0x84b)]) return; _0x5ab40d = _0x5b0160; const _0x4317ef = _0x53f789[_0x5b0160]; _0x133351['src'] = _0x4317ef[_0x57b113(0x22c)] || _0x4317ef[_0x57b113(0x13f)], _0x133351[_0x57b113(0x81e)](), _0x51db8e(), _0x400168(); } function _0x51db8e() { const _0x152b71 = _0x53f789[_0x5ab40d]; _0x5a9481(_0x152b71); } function _0x400168() { const _0x58895c = _0x2a98b7; try { localStorage['setItem'](_0x58895c(0x61d), JSON[_0x58895c(0x49f)]({ 'playlist': _0x4025fd[_0x58895c(0x34a)], 'currentIndex': _0x4025fd[_0x58895c(0x1f5)] })); } catch (_0x29b880) { _0x58895c(0x5a9) === 'UdCMF' ? console[_0x58895c(0x963)](_0x58895c(0x9ff), _0x29b880) : _0x193905(![]); } } function _0x368473() { const _0x3413a7 = _0x2a98b7; if ('tzapr' !== 'KmNBT') try { const _0x294ae2 = localStorage['getItem'](_0x3413a7(0x61d)); if (_0x294ae2) { const { playlist: _0x2a44b8, currentIndex: _0x3f0efb } = JSON['parse'](_0x294ae2); Array[_0x3413a7(0x5f8)](_0x2a44b8) && _0x2a44b8['length'] > 0x0 && _0x3f0efb > -0x1 && (_0x4025fd[_0x3413a7(0x34a)] = _0x2a44b8, _0x4025fd['currentlyPlayingIndex'] = _0x3f0efb, _0x4025fd['isPlaying'] = ![], _0x51db8e()); } } catch (_0xf330c) { console['error']('切，加载播放器状态的时候出错了。', _0xf330c); } else { _0x109416['innerHTML'] = _0x3413a7(0x519); return; } } function _0x586d88(_0x55940d) { const _0x54dd72 = _0x2a98b7; if (_0x54dd72(0x31e) !== _0x54dd72(0x644)) { if (window[_0x54dd72(0x7eb)]) clearTimeout(window[_0x54dd72(0x7eb)]); const _0x5d71af = _0x55940d[_0x54dd72(0x492)]['closest']('.diary-entry'); if (!_0x5d71af) return; const _0x19b4b4 = _0x5d71af[_0x54dd72(0x773)][_0x54dd72(0x36b)], _0x57c5af = _0x5d71af[_0x54dd72(0x544)][_0x54dd72(0x61a)]('user') ? _0x54dd72(0x880) : 'ai'; if (!_0x19b4b4) return; const _0x222fd0 = () => { const _0x4dd3ea = _0x54dd72; window[_0x4dd3ea(0x7eb)] = setTimeout(() => { const _0x516fec = _0x4dd3ea; if (_0x516fec(0x572) === _0x516fec(0x572)) { if (_0x55940d[_0x516fec(0xaa2)] === _0x516fec(0x866)) _0x55940d[_0x516fec(0x3e5)](); _0xae406e(parseInt(_0x19b4b4, 0xa), _0x57c5af); } else _0x3eaf21[_0x516fec(0x6f1)](_0x516fec(0x8ab) + _0x3bf8a6['id']); }, 0x320); }, _0x5d164c = () => { const _0x56120b = _0x54dd72; if (window[_0x56120b(0x7eb)]) clearTimeout(window[_0x56120b(0x7eb)]); }; document[_0x54dd72(0x20b)]('mouseup', _0x5d164c, { 'once': !![] }), document[_0x54dd72(0x20b)]('touchend', _0x5d164c, { 'once': !![] }), document['addEventListener']('touchcancel', _0x5d164c, { 'once': !![] }), _0x222fd0(); } else { _0x63b554('群聊名称不能为空！'); return; } } function _0xae406e(_0x5ba831, _0x21b424) { const _0x5c4777 = _0x2a98b7, _0xf9fa1 = _0x5c4777(0x99f) + _0x5ba831; let _0x4a867e = document['getElementById'](_0xf9fa1); if (_0x4a867e) return; const _0x1da93b = _0x5c4777(0xa98) + _0xf9fa1 + _0x5c4777(0x96d) + (_0x21b424 === 'ai' ? '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>' : '') + _0x5c4777(0xac0); document[_0x5c4777(0x9c2)][_0x5c4777(0x44b)]('beforeend', _0x1da93b); const _0x36211d = document['getElementById'](_0xf9fa1), _0x456ce5 = () => _0x36211d['remove'](); _0x36211d[_0x5c4777(0x6f8)](_0x5c4777(0x31f))['onclick'] = _0x456ce5, _0x36211d[_0x5c4777(0x6f8)](_0x5c4777(0x606))[_0x5c4777(0x4a6)] = _0x456ce5, _0x36211d[_0x5c4777(0x6f8)](_0x5c4777(0x796))[_0x5c4777(0x4a6)] = () => { _0xfe9e95(_0x5ba831), _0x456ce5(); }, _0x21b424 === 'ai' && (_0x36211d[_0x5c4777(0x6f8)]('#diary-action-reroll')[_0x5c4777(0x4a6)] = () => { const _0x159280 = _0x5c4777; _0x159280(0x5c5) !== 'QYgHU' ? (_0x1ae1a6(_0x5ba831), _0x456ce5()) : (_0x494e44(), _0xeb4f1c('diaryList', _0x159280(0x786))); }); } async function _0xfe9e95(_0x529c44) { const _0x156b1f = _0x2a98b7; if (_0x156b1f(0x3b6) === _0x156b1f(0x3b6)) { const _0x2a5043 = await _0x2f2e39(_0x156b1f(0x404)); if (!_0x2a5043) return; const _0x4aa6e7 = _0x4025fd['diaries'][_0x156b1f(0x32b)](_0x29993d => _0x29993d[_0x156b1f(0x3c0)] === _0x4025fd[_0x156b1f(0x7a3)]); if (!_0x4aa6e7) return; const _0x50b7ec = _0x4aa6e7[_0x156b1f(0x204)][_0x156b1f(0x6e4)](_0x42b6ee => _0x42b6ee[_0x156b1f(0x36b)] === _0x529c44); _0x50b7ec > -0x1 && (_0x4aa6e7[_0x156b1f(0x204)][_0x156b1f(0x31d)](_0x50b7ec, 0x1), _0x33c083(), _0x12a267(), _0x26f8b2(_0x156b1f(0x2e7))); } else _0x1a8f96(_0x546aac), _0x16eb63(); } async function _0x1ae1a6(_0x3f70f6) { const _0x49c2d2 = _0x2a98b7; if (_0x49c2d2(0x227) === _0x49c2d2(0x227)) { const _0x2bd4d6 = _0x4025fd[_0x49c2d2(0xab2)][_0x49c2d2(0x32b)](_0x53dd38 => _0x53dd38[_0x49c2d2(0x3c0)] === _0x4025fd[_0x49c2d2(0x7a3)]); if (!_0x2bd4d6) return; const _0x562430 = _0x2bd4d6[_0x49c2d2(0x204)][_0x49c2d2(0x6e4)](_0x2cf56a => _0x2cf56a['timestamp'] === _0x3f70f6); _0x562430 > -0x1 && (_0x2bd4d6[_0x49c2d2(0x204)][_0x49c2d2(0x31d)](_0x562430, 0x1), _0x33c083(), _0x12a267(), await _0x13cde4()); } else _0x491987[_0x49c2d2(0x6f1)](_0x49c2d2(0xa8a)); } function _0x494a3e() { const _0x54a104 = _0x2a98b7; if ('jQXIO' !== 'MpnYZ') { const _0x1b2258 = document[_0x54a104(0x4b6)](_0x54a104(0x898)); _0x1b2258[_0x54a104(0x3c8)] = ''; const _0x22ca8f = _0x4025fd[_0x54a104(0x61c)][_0x54a104(0x1f9)](_0x23935b => _0x4025fd[_0x54a104(0x132)][_0x54a104(0x533)](_0x29f2bd => _0x29f2bd[_0x54a104(0xaa2)] === 'private' && _0x29f2bd[_0x54a104(0x2db)][_0x54a104(0x9f1)](_0x23935b['id']))); if (_0x22ca8f[_0x54a104(0x84b)] === 0x0) { if (_0x54a104(0x4c2) !== _0x54a104(0x4c2)) return _0x8516a3[_0x54a104(0xa4a)](_0x485caa, _0x4bd9a2 + 0x1); else { _0x1b2258['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>'; return; } } _0x22ca8f['forEach'](_0x8ec552 => { const _0x3da8c5 = _0x54a104; if (_0x3da8c5(0x75c) !== 'QCmvo') { const _0x1f9412 = document[_0x3da8c5(0x597)]('li'); _0x1f9412[_0x3da8c5(0x575)] = _0x3da8c5(0xa91), _0x1f9412[_0x3da8c5(0x773)][_0x3da8c5(0x8c8)] = _0x8ec552['id'], _0x1f9412['innerHTML'] = _0x3da8c5(0x566) + (_0x8ec552[_0x3da8c5(0x12d)] || _0x535078) + _0x3da8c5(0x7a1) + _0x8ec552['name'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x1f9412[_0x3da8c5(0x20b)]('click', () => { const _0x16c078 = _0x3da8c5; 'puMRU' === _0x16c078(0x48b) ? _0xd2844d['style']['display'] = _0x16c078(0x55f) : _0xfd7423(_0x8ec552['id']); }), _0x1f9412[_0x3da8c5(0x6f8)]('.char-info-wrapper')[_0x3da8c5(0x20b)](_0x3da8c5(0xab8), () => { _0xfd7423(_0x8ec552['id']); }), _0x1f9412[_0x3da8c5(0x6f8)](_0x3da8c5(0xa71))[_0x3da8c5(0x20b)](_0x3da8c5(0xab8), _0x527505 => { const _0x351104 = _0x3da8c5; if (_0x351104(0x5b1) === _0x351104(0x688)) { const _0x324e3e = _0x34587e[_0x351104(0xa7f)](_0x218f4a); _0x324e3e && _0x324e3e[_0x351104(0x914)](_0x351104(0x831)) && _0x296549[_0x351104(0x65b)](_0x324e3e); } else _0x527505['stopPropagation'](), _0x3d8b83(_0x8ec552['id']); }), _0x1b2258[_0x3da8c5(0x329)](_0x1f9412); } else _0x4d07ec[_0x3da8c5(0x4a1)] = _0x526bd1[_0x3da8c5(0x293)][0x0]['id']; }); } else { const _0x58861f = 0x32; if (_0x1adb5c < _0x263ce4 - _0x58861f) _0x1ec8ed(_0x238722 + 0x1); else _0x90f22 > _0x1e1b2c + _0x58861f && _0x1fb41c(_0xdebe21 - 0x1); } } function _0xfd7423(_0x211001) { const _0x4440ff = _0x2a98b7; if ('XRxGA' === 'lQVvP') { const _0x43376c = _0x116c67(); if (!_0x43376c) { _0x420e18['textContent'] = '选择聊天'; return; } if (_0x43376c[_0x4440ff(0xaa2)] === 'private') { const _0x1cee91 = _0x32e667(_0x43376c[_0x4440ff(0x2db)][0x0]); _0x3e87ab[_0x4440ff(0xab3)] = _0x1cee91 ? _0x1cee91[_0x4440ff(0x5f1)] : '未知角色'; } else _0x584e47[_0x4440ff(0xab3)] = _0x43376c[_0x4440ff(0x5f1)] || _0x4440ff(0x60a) + _0x43376c['participantIds']['length'] + ')'; } else { const _0x196616 = _0x389a36(_0x211001); if (!_0x196616) return; _0x4025fd[_0x4440ff(0x7a3)] = _0x211001; const _0x330db7 = _0x4025fd[_0x4440ff(0xab2)][_0x4440ff(0x32b)](_0x53b294 => _0x53b294[_0x4440ff(0x3c0)] === _0x211001), _0x24f284 = _0x330db7 ? _0x330db7[_0x4440ff(0x204)]['length'] : 0x0, _0x36edd1 = 0x2; _0x4025fd[_0x4440ff(0x44c)] = Math[_0x4440ff(0x8cd)](0x0, Math[_0x4440ff(0x245)](_0x24f284 / _0x36edd1) - 0x1), document['getElementById'](_0x4440ff(0x128))[_0x4440ff(0xab3)] = _0x196616['name'] + _0x4440ff(0x5be), _0x12a267(), _0x102967(_0x4440ff(0x686), 'diaryList'); } } function _0x12a267() { const _0x22a5e4 = _0x2a98b7; if ('fwuZK' !== _0x22a5e4(0x495)) { const _0x35eeca = document[_0x22a5e4(0x4b6)](_0x22a5e4(0x2bb)), _0x487a12 = document[_0x22a5e4(0x4b6)]('diary-input-wrapper'); _0x35eeca[_0x22a5e4(0x3c8)] = '', _0x487a12[_0x22a5e4(0x3c8)] = ''; const _0x35dddf = _0x48c69b() || { 'name': '我' }, _0x3e5cca = _0x4025fd[_0x22a5e4(0xab2)]['find'](_0x233c25 => _0x233c25[_0x22a5e4(0x3c0)] === _0x4025fd['activeDiaryCharacterId']); if (!_0x3e5cca || !_0x3e5cca['entries'] || _0x3e5cca['entries'][_0x22a5e4(0x84b)] === 0x0) { if (_0x22a5e4(0x413) === 'IEaAq') { const _0x30b2c6 = _0x4da248(_0x4162a2['participantIds'][0x0]); return _0x30b2c6?.[_0x22a5e4(0x5f1)] || 'AI'; } else { _0x35eeca['innerHTML'] = _0x22a5e4(0x95c), _0x487a12[_0x22a5e4(0x3c8)] = _0x22a5e4(0x150), document['getElementById'](_0x22a5e4(0x38f))['addEventListener'](_0x22a5e4(0xab8), _0x2b4157), document[_0x22a5e4(0x4b6)](_0x22a5e4(0x5b3))[_0x22a5e4(0x20b)]('click', _0x13cde4); return; } } const _0x2f24f3 = 0x2, _0x147809 = [..._0x3e5cca[_0x22a5e4(0x204)]][_0x22a5e4(0x419)]((_0x121cd9, _0x7677dd) => _0x121cd9[_0x22a5e4(0x36b)] - _0x7677dd[_0x22a5e4(0x36b)]), _0x3dcb59 = []; for (let _0x38367d = 0x0; _0x38367d < _0x147809[_0x22a5e4(0x84b)]; _0x38367d += _0x2f24f3) { _0x3dcb59[_0x22a5e4(0x65b)](_0x147809['slice'](_0x38367d, _0x38367d + _0x2f24f3)); } const _0x38e3c1 = _0x3dcb59[_0x22a5e4(0x84b)]; _0x3dcb59[_0x22a5e4(0x6ff)]((_0x5b0e41, _0x44560d) => { const _0x2e0c3c = _0x22a5e4, _0x3ff360 = document[_0x2e0c3c(0x597)](_0x2e0c3c(0x80e)); _0x3ff360[_0x2e0c3c(0x575)] = _0x2e0c3c(0x1bb), _0x3ff360['id'] = _0x2e0c3c(0x9fa) + _0x44560d, _0x44560d === _0x4025fd[_0x2e0c3c(0x44c)] && _0x3ff360['classList'][_0x2e0c3c(0x82e)](_0x2e0c3c(0x1ff)), _0x5b0e41[_0x2e0c3c(0x6ff)](_0x2594aa => { const _0x4e2fe6 = _0x2e0c3c; if (_0x4e2fe6(0x420) === _0x4e2fe6(0x4b4)) _0x1605e2(_0x4e2fe6(0x651), 'groupChatCreate'), _0x4e45bb(![]); else { const _0x166795 = _0x2594aa[_0x4e2fe6(0x675)] === _0x4e2fe6(0x880) ? _0x4e2fe6(0x880) : 'ai', _0x59b985 = _0x2594aa[_0x4e2fe6(0x675)] === 'user' ? _0x35dddf['name'] : _0x389a36(_0x2594aa['author'])[_0x4e2fe6(0x5f1)], _0x5b1634 = document[_0x4e2fe6(0x597)](_0x4e2fe6(0x80e)); _0x5b1634['className'] = _0x4e2fe6(0x49c) + _0x166795, _0x5b1634['dataset'][_0x4e2fe6(0x36b)] = _0x2594aa[_0x4e2fe6(0x36b)], _0x5b1634[_0x4e2fe6(0x636)][_0x4e2fe6(0x784)] = _0x4e2fe6(0x55f), _0x5b1634[_0x4e2fe6(0x636)]['paddingBottom'] = '0', _0x5b1634[_0x4e2fe6(0x3c8)] = _0x4e2fe6(0x5ee) + _0x59b985 + _0x4e2fe6(0x325) + new Date(_0x2594aa[_0x4e2fe6(0x36b)])[_0x4e2fe6(0x8de)](_0x4e2fe6(0x838)) + _0x4e2fe6(0xab9) + _0x2594aa['content'][_0x4e2fe6(0x829)](/\n/g, _0x4e2fe6(0x3f8)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x3ff360[_0x4e2fe6(0x329)](_0x5b1634); } }), _0x35eeca[_0x2e0c3c(0x329)](_0x3ff360); }), _0x487a12[_0x22a5e4(0x3c8)] = _0x22a5e4(0x6de) + (_0x4025fd['diaryCurrentPage'] + 0x1) + _0x22a5e4(0x416) + _0x38e3c1 + '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', document['getElementById'](_0x22a5e4(0x75f))[_0x22a5e4(0xa7e)] = _0x4025fd[_0x22a5e4(0x44c)] === 0x0, document[_0x22a5e4(0x4b6)](_0x22a5e4(0x8a9))[_0x22a5e4(0xa7e)] = _0x4025fd[_0x22a5e4(0x44c)] === _0x38e3c1 - 0x1, document['getElementById']('diary-prev-button')['addEventListener'](_0x22a5e4(0xab8), _0x39c74a), document[_0x22a5e4(0x4b6)]('diary-next-button')[_0x22a5e4(0x20b)](_0x22a5e4(0xab8), _0x27fd64), document[_0x22a5e4(0x4b6)](_0x22a5e4(0x38f))[_0x22a5e4(0x20b)](_0x22a5e4(0xab8), _0x2b4157), document[_0x22a5e4(0x4b6)](_0x22a5e4(0x5b3))['addEventListener'](_0x22a5e4(0xab8), _0x13cde4); } else _0x5de553[_0x22a5e4(0x3c8)] = '', _0x3a3bff['forEach'](_0x30beff => { const _0x461d80 = _0x22a5e4, _0x5b90a9 = _0xf7f996[_0x461d80(0x597)]('div'); _0x5b90a9['textContent'] = _0x30beff, _0x5b90a9[_0x461d80(0x20b)]('click', () => { const _0x52ca6a = _0x461d80; _0x4807cc[_0x52ca6a(0x95e)] = _0x30beff, _0x3a404[_0x52ca6a(0x544)][_0x52ca6a(0x7f8)](_0x52ca6a(0x187)); }), _0x464a3b[_0x461d80(0x329)](_0x5b90a9); }), _0x29a4d0[_0x22a5e4(0x544)][_0x22a5e4(0x82e)](_0x22a5e4(0x187)), _0x3e6fd0(_0x22a5e4(0x435) + _0x19ca86['length'] + _0x22a5e4(0x55d)); } function _0x27fd64() { const _0x42a0c3 = _0x2a98b7; if (_0x4025fd['isAnimatingDiary']) return; const _0x5689f9 = _0x4025fd['diaryCurrentPage'], _0xf0e353 = Math[_0x42a0c3(0x245)](_0x4025fd[_0x42a0c3(0xab2)]['find'](_0xacbee6 => _0xacbee6[_0x42a0c3(0x3c0)] === _0x4025fd[_0x42a0c3(0x7a3)])[_0x42a0c3(0x204)]['length'] / 0x2); if (_0x5689f9 >= _0xf0e353 - 0x1) return; _0x4025fd[_0x42a0c3(0xa31)] = !![]; const _0x40e030 = _0x5689f9 + 0x1, _0x433ebe = document[_0x42a0c3(0x4b6)](_0x42a0c3(0x9fa) + _0x5689f9), _0x52622b = document[_0x42a0c3(0x4b6)](_0x42a0c3(0x9fa) + _0x40e030); _0x433ebe && _0x52622b ? (_0x52622b['classList'][_0x42a0c3(0x82e)](_0x42a0c3(0x426)), _0x433ebe['classList'][_0x42a0c3(0x82e)](_0x42a0c3(0x5d1)), _0x52622b['classList'][_0x42a0c3(0x82e)](_0x42a0c3(0x1ff)), setTimeout(() => { const _0x87ccbb = _0x42a0c3; _0x433ebe[_0x87ccbb(0x544)]['remove']('is-visible', _0x87ccbb(0x5d1)), _0x52622b[_0x87ccbb(0x544)]['remove'](_0x87ccbb(0x426)), _0x4025fd['diaryCurrentPage'] = _0x40e030, _0x12a267(), _0x4025fd['isAnimatingDiary'] = ![]; }, 0x2bc)) : 'OGcfA' !== _0x42a0c3(0x6ef) ? (_0x1b39eb[_0x42a0c3(0x20b)](_0x42a0c3(0xab8), () => _0x5be6cf['click']()), _0x4eccd9[_0x42a0c3(0x20b)](_0x42a0c3(0x6a4), async _0x2f5c3c => { const _0x1f196c = _0x42a0c3, _0x2add50 = _0x2f5c3c[_0x1f196c(0x492)]['files'][0x0]; if (!_0x2add50) return; try { _0x85b557[_0x1f196c(0x2fd)] = _0x41c47f[_0x1f196c(0x798)](_0x2add50); } catch (_0x4c14da) { _0x5dc309(_0x1f196c(0x27c) + _0x4c14da[_0x1f196c(0x973)]); } })) : _0x4025fd['isAnimatingDiary'] = ![]; } function _0x39c74a() { const _0x42ff3d = _0x2a98b7; if (_0x4025fd[_0x42ff3d(0xa31)]) return; const _0x39d74e = _0x4025fd['diaryCurrentPage']; if (_0x39d74e <= 0x0) return; _0x4025fd[_0x42ff3d(0xa31)] = !![]; const _0x1e2a7b = _0x39d74e - 0x1, _0x105e28 = document[_0x42ff3d(0x4b6)](_0x42ff3d(0x9fa) + _0x39d74e), _0x3a9a53 = document['getElementById'](_0x42ff3d(0x9fa) + _0x1e2a7b); if (_0x105e28 && _0x3a9a53) { if (_0x42ff3d(0xa23) !== _0x42ff3d(0x977)) _0x3a9a53['classList']['add'](_0x42ff3d(0x7ac)), _0x105e28[_0x42ff3d(0x544)][_0x42ff3d(0x82e)](_0x42ff3d(0x92c)), _0x3a9a53[_0x42ff3d(0x544)]['add'](_0x42ff3d(0x1ff)), setTimeout(() => { const _0x3256e9 = _0x42ff3d; _0x3256e9(0x854) !== _0x3256e9(0x8d4) ? (_0x105e28[_0x3256e9(0x544)][_0x3256e9(0x7f8)](_0x3256e9(0x1ff), 'is-exiting-right'), _0x3a9a53[_0x3256e9(0x544)][_0x3256e9(0x7f8)](_0x3256e9(0x7ac)), _0x4025fd[_0x3256e9(0x44c)] = _0x1e2a7b, _0x12a267(), _0x4025fd[_0x3256e9(0xa31)] = ![]) : (_0x21839c[_0x3256e9(0x961)] = _0x442b26[_0x3256e9(0x961)], _0x7bf056[_0x3256e9(0x66c)](_0x3256e9(0x93d))); }, 0x2bc); else { if (_0xc631e7[_0x42ff3d(0x492)][_0x42ff3d(0x17f)](_0x42ff3d(0x703))) return; const _0x213a61 = _0x51a47c[_0x42ff3d(0x4b6)]('widget-play-pause-btn'); _0x213a61 && _0x213a61[_0x42ff3d(0xab8)](); } } else _0x4025fd[_0x42ff3d(0xa31)] = ![]; } function _0x2b4157() { const _0x480382 = _0x2a98b7; if (_0x480382(0x285) !== 'dvoEK') _0x39e3d2[_0x480382(0x3e5)](), _0x461d2d(); else return new Promise(_0x51b22d => { const _0x5a2380 = _0x480382, _0xdc0d25 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x5a2380(0x9c2)][_0x5a2380(0x44b)](_0x5a2380(0x6a2), _0xdc0d25); const _0x5e2a92 = document['getElementById'](_0x5a2380(0x51f)), _0x294cb9 = document[_0x5a2380(0x4b6)](_0x5a2380(0x321)), _0x1cc138 = document['getElementById']('diary-modal-save'), _0x4ed902 = document['getElementById'](_0x5a2380(0x23b)), _0xbb7605 = _0x5e2a92[_0x5a2380(0x6f8)]('.choice-modal-backdrop'), _0x377923 = () => { const _0x274b5d = _0x5a2380; _0x274b5d(0x573) !== _0x274b5d(0x679) ? (_0x5e2a92[_0x274b5d(0x7f8)](), _0x51b22d()) : _0x441bda[_0x274b5d(0x963)](_0x274b5d(0x22e) + _0x5943cb['id'] + ')，已跳过。这不应该发生，数据库可能已损坏。', _0x18c7f2); }; _0x1cc138[_0x5a2380(0x4a6)] = () => { const _0x2a0c74 = _0x5a2380; _0x39c34a(_0x294cb9[_0x2a0c74(0x95e)]), _0x377923(); }, _0x4ed902[_0x5a2380(0x4a6)] = _0x377923, _0xbb7605[_0x5a2380(0x4a6)] = _0x377923; }); } function _0x39c34a(_0x467e48) { const _0x4ad7aa = _0x2a98b7; if ('vWvSa' !== 'vWvSa') _0x10e044[_0x4ad7aa(0x636)]['backgroundImage'] = _0x4ad7aa(0x7c2) + _0x40175d[_0x4ad7aa(0x798)](_0x337acd) + ')', _0x19470c[_0x4ad7aa(0x636)][_0x4ad7aa(0x799)] = 'cover', _0x280519[_0x4ad7aa(0x636)][_0x4ad7aa(0x90b)] = _0x4ad7aa(0x5c1); else { const _0x183b9e = _0x467e48[_0x4ad7aa(0x345)](); if (!_0x183b9e || !_0x4025fd[_0x4ad7aa(0x7a3)]) return; let _0x358ac5 = _0x4025fd[_0x4ad7aa(0xab2)][_0x4ad7aa(0x32b)](_0x38a41e => _0x38a41e[_0x4ad7aa(0x3c0)] === _0x4025fd[_0x4ad7aa(0x7a3)]); if (!_0x358ac5) { if (_0x4ad7aa(0x142) !== _0x4ad7aa(0x142)) { const _0x5dc4eb = _0x58228f(_0x116b3f[_0x4ad7aa(0x3fa)]())['padStart'](0x2, '0'), _0x2a6257 = _0x66c9fd(_0x28e63c[_0x4ad7aa(0x24d)]())[_0x4ad7aa(0x412)](0x2, '0'); _0x346918['textContent'] = _0x5dc4eb + ':' + _0x2a6257; const _0x1053d3 = _0x35e697['getMonth']() + 0x1, _0x15dbc0 = _0x429c34['getDate'](), _0x3c6f64 = [_0x4ad7aa(0x16f), _0x4ad7aa(0x8bb), _0x4ad7aa(0x671), _0x4ad7aa(0x410), _0x4ad7aa(0x145), '星期五', _0x4ad7aa(0x923)][_0x4c6274[_0x4ad7aa(0x94e)]()]; _0x1c0d34[_0x4ad7aa(0xab3)] = _0x1053d3 + '月' + _0x15dbc0 + '日\x20' + _0x3c6f64; } else _0x358ac5 = { 'characterId': _0x4025fd['activeDiaryCharacterId'], 'entries': [] }, _0x4025fd['diaries']['push'](_0x358ac5); } _0x358ac5[_0x4ad7aa(0x204)]['push']({ 'timestamp': Date[_0x4ad7aa(0x98c)](), 'author': _0x4ad7aa(0x880), 'content': _0x183b9e }), _0x33c083(); const _0x9fe329 = _0x358ac5['entries'][_0x4ad7aa(0x84b)]; _0x4025fd['diaryCurrentPage'] = Math[_0x4ad7aa(0x245)](_0x9fe329 / 0x2) - 0x1, _0x12a267(); } } async function _0x13cde4() { const _0x57afd2 = _0x2a98b7, _0x288f12 = _0x4025fd[_0x57afd2(0xab2)][_0x57afd2(0x32b)](_0x30819e => _0x30819e[_0x57afd2(0x3c0)] === _0x4025fd[_0x57afd2(0x7a3)]), _0x4d875a = _0x4025fd[_0x57afd2(0x7a3)], _0x10b607 = _0x389a36(_0x4d875a); if (!_0x10b607 || _0x4025fd[_0x57afd2(0x517)]) return; _0x32d19f(!![], 'TA正在提笔写日记...'), _0x4025fd[_0x57afd2(0x517)] = !![]; let _0x376054 = []; try { const _0xa83fbf = _0x48c69b() || { 'name': '你' }, _0x1ad8c5 = _0x5b4257(_0x4d875a), { omniText: _0x2b9b0a } = _0x204d24(_0x4d875a, _0x4025fd[_0x57afd2(0xa4d)]); let _0x417afb = ''; if (_0x10b607[_0x57afd2(0x859)] && _0x10b607[_0x57afd2(0x859)][_0x57afd2(0x84b)] > 0x0) { if (_0x57afd2(0x71d) !== _0x57afd2(0x71d)) { const _0x2ae185 = { 'id': _0x39ff8a['id'], 'url': _0x4f2484[_0x57afd2(0x22c)] }; _0x1751dc(this, _0x2ae185); } else { const _0x272397 = _0x10b607[_0x57afd2(0x859)][_0x57afd2(0x30c)](_0x1da417 => _0x4025fd[_0x57afd2(0xa3c)][_0x57afd2(0x32b)](_0x158bbd => _0x158bbd['id'] === _0x1da417))[_0x57afd2(0x1f9)](Boolean)[_0x57afd2(0x30c)](_0x4d06d3 => _0x57afd2(0x2df) + _0x4d06d3[_0x57afd2(0x5f1)] + '\x0a' + _0x4d06d3[_0x57afd2(0x9c6)])[_0x57afd2(0x602)](''); if (_0x272397) _0x417afb = _0x57afd2(0x5ea) + _0x272397; } } const _0x3539ad = _0xa83fbf[_0x57afd2(0x8ad)] ? _0x57afd2(0x259) + _0xa83fbf[_0x57afd2(0x5f1)] + '”的补充信息\x0a' + _0xa83fbf[_0x57afd2(0x8ad)] : '', _0xfa2ad5 = _0xe4da1e(); let _0x2edfc1 = _0x57afd2(0x70d); if (_0x288f12 && _0x288f12[_0x57afd2(0x204)]) { const _0x2cd1fa = _0x288f12[_0x57afd2(0x204)][_0x57afd2(0x1f9)](_0x307540 => _0x307540[_0x57afd2(0x675)] === _0x57afd2(0x880))[_0x57afd2(0x725)](); _0x2cd1fa && ('DCKOk' !== _0x57afd2(0x318) ? _0x3b33d1 = _0x204005[_0x57afd2(0x9c6)] : _0x2edfc1 = _0x2cd1fa[_0x57afd2(0x9c6)]); } const _0x37c10b = '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“' + _0x10b607[_0x57afd2(0x5f1)] + '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a' + _0xa83fbf[_0x57afd2(0x5f1)] + _0x57afd2(0x582) + _0xa83fbf[_0x57afd2(0x5f1)] + _0x57afd2(0xa42) + _0x2edfc1 + _0x57afd2(0x736) + _0x10b607[_0x57afd2(0x8ad)] + '\x0a' + _0x3539ad + '\x0a' + _0x417afb + '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20' + new Date()[_0x57afd2(0x8de)]('zh-CN', { 'dateStyle': _0x57afd2(0x147), 'timeStyle': _0x57afd2(0x2ab) }) + '\x0a-\x20**日记本的上一笔记录是在**:\x20' + _0x144234(new Date(_0x288f12?.[_0x57afd2(0x204)]?.['at'](-0x1)?.[_0x57afd2(0x36b)] || Date[_0x57afd2(0x98c)]())) + _0x57afd2(0x463) + (_0x2b9b0a || '最近没有互动记录。') + _0x57afd2(0x2cd) + (_0xfa2ad5 || _0x57afd2(0x612)) + _0x57afd2(0x82c); _0x376054 = [{ 'role': _0x57afd2(0x6f9), 'content': _0x37c10b }, { 'role': _0x57afd2(0x880), 'content': _0x57afd2(0x6c3) }]; const _0x58e77e = await _0x414037(_0x376054); if (_0x58e77e) { if ('xDFwi' !== _0x57afd2(0x488)) _0x39bb2c[_0x57afd2(0x66c)](_0x57afd2(0x570)), _0x4ef1d8[_0x57afd2(0x8f7)]('music_library', { 'keyPath': 'id' }); else { let _0x314247 = _0x4025fd[_0x57afd2(0xab2)]['find'](_0x5435ac => _0x5435ac['characterId'] === _0x4d875a); if (!_0x314247) { if (_0x57afd2(0x28b) !== _0x57afd2(0x28b)) { const _0x2c343d = _0x126dd0[_0x57afd2(0x49f)](_0x5c059c[_0x57afd2(0x66c)] || [])[_0x57afd2(0x829)](/'/g, _0x57afd2(0x32c))['replace'](/"/g, _0x57afd2(0x8ba)), _0x3fe8e4 = _0x58bdd9['contact_name'] || _0x57afd2(0x9db); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0xdc76cb < _0x47789c[_0x57afd2(0x84b)] - 0x1 ? _0x57afd2(0x5de) : '') + _0x57afd2(0x5ac) + _0x2c343d + _0x57afd2(0xa56) + _0x3fe8e4 + _0x57afd2(0x4fb) + _0x57051b + _0x57afd2(0x739) + _0x3fe8e4[_0x57afd2(0x4b0)](0x0) + _0x57afd2(0x9bb) + _0x3fe8e4 + _0x57afd2(0x2be) + (_0x2438dc[_0x57afd2(0x41b)] || '') + _0x57afd2(0x315); } else _0x314247 = { 'characterId': _0x4d875a, 'entries': [] }, _0x4025fd['diaries'][_0x57afd2(0x65b)](_0x314247); } _0x314247[_0x57afd2(0x204)][_0x57afd2(0x65b)]({ 'timestamp': Date[_0x57afd2(0x98c)](), 'author': _0x4d875a, 'content': _0x58e77e }), _0x33c083(); const _0x565540 = _0x314247[_0x57afd2(0x204)]['length']; _0x4025fd[_0x57afd2(0x44c)] = Math[_0x57afd2(0x245)](_0x565540 / 0x2) - 0x1, _0x12a267(); } } } catch (_0x422a46) { _0x26f8b2(_0x57afd2(0x365) + _0x422a46[_0x57afd2(0x973)]); } finally { _0x32d19f(![]), _0x4025fd[_0x57afd2(0x517)] = ![]; } } function _0x3f2313() { const _0x560612 = _0x2a98b7; if ('pjhec' !== _0x560612(0xa7d)) { const _0x25fd26 = document['getElementById'](_0x560612(0x6c9)), _0x3d1ed5 = document[_0x560612(0x4b6)](_0x560612(0x672)), _0x15c7f7 = document[_0x560612(0x6f8)]('#meeting-view-screen\x20.chat-input-area'); _0x4025fd[_0x560612(0x815)] === _0x560612(0x2a2) ? _0x560612(0x3a6) === 'dlxpT' ? _0x317de3 = _0xd15d82[_0x560612(0x93f)](_0x218752) : (_0x25fd26[_0x560612(0x636)][_0x560612(0x6c5)] = _0x560612(0x55f), _0x3d1ed5[_0x560612(0x636)]['display'] = _0x560612(0x493)) : (_0x25fd26[_0x560612(0x636)][_0x560612(0x6c5)] = _0x560612(0x493), _0x3d1ed5[_0x560612(0x636)][_0x560612(0x6c5)] = _0x560612(0x55f)), _0x15c7f7[_0x560612(0x636)]['display'] = _0x560612(0x493); } else { _0xc99880[_0x560612(0x963)](_0x560612(0x396), _0x2f2431); const _0x341275 = { 'role': _0x560612(0x135), 'content': _0x560612(0x72c) + _0x519aa2['message'], 'senderId': _0x1c6b82['id'], 'isOffline': _0x5b7f98 }; _0x400610['conversationHistory'][_0x560612(0x65b)](_0x341275), _0x2fc9d2(); } } function _0x3681e3() { const _0x18e468 = _0x2a98b7, _0x53edce = document['getElementById'](_0x18e468(0x370)), _0x3bcd69 = document[_0x18e468(0x4b6)](_0x18e468(0x8e6)); if (_0x4025fd[_0x18e468(0x255)][_0x18e468(0x84b)] > 0x0) { if (_0x18e468(0x68c) === _0x18e468(0x1f0)) { if (_0x2129a2[_0x18e468(0x84b)] === 0x0) return; _0x2435d1 = (_0x5369a9 - 0x1 + _0x1523c8['length']) % _0x451f86[_0x18e468(0x84b)], _0x2ea5c4(_0x520559[_0x477ae0], _0x4d1e5d); } else { const _0x3476ed = _0x4025fd[_0x18e468(0x255)]['shift'](); _0x53edce[_0x18e468(0xab3)] = _0x3476ed[_0x18e468(0x681)] === _0x18e468(0x6fc) ? '旁白' : _0x3476ed['speaker'], _0x3bcd69[_0x18e468(0xab3)] = _0x3476ed[_0x18e468(0x3e3)]; if (_0x3476ed[_0x18e468(0x681)] !== _0x18e468(0x6fc)) { if (_0x18e468(0x957) !== 'hSOza') _0x5df7db(_0x4025fd[_0x18e468(0xa4e)], _0x3476ed[_0x18e468(0xa55)]); else { if (_0x2def32[_0x18e468(0xa7f)] === 'Escape') _0x447a51(null); _0x146a6a[_0x18e468(0xa7f)] === _0x18e468(0x8cc) && (_0x3a2f09[_0x18e468(0x3e5)](), _0x30b3f6()); } } } } else { const _0x131d26 = _0x4025fd[_0x18e468(0x3f4)][_0x4025fd['activeMeetingCharId']]; if (_0x131d26 && _0x131d26[_0x18e468(0x84b)] > 0x0) { _0x4025fd[_0x18e468(0x255)] = [..._0x131d26]; const _0x5a24e4 = _0x4025fd[_0x18e468(0x255)][_0x18e468(0x459)](); _0x53edce['textContent'] = _0x5a24e4[_0x18e468(0x681)] === _0x18e468(0x6fc) ? '旁白' : _0x5a24e4[_0x18e468(0x681)], _0x3bcd69['textContent'] = _0x5a24e4['line'], _0x5a24e4['speaker'] !== _0x18e468(0x6fc) && _0x5df7db(_0x4025fd[_0x18e468(0xa4e)], _0x5a24e4['emotion']); } else _0x53edce[_0x18e468(0xab3)] = '旁白', _0x3bcd69[_0x18e468(0xab3)] = _0x18e468(0x918); } } async function _0x5df7db(_0x212aa6, _0x17cc50) { const _0x3e5d99 = _0x2a98b7, _0x528916 = document[_0x3e5d99(0x4b6)]('galgame-sprite'), _0x53210f = document[_0x3e5d99(0x4b6)](_0x3e5d99(0x837)), _0x41e201 = _0x389a36(_0x212aa6), _0x4af7aa = _0x41e201?.[_0x3e5d99(0x48a)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x4761d1 = 0x50 * _0x4af7aa[_0x3e5d99(0x1c6)]; _0x53210f[_0x3e5d99(0x636)]['height'] = _0x4761d1 + '%', _0x53210f[_0x3e5d99(0x636)][_0x3e5d99(0x6f0)] = _0x4761d1 + '%', _0x53210f[_0x3e5d99(0x636)][_0x3e5d99(0x5bb)] = _0x4af7aa['x'] + '%', _0x53210f[_0x3e5d99(0x636)]['top'] = _0x4af7aa['y'] + '%', _0x53210f['style'][_0x3e5d99(0x65c)] = _0x3e5d99(0x127), _0x53210f[_0x3e5d99(0x636)][_0x3e5d99(0x1d2)] = 'auto'; const _0x4259f0 = [_0x3e5d99(0x72b), _0x3e5d99(0x901), _0x3e5d99(0x98f), _0x3e5d99(0xa39), _0x3e5d99(0x374)], _0x34d92d = _0x4259f0[_0x3e5d99(0x9f1)](_0x17cc50) ? _0x17cc50 : 'normal'; try { const _0x4fc302 = await _0x34b988('char_sprite_' + _0x34d92d + '_' + _0x212aa6); if (_0x4fc302) { if (_0x528916['src'] && _0x528916[_0x3e5d99(0x636)][_0x3e5d99(0x81c)] !== '0') { if ('JKdbC' === _0x3e5d99(0x2e0)) { const _0x2ced68 = _0x135688['transaction'](_0x4b851d, _0x3e5d99(0x812)), _0xa90aec = _0x2ced68[_0x3e5d99(0x301)](_0x419ad2), _0x193fb9 = _0xa90aec[_0x3e5d99(0x23f)](_0x2b44a8); _0x193fb9[_0x3e5d99(0x62f)] = () => _0x496c42(_0x193fb9['result'] ? _0x193fb9['result'][_0x3e5d99(0x822)] : null), _0x193fb9[_0x3e5d99(0x8ec)] = () => _0x3ae3a1(_0x193fb9['error']); } else _0x528916[_0x3e5d99(0x636)][_0x3e5d99(0x81c)] = 0x0, setTimeout(() => { const _0x3b8e22 = _0x3e5d99; _0x528916[_0x3b8e22(0x2fd)] = URL['createObjectURL'](_0x4fc302), _0x528916[_0x3b8e22(0x636)]['opacity'] = 0x1; }, 0x96); } else _0x528916[_0x3e5d99(0x2fd)] = URL['createObjectURL'](_0x4fc302), _0x528916[_0x3e5d99(0x636)]['opacity'] = 0x1; } else { const _0x5120e5 = await _0x34b988(_0x3e5d99(0x1ba) + _0x212aa6); _0x528916['src'] = _0x5120e5 ? URL[_0x3e5d99(0x798)](_0x5120e5) : ''; } } catch (_0x2e631e) { console[_0x3e5d99(0x963)](_0x3e5d99(0x850), _0x2e631e), _0x528916[_0x3e5d99(0x2fd)] = ''; } } let _0x3dbf56 = ![], _0xd60ffd = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x2d4cdc = document['getElementById'](_0x2a98b7(0x52d)), _0x2590d3 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x869)), _0x57350e = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x969)), _0x3464d1 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x604)), _0xa7eca6 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x99a)), _0x4f21f4 = document['getElementById']('galgame-sprite-container'), _0x1d67e9 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x485)), _0x55aef3 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x2f7)); let _0x148f12 = {}; function _0x2fd00e() { const _0x16da14 = _0x2a98b7; if (_0x16da14(0x7ef) === _0x16da14(0x7f9)) { const _0x1c2b75 = _0x49f462[_0x16da14(0x30e)]['findIndex'](_0x2bf642 => _0x2bf642['id'] === _0x4325d6); _0x1c2b75 > -0x1 && (_0x48c897['accountingData']['splice'](_0x1c2b75, 0x1), _0x5c5056(), _0x55aa09()); } else { const _0x1dd369 = _0x389a36(_0x4025fd['activeMeetingCharId']); if (!_0x1dd369) return; _0x3dbf56 = !![], _0xa7eca6[_0x16da14(0x636)][_0x16da14(0x6c5)] = _0x16da14(0x493); const _0x388c55 = _0x1dd369['spriteTransform'] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x16da14(0x4b6)]('sprite-slider-x')[_0x16da14(0x95e)] = _0x388c55['x'], document[_0x16da14(0x4b6)](_0x16da14(0x669))['value'] = _0x388c55['y'], document[_0x16da14(0x4b6)]('sprite-slider-scale')[_0x16da14(0x95e)] = _0x388c55[_0x16da14(0x1c6)] * 0x64, _0x148f12 = { ..._0x388c55 }, document['getElementById'](_0x16da14(0x99e))[_0x16da14(0x636)][_0x16da14(0x6c5)] = _0x16da14(0x55f), document[_0x16da14(0x4b6)](_0x16da14(0x33c))[_0x16da14(0x636)][_0x16da14(0x6c5)] = _0x16da14(0x55f); } } function _0x46efa4(_0x596b18 = ![]) { const _0x26beb3 = _0x2a98b7; if ('yBDOt' === 'yBDOt') { _0x3dbf56 = ![], _0xa7eca6[_0x26beb3(0x636)][_0x26beb3(0x6c5)] = _0x26beb3(0x55f), document[_0x26beb3(0x4b6)](_0x26beb3(0x99e))[_0x26beb3(0x636)][_0x26beb3(0x6c5)] = _0x26beb3(0x493), document[_0x26beb3(0x4b6)]('galgame-sprite-adjust-ui')['style']['display'] = 'block'; if (!_0x596b18) { const _0xa1d82a = _0x389a36(_0x4025fd['activeMeetingCharId']); if (_0xa1d82a) { if ('MrcVL' !== _0x26beb3(0x3be)) { _0x36db56(_0x26beb3(0x9f9)); return; } else _0xa1d82a[_0x26beb3(0x48a)] = _0x148f12, _0x5df7db(_0x4025fd[_0x26beb3(0xa4e)], _0x26beb3(0x72b)); } } } else return _0xa6bb30['name'] !== _0x26beb3(0x40f) && _0x4fe415[_0x26beb3(0x963)](_0x26beb3(0x3e1), _0x375716), null; } function _0x4a1e88() { const _0xa2376e = _0x2a98b7, _0x5f05c5 = _0x389a36(_0x4025fd[_0xa2376e(0xa4e)]); if (!_0x5f05c5) return; const _0x2e1552 = parseFloat(document[_0xa2376e(0x4b6)](_0xa2376e(0xa3a))[_0xa2376e(0x95e)]), _0x329cb5 = parseFloat(document[_0xa2376e(0x4b6)](_0xa2376e(0x669))['value']), _0x457330 = parseFloat(document['getElementById'](_0xa2376e(0x6ad))[_0xa2376e(0x95e)]) / 0x64; _0x5f05c5[_0xa2376e(0x48a)] = { 'x': _0x2e1552, 'y': _0x329cb5, 'scale': _0x457330 }, _0x33c083(), _0x26f8b2(_0xa2376e(0x621)), _0x46efa4(!![]); } function _0x45e079() { const _0x5c6867 = _0x2a98b7; _0x2f2e39('确定要恢复这个角色的默认立绘位置吗？')[_0x5c6867(0x4ea)](_0x369ec8 => { const _0x29299f = _0x5c6867; if (_0x369ec8) { const _0x563eb7 = _0x389a36(_0x4025fd[_0x29299f(0xa4e)]); _0x563eb7 && (delete _0x563eb7[_0x29299f(0x48a)], _0x33c083(), _0x5df7db(_0x563eb7['id'], 'normal'), _0x26f8b2(_0x29299f(0x81f)), _0x46efa4(!![])); } }); } function _0x1330fc() { const _0x16769a = _0x2a98b7; if (!_0x3dbf56) return; const _0x7b9d73 = _0x4025fd[_0x16769a(0xa4e)], _0x197944 = _0x389a36(_0x7b9d73); if (!_0x197944) return; const _0x1b9f14 = parseFloat(document['getElementById'](_0x16769a(0xa3a))[_0x16769a(0x95e)]), _0x55ff89 = parseFloat(document[_0x16769a(0x4b6)](_0x16769a(0x669))[_0x16769a(0x95e)]), _0x54aad6 = parseFloat(document['getElementById'](_0x16769a(0x6ad))[_0x16769a(0x95e)]) / 0x64; _0x197944[_0x16769a(0x48a)] = { 'x': _0x1b9f14, 'y': _0x55ff89, 'scale': _0x54aad6 }; const _0x31d86c = document[_0x16769a(0x4b6)]('galgame-sprite-container'), _0x30b507 = 0x50 * _0x54aad6; _0x31d86c[_0x16769a(0x636)][_0x16769a(0x6b0)] = _0x30b507 + '%', _0x31d86c['style'][_0x16769a(0x6f0)] = _0x30b507 + '%', _0x31d86c[_0x16769a(0x636)][_0x16769a(0x5bb)] = _0x1b9f14 + '%', _0x31d86c[_0x16769a(0x636)]['top'] = _0x55ff89 + '%', _0x31d86c[_0x16769a(0x636)][_0x16769a(0x65c)] = _0x16769a(0x127); } document['getElementById'](_0x2a98b7(0xa3a))[_0x2a98b7(0x20b)](_0x2a98b7(0x60c), _0x1330fc), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x669))[_0x2a98b7(0x20b)]('input', _0x1330fc), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x6ad))[_0x2a98b7(0x20b)](_0x2a98b7(0x60c), _0x1330fc), _0x2d4cdc[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x2fd00e), _0x2590d3[_0x2a98b7(0x20b)]('click', _0x4a1e88), _0x57350e[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x46efa4(![])), _0x3464d1[_0x2a98b7(0x20b)]('click', _0x45e079); function _0x5cec68(_0x58cd48) { const _0x27569a = _0x2a98b7, _0x5a3534 = _0x389a36(_0x58cd48); if (!_0x5a3534) return; const _0x13b2dd = _0x4025fd['chats']['find'](_0x591fd2 => _0x591fd2['type'] === _0x27569a(0x258) && _0x591fd2['participantIds'][_0x27569a(0x9f1)](_0x58cd48)), _0x2d1361 = _0x25fa5a(_0x13b2dd['id']), _0x156cbc = _0x4025fd['conversationHistory'][_0x27569a(0x1f9)](_0x358ab6 => _0x358ab6[_0x27569a(0x45e)])[_0x27569a(0x725)](), _0x51011f = document[_0x27569a(0x4b6)](_0x27569a(0x370)), _0x286a12 = document[_0x27569a(0x4b6)]('galgame-text'); let _0x5f4821 = null; if (_0x156cbc) { if (_0x27569a(0x986) === _0x27569a(0x37f)) _0x4429b8[_0x27569a(0x870)](), _0xaeaa13(); else { if (_0x156cbc[_0x27569a(0x1ce)] === _0x27569a(0x135)) { const _0xc4d668 = _0x4025fd[_0x27569a(0x3f4)][_0x58cd48]; _0xc4d668 && _0xc4d668[_0x27569a(0x84b)] > 0x0 && (_0x5f4821 = _0xc4d668['at'](-0x1)); } else { if ('gCQJH' !== 'gCQJH') { const _0x4c751a = _0x5f5603[_0x27569a(0x4b6)](_0x27569a(0x25b)), _0x1e5fa6 = _0x4c751a[_0x27569a(0x4e3)](_0x27569a(0x1dc)), _0xb9f1e8 = _0x128b33[_0x27569a(0x6f8)]('#group-settings-screen\x20.selected-options-text'); if (_0x1e5fa6[_0x27569a(0x84b)] === 0x0) _0xb9f1e8[_0x27569a(0xab3)] = _0x27569a(0x535); else _0x1e5fa6['length'] > 0x2 ? _0xb9f1e8[_0x27569a(0xab3)] = _0x27569a(0x305) + _0x1e5fa6['length'] + '\x20项' : _0xb9f1e8['textContent'] = _0x1f44cf['from'](_0x1e5fa6)[_0x27569a(0x30c)](_0x10517a => _0x10517a['parentElement']['textContent']['trim']())['join']('、'); } else _0x5f4821 = { 'speaker': _0x2d1361[_0x27569a(0x5f1)], 'line': _0x156cbc['content'], 'emotion': 'normal' }; } } } if (_0x5f4821) _0x51011f[_0x27569a(0xab3)] = _0x5f4821[_0x27569a(0x681)] === _0x27569a(0x6fc) ? '旁白' : _0x5f4821[_0x27569a(0x681)], _0x286a12['textContent'] = _0x5f4821['line'], _0x5f4821['speaker'] === _0x5a3534[_0x27569a(0x5f1)] ? 'nBWiA' !== _0x27569a(0x524) ? _0x7d11ff['setItem'](_0x27569a(0x61d), _0x499673['stringify']({ 'playlist': _0xe34812[_0x27569a(0x34a)], 'currentIndex': _0x2347b9[_0x27569a(0x1f5)] })) : _0x5df7db(_0x58cd48, _0x5f4821[_0x27569a(0xa55)]) : _0x27569a(0x5ad) !== _0x27569a(0x3a3) ? _0x5df7db(_0x58cd48, _0x27569a(0x72b)) : (_0x5f42e7 = _0x2da2e2[_0x27569a(0x597)]('style'), _0x2cc243['id'] = _0x27569a(0x5b6) + _0x104210['id'], _0x733f5f[_0x27569a(0x506)]['appendChild'](_0x117cd4)); else { if (_0x27569a(0x190) !== _0x27569a(0x190)) { if (!_0x59c7ea[_0x27569a(0x5f8)](_0x1aafe1)) return _0x27569a(0x14b); if (_0x594fa8[_0x27569a(0x84b)] === 0x0) return _0x27569a(0x2fb); return _0x27569a(0x56e) + _0x215e46[_0x27569a(0x30c)]((_0x137d4e, _0x2665b5) => _0x27569a(0x637) + (_0x2665b5 < _0x213afd[_0x27569a(0x84b)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>' + (_0x137d4e[_0x27569a(0x54f)] || _0x27569a(0x504)) + _0x27569a(0x9ae) + (_0x137d4e['timestamp'] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x27569a(0x602)]('') + _0x27569a(0x86f); } else _0x51011f[_0x27569a(0xab3)] = _0x5a3534[_0x27569a(0x5f1)], _0x286a12[_0x27569a(0xab3)] = _0x27569a(0x291), _0x5df7db(_0x58cd48, 'normal'); } } function _0x30a1f8() { const _0x25df6e = _0x2a98b7, _0x3f49d4 = new Date(), _0x74d74d = document[_0x25df6e(0x4b6)](_0x25df6e(0x1ef)), _0x18c29e = document[_0x25df6e(0x4b6)](_0x25df6e(0x54b)); if (_0x74d74d && _0x18c29e) { const _0xa33576 = String(_0x3f49d4[_0x25df6e(0x3fa)]())[_0x25df6e(0x412)](0x2, '0'), _0x150704 = String(_0x3f49d4[_0x25df6e(0x24d)]())[_0x25df6e(0x412)](0x2, '0'); _0x74d74d[_0x25df6e(0xab3)] = _0xa33576 + ':' + _0x150704; const _0x43b604 = _0x3f49d4[_0x25df6e(0x720)]() + 0x1, _0x9dd7c = _0x3f49d4[_0x25df6e(0x1f6)](), _0x558180 = ['星期日', _0x25df6e(0x8bb), _0x25df6e(0x671), _0x25df6e(0x410), _0x25df6e(0x145), _0x25df6e(0x79c), _0x25df6e(0x923)][_0x3f49d4[_0x25df6e(0x94e)]()]; _0x18c29e[_0x25df6e(0xab3)] = _0x43b604 + '月' + _0x9dd7c + '日\x20' + _0x558180; } } const _0x2bbdd2 = document['getElementById']('listen-together-modal'), _0x1dac58 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x853)), _0x2622b9 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x42d)), _0xfa71db = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x93c)), _0x50a2c7 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x6f5)), _0x133351 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x99d)), _0x4fb44a = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x86c)), _0x148b0c = document['getElementById'](_0x2a98b7(0x5cf)), _0x2e22e0 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x794)); let _0x207303 = []; async function _0x39319b() { const _0x8491df = _0x2a98b7; if ('XeswD' !== 'WrdEj') { if (!_0x4025fd[_0x8491df(0xa4d)]) return; _0x50a2c7[_0x8491df(0x3c8)] = _0x8491df(0x498), _0x2bbdd2[_0x8491df(0x544)][_0x8491df(0x82e)](_0x8491df(0x187)); const _0x3ee2bb = await _0x4d713d(); if (_0x3ee2bb[_0x8491df(0x84b)] === 0x0) { _0x50a2c7[_0x8491df(0x3c8)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>'; return; } _0x50a2c7[_0x8491df(0x3c8)] = '', _0x3ee2bb[_0x8491df(0x6ff)](_0x25cc7e => { const _0x5befe5 = _0x8491df, _0x2d4bcc = document[_0x5befe5(0x597)]('div'); _0x2d4bcc[_0x5befe5(0x575)] = _0x5befe5(0x58a); const _0x1c2391 = _0x25cc7e[_0x5befe5(0x549)] ? URL[_0x5befe5(0x798)](_0x25cc7e[_0x5befe5(0x549)]) : _0x535078; _0x2d4bcc[_0x5befe5(0x3c8)] = _0x5befe5(0x50d) + _0x1c2391 + _0x5befe5(0x41d) + (_0x25cc7e[_0x5befe5(0x915)][_0x5befe5(0x67e)] || _0x5befe5(0x5b5)) + _0x5befe5(0x2ef) + (_0x25cc7e[_0x5befe5(0x915)]['歌手'] || _0x5befe5(0x817)) + _0x5befe5(0x446), _0x2d4bcc[_0x5befe5(0x20b)](_0x5befe5(0xab8), () => { _0x5574a1(_0x25cc7e); }), _0x50a2c7[_0x5befe5(0x329)](_0x2d4bcc); }); } else _0x5ef7ae[_0x8491df(0x544)]['remove']('show'); } function _0x44d4e5() { const _0x1b5b1f = _0x2a98b7; if (_0x1b5b1f(0x821) === _0x1b5b1f(0x821)) _0x2bbdd2[_0x1b5b1f(0x544)][_0x1b5b1f(0x7f8)](_0x1b5b1f(0x187)); else { const _0x577609 = _0x1c333a[_0x1b5b1f(0x9c6)] ? '\x20' + _0x1a10ec[_0x1b5b1f(0x9c6)] : ''; _0x32a30d[_0x1b5b1f(0x65b)]('[' + _0x191ef5(_0x49dd77) + _0x1b5b1f(0x434) + _0x577609); } } async function _0x5574a1(_0xc4b4f3) { const _0x21d200 = _0x2a98b7; if (!_0x4025fd[_0x21d200(0xa4d)] || !_0xc4b4f3) return; let _0x22b91b = null; if (_0xc4b4f3[_0x21d200(0x549)]) { if ('cbEaO' === _0x21d200(0x7d6)) try { _0x22b91b = _0x21d200(0x27a) + Date[_0x21d200(0x98c)]() + '_' + Math['random'](), await _0x5a7151(_0x22b91b, _0xc4b4f3[_0x21d200(0x549)]); } catch (_0x4314dc) { 'EKqfz' === _0x21d200(0xabc) ? console[_0x21d200(0x963)](_0x21d200(0x44f), _0x4314dc) : (_0x39735f(_0x4f8433['id']), _0x408ce8(_0x21d200(0x86d)), _0x4f03ea(_0x21d200(0x651)), _0x29a68c(![])); } else throw new _0x49c554(_0x21d200(0x518)); } const _0x5601d8 = { 'role': 'user', 'type': _0x21d200(0x80d), 'content': '[用户发起了听歌邀请:\x20' + _0xc4b4f3[_0x21d200(0x915)][_0x21d200(0x67e)] + ']', 'songId': _0xc4b4f3['id'], 'songName': _0xc4b4f3[_0x21d200(0x915)][_0x21d200(0x67e)], 'artist': _0xc4b4f3['info']['歌手'], 'coverId': _0x22b91b, 'timestamp': Date[_0x21d200(0x98c)]() }; _0x4025fd[_0x21d200(0x24a)]['push'](_0x5601d8), _0x530f2e(), _0x21e41c(), _0x44d4e5(), setTimeout(_0x4e1acc, 0x64); } _0x1dac58[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x39319b), _0x2622b9['addEventListener'](_0x2a98b7(0xab8), _0x44d4e5), _0xfa71db[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), _0x44d4e5); async function _0x434afc(_0x1a9894, _0x5ecfc1, _0x5c9cd5) { const _0x34b499 = _0x2a98b7, _0x1b2530 = _0x4025fd['chats'][_0x34b499(0x32b)](_0x508d14 => _0x508d14['activeListenSession'] && _0x508d14[_0x34b499(0x4dc)][_0x34b499(0x387)]), _0x5a943d = _0xba11a1(); if (_0x1b2530 && _0x1b2530['id'] !== _0x5a943d['id']) _0x1b2530['activeListenSession'] = null, _0x26f8b2(_0x34b499(0x14e)), _0x33c083(); else _0x1b2530 && _0x1b2530['id'] === _0x5a943d['id'] && _0x26f8b2(_0x34b499(0x85f)); _0x32d19f(!![], _0x34b499(0x4e6)); if (!_0x5a943d) { _0x32d19f(![]), _0x26f8b2(_0x34b499(0x19d)); return; } const _0x1b8e28 = await _0x246760(_0x1a9894); if (!_0x1b8e28) { _0x32d19f(![]), _0x26f8b2(_0x34b499(0x1cf)); return; } _0x5a943d[_0x34b499(0x4dc)] = { 'isActive': !![], 'songId': _0x1a9894, 'leaderId': _0x34b499(0x880), 'songName': _0x1b8e28['info'][_0x34b499(0x67e)], 'artist': _0x1b8e28[_0x34b499(0x915)]['歌手'], 'cover': _0x1b8e28[_0x34b499(0x549)] }, _0x33c083(), document['getElementById'](_0x34b499(0x29c))[_0x34b499(0x2fd)] = _0x1b8e28[_0x34b499(0x549)] ? URL[_0x34b499(0x798)](_0x1b8e28[_0x34b499(0x549)]) : _0x535078, document[_0x34b499(0x4b6)](_0x34b499(0x858))[_0x34b499(0xab3)] = _0x1b8e28[_0x34b499(0x915)][_0x34b499(0x67e)], document[_0x34b499(0x4b6)]('lt-ui-song-artist')[_0x34b499(0xab3)] = _0x1b8e28[_0x34b499(0x915)]['歌手'], _0x586512(_0x1b8e28), _0x4fb44a[_0x34b499(0x636)]['display'] = _0x34b499(0x835), setTimeout(() => _0x4fb44a[_0x34b499(0x544)][_0x34b499(0x82e)](_0x34b499(0x187)), 0xa), _0x5c9cd5[_0x34b499(0x3c8)] = _0x34b499(0x9aa) + _0x5c9cd5[_0x34b499(0x6f8)]('.listen-together-song')['outerHTML'], _0x4025fd[_0x34b499(0x24a)][_0x5ecfc1] && (_0x4025fd[_0x34b499(0x24a)][_0x5ecfc1][_0x34b499(0x830)] = !![], _0x530f2e()), _0x32d19f(![]), _0x4d9787(_0x1a9894, [_0x1a9894]), _0x5a9481(_0x1b8e28, !![]); } function _0x2e91a0() { const _0x2dc534 = _0x2a98b7; if ('XaAqz' === _0x2dc534(0x9dc)) { const _0x54fbff = _0x4025fd[_0x2dc534(0x132)][_0x2dc534(0x32b)](_0x2c5753 => _0x2c5753['activeListenSession'] && _0x2c5753[_0x2dc534(0x4dc)]['isActive']); _0x54fbff && (_0x54fbff[_0x2dc534(0x4dc)] = null, _0x33c083(), _0x26f8b2('同步已断开。'), _0x5a9481(), _0x4fb44a[_0x2dc534(0x544)]['remove'](_0x2dc534(0x187)), setTimeout(() => _0x4fb44a[_0x2dc534(0x636)][_0x2dc534(0x6c5)] = _0x2dc534(0x55f), 0x12c)); } else { if (_0x1b08a1) _0x3d3527['textContent'] = '▶'; } } function _0x1512fc(_0x2d10d2) { const _0x4825ab = _0x2a98b7; if (_0x4825ab(0x40b) === _0x4825ab(0x40b)) { if (!_0x2d10d2) return []; const _0x3c9921 = _0x2d10d2[_0x4825ab(0x80a)]('\x0a'), _0x23f1e7 = [], _0x3ff042 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x295149 of _0x3c9921) { const _0x3251cb = _0x295149[_0x4825ab(0x561)](_0x3ff042); if (_0x3251cb) { if (_0x4825ab(0x797) !== _0x4825ab(0x797)) _0x17dd45[_0x4825ab(0x2fd)] = _0x322a4a[_0x4825ab(0x798)](_0x213a81), _0x2b86fe[_0x4825ab(0x636)][_0x4825ab(0x6c5)] = _0x4825ab(0x493); else { const _0x1ca903 = parseInt(_0x3251cb[0x1], 0xa), _0x4e6586 = parseInt(_0x3251cb[0x2], 0xa), _0x1f13f4 = parseInt(_0x3251cb[0x3], 0xa) * (_0x3251cb[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x3f5315 = _0x1ca903 * 0x3c + _0x4e6586 + _0x1f13f4 / 0x3e8, _0x4f66ae = _0x295149[_0x4825ab(0x829)](_0x3ff042, '')[_0x4825ab(0x345)](); _0x4f66ae && _0x23f1e7[_0x4825ab(0x65b)]({ 'time': _0x3f5315, 'text': _0x4f66ae }); } } } return _0x23f1e7; } else _0x264dd9['error']('Noir\x27s\x20Temporal\x20Patch\x20failed:', _0x3311bb); } function _0x586512(_0x2e5962) { const _0x16f93e = _0x2a98b7; _0x207303 = _0x1512fc(_0x2e5962[_0x16f93e(0x682)]), _0x2e22e0['innerHTML'] = ''; if (_0x207303[_0x16f93e(0x84b)] === 0x0) { _0x2e22e0[_0x16f93e(0x3c8)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x207303[_0x16f93e(0x6ff)]((_0x27ba59, _0x4e5786) => { const _0xe6c752 = _0x16f93e, _0x3411e0 = document[_0xe6c752(0x597)]('p'); _0x3411e0[_0xe6c752(0xab3)] = _0x27ba59[_0xe6c752(0xa20)], _0x3411e0['id'] = 'lyric-line-' + _0x4e5786, _0x2e22e0[_0xe6c752(0x329)](_0x3411e0); }); } function _0x29dd0e(_0x3de120, _0x4f3826, _0x2e947f, _0x5bfa62) { const _0xc7c38c = _0x2a98b7, _0x1d1414 = (_0x5bfa62 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x3de120 + _0x2e947f * Math[_0xc7c38c(0x324)](_0x1d1414), 'y': _0x4f3826 + _0x2e947f * Math['sin'](_0x1d1414) }; } function _0x967c7f(_0x510aaa) { const _0xd88705 = _0x2a98b7, _0x1f110c = 'http://www.w3.org/2000/svg', _0x1c0913 = document[_0xd88705(0x270)](_0x1f110c, _0xd88705(0x955)), _0x1449c0 = 0xfa, _0x45243b = _0x1449c0 / 0x2, _0x2c4224 = _0x1449c0 / 0x2, _0x3f7081 = _0x1449c0 / 0x2 - 0x14; _0x1c0913[_0xd88705(0x510)](_0xd88705(0x6f0), '100%'), _0x1c0913['setAttribute'](_0xd88705(0x6b0), '100%'), _0x1c0913[_0xd88705(0x510)](_0xd88705(0x1ab), '0\x200\x20' + _0x1449c0 + '\x20' + _0x1449c0); const _0x5e2675 = Object[_0xd88705(0x946)](_0x510aaa)[_0xd88705(0x3dc)]((_0x51d88b, _0x4b843c) => _0x51d88b + _0x4b843c, 0x0); if (_0x5e2675 === 0x0) return _0x1c0913; let _0x3701b4 = -0x5a; const _0x25948f = [_0xd88705(0x556), _0xd88705(0x354), _0xd88705(0x6cd), _0xd88705(0x3cb), '#c299ff', _0xd88705(0x792), _0xd88705(0x9da), _0xd88705(0x470)]; let _0x19acac = 0x0; for (const _0x100223 in _0x510aaa) { if (_0xd88705(0x4eb) === _0xd88705(0x4e9)) _0x5a2293[_0xd88705(0x4dc)] = null, _0x1b62c1(_0xd88705(0x14e)), _0x2a8489(); else { const _0x13058e = _0x510aaa[_0x100223]; if (_0x13058e <= 0x0) continue; const _0x4d768c = _0x13058e / _0x5e2675 * 0x168, _0xe17596 = _0x3701b4 + _0x4d768c, _0x5ca83a = _0x29dd0e(_0x45243b, _0x2c4224, _0x3f7081, _0xe17596), _0x53c17a = _0x29dd0e(_0x45243b, _0x2c4224, _0x3f7081, _0x3701b4), _0x117bd6 = _0x4d768c > 0xb4 ? '1' : '0', _0x266f4b = ['M', _0x5ca83a['x'], _0x5ca83a['y'], 'A', _0x3f7081, _0x3f7081, 0x0, _0x117bd6, 0x1, _0x53c17a['x'], _0x53c17a['y'], 'L', _0x45243b, _0x2c4224, 'Z'][_0xd88705(0x602)]('\x20'), _0x193582 = document[_0xd88705(0x270)](_0x1f110c, _0xd88705(0x7b5)); _0x193582[_0xd88705(0x510)]('d', _0x266f4b), _0x193582[_0xd88705(0x510)]('fill', _0x25948f[_0x19acac % _0x25948f[_0xd88705(0x84b)]]), _0x19acac++; const _0x292ab1 = document['createElementNS'](_0x1f110c, _0xd88705(0x9ab)); _0x292ab1[_0xd88705(0xab3)] = _0x100223 + ':\x20' + _0x13058e['toFixed'](0x2) + '\x20(' + (_0x13058e / _0x5e2675 * 0x64)[_0xd88705(0x68a)](0x1) + '%)', _0x193582[_0xd88705(0x329)](_0x292ab1), _0x1c0913[_0xd88705(0x329)](_0x193582), _0x3701b4 = _0xe17596; } } return _0x1c0913; } function _0x1b7cb8() { const _0x409bf3 = _0x2a98b7; if (_0x409bf3(0x4a9) !== _0x409bf3(0x4a9)) _0x52e6a9['src'] && _0x235055['style'][_0x409bf3(0x81c)] !== '0' ? (_0x1cc0fe[_0x409bf3(0x636)][_0x409bf3(0x81c)] = 0x0, _0x127a6a(() => { const _0x3ee915 = _0x409bf3; _0x4b3ad7[_0x3ee915(0x2fd)] = _0x3a3924[_0x3ee915(0x798)](_0x2be2be), _0x2612e8[_0x3ee915(0x636)]['opacity'] = 0x1; }, 0x96)) : (_0xa008f3[_0x409bf3(0x2fd)] = _0x13ba30[_0x409bf3(0x798)](_0x1d7d5d), _0xe3162f[_0x409bf3(0x636)]['opacity'] = 0x1); else { if (_0x207303[_0x409bf3(0x84b)] === 0x0) return; const _0x733b80 = _0x133351[_0x409bf3(0xa75)]; let _0x53ab71 = -0x1; for (let _0x433c9e = 0x0; _0x433c9e < _0x207303[_0x409bf3(0x84b)]; _0x433c9e++) { if (_0x733b80 >= _0x207303[_0x433c9e][_0x409bf3(0x3a0)]) _0x409bf3(0x801) !== _0x409bf3(0x801) ? _0x2dd12[_0x409bf3(0x65b)](_0x13e154) : _0x53ab71 = _0x433c9e; else break; } if (_0x53ab71 !== -0x1) { if (_0x409bf3(0x74b) !== _0x409bf3(0x74b)) { if (_0x29c53d) _0x2e2d24[_0x409bf3(0xab3)] = '❚❚'; } else { const _0x4aca96 = _0x2e22e0['querySelectorAll']('p'); _0x4aca96['forEach'](_0xeffc2f => _0xeffc2f[_0x409bf3(0x544)]['remove'](_0x409bf3(0x9ad))); const _0xb28bac = document[_0x409bf3(0x4b6)]('lyric-line-' + _0x53ab71); if (_0xb28bac) { if (_0x409bf3(0x2fe) !== _0x409bf3(0x585)) _0xb28bac[_0x409bf3(0x544)]['add']('active'), _0xb28bac['scrollIntoView']({ 'behavior': 'smooth', 'block': _0x409bf3(0x5c1) }); else { const _0x130142 = (_0x11f1a3 - _0x4b6a81) / (0x3e8 * 0x3c); _0x130142 < 0x3c ? _0x989ae8 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0xb4043a += _0x409bf3(0x89c) + _0x37d439[_0x409bf3(0xa05)](_0x130142 / 0x3c) + _0x409bf3(0x917); } } } } } } _0x148b0c[_0x2a98b7(0x20b)]('click', () => { const _0x2ddee5 = _0x2a98b7; if (_0x2ddee5(0x28e) !== _0x2ddee5(0xa3d)) _0x4fb44a[_0x2ddee5(0x544)][_0x2ddee5(0x7f8)]('show'), setTimeout(() => _0x4fb44a[_0x2ddee5(0x636)][_0x2ddee5(0x6c5)] = 'none', 0x12c); else { const _0x15a4d3 = new _0x143df9(), _0x12b8b2 = _0xc3bf17[_0x2ddee5(0x4b6)](_0x2ddee5(0x490)), _0x4fba29 = _0x1e8dda[_0x2ddee5(0x4b6)](_0x2ddee5(0x388)); if (_0x12b8b2 && _0x4fba29) { const _0x59e306 = _0x3cdc54(_0x15a4d3[_0x2ddee5(0x3fa)]())[_0x2ddee5(0x412)](0x2, '0'), _0x363bba = _0x181938(_0x15a4d3[_0x2ddee5(0x24d)]())['padStart'](0x2, '0'); _0x12b8b2[_0x2ddee5(0xab3)] = _0x59e306 + ':' + _0x363bba; const _0x14b79f = _0x15a4d3[_0x2ddee5(0x720)]() + 0x1, _0x187236 = _0x15a4d3[_0x2ddee5(0x1f6)](), _0x38a025 = [_0x2ddee5(0x16f), '星期一', _0x2ddee5(0x671), _0x2ddee5(0x410), _0x2ddee5(0x145), _0x2ddee5(0x79c), _0x2ddee5(0x923)][_0x15a4d3[_0x2ddee5(0x94e)]()]; _0x4fba29[_0x2ddee5(0xab3)] = _0x14b79f + '月' + _0x187236 + '日\x20' + _0x38a025; } } }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3c6))['addEventListener'](_0x2a98b7(0xab8), () => { const _0x1c0516 = _0x2a98b7; _0x4025fd[_0x1c0516(0x5ff)] && _0x4025fd[_0x1c0516(0x5ff)][_0x1c0516(0x387)] && (_0x4fb44a[_0x1c0516(0x636)]['display'] = _0x1c0516(0x835), setTimeout(() => _0x4fb44a[_0x1c0516(0x544)][_0x1c0516(0x82e)]('show'), 0xa)); }), _0x133351[_0x2a98b7(0x20b)](_0x2a98b7(0x9dd), _0x1b7cb8); const _0x31f9bd = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x497)), _0x3e912a = document['getElementById'](_0x2a98b7(0x964)), _0x57480b = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x6cf)); _0x31f9bd[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x2b5a25 = _0x2a98b7; _0x133351[_0x2b5a25(0x2fd)] && (_0x133351[_0x2b5a25(0x87e)] ? _0x133351[_0x2b5a25(0x81e)]() : _0x133351[_0x2b5a25(0x59d)]()); }), _0x3e912a['addEventListener']('click', () => { const _0x2846c3 = _0x2a98b7; if (_0x53f789['length'] === 0x0) return; _0x5ab40d = (_0x5ab40d + 0x1) % _0x53f789[_0x2846c3(0x84b)], _0x4d9787(_0x53f789[_0x5ab40d], _0x53f789); }), _0x57480b[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0xb48c87 = _0x2a98b7; if ('xmwIS' === _0xb48c87(0x148)) _0x2769d4[_0xb48c87(0x5f0)]('customStickers', _0x1e2ddf[_0xb48c87(0x49f)](_0x5b22dc)), _0x302cb7(_0xb48c87(0x62c)), _0xc186b3(() => _0x3f8864['reload'](), 0x5dc); else { if (_0x53f789[_0xb48c87(0x84b)] === 0x0) return; _0x5ab40d = (_0x5ab40d - 0x1 + _0x53f789[_0xb48c87(0x84b)]) % _0x53f789[_0xb48c87(0x84b)], _0x4d9787(_0x53f789[_0x5ab40d], _0x53f789); } }), _0x133351['addEventListener'](_0x2a98b7(0x81e), () => { const _0x2c3027 = _0x2a98b7; 'fMseg' === 'fMseg' ? _0x31f9bd[_0x2c3027(0xab3)] = '❚❚' : (_0x11f541[_0x2c3027(0x66c)](_0x2c3027(0x23d) + _0xad336c), _0x333f10[_0x2c3027(0x8f7)](_0x9e6fb5, { 'keyPath': 'id' })); }), _0x133351[_0x2a98b7(0x20b)]('pause', () => { const _0x4aad0e = _0x2a98b7; if (_0x4aad0e(0xa4b) === 'sUqcm') _0x31f9bd[_0x4aad0e(0xab3)] = '▶'; else for (const _0x282130 in _0x23abce) { _0x45fbfb[_0x4aad0e(0x636)][_0x282130] = _0x5799b5[_0x282130]; } }), _0x133351[_0x2a98b7(0x20b)](_0x2a98b7(0x487), () => { const _0x18ad3c = _0x2a98b7; if (_0x18ad3c(0x8ff) === _0x18ad3c(0x5d6)) { const _0x537cca = _0x5431cf[_0x18ad3c(0x4b6)](_0x18ad3c(0x496)); _0xdafbaa[_0x18ad3c(0x4b6)](_0x18ad3c(0x46a))['textContent'] = '账本', _0x5a314e['getElementById'](_0x18ad3c(0x3f3))[_0x18ad3c(0x3c8)] = ''; const _0x59eb3e = _0x23df1a[_0x18ad3c(0x8f4)](_0x1d3fe2[_0x18ad3c(0x961)])['sort']((_0x42ab48, _0x109b37) => new _0x24ae1b(_0x109b37) - new _0x33b380(_0x42ab48)); if (_0x59eb3e[_0x18ad3c(0x84b)] === 0x0) { _0x537cca[_0x18ad3c(0x3c8)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>'; return; } _0x537cca[_0x18ad3c(0x3c8)] = '', _0x59eb3e[_0x18ad3c(0x6ff)](_0x57076e => { const _0x2379d7 = _0x18ad3c, _0x5370b0 = _0x564e0a[_0x2379d7(0x597)](_0x2379d7(0x80e)); _0x5370b0[_0x2379d7(0x575)] = _0x2379d7(0x390), _0x5370b0[_0x2379d7(0x636)]['cursor'] = 'pointer'; const _0x2afe09 = _0x3a73fb[_0x2379d7(0x961)][_0x57076e], _0x469126 = _0x2afe09['categorizedExpenses'][_0x2379d7(0x3dc)]((_0x10cb15, _0x39576b) => _0x10cb15 + (_0x39576b[_0x2379d7(0x9d2)] || 0x0), 0x0); _0x5370b0['innerHTML'] = _0x2379d7(0x20e) + _0x57076e + '</span><span\x20class=\x22amount\x22>总计:\x20' + _0x469126['toFixed'](0x2) + _0x2379d7(0x20c), _0x5370b0[_0x2379d7(0x20b)]('click', () => { const _0x4bcb1e = _0x2379d7; _0x169ee1[_0x4bcb1e(0x544)][_0x4bcb1e(0x7f8)](_0x4bcb1e(0x9ad)), _0x1b8305[_0x4bcb1e(0x544)][_0x4bcb1e(0x82e)]('active'), _0x31eaab(_0x2afe09, _0x57076e); }), _0x537cca[_0x2379d7(0x329)](_0x5370b0); }); } else _0x3e912a['click'](); }), _0x133351[_0x2a98b7(0x20b)](_0x2a98b7(0x81e), () => { const _0x25792c = _0x2a98b7; if (_0x25792c(0x590) === 'HZDfT') _0x4d99b6(![]); else { const _0x3d8ed7 = document[_0x25792c(0x4b6)](_0x25792c(0x4ed)); if (_0x3d8ed7) _0x3d8ed7[_0x25792c(0xab3)] = '❚❚'; } }), _0x133351[_0x2a98b7(0x20b)](_0x2a98b7(0x59d), () => { const _0x27dc1e = _0x2a98b7; if (_0x27dc1e(0x39d) === _0x27dc1e(0x39d)) { const _0xecf46c = document[_0x27dc1e(0x4b6)](_0x27dc1e(0x4ed)); if (_0xecf46c) _0xecf46c[_0x27dc1e(0xab3)] = '▶'; } else _0x10524c[_0x27dc1e(0x293)] = _0x2f214b[_0x27dc1e(0x293)], _0x189d30[_0x27dc1e(0x4a1)] = _0x1b4ac0[_0x27dc1e(0x4a1)]; }), _0x133351[_0x2a98b7(0x20b)]('ended', () => { const _0x3a8bf0 = _0x2a98b7, _0x54d768 = document['getElementById'](_0x3a8bf0(0x857)); if (_0x54d768) { if (_0x3a8bf0(0x371) !== 'NvETA') _0x54d768[_0x3a8bf0(0xab8)](); else { const _0x4fee4b = _0x3a8bf0(0x625) + _0xc48c91; _0xed4b55(_0x4fee4b), _0x413c10(!![]); } } }); function _0x158b68(_0x48adfc) { const _0x24500a = _0x2a98b7; if (_0x24500a(0x1a1) === _0x24500a(0x1a1)) { if (!_0x48adfc || typeof _0x48adfc !== _0x24500a(0x90a)) return null; const _0x14529e = _0x48adfc[_0x24500a(0x3de)]('['), _0x5a1953 = _0x48adfc[_0x24500a(0x9c4)](']'); if (_0x14529e > -0x1 && _0x5a1953 > _0x14529e) return _0x48adfc[_0x24500a(0xa4a)](_0x14529e, _0x5a1953 + 0x1); return null; } else _0x5f2cd9 = _0x4f2f14[_0x24500a(0x5f1)], _0x3e9f82 = _0x2e4385[_0x24500a(0x12d)]; } document[_0x2a98b7(0x4b6)](_0x2a98b7(0x130))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x5dcce5 = _0x2a98b7; if ('mQIOu' !== _0x5dcce5(0xa0a)) _0xc1339c(), _0x102967(_0x5dcce5(0x9ec), _0x5dcce5(0x786)); else { _0x514fb1['innerHTML'] = _0x5dcce5(0x981); return; } }), document[_0x2a98b7(0x4b6)]('back-to-home-from-accounting')[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967(_0x2a98b7(0x786), _0x2a98b7(0x9ec))); const _0x331709 = document[_0x2a98b7(0x4b6)](_0x2a98b7(0x18d)), _0x34648a = document['getElementById']('tab-view-ledger'); _0x331709['addEventListener'](_0x2a98b7(0xab8), _0xc1339c), _0x34648a['addEventListener'](_0x2a98b7(0xab8), () => { const _0x434fa7 = _0x2a98b7; if (_0x434fa7(0x701) !== _0x434fa7(0x701)) { const _0x2ed4ef = _0xa5e24f(_0x54cc61[_0x434fa7(0x302)] || _0xb7ed96[_0x434fa7(0xa4e)]); _0x385368 = _0x2ed4ef?.[_0x434fa7(0x5f1)] || '角色', _0x18c177 = _0x434fa7(0x913); } else _0x331709['classList'][_0x434fa7(0x7f8)](_0x434fa7(0x9ad)), _0x34648a[_0x434fa7(0x544)][_0x434fa7(0x82e)](_0x434fa7(0x9ad)), _0xdf80fb(); }); function _0xc1339c() { const _0x48a0a9 = _0x2a98b7; if (_0x48a0a9(0xa0f) !== 'riWqq') { if (_0xa076de[_0x48a0a9(0x859)][_0x48a0a9(0x9f1)](_0x419747[_0x48a0a9(0x95e)])) _0x75d40['checked'] = !![]; } else _0x34648a[_0x48a0a9(0x544)][_0x48a0a9(0x7f8)](_0x48a0a9(0x9ad)), _0x331709['classList'][_0x48a0a9(0x82e)](_0x48a0a9(0x9ad)), _0x240084(); } function _0x240084() { const _0x3191db = _0x2a98b7, _0x58491b = document['getElementById']('accounting-content-area'); document[_0x3191db(0x4b6)](_0x3191db(0x46a))['textContent'] = '记一笔', document[_0x3191db(0x4b6)](_0x3191db(0x3f3))[_0x3191db(0x3c8)] = '', _0x58491b[_0x3191db(0x3c8)] = _0x3191db(0x25f), _0x385afc(), document[_0x3191db(0x4b6)]('add-expense-button')[_0x3191db(0x20b)](_0x3191db(0xab8), _0x5c2b9a), document[_0x3191db(0x4b6)](_0x3191db(0x6fd))[_0x3191db(0x20b)](_0x3191db(0xab8), _0x4afee5 => { const _0x32bafb = _0x3191db; if (_0x4afee5[_0x32bafb(0x492)][_0x32bafb(0x544)][_0x32bafb(0x61a)](_0x32bafb(0x944))) { const _0x2cf454 = _0x4afee5['target'][_0x32bafb(0x773)]['id']; _0x2f2e39(_0x32bafb(0x7dd))[_0x32bafb(0x4ea)](_0x2efaa9 => { const _0x290e9c = _0x32bafb; _0x2efaa9 && (_0x290e9c(0x868) === _0x290e9c(0x6c0) ? _0x462494['accountingLedger'] = _0x3d23bd[_0x290e9c(0x961)] : _0x3376f9(_0x2cf454)); }); } }), document['getElementById'](_0x3191db(0x897))[_0x3191db(0x63f)](); } function _0x37c9e6(_0x4ef703, _0x2306fb) { const _0x512670 = _0x2a98b7; if ('fMAMv' === _0x512670(0x224)) { const _0x2e3cee = document[_0x512670(0x4b6)]('accounting-content-area'), _0x2b8977 = document[_0x512670(0x4b6)](_0x512670(0x3f3)); document[_0x512670(0x4b6)]('accounting-title')[_0x512670(0xab3)] = _0x2306fb + _0x512670(0x73e); const _0x4263b3 = _0x4ef703[_0x512670(0x740)][_0x512670(0x3dc)]((_0x3d33f0, _0x50c3aa) => _0x3d33f0 + (_0x50c3aa[_0x512670(0x9d2)] || 0x0), 0x0); let _0x102f9b = _0x512670(0x763) + _0x4263b3[_0x512670(0x68a)](0x2) + _0x512670(0xa02); _0x2e3cee['innerHTML'] = _0x102f9b; const _0x3e6b91 = document['getElementById'](_0x512670(0x378)), _0x36307c = { '餐饮美食': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', '交通出行': _0x512670(0x2bd), '购物消费': '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '生活服务': _0x512670(0x3d8), '休闲娱乐': _0x512670(0x296), '医疗健康': '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '人情红包': _0x512670(0x9d4), '其他杂项': _0x512670(0x19c), '默认': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>' }; _0x4ef703[_0x512670(0x740)][_0x512670(0x6ff)](_0xd2af43 => { const _0xb94fe5 = _0x512670, _0x351b7e = document['createElement'](_0xb94fe5(0x80e)); _0x351b7e[_0xb94fe5(0x575)] = _0xb94fe5(0x390), _0x351b7e[_0xb94fe5(0x636)][_0xb94fe5(0x967)] = _0xb94fe5(0x776), _0x351b7e[_0xb94fe5(0x636)][_0xb94fe5(0x760)] = _0xb94fe5(0x635), _0x351b7e['style'][_0xb94fe5(0x997)] = '15px', _0x351b7e[_0xb94fe5(0x636)][_0xb94fe5(0x67b)] = '0'; const _0x5002b7 = _0x36307c[_0xd2af43[_0xb94fe5(0x35c)]] || _0x36307c['默认'], _0x263198 = _0xb94fe5(0x94d) + _0x5002b7 + '</svg>', _0x20fe18 = _0xb94fe5(0x1a4) + _0x263198 + _0xb94fe5(0xa0d) + _0xd2af43[_0xb94fe5(0x54f)] + _0xb94fe5(0x3bb) + (_0xd2af43['category'] || _0xb94fe5(0x19f)) + _0xb94fe5(0x5c3) + (_0xd2af43[_0xb94fe5(0x9d2)] || 0x0)[_0xb94fe5(0x68a)](0x2) + _0xb94fe5(0x17d); let _0x9b40dc = ''; if (_0xd2af43['review'] && _0xd2af43['review']['charId']) { if (_0xb94fe5(0x7a2) === _0xb94fe5(0x7a2)) { const _0x5e5fb4 = _0x389a36(_0xd2af43['review'][_0xb94fe5(0x8c8)]); _0x5e5fb4 && (_0xb94fe5(0x53d) === 'iBInr' ? (_0x1c0e53['isGenerating'] = ![], _0x396796(![])) : _0x9b40dc = _0xb94fe5(0x16b) + _0x5e5fb4[_0xb94fe5(0x12d)] + _0xb94fe5(0x759) + _0x5e5fb4['name'] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0xd2af43[_0xb94fe5(0x6d3)][_0xb94fe5(0xa20)] + '</div></div></div>'); } else _0x415306 = _0x41aa3e(() => { const _0x340ca0 = _0xb94fe5; if (_0x12c34c[_0x340ca0(0xaa2)] === _0x340ca0(0x866)) _0xe38e14[_0x340ca0(0x3e5)](); _0x1359ab(_0x2c5c0b); }, 0x320); } _0x351b7e[_0xb94fe5(0x3c8)] = _0x20fe18 + _0x9b40dc, _0x3e6b91[_0xb94fe5(0x329)](_0x351b7e); }), _0x2b8977[_0x512670(0x3c8)] = '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', document['getElementById'](_0x512670(0x843))[_0x512670(0x20b)](_0x512670(0xab8), async () => { const _0x21dbb4 = _0x512670; if (_0x21dbb4(0x993) === _0x21dbb4(0x993)) { const _0x24051d = await _0x2f2e39(_0x21dbb4(0x89a)); if (_0x24051d) { if (_0x21dbb4(0x705) === _0x21dbb4(0x57e)) { if (_0x497c65['length'] === 0x0) return; _0x35a8bc = (_0x27a144 - 0x1 + _0x3f1d64[_0x21dbb4(0x84b)]) % _0x1d01c9['length'], _0x430b35(_0xa71775[_0x56057f], _0x4d0935); } else { const _0x5c7dce = _0x4025fd['accountingLedger'][_0x2306fb]; _0x5c7dce && _0x5c7dce[_0x21dbb4(0xa46)] && _0x4025fd[_0x21dbb4(0x30e)]['push'](..._0x5c7dce['originalExpenses']), delete _0x4025fd[_0x21dbb4(0x961)][_0x2306fb], _0x33c083(), _0x240084(); } } } else _0x56e738['className'] = _0x21dbb4(0x6fc), _0x49d804[_0x21dbb4(0x636)][_0x21dbb4(0x28f)] = _0x21dbb4(0x83d), _0x1afa31[_0x21dbb4(0x636)]['color'] = _0x21dbb4(0x198), _0x6fd413[_0x21dbb4(0x3c8)] = _0x7298d; }); } else _0x298ea4(_0x43b8fa['id']), _0x2c3e15(_0x512670(0x17e) + _0x2e3740[_0x512670(0x5f1)] + _0x512670(0x77d)), _0x2aa2a1(![]); } function _0xdf80fb() { const _0x3d65b6 = _0x2a98b7; if (_0x3d65b6(0xaaa) !== 'vedca') _0x1b308f('字体保存失败了，哼:\x20' + _0x250ce5[_0x3d65b6(0x973)]); else { const _0xffdae2 = document[_0x3d65b6(0x4b6)](_0x3d65b6(0x496)); document[_0x3d65b6(0x4b6)]('accounting-title')[_0x3d65b6(0xab3)] = '账本', document[_0x3d65b6(0x4b6)](_0x3d65b6(0x3f3))['innerHTML'] = ''; const _0x3dbd1e = Object[_0x3d65b6(0x8f4)](_0x4025fd[_0x3d65b6(0x961)])[_0x3d65b6(0x419)]((_0xc88b5f, _0xa1a0bf) => new Date(_0xa1a0bf) - new Date(_0xc88b5f)); if (_0x3dbd1e[_0x3d65b6(0x84b)] === 0x0) { _0xffdae2[_0x3d65b6(0x3c8)] = _0x3d65b6(0x921); return; } _0xffdae2[_0x3d65b6(0x3c8)] = '', _0x3dbd1e[_0x3d65b6(0x6ff)](_0x11ee3f => { const _0x2c125d = _0x3d65b6, _0x52df0a = document[_0x2c125d(0x597)](_0x2c125d(0x80e)); _0x52df0a['className'] = _0x2c125d(0x390), _0x52df0a[_0x2c125d(0x636)][_0x2c125d(0x5df)] = _0x2c125d(0x34b); const _0x34f779 = _0x4025fd[_0x2c125d(0x961)][_0x11ee3f], _0x34f0a2 = _0x34f779['categorizedExpenses'][_0x2c125d(0x3dc)]((_0xec76fc, _0x3367a6) => _0xec76fc + (_0x3367a6[_0x2c125d(0x9d2)] || 0x0), 0x0); _0x52df0a[_0x2c125d(0x3c8)] = _0x2c125d(0x20e) + _0x11ee3f + '</span><span\x20class=\x22amount\x22>总计:\x20' + _0x34f0a2[_0x2c125d(0x68a)](0x2) + _0x2c125d(0x20c), _0x52df0a[_0x2c125d(0x20b)](_0x2c125d(0xab8), () => { const _0x287e39 = _0x2c125d; if ('EAJLZ' === 'EAJLZ') _0x331709[_0x287e39(0x544)]['remove'](_0x287e39(0x9ad)), _0x34648a[_0x287e39(0x544)][_0x287e39(0x82e)](_0x287e39(0x9ad)), _0x37c9e6(_0x34f779, _0x11ee3f); else { const _0x29d61e = _0x4d4cff[_0x287e39(0x597)]('div'); _0x29d61e[_0x287e39(0x575)] = _0x287e39(0x4e1), _0x29d61e[_0x287e39(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x254c45[_0x287e39(0x955)] + _0x287e39(0x2c1) + _0x3af64e[_0x287e39(0x5f1)] + _0x287e39(0x9d5), _0x29d61e[_0x287e39(0x20b)](_0x287e39(0xab8), () => _0x4de85a(_0x50a03d['id'], _0x204016[_0x287e39(0x5f1)])), _0x1aa69e[_0x287e39(0xa26)] === _0x287e39(0x6ab) ? _0x4a9e70[_0x287e39(0x329)](_0x29d61e) : _0x2eb088['appendChild'](_0x29d61e); } }), _0xffdae2['appendChild'](_0x52df0a); }); } } function _0x5c2b9a() { const _0x143fa5 = _0x2a98b7, _0x50386f = document['getElementById'](_0x143fa5(0x897)), _0x51cc7b = document['getElementById'](_0x143fa5(0x2c7)), _0x34b755 = _0x50386f[_0x143fa5(0x95e)][_0x143fa5(0x345)](), _0x276de9 = parseFloat(_0x51cc7b[_0x143fa5(0x95e)]); if (!_0x34b755 || isNaN(_0x276de9) || _0x276de9 <= 0x0) { _0x26f8b2(_0x143fa5(0x64f)); return; } _0x4025fd[_0x143fa5(0x30e)][_0x143fa5(0x65b)]({ 'id': _0x143fa5(0x692) + Date[_0x143fa5(0x98c)](), 'description': _0x34b755, 'amount': _0x276de9, 'timestamp': Date[_0x143fa5(0x98c)]() }), _0x33c083(), _0x385afc(), _0x50386f['value'] = '', _0x51cc7b[_0x143fa5(0x95e)] = '', _0x50386f['focus'](); } function _0x3376f9(_0x33759f) { const _0x122708 = _0x2a98b7, _0x52f842 = _0x4025fd[_0x122708(0x30e)][_0x122708(0x6e4)](_0x3c6156 => _0x3c6156['id'] === _0x33759f); _0x52f842 > -0x1 && (_0x4025fd['accountingData'][_0x122708(0x31d)](_0x52f842, 0x1), _0x33c083(), _0x385afc()); } function _0x385afc() { const _0x66ec24 = _0x2a98b7, _0x46bc52 = document[_0x66ec24(0x4b6)](_0x66ec24(0x6fd)), _0x41d7ca = document[_0x66ec24(0x4b6)](_0x66ec24(0x3d4)), _0x591030 = new Date(), _0x148e48 = _0x4025fd[_0x66ec24(0x30e)]['filter'](_0x4fd065 => new Date(_0x4fd065[_0x66ec24(0x36b)])[_0x66ec24(0xa2a)]() === _0x591030[_0x66ec24(0xa2a)]()); if (_0x148e48[_0x66ec24(0x84b)] === 0x0) { _0x46bc52[_0x66ec24(0x3c8)] = _0x66ec24(0xa16), _0x41d7ca[_0x66ec24(0x3c8)] = ''; return; } _0x46bc52[_0x66ec24(0x3c8)] = '', _0x148e48[_0x66ec24(0x419)]((_0x3216de, _0x2dc103) => _0x2dc103[_0x66ec24(0x36b)] - _0x3216de['timestamp'])['forEach'](_0x500b8c => { const _0x5889c1 = _0x66ec24, _0x4956a1 = document[_0x5889c1(0x597)]('div'); _0x4956a1[_0x5889c1(0x575)] = _0x5889c1(0x390), _0x4956a1['innerHTML'] = '<span\x20class=\x22description\x22>' + _0x500b8c['description'] + _0x5889c1(0xa28) + _0x500b8c['amount'][_0x5889c1(0x68a)](0x2) + _0x5889c1(0x6dd) + _0x500b8c['id'] + _0x5889c1(0xa17), _0x46bc52[_0x5889c1(0x329)](_0x4956a1); }), _0x41d7ca && (_0x66ec24(0x988) === _0x66ec24(0x59f) ? _0x761b3c[_0x66ec24(0x963)]('在准备动态回复时，读取图片失败:', _0x2119e6) : (_0x41d7ca[_0x66ec24(0x3c8)] = _0x66ec24(0x8e7), document[_0x66ec24(0x4b6)](_0x66ec24(0xa29))[_0x66ec24(0x20b)]('click', _0x3736ee))); } async function _0x3736ee() { const _0x4ac05b = _0x2a98b7, _0x584e16 = new Date(), _0x3f6f46 = _0x584e16[_0x4ac05b(0x554)]() + '-' + String(_0x584e16[_0x4ac05b(0x720)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x584e16[_0x4ac05b(0x1f6)]())[_0x4ac05b(0x412)](0x2, '0'); if (_0x4025fd[_0x4ac05b(0x961)][_0x3f6f46]) { _0x26f8b2(_0x4ac05b(0x886)); return; } const _0x2b970d = _0x4025fd['accountingData']['filter'](_0x12bfb8 => new Date(_0x12bfb8['timestamp'])[_0x4ac05b(0xa2a)]() === _0x584e16[_0x4ac05b(0xa2a)]()); if (_0x2b970d[_0x4ac05b(0x84b)] === 0x0) { _0x26f8b2(_0x4ac05b(0x186)); return; } _0x32d19f(!![], _0x4ac05b(0x521)); try { if (_0x4ac05b(0xa63) === 'ILGlT') { const _0x1f0662 = [_0x4ac05b(0x818), _0x4ac05b(0x4da), _0x4ac05b(0x7cd), '生活服务', '休闲娱乐', _0x4ac05b(0x79b), '人情红包', '其他杂项'], _0x1c6af6 = _0x2b970d[_0x4ac05b(0x30c)](_0x21e4c9 => '-\x20' + _0x21e4c9['description'] + ':\x20' + _0x21e4c9[_0x4ac05b(0x9d2)])[_0x4ac05b(0x602)]('\x0a'), _0x18af96 = _0x4025fd['characters']['map'](_0x47aab4 => { const _0x2908e5 = _0x4ac05b; if (_0x2908e5(0x21a) !== _0x2908e5(0x966)) { const _0x4663c4 = _0x4025fd[_0x2908e5(0x132)][_0x2908e5(0x32b)](_0x411062 => _0x411062['type'] === _0x2908e5(0x258) && _0x411062[_0x2908e5(0x2db)][_0x2908e5(0x9f1)](_0x47aab4['id'])), _0x30cea8 = _0x4025fd['userProfiles']['find'](_0x2d44c4 => _0x2d44c4['id'] === (_0x4663c4?.[_0x2908e5(0x774)] || _0x4025fd['activeUserProfileId'])) || { 'id': _0x2908e5(0x33d), 'name': '你' }; let _0x85b315 = ''; return _0x47aab4[_0x2908e5(0x859)] && _0x47aab4[_0x2908e5(0x859)][_0x2908e5(0x84b)] > 0x0 && (_0x85b315 = _0x47aab4[_0x2908e5(0x859)][_0x2908e5(0x30c)](_0x36a767 => _0x4025fd[_0x2908e5(0xa3c)][_0x2908e5(0x32b)](_0x112401 => _0x112401['id'] === _0x36a767))[_0x2908e5(0x1f9)](Boolean)[_0x2908e5(0x30c)](_0x2963d9 => '\x0a\x20\x20\x20\x20-\x20世界书[' + _0x2963d9[_0x2908e5(0x5f1)] + _0x2908e5(0xa59) + _0x2963d9[_0x2908e5(0x9c6)])[_0x2908e5(0x602)]('')), _0x2908e5(0x30d) + _0x47aab4['id'] + _0x2908e5(0x5cd) + _0x47aab4[_0x2908e5(0x5f1)] + _0x2908e5(0x1e9) + _0x47aab4[_0x2908e5(0x8ad)] + _0x2908e5(0x7da) + _0x30cea8['name'] + _0x2908e5(0x7e3) + _0x30cea8['id'] + ')\x0a' + _0x85b315; } else { const _0x5f2776 = _0x26ecfc[_0x2908e5(0x675)] === _0x2908e5(0x880) ? _0x2ecf6e['name'] : _0x4b0944(_0xa55ab1[_0x2908e5(0x675)])[_0x2908e5(0x5f1)]; return '-\x20[' + new _0x4f30f7(_0x1132fc[_0x2908e5(0x36b)])[_0x2908e5(0x213)]() + ']\x20' + _0x5f2776 + _0x2908e5(0x398) + _0x75e251[_0x2908e5(0x9c6)]; } })[_0x4ac05b(0x602)]('\x0a'), _0x17c5b1 = _0x4025fd['userProfiles'][_0x4ac05b(0x30c)](_0x4c0f12 => _0x4ac05b(0x12c) + _0x4c0f12['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x4c0f12[_0x4ac05b(0x5f1)] + '\x0a\x20\x20\x20\x20人设:\x20' + (_0x4c0f12['persona'] || '无'))['join']('\x0a'), _0x2bb757 = _0x4ac05b(0x2b8), _0x1230e4 = '#\x20固定分类列表\x0a[' + _0x1f0662[_0x4ac05b(0x602)](',\x20') + ']\x0a\x0a#\x20角色资料库\x0a' + _0x18af96 + _0x4ac05b(0x359) + _0x17c5b1 + '\x0a\x0a#\x20今日消费流水\x0a' + _0x1c6af6, _0x493917 = [{ 'role': _0x4ac05b(0x6f9), 'content': _0x2bb757 }, { 'role': _0x4ac05b(0x880), 'content': _0x1230e4 }], _0x58c9af = await _0x414037(_0x493917, { 'json': !![] }), _0xb8dfb2 = _0x158b68(_0x58c9af); if (!_0xb8dfb2) throw new Error(_0x4ac05b(0xa3b) + _0x58c9af); const _0x48d830 = JSON[_0x4ac05b(0x93f)](_0xb8dfb2); _0x4025fd[_0x4ac05b(0x961)][_0x3f6f46] = { 'categorizedExpenses': _0x48d830, 'timestamp': Date[_0x4ac05b(0x98c)](), 'originalExpenses': _0x2b970d }, _0x4025fd[_0x4ac05b(0x30e)] = _0x4025fd['accountingData'][_0x4ac05b(0x1f9)](_0x29cbf5 => new Date(_0x29cbf5[_0x4ac05b(0x36b)])[_0x4ac05b(0xa2a)]() !== _0x584e16[_0x4ac05b(0xa2a)]()), _0x33c083(), _0x37c9e6(_0x4025fd[_0x4ac05b(0x961)][_0x3f6f46], _0x3f6f46); } else _0x35ad1f(_0x4ac05b(0x511) + _0x2748d8[_0x4ac05b(0x973)]); } catch (_0x35a638) { _0x4ac05b(0x860) !== _0x4ac05b(0x860) ? _0x44d646(_0x4ac05b(0x238)) : _0x26f8b2(_0x4ac05b(0x8f6) + _0x35a638[_0x4ac05b(0x973)]); } finally { _0x32d19f(![]); } } async function _0x26f904() { const _0xfade5b = _0x2a98b7, _0x270051 = [..._0x4d1cd1]; try { if (_0xfade5b(0x24c) !== _0xfade5b(0x24c)) { _0x35e1ce = _0x3d2af3(_0x461d08); if (!_0x34b86d) throw new _0x5c8e69(_0xfade5b(0x41e)); } else { const _0x2ca192 = localStorage[_0xfade5b(0x47c)]('customStickers'); if (_0x2ca192) { const _0x41d1e4 = JSON['parse'](_0x2ca192); Array[_0xfade5b(0x5f8)](_0x41d1e4) ? _0x288407 = [..._0x270051, ..._0x41d1e4] : _0x288407 = _0x270051; } else _0x288407 = _0x270051; } } catch (_0x32770c) { console['error'](_0xfade5b(0x6b3), _0x32770c), _0x288407 = _0x270051; } if (!localStorage[_0xfade5b(0x47c)](_0xfade5b(0x991))) { _0x2f2e39(_0xfade5b(0x215))[_0xfade5b(0x4ea)](async _0x252386 => { const _0x4a0e8e = _0xfade5b; _0x252386 ? _0x4a0e8e(0x20d) !== _0x4a0e8e(0x20d) ? _0x21aa9b['accountingData']['push'](..._0x1d7f35['originalExpenses']) : (_0x32d19f(!![], _0x4a0e8e(0x529)), await _0x933c2f(), localStorage[_0x4a0e8e(0x5f0)]('noir_data_migration_v1_complete', _0x4a0e8e(0x844)), _0x32d19f(![]), _0x26f8b2(_0x4a0e8e(0x9bd)), setTimeout(() => location['reload'](), 0x5dc)) : _0x26f8b2(_0x4a0e8e(0x7ad)); }); return; } if (!localStorage[_0xfade5b(0x47c)]('noir_migration_fc_v1_complete')) { console[_0xfade5b(0x66c)](_0xfade5b(0x43d)), _0x32d19f(!![], _0xfade5b(0x9d0)); const _0x502daf = await _0x3426f8(); localStorage['setItem'](_0xfade5b(0x941), _0xfade5b(0x844)), _0x32d19f(![]); if (_0x502daf > 0x0) { _0x26f8b2(_0xfade5b(0x91e) + _0x502daf + _0xfade5b(0x60f)), setTimeout(() => location[_0xfade5b(0x1de)](), 0x5dc); return; } } if (!localStorage[_0xfade5b(0x47c)](_0xfade5b(0x941))) { } if (!localStorage['getItem'](_0xfade5b(0x7c0))) { console[_0xfade5b(0x66c)]('执行音乐封面数据净化...'), _0x32d19f(!![], _0xfade5b(0x89e)); const _0xb4feb0 = await _0x3f9737(); localStorage[_0xfade5b(0x5f0)]('noir_migration_music_v1_complete', _0xfade5b(0x844)), _0x32d19f(![]); if (_0xb4feb0 > 0x0) { if (_0xfade5b(0x641) === _0xfade5b(0x641)) { _0x26f8b2(_0xfade5b(0x667) + _0xb4feb0 + _0xfade5b(0x9c0)), setTimeout(() => location['reload'](), 0x5dc); return; } else _0x180cac['style']['display'] = 'block'; } } const _0x3cb303 = document[_0xfade5b(0x4b6)]('app-snoop'); _0x3cb303[_0xfade5b(0x20b)]('click', () => { const _0x5533c7 = _0xfade5b; _0x5533c7(0x7b0) !== 'LRmwQ' ? (_0x179e72[_0x5533c7(0x963)](_0x5533c7(0x335), _0x4a345a), _0x4aa8c7[_0x5533c7(0x95e)] = _0x5533c7(0x633) + _0x10782b[_0x5533c7(0x973)]) : (_0x261e6f(), _0x102967(_0x5533c7(0x57f), _0x5533c7(0x786))); }); const _0x59e2e9 = _0x14a334(); try { const _0x1829ba = localStorage[_0xfade5b(0x47c)](_0xfade5b(0xa8a)); if (_0x1829ba) { if ('GxanA' !== _0xfade5b(0x6ec)) { const _0x23e722 = JSON[_0xfade5b(0x93f)](_0x1829ba); _0x23e722[_0xfade5b(0x961)] && (_0x4025fd['accountingLedger'] = _0x23e722[_0xfade5b(0x961)], console['log']('Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.')); } else _0x5a6cd3 += _0xfade5b(0x89c) + _0x5ce36f[_0xfade5b(0xa05)](_0x1b4613 / 0x3c) + _0xfade5b(0x917); } } catch (_0x28f1a2) { _0xfade5b(0xa1a) === _0xfade5b(0x22f) ? (_0x34dd41['style'][_0xfade5b(0x94c)] = _0xfade5b(0x947), _0x2614b5[_0xfade5b(0x636)][_0xfade5b(0x7c6)] = '0\x202px\x208px\x20rgba(0,0,0,0.4)') : console['error'](_0xfade5b(0x623), _0x28f1a2); } _0x379704(), _0x4e3fa7(), _0x529f2f(), _0xc3cdb6(), _0x14a7a9(), _0xcf24c5(), _0x4da4d7(), _0x40794d(), _0x368473(), _0x50605b(), _0x27e361(), _0x5a9481(), _0x18ada3(), setInterval(_0x18ada3, 0x7530), _0x145ba5(), _0x56d0ee(), _0x120277(); const _0x499333 = document['getElementById']('audio-player'); document['getElementById'](_0xfade5b(0x3c6))['addEventListener'](_0xfade5b(0xab8), function (_0x359429) { const _0x4f8ef5 = _0xfade5b; if (_0x4f8ef5(0x5c0) === 'ERBfz') { if (_0x359429[_0x4f8ef5(0x492)][_0x4f8ef5(0x17f)](_0x4f8ef5(0x703))) return; const _0x1949e0 = document[_0x4f8ef5(0x4b6)](_0x4f8ef5(0x497)); _0x1949e0 && _0x1949e0[_0x4f8ef5(0xab8)](); } else { _0x2301f3(_0x4f8ef5(0x5ed)); return; } }), _0x102967(_0xfade5b(0x786), 'init'); (_0x59e2e9 || _0x4025fd['characters'][_0xfade5b(0x84b)] === 0x0) && (_0x26f8b2('欢迎！请先创建一个角色开始聊天。'), setTimeout(() => { const _0xce7f18 = _0xfade5b; _0xce7f18(0x20f) !== _0xce7f18(0x356) ? (_0x102967('chat', _0xce7f18(0x786)), setTimeout(() => _0x3c19d1(), 0x64)) : _0x22cb76[_0xce7f18(0x65b)]({ 'time': _0x3e63fb, 'text': _0x3f03b3 }); }, 0x6a4)); const _0x1a3557 = document[_0xfade5b(0x4b6)](_0xfade5b(0x49b)); document['getElementById'](_0xfade5b(0x4c1))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => _0x1a3557[_0xfade5b(0xab8)]()), document[_0xfade5b(0x4b6)](_0xfade5b(0x29d))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x169daf = _0xfade5b; _0x4025fd[_0x169daf(0x271)]['widgetBgImage'] = null, _0x33c083(), _0x145ba5(), _0x26f8b2(_0x169daf(0x5db)); }), _0x1a3557[_0xfade5b(0x20b)](_0xfade5b(0x6a4), async _0x4b2896 => { const _0x7cd262 = _0xfade5b, _0x5b27f2 = _0x4b2896['target']['files'][0x0]; if (!_0x5b27f2) return; try { const _0x4db776 = await _0x54e8ab(_0x5b27f2); _0x4025fd[_0x7cd262(0x271)][_0x7cd262(0x11c)] = _0x4db776, _0x33c083(), _0x145ba5(), _0x26f8b2('小组件背景已更换！'); } catch (_0x1f6af4) { _0x7cd262(0x81d) !== _0x7cd262(0x475) ? _0x26f8b2(_0x7cd262(0x72c) + _0x1f6af4[_0x7cd262(0x973)]) : (_0xe6df0a[_0x7cd262(0x2fd)] = _0x1efe16['createObjectURL'](_0x3c6473), _0x2fb430[_0x7cd262(0x636)]['opacity'] = 0x1); } }), _0x5bde09(), document[_0xfade5b(0x4b6)](_0xfade5b(0x2c0))['addEventListener']('click', () => document[_0xfade5b(0x4b6)](_0xfade5b(0x8e1))[_0xfade5b(0xab8)]()), document['getElementById'](_0xfade5b(0x7dc))[_0xfade5b(0x20b)](_0xfade5b(0xab8), async () => { const _0x1fcd73 = _0xfade5b; if (_0x1fcd73(0x615) !== _0x1fcd73(0x615)) { const _0x51f52b = _0x4f37f0['getElementById'](_0x1fcd73(0x49a)); _0x51f52b[_0x1fcd73(0x3c8)] = ''; const _0x101d1c = _0x5cffef[_0x1fcd73(0x61c)]['filter'](_0x20c76f => _0x234990['chats']['some'](_0x13bdd8 => _0x13bdd8[_0x1fcd73(0xaa2)] === 'private' && _0x13bdd8['participantIds']['includes'](_0x20c76f['id']))); if (_0x101d1c['length'] === 0x0) { _0x51f52b['innerHTML'] = _0x1fcd73(0x68d); return; } _0x101d1c['forEach'](_0x1df64e => { const _0x317631 = _0x1fcd73, _0x4ae191 = _0x5b17a3[_0x317631(0x597)]('li'); _0x4ae191[_0x317631(0x575)] = 'character-item', _0x4ae191[_0x317631(0x773)][_0x317631(0x8c8)] = _0x1df64e['id'], _0x4ae191[_0x317631(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x1df64e[_0x317631(0x12d)] || _0x4494ba) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x1df64e[_0x317631(0x5f1)] + _0x317631(0x95d) + (_0x1df64e['remark'] || '私聊') + _0x317631(0x121), _0x4ae191['addEventListener'](_0x317631(0xab8), () => { _0x185b12(_0x1df64e['id']); }), _0x51f52b[_0x317631(0x329)](_0x4ae191); }); } else await _0x1d61a7(_0x1fcd73(0x3bc)), localStorage[_0x1fcd73(0x6f1)](_0x1fcd73(0x5f5)), _0x5bde09(), _0x26f8b2(_0x1fcd73(0x76a)); }), document[_0xfade5b(0x4b6)]('badge-input')[_0xfade5b(0x20b)](_0xfade5b(0x6a4), async _0x33d6ea => { const _0x5e0702 = _0xfade5b; if (_0x5e0702(0x268) !== 'VnRjZ') _0x4d987e(_0x46530e['id']); else { const _0x3d2bf8 = _0x33d6ea[_0x5e0702(0x492)][_0x5e0702(0x1f1)][0x0]; if (!_0x3d2bf8) return; try { await _0x5a7151(_0x5e0702(0x3bc), _0x3d2bf8), await _0x5bde09(), _0x26f8b2(_0x5e0702(0x7cf)); } catch (_0x6e0872) { if (_0x5e0702(0x9e4) === _0x5e0702(0x185)) { const _0x5c5430 = _0x269e43[_0x5e0702(0x132)][_0x5e0702(0x32b)](_0x40e761 => _0x40e761[_0x5e0702(0x4dc)] && _0x40e761[_0x5e0702(0x4dc)][_0x5e0702(0x387)]); _0x5c5430 && (_0x5c5430[_0x5e0702(0x4dc)] = null, _0x298607(), _0x238933(_0x5e0702(0x9e9)), _0x59358f(), _0x161273[_0x5e0702(0x544)][_0x5e0702(0x7f8)](_0x5e0702(0x187)), _0x383f04(() => _0x2b37b1['style'][_0x5e0702(0x6c5)] = _0x5e0702(0x55f), 0x12c)); } else _0x26f8b2(_0x5e0702(0x72c) + _0x6e0872[_0x5e0702(0x973)]); } } }), _0x1efd99(), document[_0xfade5b(0x4b6)](_0xfade5b(0x2bb))['addEventListener'](_0xfade5b(0x2ce), _0x586d88), document['getElementById']('diary-entries-container')['addEventListener']('touchstart', _0x586d88, { 'passive': ![] }), document[_0xfade5b(0x4b6)](_0xfade5b(0x37b))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => document['getElementById'](_0xfade5b(0x934))['click']()), document['getElementById'](_0xfade5b(0x733))['addEventListener'](_0xfade5b(0xab8), async () => { const _0x4e203f = _0xfade5b; await _0x1d61a7(_0x4e203f(0x9d6)), localStorage[_0x4e203f(0x6f1)](_0x4e203f(0x21f)), _0x1efd99(), _0x26f8b2(_0x4e203f(0x32f)); }), document[_0xfade5b(0x4b6)](_0xfade5b(0x934))[_0xfade5b(0x20b)](_0xfade5b(0x6a4), async _0x3d400b => { const _0x41919e = _0xfade5b, _0x2c0005 = _0x3d400b[_0x41919e(0x492)][_0x41919e(0x1f1)][0x0]; if (!_0x2c0005) return; try { await _0x5a7151('widget_card', _0x2c0005), await _0x1efd99(), _0x26f8b2(_0x41919e(0x19a)); } catch (_0x224b1e) { _0x26f8b2('错误:\x20' + _0x224b1e['message']); } }), document[_0xfade5b(0x4b6)]('reset-widgets-position-button')[_0xfade5b(0x20b)](_0xfade5b(0xab8), async () => { const _0x5dc076 = _0xfade5b, _0x42fc5b = await _0x2f2e39(_0x5dc076(0x5b8)); _0x42fc5b && (_0x5dc076(0x88c) !== _0x5dc076(0x881) ? (localStorage[_0x5dc076(0x6f1)](_0x5dc076(0x5f5)), localStorage[_0x5dc076(0x6f1)](_0x5dc076(0x1b3)), _0x26f8b2(_0x5dc076(0x900)), setTimeout(() => location[_0x5dc076(0x1de)](), 0x3e8)) : (_0x3190c3[_0x5dc076(0x4a1)] = _0x48df6e, _0x3b3401(), _0x377899(_0x5dc076(0x38e)), _0x2d5298(), _0x5b8a46[_0x5dc076(0x4b6)]('set-active-user-button')[_0x5dc076(0x636)][_0x5dc076(0x6c5)] = 'none')); }); const _0x2c5c9e = document['getElementById'](_0xfade5b(0x49e)); _0x2c5c9e[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x1c5c31 = _0xfade5b; 'TKrqz' === _0x1c5c31(0xa19) ? (_0x494a3e(), _0x102967(_0x1c5c31(0x847), _0x1c5c31(0x786))) : _0x3847c1 = _0x313509[_0x1c5c31(0x1f9)](_0x8acc4d => _0x8acc4d && typeof _0x8acc4d === _0x1c5c31(0x545) && typeof _0x8acc4d[_0x1c5c31(0x1ce)] === _0x1c5c31(0x90a) && typeof _0x8acc4d[_0x1c5c31(0x9c6)] !== _0x1c5c31(0x816)); }); const _0x4159ff = document[_0xfade5b(0x4b6)](_0xfade5b(0x7ce)); _0x4159ff[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x18c84f = _0xfade5b; 'yGNUU' === _0x18c84f(0x465) ? (_0x169cc0(), _0x102967(_0x18c84f(0x9d1), _0x18c84f(0x786))) : _0x1d31ec['worldBooks'] = _0x2a610b[_0x18c84f(0x859)][_0x18c84f(0x30c)](_0x162c72 => _0x50e932[_0x18c84f(0xa3c)][_0x18c84f(0x32b)](_0xd9064d => _0xd9064d['id'] === _0x162c72))[_0x18c84f(0x1f9)](_0x3fa449)[_0x18c84f(0x30c)](_0x2f46a1 => ({ 'name': _0x2f46a1[_0x18c84f(0x5f1)], 'content': _0x2f46a1[_0x18c84f(0x9c6)] })); }), document['getElementById']('back-to-home-from-music-library')[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => _0x102967('home', _0xfade5b(0x9d1))), document['getElementById'](_0xfade5b(0x4be))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => _0x102967(_0xfade5b(0x786), 'diaryList')), document[_0xfade5b(0x4b6)](_0xfade5b(0xa53))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x9010fe = _0xfade5b; _0x9010fe(0x252) === _0x9010fe(0x442) ? _0x4241e8 = '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22' + _0x23dc58['id'] + _0x9010fe(0x60b) + (_0x2f7997['coverUrl'] || _0x1042ca) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>' + _0x129e22['songName'] + _0x9010fe(0x65f) + _0x12d7ba[_0x9010fe(0x278)] + _0x9010fe(0x51c) + (_0x590111[_0x9010fe(0x22c)] ? '▶' : '⚠') + _0x9010fe(0xaac) : (_0x4025fd[_0x9010fe(0x7a3)] = null, _0x102967(_0x9010fe(0x847), _0x9010fe(0x686))); }), document['getElementById'](_0xfade5b(0x155))[_0xfade5b(0x20b)](_0xfade5b(0xab8), _0x39c34a), document[_0xfade5b(0x4b6)](_0xfade5b(0x5b3))[_0xfade5b(0x20b)](_0xfade5b(0xab8), _0x13cde4), document[_0xfade5b(0x4b6)](_0xfade5b(0x3f7))[_0xfade5b(0x20b)](_0xfade5b(0x7d9), _0x277923 => { const _0x386dac = _0xfade5b; if (_0x386dac(0x84e) !== _0x386dac(0x9b8)) _0x277923[_0x386dac(0xa7f)] === 'Enter' && !_0x277923[_0x386dac(0x8c9)] && (_0x386dac(0x649) !== _0x386dac(0x649) ? _0x401469[_0x386dac(0x24a)][_0x386dac(0x6ff)]((_0x1a0d17, _0x426049) => _0xe495a0(_0x1a0d17, _0x426049)) : (_0x277923[_0x386dac(0x3e5)](), _0x39c34a())); else { if (!_0x4c3ed6) return []; const _0x41d45f = _0x5b7dac['split']('\x0a'), _0x417ada = [], _0x5d0c2f = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x485f71 of _0x41d45f) { const _0x475535 = _0x485f71['match'](_0x5d0c2f); if (_0x475535) { const _0xc6705c = _0x1b50f6(_0x475535[0x1], 0xa), _0x2bea77 = _0x4dd0e9(_0x475535[0x2], 0xa), _0x3c9be5 = _0xd98d59(_0x475535[0x3], 0xa) * (_0x475535[0x3]['length'] === 0x2 ? 0xa : 0x1), _0x5de257 = _0xc6705c * 0x3c + _0x2bea77 + _0x3c9be5 / 0x3e8, _0x3b719f = _0x485f71['replace'](_0x5d0c2f, '')[_0x386dac(0x345)](); _0x3b719f && _0x417ada['push']({ 'time': _0x5de257, 'text': _0x3b719f }); } } return _0x417ada; } }); const _0x25dfaa = ['normal', _0xfade5b(0x901), _0xfade5b(0x98f), 'sad', _0xfade5b(0x374)]; _0x25dfaa[_0xfade5b(0x6ff)](_0x528969 => { const _0x2c0284 = _0xfade5b, _0x506c88 = document[_0x2c0284(0x4b6)](_0x2c0284(0x458) + _0x528969 + _0x2c0284(0x79a)), _0x375648 = document[_0x2c0284(0x4b6)]('char-edit-sprite-' + _0x528969 + _0x2c0284(0x46c)); _0x506c88 && _0x375648 && ('ixfjS' === _0x2c0284(0x540) ? (_0x506c88[_0x2c0284(0x20b)](_0x2c0284(0xab8), () => _0x375648['click']()), _0x375648[_0x2c0284(0x20b)]('change', async _0x3245dc => { const _0x1d4aae = _0x2c0284, _0x3d9fa0 = _0x3245dc[_0x1d4aae(0x492)][_0x1d4aae(0x1f1)][0x0]; if (!_0x3d9fa0) return; try { _0x506c88[_0x1d4aae(0x2fd)] = URL['createObjectURL'](_0x3d9fa0); } catch (_0x55b196) { _0x26f8b2(_0x1d4aae(0x27c) + _0x55b196['message']); } })) : _0x535366(_0x35f759['participantIds'][0x0])); }), document[_0xfade5b(0x4b6)](_0xfade5b(0x99e))['addEventListener']('click', _0x3681e3), document[_0xfade5b(0x4b6)](_0xfade5b(0x607))['addEventListener']('click', () => { const _0x158630 = _0xfade5b; _0x4025fd['meetingViewMode'] = _0x4025fd[_0x158630(0x815)] === _0x158630(0x6b4) ? _0x158630(0x2a2) : _0x158630(0x6b4), _0x3f2313(); }), document[_0xfade5b(0x4b6)](_0xfade5b(0x6c9))[_0xfade5b(0x20b)](_0xfade5b(0x2ce), _0x897773), document[_0xfade5b(0x4b6)](_0xfade5b(0x6c9))[_0xfade5b(0x20b)](_0xfade5b(0x866), _0x897773, { 'passive': ![] }); let _0xb01105 = null; function _0x897773(_0x2abfb7) { const _0x378d7e = _0xfade5b; if (_0xb01105) clearTimeout(_0xb01105); const _0x415378 = _0x2abfb7[_0x378d7e(0x492)][_0x378d7e(0x17f)]('p[data-history-index]'); if (!_0x415378) return; const _0x1ac0da = parseInt(_0x415378['dataset'][_0x378d7e(0x173)], 0xa); if (isNaN(_0x1ac0da)) return; const _0x49b5c6 = () => { _0xb01105 = setTimeout(() => { const _0x304337 = _0x2f04; if ('PcjMe' === _0x304337(0x417)) _0x208259 += _0x304337(0x836); else { if (_0x2abfb7[_0x304337(0xaa2)] === _0x304337(0x866)) _0x2abfb7[_0x304337(0x3e5)](); _0x28a1c0(_0x1ac0da); } }, 0x320); }, _0x27c4f3 = () => { if (_0xb01105) clearTimeout(_0xb01105); }; document['addEventListener'](_0x378d7e(0x5a7), _0x27c4f3, { 'once': !![] }), document[_0x378d7e(0x20b)]('mouseleave', _0x27c4f3, { 'once': !![] }), document['addEventListener'](_0x378d7e(0x13d), _0x27c4f3, { 'once': !![] }), document[_0x378d7e(0x20b)]('touchcancel', _0x27c4f3, { 'once': !![] }), _0x49b5c6(); } document[_0xfade5b(0x9c2)]['addEventListener'](_0xfade5b(0xab8), _0x192704 => { const _0x42e159 = _0xfade5b; if (_0x42e159(0x462) === 'kSQSW') _0x530c54[_0x42e159(0x2fd)] = _0x5a99d7 ? _0x38f4a['createObjectURL'](_0x1fb1f7) : _0x5db946; else { const _0x3d6b05 = _0x192704[_0x42e159(0x492)][_0x42e159(0x17f)](_0x42e159(0x995)); if (_0x3d6b05) { if ('KHfRs' === _0x42e159(0x18a)) { const _0x52a5a8 = _0x192704[_0x42e159(0x492)]['closest']('.lt-end-session-btn'), _0x19e686 = _0x192704[_0x42e159(0x492)][_0x42e159(0x17f)](_0x42e159(0x322)); if (_0x52a5a8) _0x2e91a0(); else { if (_0x19e686) { if ('eidwi' !== _0x42e159(0x7c8)) { const _0x3d0050 = _0x19e686[_0x42e159(0x17f)](_0x42e159(0x840)), _0x324ad2 = _0x19e686[_0x42e159(0x773)]['songId'], _0x390727 = parseInt(_0x3d0050['dataset'][_0x42e159(0x173)], 0xa); _0x434afc(_0x324ad2, _0x390727, _0x3d6b05); } else { _0x186075['error'](_0x42e159(0x4f0) + _0x448261[_0x42e159(0x5f1)] + _0x42e159(0x834)); return; } } else { if (_0x42e159(0x59b) === 'AUMte') _0x6107ff(), _0x2c6903(![]), _0xf6f213['isGenerating'] = ![]; else { const _0x29a0e3 = _0xba11a1(); _0x29a0e3 && _0x29a0e3['activeListenSession'] && _0x29a0e3['activeListenSession'][_0x42e159(0x387)] && (_0x42e159(0x808) !== _0x42e159(0x35e) ? (_0x4fb44a['style'][_0x42e159(0x6c5)] = _0x42e159(0x835), setTimeout(() => _0x4fb44a['classList'][_0x42e159(0x82e)](_0x42e159(0x187)), 0xa)) : (_0x3432ab[_0x42e159(0x636)][_0x42e159(0x4bb)] = _0x42e159(0x3d7), _0x4c35b6[_0x42e159(0x636)][_0x42e159(0xab7)] = '34%', _0x127867[_0x42e159(0x636)][_0x42e159(0x5bb)] = _0x42e159(0xa5c), _0x4ffb7c[_0x42e159(0x636)][_0x42e159(0x65c)] = _0x42e159(0x596), _0x2707e7[_0x42e159(0x636)][_0x42e159(0x6c5)] = 'block')); } } } return; } else _0x35f84a(), _0x42755e(![]); } if (window['getSelection']()[_0x42e159(0x2d4)]()) return; const _0x354d52 = _0x192704[_0x42e159(0x492)][_0x42e159(0x17f)](_0x42e159(0x840)); if (_0x354d52 && !_0x192704['target']['closest']('.no-action-modal')) { const _0x28d860 = parseInt(_0x354d52['dataset'][_0x42e159(0x173)], 0xa); !isNaN(_0x28d860) && _0x28a1c0(_0x28d860); } } }); const _0x4d5a91 = document[_0xfade5b(0x4b6)]('noir-author-mark'); _0x4d5a91 && (_0xfade5b(0x642) !== _0xfade5b(0x642) ? _0x412179[_0xfade5b(0x65b)](_0xdd4c0) : _0x4d5a91[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x22f893 = _0xfade5b; _0x26f8b2(_0x22f893(0x2ea)); })); const _0xbc27ea = document[_0xfade5b(0x4b6)](_0xfade5b(0x660)), _0xf594f7 = localStorage[_0xfade5b(0x47c)]('customStickers'); if (_0xf594f7) try { if ('bMuTZ' === _0xfade5b(0x131)) _0x3fb873 *= _0x52998e / _0x5ee1ca, _0x17132f = _0x4f2223; else { const _0x549b17 = JSON[_0xfade5b(0x93f)](_0xf594f7); Array['isArray'](_0x549b17) && (_0xbc27ea['value'] = _0x549b17[_0xfade5b(0x30c)](_0x25742d => _0x25742d[_0xfade5b(0x5f1)] + '--' + _0x25742d[_0xfade5b(0x13f)])['join']('\x0a')); } } catch (_0x36a336) { } document[_0xfade5b(0x4b6)](_0xfade5b(0x95b))[_0xfade5b(0x20b)](_0xfade5b(0xab8), () => { const _0x183cfe = _0xfade5b, _0xa97d34 = _0xbc27ea['value'], _0x13353a = _0xa97d34[_0x183cfe(0x80a)]('\x0a')[_0x183cfe(0x1f9)](_0x187ce0 => _0x187ce0[_0x183cfe(0x345)]() !== ''), _0x2f70ae = []; let _0x5c3b12 = 0x0; for (const _0x5583a3 of _0x13353a) { const _0x188149 = _0x5583a3[_0x183cfe(0x80a)]('--'); _0x188149[_0x183cfe(0x84b)] === 0x2 && _0x188149[0x0][_0x183cfe(0x345)]() && _0x188149[0x1][_0x183cfe(0x345)]()[_0x183cfe(0x914)](_0x183cfe(0x9e1)) ? 'XdgBm' === 'XdgBm' ? _0x2f70ae[_0x183cfe(0x65b)]({ 'name': _0x188149[0x0][_0x183cfe(0x345)](), 'url': _0x188149[0x1][_0x183cfe(0x345)]() }) : _0xe792 = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>' : _0x183cfe(0x31b) !== _0x183cfe(0x31b) ? _0x17910e(_0x50c7eb, _0x495751[_0x183cfe(0x492)]['files'][0x0]) : _0x5c3b12++; } _0x5c3b12 > 0x0 && _0x26f8b2('有\x20' + _0x5c3b12 + _0x183cfe(0x99c)); try { localStorage[_0x183cfe(0x5f0)](_0x183cfe(0x6aa), JSON[_0x183cfe(0x49f)](_0x2f70ae)), _0x26f8b2(_0x183cfe(0x62c)), setTimeout(() => location['reload'](), 0x5dc); } catch (_0x2b3f8e) { _0x26f8b2('保存失败，你的表情包是不是太多了？'); } }), _0x24fa5c(), document[_0xfade5b(0x4b6)](_0xfade5b(0x826))['addEventListener'](_0xfade5b(0xab8), () => { const _0x2a3142 = _0xfade5b; _0x2a3142(0x690) === _0x2a3142(0x690) ? document[_0x2a3142(0x4b6)](_0x2a3142(0x1df))['click']() : (_0x4df1a7(_0x123f23['id']), _0x1cdf33(!![])); }), document[_0xfade5b(0x4b6)](_0xfade5b(0x558))['addEventListener'](_0xfade5b(0xab8), async () => { const _0x1c1e6f = _0xfade5b; await _0x1d61a7('widget_card_2'), localStorage[_0x1c1e6f(0x6f1)](_0x1c1e6f(0x7d3)), _0x1efd99(), _0x26f8b2('卡片\x202\x20已移除。'); }), document[_0xfade5b(0x4b6)]('card-input-2')['addEventListener'](_0xfade5b(0x6a4), async _0x325e6f => { const _0x55de69 = _0xfade5b; if (_0x55de69(0x6d4) !== _0x55de69(0x9bf)) { const _0x561c8d = _0x325e6f[_0x55de69(0x492)][_0x55de69(0x1f1)][0x0]; if (!_0x561c8d) return; try { await _0x5a7151(_0x55de69(0x367), _0x561c8d), await _0x1efd99(), _0x26f8b2(_0x55de69(0x80c)); } catch (_0x1cc29c) { _0x26f8b2(_0x55de69(0x72c) + _0x1cc29c[_0x55de69(0x973)]); } } else _0x5e8b22 = _0x36a0ff[_0x55de69(0x93f)](_0x5bf2b4); }); } const _0x3dc1ba = _0x2a98b7(0x94b); async function _0x246760(_0x285662) { const _0x28fffa = _0x2a98b7; if (_0x28fffa(0x1a6) !== _0x28fffa(0x680)) { const _0x25b379 = await musicDbPromise; return new Promise((_0x253e4f, _0x56f0e9) => { const _0x2a18fb = _0x28fffa; if ('FMAKh' !== _0x2a18fb(0x924)) { const _0x554f97 = _0x25b379[_0x2a18fb(0x287)](_0x3dc1ba, _0x2a18fb(0x812)), _0x140665 = _0x554f97[_0x2a18fb(0x301)](_0x3dc1ba), _0x49144c = _0x140665['get'](_0x285662); _0x49144c[_0x2a18fb(0x62f)] = () => _0x253e4f(_0x49144c[_0x2a18fb(0x8e8)]), _0x49144c[_0x2a18fb(0x8ec)] = () => _0x56f0e9(_0x49144c[_0x2a18fb(0x963)]); } else _0xa47ae8[_0x2a18fb(0x636)][_0x2a18fb(0x4b7)] = '', _0x86f5be[_0x2a18fb(0x636)]['color'] = '', _0x16a97e['querySelectorAll'](_0x2a18fb(0x2f6))[_0x2a18fb(0x6ff)](_0x5df9d0 => { const _0x50c5a0 = _0x2a18fb; _0x5df9d0[_0x50c5a0(0x636)]['textShadow'] = ''; }); }); } else _0x1b5c89(_0x28fffa(0x220)); } async function _0x4d713d() { const _0x5c58c4 = _0x2a98b7; if (_0x5c58c4(0x158) !== 'Tpqkm') { const _0x1ad0ca = await musicDbPromise; return new Promise((_0x59b24f, _0x44a771) => { const _0x206c84 = _0x5c58c4; if (_0x206c84(0x6c7) === 'bGJkR') { const _0x22739d = _0x45c1b4(_0x56dbeb); if (!_0x22739d) return; _0x3577fe['activeDiaryCharacterId'] = _0x1da4e7; const _0x4da116 = _0x1e048f[_0x206c84(0xab2)][_0x206c84(0x32b)](_0x42600c => _0x42600c[_0x206c84(0x3c0)] === _0x563483), _0x3d5ba6 = _0x4da116 ? _0x4da116['entries'][_0x206c84(0x84b)] : 0x0, _0x4f619b = 0x2; _0x10c6e6[_0x206c84(0x44c)] = _0x4ddc4d['max'](0x0, _0x5865a3[_0x206c84(0x245)](_0x3d5ba6 / _0x4f619b) - 0x1), _0x526e47['getElementById'](_0x206c84(0x128))[_0x206c84(0xab3)] = _0x22739d[_0x206c84(0x5f1)] + '的日记本', _0x36294a(), _0x29ac76(_0x206c84(0x686), 'diaryList'); } else { const _0xcd025d = _0x1ad0ca[_0x206c84(0x287)](_0x3dc1ba, _0x206c84(0x812)), _0x26d2df = _0xcd025d[_0x206c84(0x301)](_0x3dc1ba), _0x4a4bff = _0x26d2df[_0x206c84(0x8d1)](); _0x4a4bff[_0x206c84(0x62f)] = () => _0x59b24f(_0x4a4bff['result']), _0x4a4bff[_0x206c84(0x8ec)] = () => _0x44a771(_0x4a4bff[_0x206c84(0x963)]); } }); } else _0x29f027[_0x5c58c4(0x883)](_0x3cf113); } async function _0x1c1587(_0x1c6b67) { const _0x540987 = await musicDbPromise; return new Promise((_0x3d422d, _0x1fc1be) => { const _0xd28d23 = _0x2f04; if (_0xd28d23(0x6bb) === _0xd28d23(0xa8f)) { const _0x324e17 = _0x48be6b[_0xd28d23(0x132)]['find'](_0x104d43 => _0x104d43[_0xd28d23(0xaa2)] === _0xd28d23(0x258) && _0x104d43[_0xd28d23(0x2db)][_0xd28d23(0x9f1)](_0x35040e['id'])), _0x269b68 = _0x477110[_0xd28d23(0x293)][_0xd28d23(0x32b)](_0x28f40b => _0x28f40b['id'] === (_0x324e17?.['boundUserProfileId'] || _0x4a5403[_0xd28d23(0x4a1)])) || { 'id': _0xd28d23(0x33d), 'name': '你' }; let _0x380902 = ''; return _0x1744bd[_0xd28d23(0x859)] && _0x175729[_0xd28d23(0x859)][_0xd28d23(0x84b)] > 0x0 && (_0x380902 = _0x54bfa0[_0xd28d23(0x859)]['map'](_0x4e0899 => _0x28e118[_0xd28d23(0xa3c)][_0xd28d23(0x32b)](_0xc78c5e => _0xc78c5e['id'] === _0x4e0899))[_0xd28d23(0x1f9)](_0x5d7b75)[_0xd28d23(0x30c)](_0x276173 => _0xd28d23(0x1c2) + _0x276173[_0xd28d23(0x5f1)] + ']:\x20' + _0x276173[_0xd28d23(0x9c6)])[_0xd28d23(0x602)]('')), '\x20\x20-\x20角色ID:\x20' + _0x5ae02e['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x312791[_0xd28d23(0x5f1)] + _0xd28d23(0x1e9) + _0x21b089[_0xd28d23(0x8ad)] + _0xd28d23(0x7da) + _0x269b68[_0xd28d23(0x5f1)] + _0xd28d23(0x7e3) + _0x269b68['id'] + ')\x0a' + _0x380902; } else { const _0x34668c = _0x540987[_0xd28d23(0x287)](_0x3dc1ba, _0xd28d23(0x431)), _0x3577fd = _0x34668c[_0xd28d23(0x301)](_0x3dc1ba), _0xb4f247 = _0x3577fd['put'](_0x1c6b67); _0xb4f247['onsuccess'] = () => _0x3d422d(_0xb4f247[_0xd28d23(0x8e8)]), _0xb4f247[_0xd28d23(0x8ec)] = () => _0x1fc1be(_0xb4f247[_0xd28d23(0x963)]); } }); } async function _0x553813(_0x3f697) { const _0x288d04 = await musicDbPromise; return new Promise((_0x2ba4e9, _0x24ac50) => { const _0x2813cc = _0x2f04, _0x23ff66 = _0x288d04[_0x2813cc(0x287)](_0x3dc1ba, 'readwrite'), _0x3bf957 = _0x23ff66[_0x2813cc(0x301)](_0x3dc1ba), _0x2ed4f4 = _0x3bf957[_0x2813cc(0x1e3)](_0x3f697); _0x2ed4f4[_0x2813cc(0x62f)] = () => _0x2ba4e9(), _0x2ed4f4[_0x2813cc(0x8ec)] = () => _0x24ac50(_0x2ed4f4[_0x2813cc(0x963)]); }); } let _0x46e7b6 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0xd52d70 = { 'audio': document[_0x2a98b7(0x4b6)]('altar-slot-audio'), 'cover': document['getElementById'](_0x2a98b7(0xa9e)), 'info': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x90e)), 'lyrics': document[_0x2a98b7(0x4b6)]('altar-slot-lyrics') }, _0x1a556b = { 'audio': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x418)), 'cover': document[_0x2a98b7(0x4b6)]('cover-file-input'), 'info': document[_0x2a98b7(0x4b6)](_0x2a98b7(0xa7b)), 'lyrics': document[_0x2a98b7(0x4b6)](_0x2a98b7(0x75b)) }; for (const _0xa72da3 in _0xd52d70) { _0xd52d70[_0xa72da3][_0x2a98b7(0x20b)]('click', () => _0x1a556b[_0xa72da3][_0x2a98b7(0xab8)]()), _0x1a556b[_0xa72da3]['addEventListener'](_0x2a98b7(0x6a4), _0x338a26 => { _0x30bf34(_0xa72da3, _0x338a26['target']['files'][0x0]); }); } function _0x30bf34(_0x2bad1c, _0x2ab077) { const _0x31ea00 = _0x2a98b7; if (!_0x2ab077) return; _0x46e7b6[_0x2bad1c] = _0x2ab077, _0xd52d70[_0x2bad1c][_0x31ea00(0x6f8)]('.slot-filename')['textContent'] = _0x2ab077[_0x31ea00(0x5f1)], _0xd52d70[_0x2bad1c][_0x31ea00(0x544)][_0x31ea00(0x82e)](_0x31ea00(0x69b)), _0x1596ee(); } function _0x1596ee() { const _0x451802 = _0x2a98b7, _0x1e606a = document[_0x451802(0x4b6)](_0x451802(0x14d)); if (_0x46e7b6[_0x451802(0x91b)] && _0x46e7b6[_0x451802(0x915)]) _0x451802(0xab1) === 'qWpLa' ? _0x1e606a[_0x451802(0xa7e)] = ![] : _0x57bbf6 > _0x809e8 && (_0x531d2a *= _0x562b85 / _0x43060a, _0x763ade = _0x1bb36b); else { if (_0x451802(0x452) === 'nvicW') { if (!_0x57b160['activeDiaryCharacterId']) return _0x253f49[_0x451802(0x293)]['find'](_0x34c5cb => _0x34c5cb['id'] === _0x7aec67['activeUserProfileId']) || _0x146084[_0x451802(0x293)][0x0]; const _0x1d9a6e = _0x4cac7f[_0x451802(0x132)]['find'](_0x284ee3 => _0x284ee3['type'] === _0x451802(0x258) && _0x284ee3[_0x451802(0x2db)][_0x451802(0x9f1)](_0x5452a6[_0x451802(0x7a3)])), _0x164e84 = _0x1d9a6e?.[_0x451802(0x774)] || _0x1f7b76[_0x451802(0x4a1)]; return _0x2a3f2a[_0x451802(0x293)]['find'](_0x577dc4 => _0x577dc4['id'] === _0x164e84) || _0x43f1ed[_0x451802(0x293)][0x0]; } else _0x1e606a[_0x451802(0xa7e)] = !![]; } } function _0x2e55c9() { const _0x19f044 = _0x2a98b7; _0x46e7b6 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x3904ed in _0xd52d70) { if (_0x19f044(0x380) !== 'ERCMn') _0xd52d70[_0x3904ed][_0x19f044(0x544)]['remove'](_0x19f044(0x69b)), _0x1a556b[_0x3904ed]['value'] = ''; else { if (_0x2524ac) { const _0x12fdc9 = _0x16100c['createObjectURL'](_0x6dfa9a); _0x5a9afe[_0x19f044(0x2fd)] = _0x12fdc9, _0x5c0027[_0x19f044(0x422)] = () => _0x381c69[_0x19f044(0x883)](_0x12fdc9); } } } _0xd52d70[_0x19f044(0x91b)][_0x19f044(0x6f8)]('.slot-filename')['textContent'] = '点击选择\x20.mp3\x20或\x20.flac', _0xd52d70[_0x19f044(0x549)][_0x19f044(0x6f8)](_0x19f044(0x1b2))[_0x19f044(0xab3)] = _0x19f044(0x73b), _0xd52d70[_0x19f044(0x915)][_0x19f044(0x6f8)]('.slot-filename')[_0x19f044(0xab3)] = _0x19f044(0xa58), _0xd52d70[_0x19f044(0x682)]['querySelector'](_0x19f044(0x1b2))[_0x19f044(0xab3)] = _0x19f044(0x856), _0x1596ee(); } document[_0x2a98b7(0x4b6)](_0x2a98b7(0x14d))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), async () => { const _0x15af74 = _0x2a98b7; if (!_0x46e7b6[_0x15af74(0x91b)] || !_0x46e7b6[_0x15af74(0x915)]) { _0x26f8b2(_0x15af74(0x11f)); return; } await _0x560d4d(); }), document[_0x2a98b7(0x4b6)](_0x2a98b7(0x3bf))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x3b4a11 = _0x2a98b7; _0x2e55c9(), _0x102967(_0x3b4a11(0x683), 'musicLibrary'); }), document[_0x2a98b7(0x4b6)]('back-to-library-from-altar')['addEventListener'](_0x2a98b7(0xab8), () => { const _0x13090d = _0x2a98b7; _0x102967('musicLibrary', _0x13090d(0x683)); }); async function _0x560d4d() { const _0x33d7df = _0x2a98b7; _0x32d19f(!![], _0x33d7df(0x9e2)); try { if (_0x33d7df(0x172) === 'GOuXB') { const { omniText: _0x5b1c5b } = _0x1001d3(_0x5bc528['id'], null), _0x60c601 = _0x7d949c(_0x20a63e['id']), _0x41b2b4 = _0x34aab2[_0x33d7df(0x859)] && _0x122881[_0x33d7df(0x859)][_0x33d7df(0x84b)] > 0x0 ? _0x33d7df(0x2f9) + _0x47d9f0[_0x33d7df(0x5f1)] + _0x33d7df(0x7c4) + _0x1074bd[_0x33d7df(0x859)][_0x33d7df(0x30c)](_0xa6f50b => _0x1497ba[_0x33d7df(0xa3c)][_0x33d7df(0x32b)](_0x4f0305 => _0x4f0305['id'] === _0xa6f50b))[_0x33d7df(0x1f9)](_0x28aa41)[_0x33d7df(0x30c)](_0x52fd17 => '\x0a##\x20条目:\x20' + _0x52fd17[_0x33d7df(0x5f1)] + '\x0a' + _0x52fd17['content'])[_0x33d7df(0x602)]('') : ''; return _0x33d7df(0x311) + _0x191fef[_0x33d7df(0x5f1)] + _0x33d7df(0x456) + _0x5635c6['id'] + _0x33d7df(0x8c0) + _0xfac95[_0x33d7df(0x8ad)] + _0x33d7df(0x73d) + _0x5b1c5b + '\x0a' + _0x60c601 + '\x0a' + _0x41b2b4; } else { const _0x58a7f7 = await _0x46e7b6[_0x33d7df(0x915)][_0x33d7df(0xa20)](); let _0x291afc; if (_0x58a7f7['trim']()[_0x33d7df(0x914)]('{')) { if (_0x33d7df(0x52f) === _0x33d7df(0x52f)) _0x291afc = JSON[_0x33d7df(0x93f)](_0x58a7f7); else { const _0x523256 = _0x4d27e4[_0x33d7df(0x47c)](_0x33d7df(0xa8a)); if (_0x523256) { const _0xef831e = _0x44fb3b[_0x33d7df(0x93f)](_0x523256); _0xef831e[_0x33d7df(0x961)] && (_0x55d546[_0x33d7df(0x961)] = _0xef831e['accountingLedger'], _0x578163[_0x33d7df(0x66c)](_0x33d7df(0x93d))); } } } else { _0x291afc = {}; const _0x1ad16e = _0x58a7f7[_0x33d7df(0x80a)]('\x0a'); _0x1ad16e['forEach'](_0x3abd6a => { const _0x1e78f6 = _0x33d7df, _0x45fad8 = _0x3abd6a[_0x1e78f6(0x80a)](/:\s|：\s/); if (_0x45fad8[_0x1e78f6(0x84b)] === 0x2) { if (_0x1e78f6(0xa2d) === 'VlytU') { const _0x3cb43f = _0x45fad8[0x0][_0x1e78f6(0x345)](), _0x34547f = _0x45fad8[0x1]['trim'](), _0x5dfac2 = { '歌名': _0x1e78f6(0x67e), '艺术家': '歌手', '专辑': '专辑' }; _0x5dfac2[_0x3cb43f] && (_0x291afc[_0x5dfac2[_0x3cb43f]] = _0x34547f); } else { const _0x22b47c = _0x3bc796[0x0][_0x1e78f6(0x345)](), _0x527b96 = _0x41991b[0x1][_0x1e78f6(0x345)](), _0x39b5a1 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x39b5a1[_0x22b47c] && (_0x3b4a9d[_0x39b5a1[_0x22b47c]] = _0x527b96); } } }); if (!_0x291afc[_0x33d7df(0x67e)]) { if (_0x33d7df(0xa40) === _0x33d7df(0x76c)) _0x9c463[_0x33d7df(0x815)] = _0x598a31['meetingViewMode'] === _0x33d7df(0x6b4) ? _0x33d7df(0x2a2) : _0x33d7df(0x6b4), _0x21710d(); else throw new Error('在你那乱七八糟的文本里没找到“歌名”！'); } _0x291afc[_0x33d7df(0xa74)] = _0x33d7df(0x85e) + Date['now'](); } const _0x16d919 = _0x33d7df(0x85e) + (_0x291afc['歌曲ID'] || Date['now']()), _0x5e7873 = { 'id': _0x16d919, 'info': _0x291afc, 'audio': _0x46e7b6['audio'], 'cover': _0x46e7b6[_0x33d7df(0x549)], 'lyrics': _0x46e7b6[_0x33d7df(0x682)] ? await _0x46e7b6['lyrics']['text']() : '' }; await _0x1c1587(_0x5e7873), await _0x169cc0(), _0x32d19f(![]), _0x26f8b2(_0x33d7df(0x943) + _0x291afc[_0x33d7df(0x67e)] + _0x33d7df(0x2b5)), _0x102967(_0x33d7df(0x9d1), 'musicUploadAltar'); } } catch (_0x99a89c) { _0x32d19f(![]), console[_0x33d7df(0x963)](_0x33d7df(0x239), _0x99a89c), _0x26f8b2(_0x33d7df(0x7e2) + _0x99a89c[_0x33d7df(0x973)]); } } async function _0x169cc0() { const _0xcf780f = _0x2a98b7, _0x429fef = document['getElementById']('music-library-container'); _0x429fef['innerHTML'] = ''; const _0x4479c3 = await _0x4d713d(); if (_0x4479c3[_0xcf780f(0x84b)] === 0x0) { if (_0xcf780f(0x6c1) !== _0xcf780f(0x6c1)) _0xb1f4f9[_0xcf780f(0x4b6)]('galgame-text')[_0xcf780f(0xab3)] = _0xcf780f(0x2dd); else { _0x429fef[_0xcf780f(0x3c8)] = _0xcf780f(0x34f); return; } } _0x4479c3[_0xcf780f(0x419)]((_0x276c35, _0x146ba2) => (_0x276c35['info'][_0xcf780f(0x67e)] || '')[_0xcf780f(0x282)](_0x146ba2[_0xcf780f(0x915)]['歌曲名称'] || '')); for (const _0x53903b of _0x4479c3) { const _0x130f29 = document['createElement'](_0xcf780f(0x80e)); _0x130f29['className'] = _0xcf780f(0x58a), _0x130f29['dataset'][_0xcf780f(0xa21)] = _0x53903b['id']; const _0x22dc9c = _0x53903b[_0xcf780f(0x549)] ? URL[_0xcf780f(0x798)](_0x53903b['cover']) : _0x535078; _0x130f29[_0xcf780f(0x3c8)] = _0xcf780f(0x50d) + _0x22dc9c + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x53903b['info'][_0xcf780f(0x67e)] || _0xcf780f(0x5b5)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>' + (_0x53903b[_0xcf780f(0x915)]['歌手'] || _0xcf780f(0x817)) + _0xcf780f(0x446); let _0x1a704b = null; const _0x21785b = _0x4f5144 => { const _0x427497 = _0xcf780f; if (_0x427497(0x6bd) === 'sNjfX') { if (_0x4f5144['button'] === 0x2) return; _0x1a704b = setTimeout(async () => { const _0x57244f = _0x427497; if ('hcara' === _0x57244f(0x407)) _0x4d3c18[_0x57244f(0x9c6)] = _0x4a97f0, _0x90640(), _0x148c88(); else { if (_0x4f5144['type'] === _0x57244f(0x866)) _0x4f5144[_0x57244f(0x3e5)](); const _0x2062b7 = await _0x2f2e39(_0x57244f(0x15f) + _0x53903b[_0x57244f(0x915)]['歌曲名称'] + _0x57244f(0x8e5)); _0x2062b7 && (await _0x553813(_0x53903b['id']), await _0x169cc0(), _0x26f8b2('已删除。')); } }, 0x320); } else { const _0x5c65cb = _0x19cc30(_0x5860c6['dataset'][_0x427497(0x1cb)], 0xa); _0x593bd4(_0x5c65cb); } }, _0x44a190 = () => { clearTimeout(_0x1a704b); }; _0x130f29[_0xcf780f(0x20b)]('mousedown', _0x21785b), _0x130f29[_0xcf780f(0x20b)](_0xcf780f(0x5a7), _0x44a190), _0x130f29[_0xcf780f(0x20b)](_0xcf780f(0x13a), _0x44a190), _0x130f29['addEventListener'](_0xcf780f(0x866), _0x21785b, { 'passive': ![] }), _0x130f29[_0xcf780f(0x20b)](_0xcf780f(0x13d), _0x44a190), _0x130f29['addEventListener']('touchcancel', _0x44a190), _0x130f29[_0xcf780f(0x20b)](_0xcf780f(0xab8), _0x47ae55 => { const _0xad72cb = _0xcf780f; if ('YPTqs' !== 'YPTqs') _0x4cf226 = _0x45661c, _0x2020c3[_0xad72cb(0x544)][_0xad72cb(0x82e)](_0xad72cb(0x187)); else { if (_0x1a704b) clearTimeout(_0x1a704b); if (_0x47ae55[_0xad72cb(0x931)]) return; setTimeout(() => { const _0x37243c = _0xad72cb; _0x37243c(0x162) === _0x37243c(0x162) ? _0x1a704b && _0x4d9787(_0x53903b['id'], _0x4479c3[_0x37243c(0x30c)](_0x2387bd => _0x2387bd['id'])) : _0x443caa['addEventListener'](_0x37243c(0xab8), () => { const _0x58b102 = _0x37243c, _0x5197e2 = _0x3f6038[_0x58b102(0x93f)](_0x58bff5[_0x58b102(0x773)]['log'][_0x58b102(0x829)](/&quot;/g, '\x22')), _0x3d1bac = _0x55888d[_0x58b102(0x773)]['contactName'], _0x5a7b53 = _0x2033f4['dataset'][_0x58b102(0x4ca)]; _0x1b1b9a(_0x3d1bac, _0x5a7b53, _0x5197e2); }); }, 0x32); } }), _0x429fef[_0xcf780f(0x329)](_0x130f29); } } _0x3e912a[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x27e953 = _0x2a98b7; 'LAUBZ' !== _0x27e953(0x772) ? _0x193fc8(_0x27e953(0x46e)) : _0x26f8b2('说了是摆设啦，笨蛋。'); }), _0x57480b['addEventListener'](_0x2a98b7(0xab8), () => { _0x26f8b2('这个也是摆设，别点了。'); }); let _0x53f789 = [], _0x5ab40d = -0x1; async function _0x4d9787(_0x71e8cd, _0x2561b5) { const _0x4a10ad = _0x2a98b7, _0x26105f = await _0x246760(_0x71e8cd); if (!_0x26105f) return; _0x249a18 = { 'title': _0x26105f[_0x4a10ad(0x915)][_0x4a10ad(0x67e)] || '未知歌曲', 'artist': _0x26105f[_0x4a10ad(0x915)]['歌手'] || _0x4a10ad(0x817), 'cover': _0x26105f['cover'] ? URL[_0x4a10ad(0x798)](_0x26105f[_0x4a10ad(0x549)]) : _0x535078, 'isFromLibrary': !![] }; const _0x15d75a = URL['createObjectURL'](_0x26105f[_0x4a10ad(0x91b)]); _0x133351[_0x4a10ad(0x2fd)] = _0x15d75a, _0x133351['play'](), _0x5a9481(); } async function _0x5a9481() { const _0x1269dc = _0x2a98b7, _0x5a6efd = document['getElementById'](_0x1269dc(0x3c6)), _0x52ac55 = document[_0x1269dc(0x4b6)](_0x1269dc(0x8b8)), _0x522525 = document['getElementById'](_0x1269dc(0x8fa)), _0x5a3e3b = document['getElementById'](_0x1269dc(0x7db)), _0xa2043b = _0x249a18; if (_0xa2043b && _0xa2043b[_0x1269dc(0x5f4)]) _0x52ac55[_0x1269dc(0xab3)] = _0xa2043b[_0x1269dc(0x9ab)], _0x522525['textContent'] = _0xa2043b[_0x1269dc(0x278)], _0x5a6efd[_0x1269dc(0x544)]['add'](_0x1269dc(0xa9c)), _0x5a6efd[_0x1269dc(0x636)][_0x1269dc(0x6d0)](_0x1269dc(0x895), 'url(' + _0xa2043b[_0x1269dc(0x549)] + ')'); else { if (_0x1269dc(0x292) === _0x1269dc(0x292)) _0x52ac55['textContent'] = _0x1269dc(0xa15), _0x522525['textContent'] = '请在动态或聊天中播放', _0x5a6efd[_0x1269dc(0x544)][_0x1269dc(0x7f8)](_0x1269dc(0xa9c)), _0x5a3e3b[_0x1269dc(0x636)]['setProperty']('--widget-cover-image', 'none'); else { const _0x99eb3c = _0x1779fb[_0x1269dc(0x8d1)](); _0x99eb3c[_0x1269dc(0x62f)] = () => _0x393846(_0x99eb3c[_0x1269dc(0x8e8)]), _0x99eb3c[_0x1269dc(0x8ec)] = () => _0xef773a(_0x99eb3c['error']); } } } _0x3e912a && _0x3e912a[_0x2a98b7(0x20b)]('click', () => { const _0xeab35f = _0x2a98b7; if (_0x53f789['length'] === 0x0) return; _0x5ab40d = (_0x5ab40d + 0x1) % _0x53f789[_0xeab35f(0x84b)], _0x4d9787(_0x53f789[_0x5ab40d], _0x53f789); }); _0x57480b && _0x57480b[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x2f4f76 = _0x2a98b7; if (_0x53f789[_0x2f4f76(0x84b)] === 0x0) return; _0x5ab40d = (_0x5ab40d - 0x1 + _0x53f789[_0x2f4f76(0x84b)]) % _0x53f789[_0x2f4f76(0x84b)], _0x4d9787(_0x53f789[_0x5ab40d], _0x53f789); }); _0x133351['addEventListener'](_0x2a98b7(0x81e), () => { const _0x16351b = _0x2a98b7; if (_0x16351b(0x25d) === _0x16351b(0x25d)) { if (_0x31f9bd) _0x31f9bd[_0x16351b(0xab3)] = '❚❚'; } else { const _0x536d05 = _0x42023f[_0x16351b(0x577)](), _0x305b22 = _0x57c090[_0x16351b(0x577)](); if (_0x536d05[_0x16351b(0x914)]('claude')) return _0x16351b(0x29e); if (_0x305b22['includes'](_0x16351b(0x362))) return _0x16351b(0x29e); if (_0x305b22[_0x16351b(0x9f1)](_0x16351b(0x7c5))) return 'gemini'; if (_0x536d05[_0x16351b(0x914)]('gemini')) return _0x16351b(0xa78); return _0x16351b(0x41a); } }), _0x133351['addEventListener'](_0x2a98b7(0x59d), () => { const _0x491dbd = _0x2a98b7; if (_0x491dbd(0x1d7) !== _0x491dbd(0x742)) { if (_0x31f9bd) _0x31f9bd['textContent'] = '▶'; } else _0x1ad505[_0x491dbd(0x636)][_0x491dbd(0x6c5)] = 'flex', _0x51b188(() => _0x363ea3[_0x491dbd(0x544)][_0x491dbd(0x82e)](_0x491dbd(0x187)), 0xa); }), _0x133351[_0x2a98b7(0x20b)]('ended', () => { const _0x829d00 = _0x2a98b7; if (_0x829d00(0x78d) !== _0x829d00(0x78d)) return []; else { if (_0x3e912a) _0x3e912a['click'](); } }); function _0x42812a() { const _0x656e6d = _0x2a98b7, _0x5c6c13 = _0xba11a1(); if (!_0x5c6c13) return; _0x560e44[_0x656e6d(0x3c8)] = '', _0x26b374['value'] = ''; if (_0x5c6c13[_0x656e6d(0xaa2)] === 'group') { if (_0x656e6d(0xa9f) !== _0x656e6d(0xa9f)) { const _0x539cb5 = _0xb3d134['worldBooks'][_0x656e6d(0x32b)](_0x573942 => _0x573942['id'] === _0x4ba3d0); if (!_0x539cb5) return; _0x3155e9['getElementById']('editing-world-book-id')[_0x656e6d(0x95e)] = _0x539cb5['id'], _0x32ca0f[_0x656e6d(0x4b6)]('world-book-editor-title')[_0x656e6d(0xab3)] = _0x656e6d(0x638), _0x423381[_0x656e6d(0x4b6)](_0x656e6d(0x983))[_0x656e6d(0x95e)] = _0x539cb5[_0x656e6d(0x5f1)], _0x3a0c95[_0x656e6d(0x4b6)](_0x656e6d(0xa60))[_0x656e6d(0x95e)] = _0x539cb5[_0x656e6d(0x9c6)]; } else _0x5c6c13[_0x656e6d(0x2db)][_0x656e6d(0x6ff)](_0x4ed202 => { const _0x579ca4 = _0x656e6d; if ('JbJMA' !== _0x579ca4(0x3d1)) { if (_0x82ad02[_0x579ca4(0xa7f)] === _0x579ca4(0x620)) _0x214e74(![]); if (_0x291065[_0x579ca4(0xa7f)] === _0x579ca4(0x8cc)) _0xd5029e(!![]); } else { const _0x35d39a = _0x389a36(_0x4ed202); if (_0x35d39a) { const _0x194825 = document['createElement'](_0x579ca4(0x689)); _0x194825[_0x579ca4(0x95e)] = _0x35d39a['id'], _0x194825[_0x579ca4(0xab3)] = _0x35d39a['name'], _0x560e44[_0x579ca4(0x329)](_0x194825); } } }), _0x3d3ca7[_0x656e6d(0x636)]['display'] = _0x656e6d(0x493); } else _0x3d3ca7[_0x656e6d(0x636)][_0x656e6d(0x6c5)] = _0x656e6d(0x55f); _0xd16b95[_0x656e6d(0x544)][_0x656e6d(0x82e)]('show'), _0x26b374[_0x656e6d(0x63f)](); } function _0x611c2c() { const _0x4116e3 = _0x2a98b7; if (_0x4116e3(0x771) !== _0x4116e3(0x758)) { const _0x12cd6f = parseFloat(_0x26b374['value']); if (isNaN(_0x12cd6f) || _0x12cd6f <= 0x0) { _0x26f8b2('请输入有效的转账金额！'); return; } const _0x5e5576 = _0xba11a1(); let _0x4c0673 = null; _0x5e5576[_0x4116e3(0xaa2)] === _0x4116e3(0x1d3) ? _0x4116e3(0x389) !== _0x4116e3(0x389) ? (_0x2871f7[_0x4116e3(0xab3)] = _0x4116e3(0x699), _0x51034d[_0x4116e3(0x95e)] = '', _0x568ccf[_0x4116e3(0x95e)] = '好友圈\x20' + (_0x3a38d4[_0x4116e3(0x9b0)][_0x4116e3(0x84b)] + 0x1), _0x52f482[_0x4116e3(0x95e)] = _0x364b81[_0x4116e3(0x4a1)], _0x3e274a[_0x4116e3(0x636)][_0x4116e3(0x6c5)] = _0x4116e3(0x55f)) : _0x4c0673 = _0x560e44[_0x4116e3(0x95e)] : _0x4116e3(0x7ab) === 'UlGbF' ? _0x4c0673 = _0x5e5576[_0x4116e3(0x2db)][0x0] : _0x752121['removeItem'](_0x4116e3(0x8ab) + _0x4ad7f1); const _0x27f17f = _0x25fa5a(_0x5e5576['id']), _0x3a4e49 = { 'role': _0x4116e3(0x880), 'type': 'transfer', 'content': _0x4116e3(0x879) + (_0x389a36(_0x4c0673)?.[_0x4116e3(0x5f1)] || '未知') + '\x20转账\x20' + _0x12cd6f + ']', 'amount': _0x12cd6f, 'recipientId': _0x4c0673, 'senderId': _0x27f17f['id'], 'timestamp': Date['now']() }; _0x4025fd['conversationHistory']['push'](_0x3a4e49), _0x530f2e(), _0x21e41c(), _0xd16b95[_0x4116e3(0x544)]['remove']('show'); } else _0x417e36[_0x4116e3(0x4b6)](_0x4116e3(0x66a))['value'] = '', _0x55bf85[_0x4116e3(0x4b6)](_0x4116e3(0x790))[_0x4116e3(0xab3)] = '新建条目', _0x429eb4[_0x4116e3(0x4b6)](_0x4116e3(0x983))[_0x4116e3(0x95e)] = '', _0x2298b1[_0x4116e3(0x4b6)](_0x4116e3(0xa60))[_0x4116e3(0x95e)] = ''; } async function _0x3d8b83(_0xe77ca9) { const _0x4b54e0 = _0x2a98b7; if (_0x4b54e0(0x922) !== _0x4b54e0(0xa72)) { const _0x5aba15 = _0x389a36(_0xe77ca9); if (!_0x5aba15) return; const _0x16e3e3 = await _0x2f2e39(_0x4b54e0(0x122) + _0x5aba15[_0x4b54e0(0x5f1)] + _0x4b54e0(0x4b9)); if (!_0x16e3e3) return; const _0x2fd119 = _0x4025fd['diaries']['findIndex'](_0x23badc => _0x23badc['characterId'] === _0xe77ca9); _0x2fd119 > -0x1 ? (_0x4025fd['diaries']['splice'](_0x2fd119, 0x1), _0x33c083(), _0x494a3e(), _0x26f8b2('【' + _0x5aba15[_0x4b54e0(0x5f1)] + '】的日记本已被清空。')) : _0x4b54e0(0x8a6) !== _0x4b54e0(0x8a6) ? (_0x4ed589['remove'](), _0x2ea6c2()) : _0x26f8b2(_0x4b54e0(0xa61)); } else { const _0x5389c1 = _0x440e7d(_0x19255a[_0x4b54e0(0xa84)]); _0x5389c1 && (_0x35d096 = _0x5389c1[_0x4b54e0(0x5f1)], _0x5722a2 = _0x5389c1[_0x4b54e0(0x12d)]); } } function _0x261e6f() { const _0x4ae5ac = _0x2a98b7; if ('ItvfF' === _0x4ae5ac(0x6fe)) _0x9a9ecd[_0x4ae5ac(0x7eb)] = _0x14db48(() => { const _0x9f6fb1 = _0x4ae5ac; if (_0x523fde[_0x9f6fb1(0xaa2)] === _0x9f6fb1(0x866)) _0x224580[_0x9f6fb1(0x3e5)](); _0x1ca98b(_0x516121(_0x5bb2f9, 0xa), _0x177a12); }, 0x320); else { const _0x2641fa = document['getElementById'](_0x4ae5ac(0x1ee)); _0x2641fa['innerHTML'] = ''; const _0x66141 = _0x4025fd[_0x4ae5ac(0x61c)][_0x4ae5ac(0x1f9)](_0x42c317 => _0x4025fd[_0x4ae5ac(0x132)][_0x4ae5ac(0x533)](_0x1d4772 => _0x1d4772['type'] === _0x4ae5ac(0x258) && _0x1d4772[_0x4ae5ac(0x2db)][_0x4ae5ac(0x9f1)](_0x42c317['id']))); if (_0x66141['length'] === 0x0) { _0x2641fa[_0x4ae5ac(0x3c8)] = _0x4ae5ac(0x7ca); return; } _0x66141['forEach'](_0x343ec4 => { const _0x34fe13 = _0x4ae5ac, _0x5cd1aa = document[_0x34fe13(0x597)]('li'); _0x5cd1aa[_0x34fe13(0x575)] = _0x34fe13(0xa91), _0x5cd1aa[_0x34fe13(0x773)][_0x34fe13(0x8c8)] = _0x343ec4['id'], _0x5cd1aa[_0x34fe13(0x3c8)] = _0x34fe13(0x566) + (_0x343ec4[_0x34fe13(0x12d)] || _0x535078) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x343ec4[_0x34fe13(0x5f1)] + _0x34fe13(0xa92) + _0x343ec4[_0x34fe13(0x5f1)] + _0x34fe13(0x99b), _0x5cd1aa['querySelector'](_0x34fe13(0x3fb))[_0x34fe13(0x20b)](_0x34fe13(0xab8), () => _0x32d771(_0x343ec4['id'])), _0x5cd1aa[_0x34fe13(0x6f8)]('.snoop-clear-btn')[_0x34fe13(0x20b)](_0x34fe13(0xab8), async _0x202292 => { const _0x14c567 = _0x34fe13; _0x202292['stopPropagation'](); const _0x3e6f20 = _0x389a36(_0x343ec4['id']); if (!_0x3e6f20) return; const _0x23a86f = await _0x2f2e39(_0x14c567(0x8cb) + _0x3e6f20['name'] + '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。'); if (_0x23a86f) { if (_0x14c567(0x668) === _0x14c567(0x668)) { _0x32d19f(!![], _0x14c567(0x5b7) + _0x3e6f20[_0x14c567(0x5f1)] + '】的旧数据...'); const _0x4ff2b1 = [_0x14c567(0xaa7), _0x14c567(0x6a7), _0x14c567(0x152), 'fragments', _0x14c567(0x950), _0x14c567(0x4b8), 'footprints', _0x14c567(0x333)]; for (const _0x2bdf33 of _0x4ff2b1) { if ('ouWJB' !== _0x14c567(0x40c)) { const _0x139e92 = _0x14c567(0x2d6) + _0x3e6f20['id'] + '_' + _0x2bdf33; await _0x5ea332(_0x139e92); } else { const _0x29a964 = _0x47cdd7[_0x14c567(0x204)][_0x14c567(0x1f9)](_0x3ffa2f => _0x3ffa2f['author'] === 'user')['pop'](); _0x29a964 && (_0x5559c2 = _0x29a964['content']); } } _0x32d19f(![]), _0x26f8b2('【' + _0x3e6f20[_0x14c567(0x5f1)] + '】的手机已被重置。'); } else try { const _0x57e471 = _0x572f3d[_0x14c567(0x93f)](_0x302ace); _0x46716a['isArray'](_0x57e471) && (_0x4b7025['value'] = _0x57e471[_0x14c567(0x30c)](_0x28ed30 => _0x28ed30['name'] + '--' + _0x28ed30['url'])['join']('\x0a')); } catch (_0x3b3c2b) { } } }), _0x2641fa[_0x34fe13(0x329)](_0x5cd1aa); }); } } let _0x205300 = null, _0x397625 = null; function _0x4f5644() { const _0x399324 = _0x2a98b7, _0x2d37cd = new Date(), _0x33030e = document[_0x399324(0x4b6)](_0x399324(0xa14)), _0x520a66 = document[_0x399324(0x4b6)](_0x399324(0x5fb)), _0x2aae6b = document[_0x399324(0x4b6)](_0x399324(0x58e)); _0x33030e && _0x520a66 && (_0x33030e[_0x399324(0xab3)] = _0x2d37cd['toLocaleTimeString']('zh-CN', { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }), _0x520a66['textContent'] = _0x2d37cd[_0x399324(0x213)](_0x399324(0x838), { 'month': _0x399324(0x176), 'day': _0x399324(0x4db), 'weekday': _0x399324(0x176) })); if (_0x2aae6b) { if (_0x399324(0x8af) !== _0x399324(0x8af)) { const _0x3d4b40 = _0x57964e[_0x399324(0x4e3)](_0x399324(0xa25)); _0x3d4b40[_0x399324(0x6ff)](_0x54a647 => _0x54a647[_0x399324(0x7f8)]()); } else _0x2aae6b['innerHTML'] = _0x399324(0x4cf) + _0x2d37cd[_0x399324(0x70c)](_0x399324(0x838), { 'hour': _0x399324(0x87a), 'minute': _0x399324(0x87a), 'hour12': ![] }) + _0x399324(0x3ec); } } function _0x32d771(_0x2ec319) { const _0x498438 = _0x2a98b7; if (_0x498438(0x7f3) === 'JFuJD') { if (!_0x2ee63b[_0x498438(0xa4d)]) return; try { _0x8cf9b6['setItem']('chatHistory_' + _0x2f436[_0x498438(0xa4d)], _0x2670d6[_0x498438(0x49f)](_0xf46680['conversationHistory'])); } catch (_0x366ef3) { _0x27eac5[_0x498438(0x963)]('Failed\x20to\x20save\x20history\x20to\x20localStorage:', _0x366ef3), _0x1668be(_0x498438(0x309)); } } else { _0x205300 = _0x2ec319; const _0x5b415a = _0x389a36(_0x2ec319); if (!_0x5b415a) return; const _0x4474d4 = document[_0x498438(0x4b6)]('snoop-phone-screen'), _0x68f4a7 = document[_0x498438(0x4b6)]('snoop-home-clock'); if (_0x68f4a7) _0x68f4a7[_0x498438(0x7f8)](); const _0x143755 = document[_0x498438(0x4b6)](_0x498438(0x5d9)); if (_0x143755) _0x143755[_0x498438(0x7f8)](); _0x4474d4[_0x498438(0x44b)](_0x498438(0x6a2), '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'), _0x4474d4[_0x498438(0x44b)](_0x498438(0x6a2), _0x498438(0x583)), document[_0x498438(0x4b6)]('snoop-char-name-header')[_0x498438(0xab3)] = '', _0x49b9a4(); if (_0x397625) clearInterval(_0x397625); _0x4f5644(), _0x397625 = setInterval(_0x4f5644, 0x2710), _0x102967(_0x498438(0x88b), _0x498438(0x57f)); } } function _0x49b9a4() { const _0x5486d6 = _0x2a98b7; if (_0x5486d6(0x927) !== 'AlshV') { const _0x317170 = _0x1ed123[_0x5486d6(0x13e)]['filter'](_0x49d423 => _0x49d423['type'] === _0x5486d6(0x43a) && _0x49d423[_0x5486d6(0x22c)])[_0x5486d6(0x30c)](_0x114e04 => ({ ..._0x114e04, 'source': 'feed' })); _0x314814[_0x5486d6(0x65b)](..._0x317170); } else { const _0x3681bc = document[_0x5486d6(0x4b6)]('snoop-app-container'), _0x733f78 = document[_0x5486d6(0x4b6)]('snoop-dock'); _0x3681bc[_0x5486d6(0x3c8)] = _0x5486d6(0x97b), _0x733f78[_0x5486d6(0x3c8)] = ''; const _0x1433c2 = _0x3681bc[_0x5486d6(0x6f8)](_0x5486d6(0x1dd)), _0x307c82 = [{ 'id': _0x5486d6(0x6a7), 'name': '聊天', 'svg': _0x5486d6(0x95a), 'area': 'dock' }, { 'id': _0x5486d6(0x152), 'name': _0x5486d6(0x7d1), 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': _0x5486d6(0x6ab) }, { 'id': 'gallery', 'name': '相册', 'svg': _0x5486d6(0x5e0), 'area': _0x5486d6(0x6ab) }, { 'id': _0x5486d6(0x333), 'name': '总结', 'svg': _0x5486d6(0x588), 'area': _0x5486d6(0x6ab) }, { 'id': _0x5486d6(0x3cc), 'name': '备忘录', 'svg': _0x5486d6(0x959), 'area': _0x5486d6(0x7ed) }, { 'id': 'bites', 'name': '外卖', 'svg': _0x5486d6(0x823), 'area': _0x5486d6(0x7ed) }, { 'id': _0x5486d6(0x4b8), 'name': '购物', 'svg': _0x5486d6(0x453), 'area': _0x5486d6(0x7ed) }, { 'id': 'footprints', 'name': '足迹', 'svg': _0x5486d6(0x312), 'area': _0x5486d6(0x7ed) }]; _0x307c82[_0x5486d6(0x6ff)](_0x7b3c08 => { const _0xb99491 = _0x5486d6, _0x8d68b9 = document[_0xb99491(0x597)](_0xb99491(0x80e)); _0x8d68b9[_0xb99491(0x575)] = _0xb99491(0x4e1), _0x8d68b9[_0xb99491(0x3c8)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x7b3c08[_0xb99491(0x955)] + _0xb99491(0x2c1) + _0x7b3c08[_0xb99491(0x5f1)] + _0xb99491(0x9d5), _0x8d68b9['addEventListener'](_0xb99491(0xab8), () => _0x23bc76(_0x7b3c08['id'], _0x7b3c08[_0xb99491(0x5f1)])); if (_0x7b3c08['area'] === _0xb99491(0x6ab)) { if (_0xb99491(0x41c) !== _0xb99491(0x2e9)) _0x733f78['appendChild'](_0x8d68b9); else { const _0x1809b2 = _0x1b5f64['getElementById'](_0xb99491(0x336)); _0x1809b2[_0xb99491(0x313)](), _0x2d7055['execCommand'](_0xb99491(0x6ca)), _0x2096de(_0xb99491(0x1f2)); } } else _0xb99491(0x8ee) !== 'XvDGE' ? _0x1433c2['appendChild'](_0x8d68b9) : (_0x3b3476[_0xb99491(0x636)][_0xb99491(0x4b7)] = _0xb99491(0x314) + _0x16b0cd[_0xb99491(0x343)] + '\x27)', _0x3df2d1['style'][_0xb99491(0x799)] = _0xb99491(0x549), _0x55b265['style'][_0xb99491(0x90b)] = 'center'); }); } } document['getElementById'](_0x2a98b7(0x698))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => { const _0x1605fe = _0x2a98b7; if (_0x1605fe(0x7fd) !== 'zKUxQ') { _0x397625 && (clearInterval(_0x397625), _0x397625 = null); document[_0x1605fe(0x4b6)]('snoop-app-view-container')[_0x1605fe(0x636)][_0x1605fe(0x6c5)] = _0x1605fe(0x55f); const _0x2b672f = document[_0x1605fe(0x4b6)](_0x1605fe(0x5d9)); if (_0x2b672f) _0x2b672f[_0x1605fe(0x7f8)](); const _0x5c6a76 = document[_0x1605fe(0x4b6)](_0x1605fe(0x223)); if (_0x5c6a76) _0x5c6a76[_0x1605fe(0x7f8)](); _0x102967('snoopList', 'snoopPhone'); } else { _0x5c736d[_0x1605fe(0x3c8)] = _0x1605fe(0x1fd); return; } }); async function _0x23bc76(_0x46fc79, _0x264c98, _0x1f585d = ![]) { const _0x28dda2 = _0x2a98b7, _0x48898c = document[_0x28dda2(0x4b6)](_0x28dda2(0x494)); _0x48898c[_0x28dda2(0x3c8)] = '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', _0x48898c[_0x28dda2(0x636)][_0x28dda2(0x6c5)] = _0x28dda2(0x835); const _0x545744 = _0x28dda2(0x2d6) + _0x205300 + '_' + _0x46fc79; try { if (_0x46fc79 === _0x28dda2(0x333)) { const _0x47cc49 = await _0x49935e(_0x205300); _0x50ac5d(_0x46fc79, _0x264c98, _0x47cc49); return; } let _0x3948b8 = await _0x68b1d8(_0x545744); if (_0x1f585d || !_0x3948b8) { if (_0x28dda2(0x4a2) === 'FkQLt') _0x2d6189['push'](..._0x3ecdbf(_0x2dee5f)); else { console[_0x28dda2(0x66c)](_0x28dda2(0x445) + _0x545744 + '...'); let _0x469f4b = await _0x41e3f4(_0x46fc79, _0x205300, _0x3948b8); if (_0x469f4b) { const _0x5f2c02 = _0x469f4b[_0x28dda2(0x561)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x5b525d = _0x5f2c02 ? _0x5f2c02[0x1][_0x28dda2(0x345)]() : _0x469f4b[_0x28dda2(0x345)](); let _0x7d0042; try { _0x7d0042 = JSON[_0x28dda2(0x93f)](_0x5b525d); } catch (_0x1e8a7b) { _0x7d0042 = _0x30527a(_0x5b525d); if (!_0x7d0042) throw new Error(_0x28dda2(0x41e)); } const _0x8a7a42 = JSON[_0x28dda2(0x49f)](_0x7d0042); await _0x1879ac(_0x545744, _0x8a7a42), _0x3948b8 = _0x8a7a42; } } } else console[_0x28dda2(0x66c)](_0x28dda2(0x942) + _0x545744); _0x50ac5d(_0x46fc79, _0x264c98, _0x3948b8); } catch (_0x27bc80) { console[_0x28dda2(0x963)](_0x28dda2(0x499) + _0x264c98 + _0x28dda2(0x63a), _0x27bc80), _0x48898c[_0x28dda2(0x3c8)] = _0x28dda2(0x78b) + _0x27bc80[_0x28dda2(0x973)] + _0x28dda2(0x90c); } } function _0x50ac5d(_0x41fbb, _0x4ebc8f, _0x3dc7b8) { const _0x162b69 = _0x2a98b7, _0x3d33ee = _0x389a36(_0x205300), _0x350263 = document[_0x162b69(0x4b6)]('snoop-app-view-container'); let _0x187077 = ''; if (!_0x3dc7b8) { if ('UmnHv' === _0x162b69(0x425)) _0x187077 = _0x162b69(0x861); else { const _0x205093 = _0x514f29[_0x162b69(0x3f4)][_0x48cd0c]; _0x205093 && _0x205093[_0x162b69(0x84b)] > 0x0 && (_0x4e2e9a = _0x205093['at'](-0x1)); } } else { if (_0x162b69(0x27d) === 'mawKL') { const _0x722ddc = _0x1a4956['friendCircles'][_0x162b69(0x32b)](_0x218d8f => _0x218d8f['id'] === _0x5f4ded); _0x722ddc && (_0x722ddc[_0x162b69(0x5f1)] = _0x15aa38, _0x722ddc[_0x162b69(0x774)] = _0x371718, _0x722ddc[_0x162b69(0x647)] = _0x2c9cc9); } else { if (_0x41fbb === _0x162b69(0x333)) _0x162b69(0x937) === _0x162b69(0x51a) ? (_0x4bbf82['select'](), _0x2c2b44[_0x162b69(0x400)]['writeText'](_0x56a57a[_0x162b69(0x95e)])[_0x162b69(0x4ea)](() => { _0x1f07f1('已复制到剪贴板！'); })[_0x162b69(0x8ca)](_0x589818 => { _0xe6ec32('复制失败了，哼。'); })) : _0x187077 = _0x162b69(0x8f8) + _0x3dc7b8 + _0x162b69(0x9bc); else { if (_0x162b69(0x61e) !== _0x162b69(0x5c9)) try { let _0x498707 = null; const _0x579b59 = _0x3dc7b8['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x4ff91a = _0x579b59 ? _0x579b59[0x1] : _0x3dc7b8; _0x498707 = JSON[_0x162b69(0x93f)](_0x4ff91a); const _0x5bbcc2 = _0x389a36(_0x205300); switch (_0x41fbb) { case 'gallery': _0x187077 = _0xa8ccdb(_0x498707); break; case _0x162b69(0x6a7): _0x187077 = _0x21750d(_0x498707, _0x5bbcc2[_0x162b69(0x5f1)]); break; case _0x162b69(0x152): _0x187077 = _0x5a6787(_0x498707); break; case 'fragments': _0x187077 = _0x1a164d(_0x498707); break; case _0x162b69(0x950): _0x187077 = _0x2253d8(_0x498707); break; case 'wants': _0x187077 = _0x41dfc3(_0x498707); break; case _0x162b69(0x6af): _0x187077 = _0x5d72be(_0x498707); break; case 'summary': _0x187077 = _0x162b69(0x3a4) + _0x3dc7b8 + _0x162b69(0x163); break; default: _0x187077 = _0x162b69(0x8c5) + JSON[_0x162b69(0x49f)](_0x498707, null, 0x2) + _0x162b69(0x30b); } } catch (_0xe26d11) { console['error'](_0x162b69(0x3a2), _0xe26d11), _0x187077 = _0x162b69(0xa01) + _0x3dc7b8 + '</pre>'; } else throw new _0x52e54c(_0x162b69(0xa3b) + _0x31122e); } } } _0x350263[_0x162b69(0x3c8)] = _0x162b69(0x161) + _0x4ebc8f + _0x162b69(0x397) + _0x3d33ee[_0x162b69(0x5f1)] + _0x162b69(0x3b8) + (_0x41fbb === _0x162b69(0x333) ? _0x162b69(0x320) : _0x162b69(0x3d2)) + _0x162b69(0x454) + _0x187077 + _0x162b69(0x3d9); const _0x5ca59b = _0x350263[_0x162b69(0x6f8)](_0x162b69(0x5a3)); _0x41fbb === 'summary' && (_0x5ca59b[_0x162b69(0x636)][_0x162b69(0x997)] = '0'); document[_0x162b69(0x4b6)](_0x162b69(0x982))[_0x162b69(0x20b)](_0x162b69(0xab8), () => { const _0x12ee89 = _0x162b69; if (_0x12ee89(0x84f) !== _0x12ee89(0x84f)) { _0x35a751[_0x12ee89(0x132)] = _0x12783f['chats'][_0x12ee89(0x1f9)](_0x4c4253 => _0x4c4253['id'] !== _0x9fe598); try { _0x42c508[_0x12ee89(0x6f1)](_0x12ee89(0x8ab) + _0x4ab2bf); } catch (_0x3c0765) { _0x15c823[_0x12ee89(0x963)](_0x12ee89(0x98a) + _0x5eee2e, _0x3c0765); } _0x461b46[_0x12ee89(0xa4d)] === _0x38a428 && (_0x5394a2[_0x12ee89(0xa4d)] = _0x46c4c5[_0x12ee89(0x132)][0x0]?.['id'] || null, _0x4640e7(_0x46dbe6['activeChatId'])), _0x2292e9(), _0x3b17df(); } else _0x350263[_0x12ee89(0x636)][_0x12ee89(0x6c5)] = 'none'; }); if (_0x41fbb === _0x162b69(0x333)) { if (_0x162b69(0xa36) === _0x162b69(0x4e8)) { const _0x37e40c = _0x1e5621[_0x162b69(0x4b6)](_0x162b69(0x14f)); if (!_0x37e40c) return; _0x26c6f7[_0x162b69(0x271)][_0x162b69(0x480)] ? (_0x37e40c[_0x162b69(0x636)]['color'] = _0x162b69(0x947), _0x37e40c[_0x162b69(0x636)][_0x162b69(0x7c6)] = _0x162b69(0x1a8)) : (_0x37e40c[_0x162b69(0x636)][_0x162b69(0x94c)] = _0x162b69(0x3a9), _0x37e40c[_0x162b69(0x636)][_0x162b69(0x7c6)] = _0x162b69(0x55f)); } else document[_0x162b69(0x4b6)](_0x162b69(0x47e))[_0x162b69(0x20b)](_0x162b69(0xab8), () => { const _0x47870f = _0x162b69; if (_0x47870f(0x8ef) === _0x47870f(0x3ba)) _0xb4f2be[_0x47870f(0x24a)][_0x2ba1f6][_0x47870f(0x830)] = !![], _0x564b88(); else { const _0x35f771 = document[_0x47870f(0x4b6)](_0x47870f(0x336)); _0x35f771[_0x47870f(0x313)](), document[_0x47870f(0x40a)](_0x47870f(0x6ca)), _0x26f8b2(_0x47870f(0x1f2)); } }); } else document['getElementById'](_0x162b69(0xa32))[_0x162b69(0x20b)]('click', async () => { _0x23bc76(_0x41fbb, _0x4ebc8f, !![]); }); _0x41fbb === _0x162b69(0x6a7) && _0x350263[_0x162b69(0x4e3)](_0x162b69(0x611))[_0x162b69(0x6ff)](_0x515319 => { const _0x398dce = _0x162b69; if ('zMLxj' === _0x398dce(0x7f5)) { const _0x439171 = new _0x232b48(), _0x5d5a53 = _0x5d3b9c['getElementById'](_0x398dce(0xa14)), _0x38aa70 = _0x4d828a[_0x398dce(0x4b6)]('snoop-home-date'), _0x4bb58e = _0xdc59ed[_0x398dce(0x4b6)](_0x398dce(0x58e)); _0x5d5a53 && _0x38aa70 && (_0x5d5a53[_0x398dce(0xab3)] = _0x439171[_0x398dce(0x70c)](_0x398dce(0x838), { 'hour': _0x398dce(0x87a), 'minute': _0x398dce(0x87a), 'hour12': ![] }), _0x38aa70[_0x398dce(0xab3)] = _0x439171[_0x398dce(0x213)](_0x398dce(0x838), { 'month': _0x398dce(0x176), 'day': _0x398dce(0x4db), 'weekday': _0x398dce(0x176) })), _0x4bb58e && (_0x4bb58e['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x439171[_0x398dce(0x70c)](_0x398dce(0x838), { 'hour': _0x398dce(0x87a), 'minute': _0x398dce(0x87a), 'hour12': ![] }) + _0x398dce(0x3ec)); } else _0x515319[_0x398dce(0x20b)]('click', () => { const _0x176c6a = _0x398dce, _0x2f478e = JSON[_0x176c6a(0x93f)](_0x515319[_0x176c6a(0x773)][_0x176c6a(0x66c)]['replace'](/&quot;/g, '\x22')), _0x1bb0d3 = _0x515319[_0x176c6a(0x773)][_0x176c6a(0x968)], _0x17a096 = _0x515319['dataset'][_0x176c6a(0x4ca)]; _0x55d7b7(_0x1bb0d3, _0x17a096, _0x2f478e); }); }); } function _0x55d7b7(_0x131337, _0x11aafc, _0x33408b) { const _0xc8a815 = _0x2a98b7; if (_0xc8a815(0x6db) === _0xc8a815(0x6db)) { const _0x5a9f1d = document['querySelector'](_0xc8a815(0x4ee)), _0x4bbbc9 = document[_0xc8a815(0x6f8)](_0xc8a815(0x542)); let _0x1cf7bc = _0xc8a815(0x7de); !_0x33408b || _0x33408b[_0xc8a815(0x84b)] === 0x0 ? _0x1cf7bc += _0xc8a815(0x33e) : _0xc8a815(0x1e2) === _0xc8a815(0x1e2) ? _0x33408b[_0xc8a815(0x6ff)](_0x191fa5 => { const _0x241c7e = _0xc8a815, _0x37a051 = _0x191fa5[_0x241c7e(0x80f)] === _0x241c7e(0x5ef), _0x33f844 = _0x37a051 ? _0x11aafc ? _0x11aafc[0x0] : '?' : _0x131337 ? _0x131337[0x0] : '?'; _0x1cf7bc += _0x241c7e(0x4cc) + (_0x37a051 ? _0x241c7e(0x880) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x37a051 ? _0x241c7e(0x2e4) + _0x33f844 + _0x241c7e(0x86f) : '') + _0x241c7e(0x824) + (_0x37a051 ? 'user' : 'ai') + _0x241c7e(0x74c) + _0x191fa5[_0x241c7e(0x9c6)] + _0x241c7e(0x70b) + (_0x37a051 ? _0x241c7e(0x2e4) + _0x33f844 + _0x241c7e(0x86f) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; }) : _0x5bd114[_0xc8a815(0x81e)](), _0x1cf7bc += _0xc8a815(0x86f), _0x5a9f1d['innerHTML'] = _0x1cf7bc, _0x5a9f1d[_0xc8a815(0x3ce)] = _0x5a9f1d[_0xc8a815(0x650)], _0x4bbbc9[_0xc8a815(0x3c8)] = _0xc8a815(0x8b7) + _0x131337 + _0xc8a815(0x134), document['getElementById'](_0xc8a815(0x8fb))[_0xc8a815(0x20b)]('click', () => { _0x23bc76('whispers', '聊天'); }), !document[_0xc8a815(0x4b6)](_0xc8a815(0xaa3)) && document[_0xc8a815(0x506)][_0xc8a815(0x44b)](_0xc8a815(0x6a2), _0xc8a815(0x617)); } else { _0x3db597(_0xc8a815(0x304)); return; } } function _0x30527a(_0x5f5bca) { const _0x450632 = _0x2a98b7; if (_0x450632(0x9b2) === _0x450632(0x516)) return _0x58675a['slice'](0x0, 0x9); else { if (!_0x5f5bca || typeof _0x5f5bca !== _0x450632(0x90a)) return null; const _0x38f9e9 = _0x5f5bca[_0x450632(0x345)]()[_0x450632(0x80a)]('\x0a'), _0x32be3c = []; let _0x38f5a6 = null; for (const _0x5805e9 of _0x38f9e9) { const _0x53c767 = _0x5805e9['trim'](); if (_0x53c767[_0x450632(0x914)]('-\x20')) { _0x38f5a6 && _0x32be3c[_0x450632(0x65b)](_0x38f5a6); _0x38f5a6 = {}; const _0x1e9f14 = _0x53c767['substring'](0x2), _0x3464c6 = _0x1e9f14['split'](/:\s(.+)/); if (_0x3464c6[_0x450632(0x84b)] > 0x1) { if (_0x450632(0x191) === _0x450632(0x17a)) { _0x19677b[_0x450632(0x963)](_0x450632(0x820), _0x54581d), _0x52cc9a[_0x450632(0x61c)] = [], _0x1277cc[_0x450632(0x132)] = [], _0x22a396[_0x450632(0xa4d)] = null; try { _0x3edc81[_0x450632(0x6f1)]('appState'); } catch (_0x13255e) { _0x40e012[_0x450632(0x963)](_0x450632(0x76b), _0x13255e); } } else { const _0x4b0782 = _0x3464c6[0x0][_0x450632(0x345)](), _0x2879e2 = _0x3464c6[0x1][_0x450632(0x345)]()[_0x450632(0x829)](/^"|"$/g, ''); _0x38f5a6[_0x4b0782] = _0x2879e2; } } } else { if (_0x38f5a6 && _0x53c767) { if (_0x450632(0x436) === _0x450632(0x436)) { const _0x571a80 = _0x53c767[_0x450632(0x80a)](/:\s(.+)/); if (_0x571a80[_0x450632(0x84b)] > 0x1) { const _0xeb5bc8 = _0x571a80[0x0][_0x450632(0x345)](), _0x2f5205 = _0x571a80[0x1][_0x450632(0x345)]()[_0x450632(0x829)](/^"|"$/g, ''); _0x38f5a6[_0xeb5bc8] = _0x2f5205; } } else _0x4894cd[_0x450632(0x65b)]('[' + _0x4c56a0(_0x124127) + ']\x20' + _0x52423b['content']); } } } return _0x38f5a6 && (_0x450632(0x939) !== _0x450632(0xa80) ? _0x32be3c[_0x450632(0x65b)](_0x38f5a6) : _0x48c4b5++), _0x32be3c[_0x450632(0x84b)] > 0x0 ? _0x32be3c : null; } } async function _0x25419e(_0x326ffc) { const _0x194ac2 = _0x2a98b7; if (!_0x326ffc) return ''; const _0x31c833 = [{ 'id': _0x194ac2(0xaa7), 'name': '相册' }, { 'id': _0x194ac2(0x6a7), 'name': '和其他人的聊天' }, { 'id': _0x194ac2(0x152), 'name': _0x194ac2(0x74e) }, { 'id': _0x194ac2(0x3cc), 'name': _0x194ac2(0xa77) }, { 'id': _0x194ac2(0x950), 'name': '外卖订单' }, { 'id': 'wants', 'name': '购物记录' }, { 'id': _0x194ac2(0x6af), 'name': _0x194ac2(0x299) }]; let _0x563b2b = ''; for (const _0x30385b of _0x31c833) { if ('XvsnM' !== _0x194ac2(0x552)) _0xe7c9c6[_0x194ac2(0x204)][_0x194ac2(0x31d)](_0x52fd05, 0x1), _0x30d790(), _0x279bc2(), _0x4b4cfc(_0x194ac2(0x2e7)); else try { const _0x32973b = _0x194ac2(0x2d6) + _0x326ffc + '_' + _0x30385b['id'], _0x448211 = await _0x68b1d8(_0x32973b); if (_0x448211) { if (_0x194ac2(0x22b) !== _0x194ac2(0x93e)) { const _0x365f39 = _0x448211[_0x194ac2(0x561)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x4c14e8 = _0x365f39 ? _0x365f39[0x1]['trim']() : _0x448211[_0x194ac2(0x345)](); if (!_0x4c14e8) continue; let _0x2e86c9 = null; try { if (_0x194ac2(0x73c) === _0x194ac2(0x73c)) _0x2e86c9 = JSON[_0x194ac2(0x93f)](_0x4c14e8); else return _0x17101c[_0x194ac2(0x66c)]('Fetch\x20request\x20was\x20aborted.'), ''; } catch (_0x3998a5) { console[_0x194ac2(0x5e3)]('JSON解析失败\x20(' + _0x30385b['id'] + _0x194ac2(0x424), _0x3998a5[_0x194ac2(0x973)]); try { _0x2e86c9 = _0x30527a(_0x4c14e8); if (!_0x2e86c9) throw new Error(_0x194ac2(0x216)); console[_0x194ac2(0x66c)](_0x194ac2(0x598) + _0x30385b['id'] + _0x194ac2(0x79e)); } catch (_0x114f7a) { if (_0x194ac2(0x272) !== 'oRXkK') { _0x243b5c[_0x194ac2(0x61c)] = _0x4a8616[_0x194ac2(0x61c)]['filter'](_0x160a54 => _0x160a54['id'] !== _0x5d0294), _0x5976a4['chats']['forEach'](_0x1cfdfc => { const _0x24fa63 = _0x194ac2; _0x1cfdfc[_0x24fa63(0xaa2)] === _0x24fa63(0x1d3) && (_0x1cfdfc[_0x24fa63(0x2db)] = _0x1cfdfc[_0x24fa63(0x2db)][_0x24fa63(0x1f9)](_0x55067b => _0x55067b !== _0x1d0f8f)); }); const _0x515b8b = _0x38f9a5[_0x194ac2(0x132)]['find'](_0x2eede0 => _0x2eede0[_0x194ac2(0xaa2)] === 'private' && _0x2eede0['participantIds']['includes'](_0x57ab2b)); _0x515b8b && _0x9ef260(_0x515b8b['id']), _0x44f269[_0x194ac2(0x132)] = _0x22ac88[_0x194ac2(0x132)]['filter'](_0x2e58b2 => _0x2e58b2[_0x194ac2(0xaa2)] !== 'group' || _0x2e58b2[_0x194ac2(0x2db)][_0x194ac2(0x84b)] > 0x1), _0x205dc3(), _0x57a581(); } else throw _0x3998a5; } } if (Array[_0x194ac2(0x5f8)](_0x2e86c9) && _0x2e86c9[_0x194ac2(0x84b)] > 0x0) { if (_0x563b2b === '') { if (_0x194ac2(0x928) === _0x194ac2(0x928)) _0x563b2b += '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a'; else { const _0x56a6fc = _0x3be5f7(_0x3c3419[_0x194ac2(0x6d3)][_0x194ac2(0x8c8)]); _0x56a6fc && (_0x2459a9 = _0x194ac2(0x16b) + _0x56a6fc[_0x194ac2(0x12d)] + _0x194ac2(0x759) + _0x56a6fc[_0x194ac2(0x5f1)] + '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>' + _0x2bce98['review'][_0x194ac2(0xa20)] + _0x194ac2(0x7f4)); } } _0x563b2b += _0x194ac2(0x783) + _0x30385b[_0x194ac2(0x5f1)] + '\x0a'; switch (_0x30385b['id']) { case _0x194ac2(0xaa7): _0x2e86c9[_0x194ac2(0x6ff)](_0x4a9ab1 => { const _0x29cd0e = _0x194ac2; _0x563b2b += _0x29cd0e(0xa2b) + _0x4a9ab1[_0x29cd0e(0x54f)] + _0x29cd0e(0x96c); }); break; case 'whispers': _0x2e86c9[_0x194ac2(0x6ff)](_0x236f27 => { const _0x386a0a = _0x194ac2; if (_0x386a0a(0x9f5) !== _0x386a0a(0x9f5)) return (_0x355dfd?.[_0x386a0a(0x61c)] || [])[_0x386a0a(0x32b)](_0x5a0abd => _0x5a0abd['id'] === _0x69ba0b); else _0x563b2b += _0x386a0a(0x403) + _0x236f27['contact_name'] + _0x386a0a(0x589) + _0x236f27[_0x386a0a(0x41b)] + _0x386a0a(0x96c), _0x236f27[_0x386a0a(0x66c)] && Array[_0x386a0a(0x5f8)](_0x236f27[_0x386a0a(0x66c)]) && (_0x563b2b += '\x20\x20具体对话如下：\x0a', _0x236f27[_0x386a0a(0x66c)][_0x386a0a(0x6ff)](_0xab85c1 => { const _0x12b582 = _0x386a0a, _0x8c1767 = _0xab85c1[_0x12b582(0x80f)] === _0x12b582(0x5ef) ? '你' : _0x236f27['contact_name']; _0x563b2b += _0x12b582(0x232) + _0x8c1767 + ':\x20' + _0xab85c1[_0x12b582(0x9c6)] + '\x0a'; })); }); break; case 'abyss': _0x2e86c9[_0x194ac2(0x6ff)](_0x1f2841 => { const _0x2d5ba2 = _0x194ac2; 'zWCfW' !== _0x2d5ba2(0x473) ? _0x160e4d['activeUserProfileId'] = _0x1f1859['id'] : _0x563b2b += _0x2d5ba2(0x949) + _0x1f2841['query'] + _0x2d5ba2(0x96c); }); break; case _0x194ac2(0x3cc): _0x2e86c9[_0x194ac2(0x6ff)](_0x3e5b5f => { const _0x4bcb17 = _0x194ac2; _0x4bcb17(0x221) === _0x4bcb17(0x221) ? _0x563b2b += _0x4bcb17(0x7e4) + _0x3e5b5f['title'] + _0x4bcb17(0x449) + _0x3e5b5f[_0x4bcb17(0x9c6)][_0x4bcb17(0x829)](/\n/g, '\x20') + _0x4bcb17(0x96c) : _0x437cf7[_0x4bcb17(0x2fd)] = _0x31befc[_0x4bcb17(0x3b9)]; }); break; case 'bites': _0x2e86c9[_0x194ac2(0x6ff)](_0x4973e6 => { const _0x16f6d3 = _0x194ac2; 'nbOpZ' !== _0x16f6d3(0x125) ? _0x563b2b += _0x16f6d3(0xa9a) + _0x4973e6['restaurant_name'] + _0x16f6d3(0x752) + _0x4973e6['items'][_0x16f6d3(0x602)]('、') + '。\x0a' : (_0x31ee71(![]), _0x126ded[_0x16f6d3(0x492)][_0x16f6d3(0x95e)] = ''); }); break; case _0x194ac2(0x4b8): _0x2e86c9[_0x194ac2(0x6ff)](_0x3d3999 => { const _0x58c542 = _0x194ac2; _0x563b2b += _0x58c542(0x8bd) + _0x3d3999['store_name'] + _0x58c542(0x53a) + _0x3d3999[_0x58c542(0x46b)] + '”。\x0a'; }); break; case _0x194ac2(0x6af): _0x2e86c9['forEach'](_0xc20eb5 => { const _0x3242ad = _0x194ac2; _0x563b2b += _0x3242ad(0x9b9) + _0xc20eb5['location_name'] + _0x3242ad(0x6c6) + _0xc20eb5[_0x3242ad(0x76f)] + '”。\x0a'; }); break; default: _0x2e86c9[_0x194ac2(0x6ff)](_0x3fc80f => { _0x563b2b += '-\x20' + JSON['stringify'](_0x3fc80f) + '\x0a'; }); break; } } } else { _0x467060(_0x194ac2(0x6cc)); return; } } } catch (_0x172433) { console[_0x194ac2(0x963)](_0x194ac2(0x22e) + _0x30385b['id'] + _0x194ac2(0x5bc), _0x172433); } } return _0x563b2b; } function _0xa8ccdb(_0x19436d) { const _0x53f485 = _0x2a98b7; if (!Array[_0x53f485(0x5f8)](_0x19436d)) return _0x53f485(0x14b); if (_0x19436d['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>'; return _0x53f485(0x56e) + _0x19436d[_0x53f485(0x30c)]((_0x4b0534, _0x4220b8) => _0x53f485(0x637) + (_0x4220b8 < _0x19436d[_0x53f485(0x84b)] - 0x1 ? _0x53f485(0x5de) : '') + _0x53f485(0x657) + (_0x4b0534[_0x53f485(0x54f)] || _0x53f485(0x504)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>' + (_0x4b0534[_0x53f485(0x36b)] || '') + _0x53f485(0x121))[_0x53f485(0x602)]('') + _0x53f485(0x86f); } function _0x21750d(_0xa531d2, _0x1361d3) { const _0x164c89 = _0x2a98b7; if (!Array[_0x164c89(0x5f8)](_0xa531d2) || _0xa531d2[_0x164c89(0x84b)] === 0x0) return _0x164c89(0x358); return _0x164c89(0x56e) + _0xa531d2[_0x164c89(0x30c)]((_0x4c604b, _0x69f128) => { const _0x6fa3a2 = _0x164c89, _0x3a83e4 = JSON[_0x6fa3a2(0x49f)](_0x4c604b['log'] || [])[_0x6fa3a2(0x829)](/'/g, _0x6fa3a2(0x32c))[_0x6fa3a2(0x829)](/"/g, _0x6fa3a2(0x8ba)), _0x477838 = _0x4c604b[_0x6fa3a2(0xa50)] || '未知联系人'; return _0x6fa3a2(0x13b) + (_0x69f128 < _0xa531d2['length'] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x6fa3a2(0x5ac) + _0x3a83e4 + _0x6fa3a2(0xa56) + _0x477838 + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x1361d3 + _0x6fa3a2(0x739) + _0x477838[_0x6fa3a2(0x4b0)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x477838 + _0x6fa3a2(0x2be) + (_0x4c604b[_0x6fa3a2(0x41b)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; })[_0x164c89(0x602)]('') + '</div>'; } function _0x5a6787(_0x745510) { const _0x46776b = _0x2a98b7; if (!Array['isArray'](_0x745510)) return _0x46776b(0x14b); if (_0x745510['length'] === 0x0) return _0x46776b(0x260); return _0x745510[_0x46776b(0x419)]((_0x598172, _0x4d6edd) => new Date(_0x4d6edd['timestamp']) - new Date(_0x598172[_0x46776b(0x36b)])), _0x46776b(0x56e) + _0x745510[_0x46776b(0x30c)]((_0x4108d4, _0x497f7b) => _0x46776b(0x6d9) + (_0x497f7b < _0x745510['length'] - 0x1 ? _0x46776b(0x5de) : '') + _0x46776b(0xa66) + (_0x4108d4[_0x46776b(0xa85)] || _0x46776b(0x382)) + _0x46776b(0x5f2) + (_0x4108d4[_0x46776b(0x144)] || _0x46776b(0x67f)) + _0x46776b(0x7d8) + (_0x4108d4[_0x46776b(0x36b)] || '') + _0x46776b(0x929))[_0x46776b(0x602)]('') + _0x46776b(0x86f); } function _0x1a164d(_0x424ac6) { const _0x212d63 = _0x2a98b7; if (!Array[_0x212d63(0x5f8)](_0x424ac6)) return _0x212d63(0x14b); if (_0x424ac6['length'] === 0x0) return _0x212d63(0x653); return _0x424ac6['sort']((_0x53a31a, _0x343d3c) => new Date(_0x343d3c[_0x212d63(0x3d3)]) - new Date(_0x53a31a[_0x212d63(0x3d3)])), _0x424ac6['map'](_0x4b5198 => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>' + (_0x4b5198['title'] || _0x212d63(0x12a)) + _0x212d63(0x737) + (_0x4b5198[_0x212d63(0x9c6)] || '') + _0x212d63(0x4c0) + (_0x4b5198[_0x212d63(0x3d3)] || '') + _0x212d63(0x446))['join'](''); } function _0x2253d8(_0x3b9bfa) { const _0x15847b = _0x2a98b7; if (!Array['isArray'](_0x3b9bfa)) return _0x15847b(0x14b); if (_0x3b9bfa[_0x15847b(0x84b)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>'; return _0x3b9bfa[_0x15847b(0x419)]((_0x157ff6, _0x5d4bb0) => new Date(_0x5d4bb0[_0x15847b(0x36b)]) - new Date(_0x157ff6['timestamp'])), _0x3b9bfa[_0x15847b(0x30c)](_0x5bb5f6 => { const _0x41e973 = _0x15847b, _0x22fc3e = (_0x5bb5f6[_0x41e973(0x440)] || [])[_0x41e973(0x30c)](_0x42ab88 => _0x41e973(0x43c) + _0x42ab88 + _0x41e973(0x7ba))[_0x41e973(0x602)](''); return _0x41e973(0x206) + (_0x5bb5f6['restaurant_name'] || '未知餐厅') + _0x41e973(0x753) + (_0x5bb5f6['timestamp'] || '') + _0x41e973(0x4e0) + (_0x5bb5f6[_0x41e973(0x4ae)] || _0x41e973(0x7cc)) + _0x41e973(0x1d4) + _0x22fc3e + _0x41e973(0x5ca) + (_0x5bb5f6[_0x41e973(0x907)] || 0x0)['toFixed'](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; })[_0x15847b(0x602)](''); } function _0x41dfc3(_0x27c1fb) { const _0x1fd3ed = _0x2a98b7; if (_0x1fd3ed(0x1c5) !== _0x1fd3ed(0x744)) { if (!Array['isArray'](_0x27c1fb)) return _0x1fd3ed(0x14b); if (_0x27c1fb[_0x1fd3ed(0x84b)] === 0x0) return _0x1fd3ed(0x51d); return _0x27c1fb[_0x1fd3ed(0x419)]((_0x2fb1fd, _0x4dc175) => new Date(_0x4dc175['timestamp']) - new Date(_0x2fb1fd[_0x1fd3ed(0x36b)])), _0x27c1fb[_0x1fd3ed(0x30c)](_0x1fe6cb => _0x1fd3ed(0x610) + (_0x1fe6cb[_0x1fd3ed(0x8b5)] || _0x1fd3ed(0x36e)) + _0x1fd3ed(0x352) + (_0x1fe6cb['timestamp'] || '') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x1fe6cb[_0x1fd3ed(0x46b)] || _0x1fd3ed(0xa1c)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20' + (_0x1fe6cb[_0x1fd3ed(0x2a1)] || 0x0)[_0x1fd3ed(0x68a)](0x2) + _0x1fd3ed(0x16a))[_0x1fd3ed(0x602)](''); } else _0x2480aa[_0x1fd3ed(0x3c8)] = '', _0x3905ce['forEach'](_0x4dad58 => { const _0x2ca3b4 = _0x1fd3ed, _0x3435f7 = _0x3b08ea[_0x2ca3b4(0x597)](_0x2ca3b4(0x1d1)); _0x3435f7[_0x2ca3b4(0x2fd)] = _0x4dad58[_0x2ca3b4(0x13f)], _0x3435f7[_0x2ca3b4(0x6cb)] = 'lazy', _0x3435f7['title'] = _0x4dad58[_0x2ca3b4(0x5f1)], _0x3435f7[_0x2ca3b4(0x544)][_0x2ca3b4(0x82e)](_0x2ca3b4(0x9ba)), _0x3435f7[_0x2ca3b4(0x20b)]('click', () => _0xaa5eb6(_0x4dad58)), _0x58d061['appendChild'](_0x3435f7); }); } function _0x5d72be(_0x2cb9da) { const _0x3c3b99 = _0x2a98b7; if (!Array[_0x3c3b99(0x5f8)](_0x2cb9da)) return _0x3c3b99(0x14b); if (_0x2cb9da[_0x3c3b99(0x84b)] === 0x0) return _0x3c3b99(0x710); return _0x2cb9da['sort']((_0x5a7d8a, _0x3cbcbd) => new Date(_0x3cbcbd[_0x3c3b99(0x36b)]) - new Date(_0x5a7d8a[_0x3c3b99(0x36b)])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x2cb9da[_0x3c3b99(0x30c)](_0x147f2a => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x147f2a['location_name'] || _0x3c3b99(0x1f7)) + _0x3c3b99(0x652) + (_0x147f2a[_0x3c3b99(0x76f)] || '') + _0x3c3b99(0x962) + (_0x147f2a[_0x3c3b99(0x36b)] || '') + _0x3c3b99(0x704))[_0x3c3b99(0x602)]('') + _0x3c3b99(0x86f); } async function _0x41e3f4(_0xb882c3, _0x495a0c, _0x3f5b6a = null) { const _0x3e227e = _0x2a98b7; if (_0x3e227e(0x803) !== _0x3e227e(0x803)) _0x4c4a56 = _0x1d306b[_0x3e227e(0x597)](_0x3e227e(0x636)), _0x1da8f5['id'] = _0x3e227e(0x48e), _0x3597ae[_0x3e227e(0x506)][_0x3e227e(0x329)](_0x56adf8); else { const _0x16faf1 = _0x389a36(_0x495a0c), _0x4e4ffb = _0x4025fd[_0x3e227e(0x132)][_0x3e227e(0x32b)](_0x58d0d7 => _0x58d0d7[_0x3e227e(0xaa2)] === _0x3e227e(0x258) && _0x58d0d7[_0x3e227e(0x2db)]['includes'](_0x495a0c)), _0x44f0d4 = _0x25fa5a(_0x4e4ffb?.['id'] || _0x4025fd[_0x3e227e(0xa4d)]); if (!_0x16faf1) throw new Error(_0x3e227e(0x534)); const { omniText: _0x3ceb5 } = _0x204d24(_0x495a0c); let _0x5b414d = ''; const _0x3f3f1c = new Date(), _0x59094e = _0x187331(_0x495a0c); _0x5b414d = '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', _0x5b414d += _0x3e227e(0x237) + _0x3f3f1c[_0x3e227e(0x8de)](_0x3e227e(0x838), { 'dateStyle': _0x3e227e(0x147), 'timeStyle': _0x3e227e(0x2ab) }) + '\x0a'; if (_0x59094e) { const _0x1fbfd5 = new Date(_0x59094e['timestamp']), _0x2bdd5c = _0x144234(_0x1fbfd5); _0x5b414d += _0x3e227e(0x2f8) + _0x2bdd5c + '\x0a'; const _0x3443dc = _0x3f3f1c[_0x3e227e(0xa2a)](), _0x59e288 = _0x1fbfd5[_0x3e227e(0xa2a)](), _0x51bb5d = new Date(); _0x51bb5d[_0x3e227e(0x72a)](_0x3f3f1c[_0x3e227e(0x1f6)]() - 0x1); const _0xd4d775 = _0x51bb5d['toDateString'](); if (_0x3443dc === _0x59e288) { if (_0x3e227e(0x677) !== 'nIQNP') { const _0x36fd2e = (_0x3f3f1c - _0x1fbfd5) / (0x3e8 * 0x3c); if (_0x36fd2e < 0x3c) { if (_0x3e227e(0x70a) !== _0x3e227e(0x6a5)) _0x5b414d += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; else { const _0x32d2b8 = _0x5be92e[_0x3e227e(0x859)]?.['includes'](_0x518207['id']), _0x3bd8eb = _0xb74c8f[_0x3e227e(0x597)](_0x3e227e(0x525)); _0x3bd8eb['innerHTML'] = _0x3e227e(0x751) + _0x2530e5['id'] + '\x22\x20' + (_0x32d2b8 ? 'checked' : '') + '>\x20' + _0x2793b6['name'], _0x38ced6[_0x3e227e(0x329)](_0x3bd8eb); } } else _0x5b414d += _0x3e227e(0x3ac) + Math[_0x3e227e(0xa05)](_0x36fd2e / 0x3c) + _0x3e227e(0x9ca); } else { if (_0x58d1c3) { const _0x91e1c2 = _0xbd6836['createObjectURL'](_0x5a3994); _0x6b749c[_0x3e227e(0x2fd)] = _0x91e1c2, _0x2af1ad[_0x3e227e(0x422)] = () => { const _0x3fb094 = _0x3e227e; _0x27ecf3[_0x3fb094(0x883)](_0x91e1c2); }; } else _0x51d3ee[_0x3e227e(0x339)] = _0x3e227e(0x491); } } else { if (_0xd4d775 === _0x59e288) _0x5b414d += _0x3e227e(0x2f4); else { if (_0x3e227e(0x738) === 'ZabVr') { const _0x46b14e = Math[_0x3e227e(0xa05)]((_0x3f3f1c - _0x1fbfd5) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5b414d += _0x3e227e(0x385) + _0x46b14e + _0x3e227e(0x96b); } else { if (_0x4071e6['type'] === _0x3e227e(0x866)) _0x5a5530[_0x3e227e(0x3e5)](); _0x54c99d(_0x167695); } } } } else _0x5b414d += _0x3e227e(0x836); let _0x5404b9 = '', _0x1f3194 = ''; _0x3f5b6a ? (_0x5404b9 = _0x3e227e(0x7e7), _0x1f3194 = _0x3e227e(0x979) + _0x3f5b6a + _0x3e227e(0x24e)) : _0x5404b9 = _0x3e227e(0x624); const _0x317059 = { 'gallery': _0x3e227e(0x73f), 'whispers': _0x3e227e(0x4f3), 'abyss': _0x3e227e(0x5af), 'fragments': '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'bites': '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'wants': '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'footprints': _0x3e227e(0x785) }, _0x478d2f = _0x317059[_0xb882c3] || '#\x20任务:\x20生成\x20' + _0xb882c3 + _0x3e227e(0x62a); let _0x3088d2 = ''; if (_0x16faf1['linkedWorldBookIds'] && _0x16faf1[_0x3e227e(0x859)][_0x3e227e(0x84b)] > 0x0) { const _0x319658 = _0x16faf1[_0x3e227e(0x859)]['map'](_0xd8af23 => _0x4025fd[_0x3e227e(0xa3c)][_0x3e227e(0x32b)](_0x5a9a5f => _0x5a9a5f['id'] === _0xd8af23))[_0x3e227e(0x1f9)](Boolean)[_0x3e227e(0x30c)](_0x142694 => _0x3e227e(0x745) + _0x142694[_0x3e227e(0x5f1)] + '\x0a' + _0x142694[_0x3e227e(0x9c6)])['join'](''); _0x319658 && (_0x3088d2 = _0x3e227e(0x5d7) + _0x319658); } const _0x199708 = _0x3e227e(0x81b) + _0x16faf1[_0x3e227e(0x5f1)] + _0x3e227e(0x707) + _0x16faf1[_0x3e227e(0x5f1)] + _0x3e227e(0x502) + _0x44f0d4['name'] + _0x3e227e(0x559) + _0x16faf1[_0x3e227e(0x5f1)] + '\x0a-\x20人设:\x20' + _0x16faf1['persona'] + '\x0a' + _0x3088d2 + _0x3e227e(0x509) + _0x44f0d4[_0x3e227e(0x5f1)] + '\x0a-\x20人设:\x20' + _0x44f0d4[_0x3e227e(0x8ad)] + '\x0a\x0a' + _0x5b414d + _0x3e227e(0x24b) + _0x3ceb5 + '\x0a' + _0x1f3194 + _0x3e227e(0x45c) + _0x478d2f + _0x3e227e(0x29f), _0x507092 = [{ 'role': _0x3e227e(0x6f9), 'content': _0x199708 }], _0x39f96f = await _0x414037(_0x507092, { 'json': !![] }); return _0x39f96f; } } async function _0x49935e(_0x36ec58) { const _0x28df6c = _0x2a98b7; if (_0x28df6c(0x3e7) === 'AozRS') { const _0x50a4b4 = _0x389a36(_0x36ec58); if (!_0x50a4b4) throw new Error(_0x28df6c(0x804)); _0x32d19f(!![], _0x28df6c(0x1a5)); const _0x4825f4 = ['gallery', _0x28df6c(0x6a7), _0x28df6c(0x152), _0x28df6c(0x3cc), _0x28df6c(0x950), 'wants', _0x28df6c(0x6af)]; let _0x5b064f = {}; await Promise[_0x28df6c(0x50c)](_0x4825f4[_0x28df6c(0x30c)](async _0x69f0c9 => { const _0x57e595 = _0x28df6c, _0x2456d8 = _0x57e595(0x2d6) + _0x36ec58 + '_' + _0x69f0c9, _0x14c018 = await _0x68b1d8(_0x2456d8); if (_0x14c018) { if ('CWblE' !== 'CWblE') try { _0x1e0d2c[_0x4a8237] = _0x17084f[_0x57e595(0x93f)](_0x45632c); } catch (_0x383b6) { } else try { _0x5b064f[_0x69f0c9] = JSON[_0x57e595(0x93f)](_0x14c018); } catch (_0x2e919f) { } } })); if (Object[_0x28df6c(0x8f4)](_0x5b064f)['length'] === 0x0) return _0x28df6c(0x347); const _0x444386 = _0x28df6c(0x708) + _0x50a4b4[_0x28df6c(0x5f1)] + _0x28df6c(0x2d3), _0x37966d = [{ 'role': _0x28df6c(0x6f9), 'content': _0x444386 }, { 'role': _0x28df6c(0x880), 'content': JSON[_0x28df6c(0x49f)](_0x5b064f, null, 0x2) }]; _0x32d19f(!![], _0x28df6c(0x908)); const _0x4423ed = await _0x414037(_0x37966d); return _0x4423ed || 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。'; } else _0xd7b81c[_0x28df6c(0x3e5)](); } async function _0x49935e(_0x528ea7) { const _0x34a953 = _0x2a98b7, _0x29335c = _0x389a36(_0x528ea7); if (!_0x29335c) throw new Error(_0x34a953(0x804)); try { _0x32d19f(!![], _0x34a953(0x1a5)); const _0x1b20b5 = [_0x34a953(0xaa7), _0x34a953(0x6a7), _0x34a953(0x152), _0x34a953(0x3cc), _0x34a953(0x950), _0x34a953(0x4b8), _0x34a953(0x6af)]; let _0x136efc = {}; await Promise['all'](_0x1b20b5[_0x34a953(0x30c)](async _0x293572 => { const _0x23990d = _0x34a953; if (_0x23990d(0x936) !== _0x23990d(0x628)) { const _0x327976 = _0x23990d(0x2d6) + _0x528ea7 + '_' + _0x293572, _0x552148 = await _0x68b1d8(_0x327976); if (_0x552148) try { _0x136efc[_0x293572] = JSON['parse'](_0x552148); } catch (_0x1f83bf) { } } else { let _0xda92d2 = null; const _0x14e5b4 = _0x25d541[_0x23990d(0x132)][_0x23990d(0x1f9)](_0x7e91a3 => _0x7e91a3['participantIds'][_0x23990d(0x9f1)](_0x3a150b)); for (const _0x3440d7 of _0x14e5b4) { const _0x3e4ec2 = _0xd87850(_0x3440d7['id']); if (_0x3e4ec2 && _0x3e4ec2['length'] > 0x0) { const _0x227cd5 = _0x3e4ec2[_0x3e4ec2[_0x23990d(0x84b)] - 0x1]; (!_0xda92d2 || _0x227cd5['timestamp'] > _0xda92d2[_0x23990d(0x36b)]) && (_0xda92d2 = _0x227cd5); } } return _0xda92d2; } })); if (Object[_0x34a953(0x8f4)](_0x136efc)[_0x34a953(0x84b)] === 0x0) return _0x34a953(0x347); const _0x273a0e = _0x34a953(0x708) + _0x29335c['name'] + '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', _0x3d21a3 = [{ 'role': 'system', 'content': _0x273a0e }, { 'role': 'user', 'content': JSON[_0x34a953(0x49f)](_0x136efc, null, 0x2) }]; _0x32d19f(!![], _0x34a953(0x908)); const _0x66a5ce = await _0x414037(_0x3d21a3); return _0x66a5ce || _0x34a953(0x4bf); } finally { _0x32d19f(![]); } } document[_0x2a98b7(0x4b6)](_0x2a98b7(0x951))[_0x2a98b7(0x20b)](_0x2a98b7(0xab8), () => _0x102967('home', _0x2a98b7(0x57f))), document['getElementById'](_0x2a98b7(0x698))[_0x2a98b7(0x20b)]('click', () => { const _0x145abd = _0x2a98b7; document[_0x145abd(0x4b6)](_0x145abd(0x494))[_0x145abd(0x636)][_0x145abd(0x6c5)] = _0x145abd(0x55f), _0x102967(_0x145abd(0x57f), _0x145abd(0x88b)); }), _0x26f904(); }); async function _0x933c2f() { const _0xd3dfc9 = _0x359829; console[_0xd3dfc9(0x66c)]('---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---'), console[_0xd3dfc9(0x66c)](_0xd3dfc9(0x4bd)); async function _0x3ce819(_0x34195b, _0x1f7e9d) { const _0x2e9d73 = await _0x1e4979; return new Promise((_0x52b889, _0x1da8ba) => { const _0x5af98c = _0x2f04; if ('VSiCu' !== 'VSiCu') { const _0x27fdcb = _0x34509f[_0x5af98c(0x9b0)][_0x5af98c(0x32b)](_0x2b1ad8 => _0x2b1ad8['id'] === _0x4ab96e[_0x5af98c(0x31a)]), _0x370562 = _0x3894fc(); let _0x33c73d = []; if (_0x27fdcb && _0x27fdcb['posts']) { const _0x7929b9 = _0x27fdcb[_0x5af98c(0x13e)][_0x5af98c(0x1f9)](_0x4916cf => _0x4916cf[_0x5af98c(0xaa2)] === 'music' && _0x4916cf[_0x5af98c(0x22c)])[_0x5af98c(0x30c)](_0x40d1ce => ({ ..._0x40d1ce, 'source': _0x5af98c(0x73a) })); _0x33c73d['push'](..._0x7929b9); } if (_0x370562 && _0x2b04fc[_0x5af98c(0x24a)]) { const _0x1171c6 = _0x43590c[_0x5af98c(0x24a)][_0x5af98c(0x1f9)](_0x4b4e8e => _0x4b4e8e[_0x5af98c(0xaa2)] === _0x5af98c(0x43a) && _0x4b4e8e[_0x5af98c(0x22c)])['map'](_0x2d47ea => ({ ..._0x2d47ea, 'source': _0x5af98c(0x651) })); _0x33c73d[_0x5af98c(0x65b)](..._0x1171c6); } const _0x447183 = _0x2d2bfa['from'](new _0x29a63a(_0x33c73d[_0x5af98c(0x30c)](_0x42d936 => [_0x42d936[_0x5af98c(0x22c)], _0x42d936]))['values']()); _0x2284b7[_0x5af98c(0x34a)] = _0x447183['sort']((_0x1af883, _0x165ce5) => _0x165ce5[_0x5af98c(0x36b)] - _0x1af883[_0x5af98c(0x36b)]); } else { const _0x59bab8 = _0x2e9d73[_0x5af98c(0x287)](_0x1f7efd, _0x5af98c(0x431)), _0xe443a3 = _0x59bab8[_0x5af98c(0x301)](_0x1f7efd), _0x484b37 = _0xe443a3[_0x5af98c(0x6e5)]({ 'id': _0x34195b, 'blob': _0x1f7e9d }); _0x484b37[_0x5af98c(0x62f)] = () => _0x52b889(_0x484b37[_0x5af98c(0x8e8)]), _0x484b37[_0x5af98c(0x8ec)] = () => _0x1da8ba(_0x484b37['error']); } }); } async function _0x45a305(_0xb66587) { const _0x5877e5 = _0xd3dfc9; if (_0x5877e5(0x8d9) !== _0x5877e5(0x553)) { const _0x1ae44c = await _0x1e4979; return new Promise((_0x45c102, _0x7190b9) => { const _0x4fa0bc = _0x5877e5, _0x5c8736 = _0x1ae44c[_0x4fa0bc(0x287)](_0x569363, _0x4fa0bc(0x812)), _0x20edac = _0x5c8736[_0x4fa0bc(0x301)](_0x569363), _0x299763 = _0x20edac[_0x4fa0bc(0x23f)](_0xb66587); _0x299763[_0x4fa0bc(0x62f)] = () => _0x45c102(_0x299763[_0x4fa0bc(0x8e8)] ? _0x299763[_0x4fa0bc(0x8e8)][_0x4fa0bc(0x822)] : null), _0x299763[_0x4fa0bc(0x8ec)] = () => _0x7190b9(_0x299763[_0x4fa0bc(0x963)]); }); } else { const _0x4c5d72 = _0x2a7d7b[_0x5877e5(0xa7f)](_0x2394bf); if (_0x4c5d72) _0x3b6288[_0x5877e5(0x916)][_0x4c5d72] = _0x1220b9[_0x5877e5(0x47c)](_0x4c5d72); } } async function _0x152a18(_0x114f39, _0x506205) { const _0x17ba39 = _0xd3dfc9; if (_0x17ba39(0xa9d) !== _0x17ba39(0xa9d)) { const _0x5009ec = { 'id': 'wb_' + _0x5b3746['now'](), 'name': _0x25bea7, 'content': _0x299a2b }; _0x5e6e1b[_0x17ba39(0xa3c)][_0x17ba39(0x65b)](_0x5009ec); } else { const _0x520f2c = await _0x1e4979; return new Promise((_0x4db847, _0x1960d5) => { const _0x48b9fe = _0x17ba39, _0x496edc = _0x520f2c[_0x48b9fe(0x287)](_0x569363, _0x48b9fe(0x431)), _0x317abd = _0x496edc[_0x48b9fe(0x301)](_0x569363), _0x34c1a6 = _0x317abd[_0x48b9fe(0x6e5)]({ 'id': _0x114f39, 'data': _0x506205 }); _0x34c1a6[_0x48b9fe(0x62f)] = () => _0x4db847(), _0x34c1a6[_0x48b9fe(0x8ec)] = () => _0x1960d5(_0x34c1a6[_0x48b9fe(0x963)]); }); } } function _0x35f28d(_0x1a1854) { const _0xe18af9 = _0xd3dfc9; return fetch(_0x1a1854)[_0xe18af9(0x4ea)](_0x5031cc => _0x5031cc['blob']()); } let _0x323888 = 0x0; for (let _0x50f839 = 0x0; _0x50f839 < localStorage[_0xd3dfc9(0x84b)]; _0x50f839++) { if (_0xd3dfc9(0x58d) !== 'KlpTd') { const _0x2ac43b = localStorage[_0xd3dfc9(0xa7f)](_0x50f839); if (_0x2ac43b && _0x2ac43b['startsWith'](_0xd3dfc9(0x8ab))) { if (_0xd3dfc9(0x980) === 'mpGHv') { let _0x36833f, _0x2583eb = ![]; try { _0x36833f = JSON[_0xd3dfc9(0x93f)](localStorage[_0xd3dfc9(0x47c)](_0x2ac43b)); if (!Array[_0xd3dfc9(0x5f8)](_0x36833f)) continue; for (const _0x5554c6 of _0x36833f) { if (_0x5554c6 && _0x5554c6[_0xd3dfc9(0x3b9)] && _0x5554c6[_0xd3dfc9(0x3b9)]['startsWith'](_0xd3dfc9(0x39e))) { const _0x4164ce = await _0x35f28d(_0x5554c6[_0xd3dfc9(0x3b9)]), _0x2551be = _0xd3dfc9(0x992) + Date[_0xd3dfc9(0x98c)]() + '_' + Math[_0xd3dfc9(0x59e)](); await _0x3ce819(_0x2551be, _0x4164ce), _0x5554c6[_0xd3dfc9(0x3c7)] = _0x2551be, delete _0x5554c6[_0xd3dfc9(0x3b9)], _0x2583eb = !![], _0x323888++; } } _0x2583eb && (_0xd3dfc9(0x193) === 'JXNRT' ? _0x46aa24('确定要恢复这个角色的默认立绘位置吗？')[_0xd3dfc9(0x4ea)](_0x2c4a2b => { const _0x416f08 = _0xd3dfc9; if (_0x2c4a2b) { const _0x47b46f = _0x12add9(_0x2d2d12[_0x416f08(0xa4e)]); _0x47b46f && (delete _0x47b46f[_0x416f08(0x48a)], _0x1fc47d(), _0x3dbbb4(_0x47b46f['id'], _0x416f08(0x72b)), _0x53800d(_0x416f08(0x81f)), _0x29ce28(!![])); } }) : localStorage[_0xd3dfc9(0x5f0)](_0x2ac43b, JSON[_0xd3dfc9(0x49f)](_0x36833f))); } catch (_0x567fc3) { if (_0xd3dfc9(0x5a2) === _0xd3dfc9(0x791)) _0x1116d1[_0xd3dfc9(0x31a)] && _0x96b448(_0x51a4a0[_0xd3dfc9(0x31a)]); else { console[_0xd3dfc9(0x963)](_0xd3dfc9(0x183) + _0x2ac43b + _0xd3dfc9(0x264), _0x567fc3); continue; } } } else _0x13dd6a[_0xd3dfc9(0xa7f)] === _0xd3dfc9(0x8cc) && !_0x2a2233[_0xd3dfc9(0x8c9)] && (_0x5e3644[_0xd3dfc9(0x3e5)](), _0x3b4dc8()); } } else _0x5b0b86['worldBooks'] = _0x49d004[_0xd3dfc9(0xa3c)]; } console[_0xd3dfc9(0x66c)](_0xd3dfc9(0x65e) + _0x323888 + '\x20张旧图片。'); } async function _0x3426f8() { const _0x5cc0c9 = _0x359829; console[_0x5cc0c9(0x66c)](_0x5cc0c9(0x2f0)), console[_0x5cc0c9(0x66c)](_0x5cc0c9(0x34e)); async function _0x4da61d(_0x528388, _0x377d5a) { const _0x1c6ad5 = _0x5cc0c9; if (_0x1c6ad5(0x29b) !== _0x1c6ad5(0x8ed)) { const _0x479b57 = await _0x1e4979; return new Promise((_0x155d37, _0x4b4228) => { const _0x4fa835 = _0x1c6ad5; if (_0x4fa835(0x17c) === _0x4fa835(0x17c)) { const _0x1d37d9 = _0x479b57[_0x4fa835(0x287)](_0x4fa835(0x430), _0x4fa835(0x431)), _0x18eb3f = _0x1d37d9[_0x4fa835(0x301)]('images'), _0x3cff67 = _0x18eb3f[_0x4fa835(0x6e5)]({ 'id': _0x528388, 'blob': _0x377d5a }); _0x3cff67[_0x4fa835(0x62f)] = () => _0x155d37(_0x3cff67[_0x4fa835(0x8e8)]), _0x3cff67[_0x4fa835(0x8ec)] = () => _0x4b4228(_0x3cff67[_0x4fa835(0x963)]); } else _0x1b8cb7['style'][_0x4fa835(0x6c5)] = 'block', _0x4ebf98['style'][_0x4fa835(0x6c5)] = _0x4fa835(0x55f); }); } else return _0x144713[_0x1c6ad5(0x963)](_0x1c6ad5(0x330), _0x5b6540), _0x1a2541[_0x1c6ad5(0x963)](_0x1c6ad5(0x766), _0x40ffc4['rawResponse'] || 'AI返回了无法解析的文本'), null; } function _0x5c88f7(_0x243b18) { const _0x1b1f07 = _0x5cc0c9; if (_0x1b1f07(0x77e) === 'btqww') _0x3f65cc['error'](_0x1b1f07(0x850), _0x3ba1d2), _0x5465bc[_0x1b1f07(0x2fd)] = ''; else return fetch(_0x243b18)[_0x1b1f07(0x4ea)](_0x3e1115 => _0x3e1115[_0x1b1f07(0x433)]()); } let _0x631bdf = 0x0, _0x5af9f9 = ![]; try { const _0x4654a6 = localStorage[_0x5cc0c9(0x47c)](_0x5cc0c9(0xa8a)); if (!_0x4654a6) { console['log'](_0x5cc0c9(0x42c)); return; } const _0x5220aa = JSON[_0x5cc0c9(0x93f)](_0x4654a6); if (!_0x5220aa[_0x5cc0c9(0x9b0)] || !Array['isArray'](_0x5220aa['friendCircles'])) { if ('qIAUP' === _0x5cc0c9(0x53c)) return; else { const _0x2a03e9 = _0x57d591['createElement']('label'); _0x2a03e9[_0x5cc0c9(0x3c8)] = _0x5cc0c9(0x751) + _0x4260e9['id'] + _0x5cc0c9(0x376) + _0x52b346['name'], _0x13faef[_0x5cc0c9(0x329)](_0x2a03e9); } } for (const _0x52dd0c of _0x5220aa[_0x5cc0c9(0x9b0)]) { if (_0x52dd0c[_0x5cc0c9(0x13e)] && Array['isArray'](_0x52dd0c[_0x5cc0c9(0x13e)])) for (const _0x5ca072 of _0x52dd0c[_0x5cc0c9(0x13e)]) { if (_0x5cc0c9(0x7a6) === _0x5cc0c9(0x7a6)) { if (_0x5ca072 && _0x5ca072[_0x5cc0c9(0x3b9)] && _0x5ca072['image']['startsWith'](_0x5cc0c9(0x39e))) { if (_0x5cc0c9(0x154) === _0x5cc0c9(0x154)) { console['log']('在好友圈\x20\x22' + _0x52dd0c[_0x5cc0c9(0x5f1)] + '\x22\x20中发现一张需要净化的图片...'); const _0x4907b6 = await _0x5c88f7(_0x5ca072[_0x5cc0c9(0x3b9)]), _0x15de79 = 'post_image_migrated_' + Date[_0x5cc0c9(0x98c)]() + '_' + Math[_0x5cc0c9(0x59e)](); await _0x4da61d(_0x15de79, _0x4907b6), _0x5ca072[_0x5cc0c9(0x3c7)] = _0x15de79, delete _0x5ca072[_0x5cc0c9(0x3b9)], _0x5af9f9 = !![], _0x631bdf++; } else { const _0x3f93b7 = []; for (const _0x194641 of _0x434803[_0x5cc0c9(0x8f4)](_0x57af11)) { const _0x247fd2 = _0x194641['toLowerCase'](); if (_0x374f43['some'](_0x3f31f4 => _0x247fd2['startsWith'](_0x3f31f4))) { const _0x2b89f4 = _0x5c7803[_0x194641]; if (typeof _0x2b89f4 === _0x5cc0c9(0x90a)) _0x3f93b7[_0x5cc0c9(0x65b)](_0x2b89f4); if (_0x2dbadf[_0x5cc0c9(0x5f8)](_0x2b89f4)) _0x2b89f4[_0x5cc0c9(0x6ff)](_0x265d8c => { const _0x2ba184 = _0x5cc0c9; if (typeof _0x265d8c === 'string') _0x3f93b7[_0x2ba184(0x65b)](_0x265d8c); }); } } if (_0x3f93b7[_0x5cc0c9(0x84b)]) return _0x3f93b7[_0x5cc0c9(0xa5f)](_0x265e9c)['slice'](0x0, 0x9); } } } else { _0x3696b0(![]), _0xe05601('错误：找不到这首作为“信物”的歌。'); return; } } } _0x5af9f9 && (_0x5cc0c9(0xa70) !== _0x5cc0c9(0xa70) ? (_0x41ce49 = _0x281169[_0x5cc0c9(0x597)](_0x5cc0c9(0x80e)), _0x160163[_0x5cc0c9(0x575)] = _0x5cc0c9(0x5c7), _0x53bd44['textContent'] = _0x5cc0c9(0x40e), _0x1c9250[_0x5cc0c9(0x636)][_0x5cc0c9(0x4b3)] = 'rgba(0,\x200,\x200,\x200.4)', _0x17dd0e[_0x5cc0c9(0x636)][_0x5cc0c9(0x997)] = _0x5cc0c9(0x2b3), _0x9bdf03[_0x5cc0c9(0x636)][_0x5cc0c9(0x244)] = _0x5cc0c9(0x4dd), _0x3780fc[_0x5cc0c9(0x329)](_0x33a916)) : (console[_0x5cc0c9(0x66c)](_0x5cc0c9(0x8b9)), localStorage[_0x5cc0c9(0x5f0)](_0x5cc0c9(0xa8a), JSON[_0x5cc0c9(0x49f)](_0x5220aa)))); } catch (_0x23418c) { console[_0x5cc0c9(0x963)]('净化好友圈时出错，真是的。', _0x23418c); } return console['log'](_0x5cc0c9(0x33b)), console[_0x5cc0c9(0x66c)](_0x5cc0c9(0x290) + _0x631bdf + '\x20张旧的动态图片。'), _0x631bdf; } async function _0x3f9737() { const _0x4b90b5 = _0x359829; console[_0x4b90b5(0x66c)]('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'), console[_0x4b90b5(0x66c)](_0x4b90b5(0x9a7)); let _0x3f16a5 = 0x0, _0xbc2d93 = ![]; try { const _0x3193a9 = localStorage[_0x4b90b5(0x47c)](_0x4b90b5(0xa8a)); if (!_0x3193a9) return _0x4b90b5(0x91f) !== 'bVwRr' ? new _0x3b6917((_0x5c366c, _0x25ab7d) => { const _0x156189 = _0x4b90b5, _0x349e6b = new _0x118d17(); _0x349e6b['onloadend'] = () => _0x5c366c(_0x349e6b[_0x156189(0x8e8)]), _0x349e6b[_0x156189(0x8ec)] = _0x25ab7d, _0x349e6b[_0x156189(0x2e3)](_0x2398ce); }) : (console['log']('聊天档案柜是空的，无需净化。'), 0x0); for (let _0x4f3354 = 0x0; _0x4f3354 < localStorage[_0x4b90b5(0x84b)]; _0x4f3354++) { const _0x414a22 = localStorage[_0x4b90b5(0xa7f)](_0x4f3354); if (_0x414a22 && _0x414a22[_0x4b90b5(0x914)]('chatHistory_')) { let _0x3d9667, _0x1d9644 = ![]; try { if (_0x4b90b5(0x531) !== _0x4b90b5(0x18e)) { _0x3d9667 = JSON['parse'](localStorage[_0x4b90b5(0x47c)](_0x414a22)); if (!Array[_0x4b90b5(0x5f8)](_0x3d9667)) continue; for (const _0xc5e7a4 of _0x3d9667) { if ('LdNNT' !== 'LdNNT') _0x5f3bdd('导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a' + _0x28db7c[_0x4b90b5(0x602)]('\x0a')); else { if (_0xc5e7a4 && (_0xc5e7a4[_0x4b90b5(0xaa2)] === _0x4b90b5(0x43a) || _0xc5e7a4['type'] === 'listen-together-invite') && _0xc5e7a4[_0x4b90b5(0x3ad)] && _0xc5e7a4[_0x4b90b5(0x3ad)][_0x4b90b5(0x914)](_0x4b90b5(0x39e))) { const _0x3ce300 = await _0x22dea8(_0xc5e7a4[_0x4b90b5(0x3ad)]), _0x2e1f44 = _0x4b90b5(0x54c) + Date[_0x4b90b5(0x98c)]() + '_' + Math[_0x4b90b5(0x59e)](); await _0x5a7151(_0x2e1f44, _0x3ce300), _0xc5e7a4['coverId'] = _0x2e1f44, delete _0xc5e7a4[_0x4b90b5(0x3ad)], _0x1d9644 = !![], _0x3f16a5++; } } } _0x1d9644 && (_0x4b90b5(0x202) === _0x4b90b5(0x202) ? localStorage[_0x4b90b5(0x5f0)](_0x414a22, JSON['stringify'](_0x3d9667)) : _0xe0b07f[_0x4b90b5(0x95e)] = ''); } else _0x2eccb2 = _0x310e70[_0x4b90b5(0x3b9)]; } catch (_0x214b34) { console['error']('处理\x20' + _0x414a22 + _0x4b90b5(0x996), _0x214b34); continue; } } } } catch (_0x3b5f32) { if (_0x4b90b5(0x53f) === _0x4b90b5(0x735)) { _0x540f5a[_0x4b90b5(0x3c8)] = _0x4b90b5(0x7ca); return; } else console[_0x4b90b5(0x963)](_0x4b90b5(0x364), _0x3b5f32); } return console['log']('---\x20音乐净化仪式完成\x20---'), console[_0x4b90b5(0x66c)](_0x4b90b5(0x290) + _0x3f16a5 + _0x4b90b5(0x35d)), _0x3f16a5; } function _0x2f04(_0x1e165b, _0x2ece8b) { const _0x27bb2e = _0x27bb(); return _0x2f04 = function (_0x2f044, _0x17fffe) { _0x2f044 = _0x2f044 - 0x11b; let _0x37c9ac = _0x27bb2e[_0x2f044]; return _0x37c9ac; }, _0x2f04(_0x1e165b, _0x2ece8b); } function _0x48c69b() { const _0xd35666 = _0x359829; if (!_0x4025fd[_0xd35666(0x7a3)]) return _0x4025fd[_0xd35666(0x293)]['find'](_0x5a87ce => _0x5a87ce['id'] === _0x4025fd[_0xd35666(0x4a1)]) || _0x4025fd['userProfiles'][0x0]; const _0x4d0225 = _0x4025fd[_0xd35666(0x132)][_0xd35666(0x32b)](_0x12a22f => _0x12a22f[_0xd35666(0xaa2)] === _0xd35666(0x258) && _0x12a22f['participantIds'][_0xd35666(0x9f1)](_0x4025fd[_0xd35666(0x7a3)])), _0x4f6cc0 = _0x4d0225?.[_0xd35666(0x774)] || _0x4025fd[_0xd35666(0x4a1)]; return _0x4025fd[_0xd35666(0x293)][_0xd35666(0x32b)](_0x17c675 => _0x17c675['id'] === _0x4f6cc0) || _0x4025fd[_0xd35666(0x293)][0x0]; } function _0x144234(_0x555e0c) { const _0x23e944 = _0x359829, _0x494da5 = new Date(), _0x8e2366 = _0x494da5 - _0x555e0c, _0x435288 = Math[_0x23e944(0xa05)](_0x8e2366 / 0x3e8), _0x559841 = Math[_0x23e944(0xa05)](_0x435288 / 0x3c), _0x486a6c = Math[_0x23e944(0xa05)](_0x559841 / 0x3c), _0x452064 = Math['round'](_0x486a6c / 0x18), _0x4c0d89 = _0x555e0c[_0x23e944(0x70c)](_0x23e944(0x838), { 'hour': _0x23e944(0x87a), 'minute': '2-digit' }); if (_0x435288 < 0x3c) return '刚才'; if (_0x559841 < 0x3c) return _0x559841 + _0x23e944(0x722); const _0x5350ca = _0x494da5['toDateString']() === _0x555e0c['toDateString'](); if (_0x5350ca) return '今天\x20' + _0x4c0d89; const _0x4e6984 = new Date(); _0x4e6984['setDate'](_0x494da5['getDate']() - 0x1); const _0x46b814 = _0x4e6984[_0x23e944(0xa2a)]() === _0x555e0c[_0x23e944(0xa2a)](); if (_0x46b814) { if (_0x23e944(0x5dd) !== 'WJwvb') return '昨天\x20' + _0x4c0d89; else _0x9bba3c['chats'] = _0x1444d1[_0x23e944(0x132)], _0x5e9ae1[_0x23e944(0xa4d)] = _0xd9b0f9[_0x23e944(0xa4d)] || null; } if (_0x452064 <= 0x7) { const _0x14f4b3 = ['星期日', _0x23e944(0x8bb), _0x23e944(0x671), _0x23e944(0x410), '星期四', _0x23e944(0x79c), '星期六']; return _0x14f4b3[_0x555e0c[_0x23e944(0x94e)]()] + '\x20' + _0x4c0d89; } return _0x555e0c[_0x23e944(0x554)]() + '年' + (_0x555e0c[_0x23e944(0x720)]() + 0x1) + '月' + _0x555e0c[_0x23e944(0x1f6)]() + '日'; } function _0x245ee4(_0x235807, _0x585ebe = 0x320, _0x29543e = 0.8, _0x9175fc = ![]) { return new Promise((_0x4b29a6, _0x56180a) => { const _0x336998 = _0x2f04; if (!_0x235807 || !_0x235807[_0x336998(0xaa2)][_0x336998(0x914)]('image/')) { if ('JUlpJ' === _0x336998(0x64c)) _0x272d94[_0x336998(0x636)]['backgroundImage'] = _0x336998(0x314) + _0xefe3c[_0x336998(0x798)](_0x5f57db) + '\x27)', _0xe53b03[_0x336998(0x636)][_0x336998(0x799)] = _0x336998(0x549), _0xe9f18['style'][_0x336998(0x90b)] = _0x336998(0x5c1); else return _0x56180a(new Error(_0x336998(0x45a))); } const _0x45adc6 = new FileReader(); _0x45adc6[_0x336998(0x2e3)](_0x235807), _0x45adc6[_0x336998(0x422)] = _0x292769 => { const _0x3a15f0 = _0x336998; if ('hiYfl' === _0x3a15f0(0x5ec)) { const _0x410282 = new Image(); _0x410282[_0x3a15f0(0x2fd)] = _0x292769[_0x3a15f0(0x492)][_0x3a15f0(0x8e8)], _0x410282[_0x3a15f0(0x422)] = () => { const _0x1bef49 = _0x3a15f0, _0x378639 = document['createElement'](_0x1bef49(0x4d8)); let _0x529ec4 = _0x410282[_0x1bef49(0x6f0)], _0x2495af = _0x410282[_0x1bef49(0x6b0)]; _0x529ec4 > _0x2495af ? _0x529ec4 > _0x585ebe && (_0x1bef49(0x42a) !== _0x1bef49(0x42a) ? (_0x1d3d97(), _0x299768(_0x1bef49(0x2c9), _0x1bef49(0x786))) : (_0x2495af *= _0x585ebe / _0x529ec4, _0x529ec4 = _0x585ebe)) : _0x2495af > _0x585ebe && (_0x1bef49(0x283) !== _0x1bef49(0x3fd) ? (_0x529ec4 *= _0x585ebe / _0x2495af, _0x2495af = _0x585ebe) : _0x3c173c[_0x1bef49(0x4b6)]('snoop-app-refresh-btn')[_0x1bef49(0x20b)](_0x1bef49(0xab8), async () => { _0x3c57de(_0x3a9b48, _0x38908b, !![]); })); _0x378639[_0x1bef49(0x6f0)] = _0x529ec4, _0x378639[_0x1bef49(0x6b0)] = _0x2495af; const _0x293cf0 = _0x378639[_0x1bef49(0x3e2)]('2d'); _0x293cf0[_0x1bef49(0x67a)](_0x410282, 0x0, 0x0, _0x529ec4, _0x2495af); const _0xe5ecbf = _0x235807[_0x1bef49(0xaa2)] === _0x1bef49(0x165) ? _0x1bef49(0x165) : _0x1bef49(0x3ea); _0x9175fc ? _0x378639[_0x1bef49(0x423)](_0x2c4e6c => { const _0x206cfc = _0x1bef49; if (_0x2c4e6c) _0x4b29a6(_0x2c4e6c); else { if ('DjBah' !== _0x206cfc(0x5a6)) { _0xe0f37b = _0x578727(_0x45b056); if (!_0x437b69) throw new _0xda0f67(_0x206cfc(0x216)); _0x1f546a[_0x206cfc(0x66c)]('兼容模式成功，已将\x20' + _0x4a4418['id'] + _0x206cfc(0x79e)); } else _0x56180a(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.')); } }, _0xe5ecbf, _0x29543e) : _0x4b29a6(_0x378639[_0x1bef49(0x47b)](_0xe5ecbf, _0x29543e)); }, _0x410282[_0x3a15f0(0x8ec)] = _0x5e1de3 => _0x56180a(_0x5e1de3); } else { const _0x4fe9e8 = _0x313489(_0x400a92[_0x3a15f0(0xa84)]) || { 'name': '未知' }; let _0x497a7b = _0x3a15f0(0x5b9) + _0x4fe9e8[_0x3a15f0(0x5f1)] + _0x3a15f0(0x256) + (_0x3f0f0c[_0x3a15f0(0x8e4)] || _0x2f398d[_0x3a15f0(0x9c6)]) + '”'; return _0x5e1210['type'] === _0x3a15f0(0x43a) && (_0x497a7b += _0x3a15f0(0x4a3) + _0x5bd5f7[_0x3a15f0(0x4c5)] + _0x3a15f0(0x6e6) + _0x167a46['artist'] + ')'), _0x497a7b; } }, _0x45adc6[_0x336998(0x8ec)] = _0x48f7ba => _0x56180a(_0x48f7ba); }); } function _0xe16e6b(_0x2b9943) { return new Promise((_0x1b0c44, _0x23609c) => { const _0x15351b = _0x2f04; if (_0x15351b(0x37d) === _0x15351b(0x568)) !_0xd6b175[_0x15351b(0x6f8)](_0x15351b(0x46f))['contains'](_0xefd7ce['target']) && (_0x32c580[_0x15351b(0x544)][_0x15351b(0x7f8)](_0x15351b(0x208)), _0x5f181a[_0x15351b(0x544)][_0x15351b(0x7f8)](_0x15351b(0x386))); else { const _0x5a591f = new FileReader(); _0x5a591f['onloadend'] = () => _0x1b0c44(_0x5a591f[_0x15351b(0x8e8)]), _0x5a591f[_0x15351b(0x8ec)] = _0x23609c, _0x5a591f[_0x15351b(0x2e3)](_0x2b9943); } }); } function _0xe16e6b(_0x343838) { return new Promise((_0x32b634, _0x45cbdd) => { const _0x434df8 = _0x2f04, _0x1f350d = new FileReader(); _0x1f350d[_0x434df8(0x5e2)] = () => _0x32b634(_0x1f350d[_0x434df8(0x8e8)]), _0x1f350d[_0x434df8(0x8ec)] = _0x45cbdd, _0x1f350d[_0x434df8(0x2e3)](_0x343838); }); } function _0x21047c(_0x45170b, _0x245f70, _0x26895b) { const _0xdcdb28 = _0x359829, _0x17f701 = _0x3487a5 => { const _0x2f9796 = _0x2f04; if (_0x3487a5[_0x2f9796(0x1ce)] === _0x2f9796(0x880)) return _0x4025fd[_0x2f9796(0x146)]?.[_0x2f9796(0x5f1)] || _0x2f9796(0x600); if (_0x45170b[_0x2f9796(0xaa2)] === _0x2f9796(0x1d3)) { if (_0x2f9796(0x35a) === 'AkouV') { const _0x10c2ec = _0x1e21c3[_0x2f9796(0x24a)][_0x2f9796(0x1f9)](_0x3e2306 => _0x3e2306[_0x2f9796(0xaa2)] === _0x2f9796(0x43a) && _0x3e2306[_0x2f9796(0x22c)])['map'](_0x3ddb75 => ({ ..._0x3ddb75, 'source': 'chat' })); _0x32300f[_0x2f9796(0x65b)](..._0x10c2ec); } else { const _0x3c0162 = _0x3487a5[_0x2f9796(0x302)] ? _0x26ed76(_0x3487a5[_0x2f9796(0x302)]) : null; return _0x3c0162?.[_0x2f9796(0x5f1)] || _0x2f9796(0x97f); } } else { if (_0x2f9796(0x24f) !== _0x2f9796(0x24f)) { if (_0x3260a5[_0x2f9796(0x5f1)] !== _0x2f9796(0x40f)) { _0x447820[_0x2f9796(0x963)](_0x2f9796(0x396), _0x1711dd); const _0x1422d0 = { 'role': _0x2f9796(0x135), 'content': _0x2f9796(0x72c) + _0x188048['message'], 'senderId': _0x28ec0f['id'], 'isOffline': _0x2d97f6 }; _0x1a4563[_0x2f9796(0x24a)]['push'](_0x1422d0), _0x435618(); } return ![]; } else { const _0x30942c = _0x26ed76(_0x45170b[_0x2f9796(0x2db)][0x0]); return _0x30942c?.[_0x2f9796(0x5f1)] || 'AI'; } } }, _0x41b398 = _0x245f70[_0xdcdb28(0xab4)](-_0x26895b), _0xa86ccc = []; for (const _0x5180cf of _0x41b398) { if (_0xdcdb28(0x93b) === _0xdcdb28(0x28d)) _0x49f6f1['error'](_0xdcdb28(0x8d0) + _0x19c058 + '\x20-\x20' + _0x769b18 + '):', _0x2bbc65), _0x10bab8[_0xdcdb28(0x3ad)] = null, _0x161e30['playableUrl'] = null; else { const _0x238f8f = new Date(_0x5180cf[_0xdcdb28(0x36b)])['toLocaleTimeString'](_0xdcdb28(0x838), { 'hour': _0xdcdb28(0x87a), 'minute': _0xdcdb28(0x87a) }); _0x5180cf[_0xdcdb28(0x9c6)] && _0xa86ccc['push']('[' + _0x238f8f + _0xdcdb28(0x543) + _0x17f701(_0x5180cf) + ']\x20' + String(_0x5180cf[_0xdcdb28(0x9c6)])[_0xdcdb28(0x345)]()); } } return _0xa86ccc; } function _0x37d251(_0x115e44) { const _0x4eb4b6 = _0x359829; if (_0x115e44[_0x4eb4b6(0xaa2)] === 'group') return _0x4eb4b6(0x8ae) + (_0x115e44[_0x4eb4b6(0x5f1)] || '未命名') + '」'; const _0x30cd86 = _0x26ed76(_0x115e44[_0x4eb4b6(0x2db)][0x0]); return '与\x20' + (_0x30cd86?.[_0x4eb4b6(0x5f1)] || '未知角色') + '\x20的私聊'; } function _0x1632c7(_0x31c97b) { const _0x226d88 = _0x359829; try { const _0x6114ee = localStorage[_0x226d88(0x47c)](_0x226d88(0x8ab) + _0x31c97b), _0x1ff7bf = JSON[_0x226d88(0x93f)](_0x6114ee || '[]'); return Array['isArray'](_0x1ff7bf) ? _0x1ff7bf : []; } catch { if (_0x226d88(0x8fd) !== _0x226d88(0x17b)) return []; else _0x3a6872[_0x226d88(0xab8)](); } } function _0x204d24(_0x403b70) { const _0x2576a4 = _0x359829, _0x1468ce = Math[_0x2576a4(0x8cd)](0x1, Number(_0x4025fd['preferences']?.[_0x2576a4(0x78e)] ?? 0x64)), _0x7a96ef = _0x4025fd[_0x2576a4(0x132)][_0x2576a4(0x1f9)](_0x43f771 => _0x43f771['participantIds'][_0x2576a4(0x9f1)](_0x403b70)), _0x26d25c = _0x7a96ef[_0x2576a4(0x30c)](_0x10c75d => { const _0x4fd680 = _0x2576a4, _0x1931c2 = _0x1632c7(_0x10c75d['id']), _0x2e3e26 = _0x1931c2[_0x4fd680(0x84b)] > 0x0 ? _0x1931c2[_0x1931c2[_0x4fd680(0x84b)] - 0x1] : null; return { 'chat': _0x10c75d, 'history': _0x1931c2, 'lastTimestamp': _0x2e3e26 ? _0x2e3e26[_0x4fd680(0x36b)] : 0x0 }; })[_0x2576a4(0x1f9)](_0x380d5b => _0x380d5b[_0x2576a4(0x351)][_0x2576a4(0x84b)] > 0x0); _0x26d25c[_0x2576a4(0x419)]((_0x1ea48e, _0x371d1c) => _0x371d1c[_0x2576a4(0x54e)] - _0x1ea48e[_0x2576a4(0x54e)]); const _0x1704ef = [], _0xad57db = {}; return _0x26d25c[_0x2576a4(0x6ff)]((_0x6bba49, _0x2ae3ca) => { const _0x2df4e3 = _0x2576a4, _0x449e1b = _0x21047c(_0x6bba49[_0x2df4e3(0x651)], _0x6bba49[_0x2df4e3(0x351)], _0x1468ce); if (_0x449e1b[_0x2df4e3(0x84b)] === 0x0) return; const _0x376411 = _0x2ae3ca === 0x0 ? '来源：[最活跃]' : _0x2df4e3(0x539); _0x1704ef['push'](_0x2df4e3(0x6f4) + _0x376411 + _0x37d251(_0x6bba49[_0x2df4e3(0x651)]) + '\x0a' + _0x449e1b[_0x2df4e3(0x602)]('\x0a')), _0xad57db[_0x6bba49['chat']['id']] = _0x449e1b[_0x2df4e3(0x84b)]; }), { 'omniText': _0x1704ef[_0x2576a4(0x602)]('\x0a\x0a'), 'usedCounts': _0xad57db }; } function _0x187331(_0x3e741c) { const _0x2da801 = _0x359829; let _0x2874f2 = null; const _0xcf73cf = _0x4025fd[_0x2da801(0x132)]['filter'](_0x187a19 => _0x187a19['participantIds']['includes'](_0x3e741c)); for (const _0x213388 of _0xcf73cf) { if ('FYVpW' === _0x2da801(0x6fb)) { const _0x25a95a = _0x3833b0[_0x2da801(0x9a6)][0x0]['clientX'] - _0x424b85, _0x4d3a1d = _0x2ddc15[_0x2da801(0x9a6)][0x0][_0x2da801(0x9eb)] - _0x303f8d; _0x2b95e7[_0x2da801(0x2cc)](_0x25a95a) > _0x525204[_0x2da801(0x2cc)](_0x4d3a1d) ? _0x3588df = 'horizontal' : _0x4289c2 = _0x2da801(0x72e); } else { const _0x4bb4ff = _0x1632c7(_0x213388['id']); if (_0x4bb4ff && _0x4bb4ff[_0x2da801(0x84b)] > 0x0) { if ('bePct' !== 'PMTZB') { const _0x1ad904 = _0x4bb4ff[_0x4bb4ff[_0x2da801(0x84b)] - 0x1]; (!_0x2874f2 || _0x1ad904[_0x2da801(0x36b)] > _0x2874f2[_0x2da801(0x36b)]) && ('euZXG' === _0x2da801(0x989) ? _0x2874f2 = _0x1ad904 : _0x10375c = _0x4fea21[_0x2da801(0x93f)](_0x43d9bf)); } else { const _0x2d36ac = _0x51325c[_0x2da801(0x597)](_0x2da801(0x80e)); _0x2d36ac[_0x2da801(0x575)] = 'quoted-message-in-bubble'; const _0x36d86d = _0x4f5942['createElement'](_0x2da801(0x80e)); _0x36d86d[_0x2da801(0x575)] = 'quoted-sender', _0x36d86d['textContent'] = _0x4f36f2[_0x2da801(0x630)]['sender']; const _0x3c2cf6 = _0x5c39ff[_0x2da801(0x597)](_0x2da801(0x80e)); _0x3c2cf6[_0x2da801(0x575)] = _0x2da801(0x457), _0x3c2cf6['textContent'] = _0x4bcb41[_0x2da801(0x630)][_0x2da801(0x9c6)], _0x2d36ac['appendChild'](_0x36d86d), _0x2d36ac[_0x2da801(0x329)](_0x3c2cf6), _0x3fb0a3['appendChild'](_0x2d36ac); } } } } return _0x2874f2; } function _0x554a90(_0x2c26d2) { const _0xc91ab7 = _0x359829; if (!_0x2c26d2 || !_0x2c26d2['includes'](',')) return _0x2c26d2; const _0x5ee42f = _0x2c26d2['split'](',')[_0xc91ab7(0x30c)](_0x33a195 => _0x33a195[_0xc91ab7(0x345)]()); return _0x5ee42f[Math[_0xc91ab7(0x779)](Math[_0xc91ab7(0x59e)]() * _0x5ee42f[_0xc91ab7(0x84b)])]; } function _0x2f2e39(_0xa6083e) { return new Promise(_0xf4d73f => { const _0xb6b34a = _0x2f04, _0x2e17b6 = document[_0xb6b34a(0x4b6)](_0xb6b34a(0x2f1)), _0x5c5cc9 = document['getElementById'](_0xb6b34a(0x44e)), _0x5e26e8 = document[_0xb6b34a(0x4b6)](_0xb6b34a(0x1ae)), _0x283ab6 = document[_0xb6b34a(0x4b6)]('modal-cancel'), _0x444d4d = document[_0xb6b34a(0x4b6)](_0xb6b34a(0xa89)); _0x5c5cc9[_0xb6b34a(0xab3)] = _0xa6083e, _0x2e17b6[_0xb6b34a(0x636)][_0xb6b34a(0x6c5)] = _0xb6b34a(0x835); const _0x33ff33 = _0x34e0d5 => { const _0x257415 = _0xb6b34a; _0x2e17b6['style'][_0x257415(0x6c5)] = _0x257415(0x55f), _0x5e26e8[_0x257415(0x4a6)] = _0x283ab6[_0x257415(0x4a6)] = _0x444d4d[_0x257415(0x4a6)] = null, document[_0x257415(0x4f5)](_0x257415(0x7d9), _0x41959a), _0xf4d73f(_0x34e0d5); }, _0x41959a = _0x38bf4c => { const _0x2e001a = _0xb6b34a; if (_0x38bf4c[_0x2e001a(0xa7f)] === _0x2e001a(0x620)) _0x33ff33(![]); if (_0x38bf4c[_0x2e001a(0xa7f)] === _0x2e001a(0x8cc)) _0x33ff33(!![]); }; _0x5e26e8[_0xb6b34a(0x4a6)] = () => _0x33ff33(!![]), _0x283ab6[_0xb6b34a(0x4a6)] = () => _0x33ff33(![]), _0x444d4d[_0xb6b34a(0x4a6)] = () => _0x33ff33(![]), document[_0xb6b34a(0x20b)]('keydown', _0x41959a); }); } function _0x26f8b2(_0x9281ec) { const _0x3d2ad8 = _0x359829, _0x462f3a = document[_0x3d2ad8(0x4b6)](_0x3d2ad8(0xa67)); _0x462f3a[_0x3d2ad8(0xab3)] = _0x9281ec, _0x462f3a[_0x3d2ad8(0x636)][_0x3d2ad8(0x6c5)] = _0x3d2ad8(0x493); if (_0x26f8b2['_t']) clearTimeout(_0x26f8b2['_t']); _0x26f8b2['_t'] = setTimeout(() => { const _0x28def7 = _0x3d2ad8; _0x462f3a[_0x28def7(0x636)]['display'] = 'none'; }, 0x640); } function _0x24fa5c() { const _0x524336 = _0x359829, _0x2e9ddc = document['getElementById'](_0x524336(0x342)), _0x4f18dc = document[_0x524336(0x4b6)]('app-pages-slider'), _0x9d0783 = document['querySelectorAll']('.page-dot'); if (!_0x2e9ddc || !_0x4f18dc || _0x9d0783[_0x524336(0x84b)] === 0x0) return; let _0x5f1df1 = 0x0; const _0x53e372 = _0x9d0783[_0x524336(0x84b)]; function _0x1e85eb(_0x22380e) { const _0x32c5a6 = _0x524336; if ('gjrpD' === _0x32c5a6(0x3f2)) _0x46ade0[_0x32c5a6(0xaa2)] === 'group' && (_0x2b9944['participantIds'] = _0x2e51f0[_0x32c5a6(0x2db)][_0x32c5a6(0x1f9)](_0x2e8ac9 => _0x2e8ac9 !== _0x2e9706)); else { if (_0x22380e < 0x0 || _0x22380e >= _0x53e372) return; _0x4f18dc['style'][_0x32c5a6(0x65c)] = _0x32c5a6(0x919) + _0x22380e * (0x64 / _0x53e372) + '%)', _0x9d0783[_0x32c5a6(0x6ff)](_0x2536b7 => _0x2536b7[_0x32c5a6(0x544)][_0x32c5a6(0x7f8)](_0x32c5a6(0x9ad))), _0x9d0783[_0x22380e]['classList']['add']('active'), _0x5f1df1 = _0x22380e; } } _0x9d0783['forEach'](_0x13cbfb => { const _0x22a7c1 = _0x524336; _0x13cbfb[_0x22a7c1(0x20b)](_0x22a7c1(0xab8), () => { const _0x36f772 = _0x22a7c1, _0x21f070 = parseInt(_0x13cbfb['dataset'][_0x36f772(0x1cb)], 0xa); _0x1e85eb(_0x21f070); }); }); let _0xb1b307 = 0x0, _0x59a6fe = 0x0, _0x5b51f9 = 0x0, _0x24814a = ![], _0x5d127a = ''; _0x2e9ddc[_0x524336(0x20b)]('touchstart', _0x8c0dcf => { const _0x17e007 = _0x524336; 'rbyoB' !== 'rbyoB' ? _0x3f87ef[_0x17e007(0x5f1)] !== _0x17e007(0x40f) && (_0x58e30c[_0x17e007(0x963)](_0x17e007(0x27f), _0x3a6d4b), _0x5e039e({ 'role': _0x17e007(0x135), 'content': _0x17e007(0x72c) + _0x3420b2[_0x17e007(0x973)] }, _0x3379e1[_0x17e007(0x24a)][_0x17e007(0x84b)] - 0x1)) : (_0xb1b307 = _0x8c0dcf[_0x17e007(0x9a6)][0x0][_0x17e007(0x3cd)], _0x59a6fe = _0x8c0dcf['touches'][0x0][_0x17e007(0x9eb)], _0x24814a = !![], _0x5d127a = ''); }, { 'passive': !![] }), _0x2e9ddc[_0x524336(0x20b)](_0x524336(0x250), _0x103394 => { const _0x4580e8 = _0x524336; if (!_0x24814a) return; if (_0x5d127a === '') { const _0xab3665 = _0x103394[_0x4580e8(0x9a6)][0x0][_0x4580e8(0x3cd)] - _0xb1b307, _0x41d627 = _0x103394[_0x4580e8(0x9a6)][0x0][_0x4580e8(0x9eb)] - _0x59a6fe; Math[_0x4580e8(0x2cc)](_0xab3665) > Math[_0x4580e8(0x2cc)](_0x41d627) ? _0x4580e8(0xaa8) === _0x4580e8(0x9cd) ? _0x5a595d[_0x4580e8(0x20b)](_0x4580e8(0xab8), () => { const _0x41c982 = _0x4580e8; _0x193fe7(_0x41c982(0x2ea)); }) : _0x5d127a = 'horizontal' : 'Wwpem' === 'Wwpem' ? _0x5d127a = _0x4580e8(0x72e) : (_0x51f33a[_0x4580e8(0xab3)] = _0x3e5bc8[_0x4580e8(0x681)] === 'narrator' ? '旁白' : _0x180a76['speaker'], _0x5bbad0[_0x4580e8(0xab3)] = _0x45370d[_0x4580e8(0x3e3)], _0x30ec70[_0x4580e8(0x681)] === _0x2c8941['name'] ? _0x474293(_0x392894, _0x2a397e[_0x4580e8(0xa55)]) : _0x219456(_0x4fa7f4, 'normal')); } _0x5d127a === _0x4580e8(0x84d) && _0x103394[_0x4580e8(0x3e5)](); }, { 'passive': ![] }), _0x2e9ddc['addEventListener'](_0x524336(0x13d), _0x28cc14 => { const _0x3819d1 = _0x524336; if (_0x3819d1(0x7cb) !== _0x3819d1(0x7cb)) try { _0x526ddc[_0x3819d1(0x5f0)](_0x3819d1(0x61d), _0x95e37a[_0x3819d1(0x49f)]({ 'playlist': _0x5492c2[_0x3819d1(0x34a)], 'currentIndex': _0x420cd4['currentlyPlayingIndex'] })); } catch (_0x29f007) { _0x43dd02['error'](_0x3819d1(0x9ff), _0x29f007); } else { if (!_0x24814a) return; _0x5b51f9 = _0x28cc14[_0x3819d1(0x126)][0x0][_0x3819d1(0x5e5)], _0x5d127a === _0x3819d1(0x84d) && _0x3403f9(), _0x24814a = ![]; } }); function _0x3403f9() { const _0xc591a9 = 0x32; if (_0x5b51f9 < _0xb1b307 - _0xc591a9) _0x1e85eb(_0x5f1df1 + 0x1); else _0x5b51f9 > _0xb1b307 + _0xc591a9 && _0x1e85eb(_0x5f1df1 - 0x1); } } function _0xa1948f() { return new Promise(_0x41c916 => { const _0x3ebad0 = _0x2f04, _0x5e9ae7 = document[_0x3ebad0(0x4b6)]('music-input-modal'), _0x4acf03 = document['getElementById'](_0x3ebad0(0x205)), _0xbc2854 = document[_0x3ebad0(0x4b6)](_0x3ebad0(0x825)), _0x5be684 = document[_0x3ebad0(0x4b6)](_0x3ebad0(0x7b6)), _0x34915a = document[_0x3ebad0(0x4b6)](_0x3ebad0(0x2aa)), _0x29ea78 = document[_0x3ebad0(0x4b6)]('music-input-backdrop'); _0x4acf03['value'] = '', _0xbc2854[_0x3ebad0(0x95e)] = '', _0x5e9ae7[_0x3ebad0(0x544)][_0x3ebad0(0x82e)](_0x3ebad0(0x187)), _0x4acf03[_0x3ebad0(0x63f)](); const _0x466f49 = _0x4d8eea => { const _0x4046c5 = _0x3ebad0; 'Ygaxn' === 'Ygaxn' ? (_0x5e9ae7[_0x4046c5(0x544)][_0x4046c5(0x7f8)]('show'), _0x5be684[_0x4046c5(0x4a6)] = null, _0x34915a['onclick'] = null, _0x29ea78['onclick'] = null, document[_0x4046c5(0x4f5)]('keydown', _0x4b15eb), _0x41c916(_0x4d8eea)) : _0x1f660a['characters'] = _0x1b9627[_0x4046c5(0x61c)][_0x4046c5(0x30c)](_0x3cfcca => ({ 'offlineBackground': '', ..._0x3cfcca }))['filter'](_0xda5362 => _0xda5362 && typeof _0xda5362 === _0x4046c5(0x545) && _0xda5362['id']); }, _0x26dbf7 = () => { const _0x515d21 = _0x3ebad0; if ('TrTHP' !== _0x515d21(0x1fc)) _0x5640d4(_0x515d21(0xa65)); else { const _0x85aaf = _0x4acf03[_0x515d21(0x95e)]['trim'](), _0x5a7350 = _0xbc2854[_0x515d21(0x95e)][_0x515d21(0x345)](); if (!_0x85aaf || !_0x5a7350) { _0x26f8b2(_0x515d21(0x526)); return; } _0x466f49({ 'songName': _0x85aaf, 'artist': _0x5a7350 }); } }, _0x4b15eb = _0x3d107e => { const _0x112463 = _0x3ebad0; if (_0x3d107e[_0x112463(0xa7f)] === 'Escape') _0x466f49(null); _0x3d107e[_0x112463(0xa7f)] === _0x112463(0x8cc) && (_0x112463(0x218) !== _0x112463(0x218) ? (_0x1137ef(![]), _0x2d1c2b[_0x112463(0x963)](_0x112463(0x31c), _0x5d849f), _0x2e5ab2(_0x112463(0x9cc) + _0x55936c['message'])) : (_0x3d107e[_0x112463(0x3e5)](), _0x26dbf7())); }; _0x5be684['onclick'] = _0x26dbf7, _0x34915a[_0x3ebad0(0x4a6)] = () => _0x466f49(null), _0x29ea78[_0x3ebad0(0x4a6)] = () => _0x466f49(null), document[_0x3ebad0(0x20b)](_0x3ebad0(0x7d9), _0x4b15eb); }); } function _0x15f4da(_0x200190) { const _0x541b36 = _0x359829; if (!_0x200190) return []; const _0x69f7f3 = _0x200190[_0x541b36(0x345)](); if (_0x69f7f3['startsWith'](_0x541b36(0x875)) && _0x69f7f3['endsWith'](_0x541b36(0x86f))) { if (_0x541b36(0x74f) === _0x541b36(0x74f)) return [_0x69f7f3]; else { const _0x3cc798 = _0x57d0da[_0x541b36(0x798)](_0x73d668); _0x3cac5b[_0x541b36(0x2fd)] = _0x3cc798, _0x44d051[_0x541b36(0x422)] = () => { const _0x59cb0d = _0x541b36; _0x4e1b1d[_0x59cb0d(0x883)](_0x3cc798); }; } } const _0x20b63a = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\])/g, _0x507c54 = _0x541b36(0x7c3), _0x50bb57 = [], _0x5bb5a9 = _0x200190[_0x541b36(0x829)](_0x20b63a, _0x1f989c => { const _0x55fb1e = _0x541b36; if (_0x55fb1e(0x18c) !== _0x55fb1e(0x18c)) _0x36f9f0[_0x55fb1e(0x65b)](_0x5796d7['id']); else return _0x50bb57[_0x55fb1e(0x65b)](_0x1f989c), _0x507c54; }), _0x43256a = _0x5bb5a9[_0x541b36(0x80a)](_0x507c54), _0xde20a4 = []; let _0x294f1e = 0x0; return _0x43256a[_0x541b36(0x6ff)]((_0x3e43ec, _0x143733) => { const _0x58a968 = _0x541b36; if ('XFlfF' === _0x58a968(0x782)) { const _0x13a380 = _0x515d59[_0x58a968(0x597)]('li'); _0x13a380['className'] = _0x58a968(0xa91), _0x13a380[_0x58a968(0x773)]['charId'] = _0x3ef747['id'], _0x13a380['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x145893[_0x58a968(0x12d)] || _0x2afaa7) + _0x58a968(0x7a1) + _0x347b94['name'] + _0x58a968(0x95d) + (_0x1687a3[_0x58a968(0x88f)] || '私聊') + _0x58a968(0x121), _0x13a380[_0x58a968(0x20b)](_0x58a968(0xab8), () => { _0x34e033(_0x1cae0a['id']); }), _0x3d2aa8['appendChild'](_0x13a380); } else { const _0x3650d5 = _0x3e43ec[_0x58a968(0x345)](); _0x3650d5 && _0xde20a4['push'](..._0x1be777(_0x3650d5)), _0x294f1e < _0x50bb57[_0x58a968(0x84b)] && (_0xde20a4[_0x58a968(0x65b)](_0x50bb57[_0x294f1e][_0x58a968(0x345)]()), _0x294f1e++); } }), _0xde20a4; } function _0x18c148(_0x36532d) { const _0x35c471 = _0x359829; if (!_0x36532d) return []; let _0x2b12ae = String(_0x36532d)[_0x35c471(0x345)](); const _0x543247 = _0x2b12ae[_0x35c471(0x561)](/```(?:json)?([\s\S]*?)```/i); if (_0x543247) _0x2b12ae = _0x543247[0x1]['trim'](); try { if (_0x35c471(0x4a5) === _0x35c471(0x415)) _0x5bad33[_0x35c471(0x636)]['opacity'] = 0x0, _0x8cfdd8(() => { const _0x269684 = _0x35c471; _0x58860b['src'] = _0x5d96f5[_0x269684(0x798)](_0x4b534c), _0x5988ac[_0x269684(0x636)]['opacity'] = 0x1; }, 0x96); else { const _0x49052a = JSON['parse'](_0x2b12ae); if (_0x49052a && Array[_0x35c471(0x5f8)](_0x49052a[_0x35c471(0xa54)])) return _0x49052a['reply']['map'](_0x6259c => typeof _0x6259c === _0x35c471(0x90a) ? _0x6259c : _0x6259c?.[_0x35c471(0x9c6)])[_0x35c471(0x1f9)](Boolean)[_0x35c471(0xa5f)](_0x1be777); const _0x21df81 = [_0x35c471(0xa73), 'dialogue', _0x35c471(0x973), _0x35c471(0xa20), _0x35c471(0x9c6), _0x35c471(0x3e3), _0x35c471(0x377)]; if (_0x49052a && typeof _0x49052a === _0x35c471(0x545)) { const _0x5d4a1a = []; for (const _0x1a963f of Object[_0x35c471(0x8f4)](_0x49052a)) { if (_0x35c471(0x4d6) !== 'Rrqjl') { const _0x2f8e5d = _0x1a963f[_0x35c471(0x577)](); if (_0x21df81[_0x35c471(0x533)](_0x50d188 => _0x2f8e5d[_0x35c471(0x914)](_0x50d188))) { if (_0x35c471(0x19e) !== 'LJCJI') _0x2387ea['currentAbortController'] = null; else { const _0x141b48 = _0x49052a[_0x1a963f]; if (typeof _0x141b48 === _0x35c471(0x90a)) _0x5d4a1a['push'](_0x141b48); if (Array[_0x35c471(0x5f8)](_0x141b48)) _0x141b48[_0x35c471(0x6ff)](_0x41d60e => { const _0x533ecb = _0x35c471; if (typeof _0x41d60e === _0x533ecb(0x90a)) _0x5d4a1a['push'](_0x41d60e); }); } } } else _0x2c37ec += _0x35c471(0x8bd) + _0xdcc5a9[_0x35c471(0x8b5)] + '”买过：“' + _0x290003['item_name'] + '”。\x0a'; } if (_0x5d4a1a['length']) return _0x5d4a1a[_0x35c471(0xa5f)](_0x1be777)[_0x35c471(0xab4)](0x0, 0x9); } } } catch { } if (/[{\[]/[_0x35c471(0x8b6)](_0x2b12ae) && /":/[_0x35c471(0x8b6)](_0x2b12ae)) { const _0x50b414 = [], _0x5ef0eb = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x5b1f9b; while ((_0x5b1f9b = _0x5ef0eb[_0x35c471(0xa6f)](_0x2b12ae)) !== null) { const _0x6c6200 = _0x5b1f9b[0x1][_0x35c471(0x829)](/\\"/g, '\x22')[_0x35c471(0x829)](/\\n/g, '\x0a')[_0x35c471(0x345)](); if (_0x6c6200) _0x50b414['push'](_0x6c6200); } if (_0x50b414[_0x35c471(0x84b)]) return _0x50b414[_0x35c471(0xa5f)](_0x1be777)[_0x35c471(0xab4)](0x0, 0x9); } return _0x1be777(_0x2b12ae); } function _0x27bb() { const _0x1b7b34 = ['正在解析备份文件...', 'card-input', 'SJjWO', 'IoVPo', 'SoDRq', 'character-settings-button', 'IBckH', 'copy-summary-button', 'BRCZP', 'listen-together-backdrop', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', 'tBNqE', 'parse', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', 'noir_migration_fc_v1_complete', '缓存命中:\x20', '歌曲“', 'delete-expense-btn', 'EjfSW', 'values', '#FFFFFF', '---\x20开始AI回复流程\x20---', '-\x20你曾经搜索过：“', '.remove-attachment-btn', 'music_library', 'color', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'getDay', 'IIslu', 'bites', 'back-to-home-from-snoop-list', 'YlTvB', 'rjDRN', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'svg', 'sPZhm', 'hfDMl', 'meeting-view-screen', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'save-custom-stickers-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'value', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '加载角色\x20', 'accountingLedger', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'error', 'widget-next-btn', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'SfQtW', 'flexDirection', 'contactName', 'sprite-cancel-button', 'dxdVO', '\x20天没活动了。你生成的内容必须是全新的、符合这几天空白时间的事件，不能再纠结于几天前的事情。\x0a', '”。\x0a', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'music-player-bar', '8px\x2016px', 'input[type=\x22checkbox\x22]:checked', '字体保存失败了，哼:\x20', 'hrwir', 'message', 'jJXZd', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'Gemini\x20stream\x20reading\x20aborted.', 'wMkHB', 'IAcUq', '\x0a#\x20已有内容\x20(请在此基础上续写)\x0a```json\x0a', 'tCCAc', '<div\x20class=\x22snoop-main-grid\x22></div>', 'QYjMi', 'editing-user-id', ']。严禁使用列表之外的任何表情名。\x0a', 'Unknown', 'mpGHv', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'snoop-app-back-btn', 'world-book-edit-name', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'pypTL', 'nSEuU', 'ltzUA', 'RHDpy', 'euZXG', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '不高兴撒娇', 'now', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'aSLok', 'angry', '保存卡片状态失败', 'noir_data_migration_v1_complete', 'chat_image_migrated_', 'LoqCs', 'chat-transfer-button', '.listen-together-card', '\x20时出错，跳过。', 'padding', '\x22\x20的聊天记录吗？此操作不可撤销。', 'mLmsw', 'galgame-sprite-controls', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x20行格式不对，被我无视了。', 'unified-audio-player', 'galgame-textbox-container', 'diary-action-modal-', '总得说点什么吧？', '5px', '请看是我', 'DuNkH', 'pendingPostAttachments', 'VWAer', 'touches', '哼，正在净化你那些超重的音乐分享记录...', '角色已保存！', '<p\x20class=\x22music-post-thought\x22>', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', 'title', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'active', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'add-world-book-button', 'friendCircles', '获取模型失败:\x20', 'RnVOP', 'postContent', '.selected-options-text', 'NGlqy', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'IzTbB', '-\x20你最近去过：“', 'sticker-item', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', '正在生成中，请稍候...', 'bMTKe', '\x20张旧封面。应用即将刷新。', 'vEHam', 'body', 'Migrating\x20old\x20data\x20structure\x20to\x20new\x20chat-based\x20structure.', 'lastIndexOf', 'chat-sticker-panel', 'content', 'tSksR', 'vnEDa', 'xSbFi', '小时前，生成的内容应该符合这段时间的空白。\x0a', 'reverse', '导出过程中发生严重错误:\x20', 'vtAuZ', '保存徽章状态失败', 'aSqEd', '正在检查好友圈数据...', 'musicLibrary', 'amount', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'widget_card', 'nvMHs', '--custom-font-family', 'snoop-list-screen', '#a4c2f4', '未知联系人', 'XaAqz', 'timeupdate', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'http', '正在解析音乐灵魂...', 'activeQuote', 'RGfYP', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', '啥意思捏', 'Ctssm', '同步已断开。', '被你撩到', 'clientY', 'accounting', 'nEAym', 'smooth', 'wnXlm', 'choice-import-character', 'includes', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', 'TBMnX', 'tag', 'TxNlx', 'bubble-', 'getReader', 'Mxqzk', '名字不能为空！', 'diary-page-', 'wIOdi', '.custom-multiselect\x20.select-box', '为你骄傲', '未知表情', '保存播放器状态失败，真是没用。', 'CBMUl', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg', 'home-screen', 'round', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', '</div>\x0a\x20\x20\x20\x20', 'aFhce', 'vMbYe', 'yHNOo', 'back-to-home-from-user-list', 'jmtHH', '</span><div><div\x20class=\x22description\x22>', 'friend-circle-list-screen', 'riWqq', 'osepe', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'char-edit-avatar-input', '59%', 'snoop-home-time', '暂无音乐', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', '\x22>&times;</button></div>', 'close-summary-button', 'TKrqz', 'MsTxu', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '未知商品', 'KkGaN', 'ibfBf', '[DONE]', 'text', 'songId', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'pOdCh', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', '.typing-indicator', 'area', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'organize-bill-button', 'toDateString', '-\x20你拍过一张照片，内容是：“', 'lfcuw', 'VlytU', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'cKuAx', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'isAnimatingDiary', 'snoop-app-refresh-btn', 'dUlaS', 'nZcaA', 'FDlWH', 'dpEeb', 'chat-screen', 'import-char-input', 'sad', 'sprite-slider-x', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'worldBooks', 'AegwV', 'create-group-chat-button', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'XTges', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', '）最新写下的日记内容。Ta写的是：\x0a\x20“', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'ylOpc', 'NLADj', 'originalExpenses', 'PSWdY', 'LuRMf', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'substring', 'sUqcm', 'app-snoop', 'activeChatId', 'activeMeetingCharId', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', 'contact_name', 'char-edit-wallpaper-input', 'Tcyxz', 'back-to-diary-list', 'reply', 'emotion', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', '点击选择\x20info.txt', ']:\x20', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', '66pukxOh', '50%', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', '好友圈已删除。', 'flatMap', 'world-book-edit-content', '这本日记本来就是空的，你还想清空什么？', 'user-post-attachment-preview', 'ILGlT', 'Assistant', '未找到可用模型。', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'toast', 'ZyofY', 'preview_', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', 'save-api-settings-button', 'chat_group_', 'hmDyv', 'KBQgV', 'exec', 'ZhAnf', '.diary-delete-btn', 'KtQRn', 'response', '歌曲ID', 'currentTime', 'sIWtC', '备忘录', 'gemini', 'editing-char-id', 'rgba(0,\x200,\x200,\x200.4)', 'info-file-input', '薄荷水色', 'RjUaA', 'disabled', 'key', 'GJkgN', 'PDjCI', '请输入新的群名称：', 'comments', 'authorId', 'query', '34%', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'VzlIC', 'modal-mask', 'appState', 'back-to-char-select-from-group-create', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'KkJlV', 'group-avatar-preview', 'rZWos', 'uyThr', 'character-item', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'BjsxH', '错误：找不到角色', 'preview-item', 'indexedDBMusicData', '全量导入失败:', '\x0a\x20\x20\x20\x20<div\x20id=\x22', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '-\x20你点过一份外卖：“', 'wIqwH', 'is-playing', 'iTauq', 'altar-slot-cover', 'LlwOZ', 'jFWrK', 'https://api.vkeys.cn/v2/music/', 'type', 'snoop-temp-style', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '\x0a-\x20**对话状态**:\x20群里已经有', 'whXXP', 'gallery', 'WzxfX', 'UolUT', 'vedca', 'meetingView', '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'tEiSH', 'recipientId', '一起听歌', 'pgrwD', 'qWpLa', 'diaries', 'textContent', 'slice', '<div\x20class=\x22post-timestamp\x22>', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'top', 'click', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', 'AOVUF', 'friendCircleList', 'EKqfz', '加载卡片图片失败', 'export-char-button', 'chat_image_', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'SGkvm', 'user-profile-edit-title', 'urqzt', 'vUbTo', 'ezwMD', '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27', '请输入群聊名称。', 'QbPOl', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'html-module-container', 'widgetBgImage', 'rgyAP', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', '真是的，必需的祭品都还没准备好！', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '确定要永久清空【', '3773mzfdco', 'aXxVR', 'ZgKQq', 'changedTouches', 'translate(-50%,\x20-100%)', 'diary-char-name-header', '动态中的音乐搜索失败:', '无标题笔记', '#group-settings-screen\x20.selected-options-text', '\x20\x20-\x20用户ID:\x20', 'avatar', 'YKZVP', '328856MWGLuh', 'app-accounting', 'JevcR', 'chats', '...', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'assistant', 'Awhnq', 'transfer-backdrop', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'mouseleave', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'data:', 'touchend', 'posts', 'url', 'TiTjT', '\x0a##\x20条目:\x20', 'mqRBt', 'data:\x20', 'result_page_content', '星期四', 'userProfile', 'full', 'wchri', 'GMVPr', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', '<p>格式错误</p>', 'post-img-', 'confirm-altar-upload-button', '已自动断开与其他人的听歌同步。', 'home-clock-container', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'abyss', '有点破防', 'zNtOZ', 'diary-send-button', '\x22\x20src=\x22', 'DHpRZ', 'WJqCF', 'appIconPosition_app-accounting', 'TFObJ', 'char-edit-remark', 'XJSoN', 'vWySm', 'phone-container', '确定要从圣殿中永久删除《', '别这样嘛我哭哭', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', 'XUGlx', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '音乐搜索失败:\x20', 'image/png', 'qqPHa', 'xZxWP', 'meeting-char-name-header', 'music-screen', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'custom_font_ttf', '\x20|\x20', 'musicFeed', '星期日', '好像有动态了...', '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20', 'caigm', 'historyIndex', 'NoirCharacterCard', 'app-world-book', 'long', 'version', '#bubble-preview-user', 'KzLzw', 'byNtB', 'Cbtja', 'KIFcP', '</span></div>', '群聊\x22', 'closest', 'add-choice-backdrop', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', 'quMFk', '处理\x20', 'replaceAll', 'WrhTY', '今天一笔账都没有，我整理什么？', 'show', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', ',\x20resetting.', 'KHfRs', 'ZgIQC', 'iBlgY', 'tab-record-expense', 'pYMNG', 'input[type=\x22checkbox\x22]', 'ocUKB', 'bNDXU', '<div\x20class=\x22loader-spinner\x22></div><span>', 'eHLNe', 'generationConfig', 'AI返回的不是一个数组。', 'documentElement', 'Dgfcp', '#d1d5db', 'Bearer\x20', '卡片已更换！', 'jvPEX', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '错误：找不到签署契约的地方。', 'LJCJI', '未分类', 'back-to-home-from-meeting-list', 'zdzRj', 'add-choice-modal', '你还没保存这个角色呢，导什么导？', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', '正在翻阅所有档案...', 'bRoNh', '用户已删除。', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'zbgjR', 'cancel-quote-button', 'viewBox', '10px\x200', 'cancel-action-button', 'modal-ok', 'friend-circle-edit-title', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', '<span\x20class=\x22', '.slot-filename', 'cardWidgetState', '正在迁移旧的用户数据...', 'AI返回了无法解析的文本', '群聊至少需要2名成员。', '事情好多', 'QsiLZ', 'back-to-home-from-chat', 'char_sprite_normal_', 'diary-page', 'GnbXF', 'MvkGS', 'app-user-profiles', '确定要删除角色“', 'mnatH', '正在搬运旧卡片...', '\x0a\x20\x20\x20\x20-\x20世界书[', 'vNwRY', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'sUoWy', 'scale', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'MPGxx', '我不想工作', 'page', 'jwTnh', '导出角色卡失败:', 'role', '错误：找不到这首作为“信物”的歌。', 'signal', 'img', 'bottom', 'group', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'readAsText', 'VmIXD', 'VNQhI', 'TYVIm', 'nCmIy', '--primary-hue', 'bubbleCss', 'input:checked', '.snoop-main-grid', 'reload', 'card-input-2', 'tEvFV', 'FrZGw', 'TeWLG', 'delete', '1152QDUeQv', 'Noir_Backup_', 'WpGTA', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', 'firstChild', '\x0a\x20\x20\x20\x20人设:\x20', 'claude', 'NTFlJ', '#member-select-', '加载第二个卡片图片失败', 'snoop-character-list-container', 'galgame-time', 'mJBuv', 'files', '档案已复制到剪贴板！', 'characterEdit', '31404WxPKmo', 'currentlyPlayingIndex', 'getDate', '未知地点', 'NwxyM', 'filter', 'group-options-modal', 'oVQEd', 'TrTHP', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'group-bg-input', 'is-visible', '吃你的饭', 'char_avatar_', 'HHjEb', 'gFqcs', 'entries', 'music-input-song', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', '\x22\x20class=\x22music-share-cover\x22>', 'visible', 'WcOAG', '还没有我的回复可以重新生成哦。', 'addEventListener', '</span>', 'drman', '<span\x20class=\x22description\x22>', 'eabYi', 'XoJAx', 'ANzSb', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a', 'toLocaleDateString', '在准备群聊API数据时，读取图片失败:', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'YAML翻译机也无法理解这段梦话。', '动态页背景已移除。', 'CtbfY', 'RJFnq', 'mFOjv', 'api-provider', '谁啊我吗', 'download', '-avatar', 'cardState', '保存失败，你的表情包是不是太多了？', 'vWSHD', 'VJLba', 'snoop-home-clock', 'fMAMv', 'RMzpQ', 'GySTy', 'yWpee', '#\x20总结失败了，可能是记录太长或太复杂。', '快点哄我', '\x22\x20class=\x22char-name\x22>', 'bgimb', 'playableUrl', 'mFSoX', '加载视奸记忆失败\x20(', 'MvGdn', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'JiaUE', '\x20\x20\x20\x20-\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'edit-clear-history-button', 'ZuWmi', 'canplaythrough', '-\x20**当前精确时间**:\x20', '复制失败了，哼。', '解析音乐文件失败:', '群名称已更改为\x22', 'diary-modal-cancel', '1720DyROJd', 'Creating\x20object\x20store:\x20', 'KLATh', 'get', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', '20%', 'HsLpu', 'cXsaQ', 'borderRadius', 'ceil', ':\x22\x20或\x22[', 'mXgFH', 'circle_', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'conversationHistory', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'DmeJV', 'getMinutes', '\x0a```', 'tVdiY', 'touchmove', 'Amemg', 'MSNcC', 'customFeedWallpaper', 'fJKZI', 'activeMeetingScriptQueue', '\x20说：“', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'private', '\x0a\x0a#\x20关于读者“', '群聊设置已保存！', 'group-world-book-checkboxes', 'onupgradeneeded', 'amnXB', '确定要删除群聊“', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', 'chat-get-reply-button', '15%', '\x20的图片失败:', '\x20时出错:', ':</span>\x20', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'vPRJt', 'VnRjZ', '用户操作中断了\x20AI\x20响应。', '委屈那我歇了', 'application/json', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'iFesr', 'sender_id', '1327368iAazqV', 'createElementNS', 'preferences', 'oRXkK', '吃薯条', 'group-bg-preview', '[sticker:', 'itybd', '_NoirCard.json', 'artist', 'cancel-transfer-button', 'music_cover_', 'Wqckf', '图片预览失败:\x20', 'hZyST', 'KyArC', '获取AI响应失败:', 'EDgrm', 'group-options-cancel', 'localeCompare', 'tBlHA', 'SeKpi', 'dvoEK', 'MDAcR', 'transaction', 'pjgIB', 'jxjvG', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'LXLbO', 'card-widget', 'xZQcZ', 'tzEVs', 'fontStyle', '成功净化并迁移了\x20', '（开始一段新的对话...）', 'UTohy', 'userProfiles', '清空聊天记录失败。', 'xMjDD', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', '\x20之间的私密内容)\x0a', 'mVdZQ', '最近的足迹', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'fPBKl', 'lt-ui-cover-art', 'reset-widget-bg-button', 'anthropic', '\x0a\x0a#\x20最终指令\x0a请严格遵守【绝对身份锁定协议】，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '交给我吧', 'cost', 'galgame', 'XxnXi', 'quoted-sender', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', '[AI向\x20', 'XuhrO', 'kind', 'haMMJ', 'cancel-music-input', 'short', '编辑好友圈', 'Error\x20fetching\x20from\x20', 'tmXMk', '7sxtSzw', '成功向好友圈\x20\x22', 'jFYLg', 'uNcRg', '15px\x2020px', 'XsNtl', '”已存入圣殿。', 'assign', '正在解析角色卡...', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', 'ZRGje', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'diary-entries-container', 'YYnKD', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'UcaPx', 'upload-badge-button', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'apiSettings', '\x20\x20具体对话如下：\x0a', '下载并转换网络封面失败:', '\x22\x20data-id=\x22', 'zajzb', 'expense-amount', 'app-meeting', 'meetingList', 'tkIil', 'removeChild', 'abs', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'mousedown', 'cnOzP', 'MvcZB', 'sprites', 'NMjNH', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'toString', 'uCQWa', 'snoop_', '喝多了', 'friendCircleEdit', '确定要恢复默认字体吗？', '新角色\x20', 'participantIds', 'ZgCAz', '（正在构思中...）', '群聊“', '\x0a\x0a##\x20世界书条目:\x20', 'nBZKs', 'NOdee', 'offline-scene-view', 'readAsDataURL', '<div\x20class=\x22snoop-avatar\x22>', '”已成功导入！', 'MHahx', '日记已删除。', 'xGbAj', 'jvuga', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'auto', 'UaEfV', 'kBwUX', 'save-edit-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', 'modal-root', 'lDgET', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情，可以是对昨天事情的回应，但时间点必须是“今天”。\x0a', 'appIconPosition_app-settings', '.widget-info\x20>\x20div', 'meeting-main-content', '-\x20**你最后一次活动是在**:\x20', '\x0a\x0a#\x20', 'Fmxej', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'src', 'QTAEw', 'aKDRD', '测试动态已添加！', 'objectStore', 'senderId', 'input_', '至少要保留一个用户。', '已选择\x20', 'char-edit-bind-user', '28%', 'msg_', '无法保存聊天记录。', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', '</pre>', 'map', '\x20\x20-\x20角色ID:\x20', 'accountingData', 'image_url', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', '-\x20姓名:\x20', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'select', 'url(\x27', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'margin', '数据导入成功！应用即将刷新...', 'DCKOk', '逗你开心', 'activeFriendCircleId', 'TmqEB', '全量导出失败:', 'splice', 'AVjTG', '.choice-modal-backdrop', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', 'diary-modal-textarea', '.listen-together-accept-btn', 'aborted', 'cos', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', '来源：[最活跃]', 'epUJw', 'quIiO', 'appendChild', '(想转账给“', 'find', '&apos;', '\x20\x0a#\x20当前情景\x0a', 'cNaru', '卡片已移除。', '批量生成动态失败:\x20', 'UdWQJ', 'oelwF', 'summary', '文件格式不正确，不是一个有效的备份文件。', '总结失败:', 'snoop-summary-textarea', 'lSzKe', 'TDuiv', 'alt', '{charName}', '---\x20好友圈净化仪式完成\x20---', 'galgame-sprite-adjust-ui', 'default', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>', 'user-post-avatar', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'MWpyV', 'app-pages-container', 'chatWallpaper', ';\x22>', 'trim', 'save-friend-circle-button', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'friend-circle-edit-bind-user', 'NNJBW', 'musicPlaylist', 'pointer', 'RqzcZ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', '哼，正在净化你那些被污染的好友圈动态...', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'activeCharacterId', 'history', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'delete-user-profile-button', '#ffcc66', '.diary-entry', 'JYgro', '[发送了表情]', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', '\x0a\x0a#\x20用户资料库\x0a', 'jdeMs', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'category', '\x20张旧的音乐封面。', 'ykCYA', 'XbbMW', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'anthropic.com', 'vaOfX', '净化音乐封面时出错，真是的。', '生成日记失败:\x20', 'charSelect', 'widget_card_2', '.message.user', 'hsFZu', 'tBkvz', 'timestamp', '未命名群聊', 'MPOvR', '未知商店', 'cfZMS', 'galgame-speaker', 'RRoae', 'UHZtu', 'message-container', 'shy', '生成动态失败:', '\x22>\x20', 'utterance', 'categorized-expenses-list', 'sFUZk', '天没动静了。你的角色们应该发起新的问候或话题。', 'upload-card-button', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'QEFAT', 'back-to-settings-from-user-profile', 'jshzK', 'mOhsT', 'save-char-button', '未知搜索', '.music-post-song-card', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', '-\x20**状态提示**:\x20你已经有\x20', 'expanded', 'isActive', 'home-date', 'waeQh', 'currentAbortController', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'test_post_', '已设为当前用户！', 'diary-write-button', 'expense-item', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'lyric-line-', 'xfIcv', 'tLaDB', 'marginTop', '生成失败:\x20', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', '\x20写道:\x20', '\x20条新动态。', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', '我很脆弱', 'GhWEq', 'data:image', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'time', '条目名称和内容都不能为空！', '视奸内容解析失败:', 'eglDm', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'oqkHo', 'RXiZB', '一个人可怜吃饭', 'NcTgA', 'var(--text-color)', 'gLumf', 'kFRWu', '-\x20**状态提示**:\x20你上一次活动是在', 'coverUrl', 'AqRFg', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'group-clear-history', 'user-post-image-input', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', '等你消息', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'wallpaper-screen', 'kvzKV', 'RROHY', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'image', 'xgZhh', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', 'widget_badge', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', 'MrcVL', 'upload-music-button', 'characterId', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'endpoint', 'gOUtp', 'back-to-chat-from-group-settings', 'theme-lightness-slider', 'music-widget-card', 'imageId', 'innerHTML', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'rniNo', '#ff9999', 'fragments', 'clientX', 'scrollTop', 'group-clear-history-button', 'PpKbx', 'JbJMA', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', 'last_edited', 'organize-button-container', '\x22\x20id=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'absolute', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'diary-view-screen', 'reduce', 'wTOLA', 'indexOf', 'KFQLC', 'coverId', 'Failed\x20to\x20plan\x20group\x20replies:', 'getContext', 'line', 'oGMgq', 'preventDefault', 'cDeGM', 'AozRS', 'BGBky', '正在处理...', 'image/jpeg', 'gKnLU', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '确定要删除这个条目吗？此操作不可撤销。', 'JGEOS', '有点无语', 'indexedDBData', 'xfsEs', 'rpvsD', 'header-actions', 'characterLastScripts', 'BTkSN', 'WDoLQ', 'diary-entry-input', '<br>', 'summary-textarea', 'getHours', '.char-info-wrapper', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', 'agZQt', 'noir-custom-font-style', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'clipboard', '确定要删除这个好友圈吗？此操作不可撤销。', '图标处理失败:\x20', '-\x20你记得曾和“', '确定要删除这篇日记吗？此操作不可撤销。', 'QvzLF', '\x0a#\x20你的个性（节选）\x0a', 'HPiaV', 'wbvta', 'clock-color-toggle', 'execCommand', 'MrQpA', 'SCiaa', '正在清空旧数据...', '对方正在行动中...', 'AbortError', '星期三', 'group-edit-members', 'padStart', 'HCheR', '好委屈但是不能哭', 'sYvoU', '\x20/\x20', 'VEGax', 'audio-file-input', 'sort', 'openai', 'last_message_preview', 'HdpXv', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'AI返回了无法识别的数据格式。', 'KFRMV', 'ICYpb', 'khKOx', 'onload', 'toBlob', ')，启动兼容模式...', 'UmnHv', 'is-entering-from-right', '收到的原始、有问题的文本:', 'load-more-btn', 'rnQHe', 'srFEx', 'fetch-models-button', '好友圈档案柜是空的，无需净化。', 'cancel-listen-together', 'qnJnp', 'add-user-profile-button', 'images', 'readwrite', 'zwCDv', 'blob', ']\x20[image]', '成功获取\x20', 'IFvAl', 'white', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'jPJXD', 'music', 'model-dropdown', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', '执行好友圈数据净化...', '编辑角色', 'LqAlM', 'items', '好友圈\x20', 'uAflf', 'VdUyp', '解析AI剧本JSON失败:', '请求AI更新:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '需要至少2个角色才能创建群聊。', 'OiCRV', '”的笔记，内容是：“', '默认米白', 'insertAdjacentHTML', 'diaryCurrentPage', 'FWHPk', 'modal-text', '在“一起听”邀请中，净化封面失败:', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'bAlUa', 'bYsni', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>', '对不起', ',\x20ID:\x20', 'quoted-content', 'char-edit-sprite-', 'shift', '哼，这不是图片，你想让我压缩什么？', 'YrrHW', '\x0a\x0a#\x20当前任务指令\x0a', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'isOffline', 'group-settings-bind-user', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', '\x0a\x0a#\x20用户的动态\x0a', 'iQmkM', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'musicWidgetPosition', 'yGNUU', 'location_name', 'YoejX', 'DHWQK', 'bQIyD', 'accounting-title', 'item_name', '-input', 'show-chat-view', '已复制到剪贴板！', '.custom-multiselect', '#ff8c66', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'delete-message-button', 'zWCfW', 'PtvCh', 'wPrlj', '编辑用户', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', '\x0a\x20\x20近期记忆:\x0a', 'span', 'Yijxq', 'toDataURL', 'getItem', 'UQsqr', 'snoop-copy-summary-btn', 'no-action-modal', 'forceWhiteClock', '?word=', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'edit-message-backdrop', '生成动态回复失败:', 'sprite-resize-handle', 'byqhe', 'ended', 'xDFwi', 'char_sprite_', 'spriteTransform', 'kkpHH', 'save-group-settings-button', 'LioPW', 'live-preview-style', 'mahwT', 'home-time', '图片加载失败', 'target', 'block', 'snoop-app-view-container', 'KYjPN', 'accounting-content-area', 'widget-play-pause-btn', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', '加载\x20', 'meeting-list-container', 'widget-bg-input', 'diary-entry\x20', 'csqXa', 'app-diary', 'stringify', 'font-input', 'activeUserProfileId', 'ZTgxq', '\x20(分享了歌曲:\x20', '被萌到', 'rzwzd', 'onclick', 'user-send-post-button', 'ZNYDw', 'fhddy', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'settings', '获取中…', '正在为你搬运旧壁纸到新仓库...', 'status', 'fdvku', 'charAt', 'group-settings-screen', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'backgroundColor', 'gskRx', 'SlKqr', 'getElementById', 'backgroundImage', 'wants', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'position', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '哼，正在开始净化你那被污染的聊天记录...', 'back-to-home-from-diary-list', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'upload-widget-bg-button', 'ikeUC', '[AI返回了无法解析的剧本:\x20', 'char_wallpaper_', 'songName', '\x20avatar', '正在搬运旧徽章...', 'xcJzf', 'GZdUE', 'characterName', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'htVeh', 'char-edit-offline-bg-input', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'emoji', 'cGYrV', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', 'MVGBi', '-\x20**对话状态提示**:\x20你们已经有\x20', '动态页背景已更换！', 'hZsjr', 'customIcon_', 'canvas', 'likes', '交通出行', 'numeric', 'activeListenSession', '8px', 'QquXu', 'checked', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', 'snoop-app-icon', 'quoted-message-in-bubble', 'querySelectorAll', 'SvSfk', 'DqExc', '正在连接同步频道...', 'HSJFl', 'lkPZf', 'lVkEb', 'then', 'bunpN', 'iVJVj', 'global-player-play-pause-btn', '#snoop-app-view-container\x20.snoop-app-content', 'generativelace.googleapis.com', '错误：第一个好友圈\x20\x22', '#message-anchor', '.bubble-', '\x0a#\x20任务:\x20生成聊天记录\x0a根据角色的背景，创造出2\x20-\x203个合理的、非用户的虚拟联系人（NPC），比如家人、老同学、神秘网友等，需要符合角色的设定，不要凭空生成并设定里没有提及过的兄弟姐妹。然后，为每个联系人生成一段3-5条但信息量巨大的聊天记录。对话必须暗示出独立于用户的、属于角色自己的生活和秘密。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'JjTna', 'removeEventListener', 'bfHyb', '原始文本:', '\x22\x20class=\x22post-image\x22></div>', 'model', 'sticker-content', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', 'char-edit-name', 'mbmoy', 'summarize-backdrop', 'candidates', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'UsikD', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20即使你的【近期记忆】一片空白，你也【必须】严格依据你的【核心人设】和【世界观设定】来进行创作。\x0a-\x20【严禁】将“', 'diary-list-screen', '无描述', 'transfer-modal', 'head', 'hBppL', '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'MdBkS', 'dzxKq', 'all', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'zmEZb', '无语但是随便吧', 'setAttribute', '图片处理失败:\x20', 'upload-font-button', 'save-user-profile-button', 'wb_', 'scrollIntoView', 'UocBq', 'isGenerating', '这不是一张有效的Noir角色卡。', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', 'hkYiA', 'JZTVp', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', '>>\x20', 'diary-write-modal', 'IjSog', '正在整理…', 'User\x20cancelled', 'lxTRe', 'nBWiA', 'label', '歌名和歌手都不能为空！', '确定要清空好友圈“', 'events', '正在升级聊天数据结构...', 'user_', 'SvQtp', '未知用户', 'sprite-adjust-button', '请根据以上所有规则，生成\x20', 'lyehh', 'remove-font-button', 'EdInA', '编辑群成员功能正在开发中...', 'some', '找不到角色信息。', '--\x20点击选择\x20--', 'cancel-edit-button', 'jKqlG', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', '来源：', '”买过：“', 'OjyOV', 'qIAUP', 'IwIFD', '\x0a\x0a#\x20关于对话者“', 'KSHFe', 'ixfjS', 'accounting-screen', '#snoop-app-view-container\x20.snoop-app-header', ']\x20[', 'classList', 'object', 'world-book-checkboxes-container', 'clear', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'cover', '赞同！渲染效果一级棒！', 'galgame-date', 'music_cover_migrated_', 'char_offline_bg_', 'lastTimestamp', 'description', 'wallpaper_main', '\x20(当前)', 'XvsnM', 'rhPlh', 'getFullYear', 'ILWHf', '#66b3ff', 'statusText', 'reset-card-button-2', '”（用户）的信息当成你自己的。Ta只是与你互动的人，不是你。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '[发送了图片]', 'oORrw', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', '\x20个模型。', 'HPNRN', 'none', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'match', '.app-icon-img', 'qCMYv', 'group-chat-name', '11670ARXfay', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'json', 'XaJJn', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>', 'LCQIv', 'JLQyZ', 'objectStoreNames', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'yxVDC', 'Creating\x20object\x20store:\x20music_library', 'Fetch\x20request\x20was\x20aborted.', 'ELQJQ', 'dviSy', 'friend-circle-edit-name', 'className', 'krQwv', 'toLowerCase', 'JSON\x20解析失败!\x20错误原因:', 'provider', 'vJrRN', '已恢复默认字体。', 'tZVxV', 'ykCgo', 'QBvqJ', 'snoopList', '-\x20[', 'uDGoX', '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（', '<div\x20id=\x22snoop-dock\x22></div>', '.music-post-play-icon,\x20.music-share-play-icon', 'hzgsJ', 'CAaZs', 'GLIav', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '”聊过天，关于：“', 'music-library-item', 'LbavW', 'feed-bg-input', 'qCFUu', 'snoop-phone-header', '\x0a-\x20人设:\x20', 'wnPkW', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'chatHistory_chat_', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'MVYam', 'zKLGs', 'translateX(-50%)', 'createElement', '兼容模式成功，已将\x20', 'nDmxR', '在你那乱七八糟的文本里没找到“歌名”！', 'hLVMR', 'EMKHw', 'pause', 'random', 'mAQKn', 'appIconPosition_app-snoop', 'IADln', 'ZfuXc', '.snoop-app-content', 'Ymqul', 'quote-preview-area', 'DjBah', 'mouseup', '暗夜紫晶', 'UdCMF', 'meeting-message-input', '导入失败了，笨蛋:\x20', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'vUkOl', 'flAeX', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'JPGPu', 'iEwgT', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-get-reply-button', 'decorative-badge', '未知歌曲', 'style-', '正在焚烧【', '确定要重置所有小组件的位置吗？它们会回到初始位置。', '-\x20[动态]\x20', 'WWiAK', 'left', ')，已跳过。这不应该发生，数据库可能已损坏。', 'MBakE', '的日记本', 'ZOaCS', 'ERBfz', 'center', 'TprJm', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', 'dMCQg', 'qfIvo', '\x0a#\x20交换日记摘要\x20(你和\x20', 'typing-indicator', '<div\x20class=\x22post-likes\x22>', 'xEGAB', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20', '樱花薄粉', 'UtSgZ', '\x0a\x20\x20\x20\x20姓名:\x20', 'UMNrB', 'lt-ui-close-btn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', 'is-exiting-left', '.json', 'Mibwg', 'music-library-screen', 'wnosB', 'uXsJu', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'AuivU', 'snoop-dock', 'char_', '小组件背景已恢复默认。', 'eRywk', 'ROYpz', 'border-bottom:\x201px\x20solid\x20var(--border-color);', 'cursor', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', 'onloadend', 'warn', 'jozom', 'screenX', 'DRgvY', '请先输入\x20API\x20接口地址和密钥。', '#diary-action-reroll', 'DOMContentLoaded', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'AgHeW', 'hiYfl', '请输入有效的转账金额！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', 'character', 'setItem', 'name', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'edit-message-textarea', 'isFromLibrary', 'badgeState', 'Claude\x20API\x20错误:\x20', 'UqrMr', 'isArray', 'code', '60%', 'snoop-home-date', 'gvNff', 'ihpzY', 'card-widget-2', 'listenTogetherSession', 'User', '在准备动态回复时，读取图片失败:', 'join', 'Hbajq', 'sprite-reset-button', '刷我的卡', '#diary-action-cancel', 'toggle-meeting-view-button', '个人资料已保存！', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', '群聊\x20(', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'input', '[AI分享了音乐：', '.screen.active', '\x20张旧图片。应用即将刷新。', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', '.snoop-chat-item', '最近没有动态记录。', 'KUvvP', 'VrVId', 'AIjYp', 'yTUaP', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', '委屈哭', 'displayUrl', 'contains', 'lAaQq', 'characters', 'musicPlayerState', 'utkbk', 'post_user_', 'Escape', '哼，就按你说的办好了。', 'edit-message-modal', 'Noir\x27s\x20Temporal\x20Patch\x20failed:', '你的任务是【首次生成】这个应用的内容。', 'chat_', '264075UwBnBo', 'JgPnM', 'HZYmS', '乐于助人的助手', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', '”吗？此操作不可撤销。', '表情包已保存！正在刷新应用...', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'cmdIT', 'onsuccess', 'quotedMessage', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'groupChatCreate', '#\x20发生错误：\x0a', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'stretch', 'style', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', '编辑条目', 'VYGXS', '\x20内容失败:', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', '世界书条目已保存！', 'add-chat-button', 'New\x20request\x20started', 'focus', '”已创建！', 'sxKHe', 'QZYlY', 'emote', 'LzGDE', '#f2b7c6', 'wmIDz', 'memberCharacterIds', 'userProfileList', 'HsNPI', '未命名角色', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'LMUBS', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', 'Ymvqz', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'scrollHeight', 'chat', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', 'groupSettings', 'chat-image-input', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'adGdn', '有点生气', 'zHCOr', 'push', 'transform', '加载见面背景失败\x20for\x20', '净化完成！总共迁移了\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'custom-stickers-input', '字体已应用！(Font\x20Applied!)', 'AaFMA', 'sQMCT', 'YraCP', 'edit-message-button', 'tencent', '音乐数据升级完成，迁移了\x20', 'baTbE', 'sprite-slider-y', 'editing-world-book-id', 'fGeFE', 'log', '至少要选择一个圈内成员！', 'chat-summarize-button', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'umtLp', '星期二', 'galgame-view-container', 'DXeCk', 'music-feed-container', 'author', 'angiX', 'TTkTg', 'pOVsp', 'Biiec', 'drawImage', 'gap', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', '35%', '歌曲名称', '没有找到相关结果。', 'tDxyP', 'speaker', 'lyrics', 'musicUploadAltar', 'yUxZu', 'edit-delete-char-button', 'diaryView', 'qYDIF', 'UwTLX', 'option', 'toFixed', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'iPuYR', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'gjKXS', '正在准备图片数据...', 'bcCRT', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'exp_', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'NKubR', 'delete-friend-circle-button', 'HuwZi', '\x20[并附上了一张图片]', 'back-to-snoop-list-from-phone', '新建好友圈', 'xbMoE', 'filled', 'group_avatar_', '\x22\x20吗？所有聊天记录将被永久删除。', '用户资料已保存！', '[表情]', 'NoirCustomFont', 'YouuD', 'beforeend', 'worldBook', 'change', 'vwgtb', '桌面已重置，即将刷新...', 'whispers', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'clockPosition', 'customStickers', 'dock', 'badge-image', 'sprite-slider-scale', 'friend-circle-list-container', 'footprints', 'height', '987492Mcajvs', '角色“', '加载自定义表情包失败，真是没用。', 'novel', 'Uuhfu', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'VGgQU', ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“', 'oJUwt', 'FtLLE', 'rcnYM', '哼，你这字体文件有问题，用不了。', 'sNjfX', 'ZAwYr', 'feed-loader', 'EIVey', 'BBWUo', 'themeLightness', '好了，请基于以上所有信息，开始写今天的日记吧。', '--primary-lightness', 'display', '”，在那里“', 'HTRBh', 'AKFge', 'meeting-scene-view', 'copy', 'loading', '好友圈名称不能为空！', '#99ff99', 'BAdye', 'widget-prev-btn', 'setProperty', '加载徽章图片失败', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'review', 'kByeI', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', '设置已保存！', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'kawYE', 'VWFKo', 'listen-together-card', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'UCJAr', 'chat-view-pane', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '我是小丑呜呜', 'isPlaying', 'findIndex', 'put', '\x20-\x20', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', 'UPoub', 'wweLR', 'whxIm', '\x0a\x0aINPUT:\x0a', 'CFPcF', 'appIconPosition_app-user-profiles', 'YXGNu', 'OGcfA', 'width', 'removeItem', '很好哦', 'confirm-transfer-button', '##\x20', 'listen-together-song-list', 'authorType', 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg', 'querySelector', 'system', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'QIJkB', 'narrator', 'daily-expenses-list', 'iqfoK', 'forEach', 'Jrnux', 'DMDjZ', '找不到要清空的聊天记录。', 'button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'rocsK', 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', '正在打包数据，请稍候...', 'AFxBq', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'toLocaleTimeString', '你还没有写日记。', 'VkmFQ', '-\x20**你们最后一次互动是在**:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'wTGCn', 'user-persona', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', '</span>:\x20', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'char-edit-offline-bg-preview', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', '新用户\x20', 'gTpVH', 'app-settings', 'ZjjbR', 'endsWith', 'BOGeY', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', 'getMonth', '\x20个成员', '分钟前', '搜索失败:\x20', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'pop', '\x22\x20的聊天记录已清空。', '你好，世界\x20(Hello,\x20World)', '加载已保存字体失败:', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'setDate', 'normal', '错误:\x20', 'dddxd', 'vertical', 'DUGQU', 'group-delete', 'EHmwl', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'reset-card-button', '无法保存状态，浏览器可能禁用了存储功能。', 'GUenW', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', 'ZabVr', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'feed', '点击选择\x20.jpg\x20或\x20.png', 'BVuDz', '\x0a\x20\x20相关记忆:\x0a', '\x20账单', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'categorizedExpenses', '”的补充信息\x0a', 'iQjjo', 'chat-music-button', 'JdmiU', '\x0a##\x20世界书条目:\x20', '63970Ujteub', '正在迁移旧的动态数据到新的好友圈系统...', 'app-wallpaper', '.load-more-btn', 'xPqdU', 'ROoXF', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'group_bg_', '浏览器历史', 'eGsOC', 'user-avatar-preview', '<input\x20type=\x22checkbox\x22\x20value=\x22', '”，里面有\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', '大家好像不知道该怎么回复...', '.app-icon', 'JtCAn', 'ZMDcw', 'NpQiK', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'lyrics-file-input', 'eySZL', 'lFFUO', 'user-post-textarea', 'diary-prev-button', 'alignItems', '大家正在赶来回复...', '/v1beta/models/', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'uWekm', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'AI返回的原始文本:', 'KqIjU', 'NBTST', '导入角色卡失败:', '徽章已移除。', 'Failed\x20to\x20remove\x20corrupted\x20state\x20from\x20localStorage:', 'sFljk', '<img\x20id=\x22', '创建新角色', 'activity_description', '确定要删除群聊\x22', 'ksXyv', 'LAUBZ', 'dataset', 'boundUserProfileId', '29%', 'column', 'card-image-2', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'floor', '恢复失败了:\x20', '[AI发送了表情：', '新建条目', '\x22\x20已删除。', 'BzwKp', '用户分享音乐失败:', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'post_', 'dtVzk', '\x0a##\x20', 'borderBottom', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'home', '你是一个乐于助人的AI助手。', 'WSOwq', 'OUXll', '条目已删除。', '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>', 'snoop_cache', 'vkqUS', 'perChatContextLines', 'cKxCU', 'world-book-editor-title', 'ekXVl', '#ffb366', 'app-chat', 'lt-ui-lyrics-container', 'PbRtM', '#diary-action-delete', 'WRSuO', 'createObjectURL', 'backgroundSize', '-preview', '医疗健康', '星期五', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '\x20的旧格式数据翻译。', 'eSsxP', 'eRgmX', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'AXaTr', 'activeDiaryCharacterId', '\x0a-\x20**对话状态**:\x20群里在', 'upload-wallpaper-button', 'gvvVW', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', 'has', '\x20转账\x20', 'KtBQK', 'UlGbF', 'is-entering-from-left', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', '[图片]', '请在动态或聊天中播放', 'LRmwQ', 'chat-messages', 'character-list', 'oWjfi', '分钟前聊过，请注意衔接。', 'path', 'confirm-music-input', 'friend-circle-edit-screen', 'VXdkz', 'char-edit-css', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', '\x0a\x0a#\x20关于群聊参与者“', 'user-name', '错误：找不到此好友圈绑定的用户！', 'json_object', '\x0a-\x20你正在为一个名为“', 'noir_migration_music_v1_complete', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'url(', '|||CMD|||', '的个人专属世界观设定\x0a', 'googleapis.com', 'textShadow', 'UTvTQ', 'xWthI', 'oFvqD', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'wEKHs', '已送达', '购物消费', 'app-music-library', '徽章已更换！', 'ghLhH', '浏览器', 'export-all-data-button', 'cardState2', 'IXrcv', '刚刚发布了一条动态，内容是：“', 'cbEaO', '#a7c7e7', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'keydown', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'widget-cover-art', 'reset-badge-button', '确定要删除这笔记录吗？', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'editing-friend-circle-id', '<img\x20src=\x22', '上传失败了，笨蛋！\x20', '\x20(ID:\x20', '-\x20你的备忘录里有一条叫“', '超激动我来了', 'displayedMessageCount', '你的任务是【更新】下面的已有内容。你可以增加新的条目、延续已有的对话、或者标记某个备忘录为“已完成”。【绝对禁止】删除或大幅修改旧的条目，除非故事发展需要。', 'XFxEI', '无法从\x20IndexedDB\x20加载聊天图片:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'diaryPressTimer', '正在搜索音乐...', 'main', 'customWallpaper', 'lcnOM', 'kdbHm', 'message-anchor', 'FlEfb', 'SGBBV', '</div></div></div>', 'eVnoo', 'oFlpc', '在准备API数据时，从IndexedDB读取图片失败:', 'remove', 'gTdgg', '[用户发送了表情：', 'drdSl', '1em', 'AcUTV', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', 'postType', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'yJfdC', 'qWsWz', 'mUUqq', '找不到角色。', 'zfdEv', 'qOert', 'suKgX', 'zXxyy', 'lhhZE', 'split', 'reVOz', '卡片\x202\x20已更换！', 'listen-together-invite', 'div', 'sender', 'fBbCb', 'from', 'readonly', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'meetingViewMode', 'undefined', '未知艺术家', '餐饮美食', 'iWXGT', 'NPMwp', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'opacity', 'XSzux', 'play', '已恢复默认。', 'Failed\x20to\x20parse\x20state\x20from\x20localStorage,\x20resetting.', 'qllnM', 'data', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'music-input-artist', 'upload-card-button-2', 'worldBookEditor', '好的，我记住了这些人设和历史。现在我们开始对话。', 'replace', 'laIaz', '\x20.app-icon-img', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'parts', 'add', 'POST', 'accepted', 'appIconPosition_', '<div\x20class=\x22post-body\x22>', 'IvgmM', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'flex', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', 'galgame-sprite-container', 'zh-CN', '服务器错误:\x20', 'GkERH', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'ZLFgA', 'italic', 'context-lines-per-chat', 'toggle', '.message-container', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'marginBottom', 're-record-button', 'true', 'aTVRh', 'char-edit-persona', 'diaryList', '回复\x20', 'KrFQR', 'member-selection-item', 'length', 'qarjT', 'horizontal', 'WspXj', 'NDaGd', '加载立绘失败:', 'meeting-send-button', '字体应用失败:', 'chat-listen-together-button', 'MiGDi', 'music-widget', '点击选择\x20.lrc', 'global-player-next-btn', 'lt-ui-song-title', 'linkedWorldBookIds', 'insertBefore', 'char-name-header', 'rAAUM', 'set-active-user-button', 'song_', '正在为你切换新的歌曲...', 'YVciM', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>', 'rDcTq', 'edit-current-circle-button', 'musicId', 'inline-block', 'touchstart', 'jttgI', 'CUWCv', 'sprite-confirm-button', 'group-settings-name', 'rtZyZ', 'listen-together-ui', '群聊已解散。', 'read', '</div>', 'stopPropagation', 'world-book-screen', 'kUixb', 'uptLl', 'rawResponse', '<div', 'choice-create-character', 'transfer', '正在准备音乐数据...', '[用户向\x20', '2-digit', '</label>\x0a\x20\x20\x20\x20', 'SpJty', '/v1/chat/completions', 'paused', 'POuLf', 'user', 'XWqrF', 'refresh-feed-button', 'revokeObjectURL', '加载壁纸失败:', 'IndexedDB\x20failed\x20to\x20open', '已经生成了今日账单！想看就去“看账本”标签页。', ':streamGenerateContent?key=', 'fVWRS', '10px\x20auto', 'import-data-input', 'snoopPhone', 'JfIOZ', '请根据以上所有信息，开始分析并返回JSON。', '动态已清空。', 'remark', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'decode', 'snoop-phone-screen', 'world-book-editor-screen', '--widget-cover-image', '&alt=sse', 'expense-description', 'diary-list-container', '我是女仆', '确定要重新记录吗？当前的账单会被删除。', 'ehilv', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'SFgiT', '正在升级音乐卡片数据...', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '确定要清空\x22', '买新衣服', 'parentElement', 'AgCOF', '[用户分享了音乐：', 'getSelection', 'mSHHp', '转给\x20', 'group-avatar-input', 'diary-next-button', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'chatHistory_', 'appIconPosition_app-world-book', 'persona', '群聊「', 'asyOv', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'font-preview-text', '正在写入新数据...', 'vdodw', 'store_name', 'test', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'widget-title', '好友圈净化完成，正在重新存档...', '&quot;', '星期一', 'group-chat-member-list', '-\x20你在“', 'writeText', 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg', '\x0a\x20\x20人设:\x20', 'user-profile-screen', 'NDkJe', 'YKBwW', '我是垃圾', '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>', 'rIUeg', '<div\x20class=\x22post-comments-container\x22>', 'charId', 'shiftKey', 'catch', '确定要彻底清空【', 'Enter', 'max', '保存壁纸失败:', 'qVqcz', '群聊音乐搜索失败\x20(', 'getAll', 'JCOFB', 'Izvcl', 'EPfGI', 'isFinite', 'speaker-user', 'JqdMx', 'bNdHb', 'RTpgD', 'abort', 'qDbwH', '.message.ai', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'toLocaleString', 'WMwmC', '我的动态', 'badge-input', '#world-book-checkboxes-container\x20input:checked', 'sticker', 'thought', '》吗？', 'galgame-text', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'result', 'reset-feed-bg-button', '保存失败:\x20', '生成动态时发生错误:\x20', 'onerror', 'xMPGI', 'gwfrR', 'ucdNp', 'jACHf', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', '--feed-bg-image', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'keys', 'user-post-image-button', 'AI整理失败了，哼:\x20', 'createObjectStore', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '\x0a你只扮演【', 'widget-artist', 'snoop-log-back-btn', 'world-book-item', 'FeAxW', 'back-to-world-book-list', 'DYaKr', '位置已重置，正在刷新...', 'happy', 'themeHue', '#app-dock-bottom-left\x20#', 'cdREY', 'appIconPosition_app-music-library', 'Noir_FileSystem', 'total_cost', '书记官正在奋笔疾书...', 'netease', 'string', 'backgroundPosition', '</p>', 'hDEGM', 'altar-slot-info', '壁纸已更换！', 'FvPKJ', 'cancel', '选择聊天', 'speaker-ai', 'startsWith', 'info', 'localStorageData', '小时前），可以简单问候一下对方现在的状态。\x0a', '（对话结束）', 'translateX(-', 'ciHXb', 'audio', '当前聊天', 'odKyu', '好友圈数据升级完成，迁移了\x20', 'bVwRr', 'number', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', 'lKQMs', '星期六', 'pCzwE', 'cover_placeholder_', 'xLWjY', 'AlshV', 'aUbzz', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'message-bubble-row', '对方正在输入...', 'is-exiting-right', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'oncomplete', 'meeting-list-screen', 'character-edit-screen', 'defaultPrevented', 'BOgcr']; _0x27bb = function () { return _0x1b7b34; }; return _0x27bb(); } function _0x1be777(_0x3838cb) { const _0x309ba4 = _0x359829; if (!_0x3838cb) return []; const _0x82d030 = String(_0x3838cb)['trim'](), _0x304b37 = _0x82d030[_0x309ba4(0x80a)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x309ba4(0x30c)](_0x2be683 => _0x2be683[_0x309ba4(0x345)]())['filter'](Boolean); if (_0x304b37[_0x309ba4(0x84b)] > 0x0) { if (_0x309ba4(0xab0) !== _0x309ba4(0x5dc)) return _0x304b37[_0x309ba4(0xab4)](0x0, 0x9); else _0x4fd27b[_0x309ba4(0x963)](_0x309ba4(0x9ff), _0x288fda); } return [_0x82d030][_0x309ba4(0x1f9)](Boolean); } const _0x1e4979 = new Promise((_0x3c5646, _0x464b51) => { const _0x5914e7 = _0x359829, _0x292615 = indexedDB['open'](_0x4e50b4, 0x3); _0x292615[_0x5914e7(0x8ec)] = () => _0x464b51(_0x5914e7(0x885)), _0x292615[_0x5914e7(0x62f)] = () => _0x3c5646(_0x292615[_0x5914e7(0x8e8)]), _0x292615[_0x5914e7(0x25c)] = _0x3265da => { const _0x1b576f = _0x5914e7; if ('urqzt' === _0x1b576f(0xac3)) { const _0x299426 = _0x3265da[_0x1b576f(0x492)][_0x1b576f(0x8e8)]; console['log']('Upgrading\x20database\x20to\x20version\x20' + _0x299426[_0x1b576f(0x177)] + _0x1b576f(0x133)), !_0x299426[_0x1b576f(0x56c)]['contains'](_0x1f7efd) && (_0x1b576f(0x6b5) !== 'IdbiX' ? (console[_0x1b576f(0x66c)](_0x1b576f(0x23d) + _0x1f7efd), _0x299426['createObjectStore'](_0x1f7efd, { 'keyPath': 'id' })) : _0x511b94[_0x1b576f(0x329)](_0x5409cf)), !_0x299426['objectStoreNames'][_0x1b576f(0x61a)](_0x1b576f(0x94b)) && (_0x1b576f(0x4af) !== _0x1b576f(0xa1d) ? (console['log']('Creating\x20object\x20store:\x20music_library'), _0x299426[_0x1b576f(0x8f7)](_0x1b576f(0x94b), { 'keyPath': 'id' })) : _0x5b2c87[_0x1b576f(0x95e)] = ''), !_0x299426[_0x1b576f(0x56c)][_0x1b576f(0x61a)](_0x569363) && (console[_0x1b576f(0x66c)]('Creating\x20object\x20store:\x20' + _0x569363), _0x299426[_0x1b576f(0x8f7)](_0x569363, { 'keyPath': 'id' })); } else { if (!_0x1bf3b1['activeQuote']) return; _0x400775[_0x1b576f(0xab3)] = _0x1b576f(0x848) + _0x5661e8[_0x1b576f(0x9e3)][_0x1b576f(0x80f)], _0x513e6f['textContent'] = _0x4e5ccd[_0x1b576f(0x9e3)]['content'], _0x3f254e[_0x1b576f(0x636)][_0x1b576f(0x6c5)] = _0x1b576f(0x493); } }; }); async function _0x34b988(_0x122db3) { const _0x4a6e80 = await _0x1e4979; return new Promise((_0x2a2b6b, _0x4d860a) => { const _0x29377e = _0x2f04, _0x323c5e = _0x4a6e80[_0x29377e(0x287)](_0x1f7efd, _0x29377e(0x812)), _0x42e187 = _0x323c5e[_0x29377e(0x301)](_0x1f7efd), _0x59806d = _0x42e187['get'](_0x122db3); _0x59806d[_0x29377e(0x62f)] = () => _0x2a2b6b(_0x59806d[_0x29377e(0x8e8)] ? _0x59806d[_0x29377e(0x8e8)]['blob'] : null), _0x59806d['onerror'] = () => _0x4d860a(_0x59806d[_0x29377e(0x963)]); }); } async function _0x68b1d8(_0x42de53) { const _0x4cd160 = await _0x1e4979; return new Promise((_0x240a85, _0x2dfa8b) => { const _0x1cf3ce = _0x2f04; if (_0x1cf3ce(0x4fd) !== _0x1cf3ce(0x9ef)) { const _0x598f8b = _0x4cd160[_0x1cf3ce(0x287)](_0x569363, _0x1cf3ce(0x812)), _0x4bc761 = _0x598f8b[_0x1cf3ce(0x301)](_0x569363), _0x3817b8 = _0x4bc761[_0x1cf3ce(0x23f)](_0x42de53); _0x3817b8['onsuccess'] = () => _0x240a85(_0x3817b8[_0x1cf3ce(0x8e8)] ? _0x3817b8['result'][_0x1cf3ce(0x822)] : null), _0x3817b8[_0x1cf3ce(0x8ec)] = () => _0x2dfa8b(_0x3817b8['error']); } else _0x21a07f[_0xd6de49] = _0x1c9c0f['parse'](_0x10f8c8); }); } async function _0x1879ac(_0xc0f613, _0x56c32f) { const _0x30ea8b = await _0x1e4979; return new Promise((_0x329f12, _0x57666f) => { const _0x5d1045 = _0x2f04, _0x2d71dd = _0x30ea8b[_0x5d1045(0x287)](_0x569363, _0x5d1045(0x431)), _0x7970ab = _0x2d71dd[_0x5d1045(0x301)](_0x569363), _0x523ac = _0x7970ab[_0x5d1045(0x6e5)]({ 'id': _0xc0f613, 'data': _0x56c32f }); _0x523ac[_0x5d1045(0x62f)] = () => _0x329f12(), _0x523ac[_0x5d1045(0x8ec)] = () => _0x57666f(_0x523ac[_0x5d1045(0x963)]); }); } async function _0x5ea332(_0x1a4e5a) { const _0xefc60a = await _0x1e4979; return new Promise((_0x2dc4af, _0x187e6f) => { const _0x1dee2b = _0x2f04, _0x571e51 = _0xefc60a[_0x1dee2b(0x287)](_0x569363, _0x1dee2b(0x431)), _0x3bba5d = _0x571e51[_0x1dee2b(0x301)](_0x569363), _0x1bba50 = _0x3bba5d[_0x1dee2b(0x1e3)](_0x1a4e5a); _0x1bba50[_0x1dee2b(0x62f)] = () => _0x2dc4af(), _0x1bba50[_0x1dee2b(0x8ec)] = () => _0x187e6f(_0x1bba50[_0x1dee2b(0x963)]); }); } async function _0x5a7151(_0x64ef4e, _0x1e107a) { const _0x491c13 = await _0x1e4979; return new Promise((_0x411d32, _0x55409b) => { const _0x1fd910 = _0x2f04; if ('mhJzn' === 'pMdzr') _0x406679 = _0x386836; else { const _0x5e6dad = _0x491c13[_0x1fd910(0x287)](_0x1f7efd, _0x1fd910(0x431)), _0x3997ab = _0x5e6dad[_0x1fd910(0x301)](_0x1f7efd), _0x5b077a = _0x3997ab[_0x1fd910(0x6e5)]({ 'id': _0x64ef4e, 'blob': _0x1e107a }); _0x5b077a[_0x1fd910(0x62f)] = () => _0x411d32(_0x5b077a[_0x1fd910(0x8e8)]), _0x5b077a[_0x1fd910(0x8ec)] = () => _0x55409b(_0x5b077a['error']); } }); } async function _0x1d61a7(_0x5ca30e) { const _0xf58cdc = await _0x1e4979; return new Promise((_0x36b7c8, _0x27fd54) => { const _0x231f36 = _0x2f04; if (_0x231f36(0x124) === _0x231f36(0x5c2)) _0x150593[_0x231f36(0x87e)] ? _0x1a42e7['play']() : _0x426711[_0x231f36(0x59d)](); else { const _0x115648 = _0xf58cdc[_0x231f36(0x287)](_0x1f7efd, _0x231f36(0x431)), _0x1f1343 = _0x115648[_0x231f36(0x301)](_0x1f7efd), _0x1ba456 = _0x1f1343[_0x231f36(0x1e3)](_0x5ca30e); _0x1ba456[_0x231f36(0x62f)] = () => _0x36b7c8(), _0x1ba456[_0x231f36(0x8ec)] = () => _0x27fd54(_0x1ba456[_0x231f36(0x963)]); } }); } function _0x22dea8(_0x1595b3) { const _0x464312 = _0x359829; return fetch(_0x1595b3)[_0x464312(0x4ea)](_0x84d6ff => _0x84d6ff[_0x464312(0x433)]()); }

  </script>



  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

</body>

</html>
